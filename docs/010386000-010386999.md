# StackOverflow 问答 10386000-10386999

# c# - 仅使用服务的 WCF 证书身份验证（无客户端证书）

> ID：10386003
> 
> 赞同：2
> 
> 时间：2012-04-30T15:12:02.237
> 
> 标签：c#, wcf, authentication, x509certificate, nettcpbinding

我目前正在使用带有 Windows 身份验证的 netTcpBinding（用 C# 编写的程序）。我将远离域身份验证（添加不会在域上的新客户端），并希望通过用户名/通过身份验证来设置证书安全性。从目前为止我所阅读的内容来看，我不一定需要客户端证书（这很好；我将无法在每个客户端上安装服务的证书）。我的想法与使用来自受信任 CA 的证书导航到安全网站的思路相同。它承认它是受信任的，不会提出任何问题或麻烦，它只是接受证书！

到目前为止，我已经设置了服务证书（我们有来自 GoDaddy 的通配符证书），但是我无法弄清楚我必须对 app.config 文件进行哪些更改才能不需要客户端证书。

服务应用程序配置：

```
<serviceBehaviors>
   <behavior name="">
     <serviceMetadata httpGetEnabled="false" httpsGetEnabled="false" />
     <serviceDebug includeExceptionDetailInFaults="false" />
     <serviceCredentials>
       <clientCertificate>
         <authentication certificateValidationMode="None" revocationMode="NoCheck" />
       </clientCertificate>
       <serviceCertificate findValue="*.xxxxxx.com"
                           storeLocation="LocalMachine"
                           storeName="TrustedPublisher"
                           x509FindType="FindBySubjectName" />
     </serviceCredentials>
   </behavior>
 </serviceBehaviors> 
```

客户端 app.config：

```
 <security mode="Transport">
        <transport clientCredentialType="Certificate" protectionLevel="EncryptAndSign" />
        <message clientCredentialType="UserName" />
      </security> 
```

我知道我必须为用户名部分设置一个自定义验证器，但我想一步一步来。谢谢，如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:29:27.873

将 clientCredentialType 更改为 None。也在服务器配置上执行此操作。

# c# - 保护目录中某些文件类型不被提供的最佳方法

> ID：10386007
> 
> 赞同：3
> 
> 时间：2012-04-30T15:12:14.353
> 
> 标签：c#, iis-7.5, asp.net-3.5, file-security

我有一个目录“d:/resources/xxxxx/file-name.xxx”，它存储文件类型：.png、.xml、.pdf，这些文件可以由网站访问。在 IIS 中设置了一个虚拟目录“资源”，它指向这个硬盘驱动器位置，以允许通过 http 请求访问 .png 图像，但我通过它们的硬盘驱动器引用 .pdf 和 .xml 文件地点。这些文件是工作流程的一部分，因此它们必须全部保留在其当前目录结构中。

需要允许 IIS 提供 .png 图像，但出于安全目的，我不希望允许它提供 .pdf 或 .xml 文件。

我尝试设置一个 http 处理程序，它本来可以正常工作，但我无法使路径足够具体。如果我将它设置为“/resources/*”，那么我需要手动输出允许的文件类型，这有点奇怪。我无法将路径设置为“*.pdf”，因为应该允许其他目录访问其 .pdf 文件。

如果有人试图访问“www.mysite.com/resources/dir/mypdf.pdf”或“.../myxml.xml”但仍然允许访问，我只是在寻找一种直接的方式来限制访问。 png 和所有其他可能提供的文件类型。

另外，请让我知道我是否以错误的方式进行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T15:50:25.237

尝试在结束标记之前添加它以进行配置，看看它是如何做的：

```
<location path="/resources">
    <system.webServer>
        <handlers>
            <add name="PdfForbiddenHandler" path="*.pdf" verb="*" type="System.Web.HttpForbiddenHandler" resourceType="File" preCondition="integratedMode" />
            <add name="XmlForbiddenHandler" path="*.xml" verb="*" type="System.Web.HttpForbiddenHandler" resourceType="File" preCondition="integratedMode" />
        </handlers>
    </system.webServer>
 </location> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:34:44.593

要使用 IIS（7.x，经典模式）管理器 UI：

1.  展开您的站点并选择“资源”目录。
2.  在*功能视图*中，双击**处理程序映射**。
3.  在网格中，找到名为“ **StaticFile** ”的模块映射，双击此项；
4.  输入允许的文件扩展名，例如 *.png、*.gif 等。
5.  单击确定。

![在此处输入图像描述](../Images/e11cd9a446c934dcd0465d152f0d16df.png)

# java - 从终端读取是/否布尔值并产生一个带有输入值的 if else

> ID：10386011
> 
> 赞同：2
> 
> 时间：2012-04-30T15:12:32.373
> 
> 标签：java

我问一个用户他们是否想玩游戏..

```
 System.out.println("Would you like to play"); 
     read in yes or no value 
        if yes (display text) 
        else (display other text) 
```

我之前在程序中使用过扫描仪，我只需要它再次使用它。我需要用新变量声明另一个新变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:27:21.563

您可以执行以下操作：

```
 String yesOrNo = System.in.readLine();
    String textToDisplay = (yesOrNo.equals("Yes")) ? "text to display when yesOrNo equals yes" : "text to display when YesOrNo equals no"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T15:33:50.497

使用此方法：

```
scanner.nextBoolean() 
```

那么它会是：

```
System.out.println("Would you like to play?");
Scanner scanner = new Scanner(System.in);

if(scanner.nextBoolean()==true) {
    System.out.println("This will be fun");
} else {
    System.out.println("Maybe next time");
} 
```

* * *

编辑

* * *

```
System.out.println("Would you like to play?");
Scanner scanner = new Scanner(System.in);
String val = scanner.next();
if(val.equalsIgnoreCase("y")||val.equalsIgnoreCase("yes")) {
    System.out.println("This will be fun");
} else if(val.equalsIgnoreCase("n")||val.equalsIgnoreCase("no")) {
    System.out.println("Maybe next time");
} else { 
System.out.println("Invalid character"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-31T14:20:00.987

我只是偶然发现了这个问题，乍得 M 的答案是正确的，但是 - 就像上面提到的一些评论者一样 - 有一些错误。所以这是我没有错误的实现（这只是将用户输入保存到字符串变量的问题）：

```
Scanner scanner = new Scanner(System.in);
String userInput = scanner.next();

if(userInput.equalsIgnoreCase("y") || userInput.equalsIgnoreCase("yes")) {
    // y or yes
} else {
    // other character
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T18:48:00.883

为了简单起见，这里有一些东西供你玩：

```
import java.util.Scanner;

public class ScannerExample {

  public static void main(String[] args) {

    System.out.println("Would you like to play: 'y' or 'yes' to accept; 'n' or 'no' to reject; 'q' to quit:");
    Scanner scanner = new Scanner(System.in);    
    String token = "";

    while(scanner.hasNextLine())
    {
       token = scanner.nextLine().trim();

       if(token.equalsIgnoreCase("q")) System.exit(0);

       if(token.equalsIgnoreCase("y")||token.equalsIgnoreCase("yes")) 
       {
           System.out.println("Thanks for your interest!");
           System.exit(0);
       }
       else if (token.equalsIgnoreCase("n")||token.equalsIgnoreCase("no"))
       {
           System.out.println("That's a pity!");
           System.exit(0);
       }
       else
       {
           System.out.println("Oops, not a valid input!");
       }
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T17:15:07.720

根据dragon66 的建议，我正在实现预定义输入与用户输入的字符串比较。

```
System.out.println("Would you like to play? Or press Q to exit"):
    Scanner scanner = new Scanner(System.in);
    String affirmative = "yes";
    String affirmative2 = "y";
    String negative = "no";
    String negative2 = "n";
    String quit = "q";

if(scanner.next().equalsIgnoreCase(affirmative)||scanner.next().equalsIgnoreCase(affirmative2)) {
    System.out.println("This will be fun");
} else if(scanner.next().equalsIgnoreCase(negative)||scanner.next().equalsIgnoreCase(negative2)) {
    System.out.println("Maybe next time");
} else if(scanner.next().equalsIgnoreCase(quit)){ 
    System.out.println("Good bye");
    System.exit();
} else {
System.out.println("Invalid character");
} 
```

# java - 使用 JFace Tree 和 Eclipse RCP 为标签添加额外的图像/图标

> ID：10386012
> 
> 赞同：1
> 
> 时间：2012-04-30T15:12:34.177
> 
> 标签：java, tree, eclipse-rcp, jface

我在我的 Eclipse RCP ViewPart 中使用 JFace TreeViewer 对象，我想通过图像向我的一些节点上的标签添加一些附加信息。

本质上，图像应该位于标签文本的右侧并代表一个评级（我在想 1 - 5 星）

如果有办法做到这一点，我找不到它，有人知道吗？

如果没有，那么有谁知道在使用其他插件（如 Subclipse）时 eclipse 包资源管理器如何显示不同颜色的额外信息？我想如果我被迫使用它和“*”字符？（我试图查看源代码，但它非常抽象，目前有点超出我的理解，所以我只是问是否有人知道手头，我不是要求任何人为我挖掘源代码）

问候，

格伦

X

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:06:53.870

您使用的是 PackageExplorer 还是您自己的 TreeViewer ？

**1.PackageExplorer**：需要扩展ui装饰器。

```
<extension point="org.eclipse.ui.decorators">
    <decorator
    adaptable="true"
    class="org.example.com.PackageExplorerDecorator"
    id="org.example.filedecorator"
    label="File Decorator"
    lightweight="true"
    state="true">
 <enablement>
    <or>
       <objectClass
             name="org.eclipse.jdt.core.IMethod">
       </objectClass>
       <objectClass
             name="org.eclipse.core.resources.IResource">
       </objectClass>
    </or>
 </enablement> 
```

该类应如下所示：

```
public class PackageExplorerDecorator extends LabelProvider implements ILightweightLabelDecorator {

    @Override
    public void decorate(final Object resource, final IDecoration decoration) {
       decoration.addSuffix(..)
       decoration.addPrefix(..)
    }
} 
```

**2\. TreeViewer：**您可以尝试创建自定义小部件，或者只创建具有多列的TreeViewer（第一个用于树，第二个用于星星）。

[这](http://www.eclipse.org/articles/article.php?file=Article-CustomDrawingTableAndTreeItems/index.html)和[这](http://dev.eclipse.org/viewcvs/viewvc.cgi/org.eclipse.jface.snippets/Eclipse%20JFace%20Snippets/org/eclipse/jface/snippets/viewers/Snippet051TableCenteredImage.java?view=markup)可能对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T06:53:55.250

`SWT.MeasureItem`您可以通过向树添加和`SWT.PaintItem`侦听器来自定义绘制树项。查看[本教程](http://www.eclipse.org/articles/article.php?file=Article-CustomDrawingTableAndTreeItems/index.html)中的示例 5 。

为了在扩展区域上绘制选择突出显示，还要添加`SWT.EraseItem`listener 和 update `event.width`。

# c# - 使用 LINQ 更新列

> ID：10386016
> 
> 赞同：0
> 
> 时间：2012-04-30T15:12:56.037
> 
> 标签：c#, asp.net, .net, linq

我的表有两个 ID 字段（我没有放 2 个 ID，所以不要问我为什么）。一个是主键，另一个是可以为空的重复字段，它将包含主键本身的值。

```
public static void UpdateDuplicate_ID(Company updatingCompany)
       {
           Company tempCompany;

           using (var context = new TestLiveDataContext())
           {
               tempCompany = (from company in context.Companies
                             where company.Id == updatingCompany.Id
                             select company).FirstOrDefault();

               tempCompany.DuplicateId = updatingCompany.DuplicateId;

               context.SubmitChanges();
           }
       } 
```

上面的代码似乎不起作用。我无法用我的主键值更新重复的 id。谁能告诉我我是否在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:26:24.203

据我所见，`updatingCompany`似乎`tempCompany`是同一张唱片。

如果是这种情况，如果您稍后更改传入的值并再次保存，您可能会覆盖此方法之外的机会。

是否提出了一个问题，为什么不只是更改值，`updatingCompany`然后根据自己的上下文提交更改，而不是启动一个新的？

那是除非我误解了这个问题。

# oracle - SQL 加载程序错误：“可变长度字段超出最大长度。”

> ID：10386020
> 
> 赞同：9
> 
> 时间：2012-04-30T15:13:10.460
> 
> 标签：oracle, sql-loader

我有一个 SQL 加载器控制文件，

```
LOAD DATA  
INFILE 'test.txt'  
INTO TABLE TEST replace  
fields terminated "|" optionally enclosed by '"' TRAILING NULLCOLS  
( DOCUMENTID INTEGER(10),  
  CUSTID INTEGER(10),  
  USERID INTEGER(10),  
  FILENAME VARCHAR(255),  
  LABEL VARCHAR(50),  
  DESCRIPTION VARCHAR(2000),  
  POSTDATE DATE "YYYY-MM-DD HH24:MI:SS" NULLIF POSTDATE="",  
  USERFILENAME VARCHAR(50),  
  STORAGEPATH VARCHAR(255)
) 
```

当我在上面运行 SQL Loader 时，它给了我一个错误，
`Record 1: Rejected - Error on table TEST, column FILENAME. Variable length field exceeds maximum length.`

这是那一行..该列的长度远低于 255..

`1|5001572|2|/Storage/Test/5001572/test.pdf|test.pdf||2005-01-13 11:47:49||`

这是我在日志文件中注意到的一个奇怪的地方

`Column Name | Position | Len | Term | Encl | Datatype`
`FILENAME | NEXT | 257 | | | VARCHAR`

我在表格和控制文件中都将长度定义为 255。然而日志显示为 257？我尝试将控制文件中的长度降低到 253，所以它在日志文件中显示为 255，但同样的问题。

有什么帮助吗？这已经困扰了我两天了。

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-30T15:25:45.517

不要将数据字段定义为 VARCHAR2 和 INTEGER。使用 CHAR。大多数情况下，从文本文件加载数据时，您希望使用 CHAR，或者可能是 DATE，尽管它也是从文本格式转换而来的。大多数时候，您甚至不需要长度说明符。CHAR 字段的默认长度为 255。您的控制文件应如下所示：

```
LOAD DATA
INFILE "test.txt"
INTO TABLE TEST replace
fields terminated "|" optionally enclosed by '"' TRAILING NULLCOLS
(
  DOCUMENTID,
  CUSTID,
  USERID ,
  FILENAME,
  LABEL,
  DESCRIPTION CHAR(2000),
  POSTDATE DATE "YYYY-MM-DD HH24:MI:SS" NULLIF POSTDATE=BLANKS,
  USERFILENAME,
  STORAGEPATH
) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T15:59:01.957

+1 用于 DCookie，但要扩展它，区分表中指定的数据类型和 SQL*loader 控制文件中的数据类型很重要，因为它们的含义完全不同，令人困惑。

从查看[文档](http://docs.oracle.com/cd/B19306_01/server.102/b14215/ldr_field_list.htm#i1006714)开始，并注意在加载常规文本文件时，您需要使用“可移植”数据类型。

Varchar 是一种“不可移植”的类型，其中：

> ... 由一个二进制长度子字段和一个指定长度的字符串组成

因此，正如 DCookie 所说，CHAR 是要使用的东西，而 INTEGER EXTERNAL 是一种非常常用的 SQL*Loader 数据类型，您可能希望为 DOCUMENTID 等指定它。

# mysql - Rails 3：如何在 mysql 中加入 3 个表（在模型中使用 :through）

> ID：10386023
> 
> 赞同：0
> 
> 时间：2012-04-30T15:13:18.333
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, activerecord

成分.rb：

```
class Ingredient < ActiveRecord::Base
  has_many :recipes, :through => :ingredients_with_quantities
  has_many :ingredients_with_quantities 
```

成分_with_quantity.rb：

```
class IngredientWithQuantity < ActiveRecord::Base
  belongs_to :recipe
  belongs_to :ingredient 
```

食谱.rb：

```
class Recipe < ActiveRecord::Base
  has_many :ingredients, :through => :ingredients_with_quantities
  has_many :ingredients_with_quantities 
```

我想查询所有包含特定成分名称的食谱。

试过这个查询：

```
Recipe.find(:all, :include => {:ingredients_with_quantities => :ingredients}, :conditions => "ingredients.name = 'ingredient1'") 
```

但我得到这个错误：

```
NameError: uninitialized constant Recipe::IngredientsWithQuantity 
```

有人可以告诉我查询有什么问题吗？

我可以通过以下方式在 SQL 中成功查询：

```
SELECT r . * FROM recipes r, ingredient_with_quantities iq, ingredients i 
WHERE i.name =  "ingredient1"
AND iq.recipe_id = r.id 
AND iq.ingredient_id = i.id 
```

这个查询在带有 ActiveRecord 的 Rails 中看起来如何？

谢谢你的协助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:17:29.730

它是`:ingredient_with_quantities`而不是`:ingredients_with_quantities`（你在 之后放一个“s” `ingredient`）

# java - 从电子邮件中删除@domain.xxx，只留下用户名

> ID：10386025
> 
> 赞同：12
> 
> 时间：2012-04-30T15:13:31.370
> 
> 标签：java

我正在尝试从电子邮件地址中删除@domain.xxx，只留下用户名。我不确定如何动态选择 @ 位置及其右侧的所有内容。有人可以提供一个如何做到这一点的例子吗？下面的修剪代码是我迷路的地方。

```
email = "example@domain.com"
email....(trim code);
email.replace(email, ""); 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-30T15:17:27.577

要查找： `int index = string.indexOf('@');`

取代： `email = email.substring(0, index);`

总结一下：

```
email = "example@domain.com";
int index = email.indexOf('@');
email = email.substring(0,index); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-30T15:24:40.240

另一种方法是根据昵称和域拆分电子邮件。看[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)

有一个代码示例：

```
String email = "example@domain.com";
String[] parts = email.split('@');

// now parts[0] contains "example"
// and parts[1] contains "domain.com" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-12T05:52:35.597

在**科特林**

```
email = "example@domain.com"
username = email.takeWhile{ it != '@' } 
```

# sql-server - T-SQL：使用参数有条件地加入

> ID：10386026
> 
> 赞同：2
> 
> 时间：2012-04-30T15:13:40.383
> 
> 标签：sql-server, tsql, join, conditional

考虑一个简单的连接：

```
Select TableB.* 
From TableA 
Inner Join TableB 
    On TableB.ID = TableA.ID 
```

我想要做的是根据参数决定加入哪个表。尽管以下语法无效，但我编写它只是为了说明我所追求的：

```
Select TableD.* 
From TableA 
Inner Join 
    [If @useTableC = 1 Then Join to TableC Else Join to TableB] As TableD 
```

TableB 和 TableC 都有相同的列。

我怎样才能创建这种加入。请注意，此示例实际上是更大查询的一小部分，因此您不能只使用 If...Else 语句。

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T15:20:09.680

通常我宁愿重写一个以上的语句，但如果你真的需要它：

```
SELECT td.*
FROM TableA ta
JOIN (
    SELECT tc.* FROM TableC Where @useTableC = 1
    UNION ALL
    SELECT tb.* FROM TableB Where @useTableC = 0
) td ON ( /* JOIN CONDITION MISSING */) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:22:41.880

不幸的是，T-SQL 没有语法来支持这一点。我前段时间对此进行了修补，但无法提出解决方案，直到我发现这篇文章对我有帮助（通过使用左外连接）并且它可能对你有所帮助。它位于[这里](http://weblogs.sqlteam.com/jeffs/archive/2007/04/03/Conditional-Joins.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T16:05:47.887

@Gerardo Lima 的回答非常好，但作为替代方案，您可以使用动态 SQL 构建查询。这将允许您使用一系列 if 语句来添加或不添加任意数量的连接，根据需要使用尽可能多的 if 语句。作为一个粗略的例子：

```
declare @sql varchar(8000)

set @sql = 'Select TableD.*  From TableA '

if @usertableC = 1 
then select @sql = @sql + ' innner join tableC'

if @usertableC != 1
then select @sql = @sql + ' innner join tableB

exec @sql 
```

[在“动态sql的祸与福”中](http://www.sommarskog.se/dynamic_sql.html)有对动态sql的很好的讨论

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T16:23:12.100

很好的解决方案，杰拉尔多！使用工会不会对性能造成影响。我不能告诉你为什么（也许有人可以在这里填补空白），但执行计划显示持续扫描的 I/O 成本为 0。

但是，这确实取决于 TableB 和 TableC 的模式是否相同。要使用多个语句执行此操作，支持 TableB 和 TableC 中的不同模式，我会考虑以下方法：

```
DECLARE @sql NVARCHAR(MAX)
SET @sql = 'SELECT td.* FROM TableA ta INNER JOIN Table' + 
    CASE WHEN @useTableC = 1 THEN 'C' ELSE 'B' END + ' td ON ta.ID = td.ID'
EXEC sp_executesql @sql 
```

请注意，然后由您的应用程序代码来确定相应的模式并相应地读取数据。

# android - 从列表视图行获取更多数据

> ID：10386029
> 
> 赞同：0
> 
> 时间：2012-04-30T15:13:57.893
> 
> 标签：android, listview, textview, row

我有一个包含多个 TextView 的 ListView。按下 TextView 后，我会在视图中调用 onClick。在该行上获取其他文本视图的最佳做法是什么？文本视图的 ID 沿行相似，因此我需要保留给定视图的上下文。我想我需要获取给定视图的父级，然后从中获取其余的文本视图。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:25:18.510

是的，您需要获取当前文本视图的父级，然后获取该父级中包含的所有子级。

根据您需要对文本视图执行的操作，您可以在父视图上调用 FindViewById 以按 ID 获取每个 TextView。或者您可以按照以下问题/答案中的建议遍历孩子： [Android - get children inside a View?](https://stackoverflow.com/questions/8395168/android-get-children-inside-a-view)

我知道人们提到调用 FindViewByID 是一个繁重的过程，因此请考虑将对 textview 的引用存储在某种对象中，这样您就可以快速获取对行内其他 textview 的引用，而不必一直查找它们。

ViewHolder 的工作非常好，因为它们将 textview 的引用存储在一个对象中（您只需要在创建期间填充一次），但它需要设置您自己的自定义适配器。

# tcl - 在期望脚本中不等待用户输入

> ID：10386031
> 
> 赞同：5
> 
> 时间：2012-04-30T15:14:12.170
> 
> 标签：tcl, user-input, expect

当我尝试运行以下期望脚本时，它只是完成运行而不是等待用户输入。有人可以告诉我我做错了什么吗？

```
#!/usr/bin/expect
puts -nonewline stdout "Enter device id:"
flush stdout
gets stdin id
puts -nonewline  stdout "Enter device name:"
flush stdout
gets stdin name 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T20:56:31.033

Expect 改变了 Tcl`gets`命令，使其不等待标准输入；要在等待时读取一行，您需要这样做而不是`gets stdin id`：

```
# Read input to stdin
expect_user -re "(.*)\n"
set id $expect_out(1,string) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-16T00:16:54.770

试试这个代码：

```
expect "\\$"
puts -nonewline "please enter a swithch user:  "
flush stdout
set userName [gets stdin]
puts $userName
expect "\\$" ;# without this line, the script would exit too fast 
             ;# for the "echo hello" to be sent to stdout by bash
             ;# and thus wont be recorded 
```

# android - 为什么在使用 wrap_content 时会忽略 layout_marginBottom？

> ID：10386036
> 
> 赞同：9
> 
> 时间：2012-04-30T15:14:48.700
> 
> 标签：android, margin, android-relativelayout

我有以下布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#FF0000" >

<RelativeLayout
    android:id="@+id/usericon_img"
    android:layout_width="73.3334dp"
    android:layout_height="70.6667dp"
    android:layout_marginBottom="2.6667dp"
    android:layout_marginLeft="3.3334dp"
    android:layout_marginTop="2.6667dp"
    android:background="#FFFFFF" />
</RelativeLayout> 
```

在模拟器上（我已经在真实设备上测试过，看起来一样），布局如下所示：

[![](../Images/a3dbe34bea7c1757393cbfcd92792963.png)](https://i.stack.imgur.com/ZtCgO.png)

我的问题是：为什么我在白色布局下没有红色边距？我知道如果我将外部布局更改为：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="76dp"
android:background="#FF0000" > 
```

我会得到我想要的，但为什么不能`wrap_content`正常工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T15:21:30.710

在[文档](http://developer.android.com/guide/topics/ui/declaring-layout.html#SizePaddingMargins)中：

> 为了测量其尺寸，视图会考虑其填充。

如果我没记错的话，这意味着边距没有添加到尺寸中。这意味着 wrap_content 可以正常工作，但不考虑边距。

只是一个简短的问题：你为什么使用类似的值`70.6667dp`？

# php - 如何加快 PHPUnit + DBUnit 测试套件的执行速度？

> ID：10386037
> 
> 赞同：11
> 
> 时间：2012-04-30T15:14:53.787
> 
> 标签：php, unit-testing, pdo, phpunit, dbunit

我遇到了 PHPUnit/DBUnit 的一些真正的速度问题。任何延伸的东西都`PHPUnit_Extensions_Database_TestCase`需要永远运行。该套件包含 189 项测试，大约需要 8-9 分钟。我有点希望最多需要 30 秒 ;-)

看起来将数据库恢复到其初始状态是一个需要时间的过程，因此我们使数据集尽可能小，并限制每个测试用例所需的表数量。我正在使用固定装置并尽可能多地共享。

我可以使用任何设置或修改来加快执行速度吗？查看 MySQL 服务器在整个测试过程中所做的事情，似乎发生了很多截断/插入，但是将测试数据集打包到临时表中然后为每个测试简单地选择它们肯定会更快吗？

我使用的驱动程序是带有 XML 测试数据集的 PDO/MySQL。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-02T09:48:40.483

谷歌搜索后，我设法将所需时间从 10 分钟减少到 1 分钟。事实证明，更改 my.ini/my.cnf 中的一些 InnoDB 配置设置会有所帮助。

设置`innodb_flush_log_at_trx_commit = 2`似乎可以完成这项工作。更改后，重新启动 MySQL 服务器。

更多关于[dev.mysql.com：innodb_flush_log_at_trx_commit](http://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html#sysvar_innodb_flush_log_at_trx_commit)

该设置控制日志刷新的 ACID 兼容程度。默认值为 1，即完全符合 ACID，这意味着

> 在每次事务提交时将日志缓冲区写入日志文件，并在日志文件上执行刷新到磁盘操作。

值为 2 时，会发生以下情况：

> 每次提交时，日志缓冲区都会写入文件，但不会对其执行刷新到磁盘操作。

这里的关键区别在于，由于不是在每次提交时都写出日志，因此操作系统崩溃或断电可能会将其清除。对于生产，坚持值 1。对于使用测试数据库的本地开发，值 2 应该是安全的。

如果您正在处理将传输到实时数据库的数据，我建议您坚持使用 1 的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T20:13:52.707

DbUnit 中的夹具创建非常缓慢。每次使用 core2duo e8400 4gb kingston 1333 需要 1.5 秒。您可以使用 xdebug 找到瓶颈并修复它（如果可以），或者您可以执行以下操作之一：

1.)

您只能运行您当前使用自定义引导 xml 开发的测试文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="http://phpunit.de/phpunit.xsd"
         backupGlobals="false"
         verbose="true"
         bootstrap="test/bootstrap.php">
    <testsuites>
        <testsuite>
            <directory>test/integration</directory>
            <exclude>test/integration/database/RoleDataTest.php</exclude>
        </testsuite>
    </testsuites>
    <php>
        <env name="APPLICATION_MODE" value="test"/>
    </php>
</phpunit> 
```

排除部分在这里很重要。您也可以使用测试组。

2.)

```
namespace test\integration;

abstract class AbstractTestCase extends \PHPUnit_Extensions_Database_TestCase
{
    static protected $pdo;
    static protected $connection;

    /**
     * @return \PHPUnit_Extensions_Database_DB_IDatabaseConnection
     */
    public function getConnection()
    {
        if (!isset(static::$pdo)) {
            static::$pdo = new \PDO('pgsql:host=localhost;port=5432;dbname=dobra_test', 'postgres', 'inflames', array(\PDO::ATTR_ERRMODE => \PDO::ERRMODE_EXCEPTION));
            static::$connection = $this->createDefaultDBConnection(static::$pdo);
        }
        return static::$connection;
    }

    /**
     * @return \PHPUnit_Extensions_Database_Operation_DatabaseOperation
     */

    static protected $fixtureSet = false;

    protected function getSetUpOperation()
    {
        $c = get_class($this;
        if (!$c::$fixtureSet) {
            $c::$fixtureSet = true;
            return \PHPUnit_Extensions_Database_Operation_Factory::CLEAN_INSERT(true);
        }
        return \PHPUnit_Extensions_Database_Operation_Factory::NONE();
    }

    static protected $dataSet;

    /**
     * @return \PHPUnit_Extensions_Database_DataSet_IDataSet
     */
    public function getDataSet()
    {
        $c = get_class($this;
        if (!isset($c::$dataSet)) {
            $c::$dataSet = $this->createDataSet();
        }
        return $c::$dataSet;
    }

    /**
     * @return \PHPUnit_Extensions_Database_DataSet_IDataSet
     */
    abstract protected function createDataSet();

    protected function dataSetToRows($tableName, array $ids)
    {
        $transformer = new DataSetRowsTransformer($this->getDataSet());
        $transformer->findRowsByIds($tableName, $ids);
        $transformer->cutColumnPrefix();
        return $transformer->getRows();
    }

} 
```

您可以覆盖 TestCase。在此示例中，每个测试用例仅使用一个 pdo 连接（您可以使用依赖注入将其注入代码），通过覆盖设置操作，您可以为每个测试用例仅设置一次夹具或为每个测试仅设置一次（取决于`self::`或`$cls = get_class($this); $cls::`）。`@depend`（PHPUnit 的设计很糟糕，它会在每次测试调用时创建新实例，因此您必须使用类名来存储每个实例或每个类的变量。）在这种情况下，您必须编写测试以通过注释相互依赖。例如，您可以删除在上一个测试中创建的同一行。

通过这个测试代码`1.5 secs`而不是`6 x 1.5 = 9 secs`：

```
namespace test\integration\database;

use Authorization\PermissionData;
use test\integration\AbstractTestCase;
use test\integration\ArrayDataSet;

class PermissionDataTest extends AbstractTestCase
{
    static protected $fixtureSet = false;
    static protected $dataSet;

    /** @var PermissionData */
    protected $permissionData;

    /**
     * @return \PHPUnit_Extensions_Database_DataSet_IDataSet
     */
    public function createDataSet()
    {
        return new ArrayDataSet(array(
            'permission' => array(
                array('permission_id' => '1', 'permission_method' => 'GET', 'permission_resource' => '^/$'),
                array('permission_id' => '2', 'permission_method' => 'POST', 'permission_resource' => '^/$'),
                array('permission_id' => '3', 'permission_method' => 'DELETE', 'permission_resource' => '^/$')
            ),
            'user' => array(
                array('user_id' => '1', 'user_name' => 'Jánszky László', 'user_email' => 'a@b.d', 'user_salt' => '12435')
            ),
            'user_permission' => array(
                array('user_permission_id' => '1', 'user_id' => '1', 'permission_id' => '1'),
                array('user_permission_id' => '2', 'user_id' => '1', 'permission_id' => '2')
            ),
            'role' => array(
                array('role_id' => '1', 'role_name' => 'admin')
            ),
            'role_permission' => array(
                array('role_permission_id' => '1', 'role_id' => '1', 'permission_id' => '1')
            ),
            'permission_cache' => array(
                array('permission_cache_id' => '1', 'user_id' => '1', 'permission_id' => '1'),
                array('permission_cache_id' => '2', 'user_id' => '1', 'permission_id' => '2'),
            )
        ));
    }

    public function testReadAllShouldReturnEveryRow()
    {
        $this->assertEquals($this->permissionData->readAll(), $this->dataSetToRows('permission', array(3, 2, 1)));
    }

    /** @depends testReadAllShouldReturnEveryRow */

    public function testReadAllByRoleIdShouldReturnEveryRowRelatedToRoleId()
    {
        $this->assertEquals($this->permissionData->readAllByRoleId(1), $this->dataSetToRows('permission', array(1)));
    }

    /** @depends testReadAllByRoleIdShouldReturnEveryRowRelatedToRoleId */

    public function testReadAllByUserIdShouldReturnEveryRowRelatedToUserId()
    {
        $this->assertEquals($this->permissionData->readAllByUserId(1), $this->dataSetToRows('permission', array(2, 1)));
    }

    /** @depends testReadAllByUserIdShouldReturnEveryRowRelatedToUserId */

    public function testCreateShouldAddNewRow()
    {
        $method = 'PUT';
        $resource = '^/$';
        $createdRow = $this->permissionData->create($method, $resource);
        $this->assertTrue($createdRow['id'] > 0);
        $this->assertEquals($this->getDataSet()->getTable('permission')->getRowCount() + 1, $this->getConnection()->getRowCount('permission'));
        return $createdRow;
    }

    /** @depends testCreateShouldAddNewRow */

    public function testDeleteShouldRemoveRow(array $createdRow)
    {
        $this->permissionData->delete($createdRow['id']);
        $this->assertEquals($this->getDataSet()->getTable('permission')->getRowCount(), $this->getConnection()->getRowCount('permission'));
    }

    /** @depends testDeleteShouldRemoveRow */

    public function testDeleteShouldRemoveRowAndRelations()
    {
        $this->permissionData->delete(1);
        $this->assertEquals($this->getDataSet()->getTable('permission')->getRowCount() - 1, $this->getConnection()->getRowCount('permission'));
        $this->assertEquals($this->getDataSet()->getTable('user_permission')->getRowCount() - 1, $this->getConnection()->getRowCount('user_permission'));
        $this->assertEquals($this->getDataSet()->getTable('role_permission')->getRowCount() - 1, $this->getConnection()->getRowCount('role_permission'));
        $this->assertEquals($this->getDataSet()->getTable('permission_cache')->getRowCount() - 1, $this->getConnection()->getRowCount('permission_cache'));
    }

    public function setUp()
    {
        parent::setUp();
        $this->permissionData = new PermissionData($this->getConnection()->getConnection());
    }
} 
```

3.)

另一种解决方案是每个项目只创建一次夹具，然后在事务中使用每个测试并在每次测试后回滚。（如果您有需要提交以检查约束的 pgsql 延迟代码，这将不起作用。）

# c++ - 如何解决此构建错误：UNIX 下 C++ 中的“没有匹配的调用函数”？

> ID：10386038
> 
> 赞同：0
> 
> 时间：2012-04-30T15:14:54.273
> 
> 标签：c++, unix, build

如何解决此构建错误：UNIX 下 C++ 中的“没有匹配的调用函数”？

我收到以下构建错误：

```
unixserver:Lab1> make
g++ -o LSL lab1.cpp Employee.cpp
lab1.cpp: In function int main():
lab1.cpp:199: error: no matching function for call to LinkedSortedList<Employee>::find(std::string&)
LinkedSortedList.cpp:137: note: candidates are: bool LinkedSortedList<Elem>::find(Elem) const [with Elem = Employee]
make: *** [main] Error 1 
```

这是我的查找功能：

```
// Check to see if "value" is in the list.  If it is found in the list,
// return true, otherwise return false.  Like print(), this function is
// declared with the "const" keyword, and so cannot change the contents
// of the list.
template<class Elem>
bool LinkedSortedList<Elem>::find(Elem searchvalue) const {
         if (head == NULL) {
                 return false;
         } else {
                 while (head != NULL) {
                    LinkedNode<Elem>* pointer;
                    for (pointer = head; pointer != NULL; pointer = pointer->next) 
                        if (pointer->value == searchvalue) {
                            return true;
                        }
                  }
         }
         return false;
 } 
```

这是在“public：”部分下的我的 LinkedSortedList.h 文件中：

```
bool find(Elem searchvalue) const; 
```

这是缺少的代码：第 199 行

```
 case 'S':
                                cout << "Save database to a file selected\n\n";
                                // TODO call function to save database to file
                                // File I/O Save to file
                                cout << "Please enter a file name: " << endl;
                                cin >> fileName;
                                {char* file = (char*) fileName.c_str();
                                writeFile(file, database);}
                                break; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:22:34.227

正如错误消息所述，您的问题是您正在尝试调用此函数：

```
LinkedSortedList::find(std::string&) 
```

但它不存在。

你有三个选择：

1.  创建该函数。在声明`public`部分`LinkedSortedList`（并随后实现）类似的东西`find(const std::string&)`；

2.  不要调用该函数。例如，在您的测试程序中，调用`list.find(elem)`而不是`list.find(str)`。

3.  使`Employee`隐式可构造从`std::string`. 添加一个新的公共构造函数`Employee`，将单个`std::string`作为参数。

# vim - 异步vim脚本？

> ID：10386040
> 
> 赞同：7
> 
> 时间：2012-04-30T15:15:06.170
> 
> 标签：vim

我在文件保存后使用 vim 做一些缓慢的操作，这些操作让我的 vim 卡住了，所以我想知道是否有一些异步方法可以使这些操作在后台运行？

演示：

```
autocmd BufWritePost *.js call DoSomeTing()

function! DoSomeThing()
    " some operations really slow
endfunction 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T15:25:04.563

您可以使用一种更强大的语言绑定（例如 Python）来启动一个新线程并在那里完成您的工作。然而，这通常是一项非常困难的任务。此外，您真的不能尝试修改任何 vim 结构或从这些其他线程调用任何 vim 函数 - vim 核心中的任何内容都不是线程安全的。

# sql - Teradata：如何备份使用标识列的表？

> ID：10386043
> 
> 赞同：2
> 
> 时间：2012-04-30T15:15:12.533
> 
> 标签：sql, backup, teradata, identity-column

在 Teradata 中，我一直在为表进行备份的方式是这样的：

`create table xxx_bak as xxx with data`

效果很好，但我刚刚发现这不适用于具有标识列的表。

我需要一种备份方法，它可以复制一个完整的数据表，这样我就可以回滚它，以防我弄乱了一些数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T01:05:42.537

如果您只想要一个表的副本，您可以创建一个具有相同结构但不使键列成为标识列的副本。然后，您可以从原始表中插入它。但是，您将无法在保留相同键的同时从备份中插入回旧表。

制作备份以供以后使用相同的密钥恢复的方法是使用存档/恢复工具 ARCMAIN。

像这样备份：

```
logon my_server/my_user, my_password;
archive data tables (my_database.my_table), release lock, file=backup_file; 
```

像这样恢复：

```
logon my_server/my_user, my_password;
restore data tables (my_database.my_table), release lock, file=backup_file; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T17:21:06.077

经过一年半的时间，我终于找到了一个巧妙的解决方案：

```
create table mydb.mytablebackup as 
(select * from (select * from mydb.mytable) x) 
with data; 
```

一定要限定最里面的子查询，否则它将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T05:51:00.007

这包括 3 个步骤：

```
 1\. SHOW TABLE orig_Table; (*Get the DDL*)

 2\.  Replace orig_Table with bkp_Table name

 3\.  INSERT INTO bkp_Table SELECT * FROM orig_Table; 
```

# php - 第三次出现的正则表达式

> ID：10386047
> 
> 赞同：0
> 
> 时间：2012-04-30T15:15:36.300
> 
> 标签：php, regex

使用 php 和正则表达式，我试图`<li>Valid in US</li>`在 last`UL`之后添加 last`LI`或简单地放在 last 之后`LI`。

调试时我什至无法获得最后一个`UL`标签的内容。当我执行 var_dump 时，这段代码什么也没有显示（我也尝试过`preg_match_all`）：

```
if (preg_match("/((<ul>(.*?)<\/ul>/s){3})", $desc, $WARRANTY) == true)
var_dump($WARRANTY); 
```

这是以下内容`$desc`：

```
<h1>Stuff</h1>
<p>description</p>
<hr />
<strong>Features &amp; Benefits</strong>
<ul>
  <li>feat</li>
  <li>feat</li>
  <li>feat</li>
</ul>
<hr />
<strong>Specifications</strong>
<ul>
  <li>spec</li>
  <li>spec</li>
  <li>spec</li>
</ul>
<hr />
<strong>Warranty Information for a certain product</strong>
<ul>
  <li>3 Years Parts</li>
  <li>3 Years Labor</li>
</ul>
<div> <a href="/ahref" target="_blank">See more products from MFG </a></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:26:15.683

这不使用正则表达式，并且非常hacky，但是可以。

```
if($pos = strripos($desc, '</ul>')) {
    $desc= substr_replace($desc, "<li>Valid in US</li>\n</ul>" , $pos, strlen($desc));
}

echo $desc; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:46:49.970

如果你想匹配`<ul>`标签中只有 2 个`<li>`标签，你可以使用这个正则表达式：

```
<ul>\s*(<li>[^<]+</li>\s*){2}</ul> 
```

我可以建议另一种添加第三个 li 标签的 hacky 方式：

*   使用这个正则表达式：

    `<ul>\s*(?:<li>[^<]+</li>\s*){2}(<)/ul>`

*   并将第一组中的匹配替换为您的`<li></li>`内容，后跟`<`- 因为这是该组已捕获的内容`(<)`

# windows - 如何在 Windows 7 中使用 Windows 服务打开应用程序？

> ID：10386048
> 
> 赞同：1
> 
> 时间：2012-04-30T15:15:37.567
> 
> 标签：windows, windows-services, launching-application

我有一个在我的计算机中运行的 Windows 服务，并在计算机打开时初始化（它对其他服务有一些依赖，但在它们之后立即初始化）。

然后，我有一个不同的应用程序，它依赖于该服务的运行（应用程序包含一个 UI）。

我想在服务启动时启动这个应用程序。因此，我在服务的“OnStart()”事件中使用了以下代码：

```
 var process = new Process();
            process.StartInfo = new ProcessStartInfo
                {
                    CreateNoWindow = false,
                    WindowStyle = ProcessWindowStyle.Maximized
                };

            try
            {
                process = Process.Start(applicationPath);
                return (true);
            }
            catch (Exception e)
            {
                Logger.Log("ApplicationHelper::OpenApplication Error: " + e.Message);
                Logger.Log(applicationPath);

                return (false);
            } 
```

发生的情况是应用程序的进程开始运行，但未显示 UI。我只能看到该进程正在任务管理器中运行。如何从 Windows 服务启动应用程序？

我已经启用了与桌面交互的选项，但它没有帮助。

我正在使用 .Net 4 和 Windows 7。

谢谢！

事实上，当我尝试打开该服务时，会弹出一条 Windows 消息，指出它与当前登录的尝试发送消息的用户不同。但我无法将服务的起始用户配置为当前用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T21:17:28.607

服务可以在登录用户的上下文中启动应用程序，但这非常困难。在这种情况下，由于服务在系统启动后立即启动，因此可能还没有用户登录！

相反，只需将应用程序添加到注册表中的 Run 键，这样它就会在用户登录时启动。由于它依赖于服务，您可能应该让它检查服务是否已经启动并在必要时等待.

# html - 浏览器没有使窗口的高度足够大以容纳我的元素

> ID：10386050
> 
> 赞同：0
> 
> 时间：2012-04-30T15:15:49.153
> 
> 标签：html, css

我正在尝试学习一些html。我有一个简单的布局，我试图在其中绘制一些框，但是其中一个框被部分从底部的屏幕上绘制出来。我认为浏览器会自动计算出高度。

我可以通过
在底部添加一些来使页面的高度更大来修复。

混乱的布局在这里： http: [//letschat.info/test/index.php](http://letschat.info/test/index.php)

固定布局在这里： http: [//letschat.info/test/index2.php](http://letschat.info/test/index2.php)

# delphi - 将 UnicodeString 的 char pos 转换为 utf8 字符串中的字节 pos

> ID：10386054
> 
> 赞同：1
> 
> 时间：2012-04-30T15:15:58.050
> 
> 标签：delphi, delphi-2010

我使用[Scintilla](http://www.scintilla.org/)并将其编码设置为 utf8（如果我理解正确，这是使其与 Unicode 字符兼容的唯一方法）。通过这种设置，当谈到文本中的**位置**时，Scintilla 表示**字节**位置。

问题是，我在程序的其余部分使用 UnicodeString，当我需要在 Scintilla 编辑器中选择特定范围时，我需要将 UnicodeString 的 char pos 转换为对应于 UnicodeString 的 utf8 字符串中的 byte pos . 我怎样才能轻松做到这一点？谢谢。

PS，当我找到[ByteToCharIndex](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.ByteToCharIndex)时， 我认为这是我需要的，但是，根据它的文档和我的测试结果，它只有在系统使用多字节字符系统 (MBCS) 时才有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:46:37.817

您应该使用[UTF8 description](http://en.wikipedia.org/wiki/Utf-8)自己解析 UTF8 字符串。我已经编写了一个快速的 UTF8 模拟`ByteToCharIndex`并在西里尔字符串上进行了测试：

```
function UTF8PosToCharIndex(const S: UTF8String; Index: Integer): Integer;
var
  I: Integer;
  P: PAnsiChar;

begin
  Result:= 0;
  if (Index <= 0) or (Index > Length(S)) then Exit;
  I:= 1;
  P:= PAnsiChar(S);
  while I <= Index do begin
    if Ord(P^) and $C0 <> $80 then Inc(Result);
    Inc(I);
    Inc(P);
  end;
end;

const TestStr: UTF8String = 'abФЫВА';

procedure TForm1.Button2Click(Sender: TObject);
begin
  ShowMessage(IntToStr(UTF8PosToCharIndex(TestStr, 1))); // a = 1
  ShowMessage(IntToStr(UTF8PosToCharIndex(TestStr, 2))); // b = 2
  ShowMessage(IntToStr(UTF8PosToCharIndex(TestStr, 3))); // Ф = 3
  ShowMessage(IntToStr(UTF8PosToCharIndex(TestStr, 5))); // Ы = 4
  ShowMessage(IntToStr(UTF8PosToCharIndex(TestStr, 7))); // В = 5
end; 
```

* * *

反向功能也没有问题：

```
function CharIndexToUTF8Pos(const S: UTF8String; Index: Integer): Integer;
var
  P: PAnsiChar;

begin
  Result:= 0;
  P:= PAnsiChar(S);
  while (Result < Length(S)) and (Index > 0) do begin
    Inc(Result);
    if Ord(P^) and $C0 <> $80 then Dec(Index);
    Inc(P);
  end;
  if Index <> 0 then Result:= 0;  // char index not found
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T05:16:11.337

我非常尊重地基于 Serg 的代码编写了一个函数，我将其作为单独的答案发布在这里，希望它对其他人也有帮助。Serg 的回答被接受了。

{返回 aUtf8Str 中由 aCharIdx（从 1 开始）指定的字符（unicode 点）的第一个字节的索引（从 1 开始）。

代码由 Edwin Yip 根据 SO 成员 Serg ( [https://stackoverflow.com/users/246408/serg](https://stackoverflow.com/users/246408/serg) )编写的代码修改

参考 1：[https ://stackoverflow.com/a/10388131/133516](https://stackoverflow.com/a/10388131/133516)

参考 2：[http](http://sergworks.wordpress.com/2012/05/01/parsing-utf8-strings/) ://sergworks.wordpress.com/2012/05/01/parsing-utf8-strings/ }

```
function CharPosToUTF8BytePos(const aUtf8Str: UTF8String; const aCharIdx:
    Integer): Integer;
var
  p: PAnsiChar;
  charCount: Integer;
begin
  p:= PAnsiChar(aUtf8Str);
  Result:= 0;
  charCount:= 0;
  while (Result < Length(aUtf8Str)) do
  begin
    if IsUTF8LeadChar(p^) then
      Inc(charCount);

    if charCount = aCharIdx then
      Exit(Result + 1);

    Inc(p);
    Inc(Result);
  end;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T17:31:39.260

UTF-8 和 UTF-16（`UnicodeString`用途）都是可变长度编码。给定的 Unicode 代码点可以使用 1-4 个单字节代码单元在 UTF-8 中编码，在 UTF-16 中使用 1 或 2 个 2 字节代码单元，具体取决于代码点的数值。将 UTF-16 字符串中的位置转换为等效 UTF-8 字符串中的位置的唯一方法是将位置之前的 UTF-16 代码单元解码回其原始 Unicode 代码点值，然后将它们重新编码为 UTF- 8 个代码单元。

听起来您最好重新编写与 Scintilla 交互的代码来使用`UTF8String`而不是`UnicodeString`，然后您就不必再在该层在 UTF-8 和 UTF-16 之间进行转换了。在与其余代码交互时，您可以根据需要在`UTF8String`和之间进行转换`UnicodeString`。

# plugins - 从 Jenkins 获取 Perforce 变更列表中的构建

> ID：10386061
> 
> 赞同：2
> 
> 时间：2012-04-30T15:16:32.280
> 
> 标签：plugins, build, jenkins, perforce, changelist

我正在开发一个 jenkins 插件，该插件包括在 Jenkins 的新页面上显示信息。我需要显示的信息是来自 Perforce 的更改列表。这个，我设法用命令做

```
"p4 changelists" 
```

我不知道该怎么做是获取更改列表中的所有构建，以便能够判断给定的更改列表是成功还是不成功。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T16:07:29.443

您可以从 perforce 插件 env var 中获取更改列表，您可以运行以下 shell echo p4.changelist=$P4_CHANGELIST > change.properties cf。[https://wiki.jenkins-ci.org/display/JENKINS/Perforce+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Perforce+Plugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T15:57:19.273

Jenkins尚不[支持](https://issues.jenkins-ci.org/browse/JENKINS-7436)此功能，但是您可以编写简单的参数化构建并在构建启动和运行之前取消搁置给定的 CL。[这篇文章](http://www.jroller.com/francoisledroff/entry/perforce_shelving_jenkins)可能会有所帮助。

# normalization - 在多个 1:m 关系之间强制执行一致性

> ID：10386071
> 
> 赞同：0
> 
> 时间：2012-04-30T15:16:59.593
> 
> 标签：normalization, database-normalization

鉴于这些业务规则：

*   用户有 0 个或多个帐户，并且所有帐户都与单个用户关联
*   用户拥有 0 个或多个资产，并且所有资产都与单个用户相关联
*   资产可能与单个帐户相关联。如果将其分配给任何帐户，则该帐户必须属于与资产关联的用户。

假设以下建议的模式：

```
User
-id

Account
-id
-user_id

Asset
-id
-user_id
-account_id (Nullable) 
```

这种模式似乎存在一个弱点，因为资产可以分配给属于与该资产不同的用户的帐户。这是通过导致更好模式的正常形式之一解决的吗？如果没有通过规范化覆盖它是最好的约束，那么在业务逻辑方面呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:42:26.923

规范化可能处理的唯一部分（如下）是可为空的列。在 Chris Date 的理解中，如果一个列允许 NULL，那么关系就不是 1NF。

如果你试图严格遵循关系模型，我认为你会用断言来处理这个问题。但是大多数 SQL 平台不支持断言。在 SQL 中，我相信您正在寻找类似的东西。我在 PostgreSQL 中对此进行了测试。

```
create table users (
  user_id integer primary key
);

create table accounts (
  user_id integer not null references users (user_id),
  account_id integer not null unique,
  primary key (user_id, account_id)
);

create table assets (
  user_id integer not null references users (user_id),
  asset_id integer not null unique,
  account_id integer null,
  primary key (user_id, asset_id),
  foreign key (user_id, account_id) references accounts (user_id, account_id)
 );

-- Insert 3 users.
insert into users values (1), (2), (3);

-- User 1 has two accounts, user 2 has 3 accounts, user 3 has none.
insert into accounts values 
(1, 100),
(1, 101),
(2, 102),
(2, 103),
(2, 104);

-- User 1 has 1 asset not assocated with an account.
insert into assets values (1, 200, null);

-- User 1 has 1 asset associated with account 101
insert into assets values (1, 201, 101);

-- User 1 tries to associate an asset with account 102, which doesn't belong to user 1.
insert into assets values (1, 202, 102);
[Fails with foreign key violation]

-- User 2 has two assets not associated with an account.
insert into assets values
(2, 500, null),
(2, 501, null); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-30T21:15:29.560

我建议从表 Asset 中完全删除 account_id 外键。由于 account_id 与您的用户表相关，您可以连接资产和用户，然后执行从用户到帐户的左连接（如果这是 account_id 为主键的表）。如果您从左连接获得结果，则资产链接到一个帐户并且用户是相同的。通过这种方式，您可以强制执行该约束。

希望这会有所帮助，问候

埃尔切

# php - PHP 中的解析错误（Zend 框架）

> ID：10386077
> 
> 赞同：1
> 
> 时间：2012-04-30T15:17:19.787
> 
> 标签：php, zend-framework

我有这个代码：
`protected $val = Zend_Registry::get('values');`

每当我输入这段代码时，我都会得到：
`Parse error: syntax error, unexpected '(', expecting ',' or ';' in ...`

为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T15:20:20.570

您不能使用函数调用或其他动态表达式来初始化类属性。它只能是常数或原子值。如果您需要使用函数调用对其进行初始化，则必须在构造函数中执行此操作。

```
protected $val = NULL;

public function __construct() {
  $this->val = Zend_Registry::get('values');
} 
```

[从文档：](http://php.net/manual/en/language.oop5.properties.php)

> 这个声明可能包括一个初始化，但这个初始化必须是一个常量值——也就是说，它必须能够在编译时被评估，并且不能依赖于运行时信息才能被评估。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T15:20:36.273

您不能将函数的返回值用作类变量的初始值。

但是，您可以在类的构造函数中设置它。

```
class Myclass{
     protected $val;

     public function __construct(){
          $this->val = Zend_Registry::get('values');
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:21:12.503

因为这看起来像一个类变量，你不能将数据分配给这样的类变量。

见这里[http://www.php.net/manual/en/language.oop5.properties.php](http://www.php.net/manual/en/language.oop5.properties.php)

你可以这样做。

```
class something {
    protected $_val;

    public function __construct()
    {
        $this->_val = Zend_Registry::get('values');
    }
} 
```

# jquery - jQuery切换不需要动画

> ID：10386078
> 
> 赞同：6
> 
> 时间：2012-04-30T15:17:21.257
> 
> 标签：jquery, animation

我可以失明还是没有参数，选项或任何禁用动画的东西：

.toggle()

我只想通过切换（）来显示（）和隐藏（）它们，但是我使用的每个切换，滑动切换，淡入淡出甚至正常切换都带有动画。

如何“删除”它们？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-28T05:32:39.960

只需确保 toggle() 的参数解析为 true，而不是 1。

```
toggle(1); // animation 
toggle(true); // no animation. 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-30T15:35:42.403

如果未提供任何参数，则 toggle() 立即生效。

slideToggle() 和 fadeToggle() 使用动画的默认值，为了使它们立即生效，传递值 '0'；

这些都是一样的，只是显示和隐藏元素：

```
$('button').on('click', function() {
    ToggleElement.toggle();
});

$('button').on('click', function() {
    ToggleElement.slideToggle(0);
});

$('button').on('click', function() {
    ToggleElement.fadeToggle(0);
}); 
```

[小提琴](http://jsfiddle.net/adeneo/nmXDm/)

然而，没有理由在没有动画的情况下使用底部的两个，因为这样就失去了意义。

更快一点是`element.style.display = 'none'/'block'`在 if / else 语句中使用原生 javascripts。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-30T15:20:51.490

您始终可以提供自己的切换功能：

```
$.fn.quicktoggle = function() {
    this.each(function() {
        var $this = $(this);
        if ($this.is(':visible')) {
            $this.hide();
        } else {
            $this.show();
        }
    });
    return this;
}; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-30T15:32:27.940

只需使用不带参数的切换，它应该是立即的。

从文档：

> 在没有参数的情况下， .toggle() 方法只是切换元素的可见性：
> 
> ```
> $('.target').toggle(); 
> ```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-04T20:36:12.540

直接关掉效果

```
jQuery.fx.off = true; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T15:25:47.217

如果您想轻松替换代码中的所有实例，则更“强大”的方法是覆盖函数。

```
$.fn.slideToggle = function(duration, callback ) {
    duration = 0;
    callback = callback || function(){};
    this.toggle(duration, callback);
};

$.fn.fadeToggle = function(duration, callback) {
    duration = 0;
    callback = callback || function(){};
    this.toggle(duration, callback);
}; 
```

演示：http: [//jsfiddle.net/bChVe/3/](http://jsfiddle.net/bChVe/3/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-30T11:19:47.393

```
$('.clk').click(function(){

if(document.getElementById("ID").className == "p-cap hide")
{
   document.getElementById("ID").className = "p-cap show";
}
else
{
   document.getElementById("ID").className = "p-cap hide";
}

}); 
```

```
.p-cap { height:100px; width:100px; background :red; float:left; }

.clk { height:100px; width:100px; background :green; float:left; }

.hide { display: none; }

.show { display: block; }
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div class="clk"></div>
<div id="ID" class="p-cap hide"></div>
```

# parsing - 将电子邮件解析器创建为服务？

> ID：10386079
> 
> 赞同：1
> 
> 时间：2012-04-30T15:17:21.377
> 
> 标签：parsing, email, network-programming

我正在尝试讨论如何创建电子邮件解析器。我在技术上了解如何做到这一点，但我无法弄清楚实现细节。

因此，用户向某个地址发送电子邮件，邮件服务器接收，我的应用程序根据主题、内容对其进行解析并将其放入存储桶（电子邮件帐户或数据库）中，然后我可以对其采取行动。

那么我是使用现有的邮件服务器软件（比如我们已经在运行的 Zimbra）还是创建一个侦听端口 25 并专门执行我需要的应用程序？（意味着没有邮件服务器软件在这个盒子上运行，等等）

我的目标是根据我给自己发送的电子邮件，以自动化的方式为自己创建一系列供个人使用的组织工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:40:00.903

编写一些东西来侦听端口 25 并充当 SMTP 服务器将涉及到，并且可能对你想要的东西过度杀伤。

我认为有两个主要选择。第一种是保留现有邮件服务器，然后通过 IMAP（或 POP3）轮询该邮件服务器上的帐户以检索电子邮件，然后使用脚本处理它们。您对哪种语言感到满意并不重要，因为有一些库可以处理 IMAP 连接，然后用大多数语言解析电子邮件。

或者，您可以查看类似[http://CloudMailin.com](http://CloudMailin.com)的服务，它会为您执行此操作。它将接收电子邮件并将其发送到您可以通过类似 JSON 格式的 http 帖子创建的 Web 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:34:32.120

我会选择一个 python 脚本来轮询邮箱（基于 cron 作业）。Python 允许您非常轻松地访问 IMAP，并具有强大的正则表达式功能来解析电子邮件内容。

尝试类似：

```
import imaplib, email
import re

M= imaplib.IMAP4_SSL('imap.gmail.com')
M.login('user', 'pass')

M.select('Imap_folder')

typ, data = M.search(None, 'FROM', '"*"')

for num in data[0].split():
   typ, data = M.fetch(num, '(RFC822)')
   email_body = data[0][1] # getting the mail content
   mail = email.message_from_string(email_body) # parsing the mail content to get a mail object
   foo = re.compile("your regular expr here", re.MULTILINE)
   res = foo.search(email_body) 
```

# asp.net-mvc - 告诉 Razor 在特定文件夹中查找除默认文件夹之外的部分

> ID：10386083
> 
> 赞同：0
> 
> 时间：2012-04-30T15:17:31.117
> 
> 标签：asp.net-mvc, razor

在 Razor 中，我有一些位于`"~/areas/shared/views/shared/_partialName.cshtml"`. 如果我只是`@{ Html.RenderPartial("_partialName", myModel"); }`在我看来，它找不到它。相反，我必须完全限定通往该部分的路径。

我可以告诉我的项目`"~/areas/shared/views/shared/"`在尝试查找部分时将文件夹包含在它爬取的文件夹列表中吗？通过这种方式，我可以将代码片段保留在我的视图中，以呈现部分漂亮和简短的内容。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:25:57.623

RazorViewEngine 类包含具有模式的属性，用于查找各种视图文件 - 区域、部分、所有内容。您可以很容易地覆盖它，并在 Globals.asax 中告诉您的应用程序使用您的实现：

```
public class MyViewEngine : RazorViewEngine
{
    public MyViewEngine()
    {
        // Use the standard partials location in addition to this location
        // {0} is the partial view name, {1} is the controller name
        String[] morePartialLocations = new String[] {
            "~/areas/shared/views/shared/{0}.cshtml"
        };
        PartialViewLocationFormats =
            PartialViewLocationFormats.Concat(morePartialLocations).ToArray();
    }
}

// in Globals.asax

protected void Application_Start()
{
    ...
    ViewEngines.Engines.Clear();
    ViewEngines.Engines.Add(new MyViewEngine());
    ...
} 
```

Note that since it sounds like you're working with Areas, there's another property that you can override called `AreaViewLocationFormats` which you can update in the same manner and insert "{2}" as the name of the area.

# android - 如何在 Android 中为 TextView 启用标准复制粘贴？

> ID：10386084
> 
> 赞同：143
> 
> 时间：2012-04-30T15:17:45.993
> 
> 标签：android, textview, copy-paste

我想为 TextView 启用标准复制粘贴（与 EditText 相同）。我该怎么做？

我尝试使用不可编辑的 EditText，但效果不佳（有时它变得可编辑或未显示复制粘贴覆盖）。一般来说，这可能不是一个好方法。

需要从 API 7 开始的有效解决方案。

* * *

## 回答 #1

> 赞同：258
> 
> 时间：2012-04-30T15:45:16.023

试试[`android:textIsSelectable`](http://developer.android.com/reference/android/widget/TextView.html#attr_android:textIsSelectable)。

IE，`android:textIsSelectable="true"`

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2014-03-05T07:29:11.363

要启用 TextView 的标准复制/粘贴，U 可以选择以下选项之一：

1.  布局文件中的更改：将以下属性添加到您的 TextView

    `android:textIsSelectable="true"`

2.  在您的 Java 类中编写此行以编程方式设置它。`myTextView.setTextIsSelectable(true);`

长按 TextView 可以看到复制/粘贴操作栏。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-08-21T11:46:51.450

这适用于复制 pre-Honeycomb：

```
import android.text.ClipboardManager;

textView.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View view) {
        ClipboardManager cm = (ClipboardManager)context.getSystemService(Context.CLIPBOARD_SERVICE);
        cm.setText(textView.getText());
        Toast.makeText(context, "Copied to clipboard", Toast.LENGTH_SHORT).show();
    }
}); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-11-14T02:47:07.173

> [需要 API 11](http://developer.android.com/guide/topics/text/copy-paste.html)，更新代码，不推荐使用以前的方法

**无主题全屏解决方案** `ActionBar`

扩展`TextView`并在构造函数中粘贴以下代码

```
this.setOnLongClickListener(new OnLongClickListener() {

            @Override
            public boolean onLongClick(View v) {
                ClipboardManager cManager = (ClipboardManager) mContext.getSystemService(Context.CLIPBOARD_SERVICE);
                ClipData cData = ClipData.newPlainText("text", getText());
                cManager.setPrimaryClip(cData);
                Util.toast(mContext, string.text_copyed);
                return true;
            }
        }); 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2018-11-12T12:39:31.570

在 xml textview 中粘贴此代码

```
android:textIsSelectable="true" 
```

然后在java文件中，

```
 final TextView txtcopypaste = findViewById(R.id.txtcopypaste); // my textview
    txtcopypaste.setOnClickListener(new View.OnClickListener() { // set onclick listener to my textview
        @Override
        public void onClick(View view) {
            ClipboardManager cm = (ClipboardManager)getApplicationContext().getSystemService(Context.CLIPBOARD_SERVICE);
            cm.setText(txtcopypaste.getText().toString());              
            Toast.makeText(getApplicationContext(), "Copied :)", Toast.LENGTH_SHORT).show();
        }
    }); 
```

**要求：**需要复制并粘贴文本视图中的文本。

**结果：**使用 textview ，一旦我点击了 textview 。它会自动复制文本视图中的文本。

**注意：**在导入剪贴板管理器时尝试首选

请首选文本剪贴板管理器

```
import android.text.ClipboardManager; // prefer this 
```

尽量避免内容剪贴板管理器

```
import android.content.ClipboardManager; // Not this 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-11-23T08:33:27.410

1.  使用主题

    ```
    @android:style/Theme.Black.NoTitleBar.Fullscreen 
    ```

    或者

    ```
    @android:style/Theme.WithActionBar 
    ```

2.  在xml中设置TextView

    ```
    android:textIsSelectable="true" 
    ```

3.  查看[结果](http://i.stack.imgur.com/zF9JD.png)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-11-03T15:38:24.927

如果有人想加倍努力并一键选择并复制到剪贴板：

```
 phone.setOnClickListener(new View.OnClickListener() {
                        @Override
                        public void onClick(View view) {
                            ClipboardManager clipboard = (ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);
                            ClipData clip = ClipData.newPlainText("PhoneNumber", phone.getText());
                            clipboard.setPrimaryClip(clip);

                        }
                    }); 
```

phone 是`TextView`和`phone.Text`是将被复制到剪贴板的文本。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-11-30T03:35:28.407

[这](https://stackoverflow.com/a/14189589/4665578)更好：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
final android.content.ClipboardManager clipboardManager = (android.content.ClipboardManager) context
        .getSystemService(Context.CLIPBOARD_SERVICE);
final android.content.ClipData clipData = android.content.ClipData
        .newPlainText("text label", "text to clip");
clipboardManager.setPrimaryClip(clipData);
} else {
final android.text.ClipboardManager clipboardManager = (android.text.ClipboardManager) context
        .getSystemService(Context.CLIPBOARD_SERVICE);
clipboardManager.setText("text to clip");
} 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2015-03-06T12:22:47.873

对于一个`EditText`，在活动内的清单中使用 `android:windowSoftInputMode="adjustResize"`

# java - 获取Android设备上的所有本地IP地址并过滤掉GPRS IP

> ID：10386085
> 
> 赞同：0
> 
> 时间：2012-04-30T15:17:46.197
> 
> 标签：java, android, network-programming

```
for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
NetworkInterface intf = en.nextElement();
for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
InetAddress inetAddress = enumIpAddr.nextElement();
if (!inetAddress.isLoopbackAddress() && !inetAddress.isLinkLocalAddress()) {
System.out.println(inetAddress.getHostAddress());
}
}
} 
```

这将返回所有本地 IP 地址。如果我连接到 GPRS，它会返回另一个私有 A 类 IP 地址，我想将其过滤掉（因为我不知道这个网络是什么或它是如何工作的）。

我基本上需要 WiFi/WiFi HotSpot/USB HotSpot/WiFi Direct IP 地址。

这个 GPRS 接口是否只能连接到一台设备（我的）？

# javascript - CheckBoxList OnDataBound 并设置表单提交的复选框

> ID：10386089
> 
> 赞同：0
> 
> 时间：2012-04-30T15:18:07.997
> 
> 标签：javascript, .net, validation

我正在使用 C# .Net 并且几乎完成了编码以使用 OnDataBound 为 CheckBoxList 以在 Web 表单中加载表单时进行复选框。在 Page_Load 中填充了一个 List<>，其中包含检查的值。然后，我遍历 OnDataBound 事件中的列表以选中相应的框。这一切都很好，如有必要，我可以提供额外的代码。
加载表单后，我可以看到所有内容都按预期进行了检查，但是当我尝试提交表单时，我的验证表明该框未选中。

我的验证是在 Javascript 中使用的 .checked 属性，即`if (cbx.checked)`...在代码隐藏中，我使用类似于以下的循环来在适当的时候检查值：

```
 foreach (ListItem item in cbList.Items)
  {
      if (Areas.Contains(item.ToString()))
      {
          item.Selected = true;
      }
  } 
```

.Selected 和 .checked 属性之间似乎存在差异，还是有比这更基本的东西？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:51:40.217

该功能是在提交服务器端还是客户端方法时执行的？

我认为正在发生的事情是网页在提交时回发，因此在页面重新加载之前，您的 JavaScript 不会出现在图片中。我认为 JavaScript 不会在服务器端 onSubmitEvent 启动后进行验证，直到页面重新加载。

# android - 滚动视图的速度限制

> ID：10386096
> 
> 赞同：3
> 
> 时间：2012-04-30T15:18:25.167
> 
> 标签：android, android-layout

我的应用滚动速度超级快！如何在我的 android 应用程序中限制滚动视图的滚动速度？滚动可能非常快，以这种速度滚动是没有意义的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-07-30T22:02:06.997

这个线程很旧，但我会用部分解决方案来回答：限制抛掷速度。请随时发表评论，以便我改进我的解决方案。

正如开发人员培训指南中所述：

> Flinging 是当用户快速拖动和抬起手指时发生的滚动类型。

那就是我需要速度限制的地方。所以，在Custom ScrollView（无论是水平的还是垂直的）中覆盖这样的fling方法。

```
@Override
public void fling(int velocityY) {
    int topVelocityY = (int) ((Math.min(Math.abs(velocityY), MAX_SCROLL_SPEED) ) * Math.signum(velocityY));
    super.fling(topVelocityY);
} 
```

我发现velocityY（在水平滚动视图中，它是velocityX）可能在-16000到16000之间。负数只是意味着向后滚动。我仍在测试这个值，而且我只在一台设备上测试过它。不确定在旧设备/API 版本中是否相同。我稍后会回来编辑这个。

```
(int) ((Math.min(Math.abs(velocityY), MAX_SCROLL_SPEED) ) * Math.signum(velocityY)); 
```

我在那里做的是获得我的常数 MAX_SCROLL_SPEED 和原始速度 Y 之间的最小值，然后获得原始速度 Y 的符号。我们需要标志来回滚。

最后，发回修改后的速度 Y。

这是一个部分解决方案，因为如果用户一直按下滚动视图，速度不会改变。

再次，请随时改进我的答案，我仍在学习。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-18T08:48:46.970

```
 ObjectAnimator anim = ObjectAnimator.ofInt(mScrollView, "scrollY", mScrollView.getBottom());                               
 anim.setDuration(9000);                     
 anim.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:41:53.320

我认为使用计时器可以限制滚动速度。看这个链接 [Android：Horizo​​ntalScrollView smoothScroll 动画时间](https://stackoverflow.com/questions/5193678/android-horizontalscrollview-smoothscroll-animation-time/5193880#5193880)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-17T22:10:30.380

这就是我如何实现平滑的垂直滚动（如电影学分）。这也允许用户上下移动滚动，并允许在他们放手时继续滚动。在我的 XML 中，我将 TextView 封装在一个名为“scrollView1”的 ScrollView 中。享受！

```
 final TextView tv=(TextView)findViewById(R.id.lyrics);
    final ScrollView scrollView = (ScrollView) findViewById(R.id.scrollView1);
    Button start = (Button) findViewById(R.id.button_start);
    Button stop = (Button) findViewById(R.id.button_stop);
    final Handler timerHandler = new Handler();
    final Runnable timerRunnable = new Runnable() {
        @Override
        public void run() {
            scrollView.smoothScrollBy(0,5);         // 5 is how many pixels you want it to scroll vertically by
            timerHandler.postDelayed(this, 10);     // 10 is how many milliseconds you want this thread to run
        }
    };

    start.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
           timerHandler.postDelayed(timerRunnable, 0);
        }
    });

    stop.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            timerHandler.removeCallbacks(timerRunnable);
        }
    }); 
```

# iphone - 从 JSON 中为 UITableView 排序 NSDictionary

> ID：10386100
> 
> 赞同：3
> 
> 时间：2012-04-30T15:18:35.950
> 
> 标签：iphone, objective-c, ios, uitableview

我在尝试按顺序对我的 NSDictionary 进行排序时遇到了麻烦，已经好几个星期了，我还没有弄明白，所以我希望有人能帮我一把……

NSDictionary 数据来自 JSON 并且数据已经从服务器排序并在 JSON 中按顺序显示，但是当它检索并转换为 NSDictionary 时，顺序都是错误的......

这是 JSON

```
{ 
  "categories":{
   "unknownCategoryName":[
   { "key1":"value1",
     "key2":"value2"
   }],
   "unknownCategoryName1":[
   { "key1":"value1",
     "key2":"value2"
   }],
   "unknownCategoryName2":[
   { "key1":"value1",
     "key2":"value2"
   }],
   "unknownCategoryName3":[
   { "key1":"value1",
     "key2":"value2"
   }]
  }
 } 
```

在收到 JSON 之前，不会知道类别数量及其名称，所以这就是我用来获取计数和设置 tableView 和部分的方法

```
NSDictionary *results = [jsonString JSONValue];

NSDictionary *all = [results objectForKey:@"categories"];
self.datasource = all;

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
  {
   return [self.datasource count];
  }

 - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
   NSString *title = [[self.datasource allKeys] objectAtIndex:section];
   return title;
 } 
```

而我想要做的是列出部分和部分标题作为JSON中的顺序......而不是像这样的混乱显示

unknownCategory3
unknownCategory1
unknownCategory
unknownCategory2

“unknownCategory”是产品类别名称，它们不按字母顺序，没有任何数字，并且它们已经在JSON中排序并按顺序显示...

所以，如果你们能提供帮助，那就太好了。提前致谢...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T15:55:29.573

NSDictionaries 中的键没有排序，因此您必须先对键进行排序，然后才能在表视图中使用它们。因此，不要使用 [self.datasource allKeys] 来获取章节标题，而是首先创建一个排序数组：sorted = [[self.datasource allKeys] sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)]，然后使用该数组来获取标题：标题= [排序的objectAtIndex：section]。

编辑后回答另一个问题：

要使用排序数组将您想要的值放入表中，我认为这应该很接近。您必须将属性 NSArray *sorted 添加到您的 .h 文件中，然后在您的 .m 中添加（这是假设您的 json 的结构与您在上面发布的一样）：

```
 NSDictionary *results = [jsonString JSONValue];
    NSDictionary *all = [results objectForKey:@"categories"];
    self.datasource = all;
    self.sorted = [[self.datasource allKeys] sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];

    - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
        return [self.sorted count];
    }

    - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
        NSString *title = [self.sorted objectAtIndex:section];
        return title;
    }

   - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
        return [[self.datasource valueForKey:[self.sorted objectAtIndex:section]]count];
   }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
        static NSString *cellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
        }
        NSArray *theArray = [self.datasource valueForKey:[self.sorted objectAtIndex:indexPath.section]];
        NSString *text1 = [[theArray objectAtIndex:0] valueForKey:@"key1"];
        NSString *text2 = [[theArray objectAtIndex:0] valueForKey:@"key2"];
        cell.textLabel.text = [NSString stringWithFormat:@"%@\r%@",text1,text2];
        cell.textLabel.numberOfLines=0; // this set the number of lines to unlimited
        return cell;
    } 
```

你没有说你想如何在一个表格行中显示两个不同的值——在这个例子中，我将它们连接成一个字符串，并在两者之间返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:54:49.840

似乎是一个奇怪的 JSON。你可以这样使用

```
{
"categories": [
    "unknownCategoryName": [
        {
            "key1": "value1",
            "key2": "value2"
        }
    ],
    "unknownCategoryName2": [
        {
            "key1": "value1",
            "key2": "value2"
        }
    ]
]
} 
```

如果您确实喜欢上面的内容，那么很容易排序。

**对问题中提供的 JSON 进行排序**

```
-(NSMutableArray *)getAllKeys:(NSDictionary *)jsonDictionary{

       NSDictionary *all = [results objectForKey:@"categories"];
       NSMutableArray *allKeys = [all allKeys];
       NSSortDescriptor *sorter = [[NSSortDescriptor alloc] initWithKey:@"self" ascending:YES];
       NSArray *sortDescriptors = [NSArray arrayWithObject: sorter]; 

       [allKeys sortUsingDescriptors:sortDescriptors]; 
       [sorter release];

       return allkeys;
   }

   -(void)createSortedDictionary{
        NSMutableDictionary *dictionaryMutable=[NSMutableDictionary dictionary];
        for(NSString *string in allkeys){

           [dictionaryMutable setObject:[all objectForKey:string] forKey:string];
        }
     } 
```

`dictionaryMutable`将保存已排序的字典

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:37:46.433

您是编写此 JSON 还是从无法编辑的地方获取它？在我看来它格式不正确。类别应该是一个数组，当前的数组放置没有意义。如果 JSON 看起来像这样：

```
{ 
  categories:[
   {unknownCategoryName:
   { key1:value1,
     key2:value2
   }},
   {unknownCategoryName2:
   { key1:value1,
     key2:value2
   }}
  ]
 } 
```

然后您可以将类别读入 NSArray，您的委托方法将如下所示（并以正确的顺序显示）：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
  {
      return [categoriesArray count];
  }

 - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
     NSDictionary *dict = [categoriesArray objectAtIndex:section];  
     NSString *title = [[dict allKeys] objectAtIndex:0];
     return title;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T01:15:29.513

我认为保留原始顺序的唯一方法是在从 JSON 数据创建 JSON 字符串后自己进行初始解析。如果 JSON 字符串的结构与您发布的一样，您可以使用 NSScanner 查找引号之间的字符串，然后仅选择最后一个引号后带有 [ 的字符串添加到您订购的数组中键数组。然后，您可以使用 JSON 解析器创建 NSDictionary，并通过遍历您的有序键并将其发送 valueForKey: 来获取值。

# extjs - ExtJs 设置参数值

> ID：10386101
> 
> 赞同：0
> 
> 时间：2012-04-30T15:18:38.260
> 
> 标签：extjs, coolite

我有一个带有一些控件（extJs 和 ASP）的表单，如下所示：

```
<ext:ComboBox ID="Countries" runat="server" .../>
<asp:CheckBox ID="cb1" runat="server" /> 
```

我想使用对象发送`BaseParams`参数`store`：

```
<ext:Parameter Name="cid" Value="Ext.get('#{Countries}').getValue()" />
<ext:Parameter Name="cbv" Value="#{cb1}.dom.checked" /> 
```

这变成了：

```
Ext.apply( options.params,{
    "cid":Ext.get('CountryCities1_Countries').getValue(),
    "cbv":Ext.get("CountryCities1_cb1").dom.checked}
); 
```

如您所见，从 ASP.Net 复选框中获取值比 extJs Combobox 更简单...您知道获取组合框值的其他干净方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:51:14.360

我找到了......就像这样：

```
<ext:ComboBox ...>
    <Listeners>
        <Select Handler=" #{myStore}.reload({ params: {cid: this.value}});" />
    </Listeners>
</ext:ComboBox> 
```

# c# - 我在 c# 中调用时收到“无效的映射类型值”这个错误

> ID：10386106
> 
> 赞同：0
> 
> 时间：2012-04-30T15:18:54.960
> 
> 标签：c#, sql-server, crystal-reports

我创建了显示我的报告的方法，然后我在运行时提供了连接信息，但是当我连接到远程服务器时出现错误

```
 public bool ShowReport()
{
    try
    {
        //CrystalDecisions.CrystalReports.Engine.ReportDocument oRepDoc;
        //CrystalDecisions.Shared.TableLogOnInfo oLogInfo;
        //CrystalDecisions.CrystalReports.Engine.Table oTable;
        //CrystalDecisions.CrystalReports.Engine.FieldDefinition oField;
        //CrystalDecisions.CrystalReports.Engine.ParameterFieldDefinition oParamFieldDef;
        //CrystalDecisions.Shared.ParameterValues oParamValues;
        //CrystalDecisions.Shared.ParameterDiscreteValue oDiscretParamValue;
        //ParameterFields oParamList;
        //ParameterField oParamItem;

        if (!System.IO.File.Exists(ReportPath))
        {
            MessageBox.Show("ملف التقرير غير موجود فى المسار الصحيح", MainClass.ApplicationName, MessageBoxButtons.OK, MessageBoxIcon.Warning);
            return false;
        }
        else
        {
            oRepDoc = new ReportDocument();
            oLogInfo = new TableLogOnInfo();
            Tables t;
            oRepDoc.Load(ReportPath, OpenReportMethod.OpenReportByTempCopy);
            //***********************************************************************************

            ConnectionInfo connection = new ConnectionInfo();
            if (MainClass.IntegratedSecurity) connection.IntegratedSecurity = true;
            else
            {

                connection.IntegratedSecurity = false;
                connection.UserID = MainClass.UserId;
                connection.Password = MainClass.Password;
            }
            connection.ServerName = MainClass.ServerName;
            connection.DatabaseName = MainClass.DatabaseName;
             t= oRepDoc.Database.Tables;
             foreach (CrystalDecisions.CrystalReports.Engine.Table oTab in t)
            {
                oLogInfo = oTab.LogOnInfo;
                oLogInfo.ConnectionInfo = connection;

                oTab.ApplyLogOnInfo(oLogInfo);

                //oLogInfo = null;
            }

            //***********************************************************************************

            oRepDoc.Refresh();
            oRepDoc.VerifyDatabase(); // Very Important Line
            //***********************************************************************************
            // First Way To Pass Report Parameters Value
            foreach (Range oRange in oRangeList)
            {
                oRepDoc.SetParameterValue(oRange.RangeName, oRange.RangeValue);
            }
            oRangeList.Clear();
            //***********************************************************************************
            // Second Way To Pass Report Parameters Value
            //ParameterValues oCurrentParameterValues;
            //ParameterDiscreteValue oParameterDiscreteValue;
            //CrystalDecisions.CrystalReports.Engine.ParameterFieldDefinitions oParameterFieldDefinitions = oRepDoc.DataDefinition.ParameterFields;
            //foreach (Range oRange in oRangeList)
            //{
            //    oCurrentParameterValues = new ParameterValues();
            //    oParameterDiscreteValue = new ParameterDiscreteValue();
            //    oParameterDiscreteValue.Value = oRange.RangeValue;
            //    oCurrentParameterValues.Add(oParameterDiscreteValue);
            //    ParameterFieldDefinition oParameterFieldDefinition = oParameterFieldDefinitions[oRange.RangeName];
            //    oParameterFieldDefinition.ApplyCurrentValues(oCurrentParameterValues);
            //}
            //oRangeList.Clear();
            //***********************************************************************************
            // Pass "Company Name" And "Telephone" And "Printed By"  To Report
            FormulaFieldDefinition oFormulaFieldDefinition;
            FormulaFieldDefinitions oFormulaFieldDefinitions = oRepDoc.DataDefinition.FormulaFields;

            oFormulaFieldDefinition = oFormulaFieldDefinitions["For_CompanyName"];
            oFormulaFieldDefinition.Text = string.Format("\"{0}\"", MainClass.CompanyName);
            oFormulaFieldDefinition = oFormulaFieldDefinitions["For_CompanyTel"];
            oFormulaFieldDefinition.Text = string.Format("\"{0}\"", MainClass.CompanyTel);
            oFormulaFieldDefinition = oFormulaFieldDefinitions["For_PrintedBy"];
            oFormulaFieldDefinition.Text = string.Format("\"{0}\"", MainClass.GetUserName(MainClass.SystemUserId));
            //***********************************************************************************
        }
        if (Destination == ReportDestination.Printer)
        {
            oRepDoc.PrintOptions.PrinterName = PrinterName;
            oRepDoc.PrintToPrinter(NumberofCopies, Collate, StartPage, EndPage);
            return true;
        }
        return true;
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message, MainClass.ApplicationName, MessageBoxButtons.OK, MessageBoxIcon.Warning);
        return false;
    }
} 
```

调试 oRepDoc.VerifyDatabase() 时；通过 connectioninfo 在 sql server 上的工作方式，我得到错误无效映射

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:46:19.777

确保您的 UserId 和密码在 MainClass 中正确，数据库不需要加密密码或您正在传递加密值，并且用户有权访问该数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:57:57.620

来自 MSDN 上的这个帖子的 Tim Vasil 说，他通过在正在连接的服务器计算机上安装 Microsoft SQL Server Native Client 解决了这个错误。

[http://social.msdn.microsoft.com/forums/en-US/vscrystalreports/thread/3c8db743-f1fb-4021-bf46-f6aee8889932](http://social.msdn.microsoft.com/forums/en-US/vscrystalreports/thread/3c8db743-f1fb-4021-bf46-f6aee8889932)

以下是有关如何安装 Microsoft SQL Server Native Client 的一些链接：

[http://msdn.microsoft.com/en-us/library/ms131321.aspx](http://msdn.microsoft.com/en-us/library/ms131321.aspx)

[http://msdn.microsoft.com/en-us/sqlserver/ff658532](http://msdn.microsoft.com/en-us/sqlserver/ff658532)

# sql - SQL Server - 使用计数和

> ID：10386107
> 
> 赞同：3
> 
> 时间：2012-04-30T15:19:03.117
> 
> 标签：sql, sql-server, sql-server-2005

我正在使用 SQL Server。我需要使用的公式是 (Good-Bad)/Total_Responses。好的是当值 >=9 并且坏是 <=6 时。

我拥有的数据是：

```
DATE        Q1  Q2
2012-03-04   9   9
2012-03-04   8   8
2012-03-04   7   9
2012-03-04   4  NA
2012-03-04  10  10
2012-03-04   8   3
2012-03-04   3   4
2012-03-04   2   6
2012-03-04   6   8
2012-03-04  NA   6 
```

我知道我将不得不使用“CASE WHEN ISNUMERIC(Q1)=1”来确保它不使用 NA 值（它们存储为 Nvarchar）

所以公式最终会是 (5-8)/18=-0.16666 所以总的来说，我试图让数据看起来像：

```
DATE        Promotor_Score
2012-03-04        -0.16666 
```

谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T15:24:05.207

这行得通吗？

```
SELECT  Date,
        CAST((SUM(CASE WHEN ISNUMERIC(Q1) != 1 THEN 0
                 WHEN CAST(Q1 AS int) >= 9 THEN 1
                 WHEN CAST(Q1 AS int) <= 6 THEN -1
                 ELSE 0 END)
        + SUM(CASE WHEN ISNUMERIC(Q2) != 1 THEN 0
                 WHEN CAST(Q2 AS int) >= 9 THEN 1
                 WHEN CAST(Q2 AS int) <= 6 THEN -1
                 ELSE 0 END)) AS float)
        / (SUM(CASE WHEN ISNUMERIC(Q1) != 1 THEN 0
                   ELSE 1 END)
        + SUM(CASE WHEN ISNUMERIC(Q2) != 1 THEN 0
                   ELSE 1 END))
FROM    Questions
GROUP BY Date 
```

或者，如果 'NA' 是唯一的非数字值，请显式测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:34:13.623

在@DavidM 回答的基础上，我添加了浮点转换和 Q2 列意识：

```
SELECT [date], 
1e0 -- a float multiplier to avoid integer value
* SUM( 0
    -- get the positive, negative or neutral from q1
    + CASE WHEN ISNUMERIC(q1) != 1 THEN  0
    WHEN CAST(q1 AS int) >= 9    THEN  1
    WHEN CAST(q1 AS int) <= 6    THEN -1
    ELSE 0 END
    -- get the positive, negative or neutral from q2
    + CASE WHEN ISNUMERIC(q2) != 1 THEN  0
    WHEN CAST(q2 AS int) >= 9    THEN  1
    WHEN CAST(q2 AS int) <= 6    THEN -1
    ELSE 0 END
)
/ SUM( 0
    -- get the number of valid questions from q1
    + CASE WHEN ISNUMERIC(q1) != 1 THEN 0 ELSE 1 END        
    -- get the number of valid questions from q2
    + CASE WHEN ISNUMERIC(q2) != 1 THEN 0 ELSE 1 END
)
FROM Questions
GROUP BY Date; 
```

# r - Spearman 等级相关

> ID：10386113
> 
> 赞同：2
> 
> 时间：2012-04-30T15:19:18.290
> 
> 标签：r, plot, correlation

我正在编写一个脚本，它读取两个向量中的两个 .txt 文件。之后，我想进行 Spearman 等级相关并绘制结果。第一个向量值的长度是 12-13 个字符（例如 7.3445555667 或 10.3445555667），第二个向量值的长度是一个字符（例如 1 或 2）。

编码：

```
vector1 <- read.table ("D:...path.../mytext1.txt", header=FALSE)
vector2 <- read.table ("D:...path.../mytext2.txt", header=FALSE)
cor.coeff = cor(vector1 , vector2 , method = "spearman")
cor.test(vector1 , vector2 , method = "spearman")
plot(vector1.var, vector2.var) 
```

.txt 文件仅包含数值。

我遇到了两个错误，第 4 行的第一个错误就像“'x' 必须是数字向量”，第二个错误发生在第 5 行，就像“找不到对象向量 1.var”

我也试过

```
 plot(vector1, vector2) 
```

代替

```
 plot(vector1.var, vector2.var) 
```

但随后出现类似“stripchart.default (x1,...) 中的错误：无效的绘图方法

该实施面向[http://www.gardenersown.co.uk/Education/Lectures/R/correl.htm#correlation](http://www.gardenersown.co.uk/Education/Lectures/R/correl.htm#correlation)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T15:30:26.837

`str`是一个非常有用的功能（更多信息请参阅`?str`），应该经常使用，尤其是在验证`R`对象类型时。快速`str(vector1)`并`str(vector2)`会告诉您这些列是否被读取为字符而不是数字。如果是这样，则用于`as.numeric(vector1)`对每个向量中的数据进行类型转换。

此外，`names(vector1)`还会`names(vector2)`告诉您列名是什么，并且可能会解决您的绘图问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T15:30:38.117

我怀疑`vector1`并且`vector2`是向量。阅读`?read.table`我们在**价值**部分中注意到：

> 价值：
> 
> ```
>  A data frame (‘data.frame’) containing a representation of the
>     data in the file. 
> ```
> 
> ……

因此，即使您的两个文本文件只包含一个变量，读入的两个对象也将是每个具有单个组件的数据帧。

其次，您的数据文件不包含标题，因此 R 将组成一个变量名。我没有对此进行测试，但 IIRC 你的变量`vector1`都`vector2`将被调用`X1`。在（或）上执行`head(vector1)`相同操作以查看您的对象在 R 中的外观。`vector2``names(vector1)`

我可以理解**为什么**您可能认为`vector1.var`可能有效，但您应该意识到，就 R 而言，它正在寻找一个名为`vector1.var`. `.`只是 R 对象名称中的任何其他字符。如果您打算`.`用作子集或选择运算符，那么您需要阅读 R 中的子集运算符。这些是`$`and`[`和`[[`。例如，参见[R 语言定义手册](http://cran.r-project.org/doc/manuals/R-lang.html#Indexing)或[R 手册](http://cran.r-project.org/doc/manuals/R-intro.html#Index-vectors)。

我怀疑您可以将代码更改为：

```
vector1 <- read.table ("D:...path.../mytext1.txt", header=FALSE)[, 1]
vector2 <- read.table ("D:...path.../mytext2.txt", header=FALSE)[, 1]
cor.coeff <- cor(vector1 , vector2 , method = "spearman")
cor.test(vector1 , vector2 , method = "spearman")
plot(vector1, vector2) 
```

但我假设你的两个文本文件中有很多内容......

# iphone - 如何将 ScrollView 添加到我的 TableviewController 类？

> ID：10386117
> 
> 赞同：0
> 
> 时间：2012-04-30T15:19:38.977
> 
> 标签：iphone, ios5, uiscrollview, uitableview

我有一个 tableviewController 类，我在 tableview 中显示我的内容。在这里，我想在 tableview 下方添加一个滚动视图，但我无法更改 tableview 坐标。我的 TableviewController 又被添加到导航控制器中。到目前为止，我可以使用添加滚动视图，`self.view addsubview:myScrollView`但它正在添加到表格视图中。当我滚动表格视图时，滚动视图也会垂直滚动。但我希望滚动视图固定在表格视图下方，我只想让我的滚动视图水平滚动。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T15:33:12.513

似乎正在发生的事情是您在视图堆栈顶部添加了一个 UIScrollView ，因此导致它位于 UITableViewController 顶部而不是它旁边。不是很好。

您应该考虑使用 UIViewController 而不是 UITableViewController。然后，您可以使用 UINavigationController 和单独的 UIScrollView 子视图 UITableView 以适应您想要的屏幕。

这是一项非常重大的任务，因此很难用代码证明一个好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T00:02:17.247

你需要做的是让你的视图控制器成为 UIViewController 的子类，然后在你的头文件中添加 UITableViewDatasource 和 UITableViewDelegate 协议。如果您在 NIB 中进行实例化，请扔掉您的 Tableview 实例并将其替换为 UIView。然后，您将 FilesOwner 作为您的视图。然后从库中引入表视图对象并将其委托和数据源挂钩到文件所有者，你应该很好！希望这对你有用。一直为我工作！

# macos - OSX 内核编程入门

> ID：10386118
> 
> 赞同：1
> 
> 时间：2012-04-30T15:19:55.680
> 
> 标签：macos, kernel

对于熟悉 Linux 内核编程的人来说，OSX 内核编程入门有哪些资源？我已经阅读了一些 Apple Developer 资源，但它们看起来相当通用（例如基本的并发控制原语）。具体来说，我对文件系统开发感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:27:43.420

Amit Singh 的书“Mac OS X Internals”包含一章描述 HFS+ 的实现，这可能会有所帮助。如果您找到描述 BSD 的 VFS 层的资源，这也可能有所帮助，因为那是 OS X 的 VFS 层的起源（尽管有自己的页面缓存，称为统一缓冲区缓存或 UBC）。此外，您可以尝试在 MacFuse 及其后代的源代码中四处寻找。查看一些更简单的文件系统的来源（HFS+ 对此有点大）可能也会有所帮助。

# wordpress - 用于依赖下拉列表的 Wordpress 插件

> ID：10386119
> 
> 赞同：3
> 
> 时间：2012-04-30T15:19:56.070
> 
> 标签：wordpress

好吧，我知道我会被否决，但我认为值得一试。

我从未使用过 wordpress，并且发现使用它非常不愉快。我的一个朋友让我实现一个功能，我只是没有时间了解它的内部工作。

我正在寻找的是一个插件，它让我有某种树，代表本地化，有点像：

```
Country
   State
      City
         Person 1
         Person 2
         Person 3 
```

让我用相关的选择框来表示它，这些框将列出我选择的城市、州、国家的人？

感谢您的帮助，如果这超出了 SO 的范围，我很抱歉

PS：是的，我查看了[wordpress插件目录](http://wordpress.org/extend/plugins/)，没有找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T22:02:44.247

可能你永远找不到具有这种功能的插件。

这是结构数据库中基于规则的简单接口。

我建议您创建一个与 wordpress 平行的数据库结构，该结构具有示例中显示的层次结构所需的特征。

在这个模型数据库之后，你可以使用 wordpress 中的 wpdb() 类来访问这个表并执行查询。在下面的链接中，有相关说明：

[http://codex.wordpress.org/Class_Reference/wpdb](http://codex.wordpress.org/Class_Reference/wpdb)

如果你想使用实际 wordpress 用户的结构，有一些用于列出用户的插件：

[http://wordpress.org/plugins/simple-user-listing/](http://wordpress.org/plugins/simple-user-listing/) [http://wordpress.org/plugins/user-list/](http://wordpress.org/plugins/user-list/)

但是wordpress提供的用户注册不能提供你需要的用户的详细信息。

希望这可以帮助。

# r - 比较使用 k-means 聚类的 2 个聚类解决方案

> ID：10386120
> 
> 赞同：1
> 
> 时间：2012-04-23T13:42:07.087
> 
> 标签：r, cluster-analysis, k-means

我第一次在 R 中尝试集群，并且一直在在线查看基本的 R 帮助，并尝试比较 2 个集群解决方案的结果。

我小心地复制并粘贴了脚本，以确保我首先正确命名了相关数据集，但不断收到我不理解的错误消息。

有任何想法吗？

脚本很简单：

# 比较 2 个集群解决方案

```
library(fpc)
cluster.stats (d, fit1$cluster, fit2$cluster) 
```

我得到的错误信息是：

```
> library(fpc)
> cluster.stats(d, fit1$cluster, fit2$cluster)
Error in as.matrix.dist(d) : 
  length of 'dimnames' [1] not equal to array extent
In addition: Warning messages:
1: In as.dist.default(d) : NAs introduced by coercion
2: In as.dist.default(d) : non-square matrix
3: In as.matrix.dist(d) :
  number of items to replace is not a multiple of replacement length 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T08:20:30.097

对象应包含距离矩阵（通常是对角线上为零的`d`对称矩阵）。在 R 中可以使用获得距离矩阵

```
d <- dist(clustering_result) 
```

# smartgwt - smartgwt listgrid 设置光标交出一个图标字段

> ID：10386121
> 
> 赞同：3
> 
> 时间：2012-04-30T15:20:08.057
> 
> 标签：smartgwt, listgrid

我已经在这个问题上工作了很长一段时间，但一直无法解决它。我有一个带有字段类型图标的列表网格。我想将光标更改为“移交”图标。

我一直在网上搜索，发现存在一些解决方案。其中之一是`addCellOverHandler`用于列表网格。但我不明白如何更改列表网格指定字段的光标。

```
this.addCellOverHandler(new CellOverHandler() {

    @Override
    public void onCellOver(CellOverEvent event) {
    // not able to get the field and setCursor()        
    }
}); 
```

我在 listgrid 中的字段定义为：

```
ListGridField iconField = new ListGridField("icon");
iconField.setAlign(Alignment.CENTER);
iconField.setType(ListGridFieldType.ICON);
iconField.setIcon("icons/icon.gif"); 
```

就像论坛上有人指出`setCursor()`的那样，listgrid 存在一种方法，但不仅仅适用于该领域......

如果有人有线索...谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:05:06.883

经过更多（更多......）谷歌搜索，我发现了这个：

[http://forums.smartclient.com/showthread.php?t=15748](http://forums.smartclient.com/showthread.php?t=15748)

事情是重写`getCellStyle`列表网格中的方法。这是我使用的代码：

```
@Override
protected String getCellStyle(ListGridRecord record, int rowNum, int colNum) {
    if (colNum==6){
        return "EC_pointer";
    }
    return super.getCellStyle(record, rowNum, colNum);
} 
```

在我的 CSS 文件中：

```
.EC_pointer { 
    cursor: pointer; 
} 
```

主要后果是您必须提前知道字段的列号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T19:27:00.973

在我的评论和从[这里](http://forums.smartclient.com/showthread.php?t=5642)添加信息之后，我测试了以下代码，该代码在 Firefox 5.0 下与 SmartGwt2.4 一起使用。

```
demandesGrid.setCanHover(true);
demandesGrid.setShowHover(false);
demandesGrid.addCellHoverHandler(new CellHoverHandler() {
    @Override
    public void onCellHover(CellHoverEvent event) {
        if (event.getColNum() == demandesGrid.getFieldNum("icon")) {
        //  SC.say(demandesGrid.getChildren()[3].toString());
            demandesGrid.getChildren()[3].setCursor(Cursor.POINTER);
        } else {
            demandesGrid.getChildren()[3].setCursor(Cursor.DEFAULT);
        }
    }
}); 
```

我不知道 的索引`ListGridBody`是否恒定；我用`SC.say`线找到了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T00:54:07.623

最好的方法[在这里](http://www.smartclient.com/smartgwt/showcase/#grid_cell_widgets)得到了充分展示（看看“comments/stats”字段是如何被初始化的）。

简而言之，您必须扩展 ListGrid 并覆盖 createRecordComponent 方法。在这种方法中，您可以制作任何您喜欢的自定义组件，它将显示在网格单元格中。

ListGrid 也应该初始化为：

```
listGrid.setShowRecordComponents(true);
listGrid.setShowRecordComponentsByCell(true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T05:30:30.567

怎么样

```
grid.addCellOverHandler(new CellOverHandler() {
  @Override
  public void onCellOver(CellOverEvent event) {
    //cellOver event to get field and refresh the cell
    //grid.refreshCell(i, j);
  }
}); 
```

# function - Scala定义函数标准

> ID：10386124
> 
> 赞同：3
> 
> 时间：2012-04-30T15:20:10.240
> 
> 标签：function, scala, coding-style, definition

以下是等价的：

```
scala> val f1 = {i: Int => i == 1}
f1: Int => Boolean = <function1>

scala> val f2 = (i: Int) => i == 1
f2: Int => Boolean = <function1> 
```

我更熟悉前者（来自 Groovy），但后一种形式更常见，AFAIK，在 Scala 中定义函数的标准方法。

我应该忘记过去（Groovy）并采用第二种形式吗？第一种形式对我来说更自然，因为它看起来类似于 Groovy/Ruby/Javascript 定义闭包（函数）的方式

**编辑**
参见 Zeiger 在[这个线程](https://stackoverflow.com/questions/6522960/scalaquery-filter-by-any-combination-of-conditions)中的回答，例如，groovy/ruby/javascript 闭包`{=>}`语法似乎比`() =>`我假设两者可以互换使用更自然，具有相同的性能、传递能力等，*唯一*的区别是语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:39:40.990

Actually, both versions are simplified forms of the "full" version.

Full version: multiple parameters, multiple statements.

```
scala> val f0 = { (x: Int, y: Int) => val rest = x % y; x / y + (if (rest > 0) 1 else 0) }
f0: (Int, Int) => Int = <function2> 
```

The "groovy" version: one parameter, multiple statements.

```
scala> val f1 = { x: Int => val square = x * x; square + x }
f1: Int => Int = <function1> 
```

The "scala" version: multiple parameters, one statement.

```
scala> val f2 = (x: Int, y: Int) => x * y
f2: (Int, Int) => Int = <function2> 
```

A version with a single parameter and a single statement does not exist, because it is not syntactically valid (ie, the grammar for that doesn't quite work).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T15:53:36.793

我认为这是品味问题（scala [styleguide](http://docs.scala-lang.org/style/declarations.html#function_values)推荐第一个）。前一个允许您编写多行（正文中> 2行）函数：

```
val f1 = { i: Int =>
  val j = i/2
  j == 1
} 
```

有时它很有用

# php - x 和 y 之间的随机数，不包括中间的数字范围

> ID：10386127
> 
> 赞同：1
> 
> 时间：2012-04-30T15:20:19.533
> 
> 标签：php, random

我正在实现一个系统，它需要将某个范围内的数字分配给一个人，但不使用以前使用过的任何数字。
请记住，数字范围和排除列表都将非常大。

最初，我认为做这样的事情是最好的：

```
<?php 
  $start = 1;
  $end = 199999;
  $excluded = array(4,6,7,8,9,34);
  $found = FALSE;
  while (!$found) {
    $rand = mt_rand($start,$end);
    if (!in_array($rand,$excluded)) {
      $found = TRUE;
    }
  } 
?> 
```

但我认为这并不理想，可能会出现无限循环（或者需要很长时间/脚本超时）。

我还考虑过生成一个包含我需要的所有数字的数组，但是一个庞大的数组肯定会更糟吗？同样在 2 个大型阵列上进行阵列差异肯定也需要很长时间？像这样的东西：

```
<?php 
  $start = 1;
  $end = 199999;
  $allnums = range($start,$end);
  $excluded = array(4,6,7,8,9,34);
  $searcharray = array_diff($allnums,$excluded);
  $rand = array_rand($searcharray);
?> 
```

所以，我的问题是哪个是更好的选择？还有其他人以前使用过的（更好的）方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:22:50.033

数组保存大量数据会占用大量内存，难道不用数据库来保存这些数字吗？这通常是它们的设计目的。

# python - Python：如何复制 /bin/ 文件夹中的文件

> ID：10386132
> 
> 赞同：0
> 
> 时间：2012-04-30T15:20:29.973
> 
> 标签：python, copy, system-administration

我想在 Ubuntu 的 /usr/bin 文件夹中放置一个特殊文件。基本上我正在尝试在 python 中编写一个安装文件来完成这项工作。

但是完成这项工作需要管理权限，如何为我的设置提供这些权限（前提是我有密码并且可以在我的程序中使用它）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:22:38.230

您需要以升级的权限运行该程序。在 Ubuntu 下，这通常使用`sudo`命令完成，该命令将提示用户输入密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:40:40.687

你不能只升级已经运行的脚本的权限（好吧，除非你使用一些本地漏洞）。

最好的方法是遵循@Lattyware 的建议，并强制用户以 root 权限（通过`sudo`或通过任何其他方式）运行脚本。这是安装人员非常普遍的做法。

但是，如果您真的需要在中途升级权限（我无法想象为什么），您可以执行以下操作：

```
import os
cpstr = 'echo %(pass)s | sudo -S cp "%(from)s" "%(to)s"'
os.system(cpstr % {'pass':'userpassword', 'from':'./build/bin/myapp', 'to':'/bin/myapp'}) 
```

# objective-c - “增强” iOS 表格单元格的入门？

> ID：10386134
> 
> 赞同：1
> 
> 时间：2012-04-30T15:20:36.953
> 
> 标签：objective-c, ios, ios5, uitableview

我对 Objective C/iOS 开发比较陌生，所以我意识到这似乎是一个基本问题：对于 iOS 5+，我正在寻找有关如何创建包含各种数据的单元格的 tableview 的入门知识。例如，在我的数据数组中，我可能有如下数据：

1.  餐厅名称（基本字符串）
2.  餐厅标志（图像文件的字符串名称）
3.  餐厅评分（整数）

在单个单元格中，我想显示餐厅的徽标，然后是名称，然后根据评级整数显示一些星星（即“4”将显示单个星星图像 4 次）。

我不知道是否可以使用标准表格单元格执行此操作，或者是否需要创建自定义表格单元格对象。

帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T15:31:31.713

这是一个很好的起点。

[http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html](http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html)

他们提出的一点是，如果您进行子类化，`UITableViewCell`那么您做错了什么。相反，请阅读它，因为大多数时候自定义标准`UITableViewCell`就足够了。

对于壮观的定制，然后派生一个类`UITableViewCell`就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:47:36.057

我将尝试根据我的经验为您提供一些有关如何实现目标的建议。

我认为您可以同时使用默认单元格或自定义单元格。

在第一种情况下，您可以使用具有`UITableViewCell`默认样式的简单单元格 ( )。您可以使用的属性有：`imageView`徽标、`textLabel`名称和`accessoryView`评级。查看[A Closer Look at Table-View Cells](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7)了解有关表格单元结构的信息。如果您必须维护单元格内容的特定顺序，则需要创建一个自定义单元格来扩展`UITableViewCell`和覆盖`layoutSubviews`方法。我已经在这个 stackoverflow 主题[custom-uitableviewcell-with-an-optional-image](https://stackoverflow.com/questions/9720684/custom-uitableviewcell-with-an-optional-image/)中回答了一个问题。

在第二种情况下，您可以使用自定义 xib 或完全新鲜的单元格并在那里进行操作。在那里你可以找到很多指南来做到这一点。这里有几个：

1.  @bbarnhart 写的那个
2.  [可定制的viewcell](http://iphone.galloway.me.uk/iphone-sdktutorials/custom-uitableviewcell/)
3.  [在 ios-4 中创建自定义 uitableviewcell](http://ijoshsmith.com/2011/07/16/creating-a-custom-uitableviewcell-in-ios-4/)（建议）

PS 对于创建费率视图，我建议查看[how-to-make-a-custom-uiview-a-5-star-rating-view](http://www.raywenderlich.com/1768/how-to-make-a-custom-uiview-a-5-star-rating-view)。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:35:41.173

您可以使用带有图像和字幕的标准表格视图单元格来执行此操作。主要文本标签是餐厅名称，图像视图包含您的徽标，副标题可以由适当数量的 unicode 星号组成（例如，`@"\u2605"`）。

# java - 泛型类可以是方法/返回类型吗？

> ID：10386136
> 
> 赞同：0
> 
> 时间：2012-04-30T15:20:49.577
> 
> 标签：java, generics

我目前正在学习泛型我在这里有这个泛型类

```
package generics.lesson;

public class Pair<T> {

    private T first;
    private T second;

    public Pair(){ first = null; second = null; }
    public Pair(T first, T second){ this.first = first ; this.second = second;}

    public T getFirst() { return first; }
    public T getSecond() { return second; }

    public void setFirst(T first) { this.first = first; }
    public void setSecond(T second) { this.second = second; }
} 
```

到目前为止我明白这一点，但后来我遇到了这个

```
public static Pair<String> minmax(String[] a)
    {
        if(a.length == 0 || a == null) return null;
        String min = a[0];
        String max = a[0];

        for(int i = 1 ;  i < a.length ; i++)
        {
            if(min.compareTo(a[i])>0) min = a[i];
            if(max.compareTo(a[i])<0) max  = a[i];
        }
        return new Pair<String>(min,max);
    } 
```

让我困惑的是

```
public static Pair<String> minmax(String[] a) 
```

问题

这怎么可能？泛型类可以是方法返回类型吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T15:22:01.383

是的，它可以。

为什么你会认为它不能？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T15:26:12.203

如果这有效

```
public T getFirst() { return first; } // returns a generic type
public T getSecond() { return second; } // returns a generic type 
```

（你说你“明白这一点”）

我希望这也能奏效

```
public static Pair<String> minmax(String[] a) // returns a generic type 
```

顺便说一句：在 Java 1.4 中都不起作用，在 Java 5.0+ 中两者都起作用。;)

# c# - 将 C++ 结构编组到 C# 类时出现 AccessViolationException

> ID：10386139
> 
> 赞同：2
> 
> 时间：2012-04-30T15:20:55.230
> 
> 标签：c#, c++, struct, pinvoke, marshalling

我正在尝试使用 PInvoke 将 C++ 库 (libclang) 包装到 C# 包装器中。

一切都很闪亮，直到我尝试调用返回结构的 C++ 方法。我[按照书本](http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx)做了所有事情，但是当这个方法被调用时，我得到了 AccessViolationException。

现在，我读到这可能是因为对象的内存图像有问题。我检查并仔细检查了我是否已经把所有的 arrtibutes 和什么不是无处不在但异常不会消失。（我一直在看这段代码几个小时，所以我可能错过了一些东西，你们没有）。

C++ 部分（不是我的代码，但我确信它可以工作）：

```
CXString clang_formatDiagnostic(CXDiagnostic Diagnostic, unsigned Options) {

/* Parse the hell out of a lot of data, an then make a string
   In the end, string gets wrapped in a custom struct: CXString.
 */

    return createCXString(Out.str(), true);

} 
```

这是CXString：

```
typedef struct {
  void *data;
  unsigned private_flags;
} CXString; 
```

所以我有我的 C# 类来表示包装的 C++ 原件：

```
public class Diagnostic 
    {
        private IntPtr _nativeObject;
        internal IntPtr NativeObject { get { return _nativeObject; } }

        [DllImport("libclang.dll", EntryPoint = "clang_formatDiagnostic")]
        [return: MarshalAs(UnmanagedType.LPStruct)]
        private static extern CXString FormatDiagnostic(IntPtr diag, uint options);

        public Diagnostic(IntPtr native)
        {
            _nativeObject = native;
        }

        public string GetString(DiagnosticDisplayOptions options = DiagnosticDisplayOptions.DisplaySourceLocation)
        {
            var cxstr = FormatDiagnostic(_nativeObject, (uint)options); //<-- I get the exception here
            return cxstr.GetString();
        }
    } 
```

我需要的函数也是以 C 风格（全局）实现的，因此，我可以在我的 C# 类中给人一种 OO 的印象，但实际上我存储了 C++ 对象的 IntPtr 表示（`_nativeObject`）。所以我很确定，存储在中的对象`_nativeObject`实际上是一个 CXDiagnostic（我从同一个库的另一个函数中得到了引用）。

我尝试与 FormatDiagnostic 方法一起使用的实际对象从另一个包装类 (TranslationUnit) 的构造函数中初始化：

```
public TranslationUnit(/*lots of params to init the unit*/)
    {
        //... there are some int conversions and initialization failsafe codes here

        //this is a property of TranslationUnit
        Diagnostics = new List<Diagnostic>();

        //GetDiagnosticsCount is also PInvoke to count CXDiagnostic objects related to the TranslationUnit
        var dgCnt = (int)GetDiagnosticsCount(_nativeObject);
        for (int i = 0; i < dgCnt; i++)
        {
            //GetDiagnostic is also PInvoke, gets the CXDiagnostic at the given index
            var diag_ptr = GetDiagnostic(_nativeObject, (uint)i);
            Diagnostics.Add(new Diagnostic(diag_ptr));
        }
        //up until now, all the calls seem to work
        //I get the expected count of diagnostics and none of the other 
        //PInvoke calls throw exceptions. They use IntPtrs, but none of them
        //use structs.
    } 
```

因此，正如 MSDN 教程所建议的那样，我创建了一个 C# 类来将 CXString 结构编组为，它看起来像这样：

```
[StructLayout(LayoutKind.Sequential)]
public class CXString
{
    public IntPtr data;
    public uint private_flags;
} 
```

当代码到达`FormatDiagnostic`调用时，我得到了 AccessViolationException。任何可能出错的提示？

编辑：

CXDiagnostic 是原始 C++ 代码中的指针类型：

```
typedef void *CXDiagnostic; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:16:51.187

我认为编组到 LPStruct 在这里是不合适的，并且 CXString 类需要是结构。

试试下面的代码：

```
public class Diagnostic 
{
    ...
    [DllImport("libclang.dll", EntryPoint = "clang_formatDiagnostic")]
    private static extern CXString FormatDiagnostic(IntPtr diag, uint options);
    ...
}

[StructLayout(LayoutKind.Sequential)]
public struct CXString
{
    public IntPtr data;
    public uint private_flags;
} 
```

此外，您应该注意调用约定（默认为 StdCall，但例如纯 C 使用 Cdecl）和结构字节对齐。

# sql - Sql Server 包含

> ID：10386141
> 
> 赞同：3
> 
> 时间：2012-04-30T15:21:00.737
> 
> 标签：sql, sql-server

我需要匹配部分字符串，但无法打开全文索引，因此无法使用包含。我查看了 Levenstein 确定两个字符串之间距离的函数，但我不是在寻找模糊匹配，而是列中的每个字符都存在于字符串中。

即，如果传递的字符串类似于 AB_SYS_20120430.TXT，我想匹配任何包含 AB_SYS 的列。like 谓词没有让我到达那里。我真的需要 .NET 包含功能的等效功能，但如前所述，打开全文索引不是打开的选项。我想我会看看是否还有其他可能的解决方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T15:25:30.447

您在寻找`LIKE`功能吗？
[http://www.w3schools.com/sql/sql_like.asp](http://www.w3schools.com/sql/sql_like.asp)

```
... WHERE MyColumn LIKE '%AB_SYS%' 
```

这可能不是最佳的，但它似乎回答了您的问题......如果您只能从左侧或右侧进行搜索，则可以进一步优化。

这在功能上类似于`String.Contains`
[http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)

**编辑：**您将如何将输入文本解析为“相关”子字符串？

**编辑：**要搜索相同的`LIKE`条件但反向，从您的部分列到完整的文字，只需附加通配符：

```
... WHERE 'AB_SYS_20120430.TXT' LIKE '%' + MyColumn + '%' 
```

**编辑：**你建议你不能让它工作。如果您添加架构做您的问题，那么我可以进一步帮助您，但请考虑这一点：

您有一个名为 MyTable 的表
在该表中有一个名为 MyColumn 的
列 该表中的某些行在 MyColumn 中有数据“AB_SYS”

给定参数“AB_SYS_20120430.TXT”，您希望返回所有匹配的行

```
CREATE PROCEDURE MyTestProcedure 
    @pFullNameString nvarchar(4000) = '' -- parameter passed in, like AB_SYS_20120430.TXT
AS
BEGIN
    SELECT
        *
    FROM
        MyTable
    WHERE
        @pFullNameString LIKE '%' + MyTable.[MyColumn] + '%'
END
GO 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T15:45:49.343

You could use [CHARINDEX](http://msdn.microsoft.com/en-us/library/ms186323.aspx)

```
WHERE  CHARINDEX(StringToCheckFor, StringToCheckIn) > 0 
```

# ios - iOS Table View，改变表格索引的框架

> ID：10386142
> 
> 赞同：1
> 
> 时间：2012-04-30T15:21:03.440
> 
> 标签：ios, uitableview, indexing

我正在使用带有搜索栏和范围栏的 TableView。我在窗口右侧添加了部分索引。

```
myTableView.tableHeaderView = searchBar;
searchBar.delegate = self;
searchBar.showsCancelButton = YES;
searchBar.showsScopeBar = YES; 
```

第一部分索引绘制在搜索栏和范围栏上方。

如何更改索引列的框架？

谢谢

莱昂内尔

![截屏](../Images/e5eb122b4c08e9cc7a93db6514a1627b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:13:44.063

那么，你的一两行`tableView`is `hiding behind your scope bar and search bar`。问题是你需要`bind a tableView to your scopeBar`。那么它将在您的范围栏下方绑定 tableView 。

在您的代码中尝试这样的操作：

```
//tableView is a table outlet name
//scopeBar is your scope bar outlet name

[tableView setTableHeaderView:scopeBar]; 
```

此代码将与您绑定`tableView`。`scope bar`然后表格视图行将`not behind the scope bar`代替它`show down to that bar`。

# c++ - 构造函数参数问题 C++

> ID：10386144
> 
> 赞同：0
> 
> 时间：2012-04-30T15:21:04.827
> 
> 标签：c++, constructor

我有一个类的构造函数，它接受一个布尔值、一个指向数组的指针和字符串。

```
TheConstructor(bool theBool=true, int *theArray=0, std::string message="0"); 
```

这是将其写入头文件的正确方法吗？由于“对“构造函数”和其他成员函数的未定义引用”，我的程序现在没有编译。

这也可能是什么原因造成的？我检查并在 main.cpp 我 #included "Class.h" 并定义了每个需要定义的成员函数，这些函数在我在 "Class.cpp" 中编写的 "Class.h" 中说明

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:28:59.887

我希望你没有命名你的类`TheConstructor`:)如果你有类`C`，你几乎可以像你一样声明它的构造函数——你忘了输入`bool`参数的名称：

频道：

```
#include <string>

class C
{
public:    
    C(bool b = 0, int *theArray = 0, std::string message = "0");
}; 
```

C.cpp：

```
#include "C.h"
C::C(bool b, int *theArray, std::string message)
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:24:34.717

未指定第一个参数的名称，但这可能不会导致您遇到的错误：

```
TheConstructor(bool=0, int *theArray=0, std::string message="0"); 
```

你可能想做这样的事情：

```
TheConstructor(bool flag=0, int *theArray=0, std::string message="0"); 
```

但是，在没有看到定义的情况下，我对此无话可说。仅通过查看声明很难预测还有什么问题。

# db2 - 为什么从 cics 获取的值在末尾附加 0

> ID：10386145
> 
> 赞同：1
> 
> 时间：2012-04-30T15:21:08.553
> 
> 标签：db2, cobol, cics

我在 cics 映射中有一个数字字段，长度为 3。当我在字段中输入 10 并尝试通过存储到 cobol 程序中的工作存储变量中来插入数据库时​​，它被插入为 100。这是为什么会这样吗？有什么办法可以在开头插入

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T16:07:54.247

因为 BMP 字段的默认设置是带有空白填充的左对齐。

您需要将 JUSTIFY=(RIGHT,ZERO) 添加到您的 DFHMDF 字段定义中。

这是[CICS 应用程序编程参考](http://publib.boulder.ibm.com/infocenter/txformp/v6r0m0/index.jsp?topic=/com.ibm.cics.te.doc/erziah0034.htm)。

# php - PHP：是什么提供了更快的执行时间，include_once 或 if 语句？

> ID：10386148
> 
> 赞同：0
> 
> 时间：2012-04-30T15:21:19.050
> 
> 标签：php, performance

我正在为我的客户创建一个主题，他们对页面加载时间非常挑剔。

所以我认为更少的代码将有助于页面加载更快，我遇到了包含一次的 php 代码。

```
<?php
include_once "a.php"; // this will include a.php
?> 
```

如果我使用 if 语句包含一次，我必须声明一个变量并在第二次检查后将变量更改为 false

什么是最有效的编码和帮助页面性能？

我还想知道当我们想要从文件中执行代码时，是否有更好的编码方式来帮助加快页面加载速度。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:09:22.120

在昏暗而遥远的过去，include_once 可能比 include 慢得多，但那是昏暗而遥远的过去。从那时起，PHP 的 include_once 功能得到了极大的优化。不幸的是，仍然有很多旧文章在互联网上流传，声称 include_once 很慢，即使它不再是真的。

即使 include_once 比 include 慢很多，除非您包含成千上万个文件，否则它也不会造成明显的性能影响。花时间加速它是一种[微优化](/questions/tagged/micro-optimization "显示标记为“微优化”的问题")，特别是如果你没有证据表明它是代码中的瓶颈。

**在任何项目中，首先也是最重要的是让代码符合规范**。速度慢但有效的代码仍然比速度快但无效的代码好。一旦你的代码工作并通过了所有的单元测试（你正在使用单元测试，对吗？），那么你就可以开始担心性能了。当你到达那个点时，你应该做的第一件事是分析你的代码以发现实际的瓶颈在哪里，而不是开始猜测你认为它们可能在哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T15:38:19.843

在我看来，PHP 对文件执行时间的影响不大。除非您循环 1000 次循环或结果，否则我认为您无法真正加快文件执行时间。所以我建议你不要担心这些事情。

我应该使用`include_once`/`require_once`因为它是一个 PHP 内置函数，使用简单，正是您所需要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T15:33:23.387

根据[这里](http://blog.seeit.org/2010/06/php-the-include-include_once-performance-debate/)和[那里](http://arin.me/blog/php-require-vs-include-vs-require_once-vs-include_once-performance-test)的建议。require_once 是最快的。也有`__autoload`，但有一些性能缺陷。正如这里所建议[的](http://blog.seeit.org/2010/06/php-the-include-include_once-performance-debate/)，如果您也使用相对或绝对寻址，这很重要。

# php - PHP - 从网页 HTML 中提取数据

> ID：10386151
> 
> 赞同：0
> 
> 时间：2012-04-30T15:21:39.520
> 
> 标签：php, regex

我需要在以下 HTML 代码中提取 FIESTA ERASMUS ans /event/83318 字样

```
 <div id="tab-soiree" class=""><div class="soireeagenda cat_1">  
            <a href="/event/83318/" class="lienFly"><img src="http://www.parisbouge.com/img/fly/resize/100/83318.jpg" alt="fiesta erasmus" class="fly"></a>
                <ul>
                    <li class="nom"><h2><a href="/event/83318/">FIESTA ERASMUS</a> </h2></li>
                    <li class="genre" style="margin-bottom:4px;">
                    <a href="/soirees-etudiantes/paris/1/" style="color:inherit;" title="soirée étudiante">soirée étudiante</a>             </li>
                    <li class="lieu"><a href="/club/paris/10/duplex">Duplex</a></li>                <li class="musique">house, electro, r&b chic, latino, disco</li>
                    <li class="pass-label">pass</li>                </ul>
                      <a href="/club/paris/10/duplex" title="duplex"><img src="/img/salles/resize/50/10.jpg" alt="duplex" class="flysalle"></a>
                 <hr class="clearleft">
        </div> 
```

我测试了这样的东西

```
$PATTERN = "/\<div id="tab-soiree".*<a href="/event/(.*)/">(.*)</a>/"
preg_match($PATTERN, $html, $matches); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:24:10.780

您不使用正则表达式解析 HTML。相反，使用 PHP 本身内置的 DOM 解析工具：http: [//php.net/manual/en/book.dom.php](http://php.net/manual/en/book.dom.php)

假设您的 HTML 可以从名为 的变量访问`$html`：

```
$doc = new DOMDocument();
$doc->loadHTML( $html );

$item = $doc->getElementsByTagName("li")->item(0);
$link = $item->getElementsByTagName("a")->item(0);

echo $link->attributes->getNamedItem('href')->nodeValue;
echo $link->textContent; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:27:29.827

我建议以下模式：

```
$PATTERN = '%<h2><a href="(.*?)">(.*?)</a>[\s]+</h2>%i';
preg_match($PATTERN, $html, $matches); 
```

该`(.*?)`部分是一个非贪婪模式，这意味着解析器不会一直走到提供的字符串的末尾，但会`"`在这种情况下停止。

您可能还希望在对其进行正则表达式之前对 html 进行预处理，即删除所有换行符以摆脱该`[\s]+`部分。

你可以[在这里](http://www.functions-online.com/preg_match.html)在线尝试。

# c++ - goto 对 C++ 编译器优化的影响

> ID：10386152
> 
> 赞同：21
> 
> 时间：2012-04-30T15:21:57.007
> 
> 标签：c++, optimization, compiler-optimization, goto

**`goto`使用现代 C++ 编译器有哪些性能优势或劣势？**

我正在编写一个 C++ 代码生成器，使用`goto`它会更容易编写。**没有人会触及生成的 C++ 文件，所以不要对我说“goto is bad”**。作为一个好处，它们节省了临时变量的使用。

我想知道，从纯粹的编译器优化的角度来看，goto 对编译器优化器的结果是什么？与使用临时/标志相比，它是否使代码*更快*、*更慢*或性能通常*没有变化*。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-30T15:34:40.310

将受到影响的编译器部分与流程图一起使用。只要您编写严格可移植的代码，用于创建特定流程图的语法通常是无关紧要的——如果您使用 a而不是实际语句创建类似`while`循环的东西，它不会产生相同的流程图就好像您使用循环的语法一样。然而，使用不可移植的代码，现代编译器允许您向循环添加注释以预测它们是否会被采用。根据编译器，您可能会或可能无法使用 a 复制该额外信息（但大多数具有循环注释的循环也具有语句注释，因此 a或在控制 a`goto``while``while``goto``if``likely taken``likely not taken``if``goto`通常与相应循环上的类似注释具有相同的效果）。

但是，可以生成一个带有`goto`s 的流图，这是任何正常的流控制语句（循环、开关等）都无法生成的，例如有条件地直接跳转到循环的中间，具体取决于一个全球性的。在这种情况下，您可能会生成一个不可约的流程图，并且当/如果您这样做时，这通常会限制编译器优化代码的能力。

换句话说，如果（例如）您将使用 normal `for`, `while`,`switch`等编写的代码转换为`goto`在每种情况下都可以使用，但保留相同的结构，则几乎任何合理的现代编译器都可能生成基本相同的代码方法。但是，如果您使用`goto`s 来产生像我几十年前不得不看的一些 FORTRAN 一样的意大利面条，那么编译器可能无法用它做很多事情。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-30T15:25:03.120

您如何看待循环在程序集级别上的表示？

使用*跳转*指令到*标签*...

许多编译器实际上会在它们的中间表示中使用跳转：

```
int loop(int* i) {
  int result = 0;
  while(*i) {
    result += *i;
  }
  return result;
}

int jump(int* i) {
  int result = 0;
  while (true) {
    if (not *i) { goto end; }
    result += *i;
  }

end:
  return result;
} 
```

LLVM 中的收益：

```
define i32 @_Z4loopPi(i32* nocapture %i) nounwind uwtable readonly {
  %1 = load i32* %i, align 4, !tbaa !0
  %2 = icmp eq i32 %1, 0
  br i1 %2, label %3, label %.lr.ph..lr.ph.split_crit_edge

.lr.ph..lr.ph.split_crit_edge:                    ; preds = %.lr.ph..lr.ph.split_crit_edge, %0
  br label %.lr.ph..lr.ph.split_crit_edge

; <label>:3                                       ; preds = %0
  ret i32 0
}

define i32 @_Z4jumpPi(i32* nocapture %i) nounwind uwtable readonly {
  %1 = load i32* %i, align 4, !tbaa !0
  %2 = icmp eq i32 %1, 0
  br i1 %2, label %3, label %.lr.ph..lr.ph.split_crit_edge

.lr.ph..lr.ph.split_crit_edge:                    ; preds = %.lr.ph..lr.ph.split_crit_edge, %0
  br label %.lr.ph..lr.ph.split_crit_edge

; <label>:3                                       ; preds = %0
  ret i32 0
} 
```

*分支*指令在哪里（条件跳转`br`）。

 *所有的优化都是在这个结构上进行的。因此，`goto`优化器的生计就是如此。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-30T16:46:27.440

> 我想知道，从纯粹的编译器优化角度来看，goto 在编译器的优化器上的结果是什么？与使用临时/标志相比，它是否使代码更快、更慢或性能通常没有变化。

你为什么在乎？您最关心的应该是让您的代码生成器创建正确的代码。效率远不如正确性重要。您的问题应该是“我对 goto 的使用会使我生成的代码更可能还是不太可能是正确的？”

查看 lex/yacc 或 flex/bison 生成的代码。该代码充满了goto。这是有充分理由的。lex 和 yacc 实现有限状态机。由于机器在状态转换时会进入另一个状态，因此 goto 可以说是这种转换最自然的工具。

在许多情况下，有一种简单的方法可以通过在语句`while`周围使用循环来消除这些 goto。`switch`这是结构化代码。Per Douglas Jones（Jones DW，*如何（不）编写有限状态机*，SIGPLAN Not. 23, 8 (Aug. 1988), 19-22.），这是对 FSM 进行编码的最糟糕的方法。他认为基于 goto 的方案更好。

他还认为还有一种更好的方法，即使用图论技术将 FSM 转换为控制流程图。这并不总是那么容易。这是一个NP难题。这就是为什么您仍然会看到很多 FSM，尤其是自动生成的 FSM，它们被实现为围绕开关的循环或通过 goto 实现的状态转换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T18:09:09.873

我非常同意 David Hammen 的回答，但我只有一点要补充。

当人们被教导编译器时，他们会被教导编译器可以做的所有美妙的优化。

他们没有被告知这的实际价值取决于用户是谁。

如果您正在编写（或生成）和编译的代码包含很少的函数调用，并且本身可能会占用其他程序的大部分时间，那么是的，编译器优化很重要。

如果正在生成的代码包含函数调用，或者由于某些其他原因，程序计数器在生成的代码中花费了一小部分时间，则不必担心。为什么？因为即使该代码可以如此积极地优化以至于它花费了*零*时间，它所节省的时间也不会超过那一小部分，而且可能还有更大的性能问题，编译器无法修复，很高兴能避开你的注意力。*

# php - PHP XML 不使用 XPath 加载

> ID：10386153
> 
> 赞同：0
> 
> 时间：2012-04-30T15:21:58.117
> 
> 标签：php, xml, xpath, xml-parsing

我正在加载一个 XML 文件，如下所示：

```
$places=simplexml_load_file("http://www.43places.com/service/search_places?api_key=1234&q=america");
$allPlaces=$places->xpath('//place');
foreach($allPlaces as $title)
{
    echo "a";
} 
```

简单测试一下，文件是否正确加载，您可以在[此处](http://www.43places.com/service/search_places?api_key=1234&q=america)查看 XML 文件。

知道为什么它不循环吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:06:32.953

我不确定为什么 XPath 不起作用，但是根据我在那里看到的 XML 结构，你真的不需要 XPath。SimpleXMLElements 可能有点看跌，但使用这种替代循环结构将非常容易：

```
foreach( $places->place as $place )
{
    echo "a";
} 
```

而且您根本不需要 xpath 查询的开销；你想要的结构已经在那里了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T18:17:19.877

它没有循环，因为它不返回任何节点。那为什么呢？

从技术上讲，该`<place>`元素位于它自己的命名空间中：`http://www.43places.com/xml/2005/rc#`，因此`place`只是元素的所谓*本地名称*，而不是全名。Xpath 不接受全名，但您可以使用您选择的名称（前缀）为 xpath 操作注册命名空间，然后在 xpath 查询中使用它：

```
$places->registerXPathNamespace("a", "http://www.43places.com/xml/2005/rc#");
$allPlaces = $places->xpath('//a:place'); 
```

`place`此查询现在选择您要查找的 20 个左右的元素。

另请参阅：[SimpleXML：使用包含名称空间的 XML](https://stackoverflow.com/q/2014835/367456)。

# nservicebus - 引发事件或发送命令？

> ID：10386155
> 
> 赞同：5
> 
> 时间：2012-04-30T15:22:06.557
> 
> 标签：nservicebus

我们创建了一个作为电子书阅读器的 Web 应用程序。所以要记住的一件事是，该领域并不完全是阅读实体书的领域。我们现在正试图通过存储用户访问的电子书页面的信息来收集用户的阅读行为。由于此信息进入数据仓库，我们认为从 bookcontroller 引发事件是正确的方法。

总线.Publish()

但是我们不确定它应该是发布还是发送，因为这个事件实际上只有一个消费者，那就是我们的商业智能团队。我们还了解到，不建议从 Web 应用程序发布 (http://www.make-awesome.com/2010/10/why-not-publish-nservicebus-messages-from-a-web-application /)。所以现在的替代方法是使用 bus.Send(RecordPageAccessedCommand)

但是上面的命令无论如何都不会改变我们的应用程序状态。那么它真的是一个命令吗？我有一种感觉，我们正在犯的错误是使用 NServiebus 的功能（发布、发送）并试图将其等同于命令或事件。

请让我知道解决方案是什么。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-01T04:45:26.397

根据您提供的信息，我建议“发送”到您的端点。

发送命令意味着处理消息的端点应该做一些事情。在您的情况下，记录页面被访问是端点应该做的事情。

发布事件意味着您正在通知 0..n 个订阅者发生了某事。如果系统中的其他服务对访问页面的事实感兴趣，则可以从命令处理程序发布事件。这里的关键点是，在你记录下来之前它不是一个“事实”。

我发现一旦数据可用，消费者往往会增长。能够从命令处理程序发布事件将使通知新消费者变得微不足道，而无需更改/冒着现有代码库的风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T05:06:34.310

RecordPageAccessedCommand 是一个命令，因为它*命令*系统做某事，在这种情况下，记录页面已被访问。

如果我正确理解了您的情况。应该从您的控制器向“商业智能团队服务”发送一条消息，告诉系统记录页面已被访问。该服务将存储此信息，并将成为此信息的所有者/技术权威。

任何其他服务都不应该以纯粹的形式存储或需要此信息，但是它们可以从该服务订阅事件，例如，在高度人为的场景中，当用户阅读 1000 页时，“商业智能团队服务”可以发布一个事件已读取 1000 页，即 Bus.Publish()，这可能由计费服务处理，为用户下次购买提供折扣。

数据仓库可以访问存储在“商业智能团队服务”中的这些信息，因为它属于 IT/OPS。

# resize - 照片调整大小。客户端还是服务器端？

> ID：10386157
> 
> 赞同：1
> 
> 时间：2012-04-30T15:22:26.540
> 
> 标签：resize, client, photo

我创建了一个照片库网站。我希望每张照片有 3 或 4 个不同尺寸的实例（包括原始照片）。在客户端（使用 Flash 或 HTML5）调整照片大小并将这张照片的所有实例分别上传到服务器会更好吗？或者最好只将照片上传到服务器一次，但使用服务器资源（例如 GD）调整它的大小？你有什么建议？另外有趣的是，大型网站是如何做到这一点的？例如 500px.com（该站点为每张照片创建 4 个实例，并且运行速度都足够快）或 Facebook。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T19:09:40.313

关于这个主题有几种思想流派，这实际上归结为您拥有多少张图片以及这些图片被多次查看的可能性有多大。最常见的是使用 Adob​​e Photoshop、GIMP、Sizzlepig 或 GD 等工具（本地或在 A 服务器上，不一定是 Web 服务器）创建所有图像大小，然后将所有资源上传到服务器。

在托管图像之前调整大小可以减轻最终用户的网络浏览器的压力，更重要的是减少托管站点所需的带宽量（当您运行大型站点并按传输的 GB 付费时尤其有用）

为了回答您关于真正大型网站的问题，有些人会提前进行图像缩放，有些人会即时进行，但通常是在服务器端完成。

# c++ - 我可以禁止某些功能使程序崩溃吗？

> ID：10386163
> 
> 赞同：2
> 
> 时间：2012-04-30T15:22:48.743
> 
> 标签：c++, c, segmentation-fault, sandbox, dynamic-library

我想做一个交互式代码学习系统，它允许用户（通常是年轻程序员）用c ++语言编写一个函数的内容，将其发送到服务器，在那里它将被编译成动态库并从主程序调用。

程序期望函数根据给定的参数返回正确的答案。

当然，会有一些孩子，这会导致像分段错误这样的错误。（服务器由 Linux 驱动）。

那么，我可以制作退出函数的信号处理程序吗？

我希望完成的事情：

```
for (int i = 0; i < PLAYER_NUM; i++) {
    snprintf(buf, sizeof(buf), "players/%s.so", player[i]);
    handle = dlopen(buf, RTLD_LAZY);
    add[i] = (int (*)(int, int))dlsym(handle, "sum");
} // that was simply loading of functions from libraries.

for (int x = 0; x < 10; x++)
    for (int i = 0; i < PLAYER_NUM; i++) {
        if(failed[i]) continue;
        ret = add[i](x, 5);

    if(sigfault_received() || res != (x + 5)) {
        failed[i] = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T15:24:05.460

错误的代码会导致各种可能无法恢复的问题。所以处理 SIGSEGV 并没有真正的帮助。

解决方案是在单独的进程中运行该代码，并使用 IPC、管道或套接字与主进程通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T20:50:00.863

使用适当的沙箱，而不是您自己构建的沙箱。不能指望你像 10 个孩子一起预测恶作剧。例如`system("rm -rf /")`，不会立即对您的程序进行段错误，但这肯定是不可取的。

# python - Python：self.__class__ vs. type(self)

> ID：10386166
> 
> 赞同：77
> 
> 时间：2012-04-30T15:22:50.423
> 
> 标签：python

我想知道两者之间是否有区别

```
class Test(object):
    def __init__(self):
        print self.__class__.__name__ 
```

和

```
class Test(object):
    def __init__(self):
        print type(self).__name__ 
```

?

有理由选择其中一个吗？

（在我的用例中，我想用它来确定记录器名称，但我想这并不重要）

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-30T15:26:26.550

```
>>> class Test(object): pass
>>> t = Test()
>>> type(t) is t.__class__
True
>>> type(t)
__main__.Test 
```

所以这两个是一样的。~~我会使用`self.__class__`，因为它更明显。~~

但是，`type(t)`不适用于旧式类，因为旧式类的实例的类型是`instance`，而新式类实例的类型是其类：

```
>>> class Test(): pass
>>> t = Test()
>>> type(t) is t.__class__
False
>>> type(t)
instance 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T15:26:23.733

据我所知，后者只是前者的一种更好的方式。

在 Python 中实际上并没有那么不寻常，考虑一下`repr(x)`，它只调用`x.__repr__()`或`len(x)`，它只调用`x.__len__()`. Python 更喜欢为您可能在一系列类中使用的常见函数使用内置函数，并且通常通过调用`__x__()`方法来实现这些函数。

# php - php 将 JSON 数组键转换为整数

> ID：10386167
> 
> 赞同：3
> 
> 时间：2012-04-30T15:22:55.713
> 
> 标签：php, json

我需要 json 数组中的数组键是整数。现在它们是字符串。你能告诉我我的错误在哪里吗？

```
 $i = 0;
   while($i < 7) {
       isset($ips[date('d', $week_start + $i * 86400)])
           ? $ips[(int)date('d', $week_start + $i * 86400)] = count(date('d', $week_start + $i * 86400))
           : $ips[(int)date('d', $week_start + $i * 86400)] = 0;

       isset($time[date('d', $week_start + $i * 86400)])
           ? $time[(int)date('d', $week_start + $i * 86400)] = count(date('d', $week_start + $i * 86400))
           : $time[(int)date('d', $week_start + $i * 86400)] = 0;

       $i++;
   }

   return json_encode(array('unique' => $time, 'impressions' => $ips)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:41:30.097

`json_encode`使用或`json`格式无法实现您想要的

看看这2个数组

```
$array = array("A","B","C","D");
$array2 = array(2=>"A",7=>"B",11=>"C",70=>"D"); 
```

跑

```
 var_dump($array,$array2); 
```

输出

```
array
  0 => string 'A' (length=1)
  1 => string 'B' (length=1)
  2 => string 'C' (length=1)
  3 => string 'D' (length=1)
array
  2 => string 'A' (length=1)
  7 => string 'B' (length=1)
  11 => string 'C' (length=1)
  70 => string 'D' (length=1) 
```

你可以在`PHP`两者中看到`Array`

现在运行

```
 var_dump(json_encode($array),json_encode($array2)); 
```

输出

```
string '["A","B","C","D"]' (length=17)
string '{"2":"A","7":"B","11":"C","70":"D"}' (length=35) 
```

**结论**

如果您正在设置数组键并且这些键不是以序列开头`0`并连续增加，它将被编码为`json`对象

如果你只想要数组

```
 var_dump(json_encode(array_values($array2))); 
```

输出

```
 string '["A","B","C","D"]' (length=17) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T15:43:43.993

对象中的键[必须是字符串](http://json.org/)。如果你不想有字符串，那么你必须使用从 0 开始的连续整数键，这将导致一个数组。

# php - 贝宝操作不起作用

> ID：10386170
> 
> 赞同：0
> 
> 时间：2012-04-30T15:23:16.590
> 
> 标签：php, paypal

```
 <p>
     <form action="//www.paypal.com/cgi-bin/webscr" method="post">
        <input type="hidden" name="cmd" value="_cart">
        <input type="hidden" name="upload" value="1" />
        <input type="hidden" name="business" value="alex@phpacademy.org">
        <?php paypal_items();?>
        <input type="hidden" name="currency_code" value="INR">
        <input type="hidden" name="amount" value="<?php echo $total;?>">
        <input type="image" src="http://www.paypal.com/en_US/i/btn/x-click-but03.gif" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
        </form> 
```

使用此编码无法正常工作..那我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T19:00:22.783

据我所知，PayPal 不接受 INR。将其更改为美元 (USD) 并发送表格。

# ruby - 使用 Class.new 创建的类中的常量

> ID：10386171
> 
> 赞同：0
> 
> 时间：2012-04-30T15:23:26.980
> 
> 标签：ruby, metaprogramming

我正在用 Ruby (1.9.3) 编写一小段代码，我使用了一对简单的“类枚举”类，它们用**const_set**定义了一些常量以及这些常量的一些行为（例如**Days**类可能有常量**MON**，**TUE** ... 和**Days::MON.succ**应该评估为**TUE**）。

我对这些课程非常满意。然而，在增加我的代码时，我有时需要添加更多，我不喜欢有五个或更多类共享 99% 的源代码的想法，例如：

```
class Days
  NAMES = %w( MON TUE ... )
  INSTANCES = []

  def initialize(num)
    @num = num
  end

  # An example operation
  def +(n)
    INSTANCES[(@num + n) % INSTANCES.length]
  end

  # Another example operation
  def succ
    self + 1
  end

  def to_s
    NAMES[@num]
  end

  NAMES.each_with_index do |name, idx|
    instance = new(idx)
    INSTANCES[idx] = instance
    const_set name, instance
  end
end

class Months
  NAMES = %w( JAN FEB ... )
  ...
end 
```

我想知道是否可以使用 Ruby 的元编程功能来生成这些类。但是，我很难创建**NAMES**、**INSTANCES**和“枚举命名”常量（例如**MON**、**TUE**、...）。作为**const_set**的类方法**Class**，在这段代码中，它的上下文（**self**的值）分别是**Days**和**Months**。

在创建工厂方法时，我不得不这样做：

```
def enum_new(names_array)
  Class.new do
    const_set "NAMES" []
    names_array.each_with_index do |name, idx|
      NAMES[idx] = name
    end
     ...
  end
end
Days = enum_new(%w| MON TUE ... |)
Months = enum_new(%w| JAN FEB ... |) 
```

但这不起作用（至少，不像我希望的那样），因为**const_set**不会在名称被*神奇*设置的类的上下文中调用（即**Days**和**Months**），但显然是在**Class**的上下文中; 因此，不仅不能从实例方法访问它，而且每次使用新的名称数组作为参数调用**enum_new时，它都会被覆盖。**使用类变量时会出现类似的问题，因为它们将在使用该方法生成的任何类之间共享（因为它们将成为**Class**的类变量，我猜）。

有没有办法在使用**Class.new**生成的类中创建常量，以这种方式获得与原始**Days**和**Months**类相同的类，而不必用几乎相同的类污染我的代码？

感谢您的关注和耐心！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:44:49.363

是的。`class_exec`在一个块中进行初始化，您可以将您的名称数据传递到其中，其中`self`引用正确的类：

```
theClass=Class.new
theClass.class_exec(names) do |names|
  #initialize constants here...
end 
```

# c++ - 类似（graphviz）堆栈跟踪的树（可视化调试）

> ID：10386172
> 
> 赞同：3
> 
> 时间：2012-04-30T15:23:29.387
> 
> 标签：c++, debugging, gdb, graphviz

我试图查找是否存在可以让我直观地调试程序的库或工具。即显示类似树结构的graphviz，并在断点处准确突出显示我在进程树中的位置。这样可以更快地了解我的流程是如何工作的，而不是依次调试并在我的脑海中创建一棵树。

我发现了一些我正在寻找的东西，即显示我的进程的树结构和每个函数调用的调用次数 [http://www.ibm.com/developerworks/library/l-graphvis/](http://www.ibm.com/developerworks/library/l-graphvis/)

如果它不存在，那么我可能会计划写一些可以完成这项工作的东西。谢谢

-简历

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:10:29.907

Eclipse的[调试可视化插件](http://marketplace.eclipse.org/content/debug-visualisation-eclipse)听起来可能对您有所帮助。此外，古老的[数据显示调试器](http://www.gnu.org/software/ddd/)还具有一些用于创建图形的自动例程，尽管是您当前看到的数据结构。我也喜欢[kcachegrind](http://kcachegrind.sourceforge.net/html/Home.html)的可视化，但它并不完全是*调试*辅助工具。但是，它的图形视图会向您显示在执行树中的位置。

由于似乎没有一个工具完全符合您的要求，也许这些工具会激发您编写自己的工具；）

# vb.net - 执行 EXE 时隐藏命令提示符

> ID：10386173
> 
> 赞同：3
> 
> 时间：2012-04-30T15:23:39.930
> 
> 标签：vb.net, visual-studio-2010, command-line

好的，这是我当前正在运行的命令。执行后，会出现命令提示符，直到命令完成。

有没有办法隐藏命令提示符？

```
Process.Start(
    "\\path_to_exe\Testing.exe ",
    Arg2 + Arg3 + Arg4 + Arg5 + Arg6 + Arg7 + Arg8 + Arg9 + Arg10 + Arg11) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T15:28:04.423

```
Dim p as New ProcessStartInfo(@"command", args)
p.WindowStyle = ProcessWindowStyle.Hidden
p.CreateNoWindow = true
Process.Start(p) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:08:39.543

我不是 100% 确定为什么我会根据@juergen d 的回答出现语法错误，但我发现了这一点，而且它似乎也能正常工作。

```
Dim psInfo As New System.Diagnostics.ProcessStartInfo("path_to_exe", Arg2 + Arg3 + Arg4 + Arg5 + Arg6 + Arg7 + Arg8 + Arg9 + Arg10 + Arg11)
    psInfo.WindowStyle = ProcessWindowStyle.Hidden
    System.Diagnostics.Process.Start(psInfo) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-22T11:36:22.903

Shell("cmd.exe", AppWinStyle.Hide)

# jquery - 显示表单域的结果而不重新加载页面

> ID：10386180
> 
> 赞同：0
> 
> 时间：2012-04-30T15:23:49.407
> 
> 标签：jquery, ajax, forms

我想使用 jQuery/AJAX 来执行以下操作...

我有一个带有图像 URL 的文本框。我希望该图像在插入 URL 时出现在单独的 DIV 中。显然在按下任何提交按钮之前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:28:42.720

对于 OP，您没有提及您完成这项工作的确切时间，但我编写了将图像附加到带有输入框中的 url 的 url div 的过程。

```
var url = $('input[type="text"]').val();

if($.trim(url).length) {

   $('DIV').append('<img src="'+ url +'" alt="image">');

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:40:24.633

```
$(document).ready(function(){

if($.trim($('input[type="text"]').val()).length) {

   $('div').append('<img src="'+ $('input[type="text"]').val()+'" alt="image">');

}
}); 
```

# macos - 更改 php.ini 位置

> ID：10386188
> 
> 赞同：15
> 
> 时间：2012-04-30T15:24:19.227
> 
> 标签：macos, osx-snow-leopard, php, homebrew

是否可以更改`php.ini`Apache 使用的位置？当我这样做时`php -i | grep 'Configuration File'`，结果是：

> 路径 => /usr/local/etc
> 
> 加载的配置文件 => /usr/local/etc/php.ini

但结果`phpinfo()`是

> 配置文件 (php.ini) 路径：/etc

我可以`php.ini`从`/usr/local/etc/`to复制`/etc/`，但是可以更改 php.ini 文件夹吗？

我使用自制软件安装了 PHP，我使用的是 OS X Snow Leopard。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-30T15:34:07.490

PHP`.ini`在通过命令行运行与作为 Web 服务器模块运行时使用不同的文件。当您 grep`php -i`获取命令行 ini 的结果时。为这两个环境使用单独的 ini 是一种很好的做法。

如果您必须更改 PHP 查找`php.ini`文件的目录，您可以`PHPIniDir`在 Web 服务器的 conf 文件中使用。

如果您只想添加要扫描的其他目录，则可以设置`PHP_INI_SCAN_DIR`环境变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-26T16:40:21.990

要更改 php.ini 文件路径，我们必须在 apache 配置文件“httpd.conf”语法中声明 PHPINIDir，即：

```
PHPINIDir "path_to_ini_file"; 
```

# hibernate - 配置 Play 1.x/JPA 以按顺序生成实体 ID？

> ID：10386189
> 
> 赞同：2
> 
> 时间：2012-04-30T15:24:22.177
> 
> 标签：hibernate, jpa, playframework, playframework-1.x

强制 Play/JPA 使实体 ID 连续的最佳方法是什么？（[他们不是](https://stackoverflow.com/questions/9771532/are-jpa-ids-sequential)）

一个想法是将play.db.jpa.Model复制到我自己的`ModelBase`类中并将生成策略更改为`GenerationType.IDENTITY`（至少对于mysql）。

1.  这是最好的解决方案吗？
2.  我什至可以在具有现有数据的生产网站上执行此操作（更改我的模型基类）吗？这安全吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:29:10.710

如果您需要实体的纯序列（无间隙），请不要使用 id，在数据库中创建新序列并将其链接到模型中的额外字段。

与试图强制 ID 没有间隙相比，它会更简单，也不会让您头疼。

# object - Open Graph Insights：“对象”和“动作”的定义

> ID：10386195
> 
> 赞同：1
> 
> 时间：2012-04-30T15:25:02.873
> 
> 标签：object, facebook-opengraph, facebook-insights

查看 Open Graph 的见解时，在页面的最底部，我们会看到以下内容：

1,193 个应用创建的操作？

> 此应用程序创建的 Open Graph 操作数。

和：

50,808 个应用程序创建的对象？

> 此应用程序创建的开放图形对象的数量。

但它们到底是什么，它们是如何关联的？动作相对明显，它们将涵盖“news.reads”，我曾假设对象将是您“阅读”的“文章”对象......但逻辑会要求您拥有的对象数量比您少得多会行动，而不是相反。

您会认为 10 个人可能会“阅读”一篇文章，从而为您提供针对 1 个对象的 10 次操作。

我误解了吗？

# c# - 将任务添加到用户的 Outlook

> ID：10386199
> 
> 赞同：3
> 
> 时间：2012-04-30T15:25:06.867
> 
> 标签：c#, .net, outlook, outlook-addin

我想让我的程序 Winforms 目前能够将任务添加到用户的 Outlook (2010) 任务列表中。我已经想出了如何从 Outlook 插件中做到这一点，[here](http://www.add-in-express.com/creating-addins-blog/2012/02/23/how-to-create-a-new-recurrent-task-item/)，但不是从我的桌面应用程序。此外，我可以通过代码将任务分配给当前用户以外的其他人吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:58:12.067

您应该查看[Exchange Web 服务](http://msdn.microsoft.com/en-us/library/bb204119%28v=exchg.140%29.aspx)(EWS) 以从您的桌面应用程序与其他用户的任务进行交互。如果您有权访问其他用户的邮箱，则可以[通过 EWS 为其他用户创建任务项目。](http://msdn.microsoft.com/en-us/library/aa563029%28v=exchg.140%29.aspx)

# sql - SQL Oracle ORA-00904: 标识符无效错误

> ID：10386200
> 
> 赞同：2
> 
> 时间：2012-04-30T15:25:10.110
> 
> 标签：sql, oracle

谁能帮我查明为什么这段代码返回 SQL Oracle ORA-00904: invalid indentifier 错误？该查询在没有 Country = 'Argentina' 的情况下有效，但我需要按此值进行过滤。谁能指出我正确的方向？

```
select llattrdata.ID dataid,

max(case when llattrdata.ATTRID = 4 then llattrdata.VALSTR end) Country

from llattrdata, dtree 

where
llattrdata.DEFID = 19400074 and
llattrdata.VERNUM = dtree.VERSIONNUM and
llattrdata.ID = dtree.DATAID and 
Country = 'Argentina'
group by llattrdata.ID 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T15:27:45.770

当您对分组条件进行过滤时，您需要使用`having`而不是`where`.

它应该是这样的：

```
select llattrdata.ID dataid,
        max(case when llattrdata.ATTRID = 4 then llattrdata.VALSTR end) Country
  from llattrdata, dtree 
 where llattrdata.DEFID = 19400074 
   and llattrdata.VERNUM = dtree.VERSIONNUM 
   and llattrdata.ID = dtree.DATAID 
 group by llattrdata.ID
having max(case when llattrdata.ATTRID = 4 then llattrdata.VALSTR end) = 'Argentina' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:49:53.747

也许我错过了一些东西，但这与以下内容不同：

```
select distinct
  llattrdata.ID     dataid,
  llattrdata.VALSTR Country
from
  llattrdata,
  dtree 
where
  llattrdata.VERNUM        = dtree.VERSIONNUM and
  llattrdata.ID            = dtree.DATAID     and 
  llattrdata.DEFID         = 19400074         and
  llattrdata.ATTRID        = 4                and
  llattrdata.VALSTRCountry = 'Argentina' 
```

# php - 将字符串清理为 UTF-8 的最佳 PHP 方法/类是什么

> ID：10386206
> 
> 赞同：3
> 
> 时间：2012-04-30T15:25:35.127
> 
> 标签：php, utf-8, character-encoding

我在一个简单的类上使用了几种方法，这对我来说效果很好，但我注意到它们真的很慢，因为`strtr()`定义了大量的翻译。而且它真的很长，因此更难维护和理解。

也就是说，所有“坏”示例都是针对实际问题的解决方案，将字符串转换为 UTF8。

谁能告诉我有一种众所周知或更有效的方法可以做到这一点？（是的，我已经尝试了`htmlentities()`方法和`iconv()`方法，但都没有真正正确地替换所有时髦的字符。

这是我目前正在使用的课程： [https ://gist.github.com/2559140](https://gist.github.com/2559140)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:14:29.690

自 PHP 5.4.0 起，mbstring 支持现在默认启用（但未加载）。加载扩展程序，这可以让您执行以下操作：

```
<? //PHP 5.4+
$ensureIsUTF8 = static function($data){
    $dataEncoding = \mb_detect_encoding(
        $data,
        ['UTF-8', 'windows-1251', 'iso-8859-1', /*others you encounter*/],
        true
    );

    //UTF-16/32 encoding detection always fails for PHP <= 5.4.1
    //Use detection code copied from PHP docs comments:
    //http://www.php.net/manual/en/function.mb-detect-encoding.php
    if ($dataEncoding === false){

        $UTF32_BIG_ENDIAN_BOM = chr(0x00) . chr(0x00) . chr(0xFE) . chr(0xFF);
        $UTF32_LITTLE_ENDIAN_BOM = chr(0xFF) . chr(0xFE) . chr(0x00) . chr(0x00);
        $UTF16_BIG_ENDIAN_BOM = chr(0xFE) . chr(0xFF);
        $UTF16_LITTLE_ENDIAN_BOM = chr(0xFF) . chr(0xFE);

        $first2 = \substr($data, 0, 2);
        $first4 = \substr($data, 0, 4);

        if ($first4 === $UTF32_BIG_ENDIAN_BOM) {
            $dataEncoding = 'UTF-32BE';
        } elseif ($first4 === $UTF32_LITTLE_ENDIAN_BOM) {
            $dataEncoding = 'UTF-32LE';
        } elseif ($first2 === $UTF16_BIG_ENDIAN_BOM) {
            $dataEncoding = 'UTF-16BE';
        } elseif ($first2 === $UTF16_LITTLE_ENDIAN_BOM) {
            $dataEncoding = 'UTF-16LE';
        } else {
            throw new \Exception('Whoa! No idea what that was.');
        }
    }

    if ($dataEncoding === 'UTF-8'){
        return $data;
    } else {
        return \mb_convert_encoding(
           $data,
           'UTF-8',
           $dataEncoding
        );      
    }
};

$utf8Data = $ensureIsUTF8(\file_get_contents('something'));
$utf8Data = $ensureIsUTF8(\file_get_contents('http://somethingElse'));
$utf8Data = $ensureIsUTF8($userProvidedData);
?> 
```

# c# - 如何在运行时编译中向方法发送参数

> ID：10386215
> 
> 赞同：-1
> 
> 时间：2012-04-30T15:26:04.183
> 
> 标签：c#, runtime-compilation

根据帖子，我在 Visual Studio 2010 中制作了一个 C# 项目：

[http://www.blackwasp.co.uk/RuntimeCompilation_1.aspx](http://www.blackwasp.co.uk/RuntimeCompilation_1.aspx)

我想读取一个 txt 文件并将参数发送到一个方法，然后得到结果。现在我的问题是如何在运行时编译中向方法发送参数或参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:30:58.187

[http://www.blackwasp.co.uk/RuntimeCompilation_2.aspx](http://www.blackwasp.co.uk/RuntimeCompilation_2.aspx)有一个使用反射调用方法的示例。您要做的是`Invoke`方法，例如`object result = myMethod.Invoke(null, myParam);`并查看`result`.

# android - 初始化从另一个活动传递的数组

> ID：10386216
> 
> 赞同：0
> 
> 时间：2012-04-30T15:26:06.453
> 
> 标签：android, arrays, android-activity

我正在尝试将一个字符串数组从一个活动传递到另一个活动，但是当我尝试在第二个活动中读取该数组时，这些值为空。

这是我从第一个活动传递数组的方式：

```
Bundle bundle = new Bundle();
bundle.putStringArray("Array", createArray(text));
Intent itemIntent = new Intent(this,Details.class); 
itemIntent.putExtra("passedArray", bundle);
startActivity(itemIntent); 
```

createArray(text) 是一个返回数组的方法。

这是我在第二个活动中尝试读取数组的方式：

```
Bundle extras = this.getIntent().getExtras();   
String[] array = extras.getStringArray("Array"); 
```

如何使用已传递给它的相应数组值初始化第二个活动中的数组？如果我尝试读取任何尚未初始化且为空的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:34:40.467

不要使用 bundle 试试这个并首先计算你的数组：

```
itemIntent.putExtra("passedArray", createArray(text));
startActivity(itemIntent); 
```

并将它们作为

```
 String[] array = this.getIntent().getStringArray("passedArray"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:34:51.170

您正在将包含您的数组的捆绑包嵌套在另一个额外内容中。这意味着您必须额外获得“passedArray”（这是一个捆绑包），然后从您刚刚提取的捆绑包中获取您的“Array”。而是将您的代码更改为此

```
Intent itemIntent = new Intent(this,Details.class); 
itemIntent.putExtra("Array", createArray(text));
startActivity(itemIntent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:37:58.843

我认为您在搞乱捆绑和附加功能。看看这个问题。我认为它可以帮助您 [使用 Intent.putExtra 发送数组](https://stackoverflow.com/questions/3848148/sending-information-with-intent-putextra)

# c# - 中等信任中的城堡活动记录？

> ID：10386221
> 
> 赞同：1
> 
> 时间：2012-04-30T15:26:17.230
> 
> 标签：c#, .net, castle-activerecord, medium-trust

我已经下载了 Active Record 和 NHibernate，并使用“AllowPartiallyTrustedCallers”标志进行了编译。但是我仍然在“中等信任”环境中的“ActiveRecordStarter.Initialize”方法中遇到错误。

是否有人在 .net 3.5 或 4“中等信任”上运行 ActiveRecord（3.0 或更高版本）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-26T18:00:08.853

我在 2012 年 7 月解决了这个问题并发布在我的公司博客上。[http://isul.com.br/blog/index.php/archives/936](http://isul.com.br/blog/index.php/archives/936)

# php - 创建包含稍后要下载和导入的数组数据的文件的最佳方法是什么？

> ID：10386222
> 
> 赞同：1
> 
> 时间：2012-04-30T15:26:19.133
> 
> 标签：php, xml, arrays

好的，我有一个关联数组包含应该下载到文件中的数据，然后稍后导入以使用相同的数据。

它看起来像这样（只有一些键包含数组）：

```
array(
   'id1' => 'Data1',
   'id2' => 'Data2',
   'id3' => 'Data3',
   'id4' => 'Data4',
   'id5' => array(
               'id1' => 'Data1',
               'id2' => 'Data2',
               'id3' => 'Data3'
        ) 
```

);

那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T15:29:35.697

尝试序列化：

```
file_put_contents($filename, serialize($array)); 
```

并阅读：

```
$array = unserialize(file_get_contents($filename)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T15:31:13.117

除了序列化之外，您还可以使用 JSON 对数组进行编码/解码。

[json_encode](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDoQFjAA&url=http://php.net/manual/en/function.json-encode.php&ei=4K-eT5qgENHfgge1942WDw&usg=AFQjCNFwbWEXtXdU7euW3Qpv8NQ8zkaLMw&sig2=LVoHmz98KynzXXK_BZsP0g)和[json_decode](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDgQFjAA&url=http://php.net/manual/en/function.json-decode.php&ei=96-eT5jwE474ggebn81S&usg=AFQjCNEfzaIfzofmQZOFSYuv9P5S_iMCJA&sig2=-VDNi-_d_SdQtmufDjsKVg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:29:48.850

保存时对其进行序列化，然后[在](http://us.php.net/manual/en/function.serialize.php)重新读取时对其进行反[序列化。](http://us.php.net/manual/en/function.unserialize.php)

# c++ - 转置二维向量/矩阵

> ID：10386223
> 
> 赞同：3
> 
> 时间：2012-04-30T15:26:19.777
> 
> 标签：c++

我有以下二维向量/矩阵`X`和`Y`如下向量：

```
std::vector<double> Y; 
unsigned int ctr=2;
std::vector<std::vector<double> >X(ctr,Y); 
```

我现在想创建 X 的转置，即 Xtrans，所以声明如下

```
std::vector<std::vector<double> >Xtrans(Y,ctr); 
```

但它给了我以下编译错误：

```
test.cpp:128:58: error: no matching function for call to ‘std::vector<std::vector<double> >::vector(std::vector<double>&, unsigned int&)’
/usr/include/c++/4.5/bits/stl_vector.h:241:7: note: candidates are: std::vector<_Tp, _Alloc>::vector(const std::vector<_Tp, _Alloc>&) [with _Tp = std::vector<double>, _Alloc = std::allocator<std::vector<double> >, std::vector<_Tp, _Alloc> = std::vector<std::vector<double> >]
/usr/include/c++/4.5/bits/stl_vector.h:227:7: note:                 std::vector<_Tp, _Alloc>::vector(std::vector::size_type, const value_type&, const allocator_type&) [with _Tp = std::vector<double>, _Alloc = std::allocator<std::vector<double> >, std::vector::size_type = unsigned int, value_type = std::vector<double>, allocator_type = std::allocator<std::vector<double> >]
/usr/include/c++/4.5/bits/stl_vector.h:215:7: note:                 std::vector<_Tp, _Alloc>::vector(const allocator_type&) [with _Tp = std::vector<double>, _Alloc = std::allocator<std::vector<double> >, allocator_type = std::allocator<std::vector<double> >]
/usr/include/c++/4.5/bits/stl_vector.h:207:7: note:                 std::vector<_Tp, _Alloc>::vector() [with _Tp = std::vector<double>, _Alloc = std::allocator<std::vector<double> >] 
```

如何正确声明 Xtrans？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:43:29.497

除了其他人已经说过的关于修复代码的内容之外，我想评论一下使用`vector<vector<double> >`矩阵表示，这种表示非常低效，几乎从来都不是你想要的。我的一个同事曾经使用这种风格继承了一个代码。使用适当的索引摆弄函数将其转换为简单`vector<double>`，性能提高了**30**倍。抵制诱惑。

您可能想查看许多可用的 C++ 矩阵库之一（例如[eigen](http://eigen.tuxfamily.org/)、[uBlas](http://www.boost.org/libs/numeric)或[mtl4](http://www.mtl4.org)等等；还有很多其他的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:41:08.063

我认为这里有两个问题-第一个是您可能误解了`std::vector`'s 的构造方式，以及当您这样做时

```
std::vector<std::vector<double> >Xtrans(Y,ctr); 
```

它正在生成编译器错误，因为没有与您的声明匹配的构造函数。

`std::vector`（即你用来声明的那个）的构造函数之一`X`是这样声明的：

```
explicit vector ( size_type n, const T& value= T(), const Allocator& = Allocator() ); 
```

所以当你这样做`(ctr, Y)`的时候效果很好——因为你告诉编译器你想创建一个`std::vector`大小`ctr`，不管值`Y`是什么。（在你的情况下`Y`是一个空的`std::vector<double>`- 所以你有一个`ctr`条目向量，其中每个条目都是一个空的`std::vector<double>`）

所以简单地交换`ctr`并`Y`希望你能得到一个转置`std::vector`在这里是行不通的。

第二个问题是你如何实际转置这些值。您实际上需要找出一种算法来执行 X 的转置，然后将这些值推送到 Xtrans。转置值与实际构造向量是不同的。最有可能的是，您的算法类似于-construct `XTrans`，然后迭代“X `and insert values into`XTrans”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:39:31.360

只是为了使代码编译你可以声明`Xtrans`如下

```
std::vector<double> Y;
unsigned int ctr=2;
std::vector<std::vector<double> >X(ctr,Y);
std::vector<double> ctr_vector(2);
std::vector<std::vector<double> >Xtrans(Y.size(),ctr_vector); 
```

但是，您必须填充 Xtrans 才能将其用作 X 的转置版本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T15:40:02.340

您似乎误解了`std::vector`. [在这里查看更多信息](http://www.cplusplus.com/reference/stl/vector/vector/)。

调用`std::vector<std::vector<double> >X(ctr,Y)`具有创建`ctr`多个副本`Y`并将其存储到 X 中的效果。因此，从根本上讲，它仍然是一个一维对象，`X`只是在`X`您的每个索引处返回另一个.`std::vector``Y`

因此，您以后的语法`std::vector<std::vector<double> >Xtrans(Y,ctr)`与 type 的任何构造函数都不匹配`std::vector`。您不会像在 NumPy 或 Matlab 中那样构建二维数组。

您可能也想看看[这个链接](http://www.cplusplus.com/forum/general/26737/)。可能对您来说最好的事情是编写自己的转置函数，手动将条目放入循环中的新数组中。

# coldfusion - 在 CFBuilder 中创建服务器后，RDS 崩溃

> ID：10386224
> 
> 赞同：4
> 
> 时间：2012-04-30T15:26:19.963
> 
> 标签：coldfusion, coldfusion-9, coldfusionbuilder

我正在使用 CFBuilder 2.0.0，我可以很好地连接到 RDS，所以我的 CF 实例肯定设置正确。但是，一旦我使用以下技术创建服务器：-

*   右键单击项目名称 > ColdFusionServer 设置
*   在服务器下拉列表中选择“添加服务器...”
*   在新对话框中选择“从 RDS 服务器导入配置”选择我 RDS 配置
*   除了选择 Is Local 和更改主机名之外，我在第一页上保留所有设置相同，因为我的 CFadmin 和我的网站位于不同的主机上
*   在本地服务器设置中，我选择 Server Home 的 JRun4 安装文件夹和 Eclipse 中项目的根目录作为 Document Root
*   我不安装扩展
*   点击完成

现在，当我尝试扩展 RDS 连接时，我会收到一个警告框：-

*无法初始化类 com.adobe.rds.core.services.messages*

我完全被困在这里，不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:04:47.593

事实证明，如果您的 CF Admin 和您的应用程序不在同一个主机名上，您将无法配置 CFBuilder 工作。为什么这是任何人的猜测。

为了解决这个问题，我需要让我在项目中配置的服务器使用与我的 CF 管理员相同的主机。这显然是非常反直觉的，这意味着如果 CFbuilder 为您启动浏览器进行调试，它将获得错误的域名。但是，如果您启动调试会话，然后手动浏览到浏览器中的页面，则调试确实有效。

# ruby-on-rails - Rails counter_cache 平衡

> ID：10386234
> 
> 赞同：2
> 
> 时间：2012-04-30T15:27:27.757
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, counter-cache

目前我正在计算用户余额

```
 def balance
      transactions.where('txn_type = ?', Transaction::DEPOSIT).sum(:amount) -    
      transactions.where('txn_type = ?', Transaction::PURCHASE).sum(:amount)
   end 
```

我正在运行一个查询，减去添加所有用户存款并减去他们所有的购买。当有数千个事务时，这将无法很好地扩展。计算用户余额的最佳方法是什么？有没有办法自定义 counter_cache 来计算每个用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T21:30:31.227

是的，您可以指定`:counter_sql`将用于设置`counter_cache`.

[导轨指南](http://guides.rubyonrails.org/association_basics.html)详细介绍了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-08T11:33:26.917

我会为此建议两种解决方案

1.  简单的

首先`balance`在 User 模型中添加列，并在 Transaction 模型中添加回调，以根据交易类型更新用户的余额。

2.  复杂的

如果您认为您也需要`deposit_amount`并且`purchase amount`不浪费更多时间，那么`counter_culture`这就是您所需要的。

`counter_culture`有点类似于 rails counter_cache 但允许我们进行各种自定义。

这将涉及以下更改：

1.  将 counter_culture 添加到您的 Gemfile：

    gem 'counter_culture', '~> 0.1.33'

然后做`bundle install`

2.  向表中添加列`deposit_amount`和。 `purchase_amount``users`

    ```
    类 AddDepositAmountPurchaseAmountToUsers < ActiveRecord::Migration
      定义自我改变
        add_column :users, :deposit_amount, :decimal, :default => 0
        add_column :users, :purchase_amount, :decimal, :default => 0
      结尾
    结尾

    然后做rake db:migrate
    ```

3.  对代码进行适当的更改

内部交易模型

```
counter_culture :user,
  column_name: Proc.new {|model|
    (model.txn_type == Transaction::DEPOSIT) ? 'deposit_amount' : 'purchase_amount' },
  delta_column: :amount 
```

内部用户模型

`def balance @balance ||= deposit_amount - purchase_amount end`

如果您需要有关反文化的更多信息，[请在此处阅读](https://github.com/magnusvk/counter_culture)

# backbone.js - 如果我的整个应用程序和数据都是本地的，我该如何使用 Backbone.Model.save()？

> ID：10386240
> 
> 赞同：0
> 
> 时间：2012-04-30T15:27:39.480
> 
> 标签：backbone.js

我正在制作一个完全本地的 Backbone 应用程序，不包括服务器端，并且我为该应用程序提供了一些初始本地数据。数据实际上是 Collection 数据，它是一个 json 文件并存储在一个名为 data 的文件夹中。所以我为 Collection 提供了一个 url 属性，`data/datalist.json`用于`this.collection.fetch()`获取初始数据。一切正常。

但我希望 View 中发生的任何更新都会将更改保存到此 Collection json 数据文件中的相应模型数据。似乎这`this.model.save({name: newName})`对我不起作用。每次我刷新整个页面时，应用程序仍然会显示初始数据文件。那么当视图中的一个项目被更新、删除或创建时，我应该如何更改数据文件呢？我需要在模型中设置 url 属性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:52:08.127

Model.save 调用 Backbone.sync 方法，该方法默认将 CRUD 函数映射到 REST api。如果你想使用 REST 以外的东西来保存/更新/删除，那么你需要覆盖 Backbone.sync。

Github上有一个覆盖同步的本地存储插件，Backbonejs背书：[Backbone.localStorage](https://github.com/jeromegn/Backbone.localStorage)

此插件应在应用程序运行时保留您的数据。如果您想将更改写入文件系统，您可能需要扩展它（不确定，我自己没有使用过）。希望这能让你开始。

# c# - .NET 4.5 中 WPF 中的异步事件处理程序无响应

> ID：10386244
> 
> 赞同：3
> 
> 时间：2012-04-30T15:27:58.357
> 
> 标签：c#, wpf, asynchronous, async-await, .net-4.5

我创建了一个简单的异步操作，当单击按钮时它会被踢掉。这是整个代码：

```
public partial class MainWindow : Window {

    public MainWindow() {
        InitializeComponent();
    }

    private async void Button_Click_1(object sender, RoutedEventArgs e) {

        var htmlString = await DowloadPage("http://example.com");
        txtBlock1.Text = htmlString;
    }

    public async Task<string> DowloadPage(string uri) {

        using (WebClient client = new WebClient()) {

            var htmlString = await client.DownloadStringTaskAsync(uri);
            return htmlString;   
        }
    }

} 
```

好简单。但是当我单击按钮时，我会在 UI 线程上遇到无响应的情况。当我在下载页面时尝试在窗口中移动时，我无法做到。

知道出了什么问题吗？

*编辑：*

我在 .NET 4.5 中使用 HttpClient 进行了尝试，结果与预期的一样好：

```
public async Task<string> DowloadPage(string uri) {

    using (HttpClient client = new HttpClient()) {

        var response = await client.GetAsync(uri);
        var htmlString = await response.Content.ReadAsStringAsync();
        return htmlString;   
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T16:15:17.180

`WebClient`uses `HttpWebRequest`，不幸的是，即使您使用“异步”方法，它[也不是很异步。](http://social.msdn.microsoft.com/Forums/en-US/async/thread/9f75f92c-9a51-4921-bad5-97c2b15870bd)它至少会阻止 DNS 查找。它也可能在代理协商和/或初始 HTTP 连接期间阻塞。

较旧的版本`HttpClient`只是在`HttpWebRequest`. 我[请求了一个真正异步的`HttpClient`](http://wcf.codeplex.com/discussions/267781)，但从未收到回复。上次检查`HttpClient`时，它仍然是 MVC 的一部分；那时还没有 ASP.NET Web API，所以他们可能`HttpClient`从那时起就已经修复了。*或者*`WebClient`您的机器之间和机器上的行为差异`HttpClient`可能与 DNS 缓存等有关。

# svn - 为依赖项目和多个开发人员设置构建过程

> ID：10386245
> 
> 赞同：3
> 
> 时间：2012-04-30T15:28:01.197
> 
> 标签：svn, build-process, cmake, jenkins, build-automation

我对自动化构建过程和持续集成相当陌生，并且正在为一个小型开发团队设置构建过程/服务器。我们正在使用 SVN、CMake 和 Jenkins 构建服务器。源语言是 C++。

假设我们有两个项目，`library`（一个 dll）和`executable`. `executable`链接到`library`，因此要构建`executable`您需要 .lib 和 .h 文件`library`。要运行`executable`.dll，您需要 .dll（可能还有调试符号文件）`library`。

当构建整个东西时，它相当简单，你从存储库中获取最新的源代码`library`然后构建`executable`。

但是，我们有多个开发人员，每个开发人员通常一次只从事一个项目。我们的 CMake 脚本允许您选择要构建的项目，因此`John`可能有一个仅 builds 的设置`executable`，而`Bob`仅 builds `library`。放弃这不是一个选择。

所以如果对源码`Bob`进行修改`library`和提交，`John`就需要获取编译好的.lib和.dll文件（因为他没有编译`library`）。

现在，二进制文件在 svn. 在每次编译期间，CMake 复制`src/bin`到`build/bin`作为预编译步骤，然后编译选择的任何项目（替换 中的适当二进制文件`build/bin`），最后 CMake 复制`build/bin`到`src/bin`.

这意味着当`Bob`进行更改时，他不仅会提交源文件，还会提交编译后的二进制文件，并且当`John`更新他的工作副本时，他会获得适当的二进制文件，而不必进行任何手动文件替换。

这已经工作了一段时间，但我真的不喜欢它有几个原因。是否有更少的黑客方式来设置这样的东西？（实际上有4个开发人员，大约12个项目，有些是不依赖任何东西的库，有些是依赖其他库的库，还有一些是依赖其他库的可执行文件。）

**编辑**：这是我正在考虑的过程：

使用 Artifactory 或 Nexus 等工件跟踪系统在构建后存储二进制文件，以及用于生成这些二进制文件的头文件

在 CMake 中，每个项目都被标记为已编译或预编译。编译的项目是从常规存储库生成的。如果预编译的项目二进制文件和标头已过期，则会从 Nexus 下载它们，并且 CMake 会适当地链接和包含。标题也与工件一起保存，以防止我在对 Dave Bacher 的回答的评论中描述的竞争条件。

我唯一不喜欢的是我必须做一些 CMake-foo 来检查工件是否过时并下载它们，但我想没有真正的替代方案，因为显然我正在尝试设置是如此不标准。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:24:10.807

我不喜欢您将开发人员的构建作为其他人构建的规范参考进行检查。它很脆弱，您最终可能会得到在他们的环境中对一个人有用的糟糕构建，但对其他人却失败了。或者有人进行了更改，但忘记签入文件，突然间，他们是唯一可以构建项目的一部分的人。

至少，您应该将 Jenkins 设置为构建库和可执行文件的地方，并让您的开发人员只签入源代码。Jenkins 有几个插件（例如[SVN Publisher](https://wiki.jenkins-ci.org/display/JENKINS/SVN+Publisher)）可用于在标准构建环境中构建库和可执行文件后发布它们。

根据我的经验，在构建机器上安装 Jenkins 并为每个项目设置构建非常简单。这让您开始验证每个项目是否已构建的第一步。然后努力让 Jenkins 发布其输出，而不是依赖开发人员发布他们的构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:15:40.817

看起来当前存在的系统在修改可执行文件和库的人之间总是存在竞争条件。与其试图专注于如何为所有开发人员解决竞争条件，我建议您使用 CI 来捕获竞争条件中可能出现的问题。

由于您刚刚开始，我会保持简单并专注于创建一个 Jenkins 作业，该作业在将某些内容签入存储库时构建整个事情。假设库和可执行文件保存在同一个 SVN 存储库中，作业的操作应该是这样的：

1.  查看存储库
2.  执行 CMake 构建库
3.  对库进行任何单元测试（有一些，对吗？）
4.  执行 CMake 以针对库构建可执行文件
5.  对可执行文件进行任何单元测试（有一些，对吗？）
6.  将构建结果通知开发人员。

虽然这看起来微不足道，但这将得到开发人员的反馈，因为如果他们因更改而破坏事物，而不必强迫他们记住更新他们的副本。它还将帮助他们轻松地进入使用 CI 的范式转变。

[顺便说一句，开发人员可能遇到的一个问题是他们是否习惯于一次检入 SVN 文件。逐个文件更改将启动多个构建，只有在最后一个文件最终签入时才会成功。多个文件的签入需要作为一次对多个文件的原子操作来完成。这也是一个很好的 SCM 实践，因为它将更改组合成一个可以跟踪和（如果需要）回滚的东西。]

范式转变一开始似乎无法克服，但可能会发生。我目前正在从事的项目是从习惯于与上述非常相似的过程的开发人员开始的。当我们开始运行 CI 时，每周检查一次以上的代码会遇到一些阻力。8 个月后，如果我必须对 Jenkins 构建进行任何维护，我会立即被问到为什么 Jenkins 不可用以及“如果人们不能立即获得构建结果，我该如何工作？ "

# mysql - sql server 中对 INFORMATION_SCHEMA 的等效查询

> ID：10386247
> 
> 赞同：7
> 
> 时间：2012-04-30T15:28:05.980
> 
> 标签：mysql, sql, sql-server, database

我正在处理一个页面，我们需要在其中直观地比较两个数据库中同一个表的架构——一个在 sql server 中，另一个在 mysql 中。我还必须包含索引。

现在mysql查询显示信息以及索引 -

```
select column_name,column_type,table_name,column_key 
  from INFORMATION_SCHEMA.COLUMNS where table_name = 'tbl_ClientDN' 
```

但是对于 sql server 相同的查询不返回索引-

```
 select * from INFORMATION_SCHEMA.COLUMNS where table_name = 'tbl_ClientDN' 
```

所以我需要查询来组合 -

```
 sp_helpindex 'tbl_ClientDN' 
```

如何获取在 mssql 查询中显示索引的 column_key。有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T15:45:28.067

远离`INFORMATION_SCHEMA.COLUMNS`，尤其是对于索引，因为过滤索引和包含列之类的东西不是定义的一部分。我在这里更详细地讨论这个：

*   [针对 INFORMATION_SCHEMA 视图的案例](https://sqlblog.org/2011/11/03/the-case-against-information_schema-views)

你想使用`sys.indexes`and`sys.index_columns`为此。例如：

```
DECLARE @tablename NVARCHAR(512) = 'dbo.tbl_ClientDN';

SELECT
    [Index]  = i.name,
    [Column] = c.Name, 
    [Type]   = i.type_desc,
    PK = i.is_primary_key,
    [Unique] = i.is_unique,
    [Unique Constraint] = i.is_unique_constraint,
    [DESC] = ic.is_descending_key,
    [INCLUDE] = ic.is_included_column,
    [Filtered] = i.filter_definition -- only for SQL Server 2008+
FROM
    sys.indexes AS i 
INNER JOIN 
    sys.index_columns AS ic 
    ON i.[object_id] = ic.[object_id] 
    AND i.index_id = ic.index_id
INNER JOIN 
    sys.columns c
    ON ic.column_id = c.column_id
    AND ic.[object_id] = c.[object_id]
WHERE 
    i.[object_id] = OBJECT_ID(@tablename)
ORDER BY [Index], ic.index_column_id; 
```

如果您想一次对所有表执行此操作，则进行简单的更改：

```
SELECT
    [Table] = QUOTENAME(OBJECT_SCHEMA_NAME(i.[object_id]))
      + '.' + QUOTENAME(OBJECT_NAME(i.[object_id])),
    [Index]  = i.name,
    [Column] = c.Name, 
    [Type]   = i.type_desc,
    PK = i.is_primary_key,
    [Unique] = i.is_unique,
    [Unique Constraint] = i.is_unique_constraint,
    [DESC] = ic.is_descending_key,
    [INCLUDE] = ic.is_included_column,
    [Filtered] = i.filter_definition -- only for SQL Server 2008+
FROM
    sys.indexes AS i 
INNER JOIN 
    sys.index_columns AS ic 
    ON i.[object_id] = ic.[object_id] 
    AND i.index_id = ic.index_id
INNER JOIN 
    sys.columns c
    ON ic.column_id = c.column_id
    AND ic.[object_id] = c.[object_id]
ORDER BY [Table], [Index], ic.index_column_id; 
```

[sys.indexes](https://docs.microsoft.com/en-us/sql/relational-databases/system-catalog-views/sys-indexes-transact-sql)和[sys.index_columns](https://docs.microsoft.com/en-us/sql/relational-databases/system-catalog-views/sys-index-columns-transact-sql)主题中提供了更多信息。

您可能还想看看 Kimberley L. Tripp 的[sp_helpindex2](http://www.sqlskills.com/blogs/Kimberly/post/Updates-%28fixes%29-to-sp_helpindex2.aspx)。

* * *

**编辑**

总的来说，我同意@BrianWhite 的评论。如果您为此付出任何努力，那么您应该为此使用工具，而不是重新发明轮子并尝试自己编写。就时间而言，您可能已经花费了一个好工具的成本来对这个查询进行故障排除。请阅读这篇文章：

*   [重新发明轮子的成本](http://bertrandaaron.wordpress.com/2012/04/20/re-blog-the-cost-of-reinventing-the-wheel/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:32:03.383

也许你在追求`sp_help`

[http://msdn.microsoft.com/en-us/library/ms187335.aspx](http://msdn.microsoft.com/en-us/library/ms187335.aspx)

只需输入

```
sp_help myTableName 
```

应该给你所有你想要的数据。

# iphone - 设置人员属性

> ID：10386249
> 
> 赞同：0
> 
> 时间：2012-04-30T15:28:08.750
> 
> 标签：iphone, ios, abpersonviewcontroller, abrecordref

处理别人的代码。我真的很困惑这段代码中到底发生了什么。

```
ABAddressBookRef addressBook = ABAddressBookCreate(); 
ABRecordRef persons = ABAddressBookGetPersonWithRecordID(addressBook, x);
CFErrorRef *error=NULL;
ABAddressBookRemoveRecord(addressBook, persons, error);
ABAddressBookSave(addressBook, error);

ABRecordRef persons = ABPersonCreate(); 

ABRecordSetValue(persons, kABPersonFirstNameProperty, firstName , nil); 
```

应该做的是，应该创建一个 ABRecordRef 人。应该设置他的属性并显示他的记录/详细信息。他不应该被保存在通讯录中。这是做它的方法吗。需要帮忙。

编辑：除了将属性设置为人员之外，还添加了以下代码来推送视图控制器以查看人员。

```
MyContactDetailViewcontroller *personContactDetail = [[MyContactDetailViewcontroller alloc] init];
personContactDetail.displayedPerson = persons; 
personContactDetail.passedSelectedContactData = selectedContactsOnlyData;
[self.navigationController pushViewController:personContactDetail animated:YES];
[personContactDetail release]; 
```

`MyContactDetailViewcontroller`子类`ABPersonViewController`。还是更适合使用`ABUnknownPersonViewController`.

您是否发现通讯录中的联系人可能重复的任何情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:17:47.983

这正是这里发生的事情..我会解释..

`ABAddressBookCreate`从地址簿数据库中的数据创建一个新的地址簿，因此您所做的任何更改`ABAddressBookRef`都只会在您调用 后保存到实际的地址簿数据库中`ABAddressBookSave()`。所以它正在做的是为具有 recordid- 的人获取参考`x`。比你创建一个新的人条目使用

```
ABRecordRef persons = ABPersonCreate(); 
```

并且比您设置它的值，但这可用于此特定对象并且不存储在数据库中，除非您调用...`ABAddressBookSave()`

希望这可以帮助你... :)

# backbone.js - 骨干视图.remove()

> ID：10386255
> 
> 赞同：0
> 
> 时间：2012-04-30T15:28:32.003
> 
> 标签：backbone.js

我刚刚将我的 Backbone 升级到 0.9.2，当我像使用旧版本一样执行 view.remove() 时，它不再适用于我。

我有一个名为 processingView 的 popup.js 视图，它只是将一些 jquery 代码包装在视图扩展中。我将它分配给一个名为 processing 的变量。this.processing = new processingView(); 当我触发一个事件以通过说从 Dom 中删除处理对象时。this.processing.remove() 它不再被删除。如果我恢复到旧版本的 Backbone，它就可以工作。

任何人都知道为什么会这样。我的代码是大量的源文件，因此很难将所有这些都粘贴到这里。但就我想要做的而言，它应该直接从 dom 中删除一个视图对象。

**回答了我自己的问题**

好的，当我手动设置 View.el 时，我没有使用 setElement

如果您曾经在 Backbone 视图中手动将 this.el 设置为特定的 DOM 元素，那么您将希望使用 setElement 代替。

它仍然不清楚 view.el 和 view.$el 之间的区别。也许有人可以为我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:23:01.027

`view.$el`相当于`$( view.el )`。这是一种方便，因此您不必招致重复调用 jQuery 构造函数的麻烦和额外开销。您可能希望构建您的代码（如果可能），这样您就不需要手动设置`el`和调用`setElement`. 例如，您可以查看[我](https://stackoverflow.com/a/10339811/1034448)对另一个问题的回答。

# django - 告诉 django 搜索应用程序的模板子文件夹

> ID：10386257
> 
> 赞同：7
> 
> 时间：2012-04-30T15:28:39.247
> 
> 标签：django, django-templates

我的 django 应用程序上的模板具有以下文件夹结构：

```
templates/
   app/
      model1/
         model1_form.html
      model2/ 
         model2_form.html 
```

假设我使用的是model1 和一个通用的ListView，现在它只搜索templates/app/model1_form.html。无论如何我可以告诉 django 他也应该搜索 app/ 子文件夹吗？我不想手动设置模板名称和路径 ( `template_name="templates/app/model1/model1_form.html"`)。

在 settings.py 我有：

```
import os.path
BASE_PATH = os.path.dirname(os.path.dirname(__file__))
TEMPLATE_DIRS = (
    BASE_PATH+'/templates/',
) 
```

这是我的看法：

```
class HousesListView(ListView):
    model = House
    context_object_name = "house_list" 
```

提前致谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-09-29T10:01:44.457

当时其他答案是正确的，但是对于现在遇到这个问题的任何人来说，这就是在 Django 1.8+ 中完成的方式

默认情况下，Django 现在会在应用程序文件夹中查找模板。这`'APP_DIRS': True,`在这样的`TEMPLATES`设置中表示：

```
TEMPLATES = [
  {
    ...
    'DIRS': ['templates'],
    'APP_DIRS': True,
    ...
  },
] 
```

正如其他答案所示，您仍然应该使用`appname/templates/appname/model1_form.html`命名模板

（更多信息：[https](https://docs.djangoproject.com/en/1.8/intro/tutorial03/#write-views-that-actually-do-something) ://docs.djangoproject.com/en/1.8/intro/tutorial03/#write-views-that-actually-do-something在标题为“模板命名空间”的框中）

最终检查：确保您使用的应用程序在`INSTALLED_APPS`元组中，因为这是我遇到的问题。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-30T16:55:13.707

您需要添加`django.template.loaders.app_directories.Loader`（`TEMPLATE_LOADERS`如果尚未添加）。

```
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
) 
```

然后，更改您的文件夹结构，以便在应用程序目录中有一个“模板”文件夹：

```
- <project_root>
    - app
        - templates
            - model1
            - model2 
```

或者正确命名模型，以免它们与其他应用程序名称意外冲突：

```
- <project_root>
    - app
        - templates
            - app
                - model1
                - model2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T15:33:10.030

我认为要使用子文件夹中的模板，通常您必须：

1.  手动给出模板路径，`subdir/template.html`
    例如。render_to_response('sub/dir/template.html') 或 template_name='...'

2.  `TEMPLATE_DIRS`
    在例如 定义所有子文件夹。

    TEMPLATE_DIRS = (
    BASE_PATH+'/templates/',
    BASE_PATH+'/templates/app',
    BASE_PATH+'/templates/app/model1',
    )

    但是因为除了模板之外的通用视图可以在 app_name/template.html 中找到，您必须移动模板以添加`/path/to/templates/app/model1`到 TEMPLATE_DIRS，并将模板移动到`templates/your_app/model/your_app/model_template.html`，这有点尴尬。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-16T08:42:40.130

使用 Django 2.0，甚至不需要`TEMPLATES`更改`settings.py`. 唯一的要求是将`appname.apps.AppnameConfig`（例如*catalog.apps.CatalogConfig*用于名为'catalog' 的应用程序）添加到`INSTALLED_APPS`列表中，然后django 在搜索模板时将在appname/templates 下查找。

# network-programming - 用于 OSPF 需求电路验证的 PPP 网络检测

> ID：10386260
> 
> 赞同：-1
> 
> 时间：2012-04-30T15:28:52.773
> 
> 标签：network-programming, packet, pcap, ppp, ospf

我正在寻找一种方法来检测任何传入或传出网络流量是否为 PPP（点对点）。有没有办法可以使用 pcap 库嗅探这种类型的流量？

我需要知道流量是否为 PPP 以验证某个条件的原因。该条件是如果启用 OSPF 选项字段中的 DC（需求电路）位，则必须为该网络启用 PPP。只有点对点网络才能充分利用 OSPF 需求电路 (RFC 1793)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:57:39.680

[RFC 1793](https://www.rfc-editor.org/rfc/rfc1793)中的“点对点”不是指特定类型的*流量*，而是指特定类型的*网络*。 *例如，运行点对点协议的串行线路上的所有*流量都是“点对点流量”；*以太网上的任何*流量都不是“点对点”的。非点对点流量可以通过点对点网络进行隧道传输，点对点流量可以通过非点对点网络进行隧道传输，但是在隧道的情况下，通常会有一个网络接口（在软件意义上，例如`ifconfig -a`在大多数 UN*X 系统中列出的内容或`ipconfig/all`将在 Windows 上列出）用于隧道流量，以及较低级别网络适配器的网络接口。

在大多数 UN*X 上，您可以使用`SIOCGIFFLAGS`ioctl 获取网络接口的标志，其中一个标志是`IFF_POINTOPOINT`标志，它指示该接口的网络是否是点对点网络。

在 Windows 上，我找不到 ioctl 来获取特定接口的标志，但`SIO_GET_INTERFACE_LIST` [Winsock ioctl](http://msdn.microsoft.com/en-us/library/windows/desktop/bb736550%28v=vs.85%29.aspx)将返回一个[INTERFACE_INFO](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738568%28v=vs.85%29.aspx)结构，`iiFlags`其中包含包含该`IFF_POINTOPOINT`标志的成员。

# c# - 有哪些 .NET 方法可用于创建通用 SQL Server 查询？

> ID：10386261
> 
> 赞同：1
> 
> 时间：2012-04-30T15:28:54.520
> 
> 标签：c#, asp.net, .net, sql-server

我只是想在 C# .NET 4.0 中编写一个通用函数，在那里我可以向它发送一个数据库字符串、一个查询字符串，然后取回我的结果。

由于不是那么精通 C# 并且它是各种不同的对象，我不确定返回此信息的最佳选择可能是什么。

我知道有`DataTable`, `DataSet`, 就是这样。我正在寻找的是一个相当高效的对象，并且我可以轻松地访问它的数据成员。我确信自己编写不会有问题，但我知道 .NET 4.0 中必须有其他一些我可以访问的对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T15:44:46.820

这种设计的问题是很难使用最佳实践来保证安全和防止 SQL 注入。将纯 SQL 语句传递给函数几乎消除了防御 SQL 注入的能力，除非您仔细执行此操作。

作为一般规则，如果您接收*任何*用户输入，您需要确保您使用的是[参数化存储过程](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet#Defense_Option_2%3a_Stored_Procedures)或[参数化查询](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet#Defense_Option_1%3a_Prepared_Statements_.28Parameterized_Queries.29)。推荐的模式是传入一个语句和一个包含正确数量的参数值的类型对象数组，并在您的函数中构建参数集合。

我们使用他们的模式和实践库中的[Microsoft 数据应用程序块](http://msdn.microsoft.com/en-us/library/ff664408%28PandP.50%29.aspx)，其中包含真正使这变得更容易的功能。

在使用它时，ConnectionString 存储在 app.config 或 web.config 中，并且您传入连接字符串的名称，数据应用程序块代码负责查找它、创建命令、连接并执行询问。

使用此模式时，我们的代码如下所示：

```
public static DataSet ExecuteDataset(string CallingApp, string ConnectionStringName, string StoredProcName, object[] ParameterValues)
{
        DataSet ReturnValue = new DataSet();

        Microsoft.Practices.EnterpriseLibrary.Data.Database db = Microsoft.Practices.EnterpriseLibrary.Data.DatabaseFactory.CreateDatabase(ConnectionStringName);
        try
        {
            ReturnValue = db.ExecuteDataSet(StoredProcName, ParameterValues);
        }
        catch (Exception ex)
        {
            // a bunch of code for exception handling removed            
        }

        return ReturnValue;
 } 
```

这是获取数据集的代码。还有许多其他功能可用，并且此代码可能不适用于最新版本的数据访问库。我们使用的是稍旧的版本，但这应该让您了解它的易用性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T15:42:58.363

新的和改进的方法不是这样做，而是有一种方法来获取你想要的数据。

例如定义一个`CustomerOrder`类。有一个数据库模块，其函数名为 say：

```
GetOpenOrdersForCustomer(int argCustomerID) 
```

这将返回您的集合。

查找实体框架 POCO 等。

`DataSet`并且`DataTable`是这类东西的早期化身，它们相当沉重，有很多包袱。

如果你想/需要做更多的手工编码。`IDataReader`, , 之类的接口`IDbCommand` `IDbConnection`将使您与代码中的许多实现细节隔离开来，例如您的后端是否是 SQL Server、MySql 等。

即使这样，您最好不要在应用程序代码中传递诸如`DataTable`, `SqlCommand`about 之类的东西。

太多的机会在整个代码中涂抹数据库模式，给您留下巨大且即将实现的技术债务潜力。

全部隐藏。在 Code First POCO 中，它实际上是不可见的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T15:50:47.580

你可能想要这样的东西：

```
public static DbDataReader Query(
    string connectionString, string selectCommand, 
    params KeyValuePair<string, object>[] parameters)
{
    var connection = new OleDbConnection(connectionString);
    var command = new OleDbCommand(selectCommand, connection);

    foreach (var p in parameters)
        command.Parameters.Add(new OleDbParameter(p.Key, p.Value));

    var result = command.ExecuteReader();
    return result;
} 
```

以 OleDb 为例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T15:38:16.147

你有没有想过使用像 NHibernate 这样的 ORM：http: [//nhforge.org/Default.aspx](http://nhforge.org/Default.aspx)

它将完成与数据库相关的所有工作，并且您将使用漂亮的对象类。

在其他情况下，您的函数可以返回 Datatable，您可以编写另一个函数来获取 DataTable 并将数据提取到对象类中。例如。这个新功能就像，

公共对象 PopulateData(DataTable table, Enum ClassType); //或者类似的东西

然后，您可以使用反射来映射 DataTable 列和类对象。

但我建议使用 ORM。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T15:42:03.260

这取决于您要涵盖的场景。例如，在 MVC 应用程序中，部署基于实体框架的数据层是相当可维护的，因为它易于测试，并且通过简单的对象与数据库的通信非常简单。

另一种方法可能是使用已经开发的组件，例如企业库中的数据应用程序块，或者可能开发您的自定义数据库工厂......这取决于您的开发目的。

您能否详细说明我们正在谈论的应用程序类型？它是现有数据库还是新数据库？

另一个问题。您到底希望通过查询字符串传递什么？如果你介意通过 sql 语句，我会告诉你，这是一种非常糟糕和危险的做法，你应该避免。

此致。

# ios - 如何处理自定义结果视图的 NSFetchedResultsControllerDelegate 更新

> ID：10386263
> 
> 赞同：2
> 
> 时间：2012-04-30T15:28:56.827
> 
> 标签：ios, core-data, nsfetchedresultscontroller

我目前正在开发一个基于 CoreData 的 iPhone 应用程序，它的地图视图将从 NSFetchedResultsController 生成其**注释**。地图视图的想法是它将为用户显示许多已保存的位置。

使用 NSFetchedResultsController 的一个优点是，我可以将我的地图视图设置为 NSFetchedResultsController 上的委托，并在用户登录时收到对另一台设备或网站上发生的保存位置集所做的任何更改的通知。

我目前在如何处理发送到我的**NSFetchedResultsControllerDelegate**实现的许多不同类型的更新方面遇到了一些麻烦。文档： http: [//developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsControllerDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsControllerDelegate_Protocol/Reference/Reference.html)似乎并没有告诉您应该如何处理这些不同的更新，因为它似乎更适合与完成大部分工作的 UITableView 集成。

我保留我的注释的 NSDictionary，将它们映射到结果集中的 NSIndexPath。问题是，例如，当我收到 10 次移动、3 次插入和 4 次删除更新时，我应该按什么顺序处理这些更新？其中一些 indexPaths 将具有许多冲突的索引，并且它们的处理顺序将影响我需要移动、插入或删除的实际注释。如果我先执行所有移动更新，那么插入索引将导致最终顺序与我先插入时的最终顺序不同。

给定这些更新消息，是否有任何现有的小型库/类可以将更新之前的一组索引转换为一组更新后的索引？如果没有，谁能解释这些东西是如何工作的，这样我就可以自己写了？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:30:11.983

一个更新周期的 NSFetchedResultsControllerDelegate 方法流程如下：

*   controllerWillChangeContent：（调用一次）
*   控制器：didChangeObject：atIndexPath：forChangeType：newIndexPath：（调用X次）
*   controllerDidChangeContent：（调用一次）

对 didChangeObject 方法的每次调用都只涉及一个对象/indexPath。您应该按照通过对 didChangeObject 的调用收到的顺序应用更改。这将使它们保持一致。

如果您正在使用部分，您还可以调用 controller:didChangeSection:atIndex:forChangeType: 与对象更改调用混合。

# java - 抽象类中的 getClass() 给出了不明确的方法调用

> ID：10386264
> 
> 赞同：64
> 
> 时间：2012-04-30T15:28:57.350
> 
> 标签：java, android, intellij-idea

我有一个公共抽象类，我正在尝试使用该`getClass()`方法，因为我需要来自扩展我的抽象类的类的信息。一个例子是这样的：

```
public String getName() {
    return getClass().getSimpleName();
} 
```

但是，IntelliJ 报告了这一点：

```
Ambiguous method call. Both
getClass    ()    in Object and
getClass    ()    in Object match. 
```

代码运行良好，但在我的 IDE 中有数十个错误警告有点不合我意。它以很多误报扰乱了我的工作流程。

为什么会显示这些错误，我该怎么做才能看不到它们？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-04-04T15:32:17.763

像这样`getClass()`拨打我的电话`Object`

```
((Object) this).getClass() 
```

为我解决了问题（使用非抽象类）。这不是很好，但它正在工作。

此外，从项目设置中操作您的 Android SDK 并从您的 Android SDK 中删除所有 JDK jar 可以解决该错误。当然，您必须在项目中引用它才能使用该修复程序。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-04-30T16:26:17.027

代码很好，但在 IntelliJ 中是一个错误。

[报错](http://youtrack.jetbrains.com/issue/IDEA-71363)， [又一个](http://youtrack.jetbrains.com/issue/IDEA-79680)。

甚至还有更多关于此问题的不同变体的错误报告。正如 duffymo 在评论中指出的那样，也可能是因为类路径中有不同版本的 JDK。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-22T12:04:58.617

另一个解决方法是生成一个辅助方法来获取类：

```
public Class<?> type() {
    return super.getClass();
} 
```

或静态可重用工具：

```
public static final Class<?> type(Object object) {
    return object.getClass();
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-19T12:08:07.133

我注意到这取决于您引用的 Android 版本是否发生错误。我曾经在链接到[Maven Central时为](http://search.maven.org)[Android 4.1.1.4](http://search.maven.org/#browse%7C-120342089)定义了一个依赖项。`pom.xml`

```
<dependency>
    <groupId>com.google.android</groupId>
    <artifactId>android</artifactId>
    <version>4.1.1.4</version>
    <scope>provided</scope>
</dependency> 
```

[同时，我使用maven-android-sdk-deployer](http://github.com/mosabua/maven-android-sdk-deployer)提供所需的依赖项。

```
<dependency>
    <groupId>android</groupId>
    <artifactId>android</artifactId>
    <version>4.3_r1</version>
    <scope>provided</scope>
</dependency> 
```

然后`getClass()`产生错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-08T13:40:31.543

如果您有一个带有 Maven 的 Android 项目，并且您使用`Maven Android Platform`项目 SDK 导入 IntelliJ，则可能会发生这种情况。问题是`Maven Android Platform`Android maven依赖jar都包含`java.lang.Object`该类。

解决方法是转到*Project structure* -> *Platform Settings* -> *SDK* -> *Maven Android Platform* -> *Classpath*。它将列出实际上在 JDK 中的所有 jar。删除所有这些，因此只保留两个 Android 依赖项 (`res`和`annotations.jar`)。

**编辑**：这个问题很久以前就已经[报告给 IntelliJ 问题跟踪器了。](https://youtrack.jetbrains.com/issue/IDEA-79680)

# sqlite - 在 SSMS 中查询链接的 SQLite DB

> ID：10386275
> 
> 赞同：0
> 
> 时间：2012-04-30T15:30:11.097
> 
> 标签：sqlite, sql-server-2008-r2, ssms, linked-server

我正在尝试在 SSMS 中使用 SQLite 数据库作为链接服务器。我设法安装了 ODBC 驱动程序并创建了一个链接服务器，但我似乎找不到让查询工作的方法。我认为这只是不了解它的正确语法的问题。这是我尝试过的：

`exec sp_tables_ex 'SQLITE'`

这按预期工作，显示数据库中的所有表。

`select * from SQLITE.[default].dbo.TRANSLATION`

失败并显示此错误消息

> 链接服务器“SQLITE”的 OLE DB 提供程序“MSDASQL”的架构或目录使用无效。提供了一个由四部分组成的名称，但提供者没有公开必要的接口来使用目录或模式。

从中得到线索，我尝试删除架构：

`select * from SQLITE.[default].TRANSLATION`

但这给了我另一个错误信息：

> 无效的对象名称“SQLITE.default.TRANSLATION”。

同样，以下给出相同的错误（对象名称略有更改）：

`select * from SQLITE.[default].TRANSLATION`

`select * from SQLITE.dbo.TRANSLATION`

`select * from SQLITE.TRANSLATION`

有任何想法吗？我不太确定从这里尝试什么。

# macos - 用于mac的bash shell脚本从文件生成单词列表？

> ID：10386280
> 
> 赞同：4
> 
> 时间：2012-04-30T15:30:38.383
> 
> 标签：macos, bash, shell

是否有在 mac 上运行的 shell 脚本从文本文件生成单词列表，列出唯一的单词？如果它可以按频率排序就更好了......

抱歉忘了提，是的，我更喜欢 bash 的，因为我现在正在使用 mac ......

哦，我的文件是法语的...（基本上我正在阅读一本小说并学习法语，所以我尝试生成一个单词列表来帮助自己）。希望这不是问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T15:35:24.883

如果我理解正确，你需要这样的东西：

```
cat <filename> | sed -e 's/ /\n/g' | sort | uniq -c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T15:40:32.400

这个命令会做

```
cat file.txt |  tr "\"' " '\n' | sort -u 
```

此处`sort -u`不适用于 Macintosh 机器。在这种情况下，请`sort | uniq -c`改用。（感[谢汉克盖伊](https://stackoverflow.com/users/4203)）

```
cat file.txt |  tr "\"' " '\n' | sort | uniq -c 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T16:29:32.943

只需回答我的问题以点下我正在使用的最终版本：

```
tr -cs "[:alpha:]" "\n" < FileIn.txt | sort | uniq -c | awk '{print $2","$1}' >> FileOut.csv 
```

一些注意事项：

*   tr 可以直接用来做替换。
*   因为我有兴趣为我的法语词汇创建一个单词列表，所以我使用了 [:alpha:]
*   awk用来插入逗号，这样输出的是csv文件，方便我上传...

再次感谢大家帮助我。

抱歉，我在开始时没有明确说明我正在使用 mac 并期望使用 bash 脚本。

干杯。

# uiviewcontroller - UIViewController 内的 UIViewController - IBAction 未触发

> ID：10386281
> 
> 赞同：1
> 
> 时间：2012-04-30T15:30:43.397
> 
> 标签：uiviewcontroller, ibaction

我有一个 UIViewController (ViewController A) 占用屏幕，我想添加一个小的 UIViewcontroller (ViewController B) 作为父 ViewController (ViewController A) 的标题。

在 ViewController AI 上有：

```
- (void)viewDidLoad {
[super viewDidLoad];

TestViewController *test = [[TestViewController alloc] initWithNibName:@"TestView" bundle:[NSBundle mainBundle]];
        [self.view addSubview:self.test.view];
} 
```

在 ViewController BI 上有一个测试按钮：

```
- (IBAction)buttonTest:(id)sender
{
} 
```

这个 buttonTest 永远不会被调用。任何想法如何让这个工作？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:54:59.570

```
- (void)viewDidLoad {
    [super viewDidLoad];

    TestViewController *test = [[TestViewController alloc] initWithNibName:@"TestView" bundle:[NSBundle mainBundle]];
    [self.view addSubview:self.test.view];
} 
```

将变量 *test 声明为类级别以使其保持在生命周期中。

# oracle-apex - APEX 3.2：页面流程 If 语句

> ID：10386288
> 
> 赞同：0
> 
> 时间：2012-04-30T15:31:49.827
> 
> 标签：oracle-apex

我有我正在尝试运行的页面进程，如果满足某些条件，它将发送一封电子邮件。但是，如果该过程没有提取任何数据，我仍然希望页面能够正常打开。当以下 Select 语句运行时，我被困在“ORA-01403：找不到数据”上：

```
select issue_added_to_alm into issue_added from Table_2 WHERE issue_Requester = '1234' and Issue_Added_To_ALM = '1' and EMAIL_NOTIFICATION = '0'; 
```

如果我删除初始选择语句并将 IF 语句替换为以下内容：

```
IF :NEW.ISSUE_ADDED_TO_ALM = 1 THEN 
```

我得到：ORA-01008：并非所有变量都绑定

我如何实现这一目标？

```
declare
 l_body varchar2(4000);
 l_to_address varchar2(2000);
 l_from varchar2(200) :='dq.issue.mgmt@jpmchase.com';
 l_summary varchar2(1000);
 l_description varchar2(4000);
 l_ALM_ID varchar2(100);
 l_subject varchar2(400);
 l_added_to_alm varchar2(200);
 issue_added varchar2(200);

begin

select 
issue_added_to_alm 
into issue_added 
from Table_2 
WHERE issue_Requester = '1234' 
and Issue_Added_To_ALM = '1' and EMAIL_NOTIFICATION = '0';

 if issue_added = 1 Then

        select EMP_EMAIL_NAME 
        into l_to_address
        from Table_1 where emp_id = '1234';

        select 
        ISSUE_Summary,ISSUE_DESCRIPTION,ALM_ISSUE_ID,email_notification 
        into l_summary,l_description,l_ALM_ID,l_added_to_alm
        FROM Table_2
        WHERE issue_Requester = '1234' and Issue_Added_To_ALM = '1' and EMAIL_NOTIFICATION = '0';

        l_subject := l_ALM_ID || 'Request has been created.';

        l_body :=  '<style type="text/css">
        p{font-family: Calibri, Arial, Helvetica, sans-serif;
        font-size:12pt;
        margin-left:30px;
        }
        </style>';

                l_body := l_body ||  '<p>Your request has been created.</p>';
                l_body := l_body ||  '<p>Data Quality Center received the following request:</p>';
                l_body := l_body ||  '<p>Request ID: '|| l_ALM_ID ||'</p>';
                l_body := l_body ||  '<p>Request Title: '|| l_summary||'</p>';
                l_body := l_body ||  '<p>Request Description: '|| l_description||'</p>';

          HTMLDB_MAIL.SEND(
            P_TO        => l_to_address,
            P_FROM      => l_from,
            P_BODY      => l_body,
            P_BODY_HTML => l_body,
            P_SUBJ      => l_subject,
            P_CC        => l_from);

            wwv_flow_mail.push_queue(
           P_SMTP_HOSTNAME => 'mail.mailserver.net',
           P_SMTP_PORTNO => '12'
           );

           UPDATE Table_2 set EMAIL_NOTIFICATION = 1 where ALM_ISSUE_ID = :l_ALM_ID;

  end if;

  end; 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:53:58.673

您只需要在 final 之前添加一个异常处理程序`end;`：

```
 ...
exception
  when no_data_found then
    null;
end; 
```

# javascript - 在 Javascript 中为类创建数组变量

> ID：10386292
> 
> 赞同：1
> 
> 时间：2012-04-30T15:32:09.810
> 
> 标签：javascript, jquery

以下是我创建的 Javascript 类。

```
(function(window){

    function Project(name,description){

    this.name = name;
    this.description = description;

    }

    window.Project = Project;

}(window)); 
```

我知道使用“this”关键字在类中创建变量。但是有人可以帮助如何创建一个数组作为类的成员。在这种情况下，我需要创建一个数组变量“projectMemebers”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T15:34:11.470

```
this.projectMemebers = []; 
```

或者

```
this.projectMemebers = new Array(); 
```

# android - 通过意图回到第一个活动，活动堆栈会发生什么？

> ID：10386295
> 
> 赞同：2
> 
> 时间：2012-04-30T15:32:14.323
> 
> 标签：android, android-activity, stack

我有一个从网络服务器提取数据的应用程序，将这些数据放在列表视图中，然后将其呈现给用户。涉及4个活动，可以这样调用：

A -> B -> C -> D

或者

A -> B -> D

基本上除了 A 之外的所有活动都是从网络上提取数据。如果连接出现任何问题并且出现超时，我希望活动 B、C 和 D 通知用户并返回 A。

所以我现在所做的是，我将 A 设置为启动模式 singleTask。这样我就可以捕捉到超时异常并调用一个新的 Intent 启动 A。但是中间的活动会发生什么？假设我正在调用 A->B->C->D，然后在 D 中连接超时。现在应用程序回到 A，但是 B 和 C 呢？android会自动在这些上调用onDestroy吗？活动堆栈会发生什么？任何提示表示赞赏。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:39:00.933

当您从活动 D 启动活动 A 时，设置意图标志：

```
FLAG_ACTIVITY_CLEAR_TOP 
```

使用此标志将清除 A 和您所在的活动之间的所有活动，将 A 置于最前面。您也可能不需要使用 singleTask 作为启动模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:53:00.867

> 假设我正在调用 A->B->C->D，然后在 D 中连接超时。现在该应用程序将返回 A...

以您的示例为例，如果所有子活动都是使用 startActivityForResult() 启动的，并且活动 B & C 实现：

```
finishFromChild(Activity activity) {
    ...
    finish();
} 
```

当活动 D 在超时后调用 finish() 时，每个孩子将按顺序关闭（D -> C -> B -> A），并有机会返回您可能想要挽救的任何相关数据。

# php - 在php的image字段中查看图片

> ID：10386298
> 
> 赞同：0
> 
> 时间：2012-04-30T15:32:27.523
> 
> 标签：php, image, sql-server-2008, view

再会！

谁能帮助我，有一个系统，用户可以通过他们的桌面在网络上托管的数据库中注册，我们现在正在开发这个系统的网络界面，然后它在系统中有一定的功能，我必须在其中显示照片用户。

我在 SQL Server 中执行正常的 SELECT，但在 imagejpeg ($ img); 它不显示整个图片，只是图片的一部分。有人可以帮我吗？我正在网上寻找一些教程，他们说这是因为该领域的大小。如果字段是（图像）类型并且返回是十六进制的。

下面我尝试在朋友的帮助下做一个功能，但她也没有工作：

```
<php
 $id     = (int)$_GET['id'];
 $qryimg = mssql_query(gimage SELECT FROM user WHERE id = {$ id});
 $resimg = mssql_fetch_array($qryimg);
 $im1    = $resimg['gimage'];

 header("Content-type: image/jpg");

 $image='';
 for($i=2; $i<strlen($im1); $i+=2)
 {
     $hex = $im1{$i} . $im1{($i + 1)};
     $cod = hexdec( $hex );
     $image .= chr( $cod );
 }
 echo $image;
 #echo imagejpeg($image);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:07:03.010

为什么下面的代码不起作用？你不能只是呼应图像。

```
<php
 $id     = (int)$_GET['id'];
 $qryimg = mssql_query(gimage SELECT FROM user WHERE id = {$ id});
 $resimg = mssql_fetch_array($qryimg);
 $im1    = $resimg['gimage'];

 header("Content-type: image/jpg");

 print $im1;
 exit; 
```

gimage是什么字段类型？

# jquery - Jquery向上滑动div

> ID：10386300
> 
> 赞同：1
> 
> 时间：2012-04-30T15:32:29.877
> 
> 标签：jquery, slider

我需要一些帮助，我正在尝试创建一个非常简单的 jquery 滑块。当我单击一个按钮时，我希望四个 div 向上滑动。但我无法理解如何做到这一点。这是我在 jsfiddle.net 中的内容：http: [//jsfiddle.net/liveandream/LFAMW/](http://jsfiddle.net/liveandream/LFAMW/)

这是我的代码：

```
<div id="slider">
<div class="slide1" style="background: red"></div>
<div class="slide2" style="background: green"></div>
<div class="slide3" style="background: black"></div><br clear="all">
</div>
<button id="prev">Previous</button>
<button id="next">Next</button>​ 
```

查询：

```
$("#next").click(function(){
    $(".slide1").slideUp();
});​ 
```

但我需要它们在下一次和上一次点击时自动向上滑动到下一个 div。请任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T15:41:34.370

你在尝试这样的事情[吗](http://jsfiddle.net/LFAMW/26/)？

HTML：

```
<div id="slider">
<div class="slide" style="background: red"></div>
<div class="slide" style="background: green;display: none;"></div>
<div class="slide" style="background: black; display: none;"></div><br clear="all">
</div>
<button id="prev">Previous</button>
<button id="next">Next</button> 
```

Javascript：

```
$("#next").click(function(){
    var $next = $(".slide:visible").slideUp().next('.slide');
    if($next.size() < 1) {
        $next = $(".slide:first");
    }
    $next.slideDown();
});

$("#prev").click(function(){
    var $prev = $(".slide:visible").slideUp().prev('.slide');
    if($prev.size() < 1) {
        $prev = $(".slide:last");
    }
    $prev.slideDown();
}); 
```

CSS：

```
.slide {
width: 300px;
height: 300px;

}
#slider{
width: 300px;
height: 300px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:17:26.523

这是使用 JQuery 的完整幻灯片 Prev 和 Next 解决方案：

```
$(document).ready(function() {
$("#next").click(function() {
    if ($('.current').next('.slide').length > 0) {
        $(".current").slideUp();
        $('.current').removeClass('current').next('.slide').addClass('current');
    }

});
$("#prev").click(function() {
    if ($('.current').prev('.slide').length > 0) {
        $('.current').removeClass('current').prev('.slide').addClass('current');
        $(".current").slideDown();
    }

}); 
```

});

我在[http://codebins.com/codes/home/4ldqpc9上创建了一个带有解决方案的 bin](http://codebins.com/codes/home/4ldqpc9)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:39:27.817

试试这个：

```
<div id="slider">
<div class="slide1 slide current" style="background: red"></div>
<div class="slide2 slide" style="background: green"></div>
<div class="slide3 slide" style="background: black"></div><br clear="all">
</div>
<button id="prev">Previous</button>
<button id="next">Next</button>​ 
```

js：

```
$("#next").click(function(){
    $(".current").slideUp();
    $('.current').removeClass('current').next('.slide').addClass('current');

});​ 
```

您需要为上一个按钮添加一些逻辑，并确定您何时位于最后一个或第一个 div

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T15:40:01.293

您可以使用标记类标记 div 并使用 jQuery 移动标记，例如

```
<div id="slider">
<div class="slide1 slide current" style="background: red"></div>
<div class="slide2 slide" style="background: green"></div>
<div class="slide3 slide" style="background: black"></div><br clear="all">
</div>
<button id="prev">Previous</button>
<button id="next">Next</button>​ 
```

* * *

```
$("#next").click(function(){
    $(".current").slideUp(function() {
        $(this)
            .removeClass('current')
            .next('.slide')
            .addClass('current');
    });
});​ 
```

[jsfiddle在这里](http://jsfiddle.net/ianb/YEdQL/)

# excel - 查找生成单元格内容的代码

> ID：10386304
> 
> 赞同：1
> 
> 时间：2012-04-30T15:32:40.280
> 
> 标签：excel, vba

在 excel VBA 中，是否可以直接从一个对象（例如单元格或图表）跳转以查看更改其属性的任何代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:37:22.577

我能得到的最接近的方法是在 VBA 中添加一个 Watch 表达式：

```
Worksheets("MySheetName").Cells(1,1).Value 
```

如果将该表达式添加为具有“更改时中断”设置和适当范围（例如模块）的监视，则任何更改该单元格（A1）值的代码都会导致代码在调试模式下暂停。然后你可以看到刚刚改变了什么。

# ruby-on-rails - 如何让独角兽在路径下运行 Rails 3.0 应用程序？

> ID：10386305
> 
> 赞同：2
> 
> 时间：2012-04-30T15:32:47.773
> 
> 标签：ruby-on-rails, ruby, rack, unicorn

我正在从Passenger 迁移到Unicorn，并且使用Passenger，我曾经使用RailsBaseURI 选项运行我的Rails 3.0 应用程序，例如在所有URL 前面加上'/blah'。

在 Unicorn 下运行相同的应用程序时，我将“--path /blah”传递给 unicorn_rails，但服务器仍以[http://server:3000/etc/etc](http://server:3000/etc/etc)的形式提供服务，而不是[http://server:3000/blah /etc/etc](http://server:3000/blah/etc/etc) - 我看到通过 /blah/ 请求了一些资产（如 JS 文件等），但各种链接之前仍然没有“/blah/”。

所以 - 总而言之 - 我如何让 Unicorn 将我的应用程序安装在 /blah 下，以便所有请求都在路径前加上“/blah”，并且所有链接和资产都是在它们前面加上“/blah/”创建的？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T15:14:17.853

这是我发现的：

要让 Rails 应用程序提供资源和链接 URL，您必须在启动之前设置环境变量：

```
ENV['RAILS_RELATIVE_URL_ROOT'] = '/prefix' 
```

然后，正如@d11wtq 所说，要让 Rack 兼容的服务器（在本例中为 Unicorn）在前缀下实际为应用程序提供服务，您必须在 config.ru 文件中，而不是通常的运行行中，执行下列的：

```
run Rack::URLMap.new(
  ENV['RAILS_RELATIVE_URL_ROOT'] => Rails.application
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T15:40:26.100

我相信在你的 config.ru 中加入这样的东西应该可以做到：

```
require ::File.expand_path('../config/environment',  __FILE__)

run Rack::URLMap.new(
  "/blah" => Rails.application
) 
```

*未经测试*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T16:33:53.697

简单可靠的解决方案是在前端设置中设置前缀。

以passenger+nginx为例，你可以使用这样的东西：

```
server {
    listen 80;
    server_name www.phusion.nl;
    root /websites/phusion;
    passenger_enabled on;
    passenger_base_uri /prefix;
} 
```

源代码没有任何改变，一行设置。

* * *

但是您说您正在使用`unicorn`，您使用的是哪个前端？

使用 nginx 应该是可能的，如下所示：

```
location /prefix {
    rewrite           ^/prefix/(.*)  /$1      break;
    proxy_pass        http://localhost:8000;
} 
```

# node.js - 如何在没有我自己的注册表的情况下安装私有 NPM 模块？

> ID：10386310
> 
> 赞同：366
> 
> 时间：2012-04-30T15:33:17.990
> 
> 标签：node.js, npm, package, npm-private-modules

我已经获取了一些共享代码并将其放入 NPM 模块中，我不想将其上传到中央注册表。问题是，我如何从其他项目安装它？

显而易见的方法可能是建立自己的 NPM 注册表，但根据文档，这涉及很多麻烦。

我可以只安装一个位于本地文件系统上的 NPM 模块，甚至可以从 git 安装吗？

```
npm install --from-git git@server:project 
```

* * *

## 回答 #1

> 赞同：558
> 
> 时间：2012-04-30T23:09:33.330

在您的**私有 npm 模块**中添加

```
"private": true 
```

到你的 package.json

然后在另一个模块中引用私有模块，在你的 package.json 中使用它

```
{
    "name": "myapp",
    "dependencies": {
        "private-repo": "git+ssh://git@github.com:myaccount/myprivate.git#v1.0.0",
    }
} 
```

* * *

## 回答 #2

> 赞同：288
> 
> 时间：2012-04-30T18:44:52.507

```
cd somedir
npm install . 
```

或者

```
npm install path/to/somedir 
```

`somedir`必须包含`package.json`在它里面。

它也知道 git：

```
npm install git://github.com/visionmedia/express.git 
```

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2012-05-03T09:39:59.227

> 我可以只安装一个位于本地文件系统上的 NPM 包，甚至可以从 git 安装吗？

是的你可以！从文档[https://docs.npmjs.com/cli/install](https://docs.npmjs.com/cli/install)

> 一个包是：
> 
> *   a) 包含由 package.json 文件描述的程序的文件夹
> *   b) 一个 gzipped tarball，包含 (a)
> *   c) 解析为 (b) 的 url
> *   d)`<name>@<version>`与 (c) 在注册表上发布的
> *   e) a`<name>@<tag>`指向 (d)
> *   f)`<name>`具有满足 (e) 的“最新”标签的
> *   g) a`<git remote url>`解决为 (b)

npm 不是很棒吗？

* * *

## 回答 #4

> 赞同：51
> 
> 时间：2016-01-06T11:27:21.617

**2016 年 1 月更新**

*除了其他答案之外*，有时您希望在团队上下文中使用私有模块。

**Github**和**Bitbucket**都支持生成团队**API Key**的概念。此 API 密钥可用作此团队执行 API 请求的**密码。**

在您的**私有 npm 模块**中添加

```
"private": true 
```

到你的**package.json**

然后在另一个模块中引用私有模块，在你的 package.json 中使用它

```
 {
        "name": "myapp",
        "dependencies": {
            "private-repo":
"git+https://myteamname:aQqtcplwFzlumj0mIDdRGCbsAq5d6Xg4@bitbucket.org/myprivate.git",
        }
    } 
```

其中*团队名称 = myteamname*和*API 密钥 = aQqtcplwFzlumj0mIDdRGCbsAq5d6Xg4*

这里我引用了一个 bitbucket 存储库，但使用 github 也几乎相同。

最后，作为替代方案，如果您真的不介意每月支付**7 美元**（截至撰写本文时），那么您现在可以开箱即用地拥有[私有 NPM 模块。](https://www.npmjs.com/private-modules)

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2014-06-20T21:45:11.887

FWIW：在处理私人组织存储库时，我对所有这些答案都有疑问。

以下对我有用：

```
npm install -S "git+https://username@github.com/orgname/repositoryname.git" 
```

例如：

```
npm install -S "git+https://blesh@github.com/netflix/private-repository.git" 
```

我不完全确定为什么其他答案在这种情况下对我不起作用，因为它们是我在访问Google 并找到此答案之前*首先尝试的。*其他答案是我过去所做的。

希望这对其他人有帮助。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-11-16T23:04:40.153

我遇到了同样的问题，经过一番搜索，我找到了 Reggie（[https://github.com/mbrevoort/node-reggie](https://github.com/mbrevoort/node-reggie)）。它看起来很结实。它允许将 NPM 模块轻量级发布到私有服务器。不完美（安装时没有身份验证），而且它还很年轻，但我在本地对其进行了测试，它似乎做了它所说的应该做的事情。

那是......（这只是来自他们的文档）

```
npm install -g reggie
reggie-server -d ~/.reggie 
```

然后 cd 进入您的模块目录并...

```
reggie -u http://<host:port> publish 
reggie -u http://127.0.0.1:8080 publish 
```

最后，您可以在直接的 npm install 命令中或从 package.json 中使用该 url 来从 reggie 安装软件包......就像这样

```
npm install http://<host:port>/package/<name>/<version>
npm install http://<host:port>/package/foo/1.0.0 
```

或者..

```
dependencies: {
    "foo": "http://<host:port>/package/foo/1.0.0"
} 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2016-09-14T20:32:47.280

以一种可访问的方式构建您的代码，如下所示。如果这对你来说是可能的。

> *   NodeProjs\Apps\MainApp\package.json
>     
>     
> *   NodeProjs\Modules\DataModule\package.json

在 MainApp **@NodProjs\Apps\MainApp\**

```
npm install --S ../../Modules/DataModule 
```

*您可能需要将 package.json 更新为：*

```
 "dependencies": {
       "datamodule": "../../Modules/DataModule"
} 
```

这适用于我的情况。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-06-03T06:11:09.313

Npm 现在以 $7/用户/月的价格提供无限的[私有托管模块，就像这样使用](https://www.npmjs.com/private-modules)

```
cd private-project
npm login 
```

在你的包 json 集中 `"name": " @username/private-project"`

```
npm publish 
```

然后要求您的项目：

```
cd ../new-project
npm install --save @username/private-project 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-11-20T07:27:22.203

这[就是我想要的](https://github.com/mhulse/mhulse.github.io/wiki/npm-install-from-public-or-private-repos-on-GitHub-or-Bitbucket)：

```
# Get the latest from GitHub, public repo:
$ npm install username/my-new-project --save-dev
# Bitbucket, private repo:
$ npm install git+https://token:x-oauth-basic@github.com/username/my-new-project.git#master
$ npm install git+ssh://git@github.com/username/my-new-project.git#master

# … or from Bitbucket, public repo:
$ npm install git+ssh://git@bitbucket.org/username/my-new-project.git#master --save-dev
# Bitbucket, private repo:
$ npm install git+https://username:password@bitbucket.org/username/my-new-project.git#master
$ npm install git+ssh://git@bitbucket.org/username/my-new-project.git#master
# Or, if you published as npm package:
$ npm install my-new-project --save-dev 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-08-09T19:26:15.827

从[arcseldon 的回答](https://stackoverflow.com/a/34632019/747369)开始，我发现 URL 中需要团队名称，如下所示：

```
npm install --save "git+https://myteamname@aQqtcplwFzlumj0mIDdRGCbsAq5d6Xg4@bitbucket.org/myteamname/myprivate.git" 
```

请注意，API 密钥仅适用于团队，而不是个人用户。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2017-02-14T20:58:22.947

我将以下内容与私有 github 存储库一起使用：

```
npm install github:mygithubuser/myproject 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-07-17T15:50:25.083

您可以为此目的使用[Verdaccio ，它是一个内置于 Node.js 中的轻量级私有 npm 代理注册表。](https://verdaccio.org/en/)它也是免费和开源的。通过使用 Verdaccio，它不会像普通的私有 npm 注册表那样麻烦。

[您可以在他们的网站上](https://verdaccio.org/docs/en/installation)找到有关如何安装和运行它的详细信息，但步骤如下：

它需要`node >=8.x`.

```
 // Install it from npm globally
    npm install -g verdaccio

    // Simply run with the default configuration that will host the registry which you can reach at http://localhost:4873/
    verdaccio

    // Set the registry for your project and every package will be downloaded from your private registry
    npm set registry http://localhost:4873/

    // OR use the registry upon individual package install
    npm install --registry http://localhost:4873 
```

它还有一个 docker，因此您可以轻松地将其发布到您的公开可用的 docker，瞧，您有一个私有的 npm 存储库，可以在您配置它时以某种方式分发给其他人！

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-03-04T10:59:05.467

配置从公共 Github 存储库安装，即使机器在防火墙下：

```
dependencies: {
   "foo": "https://github.com/package/foo/tarball/master"
} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-07-11T07:14:58.173

非常简单 -

```
npm config set registry https://path-to-your-registry/ 
```

它实际上`registry = "https://path-to-your-registry"`将这条线设置为`/Users/<ur-machine-user-name>/.npmrc`

您明确设置或默认设置的所有值都可以通过 -`npm config list`

# objective-c - 了解何时使用继承来允许一个类使用另一个类的实例

> ID：10386311
> 
> 赞同：3
> 
> 时间：2012-04-30T15:33:19.907
> 
> 标签：objective-c, oop, inheritance, composition

创建类时，是否有关于何时使用继承以及何时将没有继承的新类导入另一个类的规则？

这是一个例子：

我创建了一个名为 的类`Person`，然后创建了很多`Person`对象。

然后我创建一个名为`House`. 使用继承和属性，我所有的`Person`对象现在都可以有一个`House`.

然后我创建了一个名为的子类`Car`，所以我的所有`Person`对象现在都有`House`s 和`Car`s。

等等等等…。

我现在有这个类序列：

NSObject < Person < House < Car < new Class < another new Class 等等。

对于上述场景，我的逻辑（我是 Objective-C 初学者）告诉我，我有两种不同的方式来产生相同的结果：

1.  如上所述，或
2.  创建没有继承的每个类，然后将其`Person`作为 ivar 导入 - 例如， now 的实例成为类型，然后使用属性`House`将其导入对象。`Person`

请原谅我缺乏术语和理解。如果需要，我可以上传一个代码示例，但它更多的是关于何时以及何时不使用继承的一般问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T15:40:50.357

这个问题并不特定于 Objective-C：关于何时使用继承的指南对于所有面向对象的语言都是相同的，并且它基于可*替换性，由*[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)总结：

> 如果 S 是 T 的子类型，则 T 类型的对象可以替换为 S 类型的对象

换句话说，只有当你可以说“{derived} *is a* {base}>”时才使用继承；当你为“{owner} *has a* {something}”建模时，使用组合

*   学生*是一个*人——继承
*   车*是*车——传承
*   人*有*房子——构成（ivar或财产）
*   汽车*有一个（n）*引擎——组成（ivar或属性）

# javascript - Javascript 在 Chrome 中有效，但在 IE 或 Firefox 中无效

> ID：10386313
> 
> 赞同：1
> 
> 时间：2012-04-30T15:33:35.240
> 
> 标签：javascript, asp.net, internet-explorer, firefox, google-chrome

选择一个或更少的复选框后，单击比较巡回赛按钮时，应显示一个弹出窗口。但是，此功能仅适用于 Chrome。我该怎么做才能让它在 Firefox 和 IE 中运行？

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder" runat="Server">
<script type="text/javascript">
    $(document).ready(function () {
        var selectedCheckboxes = $("input:checkbox[id$=Select]");
        $("[id*=CompareTop]").click(function() {
            if (selectedCheckboxes.filter(":checked").length <= 1) {
                event.preventDefault();
                alert("Please select at least 2 tours to compare.");}
        });            
        selectedCheckboxes.change(function() {
            if (selectedCheckboxes.filter(":checked").length > 3){
                $(this).removeAttr("checked");
                alert("At most 3 tours may be compared.");  
            }
        });
    });

          </script>
<sc:Placeholder ID="phHeader" Key="ph_header" runat="server" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:48:19.103

你的函数应该接受一个名为“事件”的参数，不是吗？事实上，它不能肯定是它在 Firefox 中不起作用的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:45:08.660

你错过了 }); 在末尾。你需要关闭 $(document).ready

# java - ImageButton 似乎没有检测到点击（Scene2d.ui）

> ID：10386314
> 
> 赞同：4
> 
> 时间：2012-04-30T15:33:36.380
> 
> 标签：java, user-interface, libgdx, stage

尝试在舞台上放置一个简单的 ImageButton 时，它似乎没有检测到点击。

```
ImageButton btnStart = new ImageButton(ButtonArt.UP, ButtonArt.DOWN));

// btnStart.setClickListener(new ClickListener() {
//          @Override
//          public void click(Actor a, float arg1, float arg2) {
//             a.visible = false;
//          }
//       });

stage.addActor(btnStart); 
```

ButtonArt.UP 和 ButtonArt.DOWN 是每个状态的 TextureRegions。现在当我点击按钮时，它不会改变状态！我也尝试了上面的 ClickListener （用于测试），但似乎也没有用。

在我的渲染方法中，我只调用 stage.act() 和 stage.render()。我还尝试在我的渲染方法中使用 SpriteBatch 绘制 TextureRegions，它们实际上是不同的纹理。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T21:00:06.757

您需要将舞台设置为输入处理器：

```
Gdx.input.setInputProcessor(stage); 
```

如果您需要多个输入处理器（例如，您需要在场景之外注册点击），您将需要使用 InputMultiplexer，如下所示：

```
InputMultiplexer plex = new InputMultiplexer();
plex.addProcessor(myOtherProcessor);
plex.addProcessor(stage);
Gdx.input.setInputProcessor(plex); 
```

# java - zk：可编辑的列表框和数据绑定

> ID：10386315
> 
> 赞同：1
> 
> 时间：2012-04-30T15:33:41.417
> 
> 标签：java, data-binding, model, zk

我正在使用数据绑定并尝试在 ZK 中实现可编辑表（列表框）。

```
<listbox model="@bind(vm.beanList)" selectedItem="@bind(vm.selectedBean)"
         mold="paging" pageSize="5">
    <listhead>
      <!-- ... -->
    </listhead>

    <template name="model">
      <listitem>
        <listcell>
          <!-- ... -->
        </listcell/>

        <listcell>
          <combobox width="100%" inplace="true"
                    model="@load(vm.otherBeanList)"
                    value="@load(each.property) @converter(vm.propertyConverter)"
                    itemRenderer="@load(vm.propertyComboItemRenderer)"
                    onSelect="@command('propertySelected')"
                    onFocus="@command('cellEditorSelected', item=self)"/>
        </listcell>
      </listitem>
    </template>
  </listbox> 
```

表列之一是组合框。用户可以单击它并从下拉列表中更改选定的值。由于所有组合框都使用一个模型......并且模型实现了 Selectable 接口，用户直接更改所有行中每个组合框中的选定值。所以我需要以某种方式为每个组合框提供单独的模型......或者以某种方式克隆模型......或者完全改变方式。

任何建议都会有所帮助和有价值。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:30:29.377

通过使用 List 作为模型而不是 AbstractListModel 解决了这个问题。ZK 用模型包装集合，并为每个组合框隐式创建新的 ListModelList。所以每个组合框都使用自己的模型，并且有自己的选择值。

# javascript - 我们如何使小工具的高度为 100%？

> ID：10386323
> 
> 赞同：1
> 
> 时间：2012-04-30T15:34:11.623
> 
> 标签：javascript, google-sites

大家下午好

我正在使用 Google 协作平台，并且正在尝试将小工具 (iFrame) 嵌入到网站中。它工作正常，但是 Google 协作平台不允许我们扩展小工具以填充其内容的高度。它只允许 100% 的宽度和固定的高度：

![在此处输入图像描述](../Images/7c4a98d41d1a716d4e40e5e46806116a.png)

因为我们被允许在嵌入式小工具（iFrame）中运行我们自己的 javascript，所以我试图通过动态计算以像素为单位的高度、获取对父页面的 Dom 的[HTMLIFrameElement](https://developer.mozilla.org/en/DOM/HTMLIFrameElement)的引用以及从那里修改高度来解决这个问题.

从我的自定义小工具文件 (iFrame) 中，我可以获得对父[Window](https://developer.mozilla.org/en/DOM/window)对象的引用，但是**parent.document**返回`undefined`.

这是我的自定义小工具文件[g5.xml](https://sites.google.com/site/pacerierfiles/g5.xml)：

```
<?xml version="1.0" encoding="UTF-8" ?>
<Module>
    <ModulePrefs title="My Gadget" /> 
    <Content type="html">
<![CDATA[
<script>
document.body.onload = function(){
    var content_height = document.getElementById('content').clientHeight;
    alert(parent); // [object DOMWindow]
    alert(parent.document); // undefined
};
</script>
<div id="content">
    some<br>content<br>here
</div>
]]>
    </Content> 
</Module> 
```

**如果parent.document**返回，有什么方法可以访问 iFrame 的父 DOM 元素`undefined`？

是否有任何其他解决方案可以使小工具在 Google 协作平台中达到 100% 高度？

# jquery-ui - 除非添加前导斜杠，否则 jQuery UI 图像不起作用（我正在使用 Symfony2）

> ID：10386332
> 
> 赞同：0
> 
> 时间：2012-04-30T15:34:48.333
> 
> 标签：jquery-ui, symfony

我的页面上有一个 jQuery UI 对话框。右上角的“X”是由这段 CSS 小片段实现的：

```
.ui-widget-header .ui-icon {
  background-image: url(images/ui-icons_222222_256x240.png)/*{iconsHeader}*/;
} 
```

问题是那行不通。它仅在我添加这样的前导斜杠时才有效：

```
.ui-widget-header .ui-icon {
  background-image: url(/images/ui-icons_222222_256x240.png)/*{iconsHeader}*/;
} 
```

我知道我可以在 jQuery UI 文件中进行此更改，但这似乎不对。看起来很老套，另外，当我升级到更新版本的 jQuery UI 时，我所有的更改都会被吹走。

如何使我的 jQuery UI 图像正常工作？我不知道我在这里使用 Symfony2 是否重要，但我想我会提到它以防万一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:43:16.737

我有同样的问题。问题是我的索引文件中 CSS 文件的名称。首先我有 jquery-ui-1.10.1.custom.css。我将其更改为 jquery-ui-1.10.1.custom.min.css 然后它工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:57:42.433

如果您的文件在正确的位置，应该可以工作。 [这个另一个 SO Question](https://stackoverflow.com/questions/940451/using-relative-url-in-css-file-what-location-is-it-relative-to)有很多参考资料，说明样式表中的相对 url 如何与样式表本身相关，而不是包含文档。

因此，只要您不破坏 jQuery UI 下载和移动资源，就可以使用相对 URL。

# regex - 如何使用正则表达式指定一个或多个特殊字符实例

> ID：10386336
> 
> 赞同：0
> 
> 时间：2012-04-30T15:35:10.843
> 
> 标签：regex

我正在使用以下正则表达式来匹配文档名称：

```
[a-zA-Z0-9]\.txt 
```

文档

```
asdf2342l_asdf2_asdf23.txt 
```

下划线可以出现在.txt之前的任何时间点，但到目前为止我一直没有成功

?

```
[a-zA-Z0-9_]\.txt 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:41:48.890

你错过了量词：`+`或者`*`在这种情况下。

```
[a-zA-Z0-9_]+\.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:54:08.913

您忘记添加量词，例如：

```
[a-zA-Z0-9_]+\.txt 
```

加号表示：“至少一个字符或多个”，因此它将匹配“.txt”部分之前的所有字符。

但我建议您不要尝试在文件名的第一部分指定所有可能的字符（因为它可能包含 Unicode 符号 fe）。尝试使用这个正则表达式：

```
[^.]+\.txt$ 
```

它将匹配每个具有 .txt 扩展名的文件名。如果文件名中有完整路径（磁盘、父文件夹 + 路径分隔符），则应使用此路径：

```
[^.\\\/]+\.txt$ 
```

# linq - 在数据库视图上使用选择器 LINQ 的不同结果

> ID：10386338
> 
> 赞同：1
> 
> 时间：2012-04-30T15:35:16.287
> 
> 标签：linq, entity-framework

当我使用 dbase(oracle) 视图时

```
from f in MYVIEW
where f.Order=="HERE"
select f 
```

我得到相同的结果（行）。

和...

```
from f in MYVIEW
where f.Order=="HERE"
select f.ColA 
```

我得到了为 ColA 返回的正确结果

我知道这一定是一个新手问题。还在学习...提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T15:45:24.540

原因是 EF 默认需要唯一标识每条记录。因此，每个实体都必须具有唯一的键。视图没有键，因此 EF 通过使用所有不包含二进制数据的不可为空的列来推断键。现在 EF 预计这些列将使实体唯一可识别。如果他们不这样做，您将以您在第一个示例中看到的问题结束。当 EF 从结果集中读取实体时，它会检查键，如果已经创建了具有相同键的实体，它会使用该实例而不是创建新实例 -> 将表示结果集中在键列中具有相同值的所有记录由同一个实体实例。我今天描述了[如何用视图来避免这个问题](https://stackoverflow.com/questions/10377803/whats-the-best-way-to-force-ef-to-return-all-rows-in-a-view/10380848#10380848)。

您的第二个示例使用投影。在这种情况下，不会构造实体实例，EF 只返回值。

# javascript - 在查询字符串参数中有一个 & 符号

> ID：10386341
> 
> 赞同：9
> 
> 时间：2012-04-30T15:35:25.023
> 
> 标签：javascript, redirect

我对javascript有点陌生，但遇到了一个小问题：

我正在尝试重定向到 javascript 中的页面（然后执行重定向）。我`window.location`这样设置：

```
window.location = "./RedirectPage.aspx?ReturnUrl=page.aspx?key=val&amp;key2=val2"; 
```

现在，在 RedirectPage.aspx 上，当它尝试重定向到我作为 ReturnUrl 传入的页面时，它会将 key2=val2 解析为 RedirectPage 而不是 ReturnUrl 的另一个查询字符串参数。

这样做是有道理的，但这不是我想要做的……知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-30T15:38:14.087

您想要对 ReturnUrl 查询字符串进行 URL 编码。

```
window.location = "./RedirectPage.aspx?ReturnUrl="+encodeURIComponent("page.aspx?key=val&amp;key2=val2"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T15:38:18.880

尝试这个：

```
window.location = "./RedirectPage.aspx?"+encodeURIComponent("ReturnUrl=page.aspx?key=val&key2=val2") 
```

您需要转义 & 符号（用于查询字符串）。

# windows - 如何在 Windows 中获取文件名中带有冒号的文件？

> ID：10386344
> 
> 赞同：51
> 
> 时间：2012-04-30T15:35:33.217
> 
> 标签：windows, unix, filenames, colon

我从上传文件名中带有冒号的文件的客户那里收到错误，即`C:/uploads/test : doc.html`

我假设某些 Unix 或 Linux 系统正在生成该文件，但我不确定用户如何使用无效的文件名保存它们。我编写了一段代码，应该在上传时重命名文档。我的问题是我无法测试它，因为我无法在 Windows 上获取文件名中有冒号的文件。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2014-08-24T23:27:53.010

我发现了一个与冒号非常相似的字符，**“꞉”**它是一个 unicode 字符，称为修饰符字母冒号。这没有像全角冒号那样的空格，并且与常规冒号几乎完全相同，但符号有效。您可以从上面复制并粘贴它，也可以使用代码点**U+A789**

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-30T15:49:55.893

对于 Windows 文件名，冒号是无效字符。您将无法在文件名中允许“：”，但您可以解决它。

你可以做你已经做过的事情；创建一个脚本，用 UNIX 端的有效字符替换这些无效字符。或者，您可以使用文件名字符翻译在 Windows 服务器上处理此问题：http: [//support.microsoft.com/kb/289627](http://support.microsoft.com/kb/289627)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-07-26T23:48:22.760

我发现的保留字符的其他替换是

” ‹ › ⁎ ∕ ⑊ ＼︖ ꞉ ⏐</p>

例如在python中你会这样做：

```
fixed_name = orig_name.replace('\\\\','⑊')
forbidden_characters = '"*/:<>?\|'
unicode_characters = '”⁎∕꞉‹›︖＼⏐'
for a, b in zip(forbidden_characters, unicode_characters):
    fixed_name = fixed_name.replace(a, b) 
```

*   [命名文件、路径和命名空间](https://docs.microsoft.com/fr-fr/windows/win32/fileio/naming-a-file?redirectedfrom=MSDN#naming-conventions)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-07-24T23:11:42.637

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-22T05:32:35.837

您可以使用 CJK（中文/日文/韩文）之一

“：”

这是非常通用的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-10T01:20:14.677

目前，您将使用 WSL，网址获取说明：[https](https://docs.microsoft.com/en-us/windows/wsl/install-win10) ://docs.microsoft.com/en-us/windows/wsl/install-win10 。

然后，您可以在您的 Linux 发行版中创建一个冒号。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2018-09-03T03:44:39.047

如何使用看起来像冒号的符号命名文件或文件夹

在下面的示例中，字体大小为 12，但符号除外，该符号设置为下标、粗体，字体大小为 16。冒号状符号的字符代码为 02F8。

下标设置的原因是将符号的位置相对于其垂直位置更低。应用粗体和更大的字体设置，以便符号在页面上更容易识别，并且在文件或文件夹名称中使用时没有影响。

示例：(C˸) 符号 – 下标、Calibri、粗体和 16 号字体。

*使用 Windows 7 和 Word 2007

# asp.net-mvc - ASP.NET MVC：Controller.HandleUnknownAction 404 还是 405？

> ID：10386347
> 
> 赞同：5
> 
> 时间：2012-04-30T15:35:50.857
> 
> 标签：asp.net-mvc, api, rest, http-status-code-404, http-status-code-405

我正在覆盖 ASP.NET MVC 的 Controller.HandleUnknownAction(string actionName) 方法。当未找到操作以及不允许使用 HTTP 方法时，将调用它。我怎样才能区分这两者？我想在未找到操作时返回 404，在允许方法时返回 405。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T16:38:03.300

我能想到的最简单的方法是创建自定义操作过滤器。如果方法不允许，这将允许您返回 http 状态代码结果

```
public class HttpPostFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (!(filterContext.RequestContext.HttpContext.Request.GetHttpMethodOverride().Equals("post", StringComparison.InvariantCultureIgnoreCase)))
        {
            filterContext.Result = new HttpStatusCodeResult(405);
        }
    }
} 
```

或者更好的是，创建更通用的版本，就像[AcceptVerbsAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.acceptverbsattribute.aspx)

```
[AttributeUsage(AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
public sealed class AllowMethodsAttribute : ActionFilterAttribute
{
    public ICollection<string> Methods
    {
        get;
        private set;
    }

    public AllowMethodsAttribute(params string[] methods)
    {
        this.Methods = new ReadOnlyCollection<string>(methods);
    }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        string httpMethodOverride = filterContext.HttpContext.Request.GetHttpMethodOverride();
        if (!this.Methods.Contains(httpMethodOverride, StringComparer.InvariantCultureIgnoreCase))
        {
            filterContext.Result = new HttpStatusCodeResult(405);
        }
    }
} 
```

并像使用它一样

```
[AllowMethods("GET")]
public ActionResult Index()
{
    ViewBag.Message = "Welcome to ASP.NET MVC!";

    return View();
} 
```

自定义属性以将[HttpVerbs](http://msdn.microsoft.com/en-us/library/system.web.mvc.httpverbs.aspx)作为参数由您决定。

# mysql - 选择与子匹配的行 ID 不匹配的行 ID

> ID：10386348
> 
> 赞同：0
> 
> 时间：2012-04-30T15:36:00.923
> 
> 标签：mysql

我有两个表：Sentence 和 WordIndex。

**句子：**
id、
text、
wordId

**WordIndex：**
id、
word、
sentenceId

## 设想：

*示例：*
语句表
1，“我跳过狗”，[1,2,3,4,5]
2，“我绊倒猫”，[6,7,8,9,10]

WordIndex 表
1, "i", 1
2, "jumped", 1
3, "over", 1
4, "the", 1
5, "dog", 1
6, "i", 2
7, "tripped", 2
8，“过”，2
9，“该”，2
10，“猫”，2

我想找到所有仅包含以下任何单词的句子：“i”、“jumped”、“over”、“the”、“dog”、“cat”。
如果我只是在索引中搜索这些词，将返回句子#2，它不应该包含在内。
我的想法是在 WordIndex 中找到与目标词不匹配的行。该结果包含我不想要的所有 SentenceId，而我不想要的所有 SentenceId。然后，获取不在该结果中的句子的 ID。

问题是，我对 MySQL 很陌生，有两个问题。
1）这似乎是获得预期结果的最有效方法吗？我需要它来很好地扩展（数百万个索引和数千个目标/允许的单词）。
2) 我如何将该解决方案转换为 SQL 语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T03:19:07.170

我要回答我自己的问题。以下查询（使用 Doctrine Query Language）将从给定的单词数组中检索仅包含单词的句子。

```
$search = "w.text != 'WORD' AND w.text != 'WORD'...";
$em = $this->getDoctrine()->getEntityManager();
$query = $em->createQuery("
    SELECT s FROM BundleName:Sentence s 
    WHERE s.id NOT IN 
    (SELECT t.id FROM BundleName:Sentence t 
    JOIN t.words w WHERE ".$search.")
"); 
```

我不确定这是否有效，但它似乎有效。

# maven - Ant 中阴影 jar 的 Maven 等效项是什么？

> ID：10386353
> 
> 赞同：1
> 
> 时间：2012-04-30T15:36:36.633
> 
> 标签：maven, ant

在 Maven 中，我可以创建一个独立的“阴影”jar，这正是我所需要的。不幸的是，我只能使用 Ant。

有没有办法在 Ant 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:23:38.110

你应该看看[ant-onejar](http://one-jar.sourceforge.net/index.php?page=getting-started&file=ant)解决方案。

# c# - c#如何将附件保存到文件夹？.Net2

> ID：10386354
> 
> 赞同：0
> 
> 时间：2012-04-30T15:36:46.137
> 
> 标签：c#, export-to-csv

我正在创建一个 csv 文件并将其附加到这样的电子邮件中......

```
using (MemoryStream stream = new MemoryStream(Encoding.ASCII.GetBytes(csv)))
            {
                try
                {
                    to = "email@email.com";
                    string from = "user@email.co.uk";
                    string subject = "Order p"+ OrderNumber;
                    string body = result;
                    SmtpClient SMTPServer = new SmtpClient("127.0.0.1");
                    MailMessage mailObj = new MailMessage(from, to, subject, body);
                    Attachment attachment = new Attachment(stream, new ContentType("text/csv"));
                    attachment.Name = "p" + OrderNo + "_" + CustomerReference+".csv";
                    mailObj.Attachments.Add(attachment);
                    SMTPServer.Send(mailObj);
                }
                catch (Exception ex)
                { }
            } 
```

这工作正常，但我如何将相同的 csv 文件保存到文件夹中？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:46:41.530

System.IO 中的[`File.WriteAllText`](http://msdn.microsoft.com/en-us/library/ms143375.aspx)方法可能是完成此任务的最简单方法：

```
File.WriteAllText("<destination>", csv); 
```

`<destination>`将 CSV 保存到的文件路径在哪里。如果该文件尚不存在，将创建该文件，否则将被覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:41:07.923

您必须将流保存到一个位置：

```
var newfile = new StreamWriter(path_filename);

foreach (var l in stream)
   newfile.WriteLine(l);
newfile.Close(); 
```

编辑：

改用这个：

```
StreamWriter outputfile = new StreamWriter("c:\temp\outputfile.csv"); 
```

然后是 foreach 循环。

编辑 2（来自 msdn 站点）：

```
 // Read the first 20 bytes from the stream.
   byteArray = new byte[memStream.Length];
   count = memStream.Read(byteArray, 0, 20);

   // Read the remaining bytes, byte by byte.
   while(count < memStream.Length)
            {
                byteArray[count++] = 
                    Convert.ToByte(memStream.ReadByte());
            }

   // Decode the byte array into a char array 
   // and write it to the console.
   charArray = new char[uniEncoding.GetCharCount(
   byteArray, 0, count)];
   uniEncoding.GetDecoder().GetChars(
                byteArray, 0, count, charArray, 0);
            Console.WriteLine(charArray); //here you should send to the file as the first example i wrote instead of to writing to console. 
```

# linux - 运行时确定生成文件中使用的文件

> ID：10386355
> 
> 赞同：1
> 
> 时间：2012-04-30T15:36:46.163
> 
> 标签：linux, makefile

我正在尝试在 Linux 中生成一个相当动态的 make 文件，它将从特定类型的 /src 目录中获取所有文件。基本上 ls *.type 的输出我似乎很难做到这一点。以下是我目前拥有的，但它似乎不起作用。希望有人可以帮助我。谢谢！

```
JIL_B_TMPL            : sh = ls *.type
JIL_LIST        =       $(JIL_B_TMPL) 
```

我还要补充一点，这不是为了编译 C 程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:06:39.790

要在 makefile 中捕获 shell 命令的输出，您可以执行以下操作：

```
JIL_B_TMPL := $(shell ls *.type)
JIL_LIST   := $(JIL_B_TMPL) 
```

这当然和写法一样：

```
JIL_LIST   := $(shell ls *.type) 
```

这适用于 GNU make，但既然你提到了 Linux，我想你正在使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:46:54.550

帕特得到了一些有用的东西的核心，但在你的情况下，你可能想要更像

```
JIL_LIST := $(wildcard *.type) 
```

这消除了对外部程序的调用，如果您将来决定要支持 Windows，这将很重要。此外，如果您使用 makepp，通配符函数还将捕获任何可以构建的 .type 文件，无论它们是否已经存在。

# jquery - jQuery - 根据名称选择器获取子输入

> ID：10386361
> 
> 赞同：3
> 
> 时间：2012-04-30T15:37:09.787
> 
> 标签：jquery

我有一个 onclick 事件，它正在调用一个函数，传递当前的 div：

```
<div onclick="deleteline($(this));"> 
```

在我的 deleteline 函数中，如何获取名称包含 Qty 的 $(this) 父级的子级？

在此示例中，我希望获取 ProdQ​​ty 输入框：

```
<div>
    <input id="PrdQty" type="hidden" value="1">
    <div onclick="deleteline($(this));">
</div> 
```

编辑：此页面通过 ajax 调用多次包含在另一个页面中。因此，如果我为可点击的 div 分配一个 ID，则在此代码第二次注入父级后会导致冲突。

结果，我使用了以下建议，保留了内联 onclick，并且我正在使用以下方法获取数量： sender.parent().find('input[id*="Qty"]')

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T15:43:45.770

[您可以在 jQuery ( http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/) )中为此使用 CSS 选择器

所以你的例子是：

```
$(this).siblings("input[id*='Qty']") 
```

这将返回与 $(this) 相同级别的所有输入，它们的 id 中具有“Qty”作为数组。如果您只想要第一个添加 .first() 到行尾，即：

```
$(this).siblings("input[id*='Qty']").first() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T15:40:53.073

为什么不使用 jQuery 事件 API？

```
// make it as specific as you need
$('div').click(function() {
    // do something
}); 
```

你可以使用[`.parent([selector])`](http://api.jquery.com/parent)jQuery中的函数来获取父级。在此示例中，您还可以使用该[`.prev([selector])`](http://api.jquery.com/prev)函数来获取前一个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T15:49:40.323

我更喜欢从 HTML 标记中删除 onclick，因为我喜欢以一种[平淡无奇](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)的方式编写它。我会在 div 中添加一个类名作为选择器

```
<div>
  <input id="PrdQty" type="hidden" value="1">
  <div class="divtoCheck" />
</div>

$(function(){
    $(".divtoCheck").click(function(){
         var child=$(this).parent().find("input[id*='Qty']")
        alert(child.attr("id"));
    });

}); 
```

工作样本[http://jsfiddle.net/gKnf3/10/](http://jsfiddle.net/gKnf3/10/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T15:40:16.257

```
 <div>
      <input id="PrdQty" type="hidden" value="1">
      <div id="getChild"></div>   // here I give an ID to you div.you can also  use class
   </div>

   // binding click event on #getChild div

    $('#getChild').on('click', function() {

       $(this).parent().find('input[id~="Qty"]');

    }); 
```

**或者：**

```
<div>
    <input id="PrdQty" type="hidden" value="1">
    <div onclick="deleteline(this);">
</div>

function deleteline($this) {
   $($this).parent().find('input[id~="Qty"]');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T15:43:51.137

您将需要使用jQuery 提供的[属性 contains 选择器。](http://api.jquery.com/attribute-contains-selector/)

这是我摆弄的一些代码：http: [//jsfiddle.net/luhn/RrczZ/](http://jsfiddle.net/luhn/RrczZ/)

**编辑：** 所有其他答案似乎都在使用该[属性 contains word selector](http://api.jquery.com/attribute-contains-word-selector/)，这实际上不起作用....

# vim - 在输入对话框中组合选项

> ID：10386363
> 
> 赞同：2
> 
> 时间：2012-04-30T15:37:25.467
> 
> 标签：vim, input, dialog, options

我经常使用 inputdialog 来执行命令：

```
 let n = confirm({msg} [, {choices} [, {default} [, {type}]]]) 
```

pe search numbers
if n == 1 --> pe 用 '.,' 搜索所有数字
if n == 2 --> pe 搜索所有指数数
if n == 3 --> pe 搜索所有3位数字
等

但使用这种方法，我只能选择一个论点。

Vim 中有没有一种方法可以在输入对话框中同时选择多个参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:16:31.140

您可以使用`input()`提示用户输入字符串，然后检查返回的列表：

```
let string = input( {msg}, {choices}, ... ) 
```

例如，用户可以输入`1,2,3`，您可以对该字符串进行文本比较：

```
if ( string =~ 1 )
    " do something
endif

if ( string =~ 2 )
    " do something
endif

if ( string =~ 3 )
    " do something
endif 
```

更复杂的方法（例如，如果有超过 9 个选项）可能是将字符串拆分为列表：

```
let choice_list = split( string, ',' )

for choice in choice_list
    if choice == 1
        " do something
    endif
    if choice == 2
        " do something
    endif
    if choice == 3
        " do something
    endif
endfor 
```

由于返回的字符串可以是用户决定输入的任何内容，因此您可能需要添加一些完整性检查，以确保该字符串确实是整数列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T16:18:49.293

一种变通方法，使用`input()`函数，让用户选择多个选项并将它们拆分为列表进行处理。一个例子：

将下一个函数添加到`vimrc`或类似文件：

```
func My_search()
    let my_grouped_opts = input ( "1.- Search one\n2.- Search two\n3.- Search three\n" )
    let my_list_opts = split( my_grouped_opts, '.\zs' )
    for opt in my_list_opts
        echo "Option number " opt " selected"
    endfor
endfunction 
```

叫它：

```
:call My_search() 
```

将出现您的选项：

```
1.- Search one
2.- Search two
3.- Search three 
```

像这样选择它们：

```
23 
```

该函数会将它们拆分为一个列表。

# java - 有没有办法只在没有 ANT 的 .java 文件上运行 Checkstyle？

> ID：10386364
> 
> 赞同：7
> 
> 时间：2012-04-30T15:37:26.317
> 
> 标签：java, ant, checkstyle

我正在尝试为 Checkstyle 提供任何文件类型，但忽略任何不是 .java 文件的内容。我创建了一个过滤器，但这似乎不起作用：

```
public class DotJavaFilter
    extends AutomaticBean
    implements Filter
{

    public DotJavaFilter()
        throws PatternSyntaxException
    {
    }

    public boolean accept(AuditEvent aEvent)
    {
        final String fileName = aEvent.getFileName();
        return fileName.endsWith(".java");
    }
} 
```

我想给 CS 一个文件目录，让它只处理 .java 文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T15:48:30.010

您可以像这样在命令行上运行它：

```
java -jar checkstyle-5.5-all.jar -c docs/sun_checks.xml -r /path/to/src 
```

如果您使用的是 bash，则可以打开`globstar`然后只处理 java 文件，如下所示：

```
shopt -s globstar
java -jar checkstyle-5.5-all.jar -c docs/sun_checks.xml -r /path/to/src/**/*.java 
```

Checkstyle 命令行文档在[这里](http://checkstyle.sourceforge.net/cmdline.html)。

* * *

**更新：使用抑制过滤器**

创建一个抑制文件以忽略对类文件的所有检查。您也可以为您不感兴趣的其他文件类型添加正则表达式。

**抑制.xml：**

```
<suppressions>
    <suppress checks="." files=".*\.class"/>
</suppressions> 
```

将抑制过滤器添加到您的检查文件中：

**my_checks.xml：**

```
<module name="SuppressionFilter">
    <property name="file" value="suppressions.xml"/>
</module> 
```

运行：

```
java -jar checkstyle-5.5-all.jar -c my_checks.xml -r /path/to/src 
```

可以在[此处](http://checkstyle.sourceforge.net/config.html)找到有关抑制过滤器的文档。

# c# - 矩阵翻译如何工作？

> ID：10386366
> 
> 赞同：0
> 
> 时间：2012-04-30T15:37:29.967
> 
> 标签：c#, vector, matrix, point

我正在玩`System.Drawing.Drawing2D.Matrix`并且很难弄清楚如何通过指定的向量移动一个点。例如，我想用一个向量`Matrix`来移动一个点，以便在转换后该点具有坐标。但是以下代码似乎不起作用，该点仍然具有原点坐标（我可能在这里遗漏了一些基本的东西）：`(1,1)``(2,2)``(3,3)`

```
var point = new PointF(1F, 1F);
var matrix = new Matrix();
matrix.Translate(2F,2F);            
matrix.TransformPoints(new[]{point}); 
```

谁能解释正确的转换是什么样的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:52:00.993

那是因为您将一个新对象传递给`TransformPoints`，最终会丢失。

尝试将您的代码更改为

```
var point = new PointF(1F, 1F);
var matrix = new Matrix();
matrix.Translate(2F,2F);         
PointF[] aPoints = { point };   
matrix.TransformPoints(aPoints);

point = aPoints[0]; 
```

注意最后一行的变化。

# cocoa - 如何在仍然使用 NSArrayController 的同时直接响应 NSTableView 编辑？

> ID：10386370
> 
> 赞同：1
> 
> 时间：2012-04-30T15:37:53.483
> 
> 标签：cocoa, nstableview, cocoa-bindings

在我的 Cocoa 应用程序中，我有一个单列的工作表，其中`NSTableView`列出了目录中的一堆文件（该应用程序会备份它的主数据库，将这个列表提供给用户，以便他们可以恢复到特定的备份）。内容由 加载并提供给表格视图`NSArrayController`，每个对象只是一个`NSFileWrapper`（我正在考虑改用 NSURL，但我离题了）。NSArrayController 处理排序，当通过绑定选择一行时启用按钮，这一切都很棒。我有一个`NSWindowController`子类对象 ( `BackupsSheetController`) 将所有这些连接起来并存在于工作表的笔尖中。

`BackupsSheetController`但是，当用户编辑其中一个单元格时，我想通过适当地重新命名由该单元格表示的文件并将其放在新位置来响应该更改。由于表格视图绑定到 NSArrayController，我没有收到`NSTableViewDataSource`消息`– tableView:setObjectValue:forTableColumn:row:`。如果我将 BackupsSheetController 设置为 nib 中 NSTableView 对象的数据源，我*有时会*收到该消息，但不是很频繁，更不用说每次了。

我在该场景中看到的大多数问题和示例都通过对其表视图中的项目使用自定义模型类来处理这一切，并使某些控制器对象成为更改他们希望响应的属性的观察者。换句话说，每个项目都类似于一个 BackupNode 对象，BackupsSheetController 将观察每个项目的`name`属性更改（或者我称之为的任何内容）。对于我的场景来说，这似乎完全是矫枉过正，但我​​也不想放弃我已经使用的绑定，而且我看不到另一种方法来做到这一点。有没有另一种方法可以做到这一点，以确保我可靠地收到`setObject:...`消息？或者我应该删除 NSArrayController 并使 BackupsSheetController 成为表的委托和数据源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T00:08:36.170

在“BackupNode”场景中，我不明白为什么`BackupsSheetController`会观察每个名称的变化。这是一种非常迂回的做事方式。我认为假设的`BackupNode`对象只会在其设置器中为`name`属性做必要的工作。

无论如何，我建议使用适当的模型对象。`NSFileWrapper`当您尝试仅使用、`NSURL`或等 Cocoa 提供的对象来构建模型时`NSMutableDictionary`，从长远来看，您最终会比仅制作正确的模型对象做更多的工作。

关于切线话题，为什么您的窗口控制器在NIB中？它应该是加载（并拥有）NIB 的东西，这当然要求它在加载 NIB 之前存在，这意味着它不能在 NIB 中实例化。

# node.js - 使用骨干网和 node.js 进行 CSRF 防御

> ID：10386373
> 
> 赞同：1
> 
> 时间：2012-04-30T15:38:00.390
> 
> 标签：node.js, backbone.js, csrf

我正在使用骨干网和 node.js 创建一个网站，并且不认为默认情况下有任何针对 CSRF 的保护。将骨干与 node.js 一起使用时，是否有针对 CSRF 进行投影的标准方法？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T15:40:20.860

您可以简单地确保请求的`X-Requested-By`标头具有 value `XMLHTTPRequest`。AJAX 请求具有跨域限制，因此如果该标头存在，则它不是例如恶意网站上的隐藏表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T01:18:19.487

我不知道任何特定于 node.js + 骨干网的东西，但您可以使用[http://www.senchalabs.org/connect/middleware-csrf.html](http://www.senchalabs.org/connect/middleware-csrf.html)（假设您使用的是 express 或与连接兼容的东西）。您需要在 html 中的某处输出令牌，例如作为元标记。然后，您可以修改主干同步方法以提取该令牌并通过标头、查询或表单将其传递给 express。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T07:09:34.700

如果`Allow-Origin`标头设置为允许的内容（例如，`Allow-Origin:*`）`X-Requested-By`将不会阻止请求伪造。在另一台主机上运行的任何 javascript 都将能够制作仍然启用请求伪造的请求。

# php - 如何让 PHP 解析控制字符？

> ID：10386374
> 
> 赞同：1
> 
> 时间：2012-04-30T15:38:04.867
> 
> 标签：php

我有一个 PHP 站点和一个运行以更新该站点的数据库的 cron 作业。cron 读取由第三方上传的 CSV 文件。最近这个 cron 作业停止正常工作。经过一番调查，我发现问题出在 CSV 文件中。问题是 CSV 中的换行符已从标准的“\n”更改为旧的 ASCII“^M”，而 PHP 似乎没有将其识别为新行，因此没有将 CSV 视为多行，它将其视为一行信息。我只能在命令行文本应用程序 less 和 vim 中看到这种差异。有谁知道让 PHP 识别这些换行符的方法？

举个例子，不正确的 CSV 文件在 vim 中看起来与此类似：

```
Heading 1,Heading 2,Heading 3,^MInfo 1-1,Info 1-2,Info 1-3,^MInfo 2-1,Info 2-2,Info 2-3,^M^M 
```

而旧的（正确的）版本在 vim 中显示如下：

```
Heading 1,Heading 2,Heading 3,
Info 1-1,Info 1-2,Info 1-3,
Info 2-1,Info 2-2.Info 2-3, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:41:13.370

适当地设置[`auto_detect_line_endings`](http://ca2.php.net/manual/en/filesystem.configuration.php#ini.auto-detect-line-endings)选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:42:14.200

您不能更改代码以查找 ^M 或将 ^M 替换为 \n 吗？

```
str_replace("^M", "\n", $input); 
```

# sencha-touch - 如何更改 Ext.Msg.confirm 和 Ext.Msg.alert 的背景颜色？

> ID：10386381
> 
> 赞同：0
> 
> 时间：2012-04-30T15:38:23.780
> 
> 标签：sencha-touch

我正在尝试更改 Ext.Msg.confirm 或 Ext.Msg.alert 的背景颜色，但我无法更改，请帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:43:45.913

是的。可以通过更改文件`sencha-touch.css`中的。`resources/css-debug/sencha-touch.css`

看这条线，

```
/* line 25, ../themes/stylesheets/sencha-touch/default/widgets/_msgbox.scss */
.x-msgbox .x-body {
  background: transparent !important;
} 
```

您可以在此处添加自定义样式。

# c++ - 使用基本矩阵使用 OpenCV 计算坐标平移

> ID：10386382
> 
> 赞同：5
> 
> 时间：2012-04-30T15:38:27.710
> 
> 标签：c++, opencv, computer-vision, linear-algebra

我正在尝试计算两个图像之间几个点的坐标对应关系。我有一组已知对应关系的点，我将它们与 OpenCV 一起使用`findFundamentalMatrix()`以找到基本矩阵。我验证`x^T * F * x' = (0)`了每一点，结果总是正确或非常接近。

问题是，现在我想使用第一张图像上的点坐标 ( `y`) 和基本矩阵 ( `F`) 来找到第二张图像 ( `y'`) 上的点坐标。我首先想到的是简单地使用上面的方程，但只给出`z`点的`y'`，可以有[无限的解](https://math.stackexchange.com/questions/136888/matrix-equation "math.stackexchange 上的矩阵方程")。

我还能如何使用基本矩阵来计算翻译？

更清楚地说：知道“链接”两个投影的基本矩阵，我如何使用它将任何已知点的坐标`(a, b, 1)`从第一个投影转换为第二个投影？

考虑到我们知道`a`，`b`并且`F`在这个等式中： (a', b", 1) ^T * F * (a, b, 1) = (0)

我做了一个简单的绘图作为例子：http: [//i.imgur.com/drNr2.jpg](https://i.imgur.com/drNr2.jpg)。这个想法是在投影 2 中找到红点的坐标`(xq, yq)`，考虑到我们知道它在投影 1 中的坐标以及两个投影中所有其他点的坐标（以及其他一些作为找到基本矩阵的算法实际上需要至少 8 分）

另一个精度：在我的例子中，已知点是共面的，但研究点不一定是共面的。

我希望这让我的问题更清楚:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:57:25.347

基本矩阵将点从一个图像转换为另一个图像中的线。你能详细说明一下吗

> 我还能如何使用基本矩阵来计算翻译？

请。用一个例子告诉我们你想要实现的目标也许也会有所帮助。

**编辑**：如果您已经校准了相机，您可以`E`从基本矩阵 计算基本矩阵`F`。E 将一个图像中的一个点转换为另一个图像中的一个点。但当然，要求是要有内部矩阵。如果`K`是内部矩阵`E=transpose(K)FK`。另一种方法是在另一幅图像中找到一个点的对应线，然后沿着这条线搜索在外观上与第一幅图像中该点周围的补丁最相似的补丁。还有其他一些方法，但确实需要有关该问题的更多信息来判断哪种方法适合您的情况。

**编辑2**：在图中你得到的点是共面的。因此，单应性映射了两幅图像之间的点位置，不需要找到基本矩阵。OpenCV有一个估计单应性的功能，只需要四个点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-20T02:09:54.723

**鉴于：**

图 1 中的点对应***a***。

**目标：**

在图 2 中找到位于所谓的*极线上*的对应点***b***。 *`L`*

 ***如何？**

```
 | x0 |       | x1 |
a = | y0 | , b = | y1 |
    | 1  |       | 1  | 
```

`L = F * a`

```
 |F00 F01 F02|
F = |F10 F11 F12|
    |F20 F21 F22| 
```

必须满足以下等式才能获得图 2 中的***b***：

`a' * F * b = 0`.

*注意：* `a' = transpose(a)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-28T03:01:11.463

出于某种原因，由于缺乏声誉，我无法添加评论。我已经研究这个领域大约一个月了，希望我能回答许多在我研究这个主题时也让我感到困惑的悬而未决的问题。

@M2X 基本矩阵是从图像平面 1 中的一个点到图像平面 2 中的一条线的映射。这些线是一种特殊类型的线，称为核线，由图像平面和由2 个摄像机的原点和 3D 点。因此，除非您有一些额外的信息或约束，否则不可能使用基本矩阵来确定点对点映射。

@Jukurrpa 单应性是点对点映射，使得平行线映射到平行线。可以证明这个映射是线性的，那么由于线性映射一个等价于矩阵，单应性可以由一个矩阵来定义。位于投影到图像平面的平面上的一组 3D 点将平行线映射到平行线，因此单应性将适用于您的情况。书中概述了从给定的一组点估计单应性的方法（计算机视觉中的多视图几何）。给定两个图像中的对应点，您可以使用迭代方法（梯度下降）或封闭形式解决方案（奇异值分解）找到单应性。*

# c# - 从 WCF 服务返回服务器端类

> ID：10386384
> 
> 赞同：1
> 
> 时间：2012-04-30T15:38:32.780
> 
> 标签：c#, wcf, silverlight

我认为这是我遇到的一个奇怪问题，我在服务器端定义了一些类，然后我通过服务引用对其进行引用，其中两个正在按应有的方式工作。我已经从服务接口中指定了已知类型：

```
[ServiceKnownType(typeof(Obj))]
[ServiceKnownType(typeof(DigitalObject))]
[ServiceKnownType(typeof(AnalogueObject))]
[ServiceKnownType(typeof(AttributeType))]
[ServiceKnownType(typeof(AttributeData))] 
```

然后，从 silverlight 应用程序中，我通过以下方式引用该类：

```
private ServiceReference.AttributeData commonData = new ServiceReference.AttributeData(); 
```

这工作正常，但是我对另一个类做同样的事情，唯一的区别是类命名`AnalogueObject`和`DigitalObject`派生自 type 类`Obj`。你知道发生了什么吗？命名空间都是一样的，我已经重建了 Web 解决方案并更新了服务引用。

示例类：

```
using System.ComponentModel;

namespace CapCon2
{
    public class Obj : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;    
        private string _Description;  
        public string ID { get; set; }    
        public string Description
        {
            get { return _Description; }
            set
            {
                _Description = value;
                NotifyPropertyChanged("Description");
            }
        }    
        public void NotifyPropertyChanged(string name)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(name));
            }
        }
    }
}

    public class AttributeData : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private string _Description;

    public string ID { get; set; }

    public string Description 
    {
        get { return _Description; }
        set 
        {
            _Description = value;
            NotifyPropertyChanged("Description");
        }
    }

    public string Attribute { get; set; }

    public string DataType { get; set; }

    public string Input_InputSource { get; set; }

    public string Output_OutputDest { get; set; }

    public void NotifyPropertyChanged(string name)
    {
        if (PropertyChanged!= null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(name));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:43:22.107

如果您要在服务器和客户端之间传递一个复杂类型，那么您应该用`DataContract`属性标记它并用`DataMember`. 这将告诉 .NET 序列化对象并将其传递到 SOAP 消息中。

# multithreading - 如何防止CXF客户端服务死锁？

> ID：10386385
> 
> 赞同：2
> 
> 时间：2012-04-30T15:38:33.887
> 
> 标签：multithreading, cxf, deadlock

我正在开发 CXF 客户端服务，但负载测试（1000 个并发用户）会导致大量线程锁定和 JVM 崩溃。线程似乎被锁定在 Jaxb 类 AccessorInjector 上：

```
com/sun/xml/bind/v2/runtime/reflect/opt/AccessorInjector@341F3D78/341F3D84 
```

我的客户是一个由 servlet 调用的单例。客户端像这样调用网络服务：

HttpServlet：

```
SRecherche srech = SRecherche .getInstance();
String reponse = srech.recherche(parametres, retour); 
```

客户服务 ：

```
public static SRecherche getInstance() {
        synchronized (SRecherche .class) {
            if (instance == null) {
                instance = new SRecherche();
            }
        }
        return instance;
    }

.
.
.
.

public String recherche(String parametres, String retour[]) {

    SampleSOAPService sampleSOAPService = new SampleSOAPService(ClassLoader.getSystemResource("service.wsdl"));
    SampleSOAP s = sampleSOAPService .getService();
    ((BindingProvider) s).getRequestContext().put("thread.local.request.context", "true");
    // set the username and password
    ((BindingProvider) s).getRequestContext().put(BindingProvider.USERNAME_PROPERTY, username);
    ((BindingProvider) s).getRequestContext().put(BindingProvider.PASSWORD_PROPERTY, password);
    //set timeout to be longer
    Client client = ClientProxy.getClient(s);
    HTTPConduit http = (HTTPConduit) client.getConduit();
    HTTPClientPolicy httpClientPolicy = new HTTPClientPolicy();
    httpClientPolicy.setConnectionTimeout(timeout);
    httpClientPolicy.setAllowChunking(false);
    httpClientPolicy.setReceiveTimeout(timeout);
    httpClientPolicy.setConnection(ConnectionType.CLOSE);
    http.setClient(httpClientPolicy);
.
.
.

    s.callService(...);
.
.
} 
```

我正在开发 weblogic 9.2/Java 5.0/CXF 2.5

您是否知道该客户端的同时调用有多少可能导致线程锁定？

JDK版本：

```
J2RE 5.0 IBM J9 2.3 AIX ppc-32 build j9vmap3223-20081129 
```

JVM参数：

```
-Xjcl:jclscar_23
-Dcom.ibm.oti.vm.bootstrap.library.path=/usr/java5/jre/bin
-Dsun.boot.library.path=/usr/java5/jre/bin
-Djava.library.path=/usr/java5/jre/bin:/usr/java5/jre/bin:/usr/java5/jre/bin/classic:/usr/java5/jre/bin:/exec/products/weblogic/v9.2/bea/patch_weblogic921/profiles/default/native:/exec/products/weblogic/v9.2/server/native/aix/ppc:/usr/java5/jre/bin/j9vm:/usr/lib
-Djava.home=/usr/java5/jre
-Djava.ext.dirs=/usr/java5/jre/lib/ext
-Duser.dir=/exec/products/weblogic/v9.2/user_projects/domains/rforce
_j2se_j9=70912 0xF12ACF08
vfprintf 0x300017A4
-Xms2048m
-Xmx2048m
-Dcom.sun.xml.namespace.QName.useCompatibleSerialVersionUID=1.0
-da
-Dplatform.home=/exec/products/weblogic/v9.2
-Dwls.home=/exec/products/weblogic/v9.2/server
-Dwli.home=/exec/products/weblogic/v9.2/integration
-Dweblogic.management.discover=true
-Dwlw.iterativeDev=false
-Dwlw.testConsole=false
-Dwlw.logErrorsToConsole=
-Dweblogic.ext.dirs=/exec/products/weblogic/v9.2/bea/patch_weblogic921/profiles/default/sysext_manifest_classpath
-Dcom.wily.introscope.agentProfile=/exec/products/weblogic/introscope/wily/IntroscopeAgent_prod.profile
-javaagent:/exec/products/weblogic/introscope/wily/Agent.jar
-Dcom.wily.introscope.agent.agentName=RFORCE
-Dweblogic.Name=RForceServer
-Djava.security.policy=/exec/products/weblogic/v9.2/server/lib/weblogic.policy
-Dinvokedviajava
-Djava.class.path=/exec/products/weblogic/v9.2/server/lib/geronimo-ws-metadata_2.0_spec-1.1.3.jar:/exec/products/weblogic/v9.2/user_projects/domains/rforce/config/rforce/:/exec/products/weblogic/v9.2/user_projects/domains/rforce/config/rforce/wsdl/drakkar/:/usr/java5/lib/tools.jar:/exec/products/weblogic/v9.2/server/lib/weblogic_sp.jar:/exec/products/weblogic/v9.2/server/lib/weblogic.jar:/exec/products/weblogic/v9.2/server/lib/webservices.jar::/exec/products/weblogic/v9.2/common/eval/pointbase/lib/pbclient51.jar:/exec/products/weblogic/v9.2/server/lib/xqrl.jar::
vfprintf
_port_library 0xF12AC748
-Xdump 
```

谢谢，西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:22:14.523

快速浏览一下，因为您几乎手动执行所有操作（即处理所有连接等），所以我唯一可以推荐的就是在您的公共 String recherche(String parametres, String retour[] ） 执行。

将您在那里的所有代码包装在一个匿名可运行或 Thread 实例中并启动它。该线程将处理所有对客户端的处理和响应，让 recherche() 方法可以自由地进行另一个调用。

只是一个想法。

同样以仅供参考的方式，您上面描述的客户端实际上是 Servlet，因为它正在调用服务。或者换句话说，看起来 Servlet 是消费者，而单例是提供者。

# c#-4.0 - 如何将智能感知添加到我的应用程序中

> ID：10386388
> 
> 赞同：-1
> 
> 时间：2012-04-30T15:38:41.013
> 
> 标签：c#-4.0, vb6

我打算构建一个具有自动完整文本等功能的应用程序（例如 Google 搜索使用自动文本），我了解到它是使用 inensetellis（微软的 .dll 工具）完成的。谁能告诉我如何在我的应用程序中包含这样的功能。谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-30T16:24:12.803

WinForms 控件支持自动完成源对象的自动完成。请参阅[`TextBox.AutoCompleteSource`](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.autocompletesource.aspx)和关联的属性。

# c# - 如何从 Linq2Sql DataContext 获取 SPID？

> ID：10386390
> 
> 赞同：0
> 
> 时间：2012-04-30T15:38:43.930
> 
> 标签：c#, .net, sql-server, linq-to-sql

对[类似问题](https://stackoverflow.com/questions/3423344/spid-of-a-sqlconnection-sql-server-in-ado-net)的回答建议`select @@SPID`通过 SqlConnection 对象进行操作，但有没有办法从 Linq2Sql DataContext 对象本身获取 SPID？

# video - 如何使用 FFMPEG 将 MP4 视频文件转换为 F4V

> ID：10386391
> 
> 赞同：3
> 
> 时间：2012-04-30T15:38:45.027
> 
> 标签：video, ffmpeg, streaming, mp4

我正在尝试将 MP4 视频文件转换为 f4v 视频文件，以便我可以使用 Flash Media Server 流式传输视频。理想情况下，我想将 mp4 转换成各种比特率，这样我就可以完成视频的多比特率流。我很确定 ffmpeg 能够做到这一点，但我不断收到不同的错误消息。这是我尝试过的最新版本：

```
ffmpeg.exe -i source.mp4 -ar 150 destination.f4v 
```

我收到以下错误消息：“无法为'destination.mp4'destination.mp4找到合适的输出格式：无效参数

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T02:46:28.650

几点注意事项：

1.  MP4 文件已经适合流式传输，前提是它包含用于视频的 H.264 和用于音频的 AAC。source.mp4 已经是 H.264/AAC 了吗？如果是这样，则无需转码为 F4V。说到F4V...
2.  F4V 只是一个带有 H.264 视频和 AAC 音频的 MP4 文件。它恰好有 Adob​​e 为 Flash 视频建议的文件扩展名。没什么特别的。
3.  '-ar 150' 几乎肯定不是你想要的——这意味着 150 Hz。CD 质量的音频为 44100 Hz。您的意思是“-ab”来设置音频比特率吗？请注意，以比特/秒表示，150 仍然太低。
4.  您是否直接复制并粘贴错误消息？因为您在错误提及“destination.mp4”时指定了“destination.f4v”的输出。我无法解释这种差异。也许用完整的错误输出修改问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T08:56:06.327

首先，.f4v 不是 F4V 视频格式的官方扩展名，至少在 ffmpeg 看来。

如果您想流式传输 mp4 文件，Flash 播放器的某些实现将允许您查找尚未下载的位置。正常的解决方案是在 f4v 容器中转换（实际上只是重新打包）这些文件。

要转换为与流媒体兼容的 f4v，您需要使用 FLV 元数据注入器，例如 Yamdi (http://yamdi.sourceforge.net/)

您可以采取的步骤：

```
ffmpeg.exe -i source.mp4 -vcodec copy -acodec copy destination.flv 
```

这会将视频和音频直接重新打包到 flv 文件中。如果您的输入是 H.264，FFMPEG 将自动使用 f4v 格式。

```
yamdi -i destination.flv -o destination.f4v 
```

插入元数据后，您的 f4v 文件现在可以进行流式传输了。如果省略最后一步，则只能导航到已下载文件的部分。

仅供参考，如果您可以支持可变比特率，请使用 -crf 选项。两次编码将使 ua 比特率接近您指定的比特率，但需要两倍的时间。恒定速率因子虽然会给 ua 带来恒定的质量，但您可能必须测试不同的值（对于不可察觉的损失来说是理智的：18 - 24）才能获得您想要的比特率。

# windows-phone-7 - 有什么方法可以查明来电屏幕是否显示在我的应用程序上？

> ID：10386394
> 
> 赞同：1
> 
> 时间：2012-04-30T15:39:23.213
> 
> 标签：windows-phone-7

有什么方法可以查明我的应用程序上是否显示来电屏幕？事实上，虽然我们不会接受调用 - 应用程序不会被停用，那么是否有任何 API 方法或一些解决方法，如屏幕截图和按像素验证？:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:49:46.003

您可以使用此处所述的 RootFrame.Obscured 事件来判断用户是否正在接收来电：http: [//www.wintellect.com/CS/blogs/jprosise/archive/2011/02/11/silverlight-for- windows-phone-programming-tip-6.aspx](http://www.wintellect.com/CS/blogs/jprosise/archive/2011/02/11/silverlight-for-windows-phone-programming-tip-6.aspx)

# objective-c - Aperture 插件因 EXC_BAD_ACCESS 而崩溃

> ID：10386395
> 
> 赞同：6
> 
> 时间：2012-04-30T15:39:23.437
> 
> 标签：objective-c, xcode, plugins

我尝试运行**Aperture SDK 2.1**附带的**SampleFTPExportPlugIn**。我不得不调整 Base SDK 设置并手动将 PluginManager.Framework 文件夹复制到 /Library/Frameworks，如此[处](http://blog.richsomerfield.com/?p=160)所述。

 **所有编译和**Aperture 3.2.3**现在提供菜单项 File/Export/FTP。

When selecting the "FTP" export method and thus triggering the plug-in code, Aperture crashes with a EXC_BAD_ACCESS. 当试图获取对的引用时，非法内存访问发生在`**initWithAPIManager**`类的方法中：`SampleFTPExportPlugIn``ApertureExportManager`

```
 _exportManager = [[_apiManager apiForProtocol:@protocol(ApertureExportManager)] retain]; 
```

这是 Aperture 将控制权交给插件后执行的第二行，似乎是`ApertureExportManager`在任何 Aperture 插件中获取对任何地方）。

这里是堆栈跟踪：

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: 0x000000000000000d, 0x0000000000000000

VM Regions Near 0:
--> 
    __TEXT                 0000000100000000-0000000100798000 [ 7776K] r-x/rwx SM=COW  /Applications/Aperture.app/Contents/MacOS/Aperture

Application Specific Information:
objc_msgSend() selector name: class
objc[3000]: garbage collection is OFF
Performing @selector(a_exportPlugIn:) from sender NSMenuItem 0x111d2a540

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libobjc.A.dylib                 0x00007fff8711c090 objc_msgSend_vtable2 + 16
1   com.apple.CoreFoundation        0x00007fff8381e25f -[__NSCFString isEqualToString:] + 63
2   com.apple.PluginManager         0x0000000101211218 -[PROBundleHandler apiForProtocol:] + 109
3   com.apple.CoreFoundation        0x00007fff83852f4c __invoking___ + 140
4   com.apple.CoreFoundation        0x00007fff83852de4 -[NSInvocation invoke] + 132
5   com.apple.CoreFoundation        0x00007fff83852fb4 -[NSInvocation invokeWithTarget:] + 52
6   com.apple.CoreFoundation        0x00007fff8384dff4 ___forwarding___ + 756
7   com.apple.CoreFoundation        0x00007fff8384dc88 _CF_forwarding_prep_0 + 232
8   com.apple.SampleFTPExportPlugIn 0x000000012c0d5361 -[SampleFTPExportPlugIn initWithAPIManager:] + 209
9   com.apple.PluginManager         0x000000010120c6fa -[PROConcretePlugIn plugInInstance] + 212 
```

我阅读了有关 Objective-C 内存管理的所有内容，但无法理解它。我在网上找到的所有其他示例都是这样实现的，所以我想我有一个兼容性问题，我的 Aperture / Library 安装中缺少一些东西。如何缩小问题范围？

**编辑：**

问题似乎与传入的 apiManager 有关。方法签名是：

```
 - (id)initWithAPIManager:(id<PROAPIAccessing>)apiManager 
```

然后将该参数分配给我们的内部引用：

```
 _apiManager = apiManager; 
```

然而，传入的实际类是`PROPlugInFirewall`，因为这个输出很有趣：

```
 NSLog(@"_apiManager class is: %@", [[_apiManager class] description]); 
```

然后调用`respondsToSelector`导致同样的崩溃虽然这个方法是从 NSObject 继承的。

```
 if ( [_apiManager respondsToSelector:@selector(apiForProtocol:)] ) {
        NSLog(@"responds");
    } 
```

_apiManager 本身将自己描述为：

```
 _apiManager is: <[*<PROBundleHandler: 0x14d79130> (PROAPIAccessing)*]> 
```

还是卡住了...

**编辑：**

所以看起来 Aperture 正在传递一个指向涅槃的指针......但是，我刚刚从 Apple 网页安装了另一个插件，其中包含安装程序和所有内容。那个在调用时也失败了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:59:21.933

*   下载 FXPlug 1.2.5 SDK
*   打开安装包的内容
*   将 PluginManager.framework 复制到 /Library/Frameworks

您的插件现在应该可以工作了！

FXPlug SDK(2.2/2.4) 中较新版本的 PluginManager.framework 将导致此崩溃。

使用 Xcode 4.5 在 10.8 上测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T01:02:13.750

我发现上面 Justin 的回答在需要为 Aperture 3.4 构建时对我不起作用，因为它需要 FXPlug 1.x 版本不支持的 x86_64 架构。

在尝试了各种版本的 PluginManager 框架后，我发现[这里可用](http://qvenon.com/files/PluginManager.zip)的版本不会导致上述崩溃，并且还包含有效的 64 位架构。只需将 /Library/Frameworks/PluginManager.framework/Versions/B 的内容替换为链接存档的内容即可。**

# javascript - jquery .find() 不工作

> ID：10386396
> 
> 赞同：1
> 
> 时间：2012-04-30T15:39:26.740
> 
> 标签：javascript, jquery

当我单击按钮时，此代码应清除复选框。如果我删除`<form></form>` 标签，它会起作用，但我认为`.find()`应该找到所有后代？

```
<script type="text/javascript">
$(document).ready(function(){

      var clearCheckboxes = function() {    
        $('.outerbox').find('input').each(function() {
          $(this).attr('checked', false);
        });
      }

      $('input.myButton').click(clearCheckboxes);
});
</script>

<div class="outerbox">    
  <form>
    <input type="checkbox" checked="" /> checkbox1
    <input type="checkbox" checked="" /> checkbox2
  </form>    
</div>
<input class="myButton" value="clear checkboxes now" type="button"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:43:55.493

这段代码对我来说很好：http: [//jsfiddle.net/CgsEu/](http://jsfiddle.net/CgsEu/)

无论如何，如果您使用的是最新的 jQuery，请尝试更改`.attr`为`.prop`. `.each`也不需要 。`.attr`并`.prop`处理 jQuery 对象中的所有元素。

```
var clearCheckboxes = function() {    
    $('.outerbox').find('input').prop('checked', false)
} 
```

演示：http: [//jsfiddle.net/CgsEu/1/](http://jsfiddle.net/CgsEu/1/)

如果还有其他输入，请尝试将其限制`.find`为复选框。

```
var clearCheckboxes = function() {    
    $('.outerbox').find('input:checkbox').prop('checked', false)
} 
```

演示：http: [//jsfiddle.net/CgsEu/2/](http://jsfiddle.net/CgsEu/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:42:41.463

没有必要使用 each()，你已经有一个元素的集合，并且可以将更改应用于所有元素，如下所示：

```
var clearCheckboxes = function() {    
    $('input', '.outerbox').attr('checked', false);
}

$('input.myButton').click(clearCheckboxes); 
```

[小提琴](http://jsfiddle.net/adeneo/SVBHP/1/)

有很多建议使用 prop() 而不是 attr()，这可能是合理的建议。

> 根据 W3C 表单规范，checked 属性是一个布尔属性，这意味着如果该属性完全存在，则相应的属性为真——即使该属性没有值或空字符串值也是如此。确定是否选中复选框的首选跨浏览器兼容方法是使用以下方法之一检查元素属性上的“真实”值：
> 
> if ( elem.checked )
> 
> if ( $(elem).prop("checked") )
> 
> if ( $(elem).is(":checked") )
> 
> 为了保持向后兼容性，jQuery 1.6.1+ 中的 .attr() 方法将为您检索和更新属性，因此不需要将布尔属性的代码更改为 .prop()。然而，检索检查值的首选方法是 prop()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T15:43:32.870

```
$(document).ready(function(){
  var clearCheckboxes = function() {    
      $('.outerbox').find('input[type="checkbox"]').each(function(){
          $(this).prop('checked', false);
      });
  }

  $('input.myButton').click(clearCheckboxes);
});​ 
```

[**演示。**](http://jsfiddle.net/heera/swTkx/)

**更新：**

```
$('.outerbox').find('input[type="checkbox"]').prop('checked', false); 
```

或者

```
$('.outerbox input:checkbox').prop('checked', false); 
```

[**演示。**](http://jsfiddle.net/heera/swTkx/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T15:45:31.047

使用道具，例如

```
$(this).prop('checked', false); 
```

相反，如果`attr`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T15:50:15.050

```
var clearCheckboxes = function() {    
  $('input[type="checkbox"]', '.outerbox').prop('checked', false);
}

$('input.myButton').click(clearCheckboxes); 
```

# ruby-on-rails - :Rspec 中的认证方法

> ID：10386403
> 
> 赞同：1
> 
> 时间：2012-04-30T15:39:43.170
> 
> 标签：ruby-on-rails, rspec, railstutorial.org

我目前正在关注 Michael Hartl 关于 RoR 的教程，并试图更多地掌握 Rspec 测试。我能够了解正在发生的大部分事情，但是我对 :authenticate 方法的功能和功能有点困惑：

```
it { should respond_to(:authenticate) } 
```

以及它与以下代码部分的关系：

```
 describe "return value of authenticate" do
  before { @user.save }
    let(:found_user) { User.find_by_email(@user.email) }

  describe "with valid password" do
    it { should == found_user.authenticate(@user.password) }
  end

  describe "with invalid password" do
    let(:user_for_invalid_password) { found_user.authenticate("invalid") }

    it { should_not == user_for_invalid_password }
    specify { user_for_invalid_password.should be_false }
  end
end 
```

我理解使用 let 和相应的块分配变量，但我很难理解调用 authenticate 方法时发生了什么，它在初始行中对什么进行身份验证？它是针对需要存在电子邮件并且匹配特定正则表达式的 user.rb 模型进行身份验证，还是其他东西。为了清楚起见，我包含了 user.rb 代码：

```
class User < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation
  has_secure_password

  before_save { |user| user.email = email.downcase }

  validates :name, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
        uniqueness: { case_sensitive: false }
  validates :password, length: { minimum: 6 }
  validates :password_confirmation, presence: true

end 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T17:02:30.740

如果没有行号，我可能会误解您指的是哪一行，但这里有。您使用“respond_to”方法引用的第一行代码只是询问对象它的接口是否处理您要求它响应的任何内容。我认为有一点遗漏——应该是：`obj.should respond_to(:somemethod)` 它只是检查对象是否有一个具有该名称的方法——所以这是一个相当基本的测试。

关于调用 authenticate 方法时发生了什么的问题可能是因为您在 user.rb 中看不到 authenticate 方法。在旧版本的 Hartl 教程中，有一个验证方法（我的机器上还有它：）

```
def self.authenticate(email, submitted_password)
 user = find_by_email(email)
 return nil if user.nil?
 return user if user.has_password?(submitted_password)
end 
```

看看它在你的代码中被调用的方式很明显，它在辅助方法或其他东西中的实现略有不同......看到你的模型中对'has_secure_password'的调用吗？这是 :authenticate 存在的辅助方法。

检查[源代码/文档](https://github.com/rails/rails/blob/master/activemodel/lib/active_model/secure_password.rb)以获取更多详细信息。

# python - 如何在python中订购我的字典？

> ID：10386404
> 
> 赞同：1
> 
> 时间：2012-04-30T15:39:47.177
> 
> 标签：python

> **可能重复：**
> [在 Python 中，如何按排序顺序遍历字典？](https://stackoverflow.com/questions/364519/in-python-how-to-i-iterate-over-a-dictionary-in-sorted-order)

我需要字典方面的帮助。我有两个字典，我想在这两个字典中添加相同键的值。我需要列出对具有相同键的值求和的列表。我做了这个列表，但是在完成所有计算后添加了它们的键是两个字典中唯一的那些值。我的意思是：

```
dectionary1= {8: 2, 0: 6, 2: 5, 3: 34}  
dectionary2= {8: 6, 1: 2, 3: 2} 
```

我的清单必须是：

```
summing= [6, 2, 5, 36, 8] 
```

因为它将取0并检查dectionary 2中是否有0，然后它将TAKE 1（NOT 2）并检查是否在dectionary 1中找到它以便对列表进行排序。

到目前为止我得到了这个：

```
summing=[8, 6, 5, 36, 2] 
```

在这里它最初需要键（8）而不是（0）！我希望它井井有条。

要查看我的代码，到目前为止我得到了什么：

```
dic1= {8: 2, 0: 6, 2: 5, 3: 34}  
dic2= {8: 6, 1: 2, 3: 2}
p=[]
for x in dic1:
    if x in dic2:
        g=dic1[x]+dic2[x]
        p=p+[g]
    else:
        p=p+[dic1[x]]
for m in dic2:
    if m in dic1:
        p=p
    else:
        p=p+[dic2[m]] 
```

我想如果我可以让字典升序排列，那会容易得多，但是怎么做呢？

我的 python 是 Wing IDE 3.2

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T15:45:09.920

您在这里有两种选择，一种是使用[`collections.OrderedDict()`](http://docs.python.org/library/collections.html#collections.OrderedDict)，但我认为更简单的选择就是这样做：

```
[dic1.get(x, 0)+dic2.get(x, 0)for x in sorted(dic1.keys() | dic2.keys())] 
```

[我们首先在任一字典中](http://docs.python.org/library/stdtypes.html#set.union)创建一组任意键，将其[排序为正确的顺序](http://docs.python.org/py3k/library/functions.html#sorted)，然后[使用列表推导循环遍历它](https://www.youtube.com/watch?v=t85uBptTDYY)，添加两个值[（如果该值不存在，则添加 0）](http://docs.python.org/py3k/library/stdtypes.html#dict.get)。

```
>>> dic1= {8: 2, 0: 6, 2: 5, 3: 34}  
>>> dic2= {8: 6, 1: 2, 3: 2}
>>> [dic1.get(x, 0)+dic2.get(x, 0)for x in sorted(dic1.keys() | dic2.keys())]
[6, 2, 5, 36, 8] 
```

请注意，这仅适用于 3.x，其中[`dict.keys()`](http://docs.python.org/py3k/library/stdtypes.html#dict.keys)返回一个[类似集合的字典视图](http://docs.python.org/py3k/library/stdtypes.html#dictionary-view-objects)。如果您想在 python 2.7.x 中执行此操作，那么在此[`dict.viewkeys()`](http://docs.python.org/library/stdtypes.html#dict.viewkeys)之前使用`set(dict.iterkeys())`会是最佳选择。

# css - CSS - 为什么我的背景颜色没有在 IE 中显示？

> ID：10386409
> 
> 赞同：0
> 
> 时间：2012-04-30T15:40:03.150
> 
> 标签：css, internet-explorer-8, background

这是我正在玩弄的一个练习网站。我没有创建主题.. 但无法弄清楚为什么背景颜色在 IE 8 中消失（我必须测试的唯一版本）？

我使用 Firebug 来尝试精确定位，在我看来它就像在看它，`.box .cnt`并且颜色已经为此设置好了。

有任何想法吗？

[http://unique-home-decor.info](http://unique-home-decor.info)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:53:58.770

`cnt`背景在那里，但是IE8不喜欢`100%`. 查看这篇文章了解更多详情： [https ://stackoverflow.com/a/176454/1220302](https://stackoverflow.com/a/176454/1220302)

此外，请在此处查看有关 height 属性的更多信息：http: [//www.w3.org/TR/CSS21/visudet.html#the-height-property](http://www.w3.org/TR/CSS21/visudet.html#the-height-property)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-13T07:46:54.520

老问题，但这可能会帮助某人，因为它解决了我的问题。

IE 版本 11 = 我的标题上没有背景颜色
Chrome/Edge = 我的标题上的背景颜色

问题在于 IE 如何处理 RGBa 渐进增强。

我原来的CSS：

```
header {
background-color: rgba(255,255,255);/*,0.80);*/
} 
```

我最初决定为标题添加不透明度并使用 RGBa 使其成为不同的颜色，但后来决定将其删除。直到我测试了不同的浏览器，我才认为 RGBa 会引起问题，所以我早就忘记了改变它。更改为：

```
header {
background-color: rgb(255,255,255);
} 
```

或者简单地说：

```
header {
background-color: #fff;
} 
```

解决了我的问题。解决方案：[https ://css-tricks.com/ie-background-rgb-bug/](https://css-tricks.com/ie-background-rgb-bug/)

# c# - 试图获得等距阴影长度的公式？

> ID：10386410
> 
> 赞同：2
> 
> 时间：2012-04-30T15:40:08.377
> 
> 标签：c#, wpf, isometric

我正在创建一个带有等距块的画布。我想做的是从积木上投下阴影。我目前有一个版本的工作，但阴影看起来比它应该长得多。我想知道是否有任何公式可以计算出如何正确投射阴影。

我想要的是阴影比高度略短。

[![至今](../Images/74b4f58c7827cbd88d2b9b5eb3de4c38.png)](https://i.stack.imgur.com/1vvzT.png)
[（来源：[net84.net](http://peterfleming.net84.net/Untitled2.png)）]

问候彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:30:34.877

公式？

它的三角函数：

光源向量是`c`三角形的边，你的块是`a`边。

```
a^2 + b^2 = c^2 
```

或者阴影的长度是`b`

```
b^2 = c^2 - a^2 
```

或者

```
b = square root of (c^2 - a^2) 
```

PS，这是基于 a 和 b 的角度为 90 度，也就是你的积木直立。否则，您需要使用 a 和 c 之间的角度，然后使用 cos、sin 和/或切线来计算 b 边的长度。我完全忘记了，但你可以在这里问：[https ://math.stackexchange.com/](https://math.stackexchange.com/)

请参阅此计算器： http: [//www.carbidedepot.com/formulas-trigright.asp](http://www.carbidedepot.com/formulas-trigright.asp)

# facebook-graph-api - 如何邀请非画布应用的朋友

> ID：10386416
> 
> 赞同：1
> 
> 时间：2012-04-30T15:40:28.813
> 
> 标签：facebook-graph-api, facebook-javascript-sdk

为了使应用程序具有病毒性，我们想使用请求邀请朋友（但它仅适用于 Canvas 应用程序

我们有非画布应用程序。使它成为病毒的最佳可用方法是什么？

[从许多 facebook 文档中，我了解到请求仅适用于画布应用程序！，不适用于网站，如果理解有误，请纠正我]

目前我们正在获取 publish_stream 权限并发送给用户的朋友（在正确获取用户同意后），但遇到 341 错误。

有没有办法让非画布应用可以邀请用户的朋友？

PS：我们不想发送apprequest（需要app Access token）。我们想代表用户邀请用户的朋友。

这里有FB的人吗？

拉克西特谢斯

# php - 如何获得朋友/关注的ID？

> ID：10386417
> 
> 赞同：0
> 
> 时间：2012-04-30T15:40:31.470
> 
> 标签：php, twitter, twitter-oauth

我写了这段代码：

```
$twitterObj->setToken($_SESSION['ot'], $_SESSION['ots']);
$twitterFriends=$twitterObj->get_friendsIds(array('screen_name' => $_SESSION['username']));
$twitterFriends->response;
echo $twitterFriends->responseText;
foreach($twitterFriends as $friend) { echo $friend->id; } 
```

但我明白了：

```
{"errors":[{"code":37,"message":"Not authorized to use this endpoint"}]} 
```

为什么 ？我怎样才能得到朋友/关注的 id ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:59:04.957

根据[这篇文章](http://code.google.com/p/twitter-api/issues/detail?id=2114)，您可能正在使用旧的 twitter API URL。您是否尝试过更新您使用的 twitter 库？

# php - OpenSSL PHP 到 JavaScript（节点）

> ID：10386421
> 
> 赞同：4
> 
> 时间：2012-04-30T15:40:42.743
> 
> 标签：php, node.js, encryption, openssl

我正在将加密脚本从 PHP 转换为 JavaScript 并且正在苦苦挣扎......

node.js[密码文档](http://nodejs.org/api/crypto.html#crypto_crypto_createcipheriv_algorithm_key_iv)如下：

> `crypto.createCipheriv(algorithm, key, iv)`
> 使用给定的算法、密钥和 iv 创建并返回一个密码对象。

[PHP openssl-encrypt](http://www.php.net/manual/de/function.openssl-encrypt.php)文档：

> `string openssl_encrypt ( string $data , string $method , string $password [, bool $raw_output = false [, string $iv = "" ]] )`

PHP 使用*密码*and 和*iv*。Node 仅在**不**使用 IV时才使用*密码*，否则您必须提供*密钥*和*iv*。

 *****当我同时使用密码*和*iv*时，如何将我的 PHP 函数转换为节点。

我也不清楚*密钥*到底代表什么......节点文档指出，如果只提供*密码，就会计算**密钥*和*iv* .. 这是 PHP 做的吗？如果是这样，当我提供*密码*和*iv*时它会做什么？它是否使用*密码*作为*密钥*？

 **** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:36:49.163

从PHP 文档中的[用户评论](http://www.php.net/manual/en/function.openssl-encrypt.php#104438)看来`$password`，PHP 中的参数实际上是加密密钥，而不是实际密码。这似乎与[OpenSSL docs](http://www.openssl.org/docs/apps/enc.html)一致，该文档声明您使用*密钥*和初始化向量，*或者*使用从算法派生出密钥和 IV 的密码，但您永远不会同时提供密码和 IV。

**例子：**

```
<?php echo openssl_encrypt('foobar', 'aes-256-cbc', 'password', false, 'abcdefghijklmnop');
// prints CUigVN+6jU24E2FdfmmmTw==

#!/bin/bash
echo -n foobar | openssl enc -aes-256-cbc -e -K 70617373776F7264 -iv 6162636465666768696A6B6C6D6E6F70 -nosalt -a
// prints CUigVN+6jU24E2FdfmmmTw== 
```

问题可能是您需要以`openssl`十六进制提供密钥和 IV。*******

# openmp - C/OpenMP - threadprivate 和指针向量的问题

> ID：10386422
> 
> 赞同：0
> 
> 时间：2012-04-30T15:40:48.093
> 
> 标签：openmp

我是并行编程和openmp世界的新手，所以这可能是一个徒劳的问题，但我真的无法对我正在经历的事情给出好的答案，所以我希望有人能够阐明就此事。

我想要实现的是为将处理以下并行部分的每个线程拥有一个动态分配的矩阵（整数）的私有副本，但是一旦执行流进入所述区域，对所谓私有矩阵的引用持有一个空值。

我不知道这个指令有什么限制吗？一维动态数组似乎一切正常。

代码片段如下...

```
#define n 10000
int **matrix;
#pragma omp threadprivate(matrix)

int main()
{

    matrix = (int**) calloc(n, sizeof(int*));
    for(i=0;i<n;i++) matrix[i] = (int*) calloc(n, sizeof(int));
    AdjacencyMatrix(n, matrix);

    ...

   /* Explicitly turn off dynamic threads */
   omp_set_dynamic(0);
   #pragma omp parallel
   {    
      // From now on, matrix is NULL... 
      executor_p(matrix, n);
   }
   .... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:48:23.040

查看[OpenMP 文档](https://computing.llnl.gov/tutorials/openMP/#THREADPRIVATE)，了解该`threadprivate`子句会发生什么：

> 首次进入并行区域时，应假定 THREADPRIVATE 变量和公共块中的数据未定义，除非在 PARALLEL 指令中指定了 COPYIN 子句

无法保证将什么值存储在`matrix`并行区域的变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T22:32:54.383

OpenMP 只能私有化具有已知存储大小的变量。也就是说，如果将数组定义为`double matrix[N][M]`. 在您的情况下，不仅存储大小未知（指针不存储它指向的元素数量），而且您的矩阵不是内存中的连续区域，而是指向动态分配行列表的指针。

您最终会得到顶级指针的私有副本，而不是矩阵数据本身的私有副本。

# java - 我们通常如何处理 Java 中的序列？

> ID：10386427
> 
> 赞同：-1
> 
> 时间：2012-04-30T15:40:54.570
> 
> 标签：java, iterator, sequence

在 C++ 中，STL 中的迭代器非常有用。我可以编写独立于容器的代码来处理序列。

但是，我发现`Iterator`Java`ListIterator`非常差。他们甚至不支持`clone()`。我认为用它们处理序列是不可能的。

做到这一点的唯一方法似乎是永远使用数组，但是当我将数组更改为`List`s 时如何重用我的代码？

* * *

处理序列就是对一个`Object`s的序列做一些算法。例如，对它们进行排序、查找最大值、删除重复项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:43:59.690

```
List<Type> list = new List<Type>
//add the elements...

for(Type t : list)
   //do you stuff with t 
```

通常，您不需要在 Java 中显式使用迭代器。此外，请小心使用 .clone()，因为它很少是最合适的解决方案。

List 本身就是一个接口，由不同的容器实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:45:13.650

我会使用 List<Type>，并避免使用 clone()，因为它并不总是按照您的想法进行。即它可以是浅的或深的，具体取决于实现。

List 是一个基础类。也许如果您举例说明您遇到的问题，我们可以为您提供帮助。

# xpath - XPath 元素编号返回所有元素而不是第一个

> ID：10386429
> 
> 赞同：2
> 
> 时间：2012-04-30T15:41:00.263
> 
> 标签：xpath, selenium

我正在使用以下代码访问链接（对于 phpunit/selenium）：

```
//td[normalize-space() ='Test title 2']/following-sibling::td[3]/a[.='delete'] 
```

在 FireFox 中使用 XPath 检查器返回 7 个元素（因为有 7 个链接匹配“测试标题 2”），但是当我`[1]`在最后添加时：

```
//td[normalize-space() ='Test title 2']/following-sibling::td[3]/a[.='delete'][1] 
```

它仍然返回 7 个链接。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T16:03:41.550

在表达式末尾添加`[1]`时，选择`a`每个子节点的第一个子节点`...td[3]`（即 7 个`a`​​子节点）。您可以将查询更改为：

```
xpath=(//td[normalize-space() ='Test title 2']/following-sibling::td[3]/a[.='delete'])[1] 
```

或者如果您使用 webdriver（不需要 xpath 前缀）：

```
(//td[normalize-space() ='Test title 2']/following-sibling::td[3]/a[.='delete'])[1] 
```

这将从元素`a`的整个`a`子集中选择第一个。`...td[3]`

有关更多教程，请参阅[XPath 示例](http://msdn.microsoft.com/en-us/library/ms256086.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:33:13.887

正如[规范](http://www.w3.org/TR/xpath/)所说：

> 位置路径与位置路径`//para[1]`的含义不同`/descendant::para[1]`。后者选择第一个后代 `para`元素；前者选择作为其父母`para`的第一个孩子的所有后代元素。`para`

所以，

```
//td[normalize-space() ='Test title 2']/following-sibling::td[3]/descendant::a[.='delete'][1] 
```

会在你的情况下做得更好。

# android - android中的USSD服务消息

> ID：10386435
> 
> 赞同：0
> 
> 时间：2012-04-30T15:41:26.270
> 
> 标签：android, ussd

是否有任何方法可以阻止来自 android 应用程序中特定中心的 ussd 消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:08:14.027

Android**不支持 USSD 服务**，因此我们无法阻止它，或者无法从 USSD 获取任何数据，或者我们无法阻止它。

# r - 在使用 R 进行 PCA 分析之前省略 NA 和数据插补

> ID：10386439
> 
> 赞同：3
> 
> 时间：2012-04-30T15:41:33.887
> 
> 标签：r, dataframe, pca, na, princomp

我正在尝试使用`princomp`R 中的函数进行 PCA 分析。

以下是示例代码：

```
mydf <- data.frame (
    A = c("NA", rnorm(10, 4, 5)), 
    B = c("NA", rnorm(9, 4, 5), "NA"),
    C =  c("NA", "NA", rnorm(8, 4, 5), "NA")
)

out <- princomp(mydf, cor = TRUE, na.action=na.exclude)

Error in cov.wt(z) : 'x' must contain finite values only 
```

我试图`NA`从数据集中删除 ，但它不起作用。

```
ndnew <- mydf[complete.cases(mydf),]

                   A                  B                C
1                  NA                 NA               NA
2    1.67558617743171   1.28714736288378               NA
3   -1.03388645096478    9.8370942023751 10.9522215389562
4    7.10494481721949   14.7686678743866 4.06560213642725
5     13.966212462717   3.92061729913733 7.12875100279949
6   -1.91566982754146  0.842774330179978 5.26042516598668
7  0.0974919570675357    5.5264365812476 6.30783046905425
8    12.7384749395121   4.72439301946042  2.9318845479507
9    13.1859349108349 -0.546676530952666 9.98938028956806
10   4.97278207223239   6.95942086859593 5.15901566720956
11  -4.10115142119221                 NA               NA 
```

即使我可以删除`NA`'s，它也可能无济于事，因为每一行或每一列都至少有一个缺失值。是否有任何 R 方法可以估算数据进行 PCA 分析？

* * *

更新：根据答案：

```
> mydf <- data.frame (A = c(NA, rnorm(10, 4, 5)), B = c(NA, rnorm(9, 4, 5), NA),
+  C =  c(NA, NA, rnorm(8, 4, 5), NA))
> out <- princomp(mydf, cor = TRUE, na.action=na.exclude)
Error in cov.wt(z) : 'x' must contain finite values only

ndnew <- mydf[complete.cases(mydf),]
out <- princomp(ndnew, cor = TRUE, na.action=na.exclude) 
```

这有效，但默认值`na.action`不起作用。

是否有任何方法可以估算数据，因为在实际数据中，我几乎每列都缺少值？这种`NA`遗漏的结果会给我〜0行或列。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T15:46:58.160

这是因为你使用了 NA 的字符版本，它真的不是 NA。

这证明了我的意思：

```
is.na("NA")
is.na(NA) 
```

我会在创建级别修复它，但这是一种修复它的方法（因为你使用了字符“NA”，它构成了整个类的列，这`character`意味着你也必须修复它`as.numeric`）：

```
FUN <- function(x) as.numeric(ifelse(x=="NA", NA, x))
mydf2 <- data.frame(apply(mydf, 2, FUN))
ndnew <- mydf[complete.cases(mydf2),]
ndnew 
```

**产生：**

```
 A                 B                 C
3    11.3349957691175  6.97143301427903 -2.13578124048775
4    5.69035783905702 -2.44999550936244 -4.40642099309301
5  -0.865878644072023  6.03782080227184  9.83402859382248
6    6.58329959845638  5.67811450593805  12.4477770011262
7   0.759928613563254  16.6445809805028  9.45835418422973
8    11.3798459951171  1.36989010500538 0.784492783538675
9   0.671542080233918   5.9024564388189  16.2389092991422
10   3.64295741533713  9.78754135462621  -2.4293697924212 
```

**编辑：================================================= ==========**

***“这有效，但默认的 na.action 不起作用”***

对 princomp 不太了解，但这有效（不知道为什么函数的 na.action 没有）：

```
out <- princomp(na.omit(mydf), cor = TRUE) 
```

***“是否有任何方法可以估算数据，因为在真实数据中我几乎每一列都缺少值？这样的 na 省略的结果会给我〜 0 行或列”***

这确实是一个与您的第一个问题不同的问题，您应该在自己研究一下该主题后开始一个新线程。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-30T16:12:51.143

为了`na.action`产生效果，您需要显式提供一个`formula`参数：

```
princomp(formula = ~., data = mydf, cor = TRUE, na.action=na.exclude)

# Call:
# princomp(formula = ~., data = mydf, na.action = na.exclude, cor = TRUE)
# 
# Standard deviations:
#    Comp.1    Comp.2    Comp.3 
# 1.3748310 0.8887105 0.5657149 
```

需要这个公式是因为它触发了 的调度`princomp.formula`，这是唯一对 .`princomp`有用的方法`na.action`。

```
methods('princomp')
[1] princomp.default* princomp.formula*

names(formals(stats:::princomp.formula))
[1] "formula"   "data"      "subset"    "na.action" "..."  

names(formals(stats:::princomp.default))
[1] "x"      "cor"    "scores" "covmat" "subset" "..." 
```

# git - 如何接受来自差异文件的修订？

> ID：10386442
> 
> 赞同：2
> 
> 时间：2012-04-30T15:41:42.807
> 
> 标签：git, version-control

对于一个项目，我使用了 Latex 并输入了报告，现在我的教授给我发了一个“revision.diff”文件，其中显示了她在我的“report.tex”文件中所做的所有差异。我想知道是否有一种方法可以接受差异文件中的更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T15:56:33.923

它是标准的统一差异格式文件吗？如果是这样，请使用`git apply revision.diff`来应用补丁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T20:20:39.397

我假设您使用的是某种 unix 机器（即 Linux 或 Mac）。

使用 diffs 的标准方法是使用`patch`程序（`git`使用密切相关的格式，这就是为什么你可以使用 diffs `git`，但`patch`几乎肯定会出现在你的机器上，而且更直接）。

首先，确保您从教授收到的完全相同的 .tex 文件版本开始。

然后

```
% patch <revision.diff 
```

...是简短的答案。

不幸的是，没有*完全*标准的方法来创建补丁，尤其是因为有几种或多或少的“标准”方法来格式化差异。所以有一些潜在的并发症。

如果补丁文件开始看起来像这样

```
2c2
< Blah blah
---
> Blah blah wibble. 
```

或这个：

```
--- report.tex  2012-04-30 21:05:51.000000000 +0100
+++ report-modified.tex 2012-04-30 21:06:08.000000000 +0100
@@ -1,5 +1,5 @@
 \documentclass{article}
-Blah blah
+Blah blah wibble. 
```

...那么以上将^W应该工作。

如果它开始看起来像这样：

```
--- a/report.tex    2012-04-30 21:05:51.000000000 +0100
+++ b/report.tex    2012-04-30 21:06:08.000000000 +0100
@@ -1,5 +1,5 @@
 \documentclass{article}
-Blah blah
+Blah blah wibble. 
```

（注意顶部的`a/`and ），那么你必须使用`b/`

```
% patch -p1 <revision.diff 
```

从文件顶部提到的文件名中`-p1`删除斜杠的“级别”。`1`

That's basically it. See patch(1) (that is, the manpage for the patch command) for more discussion. In particular, anyone sending patches this way should read and digest the 'notes for patch senders' towards the bottom of the patch manpage.

If you're starting with a *slightly* different version of your `report.tex` than the one you sent your professor (moral of this part of the story, use a version control system, and tag or keep notes of the version you sent off), then the patch command will report errors, and do something like create a file called `report.tex.rej` in the same directory. This should let you piece together the relevant changes and apply them by hand.

# node.js - 管道流到 graphicsmagick/imagemagick 子进程

> ID：10386443
> 
> 赞同：9
> 
> 时间：2012-04-30T15:41:44.913
> 
> 标签：node.js, imagemagick, graphicsmagick

我正在尝试将数据从流中传输到子进程中。

```
var gm = spawn( 'gm convert - -thumbnail 220x165^ -gravity center -extent 220x165 thumb.jpg' );
var rs = fs.createReadStream( 'cow.jpg' );

rs.pipe( gm.stdin ) 
```

我需要在 gm 上调用 end 才能正常工作吗？同样在我的真实代码中，我从数据库中获取流。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T13:22:56.867

如何将请求流式传输到 imagemagick 的示例：

```
var image = request.get(req.params.url);
var size = req.params.size.split('x');
var args = ['-', '-thumbnail', req.params.size + '^', '-gravity', 'center', '-extent', req.params.size, '-' ];
var convert = spawn('convert', args);

image.pipe(convert.stdin);
convert.stdout.pipe(res); 
```

很好的谈论这个：http: [//vimeo.com/43380478](http://vimeo.com/43380478)

以及源代码：[https ://github.com/felixge/rebel-resize](https://github.com/felixge/rebel-resize)

# email - 处理 SMS/电子邮件融合的最佳实践

> ID：10386454
> 
> 赞同：0
> 
> 时间：2012-04-30T15:42:22.203
> 
> 标签：email, sms

我正在写一个学校管理软件包，但令我震惊的是，许多开发人员都会面临同样的问题：与用户交流时，你应该使用电子邮件还是短信，还是尝试将它们结合起来？

该问题的先前版本因过于主观而被关闭。答案会有些主观，但我确实认为这是一个很好的问题，具有话题性，尚未广泛辩论。我会尽量缩小范围：

1.  在长格式和短格式消息模板的帮助下，让用户选择电子邮件还是短信，并且对两者应用相同的业务逻辑是否可行？
2.  当通过 SMS 和电子邮件接收相同的消息时，用户会感到烦恼吗？
3.  向管理员提供包含 SMS 和电子邮件的消息传递失败的单一报告是否很常见？
4.  是否有大量用户更愿意通过 facebook 而不是 SMS 或电子邮件联系？
5.  所有这些东西都有最佳实践吗？
6.  网络上有没有地方讨论过这些东西？
7.  是否有任何著名的评论员对所有这些东西的未来做出了预测？

我特别有兴趣听取已经解决这些问题的开发人员的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:55:39.057

> 在长格式和短格式消息模板的帮助下，让用户选择电子邮件还是短信，并且对两者应用相同的业务逻辑是否可行？

是的，您可以为用户实现逻辑以选择他想使用的通信方法

> 当通过 SMS 和电子邮件接收相同的消息时，用户会感到烦恼吗？

绝对地！除非用户已设置以两种格式接收消息

> 向管理员提供包含 SMS 和电子邮件的消息传递失败的单一报告是否很常见？

是的

> 是否有大量用户更愿意通过 facebook 而不是 SMS 或电子邮件联系？

无法对此发表评论，YMMV 取决于网站的使用情况、目标用户组等。您的网站统计数据和一段时间内的趋势将有助于微调这方面。

> 所有这些东西都有最佳实践吗？

当然，看到很多网站都提供了选择加入/选择退出选项来从网站获取通信。应该避免垃圾邮件/大量电子邮件泛滥收件箱的趋势，用户应该能够设置应该向他发送多少/多少数据以及以什么格式发送。谷歌是你的朋友，那里有大量关于不同方面的文章。

> 网络上有没有地方讨论过这些东西？

我相信你会找到关于这方面的各种法律和其他细节，谷歌是你在这个项目上的朋友

# php - PHP、MYSQL 记录未更新

> ID：10386456
> 
> 赞同：0
> 
> 时间：2012-04-30T15:42:25.040
> 
> 标签：php, mysql

这是另一个奇怪的：

这是我的php：

```
$query = "SELECT iVal, iOwn FROM item WHERE item = ".$_GET['Item'];
$result9 = mysql_query($query, $_SESSION['connect']);
$row9 = mysql_fetch_array($result9);
$query = "UPDATE chars SET chCred = chCred + ".$row9['iVal']." WHERE chNum = ".$row9['iOwn'];
mysql_query($query, $_SESSION['connect']) or die('Error 2:'.mysql_error()); 
```

当我运行它并在 $query 上执行 var_dump 时，我得到了这个：

```
UPDATE chars set chCred = chCred + 100000 WHERE chNum = 2 
```

当我在 phpMyAdmin 中运行此查询时，记录会正确更新，但是当我运行代码时，记录没有被更新并且我没有收到错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:51:55.653

您在 Web 服务器上的数据库连接是否需要您手动 COMMIT 更新？如果您手动输入 SQL 时它正在工作，那么您的数据库连接没有设置自动提交，或者将查询传递到数据库时出现问题，您可以通过添加错误处理来检查，正如其他人所说。

# php - 如何将 PHP 数组表示为逗号分隔的字符串？

> ID：10386457
> 
> 赞同：1
> 
> 时间：2012-04-30T15:42:31.997
> 
> 标签：php, sql

> **可能重复：**
> [PHP/MYSQL 在 WHERE 子句中使用数组](https://stackoverflow.com/questions/907806/php-mysql-using-an-array-in-where-clause)

我有一个 ID 值为 [1,5,2,6,7...] 的数组，我需要在 MySQL item_id IN (1,5,2,6,7...) 语句中使用它来仅选择具有数组中列出的 ID 的行。如何将 $arrIDs 转换为可以插入到 SQL 查询中的内容？

编辑-调用的上下文：

```
if(!IsNullOrEmptyString($_GET["view_playlist"])) {
        session_destroy();
    }
    $id_list = implode(",", $_SESSION("playlist"));
    $sql = 'SELECT t.track_id, t.track_title, t.track_num, al.album_title, g.genre_name, a.artist_name, t.length, t.track_rating '.
    'FROM track t, genre g, artist a, album al '.
    'WHERE t.track_id IN('.$id_list.' AND t.genre = g.genre_id AND t.artist = a.artist_id AND t.album = al.album_id'; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T15:43:08.250

使用[`implode()`](http://us.php.net/manual/en/function.implode.php)；

```
$ids = implode(',', $your_array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:53:57.480

如果您使用的是[PDO](http://us.php.net/manual/en/book.pdo.php)或[mysqli](http://php.net/manual/en/book.mysqli.php)（您应该使用它，因为这些`mysql_`函数已经过时并且应该被放弃），那么您需要使用数组中的元素数来构造一个参数化查询，以匹配`?`'s in你的 SQL。

这是 PDO 中的一个示例：

```
$ids = array(1, 2, 3, 4);

try {
    $dbh = new PDO("mysql:host=localhost;dbname=mydbname", 'username', 'password');
} catch(PDOException $e) {
    die($e->getMessage());
}

$inClause = trim(str_repeat('?, ', count($ids)), ', ');
$stm = $dbh->prepare('SELECT * FROM mytable WHERE id IN ('.$inClause.')');
$stm->execute($ids);

// resulting SQL: SELECT * FROM mytable WHERE id IN (?, ?, ?, ?) 
```

# php - PDF-To-HTML 发布操作

> ID：10386459
> 
> 赞同：0
> 
> 时间：2012-04-30T15:42:36.753
> 
> 标签：php

我对 PHP 相当陌生，因为我是一名 Android 程序员，但我需要将 pdf 文件转换为 html。我不想使用任何外部 API，因为它们太贵了。现在我想使用[http://www.convertpdftohtml.com](http://www.convertpdftohtml.com)将我的 pdf 转换为 html。但是，该站点没有任何 API，只能手动运行。根据 Tomer W. 的说法，可以为网站模拟 POST 操作并自动执行。[https://stackoverflow.com/questions/9592926/online-pdf-to-html-conversion-api](https://stackoverflow.com/questions/9592926/online-pdf-to-html-conversion-api)

现在我想知道我将如何做到这一点。（我对 PHP 了解不多）但我知道有人可能会帮助我让它工作（如果我有某种伪代码）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:39:51.037

这可能很快就没有必要了。Mozilla 已将[pdf.js](https://mozillalabs.com/en-US/pdfjs/)并入 Firefox 19

# html - 对从 Perl Bibtex 生成的 HTML 表格文件进行排序到 Html 转换器

> ID：10386461
> 
> 赞同：2
> 
> 时间：2012-04-30T15:42:48.740
> 
> 标签：html, perl, sorting

我使用 Bibtex 到 HTML Perl 转换器来解析 bibtex 条目文件并创建一个 HTML 文件，其中包含要在包含 bibtex 条目的网站上显示的表格。

问题是 HTML 输出文件的排序方式与 bibtex 的排序方式相同，从旧日期到新日期，我需要根据发布年份更改 html 表格元素的顺序，这不是一行本身的条目

例子：

```
<tr>
<td class="publink">

<a href="blabla">html</a><br/>

<a href="blabla">pdf (ams)</a><br/>

<a href="blabla">pdf</a></td>

<td class="pubname">

<b><a href="blabla">STOCHASTISCHE MODELLE F&Uuml;R DIE BETRIEBLICHE PLANUNG</a></b>   <br/>

<a href="blabla">R.  Hilfer</a><br/>

<a href="blabla">GBI -- Verlag, M&uuml;nchen, 1985</a></td>   </tr>

 <tr> 
```

在这里，我只是想按年份排序，因此在其他条目中提取 1985 年和所有其他年份，然后从文件中对其进行排序以创建一个新的和排序的 html 文件。

我希望有人能给我任何建议！

谢谢！

# vb.net - 无限数组范围 VB.NET

> ID：10386464
> 
> 赞同：2
> 
> 时间：2012-04-30T15:42:58.903
> 
> 标签：vb.net, arrays, visual-studio

我声明一个 2D Unlimited 数组。我的代码：

```
Dim array As String(,) = New String(,) {}
        array(0, 0) = "top left"
        MsgBox(array(0, 0)) 
```

问题是 msgbox 什么也没显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:06:49.913

[您可以在需要时使用ReDim Preserve](http://msdn.microsoft.com/en-US/library/w8k3cys2%28v=vs.100%29.aspx)更改数组边界，它将现有数组复制到具有新维度的数组中。

但是使用[List](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)可能更简单，它是“无限的”（无需指定范围或手动调整大小）。但是列表只有一维。要模仿二维数组，您可以有一个列表列表（每个列表项本身就是一个列表）。

# actionscript-3 - Flash Builder：饼图问题

> ID：10386466
> 
> 赞同：0
> 
> 时间：2012-04-30T15:43:10.560
> 
> 标签：actionscript-3, flash, apache-flex, pie-chart

我正在尝试在我的饼图中显示数据。如果我的 dataprovide 中有多个字段（例如：EmployeeA、EmployeeB..etc），一切都会很好。馅饼将被分成几块，每块上都有文字。

但是，如果我的数据提供者只有一个字段（例如：EmployeeA）。饼图将显示整个饼图，饼图上没有文字。我想知道是否有任何方法可以在饼图中显示数据文本。非常感谢。

代码：

```
<mx:PieChart id="piechart1" x="254" y="321" width="367" height="367"
         dataProvider="{getHours.lastResult}">
        <mx:series>
<mx:PieSeries id="pieSeries" labelFunction="pieFunction" 
              explodeRadius="0.05" field="EmployeeOverTime" labelPosition="inside"/>
          </mx:series>
</mx:PieChart>

//EmployeeOverTime data will show on each pie pieces if I have multiple
//employees in the department but won't show if the department has only one employee. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:27:52.477

看起来这是 PieSeries 代码中的错误。为了让它工作，我不得不修改图表代码。这是一个有效的 fxp 文件。

[http://dl.dropbox.com/u/20054635/forever/piechart.fxp](http://dl.dropbox.com/u/20054635/forever/piechart.fxp)

错误是在第 3323 行有以下代码：

```
var rscale:Number = 1;
        // find out how much we would have to scale to get to the next neighbor up
       /* var RXScale:Number = Math.abs(ld.labelX - nextNeighbor.labelX)/(ld.labelWidth/2 + nextNeighbor.labelWidth/2); 
```

然后在第 3338 行，它基于 rscale 删除标签（现在为零，因为当饼图中只有 1 个项目时没有 nextNeighbor）

```
 if (rscale * Number(labelFormat.size) < insideLabelSizeLimit)
            {
                ld.prev.next = ld.next;
                ld.next.prev = ld.prev;
                removedLabels.push(ld); 
```

# netbeans - Netbean PropertySheet API UI 的自定义

> ID：10386467
> 
> 赞同：1
> 
> 时间：2012-04-30T15:43:10.827
> 
> 标签：netbeans, netbeans-platform, propertysheet

Netbean 属性表 API

我想在 Netbean 的 PropertySheet 的 PropertySet 行中添加两个小图像按钮，用于添加/删除（图像等）操作。在 JTable 中，我们可以为此目的进行表格渲染。

在 Netbean 中，我们可以控制属性行字段的绘制，但不能控制组行。

如果有人可以提供帮助。

# grails - 动态注入 grails 域类中的字段

> ID：10386469
> 
> 赞同：2
> 
> 时间：2012-04-30T15:43:16.883
> 
> 标签：grails, grails-orm

我在 grails 应用程序中遇到问题。我的应用程序使用插件生成一些域模型，我需要向其中一个域模型添加一个字段，但我没有源代码。有没有办法动态地做到这一点？例如使用 GORM API 元类或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:39:38.177

You could probably just extend the class from the plugin and add your field. That is a common thing to do with plugins like Spring Security Core.

```
 class MyUser extends SecUser {
        String phoneNumber
        ...
    } 
```

# graphviz - 如何为使用 Graphviz（neato 引擎）固定位置的相同源节点和目标节点的节点强制绘制不同的边缘

> ID：10386481
> 
> 赞同：1
> 
> 时间：2012-04-30T15:43:50.560
> 
> 标签：graphviz, edges

我正在尝试通过其 C 库使用 Graphviz 在位置固定的节点之间绘制边缘。然而，问题是许多边使用相同的源节点和目标节点，并且出于某种原因，它们使用完全相同的坐标绘制，导致完全重叠。

是否有一些我忘记设置的明显属性导致了这种行为？我正在使用[http://mupuf.org/blog/article/34/](http://mupuf.org/blog/article/34/)提供的代码，因为我使用 Qt 来绘制边缘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:40:00.970

显然，当 splines="true" 时这不起作用。不设置或将其设置为“false”会调用我想要的行为。

# facebook-graph-api - 使用图形 API 在用户提要帖子中标记用户

> ID：10386484
> 
> 赞同：1
> 
> 时间：2012-04-30T15:43:55.660
> 
> 标签：facebook-graph-api, tagging

在[Graph API](https://developers.facebook.com/docs/reference/api/)页面上，它显示了一个表格，其中显示了我们可以用来创建新帖子到提要的参数

*   /PROFILE_ID/饲料
*   在给定个人资料的供稿/墙上发布新帖子
*   消息、图片、链接、名称、标题、描述、来源、地点、标签

我们希望能够发布到用户墙上并标记他们的朋友。即用户 1 正在与用户 2 和其他 5 人做某事

tag 属性应该采用什么格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:21:16.447

对于那些有兴趣的人：

*   标记作为 FB 用户 ID 数组发送
*   仅当有与帖子相关的地点时才能添加标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:30:07.283

您必须发布签到才能添加地点和标记朋友

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-19T02:33:35.447

在[Graph API Explorer](https://developers.facebook.com/tools/explorer)上，您可以使用以下参数：

```
/me/feed?message=<text-message-after-encoded>&place=<page-ID-of-location>&tags=<facebook-user-id,facebook-user-id,...> 
```

# asp.net - WPF ScrollViewer 不垂直滚动

> ID：10386485
> 
> 赞同：2
> 
> 时间：2012-04-30T15:43:57.470
> 
> 标签：asp.net, wpf

我有一个包含在用户控件中的列表框。当设置为水平方向时，它会按预期滚动，但是当我将其更改为垂直时，当我按下键盘上的向下键时，所选项目会继续向下更改列表，但没有滚动，因此您无法再看到所选项目。它基本上只是从屏幕底部消失。

页面布局有一个网格，其周围有一个不会离开屏幕的边框。在这个网格中有一个 ContentControl

```
<Grid Grid.Column="1" Margin="0,30,30,30" Opacity=".7">
        <Border BorderBrush="#FFFFFFFF" BorderThickness="2,2,2,2" CornerRadius="4,4,4,4" >
            <Border.Effect>
                <BlurEffect KernelType="Gaussian" Radius="4"/>
            </Border.Effect>
        </Border>
        <Grid Background="Black">
            <ContentControl Content="{Binding SelectedSettingViewModel}" Focusable="False" />
        </Grid>
    </Grid> 
```

在这个内容控件中是一个用户控件。用户控件内部是我遇到问题的列表框。

```
<UserControl>
<Grid >
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <Controls:KNListBox Grid.Row="4" x:Name="SettingsListBox" KeyboardNavigation.DirectionalNavigation="Continue" ItemsSource="{Binding AutoCompleteDirectories}"
                            Style="{DynamicResource SettingsListBox}" SelectedItem="{Binding SelectedAutoCompleteDirectory, Mode=TwoWay}">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal"></StackPanel>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
    </Controls:KNListBox>
</Grid>
</UserControl> 
```

我尝试更改网格高度并删除 ListBox 的样式，但没有任何乐趣。谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:03:43.840

通过将包含列表框的行定义从 Auto 更改为 *. 自动将该行扩展到列表框的大小，因此它会从屏幕上消失并且永远不会滚动。

```
<Grid.RowDefinitions> 
    <RowDefinition Height="Auto" /> 
    <RowDefinition Height="Auto" /> 
    <RowDefinition Height="Auto" /> 
    <RowDefinition Height="Auto" /> 
    <RowDefinition Height="*" /> 
</Grid.RowDefinitions> 
```

# bash - Bash 堆积列

> ID：10386488
> 
> 赞同：1
> 
> 时间：2012-04-30T15:44:03.980
> 
> 标签：bash, graph

这是我第一次在这里发帖。

我正在尝试在 BASH 中制作一个堆叠的列，但我似乎无法到达任何地方。我只有三个不同的数据列，我想随着时间的推移堆叠。我能够在 excel 中做到这一点，但不知道如何让它在 BASH 中工作。

我确实在这个网站上找到了一个类似的问题，但针对的是不同的程序。

[在R中绘制堆积条形图](https://stackoverflow.com/questions/7583432/plot-stacked-bar-plot-in-r)

但我只需要一张图表而不是两张。因此，如果有人知道如何在 BASH 中制作类似的图表，请告诉我。我是编程新手，如果这是一个愚蠢的问题，我很抱歉。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:56:43.080

有一个非常简单易用的 java 包，称为 livegraph (http://www.live-graph.org/)。你向它提供一个输入文件，在输入文件的顶部有一些元数据行，它也会为你实时绘制图表。我在 Ubuntu 中使用它，它就像一个魅力。

# sql - 加入日期范围的表

> ID：10386492
> 
> 赞同：0
> 
> 时间：2012-04-30T15:44:49.550
> 
> 标签：sql, sql-server-2005

我试图在与日期和时间相关的一行中获得护理和实验室测试结果。护理表有 11 条特定患者的记录，实验室表有 3 条特定患者的记录，当我加入它们时，我得到 33 条记录，我想要 11 条我尝试左右加入但结果相同的记录。过程是，护士做一个测试并记录结果，如果结果超过异常然后命令实验室测试，所以护士和实验室测试之间存在时间差。

护理台

```
Patient No NurResult NurDate
1           8.8      4/2/2012 7:50
1          11.9      4/2/2012 11:53
1           8.3      4/2/2012 17:00
1          10.8      4/2/2012 21:42

Lab Table        
Patient No  LabResult   LabDate
1           8           4/2/2012 8:52 
```

询问：

```
SELECT NUR.PATIENT,NUR.TDVALUE,NUR.TDACTDATE,NUR.TDACTTIME
    ,LT.[RESULT],SF.COLLECTIONDATE,SF.COLLECTIONTIME
FROM [LabLSpecResultTests] LT
INNER JOIN [LabLSpecimenFile] SF 
    ON LT.URN=SF.URN
LEFT OUTER JOIN dbo.NurDocumentedResults NUR
    ON SF.PATIENT=NUR.PATIENT
    AND NUR.TDACTDATE=SF.COLLECTIONDATE
WHERE TDACTDATE='20120402' 
```

结果应该是

```
Patient  NurResult      NurDate          LabResult     LabDate
    1         8.8       4/2/2012 7:50    8             4/2/2012 8:52
    1        11.9       4/2/2012 11:53   NULL          4/2/2012 8:52
    1         8.3       4/2/2012 17:00   NULL          4/2/2012 8:52
    1        10.8       4/2/2012 21:42   NULL          4/2/2012 8:52
    1         9.9       4/3/2012 7:56    NULL          4/2/2012 8:52
    1        12.1       4/3/2012 12:03   NULL          4/2/2012 8:52 
```

我得到了什么

```
Patient  NurResult  NurDate          LabResult  LabDate
1         8.8       4/2/2012 7:50    8          4/2/2012 8:52
1        11.9       4/2/2012 11:53   8          4/2/2012 8:52
1         8.3       4/2/2012 17:00   8          4/2/2012 8:52
1        10.8       4/2/2012 21:42   8          4/2/2012 8:52
1         9.9       4/3/2012 7:56    8          4/2/2012 8:52
1        12.1       4/3/2012 12:03   8          4/2/2012 8:52 
```

# arduino - Arduino - PD - 线路跟随

> ID：10386493
> 
> 赞同：0
> 
> 时间：2012-04-30T15:44:50.900
> 
> 标签：arduino, pid

```
#include <QTRSensors.h>
#define NUM_SENSORS             5  //Number of sensors used
#define NUM_SAMPLES_PER_SENSOR  4  //Average 4 analog samples per sensor reading
#define EMITTER_PIN             13  //Emitter is controlled by digital pin 2

QTRSensorsAnalog qtra((unsigned char[]) {0,1,2,3,4}, 
  NUM_SENSORS, NUM_SAMPLES_PER_SENSOR, EMITTER_PIN);
unsigned int sensorValues[NUM_SENSORS]; //Variable Array for sensor values
const double kp = .505; //Variable for adjusting KP Value
const double kd = 150; //Variable for adjusting KD Value
const int max_speed = 255; //Variable for the Maximum Speed of the Motors
unsigned int position = 0; //Variable for holding the calculated position
int set_point = 1500;//Variable for holding the value of the center of the line
int error = 0; //Variable for holding the error from center of line based on position
int last_error = 0; //Variable for holding the previous error
int white = 0; //Variable for reading the line over white or black
int max_difference = 80 ;
double spd_right; //Speed for the Right Motor
double spd_left; //Speed for the Left Motor
int derivative = 0; //Value for the derivative
int error_value = 0; //Value for the error_value calculated from the pd function
int key_s6 = 2;//Declaring Digital Push Button
int E1 = 5; //M1 Speed Control
int E2 = 6; //M2 Speed Control
int M1 = 4; //M1 Direction Control
int M2 = 7; //M2 Direction Control
int sensors_sum = 0;

//Setup Method that includes calibration
void setup(){
  pinMode(4, OUTPUT);
  pinMode(5, OUTPUT);
  pinMode(6, OUTPUT);
  pinMode(7, OUTPUT);
  pinMode(13, OUTPUT);
  calibration();
  set_Point();
  }//Ends Setup

void loop (){
  get_sum();
  white_or_black();
  pid_calc();
  adjust_control();
  set_motors();
}//Ends Loop*/

/*Method for calibrating set_point on individual tracks
*/
void set_Point(){
  qtra.readCalibrated(sensorValues);
  for (int i = 0; i <= 5; i++){
  set_point = sensorValues[i] + set_point;
  }//Ends For
}//Ends set_point Method

/*Method for Calibrating the sensors to the ambiance lighting and 
* varying contrasts of each individual track.
*/
void calibration (){
  for (int i = 0; i<250; i++){
    qtra.calibrate();
    delay(20);
  }//Ends For
}//Ends Calibration Method

/*Method for calculating the sum of all the sensors to be used in the 
* white_or_black method for determining the background color of the track
*/
void get_sum(){
  qtra.readCalibrated(sensorValues);
  for (int i = 0; i <= 5; i++){
  sensors_sum = sensorValues[i] + sensors_sum;
  }//Ends For
}//Ends get_sum Method

/*Method for determining the background color of the current portion of the 
* track based off of the value returned by get_sum and adjusting a variable 
* to follow a white of black line as necessary.
*/
void white_or_black(){
  if (sensors_sum > 2000){
    white = 1;
  }//Ends If
  else{
    white = 0;
  }//Ends Else
}//Ends white_or_black Method

/*Method for following the line based of the position, proportional, 
* and derivative
*/
void pid_calc(){
  position = qtra.readLine(sensorValues, QTR_EMITTERS_ON, white);
  error = position - set_point;
  derivative = error-last_error;
  last_error = error;
  error_value = int(error*kp+derivative*kd);
}//Ends pid_calc Method

void adjust_control(){
  if (error_value>max_difference){
    error_value = max_difference;
  }//Ends If
  else if(error_value < max_difference){
    error_value = -max_difference;
  }//Ends If
  if (error_value < 0 ){
    spd_right = max_speed + error_value;
    spd_left = max_speed;
  }//Ends If
  else{
    spd_right = max_speed;
    spd_left = max_speed - error_value;
  }//Ends Else
}//Ends adjust_control Method

void set_motors(){
  analogWrite(M1, HIGH);
  analogWrite(M2, HIGH);
  analogWrite(E1, constrain(spd_right, 0, max_speed));
  analogWrite(E2, constrain(spd_left, 0, max_speed));
}//Ends set_motors Method

void stop(){
  analogWrite(E1, 0);
  analogWrite(E2, 0);
}//Ends Stop Method 
```

我是 arduino 语言的新手。这是我的第一个程序，我昨晚写的。这是一个 PD 线跟随示例。我目前在调整电机时遇到问题。简单地说，它只是直走。我正在使用 QTR 模拟传感器阵列。我可能会切换到数字，因为我拥有的 romeo 板上的一个模拟输入不工作。有没有人对我的逻辑有任何建议或改进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:45:23.520

```
void set_Point(){
  qtra.readCalibrated(sensorValues);
  for (int i = 0; i < NUM_SENSORS; i++){
      set_point += sensorValues[i];
  }
} 
```

关于这个循环的一个奇怪的事情是 set_point 在相加之前没有初始化（为零），并且在求和之后没有被除（i==NUM_SENSORS-=5）。

# javascript - javascript函数游戏

> ID：10386495
> 
> 赞同：-1
> 
> 时间：2012-04-30T15:45:06.300
> 
> 标签：javascript, html5-canvas

我有这个源代码：

```
 var Game = function() {
  var canvas = document.getElementById('world');
  this.context = canvas.getContext('2d'); 
```

我使用一些函数来处理这个类：

```
 Game.prototype.updateAll = function() {...} 
```

和一些其他功能。

现在我想使用鼠标功能（点击右，左...）

我认为需要在我的 Game 类中添加类似的内容：

```
this.canvas.addEventListener("click", this.getmouse, false); 
```

但是浏览器没有显示任何东西...

在我的课堂上如何以及在哪里可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:18:25.773

从您发布的代码来看，`Game`没有`this.canvas`. 您用 定义了一个局部变量`var canvas`，但您需要设置`Game`成员变量`this.canvas`。如果您想要两者，只需按照您当前的`var canvas = ...`行加上`this.canvas = canvas;`.

# lucene - Sitecore Lucene 索引不包括所有字段

> ID：10386496
> 
> 赞同：1
> 
> 时间：2012-04-30T15:45:07.143
> 
> 标签：lucene, indexing, sitecore, field

我创建了一个使用默认数据库爬虫的新索引。我无法让它索引我指定的 5 个模板上的所有字段。

我正在使用 IndexViewer 模块来检查上述字段。在可用字段中，它列出了我想要索引的所有字段，但仅索引以下字段 - _url、_group、_name 和 _tags。

我还编写了一些代码来测试索引字段，我得到了想要的结果。我只需要我的索引来包含指定模板上的所有字段。以下是我对索引的配置。

```
<index id="Articles" type="Sitecore.Search.Index, Sitecore.Kernel">
<param des="name">$(id)</param>
<param des="folder">__articles</param> 
<Analyzer ref="search/analyzer"/>            
<locations hint="list:AddCrawler">
    <customindex type="Sitecore.Search.Crawlers.DatabaseCrawler, Sitecore.Kernel">
        <Database>web</Database>
        <Root>/sitecore/content/[websitehome]</Root>
        <Tags>articles</Tags>
        <IndexAllFields>true</IndexAllFields>
        <include hint="list:IncludeTemplate">
            <template1>{C4663677-909E-4C4D-AB3E-78AADBB36CF7}</template1>
            <template2>{444D1797-1EA9-46F2-988D-2211CF926501}</template2>
            <template3>{1A859C38-FFFA-4102-BF7F-9E670495C3AF}</template3>
            <template4>{6EA89465-C6C4-4643-9589-188FBB180883}</template4>
            <template5>{52F0AB89-E9C3-4D10-9242-ACB669841C41}</template5>               
        </include>
    </customindex>              
    </locations> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:10:54.150

尝试使用[Lukeall](http://code.google.com/p/luke/downloads/detail?name=lukeall-3.5.0.jar)工具观察索引 - IndexViewer 可能不会显示未存储的字段。要使用 Lukeall，只需选择 C:\inetpub\wwwroot\Sitecore\Data\indexes__articles 文件夹，选中“只读”和“强制解锁”，然后单击“确定”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-07T12:46:04.963

要使 Lucene 存储索引值 -在字段定义上设置***storageType="YES" 。***

```
 <fieldMap type="Sitecore.ContentSearch.FieldMap, Sitecore.ContentSearch">
        <fieldNames hint="raw:AddFieldByFieldName">
          <field fieldName="_uniqueid" storageType="YES" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:43:49.177

我想通了。该索引包括字段而不是它们的值。不确定这是否是索引的所需功能，但是当我查询它时，我会得到结果。

# parsing - 处理 Antlr 语法错误或如何在意外令牌上提供更好的消息

> ID：10386499
> 
> 赞同：5
> 
> 时间：2012-04-30T15:45:12.477
> 
> 标签：parsing, error-handling, antlr

我们有以下 Antlr 语法的子部分：

```
signed_int
        : SIGN? INT
    ;

INT : '0'..'9'+
        ; 
```

当有人输入一个数值时，一切都很好，但如果他们错误地输入了 1O（一个和大写 o）之类的东西，我们会收到一条神秘的错误消息，例如：

```
error 1 : Missing token  at offset 14
near [Index: 0 (Start: 0-Stop: 0) ='<missing COLON>'     type<24> Line: 26 LinePos:14]
 : syntax error... 
```

处理此类错误的好方法是什么？我想定义包罗万象的 SYMBOL 令牌类型，但这会导致太多的解析器构建错误。我将继续研究 Antlr 错误处理，但我想我会在这里发布这个以寻找一些见解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T09:21:24.467

您应该覆盖 lexer 和 parser 中的 reportError 方法。您可以通过将此代码添加到您的词法分析器文件中来做到这一点：

```
 @Override
public void reportError(RecognitionException e) {
    throw new RuntimeException(e);
} 
```

并在解析器中创建一个方法匹配，检查输入字符串是否与指定的语法匹配：

```
 public static boolean matches(String input) {
     try {
         regExLexer lexer = new regExLexer(new ANTLRStringStream(input));
         regExParser parser = new regExParser(new CommonTokenStream(lexer));
         parser.goal();
         return true;
     } catch (RuntimeException e) {
         return false;
     }
     catch (Exception e) {
         return false;
     }
     catch (OutOfMemoryError e) {
         return false;
     }

 }

 @Override
 public void reportError(RecognitionException e) {
     throw new RuntimeException(e);
 } 
```

然后在你的文件中使用 Parser.matches(input); 检查给定的输入是否与语法匹配。如果匹配该方法返回true，否则返回false，因此当它返回false时，您可以向用户提供任何自定义的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-17T00:35:13.680

您可以尝试使用`ANTLRErrorStrategy`, 通过覆盖[`DefaultErrorStrategy`](https://www.antlr.org/api/Java/org/antlr/v4/runtime/ANTLRErrorStrategy.html).

# c++ - 主要 C++ 的类问题

> ID：10386505
> 
> 赞同：0
> 
> 时间：2012-04-30T15:45:27.643
> 
> 标签：c++, class, constructor

我为一个类创建了我的头文件，并在 main.cpp 中#included“theclassname.h”，但是当我尝试编译时，我得到“未定义的对”ClassName::TheConstructor(bool, int*, std::basic_string, std: :分配器>)""

我在我的 Classname.cpp 文件中编写了构造函数和一个名为“ClassName::start”的函数，但由于某种原因，它为此启动函数和我的析构函数提供了这个未定义的参考问题，它也被编码在我的 cpp 文件中。我在 main 中对在头文件中编码的函数进行的每次调用都不会触发此错误，但对在我的 .cpp 文件中编码的函数进行的每次调用都会触发此错误。

我已经看过很多关于此的帖子，但我已经使用正确的参数和返回类型正确地对它们进行了编码，并确保函数名称与头文件中定义的名称相同。除了拼写错误之外，还有什么可能导致这种情况，因为我已经检查了 10 多次。

谢谢

```
#ifndef THECLASSNAME_H
#define THECLASSNAME_H
#include <iostream>

class TheClassName {
 public:
   TheClassName(bool theBool=true, int *theArray=0,
        std::string message="-1");
~TheClassName();
void start();
void setBool(bool theBool) {aBool=theBool;}
 bool getBool() {return aBool;}
 void setMessage(std::string message) {mssg=message;}
 std::string getMessage() {return mssg;}
 std::string getHello() {return hello;}
private:
int *anArray;
bool aBool;
std::string mssg;
std::string hello;

void aFunction1(bool);
void aFunction2();
void aFunction3();

void aFunction4();
};

 #endif 
```

对不起大家刚刚修好了！在我的makefile中我做了

```
exec1: main.o classname.o
     g++ -o exec1 main.o 
```

代替

```
exec1: main.o classname.o
     g++ -o exec1 main.o classname.o 
```

非常感谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:48:00.620

That sounds like you're getting the error at the linker phase. Are you also compiling the file that you have the C++ class definition in and not just including the header file? You need to have a separate C++ file with the function definitions for you class, compile this file as well and include the object file in the linker command line so you don't get your undefined reference errors when you link the final executable.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:50:55.110

如果可能，请发布您的代码并发布构建命令和输出。

这是一个链接而不是编译问题，听起来包含您的构造函数和析构函数声明的编译单元尚未链接到可执行文件中 - 换句话说，链接器找不到您的函数。

# java - Android 和 Java 以及数据类

> ID：10386508
> 
> 赞同：1
> 
> 时间：2012-04-30T15:45:36.627
> 
> 标签：java, android, class

我对使用 Java 比较陌生，并且来自 C/C++ 背景。在我的应用程序中，我需要一些只保存数据的类。

我不是每个数据类都有一个文件，而是简单地将所有类放在一个基本类中。

这是我要声明的——

```
public class InternalData
{
    public class LocalSearchDef
    {
        public String m_sAdresse = null;
        public GeoPoint m_gpPoint = null;
        public int m_iSearchRadius = 0;
    }

    public class GeoBounds
    {
        public double m_dNELat;
        public double m_dNELng;
        public double m_dSWLat;
        public double m_dSWLng;
    }
} 
```

但是，eclipse告诉我“没有InternalData类型的封闭实例是可访问的。必须使用InternalData类型的封闭实例（例如xnew A（），其中x是InternalData的实例）来限定分配。”，当我尝试创建例如 GeoLocation 的新实例我收到错误消息。

这发生在以下任一情况下：

```
GeoLocation gl = new GeoLocation();
or
GeoLocation gl = new InternalData.GeoLocation(); 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:48:22.770

您需要将内部类设为静态。

```
public static class Foo {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:59:23.640

尽管您可以使用静态声明来做到这一点，但不要试图这样做。

如果要将类封装在另一个类中，它们应该与封闭类有某种关系（如 Map.Entry 到 Map）。您只是试图通过创建一个持有者类将多个类组织到同一个文件中，这没有任何意义。

每个文件一个类没有错，这是标准的 Java 方法。您需要证明为什么它们应该在同一个文件中，而不是相反。

您可能还希望使用访问器方法声明您的类，而不仅仅是创建对数据成员具有所有公共访问权限的数据结构。这是糟糕的OO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:47:51.587

您正在尝试使用没有 InternalData 实例的非静态内部。

请参阅：[需要包含 <my reference> 的封闭实例](https://stackoverflow.com/questions/4297857/an-enclosing-instance-that-contains-my-reference-is-required)

# java - 从 `pom.xml` 设置 `file.encoding`

> ID：10386509
> 
> 赞同：2
> 
> 时间：2012-04-30T15:45:37.347
> 
> 标签：java, maven

我输入什么咒语`pom.xml`相当于

```
export JAVA_TOOL_OPTIONS='-Dfile.encoding=UTF-8' 
```

在`.profile`？我试过

```
<configuration>
    <file.encoding>UTF-8</file.encoding>
</configuration> 
```

在`maven-compiler-plugin`和

```
<properties>
    <file.encoding>UTF-8</file.encoding>
</properties> 
```

在顶级，它没有工作。

主要思想是从环境中设置它`pom.xml`，而***不是***从环境中设置（我**无法**控制它将在什么环境下运行）。同样，我对任何修改`.profile`等的解决方案都不感兴趣。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T16:26:15.147

[默认解决方案](http://maven.apache.org/general.html#encoding-warning)是使用以下内容：

```
<project>
  ...
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
  ...
</project> 
```

并且[maven-compiler-plugin](http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#encoding)具有不同的配置，特别是使用上述属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:12:26.090

尝试以下操作：

```
 <configuration>
     ...
     <systemProperties>
        <systemProperty>
          <name>propertyName</name>
          <value>propertyValue</value>
        </systemProperty>
        ...
     </systemProperties>
    </configuration> 
```

这应该有效。至少它适用于我的其他 Maven 插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-07T13:39:08.173

如果要在单元测试级别指定编码，可以使用以下解决方案。这是在插件启动时设置的

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.19.1</version>
    <configuration>
      <skipTests>${skip.unit.tests}</skipTests>
      <enableAssertions>true</enableAssertions>
      <argLine>${surefireArgLine} -Dfile.encoding=UTF-8</argLine>
    </configuration>
  </plugin> 
```

# forms - How to rebuild a form in Drupal 7

> ID：10386510
> 
> 赞同：0
> 
> 时间：2012-04-30T15:45:42.897
> 
> 标签：forms, drupal, rebuild

I am trying to rebuild a form in Drupal 7\. I know its 'form_build_id' (e.g. form-_eNZLqaZWy7-6kYuGma5Cxg1Gru7Tmr9W2tsofSJxSg)

I defined this hook_menu and menu callback function:

```
/**
 * Implements hook_menu().
 */
function set_menu_menu() {
  $items['admin/structure/set_menu/rebuild/%'] = array(
    'title' => 'Rebuilt',
    'page callback' => 'set_menu_ajax_rebuild',
    'page arguments' => array(4),
    'access callback' => TRUE,
  );
  return $items;
}

function set_menu_ajax_rebuild($form_build_id) {
$form_state = form_state_defaults();
$form = form_get_cache($form_build_id, $form_state);

$form_state['no_redirect'] = TRUE;

// @see drupal_rebuild_form()

$form_state['set_menu']['count']++;
$form_state['rebuild'] = TRUE;

drupal_process_form($form['#form_id'], $form, $form_state);

} 
```

I would like to rebuild a form by hitting url like this [http://www.example.com/admin/structure/set_menu/rebuild/form-mQVd8FeimUAba8xuro38Q2_4phHZ6gupegEuY_ddKLs](http://www.example.com/admin/structure/set_menu/rebuild/form-mQVd8FeimUAba8xuro38Q2_4phHZ6gupegEuY_ddKLs) - this url displays no error but it does not rebuild my form.

The code never rebuilds any form. How can I rebuild a form?

Thank you, Martin.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T17:23:16.013

1.  print_r 为 ($form_state['always_process']) 和 ($form_state['programmed']) 的值返回什么？

2.  确认您没有收到任何将停止 $form_state 重建的验证错误。

3.  也可能是 no_redirect 阻止了表单的重建，但我必须在这里看到更多你想要做的事情。

# xcode - Why can I only view Storyboard's source and not Interface Builder?

> ID：10386512
> 
> 赞同：11
> 
> 时间：2012-04-30T15:45:49.887
> 
> 标签：xcode, ios5, storyboard, uistoryboard

I was using Xcode and making changes to my storyboard... no problem. Now, I get the source code for the storyboard but not the storyboard images!

When I right click on the storyboard file, I don't see "Interface Builder - IOS Storyboard" as an option.

Anyone have this happen to them?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T19:48:06.273

请参阅：[XCode 4.2 版本检查器隐藏情节提要](https://stackoverflow.com/q/7911658/1445313)

> 当我右键单击故事板文件时，我没有看到“Interface Builder - IOS Storyboard”作为选项。

*打开为*> *InterfaceBuilder - IOS 故事板*

可能您将文件作为源代码打开...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-05T14:27:13.210

当`Open As -> Interface Builder - iOS Storyboard`不是一个选项时，对我来说总是有用的是：

1.  关闭 Xcode
2.  重新开放

有时，当您有以下情况时会发生这种情况：

*   刚刚解决了合并冲突
*   拆分为差异视图以比较以前和当前的提交

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-06-04T19:11:31.270

[单击 Xcode 窗口右上角的这个图标](https://i.stack.imgur.com/D1WuZ.png)

# recursion - Recursion : method which takes a string, and for each repeating sequence of characters in the string, removes all but one of them

> ID：10386513
> 
> 赞同：-5
> 
> 时间：2012-04-30T15:45:54.167
> 
> 标签：recursion

Complete the following method which takes a string, and for each repeating sequence of characters in the string, removes all but one of them. For example, given the input string "AAAABCCDDDDAACCCCCC", the method should return "ABCDAC".

YOUR CODE MUST BE RECURSIVE. Do not use any loops (while, do/while, or for). Do not declare any variables outside of the method. You may declare local variables inside the method.

```
public static String eliminateRepeats (String s)
{ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:55:18.790

```
public class Recurse
{
    public static void main( String args[] )
    {
        System.out.println( recurse( "AAAABCCDDDDAACCCCCC" ) );
    }

    private static String recurse( String s )
    {
        if ( s == null || s.equalsIgnoreCase("") )
        {
            return "";
        }
        else if ( s.length() > 1 )
        {
            if ( !s.substring( 0 , 1 ).equalsIgnoreCase( s.substring( 1 , 2 ) ) )
            {
                return s.substring( 0 , 1 ) + recurse( s.substring( 1 ) );
            }

            return recurse( s.substring( 1 ) );
        }
        else
        {
            return s.substring( 0 , 1 );
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:23:52.567

这里的诀窍是你*需要*一个循环来解决这个问题，所以你只需通过使用越来越小的字符串部分递归调用该方法来伪造一个循环。

没有办法将工作分成更小的部分，就像使用递归时通常所做的那样（例如将字符串分成两半）。您只需一次处理一个字符，然后使用字符串的其余部分调用该方法。

C# 中的示例：

```
public static string EliminateRepeats(string s) {
  return
    s.Length == 1 ?
      s
    :
      (s[0] != s[1] ? s.Substring(0, 1) : "")
      + EliminateRepeats(s.Substring(1));
} 
```

（受 Jonathan Paynes 代码启发的代码。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T20:44:39.153

```
// use a default value for the lastchar for the first char, 
// which is impossible to meet in an regular string
def concentrate (s: String, lastchar: Char = 0) : String = {
    // recursive methods always need to know when it is enough
    if (s.length == 0) s else 
    if (s(0) == lastchar) concentrate (s.substring (1), lastchar) else 
    s(0) +  concentrate (s.substring (1), s(0)) }

concentrate ("AAAABCCDDDDAACCCCCC") 
```

这是一个尾递归变体：

```
@tailrec 
def concentrate (s: String, carry:String = "", lastchar: Char = 0) : String = {
    if (s.length == 0) carry else 
    if (s(0) == lastchar) concentrate (s.substring (1), carry, lastchar) else 
    concentrate (s.substring (1), carry + s(0), s(0)) } 
```

它在最后一个位置有递归调用，因为生成的字符串会动态粘合在一起，并作为参数传递。在 Scala 中，编译器可以对此进行优化，使其运行速度几乎与带有可变变量的循环一样快，而且它不会破坏堆栈——即使对于很长的字符串也是如此。

# c# - Object Reference lost on db.savechanges. Why?

> ID：10386514
> 
> 赞同：1
> 
> 时间：2012-04-30T15:46:00.823
> 
> 标签：c#, asp.net-mvc-3, entity-framework

In my controller I am creating a new subcategory object and saving it to my database like this:

```
 [Authorize(Roles = "administrator")]
    [HttpPost]
    public ActionResult Create(CategoryViewModel viewmodel, HttpPostedFileBase Icon)
    {
        SubCategory subcategory = viewmodel.subcategory;

        subcategory.Category = categorycontroller.getCategoryByName(viewmodel.SelectedValue);

        if (Icon != null && Icon.ContentLength > 0)
        {
            // extract only the filename
            var fileName = Path.GetFileName(Icon.FileName);
            // store the file inside ~/App_Data/uploads folder
            var path = Path.Combine(Server.MapPath("../../Content/icons/"), fileName);
            Icon.SaveAs(path);
            subcategory.Icon = fileName;
        }

        if (ModelState.IsValid)
        {
            db.subcategories.Add(subcategory);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }

        return View(subcategory);
    } 
```

After debugging the application I noticed that the controller correctly saves all my data including the reference to a category object in my newly created subcategory.

But the problem is when I load the data from my db later on the subcategory, object is missing its reference to my category object.

My viewmodel looks like this:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;
using System.Web.Mvc;
using SkyLearn.Areas.Categories.Controllers;

namespace SkyLearn.Areas.Categories.Models
{
    public class CategoryViewModel
    {
        public List<SelectListItem> PossibleValues { get; set; }
        public string SelectedValue { get; set; }
        public SubCategory subcategory { get; set; }

        public CategoryController categorycontroller;

        public CategoryViewModel()
        {
            PossibleValues = new List<SelectListItem>();
        }
    }
} 
```

And my method on the category controller that finds the object:

```
public Category getCategoryByName(string categoryname)
{
    foreach (Category cat in getCategories())
    {
        if (cat.Title == categoryname)
        {
            return cat;
        }
    }
    return null;
} 
```

Why does my category object reference disappear guys? I'm in a blind.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:44:35.643

这里处理的是 DbContext 对象，它是 Controller 类中的一个实例变量。这在您发布的代码中不可见。MVC 脚手架代码生成器将它放在那里（连同 Dispose() 方法）。它的工作方式是，当请求进来时，控制器被创建，其中的方法运行，然后，控制器在请求结束时超出范围。如果您取出 Dispose() 方法，它仍然可以工作。但是，最好将它放在那里，因为它正在处理作为 IDisposable 的 DbContext 对象。使用本机资源（如数据库连接）的类实现 IDisposable。这意味着您应该在它们上显式调用 Dispose()。否则，数据库连接可能保持打开状态并导致连接池泄漏，直到垃圾收集器在某个未确定的时间完成对象。有关详细信息，请参阅 MSDN 文档中有关 IDispose 的文档。

# javascript - google maps api v3 - javascript - perspective / tilt (not satellite!) ?

> ID：10386516
> 
> 赞同：6
> 
> 时间：2012-04-30T15:46:14.803
> 
> 标签：javascript, google-maps, google-maps-api-3

I know it's possible in Flash: [http://gmaps-samples-flash.googlecode.com/svn/trunk/examples/Map3DSimple.html](http://gmaps-samples-flash.googlecode.com/svn/trunk/examples/Map3DSimple.html)

The perspective control.. any one knows when or if it'll be available in the JS api?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:40:02.267

答案是不。目前在 Google Maps JavaScript API V3 中没有这样的控制。

# python - 无法在 Dreamhost 共享主机上使用乘客 WSGI 运行 Flask

> ID：10386520
> 
> 赞同：11
> 
> 时间：2012-04-30T15:46:22.497
> 
> 标签：python, passenger, flask, shared, dreamhost

我正在尝试按照[他们的 wiki 上的说明在](http://wiki.dreamhost.com/Flask)Dreamhost 共享服务器上运行 Flask“hello world”应用程序，但我没有任何运气。

我的 Flask 应用程序是[Flask 快速入门指南](http://flask.pocoo.org/docs/quickstart/)中的“hello world”应用程序：

```
from flask import Flask
app = Flask(__name__)

@app.route('/')
def hello_world():
    return 'Hello World!'

if __name__ == '__main__':
    app.run() 
```

根据 DH wiki 说明，我在名为 mysite 的文件夹中保存了一个名为“hello.py”的文件。我的passenger_wsgi.py 文件是：

```
import sys, os
INTERP = os.path.join(os.environ['HOME'], 'flask_env', 'bin', 'python')
if sys.executable != INTERP:
    os.execl(INTERP, INTERP, *sys.argv)
sys.path.append(os.getcwd())
from mysite import hello as application 
```

我尝试在 Python 控制台中运行命令，最后导入行失败，直到我将`__init__.py`文件添加到 mysite 目录。

当我尝试访问该网站时，我只收到一个 500 错误（不幸的是，日志中没有任何内容，除非它们在我无法访问的日志中，因为这是一个共享服务器......）。

由于这是最基本的设置（即，从 wiki 复制和粘贴），我不禁觉得我错过了一些非常简单的东西。或者这在共享服务器上是不可能的？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-30T19:14:15.753

回答我自己的问题是否意味着我在自言自语？

无论如何 - 我似乎已经修复了它。我没有找到一条有用的错误消息，而是一次又一次地完成了所有步骤，结果发现这是`passenger_wsgi.py`文件中的导入错误。由于应用程序位于`mysite`子目录中，因此该行：

```
from mysite import hello as application 
```

应该是（事实上，现在是）：

```
from mysite.hello import app as application 
```

它有效。这很好。

# bash - verbose declare -x from .bashrc

> ID：10386521
> 
> 赞同：1
> 
> 时间：2012-04-30T15:46:24.740
> 
> 标签：bash, osx-snow-leopard

After using Migration Assistant (on OS X) to copy my files form a case *sensitive* file partition to a case *insensitive* file partition, my `.bashrc` has become verbose each time it is run.

```
#!/bin/bash
#.bashrc file
alias ls='ls -G'
alias sbrc='source ~/.bashrc'
export GNUTERM=x11
export NWCHEM_TOP=~/install/nwchem-6.0-binary
export
PATH = /opt/local/bin:$PATH
... 
```

The output is now

```
Last login: Mon Apr 30 11:33:33 on ttys005
declare -x Apple_PubSub_Socket_Render="/tmp/launch-oblOxq/Render"
declare -x COMMAND_MODE="unix2003"
declare -x DISPLAY="/tmp/launch-VdU1C8/org.x:0"
declare -x GNUTERM="x11"
...
vencen@dirac:~$ 
```

How can I silence bash?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T03:48:13.657

不知何故，我的`.bashrc`文件收到了一个额外的换行符，留下了一个孤立的`export`

```
#!/bin/bash
export
PATH=/opt/local/bin:$PATH
#... 
```

正确的文件

```
#!/bin/bash
export PATH=/opt/local/bin:$PATH
#... 
```

不会生成不需要的输出，`export`在命令行上键入会生成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T00:18:14.303

不确定这是否是问题所在，但我见过迁移助手离开您的主目录不归您的用户帐户所有的情况。相反，您的用户帐户通过 ACL 被授予所有通常的访问权限。您可以检查并尝试修复它，看看是否可以解决问题。

去检查：`ls -lde ~`

修理：

```
sudo chown -R `id -u`:`id -g` ~ 
```

# facebook - Can you lookup friends of friends with the Facebook graph API?

> ID：10386522
> 
> 赞同：0
> 
> 时间：2012-04-30T15:46:25.430
> 
> 标签：facebook, facebook-graph-api

My app needs to generate a list of friends for the logged in user, as well as the friends of the friends. The logged in user has authorized the app. So I have no trouble getting their friends. When I make the `/friends/` call to the API using one of the friends' IDs, I get this error message:

```
Can't lookup all friends of [FB ID]. Can only lookup for the logged in user or the logged in user's friends that are users of your app. 
```

I knew that the public visibility of one's friends is a configurable setting for each individual user, but if I understand this message correctly it means that you simply cannot do what I'm trying... ever.

Question #1: Is this true? Is there simply no way to lookup someone's friends' friends? Question #2: If it's not possible, how do sites like Glassdoor.com manage this exact functionality?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:55:05.030

您无法获取正在使用该应用程序的人的朋友的朋友。

Glassdoor.com 向用户的朋友发送邀请，当有人接受时，他们只需获得他的朋友，因为他成为他们应用程序的用户。

# object - c# - 从另一个类访问正在运行的对象引用

> ID：10386528
> 
> 赞同：0
> 
> 时间：2012-04-30T15:46:55.960
> 
> 标签：object, reference, mutex

我是 C# 的新手。我有一个 c# 应用程序已经在运行。它是一个互斥类，不允许创建多个实例。所以我需要访问该类中的一些方法。为此，我需要在第二类中获取正在运行的对象引用。我如何在 C# 中解决这个问题。请帮助我。

有没有办法使用 ROT 检索参考对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:08:03.293

我认为从正在运行的应用程序中检索信息并不容易。我不知道你的要求，但如果你想从应用程序中检索或存储信息，你可以使用一个配置文件，它本质上是一个 xml 文件，或者你可以将所需的信息存储在某个文件中，然后在另一个文件中检索。 [在这种情况下，此](http://support.microsoft.com/kb/815786)链接可以为您提供帮助。

让我知道它是否有帮助。

# asp.net - Methods for sending out activation emails within a web solution

> ID：10386532
> 
> 赞同：0
> 
> 时间：2012-04-30T15:47:12.477
> 
> 标签：asp.net, email

We have a web site that requires users to signup and they then receive an activation email

Our current method of doing this is including the whole email process within the registration thread itself i.e.

```
Register() {
   registerUser()
   sendActivationMail()
   return View(Successpage)
} 
```

Where sendActivationMail then contains all the necessary code to connect to our mail server and send the email etc. We know this isn't the best way to do it, rather we just did this quickly to test everything out. The problem is obvious, the user ends up waiting longer for the "thank you for signing up page" as the page is only returned after everything else has finished.

The options to this properly that we're aware of are:

1.  Start a new thread to send out the email once the database side of the registration is complete and return the original thread immediately.
2.  Persist the email to the database and have a thread that runs contiounously and checks the database for new emails to send every x minutes
3.  Use a third party email service such as Amazon Simple Email Service.

Are there any other methods to use? Do any of the above stand out as the best?

Thanks in advance for any help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:51:20.067

我们使用数据库对消息进行排队，我有一个服务应用程序，它连续运行并检查队列并将它们发送出去。我们有一堆发送电子邮件的 Web 应用程序，所以它们都放入队列中。这对我们有用。我确信它有利有弊，但就像我说的，它对我们有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:50:51.057

这取决于您的需求。

方法 2 的优点是，如果发送失败，您可以重试/决定要做什么。

另一种类似于数据库的方法是一些队列基础设施，如 MSMQ 或其他。

# asp.net - 正确使用 Request.GetBufferlessInputStream() POST 数据 c#

> ID：10386534
> 
> 赞同：0
> 
> 时间：2012-04-30T15:47:13.053
> 
> 标签：asp.net, .net-4.0

我创建了 ac# 网页，它将监听来自服务的 POST 数据。我已经看到我可能需要使用 Request.GetBufferlessInputStream() 来读取页面数据。然后，我将在我的代码中进一步处理这些数据。

但是，我无法获取帖子数据！我发现我需要使用

```
Stream httpStream = Request.GetBufferlessInputStream();
Response.Write(httpStream.ToString()); 
```

但我不知道如何阅读。我尝试从 0 读取到最后，但只返回数字（假设是字节数据？）。

我基本上想看一个字符串！我一直在使用 CURL 来伪造帖子。该代码在这里

```
curl -H "Content Type: application/xml" -d "<callback var=\"matt\">" -X POST http://localhost:1111/Default.aspx 
```

所以我希望我的脚本能够输出`<callback var="matt">`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:03:25.590

这就是你需要的——

```
Stream stream = Request.InputStream;

StreamReader reader = new StreamReader(stream, Request.ContentEncoding);

string text = reader.ReadToEnd(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-07T17:32:58.713

```
using (var streamReader = new StreamReader(Request.GetBufferlessInputStream(), Request.ContentEncoding))
{
    string requestBody = await streamReader.ReadToEndAsync();
} 
```

这使用非阻塞异步方法读取，并且该`using`语句正确处理流。

# php - Passing a value from Vb to php

> ID：10386535
> 
> 赞同：1
> 
> 时间：2012-04-30T15:47:13.693
> 
> 标签：php, vb.net, winforms

Hi I'm trying to pass a value from Vb to PHP. So far I have used public property to pass a string value to one form to another

```
 Public _passedText As String
        Public Property PassedText() As String
    Get
        Return _passedText
    End Get
    Set(ByVal Value As String)

        TextBox1.Text = Value
        User.Text = Value
    End Set
End Property 
```

I would like the same value to be passed to a php file is this possible? Also I'm using WinForms

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:02:06.323

如果您的 winform 和 php 服务器（例如 apache 服务器）位于同一台机器上，那么您可以使用文件将值从 winform 传递给 php。Winform 将**要传递给 php 的值**保存到一个文件中，然后 php 读取保存的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T07:06:30.470

您可以使用 HTTP 协议与 PHP Server 通信。在 c# 中，可以使用 HttpWebRequest 类来实现这种通信。

封装您希望通过 POST 或 GET 方法发送的数据

HttpWebRequest 类

[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx#Y0](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx#Y0)

HttpWebRequest POST

[http://www.netomatix.com/httppostdata.aspx](http://www.netomatix.com/httppostdata.aspx)

HttpWebRequest 获取

[如何将 HttpWebRequest 与 GET 方法一起使用](https://stackoverflow.com/questions/253549/how-do-i-use-httpwebrequest-with-get-method)

在 PHP 端，您将提取您传输的参数。参数提取的方法将取决于您使用 POST 或 GET 向服务器发送数据的天气。

PHP 获取

[http://php.net/manual/en/reserved.variables.get.php](http://php.net/manual/en/reserved.variables.get.php)

PHP 发布

[http://www.w3schools.com/php/php_post.asp](http://www.w3schools.com/php/php_post.asp)

一旦你在 PHP 服务器端获得了参数，你就可以继续使用它们。

阅读更多关于 PHP 的一般信息

[http://php.net/manual/en/index.php](http://php.net/manual/en/index.php)

关于 HTTP 协议。

[http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)

祝你好运

# vba - Check if Trendline Exists in VBA

> ID：10386537
> 
> 赞同：4
> 
> 时间：2012-04-30T15:47:23.410
> 
> 标签：vba, object, exists, trendline

I have a sheet with a chart in it. I need to insert a button to TOGGLE the Trendline On/Off. So first, I need to check whether a trendline exists or not. Sounds simple, but is driving me NUTS!!!

Here is the code that I use to create the trednline and format it:

```
Sub Trending() 

Sheets("Sheet1").ChartObjects(1).Activate
    ActiveChart.SeriesCollection(1).Trendlines.Add
    ActiveChart.SeriesCollection(1).Trendlines(1).Select
    With Selection
        .Type = xlPolynomial
        .Order = 3
        .Border.ColorIndex = 3
        .Border.Weight = xlMedium

    End With

End Sub 
```

To check for the existence of a trendline, I tried:

```
If Sheets("Sheet 1").ChartObjects(1).SeriesCollections(1).Trendlines(1).Count = 1 Then
    [Statement]
End If 
```

But the test fails.

What am I doing wrong? What is a non-dirty way to do it?

Thanks, Al

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T16:37:22.597

`If`你的说法有三处不对。如果你把你的陈述分解成更小的部分并分别测试它们，你会发现：

1.  是`Sheet1`，不是`Sheet 1`。没有空间。这就是导致“下标超出范围”错误的原因。
2.  该`SeriesCollection`属性适用于`Chart`对象，而不是`ChartObject`对象。是的，我知道这个愚蠢的 Excel 术语令人困惑。Anyhoo，你需要`ChartObjects(1).Chart.SeriesCollection(1)`，而不是`ChartObjects(1).SeriesCollection(1)`。
3.  `Trendlines(1)`返回一个`Trendline`对象，这是不`Count`能够的。您想计算趋势线集合中的项目，即`Trendlines.Count`，不是`Trendlines(1).Count`。

总结一下，就是这样写的：

```
If Sheets("Sheet1").ChartObjects(1).Chart _
    .SeriesCollection(1).Trendlines.Count > 1 Then
    MsgBox "there is exactly one trendline"
End If 
```

注意：这仅在趋势线计数正好为 1 时才有效。如果可能有多个，请考虑替换`=`为。`>=`

# php - Js / Php - Am I sending this value correctly?

> ID：10386538
> 
> 赞同：0
> 
> 时间：2012-04-30T15:47:24.397
> 
> 标签：php, javascript

I am trying to collect the index of my combo box. I would like to be able to change the index, and then have a bunch of fields changed based on the new index. Am I doing this right so far?

Thanks.

```
<script type="text/javascript">
     function getCombo(sel) {
     var value = sel.options[sel.selectedIndex]; 
     $.get(document, {type: value}); 
}
</script>

// Misc code here

<td class="bold"><label for='addType'>Select Type to Add : </label>
    <select name="addType" id="combo" onchange="getCombo(this)">
        <option value="book">Book</option>
        <option value="author">Author</option>
        <option value ="publisher">Publisher</option>
        <option value="customer">Customer</option>
    </select>
<?php
    $type['type'] = $_GET['value'];
?></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:04:03.423

如果我了解您的问题，请尝试以下代码：

```
 <script type="text/javascript">
      $("#combo").change(function(){
           var value = $(this).val();
           $.get(document, {type: value});
      });
 </script>

 <td class="bold"><label for='addType'>Select Type to Add : </label>
    <select name="addType" id="combo" >
       <option value="book">Book</option>
       <option value="author">Author</option>
       <option value ="publisher">Publisher</option>
       <option value="customer">Customer</option>
    </select>
<?php
    $type['type'] = $_GET['type']; // beacuse 
?>
</td> 
```

# c - array type has incomplete element type error when compiling

> ID：10386539
> 
> 赞同：0
> 
> 时间：2012-04-30T15:47:32.197
> 
> 标签：c, compiler-construction

In our class we are to implement a kernel built on a bochs simulator.

One of the subtasks is to implement fixed priority scheduling. Previously our scheduler was only one thread queue, but now i wanted to make an array of thread queues.

But my array keeps getting a comiler error "array type has incomplete element type" i posted some of the code below, can anyone see the problem.

kernel.h

```
...
extern struct thread_queue
ready_queue_table[MAX_SYS_PRIORITY];
... 
```

kernel.c

```
...
#include <sysdefines.h>
#include "threadqueue.h"
...
struct thread_queue
ready_queue_table[MAX_SYS_PRIORITY];
... 
```

sysdefines.h

```
...
#define MAX_SYS_PRIORITY         (5)
... 
```

threadqueue.h

```
...
struct thread_queue
{
 int head;  /*!< The index to the head of the thread queue.
                 Is -1 if queue is empty. */
 int tail;  /*!< The index to the tail of the thread queue.
                 Is -1 if queue is empty. */
};
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:49:50.987

您需要在创建数组之前定义您创建的结构 whos 数组（编译器需要查看您创建的类型 whos 数组的定义），否则该类型对于编译器来说是**不完整类型**并且它不知道内存该类型的布局，因此无法创建它的数组。

您应该将结构的定义放在头文件中，并将其包含在您想要引用结构元素的任何文件中，或者执行一些需要编译器了解结构布局的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:05:43.450

在`kernel.h`你有这个：

```
extern struct thread_queue
ready_queue_table[MAX_SYS_PRIORITY]; 
```

我怀疑有些事包括`kernel.h`where`threadqueue.h`还没有包括在内。我认为您需要添加`#include "threadqueue.h"`或`kernel.h`删除该`extern`.

但这一切只是猜测，因为代码片段非常稀疏。

# java - How to efficiently dispose resources in SWT?

> ID：10386543
> 
> 赞同：2
> 
> 时间：2012-04-30T15:47:56.487
> 
> 标签：java, swt

I have a simple SWT application which contains menus and controls. I have Text, tables, and trees available in the application, and I need to explicitly call the dispose method to clear the current object and give space for displaying other widgets on the screen. The system crashes when I call the dispose method if the widget is not already activated. Is there any better approach available to dispose an active widget to give room for another widget?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:21:53.930

如果您确实需要处理小部件，您可以保留已添加项目的列表。仅处置已添加到列表中的项目。

所以我会用我的主容器类覆盖 JFrame，并有一两个方法将控件添加到列表中。（如果您需要对它们的去向进行特殊控制，您也可以在添加控制方法中传递一个选项类）

```
class MainContainer extends JFrame {
    private List<JComponent> currentComponents = new ArrayList<JComponent>();

    public void addControl(JComponent newComp) {
        // -- add it to the JFrame --
        ...

        // -- make a note that it is on --
        currentComponents.add(newComp);
    }

    public void removeControl(JComponent oldComp) {
        // -- check if it is in the list --
        if (currentComponents.contains(oldComp)) {
            // -- remove it from the JFrame --
            ...

            // -- remove it from the list --
            currentComponents.remove(oldComp);
        }
    }
} 
```

或者，您的所有组件都可以被覆盖并显示一个标志

```
private boolean isDisplayed(); 
```

方法和私有 setDisplayed(boolean state); 这样，当您进行添加时，您将显示状态设置为 true，而当您进行删除时，只有在显示状态为 true 时才执行此操作，然后将状态设置为 false。

# ios - 地图视图未显示注释点

> ID：10386546
> 
> 赞同：1
> 
> 时间：2012-04-30T15:48:05.587
> 
> 标签：ios, ios5, mkannotation, mapkit

我正在尝试在地图视图中绘制一个点。我创建了两个文件 1\. 扩展 nsobject 的文件，以及 2\. 扩展视图的文件。以下是这两个文件的源代码：

```
#import "gpMapViewAnnotations.h"

@implementation gpMapViewAnnotations
@synthesize title, coordinate;

- (id)initWithTitle:(NSString *)ttl andCoordinate:(CLLocationCoordinate2D)c2d {

    title = ttl;
    coordinate = c2d;
    return self;
} 
```

这是接口文件的代码。

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface gpMapViewAnnotations : NSObject <MKAnnotation>{

    NSString *title;
    CLLocationCoordinate2D coordinate;
}
@property (nonatomic, copy) NSString *title;
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;

- (id)initWithTitle:(NSString *)ttl andCoordinate:(CLLocationCoordinate2D)c2d;

@end 
```

@结尾

现在这是视图文件的源代码：

```
#import <UIKit/UIKit.h>
#import <MapKit/Mapkit.h>
#import "ASIHTTPRequestDelegate.h"
#import "AppDelegate.h"
#import "gpMapViewAnnotations.h"

@interface gpViewController : UIViewController
< ASIHTTPRequestDelegate, MKMapViewDelegate>
{
     MKMapView *gpMapView;

    gpMapViewAnnotations *gpAnnotations;

}
@property (strong, nonatomic) IBOutlet MKMapView *gpMapView;

@end 
```

这是实现文件：

```
#import "gpViewController.h"
#import "ASIHTTPRequest.h"
#import "Parser.h"
#import "AppDelegate.h"
#import "TFHpple.h"
#import "TouchXML.h"
#import "gpMapViewAnnotations.h"

@interface gpViewController ()

@end

@implementation gpViewController
@synthesize gpMapView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    // Set some coordinates for our position (Buckingham Palace!)
    CLLocationCoordinate2D location;
    location.latitude = (double) 51.501468;
    location.longitude = (double) -0.141596;

    // Add the annotation to our map view
    gpMapViewAnnotations *newAnnotation = [[gpMapViewAnnotations alloc] initWithTitle:@"Buckingham Palace" andCoordinate:location];
    [gpMapView addAnnotation:newAnnotation];

    NSURL *url = [NSURL URLWithString:@"http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/location.xml?apikey=YAHUGHET&range=50&northing=174900&easting=517900&name=richmond"];
    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];

    [request setDelegate:self];

    [request startAsynchronous];
    [gpMapView setDelegate:self];

}

- (void)viewDidUnload
{
    [self setGpMapView:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (void)requestFinished:(ASIHTTPRequest *)request
{
     NSLog(@"view did load");
    NSLog(@"request finished");
    // Use when fetching text data
    NSString *responseString = [request responseString];
//   NSLog(@"%@",responseString);
    // Use when fetching binary data

    NSData *responseData = [request responseData];

    //  we will put parsed data in an a array
    NSMutableArray *res = [[NSMutableArray alloc] init];
    //  using local resource file
   // NSString *XMLPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"test.xml"];
  //  NSData *XMLData   = [NSData dataWithContentsOfFile:responseString];
    CXMLDocument *doc = [[CXMLDocument alloc] initWithData:responseData options:0 error:nil];

    NSArray *nodes = NULL;
    //  searching for piglet nodes
    nodes = [doc nodesForXPath:@"//*" error:nil];
    NSLog(@"coming here 1");
    for (CXMLElement *node in nodes) {
        //NSLog(@"coming here 2");

      //  NSMutableArray *item = [[NSMutableArray alloc]init];
        //create list object to store the title and latitude and longitude.
        List *gpList = [[List alloc]init];

        if([[node localName] isEqualToString:@"entry"]){
            NSArray *entryTagNodes = [node children];

            //iterate on entry nodes
            for(CXMLElement *entryTagNode in entryTagNodes){
                //check if the tagname is content
                if([[entryTagNode localName] isEqualToString:@"content"]){
                        //iterat on content tag childs
                    NSArray *contentTagNodes = [entryTagNode children];
                    // NSLog(@"tag: %d",[contentTagNodes count]);
                    for(CXMLElement *innerContentNode in contentTagNodes){

                        NSArray *organisationTagNodes = [innerContentNode children];
                        for(CXMLElement *orgTagNode in organisationTagNodes){
                           // NSLog(@"%@",[orgTagNode localName]);

                                //check for tag name is equal to name
                            if([[orgTagNode localName] isEqualToString:@"name"]){
                                gpList.title = [orgTagNode stringValue];

                            }else if([[orgTagNode localName] isEqualToString:@"geographicCoordinates"]){
                                NSArray *geoCordTags = [orgTagNode children];

                                for(CXMLElement *geoCordTag in geoCordTags){
                                    if([[geoCordTag localName] isEqualToString:@"latitude"]){
                                        gpList.latitude = [geoCordTag stringValue];

                                    }else if([[geoCordTag localName] isEqualToString:@"longitude"]){
                                        gpList.longitude = [geoCordTag stringValue];
                                    }

                                }
                               NSLog(@"latitude nad longitude %@ %@",gpList.latitude,gpList.longitude);

                            }
                        }
                    }

                }

            }
            [res addObject:gpList];

        }

        //  and here it is - attributeForName! Simple as that.
      //  [item setObject:[[node valueForKey:@"id"] stringValue] forKey:@"id"];  // <------ this magical arrow is pointing to the area of interest

    }

    //  and we print our results
  //  NSLog(@"%@", res);
    NSEnumerator *enumerator = [res objectEnumerator];
    id obj;
    while(obj = [enumerator nextObject]){

            NSLog(@"title %@",[obj title]);

    }

    /*
    TFHpple *doc = [TFHpple hppleWithData:responseData isXML:YES];
    NSArray *elements = [doc searchWithXPathQuery:@"/"];

    NSLog(@"%d",[elements objectAtIndex:0]);
   */
    /*
    NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithData:responseData];
    Parser *parser = [[Parser alloc] initParser];

    [xmlParser setDelegate:parser];
    BOOL worked = [xmlParser parse];
    if(worked){
        NSLog(@"parsing is happening ");

    }else{
        NSLog(@"parsing is not happening %@",[app.listArray count]);
    }*/

}

-(void)mapView:(MKMapView *)mv didAddAnnotationViews:(NSArray *)views{
    MKAnnotationView *annotationView = [views objectAtIndex:0];
    id <MKAnnotation> mp = [annotationView annotation];
    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance([mp coordinate], 1500, 1500);
    [mv setRegion:region animated:YES];
    [mv selectAnnotation:mp animated:YES];
}

- (void)requestFailed:(ASIHTTPRequest *)request
{
    NSError *error = [request error];
    NSLog(@"%@",error);
}

@end 
```

我不知道我在绘制一个简单点时做错了什么。我仍然需要使用我创建的读取 xml 文件的数组放置多个点。但即使是一个简单的点现在也没有被绘制出来。请问我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T15:55:01.927

我看不到您的`mapView:viewForAnnotation:`委托方法。您可以在此处添加视图以与注释一起使用。像这样的东西：

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    if( annotation == mapView.userLocation ) return nil;

    MKPinAnnotationView *annotationView;
    annotationView = (MKPinAnnotationView*)[mapView dequeueReusableAnnotationViewWithIdentifier:@"AnnotationIdentifier"];
    if( annotationView == nil ){
        annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"AnnotationIdentifier"];
    }

    return annotationView;
} 
```

# bash - 在bash for循环中分离进程

> ID：10386556
> 
> 赞同：2
> 
> 时间：2012-04-30T15:48:54.897
> 
> 标签：bash

我经常发现自己想查看目录中的一堆图。我通常会做类似的事情：

```
for PLT in *.png; do bash -c "display ${PLT} &" ; done 
```

自从

```
for PLT in *.png; do display ${PLT} & ; done  #doesn't work :-( 
```

这类事情有更简单/不那么丑陋/更好的成语吗？我也尝试将命令括在括号中，但这也不起作用（它只打开一个情节）......

```
for PLT in *.png; do ( display ${PLT} ) ; done 
```

**编辑**

请注意，我正在交互式终端中工作。如果我编写一个脚本并将第二个 for 循环分成多行，它就可以正常工作......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T15:51:51.897

删除 & 后的分号：

```
for PLT in *.png; do display ${PLT} & done 
```

此外，使用 "${PLT}" 是一个很好的做法，以防您的文件名中有空格。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-30T16:19:13.560

我认为你可以用[xargs](http://unixhelp.ed.ac.uk/CGI/man-cgi?xargs)做到这一点。

```
ls *.png | xargs -0 -n 1 -P 10 display 
```

取决于您需要处理多少个 png 文件，这两种选择都可能更安全一些。

# r - 如何从因子中提取代码

> ID：10386559
> 
> 赞同：3
> 
> 时间：2012-04-30T15:49:01.460
> 
> 标签：r, spss

首先，如果我的问题不是很清楚，我想提前道歉。我对 R 完全陌生，我的术语不会那么好。

我们从外部公司获得一个包含调查数据的 SPSS 文件。我们有一个 R 脚本来提取数据并将其写入 CSV 文件。这工作正常。

脚本的第二部分为所有可能的 aswers 构建一个 INI 样式的文件。例如，对于 AGE，我们会有类似的东西

```
[ AGE ]
1 = Under 13
2 = 13 - 15
3 = 15 - 25
4 = 25+ 
```

CSV 文件的每一行将具有 1、2、3 或 4 之一。直到最近，所有可能的答案都从 1 开始编号，但现在其中一些从 0 开始。因此我们希望有类似的东西：

```
[ AGE ]
0 = Under 13
1 = 13 - 15
2 = 15 - 25
3 = 25+ 
```

以下是我们当前使用的 R 代码。我知道哪里出了问题，但我不知道如何纠正它。

```
data<-read.spss(inputFile, to.data.frame=TRUE);
fileOut<- file(valuesExportFile, "w");
for (name in names(data)) {
  cat("[", name,"]\n", file=fileOut);
  variableValues<-levels(data[[name]]);
  numberOfValues<-nlevels(data[[name]]);
  if (numberOfValues > 0) {
     for (i in 1:numberOfValues) {
         cat(i, '= "', variableValues[i], '"', "\n", file=fileOut);
     }
  }
};
close(fileOut); 
```

我花了一天半的时间在谷歌上搜索并尝试了各种方法。我确实找到了一个 perl 脚本 spssread.pl，它可以根据需要提取数据，但由于某种原因，所有标签名称都是大写的，这是不可接受的，因为它们区分大小写。我会继续查看这个脚本，但与此同时，我想看看是否有使用 R 的解决方案，因为这是我们已经使用的，并且将所有内容都放在一个脚本中会很好。

那么，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:34:21.403

感谢 Brian Diggs，我能够探索另一种方式，并找到了解决方案，虽然不是一个完美的解决方案。

我的解决方案是使用 提取数据，`use.value.labels=FALSE`然后取消对变量进行分类并使用该`value.labels`属性。我认为显示代码比我试图解释它更清楚。

```
data<-read.spss(inputFile, to.data.frame=TRUE, use.value.labels=FALSE);
fileOut<- file(valuesExportFile, "w");
for (name in names(data)) {
    cat("[", name,"]\n", file=fileOut);
    variables<-attr(unclass(data[[name]]), "value.labels");
    for (label in names(variables)) {
        cat(variables[[label]], '= "', label, '"', "\n", file=fileOut);
    }
};
close(fileOut); 
```

结果

```
[ AGE ]
8 = " 65+ "
7 = " 55 to 64 "
6 = " 45 to 54 "
5 = " 35 to 44 "
4 = " 25 to 34 "
3 = " 21 to 24 "
2 = " 16 to 20 "
1 = " 13 to 15 "
0 = " Under 13 " 
```

虽然可行，但并不理想。有谁知道我如何对它们进行排序以便拥有

```
[ AGE ]
0 = " Under 13 "
1 = " 13 to 15 "
2 = " 16 to 20 "
3 = " 21 to 24 "
4 = " 25 to 34 "
5 = " 35 to 44 "
6 = " 45 to 54 "
7 = " 55 to 64 "
8 = " 65+ " 
```

编辑：04/05/12

在 Brian Diggs 提供更多帮助后（见评论），最终解决方案是

```
data<-read.spss(inputFile, to.data.frame=TRUE, use.value.labels=FALSE);
fileOut<- file(valuesExportFile, "w");
for (name in names(data)) {
    cat("[", name,"]\n", file=fileOut);
    variables<-attr(unclass(data[[name]]), "value.labels");
    variables<-variables[order(as.numeric(variables))];
    for (label in names(variables)) {
        cat(variables[[label]], '= "', label, '"', "\n", file=fileOut);
    }
};
close(fileOut); 
```

# html - 使用 firebug 制作的 xpath 或 css 选择器获取文本的问题

> ID：10386563
> 
> 赞同：0
> 
> 时间：2012-04-30T15:49:06.843
> 
> 标签：html, xpath, selenium, css-selectors

我一直在尝试用 selenium 解析网页中的这段特定文本，但无法弄清楚为什么我无法显示我想要的文本。页面上的代码片段是这样的

```
<div id="BVRRRatingOverall_Review_Display" class="BVRRRating BVRRRatingNormal BVRRRatingOverall">
<div class="BVRRLabel BVRRRatingNormalLabel"/>
<div class="BVRRRatingNormalOutOf">
<span class="BVRRNumber BVRRRatingNumber">4</span>
<span class="BVRRSeparatorText">out of</span>
<span class="BVRRNumber BVRRRatingRangeNumber">5</span>
</div>
</div> 
```

我想在哪里获得文本“4 out of 5”。我正在使用 firebug 检查我的 xpath/cssSelector 是否有效，但 selenium 仍然找不到文本。我尝试了不同的等待和 cssSelectors 实现来尝试解决这个问题。似乎没有任何效果。我目前正在使用的代码是

```
String Url2 = "http://www.walmart.com/catalog/allReviews.do?product_id=16207347";
driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);
driver.get(Url2);
System.out.println("test" + driver.findElement(By.cssSelector(".BVRRSeparatorText")).getText()); 
```

我只是想将“test out”打印到屏幕上，但我只打印“test”。有谁知道我怎样才能让它工作？我环顾了互联网，但没有发现任何工作。

我也在为这种情况测试的等效 xpath 是`//*[@id='BVRRRatingOverall_Review_Display']/div[@class='BVRRRatingNormalOutOf']/span[@class='BVRRSeparatorText']`

编辑*我认为问题是因为文本从未真正显示在网页上。它的文本只有在将鼠标悬停在页面上的元素上时才能看到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:38:21.623

您可以改为获取评级明星图像的替代文本。

Ruby 语法是（不确定其他语言的确切语法，但应该存在类似的）：

```
e = driver.find_element(:css, ".BVImgOrSprite")                                                    
puts e.attribute('alt')                                                                       
# => 4 out of 5 
```

# r - 使用列表中的索引作为绘图标题中的变量

> ID：10386564
> 
> 赞同：0
> 
> 时间：2012-04-30T15:49:08.637
> 
> 标签：r, list, plot

我创建了一个图形功能：

```
plotfun = function(dat, pos, tetrad.name=NULL, snp.cols=c("blue", "red", "lightgray")){
    plot(1,1, type="n", xlim=c(min(pos), max(pos)), ylim=c(0.75,4.25), yaxt="n", xaxt="n", main=paste("CCT6 -",tetrad.name), xlab="", ylab="", bty="n", cex=.75)
    abline(h=1:4, lty="dotted")
    tmpnull = sapply(1:4, function(n) points(pos, rep((4:1)[n],length(pos)), col=snp.cols[dat[n,]], pch=16))
    mtext(c("a", "b", "c", "d"), side=2, line=0.5, at=4:1, las=1, cex=.5)
} 
```

我正在尝试使用这个绘图函数来绘制我从一个更大的列表中索引的矩阵子集（`x`在这个例子中）。我正在使用`sapply`单独绘制所有矩阵：

```
sapply(1:69, function(n) plotfun(dat=matrix.transform(x[[n]]), pos=cct6.pos, tetrad.name= n )) 
```

我的问题是我无法弄清楚如何将绘图标题读取为附加到每个矩阵的列表编号。相反，它标记它们`1:69`，丢失来自索引输入的信息。例如，如果第一个输入是`cct6[[35]]`我希望情节标题不`"CCT6-35"`读`"CCT6-1"`

对不起，如果这是一个基本问题。我只是卡在这个...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:57:55.730

`main= ...`使用以下代码段在“plotfun”中的绘图调用中更改您的论点：

```
main=bquote("CCT6-*.(tetrad.name)) 
```

当我用一个简单的测试用例尝试这个时，我发现惰性评估方面导致（不是错误，而是未能正确标记图。添加 force() 校准解决了这个问题。比较这两个：

```
for(n in 1:2) plot(1,1,main=bquote("N="*.(n)))

for(n in 1:2) {force(n); plot(1,1,main=bquote("N="*.(n)))} 
```

# python - 我应该如何在 Python 中折叠元素？

> ID：10386566
> 
> 赞同：3
> 
> 时间：2012-04-30T15:49:19.917
> 
> 标签：python, python-2.7

例如：

```
l = [('a',1),('b',2),('a',2)]

collapsed_l = dict(a=[1,2],b=[2]) 
```

如何最好地从`l`到`collapsed_l`？

从某种意义上说，我想要某种方式来概括我正在崩溃的“领域”以及哪个领域。我认为这类似于数据透视表在数据库和电子表格中的作用，但我可能错了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T15:56:18.183

```
>>> from collections import defaultdict
>>> l = [('a',1),('b',2),('a',2)]
>>> collapsed_l = defaultdict(list)     
>>> for letter,num in l:
        collapsed_l[letter].append(num)

>>> collapsed_l
defaultdict(<type 'list'>, {'a': [1, 2], 'b': [2]}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T16:06:40.987

```
>>> from itertools import groupby
>>> from operator import itemgetter
>>> l = [('a',1),('b',2),('a',2)]
>>> dict((k,[n for l,n in v]) for k,v in groupby(sorted(l),itemgetter(0)))
{'a': [1, 2], 'b': [2]} 
```

不确定折叠值的顺序是否重要，如果是，您可以`sorted(l)`编辑`sorted(l,key=itemgetter(0))`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T15:55:19.883

最干净的方法是遍历元组列表并将元素添加到字典中。Setdefault 将确保如果密钥不存在，则将添加一个空列表。如果键存在，则元素将被附加到列表中。

```
>>> d=dict()
>>> for k,e in l:
    d.setdefault(k,[]).append(e)        
>>> d
{'a': [1, 2], 'b': [2]} 
```

您也可以将`collections.defaultdict`其用于此目的，在这种情况下您不需要该`setdefault`方法。

# bison - yylloc 在此范围内未定义

> ID：10386567
> 
> 赞同：1
> 
> 时间：2012-04-30T15:49:26.973
> 
> 标签：bison, flex-lexer

编译文件时遇到以下问题。我已经覆盖了 YYLTYPE 的定义如下（虽然它与默认相同但我会扩展它

```
typedef struct YYLTYPE  
{  
  int first_line;  
  int first_column;  
  int last_line;  
  int last_column;  
} YYLTYPE; 
```

当我在 lex 文件中添加以下内容时，我得到“yylloc undefined in this scope”错误。

```
#define YY_USER_INIT yylloc.first_line = yylloc.first_column = 1; 
```

# 巴斯宾：

*   [弹性文件](http://www.pastebin.com/wpX7YVpa)
*   [野牛文件](http://www.pastebin.com/4t0FmCMD)
*   [生成文件](http://www.pastebin.com/nTqGnuZV)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T22:28:47.790

您需要将 和 的定义放入您的`YYLTYPE`和文件中`YYLTYPE_IS_DECLARED`的头文件中，并且您需要将文件中的文件放在定义.`#include``.y``.l``#include``.tab.h``.l``#include``YYLTYPE`

上述原因是野牛不会从文件顶部导出*您的*定义，因此如果您想要它在其他地方，您需要安排它可用。更糟糕的是，该文件将始终具有默认值（由 保护），因此您需要确保在它之前看到您的定义。`YYLTYPE``.y``.tab.h``YYLTYPE``#ifndef YYLTYPE_IS_DECLARED`

# javascript - 定义类中所有对象的 zIndex

> ID：10386573
> 
> 赞同：0
> 
> 时间：2012-04-30T15:49:41.093
> 
> 标签：javascript, z-index

我想将对话框类中几个元素的 z-index 设置为 1。

目前我正在使用下面的代码：

```
document.getElementsByClassName("dialog")[0].style.zIndex = "1"; 
```

但肯定只适用于第一个元素。定义数组也不起作用，因为我在类中没有固定数量的对象。有没有其他方法可以解决这个问题？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:52:13.130

使用循环：

```
var els = document.getElementsByClassName("dialog");

for (var i = 0, l = els.length; i < l; i++) {
   els[i].style.zIndex = 1;
} 
```

这是关于循环替代品的有趣文章：http: [//htmlcssjavascript.com/javascript/another-front-end-engineer-interviewing-question-loop-alternatives/](http://htmlcssjavascript.com/javascript/another-front-end-engineer-interviewing-question-loop-alternatives/)

更新：正如评论中指出的那样，您编写的代码仅影响第一个元素（索引 [0]）。该方法`getElementsByClassName`返回一个包含所有选定元素的[NodeList 。](https://developer.mozilla.org/En/DOM/NodeList)您需要遍历列表以单独更新每个元素，因此需要循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:55:01.007

您可能希望遍历 getElementsByClassName() 返回的数组元素，如下所示：

```
var a = document.getElementsByClassName("dialog");
for (var x = 0; x < a.length; x++) {
  a[x].style.zIndex = 1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T16:18:58.843

通过使用`[0]`，您只选择第一个元素。

我想向您展示另一种遍历这些元素的方法。

```
var a = document.getElementsByClassName( 'dialog' ),
    forEach = Array.prototype.forEach.call.bind(Array.prototype.forEach)

forEach( a, function( el ) {
    el.style.zIndex = 1
} ) 
```

# wpf - WPF Map Control - MapLayer Children 上的操作事件

> ID：10386578
> 
> 赞同：1
> 
> 时间：2012-04-30T15:50:07.437
> 
> 标签：wpf, bing-maps, pixelsense

我在 Surface 应用程序中使用 WPF Bing 地图控件。当用户触摸地图上的建筑物时，我会弹出弹出框。我希望弹出窗口启用操作，以便用户可以移动、缩放和旋转它们。现在，如果您在弹出窗口中触摸并拖动，它会移动地图，因为它是地图图层的子图层。但无论我将 IsManipulationEnabled 和 ManipulationStarting 等添加到弹出控件的哪个子元素，都不会触发任何操作事件。所以..

有没有办法让操作事件为地图图层的子图层触发？

谢谢，安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:15:15.643

尝试在您的弹出元素上调用 CaptureTouch（即：popup.CaptureTouch()）。这会将所有触摸手势路由到您的弹出窗口，并可能在地图上释放捕获。我在鼠标捕获方面遇到了同样的问题，CaptureMouse 解决了我的问题。

# mysql - “慢查询日志”中的 MYSQL 慢查询 - 但相同的查询手动运行非常快

> ID：10386579
> 
> 赞同：6
> 
> 时间：2012-04-30T15:50:09.310
> 
> 标签：mysql, sql, database, performance

如标题所述，在我的数据库中，各种查询出现在慢查询日志中，但是当我手动运行它们时，它们的运行速度提高了 10 倍。

例如，具有多个按参数排序的相对简单的选择查询在日志中通常需要 100 秒（是的，表非常大）......但是当我自己在同一个数据库上运行它时，它需要 2 秒左右。

我已经检查了服务器的性能，当时似乎没有特别的减速或瓶颈，在那段时间也没有很多查询需要很长时间，而只是一个。

我怎样才能开始分析这样的问题？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T16:12:04.290

当有问题的查询进入慢日志时，您的系统可能更忙。

如果 rows_examined 大于结果集，慢日志可能表明索引没有被充分利用。因此，执行时间应该被认为是一个查询有问题的线索，但是 rows_examined 会给你更多明确的答案。

查询时间是高负载服务器上性能不佳的衡量标准，因为任何查询在繁忙的服务器上都可能很慢。您应该使用 EXPLAIN 和 SHOW PROFILE 来分析您的查询并改进它们，以便它们不会给您的服务器带来过多的负载。

在分析查询时使用`SELECT SQL_NO_CACHE ...`，因此结果不会存储在查询缓存中，否则同一查询的后续执行可能会使用查询缓存，从而扭曲查询的任何时间。

# javascript - 为什么在立即匿名函数调用之前放置否定

> ID：10386586
> 
> 赞同：2
> 
> 时间：2012-04-30T15:50:31.523
> 
> 标签：javascript, syntax

> **可能重复：**
> [函数前的感叹号有什么作用？](https://stackoverflow.com/questions/3755606/what-does-the-exclamation-mark-do-before-the-function)

我在[bootstrap-dropdown.js中看到了这个](http://twitter.github.com/bootstrap/assets/js/bootstrap-dropdown.js)

```
!function ($) {
   "use strict"; // jshint ;_;
   ...
}(window.jQuery); 
```

在立即匿名函数调用之前，这个爆炸（否定）背后的原因是什么？

# c# - 如何绑定到集合集合以在 DataGrid 上显示信息？

> ID：10386587
> 
> 赞同：0
> 
> 时间：2012-04-30T15:50:34.863
> 
> 标签：c#, .net, wpf, binding, datagrid

我正在尝试以编程方式将 a 绑定`List<List<string>>`到 a 。`DataGrid`我使用它`List<List<string>>`是因为它`DataGrid`必须有可变数量的列。

实际上，我必须将 绑定`DataGrid`到 an`string[][]`但它部分有用，因为需要获取此数据结构并向其中添加行，这就是我想使用`List<List<string>>`.

目前，我正在使用此代码段来生成列。

```
dgResults.Columns.Clear();
for (int i = 0; i < numColumns; i++)
{
    DataGridTextColumn textColumn = new DataGridTextColumn();
    textColumn.Binding = new Binding(string.Format("[{0}]", i));
    dgResults.Columns.Add(textColumn);
} 
```

我应该使用什么`textColumn.Binding`来绑定到 a `List<list<string>>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:56:56.093

哇...我正在使用该`string[][]`结构...但是使用我编写的代码段，`List<List<string>>`可以用于预期目的！

# ruby-on-rails - Rails 中的类实例变量应该在互斥体中设置吗？

> ID：10386590
> 
> 赞同：5
> 
> 时间：2012-04-30T15:50:42.350
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, synchronization

假设我的 Rails 项目中有一个 Ruby 类，它正在设置一个实例变量。

```
class Something
  def self.objects
    @objects ||= begin
      # some logic that builds an array, which is ultimately stored in @objects
    end
  end
end 
```

是否可以`@objects`多次设置？是否有可能在一个请求期间，在执行上述`begin`/之间的代码时`end`，可以在第二个请求期间调用此方法？我想这真的归结为 Rails 服务器实例是如何分叉的问题。

我应该改为使用`Mutex`或线程同步吗？例如：

```
class Something
  def self.objects
    return @objects if @objects

    Thread.exclusive do
      @objects ||= begin
        # some logic that builds an array, which is ultimately stored in @objects
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T05:25:25.260

即使在 MRI 中，也可以（并且希望）以多线程模式运行 Rails。这可以通过更改`production.rb`.

```
config.threadsafe! 
```

在 MRI 中，两个线程不能同时运行代码，但可以随时发生上下文切换。在 Rubinius 和 JRuby 中，线程可以同时运行代码。

让我们看一下您显示的代码：

```
class Something
  def self.objects
    @objects ||= begin
      # some logic that builds an array, which is ultimately stored in @objects
    end
  end
end 
```

`||=`代码扩展为：

```
class Something
  def self.objects
    @objects || (@objects = begin
      # some logic that builds an array, which is ultimately stored in @objects
    end)
  end
end 
```

这意味着该过程实际上有两个步骤：

1.  抬头`@objects`
2.  如果`@objects`为假，则设置`@objects`为`begin/end`表达式的结果

上下文可能会在这些步骤之间切换。上下文当然有可能在步骤 2 的中间切换。这意味着您最终可能会多次运行该块而不是一次。在 MRI 中，这可能是可以接受的，但是将互斥锁锁定在表达式周围是非常直接的，所以就这样做。

```
class Something
  MUTEX = Mutex.new

  def self.objects
    MUTEX.synchronize do
      @objects ||= begin
        # some logic that builds an array, which is ultimately stored in @objects
      end
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-01T04:40:28.613

我来一刀。

Rails 是单线程的。对 Rails 应用程序的连续请求要么排队，要么由单独的应用程序实例（阅读：进程）处理。`@objects`在您的类中定义的类实例变量的值`Something`存在于流程的范围内，而不是在您的应用程序的任何实例的范围内。

因此，互斥锁是不必要的，因为您永远不会遇到两个进程正在访问同一资源的情况，因为这两个进程的内存空间是完全分开的。

我认为这引发了另一个问题，`@objects`旨在成为共享资源，如果是这样，我认为它需要以不同的方式实现。

免责声明：我可能在这里完全不合时宜，事实上我有点希望我今天能学到一些东西:)

# sql-server-2005 - 如何在 SQL Server 2005 中创建作业和计划

> ID：10386591
> 
> 赞同：2
> 
> 时间：2012-04-30T15:50:45.113
> 
> 标签：sql-server-2005

我的问题是我在我的计算机上安装了 SQL Server 2005。我想创建工作和计划​​来自动设置我的存储过程工作。但问题是它需要我先创建 SSIS。绝对我不能配置它。我想知道我可以在我的计算机上配置它（不是 Window Server 只是 Window 7）吗？这是我的 SQL Server 版本：

```
 Microsoft SQL Server Management Studio               9.00.1399.00
  Microsoft Analysis Services Client Tools             2005.090.1399.00
  Microsoft Data Access Components (MDAC)              6.1.7601.17514(win7sp1_rtm.101119-1850)
  Microsoft MSXML                                      3.0 4.0 5.0 6.0 
  Microsoft Internet Explorer                          9.0.8112.16421
  Microsoft .NET Framework                             2.0.50727.5448
  Operating System                                     6.1.7601 
```

先感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-07T01:20:56.130

生成 JOB 并将其分配给对象（例如存储过程）的典型脚本如下...

```
DECLARE @JobID BINARY(16)
EXECUTE msdb.dbo.sp_add_job @job_id = @JobID OUTPUT,
                            @job_name = N'<<A NAME OF YOUR JOB>>',
                            @enabled = 1,
                            @owner_login_name = N'@YOURLOGINCREDENTIALS',
                            @description = N'No description available.',
                            @category_name = N'[Uncategorized (Local)]',
                            @notify_level_eventlog = 0,
                            @notify_level_email = 2,
                            @notify_email_operator_name = N'<<OPTIONAL>>',
                            @notify_level_netsend = 0,
                            @notify_level_page = 0,
                            @delete_level = 0;
EXECUTE msdb.dbo.sp_add_jobstep @job_id = @JobID,
                                @step_id = 1,
                                @step_name = N'spMYPROCEDURE',
                                @command = N'EXEC spMYPROCEDURE',
                                @database_name = N'<<MASTER OR WHAT EVER YOUR DATABASE IS>>',
                                @subsystem = N'TSQL',
                                @flags = 6,
                                @retry_attempts = 3,
                                @retry_interval = 5,
                                @output_file_name = N'<<WHERE YOU WANT TO SAVE A LOG FILE OF THE JOB>> \spMYPROCEDURE.jobresults.log',
                                @on_success_step_id = 0,
                                @on_success_action = 1,
                                @on_fail_step_id = 0,
                                @on_fail_action = 2;
EXECUTE msdb.dbo.sp_update_job @job_id = @JobID, @start_step_id = 1;
EXECUTE msdb.dbo.sp_add_jobserver @job_id = @JobID, @server_name = N'(LOCAL)';
EXECUTE msdb.dbo.sp_add_jobschedule @job_id = @JobID,
                                    @name = N'spMYPROCEDURE',
                                    @enabled = 1,
                                    @freq_type = 8,
                                    @active_start_date = 20140417,
                                    @active_end_date = 99991231,
                                    @freq_interval = 62,
                                    @freq_subday_type = 1,
                                    @freq_subday_interval = 1,
                                    @freq_relative_interval = 1,
                                    @freq_recurrence_factor = 1,
                                    @active_start_time = 90000,
                                    @active_end_time = 235959;
GO 
```

通常我会先创建存储过程，测试并运行它以确保它可以正常工作，然后为它分配一个作业，如上所示。

请注意@active 时间都是完整的整数小数（即：90000 = 09:00:00am）

`USE [master]`在运行上述脚本之前，您可能还需要作为数据库参考。

# objective-c - 核心数据，用我的 JSON 填充我的 Coredata

> ID：10386594
> 
> 赞同：0
> 
> 时间：2012-04-30T15:50:48.157
> 
> 标签：objective-c, ios, json, core-data

我的问题在哪里？我想用我的json填充我的coredata，但它只填充最后一个对象，我的意思是这个：

```
phone.name = [[[json valueForKey:@"boxesDetail"] objectAtIndex:1] valueForKey:@"name"];
        phone.number = [NSNumber numberWithInt:[[[[json valueForKey:@"boxesDetail"] objectAtIndex:1] valueForKey:@"number"] intValue]]; 
```

而不是以前的。

这是我的代码：

```
- (void) add{
    NSManagedObjectContext *context = [app managedObjectContext];
    Phone *phone = [NSEntityDescription insertNewObjectForEntityForName:@"Phone" inManagedObjectContext:context];

    if (nameText.text.length <= 0 || numberText.text.length <= 0)
    {
        NSLog(@" hey hey, t'as pas oublié kkchose ?");
    }
    else
    {
        phone.name = nameText.text;
        phone.number = [NSNumber numberWithInt:[ numberText.text intValue]];

        NSLog(@"ADD : %@", phone.name);

        [[NSNotificationCenter defaultCenter] postNotificationName:@"Test" object:self];

        [self dismissModalViewControllerAnimated:YES];
    }

    NSString *urlString = [NSString stringWithFormat:@"http://localhost:8888/json.txt"];
    NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:urlString]]; 
    NSError *err;

    NSMutableArray *json = (NSMutableArray* )[NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&err];

   for (int i = 0; i != 2; i++)
    {
        phone.name = [[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"name"];
        phone.number = [NSNumber numberWithInt:[[[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"number"] intValue]];
  }

    NSFetchRequest *request = [[NSFetchRequest alloc] init];

    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Phone" inManagedObjectContext:context];

    [request setEntity:entity];

    NSArray *array  = [context executeFetchRequest:request error:&err];

    for (Phone *pho in array)
    {
        NSLog(@"NAME %@", pho.name);
        NSLog(@"PHONE %@", pho.number);
    }

} 
```

顺便说一句，如果你有一个想法让我不编写循环来填充核心数据，我会感谢你^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:03:49.613

您仅在此行中创建一个托管对象：

```
NSManagedObjectContext *context = [app managedObjectContext]; 
```

然后在这些行中设置名称和编号字段 3 次：

```
for (int i = 0; i != 2; i++)
{
    phone.name = [[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"name"];
    phone.number = [NSNumber numberWithInt:[[[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"number"] intValue]];
} 
```

我猜你想创建和填充三个对象而不是一个。在循环内移动托管对象的创建。

```
for (int i = 0; i != 2; i++)
{
    Phone *phone = [NSEntityDescription insertNewObjectForEntityForName:@"Phone" inManagedObjectContext:context];
    phone.name = [[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"name"];
    phone.number = [NSNumber numberWithInt:[[[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"number"] intValue]];
} 
```

# java - 浮动大于或小于零

> ID：10386596
> 
> 赞同：5
> 
> 时间：2012-04-30T15:50:53.583
> 
> 标签：java, android

我有以下代码，有时返回为真，有时不返回。

知道什么可能导致不同的结果吗？

0.00 字符串来自 JSON 对象。

*（代码简化）*

```
if(new Float("0.00")>0){
    // do something
} 
```

编辑：

我所拥有的是一些浮点数，我想确定它是零、小于零还是大于零。这些值可能是 0.00、0.001 或 -0.001。我如何确定它们是正数、负数还是零？

编辑：

也许我应该澄清我是如何获得这些价值观的。我可能完全是导致问题的其他原因，因为我阅读了 BigDecimal 并尝试使用它无济于事。

使用以下代码从 JSON 提要（格式为 LT:0.000）中提取值：

```
price = new BigDecimal(stocksJSONArray.getJSONObject(i).getString("LT")); 
```

然后为了测试价格是大于还是小于零，我使用了以下条件语句：

```
if(price.compareTo(BigDecimal.ZERO)==1){
    // greater than zero
}
else if(price.compareTo(BigDecimal.ZERO)==-1){
    // less than zero
} 
```

此代码循环用于从 JSON 提要中读取的许多值。从结果来看，一些`price`为零的被处理为大于零，一些被处理为小于零。我怀疑是其他原因导致了这里的问题？

我还做了一个测试，看看问题是否出在数据的准确性上。所以我这样做了：

```
DecimalFormat frmt = new DecimalFormat("0.000000000000000000000000");
String formatted = frmt.format(stock.change); 
```

对于被识别为正数和负数的零，它的跟踪值仍然是`0.000000000000000000000000`，不是`0.000000000000000000000001`或类似的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T16:02:52.613

您的表达式将可靠地产生`false`Java 中的结果。

但是，假设零是例如 -1 除以正无穷大的结果。在这种情况下，它将在内部表示为，粗略地说，-0.00。在某些情况下，它仍将打印为零（没有减号），在其他情况下，它的行为与 0.00 不同。

通常可以以与整数相同的方式比较浮点数 - 存在舍入错误的风险，但添加或减去随机小值无助于该错误。与相等比较不同。

我建议您仔细检查您的事实并[更多地阅读](http://www.concentric.net/~ttwang/tech/javafloat.htm)有关浮点行为的信息。

**编辑**：我在上面大大简化以回答原始问题。要回答对问题的编辑，我们需要更深入。

对于浮点数的**任何运算，都应该知道并考虑输入的***精度*和*准确度*，以及输出的*所需准确度*。有时任务是可解决的，有时则不是——输入的准确性可能不足以产生答案。

在您的情况下，*精度*为 32 位，其中 24 位是尾数和 8 位指数。这意味着此数据类型可以安全地将 0.001 与 0.00100001 区分开来，但不能与 0.001000001 区分开来，您可以很容易地看到：

```
 System.out.println((float)0.001 < (float)0.001000001); 
```

（请注意，如果您不强制通过强制转换进行单精度比较，您将得到不同的结果。在这种情况下，计算将以双精度完成并且数字将被安全地区分 - 直到您将它们更接近。）

因此，精度由数据类型决定。没有那么准确。输入精度通常比精度更具挑战性，因为它与数据类型无关，只是精度永远不会比精度更好。

关于特定浮点类型的可表示性，数学实数可以在四种可能的情况下找到自己，并且这些情况对应于当它以人类可读的十进制表示法作为文字出现时所接受的不同处理。

*   它可以用二进制准确表示。例如，0 或 0.25。那么它与整数变量中的整数一样准确。
*   或者它可以近似地表示为与类型的精度相对应的精度。例如，1/3 或 0.1 或 0.001。当所需的指数适合可用的指数位数时，就会发生这种情况，但是当数字的二进制扩展长于尾数或完全无限时。
*   或者它是近似可表示的，具有严重扭曲的准确性。这些是非[正规](http://en.wikipedia.org/wiki/Denormal_number)（次正规）数。它不仅不准确，它的算术可能会慢到爬行，这通常记录了正确的行为，即使是一个受人尊敬的 Java 编译器也可能会在看到这种类型的文字时出汗，但这是一个[错误](http://www.exploringbinary.com/java-hangs-when-converting-2-2250738585072012e-308/)。
*   或者它根本不适合，编译器会拒绝字面量太大。

因此，在您的情况下，我们只有三个有效输入：0（准确）、0.001（近似）和 -0.001（近似），这使您的问题可以解决。 **只需将您的数字与 0 文字**（顺便说一句，这是准确的）进行比较，**您将始终获得预期的布尔值**（完全准确的输出）。

然而，这取决于您的输入直接来自文字。如果您的输入是 0.001、-0.001 和 之一`(float)1000 * (float)0.001 - 1`，这将是一个不同的问题，您必须得到答案，例如：

```
if (-0.00001 < x && x < 0.00001) // then x is zero 
```

如果你允许任何输入，而不仅仅是这三个魔法值，并且不知道输入的准确性，那么这就是不可能完成的任务。即使是从末尾有一些垃圾数字开始的文字`0.000000000...`也会被 Java 编译器转换为完全中性的零，并且在这种情况发生之后，再多的 Java 代码都不会告诉它准确和漂亮`0.00`，或者从什么如果您在下溢值中添加减号，则会发生这种情况。都是一样的，不准确的零，变量中的相同位模式，而不是 3 个不同的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:54:35.590

浮点数不准确。您需要指定误差范围，例如：

```
float result = new Float("0.00");
float expected = 0;
if (Math.abs(result - expected) < 0.00001)
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T19:13:46.810

您可以使用 Math.signum() 检查该值是否等于、小于或大于零。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-14T04:12:22.297

我的做法有点不同。我期待一个传感器显示读数为 1。这就是我想出的。

```
double a = y1;
                if((a-0)<1){
                    a=(1-a)+a;
                } 
```

# maven - 如何将依赖Hbase添加到nutch项目？

> ID：10386598
> 
> 赞同：1
> 
> 时间：2012-04-30T15:50:55.160
> 
> 标签：maven, ivy, nutch

最近想修改nutch的代码（Fetcher.java），把原始的html页面保存到Hbase中。我已将项目导入 Eclipse。但我不熟悉 ant、ivy、maven 或 buildfile。

如何将Hbase库jar文件添加到项目中，以便我可以使用ant来构建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:31:04.220

将 hbase jar 添加到 eclipse 项目的 buildpath 中，并确保将 jar 复制到 nutch 内的 lib 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:19:01.737

最终，我通过在 ivy.xml 文件中添加依赖项声明做到了。并且库描述可以在[http://search.maven.org/](http://search.maven.org/)中找到。然后只需在命令 shell 中运行 ant。（就我而言，在 Eclipse 中运行 ant 不起作用。我不知道为什么。）
这个问题可能是微不足道的，但我希望这对像我这样的初学者有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T13:35:45.313

让我详细介绍一下：

将以下行添加到 Nutch 的 ivysettings.xml 中：

```
<module organisation="org.apache.giraph" name=".*" resolver="internal"/> 
```

将以下行添加到 Nutch 的 ivy.xml 中：

```
 <dependency org="org.apache.giraph" name="giraph" rev="1.1.0-SNAPSHOT"
      conf="*->default" />
    <dependency org="org.apache.giraph" name="giraph-hbase" rev="1.1.0-SNAPSHOT"
      conf="*->default" />
    <dependency org="org.apache.giraph" name="giraph-examples" rev="1.1.0-SNAPSHOT"
      conf="*->default" /> 
```

现在在 .ivy2 子文件夹下创建 put jar 文件：

```
/home/emre/.ivy2/local/org.apache.giraph/giraph/1.1.0-SNAPSHOT/jars/giraph.jar
/home/emre/.ivy2/local/org.apache.giraph/giraph-hbase/1.1.0-SNAPSHOT/jars/giraph-hbase.jar
/home/emre/.ivy2/local/org.apache.giraph/giraph-examples/1.1.0-SNAPSHOT/jars/giraph-examples.jar 
```

# python - Mac OS X 上的 wxPython 2.9

> ID：10386600
> 
> 赞同：9
> 
> 时间：2012-04-30T15:51:16.280
> 
> 标签：python, wxwidgets, enthought

我正在使用 Enthought Python Distribution（7.2、64 位）。它没有 wxPython（这很重要）。不过wxPython-2.9好像支持64位的Cocoa接口，所以我试了一下。实际上，一切都很顺利：命令

```
python build-wxpython.py --osx_cocoa --mac_framework --install 
```

成功编译，甚至进入 EPD 站点包。然而，一个简单的 wxPython 代码

```
import wx
wx.App() 
```

失败并出现以下错误：

```
This program needs access to the screen.
Please run with a Framework build of python, and only when you are
logged in on the main display of your Mac. 
```

你能给我一些建议如何治愈这个吗？EPD 显然是一个 Python 框架（即，查看 /Library/Frameworks/EPD64.framework 和 /Library/Frameworks/Python.framework 让我信服）但是这个 wxPython 构建不知道这一点。wxPython的版本是2.9.3.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-20T08:39:57.313

这是因为您`wxpython`使用系统 python 安装。因此您可以修改`main.py`项目定义的其他要点或任何其他要点，在开头添加如下：

```
import site
site.addsitedir("/Users/jazz/.pyenv/versions/py27/lib/python2.7/site-packages/") 
```

然后运行`/usr/bin/python`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:07:37.997

使用这样的包装脚本应该以 wxPython 正常工作的方式设置您的环境：

```
#!/bin/bash

# Real Python executables to use
PYVER=2.7
PYTHON=/Library/Frameworks/Python.framework/Versions/$PYVER/bin/python$PYVER

# Figure out the root of your EPD env
ENV=`$PYTHON -c "import os; print os.path.abspath(os.path.join(os.path.dirname(\"$0\"), '..'))"`

# Run Python with your env set as Python's PYTHONHOME
export PYTHONHOME=$ENV
exec $PYTHON "$@" 
```

只需将其转储到一个文件中，赋予它可执行权限并使用它来启动您的 wxPython 应用程序而不是 python 可执行文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-11T23:38:29.353

我使用 anaconda python 发行版并遇到了与您描述的相同的问题。即，“此程序需要访问屏幕。请使用 Python 的框架构建运行，并且仅当您在 Mac 的主显示屏上登录时运行。” 由于设置不同，我不知道我的解决方案是否可以帮助您，但您可以尝试一下。

这是我解决此问题的方法：

Step1：安装pythonw（我使用命令“conda install python.app”，但我确信Enthought必须使用不同的命令）

第2步：使用pythonw而不是python启动.py文件。

希望能帮助到你。

# xml - XSLT 有没有很好的过滤方法

> ID：10386603
> 
> 赞同：0
> 
> 时间：2012-04-30T15:51:36.697
> 
> 标签：xml, xslt, filter

我正在尝试过滤记录集，并且我已经让它与以下 XSLT 一起使用，但它看起来一点也不好看：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:r="http://www.castiron.com/response" exclude-result-prefixes="r">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="/">
        <xsl:element name="Response">
            <xsl:element name="rcode">
                <xsl:text>0</xsl:text>
            </xsl:element>
            <xsl:element name="rmesage">
                <xsl:text>0</xsl:text>
            </xsl:element>
            <xsl:element name="payload">

                <xsl:for-each select="Response/payload/globalBuy[season='A09']">

                    <xsl:element name="season"><xsl:value-of select="season"/></xsl:element>
                    <xsl:element name="productId"><xsl:value-of select="productId"/></xsl:element>
                    <xsl:element name="globalBuyFlag"><xsl:value-of select="globalBuyFlag"/></xsl:element>

                </xsl:for-each>

            </xsl:element>
        </xsl:element>

    </xsl:template>

</xsl:stylesheet> 
```

此外，当命名空间在根目录中弹出时，我看到了问题。下面的示例 XML：

```
<?xml version="1.0" encoding="UTF8"?>
<Response xmlns="http://www.castiron.com/response">
    <payload>
        <globalBuy>
            <season>CD12</season>
            <productId>123456</productId>
            <globalBuyFlag>XXL</globalBuyFlag>
        </globalBuy>
    </payload>
</Response> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:31:57.937

**您可以通过删除xsl:element**的所有用途来简化您的代码。除非您希望动态生成元素名称，否则将元素写为普通 XML 非常简单。所以不用写这个......

```
<xsl:element name="rcode">
    <xsl:text>0</xsl:text>
</xsl:element> 
```

就写这个...

```
<rcode>0</rcode> 
```

至于过滤，如果您只想复制 XML，但只包含与过滤器匹配的某些项目，那么您可以覆盖身份模板，并让模板与您不想包含的项目匹配**，**然后简单地忽略他们。

试试这个简化的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="/Response">
      <xsl:copy>
         <xsl:apply-templates select="@*" />
         <rcode>0</rcode>
         <rmesage>0</rmesage>
         <xsl:apply-templates select="node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="globalBuy[not(season='A09')]" />

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>   
</xsl:stylesheet> 
```

应用于以下 XML 时

```
<Response>
   <payload>
      <globalBuy>
         <season>CD12</season>
         <productId>123456</productId>
         <globalBuyFlag>XXL</globalBuyFlag>
      </globalBuy>
      <globalBuy>
         <season>A09</season>
         <productId>123456b</productId>
         <globalBuyFlag>XXLb</globalBuyFlag>
      </globalBuy>
   </payload>
</Response> 
```

然后输出如下

```
<Response>
   <rcode>0</rcode>
   <rmesage>0</rmesage>
   <payload>
      <globalBuy>
         <season>A09</season>
         <productId>123456b</productId>
      <globalBuyFlag>XXLb</globalBuyFlag>
   </globalBuy>
   </payload>
</Response> 
```

请注意，我在此示例中删除了所有名称空间以使事情更简单。

**编辑：**如果您确实想处理默认名称空间，在 XSLT 1.0 中，您将明确引用您匹配的每个元素的名称空间。你会做这样的事情：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:r="http://www.castiron.com/response" exclude-result-prefixes="r">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="/r:Response">
      <xsl:copy>
         <rcode xmlns="http://www.castiron.com/response">0</rcode>
         <rmesage xmlns="http://www.castiron.com/response">0</rmesage>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="r:globalBuy[not(r:season='A09')]" />

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>   
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T16:36:28.443

美在旁观者的眼中; 我不确定您的代码的哪个方面不好看。但我会从这样重写它开始：

```
<xsl:template match="/">
    <Response>
        <rcode>0</rcode>
        <rmesage>0</rmesage>
        <payload>
            <xsl:copy-of select="Response/payload/globalBuy[season='A09']/
                                    (season, productId, globalBuyFlag)">
        </payload>
    </Response>

</xsl:template> 
```

xsl:copy-of 表达式使用 XPath 2.0；如果你想要一个 XSLT 1.0 解决方案，你必须把 xsl:for-each 放回去。

至于命名空间，只需在谷歌上搜索“XSLT 默认命名空间”，您就会发现一百万个解释您的错误的帖子。

# c# - 将结构数组从 C# 传递到 C++

> ID：10386610
> 
> 赞同：2
> 
> 时间：2012-04-30T15:52:03.093
> 
> 标签：c#, c++, marshalling

我需要将结构数组从 C++ 传递到 C#。我有以下代码，它首先创建一个临时结构，然后`memcpy`将其执行到 C# 端结构的地址。我用相同的元素顺序定义了两边的结构。

当我调试时，我看到临时结构已正确填充，temp_buf（目标变量的地址）在每次迭代时结构的大小都会增加，并且`memcpy`不会返回任何错误。

但是，只有数组的第一项设置在 C# 端。

以下是 C# 端的定义：

```
[DllImport(@"MyAwesomeDLL.dll", CallingConvention = CallingConvention.Cdecl, EntryPoint = "?GetDevices@@YAHPAXIPAIPAUDEVICE_S@@@Z", CharSet = CharSet.Auto)]
public static extern Int32 GetCoolDevices(out UInt32 p_deviceCount, out Device_s p_devicesBuf);

[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi, Pack = 1)]
public struct Device_s
{
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 51)]
    public String DeviceName;
    public UInt32 DeviceID;
} 
```

以下是 C++ 方面的定义：

```
#pragma pack (1)
typedef struct
{
    TCHAR device_name [51];
    UINT32 device_rid;
} DEVICE_S;

int GetDevices (UINT32 *device_count, DEVICE_S *devices_buf)
{
....

    while(....)
    {
        DEVICE_S tmp_device;
        memset(&tmp_device, 0, sizeof(DEVICE_S));

        tmp_device.device_id = 5;
        sprintf( tmp_device.device_name, "a string");

        DEVICE_S *temp_buf = &(devices_buf[i]);
        size_t mysize =  sizeof(DEVICE_S);
        memcpy(temp_buf, &tmp_device, mysize);

        i++;
        getNextDevice();
    }

.....
} 
```

而且，我是这样称呼它的：

```
UInt32 MyDecDeviceCnt = 0;
Device_s[] MyDecDevices = new Device_s[10];
int ret = GetCoolDevices(out MyDecDeviceCnt, out MyDecDevices[0]); 
```

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:48:46.437

您创建的 API 存在问题。您在托管端为数组分配内存（10 个元素），但您没有将数组中的元素数量传递给非托管端。编组器无法确定您要编组 10 个元素，并且非托管代码不知道它正在写入的缓冲区的大小。

您可以使用[MarshalAsAttribute.SizeParamIndex](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshalasattribute.sizeparamindex.aspx)向编组器提供有关数组大小的信息。还可以查看文章[Default Marshaling for Arrays](http://msdn.microsoft.com/en-us/library/z6cfh6e6.aspx)。（特别是有关 C 样式数组的信息。）

鉴于您的 API 的性质，您可以更改它，以便在非托管端分配内存。您必须使用安全数组或 hglobal 来允许在托管端释放内存。

# javascript - 解析变量以在 Javascript 中运行

> ID：10386615
> 
> 赞同：-1
> 
> 时间：2012-04-30T15:52:19.973
> 
> 标签：javascript

我有一个设置变量的 onclick 事件。然后我想将此变量解析为一个函数。

函数定义如下：

```
function priceset(obj, options) 
```

我的问题是如何将变量（该变量称为 productprice）解析为函数，然后在函数中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:00:29.537

如果你有这样的功能：

```
function SayGreeting(msg, qty) {
    for (var i = 0; i < qty; i++) {
        // do whatever you want here
        console.log(msg);
    }
} 
```

然后，要调用此函数并传递一些变量，请执行以下操作：

```
var num = 12;
var greeting = "Hello";

SayGreeting(greeting, num); 
```

如果您的号码实际上是一个字符串并且您想将其更改为一个数字，您可以这样做：

```
var num = "12";
var greeting = "Hello";

SayGreeting(greeting, +num); 
```

前面`+`的字符串，会尝试将字符串解析成数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:59:11.167

要从字段值中生成浮点数，您可以使用以下命令：

```
var myFloatValue = parseFloat(myStringValue); 
```

# haskell - 如何实现双向链表

> ID：10386616
> 
> 赞同：28
> 
> 时间：2012-04-30T15:52:22.757
> 
> 标签：haskell, doubly-linked-list

是否有可能在 Haskell 中有一个双向链表，实现它们的理想解决方案是什么？我正在实现一个场景图，其中每个小部件都有一个父级和一个子级，向上和向下查看图形是有益的。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-30T16:03:03.170

在 Haskell 中拥有一个双向链表是不切实际的，因为你必须一次构建它。

例如，假设您有一个`[1, 2, 3, 4, 5]`要进行双向链接的列表。现在，让我们想象一下列表是如何表示的：

```
data DoubleList a
  = LeftEnd  a (DoubleList a)
  | Middle   a (DoubleList a) (DoubleList a)
  | RightEnd a (DoubleList a) 
```

（为简单起见，我在两端使用了两个不同的构造函数）

要构建上面的列表，您必须首先构建第一个元素：

```
let e1 = LeftEnd  1 ... 
```

但是要构造第一个元素，您已经需要第二个元素：

```
let e1 = LeftEnd  1 e2
    e2 = Middle   2 e1 ... 
```

对于第二个元素，您需要第三个元素，依此类推：

```
let e1 = LeftEnd  1 e2
    e2 = Middle   2 e1 e3
    e3 = Middle   3 e2 e4
    e4 = Middle   4 e3 e5
    e5 = RightEnd 5 e4 
```

由于惰性求值，这在 Haskell 中是可能的；这种策略被称为“打结”（而且您不必将其全部放在一个`let`块中；您可以将结构划分为功能）

但是，换句话说，要创建一个双向链表，你需要一次构建它，如果你想改变它的任何部分，你要么需要使用[Zipper](http://en.wikipedia.org/wiki/Zipper_%28data_structure%29) ，要么只制作它的完整副本每次。

我建议改用[`Data.Sequence`](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Sequence.html)，这是一个优化的基于手指树的顺序存储实现。它支持非常快速的插入、删除和迭代，同时仍然是一个纯粹的函数式数据结构。

否则，您可能只想使用拉链，但将它们用于树而不是列表。有关 Zipper 的更多信息可以在[Haskell Wiki](http://www.haskell.org/haskellwiki/Zipper)上找到。拉链非常适合这种情况，因为它们提供了您所追求的确切功能：如果您使用拉链访问一棵树，您可以访问您正在访问的树部分的“父母”，但树本身不必包含父引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T03:35:47.043

由于您（通常）在 Haskell 中没有 OO 样式的对象，因此认为数据具有自我意识是很奇怪的。请务必注意，您通常不会在 Haskell 数据类型中使用聚合，而是倾向于组合。

您可能想查看[XMonad](http://mth.io/talks/xmonad.pdf)以查看他们的设计是否符合您的需求（代码的可读性令人惊讶）。

您可能还想重新构建您的设计，以便您永远不需要俯视您（例如，通过传递子“回调”）。

您可能还想看看是否可以为整个图表编写一个拉链。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-11T12:54:03.353

*双向链表*不是数据类型，而是实现细节。我认为您想要的是一个类似列表的数据结构，您可以在其中有效地左右移动。这个数据结构是一个列表的拉链，只是一对列表。前缀以相反的顺序表示。要向左/向右移动，您只需将后缀列表的头部移动到前缀上，反之亦然。

# maven - 使用解压缩的 JAR 依赖项构建 WAR？

> ID：10386618
> 
> 赞同：0
> 
> 时间：2012-04-30T15:52:26.750
> 
> 标签：maven, jar, dependencies, war, unpack

我想将我`.class`的所有依赖项 jar 包含到 WAR`classes/`目录中，而不是在`lib/`目录中包含一个 Jar。

我有 ：

```
my-webapp/
  ...
  WEB-INF/
    lib/
      mylib-1.0-SNAPSHOT.jar 
```

我想 ：

```
my-webapp/
  ...
  WEB-INF/
    classes/
      mylib-1.0-SNAPSHOT (all **.class**) 
```

我也看到*了 maven-dependency-plugin*但它要求我的 jar 安装到本地或远程存储库中。但是`mylib-1.0-SNAPSHOT.jar`在我的 WAR 之前编译，如果我打电话`mvn package`，那就失败了！

那么，如何将我的 jar 依赖项解压到 war 类中呢？（就像`maven-shade-plugin`罐子一样）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:29:32.130

我想把这个写在一个commnet中，但是文本太长了。

对不起，我不明白你的意思。您有多个共享类的 web 应用程序，因此您已将这些公共类打包到 JAR 中，现在您可以分发 jar 并避免代码重复。那没问题。此时，对于 Webapp，在 /WEB-INF/classes 或 /WEB-INF/lib/ 中将类作为 jar 的一部分没有区别，webapp 在这两种情况下都可以使用这些类。

使用 Maven，您应该有 n 个项目。一个用于您的公共 jar，然后，一个用于您拥有的每个 webapp（您的公共 jar 是一个依赖项）。在为您的 webapp 构建 WAR 之前，如果公共类已更改，您应该首先安装（在您的公共存储库中）jar: `mvn install`。安装 jar 后，您可以构建 WAR：`mvn war:war`

# google-analytics - 从谷歌分析 php 界面 (gapi) 获取唯一访问者

> ID：10386619
> 
> 赞同：2
> 
> 时间：2012-04-30T15:52:33.907
> 
> 标签：google-analytics, google-analytics-api, visitors

我正在使用代码：

```
function get_indiv_visitors($site_id, $start_date, $end_date=NULL) {
        require 'config.php';
        $ga = new gapi($ga_email,$ga_password);
        $ga->requestReportData($site_id, array('pagePath'),array('Visitors'),         $sort_metric=null, $filter=null, $start_date, $end_date);
        $totalvisitors = $ga->getVisitors();
        return $totalvisitors;
} 
```

此代码有效，但返回的数字大于访问次数（我与谷歌分析网站交叉引用，因此这些数字绝对正确）。我应该有更多的访问者而不是访问量是没有意义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:02:04.720

它与 GA 如何跟踪访问量和访问者有关：

> 访问被分配到第一页而不是后续页面，而唯一访问者被分配到每个页面

在网络分析中查看[唯一访问者、0 次访问和页面](http://www.michaelwhitaker.com/blog/2010/04/23/unique-visitors-0-visits-and-pages-in-web-analytics/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T09:44:40.507

将维度更改为“userDefinedValue”

```
function get_indiv_visitors($site_id, $start_date, $end_date=NULL) {
        require 'config.php';
        $ga = new gapi($ga_email,$ga_password);
        $ga->requestReportData($site_id, array('userDefinedValue'),array('Visitors'),            $sort_metric=null, $filter=null, $start_date, $end_date);
        $totalvisitors = $ga->getVisitors();
        return $totalvisitors;
} 
```

# jquery - 使用 MVC 4 提供仪表板和报告功能

> ID：10386621
> 
> 赞同：2
> 
> 时间：2012-04-30T15:52:42.413
> 
> 标签：jquery, asp.net-mvc, jqgrid, reporting

我目前正在考虑使用 Asp.net MVC 3 或 4 在工作中实现报告解决方案。这个版本我们希望实现一个简单的仪表板和一些提供排序、过滤、分页等的简单网格......我的选项到目前为止，我们已经探索过：在客户端使用 JQGrid、JQPlot 或购买第三方控件套件，如 Telerik 或 DevExpress。钱真的不是问题。如果必须，我们愿意为控制付费。我的问题是，每种选择（JQuery 与 MVC 控件）的优点/缺点是什么？做决定时我应该考虑什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:06:54.997

“MVC 控件”实际上并不存在，任何类似的东西`@Html.EditorFor()`都只是一个 Html Helper，它会为您编写简单的 html。MVC 旨在将 javascript 与 Asp.Net 完全分离，并且实际上旨在与 jQuery 一起使用（项目以已经在其中的 jQuery 引用开始）。

就个人而言，我会坚持使用 jQuery/jQueryUI 和可能的一些插件。它们受到广泛支持并且是开源的，因此您可以根据需要自定义它们，这与可能不允许这样做的专有东西不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T21:40:41.293

还可以考虑涉及 Javascript MVVM 框架，如 Knockout.js 等。

# android - Android：列表视图中的多个文本视图打印错误

> ID：10386628
> 
> 赞同：0
> 
> 时间：2012-04-30T15:53:25.703
> 
> 标签：android, listview, textview

我的问题如下：使用此[示例](http://www.technotalkative.com/android-%E2%80%93-listview-%E2%80%93-2-custom-listview/)，我尝试为列表视图创建一个自定义适配器，该适配器`ArrayLists`从数据库中获取 2（名称和数字）并将其数据输出到列表中的文本视图中。数据显示在列表中，但是它们单独显示，这意味着名称显示为数字，您可以单独单击它们，而不是两者一起作为列表中的一个条目。附上必要的代码。

我的适配器类：

```
public class ListViewCustomAdapter extends BaseAdapter {  

    public Activity context;  
    public LayoutInflater inflater; 
    ArrayList<String> names = new ArrayList<String>();
    ArrayList<String> nos = new ArrayList<String>();

    public ListViewCustomAdapter(Activity context,ArrayList<String> names, ArrayList<String> nos) {  
        super();  

        this.context = context;  
        this.names = names;
        this.nos=nos;

        this.inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);  
    }
    public int getCount() {  
        // TODO Auto-generated method stub  
        return names.size();  
    }  

    public Object getItem(int position) {  
        // TODO Auto-generated method stub  
        return null;  
    }  

    public long getItemId(int position) {  
        // TODO Auto-generated method stub  
        return 0;  
    }  

    public static class ViewHolder  
    {  
        TextView txtViewName;  
        TextView txtViewNo;  
    }  
    public View getView(int position, View convertView, ViewGroup parent) {  
        // TODO Auto-generated method stub  

        ViewHolder holder;  
        if(convertView==null)  
        {  
            holder = new ViewHolder();  
            convertView = inflater.inflate(R.layout.editlist, null);  

           // holder.imgViewLogo = (ImageView) convertView.findViewById(R.id.imgViewLogo);  
            holder.txtViewName = (TextView) convertView.findViewById(R.id.textView1);  
            holder.txtViewNo = (TextView) convertView.findViewById(R.id.textView2);  

            convertView.setTag(holder);  
        }  
        else  
            holder=(ViewHolder)convertView.getTag();  

        //holder.imgViewLogo.setImageResource(R.drawable.icon);  
        holder.txtViewName.setText(names.get(position));  
        holder.txtViewNo.setText(nos.get(position));  

        return convertView;  
    }   

} 
```

列表视图 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout  
    android:id="@+id/relativeLayout1"  
    android:layout_width="fill_parent"  
    android:layout_height="fill_parent"  
    xmlns:android="http://schemas.android.com/apk/res/android"  
    android:padding="5dip">  

    <TextView  
        android:textAppearance="?android:attr/textAppearanceLarge"  
        android:layout_height="wrap_content"  
        android:text="TextView"  
        android:layout_width="wrap_content"  
        android:id="@+id/textView1"   
        android:layout_marginLeft="2dip">  
    </TextView>  

    <TextView  
        android:layout_height="wrap_content"  
        android:text="TextView"  
        android:layout_width="wrap_content"  
        android:id="@+id/textView2"  
        android:layout_toRightOf="@+id/textView1"   
        android:layout_marginLeft="2dip">  
    </TextView>    

</RelativeLayout> 
```

使用适配器的主要活动：

```
public class EditActivity extends ListActivity implements OnClickListener, OnItemClickListener{
    Button b_add;
    ListView lv;
    SQLUtils sqlUtils = new SQLUtils(this);
     ListViewCustomAdapter adapter; 
     ArrayList<String> names = new ArrayList<String>();
        ArrayList<String> nos = new ArrayList<String>();
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
         setContentView(R.layout.edit_layout);

         b_add = (Button)findViewById(R.id.b_add);
         b_add.setOnClickListener(this);
         lv = (ListView)findViewById(android.R.id.list);
         names=sqlUtils.getActions(1);
         nos=sqlUtils.getActions(2);

         //lv.setOnItemClickListener(this);
         adapter = new ListViewCustomAdapter(this, names, nos);  
            lv.setAdapter(adapter); 
    }
[1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:00:48.380

如果您希望适配器中的每个项目都包含两个 TextView，请让您的 ViewHolder 类扩展 LinearLayout 并将其设置为垂直。或者，您可以使用一个 TextView 而不是您自己的类/线性布局，并将其设为多行，然后将文本设置为 name + "\n" + number

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:25:44.190

我对您的问题感到困惑，但是查看教程和您的代码中的差异，我会*盲目*猜测。

您扩展 ListActivity 而不是像示例中的常规 Activity ，对于 ListActivity 您定义一个 onListItemClick 侦听器，如下所示：

```
public void onListItemClick(AdapterView<?> parent, View view, int position, long id) {
    String title = ((TextView) view.findViewById(R.id.textView1)).getText().toString();
    String description = ((TextView) view.findViewById(R.id.textView2)).getText().toString();
    Toast.makeText(this, "Title => " + title + " => n Description " + description, Toast.LENGTH_SHORT).show();
} 
```

# android - 垂直 ListView / CoverFlow 使所选图像居中

> ID：10386632
> 
> 赞同：2
> 
> 时间：2012-04-30T15:53:42.473
> 
> 标签：android, listview, user-interface, gallery, center

我在这个主题上搜索并尝试了很多。我想做的基本上是一个垂直的画廊/封面流。我知道这应该通过自定义 ListView 来完成。而我正是这样做的。

这样做时，我似乎有两个我无法解决的问题：

i）在列表中滚动时，我希望项目在“插槽”中移动。最重要的是，居中的项目应该正好移动到我画的 roundRect 上方。为了更好的可视化：这正是“CoverFlow”所做的，但是以水平的方式。试图覆盖 onScrollStateChanged 似乎无法确定地工作。这是我尝试的方式：

```
 public void registerScrollListener(){
       setOnScrollListener(new OnScrollListener() {

        public void onScrollStateChanged(AbsListView view, int scrollState) {
        if(scrollState == OnScrollListener.SCROLL_STATE_IDLE){
            int first = getFirstVisiblePosition();
            int last = getLastVisiblePosition();

            List<View> childs = new ArrayList<View>();

            for(int i = first; i < last; i++){
                childs.add(getChildAt(i));
            }
            int centerHeight = getHeightCenterOfSideView();
            int centerPos = 0;
            int distance = Integer.MAX_VALUE;
            for(View childView : childs){
                int newDist = Math.abs(centerHeight - (childView.getTop() + (childView.getHeight()/2)));
                if(newDist < distance){
                    distance = newDist;
                    centerPos = childs.indexOf(childView);
                }
            }
            View childView = getChildAt(centerPos);
            smoothScrollToPosition(centerPos, centerHeight - (childView.getTop() + (childView.getHeight()/2)));
        }
        }

        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {
            // TODO Auto-generated method stub

        }
    });
   } 
```

ii) 在非圆形 ListView 中滚动时，我无法将最后一项或第一项居中，因为进一步滚动时列表视图为空。这样做的一种可能性是在末尾和顶部添加一些额外的项目。问题是我想使用列表视图分隔符，它看起来很丑，里面有空视图。另一件事是我想让它不依赖于显示尺寸，这应该很困难，因为最后一项不会完全居中。

谁能帮我解决这两个问题中的任何一个？最简单的方法是获取一些现有代码。

谢谢！

# java - ubuntu上的JNI不满意链接错误

> ID：10386644
> 
> 赞同：4
> 
> 时间：2012-04-30T15:54:40.447
> 
> 标签：java, java-native-interface

我在 Ubuntu 下使用 Java 和 Netbeans。我正在使用 JNI 并希望在 linux 中加载具有“.so”扩展名的 dll。为什么这段代码有效：

```
static {
    System.load("/home/user/NetBeansProjects/JD2XX-DLL2/dist/jd2xx.so");
} 
```

但这不是：

```
static {
    System.loadLibrary("jd2xx");
} 
```

使用 netbeans 中指定的 VM 选项：

```
-Djava.library.path="/home/user/NetBeansProjects/JD2XX-DLL2/dist/" 
```

我收到一个错误：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: 
  no jd2xx.so in java.library.path 
```

这适用于我在 Windows 下。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T15:56:24.547

在 Unix 系统上，

```
System.loadLibrary("Foo"); 
```

`libFoo.so`查找在库搜索路径中调用的文件。

相应地重命名文件。

相比之下，在 Windows 系统上，该调用将查找`Foo.dll`在库搜索路径中调用的文件。

# ruby-on-rails - Web 服务：在 rails 1.2 中接受 JSON mime 类型

> ID：10386650
> 
> 赞同：0
> 
> 时间：2012-04-30T15:55:18.107
> 
> 标签：ruby-on-rails, ruby, json, rest

我正在使用 JSON 响应的旧版 rails 1.2.6 应用程序中构建 Web 服务，并且我试图使其也接受 JSON，而不是 URL 编码参数。

我把它放在我的控制器中：

```
param_parsers[Mime::JSON] = lambda { |data| JSON.parse(data) } 
```

这不起作用，因为表现良好的休息客户端发送：

```
Content-Type: application/json; charset=utf-8 
```

如您所见，字符编码附加到 Content-Type 标头，但 rails 1.2 对整个“Content-Type”标头进行了简单的字符串比较，并被“charset=utf-8”部分丢弃。

**rails-1.2/gems/gems/actionpack-1.13.6/lib/action_controller/request.rb**

```
def content_type
  @content_type ||=
    begin
      content_type = @env['CONTENT_TYPE'].to_s.downcase

      if x_post_format = @env['HTTP_X_POST_DATA_FORMAT']
        case x_post_format.to_s.downcase
        when 'yaml'
          content_type = 'application/x-yaml'
        when 'xml'
          content_type = 'application/xml'
        end
      end

      Mime::Type.lookup(content_type)
    end
end 
```

**rails-1.2/gems/gems/actionpack-1.13.6/lib/action_controller/mime_type.rb**

```
 def lookup(string)
    LOOKUP[string]
  end 
```

在 mime_type.rb 文件的下方：

```
LOOKUP["application/json"]         = JSON
LOOKUP["text/x-json"]              = JSON 
```

@env['CONTENT_TYPE'] 是 "application/json; charset=utf-8"

Mime::Type.lookup(content_type) 只是返回 LOOKUP[content_type]，它不会匹配，因为当时内容类型仍然附加了“;charset=utf-8”。

content_type 应该在哪里去除 charset=utf-8？你会如何解决这个问题？它在 Rails3 上是如何工作的，因为从我的角度来看，它几乎与 mime_type.rb 相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T21:24:11.270

答案来自阅读 parse_formatted_pa​​rameters() 的代码。我使用 lambda 来创建块，这个 rails 代码专门寻找 Proc。

我刚变

```
param_parsers[Mime::JSON] = lambda { |data| JSON.parse(data) } 
```

至

```
param_parsers[Mime::JSON] = Proc.new { |data| JSON.parse(data) } 
```

现在一切都按预期工作。我把它改回 lambda，params 又变空了，然后回到 Proc 它又工作了。

奇怪，因为即使那个代码片段给了我有效的解决方案，它似乎也不是问题所在。

```
>> case Proc.new{}; when Proc; "a"; when :xml_simple; "b" end
"a"
>> case lambda{}; when Proc; "a"; when :xml_simple; "b" end 
"a" 
```

**rails-1.2/gems/gems/actionpack-1.13.6/lib/action_controller/cgi_ext/cgi_methods.rb**

```
def parse_formatted_request_parameters(mime_type, raw_post_data)
  case strategy = ActionController::Base.param_parsers[mime_type]
    when Proc
      strategy.call(raw_post_data)
    when :xml_simple
      raw_post_data.blank? ? {} : Hash.from_xml(raw_post_data)
    when :yaml
      YAML.load(raw_post_data)
    when :xml_node
      node = XmlNode.from_xml(raw_post_data)
      { node.node_name => node }
  end 
```

# c# - 使用正则表达式检查两个命名匹配组的相等性

> ID：10386656
> 
> 赞同：1
> 
> 时间：2012-04-30T15:55:38.417
> 
> 标签：c#, regex, backreference

我有这个正则表达式：

```
<%(?<begintag>[^>]+)%>(?<inner>(.+?))<%/(?<endtag>[^%]+)%> 
```

我想要实现的是，检查**begintag**和**endtag**是否相等。
考虑这个输入：

```
<%layout%>
    <%pagetitle="test">
        <%products%>
            <div class="product">
                <img src="<%product-smallimage%>" class="thumbnail" alt="<%product-title%>"/>
                <a class="buy-link" href="<%product-url%>"><%product-title%></a>
            </div>
        <%/products%> 
```

有什么办法可以检查吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:38:25.203

正如 Igor 所说，您可以捕获开始标签的名称，然后使用反向引用来匹配具有相同名称的结束标签。不过，他的正则表达式有几个问题；这个有效：

```
(?s)<%(?<begintag>[^>]+)%>(.+?)<%/\k<begintag>%> 
```

这里我使用了一个*命名*的反向引用 - `\k<begintag>`- 而不是一个编号的 - `\1`。如果您使用命名组，使用命名反向引用总是一个好主意，但在 .NET 中它是必不可少的。在 .NET 中，`\1`不匹配*仅仅*`(?<begintag>[^>]+)`因为它是第一组。

我还使用了单行模式 - `(?s)`- 以允许点`(.+?)`匹配换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:34:49.813

您可以尝试使用正则表达式[反向引用](http://www.regular-expressions.info/brackets.html)（`\1`如下）：

```
<%(?<begintag>[^>]+)%>(?<inner>(.+?))<%/\1%> 
```

# c# - WPF 触摸事件剔除

> ID：10386660
> 
> 赞同：0
> 
> 时间：2012-04-30T15:56:03.867
> 
> 标签：c#, wpf, touch

我有点坚持这个。

我的应用程序的 UI 有一个矩形和不透明蒙版，它会改变以显示 UI 的不同部分。我想要做的是让透明区域内发生的任何触摸事件通过，并阻止外部的触摸事件。

但是，让我的矩形通过*任何*事件的唯一方法是将 IsHitTestVisible 设置为 False。我尝试捕获 [Preview]TouchUp/Move/Down 并将处理设置为 False，但这没有区别。

有什么我想念的吗？

干杯

更新：抱歉，如果不清楚，我不希望触摸事件自行失败。我会检查它们是否落在掩码中，然后将 Handled 设置为 True。但似乎即使我将 Handled 设置为 False，事件仍然不会失败。除了 IsHitTestVisible=False 之外，我似乎没有做任何事情可以让事件失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:48:20.023

我认为这是正常行为，因为不透明度与...不透明度一起使用，但矩形仍然位于其他控件之上。您可以使用剪辑而不是不透明度（但您将只有一个是/否不透明度，没有阴影）或者您可以拥有所有控件的字典（例如），说明它是可见还是被不透明蒙版隐藏。然后将矩形 IsHitTestVisible 设置为 false，并在 Preview(TouchUp/Move/Down) 事件处理程序中，根据控件是否可见来取消事件。

# performance - Doctrine 2.0 中 QueryBuilder 与延迟加载的优势

> ID：10386662
> 
> 赞同：3
> 
> 时间：2012-04-30T15:56:10.357
> 
> 标签：performance, zend-framework, doctrine-orm, doctrine-query

我正在创建一个使用 Doctrine 2.0 的 Zend Framework 项目

在创建自己的自定义存储库时，我最初在返回结果时“作弊”，而不是通过计算 DQL（或使用 QueryBuilder）来获取结果，我只是使用了模型关联函数：

```
$apps = new \Doctrine\Common\Collections\ArrayCollection();
foreach ($reseller->getShops() as $currentShop) {
    foreach ($currentShop->getProducts() as $product) {
        $app = $product->getLicense()->getApplication();
        if (!$apps->contains($app))
            $apps->add($app);
    }
} 
```

我现在大部分时间都在学习 DQL 以及如何使用 QueryBuilder 并得出以下结论：

```
$shopQuery = $this->getQueryBuilder();
$shopQuery->select('s2.id')
    ->from('Software2\DEP\Entities\Shop', 's2')
    ->innerJoin('s.reseller', 'r2')
    ->where($shopQuery->expr()->eq('r2.id', '?1'));

$appQuery = $this->getQueryBuilder();
$appQuery->select(array('a.name AS application_name', 'l.name AS license_name', 's.name AS shop_name'))
    ->from('Software2\DEP\Entities\Application', 'a')
    ->innerJoin('a.licenses', 'l')
    ->innerJoin('l.shops', 'p')
    ->innerJoin('p.shop', 's')
    ->where($appQuery->expr()->in(
            's.id',
            $shopQuery->getDQL()
            )
        )
    ->groupBy('a.name')
    ->orderBy('a.name', 'ASC');
$appQuery->setParameter(1, $reseller->getId()); 
```

...产生以下 DQL：

```
SELECT a.name AS application_name, l.name AS license_name, s.name AS shop_name FROM Software2\DEP\Entities\Application a INNER JOIN a.licenses l INNER JOIN l.shops p INNER JOIN p.shop s WHERE s.id IN(SELECT s2.id FROM Software2\DEP\Entities\Shop s2 INNER JOIN s.reseller r2 WHERE r2.id = ?1) GROUP BY a.name ORDER BY a.name ASC 
```

经过所有这些努力，我发现运行 QueryBuilder 需要 0.0743 毫秒，而原始（惰性）方法只需要 0.0701 毫秒。我可以通过直接运行生成的 DQL（使用 createQuery）来节省一些时间，这会将它降低到 0.069 毫秒，但是真的值得所有这些努力吗？

我假设惰性（原始）方法会导致更多查询，或者 Doctrine 是否以某种方式处理？

输入赞赏

# sql-server - 是否可以从外部 SQL Server 读取二进制数据（使用其他 prog 环境）

> ID：10386663
> 
> 赞同：0
> 
> 时间：2012-04-30T15:56:12.697
> 
> 标签：sql-server, binary, hex

我使用 SQL Server 2005。我想知道是否可以在其他环境（例如 Matlab）中读取从 SQL-Server 打印的二进制数据？

例如，

```
SET NOCOUNT ON 
CREATE TABLE #Temp ( C1 binary ) INSERT INTO #Temp (C1) SELECT 100

SELECT * FROM #Temp

DROP TABLE #Temp 
```

结果是`0x64`我认为是十六进制表示法。使用记事本查看时，此数据看起来相同。但是，在记事本中打开从 Matlab 编写的二进制 100 绝对不是十六进制！请帮助/评论！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:05:49.627

鉴于它们处理二进制输入，您应该能够在其他工具中从 SQL Server 读取二进制输出。

从您所写的内容来看，您并没有以等效的方式比较事物（苹果对苹果）。十六进制只是以人类可感知的形式表示位的一种方式，因此除非您的查看方法都能够使用相同的符号，否则您可能会看到不同的东西。我很确定记事本不会做十六进制。

0x64 的 SSMS“输出”是工具在打印/屏幕上表示二进制数据的方式 - 在这种情况下，十进制值 100。如果您从 SSMS 窗口剪切和粘贴，您实际上是在剪切文本字符串“0x64”，因此在记事本中打开它*看起来*是一样的，但实际上它不是您原来的十进制 100 值。

如果您从 Matlab 保存文件并在记事本中打开该文件，您应该会看到被解释为文本的字节值，在这种情况下可能是“d”（小写“D”），因为那是 ASCII/UTF-十进制 100 的 8 值。

# ruby-on-rails - 有什么方法可以清除未使用的资产？

> ID：10386669
> 
> 赞同：6
> 
> 时间：2012-04-30T15:56:36.417
> 
> 标签：ruby-on-rails, rake, asset-pipeline

```
rake assets:precompile 
```

创建新文件，如 application-be2b8c92856ffacee861d9e9c2935e3e，但旧文件名为 application-c730047bc2a5cf3a7​​06aa3a9f998ab77.css。它永远不会再被使用了。有没有办法清除更改的资产？我不想删除所有资产目录，因为对于所有未触及的文件来说，这似乎是一种矫枉过正（而且在 git 中看起来很糟糕）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-04T18:42:15.723

实际上，您通常*应该*保留一些旧的资产版本，因为它们可能被缓存的东西或在用户浏览器中打开的页面引用。想象一下，如果用户在您清除资产前一秒访问了您的页面。HTML 被加载，当浏览器随后尝试检索声明的样式表和脚本时，它们就消失了。也许这对您来说是一个极端情况，但如果 HTML 内容来自缓存（例如，您正在缓存内容），它仍然可能在几天后发生。旧内容可能会缓存在中间的某个地方，但即使使用这些资产使用的积极缓存，您也不能依赖它。

那么，您真正想要的是保留一些最新版本并删除真正旧的东西。这正是`brake assets:clean`它所做的，如果你愿意，你可以在预编译之前每次运行它。这是显示它保留2个备份[的来源。](https://github.com/sstephenson/sprockets/blob/777f1ebfcbb397479d28509bce2ac67d12d40320/lib/sprockets/manifest.rb#L252)

如果您可以将“2”更改为 0，它将从字面上回答这个问题。我不确定如何更改该值，尽管它是该函数中的一个参数，因此它应该是可配置的。但无论如何，这无论如何都不是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T16:32:29.070

文件名不是根据原文件的md5吗？

这意味着您可以删除整个目录，然后运行`rake assets:precompile`，因为文件的内容是相同的，所以您最终会得到相同的文件名（具有相同的内容）。因此，您`git status`不会注意到那些“新”文件，因为它们与其存储中已经存在的文件相同。它只会注意到一些文件已被删除。

例如：

```
$ ls
application-<md5-old>.css
application-<md5-current>.css
$ rm *
$ rake assets:precompile
$ ls
application-<md5-current>.css
$ git status
deleted: application-<md5-old>.css 
```

# io - 在 Lua 中读取整个文件

> ID：10386672
> 
> 赞同：22
> 
> 时间：2012-04-30T15:56:47.340
> 
> 标签：io, lua

我正在尝试读取完整的 mp3 文件以读出 id3 标签。那时我注意到 file:read("*a") 显然没有读取完整文件，而是读取一小部分。因此，我尝试构建某种解决方法以获取整个文件的内容：

```
function readAll(file)
    local f = io.open(file, "r")
    local content = ""
    local length = 0

    while f:read(0) ~= "" do
        local current = f:read("*all")

        print(#current, length)
        length = length + #current

        content = content .. current
    end

    return content
end 
```

对于我的测试文件，这表明执行了 256 次读取操作，总共读取了 ~113kB（整个文件为 ~7MB）。虽然这应该足以读取大多数 id3 标签，但我想知道为什么 Lua 会以这种方式运行（尤其是因为它在读取大型文本文件（如 *.obj 或 *.ase）时不会这样做）。对此行为是否有任何解释，或者是否有可靠读取整个文件的解决方案？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-04-30T17:32:21.687

我一定遗漏了一些东西，但我看不出为什么需要循环。这应该可以工作（但你最好添加错误处理以防文件无法打开）：

```
function readAll(file)
    local f = assert(io.open(file, "rb"))
    local content = f:read("*all")
    f:close()
    return content
end 
```

# matlab - MATLAB 是否允许将 uicontrol 按钮放置在 uitable 的单元格中？

> ID：10386673
> 
> 赞同：1
> 
> 时间：2012-04-30T15:56:49.670
> 
> 标签：matlab, button, matlab-uitable

我想在 uitable 的每一行中放置一个 uicontrol 按钮。MATLAB 是否具有本机功能，还是我需要使用 Java/HTML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:56:37.527

据我所知，使用标准 MATLAB 是不可能的。您可以将`CellSelectionCallback`and与对应`CellEditCallback`的`uitable`一起使用，为标准表格单元格提供类似按钮的功能。有关. [_](http://www.mathworks.de/matlabcentral/newsreader/view_thread/270514) _`MouseClickedCallback``uitablepeer``MouseClickedCallback`

如果您的设置允许，一个更简单的方法可能是从一开始就使用 Java 表。

# r - .onLoad 和交互式 - 意外行为？

> ID：10386674
> 
> 赞同：2
> 
> 时间：2012-04-30T15:56:51.647
> 
> 标签：r, package, interactive

我有一个包，旨在供通过 Rscript 运行的非交互式脚本使用。但我也希望能够在交互式会话中加载它，主要用于调试目的。当在 Rscript 或其他非交互式会话中使用时，我想使用 .onLoad 进行一些初始化，所以我有一些类似的东西：

```
.onLoad <- function(libname, pkgname) {
    if ( !interactive() ) { 
        # Do some stuff 
    } else {
    # Do something slightly different
} 
```

问题是即使在交互式会话中，interactive() 在 .onLoad 中也会返回 FALSE。我通过以下方式测试：

```
.onLoad <- function(libname, pkgname) {
    print( paste( "interactive() = ", interactive(), collapse="" ) )
} 
```

然后，当我`build()`和`install()`（使用 devtools）安装时，会附加带有消息的库`"interactive() = FALSE"`。

有任何想法吗？.onLoad() 和 interactive() 的文档都没有说任何相关的内容。

菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:51:43.017

运行`build()`and之后`install()`，您是否尝试过取消附加*和*卸载包，然后重新加载它？

这是我这样做时得到的结果，包括你`.onLoad`在一个名为“dummy”的包中的函数：

```
 library(devtools)
 document('dummy')
 build('dummy')
 install('dummy')
 # ...
 # [1] "interactive() =  FALSE"

 detach("package:dummy", unload=T)
 library(dummy)
 # [1] "interactive() =  TRUE" 
```

# java - 背包变异算法

> ID：10386676
> 
> 赞同：5
> 
> 时间：2012-04-30T15:57:07.947
> 
> 标签：java, algorithm, knapsack-problem

作为一项家庭作业，我有以下程序要在 java 中制作：

在一个书柜里，我们有一堆 N 本书，这些书必须由 K 个作家手工抄写。每本书都有 Ui 页，其中 Ai 是书。

我们需要从堆栈中给每个作者连续的书，我们不能拆分一本书的页面。

制作一个程序，将书籍提供给作家，但通过最小化作家将复制的最大页数。

作为输入，用户将给出一串数字，其中第一个数字是书籍的数量 N，第二个数字是作者的数量 K，其余的数字是每本书的页数。

作为输出，程序将向用户输出作者将复制的最大页数。

例子：

输入：15 ​​6 30 40 10 40 50 20 30 40 10 70 10 50 30 50 10
输出：90

在此示例中，第一个作者可以取 book1 = 30 和 book2 = 40，但不能取例如 book1 = 30 和 book3 = 10。换句话说，您只能从堆栈顶部取书，而不会将它们混合在一起。

这是我的实现：

```
import java.util.*;

public class Library {

public static void main(String[] args) {
    Scanner input = new Scanner(System.in);

    // to work with 1.6 erase the second "Integer"
    //in 1.7 this works properly
    List<Integer> booksList = new LinkedList<Integer>();
    System.out.printf("Give: ");

    String answer = input.nextLine();
    String[] arr = answer.split(" ");

    for (String num : arr) {
        booksList.add(Integer.parseInt(num));
    }

    int books = booksList.remove(0);
    int writers = booksList.remove(0);

    while (booksList.size() > writers) {
        mergeMinimalPair(booksList);
    }

    System.out.println(getMax(booksList));
}

public static void mergeMinimalPair(List<Integer> books) {
    int index = 0;
    int minValue = books.get(0) + books.get(1);
    for (int i = 1; i < books.size() - 1; i++) {
        if ((books.get(i) + books.get(i + 1)) < minValue) {
            index = i;
            minValue = books.get(i) + books.get(i + 1);
        }
    }
    combine(books, index, index + 1);
}

public static void combine(List<Integer> books, int indexA, int indexB) {
    Integer a = books.get(indexA);
    Integer b = books.get(indexB);
    books.remove(indexB); 
    books.add(indexA, a + b);
    books.remove(indexB);
}

public static int getMax(List<Integer> books) {
    int max = books.get(0);
    for (int i = 1; i < books.size(); i++) {
        if (books.get(i) > max) {
            max = books.get(i);
        }
    }
    return max;
}
} 
```

我所做的是每次我将最小的一对书合并在一起，直到我的列表长度等于作者的数量但它不起作用，在示例中而不是 90 它输出 100。

我听说过动态编程解决方案和背包类问题的残酷解决方案，但在我的大学里，他们还没有教我们动态编程，所以教授要么对我们所知道的感到困惑，要么他希望我们找到一个残酷的解决方案。

我确信我的解决方案会起作用，但由于某种原因它不起作用，如果你能在这个或我弄错的地方向我指出另一个解决方案的提示，我会很高兴。

您可以将我指向 DP 解决方案或 Brutal 解决方案，但如果您将我指向 DP 解决方案，请注意我对 DP 实施几乎一无所知。

编辑：我已经看过一些类似背包的问题，​​但我找不到具有这种变化的问题和我能够理解的非 DP 解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:17:51.003

您可以对答案进行二进制搜索。选择一个作家的最大值，比如说`M`，然后从左到右扫描书籍数组，为每个作家分配尽可能多的书，但不超过`M`。如果还有书，那么你必须增加`M`。如果您已成功分配所有书籍，请减少`M`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:37:24.123

这被称为[分区问题](http://en.wikipedia.org/wiki/Partition_problem)的优化版本。它是 NP 难的。还有一篇关于它的相当[巧妙的文章。](http://www.americanscientist.org/issues/pub/the-easiest-hard-problem)据我所知，有很多启发式方法可以逼近它，但没有明确设计用于“走捷径”同时获得准确答案的方法。

我之前遇到过类似的问题，我的实际实现最终成为一种启发式方法（贪婪方法适用于任意数量的分区很简单），然后进行了几次优化迭代（尝试在设置）在每次优化后检查是否解决方案可能更好（w 写入器的 p 页意味着每个写入器的 p/w 页是最佳的，尽管如果 w 不完全除 p p/ w+1 是最优的）。在您的情况下，由于您正在寻找一个精确的解决方案，您最终将需要一个支持暴力破解的案例。

请注意，您只是被询问其中一个分区的最大总和是多少。这实际上是 NP-hard 本身——知道更少的信息只不过是一个常数因子捷径。

如果我是你，我只会用蛮力。对于少量书籍（少于 10 到 20 页）和大量页数（100 到 1000），接近 p/w 很可能无法达到提前退出的条件。另一方面，如果您需要处理任意数量的书籍，则对小尺寸使用蛮力，对较大尺寸使用近似值。

# php - 哪种方法更好地实践大的一种方法或分离的方法？

> ID：10386679
> 
> 赞同：4
> 
> 时间：2012-04-30T15:57:29.320
> 
> 标签：php, oop, codeigniter

我正在使用codeigniter。

我有类订单，其中有一些方法，比如`start_order(), close_order(),`等等。

我对每种用户类型都有一个权限级别`'admin','salesman','manager' ..`

因此，相同的方法每次可能得到不同的实现。

所以，我的问题是：这被认为是 CI 的最佳实践：

> **1）**在“订单”类中创建一个包含不同逻辑细节的大方法。或
> **2)**根据需要在其他类中重复该方法。

我知道这听起来很明显，一个人应该选择第一选择。但是，当我这样做时，我最终得到了大量的代码块。所以，这就是为什么我要你的经验。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T16:04:37.490

事实上，一个人应该选择第一选择（“一个大方法”）*并不明显。*绝对应该避免这种情况。

一般来说，人们应该更喜欢小方法。每种方法都应该只做一件事，只做一件事，只有一个改变的理由，小而易读，从它的名字中可以明显看出它在做什么，等等。

您在问题中选择的措辞（“每次不同的实现”和“包含不同的逻辑细节”）意味着您正在谈论一种基于对象的某种状态执行不同操作的方法。

看一下名为[Replace Conditional With Polymorphism](http://www.refactoring.com/catalog/replaceConditionalWithPolymorphism.html)的重构模式。当您有一个主要是大`case`检查或`if/elseif`确定该状态的链的方法时，通常会使用此模式。这个想法是您将每个实现提取到它自己的类中，该类覆盖基类上的方法。这些类将持有并了解状态，并且能够相应地应用正确的逻辑，而消费代码将只调用基类类型上的方法。

关于这种模式有[很多信息和很多例子。](https://www.google.com/search?q=replace%20conditional%20with%20polymorphism)

正如[@Gordon 指出的那样](https://stackoverflow.com/a/10386766/328193)，这也称为[策略模式](http://www.oodesign.com/strategy-pattern.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T16:07:41.053

您是说每个权限级别（例如 , 等）都有不同的类`AdminOrder`吗`SalesmanOrder`？如果是这样，如果顺序足够不同，最好在每个类中添加一个单独的方法。这样做称为方法覆盖，在面向对象编程中很常见。举个例子：

```
class Order
{
    function start_order() 
    {
        // this method contains common code for all orders
    }
}

class AdminOrder extends Order
{
    function start_order()
    {
        // IF NEEDED: call start_order on Order. This is if you have common code that should be executed for ALL subclasses of Order
        parent::start_order()

        // Now implement code specific to an AdminOrder
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T16:05:07.663

> 因此，相同的方法每次可能得到不同的实现

因此，您希望拥有三种方法，一种用于每种实现。将所有可能的实现混合到一个大方法中会使其更难维护。你会有很多ifs和elses。

查看[策略模式](http://sourcemaking.com/design_patterns/strategy)以了解如何以良好的实践方式使其工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T16:05:25.693

我认为最好创建一个基类`order`，然后将其扩展为`admin`，`salesman`然后你只需要覆盖不同的方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T16:09:18.717

最佳实践是将大块逻辑拆分为单独的方法，然后在需要的地方调用。

您的代码看起来更好，更易读，当您需要查找和修复某些东西时，您不会迷路。

巨大的巨像方法是非常糟糕的习惯。

# python - 有没有办法在任务栏中设置 Pygame 图标？set_icon() 似乎只影响实际窗口中的小图标

> ID：10386680
> 
> 赞同：12
> 
> 时间：2012-04-30T15:57:42.207
> 
> 标签：python, pygame

在运行我的程序时，我配置的图标`pygame.display.set_icon(icon)`仅显示在窗口中。在任务栏中，默认的 python 图标保持不变。

有没有办法改变它？

资源：

```
import pygame
from pygame.locals import *
import sys, os
import time

pygame.init()

# Load Images
try:
    bg = os.getcwd() + '\\images\\background.png'
    background = pygame.image.load(bg).convert()
except:
    print 'Error: Could not find background.png'

try:
    logo = os.getcwd() + '\\images\\logo.png'
    c_logo = pygame.image.load(logo).convert()
except:
    print 'Error: Could not find logo.png'

try:
    about_dialog_infile = os.getcwd() + '\\images\\about_dialog[alpha].png'
    about_dialog = pygame.image.load(about_dialog_infile).convert_alpha()
except:
    pass

i_icon = os.getcwd() + '\\images\\icon.png'
icon = pygame.image.load(i_icon)
pygame.display.set_icon(icon)
pygame.display.set_caption("Test program")
screenSize =(640,480)

screen = pygame.display.set_mode(screenSize,0,32)
pygame.display.set_caption('My Test Program')

while True:
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            # sys.exit()
        if event.type == MOUSEBUTTONDOWN:
            check_click(about, event.pos)

screen.blit(background, (0,0))

pygame.display.update() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T19:43:17.047

我终于弄明白了。

据我所知，在任务栏中实际设置该图标的唯一方法是在打包期间。

以 pyinstaller 为例，您可以调用`python pyinstaller.py --icon=icon.ico`Where icon 是您希望在任务栏中显示的图标。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-10T17:01:45.603

你可能想看看[这个](https://stackoverflow.com/a/1552105/6210090)。本质上，当windows设置任务栏图标时，它会使用各种巧妙的算法来决定要使用的图标。这样做的原因是，如果您有一个应用程序的多个实例（即多个 python 窗口），它们将被分组。这通常意味着 python 应用程序的图标设置为`python.exe`或的图标`pythonw.exe`，具体取决于您的文件扩展名 (`.py`或`.pyw`)。但是，有一种解决方法。因为任务栏图标是`App User Models`由特定的可执行文件而不是由特定的可执行文件设置的，所以可以使用该模块更改应用程序的用户模型`ctypes`：

```
import ctypes
myappid = 'mycompany.myproduct.subproduct.version' # arbitrary string
ctypes.windll.shell32.SetCurrentProcessExplicitAppUserModelID(myappid) 
```

所以它真的不是一个 pygame 的东西，而是一个 windows 的东西。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-30T16:36:51.857

我认为要设置任务栏图标，您必须使用[set_caption](http://www.pygame.org/docs/ref/display.html#pygame.display.set_caption)。

```
pygame.display.set_caption("Title", get_image_file("icon.png")) 
```

注意：设置标题不会设置窗口图标。调用 set_icon 和 set_caption 来设置两者。

# android - 如何运行 linux 命令在 android 3.x 上挂载和卸载 sd 卡

> ID：10386681
> 
> 赞同：0
> 
> 时间：2012-04-30T15:57:53.093
> 
> 标签：android, linux, filesystems, root, android-sdcard

我想知道如何运行 linux 命令在 sdcard 甚至整个 sdcard 上挂载/卸载特定路径。尝试了很多人们建议的东西，但没有真正奏效。

我的设备已植根。

我的目标是防止从显示文件系统浏览的桌面和本地应用程序访问 sdcard 上的某些文件夹。

欢迎以其他方式实现此目标的任何想法（除了文件加密）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:40:10.333

这不会很好，因为文件系统缺少权限模型。

但是，您可以对物理媒体进行分区并创建一个具有部分权限的 unix 样式文件系统。很多自定义rom都是这样做的，尤其是在官方方法出来之前的apps2sd。在此处查找重新配置vold 的详细信息。

或者，您可以查看 Google 工程师所说的关于将 Android 大容量存储转换为基本文件系统具有权限的方案，并且在其之上模拟没有权限的印象以获得旧版支持。

# asp.net - onClick 事件不会在 firefox 或 chrome 中触发，仅在 IE 中

> ID：10386683
> 
> 赞同：2
> 
> 时间：2012-04-30T15:58:05.473
> 
> 标签：asp.net, html, vb.net

在我的应用程序中，我从服务器端拉入 http 代码。将此代码放入应用程序时 - 在 IE 中单击时会发生该事件，但在任何其他浏览器中不会发生。这是处理被单击的图像和事件的代码部分。

```
<img canExpand="true" style="cursor:hand" id="img34635" src="../images/plus.gif" EntityID="346" EntityCat="35" onclick="LoadChild(this.EntityID, this.EntityCat, 0, this.lnEquip)"> 
```

LoadChild 是页面客户端的一个 javascript 函数。当在 IE 以外的任何地方单击图像时，什么都不会发生。谁能明白为什么会这样？可能是格式问题。再次感谢。

编辑 - 这是 javascript 函数加载子

```
 function LoadChild(lnEntityID, lnEntityCat, FullExpand, EquipID) {

            document.getElementById('dropTypes').disabled = false;
            document.getElementById('dropTypes').style.background = "white";

            DescStatus = 0;

            if (lnEntityCat == 0) {
               window.status = "Loading the tree...";
               PageMethods.LoadChild(lnEntityID, lnEntityCat, GLOBALEQUIPID, FullExpand, 0, 0, 1, LoadChildCallback);

            }
            else if (document.getElementById('img' + lnEntityID + lnEntityCat).canExpand == "true") {
                if (document.getElementById('div' + lnEntityID + lnEntityCat).style.display == 'none') {
                    document.getElementById('div' + lnEntityID + lnEntityCat).style.display = 'block';
                    document.getElementById('img' + lnEntityID + lnEntityCat).src = "../images/minus.gif"
                    window.status = "Loading the tree...HERE";

                    PageMethods.LoadChild(lnEntityID, lnEntityCat, GLOBALEQUIPID, FullExpand, 0, 0, 1, LoadChildCallback);

                                        }
                else {
                    document.getElementById('div' + lnEntityID + lnEntityCat).style.display = 'none';
                    document.getElementById('img' + lnEntityID + lnEntityCat).src = "../images/plus.gif"
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:01:47.480

这很奇怪，但我知道没有分号会干扰点击事件。所以试试

```
onclick="LoadChild(this.EntityID, this.EntityCat, 0, this.lnEquip);" 
```

注意添加的；

**或者**

当然你总是可以使用像 jQuery 这样的东西

```
$('#img34635').click(function(){

    LoadChild(this.EntityID, this.EntityCat, 0, this.lnEquip);

}); 
```

API的`bind`or `on`（JQuery 的更高版本）部分也可以同样工作

**或者**

您的一个或多个参数可能需要用撇号包围。例如`lnEntityCat`，在代码的某些部分，参数肯定被视为字符串。

老实说-如果它是遗留代码，那么功能中可能会出现各种不愉快的情况，从而干扰各种浏览器。我会把它全部注释掉，但是一两行然后从那里开始。祝你好运

# visual-studio-2010 - 在 Visual Studio 2010 项目中将 CSS 版本永久设置为 3.0？

> ID：10386691
> 
> 赞同：0
> 
> 时间：2012-04-30T15:58:55.047
> 
> 标签：visual-studio-2010

> **可能重复：**
> [使 CSS 3.0 成为 Visual Studio 2010 SP1 Web 更新中的默认值](https://stackoverflow.com/questions/7323657/make-css-3-0-the-default-in-visual-studio-2010-sp1-web-update)

我有某些 CSS 样式（v 3.0）在部署时可以正常工作，但每次我打开项目时它都会重置为 2.1。有没有办法强制它只使用 CSS 3.0 ？是否有我可以更改的属性字段？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T18:35:39.383

我很惊讶我没有得到关于这个问题的任何答案。无论如何，这要归功于论坛的 DaveHale23 在这里的帖子

[使 CSS 3.0 成为 Visual Studio 2010 SP1 Web 更新中的默认值](https://stackoverflow.com/questions/7323657/make-css-3-0-the-default-in-visual-studio-2010-sp1-web-update)

这帮助了我。一旦我安装了这个：

[http://visualstudiogallery.msdn.microsoft.com/7211bcac-091b-4a32-be2d-e797be0db210](http://visualstudiogallery.msdn.microsoft.com/7211bcac-091b-4a32-be2d-e797be0db210)

VS2010在重新打开项目时记住了3.0的设置。

# xtk - 由渲染（）更改的加载对象具有多个视图？

> ID：10386692
> 
> 赞同：1
> 
> 时间：2012-04-30T15:58:56.637
> 
> 标签：xtk

我仍在尝试用 3 个视图可视化一个场景（一个完全交互，一个从右侧仅缩放，一个从顶部仅缩放，请参见此处：[更改交互器的“配置”属性以禁用某些用户事件](https://stackoverflow.com/questions/10380269/change-the-config-attribute-of-an-interactor-for-disabling-some-user-events)）。

用户事件的处理是好的。我尝试了在 3 个渲染器中加载对象的 2 个选项：愚蠢的一个和第 07 课的一个。注释代码对于查看问题是可选的（它是从右侧或顶部仅通过缩放查看）。

选项 1：第 7 课

```
var run = function() {

var r1 = new X.renderer('r1');
r1.init();

var r2 = new X.renderer('r2');
r2.init();
r2.interactor().config.MOUSECLICKS_ENABLED = false;
r2.interactor().config.KEYBOARD_ENABLED = false;
r2.interactor().config.HOVERING_ENABLED = false;
r2.interactor().config.CONTEXTMENU_ENABLED = false;
r2.interactor().init();

var r3 = new X.renderer('r3');
r3.init();
//r3.interactor().config.MOUSECLICKS_ENABLED = false;
//r3.interactor().config.KEYBOARD_ENABLED = false;
//r3.interactor().config.HOVERING_ENABLED = false;
//r3.interactor().config.CONTEXTMENU_ENABLED = false;
//r3.interactor().init();

var objet= new X.object(); //typo corrected
objet.load('monobjet.stl');
r1.add(objet);

r1.onShowtime = function() {
    r2.add(objet);
    r3.add(objet);
    //r2.camera().setPosition(100,0,0);
    //r3.camera().setPosition(0,100,0);     
    r2.render();
    r3.render();
};  
r1.render(); 
```

选项2：愚蠢

```
var run = function() {

var r1 = new X.renderer('r1');
r1.init();

var r2 = new X.renderer('r2');
r2.init();
r2.interactor().config.MOUSECLICKS_ENABLED = false;
r2.interactor().config.KEYBOARD_ENABLED = false;
r2.interactor().config.HOVERING_ENABLED = false;
r2.interactor().config.CONTEXTMENU_ENABLED = false;
r2.interactor().init();

var r3 = new X.renderer('r3');
r3.init();
//r3.interactor().config.MOUSECLICKS_ENABLED = false;
//r3.interactor().config.KEYBOARD_ENABLED = false;
//r3.interactor().config.HOVERING_ENABLED = false;
//r3.interactor().config.CONTEXTMENU_ENABLED = false;
//r3.interactor().init();

var objet= new X.object(); //typo corrected
objet.load('monobjet.stl');
r1.add(objet);
r2.add(objet);
r3.add(objet);
//r2.camera().setPosition(100,0,0);
//r3.camera().setPosition(0,100,0);
r1.render();        
r2.render();
r3.render();
}; 
```

愚蠢的选项为 r2 和 r3 提供黑屏，第 07 课中的一个在 3 个渲染器中提供了我的对象，但它已在 r2 和 r3 中移动（如果您评论 setPosition() 或查看，您也会在第 7 课中看到它精心）。此外，如果我使用鼠标旋转视图，我看到我的对象不在 r2 中以 0 为中心，但不在 r2 或 r3 中。

所以我的问题是： r1.render() 是否改变了我的“对象”的缓冲区？是预期的吗？我在 Stack Overflow 和 Github 上查看过类似的问题，但什么也没看到。

除了看到更好（通过 var object2 = new X.cube(...)）之外，我还尝试了 X.cube，它是一样的。

* * *

我想我发现了 1 次测试的问题：当我在将 object.points().setClean() 添加到第一个渲染器之前添加它时，它不像其他对象那样以对象为中心。

因此，我们认为问题如下：当您第一次添加从文件加载的对象时，它的“点”是脏的，而在接下来的时间里它们是干净的。所以问题来自“points.setClean();” 在重新计算 vertexBuffer 的块中的 renderer.update_() 中没有？这正常吗？

如果我很好理解： - 第一个渲染器看到点是脏的，因此计算一个新的边界框以将对象放在视图的中心，然后当他看到对象是新的时，他计算一个新的 vertexBuffer 并清理对象.points 属性。- 其他渲染器看到这些点不再脏所以他们不计算边界框，但他们看到对象是新的所以他们计算缓冲区。

有什么解决办法？我必须更改 renderer.update_() 中的“if (points.dirty() || transform.dirty())”，或者为以下渲染器设置为 true ^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:12:46.320

```
var machoire = new X.object();
objet.load('monobjet.stl');
r1.add(objet);
r2.add(objet);
r3.add(objet); 
```

这只是一个错字吗？应该

```
var objet = new X.object();
objet.load('monobjet.stl'); 
```

我认为上面的版本 1 应该可以工作。

# jquery - jQuery .animate() '切换'

> ID：10386693
> 
> 赞同：4
> 
> 时间：2012-04-30T15:59:00.993
> 
> 标签：jquery, menu, jquery-animate

我一直在玩弄一个 jQuery 导航菜单，为了举例，我做了一个模型：http: [//jsfiddle.net/DerFlatulator6/3jYhh/1/](http://jsfiddle.net/DerFlatulator6/3jYhh/1/)

我遇到了一个问题，它的作用与我想要的完全相反。我的悬停事件代码是这样的：

```
$(this)
    .addClass('selected')
    .children('ul')
        .animate({'height': 'toggle'}, 300); 
```

经过一番修修补补，我想出了这个

```
$(this)
    .addClass('selected')
    .children('ul')
        .css('height', 'toggle')
        .animate({'height': 'toggle'}, 300); 
```

哪个有效，但我不知道为什么！有没有人能够准确解释发生了什么？

一个附带的问题......你会注意到小提琴有一个 3 级菜单，其中代码被隔离用于垂直和水平下拉菜单，是否有一种很好的方法来编写一个函数来覆盖它们，或者我应该离开它原样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:11:57.080

`animate({'height': 'toggle'}, 300)`如果高度大于 0，则类似于将高度从当前设置为 0，或者如果当前为 0，则从 0 设置为上一个设置。

来自文档[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

> 除了数值之外，每个属性都可以采用字符串“show”、“hide”和“toggle”。这些快捷方式允许自定义隐藏和显示考虑到元素显示类型的动画。

# java - Java 和对象、数组和原始类型的精确参考大小

> ID：10386696
> 
> 赞同：5
> 
> 时间：2012-04-30T15:59:02.940
> 
> 标签：java, arrays, memory, pointers, memory-consumption

我想确切地知道在内存中为对象分配的实际空间。

我试着用一些例子来解释：使用 64 位 JVM，指针大小应该是 8 个字节，所以：

*   `Object singletest = new Object();`将需要 8 个字节来引用对象加上对象的大小

*   `Object arraytest = new Object[10];`将需要 8 个字节来引用存储数组的位置加上 8*10 字节来存储数组加上每个对象的大小

*   `int singleint = new int;`只需要 2 个字节，因为 int 是原始类型

*   `int[] arrayint = new int[10];`将需要 8 个字节来引用位置和 10*2 字节来引用元素

此外，这也是 Java 允许编写如下代码的原因：

```
int[][] doublearray = new int[2][];
int[0][] = new int[5];
int[1][] = new int[10]; 
```

真正发生的是数组会像对象一样产生引用（又名指针），因此在声明时第二维的大小并不重要（并且维度可以不同，它们之间没有联系）。然后占用的空间将是：对*doublearray*的引用（8 个字节），第一个维度只是对第二个维度的引用，所以其他 8 个字节 * 2（第一个维度大小），最后是 2 个字节 * 5 加上 2 个字节 * 10 .

所以，最后，如果有一个像这样的真实课程：

```
class Test {
   int a, b;
   int getA() {return A};
   void setA(int a) {this.a = a;}
   int getB() {return B};
   void setB(int b) {this.b = b;}
} 
```

当我调用 new 进行实例化时，将使用 8 个字节的指针（或将其命名为引用，因为它是 Java）加上 2+2 个字节将整数存储到类中。

问题是：我是对的还是我写的都是废话？此外，当我不实例化一个对象而只是声明它时，是否会分配 8 个字节以供进一步使用？如果我分配一个空值怎么办？

同时对于原始类型，我很确定只要声明它就会分配请求的空间（如果我声明一个“int i”，那么我可以立即调用 i++，因为没有使用引用，只有一部分内存设置为“0” ）。

我在互联网上搜索没有聪明的回应......我知道我写了很多问题，但任何帮助将不胜感激！（也许我不是唯一感兴趣的人）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T16:01:39.553

> 使用 64 位 JVM，指针大小应为 8 字节，

实际上它通常是 32 位的，除非您的最大堆大小为 32 GB 或更多。这是因为 Java 使用引用，而不是指针（每个对象都在 8 个字节上，而不是 1 个边界上）

JVM 可以根据您使用的 JVM 和最大堆大小来更改引用的大小。

> 对象单测试 = 新对象（）；将需要 8 个字节来引用对象加上对象的大小

该对象将使用大约 16 个字节的堆。它可能使用也可能不使用 4 个字节的堆栈，但它可以只使用一个寄存器。

> 对象数组测试=新对象[10]；

这将使用大约 16 个字节作为标头，加上 10 倍的参考大小（总共大约 56 个字节）

> 整数单整数 = 新整数；只需要 2 个字节，因为 int 是原始类型

`int`始终是 32 位，您无法创建`new`原语。由于它在堆栈上的概念，它可能使用 4 字节的堆栈，或者它可能只使用一个寄存器。

> 整数 [] 数组整数 = 新整数 [10]; 将需要 8 个字节来引用位置和 10*2 字节来引用元素

同样，该对象可能与`new Object[10]`（56 字节）大小相同

```
int[][] doublearray = new int[2][];
int[0][] = new int[5];
int[1][] = new int[10]; 
```

我不会称它为双数组，因为它可能会与`double[]`

然而，大小可能约为 16 + 2 * 4`doublearray`和 16 + 5*4 + 4（用于填充）和 16 + 10 * 4。

在堆上分配的内存与 8 字节边界对齐。

> 我调用一个 new 来实例化，一个 8 个字节的指针（或将其命名为引用，因为它是 Java）将用于加上 2+2 个字节来将整数存储到类中。

引用在堆栈上，通常不包括在内。

该对象具有大约 16 个字节的标头，而 int 值占用 2 * 4 个字节。

> 当我不实例化一个对象但我只是声明它时

Java 不允许您声明对象，只有原语和引用。

> 如果我分配一个空值怎么办？

这可能会改变引用的值，但否则什么也不会发生。

> 如果我声明一个“int i”，那么我可以立即调用 i++，因为没有使用任何引用，只是将一部分内存设置为“0”

不会使用堆，也可能不会使用堆栈（可能是 4 个字节）。如果 JIT 编译器不执行任何操作，它可能会删除代码。

> 也许我不是唯一一个感兴趣的人

......但并不太害怕问。;)

# c++ - 自定义类 ostringstream 输出错误

> ID：10386702
> 
> 赞同：1
> 
> 时间：2012-04-30T15:59:49.853
> 
> 标签：c++, stringstream

我不知道为什么会出错，但我只是想在 endl 中添加一些“类似”的东西，这样我就可以将 ostringstream 中的内容扔到我们的调试器中。我有以下内容：

```
class debug_stream_info
{
public:
    debug_stream_info(int errorLine, char *errorFile, int level)
        :m_errorLine(errorLine), m_errorFile(errorFile), m_logLevel(level)
    {
    }

    friend std::basic_ostringstream<char>& operator<<(std::basic_ostringstream<char>& os, debug_stream_info& debug_info);

private:
    int m_errorLine;
    std::string m_errorFile;
    int m_logLevel;

};

std::basic_ostringstream<char>& operator<<(std::basic_ostringstream<char>& os, debug_stream_info& debug_info)
{
    // Write the stream's contents to cpu_debug
    // Deleted custom logging function.  No errors here though

    // Clear the stream for re-use.
    os.str("");
    os.seekp(0);

    return os;
}

int main(int argc, char** argv)
{
    std::ostringstream myout;
    myout << "hey there" << " and some more " << "Numbers!!: " << 435 << 54.2 << " that's good for numbers" << debug_stream_info(__LINE__, __FILE__, LOG_LEVEL);

    return 0;
} 
```

我得到的错误是：`error C2679: binary '<<' : no operator found which takes a right-hand operand of type 'debug_stream_info' (or there is no acceptable conversion)`对于 main 中的行。这是在VS2008上。

我包括 sstream、iostream 等，并正确设置了命名空间。我没有收到其他错误。我什至尝试用`basic_ostream`just替换所有出现的情况`ostringstream`，但没有任何区别（我稍后会有一个`w_char`版本，但我希望首先使用简单的案例）。我在上面的行上做了对象，然后在行上传递了一个完全构造好的对象，错误是完全一样的。我已经更改了第二个参数的签名，也`const`没有更改。

关于我在这里做错了什么的任何想法？

编辑：因为每个响应似乎都想把它放在那里，我不能使用 std::ostream 因为我希望它只适用于`std::ostringstream`(and `std::basic_ostringstream`) 而不是任何类型的输出流。此外，该函数无论如何都不会使用 ostream 编译，因为我正在使用该`os.str()`方法，它不在 ostream 中，只有子类。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T16:05:59.020

您的代码的真正问题是您重载`std::ostringstream`了而不是`std::ostream`. 因此，如果您编写以下代码，您的代码将起作用：

```
debug_stream_info info(/** blah blah**/);

std::ostringstream oss;
oss << info ; //OK 
```

但是，这不起作用：

```
oss << 1 << info; //ERROR 
```

这是编译错误，因为表达式`oss<<1`返回的类型对象`std::ostream&`没有`debug_stream_info`作为第二个参数的重载。这意味着如果您使用 cast 为：

```
static_cast<std::ostringstream&>(oss << 1) << info; //OK 
```

那么这应该再次起作用。

所以解决方案是重载`std::ostream`，而不是`std::basic_ostringstream`.

此外，第二个参数应该是`const &`. 这也是您的代码的问题。

所以写这个：

```
std::ostream& operator<<(std::ostream&, debug_stream_info const &);
                                                        //^^^^^^^ note this 
```

第二个参数应该是`const &`这样您就可以将临时对象写入流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:11:58.183

`debug_stream_info(__LINE__, __FILE__, LOG_LEVEL);`正在创建未返回任何内容的未命名对象，因此出现错误

```
#include <iostream>
#include <cstdio>
#include <sstream>
using namespace std;

class debug_stream_info
{
public:
    debug_stream_info(int errorLine, char *errorFile, int level)
        :m_errorLine(errorLine), m_errorFile(errorFile), m_logLevel(level)
    {
    }

    friend std::basic_ostringstream<char>& operator<<(std::basic_ostringstream<char>& os, debug_stream_info& debug_info);
    std::ostringstream& fun(std::ostringstream& os)
    {
        os<<"Ashish"<<endl;
        return os;
    }
private:
    int m_errorLine;
    std::string m_errorFile;
    int m_logLevel;

};

std::basic_ostringstream<char>& operator<<(std::basic_ostringstream<char>& os, debug_stream_info& debug_info)
{
    // Write the stream's contents to cpu_debug
    // Deleted custom logging function.  No errors here though

    // Clear the stream for re-use.
//    os.str("");
//    os.seekp(0);

    return os;
}

int main(int argc, char** argv)
{

    std::ostringstream myout, test;
        myout << "hey there" << " and some more " << "Numbers!!: " << 435 << 54.2 << " that's good for numbers"
         << debug_stream_info(1, "/home/ashish/test", 1).fun(test);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T16:58:45.117

Nawaz 已经非常清楚地解释了为什么您会收到错误消息。在这种情况下，通常的解决方案是定义自己的流类型，与`std::istream`. 类似于以下内容：

```
class DebugStream
{
    std::ostringstring* collector;

public:
    template <typename T>
    DebugStream& operator<<( T const& value )
    {
        if ( collector != NULL ) {
            *collector << value;
        }
        return *this;
    }
}; 
```

对此有无限的变化；在您的情况下，您可以为您的类型添加一个非模板成员函数；更有可能的是，您会添加一个采用相同参数的构造函数：

```
DebugStream( int lineNumber, std::string const& filename, int logLevel )
    : collector( isActive( logLevel ) ? new std::ostringstream : NULL )
{
    //  Initial insertion of lineNumber, filename, timestamp...
} 
```

您还可以添加一个析构函数，它以原子方式将收集的数据刷新到文件中（或发送电子邮件，或将其写入系统日志，或其他）。（对此要非常小心。即使日志记录失败，您也不希望异常从析构函数中逃脱。）

最后，您可能想要使用自定义流缓冲区，而不是 `stringstream`. 假设将分配的缓冲区从一个实例保留到下一个实例。如果您这样做，而不是`new`每次都读取流，您可能会从表中获取一个实例，按日志级别索引（并从配置文件初始化）。

# orchardcms - 如何从 Orchard 的多租户中恢复错误的配置

> ID：10386704
> 
> 赞同：1
> 
> 时间：2012-04-30T16:00:08.973
> 
> 标签：orchardcms

我刚刚在我的 Orchard 上安装了多租户模块，我可能错误地配置了一个新租户，因为我在模块配置中指向新租户使用主机：localhost 进行测试，现在我在禁用整个应用程序时遇到了一个令人讨厌的错误。

*无法解析实例，也无法从此 LifetimeScope 创建嵌套生命周期，因为它已被释放。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。异常详细信息：System.ObjectDisposedException：无法解析实例，并且无法从此 LifetimeScope 创建嵌套生命周期，因为它已被释放。*

我是 Orchard 的新手，今天刚刚在 AWS 的免费套餐上设置了 2008 服务器。我想知道最简单的恢复方法。我应该在将来摆弄之前备份果园目录和数据库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T23:53:41.643

您可以编辑每个租户的设置文件。他们在`app_data/sites/TENANT`.

# c# - 我应该使用 form1_Load 事件在打开表单时显示文本框信息吗？

> ID：10386705
> 
> 赞同：0
> 
> 时间：2012-04-30T16:00:11.503
> 
> 标签：c#, winforms, form-load

我有一个带有按钮的 winform，用户在他们想要生成某个报告时单击该按钮。单击此按钮时，将打开另一个 winform。第二个 winform 有一个文本框和一个按钮，可以带您回到第一个 winform。

当第二个 from 打开时，我希望文本框已经显示了报告。因此，用户所要做的就是查看它并在完成后返回之前的表单。

为此，我会将文本框分配给适当的方法并将其放入 Form1_Load 事件方法中吗？

我从未使用过 Form1_Load 事件方法，所以我有点不确定这是否是正确的做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:07:40.007

是的，当然，在 Form_Load 事件中，您可以访问已由表单构造函数通过 InitializeComponent() 初始化的所有控件。
然后你可以打电话

```
private void Form_Load(object s, EventArgs e)
{
    textBox1.Text = "your_report_title";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:10:47.967

是的，这将是 Form1_Load() 的正确用法。

```
private void Form1_Load(object sender, EventArgs e)
{
    textbox1.Text = "Whatever is supposed to go here"
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T17:39:22.390

或者，您可以使用应该已经存在的表单的构造函数。

```
public Form2(string text)
{
    InitializeComponent();

    textBox1.Text = text;
} 
```

然后只需使用打开表单

```
Form2 form2 = new Form2("text that should be displayed");
form2.Show(); 
```

# facebook - 无法创建新的开放图表成就

> ID：10386708
> 
> 赞同：0
> 
> 时间：2012-04-30T16:00:20.037
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, achievements

我不断收到错误：

"给定的选择器字符串 \"game:points\" 对于 ID 为 10150679224277659 的 Ent 无效"

尝试创建新成就时（使用[https://graph.facebook.com/myappid/achievements/?method=post&access_token=...achievement=newurl](https://graph.facebook.com/myappid/achievements/?method=post&access_token=...achievement=newurl)）

这个新成就是完全不同的并且有一个不同的 URL 那么为什么它在这个错误中一直告诉我另一个 ID（10150679224277659）？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T21:30:34.033

您尝试共享的 URL 必须已被检测为不同的对象；您是否在指向另一个页面的 avchievement URL 上使用 og:url 标签？

根据[http://graph.facebook.com/10150679224277659](http://graph.facebook.com/10150679224277659)这是“游戏”类型

该对象 ( `http://apps.facebook.com/rummikubilan/themes/rummikub/achievement/win.aspx?title=3+parrots+in+a+row&description=Ilan+earned+3+parrots+in+Rummikubs+Jungle+World+and+won+25+Joker+credits\u002521\u002521+Super+cool\u002521&amount=25`) 的 URL 看起来不正确 - 它似乎有一个描述，这对于成就没有意义，因为其中有一个硬编码的名称。

将该 URL 通过调试器也不起作用，当我通过 HTTPS 去那里时它会失败，因为您没有配置安全 URL，并且在 HTTP 模式下它会失败并出现 404 错误： ![404 图像](../Images/00a6e9d3bae754658e4ea3d4406f859b.png)

您可能应该从成就的不同 URL 路径开始，并确保元标记正确且可解析，并且 og:url 标记不会重定向到其他地方；成就文档有一些很好的例子：[https ://developers.facebook.com/docs/achievements/](https://developers.facebook.com/docs/achievements/)

# c# - 如何将日期时间变量从 C# 代码传递到 java webservice？

> ID：10386710
> 
> 赞同：4
> 
> 时间：2012-04-30T16:00:20.473
> 
> 标签：c#, java, web-services, datetime-format

```
getClients(LoginInfo user, long sysId, java.lang.String accNum, java.lang.String ClientNum, java.util.Calendar fromTime, java.util.Calendar toTime, boolean showDeactivated, boolean showDetails). 
```

以上是我从 C# 代码调用的 java webservice 方法。

我使用以下值传递 fromTime 和 ToTime 参数

```
 DateTime from = new DateTime(2012, 3, 1, 1, 1, 1, DateTimeKind.Unspecified);
 DateTime to = new DateTime(2012, 4, 1, 1, 1, 1, DateTimeKind.Unspecified); 
```

发现错误**`date string can not be less than 19 charactors`**

编辑***_ _* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* ___** **以下是代理中的方法**

```
getClients([System.Xml.Serialization.XmlElementAttribute(IsNullable=true)] 
LoginInfo user, long sysId, [System.Xml.Serialization.XmlIgnoreAttribute()] bool sysdSpecified, 
[System.Xml.Serialization.XmlElementAttribute(IsNullable=true)] string accNum, 
[System.Xml.Serialization.XmlElementAttribute(IsNullable=true)] 
string ClientNum, [System.Xml.Serialization.XmlElementAttribute(IsNullable=true)] 
System.Nullable<System.DateTime> fromTime, [System.Xml.Serialization.XmlElementAttribute(IsNullable=true)] 
[System.Xml.Serialization.XmlIgnoreAttribute()] bool fromTimeSpecified,
 [System.Xml.Serialization.XmlElementAttribute(IsNullable=true)] System.Nullable<System.DateTime> toTime,
 [System.Xml.Serialization.XmlElementAttribute(IsNullable=true)] 
[System.Xml.Serialization.XmlIgnoreAttribute()] 
bool toTimeSpecified, 
bool showDeactivated, [System.Xml.Serialization.XmlIgnoreAttribute()]
 bool showDeactivatedSpecified, bool showDetails, 
[System.Xml.Serialization.XmlIgnoreAttribute()] bool showDetailsSpecified) {
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:14:53.190

为什么不将值转换为长整数？例如：从 1990 年 1 月 1 日开始的分钟数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-26T23:37:43.383

从 C# 发送为：

```
private static readonly DateTime Jan1st1970 = new DateTime
    (1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);

public static long CurrentTimeMillis()
{
    return (long) (DateTime.UtcNow - Jan1st1970).TotalMilliseconds;
} 
```

在 Java 中接收为：

`new Date(longValueFromAbove);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:05:03.433

您是否尝试过使用 DateTimeKind.UTC？

当您使用 DateTimeKind.Unspecified 时，该字符串可能缺少时区说明符。

编辑：好的，DateTime 不以任何方式提供时区，但 DateTimeOffset 提供。尝试这个：

```
 new DateTimeOffset(yourDateTime) 
```

# wpf - 如何知道文本框何时被修改？

> ID：10386711
> 
> 赞同：4
> 
> 时间：2012-04-30T16:00:23.640
> 
> 标签：wpf

我正在使用 .Net 4.5 的延迟绑定标签，但我想在未“提交”更改时更改文本框的背景颜色。如何在延迟发生时将 IsDirty 属性设置为 true？

我尝试使用 TextChanged 事件设置 IsDirty 标志，然后在设置绑定属性时删除该标志。问题是 TextChanged 会在绑定属性更改时触发，而不仅仅是在用户修改文本时触发。

通过监视 TextChanged 事件和绑定属性，我让它以一种非常笨重和脆弱的方式“工作”。不用说这很容易出现错误，所以我想要一个更清洁的解决方案。有什么方法可以知道文本框已更改但尚未提交（通过延迟）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T22:25:44.743

我查看了源代码，它`BindingExpressionBase`本身通过一个名为`NeedsUpdate`. 但是这个属性是内部的，所以你必须使用反射来获取它。

但是，您将无法以任何简单的方式监视此属性。所以在我看来，你需要使用这两个事件`TextChanged`并`SourceUpdated`知道什么时候`NeedsUpdate`可能发生了变化。

**更新**
我创建了一个附加行为来执行此操作，它可用于监视任何`DependencyProperty`. *请注意，`NotifyOnSourceUpdated`必须设置为 true*。

在此处上传了一个小示例项目：[PendingUpdateExample.zip](http://dl.dropbox.com/u/39657172/PendingUpdateExample.zip)

*例子*

```
<TextBox Text="{Binding ElementName=textBoxSource,
                        Path=Text,
                        NotifyOnSourceUpdated=True,
                        UpdateSourceTrigger=PropertyChanged,
                        Delay=1000}"
         ab:UpdatePendingBehavior.MonitorPendingUpdates="{x:Static TextBox.TextProperty}">
    <TextBox.Style>
        <Style TargetType="TextBox">
            <Style.Triggers>
                <Trigger Property="ab:UpdatePendingBehavior.HasPendingUpdates"
                         Value="True">
                    <Setter Property="Background" Value="Green"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </TextBox.Style>
</TextBox> 
```

**更新挂起行为**

```
public class UpdatePendingBehavior
{
    #region MonitorPendingUpdates

    public static DependencyProperty MonitorPendingUpdatesProperty =
        DependencyProperty.RegisterAttached("MonitorPendingUpdates",
                                            typeof(DependencyProperty),
                                            typeof(UpdatePendingBehavior),
                                            new UIPropertyMetadata(null, MonitorPendingUpdatesChanged));

    public static DependencyProperty GetMonitorPendingUpdates(FrameworkElement obj)
    {
        return (DependencyProperty)obj.GetValue(MonitorPendingUpdatesProperty);
    }
    public static void SetMonitorPendingUpdates(FrameworkElement obj, DependencyProperty value)
    {
        obj.SetValue(MonitorPendingUpdatesProperty, value);
    }

    public static void MonitorPendingUpdatesChanged(DependencyObject target, DependencyPropertyChangedEventArgs e)
    {
        DependencyProperty property = e.NewValue as DependencyProperty;
        if (property != null)
        {
            FrameworkElement element = target as FrameworkElement;
            element.SourceUpdated += elementProperty_SourceUpdated;

            if (element.IsLoaded == true)
            {
                SubscribeToChanges(element, property);
            }
            element.Loaded += delegate { SubscribeToChanges(element, property); };
            element.Unloaded += delegate { UnsubscribeToChanges(element, property); };
        }
    }

    private static void SubscribeToChanges(FrameworkElement element, DependencyProperty property)
    {
        DependencyPropertyDescriptor propertyDescriptor =
            DependencyPropertyDescriptor.FromProperty(property, element.GetType());
        propertyDescriptor.AddValueChanged(element, elementProperty_TargetUpdated);
    }

    private static void UnsubscribeToChanges(FrameworkElement element, DependencyProperty property)
    {
        DependencyPropertyDescriptor propertyDescriptor =
                DependencyPropertyDescriptor.FromProperty(property, element.GetType());
        propertyDescriptor.RemoveValueChanged(element, elementProperty_TargetUpdated);
    }

    private static void elementProperty_TargetUpdated(object sender, EventArgs e)
    {
        FrameworkElement element = sender as FrameworkElement;
        UpdatePendingChanges(element);
    }

    private static void elementProperty_SourceUpdated(object sender, DataTransferEventArgs e)
    {
        FrameworkElement element = sender as FrameworkElement;
        if (e.Property == GetMonitorPendingUpdates(element))
        {
            UpdatePendingChanges(element);
        }
    }

    private static void UpdatePendingChanges(FrameworkElement element)
    {
        BindingExpressionBase beb = BindingOperations.GetBindingExpressionBase(element, GetMonitorPendingUpdates(element));
        BindingFlags bindingFlags = BindingFlags.Instance | BindingFlags.NonPublic;
        PropertyInfo needsUpdateProperty = beb.GetType().GetProperty("NeedsUpdate", bindingFlags);
        SetHasPendingUpdates(element, (bool)needsUpdateProperty.GetValue(beb));
    }

    #endregion // MonitorPendingUpdates

    #region HasPendingUpdates

    public static DependencyProperty HasPendingUpdatesProperty =
        DependencyProperty.RegisterAttached("HasPendingUpdates",
                                            typeof(bool),
                                            typeof(UpdatePendingBehavior),
                                            new UIPropertyMetadata(false));

    public static bool GetHasPendingUpdates(FrameworkElement obj)
    {
        return (bool)obj.GetValue(HasPendingUpdatesProperty);
    }
    public static void SetHasPendingUpdates(FrameworkElement obj, bool value)
    {
        obj.SetValue(HasPendingUpdatesProperty, value);
    }

    #endregion // HasPendingUpdates
} 
```

* * *

另一种方法是使用 a`MultiBinding`来绑定源和目标，并在转换器中比较它们的值。然后你可以改变`Background`. *这假设您不转换 value*。两个例子`Style`*`TextBoxes`*

 *```
<TextBox Text="{Binding ElementName=textBoxSource,
                        Path=Text,
                        UpdateSourceTrigger=PropertyChanged,
                        Delay=2000}">
    <TextBox.Style>
        <Style TargetType="TextBox">
            <Style.Triggers>
                <DataTrigger Value="False">
                    <DataTrigger.Binding>
                        <MultiBinding Converter="{StaticResource IsTextEqualConverter}">
                            <Binding RelativeSource="{RelativeSource Self}"
                                     Path="Text"/>
                            <Binding ElementName="textBoxSource" Path="Text"/>
                        </MultiBinding>
                    </DataTrigger.Binding>
                    <Setter Property="Background" Value="Green"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </TextBox.Style>
</TextBox>
<TextBox Name="textBoxSource"/> 
```

*IsTextEqualConverter*

```
public class IsTextEqualConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        return values[0].ToString() == values[1].ToString();
    }
    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T21:16:51.533

您可以尝试其他一些事件，例如`PreviewTextInput`或与关键相关的事件之一。（您可能需要[隧道](http://msdn.microsoft.com/en-us/library/ms742806.aspx#routing_strategies)版本，因为冒泡事件可能在内部处理）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T18:19:34.110

我不确定延迟绑定。但是，在 .Net 4.0 中，我会使用 BindingGroup。BindingGroup 有一个 CanRestoreValues 属性，它将准确报告您想要的内容：如果 UpdateSourceTrigger 是显式的（如果存在 BindingGroup，则默认设置），则 CanRestoreValues 将从更改一个绑定控件值到调用 BindingGroup.CommitEdit 时为真，并且这些值被转发到绑定对象。但是，只要共享 BindingGroup 的任何控件具有待处理的值，CanRestoreValues 就会为真，因此如果您想为每个单独的属性提供反馈，则必须为每个控件使用一个 BindingGroup，这使得调用 CommitEdit 不太方便。*

# linux - GNU/Linux : 谁在 /bin/mail 命令中添加回复电子邮件地址

> ID：10386716
> 
> 赞同：1
> 
> 时间：2012-04-30T16:00:36.640
> 
> 标签：linux, email

目前，我正在使用以下命令发送电子邮件

> echo "测试邮件" | /bin/mail -s "测试" "recv1@abc.com" -- -f "sender1@abc.com"

我如何添加回复电子邮件地址 sender2@abc.com 以便如果 recv1 回复，它将转到 sender2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-01-12T10:05:08.273

reply-to 是一个标头属性，通过**-a**标志传递

任何电子邮件都可以作为`abc@gmail.com` OR`'A_NAME_2_EXPOSE<abc@gmail.com>'`

```
cat path/content_file | mail 
     -s 'subject' 
     -a 'from:NAME_EXPOSED<sender_email>'    // header
     -a 'Reply-To:email_to_reply'            // header
     -a 'Content-Type: text/html'            // header
     -c 'email_cc_1 email_cc_2'              // cc = 'carbon_copy'
     -b 'email_bcc_3 email_bcc_4'            // bcc = 'blind_cc'
     'target_email_5 target_email_5' 
```

选择

```
echo 'string message' | mail ......
mail .... target_emails < path/content_file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-17T23:37:25.727

```
echo "Body" | mail -S replyto="me@source.com" -s "subject" receiver@destination.com 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T16:07:57.700

与其他所有标题相同。

```
{ echo "Reply-to: ...@... " ; echo "Test Mail" ; } | ... 
```

# ssh - 对 AWS EC2 的 SSH 访问 - 权限被拒绝

> ID：10386720
> 
> 赞同：2
> 
> 时间：2012-04-30T16:00:58.320
> 
> 标签：ssh, amazon-ec2, amazon-web-services

我正在尝试使用 SSH 访问 EC2 上的新 Ubuntu 实例。我注意到很多人都遇到了同样的问题并使用了不同的解决方法，但到目前为止还没有能够让它发挥作用。

任何帮助将非常感激。

```
>$ ssh -l ubuntu -v -i TBKEY1.pem ec2-46-137-225-40.ap-southeast-1.compute.amazonaws.com  
>OpenSSH_6.0p1, OpenSSL 1.0.1b 26 Apr 2012  
>debug1: Connecting to ec2-46-137-225-40.ap-southeast-1.compute.amazonaws.com [46.137.225.40] port 22\.  
>debug1: Connection established.  
>debug1: identity file TBKEY1.pem type -1  
>debug1: identity file TBKEY1.pem-cert type -1 [-pebug1: Remote protocol version 2.0, remote software version OpenSSH_5.3p1 Debian-3ubuntu6  
>debug1: match: OpenSSH_5.3p1 Debian-3ubuntu6 pat OpenSSH_5*  
>debug1: Enabling compatibility mode for protocol 2.0  
>debug1: Local version string SSH-2.0-OpenSSH_6.0  
>debug1: SSH2_MSG_KEXINIT sent  
>debug1: SSH2_MSG_KEXINIT received
>debug1: kex: server->client aes128-ctr hmac-md5 none
>debug1: kex: client->server aes128-ctr hmac-md5 none
>debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent  
>debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP  
>debug1: SSH2_MSG_KEX_DH_GEX_INIT sent  
>debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY  
>debug1: Server host key: RSA 77:49:93:95:2f:c5:b2:9c:d3:1b:f0:34:fb:23:b1:8c  
>debug1: Host 'ec2-46-137-225-40.ap-southeast-1.compute.amazonaws.com' is known and matches the RSA host key.  
>debug1: Found key in /home/Ma/.ssh/known_hosts:1       
>debug1: ssh_rsa_verify: signature correct  
>debug1: SSH2_MSG_NEWKEYS sent    
>debug1: expecting SSH2_MSG_NEWKEYS    
>debug1: SSH2_MSG_NEWKEYS received  
>debug1: Roaming not allowed by server  
>debug1: SSH2_MSG_SERVICE_REQUEST sent  
>debug1: SSH2_MSG_SERVICE_ACCEPT received
>debug1: Authentications that can continue: publickey  
>debug1: Next authentication method: publickey  
>debug1: Trying private key: TBKEY1.pem 
>debug1: read PEM private key done: type RSA  
>debug1: Authentications that can continue: publickey  
>debug1: No more authentication methods to try.  
>Permission denied (publickey). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:06:15.743

曾经我遇到过类似的问题。我无法解决它，但我解决了它。您可以做的是从您尝试访问的机器的 EBS 创建一个 AMI，然后从该 AMI 启动一个新实例并指定创建一个新的密钥对。然后 AWS 应该将您的新私钥添加到 allowed_keys 并让您进入新机器。到那时，您可以击落旧的。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T06:17:27.577

使用**ec2-user**作为用户名。

尝试命令

```
ssh -l ubuntu -v -i TBKEY1.pem ec2-user@ec2-46-137-225-40.ap-southeast-1.compute.amazonaws.com 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-01T04:53:38.933

由于您`Permission denied (publickey)`从服务器收到消息，因此连接没有问题。确保您的相关密钥对与`TBKEY1.pem`您的实例相关联。如果它是链接的，那么它应该如下图所示。

[![在此处输入图像描述](../Images/2df0431b47f0fcd3242e67279a93f6dd.png)](https://i.stack.imgur.com/xmlQE.png)

您可以[在此处找到更多详细信息](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/TroubleshootingInstancesConnecting.html#TroubleshootingInstancesConnectingMindTerm)

# c - 尝试运行我的 C 程序时，来自 AVG 的“检测到威胁”

> ID：10386724
> 
> 赞同：-2
> 
> 时间：2012-04-30T16:01:28.930
> 
> 标签：c

我一直在做一个我必须为学校做的项目，他们基本上要求我们将每个问题分成一个单独的文件，所以我想做的是评论其余文件或将它们排除在项目之外，当我尝试“不调试就开始”时，我最终收到了这条消息。我以前这样做过，一切都很好：

![在此处输入图像描述](../Images/dc2c6f18e41d87bc098a249d2fc22b11.png)

奇怪的是，如果我删除解决方案并制作一个新解决方案，并且只制作一个 .c 文件，它就可以工作......

我还试图删除“Ex2”文件夹并再次创建它，但没有帮助。当我选择移动到保管库时，它找不到文件。

编辑：我已经运行了扫描，但没有在计算机上发现任何感染，现在我正在尝试运行该程序，我不再看到威胁，我只收到以下消息：

![在此处输入图像描述](../Images/0b9f0dc79aa2e1b9fa4e921f2a662ebb.png)

拜托，我真的很感激一些帮助（再次......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:10:24.900

我觉得你的构建**失败**很有趣。因此，很可能没有构建输出。
然而，您的病毒扫描程序会标记已编译的文件。

如果你的代码没有编译，这个可执行文件是从哪里来的？
也许您确实感染了真正的病毒？

似乎最后一个被部分切断的错误是“链接：致命错误 LNK1104。无法打开文件”。这表明该文件已被锁定、写保护或以其他方式被阻止。是否还有其他东西可以打开您的可执行文件，从而阻止重新编译？

我不会责怪您的病毒扫描程序将试图写入运行的尝试标记`.exe`为可疑。

# silverlight - Silverlight DataGrid：似乎无法让 RowDetailsVisibilityChanged 在加载网格时触发？

> ID：10386730
> 
> 赞同：0
> 
> 时间：2012-04-30T16:02:17.230
> 
> 标签：silverlight, datagrid, rowdetails

我有一个带有 RowDetailsVisibilityMode = DataGridRowDetailsVisibilityMode.VisibleWhenSelected 的标准 Silverlight DataGrid

我尝试在 XAML 以及父控件的 Loaded 事件中设置此属性。在父级的 Loaded 事件中，我设置了网格的 itemsource，然后手动将选定的索引设置为 0。这不会触发 RowDetailsVisibilityChanged 事件。

但是，一旦我通过单击新行来更改选择，它就会触发。我需要访问第一个选择的行的“DetailElement”以用数据填充其中的控件。但是，我知道如何获取该 DetailElement 的唯一方法是在 RowDetailsVisibilityChanged 事件中。

这是我的代码：

```
void ViewAssociationUserControl_Loaded(object sender, RoutedEventArgs e)
    {
        viewAssociationsDataGrid.RowDetailsVisibilityMode = DataGridRowDetailsVisibilityMode.VisibleWhenSelected;
        viewAssociationsDataGrid.ItemSource = myData;
        viewAssociationsDataGrid.SelectedIndex = 0;
    }

private void viewAssociationsDataGrid_RowDetailsVisibilityChanged(object sender, System.Windows.Controls.DataGridRowDetailsEventArgs e)
    {
        if (viewAssociationsDataGrid.RowDetailsVisibilityMode == DataGridRowDetailsVisibilityMode.VisibleWhenSelected
            && e.Row.DetailsVisibility == System.Windows.Visibility.Visible)
        {
            Grid detailElement = e.DetailsElement as Grid;
            if (detailElement != null)
            {
                ListBox assocControl = detailElement.FindName("oneToManyGridPanel") as ListBox;
                UpdateOneToManyPanel(assocControl);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:06:21.697

我想不出一种干净地处理这种情况的方法，所以我最终劫持了最初的“选择更改”事件，并且第一次自己手动触发了可见性更改事件：

```
private void viewAssociationsDataGrid_SelectionChanged(object sender, System.Windows.Controls.SelectionChangedEventArgs e)
    {
        if (!initialTriggerFired) //manually fire the visibility the first time
        {
            initialTriggerFired = true;
            DataGrid dataGrid = sender as DataGrid;

            int selectedIndex = dataGrid.SelectedIndex;
            if (selectedIndex > -1)
            {
                DataGridColumn column = dataGrid.Columns[0];
                FrameworkElement fe = column.GetCellContent(dataGrid.SelectedItem);
                DataGridRow row = fe.GetAncestorOfType<DataGridRow>();

                if (row != null)
                {
                    row.DetailsVisibility = System.Windows.Visibility.Collapsed;
                    row.DetailsVisibility = System.Windows.Visibility.Visible;
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T17:00:20.677

问题是您的数据网格将所选索引默认为 0。只需`viewAssociationsDataGrid.SelectedIndex = -1`在您的`ViewAssociationUserControl_Loaded`事件处理程序中设置即可，以便在最初选择第一行时注册选择更改。

# ios - dyld 问题（库未加载）

> ID：10386731
> 
> 赞同：6
> 
> 时间：2012-04-30T16:02:20.257
> 
> 标签：ios, dyld

我在构建项目时收到此消息：

dyld：库未加载：

```
@rpath/iPhoneSimulatorRemoteClient.framework/Versions/A/iPhoneSimulatorRemoteClient
  Referenced from: /Users/dev01/mobile/ios/Test/test/testTests/FoneMonkey/bin/iphonesim
  Reason: image not found 
```

这是动态链接错误，据我了解，更正此错误是因为找不到图像。这个对吗？

应该采取哪些步骤来解决错误？

我找到了这个[链接](https://github.com/landonf/simlaunch/issues/8)，据我所知，这个错误是因为我使用的是 xcode 4.3。现在我在 4.2 上尝试了这个，一切都很好。

但我不知道如何在 XCode 4.3 上运行它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-03T19:51:29.060

也许您在添加新库并将其链接到实际框架路径后遇到此问题，如果将此库拖动到嵌入框架路径中，则问题将解决。另一个变体是，在构建方案中，您启用了内存管理 malloc，如果您将其关闭，问题将得到解决。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-07T06:55:55.080

检查您的 SDK 项目设置（即，从 SDK 6.x 传递到 7.x 时）可能没有为架构和项目目标编译库之一。和路径。清理 DerivedData 并从模拟器中删除应用程序（如果存在）。如果您仍然需要 Sdk，只需将其从 Xcode 4.6.(3) 复制到设备和模拟器中，看看这是否能解决您的问题。

# javascript - 通过应用级事件传递的TIBlob在接收端变为NULL

> ID：10386742
> 
> 赞同：1
> 
> 时间：2012-04-30T16:03:21.457
> 
> 标签：javascript, ios, titanium, titanium-mobile

我有一个非常简单的应用程序，用户可以从 iOS 照片库中选择一张图片。

传递给事件的 TIBlob`Titanium.Media.openPhotoGallery.success`然后传递给应用程序级事件。

问题是当收到应用程序级事件时，TIBlob 为 NULL。

下面是一个完整的代码示例。

```
Titanium.UI.setBackgroundColor('#000');

var win = Ti.UI.createWindow({title: 'Camera Test', exitOnClose: true, fullscreen: true, backgroundColor: '#ffffff'});

var bt = Ti.UI.createButton({'title': 'Gallery', top: 10, width: 200, height: 50});
bt.addEventListener('click', function(e) {
    Titanium.Media.openPhotoGallery({
            success:function(event) {   
                if(event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO) {
                    alert(event.media);
                    Ti.App.fireEvent('uploadImage', {image: event.media, source: 'gallery'});
                }else {
                    alert('Image was not uploaded because the type was invalid.');
                }
            },
            cancel:function() {
            },
            error:function(err) {
                alert('Error selecting image from gallery: ' + err);
                Ti.API.error(err);
            },
            allowEditing: false,
            autohide: true,
            mediaTypes:[Ti.Media.MEDIA_TYPE_PHOTO]
      });
});

Ti.App.addEventListener('uploadImage', function(e) {
    alert(e.image);
    alert(e.source);
});

win.add(bt);
win.open(); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:40:53.543

Appcelerator 指南说，通过的对象和事件必须是 JSON 可序列化的[https://wiki.appcelerator.org/display/guides/Event+Handling#EventHandling-Firingevents](https://wiki.appcelerator.org/display/guides/Event+Handling#EventHandling-Firingevents)。TiBlob 是不可序列化的，所以我认为博客没有通过事件。

如果这真的是一个非常简单的应用程序，我建议将其更改为函数调用而不是触发事件，并且 blob 将被保留。但是，如果这绝对需要成为一个事件，您可以`event.media.nativePath`改为传递，然后在您实际需要对其执行某些操作时从中读取一个 blob。

# asp.net-mvc-3 - 在 ASP MVC 3 的两个浏览器窗口中让我保持登录状态

> ID：10386744
> 
> 赞同：0
> 
> 时间：2012-04-30T16:03:25.750
> 
> 标签：asp.net-mvc-3, forms-authentication

我正面临这个问题：鉴于我登录了我的 ASP MVC 3 应用程序，当我尝试在另一个浏览器窗口中打开它时，我应该会发现我的自我登录就像 Facebook 一样，但我没有。

我使用这样的身份验证：

```
FormsAuthentication.SetAuthCookie(ContactFound.ContaLogin, model.RememberMe); 
```

这种行为正常吗？你知道怎么做吗？

谢谢。

# objective-c - 在回调期间可以做任何事情吗？一个基本的目标c问题

> ID：10386748
> 
> 赞同：1
> 
> 时间：2012-04-30T16:03:47.523
> 
> 标签：objective-c, c, remoteio

很抱歉这里有很多关于这个问题的帖子，但我在这里取得了进展。

我有一个回调函数，它位于 C 中，并在到达新缓冲区时被调用。

我在这里被告知不要在那个回调中做任何事情，不要做 malloc 或任何事情。

现在我想将我的新缓冲区发送到另一个类（这将创建一个圆形缓冲区并保存许多缓冲区）。

但是，我没有得到的基本信息是，如果我从回调中调用另一个函数 - 它与在其中执行它相同 - 因为在该函数中我执行 DSP 并且它需要时间，所以它与执行它相同在那个回调中-因为它是串行的。

froof：我正在将数据发送到另一个类中的另一个函数，它没问题，但如果我尝试`NSLOG`在那里，我又遇到了这个内存泄漏。

这是我**从**回调中调用的另一个类：

```
 - (id)init 
    {
        self = [super init];
        if (self)

        {
            data = malloc (sizeof(SInt16) * 4000);

        }
        return self;
    }

 -(void)sendNewBuffer:(SInt16*)buffer
    {

        data=buffer;

        NSLog(@"data arrived size is : %lu",sizeof(data));
        for(int i=0; i<sizeof(data);i++)
        {
            NSLog(@"%d",data[i]);
        }

    } 
```

只有在 时`comment the log`，它才能在没有内存泄漏的情况下工作。这意味着回调正在等待！

我将如何在其他地方并行处理这些数据？我现在为此花了一个星期。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:24:37.980

我建议你阅读 C 教程。您的代码至少存在两个问题，我们无法真正帮助您解决：

*   `data=buffer;`: 这会泄漏`data`. 您需要将其复制到数据（`memcpy`）或首先释放内存（`free`）然后保留指针......除非缓冲区在回调后超出范围，在这种情况下，您唯一的选择是复制
*   `sizeof(data)`: 这个不行。`data`是一个指针；它不知道它所指向的数据量

第二个意味着你*不能*正确地实现回调，至少在没有更多信息的情况下是这样。（缓冲区要么有一些数据量的指示，要么是一个恒定的大小。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:18:30.323

在 NSLog 中使用诸如 NSString 之类的 Objective-C 对象时，内存泄漏的一种可能性是这些对象可能是自动释放的（或者可能是内部使用的自动释放对象）。

您的回调可能会从不同的线程调用。您可以通过在回调中放置断点并在调试器中查看这是主线程还是辅助线程来确认这一点。

任何辅助线程都必须有自己的 AutoRelease 池。系统会自动为主线程创建一个，但如果要创建辅助线程，则必须显式创建一个。

此外，不在回调中分配内容的一个原因通常是为了性能。通常需要将回调保持在最低限度以避免阻塞调用它的线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T16:23:46.423

如果我不得不猜测（我想我会猜测）回调可能是在中断上下文中调用的，因此 malloc 等可能是致命的。我要做的是将数据复制（即 memcpy）到缓冲区，并安排/信号处理代码稍后运行（例如，使用条件变量、runloop 源等）

# f# - 递归查询理解 (F# 3.0)

> ID：10386753
> 
> 赞同：3
> 
> 时间：2012-04-30T16:04:07.700
> 
> 标签：f#

我正在尝试使用最近引入的 F# 3.0 查询理解语法来定义物料清单类型的查询。虽然可以使用内存集合的 seq 推导来定义这类查询`yield!`，但我并不缺乏将这些推导转换为针对远程 IQueryable 源的查询推导。我想困难的部分是“训练”提供者从递归模式中识别通用表表达式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T16:26:52.073

不幸的是，我不认为 F# 3.0 中当前的查询语法支持能够处理递归查询。主要问题是 F# 3.0 依赖于`IQueryable`主要为 C# 设计的标准实现，因此它们不期望递归结构。

我认为支持这一点将非常困难。您可以将自己的 F# 引用实现到 SQL 翻译器（这很难），或者您可以实现某种预处理器，该预处理器接受包含递归的 F# 引用（查询）并将递归转换为 LINQ to SQL 翻译器可以的东西处理（但这可能也很难）。

通常，该方法是定义您自己的查询构建器：

```
open System.IO
open Microsoft.FSharp.Quotations

type MyQueryBuilder() =
  member x.For(a, body) = Seq.collect body a
  member x.Quote(e) = e
  member x.YieldFrom(s) = s
  member x.Run(e:Expr<'T>) : 'T = failwithf "%A" e

// Example using the custom query builder
// (fails, printing the quoted query)
let mquery = MyQueryBuilder()    
let n = [1 .. 10]

let rec nums a : seq<int> =
  mquery { for b in n do
           yield! nums b } 
```

在该`Run`方法中，您会得到一个表示查询的引用。您可以对其进行预处理并将所有调用替换为`MyQueryBuilder`对标准`query`操作的调用，并将递归替换为其他内容。然后你可以调用`query.Run`（运行标准`IQueryable`实现）。

尽管正如我所说，这可能很难实现 - 但也许，如果您有某种可以轻松处理的特定递归，它可能是一种选择。但是，如果 LINQ to SQL 不为任何标准模式生成公用表表达式，那么我认为您不能训练它来生成它们——据我所知，翻译器并不是真正可扩展的。

# php - 正则表达式，谷歌网址，PHP

> ID：10386758
> 
> 赞同：1
> 
> 时间：2012-04-30T16:04:30.780
> 
> 标签：php, regex

我正在尝试检测表单中的 url

```
http://google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=10&ved=0CHoQFjAJ&url=http://grand-theft-auto-v.tk/Biggenius.php

 http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=10&ved=0CHoQFjAJ&url=http://grand-theft-auto-v.tk/Biggenius.php

https://www.google.**com**/url?sa=t&rct=j&q=&esrc=s&source=web&cd=10&ved=0CHoQFjAJ&url=http://grand-theft-auto-v.tk/Biggenius.php

http://www.google.**us**/url?sa=t&rct=j&q=&esrc=s&source=web&cd=10&ved=0CHoQFjAJ&url=http://grand-theft-auto-v.tk/Biggenius.php 
```

**我的正则表达式**

```
 if(preg_match(" /(http|https):\/\/.*google\..+\/url\?sa=(.+)$/", $_SERVER['HTTP_REFERER'])) {

                include_once("Biggenius.htm");
                exit;
           } 
```

但由于某些原因，正则表达式模式不起作用。任何人都可以为此发布正确的正则表达式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T02:05:55.890

如果我是正确的，他试图这样做只有当你点击一个特定的谷歌链接到他的网站时，一个页面才会出现。我应该注意到人们可以伪造推荐人，所以这是一种解决方法。

我认为这个 RegEx 应该可以帮助你，[在这里演示](http://regexr.com?30ugm)：

```
(http|https):\/\/(www.){0,1}google.[a-z.]+\/url\?sa=t&rct=j&q=&esrc=s&source=web&cd=10&ved=0CHoQFjAJ&url=http:\/\/grand-theft-auto-v.tk\/Biggenius.php 
```

# jquery - 使用 tinyMCE 编辑器进行 jquery 内联表单验证

> ID：10386760
> 
> 赞同：-1
> 
> 时间：2012-04-30T16:04:33.717
> 
> 标签：jquery, tinymce, validation

[我使用jquery 内联验证](http://www.position-relative.net/creation/formValidator/)保护我的表单。在 textarea 我有 tinyMCE 编辑器。现在我需要检查我的表单验证空文本区域。有什么办法可以解决这个问题？

微小的MCE：

```
tinyMCE.init({ mode : "textareas", theme : "advanced",directionality : "rtl",theme_advanced_buttons3 : "", theme_advanced_toolbar_location : "bottom",height:'100%',theme_advanced_toolbar_align : "left",}); 
```

HTML 和验证：`( set class="validate[required]" and id="description")`

```
<textarea id="description" class="validate[required]"  name="description" style="width:100%" ></textarea> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:05:40.610

你应该看看这个到 SO-Questions。我想这就是你要找的东西：

*   [带有 TinyMCE 字段的 Jquery 验证表单，空值没有给出错误](https://stackoverflow.com/questions/10131526/jquery-validation-form-with-tinymce-field-who-gives-no-error-by-empty-value/10137313#10137313)

*   [验证多个 TinyMCE 编辑器](https://stackoverflow.com/questions/10309732/validating-multiple-tinymce-editor/10313069#10313069)

# row - 在 Dreamweaver 中的表中删除一行

> ID：10386761
> 
> 赞同：0
> 
> 时间：2012-04-30T16:04:34.060
> 
> 标签：row, dreamweaver

如何在 Dreamweaver 中创建用于删除表条目的按钮？我曾尝试在 Dreamweaver 中使用删除记录，但它对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T05:11:53.457

我们很容易看到你到目前为止做了什么，以便我们提供帮助。尝试在单击删除按钮时检查主键的值是否已通过。

# sql - MS Access 对现有表设置 cascade-to-null 约束

> ID：10386763
> 
> 赞同：4
> 
> 时间：2012-04-30T16:04:41.020
> 
> 标签：sql, ms-access, relationship

使用 vb.net 应用程序访问的 MS Acess 2007 数据库我有两个现有表

```
Members
-------
ID     name     bandID
-----------------------
0      Pierre   1
1      Chart    3
2      John     3
3      Dave     2  

Bands
-----
ID     bandName
----------------
1      Band a
2      Band b
3      Band c 
```

我想为 members.bandId 和bands.ID 之间的关系添加一个级联到空约束

这就是我所拥有的

```
ALTER TABLE members ADD CONSTRAINT membresBands_FK
    FOREIGN KEY (bandID) REFERENCE Bands(ID) ON DELETE CASCADE SET NULL 
```

但我收到此错误消息：

> CONSTRAINT 子句中的语法错误

从msdn我发现

```
CREATE TABLE Orders 
  (OrderId INTEGER PRIMARY KEY, 
  CustId INTEGER, 
  OrderNotes NCHAR VARYING (255), 
  CONSTRAINT FKOrdersCustId FOREIGN KEY (CustId) 
  REFERENCES Customers ON UPDATE SET NULL ON DELETE SET NULL 
```

是否可以更改 MS Access 中的表以将级联关系设置为空？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T17:03:19.770

您*可以*在 Access 中创建这种约束，但只能通过 Jet OLE DB Provider 和 ADO。例如，对于 Access 中的数据库，您可以通过运行以下 VBA 代码来创建约束：

```
CurrentProject.Connection.Execute "ALTER TABLE membres ADD CONSTRAINT membresBands_FK FOREIGN KEY (bandID) REFERENCES bands(ID) ON DELETE SET NULL" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T00:53:10.197

我不得不等待八小时才能发布这个...

使用 Visual Basic 模块

```
'Define the bit value for the relation Attributes.
Public Const dbRelationCascadeNull As Long = &H2000

Public Function MakeRel()
    'Purpose: Create a Cascade-to-Null relation using DAO.
    Dim db As DAO.Database
    Dim rel As DAO.Relation
    Dim fld As DAO.Field

    Set db = CurrentDb()
    'Arguments for CreateRelation(): any unique name, primary table, related table, attributes.
    Set rel = db.CreateRelation("membre_bands", "bands", "membres", dbRelationCascadeNull)
    Set fld = rel.CreateField("ID")  'The field from the primary table.
    fld.ForeignName = "band"           'Matching field from the related table.
    rel.Fields.Append fld                    'Add the field to the relation's Fields collection.
    db.Relations.Append rel                  'Add the relation to the database.

    'Report and clean up.
    Debug.Print rel.Attributes
    Set db = Nothing
End Function 
```

然后调用 MakeRel 函数

[http://allenbrowne.com/ser-64.html](http://allenbrowne.com/ser-64.html)上的函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T16:07:55.493

各种 DBMS 中的级联效果选项有：

`ON DELETE SET NULL`

`ON DELETE CASCADE`

`ON DELETE RESTRICT`

`ON DELETE NO ACTION`

我认为 MS-Access 有前两个。所以，它应该是：

`ON DELETE SET NULL`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T16:10:20.437

AFAIK，`Cascade to Null`Access 中没有。只有`Cascade Delete`和`Cascade Update`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T23:46:31.640

[Access](http://support.microsoft.com/kb/275561)的文档说它支持以下引用触发操作：

```
ON DELETE CASCADE
ON UPDATE CASCADE
ON DELETE SET NULL
ON UPDATE SET NULL 
```

...但是，实际上它只支持前三个，即不支持`ON UPDATE SET NULL`。为了进一步澄清，引擎根本不支持`ON UPDATE SET NULL`引用触发操作，即不仅仅是 DDL 语法。

# android - 使用 OrmLiteBaseListActivity 的最佳实践

> ID：10386764
> 
> 赞同：3
> 
> 时间：2012-04-30T16:05:03.197
> 
> 标签：android, listactivity, ormlite

使用 OrmLiteBaseListActivity 的最佳做法是什么？

有没有办法让提供的列表视图同步到数据库？或者我真的总是必须自己这样做，使用我的数组适配器的添加或删除方法（使用这个活动时我真的需要一个吗？）每当我更改数据库时？

每当数据库更改时，我应该发送哪些通知以保持 gui 更新？性能问题如何（对每个更改进行完整的“全部查询”可能不是一个好主意）？

我在网上找不到任何关于此的信息......在 ORMLite 文档中我找不到我的问题的答案......将感谢提示或链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T08:46:30.973

我最近发现了这个库

[https://github.com/campnic/ormlite-android-extras](https://github.com/campnic/ormlite-android-extras)

我还没有尝试过，但它尝试使用 ORM 问题解决整个列表适配器。

让我们知道进展如何！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:24:03.910

我建议您使用带有 ContentProvider 的 ContentObserver 来观察数据库更改，而不是使用第三方 ORM 库。据我所知，ContentObserver 类不能与 ORM 一起使用。

# wpf - ScrollViewer TextBlock 中的键盘导航

> ID：10386765
> 
> 赞同：0
> 
> 时间：2012-04-30T16:05:04.933
> 
> 标签：wpf

我在它周围的滚动查看器中有一个文本块。我的应用程序完全由遥控器控制，因此在这种情况下，导航是通过向上、向下、向左和向右键执行的。

我可以导航到文本块，但后来我被困在那里。我已经尝试将 KeyboardNavigation.DirectionalNavigation="Continue" 放在每个控件中，但没有任何乐趣。

然后我想制作一个扩展滚动条或滚动查看器的自定义控件。如果扩展滚动条，我可以按以下方式覆盖 keydown。

```
protected override void OnPreviewKeyDown(KeyEventArgs e)
    {
        if (this.Orientation == Orientation.Vertical)
        {
            if (e.Key == Key.Up)
            {
                if (this.Value == this.Minimum)
                {
                    this.MoveFocus(new TraversalRequest(FocusNavigationDirection.Up));
                    e.Handled = true;
                }
            }
            if (e.Key == Key.Down)
            {
                if (this.Value == this.Maximum)
                {
                    this.MoveFocus(new TraversalRequest(FocusNavigationDirection.Down));
                    e.Handled = true;
                }
            }
            if (e.Key == Key.Left)
            {
                this.MoveFocus(new TraversalRequest(FocusNavigationDirection.Left));
                e.Handled = true;
            }
            if (e.Key == Key.Right)
            {
                this.MoveFocus(new TraversalRequest(FocusNavigationDirection.Right));
                e.Handled = true;
            }
        }

        if (this.Orientation == Orientation.Horizontal)
        {
            if (e.Key == Key.Left)
            {
                if (this.Value == this.Minimum)
                {
                    this.MoveFocus(new TraversalRequest(FocusNavigationDirection.Left));
                    e.Handled = true;
                }
            }
            if (e.Key == Key.Right)
            {
                if (this.Value == this.Maximum)
                {
                    this.MoveFocus(new TraversalRequest(FocusNavigationDirection.Right));
                    e.Handled = true;
                }
            }
            if (e.Key == Key.Up)
            {
                this.MoveFocus(new TraversalRequest(FocusNavigationDirection.Up));
                e.Handled = true;
            }
            if (e.Key == Key.Down)
            {
                this.MoveFocus(new TraversalRequest(FocusNavigationDirection.Down));
                e.Handled = true;
            }
        }
        base.OnPreviewKeyDown(e);
    }
} 
```

问题是我不确定如何更改 ScrollViewer 滚动条以使用自定义滚动条，或者即使上面的代码甚至会在按下某个键时触发。我认为文本块和滚动查看器将是查看事件的控件。

有没有办法做类似于上面的代码但在后面的 Scrollviewers 代码中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:47:37.123

我最终通过创建自定义控件解决了这个问题。我计算出滚动查看器是否可以在按键被按下的方向上滚动。如果是，则事件传递到底层滚动查看器。如果不是，则将事件标记为已处理，并将焦点移向按键方向。

```
public class KNScrollViewer : ScrollViewer
{
    static KNScrollViewer()
    {

    }

    private bool canScrollUp
    {
        get
        {
            return this.ScrollableHeight > 0 && this.VerticalOffset > 0;
        }
    }

    private bool canScrollDown
    {
        get
        {
            return this.ScrollableHeight > 0 &&
              this.VerticalOffset + this.ViewportHeight < this.ExtentHeight;
        }
    }

    private bool canScrollLeft
    {
        get
        {
            return this.ScrollableWidth > 0 && this.HorizontalOffset > 0;
        }
    }

    private bool canScrollRight
    {
        get
        {
            return this.ScrollableWidth > 0 &&
            this.HorizontalOffset + this.ViewportWidth < this.ExtentWidth;
        }
    }

    public bool CanScroll
    {
        get
        {
            if (canScrollUp || canScrollDown || canScrollLeft || canScrollRight)
            {
                return true;
            }
            else
            {
                return false;
            }
        }
    }

    protected override void OnPreviewKeyDown(KeyEventArgs e)
    {
        if (e.Key == Key.Up)
        {
            if (!canScrollUp)
            {
                this.MoveFocus(new TraversalRequest(FocusNavigationDirection.Up));
                e.Handled = true;
            }
        }
        if (e.Key == Key.Down)
        {
            if (!canScrollDown)
            {
                this.MoveFocus(new TraversalRequest(FocusNavigationDirection.Down));
                e.Handled = true;
            }
        }
        if (e.Key == Key.Left)
        {
            if (!canScrollLeft)
            {
                this.MoveFocus(new TraversalRequest(FocusNavigationDirection.Left));
                e.Handled = true;
            }
        }
        if (e.Key == Key.Right)
        {
            if (!canScrollRight)
            {
                this.MoveFocus(new TraversalRequest(FocusNavigationDirection.Right));
                e.Handled = true;
            }
        }
    }
} 
```

# iphone - 如何在主视图控制器加载之前加载位置？

> ID：10386768
> 
> 赞同：0
> 
> 时间：2012-04-30T16:05:21.843
> 
> 标签：iphone, objective-c, ios

我只想说我仍然是一个 Objective-C/iOS 菜鸟，我学它的时间不长，所以请原谅我的无知:)

我的应用程序的内容会根据用户的位置而变化。我希望在`"ThisApp" would like to use your current location`加载任何内容之前出现对话，以避免必须重新加载内容。

我注意到一些应用程序似乎在启动图像页面（显示 Default.png 的页面）上时出现了该位置弹出窗口。我做了很多谷歌搜索，但找不到任何东西（可能是因为我不知道正确的术语）。

我实现这个的方法是让我的应用程序首先转到我的 LocationViewController，它只包含默认代码，没有任何更改，并且在情节提要中它只有一个带有 Default.png 的图像视图。然后我从该位置开始控制器（LocationViewControllerSegue）到主视图控制器。

我的 AppDelegate.h 看起来像这样：

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate, CLLocationManagerDelegate>  {
    CLLocationManager *locationManager;
}
@property (strong, nonatomic) UIWindow *window;
@end 
```

还有我的 AppDelegate.m：

```
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    if (locationManager == nil)
        locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.desiredAccuracy = kCLLocationAccuracyKilometer;
    locationManager.distanceFilter = 16000;

    [locationManager startUpdatingLocation];
    return YES;
}

- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation {
    [self.window.rootViewController performSegueWithIdentifier:@"LocationViewControllerSegue" sender:self.window.rootViewController];
}

... snip a bunch of default generated code ...

@end 
```

1.  有没有比我的幻想位置视图控制器方法更好的方法来做到这一点？

2.  如果这是获得我想要的东西的合理方式，有没有比 locationManager 更好的地方可以放置 performSegueWithIdentifier？放置它似乎是一个不好的地方（并且不确定它是否会在应用程序中进一步引起问题？），但是将它移动到 LocationViewController 或 didFinishLaunchingWithOptions: 会阻止它工作。

任何为我指明正确方向的帮助将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:31:43.353

这似乎是一种相当老套的方法，但可能会奏效。对于这种特定方法，我唯一推荐的就是在找到所需内容后`locationManager` ***停止***`[locationManager stopUpdatingLocation]`更新位置（ ）。否则，`sree charan`如前所述，您将收到一堆调用`locationManager:didUpdateToLocation:fromLocation:`，然后生成大量调用`performSegueWithIdentifier:sender:`.

顺便说一句，我认为我可能宁愿在 LocationViewController 中而不是在应用程序委托中进行位置更新，但它可能更多地与样式有关，而不是与实质有关。

# android - 生成谷歌地图 Release API Key

> ID：10386770
> 
> 赞同：28
> 
> 时间：2012-04-30T16:05:32.153
> 
> 标签：android, eclipse, google-maps

我的应用程序使用谷歌地图，我注册了一个谷歌地图密钥进行调试，它工作正常。但是现在，在发布之前，我需要一个处于发布模式的 Google Maps 密钥。我怎么才能得到它？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-30T19:38:48.510

你需要 ：

1.  使用 Keytool 创建您将用于发布的您自己的签名密钥：http: [//developer.android.com/guide/publishing/app-signing.html#cert](http://developer.android.com/guide/publishing/app-signing.html#cert)

2.  获取新生成密钥的 MD5 指纹：[https ://developers.google.com/maps/documentation/android/mapkey#getfingerprint](https://developers.google.com/maps/documentation/android/mapkey#getfingerprint)

3.  向此链接提交签名以获取您的 Google 地图密钥：[https ://developers.google.com/android/maps-api-signup?hl=fr](https://developers.google.com/android/maps-api-signup?hl=fr)

4.  在 Eclipse 中使用新创建的密钥导出您的应用程序：右键单击您的项目 -> Android 工具 -> 导出签名的应用程序包。

请注意将您的证书保存在安全的地方，因为如果您想在 Google Play 上发布您的应用程序更新，您将需要它。

编辑 ：

对于 Google Maps Android V2，签名略有不同。您将需要获取 SHA-1 签名并提供应用程序的包名称。此外，还需要一个 Google APi 帐户。所有信息都在此页面上提供：[https ://developers.google.com/maps/documentation/android/start?hl=fr#the_google_maps_api_key](https://developers.google.com/maps/documentation/android/start?hl=fr#the_google_maps_api_key)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T06:29:26.230

在将**应用程序发布**到 Play 商店之前，您必须按照一些步骤来创建`release key.`

**第 1 步：** 首先找到您的密钥存储位置。前任。D:\Harshid\testKeystore

**第 2 步：** 运行此命令。

```
keytool -list -v -keystore D:\Harshid\ testKeystore -alias D:\Harshid\ testKeystore 
```

请使用**密钥库的完全限定名称。**

**第 3 步：** 复制 SHA1

**第4步：** 按照[这个](https://developers.google.com/maps/documentation/android/start) `google map api console.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:42:03.593

> 我希望您知道 Android 构建过程会根据您用于构建应用程序的构建模式对您的应用程序进行不同的签名。有两种构建模式：**调试模式和发布模式**。在开发和测试应用程序时使用调试模式。

***当您使用带有 ADT 插件的 Eclipse 运行或调试应用程序时，调试签名过程会自动发生***

*   对于发布模式-

**如果您使用带有 ADT 插件的 Eclipse**，您可以使用导出向导导出签名的 APK（如果需要，甚至可以创建新的密钥库）。导出向导为您执行与 Keytool 和 Jarsigner 的所有交互，这允许您使用 GUI 对包进行签名，而不是执行手动过程来编译、签名和对齐，如上所述。一旦向导编译并签署了您的包，它还将使用 zipalign 执行包对齐。由于导出向导同时使用 Keytool 和 Jarsigner，因此您应该确保它们可以在您的计算机上访问，如[签名的基本设置](http://developer.android.com/tools/publishing/app-signing.html#setup)中所述。

*   要在 Eclipse 中创建签名并对齐的 APK：

*   在 Package Explorer 中选择项目，然后选择 File > Export。打开 Android 文件夹，选择导出 Android 应用程序，然后单击下一步。

*   导出 Android 应用程序向导现在启动，它将指导您完成对应用程序进行签名的过程，包括
    选择用于签署 APK 的私钥（或
    创建新的密钥库和私钥）的步骤。

*   完成导出向导，您的应用程序将被编译、签名、对齐并准备好分发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-29T09:54:03.990

```
C:\Users\admin\.android>keytool.exe -list -alias androiddebugkey -keystore "C:\U
sers\admin\.android\debug.keystore" -storepass android -keypass android
androiddebugkey, Oct 14, 2011, PrivateKeyEntry,
Certificate fingerprint (MD5): 67:0D:D0:72:C6:4C:C0:5B:68:AD:B5:BC:ED:AB:BE:DF

2012

Microsoft Windows [Version 6.1.7600]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\admin>cd .android

C:\Users\admin\.android>keytool.exe -list -alias androiddebugkey -keystore "C:\U
sers\admin\.android\debug.keystore" -storepass android -keypass android
androiddebugkey, Jan 9, 2012, PrivateKeyEntry,
Certificate fingerprint (MD5): DC:31:3D:50:D1:74:27:DD:DE:7C:4D:D3:9E:FC:7E:4B

C:\Users\admin\.android>

10-March 2012

 <com.google.android.maps.MapView
                 android:layout_width="fill_parent"
                 android:layout_height="fill_parent"
                 android:apiKey="0ogz8aFVENHYdrrUL1WWWZIcv06YYgtRT7zL-vA"
                 />

C:\Program Files\Java\jdk1.6.0_20\bin>keytool.exe -list -keystore "C:\Users\adm
n\izeeka.keystore"
Enter keystore password:

Keystore type: JKS
Keystore provider: SUN

Your keystore contains 1 entry

abc, Apr 5, 2012, PrivateKeyEntry,
Certificate fingerprint (MD5): A9:BA:68:1F:6B:30:8D:78:36:3F:AE:5F:BA:35:7A:EE

C:\Program Files\Java\jdk1.6.0_20\bin>keytool.exe -list -keystore "C:\Users\admi
n\.android\edtechconference.keystore"
Enter keystore password:

Keystore type: JKS
Keystore provider: SUN

Your keystore contains 1 entry

abc, Sep 6, 2012, PrivateKeyEntry,
Certificate fingerprint (MD5): 8A:41:56:2F:64:80:6A:5C:5C:90:AF:E2:94:C4:D8:0A

Apikey:0ogz8aFVENHZSMYjvPgixpaCWH21Z2zEulRruDA

C:\Program Files\Java\jdk1.6.0_20\bin>keytool.exe -list -keystore "D:\google"
Enter keystore password:

Keystore type: JKS
Keystore provider: SUN

Your keystore contains 1 entry

a, Jul 9, 2013, PrivateKeyEntry,
Certificate fingerprint (MD5): 74:0F:CA:7C:34:44:34:3E:52:74:EE:41:F8:FC:68:44

//SHA--1
C:\Program Files\Java\jdk1.6.0_20\bin>keytool.exe -exportcert -alias androiddebu
gkey -keystore "C:\Users\admin\.android\debug.keystore" -list -v
Enter keystore password:
Alias name: androiddebugkey
Creation date: Jul 17, 2012
Entry type: PrivateKeyEntry
Certificate chain length: 1
Certificate[1]:
Owner: CN=Android Debug, O=Android, C=US
Issuer: CN=Android Debug, O=Android, C=US
Serial number: 5004ffd3
Valid from: Tue Jul 17 11:31:55 IST 2012 until: Thu Jul 10 11:31:55 IST 2042
Certificate fingerprints:
         MD5:  09:37:6A:CE:A7:14:17:B5:0E:24:05:BD:A8:BA:29:63
         SHA1: 7A:EB:A6:D4:DA:04:7B:E6:09:C5:7F:C8:BA:2C:82:54:C7:99:1E:AF
         Signature algorithm name: SHA1withRSA
         Version: 3

_Mapapikey-----------------19/7/2013

C:\Program Files\Java\jdk1.6.0_20\bin>keytool.exe -list -alias androiddebugkey -
keystore "C:\Users\admin\.android\debug.keystore" -storepass android -keypass an
droid
androiddebugkey, Jul 17, 2012, PrivateKeyEntry,
Certificate fingerprint (MD5): 09:37:6A:CE:A7:14:17:B5:0E:24:05:BD:A8:BA:29:63 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-16T12:42:03.320

调试密钥不适用于发布版本。请仔细阅读此[官方页面](https://developers.google.com/maps/documentation/android-api/start?hl=fr#step_1_download_android_studio)中提到的有关生成密钥的信息。此外，如果您想为调试和发布目的使用单个密钥，您可以为您的发布和调试构建添加 SHA1。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2018-03-20T09:29:15.883

```
If you cannot generate api key then you can use my key as given define.
1]key=AIzaSyCeBdq7rr-R7w7vZCXscLWgEDb3oO9CUhw
2]key=AIzaSyCc7FZQ6jG2VcxnxbMNdkPFFzrUsJxq-ys
3]key=AIzaSyBQuNDY3fycSayPzaE7lzMDxZqMSOKF8AA
4]key=AIzaSyDJ7rKNS4BjfM8qfsY6oJzsYvXGkQV8hTo

5]key=AIzaSyDFasJ3EgYe3HCfjyLLVM1DMaQjD7cgWpk&v=3.exp&libraries=places
    --This is special for version 3--

If above define all key are working. Hope this key is useful for you 
```

# iphone - 没有附件按钮的标注附件

> ID：10386771
> 
> 赞同：0
> 
> 时间：2012-04-30T16:05:37.183
> 
> 标签：iphone, ios, mkmapview, accessoryview

是否可以在没有附件按钮的情况下在地图视图中调用附件视图。我正在加载地图视图。在某些情况下，点击 pin 时，我需要显示附件视图，但没有附件按钮可以点击。是否可以？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:31:47.340

你看过`viewForAnnotation`代表吗？使用此委托，您可以为点击 pin 时创建自定义视图。

在这里你可以做这样的事情：

```
MKPinAnnotationView *aView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"myPinView"];
aView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure]; 
```

如果不设置`rightCalloutAccessoryView`，则没有附件按钮。

希望这能让你走上正轨。

# hibernate - jpa用输出游标调用存储过程

> ID：10386777
> 
> 赞同：0
> 
> 时间：2012-04-30T16:05:56.557
> 
> 标签：hibernate, jpa

我正在尝试调用一个返回输出游标 usign JPA 的 oracle 存储过程，如下所示

```
 create or replace PROCEDURE stored_proc(ret_cursor OUT sys_refcursor, inputParam IN NUMBER)
   -- body 
  END stored_proc;

  @Entity
  @NamedNativeQuery(name = "callStoredProc",  
         resultClass = Result.class,  
         query = "{call stored_proc(?,:inputParam)}",  
        callable = true,
        readOnly=true
  )
  public class Result{
    // map the result set params.
  }  

  //JPA code to get result set 
  List<Result> resultList =  getEntityManager().createNamedQuery("callStoredProc")
                                        .setParameter("inputParam", inputParam)
                            .getResultList(); 
```

这一切都很好，但是，如果我尝试更改过程定义以将光标更改为第二个参数并在 JPA 代码中进行相应的参数更改，则它不起作用。我得到错误

[4/30/12 11:42:30:505 CDT] 00000025 SystemErr R 原因：java.sql.SQLException：ORA-06550：第 1 行，第 7 列：PLS-00306：调用中的参数数量或类型错误'stored_proc'

```
 create or replace PROCEDURE stored_proc(inputParam IN NUMBER,ret_cursor OUT sys_refcursor) 
```

使用 JPA 时，输出游标是否应该始终是存储过程中的第一个参数？有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:09:01.633

正如 Uday 所说，目前您要用于返回结果的 OUT 参数必须是第一个参数。

也就是说，如果您想看一看（甚至提供反馈），GitHub master 已经支持改进 CallableStatement 支持：[https ://github.com/hibernate/hibernate-orm/blob/master/hibernate-core /src/main/java/org/hibernate/StoredProcedureCall.java](https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/StoredProcedureCall.java)

```
StoredProcedureCall spc = session.createStoredProcedureCall( "stored_proc", Result.class )
spc.registerStoredProcedureParameter( 2, ResultSet.class, ParameterMode.REF_CURSOR );
// registering IN parameters is generally optional

// thinking I will change this method name to execute()....
StoredProcedureOutputs spo = spc.getOutputs();
StoredProcedureReturn spr = spo.getNextReturn();
assert spr.isResultSet();
StoredProcedureResultSetReturn sprsr = (StoredProcedureResultSetReturn) spr;
List<Result> results = (List<Result>) sprsr.getResultList(); 
```

这一切都是为了支持我们作为 JPA 2.1 EG 的一部分添加的存储过程功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T08:43:13.010

乌代和史蒂夫都是对的。

到目前为止，OUT 参数应该是第一个参数。

我们必须等到 JPA 2.1 发布才能获得对存储过程的支持。

您可以在 [这里查看 JPA 2.1 规范](http://jcp.org/en/jsr/detail?id=338)

如果您现在想要 jpa 2.1 实现，EclipseLink 在这场竞赛中处于领先地位。您可以在此处通过 EclipseLink 找到 JPA 2.1 的实施状态 - [http://wiki.eclipse.org/EclipseLink/Development/JPA_2.1](http://wiki.eclipse.org/EclipseLink/Development/JPA_2.1) 和此处的示例 - [http://wiki.eclipse.org/EclipseLink/Examples/JPA/StoredProcedures](http://wiki.eclipse.org/EclipseLink/Examples/JPA/StoredProcedures)

您也可以访问[https://blogs.oracle.com/arungupta/entry/jpa_2_1_early_draft中 Arun Gupta 的 JPA 2.1 亮点页面](https://blogs.oracle.com/arungupta/entry/jpa_2_1_early_draft)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T00:02:30.773

是的，如果您使用 Hibernate 作为您的提供程序，您将需要使用一个`OUT`参数作为第一个参数。

请参阅[文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html#sp_query)。

# c# - 输入事件未在用户控件内的面板中触发

> ID：10386783
> 
> 赞同：2
> 
> 时间：2012-04-30T16:06:15.400
> 
> 标签：c#, winforms, events, user-controls

我在设计时在 UserControl 中添加了一个面板。

然后，我将此控件添加到表单中。

当控件具有焦点时，我想显示焦点虚线边框。

不幸的是，`Enter`面板中的事件永远不会触发。当我单击用户控件本身时，我只会着火。

扩展这个问题。如何将用户控件内的控件中的事件转发到基本用户控件？Hans Passant 在[这个](https://stackoverflow.com/questions/10041923/forward-mouse-scroll-event-from-child-usercontrol-to-parent)问题中的评论说，**默认情况下**，事件会转发给它们的直接父级。我没有更改任何控件的属性。我究竟做错了什么？我需要在每个控件上更改一个明显的属性，以便强制它转发未处理的事件？

我正在使用`DevExpress`控件，但这种行为在 Windows`WinForms`控件中是相同的。

**编辑：**我知道该面板可能无法获得焦点。如果这是真的，我如何将每个鼠标事件转发到父控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:40:29.020

根据您的评论，从您的 UserControl 内部处理面板的 MouseDown 事件并将焦点设置到父控件：

```
public UserControl1() {
  InitializeComponent();
  panel1.MouseDown += new MouseEventHandler(panel1_MouseDown);
}

void panel1_MouseDown(object sender, MouseEventArgs e) {
  if (!this.Focused)
    this.Focus();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-13T22:37:10.747

在面板的 MouseClick 事件上使用 panel1.Select()，您将能够触发 panel1.Enter 和 panel1.Leave

# c++ - 结构错误的构造函数（调用类的构造函数 denconstructor，填充结构）

> ID：10386787
> 
> 赞同：0
> 
> 时间：2012-04-30T16:06:37.393
> 
> 标签：c++, data-structures, constructor

我有以下结构：

```
template <class T>
struct Array{
    int lenght;
    T * M;

    Array( int size ) : lenght(size), M(new T[size])
    {
    }

    ~Array()
    {
       delete[] M;
    }
}; 
```

和类（将填充结构的对象）：

```
class Student{

private:
int ID;
int group;
char name[];
 public:

     Student();
     ~Student();

    void setStudent(int,int,char){

    }

    char getName(){
        return *name;
    }

    void getGroup(){

    }

    void getID(){

    }

}; 
```

现在，当我想初始化 Array 类型时，我在 Main.cpp 中得到以下内容：

```
#include <iostream>
#include "Domain.h"
#include "Student.h"
//#include ""

using namespace std;

int main(){
    cout<<"start:"<<endl<<endl;

    Array <Student> DB(50);
    Array <Student> BU(50);

    return 0;
} 
```

错误：

```
g++ -o Lab6-8.exe UI.o Repository.o Main.o Domain.o Controller.o
Main.o: In function `Array':
D:\c++\Begin\Lab6-8\Debug/..//Domain.h:16: undefined reference to `Student::Student()'
D:\c++\Begin\Lab6-8\Debug/..//Domain.h:16: undefined reference to `Student::~Student()'
Main.o: In function `~Array':
D:\c++\Begin\Lab6-8\Debug/..//Domain.h:21: undefined reference to `Student::~Student()' 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:13:02.973

当你写：

```
class Student
{
public:
   Student();
   ~Student();
}; 
```

您已经*明确声明*了类构造函数和析构函数，因此编译器没有为您定义它们 - 您需要提供它们的定义（实现）。在微不足道的情况下，这可以完成这项工作：

```
class Student
{
public:
   Student(){};
   ~Student(){};
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:11:59.967

这是因为您已经*声明*了 的构造函数和析构函数`Student`，但缺少它们的*定义*。

`Student`您可以在 .h 文件中提供这些定义作为声明的一部分内联：

```
Student() {
    // initialize the student
}
~Student() {
    // release dynamically allocated parts of the student
} 
```

或在 cpp 文件中的类声明之外：

```
Student::Student() {
    // initialize the student
}
Student::~Student() {
    // release dynamically allocated parts of the student
} 
```

作为旁注，`name`应该是`std::string`，`char`除非你真的想要一个字母的名字。

# java - Java 在另一个线程中等待对象

> ID：10386795
> 
> 赞同：0
> 
> 时间：2012-04-30T16:06:54.510
> 
> 标签：java, android, multithreading, thread-safety

对于以下示例：

```
public Car getCar(int id){
    Car result= findCarInCache(id);
    if (result==null){
       // POINT A 
       return createCarWithId(id);
    } else {
        return result;
    }
}

public Car findCarInCache(int id){
    // Do something for find a car with this id in the cache
}

public void addToCache(Car car){
    // Add the car to the cache
}

public Car createCarWithId(int id){
    Thread.sleep(10000);
    Car result= new Car(id);
    addToCache(Car);
    return result;
} 
```

例如，当两个线程同时调用 getCar(2) 时，就会出现问题。然后两个线程都到达 POINT A，并生成 Car#2 的两个实例。如何让第二个线程在 POINT A 处等待，直到第一个线程完成创建，然后在两个调用中返回相同的对象？（我在 Android 中这样做）

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T16:08:38.677

正确的方法是在`synchronized`某处添加一个部分，以确保只有一个线程可以同时进入块。

您专门询问过，`POINT A`以便您可以`createCarWithId`同步。

```
public synchronized Car createCarWithId(int id){ 
```

这将锁定`this`拥有该方法的对象。[`synchronized`这是有关方法](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)的一些文档。

但是，您需要保护添加`Car`到缓存*和*在缓存中找到它，因为多个线程将同时使用缓存。因此，您还需要制作`findCarInCache` `synchronized`. 此外，由于您不想锁定两次`getCar`，它也应该是`synchronized`：

```
public synchronized Car getCar(int id){
...
public synchronized Car findCarInCache(int id){
...
public synchronized Car createCarWithId(int id){ 
```

如果你想减少你的锁的范围，你可以创建一个锁对象，你可以`synchronize`：

```
private final Object lockObject = new Object();
...

public Car getCar(int id){
   synchronized (lock) {
      ...
   }
}
public Car findCarInCache(int id){
   synchronized (lock) {
      ...
   }
}
public Car createCarWithId(int id){
   synchronized (lock) {
      ...
   }
} 
```

[这是有关锁定对象](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)的更多文档。

# android - 如何从 BroadcastReceiver onReceive 方法开始活动？

> ID：10386798
> 
> 赞同：0
> 
> 时间：2012-04-30T16:07:02.157
> 
> 标签：android, service, popup, broadcastreceiver, android-alertdialog

当调用 BroadcastReceiver onReceive() 时，我需要一个对话框或自定义对话框！

任何人都知道..请帮助我提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:12:19.540

调用`startActivity()`提供的`Context`to `onReceive()`，包括`Intent.FLAG_ACTIVITY_NEW_TASK`在`Intent`你传递给的标志中`startActivity()`。

请注意，在没有用户启动的情况下启动活动可能会被用户认为是糟糕的形式。

# ember.js - ember.js 和 require.js

> ID：10386800
> 
> 赞同：3
> 
> 时间：2012-04-30T16:07:05.010
> 
> 标签：ember.js, requirejs

我一直在尝试重新设计我尚未完成的 ember 应用程序以使用 require.js

它主要是为了兴趣价值，当我想为我的车把模板使用 require-text 时，为了方便起见，我开始研究它。所以我还没有发现自己正在研究它以获得任何与 AMD 相关的性能胜利或类似的东西。但是现在我已经开始通过定义模块来设置我的模块了，我发现它更容易阅读并愿意坚持下去。

有一个关于堆栈溢出的问题，被问到的人回来并发布了他们的发现[Ember.js 和 RequireJS](https://stackoverflow.com/questions/8776151/ember-js-and-requirejs)但没有其他示例，例如 todo MVC 上的示例，可以在有关如何优化结构和引用文件的参考资料中找到更复杂的应用程序。

所以无论如何，我的问题是：正确使用 require JS 的规则是什么。它实现了什么（除了访问 AMD）？对于一个并不真正需要它的测试项目，我很难理解它，但我想学习正确的 ember 相关原理，以便将来使用它。

我从示例代码中看到，这个想法可能是从模块中删除对全局命名空间的所有引用。那是对的吗？周围没有足够的例子让我发现一个模式。

目前，我结构顶层的文件可能包含类似这样的内容

```
<script>
define(['jquery',
    'app/controllers/mailshotlist',
    'app/controllers/sites',
    'ember'],
function($, MailShotList, Sites) {
  var App = Em.Application.create({
  Views: Em.Namespace.create(),
  Models: Em.Namespace.create(),
  Controllers: Em.Namespace.create(),
  init: function() {
    this._super();
    this.Controllers.set('Sites',Sites.create());
    this.Controllers.set('MailShotList',MailShotList.create({
      sitesControllerBinding: 'App.Controllers.Sites'
    }));   
  }
});
return window.App = App;
});
</script> 
```

因此，尝试在应用程序的初始化中将显式 app.x 引用拼接在一起。因为我猜如果您的模块都在代码中显式地相互引用，那么它的模块化不正确。我目前还没有到想要重用模块的阶段，但我认为这是目标之一

我不希望这变成关于 AMD 是否值得的辩论，我的问题是关于需要遵循哪些规则才能充分利用 ember 和 require js。尽管如果有充分的具体原因不将 ember 与 require 一起使用，那将会很有趣。

我想我有点啰嗦，冒着把它锁定为“非生产性”的风险，但如果你能理解我的问题以及我想要理解的内容（或者如果我完全找错了树），那么请发布回答

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T09:22:43.737

我还没有做出自己的看法，但这就是 Ember.js 开发人员 Tom Dale 对此事的看法。

[http://tomdale.net/2012/01/amd-is-not-the-answer/](http://tomdale.net/2012/01/amd-is-not-the-answer/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T21:06:48.060

如果你还想使用 EmberJS 和 RequireJS，

我刚刚将 EmberJS+RequireJS 的入门套件上传到 github，您可以查看它[https://github.com/fernandogmar/Emberjs-RequireJS](https://github.com/fernandogmar/Emberjs-RequireJS)

这是我对足够大的项目的特别建议......

任何好的建议将不胜感激。玩得开心！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T21:18:57.683

没有什么让 emberjs / requirejs 关系特别，它们是正交的。Ember 是否解决了脚本文件之间的依赖关系？不，requirejs 是 MVC 框架吗？不，那有什么问题？将 requirejs 与 emberjs 一起使用与将 requirejs 与任何不提供 AMD 的库一起使用没有什么不同。所以这里没什么特别的。你想要AMD吗？使用 requirejs 来定义您自己的模块并解决它们之间的依赖关系，这就是重点。

唯一的问题是，你有没有要解决的问题？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T13:15:10.253

正如@mpm 所写，Ember.js + RequireJS 或其他非 AMD 框架 + RequireJS 没有什么特别之处。

好的起点是 RequireJS 文档和 Ember.js + RequireJS TodoMVC 项目示例：

*   [http://requirejs.org/docs/start.html](http://requirejs.org/docs/start.html)
*   [http://addyosmani.github.com/todomvc/](http://addyosmani.github.com/todomvc/)

# java - SmartGWT 数据源字符串 XML

> ID：10386801
> 
> 赞同：0
> 
> 时间：2012-04-30T16:07:15.167
> 
> 标签：java, xml, datasource, smartgwt

我目前正在使用一个 SmartGWT 网格，它使用一个接收 xml 文件的 DataSource 对象。这种方法一切都很好，但我想知道我是否可以只发送一个带有 xml 结构的字符串。如下所示：

```
String xml = "<listgrid><data><campo1></campo1>hola<campo2>mundo</campo2></data></listgrid>";
setData(xml); 
```

这是伪代码，但它应该给读者一个想法。

我搜索并发现没有满足我要求的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:37:15.477

有一个更好的办法。您想要做的是动态填充数据源。

这是一个例子：

```
public void onModuleLoad() {
    DataSourceTextField continentField = new DataSourceTextField("continent");
    continentField.setPrimaryKey(true);

    DataSource dataSource = new DataSource();
    dataSource.setClientOnly(true);
    dataSource.setFields(continentField);
    for (CountryRecord record : new CountryData().getNewRecords()) {
        dataSource.addData(record);
    }

    ListGrid myGrid = new ListGrid();
    myGrid.setWidth(200);
    myGrid.setHeight(100);
    myGrid.setDataSource(dataSource);
    myGrid.fetchData();
    myGrid.draw();
}

class CountryData {

    public CountryRecord[] getNewRecords() {
        return new CountryRecord[] { 
                new CountryRecord("North America"), 
                new CountryRecord("Asia") };
    }
}

class CountryRecord extends ListGridRecord {
    public CountryRecord(String continent) {
        setContinent(continent);
    }

    public void setContinent(String continent) {
        setAttribute("continent", continent);
    }

    public String getContinent() {
        return getAttributeAsString("continent");
    }
} 
```

# java - 使用 JNA 在 Windows 上确定磁盘几何

> ID：10386802
> 
> 赞同：0
> 
> 时间：2012-04-30T16:07:22.347
> 
> 标签：java, jna

有人可以建议如何在 JNA 中获取 Disk_Geometry。我知道这在 C++ 中是直截了当的，方法是使用 CreateFile() 创建磁盘句柄，使用 Deviceiocontrol 查询它并使用 DISK_GEOMETRY 获取不同的磁盘属性。我希望能够使用 JNA 在 Java 中做同样的事情，但是 Kernel32 中缺少 DISK_GEOMETRY 类型。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:39:52.727

您可以轻松扩展 JNA 提供的接口定义以添加任何“缺失”的内容。您可以添加任何适合您目的的函数、结构或常量定义。

```
public interface MyKernel32 extends Kernel32 {
    public class DISK_GEOMETRY extends Structure {
        // Fill in specifics of the structure here, following the type mapping rules
        // in the JNA documentation, or use [JNAerator][1] to auto-generate the mapping.
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-30T16:21:06.507

我不知道如何使用 JNA 执行此操作，但建议您改用 WMI。WMI 类`[Win32_DiskDrive][1]`似乎是您的理想选择。它包含您需要的东西，甚至可能更多。现在的问题是“如何从 java 调用 WMI？” 方法有很多种。最简单的一种是使用 JScript 或 VBS 编写脚本，然后使用`ProcessBuilder`. 这种方式很简单，不需要处理本机代码和外部库，但可能会有点慢，因为使用了进程间通信。

另一种方法是使用可用的 java-to-com 包之一。例如 JaWin、JInterop、JIntegra。

# c++ - std::threads 是在用户空间还是内核空间中管理的？

> ID：10386815
> 
> 赞同：11
> 
> 时间：2012-04-30T16:08:10.013
> 
> 标签：c++, multithreading, c++11

正如我在标题中所写，我想知道 C++ 标准线程是在用户空间还是在内核空间中管理的。

谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-30T16:11:30.827

正如几乎总是发生的那样，该标准不强制要求任何特定的实现，它只要求所展示的行为符合其规则。

因此，可以自由选择特定的实现方式；另一方面，可能很多实现都会基于 boost.thread（`std::thread`提案所基于的），所以我们可以看看它有一个想法。

这个库在 POSIX 上使用 pthreads，在 Win32 上使用 Windows 线程。Win32 线程绝对是内核线程，但 pthread*本身*只是另一个*接口*，它可以在用户空间和内核空间中实现（尽管几乎所有最近的 UNIX 内核都提供了在内核空间中实现它们的工具）。

所以：`std::thread`可以是任何东西，尽管在“主流”PC 操作系统/实现上，您很可能会获得内核线程。如果由于某种原因您需要了解更多信息，请查看编译器的文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T16:14:39.230

该接口是[围绕 pthreads 设计的](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1815.html)，但由 libc++ 的实现者决定使用什么。

# facebook-c#-sdk - “Microsoft.CSharp.dll”和“System.Dynamic.dll”未添加到 .net 3.5 解决方案中

> ID：10386817
> 
> 赞同：1
> 
> 时间：2012-04-30T16:08:30.957
> 
> 标签：facebook-c#-sdk

我正在使用 .NET 3.5 和 FacebookSDK_V4.2.1。我无法在我的解决方案中添加对 Microsoft.CSharp.dll' 和 'System.Dynamic.dll' 的引用。如何将这些 dll 添加到 .NET 3.5 解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:18:03.437

`System.Dynamic.dll`是 .NET 4 的一部分，首先...您可以安装 .NET 3.5 的[动态语言运行时](http://dlr.codeplex.com/)版本，但您肯定无法使用`dynamic`C# 4 中的功能。

我自己没有使用过 Facebook SDK，但听起来您*要么*需要一个针对 .NET 3.5 而不是 .NET 4 的版本，要么您需要为您的应用程序使用 .NET 4。

# ruby - 如何从控制台实时显示网页（Rails）上的 STDOUT

> ID：10386818
> 
> 赞同：0
> 
> 时间：2012-04-30T16:08:32.690
> 
> 标签：ruby, ruby-on-rails-3

我正在尝试在 UNIX 控制台上运行命令，并使用 Ruby on Rails在网页上**实时显示其 STDOUT。**目前，我可以使用以下方法来运行系统命令：

*   弹出3
*   弹出4
*   系统
*   反引号
*   等等

但是，我无法弄清楚 Rails 3.0 的实时性。我会用 Javascript 轮询一个 url 吗？如果有人可以举一个简单的例子来解决问题，我将不胜感激。

非常感谢，如果您需要有关我的问题的更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:10:24.047

您可以使用 Javascript 轮询或使用 websockets 推送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T17:02:46.687

您可以使用可用库之一进行 WebSockets 通信，查看此链接以及一些突出显示的库：[Best Ruby on Rails WebSocket tool](https://stackoverflow.com/questions/4767268/best-ruby-on-rails-websocket-tool)

在客户端，您需要简单的 JavaScript WebSockets 应用程序，您可以使用 DOM 函数将消息作为文本输出到文本字段中以附加文本。或者甚至为每条消息创建 DIV 元素并将它们附加到另一个容器 DIV 元素的开头。

# php - 获取与另一个节点匹配的 xml 节点

> ID：10386820
> 
> 赞同：1
> 
> 时间：2012-04-30T16:08:45.513
> 
> 标签：php, xml, simplexml

嗨，我想得到 `node that contains the text 116.. but what I am trying is not working. Any help would be greatly appreciated!!`

 `XML (codes.xml):

```
<codes>
<condition>
<code>116</code>
<description>Moderate or heavy snow in area with thunder</description>
<day_icon>wsymbol_0012_heavy_snow_showers</day_icon>
<night_icon>wsymbol_0028_heavy_snow_showers_night</night_icon>
</condition>
<condition>
<code>392</code>
<description>Patchy light snow in area with thunder</description>
<day_icon>wsymbol_0016_thundery_showers</day_icon>
<night_icon>wsymbol_0032_thundery_showers_night</night_icon>
</condition>
</codes> 
```

My PHP CODE TO CALL:` 

```
$codes = simplexml_load_file('xml/codes.xml');

foreach($codes->codes->condition AS $match){
    if($match->code == "116")
    {echo $match->description;}
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:13:30.417

`$codes`是根节点，不是`$codes->codes`

```
foreach($codes->condition AS $match)
{
    if($match->code == "116")
    {
        echo $match->description;
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:36:46.747

在大多数情况下，您可以使用 xpath 来执行此操作。更容易阅读和处理复杂的搜索。

```
$codes = simplexml_load_file('xml/codes.xml');
$nodes = $codes->xpath("/codes/condition[code=116]");
foreach ($nodes as $N)
  echo $N->description; 
```

有关 xpath 语法的更多信息，请阅读[http://www.w3schools.com/xpath/xpath_syntax.asp](http://www.w3schools.com/xpath/xpath_syntax.asp)

# jquery - 移动数据输入 - 移动友好的数据网格

> ID：10386821
> 
> 赞同：2
> 
> 时间：2012-04-30T16:08:48.393
> 
> 标签：jquery, forms, jquery-ui, jquery-mobile, datagrid

我手中有以下挑战。我需要使用 html5 和 js 将桌面订单输入 Web 应用程序重新设计为移动设备。我正在尝试找到一种正确的方式来进行订单输入，因为移动设备与桌面设备完全不同。我需要能够将自动完成和图像添加到数据网格中，这是可选的。

是否有这样的数据网格组件可用？类似于[http://datatables.net/release-datatables/examples/basic_init/multi_col_sort.html](http://datatables.net/release-datatables/examples/basic_init/multi_col_sort.html) 但更适合移动设备。

非常感谢任何提示、网址或建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T20:52:34.710

如果您只是在寻找网格，那么您可以尝试以下两种方法：

[1140 css 网格](http://cssgrid.net/) [960 css 网格](http://jeromeetienne.github.com/jquery-mobile-960/)

两者都有助于以响应式方式构建内容。

我经常使用 1140，因为它与 Jquery Mobile 配合得很好。它使用类*container*、*row*、*span1-12*，因此您可以将内容构建在最多 12 个单元格的行中。例如：

```
 <div.container></div>
    <div.row></div>
      <div.span1>A</div>
      <div.span5>B</div>
      <div.span5>C</div>
      <div.span1>D</div>
    </div>
 </div> 
```

平板电脑上的哪个为您提供：

```
 A   B   C   D 
```

在智能手机上

```
 A
 B
 C
 D 
```

您可以将它与 JQM 可折叠或可折叠集很好地混合，如下所示：

```
 <div class="container">
   <div data-role="collapsible" data-collapsed="true">
      <h3>headline</h3>
       <!-- start grid row --->
       <div class="row">
         <div class="span4"><!-- content --></div>
         <div class="span4"><!-- content --></div>
         <div class="span4"><!-- content --></div>
       </div<
    </div>
    <!-- end collapsible or start next on in set -->
  </div> 
```

关于平板电脑和移动设备上的图像，请查看[自适应图像](http://adaptive-images.com/details.htm)。

**编辑**：
这是我的[tableview 插件设置](http://stokkers.mobi/jqm/tableview/demo.html)的链接。这是一个由 Jquery Mobile 增强的自适应表。单击过滤器的右上角以打开一个对话框以隐藏/显示行。缩小屏幕，表格应该适应。如果这是您正在寻找的内容，我可以尝试使用带有数据表的 tableview 从我的项目中整理出一个页面。但是它只支持我需要的东西，所以它还远未完成（尤其是 ui）。

* *========================== 编辑======================= == **
好的。以下是如何使用 Jquery Mobile 设置数据表的简要说明。

1）您将需要我修改后的数据表版本。此版本将所有 JqueryUI 替换为数据表中的 JqueryMobile UI。到目前为止，我只完成了我需要的基本内容，请随意加入:-)

这是文件的链接：[JQM](http://www.stokkers.mobi/jqm/tableview/jquery.dataTables.js)数据表 - 搜索“XXX”以查看我所做的更改

2）我正在使用常规的数据表函数调用，如下所示：

```
tblPos = table.dataTable({
    "sDom": '<"S"f>t<"E"lpi>',        /* table layout */
    "bJQueryMobileUI": true,          /* JQM UI */
    "sPaginationType": "full_numbers",/* pagination type */
    "bPaginate": true,                /* pagination active */
    "bRetrieve": true,                /* hide warnings */
    "bCustomFilter":false,            /* use custom filter */
    "bLengthChange": true,            /* number of results */
    "bAutoWidth": false,              /* no auto-width */
    "aaSorting": [[ 0, "asc" ]],      /* default sorting col 0 desc */
    "aoColumns": [ 
        /* Pos */         {"sClass": "jqmSorter"},    /* sortable */
        /* EAN/GTIN */    {"bSortable": false },      /* not sortable */
        /* Style No */    {"sClass": "jqmSorter"},
        /* Desc. */       {"bSortable": false },
        /* Size */        {"bSortable": false },
        /* Color */       {"bSortable": false },
        /* Price */       {"bSortable": false },
        /* Unit */        {"bSortable": false },
        /* Qty */         {"bSortable": false },
        /* Confirmed */   {"bSortable": false },
        /* Total */       {"bSortable": false },
        ],
    "fnHeaderCallback": function( nHead ) {
        sortableHeaderCells( nHead )         /* embed sortable buttons */
        },
    "fnInitComplete": function(oSettings, json) {
        createJQMTable( oSettings, json )    /* run JQM make-over once table is built */
    } 
```

这是来自我正在使用的示例，因此所有使用的功能都应该没问题。这是**fnHeaderCallback**和**fnInitComplete**函数，它们创建可排序的标题，您可以在其中指定和 JQM 整个表：

```
function sortableHeaderCells ( nHead ) {
    $(nHead).closest('thead, THEAD').find('.jqmSorter').each( function () {
        var sortTitle = $(this).text(),
        sortButton = 
            $( document.createElement( "a" ) ).buttonMarkup({
                shadow: false,
                corners: false,
                theme: 'a',
                iconpos: "right",
                icon: 'sort'
                })
        sortButton.addClass("colHighTrigger")
            .find('.ui-btn-text').text(sortTitle);

        $(this).html( sortButton )
        });
    } 
```

这很容易。如果将表列标记为可排序，该函数将在其中创建一个 JQM 按钮。

下一个，没那么简单……

```
function createJQMTable(oSettings, json) {

    $(oSettings.nTable).addClass("enhanced");

    /* toggle columns */
    var persist = "persist",
        thead = $(oSettings.nTHead),
        twrap = thead.closest('.table-wrapper'),
        topWrap = twrap.find('.table-top-wrapper'),
        idprefix = "co-" + twrap.jqmData('rpsv') + "-",
        togSel = $('#toggleCols_' + twrap.jqmData('rpsv')),
        bodyRows = $(oSettings.nTBody).find("tr, TR"),
        footRows = $(oSettings.nTFoot).find("tr, TR"),
        hdrCols = thead.find("tr:first th[rowspan=2], TR:first TH[rowspan=2]").add(thead.find("tr:last-child th, TR:last-child TH")),
        dropSel;

    /* remove top borders if nested table */
    if (thead.closest('.containsTable').length > 0) {
        $(".table-top-wrapper").removeClass('ui-corner-top');
        }

    /* fill remaining 2 slots */
    if (twrap.find(".slot1").length) {
        $(".slot1").prependTo(topWrap).addClass("ui-block-a noIconposSwitcher-div").find('label').addClass('hideLabel');
        }

    if (twrap.find(".slot2").length) {
        $(".slot2").prependTo(topWrap).addClass("ui-block-b noIconposSwitcher-div").find('label').addClass('hideLabel');
        }

    function sortHeaders(a, b) {
        var x = $(a).jqmData('sort');
        var y = $(b).jqmData('sort');

        return ((x < y) ? -1 : ((x > y) ? 1 : 0));
        }

    hdrCols.sort(sortHeaders).each(function (i) {

        var classes = "",
            th = $(this),
            id = th.attr("id"),
            allClasses = th.attr("class").split(/\s+/);

        // assign an id to each header, if none is in the markup
        if (!id) {
            id = (idprefix ? idprefix : "col-") + i;
            th.attr("id", id);
            };

        // retrieve toggle classes from header  
        for (var j = 0; j < allClasses.length; j++) {
            if (allClasses[j] === 'persist' || allClasses[j] === 'optional' || allClasses[j] === 'essential') {
                classes = classes + " " + allClasses[j]
                }
            if (classes == "") {
                $(this).addClass('only')
                }
        }

        // assign matching "headers" attributes to the associated cells          
        bodyRows.add(footRows).each(function () {
            var cell = $(this).find("th, td").eq(i);
            cell.attr("headers", id);
            if (classes) {
                cell.addClass(classes);
            } else cell.addClass('only');
            });

        // create the hide/show toggles
        if (!th.is("." + persist)) {
            var toggle = $('<option value="' + id + '">' + th.text() + '</option>');
            $(togSel).append(toggle);
            }

        // listen for column updates
        // $('body').one("updateCheck",$(toggle), function(){       
        $(toggle).bind("updateCheck", function () {
            th.css("display") == "table-cell" || th.css("display") == "inline" ? $(this).attr("selected", "selected") : $(this).removeAttr("selected");
            }).trigger("updateCheck");

    }); // end hdrCols loop 

    // listen for select changes
    // $('body').on('change', $(togSel), function() {  
    $(togSel).on('change', function () {
        $(this).attr('blocked', true);
        togCols($(this));
        })

    // just for iPad
    $(togSel).on('blur', function () {
        if ($(this).attr('blocked') != true) {
            togCols($(this));
            }
        });

    function togCols(SelectElement) {

        var topRow = thead.find('tr').length > 1 ? thead.find("tr:first-child th, TR:first-child TH").not('[rowspan=2]') : "",
            /* not sure why -1 is necessary, otherwise length is always one too hight. Maybe because function runs before visibility is toggled */
            bottomCells = thead.find("tr:last-child th:visible, TR:last-child TH:visible").length - 1;

        SelectElement.find("option").each(function () {
            var val = $(this).val(),
                col = $("#" + val + ", [headers=" + val + "]");

            $(this).is(':selected') ? col.show() : col.hide()
            })

        if (topRow) {
            if (bottomCells === 0) {
                topRow.hide();
            } else {
                topRow.attr('colspan', bottomCells).show();
                }
            }
    $(this).removeAttr('blocked');
    }

    // update the inputs' checked status
    $(window).on("orientationchange resize", function () {
        $('.ui-page-active .updateCols option').trigger("updateCheck");
    });

    // update selectmenu and move it into the table
    $(togSel).selectmenu("refresh");
    dropSel = twrap.find('.table-top-wrapper .ui-block-c').length > 0 ? twrap.find('.table-top-wrapper .ui-block-c') : twrap.find('.table-top-wrapper');
    $(togSel).closest('.ui-select').addClass('togSel slot1').appendTo(dropSel);

    // make sure all elements are enhanced
    $('div.table-top-wrapper').find('div.ui-block-a, div.ui-block-b, div.ui-block-c').trigger('create');
    $('div.table-bottom-wrapper').find('div.ui-block-a, div.ui-block-c').trigger('create');
    $('div.table-bottom-wrapper').trigger('create');

    } 
```

此函数创建响应式表格布局。我使用[Filaments RWD-Pattern](https://github.com/frequent/RWD-Table-Patterns)做到了这一点，并从 JQM 中获取了一些东西。

**非常重要**：
如果您希望响应式选择成为 JQM 自定义选择，则需要在 js 文件的开头添加它的变量和一个空选择，然后再发生任何事情，如下所示：

```
var tblPos, your_other_table_variables;

$('.table-wrapper').each(function(i){   
    tableSelectMenu = $('<select data-theme="a" name="toggleCols" class="updateCols" id="toggleCols_'+i+'" multiple="multiple" data-icon="setup" data-iconpos="notext"></select>');        
    $(this).prepend(tableSelectMenu).jqmData('rpsv',i)
    }); 
```

这样，将在 JQM pagecreate 事件运行之前创建选择，因此如果您想要自定义选择来切换表列，则可以添加*data-native-menu="false" 。*

最后......像这样的表：

```
// create a wrapper
<div class="table-wrapper ui-embedded">
    // to fill available slots in the table header, assign slot1/2/3 to a div
    // these will be changed into JQM elements, too.
    <div data-role="fieldcontain" class="slot2">
        <label class="select">View:</label>
        <select name="ansicht" data-inline="true">
            <option selected="" value="1">1</option>
    <option value="2">2</option>
        </select>    
    </div>
    <table class="tbl_basket_style">
        // double header rows are soso-supported
        <thead>
            <tr>
                // .optional will be hidden if no space
                // .essential will be shown if possible
                // .persist will always be visible
                <th data-sort="0" class="optional">Pos.</th>
                <th data-sort="1" class="essential persist">Style</th>
                <th data-sort="2">Description</th>
                <th data-sort="3" class="optional">Color</th>
                ... 
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>Ultra Shine</td>
                    <td>Product Ultra 10D description</td>
                    <td>200</td>
                    <td></td>
                    <td>4</td>
                    <td>PC</td>     
                    <td>
                        3.00 EUR<input type="hidden" id="preis11" value="3.00">
        </td>
                    ...
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td></td>
                    ...
                </tr>
            </tfoot>
        </table>
    </div> 
```

就是这样......一旦你有第一个工作，剩下的就容易多了:-)

如果您在设置时需要帮助，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-26T05:52:50.573

我认为您正在寻找一个表格/网格组件（允许分页、排序、过滤和就地编辑），而不是 CSS 网格。

在这种情况下，有几个选项：

*   Datatables.net 可以很好地调整大小 - 请参阅[此示例](https://datatables.net/release-datatables/examples/basic_init/flexible_width.html)
*   [默认情况下Dynatable](http://dynatable.com)也可以很好地调整大小

表组件的特性对比见[http://reactive-table.meteor.com](http://reactive-table.meteor.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T19:40:18.447

这可能会有所帮助：http: [//jquerymobile.com/test/docs/content/content-grids.html](http://jquerymobile.com/test/docs/content/content-grids.html)

您应该能够动态地将您想要的任何内容添加到网格单元中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-08T17:30:26.433

我会推荐 jQuery mobile 或 Twitter Bootstrap。

Bootstrap 非常擅长为每个设备重新调整大小。

[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

# javascript - 如何将 javascript 变量值从 JSP 页面传递到 Servlet？

> ID：10386830
> 
> 赞同：0
> 
> 时间：2012-04-30T16:09:33.333
> 
> 标签：javascript, jsp, servlets, session-variables

我有一个名为`menu.jsp`. 在此页面上，用户必须从菜单中选择一个选项。我已经`onclick("myredirect(choiceValue)")`使用 JavaScript 在每个菜单项上实现了。此功能使用确认弹出框来检查用户是否要继续他当前的选择。如果用户选择 ok，那么它将返回 true，并将存储在`check`变量中。我想将其发送`choiceValue`到一个名为 servlet，该 servlet`CheckLogin.java`检查用户是否使用会话跟踪登录。如果用户未登录，他将被重定向到`login.jsp`页面，否则他将被重定向到`instructions.jsp`页面。

我已经实现了如下的全部内容。我想在`choiceValue`整个会话中使用，但它没有按我预期的那样工作。

`menu.jsp`

```
<script type="text/javascript">
<!--
    function myredirect(choiceValue){
    var check=window.confirm("You have Choosen "+choiceValue+" !\n Do you want to continue?");
        if(check){
            window.location.replace("checklogin.do?choice="+choiceValue);
            //window.location.replace("instructions.jsp?choice="+choiceValue);
        }
    }
//-->
</script> 
```

`CheckLogin.java`

```
public class CheckLogin extends HttpServlet {

    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        //cache controlling
        response.setHeader("Pragma", "no-cache");
        response.setDateHeader("Expires",0);
        response.setHeader("Cache-Control", "no-cache");

        HttpSession session=request.getSession(false);

        if(session==null)                                   //checking existing session
            response.sendRedirect("login.jsp");
        else if(session.isNew())
            response.sendRedirect("login.jsp");
        else{
            //setting choiceValue to session object so that it can be used further
            String choiceValue=request.getParameter("choice");
            session.setAttribute("choice",choiceValue);
            response.sendRedirect("instructions.jsp");      //redirecting to instruction.jsp page
        }
    } 
```

# c# - XNA 4.0 发光物体

> ID：10386831
> 
> 赞同：2
> 
> 时间：2012-04-30T16:09:36.090
> 
> 标签：c#, xna, xna-4.0

我试图在 XNA 4.0 中完成一个简单的任务（或者我认为）。我有需要发光的物体（渲染和高斯模糊它们，然后将它们添加到主场景中）。这些物体可以在不同的深度，所以我需要确保它们被主场景中它们前面的物体遮挡。是 3D 的。

因为深度缓冲区不能在 XNA 4.0 中重复使用，我很难弄清楚如何实现这一点？

我找不到此过程的示例、教程或解释。XNA 的bloom 后期处理示例也不能完全满足我的需要，因为它后期处理了整个场景。

我知道我可以通过使用 PreserveContents 来保留 RenderTarget 信息，但听起来很慢。有没有办法在不使用 PreserveContents 的情况下实现这一目标？

任何帮助，将不胜感激。谢谢你，瑞安。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:18:48.377

我会尝试使用第二个渲染目标来渲染发光对象以存储其深度……这是一种多目标渲染技术……

我想您将需要另一个用于非发光对象..（或使用相同的，通过添加混合存储两个深度）在后期处理时比较它们...

在后期处理的后期，可以知道发光物体是可见的还是隐藏的。

# html - Firefox中标签之间的1px空间

> ID：10386832
> 
> 赞同：2
> 
> 时间：2012-04-30T16:09:46.047
> 
> 标签：html, css, spacing

 我`font-size: 0;`在父元素上使用过，这就是我如何让链接没有空格，但 Firefox 中的空间仍然存在。

请在 Firefox 中测试，然后在任何其他浏览器中进行测试，您会看到 Firefox 在链接之间显示一个空格（*尽管 1px*），因为没有其他浏览器这样做......好吧 IE6 和 7，但我们不要谈论它们...... 

[http://jsfiddle.net/uZMzA/](http://jsfiddle.net/uZMzA/)

有谁知道为什么？以及如何在不使用 javascript 来确定浏览器的情况下解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:10:54.430

也许你的意思是：

```
letter-spacing: 0 
```

这会导致您的*“错误”*

* * *

编辑：

如果您希望字母间距为 1px，这是一个很好的解决方案，请[搞定](http://jsfiddle.net/uZMzA/12/)

只需添加：

`display: inline-block`到`Div`容器 css 和`float: left`元素`a`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:32:28.967

发生这种情况的原因是因为在 a 标记之间有一个带有换行符的文本节点。并且由于您已经设置`letter-spacing: 1px;`并且 Firefox 编码器选择以他们的方式实现字母间距，因此您在该 textnode 之后或之前获得 1px 的字母间距。

正如其他地方已经暗示的那样，解决方案是更改规则以`div#navigation`使其中没有行`letter-spacing: 1px`，如下所示：

```
div#navigation {
  position: relative;
  padding: 1px 0;
  border-top: 1px solid black;
  border-bottom: 1px solid black;
  font-family: Georgia, Serif;
  margin: 0 auto 2px auto;
  width: 400px;
  font-size: 0;
  text-shadow: 0 1px #fff;
} 
```

您可以在此处看到应用了修复程序的工作版本：http: [//jsfiddle.net/uZMzA/10/](http://jsfiddle.net/uZMzA/10/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T16:49:34.323

阅读这篇文章。你会在它的正文和评论上找到所有可用的技术，以及它们的权衡。

[http://css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

首先提到“删除空格”选项，因为它最容易实现。但它也“有点时髦”。

注释中列出了“基于字母间距”的选项，但请注意，如果您想让 IE < 8 满意，则必须包含额外的 css。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T16:12:22.543

只需从您的代码中删除空格，就像这个**[jsFiddle 示例](http://jsfiddle.net/j08691/uZMzA/1/)**一样。

HTML：

```
<div id="navigation">
    <a href="#">Link1</a><a href="#">Link2</a><a href="#">Link3</a><a href="#">Link4</a>
</div>​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T16:17:40.667

这很愚蠢，我无法真正解释这种情况的“原因”，但这里有两种纠正显示的方法。

FF 不喜欢代码中的空格。删除标签之间的回车`<a>`或将它们注释掉，如下所示：

```
<div id="navigation">
    <a href="#">Link1</a><!--
    --><a href="#">Link2</a><!--
    --><a href="#">Link3</a><!--
    --><a href="#">Link4</a>
</div> 
```

# ruby-on-rails - 在我的情况下是否需要使用令牌身份验证？

> ID：10386834
> 
> 赞同：0
> 
> 时间：2012-04-30T16:10:02.740
> 
> 标签：ruby-on-rails, authentication, devise, token

我正在构建一个依赖于客户端 mvc 的 Web 应用程序，它使用 rails 对服务器进行 ajax 调用以从数据库中获取数据。

我认为，由于 ajax 调用是对要求用户使用 devise 进行身份验证的控制器进行的，所以我必须使用可验证的令牌来验证 ajax 调用。

但是我注意到，如果用户以正常方式登录，而不是因为会话数据是随每个 ajax 调用存储和发送的，则不需要使用令牌身份验证......

这是一个不好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:32:10.697

我看不出有什么问题。如果用户已经登录，那么任何 ajax 请求也都已经过身份验证。但是，如果用户注销，则 ajax 请求也将未经身份验证，并且如果 ajax 调用的控制器需要身份验证，则可能会被拒绝。据我了解，身份验证令牌是让用户登录特定请求，而无需用户先登录，例如向用户发送带有投票链接的电子邮件或其他内容。而且我认为，如果用户点击该链接，浏览器将自动登录并在没有令牌的情况下为后续请求保留该事实。

# c# - 每 5 秒自动调用一次任务

> ID：10386837
> 
> 赞同：1
> 
> 时间：2012-04-30T16:10:22.573
> 
> 标签：c#, infragistics

我有一个 Infragistics 轮播控件，我想每 5 秒调用一次“下一个”。但是我不确定如何在没有一段时间的情况下做到这一点。

任何帮助都会很棒，谢谢！

目前它从点击开始，在一段时间内开始一项任务。显然这是我想要避免的。

```
 private void GoToNext(object sender, MouseButtonEventArgs e)
    {

        while (true)
        {

            Task task = new Task(() => MyCarousel.Dispatcher.BeginInvoke(new next(goToNext), null));
            task.Start();

        }

    }

private bool goToNext()
    {
        Thread.Sleep(15);
        MyCarousel.ExecuteCommand(Infragistics.Windows.Controls.XamCarouselPanelCommands.NavigateToNextItem);
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:14:07.723

计时器通常用于此目的，坐在后台并经常触发。.NET 中有一个数字（在 System.Timers 和其他地方），哪个最好取决于您的特定场景。

# php - 防止同时用户覆盖 MYSQL 数据

> ID：10386842
> 
> 赞同：1
> 
> 时间：2012-04-30T16:10:43.930
> 
> 标签：php, mysql

我有一个 php/MYSQL 网站供学生在宴会上选择餐桌座位。一旦 10 个座位被占用，该表将不再可用。如何防止两名或更多学生同时为自己和最多 3 位客人预订座位？似乎如果两个学生同时进入并尝试在同一张桌子上预订座位，则数据被覆盖或可以分配超过 10 个座位。我需要一种方法来确保第一个尝试在餐桌上预订座位的人在第二个用户能够写入他的选择之前写入数据库？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:12:55.967

做类似的事情

```
 UPDATE Seating SET AvailableSeats = AvailableSeats - 4 WHERE TableId = 5 AND AvailableSeats = 7; 
```

你`7`从之前的阅读中得到的。如果此更新失败，那么您知道其他人同时分配了座位。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-30T16:50:42.803

我会在调用代码进行预订之前立即检查可用性是否仍然存在，例如；

```
if (functionToCheckAvailability(number_of_seats)) {
    bookSeats(number_of_seats);
} 
```

# php - 当我包含此类 PHP 时，代码没有被执行

> ID：10386846
> 
> 赞同：-1
> 
> 时间：2012-04-30T16:10:57.667
> 
> 标签：php, oop

我非常小心地创建了这个类，但我不确定它有什么问题。如果我没有任何内容，代码运行完美，

```
class TemplateOne{

} 
```

但是一旦我运行这段代码，它就会中断，

```
<?php

class TemplateOne {

    //Properties
    protected $_bgColor;
    protected $_logoImagePath;
    protected $_headerText;
    protected $_leftContentHeader;
    protected $_rightContentHeader;
    protected $_leftContentBody;
    protected $_rightContentBody;
    protected $_footer;
    protected $_mediaIframe;
    protected $_mediaHeight = '';
    protected $_mediaWidth = '';

    //DB communication
    public $DB;

    //Constructor
    public function __construct(){

        //Connect database in construct and close connection in destruct

        $config = array();

        $config['host'] = 'localhost';
        $config['user'] = 'root';
        $config['pass'] = 'root';
        $config['database'] = 'fanpage_application';

        $this->DB = new DB($config);

        //init variables
        populateDataFromDataBase();
    }

    //Functions
    public function populateDataFromDataBase() {

        //Get bgcolor
        $this->DB->("SELECT backgroundimage FROM template_style_data WHERE styleid='#list_level'");
        $data = $this->DB->Get();
        foreach($data as $key => $value)
        {
            echo $value['backgroundimage'];
        }
    }

    //Getters
    public function getBgColor()
    {
        return $this->_bgColor;
    }

    public function getLogoImagePath()
    {
        return $this->_logoImagePath;
    }

    public function getHeaderText()
    {
        return $this->_headerText;
    }

    public function getLeftContentHeader()
    {
        return $this->_leftContentHeader;
    }

    public function getRightContentHeader()
    {
        return $this->_rightContentHeader;
    }

    public function getLeftContentBody()
    {
        return $this->_leftContentBody;
    }

    public function getRightContentBody()
    {
        return $this->_rightContentBody;
    }

    public function getFooter()
    {
        return $this->_footer;
    }

    public function getMediaIframe()
    {
        return $this->_mediaIframe;
    }

    //Setters

    public function setBgColor($bgColor)
    {
         $this->_bgColor = $bgColor;
    }

    public function setLogoImagePath($logoImagePath)
    {
         $this->_logoImagePath = $logoImagePath;
    }

    public function setHeaderText($headerText)
    {
         $this->_headerText = $headerText;
    }

    public function setLeftContentHeader($leftContentHeader)
    {
         $this->_leftContentHeader = $leftContentHeader;
    }

    public function setRightContentHeader($rightContentHeader)
    {
         $this->_rightContentHeader = $rightContentHeader;
    }

    public function setLeftContentBody($leftContentHeader)
    {
         $this->_leftContentBody = $leftContentHeader;
    }

    public function setRightContentBody($rightContentBody)
    {
         $this->_rightContentBody = $rightContentBody;
    }

    public function setFooter($footer)
    {
         $this->_footer = $footer;
    }

    public function setMediaIframe($mediaIframe)
    {
         $this->_mediaIframe = $mediaIframe;
    }

}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T16:13:17.347

您缺少`$this->`对 的调用`populateDataFromDataBase`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T16:14:18.887

这是您的错误：

```
$this->DB->("SELECT backgroundimage FROM template_style_data WHERE styleid='#list_level'"); 
```

这不是有效的语法，您需要在`$this->DB`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-30T16:15:21.173

DB 类从何而来？如果还没有`include`正确的类定义文件，您可能需要它。

```
$this->DB = new DB($config); 
```

以下不是合法的语法。您将需要按名称实际调用函数。

```
$this->DB->("SELECT backgroundimage FROM template_style_data WHERE styleid='#list_level'"); 
```

除非您在全局范围内有另一个名为`populateDataFromDataBase`您要调用的函数，否则您需要`$this->`在尝试在构造函数中调用它之前添加。

```
populateDataFromDataBase(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T16:18:46.237

就我而言，只有一个可能的答案：检查您的 PHP 错误[http://php.net/manual/en/function.error-reporting.php](http://php.net/manual/en/function.error-reporting.php)

至少（仅在开发中，不要在生产中显示错误）：

```
ini_set('display_errors', 1);
error_reporting(-1); 
```

# php - Web 应用程序开发 - 什么是文档最佳实践

> ID：10386847
> 
> 赞同：3
> 
> 时间：2012-04-30T16:10:59.147
> 
> 标签：php, jquery, mysql, document

我正在使用 HTML、PHP、jQuery 和 MySQL 构建一个用于学习目的的 Web 应用程序。随着我的应用程序变得越来越大并且有越来越多的交互，我开始感到困惑和混乱。因此，我想知道记录 Web 应用程序的最佳实践是什么：方法、软件等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T16:15:21.403

在所有类和方法中使用严格的 PHPDoc 块，然后使用反射动态创建文档。

# asp.net-mvc - MVC - 使用 javascript + ajax 向控制器发送数组

> ID：10386848
> 
> 赞同：0
> 
> 时间：2012-04-30T16:11:05.413
> 
> 标签：asp.net-mvc, json

我正在尝试将带有坐标的数组发送到 MVC 控制器我正在这样做（不发布所有代码，仅发布相关代码）：

```
var coords = [];
..for loop
    coords.push({ X: x, Y: y});
..end of loop 
```

然后我只是使用以下对象作为数据进行 ajax 调用

```
var data = {
    OtherData: "SomeString",
    OtherData2: 1,
    Coords: coords
}; 
```

当我在控制器上调试操作时，其他数据被正确解析我期望的模型看起来像这样

```
public class Model
{
    public int OtherData2 { get; set; }
    public string OtherData { get; set; }
    public Point[] Coords { get; set; }
} 
```

我已经尝试过 - 使用列表 - 使用 X 和 Y 作为属性创建一个类 Simple Point - 将 X 和 Y 值作为字符串值发送 - 将 X 和 Y 值连接为 1 个字符串并接收字符串列表

在将点对象作为数组的情况下，我得到一个具有相同点数的列表，但它们都是空的（0,0），而 List 对象列表只是 null 知道吗？

也许一个重要的注意事项是我正在使用 MVC4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:01:45.630

看起来 DefaultModelBinder 不知道如何绑定到列表，
（它缺少正确的类型转换器）您可以做的是创建自己的点和类型转换器：

```
[TypeConverter(typeof(PointTypeConverter))]
public class Point
{
    public int X { get; set; }
    public int Y { get; set; }
}

/// <summary>
/// we need this so we can use the DefaultModelBinder to bind to List<Point>
/// example at http://msdn.microsoft.com/en-us/library/ayybcxe5.aspx
/// </summary>
public class PointTypeConverter : TypeConverter
{
    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        return true;
    }

    public override object ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, object value)
    {
        JavaScriptSerializer serializer = new JavaScriptSerializer();
        Point ret = serializer.Deserialize<Point>((string)value);
        return ret;
    }

} 
```

控制器动作将如下所示：

```
[HttpPost]
public ActionResult testPoints(List<Point> cords)
{
    //party
} 
```

和这样的 Ajax 调用：

```
$.ajax({
url: "/Home/testPoints/",
type: "POST",
data: {
            //note that i stringify very value in the array by itself
    cords: [JSON.stringify({'X':1,'Y':2}),JSON.stringify({'X':3,'Y':4})]
},
success: function (data)
{
    //client party
}
}); 
```

在 MVC3 中测试了所有这些，没有理由在 MVC4 中不起作用希望这会有所帮助

# debugging - 使用 Azure 模拟器时停止 ASP.Net 开发服务器启动

> ID：10386851
> 
> 赞同：2
> 
> 时间：2012-04-30T16:11:12.770
> 
> 标签：debugging, azure, asp.net-web-api

我正在使用 Azure 模拟器来测试部署 ASP.NET Web API 应用程序。当我运行它时，我注意到 asp.net 开发模拟器也在运行。由于这似乎不需要，有没有办法阻止它旋转？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:01:35.957

使用 Windows Azure ASP.NET Web 角色应用程序需要了解以下几点：

1.  当您将 Web 角色设置为“启动应用程序”或仅运行 ASP.NET Web 角色应用程序时，您将看到 ASP.NET 站点运行在 http:\localhost:XX 这是因为您正在直接运行 Web 应用程序在 IIS 中与 Azure Compute Emulator 没有任何关系。

2.  当您将 Windows Azure 项目设置为“启动应用程序”或直接启动 Windows Azure 应用程序时，在这种情况下，您的 ASP.NET Web 应用程序将在 Windows Azure Compute Emulator 中运行。在这种情况下，如果未运行，Compute Emulator 将启动，如果正在运行，则 ASP.NET Web 应用程序仍将使用 IIS 运行，但是由于虚拟负载平衡器方案，您将看到 ASP.NET Web 应用程序在[http://127.0上运行.0.x:XX](http://127.0.0.x:XX)。

因此，取决于您如何在解决方案中启动项目，您将看到不同的执行。当计算模拟器运行时，您可以打开它的 UI 以了解不同实例的运行情况。

最后，根据您的上述要求，您似乎只想在 IIS 中测试您的应用程序，因此如果您只是将 ASP.NET Web 角色设置为“启动项目”，您将看不到计算模拟器活动。

# jquery - jQuery 掩码不适用于加载的内容

> ID：10386852
> 
> 赞同：1
> 
> 时间：2012-04-30T16:11:19.750
> 
> 标签：jquery, ajax, mask

当使用 ajax 加载内容时，掩码不适用于输入文本。

我应该怎么办？

感谢

代码：

```
$.ajax({url: path, data: {action:'create_form_profile'}, timeout:5000, type:"POST", success: function(data) {
    $("#_content").html(data);
    {
        $("#birth_date").mask("9999/99/99");
    }

    $("input:hidden").click(function(event) {
        window.location.href = "logout.php";
        sho‌​w_exit();
    });
}
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-11T12:41:33.280

对我来说，这是在 ajax 回调中工作的：

```
$('.phone').unmask().mask(phoneMask); 
```

我不明白为什么第二次添加相同的掩码会禁用它..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:55:20.240

通过 ajax 更改其内容后，在输入上触发一个更改事件。

如果整个输入来自 ajax，则在其上运行 mask 插件，然后触发 change 事件。

IE：

```
 $("#birth_date").mask("9999/99/99").change(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T06:55:45.943

我找到了原因；）

jquery.hotkeys-0.7.9.min.js 是原因。

我包含以下 js 文件：

```
<script type="text/javascript" src="js/jquery-1.6.4.min.js"></script>
<!--<script type="text/javascript" src="js/jquery.hotkeys-0.7.9.min.js"></script>-->
<script type="text/javascript" src="js/_links.js"></script> 
<script type="text/javascript" src="js/_mask.js"></script>  
<script type="text/javascript" src="js/_lib.js"></script>
<script type="text/javascript" src="js/_general.js"></script>
<script type="text/javascript" src="js/_jq.js"></script> 
```

当我删除第二个文件时，它是如此

# java - Freemarker 嵌套列表

> ID：10386854
> 
> 赞同：6
> 
> 时间：2012-04-30T16:11:28.060
> 
> 标签：java, freemarker

这工作正常：

```
<#list myObjects as myObject>
  <tr>
    <td>${myObject.person.surname}</td>
    <td>${myObject.myListOfCountries[0].city.name}</td>
  </tr>
</#list> 
```

但是，如果我尝试像这样创建一个嵌套列表，这不起作用：

```
<#list myObjects as myObject>
  <tr>
    <td>${myObject.person.surname}</td>
    <#list myObject.myListOfCountries as item>
       <td>${item.city.name</td>
    </#list> 
  </tr>
</#list> 
```

我收到的错误如下所示：

```
freemarker.core.ParseException: Encountered "/" 
```

任何导致错误的想法 - freemarker 中是否允许嵌套列表？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T16:16:01.090

你还没有关闭你的支架。它应该是：

```
<td>${item.city.name}</td> 
```

# python - python，django - 我可以直接在视图中调用 save 吗？我有数组，只需要保存一些键，所以自动化还是手动？

> ID：10386856
> 
> 赞同：0
> 
> 时间：2012-04-30T16:11:33.400
> 
> 标签：python, django

我是 python Django 的初学者。我有一个 json 格式的字符串，比如

```
jsondict = {"name": "value", "pwd": "pwdvalue", "email": "email@gmail.com"} 
```

我使用 json.loads(str) 将其转换为**dict**

从上面的字典中，我只想保存名称、密码和许多其他键，除了一些键。所以，我在视图中这样做：

```
u=users(name=jsondict['name'], pwd=jsondict['pwd'])
u.save() 
```

我的代码质量好吗？还是我需要以任何其他方式做到这一点以获得良好的质量。
在我的问题中，从某种意义上说是自动还是手动，我是否必须直接插入一些 dict 或 manullay 必须按照我在代码中显示的那样做？
如有需要，将提供更多信息
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:14:48.330

您在这里可以选择过滤您的 dict，然后将`**`其解压缩为关键字参数。

```
user_fields = {"name", "pwd"}
jsondict= {"name":"value","pwd":"pwdvalue","email":"email@gmail.com"}
userdict = {key: value for (key, value) in jsondict.items() if key in user_fields}
u = users(**userdict) 
```

我们使用[dict 推导](https://www.youtube.com/watch?v=t85uBptTDYY)过滤掉除我们想要的值（存储在 set 中`user_fields`）之外的所有内容。

# javascript - javascript array.length 函数的奇怪结果

> ID：10386857
> 
> 赞同：1
> 
> 时间：2012-04-30T16:11:34.940
> 
> 标签：javascript, jquery

我有一段 JavaScript 代码循环遍历表单元素并构建一个对象。我混合了 HTML 输入字段和 ASP.NET 输入字段。ASP.NET 将字段的 ID 更改为 xxxxx_yyyy_id 的形式，所以我尝试使用 split 函数来提取原始 id。

```
 // Iterate over all the text fields and build an object
 $(':text').each(function () {

     var tokens = this.id.split("_");
     if (tokens.length = 3) {
         // Assume this is a .net inputbox - extract the original id
         inFormData[tokens[2]] = this.value;
     } else {             
         inFormData[this.id] = this.value;
     }
 }); 
```

单步执行上面的代码，第一个id是ctl00_ContentPlaceHolderCol1_forenameField，所以就运行tokens.length = 3的代码。在第二次迭代中，id 是 forenameField2，所以我希望 tokens.length 为 1，但它实际上是 3。else 语句永远不会运行。

这可能很简单，但我无法解决。如果我检查令牌数组，它在第二次迭代中只有 1 个元素。我还尝试在每次迭代后将 array.length 设置为 0。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T16:13:39.890

纠正这个：

```
== instead of =. === is more better

     if (tokens.length == 3) {
         // Assume this is a .net inputbox - extract the original id
         inFormData[tokens[2]] = this.value;
     } else {             
         inFormData[this.id] = this.value;
     } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T16:14:54.523

改变你`= 3`的`=== 3`

目前，您`tokens.length`每次都在覆盖。

注意：`===`首选，`==`因为它是一个*精确的*相等检查。两个相等的版本会在比较之前尝试将两个操作数转换为相同的类型，这是 1\. 不必要的，2\. 低效的，3\. 有时容易出错。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T16:19:10.200

这就是为什么在测试时应该始终将常量放在首位的原因。如果您忘记了比较符号，则会引发错误：

```
if( 3 = tokens.length ) // throws an error
if( 3 == tokens.length ) // ok
if( 3 === tokens.length) // ok 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T16:14:21.680

从：

```
if (tokens.length = 3) { 
```

到：

```
if (tokens.length == 3) { 
```

# c# - 无法将“System.DBNull”类型的对象转换为“System.String”类型

> ID：10386860
> 
> 赞同：3
> 
> 时间：2012-04-30T16:11:57.550
> 
> 标签：c#, string, datatable, datarow

我有一个可生成字符串的数据代码，即 sb.ToString()。

```
DataTable dt = dbaccess.GetDataTable("TEST"); // get datatable
List<DataRow> drlist = dt.AsEnumerable().ToList(); // each row only has one element.
StringBuilder sb = new StringBuilder(); 
foreach (DataRow row in drlist)
{
    foreach (string str in row.ItemArray)
    {
        sb.Append(str);
    }
} 
```

数据表是

```
NULL
0
138
337
1666
1680
2511
8113 
```

你看到有“NULL”导致错误“无法将'System.DBNull'类型的对象转换为'System.String'类型。如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T16:14:21.617

尝试这个：

```
foreach (object str in row.ItemArray) 
{ 
    if (DbNull.Value.Equals(str))
       sb.Append("NULL");
    else
       sb.Append(str.ToString()); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:13:37.923

改变你的循环：

```
foreach(var obj in row.ItemArray)
{
    if(obj is string) sb.Append(obj as string);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T16:15:07.003

```
 if(!row.IsNull("column"))
            {
                foreach (string str in row.ItemArray)
                {
                    sb.Append(str);
                }                
            } 
```

# java - 如何将 jar 文件添加到类路径？

> ID：10386869
> 
> 赞同：13
> 
> 时间：2012-04-30T16:12:44.737
> 
> 标签：java, jar, classpath

我在上`Windows`，我试过`-classpath`下`javac`无济于事。还尝试将 jar 移动到 src 目录，但 java 文件仍然无法编译。尝试在脚本中简单地导入 httpclient。

```
 import org.apache.http.client.*; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T16:33:21.987

`-classpath`命令行参数（和`java`）`javac`期望您将列出*特定的 JAR 文件*（和/或包含类文件的“分解”目录）。这与`PATH`仅列出包含可执行文件的目录的 Windows/UNIX 环境变量不同。

因此，例如，如果您想编译`com.example.Foo`依赖于`lib/bar.jar`您可以使用以下咒语：

```
javac -classpath lib/bar.jar com/example/Foo.java 
```

但我的猜测是，您还会收到特定的错误消息，并且知道该错误消息将有助于进一步帮助您。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-30T16:28:18.403

1.  安装您的 JDK*并不管它*。不要*将*.jar 文件复制到 JDK 文件夹中！

2.  如果您还没有 IDE，我建议您购买 Eclipse 或 Netbeans 之类的 IDE。

3.  我会建立一个新项目，创建或导入您的源代码，并为该项目设置一个类路径。

4.  如果这不起作用，请告诉我们：

    a) 您的操作系统和版本

    b) 你的 JDK 和版本

    c) 你的 IDE

    d) 剪切/粘贴 EXACT 错误消息

    e) 剪切/粘贴相关代码

# javascript - 从新创建的窗口获取 location.hostname

> ID：10386870
> 
> 赞同：0
> 
> 时间：2012-04-30T16:12:46.100
> 
> 标签：javascript, jquery, internet-explorer

我在获取 javascript 中新创建的窗口的 location.hostname 时遇到问题。例如我有以下情况：

> var win_handler = window.open('/窗口参数/');

我想从这个新窗口中获取主机名并将其与主窗口主机名进行比较，例如：

> if (win_handler.location.hostname == window.location.hostname) { //做点什么}

这在 safari、opera、firefox、chrome 上完美运行......但是我遇到了问题，它说“权限被拒绝”？

有谁知道如何解决这个问题来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:25:46.097

听起来您违反了[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。

> 同源策略允许在来自同一站点的页面上运行的脚本无特定限制地访问彼此的方法和属性，但阻止跨不同站点的页面访问大多数方法和属性。

# java - Servlet 上的主机 IP 地址 0:0:0:0:0:0:0:1

> ID：10386875
> 
> 赞同：2
> 
> 时间：2012-04-30T16:12:58.727
> 
> 标签：java, jsp, servlets, network-programming, ip

我正在尝试使用以下方法获取用户主机、IP 和端口：

```
request.getRemoteHost()
request.getRemoteAddr()
request.getRemotePort() 
```

但我得到：

**主机：** 0:0:0:0:0:0:0:1
**IP：**地址空
**端口：** 51111

如何获取正确的 IP 地址，注意我们的网络 IP 以 10.100.xx 开头

非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T16:17:32.460

如果您`localhost`在请求 URI 中使用 ，则 IPv6 为`0:0:0:0:0:0:0:1`. 不要使用`localhost`，而是在请求 URI 中使用 IPv4 来获取*正确*的IP。

# windows-phone-7 - Caliburn 微型和列表选择器控件

> ID：10386877
> 
> 赞同：0
> 
> 时间：2012-04-30T16:13:01.820
> 
> 标签：windows-phone-7, silverlight-toolkit, caliburn.micro

我正在尝试使用 wp 7 和 caliburn micro 的列表选择器控件。我从具有约定的模型中获得了正确的绑定，但是当我按下选择器查看页面以选择某些东西时，我收到了消息

```
PID:0E2108CA TID:0F790ABE 2012-04-30 18:02:20.7180 查看模型未找到。搜索：Microsoft.Phone.Controls、Microsoft.Phone.Controls.ListPickerPageViewModel。
PID:0E2108CA TID:0F790ABE 2012-04-30 18:02:20.7210 查看模型未找到。搜索：Microsoft.Phone.Controls.IListPickerPageViewModel、Microsoft.Phone.Controls.ListPickerPageViewModel。

```

它加载了一个完整的空白页面（认为它是控制工具包中的 ListPickerPage）

它是否绑定并不重要，我想它是一些我不想要的约定。要重现开始一个新项目，连接一个视图模型和视图，在你的 xaml 中输入下面我的 xaml 看起来像这样

```
<toolkit:ListPicker Header="Background" ExpansionMode="FullscreenOnly">
  <sys:String>dark</sys:String>
  <sys:String>light</sys:String>
  <sys:String>dazzle</sys:String>
  <toolkit:ListPicker.FullModeItemTemplate>
    <DataTemplate>
      <StackPanel Orientation="Horizontal" Margin="16 21 0 20">
        <TextBlock Text="{Binding}"
          Margin="0 0 0 0"
          FontSize="43" 
          FontFamily="{StaticResource PhoneFontFamilyLight}"/>
      </StackPanel>
    </DataTemplate>
  </toolkit:ListPicker.FullModeItemTemplate>
</toolkit:ListPicker> 
```

我想要发生的事情当然是我的模型的属性应该弹出全屏选择，并且根据模型上的属性设置初始选择也会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:00:14.300

我注意到的几点：

您必须向 ListPicker 提供 ItemsSource - 可以从中显示项目的某种集合。在 TextBlock text={Binding } - 你必须绑定一些属性，以便它可以显示。

# ssis - 如何将此查询转换为可在包中使用的表达式？

> ID：10386879
> 
> 赞同：1
> 
> 时间：2012-04-30T16:13:05.647
> 
> 标签：ssis

我想将此查询转换为可在 SSIS 包中使用的表达式。

```
REPLICATE('0', 12 - LEN(CONVERT(VARCHAR,@SEQ_NUM))) + CONVERT(VARCHAR, @SEQ_NUM) 
```

预期结果：

```
Input: 1234
Output: 000000001234 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:33:12.707

您需要以下表达式。

*表达式*：

```
RIGHT(REPLICATE("0",12) + (DT_STR,10,1252)Seq_Num,12) 
```

*   使用*REPLICATE*函数生成 12 个零
*   对于复制的数据，将您的序列号输入类型附加到字符串中。*DT_STR*中的**1252**表示代码页。
**   使用*RIGHT*函数仅提取字符串右端的 12 个字符。*

 *![表达式输出](../Images/594a8becb3e9d7f663194cb9933e5c9a.png)*

# c# - 按 Column.DisplayMember 对 DataGridView 进行排序

> ID：10386882
> 
> 赞同：2
> 
> 时间：2012-04-30T16:13:25.867
> 
> 标签：c#, .net, winforms, sorting, datagridview

我有`DataGridView`几个`DataGridViewComboBoxColumn`'s ，其中实际值与一个 ID 相关联，但它`DisplayMember`是查找表中的字符串对应项。我正在努力做到这一点，所以当我按该列排序时，排序是基于`DisplayMember`，而不是`ValueMember`. 我知道这个问题已经解决了[这个问题](https://stackoverflow.com/q/2895849/371184)，但答案不够深入，我也不理解。

到目前为止我尝试过的

*   绑定到`SortCompare`事件但发现它没有在数据绑定列上触发。
*   手动对`ColumnHeaderMouseClick`事件进行排序，但 a 中的行`DataGridViewRowCollection`是只读的，我无法以编程方式在数据绑定集合上插入行（在交换时）。
*   创建一个隐藏`DataGridViewTextBoxColumn`单元格自动设置为`DisplayMember`原始列的位置，然后尝试对该列进行排序。但是，数据绑定集合不能基于无界列进行排序。

**编辑：**进一步澄清：我试图`DataGridView`根据`DisplayMember`组合框对整个进行排序，而不是对组合框本身进行排序。

如何`DataGridView`根据数据`DisplayMember`绑定对 a 进行排序`DataGridViewComboBoxColumn`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:10:01.563

您的第三次尝试几乎是正确的：您需要在 DataSet 中创建一个额外的列来存储 DisplayMember 的值。然后，创建一个不可见的绑定 DataGridViewColumn，并将其绑定到这个额外的 DataSet 列。然后它是一个绑定列，您*可以*以编程方式对其进行排序。

您链接到的问题也在做同样的事情，只是该解决方案在返回到应用程序之前在 SQL 中生成显示成员文本。

你会认为这很简单，不是吗？:)

# javascript - Img one('load', ...) 并不总是在 IE 中触发 - 我放弃了

> ID：10386884
> 
> 赞同：0
> 
> 时间：2012-04-30T16:13:33.560
> 
> 标签：javascript, jquery, html, css, internet-explorer

好吧，这没有任何意义，而且太可笑了，我就是不明白。

所以，我有一个功能来制作图片。

```
function mk_image(src, alt, title, link) {
       img = new Image();
        img.src = src;
        img.id='ShowC_Img_'+count_image;
        count_image+=1;
        img.width = 960;
        img.height = 320;
        img.alt = alt;
        img.style.display='none';
        img.setAttribute('border',"0");
        return [img,'url('+src+')',link];
    } 
```

然后我以这种方式制作 13 个元素的数组，例如：

```
var items = [/* mk_image('image_source', 'alt', 'title', 'link'), etc... */ 
```

然后我遍历数组并进行以下操作：

```
for (i=0; i<items.length;i++){
              $(items[i][0]).one('load', function(){ 
//blablabla
}).each(function(){
                if(this.complete || (jQuery.browser.msie && parseInt(jQuery.browser.version) == 6)) 
                $(this).trigger("load");})
            .error(function(){alert('shit');}); 
        } 
```

然后你猜怎么着。有时它会在 IE 中触发 8 张图片，-有时......所有这些，我只是不明白............虽然在谷歌浏览器中工作 100% 完美。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:31:39.787

好的，因为它看起来有点大，尝试使用以下来更详细地调试（一次直接设置 src 属性，一次不设置）：

```
function mk_image(src, alt, title, link) {
    img = new Image();
    img.src = src;
    img.id='ShowC_Img_'+count_image;
    count_image+=1;
    img.width = 960;
    img.height = 320;
    img.alt = alt;
    img.style.display='none';
    img.setAttribute('border',"0");
    return [img,'url('+src+')',link];
}

var items = [/* mk_image('image_source', 'alt', 'title', 'link'), etc... */

function onLoad(img) {
  console.log(img || this); // check this output (are all images displayed?)
}

for (i=0; i<items.length;i++){
  $(items[i][0]).one("load", onLoad)
  .each(function(){
    if (this.complete || this.readyState === 4 || this.readyState === "complete") {
      onLoad(this);
    }
  })
  .error(function(){alert('shit');}); 
} 
```

# android - 意图过滤器：intent.getData() 返回 null

> ID：10386885
> 
> 赞同：15
> 
> 时间：2012-04-30T16:13:35.623
> 
> 标签：android, image, android-intent, android-manifest, android-activity

我正在用 Android 编写图像编辑器。到目前为止，它只有一个活动。从这个活动中，我可以使用调用 Gallery 活动的菜单选项加载图像，并在 onActivityResult 中处理接收到的图像来绘制我的画布，以便我可以编辑它。这工作正常。

我现在想做的是让这个活动可以从其他任何地方调用，所以我不必从活动内部挑选一张图片，我可以打开画廊，挑选一张照片并将其发送到我的应用程序。但我不知道怎么做。

在我的清单上，我在`<activity>`标签中添加了以下内容：

```
<intent-filter>
   <action android:name="android.intent.action.SEND" />
   <category android:name="android.intent.category.DEFAULT" />
   <data android:mimeType="image/*" />
</intent-filter> 
```

然后，在我的活动中，如[http://developer.android.com/training/basics/intents/filters.html](http://developer.android.com/training/basics/intents/filters.html)中所述，我将以下内容放入 onCreate() 中：

```
...
//after initializing my view and stuff

Intent intent =getIntent();
Uri image = intent.getData();

//code to do something with my uri
... 
```

当我在手机中安装应用程序然后打开图库时，我可以选择一张图像并使用“发送”菜单，我的应用程序将显示在应用程序列表中，但是当我选择它时，我的应用程序会打开但忽略图像。事实证明，我从中获取的 uri`intent.getData()`是空的，我不知道为什么。

我做错什么了吗？我是不是忘记了什么？如果您必须知道，我使用随附的 CoolIris 库有现货 Android 2.3。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-30T17:08:01.290

您想要的 Uri 在捆绑包中。我试过下面的代码，可以得到图像的Uri，比如`content://media/external/images/media/1750`

```
Intent intent = getIntent();
Bundle bundle = intent.getExtras();
Uri uri = (Uri)bundle.get(Intent.EXTRA_STREAM); 
```

更多信息您可以查看[ACTION_SEND](http://developer.android.com/reference/android/content/Intent.html#ACTION_SEND)

# javascript - Javascript - 对象数组，对象包含另一个数组和一个 int

> ID：10386890
> 
> 赞同：1
> 
> 时间：2012-04-30T16:14:13.413
> 
> 标签：javascript, arrays, object

我不知道如何解决这个问题，我希望有人能提供一点意见。我找不到有关如何加载对象内的数组的任何信息。以下是我关心的功能。

```
function Frame(time){
    this.minutes = new Array();
    this.time = time;
} 
```

现在，如果我制作一个 Frames 数组，我将如何访问每个 Frame 中的分钟数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T16:16:40.043

在 JavaScript 中，您还可以将数组创建为：

```
function Frame(time){ 
    this.minutes = []; 
    this.time = time; 
} 
```

如果你有一组帧，你将不得不循环访问每一帧，抓住分钟。

```
for (int i = 0, len = frames.length; i < len; i++)
{
    var min = frames[i].minutes;
    var first = min[0]; // or whatever else is needed
} 
```

# wordpress - 强制路径 sub.domain.com/file.jpg 而不是 domain.com/sub/file.jpg

> ID：10386894
> 
> 赞同：0
> 
> 时间：2012-04-30T16:14:28.017
> 
> 标签：wordpress, phpmyadmin, subdomain

这可能吗？

我使用：WP 最新版本 (3.3.2) 和 Cpanel 按照本教程完成此操作：rsatechnologies.in/serve-image-media-files-from-cookie-less-domain.html

我刚刚设法将我的所有帖子图像移动到“无 cookie 子域”中，并在用户访问帖子时以这种格式（路径）提供它们：**img.domain.com/year/month/file.jpg** (1)

现在我所有的旧图像都有这种格式，但是每次我创建新帖子并上传图像时，显示的图像路径是这样的：**domain.com/img/year/month/file.jpg** (2)

所以我想做的是强制站点/服务器使用（1）而不是（2）。

我已经尝试了媒体设置选项卡中的所有内容，唯一可行的方法是在“在此文件夹中存储上传”和“文件的完整路径”字段中写入子域名（即“img”）。

有什么建议么？

我在想是我做错了的Cpanel设置。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:48:27.253

此处发布的说明[http://www.jafaloo.com/2011/09/11/host-your-wordpress-images-on-subdomain-for-better-page-loading/](http://www.jafaloo.com/2011/09/11/host-your-wordpress-images-on-subdomain-for-better-page-loading/)很好。我所有的图片都在[http://images.freedomwall.net/year/month/image.png](http://images.freedomwall.net/year/month/image.png)而不是 www.freedomwall.net/wp-content/uploads/year/month/image.png

# html - html - 背景图片加载缓慢

> ID：10386896
> 
> 赞同：2
> 
> 时间：2012-04-30T16:14:33.433
> 
> 标签：html, css

我有一个大小约为 300kb 的背景图像。

由于某种原因，即使几分钟后它也不会加载到我的网页上。这是我使用背景图像的代码。它与我的网页处于同一级别。

我在这里做错了吗？还是图像太大..？谢谢。

```
body {
background-color: #D2C7AC;
background-image:url('background.jpg');
background-size: cover;
background-repeat: no-repeat;
} 
```

我认为问题已经解决了。谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T16:18:16.103

图片 url 应该用引号引起来。

```
background-image:url('background.jpg'); 
```

您可以检查开发人员工具中的网络选项卡以确保也可以正确找到图像（确保它不会返回 404）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:20:31.093

您可以尝试使用 Fiddler 进行调查：

[http://fiddler2.com/fiddler2/](http://fiddler2.com/fiddler2/)

它将帮助您准确了解后台发生的情况。

# android - 有效地使用 Layout-inflator

> ID：10386897
> 
> 赞同：0
> 
> 时间：2012-04-30T16:14:36.300
> 
> 标签：android, android-layout

假设我想要一个带有 2 个复选框的自定义视图。我将开始创建这样的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" />

<CheckBox
    android:id="@+id/checkBox2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" />

</LinearLayout> 
```

然后创建一个扩展 FrameLayout 的视图，使用 layout-inflator 添加布局：

```
mInflate.inflate(R.layout.foo, this, true); 
```

我对这种方法的问题是我嵌套了 2 个布局，只是为了获得一个带有 2 个复选框的非常基本的视图。由于我目前正在处理一个非常复杂的布局，因此我正在寻找一种方法来避免在使用布局充气器时避免不必要的布局嵌套。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:44:31.247

动态创建复选框：

```
CheckBox checkBox1 = new CheckBox(this); // or getActivity() depending on code context
CheckBox checkBox2 = new CheckBox(this);
checkBox1.setText("CheckBox");
etc.
frameLayout.addView(child1);
frameLayout.addView(child2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:49:33.503

您可以[`merge`](http://android-developers.blogspot.com/2009/03/android-layout-tricks-3-optimize-by.html)在 xml 布局中使用该标签，然后对其进行膨胀：

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android">

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" />

<CheckBox
    android:id="@+id/checkBox2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" />

</merge> 
```

`FrameLayout`可能不是您布局的最佳解决方案，因为它会将视图堆叠在另一个之上。

# java - 布局因使用调度程序而受到干扰..？

> ID：10386898
> 
> 赞同：0
> 
> 时间：2012-04-30T16:14:38.353
> 
> 标签：java, struts2

我在 Struts 2 中遇到问题。

在我的网络项目中使用 jQuery 和 CSS 模板。

问题：在 struts.xml 中使用调度程序时，我的项目布局受到干扰意味着 jQuery 无法正常工作，但同时在 xml 文件中使用重定向时..它对我来说很好，但使用重定向我没有得到struts 的默认行为意味着我必须使用 url 将参数从 action 传递给 jsp。

像这样

```
<result type="redirect">index.jsp?username=$username</result> 
```

我希望默认行为和我的布局保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:20:55.913

创建一个新的 jsp 文件，将其命名为 css_js.jsp，然后将此文件包含在您的页面中，这样当您从一个页面移动到另一个页面时，您的布局保持不变。

如果您使用瓷砖，那么您可以在 mainLayout.jsp 中包含所有必需的 js 和 css 文件

# javascript - 你如何从 CKEditor 取消绑定事件？

> ID：10386903
> 
> 赞同：5
> 
> 时间：2012-04-30T16:14:48.783
> 
> 标签：javascript, ckeditor

要将某些内容绑定到 onChange 事件，可以编写类似于以下内容的内容：

```
CKEDITOR.on( 'currentInstance', function( ev )
{
       if (CKEDITOR.instances[element_id].checkDirty()) {
          unsaved_changes = true;
       }
}); 
```

但是......如何解除该功能的绑定？

上面的代码是我在创建编辑器时使用的一些实例化代码的一部分。当我使用 ajax 更改页面时出现问题，并且 CKEditor（和所有其他 javascript 变量）仍然在页面上定义。因此，onChange 事件最终会获得多个绑定......这可能会导致性能问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T17:31:00.420

CKEditor的[eventInfo](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.eventInfo.html)文档缺少您可以使用 Firebug 找到的“removeListener”方法。我现在已经添加了它，但它可能需要一天才能发布。

您只需在事件对象上调用该方法，例如：

```
CKEDITOR.on( 'currentInstance', function( ev )
{
       ev.removeListener();

       if (CKEDITOR.instances[element_id].checkDirty()) {
          unsaved_changes = true;
       }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-02T14:46:27.657

```
window.ckeditor=CKEDITOR.replace('ckeditor'); //create instance 
```

`var focus_action =function (){ console.log('focus'); }; /*callback must have own name*/`

`ckeditor.on('instanceReady',function (){ var _this=this;`

```
 this.document.on('keyup',function (){
    console.log(ckeditor.checkDirty());
   });

   this.document.on('focus',focus_action); //bind our callback

   this.document.on('blur',function (){
     console.log('blur');
     _this.document.removeListener('focus',focus_action); //remove our callback
     //_this.document.removeAllListeners(); //remove all listeners
   }); 
```

`});`

# facebook - 为什么 Graph API 不返回已标记用户的最新照片？

> ID：10386918
> 
> 赞同：4
> 
> 时间：2012-04-30T16:15:34.197
> 
> 标签：facebook, api, facebook-graph-api

大约十几个用户抱怨我的应用程序获取他们被标记的照片并没有获取最新的照片......这是一个简单的调用。

[http://graph.facebook.com/me/photos](http://graph.facebook.com/me/photos)

有什么方法可以获取最新的照片吗？某种排序方式？或者标签和通过 API 访问之间是否存在某种延迟？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:51:26.877

上周我看到 Open Graph API 发生了一些愚蠢的事情，其中​​属于记录的对象没有通过有效的 API 调用返回。这个周末我的问题自行消失了。

在最好的情况下，在一个项目被标记到它出现在所有 FB 服务器上之间会有一些延迟。向他们提供用户页面的服务器将不同于提供 Graph API 响应的服务器。根据我的经验，更新通常不到 30 分钟，但我发现它最多需要 6 个小时。

据我所知，您需要使用 FQL 调用来明确排序您返回的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T22:34:44.123

您可以使用以下 FQL 查询获取带有按时间排序的标签的照片列表：

```
SELECT subject, object_id, created FROM photo_tag WHERE subject = USER_ID 
```

其中 subject 是被标记用户的用户 id，object id 是照片对象的 id，created 是创建时间（如 Unix 时间戳），photo_tag 是[FQL 表](https://developers.facebook.com/docs/reference/fql/photo_tag/)。这将返回一个按时间排序的列表，最新的在前。

从那里，您可以使用 object_id 获取照片 url，如下所示：

```
SELECT src, src_big, src_small FROM photo WHERE object_id = OBJECT_ID 
```

这将为您提供 3 种不同尺寸的照片的网址。这使用[FQL](https://developers.facebook.com/docs/reference/fql/photo/)照片表。

# javascript - jQuery .focus() 回调不起作用

> ID：10386919
> 
> 赞同：3
> 
> 时间：2012-04-30T16:15:34.897
> 
> 标签：javascript, jquery, input, focus

我只是不明白，为什么这种 .focus 回调方式不起作用？

```
$('a.focus').click(function(){
    $('form input:first').focus(function(){
        console.log('done focus');         
    });
}); 
```

现场演示：http: [//jsfiddle.net/SHxbj/](http://jsfiddle.net/SHxbj/)

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T16:27:01.943

为什么不这样做：

```
$('a.focus').click(function() {
    $('form input:first').focus();
});
$('form input:first').focus(function() {
    console.log('focused');
});​ 
```

第一个块绑定点击链接以将光标聚焦在输入字段中，第二个块将焦点事件绑定在输入字段上并将消息发送到控制台。

**[jsFiddle 示例](http://jsfiddle.net/j08691/SHxbj/2/)**。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T16:20:04.083

```
$('form input:first').focus(function(){
    console.log('done focus');         
}); 
```

该代码块将事件绑定到第一个表单输入，而不是在单击链接时执行焦点回调。您的代码按预期工作，而不是您可能想的那样。尝试单击链接，然后单击第一个输入。

你可能想要这个：

```
$('form input:first').focus();
console.log('done focus'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T16:22:20.853

您的代码将回调绑定到`focus`事件，但实际上并不关注元素。您可以将其保留为回调并手动聚焦元素，或者您可以在聚焦后简单地触发它：

已编辑；感谢@GNi33 指出重复绑定！

```
var $input = $('form input:first');
$input.focus(function(){
    console.log('done focus');         
});

$('a.focus').click(function(){
    $input.focus();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T16:31:18.383

```
$('a.focus').click(function(){
    $('form input:first').focus(function(){
        console.log('done focus');         
    }).focus();
});  
​ 
```

[小提琴](http://jsfiddle.net/adeneo/SHxbj/3/)

# java - java - 一个接一个地执行每个 SwingWorker 类

> ID：10386920
> 
> 赞同：5
> 
> 时间：2012-04-30T16:15:35.083
> 
> 标签：java, multithreading, swing, swingworker

我有多个扩展 SwingWorker 的类。我希望完成的是一个接一个地执行每个类（不执行前一个类的done方法中的下一个类）。例如，假设我有：

```
ClassSwingW1 csw1 = new ClassSwingW1();
csw1.execute;

ClassSwingW2 csw2 = new ClassSwingW2();
csw2.execute;

ClassSwingW3 csw3 = new ClassSwingW3();
csw3.execute; 
```

等等。

```
public class ClassSwingW1 extends SwingWorker<Void, Void> {

    @Override
    protected Void doInBackground() throws Exception {
        //do something

        return null;
    }

}

public class ClassSwingW2 extends SwingWorker<Void, Void> {

    @Override
    protected Void doInBackground() throws Exception {
        //do something

        return null;
    }

}

public class ClassSwingW3 extends SwingWorker<Void, Void> {

    @Override
    protected Void doInBackground() throws Exception {
        //do something

        return null;
    }

} 
```

我希望 csw2 在 csw1 完成后执行，而 csw3 在 csw2 完成后执行。我不希望它们同时执行。我将如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T09:40:35.693

如何使用[Executors.newSingleThreadExecutor()](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newSingleThreadExecutor%28%29)

```
import java.awt.*;
import java.awt.event.*;
import java.beans.*;
import java.util.*;
import java.util.concurrent.*;
import javax.swing.*;

public class SingleThreadExecutorTest {
  private Executor executor;
  private final Box box = Box.createVerticalBox();
  public JComponent makeUI() {
    executor = Executors.newSingleThreadExecutor(); //.newCachedThreadPool();
    box.setBorder(BorderFactory.createEmptyBorder(8,8,8,8));
    JPanel p = new JPanel(new BorderLayout());
    p.add(new JButton(new AbstractAction("add") {
      @Override public void actionPerformed(ActionEvent evt) {
        doSomethingUseful();
      }
    }), BorderLayout.SOUTH);
    p.add(new JScrollPane(box));
    return p;
  }
  private void doSomethingUseful() {
    JProgressBar bar = new JProgressBar(0, 100);
    box.add(bar); box.add(Box.createVerticalStrut(8));
    box.revalidate();
    SwingWorker<Integer, Void> worker = new SwingWorker<Integer, Void>() {
      private int sleepDummy = new Random().nextInt(50) + 1;
      private int lengthOfTask = 120;
      @Override protected Integer doInBackground() {
        int current = 0;
        while(current<lengthOfTask && !isCancelled()) {
          current++;
          try {
            Thread.sleep(sleepDummy);
          } catch(InterruptedException ie) {
            break;
          }
          setProgress(100 * current / lengthOfTask);
        }
        return sleepDummy*lengthOfTask;
      }
      @Override protected void done() {
        try {
          System.out.println(get()+"ms");
        } catch(Exception ignore) {
          ignore.printStackTrace();
        }
      }
    };
    worker.addPropertyChangeListener(new ProgressListener(bar));
    executor.execute(worker);
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() {
        createAndShowGUI();
      }
    });
  }
  public static void createAndShowGUI() {
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.getContentPane().add(new SingleThreadExecutorTest().makeUI());
    f.setSize(320, 240);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
}
class ProgressListener implements PropertyChangeListener {
  private final JProgressBar progressBar;
  ProgressListener(JProgressBar progressBar) {
    this.progressBar = progressBar;
    this.progressBar.setValue(0);
  }
  @Override public void propertyChange(PropertyChangeEvent evt) {
    String strPropertyName = evt.getPropertyName();
    if("progress".equals(strPropertyName)) {
      progressBar.setIndeterminate(false);
      int progress = (Integer)evt.getNewValue();
      progressBar.setValue(progress);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T16:18:10.200

您可以使用该[`get()`方法](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html#get%28%29)代替`execute()`- 它会阻塞，直到 SwingWorker 完成其工作。只要确保你没有从 EDT 调用它。

Javadoc 提取：

> 如有必要，等待计算完成，然后检索其结果。注意：在 Event Dispatch Thread 上调用 get 会阻止处理所有事件，包括重绘，直到此 SwingWorker 完成。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-30T17:53:46.197

*   建议我通过侦听 PropertyChangeListener来查看`Executor`调用实例`SwingWorker`

*   请[仔细阅读这个帖子](https://stackoverflow.com/questions/7053865/cant-get-arrayindexoutofboundsexception-from-future-and-swingworker-if-threa)，尤其是答案`@trashgod`

`Executor`&&& `SwingWorker`_ `PropertyChangeListener`_`Swing GUI`

![在此处输入图像描述](../Images/cf1c37822988669cd5d9d00351dda66a.png)

![在此处输入图像描述](../Images/cc5714f5cb78a634632e1788ad3d37f2.png)

![在此处输入图像描述](../Images/c6778318302f7a9b69d65847568bc599.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.util.List;
import java.util.Random;
import java.util.concurrent.Executor;
import java.util.concurrent.Executors;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.SwingWorker;
import javax.swing.Timer;
import javax.swing.border.EmptyBorder;

public class ExecutorAndSwingWorker2 {

    private JFrame frame = new JFrame();
    private JButton button1;
    private JButton button2;
    private JButton button3;
    private JButton button4;
    private JPanel buttonPanel = new JPanel();
    private Executor executor = Executors.newCachedThreadPool();
    private javax.swing.Timer timer1;
    private javax.swing.Timer timer2;
    private javax.swing.Timer timer3;
    private javax.swing.Timer timer4;
    private Random random = new Random();

    public ExecutorAndSwingWorker2() {
        button1 = new JButton("  Executor + SwingWorker Thread No.1  ");
        button1.setFocusable(false);
        button2 = new JButton("  Executor + SwingWorker Thread No.2  ");
        button3 = new JButton("  Executor + SwingWorker Thread No.3  ");
        button4 = new JButton("  Executor + SwingWorker Thread No.4  ");
        buttonPanel = new JPanel();
        buttonPanel.setBorder(new EmptyBorder(15, 15, 15, 15));
        buttonPanel.setLayout(new GridLayout(2, 2, 20, 20));
        buttonPanel.add(button1);
        buttonPanel.add(button2);
        buttonPanel.add(button3);
        buttonPanel.add(button4);
        frame.setTitle("Shaking Button Demo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new BorderLayout());
        frame.add(buttonPanel);
        frame.setPreferredSize(new Dimension(700, 170));
        frame.setLocation(150, 100);
        frame.pack();
        frame.setVisible(true);
        executor.execute(new ExecutorAndSwingWorker2.MyTask("startButton1")); // non on EDT
    }

    private void startButton1() {
        System.out.println("Starting long Thread == startButton1()");
        try {
            Thread.sleep(15000);
        } catch (InterruptedException ex) {
        }
    }

    private void startButton2() {
        System.out.println("Starting long Thread == startButton2()");
        try {
            Thread.sleep(17500);
        } catch (InterruptedException ex) {
        }
    }

    private void startButton3() {
        System.out.println("Starting long Thread == startButton3()");
        try {
            Thread.sleep(12500);
        } catch (InterruptedException ex) {
        }
    }

    private void startButton4() {
        System.out.println("Starting long Thread == startButton4()");
        try {
            Thread.sleep(20000);
        } catch (InterruptedException ex) {
        }
    }

    private void colorAction1() {
        timer1 = new Timer(1000, new AbstractAction() {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                random = new Random();
                SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        button1.setBackground(new Color(127 + random.nextInt(128), 127 + random.nextInt(128), 127 + random.nextInt(128)));
                        button1.validate();
                        button1.repaint();
                    }
                });
            }
        });
        timer1.setDelay(500);
        timer1.setRepeats(true);
        timer1.start();
    }

    private void colorAction2() {
        timer2 = new Timer(1200, new AbstractAction() {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                random = new Random();
                SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        button2.setBackground(new Color(127 + random.nextInt(128), 127 + random.nextInt(128), 127 + random.nextInt(128)));
                        button2.validate();
                        button2.repaint();
                    }
                });
            }
        });
        timer2.setDelay(500);
        timer2.setRepeats(true);
        timer2.start();
    }

    private void colorAction3() {
        timer3 = new Timer(1400, new AbstractAction() {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                random = new Random();
                SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        button3.setBackground(new Color(127 + random.nextInt(128), 127 + random.nextInt(128), 127 + random.nextInt(128)));
                        button3.validate();
                        button3.repaint();
                    }
                });
            }
        });
        timer3.setDelay(500);
        timer3.setRepeats(true);
        timer3.start();
    }

    private void colorAction4() {
        timer4 = new Timer(1600, new AbstractAction() {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                random = new Random();
                SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        button4.setBackground(new Color(127 + random.nextInt(128), 127 + random.nextInt(128), 127 + random.nextInt(128)));
                        button4.validate();
                        button4.repaint();
                    }
                });
            }
        });
        timer4.setDelay(500);
        timer4.setRepeats(true);
        timer4.start();
    }

    private void endButton1() {
        timer1.stop();
        button1.setBackground(null);
        System.out.println("Long Thread Ends == startButton1()");
        executor.execute(new ExecutorAndSwingWorker2.MyTask("startButton3")); // non on EDT
    }

    private void endButton2() {
        timer2.stop();
        button2.setBackground(null);
        System.out.println("Long Thread Ends == startButton2()");
    }

    private void endButton3() {
        timer3.stop();
        button3.setBackground(null);
        System.out.println("Long Thread Ends == startButton3()");
        executor.execute(new ExecutorAndSwingWorker2.MyTask("startButton2")); // non on EDT
        executor.execute(new ExecutorAndSwingWorker2.MyTask("startButton4")); // non on EDT
    }

    private void endButton4() {
        timer4.stop();
        button4.setBackground(null);
        System.out.println("Long Thread Ends == startButton4()");
        executor.execute(new ExecutorAndSwingWorker2.MyTask("startButton1")); // non on EDT
    }

    private class MyTask extends SwingWorker<Void, Integer> {

        private String str;
        private String namePr;
        private JDialog dialog = new JDialog();

        MyTask(String str) {
            this.str = str;
            addPropertyChangeListener(new SwingWorkerCompletionWaiter(dialog, str, namePr));
        }

        @Override
        protected Void doInBackground() throws Exception {
            if (str.equals("startButton1")) {
                colorAction1();
                startButton1();
            } else if (str.equals("startButton2")) {
                colorAction2();
                startButton2();
            } else if (str.equals("startButton3")) {
                colorAction3();
                startButton3();
            } else if (str.equals("startButton4")) {
                colorAction4();
                startButton4();
            }
            return null;
        }

        @Override
        protected void process(List<Integer> progress) {
            System.out.println(str + " " + progress.get(progress.size() - 1));
        }

        @Override
        protected void done() {
            if (str.equals("startButton1")) {
                endButton1();
            } else if (str.equals("startButton2")) {
                endButton2();
            } else if (str.equals("startButton3")) {
                endButton3();
            } else if (str.equals("startButton4")) {
                endButton4();
            }
        }
    }

    private class SwingWorkerCompletionWaiter implements PropertyChangeListener {

        private JDialog dialog;
        private String str;
        private String namePr;

        SwingWorkerCompletionWaiter(JDialog dialog, String str, String namePr) {
            this.dialog = dialog;
            this.str = str;
            this.namePr = namePr;
        }

        @Override
        public void propertyChange(PropertyChangeEvent event) {
            if ("state".equals(event.getPropertyName()) && SwingWorker.StateValue.DONE == event.getNewValue()) {
                System.out.println("Thread Status with Name :" + str + ", SwingWorker Status is " + event.getNewValue());
            } else if ("state".equals(event.getPropertyName()) && SwingWorker.StateValue.PENDING == event.getNewValue()) {
                System.out.println("Thread Status with Mame :" + str + ", SwingWorker Status is " + event.getNewValue());
            } else if ("state".equals(event.getPropertyName()) && SwingWorker.StateValue.STARTED == event.getNewValue()) {
                System.out.println("Thread Status with Name :" + str + ", SwingWorker Status is " + event.getNewValue());
            } else {
                System.out.println("Thread Status with Name :" + str + ", Something wrong happends ");
            }
        }
    }

    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                ExecutorAndSwingWorker2 executorAndSwingWorker = new ExecutorAndSwingWorker2();
            }
        });
    }
} 
```

来自 PropertyChangeListener 的输出

```
Starting long Thread == startButton1()
Thread Status with Name :startButton1, SwingWorker Status is STARTED
Long Thread Ends == startButton1()
Thread Status with Name :startButton1, SwingWorker Status is DONE
Starting long Thread == startButton3()
Thread Status with Name :startButton3, SwingWorker Status is STARTED
Long Thread Ends == startButton3()
Thread Status with Name :startButton3, SwingWorker Status is DONE
Starting long Thread == startButton2()
Starting long Thread == startButton4()
Thread Status with Name :startButton2, SwingWorker Status is STARTED
Thread Status with Name :startButton4, SwingWorker Status is STARTED
Long Thread Ends == startButton2()
Thread Status with Name :startButton2, SwingWorker Status is DONE
Long Thread Ends == startButton4()
Thread Status with Name :startButton4, SwingWorker Status is DONE
Starting long Thread == startButton1()
Thread Status with Name :startButton1, SwingWorker Status is STARTED
Long Thread Ends == startButton1()
Thread Status with Name :startButton1, SwingWorker Status is DONE
Starting long Thread == startButton3()
Thread Status with Name :startButton3, SwingWorker Status is STARTED
Long Thread Ends == startButton3()
Starting long Thread == startButton2()
Thread Status with Name :startButton3, SwingWorker Status is DONE
Starting long Thread == startButton4()
Thread Status with Name :startButton2, SwingWorker Status is STARTED
Thread Status with Name :startButton4, SwingWorker Status is STARTED
Long Thread Ends == startButton2()
Thread Status with Name :startButton2, SwingWorker Status is DONE
BUILD SUCCESSFUL (total time: 1 minute 34 seconds) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-01T00:23:41.433

[*内存一致性属性*](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html#MemoryVisibility)对 JLS 进行了总结：“线程中的每个动作都*发生在该线程中的每个动作之前*，这些动作按程序的顺序出现在后面。” 只需将每个工作人员重新`doInBackground()`分解为一个单独的方法，然后依次调用每个工作人员：

```
@Override
protected Void doInBackground() throws Exception {
    doCsw1();
    doCsw2();
    doCsw3();
    return null;
} 
```

# macos - 在 OSX 上的 gdb 中转储核心（没有“gcore”或“generate-core-file”）

> ID：10386921
> 
> 赞同：10
> 
> 时间：2012-04-30T16:15:39.857
> 
> 标签：macos, gdb, coredump

我在 OSX 上使用 gdb，它似乎既没有`gcore`也没有`generate-core-file`命令：

```
$ gdb
GNU gdb 6.3.50-20050815 (Apple version gdb-1705) (Fri Jul  1 10:50:06 UTC 2011)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin".
(gdb) gcore
Undefined command: "gcore".  Try "help".
(gdb) generate-core-file
Undefined command: "generate-core-file".  Try "help".
(gdb) 
```

鉴于此，我该如何通过 GDB 生成核心转储或类似的转储？

（我怀疑我可以使用`dump memory`，但这需要一个地址范围，我正在努力寻找正确的`info`调用来获得正确的内存范围......）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-11-20T20:16:21.490

运行`lldb --attach-pid`，然后使用`process save-core`命令保存内核。请注意，该过程将在您附加到它时立即暂停，因此如果它是一个重要过程，请小心。

```
$ lldb --attach-pid <pid>
(lldb) process attach --pid 76669
Process 76669 stopped
Executable module set to "/bin/bash".
Architecture set to: x86_64h-apple-macosx.
(lldb) process save-core "core"
mach_header: 0xfeedfacf 0x01000007 0x00000008 0x00000004 0x00000030 0x00000e08 0x00000000 0x00000000
...
Saving data for segment at 0x7fd455200000
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T14:12:46.077

请参阅[如何在 XCode + gdb 中为崩溃的应用程序生成核心文件？](https://stackoverflow.com/questions/8081896/how-to-generate-a-core-file-for-a-crashed-app-in-xcode-gdb)

此外，也许较新的 gdb 具有可在 MacOS 上运行的 gcore。我不知道，但你可以四处寻找并找出答案。

# objective-c - 在 NSString 中搜索确切的单词

> ID：10386922
> 
> 赞同：4
> 
> 时间：2012-04-30T16:15:44.147
> 
> 标签：objective-c, xcode, nsstring, nsrange

我需要找到一个词或几个词。然而，用这种方法，我也发现了一句话。

```
NSString *searchString = [NSString stringWithFormat:@"%@",searchField.text];
NSRange range = [textString rangeOfString : searchString];

    if (range.location != NSNotFound) {

        NSLog(@"textString = %@", textString);

    } 
```

我需要准确的词/词

我能怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:44:08.870

在 NSString 中有多种解析/查找子字符串的方法：

*   NSString 本身
*   NS 正则表达式。这可能更适合您的需求，因为您可以解决单词周围空格的情况。因此在搜索时不会返回`cat`from 。`catapult``cat`
*   NSScanner *（很可能为您的需要矫枉过正）*

...当然，他们每个人都有自己的优点和缺点。

[NSString](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/TP40003744)在“查找字符和子字符串”下有 9 个方法。方法如：

> **-rangeOfString：**
> 查找并返回给定字符串在接收器中第一次出现的范围。

[NSRegularExpression](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009708)在“使用正则表达式搜索字符串”下有 5 个方法。方法如：

> **-numberOfMatchesInString: options: range:**
> 返回字符串指定范围内正则表达式的匹配数。

了解[NSScanner](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003726)可能也很有用，但是如果您解析字符串而不是简单地查找子部分，则此类会更有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T19:19:29.480

如果您在搜索字符串的末尾添加一个空格会发生什么情况，如下所示：

```
NSString *searchString = [NSString stringWithFormat:@"%@ ",searchField.text]; 
```

如果来自的字符串`searchField.text`已经以空格结尾，则必须将其删除。

这还不是一个完美的解决方案，例如，如果它位于句子的末尾，您将找不到搜索字符串。相反，您可以做的不是添加空格字符，而是查看命中后的字符并确保它不是字母。为此，请查看课程`NSCharacterSet`：

```
NSCharacterSet * letters = [NSCharacterSet letterCharacterSet];
if (![letters characterIsMember:[textString characterAtIndex:(range.location+searchString.length)]]) {
... 
} 
```

# ruby-on-rails - 使用rails资产管道时如何内联css

> ID：10386923
> 
> 赞同：26
> 
> 时间：2012-04-30T16:15:49.137
> 
> 标签：ruby-on-rails, asset-pipeline

我不想让页面包含一个样式标签，其中包含一个从中获取 css 的链接，我可以使用 rails 的`stylesheet_link_tag`辅助方法将其添加到我的视图中，我希望将 css 直接内联在页面内。

到目前为止，这是我想出的：

```
%style(type="text/css")=File.read(physical_asset_path("email.css")) 
```

但是我找不到任何可以为我提供资产物理路径的 rails 辅助方法 -`physical_asset_path`只是我发明的一种虚拟方法。

有人知道在使用 rails 3.2.x 时如何获取资产的物理路径吗？

是否有更简单/更好的方式来获取样式表 - 从公共轨道资产路径中的 css 文件 - 内联？

用例：大多数电子邮件客户端在没有用户确认的情况下不会访问外部资源（如 css、图像）。因此，要正确显示电子邮件，我需要将 CSS 嵌入电子邮件的 HTML 中。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-08-01T20:37:37.927

`Rails.application.assets.find_asset('email').to_s`将编译后的资产作为字符串返回。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-30T16:18:15.727

使用 premailer 或 premailer-rails3

[https://github.com/fphilipe/premailer-rails3](https://github.com/fphilipe/premailer-rails3) 或 [https://github.com/alexdunae/premailer](https://github.com/alexdunae/premailer)

乔的书呆子派对 说：

> 我们还使用 Premailer gem 在电子邮件视图中自动内联链接的样式表。我们的电子邮件布局类似于：

```
%html
  %head
    = stylesheet_link_tag 'email'

    %style{:type => "text/css"}
      :sass
        @media all and (max-width: 480px)
          table#container
            width: auto !important
            max-width: 600px !important
         ... and so on for the mobile code

    %body 
      Email body here.
      %table
        Lots of tables. 
```

> 我们在 HTML 中包含一个样式表。Premailer 下载、处理并在 HTML 中内联插入 css 规则。
> 
> @media 规则需要内联在电子邮件布局中，因为 Premailer 还不能处理那些在单独的 css 文件中的规则。
> 
> 我们使用 premailer-rails3 将 Premailer 集成到 Rails 3 中。不幸的是，我们在 premailer 和 premailer-rails3 中发现了一堆错误。我们的项目分支位于 [https://github.com/joevandyk/premailer](https://github.com/joevandyk/premailer)和 [https://github.com/joevandyk/premailer-rails3](https://github.com/joevandyk/premailer-rails3)。分叉修复了一些编码错误，删除了一些由 premailer-rails3 完成的奇怪的 css 处理内容，允许 premailer 不去除电子邮件布局中的嵌入规则，以及其他一些事情。
> 
> 我们还在 sass-rails 中发现了一个错误，您无法将 image-urls 嵌入到内联的 sass 代码中。请参阅[https://github.com/rails/sass-rails/issues/71](https://github.com/rails/sass-rails/issues/71) Premailer-rails3 在电子邮件实际交付时挂钩到 ActionMailer，而不仅仅是生成。运行测试时，实际上并没有发送电子邮件，因此 premailer-rails3 挂钩不会在测试期间运行。我没有花时间查看是否有可能在测试期间运行预邮件处理，但这将是一件好事。
> 
> 此外，我们在 premailer-rails3 上的分支假设您希望 premailer 出去并实际下载链接的 CSS 文件。应该可以使用 Rails 3.1 资产管道来获取处理后的 css 而无需下载它。非常特别感谢 Jordan Isip，他做了非常烦人的工作，确保电子邮件在所有不同的客户中看起来都很棒。编写 CSS/HTML 看起来并不有趣。

**更新：**

[Roadie](https://github.com/Mange/roadie)似乎是一个更好的选择。感谢赛斯兄弟指出。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-02-08T21:51:34.470

*（对不起，这个答案在`html`，不是……但这对粉丝`HAML`来说应该不是问题）`HAML`*

我在寻找一种内联`Sass`编译`css`为`html`创建 html 电子邮件模板的方法时发现了这个问题。

结合上述建议，我在页面中使用了以下`head`代码`html`：

```
<style type="text/css">
  <%= Rails.application.assets['path/to/sass/file'].to_s.html_safe %>
</style> 
```

此代码编译`Sass`为`CSS`，然后将 css 插入到`<style>`标签中。`html_safe`确保 css 中使用的任何引号 ( and `'`)`"`或尖括号 ( `>`and `<`) 不会被转义。

与创建样式表链接标记时使用的`path/to/sass/file`相同：

```
<%= stylesheet_link_tag 'path/to/sass/file', :media => 'all' %> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-09-28T07:06:38.260

`Rails.application.assets['asset.js']`将仅在本地环境中工作，因为在生产环境和暂存环境中都禁用了 rails 资产编译。

`Rails.application.assets_manifest.find_sources('asset.js').first.to_s.html_safe`在使用 rails 资产管道时应该使用内联 css。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-07-24T22:02:12.197

无法对 Seth Bro 的回答添加评论。你最好使用`#[]`而不是`#find_asset`: `Rails.application.assets["email"].to_s`。

重新“资产不会被压缩”。这不是真的。如果您启用了压缩器（在 rails 配置中），它将被压缩：

```
Rails.application.configure do
  # ...
  config.assets.css_compressor = :sass
  config.assets.js_compressor  = :uglify
end 
```

请注意，默认情况下，这在生产环境中启用 ( `config/environments/production.rb`)。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-08-28T14:24:41.650

有同样的问题，使用[@phlegx 对](https://github.com/fphilipe/premailer-rails/issues/145#issuecomment-225992564)Premailer 中类似问题的回答解决了它。

对于环境安全的解决方案，您需要使用

```
(Rails.application.assets || ::Sprockets::Railtie.build_environment(Rails.application)).find_asset('email.css').to_s 
```

我已将它打包到我的应用程序中的帮助程序中：

```
# app/helpers/application_helper.rb
# Returns the contents of the compiled asset (CSS, JS, etc) or an empty string
def asset_body(name)
   (Rails.application.assets || ::Sprockets::Railtie.build_environment(Rails.application)).find_asset(name).to_s
end 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-11-16T10:06:56.530

我试图内联css以用于带有rails的google amp兼容页面。[我从vyachkonovalov](https://gist.github.com/vyachkonovalov/cad29a69aebb41c08f70fce504fe8ef2)那里找到了以下帮手，这是我在生产和本地工作的唯一方法。

将以下内容添加到`erb`模板中：

```
<style amp-custom>
  <%= asset_to_string('application.css').html_safe %>
</style> 
```

和帮手`ApplicationHelper`。它在本地和生产中都能完美运行。

```
module ApplicationHelper
  def asset_to_string(name)
    app = Rails.application
    if Rails.configuration.assets.compile
      app.assets.find_asset(name).to_s
    else
      controller.view_context.render(file: File.join('public/assets', app.assets_manifest.assets[name]))
    end
  end 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-12-24T22:38:30.580

tl;博士（没有 Roadie）：

```
%style(type="text/css")
  = render template: '../assets/stylesheets/email_responsive.css' 
```

* * *

对于实际将 CSS 应用为内联样式，我推荐[roadie-rails](https://github.com/Mange/roadie-rails/)（它是[Roadie](https://github.com/Mange/roadie)的 Rails 包装器）。它还具有其他简洁的功能，例如绝对化`href`s、`src`s 等。

结合了内联 ( `email.scss`) 和非内联 ( `email_responsive.css`) 样式表的用法，两者都位于`app/assets/stylesheets`：

```
-# This will be inlined and applied to HTML elements.
-# Note that you need to include this in your asset config, e.g.:
-# Rails.application.config.assets.precompile += %w(... email.css)
-# (You need to list it as `email.css` even if it's actually `email.scss`.)

= stylesheet_link_tag 'email'

-# E.g. for media queries which can't be inlined - yeah, some iOS devices support them.
-# This will not be inlined and will be included as is (thanks to `data-roadie-ignore`).
-# `template:` marks it as a full template rather than a partial and disables `_` prefix.
-# We need to add the extension (`.css`) since it's non-standard for a view.

%style(type="text/css" data-roadie-ignore)
  = render template: '../assets/stylesheets/email_responsive.css' 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-17T13:39:58.693

你可以使用这个：

```
Rails.root.join('public', ActionController::Base.helpers.asset_path("email.css")[1..-1]).read.html_safe 
```

# twitter - Twitter OAuth 动态回调 URL

> ID：10386926
> 
> 赞同：2
> 
> 时间：2012-04-30T16:16:02.183
> 
> 标签：twitter, oauth, callback

如何使回调 url 动态化？同一个域使用不同的主机名。我使用亚伯拉罕 twitteroauth [https://github.com/abraham/twitteroauth](https://github.com/abraham/twitteroauth)。

在`getRequestToken($callbackUrl)`函数上我可以设置一个回调 url，但这没关系。

溴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T03:28:57.347

您不能使“回调”网址动态化。但是“izeed”想出了一个相当不错的解决方案：[https ://stackoverflow.com/a/10573287/1580615](https://stackoverflow.com/a/10573287/1580615)

# html - 没有浏览器警告的虚拟 img src

> ID：10386929
> 
> 赞同：1
> 
> 时间：2012-04-30T16:16:18.547
> 
> 标签：html, css, image, src

我为我的网站构建了一个灯箱。出于这个问题的目的，它由一个 img 元素组成，默认情况下使用 CSS 隐藏。

当单击我网站上的缩略图时，img 元素的 src 将使用具有适当路径的 javascript 覆盖，然后使 img 可见。

我的问题是我在第一次加载页面时将 img src 设置为什么？如果我将 src 留空，我会收到浏览器警告。我不希望加载实际图像，因为这会使用带宽。我不希望加载 1px 的小透明图像，因为这感觉像是一个肮脏的 hack。

我还有其他选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T16:17:44.230

使用 JavaScript 创建 img 元素。

如果某些标记（除了偶尔的占位符 div 或 span）在某些 JS 运行之前没有为用户添加任何内容，那么首先不要将它放在标记中。在需要时使用 DOM 操作添加它。

# iframe - iFrame 内的颜色框 - 从父级关闭

> ID：10386930
> 
> 赞同：1
> 
> 时间：2012-04-30T16:16:25.553
> 
> 标签：iframe, colorbox

我正在做一个项目，我只是将相同的目录内容加载到 iFrame 中。没有外部页面。

我在 iFrame 内容中有 Colorbox，效果很好。

我的问题是：我有一些“父”按钮，我想让它们关闭任何 iFrame Colorbox 弹出窗口。该项目是一个“信息点”系统，在父级中始终显示一些按钮，但是每当我单击按钮时，iFrame Colorbox 都会保持打开状态。

我发现的很多页面都是从相反的方式讨论的，从 Colorbox iFrame 中控制父级......

我猜从安全的角度来看，这可能无法实现......

非常感谢大家:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:35:33.627

您可能可以执行以下操作：

```
$('.cboxIframe')[0].contentWindow().$.colorbox.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:42:00.640

我最终以相反的方式使用 jQuery，因此子控件控制父控件并隐藏父控件，当 ColorBox 控件关闭时，它“显示”父控件。

# jquery - ASP.NET 页面方法 - 如何在页面方法中获取 url 参数值？

> ID：10386933
> 
> 赞同：0
> 
> 时间：2012-04-30T16:16:36.177
> 
> 标签：jquery

> **可能重复：**
> [在 JavaScript 中获取查询字符串值](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

我有一个日历网页。当用户打开事件时，它会打开带有如下 URL 的页面：“ [http://localhost/Event.aspx?eventid=4](http://localhost/Event.aspx?eventid=4)" 然后我使用 jQuery 调用页面方法来显示一些额外的数据。我通过 $.ajax 函数发送的数据参数还包括“eventID”（显示正确事件的数据）。如果用户手动（假设通过firebug控制台）使用伪造的“eventID”执行对页面方法的jQuery调用，他会得到错误的数据。我想防止这种情况，......以一种不发送带有jQuery数据参数的eventid的方式，但以某种方式在服务器上获取eventid -side codebehind。问题是，我不能使用会话（因为用户可以打开多个事件，每个事件都有自己的 eventID）而且我也不能使用 cookie，因为它们也可能被黑客入侵。所以我试图直接在页面方法中获取正确的 eventid，使用

```
HttpContext.Current.Request.QueryString 
```

但没有运气。在 Page_Load 我得到我的 eventid：

```
EventID = Page.Request.QueryString("eventid") 
```

但我找不到将这个 eventid 值放入我的页面方法的方法。

因此，我正在寻求有关如何从 url 或 Page_Load 上定义的公共变量中获取页面方法参数值的建议。

谢谢。

编辑：目前我正在使用 POST 发送参数，例如：

```
var myEventId = $("#hiddenField").val();

$.ajax({
url: "Event.aspx/getEventData",
type: "POST",
data: "{'eventid':myEventId}"
...
}); 
```

但我想避免使用 POST 发送 eventid 参数，以防止黑客攻击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:11:24.763

这里的根本问题似乎自相矛盾。

您是说您需要从用户那里获取 eventId，但您实际上并不想从用户那里获取任何东西，因为他们可以破解/更改它。

底线是你不应该相信来自用户的任何输入。如果用户有权读取事件“foo”，但不能读取事件“bar”，那么您需要在服务器端验证这一点。

您实际上无法阻止他们向您发送“bar”，但您可以在他们发送“bar”后拒绝他们查看“bar”。

至于您的代码有什么问题， data 参数需要是 JSON 本身，而不是 JSON 字符串（删除引号）：

```
$.ajax({
url: "Event.aspx/getEventData",
type: "POST",
data: { eventid : myEventId}
...
}); 
```

# objective-c - 在 Objective C 中显示自游戏开始以来经过的时间

> ID：10386938
> 
> 赞同：1
> 
> 时间：2012-04-30T16:16:51.263
> 
> 标签：objective-c

我的目标是显示自游戏开始以来经过的时间（这应该不断更新）。

我知道如何找到从游戏开始到结束所经过的时间。但我不知道如何用秒表在屏幕上不断更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:29:18.070

启动计时器

self.updateTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self 选择器:@selector(*无论你调用了更新显示以显示当前时间的方法*) userInfo:nil repeats:YES];

将每秒更新您的显示

# java - 如何使用 Netbeans 7.1 配置 glassfish 3.1 安全文件领域？

> ID：10386942
> 
> 赞同：7
> 
> 时间：2012-04-30T16:17:12.667
> 
> 标签：java, security, jakarta-ee, netbeans, glassfish

我正在尝试按照本[教程](http://www.jairrillo.com/blog/2009/08/16/jee-security-how-to-setup-authentication-on-glassfish-and-netbeans/)在 glassfish 3.1 中配置一个简单的文件领域：

我按照它说的做了一切，但没有用，当我前往管理页面时，我没有看到要求提供凭据的弹出消息。这就是我所做的：

**1-创建文件领域：** ![在此处输入图像描述](../Images/ac8d913190a08fd9bb61d8a6a4948a3b.png)

**2-然后我使用管理用户按钮创建了一个用户** ![在此处输入图像描述](../Images/d3ddceba1e715c803b9522d57dbc1812.png)

**3-我使用图形界面而不是编辑器创建了一个 glassfish-web.xml 文件** ![在此处输入图像描述](../Images/e87ace6db7be36bbe864795caa0c7b00.png)

**4-然后以与我配置 web.xml 相同的方式** ![在此处输入图像描述](../Images/1fcec9cd0489b29618db16667f74b07e.png) 抱歉，如果最后一张图片有点难以看到，您可以缩放。

当我使用 URL 访问 /admin.xhtml 时，没有什么能阻止我查看页面内容，这意味着配置不正确。我不知道我错过了什么。有人可以帮我找出我无法完成这个简单的安全任务的原因吗？

**更新**

这是我的 web.xml 源

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>faces/index.xhtml</welcome-file>
    </welcome-file-list>
    <security-constraint>
        <display-name>Constraint1</display-name>
        <web-resource-collection>
            <web-resource-name>allowed</web-resource-name>
            <description/>
            <url-pattern>/admin.xhtml</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <description/>
            <role-name>administrator</role-name>
        </auth-constraint>
    </security-constraint>
    <login-config>
        <auth-method>BASIC</auth-method>
        <realm-name>file</realm-name>
    </login-config>
    <security-role>
        <description/>
        <role-name>administrator</role-name>
    </security-role>
</web-app> 
```

还有 glassfish-web.xml 源

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE glassfish-web-app PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Servlet 3.0//EN" "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd">
<glassfish-web-app error-url="">
  <security-role-mapping>
    <role-name>administrator</role-name>
    <group-name>admin</group-name>
  </security-role-mapping>
  <class-loader delegate="true"/>
  <jsp-config>
    <property name="keepgenerated" value="true">
      <description>Keep a copy of the generated servlet class' java code.</description>
    </property>
  </jsp-config>
</glassfish-web-app> 
```

基本上我想做的是拥有两种类型的用户。只浏览 index.xhtml 并且根本没有凭据的客人，以及将凭据存储在文件中并在访问 admin.xhtml 时被要求提供的管理员

我不明白缺少什么。我是否需要为来宾用户创建特殊权限，说他们可以查看 index.xhtml？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T17:32:51.127

假设您的 admin.xhtml 是一个 JSF 页面，那么因为您的 JSF 映射是 /faces/*，您正在通过类似 http://localhost:8080/[Project/]faces/admin.xhtml 的 URL 打开它。这不匹配 /admin.xhtml

代替：

```
<url-pattern>/admin.xhtml</url-pattern> 
```

和

```
<url-pattern>/faces/admin.xhtml</url-pattern> 
```

# mysql - 如何在 Perl 中读取 MySQL 数据库

> ID：10386943
> 
> 赞同：0
> 
> 时间：2012-04-30T16:17:14.480
> 
> 标签：mysql, perl

我是 Perl 的初学者。我现在有一个正常工作的 SQL 语句，但我想使用 Perl 执行 SQL 并将结果输出到文件。哪位高手能提供一个非常基本的模板（从连接数据库开始）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T16:20:17.923

```
use DBI;
my $DBH=DBI->connect("DBI:mysql:db:host","login","pass");
my $sth=$DBH->prepare("query");
$sth->execute();
while (my @row=$sth->fetchrow_array)
{
  print $row[0]."\n";
}
$sth->finish; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T16:20:02.727

这是一个很好的教程（其中之一）：

*   [http://perl.about.com/od/perltutorials/a/perlmysql.htm](http://perl.about.com/od/perltutorials/a/perlmysql.htm)

它有这个例子：

```
use DBI;
 $dbh = DBI->connect('dbi:mysql:perltest','root','password')
   or die "Connection Error: $DBI::errstr\n";
 $sql = "select * from samples";
 $sth = $dbh->prepare($sql);
 $sth->execute
   or die "SQL Error: $DBI::errstr\n";
 while (@row = $sth->fetchrow_array) {
   print "@row\n";
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T16:20:50.047

用于数据库交互的标准 Perl 库是[DBI](https://metacpan.org/module/DBI)，它在概要中有大量示例以及您所要求的[逐步指南。](https://metacpan.org/module/DBI#Outline-Usage)

ORM 的通常选择是[DBIx::Class](https://metacpan.org/module/DBIx%3a%3aClass)，它有[一个](https://metacpan.org/module/DBIx%3a%3aClass%3a%3aManual%3a%3aIntro)Introduction 。

# rake - 如何在 git 子模块上调用 rake 任务？

> ID：10386944
> 
> 赞同：2
> 
> 时间：2012-04-30T16:17:16.067
> 
> 标签：rake, git-submodules, rake-task, rakefile

我有一个项目，其中包括许多供应商的 javascript，例如 jQuery。我将这些脚本作为 git 子模块包含在内。但是，对于我的构建过程，我需要构建的脚本，而不是该脚本的整个存储库。所以我试图设置一个 rake 任务来构建每个脚本 - 最好使用脚本自己的 rakefile - 然后将构建的脚本复制到我的资产目录中。

```
file "app/vendor/scriptname.js" do
    # Call the task that builds the script here
    sh "cp app/vendor/script-submodule/dist/scriptname.js app/vendor/"
end

desc "Make vendor scripts available for build"
task :vendor => "app/vendor/scriptname.js" do
end 
```

如果我`import 'app/vendor/scriptname/Rakefile'`在我的 Rakefile 中使用，我应该可以访问构建脚本的 rake 任务，对吧？我该怎么称呼它？还是我应该使用`sh "cd app/vendor/script-submodule/ && rake dist"`并称其为好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T14:50:24.843

我正在解决一个类似的问题，通过像往常一样调用 rake 任务似乎可以正常工作。这是我的例子的样子，看看你能不能适应你的。

```
# Rakefile
#!/usr/bin/env rake
# Add your own tasks in files placed in lib/tasks ending in .rake,
# for example lib/tasks/capistrano.rake, and they will automatically be available to Rake.

require File.expand_path('../config/application', __FILE__)
load 'engines/foo_engine/Rakefile'

MyApp::Application.load_tasks 
```

然后在我的子模块的 Rakefile 中：

```
# engines/foo_engine/Rakefile
Dir[File.join(File.dirname(__FILE__), 'tasks/**/*.rake')].each do |f|
  load f
end 
```

还有一个示例 rake 任务：

```
# engines/foo_engine/lib/tasks/foo/bar/task.rake
namespace :foo do
  namespace :bar do
    desc "FooBar task"
    task :foo_bar => :environment do
      # perform task
    end
  end
end 
```

然后从命令提示符：

```
rake foo:bar:task 
```

# javascript - 绝对定位的子元素在父容器的动画期间被剪裁

> ID：10386946
> 
> 赞同：3
> 
> 时间：2012-04-30T16:17:20.190
> 
> 标签：javascript, jquery, css

我创建了一个在悬停时增长的盒子。盒子里面有一个缩略图，`position:absolute`比父盒子大。

当我为父容器的宽度或高度设置动画时，缩略图会被裁剪为父容器的大小，但仅在动画期间。

在这里查看一个简单的演示（在 mac 上的 chrome/safari/ff 中测试）：http: [//jsfiddle.net/Q2BPx/3/](http://jsfiddle.net/Q2BPx/3/)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T16:35:05.153

我不知道您本身在做任何“错误”的事情。

当 animate 方法运行时，jQuery 使用内联样式来设置动画每一帧的宽度。它还将样式“溢出：隐藏”添加到内联样式中。

您可以通过添加以下内容来破解扩展器的 css：溢出：可见！重要；

这将防止内联溢出：隐藏使您的缩略图被裁剪。

但是，您可能想查看 jQuery 代码以了解为什么 animate 使用溢出设置。

或者，至少测试您的页面以确保您没有通过使用溢出引入异常：可见！重要；

# java - 具有相同模型的一对 jlists（如何从一个选定的另一个中删除）

> ID：10386948
> 
> 赞同：0
> 
> 时间：2012-04-30T16:17:28.243
> 
> 标签：java, jlist, mouselistener

我有一个带有一些字符串值的模型。这个模型，我将它应用于两个 jlist。每次我从一个 jlist 中单击一个值时，我都需要该值从另一个值中消失。如果它发生在另一个 jlist 上，则相同，但首先必须将值更新为模型包含的值。我做了一些努力，但是当我单击一个值时，我的代码在两个列表中都消失了！我究竟做错了什么？这是代码：

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
*/

package accessfiletest;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import javax.swing.*;

/**
 *
* @author 
*/

 @SuppressWarnings("serial")
public class MoveFolders extends JFrame  
{
//start of class MoveFolders 
//start of variables
private DefaultListModel<String> theModel;
private DefaultListModel<String> fromModel;
private DefaultListModel<String> toModel;
private JList<String> fromJList;
private JList<String> toList;
private JButton moveButton;
private JPanel theJPanel;
//end of variables
public MoveFolders( DefaultListModel<String> model1)
{
 super("Μετακίνηση Εγγράφων από Φάκελο σε Φάκελο");
 fromModel=model1;
 toModel=model1;
 theModel=model1;
 theJPanel=new JPanel(null);
 fromJList=new JList<>(fromModel);
 fromJList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
 fromJList.setSelectedIndex(0);
 fromJList.addMouseListener(fromlistener);

JScrollPane frompane=new  JScrollPane(fromJList);
frompane.setBounds(50, 50, 200, 150);
theJPanel.add(frompane);
moveButton=new JButton("ΜΕΤΑΚΙΝΗΣΗ >>");
moveButton.setBounds(260, 90, 150, 20);
theJPanel.add(moveButton);
toList=new JList<>(toModel);
 if (model1.getSize()>1)
   {
    toList.setSelectedIndex(1);

   }
else
   {
    JOptionPane.showMessageDialog(null,
"Πρέπει να έχετε πάνω από 1 φάκελο για να γίνει αντιγραφή εγγράφων.\nΤο παράθυρο θα       κλείσει.", "Λάθος", JOptionPane.ERROR_MESSAGE);
 dispose();
   }
 toList.addMouseListener(toListener);
 toList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
 JScrollPane topane=new  JScrollPane(toList);
 topane.setBounds(420, 50, 200, 150);
 theJPanel.add(topane);

 add(theJPanel);
 setDefaultCloseOperation(DISPOSE_ON_CLOSE);
 setSize(670, 300);
 setVisible(true);
 }

 MouseListener fromlistener = new MouseAdapter() {
 public void mouseClicked(MouseEvent e) {
    if (e.getClickCount() == 1) {
        final int index = fromJList.locationToIndex(e.getPoint());
       SwingUtilities.invokeLater(new Runnable() {

                @Override
                public void run() {
                   toModel=theModel;
                   toModel.remove(index);
                }
            });
        }
   }
};

MouseListener toListener = new MouseAdapter() {
public void mouseClicked(MouseEvent e) {
    if (e.getClickCount() == 1) {
        final int index = fromJList.locationToIndex(e.getPoint());
        SwingUtilities.invokeLater(new Runnable() {

                @Override
                public void run() {
                    fromModel=theModel;
                    fromModel.remove(index);
                }
            });
     }
   }

  };

}//end of class MoveFolders 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:28:41.560

每个列表都需要使用自己的引用`ListModel`，

```
 public MoveFolders(DefaultListModel<String> model1) {
        ...
        fromModel = new DefaultListModel<>();
        for (Object obj : model1.toArray()) {
            fromModel.addElement((String) obj);
        }
        toModel = new DefaultListModel<>();
        theModel = model1;
        ...
    } 
```

将元素移动`fromModel`到`toModel`

```
 MouseListener fromlistener = new MouseAdapter() {
        public void mouseClicked(MouseEvent e) {
            if (e.getClickCount() == 1) {
                final int index = fromJList.locationToIndex(e.getPoint());
                SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        int index = fromJList.getSelectedIndex();
                        toModel.addElement(fromModel.getElementAt(index));
                        fromModel.remove(index);
                    }
                });
            }
        }
    }; 
```

将元素移动`toModel`到`fromModel`

```
 MouseListener toListener = new MouseAdapter() {
        public void mouseClicked(MouseEvent e) {
            if (e.getClickCount() == 1) {
                final int index = fromJList.locationToIndex(e.getPoint());
                SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        int index = toList.getSelectedIndex();
                        fromModel.addElement(toModel.getElementAt(index));
                        toModel.remove(index);
                    }
                });
            }
        }

    };

} 
```

我希望这可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:22:47.077

您使用了两次相同的模型，但它们实际上是不同的。如果它们本质上不同，请使用不同的模型。如果您修改由不同视图（JList）使用的模型，它们都会反映底层模型的更改，这是很正常的。

# java - Java 文件打不开

> ID：10386959
> 
> 赞同：1
> 
> 时间：2012-04-30T16:18:06.820
> 
> 标签：java, class

我之前在处理一个 java 文件，然后当我回到它时，它说它是一个 CLASS 文件，现在无法打开。如果我在 JCreator 中打开它，就会出现这种情况：Êþº¾

dialNumber countEqual SourceFile order.java

S² L=+¾¢ M*¾½

ú L½

如果我在记事本中打开它，也会发生同样的情况。

我将如何打开这个文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:19:47.110

看起来您将 .java 文件编译为 .class 字节码表示。您仍然应该拥有原始来源。

更新：您是说磁盘上的任何地方都没有 .java 文件吗？如果您尝试打开 .java 文件，您会遇到这个问题吗？

听起来你真的搞砸了。您必须使用 .class 文件覆盖您的 .java 源代码。

您应该重新创建 .java 文件并重试。

我还建议您不要使用 JCreator。您的 Java 知识似乎很浅；看看您是否可以使用文本编辑器打开它，然后将 IDE 排除在外。在文本编辑器中创建 .java；在 shell 的命令行上编译为 .class 文件。

由于信息不足，投票结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:20:34.673

不要打开`.class`文件。类文件是 JVM 将解释以运行您的程序的编译代码。您需要找到该`.java`文件并打开它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T16:19:32.757

您正在尝试打开文件的编译字节码（即*.class*）而不是源文件（即*.java*）。前者是Java编译器生成的，是JVM可以执行的真实文件。

搜索正确的文件，您将解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T17:46:23.530

尝试创建一个新的，但使用不同的编辑器。Jcreator 易于使用，但是当您尝试在另一个操作系统或编辑器中打开 src 文件时，您会发现奇怪的字符。

如果你的类文件没问题，为什么不反编译类而不是恢复 src？

# sql-server - 如何解析和替换 SQL Server 数据库中所有格式错误的 HTML 实体？

> ID：10386960
> 
> 赞同：0
> 
> 时间：2012-04-30T16:18:08.047
> 
> 标签：sql-server, regex, sql-server-2008, replace, html-entities

我有一个将数据解析到其中的数据库。在解析过程中，删除了与号和分号，这弄乱了一堆 HTML 实体。

例如，我现在有这样存储的数据：

```
#7779avaf#299 
```

应该是：

```
&#7779;avaf&#299; 
```

我开始像这样替换其中的一些：

```
REPLACE ( FIELD1, '#7779' , '&#7779;' ) 
```

但是，我必须为每个实体编写一个新的替换。我对 RegEx 不太擅长。有没有办法可以匹配所有可能的组合 # 后跟 3 或 4 位数字，并将其替换为 后跟相同的 3 或 4 位数字，然后是分号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:39:10.017

这是一个提取所有匹配目标文本的正则表达式：

```
(#\d{3,4}) 
```

然后，您可以使用它将生成的列表来生成您的`REPLACE`语句，或者[找出语法以使用](http://www.simple-talk.com/sql/t-sql-programming/tsql-regular-expression-workbench/)正则表达式引擎的回溯功能来动态包装匹配的组`&`和`;`

[T-SQL 正则表达式工作台](http://www.simple-talk.com/sql/t-sql-programming/tsql-regular-expression-workbench/)有一些[如何`SELECT`](http://www.simple-talk.com/sql/t-sql-programming/tsql-regular-expression-workbench/#third)使用上述正则表达式的示例。以及[如何`REPLACE`](http://www.simple-talk.com/sql/t-sql-programming/tsql-regular-expression-workbench/#fourth)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:46:47.207

如果你可以保证每个 # 都属于给定字段中的一个 HTML 实体，你可以这样做：

```
UPDATE myTable SET [FIELD1] = REPLACE(FIELD1, '#', '&#')
UPDATE myTable SET [FIELD1] = STUFF(FIELD1, (CHARINDEX(FIELD1, '#') + 5), 0, ';') 
```

如果没有，您可能需要为 REGEX 匹配创建一个 CLR 函数，因为 SQL 本身不支持它。

# ios - Xcode Storyboard Tableview 样式“Subtitle”的单元格对齐到顶部

> ID：10386970
> 
> 赞同：0
> 
> 时间：2012-04-30T16:18:41.663
> 
> 标签：ios, xcode, storyboard, tableview

我正在寻找一种将样式为“字幕”的表格单元格与顶部对齐的方法。单元格包括标题和描述标签（自动）。当描述包含 3 行的文本时，标题标签会粘贴到视图的顶部。但是，例如在描述标签中只有 1 或 2 行文本时，标题标签在视图中基本上是垂直居中的。

Interface Builder 中是否有设置可以将此自定义单元格类型与单元格视图的顶部对齐？

谢谢和问候， 克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:42:13.957

不，如果你需要这么多的控​​制，你应该继承 UITableViewCell 并让它完全符合你的要求。这并不是很难做到，而且真的不需要所有的猜测工作。

# facebook - Facebook打开图表的问题

> ID：10386973
> 
> 赞同：0
> 
> 时间：2012-04-30T16:18:52.773
> 
> 标签：facebook, facebook-opengraph

我的 wordpress 网站上有一个独特且不同的问题，其中包含 facebook 开放图

[facebook 开放图形调试器（链接供参考](https://developers.facebook.com/tools/debug/og/object?q=www.glideidea.com)）完全理解该站点的主页。

但是该网站的文章页面，在 facebook 的打开图形调试器上显示错误（[参考链接](https://developers.facebook.com/tools/debug/og/object?q=http://www.glideidea.com/2012/04/25/science-of-india-rig-veda/)）。

当我的网站的文章链接发布到 facebook 对象调试器时，观察到以下错误：

1.  `Can't Download: Could not retrieve data from URL.`
2.  ```
    Graph API:
    {
        "error": {
            "message": "An unknown error has occurred.",
            "type": "OAuthException",
            "code": 1
        }
    } 
    ```

并且刮板无法加载任何数据，即空白页。

任何人都可以，请帮助我解决这个问题，我强烈怀疑这是一些插件在文章而不是主页上搞砸了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T13:15:42.050

解决了：

我当时使用的 wordpress 插件（SEO ALRP PLUGIN）有问题。在检查 Open Graph Protocol Wordpress 插件提供给您的选项时要非常谨慎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:24:34.440

上周我在 Chrome 和 FF 中遇到了这个问题。它在约 24 小时后自行解决。我会说今天做点别的事情，明天再试一次。

我认为 FB 工程师正在调整开发工具，并且在此过程中偶尔会破坏一些东西。

如果你今天真的需要处理它，你可以试试 beta 堆栈，看看它是否更适合你：[https ://developers.beta.facebook.com/](https://developers.beta.facebook.com/)

# php - 在 URL 中使用变量时验证 HTML 的问题

> ID：10386976
> 
> 赞同：1
> 
> 时间：2012-04-30T16:19:08.997
> 
> 标签：php, w3c-validation

通过 W3C 验证器运行我的页面时出现此错误：

= 在未引用的属性值中。可能的原因：一起运行的属性或未加引号的属性值中的 URL 查询字符串。

这是导致此错误的代码：

```
$prevPage = "?main=men&amp;category1=1&amp;pagenum=$prevp"."&amp;lowRowNum=$prev_page_low".
                    "&amp;highRowNum=$prev_page_high";

print("<a class='left' href=$prevPage>".
                    "Previous Page</a>&nbsp;&nbsp;&nbsp;"); 
```

在我的任何其他 PHP 脚本中，我都没有收到任何类似的错误，所以我猜这是我在这里做错的具体事情？

谁能看到为什么这段代码会导致这个错误？

我对此进行了研究并读到它可能归结为 HTML 特殊字符？我不确定..

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T16:22:13.713

只需尝试：

```
<a class='left' href='$prevPage'> 
```

注意引号。始终尝试在 HTML 中引用您的属性。更好的做法是：

```
echo '<a class="left" href="' . $prevPage . '">' //etc etc; 
```

尽量不要回显整个 HTML 字符串，因为在使用单引号和双引号时可能会感到困惑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T16:38:34.013

我建议在这里使用[`printf()`](http://php.net/printf)和的组合[`htmlentities()`](http://php.net/htmlentities)：

```
printf(
  '<a class="left" href="%s">Previous Page</a>'
    , htmlentities($prevPage)
); 
```

`printf()``echo`在替换特殊格式的标记后获取一个字符串并s 。在上面的示例中，字符串中有一个标记，表示为`%s`。

运行时`printf()`，它将每个标记替换为相应的参数。在上面的示例中，`%s`被 的结果替换`htmlentities($prevPage)`。

[手册页`sprintf()`](http://php.net/sprintf)更详细地介绍了令牌的工作原理，并提供了更多示例（除了返回格式化的字符串，而`sprintf()`直接输出它`printf()`之外，其余都是相同的）。`sprintf()``printf()`

为确保`&`对标记验证等实体进行正确编码，您还应该使用`htmlentities()`.

# javascript - fullcalendar 不适用于 Mozilla 和 Internet Explorer

> ID：10386981
> 
> 赞同：1
> 
> 时间：2012-04-30T16:19:24.790
> 
> 标签：javascript, jquery, fullcalendar

我的完整日历无法在 Internet Explorer 和 Mozilla 上运行。它在 chrome 上运行得很好，但在 IE 和 Moz 上却不行。它将显示日历，但不会显示事件，这是获取事件并显示它们的 jquery 文件。

```
$('#calendar').fullCalendar({

    header: {

        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
    },

    events: "assets/php/json-events.php",

    editable: true,

    eventDrop: function(event, delta) {
        alert(event.title + ' was moved ' + delta + ' days\n' +
            '(should probably update your database)');
    },

    loading: function(bool) {
        if (bool) {
            $('#loading').show();
        } else {
            $('#loading').hide();
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-12-19T17:22:22.333

我设法解决了这个错误。我的解决方案很简单：所有小于或等于 9 的月份和日期都应该在数字前加上 0 前缀。

希望这可以帮助。

# javascript - JQuery .on() 更改事件未触发（页面在 .load() 内）

> ID：10386984
> 
> 赞同：4
> 
> 时间：2012-04-30T16:19:32.960
> 
> 标签：javascript, jquery, radio-button

好的，所以我已经为此寻找了几个小时的答案，但没有发现任何有效的方法。

我有一个页面，我在 .click 事件后加载到 div 中，看起来像这样：

```
$('#mybutton').click( function () { $('#mydiv').load('myinnerpage.aspx'); }); 
```

然后我在 myinnerpage.js 里面有：

```
$(document).on('change', 'input[name=rbfileByNameOrID]:radio', function () {
if ($('input#rbByFileName').attr('checked'))
    fileSelectionBy('filename');
else
    fileSelectionBy('fileid'); 
}); 
```

change 函数永远不会被触发，除非我自己打开 myinnerpage.aspx。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:39:27.867

您可以将 myinnerpage.js 代码放在主 javascript 中，而不是放在包含的页面中吗？

如果你不能，我没有“好的解决方案”，但这可以帮助你：jQueryMobile-Navigation 在使用 ajax 加载页面时遇到了同样的问题，他们使用了非 jquery 解决方案来解决这个问题。在他们的 $.ajax->success 中，他们使用了 innerHTML ：

```
[...]

//workaround to allow scripts to execute when included in page divs
all.get( 0 ).innerHTML = html;

[...] 
```

[你可以在这里](https://github.com/jquery/jquery-mobile/blob/master/js/jquery.mobile.navigation.js)看到他们的完整代码。

它适用于页面 div 中包含的script-tag**和 inline-javascript 。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:22:06.583

尝试手动触发事件？

```
$('#mybutton').click( function () { 
  $('#mydiv').load('myinnerpage.aspx', function(){
      $('input[name=rbfileByNameOrID]:radio').trigger('change')
   }); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T16:31:09.367

```
$('input#rbByFileName').trigger('change'); 
```

或者：

```
$('input#rbByFileName').change();

$('#mybutton').click( function () { 
  $('#mydiv').load('myinnerpage.aspx', function(){
      $('input#rbByFileName').change();
  }); 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T18:07:08.273

这里的问题是，当`.load`运行时， 的内容`myinnerpage.aspx`（全部）放入`#mydiv`. 任何`<script>`标签都会运行，但它们来自当前页面的路径，因此您可能需要检查文件路径。

您可能需要更改脚本以使用绝对路径而不是相对路径，因为`../`在当前页面和加载的页面上可能不一样。

# backbone.js - 骨干路由器 - 浏览器后退按钮不触发路由器方法

> ID：10386985
> 
> 赞同：13
> 
> 时间：2012-04-30T16:19:41.730
> 
> 标签：backbone.js

我设置了一个看似有效的主干路由器 - 路由被正确触发，视图更新等。但是，当我按下浏览器的“返回”按钮时，根本不会触发路由。此外，在浏览器中输入 URL 也不会触发路由器。我是否缺少一些步骤来将浏览器特定的东西绑定到 Backbone（Firefox 11）。

**设置**

```
var messageRouter = new MessageRouter({view: messageListView});
Backbone.history.start(); 
```

**扳机**

```
Backbone.history.navigate("#/view/" + $(this).data("filter-type"), {trigger: true}); 
```

**路由器代码**

```
var MessageRouter = Backbone.Router.extend({

    view : null, /* should always be overridden */

    initialize : function(options)
    {
        this.view = options.view;
    },

    routes : {
        "" : "default",
        "/view/:filter" : "filter",
        "camera" : "camera"
    },

    default : function() {
    },

    filter : function(filterString) {
        this.view.setFilter(filterString);
        this.view.rerender();
    },

    camera : function(cameraString) {
    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-12T13:50:57.880

这可能为时已晚..但我遇到了完全相同的问题，结果我不小心从窗口对象中解除了所有事件的绑定，并且主干历史正在侦听窗口上的事件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T18:05:52.010

您应该使用已定义的相同路径调用**router .navigate。**IE：

**扳机**

```
messageRouter.navigate("/view/" + $(this).data("filter-type"), {trigger: true}); 
```

**路由器**

```
 routes : {
        "" : "default",
        "/view/:filter" : "filter",
        "camera" : "camera"
    }, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T15:22:04.193

它可能是单词 default 搞砸了，因为它是一个保留字。

要么在 MessageRouter 中的键 'default' 周围加上引号，要么将其称为其他名称，例如 'defaultRoute'。

```
'default': function() {},
defaultRoute: function() {} 
```

[http://jsfiddle.net/uwjDq/2/](http://jsfiddle.net/uwjDq/2/) - 在这里似乎可以正常工作，包括使用后退按钮。

# c - 从结构打印数组

> ID：10386986
> 
> 赞同：1
> 
> 时间：2012-04-30T16:19:42.960
> 
> 标签：c, arrays, struct, printf

当我尝试打印包含在结构实例中的数组时，结果的一部分是我所期望的，而其他部分似乎是胡言乱语。这里发生了什么？

示例输出：

> $./makevector 测试
> 
> 名称：测试16481592918288327671592918096327670000000000100011809530144490000159291832032767

我的代码如下：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <time.h>

static int vec_length = 30;

typedef struct {
  char* name;
  int* vector;
} word_entry;

static word_entry entry_one = {NULL,NULL}; 

void MakeEntry(char* word, word_entry* entry){
 entry->name = word;
 int i;
 int this_vector[vec_length];
 srand(time(NULL));
 for(i=0;i<vec_length;i++){
   this_vector[i] = rand()%2;
 } 
entry->vector = this_vector;
}

int main(int argc, char* argv[]){
  int i;
  MakeEntry(argv[1], &entry_one);
  printf("NAME: %s\n", entry_one.name); 
  for (i=0;i<vec_length;i++){
    printf("%d",entry_one.vector[i]);
  }
  printf("\n");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:24:05.880

`this_vector`是 的本地数组`MakeEntry()`。当该函数结束时，该数组超出范围。`entry->vector`指向无效的东西也是如此，你会得到未定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T16:23:56.407

这里有多个问题 - “this_vector”是 MakeEntry 本地的，并且在 MakeEntry 返回时超出范围。

另外-我认为您的 printfs 中需要一些 \n

最后——你期待什么输出？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T18:27:47.220

尝试以下方式：

```
void MakeEntry(char* word, word_entry* entry)
{

      int i = 0;
      int *this_vector = calloc(vec_length+1, sizeof(int)); //Allocate an array of             Nelements x sizeof(int)

      entry->name = word;

      srand(time(NULL));

     for(i = 0; i < vec_length; i++)
       this_vector[i] = rand()%2;

      entry->vector = this_vector;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T16:25:10.230

您`this_vector`在*堆栈*上创建。但随后将其赋值给`entry->vector`，以供函数外使用`MakeEntry`。

一旦`MakeEntry`返回，`this_vector`就不再有效，并且很可能是你的垃圾的来源。

```
void MakeEntry(char* word, word_entry* entry){
    int this_vector[vec_length];
    [...]
    entry->vector = this_vector;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T16:21:38.903

在我看来，问题是您打印的数字没有任何间距，请尝试使用

```
printf("%d ",entry_one.vector[i]); 
```

这样您就可以识别数组中的所有单个整数。

哦，好吧，阅读*chrisaycock 的*答案，我没有注意到您是`vector`从堆栈分配的变量中分配整体。它在本地范围之后超出范围，您应该动态分配它：

```
entry->vector = calloc(vec_length,sizeof(int));
for(i=0;i<vec_length;i++){
  entry->vector[i] = rand()%2;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T16:24:06.780

```
entry->vector = this_vector; 
```

`this_vector`是一个局部数组类型变量，一旦函数返回就会丢失。但是结构成员仍然持有对它的引用。

不要在堆栈上分配数组，而是使用`malloc`或任何其他动态内存分配器。`free`不再需要时记住它。

# iphone - iPhone：UISegmentedControl，导航返回后如何记住索引？

> ID：10386987
> 
> 赞同：3
> 
> 时间：2012-04-30T16:19:43.133
> 
> 标签：iphone, objective-c, ios, uisegmentedcontrol

我的 tableview 控制器上有一个段。

segmentIndex=0 -> tableView 正在加载 -> 点击。导航到另一个 tableViewController。segmentIndex=1 -> 加载 tableView -> 点击。导航到另一个 tableViewController。

切换 tableviews 很好。问题是导航回来后我需要记住以前的索引值。如何实施？我当前的代码：

```
- viewWillAppear
self.segment=[[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"Nominals",@"Coinage",nil]];
[self.segment setFrame:CGRectMake(80, 0, 200, 30)];
[self.segment setSegmentedControlStyle:UISegmentedControlStyleBar];
//self.segment.selectedSegmentIndex=0;
[self.segment addTarget:self action:@selector(segmentValueChaged:) forControlEvents:UIControlEventValueChanged];
[[self navigationItem] setTitleView:self.segment];

-(IBAction)segmentValueChaged:(id)sender
{
switch (self.segment.selectedSegmentIndex) 
{
    case 0:
    {
        DBAccess *access=[[DBAccess alloc]init];
        self.items=[access returnNominals:self.subCountryID nk:fromPeriod];
        [access closeDataBase];
        self.tableView.hidden=NO;
        [self.tableView reloadData];
        self.segmentIndex=0;
         break;
    }
    case 1:
    {
        DBAccess *access=[[DBAccess alloc]init];
        self.coinageArr=[access returnCoinage:fromPeriod period:subCountryID];
        self.tableView.hidden=NO;
        [self.tableView reloadData];
        self.segmentIndex=1;
        break;
    }
}
} 
```

提前谢谢你们。

编辑：

```
self.segment=[[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"Nominals",@"Coinage",nil]];
[self.segment setFrame:CGRectMake(80, 0, 200, 30)];
[self.segment setSegmentedControlStyle:UISegmentedControlStyleBar];
if(!self.segmentIndex)
{
    self.segment.selectedSegmentIndex=-1;
}
else 
{
    self.segment.selectedSegmentIndex=self.segmentIndex;
}

//self.segment.selectedSegmentIndex=self.segmentIndex;
[self.segment addTarget:self action:@selector(segmentValueChaged:) forControlEvents:UIControlEventValueChanged];
[[self navigationItem] setTitleView:self.segment];

-(void)viewWillDisappear:(BOOL)animated
{
switch (self.segment.selectedSegmentIndex) 
{
    case 0:
    {
        self.segmentIndex=0;
        break;
    }
    case 1:
    {
        self.segmentIndex=1;
        break;
    }
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:28:18.307

您将值存储在`viewWillDisappear`其中，当您返回控制器时，`viewWillAppear`您将设置回存储的值。因此，您还可以做的是，首先将值设置为...假设-1。如果你的`viewWillAppear`值是-1，那么你设置你的默认值，否则，你使用那个值。

```
- (void)viewWillAppear:(BOOL)animated {
    self.segment=[[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"Nominals",@"Coinage",nil]];
    [self.segment setFrame:CGRectMake(80, 0, 200, 30)];
    [self.segment setSegmentedControlStyle:UISegmentedControlStyleBar];

    if (self->_currentIndex == -1) {
        NSInteger myDefaultValue = 0;
        self.segment.selectedSegmentIndex=myDefaultValue;
    } else {
        self.segment.selectedSegmentIndex=self->_currentIndex;
    }

   [self.segment addTarget:self action:@selector(segmentValueChaged:) forControlEvents:UIControlEventValueChanged];
   [[self navigationItem] setTitleView:self.segment];
} 
```

当控制器即将消失时，您还必须存储该值。

```
- (void)viewWillDisappear:(BOOL)animated {
    self->_currentIndex = self.segment.selectedSegmentIndex;
} 
```

`NSInteger _currentIndex;`您在界面中定义的位置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T17:20:33.633

您可以将索引值存储在**NSUserDefaults**中，稍后当您向后导航时，您可以在**viewWillAppear**中从**NSUserDefaults**中检索整数值，并根据检索到的整数值创建选定或取消选择的索引。

例如：

```
-(IBAction)segmentValueChaged:(id)sender
 {
      switch (self.segment.selectedSegmentIndex)
      {
         case 0:
         { 
              // --some code--
              break;   
         }

         case 1  
         {
              //--some code--
              break;

          }  
         default:
          break;
       } 
```

//现在在 NSUserDefaults 中保存选定的索引，如下所示：
// 获取共享的默认对象。

```
**NSUserDefaults *settings = [NSUserDefaults standardUserDefaults];** 
```

**// 保存索引。**

```
**[settings setInteger:self.segment.selectedSegmentIndex forKey:@"MySelectedValueKey"];**

} 
```

在您的 viewWillAppear 中，您可以从 NSUserDefaults 中获得价值；那就是要选择的索引。

```
 NSUserDefaults *settings = [NSUserDefaults standardUserDefaults];
    if([settings objectForKey:@"MySelectedValueKey"] == 0)   
    {
      //Set up for index 0
    }

    if([settings objectForKey:@"MySelectedValueKey"] == 1)   
    {
       //Set up for index 1  
    } 
```

乐意效劳 ：）

# c++ - MultiMap 读取数据有问题吗？

> ID：10386990
> 
> 赞同：0
> 
> 时间：2012-04-30T16:20:02.757
> 
> 标签：c++

所以这样做的目的是读入一个包含数字和名称的文本文件，如下所示：

```
50 Leonardo
20 Donatello 
100 Rapheal
40 Michelagelo 
```

我正要打印它以检查它是否正确。我没有像我预期的那样获得文本文件的副本，而是为所有名称重复了姓氏。

这就是我得到的：

```
Michelagelo 50
Michelagelo 20
Michelagelo 100
Michelagelo 100 
```

编码：

```
ifstream top;   
    char output[100];
    char* defaultName = "Default";
    int tempTop;
    char* tempName;

    top.open("top.txt");        
    top.clear();
    top.seekg( 0, std::ios_base::beg );

    typedef multimap <char*, int> MM;
    MM top;

    if (top.is_open()) {        
        while (!top.eof()){

            //Get Score
            top>>output;
            tempTop=atoi(output); 

            //Get Name
            top>>output;
            tempName=output;

         cout << "Writing: " << tempName << " and " << tempTop << endl;
         top.insert(MM::value_type(tempName,tempTop));

        }
    }       

    MM::iterator i;

     for(i=top.begin(); i!=top.end(); i++){
          cout << (*i).first << " " <<  (*i).second << endl;
     }
     cout << "Size is: " << top.size() << endl; 
```

我的另一个问题是我正在使用这个多图，因为我相信它会产生一个排序列表？

很困惑，并会欣赏我的新手方式向我展示的错误。

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:24:19.620

您的问题主要源于尝试`char *`直接使用，而不是`std::string`像您应该使用的那样使用。如果您坚持使用`char*`，则需要动态分配您使用的每个字符串，并提供一个比较器对象来比较字符串的内容而不是指针。

底线：`std::string`除非您别无选择，否则请使用。如果你真的*不能*使用`std::string`，你几乎肯定想编写一个自己的类，它至少提供大致相似的功能（尽管可能没有大量的搜索、替换等）

完成后，您将遇到另一个小问题：`while (!top.eof())`几乎肯定会导致问题（通常似乎读取文件的最后一行两次）。您几乎肯定想根据尝试读取的结果来读取值和循环的基本延续。

```
while (top >> number >> name)
    MM.insert(MM::value_type(number, name)); 
```

编辑：如果我这样做，我可能会稍微不同地实现它，以避免编写显式循环。我将从以下内容开始：

```
typedef std::pair<std::string, int> v_t;

std::istream &operator>>(std::itream &is, v_t &v) {
     is >> v.second;
     std::getline(is, v.first);
     return is;
} 
```

那应该从输入文件的一行读取数据。然后你可以使用一个`istream_iterator`来填充你的多图：

```
std::ifstream top("top.txt");

// define multimap, initialized from stream:    
std::multimap<std::string, int> MM((std::istream_iterator<v_t>(top)),
                                    std::istream_iterator<v_t>()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:26:18.610

当您插入多图时，您将插入您用于模板参数的类型的副本。在这种情况下，它是一个`char *`. 复制指针*不会*复制字符串！下次插入时插入的是相同的指针，所以现在有两个指向同一个字符串的指针。随着该字符串被新输入覆盖，地图中的所有副本都会更改。

# opengl - OpenGL中的多个渲染目标与Cg

> ID：10386993
> 
> 赞同：5
> 
> 时间：2012-04-30T16:20:26.597
> 
> 标签：opengl, framebuffer, shader, cg, render-to-texture

我正在尝试（徒劳地）使用 OpenGL 和 NVIDIA 的 Cg 着色器系统设置 MRT，最终目标是延迟渲染。我已经成功地为单个目标工作了着色器和渲染到纹理，但是一旦我尝试将一个对象渲染到多个渲染目标，它就无法显示在其中任何一个目标中。

我正在通过以下方式设置帧缓冲区对象：

```
// Initialize textures
// (I'll spare you the code since I've  done that without issues)

// Initialize the FBO
glGenFramebuffers(1, &fbo);
glBindFramebuffer(GL_FRAMEBUFFER, fbo);
glGenRenderbuffers(1, &depthBuff);
glBindRenderbuffer(GL_RENDERBUFFER, depthBuff);
glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT, width, height);
glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT,
                          GL_RENDERBUFFER, depthBuff);

// -snip-

// Bind each texture we want to use to the FBO at rtNum
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0 + rtNum,
                       GL_TEXTURE_2D, tex->getID(), 0);
// Check to make sure we're good to go
if (glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE) {
    throw Exceptions::GLException("Frame buffer object is not complete.",
                                __FUNCTION__);
}

// -snip-

// Call glDrawBuffers with the RTs we want to render to
glBindFramebuffer(GL_FRAMEBUFFER, fbo);
unique_ptr<GLenum[]> arr(new GLenum[num]);
for (size_t c = 0; c < num; ++c)
    arr[c] = GL_COLOR_ATTACHMENT0 + c;
glDrawBuffers(num, arr.get());
if (glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE) {
    throw Exceptions::GLException("Frame buffer object is not complete.",
                                __FUNCTION__);

// -snip-

// Set up the FBO for rendering
glBindFramebuffer(GL_FRAMEBUFFER, fbo);
glPushAttrib(GL_VIEWPORT_BIT);
glViewport(0, 0, width, height);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

// Draw calls here

glBindFramebuffer(GL_FRAMEBUFFER, 0);
glPopAttrib(); 
```

我的着色器（使用返回的配置文件编译`cgGLGetLatestProfile`）是：

```
struct VertexShaderOutput {
    float4 position : POSITION;
    float3 normal : TEXCOORD0;
    float4 color : COLOR;
};

VertexShaderOutput VS_Main(float4 local : POSITION,
                        float4 normal : NORMAL,
                        float4 color : COLOR,
                        uniform float4x4 modelViewProj,
                        uniform float4x4 modelViewIT)
{
    VertexShaderOutput OUT;
    OUT.position = mul(modelViewProj, local);
    OUT.normal= mul(modelViewIT, normal).xyz;
    OUT.color = color;
    return OUT;
}

struct FragmentShaderOutput {
    float4 unlit : COLOR0;
    float4 normAndDepth : COLOR1;
};

FragmentShaderOutput FS_Main(VertexShaderOutput vsOut)
{
    FragmentShaderOutput OUT;
    OUT.unlit = float4(1.0f, 1.0f, 0.0f, 1.0f);//vsOut.color;
    OUT.normAndDepth.rgb = vsOut.normal;
    // Calculate depth later
    OUT.normAndDepth.a = 1.0f;
    return OUT;
} 
```

有没有人知道为什么这可能会失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T02:51:09.447

上述方法是正确的。问题似乎与硬件和 Cg 的组合有关。在我的带有集成芯片组的笔记本电脑上，尽管 Cg 没有返回任何错误，但 MRT 失败并发生了许多其他与着色器相关的问题。在我的配备 GeForce GTX260 的台式机上，一切正常。

# .net - 查看 sp_execute 在做什么

> ID：10386995
> 
> 赞同：14
> 
> 时间：2012-04-30T16:20:28.037
> 
> 标签：.net, sql, sql-server-2008, tsql

在我的 MS SQL Profiler 中，我看到了很多这样的小查询。

> 执行 sp_execute 1,@p0=15954

从理论上讲，我知道这是有效的，它正在执行先前创建的查询并传入特定参数。但问题是我不确定是什么导致了这些查询。

有没有办法查看这些查询的 TSQL 内容？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-12-18T14:27:33.217

在 Sql 探查器中，我使用 Event StoredProcedure>>SP:CacheHit。[我在链接](http://performancetestersdiary.wordpress.com/2013/07/01/getting-the-sql-from-a-sp_execute-statement-in-microsoft-sql-profiler/)中读到了它。捕获 SQL:StmtCompleted 和 RPC:Completed DIDNT 捕获 sp_execute 的参数

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-01T22:32:08.837

这看起来像是在运行一个准备好的查询。要做的一件事是查看探查器跟踪以查看是否可以找到生成此特定句柄的 sp_prepare 查询。

另一种选择是查询系统视图以查找基础文本。

如果它当前正在运行，这将为您提供查询

```
select text
    from sys.dm_exec_requests
    cross apply sys.dm_exec_sql_text(plan_handle)
    where session_id = <SPID FROM PROFILER> 
```

# sql - 查询以提取每个提交的 ID 的最高值

> ID：10386998
> 
> 赞同：0
> 
> 时间：2012-04-30T16:20:35.867
> 
> 标签：sql, oracle

除了我打算让它做的事情之外，我在做查询时遇到问题。我在数据库中拥有的每个员工 ID (pmt_id) 的雇主 ID (eh_id)。

我的查询如下：

```
 SELECT *
  FROM employer_history table1
  WHERE eh_id =
    (
      SELECT eh_id
      FROM employer_history table2
      WHERE table1.eh_id = table2.eh_id
      group by table2.eh_id
    )
  and table1.eh_pmt_id in (131,3725) 
```

我得到的是：

eh_id ¦ eh_pmt_id
123 ¦ 131
124 ¦ 131
125 ¦ 3725
126 ¦ 3725

我期待的是：

eh_id ¦ eh_pmt_id

124 ¦ 131
126 ¦ 3725

我将不胜感激，因为我自己对此无能为力

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:25:36.177

您可以为此使用分析函数：

```
SELECT *
FROM (  SELECT *, ROW_NUMBER() OVER(PARTITION BY peh_pmt_id ORDER BY eh_id DESC) Corr
        FROM employer_history 
        WHERE eh_pmt_id in (131,3725)) t1
WHERE Corr = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:29:49.183

```
SELECT peh_pmt_id, MAX(eh_id)
FROM employer_history
WHERE eh_pmt_id in (131,3725)
GROUP BY peh_pmt_id 
```

# c++ - 非常快的序列化。随机访问 C++

> ID：10386999
> 
> 赞同：0
> 
> 时间：2012-04-30T16:20:40.970
> 
> 标签：c++, serialization, c++11

在 C++11 中，我可以使用什么来将数据快速序列化为多个文件（为避免数据冗余，我假设我会将数据拆分为多个表并在其 id 号上连接它们）？

我考虑使用：

1.  `fstream.read()`使用,访问`fstream.write()`的简单二进制文件
2.  使用`mmap`.
3.  函数 google `protobuf`（如果我可以访问随机元素而不是迭代所有元素）。

所有表都将由具有以下数据类型的列组成： `uint8`, `uint16`, `uint32`, `uint64`, `string`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:29:29.510

快速随机访问将是这里的挑战。实现这一目标的最简单方法是保持每一行的大小不变。使用`protobuf`s 没有简单的方法可以做到这一点，除非你假设一个保守的最大尺寸。使用前两个选项中的任何一个都应该相对容易做到这一点（假设您对字符串的大小有合理的限制）。

但是，您可以任意变得更复杂。使用`protobuf`s 可能会比简单的序列化使用更少的空间，因此您将有剩余的内存来构建索引。即使是相对较小的索引（例如，从表行号映射到每 100 行的文件偏移量）也会为您提供快速随机访问并使用更少的空间。当然，这比简单的每行大小相同的方法要复杂得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T01:22:53.480

分开你的数字和字符串存储。

**稀疏表，数值数据**

对数字类型的列使用列存储。列存储不存储 NULL 值，并提供允许您重现表行的连接逻辑。

不是单查找随机访问，但空间权衡可能会获胜，特别是如果列存储的索引保留在内存中。

**密集表，数值数据**

MMAP 用于读取的文件。以恒定的宽度逐行存储您的数据。您可能需要调整文件打开参数以获得所需的缓存和预读优势。

使用 fstream.write() 进行写作可能更快。

**字符串数据**

Based on your suggestions, it sounds like your design allows writing the table all at once, and then performing read-only random access from that point forward. If so, look at [Google's SSTable](http://www.igvita.com/2012/02/06/sstable-and-log-structured-storage-leveldb/). It's a storage layer that provides efficient random access for variable length data.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-29T20:46:25.450

The MIT-licensed serialization library **[Cap’n Proto](https://capnproto.org)** might provide the functionality you need. It was written by the main author of Google Protobuf **Kenton Varda**.

A [quote](https://github.com/real-logic/simple-binary-encoding/issues/131) from him: *Cap'n Proto uses pointers to support fully random access. This means you can do things like mmap() a giant file and pull out one inner object without actually processing the whole thing, or access sub-objects in a different order than they were written*

The data types you are mentioning (uint8, uint16, uint32, uint64, string) are all supported by the [Cap'n Proto Schema Language](https://capnproto.org/language.html)