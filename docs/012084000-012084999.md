# StackOverflow 问答 12084000-12084999

# android - 如何在构建时设置 strings.xml 值？

> ID：12084002
> 
> 赞同：1
> 
> 时间：2012-08-23T02:35:07.150
> 
> 标签：android, xml, ant

我正在使用 Ant 构建我的 Android 应用程序，并且想在构建时在我的 strings.xml 中设置一个值。例如，我可以使用

`<string name="app_name">MyApp-DEBUG</string>`

使用调试版本，或者我可以使用

`<string name="app_name">MyApp<string>`

用于发布版本。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T03:10:26.393

Ant 中有两个任务可以提供帮助：

首先是[<replace>](http://ant.apache.org/manual/Tasks/replace.html)。你给它一个包含可以被替换的参数的文件名，你给<replace>任务这些参数的值。它在文件中替换它们。我不喜欢这个任务，因为它用于替换受版本控制的东西，如果你不小心，你最终可能会毫无意义地更改文件。

设置.xml

```
<settings>
     <properties>
          <property name="server" value="@SERVER@"/>
     </properties>'
</settings> 
```

替换任务

```
 <replace file="settings.xml">
    <replacetoken token="@SERVER@"  value="google.com"/>
 </replace> 
```

我见过很多版本控制存储库，其中替换文件的修订版 #3 是使用替换参数意外签入文件（直到下一个版本没有更改参数时才意识到这一点）。然后版本 #4 是版本 #2 的副本，它具有替换参数。紧随其后的是错误的版本#5，然后是版本#6，它恢复了文件，等等。

我的首选方法是将文件复制到另一个目录，并在复制时使用[<filterset>/<filter>](http://ant.apache.org/manual/Types/filterset.html)标记更改文件：

```
 <copy todir="${target.dir}"
    file="settings.xml">
    <filterset>
        <filter token="SERVER" value="google"/>
    </filterset>
  </copy> 
```

两者都可以使用*属性文件*而不是指定单个标记。该`<copy>/<filterset>`对可以获取一*组*文件并一次替换一堆令牌。（注意不要将二进制文件传递给它！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-06T07:22:08.773

试试这个代码，它对我有用

```
<target name="app-name-debug">
    <replaceregexp file="res/values/strings.xml" match='name="app_name"(.*)'
        replace='name="app_name"&gt;MyApp-DEBUG&lt;\/string&gt;'/>
</target>
<target name="app-name-release">
    <replaceregexp file="res/values/strings.xml" match='name="app_name"(.*)'
        replace='name="app_name"&gt;MyApp&lt;\/string&gt;'/>
</target> 
```

# node.js - 预编译模板对非节点站点有用吗？

> ID：12084003
> 
> 赞同：2
> 
> 时间：2012-08-23T02:35:17.850
> 
> 标签：node.js, templates, precompiled-templates

我一直在研究预编译我的 _underscore 模板的方法，并且开始认为 99% 的预编译模板的人似乎都在运行 node.js。

这让我认为，也许预编译的目的只是为了在服务器而不是客户端上呈现模板。

这是真的？

在服务器上编译只会在客户端呈现的模板有什么好处吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T04:11:48.330

“真的只有有用”有点主观，你不觉得吗？如果你问预编译使用服务器端的模板是否比客户端更重要，通常是因为服务器必须每秒渲染数千次，所以很浪费每次渲染时都必须编译它们。

在客户端应用程序中，主要关注的是是否存在与渲染模板相关的任何用户明显的减速。通常没有，如果有，通常只有少数（可能是用于构建大型列表视图的部分模板）负责。因此，在大多数客户端应用程序中，预编译模板是一种过早优化的形式。

# apache-flex - 如何将数据从视图传递到 flex 中的标注组件（而不是相反）

> ID：12084005
> 
> 赞同：0
> 
> 时间：2012-08-23T02:35:32.480
> 
> 标签：apache-flex, view, callout

我有一个标注，我想从视图中获取将传递给标注的数据。我的标注不是内联的，它位于单独的 mxml 文件中。

例如，我的视图中有一个字符串，当我单击一个按钮时，我的标注将打开，视图中的字符串将显示在标注内。

我希望有人能帮帮忙。我的问题要大得多，但我认为通过这个简单的例子，我可以了解如何将对象从视图传递到标注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T03:38:11.043

如果您有标注的实例；只需设置一个变量。

在 CallOut 组件中，执行以下操作：

```
public var myValue : MyValueType; 
```

创建标注后，在您的视图中，您可以执行以下操作：

```
myCallout.myValue = theValueIWantToSendIn; 
```

# php - 关于使用正则表达式将 url 转换为链接

> ID：12084010
> 
> 赞同：0
> 
> 时间：2012-08-23T02:36:08.833
> 
> 标签：php, regex

我需要将文章中的url转换为3g域。

例如，我需要转换

> 这是链接：http://www.mydomain.com/index 谢谢

到

> 链接在这里：`<a href='http://3g.mydomain.com$4' target='_self'>http://3g.$3.com$4</a> thanks`

不要转换其他域，只转换 mydomain。这是代码：

```
$c = "/([^'\"=])?http:\/\/([^ ]+?)(mydomain)\.com([A-Za-z0-9&%\?=\/\-\._#]*)/";
$b=preg_replace($c, "$1<a href='http://3g.$3.com$4' target='_self'>http://3g.$3.com$4</a>",$b); 
```

它工作得很好，但如果文字是这样的：

```
<a href="http://www.mydomain.com/44" target="_blank" class="blue">a link</a> 
```

它将返回错误的结果，如下所示：

```
<a href="<a href='http://3g.mydomail.com/44' target='_self'>http://3g.mydomain.com/44</a>" target="_blank" class="blue">a link</a> 
```

但我需要结果

```
<a href="http://3g.mydomain.com/44" target="_blank" class="blue">a link</a> 
```

我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:15:08.077

您应该执行以下操作：

1.  从现有超链接中去除目标属性
2.  Rewrite hyperlinks in href attributes
3.  Rewrite any other hyperlinks

    $plain = "http://([^ ]+?)(mydomain)\.com(/?[^'\"\s]*(?=['\"\s]))";

    $plain_replace = "http://3g.$3.com$4";

    $in_href = "href=(['\"])" + plain + "(['\"])";

    $in_href_replace = "href='http://3g.$3.com$4' target='self'";

    $strip_target = "target=['\"][^'\"]*['\"]";

    ...

So:

1.  Replace $strip_target with ""

2.  Replace $in_href with $in_href_replace

3.  Replace $plain with $plain_replace

(The regexes are *tested to work* in C#, you might have to adjust the \ escaping to suit the php regex rules.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T02:58:14.527

摆脱`?`正则表达式中的第一个。这允许没有前面的字符。

或者，也许更符合您的意图，如果您想在开头允许 URL，您可以替换：

```
([^'\"=])? 
```

和：

```
(^|[^'\"=]) 
```

...如果在一开始就允许链接，或者如果前面没有引号等，但不是其他的。

# java - 访问 Java 中的公共类

> ID：12084012
> 
> 赞同：1
> 
> 时间：2012-08-23T02:36:20.777
> 
> 标签：java, inheritance, private-members

我有两个不同的类，它们与私有字段具有相同的类。这个私有字段需要从一个类传递到另一个类（或在另一个类中访问），但我不确定如何。

这是我正在尝试做的一个例子：

```
public class RealVector() {

    private double[] components;

     // Other fields and methods in here

    public double distance(RealVector vec) {
        // Some code in here
    }
}

public class Observation() {

    private RealVector attributes;

    // Other fields and methods in here
}

public class Neuron() {

    private RealVector weight;

    // Other fields and methods in here   

    public double distance(Observation obs) {
        return weight.distance(obs.attributes); // This is what I want to do, but it won't work, since attributes is private
    }   
} 
```

RealVector 的 distance 方法需要一个 RealVector 传递给它，但是 Neuron 的 distance 方法只有一个 Observation 传递给它，它包含一个作为私有字段的向量。我可以想到几个解决方法，但我不太喜欢它们。

1) 使 Observation 和 Neuron 扩展 RealVector 类。然后我什至不必编写距离函数，因为它只使用超类（RealVector）距离方法。我不太喜欢这个解决方案，因为 Observation 和 Neuron 与 RealVector 类有“有”关系，而不是“是”关系。

2) 在 Observation 类中有一个返回 RealVector 的方法。

```
public RealVector getAttributes() {
    return attributes;
} 
```

我不喜欢这种解决方案，因为它违背了将 RealVector 字段设为私有的目的。在这种情况下，我不妨公开属性。

我可以让它返回类中 RealVector 的（深层）副本。这种方法似乎效率低下，因为每次调用 getAttributes() 时都必须复制 RealVector（本质上是复制数组）。

3）使用接口。对接口做的不多，所以我不太确定它们在这里是否合适。

有谁知道我可以将属性保留为观察的私有成员并完成我希望在神经元的距离方法中做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T02:41:07.283

如果您的`Observer`班级有一个距离方法，`RealVector`那么您不需要公开 private `RealVector attributes`。

```
public class Observation {

    private RealVector attributes;

    public double distance(RealVector weight){
        return weight.distance(attributes);
    }
}

public class Neuron {

    private RealVector weight;

    public double distance(Observation obs) {
        return obs.distance(weight);
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T02:41:34.093

这样做的标准方法是保留字段`private`并创建`public` `getXXX()`和`setXXX()`方法。

关于

> 我不喜欢这种解决方案，因为它违背了将 RealVector 字段设为私有的目的。在这种情况下，我不妨公开属性。

您应该了解，仅公开公共 getter 不会损害该字段的私有属性，并且一个属性只有在不需要访问任何其他类时才是真正私有的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T02:42:12.870

一种可能的方法是`getter/setter`为您的类的私有变量引入方法。因此，例如，对于您的`Observation`课程，您可以将其修改如下：

```
public class Observation() {

    private RealVector attributes;

    public RealVector getAttributes(){
        return attributes;
    }

    public RealVector setAttributes(RealVector attributes){
        this.attributes = attributes;
    }

    // Other fields and methods in here
} 
```

**编辑**您的问题有以下关于`getter/setters`我错过的评论：

> 我不喜欢这种解决方案，因为它违背了将 RealVector 字段设为私有的目的。在这种情况下，我不妨公开属性。

如果您真的不想公开`RealVector`矢量场，我认为您可以做的就是为您的班级`getter/setter`中的个人提供方法。通过这种方式，您可以控制要从类中公开的内容。`attributes``RealVector``Observation`

# iphone - AVSynchronizedLayer 与 AVAssetExportSession 输出不匹配，为什么？

> ID：12084013
> 
> 赞同：0
> 
> 时间：2012-08-23T02:36:39.280
> 
> 标签：iphone, ios, avfoundation, avassetwriter, avcomposition

问题是这样的：我有一个 AVMutableVideoComposition，它有一个 titleLayer (CATextLayer)。

我想使用 AVPlayerLayer 和 AVSynchronizedLayer 向用户显示包含此标题的预览。我这样设置图层：

```
 - (CATextLayer*)buildTitleLayer {
    CATextLayer *titleLayer = [CATextLayer layer];
    // titleLayer.font = @"Helvetica";
    titleLayer.fontSize = 15.0;
    //?? titleLayer.shadowOpacity = 0.5;
    titleLayer.backgroundColor = [UIColor blackColor].CGColor;
    titleLayer.alignmentMode = kCAAlignmentCenter;
    titleLayer.frame = CGRectMake(0, 0, _videoSize.width, _videoSize.height / 6); //You may need to adjust this for proper display
    return  titleLayer;
} 
```

当我设置组合时，我这样做：

```
 [compositionVideoTrack setPreferredTransform:clipVideoTrack.preferredTransform]; 
```

一切都按预期运行，但有一个例外：

当我在 iPhone 模拟器中预览最终结果（视频+标题）时，我得到以下输出：

![注意视图顶部黑色背景上的 Hello Video Label](../Images/d230bd5f8fae1f4343e67aa7941ad1c3.png)

当我使用 AVAssetExportSession 渲染视频时，我得到了这个输出（所以视频标签在底部）：

![注意底部的 Hello Video 标签](../Images/2bb761f5ee4116bf5464ecd69d374758.png)

有谁知道诀​​窍是什么？我错过了什么/做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T03:08:48.140

答案可以在这里找到

[如何使用 AVAssetExportSession 在 AVMutableComposition 之上正确导出 CALayer](https://stackoverflow.com/questions/6749216/how-to-properly-export-calayer-on-top-of-avmutablecomposition-with-avassetexport "如何使用 AVAssetExportSession 在 AVMutableComposition 之上正确导出 CALayer")

# iphone - iOS Push Notification - 如何在单击应用程序图标而不是通知时获取通知数据

> ID：12084015
> 
> 赞同：36
> 
> 时间：2012-08-23T02:37:22.180
> 
> 标签：iphone, ios, xcode, push-notification, apple-push-notifications

与此问题类似：[如何在 applicationDidBecomeActive 上访问远程推送通知数据？](https://stackoverflow.com/questions/6732427/how-do-i-access-remote-push-notification-data-on-applicationdidbecomeactive)

`applicationDidBecomeActive`但不同的是，当您在其中以及**单击应用程序图标而不是推送通知**时，如何访问通知数据。

 **流程是：如果点击`push notification`则`didReceiveRemoteNotification`触发，但如果点击原app图标，只会`applicationDidBecomeActive`触发，`didReceiveRemoteNotification`不会被调用。

我正在寻找后一种情况，那么如何访问推送通知数据。

（这两种情况都假设应用程序处于后台并且尚未被杀死。）

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-23T02:55:57.090

您无法通过从主屏幕启动应用程序来获取远程推送有效负载。

如果推送数据对应用程序使用很重要，请在应用程序启动后从您的服务器加载。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T17:18:19.277

@fannheyward 的答案是绝对正确的。通过点击应用程序图标启动应用程序时，您无法获取有效负载。

我有一个想法，如果您通过点击应用程序图标来知道在应用程序启动时某些通知处于待处理状态，该怎么办。有了这些知识，您的应用程序就可以从您的服务器获取有效负载。

您可以在每个此类通知中设置“徽章”，并且在 applicationDidBecomeActive 上您可以检查 [application applicationIconBadgeNumber] > 0 以了解某些通知处于活动状态。从您的服务器获取有效负载后，您可以将其设置为 0，如下所示

```
[UIApplication sharedApplication] setApplicationIconBadgeNumber:1];
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:0]; 
```

请注意：这意味着当您的应用收到通知时，其上方会显示徽章。我不确定用户从设置中禁用徽章时的行为。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-23T09:20:28.770

如果您的应用程序目标超过 iOS7，则只有当应用程序在后台处于活动状态时才能执行此操作。

在 Xcode 的功能设置中，您应该启用背景模式>远程通知，并编写以下代码。

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo fetchCompletionHandler:(void (^)(UIBackgroundFetchResult))completionHandler
{ 
    // save userInfo in NSUserDefaults
    completionHandler( UIBackgroundFetchResultNoData );
} 
```

如果你想测试它，使用[https://github.com/acoomans/SimulatorRemoteNotifications会很有帮助](https://github.com/acoomans/SimulatorRemoteNotifications)

*   从服务器端，确保将 content-available 属性设置为 1

为此，我还必须检查后台获取框。

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2012-08-24T18:58:48.190

您应该在 appDelegate 的 launchWithOptions 方法中收到通知，如下所示：

```
NSDictionary *remoteNotif = [launchOptions objectForKey: UIApplicationLaunchOptionsRemoteNotificationKey];   

    if(remoteNotif != nil){  
        //Handle your notification   
    } 
```**

# windows-8 - Visual Studio Premium 是否包含 App Store API？

> ID：12084016
> 
> 赞同：0
> 
> 时间：2012-08-23T02:37:52.833
> 
> 标签：windows-8, microsoft-metro, visual-studio-2012

如果不清楚，请重新表述问题：

Express for Windows 8 是唯一用于设计 Metro 应用程序的软件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T03:00:14.933

所有版本的 Visual Studio 都支持 Windows 应用商店应用。我在键入此内容时正在使用 VS Ultimate 开发 Windows Store 应用程序。

# c# - 正则表达式后视断言问题

> ID：12084017
> 
> 赞同：0
> 
> 时间：2012-08-23T02:37:57.580
> 
> 标签：c#, .net, regex, lookbehind

这是我目前的正则表达式：

```
(?<=[\$T|\s|\p{P}|\$%\$%])sampleString 
```

我想匹配我的richtextBox 中的所有sampleString

我的richtextBox 中的一些示例字符串是这样的：

```
$TsampleString
$%$%sampleString 
```

问题是我的正则表达式匹配这个：TsampleString，$sampleString，%sampleString。

如何修复此正则表达式后视断言？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T03:51:45.637

您正在构建错误的正则表达式。您有一个字符类（用方括号表示），您只想在其中列出替代项。尝试：

```
(?<=\$T|\s|\p{P}|\$%\$%)sampleString 
```

编辑：等等，我刚刚测试过。你为什么用`\p{P}`？那是标点符号。 `%`将被匹配，等等。

编辑二：“sampleString 左侧的唯一字符是 $T 和 $%$%”

好的，这使它更简单：

```
(?<=\$T|\$%\$%)sampleString 
```

# html - 如何在 Intranet 上为 Mitel Unified Communicator Advanced 标记电话号码

> ID：12084019
> 
> 赞同：3
> 
> 时间：2012-08-23T02:38:30.220
> 
> 标签：html, phone-number, telephony, intranet, telecommunication

我正在使用 Mitel Unified Communicator Advanced 2.0 和用于 Internet Explorer 的 Mitel.DialBHO 插件。该插件尝试检测网页中的电话号码格式，然后覆盖点击拨号超链接。

我的问题是，我将如何在我们的 Intranet 上标记电话目录以明确告诉插件某物是电话号码？我们有内部使用的三位数分机号码，插件不会自动将这些号码检测为可拨号码。

我已经尝试了 and 的常用标记`<a href="callto:555">ext 555</a>`，`<a href="tel:555">ext 555</a>`但这些都没有达到预期的效果。`callto`尝试启动 NetMeeting，`tel`但没有注册程序，IE 显示错误。

**TL;博士：**

您如何制作超链接（或任何其他具有特殊属性的标签）告诉 Mitel UC Advanced 在单击时拨打号码？

**奖金问题**

让我感到震惊的是，Stack Exchange 可能有更好的地方来问这个问题。知道哪一个最好吗？

* * *

**更新**

所以我找到了我需要使用的格式`<a href="DialFromUC://{number}/">{number}</a>`，但它不接受 3 位数字。Unified Communicator 将打开，但说它收到“无效命令”。

向它发送一个完整的电话号码是可行的，但如果我将我们的互联网三位数号码转换为等效的外部号码，它会使用外线而不是内部路由。

有什么方法可以发送一个三位数的号码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T02:53:53.350

如果您想从 Mitel Unified Communicator 拨打内部号码，格式如下（其中 555 是您想要的分机号码）。

```
<a href="DialFromUC://ext.555/">Click here to dial me!</a> 
```

# c# - 用任务异步方法包装回调异步方法的陷阱？

> ID：12084021
> 
> 赞同：1
> 
> 时间：2012-08-23T02:38:45.677
> 
> 标签：c#, asynchronous, task-parallel-library, async-await, c#-5.0

我正在为我的 WPF 应用程序创建一个服务层，它将包装一个 Web API 客户端，该客户端使用`Action<T>`回调作为它的异步方法。因为无论如何我都需要包装这些方法，所以我正在考虑让我的服务层的包装方法符合新`Task`的基于 .NET 4.5 的异步模式，而不是公开`Action<T>`回调。

我目前没有迫切需要`Task`基于 -based 的异步，但我也没有任何理由必须保留回调，并且包装似乎很容易（如此[处](https://stackoverflow.com/questions/11879967/best-way-to-convert-callback-based-async-method-to-awaitable-task)所述）向后兼容性不是问题。也就是说，如果`Action<T>`对 Tasks 包装的此类回调有任何陷阱，我将保持现状。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T07:32:41.767

我没有看到这样做的任何陷阱，事实上它会打开您的应用程序以分配更灵活的场景。我建议您还考虑将一些“回调”场景转换为观察者模式（请参阅Microsoft 的[Reactive Extensions](http://bit.ly/Q1Ni0q)项目），当与基于任务的模式结合使用时，它更加强大和灵活。当然，您将能够在 C# 5.0 中使用新的基于任务的新模式和新的异步/等待模式！

希望能帮助到你。

# java - 使用已解析的 Java DOM XML 中的元素添加新元素

> ID：12084023
> 
> 赞同：0
> 
> 时间：2012-08-23T02:39:07.457
> 
> 标签：java, xml, dom

好的，所以我正在开发一个程序，该程序计算一些东西，然后获取该数据并将其添加到同一目录中的现有 XML 文件中。我已经使用 DocumentBuilder 来解析文件，现在需要（至少这是我认为我需要做的，请纠正我我错了）从解析的文件中获取一个元素并将另一个元素附加到它。

这是到目前为止的代码导入的包：

```
import java.applet.*;
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import java.text.*;
import org.w3c.dom.*;
import javax.xml.parsers.*;
import javax.xml.transform.*;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamSource; 
```

以及实际解析和编辑 XML 文件的函数：

```
public void saveIt(){
        DocumentBuilder bd = DocumentBuilderFactory.newInstance().newDocumentBuilder();
        Document doc = bd.parse("excersize.xml");
        Element root = doc.getElementsByTagName("root");
        Element today = doc.createElement(today);
        root.appendChild(today);
    } 
```

当我尝试编译此代码时，这里是我得到的错误（仅供参考，这是一个定制的 cmd）：

```
Good Luck Sir: javac excersize.java
excersize.java:240: error: incompatible types
                Element root = doc.getElementsByTagName("root");
                                                       ^
  required: Element
  found:    NodeList
excersize.java:241: error: method createElement in interface Document cannot be
applied to given types;
                Element today = doc.createElement(today);
                                   ^
  required: String
  found: Element
  reason: actual argument Element cannot be converted to String by method invoca
tion conversion
2 errors 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T02:46:17.560

方法`doc.getElementsByTagName("root")`返回`NodeList`所以改变它，

```
Element root = doc.getDocumentElement(); 
```

# ubuntu - 重启 Upstart 实例进程

> ID：12084025
> 
> 赞同：30
> 
> 时间：2012-08-23T02:39:36.647
> 
> 标签：ubuntu, upstart

我正在运行此答案中描述的多个工作人员实例：[自动启动多个新贵实例](https://stackoverflow.com/questions/8681974/starting-multiple-upstart-instances-automatically)

**问题：我可以一次重新启动所有实例吗？**

要开始我的工人，我可以这样做：

> initctl 启动我的工人

然后允许我这样做：

> initctl status worker N=1 worker (1) 启动/运行，进程 551
> 
> initctl status worker N=2 worker (2) 启动/运行，进程 552

有没有办法做这样的事情：

> initctl 重启我的工人

我希望能够重新启动所有实例，而不必知道有多少正在运行。

这是我的 my-workers.conf

```
start on stopped cloud-init
stop on shutdown

env NUM_WORKERS=4

script
  for i in `seq 1 $NUM_WORKERS`
    do
      start worker N=$i
    done
end script 
```

和worker.conf

```
stop on shutdown

chdir /path/to/current

respawn

instance $N

script
  exec su -c "/home/worker/.rvm/bin/rvm-shell -c 'bundle exec rake work 2>&1 >> /var/log/worker-$N.log'" worker
end script 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-07T17:33:18.547

在`worker.conf`你只需要改变这一行：

```
stop on shutdown 
```

到：

```
stop on stopping my-workers 
```

并`my-workers.conf`改为使用`pre-start`，而不是`script`：

```
pre-start script
  for i in `seq 1 $NUM_WORKERS`
  do
    start worker N=$i
  done
end script 
```

现在`my-workers`将保持状态：由于工作发生在`pre-start`，`my-workers`主进程将不存在，因此不会退出。 `stop on stopping my-workers`导致工人在停止时`my-workers`停止。当然，当它再次启动时，它会再次启动工人。

（仅供参考，`stop on shutdown`什么都不做，因为`shutdown`它不是系统事件。`man upstart-events`对于所有定义的事件）所以你也应该将 my-workers 更改为`stop on runlevel [06]`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-21T14:31:05.600

我用上面的例子和 SpamapS 的答案试了一下，我收到了：

```
init: my-workers pre-start process (22955) terminated with status 127 
```

在`/var/log/upstart/my-workers.log`我发现问题：

```
/proc/self/fd/9: 6: /proc/self/fd/9: end: not found 
```

中的`end`for 循环`my-workers.conf`似乎是错误的语法。我换了

```
script
  for i in `seq 1 $NUM_WORKERS`
    do
      start worker N=$i
    done
  end
end script 
```

和

```
script
  for i in `seq 1 $NUM_WORKERS`
  do
    start worker N=$i
  done
end script 
```

它奏效了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T22:30:30.537

考虑在 worker.conf 中再添加一个事件：

```
stop on shutdown or workers-stop 
```

然后你可以从命令行调用

```
sudo initctl emit workers-stop 
```

您可以添加类似的事件来启动工作人员。为了实现重新启动所有工作人员，请创建一个将发出工作人员停止然后工作人员开始事件的任务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-09T09:14:15.320

本质上，您需要有一个流程来为您的所有组合执行`stop`许多命令`start`。`N=1``N=2`

一个简单的方法是在一个节中使用几个 bash`for`循环。`exec script`但是，如果进程需要一些时间才能停止（例如，因为它们正在处理某事并且在`SIGTERM`处理完当前工作后他们正在接受），那么这是低效的，因为您必须等待一个停止才能将信号发送到下一个。

因此，我构建了一个 Upstart 脚本，在[https://github.com/elifesciences/builder-base-formula/blob/master/elife/config/etc-init-multiple-processes-parallel.conf上并行停止它们](https://github.com/elifesciences/builder-base-formula/blob/master/elife/config/etc-init-multiple-processes-parallel.conf)

该脚本由 Salt 编译，使用进程名称与进程名称的映射作为输入。这是一个示例结果：

```
description "(Re)starts all instances, in parallel"
# http://upstart.ubuntu.com/cookbook/#start-on
start on (local-filesystems and net-device-up IFACE!=lo)
task
script
    timeout=300
    echo "--------"

    echo "Current status of 5 elife-bot-worker processes"
    echo "Now is" $(date -Iseconds)
    for i in `seq 1 5`
    do
        status elife-bot-worker ID=$i || true
    done
    echo "Stopping asynchronously 5 elife-bot-worker processes"
    echo "Now is" $(date -Iseconds)
    for i in `seq 1 5`
    do
        (stop elife-bot-worker ID=$i &) || true
    done

    for i in `seq 1 5`
    do
        echo "Waiting for elife-bot-worker $i to stop"
        echo "Now is" $(date -Iseconds)
        counter=0
        while true
        do
            if [ "$counter" -gt "$timeout" ]
            then
                echo "It shouldn't take more than $timeout seconds to kill all the elife-bot-worker processes"
                exit 1
            fi
            status elife-bot-worker ID=$i 2>&1 | grep "Unknown instance" && break
            sleep 1
            counter=$((counter + 1))
        done
    done
    echo "Stopped all elife-bot-worker processes"

    echo "Starting 5 elife-bot-worker processes"
    for i in `seq 1 5`
    do
        start elife-bot-worker ID=$i
    done
    echo "Started 5 elife-bot-worker processes"

end script 
```

# jquery - fyneworks 多文件上传 - 上传选择后添加描述文本框

> ID：12084032
> 
> 赞同：0
> 
> 时间：2012-08-23T02:40:52.900
> 
> 标签：jquery, asp.net, jquery-plugins

我正在使用 fyneworks 多文件上传工具 ( [http://www.fyneworks.com/jquery/multiple-file-upload/](http://www.fyneworks.com/jquery/multiple-file-upload/) ) 在 ASP.NET 中选择要上传的多个文件。它按预期工作.. 但我的要求是，在我选择要上传的内容后，我需要在旁边的列表中显示一个文本框以添加有关上传的描述.. 我该怎么做？

这是我能做的图像![](../Images/ae604c45a6f61edf0d7baee7b76e2070.png)

我需要的是每个列表后的文本框。即 1.png 2.png 等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T03:56:09.653

这只是一个用于添加文件的 jQuery 插件。它在服务器端没有帮助。

您可以修改插件为每个文件添加一个文本区域。在 jQuery 中识别行级类并附加一个 textarea 非常简单。

您将面临的主要问题是在您的 asp.net 代码中接收这些数据。您将不得不根据文件的数量动态创建控件（TextBoxes 可以工作）。

# python - Scrapy 无法正确解析某些 html 文件

> ID：12084033
> 
> 赞同：2
> 
> 时间：2012-08-23T02:40:53.000
> 
> 标签：python, scrapy

我已经使用**Scrapy**几个星期了，最近，我发现**HtmlXPathSelector**无法正确解析一些 html 文件。

在网页[http://detail.zol.com.cn/series/268/10227_1.html](http://detail.zol.com.cn/series/268/10227_1.html)中，只有一个标签名为

```
`div id='param-more' class='mod_param  '`. 
```

当我使用 xpath **"//div[@id='param-more']"**选择标签时，它返回**[]**。

我试过**scrapy shell**并得到了相同的结果。

在使用**wget**检索网页时，我也可以在html源文件中找到标签**“div id='param-more'class='mod_param'”**，我认为这不是标签显示的原因引起的触发一个动作。

请给我一些有关如何解决此问题的提示。

以下是有关该问题的代码片段。处理上述url时，**len(nodes_product)**始终**为0**

```
def parse_series(self, response):
    hxs = HtmlXPathSelector(response)

    xpath_product = "//div[@id='param-normal']/table//td[@class='name']/a | "\
                    "//div[@id='param-more']/table//td[@class='name']/a"
    nodes_product = hxs.select(xpath_product)
    if len(nodes_product) == 0:
        # there's only the title, no other products in the series
        .......
    else:
        ....... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T05:24:47.657

这似乎是 XPathSelectors 的一个错误。我创建了一个快速测试蜘蛛并遇到了同样的问题。我认为这与页面上的非标准字符有关。

我不认为问题在于“param-more”div 与任何 javascript 事件或 CSS 隐藏相关联。我禁用了 javascript 并更改了我的用户代理（和位置）以查看这是否影响了页面上的数据。它没有。

但是，我能够使用 beautifulsoup 解析“param-more”div：

```
from scrapy.selector import HtmlXPathSelector
from scrapy.spider import BaseSpider
from bs4 import BeautifulSoup

class TestSpider(BaseSpider):
    name = "Test"

    start_urls = [
        "http://detail.zol.com.cn/series/268/10227_1.html"
                 ]

    def parse(self, response):
        hxs = HtmlXPathSelector(response)

        #data = hxs.select("//div[@id='param-more']").extract()

        data = response.body
        soup = BeautifulSoup(data)
        print soup.find(id='param-more') 
```

其他人可能更了解 XPathSelect 问题，但暂时可以将 beautifulsoup 找到的 HTML 保存到一个 item 中，并将其传递到管道中。

这是最新的 beautifulsoup 版本的链接：[http ://www.crummy.com/software/BeautifulSoup/#Download](http://www.crummy.com/software/BeautifulSoup/#Download)

**更新**

我相信我找到了具体问题。正在讨论的网页在元标记中指定它使用[GB 2312 字符集](http://en.wikipedia.org/wiki/GB_2312)。从 GB 2312 到 unicode 的转换是有问题的，因为有些字符没有[对应的 unicode](http://www.cs.nyu.edu/~yusuke/tools/unicode_to_gb2312_or_gbk_table.html)。这不是问题，除了beautifulsoup 的编码检测模块UnicodeDammit 实际上将编码确定为ISO 8859-2。问题是 lxml 通过查看[header 的 meta 标记中指定的字符集](http://lxml.de/parsing.html)来确定文档的编码。因此，lxml 和 scrapy 感知的编码类型不匹配。

以下代码演示了上述问题，并提供了一种替代方案，无需依赖 BS4 库：

```
from scrapy.selector import HtmlXPathSelector
from scrapy.spider import BaseSpider
from bs4 import BeautifulSoup
import chardet

class TestSpider(BaseSpider):
    name = "Test"

    start_urls = [
        "http://detail.zol.com.cn/series/268/10227_1.html"
                 ]

    def parse(self, response):

        encoding = chardet.detect(response.body)['encoding']
        if encoding != 'utf-8':
            response.body = response.body.decode(encoding, 'replace').encode('utf-8')

        hxs = HtmlXPathSelector(response)
        data = hxs.select("//div[@id='param-more']").extract()
        #print encoding
        print data 
```

在这里，您会看到，通过强制 lxml 使用 utf-8 编码，它不会尝试从它所认为的 GB 2312->utf-8 进行映射。

在 scrapy 中，HTMLXPathSelectors 编码是在 scrapy/select/lxmlsel.py 模块中设置的。该模块使用 response.encoding 属性将响应正文传递给 lxml 解析器，该属性最终设置在 scrapy/http/response/test.py 模块中。

处理设置 response.encoding 属性的代码如下：

```
@property
def encoding(self):
    return self._get_encoding(infer=True)

def _get_encoding(self, infer=False):
    enc = self._declared_encoding()
    if enc and not encoding_exists(enc):
        enc = None
    if not enc and infer:
        enc = self._body_inferred_encoding()
    if not enc:
        enc = self._DEFAULT_ENCODING
    return resolve_encoding(enc)

def _declared_encoding(self):
    return self._encoding or self._headers_encoding() \
        or self._body_declared_encoding() 
```

这里要注意的重要一点是，_headers_encoding 和 _encoding 最终都将反映在标头中元标记中声明的编码，而不是实际使用 UnicodeDammit 或 chardet 之类的东西来确定文档编码。因此，会出现文档包含对其指定的编码无效的字符的情况，我相信 Scrapy 会忽略这一点，最终导致我们今天看到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T21:00:47.493

```
'mod_param ' != 'mod_param' 
```

该类不**等于**“mod_param”，但它确实**包含**“mod_param”，注意末尾有一个空格：

```
stav@maia:~$ scrapy shell http://detail.zol.com.cn/series/268/10227_1.html
2012-08-23 09:17:28-0500 [scrapy] INFO: Scrapy 0.15.1 started (bot: scrapybot)
Python 2.7.3 (default, Aug  1 2012, 05:14:39)
IPython 0.12.1 -- An enhanced Interactive Python.

In [1]: hxs.select("//div[@class='mod_param']")
Out[1]: []

In [2]: hxs.select("//div[contains(@class,'mod_param')]")
Out[2]: [<HtmlXPathSelector xpath="//div[contains(@class,'mod_param')]" data=u'<div id="param-more" class="mod_param  "'>]

In [3]: len(hxs.select("//div[contains(@class,'mod_param')]").extract())
Out[3]: 1

In [4]: len(hxs.select("//div[contains(@class,'mod_param')]").extract()[0])
Out[4]: 5372 
```

# android - 如何关闭内容提供者？

> ID：12084035
> 
> 赞同：1
> 
> 时间：2012-08-23T02:40:55.083
> 
> 标签：android, android-contentprovider

我想终止我的自定义内容提供程序的当前实例。我希望我的内容提供者在我的应用程序注销时终止。在随后的 URI 触发器中，我希望我的内容提供者通过调用 onCreate() 重新实例化自己。

你知道怎么做吗？

谢谢

# msmq - 如何从 OSB 读取 MSMQ

> ID：12084036
> 
> 赞同：0
> 
> 时间：2012-08-23T02:41:00.917
> 
> 标签：msmq, osb

我需要创建一个将从 MSMQ（Microsoft 消息队列）侦听的代理服务。我可以知道我应该使用什么传输协议/适配器来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T22:45:34.073

那是 Oracle 服务总线吗？您需要一个 MSMQ 适配器 - MSMQ 使用它自己的传输协议（加上 HTTP/S 和 RPC）。看起来 OSB 只有一个 Websphere MQ 适配器。

# php - 如何从具有特殊条件的数据库中获取数组中的数据

> ID：12084037
> 
> 赞同：0
> 
> 时间：2012-08-23T02:41:00.840
> 
> 标签：php

我有以下数组示例。URL 正在从数据库中获取，但数据格式应为规定格式的当前日期和时间。

**示例数组**

```
$array = array(

array('permalink' => 'http://www.myweb.com/someurl1', 
'updated' => '2012-08-11T04:08:53+01:00'),

array('permalink' => 'http://www.myweb.com/someurl2', 
'updated' => '2012-09-11T04:08:53+01:00')); 
```

感谢您的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T02:44:35.523

您可以使用 mysql 使用 DATE_FORMAT() 更改您的 SQL 语句。

[http://www.w3schools.com/sql/func_date_format.asp](http://www.w3schools.com/sql/func_date_format.asp)

如果您想从 PHP 中执行此操作，请将您的字符串转换为日期然后格式化。前任 ：

```
$date = date("Y-m-d",strtotime($date_in_string_format)); 
```

[http://php.net/manual/en/datetime.formats.date.php](http://php.net/manual/en/datetime.formats.date.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T02:48:19.603

利用

```
$updated = date('Y-m-d\TH:i:sO'); 
```

# c++ - decltype 与自动

> ID：12084040
> 
> 赞同：63
> 
> 时间：2012-08-23T02:41:24.987
> 
> 标签：c++, type-inference

据我了解，两者都`decltype`将`auto`尝试找出事物的类型。

如果我们定义：

```
int foo () {
    return 34;
} 
```

那么这两个声明都是合法的：

```
auto x = foo();
cout << x << endl;

decltype(foo()) y = 13;
cout << y << endl; 
```

你能告诉我`decltype`和之间的主要区别`auto`是什么吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-23T02:53:25.497

`decltype`给出传递给它的表达式的*声明类型.* `auto`做与模板类型推导相同的事情。因此，例如，如果您有一个返回引用的函数，它`auto`仍然是一个值（您需要`auto&`获取一个引用），但`decltype`将是返回值的类型。

```
#include <iostream>
int global{};
int& foo()
{
   return global;
}

int main()
{
    decltype(foo()) a = foo(); //a is an `int&`
    auto b = foo(); //b is an `int`
    b = 2;

    std::cout << "a: " << a << '\n'; //prints "a: 0"
    std::cout << "b: " << b << '\n'; //prints "b: 2"

    std::cout << "---\n";
    decltype(foo()) c = foo(); //c is an `int&`
    c = 10;

    std::cout << "a: " << a << '\n'; //prints "a: 10"
    std::cout << "b: " << b << '\n'; //prints "b: 2"
    std::cout << "c: " << c << '\n'; //prints "c: 10"
 } 
```

另请参阅 David Rodríguez 的回答，其中只有一个`auto`或`decltype`是可能的。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-08-23T02:55:18.137

`auto`（在它推断类型的上下文中）仅限于定义具有初始化程序的变量的类型。`decltype`是一个更广泛的构造，以额外信息为代价，将推断表达式的类型。

在`auto`可以使用的情况下，它比 更简洁`decltype`，因为您不需要提供从中推断类型的表达式。

```
auto x = foo();                           // more concise than `decltype(foo()) x`
std::vector<decltype(foo())> v{ foo() };  // cannot use `auto` 
```

当对函数使用尾随返回类型时，该关键字`auto`也用于完全不相关的上下文中：

```
auto foo() -> int; 
```

只有`auto`一个领导者，以便编译器知道这是一个带有尾随返回类型的声明。虽然上面的示例可以轻松转换为旧样式，但在泛型编程中它很有用：

```
template <typename T, typename U>
auto sum( T t, U u ) -> decltype(t+u) 
```

请注意，在这种情况下，`auto`不能用于定义返回类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-30T03:21:16.007

修改@Mankarse 的示例代码，我认为一个更好的自爆：

```
#include <iostream>
int global = 0;
int& foo()
{
   return global;
}

int main()
{
    decltype(foo()) a = foo(); //a is an `int&`
    auto b = foo(); //b is an `int`
    b = 2;

    std::cout << "a: " << a << '\n'; //prints "a: 0"
    std::cout << "b: " << b << '\n'; //prints "b: 2"
    std::cout << "global: " << global << '\n'; //prints "global: 0"

    std::cout << "---\n";

    //a is an `int&`
    a = 10;

    std::cout << "a: " << a << '\n'; //prints "a: 10"
    std::cout << "b: " << b << '\n'; //prints "b: 2"
    std::cout << "global: " << global << '\n'; //prints "global: 10"

    return 0;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-29T09:45:02.047

> 我认为 auto 是一个纯粹的简化功能，而 decltype 的主要目的是在基础库中启用复杂的元编程。然而，从语言技术的使用角度来看，它们之间的关系非常密切。

从[HOPL20](https://www.stroustrup.com/hopl20main-p5-p-bfc9cd4--final.pdf) 4.2.1 开始，Bjarne Stroustrup。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-07T12:13:42.937

通常，如果您需要初始化变量的类型，请使用***auto***。当您需要非变量的类型（如返回类型）时，最好使用***decltype 。***

# xml - 在go中遍历xml

> ID：12084042
> 
> 赞同：4
> 
> 时间：2012-08-23T02:41:28.637
> 
> 标签：xml, struct, go, xml-parsing

给定一个类似于以下的 xml 块：

```
<data>
  <entry>
    ... several nested elements
  </entry>
  <entry>
    ... more nested elements
  </entry>
</data> 
```

如何遍历`<entry>`文档中的每个元素并将其放入一个结构中以在移动到下一个条目之前对其执行一些操作？

如上所述，我已经能够将数据从 XML 块解析并存储到结构中，其中只有一个`<entry>`元素存在。也就是说，我成功地将这样的内容存储到结构中：

```
<entry>
  ... several nested elements
</entry> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T04:20:50.017

解析一个 xmll 文件直到您到达入口元素是一种方法：

```
xmlFile, err := os.Open(filename)
    if err != nil {
    log.Fatal(err)
}
defer xmlFile.Close()
decoder := xml.NewDecoder(xmlFile)
total := 0
for {
    token, _ := decoder.Token()
    if token == nil {
        break
    }
    switch startElement := token.(type) {
        case xml.StartElement:
        if startElement.Name.Local == "entry" {
            // do what you need to do for each entry below
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-25T06:41:07.453

[根据http://golang.org/pkg/encoding/xml/](http://golang.org/pkg/encoding/xml/)中的文档和示例，这是我的做法

```
package main

import (
    "encoding/xml"
    "log"
)

// Represents a <data> element
type Data struct {
    XMLName xml.Name `xml:"data"`
    Entry   []Entry  `xml:"entry"`
}

// Represents an <entry> element
type Entry struct {
    Name string `xml:"name"`
    Age  int    `xml:"age"`
}

// Test data
var testXML string = `
<data>
    <entry>
        <name>John Doe</name>
        <age>28</age>
    </entry>
    <entry>
        <name>Jane Doe</name>
        <age>29</age>
    </entry>
    <entry>
        <name>Bob Doe</name>
        <age>30</age>
    </entry>
    <entry>
        <name>Beth Doe</name>
        <age>31</age>
    </entry>
</data>
`

func main() {

    data := &Data{}

    err := xml.Unmarshal([]byte(testXML), data)
    if err != nil {
        log.Fatal(err)
    }

    for i := 0; i < len(data.Entry); i++ {
        log.Printf("%#v", data.Entry[i])
    }
} 
```

输出是：

```
main.Entry{Name:"John Doe", Age:28}
main.Entry{Name:"Jane Doe", Age:29}
main.Entry{Name:"Bob Doe", Age:30}
main.Entry{Name:"Beth Doe", Age:31} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-19T16:40:01.893

只要确保你正确处理 EOF

```
for {
    // Read tokens from the XML document in a stream.
    t, err := decoder.Token()
    if t == nil {
        if err == nil {
            continue
        }
        if err == io.EOF {
            break
        }
        log.Fatal(err)
    }

    //...
} 
```

# c++ - 如何在不丢失 alpha 通道的情况下使用 CImg 库打开 PNG？

> ID：12084048
> 
> 赞同：2
> 
> 时间：2012-08-23T02:42:17.270
> 
> 标签：c++, png, alpha, cimg

当我打开 png 文件时：

```
CImg<unsigned char> image("image.png"); 
```

...我希望得到 4 通道 (RGBA) 图像。但我总是得到 3 通道 (RGB) 图像（即使图像是半透明的）： image.spectrum() 返回 3 而不是 4。

在我的应用程序中，当我打开 PNG 文件时，我总是需要获得 4 个通道。CImg 看起来像一个流行的库，具有许多有用的功能（其中一些可能在我的图像处理应用程序中将来有用），所以我很难相信用 alpha 通道打开 PNG 文件而不丢失它是不可能的。有什么建议么？

如果 CImg 不是处理 PNG 文件的好工具，请随意推荐一些其他简单易用的库。此刻对我来说唯一重要的是能够将 PNG 读写为 4 通道无符号字符图像，并具有获取图像尺寸和数据的功能（如 image.width() 或 image.data() ）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T07:54:53.767

CImg 是一个非常好的库，可以处理 .png 文件（包括 4 通道）。对于 CImg 对 png 文件的原生支持，您需要将代码与 libpng 库链接，否则 CImg 将使用对 ImageMagick 的转换工具的外部调用来读取 .png 文件。要在 CImg 中启用完整的 .png 支持，只需使用定义的“cimg_use_png”宏编译您的代码，并将其与 libpng 链接，您就完成了：

```
g++ -o foo foo.cpp -Dcimg_use_png -lpng -lz -lX11 -lpthread 
```

我发现 CImg 是对 .png 和 .tiff 文件支持最完整的库之一，您只需定义一些配置标志以允许它使用正确的库。默认情况下，CImg 配置为使用最少的库集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:09:46.107

对另一个库的建议（我已经使用过并且 imo 很容易）：[http ://www.imagemagick.org/script/api.php#c](http://www.imagemagick.org/script/api.php#c)

# outlook - 附件上的 Outlook 2010 加载项上下文菜单

> ID：12084049
> 
> 赞同：1
> 
> 时间：2012-08-23T02:42:26.850
> 
> 标签：outlook, vsto, outlook-addin

我正在用 C# 进行开发 - Outlook 插件。

我想修改附件的上下文菜单。换句话说，每个附件都有一个右键菜单。

我不想要邮件项目。我想要邮件项目 > 项目（附件）

我期待一个答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T02:54:26.727

您使用的是 Outlook 2007 吗？单击附件右键单击时会引发一个事件：

`Application.AttachmentContextMenuDisplay`

你可以使用它。

# drupal-7 - 如何将我自己的自定义内容添加到 drupal 7 区域？

> ID：12084050
> 
> 赞同：2
> 
> 时间：2012-08-23T02:42:31.097
> 
> 标签：drupal-7, drupal-theming

如果我想更改 $page['footer'] 的页脚内容，我应该在哪里更改？我不是在谈论弄乱 .info 文件。不知道为什么这么难找！

编辑：如果我在 page.tpl.php 文件中并且我执行“打印渲染（$page['footer']）”，我如何将 $page['footer'] 变量中的内容配置为我的任何 html想？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:20:09.747

您真的应该阅读一些基本[文档](http://drupal.org/documentation)。页脚是 Drupal 的“区域”。区域填充有块。

> [block #](http://drupal.org/glossary#block)在Drupal 网站的[区域](http://drupal.org/glossary#region)
> 中 可见的框。大多数块（例如，最近的论坛主题）是由各种 Drupal 模块即时生成的，但它们可以在 Drupal 站点的管理块区域中创建。[有关块的更多信息，](http://drupal.org/documentation/blocks)请参阅文档。
> 
> [region #](http://drupal.org/glossary#region)
> 可以放置内容的页面的定义区域。基本区域包括：页眉、页脚、内容、左侧边栏、右侧边栏。不同的主题可以[定义不同的区域](http://drupal.org/node/171224)，因此每个站点的选项通常不同。内容通过[块](http://drupal.org/glossary#block)分配给区域。它们可以在区域内按[重量](http://drupal.org/glossary#weight)排序，以定义它们的显示顺序。

如果您想向页脚添加特殊的静态内容（例如，版权声明、管理员电子邮件），您可以通过访问主页 » 管理 » 结构 » 块 (/admin/structure/block) 并单击“添加块”来创建自定义块（/管理/结构/块/添加）。

如果要在页脚中显示节点的内容，您可能需要使用[Node Blocks](http://drupal.org/project/nodeblock)。如果要显示多个节点的内容，可能需要使用[Views](http://drupal.org/project/views)。

# python - 跨模型类过滤

> ID：12084054
> 
> 赞同：0
> 
> 时间：2012-08-23T02:43:59.000
> 
> 标签：python, google-app-engine

我有以下模型，其中不同的文本被标记到不同的文本集合中，每个文本可以有多个版本，但只有一个“活动”版本：

```
class Collection(db.Model):
    name = db.StringProperty()
    ...       

class Text(db.Model):
    title = db.StringProperty(default="Untitled")
    ...

class Version(db.Model):
    text = db.ReferenceProperty(Text, collection_name="versions")
    content = db.TextProperty()
    active = db.BooleanProperty(default=True)
    ...

class Tag(db.Model):
    collection = db.ReferenceProperty(Collection, collection_name="c_tags")
    text = db.ReferenceProperty(Text, collection_name="t_tags") 
```

现在我想在一个集合中显示所有“活动”文本：

```
class ViewCollection(webapp.RequestHandler):
    def(get):
        collection = Collection.get(self.request.get("key"))
        # grabs the collection to display
        tags = collection.t_tags
        # grabs all the tags linking a text and a collection
        texts = [t.text for t in tags] 
```

这将为我提供所有文本的列表，因此我可以轻松打印所有文本标题`t.title for t in texts`（

或者这种跨不同模型类的过滤是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:38:25.777

App Engine 的 Datastore 不是为此类关系代数问题而设计的。我不相信您当前的设计可以有效地完成。我建议您阅读 NoSQL 数据库概念并重新设计您的模型以“减少相关性”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:09:05.337

您必须对文本 == t.text 和活动 == True 的版本对象发出另一个查询。

根据您的用例，在标签中进行非规范化和存储最新版本可能是值得的，因此您不需要额外的查询来获取数据。这种非规范化是 nosql 数据存储的常见“优化”。

# awk - 使用 awk 分割、分割和打印剩余的行

> ID：12084056
> 
> 赞同：2
> 
> 时间：2012-08-23T02:44:26.927
> 
> 标签：awk

我在使用 awk 转换我的源文件时遇到了一些困难。具体来说，我想从顶行中减去每一行，将该数字除以 200，然后打印该行的其余部分。示例输入：

```
1000 : A0B0 add  %g1, %o1, %o2
2000 : A0B0 sub  %o1, %o2, %o2
3600 : A0B0 mov  %icc, 1, %o1
4000 : A0B0 add  %g4, %g4, %g4 
```

输出：

```
0 : A0B0 add  %g1, %o1, %o2
5 : A0B0 sub  %o1, %o2, %o2
13 : A0B0 mov  %icc, 1, %o1
15 : A0B0 add  %g4, %g4, %g4 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T02:51:21.277

此命令已更新以截断数字结果（根据评论请求）：

```
awk 'NR==1{top_line=$1} {$1=int(($1-top_line)/200); print $0}' data.txt 
```

将产生：

```
0 : A0B0 add %g1, %o1, %o2
5 : A0B0 sub %o1, %o2, %o2
13 : A0B0 mov %icc, 1, %o1
15 : A0B0 add %g4, %g4, %g4 
```

其中`data.txt`包含：

```
1000 : A0B0 add  %g1, %o1, %o2
2000 : A0B0 sub  %o1, %o2, %o2
3600 : A0B0 mov  %icc, 1, %o1
4000 : A0B0 add  %g4, %g4, %g4 
```

# joomla - 在 Joomla 中创建自定义文章模板！1.5

> ID：12084058
> 
> 赞同：1
> 
> 时间：2012-08-23T02:44:35.410
> 
> 标签：joomla, joomla1.5

所以现在我管理着一个大约 30 人的员工，他们在一个基于 Joomla 1.5 的学校网站上工作。我正在尝试使我们所有关于我们运动队的 Joomla 文章都遵循相同的通用模板（[示例](http://pvphs.com/index.php?option=com_content&view=article&id=768&Itemid=81)）。现在，我只是让每个人都单独做，这显然会导致很多不一致。理想情况下，我想用一个表单（在后端）替换该部分中的文章，该表单仅包含各种信息（团队名称、时间表、名册、教练等）的输入字段，然后使用模板上的模板显示它前端。我发现的壁橱里的东西是[Content Templater](http://www.nonumber.nl/extensions/contenttemplater)，但我想知道是否有更好的方法。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:34:05.130

除了使用 joomla 的核心文章系统，您可以尝试使用非常流行的 joomla 扩展 K2 [http://getk2.org/](http://getk2.org/)

它具有 joomla 内容系统中可用的所有功能。除此之外，您还可以创建自定义字段。

在您的情况下，只需创建一个类别运动队，创建一个额外的字段组，其中包含团队名称、时间表、花名册、教练等文件，并在创建类别时选择此字段组。

现在，该类别中的所有项目都将显示这些自定义字段，您可以在其中输入数据。

它还提供了一个很棒的模板系统，以便您可以为不同的类别创建不同的布局。见这里[http://getk2.org/documentation/tutorials/item/174-templating-with-k2-and-the-concepts-of-sub-templates](http://getk2.org/documentation/tutorials/item/174-templating-with-k2-and-the-concepts-of-sub-templates)

# ruby-on-rails - Kaminari 路由错误

> ID：12084060
> 
> 赞同：0
> 
> 时间：2012-08-23T02:44:43.860
> 
> 标签：ruby-on-rails, kaminari

我有 2 个模型文档和类别。

关系是：

*   一个文档属于一个类别。

*   一个类别有许多文档。

我想对所有文档和特定类别的文档进行分页。这是我在 routes.rb 中使用 kaminari 自述文件所做的（嗯，我还不是 Rails 专家）

```
 resources :docs do
     get 'page/:page', :action => :index, :on => :collection
   end
   match '/doc/',                   to: 'Docs#index',     :as => :docs

   resources :category_docs do
     get 'page/:page', :action => :category, :on => :collection
   end
   match '/doc/category/:category', to: 'Docs#category',  :as => :docs_category 
```

所有文档的分页工作正常，但在我看来，类别分页在这一行给出了 RoutingError

```
 <%= paginate @category_docs, :left => 2, :right => 2 %> 
```

这是文档控制器

```
 def category
     @title = "Title"
     category = nil
     if params[:category] == "a"
       category = Category.find_by_title( "aa" )
     # code omitted
     elsif params[:category] == "e"
       category = Category.find_by_title( "ff" )
   end

   if category != nil
       @category_docs = category.docs.page( params[ :page ] ).per( 10 )
   else
       @category_docs = Doc.order("updated_at DESC").page( params[ :page ] ).per( 10 )
   end 
```

我哪里错了？我应该切换到 will_paginate 吗？或者只是扔掉这段代码并做其他事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T03:32:56.060

```
match '/doc/category/:category', to: 'Docs#category',  :as => :docs_category 
```

不应该`:category_docs`，不是`docs_category`吗？我不详细了解 kaminari gem，但是当您调用 时`paginate @category_docs`，我认为默认情况下它会寻找它。

# c++ - 迭代向量时自动与具体类型？

> ID：12084061
> 
> 赞同：7
> 
> 时间：2012-08-23T02:44:59.417
> 
> 标签：c++, c++11, int, auto

我正在阅读的这本书在迭代一个`vector`

```
for (auto &e: v) {
  cout << e << endl;
} 
```

假设 v 被声明为`vector<int> v`，换句话说，我们知道这个集合中元素的类型是`int`。

是否`auto`以任何方式更好或更喜欢使用？

```
for (int &e: v) {
  cout << e << endl;
} 
```

为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T02:48:42.430

是的。`auto`是首选。因为如果您更改`v`from 的声明：

```
std::vector<int> v;  //before 
```

对此：

```
std::vector<float> v; //after 
```

如果你`int &`在 中使用`for`，那么你也必须改变它。但是有了`auto`，就不需要改变了！

在我看来，使用 with`auto`或多或少类似于[对 interface 进行编程](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)。因此，如果您`+=`在循环中进行操作，并且您并不真正关心循环变量的类型`e`，只要类型支持`+=`操作，那么`auto`解决方案是：

```
for(auto & e : v)
{
      e += 2;
} 
```

在此示例中，您只关心右侧的`e`支撑类型。它甚至适用于已定义的用户定义类型，或者 where是支持隐式转换的类型。就好像您正在编程接口：`+=``int``operator+=(int)``operator+=(T)``T``int`

```
std::vector<Animal*> animals;
animals.push_back(new Dog());
animals.push_back(new Cat());
animals.push_back(new Horse());

for(size_t i = 0 ; i < animals.size(); ++i)
{
       animals[i]->eat(food); //program to interface
} 
```

当然，你想把这个循环写成：

```
for(Animal * animal : animals)
{
       animal->eat(food); //still program to interface
} 
```

或者简单地说：

```
for(auto animal : animals)
{
       animal->eat(food); //still program to interface
} 
```

它仍在[编程接口](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)。

但与此同时，@David 评论中的要点值得注意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T02:48:39.883

在您的第一个示例中，您对向量元素的依赖程度较低。

假设在一个月内，您需要向量存储更大的整数，因此您将不得不使用`std::vector<int64_t>`或其他更宽的类型。现在**所有**迭代该向量的代码都是无效的。您必须修改每个：

```
for (int &e: v) {} 
```

为一个：

```
for (int64_t &e: v) {} 
```

这就是为什么最好只`auto`推断内部类型。这样，您可以将存储在向量中的类型修改为另一个兼容的类型，并且您的所有代码仍然可以工作。

# iphone - 重新定位 UITableViewCellAccessoryCheckmark

> ID：12084063
> 
> 赞同：0
> 
> 时间：2012-08-23T02:45:24.960
> 
> 标签：iphone, ios, uitableview

我有一个自定义 UITableViewCell（没有表格视图，只有在 UIView 类中完全独立的单元格），我可以让 UITableViewCellAccessoryCheckmark 在 UITableViewCell 中正常显示，但是如果有办法将它带入边缘，我会很痛苦?

这就是我设置配件类型的方式。

```
selectAllCell.accessoryType = UITableViewCellAccessoryCheckmark; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T02:51:46.047

做一个 UITableViewCell 的子类，然后创建你自己的 AccessoriesView。

在您的 CustomTableViewCell 中：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
    if ((self = [super initWithStyle:style reuseIdentifier:reuseIdentifier])) {
        UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 40, 40)];
        view.backgroundColor = [UIColor redColor];
        self.accessoryView = view;
    }
    return self;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T03:02:47.100

由于您没有使用 UITableView，因此请创建自己的 UIView 并添加自己的检查图标并将其放在您喜欢的任何位置。

# vba - 当字段有单引号时在 Access VBA 中使用 Dlookup

> ID：12084064
> 
> 赞同：1
> 
> 时间：2012-08-23T02:45:32.840
> 
> 标签：vba, ms-access, ms-access-2003

我在这个话题上找到了很多，但似乎仍然无法让它发挥作用。我有以下代码行：

```
If isNull(DLookup("id", my_table, my_field & "='" & temp_value & "'")) Then 
```

问题是“O'Connell”中`my_field`的一个值`my_table`（带单引号），我不确定如何让 Dlookup 找到它。我试过使用：

```
my_field & "=" & chr(34) & temp_value & chr(34) 
```

还有许多其他多引号选项，但我似乎无法让它发挥作用。虽然我可以使用 VBA 修改 temp_value 以包含或不包含单引号，但由于表中已经存在单引号，我需要确保它匹配。我只是不知道如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T12:53:45.943

尽管此处的建议和答案确实有效并解决了文本中引号的许多问题，但我的问题最终与我看到的单引号字符有关，而不是真正的单引号。值得一提的是，我使用的数据是从 Siebel 导出的，而我看到的单引号实际上是 chr(146)，其中常规单引号（我说“常规”是因为没有更好的术语）是 chr( 39)。

如果引号有问题，我发现检查字符串中每个字符的 chr 值很有帮助。可能有更好的方法来做到这一点，但这个循环应该会有所帮助：

```
for i=1 to len(a_string)
    debug.print mid(a_string,i,1) & " - " & asc(mid(a_string,i,1)
next i 
```

asc 函数为您提供一个字符的 chr 代码，因此它循环遍历字符串并在立即窗口中显示每个字符及其相关的 chr 代码（使用 debug.print）。这也有助于查找字符串中可能存在的其他“隐藏”（或不可见）字符。

一旦发现，我使用替换函数将 chr(146) 替换为两个单引号（两个 chr(39)s），正如 HansUp 所建议的那样，效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T05:54:29.083

在此示例中，`my_table`是我的表的名称，并且`my_field`是该表中字段的名称。

```
Dim strCriteria As String
Dim temp_value As String
temp_value = "O'Connell"
' use double instead of single quotes to avoid a '
' problem due to the single quote in the name '
strCriteria  = "my_field = """ & temp_value & """"
Debug.Print strCriteria
If IsNull(DLookup("id", "my_table", strCriteria)) Then
    MsgBox "no id found"
Else
    MsgBox "id found"
End If 
```

如果您愿意，可以将名称中的单引号加倍。这应该可以，但请确保您可以区分哪些是双引号，哪些是单引号。

```
strCriteria = "my_field='" & Replace(temp_value, "'", "''") & "'" 
```

# php - 获取我的数据库中的最大数量并将其增加 1

> ID：12084065
> 
> 赞同：0
> 
> 时间：2012-08-23T02:45:45.857
> 
> 标签：php

```
$sql2 = mysql_query("select MAX(column1) FROM sampledb");

while($iii=mysql_fetch_row($sql2))

{

$iii['MAX(column1)'];

}
$numplus = $iii+1;

echo"$numplus"; 
```

我是新手请帮助我T_T

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T02:49:01.420

您在这里寻找的是[column`AUTO_INCREMENT`属性](http://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html)，它指示 MySQL 自动使用主键的下一个可用值。

# qt - Qt EXC_BAD_ACCESS

> ID：12084066
> 
> 赞同：0
> 
> 时间：2012-08-23T02:45:46.490
> 
> 标签：qt, user-interface, qt-creator, qt-designer

我在 Qt 项目中遇到 EXC_BAD_ACCESS 问题。调试器显示它无法访问 menuBar 的内存（Ui 标题行 78）。我不明白的是，如果我在菜单栏布局中只使用 6 个 QAction 项目，它不会给出这个错误。仅当有超过 6 个 QAction 项（在本例中为 actionA7）时才会发生这种情况。任何人都有类似的经验，如果有任何解决方案，那就太好了。谢谢。

ui头文件：

```
 /********************************************************************************
    ** Form generated from reading UI file 'spreadsheet_mainwindow.ui'
    **
    ** Created: Thu Aug 23 10:22:10 2012
    **      by: Qt User Interface Compiler version 4.8.1
    **
    ** WARNING! All changes made in this file will be lost when recompiling UI file!
    ********************************************************************************/

    #ifndef UI_SPREADSHEET_MAINWINDOW_H
    #define UI_SPREADSHEET_MAINWINDOW_H

    #include <QtCore/QVariant>
    #include <QtGui/QAction>
    #include <QtGui/QApplication>
    #include <QtGui/QButtonGroup>
    #include <QtGui/QHeaderView>
    #include <QtGui/QMainWindow>
    #include <QtGui/QMenu>
    #include <QtGui/QMenuBar>
    #include <QtGui/QStatusBar>
    #include <QtGui/QToolBar>
    #include <QtGui/QWidget>

    QT_BEGIN_NAMESPACE

    class Ui_SpreadSheet_MainWindow
    {
    public:
        QAction *actionA1;
        QAction *actionA2;
        QAction *actionA3;
        QAction *actionA4;
        QAction *actionA5;
        QAction *actionA6;
        QAction *actionA7;
        QWidget *centralWidget;
        QToolBar *mainToolBar;
        QStatusBar *statusBar;
        QMenuBar *menuBar;
        QMenu *menuFile;

        void setupUi(QMainWindow *SpreadSheet_MainWindow)
        {
            if (SpreadSheet_MainWindow->objectName().isEmpty())
                SpreadSheet_MainWindow->setObjectName(QString::fromUtf8("SpreadSheet_MainWindow"));
            SpreadSheet_MainWindow->resize(400, 300);
            actionA1 = new QAction(SpreadSheet_MainWindow);
            actionA1->setObjectName(QString::fromUtf8("actionA1"));
            actionA2 = new QAction(SpreadSheet_MainWindow);
            actionA2->setObjectName(QString::fromUtf8("actionA2"));
            actionA3 = new QAction(SpreadSheet_MainWindow);
            actionA3->setObjectName(QString::fromUtf8("actionA3"));
            actionA4 = new QAction(SpreadSheet_MainWindow);
            actionA4->setObjectName(QString::fromUtf8("actionA4"));
            actionA5 = new QAction(SpreadSheet_MainWindow);
            actionA5->setObjectName(QString::fromUtf8("actionA5"));
            actionA6 = new QAction(SpreadSheet_MainWindow);
            actionA6->setObjectName(QString::fromUtf8("actionA6"));
            actionA7 = new QAction(SpreadSheet_MainWindow);
            actionA7->setObjectName(QString::fromUtf8("actionA7"));
            centralWidget = new QWidget(SpreadSheet_MainWindow);
            centralWidget->setObjectName(QString::fromUtf8("centralWidget"));
            SpreadSheet_MainWindow->setCentralWidget(centralWidget);
            mainToolBar = new QToolBar(SpreadSheet_MainWindow);
            mainToolBar->setObjectName(QString::fromUtf8("mainToolBar"));
            SpreadSheet_MainWindow->addToolBar(Qt::TopToolBarArea, mainToolBar);
            statusBar = new QStatusBar(SpreadSheet_MainWindow);
            statusBar->setObjectName(QString::fromUtf8("statusBar"));
            SpreadSheet_MainWindow->setStatusBar(statusBar);
            menuBar = new QMenuBar(SpreadSheet_MainWindow);
            menuBar->setObjectName(QString::fromUtf8("menuBar"));
            menuBar->setGeometry(QRect(0, 0, 400, 22));
            menuFile = new QMenu(menuBar);
            menuFile->setObjectName(QString::fromUtf8("menuFile"));
            SpreadSheet_MainWindow->setMenuBar(menuBar);

            menuBar->addAction(menuFile->menuAction());
            menuFile->addAction(actionA1);
            menuFile->addAction(actionA2);
            menuFile->addAction(actionA3);
            menuFile->addAction(actionA4);
            menuFile->addAction(actionA5);
            menuFile->addAction(actionA6);
            menuFile->addAction(actionA7);

            retranslateUi(SpreadSheet_MainWindow);

            QMetaObject::connectSlotsByName(SpreadSheet_MainWindow);
        } // setupUi

        void retranslateUi(QMainWindow *SpreadSheet_MainWindow)
        {
            SpreadSheet_MainWindow->setWindowTitle(QApplication::translate("SpreadSheet_MainWindow", "SpreadSheet_MainWindow", 0, QApplication::UnicodeUTF8));
            actionA1->setText(QApplication::translate("SpreadSheet_MainWindow", "A1", 0, QApplication::UnicodeUTF8));
            actionA2->setText(QApplication::translate("SpreadSheet_MainWindow", "A2", 0, QApplication::UnicodeUTF8));
            actionA3->setText(QApplication::translate("SpreadSheet_MainWindow", "A3", 0, QApplication::UnicodeUTF8));
            actionA4->setText(QApplication::translate("SpreadSheet_MainWindow", "A4", 0, QApplication::UnicodeUTF8));
            actionA5->setText(QApplication::translate("SpreadSheet_MainWindow", "A5", 0, QApplication::UnicodeUTF8));
            actionA6->setText(QApplication::translate("SpreadSheet_MainWindow", "A6", 0, QApplication::UnicodeUTF8));
            actionA7->setText(QApplication::translate("SpreadSheet_MainWindow", "A7", 0, QApplication::UnicodeUTF8));
            menuFile->setTitle(QApplication::translate("SpreadSheet_MainWindow", "File", 0, QApplication::UnicodeUTF8));
        } // retranslateUi

    };

    namespace Ui {
        class SpreadSheet_MainWindow: public Ui_SpreadSheet_MainWindow {};
    } // namespace Ui

    QT_END_NAMESPACE

    #endif // UI_SPREADSHEET_MAINWINDOW_H 
```

头文件：

```
 #ifndef SPREADSHEET_MAINWINDOW_H
    #define SPREADSHEET_MAINWINDOW_H

    #include <ui_spreadsheet_mainwindow.h>

    class SpreadSheet_MainWindow : public QMainWindow , public Ui_SpreadSheet_MainWindow
    {
        Q_OBJECT

    public:
        SpreadSheet_MainWindow(QWidget *parent = 0);
    };

    #endif // SPREADSHEET_MAINWINDOW_H 
```

cp文件：

```
 #include <QtGui>
    #include "spreadsheet_mainwindow.h"

    SpreadSheet_MainWindow::SpreadSheet_MainWindow(QWidget *parent) :
        QMainWindow(parent)
    {
        setupUi(this);
    } 
```

主cpp文件：

```
 #include <QtGui/QApplication>
    #include "spreadsheet_mainwindow.h"

    int main(int argc, char *argv[])
    {
        QApplication a(argc, argv);
        SpreadSheet_MainWindow w;
        w.show();

        return a.exec();
    } 
```

# sql - SSRS/MDX - 从多维数据集中提取数据集的表需要数据在 sql db 中的列

> ID：12084067
> 
> 赞同：2
> 
> 时间：2012-08-23T02:45:49.483
> 
> 标签：sql, reporting-services, ssas, mdx, business-intelligence

我有一个使用 MDX（分析多维数据集）构建的数据集。我有一张几列的桌子。现在，我需要再添加一列，其中包含 sql db 中可用的特定数据，而不是多维数据集。我知道这是不可能的。我可以做些什么来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:04:14.997

您可以为表中的每一行定义一个子报表，该子报表根据 mdx 数据集从 sql server 中提取数据。请注意，对 sql server 的查询将与 mdx 数据集中的记录数一样多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T15:41:47.603

希望您使用的是 2008R2，因此您可以使用 LOOKUP 或 LOOKUPSET 函数将项目从一个数据源匹配到另一个数据源：

[http://blog.datainspirations.com/2010/04/07/sql-server-2008-r2-reporting-services-look-up-part-iii/](http://blog.datainspirations.com/2010/04/07/sql-server-2008-r2-reporting-services-look-up-part-iii/)

它是两年前发布的，所以希望你是最新的吗？

# ruby-on-rails - 如何在 Rails 中测试任意路由？

> ID：12084073
> 
> 赞同：0
> 
> 时间：2012-08-23T02:47:08.840
> 
> 标签：ruby-on-rails, ruby, unit-testing, testing, routes

我想为非 RESTful 路由编写 Rails 功能测试。

我正在使用 Test::Unit。

在`routes.rb`我有这条路线...

```
match '/contract_search' => 'contracts#contract_search', \
    :as => 'contract_search', \
    :via => :post 
```

在我的合同控制器中，我有这个动作......

```
def contract_search
  # ...
end 
```

在`contracts_controller_test.rb`我试过...

```
test 'POST to contracts with search params.' do
  post(:contract_search, {
    :contract_search => {
      :title_like => 'System'
    }
  }, unprivileged_internal_user_session_vars, { })

  assert(
    assigns(:contracts).length == 6,
    "@contracts.length #{assigns(:contracts).length} is incorrect."
  )

end 
```

该操作在浏览器中按预期工作。

但是测试只是错误...

```
 1) Error:
test_POST_to_contracts_with_search_params.(ContractsControllerTest):
NoMethodError: undefined method `length' for nil:NilClass
    test/functional/contracts_controller_test.rb:49:in `block in <class:ContractsControllerTest>' 
```

我的感觉是，我认为 Test::Unit 正试图发布到`/contracts/contract_search`。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:23:51.343

由于在您使用的测试代码中`assigns(:contracts)`，您必须确保您的控制器方法`@contracts`正确填充变量。

可能是您错过了运行测试用例的一些先决条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T02:59:14.953

问题不在于路由，而`assigns(:contracts)`在于您的断言。`assigns(:contracts)`是 nil ，所以当你调用`length`它时它会返回一个`NoMethodError`.

答案必须在您的`contract_search`行动中，您可以发布代码吗？

# android - 像原生相机一样编码我的android闪光灯相机

> ID：12084080
> 
> 赞同：1
> 
> 时间：2012-08-23T02:48:14.943
> 
> 标签：android, flash, camera, native, light

我在我的应用程序中开发了一个相机，但是当设置闪光灯模式并拍照时，发出的光很短，并且不适用于最终照片。如何开发像原生相机一样在拍照时显示 2 或 3 级手电筒的闪光灯？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T17:28:20.223

我解决了这个问题。当我首先单击拍照按钮时，我使用 param.setFlashMode(Parameters.FLASH_MODE_TORCH); 打开手电筒；1 秒，在我设置 param.setFlashMode(Parameters.FLASH_MODE_ON); 并调用 takepicture 方法。这样我可以模拟原生相机闪光灯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T03:13:00.700

你需要让你的手电筒像手电筒一样工作。

首先，在AndroidManifest.xml中申请权限如下，

```
<uses-feature android:name="android.hardware.camera" />

<uses-permission
    android:name="android.permission.FLASHLIGHT"
    android:permissionGroup="android.permission-group.HARDWARE_CONTROLS"
    android:protectionLevel="normal" />

<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.flash" /> 
```

现在使用下面的代码来启动闪光灯

```
Camera camera = Camera.open();     
Parameters param = camera.getParameters();
param.setFlashMode(Parameters.FLASH_MODE_TORCH);
camera.setParameters(param);
camera.startPreview(); 
```

以下代码用于关闭闪光灯

```
camera.stopPreview();
camera.release(); 
```

# java - 匹配字符串到 xml 数据

> ID：12084083
> 
> 赞同：0
> 
> 时间：2012-08-23T02:48:28.580
> 
> 标签：java

我从用户输入中提取了两个字符串。我需要将其中一个与行 ID 匹配。

我不知道是否需要将字符串解析为整数（甚至可能将我所有的 XML 数据解析为字符串，然后查找该数据），或者我是否可以使用字符串直接查找 XML 数据？也许两者都不是。

这是我在 XML 文件中存储的内容的示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<data>
    <language>
        <row id="7101">
            <language-from>English</language-from>
            <language-to>Thai</language-to>
            <cost>30.00</cost>
            <comment><![CDATA[out source]]></comment>
        </row>
    </language>
</data> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T02:57:24.840

查看 XML 文档，我建议您将 XML 文档解析为一组结构化对象，将它们存储在地图中以便于查找，其中关键是来自用户输入的搜索条件。除非 XML 文件经常更改，否则一次性解析文档比任何基于字符串的搜索都值得。

我将定义一个类来保存该信息，如下所示：

```
class TranslationCost
{
    private int id;
    private String sourceLang;
    private String targetLang;
    private float cost;
    private String comment;
}

Map<Integer, TranslationCost> idTocostMap;

public float calculateCost(int id, int countOfWords)
{
    TranslationCost costObj = idToCostMap.get(id);
    if (null == costObj) {
        // throw exception
    }
    return costObj.getCost() * countOfWords;
} 
```

类似的东西...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T03:08:50.647

您可以使用`xPath`查询来查找节点...

```
Document xmlDoc = // Load the XML into an DOM document
Node root = xmlDoc.getDocumentElement();

XPathFactory xFactory = XPathFactory.newInstance();
XPath xPath = getXPathFactory().newXPath();
XPathExpression xExpress = getXPath().compile("/data/language/row[language-from='English']");
NodeList nodeList = (NodeList)xExpress.evaluate(root, XPathConstants.NODESET); 
```

我个人会围绕这个概念构建一个更简单的模型，以便更容易调用，但概念是相同的

# ios - 在 iOS 上，将子视图添加到 UITableViewCell 对象“cell”与添加到“cell.contentView”有什么区别？

> ID：12084087
> 
> 赞同：16
> 
> 时间：2012-08-23T02:48:52.537
> 
> 标签：ios, uitableview

在下面的代码中，如果我们使用 `[cell addSubview: someLabel]`vs `[cell.contentView addSubview: someLabel]`，它们看起来是一样的。做一个或另一个有什么区别吗？（实际代码中的自定义单元格是添加`UIImageView`和`UILabel`）（`UIView`另一方面，没有`contentView`，所以我们不需要将子视图添加到它的`contentView`. 顺便说一句`UITableViewCell`是的子类`UIView`）

```
-(UITableViewCell *) tableView:(UITableView *) tableView 
                       cellForRowAtIndexPath:(NSIndexPath *)indexPath { 

    UITableViewCell *cell = nil;

    if ([tableView isEqual:self.songsTableView]){

        static NSString *TableViewCellIdentifier = @"MyCells";

        cell = [tableView dequeueReusableCellWithIdentifier:TableViewCellIdentifier];

        if (cell == nil){
            cell = [[UITableViewCell alloc] 
                    initWithStyle:UITableViewCellStyleDefault
                    reuseIdentifier:TableViewCellIdentifier];
        }

        // ...  some code to create a UILabel (not shown here)

        [cell addSubview: someLabel];  // vs using [cell.contentView addSubView: ...] 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-23T04:02:29.077

我相信如果我没记错的话，contentView 是 UITableViewCell 的一个子视图。

如果您在[这里](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW1)查看此页面，您可以看到 UITableViewCell 中实际上有 3 个子视图

我认为默认情况下，编辑控件是隐藏的，直到您进入表格的编辑模式，在这种情况下，编辑控件出现（每行左侧的减号按钮）并且您的 contentView 被调整大小并被推到右侧。这可能是其他答案提到的“适当动画”效果的原因。

要测试差异，请尝试将子视图（例如带有文本的 UILabel）添加到单元格而不是 cell.contentView。当您将其添加到单元格而不是 cell.contentView 并进入表格的编辑模式时，我相信您的 UILabel 不会调整大小，您会在减号按钮的顶部/下方看到编辑按钮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T03:08:39.920

将您的视图放置在[`contentView`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/occ/instp/UITableViewCell/contentView)影响正确的动画进入和退出编辑模式。当您不进行子类化时将所有子视图放入`contentView`其中，除非您知道自己在做什么，否则应该一直如此。

# java - 从 com.symantec.itools.javax.swing 包中替换 ButtonGroupPanel

> ID：12084094
> 
> 赞同：2
> 
> 时间：2012-08-23T02:49:40.213
> 
> 标签：java, swing, layout, buttongroup, null-layout-manager

我正在将“Java Swing”代码从“Java Visual Cafe”JDK1.2 迁移到“Eclipse SDK6”。在 Visual Cafe 它的代码是这样的：

```
public  Sample extends JPanel(){
    .....
    package com.symantec.itools.javax.swing.JButtonGroupPanel  bgAcc = new com.symantec.itools.javax.swing.JButtonGroupPanel();
    ....
    bgAcc.setBorder(tbAcc);  //tbAcc  is titledBorder component  type
    ..
    bgAcc.setBounds(0,108,400,76);
    ...
    bgAcc.add(bgLb);     // bgLb  is  JLabel  component type
    ..
    bgAcc.add(button1, new GridBagConstraints(...));
    ..
} 
```

谁能建议我如何在 Eclipse SDK6 中替换此代码？我在“Swing”中找不到“ButtonGroup”的这些方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T06:08:03.117

我对这`JButtonGroupPanel`门课并不熟悉，但是您使用的那些方法也都可以定期使用`JPanel`。

`ButtonGroup`在 Swing 和 a 中是完全不同的概念`JPanel`。例如， A`ButtonGroup`用于对一组 进行分组`JRadioButtons`，并确保当时只能选择该组中的一个单选按钮。但是 a`ButtonGroup`不是 a`JComponent`也不是 a `Container`，所以你当然不会在上面找到类似`setBorder`的方法。

旁注：不要移植这些`setBounds`呼叫。`LayoutManager`改用体面的

# php - functions.php 中的循环

> ID：12084096
> 
> 赞同：1
> 
> 时间：2012-08-23T02:50:19.290
> 
> 标签：php, wordpress

我在functions.php 中使用循环，我知道循环不起作用。我必须全球化任何东西吗？我环顾四周，我不确定。这是我的功能：

```
function loadDiffSection($name)
{
    $term = get_term_by('name', $name, 'category');
    $termIdFeat = $term->term_id;

    $everything = "";

    if(have_posts() ):
        query_posts("cat=".$termIdFeat."&posts_per_page=5");
        $count = 1;

        while(have_posts() ) : the_post();
            set_post_thumbnail_size(520 , 0, true);
            $everything .="<a href='?p=".the_ID()."'>";
                $everything .="<div class='pushLeft grid thisPost pos_".$count."'>";
                    $everything .="<div class='capMedia hide'>";
                            $everything .="<font size='3'>".get_the_title()."</font><br /><br />";
                            $actualLen = strlen(strip_tags(removeImagefromContent()));
                            $limit = 200;

                            if($actualLen > $limit)
                            {
                                $everything .= substr(strip_tags(removeImagefromContent()), 0, $limit)."...";
                            }
                            else
                            {
                                $everything .= strip_tags(removeImagefromContent());
                            }
                    $everything .= "</div>";
                    $everything .= get_the_post_thumbnail();
                $everything .= "</div></a>";
            $count++;
        endwhile;
    endif;
    header( 'Content-Type: application/json; charset=UTF-8' );
    echo json_encode(array("returned" => $everything));
    exit;
} 
```

我正在使用此代码调用 AJAX 请求，因此它返回 NULL 响应。这让我相信循环在函数中不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T02:58:00.513

在我看来，您需要将您的 while 语句附在正确的附件中，可以这么说，

`while(have_posts() ) : the_post();`应该是`while((have_posts() ) : the_post());` ，然后`;`最后会杀死它，它看起来像这样`while((have_posts() ) : the_post()):` 它是一个冒号而不是一个分号。试试看。

# actionscript-3 - 如何在运行时使用 as3 列出库中的对象

> ID：12084097
> 
> 赞同：1
> 
> 时间：2012-08-23T02:51:08.417
> 
> 标签：actionscript-3, flash, list, runtime

我想以某种方式与我的库进行交互。我有很多（近 100 个）对象作为特定文件夹中的类导出到库中，我想获取它的属性。我该怎么做？有一些 AS3 方法可以列出导出的对象类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:39:39.440

在运行时，试试这个：

```
trace(ApplicationDomain.currentDomain.getQualifiedDefinitionNames()); 
```

在 11.3 版之前使用这个库：

[http://etcs.ru/pre/getDefinitionNamesSource/](http://etcs.ru/pre/getDefinitionNamesSource/)

# javascript - 需要解释 Javascript 正则表达式请求参数解析

> ID：12084099
> 
> 赞同：1
> 
> 时间：2012-08-23T02:51:24.847
> 
> 标签：javascript, regex, http-request-parameters

*先举例，后问……*

## 示例 1) '?sort=alpha&direction=asc' 的非全局匹配

```
'?sort=alpha&direction=asc'.match(/([^?&=]+)(=([^&]*))?/); 
```

### 输出：

```
// ['sort=alpha', 'sort', '=alpha', 'alpha'] 
```

## 示例 2) '?sort=alpha&direction=asc' 的全局匹配

```
'?sort=alpha&direction=asc'.match(/([^?&=]+)(=([^&]*))?/g); 
```

### 输出：

```
// ['sort=alpha', 'sort', '=alpha', 'alpha'] 
```

## 示例 3) '?sort=alpha&direction=asc' 的全局匹配替换

```
getRequestParameters: function () {
    var query_string = {},
        regex = new RegExp('([^?=&]+)(=([^&]*))?', 'g');

    '?sort=alpha&direction=asc'.replace(regex, function(match, p1, p2, p3, offset, string) {
        console.log(match, p1, p2, p3, offset, string);

        query_string[p1] = p3;
    });
} 
```

### 输出：

```
// sort=alpha sort =alpha alpha 1 ?sort=alpha&direction=asc
// direction=asc direction =asc asc 12 ?sort=alpha&direction=asc 
```

## 我的问题

我不确定我是否可以自己解决这个问题，但我从来没有“生活”过一个解决方案，我必须找出原因背后的韵律。*我认为*“完全足够”理解的具体匹配。我相信我知道下面的一些答案，但我宁愿不做假设并向更聪明的人学习！

1.  **为什么 1) 和 2) 相同？（或者他们是？）**
2.  **1) 和 2) 中的“sort=alpha”是什么意思？**
3.  **为什么 2) 不返回排序和方向参数？**
4.  **3) 使用 .replace() 进行迭代是什么？**
5.  **有没有办法在没有 .replace() 的情况下捕获 N 个参数？**

谢谢！

**更新**

```
var regex = new RegExp('([^?&=]+)(=([^&]*))?');
regex.exec('?sort=alpha&direction=asc');
// Chrome 21 - ["sort=alpha", "sort", "=alpha", "alpha"]

var regex = new RegExp('([^?&=]+)(=([^&]*))?', 'g');
regex.exec('?sort=alpha&direction=asc');
// Chrome 21 - ["sort=alpha", "sort", "=alpha", "alpha"]

'?sort=alpha&direction=asc'.match(/([^?&=]+)(=([^&]*))?/);
// Chrome 21 - ["sort=alpha", "sort", "=alpha", "alpha"]

'?sort=alpha&direction=asc'.match(/([^?&=]+)(=([^&]*))?/g);
// Chrome 21 - ["sort=alpha", "direction=asc"]

var regex = new RegExp('([^?&=]+)(=([^&]*))?', 'g');
regex.lastIndex = 11;
regex.exec('?sort=alpha&direction=asc');
// Chrome 21 - ["direction=asc", "direction", "=asc", "asc"] 
```

总而言之，示例 3）仍然是正确的，但请转到[此答案](https://stackoverflow.com/questions/10876338/best-way-to-store-js-regex-capturing-groups-in-array/10876450#10876450)以获得更合格的答案。

**结束更新**

参考资料并感谢 Steven Benner：

*   [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)
*   [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)
*   [http://stevenbenner.com/2010/03/javascript-regex-trick-parse-a-query-string-into-an-object/](http://stevenbenner.com/2010/03/javascript-regex-trick-parse-a-query-string-into-an-object/)
*   [http://www.bloggingdeveloper.com/post/JavaScript-QueryString-ParseGet-QueryString-with-Client-Side-JavaScript.aspx](http://www.bloggingdeveloper.com/post/JavaScript-QueryString-ParseGet-QueryString-with-Client-Side-JavaScript.aspx)（类似的主题，所以我把它扔进去了）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T03:08:31.327

先回答，后提问：

1.  In both Chrome 21 and Firefox 14 I get `["sort=alpha", "direction=asc"]` for the `g` version - so they are not the same at all.
2.  The first returned value from `match` is the entire matched string (in this case one or more characters that are not an ampersand, question mark or equal sign optionally followed by an equal sign and zero or more characters that are not an ampersand).
3.  It does (see answer to #1) - what browser are you running these tests in?
4.  `replace` is iterating over each match it finds in the string.
5.  Use multiple calls to `exec` or use the existing regex you have:

    ```
    > '?sort=alpha&direction=asc&another=value'.match(/([^?&=]+)(=([^&]*))?/g);
    ["sort=alpha", "direction=asc", "another=value"] 
    ```

What browser are you using that gave you the results you provided for your first questions?

# xml - 使用 go 提取 xml 属性

> ID：12084105
> 
> 赞同：2
> 
> 时间：2012-08-23T02:52:58.290
> 
> 标签：xml, go, xml-parsing

如何从像这样的元素中提取“id”属性`<vuln:cwe id="CWE-189" />`？这是嵌套在`<entry>`. 我最初的尝试是这样的`xml:"entry>cwe,id,attr"`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:14:23.387

两种方法：

1/ 继续获取`Token()`, 直到元素具有 name `cwe`。
然后一个 struct "CweXml" 可以提取 id 属性：

```
type CweXml struct {
    Id string `xml:"id,attr"`
} 
```

2/ 或从 开始`entry`，但在这种情况下，您需要一个结构体，其中将包含`CweXml`结构体。

```
type EntryXml struct {
    Cwe CweXml `xml:"cwe"`
} 
```

在这种情况下，您会在`entryXml.Cwe.Id`.

# solr - 赋值前引用的局部变量“结果”

> ID：12084113
> 
> 赞同：0
> 
> 时间：2012-08-23T02:54:08.980
> 
> 标签：solr, search-engine, elasticsearch, django-haystack

我想检索 elasticsearch index 文件夹下的所有索引。我得到了这个错误。

```
UnboundLocalError at /tjobfucksearch/

local variable 'results' referenced before assignment 
```

我的意见.py

```
from haystack.query import SearchQuerySet
def fucksearch(request):

    query = request.GET.get('q', '')
    if query:
        results = SearchQuerySet().all()

    return render_to_response("tjob/fucksearch.html", {
        "results": results,
        "query": query
    }) 
```

我的网址.py

```
url(r'^tjobfucksearch/$', 'tjob.views.fucksearch'), 
```

加：haystack 2.0.0，django 1.4 任何建议将不胜感激。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:18:35.543

考虑没有`q`提供参数的情况。Then`query`设置为`''`，`if query`条件失败，因此未设置 results （甚至未设置为`None`；此时 Python 不知道名称`results`）。因此，当您尝试从中获取值`results`以将其传递到`render_to_response`. 也许添加：

```
results = None 
```

前：

```
if query:
    .... 
```

这样，`results`将始终由您需要将其传递给渲染的时间来定义。（您仍然必须处理模板中的无结果情况！）

# ios - 即使应用程序关闭，也可以在我的应用程序中保存游戏关卡？

> ID：12084117
> 
> 赞同：0
> 
> 时间：2012-08-23T02:54:42.937
> 
> 标签：ios, xcode, save, game-engine

我正在为 iPhone 制作一款 RPG 游戏，一切都很顺利，但我需要知道如何保存我的游戏关卡，这样即使用户关闭在后台运行的应用程序，整个游戏也不会重新开始. 我什至在考虑带回老式游戏并制作它，以便您必须输入密码才能从上次中断的地方开始。但即便如此，我也不知道如何正确保存游戏。另外，即使我确实保存了游戏，即使应用程序完全关闭，我如何才能让它保持保存状态？到目前为止，我已经尝试将保存数据代码添加到该`AppWillTerminate`行但仍然没有。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:07:23.710

我不确定您是否要保存用户所在的级别，或者您是否要保存游戏状态。如果您只是想保存用户所在的级别，您应该使用@EricS 的方法（NSUserDefaults）。保存游戏状态稍微复杂一些。我会做这样的事情：

```
//Writing game state to file
    //Some sample data
    int lives = player.kLives;
    int enemiesKilled = player.kEnemiesKilled;
    int ammo = player.currentAmmo;

    //Storing the sample data in an array
    NSArray *gameState = [[NSArray alloc] initWithObjects: [NSNumber numberWithInt:lives], [NSNumber numberWithInt:enemiesKilled], [NSNumber numberWithInt:ammo], nil]; 

    //Writing the array to a .plist file located at "path"
    if([gameState writeToFile:path atomically:YES]) {
        NSLog(@"Success!");
    }

//Reading from file
    //Reads the array stored in a .plist located at "path"
    NSArray *lastGameState = [NSArray arrayWithContentsOfFile:path]; 
```

.plist 看起来像这样：

![在此处输入图像描述](../Images/65794285efd0ad3508c2e4fab6fd0c32.png)

使用数组意味着在重新加载游戏状态时，您必须知道存储项目的顺序，这还不错，但是如果您想要更可靠的方法，您可以尝试使用 NSDictionary 像这样：

```
//Writing game state to file
    //Some sample data
    int lives = player.kLives;
    int enemiesKilled = player.kEnemiesKilled;
    int ammo = player.currentAmmo;
    int points = player.currentPoints;

    //Store the sample data objects in an array
    NSArray *gameStateObjects = [NSArray arrayWithObjects:[NSNumber numberWithInt:lives], [NSNumber numberWithInt:enemiesKilled], [NSNumber numberWithInt:points], [NSNumber numberWithInt:ammo], nil];

    //Store their keys in a separate array      
    NSArray *gameStateKeys = [NSArray arrayWithObjects:@"lives", @"enemiesKilled", @"points", @"ammo", nil];

    //Storing the objects and keys in a dictionary
    NSDictionary *gameStateDict = [NSDictionary dictionaryWithObjects:gameStateObjects forKeys:gameStateKeys];

    //Write to file
    [gameStateDict writeToFile:path atomically: YES];

//Reading from file
    //Reads the array stored in a .plist located at "path"
    NSDictionary *lastGameState = [NSDictionary dictionaryWithContentsOfFile:path]; 
```

字典 .plist 看起来像这样：

![在此处输入图像描述](../Images/65461e8490fdd8fed50dc4b76abbf0d0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T03:42:19.160

要保存关卡：

```
[[NSUserDefaults standardUserDefaults] setInteger:5 forKey:@"level"]; 
```

要读取级别：

```
NSInteger level = [[NSUserDefaults standardUserDefaults] integerForKey:@"level"]; 
```

每当用户进入该级别时，我都会设置它。您可以等到您被发送到后台，但等待真的没有意义。

# entity-framework - 实体框架：开发不执行更新和删除的模型

> ID：12084120
> 
> 赞同：0
> 
> 时间：2012-08-23T02:54:59.230
> 
> 标签：entity-framework, orm, ef-code-first

我正在尝试找出一种使用不进行更新或删除的实体框架开发数据库模型的方法。出于分析原因，业务需求需要对系统中每条记录所做的所有更改的完整历史记录。因此，我想始终通过向数据库插入新记录来进行修改。

有没有一种干净的方法可以让实体框架做到这一点？还是我要跳过很多圈才能获得这种行为。基本模型非常简单，删除了一些东西，比如构造函数，因为它们对讨论没有太多帮助：

```
public class Container
{
  public Guid Id { get; private set; }
  public ICollection<Container> RelatedContainers { get; private set; }
  public ICollection<Item> Items { get; private set; }
}

public class Item
{
  public Guid Id { get; private set; }
  public string Name { get; private set; }
  public string Value { get; private set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T03:52:57.920

基本上你需要覆盖`SaveChanges()`. `DbContext`在您的方法中获取所有具有`EntityState` `Deleted`or`Modified` 并设置状态的对象`UnChanged`。

```
public class YourDbContext:DbContext{

  public override int SaveChanges(){
       foreach ( var ent in this.ChangeTracker
                     .Entries()
                     .Where(p =>p.State == System.Data.EntityState.Deleted             
                                     p.State == System.Data.EntityState.Modified))
        {

          ent.State   =System.Data.EntityState.Unchanged;
        }

  }

} 
```

# twitter-bootstrap - 在 Twitter Bootstrap 中创建圆角的正确方法

> ID：12084121
> 
> 赞同：83
> 
> 时间：2012-08-23T02:55:06.587
> 
> 标签：twitter-bootstrap, less, css

我刚刚开始使用**Twitter Bootstrap**，这是一个问题。

我正在创建自定义`<header>`块，我希望它的底角是圆形的。

是否有任何“正确”的方法可以通过使用预定义的类来做到这一点，或者我必须手动指定它，例如：

```
border-radius: 10px;               // and all that cross-browser trumpery 
```

*现在，我正在使用`css`样式。也许它会更好地`less`用于那个问题？*

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2014-01-11T00:00:19.547

`<div class="img-rounded">`会给你圆角。

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-08-23T03:00:17.473

我想这就是你要找的东西：http: [//blogsh.de/tag/bootstrap-less/](http://blogsh.de/tag/bootstrap-less/)

```
@import 'bootstrap.less';
div.my-class {
    .border-radius( 5px );
} 
```

你可以使用它，因为有一个 mixin：

```
.border-radius(@radius: 5px) {
  -webkit-border-radius: @radius;
     -moz-border-radius: @radius;
          border-radius: @radius;
} 
```

对于 Bootstrap 3，您可以使用 4 个 mixin...

```
.border-top-radius(@radius);
.border-right-radius(@radius);
.border-bottom-radius(@radius);
.border-left-radius(@radius); 
```

或者您可以使用前 4 个来制作自己的 mixin，一次性完成。

```
.border-radius(@radius){
    .border-top-radius(@radius);
    .border-right-radius(@radius);
    .border-bottom-radius(@radius);
    .border-left-radius(@radius);
} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-08-23T03:18:54.570

Bootstrap 只是一个大的、有用的、但简单的**CSS 文件**——不是一个框架或任何你不能覆盖的东西。我这样说是因为我注意到许多开发人员都坚持使用 BS 类并且变得懒惰“我不能再写 CSS 代码”编码器 [这当然不是你的情况！]。

如果它具有您需要的功能，请使用 Bootstrap 类 - 如果没有，请使用 good ol' 编写您的附加代码`style.css`。

为了两全其美，您可以在 LESS 中编写自己的声明，然后根据需要重新编译整个东西，从而最大限度地减少服务器请求。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-09-30T14:38:02.887

根据引导 3.0 文档。div*标签*没有圆角 **类**或**id**。

 *您可以通过使用对图像使用圆圈行为

```
<img class="img-circle"> 
```

或者只是`border-radius`在 css 中使用自定义 css3 属性

仅用于底部圆角使用以下

```
border-bottom-left-radius:25%; // i use percentage  u can use pix.
border-bottom-right-radius:25%;// i use percentage  u can use pix. 
```

如果你想要**响应**式圆形 div 然后[试试这个](http://jsfiddle.net/QmPhb/10/)

来自[响应式 CSS 圈子](https://stackoverflow.com/questions/12945891/responsive-css-circles)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-04-01T04:50:35.490

你想要的是一个 Bootstrap[面板](http://getbootstrap.com/components/#panels-basic)。只需添加`panel`类，您的标题将看起来统一。您还可以添加 classes `panel panel-info`、`panel panel-success`等。它几乎适用于任何块元素，并且应该与 一起使用`<header>`，但我希望它主要与`<div>`s 一起使用。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-04-18T15:42:21.347

没有更少，简单地为给定的 div ：

在 CSS 中：

```
.footer {
background-color: #ab0000;
padding-top: 40px;
padding-bottom: 10px;
border-radius:5px;
} 
```

在 html 中：

```
 <div class="footer">
        <p>blablabla</p>
      </div> 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-12-03T18:35:34.757

### 使用 bootstrap4，您可以轻松地做到这一点：-

```
class="rounded" 
```

或者

```
class="rounded-circle" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-14T22:32:02.997

如果您使用的是[Bootstrap Sass](https://github.com/twbs/bootstrap-sass)，这是另一种避免向元素标记添加额外类的方法：

```
@import "bootstrap/mixins/_border-radius";
@import "bootstrap/_variables";

.your-class {
  $r: $border-radius-base; // or $border-radius-large, $border-radius-small, ...
  @include border-top-radius($r);
  @include border-bottom-radius($r);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-21T15:14:49.633

在 Bootstrap 4 中，给元素加边框的正确方法是在元素的类列表中按如下方式命名它们：

```
For a slight rounding effect on all corners; class="rounded"
For a slight rounding on the left; class="rounded-left"
For a slight rounding on the top; class="rounded-top"
For a slight rounding on the right; class="rounded-right"
For a slight rounding on the bottom; class="rounded-bottom" 
For a circle rounding, i.e. your element is made circular; class="rounded-circle"
And to remove rounding effects; class="rounded-0" 
```

要使用 Bootstrap 4 css 文件，您可以简单地使用 CDN，并在您的 HTML 文件中使用以下链接：

```
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script> 
```

这将为您提供 Bootstrap 4 的基础知识。但是，如果您想使用大多数 Bootstrap 4 组件，包括工具提示、弹出框和下拉菜单，那么您最好使用以下代码：

```
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script> 
```

或者，您可以使用 NPM 或 Bower 安装 Bootstrap，并链接到那里的文件。

*注意，三个的底部标签与第一个链接路径中的第一个标签相同。

一个完整的工作示例可能是：

```
<img src="path/to/my/image/image.jpg" width="150" height="150" class="rounded-circle mx-auto"> 
```

在上面的示例中，图像通过使用 Bootstrap 的左右边距自动居中。*

# jquery - 向下钻取内的堆积列 - HighCharts

> ID：12084123
> 
> 赞同：2
> 
> 时间：2012-08-23T02:55:14.050
> 
> 标签：jquery, highcharts

一直在玩 Highcharts.js，并试图通过钻取获得一个使用两个级别的百分比堆积图表。使用堆积百分比图表，这两个级别几乎相同。我可以看到如何在没有向下钻取的情况下使其工作，但我不确定如何在向下钻取的第二级准确堆叠。

到目前为止，这是我在 jsfiddle 上使用的一些代码。 [http://jsfiddle.net/QnVPE/5/](http://jsfiddle.net/QnVPE/5/)

回顾一下。我试图显示用户观看了多少视频的百分比，而不是灰色区域（堆叠部分）应该是其余的百分比，他们在 100% 中没有观看多少。

应该很简单，但给我带来了一些麻烦，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:33:23.433

我让它工作，以防其他人想知道。这是我的设置方式。

[http://jsfiddle.net/QnVPE/9/](http://jsfiddle.net/QnVPE/9/)

# java - 如何在 Velocity 模板中访问 Session 或 Request 对象

> ID：12084132
> 
> 赞同：5
> 
> 时间：2012-08-23T02:56:29.380
> 
> 标签：java, spring-mvc, velocity

我试图在一些速度模板中访问 HttpServletRequest 但从未成功。我已经尝试过以下语法风格

当前 URL：$req.get("attributes").get("CURRENT_URL")) 结果 > 当前 URL：$req.get("attributes").get("CURRENT_URL"))

当前 URL：$request.get("attributes").get("CURRENT_URL")) 结果 > 当前 URL：$request.get("attributes").get("CURRENT_URL"))

当前 URL：$request.get("attributes").get("CURRENT_URL")) 结果 > 当前 URL：$request.get("attributes").get("CURRENT_URL"))

当前 URL：${request.get("attributes").get("CURRENT_URL"))} 结果 > 当前 URL：${request.get("attributes").get("CURRENT_URL"))}

注意：Web.xml 看起来像

```
<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>

<!-- Define Velocity template compiler -->
<servlet>
  <servlet-name>velocity</servlet-name>
  <servlet-class>
    org.apache.velocity.tools.view.servlet.VelocityViewServlet
  </servlet-class>

  <!-- 
   Unless you plan to put your toolbox.xml and velocity.properties
   under different folders or give them different names, then these
   two init-params are unnecessary as of VelocityTools 1.3\.  The
   VelocityViewServlet will automatically look for these files in
   the following locations.
 -->
  <init-param>
    <param-name>org.apache.velocity.toolbox</param-name>
    <param-value>/WEB-INF/toolbox.xml</param-value>
  </init-param>

  <init-param>
    <param-name>org.apache.velocity.properties</param-name>
    <param-value>/WEB-INF/velocity.properties</param-value>
  </init-param>
</servlet>

<!-- Map *.vm files to Velocity -->
<servlet-mapping>
  <servlet-name>velocity</servlet-name>
  <url-pattern>*.vm</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T23:26:11.600

```
$request.getParameter("parameterName") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T14:09:45.973

对于 VelocityTools，正确的引用是 $request 和 $response，而不是 $req 和 $res

方法名称是 getAttribute，而不是 get。所以你可以这样做：

$request.getAttribute('foo')

或者只是 $request.foo

但不是 $request.get('foo')

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T13:10:07.987

默认情况下，您将无法访问`HttpServletRequest`Velocity 模板中的 您只能访问已`Context`为您放置的对象。因此，在支持 Java 类中，将所需的信息添加到上下文中：

```
context.put("url", request.getAttribute("CURRENT_URL")); 
```

然后在您的 Velocity 模板中，您可以简单地引用`$url`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-15T07:10:32.027

尝试这个

```
$request.getSession().getAttribute('userId') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-05T18:12:05.680

获取具体参数：

```
$!request.getParameter('parameterName') 
```

要获取整个查询字符串：

```
$!request.getQueryString() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-30T11:33:56.113

您需要根据会话滚动自己的课程才能正确执行此操作。

我立即遇到了这个问题，现在要创建一个会话类，我将通过 values 属性作为 HashMap 列表访问该会话类。

然后你需要做的就是在使用前给velocity的上下文赋值一次。

```
context.put("session", MySessionClass.values)); 
```

# visual-studio-2012 - VS2012 构建后事件未触发

> ID：12084133
> 
> 赞同：21
> 
> 时间：2012-08-23T02:56:32.990
> 
> 标签：visual-studio-2012, post-build-event

我有一个 Web 项目，它触发构建后事件“成功构建”以执行一些清理/迁移活动（命令脚本）。

在 VS2012 中，成功后构建仅在代码更改时触发。如果没有代码更改，编译器仍然报告成功构建，但是，成功后构建事件不会触发。

在 VS2010 中，无论代码更改如何，每次成功构建都会触发构建后成功事件。这是我所期望的。编译成功，即使没有发生任何更改，所以应该触发事件。

带有代码更改的示例 VS2012 构建：

```
------ Build started: Project: ABC.Business.Web.Migrate, Configuration: Debug Any CPU ------
Build started 2012-08-23 01:26:13.
GenerateTargetFrameworkMonikerAttribute:
Skipping target "GenerateTargetFrameworkMonikerAttribute" because all output files are up-to-date with respect to the input files.
CoreCompile:
  C:\Windows\Microsoft.NET\Framework\v4.0.30319\Csc.exe /noconfig /nowarn:1701,1702,2008 /nostdlib+ /errorreport:prompt /warn:4 /define:DEBUG;TRACE /errorendlocation /preferreduilang:en-US /highentropyva- /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\mscorlib.dll" /reference:C:\Dev\ABC\Source\ABC.Business.Web\bin\ABC.Business.Web.dll /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Core.dll" /debug+ /debug:full /optimize- /out:obj\Debug\ABC.Web.Migrate.dll /target:library /utf8output Properties\AssemblyInfo.cs "C:\Users\Administrator\AppData\Local\Temp\.NETFramework,Version=v4.0.AssemblyAttributes.cs"
_CopyFilesMarkedCopyLocal:
  Copying file from "C:\Dev\ABC\Source\ABC.Business.Web\bin\ABC.Business.Web.dll" to "bin\ABC.Business.Web.dll".
  Copying file from "C:\Dev\ABC\Source\ABC.Business.Web\bin\ABC.Web.dll" to "bin\ABC.Web.dll".
  Copying file from "C:\Dev\ABC\Source\ABC.Business.Web\bin\ABC._Services.dll" to "bin\ABC._Services.dll".
  Copying file from "C:\Dev\ABC\Source\ABC.Business.Web\bin\ABC.Business.Web.pdb" to "bin\ABC.Business.Web.pdb".
  Copying file from "C:\Dev\ABC\Source\ABC.Business.Web\bin\ABC.Web.pdb" to "bin\ABC.Web.pdb".
  Copying file from "C:\Dev\ABC\Source\ABC.Business.Web\bin\ABC._Services.pdb" to "bin\ABC._Services.pdb".
CopyFilesToOutputDirectory:
  Copying file from "obj\Debug\ABC.Web.Migrate.dll" to "bin\ABC.Web.Migrate.dll".
  ABC.Business.Web.Migrate -> C:\Dev\ABC\Source\ABC.Business.Web.Migrate\bin\ABC.Web.Migrate.dll
  Copying file from "obj\Debug\ABC.Web.Migrate.pdb" to "bin\ABC.Web.Migrate.pdb".
PostBuildEvent:
  "C:\Dev\bin\spawn.exe" "C:\Dev\ABC\Scripts\Migrate Business Web.bat"

Build succeeded.

Time Elapsed 00:00:00.34
========== Build: 4 succeeded, 0 failed, 53 up-to-date, 0 skipped ========== 
```

示例 VS2012 构建，无需更改代码：

```
------ Build started: Project: ABC.Business.Web, Configuration: Debug Any CPU ------
Build started 2012-08-23 01:36:04.
GenerateTargetFrameworkMonikerAttribute:
Skipping target "GenerateTargetFrameworkMonikerAttribute" because all output files are up-to-date with respect to the input files.
CoreCompile:
Skipping target "CoreCompile" because all output files are up-to-date with respect to the input files.
CopyFilesToOutputDirectory:
  ABC.Business.Web -> C:\Dev\ABC\Source\ABC.Business.Web\bin\ABC.Business.Web.dll

Build succeeded.

Time Elapsed 00:00:00.31
========== Build: 1 succeeded, 0 failed, 56 up-to-date, 0 skipped ========== 
```

我尝试在 VS2012 中使用构建后事件“始终”。只有在发生代码更改时才会触发 Always post-build 事件（与 On success 相同）。我唯一的解决方法是进行重建——当我有几十个依赖项目时，这很痛苦！或者手动运行我的脚本——也很烦人！（不，这不是我的脚本 - 如第一个示例所示，当发生代码更改时，此脚本工作得非常好！）

这要么是有意更改，要么是错误。

有没有其他人在 VS2012 中遇到过这个构建后问题？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-11T18:13:00.880

我有同样的问题，我解决了如下：

*   将一些虚拟的空 txt 文件添加到项目中。
*   属性“构建操作”：内容。
*   属性“复制到输出目录”：总是。

就是这样，即使项目是最新的或者不是启动项目，它也会始终执行 de POST-BUILD 步骤。

![在此处输入图像描述](../Images/314497c77387f2bbe90447189568ddf6.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T18:00:33.223

我有一个类似的问题，这对我有帮助：

工具...选项...项目和解决方案...构建和运行...

取消选中“仅在运行时构建启动项目和依赖项”

如此处所建议：[在 Visual Studio 中运行 (F5) 后生成事件？](https://stackoverflow.com/questions/4453874/post-build-event-on-run-f5-in-visual-studio)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-18T19:46:19.267

如果`PostBuildEvent`在导入`$(MSBuildToolsPath)\Microsoft.CSharp.targets`. 确保`<PropertyGroup>`在导入此文件之后定义构建后事件。

错误的 msbuild 文件示例：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="14.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <!-- Snip -->
  <!-- DO NOT USE, INCORRECT ORDERING OF IMPORT -->
  <PropertyGroup>
    <PostBuildEvent>echo $(TargetName)</PostBuildEvent>
  </PropertyGroup>
  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
</Project> 
```

正确的 msbuild 文件示例：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="14.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <!-- Snip -->
  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
  <PropertyGroup>
    <PostBuildEvent>echo $(TargetName)</PostBuildEvent>
  </PropertyGroup>
</Project> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-22T17:29:24.597

对我来说，我需要[这个答案](https://stackoverflow.com/a/9497042/865643)，它指出如果您正在调用批处理文件，请使用：

```
CALL mybatch
CALL anothercommand 
```

而不是直接使用命令：

```
mybatch
anothercommand 
```

只有在不使用`mybatch`时才会被调用`CALL`。

# jquery - 创建一组没有特定孩子的父母

> ID：12084135
> 
> 赞同：2
> 
> 时间：2012-08-23T02:56:44.043
> 
> 标签：jquery

我有 500 个`<p>`元素，每个元素都有大约 500 个`<span>`元素，它们的 css 设置为不透明度 1。

如果我`$('p').css( 'opacity', .5 )`，一切都会在瞬间更新。

如果 I `$('p span').css( 'opacity', .5 )`，更新需要几秒钟。明显地。它正在迭代每个元素。

`<span>`我的问题是：给定不同元素中的任意一组`<p>`元素，是否有一种好方法可以使*除这些跨度*更改为不透明度 0.5 之外的所有内容？

我试过[没有](http://api.jquery.com/not/)。 `$('p').not( $('p span').slice( 5, 600) ).css( 'opacity', .5 )`不起作用 - 可能是因为我正在执行集合代数以从父母那里移除孩子。我希望它会隐含地起作用。唉。

有没有解决此类问题的好方法？ [这是一个小提琴](http://jsfiddle.net/CNU62/8/)。

`$('p span').not( $('p span').slice( 5, 600) ).css( 'opacity', .5 )`工作......但它很慢：-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T03:46:02.737

之后可以直接调用`jQuery`方法`slice`：

[http://jsfiddle.net/CNU62/10/](http://jsfiddle.net/CNU62/10/)

```
$('p span').slice(5, 600).css('opacity', .75); 
```

编辑：

如果你不介意做两个步骤：

[http://jsfiddle.net/CNU62/13/](http://jsfiddle.net/CNU62/13/)

```
$('p span').slice(10, 20).addClass('filterOut');
$('span').not('.filterOut').css('opacity', .75); 
```

基本上将特殊类添加到您切片的那些跨度中，然后您将s 与类一起`not`取出，然后执行`span``css()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:11:49.550

我不能保证这会在这么多元素上表现良好，你可以这样做：

```
$("p > *").not("span").css("opacity", 0.5); 
```

这将获取`<p>`标签的所有子对象，然后`<span>`在应用不透明度之前从该集合中删除元素。所以只有元素在标签`<span>`内不受影响。`<p>`

仅供参考，如果您需要它表现良好，那么直接走树可能会比这快很多倍。在某些地方，直接 JS 代码可以比在选择器操作中执行的操作快得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T04:31:08.867

这是我的尝试......仍然很慢。

[http://jsfiddle.net/V62wp/5/](http://jsfiddle.net/V62wp/5/)

```
var specialSpans = $('p span').slice(5, 105);
$('p').not(specialSpans.parent()).css('opacity', .5);
specialSpans.siblings().not( specialSpans ).css( 'opacity', .5 ); 
```

* * *

这会稍微提高速度（请参阅[this fiddle](http://jsfiddle.net/H8KNV/4/)）：

```
var specialSpans = $('p span').slice(5, 105);
var specialParent = specialSpans.parent();
$('p').not(specialParent).css('opacity', .5);
specialParent.children().not(specialSpans).css('opacity', .5); 
```

# batch-file - 如何使用另一个目录中的另一个嵌入式命令执行“查找”命令？

> ID：12084137
> 
> 赞同：1
> 
> 时间：2012-08-23T02:56:47.383
> 
> 标签：batch-file, window, dos

我想编写一个函数，该函数是在另一个目录（共享驱动器）中使用另一个嵌入式命令 %recent% 执行“查找”命令。

下面是思路：

```
REM Take in log file name input eg. "result_10030" = %1 to search for all result_10030*.log = %1*.log
REM Use the following to list the files matching result_10030*.log

for /f "delims=" %%x in ('dir /d /od /b %1*.log') do set recent=%%x
echo %recent%

REM Use %recent% as the file to perform find
REM Take in %2 as share drive path

find "PASSED" %2%recent% 
```

显然它不工作。

您的建议将不胜感激！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T04:22:42.313

DIR`/D`和`/B`选项不兼容 - 该`/B`选项覆盖该`/D`选项。

您的 FOR /F 循环还需要知道要查看的路径，而不仅仅是您的 FIND commnad。最简单的做法是将当前目录更改为所需的路径。

```
pushd %2
for /f "delims=" %%x in ('dir /d /od /b "%~1*.log"') do set "recent=%%x"
echo %recent%
find "PASSED" "%recent%"
set rtn=%errorlevel%
popd
exit /b %rtn% 
```

# css - 为什么 chrome 会从边框的宽度中减去小于 0.1px 的值？

> ID：12084140
> 
> 赞同：5
> 
> 时间：2012-08-23T02:56:56.993
> 
> 标签：css, google-chrome

在 chrome 开发工具中，我看到（在计算样式中）：

```
border-bottom-width: 0.9090908765792847px;
  element.style - 1px
  .x-fieldset - 1px
  fieldset, img - 0px
  fieldset - 2px user agent stylesheet 
```

这是在未显示底部边框的 fieldset 元素上。非常轻微的扰动会导致这个“0.9”变为 1，并出现边框。

'element.style' 之后的所有行都被删除。所有这一切都来自 ExtJS，但到目前为止我还没有看到任何归咎于他们的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T20:58:44.117

这是使用 chrome 缩放功能的结果。如果你放大 chrome，它是通过在 css 中乘以一个因子来实现的。而且，在某些情况下，它会消除边界。

# php - 在 php 中，“echo `command`”是做什么的？（带单引号）

> ID：12084142
> 
> 赞同：2
> 
> 时间：2012-08-23T02:57:03.967
> 
> 标签：php, linux, exec, echo

我在谷歌上花了几个小时，仍然找不到解释这个的 php 文档。有人可以指出我正确的链接吗？从 SVN 获得此代码：

```
<?php
  echo `snv up`; 
```

我无法理解的一件事是`标记......它不是引号......它是qwerty键盘上最左上角的键。

看起来这将作为shell命令执行“svn up”，但是与exec（“snv up”）有什么区别呢？任何人都可以指出一个可靠的解释来源吗？

![在此处输入图像描述](../Images/d59d6759d3603d6be56b0e02345031a8.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T02:59:22.123

反引号是 PHP shell 执行运算符，它们与[`shell_exec`](http://php.net/shell_exec)(not [`exec`](http://php.net/exec)) 相同。从[执行操作员文档](http://php.net/manual/en/language.operators.execution.php)：

> PHP 支持一种执行运算符：反引号 ( ```)。请注意，这些不是单引号！PHP 将尝试将反引号的内容作为 shell 命令执行；输出将被返回（即，它不会简单地转储到输出；它可以分配给一个变量）。反引号运算符的使用与`shell_exec()`.

# google-maps - 如何获取自定义 Google 地图的可点击工具提示

> ID：12084153
> 
> 赞同：0
> 
> 时间：2012-08-23T02:58:31.303
> 
> 标签：google-maps, google-maps-api-3

我浏览了谷歌搜索结果的页面，我想我要么疯了，要么就是没有使用正确的术语。我试图弄清楚当您单击标记时如何显示此工具提示。我一直在网站上看到它。有人对我应该搜索什么有想法吗？

它看起来像在这个网页上：http: [//onemarco.com/examples/Tooltip_v2/](http://onemarco.com/examples/Tooltip_v2/)它是一个`GInfoWindowTab`，但这似乎是谷歌地图 API v2，而不是 v3。

![在此处输入图像描述](../Images/2ec342786a72e8a253440233f9e58da6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T03:28:43.767

它在文档中称为[InfoWindow 。](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)

[开发人员指南](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)中有几个示例，以及一些可用的 cuatom 版本（如果您不喜欢内置 infoWindow 中的新方角）

# multithreading - Powershell：接收作业中的意外结果

> ID：12084159
> 
> 赞同：1
> 
> 时间：2012-08-23T02:59:49.937
> 
> 标签：multithreading, powershell, start-job, powershell-jobs

我试图更好地了解 powershell 如何处理作业。

这两篇文章都有很大帮助：

*   [powershell中的多线程](http://ryan.witschger.net/?p=22)
*   [将数组传递给 Start-Job](http://social.technet.microsoft.com/Forums/en-US/winserverpowershell/thread/7f74c11e-512e-46b8-96ab-dc7d5affe82e/)

但是，使用以下示例脚本，我在调用 Receive-Job 时得到了意想不到的结果。我希望每一行都有一个结果，但有时我会看到每行有多个结果或额外的空白回车。关于如何只写出每个作业从控制台流入的信息的任何想法？

```
$loops = 1..10
$jobs = new-object System.Collections.ArrayList

$loops | % {
    $jobs.add( 
        (start-job -ScriptBlock {
            param($list)
            $list | % {
                sleep -seconds (get-random -Maximum 3 -Minimum 1)
                write-host "Number is: $_"
            }
        } -ArgumentList (,$loops))
    ) | out-null
}

while ($jobs.count -gt 0)
{
    if ($jobs -ne $null)
    {
        $list = $jobs | ? { $_.HasMoreData -eq $true }
        $list | % { Receive-Job -Job $_ }
        $list2 = $jobs.Clone() | ? { $_.State -eq "Completed" }
        $list2 | % {
            $jobs.Remove($_) | out-null
        }
        $list = $null
    }
} 
```

输出可以...

```
数量是：1
数量是：1
数量是：2

```

或者有时...

```
数量是：1
数量是：2
号码是：1号码是：2
号码是：1号码是：2号码是：2

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T03:37:11.707

你把这件事复杂化了很多。您不需要所有这些循环来手动处理事情。您应该利用可用的 cmdlet。这应该实现您想要的基础知识：

```
$loops = 1..10

$scriptBlock = {
  param($list)
  $list | % {
    sleep -seconds (get-random -Maximum 3 -Minimum 1)
    write-host "Number is: $_"
  }
}

$jobs = $loops | % { start-job -ScriptBlock $scriptBlock -ArgumentList (,$loops) }

$jobs | Wait-Job | Receive-Job 
```

但是，这会将所有输出组合在一起，但无法知道什么工作做了什么。而且您正在使用的事实`Write-Host`意味着您实际上无法访问数据，它只是打印到屏幕上。

如果您想实际存储或处理生成的作业输出，可以执行以下操作：

```
$loops = 1..10

$scriptBlock = {
  param($list)
  $list | % {
    sleep -seconds (get-random -Maximum 3 -Minimum 1)
    "Number is: $_"  # don't use write-host, just output the string
  }
}

$jobs = $loops | % { start-job -ScriptBlock $scriptBlock -ArgumentList (,$loops) }

$jobs | Wait-Job  # wait for all jobs to be complete
$jobs |%{
   $output = $_ | Receive-Job
   # process $output here, do what you want with it
} 
```

# javascript - 如何使用 jQuery JSON 创建表？

> ID：12084160
> 
> 赞同：1
> 
> 时间：2012-08-23T02:59:52.900
> 
> 标签：javascript, jquery, json, html-table, jsonp

有人可以帮我弄清楚每次循环开始时如何添加 tr 行。下面是我的 jQuery 代码：

```
var row = $("<tr></tr>");

     $.each(data.response.docs, function (i,  item) { // json is the name of the object

        row.append('<td>' + item.adServerId + '</td>'); //item is named at the opening of this $.each function
        row.append('<td>' + item.advertiserId + '</td>');
        row.append('<td>' + item.advertiserName + '</td>');
        row.append('<td>' + item.campaignId + '</td>');
        row.append('<td>' + item.campaignName + '</td>');
        row.append('<td>' + item.bookedImps + '</td>');
        row.append('<td>' + item.imps + '</td>');
        row.append('<td>' + item.clicks + '</td>');
        row.append('<td>' + item.ctr + '</td>');
        row.append('<td>' + item.postViewConvs + '</td>');
        row.append('<td>' + item.postViewConvsRate + '</td>');
        row.append('<td>' + item.convs + '</td>');
        row.append('<td>' + item.convsRate + '</td>');
        row.append('<td>' + item.targetRevenue + '</td>');
        row.append('<td>' + item.revenue + '</td>');
        row.append('<td>' + item.cost + '</td>');
        row.append('<td>' + item.startDate + '</td>');
        row.append('<td>' + item.endDate + '</td>,</tr>');
        $("#adcampaignGrid").append(row); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T03:04:02.133

`var row = $('<tr></tr>')`在循环内移动？

```
 $.each(data.response.docs, function (i,  item) { // json is the name of the object

     var row = $("<tr></tr>");
     // rest of your code
 } 
```

此外，正如@minitech 所指出的，使用`text()`wrap`item.xxx`以避免将有趣的东西注入您的页面。

对于标题，我建议将标题直接放在 html 上：

[http://jsfiddle.net/QtnS4/1/](http://jsfiddle.net/QtnS4/1/)

```
<table id="aa">
    <thead>
        <tr><th>Col 1</th><th>Col 2</th></tr>       
    </thead>
    <tbody>
    </tbody>

</table>​ 
```

JS：

```
var records = [
    {key: "Value 1", key2: "Value 1b"},
    {key: "Value 2", key2: "Value 2b"}
];

for(var i = 0; i < records.length; i++) {
    var row = $('<tr></tr>');
    row.append($('<td></td>').text(records[i].key));
    row.append($('<td></td>').text(records[i].key2));
    $('#aa').append(row);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T03:09:40.153

```
$.each(data.response.docs, function (i, item) {
  var row = $("<tr></tr>");
  for (var i in item) row.append($('<td>').text(item[i]));
  $("#adcampaignGrid").append(row);
}); 
```

或者，如果所有键都不需要：

```
$.each(data.response.docs, function (i, item) {
  var props = [
    'adServerId', 
    'advertiserId', 
    'advertiserName', 
    'campaignId', 
    'campaignName', 
    'bookedImps', 
    'imps', 
    'clicks', 
    'ctr', 
    'postViewConvs', 
    'postViewConvsRate', 
    'convs', 
    'convsRate', 
    'targetRevenue', 
    'revenue', 
    'cost', 
    'startDate', 
    'endDate'
  ];

  var row = $("<tr></tr>");
  for (var i in props) row.append($('<td>').text(item[props[i]]));
  $("#adcampaignGrid").append(row);
}); 
```

# jquery - jquery表单插件提交问题

> ID：12084167
> 
> 赞同：0
> 
> 时间：2012-08-23T03:02:19.860
> 
> 标签：jquery, jquery-forms-plugin

我有一个包含图像字段的表单，我使用 jquery 表单插件通过 ajax 在字段更改时上传图像。这就是我的问题所在。如果有人输入图像并将其加载到表单中，每当再次提交表单时，它会再次上传相同的图像，我无法正常提交表单。它就像我希望 jquery 表单插件来处理表单提交一样。

这是我的javascript。

```
<script src="<?php echo DOMAIN.LIBRARY; ?>js/jquery.form.js" type="text/javascript"></script>
<script src="<?php echo DOMAIN.LIBRARY; ?>uploader/jcrop/js/jquery.color.js" type="text/javascript"></script>
<script src="<?php echo DOMAIN.LIBRARY; ?>uploader/jcrop/js/jquery.Jcrop.js" type="text/javascript"></script>
<link rel="stylesheet" href="<?php echo DOMAIN.LIBRARY; ?>uploader/jcrop/css/jquery.Jcrop.css" type="text/css" />
<script>
$(document).ready(function(e) {

    $("#fk_profile_form").bind("keypress", function(e) {
            if (e.keyCode == 13) return false;
      });

    var options = { 
        url:       "<?php echo DOMAIN.LIBRARY; ?>uploader/ajaxUpload.php",         // override for form's 'action' attribute 
        success:       showResponse  // post-submit callback 
    }; 

    var $loader = $('<div class="progress progress-striped active" style="width: 200px;"><div class="bar" style="width: 100%;">Uploading...</div></div>');
    $(document).on("change", "#photofield", function() {
        $loader.prependTo('#imageArea');
        $('#fk_profile_form').ajaxForm(options).submit();

    });
    function showResponse(responseText, statusText, xhr, $form)  {  

        // dialog function
        var $uploadedImage = $('<img src="<?php echo DOMAIN; ?>'+responseText+'" id="uploadedImage"></img>').appendTo('#imageArea .controls');

        $('<br /><a href="javascript:;" id="removeImage">Click Here To Upload A Different Photo</a>').appendTo('#imageArea .controls');

        $uploadedImage.Jcrop({
            // start off with jcrop-light class
            bgOpacity: 0.5,
            bgColor: 'white',
            addClass: 'jcrop-light',
            allowResize: true,
            aspectRatio: 1,
            setSelect: [0,0,300,300],
            minSize: [300,300],
            onSelect: updateCoords
        });

        $loader.remove();
        $('#ajaxImageUpload').show();
        $('#photofield').next('span').hide();
        $('#photofield').hide();

    } 

    function updateCoords(c)
    {
        $('#x').val(c.x);
        $('#y').val(c.y);
        $('#w').val(c.w);
        $('#h').val(c.h);
    };

    function checkCoords()
    {
        if (parseInt($('#w').val())) return true;
        alert('Please select a crop region then press submit.');
        return false;
    };

    $(document).on("click", "#removeImage", function(e) {
        e.preventDefault();
        $('.jcrop-holder').remove();
        $('#photofield').show();
        $('#photofield').next('span').show();
        $(this).remove();
        $('#photofield').val('');

    });

    $('#sc').on('click', function() {

        alert($('#x').val()+','+$('#y').val()+','+$('#w').val()+','+$('#h').val());

    });

    $(".other_option").each(function(i) {

        if($(this).val() != 'other') {

            $(this).next('input').hide();

        } else {

            $(this).next('input').show();

        }

    });

    $(document).on("change", "select[name=question[]]", function() {

        if($(this).val() == 'other') {

            $(this).next("input").show();

        } else {

            $(this).next("input").hide();

        }

    });

    $(document).on("change", "input:checkbox[name=fk_rainbow_bridge]", function() {

        if (!$(this).is(':checked')) {

            $('#fk_dob').show();

        } else {

            $('#fk_dob').hide();

        }

    });

    function checkField(field, value) {

        $.post("<?php echo DOMAIN.INCLUDES; ?>ajax/profileForm.php", { fieldName: field, fieldValue: value },
        function(data){
            if(data) {

                $('input[name='+field+'], select[name='+field+'], textarea[name='+field+']').next('span').text(data);
                $('#'+field).removeClass('success').addClass('error');

            } else {

                $('input[name='+field+'], select[name='+field+'], textarea[name='+field+']').next('span').empty();
                $('#'+field).removeClass('error').addClass('success');

            }

        });

    }

    $(document).on("focusout", "input[name=fk_name]", function(){

        checkField('fk_name', $(this).val());

    });

    $(document).on("focusout", "input[name=fk_breed]", function(){

        checkField('fk_breed', $(this).val());

    });

    $(document).on("focusout", "select[name=fk_gender]", function(){

        checkField('fk_gender', $(this).val());

    });

    $(document).on("focusout", "select[name=fk_dob_month]", function(){

        checkField('fk_dob_month', $(this).val());

    });

    $(document).on("focusout", "textarea[name=fk_about]", function(){

        checkField('fk_about', $(this).val());

    });

});
</script> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:39:38.863

在将一些数据发布到您的服务器时，您应该非常小心您提供的参数@您的请求。如果您使用相同的参数访问相同的服务器路径，那么您的浏览器将缓存响应（默认情况下）并填充您的第一个具有相同请求参数的响应。我自己正在使用类似下面的东西来确保每个请求都是唯一的..并且不会应用缓存..

```
$.post("<your server path url>",
{
    random_number: Math.random()
}); 
```

# for-loop - 批处理脚本错误：“此时不需要 %%d”

> ID：12084172
> 
> 赞同：0
> 
> 时间：2012-08-23T03:03:10.777
> 
> 标签：for-loop, batch-file

嗨，我正在尝试创建一个循环，该循环将遍历文件夹并取其名称，并在每个文件夹中获取文件的名称。

它开始于：

```
@echo off
setlocal enabledelayedexpansion
for /d %%d in (Folder*) do
    for %%f in ("%%d"\*.bla) do (
"command list"
) 
```

我在一开始就有一个共鸣：

```
 %%d was unexpected at this time 
```

我想这与 setlocal 命令有关，有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:43:37.520

它缺少两个括号。这是更正后的代码。

```
@echo off
setlocal enabledelayedexpansion
for /d %%d in (Folder*) do (
    for %%f in ("%%d"\*.bla) do (
        rem "command list"
        echo %%f
    )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-23T13:38:23.283

我已经测试过以下脚本是否有效。

```
@echo off
set parent=%1

echo Beginning from %parent%...
for /d %%G in ("%parent%"\*) do (
    echo Folder: "%%G"
    set child=%%G
    echo %child%
    for /r %child%\ %%H in (*.*) do (
        echo File: "%%H"
    )

)
pause. 
```

以根路径为参数运行：`myscript.bat C:\Windows`.

`%%G`比其他字母更受欢迎，因为[这里](https://ss64.com/nt/for.html). 但这不是必需的。

如我所见，`for /r path %%H in (*.*) do ()`是`for`用于文件的正确形式。你的脚本是错误的。您的脚本中一定有一些语法错误，请全部发布。

根据您的要求，这只深入一层：对于根目录下的所有目录，输入它并打印所有文件的名称。它不区分二级和更深层次下的目录。`goto`可以用来细化这个。

# html - 在 IndexedDB 中，有没有办法进行排序复合查询？

> ID：12084177
> 
> 赞同：41
> 
> 时间：2012-08-23T03:04:45.810
> 
> 标签：html, sqlite, web-applications, client-side, indexeddb

假设一个表有姓名、ID、年龄、性别、教育等。ID 是键，并且该表还针对姓名、年龄和性别进行了索引。我需要所有 25 岁以上的男学生，按姓名排序。

这在 mySQL 中很容易：

```
 SELECT * FROM table WHERE age > 25 AND sex = "M" ORDER BY name 
```

IndexDB 允许创建索引并根据该索引对查询进行排序。但它不允许像年龄和性别这样的多个查询。我找到了一个名为 queryIndexedDB (https://github.com/philikon/queryIndexedDB) 的小型库，它允许复合查询但不提供排序结果。

那么有没有办法在使用 IndexedDB 时进行排序复合查询？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-03-25T21:35:39.673

此答案中使用的术语**复合查询**是指在其 WHERE 子句中涉及多个条件的 SQL SELECT 语句。**尽管indexedDB**规范中没有提到此类查询，但您可以通过使用由属性名称数组组成的键路径创建索引来近似复合查询的行为。

这与创建索引时使用多条目标志完全无关。多条目标志调整 indexedDB 如何在单个数组属性上创建索引。我们正在索引对象属性的数组，而不是对象的单个数组属性的值。

## 创建索引

在此示例中，“姓名”、“性别”和“年龄”对应于存储在学生对象存储中的学生对象的属性名称。

```
// An example student object in the students store
var foo = {
  'name': 'bar',
  'age': 15,
  'gender': 'M'
};

function myOnUpgradeNeeded(event) {
  var db = event.target.result;
  var students = db.createObjectStore('students');
  var name = 'males25';
  var keyPath = ['name', 'gender', 'age'];
  students.createIndex(name, keyPath);
} 
```

## 在索引上打开光标

然后，您可以在索引上打开光标：

```
var students = transaction.objectStore('students');
var index = students.index('males25');
var lowerBound = ['AAAAA','male',26];
var upperBound = ['ZZZZZ','male',200];
var range = IDBKeyRange.bound(lowerBound, upperBound);
var request = index.openCursor(range); 
```

*但是*，由于我将要解释的原因，这并不总是有效。

另外：使用范围参数来 openCursor 或 get 是可选的。如果您不指定范围，则`IDBKeyRange.only`隐含地为您使用。换句话说，您只需要使用`IDBKeyRange`有界游标。

## 基本指数概念

索引类似于对象存储，但不是直接可变的。相反，您在引用的对象存储上使用 CRUD（创建读取更新删除）操作，然后 indexedDB 自动将更新级联到索引。

理解排序是理解索引的基础。索引基本上只是一个经过特殊排序的对象集合。从技术上讲，它也被过滤了，但我稍后会谈到这一点。通常，当您在索引上打开游标时，您正在根据索引的顺序进行迭代。此顺序可能并且很可能与引用对象存储中的对象顺序不同。顺序很重要，因为这允许迭代更有效，并允许自定义下限和上限，这仅在特定于索引的顺序的上下文中才有意义。

索引中的对象在存储发生更改时进行排序。当您将对象添加到存储中时，它会添加到索引中的正确位置。排序归结为一个比较函数，类似于 Array.prototype.sort，它比较两个项目并返回一个对象是否小于另一个对象、大于另一个对象或相等。因此，我们可以通过深入了解比较函数的更多细节来更好地理解排序行为。

## 字符串按字典顺序进行比较

例如，这意味着“Z”小于“a”并且*字符串*“10”大于*字符串*“020”。

## 使用规范定义的顺序比较不同类型的值

例如，规范指定字符串类型值如何位于日期类型值之前或之后。值包含什么并不重要，只关心类型。

IndexedDB 不会为您强制类型。你可以在这里开枪打自己的脚。您通常永远不想比较不同的类型。

## 具有未定义属性的对象不会出现在其键路径由这些属性中的一个或多个组成的索引中

正如我所提到的，索引可能并不总是包含引用对象存储中的所有对象。当您将对象放入对象存储时，如果该对象缺少索引所基于的属性的值，则该对象将不会出现在索引中。例如，如果我们有一个不知道年龄的学生，并且我们将其插入到学生存储中，那么特定的学生将不会出现在 males25 索引中。

当您想知道为什么在索引上迭代游标时对象没有出现时，请记住这一点。

还要注意 null 和空字符串之间的细微差别。空字符串*不是*缺失值。具有空字符串的对象仍然可以出现在基于该属性的索引中，但如果该属性存在但未定义或不存在，则不会出现在索引中。如果它不在索引中，则在索引上迭代光标时将看不到它。

## 创建 IDBKeyRange 时必须指定数组键路径的每个属性

您必须为数组 keypath 中的每个属性指定一个有效值，当创建一个范围内的下限或上限以在该范围上打开游标时使用。否则，您将收到某种类型的 Javascript 错误（因浏览器而异）。例如，您不能创建一个范围，例如`IDBKeyRange.only([undefined, 'male', 25])`因为 name 属性未定义。

令人困惑的是，如果您指定了错误的值*类型*，例如`IDBKeyRange.only(['male', 25])`, 其中 name 未定义，您不会得到上述意义上的错误，但会得到无意义的结果。

这个一般规则有一个例外：您可以比较不同长度的数组。因此，从技术上讲，您可以从范围中省略属性，前提是您从数组的*末尾*开始这样做，并且适当地截断数组。例如，您可以使用`IDBKeyRange.only(['josh','male'])`.

## 短路数组排序

indexedDB[规范](https://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html)提供了一种对数组进行排序的显式方法：

Array 类型的值与 Array 类型的其他值进行比较，如下所示：

1.  令 A 为第一个 Array 值，B 为第二个 Array 值。
2.  设长度为 A 的长度和 B 的长度中的较小者。
3.  让我为0。
4.  如果 A 的第 i 个值小于 B 的第 i 个值，则 A 小于 B。跳过其余步骤。
5.  如果 A 的第 i 个值大于 B 的第 i 个值，则 A 大于 B。跳过其余步骤。
6.  将 i 增加 1。
7.  如果 i 不等于长度，则返回步骤 4。否则继续下一步。
8.  如果 A 的长度小于 B 的长度，则 A 小于 B。如果 A 的长度大于 B 的长度，则 A 大于 B。否则 A 和 B 相等。

关键在于第 4 步和第 5 步：**跳过其余步骤**。这基本上意味着如果我们比较两个数组的顺序，例如 [1,'Z'] 和 [0,'A']，该方法只考虑第一个元素，因为此时 1 > 0。它由于短路评估（规范中的步骤 4 和 5），永远不会检查 Z 与 A。

所以，前面的例子是行不通的。它实际上更像下面的工作：

```
WHERE (students.name >= 'AAAAA' && students.name <= 'ZZZZZ') || 
(students.name >= 'AAAAA' && students.name <= 'ZZZZZ' && 
students.gender >= 'male' && students.gender <= 'male') || 
(students.name >= 'AAAAA' && students.name <= 'ZZZZZ' && 
students.gender >= 'male' && students.gender <= 'male' && 
students.age >= 26 && students.age <= 200) 
```

如果您对 SQL 或一般编程中的此类布尔子句有任何经验，那么您应该已经认识到不一定涉及全套条件。这意味着您将无法获得所需的对象列表，这就是您无法真正获得与 SQL 复合查询相同的行为的原因。

## 处理短路

在当前实现中，您无法轻易避免这种短路行为。在最坏的情况下，您必须将存储/索引中的所有对象加载到内存中，然后使用您自己的自定义排序功能对集合进行排序。

有一些方法可以最大限度地减少或避免一些短路问题：

例如，如果您使用 index.get(array) 或 index.openCursor(array)，那么就没有短路问题。要么有完整的匹配，要么没有完整的匹配。在这种情况下，比较函数只评估两个值是否相同，而不是一个大于或小于另一个。

其他需要考虑的技术：

*   从最窄到最宽重新排列 keypath 的元素。基本上在范围上提供早期钳位，以切断一些不需要的短路结果。
*   将包装的对象存储在使用特殊自定义属性的存储中，以便可以使用非数组键路径（非复合索引）对其进行排序，或者可以使用不受短路影响的复合索引行为。
*   使用多个索引。这导致了[爆炸指数问题](https://developers.google.com/appengine/docs/python/datastore/indexes#Python_Index_limits)。请注意，此链接是关于另一个 no-sql 数据库的，但相同的概念和解释适用于 indexedDB，并且该链接是一个合理（且冗长且复杂）的解释，因此我在此不再赘述。
*   indexedDB（规范和 Chrome 实现）的创建者之一最近建议使用 cursor.continue：[https ://gist.github.com/inexorabletash/704e9688f99ac12dd336](https://gist.github.com/inexorabletash/704e9688f99ac12dd336)

## 使用 indexedDB.cmp 进行测试

[cmp 函数](https://developer.mozilla.org/en-US/docs/IndexedDB/IDBFactory#cmp)提供了一种快速简单的方法来检查排序的工作原理。例如：

```
var a = ['Hello',1];
var b = ['World',2];
alert(indexedDB.cmp(a,b)); 
```

indexedDB.cmp 函数的一个很好的特性是它的签名与[Array.prototype.sort](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)的函数参数相同。您可以轻松地从控制台测试值，而无需处理连接/模式/索引等。此外，indexedDB.cmp 是同步的，因此您的测试代码不需要涉及异步回调/承诺。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-09T17:10:12.990

我迟到了几年，但我只想指出 Josh 的回答只考虑查询中的“列”是索引的一部分的情况`keyPath`。

如果任何上述“列”存在于索引之外`keyPath`，则必须在示例中创建的游标迭代的每个条目上测试涉及它们的条件。因此，如果您正在处理此类查询，或者您的索引不是`unique`，请准备好编写一些迭代代码！

无论如何，如果您可以将查询表示为布尔表达式，我建议您查看[BakedGoods 。](http://github.com/klawson88/Baked-Goods)

对于这些类型的操作，它将始终在焦点 objectStore 上打开一个游标，除非您正在执行严格的相等查询（`x ===? y`给定 x 是 objectStore 或索引键），但它会省去您编写自己的游标迭代的麻烦代码：

```
bakedGoods.getAll({
    filter: "keyObj > 5 && valueObj.someProperty !== 'someValue'",
    storageTypes: ["indexedDB"],
    complete: function(byStorageTypeResultDataObj, byStorageTypeErrorObj){}
}); 
```

只是为了完全透明，BakedGoods 由*moi*维护。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-05T07:23:17.710

有一个库**[JsStore](http://jsstore.net/)**可用于从 IndexedDB 查询数据，它非常易于使用并且节省了大量代码和时间。[你可以从这里](http://jsstore.net/Tutorial/)探索更多

[这是使用JsStore](http://jsstore.net/)的等效 sql 查询。

```
var connection = new JsStore.Instance("DbName");

connection.select({
    From: "TableName",
    Where: {
        age :  {'>':'25'},
        sex : 'M'
    },
    Order: {
        By: 'Name'
    },
    OnSuccess:function (results){
        console.log(results);
    },
    OnError:function (error) {
        console.log(error);
    }
}); 
```

*只需在 Sql 中思考并在 JS 中编写*。希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T06:01:14.627

尝试使用[Linq2indexedDB](http://linq2indexeddb.codeplex.com)这个库允许您使用多个过滤器、多个排序，甚至从您的对象中选择数据。它也适用于跨浏览器（IE10、Firefox 和 Chrome）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T16:49:51.600

您只能在 indexedDB 中打开[打开一个键范围查询。](http://dev.yathit.com/ydn-db/using/key-range-query.html)所以使用最有效的索引，在这种情况下，“年龄”。只需在光标迭代时过滤掉性别。您可以稍后使用数组迭代方法进行排序。IndexedDB API 除了预先安排索引条目外，对排序没有兴趣。

# bash - 如何将每个“set -x”日志捕获到 syslog？

> ID：12084179
> 
> 赞同：2
> 
> 时间：2012-08-23T03:05:05.320
> 
> 标签：bash, syslog

情景是这样的

我有一个 shell 脚本，它运行一些具有不同参数和选项的复杂命令。

这些参数和选项是由第三方应用程序传递的，因此我可能不知道每次向 shell 脚本传递的参数和选项到底是什么

所以为了知道这一点，我在 shell 脚本的开头使用 set -x 来查看命令正在运行的确切内容。我想使用记录器将那些调试器消息从 set -x 移动到系统日志。

我用陷阱做

```
trap "logger $(BASH_COMMAND)" DEBUG 
```

然而，系统日志的输出并没有它正在运行的确切命令，而是那样......

```
apple=1
orange=2
command $apple $orange 
```

.....................................

但我想日志的输出应该是

```
command 1 2 
```

我怎样才能实现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T07:20:14.067

这是一种方法：

```
#!/bin/bash

apple=1
orange=2
set -x

exec 2> >(logger)
echo $apple $orange 
```

我们将 stderr（设置 -x 路由到 stderr，文件描述符 2）重定向到 logger 程序。

在我的 /var/log/messages 我得到：

```
Aug 23 08:16:07 yogi logger: + echo 1 2 
```

# python - 我的纸牌游戏模拟脚本中的错误

> ID：12084182
> 
> 赞同：-3
> 
> 时间：2012-08-23T03:05:25.333
> 
> 标签：python, simulation

我知道在这里提出这样的问题是不受欢迎的，但我似乎无法从我的 python 脚本中解决所有错误。它模拟战争游戏（纸牌游戏）。我认为它应该可以完美运行。如果有人比我了解更多 python 并查看我的脚本并尝试修复它，我将非常感激。

```
import random

cards = ['ace', 'ace', 'ace', 'ace', '1', '1', '1', '1', '2', '2', '2', '2', '3', '3', '3', '3', '4', '4', '4', '4', '5', '5', '5', '5', '6', '6', '6', '6', '7', '7', '7', '7', '8', '8', '8', '8', '9', '9', '9', '9', '10', '10', '10', '10', 'jack', 'jack', 'jack', 'jack', 'queen', 'queen', 'queen', 'queen', 'king', 'king', 'king', 'king']

order = ['ace', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'jack', 'queen', 'king'] 
warcardvalue0 = 0
warcardvalue1 = 0
print "shuffling cards" 
cards = random.shuffle(cards,random.random)
print "lets play"
player0 = [cards[i] for i in range(len(cards)) if i % 2 == 1]

player1 = [cards[i] for i in range(len(cards)) if i % 2 == 0]

while (len(player0) > 0 or len(player1) > 0):

    nextcard0 = player0[0]
    nextcard1 = player1[0]

    cardplayed0 = order.index(nextcard0)

    cardplayed1 = order.index(nextcard1)

    if cardplayed0 > cardplayed1:

        player0.append(nextcard0)
        player0.append(nextcard1)
        player0.remove(nextcard0)
        player1.remove(nextcard1)

    elif cardplayed0 < cardplayed1:

        player1.append(nextcard1)
        player1.append(nextcard0)
        player1.remove(nextcard1)
        player0.remove(nextcard0)

    elif cardplayed0 == cardplayed1:
        while warcardvalue0 == warcardvalue1:
            if len(player0) >= 4:
                warcard0 = 4
            elif len(player0) < 4:
                warcard0 = len(player0)

            if len(player1) >= 4:
                warcard1 = 4
            elif len(player1) < 4:
                warcard1 = len(player1)

            warcardvalue0 = order.index(warcard0)
            warcardvalue1 = order.index(warcard1)

            if warcardvalue0 > warcardvalue1:
                player0.append(player0[range(warcard0 + 1)])
                player0.append(player1[range(warcard1 + 1)])
                player0.remove(player0[range(warcard0 + 1)])
                player1.remove(player1[range(warcard1 + 1)])

            elif warcardvalue0 < warcardvalue1:
                player1.append(player1[range(warcard1 + 1)])
                player1.append(player0[range(warcard0 + 1)])
                player1.remove(player1[range(warcard1 + 1)])
                player0.remove(player0[range(warcard0 + 1)]) 
            else:
                print "another war!" 

if len(player1) == 0:
    print "player1 won!"
elif len(player0) == 0:
    print "player0 won!" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T03:29:54.020

嗯，首先，我想你会想要

```
warcardvalue0 = order.index(warcard0)
warcardvalue1 = order.index(warcard1) 
```

成为

```
warcardvalue0 = order.index(player0[warcard0])
warcardvalue1 = order.index(player1[warcard1]) 
```

所以你得到的是战争卡的实际价值，而不是数字 4。

您可能还想这样做：

```
 elif len(player1) < 4:
            warcard1 = len(player1)-1 
```

代替：

```
 elif len(player1) < 4:
            warcard1 = len(player1) 
```

因此，您不会耗尽阵列的末端。

您还应该增加您的战争卡值，而不是静态设置它们，以便可以进行多层次的战争。为了便于阅读，您可以考虑使用递归函数。或这个：

```
 if len(player0) >= warcard0 + 4:
            warcard0 = warcard0+3
        elif len(player0) < warcard0 + 4:
            warcard0 = len(player0)-1 
```

（请记住，数组是从零开始的，因此索引 3 实际上返回第四个元素）

而且我认为您正在寻找最后的切片：

```
 player1.append(player1[0:warcard1+1]) 
```

您也不会考虑在战争期间一名玩家用完牌，然后发生另一场战争的情况。（战争卡是平等的，但一个玩家没有更多）。尽管我认为如果您解决了以前的问题，这将解决，尽管有点奇怪。（拥有更多牌的玩家不断对抗相同的面值。

所以，这是一个开始。但是其他人都是对的，您确实需要提供更多有关它如何破坏的信息，以便我们可以更好地帮助您。天知道这些修复是否能解决所有问题，但它们将是朝着正确方向迈出的一步。

哦，完成后不要忘记将战争卡值设置回零，否则你的战争会升级（实际上这可能是一个有趣的功能）。

# java - 如何保持 Lucene 索引与 Mysql 数据库同步？

> ID：12084186
> 
> 赞同：2
> 
> 时间：2012-08-23T03:05:52.383
> 
> 标签：java, mysql, lucene

我正在尝试利用 Lucene 在我的应用程序中开发全文搜索，这需要基于我的 mysql 数据库构建索引。我想知道如何使这些索引与数据库保持同步？我想出了办法：1）在业务逻辑中紧密添加额外的代码来更新搜索索引。2）运行一个单独的任务来定期重建索引。

你还有其他方法吗？你认为最好的方法是什么？任何意见将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:37:08.943

如果您使用 Hibernate，请查看[Hibernate 搜索](http://www.hibernate.org/subprojects/search.html)项目。它应该涵盖很多样板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-04T17:00:54.337

您可以使用提供 JDBC[河流](http://www.elasticsearch.org/guide/en/elasticsearch/rivers/current/) [插件的 Elastic Search 或](https://github.com/jprante/elasticsearch-river-jdbc)[通过 JPA](http://www.objectdb.com/java/jpa/persistence/event)使用实体上的事件手动触发更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T10:01:58.663

您可以在 MySQL 中设置触发器来更新所有插入/更新/删除文档的更改文档。

此外，您可以在您的应用程序中设置一个过滤器（javax.servlet 规范）来拦截服务器请求并将它们推送到您的索引，甚至在它们到达数据库之前（它甚至可以在同一个事务中完成，但实际上很少需要这样做，最终的一致性通常对搜索引擎来说很好）。

正如您所说，您还可以安排定期更新（类似于我在 Solr 中为[DIH所做的贡献）。](http://wiki.apache.org/solr/DataImportHandler#Scheduling)

# java - 如何让JComboBox中的内容居中显示？

> ID：12084188
> 
> 赞同：9
> 
> 时间：2012-08-23T03:06:06.427
> 
> 标签：java, swing, center, jcombobox, cellrenderer

目前我有这个`JComboBox`，我怎样才能让里面的内容居中？

```
String[] strs = new String[]{"15158133110", "15158133124", "15158133458"};
JComboBox com = new JComboBox(strs); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T03:22:54.073

您需要创建一个渲染器，然后将其应用到 JComboBox

```
DefaultListCellRenderer dlcr = new DefaultListCellRenderer(); 
dlcr.setHorizontalAlignment(DefaultListCellRenderer.CENTER); 
com.setRenderer(dlcr); 
```

也导入这个，

```
import javax.swing.DefaultListCellRenderer; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-13T16:37:03.690

```
((JLabel)jComboBox1.getRenderer()).setHorizontalAlignment(SwingConstants.CENTER); 
```

试试这个

# html - HTML z 索引现在重叠

> ID：12084190
> 
> 赞同：-2
> 
> 时间：2012-08-23T03:06:29.100
> 
> 标签：html, css, z-index

我在试图弄清楚我在[http://www.hirelogo.com](http://www.hirelogo.com)上的按钮发生了什么问题时遇到了麻烦，最初它在“简单”框下方表现良好，但现在它在上方徘徊。如果有的话，我无法弄清楚我改变了什么。我没有在网站的这个区域工作。有人可以让我知道如何解决这个问题。正如我所说，我正在尝试将按钮放在简单行下方。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T04:56:48.620

在你的代码中，我看到

```
position: absolute: top:-20; 
```

它应该是

```
position: absolute; top:-20px; 
```

不确定这是否会导致您的错误，但这绝对*是一个*错误。

# node.js - 我如何获得完整的网址

> ID：12084195
> 
> 赞同：3
> 
> 时间：2012-08-23T03:07:06.680
> 
> 标签：node.js

如何获取完整的 url ，例如[http://user:pass@host.com:8080/p/a/t/h?query=string#hash](http://user:pass@host.com:8080/p/a/t/h?query=string#hash)。使用 request.url 可以得到 /p/a/t/h?query=string ，但我希望得到完整的包括#hash。我该怎么办？

```
var http = require('http');
var url = require('url');
http.createServer(function (request, response) {
   response.writeHead(200, {'Content-Type': 'text/plain'});
   response.end(request.url + '\n');
}).listen(8124); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T03:08:26.387

哈希不会发送到服务器。您无法在服务器端获取它。（至少，不是没有一些运行客户端的代码通过 AJAX 在另一个请求中发送它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T03:11:15.983

“#”后面的内容是客户端的书签，不是发送到服务器的 URL 的一部分。您可能想阅读“后退按钮”问题以了解其含义。SO上与此相关的内容：[Detecting Back Button/Hash Change in URL](https://stackoverflow.com/questions/172957/detecting-back-button-hash-change-in-url)。

# ios5 - 在 Master-Detail 应用程序的 DetailViewController 中显示文档

> ID：12084196
> 
> 赞同：0
> 
> 时间：2012-08-23T03:07:11.933
> 
> 标签：ios5, xcode4.3, master-detail, ipad, xcode-storyboard

我有一个适用于 iPad 的 Master-Detail 应用程序。我正在使用故事板。当用户在 中选择一个单元格时`MasterViewcontroller`，数据将显示在另一个表 ( `UITableViewController`) 中。当用户在第二个表格中选择一个单元格时，我想在`DetailViewController`. 第二个表格显示文档列表（PDF、XLS 等）。因此，当用户选择 时`abc.pdf`，我希望 PDF 文档以`Detailviewcontroller`.

我发现了几个直接从`MasterViewcontroller`到`detailviewcontroller`. 但我无法从第二张表中实现这一点。导航如下所示：

```
Table1 (parent data)
    |
    V
Table2 (child data, which as I said is a list of documents)
    |
    V
Detailview (display the selected document in read-only mode) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:35:22.330

故事板还是 NIB？

假设故事板，

*   定义从您的第二个主表视图到将显示 PDF 的新详细信息屏幕的转场；segue 可能应该是替换细节屏幕的“替换”segue；
*   给那个segue一个唯一的标识符；
*   在该`tableView:didSelectRowAtIndexPath`方法中，使用该标识符执行 segue；
*   在显示 PDF 的新详细信息视图控制器中，使用要打开的 PDF 的名称定义一个属性；在`viewDidLoad`该控制器中，让它打开 PDF 进行查看；和
*   在您`prepareForSegue`的主视图控制器中，根据选择的表的哪一行设置新视图控制器的属性。

如果不是情节提要，则过程类似，但不是 segue 和 a `prepareForSegue`，而是手动`alloc`/ `initWithNibName`in `didSelectRowAtIndexPath`，您将在新控制器中设置 pdf name 属性的值，然后将详细信息屏幕转换为它通过 pushViewController 或 presentViewController，如您所见。

# android - 3G 和 WiFi 同时用于互联网访问，带有 Android 的源路由

> ID：12084200
> 
> 赞同：4
> 
> 时间：2012-08-23T03:07:38.617
> 
> 标签：android, wifi, 3g, tethering

我正在尝试开发一个应用程序，它创建两个用于文件传输的套接字，一个来自每个 3G/4G 和 WiFi 接口。

要启用此功能，我需要确保 3G 和 WiFi 都已启动并正在运行。他们也应该能够将数据包转发到他们相关的 GW 路由器。

我知道 android 中的 ConnectivityService.java 和 ConnectivityManager.java 确保一次只有一个接口处于活动状态。

我试图通过 Android WiFi 系绳源代码 (http://code.google.com/p/android-wifi-tether/) 了解他们如何确保 3G 下载数据和 WiFi 用于将数据传输到本地网络。我从他们的 tether.edify 文件中推断他们加载了 3G 的 wifi 驱动程序，然后使用相同的脚本来更新路由转发地址、NAt 规则等以实现 WiFi 系绳。

我的问题是这种方法如何能够绕过android的connectionManager和服务来同时启用两个接口？同样对于 WiFi 系绳，WiFi 接口充当 AP，而我的要求是确保 WiFi 和 3G 都将数据转发到它们的网关。这可以通过适当的路由/NAT 表实现吗？

请分享你的经验。

谢谢。

更新：我能够解决此问题，请参阅此[链接](https://sites.google.com/site/lotuseaterarpit/news/3g4gwififorandroidconcurrently)了解详细信息。

# c# - Windows 窗体中的自动完成

> ID：12084205
> 
> 赞同：1
> 
> 时间：2012-08-23T03:08:35.167
> 
> 标签：c#, winforms

Windows 窗体中的哪个界面提供以下支持自动完成的属性？

```
AutoCompleteCustomSource 
AutoCompleteSource 
AutoCompleteMode 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T03:24:30.247

您需要实现/驱动 Form 类。

请参阅下面的链接，该链接具有完整的实现

[http://csharpdotnetfreak.blogspot.com/2009/01/winforms-autocomplete-textbox-using-c.html](http://csharpdotnetfreak.blogspot.com/2009/01/winforms-autocomplete-textbox-using-c.html)

[http://www.dotnetfunda.com/articles/article225.aspx](http://www.dotnetfunda.com/articles/article225.aspx)

[http://www.c-sharpcorner.com/UploadFile/mahesh/AutoCompletion02012006113508AM/AutoCompletion.aspx](http://www.c-sharpcorner.com/UploadFile/mahesh/AutoCompletion02012006113508AM/AutoCompletion.aspx)

# jquery - 如何在 jquery 中优化我的代码？

> ID：12084211
> 
> 赞同：0
> 
> 时间：2012-08-23T03:08:56.167
> 
> 标签：jquery

我有一个 jquery，它对 5 个按钮重复 5 次。我不擅长 Jquery，所以我想问一下如何在 1 个函数中优化我的代码？谢谢

```
$(function() {
    $("#frmEdit\\:idBtn1").datetimepicker({
        showOn: "both",
        buttonImage: "../../jquery/images/calendarIcon.png",
        buttonImageOnly: true,
        constrainInput: true,
        showButtonPanel: true,
        dateFormat: 'dd-M-yy    ',
        addSliderAccess: true,
        sliderAccessArgs: { touchonly: false }
    });
});
$(function() {
    $("#frmEdit\\:idBtn2").datetimepicker({
        showOn: "both",
        buttonImage: "../../jquery/images/calendarIcon.png",
        buttonImageOnly: true,
        constrainInput: true,
        showButtonPanel: true,
        dateFormat: 'dd-M-yy    ',
        addSliderAccess: true,
        sliderAccessArgs: { touchonly: false }
    });
});
.......... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T03:11:03.783

您可以使用多个选择器。 [http://api.jquery.com/multiple-selector/](http://api.jquery.com/multiple-selector/)

```
$("#frmEdit\\:idBtn1, #frmEdit\\:idBtn2") 
```

如果您要选择的东西不止一些，我建议您设置一个类，并改用一个类选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T03:14:00.390

您可以简单地创建一个函数

```
function createDatePicker(id) {
    $("#frmEdit\\:" + id).datetimepicker({
        showOn: "both",
        buttonImage: "../../jquery/images/calendarIcon.png",
        buttonImageOnly: true,
        constrainInput: true,
        showButtonPanel: true,
        dateFormat: 'dd-M-yy    ',
        addSliderAccess: true,
        sliderAccessArgs: { touchonly: false }
    });
}; 
```

用法

```
createDatePicker('idBtn1'); 
```

# c# - VB.NET 人员在 C# 中的运算符重载

> ID：12084212
> 
> 赞同：1
> 
> 时间：2012-08-23T03:09:07.267
> 
> 标签：c#

考虑这个类，它重载了 Person 类的 = 运算符。这适用于 VB.NET：

```
Public Class Person

    Public Sub New(ByVal FirstName As String, ByVal LastName As String)
        _FirstName = FirstName
        _LastName = LastName
    End Sub

    Private _LastName As String
    Public Property LastName() As String
        Get
            Return _LastName
        End Get
        Set(ByVal value As String)
            _LastName = value
        End Set
    End Property

    Private _FirstName As String
    Public Property FirstName() As String
        Get
            Return _FirstName
        End Get
        Set(ByVal value As String)
            _FirstName = value
        End Set
    End Property

    Public Shared Operator <>(ByVal Person1 As Person, ByVal Person2 As Person) As Boolean
        Return Not (Person1 = Person2)
    End Operator

    Public Shared Operator =(ByVal Person1 As Person, ByVal Person2 As Person) As Boolean
        Return Person1.FirstName = Person2.FirstName AndAlso Person1.LastName = Person2.LastName
    End Operator

    Public Class Test

        Public Sub TestIt()

            Dim P1 As New Person("f1", "l1")
            Dim P2 As Person = Nothing

            Dim IsEqual As Boolean = False

            If P1 IsNot Nothing AndAlso P2 IsNot Nothing Then

                If P1 = P2 Then
                    IsEqual = True
                End If

            End If

        End Sub
    End Class
End Class 
```

和 C# 中的同一个类：

```
public Person(string FirstName, string LastName)
{
    _FirstName = FirstName;
    _LastName = LastName;
}

private string _LastName;
public string LastName
{
    get { return _LastName; }
    set { _LastName = value; }
}

private string _FirstName;
public string FirstName
{
    get { return _FirstName; }
    set { _FirstName = value; }
}

public static bool operator !=(Person Person1, Person Person2)
{
    return !(Person1 == Person2);
}

public static bool operator ==(Person Person1, Person Person2)
{
    return Person1.FirstName == Person2.FirstName && Person1.LastName == Person2.LastName;
}

public class Test
{
    public void TestIt()
    {
        Person P1 = new Person("f1", "l1");
        Person P2 = null;

        bool IsEqual = false;

        if (P1 != null && P2 != null)
        {
            if (P1 == P2)
            {
                IsEqual = true;
            }
        }
    }
} 
```

使用 C# 类，如果在`Person`测试中使用`null`该`==`函数是否为`null`. 也就是说，是否有与测试`Is Nothing`分开的与VB 等效的对应功能`==`？似乎 C#`==`两者都使用。

我试过了`object.IsEqual`；那看起来也错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T03:41:56.813

顺便说一句，由于您正在实施，`==`您还应该覆盖 Equals（和 GetHashCode）。

一个简单的方法是实现`IEquatable<Person>`：

```
public bool Equals(Person other)
{
    return other != null &&
           FirstName == other.FirstName &&
           LastName == other.LastName;
} 
```

然后覆盖 Equals：

```
public override bool Equals(object o)
{
    var other = o as Person;
    return other != null && this.Equals(other);
} 
```

最后`==`只是：

```
public static bool operator ==(Person left, Person right)
{
    return object.Equals(left, right);
}

public static bool operator !=(Person left, Person right)
{
    return !(left == right);
} 
```

（[object.Equals](http://msdn.microsoft.com/en-us/library/w4hkze5k.aspx) hands`null`正确。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T03:14:41.273

检查`null`您的重载运算符也使用`object.ReferenceEquals`：

```
public static bool operator ==(Person Person1, Person Person2)
{
    if(object.ReferenceEquals(Person1, null)) {
        return object.ReferenceEquals(Person2, null);
    } else if(object.ReferenceEquals(Person2, null)) {
        return false;
    } else {
        return Person1.FirstName == Person2.FirstName && Person1.LastName == Person2.LastName;
    }
} 
```

或者，更简洁地说：

```
return object.ReferenceEquals(person1, person2) || (
           !object.ReferenceEquals(person1, null)
        && !object.ReferenceEquals(person2, null)
        && person1.FirstName == person2.FirstName
        && person1.LastName  == person2.LastName); 
```

# php - 将渲染的输出从 mustache 写入新的 HTML 文件

> ID：12084213
> 
> 赞同：0
> 
> 时间：2012-08-23T03:09:07.423
> 
> 标签：php, codeigniter, mustache

我是 Mustache 模板的新手，所以请善待。

我的方法是基于模板 HTML 创建一个新的 HTML 文件。我通过以下方式成功地将 Mustache 集成到了我的 CodeIgniter 应用程序中：

```
require 'system/libraries/mustache/src/Mustache/Autoloader.php';
// Create instance of autoloader
Mustache_Autoloader::register();
// Instantiate Mustache class
$m = new Mustache_Engine;
echo $m->render('Hello, {{planet}}!', array('planet' => 'Mars')); 
```

现在我有一个模板 HTML `application/templates/my_html_template.php`，该文件包含具有一些变量模板 {{words}} 的 HTML 语义。我确实知道我需要渲染它，但我似乎无法理解事情是如何工作的。我应该使用Mustache`file_get_contents`中`fwrite`呈现的 HTML 来创建新 HTML 文件的所需输出到某个目录吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T06:49:23.170

构造`Mustache_Engine`函数采用一组选项，其中一个是[`loader`](https://github.com/bobthecow/mustache.php/blob/master/src/Mustache/Engine.php#L53-L54). 此类将负责从传递给的第一个参数中获取模板内容`render`。默认加载器是`Mustache_Loader_StringLoader`，但库中还有其他加载器可以使用，例如[Mustache_Loader_FilesystemLoader](https://github.com/bobthecow/mustache.php/blob/master/src/Mustache/Loader/FilesystemLoader.php)。这将负责加载任务的模板文件部分。渲染后，您可以使用`file_put_contents()`将其推入文件中。

# javascript - IndexedDB 在升级期间覆盖值

> ID：12084215
> 
> 赞同：0
> 
> 时间：2012-08-23T03:09:33.600
> 
> 标签：javascript, database, html, indexeddb

我创建了一组 JSON 数据，这些数据在升级事件期间传递到 IndexedDB。它创建了一个看起来没有问题的非常好的 IndexedDB 数据库。问题是当您将数据库从版本 1 升级到 2 时，它会覆盖所有现有数据，因为它只是遍历 JSON 并应用它。

升级中必须有某种方法来防止没有唯一键的新数据库项写入任何内容。我该怎么做？如下只是覆盖当前数据。

```
objectStore = event.currentTarget.transaction.objectStore('player');
objectStore.put({ key: 'non unique, but I replace my twin\'s data anyway', data: value }); 
```

在此先感谢您的帮助，搜索了所有内容，但找不到解决此问题的方法。

**编辑**2012 年 8 月 24 日

根据 Kristof 使用 get 检查信息的建议，我做了一些挖掘和研究。找到答案后，我决定编写一些伪代码来帮助您。

```
// Create the get request inside your upgrade
var tableData = event.currentTarget.transaction.objectStore('your table name');
var getData = tableStore.get('your key');

// Run the get request
getData.onsuccess = function (e) {
    var result = e.target.result;

    // Immediately exit if the current result is not undefined
    if (result !== undefined) {
        return;
    }

    // Note, you may or may not need a closure to write data in the callback
    // See here for more info on closures in events http://stackoverflow.com/questions/3495679/passing-parameters-in-javascript-onclick-event#answer-3495722
    tableStore.add('data to add');
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:56:55.643

只有在找到数据库中已经存在的键时，才会发生数据覆盖。如果它没有找到密钥，它将被添加。

如果您想防止此数据被第二次插入或更新，有一些解决方案：

*   在放入数据之前，检查是否存在任何与该键相关的内容（get 方法）
*   使用 add 方法而不是 put。（当密钥已经存在时，这将导致错误。不是很好）
*   检查旧版本的数据库是 0 还是什么都没有，然后才运行插入。

# powershell - 如何获取从 Powershell 启动的 Explorer 的进程 ID

> ID：12084221
> 
> 赞同：2
> 
> 时间：2012-08-23T03:10:43.713
> 
> 标签：powershell, windows-explorer

我从 Powershell 启动“Explorer.exe”，并希望获取资源管理器窗口的进程 ID，这样我就不会在其他资源管理器窗口上误操作。

代码：Start-Process "Explorer.exe" -PassThru 结果：我可以看到进程 ID，但它与 UISpy 或任务管理器中窗口的真实进程 ID 不同。似乎 explorer.exe 启动另一个进程（B）可以自行退出，最后我们看到进程（B）。我得到的过程是退出的过程。问题：我怎样才能得到真正的进程ID（B）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T03:51:43.520

Explorer.exe 将立即启动一个全新的进程，但该进程将很快终止，将其状态移交给现有的资源管理器进程。一般来说，它不会像大多数程序那样持续存在并添加到不断增长的进程​​集合中。

看看这个：

```
"Old explorer.exe instances"
Get-Process explorer

Start-Process explorer.exe
sleep 1  # wait for this one to die

"New explorer.exe instances"
Get-Process explorer 
```

您将看到它是同一组资源管理器实例。我认为这与 reg 密钥有关`HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced [SeparateProcess]`

# java - 带有 Paint 方法的 Java Applet 问题

> ID：12084222
> 
> 赞同：0
> 
> 时间：2012-08-23T03:10:54.943
> 
> 标签：java, methods, applet, paint

到目前为止，我已经让这个小程序进入了工作阶段；唯一的问题是它只有在鼠标移动时才有效；如果鼠标不动，那么整个事情就会停止。如果移动鼠标，它会再次开始工作。

它的工作方式是通过 mouseMoved 方法调用paint 方法。每次移动鼠标，它都会抛出paint方法，游戏继续进行。问题出在没有调用 mouseMoved 方法时，因此没有调用 paint 方法，整个事情只是暂停，直到鼠标移动。

我尝试了以下方法：

让paint方法是递归的，所以它会调用自己。这样做的问题是鼠标监听器不起作用，因为程序正忙于绘制一堆移动的东西。

我还尝试使用线程，以便鼠标侦听器会中断绘制方法。这不起作用，尽管这可能是因为我不了解线程是如何工作的。如果有人知道如何实现这一点，它似乎会起作用。

这是有问题的区域的代码片段；

```
 public void paint( Graphics gr) {
     if( Earth != null){

        displayWorld(Earth);
        for(int a =0; a < 100; a++){      
           Earth.run();
           Earth.Worlds.get(2).forceMove(x,y);
          }
        try
        {
           Thread.sleep(100);  
        }
           catch (InterruptedException ie)
           {}   
     }

  }

public void mouseMoved( MouseEvent e ) {
     x = e.getX();
     y = e.getY();
     Graphics gr = getGraphics();      
    paint(gr);
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T03:29:57.330

我建议再看看线程。这是游戏编程（以及其他编程领域）中的一个非常标准的问题——你有一个线程，永远循环，包含你的游戏逻辑。它会更新玩家的位置、计算、健康等，或者如果没有工作可做，它会休眠。如果完成需要重绘小程序图形的工作，那么您的线程调用`repaint()`将重绘请求发送到事件调度线程（在每个 Java 程序中自动创建的特殊线程）。

当玩家移动鼠标或提供键盘输入时，您的事件侦听器会更新程序的数据结构（并戳主线程以防它处于睡眠状态）。

这些指向以前涉及 Java 游戏的 StackOverflow 问题的链接可能是一个很好的起点：

[在不冻结 UI 线程的情况下实现游戏循环的最佳方法](https://stackoverflow.com/questions/2861933/best-way-to-implement-game-loop-without-freezing-ui-thread)

[游戏循环 - 线程](https://stackoverflow.com/questions/9642967/game-loop-threads)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T03:17:51.413

那么，您的绘画过程依赖于鼠标移动？所以你需要某种方式来告诉小程序自我更新？

```
private javax.swing.Timer paintTimer;

public void start() {
    // Your normal setup...

    paintTimer = new javax.swing.Timer(250, new ActionListener() {
        public void actionPerformed(ActionEvent evt) {
            Graphics gr = getGraphics();      
            paint(gr);
        }
    });
    paintTimer.setRepeats(true);
    paintTimer.setCoalesce(true);
    paintTimer.start();
}

public void mouseMoved( MouseEvent e ) {
    x = e.getX();
    y = e.getY();

    // You could wait for the timer to trigger the repaint for you...
    repaintTimer.restart();

    Graphics gr = getGraphics();      
    paint(gr);
} 
```

不过，您将需要把握时机

# php - 如何根据星期几打开或关闭内容？

> ID：12084223
> 
> 赞同：0
> 
> 时间：2012-08-23T03:10:56.010
> 
> 标签：php, jquery

我正在使用 jQuery 循环插件来运行包含 3 张幻灯片（A、B、C）的文本标题和图像的基本滑块。

我希望能够在周一、周三、周五、周日显示幻灯片 A 和 B；

然后在周二、周四、周六滑动 A 和 C。

所以我正在寻找某种基于脚本或 PHP 的解决方案来根据星期几打开和关闭内容。有人对最佳方法有任何建议吗？

这是我的代码示例的链接（无法在这篇文章中完全显示）：

[http://www.alexcreedy.com/slide/sample-code-for-forum.html](http://www.alexcreedy.com/slide/sample-code-for-forum.html)

问候，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T03:26:45.500

您可以像这样获得一周中的当前日期：

```
$day = date( "w", time()); 
```

从那里，您可以将您想要的任何幻灯片包装起来，`if`以确定它是否被显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:48:52.517

这是一个客户端解决方案。

使用所有幻灯片和以下 jQuery 提供完全相同的 HTML，这将在初始化滑块之前删除不需要的 div。

```
$(function() {
    var index = ($.inArray((new Date()).getDay(), [0, 1, 3, 5]) > -1) ? 2 : 1;
    $("#solutionFade").find('div').eq(index).remove().end().end().cycle({
        fx: 'fade',
        speed: 500,
        timeout: 3000
    });
}); 
```

这将在页面加载时运行，并且生成的滑块将在页面的整个生命周期内持续存在。

使用客户端方法，可以使滑块适应一天中的时间过渡到午夜，而无需重新加载页面，但解决方案会复杂得多。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-23T03:22:12.583

在我看来，我会计算一周中 7 天的顺序。使用 setInterval() 来检查这个序列，并且可以配合你的循环功能。

# git - gitignore - 致命：没有添加文件

> ID：12084227
> 
> 赞同：53
> 
> 时间：2012-08-23T03:11:25.857
> 
> 标签：git

我对 git 有疑问，更准确地说是 gitignore。

我创建了一个空文件夹 Initialized git

```
mkdir fold
cd fold
git init 
```

更新了 gitignore（如下）

```
 *.prjx 
```

承诺 gitignore

```
git add .gitignore
git commit -m "update gitignore" 
```

现在我的根目录中有几个文件（其中一个 .prjx）和文件夹（折叠），我想添加所有这些文件，但是当我运行时

```
git add * 
```

我收到以下消息

```
The following paths are ignored by one of your .gitignore files:
ftc.prjx
Use -f if you really want to add them.
fatal: no files added 
```

我不想添加它，我只想添加所有其他文件和文件夹。据我了解 .gitignore 应该完全处理这个问题，所以为什么我会收到上面的消息？我错过了什么吗？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-08-23T03:13:49.390

你应该跑`git add .`而不是`git add *`

由`*`shell 解释并替换为当前位置的所有文件和文件夹。显然**ftc.prjx**就是其中之一，而 git 只是警告该文件在忽略列表中。

# c# - 当我有一个双倍结构时，为什么我的结构会出现意外的大小？

> ID：12084229
> 
> 赞同：5
> 
> 时间：2012-08-23T03:11:49.750
> 
> 标签：c#, struct, double

```
public struct TestStruct
{
    public int first;
    public int second;
    public int third;
} 
```

Marshal.SizeOf 返回 12，这是我假设的，因为每个整数是 4 个字节。如果我将第三个更改为 double 而不是 int，我希望 Marshal.SizeOf 返回 16。确实如此。但是，如果我要添加一个双精度的第四个，Marshal.SizeOf 返回 24，而我预计是 20。我可以有 10 个 int，最终每个 int 都计为 4 个字节。但是，如果我在 3 个整数之后添加一个双精度数，则大小不是我所期望的。

```
public struct TestStruct //SizeOf 12
{
    public int first;
    public int second;
    public int third;
}  

public struct TestStruct //SizeOf 16
{
    public int first;
    public int second;
    public double third;
}  

public struct TestStruct //SizeOf 24, but I feel like it should be 20
{
    public int first;
    public int second;
    public double third;
    public int fourth;
} 
```

我的想法让我误入歧途了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T03:40:42.587

除了 JimR 的回答，您可以使用 StructLayout 属性显式更改此行为：

```
[StructLayout(LayoutKind.Sequential, Pack = 1)]
public struct TestStruct // sizeof is now 20
{
    public int first;
    public int second;
    public double third;
    public int fourth;
} 
```

你已经告诉编译器这个结构是按顺序排列的，并且包装类型应该是 1，这意味着所有的字段都直接排列在一起。Pack 0（默认值）告诉编译器使用当前平台填充。而其他任何东西（以 2 的倍数）将其布置在那些特定的边界中。不过，我建议不要这样做。根据您的使用情况，它可能会变得不可预测。

有关详细信息，请参阅此 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute.pack.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute.pack.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-23T03:33:46.863

您没有考虑放入结构中的任何填充。

在某些情况下，CPU 读取其大小的倍数会更有效。例如，一些 CPU 喜欢在 4 字节边界上对齐的整数。如果 int 未对齐，某些 CPU 必须发出 2 次读取。

当 int、float 和 double 可能被英特尔处理器上的 SSE 类型指令触及时，它们对对齐特别敏感。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-23T03:41:21.177

我相信答案在于数据字段的对齐。

例如，默认情况下，使用 C# 定义的结构将具有此属性：

```
[StructLayout(LayoutKind.Sequential)] 
```

如果您查看 LayoutKind.Sequential 的定义，它会指出：

[布局种类枚举](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.layoutkind.aspx)

> 对象的成员按导出到非托管内存时出现的顺序排列。成员根据 StructLayoutAttribute.Pack 中指定的包装进行布局，并且可以是不连续的。

如果您要指定此属性：

```
[StructLayout(LayoutKind.Auto)] 
```

你会得到你期望的大小 - 20。

# python - Python Scrapy 项目，如何用同一个蜘蛛抓取 1000 页？

> ID：12084231
> 
> 赞同：-2
> 
> 时间：2012-08-23T03:12:08.703
> 
> 标签：python, mysql, scrapy, web-crawler

我必须**抓取**1000 个结构相似但内容不同的链接。

我设计了这个蜘蛛，但我不想把每个 url 放在 start_urls 中，运行它并重复 1000 次，我把它们都放在一个文件中，所以我怎样才能以我发送 start_url 作为参数的方式重复这个过程用 a 做 1000 次...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T03:15:47.607

创建一个覆盖 BaseSpider 的**init**方法的蜘蛛。在其中，解析文件并将它们附加到 start_urls 列表中。

代码将如下所示：

```
def __init__(self, *args, **kwargs):
     #load the file here
     super(DmozSpider, self).__init__()         
     for url in some_file:
         self.start_urls.append[url] 
```

显然，循环文件的方式取决于文件的类型。

此外，您可能会考虑使用 items 管道并在解析数据后使用 mysqldb 管道来保存数据。

**编辑**

我会为你重写你的蜘蛛。从技术上讲，最好的做法是为你正在做的一些事情使用管道，但是，为了时间，我会让你当前的蜘蛛工作。一瞬间。

**试试这个**

```
 # -*- coding: utf-8 -*-
#Por: Daniel Ortiz Costa, Ivo Andres Astudillo, Ruben Quezada
#Proyecto de Academias Web - Extraer publicaciones de Scopus

from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
import datetime
import MySQLdb

class DmozSpider(BaseSpider):
    name = "scrapyscopus"

    start_urls = ["http://www.scopus.com/inward/record.url?partnerID=HzOxMe3b&scp=84858710280",]

    #id de la url actual
    id_paper_web = ""

    #Variables de la base de datos
    abstracto = ""
    keywords = ""
    anio_publicacion = ""
    tipo_documento = ""
    tipo_publicacion = ""    
    descripcion = ""
    volume_info = ""
    idioma = ""
    fecha_consulta = ""
    nombres = {}
    instituciones = {}

    #La probabilidad de que el articulo sea de alguien que buscamos
    probabilidad = 0

    def __init__(self, *args, **kwargs):
        super(DmozSpider, self).__init__()

        #load file here
        for url in some_file:
            self.start_urls.append[url]

    def parse(self, response):

        #Recibe el codigo de la pagina en la response
        hxs = HtmlXPathSelector(response)

        self.obtenerId(response.url)

        #La probabilidad de exito consta de 3 factores
        #1 - Probabilidad del 25% por pertenecer al pais
        #2 - Probabilidad del 25% por tener la misma inicial y apellido
        #3 - Probabilidad del 35% porque el articulo tenga a alguien de la universidad
        #4 - Probabilidad del 15% si es que todos los del articulo son de la universidad

        #Las dos primeras condiciones ya se cumplieron, por lo que se suma 50%
        #la otra se determinará leyendo las instituciones dentro del código 
        self.probabilidad = self.probabilidad+50;

        #ABSTRACTO
        #Se extrae el abstracto que es el parrafo que contiene un valor align=justify
        lista =  hxs.select('//p[contains(@align, "justify")]/text()')  

        #Se saca el texto
        self.abstracto = lista[0].extract()

        #KEYWORDS
        #Se encuentran en el ultimo resultado de la lista de parrafos con clase marginB3
        lista =  hxs.select('//p[@class="marginB3"]/text()')          

        #Se saca el texto del ultimo resultado
        self.keywords = lista[len(lista)-1].extract()

        #TIPO DE PUB, TIPO DE DOC E IDIOMA
        #Se encuentran todos con la clase paddingR15
        lista =  hxs.select('//span[@class="paddingR15"]')

        #Se analiza cada uno de los span recibidos en busca del correcto
        for i in lista:

            #Se analiza el strong que retiene la descripcion de lo que vemos
            #Para sacar el lenguaje por ejemplo, debemos buscar la linea "Original Language"
            #Luego de ello proceder a extraer el texto del span padre

            if (str(i.select('.//strong/text()').extract()[0]) == "Source Type: "):
                self.tipo_publicacion=i.select('text()').extract()[0]; 

            if (str(i.select('.//strong/text()').extract()[0]) == "Original language: "):
                self.idioma=i.select('text()').extract()[1];

            if (str(i.select('.//strong/text()').extract()[0]) == "Document Type: "):
                self.tipo_documento=i.select('text()').extract()[0]; 

        #FECHA DE CONSULTA
        #Para la fecha de consulta se obtiene la fecha actual
        self.fecha_consulta = datetime.datetime.now().strftime("%Y-%m-%d")

        #DESCRIPCION
        #La descripcion se encuentra formada por la zona del encabezado
        #Se extrae primeramente el titulo, que es un h2 de clase sourceTitle
        lista =  hxs.select('//h2[@class="sourceTitle"]/text()') 

        #Luego se la agrega a la cadena de descripcion
        self.descripcion=self.descripcion+str(lista[0].extract())+"\n";

        #Se obtiene la informacion del volumen que tambien pertenece a la descripcion
        lista =  hxs.select('//div[@class="volumeInfo"]/text()')             

        #Se la extrae
        self.volume_info=str(lista[0].extract())

        #Se la agrega a la cadena de la descripcion
        self.descripcion=self.descripcion+self.volume_info

        #Se debe extraer el anio de publicacion desde la informacion de volumeen
        #Para ello se llama al metodo respectivo que se encarga de la extraccion
        self.obtenerAnioPublicacion()

        #AUTORES
        #Se determina el parrafo donde se encuentran los nombres de los autores
        lista =  hxs.select('//p[@class="smallLink authorlink svDoNotLink paddingB5"]')

        #Se seleccionan  los span directos de ese parrafo
        lista = lista.select('span')

        for elemento in lista:

            lista2 = elemento.select('.//sup')

            for i in lista2:
                self.nombres[elemento.select('.//span[@class="previewTxt"]/text()').extract()[0]]=i.select('text()').extract()[0]
                break;

        #DIRECCIONES
        #Se determina el parrafo donde se encuentran los nombres de los autores
        lista =  hxs.select('//p[@class="affilTxt"]')

        #Se determina una nueva lista con los sup y su texto
        lista2 = lista.select('.//sup/text()')

        #Se la lista siguiente mostrará los datos procesados
        letras=[]

        #Obtendrá la letra de cada publicación
        for i in lista2:
            letra = str(i.extract()[0])
            letras.append(letra)

        #Se determina el parrafo donde se encuentran los nombres de los autores
        lista3 = lista.select('text()')

        institucion=[]

        contador=0;

        for i in lista3:

            if(i.extract()!="\n"):
                if "Loja" in i.extract():
                    contador=contador+1

                institucion.append(i.extract())

        if contador>=1:
            if contador==1:
                self.probabilidad=self.probabilidad+35
            else:
                if contador==len(institucion):
                    self.probabilidad=self.probabilidad+15

        self.instituciones=dict(zip(letras, institucion))

        self.guardarDatos()

    """
    Metodo responsable de obtener el 
    anio de publicacion del articulo.
    """
    def obtenerAnioPublicacion(self):

        #Divide el volumen de acuerdo a la , que posee
        componentes=self.volume_info.split(', ')      

        #Dependiendo del tipo de publicacion, la posicion del anio variara
        if(self.tipo_publicacion == "Journal"):            
            self.anio_publicacion=componentes[2]

        else:
            self.anio_publicacion=componentes[0]

    """
    Metodo de obtener el id de la url actual
    """
    def obtenerId(self, url):   

        db = MySQLdb.connect("localhost","root","","proyectoacademias" )

        cursor = db.cursor()

        sql = "SELECT id FROM test WHERE url like \'"
        sql = sql + url
        sql = sql + "\'"

        cursor.execute(sql)

        data = cursor.fetchone()

        for row in data:
            print str(row)
            self.id_paper_web=str(row)

        db.close()

    """
    Metodo de guardar los datos

    """
    def guardarDatos(self):
        db = MySQLdb.connect("localhost","root","","proyectoacademias" )

        cursor = db.cursor()

        sql = "UPDATE test SET abstract=\'"+str(self.abstracto)+"\', fecha_consulta=\'"+str(self.fecha_consulta)+"\', anio_publicacion=\'"+str(self.anio_publicacion)+"\', probabilidad="+str(self.probabilidad)+" WHERE id = "+str(self.id_paper_web)

        print "\n\n\n"+sql+"\n\n\n"
        cursor.execute(sql)      
        db.commit()

        for i in range (len(self.nombres)):
            sql = "INSERT INTO test_autores VALUES (\'"+self.nombres.keys()[i]+"\', "+str(self.id_paper_web)+", \'"+self.instituciones[self.nombres[self.nombres.keys()[i]]]+"\', "+str((i+1))+")"
            print "\n\n\n"+sql+"\n\n\n"
            cursor.execute(sql)
            db.commit()

        db.close() 
```

**除了修改init**和 obtenerId 方法之外，我没有更改任何内容。

# ruby-on-rails - 如何使用 Ruby 元编程向 Rails 模型添加回调？

> ID：12084234
> 
> 赞同：9
> 
> 时间：2012-08-23T03:12:22.617
> 
> 标签：ruby-on-rails, ruby, metaprogramming

我编写了一个简单的 Cacheable 模块，它使得在父模型中缓存聚合字段变得简单。该模块要求父对象实现该`cacheable`方法和`calc_`每个需要在父级缓存的字段的方法。

```
module Cacheable
  def cache!(fields, *objects)
    objects.each do |object|
      if object.cacheable?
        calc(fields, objects)
        save!(objects)
      end
    end
  end

  def calc(fields, objects)
    fields.each { |field| objects.each(&:"calc_#{field}") }
  end

  def save!(objects)
    objects.each(&:save!)
  end
end 
```

我想向包含此模块的 ActiveRecord 模型添加回调。此方法需要模型实现需要缓存的父模型和字段名称的散列。

```
def cachebacks(klass, parents)
  [:after_save, :after_destroy].each do |callback|
    self.send(callback, proc { cache!(CACHEABLE[klass], self.send(parents)) })
  end
end 
```

如果我使用以下方法手动添加两个回调，这种方法效果很好：

```
after_save proc { cache!(CACHEABLE[Quote], *quotes.all) }
after_destroy proc { cache!(CACHEABLE[Quote], *quotes.all) } 
```

但是，当我尝试使用该`cachebacks`方法将这些添加到回调时，我收到以下错误。

```
cachebacks(Quote, "*quotes.all")

NoMethodError: undefined method `cachebacks' for #<Class:0x007fe7be3f2ae8> 
```

如何动态地将这些回调添加到类中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T04:08:28.223

这看起来是一个很好的案例[`ActiveSupport::Concern`](http://api.rubyonrails.org/classes/ActiveSupport/Concern.html)。您可以`cachebacks`稍微调整您的方法以将其添加为包含类的类方法：

```
module Cacheable
  extend ActiveSupport::Concern

  module ClassMethods
    def cachebacks(&block)
      klass = self
      [:after_save, :after_destroy].each do |callback|
        self.send(callback, proc { cache!(CACHEABLE[klass], *klass.instance_eval(&block)) })
      end
    end
  end

  def cache!(fields, *objects)
    # ...
  end

  # ...
end 
```

要使用它：

```
class Example < ActiveRecord::Base
  include Cacheable
  cachebacks { all }
end 
```

您传递给的块`cachebacks`将在调用它的类的上下文中执行。在此示例中，`{ all }`相当于调用`Example.all`并将结果传递给您的`cache!`方法。

* * *

为了在评论中回答您的问题，`Concern`封装了一个通用模式并在 Rails 中建立了一个约定。语法稍微优雅一些​​：

```
included do
  # behaviors
end

# instead of

def self.included(base)
  base.class_eval do
    # behaviors
  end
end 
```

它还利用另一个约定来自动正确地包含类和实例方法。`ClassMethods`如果您在名为and的模块中命名这些方法`InstanceMethods`（尽管如您所见，`InstanceMethods`它是可选的），那么您就完成了。

最后，它处理模块依赖关系。文档给出了一个很好的例子，但从本质上讲，它防止包含类必须显式地包含除了它实际感兴趣的模块之外的依赖模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T04:51:24.083

**感谢 Brandon 的回答，帮助我编写了解决方案。**

将以下内容添加到您的模型中。每个模型可以有`cacheback`多个父关系。您还可以通过传入哈希而不是特定字段的字符串来为父表和子表指定不同的属性名称。

```
include Cacheable
cacheback(parent: :quotes, fields: %w(weight pallet_spots value equipment_type_id)) 
```

此模块扩展 ActiveSupport::Concern 并添加回调并执行缓存。您的父类将需要实现`calc_field`方法来完成缓存工作。

```
module Cacheable
  extend ActiveSupport::Concern

  module ClassMethods
    def cacheback(options)
      fields = Cacheable.normalize_fields(options[:fields])
      [:after_save, :after_destroy].each do |callback|
        self.send(callback, proc { cache!(fields, self.send(options[:parent])) })
      end
    end
  end

  def cache!(fields, objects)
    objects = objects.respond_to?(:to_a) ? objects.to_a : [objects]
    objects.each do |object|
      if object.cacheable?
        calc(fields, objects)
        save!(objects)
      end
    end
  end

  def calc(fields, objects)
    fields.each do |parent_field, child_field|
      objects.each(&:"calc_#{parent_field}") if self.send("#{child_field}_changed?".to_sym)
    end
  end

  def save!(objects)
    objects.each { |object| object.save! if object.changed? }
  end

  def self.normalize_fields(fields)
    Hash[fields.collect { |f| f.is_a?(Hash) ? f.to_a : [f, f] }]
  end

end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T03:46:48.333

正如我在评论中所说，如果我不理解你的问题，我可能不对。这对你有用吗？

```
module Cacheable
  def self.included(base)
    base.class_eval do
      def self.cachebacks(klass, parents)
        [:after_save, :after_destroy].each do |callback|
          self.send(callback, proc { cache!(CACHEABLE[klass], self.send(parents)) })
        end
      end
    end
  end

  def cache!(fields, *objects)
    objects.each do |object|
      if object.cacheable?
        calc(fields, objects)
        save!(objects)
      end
    end
  end

  def calc(fields, objects)
    fields.each { |field| objects.each(&:"calc_#{field}") }
  end

  def save!(objects)
    objects.each(&:save!)
  end
end 
```

# r - 图中的颜色规范

> ID：12084239
> 
> 赞同：1
> 
> 时间：2012-08-23T03:13:00.033
> 
> 标签：r

我正在使用 Epi 包中的 ROC 函数，其文档指定您可以将图形参数传递给绘图函数。默认情况下，ROC 会生成灰度图。我试图只将 ROC 曲线本身（锯齿状线）染成红色。

这是我尝试过的：

```
 x = rnorm(100)
    y = c(rep(0,50), rep(1,50))

    library(Epi)

    par(col="red"); ROC(form = y~x, plot="ROC") 
```

这会创建一个颜色不一致的奇怪图形。par 文档确实描述了一些特定的方法，如 col.lab 和 col.axis 来为特定的图形元素着色，但不包括主线颜色的参数。

我不得不认为这个基本问题必须在其他地方得到解决，但到目前为止还没有运气搜索 R 文档和谷歌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T03:32:34.570

对于您的具体情况，如果您想修改功能`ROC`以满足您的需要，您可以执行以下操作。在控制台输入`ROC`以查看`ROC`. 将其复制并粘贴到文件中并为其分配一个新名称，例如`ROC2`. 查找以下代码：

```
if (any(!is.na(match("ROC", toupper(plot))))) {
        plot(1 - res[, 2], res[, 1], xlim = 0:1, xlab = "1-Specificity", 
            ylim = 0:1, ylab = "Sensitivity", type = "n", ...)
        if (is.numeric(grid)) 
            abline(h = grid/100, v = grid/100, col = gray(0.9))
        abline(0, 1, col = gray(0.4))
        box()
        lines(1 - res[, 2], res[, 1], lwd = lwd) 
```

您将希望在通话中通过`col = "red"`或类似的方式。`lines`例如，您可以`mycol`向函数本身添加一个参数，然后将该行更改为：

```
lines(1 - res[, 2], res[, 1], lwd = lwd, col = mycol) 
```

此外，正如我在下面提到的，您还必须更改 to 的所有`ROC.tic`实例`Epi:::ROC.tic`。

# ruby-on-rails - 对象不保存在heroku上，但在本地

> ID：12084242
> 
> 赞同：1
> 
> 时间：2012-08-23T03:13:10.890
> 
> 标签：ruby-on-rails, heroku

一个用户拥有多个职位。这是 Auth 控制器的一部分，它调用 LinkedIn 以供用户进行身份验证：

```
positions.each do |position|

    @li_pos_id = position.id
    @title = position.title
    @company = position.company.name
    @industry = position.company.industry
    @start_month = position.start_date.month
    @start_year = position.start_date.year
    @end_month = position.end_date.month
    @end_year = position.end_date.year

    current_user.positions.build(li_pos_id: @li_pos_id, title: @title, company: @company, industry: @industry, 
      start_month: @start_month, start_year: @start_year, end_month: @end_month, end_year: @end_year)
end 
```

我正在努力弄清楚为什么 current_user.positions.build(...) 在我的开发（Postgres）数据库中而不是在 Heroku（也是 Postgres）中创建一个位置。我的用户对象在身份验证后创建得很好。从我的会话控制器：

```
def create
      user = User.from_omniauth(env['omniauth.auth'])
      session[:user_id] = user.id
      redirect_to auth_path
    end 
```

从我的用户模型中调用以下内容：

```
def self.from_omniauth(auth)
      where(auth.slice('provider', 'uid')).first || create_from_omniauth(auth)
    end

    def self.create_from_omniauth(auth)
      create! do |user|
        user.provider = auth['provider']
        user.uid = auth['uid']
      end
    end 
```

我的用户模型包含必要的“has_many :positions”，而我的职位模型包含“belongs_to :user”。无论如何， current_user.positions.build(...) 行在开发中创建了适当的位置，但在生产中根本没有。

非常感谢这里的任何帮助！谢谢你。

# c# - 如何从 MSWord 中为数据库过滤掉格式奇怪的数据？

> ID：12084243
> 
> 赞同：0
> 
> 时间：2012-08-23T03:13:31.853
> 
> 标签：c#, encoding, ms-word

我们的编程团队目前使用的是一个使用Win1252编码的数据库，但是这个数据库本身也不太擅长过滤掉坏数据。

很多时候，我们程序的最终用户只是简单地从 MSWord 复制并粘贴他们的信息，然后插入到我们的数据库中，这会导致我们的数据库中出现各种有时无法解释的时髦字符。

目前是否有任何库可以解析使用 MSWord 的本机编码编码的字符串并将其转换为*类似*的ascii、UTF8 或 Win1252 格式？

类似地，我的意思是将看起来像 `` 的奇怪双引号翻译成典型的 "。

如果我的问题完全模糊，请通知我，以便我可以根据需要进行更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T03:21:34.977

在此处查看 Jeff Atwood 的解决方案：http: [//www.codinghorror.com/blog/2006/01/cleaning-words-nasty-html.html](http://www.codinghorror.com/blog/2006/01/cleaning-words-nasty-html.html)

使用正则表达式。FWIW，很多 RTE 在清理复制和粘贴的内容时使用类似的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T03:58:35.830

好的，看来 MSWord 确实使用了 Win1252 编码 - 所以我不应该有太多的麻烦来保存复制+粘贴的文本。

用户总是有可能从不同编码的来源复制+粘贴，因此问题仍然存在。我可以在互联网上找到的最佳答案是指创建编码（编码 ANSI = Encoding.GetEncoding(1252)），然后设置“回退” - 无法识别编码的字符的替换字符（ANSI.EncoderFallback = new EncoderReplacementFallback （字符串。空）；）。

我从 Stack Overflow 的另一个问题中找到了一个有用的引用：“Windows-1252 代码页与 ISO-8859-1 代码页不同的 0x80 - 0x9F 范围”，这显然是大多数 MSWord 转换问题的根源。

如果有人提出这个问题，他没有使用 1252 编码的数据库（我希望是这种情况，因为 1252 很糟糕）。MSWord 的主要问题是“智能引号”，它会自动将常规引号更改为。这个问题有很多解决方案，只需使用谷歌搜索“智能报价”即可轻松找到。

希望这个问题/答案可以帮助那些遇到微软向我们抛出类似繁琐问题的人。

# c++ - 如何为作为结构成员的数组赋值？

> ID：12084244
> 
> 赞同：2
> 
> 时间：2012-08-23T03:13:33.540
> 
> 标签：c++, g++

我定义了以下结构

```
struct CCPtDist
{
  double[] wDist = new double[8];
}; 
```

我想构建一个名为 tmpPtDist 的“CCPtDist”变量，并希望为 wDist 分配一个双数：

```
CCPtDist tmpPtDist;
tmpPtDist.wDist[0] = 233.7; 
```

但是 g++ 编译器返回错误：'struct CCPtDist' has no member named 'wDist'？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T03:21:34.510

作为 C 样式数组的替代方案，您可以使用`std::array`：

```
#include <array>

struct CCPtDist
{
  std::array<double,8> wDist;
};

int main()
{   
  CCPtDist tmpdist;
  tmpdist.wDist[0]=233.7;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T03:17:00.570

代码中有很多错误。首先，如果您将数组声明为成员，则内存将作为结构的一部分内联分配。您不能只为其分配任意指针。其次，我认为您无论如何都没有正确声明数组。第三，您需要将复杂的初始化放在构造函数中。我很惊讶它没有给你一个编译错误`double[] wDist = new double[8];` 。

试着把它改成这样

```
struct CCPtDist
{
    double* wDist;

    CCPtDist(): wDist(new double[8]) {}
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T03:31:08.223

如果您想要一个固定大小（！）数组作为结构的一部分，则不需要动态分配（即`new`）：

```
struct CCPtDist
{
  double wDist[8];
}; 
```

就足够了。但是，请注意，该数组的 8 个值不是以这种方式初始化的。它们将包含随机垃圾。所以最好添加一个初始化数组的构造函数：

```
struct CCPtDist
{
  double wDist[8];
  CCPtDist():wDist() {}
}; 
```

如果您的编译器支持它，则使用`std::array`C++11 中引入的 using 可能是一种更好的方法，如 SRN 的回答中所述。

# java - Java Microedition RMS 在打开时是否标记为已修改但未进行数据更改？

> ID：12084245
> 
> 赞同：3
> 
> 时间：2012-08-23T03:13:41.980
> 
> 标签：java, mobile, java-me, rms

我想知道打开 RMS 记录是否会检查它是否在 javame 中进行了修改。例如

```
RecordStore rs;

//First RMS access 
rs.open("gamescores",true);
rs.addRecord(null,0,0);
rs.closeRecordStore;

//Second RMS access
rs = RecordStore.open("gamescores",true);
long timeStamp = rs.getLastModified();
rs.closeRecordStore(); 
```

getLastModified() 将返回第一次 RMS 访问或第二次访问的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T04:29:37.513

另一种方法旨在跟踪记录的修改 - [getVersion()](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/rms/RecordStore.html#getVersion%28%29 "API 文档")：

> 每次（通过 、 或方法）修改记录存储时`addRecord`，`setRecord`其`deleteRecord`版本都会增加。MIDlet 可以使用它来快速判断是否有任何修改。初始版本号取决于实现。增量为大于 0 的正整数。版本号仅在 RecordStore 更新时增加。增量值不必是恒定的并且可以随每次更新而变化。

至于[getLastModified](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/rms/RecordStore.html#getLastModified%28%29 "API 文档")方法，它的规范不允许以可移植的方式可靠地说明您所询问的差异：

> 返回上次修改记录存储的时间，采用 System.currentTimeMillis() 使用的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:27:17.160

到目前为止，我从未使用过这种`getLastModified()`方法，所以我用谷歌搜索并找到了[示例](http://www.java2s.com/Code/Java/J2ME/BirthdayDatabase.htm)。所以是的，该方法以长格式返回上次修改时间，您可以轻松地将其转换为日期。

# matlab - Octave 和 MATLAB 的区别

> ID：12084246
> 
> 赞同：284
> 
> 时间：2012-08-23T03:13:47.703
> 
> 标签：matlab, octave

我是一名了解[Python](https://en.wikipedia.org/wiki/Python_%28programming_language%29)、[Ruby](https://en.wikipedia.org/wiki/Ruby_%28programming_language%29)和一些[C](https://en.wikipedia.org/wiki/C_%28programming_language%29)的程序员，他正在尝试决定是学习[GNU Octave](https://en.wikipedia.org/wiki/GNU_Octave)还是[MATLAB](https://en.wikipedia.org/wiki/MATLAB)。我知道它们有很多[共同点](http://en.wikibooks.org/wiki/MATLAB_Programming/Differences_between_Octave_and_MATLAB)，但我不清楚语法有多相似，甚至数据结构有多相似。上面的链接显示了几个在语法上相似或相同的示例。整个语言都是这样吗？

我正在尝试学习该语言以进行更多的科学计算，可能会使用一些图像分析库。

此外，MATLAB 是否物有所值？

* * *

## 回答 #1

> 赞同：241
> 
> 时间：2012-08-23T04:08:55.387

我不会向您提供完整的差异列表，而是向您提供我对此事的看法。

如果您仔细阅读您提供的 wiki 页面，您会经常看到诸如“Octave 支持两者，而 MATLAB 需要第一个”等句子。这表明 Octave 的开发人员试图使 Octave 语法*“优于”* MATLAB。

这种态度让 Octave 完全失去了它的目的。Octave 背后的想法是（或者*已经成为*，我应该说，请参阅下面的评论）拥有一个运行 m-code 的开源替代方案。如果它试图变得“更好”，它就会试图变得*不同*，这与大多数人使用它的原因不符。以我的经验，运行在 MATLAB 中开发的东西永远不会一次性运行，除了非常简单、非常短的东西——对于任何相当大的函数，我总是需要翻译很多东西才能在 Octave 中运行，如果不要从头开始重写。怎么这么*好*，实在看不出来。。。

此外，如果您学习 Octave，在 Octave 中允许使用很多在 MATLAB 中不允许使用的语法。含义——用 Octave 编写的代码在没有大量转换的情况下通常无法在 MATLAB 中运行。*反过来也不兼容！*

我可以继续说：MathWorks 有许多 MATLAB 工具箱，还有[Simulink](https://en.wikipedia.org/wiki/Simulink)及其相关产品，在 Octave 中确实没有同类产品（是的，您必须为此付费。但您的雇主/学校通常都会这样做，而且，它至少*存在*），证明符合多个行业标准、测试工具、验证工具、需求管理系统、报告生成、更大的社区和用户群等等等等。MATLAB 只是一个更大的东西的一小部分。八度是……只是八度。

所以，我的建议：

*   了解您的学校是否会为 MATLAB 付费。他们经常会。
*   如果他们不这样做，并且如果您可以凑钱，请购买 MATLAB 并学习正确使用它。从长远来看，这是更好的决定。
*   如果你真的拿不到钱——使用 Octave，但*学习*MATLAB 的语法并远离 Octave-only 语法。（见说明）

为什么最后一点？因为在科学领域，通常有完全用 MATLAB 编写的大型代码库。有教授、工程师、学生、专业编码员，还有很多人都知道 MATLAB 的所有复杂的血腥细节，而对 Octave 却知之甚少。

如果你得到一份新工作，而新办公室里的每个人都说西班牙语，那么要求每个人从那时起开始说英语是有点自大的，仅仅是因为*你*不会说/不喜欢西班牙语。与 MATLAB 和 Octave 相同。

> 注意：Octave 可以在“传统模式”下运行（通过在启动 Octave 时包含 --traditional 标志），这使得在使用某些 Octave-only 语法时会出错。

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2012-08-23T03:56:49.870

[Octave 的常见问题解答](http://wiki.octave.org/FAQ#How_is_Octave_different_from_Matlab.3F)中提供了指向差异列表的更完整链接。理论上，在 Matlab 中运行的所有代码都应该在 Octave 中运行，而 Octave 开发人员将与 Matlab 的不兼容视为错误。所以理论上你的第一个问题的答案是肯定的。当然，所有软件都有错误，Octave 或 Matlab（是的，Matlab 也是）都不能避免它们。您可以报告它们，有人会尝试修复它们

Octave 也有[额外的特性](http://wiki.octave.org/Differences_between_Octave_and_Matlab#What_features_are_unique_to_Octave?)，其中大部分是额外的语法，在我看来，它们使代码更具可读性和更有意义，特别是如果您习惯于其他编程语言。

但 Octave 不仅仅是金钱成本。Octave 在自由的意义上也是自由的，它是自由的，但我不认为这是抱怨软件自由的地方。

我只在 Octave 中进行图像处理，发现图像包适合我的需要。然而，我不知道，你的会是什么。所以我对是否值得付出代价的回答是否定的，但肯定其他人会不同意。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-12-22T21:18:09.207

首先，MATLAB 是一种商业产品。因此，MATLAB 中的所有内容几乎都是开箱即用的。所有核心功能都是可靠的，如果您正在处理一个特殊项目，那么 MATLAB 可能有一个附加组件，他们可以向您出售，为您添加许多额外的特定于域的 .m 文件。它并不便宜，但它确实有效，并且可以毫无怨言地完成工作。

Octave 始终显示其开源、信息想要免费的根源。它是免费的，它会提醒你它在每一个机会都是免费的。它是由热爱 Windows 的志愿者开发的。因此 Octave 勉强在 Windows 上运行。令人惊讶的是，存在如此多的 MATLAB 功能。

但这就是问题所在。每当您尝试做一些比琐碎复杂的事情时，Octave 会突然以微妙且难以理解的方式中断。糟糕——终端驱动程序在 OpenGL 层深处发生了溢出。你不能打印。哎呀——图形用它们的字体做了奇怪的事情。祝你好运找出原因。糟糕——Octave 和其他一些晦涩难懂的免费软件之间存在一些隐藏的依赖关系，所以它不会编译。祝你好运，弄清楚它是什么。

八度响应是嘿！它是免费软件！您拥有所有源代码，并且您可以自己修复所有这些错误！也许如果我手头有无限的时间和资源，我可以把所有的时间都花在修复自由软件中的错误上，但我个人没有。如果我在学术界工作，我可能会。

因此，选择 MATLAB 还是 Octave 的核心问题归结为一个问题。有趣的是，在商业和自由软件变体之间进行选择时，这个问题总是相同的。

问题是：

你的钱比时间多吗？

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-05-14T19:11:54.553

Octave 基本上是 MATLAB 的开源版本。就是这样写的。MATLAB 有一个非常好的 GUI，使它更容易使用，但是 Octave 的下一个稳定版本也将有一个 GUI，我在不稳定的版本中测试过，看起来很棒。Octave 的漏洞更大，因为它是由一群志愿者开发和维护的，其中 MATLAB 的开发得到了行业数百万美元的资助。我仍然是学生，并且正在使用学生版的 MATLAB，但我正在考虑在带有 GUI 的稳定版本发布后转到 Octave。

MATLAB 可能比 Octave 强大得多，并且算法运行得更快，但对于大多数应用程序来说，Octave 绰绰有余，而且在我看来，它是一个完全免费的惊人工具，而 Octave 是完全免费的。

我会说使用 MATLAB，而您可以使用学术版本，但切换到 Octave 应该是无缝的，因为它们使用完全相同的语法。

最后，还有[Simulink](https://duckduckgo.com/html/?q=Wikipedia%20SIMULINK)的问题。如果您想做仿真或控制系统设计（可能还有一百万种其他用途），Simulink 非常棒，它带有 MATLAB。我认为没有其他人能接近这一点。尽管 Scilab 显然是一个“好的”开源替代品，但我还没有尝试过。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-06-27T14:11:30.997

我刚开始使用 Octave。我见过人们使用 MATLAB。上面提到的一个主要区别是 Octave 有一个命令行界面，而 MATLAB 有一个 GUI。据我说，有一个 GUI 非常适合调试。

在 Octave 中，您必须执行命令才能查看矩阵的长度等，但在 MATLAB 中，它使用良好的界面很好地显示了所有内容。但是 Octave 是免费的，并且非常适合我所做的基本任务。如果你确定你要做的只是基本的东西，或者你不确定你现在需要什么，那么选择 Octave。当您真正需要时，您可以为 MATLAB 付费。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-08-23T14:52:31.520

使 MATLAB 如此受欢迎和特别的原因在于它在不同学科中的出色工具箱。由于您的主要目标是学习 MATLAB，因此使用 Octave 或 MATLAB 并没有什么不同！

只是去购买没有任何酷炫工具箱的 MATLAB（这基本上取决于您的专业）并不是一个合理的费用！

您绝对可以从 Octave 开始，并在 Internet 上学习大量关于 MATLAB 的教程。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-01-16T19:12:24.123

我想对[罗迪·奥尔登胡斯的回答](https://stackoverflow.com/questions/12084246/differences-between-octave-and-matlab/12084602#12084602)没有什么要补充的。我通常遵循我编写的所有函数都应该在 Matlab 中运行的策略。

我在两个系统上测试的一些特定功能，用于以下用例：

a) Octave 不需要许可证服务器 - 例如，如果您的机构不支持本地许可证。我曾经在我使用脚本的系统没有连接到互联网并且要运行很长时间（在实验室的一个角落）并被许多不同用户使用的情况下使用它。备注：这不是关于许可成本，而是关于相关的技术问题。

b) Octave 支持其他平台，例如 Raspberry Pi ( [http://wiki.octave.org/Rasperry_Pi](http://wiki.octave.org/Rasperry_Pi) ) - 这可能会派上用场。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-12-20T10:49:56.990

许多语言现在都支持嵌套函数和闭包，包括 MATLAB。JavaScript 将闭包推广为一流的设计原则。

遗憾的是，Octave 不支持闭包（具有词法作用域的嵌套函数）。

根据[错误：尚不支持嵌套函数的句柄，](https://savannah.gnu.org/bugs/?func=detailitem&item_id=39257)甚至可能会产生开发人员不想要或无法正确处理的印象。顺便说一句，这个 2013 年的错误已在 2020 年修复。

这将破坏很多代码，两种方式。没有解决方法。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-08-23T15:50:33.210

Octave 和 MATLAB 有很多相似之处。但是 Octave 是一个命令行界面。您必须在命令提示符下键入每个命令，而 MATLAB 带有最好的 GUI。我建议你先使用 MATLAB 学生版；在学习了基本课程后，永久使用 GNU Octave。

现在 GNU Octave 带有一个 GUI，但它现在是一个开发版本。GNU Octave 有一些 GUI 前端，例如 guioctave、xoctave（不是免费的）、[DomainMath IDE](https://sourceforge.net/p/domainmath/wiki/wiki-home%20/)等。

# fancybox-2 - fancyBox 关闭后音频继续

> ID：12084248
> 
> 赞同：0
> 
> 时间：2012-08-23T03:13:58.403
> 
> 标签：fancybox-2

我在fancyBox 中有一个jwplayer。即使我关闭 FB 窗口，音频也会播放到剪辑的末尾。我以为我需要使用回调，但我不知道如何设置它。我希望有人可以让我知道我的代码中缺少什么来纠正这个问题。

谢谢。

```
<p class="fancylist"><a id="inline" href="#samples">Listen to Samples</a></p>
<div style="display:none;">

<div id="samples" style="width:550px;">
<script type='text/javascript' src='jwplayer.js'></script>
<div id='mediaspace'>This text will be replaced</div>
<script type='text/javascript'>
 jwplayer('mediaspace').setup({
'flashplayer': 'http://www.mydomain.com/player.swf',
'playlistfile': 'http://www.mydomain.com/Playlist.php',
'playlistsize': '500',
'playlist': 'bottom',
'controlbar': 'bottom',
'width': '470',
'height': '400'
});

</script>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T03:33:10.333

问题是关闭花式框只是（很可能）`display:none;`在用于花式框的 div 上设置。这意味着该 div 仍在页面上，并且您的视频仍在播放，您只是看不到它。

看看这个链接。非常相似的问题。

[网站 youtube 嵌入视频不断播放](https://stackoverflow.com/questions/7615031/website-youtube-embedded-video-keeps-playing)

# android - 在achartengine android中显示条形图y轴的网格线

> ID：12084252
> 
> 赞同：3
> 
> 时间：2012-08-23T03:14:31.507
> 
> 标签：android, achartengine

我在我的 android 应用程序中使用 achartengine，所以我不知道如何***在条形图中显示 y 轴的网格线***。有谁知道该怎么做？

[y 轴图像的条形图网格线](https://docs.google.com/open?id=0B3NUAgD0tB0YY1N3eDBDQjgyS1E)

感谢您的帮助

克拉克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T07:04:49.810

您可以通过调用启用所有网格线：

```
renderer.setShowGrid(true); 
```

或者您可以单独启用它们：

```
renderer.setShowGridX(true);
renderer.setShowGridY(true); 
```

但是，请注意网格线是沿着图表标签呈现的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-07T07:03:20.473

丹给出的答案是正确的。

您可以通过以下代码启用。

```
 renderer.setShowGrid(true);
 renderer.setShowGridX(true);
 renderer.setShowGridY(true);` 
```

您可以通过以下代码禁用网格

```
renderer.setShow(false);
renderer.setShowGridX(false);
renderer.setShowGridY(false); 
```

# iphone - 如何在群发短信中显示按钮？

> ID：12084253
> 
> 赞同：0
> 
> 时间：2012-08-23T03:14:33.100
> 
> 标签：iphone, ios

是否有任何标准方法可以重新创建群组短信时看到的按钮？（标记为 John Nichols、Andrew Owens 等的按钮）

![在此处输入图像描述](../Images/5374a001214a91df0cc4a1b7402f30df.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:00:45.543

您可以从以下 URL 获得帮助：

[http://alexbarinov.github.com/UIBubbleTableView/](http://alexbarinov.github.com/UIBubbleTableView/)

我还没有机会对其进行测试，但是您可能会对创建 tokenizer uitextfiled 感兴趣：

[http://cocoacontrols.com/platforms/ios/controls/jstokenfield](http://cocoacontrols.com/platforms/ios/controls/jstokenfield)

# php - php - 如何使用循环在数组中添加数据

> ID：12084256
> 
> 赞同：0
> 
> 时间：2012-08-23T03:14:42.863
> 
> 标签：php, arrays

如何使用循环在数组中添加数据

**需要示例数组**

```
$get_id = array(
array('id' => '1', 'updated' => '2012-08-11T04:08:53+01:00')); 
```

**需要添加到数组中的数据**

```
 ID
-----
1
2
3
4 
```

请注意，在这种情况下，密钥很重要

**输出应该像**

```
$get_id = array(
array('id' => '1', 'updated' => '2012-08-11T04:08:53+01:00'),
array('id' => '2', 'updated' => '2012-08-11T04:08:53+01:00'),
array('id' => '3', 'updated' => '2012-08-11T04:08:53+01:00'),
array('id' => '4', 'updated' => '2012-08-11T04:08:53+01:00')
); 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T03:17:59.447

```
foreach (array('1', '2', '3', '4') as $id) {
  $get_id[] = array('id' => $id, 'updated' => '2012-08-11T04:08:53+01:00');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T03:19:57.857

尝试这个：

```
$get_id = array(
  array('id' => '1', 'updated' => '2012-08-11T04:08:53+01:00')
);

$ids = Array('2', '3', '4');

foreach ($ids as $id) {
  $get_id[] = array('id' => $id, 'updated' => '...');
} 
```

# android - Android 生命周期 - 数据未重新加载

> ID：12084257
> 
> 赞同：0
> 
> 时间：2012-08-23T03:14:59.657
> 
> 标签：android, android-listview, android-lifecycle

我一直试图弄清楚是什么导致我的应用程序在两个`ListView`s 中丢失数据，两个选项卡中的每个选项卡中的一个，这两个选项卡都是`ListFragment`s。`ListView`当您将应用程序放在最前面时，手机上的s 随机为空。

我猜我在恢复应用程序时缺少数据恢复方式。通常，应用程序恢复并且两个选项卡中的数据都在那里。

但是，似乎只有在真正的手机上，数据才会从`ListView`s 中消失，但我找不到可重现的模式。

我使用 DDMS 以多种组合模拟垃圾收集，但无法重现数据丢失。以下是我处理生命周期、简化且基本上是全部伪代码的方式。

我查看了生命周期结构，并认为我可以正常工作。

我刷新不正确吗？

**主要活动**

```
public class MyActivity extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // I don't refresh here
        // add both tabs to the tab adapter
    }

    public void onRestart() {
        super.onRestart(); 
        reloadTab1();
        reloadTab2();
    }
} 
```

**选项卡 1**

```
public class MyTab1 extends ListFragment {
    static MyTab1Adapter mAdapter;
    ArrayList<MyObject> mItems;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // retain state
        setRetainInstance(true);
        reloadTab1(getActivity());
    }

    public void reloadTab1(Context context) {
        mItems = updateItems();

        if (mAdapter == null) {
            mAdapter = new MyTab1Adapter(context, R.layout.tab1, mItems);
            setListAdapter(mAdapter);
        }           
        else {
            mAdapter.setNewList(mItems);
            mAdapter.notifyDataSetChanged();
        }
    }
} 
```

**选项卡 2**

```
public class MyTab2 extends ListFragment {
    static MyTab2Adapter mAdapter;
    ArrayList<MyObject> mItems;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // retain state
        setRetainInstance(true);
        reloadTab2(getActivity());
    }

    public void reloadTab2(Context context) {
        mItems = updateItems();

        if (mAdapter == null) {
            mAdapter = new MyTab2Adapter(context, R.layout.tab2, mItems);
            setListAdapter(mAdapter);
        }           
        else {
            mAdapter.setNewList(mItems);
            mAdapter.notifyDataSetChanged();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:38:19.403

您的代码中有一个小错字，您使用了`onRestart`回调，但从`onResume`超类而不是`super.onRestart();`.

# ios - iOS 应用内容更新

> ID：12084264
> 
> 赞同：0
> 
> 时间：2012-08-23T03:16:06.547
> 
> 标签：ios

我正在开发一个 iOS 应用程序，它将离线显示一些文本和图像。我怎样才能做到这一点？我应该在应用程序中有多个 HTML 页面，这些页面会显示在浏览器上吗？这种方法不会给人一种高级应用程序的感觉。

我可以在用户可以浏览的应用程序中硬编码静态内容。这肯定会给人一种高级应用程序的印象。

但是，管理员可以更新应用程序，并且应该通知所有其他用户。我做了一些研究，发现这可以使用 TestFlight 来完成。但我的应用程序不处于测试阶段。

知道如何实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:02:49.187

您可以将图像和文本文件保存到设备上。例如

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSFileHandle *fileHandle = [NSFileHandle fileHandleForWritingAtPath:documentsDirectory]; 
```

`NSDocumentDirectory`是您可以永久存储下载文件的地方。 `NSCachesDirectory`是您可以存储可以随时消失的文件的地方，您可以根据需要重新创建它们。

还有其他类型的存储，[描述here](https://stackoverflow.com/questions/1567134/how-can-i-get-a-writable-path-on-the-iphone)

所以继续从您的服务器下载文本和图像文件并将它们显示给用户，这将离线工作。当然，用户必须在某些时候在线才能首先下载它们。

# java - 即使使用 jar 也无法解析 Spring ApplicationContext

> ID：12084265
> 
> 赞同：3
> 
> 时间：2012-08-23T03:16:17.187
> 
> 标签：java, spring

我已将所有 spring 发行版 3.1.1 jar 添加到包含 org.springframework.context-sources-3.1.1.RELEASE.jar org.springframework.beans-sources-3.1.1.RELEASE.jar 的构建路径中。

但是 Eclipse 构建错误仍然显示， *“无法解析导入 org.springframework.context.ApplicationContext”。*

在 spring 发行版 3.1.1 中添加所有 jar 之前，我已经手动添加了 jar，其中包括 spring-context-3.0.2.RELEASE.jar 和 spring-beans-3.0.2.RELEASE.jar。当时ApplicationContext识别成功。但是后来我认为一个接一个地添加 jar 是浪费时间，为什么不下载最新的 spring 发行版中的所有 jar 并将其用于构建路径。

最初我认为这可能与构建 forder 中的已编译类有冲突，因为我使用不同版本的上下文源 jar 构建项目。所以我删除了构建文件夹并清理了项目。当我添加 spring 3.1.1 jars 时问题仍然存在。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T06:19:50.537

包括库：org.springframework.context.support-3.1.0.RELEASE.jar 和 org.springframework.context-3.1.0.RELEASE.jar

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-16T15:26:44.673

它不是 Spring-bean jar。你需要**Spring-context** jar。将所有罐子加在一起时，您可能会错过它。祝你好运。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-13T06:16:50.000

您必须包含此依赖项。

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
    <version>5.2.12.RELEASE</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-30T12:44:34.040

我知道这个答案是在很多其他线程中给出的，但仍然是对我有用的解决方案。希望它可以帮助某人。

第 1 步：关闭 Eclipse

第 2 步：只需转到您的 Maven 文件夹：-

C:\Users\Rohit.rokade.m2\repository\org

并删除“springframework”文件夹。（这包含了所有与spring相关的maven依赖）

现在打开日食。

第 3 步：Eclipse 将重新下载所有依赖项，此时错误应该已经消失。如果其中一些仍然没有，只需更新您的 Maven 项目。（在 Eclipse 中右键单击您的项目 -> Maven -> 更新项目）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T03:20:19.847

您必须添加它们中的每一个，而不仅仅是目录。您可以使用 Ctrl 键单击/鼠标拖动来多选所有罐子。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-27T11:24:54.603

弹簧罐应从“dist”文件夹而不是“src”文件夹导入。这将解决上述问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-07T02:19:01.490

这解决了我的问题：

1.  打开 pom.xml
2.  单击底部的“依赖项”选项卡，然后单击添加。
3.  在 artifactId - 输入“org.springframework”
4.  在 groupId - 输入“spring-core”
5.  在搜索选项卡中 - 键入“springframework”并等待几秒钟。
6.  寻找 spring-context 并添加它。

现在，在项目资源管理器中，右键单击项目并搜索 Maven。点击“更新项目。

这应该可以解决问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-18T06:59:22.857

[从http://www.java2s.com/Code/Jar/o/Downloadorgspringframeworkcontext256ajar.htm](http://www.java2s.com/Code/Jar/o/Downloadorgspringframeworkcontext256ajar.htm)下载 org.springframework.context-2.5.6.a.jar.zip 并从构建路径导入。将解决您的问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-04T06:17:57.240

如果您更喜欢通过项目结构手动添加任何 spring 依赖项，这适用于 MacOS 10.15.7 + IntelliJ IDEA。否则使用 maven 或其他 repos 肯定会省去麻烦。到写这个答案的时候，spring 5 已经发布了。

1.  一起按快捷键`command`+`;`重定向到项目结构，然后单击库。在 library 部分，按加号，它会提示你找到你应该找到 spring jar 包的目录。

2.  从我们上一步的位置开始，如果您之前在同一台机器上使用过 Spring，那么您很可能已经在您的机器上安装了 Spring 框架。转到查找器>`shift+command+h`转到主目录>`shift+command+.`以显示隐藏文件。找到 .m2 文件，进入 .m2>repository>org>spring-framework，直接点击文件夹，直到可以看到 .m2 文件`spring-context-versionnumber.jar`。选择它并应用它，现在该`spring-conntext.jar`文件将成功添加到您的工作环境中。

3.  如果第 2 步不是您的情况，请从此处下载 spring jar [https://repo.spring.io/ui/native/release/org/springframework/spring/](https://repo.spring.io/ui/native/release/org/springframework/spring/) 选择您想要的以 结尾的版本`....RELEASE-dist.zip`，然后解压缩并找到 jar 文件以与存储下载的 Spring 发布包的文件中的步骤 2 相同的方式。

# .net - 编译器混淆赋值和比较

> ID：12084276
> 
> 赞同：0
> 
> 时间：2012-08-23T03:18:01.653
> 
> 标签：.net, vb.net, linq, operators

我有一个对象，它是 LINQ 中的一个实体`CP_Stop`，我正在尝试用不同的数据填充属性。

```
Dim stop As New CP_Stop
With stop 
    .fdStart = dtpStart.Value
    .fdEnd = dtpEnd.Value
    .CP_Cause = cause
    .User = user
    .Machine = machine
    .CP_Production = _presenter.GetProduction()
End With 
```

前两个赋值已经完成，第三个`CP_Cause`是我之前在方法中查询的对象，但是当涉及到第四个时，它崩溃了。错误如下：

> 未为类型“Entities.Users”和“Entities.Users”定义运算符“=”。

有趣的部分是，如果切换例如原因和用户分配，则第一个会发生，而另一个会崩溃。与所有其他对象分配相同的场景。在我看来，编译器混淆了赋值。

我尝试了几种方法来进行分配，比如在另一种方法上进行，但它总是在第一个方法之后崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:39:00.893

我不确定您是否可以拥有一个包含对另一个表的另一行的引用的列属性，因为它将如何在 sql 中翻译？您必须为此使用密钥（expl：userId 而不是 user）。
您可能想查看 EntityRef 和 EntitySet，以处理 nicelt 一对一/一对多关系，但这是复杂的东西。

# apache - 406 服务器错误

> ID：12084283
> 
> 赞同：0
> 
> 时间：2012-08-23T03:19:28.347
> 
> 标签：apache, .htaccess, redirect, url-rewriting

我有一个网站，它可以在我们的本地机器和我们的测试服务器上正常运行。但是，当我们将它放在实时服务器上时，我们会随机出现 406 错误。

例如，如果我们访问 website.com/clothes 或 website.com/clothes/tshirts 页面加载正常并且图像正确显示且没有错误。如果我们导航到 website.com/clothes/tshirts/bluepinned 产品图片 (website.com/images/clothes/tshirts/bluepinned.jpg) 无法加载，在 firebug 中出现 406 错误。如果我们缓存刷新页面（CTRL + F5），所有页面资源（如样式表、图像等）都会产生 406 错误，如果您再次刷新，整个服务器似乎超时并且什么都没有显示。如果我重新启动路由器（给我一个新的 IP 地址），我可以再次访问该站点。

网址：

```
website.com/clothes <- category showing all sub-categories and products (using product thumb image)
website.com/clothes/tshirts <- sub-category showing all products (using product thumb image)
website.com/clothes/tshirts/bluepinned <- individual product page (using large product image) 
```

.ht 访问：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(clothes)/([^/\.]+)/([^/\.]+)/?$ products.php?c=$1&sc=$2&p=$3 [NC,L,QSA] 
RewriteRule ^(clothes)/([^/\.]+)/?$ products.php?c=$1&sc=$2 [NC,L,QSA] 
RewriteRule ^(clothes)/?$ products.php?c=$1 [NC,L,QSA] 
```

我检查了 phpinfo - 没有找到 mod_security。在那些正在加载的页面上没有什么特别的 - 基本的 HTML 页面，带有 PHP 类调用来加载类别/子类别/产品。没有 Javascript 或 POST 或 AJAX。

任何想法可能导致406？

更新 1：这是 Firebug/Firefox 中的标头响应（删除了 Host 和 Referrer）：

```
Response Headers:
Cache-Control   no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection  Keep-Alive
Content-Type    text/html
Date    Thu, 23 Aug 2012 05:36:54 GMT
Expires Thu, 19 Nov 1981 08:52:00 GMT
Keep-Alive  timeout=5, max=99
Pragma  no-cache
Server  Apache
Transfer-Encoding   chunked
X-Powered-By    PHP/5.2.17

Request Headers:
Accept  image/png,image/*;q=0.8,*/*;q=0.5
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection  keep-alive
Cookie  __utma=175298877.1838807483.1343995016.1345683454.1345698456.35; __utmz=175298877.1344487166.16.3.utmcsr=google.com|utmccn=(referral)|utmcmd=referral|utmcct=/imgres; __utmc=175298877; PHPSESSID=0d6664f0306618ac0f4218895efc4404; __utmb=175298877.2.10.1345698456
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1 
```

更新 2：谷歌浏览器中的标题响应：

```
Request Method:GET
Status Code:406 Not Acceptable

Request Headers
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Cookie:PHPSESSID=d5b28960a6d3e73c7db5a3808432ee71; __utma=175298877.1644911186.1345701704.1345701704.1345701704.1; __utmb=175298877.2.10.1345701704; __utmc=175298877; __utmz=175298877.1345701704.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.83 Safari/537.1

Response Headers
Cache-Control:no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection:Keep-Alive
Content-Type:text/html
Date:Thu, 23 Aug 2012 06:02:16 GMT
Expires:Thu, 19 Nov 1981 08:52:00 GMT
Keep-Alive:timeout=5, max=99
Pragma:no-cache
Server:Apache
Transfer-Encoding:chunked
X-Powered-By:PHP/5.2.17 
```

更新 3：添加了本地响应（有效！）

```
Response Headers
Accept-Ranges   bytes
Connection  Keep-Alive
Content-Length  28212
Content-Type    image/jpeg
Date    Thu, 23 Aug 2012 05:58:31 GMT
Etag    "40000000cd15a-6e34-4c6eb29ada7fc"
Keep-Alive  timeout=5, max=77
Last-Modified   Fri, 10 Aug 2012 15:40:25 GMT
Server  Apache/2.2.21 (Win64) mod_ssl/2.2.21 OpenSSL/1.0.0d PHP/5.3.8

Request Headers
Accept  image/png,image/*;q=0.8,*/*;q=0.5
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection  keep-alive
Cookie  PHPSESSID=mjete8dhhn9abi9fkdfkce0kh2
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1 
```

所以我想如果文件是.jpg，image/* 会允许吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-23T07:23:35.580

您必须使用`REQUEST_URI`而不是`REQUEST_FILENAME` 或将本地路径附加到您的重写规则

来自 apache 文档：

`REQUEST_URI`

> 请求的 URI 的路径组件，例如“/index.html”。这特别排除了作为其自己的变量 QUERY_STRING 可用的查询字符串。

`REQUEST_FILENAME`

> 与请求匹配的文件或脚本的完整本地文件系统路径，如果在引用 REQUEST_FILENAME 时服务器已经确定了这一点。否则，例如在虚拟主机上下文中使用时，与 REQUEST_URI 的值相同。

还结帐`LogLevel alert rewrite:trace3`以清楚地了解替换的内容和匹配的内容

# iphone - 如何从基于 Storyboard 的应用程序将参数传递给 UIViewController？

> ID：12084285
> 
> 赞同：3
> 
> 时间：2012-08-23T03:20:02.270
> 
> 标签：iphone, objective-c, ios, cocoa

我正在使用带有情节提要的 xcode 4.3。

这就是我如何调用我的 secong UIViewController，称为 BookMenuController

```
UIStoryboard*  sb = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:[NSBundle mainBundle]];
BookMenuController* bookControll = [sb instantiateViewControllerWithIdentifier:@"contBook"];

bookControll.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
[self presentModalViewController:bookControll animated:YES]; 
```

在这种情况下如何传递参数？我想传递一个整数，但将来我想传递一个 NSMutableArray。

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:05:19.023

无论有没有故事板，你都会做同样的事情：在你的视图控制器类 ( `BookMenuController`) 上定义和声明一个方法（或属性），然后调用该方法（或设置属性）以将数据传递给视图控制器。

在（或多或少）不相关的注释中，当您使用此模式实例化并转换到视图控制器时，您并没有真正从使用情节提要中获得任何好处。故事板旨在帮助您的部分内容是消除一些此类样板代码。如果您引用的片段将在用户点击控件时被调用，那么您根本不需要任何代码——只需在 IB 中拖动一个 segue 将控件连接到目标视图控制器。（您也可以在 IB 中指定 segue 类型和转换样式。）如果您需要更精确地控制 segue 何时发生，请使用`performSegueWithIdentifier:sender:`，您仍然可以将 segue 设置从代码卸载到 IB。无论哪种方式，您都可以在`prepareForSegue:sender:`.

# objective-c - Cocos2d : CGRect 在运行 CCScaleBy 时随 Sprite 展开

> ID：12084290
> 
> 赞同：1
> 
> 时间：2012-08-23T03:20:31.537
> 
> 标签：objective-c, cocos2d-iphone

在运行 CCScaleBy 时，如何使精灵的 CGrect 与精灵一起扩展。对我来说，CGrect 只是停留在原来的位置，而 sprite 展开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T03:54:21.163

使用boundingBox cgrect。它应该具有精灵的所有变换。CGRect r = [精灵边界框];

# android - 以 Main Activity 而不是应用名称命名的新 Android 项目

> ID：12084299
> 
> 赞同：9
> 
> 时间：2012-08-23T03:21:30.323
> 
> 标签：android, android-activity, adt

我正在使用最新的 ADT 插件在 Eclipse Juno 中创建新的 android 项目，并且我遇到了应用程序名称的问题。每当我运行应用程序时，它运行良好，但是当我转到应用程序列表时，应用程序的名称不在那里。相反，我有一个名为 MainActivity 的新应用程序，它是应用程序中第一个活动的名称。app_name 字符串设置为应用程序的名称，但它仍然不起作用。我发现将 title_activity_main 更改为应用程序的名称解决了应用程序抽屉中应用程序名称错误的问题，但这似乎是一种解决问题的方法。还有其他人遇到过这个问题，还是像我一样讨厌新的 ADT？

清单代码

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.bv.testapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="4"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name">
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-11T15:08:12.710

我为您找到了解决方案。在清单文件中，您可以为启动器图标设置一个标签，为活动设置另一个标签。应用名称在意图过滤器中设置，如下所示：

```
<activity
    android:name=".Start"
    android:label="@string/activity_start" >
    <intent-filter android:label="@string/app_name" >
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

干杯

//淘气

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T07:07:54.640

最近我有这个问题：你能试试这个：

```
<activity
    android:name=".MainActivity"
    android:label="@string/app_name" > 
```

或从活动中删除 android:label

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T07:32:25.803

我也在使用更新的adt并遇到同样的问题，最后得出了唯一的解决方案，如下所示

```
<application
    android:name="GlobalData"
    android:icon="@drawable/hdpi"
    android:label="@string/app_name"
    android:theme="@style/AppTheme">

    <activity android:theme="@android:style/Theme.NoTitleBar"
        android:name=".ApplicationCommence"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter> 
```

在上面`"@string/app_name"`有我的项目名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T16:46:05.883

我也被这个问题激怒了，终于找到了解决方法，现在我确定这是新 ADT 中的一个错误。我添加了**android:name="name_of_my_app"**并更改了**android:label="name_of_the_app"**并且它按预期工作。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.nitin.sunflow"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    android:name = "Sunflow"
    <activity
        android:name=".MainActivity"
        android:label="Sunflow" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-31T23:26:07.730

我确实注意到许多演示应用程序都带有名称 MainActivity，并且使导入其他项目很烦人......但是“右键单击项目 ==> 重命名”不应该修复名称冲突吗？

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-23T07:05:30.833

为了克服这个问题，请养成在标记的“标题”处给出应用程序名称的习惯。这显然会解决你的问题。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-08-23T13:08:47.727

从新的 ADT 创建新的 android 项目的步骤：

1.  您输入您的应用程序名称/包和目标 SDK 版本。
2.  在下一个视图中，您选择您的应用程序图标。
3.  在第三个视图中，您会遇到两个活动之间的选择——空白活动和主细节流。
4.  在第四个视图中，您输入您的活动名称、布局名称，最后一个字段您会注意到一个字段是“标题”，在该字段中输入您的应用程序名称，以及何时将应用程序安装到设备/模拟器上您将通过那里看到您的应用名称。

那清楚吗？

# r - 为什么在 R 中加载模型需要我这么多时间？

> ID：12084303
> 
> 赞同：1
> 
> 时间：2012-08-23T03:21:52.180
> 
> 标签：r, machine-learning, text-mining

对于个人项目，我需要针对不同的文本运行几种机器学习算法以便对它们进行分类。

我曾经使用 RapidMiner 来做这件事，但我决定将我所有的开发转移到 R 上，因为我觉得我对它有更多的控制权。

我现在看到的问题（我没有注意到 RapidMiner）是加载模型需要很多时间。

**例如：**

我有一个模型可以检查文本是否涉及运动。模型是`37.7 MB`，它需要`8:34`我的`2.2 GH i7 Mac with 4GB of RAM`

**我调用模型的方式如下：**

```
fileNameMatrix = paste(query,query1,"-matrix.Rd", sep ="")
fileNameModel= paste(query,query1,"-model.Rd", sep ="")

load(fileNameMatrix)
load(fileNameModel) 
```

该模型是使用生成的`RTextTools`

您阅读的那些查询变量是因为我需要调用近 20 个模型并将它们与不同的数据集进行比较。这就是为什么虽然 8 分钟不是很多，但当我阅读所有这些内容时，仅在加载时就花了将近 3 个小时，考虑到它几乎是实时任务，这使得我的任务几乎毫无用处。

如果不能选择减小模型的大小，我应该考虑哪些因素来减少加载时间？

我认为可疑的另一件事是，虽然矩阵文件相当小`64KB`，但模型仍然是`37.7MB`. 模型文件是否可能比需要的大？有没有人使用 RTextTools 经历过类似的事情？

这是我在 R 中使用模型的第一个任务，所以如果我正在做一些明显错误的事情，请原谅。

非常感谢您的时间，任何正确方向的提示将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:08:32.510

我不熟悉 RTextTools 的模型输出，但模型对象明显大于输入数据框是很常见的。例如，**glm**的输出包含所有输入数据，以及预测值、残差、系数、误差，应有尽有。**RandomForest**模型的输出包含输入数据以及数千棵树的定义等。

模型的加载时间与从头开始运行相比如何？您是否查看*了*模型对象中的内容以查看它包含的内容，并有可能修剪掉您不需要的任何统计信息？

```
str(fileNameModel) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:23:30.840

您是否检查过活动监视器中的 RAM 使用情况？压缩`RData`后的文件相对较小，但解压缩后会很大。例如，一个`n x n`all 的矩阵`0`基本上不会占用任何空间`n`（这可以解释你的小矩阵大小）。您加载的模型可能会很大；我有一些`RData`文件可能相当于`200 MB`但无法加载到内存中`R`。如果您的 RAM 不足，这可能会成为一个问题，因为您的计算机可能会尝试使用驱动器空间来加载文件。

# qt - 图像原始数据 Ros 和 Qt

> ID：12084305
> 
> 赞同：0
> 
> 时间：2012-08-23T03:22:00.433
> 
> 标签：qt, qimage, ros

我在 Gazebo 中有一个模拟，我在其中发布了一个包含原始图像数据的图像原始数据主题。现在我想将 qt 中的数据显示为视频。我不确定我应该使用什么作为视频小部件。我的想法是制作一个 graphicsScene 并将数据显示为 QImage 但数据频率很高，并且以该频率将其加载到 QImage 在我看来并不是一个好方法。期待最佳建议。

谢谢。

（ps 我正在使用带有 qt4.x 和 Ros Electric 的 linux 10.04）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:00:03.990

我已经使用 QT+OpenCV 来显示来自网络摄像头 @20Hz 的图像，为此我使用了 QImage。

可以肯定的是，只要看看 OpenCV 的源代码，他们还在函数 imshow 中使用了 QImage（如果你用 QT 支持编译它）。看：[源码](https://github.com/Itseez/opencv/blob/master/modules/highgui/src/window_QT.cpp)行2389，你会看到如何设置一个原始图像，变成一个QImage。

如果您只想显示图像，我认为您不需要 QGraphicsScene，只需在 QLabel 中设置 QImage。

# html - 动态内容的html布局

> ID：12084309
> 
> 赞同：0
> 
> 时间：2012-08-23T03:22:41.153
> 
> 标签：html, css

我为程序的输出添加了 Web 界面，如下所示：

```
<body>
<table id="header" approx height is 100px, width is 50% of screen located in the middle>
...
</table>
<div id="programoutput">my program outputs stuff here using Ajax.PeriodicalUpdater</div>
</body> 
```

我使用css作为div

```
#programoutput{ white-space:pre; } 
```

并且程序的输出可能包含很长的行。所以，网页应该有水平滚动条。我想要的是确保#header 始终位于屏幕中间（而不是主体），并且主体可能会根据#programoutput 的宽度变得比视口更宽。

我几乎已经明白了，但我有一些问题：水平滚动条出现在#programoutput 本身而不是窗口中。如果输出的高度很小（如本例中的几行），则水平滚动条位于窗口的中间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T03:59:23.090

```
#header
{
 position:fixed;
 width:50%;
 left:25%;
}
#programoutput
{
 white-space:pre;
 overflow:visible;
} 
```

此时您`table`应该被放置在*视口*的中心，并且您的`div`长度应该足以让您`body`生成滚动条。

但是由于`table`is `position:fixed`，您`div`将“漂浮”在您的桌子上。现在你有几个选择：

**1** . 给你`div`一个最高职位：

```
position:relative;
top:100px; /* you'll have to know your table's height */ 
```

**2** . 将您`div`放在底部`body`（这在您的代码中似乎有效）：

```
position:absolute;
bottom:0px; 
```

# ruby - Ruby：卡在公案上

> ID：12084313
> 
> 赞同：0
> 
> 时间：2012-08-23T03:23:27.297
> 
> 标签：ruby, exception-handling

我在 RubyKoans.com 上工作，并被`about_symbols.rb`这个公案困住了。

这是测试：我想我应该在括号中放一些东西，`assert_raise()`但我不知道：

```
def test_symbols_cannot_be_concatenated
    # Exceptions will be pondered further father down the path
    assert_raise(___) do
      :cats + :dogs
    end
  end 
```

这是终端中的提示：

```
The answers you seek...
  [FillMeInError] exception expected, not  Class: <NoMethodError>  Message: <"undefined method `+' for :cats:Symbol">  ---Backtrace---  /Users/mm/Sites/koans/about_symbols.rb:89:in `block in test_symbols_cannot_be_concatenated'  --------------- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T04:46:35.953

当您卡在公案上时，只需在 irb 中尝试一下。它可以帮助您知道要填写什么。

```
$ irb
>> :symbol + :another_symbol
NoMethodError: undefined method `+' for :symbol:Symbol
from (irb):2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T03:26:38.747

这就是答案。假设将错误放在括号中。

```
 def test_symbols_cannot_be_concatenated
    # Exceptions will be pondered further father down the path
    assert_raise(NoMethodError) do
      :cats + :dogs
    end
  end 
```

# python - 算法和复杂性书籍

> ID：12084315
> 
> 赞同：2
> 
> 时间：2012-08-23T03:23:35.650
> 
> 标签：python, algorithm, complexity-theory

全部，

我是一名拥有 Web 技术硕士学位的中级 Python 开发人员，虽然我认为自己是一个体面的程序员，但我总是遇到与算法复杂性相关的问题。

任何人都建议一本好书来解释如何推导算法的 O 表示法，以及可以使用哪些常见解决方案来解决复杂算法？

我目前正在阅读“Uncle Bob 的”The Clean Coder: A Code of Conduct for Professional Programmers（顺便说一句，非常值得一读，我强烈推荐它），其中他专门有一章来解释如何在工作之外度过 20 小时一周提高你的手艺是成为一个更好的程序员的唯一途径。所以我想我会从算法复杂性开始，然后转向大表和闭包。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T03:28:25.777

[Thomas Cormen的算法介绍](https://rads.stackoverflow.com/amzn/click/com/0262033844)似乎是该行业的首选手册。它涵盖了广泛的主题，包括排序、数据结构、高级设计和分析以及图形算法。

> 算法导论独特地结合了严谨性和全面性。这本书深入涵盖了广泛的算法，但使所有级别的读者都可以访问它们的设计和分析。每章相对独立，可以作为一个学习单元。这些算法是用英语和一个伪代码描述的，该伪代码被设计为任何做过一点编程的人都可以阅读。在不牺牲覆盖深度或数学严谨性的情况下，这些解释保持基本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T00:05:04.283

如果您特别想牢牢掌握渐近分析，请观看这​​两个视频讲座。对于渐近分析，这比阅读要好得多`CLRS`

[CS61B 加州大学伯克利分校第 19 讲](http://www.youtube.com/watch?v=VIS4YDpuP98)

[CS61B 加州大学伯克利分校第 20 讲](http://www.youtube.com/watch?v=ca3e7UVmeUc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T03:29:58.553

算法分析，Jeffrey McConnell，非常简单的书：[链接](https://rads.stackoverflow.com/amzn/click/com/0763707821)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T04:14:51.593

有很多书可以学习算法。这是一个很好的讨论： [https ://stackoverflow.com/questions/302270/what-is-the-best-book-for-learning-about-algorithms](https://stackoverflow.com/questions/302270/what-is-the-best-book-for-learning-about-algorithms)

根据您当前的理解水平和您拥有的时间，您可以选择一个。

# iphone - 使用 NSPredicate 过滤带有字典的数组

> ID：12084318
> 
> 赞同：24
> 
> 时间：2012-08-23T03:24:01.113
> 
> 标签：iphone, ios, nsarray, nspredicate

有一个数组，每个元素都是一个`NSDictionary`.

```
NSMutableArray *mutArr = [NSMutableArray array];

for (Person *person in persons) {
    NSDictionary *dict = [[NSDictionary alloc] initWithObjectsAndKeys:person.name, @"name", person.email, @"email", nil];
    [mutArr addObject:dict];
}

self.arr = [[NSArray alloc] initWithArray:mutArr]; 
```

如何通过 using方法归档`arr`名称或电子邮件包含字符串。`@"filter string"``filterArrayUsingPredicate:`

提前致谢！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-23T03:36:24.853

请看下面的例子：

```
 NSArray *array = [NSArray arrayWithObject:[NSMutableDictionary dictionaryWithObject:@"filter string" forKey:@"email"]];   // you can also do same for Name key... 
    NSArray *filteredarray = [array filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"(email == %@)", @"filter string"]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-23T12:03:06.190

看一下这个 ：

```
var customerNameDict = ["firstName":"karthi","LastName":"alagu","MiddleName":"prabhu"];
var clientNameDict = ["firstName":"Selva","LastName":"kumar","MiddleName":"m"];
var employeeNameDict = ["firstName":"karthi","LastName":"prabhu","MiddleName":"kp"];

var attributeValue = "karthi";

var arrNames:Array = [customerNameDict,clientNameDict,employeeNameDict];

var namePredicate = NSPredicate(format: "firstName like %@",attributeValue);

let filteredArray = arrNames.filter { namePredicate.evaluateWithObject($0) };
println("names = ,\(filteredArray)"); 
```

# ios5 - UIScrollView 不会滚动而不弹跳

> ID：12084320
> 
> 赞同：0
> 
> 时间：2012-08-23T03:24:12.463
> 
> 标签：ios5

我`UIScrollView`的`UIViewController`. 我设置了以下选项：

1.  显示垂直滚动条
2.  启用滚动

它**不**滚动。当我设置以下内容时：

1.  反弹缩放
2.  反弹
3.  垂直弹跳

它滚动但有弹跳......我有什么遗漏吗？为什么启用滚动后它不滚动？

**[编辑]**

我遇到了一些问题，但通过设置`contentSize`. 然而，我的问题是，我有一个包含各种内容、按钮、文本、标签等的屏幕。如何（准确地）计算所有内容的大小？有没有办法自动告诉滚动视图应该增长多少长度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:37:06.743

我认为没有一种自动方法可以将 contentSize 调整为您拥有的子视图。如果您使用的是 Interface Builder 并且内容不是动态的，那么设置内容大小应该相对容易。如果没有，您将不得不手动调整它的大小。

您应该能够通过获取对象的框架 ( `[myView frame]`) 来计算大小。

您可以编写一个方法来检查所有子视图的框架并相应地调整 contentSize 的大小。假设您将子视图按垂直顺序放置。取最后一个 Views 框架的 y 位置 + 它的高度（`view.frame.origin.y + view.frame.size.height`可能是你的 contentViews 高度等等......

希望这可以帮助。

# scala - 将参数标记为隐含在方法中

> ID：12084322
> 
> 赞同：7
> 
> 时间：2012-08-23T03:24:21.150
> 
> 标签：scala, implicit

我有一个方法可以调用其他一些使用隐式类型的方法`Foo`。我想让 f 隐含在 Foo 中。我就是这样做的：

```
def myMethod(a: Int, f: Foo) = {
  implicit val implicitF = f;
  somethingThatNeedsFoo(a) 
} 
```

我不想`f`在 myMethod 的签名中标记为隐式，因为 Foos 在使用 myMethod 的上下文中并不隐式。我的问题：有没有比使用临时变量更惯用（或简洁）的方式来实现这种效果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T12:46:11.137

我从未见过实际使用过它，但您可以避免将变量绑定到名称。当然，使用下划线：

```
implicit val _ = f 
```

不过，我建议不要使用这种用法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T04:21:31.027

您可以显式传递隐式参数，因此即使调用者的隐式范围内没有 Foo ，调用者也可以显式传递它。

如评论所述，您可以使用相同的技巧将 Foo 传递给`somethingThatNeedsFoo`：

```
 def myMethod(a: Int, f: Foo) =
   somethingThatNeedsFoo(a)(f) 
```

# python - 如何替换 Google Datastore 查询结果对象中的字符？

> ID：12084327
> 
> 赞同：2
> 
> 时间：2012-08-23T03:25:01.713
> 
> 标签：python, google-app-engine, inheritance, scope, jinja2

我是 Python、Google AppEngine 和 Jinja 的新手。如果我在下面发布了太多代码，我很抱歉。这是我向 StackOverflow 发布的第一个问题。

我正在构建一个博客（为一个班级），我需要在用户的帖子中替换换行符“\n”。查询数据库的函数将其结果发送到 render() 函数。

在我添加应该替换“\n”的代码行之前，所有代码都可以正常工作。

我进行了各种编辑，但我无法推断 AppEngine、Jinja 或 Python 要我做什么来满足它。

**我的数据库类**设置了四种类型的 db_blog 类型，包括“ **post_content** ”

```
class db_blog(db.Model):
    post_subject = db.StringProperty(required = True)
    post_content = db.TextProperty(required = True)
    post_created = db.DateTimeProperty(auto_now_add = True)
    post_last_modified = db.DateTimeProperty(auto_now_add = True) 
```

**'Newpost' 类**我希望它从下面的**Blog**类中接收 ' **query_select** ' 对象。

 **```
class Newpost(webapp2.RequestHandler):
    def write(self, *args, **kwds):
        self.response.out.write(*args, **kwds)

    def render_str(self, template, **params):
        t = jinja_env.get_template(template)
        return t.render(params)

    def render(self, template, **kwds):
        self._render_text = self.post_content.replace("\n", "<br />") ##<-- See here 
        self.write(self.render_str(template, **kwds)) 
```

**Blog 类**获取所有用户帖子并将它们发送到“Newpost”以进行呈现。

```
class Blog(Newpost):
    def get(self):
        query_select = db.GqlQuery("SELECT * FROM db_blog ORDER BY post_created DESC")
        self.render('blog_posts.htm', query_select = query_select) 
```

# 1 **、如上图，代码会产生这个错误：**

AttributeError：“博客”对象没有属性“post_content”

我认为类**Blog**需要从**db_blog**继承，所以（见#2）

# 2\. 如果我将**db_blog**添加到**Blog**类的参数列表中，我会收到一个新错误：

AttributeError：“NoneType”对象没有“替换”属性

我认为错误告诉我我正在传递一个不存在的对象，所以我真的很困惑。如果我注释掉试图替换“\n”字符的行，这段代码运行完美——那么它怎么能不传递对象呢？或者声称它==无？

更重要的是，我怎样才能让它工作！

非常感谢你读到这里，感谢他/她的财富王国，让我继续前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:43:03.800

在我写这篇文章的时候，@JeffTratner 提出了一个很好的建议，让替换成为你模型的属性。我绝对支持这是一个很好的解决方案，所以希望这只会帮助您了解正在发生的事情:)

* * *

欢迎！我会先说我没有使用过 jinja（也不是任何类型的 GAE 专家），所以我会尝试专注于我认为导致您的问题的原因（其他更聪明的人会很快纠正我）。

**错误**

当您使用 Gql 查询数据存储时，结果是可迭代的。在您的代码中，`query_select`是这些可迭代对象之一，其中每个项目都是具有`db_blog`您指定的四个属性的实体。（注意：您可能会更改`db_blog`为`Blog`[样式约定等]，无论如何我都会建议以后摆脱该类:)）

看起来您正在尝试用`<br>`'s 替换任何换行符，为此您正在调用`replace`方法 on `self.post_content`。问题`self`在于这个上下文是一个`Blog`实例，它与你真正想要的完全不同（这将是 中的项目`query_select`）。**编辑：** JeffTratner 的方法比我以前的方法好，所以我删除了我所拥有的，并假设你按照他的建议设置了你的模型 :) 在这种情况下，你可以简单地运行你的查询，然后将结果传递给模板：

```
query_select = db.GqlQuery("SELECT * FROM db_blog ORDER BY post_created DESC")
self.write(self.render_str(template, **kwds)) 
```

关键要点 - 查询数据存储将 [几乎] 总是返回一个可迭代的。因此，如果您想对返回的数据做其他事情，您将不得不迭代您的结果：

```
query_select = db.GqlQuery("SELECT * FROM db_blog ORDER BY post_created DESC")
for result in query_select:
    # Do stuff... 
```

**结构**

对此持保留态度，因为我不确定您的意图是什么，但是有没有理由`Blog`是它自己的课程？我在 Newpost 中没有看到`get`方法 - 是否曾经直接访问过？如果没有，您是否可以通过完全删除`Blog`并将`get`方法移入来实现相同的功能`Newpost`？

```
class Newpost(webapp2.RequestHandler):
    def get(self):
        query_select = db.GqlQuery("SELECT * FROM db_blog ORDER BY post_created DESC")
        self.render('blog_posts.htm', query_select = query_select)

    def write(self, *args, **kwds):
        self.response.out.write(*args, **kwds)

    def render_str(self, template, **params):
        t = jinja_env.get_template(template)
        return t.render(params)

    def render(self, template, **kwds):
        self.write(self.render_str(template, **kwds)) 
```

这种结构意味着所有`get`调用都`Newpost`将查询数据存储并呈现结果（不需要单独的类）。另外，这可能是因为我不熟悉 jinja，但似乎您可以将 // 方法压缩`render`为一个`render_str`，`write`但我想可以等待，因为它现在正在工作:) )。如果您想尝试，这是一种完全未经测试（而且很可能是错误的）的方法：

```
class Newpost(webapp2.RequestHandler):
    def get(self):
        query_select = db.GqlQuery("SELECT * FROM db_blog ORDER BY post_created DESC")
        self.render('blog_posts.htm', query_select = query_select)

    def render(self, template, **kwds):        
        t = jinja_env.get_template(template)
        self.response.out.write(t.render(**kwds)) 
```

对不起，文字墙 - 希望那里有一些有用的东西！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T04:19:02.433

您收到属性错误的原因是`self`in`Newpost.get`指的是`RequestHandler`( `Blog`) 而*不是*您想要的帖子。我建议不要在视图函数中定义转换，而是将其添加为模型的属性，例如

```
class db_blog(db.Model):

    post_subject = db.StringProperty(required = True)
    post_content = db.TextProperty(required = True)
    post_created = db.DateTimeProperty(auto_now_add = True)
    post_last_modified = db.DateTimeProperty(auto_now_add = True)

    @property
    def escaped_content(self):
        # possibly want to escape HTML in your post_content first
        return self.post_content.replace("\n", "<br />") 
```

然后，您可以传递`query_select`给您的模板（就像您现在所做的那样）：

```
{% for post in query_select %}
{{ post.escaped_content | safe }}
{% endfor %} 
```

你需要在上面使用 safe，否则 jinja 会逃脱你的`<br />`. 由于我看不到你的模板，我不知道这是否完全符合你正在做的事情，但希望你明白这一点。

解释上面三行神器：

1.  `{% for post in query_select %}`- 就像 for 循环一样，遍历帖子，每个帖子都应该是一个`db_blog`实例（来自您的查询）。
2.  `post.escaped_content`完全等同于`escaped_content`在 Python 中调用 db_blog 模型的属性。
3.  `{{ post.escaped_content | safe }}`将`safe`过滤器应用于转义内容产生的字符串（没有`safe`，jinja 将转换`<br />`为`&lt;br /&gt;`（将在页面上逐字显示`<br />`）。
4.  `{% endfor %}`结束 for 循环。**

# mercurial - 无法将 Git 存储库转换为 Mercurial

> ID：12084328
> 
> 赞同：4
> 
> 时间：2012-08-23T03:25:09.043
> 
> 标签：mercurial, github, github-for-windows, mercurial-convert

我有尝试转换为 Mercurial 的 Git 存储库。跑步

> hg 转换 c:\code\git-repo

导致以下错误：

> 假设目标 git-repo-hg 初始化目标 git-repo-hg 存储库中止：找不到所需的“git”工具

我安装了[适用于 Windows 的 Git Hub](http://windows.github.com/)应用程序。我还缺少其他东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T03:55:47.860

感谢 dimo414 和 J-16 SDiZ 的帮助，我得以修复它。问题是 GitHub for Windows 没有将 Git 的位置设置到 Windows 路径中。将其添加到路径或简单地从 Git 文件夹中运行 hg convert 应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T03:30:50.003

从错误中，听起来像是`hg convert`期望能够使用`git`命令行工具。如果`git --version`从命令提示符运行会发生什么？如果没有，您应该可以从[Git 下载页面](http://git-scm.com/downloads)安装它。如果它已经安装，您可能还没有添加`git`到您的[Windows`PATH`](https://stackoverflow.com/questions/9546324/adding-directory-to-path-environment-variable-in-windows)中。

另一种方法是使用[`hg-git`](http://hg-git.github.com/)它允许您克隆并推送到远程 Git 存储库*作为*Mercurial 存储库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-18T23:53:42.597

尝试使用 'git' 名称和 git.exe 值的路径添加环境变量。

# c# - NetTopologySuite 如何使用 xxx 仪表制作缓冲区

> ID：12084341
> 
> 赞同：2
> 
> 时间：2012-08-23T03:27:31.010
> 
> 标签：c#, gis, jts

我是 NetTopologySuite 的新手，我使用 lon/lat 的 WGS84 中的坐标系，使用 NetTopologySuite。我找到了 Buffer 函数来创建一个距离的缓冲区，但是我怎样才能以米为单位制作一个距离缓冲区？例如，做一个 200 米的缓冲点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:28:38.520

NetTopologySuite 核心库不支持 WGS84 坐标或任何其他大地坐标系。

要解决此限制，您可以将坐标转换为投影坐标系（例如 UTM，具体取决于您的数据），执行缓冲区操作，然后进行相反的转换。[ProjNET](https://github.com/NetTopologySuite/ProjNet4GeoAPI)支持这种转换。

# .net - .NET Windows 服务 - 在创建数据库记录时触发操作的最有效方法是什么？

> ID：12084344
> 
> 赞同：0
> 
> 时间：2012-08-23T03:28:32.610
> 
> 标签：.net, sql-server, windows, service

我有几个不同的应用程序，主要是 ASP.NET Web 应用程序，它们会生成待处理的电子邮件数据库记录。

每分钟，我都会触发一个带有 Windows 任务的可执行文件，以清除待处理的电子邮件缓冲区。

我的目标是将这个一分钟的间隔缩短到一秒。

我打算使用 Windows 服务。

**有没有比每秒轮询一次未决电子邮件数据库表更好的方法？**

虽然我确信 MSSQL 可以永远处理每秒一次的事务，但对于一天只能发送 80 封电子邮件的应用程序来说，它并不是一个理想的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:35:26.993

SQL Server 已经通过该[`sp_send_dbmail`](http://msdn.microsoft.com/en-us/library/ms190307.aspx)过程拥有了执行此操作所需的基础结构。在您的代码中，不要填充待处理的电子邮件表，`sp_send_dbmail`而是调用并让 SQL Server 驱动邮件传递。

`sp_send_dbmail`依次基于[Service Broker Activation](http://msdn.microsoft.com/en-us/library/ms171617%28v=sql.105%29.aspx)。如果您不想使用 DBMail，您可以直接利用激活机制，该机制允许您以非轮询方式监视消息队列。激活后，您将拥有几乎瞬时的延迟（亚秒级），无需每秒轮询更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T03:43:50.827

您的实施是 100% 完美的。您可以使用 windows 服务，也可以使用 windows scheduler 来安排高频作业。

如果你在这里实现缓存。不必要地增加不需要的实现。我建议您保持原样执行，这意味着以 1 秒的频率轮询工作。

# project-server - 使用 Project Server 界面列出可用的企业项目类型

> ID：12084347
> 
> 赞同：0
> 
> 时间：2012-08-23T03:29:10.040
> 
> 标签：project-server

我想使用 Web 服务 (PSI) 查询 Project Server 2010 安装以获取可用企业项目类型（它们的名称和 GUID）的列表。

我无法在任何地方找到如何做到这一点。我找到了一种使用[客户端对象模型](http://msdn.microsoft.com/en-us/library/office/jj163064%28v=office.15%29.aspx)的方法，但找不到任何使用 Web 服务的示例。有没有人这样做过？

[我在这里](https://stackoverflow.com/questions/7342983/retrieving-enterprise-project-types-using-project-server-interface)找到了一个答案，但它只处理自定义字段。

（目标是使用企业项目类型及其附加模板创建/更新项目。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:58:27.420

我在 Workflow Service 中找到了 2 个可用的方法：

1.  [Workflow.ReadAvailableEnterpriseProjectTypes](http://msdn.microsoft.com/en-us/library/websvcworkflow.workflow.readavailableenterpriseprojecttypes_di_pj14mref.aspx) - 当前用户可用的 EPT 列表
2.  [Workflow.ReadEnterpriseProjectTypeList 方法](http://msdn.microsoft.com/en-us/library/websvcworkflow.workflow.readenterpriseprojecttypelist_di_pj14mref.aspx)- 所有已知 EPT 的列表。

我看到的唯一可能的问题是一组必需的权限：

1.  管理工作流程
2.  更改工作流程
3.  + 第一种方法的 NewProject。

# c# - C# 列表调用 Main

> ID：12084348
> 
> 赞同：0
> 
> 时间：2012-08-23T03:29:27.243
> 
> 标签：c#, list

嘿，我有代码：

```
 public static CreditCard FindCard(List<CreditCard> Cust, string Name) 

    {
       foreach(CreditCard cust in Cust)
       {
           if(cust.Name == Name)
           {
               return cust;
           }
       }
       return null;

    } 
```

我试图做的是从我输入名称并返回具有给定名称的第一张卡的 Main() 中调用它。我已经尝试了很多年，你们能帮忙吗？

因此，如果我输入“迈克”，它将显示他的信息，我已经设置了列表，它只是从主目录调用它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T04:29:56.153

我想你正在寻找类似的东西

```
class MyClass
{

 public static CreditCard FindCard(List<CreditCard> Cust, string Name) 

    {
       foreach(CreditCard cust in Cust)
       {
           if(cust.Name == Name)
           {
               return cust;
           }
       }
       return null;

    }

public static int main()
{
// Populate the list
List<CreditCard> cards = new List<CreditCard>{ new CreditCard(...), new CreditCard(...)}

Console.WriteLine("Enter your name: ");
String name = Console.ReadLine();

CreditCard cc = FindCard(cards, name);

if (cc != null)
{
    Console.WriteLine(cc.Number); // And for all fields in CreditCard class
    ...
}    
Console.ReadKey();

return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T03:32:06.370

有什么阻止你像普通人一样称呼它吗？

`CreditCard mikecard = FindCard(myList, "Mike");`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T03:35:51.190

建议使用 Main 中的 Linq 而不是单独的方法

```
Cust.FistOrDefault(x => x.Name == Name) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T04:47:29.987

该错误可能在您的代码中的其他位置。根据您的评论，我认为您正在阅读来自控制台的输入。如果是这种情况，它可能会在字符串末尾添加一个额外的换行符。

您可以使用调试器来检查这一点，但最有可能的解决方案是修剪输入。

例如，您可以将 if 语句更改为：

```
if(cust.Name == Name.Trim()) 
```

尽管这可能会解决问题，但它仍然不是很健壮。用户可以输入“Mike”或“MIKE”的任何变体并期待结果。因此，您也应该考虑进行不区分大小写的比较。

```
if(string.Equals(cust.Name, Name.Trim(), StringComparison.CurrentCultureIgnoreCase)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T03:37:50.940

尽管您的代码是正确的，但您也可以将其作为扩展方法

```
public static EM
{
    public static CreditCard FindCard(this List<CreditCard> Cust, string Name)
    {
       foreach(CreditCard cust in Cust)
       {
           if(cust.Name == Name)
           {
               return cust;
           }
       }
       return null;
    }
} 
```

并将其称为

```
CreditCard cc = yourList.FindCard("Mike"); 
```

# javascript - 使用 jQuery 在没有 ID 的字段上捕获更改事件

> ID：12084354
> 
> 赞同：0
> 
> 时间：2012-08-23T03:29:59.390
> 
> 标签：javascript, jquery

我与 jQuery 打交道，但需要弄清楚这一点以完成我正在处理的一些代码。

我控制 img 标签而不是输入（这意味着我不能像我想要的那样给它一个 ID）。

我需要将 img 的 SRC 设置为输入值的值（无论用户何时更改它）。

这是HTML：

```
<div class="my_meta_control metabox">
    <img id="IconImage" src="">
    <p>
        <input type="text" class="mediafield-nn" name="_custom_meta[imgurl]" value=""/>
        <a href="media-upload.php?post_id=2&tab=type&TB_iframe=1" class="mediabutton-nn thickbox button {label:'Insert'}">Add Media</a>
    </p>
</div> 
```

这是我一直在尝试的，没有运气。任何帮助将不胜感激。:)

```
$('#IconImage').next().children(":first").change(function() {
    var icon = $(this).val();
    $('#IconImage').attr('src', $(icon));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T03:39:22.917

您的选择器很好（尽管我认为有更好的选择，例如`$('#IconImage').next().find("input[type='text']")`），但存在一些问题：

1.  您可能没有在`ready()`. 我建议这样做。
2.  您正在引用`$(icon)`而不是仅引用`icon`. 它不是 DOM 选择器，只是文本。
3.  你没有关闭`(`of `.change(`。

这是一个应用了上述更改[的工作 JSFiddle 。](http://jsfiddle.net/KpgFF/)

编码：

```
$(document).ready(function() {
    $('#IconImage').next().children(":first").change(function() {
        var icon = $(this).val();
        $('#IconImage').attr('src', icon);
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T03:36:51.293

这个怎么样：

```
var container = $('.my_meta_control metabox');

$('input:first', container).change(function(){
  $('img:first', container).attr('src', $(this).val());
}); 
```

# php - 重复 AJAX 调用并返回 http 代码

> ID：12084357
> 
> 赞同：1
> 
> 时间：2012-08-23T03:30:23.683
> 
> 标签：php, jquery

单击按钮时，我有一个 jquery AJAX 调用，例如：

```
$(".play").click(function(){
    function doAjax(){
        $.ajax({
        url: 'blah.php',
        success: function(data) {
            if (data==250)
            {
                setTimeout(doAjax, 2000);
            }
            else
            {
                $('#quote p').html(data);
            }

        }
        });
    }
    doAjax();
}); 
```

来自服务器的任何数据都会打印到 div：

```
<div id="quote"><p> </p></div> 
```

服务器上的 blah.php 进行一些处理以检索一些状态代码：

```
$r = new HttpRequest('http://localhost...', HttpRequest::METH_GET);
$r->send();

if ($r->getResponseCode() == 200)
{
echo "Starting video..."        
//sends a video to play
}
else if ($r->getResponseCode() == 450)
{
    echo "Oops! Not found...";
}
else if ($r->getResponseCode() == 550)
{
    echo "Oops! An error occurred...";
}
else if ($r->getResponseCode() == 250)
{
    echo "Initializing...";
}
else
{
    echo "Now we are in trouble";
} 
```

响应代码 ( `$r->getResponseCode()`) 按我的预期返回，所以我的问题是我重复的 ajax 调用与`setTimeout`. 我想要发生的是，当返回代码 250 时，它会打印出来`Initializing`，它确实如此，但是我的 AJAX 调用将重复，因为成功函数是用 250 调用的。这不起作用。它说`Initializing`但从不重复，因为下一步是我应该看到`Starting video...`。

其他一切似乎都检查出来了，我想问题出在我的 jquery`success`函数上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T03:49:41.570

这里的问题是，您可以在 Javascript 中访问的“数据”变量实际上是您在 PHP 文件 blah.php 中回显的确切文本。

因此，使其工作的更准确方法是检查 data == "Initializing..."。您可能还需要考虑从 PHP 文件中输出与 JSON 兼容的文本，以便同时获得状态代码和消息。

考虑把它作为你的 PHP：

```
$code = $r->getResponseCode();
$message = "";

switch($code) {
    case 200:
        $message = "Starting video...";
        break;
    case 450:
        $message = "Oops! Not found...";
        break;
    case 550:
        $message = "Oops! An error occurred...";
        break;
    case 250:
        $message = "Initializing...";
        break;
    default:
        $message = "Unknown status";
        break;  
}

print "{ 'code': $code, 'message': '$message' }"; 
```

以上将以 JSON 格式输出您需要的所有数据。

在您的 javascript 中，考虑使用 jQuery 的内置 getJSON 方法，并将数据解析为常规 javascript 对象。

```
$.getJSON('blah.php', function(data) {
        if (data['code'] == 250)
        {
            setTimeout(doAjax, 2000);
        }
        else
        {
            $('#quote p').html(data['message']);
        }

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T03:47:04.393

我想这就是你想要的。

```
var timeid = null;

function doAjax() {
    $.ajax({
        url: 'blah.php',
        success: function (data) {
            if (data == 'Initializing...') {
                time_id = setTimeout(doAjax, 2000);
            } else {
                $('#quote p').html(data);
                if (timeid) {
                    clearTimeout(timeid);
                }
            }
        }
    });
}
$(".play").click(doAjax); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T05:06:11.663

可能你应该这样做，这将工作我已经测试过......

```
$(".play").click(doAjax);

function doAjax(){
   alert(1);
        $.ajax({
        url: 'blah.php',
        success: function(data) {
            if (data==250)
            {
                setTimeout(doAjax, 2000);
            }
            else
            {
                $('#quote p').html(data);
            }

        }
       });   
} 
```

# jquery - qtip2：显示表单中无效字段的工具提示

> ID：12084358
> 
> 赞同：0
> 
> 时间：2012-08-23T03:30:26.420
> 
> 标签：jquery, input, qtip2

我正在使用几个插件：jQuery Validate 和 qTp2。该工具提示中的问题没有显示，没有错误，我不明白为什么。代码或[演示](http://jsfiddle.net/rfw9s/6/)：

```
<div style="float: left; width: 470px;" id="register_cont">
        <form method="POST" action="/Account/Register" class="fancy_form" id="reg_form_pay">
        <div style="margin-bottom: 10px;" class="wrap_input">
            <p class="inp_label">First name:</p>
            <i>&nbsp;</i>
            <input type="text" style="width: 157px;" name="FirstName" value="" data-description="Enter first name" id="pay_firstname">
        </div>
        <div style="margin-bottom: 10px;" class="wrap_input">
            <p class="inp_label">Surname:</p>
            <i>&nbsp;</i>
            <input type="text" style="width: 140px;" name="Surname" value=""  data-description="Enter last name"  id="pay_lastname">
        </div>
        <div style="margin-bottom: 10px; margin-top: 34px;" class="wrap_input">
            <p class="inp_label">E-mail:</p>
            <i>&nbsp;</i>
            <input type="text" style="width: 157px;" name="Email" value=""  data-description="Enter email"  id="pay_email">
        </div>
        <div style="margin-top: 34px;" class="wrap_input">
            <p class="inp_label">Phone:</p>
            <i>&nbsp;</i>
            <input type="text" style="width: 157px;" name="PhoneNumber" value=""  data-description="Enter phone number"  id="pay_phone">
        </div>
        </form>
    </div>

<button style="margin-top: 27px;" type="button" class="wiz_button wizard_prev_step long"><span><span>Check</span></span></button>

$("#reg_form_pay").validate({
            rules: {
                Email: { required: true, email: true },
                PhoneNumber: { required: true, checkPhoneNumber: true },
                FirstName: { required: true },
                Surname: { required: true }
            },
            errorElement: "",
            showErrors: function (errorMap, errorList) {
                $('.wrap_input').removeClass('error');
                $('#reg_form_pay input').width(157);
                $.each(errorList, function (i, e) {
                    $(e.element).closest('.wrap_input').addClass('error');
                    var newWidth = $(e.element).width() - 17;
                    $(e.element).width(newWidth);
                });
                 updateQTip(); //call every time when error exist
            },
            onkeyup: false
        });

  function updateQTip() {        
            $('.wrap_input.error input').qtip({
                text: function (api) {
                    return $(this).attr('data-description');
                },
                position: {
                    target: 'mouse',
                    adjust: { x: 5, y: 17 }
                },
                style: {
                    tip: { corner: false }
                }
            });
    } 

$.validator.addMethod("checkPhoneNumber", function (value, element) {

        if (!value) return true;
        return /^((\+7)|8)(700|701|702|705|707|712|713|717|718,721|725|726|727|777)[0-9]{7}$/.test(value);
    }, "Wrong Phone");

$('button ').click(function () {
            if (!$('#reg_form_pay').valid())
                return;

    alert('valid');
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:39:01.143

看起来`text`应该`content`在工具提示参数中更改为。看看这个[小提琴](http://jsfiddle.net/8pyxM/3/)

```
function updateQTip() {        
            $('.wrap_input.error input').qtip({
                content: function (api) {
                    return $(this).attr('data-description');
                },
                position: {
                    target: 'mouse',
                    adjust: { x: 5, y: 17 }
                },
                style: {
                    tip: { corner: false }
                }
            });
    } 
```

# ruby-on-rails - 如何更改帖子的顺序？

> ID：12084361
> 
> 赞同：0
> 
> 时间：2012-08-23T03:30:55.247
> 
> 标签：ruby-on-rails

我用

> Post.order(:created_at)

在控制器中，帖子按创建时间排序，但它是从最旧的帖子到最新的帖子，这是我不想要的，我想更改顺序以首先显示最近的帖子，我该如何更改编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T03:36:22.033

采用`Post.order("created_at desc")`

提示：使用 a`scope`以便此逻辑保留在您的模型上，而不是在您的控制器上。

```
class Post < ActiveRecord::Base 
  scope :recent_first, order("created_at desc")
end 
```

然后，在您的控制器上，您可以使用`Post.recent_first`.

# c - C 按位求反产生负输出：

> ID：12084364
> 
> 赞同：9
> 
> 时间：2012-08-23T03:31:11.807
> 
> 标签：c, bit-manipulation

我正在努力翻转 C int 变量中的位。我这样做是这样的：

```
input = 15;

input = ~input;

printf("%d", input); 
```

但它总是显示为`-16`. 应该是`0`！如果`15`写成`1111`，为什么要返回`10000`？！这太让人抓狂了！有人能帮帮我吗！？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-23T03:33:49.513

由于`int`在您的系统上很可能是 32 位数字，因此所有位都被翻转，包括原始数字中无关紧要的零的位：

```
00000000000000000000000000001111 
```

变成

```
11111111111111111111111111110000 
```

这是一个负数： 的最高有效位`15`为零，因此`1`翻转时变为。

如果您只想保留原始数字的位，则需要用数字的重要位置的所有位进行屏蔽，如下所示：

```
printf("%d\n", input & 0xF); 
```

`AND`与`0xF`“切断”除最后四个以外的所有位。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T04:06:02.427

这是因为`input`由多于四位组成。如果我们假设它`input`是 a `signed char`，有 8 位（或一个字节），那么：

```
input == 15 == 0x0F == 0b00001111 
```

如您所见， 的 4 个更高的有效位`input`均为 0。在按位 NOT 操作 (~) 之后，我们有：

```
~input == -16 == 0xF0 == 0b11110000 
```

以前为零的四位现在是一，而现在是零。有符号变量中的最高有效位确定其符号（0 为正，1 为负）。因此，通过翻转位，符号已被反转。负数可以读作：

```
1      1     1     1     0     0     0   0
-128 + 64  + 32  + 16  + 0   + 0   + 0 + 0 
```

解析为打印的 -16。

如果您的作业是使用按位 NOT 将变量归零，请尝试将其声明`input`为 an`unsigned char`以避免担心符号位。然后，设置`input`为`255`8 位变量可以保存的最大值（`0xFF`或`0b11111111`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T03:34:38.680

`15`是类型`int`。取决于有多大`int`，表示以`15`结尾`1111`，但它以一堆s*开头。*`0`

`~`操作员翻转所有*位*；s（其中`1`4 个）变为`0`s，`0`s（其中 N-4 个）变为`1`s。

# c# - WCF：.NET 2.0、多个绑定、相同端口、HTTP 和 HTTPS

> ID：12084365
> 
> 赞同：1
> 
> 时间：2012-08-23T03:31:18.553
> 
> 标签：c#, asp.net, wcf, c#-2.0, wcf-binding

我们有一个在 IIS 中有很多绑定的项目。想一想：

[http://www.domain1.com](http://www.domain1.com) http://www.domain2.com [http://www.domain3.com](http://www.domain3.com)

...等等等等。由于这是一个电子商务网站，因此每个绑定 (HTTP) 都必须有一个随附的 HTTPS 绑定，这意味着：

[https://www.domain1.com](https://www.domain1.com) https://www.domain2.com [https://www.domain3.com](https://www.domain3.com)

这些站点有一些前端通过 jQuery 使用的 WCF 服务。不会发生重定向（即，如果请求 domain2.com，它必须提供 domain2.com 的内容）。

出现的问题是它是一个 .NET 2.0 站点。我们无法升级到 4.0 并利用 serviceHostingEnvironment 节点的 multipleSiteBindingsEnabled 属性。否则它将完美运行。

假设我们有这样的服务：/service/TestService.svc/DoSomething

...如何完成以下任务？

*   [http://www.domain1.com/service/TestService.svc/DoSomething](http://www.domain1.com/service/TestService.svc/DoSomething)
*   [https://www.domain1.com/service/TestService.svc/DoSomething](https://www.domain1.com/service/TestService.svc/DoSomething)
*   [http://www.domain2.com/service/TestService.svc/DoSomething](http://www.domain2.com/service/TestService.svc/DoSomething)
*   [https://www.domain2.com/service/TestService.svc/DoSomething](https://www.domain2.com/service/TestService.svc/DoSomething)
*   [http://www.domain3.com/service/TestService.svc/DoSomething](http://www.domain3.com/service/TestService.svc/DoSomething)
*   [https://www.domain3.com/service/TestService.svc/DoSomething](https://www.domain3.com/service/TestService.svc/DoSomething)

...所有工作和响应正常？

# php - 在php中提交复选框的值

> ID：12084366
> 
> 赞同：0
> 
> 时间：2012-08-23T03:31:41.183
> 
> 标签：php, html, checkbox, submit

我是 php 新手，我正在尝试实现代码以将复选框放入表中，并将这些复选框提交的数据添加到数据库中。以下是我在 php 中的循环内创建复选框的代码：-

```
$i=0;
$i++;
$transcript = $DB->get_field('course_completions', 'Transcript', array ('course'=>$course->id, 'userid'=>$this->user->id), $strictness=IGNORE_MISSING);
if($transcript==0){
    $checked="";
}
else{
    $checked='checked';
}
$check = '<input type="checkbox" name="tanscript'.$i.'" value=0 '.$checked.' />';
$data = array($check, $year, $sem, $courselink, $coursefullname, $type, $max_credits, $grade, $points); 
```

$data 数组用于显示表格中的数据。$transcript 用于从数据库中检索值并确定是否应默认选中复选框。

有人可以告诉我如何在不使用提交按钮的情况下输入已在数据库中的复选框中选中的数据吗？另外，如果有人再次取消选中这些框，我如何在数据库中输入新值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:05:41.130

默认情况下，当 $checked 时 (?)**值**设置为 'on'，否则设置为 'off'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:48:24.380

您可以通过给您的复选框来创建**选中**`checked="checked"`的复选框。你可以通过一个变量来实现它，比如；

```
if($something == $data){
  $check = 'checked="checked"';
}else{
  $check = '';
} 
```

你可以在你的复选框中实现这个；

```
echo '<input type="checkbox"'.$check.'value="somevalue">' 
```

您也可以使用`<form>`using`GET`或`POST`方法将值传递到 DB。例如，您可以在表单中尝试此操作；

'

在你的`processor.php`你可能会抓取像 $checkbox_value = $_POST["chkbox"]; 这样的数据

你可以使用`if - else`for`$checkbox_value`检查是否有价值。

# mysql - 从 sqlite3 切换到 mysql 后 ActiveRecord::ConnectionNotEstablished

> ID：12084368
> 
> 赞同：2
> 
> 时间：2012-08-23T03:31:48.520
> 
> 标签：mysql, ruby-on-rails, activerecord, ruby-on-rails-3.2

我最近将我的 Rails 数据库从 sqlite3 切换到了 mysql，自从这样做以来，我在尝试访问我的服务器时遇到了 ConnectionNotEstablished 错误。

这是错误的完整堆栈跟踪。

```
ActiveRecord::ConnectionNotEstablished (ActiveRecord::ConnectionNotEstablished):
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:404:in `retrieve_connection'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_specification.rb:170:in `retrieve_connection'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_specification.rb:144:in `connection'
  activerecord (3.2.8) lib/active_record/query_cache.rb:67:in `rescue in call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:61:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__318842653__call__302530175__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call' 
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /home/aaron/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /home/aaron/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /home/aaron/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

与数据库的连接似乎工作正常。我可以运行 db:migrate 并且它运行良好，以及 Rails 控制台，我可以访问数据和一切都很好。我注意到，当我启动时，错误的工作方式会因环境而略有不同。它似乎在测试中运行良好。在开发中，当我在浏览器中访问页面时会引发错误，而在生产中，当我启动它时会引发错误。

这个问题似乎与这里提出的问题几乎相同： [Rails and MySQL - ActiveRecord::ConnectionNotEstablished in production environment](https://stackoverflow.com/questions/9142978/rails-and-mysql-activerecordconnectionnotestablished-in-production-environme)，但没有一个答案对我有用。

我把所有的代码都推到这里了：[https ://github.com/Aaronneyer/aaronneyer.com](https://github.com/Aaronneyer/aaronneyer.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T13:38:20.570

仍然不确定造成这种情况的确切原因是什么，但我能够通过移除不再使用的 newrelic gem 来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T03:35:19.663

您有套接字和主机设置。选择一个，可能会解决您的问题。

# android - Android：如何通过移动网络强制进行 facebook 身份验证

> ID：12084372
> 
> 赞同：3
> 
> 时间：2012-08-23T03:32:14.963
> 
> 标签：android, facebook, facebook-authentication

我想开发带有 facebook 身份验证的 android 应用程序。但是，如果手机中有 facebook 应用程序，我无法在我的应用程序上进行身份验证，如果没有，它运行良好。

所以，我想在没有 facebook 应用程序的情况下通过移动网络强制进行 facebook 身份验证。

只有当我在应用程序中使用 authorize(. , .) 时，它才会直接使用 facebook 应用程序。

我该如何解决这个问题？

此外，如果我通过 facebook 应用程序进行身份验证，Hackbook（https://developers.facebook.com/docs/mobile/android/hackbook/）也不起作用。我无法登录应用程序。

/////评论

我自己找到了答案

在 facebook sdk 中更改 facebook.java 中的授权功能。

```
public void authorize(Activity activity, final DialogListener listener) {
    authorize(activity, new String[] {}, FORCE_DIALOG_AUTH,
            listener);
}

/**
 * Authorize method that grants custom permissions.
 *
 * See authorize() below for @params.
 */
public void authorize(Activity activity, String[] permissions,
        final DialogListener listener) {
    authorize(activity, permissions, FORCE_DIALOG_AUTH, listener);
} 
```

现在它起作用了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T15:18:31.893

当您使用 Facebook SDK 3.0 和登录按钮时，强制执行此操作的最佳方法是将 LoginBehavior 设置为 LoginButton。这可以这样做：

```
LoginButton authButton = (LoginButton) view.findViewById(R.id.authButton);
authButton.setLoginBehavior(SessionLoginBehavior.SUPPRESS_SSO); 
```

资料来源：[Android - 强制 Facebook 连接 - 代码日志](https://stackoverflow.com/questions/14467289/android-force-facebook-connexion)

# android - 什么是 HandlerLeak？

> ID：12084382
> 
> 赞同：6
> 
> 时间：2012-08-23T03:33:41.143
> 
> 标签：android

ADT 的皮棉检查器说：

> 这个 Handler 类应该是静态的，否则可能会发生泄漏

泄漏处理程序的含义是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-23T03:33:41.143

来自[http://tools.android.com/tips/lint-checks](http://tools.android.com/tips/lint-checks)

> ## 处理程序泄漏
> 
> 摘要：确保 Handler 类不持有对外部类的引用
> 
> 优先级：4 / 10 严重性：警告类别：性能
> 
> 在 Android 中，处理程序类应该是静态的，否则可能会发生泄漏。在应用程序线程的 MessageQueue 上排队的消息也保留其目标处理程序。如果 Handler 是一个内部类，它的外部类也将被保留。为避免泄漏外部类，请将 Handler 声明为静态嵌套类，并对其外部类具有 WeakReference。

# php - preg_match_all 匹配整个句子

> ID：12084385
> 
> 赞同：1
> 
> 时间：2012-08-23T03:33:48.183
> 
> 标签：php, preg-match-all

我试图得到整个句子：

`PRICE CHANGE this this : this var1 : this/this (this) var2,var3 : 111,11 Price(€) : 1.021 start from : 2012-07-26 18:15:00`

从：

`timezone. PRICE CHANGE this : this var1 : this/this(this) var2, var3 : 119, 111 Price(€) : 5.021 start from : 2012-07-26 18:15:00 PRICE CHANGE this : this this2 var1 : this (this ) var2, var3 : 1604, 452 Price(€) : 6.014 start from : 2012-07-26 18:15:00 bla bla bla bla.`

使用这个：

```
body = "timezone. PRICE CHANGE this : this var1 : this/this(this) var2, var3 : 119, 111 Price(€)     : 5.021 start from : 2012-07-26 18:15:00 PRICE CHANGE this : this  this2 var1 : this  (this ) var2, var3 : 1604, 452 Price(€)   : 6.014 start from : 2012-07-26 18:15:00 bla bla bla bla."

$test = preg_match_all('/PRICE CHANGE\s*(.*?)*(\d+:\d+:\d+)', $body, $result); 
```

而且它不工作，帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T03:39:24.857

```
preg_match_all('/PRICE CHANGE.*?(?=PRICE CHANGE)/', $body, $result); 
```

会成功的，除非你没有告诉我们关于结构的事情。如果它真的只是一个价格变化的列表，这将起到作用并且更具可读性。

'(?=' 如果你不知道，它是一个前瞻。它是一个零宽度（不匹配字符）断言，用于检查即将出现的字符。当与惰性运算符结合使用时，它可能是一个很好的分解方式字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T03:47:36.800

如果我理解正确，您想从每次更改中捕捉时间，对吗？为此，您可以通过以下方式更改表达式：

```
'/PRICE CHANGE\s*(.*?)(\d+:\d+:\d+)/i' 
```

也许`i`修饰符不是完全必要的。

# regex - ant 的 replaceregexp ，删除特定的空格

> ID：12084386
> 
> 赞同：2
> 
> 时间：2012-08-23T03:33:48.787
> 
> 标签：regex, ant

我找不到使用 ant 删除空间的方法。（我不是说修剪，而是从 ~ 删除到 ）

我想让一个项目与另一个项目有所不同。

例如：

我有以下代码。

```
.... doSomeThing;

//#removeStart

NotReleasedObject nro = new NotReleasedObject();
nro.doSomeThing();

//removeEnd#

....doAnyThing.. 
```

如您所见，我想从`//#removeStart`to中删除`//removeEnd#`。我不确定会写多少代码，但是这两个标签内的所有代码都需要消失`//#removeStart ... //removeEnd#`。一个java文件中可以有多个。

这是我的测试`replaceregexp`代码：

```
<replaceregexp flags="s" replace="" byline="false" encoding="utf-8">
        <regexp pattern="//#removeStart.*//removeEnd#"/>
        <fileset dir="${extern-source-path}"/>
</replaceregexp>

------ source for victim.

//#removeStart
space 1
//removeEnd#

something

//#removeStart
space 2
//removeEnd# 
```

现在我的代码不能正常工作。标志 -s 有效，但如果一个文件有超过 1 个匹配项，那么从空间 1 到空间 2 的所有内容都消失了。（包括`something`！）我真正想要的是空间 1,2 消失了，但`something`应该保持原样。

我怎样才能修复它，以便它用 1 替换每个出现的 1 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T03:43:49.813

您的显式字符不匹配：您的正则表达式表示`//##ExternRemove`，而您的实际文本是`//##removeStart`or `//#removeStart`。如果这是一个实际的正则表达式，则显式字符需要完全相同。也不`.`匹配换行符，您需要特别包含它（例如`[\s\S]*`）。

最后，如果您可能有多对这种匹配，则应该使匹配不贪心（通常是通过添加`?`）。总而言之，您可能需要一个正则表达式，例如：

```
//##?removeStart[\s\S]*?//removeEnd##? 
```

这是假设您希望允许 1-2`#`开始一行并且该短语将始终为`removeStart`/ `removeEnd`。否则，您可以添加选项，例如

```
//##?(?:removeStart|ExternRemove)[\s\S]*?//(?:removeEnd|ExternEnd)##? 
```

同样，这取决于非捕获匹配的 ant 术语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:12:36.520

我已经成功地做到了这一点：

### foo.txt

```
This is a test
--->
###start remove
Blah blah blah
Yadda yadda yadda
###end remove
--->
End of my test 
```

### 构建.xml

```
<project>
    <replaceregexp file="foo.txt"
        flags="s"
        match="###start remove.+###end remove"
        replace=""/>
</project> 
```

### 结果 foo.txt

```
This is a test
--->

--->
End of my test 
```

看起来您的*正则表达式*不太正确。你是*正则表达式*，`##ExternRemove.*`但你的文件有`//#removeStart`。

我正在查看是否可以在副本或 concat 中执行此操作，因为我讨厌直接更改文件。不幸的是，我还没有想出办法做到这一点。

# javascript - Backbone：等待多次获取继续

> ID：12084388
> 
> 赞同：8
> 
> 时间：2012-08-23T03:33:54.933
> 
> 标签：javascript, jquery, backbone.js

我获取多个页面的集合，我正在寻找一种方法来了解所有获取何时完成。这是我的收藏的样子：

```
app.collections.Repos = Backbone.Collection.extend({
  model: app.models.Repo,
  initialize: function(last_page){
    this.url = ('https://api.github.com/users/' + app.current_user + '/watched');

    for (var i = 1; i <= last_page; i++) {
      this.fetch({add: true, data: {page: i}});  
    };
  }, ... 
```

知道如何使用干净的代码实现这一目标吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T03:49:00.780

使用 jQuery[延迟](http://www.erichynds.com/jquery/using-deferreds-in-jquery/)：

```
var deferreds = [];
for (var i = 1; i <= last_page; i++) {
  deferreds.push(this.fetch({add: true, data: {page: i}}));
};

$.when.apply($, deferreds).done(function() {
  ...
  <CODE HERE>
  ...
} 
```

（我还没有实际测试过，但我认为它应该可以工作。）

jQuery 文档[`when`](http://api.jquery.com/jQuery.when/)：

> 提供一种基于一个或多个对象（通常是表示异步事件的延迟对象）执行回调函数的方法。

另一个可能有帮助的答案：[你如何使用 jQuery Deferreds 数组？](https://stackoverflow.com/questions/4878887/how-do-you-work-with-an-array-of-jquery-deferreds)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T05:46:40.000

一种选择是使用`underscore.js`' `after`-function ( [docs](http://underscorejs.org/#after) )，但这需要使用 success -callback，因为会有很多 add -events：

```
initialize: function(last_page){
  this.url = ('https://api.github.com/users/' + app.current_user + '/watched');

  var self = this; // save a reference to this

  var successCallback = _.after(function() {

    self.trigger('allPagesFetched'); //trigger event to notify all listeners that fetches are done

  }, last_page); // this function will be called when it has been called last_page times

  for (var i = 1; i <= last_page; i++) {
    this.fetch({add: true, data: {page: i}, success: successCallback});  
  };
}, 
```

希望这有帮助！

# python - ImportError: 没有名为 Shell 的模块；未导入 shell（32 位，python）

> ID：12084395
> 
> 赞同：2
> 
> 时间：2012-08-23T03:35:32.313
> 
> 标签：python, shell, 32-bit, py2exe, importerror

我正在使用 python 开发一个项目，其中包含许多不同的 python 文件和必须安装的额外库，我目前正在尝试编译一个 32 位版本（我们目前只有一个 64 位 .exe）。

但是，尽管在运行常规 python 文件时一切正常，但在运行已编译的 .exe（使用 py2exe 编译）时，我不断收到错误消息：

```
 Traceback (most recent call last):
    File "fredchat.py", line 23, in <module>
    File "fcio.pyc", line 20, in <module>
 ImportError: No module named shell 
```

正如预期的那样，fredchat.py 有一个

```
 import fcio 
```

第 23 行的命令。但是，在 fcio.py 中没有提到“shell”这个词！

我们的 setup.py 几乎是基本的：

```
 from distutils.core import setup
 import py2exe

 setup(console=['fredchat.py']) 
```

不幸的是，我不能给出任何实际代码，A. 因为它很长，B. 因为项目负责人对我们何时给出什么代码非常严格（可以理解）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-04T04:57:12.227

我发现这是 py2exe 和 win32com 的一个已知问题。[py2exe wiki](http://www.py2exe.org/index.cgi/win32com.shell)有一个解决方法。在 setup.py 文件的开头附近插入以下代码。这将诱使 py2exe 寻找`win32com.shell`模块并将其包含在分发中。

```
# ...
# ModuleFinder can't handle runtime changes to __path__, but win32com uses them
try:
    # py2exe 0.6.4 introduced a replacement modulefinder.
    # This means we have to add package paths there, not to the built-in
    # one.  If this new modulefinder gets integrated into Python, then
    # we might be able to revert this some day.
    # if this doesn't work, try import modulefinder
    try:
        import py2exe.mf as modulefinder
    except ImportError:
        import modulefinder
    import win32com, sys
    for p in win32com.__path__[1:]:
        modulefinder.AddPackagePath("win32com", p)
    for extra in ["win32com.shell"]: #,"win32com.mapi"
        __import__(extra)
        m = sys.modules[extra]
        for p in m.__path__[1:]:
            modulefinder.AddPackagePath(extra, p)
except ImportError:
    # no build path setup, no worries.
    pass

from distutils.core import setup
import py2exe

# ...
# The rest of the setup file.
# ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T14:36:55.547

可能是动态导入了有问题的模块，而 py2exe 在组装依赖项时无法识别它。您可以尝试直接在代码中导入该模块并创建一个新的可执行文件。其他可能性是强制 py2exe 包含模块，将以下内容添加到您的配置中：

```
opts = {
  'py2exe': { "includes" : ["qualified_module_name"] }
} 
```

# c# - 重新打开电子表格时不会触发 Excel 按钮事件

> ID：12084396
> 
> 赞同：1
> 
> 时间：2012-08-23T03:35:43.830
> 
> 标签：c#, excel, event-handling, vsto

当我向电子表格添加按钮或链接时，单击事件会起作用。但是，当我保存电子表格时，将其关闭并重新打开，事件不会触发。

```
AddControl(xlApp, ((TaskPaneView)this.Parent).factory, "text", "A1");

public void AddControl(Microsoft.Office.Interop.Excel.Application xlApp, Microsoft.Office.Tools.Excel.ApplicationFactory factory, string controlText, string address)
{
    Microsoft.Office.Interop.Excel.Worksheet nativeWorksheet = xlApp.ActiveWorkbook.ActiveSheet;
    Microsoft.Office.Tools.Excel.Worksheet vstoWorksheet = factory.GetVstoObject(nativeWorksheet);
    var btn = new Microsoft.Office.Tools.Excel.Controls.Button();
    btn.Name = "link1";
    btn.Text = controlText;
    btn.Click += new EventHandler(btn_Click);
    vstoWorksheet.Controls.AddControl(btn, nativeWorksheet.Range[address], controlText);
}

void btn_Click(object sender, EventArgs e)
{

} 
```

**打开 WorkBook 时，是否有一种简单的方法可以再次连接事件？**

*我想我将不得不手动搜索工作簿中的按钮和 AddHandler。*

**编辑：**这已记录在案，但关闭电子表格后没有提及问题：[在应用程序级项目的运行时将控件添加到工作表](http://msdn.microsoft.com/en-us/library/cc442817.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T03:55:08.953

![在此处输入图像描述](../Images/3b1343207035e9ba91fa96b50e69a270.png)

[当一个文档被保存然后关闭时，所有的动态宿主控件都会从文档中移除。只有底层的本机 Office 对象留在后面。](http://msdn.microsoft.com/en-us/library/cc442765(v=vs.100).aspx).

* * *

我现在可能会用另一种方式，使用代码创建 VBA 按钮以利用[加载项功能](http://vbadud.blogspot.com.au/2008/11/call-method-in-vsto-addin-from-visual.html)：

VBA代码：

```
Dim oAddin As COMAddIn
Dim oCOMFuncs As Object
Set oAddin = Application.COMAddIns(ExcelAddInNameSpace")
Set oCOMFuncs = oAddin.Object
oCOMFuncs.CallAFunctionOfAddIn 
```

* * *

或者使用上下文菜单的另一种方式（当超过 NamedRanges 时）。

* * *

[来自MSFT](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/59d32994-91bc-49a8-90b1-8dd46e8997ce)的更多信息：

> 但是问题来了：如果您保存工作簿，在安装了插件的机器或干净的机器上打开它，这次按钮不起作用！
> 
> 因此我们可以看到，通过插件将控件添加到文档表面并没有多大意义，因为控件可能会失去其功能。这就是我们通常建议使用自定义任务窗格而不是在文档表面添加控件的原因。看看以下文件：

[http://msdn.microsoft.com/en-us/library/aa942864.aspx](http://msdn.microsoft.com/en-us/library/aa942864.aspx)

[http://msdn.microsoft.com/en-us/library/aa338197(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/aa338197(v=office.12).aspx)

# php - 如何将 joomla(ACL) 从 joomla 1.5 转换为 joomla 2.5 版本

> ID：12084401
> 
> 赞同：0
> 
> 时间：2012-08-23T03:36:29.427
> 
> 标签：php, joomla, joomla1.5, joomla2.5

我在 joomla 1.5 中有一个功能

```
function saveuser($row){
    $db =& JFactory::getDBO();
    $instance = new JUser();
    jimport('joomla.application.component.helper');
    $config   = &JComponentHelper::getParams('com_users');
    if(!isset($row['usertype']))
    $row['usertype'] = $config->get( 'new_usertype', 'Registered' );

    $acl =& JFactory::getACL();
    if(!$row['gid'])
    $row['gid'] = $acl->get_group_id( '', $usertype);

    $instance->set( 'id'            , $row['id'] );
    $instance->set( 'name'          , $row['name'] );
    $instance->set( 'username'      , $row['username'] );
    $instance->set( 'password'      , $row['password'] );
    $instance->set( 'email'         , $row['email'] );
    $instance->set( 'gid'           , $row['gid']);
    $instance->set( 'usertype'      , $row['usertype'] );
    unset($instance->password_clear);
    unset($instance->guest);
    unset($instance->aid);
    $ret = $db->insertObject( '#__users', $instance, 'id' );
    if(!$ret){
        return false;
    }
    $acl->add_object( 'users', $row['username'], $row['id'], null, null, 'ARO' );
    $acl->add_group_object( $row['gid'], 'users', $row['id'], 'ARO' );
    return true;
} 
```

但是当作为 joomla 2.5 运行时，错误是：

```
Fatal error: Call to undefined method JAccess::get_group_id() in ... on line ...
Fatal error: Call to undefined method JAccess::add_object() in ... on line ...
Fatal error: Call to undefined method JAccess::add_group_object() ... on line ...

How to fix this function to joomla 2.5, How to ideas ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T03:58:02.470

Joomla 的 ACL 系统！2.5 完全不同，您的问题没有简单的答案（Joomla! 1.5 对 ACL 的尝试只实现了一半）。

您最好从 Joomla 上的“[访问控制列表/1.6-2.5/Tutorial](http://docs.joomla.org/ACL_Tutorial_for_Joomla_1.6) ”开始！医生的网站。通读 2.5 核心组件，如`com_users`和`com_content`.

# c - 在 C 中使用 R_alloc

> ID：12084404
> 
> 赞同：12
> 
> 时间：2012-08-23T03:36:54.963
> 
> 标签：c, r

我有从 R 调用的 C 代码：

```
.C("giveProb",as.double(2),as.double(2),as.double(c(0,1,0,1,1,0,1,0))) 
```

我想将它称为一堆（数十万或数百万）次（具有不同的第三个参数），当我将它放在 for 循环中大约 100 次时它工作正常，但任何高于此的东西都会使 R 崩溃。

我感觉这是使用 R_alloc 的内存问题。我在 C 中分配了六个数组，例如：

```
newCoefArray = (double *)R_alloc(1,curSize * sizeof(double)); 
```

但根据 R 手册“编写 R 扩展”：

> 此内存取自堆，并在 .C、.Call 或 .External 调用结束时释放。

我认为这意味着在循环的每次迭代期间都会释放内存。但在下一句中：

> 用户还可以通过调用 vmaxget 记录当前位置并随后通过调用 vmaxset 清除分配的内存来管理它。这仅推荐给专家。

作为一个远非专家的人，我希望这里有人可以提供帮助。C 代码的全部内容如下。

```
#include <R.h>
#include <Rmath.h>
#include <stdio.h>
void giveProb(double *k, double *q,double *order){
double  curSize;
double  tmpSize;
double  *newCoefArray;
double  *oldCoefArray;
double  *newAArray;
double  *oldAArray;
double  *newBArray;
double  *oldBArray;
int     position=0;

long int factorial(int n){
    if(n==0||n==1){
        return(1);
    }
    int tmp=1,i=1;
    while(i<=n){
        tmp=tmp*i;
        i++;
    }
    return(tmp);
} 

void expander(double a, double b,double c,double d,double coeff){
    double leadingTerm=beta(a,b);
    int bb=b; 
    double index[bb], sumLeaders[bb];
    for(int i=0;i<bb;i++){
        index[i]=a+i;
        sumLeaders[i]=factorial(a+b-1)/(factorial(index[i])*factorial(a+b-1-index[i]));
        newCoefArray[i+position]=coeff*leadingTerm*sumLeaders[i];
        newAArray[i+position]=index[i]+c+1;
        newBArray[i+position]=a+b+d-index[i];
    }
    position=position+bb;
    curSize=position;
}

void separator(double e, double f){
    double a, b, coeff;
    for(int i=0; i<tmpSize; i++){
        coeff=oldCoefArray[i];
        a=oldAArray[i];
        b=oldBArray[i];
        expander(a,b,e,f,coeff);
    }
}

void condenser(){
    tmpSize=0;
    for(int i=1; i<curSize; i++){
        for(int j=0; j<i; j++){
            if(newAArray[j]==newAArray[i]){
                newCoefArray[j]=newCoefArray[j]+newCoefArray[i];
                newCoefArray[i]=0;
            }
        }
    }
    for(int i=0; i<curSize; i++){
        tmpSize=tmpSize+(newCoefArray[i]!=0);
    }
    oldCoefArray =(double *) R_alloc(1,tmpSize * sizeof(double));
    oldAArray = (double *)R_alloc(1,tmpSize * sizeof(double));
    oldBArray = (double *)R_alloc(1,tmpSize * sizeof(double));
    for(int i=0; i<tmpSize; i++){
        oldCoefArray[i]=newCoefArray[i];
        oldAArray[i]=newAArray[i];
        oldBArray[i]=newBArray[i];
    }
    curSize=tmpSize;    
}

  long double coefficient=1;
  for(int i=0;i<*k;i++){
    coefficient=coefficient*factorial(*k)/(factorial(i)*factorial(*k-i-1));
  }
  for(int i=0;i<*q;i++){
    coefficient=coefficient*factorial(*q)/(factorial(i)*factorial(*q-i-1));
  }

  double numObs=*k+*q;
  double out=0;
  curSize=order[1]+1;

  newCoefArray = (double *)R_alloc(1,curSize * sizeof(double));
  newAArray = (double *)R_alloc(1,curSize * sizeof(double));
  newBArray = (double *)R_alloc(1,curSize * sizeof(double));

  expander(order[0]+1,order[1]+1,order[2],order[3],coefficient);

  oldCoefArray = (double *)R_alloc(1,curSize * sizeof(double));
  oldAArray = (double *)R_alloc(1,curSize * sizeof(double));
  oldBArray = (double *)R_alloc(1,curSize * sizeof(double));

  for(int i=0;i<curSize; i++){
    oldCoefArray[i]=newCoefArray[i];
    oldAArray[i]=newAArray[i];
    oldBArray[i]=newBArray[i];
  }

  for(int i=4;i<2*numObs;i+=2){ 
    position=0;
    tmpSize=curSize;
    separator(order[i],order[i+1]);
    condenser();
  }
  position=0;
  for(int i=0;i<curSize;i++){
    out=out+newCoefArray[i]*beta(newAArray[i],newBArray[i]);
  }
  *k=out;

} 
```

**更新：** 使用下面评论中的建议，我得到以下信息（这证实了我之前的想法，对吧？）：

R -d valgrind -f test_script.R ==11131== Memcheck，内存错误检测器 ==11131== 版权所有 (C) 2002-2010 和 GNU GPL，由 Julian Seward 等人撰写。==11131== 使用 Valgrind-3.6.0 和 LibVEX；使用 -h 重新运行以获取版权信息 ==11131== 命令：/usr/lib64/R/bin/exec/R -f test_script.R ==11131==

```
R version 2.15.1 (2012-06-22) -- "Roasted Marshmallows"
Copyright (C) 2012 The R Foundation for Statistical Computing
ISBN 3-900051-07-0
Platform: x86_64-redhat-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

==11131== Conditional jump or move depends on uninitialised value(s)
==11131==    at 0x3A6A685F80: __GI___strcasecmp_l (in /lib64/libc-2.12.so)
==11131==    by 0x3A6A61FF24: __gconv_open (in /lib64/libc-2.12.so)
==11131==    by 0x3A6A62D3B7: _nl_find_msg (in /lib64/libc-2.12.so)
==11131==    by 0x3A6A62DB83: __dcigettext (in /lib64/libc-2.12.so)
==11131==    by 0x3A6C3BD2DF: ??? (in /usr/lib64/R/lib/libR.so)
==11131==    by 0x3A6C313FC8: setup_Rmainloop (in /usr/lib64/R/lib/libR.so)
==11131==    by 0x3A6C315278: Rf_mainloop (in /usr/lib64/R/lib/libR.so)
==11131==    by 0x40084A: main (in /usr/lib64/R/bin/exec/R)
==11131==
==11131== Use of uninitialised value of size 8
==11131==    at 0x3A6A6863A4: __GI___strcasecmp_l (in /lib64/libc-2.12.so)
==11131==    by 0x3A6A61FF24: __gconv_open (in /lib64/libc-2.12.so)
==11131==    by 0x3A6A62D3B7: _nl_find_msg (in /lib64/libc-2.12.so)
==11131==    by 0x3A6A62DB83: __dcigettext (in /lib64/libc-2.12.so)
==11131==    by 0x3A6C3BD2DF: ??? (in /usr/lib64/R/lib/libR.so)
==11131==    by 0x3A6C313FC8: setup_Rmainloop (in /usr/lib64/R/lib/libR.so)
==11131==    by 0x3A6C315278: Rf_mainloop (in /usr/lib64/R/lib/libR.so)
==11131==    by 0x40084A: main (in /usr/lib64/R/bin/exec/R)
==11131==
==11131== Use of uninitialised value of size 8
==11131==    at 0x3A6A6863A8: __GI___strcasecmp_l (in /lib64/libc-2.12.so)
==11131==    by 0x3A6A61FF24: __gconv_open (in /lib64/libc-2.12.so)
==11131==    by 0x3A6A62D3B7: _nl_find_msg (in /lib64/libc-2.12.so)
==11131==    by 0x3A6A62DB83: __dcigettext (in /lib64/libc-2.12.so)
==11131==    by 0x3A6C3BD2DF: ??? (in /usr/lib64/R/lib/libR.so)
==11131==    by 0x3A6C313FC8: setup_Rmainloop (in /usr/lib64/R/lib/libR.so)
==11131==    by 0x3A6C315278: Rf_mainloop (in /usr/lib64/R/lib/libR.so)
==11131==    by 0x40084A: main (in /usr/lib64/R/bin/exec/R)
==11131==
  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

[Previously saved workspace restored]

> dyn.load("SchWolfenew.so")
> for(i in 1:1000){
+ .C("giveProb",as.double(2),as.double(2),as.double(c(0,1,0,1,1,0,1,0)))
+ }

==29371== Invalid read of size 1
==29371==    at 0x3A6C31A2E9: ??? (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C31CBC9: Rf_cons (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C2D2B74: ??? (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C2DD121: Rf_eval (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C2DF830: Rf_applyClosure (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C32B828: Rf_usemethod (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C32BAE7: ??? (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C2D290B: ??? (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C2DD121: Rf_eval (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C2DF830: Rf_applyClosure (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C2DD3F7: Rf_eval (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C2DEF4F: ??? (in /usr/lib64/R/lib/libR.so)
==29371==  Address 0x3ff0000000000003 is not stack'd, malloc'd or (recently) free'd
==29371==

 *** caught segfault ***
address (nil), cause 'unknown'
==29371== Invalid read of size 1
==29371==    at 0x3A6C31AF0B: ??? (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C31CBC9: Rf_cons (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C31CC71: Rf_allocList (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C2C8CD4: R_GetTraceback (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C313472: ??? (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6B20F4FF: ??? (in /lib64/libpthread-2.12.so)
==29371==    by 0x3A6C31A2E8: ??? (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C31CBC9: Rf_cons (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C2D2B74: ??? (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C2DD121: Rf_eval (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C2DF830: Rf_applyClosure (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C32B828: Rf_usemethod (in /usr/lib64/R/lib/libR.so)
==29371==  Address 0x4020000000000003 is not stack'd, malloc'd or (recently) free'd
==29371==
==29371==
==29371== Process terminating with default action of signal 11 (SIGSEGV)
==29371==  General Protection Fault
==29371==    at 0x3A6C31AF0B: ??? (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C31CBC9: Rf_cons (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C31CC71: Rf_allocList (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C2C8CD4: R_GetTraceback (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C313472: ??? (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6B20F4FF: ??? (in /lib64/libpthread-2.12.so)
==29371==    by 0x3A6C31A2E8: ??? (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C31CBC9: Rf_cons (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C2D2B74: ??? (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C2DD121: Rf_eval (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C2DF830: Rf_applyClosure (in /usr/lib64/R/lib/libR.so)
==29371==    by 0x3A6C32B828: Rf_usemethod (in /usr/lib64/R/lib/libR.so)
==29371==
==29371== HEAP SUMMARY:
==29371==     in use at exit: 29,307,724 bytes in 12,896 blocks
==29371==   total heap usage: 28,845 allocs, 15,949 frees, 48,495,252 bytes allocated
==29371==
==29371== LEAK SUMMARY:
==29371==    definitely lost: 0 bytes in 0 blocks
==29371==    indirectly lost: 0 bytes in 0 blocks
==29371==      possibly lost: 0 bytes in 0 blocks
==29371==    still reachable: 29,307,724 bytes in 12,896 blocks
==29371==         suppressed: 0 bytes in 0 blocks
==29371== Rerun with --leak-check=full to see details of leaked memory
==29371==
==29371== For counts of detected and suppressed errors, rerun with: -v
==29371== Use --track-origins=yes to see where uninitialised values come from
==29371== ERROR SUMMARY: 5 errors from 5 contexts (suppressed: 21 from 9)
Segmentation fault (core dumped) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T13:27:26.733

我将您的 C 代码放在文件 memory.c 中，然后运行 ​​R CMD SHLIB memory.c。这是我的测试脚本

```
dyn.load("/tmp/memory.so")
set.seed(123L)
while (TRUE)
    .C("giveProb",as.double(2),as.double(2), sample(c(0, 1), 8, TRUE)) 
```

而 R -d valgrind -f test_script.R 说

```
> dyn.load("/tmp/memory.so")
> set.seed(123L)
> while (TRUE)
+     .C("giveProb",as.double(2),as.double(2), sample(c(0, 1), 8, TRUE))
==3461== Invalid write of size 8
==3461==    at 0xBF29D78: expander.4631 (memory.c:35)
==3461==    by 0xBF29EBB: separator.4643 (memory.c:49)
==3461==    by 0xBF29AAB: giveProb (memory.c:108)
==3461==    by 0x4EEAF49: do_dotCode (dotcode.c:1689)
==3461==    by 0x4F1F4E2: Rf_eval (eval.c:493)
==3461==    by 0x4F218F6: do_for (eval.c:1310)
==3461==    by 0x4F1F2E8: Rf_eval (eval.c:467)
==3461==    by 0x4F6B5FB: Rf_ReplIteration (main.c:256)
==3461==    by 0x4F6B7B2: R_ReplConsole (main.c:305)
==3461==    by 0x4F6D022: run_Rmainloop (main.c:987)
==3461==    by 0x4F6D037: Rf_mainloop (main.c:994)
==3461==    by 0x400845: main (Rmain.c:32) 
```

（加上更多）。memory.c 第 35 行是

```
newCoefArray[i+position]=coeff*leadingTerm*sumLeaders[i]; 
```

所以 i + 位置大于分配的数组。

# android - 带有 CustomLayout 项和状态的 GridView

> ID：12084408
> 
> 赞同：0
> 
> 时间：2012-08-23T03:37:42.513
> 
> 标签：android, android-layout, android-widget, android-view

我正在处理需要显示动态项目列表的布局。每个项目都有一个定义的 UUID、一个名称（横幅文本）、一个图像 URL 和一个布尔值来指示它是否被选中 - 我还创建了一个 POJO 来保存这些。我创建了一个自定义布局，将项目放在网格视图中，两个图标上带有横幅文本。它看起来像这样：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >
  <RelativeLayout
    android:id="@+id/ItemLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <ImageView
        android:id="@+id/ItemImage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:background="@android:color/transparent" />
    <ImageView
        android:id="@+id/ItemOverlayImage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:background="@android:color/transparent" />
    <TextView
        android:id="@+id/ItemTextBanner"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="2dp"
        android:background="#BF000000"
        android:gravity="center"
        android:textStyle="bold" />
  </RelativeLayout>
</FrameLayout> 
```

我还创建了自定义适配器和活动，我可以毫无问题地读取所有项目，下载图像并编码为位图并设置文本横幅。问题是如果单击该项目，我希望“选定”状态和图像发生变化。

我知道我可以添加`GridView.setOnItemOnClickListener`and 里面我知道哪个项目被选中以及它来自父视图，但我不知道如何获得它的“选定”状态。 [此](https://stackoverflow.com/questions/11326089/android-gridview-keep-item-selected)链接使用适配器中静态列表中的状态，并且是我所建模的。我添加了以下方法并从`GridView.setOnItemOnClickListener`.

```
public void itemSelected(View parent, int position)
{
    if(items.get(position).isSelected())
    {
        ImageView interestSelected = (ImageView)parent.findViewById(R.id.ItemOverlayImage);
        interestSelected.setImageResource(0);
    }
    else
    {
        ImageView interestSelected = (ImageView)parent.findViewById(R.id.ItemOverlayImage);
        interestSelected.setImageResource(R.drawable.overlay);          
    }
} 
```

第一个问题很明显，我没有将状态保存到我的 items 数组中，但这是一个简单的解决方法。真正的问题是只有第一个项目得到覆盖。那么如何更改`R.id.ItemOverlayImage`所选 GridView 中的项目而不仅仅是第一个？还是我完全错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:44:29.480

关于您的代码的一些要点：

您可能只获得第一个带有覆盖的项目，因为您`findViewById`在父项上搜索，`GridView`而不是行视图`view`，因此`findViewById`将返回`ImageView`它找到的第一个项目（在第一个可见行上）。为了显示该叠加层，您可以根据您在适配器方法中使用的代码来选择如何执行此操作，如果`getView`您只想同时显示一个带有叠加层的项目（例如，当您单击一个项目时，前一个被点击的（如果有的话）将取消选择）或者如果你有切换项目的选项（点击->覆盖，另一次点击->没有覆盖）。在不知道上述信息的情况下，我会这样做：

```
public void onItemClick (AdapterView<?> parent, View view, int position, long id) {
     ImageView overlay = (ImageView) view.findViewById(R.id.ItemOverlayImage);
     if (!items.get(position).isSelected()) { // the item doesn't have an overlay
         overlay.setImageResource(R.drawable.overlay); // set the overlay
         items.setSelected(true); // set to true so the adapter knows it
     } else { // the item has the overlay so we remove it
         overlay.setImageResource(0);
         items.setSelected(false); set to false so the adapter knows it
     }
} 
```

只要您在`getView`方法中使用`isSelected`设置或不设置叠加层就可以了。

此外，您应该删除`FrameLayout`包装 的`RelativeLayout`，因为您不对其进行任何操作（？！？）。

# unit-testing - AngularJS - 使用 $http 服务的测试服务方法

> ID：12084410
> 
> 赞同：19
> 
> 时间：2012-08-23T03:38:08.893
> 
> 标签：unit-testing, angularjs

我的服务上有一个功能，看起来像这样：

```
addStatement: function(user, action, object) {
            var statement = {
                    user: user,
                    action: action,
                    object: object
            };
            $http({
                method: 'POST', 
                url: '/foo/bar', 
                data: statement, 
                headers: {Authorization: 'Basic YWxhZGRpbjpvcGVuIHNlc2FtZQ=='}
            }).success(function(data) {
                alert("success: " + data);
            });
        } 
```

我想为此方法编写一个单元测试，但我不确定如何使它工作。基本上，我想测试发送的数据是从函数参数正确构造的，并且发送了正确的授权标头。

我一直在阅读如何使用[$httpBackend](http://docs.angularjs.org/api/ngMock.%24httpBackend)，但是该示例正在测试一个控制器，并且只是在发出和返回请求时在 $scope 上更改的内容。有没有办法实现我想要的测试？还是我要出事了？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-23T06:39:27.463

测试服务与测试控制器没有太大区别，因此原理是相同的。基本上你需要：

*   注入被测对象
*   设置模拟（如果有的话） - 在这里你使用 $httpBackend 模拟在正确的轨道上
*   在被测对象上运行方法并验证结果

如果您在测试服务方法导致 $http POST 调用之后，您可以这样编写测试（省略非必要部分）：

```
beforeEach(module('MyApp'));
beforeEach(inject(function(MyService, _$httpBackend_) {
    service = MyService;
    $httpBackend = _$httpBackend_; // angular strips the underscores so
                                   // we don't need to use unique names
    // https://docs.angularjs.org/api/ngMock/function/angular.mock.inject
}));

it('should invoke service with right paramaeters', function() {
    $httpBackend.expectPOST('/foo/bar', {
        "user": "testUser",
        "action": "testAction",
        "object": {}
    }, function(headers){
        return headers.Authorization === 'Basic YWxhZGRpbjpvcGVuIHNlc2FtZQ==';
    }).respond({});
    service.addStatement('testUser', 'testAction', {});
    $httpBackend.flush();
}); 
```

这是说明此测试的有效 jsFiddle：http: [//jsfiddle.net/pkozlowski_opensource/MkrjZ/2/](http://jsfiddle.net/pkozlowski_opensource/MkrjZ/2/)

最后一点：最好不要在单元测试中使用 .alert() ，因为这些警报会暂停测试的执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T16:08:08.203

我写了一篇关于这个主题的博客文章，展示了一些关于使用 Angular 的内置模拟和编写自己的模拟，也许它可以帮助你更深入地理解：

[如何模拟 AngularJS 模块并将它们注入到你的 testacular 测试中？](http://southdesign.de/blog/mock-angular-js-modules-for-test-di.html)

简而言之，它定义了第二个测试模块，可以模拟所需的行为：

```
var apptastic      = angular.module('apptastic', []),
    apptasticMock  = angular.module('apptasticMock', []); 
```

并覆盖原来的行为，例如这样：

```
apptasticMock.service("socket", function($rootScope){
... // overwrite
}); 
```

然后必须在测试中加载它 - 这是因为 Angular 会按照加载顺序覆盖已定义的服务：

```
describe("Socket Service", function(){
  var socket;

  beforeEach(function(){
    module('apptastic');
    module('apptasticMock');

    inject(function($injector) {
      socket = $injector.get('socket');
    });
  });

  it("tests something", function(){
  ... // test
  });

}); 
```

有了良好的代码结构，即使继承也不是真正的问题，同时能够对应该模拟的内容以及应该从原始代码使用的内容进行细粒度控制。

# ruby-on-rails - 保存到 PostgreSQL 时二进制数据变得无聊

> ID：12084414
> 
> 赞同：0
> 
> 时间：2012-08-23T03:38:49.810
> 
> 标签：ruby-on-rails, postgresql, heroku

我会让这个 irb 会话来说话（用 省略的垃圾`....`）。

### 使用一些编组数据创建模型。`user_info`是二元列

```
irb(main):011:0> p2 = Provider.create(user_info: Marshal.dump(ActiveSupport::HashWithIndifferentAccess.new({foo: 1, bar: 2}))
   (0.7ms)  BEGIN
  SQL (11.6ms)  INSERT INTO "providers" (...."user_info") VALUES (....$9) RETURNING "id"  [.....["user_info", "\x04\bC:-ActiveSupport::HashWithIndifferentAccess{\aI\"\bfoo\x06:\x06EFi\x06I\"\bbar\x06;\x06Fi\a"]]
   (3.6ms)  COMMIT
=> #<Provider id: 98, ..... user_info: "\x04\bC:-ActiveSupport::HashWithIndifferentAccess{\aI\"\bf...", provider_id: nil> 
```

### 检查值。看起来不错：

```
irb(main):013:0> p2.user_info
=> "\x04\bC:-ActiveSupport::HashWithIndifferentAccess{\aI\"\bfoo\x06:\x06EFi\x06I\"\bbar\x06;\x06Fi\a" 
```

### 坏事发生了：在这里我重新加载它，值完全变成了 Marshal 无法加载的格式

```
irb(main):014:0> p2.reload
  Provider Load (5.3ms)  SELECT "providers".* FROM "providers" WHERE "providers"."id" = $1 LIMIT 1  [["id", 98]]
=> #<Provider id: 98, ...., user_info: "x0408433a2d416374697665537570706f72743a3a4861736857...", provider_id: nil>

irb(main):015:0> p2.user_info
=> "x0408433a2d416374697665537570706f72743a3a4861736857697468496e646966666572656e744163636573737b07492208666f6f063a0645466906492208626172063b06466907" 
```

在我最近将我的数据库从 shared 移动到他们新的免费[Dev Postgres](https://addons.heroku.com/heroku-postgresql)之后，此会话在 Heroku 上运行。

我不确定这是heroku 问题、postgres 问题还是rails 问题。奇怪的是：我还将同一个应用程序的另一个实例（生产）迁移到新的 Dev Posgress，它没有这个问题。我发现[了这个](http://blog.aradine.com/2009/09/rubys-marshal-and-activerecord-and.html)，但它似乎在几年前就已经修复了。有人有这方面的经验吗？

## 更新

看起来我毕竟从这个关于 SO 的出色答案中找到了答案：[https ://stackoverflow.com/a/8541304/65311](https://stackoverflow.com/a/8541304/65311)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T00:39:51.467

Heroku 的文档解释了如何在其较新的数据库中为 bytea 配置更改：[https ://devcenter.heroku.com/articles/heroku-postgresql#troubleshooting](https://devcenter.heroku.com/articles/heroku-postgresql#troubleshooting)

# linux - 之间的区别 | 和 ; 和 ＆

> ID：12084418
> 
> 赞同：0
> 
> 时间：2012-08-23T03:39:33.800
> 
> 标签：linux, shell

我已经看到`|`并被用来在 Linux shell 上批处理多个命令`;`。`&`它们之间有什么区别？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T03:41:33.497

`'|'`被称为管道符号，它用于获取一个命令的输出并将其“管道”到另一个命令。

例如，

```
 ls | wc -l 
```

获取`ls`命令的输出并将其提供给`wc -l`计算行数的命令。在不同阶段连续输出多个管道是很常见的。

这是一个讨论[管道](http://www.december.com/unix/tutor/pipesfilters.html)的页面。

用于将`'&'`命令置于后台以便它可以运行，同时您返回到命令提示符并可以继续发出其他命令。

此[页面](http://www.dreamincode.net/forums/topic/34623-unixlinux-background-processing/)有一个简短的管道示例和将某些东西放在背景中的符号。本页讨论[管理后台命令](http://www.thegeekstuff.com/2010/05/unix-background-job/)。最后，在`sh`/下（可能还有/`bash`以外的 shell ）可用于[重定向 stdout 和 stderr](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html)，因为@cdarke 在下面的有用评论中提醒我们。`csh``tcsh``'&'`

任何体面的 Linux/Unix 教程都会为您提供有关这两者的更多信息。

我还没有看到`,`与命令一起使用，虽然`;`可以用来对[几个命令进行分组](http://www.december.com/unix/demo/group.html)。

`&&`另请参阅下面的@Bruno 评论，了解有关在 bash 中使用链接命令的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T03:43:12.703

```
& 
```

将任务置于后台。

```
| 
```

将前一个命令的标准输出推送到下一个命令的标准输入。

```
, 
```

我以前从未见过。你在哪里看到的？

# scala - clojure在scala中迭代等效？

> ID：12084424
> 
> 赞同：5
> 
> 时间：2012-08-23T03:41:03.293
> 
> 标签：scala, clojure

递归很酷，但是当您被高阶库函数包围时，它有点低级。我试图避免为依赖于生成的最后一个值的进程编写递归函数。

我通常会[`iterate`](https://clojuredocs.org/clojure.core/iterate)在 Clojure 中使用函数，而不是最后一个值和当前参数的“压缩”列表。Scala 的集合 API 中是否有等效功能？

这是一些疯狂的伪代码中的抽象示例的尝试：

说你有

*   输入列表：`Seq(1,2,3)`
*   您对生成的最后一个值和列表中的下一项执行的一些操作：

    `lastValue ^ 2 + nextInt(i)`

并且您想要累积所有生成的值。

我试图避免写类似的东西：

```
def f(ls:Seq[Int]):Seq[Float] = {

  def g(pos:Int, lastGen:Float):Seq[Float] = { 
    val v = gen(lastGen, ls(pos))
    if( end(v) )
      Seq(v)
    else
      Seq(v) ++ g(pos+1, v)
  }

  f(0, 1)
} 
```

我在 Haskell 中定义了 Fibonacci 的惰性流版本时看到了类似的东西，所以假设我可以使用引用自身的惰性流，但这比 Clojure 的迭代更难让我的大脑环绕。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T03:54:05.267

这是你要找的吗？[`iterate`](http://clojuredocs.org/clojure_core/clojure.core/iterate)它与Clojure 中的基本相同：

```
List.iterate(1, 5) { _ + 1 }
// res1: List[Int] = List(1, 2, 3, 4, 5) 
```

我认为`iterate`for的定义`List`来自[`GenTraversableFactory`](http://www.scala-lang.org/api/current/scala/collection/generic/GenTraversableFactory.html#iterate%5BA%5D%28A,Int%29%28%28A%29%20%E2%87%92%20A%29%3aCC%5BA%5D).

唯一的缺点是第二个参数是您想要的参数数量，因此它不会像Clojure`len`中那样返回无限序列。`iterate`

***更新：***

刚学到新东西！该[`Stream`](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Stream%24)对象也有一个`iterate`方法，这使您可以创建无限的惰性流：

```
(Stream.iterate(1) { _ * 2 } take 5).toList
// res1: List[Int] = List(1, 2, 4, 8, 16) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T04:04:18.153

您显示的代码基本上相当于：

```
ls.foldLeft(List(1.0))((a, b) => gen(a.head, b) :: a).reverse 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:16:07.587

听起来你想要的高阶函数是[`scanLeft`](http://en.wikipedia.org/wiki/Prefix_sum)，它就像一个记住其中间步骤的折叠。例如，假设您有以下内容：

```
val ls = Seq(1, 2, 3)
def gen(lastValue: Double, n: Int) = math.pow(lastValue, 2) + n 
```

然后你可以像这样将它们与`scanLeft`：

```
scala> ls.scanLeft(1.0)(gen)
res0: Seq[Double] = List(1.0, 2.0, 6.0, 39.0) 
```

这或多或少等同于 Apocalisp 的公式 with `foldLeft`，只是它`scanLeft`会为您保留中间值。

# ruby-on-rails - Rails：渲染方法中的位置选项是什么

> ID：12084431
> 
> 赞同：17
> 
> 时间：2012-08-23T03:41:45.607
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

嘿，我想知道 rails 中渲染方法的位置选项是什么。此处的文档[http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)指出：

“您可以使用 :location 选项设置 HTTP Location 标头：”

但我不知道你为什么要这样做，或者你会用它做什么。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-23T04:15:21.307

实际上`location`，选项用于重定向到新资源，作为处理请求的一部分。例如，

```
 render :xml => post.to_xml, :status => :created, :location => post_url(post) 
```

正在告诉收件人为该帖子创建了一个 XML 文件，您将从`post_url(post)`. 因此去那里；）

`render`方法通过`Location`在响应对象中设置选项来做到这一点

```
... ... ... 
if location = options[:location]
    response.headers["Location"] = url_for(location)
end
... ... ... 
```

`Location`您可以在此处 找到有关标头的详细信息[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T03:56:34.500

`Location header`用于重定向页面。

# java - 我们如何绕过 System.exit 在 Java 中执行，以便执行更多的代码行？编程拼图

> ID：12084432
> 
> 赞同：2
> 
> 时间：2012-08-23T03:41:52.487
> 
> 标签：java

任何人都可以帮助我获得以下给定程序的预期输出。我尝试使用 SecurityManager，但在显示我的输出后它会抛出 SecurityException。有没有其他方法可以处理？

**以应该打印的方式重写以下程序**

```
Hi
Good Bye 
```

**注意：您不能更改主要方法**

```
Class Program{
    public static void main(String args[]){
        try{
            System.out.println("Hi");
            System.exit(0);
        }
        finally{
            System.out.println("Good Bye");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T03:46:37.753

看看[_`Runtime.addShutdownHook(Thread hook)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)

它是如何完成的示例...

```
public void attachShutDownHook(){
  Runtime.getRuntime().addShutdownHook(new Thread() {
   @Override
   public void run() {
    ...
   }
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T03:57:43.210

我认为 SecurityManager 方法是正确的……如果我们将其视为一个难题。如果你正确地实现它，你应该得到“Hi”和“Goodbye”消息。

您*可以*通过安装自己的默认未捕获异常处理程序来摆脱堆栈跟踪。或者，您可以编写一个替代入口点类，该类调用该`Program.main()`方法并捕获当您的自定义安全管理器拒绝调用时引发的安全异常`System.exit()`。

* * *

（当然，真正的解决方案是更改代码，使其`System.exit()`不被调用......这样就没有必要绕过调用。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T05:18:41.550

理论上， System.exit 是 JVM 停止的信号，并且不能再执行任何行。在处理完成后，JVM 没有机会执行任何操作。但是如果你想做一些优雅的关闭活动，你可以添加关闭钩子。但是你不应该误解这是在 System.exit 执行之后运行的。运行关闭挂钩和运行终结器（以回收内存）都是由 System.exit 调用导致的 JVM 关闭的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:10:35.793

您的任务是按字面意思写成这样：“重写下面的程序，使其应该打印/注意：您不能更改主要方法”？

Theeen：[邪恶的笑容]

```
public class Program {
    public static void main(String args[]){
        System.out.println(“Hi”);
        System.out.println(“Good Bye”);
    }
}

class Program2 {
    public static void main(String args[]){
        try{
            System.out.println(“Hi”);
            System.exit(0);
        }
        finally{
            System.out.println(“Good Bye”);
        }
    }
} 
```

只是因为没有人说我不能更改班级名称:)

或者，如果类名必须保持不变，请交换类名并从命令行运行 Program2.main，因为没有人说你不能更改入口点:))

另一个邪恶的样本，这次更有用：

**没有人说你不能篡改其他类名和包**：

```
// import NOTHING

package blargh; // note this!

class System {
    public static java.io.PrintStream out = java.lang.System.out;

    public static void exit(int ignored) { }
}

class Program {
    public static void main(String args[]){
        try{
            System.out.println(“Hi”);
            System.exit(0);
        }
        finally{
            System.out.println(“Good Bye”);
        }
    }
} 
```

ETC..

# android - 我的应用程序总是打印如下信息，这是什么原因以及如何解决？

> ID：12084435
> 
> 赞同：0
> 
> 时间：2012-08-23T03:42:17.993
> 
> 标签：android, eclipse

08-23 11:38:27.070: D/dalvikvm(6930): GC_FOR_MALLOC 释放 636K，47% 释放 3323K/6211K，外部 618K/904K，暂停 66ms

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:13:23.357

它打印在日志中，它只是说明 **GC(Garbage Collector)_FOR_MALLOC**所做的事情：这通常意味着您的应用程序必须分配更多内存，因为首先调用 GC_CONCURRENT 来清除堆，如果它需要更多内存，则调用它。

**636k**的内存是释放的内存量。

**47% 空闲 3323K/6211K** 堆大小为 6211k，现在 47% 空闲，当前占用堆为 3323K

**外部 618K/904K** 外部分配内存 第一个数字是分配的内存量，第二个是软限制。

**paused 66ms**的收集暂停时间，更大的堆更多时间。

来源：[http ://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T03:57:05.173

此消息不是来自您的应用程序，而是来自 Dalvik 垃圾收集器。

# php - php 打印函数返回的字符串

> ID：12084441
> 
> 赞同：0
> 
> 时间：2012-08-23T03:43:26.170
> 
> 标签：php, function, return

我有一组 php 函数，旨在在失败时返回错误文本。他们没有返回文本。我的功能如下所示：

```
function poop(){
    $stuff = stuff;
    $things = things;
    if($stuff != stuff){
        return 'e: stuff does not equal stuff!';
    }
    if($things != things){
        return 'e: things do not equal things!';
    }
    // if we got this far all is good!
    return true;

} 
```

我在代码中调用我的函数，如下所示：

```
if(poop() === true){
    // do things that require poop
} else {
    echo poop();
} 
```

我认为这会将'e：'字符串作为字符串返回，并在 poop() 未返回布尔真值的情况下将其打印到页面，但实际上并非如此。我想知道这是否是因为我的代码的其余部分有错误，或者这个功能实际上在 PHP 中不存在？我应该如何确保我的所有功能检查都返回错误？我应该使用 echo 而不是 return 将其作为字符串打印在页面上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T03:48:37.953

不要多次调用您的函数。将其返回值保存在变量中：

```
$ret = poop();
if ($ret === true) {
    // Do things that require the success.
} else {
    // Log your error message here:
    echo "An error occurred: ".$ret;
    logMessage($ret);
    // etc.
} 
```

您可能还想研究[PHP 异常](http://php.net/manual/en/language.exceptions.php)，以寻找一种可能更干净（但可能更慢）的错误处理解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T03:57:42.960

试试这个：

```
if( poop() !== TRUE )
    echo poop(); 
```

我在这段代码上使用了它：

```
function poop(){ 
    $stuff = 'stuff'; 
    $things = 'things'; 
    // this is where we have wrong value
    if($stuff != 'stuff1'){ 
        return 'e: stuff does not equal stuff!'; 
    } 
    if($things != 'things'){ 
       return 'e: things do not equal things!'; 
    } 
    // if we got this far all is good! 
    return true; 

} 
```

我希望我能理解你，我也是 PHP 的新手。:) 抛出异常而不是返回错误消息字符串也是一种好习惯。

# python - python：事后更改属性获取器

> ID：12084445
> 
> 赞同：0
> 
> 时间：2012-08-23T03:43:53.870
> 
> 标签：python, performance, properties

是否可以在创建 python 属性后更改它的 getter？

```
class A:
    _lookup_str = 'hi'
    @property
    def thing():
        value = some_dictionary[_lookup_str]
        # overwrite self.thing so that it is just value, not a special getter
        return value 
```

这个想法是，一旦我查过一次，我就不必再查了（字典永远不会改变）。我可以：

```
class A:
     _lookup_str = 'hi'
     _thing = None
     @property
     def thing():
         if not value:
             value = some_dictionary[_lookup_str]
         return value 
```

但即使在那里，我也在测试一个条件——这比我完全移除 getter 并用一个值替换它要多。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T03:58:05.673

Werkzeug 有一个[`cached_property`装饰器](http://werkzeug.pocoo.org/docs/utils/#werkzeug.utils.cached_property)，可以完全满足您的需求。它只是将`__dict__`第一次函数调用后的函数条目替换为第一次调用的输出。

这是代码（来自[github 上的 werkzeug.utils](https://github.com/mitsuhiko/werkzeug/blob/master/werkzeug/utils.py)并稍微编辑了长度）：

```
_missing = object()

class cached_property(object):
    """A decorator that converts a function into a lazy property.  The
    function wrapped is called the first time to retrieve the result
    and then that calculated result is used the next time you access
    the value::

        class Foo(object):

            @cached_property
            def foo(self):
                # calculate something important here
                return 42

    The class has to have a `__dict__` in order for this property to
    work.
    """

    # implementation detail: this property is implemented as non-data
    # descriptor.  non-data descriptors are only invoked if there is
    # no entry with the same name in the instance's __dict__.
    # this allows us to completely get rid of the access function call
    # overhead.  If one choses to invoke __get__ by hand the property
    # will still work as expected because the lookup logic is replicated
    # in __get__ for manual invocation.

    def __init__(self, func, name=None, doc=None):
        self.__name__ = name or func.__name__
        self.__module__ = func.__module__
        self.__doc__ = doc or func.__doc__
        self.func = func

    def __get__(self, obj, type=None):
        if obj is None:
            return self
        value = obj.__dict__.get(self.__name__, _missing)
        if value is _missing:
            value = self.func(obj)
            obj.__dict__[self.__name__] = value
        return value 
```

（顺便说一句 - 发布代码或链接到这样的代码更好吗？）

如果您想了解更多关于它为什么起作用的信息，请查看[描述符上的 Python 文档](http://docs.python.org/howto/descriptor.html)。`@property`上面的代码创建了一个允许覆盖它的非数据描述符（与 不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:10:23.240

不推荐，但它适用于旧式类：

```
>>> class A:
...   @property
...   def thing(self):
...       print 'thing'
...       self.thing = 42
...       return self.thing
... 
>>> a = A()
>>> a.thing
thing
42
>>> a.thing
42
>>> a.thing
42 
```

它不适用于新式类（类型、对象的子类），因此它不适用于所有类都是新式的 Python 3。在这种情况下使用[@Jeff Tratner 的答案。](https://stackoverflow.com/a/12084534/4279)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T04:59:20.680

正如 Jeff Tratner 所指出的，答案是覆盖在`__dict__`python 对象中找到的属性对象。Werkzeug 的 cached_property 对我来说似乎过于复杂。以下（更简单的）代码对我有用：

```
def cached_property(f):
    @property
    def g(self, *args, **kwargs):
        print 'trace'
        value = f(self, *args, **kwargs)
        self.__dict__[f.__name__] = value
        return value
    return g

class A:
    @cached_property
    def thing(self):
        return 5

a = A()
print a.thing
print a.thing
print a.thing
print a.thing

# 'trace' is only shown once -- the first time a.thing is accessed. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T06:59:26.613

JF Sebastian 和 Isaac Sutherland 的答案不适用于新样式类。它将产生 Jeff Tratner 提到的结果；在每次访问时打印出跟踪。

对于新样式类，您需要覆盖`__getattribute__`

简单修复：

```
def cached_property(f):
    @property
    def g(self, *args, **kwargs):
        print 'trace'
        value = f(self, *args, **kwargs)
        self.__dict__[f.__name__] = value

        return value
    return g

def cached_class(c):
    def d(self, name):
        getattr = object.__getattribute__
        if (name in getattr(self, '__dict__')):
            return getattr(self, '__dict__')[name]
        return getattr(self, name)

    c.__getattribute__ = d
    return c

@cached_class
class A(object):
    @cached_property
    def thing(self):
        return 5

a = A()
print a.thing
print a.thing
print a.thing
print a.thing 
```

# r - 努力将 1 分钟收盘价数据转换为 R 中的 5 分钟

> ID：12084446
> 
> 赞同：2
> 
> 时间：2012-08-23T03:44:26.290
> 
> 标签：r, xts, trading

最近问了这个问题，并被建议使用' **to.minutes5()** '函数。但是，这样做时，我收到以下错误：

```
Error in to.period(x, "minutes", k = 5, name = name, ...) : 
unsupported type 
```

我的原始文本文件具有分隔列的日期和时间：

```
GBPUSD<- read.table("GBPUSD.txt", sep=',')

head(GBPUSD)

  V1           V2     V3     V4     V5     V6      V7    V8               
1 <TICKER> <DTYYYYMMDD> <TIME> <OPEN> <HIGH>  <LOW> <CLOSE> <VOL> 
2   GBPUSD     20010102 230100 1.5021 1.5021 1.5018  1.5018     4   
3   GBPUSD     20010102 230200 1.5019 1.5019 1.5019  1.5019     4     
4   GBPUSD     20010102 230300 1.5018 1.5019 1.5018  1.5019     4     
5   GBPUSD     20010102 230400 1.5019 1.5019 1.5019  1.5019     4     
6   GBPUSD     20010102 230500 1.5017 1.5018 1.5017  1.5018     4 
```

所以我采取的第一步是使用新的“时间”列中的 paste() 函数将它们混合到一个列中：

```
GBPUSD$Time <-paste(GBPUSD[,2],GBPUSD[,3],sep=",") 
```

之后，我使用新合并的“时间”（第 9 列）创建了一个 POSIXct 时间戳：

```
time<- as.POSIXct(GBPUSD[,9], format="%Y%m%d,%H%M%S") 
```

然后我开始使用收盘价和时间创建一个 xts 时间序列：

```
gbp<- xts(GBPUSD[7], time) 
```

但是，当我调用 to.minutes5(gbp) 时，出现错误。

如何在不运行循环的情况下将文本文件中的一分钟收盘价转换为 5 分钟价格？

此外，我将如何将 1 分钟 OHLC 转换为 5 分钟 OHLC？

**更新：**

当我尝试 khoxsey 提出的建议时，以下行出现错误：

```
raw_cable <- read.table(header=FALSE, text=data, col.names=cn, colClasses=cl)
"Error in textConnection(text) : invalid 'text' argument" 
```

我想这是因为我首先导入了一个表格数据框并删除了第一行：

```
data<- read.table("GBPUSD.txt", sep=',')
data <- data[-1,] #deleted the initial header to add at a later step, as suggested 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:26:22.733

你并没有完全提供你所有的代码，所以很难准确地说出你哪里出错了，但你已经很接近了。我复制了您的一些数据以获得更多观察结果，并使用您的格式来获取时间字符串。（顺便说一句，`time`是一个函数，`R`因此您可以将变量称为其他名称）。

第一段代码是可选的，只是一些设置来获取包含代表性数据的数据框，并调用您的设置`as.POSIXct`来创建我们的索引：

```
forex_data <- "GBPUSD 20010102 230000 1.5021 1.5021 1.5018 1.5018 4
GBPUSD 20010102 230100 1.5021 1.5021 1.5018 1.5018 4
GBPUSD 20010102 230200 1.5019 1.5019 1.5019 1.5019 4
GBPUSD 20010102 230300 1.5018 1.5019 1.5018 1.5019 4
GBPUSD 20010102 230400 1.5019 1.5019 1.5019 1.5019 4
GBPUSD 20010102 230500 1.5017 1.5018 1.5017 1.5018 4
GBPUSD 20010102 230600 1.5019 1.5019 1.5019 1.5019 4
GBPUSD 20010102 230700 1.5018 1.5019 1.5018 1.5019 4
GBPUSD 20010102 230800 1.5019 1.5019 1.5019 1.5019 4
GBPUSD 20010102 230900 1.5017 1.5018 1.5017 1.5018 4
GBPUSD 20010102 231000 1.5017 1.5018 1.5017 1.5018 4"

cn <- c('TICKER','DTYYYYMMDD','TIME','OPEN','HIGH','LOW','CLOSE','Volume')
cl <- c(rep('character', 3), rep('numeric', 5))
raw_cable <- read.table(header=FALSE, text=forex_data, col.names=cn, colClasses=cl)

dt_tm <-as.POSIXct(paste(raw_cable[,2], raw_cable[,3],sep=","), format="%Y%m%d,%H%M%S") 
```

现在我们有了一个包含数据的 data.frame 和一个适当的索引向量，我们`xts`只使用价格和交易量数据创建一个对象。在这里，这意味着最后 5 列。

```
require(xts)  
cable <- xts(raw_cable[,4:8], order.by=dt_tm) 
```

最后，对于一个结构良好的`xts`对象，很容易滚动到 5 分钟的周期。`to.period`有关许多其他可能性，请参阅文档。这里要注意的一个关键点是设置`indexAt`参数，它允许我们选择使用哪个结束分钟。为了好玩，请尝试文档中的其他可能性。

```
to.minutes5(cable, indexAt='startof', name=NULL)

                      Open   High    Low  Close Volume
2001-01-02 23:00:00 1.5021 1.5021 1.5018 1.5019     20
2001-01-02 23:05:00 1.5017 1.5019 1.5017 1.5018     20
2001-01-02 23:10:00 1.5017 1.5018 1.5017 1.5018      4 
```

# delphi - Delphi 使用 TFilestream 写入网络共享会在网络丢失时锁定文件

> ID：12084453
> 
> 赞同：5
> 
> 时间：2012-08-23T03:45:25.370
> 
> 标签：delphi, logging, filestream, file-locking

我正在尝试使用 TFilestream 写入网络共享（本地）。如果网络连接不中断，一切正常。

但是，如果我拉网线然后重新连接它，由于访问限制，后续打开文件流的尝试会失败。我什至无法删除资源管理器中的文件！似乎 TFilestream 锁定了文件，解决此问题的唯一方法是重新启动。

在我的应用程序中，我在写入文件的整个过程中保持文件打开（它是每秒写入一次的日志文件）。

我失败的代码如下：

```
procedure TFileLogger.SetLogFilename(const Value: String);
var line : String;
Created : Boolean;
begin
  if not DirectoryExists(ExtractFilePath(Value)) then //create the dir if it doesnt exist
  begin
       try
         ForceDirectories(ExtractFilePath(Value));
       except
         ErrorMessage(Value); //dont have access to the dir so flag an error
         Exit;
       end;
  end;
  if Value <> FLogFilename then //Either create or open existing
  begin
      Created := False;          
      if Assigned(FStream) then
         FreeandNil(FStream);
      if not FileExists(Value) then   //create the file and write header
      begin
           //now create a new file
           try
              FStream := TFileStream.Create(Value,fmCreate);
              Created := True;
           finally
             FreeAndNil(FStream);
           end;
           if not Created then //an issue with creating the file
           begin
                ErrorMessage(Value);
                Exit;
           end;
           FLogFilename := Value;
           //now open file for writing
           FStream := TFileStream.Create(FLogFilename,fmOpenWrite or fmShareDenyWrite);
           try
              line := FHeader + #13#10;
              FStream.Seek(0,soFromEnd);
              FStream.Write(Line[1], length(Line));
              FSuppress := False;
           except
              ErrorMessage(Value);  
           end;
      end else begin //just open it
           FLogFilename := Value;
           //now open file for writing
           FStream := TFileStream.Create(FLogFilename,fmOpenWrite or fmShareDenyWrite); //This line fails if the network is lost and then reconnected
      end;
  end;
end; 
```

如果有人有任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T04:52:18.450

尝试使用[Network Share API](http://msdn.microsoft.com/en-us/library/bb525393%28v=vs.85%29)关闭文件，即`NetFileEnum`和`NetFileClose`函数。另请参阅[相关问题](https://stackoverflow.com/questions/11781812/netfileclose-closes-file-but-file-seems-still-locked)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:23:37.817

我做类似的事情，但不要使用`TFileStream`. 我使用来自`SysUtils`. 这基本上是我所做的，适合您的情况：

```
// variables used in pseudo-code below
var
  fHandle, bytesWriten: Integer;
  Value: string; 
```

*   使用 . 打开输出文件`fHandle := FileOpen('filename', fmOpenReadWrite or ...)`。
*   验证 is `fHandle > -1`，如果不是，则 sleep 并循环。
*   写输出`bytesWritten := FileWrite(fHandle, Value, Length(Value));`。
*   检查`bytesWritten`，他们应该`= Length(Value)`。
*   如果`bytesWritten`是`0`，您就知道文件句柄丢失了。我`try ... finally`在所有代码周围放置了一个块并执行`if fHandle > -1 then try FileClose(fHandle); except end;`，以便它强制系统释放文件句柄，即使该文件不再可访问。
*   如果`bytesWritten`是`0`，则睡眠几秒钟，然后重试。

在添加代码之前，我似乎遇到了与您描述的类似的问题：

```
if fHandle > -1 then
  try
    FileClose(fHandle);
  except
  end; 
```

我使用这种方法将千兆字节文件复制到远程（慢速）网络共享，并且网络共享在复制过程中丢失了几次。一旦网络共享再次可用，我就可以恢复复制。你应该能够对你的日志文件做类似的事情......

# ruby-on-rails - 如何验证组（集合）的元素是否在 Rails 中每个父对象都是唯一的？

> ID：12084456
> 
> 赞同：1
> 
> 时间：2012-08-23T03:46:02.483
> 
> 标签：ruby-on-rails, validation, validates-uniqueness-of

我的应用程序要求`Courses`with `Projects`with我需要确保每次不会出现超过一次，我认为我可以通过 Rails 验证来做到这一点，但我所拥有的似乎并不想工作。谁能帮我解决这个问题？`Groups``Users.``users``project`

以下给了我：

> **NoMethodError in Admin::GroupsController#create**
> undefined method `text?' 对于零：NilClass

```
class Group < ActiveRecord::Base
  attr_accessible :name, :project_id
  #has_and_belongs_to_many fields
  attr_accessible :user_ids

  has_and_belongs_to_many :users
  belongs_to :project, :inverse_of => :groups

  validates :name, :project_id, :presence => true
  validates :user_ids, :uniqueness => { :scope => :project_id,
                                        :message => "Users can only be in one group per project." }
end 
```

ActiveAdmin 组对象：

```
ActiveAdmin.register Group do

  form do |f|
    f.inputs do
      f.input :name
      f.input :users, :as => :check_boxes
      f.input :project
    end
    f.buttons
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T01:58:39.987

我会尝试

```
Course
  has_many :projects

Project
  has_many :groups
  has_many :users, :through => groups
  validates uniqueness_of :user

User
  has_many groups 
  has_many projects, :through => :groups

Group
  belongs_to :project
  belongs_to :group

# I stay away from has_and_belongs_to_many, not flexible later. 
```

# asp.net - 单点登录 (SSO) 方案 - 请提供指导

> ID：12084459
> 
> 赞同：0
> 
> 时间：2012-08-23T03:46:47.483
> 
> 标签：asp.net, single-sign-on, wif, saml

我有一个用于多个网站/门户网站的集中式凭据存储。

每个网站都有自己独特的域和特定于一个客户的品牌。

我想在每个门户上显示一个登录表单，并根据集中式凭据存储验证这些凭据。此外，我想强制执行各种密码策略。例如，用户的密码可能会在一定天数后过期。或者可能需要 8 个字符，1 个字母 + 1 个数字 + 1 个特殊字符。

对于大部分密码维护，我可以将用户重定向到集中式网站，但是我真的希望允许用户在其门户的自定义域上输入用户名/密码。

我对 SAML 很熟悉，它似乎*几乎*可以让我到达那里。但是，它似乎不支持在服务提供者上收集凭据。

我宁愿不提出 Ad-Hoc 解决方案，而宁愿使用像 SAML 这样由委员会严格设计的标准化解决方案。

我也愿意考虑基于 WIF 的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T18:54:38.777

我假设您的凭证存储不是 AD？

最好的计划是使用自定义 STS。如果您使用的是 SQL Server，请查看[Identity Server](http://identityserver.codeplex.com/)。这不支持 SAML，但您可以将它联合到支持的 ADFS。

然后，每个应用程序都将使用 WIF。

在您的自定义 STS 上，将所有自助服务密码内容放在您的登录页面上。

所以每个人都会在 STS 上共享同一个登录页面。

如果您想要每个站点上的登录页面，那么您可以使用 WIF 活动配置文件并通过 Web 服务连接到 STS 登录。但是你必须在许多页面上都有自助服务的东西，这会使维护复杂化。

# java - JBoss Developer Studio 第三方插件

> ID：12084464
> 
> 赞同：0
> 
> 时间：2012-08-23T03:47:37.367
> 
> 标签：java, eclipse, jboss, aptana

我目前正在研究开发 IDE，我正在考虑的一个是 JBoss Developer Studio。由于系统是基于Eclipse的，我想知道是否可以安装第三方插件？

特别是，我对能够安装诸如 Aptana 之类的插件很感兴趣，这样我就可以获得 Ruby on Rails 支持。

有谁知道第三方 Eclipse 插件是否可以安装到 JBoss Developer Studio 以及这样做是否有任何复杂性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:07:01.790

您安装了 JBoss Developer Studio，现在您想安装更多插件，然后您可以使用帮助 > 安装新软件。它可能就是您要找的。

# python - python中的string.find()不能处理特殊字符

> ID：12084465
> 
> 赞同：-3
> 
> 时间：2012-08-23T03:47:44.667
> 
> 标签：python, lxml

**我认为错误出在读取功能中。它无法读取超出图像中的特殊字符的内容**请参阅 repr 输出

我在 python 中使用 string.find() 如下：

```
indexOfClosedDoc = temp.find("</DOC>",indexOfOpenDoc) 
```

但是，当字符串具有如下文本时：

```
SUB
</DOC> 
```

其中 SUB 是一个特殊字符， temp.find 找不到标签。对于如何解决这个问题，有任何的建议吗

例子：

![在此处输入图像描述](../Images/f25081612082a2f4560ce5815c8f08bf.png)

导致它失败的代码：

```
handle = open("error.txt",'r');
temp = handle.read();
index = temp.find("</DOC>",0)
if(index == -1):
    print "Error"
    exit(1) 
```

将图像文本放入文本文件并运行代码

这是示例中文本的 temp 变量的 repr。eror.txt 中的文本是图像中第 2972​​2 行的所有内容

```
' </P>\n\n' 
```

**注意**： read() 函数永远不会读取超出 SUB 所以查找是不可能的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:34:52.783

答案是使用“rb”模式打开文件。在 Windows 上，仅使用 'r' 打开文件将导致它使用在 0x1A（DOS EOF 字符）处停止的旧 DOS 行为。另请参阅[0x1A 上的线路读取扼流圈](https://stackoverflow.com/questions/405058/line-reading-chokes-on-0x1a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:41:18.620

注意：如果文件使用多字节编码，那么`.find()`即使其中没​​有，也不会工作`0x1A`，例如：

```
import codecs

with codecs.open('file.utf16', 'w', encoding='utf-16') as file:
    file.write(u"abcd") # write a string using utf-16 encoding

#XXX incorrect code don't use it
with open('file.utf16', 'r') as f:
    temp = f.read()
    i = temp.find('bc')
    print i #XXX -> -1 not found

with open('file.utf16', 'rb') as f:
    temp = f.read()
    i = temp.find('bc')
    print i #XXX -> -1 not found

# works
with codecs.open('file.utf16', encoding='utf-16') as f:
    temp = f.read()
    i = temp.find('bc')
    print i # -> 1 found 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-23T04:19:32.410

检查您的`indexOfOpenDoc` 值，我怀疑它大于显示的位置。

# android - Android：如何实现facebook应用程序在手势滑动时离开菜单的方式

> ID：12084467
> 
> 赞同：0
> 
> 时间：2012-08-23T03:48:05.160
> 
> 标签：android, facebook, menu, youtube

我看到 Android 上的 facebook 和 youtube 应用程序在滑动时会显示左侧菜单。

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T09:31:46.283

使用 feinstein 幻灯片菜单是一个非常好的选择。[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

# sql - 找不到“SqlBulkCopy”

> ID：12084472
> 
> 赞同：2
> 
> 时间：2012-08-23T03:48:56.940
> 
> 标签：sql, stored-procedures, sql-server-2008-r2

当我尝试在新服务器中创建以下存储过程时，出现错误

> 消息 6528，级别 16，状态 1，过程 usp_BulkCopy，第 3 行程序
> 集“SqlBulkCopy”未在数据库“主”的 SQL 目录中找到。

代码：

```
USE [master]
GO

/****** Object:  StoredProcedure [dbo].[usp_BulkCopy]    Script Date: 08/22/2012 23:32:59 ******/
CREATE PROCEDURE [dbo].[usp_BulkCopy]
    @sourceServer [nvarchar](255),
    @sourceDatabase [nvarchar](255),
    @sourceSelectQuery [nvarchar](4000),
    @destinationServer [nvarchar](255),
    @destinationDatabase [nvarchar](255),
    @destinationTable [nvarchar](255),
    @FlagKeepIdentity [bit],
    @throwExceptionOnErrors [bit],
    @SourceTrusted [bit],
    @DestTrusted [bit],
    @SourceUser [nvarchar](255),
    @SourcePass [nvarchar](255),
    @DestUser [nvarchar](255),
    @DestPass [nvarchar](255)
WITH EXECUTE AS CALLER
AS
EXTERNAL NAME [SqlBulkCopy].[StoredProcedures].[usp_BulkCopy]
GO 
```

我该如何克服呢？我不确定程序集是什么以及它是否确实是一个真正的问题。

谢谢你的时间..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T15:16:32.287

谢谢 Marc S。这是集会。

希望它可以帮助别人。这是我所做的详细信息。

我从另一个数据库服务器中找到了该程序集，并在此服务器上运行它，如下所示：

```
CREATE ASSEMBLY [SqlBulkCopy]
AUTHORIZATION [dbo]
FROM 
[CODE in Hexadecimals-this would be unique I think] 
```

然后我不得不这样做：

```
ALTER DATABASE [master] SET TRUSTWORTHY ON 
```

然后这个：

```
sp_configure 'clr enabled',1
GO
RECONFIGURE
GO
sp_configure 'clr enabled'  -- make sure it took
GO 
```

就这些。它工作正常：

要确保安装了程序集，您可以运行以下命令：

```
SELECT * FROM sys.assemblies 
```

# php - 使用 ffmpeg 从具有 ken burns 效果的图像生成视频

> ID：12084473
> 
> 赞同：4
> 
> 时间：2012-08-23T03:48:58.060
> 
> 标签：php, ffmpeg, zooming

我正在尝试从图像生成视频。

以下代码生成视频，每 3 秒 1 帧。

```
 exec("ffmpeg -f image2 -r 1/3 -loop_input -shortest -y  -i tmp/image%3d.jpg -i tmp/ag1.mp3 -target ntsc-dvd -s 1280x720 tmp/video.mwv"); 
```

我想对其应用 ken burns 效果，我已经搜索了很多但找不到任何解决方案。

有人可以帮帮我吗？如果可以提供任何代码片段，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T04:33:52.757

我不认为这可以单独使用 ffmpeg 完成。我过去曾使用名为[diascope](http://diascope.sourceforge.net)的工具完成此操作。我从来没有听到太多关于它的消息，但它会产生一些我见过的最好的图片幻灯片，因为你可以使用 Ken Burns 之类的效果。它在最后一步使用 ffmpeg 对视频进行实际编码。

看一下例子，应该很简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-12T02:54:51.700

FFMPEG 有[https://ffmpeg.org/ffmpeg-filters.html#zoompan](https://ffmpeg.org/ffmpeg-filters.html#zoompan)

目前，它确实存在一些抖动视频运动的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-01T16:09:09.137

它可以通过 Imagemagick 和 ffmpeg 的组合来完成。使用图像魔术制作一系列裁剪图像，并使用 ffmpeg 将一系列图像变成电影。使用 ImageMagick 裁剪图像应沿一个或多个矢量完成，以创建创建运动的“帧”。当然，所有图像都必须具有相同的外部尺寸（使用 ImageMagick 很容易做到），但是您可以使用 ImageMagick 中的裁剪和缩放工具创建各种逐帧运动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-01T10:31:00.820

Ken-Burns 可以与[Mencoder](http://en.wikipedia.org/wiki/MEncoder)一起应用。请参阅[使用 MEncoder 进行编码](http://www.mplayerhq.hu/DOCS/HTML/en/encoding-guide.html)。[PhotoFilmstrip](http://www.photofilmstrip.org/)程序就像 Mencoder 的 GUI 。它是基于 Python 的，因此可用于 Windows（甚至作为便携式版本）和 Linux。对于 Linux，还有[image2mpeg](http://www.gromeck.de/?image2mpeg)，但我还没有尝试过。

在 Windows 下，免费的 Microsoft MovieMaker 也可以应用 Ken-Burns。虽然它只创建 WMV 文件 MovieMakers GUI 恕我直言比 PhotoFilmStrips 好得多。然而，灵丹妙药是在批处理或 shell 脚本中应用 MEncoder。作为开始搜索“mencoder 语法”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-14T16:51:14.087

使用 ImageMagick（版本 6.x）试试这个脚本

```
#!/bin/bash
for (( resizepercent=100; resizepercent<=200; resizepercent+=10 ))
do
    convert bird.jpg -resize $resizepercent% -gravity Center -crop 1800x1900+0+0 bird$resizepercent.png
done 
```

您必须将“1800x1900”替换为您的目标输出尺寸，并且可能将“+0+0”替换为您想要缩放到的其他偏移量。

也许有些读者知道这个脚本是否可以提高性能！？我实现它的方式 Imagemagick 必须在每个循环中读取输入文件“bird.jpg”。也许有一种方法可以告诉 Imagemagick 只读取输入文件一次并对其进行多次缩放？

# cassandra - Hector-getting 列作为 ColumnFamilyResult 的列表

> ID：12084476
> 
> 赞同：1
> 
> 时间：2012-08-23T03:49:25.193
> 
> 标签：cassandra, hector

我正在使用我非常喜欢的模板，但没有看到从结果中获取列表的直接方法，所以写了这样的东西。它有效，但可能效率不高。使用我发现的方法，我必须获取列名，然后使用它来提取值。

有没有更好的办法？谢谢

```
HSlicePredicate<String> slice=new HSlicePredicate<String>(StringSerializer.get());
            slice.setCount(pagesize+1);
            slice.setStartOn(startUserKey);
            ColumnFamilyResult<UUID, String> res = blogFollowingUsersTemplate.queryColumns(blogId,slice);

            BlogFollowingUsers users=new BlogFollowingUsers();
            users.setBlogId(blogId);
            List<UserCompact> list=new ArrayList<UserCompact>();
            for (Iterator iterator = res.getColumnNames().iterator(); iterator.hasNext();) {
                list.add((UserCompact) Json.fromJson(res.getString(iterator.next().toString()),UserCompact.class));
            }
            users.setUsers(list);

            return users; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:07:37.690

也许这更好。在其中一个示例中找到它..

```
SliceQuery<UUID, String, String> query = HFactory.createSliceQuery(daoUtil.getKeyspace(), UUIDSerializer.get(),
                StringSerializer.get(), StringSerializer.get()).
                setKey(blogId).setColumnFamily("BlogFollowingUsers");

        ColumnSliceIterator<UUID, String, String> iterator = 
                new ColumnSliceIterator<UUID, String, String>(query, startUserKey, "", false, pagesize+1);

        BlogFollowingUsers users=new BlogFollowingUsers();
        users.setBlogId(blogId);
        List<UserCompact> list=new ArrayList<UserCompact>();
        while (iterator.hasNext()) {
            list.add((UserCompact) Json.fromJson(iterator.next().getValue(), UserCompact.class));
        }
        users.setUsers(list);
        return users; 
```

# java - Spring security-方法级别的安全性不适用于从另一个方法调用

> ID：12084480
> 
> 赞同：1
> 
> 时间：2012-08-23T03:49:56.633
> 
> 标签：java, spring, spring-mvc, spring-security

假设我有两种方法

```
 @Secured("ROLE_ADMIN")
 @RequestMapping(value = "/methodA", method = RequestMethod.GET)
 public void MethodA(){
 // code
 } 
```

和另一个调用第一个方法的方法

```
@RequestMapping(value = "/MethodB", method = RequestMethod.GET)
public void MethodB(){
MethodA();
//code
} 
```

如果我使用授权登录应用程序`ROLE_USER`并尝试访问 URL `/methodA`，我会收到拒绝访问异常 - 完美！但是，如果我访问 URL `/methodB`，即使我正在使用`ROLE_USER`权限访问 MethodA，我也不会收到拒绝访问异常。它应该像那样工作还是我做错了什么。

PS：这不是一个实时的应用场景，但我只是在玩代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:36:10.690

这是因为 Spring Security 通过代理您的安全类来工作。这意味着它在您现有的类周围放置了一个包装器。如果使用基于接口的代理，这可以是 java.lang.Proxy，也可以是 cglib 增强子类。不过，我不想在这里过分深入。

但最重要的是，当外部调用者调用您的方法之一时，会发生以下情况：

> 调用者--->代理--->安全拦截器--->实现类

安全拦截器检查注释并确定要应用的安全性。然而，一旦你在实际的实现类中，你只是调用方法而不涉及代理和安全拦截器，因此没有安全检查。

As such, you need to protect your each entry point with the @Secured annotation that's appropriate for it, and whatever it calls internally.

# android - 在 Android 中每秒是否有任何意图触发？

> ID：12084483
> 
> 赞同：3
> 
> 时间：2012-08-23T03:50:06.787
> 
> 标签：android, android-intent

我正在寻找每秒广播的一些意图。我调查了一下，`android.intent.action.TIME_TICK`但这个意图每分钟都会被广播。我知道 AlarmManger/handler/thread 可用于此目的，但我倾向于使用系统广播意图。请分享你的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T04:01:22.970

我不这么认为。首先是因为如果系统每秒发送一次广播，它会耗尽电池。其次，如果许多应用程序对处理广播感兴趣，那可能会严重降低系统速度。

## 更新

实际上每分钟触发一次 Intent，但对如何使用它有限制

[http://developer.android.com/reference/android/content/Intent.html#ACTION_TIME_TICK](http://developer.android.com/reference/android/content/Intent.html#ACTION_TIME_TICK)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T03:57:10.787

这是不可能的。没有每秒发送的广播意图。

我在[这里](http://pastebin.com/vpg1AJQe)发布了完整的广播意图列表（它在 中找到`platforms/android-xx/data/broadcast_actions.txt`，并且没有一个涵盖每秒操作。这在[文档](http://developer.android.com/guide/components/intents-filters.html)中得到了进一步证实（在页面上搜索“第二”在这种情况下不会产生任何结果）。

您将不得不选择`AlarmManager`, `Handler`, `Thread`,`Timer`或其他类似的东西。这个主题的一些内容在[这里](https://stackoverflow.com/questions/9406523/android-want-app-to-perform-tasks-every-second)，更多[在这里](https://stackoverflow.com/questions/3822666/how-do-i-make-android-app-which-do-something-every-x-second)，一些关于计时器的东西在[这里](https://stackoverflow.com/questions/5188295/how-to-change-a-textview-every-second-in-android)，等等......

# testing - Go Test 总是通过，为什么？

> ID：12084487
> 
> 赞同：2
> 
> 时间：2012-08-23T03:50:56.033
> 
> 标签：testing, go

我安装了 go 并尝试了[如何编写 go 代码的第一部分](http://golang.org/doc/code.html)

在一段时间没有看到想要的结果之后，我注意到 go test 总是通过，总是！

我错过了什么？

```
$ go version
go version go1
$ mkdir -p src/example/math 

$ cat >src/example/math/sum_test.go <<.
> package math
>
> import "testing"
>
> func SumTest( t *testing.T ) {
>    t.Errorf("ssss %d", 1 )
> }
> .

$ go test example/math
ok      example/math    0.044s 
```

我正在使用 windows x64 并且我正在使用 git-bash 作为 shell

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T04:06:04.710

从[go 命令手册页](http://golang.org/cmd/go/#Description_of_testing_functions)：

测试函数是一个命名的`TestXXX`（其中`XXX`任何字母数字字符串不以小写字母开头）并且应该具有签名，

```
func TestXXX(t *testing.T) { ... } 
```

您的`SumTest()`函数不遵循该模式，很可能会被忽略。
这应该会更好：

```
func TestSum( t *testing.T ) 
```

# php - PHP数组如何获取标头

> ID：12084488
> 
> 赞同：0
> 
> 时间：2012-08-23T03:50:56.500
> 
> 标签：php, arrays

嗨，大家一直在尝试为这个数组找到解决方案，但我不确定这个数组的术语是什么

我有这个

```
$arraylist = 
Array ([0] => Array ([ID] => 123
                       [No] => 5 
                       [CLASS] => B)
       [1] => Array ([ID] => 456
                       [No] => 6 
                       [CLASS] => B)
) 
```

`echo $arraylist[0]['ID']`得到 123 我怎样才能得到 ID 而不是它的值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T03:53:06.060

```
$keys = array_keys($array[0]);
echo $keys[0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T04:01:51.347

您可以通过以下方式遍历数组：

```
//go over array 0 and array 1
foreach($arraylist as $arr){
  //go over ID, NO, CLASS
  foreach($arr as $key => $val){
    //here the first $key = 'ID' and first $val = 123
    // the second pass in the loop will have $key = 'No' and $val = 5
    // and so on.
    // so you can do whatever you want with it here
    //...
  }
} 
```

# wpf - 如何渲染一个中文字符正好 2 个英文字符宽

> ID：12084489
> 
> 赞同：0
> 
> 时间：2012-08-23T03:51:00.920
> 
> 标签：wpf

我想渲染中文字符，**每个中文字符需要 2 个英文字符宽度**。我尝试了 Courier New 和 Segoe UI Mono，有无后备字体 SimSun，但还没有成功。每次应用程序渲染时，每个中文字符的宽度都略小于 2 个英文字符。

这是 XAML。

```
<TextBox Name="OUTPUT_cn_TextBox" FontSize="25" 
         Text="{Binding OutputFileCNContent}"
         AcceptsReturn="True" IsReadOnly="True" 
         HorizontalScrollBarVisibility="Auto"
         VerticalScrollBarVisibility="Auto" 
         FontFamily="Segoe UI Mono, SimSun" 
         FontStretch="ExtraExpanded" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T10:52:23.893

首先，您应该使用等宽字体，然后将 TextFormattingMode 设置为 Display

# java - 在struts2中提交表单的浏览器按钮调用动作

> ID：12084491
> 
> 赞同：0
> 
> 时间：2012-08-23T03:51:33.520
> 
> 标签：java, struts2, action, browser-security

浏览器前进和后退按钮调用在struts2中提交表单的动作

（例如登录表单）。我**只需手动单击表单的提交按钮即可提交**表单。

以下代码可用于通过**键入 url 来阻止调用操作。**

```
String referrer = servletRequest.getHeader("referer"); 
```

但浏览器按钮充当单击提交按钮，因此它们提交表单。

任何帮助提前。谢谢。！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T06:14:44.237

我同意乌梅什所说的。您可以尝试在 http 响应中添加一些标头，这将在您每次单击后退或前进按钮时清除缓存。如果您在拦截器中添加它，这将非常有效。

```
response.setHeader("Cache-Control", "no-cache, no-store"); //HTTP 1.1
response.setHeader("Pragma", "no-cache"); //HTTP 1.0`enter code here`
response.setDateHeader("Expires", 0); //prevents caching at the proxy server 
```

这应该可以解决您的问题。

# c# - 如何使用 C# 使用 XML 填充 TreeView 控件

> ID：12084495
> 
> 赞同：0
> 
> 时间：2012-08-23T03:52:02.943
> 
> 标签：c#, xml

我是 C# 新手，我面临的问题是我有一个 XML 文件，其中包含一个进程信息列表，其中包含进程 ID、进程名称和父 ID 字段。我需要帮助将此 xml 文件填充到树视图中。XML 文件没有被格式化。我的 XML 文件将如下所示：

```
<Process id="0" name="[System Process]" ParentPID="0" />
<Process id="4" name="System" ParentPID="0" />
<Process id="100" name="MyApp.exe" ParentPID="4" />
<Process id="120" name="avgrsx.exe" ParentPID="10"/>
<Process id="150" name="avgcsrvx.exe" ParentPID="120" />
<Process id="155" name="csrss.exe" ParentPID="100" />
<Process id="170" name="winlogon.exe" ParentPID="100" />
<Process id="180" name="services.exe" ParentPID="170" />
<Process id="200" name="lsass.exe" ParentPID="170" />
<Process id="110" name="svchost.exe" ParentPID="180" />
<Process id="380" name="svchost.exe" ParentPID="200"/>
<Process id="530" name="svchost.exe" ParentPID="1764" />
<Process id="420" name="Avg.exe" ParentPID="110" /> 
```

我想在 c# 中创建一个树视图，如下所示：

```
0
|-4
|  |-100
|     |-155
|     |-170
|       |-180
|       |   |-110
|        |      |-420
|        |-200
|            |-380
|-10     
|  |-120
|     |-150  
|-155
|-1764
    |-530 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:58:23.047

这是我为您提供的解决方案：

```
 private TreeNode[] FindTreeNodes(string Key)
    {
        return oTreeView.Nodes.Find(Key, true);
    }

    private void LoadTreeview(string XmlFile)
    {
        oTreeView.Nodes.Clear();

        if (File.Exists(XmlFile) == true)
        {
            XmlDocument oXmlDocument = new XmlDocument();
            oXmlDocument.Load(XmlFile);

            XmlNodeList oXmlNodeList = oXmlDocument.SelectNodes("/Processes/Process");

            foreach (XmlNode oXmlNode in oXmlNodeList)
            {
                int iID = Convert.ToInt32(oXmlNode.Attributes["id"].Value);
                string sName = oXmlNode.Attributes["name"].Value;
                int iParentID = Convert.ToInt32(oXmlNode.Attributes["ParentPID"].Value);

                TreeNode[] oParentNodes = FindTreeNodes(iParentID.ToString());
                if (oParentNodes.Length == 0)
                {
                    TreeNode oTreeNode = new TreeNode();

                    oTreeNode.Name = iID.ToString();
                    oTreeNode.Text = String.Format("{0} ({1})", sName, iID);

                    oTreeView.Nodes.Add(oTreeNode);
                }
                else
                {
                    if (oParentNodes.Length > 0)
                    {
                        foreach (TreeNode oParentTreeNode in oParentNodes)
                        {
                            TreeNode oTreeNode = new TreeNode();

                            oTreeNode.Name = iID.ToString();
                            oTreeNode.Text = String.Format("{0} ({1})", sName, iID);

                            oParentTreeNode.Nodes.Add(oTreeNode);
                        }
                    }
                    else
                    {
                        Console.WriteLine("  ** Could not find the parent node {0} for child {1} ({2})", iParentID, sName, iID);
                    }
                }
            }
        }
    }

    protected override void OnLoad(EventArgs E)
    {
        base.OnLoad(E);

        LoadTreeview("Xml.xml");
    } 
```

我对 XML 进行了一些修改，使其看起来像这样 - 本质上，它是相同的：

```
<?xml version="1.0" encoding="utf-8" ?>

<Processes>
  <Process id="0" name="[System Process]" ParentPID="0" />
  <Process id="4" name="System" ParentPID="0" />
  <!--
  <Process id="10" name="MissingNode" ParentPID="0" />
  <Process id="1764" name="MissingNode" ParentPID="0" />
  -->
  <Process id="100" name="MyApp.exe" ParentPID="4" />
  <Process id="120" name="avgrsx.exe" ParentPID="10"/>
  <Process id="150" name="avgcsrvx.exe" ParentPID="120" />
  <Process id="155" name="csrss.exe" ParentPID="100" />
  <Process id="170" name="winlogon.exe" ParentPID="100" />
  <Process id="180" name="services.exe" ParentPID="170" />
  <Process id="200" name="lsass.exe" ParentPID="170" />
  <Process id="110" name="svchost.exe" ParentPID="180" />
  <Process id="380" name="svchost.exe" ParentPID="200"/>
  <Process id="530" name="svchost.exe" ParentPID="1764" />
  <Process id="420" name="Avg.exe" ParentPID="110" />
</Processes> 
```

最后，以下节点不会出现，因为 XML 中没有它们的定义：

*   10
*   1764

这些在上面包含的 XML 文件中显示为已注释掉。

希望这是您正在寻找的。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:10:02.120

尝试以下算法：

```
 TreeNode[] arr = new TreeNode[elemCnt]

       arr[0] = new TreeNode with base (root) element

        For each XML element "Process":

                   Let v = Find parent node with linear search in ar

                   If v is not null ( parent found)

                               Add element as child to v

                   Add element to arr

        Add nodes that have null parents to TreeView.Nodes 
```

# android - Cordova PhoneGap 的局限性

> ID：12084496
> 
> 赞同：8
> 
> 时间：2012-08-23T03:52:07.327
> 
> 标签：android, ios, mobile, cordova

我目前正在使用 Cordova PhoneGap 开发一个应用程序。

我现在担心我的应用程序在未来的可扩展性。iOS 和 Android 项目的 PhoneGap 有哪些限制？

我确实看到了这个列表： http: [//phonegap.com/about/feature](http://phonegap.com/about/feature)，关于所有硬件/物理功能，但是基于代码的功能呢？

**有什么我可以用PhoneGap 无法处理的HTML/CSS/Javascript 编写的吗？**

一般来说，

**有没有众所周知的 PhoneGap 无法实现的重要 iOS/Android 功能？**

另外，作为一个小问题，**PhoneGap 可以处理 iOS 或 Android 的音频输入/输出吗？**（该项目的一个重要特征）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-23T04:09:47.240

**至于你问题的第一部分**，Phonegap 应该能够处理所有 HTML/CSS/JS

[https://stackoverflow.com/a/11422251/1618363](https://stackoverflow.com/a/11422251/1618363)

> PhoneGap 通过在您的应用程序中嵌入 web 视图来实现平台兼容性。因此，您可以在 HTML、CSS、JavaScript 中应用您的知识，并且它还提供了与原生功能（例如相机、gps 等）交互的方式。
> 
> 使用 PhoneGap，您可以编写一个通用 Web 应用程序，为特定平台调整部分（有时您根本不需要这样做）并为该平台构建它。后者可以通过 PhoneGap Build 服务来处理：它将您的 web 应用程序捆绑到那里的移动操作系统中（将其嵌入到 Android 上的 Java 应用程序中，iO 上的 Objective-C 应用程序中）
> 
> PhoneGap 能够与托管 PHP 脚本的服务器进行通信，就像所有其他 Web 应用程序一样。尝试从远程站点动态加载资源可能会很麻烦，但这是另一个问题。

**第2部分**

Phonegap 的功能受到限制，并且比使用本机代码编写要慢，它的亮点在于它可以跨平台使用。您将能够创建界面和编写表单并使用数据库，但如果您想创建一个需要 Web 应用程序之外的功能的游戏或应用程序，您将更适合编写本机代码应用程序。

**第 3 部分 - 一个小问题**

Phonegap (Cordova) 可以处理 iOS 和 Android 的音频。看看：[http ://docs.phonegap.com/en/1.0.0/phonegap_media_media.md.html#Media](http://docs.phonegap.com/en/1.0.0/phonegap_media_media.md.html#Media)

我希望这会有所帮助:) 让我知道情况如何。就我个人而言，我发现本机代码更适合编程，但这只是一种偏好。

# ios - 分段按钮控制

> ID：12084497
> 
> 赞同：1
> 
> 时间：2012-08-23T03:52:57.560
> 
> 标签：ios, xcode, button, controls

快速提问：有谁知道我如何创建一个像按钮一样的分段控件。这种控制可以在 Yelp 和 Tweetbot 等应用程序中找到。

![Tweetbot iOS 分段按钮](../Images/5c866a3e3927f74a4eaa8dfbba6f3dfc.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T03:59:14.783

您说它们就像按钮一样，几乎一针见血——您应该将每个按钮实现为单独的`UIButton`. 尽管他们似乎加入了，但他们的行为并不像`UISegmentedControl`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T21:48:56.280

这是我在 GitHub 上制作并发布的控件。[https://github.com/keirp/Glass-Segmented-Buttons-for-iOS-5.1-](https://github.com/keirp/Glass-Segmented-Buttons-for-iOS-5.1-)

# php - 带有表单的 div，并且该表单显示在同一个 div 内

> ID：12084500
> 
> 赞同：0
> 
> 时间：2012-08-23T03:53:10.990
> 
> 标签：php, javascript, jquery, ajax

我在这里的第一篇文章，我想在问这个问题之前我搜索了很多。

我使用了这些示例但没有成功：

*   [jquery 提交表单，然后在现有 div 中显示结果](https://stackoverflow.com/questions/1218245/jquery-submit-form-and-then-show-results-in-an-existing-div)

*   [使用 jQuery 在 DIV 中提交表单](https://stackoverflow.com/questions/1266697/form-submit-in-div-using-jquery)

我的问题是：

我有一个 div 里面有一个表格

```
<div id="mydiv">
<form id="myform" method="post" action="action.php?id=1&lang=en">
...
</form>
</div> 
```

问题是：

1) 我无法将表单结果提交到 div "mydiv"

2）目标是在不刷新的情况下提交

1 和 2 都不适合我

使用的javascript：

```
$(document).ready(function() {
  $('#myform').submit(function () {
    $.post('action.php?id=1&lang=en', 
    $('#myform').serialize(), 
    function (data, textStatus) {
        $('#mydiv').append(data);
    });
    return false;
   });  
}); 
```

编辑：我使用 2 个文件：

1 是主文件，第二个文件（具有“myform”的文件）在“mydiv”中使用。

当我提交时，表单跳转到新页面（不应该）但没有加载任何 Jquery/javascript 脚本（因为它们在主文件中）。

```
example:

FILE_1 main.php (with jquery/js scripts loaded) 

loads inside "mydiv" 

FILE_2 action.php (with the form) 
```

复杂？

* * *

我的问题的更新：

我创建了一个简单的脚本来向您展示我在这里尝试做什么：

divform.html

```
<title>test</title> 
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js" type="text/javascript"></script>

<!-- THIS SCRIPT ALLOW TO USE A DIV AS A TARGETED IFRAME -->    
<script type="text/javascript">
    /***********************************************
    * Dynamic Ajax Content- © Dynamic Drive DHTML code library (www.dynamicdrive.com)
    * This notice MUST stay intact for legal use
    * Visit Dynamic Drive at http://www.dynamicdrive.com/ for full source code
    ***********************************************/

    var bustcachevar=1 //bust potential caching of external pages after initial request? (1=yes, 0=no)
    var loadedobjects=""
    var rootdomain="http://"+window.location.hostname
    var bustcacheparameter=""

    function ajaxpage(url, containerid){
    var page_request = false
    if (window.XMLHttpRequest) // if Mozilla, Safari etc
    page_request = new XMLHttpRequest()
    else if (window.ActiveXObject){ // if IE
    try {
    page_request = new ActiveXObject("Msxml2.XMLHTTP")
    } 
    catch (e){
    try{
    page_request = new ActiveXObject("Microsoft.XMLHTTP")
    }
    catch (e){}
    }
    }
    else
    return false
    page_request.onreadystatechange=function(){
    loadpage(page_request, containerid)
    }
    if (bustcachevar) //if bust caching of external page
    bustcacheparameter=(url.indexOf("?")!=-1)? "&"+new Date().getTime() : "?"+new Date().getTime()
    page_request.open('GET', url+bustcacheparameter, true)
    page_request.send(null)
    }

    function loadpage(page_request, containerid){
    if (page_request.readyState == 4 && (page_request.status==200 || window.location.href.indexOf("http")==-1))
    document.getElementById(containerid).innerHTML=page_request.responseText
    }

    function loadobjs(){
    if (!document.getElementById)
    return
    for (i=0; i<arguments.length; i++){
    var file=arguments[i]
    var fileref=""
    if (loadedobjects.indexOf(file)==-1){ //Check to see if this object has not already been added to page before proceeding
    if (file.indexOf(".js")!=-1){ //If object is a js file
    fileref=document.createElement('script')
    fileref.setAttribute("type","text/javascript");
    fileref.setAttribute("src", file);
    }
    else if (file.indexOf(".css")!=-1){ //If object is a css file
    fileref=document.createElement("link")
    fileref.setAttribute("rel", "stylesheet");
    fileref.setAttribute("type", "text/css");
    fileref.setAttribute("href", file);
    }
    }
    if (fileref!=""){
    document.getElementsByTagName("head").item(0).appendChild(fileref)
    loadedobjects+=file+" " //Remember this object as being already added to page
    }
    }
    }   
</script>   
</head>

<body>

<div id="centerbody" style="width: 600px; height: 300px; border: 1px solid #ccc; margin: 0 auto;">

    <div id="linkzone" style="width: 120px; height: 250px; border: 1px solid #f00; float: left; display: inline;">

    <a href="javascript:ajaxpage('action.php?i=link1', 'mydiv');">goto link1</a>
    <br>
    <a href="javascript:ajaxpage('action.php?i=link2', 'mydiv');">goto link2</a>

    </div>

    <div id="mydiv" style="width: 400px; height: 200px; border: 1px solid #000; float: right; display: inline;">
    </div>
</div>

</body>
</html> 
```

以及在“Mydiv”中加载的 php 脚本/执行表单操作：

动作.php：

```
<script type="text/javascript">

    /** THIS SCRIPT IS SUPPOSED TO ALLOW A FORM SUBMITION BEING loaded in the same div, without refreshing it */
    $(document).ready(function() {
            $('#myform').submit(function () {
                $.post('action.php?i=link2', $('#myform').serialize(), function (data, textStatus) {
                     $('#mydiv').append(data);
                });
                return false;
            }); 
    });
</script>
<?
if ($_GET['i']=="link1") {
    echo "link 1";
    ?>
    <br><a href="javascript:ajaxpage('action.php?i=link2', 'mydiv');">goto link2</a>
    <?  
}
if ($_GET['i']=="link2") {
    $error="0";
    $sent="";
    if (isset($_POST['submit'])=="go") {
        if ($_POST['form_1']!=""){
            echo "good...( {$_POST['form_1']} )...<p>";
            $sent=1;
        }
        else{
            $error=1;
        }
    }
    if ($sent=="1"){
        echo "...gogogogo...  should refresh to another link...5 secs after... (inside here)";
    }
    else{
        echo "link 2";
        ?>
        <br><a href="javascript:ajaxpage('action.php?i=link1', 'mydiv');">goto link1</a>
        <form id="myform" method="post" action="action.php?i=link2">
        input zone: <input type="text" name="form_1"> <input type="submit" value="go" name="submit">    
        </form>
        <?
        if ($error=="1") {
            echo "* mandatory fields"; 
        }
    }
}
?> 
```

可能现在你可以更好地理解我试图修复/做什么。

谢谢，对于一些不好的帖子感到抱歉，正如我所说，我的第一个帖子，我不太习惯这个:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T03:58:40.427

```
$('#myform').submit(function (e) {
  e.preventDefault(); // prevent usual submit and refreshing

  $.ajax({
    // pass needed parameters

    success: function (data) {
      // do what you want with data you get through ajax
    }
  }); 
}); 
```

# java - 推荐用于 Java 编码的 Vim 插件？

> ID：12084502
> 
> 赞同：0
> 
> 时间：2012-08-23T03:53:35.520
> 
> 标签：java, vim, vim-plugin

除了javacomplete javabrowser还有其他插件吗？

它必须支持：

*   自动导入
*   getter/setter 制造商
*   全局重构，更改文件/类/方法名

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T03:58:00.613

最近遇到了 Eclim，两个世界上最好的，eclipse 和 vim。我个人觉得 Eclipse 是最好的 Java 开发 IDE。

*   [埃克利姆](http://eclim.org/)
*   [蚀](http://eclipse.org/)

# android - 从 OnAlarmReceiver 取消/重置警报似乎不起作用

> ID：12084505
> 
> 赞同：0
> 
> 时间：2012-08-23T03:54:18.510
> 
> 标签：android, broadcastreceiver, alarmmanager, commonsware

我正在使用 CommonsWare 的午餐清单示例来设置和重置警报。

我在特定时间设置闹钟，然后如果它是重复闹钟，我会尝试将闹钟重置为新的日期/时间。

在 OnAlarmReceiver 中，当我第一次在我的应用程序上下文（活动）中设置警报时，我尝试使用原始的三行代码。这三行是：

```
ComponentName component=new ComponentName(context, OnBootReceiver.class);
context.getPackageManager().setComponentEnabledSetting(component, PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.DONT_KILL_APP);   
OnBootReceiver.setAlarm(context, itemId, mDateDue); 
```

但是，这似乎不起作用。我当时尝试的是添加这一行：

```
OnBootReceiver.cancelAlarm(context, itemId); 
```

但这也没有什么不同。我对这一切如何联系在一起没有正确的理解，但我怀疑：

1.  我的上下文是错误的。
2.  我必须对广播做点什么，比如取消它。
3.  也许有一个需要更改的标志？

这个想法是，每次发生重复警报时，都会通过代码重置它。我知道我可以使用重复警报，但在我的应用程序的这个阶段，我更喜欢手动执行此操作。

这是 OnAlarmReceiver：

```
public class OnAlarmReceiver extends BroadcastReceiver {
private static final int NOTIFY_ME_ID=1337;

private static final String TAG = "OnAlarmReceiver";

private DbAdapter mDbHelper;

private String mDateDue;
private String mFrequency;  

@Override
public void onReceive(Context context, Intent intent) {     
    mDbHelper = new DbAdapter(context);
    mDbHelper.open();

    AudioManager audioManager = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);

    Bundle bundle = intent.getExtras();
    long itemId = bundle.getLong("itemId");

    Cursor c  = mDbHelper.getItem(itemId);      
    String itemTitle = c.getString(c.getColumnIndex(Db.KEY_ITEMS_TITLE));
    int priority = c.getInt(c.getColumnIndex(Db.KEY_ITEMS_PRIORITY));
    long listId = c.getLong(c.getColumnIndex(Db.KEY_ITEMS_LIST_ID));
    String listTitle = mDbHelper.getListTitle(listId);

    mDateDue = c.getString(c.getColumnIndex(Db.KEY_ITEMS_DATE_DUE));
    mFrequency = c.getString(c.getColumnIndex(Db.KEY_ITEMS_FREQUENCY));

    Toast.makeText(context, "Due: " + listTitle + "->" + itemTitle, Toast.LENGTH_LONG).show();

    SharedPreferences prefs=PreferenceManager.getDefaultSharedPreferences(context);
    boolean useNotification=prefs.getBoolean("use_notification", true);

    // Check if the alarm must be reset to a new future date based on frequency
    checkResetAlarm(context, itemId);

    if (useNotification) {
        NotificationManager mgr = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);                                  
        Notification notification = new Notification();         
        if (priority == 1) { // Display red icon
            notification=new Notification(R.drawable.nuvola_apps_kwrite, itemTitle, System.currentTimeMillis());    
        } else { // Display blue icon
            notification=new Notification(R.drawable.nuvola_apps_package_editors, itemTitle, System.currentTimeMillis());               
        }           
        Intent itemEditor = new Intent(context, ActivityEditItem.class);
        long lAlarmId = (long) (int) itemId;
        itemEditor.putExtra(DbAdapter.KEY_ITEMS_ITEM_ID, lAlarmId);
        itemEditor.putExtra("listId", listId);
        itemEditor.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        // For flags, also see http://developer.android.com/guide/topics/ui/actionbar.html#ActionView

        PendingIntent i=PendingIntent.getActivity(context, 0, itemEditor, PendingIntent.FLAG_UPDATE_CURRENT);           
        notification.setLatestEventInfo(context, listTitle, itemTitle, i);          
        String notifyPreference = prefs.getString("notification_sound", "DEFAULT_RINGTONE_URI");                        
        notification.sound = Uri.parse(notifyPreference);

        int oldVolume = audioManager.getStreamVolume(AudioManager.STREAM_NOTIFICATION);

        if (priority == 1) {
            Log.d(TAG, "A high priority item is due");
            //notification.defaults |= Notification.DEFAULT_VIBRATE;
            Vibrator v;
            v=(Vibrator)context.getSystemService(Context.VIBRATOR_SERVICE);
            v.vibrate(3000);
            int streamVolume = audioManager.getStreamMaxVolume(AudioManager.STREAM_NOTIFICATION);
            audioManager.setStreamVolume(AudioManager.STREAM_NOTIFICATION, streamVolume, 0);
        }
        mgr.notify((int) (long) itemId + NOTIFY_ME_ID, notification);
        audioManager.setStreamVolume(AudioManager.STREAM_NOTIFICATION, oldVolume, 0);
    }
    else {
        Intent i=new Intent(context, AlarmActivity.class);
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(i);
    }
}

private void checkResetAlarm(Context context, long itemId) {        
    if (!mFrequency.equals("")) {           
        String newDateDue = Item.addMinutesToDate(mDateDue, mFrequency); 
        Log.d(TAG, "Due date " + mDateDue + " reset with frequency of " + mFrequency + ", new due date: " + newDateDue);
        mDbHelper.updateItemDueDate(itemId, newDateDue);
        Toast.makeText(context, "Resetting alarm...", Toast.LENGTH_LONG).show();
        ComponentName component=new ComponentName(context, OnBootReceiver.class);
        context.getPackageManager().setComponentEnabledSetting(component, PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.DONT_KILL_APP);   
        OnBootReceiver.cancelAlarm(context, itemId);
        OnBootReceiver.setAlarm(context, itemId, mDateDue);
    }       
} 
```

}

这是 OnBootReceiver：

```
public class OnBootReceiver extends BroadcastReceiver {

public static void setAlarm(Context context, long itemId, String dateDue) {

    AlarmManager mgr=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
    Calendar cal=Calendar.getInstance();                

    String[] pieces=dateDue.split("/");
    String day_of_month = dateDue.substring(8,10);      
    String hour = dateDue.substring(11,13);     
    String minute = dateDue.substring(14,16);
    String second = dateDue.substring(17,19);

    cal.set(Calendar.YEAR, Integer.parseInt(pieces[0]));                
    cal.set(Calendar.MONTH, Integer.parseInt(pieces[1])-1);     
    cal.set(Calendar.DAY_OF_MONTH, Integer.parseInt(day_of_month));
    cal.set(Calendar.HOUR_OF_DAY, Integer.parseInt(hour));
    cal.set(Calendar.MINUTE, Integer.parseInt(minute));
    cal.set(Calendar.SECOND, Integer.parseInt(second));     
    cal.set(Calendar.MILLISECOND, 0);

    if (cal.getTimeInMillis()<System.currentTimeMillis()) {
        cal.add(Calendar.DAY_OF_YEAR, 1);
    }

    mgr.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
            getPendingIntent(context, itemId));

}

/**
 * Cancel Alarm
 *  
 * @param ctxt
 * @param itemId
 */
public static void cancelAlarm(Context ctxt, long itemId) {
    AlarmManager mgr=(AlarmManager)ctxt.getSystemService(Context.ALARM_SERVICE);
    mgr.cancel(getPendingIntent(ctxt, itemId));
}

private static PendingIntent getPendingIntent(Context ctxt, long itemId) {
    //Intent i = new Intent(OnAlarmReceiver.ACTION, Uri.parse("timer:"+alarmId));
    Intent i=new Intent(ctxt, OnAlarmReceiver.class);
    i.putExtra("itemId", itemId);
    return(PendingIntent.getBroadcast(ctxt, (int) (long) itemId, i, 0));
}

// When the phone restarts all alarms must be reset by this method
@Override
public void onReceive(Context ctxt, Intent intent) {
    // To be added
    //setAlarm(ctxt);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:25:12.293

愚蠢的编码错误，在`OnAlarmReceiver`我有`OnBootReceiver.setAlarm(context, itemId, mDateDue);`而不是`OnBootReceiver.setAlarm(context, itemId, newDateDue);`.

这篇文章也帮助了我：[Android AlarmManager in a Broadcastreceiver](https://stackoverflow.com/questions/5582227/android-alarmmanager-in-a-broadcastreceiver)

# ruby - Ruby 中的“map”方法有什么作用？

> ID：12084507
> 
> 赞同：264
> 
> 时间：2012-08-23T03:54:25.403
> 
> 标签：ruby, map, range, enumeration

我是编程新手。有人可以解释一下`.map`会做什么：

```
params = (0...param_count).map 
```

* * *

## 回答 #1

> 赞同：448
> 
> 时间：2012-08-23T04:01:29.317

该`map`方法接受一个可枚举对象和一个块，并为每个元素运行块，从块中输出每个返回值（原始对象不变，除非您使用`map!)`：

```
[1, 2, 3].map { |n| n * n } #=> [1, 4, 9] 
```

`Array`并且`Range`是可枚举的类型。`map`带有一个块返回一个数组。 `map!`改变原始数组。

`map!`这在哪里有帮助，和有什么区别`each`？这是一个例子：

```
names = ['danil', 'edmund']

# here we map one array to another, convert each element by some rule
names.map! {|name| name.capitalize } # now names contains ['Danil', 'Edmund']

names.each { |name| puts name + ' is a programmer' } # here we just do something with each element 
```

输出：

```
Danil is a programmer
Edmund is a programmer 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2013-10-11T16:56:05.627

`map`,`select`和`each`是我代码中 Ruby 的主力之一。

它允许您对数组的每个对象运行操作并将它们全部返回到同一个位置。一个例子是将一个数字数组加一：

```
[1,2,3].map {|x| x + 1 }
#=> [2,3,4] 
```

如果你可以在你的数组元素上运行一个方法，你可以用简写风格来做，如下所示：

1.  要使用上面的示例执行此操作，您必须执行以下操作

    ```
    class Numeric
      def plusone
        self + 1
      end
    end
    [1,2,3].map(&:plusone)
    #=> [2,3,4] 
    ```

2.  为了更简单地使用 & 号快捷方式，让我们使用一个不同的示例：

    ```
    ["vanessa", "david", "thomas"].map(&:upcase)
    #=> ["VANESSA", "DAVID", "THOMAS"] 
    ```

在 Ruby 中转换数据通常涉及级联`map`操作。学习`map`& `select`，它们是主库中一些最有用的 Ruby 方法。它们与`each`.

（`map`也是 的别名`collect`。在概念上使用最适合您的东西。）

**更多有用信息：**

如果您正在运行或正在运行的[Enumerable](http://ruby-doc.org/core-2.2.3/Enumerable.html)对象包含一组 Enumerable 元素（哈希、数组），您可以在块管道中声明每个元素，如下所示：`each``map`

```
[["audi", "black", 2008], ["bmw", "red", 2014]].each do |make, color, year|
  puts "make: #{make}, color: #{color}, year: #{year}"
end
# Output:
# make: audi, color: black, year: 2008
# make: bmw, color: red, year: 2014 
```

对于 Hash（也是一个`Enumerable`对象，Hash 只是一个带有解释器特殊指令的元组数组）。第一个“管道参数”是键，第二个是值。

```
{:make => "audi", :color => "black", :year => 2008}.each do |k,v|
    puts "#{k} is #{v}"
end
#make is audi
#color is black
#year is 2008 
```

**要回答实际问题：**

假设这`params`是一个哈希，这将是映射它的最佳方式：使用两个块参数而不是一个来捕获哈希中每个解释元组的键值对。

```
params = {"one" => 1, "two" => 2, "three" => 3}
params.each do |k,v|
  puts "#{k}=#{v}"
end
# one=1
# two=2
# three=3 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2021-03-30T10:46:02.580

对于任何需要可视化它的人：

[![Map方法示例直观说明](../Images/b5aef360c07e29b6f7016c8a37b284e1.png)](https://i.stack.imgur.com/XDsqs.png)

[![什么都不做的地图](../Images/a4c51bbb5af93147dc1ba7c5fb6bcb7f.png)](https://i.stack.imgur.com/MBvJ7.png)

[![做得更少的地图](../Images/fd9fd54cc423e6e61d7e61ecf6db9b89.png)](https://i.stack.imgur.com/4QD3T.png)

[![地图爆炸！](../Images/e56e2215ddd0e6159202363bc8783855.png)](https://i.stack.imgur.com/pm7Pf.png)

这是完整的故事：

[https://richstone.io/rubys-map-collect-methods-explained-visually/](https://richstone.io/rubys-map-collect-methods-explained-visually/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-12-08T16:52:47.160

使用 ruby​​ 2.4，您可以使用`transform_values`从 rails 提取到 ruby​​ 的此功能来做同样的事情。

```
h = {a: 1, b: 2, c: 3}

h.transform_values { |v| v * 10 }
 #=> {a: 10, b: 20, c: 30} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-23T03:57:04.333

`0..param_count`表示“最多并包括 param_count”。 `0...param_count`表示“最多，但不包括 param_count”。

`Range#map`不返回一个`Enumerable`，它实际上将它映射到一个数组。它与 相同`Range#to_a`。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-23T03:56:02.173

它将一个函数“映射”到一个`Enumerable`- 在这种情况下，一个范围内的每个项目。因此，它会调用从 0 到`param_count`（不包括 - 你对点是正确的）的每个整数传递一次的块，并返回一个包含每个返回值的数组。

[这是`Enumerable#map`.](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-map) 它还有一个别名，`collect`.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-03-09T22:42:13.473

### `#each`

`#each`为数组中的每个元素运行一个函数。以下两个代码摘录是等效的：

```
x = 10
["zero", "one", "two"].each{|element|
    x++
    puts element
} 
```

```
x = 10
array = ["zero", "one", "two"]

for i in 0..2
    x++
    puts array[i]
end 
```

### `#map`

`#map`对数组的每个元素应用一个函数，返回结果数组。以下是等价的：

```
array = ["zero", "one", "two"]
newArray = array.map{|element| element.capitalize()} 
```

```
array = ["zero", "one", "two"]

newArray = []
array.each{|element|
    newArray << element.capitalize()
} 
```

### `#map!`

`#map!`就像`#map`，但修改了数组。以下是等价的：

```
array = ["zero", "one", "two"]
array.map!{|element| element.capitalize()} 
```

```
array = ["zero", "one", "two"]
array = array.map{|element| element.capitalize()} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-09-16T21:46:50.643

Map 是可枚举模块的一部分。非常类似于“收集”例如：

```
 Class Car

    attr_accessor :name, :model, :year

    Def initialize (make, model, year)
      @make, @model, @year = make, model, year
    end

  end

  list = []
  list << Car.new("Honda", "Accord", 2016)
  list << Car.new("Toyota", "Camry", 2015)
  list << Car.new("Nissan", "Altima", 2014)

  p list.map {|p| p.model} 
```

Map 提供遍历由块参数返回的数组的值。

# xcode - 导入代码完成提示在 Xcode 4.4 中有效

> ID：12084510
> 
> 赞同：1
> 
> 时间：2012-08-23T03:54:58.420
> 
> 标签：xcode, xcode4.4

在 Xcode 4.4 中键入`#import ""`时，代码完成不起作用。

有什么解决办法吗？谢谢！

# image - Wordpress 上传的图片不会调整大小

> ID：12084512
> 
> 赞同：0
> 
> 时间：2012-08-23T03:55:16.500
> 
> 标签：image, wordpress, resize

上传特征图像时，它不会调整到应有的大小。我还发现在将图像插入帖子并使用百分比调整器时，它也不起作用。这可能是什么原因造成的？你知道解决这个问题的方法吗？

我正在使用最初以二十个主题为模型的自定义主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:50:38.610

请从您的模板中提供一段代码，用于插入特色图片。如果没有代码示例，几乎不可能帮助您。

# scala - Scala 循环选择：功能循环与传统 for 循环

> ID：12084514
> 
> 赞同：3
> 
> 时间：2012-08-23T03:55:29.070
> 
> 标签：scala

使用功能构造（map、foreach、flatMap 等）循环集合是否更好？作为一个虚拟问题，考虑我有一个字符串列表，我想按不同的标准过滤字符串，然后映射它们以获得一些值。考虑下面的代码：

```
val x1 = list.filter(criteria1).map(do_something)
val x2 = list.filter(criteria2).map(do_something) 
```

假设我有 5 个这样不同的过滤条件，那么我将在列表（可能很大）上循环 10 次（一次使用过滤器，一次使用地图）。

但是，我可以将所有这些组合成一个 for 循环，并在一次迭代中返回/填充 5 个新列表，然后在每个列表上映射总共 6 个循环而不是 10 个。

```
for(i<- 0 to list.length-1){
  if(criteria1) //filter
  if(criteria2) //filter
} 
```

这段代码可能会迫使我使用可变列表，但严格从性能的角度来看，在这种情况下使用函数构造是否有意义。哪种方法更好？

注意：上面的代码/问题只是作为一个例子，我希望它能解释我所指的那种情况

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T07:01:53.180

如果您正在寻找过滤和映射，您可以使用`withFilter`而不是`filter`，这会使过滤器变得懒惰，这样您就不会多次遍历列表。`for`-表达式`withFilter`用于提高效率。您还可以查看`view`s，它为其他操作提供了类似的惰性。

从你想要做什么的问题中并不完全清楚，但我*认为*你想根据不同的过滤器和映射操作输出 5 个新列表。如果性能至关重要，那么使用您建议的循环和可变构建器是一种合理的方法，这就是编程了多少收集方法（检查源代码）。不知道为什么你认为你需要过滤成 5 个列表，然后遍历每个列表来进行映射 - 为什么不通过将函数应用于每个元素来在构建新列表的同时进行映射? 例如

```
 def split[T](xs: Seq[T])(ops: (T => Boolean, T => T)*): Seq[Seq[T]] = {
    val (filters, maps) = ops.unzip
    val buffers = IndexedSeq.fill(ops.size)(ListBuffer.empty[T])
    for {
      x <- xs
      i <- buffers.indices
      if filters(i)(x)
    } buffers(i) += maps(i)(x)  
    buffers.map(_.toSeq)  // return to immutable-land
  }

  // demo: 
  val res = split(1 to 10)(
    (_ < 5, _ * 100),     // multiply everything under 5 by 100
    (_ % 2 == 1, 0 - _),  // negate all odd numbers
    (_ % 3 == 0, _ + 5)   // add 5 to numbers divisible by 3
  )

  println(res) 
  //Vector(List(100, 200, 300, 400), List(-1, -3, -5, -7, -9), List(8, 11, 14)) 
```

我不认为有一个内置的方法可以做（我认为）你想做的事情。请注意，如果您使用递归，您可以定义一个没有可变状态的构建器方法，但这曾经是局部可变状态更简洁/可读的地方。

您的问题实际上归结为性能，并且很容易过早优化。如果您确实遇到真正的性能问题，我建议您仅执行上述操作。如果惯用/简单不够好，那么您可能可以调整一些东西以优化您的特定用例。归根结底，您可能想做的所有事情都没有内置的优化方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T04:14:56.257

你也可以这样做：

```
val x1 = for(x <- list if criteria1) yield do_something(x) 
```

编译器实际上将其转换为`val x1 = list.filter(criteria1).map(do_something)`就像您在上面所做的那样。`for`理解只是一些很好的语法糖，它可以让你将一些序列上的复杂操作聚合变成更易读的东西。您可以阅读[Odersky 书中的相关章节以](http://www.artima.com/pins1ed/for-expressions-revisited.html)获取更多详细信息。

回到你的问题。如果您尝试根据不同的过滤器和地图生成 5 个不同的列表，也许您应该创建一个列表列表。您可以使用`for`推导来遍历每对转换函数的输入列表。

这将帮助您使代码更简单一些，但实际上并不会降低问题的算法复杂性（即您仍然需要对列表进行 5 次迭代）。

在这种情况下，我认为你是对的，使用命令式循环会更有效率。推荐的用于构建列表的数据结构是，[`ListBuffer`](http://www.scala-lang.org/api/current/scala/collection/mutable/ListBuffer.html)因为您可以在恒定时间内将元素添加到任一端 - 然后当您完成构建列表时，您可以将其转换为不可变列表（也是在恒定时间内）。在 Odersky 的书中还有一[小节介绍了如何使用 ListBuffer 。](http://www.artima.com/pins1ed/collections.html#i-1815843466-2)这是我的做法：

```
import scala.collection.mutable.ListBuffer

val b1 = new ListBuffer[Int]
val b2 = new ListBuffer[Int]
// ... b3, b4, b5

for (x <- list) {
  val y = do_something(x)
  if (criteria1(x)) b1 += y
  if (criteria2(x)) b2 += y
  // ... criteria3, criteria4, criteria5
}

val x1 = b1.toList
val x2 = b2.toList
// ... x3, x4, x5 
```

由于它使用的是可变的，`ListBuffer`所以这段代码不再很“纯”——但它可能值得为长列表加速，因为你不再需要遍历整个列表 5 次。

在这种情况下，我真的不会说一种方法比另一种方法好得多。该`ListBuffer`方式使用突变，速度更快，但可能会使代码更难维护。相比之下，功能更强大的版本只是使用对原始列表的重复调用`filter`，`map`这可能更易于阅读（当然假设读者熟悉惯用的 Scala）并且更易于维护，但运行速度可能会慢一些。选择实际上取决于您的目标是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T04:17:16.813

我不太确定多次浏览列表会变慢。您必须`m`从长度列表中构建长度`k`列表`n`。所以你必须`m*k`对每`n`一种方式进行比较。如果它更慢，那么它是由某个恒定因素决定的。我不知道这个因素是小是大。

如果您真的想一次性完成，那绝对是可能的。*列表上的任何操作*都可以通过折叠一次完成。它可能有点复杂，并强调了为什么它可能不会更快。这当然更难阅读：

```
val cs = List((criteria1, f1), (criteria2, f2))
val xs = list.foldRight(cs.map(_ => Nil)) { (x, rs) =>
  (cs zip rs).map { case ((p, f), r) =>
    if (p(x)) f(x) :: r else r
  }
} 
```

您可能需要比我在这里给出的更多的类型注释。

你也可以在这里利用懒惰来发挥你的优势：

```
list.toStream.filter(???).map(???) 
```

这将遍历列表*零*次。在您请求结果的元素之前，这些元素实际上不会被过滤和映射。显然使用您的真实代码而不是`???`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T04:24:48.580

迭代部分真的与你的表现相关吗？在大多数情况下，我对此表示怀疑。只有在这种情况下，单个 for 循环才会更快。

但是，如果您必须使用可变数据类型，那么现在在多核上运行会变得更加困难，并且如果这确实是在性能关键的情况下，那么在 8-800 核上运行它所获得的收益将是巨大的。保存一个循环迭代几乎没有什么好处。

请注意，for 理解通常对于性能来说并不是最优的，因为它可能必须创建大量的闭包实例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T04:34:19.247

如果我理解正确，您想根据不同的标准从一个列表中创建多个列表。我觉得`groupBy`可以达到目的~

```
val grouped = list.groupBy{ item => {
    val c1 = criteria1(item)
    val c2 = criteria2(item)
    if (c1 && c2) 12
    else if (c1) 1
    else if (c2) 2
    else 0
}}
val excluded0 = grouped - 0
val result = excluded0 mapValues do_something
val x1 = result(1) ++ result(12)
val x2 = result(2) ++ result(12) 
```

`view`正如 Apocalisp 提到的，您还可以通过使用和`force`喜欢来利用懒惰：

```
val grouped = list.view.groupBy{ ...
...
val x1 = (result(1) ++ result(12)).force 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T05:43:53.113

正如之前没有提到的，您可能还想考虑 和 的组合`filter`可以`map`通过`collect`. 所以你可以做这样的事情：

```
list.collect {
  case x if criteria1(x) => ...
  case x if criteria2(x) => ....
  case _ => ...
} 
```

但是，对于同时满足`criteria1`和的列表元素，这是一个稍微改变的语义`criteria2`。与 Chris 提议的类似，您可以创建 first `case x if criteria1(x) && criteria2(x)`，但这当然不会扩展到多个此类标准。

不过，您不清楚的一点是，您是要构建实际结果列表（如在第一个示例中），还是仅执行一些副作用（如在第二个示例中）。后者也可以通过稍微不同的方法来实现，如以下示例所示：

```
// A list of criteria and corresponding effects
val criteriaEffects = List( 
  ( (x : Int) => x == 0, (x : Int) => { println("Effect 1: " + x) } ),
  ( (x : Int) => x == 1, (x : Int) => { println("Effect 2: " + x) } ) )

// now run through your values list
List(0,1,2).map(x => criteriaEffects.map( p => if (p._1(x)) p._2(x) ) ) 
```

# ubuntu - 如何处理 ubuntu 更新？

> ID：12084533
> 
> 赞同：-3
> 
> 时间：2012-08-23T03:58:03.590
> 
> 标签：ubuntu

我是 Ubuntu 的新手。每周 ubuntu 都有一些更新消息要下载。恐怕如果我每次都下载所有更新，一两年后我的磁盘就会满了。但如果我关闭更新，我可能会错过一些重要信息。

我应该如何处理更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T04:11:14.987

我同意 aserwin，但理由略有不同。

Ubuntu SECURITY 更新旨在修复现有功能的问题。通过忽略更新，您的系统容易受到潜在恶意软件或入侵的攻击。您始终可以最终控制更新（因为它们需要您的密码才能运行），但除非您的系统非常小并且有耗尽硬盘空间的危险，否则确实没有充分的理由阻止更新。

唯一需要关心所需空间量的情况是当您将 Ubuntu 从一个版本更新到下一个版本时。在这种情况下，您需要足够的空间来下载更新，然后再应用它们。出于这个原因，我通常建议我的客户坚持使用 Ubuntu 长期发布 (LTS) 版本，这样他们就不会被要求定期更新到新版本。

# php - 如何从外部文件中获取有效的 json？

> ID：12084537
> 
> 赞同：0
> 
> 时间：2012-08-23T03:58:35.347
> 
> 标签：php, json

我试图从网站获取 json 数据。在第一个链接中，它返回空白。但在第二个中，它返回 json。

有人知道我该怎么做才能从第一个链接获取 json 数据？

在访问此代码之前，请登录此链接： [https](https://loginfree.globo.com/login/438) ://loginfree.globo.com/login/438 用户：cartolaewlfa@gmail.com 密码：cartoletasfc

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<iframe src="http://cartolafc.globo.com/time/claudioivp-allianz/atletas.json?rodada_id=12"></iframe>
<?php
$file = json_decode(file_get_contents("http://cartolafc.globo.com/time/claudioivp-allianz/atletas.json?rodada_id=12"));

print_r($file);

echo "casa";
?>

<iframe src="http://cartolafc.globo.com/mercado/filtrar.json?page=1&order_by=preco&clube_id=277"></iframe>
<?php
$file = json_decode(file_get_contents("http://cartolafc.globo.com/mercado/filtrar.json?page=1&order_by=preco&clube_id=277"));

print_r($file);

echo "casa";
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:38:46.153

显然，第一个 json URI 要求用户登录网站，否则会将您重定向到主页，而第二个似乎对所有人开放。

我在这里看到的唯一解决方案是使用 curl（或您想要的任何其他方法）模拟浏览器并遵循该网站的登录过程，发送您的登录名、密码和它需要的任何其他信息。然后，您可以捕获它将生成的 cookie。获得 cookie 后，您可以将其保存在 cookiejar 文件或数据库中。

使用这些 cookie，您将能够检索 json 文件，您可以`file_get_contents`使用`stream_context`对象通过 a 发送它们，或者如果您使用 curl，则可以使用`CURLOPT_COOKIE`and`CURLOPT_COOKIEJAR`

当然，这些 cookie 会过期。只需设置一个验证过程，如果存储的 cookie 已过期，它将在其中获取新的 cookie。

如果此 json 文件的内容没有以高频率更新，或者如果用户立即获取这些更新并不重要，您可以在您的服务器中保留此 json 文件的副本，而无需任何访问限制。

这很愚蠢，但如果该域是您的（或者您可以访问它），只需删除该文件中的登录验证？

# node.js - 在“数据”事件中，为什么数据大小是 1374 的倍数？

> ID：12084539
> 
> 赞同：4
> 
> 时间：2012-08-23T03:58:57.603
> 
> 标签：node.js, mtu

这只是一个基于好奇心的问题，但我可能会学到一些有用的东西。

使用我的 Node.js 服务器，当我通过 net.Server 接收数据时，我让它打印出每个数据“数据包”的大小（以字节为单位）。

```
socket.on 'data', (data) -> console.log data.length 
```

我注意到大多数时候它是 1374 字节。所有其他时间都是 1374 的倍数。我从大约 200 个数据事件中得到的最高值是 17,862。

这个 1374 号码是从哪里来的？为什么数据长度偶尔会是它的倍数？

* * *

我最好的猜测是，对于 TCP，1500 字节是以太网最常见的 MTU，其他 126 个字节构成 TCP 数据包的标头。如果 Node.js 足够快地接收到这些数据包，有时可能会将它们聚集在一起，这就是为什么有时它们会以多个形式到达。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:47:35.980

126 的一部分是由于 TCP 标头本身，即 20 个字节。

数据还由服务器库强加的“标头”填充，这正是您所描述的原因：当多个数据包足够接近时，“聚集”数据。当数据包快速连续时，包含的额外信息用于确定正确的数据包顺序并连接数据以供返回。

这是一种减少进入每个完整数据集的处理量的常用技术（为什么要对三个单独的数据运行三次处理，而对于更大的现有数据集可以执行一次），但是在窗口的情况下- 涉及协商，它可能导致所谓的“傻窗综合症”（窗口缩小到要传递的数据小于标头本身的程度，从而使传输效率极低）。但是，如果您遇到了这个问题，您可能应该重新考虑发送和接收数据的方式。

# map - 在 AndEngine 中使用 TMX 文件

> ID：12084548
> 
> 赞同：2
> 
> 时间：2012-08-23T04:00:09.633
> 
> 标签：map, background, andengine, isometric, tmx

我有一个用“平铺”创建的等距 .TMX 文件，我使用的是 AndEngine GLES1。我想用它作为背景或地图。如果可能的话，我还希望将我的“玩家”运动与瓷砖联系起来。我知道有一些问题处理这个问题，但我需要实际的代码来显示背景。

这是我唯一的java文件

```
package com.example.game;

 import java.util.LinkedList;

 import org.anddev.andengine.engine.Engine;
 import org.anddev.andengine.engine.camera.Camera;
import org.anddev.andengine.engine.options.EngineOptions;
import org.anddev.andengine.engine.options.EngineOptions.ScreenOrientation;
import org.anddev.andengine.engine.options.resolutionpolicy.RatioResolutionPolicy;
import org.anddev.andengine.entity.modifier.MoveModifier;
import org.anddev.andengine.entity.scene.Scene;
import org.anddev.andengine.entity.scene.Scene.IOnSceneTouchListener;
import org.anddev.andengine.entity.scene.background.ColorBackground;
import org.anddev.andengine.entity.sprite.Sprite;
import org.anddev.andengine.entity.util.FPSLogger;
  import org.anddev.andengine.input.touch.TouchEvent;
import org.anddev.andengine.opengl.texture.TextureOptions;
import org.anddev.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlas;
import org.anddev.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlasTextureRegionFactory;
 import org.anddev.andengine.opengl.texture.region.TextureRegion;
 import org.anddev.andengine.ui.activity.BaseGameActivity;

 import android.view.Display;

 public class SimpleGame extends BaseGameActivity implements
IOnSceneTouchListener {
//Set up camera
private Camera mCamera;

//Set main scene
private Scene mMainScene;
//?? graphics variables?
private BitmapTextureAtlas mBitmapTextureAtlas;
private TextureRegion mPlayerTextureRegion;
//declaring sprite variable for player character
private Sprite player;
//Equiping ammunition
private LinkedList projectileLL;
private LinkedList projectilesToBeAdded;
private TextureRegion mProjectileTextureRegion;

@Override
public Engine onLoadEngine() {
    //Preparing Engine giving it proper resolution (what you see on the screen)
    final Display display = getWindowManager().getDefaultDisplay();
    int cameraWidth = display.getWidth();
    int cameraHeight = display.getHeight();

     mCamera = new Camera(0, 0, cameraWidth, cameraHeight);

    return new Engine(new EngineOptions(true, ScreenOrientation.LANDSCAPE,
    new RatioResolutionPolicy(cameraWidth, cameraHeight), mCamera));
}

@Override
public void onLoadResources() {
    mBitmapTextureAtlas = new BitmapTextureAtlas(512, 512,
        TextureOptions.BILINEAR_PREMULTIPLYALPHA);

    BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");
    // assinging the player.png image for the mPlayerTextureRegion
    mPlayerTextureRegion = BitmapTextureAtlasTextureRegionFactory
        .createFromAsset(this.mBitmapTextureAtlas, this, "player.png",
        0, 0);
    mEngine.getTextureManager().loadTexture(mBitmapTextureAtlas);

    mProjectileTextureRegion = BitmapTextureAtlasTextureRegionFactory
        .createFromAsset(this.mBitmapTextureAtlas, this,
        "Projectile.png", 64, 0);
}

@Override
public Scene onLoadScene() {
    //??? Creating the scene?
    mEngine.registerUpdateHandler(new FPSLogger());

    mMainScene = new Scene();

    mMainScene
        .setBackground(new ColorBackground(0.09804f, 0.6274f, 0.8784f));

    final int PlayerX = this.mPlayerTextureRegion.getWidth() / 2;
    final int PlayerY = (int) ((mCamera.getHeight() - mPlayerTextureRegion
            .getHeight()) / 2);

    // Using sprite to illustrate player
    player = new Sprite(PlayerX, PlayerY, mPlayerTextureRegion);
    // Place player on game screen
    mMainScene.attachChild(player);

    projectileLL = new LinkedList();
    projectilesToBeAdded = new LinkedList();

    mMainScene.setOnSceneTouchListener(this);

    return mMainScene;
}
     // This method is used for shooting "bullets"
    // Need to find a way to limit ammunition based on in game inventory
      private void shootProjectile(final float pX, final float pY) {

int offX = (int) (pX - player.getX());
int offY = (int) (pY - player.getY());
if (offX <= 0)
    return;

//Using projectile.png as sprite, what is .deepCopy???
final Sprite projectile;
projectile = new Sprite(player.getX(), player.getY(),
mProjectileTextureRegion.deepCopy());
mMainScene.attachChild(projectile, 1);

int realX = (int) (mCamera.getWidth() + projectile.getWidth() / 2.0f);
float ratio = (float) offY / (float) offX;
int realY = (int) ((realX * ratio) + projectile.getY());

int offRealX = (int) (realX - projectile.getX());
int offRealY = (int) (realY - projectile.getY());
float length = (float) Math.sqrt((offRealX * offRealX)
        + (offRealY * offRealY));
float velocity = 480.0f / 1.0f; // 480 pixels per 1 sec//
float realMoveDuration = length / velocity;

MoveModifier mod = new MoveModifier(realMoveDuration,
projectile.getX(), realX, projectile.getY(), realY);
projectile.registerEntityModifier(mod.deepCopy());

projectilesToBeAdded.add(projectile);
    }

public boolean onSceneTouchEvent(Scene pScene, TouchEvent pSceneTouchEvent) {

    if (pSceneTouchEvent.getAction() == TouchEvent.ACTION_DOWN) {
        final float touchX = pSceneTouchEvent.getX();
        final float touchY = pSceneTouchEvent.getY();
        shootProjectile(touchX, touchY);
        return true;
    }
return false;
}

@Override
public void onLoadComplete() {

}
    } 
```

编辑切换到 GLES2 后，这给了我一些错误。我正在使用一个新类并插入提供的代码。我需要为其中任何一个创建类吗？是否通过属性链接 TMXproject - android 和该页面底部的“添加”框？谢谢

```
package com.example.game;

import org.andengine.engine.camera.Camera;
import org.andengine.engine.options.EngineOptions;
import org.andengine.engine.options.ScreenOrientation;
import org.andengine.engine.options.resolutionpolicy.RatioResolutionPolicy;
import org.andengine.entity.scene.Scene;
import org.andengine.entity.scene.background.Background;
import org.andengine.opengl.texture.TextureOptions;
import org.andengine.ui.activity.SimpleBaseGameActivity;
import org.andengine.util.debug.Debug;

public class StarterGame extends SimpleBaseGameActivity {

static final int CAMERA_WIDTH = 800;
static final int CAMERA_HEIGHT = 480;
private Object tiledMap;

@Override
public EngineOptions onCreateEngineOptions() {
    //Create view for the scene??
    Camera mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
    return new EngineOptions(true, ScreenOrientation.LANDSCAPE_SENSOR,
            new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), mCamera);
}

@Override
protected void onCreateResources() {
    // TODO Auto-generated method stub
    try {
        final TMXLoader tmxLoader = new TMXLoader(context.getAssets(), textureManager, TextureOptions.NEAREST, vertexBufferObjectManager, new ITMXTilePropertiesListener() {
            @Override
            public void onTMXTileWithPropertiesCreated(final TMXTiledMap pTMXTiledMap, final TMXLayer pTMXLayer, final TMXTile pTMXTile, final TMXProperties<TMXTileProperty> pTMXTileProperties) {
                    // do stuff with tiles that have properties...
            }
        });
        this.tiledMap = tmxLoader.loadFromAsset("tmx/bg.tmx");
          this.tiledMap.setIsometricDrawMethod(TMXIsometricConstants.DRAW_METHOD_ISOMETRIC_CULLING_PADDING);
    } catch (final TMXLoadException e) {
            Debug.e(e);
    }
}

@Override
protected Scene onCreateScene() {
    //Setup scene with background color only
    Scene scene = new Scene();
    scene.setBackground(new Background(0.09804f, 0.6274f, 0));
    return scene;
}

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T07:38:46.787

不幸的是，我只能向您展示我是如何使用 AndEngine GLES2 做到这一点的。不过我不确定，这在 GLES1 版本中是否可行。但也许你可以试着告诉我们你的经历。

**首先**从 Git 存储库下载 TMX Tilemap Extension：[https ://github.com/nicolasgramlich/AndEngineTMXTiledMapExtension](https://github.com/nicolasgramlich/AndEngineTMXTiledMapExtension)

**第二个**将您的项目与*AndEngineTMXTiledMapExtension*项目链接（它需要标记为库）

当这两个项目链接时，您实际上可以像这样使用扩展：

```
 import org.andengine.extension.tmx.TMXLayer;
 import org.andengine.extension.tmx.TMXLoader;
 import org.andengine.extension.tmx.TMXLoader.ITMXTilePropertiesListener;
 import org.andengine.extension.tmx.TMXProperties;
 import org.andengine.extension.tmx.TMXTile;
 import org.andengine.extension.tmx.TMXTileProperty;
 import org.andengine.extension.tmx.TMXTiledMap;
 import org.andengine.extension.tmx.util.constants.TMXIsometricConstants;
 import org.andengine.extension.tmx.util.exception.TMXLoadException;

 public class YourActivity extends SimpleBaseGameActivity {
     private TMXTiledMap tiledMap;
     private TMXLayer tmxLayer;

     @Override
     protected void onCreateResources() {
       try {
           final TMXLoader tmxLoader = new TMXLoader(getAssets(), getTextureManager(), TextureOptions.NEAREST, getVertexBufferObjectManager(), new ITMXTilePropertiesListener() {
            @Override
            public void onTMXTileWithPropertiesCreated(final TMXTiledMap tmxTiledMap, final TMXLayer tmxLayer, final TMXTile tmxTile, final TMXProperties<TMXTileProperty> tmxTileProperties) {
                    // do stuff with tiles that have properties...
            }
           });
           this.tiledMap = tmxLoader.loadFromAsset("tmx/yourMap.tmx");
           this.tiledMap.setIsometricDrawMethod(TMXIsometricConstants.DRAW_METHOD_ISOMETRIC_CULLING_PADDING);
       } catch (final TMXLoadException e) {
            Debug.e(e);
       }

     }

     @Override
     protected Scene onCreateScene() {
           this.tmxLayer = this.tiledMap.getTMXLayers().get(0);  // the 0 is just an index of the layer. It depends on how many layers you created within Tiled
           attachChild(this.tmxLayer);
     }

 } 
```

当您包含等轴测图时，您可能会看到一些像素伪影（黑线，瓷砖聚集在一起的位置） - 这是一个常见问题，并且在以下位置有解决方法： [http](http://code.google.com/p/andenginetmxtiledmapartifactfixer/) ://code.google.com/p/andenginetmxtiledmapartifactfixer/ 在这里，您可以找到一个 java 程序，您可以使用该程序加载地图文件，并生成可以在项目中使用的固定地图。查看**用法**以查看您需要哪些参数。

无论如何希望这会有所帮助:)

克里斯多夫

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T15:33:32.937

确保你有 main `TMXExtension`，首先将回购拉下来（我认为是克隆）。[然后使用我的repo url](https://github.com/Niffy/AndEngineTMXTiledMapExtension)添加一个遥控器。

然后你想拉下等距分支并检查它。

[这里](http://git-scm.com/book)是学习git的好地方。

# python - pyinstaller exe 无法在分离模式下运行另一个 pyinstaller

> ID：12084549
> 
> 赞同：0
> 
> 时间：2012-08-23T04:00:14.903
> 
> 标签：python, upgrade, pyinstaller

我有 pyinstaller 在 Windows 上使用 --onefile 模式打包的程序。一个用于主流程，一个用于工具包，我想即时更新它们。

我计划如下更新流程：

*   主进程exe启动时，检查是否有补丁文件。如果是，请将工具包复制到 update.exe，并在分离模式下启动“update.exe 升级”。主进程迅速退出，让 update.exe 完成它的工作。
*   update.exe 从不在包中，因此它可以很好地完成替换工作。
*   之后，update.exe 启动主进程exe，也是分离模式。

我认为它应该可以工作，但是该程序不会启动另一个程序。

启动分离过程的代码：

```
subprocess.Popen(command, stdin=None, stdout=None, stderr=None, close_fds=True,
               creationflags=0x00000008) 
```

这些代码在通过 python 脚本启动 pyinstaller exe 并通过 pyinstaller exe 启动像 memcached.exe 这样的普通程序时有效。似乎只是由 pyinstaller 打包的程序无法启动另一个。

有没有办法修复它，或其他更新解决方案

更新：这是 pyinstaller2.0 中的错误，已在最新的 dev 分支中修复。 [http://www.pyinstaller.org/ticket/569](http://www.pyinstaller.org/ticket/569)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T03:28:13.073

我在使用 2.0 版创建的两个 PyInstaller 应用程序中遇到了同样的错误（app1 必须运行 app2）

我尝试了 app1 中的 os.system、subprocess.call 和 os.startfile 来运行 app2，但它们都失败了，无法获取有关问题的信息。

最后，我使用 PyInstaller 1.5.1 重新构建了 app1，并且可以毫无问题地运行 app2（使用 V 2.0 构建）。

我想向 PyInstaller 团队报告这个错误。

# c++ - 默认构造函数初始化问题

> ID：12084557
> 
> 赞同：0
> 
> 时间：2012-08-23T04:01:47.440
> 
> 标签：c++, visual-studio-2005

第一种情况：

```
class x
{
public:
    x(){}
    int mem;
} 
```

第二种情况：

```
class x
{
public:
    int mem;
}

int main()
{
    x a;
    std::cout << a.mem; //member not initialized error in second case
} 
```

如果我们不定义默认构造函数，编译器会加一个；构造函数的功能是初始化内存。那么为什么在第二种情况下会出错，而在第一种情况下却没有呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:10:19.577

在任何一种情况下，成员变量`m`都没有被初始化。您需要在构造函数中显式初始化它

```
class x
{
public:
    x() : mem{} {}
    int mem;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T04:07:57.137

您在类 def 末尾缺少分号 - 这是您的问题。也不要认为默认构造函数会初始化您的成员变量，除非它们也是需要以某种方式初始化的类

```
class x
{
public:
    int mem;
};

int main()
{
    x a;
    std::cout << a.mem; //member not initialized error in second case
} 
```

# android - 在 Activity 中设置的 OnReceive 中停止重复警报

> ID：12084560
> 
> 赞同：0
> 
> 时间：2012-08-23T04:01:58.777
> 
> 标签：android, notifications, broadcastreceiver, alarmmanager

我想在活动中设置的 BroadcastReceiver 的 onReceive 方法中停止或取消重复警报。应该在哪里调用cancel()方法，如何在BroadCastReceiver的OnReceive方法中获取alarmManager的实例。

下面是代码片段

```
public void onCreate(Bundle savedInstanceState) {

setContentView(R.layout.main);

Intent intent1 = new Intent(this, MyBroadcastReceiver.class);       

PendingIntent sender = PendingIntent.getBroadcast(this, 1234567, intent, 0);  

AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE)

alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()
                + (i * 1000), 60*1000, pendingIntent);

} 
```

公共类 MyBroadcastReceiver 扩展 BroadcastReceiver {

静态 int id;

```
@Override

public void onReceive(Context context, Intent intent) {

// Vibrate the mobile phone

Vibrator vibrator = (Vibrator) context
                .getSystemService(Context.VIBRATOR_SERVICE);

vibrator.vibrate(2000);

id=id+1;

NotificationManager notificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);

Notification notification = new Notification(R.drawable.ic_launcher,
                "A new notification", System.currentTimeMillis());

// Hide the notification after its selected

notification.flags |= Notification.FLAG_AUTO_CANCEL;

Intent intent1 = new Intent(context, Repeat.class);

PendingIntent activity = PendingIntent.getActivity(context, id, intent1,
                PendingIntent.FLAG_CANCEL_CURRENT);

notification.setLatestEventInfo(context, "This is the title",
                "Notified", activity);

notification.number += 1;

notificationManager.notify(id, notification);

 String as = Context.ALARM_SERVICE;

    PendingIntent sender = PendingIntent.getBroadcast(context, 1234567, intent, 0);  

    AlarmManager amg = (AlarmManager) context.getSystemService(as);

    amg.cancel(sender); 

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:13:16.867

当您想取消闹钟时，可以使用以下代码。（我没有对此进行测试，但我做了类似的事情来取消 NotificationService）

```
 String as = Context.ALARM_SERVICE;
    AlarmManager amg = (AlarmManager) this.getSystemService(as);
    PendingIntent myIntent = PendingIntent.getBroadcast(this.getApplicationContext(), 234324243, intent1, 0);
    amg.cancel(myIntent); 
```

# java - 空指针异常

> ID：12084561
> 
> 赞同：-1
> 
> 时间：2012-08-23T04:02:18.447
> 
> 标签：java, android, layout, menu, nullpointerexception

我一直在网上关注一些android教程。我尝试尽我所能复制他的代码，但每当我运行应用程序时它就会崩溃。我查看了控制台，发现是 Nullpointer 异常导致了它。该应用程序旨在播放声音，然后关闭，然后转到另一个布局。这是我的代码，请告诉我我做错了什么。

```
 package com.greg.hello;

    import android.app.Activity;
    import android.content.Intent;
    import android.media.MediaPlayer;
    import android.os.Bundle;

    public class MainActivity extends Activity {
    MediaPlayer mpSplash;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);
        MediaPlayer mpSplash = MediaPlayer.create(this, R.raw.explosion);
        mpSplash.start();
        Thread logoTimer = new Thread(){
            public void run(){
                try{
                    int logoTimer=0;
                    while(logoTimer<8000){
                        sleep(100);
                        logoTimer=logoTimer+100;
                    }
                    startActivity(new     Intent("com.greg.hello.CLEARSCREEN"));
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    setContentView(R.layout.tutorial1);
                    e.printStackTrace();
                }

                finally{
                    finish();
                }
            }   
        };
        logoTimer.start();
        finish();
    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        mpSplash.release();
        startActivity(new Intent("com.greg.hello.TUTORIALONE"));
        setContentView(R.layout.activity_main);
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        mpSplash.pause();
        setContentView(R.layout.activity_main);
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        mpSplash.start();
        setContentView(R.layout.activity_main);
    }

    @Override
    protected void onStart() {
        // TODO Auto-generated method stub
        super.onStart();
        setContentView(R.layout.activity_main);
    }

    @Override
    protected void onStop() {
        // TODO Auto-generated method stub
        super.onStop();
        setContentView(R.layout.activity_main);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:06:48.900

这绝对是一个 NPE，替换

```
MediaPlayer mpSplash = MediaPlayer.create(this, R.raw.explosion); 
```

和

```
this.mpSplash = MediaPlayer.create(this, R.raw.explosion); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:15:03.617

里面`onCreate()`有线

```
MediaPlayer mpSplash = MediaPlayer.create(this, R.raw.explosion); 
```

是一个局部变量。

将其替换为

```
this.mpSplash = MediaPlayer.create(this, R.raw.explosion); 
```

***当 NullPointerException 发生时。

在`onDestroy()`

你打过电话了

`mpSlash.release()`

尚未初始化，但您认为它已初始化`onCreate()`

# java - 没有上下文的类中的 db4o android - java

> ID：12084563
> 
> 赞同：0
> 
> 时间：2012-08-23T04:02:36.813
> 
> 标签：java, android, db4o

我在主要活动中使用 db4oHelper 没有问题，但是当我想在没有上下文的类中使用 de db 时，我遇到了问题.. 这个类不扩展 Activity..

```
public void actualizatrat(Context context){
    dbHelper();
    db4oHelper.deleteAll();
    //...
}

private Db4oHelper dbHelper() {
if (db4oHelper == null) {
        db4oHelper = new Db4oHelper(this);
        db4oHelper.db();
    }
    return db4oHelper;
} 
```

构造函数`db4oHelper`：

```
 public Db4oHelper(Context ctx)
    {
          context = ctx;
    } 
```

Eclipse 显示错误：构造函数`Db4oHelper`(Actualiza) 未定义

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T04:21:27.883

虽然您希望访问帮助程序的类可能不是 a`Context`本身，但您可能是从上述组件之一创建它的，因此只需传递`Context`您所拥有的。

```
public void actualizatrat(Context context){
    dbHelper(context);
    db4oHelper.deleteAll();
    (...)
}

private Db4oHelper dbHelper(Context context) {
    if (db4oHelper == null) {
        db4oHelper = new Db4oHelper(context);
        db4oHelper.db();
    }
    return db4oHelper;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-02T15:30:29.010

我建议改为获取应用程序上下文。看看这里：

[在 Android 上获取“上下文”的静态方法？](https://stackoverflow.com/questions/2002288/static-way-to-get-context-on-android)

# fluent-nhibernate - 旧表的流畅 nhiberante 映射

> ID：12084564
> 
> 赞同：0
> 
> 时间：2012-08-23T04:02:48.380
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping, legacy-database

如何为 Legacy 表定义流畅的休眠映射。

我有四张桌子

1.  CTType（**id** GUID，**名称**varchar（100），**DateOFbirth**日期时间）
2.  CTType_Legacy（**id** GUID，**CTType_Legacy_id**身份 int）
3.  CTTypeMap( **id** GUID, **createdOn** datetime, **CtType_id** guid)
4.  CTTypeMap_Legacy（**id** GUID，**CT_Type_id** int）

信息

*   前两个表固定了 50 条记录。这些表是在为客户端配置数据库时首次填充的。
*   前两个表 ID 是映射列（主外键）。
*   最后两个表 CtType_id 映射到 CTType 表的 Id 列

当用户保存新的 CTTypeMapObject 时，它会从 UI 将记录插入 CTTypeMap 表中。映射定义为：

```
public class CTTypeMapMap :Enity<CTTypeMap>
{
    Public CTTypeMapMap()
    {
        Id(x => x.ID);
        Map(x => x.createdOn);
        References(x = x.CtType);

        Join("CTTypeMap_Legacy", join =>
        {
            join.KeyColumn("Id");
            join.Map(x => x.CTTypeMap).Column("CT_Type_id");  //not working
        });
    }
} 
```

表 CTTypeMap_Legacy 的**CT_Type_id****列**的值应该是**CTType_Legacy的****CTType_Legacy_id**列值。我无法将正确的值插入到表 CTTypeMap_Legacy 的**CT_Type_id****中**。

 ******有人可以让我知道如何在注释突出显示的行上进行映射吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:30:47.047

目前尚不清楚您在哪里设置值，但我想您的意思是

```
join.References(x => x.CTType_Legacy).Column("CT_Type_id"); 
```

更新：以下禁用延迟加载

```
join.References(x => x.CTType).Column("CT_Type_id").PropertyRef("CTType_Legacy_id"); 
```

或者

```
join.Map(x => FakeProperty).Column("CT_Type_id").Access.Using<MyPropertyAccessor>();

// in Igetter
public object Get(object obj)
{
    return ((CTTypeMap)obj).CTType.LegacyId;
} 
```******

# javascript - 从 chrome 扩展发送电子邮件（gmail）

> ID：12084565
> 
> 赞同：3
> 
> 时间：2012-08-23T04:03:31.820
> 
> 标签：javascript, google-chrome-extension, gmail

当用户在 gmail 中进行特定交互时，我想发送一封电子邮件。我将为此目的开发一个 chrome 扩展。我可以将内容脚本注入 gmail 来实现这一点。

但是关于电子邮件发送部分，我可以打开一个预先填写消息的撰写窗口。并且用户必须手动发送。但是是否可以在不中断用户的情况下发送邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:51:14.180

你不认为用户不会喜欢这个吗？他们不想在不知情的情况下成为邮件发件人。

最好的解决方案是：

1.  请求用户授权以授权[Gmail OAuth API](https://developers.google.com/google-apps/gmail/oauth_overview)
2.  使用电子邮件参数（收件人、主题、正文等）向您的服务器发送 Ajax 请求
3.  使用 Gmail OAuth API 通过 SMTP 发送邮件
4.  显示发送成功的[通知](http://www.html5rocks.com/en/tutorials/notifications/quick/)

# android - 在市场上上传 apk 时，apk 必须使用与以前版本相同的证书进行签名

> ID：12084566
> 
> 赞同：1
> 
> 时间：2012-08-23T04:03:48.377
> 
> 标签：android, google-play, keytool, android-keystore

我创建了一个应用程序并在 android 市场上发布。现在我想发布它的第二个版本。我想澄清的几件事：

1.  我保持相同的包名。
2.  我没有以前的密钥库，因为我更改了 Windows，因此删除了密钥库，并且我没有该密钥库的备份。

现在我应该有什么方法可以从以前的 apk 中检索密钥库。

我知道stackoverflow上有很多答案，有些人说可能，有些人说不可能。

请需要确切的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T04:17:03.370

是的，您必须拥有用于在 android 市场上上传第一个版本的应用程序的相同**密钥库文件。**

> **如果您丢失了此密钥库文件，那么您将无法为此应用程序提供更新。**

只需阅读[市场上的这个发布应用程序。](http://developer.android.com/distribute/googleplay/publish/preparing.html)我也面临同样的问题。所以，我只是更改包名称并使用新的密钥库将其上传到市场。因此，请妥善保管**Keysotre**文件。查看与您的查询相关的这些现有问题 -

1.  [Android：我丢失了我的 android 密钥库，我该怎么办？](https://stackoverflow.com/q/4459719/940096)

2.  [我丢失了 .keystore 文件？](https://stackoverflow.com/q/4322367/940096)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:24:30.400

当我们第一次创建用于将我们的应用程序发布到 android 市场的密钥库时，这是不可能的 bcs。现在说如果你需要稍后更新它，你需要在现有的密钥库上创建更新。在你的情况下，你需要制作另一个新的密钥库并再次签名并将该签名的apk和密钥库放入以供将来参考..这只是可能性

# jakarta-ee - Java EE（struts/hibernate）：想要根据登录更改主菜单，在这种情况下应该使用 sitemesh 还是有其他选项？

> ID：12084573
> 
> 赞同：0
> 
> 时间：2012-08-23T04:04:48.253
> 
> 标签：jakarta-ee, struts2, sitemesh

我正在制作一个基于 的应用程序`struts and hibernate`，其中基于用户登录我为不同的用户分类了不同的主屏幕。

IE

医生登录：DoctorHomePage.jsp

护士登录：NurseHomePage.jsp

.

.

.

但我想避免这种情况，并根据登录凭据制作一个主页并加载**各种主菜单**和**挤出机。**我应该为此使用**sitemesh**还是有更好的解决方案。刚听说sitemesh。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:18:33.290

我建议您对此类用例使用[Spring 安全性](http://static.springsource.org/spring-security/site/)。基于登录的用户，您可以为用户分配不同的角色，如医生或护士，并可以根据用户角色显示菜单项。

这将在将来的增强中为您提供很大帮助，并且将来可以轻松添加更多角色，Spring 安全性可以轻松地为您处理所有这些。

或者，您可以保留现有的工作方法，根据用户角色制作页面，并根据登录的人以及登录用户拥有的角色/权限来包含它们。

# zend-framework - Zend Radio Element 装饰器

> ID：12084577
> 
> 赞同：2
> 
> 时间：2012-08-23T04:05:29.157
> 
> 标签：zend-framework

> **可能重复：**
> [在一行上显示 Zend_Form_Element_Radio](https://stackoverflow.com/questions/1162107/display-zend-form-element-radio-on-one-line)

我使用以下代码生成单选按钮：

```
 $radio = new Zend_Form_Element_Radio('rating');
        $radio->setLabel('Rating')
              ->addMultiOptions(array(
            '1' => '1',
            '2' => '2',
            '3' => '3',
            '4' => '4',
            '5' => '5'
        )); 
```

这会产生以下 HTML 输出：

```
<label for="rating-1">
<input id="rating-1" type="radio" value="1" name="rating">
1
</label>
<br>
<label for="rating-2">
<input id="rating-2" type="radio" value="2" name="rating">
2
</label>
<br>
<label for="rating-3">
<input id="rating-3" type="radio" value="3" name="rating">
3
</label>
<br>
<label for="rating-4">
<input id="rating-4" type="radio" value="4" name="rating">
4
</label>
<br>
<label for="rating-5">
<input id="rating-5" type="radio" value="5" name="rating">
5
</label> 
```

如何删除每个<标签>之后的“<br>”标签？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T03:07:50.277

```
 $radio = new Zend_Form_Element_Radio('rating');
    $radio->setLabel('Rating')
          ->addMultiOptions(array(
        '1' => '1',
        '2' => '2',
        '3' => '3',
        '4' => '4',
        '5' => '5'
    ))
    $radio->setSeparator('  '); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T07:06:40.727

`<br />`是 Zend_Form_Element_Radio 的默认分隔符，那么让我们试试：

```
$radio->setSeparator(''); 
```

# ffmpeg - 在ffmpeg中混合声音

> ID：12084578
> 
> 赞同：2
> 
> 时间：2012-08-23T04:05:41.013
> 
> 标签：ffmpeg

我有 2 个波形 (.wav) 样本，每个样本持续时间为 1 秒。我需要混合它们，使第二个波形文件在第一个波形文件后 0.5 秒开始。我需要将混合波形格式导出到一个名为 output.wav 的新波形文件中。如何使用 ffmpeg 实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T04:12:40.033

[Sox](http://sox.sourceforge.net/)将允许混合音频文件。您可以使用 -p pad 选项指定偏移量。

```
sox -m sound1.wav "|sox sound2.wav -p pad 0.5" out.wav 
```

查看[Sox FAQ](http://sox.sourceforge.net/Docs/FAQ)的问题 7了解更多信息

# git - git how to move back commit

> ID：12084583
> 
> 赞同：6
> 
> 时间：2012-08-23T04:06:22.503
> 
> 标签：git, git-bash

I want to go back a committed one. How can I do?

```
$ git reflog
9b2a45e HEAD@{0}: reset: moving to HEAD~1
0c54f19 HEAD@{1}: reset: moving to HEAD~1
b9c157d HEAD@{2}: commit: updated from online
0c54f19 HEAD@{3}: commit: add img from download folder
9b2a45e HEAD@{4}: commit: add images
6fa6e34 HEAD@{5}: clone: from git@bitbucket.org:starpix/dojo.git

$ git reset --hard HEAD~1
HEAD is now at 9b2a45e add images 
```

I want to go back to "updated from online". how can I?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T04:10:33.013

`git checkout b9c157d` checks out the commit represented by the sha starting with `b9c157d` -- the commit you asked about.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-23T04:36:11.193

you can just move head forword to b9c157d

```
git reset --hard b9c157d 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T04:11:18.750

If you have the commit id of that particular commit then this syntax will do for you.

`git checkout commit_name` in the commit name pass the commit id and if you don't want to checkout again then to revert the commit will do by this one `git revert commit_name`.

# javascript - 您如何测试仅在闭包范围内可见的 javascript 方法？

> ID：12084590
> 
> 赞同：4
> 
> 时间：2012-08-23T04:07:38.800
> 
> 标签：javascript, unit-testing, closures, jasmine

假设我有以下 javascript：

```
function Foo() {

    function privateStuff() {
       //do private stuff
    }

    this.publicStuff = function() {
        privateStuff();
        //do other stuff
    }

} 
```

`publicStuff()`通过执行以下操作很容易进行测试：

```
var myFoo = new Foo();
myFoo.publicStuff();
//all the assertions 
```

但是，我希望能够将该`privateStuff()`方法作为自己的单元进行测试。我不知道我怎么能自己调用​​它。我知道使用 Java（我更熟悉）可以使用反射来测试私有方法，但我想知道是否有任何方法可以自己测试这些函数。如果没有通用的方法来做到这一点，我已经开始使用[Jasmine](http://pivotal.github.com/jasmine/)来运行我的单元测试。这个框架是否为此提供了任何功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:21:54.457

你有你的代码的方式，你不能。您不允许任何内容对`privateStuff`. 在我看来，您需要阅读闭包的概念（这是 JavaScript 的基础）。

每当你`f() { ... }`在 JS 中使用一个构造（以及其他几个，比如`try-catch`块），你总是隐式地创建一个闭包。像您所做的那样嵌套函数是完全合法的，但除非您为外部函数提供对内部函数的外部引用，否则只能从外部函数内部访问内部函数。

来自[Mozilla](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope)：

> 您可以在函数中嵌套函数。嵌套（内部）函数对其包含（外部）函数是私有的。它也形成了一个闭包。
> 
> 闭包是一个表达式（通常是一个函数），它可以具有自由变量以及绑定这些变量（“关闭”表达式）的环境。
> 
> 由于嵌套函数是闭包，这意味着嵌套函数可以“继承”其包含函数的参数和变量。换句话说，内部函数包含外部函数的范围。
> 
> *   只能从外部函数中的语句访问内部函数。
> *   内部函数形成一个闭包：内部函数可以使用参数和

尽管 Mozilla 文档延续了这一点，但说东西是`private`或`public`在 Javascript 中有点不正确，因为在大多数与多态行为或继承相关的编程语言（如 C++ 和 Java）中，命名法具有非常明确的含义。就 JS 而言，最好将其视为范围有限的，并尝试深入了解闭包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T04:14:58.127

你不能从外面做，这就是为什么它是“私人的”。你可以暂时暴露它：

```
this.privateStuff = privateStuff; 
```

或者从范围内进行测试，如果可以的话，但是你正在测试它......

# haskell - 在 Haskell 模式匹配中暗示相等

> ID：12084593
> 
> 赞同：11
> 
> 时间：2012-08-23T04:08:11.643
> 
> 标签：haskell, pattern-matching, boolean-logic

我正在编写一个函数来简化布尔表达式。例如，`Nand(A, A) == Not(A)`。我尝试使用模式匹配来实现这个特定的规则，如下所示：

```
-- Operands equivalent - simplify!
simplify (Nand q q) = Not (simplify q)
-- Operands must be different, so recurse.
simplify (Nand q q') = Nand (simplify q) (simplify q') 
```

编译后，我收到错误：

```
Conflicting definitions for `q'
Bound at: boolean.hs:73:21
          boolean:73:29
In an equation for `simplify' 
```

我想我了解发生了什么，并且我已经解决了它，但我只想知道：

1.  为什么这种模式匹配不可能？
2.  有惯用的解决方法吗？

*完全披露：这与家庭作业有关，但课程的目的不是学习 Haskell，反正我已经用自己的方式解决了。*

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-23T04:08:11.643

我找到的解决方案是使用警卫来检查子结构的相等性：

```
simplify (Nand q q')
    -- Operands equivalent - simplify!
    | q == q' = Not (simplify q)
    -- Operands different - recurse.
    | otherwise = Nand (simplify q) (simplify q') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T21:38:05.333

你可以坚持你原来的风格：

```
-- Operands equivalent - simplify!
simplify (Nand q q') | q == q' = Not (simplify q)
-- Operands must be different, so recurse.
simplify (Nand q q') = Nand (simplify q) (simplify q') 
```

另外，我认为你应该在平等测试之前而不是之后简化：

```
simplify (Nand q q') = if qs == qs' then Not qs else Nand qs qs' where
    qs = simplify q
    qs' = simplify q' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T10:20:06.820

“答案”是不允许在一个模式中两次提及同一个变量。无论如何，不​​在 Haskell 中。解决此问题的最佳方法是您似乎已经发现的方法 - 使用模式保护来测试相等或不相等。

# javascript - 如何添加旧版本的 syntaxhighlighter

> ID：12084596
> 
> 赞同：0
> 
> 时间：2012-08-23T04:08:23.983
> 
> 标签：javascript, css, syntax-highlighting, blogger, syntaxhighlighter

我为我的网站添加了最新版本的语法荧光笔 ( [http://alexgorbatchev.com/SyntaxHighlighter/](http://alexgorbatchev.com/SyntaxHighlighter/) )，它看起来像这样

![在此处输入图像描述](../Images/c07a5969c8ce11097d3d51de07ad3e81.png)

我在一些博客中看到了带有打印机和复制按钮的语法荧光笔版本，如下图所示。我也想在我的网站中添加代码存根，就像这样

![在此处输入图像描述](../Images/d181d0c696afd2a8f079443ca99a6d96.png)

我可以为我的网站添加这个版本吗？如果我可以怎么做？或者如何更改新版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:19:52.447

不需要旧版本，需要[打开工具栏](http://alexgorbatchev.com/SyntaxHighlighter/manual/configuration/)。默认情况下它是关闭的。

# iphone - 无法识别的选择器发送到 UIButton 的实例

> ID：12084598
> 
> 赞同：0
> 
> 时间：2012-08-23T04:08:28.277
> 
> 标签：iphone, objective-c, ios

创建了我自己的按钮子类，我得到 -[UIRoundedRectButton setup]: unrecognized selector sent to instance 0x7c3e600'。

我认为这是因为 buttonWithType 只是返回一个显然不是橙色按钮类型的按钮，但无法弄清楚如何做到这一点！

```
 @implementation OrangeButton

    +(id)Create
    {
        OrangeButton *button = (OrangeButton*)[OrangeButton buttonWithType:UIButtonTypeRoundedRect];
        [button setup];
        return button;
    }

    -(void) setup
    {
        [self setBG];     
    }
    -(void)setBG
    {
        [self setBackgroundImage:[UIImage imageNamed:@"bg-button-orange.gif"] forState:UIControlStateNormal];
    }

    @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:21:11.990

我最近遇到了类似的问题。UIButton 实际上是一个类集群——即当您实例化一个 UIButton 时，您可能会返回一个内部 Button 类（可能不同的类取决于按钮类型，但这是一个实现细节）。有几个这样的 Apple 类（NSData 是另一个）。

不幸的是，这意味着（实际上）不可能继承 UIButton。如果您需要类似的功能但不想/不能使用直接的 UIButton，带有附加 UITapGestureRecogniser 的 UIView 将是我的第一个呼叫点。

**编辑：**

将 UITapGestureRecognizer 附加到 UIView 提供了与 UIButton 非常相似的（以及额外的额外功能，例如可变数量的点击）功能。但是，而不是编写以下内容：

```
[someButton addTarget:aTarget action:yourSelector forControlEvents:UIControlEventTouchUpInside]; 
```

您需要创建并附加手势识别器：

```
UITapGestureRecognizer *tgr = [[UITapGestureRecognizer alloc] initWithTarget:aTarget action:yourSelector];
yourUIView.userInteractionEnabled = YES;
[yourUIView addGestureRecognizer:tgr]; 
```

如果要使边缘变圆，请添加：

```
yourUIView.layer.cornerRadius = 5 // example value 
```

要获取图层属性，您需要导入 QuartzCore.h 标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T05:43:38.697

我认为这是可能的，因为我创建了自定义类

在 .h 中，文件

```
@interface OrangeButton : UIButton
{
}
-(void) setBG;
@end 
```

在 .m 文件中

```
@implementation OrangeButton

- (id) initWithFrame: (CGRect)frame
{
     self = [UIButton buttonWithType: UIButtonTypeRoundedRect];

     // set frame
     self. frame = frame;

     if (self) 
     {
        // change bg color   
        [self setBG];

        return self;
     }

    return nil;
}

-(void) setBG
{
    [self setBackgroundImage:[UIImage imageNamed:@"bg-button-orange.gif"] forState:UIControlStateNormal];
}

- (void)dealloc
{
    [super dealloc];
}

@end 
```

现在，当您想使用它时，请致电

```
OrangeButton *obj= [[OrangeButton alloc] initWithFrame: CGRectMake(0, 0, 90, 40)];
[obj setContentMode: UIViewContentModeScaleAspectFit];

// add it to the view
[self addSubview: obj];

// assign action
[obj addTarget: self action: someAction forControlEvents: UIControlEventTouchUpInside]; 
```

我认为这会做到

# mysql - Mysql事件日程创建SQL错误

> ID：12084600
> 
> 赞同：0
> 
> 时间：2012-08-23T04:08:46.870
> 
> 标签：mysql

我正在尝试构建一个预定的查询，但有些东西触发了错误，目前还不清楚出了什么问题。活动安排对我来说有点新，但我还有很多其他人在工作，所以我缺少一些信息：

```
DELIMITER //
CREATE EVENT gen_firstJoins
    ON SCHEDULE EVERY 1 HOUR
    ON COMPLETION PRESERVE
    DO BEGIN
        CREATE TEMPORARY TABLE tmp_joins SELECT username, MIN(player_join) AS player_join FROM joins GROUP BY username ORDER BY player_join ASC ;
        TRUNCATE joins_first;
        INSERT INTO joins_first (username, player_join) SELECT username, player_join FROM tmp_joins GROUP BY username ORDER BY player_join;
    END//  
DELIMITER ; 
```

错误：

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 6 行的 'ame, MIN(player_join) AS player_join FROM joins GROUP BY username ORDER BY playe' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T00:11:04.160

在评论中回答，因此将评论重新发布为答案回复：[https ://meta.stackexchange.com/questions/90263/unanswered-question-answered-in-comments](https://meta.stackexchange.com/questions/90263/unanswered-question-answered-in-comments)

* * *

您可能有隐藏字符/换行符等？

只需选择并删除整个作品“用户名”（在 SELECT 之后）并尝试重新输入。

# javascript - 设置变量对象键

> ID：12084603
> 
> 赞同：0
> 
> 时间：2012-08-23T04:08:56.803
> 
> 标签：javascript, variables, object

在下面的示例中，是否可以将一个或多个对象键设置为`"value"`变量？我想在保持 JOSN 对象完整的同时做到这一点。

```
var ex = { 
  "value": 4,
  "amount": 1341,
  "data": "tree",
  "animal": "mouse"
} 
```

我知道这样做是可能的。

```
var value = "value";
var ex = {};
ex[value] = 4;
ex.amount = 1341;
ex.data = "tree";
ex.animal = "mouse"; 
```

这会将整个对象撕成碎片，并且更难管理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T04:12:32.137

不，那是不可能的。您需要采用第二种方式，或两种方式的混合：

```
var ex = {
  "amount": 1341,
  "data": "tree",
  "animal": "mouse"
};

ex[value] = 4; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T05:18:25.440

您可以扩展`Object.prototype`：

```
Object.prototype.append = Object.prototype.append || function (key,val){
   this[key] = val; return this;
}; 
```

能够做类似的事情

```
var value = 'value'
   ,animal = 'animal' 
   ,ex = { 
          "amount": 1341,
           "data": "tree",
         }.append(value,4)
          .append(animal,'mouse'); 
```

该`append`方法可能更全面：

```
Object.prototype.append = Object.prototype.append || function(){
   var args = [].slice.call(arguments);
   if (args.length===1 && /object/i.test(args[0].constructor)){
    for (var l in args[0]){
      if (args[0].hasOwnProperty(l))
       this[l] = args[0][l];
    }
   }
   if (args.length===2){ this[args[0]] = args[1]; }
   if (args.length>2 && args.length%2<1){
    for (var i=0;i<args.length;i+=2){
      this[args[i]] = args[i+1];
    }
   }
   return this;
}; 
```

现在你可以：

```
var value = 'value'
   ,animal = 'animal'
   ,amount = 'amount'
   ,data = 'data'
   ,ex = {}.append(amount,1341,data,'tree',value,4,animal,'mouse'); 
```

另请参阅[此页面](http://perfectionkills.com/extending-built-in-native-objects-evil-or-not/)（关于扩展本机 JS 对象）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T04:15:27.877

这是简单的方法......

```
 var ex = { 
  "value": 4,
  "amount": 1341,
  "data": "tree",
  "animal": "mouse"
}

var valList = [['4','1341','tree','mouse'],['5','1341','tree','mouse']];
var objList=[];
for (var i =0; i<valList.length; i++)
{
     j=0;
    for(var o in ex)
    {
    ex[o] = valList[i][j]; 
        j++;
    }
      objList[i]= ex;
} 
```

它将能够制作一堆对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T04:25:39.997

如果您只是想节省一些语法输入或对使用变量中的属性名称的初始对象有更多的自由，您可以创建一个函数，该函数将采用可变数量的参数并将每对连续的参数解释为键和价值：

```
function setProps(obj, key, value /* key2, value2, etc... */) {
    for (var i = 1; i < arguments.length; i+=2){
        obj[arguments[i]] = arguments[i+1];
    }
}

var ex = {};
setProps(ex, "value", 4, "amount", 1341, "data", "tree", "animal", "mouse"); 
```

传递的任何键值都可以是字符串或变量中的值。

无法定义使用变量中的属性名称的静态声明的 javascript 数据结构。您必须执行代码才能做到这一点。

# iphone - NSMutableArray 访问器返回 NSArray

> ID：12084605
> 
> 赞同：0
> 
> 时间：2012-08-23T04:09:45.973
> 
> 标签：iphone, objective-c, nsmutablearray

我有一个 NSMutableArray

```
@property (copy, nonatomic) NSMutableArray *childrenArray; 
```

现在我像这样初始化它：

```
self.childrenArray = [NSMutableArray arrayWithArray:children]; 
```

上面的 children 也是 nsmutable 的，

现在，当我从子数组中删除一个对象时，我收到了这个错误：

```
[__NSArrayI removeObjectAtIndex:]: unrecognized selector sent 
```

我立即明白我的删除是在 NSArray 上调用的，所以我的查询是为什么我的访问器返回 NSArray，因为它应该返回 NSMutableArray。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:13:44.197

首先，`copy`@property 从字面上发送`copy`到正在设置的对象。可变集合`copy`通过创建不可变副本来响应。可变复制充斥着边缘情况（其中许多已经在其他 SO 问题中讨论过）。

其次，您真的*不*希望属性提供对对象内可变状态的访问。而且您可能不想出售可变集合类。

* * *

钝：

发送`copy`到可变集合会返回不可变副本。`copy`属性不会保留可变性。

手动实现 setter/getter 来设置/返回可变实例可能是错误的。

* * *

这样想：

您有一个名为“Person”的类，它有一个名为“firstName”的属性。如果该属性是可变的，有人可能会说：

```
 [[aPerson firstName] setString:@"Joe"]; 
```

即，您是否希望某人能够更改您的名字而无需任何通知他们这样做了？可能不是。但这*正是*您通过在可变容器中公开对象状态所允许的。

# objective-c - Objective C常量字符串隐式转换？

> ID：12084611
> 
> 赞同：0
> 
> 时间：2012-08-23T04:10:23.183
> 
> 标签：objective-c, nsstring

我从 llvm 源代码中注意到编译器支持该标志：

```
-fconstant-string-class=CLASSNAME 
```

如果此标志不存在，编译器似乎默认为 NSConstantString。

在检查 Apple 的 Foundation Library 后，NSConstantString 继承自 NSSimpleCString，后者提供了启用 ObjC 常量字符串行为所需的 ivars。这又是 NSString 的子类。

但是，在普通的 ObjC 代码中，以下内容是完全合法的：

```
NSString *anNSString = @"This is an NSConstantString?"; 
```

这似乎很好（NSConstantString 是子类），除了：

1) 常量字符串的数据应该汇集到 NSSimpleCString 中声明的 ivars 中，这对 NSString 是不可用的。

2) NSString 的迭代方法表明它是建立在 unichars 数组上的。这意味着必须有一些从 NSConstantString 的字符到 NSString 的 unichars 的转换。

由于在 Objective C 中不可能进行运算符重载，这种转换如何/在哪里发生？这里有一些代码生成技巧吗？还是我错过了更明显的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T04:16:21.883

这不是框架中唯一一个您会发现您正在处理的类不是您期望的类的地方。由于 Objective-C 是鸭子类型的，因此类之间甚至不需要存在继承关系（尽管这对于让其`isKindOfClass:`正常工作是可取的）。

使用“前端类”作为接口并使用一堆“私有类”作为实现的做法在 Cocoa 框架中被提升为一种模式。这个概念被称为“类集群”，大多数Foundation类都有自己的集群。由于它们都共享相同的公共接口，因此一切都像您期望的那样工作。就这些而言，前端类本身可能应该被认为是抽象的（即使在 Objective-C 中不存在抽象类的编译时概念）。

例如，一旦你按下运行按钮，两者`NSArray`都会`NSMutableArray`变成。`NSCFArray`另一种公然的鸭子类型：上次我检查时，当你调用一个处理 a 上路径的方法`NSString`（例如`stringByAppendingPathComponent:`）时，你会得到一个类的实例`NSPathStore2`，即使文档说它返回 a `NSString`。

`NSConstantString`只要`NSString`所有相关方法都在`NSConstantString`. 至于转换本身，`unichar`s 的公共访问点并不多：据我统计，只有 5`NSString`种方法使用`unichar`s，因此任何需要的转换都可以在那里轻松完成。

**编辑**我更深入一点，发现`NSString`没有 ivar，就存储而言，它的子类有绝对的自由裁量权。`NSSimpleCString`声明`char* bytes`和`int numBytes`；`NSConstantString`不添加 ivar。两个类都实现/覆盖`unichar`访问方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T04:16:04.570

Objective-C 是一种动态调度语言。您将变量声明为`NSString*`，但实际上它可以是`NSString*`. 由于所有方法都是动态分派的（例如方法调用），因此编译器认为对象的类型是什么并不重要[1]，重要的是对象*实际上*是什么。因此，在那行代码中，您的`anNSString`变量实际上包含 an`NSConstantString`而不是`NSString`.

[1]：类型影响选择器查找过程，这会影响编译器认为参数的类型应该是什么，这会影响潜在的警告和类型的隐式强制。这些都与这里无关。

# knockout.js - 剔除复选框绑定

> ID：12084612
> 
> 赞同：0
> 
> 时间：2012-08-23T04:10:26.227
> 
> 标签：knockout.js

[在此处](http://jsfiddle.net/SimonYong/zvCeN/5/)参考此代码。我打算创建一个联系人表，其中有 3 种模式“新建”、“编辑”和“查看”，以控制用户输入。一切正常，除了选中或未选中显示在单击后不刷新的复选框。不知何故，它仍然是原始值，直到它变得模糊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:38:02.770

以下行中的问题：

```
<td width="*%" data-bind="click: function() { $data.Editing('DisplayName'); }"> 
```

当您单击复选框时，会发生 TD 元素的单击事件，而不是单击 oo 复选框元素。

如果您将单击事件更改为双击，它将起作用：

```
<td data-bind="event: {dblclick: function() { $data.Editing('IsOrganization'); }}"> 
```

# javascript - 我的插件不适用于不同的回调

> ID：12084618
> 
> 赞同：0
> 
> 时间：2012-08-23T04:11:10.910
> 
> 标签：javascript, jquery, dom, jquery-plugins

我正在为不同 div 的上下文菜单开发一个插件

```
<div>
  <div class='first'>some data</div>
  <div class='second'>some data</div>
  <div class='third'>some data</div>
  <div class='fourth'>some data</div>
</div> 
```

这是显示为上下文菜单的菜单：

```
<ul id='cmenu'>
 <li id='menuItem1'>Item1</li>
 <li id='menuItem2'>Item1</li>
 <li id='menuItem3'>Item1</li>
 <li id='menuItem4'>Item1</li>
 <li id='menuItem5'>Item1</li>
 <li id='menuItem6'>Item1</li>
</ul> 
```

这个插件是如何工作的：它改变了每个部门的菜单项列表，并且菜单项的回调也改变了。

```
(function($) {
     $.fn.cnxtmenu = function(options) {
          var defaults = {
              'menuid' : '',
               item1 : function() {},
               item2 : function() {},
               item3 : function() {},
               item4 : function() {},
               item5 : function() {},
               item6 : function() {},
          },
          opt = $.extend({}, defaults, options);

          var mid = '#'+opt.menuid, seldiv;
          this.live({
               "contextmenu" : function(e) {
                     seldiv = $(this);
                     if ($(this).hasClass('first')) {
                         //change the menu list         
                     }
                     else if($(this).hasClass('second')){
                         // change the menu list to display different items 
                     } 
                     else if($(this).hasClass('file-list')){
                         //differ list  
                     }
                     else if($(this).hasClass('dstore_file-list')){
                         //differ menu list
                     }
                     $(mid).css({
                          top : e.pageY + 'px',
                          left : e.pageX + 'px'
                     }).show();
                     return false;
                 }
            });

            $(mid).children('li').unbind('click').click(function(e) {
                e.stopPropagation();
                e.preventDefault(); 
                switch(this.id) {
                    case 'menuItem1':
                        opt.item1(this, seldiv);
                        break;
                    case 'menuItem2':
                        opt.item2(this, seldiv);
                        break;
                    case 'menuItem3':
                        opt.item3(this, seldiv);
                        break;
                    case 'menuItem4':
                        opt.item4(this, seldiv);
                        break;
                    case 'menuItem5':
                        opt.item5(this, seldiv);
                        break;
                    case 'menuItem6':
                        opt.item6(this, seldiv);
                        break;
            }
            $(mid).hide();
            return false;
        });

        $(mid).click(function() {
            $(mid).hide();
        });
        $(document).click(function() {
            $(mid).hide();
            });
       }
})(jQuery); 
```

我正在像这样使用这个插件。

```
$('.first').cnxtmenu({menuid:'cmenu',
    item1:some callbacks
});

//...

$('.fourth').cnxtmenu({menuid:'cmenu',
     // soem differt callbacks.
}); 
```

为所有四个 div 分配了不同的回调。

我的问题是选择器的回调没有区别，唯一的最后一个，即第四个选择器的回调正在执行。并且多次触发回调。

请帮我看看我的代码有什么问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:23:19.563

在给出的示例中，您将列表`cmenu`作为相同的对象传递给每次调用`cnxtmenu()`. 由于`cmenu`是持久的，当您`unbind`单击侦听器时，您将删除以前附加的侦听器并用新的侦听器替换它们。

您需要将不同的上下文菜单传递给每个调用，`cnxtmenu()`或者您可以尝试重新架构具有多个回调的事物，但根据触发上下文菜单的元素将它们过滤掉。

此外，除非您受限于 jQuery 1.7 以下的某个版本，否则您应该使用[`on()`](http://api.jquery.com/on/)and [`off()`](http://api.jquery.com/off/)，而不是`live()`and `unbind()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:59:44.737

我得到了你的问题，你以错误的方式分配回调。并且回调按照您为最后一个部门指定的分配。因此**，您需要在 contextmenu 函数中分配回调**。

第二次调用插件的次数，插件代码也将执行，并且作为您的代码，回调也将在 onload 时分配。代码更改后无需担心。

# tridion - 如何使用 categoriesdata 从 Tridion 获取类别

> ID：12084621
> 
> 赞同：3
> 
> 时间：2012-08-23T04:11:28.197
> 
> 标签：tridion, tridion-2011

我一直在寻找一种方法，如何使用 Categoriesdata 从 Tridion 获取所有类别。我正在尝试如下所示，但它显示错误。

```
CoreServiceSession client = new CoreServiceSession();
SessionAwareCoreServiceClient csClient = client.GetClient();
ReadOptions readoption = new ReadOptions();

CategoriesFilterData filter = new CategoriesFilterData();
XElement xml = csClient.GetSystemWideList(filter); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T06:24:12.233

您需要使用 GetListXml 而不是 GetSystemWideList 并指定要从中检索类别的发布 ID：

```
CategoriesFilterData filterData = new CategoriesFilterData();
XElement resultXml = client.GetListXml(publicationId, filterData); 
```

GetSystemWideList 通常用于检索系统范围内的内容，并且不仅限于 1 个出版物，例如 PublicationTargets 和 MultimediaTypes

但是，您也可以尝试搜索查询，如下所示：

```
SearchQueryData filter = new SearchQueryData(); 
filter.ItemTypes = new ItemType[] { ItemType.Category }; 

IdentifiableObjectData[] results = client.GetSearchResults(filter);
foreach (IdentifiableObjectData obj in results)
{
    Console.WriteLine(String.Format("{0} - {1}", obj.Title, obj.Id));
} 
```

# java - 如何通过单击Java中的按钮来更改图像

> ID：12084631
> 
> 赞同：-1
> 
> 时间：2012-08-23T04:12:35.540
> 
> 标签：java, swing, image-viewer

如果已经显示图像，通过单击按钮如何将其更改为另一个？

假设我缓冲了两个图像。

```
bi = ImageIO.read(new File("1.jpg");
bi2 = ImageIO.read(new File("2.jpg")); 
```

并显示我正在使用的 bi

```
public void paint(Graphics g){
    super.paintComponent(g);

    Dimension dim = Toolkit.getDefaultToolkit().getScreenSize(); 
    int w = ((int) dim.getWidth() / 2) - (bi.getWidth() / 2);
    int h = ((int) dim.getHeight() / 2) - (bi.getHeight() / 2);

    g.drawImage(bi, w, h, null);
} 
```

我试图这样做。

```
JButton b = new JButton("Change Image");
b.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent ae){
        bi = bi2;
        paint(null);
    }
}); 
```

这将 bi 设置为一个新的图像和调用 paint() 方法，但图像查看器本身现在根本不出现。

继续[如何设置 JFrame 背景透明但 JPanel 或 JLabel 背景不透明？](https://stackoverflow.com/questions/11703794/how-to-set-jframe-background-transparent-but-jpanel-or-jlabel-background-opaque/11705029#comment16142683_11705029)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T04:14:38.980

您需要请求一个`repaint`.

```
JButton b = new JButton("Change Image");
b.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent ae){
        bi = bi2;
        //invalidate();
        repaint();
    }
}); 
```

可能还需`invalidate`要先调用以允许容器被标记为由重绘管理器重绘

如果您知道要绘制的区域（即旧区域和新区域），您可以`paintImmediately`致电

所以这样的事情也可以工作......

```
int w = ((int) dim.getWidth() / 2) - (bi.getWidth() / 2);
int h = ((int) dim.getHeight() / 2) - (bi.getHeight() / 2);
Rectangle oldArea = new Rectangle(w, h, bi.getWidth(), bi.getHeight());

bi = bi2;
w = ((int) dim.getWidth() / 2) - (bi.getWidth() / 2);
h = ((int) dim.getHeight() / 2) - (bi.getHeight() / 2);
Rectangle newArea = new Rectangle(w, h, bi.getWidth(), bi.getHeight());

Area area = new Area();
area.add(oldArea);
area.add(newArea);

Rectangle updateArea = area.getBounds();
paintImmediately(updateArea); 
```

# url - 带有 sed 的特殊字符

> ID：12084634
> 
> 赞同：0
> 
> 时间：2012-08-23T04:12:44.800
> 
> 标签：url, sed, character

我正在尝试从 Web 链接中删除 URL

例如，我想把 [http://site.com/path/to/site.html](http://site.com/path/to/site.html)打印出来 'site.com' 或 'http://site.com'

这是我能想到的最接近的，但它不能正常工作：

```
echo "https://site.com/shisad/sadh" | sed -n "s/.*\(http.*\/\).*/\1/p" 
```

打印： [https ://site.com/shisad/](https://site.com/shisad/)

我认为这是我对特殊字符“/”做错了。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:26:33.987

1.  当您`sed`用于匹配路径名或其他包含斜杠的模式时，请使用斜杠以外的字符来分隔正则表达式；它使生活变得更轻松。

2.  `.*`模式是贪婪的；它匹配最长的字符串。你想要一个更受约束的表达式。

要打印出来`http://site.com`，您可以使用：

```
sed -n 's%.*\(https\{0,1\}://[^/]*\).*%\1%p' 
```

要打印出来`site.com`，您可以使用：

```
sed -n 's%.*https\{0,1\}://\([^/]*\)/.*%\1%p' 
```

如果您认为您的站点可能在主机名后没有斜杠（因此输入仅包含`http://site.com`），那么您可以使用：

```
sed -n -e 's%.*https\{0,1\}://\([^/]*\)/.*%\1%p' \
       -e 's%.*https\{0,1\}://\([^/]*\)$%\1%p' 
```

请注意，这些接受各种标点符号为“有效”；`[-a-zA-Z0-9_.]*`如果您希望使用，也许可以代替`[^/]*`- 但要注意国际化域名，您可以更具辨别力。两种模式版本不会在 URL 后的空白处停止；它将包括`(http://example.com)`. 这是关于哪些字符有效这一点的推论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T05:31:52.290

```
echo "https://site.com/shisad/sadh"|awk -F/ '{print $1"//"$2$3}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T05:26:46.863

我假设你正在使用`GNU sed`.

```
echo "https://site.com/shisad/sadh" | sed -r 's%.*(https://[^/]*).*%\1%'
https://site.com 
```

要仅获取域名，您可以简单地更改存储括号的位置：

```
echo "https://site.com/shisad/sadh" | sed -r 's%.*https://([^/]*).*%\1%'
site.com 
```

你当然可以用一个简单的 perl 做你想做的事`grep`：

```
echo "https://site.com/shisad/sadh" | grep -oP 'https://[^/]*'
https://site.com 
```

# oracle - 闪存安全设置冲突 - Oracle Apex

> ID：12084639
> 
> 赞同：1
> 
> 时间：2012-08-23T04:13:43.603
> 
> 标签：oracle, oracle-apex

我们使用 AnyChart 在我们的 Oracle APEX 应用程序中实现了图表功能。目前有一个内部 URL（从防火墙内部访问），APEX 应用程序和嵌入式图表功能可以正常工作。

我们有一个代理 URL（它指向内部 URL），从这个代理 URL 我们能够访问该网站，但在实施 AnyChart 的页面上出现 Flash 错误。错误是 -

> Flash 安全错误 AnyChart 由于 Flash 安全设置违规而无法启动 请参阅 AnyChart 文档中的安全错误文章以解决此问题 点击了解更多信息

根据 Flash 网站上的文档，我们创建了一个`crossdomain.xml`文件并将其放在服务器的根文件夹中。

但是，仍然会出现上述错误。

这对我们来说是一个非常危急的情况，因为网站必须在几天内上线。如果您能提供任何帮助、帮助或指导，我们将不胜感激

谢谢

游牧民族

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:44:24.240

请参阅此处的替代解决方案：http: [//oraclequirks.blogspot.com.au/2011/02/avoiding-flash-chart-security-warning.html](http://oraclequirks.blogspot.com.au/2011/02/avoiding-flash-chart-security-warning.html)

引：

> 我的解决方案是创建一个名为 BASE_URL 的应用程序项，它根据构建选项的设置使用正确的 URL 进行初始化。由于我已经习惯在所有应用程序中使用 PRODUCTION 构建选项来启用某些功能，例如访问者跟踪和谷歌广告，当它的状态包括在内时，我只是创建了几个相互排斥的应用程序计算，它们在“新实例上”运行并更新值当 PRODUCTION 的状态为 include 或 PL/SQL 表达式“http://”时，BASE_URL 的静态值为 [http://www.somedomain.com/apex ||](http://www.somedomain.com/apex) owa_util.get_cgi_env('HTTP_HOST') || owa_util.get_cgi_env('SCRIPT_NAME') || '/' 当状态为排除时。

# c++ - C++ 错误信息：无效指针

> ID：12084641
> 
> 赞同：0
> 
> 时间：2012-08-23T04:13:52.423
> 
> 标签：c++, pointers, runtime-error, memcpy

我有一个函数可以将一个字符串附加到另一个字符串：

```
char* strjoin(char* str1,const char* str2) {
  long len1 = strlen(str1);
  long len2 = strlen(str2);
  char* result = (char*)malloc(len1+len2+1);

  memcpy(result,str1,len1+1);
  memcpy(result+len1,str2,len2+1);

  free(str1); <--------- program crashes here with error: invalid pointer
  return result;
} 
```

调用上述函数的代码是这样的：

```
char* str = "John";
str = strjoin(str,"\x20");
str = strjoin(str,"Doe"); 
```

在上面的函数 strjoin 中，我为新字符串分配了内存，所以我释放了旧的 str1。为什么 str1 指针无效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T04:15:39.947

在`join`您的第一次调用中，将一个指向字符串文字的指针（它是只读的）传递给`free`. `free`除非您分配了正在释放的内存，否则您不应该调用。

您可以使用以下方法在调用者中修复此问题`strdup`：

```
char* str = strdup("John");
str = strjoin(str,"\x20");
str = strjoin(str,"Doe"); 
```

# powershell - PowerShell获取大（大）文件的行数

> ID：12084642
> 
> 赞同：45
> 
> 时间：2012-08-23T04:13:53.273
> 
> 标签：powershell, line

从文件中获取行数的方法之一是 PowerShell 中的此方法：

```
PS C:\Users\Pranav\Desktop\PS_Test_Scripts> $a=Get-Content .\sub.ps1
PS C:\Users\Pranav\Desktop\PS_Test_Scripts> $a.count
34
PS C:\Users\Pranav\Desktop\PS_Test_Scripts> 
```

但是，当我有一个 800 MB 的大文本文件时，如何在不读取整个文件的情况下从中获取行号？

上述方法会消耗过多的 RAM，导致脚本崩溃或完成时间过长。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-23T04:50:03.600

用于`Get-Content -Read $nLinesAtTime`逐部分读取文件：

```
$nlines = 0;

# Read file by 1000 lines at a time
gc $YOURFILE -read 1000 | % { $nlines += $_.Length };
[string]::Format("{0} has {1} lines", $YOURFILE, $nlines) 
```

这是一个简单但缓慢的脚本来验证一个小文件的工作：

```
gc $YOURFILE | Measure-Object -Line 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-12-13T20:21:07.060

这是我拼凑在一起的 PowerShell 脚本，它演示了几种计算文本文件中行数的不同方法，以及每种方法所需的时间和内存。结果（如下）显示了时间和内存要求的明显差异。对于我的测试，看起来最佳点是 Get-Content，使用 ReadCount 设置为 100。其他测试需要更多的时间和/或内存使用。

```
#$testFile = 'C:\test_small.csv' # 245 lines, 150 KB
#$testFile = 'C:\test_medium.csv' # 95,365 lines, 104 MB
$testFile = 'C:\test_large.csv' # 285,776 lines, 308 MB

# Using ArrayList just because they are faster than Powershell arrays, for some operations with large arrays.
$results = New-Object System.Collections.ArrayList

function AddResult {
param( [string] $sMethod, [string] $iCount )
    $result = New-Object -TypeName PSObject -Property @{
        "Method" = $sMethod
        "Count" = $iCount
        "Elapsed Time" = ((Get-Date) - $dtStart)
        "Memory Total" = [System.Math]::Round((GetMemoryUsage)/1mb, 1)
        "Memory Delta" = [System.Math]::Round(((GetMemoryUsage) - $dMemStart)/1mb, 1)
    }
    [void]$results.Add($result)
    Write-Output "$sMethod : $count"
    [System.GC]::Collect()
}

function GetMemoryUsage {
    # return ((Get-Process -Id $pid).PrivateMemorySize)
    return ([System.GC]::GetTotalMemory($false))
}

# Get-Content -ReadCount 1
[System.GC]::Collect()
$dMemStart = GetMemoryUsage
$dtStart = Get-Date
$count = 0
Get-Content -Path $testFile -ReadCount 1 |% { $count++ }
AddResult "Get-Content -ReadCount 1" $count

# Get-Content -ReadCount 10,100,1000,0
# Note: ReadCount = 1 returns a string.  Any other value returns an array of strings.
# Thus, the Count property only applies when ReadCount is not 1.
@(10,100,1000,0) |% {
    $dMemStart = GetMemoryUsage
    $dtStart = Get-Date
    $count = 0
    Get-Content -Path $testFile -ReadCount $_ |% { $count += $_.Count }
    AddResult "Get-Content -ReadCount $_" $count
}

# Get-Content | Measure-Object
$dMemStart = GetMemoryUsage
$dtStart = Get-Date
$count = (Get-Content -Path $testFile -ReadCount 1 | Measure-Object -line).Lines
AddResult "Get-Content -ReadCount 1 | Measure-Object" $count

# Get-Content.Count
$dMemStart = GetMemoryUsage
$dtStart = Get-Date
$count = (Get-Content -Path $testFile -ReadCount 1).Count
AddResult "Get-Content.Count" $count

# StreamReader.ReadLine
$dMemStart = GetMemoryUsage
$dtStart = Get-Date
$count = 0
# Use this constructor to avoid file access errors, like Get-Content does.
$stream = New-Object -TypeName System.IO.FileStream(
    $testFile,
    [System.IO.FileMode]::Open,
    [System.IO.FileAccess]::Read,
    [System.IO.FileShare]::ReadWrite)
if ($stream) {
    $reader = New-Object IO.StreamReader $stream
    if ($reader) {
        while(-not ($reader.EndOfStream)) { [void]$reader.ReadLine(); $count++ }
        $reader.Close()
    }
    $stream.Close()
}

AddResult "StreamReader.ReadLine" $count

$results | Select Method, Count, "Elapsed Time", "Memory Total", "Memory Delta" | ft -auto | Write-Output 
```

以下是包含 ~95k 行、104 MB 的文本文件的结果：

```
Method                                    Count Elapsed Time     Memory Total Memory Delta
------                                    ----- ------------     ------------ ------------
Get-Content -ReadCount 1                  95365 00:00:11.1451841         45.8          0.2
Get-Content -ReadCount 10                 95365 00:00:02.9015023         47.3          1.7
Get-Content -ReadCount 100                95365 00:00:01.4522507         59.9         14.3
Get-Content -ReadCount 1000               95365 00:00:01.1539634         75.4         29.7
Get-Content -ReadCount 0                  95365 00:00:01.3888746          346        300.4
Get-Content -ReadCount 1 | Measure-Object 95365 00:00:08.6867159         46.2          0.6
Get-Content.Count                         95365 00:00:03.0574433        465.8        420.1
StreamReader.ReadLine                     95365 00:00:02.5740262         46.2          0.6 
```

以下是较大文件（包含 ~285k 行，308 MB）的结果：

```
Method                                    Count  Elapsed Time     Memory Total Memory Delta
------                                    -----  ------------     ------------ ------------
Get-Content -ReadCount 1                  285776 00:00:36.2280995         46.3          0.8
Get-Content -ReadCount 10                 285776 00:00:06.3486006         46.3          0.7
Get-Content -ReadCount 100                285776 00:00:03.1590055         55.1          9.5
Get-Content -ReadCount 1000               285776 00:00:02.8381262         88.1         42.4
Get-Content -ReadCount 0                  285776 00:00:29.4240734        894.5        848.8
Get-Content -ReadCount 1 | Measure-Object 285776 00:00:32.7905971         46.5          0.9
Get-Content.Count                         285776 00:00:28.4504388       1219.8       1174.2
StreamReader.ReadLine                     285776 00:00:20.4495721           46          0.4 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-06-16T10:00:38.513

这是基于 Pseudothink 帖子的单行代码。

**一个特定文件中的行：**

```
"the_name_of_your_file.txt" |% {$n = $_; $c = 0; Get-Content -Path $_ -ReadCount 1000 |% { $c += $_.Count }; "$n; $c"} 
```

**当前目录中的所有文件（单独）：**

```
Get-ChildItem "." |% {$n = $_; $c = 0; Get-Content -Path $_ -ReadCount 1000 |% { $c += $_.Count }; "$n; $c"} 
```

**解释：**

`"the_name_of_your_file.txt"`-> 什么都不做，只为下一步提供文件名，需要双引号
`|%`-> 别名 ForEach-Object，迭代提供的项目（在这种情况下只有一个），接受管道内容作为输入，当前项目保存到`$_`
`$n = $_`-> $n 作为提供的文件的名称保存以供以后使用`$_`，*实际上这可能不需要*
`$c = 0`-> 初始化`$c`为计数
`Get-Content -Path $_ -ReadCount 1000`-> 从提供的文件中读取 1000 行（参见线程的其他答案）
`|%`-> foreach 添加行数实际读取到`$c`（将像 1000 + 1000 + 123）
`"$n; $c"`-> 一旦完成读取文件，打印*文件名；行数*
`Get-ChildItem "."`-> 只是向管道添加的项目比单个文件名多

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-08-23T05:04:56.773

The first thing to try is to stream `Get-Content` and build up the line count one at a time, rather that storing all lines in an array at once. I think that this will give proper streaming behavior - i.e. the entire file will not be in memory at once, just the current line.

```
$lines = 0
Get-Content .\File.txt |%{ $lines++ } 
```

And as the other answer suggests, adding `-ReadCount` could speed this up.

If that doesn't work for you (too slow or too much memory) you could go directly to a `StreamReader`:

```
$count = 0
$reader = New-Object IO.StreamReader 'c:\logs\MyLog.txt'
while($reader.ReadLine() -ne $null){ $count++ }
$reader.Close()  # Don't forget to do this. Ideally put this in a try/finally block to make sure it happens. 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-10-02T20:55:50.773

这是另一个使用 .NET 的解决方案：

```
[Linq.Enumerable]::Count([System.IO.File]::ReadLines("FileToCount.txt")) 
```

它不是很容易中断，但很容易记忆。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-02-27T17:52:54.750

对于我的一些大文件 (GB+)，**SWITCH**在内存上更快更容易。

注意：以下时间以分钟：秒为单位。测试的文件有 14,564,836 行，每行 906 个字符长。

```
1:27 SWITCH
$count = 0; switch -File $filepath { default { ++$count } } 
```

```
1:39 IO.StreamReader
$reader = New-Object IO.StreamReader $filepath
while($reader.ReadLine() -ne $null){ $count++ } 
```

```
1:42 Linq
$count = [Linq.Enumerable]::Count([System.IO.File]::ReadLines($filepath)) 
```

```
1:46 Get-Content based
$filepath |% {$file_line_count = 0; Get-Content -Path $_ -ReadCount 1000 |% { $file_line_count += $_.Count }} 
```

如果您对发现更快的任何方法或其他方法进行了优化，请分享。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-22T14:59:38.953

这是我在解析 txt 文件中的空白时尝试减少内存使用的内容。话虽如此，内存使用率仍然很高，但该过程需要更少的时间来运行。

只是为了给你一些我的文件的背景，该文件有超过 200 万条记录，并且在每行的前后都有前导空白。我相信总时间是 5 分钟以上。

```
$testing = 'C:\Users\something\something\test3.txt'

$filecleanup =  Get-ChildItem $testing

foreach ($file in $filecleanup)
{ 
    $file1 = Get-Content $file -readcount 1000 | foreach{$_.Trim()}
    $file1 > $filecleanup
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-15T12:05:18.893

MS DOS 命令[FIND](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/find)： `$fileName = 'C:\dirname\filename.txt'`
`CMD /C ('find /v /c "" "' + $fileName + '"')`
可以在[文档](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/find)中找到 find 命令的其他变体。

# ruby-on-rails - Twitter bootstrap datepicker在rails中不起作用

> ID：12084644
> 
> 赞同：-4
> 
> 时间：2012-08-23T04:14:04.023
> 
> 标签：ruby-on-rails, ruby, twitter-bootstrap

我下载了 bootstrap-datepicker.js 并将其包含在我的应用程序 .js 文件中。它在视图中不起作用

```
 <div class="well">
<div id="dp5" class="input-append date" data-date-format="dd-mm-yyyy" data-date="12-02-2012">
<input class="span2" type="dp5" readonly="" value="12-02-2012" size="16">
<span class="add-on">
<i class="icon-th"></i>
</span>
</div> 
```

它不显示日期的日历。我哪里错了？

我的 application.js 文件是

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require bootstrap-datepicker

//= require picker
//= require_tree .

$('#dp5').datepicker() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T05:44:29.793

添加`//= require_self`到 application.js

这也包括它自己的文件内容。这必须明确地完成。

还要保持 application.js 的格式

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require bootstrap-datepicker
//= require picker
//= require_tree .
//= require_self

$(function() {
   $('#dp5').datepicker()
 });

// Do not keep bank spaces between included files. 
```

我建议创建一个新的 js 文件并在其中添加内容，然后将其包含在 application.js

将 application.js 保留为索引文件

# python - 进行联接时如何更改 SqlSoup / SqlAlchemy 中的 FROM 子句？

> ID：12084646
> 
> 赞同：0
> 
> 时间：2012-08-23T04:14:30.153
> 
> 标签：python, sqlalchemy, sqlsoup

我希望能够进行联接并从结果中的两个表中取回特定字段。

我正在执行以下操作：

```
from sqlalchemy import or_, and_, desc
from sqlalchemy.ext.sqlsoup import SqlSoup

db = SqlSoup('mysql://localhost/mydb')

join = (db.table_B, db.table_B.id==db.table_A.id)

query = db.table_A.join(join)

for entry in query:
    print entry 
```

对于每个结果， 都`entry`包含 的所有字段，`table_B`并且不给我任何 的字段`table_A`。我意识到默认情况下会发生这种情况，因为字段名称不明确。但是，我想手动指定 FROM 子句来覆盖此行为。我查看了文档，更改 FROM 子句似乎并非易事。我无法成功地做到这一点。

如果有人可以建议我可以对上面的代码进行正确的修改，以便能够`entry.my_col`在.`my_col``table_A`

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T04:59:42.020

好的，我想通了。问题是我正在查看 SqlAlchemy 文档，而我确实需要 SqlSoup 文档。

我在这里找到了一个很好的连接示例：http: [//docs.sqlalchemy.org/en/rel_0_7/orm/extensions/sqlsoup.html](http://docs.sqlalchemy.org/en/rel_0_7/orm/extensions/sqlsoup.html)

当我尝试按照示例中的描述进行操作时，我会得到我需要的所有字段。

# iphone - 为什么只有一个视图引脚注释显示？

> ID：12084657
> 
> 赞同：0
> 
> 时间：2012-08-23T04:15:37.503
> 
> 标签：iphone, annotations, mapkit

我正在使用以下代码，它在地图视图上仅显示一个图钉（注释）。请帮我找出我的错误。

```
- (void)mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views
    {
        //Here

        NSLog(@"didAddAnnotationViews");

        [self.mapView selectAnnotation:[[self.mapView annotations] objectAtIndex:0] animated:NO];
        [self.mapView selectAnnotation:[[self.mapView annotations] objectAtIndex:1] animated:NO];
        [self.mapView selectAnnotation:[[self.mapView annotations] objectAtIndex:2] animated:NO];
        [self.mapView selectAnnotation:[[self.mapView annotations] objectAtIndex:3] animated:NO];

          } 
```

为什么只有一个视图引脚注释显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:39:50.473

看看这个[样本](http://mayurbirari.wordpress.com/2011/02/07/how-to-access-mkmapkit-in-iphone/)。甚至有示例代码。它可能对您正在寻找的内容有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:35:49.723

请访问[MKMapView 中的](https://stackoverflow.com/questions/2417952/multiple-annotation-callouts-displaying-in-mkmapview)多个注释标注：在 MKMapView 中显示多个注释标注

您似乎必须为此行为实施自定义标注。我个人喜欢实现 MKAnnotationView 的子类来实现自定义。

# primefaces - Primefaces dataTable 分页与选项卡视图一起不起作用

> ID：12084662
> 
> 赞同：1
> 
> 时间：2012-08-23T04:16:20.907
> 
> 标签：primefaces, pagination, tabview

我正在使用 JSF 2.0 primefaces。我在选项卡视图中使用启用分页的数据表。有 2 个选项卡。分页在默认选项卡中工作正常。但是在另一个选项卡中，在选择每页行数下拉值时，它会显示“未找到记录”。我调试了一下，发现所有生命周期阶段都执行了，没有碰到 LazyDataModel 的 load 方法。请帮助尽早解决此问题。

# java - weblogic 服务器发布失败

> ID：12084664
> 
> 赞同：2
> 
> 时间：2012-08-23T04:16:28.060
> 
> 标签：java, jakarta-ee, webserver

当我启动我的 weblogic 服务器时，尽管服务器启动它总是无法发布，下面是从错误日志中找到的异常跟踪。

```
org.eclipse.core.runtime.CoreException: Module named '_auto_generated_ear_' failed to deploy. See Error Log view for more detail.
    at oracle.eclipse.tools.weblogic.server.internal.WlsJ2EEDeploymentHelper.deployAutoGenerateEarApplication(WlsJ2EEDeploymentHelper.java:783)
    at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publishWeblogicModules(WeblogicServerBehaviour.java:1433)
    at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publishToServer(WeblogicServerBehaviour.java:896)
    at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publishOnce(WeblogicServerBehaviour.java:677)
    at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publish(WeblogicServerBehaviour.java:530)
    at org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish(ServerBehaviourDelegate.java:774)
    at org.eclipse.wst.server.core.internal.Server.publishImpl(Server.java:3029)
    at org.eclipse.wst.server.core.internal.Server$PublishJob.run(Server.java:341)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Contains: Deployment operation was not completed within timeout. State Type : running; Command Type : distribute; Action Type  : execute; Completed  : false; Failed : false; Message : null; Exception : null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:21:27.467

当缺少所需的罐子时，我遇到了这个问题。请重新检查您的依赖项是否正确捆绑。如果没有，请尝试查看 eclipse 日志文件以获取更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-05T22:20:21.063

当我的 web.xml 文件找不到我的 servlet 时，我遇到了类似的异常。我更改了 servlet 所在的包名称，并且 web.xml 文件没有更新。

# iphone - 如何更改uitableviewcell的宽度

> ID：12084666
> 
> 赞同：0
> 
> 时间：2012-08-23T04:16:42.403
> 
> 标签：iphone, ios, uitableview, subview

我正在将一个 uitableview 单元格作为子视图添加到 UIView 中，这也是 ViewController 视图的子视图。但由于某种原因，当我将 UITableViewCell 初始化为更小的东西时，它仍会在屏幕上拉伸 320 像素。

即使我将视图的子视图缩小，它仍然保持 320 像素宽。我想知道它是否是层次结构问题？我觉得我的代码是正确的，但也许我只是遗漏了一些小东西......

```
//..
 // This UIView holds both custom UITableViewCell and UIButton and is placed at the top of the current UIView
    cellContainer = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 200.0, 44.0)];
    cellContainer.backgroundColor = [UIColor greenColor];

    // Select all UITableViewCell
    selectAllCell = [[UITableViewCell alloc] initWithFrame:CGRectMake(0.0, 0.0, 100.0, 7.0)];
    selectAllCell.textLabel.text = @"Select all"; // Set text
//    selectAllCell.accessoryType = UITableViewCellAccessoryCheckmark;
    selectAllCell.backgroundColor = [UIColor redColor]; // set bg color

    // Create non visible UIButton that sits over customTableviwecell wich allows you to set a selctor on the button press
    UIButton *selectAllButton = [[UIButton alloc] initWithFrame:CGRectMake(0.0, 0.0, 200.0, 50.0)];
    [selectAllButton addTarget:self action:@selector(selectAll:) forControlEvents:UIControlEventTouchUpInside];

    // Add custom Cell and UIButton to cellContainer view
    [cellContainer addSubview:selectAllCell];
    [cellContainer insertSubview:selectAllButton aboveSubview:selectAllCell];
    // Ass cellContainer to self.view
    [self.view insertSubview:cellContainer atIndex:1];
//.. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:25:15.910

不幸的是，没有办法直接改变 a 的宽度`UITableViewCell`：它们将占据 的宽度`UITableView`，并且默认情况下，表格视图将占据屏幕的整个宽度。使单元格宽度变小的唯一方法是通过更改其框架宽度来使表格视图本身变小。

# heroku - Heroku 和静态 HTML

> ID：12084667
> 
> 赞同：0
> 
> 时间：2012-08-23T04:16:48.083
> 
> 标签：heroku

如果我运行一个包含大量静态 HTML 代码 + JSON 数据的网站，那么有没有办法让 heroku 直接提供 HTML 文件而无需使用它的机架堆栈？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:20:49.077

不，那里没有。两种常见的选择是：

1.  使用 Rack::Cache 加快访问时间
2.  在 S3 上托管文件并提供到 S3 URL 的重定向。

# performance - 从 Charles 调试代理了解时序值

> ID：12084674
> 
> 赞同：6
> 
> 时间：2012-08-23T04:17:48.253
> 
> 标签：performance, http, charles-proxy

![在此处输入图像描述](../Images/f461df505360b89d8dac1e8d76d05fc3.png)

Charles 的这张图片显示了一些非常有趣的信息：

*   期间
*   请求时长
*   响应时间
*   潜伏

我想更好地理解这些术语的实际含义。

即，查尔斯如何测量请求持续时间？（在 HTTP 事务的过程中，这是从何时到何时的时间？）对于响应也是如此。

另外，`request + response != Duration`. 剩余的服务器端处理时间？

延迟是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:24:02.887

从[文档](http://www.charlesproxy.com/documentation/using-charles/chart/)中：

> *   请求 - 发送（上传）请求所花费的时间（深蓝色）
> *   延迟 - 在服务器上等待网络延迟或处理时间所花费的时间（中蓝色）
> *   响应 - 接收（下载）响应所花费的时间（浅蓝色）

# python - 无法弄清楚 for 循环

> ID：12084677
> 
> 赞同：1
> 
> 时间：2012-08-23T04:18:17.267
> 
> 标签：python, for-loop, python-3.x

我正在尝试创建一个秘密编码程序，但在使用 for 循环时遇到了问题（我从来没有真正理解过它们）。这是我到目前为止所要做的，我试图让用户输入，将用户文本的每个单词转换为编码文本，所以如果有人输入“hello”，它将变成“vpyyl”。有人可以帮忙吗？这甚至可能吗？

这是我到目前为止所拥有的，它给出了一个错误“列表索引必须是整数，而不是 str”。我很确定 for 循环也设置错误。

```
import random

list = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']
codedList = ['s', 'q', 'n', 'z', 'p', 'o', 'k', 'v', 'm', 'c', 'i', 'y', 'w', 'a', 'l', 't', 'd', 'r', 'j', 'b', 'f', 'e', 'h', 'u', 'x', 'g']

text = input("Enter your text: ")

for i in [text]:
    i = codedList[i]
    print[i] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T04:23:58.593

中只有一项`[text]`：用户输入的整个字符串。您可能希望`for i in text:`将 which 设置`i`为字符串的每个字符。

此外，您已经命名了一个列表`list`（这意味着您无法访问内置名称`list`）。当您尝试使用字符串访问元素时，列表由整数索引。您可能希望为此使用字典，将每个字母映射到其编码等效项。

其他几个问题是您没有任何代码来处理输入字母以外的内容（空格、标点符号）并且字母都是小写的情况。最后，您在`print`调用中使用方括号而不是括号，并且您没有抑制换行符。

所以：

```
code = dict(a='s', b='q', c='n', d='z', e='p', f='o', g='k', h='v', i='m', j='c',
            k='i', l='y', m='w', n='a', o='l', p='t', q='d', r='r', s='j', t='b',
            u='f', v='e', w='h', x='u', y='x', z='g')

# another way to define the dictionary (you don't need both)
alphabet      = "abcdefghijklmnopqrstuvwxyz"
codedalphabet = "sqnzpokvmciywaltdrjbfehuxg"
code          = dict(zip(alphabet, codedalphabet))

# add upper-case versions of all letters to dictionary
for letter, codedletter in code.iteritems():
    code[letter.upper()] = codedletter.upper()

for char in input("Enter your text: "):
    if char in code:
        print(code[char], end="")
    else:
        print(char, end="")    # not an alphabetic character, print as-is
print()                        # we haven't printed a line break; do so now 
```

正如其他人所指出的，Python 中内置了一些东西可以使这变得微不足道，但是如果您遇到`for`循环问题，那将无助于您学习。:-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T07:31:35.427

在 Python 中，在开始编程之前，请检查是否有一个内置函数可以做同样的事情。有 90% 的可能性。

```
chars = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']
coded = ['s', 'q', 'n', 'z', 'p', 'o', 'k', 'v', 'm', 'c', 'i', 'y', 'w', 'a', 'l', 't', 'd', 'r', 'j', 'b', 'f', 'e', 'h', 'u', 'x', 'g']

table = str.maketrans(chars, coded)
coded_text = text.translate(table)

print (coded_text) 
```

文档： [翻译](http://docs.python.org/py3k/library/stdtypes.html?#str.translate)| [制作翻译](http://docs.python.org/py3k/library/stdtypes.html?#str.maketrans)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T04:21:25.727

```
for i in [text]: 
```

应该

```
for i in text: 
```

在你的`i`情况下是用户输入的字符串的一个字符。

它应该是一个整数作为索引

你打算的代码应该像..

注意：我使用 raw_input 而不是 input，因为 input 会尝试`eval`用户输入，你最终会`NameError`出现错误

```
In [214]: import random

In [215]: mylist = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']

In [216]: codedList = ['s', 'q', 'n', 'z', 'p', 'o', 'k', 'v', 'm', 'c', 'i', 'y', 'w', 'a', 'l', 't', 'd', 'r', 'j', 'b', 'f', 'e', 'h', 'u', 'x', 'g']

In [217]: text = raw_input("Enter your text: ")
Enter your text: hello

In [218]: str = []

In [219]: for i in text:
   .....:     j = mylist.index(i)
   .....:     str.append(codedList[j])
   .....:

In [220]: ''.join(str)
Out[220]: 'vpyyl' 
```

至于`for loop`, text 包含单词 'hello'，这里的 for 循环将迭代文本中的每个字符，即第一次迭代将超过 'h'，然后是 'e' 等等。

列表的名称不应该是`list`，因为这个名称是 python 中的关键字

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-23T04:24:05.320

有许多不同的方法可以完成您正在尝试做的事情。但专注于您已经开始的内容和您当前的代码（为了可读性/清晰度而更改了一些标识符），然后给出：

```
clearList = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']
codedList = ['s', 'q', 'n', 'z', 'p', 'o', 'k', 'v', 'm', 'c', 'i', 'y', 'w', 'a', 'l', 't', 'd', 'r', 'j', 'b', 'f', 'e', 'h', 'u', 'x', 'g']

text = input("Enter your text: ") 
```

您的`for`-loop 应如下所示：

```
for letter in text:            # iterate over the text not [text]
   idx = clearList.index(letter)  # find the index for the given letter in clearList
   print(codedList[idx], end="")  # get the corresponding coded letter with the index 
```

并导致`vpyyl`.

***注意****，将list*作为标识符并不是一个好主意`letter`我还为您的输入使用了更具描述性的标识符

--

既然您提到了`for`-loops 的问题，这里有两个教程供您参考：来自 Python [Wiki](http://wiki.python.org/moin/ForLoop)和这种形式的[tutorialspoint](http://www.tutorialspoint.com/python/python_for_loop.htm)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T04:23:15.813

两个问题：

1.  您同时`i`用作迭代变量并保存编码值。这是无害的，但不好的做法。
2.  您正在迭代一个包含文本作为其一个元素的单元素数组。删除`[]`周围`text`：

    ```
    for i in text:
        print codedList[i] 
    ```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-23T04:30:46.387

我认为您正在尝试用另一个字母对您的字符串进行编码。

在您的代码中，

```
for i in [text]:
    i = codedList[i]
    print[i] 
```

您应该通过 .index() 在原始列表中找到“i”的索引。一个可行的修订代码如下。

```
for i in text:
    index = list.index(i)
    i = codedList[index]
    print [i] 
```

# printers - 如何在 Win 7 64 位机器中重命名 gDoc 打印机

> ID：12084679
> 
> 赞同：0
> 
> 时间：2012-08-23T04:18:21.380
> 
> 标签：printers

我已经安装了一个名为 gDoc Creator 的打印机，用于在我的 Windows 7 64 位机器上打印。如果我将打印机重命名为“gDoc Creator”以外的任何名称，当我选择它进行打印时，打印机将无法识别。它只是变得完全死了。它仅适用于给定的名称。我想知道如何重命名打印机并使其成功运行。我已经尝试在 .inf 文件中重命名，但我还没有找到解决方案。感谢大家的帮助，感谢您的回复，如果需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:22:50.337

If renaming the printer causes it to stop working, the driver must have that name hard-coded and depends on it never being changed. That's a seriously broken printer driver if it actually cares what the printer name is and doesn't allow that name to be changed. You can confirm that by opening the driver's two DLLs with a hex editor and looking for the string "gDoc Creator." If it is as I suspect, there's nothing you can do short of patching the DLL, and frankly that's just not worth it. There are many PDF/Office conversion tools out there. I recommend you find a better one.

# php - 回显数据库中的行

> ID：12084681
> 
> 赞同：0
> 
> 时间：2012-08-23T04:18:29.983
> 
> 标签：php, mysql

```
 <?php
         $conn= new mysqli("localhost", "my_user", "my_password", "world"); //changed for the sake of this question

        $query = "select * from user;";
        $result = $conn->query($query);
        while ($row = $result->fetch_assoc()) {
        echo '<dt>';
        foreach($row as $field) {
            echo'<dd>'.$row['FirstName'].'</dd>';
        }
        echo '</dt>';
    }
?> 
```

我只是想在数据库 atm 中回显一列，它似乎没有显示任何内容。我想知道是否有人可以帮助我？我收到这个错误

> [23-Aug-2012 16:14:04] PHP 致命错误：在第 51 行 -bash-3.2$ 上的 /devel/cgreenheld/projects/Asgn1final/admin.php 中的非对象上调用成员函数 fetch_assoc()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T04:21:54.717

尝试：

```
$conn= new mysqli("localhost", "my_user", "my_password", "world");
$query = "select * from user";
$result = $conn->query($query);
echo '<dt>';
while ($row = $result->fetch_assoc()) {
    echo '<dd>'.$row['FirstName'].'</dd>';
}
echo '</dt>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:22:22.950

首先，你不需要“;” 在您的查询中。其次，我认为您必须确保您的数据库连接处于活动状态并且查询返回任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T04:25:09.140

尝试连接和查询..

```
$conn = new mysqli("localhost", "my_user", "my_password", "world");

if (mysqli_connect_errno()) {
    echo "Connect failed: ".mysqli_connect_error()."\n";
    exit();
}

$query = "SELECT * FROM `user`";
if ($result = $mysqli->query($query)) {
    echo '<dt>';
    while ($row = $result->fetch_assoc()) {
        echo'<dd>'.$row['FirstName'].'</dd>';
    }
    echo '</dt>';
    $result->free();
} else {
    echo $mysqli->error;
}
$mysqli->close(); 
```

# sql - 用触发器求和

> ID：12084684
> 
> 赞同：-1
> 
> 时间：2012-08-23T04:18:46.337
> 
> 标签：sql, sql-server-2005

有3张表：

```
Suppl, fields: (Code_name,  Tasknum, Pki_num, Group_eng, Name, Descr, Cost, Quan, shop)
Maker, fields : (Code_maker, Code_maker_arch, Code_name, provider)
Arrival, fields: (Code_arr, Code_maker, quan_arr) 
```

我需要获取一个表（用于导出到 Excel），例如 update_501（Group_eng，Name，Descr，quan_arr），其中将包含 group_eng_501 的唯一“Descr”。字段“quan_arr”需要为每个唯一的“Descr”保留来自表 Arrival.quan_arr 的字段总和。

第一的：

```
Insert dbo.update_501(Group_eng, Name, Descr)
select Group_eng, Name, Descr
from Suppl
where (Group_eng = 501)
group by Group_eng, Name, Descr 
```

then: 触发器，它为 update_501 添加一个唯一的“descr”

```
ALTER trigger [update_pki_501] ON [dbo].[Suppl]
After Insert
as
begin
Set nocount on;
if (not(exists(select * from [INSERTED])))
return;

Insert dbo.update_501(Group_eng, Name, Descr)
select I.Name
      ,I.Descr
      ,I.Group_eng
from Inserted I
where (I.Group_eng = 501)
 and not exists(select * from dbo.update_501 x where x.Group_eng=I.Group_eng and x.Descr = I.Descr) 
end 
```

请帮助在来自 Arrival.quan_arr 的 update_501.quan_arr 中添加（和求和）触发器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:56:02.957

我很好奇为什么您不想在插入表时计算总和，因为您的触发器仅用于插入。

大概你可以

```
INSERT update_501 (Group_eng, Name, Descr, quan_arr) 
SELECT s.Group_eng, s.Name, s.Descr, Sum(a.Quan_Arr) 
FROM   Suppl s
  JOIN Maker m ON s.Code_Name = m.Code_Name
  JOIN Arrival a ON m.Code_Maker = a.Code_Maker
WHERE  --  if a where clause is needed  
GROUP BY s.Group_eng, s.Name, s.Descr
--HAVING --if a having clause is appropriate 
```

插入后，如果您想在插入新的 Arrival 时对其进行更新，那么您需要 Arrival 表的插入触发器，如下所示：

```
CREATE TRIGGER trg_Arrival_update_501 ON dbo.Arrival
AFTER INSERT
AS Begin
  Set nocount on;
  if (not(exists(select * from Inserted)))
    return;

  DECLARE @Group_eng  <datatype>, 
          @Name       <datatype?, 
          @Descr      <datatype>;
  DECLARE @tbl        table (
    Group_Eng         <datatype>,
    Name              <datatype>,
    Descr             <datatype>
  );

  INSERT @tbl
  SELECT s.Group_Eng, s.Name, s.Descr
  FROM   Suppl s
    JOIN Maker m ON s.Code_Name = m.Code_Name
    JOIN Inserted i ON m.Code_Maker = i.Code_Maker;

  UPDATE u
  SET    quan_arr = newTotal.quan_sum
  FROM   update_501 u
      JOIN @tbl t ON u.Group_Eng = t.Group_Eng AND u.Name = t.Name AND u.Descr = t.Descr
      JOIN Suppl s    ON u.Group_Eng = s.Group_Eng
      JOIN (
          SELECT m.Code_Name, Sum(a.quan_arr) as quan_sum
          FROM   Maker m JOIN Arrival a ON m.Code_Maker = a.Code_Maker
          ) newTotal;
END 
```

注意：我可能误解了您的表之间的连接。如果您将表结构转换为问题中易于理解的命名，它将帮助您获得更好的答案。例如

```
Suppl (Suppl_ID, ...)
Maker (Maker_ID, ..., Suppl_ID)
etc 
```

# facebook - 为什么 facebook 看不到我所有的图片？

> ID：12084685
> 
> 赞同：0
> 
> 时间：2012-08-23T04:18:49.580
> 
> 标签：facebook, image, hyperlink

我已经为客户完成了一个快速网站。她想知道为什么在分享到 Facebook 的链接时不能从所有图片中进行选择。我环顾四周，在图像的 HTTP 标头中发现了一些关于 404 错误的内容。我检查了这些，一切似乎都很好。有任何想法吗？

[http://www.jesseleedenning.com](http://www.jesseleedenning.com)（NSFW，她是模特）

[https://developers.facebook.com/tools/debug/og/object?q=jesseleedenning.com](https://developers.facebook.com/tools/debug/og/object?q=jesseleedenning.com)

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:17:49.230

是的 Facebook 元标记，这可能会对您有所帮助

[http://developers.facebook.com/tools/debug/og/object?q=developers.facebook.com](http://developers.facebook.com/tools/debug/og/object?q=developers.facebook.com)

```
<meta property="fb:app_id" content="113869198637480" />
<meta property="og:title" content="Facebook Developers" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://developers.facebook.com/" />
<meta property="og:image" content="http://static.ak.fbcdn.net/rsrc.php/v2/yA/r/rwsSMfAU1li.png" /> 
```

# php - PHP 中报告了多个漏洞

> ID：12084693
> 
> 赞同：1
> 
> 时间：2012-08-23T04:20:03.883
> 
> 标签：php

我正在管理我公司的所有 PHP 项目。我收到安全报告说

> 1.  PHP _php_stream_scandir() 函数 - 任意代码执行漏洞 (CVE-2012-2688) 该漏洞是由位于“main/streams/streams.c”中的 _php_stream_scandir() 函数中的错误引起的。攻击者可以触发 _php_stream_scandir() 函数中的溢出来执行任意代码。
>     
>     
> 2.  PHP SQLite - 绕过限制漏洞 (CVE-2012-3365) 此漏洞是由 SQLite 中的一个错误导致的，该漏洞绕过 open_basedir 保护机制，远程攻击者可以利用该机制使易受攻击的服务器崩溃，从而造成拒绝服务条件。注意：此漏洞不影响 PHP 5.4.x 版本

所以他们告诉我们将所有系统升级到 5.4.5。以上几点是不是对项目的影响太大了还是应该继续下去就好了。因为我没有了解他们正在谈论的漏洞。

# html - 无法使任何平滑滚动脚本正常工作

> ID：12084694
> 
> 赞同：0
> 
> 时间：2012-08-23T04:20:20.320
> 
> 标签：html, scroll, smooth

我现在已经在我的网站上尝试了大约 6 种不同的“平滑滚动”脚本，但它们都没有做任何事情。

我拥有的是一个单页作品集（尚未完成），顶部有三个链接，使用命名锚链接到页面的各个部分。当您单击顶部链接之一时，我希望它平滑地滚动到该部分，以便您可以看到它滚动过它经过的所有内容。

我尝试了一些在谷歌上找到的脚本，还有一些是 wordpress 插件，但它们都没有做任何事情。我究竟做错了什么？现在，如果您查看我的网站，我目前包含两个脚本，但都没有工作。一个是 wordpress 插件，另一个是从 Google 找到的一小段代码。

www.johnwhancock.com（请注意，此时仅设置了投资组合链接）

我尝试过的一些脚本（不记得第一个是什么）是：

*   “Easy Smooth Scroll Links” wordpress 插件（目前处于活动状态），
*   “页面滚动到 id”插件
*   [http://www.codingforums.com/showpost.php?s=2a9d6c624c48b13a2bc824af5e44bfb5&p=208163&postcount=2](http://www.codingforums.com/showpost.php?s=2a9d6c624c48b13a2bc824af5e44bfb5&p=208163&postcount=2)上显示的简短脚本
*   这个脚本：[http ://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizo​​ntal-page-scrolling-with-jquery/](http://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizontal-page-scrolling-with-jquery/)

还有一些我没有链接了。他们都没有工作。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:46:14.717

到目前为止，您还不清楚自己尝试了什么。如果您通过谷歌搜索找到了代码，请同时粘贴它，以便我们可以看到您要完成的工作。
我假设您打算为幻灯片使用“平滑滚动”效果。
1\. 尝试查看已经为此目的构建的一些 wordpress 主题的代码。
2\. 尝试搜索一些 JQuery 代码片段。
**编辑：**
第二个链接显示了一段合法的代码。加载 JQuery 时可能存在一些问题。试试这个以确保页面上加载了 JQuery 脚本：

```
$(document.body).ready(function(){
alert("READY!");
}); 
```

这应该在页面加载后显示警报。如果未显示警报，则 JQuery 未正确加载。我认为这是问题所在，因为代码看起来不错。

# php - PHP：如何通过另一个文件发布表单数据？

> ID：12084698
> 
> 赞同：2
> 
> 时间：2012-08-23T04:20:59.767
> 
> 标签：php, forms, post, submit, form-submit

我有 2 个文件：index.php、form.php。

**表格.php：**

```
<?php

if (isset($_POST['submit'])){
    echo "OK";
    // do something with post data

}

?>
    <form method="post" name="myform">
        <input type="text" name="name" />
        <input type="submit" name="submit" value="SUBMIT" />
    </form> 
```

我通过在浏览器地址栏中输入来调用 form.php：`**`mysite/index.php?act=form`**`

在 index.php 我有这些行：

```
 <?php

    switch($_REQUEST['act']){
        case "form":
            include("form.php"); break;

    }
... 
```

但是提交表单时我什么都没有（在 form.php 中）。我想要的只是在 form.php 中获取发布的数据，而不是在 index.php 中。

我在这里做错了什么？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T04:23:15.870

在 form.php 中更改您的行

```
<form method="post" name="myform" action="form.php"> 
```

或者

```
<form method="post" name="myform" action="index.php?act=form"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T04:23:17.200

所以你需要添加表单的 action 属性：

```
<form action="/index.php?act=form" method="post" name="myform"> 
```

# objective-c - 设置背景图片 NSToolbar

> ID：12084699
> 
> 赞同：1
> 
> 时间：2012-08-23T04:21:04.513
> 
> 标签：objective-c, macos, cocoa

我对 OS X 应用程序开发相对较新，我想知道是否可以将背景图像放入 NSToolbar，例如 Game Center.app 或 Calender.app(iCal.app)？我环顾四周，在这里或谷歌上找不到任何东西。我突然想到可能没有公共 API，它可能是私有的。我的应用程序不会提交到 Apple 的 Mac App Store，因此我可以使用私有 API（如有必要）。如果有人知道 API，我将不胜感激！非常感谢

~ 困惑的 Mac 开发者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:10:09.527

请参阅[AlteringTheAppearanceOfNSToolbar](http://cocoadev.com/AlteringTheAppearanceOfNSToolbar)链接。希望有帮助。

# perl - perl：使用 Getopt::Long 设置 Class::Struct 字段？

> ID：12084700
> 
> 赞同：2
> 
> 时间：2012-08-23T04:21:06.367
> 
> 标签：perl, getopt

我可以使用 Getopt::Long 来设置结构字段吗？

```
use strict;
use diagnostics;
use Getopt::Long;
use Class::Struct foo [ a => '$', b => '$' ];

my $foo = foo->new();
GetOptions("a=i" => \$foo->a, "b=i" => \$foo->b); 
```

似乎不起作用，“-a 10”似乎没有设置`$foo->a`。

显然，我宁愿避免

```
GetOptions("a=i" => sub { $foo->a($_[1]); }, ...); 
```

另外，我宁愿将 struct foo 保留为数组，而不是哈希。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T05:15:55.630

`\$foo->a`将是对 的返回值的引用`$foo->a`，这肯定不是您想要的。

您可能可以使用将[值存储在哈希引用中](https://metacpan.org/module/Getopt::Long#Storing-options-values-in-a-hash)`GetOptions`的能力，然后将其传递给您的对象：`new`

```
my $opt = {};
GetOptions($opt, 'a=i', 'b=i', ...)
my $foo = foo->new(%$opt); 
```

# javascript - FireFox 扩展对 TinyMCE 编辑器进行脚本注入

> ID：12084701
> 
> 赞同：1
> 
> 时间：2012-08-23T04:21:07.427
> 
> 标签：javascript, firefox-addon, tinymce

我的一个火狐扩展将以下脚本注入到 TinyMCE 编辑器的内容中。

```
<script type="text/javascript" src="http://cdncache3-a.akamaihd.net/loaders/1032/l.js?aoi=1311798366&amp;pid=1032&amp;zoneid=62862"></script> 
```

有没有人经历过这个？请让我知道如何防止这种情况？我已删除该扩展名，发现脚本注入已停止。我不记得我删除的扩展名的确切名称。如果您认识它，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T08:36:45.230

谢谢你的问题。我和你有同样的问题，我发现扩展名是“Videofiledownload - Download youtube video 1.5”。

# c - 来自多个线程的同一 fd 上的`select`

> ID：12084704
> 
> 赞同：4
> 
> 时间：2012-08-23T04:21:11.813
> 
> 标签：c, linux, networking

如果我`select`从多个线程调用同一个打开的文件描述符会发生什么？

这是在某处记录的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T05:42:41.560

根据[POSIX 2008`select`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/pselect.html)规范，没有什么可以禁止两个线程同时调用`select`。

可以合理地推断，如果两个线程都在监视重叠的文件描述符集，并且一些公共文件描述符变得可读或可写或诊断出错误，那么两个线程最终可能会报告公共文件描述符已准备好。这无法保证；有时间问题需要担心，它可能取决于线程的调度等。这也意味着其中一个线程可能最终无法在文件描述符上找到要读取的数据，而该文件描述符被告知包含要读取的数据，这正是因为另一个线程首先到达那里。任何给定的数据字节将仅由其中一个线程读取。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T04:52:04.707

根据[Linux手册页](http://www.kernel.org/doc/man-pages/online/pages/man7/pthreads.7.html)，`select`是线程安全函数和取消点。

在~~Linux~~某些操作系统上，一个线程会成功进入`select`，而其他线程会被阻塞（的主体`select`是临界区）。无论描述符被返回给第一个线程，那么成功进入的第二个线程`select`可能会立即使用相同的集合唤醒，因为`select`它是一个级别触发的接口。

因此，您不能在~~Linux~~那些操作系统上`select`同时选择多组文件描述符。

 ~~Linux 似乎支持完全可重入执行，用这个测试程序演示：

```
void * reader (void *arg) {
    int *fds = (int *)arg;
    struct timeval to = { 2, 0 };
    fd_set rfds;

    FD_ZERO(&rfds);
    FD_SET(fds[0], &rfds);

    select(fds[0]+1, &rfds, 0, 0, &to);
}

int main () {
    int sp[2];
    pthread_t t[2];
    socketpair(AF_UNIX, SOCK_STREAM, 0, sp);
    pthread_create(&t[0], 0, reader, sp);
    pthread_create(&t[1], 0, reader, sp);
    pthread_join(t[0], 0);
    pthread_join(t[1], 0);
    return 0;
} 
```

在Linux上计时这个程序（我的是2.6.43），程序在2秒后返回，表明两个线程`select`同时进入。~~

# facebook - 如何在 Heroku 上统一托管使用 Sinatra 构建的 Facebook 应用程序的会话

> ID：12084710
> 
> 赞同：1
> 
> 时间：2012-08-23T04:21:29.467
> 
> 标签：facebook, heroku, sinatra

我正在`Canvas`使用`Sinatra`.

在我自己的机器上本地运行时，我的应用程序运行良好；但是当我把它推到上面时，`Heroku`我遇到了会话不匹配的问题，因此当页面重新加载发生时，/callback 放入会话中的数据不存在。

问题似乎是，在运行时`Heroku`，它会插入一些花哨的负载平衡，因此页面重新加载和用户 ID 存储在会话中`request.env['REMOTE_HOST']`的 Facebook 之间是不同的。`callback`

一些（编辑过的）日志清楚地表明了这一点。

在 Heroku 上（注意不同的远程主机和不同的会话 ID）

```
X9.1XX.XX1.XX - - [23/Aug/2012 03:27:42] "POST / HTTP/1.1" 200 1878 0.0235
DEBUG -- : ---------------------------------------------------------
DEBUG -- : ---------------------------------------------------------
DEBUG -- : Handling request from host ip-10-92-97-233.ec2.internal
DEBUG -- : Session ID: 39960b607fd7c1150791d4d42d6633b3b2a5b18e79e742f67d8f677f139dbca8
DEBUG -- : ---------------------------------------------------------
DEBUG -- : Set session['oauth'] : Koala::Facebook::OAuth
DEBUG -- : Session id: 39960b607fd7c1150791d4d42d6633b3b2a5b18e79e742f67d8f677f139dbca8
DEBUG -- : ---------------------------------------------------------
DEBUG -- : Session ID: 39960b607fd7c1150791d4d42d6633b3b2a5b18e79e742f67d8f677f139dbca8
DEBUG -- : Completed request from host ip-10-92-97-233.ec2.internal
DEBUG -- : ---------------------------------------------------------
DEBUG -- : ---------------------------------------------------------

X9.1XX.XX1.XX - - [23/Aug/2012 03:27:46] "GET /login HTTP/1.1" 302 - 0.0178
DEBUG -- : ---------------------------------------------------------
DEBUG -- : ---------------------------------------------------------
DEBUG -- : Handling request from host ip-10-94-82-253.ec2.internal
DEBUG -- : Session ID: 20200e42add5ec9bfe12b225502c7449dda6e8ab06dd3fbe204239db0e21de89
DEBUG -- : ---------------------------------------------------------
ERROR -- : Could not find oauth key in session 20200e42add5ec9bfe12b225502c7449dda6e8ab06dd3fbe204239db0e21de89
DEBUG -- : ---------------------------------------------------------
DEBUG -- : Session ID: 20200e42add5ec9bfe12b225502c7449dda6e8ab06dd3fbe204239db0e21de89
DEBUG -- : Completed request from host ip-10-94-82-253.ec2.internal
DEBUG -- : ---------------------------------------------------------
DEBUG -- : ---------------------------------------------------------

X9.1XX.XX1.XX - - [23/Aug/2012 03:27:48] "GET /callback?code=AQCs… …vxkEI76cq32juk HTTP/1.1" 302 - 0.0014
DEBUG -- : ---------------------------------------------------------
DEBUG -- : ---------------------------------------------------------
DEBUG -- : Handling request from host ip-10-125-37-231.ec2.internal
DEBUG -- : Session ID: a94f5f36b44e5891657982248d1304e265f9619bdcdc37b648879e5a12a0fe5b
DEBUG -- : ---------------------------------------------------------
DEBUG -- : ---------------------------------------------------------
DEBUG -- : Session ID: a94f5f36b44e5891657982248d1304e265f9619bdcdc37b648879e5a12a0fe5b
DEBUG -- : Completed request from host ip-10-125-37-231.ec2.internal
DEBUG -- : ---------------------------------------------------------
DEBUG -- : --------------------------------------------------------- 
```

本地（这有效，请注意相同的主机和匹配的会话 ID）

```
X9.1XX.XX1.XX - - [23/Aug/2012 13:56:22] "POST / HTTP/1.1" 200 1878 0.0279
DEBUG -- : ---------------------------------------------------------
DEBUG -- : ---------------------------------------------------------
DEBUG -- : Handling request from host ppp12345.static.someprovider.net
DEBUG -- : Session ID: 892e6ec515afde6f463102f83d373523bba62b26180a2e5a34a4945c787eacfd
DEBUG -- : ---------------------------------------------------------
DEBUG -- : Set session['oauth'] : Koala::Facebook::OAuth
DEBUG -- : Session id: 892e6ec515afde6f463102f83d373523bba62b26180a2e5a34a4945c787eacfd
DEBUG -- : ---------------------------------------------------------
DEBUG -- : Session ID: 892e6ec515afde6f463102f83d373523bba62b26180a2e5a34a4945c787eacfd
DEBUG -- : Completed request from host ppp12345.static.someprovider.net
DEBUG -- : ---------------------------------------------------------
DEBUG -- : ---------------------------------------------------------

X9.1XX.XX1.XX - - [23/Aug/2012 13:56:31] "GET /login HTTP/1.1" 302 - 0.0079
DEBUG -- : ---------------------------------------------------------
DEBUG -- : ---------------------------------------------------------
DEBUG -- : Handling request from host ppp12345.static.someprovider.net
DEBUG -- : Session ID: 892e6ec515afde6f463102f83d373523bba62b26180a2e5a34a4945c787eacfd
DEBUG -- : ---------------------------------------------------------
DEBUG -- : ---------------------------------------------------------
DEBUG -- : Session ID: 892e6ec515afde6f463102f83d373523bba62b26180a2e5a34a4945c787eacfd
DEBUG -- : Completed request from host ppp12345.static.someprovider.net
DEBUG -- : ---------------------------------------------------------
DEBUG -- : ---------------------------------------------------------

X9.1XX.XX1.XX - - [23/Aug/2012 13:56:34] "GET /callback?code=AQCs… …vxkEshwXTPMC8lnaY9FU HTTP/1.1" 302 - 1.4674
DEBUG -- : ---------------------------------------------------------
DEBUG -- : ---------------------------------------------------------
DEBUG -- : Handling request from host ppp12345.static.someprovider.net
DEBUG -- : Session ID: 892e6ec515afde6f463102f83d373523bba62b26180a2e5a34a4945c787eacfd
DEBUG -- : ---------------------------------------------------------
DEBUG -- : {"username"=>"davesag", "verified"=>true, "updated_time"=>"2012-08-20T23:41:41+0000"}
DEBUG -- : ---------------------------------------------------------
DEBUG -- : Session ID: 892e6ec515afde6f463102f83d373523bba62b26180a2e5a34a4945c787eacfd
DEBUG -- : Completed request from host ppp12345.static.someprovider.net
DEBUG -- : ---------------------------------------------------------
DEBUG -- : --------------------------------------------------------- 
```

所以问题是，我如何告诉 Heroku 统一其会话，以便 cookie 正确传输并匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:23:56.280

您应该使用会话 cookie 来存储会话 ID，而不是尝试基于 REMOTE_HOST 进行调度。如您所见，REMOTE_HOST 会根据 heroku 的路由而有所不同，但如果多个人使用相同的出站 IP 地址也会有所不同。

# c# - 如何在 Windows phone 上创建列表框和链接

> ID：12084715
> 
> 赞同：0
> 
> 时间：2012-08-23T04:22:02.963
> 
> 标签：c#, hyperlink, listbox, windows-phone

抱歉这个疯狂的问题

我是使用 c# 的新 wp 开发人员。

我想了解将超链接链接到另一个表单的解决方案。现在我已经有列表框使用来自数据源绑定的数据了。

此案例与 webboard 的列表线程相同，并触摸以获取详细信息的链接。

如何从列表框中的链接导航到另一个表单？

我的代码看起来像这样，我想让链接替换文本块：

```
<ListBox.ItemTemplate >
                <DataTemplate>
                    <StackPanel Margin="0,0,0,17" Width="432" Orientation="Horizontal">
                        <Image Source="../Media/Images/play.png" />
                        <StackPanel >
                            <TextBlock Text="{Binding Title}" 
                               TextWrapping="Wrap" 
                               Style="{StaticResource PhoneTextExtraLargeStyle}"/>
                            <TextBlock Text="{Binding ShortDescription}" 
                               TextWrapping="Wrap" Margin="12,-6,12,0" 
                               Visibility="{Binding ShortDescriptionVisibility}" 
                               Style="{StaticResource PhoneTextSubtleStyle}"/>
                            <TextBlock Text="{Binding LongDescription}"
                               TextWrapping="Wrap" 
                               Visibility="{Binding LongDescriptionVisibility}"/>
                            <StackPanel>
                                <Slider HorizontalContentAlignment="Stretch"
                                   VerticalContentAlignment="Stretch" 
                                   Visibility="{Binding LongDescriptionVisibility}" 
                                   ValueChanged="Slider_ValueChanged" 
                                   LargeChange="0.25" SmallChange="0.05"/>
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:07:40.527

场景 1：导航到 Web URL 假设您的数据源有一个带有 URL 的字段（我们称之为 NavigateToPageUrl），当用户单击该链接时您想要导航到该字段。在这种情况下，在内部堆栈面板内（即在绑定到 LongDescription 的文本框下方）您可以编写以下代码：

场景 2：在同一应用程序中的表单之间导航：在这种情况下，您应该拥有表单名称（比如说 NavigateToThisForm.xaml），在这种情况下，您可以向任何堆栈面板添加一个标签，例如 Tag="/navigatetothisform。 xaml”并为堆栈面板编写事件处理程序。完整的代码将是：

```
<StackPanel Tag="/Page2.xaml" Tap="StackPanelTap">
// Your code to add title and other fields.
</StackPanel>

private void StackPanelTap(object sender, GestureEventArgs e)
{
    var stackpanel = (StackPanel)sender;
    var navigateUrl = stackpanel.Tag.ToString();
    NavigationService.Navigate(new Uri(navigateUrl, UriKind.Relative));
} 
```

我希望它有所帮助。

# php - Yii $this 在模型中不起作用

> ID：12084727
> 
> 赞同：1
> 
> 时间：2012-08-23T04:23:57.070
> 
> 标签：php, object, activerecord, yii

我对 Yii 很陌生，我有一个小问题，但无法弄清楚。问题是当我在我的一个模型（活动记录）中调用 Yii 时，$this->attributes = 'something'; 我收到错误“未定义属性“SiteController.attributes”。”

我在控制器中有这个：

```
public function actionIndex()
{
    // Create new clients active record
    $client = new Clients;

    // Check if user send some request
    if (isSet($_POST)){
        switch($_POST["action"]){
            case 'newClient':
                $registered = $client::addClient($_POST);
        }
    }

    // render the view
    $this->render('landing',array(
        // Objects
        'client' => $client,
        // Variables
        'registered' => $registered,
    ));

    return true;
} 
```

这在模型中：

```
public function addClient($data){
    // Set data
    $this->attributes = $data["Clients"];
    $this->password = self::generatePassword(6);

    // Proceed
    $this->setScenario('insert');

    return true;
} 
```

功能当然不完整，但这是我得到错误的地方。我到底做错了什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:28:19.553

您将该函数作为静态方法调用。

`$registered = $client::addClient($_POST);`

应该

```
$registered = $client->addClient($_POST); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:41:10.173

当这样的事情发生在我身上时，我 var_dump(). 也许*这*不是*你*想的那样。

否则我建议检查 Yii 生成的代码。几乎不熟悉该框架，但请检查您或您的 IDE 是否没有弄错任何 C 样式的注释。检查拼写错误、代码、元数据、表格。还要检查并确保您还没有同名的实体，`SiteController`听起来有点通用。

# objective-c - 为 Uitableviewcell 设置动画

> ID：12084734
> 
> 赞同：1
> 
> 时间：2012-08-23T04:24:39.530
> 
> 标签：objective-c, iphone, uitableview, cocoa-touch, core-animation

Tweetbot 在向右滑动时向 UITableViewCell 添加了一些很酷的动画，最终揭示了让我好奇的对话：你如何为 UITableViewCell 设置动画以将其从 tableview 的正常框架中移开？

另外，您如何为表格单元顶部的其他视图设置动画？像 UIActivityMonitor 或淡入淡出按钮？

我不是在寻找何时进入编辑模式或被选中的答案，而是在一般情况下寻找答案。多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:41:27.373

```
CGPoint location = [recognizer locationInView:tblview];
NSIndexPath* indexPath = [tblAim indexPathForRowAtPoint:location];

ProjectCell *cell = (ProjectCell *) [tblAim cellForRowAtIndexPath:indexPath];

if(cell.frame.origin.x!=0)
[UIView animateWithDuration:0.3 animations:^{  [cell setFrame:CGRectMake(0,cell.frame.origin.y, 320, 60 )];} completion:^(BOOL finish){
[UIView animateWithDuration:0.1 animations:^{[cell setFrame:CGRectMake(0-10,cell.frame.origin.y, 320, 60 )];} completion:^(BOOL finish){
[UIView animateWithDuration:0.1 animations:^{[cell setFrame:CGRectMake(0,cell.frame.origin.y, 320, 60 )];}];
                }];
            }]; 
```

# python - 支持 Anvil 地图的 Minecraft pymclevel 替代品？

> ID：12084739
> 
> 赞同：1
> 
> 时间：2012-08-23T04:25:46.150
> 
> 标签：python, minecraft, topology

很明显，到目前为止，Anvil 对 pymclevel 的支持还没有完成。像[TopoMC](https://github.com/mathuin/TopoMC)这样的项目非常需要这种支持来创建符合利用 256 高度的新地图标准的世界。

Anvil 支持的赏金（110 美元）显然已投入使用，问题已在[此处](https://github.com/mcedit/pymclevel/issues/78)概述，但似乎没有人完全拿起火炬（刚刚开始，但尚未最终确定）。

***`pymclevel`除了可以用于 TopoMC 的其他选项之外，还有其他选项***吗？作者[对实现这一点非常感兴趣](https://github.com/mathuin/TopoMC/issues/8#issuecomment-7958110)，但是我们都处于真正找到任何替代品的停滞状态，我想我应该进行调查，看看是否有其他人可能熟悉其他现有的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:47:45.193

这个问题已经变得没有意义，因为 pymclevel 现在支持 Anvil 地图。

# ruby-on-rails-3 - 生成的 Formbuilder 不适合 rails 3.2.8 ajax 调用中的渲染部分

> ID：12084741
> 
> 赞同：0
> 
> 时间：2012-08-23T04:26:03.350
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, formbuilder

我们使用以下代码将表单构建器传递给 new.js.erb 中的渲染部分：

```
 <% @f = ActionView::Helpers::FormBuilder.new(:expense, @expense, self, {}, proc {} ) %> 
  var rpt = $("<%= escape_javascript(render 'expenses/expense_for', :f => @f) %>"); 
```

@f 是为部分生成的表单生成器。错误是：

```
ActionView::Template::Error (undefined method `input' for #<ActionView::Helpers::FormBuilder:0x60c6828>):
    1: <%= f.input :expense_for, :label => "栏目： ", :collection => @expense_for  %> 
```

部分 _expense_for.html.erb 是：

```
<%= f.input :expense_for, :label => "栏目： ", :collection => @expense_for  %> 
```

如错误所示，上述部分中未为 f formbuilder 定义输入法。传入的表单生成器可能有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:24:05.307

该错误表示`ActionView::Helpers::FormBuilder`没有方法输入。据我所知，这是真的。`input`是 SimpleForm 或 Formtastic 方法，请尝试使用`f.select`（您需要更改参数）。

# pdf - 使用 Inkscape 从 pdf 中提取矢量图形

> ID：12084742
> 
> 赞同：14
> 
> 时间：2012-08-23T04:26:10.727
> 
> 标签：pdf, graphics, inkscape

我想从论文中提取一些 pdf 图像用于演示目的。在 Windows 中，Adobe Illustrator 工作得很好，但我现在必须在 Debian 盒子中执行此任务。

我在网上找到的两个流行的解决方案正在使用

*   [pdf图片](http://stefaanlippens.net/extract-images-from-pdf-documents)
*   [墨景](https://superuser.com/questions/302045/how-to-extract-vector-from-pdf-file)

pdfimage 不能满足我的需求，因为我想要矢量图形 (pdf) 而不是 jpgs，所以我更喜欢使用 Inkscape，但它不能按预期工作。我希望我可以使用一些选择器工具来拖动一个框并选择其中的所有内容，就像我通常使用 Illustrator 所做的那样，但是 Inkscape 中的任何工具都不起作用。

如果我使用“选择和转换对象”工具（黑色箭头），则选择了整个 pdf 页面，而我只想要一小部分；如果我使用“按节点编辑路径”工具（带有一些节点的黑色三角形箭头），我一次只能选择一个对象。拖放（即使按下 shift 键）也不起作用。

我想知道是否有办法解决这个问题，或者 Debian 中是否有更好的工具来实现同样的目标？谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-23T06:32:19.403

以我的拙见，我可以建议我用来从 pdf获取**矢量图像的方式**

有一个工具叫

**pdftocairo**，包含在**poppler-utils中**

*   [http://poppler.freedesktop.org/](http://poppler.freedesktop.org/)

句法：

```
pdftocairo [options] <PDF-file> [<output-file>] 
```

**pdftocairo**能够在输出中生成光栅和矢量格式，在这两者之间，它能够转换**单个 pdf 页面**的内容（如果你有一个**多页**pdf 文档，你首先需要在它的单个 pdf 页面中分解它, 以**pdftk**为例), 转化为:

 ****> *   -ps : 生成 PostScript 文件
> *   -eps ：生成封装的 PostScript (EPS)
> *   -svg ：生成可缩放矢量图形 (SVG) 文件

满足您需求的最佳输出格式可能是**svg**，因此在转换 pdf 页面后，您可以使用任何 svg 应用程序（例如使用**inkscape**或旧的**sodipodi**）打开此 svg，选择您要提取并保存的矢量元素

恢复：

如果您有多**页 PDF**

1.  您首先将此多页 pdf 拆分为单页（为此单页创建一个文件夹）

    ```
    pdftk file.pdf burst 
    ```

2.  然后使用**pdftocairo**将任何 pdf 页面转换为**svg**

    ```
    for f in *.pdf; do pdftocairo -svg $f; done 
    ```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-05-12T15:00:44.850

您可以使用 pdftk 拆分多页 pdf 文件，然后使用 inkscape 使用命令行将 pdf 转换为 svg 文件，例如

```
inkscape --without-gui --file=input.pdf --export-plain-svg=output.svg 
```****

# windows-phone-7 - 如何下载每日必应图片

> ID：12084745
> 
> 赞同：1
> 
> 时间：2012-08-23T04:26:37.860
> 
> 标签：windows-phone-7

我见过一些应用程序允许用户下载每日必应图像并在手机上用于各种目的。这些应用程序是如何做到的？我找不到任何有关完成此操作的步骤的信息，尽管我的应用程序确实可以在我的页面背景上使用一些修饰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:37:01.310

[这是 Bing 的桌面动态提要](http://themeserver.microsoft.com/default.aspx?p=Bing&c=Desktop&m=en-US)。我不确定网络的那个在哪里。

# javascript - Javascript：使用 dribbble api 的禁止错误

> ID：12084746
> 
> 赞同：0
> 
> 时间：2012-08-23T04:27:13.210
> 
> 标签：javascript, jquery, api

不知道发生了什么，试图拉一个简单的图像

HTML

```
 <div></div> 
```

JS

```
 $.getJSON("http://api.dribbble.com/shots/popular?callback=?", function(data) {
        $('div').append('<img src="+data.shots[0].image_url+" />');
    }); 
```

在控制台中，它会拉出链接查找，但是当我尝试在页面上显示图像时，它给了我一个 403。不确定我缺少什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:29:59.850

你错过了单引号。

```
$('div').append('<img src="' + data.shots[0].image_url + '" />'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:30:28.960

试试这个：

```
$.getJSON("http://api.dribbble.com/shots/popular?callback=?", function(data) {
  $('div').append('<img src="' + data.shots[0].image_url + '" />');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:49:33.257

如果你愿意，你可以使用这个简单的 Javascript Dribbble API 库：[Dribbble.js](https://github.com/evandroeisinger/dribbble)

您可以在此处查看示例：[Dribbble API 示例](https://evandroeisinger.com/dribbble)

它的简单你使用：

```
// get the most popular shots 
Dribbble.list( 'popular', function( response ){ 
   // write your code here 
}); 
```

谢谢，祝你好运！

# .net - 如何使用安装程序分发 mdb 文件？

> ID：12084749
> 
> 赞同：2
> 
> 时间：2012-08-23T04:27:42.027
> 
> 标签：.net, database, ms-access

我有一个 Ms-Access 文件（.mdb）。我想将它作为软件分发，这样用户甚至可以在没有 MS-Access 的情况下使用它。所以基本上我想将该 .mdb 文件转换为 .exe 文件它可以安装在客户端上。但我检查了，我发现这是不可能的。为此，我们需要使用一些安装程序，如 Wise 或 InstallShield 向导。可以使用 Visual Studio .net 部署包完成此分发吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T04:32:43.900

> 但是我查了一下，发现是不可能的。

有可能的！您可以从 MS Access 2010 创建安装程序，它将您的 .mdb 文件与[MS Access 运行时](http://www.microsoft.com/en-us/download/details.aspx?id=10910)打包在一起。

*编辑*：这是一个很好的链接，其中包含有关[如何创建安装程序的](http://www.addictivetips.com/microsoft-office/access-2010-windows-installer-package-solution-wizard/)说明。这很简单，您可以在没有说明的情况下进行操作；只需从 Access 菜单中单击*Package Solution*选项。

# sql-server-2008 - 从 SQL Server 中的多个服务器将数据插入\更新到中央服务器

> ID：12084754
> 
> 赞同：0
> 
> 时间：2012-08-23T04:28:40.707
> 
> 标签：sql-server-2008

有 4 个区域服务器，它们都具有相同的表名和表结构。此外，中央服务器必须具有相同的表名和表结构。来自所有 4 台服务器的数据都需要移动到中央服务器中，而中央服务器中只有一个表实例。即，中央服务器中必须有一组表，其中包含来自所有 4 个区域服务器的数据。请提出任何完成此任务的方法。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T04:34:46.700

我认为您需要阅读有关 SQL Server 中的 sunscriptions 的信息。它提供了使用订阅者-消费者模型在实例之间移动数据的不同方法。例如，您可以从[这里](http://technet.microsoft.com/en-us/library/ms152578%28v=sql.105%29)开始。

这个问题太广泛了，无法给出任何直接的答案，它取决于许多原因。

# objective-c - NSString boundingRectWithSize 稍微低估了正确的高度 - 为什么？

> ID：12084760
> 
> 赞同：15
> 
> 时间：2012-08-23T04:30:17.933
> 
> 标签：objective-c, nstextfield, nstextview

我正在尝试根据当前宽度自动调整文本字段/视图的大小。换句话说，我希望宽度保持不变，但根据提供给它的文本调整高度。

它似乎正在工作，但由于某种原因，它与我的窗口底部对齐，尽管努力手动将其移回。谁能看到我在这里做错了什么？

![在此处输入图像描述](../Images/d7dcb6fb1583d2e4689b417c53a08b67.png)

```
NSString *temp = @"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer vel felis nec massa ultricies blandit non id arcu. Sed enim est, facilisis a feugiat in, consectetur eget arcu. Aenean rutrum, lacus id euismod congue, nisl erat vulputate lectus, non faucibus tortor purus sed sem. Donec tempor dui egestas velit auctor vitae faucibus diam facilisis. Morbi convallis nulla quis est pulvinar quis ultricies sem sollicitudin.";

myText.stringValue = temp;

NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:
                            [NSFont systemFontOfSize:12], NSFontAttributeName,
                            [NSParagraphStyle defaultParagraphStyle], NSParagraphStyleAttributeName,
                            nil];

NSSize size = NSMakeSize(window.frame.size.width, 200);
myText.frame = [temp boundingRectWithSize:size options:NSLineBreakByWordWrapping | NSStringDrawingUsesLineFragmentOrigin attributes:attributes]; 
```

**编辑：**即使手动移动框架，很明显文本仍然被截断。新调整的尺寸并不完全在那里。 ![在此处输入图像描述](../Images/94b44479168f235ba07ea825d645c815.png)

这是参考： [NSString boundingRectWithSize 稍微低估了正确的宽度 - 为什么？](https://stackoverflow.com/questions/5512295/nsstring-boundingrectwithsize-slightly-underestimating-the-correct-width-why) 和 [NSTextView 或 NSTextField 自动调整边界/框架的大小？](https://stackoverflow.com/questions/12078390/nstextview-or-nstextfield-automatically-resize-bounds-frame)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-05-09T11:11:02.853

我有同样的问题。我在[文档](https://developer.apple.com/documentation/foundation/nsstring/1524729-boundingrectwithsize?language=objc)中找到了以下内容：

> 要正确绘制多行文本并调整其大小，请在 options 参数中传递 NSStringDrawingUsesLineFragmentOrigin。
> 
> 此方法返回小数大小（在返回的 CGRect 的大小分量中）；要使用返回的大小来调整视图大小，您必须使用 ceil 函数将其值提高到最接近的较高整数。

所以这为我解决了这个问题：

```
CGRect rect = [myLabel.text boundingRectWithSize:CGSizeMake(myLabel.frame.size.width, CGFLOAT_MAX)
                                                            options:NSStringDrawingUsesLineFragmentOrigin
                                                            attributes:@{NSFontAttributeName: myLabel.font}
                                                            context:nil];
rect.size.width = ceil(rect.size.width);
rect.size.height = ceil(rect.size.height); 
```

**更新（斯威夫特 5.1）**

另一种 Swift 方法是：

```
let size = myLabel.text!.size(
    withAttributes: [.font: myLabel.font!]
)
let rect = CGSize(
  width: ceil(size.width),
  height: ceil(size.height)
) 
```

有关Objective-C 示例，请参阅[此答案。](https://stackoverflow.com/a/18897897/1057968 "这个答案")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T01:31:46.593

这有点迂回，但我发现查询`NSTextFieldCell`比使用`[NSAttributedString boundingRectWithSize:options:]`.

假设感兴趣的字符串已经在一个 NSTextField 中，并且设置了适当的格式/换行选项，然后查询文本单元格它认为它需要适合指定宽度的大小：

`NSTextField* textField = ...`

`NSSize cellSize = [textField.cell cellSizeForBounds:NSMakeRect(0, 0, pathText.frame.size.width, CGFLOAT_MAX)];`

`cellSize.height`给出文本在绘制时实际使用的高度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T23:27:50.800

这就是我最终的结果（至少目前是这样），它似乎工作正常，但我仍然觉得有更好的方法来实现这一点。

 `````
NSString *temp = @"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer vel felis nec massa ultricies blandit non id arcu. Sed enim est. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer vel felis nec massa ultricies blandit non id arcu. Sed enim est.";

myText.stringValue = temp;

NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:
                            [NSFont systemFontOfSize:12], NSFontAttributeName,
                            [NSParagraphStyle defaultParagraphStyle], NSParagraphStyleAttributeName,
                            nil];

NSSize size = NSMakeSize(window.frame.size.width, MAXFLOAT);

myText.frame = [temp boundingRectWithSize:size options:NSLineBreakByWordWrapping | NSStringDrawingUsesLineFragmentOrigin attributes:attributes];

// Keep current width but add some more on the bottom
NSSize tF = myText.frame.size;
[myText setFrameSize:NSMakeSize(tF.width, tF.height + 35)];

[myText setFrameOrigin:NSMakePoint((NSWidth(window.frame) - NSWidth(myText.frame)) / 2, 
                                   (NSHeight(window.frame) -  NSHeight(myText.frame) - 20))];

[myText setAutoresizingMask:NSViewMinXMargin | NSViewMaxXMargin | NSViewMinYMargin | NSViewMaxYMargin]; 
````  `产生这个：

![在此处输入图像描述](../Images/1e84f306a3001db71dc4ffc9625705e2.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-10T13:49:26.980

我发现 NSString#boundingRectWithSize 从来都不是完全正确的，唯一似乎运作良好的是这里描述的那个： [https ://developer.apple.com/library/content/documentation/Cocoa/Conceptual/TextLayout/Tasks/StringHeight .html](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/TextLayout/Tasks/StringHeight.html)

```
class func sizeForString(_ text : String, withFont font: NSFont, inWidth maxWidth: CGFloat) -> NSSize {
    let textStorage = NSTextStorage(string: text)
    let textContainer = NSTextContainer(containerSize: NSSize(width: maxWidth, height: CGFloat.greatestFiniteMagnitude))
    let layoutManager = NSLayoutManager()
    layoutManager.addTextContainer(textContainer)
    textStorage.addLayoutManager(layoutManager)
    textStorage.addAttribute(NSFontAttributeName, value: font, range: NSMakeRange(0, textStorage.length))
textContainer.lineFragmentPadding = 0
    layoutManager.glyphRange(for: textContainer)
    return layoutManager.usedRect(for: textContainer).size
 } 
`````

# compiler-construction - 使用 gfortran 编译错误

> ID：12084766
> 
> 赞同：0
> 
> 时间：2012-08-23T04:30:50.053
> 
> 标签：compiler-construction, gfortran

我正在尝试为有关矢量和并行科学计算的课程学习 fortran90/95。[我正在使用 Windows Vista 32 位，我从这里](http://gcc.gnu.org/wiki/GFortranBinaries)下载了（无论如何我相信是）我的操作系统的 gfortran 编译器版本。

为了测试它是否正常工作，我编写了一个 hello world 程序，如下所示：

```
program testfortran
    write(*,*) 'Hello world!"
end program testfortran 
```

几乎是来自fortran教程的逐字记录。当我尝试编译它时：

```
gfortran testfortran.f90 
```

它给了我以下回应：

```
C:\Program files\gfortran\bin/1d.exe: cannot open output file a.exe: Permission denied
collect2.exe: error: 1d returned 1 exit status 
```

作为一名工程师，我几乎所有的编程经验都是使用 Matlab 之类的解释型语言，而我对编译型语言不是很熟悉。我不知道我是否只是在犯一个非常愚蠢的错误或什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:00:56.513

该`a.exe: Permission denied`消息暗示您无权写入当前目录。在什么目录下`testfortran.f90`？你可以在同一个目录中创建一个文件（比如，`echo hello > hello.txt`）吗？您可以在不同的目录中尝试吗？（不过，这似乎很奇怪；如果您可以`testfortran.f90`在该目录中创建，那么您应该能够`a.exe`在同一目录中创建。）

或者，`a.exe`该目录中已经有一个文件，而您无权覆盖它。尝试

```
gfortran testfortran.f90 -o testfortran.exe 
```

此外，您的错误消息指的是`1d.exe`. 我希望它是`ld.exe`链接器。并且您的示例程序的引号不匹配：`'Hello world!"`. 最好复制并粘贴您的源代码和任何错误消息，而不是重新输入它们。

# android - 列表视图后的Android页脚

> ID：12084768
> 
> 赞同：0
> 
> 时间：2012-08-23T04:30:58.043
> 
> 标签：android, button, footer

当我想在列表视图下方显示页脚按钮时，我遇到了应用程序崩溃的问题。我附上了我的 xml 代码和活动代码。任何帮助将不胜感激。

ContactListActivity.java

```
 public class ContactListActivity1 extends ListActivity {
    static ArrayList<String> ids = new ArrayList<String>();

     ListView lv;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ContactList1 contactList = this.getContacts();
        ArrayAdapter<Contact1> adapter = new ContactAdapter1(this,
                contactList.getContacts());

          // LoadMore button
            Button btnLoadMore = new Button(this);
            btnLoadMore.setText("Load More");

        View v = getLayoutInflater().inflate(R.layout.contactlistitem,null);

        lv.addFooterView(btnLoadMore);
        lv.setAdapter(adapter);

    } 
```

还有我的 XML 代码

```
 <?xml version="1.0" encoding="utf-8"?>

<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_alignParentRight="true"

>

    <TextView
        android:id="@+id/txtDisplayName"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:text="TextView"
        >

</TextView>

     <ImageView

android:id="@+id/contact_image"
android:layout_width="wrap_content"
android:layout_height="wrap_content"

/>

   <ListView
    android:id="@+id/contactList1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_above="@+id/txtDisplayName"
    />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:36:15.263

是的，你犯了一个错误——

*   您正在扩展代码中的`ListActivity`位置。`lv = getListView()`

*   或者，你应该`list = (ListView)findViewById(android.R.id.list);`在`super.onCreate(savedInstanceState);`你的`onCreate`

因为，扩展`ListActivity`这些很重要。您的代码似乎不合适。你最好看看这个例子[如何在 ListView 中添加页脚？](https://stackoverflow.com/q/4265228/940096)在开始您的应用程序之前。

# macos - 如何复制 dmg 中 .pkg 文件旁边的配置。无法从 PackageMaker“预检”脚本访问它

> ID：12084771
> 
> 赞同：1
> 
> 时间：2012-08-23T04:31:16.763
> 
> 标签：macos, osx-mountain-lion, packagemaker, dmg, preflight

## 我的问题

我想让我的安装程序复制一个配置文件与 PKG 放在同一目录中。.pkg + 配置文件将作为 DMG 分发。

作为安装过程的一部分，我需要安装程序将此配置文件复制到特定文件夹。${PACKAGE_PATH} 是由安装程序设置的环境变量，可用于获取配置文件的路径...但是，当从已安装的 dmg 运行 .pkg 时，这不起作用（需要用户提取文件到文件系统）。

有没有办法解决？

## 我为什么要这样做的背景信息......

我们的应用程序有一个配置文件，组织可以根据自己的喜好进行自定义，然后他们会将这个配置文件分发到与 .pkg 相同的目录中。

我们之前通过制作一个简单的部署工具解决了这个问题，客户将他们的 .pkg 和配置文件拖放到该工具上，它会为嵌入它的自定义 pkg 生成。

Mountain Lion 现在需要对 pkg 安装程序进行签名，这会阻止我们插入自定义文件而不对其进行签名。

所以，我的选择是：

1.  创建一个 web 应用程序，客户可以将他们的文件上传到该应用程序并获得一个定制的签名 pkg，这有点痛苦。
2.  扩展我的部署工具以对包进行签名。这并不理想，因为它基本上要求我们分发我们的私钥，这是一个很大的禁忌。
3.  希望有一个更简单的解决方案......就像我正在询问的 DMG 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:24:48.680

**`$1`**和**`$PACKAGE_PATH`**，两者都给出了安装程序正在处理的安装包的完整路径。例如：`/Volumes/Users/Vikrams/Desktop/TestPkg.pkg`

即使从挂载的 dmg 运行安装程序，它也应该可以工作。[您可以在 Packagemaker 中的脚本中](http://macinstallers.blogspot.in/2012/07/scripting-in-installer-packages.html)获得更多信息。

# magento - Magento API 日志

> ID：12084772
> 
> 赞同：6
> 
> 时间：2012-08-23T04:31:34.907
> 
> 标签：magento

有没有办法打开 API 调用的日志记录？

我们有一个第三方应用程序在与我们的商店合作时遇到问题，并希望获得一些调试信息。〜我已经搜索了bt，一无所获。

我正在使用 1.7

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-05-11T14:46:59.570

在一段受控的时间内，您可以像这样操作您的 index.php：

将此代码放在 index.php 的末尾 ::run 调用周围：

```
ob_start();
Mage::run($mageRunCode, $mageRunType);

if(preg_match('/api/', $_SERVER['REQUEST_URI'])) {
        Mage::log('<<< request '.$_SERVER['REQUEST_METHOD'].': '.$_SERVER['REQUEST_URI'], null, 'api.log');
        if($_SERVER['REQUEST_METHOD'] == 'POST') {
                Mage::log('<<< '.file_get_contents('php://input'), null, 'api.log');
        }
        Mage::log('>>> '.ob_get_contents(), null, 'api.log');
}

ob_end_flush(); 
```

它快速而肮脏，但对于临时调试它有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-08T00:05:23.270

一个非常好的解决方案是使用 API 代理。它并不像听起来那么复杂。它只是一个 PHP 脚本，您将 API 调用指向而不是普通的 API URL。这个想法是它在将每个传入的 API 请求传递到普通的 magento API 之前记录它。它还在将响应传递回客户端之前记录响应。

这里有一个现成的，我过去用它来诊断许多 API 问题。 [http://techcolin.net/2011/11/a-php-proxy-script-for-logging-magento-api-soap-calls/](http://techcolin.net/2011/11/a-php-proxy-script-for-logging-magento-api-soap-calls/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:25:10.610

如果您的意思是一些简单的后端设置，类似于

```
System -> Configuration -> Developer -> Debug -> Profiler -> Yes 
```

这样，不，Magento OOB 中没有这样的功能。

我建议使用 PHP 调试器并通过 API 调用单步调用 3rd 方应用程序调用。

或者在 API 调用旁边临时插入`Mage::log()`调用，记录感兴趣的数据，以便您检查`var/system.log`出了什么问题。

# java - Struts2：列表被访问超出其范围

> ID：12084773
> 
> 赞同：1
> 
> 时间：2012-08-23T04:32:09.147
> 
> 标签：java, jakarta-ee, struts2, struts

我有一个 struts2 动作类，它看起来像这样：

```
//import relevant packages

public class Product implements SessionAware, ServletRequestAware,
        ServletResponseAware, ServletContextAware {

    private String productName;
    private String description;
    private String price;

    private ServletContext servletContext; 
    private HttpServletRequest servletRequest; 
    private HttpServletResponse servletResponse; 
    private Map sessionMap;

    //getters and setters here

    public void setServletRequest(HttpServletRequest servletRequest) {
        this.servletRequest = servletRequest;
    }

    public void setSession(Map map) {
        this.sessionMap = map;
    }

    public void setServletResponse(HttpServletResponse servletResponse) {
        this.servletResponse = servletResponse;
    }

    public void setServletContext(ServletContext servletContext) {
        this.servletContext = servletContext;
    }

    public String execute() {

       //  do something here
        return "success";
    }

    public List<String> getCountries() {
        List<String> countries = new ArrayList<String>();
        countries.add("Australia");
        countries.add("Fiji");
        countries.add("New Zealand");
        countries.add("Vanuatu");
        return countries;
    }

} 
```

sruts.xml 有以下内容：

```
<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN" "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
    <constant name="struts.enable.DynamicMethodInvocation" value="false" />
    <constant name="struts.devMode" value="true" />
    <package name="package.name" namespace="/" extends="struts-default">
        <action name="Product_input">
            <result>/jsp/Product.jsp</result>
        </action>
        <action name="Product_save" class="package.name.Product" method="execute">
            <result>/jsp/Details.jsp</result>
        </action>       
    </package>
</struts> 
```

Product.jsp 包含一个简单的形式：

```
<s:form action="Product_save">
        <s:textfield label="Product Name" key="productName"/>
        <s:textfield label="Description" key="description"/>
        <s:textfield label="Price" key="price"/>
        <s:submit/>
</s:form> 
```

Details.jsp 显示表单中输入的内容：

```
<h5>Details:</h5>
Product Name:
<s:property value="productName" />
<br /> Description:
<s:property value="description" />
<br /> Price: $
<s:property value="price" /> </br>
<s:property value="countries[0]" /> </br> 
```

Details.jsp 中的最后一行尝试访问在动作类的 getCountries() 中声明的国家/地区列表，理想情况下它不应该打印任何内容，因为该方法从未被访问过，国家列表也是动作类属性的一部分（因此，虽然在 Value 堆栈中创建 Product 类型的对象，它不应该有国家）。

**但**它确实打印了澳大利亚（列表的索引值）以及其他表单属性。如何/为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:09:05.503

当你`countries`写

```
countries[0] 
```

它需要`getCountries()`方法。现在你把它放在`[0]`它旁边并`countries`成为一个列表......

它转化为

```
getCountries().get(0) 
```

`sysout`您可以通过将 a放入方法中来验证相同的内容`getCountries()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:32:47.133

在struts中，我们使用“property”属性来访问一个bean的值，当我们使用property属性时，它的getter方法会被调用，因此在上面的代码中getCountries()方法被调用了。

# google-visualization - 如何使用服务器端填充数据为表添加搜索过滤器

> ID：12084775
> 
> 赞同：0
> 
> 时间：2012-08-23T04:32:25.217
> 
> 标签：google-visualization

我已经创建了带有服务器端数据填充的谷歌可视化表（在 PHP 中创建的 Json 并返回到数据表）。如何为此表添加搜索过滤器？我 在可视化游乐场看到了[示例代码。](https://code.google.com/apis/ajax/playground/?type=visualization#stringfilter_control)它显示了使用 Control Wrapper 和 Chart Wrapper。那么如何为我的 DataTable（从 PHP 返回的 Json 数据）应用这个控件包装？

```
function drawmsgtable(users)
    {
        var msgdata = $.ajax({
            url: "http://mysite/phpscripts/msgtable.php?users="+users+"",
            dataType:"json",
            async: false
        }).responseText;
        var messagedatatable = new google.visualization.DataTable(msgdata);

        var options={'backgroundColor': 'transparent', 'width': 'auto'};
        $('#table_div').empty();
        var msgTable = new google.visualization.Table(document.getElementById('table_div'));
        msgTable.draw(messagedatatable, options);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T06:58:53.623

首先，您需要加载“控件”包

```
google.load('visualization', '1', {packages: ['controls']}); 
```

然后，您需要将 Table 对象转换为 ChartWrapper 对象，并添加一个 Dashboard 对象和 ControlWrapper 对象（以及 HTML div 来保存它们 - Dashboard div 应该包含控件和表格 div，但并非绝对必须拥有就是这样）。您将控件绑定到仪表板中的表格并绘制仪表板

```
function drawmsgtable(users) {
    var msgdata = $.ajax({
        url: "http://mysite/phpscripts/msgtable.php?users=" + users + "",
        dataType: "json",
        async: false
    }).responseText;
    var messagedatatable = new google.visualization.DataTable(msgdata);

    var options = {
        backgroundColor: 'transparent',
        width: 'auto'
    };

    $('#table_div').empty();

    var dashboard = new google.visualization.Dashboard(document.getElementById('dash'));

    var msgTable = new google.visualization.ChartWrapper({
        chartType: 'Table',
        containerId: 'table_div',
        options: options
    });

    var control = new google.visualization.ControlWrapper({
        chartType: 'StringFilter',
        containerId: 'table_div',
        options: {
             filterColumnIndex: 0
        }
    });

    dashboard.bind([control], [msgTable]);
    dashboard.draw(messagedatatable);
}​ 
```

**示例 HTML：**

```
<div id="dash">
    <div id="control_div"></div>
    <div id="table_div"></div>
</div>​​​​​​​​​​​​​ 
```

如果您希望能够过滤多个列，则需要为要过滤的每一列添加额外的控件。

# qt - 用于文件树和子文件夹的 QTreeWidget

> ID：12084778
> 
> 赞同：1
> 
> 时间：2012-08-23T04:32:47.293
> 
> 标签：qt, directory, subdirectory, qtreewidget, filetree

所以，我使用的是 QTreeWidget 来制作文件树。我可以轻松地创建文件和文件夹。但是当我们谈论子文件夹时问题就来了。例如：

```
Folder1
Folder1/SubFolder1
Folder1/SubFolder1/SubFolder2 
```

我如何准确地创建子文件夹？这是我制作文件夹的代码：

```
void Tree::addFolder(const QString &folderName)
{
    QTreeWidgetItem *item = new QTreeWidgetItem();
    item->setText(0, folderName); // Sets the text.
    m_projectItem->addChild(item); // Adds it to the main path. (It's a QTreeWidgetItem)
    this->expandItem(item); // Expands.
} 
```

我需要创建另一个函数（类似于 addSubFolder）来在另一个文件夹中添加文件夹吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T06:22:18.117

我假设 m_projectItem 是您的根节点。我将实现类似于的 addFolder 方法

```
QTreeWidgetItem* Tree::addFolder(QTreeWidgetItem* parent, const QString &folderName) {
    QTreeWidgetItem *item = new QTreeWidgetItem();
    item->setText(0, folderName); // Sets the text.
    parent->addChild(item); // Adds it to its parent (It's a QTreeWidgetItem)
    this->expandItem(item); // Expands.
    return item;
} 
```

然后我将实现另一种方法，该方法通过适当地调用 addFolder 来设置树 - 参考您的示例，以最简单的静态形式，这可能是

```
void Tree::createTree() {
   QWidgetItem* f1  = addFolder(m_projectItem, "Folder1");
   QWidgetItem* sf1 = addFolder(f1, "SubFolder1");
   addFolder(sf1, "SubFolder2");
} 
```

免责声明：我没有测试过代码 - 我最近在 Python 中实现了类似的东西 :)

# c++ - C++ 使用 boost fusion adapt_struct 迭代到嵌套结构字段

> ID：12084781
> 
> 赞同：9
> 
> 时间：2012-08-23T04:32:57.293
> 
> 标签：c++, reflection, introspection, template-meta-programming, boost-fusion

两个[stackoverflow](https://stackoverflow.com/a/2759203/362754) [答案](https://stackoverflow.com/a/1948473/362754)建议使用 fusion adapt_struct 迭代结构字段的方法。这种方法看起来不错。但是，如何迭代到本身就是结构的字段？

按照前面的答案，我想出了下面的代码。问题在于代码无法编译的“#if 0”子句。作为替代解决方案，我创建了“decode()”函数来获取指向目标参数的 void 指针。这可行，但在编译时会丢失类型信息。有更好的解决方案吗？

```
struct Foo_s { int i; };
BOOST_FUSION_ADAPT_STRUCT( Foo_s,  (int, i) )

struct Bar_s { int v; Foo_s w; };
BOOST_FUSION_ADAPT_STRUCT( Bar_s, (int, v)  (Foo_s, w) )

struct AppendToTextBox {
    template <typename T> void operator()(T& t) const {
        int status = 0;
        const char *realname = abi::__cxa_demangle(typeid(t).name(), 0, 0, &status);
        printf("  typename: %s  value: %s  realname: %s\n", typeid(t).name(),
               boost::lexical_cast<std::string>(t).c_str(), realname);
        std::string rn(realname);
        if ( rn.rfind("_s") == rn.size()-2 ) {
#if 0 /* this can not compile */
            for_each(t, AppendToTextBox());
#else
            decode(&t, rn);
#endif
        }
    }
};

void decode(void *f, std::string & intype ) {
    if ( intype.find("Foo_s") == 0 ) 
        for_each( *(Foo_s *)f, AppendToTextBox());
};

int main(int argc, char *argv[]) {
  Bar_s f = { 2, { 3 } };
  for_each(f, AppendToTextBox());
  return 0;
} 
```

我在[维基百科](http://en.wikipedia.org/wiki/Type_introspection)上看到，您可以使用 typeid 和 dynamic_cast，而不是传递类型字符串“intype”。但这只会是很小的改进。我正在寻找一种更适合 C++ 或增强语言设计的解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-23T06:27:34.943

我做了[一个你想要的例子，你可以在我的博客网站上看到](http://andres.senac.es/2011/04/generic-json-serializer.html)。在这种情况下，它是一个适用于嵌套结构的 JSON 序列化程序。自从我在 Boost.Serialization 库中看到它以来，它使用了“更多 Boost”解决方案。（另见下文并[住在 Coliru 上](http://coliru.stacked-crooked.com/a/491094b818c57a5b)。）

该解决方案使用结构的融合序列适应和遍历对象成员（递归）的元函数 - 使用 Boost.TypeTraits 和特定类型的不同特征。

您可以[在 googlecode corbasim 项目的站点上看到相同解决方案的更复杂示例，](http://code.google.com/p/corbasim/source/browse/branches/next_version/corbasim/core/reflective.hpp)用于创建运行时自反 API。

### 通用 JSON 序列化程序的代码清单：

**[在 Coliru 上](http://coliru.stacked-crooked.com/a/491094b818c57a5b)**看到它

```
#ifndef JSON_SERIALIZER_HPP
#define JSON_SERIALIZER_HPP

#include <boost/type_traits.hpp> // is_array, is_class, remove_bounds

#include <boost/mpl/eval_if.hpp>
#include <boost/mpl/identity.hpp>
#include <boost/mpl/next_prior.hpp>

#include <boost/fusion/mpl.hpp>
#include <boost/fusion/adapted.hpp> // BOOST_FUSION_ADAPT_STRUCT

// boost::fusion::result_of::value_at
#include <boost/fusion/sequence/intrinsic/value_at.hpp>
#include <boost/fusion/include/value_at.hpp>

// boost::fusion::result_of::size
#include <boost/fusion/sequence/intrinsic/size.hpp>
#include <boost/fusion/include/size.hpp>

// boost::fusion::at
#include <boost/fusion/sequence/intrinsic/at.hpp>
#include <boost/fusion/include/at.hpp>

namespace json
{

// Forward
template < typename T >
struct serializer;

namespace detail
{

namespace iterator
{

template < typename S, typename N >
struct Comma
{
    template < typename Ostream >
    static inline void comma(Ostream& os)
    {
        os << ", ";
    }
};

template < typename S >
struct Comma< S, typename boost::mpl::prior< typename boost::fusion::result_of::size< S >::type >::type >
{
    template < typename Ostream >
    static inline void comma(Ostream& os)
    {
    }
};

// Iteracion sobre una estructura
template < typename S, typename N >
struct StructImpl
{
    // Tipo del campo actual
    typedef typename boost::fusion::result_of::value_at< S, N >::type current_t;
    typedef typename boost::mpl::next< N >::type next_t;
    typedef boost::fusion::extension::struct_member_name< S, N::value > name_t;

    template < typename Ostream >
    static inline void serialize(Ostream& os, const S& s)
    {
        os << "\"" << name_t::call() << "\": ";
        ::json::serializer< current_t >::serialize(os, boost::fusion::at< N >(s));

        // Insert comma or not    
        Comma< S, N >::comma(os);

        StructImpl< S, next_t >::serialize(os, s);
    }
};

// Fin de la iteracion sobre estructuras.
template < typename S >
struct StructImpl< S, typename boost::fusion::result_of::size< S >::type >
{
    template < typename Ostream >
    static inline void serialize(Ostream& os, const S& s)
    {
        // Nada que hacer
    }
};

// Iterador sobre una estructura. Template fachada.
template < typename S >
struct Struct : StructImpl< S, boost::mpl::int_< 0 > > {};

} // iterator

template < typename T >
struct array_serializer 
{
    typedef array_serializer< T > type;

    typedef typename boost::remove_bounds< T >::type slice_t;

    static const size_t size = sizeof(T) / sizeof(slice_t);

    template < typename Ostream >
    static inline void serialize(Ostream& os, const T& t)
    {
        os << "[";
        for(size_t idx=0; idx<size; idx++)
        {
            ::json::serializer< slice_t >::serialize(os, t[idx]);
            if (idx != size-1)
                os << ", ";
        }
        os << "]";
    }

};

template < typename T >
struct struct_serializer 
{
    typedef struct_serializer< T > type;

    template < typename Ostream >
    static inline void serialize(Ostream& os, const T& t)
    {
        os << "{";
        iterator::Struct< T >::serialize(os, t);
        os << "}";
    }
};

template < typename T >
struct arithmetic_serializer 
{
    typedef arithmetic_serializer< T > type;

    template < typename Ostream >
    static inline void serialize(Ostream& os, const T& t)
    {
        os << t;
    }
};

template < typename T >
struct calculate_serializer
{
    typedef
        typename boost::mpl::eval_if< boost::is_array< T >,
            boost::mpl::identity< array_serializer < T > >,
        //else
        typename boost::mpl::eval_if< boost::is_class< T >,
            boost::mpl::identity< struct_serializer < T > >,
        //else
            boost::mpl::identity< arithmetic_serializer < T > >
        >
        >::type type;

};

} // detail

template < typename T >
struct serializer : public detail::calculate_serializer < T >::type
{
};

} // json

#endif // JSON_SERIALIZER_HPP

//#include "json.hpp"
#include <iostream>

struct my_other_struct
{
    int my_other_integer;
};

struct my_struct
{
    int my_integer;

    typedef int my_array_t[2];
    my_array_t my_array;

    typedef my_other_struct my_other_structs_t[3];
    my_other_structs_t my_other_structs;
};

BOOST_FUSION_ADAPT_STRUCT(my_struct, (int, my_integer) (my_struct::my_array_t, my_array) (my_struct::my_other_structs_t, my_other_structs))
BOOST_FUSION_ADAPT_STRUCT(my_other_struct, (int, my_other_integer))

int main(int argc, char *argv[])
{
    my_struct s1 = my_struct { 1, { 42, -42 }, { { 11 }, { 22 }, { 33 } } };

    json::serializer< my_struct >::serialize(std::cout, s1);

    std::cout << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T01:27:29.297

安德烈斯给出了一个很好的答案。我原始代码中的问题是“for_each”只接受序列类型。当编译器为一个 int 计算 T 时，它传递给“for_each”一个 int 参数，因此它失败了。Adries 解决方案背后的想法是将“for_each”隐藏在特定于序列的类（下面的 DecImplSeq_s）中，并为非序列字段提供替代类（DecImplVoid_s）。然后创建一个门面类来划分序列和非序列字段的解码（DecCalc_s）。

通用标题与下面的第一个示例一起显示 Adres 的想法。

```
/* compile with g++ 4.4.6: g++ -I boost_1_35_0 test.cpp */
#include <typeinfo>
#include <string>
#include <boost/fusion/include/sequence.hpp>
#include <boost/fusion/include/algorithm.hpp>
#include <boost/fusion/include/adapt_struct.hpp>
#include <boost/fusion/include/is_sequence.hpp>
#include <boost/mpl/eval_if.hpp>
#include <boost/lexical_cast.hpp>
#include <cxxabi.h>
#include <stdio.h>
using namespace boost::fusion; 
```

解决方案的通用代码直接来自 Adres 的示例：

```
template <typename T2> struct Dec_s;
struct AppendToTextBox {
  template <typename T> void operator()(T& t) const {
        //decode T and t as the original code here...
        Dec_s<T>::decode(t);
  }
};
template <typename T2> struct DecImplSeq_s {
  typedef DecImplSeq_s<T2> type;
  static void decode(T2   & f) { for_each(f, AppendToTextBox()); };
};
template <typename T2> struct DecImplVoid_s {
  typedef DecImplVoid_s<T2> type;
  static void decode(T2   & f) { };
};

template <typename T2> struct DecCalc_s {
  typedef typename
    boost::mpl::eval_if< traits::is_sequence<T2>, DecImplSeq_s<T2>, DecImplVoid_s<T2> >
  ::type type;
};

template <typename T2> struct Dec_s : public DecCalc_s<T2>::type { }; 
```

以下是如何使用上面的通用代码：

```
struct Foo_s { int i; char k[100]; };
struct Bar_s { int v; Foo_s w; };

BOOST_FUSION_ADAPT_STRUCT( Foo_s,  (int, i)  (char, k[100]) )
BOOST_FUSION_ADAPT_STRUCT( Bar_s, (int, v)  (Foo_s, w) )

int main(int argc, char *argv[]) {
  Bar_s f = { 2, { 3, "abcd" } };
  Dec_s<Bar_s>::decode(f);
  return 0;
} 
```

* * *

另一种不使用高级增强技巧更直接的解决方案，您可以为每个原始类型实现一个专门的解码器类，而无需使用“eval_if”。要使用此解决方案，您需要对结构中的每个原始类型进行专门化。

```
struct Foo_s { int i; char k[100]; };
BOOST_FUSION_ADAPT_STRUCT( Foo_s,  (int, i)  (char, k[100]) )

struct Bar_s { int v; Foo_s w; };
BOOST_FUSION_ADAPT_STRUCT( Bar_s, (int, v)  (Foo_s, w) )

template <typename T2> struct Dec_s {  static void decode(T2   & f); };
struct AppendToTextBox {
    template <typename T>
    void operator()(T& t) const {
        //decode T and t as the original code here...
        Dec_s<T>::decode(t);
    }
};

template <typename T2> void Dec_s<T2>::decode(T2 & f) {
    for_each(f, AppendToTextBox());
};
template<> void Dec_s<int >::decode(int  & f) {};
template<> void Dec_s<char>::decode(char & f) {};

int main(int argc, char *argv[]) {
  Bar_s f = { 2, { 3, "abcd" } };
  Dec_s<Bar_s>::decode(f);
  return 0;
} 
```

* * *

经过一些渐进的探索，这里有一个完整的例子。它使用更新的 boost 功能，但不使用早期的 boost 版本（如 1.35.0）构建。它适用于 boost 1.47.0 和 1.51.0。

通用标题部分：

```
#include <typeinfo>
#include <string>
#include <boost/fusion/include/sequence.hpp>
#include <boost/fusion/include/algorithm.hpp>
#include <boost/fusion/include/adapt_struct.hpp>
#include <boost/fusion/include/is_sequence.hpp>
#include <boost/mpl/eval_if.hpp>
#include <boost/type_traits.hpp> // is_array, is_class, remove_bounds
#include <boost/lexical_cast.hpp>
#include <cxxabi.h>
#include <stdio.h>

extern int dec_indents; /* 0, 4, 8, ... */
struct NL {
    static void print() { printf("\n");
        for (int i=0; i<dec_indents; i++) printf(" ");
    }
};

using namespace boost::fusion; 
```

然后是输出格式的通用解码器：

```
template <typename T2> struct Dec_s;

template <typename S, typename N> struct Comma {
  static inline void comma() { printf(" , "); }
};
template <typename S> struct Comma<S, typename
 boost::mpl::prior<typename boost::fusion::result_of::size<S>::type >::type> {
   static inline void comma() {}
};

template <typename S, typename N> struct DecImplSeqItr_s {
  typedef typename boost::fusion::result_of::value_at<S, N>::type current_t;
  typedef typename boost::mpl::next<N>::type next_t;
  typedef boost::fusion::extension::struct_member_name<S, N::value> name_t;
  static inline void decode(S& s) {
    printf(" \"%s\" = ", name_t::call() );
    Dec_s<current_t>::decode(boost::fusion::at<N>(s));
    Comma<S, N>::comma();  // Insert comma or not
    DecImplSeqItr_s<S, next_t>::decode(s);
  }
};
template <typename S>
struct DecImplSeqItr_s<S, typename boost::fusion::result_of::size<S>::type > {
    static inline void decode(S& s) { }
};
template <typename S>
struct DecImplSeqStart_s:DecImplSeqItr_s<S, boost::mpl::int_<0> > {};

template <typename S> struct DecImplSeq_s {
  typedef DecImplSeq_s<S> type;
  static void decode(S & s) {
    printf("  struct  start --- { --- ");
    dec_indents += 4;
    NL::print();
    DecImplSeqStart_s<S>::decode(s);
    dec_indents -= 4;
    NL::print();
    printf("  struct  done  --- } --- ");
    NL::print();
  };
};

template <typename T2> struct DecImplArray_s {
  typedef DecImplArray_s<T2> type;
  typedef typename boost::remove_bounds<T2>::type slice_t;
  static const size_t size = sizeof(T2) / sizeof(slice_t);
  static inline void decode(T2 & t) {
    printf("  array start --- [ --- ");
    dec_indents += 4;
    NL::print();
    for(size_t idx=0; idx<size; idx++) {
        Dec_s<slice_t>::decode(t[idx]);
        if (idx < size-1) {
            NL::print(); printf(" , ");
        }
    }
    dec_indents -= 4;
    NL::print();
    printf("  array done  --- ] --- \n");
    NL::print();
  }
};

template <typename T2> struct DecImplVoid_s {
  typedef DecImplVoid_s<T2> type;
  static void decode(T2   & t) {
    int status = 0;
    const char *realname = abi::__cxa_demangle(typeid(t).name(),0,0,&status);
    printf(" type %s", realname);
    NL::print();
  };
};

template <typename T2> struct DecCalc_s {
  typedef
    typename boost::mpl::eval_if< traits::is_sequence<T2>, DecImplSeq_s<T2>,
    typename boost::mpl::eval_if< boost::is_array<T2>,
                                 boost::mpl::identity< DecImplArray_s<T2> >,
    DecImplVoid_s<T2>   > >
  ::type type;
};

template <typename T2> struct Dec_s : public DecCalc_s<T2>::type { }; 
```

要使用这个通用解码器，您可以将其放入 .h 文件中，并使用以下 .c 代码：

```
/* compile with g++ 4.5.1: g++ -I boost_1_47_0 test.cpp */

#include "common_decoder.h"

using namespace boost::fusion;

int dec_indents=0;

struct Foo_s { int i; typedef char j_t[10]; Foo_s::j_t j; };
BOOST_FUSION_ADAPT_STRUCT( Foo_s, (int, i) (Foo_s::j_t, j) )

struct Bar_s { int v; typedef Foo_s w_t[2]; Bar_s::w_t w; };
BOOST_FUSION_ADAPT_STRUCT( Bar_s, (int, v) (Bar_s::w_t, w) )

int main(int argc, char *argv[]) {
  Bar_s f = { 2, {{ 3, "abcd" },{ 4, "defg" }} };
  Dec_s<Bar_s>::decode(f);
  return 0;
} 
```

# ios - CoreBluetooth 仅连接到最近的 RSSI (BLE)

> ID：12084782
> 
> 赞同：1
> 
> 时间：2012-08-23T04:33:06.747
> 
> 标签：ios, core-bluetooth, rssi, cbcentralmanager, cbperipheral

我正在寻找一种**仅**连接到基于 RSSI的**最近外围设备的方法。**我的目标是列出其他外围设备，但只有最近的外围设备连接。

由于 RSSI 仅**在设备连接时**可用，等到所有设备都连接然后根据 RSSI 确定最近的外围设备然后断开其余设备是否有意义？

## 连接

```
- (void) connectToPeripheral:(CBPeripheral *)peripheral
{
    NSDictionary * options = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:FALSE],CBConnectPeripheralOptionNotifyOnDisconnectionKey,nil];
    [myCBCentralManager connectPeripheral:peripheral options:options];
} 
```

## 使用的代表

```
- (void)centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral *)peripheral advertisementData:(NSDictionary *)advertisementData RSSI:(NSNumber *)RSSI

- (void)peripheral:(CBPeripheral *)peripheral didDiscoverCharacteristicsForService:(CBService *)service error:(NSError *)error;

- (void)centralManager:(CBCentralManager *)central didConnectPeripheral:(CBPeripheral *)peripheral; 
```

## CBP外设

```
/*!
 *  @property RSSI
 *
 *  @discussion While connected, the RSSI of the link in decibels.
 */
@property(retain, readonly) NSNumber *RSSI; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:56:28.617

这对我来说最有效。我最初扫描了外围设备，然后只选择了具有最高 RSSI 的外围设备。（是的，这确实会报告每个设备的 RSSI。您不需要先连接到它）。

但是，我发现这是不可靠的。RSSI 值波动太大。所以我做了以下事情。

我用了：

```
NSDictionary *options = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] forKey:CBCentralManagerScanOptionAllowDuplicatesKey];//allow duplicates with YES
[self.CM scanForPeripheralsWithServices:uuidArray options:options]; 
```

回调是：

```
- (void)centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral *)peripheral advertisementData:(NSDictionary *)advertisementData RSSI:(NSNumber *)RSSI 
```

这将继续报告每个外围设备的 RSSI，直到您调用该方法：

```
[self.CM stopScan]; 
```

中央（您的 iPhone）看到的每个广告包都会调用“didDiscoverPeripheral”。在此回调中添加一个例程以平均找到的每个唯一外围设备的 RSSI。我的经验是 1 秒的扫描时间就足够了，但这取决于您的外围设备广告的频率（即广告间隔）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:21:43.657

您可以在没有蜜蜂连接的情况下在 didDiscoverPeripheral Delegate Method 中读取每个外围设备的 rssi 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T17:53:26.740

使用[https://github.com/LGBluetooth/LGBluetooth/](https://github.com/LGBluetooth/LGBluetooth/) 它扫描外围设备并按平均 RSSI 排序。

```
[[LGCentralManager sharedInstance] scanForPeripheralsByInterval:4
                                                     completion:^(NSArray *peripherals)
 {
 }]; 
```

这是示例代码，它将扫描外围设备 4 秒并按 RSSI 对其进行排序

# c# - 记录性能指标的 Web 部件？

> ID：12084784
> 
> 赞同：0
> 
> 时间：2012-08-23T04:33:27.403
> 
> 标签：c#, sharepoint, sharepoint-2007, sharepoint-api

我正在尝试编写一个 Web 部件，当用户加载放置 Web 部件的页面时，它将一些性能指标记录到数据库中。虽然我可以毫无问题地写入数据库，但我不确定如何捕获任何相关的性能信息。

我查看了[ASP.NET 跟踪](http://msdn.microsoft.com/en-us/library/y13fw6we%28VS.71%29.aspx)，但看起来您不能将其嵌入到 Web 部件中 - 我还有其他可用的选项吗？

至少我希望能够捕获页面加载时间，以便我可以随着时间的推移对其进行基准测试并比较不同的用户。

**编辑**：虽然这只会捕获页面加载事件的一部分，但我仍然想知道如何做到这一点（站点之间的分解，即使在部分事件上仍然会给我我寻求的信息，前提是这些样本在所有情况下都是有限的） .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:47:46.393

尝试测量 webpart 中的内容可能会起作用，但它只捕获页面生命周期的一部分，因为 webpart 仅在每个页面加载中间的某个地方加载。

如果您“拥有”您正在谈论的 SharePoint 服务器并且能够部署您自己的[HttpModule](http://msdn.microsoft.com/en-us/library/bb470252(v=vs.100))，这可以让您收集更好的性能数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:24:22.450

我目前为我的 ASP.NET MVC 站点使用StackOverflow 的[MiniProfiler](http://miniprofiler.com/)。我强烈建议这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T04:43:34.257

我使用这种方法看到的问题是 Web 部件不会看到整个页面加载，它只会在几个脚本和样式表以及页面标题和左侧菜单已经加载后运行。

在我看来，将性能指标直接放在母版页中会更有意义。或者，如果您想使用 Web 部件，请使用当前页面外部的页面查看器 Web 部件，并将其加载到 iframe 中。

# html - html中的根路径链接

> ID：12084798
> 
> 赞同：1
> 
> 时间：2012-08-23T04:35:39.050
> 
> 标签：html, url, path

是否可以创建一个到根目录的相对路径，该路径在所有目录中都同样有效？

我在不同的目录级别上有一些文档，如果从其他目录加载，我的相对路径将变得无效。

因此，如果我使用相对路径将我的文本/html 存储在数据库中，它们根本无法在某些页面上运行。

相对路径示例：

```
../imgs/my_image.png 
```

然后，如果我在开发网站时存储完整路径，每次我转向新方向或从本地主机到实际生产域时，所有嵌入的图像（来自 db 作为文本/html）也不起作用.

绝对路径示例：

```
127.0.0.1/imgs/my_image.png 
```

所以问题是，是否可以不指定确切的主机名，比如......*`pseudocode: %root%/imgs/my_image.png`*或者其他一些解决它的方法？

（我的意思是，无需对这些路径进行额外的服务器处理，例如使用正则表达式替换路径，或创建额外的表格来存储我的图片，并且无需将所有页面移动到一个目录中，就像在 CMS 站点上使用相对路径时发生的那样。）

老实说，这让我很困扰，除了每次需要时对记录进行额外的处理和更新之外，我想不出任何别的办法。但我想贡献一些我偶然发现的东西。

尽管它在 Chrome 和 IE 等现代浏览器中确实有效，但我完全怀疑这是一个正确的代码。但是，如果我使用最高级别的 root 相对路径，它恰好也适用于较低级别。

例如，假设我们有一个这样的页面`127.0.0.1/auth/profile/content/index.php`，我们的图像路径是`127.0.0.1/imgs/my_image.png`，现在下面的代码也适用于较低级别的页面，例如 `127.0.0.1/auth/prof.php`，甚至在根页面本身`127.0.0.1/index.php`：

```
../../../my_image.png 
```

尽管从逻辑上讲，根文件夹中的页面上没有较低的级别。所以我也想知道更多关于它的正确或错误，以及我们是否应该在生产中使用它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:37:15.530

要从该域下的任何页面指向网站的根目录，只需使用`/`

所以

`http://www.example.com/pages/page.html`->`/pages/page.html`

`http://www.example.com`->`/`

`http://www.example.com/a/b/c/d/e/f.png`->`/a/b/c/d/e/f.png`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T04:38:21.327

只需使用`/`. 它工作得很好而且很明显。

例如，如果您想在 css 中使用图像并且`images`在应用程序的根目录中有一个名为的文件夹，那么您只需使用`url(/images/image.png)`.

# ajax - 在 asp.net 的 mvc3 中使用多个部分视图执行发布操作

> ID：12084800
> 
> 赞同：0
> 
> 时间：2012-08-23T04:35:58.027
> 
> 标签：ajax, asp.net-mvc-3, updatepanel, partial-views

它可能会被重复。但我需要有关实施此方案的方法的指导。我在asp.net mvc3中有控制器。我需要实现包含多个局部视图的视图。每个局部视图都有与数据库的数据事务。表示将数据发布到数据库。我有这样的事情：

```
<div >
    <div id="div1">
    <% Html.RenderPartial("PartialView1", ViewData("pv1"))
        %>
    </div>

    <div id="div2">
    <% Html.RenderPartial("PartialView2", ViewData("pv2")) %>
    </div>

    <div id="div3">
    <% Html.RenderPartial("PartialView3", ViewData("pv3")) %>
    </div>

    <div id="div4">
    <% Html.RenderPartial("PartialView4", ViewData("pv4")) %>
    </div> 
```

在 Controller 中，我很困惑如何仅渲染相应的部分视图。因为除了发布部分视图的数据外，其他部分视图不应影响。意味着我需要更新面板类型的功能。但我有点困惑如何实现这一目标。

**编辑：简而言之，如何在 mvc 3 的单个页面上构建多个更新面板？**

**考虑图像：** ![在此处输入图像描述](../Images/444535bd96847712f7e44c1a41475275.png)

这张图片不是我在代码中解释的。请理解这个概念。在第二个部分视图中，这里的功能明智的是有下拉菜单，它总是会填满 get 操作。在添加用户时，不应调用该下拉列表的 getusers 操作。简而言之，所有局部视图都应该独立于彼此的动作。只有各自的局部视图才会受到某些动作的影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:14:37.003

您可以使用 Ajax 表单并指示他们更新相应的 div：

```
<div>
    <% using (Ajax.BeginForm("SomeAction", "SomeController", new AjaxOptions { UpdateTargetId = "div1" })) { %>
        <div id="div1">
            <% Html.RenderPartial("PartialView1", ViewData("pv1")); %>
        </div>
    <% } %>

    <% using (Ajax.BeginForm("SomeAction", "SomeController", new AjaxOptions { UpdateTargetId = "div2" })) { %>
        <div id="div2">
            <% Html.RenderPartial("PartialView2", ViewData("pv2")); %>
        </div>
    <% } %>

    <% using (Ajax.BeginForm("SomeAction", "SomeController", new AjaxOptions { UpdateTargetId = "div3" })) { %>
        <div id="div3">
            <% Html.RenderPartial("PartialView3", ViewData("pv3")); %>
        </div>
    <% } %>

    <% using (Ajax.BeginForm("SomeAction", "SomeController", new AjaxOptions { UpdateTargetId = "div4" })) { %>
        <div id="div4">
            <% Html.RenderPartial("PartialView4", ViewData("pv4")); %>
        </div>
    <% } %>
</div> 
```

# c# - 不遵守 WebClient 超时

> ID：12084804
> 
> 赞同：1
> 
> 时间：2012-08-23T04:36:19.463
> 
> 标签：c#, console-application, webclient

我通过继承本机类并覆盖该方法创建了一个`WebClient`具有更长属性的新类：`Request.Timeout``WebClient``GetWebRequest`

```
public class LongerTimeoutWebClient : WebClient
{
    public LongerTimeoutWebClient()
    {
    }

    protected override WebRequest GetWebRequest(Uri address)
    {
        WebRequest r = base.GetWebRequest(address);
        r.Timeout = 30 * 1000; //30 second timeout
        return r;
    }
} 
```

我使用这个新`WebClient`类来并行调用多个网页：

```
Parallel.ForEach(links, new ParallelOptions { MaxDegreeOfParallelism = 2 }, link =>
        {
            byte[] requestBytes;

            var stopwatch = new System.Diagnostics.Stopwatch();
            using (var client = new LongerTimeoutWebClient())
            {
                try
                {
                    ServicePointManager.Expect100Continue = false;

                    stopwatch.Start();
                    requestBytes = client.DownloadData(link);
                }
                catch (Exception ex)
                {
                    stopwatch.Stop();
                    Console.WriteLine("Could not get: " + link + ". Timeout after: " + stopwatch.Elapsed.TotalSeconds + "s");
                    Console.WriteLine(ex);
                    return;
                }
            }
//More code here
} 
```

但是，我间歇性地遇到`408 Request Timeout`错误。发生超时错误时的秒表值在 20 秒左右。

我还检查了新类的方法使用的对象的`Timeout`属性，它设置为 30000 (ms)。`Request``GetWebResponse``WebClient`

我已将 设置`MaxDegreeOfParallelism`为 1，但仍然出现错误，因此这可能意味着并行化不是问题的原因。

为什么我`Request`的超时时间是 20 秒而不是 30 秒？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:43:30.747

有两种超时。客户端超时和服务器超时。在这种情况下，您可能遇到的是服务器超时。检查一次。

# php - PHP：如何比较两个字符串中存在的任何一个单词

> ID：12084805
> 
> 赞同：1
> 
> 时间：2012-08-23T04:36:22.967
> 
> 标签：php, strpos

我的情况是这样的：

```
<?php
$var1 = "Top of British";
$var2 = "Welcome to British, the TOP country in the world";

$var1 = strtolower($var1);
$var2 = strtolower($var2);

if (strpos($var1, $var2) !== FALSE) {
echo "TRUE";
}
?> 
```

它不起作用，我如何检测两个字符串上都存在 TOP 或 British？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:41:24.617

从字符串中删除标点符号，将它们都转换为小写，将空格字符上的每个字符串分解为字符串数组，然后遍历每个字符串以查找任何单词匹配：

```
$var1 = preg_replace('/[.,]/', '', "Top of British");
$var2 = preg_replace('/[.,]/', '', "Welcome to British, the TOP country in the world");

$words1 = explode(" ",strtolower($var1));
$words2 = explode(" ",strtolower($var2));

foreach ($words1 as $word1) {
    foreach ($words2 as $word2) {
       if ($word1 == $word2) {
          echo $word1."\n";
          break;
       }
    }
} 
```

**演示：[http ://codepad.org/YtDlcQRA](http://codepad.org/YtDlcQRA)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:42:46.407

在字符串中查找 TOP 或 BRITISH

```
<?php
$var1 = "Top of British";
$var2 = "Welcome to British, the TOP country in the world";

$var1 = strtolower($var1);
$var2 = strtolower($var2);

if (strpos($var1, 'top') && strpos($var1, 'british')) {
echo "Either the word TOP or the word BRITISH was found in string 1";
}
?> 
```

更普遍地将字符串 2 中的单词与字符串 1 中的单词匹配

```
<?php
$var1 = explode(' ', strtolower("Top of British"));
$var2 = "Welcome to British, the TOP country in the world";

$var2 = strtolower($var2);

foreach($var1 as $needle) if (strpos($var2, $needle)) echo "At least one word in str1 was found in str 2";

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T04:44:05.467

检查短语中单词交集的通用示例...您可以在结果中检查任何过时的停用词，例如“of”或“to”

```
<?php
$var1 = "Top of British";
$var2 = "Welcome to British, the TOP country in the world";

$words1 = explode(' ', strtolower($var1));
$words2 = explode(' ', strtolower($var2));

$iWords = array_intersect($words1, $words2);

if(in_array('british', $iWords ) && in_array('top', $iWords))
  echo "true"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T04:45:00.030

PHP 有一个函数用于查找属于两个数组的元素：

```
$var1 = explode(" ", strtolower("Top of British"));
$var2 = explode(" ", strtolower("Welcome to British, the TOP country in the world"));
var_dump(array_intersect($var1, $var2)); // array(1) { [0]=> string(3) "top" } 
```

# ios - 我们可以在 iphone 运行时在图标上添加文本吗？

> ID：12084806
> 
> 赞同：-1
> 
> 时间：2012-08-23T04:36:47.537
> 
> 标签：ios

我正在开发一个基于日历的应用程序。我需要在应用程序图标上添加今天的日期。

例如，在 iPhone 默认日历应用程序中，它会每天动态更改其图标文本。

我们可以使用 iphone sdk 做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:53:46.660

iPhone 日历应用程序使用私有 API 来更改其图标。苹果可以做到这一点；第三方开发者（至少在 App Store 中）不能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T05:13:42.393

The answer is NO.

However many developers in the past have requested this feature on Radar(including me). The original enhancement request is being trcked with the Radar ID **5872097**.

If you wish to see the feature in future iOS sdks, raise your own request on [radar](https://bugreport.apple.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T04:52:57.773

截至 2012 年 5 月，这仍然在[“愿望清单”](http://www.theverge.com/2012/5/12/3016671/ios-6-dynamic-app-icons-would-solve-a-lot-of-issues)上。我相信 Apple 日历应用程序具有动态图标，因为它是由 Apple 制作的。日历市场肯定有不公平的优势；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T06:29:34.323

是的，您可以这样做，只需要在您正在使用的任何服务器上更新该图像。然后您需要用 iu 从您的服务器位置获取的新图像替换您的 icon.png 图像。

# javascript - 如何从以“|”分隔的字符串中获取最后一个文本

> ID：12084813
> 
> 赞同：0
> 
> 时间：2012-08-23T04:37:30.087
> 
> 标签：javascript, separator

我有一个相同的字符串

```
a|b|c|d|e|....|n 
```

我需要在 javascript 中获取此字符串中的最后一项。此字符串中可能有 n 个项目。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T04:39:27.760

```
yourString.split('|').slice(-1)[0] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T04:41:42.700

有点冗长但可能是最直接的方式：

```
var str = 'a|b|c|e|f';
var arr = str.split('|'); // split into array
alert(arr[arr.length-1]); // get last element of the array 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T19:44:35.040

如果您的字符串很长，您将希望避免使用`.split('|')`，因为这将创建一个可能包含许多元素的新数组。我喜欢`.split('|')`，因为你想要做的事情是明确的，但如果你想要效率，你可以使用：

```
yourString.substr(yourString.lastIndexOf('|')+1) 
```

（这甚至适用于、 和等极端情况`"abc"`，因为如果没有找到，lastIndexOf 返回 -1。）`"abc|"``"|abc"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T04:42:00.953

```
var str = "a|b|c|d|e|f|g";

var arr = str.split("|");
var last_item = arr[arr.length-1]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T04:43:13.667

现在来点完全不同的东西！

```
/(?:\||^)([^|]*)$/.exec(str)[1] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T04:53:14.847

尝试一下......

```
str='asfd|asdf|as|df|as|asdf|asf';
str.split('|').slice(b.length-1)[0] 
```

# mysql - Mysql：当一个表结果为1行时返回0，其他表结果为2行

> ID：12084814
> 
> 赞同：-4
> 
> 时间：2012-08-23T04:37:37.880
> 
> 标签：mysql

如何显示结果

```
Temp | Order | Payment
A | 5 | 3
A | 4 | 0
B | 2 | 2
B | 0 | 3
C | 3 | 0 
```

与：first_table：

```
Name | Description
A | Description A
B | Description B
C | Description C 
```

第二表：

```
Name | order
A | 5
A | 4
B | 2
C | 3 
```

第三表：

```
Name | Payment
A | 3
B | 2
B | 3 
```

含义：有 2 个订单（值：4,5），名称 = A。有 1 个订单（值：3），名称 = A 我要显示的结果：

```
Name | Order | Payment
A | 4 | 3 |
A | 5 | 0 | 
```

有什么帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T02:00:40.083

您需要使用[JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)。

在您的示例中，订单 A5 没有付款，因此您应该使用 LEFT JOIN，这将导致该行 (A5) 的付款为 NULL。LEFT JOIN 基本上意味着“从第一个表中选择行，如果第二个表中没有匹配项，则输入 NULL”。

只需在 name=a 的字段名称上对 second_table 和 third_table 执行 LEFT JOIN。这是一个非常基本的例子，所以我不会给你确切的查询，你应该自己学习。

# android-webview - 我有一个 jquery 页面，我想将它添加到 android 活动中，如何完成？

> ID：12084817
> 
> 赞同：0
> 
> 时间：2012-08-23T04:38:12.317
> 
> 标签：android-webview

我是 android 开发新手。我在 jquery 中使用 html 和 css 创建了一个页面，我想将它添加到 android 活动中，但我无法做到，谁能给我提供正确的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T04:42:42.870

如果您正在谈论如何制作混合应用程序（使用 HTML/CSS/Javascript 制作应用程序但仍然具有原生 Android 功能），我会看看[Phonegap](http://phonegap.com/)。只需按照说明进行操作，它就可以让您上传 HTML/CSS，而您的 AndroidActivity 只需打开它。希望这可以帮助。

# javascript - 管道值：Ajax + JQuery

> ID：12084819
> 
> 赞同：0
> 
> 时间：2012-08-23T04:38:32.107
> 
> 标签：javascript, jquery, ajax

我有一个函数，我在其中执行 ajax 请求并等到我得到响应并返回一个值，但返回的值是未定义的。怎么了？

```
 function GetVMData(url_s){ 
                return $.ajax({ 
                       url: url_s, 
                       crossDomain: true,  
                       dataType: 'jsonp', 
                       error: function(xhr, status, error) {  
                           alert('failed') 
                        }  
                   }).pipe(function(data) { return data[4]; }); 
            } 
```

如果我在 ajax 回调中打印 data[4] 的值，它会打印正确的值，因此我知道请求正在通过，但是当我尝试这个时：

```
 var cord;
            cord = GetVMData(url).done(function(cpu_USG) { 
            return cpu_USG;
            }); 
            alert(cord) 
```

绳子的价值是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:42:15.493

```
 var cord;
    cord = GetVMData(url).done(function(cpu_USG) { 
    return cpu_USG;
    }); 
    alert(cord) 
```

此代码异步运行。因此，您需要在回调中执行**所有操作，例如：**

```
 GetVMData(url).done(function(cpu_USG) { 
        alert(cpu_USG);
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:43:21.090

这里：

```
var cord;

cord = GetVMData(url).done(function(cpu_USG) { 
  return cpu_USG;
});

alert(cord); 
```

`cord`包含对象，而不是值。顺便说一句，你不知道 ajax 调用会在哪里结束，所以你应该熟悉回调的概念。

举个例子：

```
function makeRequest(url, callback) { 
  $.ajax({
    url: url, 
    crossDomain: true,  
    dataType: 'jsonp',

    error: function(xhr, status, error) {  
      alert('failed') 
    },

    success: callback
  }); 
}

var do_something = function (data) {
  alert(data[4]);
};

cord = makeRequest(url, do_something); 
```

# networking - 将图像从本地网络显示到 JSF Web 应用程序

> ID：12084825
> 
> 赞同：1
> 
> 时间：2012-08-23T04:40:20.937
> 
> 标签：networking, jsf-2, datatable, local

我的本地网络中有一些图像文件，我想在 JSF 的 DataTable 中显示它们。我正在使用 JSF2.0 和 Tomahawk 1.1.13。下面是 JSF 代码。

```
 <t:dataTable newspaperColumns="3" value="#{startupBean.colorList}"     newspaperOrientation="horizontal" var="colorBO">

    <f:facet name="spacer">
   <f:verbatim></f:verbatim>
   </f:facet>
   <h:column>
    <h:graphicImage id="colors" alt="jsf-sun" url="#{colorBO.color_url}"> 
    </h:graphicImage>
    </h:column>
    </t:dataTable> 
```

我在我的支持 bean 中将文件的路径指定为“\\root\sub\sub\xxx.jpg”。但是当 JSF 页面呈现时，它会显示一个默认图标。当我右键单击图标并检查属性时，我得到了以下内容。

[http://localhost:8080/projname//root/sub/sub/xxx.jpg](http://localhost:8080/projname//root/sub/sub/xxx.jpg)

我尝试在路径名中同时使用反斜杠和正斜杠。但是输出没有变化。我不知道 http 部分是如何进入文件路径的。我肯定错过了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:45:20.713

你在这里犯了一个概念上的错误。网络浏览器必须在遇到`<img>`元素时通过有效且可访问的 URL 单独下载图像，而不是网络服务器必须以某种方式将本地磁盘文件系统中的图像神奇地嵌入到返回给网络浏览器的 HTML 页面中.

您需要通过有效且可访问的 URL 使图像可用，以便网络浏览器可以下载它。本地磁盘文件系统路径肯定不是有效且可访问的 URL。更重要的是，如果服务器机器的本地磁盘文件系统内容自动完全暴露在万维网中，这将是一个*巨大的安全漏洞。*

解决此问题的最简单方法之一就是将图像放在公共 Web 内容中（您的 JSF 文件也在那里），以便在 Web 中可用。

另一种方法是配置服务器以将文件夹发布到 Web 中，这样它也可以通过特定的 URL 访问。目前还不清楚您使用的是哪个服务器，所以这里只是一个 Tomcat 示例：

```
<Context docBase="/root/sub/sub" path="/images" /> 
```

通过这种方式图像可用`http://localhost:8080/images/xxx.jpg`，然后这种`<h:graphicImage>`方法应该起作用：

```
<h:graphicImage src="/images/xxx.jpg" /> 
```

### 也可以看看：

*   [使用 <h:graphicImage> 或 <img> 标签从 webapps / webcontext / deploy 文件夹外部加载图像](https://stackoverflow.com/questions/4543936/load-the-image-from-outside-of-webcontext-in-jsf)
*   [在 Java Web 应用程序中从应用程序服务器外部提供静态数据的最简单方法](https://stackoverflow.com/questions/1812244/simplest-way-to-serve-static-data-from-outside-the-application-server-in-a-java)

# javascript - 如何将功能绑定到浏览器缩放

> ID：12084826
> 
> 赞同：0
> 
> 时间：2012-08-23T04:40:24.297
> 
> 标签：javascript, jquery

我知道可以通过以下方式绑定重新调整大小：

> $(window).bind('resize', myFunction)

然而

> $(window).bind('zoom', myFunction)

不工作。我试图绑定的事件是当您缩放并使文本更大时 cmd + 或 ctrl + 。任何人如何绑定到该事件？谢谢你。

# c# - 短时间显示窗口窗体弹出，然后自动关闭

> ID：12084838
> 
> 赞同：4
> 
> 时间：2012-08-23T04:41:41.960
> 
> 标签：c#, winforms, mdi

我创建了一个窗口窗体作为弹出屏幕。我只需要在我的 Windows 应用程序中将该表单显示为弹出窗口几次。

暂时会显示，一段时间后会自动关闭。

我需要在 MDI 父文件中将该表单显示为右下角。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:53:45.313

这是你可以做的方式..它就像一个`Splash Screen`

```
private void popup()
    {

        Thread th = new Thread(() =>
        {
            try
            {
                Open();
            }
            catch (Exception)
            {

            }
        });
        th.Start();
        Thread.Sleep(3000);   //you can update this time as your requirement
        th.Abort();
    }

    private void Open()
    {
        Form1 frm = new Form1();
        frm.ShowDialog();   // frm.Show(); if MDI Parent form
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:45:47.857

您可以使用[System.Windows.Forms.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)触发弹出窗口处理以自行关闭。

.NET Framework 中还有其他计时器类。此计时器负责调用 UI 线程上的 UI 事件处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T05:09:21.350

我猜你正在寻找的是一个闪屏。[这是](http://www.codeproject.com/Articles/5454/A-Pretty-Good-Splash-Screen-in-C)一篇关于它的好文章。

# javascript - Add multiple world clocks in the same window?

> ID：12084840
> 
> 赞同：0
> 
> 时间：2012-08-23T04:41:44.807
> 
> 标签：javascript, html

I am writing a script to display multiple world clocks in the same window. When I add the first clock its working fine, but when I add the second clock it just duplicates the first clock. It also doesn't tick.

When I try to change the zone it updates the first clock.

```
 <SCRIPT language="javascript">
            function addRow(tableID) {

            var table = document.getElementById(tableID);

            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);

            var colCount = table.rows[0].cells.length;

            for(var i=0; i<colCount; i++) {

            var newcell = row.insertCell(i);

            newcell.innerHTML = table.rows[0].cells[i].innerHTML;

            //alert(newcell.childNodes);
            switch(newcell.childNodes[0].type) {
            case "text":
            newcell.childNodes[0].value = "";
            break;
            case "checkbox":
            newcell.childNodes[0].checked = false;
            break;
            case "select-one":
            newcell.childNodes[0].selectedIndex = 0;
            break;
            }
         }
     }

            function deleteRow(tableID) {
            try {
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;

            for(var i=0; i<rowCount; i++) {
            var row = table.rows[i];
            var chkbox = row.cells[0].childNodes[0];
            if(null != chkbox && true == chkbox.checked) {
            if(rowCount <= 1) {
            alert("Cannot delete all the rows.");
            break;
            }
            table.deleteRow(i);
            rowCount--;
            i--;
             }

           }
          }catch(e) {
           alert(e);
         }
      }

     </SCRIPT>

    <script language="javascript">

    var timerRunning = false;
    var timezone = "Greenwich Mean Time";  // what time zone are you in ?
    var adjust = 0;

    function timeCheck(diff) {

            if (timerRunning) {
                clearTimeout(updatetime);
                timerRunning = false; 
            }

            gmtOffset = eval(diff);

            checkDateTime();
    }

    function checkDateTime() {

            var today = new Date();
            var year = today.getYear() + 1900;
            var month = today.getMonth()+1;
            var date = today.getDate();
            var day = today.getDay();
            var hour = today.getHours();
            var minute = today.getMinutes();
            var second = today.getSeconds();

            var lastSat = date - (day+1);
            while (lastSat < 32) lastSat+=7;
            if (lastSat > 31) lastSat+=-7;
            var firstSat = date - (day+1);
            while (firstSat > 0) firstSat+=-7;
            if (firstSat < 1) firstSat+=7;
            if ((((month == 4) && (date >= firstSat)) || month > 4) &&
            (month < 11 || ((month == 10) && day <= lastSat))) adjust += 60;
            yourOffset = (new Date()).getTimezoneOffset();
            yourOffset = yourOffset + adjust;

            var xx = navigator.appName
            var xy = navigator.appVersion;
            xy = xy.substring(0,1);
            if ((xy == 4) && (xx == "Netscape")) yourOffset = yourOffset+adjust;
            if ((((month == 4) && (date > 20)) || month > 4) && (month < 11 || ((month == 10) &&
            day < 30))) adjust -= 60;

            ourDifference = eval(gmtOffset - yourOffset);
            var half = eval(ourDifference % 60);
            ourDifference = Math.round(ourDifference / 60);
            hour = eval(hour - ourDifference);
            var m = new Array("",
            "Jan","Feb","Mar",
            "Apr","May","Jun",
            "Jul","Aug","Sept",
            "Oct","Nov","Dec");
            var leap = eval(year % 4);

            if ((half == -30) || (half == 30)) minute += 30;
            if (minute > 59) minute -= 60, hour++;
            if (minute < 0) minute += 60, hour--;
            if (hour > 23) hour -= 24, date += 1;
            if (((month == 4) || (month == 6) ||
            (month == 9) || (month == 11)) && (date==31)) date = 1, month ++;
            if (((month == 2) && (date > 28)) && (leap != 0)) date = 1, month ++;
            if ((month == 2) && (date > 29)) date = 1, month++;
            if (hour < 0) hour += 24, date --;
            if ((date == 32) && (month == 12)) month = m[1], date = 1, year++;
            if (date == 32) date = 1, month++;
            if ((date < 1) && (month == 1)) month= m[12], date = 31, year--;
            if (date < 1) date = 31, month --;
            if (((month == 4) || (month == 6) ||
            (month== 9) || (month == 11)) && (date == 31)) date = 30;
            if ((month == 2) && (date > 28)) date = 29;
            if (((month == 2) && (date > 28)) && (leap != 0)) date=28;

            for (i=1; i<13; i++) {
                    if (month == i) {
                        month = m[i]; break;
                }
            }

            var dateTime = hour;
            dateTime = ((dateTime < 10) ? "0":"") + dateTime;
            dateTime = "   " + dateTime;
            dateTime += ((minute < 10) ? ":0" : ":") + minute;
            dateTime += ((second < 10) ? ":0" : ":") + second;
            dateTime += (hour >= 12) ? " PM, " : " AM, ";
            dateTime += month + " " + date + ", " + year;

            document.getElementById("zonetime").innerHTML = dateTime;

            updatetime=setTimeout("checkDateTime()", 900);
            timerRunning = true;
    }

    </script>

     <INPUT type="button" value="Add Clock" onclick="addRow('dataTable')" />

     <INPUT type="button" value="Delete Clock" onclick="deleteRow('dataTable')" /><br/><br/>

    <TABLE id="dataTable" width="350px" border="1" align="center">
            <TR>
                 <TD><INPUT type="checkbox" name="chk"/></TD>
                <TD>
                    <select onchange="timeCheck(this.value)" size="0" align="center">
                        <option value="">SELECT --> COUNTRY</option>
                        <option value="+480">Pacific</option> // Australia UTC offset value is 10
                        <option value="+420">Central</option>
                        <option value="+300">Estern</option>
                        <option value="+600">Hawaii</option>
                        <option value="+360">Mexico</option>
                        <option value="-330">New Delhi</option>
                        <option value="-480">HONG KONG</option>
                        <option value="-540">TOKYO</option>
                        <option value="+0">London</option>
                    </select>
                </TD>
                <TD><div id="zonetime"></div></TD>
            </TR>
    </TABLE> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:08:48.330

该`gmtOffset`变量是全局的，并且您的时钟输出单元格在每一行上都由相同的 id 引用。这意味着每次更改时区时，都会更新具有该 ID 的第一个单元格，即第一行的最后一个单元格。

您必须确保每个时钟的 id 都是唯一的，例如`<td><div id="zonetime_n"</div></td>`，其中**n**是行号。然后，您需要将该 id 映射到其时区并进行相应更新。

# javascript - Any specific order for Java script and jquery

> ID：12084842
> 
> 赞同：1
> 
> 时间：2012-08-23T04:42:10.040
> 
> 标签：javascript, jquery

I am using one java script and one jquery in my html file in head tag, but my problem both the scripts are not working, i have used one slide show script and one nav menu script, in this both only one is working , is there any specific order to write these scripts , please find the below script order i have used , i am getting only slideshow. please help me out .

```
<script type="text/javascript">        google.load("mootools", "1.2.1");</script>
<script type="text/javascript" src="Js/MenuMatic_0.68.3.js" type="text/javascript"
    charset="utf-8">  </script>
<script type="text/javascript">
    window.addEvent('domready', function () {
        var myMenu = new MenuMatic();
    });</script>
<script type="text/javascript" src="Js/jquery.min.js"></script>
<script type="text/javascript" src="Js/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="Js/slides.min.jquery.js"></script>
<script type="text/javascript">

    $(function () {
        $('#slides').slides({
            preload: true,
            preloadImage: 'img/loading.gif',
            play: 5000,
            pause: 2500,
            hoverPause: true
        });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:51:15.840

看起来您在同一页面上加载了 MooTools 和 jQuery，这将起作用，但您必须替换简写的 jQuery 函数。jQuery 为 jQuery(function) 使用 $(function) 简写，这种简写符号可能会导致问题。

您将需要在 jquery 的任何地方使用 jQuery.noConflict() 函数，并且它的插件使用 $.

[http://docs.jquery.com/Using_jQuery_with_Other_Libraries](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)

```
<script type="text/javascript">

    var $j = jQuery.noConflict();

    $j(function () {
        $j('#slides').slides({
            preload: true,
            preloadImage: 'img/loading.gif',
            play: 5000,
            pause: 2500,
            hoverPause: true
        });
    });

</script> 
```

# iphone - 将 UISearchBar.text 传递给另一个函数

> ID：12084849
> 
> 赞同：-1
> 
> 时间：2012-08-23T04:42:47.913
> 
> 标签：iphone, ios, uisearchbar

这是我第一次使用 a `UISearchBar`，到目前为止一切顺利，但现在单击“搜索”后，我试图将文本传递给另一个处理搜索的函数。

```
[_searchModel searchIssueForTerm:searchBar.text inIssue:_dataModel.currentIssue]; 
```

这只是给我一个错误，说：

> -[CFString copyWithZone:]: 消息发送到已释放实例 0x7dee900

但是当我使用它时，它就可以工作

```
[_searchModel searchIssueForTerm:@"test" inIssue:_dataModel.currentIssue]; 
```

为什么会这样？在我的`- (void)searchIssueForTerm:(NSString *)searchTerm inIssue:(Issue *)issue`我存储`NSString`在另一个变量中，为什么它会被释放呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T02:24:45.113

在搜索了一段时间后，我设法通过将变量保存在其他地方来修复它，似乎它在途中迷路了。

```
_currentSearchTerm = [[NSString alloc] initWithString:searchTerm]; 
```

# photoshop - Photoshop CS5：使用“智能对象”复制图层

> ID：12084851
> 
> 赞同：0
> 
> 时间：2012-08-23T04:42:51.820
> 
> 标签：photoshop

不确定我是否在正确的地方。如果没有，请指导我！

我想利用 Photoshop 的“智能对象”来更轻松地管理我的图层。我有大约 20 层将被复制 10 次......我宁愿将它们作为单个对象而不是每个 20 层来操作。

我从 20 层中创建了一个智能对象……当我复制智能对象并编辑到新复制的对象时……任何编辑也会影响原始对象。

有没有办法从重复项中制作出不同的智能对象，以便可以独立编辑它们？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T09:45:51.183

首先复制 20 层，然后将每个组变成自己的智能对象（复制智能对象本身只会创建原始对象的另一个实例）。

您还可以**在智能对象中使用智能对象。**这使它类似于类系统或 CSS 样式——通过使用相同的内部智能对象的实例，每个智能对象可以具有相同的通用抽象模板，然后可以通过将不同的元素包含到单独的顶层来根据需要使它们不同对象。顶级智能对象都应该单独创建，而不是重复创建。应该复制保持不变的内部对象。

如果选择所有图层很麻烦，请使用“**图层组**”（“图层”面板底部的新图层图标旁边的文件夹图标）

选择所有 20 个图层并将它们拖到文件夹图标上。这将对图层进行分组。

现在通过将组拖到“**新图层**”图标上来复制组。

现在您应该有两个原件可以使用。只要确保你跟踪哪个是哪个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T11:58:24.477

您可以通过复制创建一个新的智能对象。这将复制智能 obj 内容，但它将是一个“新”内容。因此，如果您对新版本进行任何修改，它将仅保留在那里。

为此，只需右键单击图层面板中的智能对象，然后选择“通过复制新建智能对象”:)

# objective-c - CFRelease 的替代方案是什么

> ID：12084858
> 
> 赞同：0
> 
> 时间：2012-08-23T04:43:27.227
> 
> 标签：objective-c, automatic-ref-counting

如果我们不使用 ARC 使用 CFRelease，那么替代方案是什么。如果我们使用 ARC，那么 CFRelease 会抛出错误。我尝试过 _bridge 和 _bridge_transfer 都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T04:54:27.537

听起来您正试图在代码中互换使用一些 Core Foundation 和 Objective-C 对象，但没有看到任何代码，我无法确定发生了什么。但是，如果您还没有意识到，有一个非常重要的说明需要提及：

ARC 只自动管理 Objective-C 对象的内存，这就是你不再需要调用的原因`release`。因此，ARC 不会*自动*管理 Core Foundation 对象的内存，这就是您要使用`CFRelease()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:57:14.033

没有其他选择`CFRelease`。`CFRelease`是必要的，ARC 与否。*ARC只*管理 ObjC 对象。

在某些情况下，框架可能会为某种类型（例如`CGContextRelease`）提供更专业的版本，但实际上别无选择。

`CFRelease`声明通过是错误的`NULL`。如果这是您看到的错误并且您不希望这种行为，您始终可以编写自己的包装函数，该函数在传递之前首先测试参数。

如果您有更具体的错误或更具体的问题，我们可能会提供更多帮助。

# ruby - 在 Ruby 中使用位掩码或其他数组过滤数组

> ID：12084867
> 
> 赞同：2
> 
> 时间：2012-08-23T04:44:40.643
> 
> 标签：ruby, arrays

我想知道 Ruby 中是否有允许基于另一个数组或位掩码过滤数组的 Array 方法。

下面是一个示例和一个快速实现，用于说明目的：

```
class Array
  def filter(f)
    res = []
    if f.is_a? Integer
      (0...self.size).each do |i|
        res << self[i] unless f[i].nil? || 2**i & f == 0
      end
    else
      (0...self.size).each do |i|
        res << self[i] unless f[i].nil? || f[i] == 0
      end
    end
    return res
  end
end 
```

例子：

```
%w(a b c).filter([1, 0, 1]) ==> ['a', 'c']
%w(a b c).filter(4) ==> ['c']
%w(a b c).filter([1]) ==> ['a'] 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T05:14:01.937

在 ruby​​ 1.9`Fixnum#[]`中为您提供特定位置的位值，因此它适用于整数和数组。我在想这样的事情：

```
class Array
    def filter f
        select.with_index { |e,i| f[i] == 1 }
    end
end

%w(a b c).filter([1, 0, 1]) #=> ['a', 'c']
%w(a b c).filter(4) #=> ['c']
%w(a b c).filter(5) #=> ['a', c']
%w(a b c).filter([1]) #=> ['a'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:04:34.537

```
class Array
    def filter(f)
        f = f.to_s(2).split("").map(&:to_i) unless Array === f
        reverse.reject.with_index{|_, i| f[-i].to_i.zero?}
    end
end 
```

# grails - Grails hbm2ddl.SchemaUpdate 不成功错误

> ID：12084868
> 
> 赞同：1
> 
> 时间：2012-08-23T04:44:57.293
> 
> 标签：grails, hbm2ddl

当我运行我的 grails 应用程序时，我收到 schemaUpdate 失败错误；

```
 hbm2ddl.SchemaUpdate Unsuccessful: alter table lifecycle add index FKEDFAE76ABF1565B0 (round_up_emailed_updated_by_id), add constraint FKEDFAE76ABF1565B0 foreign
    key (round_up_emailed_updated_by_id) references user (id)
    hbm2ddl.SchemaUpdate Too many keys specified; max 64 keys allowed
    hbm2ddl.SchemaUpdate Unsuccessful: alter table lifecycle add index FKEDFAE76A166A0DC5 (training_advice_telecommunicated_updated_by_id), add constraint FKEDFAE76A1
    66A0DC5 foreign key (training_advice_telecommunicated_updated_by_id) references user (id)
    hbm2ddl.SchemaUpdate Too many keys specified; max 64 keys allowed
    hbm2ddl.SchemaUpdate Unsuccessful: alter table lifecycle add index FKEDFAE76AA40386D9 (laptops_arranged_actor_id), add constraint FKEDFAE76AA40386D9 foreign key (
    laptops_arranged_actor_id) references role (id)
    hbm2ddl.SchemaUpdate Too many keys specified; max 64 keys allowed 
```

这是什么意思？是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T18:49:13.273

虽然您没有发布您的数据库引擎和版本，但我猜测您使用的是 MySQL 5.0 或更高版本。

我使用 MySQL 5.5.25 和 InnoDB 作为我的引擎，并且发现了以下发现：

从 MySQL 5.0 开始，每个表最多有 64 个索引。

有人试图使用 MySQL 5.0 创建一个具有超过 64 个外键的表，并在他们的错误消息中得到了你得到的确切文本：

```
Too many keys specified. Max 64 keys allowed 
```

这是他们关于[bugs.mysql.com Bug #51450](http://bugs.mysql.com/bug.php?id=51450)的错误报告。

如果您正在运行 MySQL 5.0 或更高版本并且这是您遇到的错误，那么这不是 Grails 或 hbm2ddl 的问题，而是您的底层数据库引擎的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T05:08:22.193

显然您指定了太多外键；显然最多允许 64 个键。

# facebook - Facebook 的 Graph API manage_pages 只显示应用程序？

> ID：12084873
> 
> 赞同：0
> 
> 时间：2012-08-23T04:45:48.787
> 
> 标签：facebook, facebook-graph-api

我试图在对应用程序用户页面进行身份验证后获取它们的列表，但我只是获取与该帐户关联的应用程序列表。

身份验证后（使用 manage_pages 权限集）我将发送到以下 URL：[https](https://graph.facebook.com/me/accounts?access_token=) ://graph.facebook.com/me/accounts?access_token= $realToken

但是，返回的只是应用程序。我正在测试的帐户应该有近 20 个页面与之关联。

这是我的一些代码...

```
$fetchToken = "https://graph.facebook.com/oauth/access_token?client_id=$appid&redirect_uri=$redirect&scope=offline_access,manage_pages&client_secret=$appSecret&code=".$_GET['code'];

$token = file_get_contents($fetchToken);

...

$pages = file_get_contents("https://graph.facebook.com/me/accounts?access_token=$realToken"); 
```

# apache - 如何在 jaxb 中解组响应

> ID：12084874
> 
> 赞同：0
> 
> 时间：2012-08-23T04:45:54.847
> 
> 标签：apache, xml-parsing, jaxb, cxf

我在我的项目中面临着重大问题。我们有 2 个 xsd。一个是请求 xsd，另一个是响应 xsd。我为这两个 xsd 创建了 JAXB 类。

我将请求 JAXB 传递给服务层，然后我得到了响应对象。现在我想根据响应 JAXB 解组此响应。

所以请帮助我在我的项目中解决这个问题。这是更可观的。

问候纳尔西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T00:46:24.153

下面的代码片段将为您提供帮助。

```
File file = new File("Customers.xml");
            JAXBContext jaxbContext = JAXBContext.newInstance(Customers.class);

            Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
            Customers customers = (Customers) jaxbUnmarshaller.unmarshal(file); 
```

你说你已经得到了输出 XML。所以将它传递给customers.xml。您还提到您已经从 xsd 创建了 java 对象。所以传递那个类名来代替Customers.class。

您不必导入任何新的 jar，因为所有这些类都存在于 rt.jar

希望这对您有所帮助。

# batch-file - 将 500 个视频文件批量截图到一个文件夹中

> ID：12084875
> 
> 赞同：0
> 
> 时间：2012-08-23T04:46:01.790
> 
> 标签：batch-file, video, screenshot

我在一个文件夹中有大约 500 个家庭视频的 AVI 文件。我想以每 5 秒的速度截取每个视频的屏幕截图。优选地，每个视频的屏幕截图将输出到一个文件夹中，文件以它们来自的视频文件命名，然后是一个数字（例如视频文件#1 1.jpg，视频文件#1 2.jpg，视频文件# 1 3.jpg、视频文件 #2 1.jpg 等）。大约六年前，我使用了一个可以使用单个批处理文件执行此操作的程序，但我早就忘记了它的名称，并且真的找不到类似的东西。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:31:53.560

[ImageGrab](http://paul.glagla.free.fr/index_en.htm)将按照用户设置的时间间隔自动进行电影文件截图。无需编码技能。

# arcgis - 使用 SQL Server 表中的变量重新分类 ESRI 栅格（使用 pyodbc 连接）

> ID：12084878
> 
> 赞同：0
> 
> 时间：2012-08-23T04:46:13.670
> 
> 标签：arcgis, pyodbc, esri, arcpy

我正在尝试使用存储在 SQL Server Express 表中的值对栅格文件（表示植被和土地覆盖类型）进行重新分类。我在表中有一组约 400 个物种的记录，每一行代表一个不同的物种，每个植被类型都有一个列。如果每种植被类型适合该物种的栖息地，则将其编码为“1”，如果不适合，则将其编码为“0”。然后，植被栅格将根据与物种记录相关的值重新分类为两个值，“1”或“0”（每个物种的值会略有不同）。

在 PythonWin 中，我使用 pyodbc 连接到 SQL Server Express 数据库表，然后执行选择查询语句将物种记录（行）的值收集到 pyodbc 游标中。然后我想在 remap 语句中将每个列值分配给输出栅格值（参见附加代码）。不幸的是，我不断收到以下错误：

```
TypeError: list indices must be integers, not tuple 
```

游标具有基于选择查询的 SQL Server Express 表中的所有值，我可以通过游标对象的`row`参数访问数据。所以 row.BIOME_X 变量肯定存储的是 1 或 0 值。或者我只是在用 Python 语法做一些愚蠢的事情。有任何想法吗？

谢谢！

```
# Load Python libraries          
import pyodbc
import arcpy
from arcpy import env
from arcpy.sa import *
import os
arcpy.env.overwriteOutput = 1

# Check out the ArcGIS Spatial Analyst extension license
arcpy.CheckOutExtension("Spatial")

# set variables
modelList = arcpy.ListFiles() # build list of species model names for loop
biome_Cur = ("xxxxxxx/xxxx/xxxxxx/1_Input.gdb/biome_current") # the original raster which will be reclassed

# connect to SQL Server Express database
cnxn = pyodbc.connect('DRIVER={SQL Server Native Client 10.0};SERVER=DESKTOP\SQLEXPRESS;DATABASE=Species;UID=sa;PWD=XXXXXX')
cursor = cnxn.cursor()

# main processing loop
for model in modelList:

    # reclassifies biome raster based on suitability code from SQL Server Species database
    # select query
    cursor.execute("""
                SELECT [BIOME_1],[BIOME_6],[BIOME_7],[BIOME_8],[BIOME_9],[BIOME_10],[BIOME_14],[BIOME_19],[BIOME_20],
                [BIOME_21],[BIOME_22],[BIOME_23],[BIOME_24],[BIOME_25],[BIOME_27],[BIOME_29],[BIOME_30],[BIOME_31],
                [BIOME_32],[BIOME_35],[BIOME_36],[BIOME_37],[BIOME_38],[BIOME_39],[BIOME_40],[BIOME_41],[BIOME_42],
                [BIOME_43],[BIOME_44],[BIOME_45],[BIOME_46],[BIOME_47],[BIOME_48],[BIOME_50],[BIOME_100],[BIOME_200]
                FROM Species.dbo.BiomesPerSpp_Rehfeldt
                WHERE ID = ?""", (model))

    # assign remap variable for reclassification
    remap_cur = arcpy.sa.RemapValue([7, row.BIOME_7][8, row.BIOME_8],[9, row.BIOME_9],[14, row.BIOME_14],[20, row.BIOME_20],
    [21, row.BIOME_21], [22, row.BIOME_22], [23, row.BIOME_23], [25, row.BIOME_25], [30, row.BIOME_30],       
    [31,row.BIOME_31],[32, row.BIOME_32], [36, row.BIOME_36], [38, row.BIOME_38], [41, row.BIOME_41], 
    [42, row.BIOME_42], [43, row.BIOME_43],[44, row.BIOME_44], [45, row.BIOME_45], [46, row.BIOME_46], 
    [47, row.BIOME_47], [50, row.BIOME_50], [100, row.BIOME_100],[200, row.BIOME_200])

    biomeReClass_cur = arcpy.sa.Reclassify(biome_Cur, "Value", remap_cur, "NODATA") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:18:17.880

您在 RemapValue 下列出的 7 和 8 项之间遗漏了一个逗号。您还需要将整个列表列表括在括号内。

```
remap_cur = arcpy.sa.RemapValue([[7, row.BIOME_7],[8, row.BIOME_8]...[200, row.BIOME_200]]) 
```

有关更多信息，请参阅： http: [//resources.arcgis.com/en/help/main/10.1/index.html#//005m0000007q000000](http://resources.arcgis.com/en/help/main/10.1/index.html#//005m0000007q000000)

# java - 使用 AsyncTask 并将值返回给 UI 主线程

> ID：12084885
> 
> 赞同：2
> 
> 时间：2012-08-23T04:47:08.963
> 
> 标签：java, android-asynctask

我有一个 Android 活动来显示 Web 服务的输出。我在另一个扩展 AsyncTask 的私有类中调用了 Web 服务，并希望向主 UI 线程返回一个值。

这是我的活动。

```
public class CallCalcService extends Activity {

private String METHOD_NAME = "sum"; // our webservice method name
private String NAMESPACE = "http://backend.android.web.org"; 

private String SOAP_ACTION = NAMESPACE + METHOD_NAME; 

private static final String URL = "http://192.168.1.14:8080/AndroidBackend1/services/Calculate?wsdl"; 

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_call_calc_service);

    //TextView tv = (TextView) findViewById(R.id.textView1);
    //Object res=new HardWorkThread().execute();
    //tv.setText("Addition : "+ res.toString());

    new HardWorkThread()
    {
        public void onPostExecute(String result)
        {
            TextView txt = (TextView) findViewById(R.id.textView1);
            txt.setText("Addition : "+result);
        }
    }.execute("");

}

private class HardWorkThread extends AsyncTask{

    @Override
    protected String doInBackground(Object... params) {
        // TODO Auto-generated method stub
        String result=null;
        try {
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            request.addProperty("i", 5);
            request.addProperty("j", 15);
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            androidHttpTransport.call(SOAP_ACTION,envelope);

             result = envelope.getResponse().toString();
            System.out.println("Result : " + result);
            //((TextView) findViewById(R.id.textView1)).setText("Addition : "+ result.toString());
        } catch (Exception E) {
            E.printStackTrace();
            //((TextView) findViewById(R.id.textView1)).setText("ERROR:"
                //  + E.getClass().getName() + ":" + E.getMessage());
        }
        return result;
    }

} 
```

}

我想要做的是将字符串结果值返回到主 UI，以便我可以将该值设置为 textview。

```
String result;

TextView tv=findViewById(R.id.textView1);
tv.setText(result); 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:56:39.170

你应该`Override`的`onPostExecute()`方法。

像这样的东西：

```
 @Override
    protected void onPostExecute(String result) {
        TextView tv = findViewById(R.id.textView1);
        tv.setText(result);
    } 
```

# c# - 如何将 json 变量从 CS 文件传递 给 Javascript 函数？

> ID：12084886
> 
> 赞同：0
> 
> 时间：2012-08-23T04:47:15.900
> 
> 标签：c#, javascript, jquery, asp.net, json

我在 C# 中有一个方法，它创建用户凭据的 JSON 对象。下面是 CS 文件。

```
public string CreateLoginjson(string strErrorType, bool blIsAuthenticated)
{
    StringBuilder sbLoginJson = new StringBuilder();
    if (blIsAuthenticated)
    {
        sbLoginJson.Append("{LoginSuccess:1");
    }
    else
    {
        sbLoginJson.Append("{LoginSuccess:0");
    }

    if (strErrorType != string.Empty)
    {
        if (strErrorType.TrimEnd(new char[] { ',' }) == "Token" ||
                strErrorType.TrimEnd(new char[] { ',' }) == "BlankToken")
        {
            sbLoginJson.Append(",txtTestTokenNumber1:\"Error\"");
            sbLoginJson.Append(",txtTestTokenNumber2:\"Error\"");
            sbLoginJson.Append(",txtTestTokenNumber3:\"Error\"");
            sbLoginJson.Append(",txtTestTokenNumber4:\"Error\"");

        }

        if (strErrorType.TrimEnd(new char[] { ',' }) == "Password")
        {
            sbLoginJson.Append(",txtPassword:\"Error\"");

        }

        if (strErrorType.TrimEnd(new char[] { ',' }) == "UserName")
        {
            sbLoginJson.Append(",UserName:\"Error\"");

        }
        string strLoadErrorControlMessage = LoadErrorControl(strErrorType,
                string.Empty);

        if (strLoadErrorControlMessage!= string.Empty)
        {
            sbLoginJson.Append(",ErrorMessage:
            '" + strLoadErrorControlMessage + "'");
        }
    }
    sbLoginJson.Append("}");

    var LoginJson = sbLoginJson.ToString();
    return LoginJson;
} 
```

现在，我需要将 LoginJson 传递给一个 JS 函数，该函数检查是否提供了不正确的凭据，该函数找到控件并为其添加一个属性 JS

```
function GetLoginJson(strLoginJson) {
    if (strLoginJson != '' && strLoginJson != undefined) {
        var objLoginJson = strLoginJson;

        if (objLoginJson.LoginSuccess == "1") {

        }
        else if (objLoginJson.LoginSuccess == "0") {

            if (objLoginJson.txtUserName != '' 
                 && objLoginJson.txtUserName != undefined) 
            {
                $('#txtUserName').attr("class", objLoginJson.txtUserName);
            }
            else 
            {
                $('#txtUserName').attr("class", "Input");
            }

            if (objLoginJson.txtPassword != '' 
                 && objLoginJson.txtPassword != undefined) 
            {
               $('#txtPassword').attr("class", objLoginJson.txtPassword);
            }
            else 
            {
                $('#txtPassword').attr("class", "Input");
            }
            if (objLoginJson.txtTestTokenNumber1 != '' 
                  && objLoginJson.txtTestTokenNumber1 != undefined) 
            {
                $('#txtTestTokenNumber1').attr("class", 
                                                objLoginJson.txtTestTokenNumber1);
            }
            else 
            {
                $('#txtTestTokenNumber1').attr("class", "Error");
            }
            if (objLoginJson.txtTestTokenNumber2 != '' 
                  && objLoginJson.txtTestTokenNumber2 != undefined) 
            {
               $('#txtTestTokenNumber2').attr("class", 
                                               objLoginJson.txtTestTokenNumber2);
            }
            else 
            {
                $('#txtTestTokenNumber2').attr("class", "Error");
            }

            if (objLoginJson.txtTestTokenNumber3 != '' && 
                 objLoginJson.txtTestTokenNumber3 != undefined) {
                $('#txtTestTokenNumber3').attr("class", 
                                                objLoginJson.txtTestTokenNumber3);
            }
            else 
            {
                $('#txtTestTokenNumber3').attr("class", "Error");
            }
            if (objLoginJson.txtTestTokenNumber4 != '' && 
                  objLoginJson.txtTestTokenNumber4 != undefined) {
                $('#txtTestTokenNumber4').attr("class", 
                                                objLoginJson.txtTestTokenNumber4);
            }
            else 
            {
                $('#txtTestTokenNumber4').attr("class", "Error");
            }

            $('#ErrorControl').html('');

        }
    }
} 
```

我想将 JSON 变量从 CS 传递给这个 jQuery 语句 `$('#ErrorControl').html('');'

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:47:49.740

如果用户提供所有信息并单击某些东西（任何控件），您可以从 jquery 发出 ajax 请求。如果您从 CS 返回一些错误消息，您可以直接使用该消息作为

$('#ErrorControl').html(response.d)

d = "从 CS 返回的字符串"。

其中 response 是成功函数的参数。d 是接收对象的默认属性（变量）。

如果您不想直接显示字符串，请使用返回的数据并调用另一个 javascript 函数。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:48:39.617

用户1502890,

## 服务器端

我不太了解 C#，但您似乎正在尝试直接构建 JSON 字符串。构建一个对象然后使用内置语言命令或实用程序方法将其字符串化为 JSON 更为正常（并且更容易和更可靠）。我想这在 C# 中必须是可能的。

## 客户端

假设凭证字段在一个表单中，`id="credentialsForm"`并且服务器端脚本可以作为相对 URL“myCredentialsChecker.xtn”请求，那么 jQuery 将是这样的：

```
$(function() {
    function loginResponse(j) {
        j = j || {};
        if (j.LoginSuccess) {
            //...
        }
        else {
            $('#txtUserName').attr("class", j.txtUserName ? j.txtUserName : "Input");
            $('#txtPassword').attr("class", j.txtPassword ? j.txtPassword : "Input");
            $('#txtTestTokenNumber1').attr("class", j.txtTestTokenNumber1 ? j.txtTestTokenNumber1 : "Error");
            $('#txtTestTokenNumber2').attr("class", j.txtTestTokenNumber2 ? j.txtTestTokenNumber2 : "Error");
            $('#txtTestTokenNumber3').attr("class", j.txtTestTokenNumber3 ? j.txtTestTokenNumber3 : "Error");
            $('#txtTestTokenNumber4').attr("class", j.txtTestTokenNumber4 ? j.txtTestTokenNumber4 : "Error");
            $('#ErrorControl').html('');
        }
    }

    $("#credentialsForm").on('submit', function() {
        $.ajax({
            url: "myCredentialsChecker.xxx",
            data: $(this).serialize(),
            type: 'POST', // or 'GET'
            dataType: 'json',
            success: function(j) {
                loginResponse(j);
            ),
            error: function() {
                loginResponse();
            }
        });
        return false;
    });
}); 
```

**笔记**

*   子句中的所有内容都`else{...}`如上所述简化，因为`''`和`undefined`都是虚假的，所以简单的测试`foo`就可以完成这项工作。三元替代方案`if(){...} else{...}`也使代码紧凑。

*   我不相信为返回的字符串设置类是正确的做法，但我没有改变这方面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:05:42.857

首先，您可以尝试[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)（查看链接）将任何对象序列化为 JSON，然后向客户端发送字符串响应。

对于服务器和客户端之间的通信，您可以使用调用 web 服务 (fe) 的 jquery ajax 调用，或者如果您构建 ASP.NET 站点或应用程序，则可以使用**PageMethods**并直接从 javascript 调用它。

如果您对 PageMethods 选项感兴趣，这里有一个非常好的和简单的[教程](http://aspalliance.com/1922_PageMethods_In_ASPNET_AJAX.2)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T12:57:38.370

我终于写了：CS文件为

```
public string CreateLoginjson(string strErrorType, bool blIsAuthenticated)
{
    StringBuilder sbLoginJson = new StringBuilder();
    if (blIsAuthenticated)
    {
        sbLoginJson.Append("{LoginSuccess:1");
    }
    else
    {
        sbLoginJson.Append("{LoginSuccess:0");
    }

    if (strErrorType != string.Empty)
    {
        if (strErrorType.TrimEnd(new char[] { ',' }) == "Token" || strErrorType.TrimEnd(new char[] { ',' }).Split(new char[] { ',' }).Contains("BlankToken"))
        {
            sbLoginJson.Append(",txtTestTokenNumber1:\"Error\"");
            sbLoginJson.Append(",txtTestTokenNumber2:\"Error\"");
            sbLoginJson.Append(",txtTestTokenNumber3:\"Error\"");
            sbLoginJson.Append(",txtTestTokenNumber4:\"Error\"");

        }

        if (strErrorType.TrimEnd(new char[] { ',' }) == "Password" ||  strErrorType.TrimEnd(new char[] { ',' }).Split(new char[] { ',' }).Contains("BlankPassword"))
        {
            sbLoginJson.Append(",txtPassword:\"Error\"");

        }

        if (strErrorType.TrimEnd(new char[] { ',' }) == "UserName" ||  strErrorType.TrimEnd(new char[] { ',' }).Split(new char[] { ',' }).Contains("BlankUserName"))
        {
            sbLoginJson.Append(",txtUserName:\"Error\"");
        }

        string strLoadErrorControlMessage = LoadErrorControl(strErrorType, string.Empty);

        if (strLoadErrorControlMessage != string.Empty)
        {
            PageTestApplicationLogin objPageTestApplicationLogin = new PageTestApplicationLogin(objClientConfiguration);
            sbLoginJson.Append(",ErrorMessage:'" + objPageTestApplicationLogin.GetTestApplicationLoginErrorHtml("", strLoadErrorControlMessage).Replace("'", "\"") + "'");
        }
        sbLoginJson.Append("}");
    }
    var LoginJson = sbLoginJson.ToString();
    return LoginJson;
} 
```

JS文件：

```
if (objLoginJson.ErrorMessage != '' && objLoginJson.ErrorMessage != undefined) {
    $('#ErrorControl').html(objLoginJson.ErrorMessage);
    $('#ErrorControl').find('#tblLoginError').css('display', 'block');
}
else {
    $('#ErrorControl').html("");
    $('#ErrorControl').find('#tblLoginError').css('display', 'none');
} 
```

谢谢大家的建议..干杯....

# c++ - 如何在 mac 中为 openGL 背景窗口使用纹理 .jpg 图像？

> ID：12084889
> 
> 赞同：2
> 
> 时间：2012-08-23T04:47:39.167
> 
> 标签：c++, macos, opengl, textures

我想为 mac 的 openGL 窗口设置背景。背景将采用 jpg 或 png 文件。

这是我的代码..

```
GLuint texture; //the array for our texture

GLfloat angle = 0.0;

GLuint LoadTexture (const char * filename, int width, int height ){

//    GLuint texture;
unsigned char * data;
FILE * file;

//The following code will read in our RAW file
file = fopen( filename, "rb" );
if ( file == NULL ) return 0;
data = (unsigned char *)malloc( width * height * 3 );
fread( data, width * height * 3, 1, file );
fclose( file );

glGenTextures( 1, &texture ); 
glBindTexture( GL_TEXTURE_2D, texture ); 
glPixelStorei( GL_UNPACK_ALIGNMENT, 1 );
glTexEnvf( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE ); 

//    // when texture area is small, bilinear filter the closest mipmap
//    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
//                    GL_LINEAR_MIPMAP_NEAREST );
//    // when texture area is large, bilinear filter the original
//    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
//    
//    // the texture wraps over at the edges (repeat)
//    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT );
//    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT );
//    
//    //Generate the texture
//    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, 2, 2, 0,GL_RGB, GL_UNSIGNED_BYTE, data);

// select modulate to mix texture with color for shading
glTexEnvf( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE );

// when texture area is small, bilinear filter the closest mipmap
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
                GL_LINEAR_MIPMAP_NEAREST );
// when texture area is large, bilinear filter the first mipmap
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );

//    // the texture wraps over at the edges (repeat)
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT );
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT );

// build our texture mipmaps
gluBuild2DMipmaps( GL_TEXTURE_2D, 3, width, height,
                  GL_RGB, GL_UNSIGNED_BYTE, data );

free(data);

return texture; //return whether it was successful

}

void FreeTexture( GLuint texture ){
glDeleteTextures( 1, &texture );
}

void cube () {
glEnable(GL_TEXTURE_2D);
glBindTexture( GL_TEXTURE_2D, texture ); //bind the texture

glPushMatrix();
glRotatef( angle, 0.0f, 0.0f, 1.0f );
glBegin( GL_QUADS );
glTexCoord2d(0.0,0.0); glVertex2d(-1.0,-1.0);
glTexCoord2d(1.0,0.0); glVertex2d(+1.0,-1.0);
glTexCoord2d(1.0,1.0); glVertex2d(+1.0,+1.0);
glTexCoord2d(0.0,1.0); glVertex2d(-1.0,+1.0);
glEnd();
glPopMatrix();
glutSwapBuffers();
//glutSolidCube(2);
}

void display () {
   glClearColor (0.0,0.0,0.0,1.0);
   glClear (GL_COLOR_BUFFER_BIT);
   glLoadIdentity();
   gluLookAt (0.0, 0.0, 5.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0);
   texture = LoadTexture( "/Users/macbook/MatrixEngineClientSample/Fighters/Sunset03.jpg", 256, 256  ); //load the texture
   glEnable( GL_TEXTURE_2D ); //enable 2D texturing
//    glEnable(GL_TEXTURE_GEN_S); //enable texture coordinate generation
//    glEnable(GL_TEXTURE_GEN_T);
  cube();
  FreeTexture( texture );
  //glutSwapBuffers();
  //angle ++;
}

void reshape (int w, int h) {
  glViewport (0, 0, (GLsizei)w, (GLsizei)h);
  glMatrixMode (GL_PROJECTION);
  //glLoadIdentity ();
  gluPerspective (50, (GLfloat)w / (GLfloat)h, 1.0, 100.0);
  glMatrixMode (GL_MODELVIEW);
}

int main (int argc, char **argv) {
  glutInit (&argc, argv);
  glutInitDisplayMode (GLUT_DOUBLE);
  glutInitWindowSize (500, 500);
  glutInitWindowPosition (100, 100);
  glutCreateWindow ("A basic OpenGL Window");
  glutDisplayFunc (display);
  glutIdleFunc (display);
  glutReshapeFunc (reshape);
  glutMainLoop ();
  return 0;
} 
```

**编辑**

我想将此图像视为openGL窗口的背景...图像在下方..

![在此处输入图像描述](../Images/4a7d4d52f33b8335c6fd58352a10f830.png)

但它显示了这个......

![在此处输入图像描述](../Images/b2dad294a3cec0dc5c710f726801d012.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T10:25:33.740

我查阅了[这个 Apple 指南](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/OpenGL-MacProgGuide/opengl_texturedata/opengl_texturedata.html)。

问题是文件被压缩并且有一个标题，并且使用您的代码，您甚至可以使用文件标题的一部分作为图像源。

我会替换这段代码：

```
//    GLuint texture;
unsigned char * data;
FILE * file;

//The following code will read in our RAW file
file = fopen( filename, "rb" );
if ( file == NULL ) return 0;
data = (unsigned char *)malloc( width * height * 3 );
fread( data, width * height * 3, 1, file );
fclose( file ); 
```

与此更相似的东西：

```
CFURLRef urlRef = (CFURLRef)[NSURL fileURLWithPath:@"/Users/macbook/MatrixEngineClientSample/Fighters/Sunset03.jpg"];
CGImageSourceRef myImageSourceRef = CGImageSourceCreateWithURL(url, NULL);
CGImageRef myImageRef = CGImageSourceCreateImageAtIndex(myImageSourceRef, 0, NULL);
CFDataRef data = CGDataProviderCopyData(CGImageGetDataProvider(myImageRef));
unsigned char *data = CFDataGetBytePtr(data); 
```

您可能需要将 Core Graphics 和 Core Foundation 添加到链接框架列表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T05:29:39.420

PNG 和 JPG 图像（与大多数其他图像格式一样）需要某种形式的解压缩/解码，因此从文件中加载它们不会产生预期的结果。在读取文件头后，它应该可以处理 bmp 或未压缩的 tga 图像：/。无论如何，这里有一些图像加载库可以让加载图像变得容易：

[土壤](http://www.lonesock.net/soil.html)

[魔鬼](http://openil.sourceforge.net/)

[免费图片](http://freeimage.sourceforge.net/)

[GLI](http://www.g-truc.net/project-0024.html)

# javascript - 美元符号的jQuery基础 - 命名与匿名

> ID：12084891
> 
> 赞同：2
> 
> 时间：2012-08-23T04:47:49.753
> 
> 标签：javascript, jquery

我有几个面试问题

1.  `$(function(){});`和有什么区别`$(document).ready(function(){});`

2.  他们每个人都有什么区别`$(function(){});`以及`var func=function(){};`如何称呼他们？

3.  给定以下脚本

    ```
    <script language="javascript">
    $(function()
    {
       var id=$("cssID");
       //do something with your id
       //your event to be added here
    });
    </script> 
    ```

    你怎么能添加一个事件，比如说，`onmouseout`这将在`id`?

以下是我的回答：

1.  它们是相同的，都是在页面文档完成加载时运行

2.  第一个是自动调用的，第二个是通过命名引用调用的；也就是说`func.called()`，例如。

3.  像这样的东西：

    ```
    $(function()
    {
        var id=$("cssID");
        //do something with your id
        //Oki
        id.onmouseout
        (function(){
          //do something
        });
    }); 
    ```

但是我的教授说我在这三个方面都错了。她解释了我不确定也不敢问的事情，她对我很生气。什么是正确的答案，为什么我的答案是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:59:16.717

这些是 jQuery（又名 jQuery DOM Ready）中通常使用的不同类型的 Document Ready 函数。许多开发人员似乎在不知道为什么的情况下使用它们。因此，我将尝试解释为什么您可能会选择一个版本而不是另一个版本。将文档就绪函数视为在页面元素加载后触发的自执行函数。

有关如何使用 Document Ready 函数的更多信息，请参阅[在哪里声明您的 jQuery函数。](http://jquery4u.com/jquery-functions/declare-jquery-function/)

**文档就绪示例 1**

```
$(document).ready(function() {
    //do jQuery stuff when DOM is ready
}); 
```

**文档就绪示例 2**

```
$(function(){ 
    //jQuery code here 
}); 
```

*这相当于示例 1……它们的字面意思是相同的。*

**文档就绪示例 3**

```
jQuery(document).ready(function($) {
    //do jQuery stuff when DOM is ready
}); 
```

**文档就绪示例 4**

```
(function($) { 
    // code using $ as alias to jQuery
  $(function() {
    // more code using $ as alias to jQuery
  });
})(jQuery);
// other code using $ as an alias to the other library 
```

**文档就绪示例 5**

```
$(window).load(function(){  
     //initialize after images are loaded  
}); 
```

**[这](http://www.jquery4u.com/dom-modification/types-document-ready/)**是供您参考的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:50:23.897

两者之间没有区别：

```
$(functionValue); 
```

和：

```
$(document).ready(functionValue); 
```

所以你的教授错了。第二个例子完全不同。其中一个运行在文档就绪并且需要 jQuery；另一个只是分配给 JavaScript 变量的函数文字。

至于第三个，你可能会用`on`. `onmouseover`如果您使用 是正确`get`的，但并不是真正的最佳处理方式，而且您*绝对*不会像在那儿那样称呼它-这是完全不正确的。

```
id.on('mouseout', yourHandler); 
```

或者

```
id.mouseout(yourHandler); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T05:43:35.843

> *1.它们是相同的，都是在页面文档加载完成时运行*

这对了一半。它们*是*一样的，第一种只是写第二种的快捷方式，但是它们不会在文档加载完成时运行，它们会在 DOM 准备好时运行（此时某些资源，例如图像可能仍在加载） .

> *2.第一个自动调用，第二个通过命名引用调用；也就是说`func.called()`，例如。*

又对了一半。在第一个例子中，当 DOM 按照问题 1 准备就绪时，将自动调用匿名函数。第二个例子可以用`func()`. 你不会`.called`在那里扮演角色。`func`或者您可以作为参数传递，例如 as `$(document).ready(func)`。

> 第三季度 `var id=$("cssID");`
> 
> *你怎么能添加一个事件，比如说，`onmouseout`这将在`id`?*

`$("cssID")`根据匹配`"cssID"`选择器的数量创建一个包含零个或多个元素的 jQuery 对象。该`id`变量引用该 jQuery 对象。如果问题是如何将事件处理程序分配给那些匹配的元素，您可以这样做：

```
id.mouseout(function() { /* some code */. });
// OR
id.on("mouseout", function() { /* some code */ }); 
```

使用 jQuery 处理事件时，您不会在事件名称中使用“on”，因此它是“mouseout”而不是“onmouseout”。

所以你对 3 的回答*几乎*是正确的。

（请注意，除非您的文档中`"cssID"`有标签，否则该选择器实际上不会匹配任何元素...）`<cssID>`

# html - 我应该定义列表样式吗 或者 也？

> ID：12084892
> 
> 赞同：2
> 
> 时间：2012-08-23T04:47:53.083
> 
> 标签：html, css

是否有充分的理由`list-style`在`<ul>`and`<li>`或 just上覆盖 CSS `<li>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T05:05:16.013

Per [w3.org](http://www.w3.org/wiki/CSS/Properties/list-style-type) you can define `list-style-type` on any element with `display:list-item`.

As far as I know, in modern browsers you can set any element to `display: list-item` so that - if you wanted to - you could correctly use the `list-style-type` property on any of them.

Example:

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>12084892</title>
    <meta charset="utf-8">
    <style>
        div span {
            display:list-item; 
            list-style-type: disc; 
            list-style-position: inside;
        }
    </style>
</head>
<body>
<div>
<span>One</span>
<span>Two</span>
</div>
</body>
</html> 
```

Trivia tidbit aside, what behavior are you looking to get? If you want different list items in the same list to have different bullets, then you'll need to define the `list-style-type` on the `li`s themselves. If you want all the `li`s within a given `ul` to have the same bullet, it's up to you. I typically define this on the `ul`, however. It is more intuitive to do it that way for me, personally.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T04:51:05.270

如果您查看[CSS 规范](http://www.w3.org/TR/CSS2/generate.html#propdef-list-style)，您会发现该属性旨在设置“带有`display: list-item`”的元素的样式。

如果未在元素上显式定义该属性，则该属性将被继承`<li>`，因此您应该坚持仅将样式应用于`<li>`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T05:11:26.813

即使列表样式是从 UL/OL 继承的，您也应该仅将 css 列表样式定义为 li。您可以在一个列表中创建不同的列表样式。例如：

```
ul.test li {
list-style:disc;
margin:0 0 0 20px;
}
​ul li:first-child {
list-style:circle;
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T04:49:20.060

如果是同一个，没有。只需在您方便的地方定义它；`<li>`s 将继承`<ul>`'s`list-style`除非显式覆盖。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T04:56:10.037

继承将 ' `list-style`' 值从元素传递到`ol`元素。`ul``li`

所以我认为你应该只将样式应用于`li`元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T06:09:03.537

您通常应该只设置`list-style`和元素`ul`，`ol`因为这样可以避免由级联规则引起的意外和不受欢迎的问题。请参阅CSS 2.1 规范中[对 `list-style 的描述。](http://www.w3.org/TR/CSS2/generate.html#list-style)

例如，`ol li { list-style: upper-roman; }`可能看起来很安全，但请考虑一下：

```
<ol>
  <li>foo
  <ul>
    <li>bar
  </ul>
</ol> 
```

现在，带有“bar”内容的内部`li`元素将应用列表样式，因为它也匹配选择器`ol li`。（确实，使用选择器`ol > li`可以避免这种情况，但它存在浏览器兼容性问题。）

设置`ol { list-style: upper-roman; }`反而避免了这个问题，因为现在内部`li`不匹配，并且它继承`list-style`自其父级`ul`（在浏览器默认样式表中具有合适的设置）。

但是，如果您希望某个特定列表项的样式与同一列表中的其他项不同，则需要`list-type`直接设置。`li`在这种情况下，您通常会使用 id 选择器或仅匹配该特定元素的其他选择器，而不是任何内部`li`元素。

# smalltalk - 绘制相交的圆并得到相交点

> ID：12084897
> 
> 赞同：2
> 
> 时间：2012-08-23T04:48:14.247
> 
> 标签：smalltalk, pharo

我是 smalltalk 的新手，我想绘制 2 个或多个相互交叉的圆圈并从中获得相交点，这需要在 Pharo smalltalk 中完成。

# jquery - jquery .animate 将假框移动到其他方向

> ID：12084899
> 
> 赞同：0
> 
> 时间：2012-08-23T04:48:30.550
> 
> 标签：jquery

我创建了一个 onclick 函数。所以这个函数所做的就是把边框、宽度和高度放到我的 div 类框上，然后这个 fake_box 会移动到右上角。但是，下面的函数只会将我的 fake_box 移动到左上角。我试图改变 .animate - top and left，但它仍然移动到左上角。下面的功能有什么我错过的吗？将我的 fake_box 移动到右上角的任何解决方案？

非常感谢你！

```
function click_test(){
    $('.fake_box').css({'border' : '5px solid #000000' ,  'width' : "440" , 'height' : "280"});
    $('.fake_box').animate({top: '-=30px', left: '+=100px', width: '0', height: '0'}, 1000, function(){
            $('.fake_box').css({'border' : 'none' ,  'width' : "440" , 'height' : "280"});
    }); 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:13:48.130

尝试更改设置其中`fake_box`一个`absolute`或`fixed` [DEMO HERE的位置](http://jsfiddle.net/S3hCH/)

css

```
.fake_box{
    position: fixed;
    width: 440px;
    height: 280px;
    border: 1px solid grey;
    right: 0;
    top: 0;
} 
```

js

```
 $('.fake_box').click(click_test);

    function click_test(){
        $('.fake_box').css({
            'border' : '5px solid #000',  
            'width' : "440", 
            'height' : "280"
        });
        $('.fake_box').animate({
           top: '-=30px', 
           right: '+=100px', 
           width: '0', 
           height: '0'}, 1000, 
           function(){
              $('.fake_box').css({'border' : 'none' ,  'width' : "440" , 'height' : "280", 'top':'0','right':'0'});
        });    
    } 
```

# r - R：将一个函数和for循环放在一起创建一个函数

> ID：12084900
> 
> 赞同：0
> 
> 时间：2012-08-23T04:48:36.103
> 
> 标签：r, function, for-loop, reverse

我正在尝试反转和反转以查看数字是否在数字颠倒时相同

我走到这一步，我很困惑......

```
revdigits = 
function(n) {
    sapply(lapply(strsplit(as.character(n),""),rev),paste,collapse="")  
}
    for(i in 1:length(n)){
        n[i]=
        if(n[i]==0) 0
        else if(n[i] == 1) 1
        else if(n[i] == 6) 9
        else if(n[i] == 8) 8
        else if(n[i] == 9) 6
        else -1 
    }

invertible=
function(n)

n[1] == revdigits(n[1]) 
```

反正有没有把它们放在一起（或把它们联系起来）来生产

```
invertible(c(99, 123, 1691))

[1] FALSE FALSE TRUE 
```

这个结果？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T05:29:33.663

你已经`apply`在你的代码中使用了，所以我可能误解了这个问题，但我想答案是

```
> invertible = function(n) sapply(n, function(x) x == revdigits(x))
> invertible(c(99, 123, 1691))
[1]  TRUE FALSE FALSE 
```

`revdigits`这提醒了我们一个不太正常的事实。很难说出您打算做什么，因为您的代码原样不包括函数中的 for 循环并且存在语法错误：

```
> revdigits = 
+ function(n) {
+     sapply(lapply(strsplit(as.character(n),""),rev),paste,collapse="")
+ }
> 
> 
>     for(i in 1:length(n)){
+         n[i]=
+         if(n[i]==0) 0
+         else if(n[i] == 1) 1
+         else if(n[i] == 6) 9
+         else if(n[i] == 8) 8
+         else if(n[i] == 9) 6
+         else -1 
+         }
Error: object 'n' not found
> }
Error: unexpected '}' in "}" 
```

`revdigits`as is 只是简单地颠倒数字顺序并将数字转换为字符串：

```
> revdigits(c(123,69))
[1] "321" "96" 
```

要了解它是如何做到的，让我们看看`sapply`看起来不是你自己写的，用一个简单的例子从里到外分析：

```
> n <- 69
> as.character(n)
[1] "69"
> strsplit(as.character(n),"")
[[1]]
[1] "6" "9"    
> lapply(strsplit(as.character(n),""),rev)
[[1]]
[1] "9" "6"
> sapply(lapply(strsplit(as.character(n),""),rev),paste,collapse="")
[1] "96" 
```

所以你的循环看起来应该在最后一步之前应用于数字向量。将你的循环打包成一个函数：

```
rotate = function(n) { 
    for(i in 1:length(n)){
      n[i]=
        if(n[i]==0) 0
      else if(n[i] == 1) 1
      else if(n[i] == 6) 9
      else if(n[i] == 8) 8
      else if(n[i] == 9) 6
      else -1 
    }
  n
} 
```

测试：

```
> rotate(0:9)
 [1]  0  1 -1 -1 -1 -1  9 -1  8  6 
```

并申请`revdigits`

```
revdigits = function(n) {
    sapply(lapply(lapply(strsplit(as.character(n),""),rev),rotate),paste,collapse="") 
} 
```

我们得到了一些似乎有效的东西：

```
> revdigits(69)
[1] "69"
> revdigits(99)
[1] "66" 
```

更好的是，它已经适用于向量！

```
> n <- c(99, 123, 1691)
> revdigits(n)
[1] "66"    "-1-11" "1691" 
> invertible <- function(n) n == revdigits(n)
> invertible(n)
[1] FALSE FALSE  TRUE 
```

根本不需要使用索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:00:08.070

我的尝试：

```
 invertible <- function(n){
      nd <- unlist(strsplit(as.character(n),split=""))
        if (all(nd %in% c("0","1","6","9","8"))){
          n == as.integer(paste(rev(sapply(nd, function(x){
                                            ifelse(!x %in% c("9","6"),x,
                                                    ifelse(x == "9","6","9"))
                                        })), collapse=""))
        } else {
          FALSE
      }
   }

sum(sapply(1:1e6, invertible))
# 198 
```

编辑：您可以将 sapply() 仍然放在里面：

```
invertible <- function(N){
  sapply(N, function(n){
            nd <- unlist(strsplit(as.character(n),split=""))
            if (all(nd %in% c("0","1","6","9","8"))){
                n == as.integer(paste(rev(sapply(nd, function(x){
                                                    ifelse(!x %in% c("9","6"),x,
                                                            ifelse(x == "9","6","9"))
                                                })), collapse=""))
            } else {
                FALSE
            }                
        })

} 
```

# objective-c - 线程 1：信号 SIGABRT

> ID：12084901
> 
> 赞同：0
> 
> 时间：2012-08-23T04:48:49.510
> 
> 标签：objective-c, sigabrt

我在代码中有以下错误？为什么？

**线程 1：信号 SIGABRT**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *simpleTableIdentifier = @"SimpleTableItem";

UITableViewCell *cell1 = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

if (cell1 == nil) {
    cell1 = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];

}

cell1.textLabel.text = [tableData objectAtIndex:indexPath.row];

// create the parent view that will hold header Label

UIView* customView = [[[UIView alloc] initWithFrame:CGRectMake(0,0,320,78)] autorelease];

// create image object
UIImage *myImage = [thumbnails objectAtIndex:indexPath.row];

[cell1 addSubview:customView];

// Set up the cell...

// create the imageView with the image in it
UIImageView *imageView = [[UIImageView alloc] initWithImage:myImage];

imageView.frame = CGRectMake(0,0,320,78);
[customView addSubview:imageView];

cell1.imageView.image = [UIImage imageNamed:[thumbnails objectAtIndex:indexPath.row]];
NSLog(@"Hello Last");
return cell1;
} 
```

线路错误：

```
 UIImageView *imageView = [[UIImageView alloc] initWithImage:myImage]; 
```

该怎么办？

来自评论的错误消息：

```
TextFieldAlert[551:c07] -[__NSCFConstantString size]：无法识别的选择器发送到实例 0x6fd4
TextFieldAlert[551:c07] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFConstantString 大小]：无法识别的选择器发送到实例 0x6fd4”
***第一掷调用堆栈：（0x14e0022 0xeb4cd6 0x14e1cbd 0x1446ed0 0x1446cb2 0x45662e 0x2df2 0x406c54 0x4073ce 0x3f2cbd 0x4016f1 0x3aad42 0x14e1e42 0x26b5679 0x26bf579 \ 0 \ 0x14b4195 0x1418ff2 0x14178da 0x1416d84 0x1416c9b 0x36ac65 0x36c626 0x275d 0x26d5为0x1）终止叫做抛出异常（LLDB）

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:16:37.433

看起来您正在某处调用`size`字符串对象的（不存在的）方法。可能，你的意思`length`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:23:09.983

您的逻辑似乎有问题，您以不同的方式引用同一事物，您正在`NSArray`通过以下两种方式检索缩略图中的对象：

```
// Here you assume there is an image in the thumbnails array
UIImage *myImage = [thumbnails objectAtIndex:indexPath.row];

// Here you assume there is a filename in the thumbnails array
cell1.imageView.image = [UIImage imageNamed:[thumbnails objectAtIndex:indexPath.row]]; 
```

# ruby-on-rails - Rails 表单 - 如果未选中任何复选框，则参数不包含在 POST 中

> ID：12084909
> 
> 赞同：17
> 
> 时间：2012-08-23T04:49:23.623
> 
> 标签：ruby-on-rails, forms, rest, activerecord, post

我有一个任务模型，它与一个目标模型以多对多的关系加入。

我有一个任务编辑表单，用户可以通过复选框将任何目标与任务相关联。当一个复选框被选中时，它应该表明任务和特定目标之间的关联；当未选中复选框时，不应该有关联。当表单提交时，这应该被持久化到数据库中。

```
<%= form_for @task do |f| %>
  <% Objective.all.each do |objective| %>
    <%= check_box_tag :objective_ids, objective.id, @task.objectives.include?(objective), :name => 'task[objective_ids][]' %>
  <% end %>
  <%= f.button :submit %>
<% end %> 
```

*只要用户选中一个复选框，*更新任务似乎绝对可以正常工作，但是当用户不选中任何复选框时，`:objective_ids`参数（这是一个目标 id 的数组）根本不包含在 POST 操作中。因此，当我`@task.update_attributes(params[:task])`在控制器中执行此操作时，任务的目标集合没有更新（即任务不应再有任何与之关联的目标，因为没有选中复选框）。

那么如何确保`:objective_ids`参数包含在 POST 中，即使只是作为一个空数组？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-23T10:05:15.037

在所有具有空值的复选框上方添加隐藏字段。如果用户没有选中任何复选框，它将被发送。

```
<%= form_for @task do |f| %>
  <%= hidden_field_tag "task[objective_ids][]", nil %>
  <% Objective.all.each do |objective| %>
    <%= check_box_tag :objective_ids, objective.id, @task.objectives.include?(objective), :name => 'task[objective_ids][]' %>
  <% end %>
  <%= f.button :submit %>
<% end %> 
```

这是一个很好的关于这个的[railscasts](http://railscasts.com/episodes/17-habtm-checkboxes-revised)。
您可能还想检查它的[源代码](https://github.com/railscasts/017-habtm-checkboxes-revised)。

# android - 微调器数据内容不可见

> ID：12084910
> 
> 赞同：1
> 
> 时间：2012-08-23T04:49:32.237
> 
> 标签：android, android-widget, spinner, android-spinner

我有一个微调器。我已经从数据库中检索了我在 SPINNER 中的内容并将其绑定到 Spinner。但我的问题是 Spinner 窗口弹出的背景颜色是白色的，内容的字体颜色也是白色的。所以除了选中的内容外，我无法查看窗口中的内容。

如何设置 Spinner 的字体颜色？

以下是活动代码：

我有一个微调器。我已将 SPINNER 中的内容从数组绑定到 Spinner。

```
String bloodgroups[]={
"A +ve" "B +ve"
};
Spinner spinner=(Spinner)findViewById(R.id.spin);
ArrayAdapter<String> adapter=new ArrayAdapter<String> this,android.R.layout.simple_dropdown_item_1line,bloodgroups);
spinner.setAdapter(adapter); 
```

但我的问题是 Spinner 窗口弹出的背景颜色是白色的，内容的字体颜色也是白色的。所以除了选中的内容外，我无法查看窗口中的内容。

如何设置 Spinner 的字体颜色？

以下是附件：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/tc"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:freezesText="false"
        android:text="Enter Name"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:typeface="monospace" />

    <EditText
        android:id="@+id/txtname"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textPersonName" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Enter Date of Birth"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/txtdate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10"
            android:inputType="date" />

        <Button
            android:id="@+id/btnseldate"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Select Date" />

    </TableRow>

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Select Blood Group"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Enter Address"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/txtadd"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textPostalAddress" />

    <TextView
        android:id="@+id/textView5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Enter ContactNo. "
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/txtno"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="phone" />

    <Button
        android:id="@+id/btnadd"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Submit Details" />

    <Button
        android:id="@+id/btndisplay"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Show Details" />

</LinearLayout>    
</ScrollView> 
```

![在此处输入图像描述](../Images/c803654e157a01b51ff94011cd8df0b5.png)

以下是附件：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/tc"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:freezesText="false"
        android:text="Enter Name"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:typeface="monospace" />

    <EditText
        android:id="@+id/txtname"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textPersonName" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Enter Date of Birth"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/txtdate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10"
            android:inputType="date" />

        <Button
            android:id="@+id/btnseldate"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Select Date" />

    </TableRow>

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Select Blood Group"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Enter Address"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/txtadd"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textPostalAddress" />

    <TextView
        android:id="@+id/textView5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Enter ContactNo. "
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/txtno"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="phone" />

    <Button
        android:id="@+id/btnadd"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Submit Details" />

    <Button
        android:id="@+id/btndisplay"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Show Details" />

</LinearLayout>    
</ScrollView> 
```

![在此处输入图像描述](../Images/c803654e157a01b51ff94011cd8df0b5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:10:35.180

您需要通过在下拉列表中创建视图来创建自定义适配器：

```
static class CustomArrayAdapter<T> extends ArrayAdapter<T>
{
    public CustomArrayAdapter(Context ctx, T [] objects)
    {
        super(ctx, android.R.layout.simple_spinner_item, objects);
    }

    //other constructors

    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent)
    {
        View view = super.getView(position, convertView, parent);

        //we know that simple_spinner_item has android.R.id.text1 TextView:         

        /* if(isDroidX) {*/
            TextView text = (TextView)view.findViewById(android.R.id.text1);
            text.setTextColor(Color.RED);//choose your color :)         
        /*}*/

        return view;

    }
} 
```

并使用：

```
 this.mAdapter = new CustomArrayAdapter<CharSequence>(this, bloodgroups); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:53:21.870

**simple_spinner_item.xml**

```
<TextView
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/text1"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:textColor="#000"
   android:gravity="center_vertical"
   android:padding="20dp"
   android:textSize="25dp"
   android:layout_marginTop="15dp"/> 
```

在你的活动中

```
ArrayAdapter<CharSequence> adapter = new ArrayAdapter<CharSequence>(this,R.layout.simple_spinner_item);
//adapter.add();====> Add items to the adapter here
spinner.setAdapter(adapterGender); 
```

# node.js - 如何处理 express.js 路由？

> ID：12084911
> 
> 赞同：1
> 
> 时间：2012-08-23T04:49:38.667
> 
> 标签：node.js, routes, express

我有类似的路线

```
app.get('/home',requireLogin,routes.home)

exports.home = function(req, res){
 res.render('index', { title: 'home' });
}; 
```

现在如果我想让我的网址看起来像这样

```
/home/menu/someting 
```

我是否必须创建另一个路线，例如

```
app.get('/home/menu/someting',requireLogin,routes.newRoutes) 
```

或者我可以只修改 routes.home 来处理其余的 url，比如如果有第二个 /something 做某事。

而且我知道我可以拥有 home/:parameter ，但我需要 url 看起来完全像 home/menu/something 并且在某些东西之后我将拥有 :parameter。

只要回答我，这是否可以在相同的路由中处理 /home 和 /home/menu，没有参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:52:12.403

您可以在路由中同时使用通配符 ( `*`) 和命名参数 ( `:parameter`)。

```
app.get('/home/menu/:something', ...) 
```

然后`req.params.something`用于值。

[http://expressjs.com/api.html](http://expressjs.com/api.html)

# java - windows命令在我的php脚本中没有执行

> ID：12084921
> 
> 赞同：2
> 
> 时间：2012-08-23T04:51:12.383
> 
> 标签：java, php

我有一个 java 文件，它会生成一个报告。我想在一个 php 脚本中执行这个。我在 php 中使用 exec() 函数：

```
<?php
$output = array();
$return  = 0;
exec("D:");
exec("cd class");
exec("java login username password id name Daily Detailed  20120820",$output,$return);
?> 
```

当我在 Windows 命令提示符下执行此命令时，它可以正常工作。但不是在 php 脚本中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:11:13.897

尝试：

`exec('"pushd d:\class & java login username password id name Daily Detailed 20120820"',$output,$return);)`

这`&`是因为您有多个命令，并且在 exec 之间不会记住上下文。

此外，[php exec](http://php.net/manual/en/function.exec.php)调用`cmd /c`您的 exec 命令，因此您需要在整个调用周围加上一对额外的引号。

（`cmd /?`从您的命令提示符解释更多关于`/c`）。

# android - 如何在单击按钮时从前后摄像头切换？

> ID：12084926
> 
> 赞同：0
> 
> 时间：2012-08-23T04:51:42.400
> 
> 标签：android, android-camera

我想通过单击按钮在前后摄像头之间切换。

当任何一个相机打开时，我需要释放它并打开另一个。

谁能告诉我要切换的代码块？

先感谢您 。. . .

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

    <Button 
        android:id="@+id/Button01" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:background="@drawable/camera_btn"/>

    <Button 
        android:id="@+id/Button02" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:background="@drawable/front_back_btn"/>

    <ImageView 
        android:id="@+id/ImageView01" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_above="@+id/Button01"
        android:contentDescription="@string/app_name">
    </ImageView>

    <com.example.surfacecamera.CameraView
        android:id="@+id/CameraView01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true" />

</RelativeLayout> 
```

这是我的活动

主要的java类是

```
package com.example.surfacecamera;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import android.app.Activity;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Bitmap.CompressFormat;
import android.hardware.Camera;
public class MainActivity extends Activity implements OnClickListener, Camera.PictureCallback {
CameraView cameraView;
ImageView imv;
Button b2 ;
int cameraCount = 0;
int camIdx = 0;
Camera cam;

Camera.CameraInfo cameraInfo = new Camera.CameraInfo();
@Override
public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);
//setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
setContentView(R.layout.activity_main);
Button pictureButton = (Button) this.findViewById(R.id.Button01);
Button b2 = (Button) this.findViewById(R.id.Button02);
imv = (ImageView) this.findViewById(R.id.ImageView01);
cameraView = (CameraView) this.findViewById(R.id.CameraView01);

cameraCount = Camera.getNumberOfCameras();

b2.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {

    }
});

pictureButton.setOnClickListener(this);
}
// From the OnClickListener
public void onClick(View v)
{
cameraView.takePicture(null, null, this);
}
// From the Camera.PictureCallback
public void onPictureTaken(byte[] data, Camera camera)
{
Bitmap bmp = BitmapFactory.decodeByteArray(data, 0, data.length);
imv.setImageBitmap(bmp);
String filename = "apicture.jpg";
File pictureFile = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/" + filename);
try
{
FileOutputStream pfos = new FileOutputStream(pictureFile);
bmp.compress(CompressFormat.JPEG, 75, pfos);
pfos.flush();
pfos.close();
}
catch (FileNotFoundException e)
{
e.printStackTrace();
}
catch (IOException e)
{
e.printStackTrace();
}
}
} 
```

和另一个班级

```
package com.example.surfacecamera;

import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import android.content.Context;
import android.content.res.Configuration;
import android.hardware.Camera;
import android.hardware.Camera.Parameters;
import android.util.AttributeSet;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class CameraView extends SurfaceView implements SurfaceHolder.Callback
{
SurfaceHolder mHolder;
int width;
int height;
Camera mCamera;
public CameraView(Context context, AttributeSet attrs)
{
super(context,attrs);
holderCreation();
}
public CameraView(Context context)
{
super(context);
holderCreation();
}
public void takePicture(Camera.ShutterCallback shutter, Camera.PictureCallback raw, Camera.PictureCallback jpeg)
{
mCamera.takePicture(shutter, raw, jpeg);
}
@SuppressWarnings("deprecation")
public void holderCreation()
{
// Install a SurfaceHolder.Callback so we get notified when the
// underlying surface is created and destroyed.
mHolder = getHolder();
mHolder.addCallback(this);
mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}
public void surfaceCreated(SurfaceHolder holder)
{
// The Surface has been created, acquire the camera and tell it where to draw.
mCamera = Camera.open();
Parameters params = mCamera.getParameters();
// If we aren't landscape (the default), tell the camera we want portrait mode
if (this.getResources().getConfiguration().orientation !=
Configuration.ORIENTATION_LANDSCAPE)
{
params.set("orientation", "portrait"); // "landscape"
// And Rotate the final picture if possible
// This works on 2.0 and higher only
//params.setRotation(90);
// Use reflection to see if it exists and to call it so you can support older versions
try {
Method rotateSet = Camera.Parameters.class.getMethod(
"setRotation", new Class[] { Integer.TYPE } );
Object arguments[] = new Object[] { new Integer(90) };
rotateSet.invoke(params, arguments);
} catch (NoSuchMethodException nsme) {
// Older Device
Log.v("CameraView","No Set Rotation");
} catch (IllegalArgumentException e) {
Log.v("CameraView","Exception IllegalArgument");
} catch (IllegalAccessException e) {
Log.v("CameraView","Illegal Access Exception");
} catch (InvocationTargetException e) {
Log.v("CameraView","Invocation Target Exception");
}
}
mCamera.setParameters(params);
try
{
mCamera.setPreviewDisplay(holder);
}
catch (IOException exception)
{
mCamera.release();
mCamera = null;
}
}
public void surfaceDestroyed(SurfaceHolder holder) {
// Surface will be destroyed when we return, so stop the preview.
// Because the CameraDevice object is not a shared resource, it's very
// important to release it when the activity is paused.
mCamera.stopPreview();
mCamera.release();
mCamera = null;
}
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h)
{
width = w;
height = h;
// Now that the size is known, set up the camera parameters and begin the preview.
Camera.Parameters parameters = mCamera.getParameters();
//parameters.setPreviewSize(w, h);
mCamera.setParameters(parameters);
mCamera.startPreview();
}
} 
```

# android - 如何使用 GCM 查找电话设备是否可访问

> ID：12084927
> 
> 赞同：0
> 
> 时间：2012-08-23T04:51:45.647
> 
> 标签：android, google-cloud-messaging

我正在使用 GCM，我的服务器代码是 PHP。

我正在向网络中无法访问的设备发送请求；我仍然成功重播。重播是`{"multicast_id":6818856885806573730,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1345696774899998%096341d0f9fd7ecd"}]}`

是否有可能找出设备（安卓手机）是否可以访问..？

# asp.net-mvc-3 - 如何在表单中动态创建表单

> ID：12084928
> 
> 赞同：1
> 
> 时间：2012-08-23T04:52:03.130
> 
> 标签：asp.net-mvc-3, razor

我已经使用 formbuilder 创建了一个扩展。现在我在我看来已经使用了它。我的观点如下：

```
@using (Html.BeginForm("addDataInd", "CustInformations", FormMethod.Post))
{
  <fieldset class="field">
    <legend>Addresses</legend>
      <table>
        <tr>                            
          @Html.EditorFor(model => model.addresses) 
        </tr>
      </table>           
  </fieldset> 
} 
```

在哪里

```
@Html.EditorFor(model=>model.addresses) 
```

调用我的 EditorTemplate，它看起来像：

```
<td>
@Html.hSearch("txtSearch", "", "lblsrch", "Search Text: ", "Search", "Fetch", "LookUp", new { script = "Select Aid, FullAreaName from fGetAreaTB()" }, null)
</td> 
```

当我运行程序时，页面看起来像

![在此处输入图像描述](../Images/6659865af798312b78573597123aff56.png)

我用火虫知道错误。我所发现的是，为第一个上部图像（即永久地址）生成的代码不会创建一个表单，但对于其他两个它会创建一个表单。因此，当我单击第一个搜索按钮时，它不起作用，但是当我单击第二个和第三个按钮时，它运行良好。

我只想在运行程序时所有按钮都必须在表单中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T06:09:19.740

您不能嵌套 HTML 表单。出于这个原因，您将不得不使用多个表单并将它们放在模板中。像这样：

```
<fieldset class="field">
    <legend>Addresses</legend>
    <table>
        <tr>                            
            @Html.EditorFor(model => model.addresses) 
        </tr>
    </table>           
</fieldset> 
```

在编辑器模板中：

```
@model Address
<td>
    @using (Html.BeginForm("addDataInd", "CustInformations", FormMethod.Post))
    {
        @Html.hSearch("txtSearch", "", "lblsrch", "Search Text: ", "Search", "Fetch", "LookUp", new { script = "Select Aid, FullAreaName from fGetAreaTB()" }, null)
    }
</td> 
```

# asp.net-mvc-3 - 如何将会话投射到列表中？

> ID：12084933
> 
> 赞同：1
> 
> 时间：2012-08-23T04:52:35.010
> 
> 标签：asp.net-mvc-3, c#-4.0

首先，我像这样为 Session 分配一个列表值

```
HttpContext.Session[cont + "schedule"] = objupload.schedule; 
```

省钱就好了

之后我想从会话中检索值，然后我正在使用它

```
objupload.schedule=HttpContext.Session[cont + "schedule"]; 
```

当我使用它时，我收到此错误

> '错误无法将类型'object'隐式转换为'System.Collections.Generic.List'

我的问题是，可以进行列表转换，还有其他解决方案可以从会话中检索值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:49:28.500

你可以对它进行类型转换，这样的东西应该可以工作。

```
objupload.schedule = (List<SomeClass>)HttpContext.Session[cont + "schedule"]; 
```

在这里替换`SomeClass`为您的班级。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-25T14:40:22.567

您可以通过以下方式从会话中转换对象：

```
 if (HttpContext.Session[cont + "schedule"] != null)
        {
            objupload.schedule = HttpContext.Session["Current"] as (List<SomeClass>);
        } 
```

# php - 加速 WHERE NOT IN MySQL 查询

> ID：12084938
> 
> 赞同：2
> 
> 时间：2012-08-23T04:53:05.693
> 
> 标签：php, mysql, sql, select

我想要做的是加快这个查询。目前它慢了大约 15 秒以上。*r.email*和*v.sent*以及*r.id*、*r.viewed*和*r.saved 都有*索引。EXPLAIN 显示两个键都在使用中，但是我看到它正在使用`Using where; Using temporary; Using filesort`.

有关改进此查询的任何想法？

```
SELECT r.id, r.top, r.email
FROM request as r
WHERE r.viewed = 0 AND r.saved = 0 AND r.email NOT IN ( 
    SELECT v.sent FROM viewing as v WHERE v.sent = r.email
)
GROUP BY r.email 
ORDER BY r.top desc, r.date
LIMIT 100; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T04:58:00.483

`IN`MySQL 为一个子句中的多个记录使用临时表。尝试

```
SELECT r.id, r.top, r.email
FROM request as r
left outer join viewing v on v.sent = r.email
WHERE r.viewed = 0 AND r.saved = 0 AND v.sent is null
GROUP BY r.email 
ORDER BY r.top desc, r.date
LIMIT 100; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T05:00:26.480

使用`LEFT JOIN`而不是`NOT IN`：为什么..？看[这里](http://explainextended.com/2009/09/18/not-in-vs-not-exists-vs-left-join-is-null-mysql/)

```
SELECT r.id, r.top, r.email
FROM request as r
     LEFT JOIN viewing v
        ON r.email= v.sent
WHERE r.viewed = 0 AND 
      r.saved = 0 AND 
      v.sent IS NULL
GROUP BY r.email
ORDER BY r.top DESC, r.date
LIMIT 100; 
```

为了获得最佳性能，请考虑在表上添加以下索引，最好[覆盖索引](https://stackoverflow.com/questions/11578241/is-there-any-way-to-check-the-performance-of-mysql-indexing/11578264#11578264)：

```
ALTER TABLE request ADD INDEX ix1 (email, viewed, saved, top, date);

ALTER TABLE viewing ADD INDEX ix1 (sent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T04:58:15.563

```
SELECT
  r.id,
  r.top,
  r.email
FROM
  request r
LEFT OUTER JOIN
  viewing v
ON
  v.sent = r.email
WHERE
  r.viewed = 0
AND
  r.saved = 0
AND
  v.sent IS NULL
GROUP BY
  r.email
ORDER BY
  r.top DESC, r.date
LIMIT 100 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T04:58:47.420

显然 MySQL 存在[子查询性能问题](http://www.mysqlperformanceblog.com/2010/10/25/mysql-limitations-part-3-subqueries/)。

幸运的是，有办法解决这个问题。具体来说，将您的子查询转换为连接，或者在您的特定情况下转换为[排除连接](http://www.xaprb.com/blog/2006/04/30/how-to-optimize-subqueries-and-joins-in-mysql/)。

# http - 托管在不同域上的 AngularJS 和模板文件

> ID：12084939
> 
> 赞同：1
> 
> 时间：2012-08-23T04:53:12.433
> 
> 标签：http, xmlhttprequest, angularjs

这是一个基本的 HTTP 问题，与 AngularJS 不完全相关，但由于 AngularJS 负责所有模板的下载和处理，因此可以将模板文件（静态 HTML）托管在不同的域或子域上并让它工作? 我猜不会，因为这违反了浏览器强制执行的 XHR 同源策略，但我希望 AngularJS 有一种解决此问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T23:53:03.770

如果您设置正确的标题，您应该能够使其正常工作。查看[CORS 规范](http://www.w3.org/TR/cors/)以获取更多详细信息。

# django - 在 Django 中使用 ForeignKey 从相关模型中获取信息

> ID：12084941
> 
> 赞同：1
> 
> 时间：2012-08-23T04:53:13.677
> 
> 标签：django

我仍然掌握 Django 的窍门。例如，您有两个模型，其中一个使用 ForeignKey 与另一个相关。

```
class Parent(models.Model):
   name = models.CharField(max_length=255)
   birthday= models.DateField(blank=True,null=True)

class Child(models.Model):
   name = models.CharField(max_length=255)
   parent= models.ForeignKey(Parent) 
```

在上面的示例中，我想访问特定的孩子并获取他的名字。我想通过父实例来做到这一点。例如，我有一个叫约翰的父母，我想知道他孩子的名字。我该怎么做？

如果这是一个简单的问题，请原谅我......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T05:02:16.560

下面的代码解决了您的问题。请注意，这`child_set`是相关经理的默认名称。有关更多信息，请参阅[https://docs.djangoproject.com/en/dev/ref/models/relations/](https://docs.djangoproject.com/en/dev/ref/models/relations/)

```
john = Parent.objects.get(name='John')
johns_children = john.child_set.all()
# Print names of his children
for child in johns_children:
    print child.name
# Get child named Jack
jack = john.child_set.get(name='jack')
# Filter children by gender
jack = john.child_set.filter(gender='F')
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T05:02:45.473

给定一个父对象`parent = Parent.objects.get(name='John')`，您可以通过 using 获取他的子对象`children = Child.objects.filter(parent=parent_id)`，然后调用`.name`任何返回的对象即可：

```
for child in children:
    print child.name 
```

# php - 使用 zend_pdf 在单个 PDF 文档中显示多个页面

> ID：12084945
> 
> 赞同：0
> 
> 时间：2012-08-23T04:53:32.653
> 
> 标签：php, zend-framework, magento, zend-pdf

我们如何使用 zend_Pdf 组件在多个页面上显示文本或图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:02:17.417

如果您愿意`display text or images on multiple pages`，但您的脚本加载在单个页面中，您可以`include()`将其他页面添加到该页面并创建 PDF。

# r - 如何生成向量的所有组合

> ID：12084947
> 
> 赞同：3
> 
> 时间：2012-08-23T04:53:45.660
> 
> 标签：r

假设我有 3 个绿色球、2 个橙色球和 8 个黄色球。我想订购它们，鉴于所有相同颜色的球都是相同的，我如何生成所有可能的序列。

在 R 中，使用`gregmisc`，我可以做

```
balls<-c('orange','orange', 'green', 'green','green','yellow'...'yellow') 
```

然后就做

```
g <- permutations(length(balls),length(balls),v=balls,set=F)
g.reduced <- g[!duplicated(g),] 
```

但这似乎非常不必要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:55:44.580

这是我能想到的最明显的方法。这是我从上面的评论中得到的方法，但是我从向量中删除了所有非唯一元素的条目，而不是除一个之外的所有条目。如果我留下一个，这种方法会导致每个条目都有一个重复。

```
arr  # one of the rows of the matrix of permutations
l  # the length of the original un-unique'd vector
out <- list()
vec <- vector(length=l)
find.placings <- function(start, pos, vec, m) {
    if (m == 0)
        return(vec)
    for (i in pos:(l - m + 1)) {
        vec[i] <- arr[start]
        out[[length(out) + 1]] <- find.placings(start + 1, i + 1, vec, m - 1)
    }
} 
```

当然，因为这是高度递归的，所以要小心。我也没有测试过。如果要调用该函数，请为其指定原始值`(1, 1, vector(length=l), m)`。

# javascript - jquery if 语句检查元素是否在特定的父 div 中

> ID：12084953
> 
> 赞同：3
> 
> 时间：2012-08-23T04:54:18.727
> 
> 标签：javascript, jquery, if-statement, parent, children

我的布局中有很多带有 .button 类的元素。单击具有按钮类的元素后，我需要首先检查该元素是否在 box1 或 box2 的父 div 内。

一个简短的例子是......如果点击的按钮在 box1 div && （另一个条件）内，那么做一些事情。最好使用 .closet 和 .length 的组合来检查按钮是否在某个 div 内？

```
<div id="box1">
        <div id="column1">
             <div class="round_button"></div>
             <div style="background: #000">
                  <div class="button"></div>
                  <div class="button"></div>
                  <div class="button"></div>
                  <div class="button"></div>
                  <div class="button"></div>
                  <div class="button"></div>
             </div>
        </div>
 <div> 

<div id="box2">
        <div id="column2">
             <div class="round_button"></div>
             <div style="background: #000">
                  <div class="button"></div>
                  <div class="button"></div>
                  <div class="button"></div>
                  <div class="button"></div>
                  <div class="button"></div>
                  <div class="button"></div>
             </div>
        </div>
 <div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T05:00:44.933

除了上面的答案，如果有许多按钮，而不是单独绑定一个事件，你只想附加一次，基于它的祖先，你可以做这样的事情：

```
$(".button").click(function() {
  if ($(this).is("#box1 *")) {}
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T04:59:49.760

如果两组按钮之间的功能差异很大，我只需在每组按钮上定义事件处理程序：

```
$('#box1 .button').on('click', function(event) {
  // ...
});

$('#box2 .button').on('click', function(event) {
  // ...
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T04:57:40.103

`if statement`如果没有别的，你不需要。

```
$('#box1, #box2').find('.button').click(function() {
  //  do something
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T04:58:01.417

`$(this).parents("#box1");`在按钮的点击事件函数中使用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T05:01:15.887

```
$('#box1 .button').click(function() {
  // first code
});

$('#box2 .button').click(function() {
  // second code
}); 
```

# android - 如何从ormlite返回的arraylist填充listview？

> ID：12084956
> 
> 赞同：0
> 
> 时间：2012-08-23T04:54:46.850
> 
> 标签：android, xml

我想从 ormlite 返回的 arraylist 填充列表视图

这是我从 ormlite 检索数据的代码

我如何用我的表的所有 colymns 填充列表视图

```
public class dinnerList extends Activity {
ArrayList<CanteenTagEntry> dinnerlist;
ListView lv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.listview_item_row);

    Context con = getApplicationContext();
    DatabaseHelper dbHelper = new DatabaseHelper(con);
    ICanteenLogRepository canteenrepo = dbHelper.getCanteenLogRepository();
    try {
        dinnerlist = (ArrayList<CanteenTagEntry>) canteenrepo.Retrieve();
        System.out.print(dinnerlist);
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    lv = (ListView) findViewById(R.id.list);
    lv.setAdapter(new CanteenAdapter(this, dinnerlist)); 
```

我的适配器类在下面

```
public class CanteenAdapter extends BaseAdapter {
    private Context context;
    private List<CanteenTagEntry> lis;

    public CanteenAdapter(Context c, List<CanteenTagEntry> li) {
        // TODO Auto-generated method stub
        context = c;
        lis = li;
    }

    public int getCount() {
        // TODO Auto-generated method stub
        return lis.size();
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        if (convertView == null) {
            convertView = inflater
                    .inflate(R.layout.listview_item_row, null);
        }

        TextView textview1 = (TextView) convertView
                .findViewById(R.id.Title1);
        TextView textview2 = (TextView) convertView
                .findViewById(R.id.Title2);
        TextView textview3 = (TextView) convertView
                .findViewById(R.id.Title3);
        TextView textview4 = (TextView) convertView
                .findViewById(R.id.Title4);

        return convertView;

    }

} 
```

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:07:50.273

您必须在适配器 getView() 方法中从列表中获取这些值

```
CanteenTagEntry entry = new CanteenTagEntry();
entry = lis.get(position); 
```

看看这个教程[自定义适配器列表视图](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)它会解决你的问题..

# c# - 启动 Visual Studio 2010 时更改默认环境设置

> ID：12084958
> 
> 赞同：7
> 
> 时间：2012-08-23T04:55:31.013
> 
> 标签：c#, .net, vb.net, visual-studio-2010

今天我在一台新机器上安装了 Visual Studio 2010。

第一次启动VS2010时，它要求“默认环境窗口”我错误地从中选择了“Visual C#开发设置”。

![在此处输入图像描述](../Images/1cd663554658ddb63b08eb608e5b8974.png)

但现在我想将该设置更改为“Visual Basic 开发设置”。我该怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-23T05:05:09.183

AFAIK 最简单的方法是：工具 -> 导入/导出设置 -> 重置所有设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T05:07:16.147

不确定你是否看到了这个，但它可能会有所帮助：

[http://msdn.microsoft.com/en-us/library/ms247075(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms247075(v=vs.90).aspx)

从那个页面，有这个指令：

> 在工具菜单上，单击导入和导出设置。
> 
> 如果要删除当前设置组合，请选择否，只需重置设置，覆盖我当前的设置，然后单击下一步。此选项不会删除默认设置，下次使用向导时仍可使用这些设置。

# c# - 在 MVC3 中获取当前用户

> ID：12084960
> 
> 赞同：0
> 
> 时间：2012-08-23T04:55:43.493
> 
> 标签：c#, asp.net, asp.net-mvc-3

我试图通过 User.Identity 获取当前用户 ID，但徒劳无功，我发现[这篇文章](https://stackoverflow.com/questions/924692/how-do-you-get-the-userid-of-a-user-object-in-asp-net-mvc) 指导我执行以下操作：我遇到了与[这篇文章](https://stackoverflow.com/questions/10593774/mvc3-getting-an-id-from-another-table-when-i-have-the-membership-getuser-provi)`Guid userGuid = (Guid)Membership.GetUser().ProviderUserKey;` 相同的错误！但是提供的解决方案在我的情况下不起作用。我有一个帐户模型

```
 public class Account
{

    public int ID { get; set; }
    ...... 
```

}

我想将创建的计费信息链接到当前登录的用户，所以我尝试按照建议执行以下操作

```
 if (User.Identity.IsAuthenticated)
            {
                Guid userGuid = (Guid)Membership.GetUser().ProviderUserKey;
                billinginfo.User = db.AccountSet
                                   .Where(x => x.ID == userGuid).FirstOrDefault();  
            } 
```

我有明显的错误：

运算符'=='不能应用于'int'和'System.Guid'类型的操作数我无法从[这篇文章](https://stackoverflow.com/questions/2280962/operator-cannot-be-applied-to-guid-or-int-in-linq-mvc-book-example)中得到答案 我试图将Guid转换为int但生成了错误的id，因为转换是最大的到 64 位

所以我想获取当前登录的用户并能够访问他的所有属性

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:05:05.330

您不能将整数与 GUID 进行比较。这没有意义。为了关联这两个表，您必须在两个表中使用相同的数据类型列。

# .htaccess - 无法将缓存控制公开设置为 .js、.css 和图像文件

> ID：12084961
> 
> 赞同：2
> 
> 时间：2012-08-23T04:55:43.547
> 
> 标签：.htaccess

我使用 Chrome 来审核我的网站，我发现 .js 和 .css 文件没有被缓存，尽管我已经设置了我的 .htaccess 文件来这样做。

我从站点的根 htaccess 文件中删除了除下面的代码之外的所有内容，但我仍然在 Chrome 中收到消息“以下资源明确不可缓存。如果可能，请考虑使它们可缓存”，指示我的主要外部 .js 和 .css 文件没有被缓存。这些文件和图像占总下载大小的 90%，所以无法缓存它们让我发疯。

这是目前我的 .htaccess 文件的代码。完全像这样仍然不会缓存任何东西。

```
# Disable Etags
Header unset ETag
FileETag None

# Expires
ExpiresActive On
ExpiresDefault "access plus 1 year"
Header unset Last-Modified
Header set Cache-Control "public"

<FilesMatch "\.(pl|php|cgi|spl|scgi|fcgi|html?)$">
Header set Cache-Control "private, must-revalidate, proxy-revalidate"
ExpiresDefault A0
ExpiresActive Off
</FilesMatch>

# Enable Compresion
<FilesMatch ".(js|css|html|htm|php|xml)$">
SetOutputFilter DEFLATE
</FilesMatch> 
```

[您可以在http://lujanventas.com](http://lujanventas.com)看到此代码不起作用

如何将缓存控制公开设置为 .css、.js 和图像文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:45:46.773

我不是缓存控制和过期标头方面的专家，但我总是使用此代码并且它总是有效（我不太确定这是否是您正在寻找的但我还是发布了它，看看它是否适合您或不是） ：

```
#################
# CACHE HEADERS #
#################
## BEGIN Expire headers
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresDefault "access plus 7200 seconds"
    ExpiresDefault "access plus 1 seconds"
    ExpiresByType image/jpg "access plus 2592000 seconds"
    ExpiresByType image/jpeg "access plus 2592000 seconds"
    ExpiresByType image/png "access plus 2592000 seconds"
    ExpiresByType image/gif "access plus 2592000 seconds"
    AddType image/x-icon .ico
    ExpiresByType image/ico "access plus 2592000 seconds"
    ExpiresByType image/icon "access plus 2592000 seconds"
    ExpiresByType image/x-icon "access plus 2592000 seconds"
    ExpiresByType text/css "access plus 2592000 seconds"
    ExpiresByType text/javascript "access plus 2592000 seconds"
    ExpiresByType text/html "access plus 7200 seconds"
    ExpiresByType text/html "access plus 1 seconds"
    ExpiresByType application/xhtml+xml "access plus 7200 seconds"
    ExpiresByType application/xhtml+xml "access plus 1 seconds"
    ExpiresByType application/javascript "access plus 2592000 seconds"
    ExpiresByType application/x-javascript "access plus 2592000 seconds"
    ExpiresByType application/x-shockwave-flash "access plus 2592000 seconds"
</IfModule>
## END Expire headers
#################
# CACHE CONTROL #
#################
## BEGIN Cache-Control Headers
<IfModule mod_headers.c>
    <FilesMatch "\\.(ico|jpe?g|png|gif|swf|gz|ttf)$">
        Header set Cache-Control "max-age=2592000, public"
    </FilesMatch>
    <FilesMatch "\\.(css)$">
        Header set Cache-Control "max-age=2592000, public"
    </FilesMatch>
    <FilesMatch "\\.(js)$">
        Header set Cache-Control "max-age=2592000, private"
    </FilesMatch>
    <filesMatch "\\.(html|htm)$">
        Header set Cache-Control "max-age=7200, public"
        Header set Cache-Control "max-age=1, public"
    </filesMatch>
    # Disable caching for scripts and other dynamic files
    <FilesMatch "\.(pl|php|cgi|spl|scgi|fcgi)$">
        Header unset Cache-Control
    </FilesMatch>
</IfModule>
## END Cache-Control Headers
########
# ETAG #
########
## KILL THEM ETAGS
Header unset ETag
FileETag none 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T12:00:51.577

在撰写本文时，您正在运行的服务器以这种方式为 JavaScript 生成标头：

```
Expires: access plus 1 day 
```

这是不正确的，它应该被替换为生效日期和时间。所以它解释了没有浏览器能够正确缓存资源。

根据[文档](http://httpd.apache.org/docs/2.4/mod/mod_expires.html)，它没有理由不起作用。

您的配置中是否有任何隐藏字符阻止 Apache2 正确解析该行？尝试删除该行`ExpiresDefault`并在可靠的文本编辑器中从头开始重新键入。

如果仍然失败，您的 Apache2 版本/二进制文件来自哪里？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T09:20:52.907

```
ExpiresActive On
ExpiresDefault A0

# 1 Week expire
<filesMatch "\.(gif|jpg|jpeg|png|swf|css|js)$">
ExpiresDefault A604800
Header append Cache-Control "public"
</filesMatch>

#No caching
<filesMatch "\.(pl|php|cgi|spl|scgi|fcgi|html)$">
ExpiresActive Off
Header set Cache-Control "private, no-cache, no-store, proxy-revalidate, no-transform"
Header set Pragma "no-cache" 
```

我相信这应该有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T17:11:22.273

在您的配置文件中修改：

```
Header set Cache-Control "public" 
```

看起来像

```
Header set Cache-Control "public max-age=31536000" 
```

因此，您的文件至少会缓存一年（max-age 以秒为单位）。

为什么？我加载了你的页面两次，我看到请求发送了一个`max-age=0`

另外，请查看此[页面](http://www.webscalingblog.com/performance/caching-http-headers-cache-control-max-age.html)，它提供了有关 mod_expires 模块的一些见解。

# ms-access - 滞后分区等效 MS Access

> ID：12084963
> 
> 赞同：3
> 
> 时间：2012-08-23T04:56:04.597
> 
> 标签：ms-access

我正在寻找等同于 MS Access 中的以下 Oracle 查询。我知道 Lag Over (Partition by ) 功能在 MS Access 中不可用，但希望使用 MS Access 实现以下查询的相同功能。感谢任何输入

```
select  t.*,
to_char(date1,'yyyymm') month,
lag(value1,1,0) over(partition by Id1,name1,office,product,overall order by date1)    prev_val
from  test_prev t
order by name1,
office,
overall,
date1,
product 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T08:54:53.877

从[Oracle 示例](http://www.techonthenet.com/oracle/functions/lag.php)工作并考虑您的查询，您可能会发现一个适合的子查询。如果没有，用户定义的函数将是可能的。

这将按 product_id 返回上一个订单日期

```
SELECT Orders.ORDER_DATE, 
       Orders.PRODUCT_ID, 
       Orders.QTY, 
      (SELECT Top 1 o.Order_Date 
       FROM Orders o 
       WHERE o.Order_Date<Orders.Order_Date 
       AND o.Product_ID=Orders.Product_ID 
       ORDER BY o.Order_Date DESC) AS PreviousOrder
FROM Orders
ORDER BY Orders.ORDER_DATE, Orders.PRODUCT_ID 
```

在示例数据中，每个 product_id 对每个订单都有不同的日期，因此仅使用 ORDER BY 日期的子查询就足够了，但是 Access 中的 Top 查询返回匹配，因此如果可能重复，最好按相关排序字段和唯一的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-10T07:06:23.220

像这样的东西：

```
SELECT p4.*, p5.qty AS qtyNext
FROM (
SELECT p1.ID, p1.qty,
(SELECT MAX(p3.price) FROM myTbl p3 WHERE p3.price < p1.price) AS prev_price, 
p1.price AS current_rec, 
(SELECT MIN(p2.price) FROM myTbl p2 WHERE p2.price > p1.price) AS next_price
FROM myTbl AS p1 
) AS p4
INNER JOIN myTbl AS p5 
ON p4.next_price=p5.price; 
```

但是看看这样的输出表示是否适合你（ - 如果价格有重复 - 所有记录似乎都可以输出）......

# arrays - 轻松将xml中的字符串更改为xml中的数组

> ID：12084968
> 
> 赞同：2
> 
> 时间：2012-08-23T04:57:18.043
> 
> 标签：arrays, string, xslt, format

我想知道是否有人知道是否有一种简单的方法可以将我的 xml 文件中的所有字符串更改为数组？

例子：

```
//This is the string I need to change:
<string name="sample1">value1, value2, value3, value4, value5</string>
//This is the way I need it to be:
<array name="sample1">
    <item>value1</item>
    <item>value2</item>
    <item>value3</item>
    <item>value4</item>
    <item>value5</item>
</array> 
```

我的问题不是我不知道如何手动完成。但我正在寻找一种更容易模拟这个过程的方法，因为我有 120 个字符串，每个字符串有 25-90 个值。

一个很好的例子是通过单击转换多个图像扩展，使用 GIMP 的附加组件为您模拟每个图像的该过程。

任何了解我所问内容的人都会知道一种将字符串转换为数组的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T06:28:03.647

这个 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
    <array>
        <xsl:attribute name="name">
            <xsl:value-of select="string/@name"/>
        </xsl:attribute>
        <xsl:apply-templates/>
    </array>
</xsl:template>

<xsl:template match="string/text()" name="tokenize">
    <xsl:param name="text" select="."/>
    <xsl:param name="sep" select="','"/>
    <xsl:choose>
        <xsl:when test="not(contains($text, $sep))">
            <item>
                <xsl:value-of select="normalize-space($text)"/>
            </item>
        </xsl:when>
        <xsl:otherwise>
            <item>
                <xsl:value-of select="normalize-space(substring-before($text, $sep))"/>
            </item>
            <xsl:call-template name="tokenize">
                <xsl:with-param name="text" select="substring-after($text, $sep)"/>
            </xsl:call-template>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>
</xsl:stylesheet> 
```

应用于此 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<string name="sample1">value1, value2, value3, value4, value5</string> 
```

给出这个输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<array name="sample1">
<item>value1</item>
<item>value2</item>
<item>value3</item>
<item>value4</item>
<item>value5</item>
</array> 
```

XSLT 使用递归模板遍历您的字符串值并以逗号分隔它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:40:00.723

**这可以使用 XSLT 2.0 完成，如下所示**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
  <array name="{@name}">
     <xsl:for-each select="tokenize(., ',\s*')">
      <item><xsl:value-of select="."/></item>
     </xsl:for-each>
    </array>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<string name="sample1">value1, value2, value3, value4, value5</string> 
```

**产生了想要的正确结果**：

```
<array name="sample1">
   <item>value1</item>
   <item>value2</item>
   <item>value3</item>
   <item>value4</item>
   <item>value5</item>
</array> 
```

# c# - WP7，C#，按住按钮增加滑块值

> ID：12084977
> 
> 赞同：0
> 
> 时间：2012-08-23T04:58:16.497
> 
> 标签：c#, windows-phone-7, button, slider

我必须在按住按钮的同时增加滑块控件的值。
只要我按住按钮，滑块就必须不断增加。

例如，该场景是典型的音量控制。
我有一个音量滑块和一个`Increase`音量按钮。
现在只要我一直按住`Increase`按钮，滑块中的音量（标记）应该会不断增加，直到我松开按钮。

我所取得的是改变按钮上单个**点击**事件的滑块值。
请就我如何实现这一目标提出您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:22:07.880

According to the [book](http://books.google.ru/books?id=glwnDTkn64kC&pg=PA127&lpg=PA127&dq=windows%20phone%207%20repeatbutton&source=bl&ots=y40dPx74ul&sig=mOR_NGOsVANENAi6O82SxI96rZ0&sa=X&ei=5L41UJKuE4bh4QTku4H4Ag&ved=0CC0Q6AEwBA#v=onepage&q=windows%20phone%207%20repeatbutton&f=false) there should be RepeatButton. In this case it will perfectly suit your needs. Try to avoid Thread sleeps. Freezes are not pretty good thing. It's one of first candidates for refactoring.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:15:35.183

```
 public bool Ok = false;

    public void Do()
    {
        while (Ok)
        {
            this.Text += ".";
            System.Threading.Thread.Sleep(100);
            Application.DoEvents();
            //I added dots to the form text , You do your own mission
        }
    }

    private void btnLouder_MouseDown(object sender, MouseEventArgs e)
    {
        Ok = true;
        Do();
    }

    private void btnLouder_MouseUp(object sender, MouseEventArgs e)
    {
        Ok = false;
    } 
```

Add a TrackBar control to the form and then
Replace the code in While block with this one, it does exactly what you want :

```
if(trackBar1.Value < trackBar1.Maximum)
    trackBar1.Value += 1; 
```

# modem - 如何配置调制解调器？

> ID：12084978
> 
> 赞同：0
> 
> 时间：2012-08-23T04:58:16.243
> 
> 标签：modem

我用 Visual C++ 2008 编写了计算机和工业机器之间通过 RS-232 进行通信的程序。当计算机和机器通过 RS-232 电缆直接连接时，程序运行良好。

现在我想通过调制解调器进行通信。

我有两个 56K 调制解调器 (TDW-33)。第一个调制解调器通过 RS-232 电缆连接到 PC。第二个调制解调器连接到机器（通过 RS-232）接收来自计算机的命令并回答此命令。调制解调器通过电话线连接。

如何配置两个调制解调器以正常工作？我需要更改我的 C++ 代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T05:01:34.753

你真的勾起了我的回忆……

您可以通过将字符序列写入 RS-232 串行端口来控制调制解调器。确切的命令取决于您的特定调制解调器。几乎所有的调制解调器至少都理解称为 Hayes 命令的通用命令子集。Wikipedia 很好地概述了这些命令以及一些历史记录：

[http://en.wikipedia.org/wiki/Hayes_command_set](http://en.wikipedia.org/wiki/Hayes_command_set)

例如，要拨打号码 2345678，您可以发送命令

> ATDT2345678

您将配置接收调制解调器以使用以下命令接听来电

> ATA

或者您可以将接收调制解调器配置为始终在响铃 3 次后接听

> ATS0=3

# iphone - 在 iPhone 应用程序更新上更新/插入内容到现有的 Sqlite 数据库中

> ID：12084989
> 
> 赞同：2
> 
> 时间：2012-08-23T04:59:35.517
> 
> 标签：iphone, ios, sqlite, updates

我在这里遇到了类似性质的其他问题，但它们都与在应用程序更新时替换以前的 sqlite db 有关。我一直在为所有以前的应用程序这样做，因为它们本质上是参考的，并且一个简单的替换就足够了。

我正在使用的这个特定应用程序是一个问答游戏，需要保持分数。目前有 4 个级别，大约 15 个问题，在以后的更新中，这些可能会增加。由于我以前从未这样做过，我很好奇并打算第一次以正确的方式做到这一点。所以这是我的疑问：

1.  更新 SO 大师推荐的内容的首选方式是什么？是否有版本号（可能在数据库本身中）并且在新应用程序首次运行时，新内容被插入到表中？
2.  存储插入查询的首选方式是什么？它们是否应该在实现文件中硬编码？

PS。我将数据库复制到 Documents 目录，因此它会在应用程序更新时持续存在。

编辑：我应该补充一点，测验应用程序是一种“徽标测验”副本，其中需要维护所有问题的分数（或将被回答/未回答的问题的状态）。所以第一个版本有 60 个问题，它们的状态会随着用户的回答而改变。

编辑2：这是我最关心的表的结构，问题表：

> _id (Integer, PRIMARY Key), levelId (Integer), QuestionImage (Varchar), CorrectAnswer(Varchar), boolAnsweredCorrectly(Integer)。

测验就像徽标测验。有一张图片，用户必须输入答案。如果键入的答案与 DB 中的正确答案匹配，则 boolAnsweredCorrectly 设置为 true。我主要关心的是 boolAnsweredCorrectly （根据结果为 0 或 1）。

编辑 3：当我谈到在应用程序更新时插入数据时，我的意思是这个。假设第一个版本有 60 个问题。在第二个版本中增加了 40 个新问题。因此，当用户将应用程序更新到第二个版本时，需要将新的 40 个问题插入问题表中。这是以这样的方式添加的，即之前的 60 个问题不会被弄乱并保持完整。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:00:24.297

> 更新 SO 大师推荐的内容的首选方式是什么？是否有版本号（可能在数据库本身中）并且在新应用程序首次运行时，新内容被插入到表中？

取决于您是否仅使用数据库来存储该人的答案结果（在这种情况下，您可能不需要在表中执行任何“插入”操作，除了在他们发生时存储该人的测验答案）或您是否也有一些单独的表格来存储原始问题（如果您不通过某些服务器界面提供新问题，这可能是有意义的）。

我个人在表格中使用格式为“ . . ”的`database_version`字段，其中或预设需要数据库更新的数据库更改，而更改不需要）。但是我使用这个数据库版本号系统来知道我是否想将我的包的数据库重新复制到（但我这样做只是为了对我的数据库进行结构更改，并且更喜欢通过服务器接口获取新数据，但这取决于你如何解决方案设计）。如果您确实以编程方式确定要再次复制数据库，如果您有任何需要保留的数据，但对于 Retterdesdialogs 而言，您可能希望将旧数据库中的任何数据保存到新数据库中。`configuration``major``minor``revision``major``minor``revision``Documents`

> 存储插入查询的首选方式是什么？它们是否应该在实现文件中硬编码？

无论如何，我认为你不应该有大量的硬编码`INSERT`语句，所以这不是问题。我从您下面的评论中得知，您预计会尝试根据用户以前拥有的版本插入新的问题记录。

就个人而言，我更倾向于

*   将您最新和最重要的问题放在捆绑包中的数据库中
*   `Documents`让应用程序根据应用程序的预期检查数据库版本的版本，
*   如果不同 (a) 保存用户的旧答案；(b) 将新数据库从捆绑包复制到`Documents`；(c) 根据旧数据库的答案更新新数据库中的答案。

您当然可以以编程方式插入记录，但想象一下，当您的应用程序发布到第 20 版时，您的生活会是什么样子，您将不得不有大量的条件逻辑来确定要插入的内容，具体取决于之前版本的内容。 app 是（因为你不能假设用户总是拥有以前的版本......他们可能有几个版本过时了）。当您考虑每个版本都是添加、删除和修改问题的组合时，它会变得更加棘手。

底线，我倾向于当前问题的数据库，`Documents`如果需要，将其复制到，只需确保应用程序有旧数据库和旧答案，然后手动保存它们。（或者您可以将答案存储在单独的数据库中。）

或者，我怀疑这不是您想要的，但您可能需要考虑使用**Core Data**，这是首选的 iOS 持久存储模型。似乎它已经解决了[核心数据模型版本控制和数据迁移](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/Introduction.html)中概述的迁移问题。我从来没有使用过 Core Data 的迁移/版本控制的东西（我历来都是自己推出的），但它看起来很有希望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:22:54.830

我会在伪代码中做这样的事情：

```
// if old database exists in documents directory
// get scores
// delete old database
// copy the new database from bundle to documents directory
// update scores in the new database 
```

要检查旧数据库是否是旧数据库，您可以检查名称或 somthink，例如“is questions == 15”

# hibernate - 如何在 HQL 中使用 Date_sub() 函数？

> ID：12084990
> 
> 赞同：1
> 
> 时间：2012-08-23T04:59:37.543
> 
> 标签：hibernate, hql

如何在 hql 中使用 date_sub() 函数。例如以下sql查询：select * FROM performance where performance_id= 8955 and daterangefrom >= (date_sub('2008-12-01 00:00:00',interval 8 hour));

我必须在@NamedQuery 中写这个，所以我尝试了这个但没有工作：

```
@NamedQuery(name = "performance.performanceBySourceId", query = "select p from Performance p where p.source.id = :sourceID and p.dateRangeFrom >= (registerFunction('performance.queryString', new SQLFunctionTemplate(Hibernate.STRING, 'date_add('2008-12-01 00:00:00', INTERVAL 2 hour))) order by p.dateRangeFrom desc' ") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:37:56.490

我和你遇到了同样的问题，看来hibernate不支持DATE_SUB的mysql功能，所以我们必须使用原生sql查询

# php - 使用 PHP 动态生成具有不同 id 的 div

> ID：12084994
> 
> 赞同：1
> 
> 时间：2012-08-23T04:59:44.907
> 
> 标签：php, javascript, dynamic, dynamically-generated

我想使用具有不同 id 的 PHP 生成一定数量的 div，我知道如何为一组数字生成它们，但是如何在点击时生成具有不同 id 的？另外，如果我想删除一个 div（及其相应的 id），我该怎么做？

这是我用于生成 (6) div 的代码

```
 $element = "<div></div>";
    $count = 6;
    foreach( range(1,$count) as $item){
        echo $element;
    } 
```

我需要类似 jquery/javscript 中的 click() （但在 PHP 中）来触发 div 创建，我什至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T05:06:35.740

在 JavaScript 中你可以做

```
function createDiv(id, parent)
{
    var elem = document.createElement('div');
    elem.id = id;
    document.getElementById(parent).appendChild(elem);
}

createDiv(10, id-of-parent-elem-to-append-to); 
```

其中 10 将是新元素的 ID，您必须提供应附加新 DIV 的元素的 ID，作为第二个参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T05:08:04.360

好的，要使用不同的 id 创建它们，您可以执行以下操作：

```
$element = "<div id=";
$count = 6;
foreach($id=0;$id<$count;$id++) {
    echo $element."div".$id."></div>";
} 
```

与附加 id 的方式相同，您可以附加一个 onClick 事件，该事件如下所示：

```
onclick="this.style='visibility:hidden;'"; 
```

或类似的规定。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T05:04:51.277

```
echo "<div id='$item'></div>"; 
```

instead?