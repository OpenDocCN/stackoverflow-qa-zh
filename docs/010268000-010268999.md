# StackOverflow 问答 10268000-10268999

# css - 如何隔离Div中的内容

> ID：10268005
> 
> 赞同：1
> 
> 时间：2012-04-22T12:39:59.037
> 
> 标签：css, html

众所周知，固定大小的 div 的内容会从 div 中流出，以防它们需要更多空间。例如： http: [//jsfiddle.net/YaTeG/](http://jsfiddle.net/YaTeG/) 现在我的问题是如何在没有任何 js 的情况下阻止它？我的意思是像一个 iframe ！如果我们需要更多空间，它有滚动条。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T12:42:03.810

使用该[`overflow`](http://www.w3.org/TR/CSS21/visufx.html)物业。

*   `overflow: hidden`如果你想剪掉它，或者
*   `overflow: auto`如果您希望滚动条出现以防内容太长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T12:46:40.737

如果你像这样更新你的CSS；

```
#wrapper {
    position: absolute;
    width: 200px; height: 200px;
    top: 20px; left: 20px;
    background-color: #ff0;
    border: 2px solid #000;
    overflow:auto;
} 
```

当您的内容大于 div 时，它将自动滚动。

```
overflow:auto; 
```

您可以在[这里](http://css-tricks.com/examples/OverflowExample/)查看此案例的不同风格

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T15:21:32.080

`overflow`属性控制水平和垂直滚动条。如果您想进一步控制，您可以`overflow`为每个滚动条单独设置属性。

`overflow-x`属性控制水平滚动条和`overflow-y`- 用于垂直

例如

```
.some_element{
    overflow-x: hidden;
    overflow-y: auto;
} 
```

# c# - 将继承的 TextBox 添加到 ToolStrip

> ID：10268009
> 
> 赞同：1
> 
> 时间：2012-04-22T12:40:26.493
> 
> 标签：c#, textbox, toolstrip, inherited

似乎由于某种原因不可能，但值得一试：是否可以将继承的 TextBox 添加到 ToolStrip？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:59:30.150

如果你想要一个自定义文本框，你需要让你的文本框继承自 ToolStripTextBox 而不仅仅是 TextBox。然后您可以从代码或设计器中添加它。

![自定义工具条文本框](../Images/ddf012269357d593ad33674e71e5a7b9.png)

# c - write() 的包装函数无法按预期工作

> ID：10268011
> 
> 赞同：0
> 
> 时间：2012-04-22T12:40:37.587
> 
> 标签：c, linux, system-calls

给定系统调用 write 的包装函数：

```
ssize_t my_write(int fd, const void *buf, size_t count)
{
    long __res;
    __asm__ volatile
        ("int $0x80"
                : "=a" (__res)
                : "0" (4),"D" ((long)(fd)),"S" ((long)(buf)), "d" ((long)(count))
                : "ebx","memory");

      if (-125 <= __res && __res < 0)
      {
        errno = -__res;
        __res   = -1;
      }

      return __res;
} 
```

我已经用代码（来自 int main()）试过了：

```
int main() {

     my_write(2,"an read error occured\n",26);

     return 0;
 } 
```

但是它不起作用。知道为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T12:54:25.363

您的约束已关闭，文件描述符需要进入 EBX，ECX 中的缓冲区（而不是像您所拥有的 EDI/ESI）。

尝试：

```
__asm__ volatile
    ("int $0x80"
            : "=a" (__res)
            : "0" (4),"b" ((long)(fd)),"c" ((long)(buf)), "d" ((long)(count))
            : "memory"); 
```

# c# - XNA 4.0：不需要的纹理混合取决于背景颜色

> ID：10268013
> 
> 赞同：1
> 
> 时间：2012-04-22T12:41:07.260
> 
> 标签：c#, xna

我发现了在背景上绘制不透明前景纹理的问题。前景按钮纹理以某种方式与背景混合，您可以看到顶部按钮和最低按钮之间的差异。最低的按钮比顶部的按钮轻一点。

[按钮纹理取决于背景颜色](http://imageupload.org/en/file/220194/buttons.png.html)

我在游戏创建中这样设置图形：

```
 // Set up graphics
        GraphicsDeviceManager graphics = new GraphicsDeviceManager(this);
        graphics.PreferredBackBufferWidth = 800;
        graphics.PreferredBackBufferHeight = 480;
        graphics.SynchronizeWithVerticalRetrace = true;

        // antialiasing
        graphics.PreferMultiSampling = true;
        graphics.ApplyChanges(); 
```

并在任何地方使用带有 Color.White 参数的空参数列表，用于“spriteBatch.Begin();” 调用没有任何混合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T13:56:36.490

The colors are the same, it just appears that they aren't :)

Here, i copy pasted the bottom part of the image next to the top part:

![enter image description here](../Images/153aeaae9945752cafedfab935467ac2.png)

It is an optical illusion called [simultaneous brightness contrast](http://www.psych.ndsu.nodak.edu/mccourt/Projects/Brightness/SBC/simultaneous_brightness_contrast.htm).

# objective-c - 在 iOS 应用中卖书

> ID：10268020
> 
> 赞同：0
> 
> 时间：2012-04-22T12:41:51.437
> 
> 标签：objective-c, ios

我正在开发一个 iOS 项目，客户希望在应用程序中销售硬拷贝书籍。我使用[PayPal](http://kidswelcome.com.au/shop.php)完成了这个应用程序，但我认为 Apple 不会批准 PayPal 用户，这本书将通过地址交付给买家。怎么能处理这个？我也想卖电子书，但我不知道如何处理。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:53:12.653

您应该非常仔细地阅读开发者指南，但似乎对创建销售实体商品的应用程序没有任何限制。您不能为此使用应用内购买，但听起来您无论如何都不想这样做：

[https://developer.apple.com/appstore/guidelines.html](https://developer.apple.com/appstore/guidelines.html)

# web-services - Spring 忽略了 commons-logging.jar

> ID：10268021
> 
> 赞同：1
> 
> 时间：2012-04-22T12:42:01.317
> 
> 标签：web-services, spring, cxf

我正在尝试使用 CXF 2.6.0 发布我的网络服务。在启动 tomcat 服务器时，出现以下异常：

```
org.springframework.beans.BeanInstantiationException : Could not instantiate bean class [org.springframework.web.context.support.XmlWebApplicationContext]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory 
```

不用说我的类路径中已经有了 common-logging-1.1.1.jar。我还缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:50:11.133

请检查在发布期间是否多次加载 LogFactory。如果加载同一类时存在 jar 冲突，则可能会发生这种情况。

# filter - 雅虎管道：缺少过滤规则

> ID：10268025
> 
> 赞同：0
> 
> 时间：2012-04-22T12:42:24.030
> 
> 标签：filter, rss, yahoo-pipes

我第一次尝试在 Yahoo Pipes 中构建一个简单的 RSS 过滤器。我想按日期过滤。

我有一堆来自“获取提要”数据源的 RSS 提要，并将它们连接到过滤器。我现在应该在规则下拉列表中获得 item.y:published.utime 字段。但是，它不存在：我根本没有任何 item.y 字段。

如果我从编辑示例过滤器开始，这些字段就在那里。到底是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:41:28.733

下拉列表仅包括基本选项，因为新手最常使用这些选项来制作简单的管道。雅虎开发人员还从下拉列表中留下了许多选项，因为其中一些选项很长并且会破坏布局，例如此示例.. *item.y:published.day_ordinal_suffix*

如果您想使用特殊的“y”字段作为数据源，只需使用连接到计算机的键盘设备将它们手动输入过滤器模块的*规则*框中。

# julia - Julia 每次都编译脚本？

> ID：10268028
> 
> 赞同：63
> 
> 时间：2012-04-22T12:42:41.563
> 
> 标签：julia

Julia 语言每次都会编译脚本，难道我们不能用 Julia 编译二进制文件吗？我尝试了一个带有 println 函数的小型 helloworld 脚本，julia 显示输出需要 2.3 秒！如果我们可以制作二进制文件而不是每次都编译会更好

更新：自从我提出这个问题以来，Julia 发生了一些变化。虽然我不再关注 julia 的更新，但因为我已经问过这个问题，如果您正在寻找类似的东西，请查看以下关注 julia 的人的答案和评论。

另外，很高兴知道现在加载脚本大约需要 150 毫秒。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-05-23T00:05:21.360

基诺的回答是正确的，但也许我可以更详细地说明正在发生的事情以及我们计划对此做些什么。

目前只有 LLVM JIT 模式：

*   对于一些简单的顶级语句，有一个非常简单的解释器。
*   所有其他代码在执行之前都被编译成机器代码。代码使用正在应用代码的值的运行时类型进行了积极的专门化，并使用动态类型推断通过程序传播。

这就是即使在没有类型注释的情况下编写代码时 Julia 也能获得良好性能的原因：如果您调用`f(1)`，您将获得专门用于64 位系统上`Int64`的类型的代码；`1`如果你打电话给你，你会得到一个专门用于-所有系统上的类型的`f(1.0)`新版本。由于函数的每个编译版本都知道它将获得什么类型，因此它可以以类似 C 的速度运行。您可以通过编写和使用“类型不稳定”函数来破坏这一点，这些函数的返回类型取决于运行时数据，而不仅仅是类型，但我们在设计核心语言和标准库时非常小心不要这样做。`Float64``1.0`

大部分 Julia 都是自己编写的，然后进行解析、类型推断和 jit 处理，因此从头开始引导整个系统需要大约 15-20 秒。为了让它更快，我们有一个分阶段的系统，我们在其中解析、类型推断，然后在文件中缓存类型推断的 AST 的序列化版本`sys.ji`。然后在您运行时加载该文件并用于运行系统`julia`。但是，没有缓存 LLVM 代码或机器代码`sys.ji`，因此每次启动时仍然需要完成所有 LLVM jitting `julia`，因此大约需要 2 秒。

这 2 秒的启动延迟非常烦人，我们有一个修复它的计划。基本计划是能够将整个 Julia 程序编译为二进制文件：可以运行的可执行文件或`.so`/`.dylib`可以从其他程序调用的共享库，就好像它们只是共享 C 库一样。二进制文件的启动时间将与任何其他 C 程序一样，因此 2 秒的启动延迟将消失。

**附录 1：**自 2013 年 11 月起，Julia 的开发版不再有 2 秒的启动延迟，因为它将标准库预编译为二进制代码。启动时间仍然比 Python 和 Ruby 慢 10 倍，因此还有改进的空间，但速度相当快。下一步将是允许预编译包和脚本，以便它们可以像 Julia 本身一样快地启动。

**附录 2：**自 2015 年 6 月以来，Julia 的开发版本自动预编译了许多包，允许它们快速加载。下一步是静态编译整个 Julia 程序。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-05-07T14:38:32.397

目前 Julia JIT 在启动时编译其整个标准库。我们知道这种情况，目前正在努力缓存 LLVM JIT 输出以纠正这种情况，但在那之前，没有办法解决它（使用 REPL 除外）。

# php - Yii 定义无效字符串

> ID：10268031
> 
> 赞同：0
> 
> 时间：2012-04-22T12:43:07.430
> 
> 标签：php, string, validation, frameworks, yii

我正在 Yii 中创建注册系统，我希望人们无法注册用户名，如 admin、administrator、superuser、moderator... 那么你能告诉我该怎么做吗？如果有机会在表单验证中将这些无效名称列在数组中，那就更好了。

那么，有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T13:00:34.097

您可以为您的注册表单创建自定义验证器。最简单的方法是在您的模型中，如下所示：

```
public function rules() {
    return array(
       array('username', 'my_validation_rule'),
    );
}

public function my_validation_rule($attribute) {
    $restricted_usernames = array('admin', 'root', 'superuser');
    if(in_array($this->$attribute, $restricted_usernames))
        $this->addError($attribute, 'This username is restricted!');
} 
```

# javascript - 谷歌地图 API V3 方法 fitBounds()

> ID：10268033
> 
> 赞同：78
> 
> 时间：2012-04-22T12:43:35.760
> 
> 标签：javascript, google-maps, google-maps-api-3

我有这个呈现地图的代码。

```
function initialize() {
    var myOptions = {
      center: new google.maps.LatLng(45.4555729, 9.169236),
      zoom: 13,
      mapTypeId: google.maps.MapTypeId.ROADMAP,

panControl: true,
mapTypeControl: false,
panControlOptions: {
            position: google.maps.ControlPosition.RIGHT_CENTER
        },
zoomControl: true,
zoomControlOptions: {
    style: google.maps.ZoomControlStyle.LARGE,
    position: google.maps.ControlPosition.RIGHT_CENTER
},
scaleControl: false,
streetViewControl: false,
streetViewControlOptions: {
    position: google.maps.ControlPosition.RIGHT_CENTER
            }
        };
    var map = new google.maps.Map(document.getElementById("mapCanvas"),
        myOptions);

var Item_1 = new google.maps.LatLng(45.5983128 ,8.9172776);

var myPlace = new google.maps.LatLng(45.4555729, 9.169236);

var marker = new google.maps.Marker({
    position: Item_1, 
    map: map});

var marker = new google.maps.Marker({
    position: myPlace, 
    map: map});

var bounds = new google.maps.LatLngBounds(myPlace, Item_1);
map.fitBounds(bounds);

    } 
```

即使这两点距离 25 公里，我也会得到这个结果：

![在此处输入图像描述](../Images/45f92bfae9b45b1cfe6ac7d568f84d75.png)

虽然我想渲染更高级别的缩放。

像这样

![在此处输入图像描述](../Images/8389bc6a13c7879010fce6765a35eecc.png)

我使用方法**fitBounds()**

```
 var bounds = new google.maps.LatLngBounds(myPlace, Item_1);
    map.fitBounds(bounds); 
```

谢谢你的支持

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-04-22T13:03:39.213

发生这种情况是因为[`LatLngBounds()`](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds)没有将两个任意点作为参数，而是 SW 和 NE 点

`.extend()`在空边界对象上使用该方法

```
var bounds = new google.maps.LatLngBounds();
bounds.extend(myPlace);
bounds.extend(Item_1);
map.fitBounds(bounds); 
```

演示在[http://jsfiddle.net/gaby/22qte/](http://jsfiddle.net/gaby/22qte/)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-04-22T13:05:39.063

`LatLngBounds`必须按（西南、东北）顺序定义点。您的积分不是按这个顺序排列的。

一般的解决方法，特别是如果你不知道这些点肯定会按照这个顺序，是扩展一个空边界：

```
var bounds = new google.maps.LatLngBounds();
bounds.extend(myPlace);
bounds.extend(Item_1);
map.fitBounds(bounds); 
```

API 将整理界限。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2014-01-16T08:53:30.423

尽管我正在按照上面的建议构建我的 LatLngBounds，但我遇到了与您描述的相同的问题。问题是事情是异步的，`map.fitBounds()`在错误的时间调用可能会给你留下像 Q 一样的结果。我发现最好的方法是将调用放在一个空闲的处理程序中，如下所示：

```
google.maps.event.addListenerOnce(map, 'idle', function() {
    map.fitBounds(markerBounds);
}); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-06-04T09:22:06.553

```
 var map = new google.maps.Map(document.getElementById("map"),{
                mapTypeId: google.maps.MapTypeId.ROADMAP

            });
var bounds = new google.maps.LatLngBounds();

for (i = 0; i < locations.length; i++){
        marker = new google.maps.Marker({
            position: new google.maps.LatLng(locations[i][1], locations[i][2]),
            map: map
        });
bounds.extend(marker.position);
}
map.fitBounds(bounds); 
```

# c++ - 如何用 Visual Studio x64 编译？

> ID：10268034
> 
> 赞同：7
> 
> 时间：2012-04-22T12:43:38.117
> 
> 标签：c++, visual-studio-2008, 64-bit

我想从 bat 文件中编译 VS2008 x64。

当我在 VS2008 32 位中编译时，我调用 vsvars32.bat。

我需要调用什么才能在 x64 中编译？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-22T12:49:42.517

现在的建议是不要使用`vsvar32.bat`，`SetEnv.cmd`而是使用它来设置您的构建环境。传递`/x64`参数以选择 64 位构建环境。这个[MSDN 页面](http://msdn.microsoft.com/en-us/library/ff660764.aspx)有更多关于`SetEnv.cmd`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-03T07:25:13.350

一个简单的方法是进入目录：“C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\bin\amd64”并执行文件：“vcvarsamd64.bat”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T12:57:21.553

您需要在 VS2008 IDE 中安装“X64 编译器和工具”功能。

请尝试通过控制面板>>添加/删除程序添加“X64编译器和工具”功能（对于Vista或更高版本的操作系统，请转到“程序和功能”）。进入Visual Studio 2008维护模式后，请展开“Visual C++”节点>>点击“X64编译器和工具”>>点击“更新”按钮。

然后你可以输入“Visual Studio 2008 命令提示符（x64）”

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-14T18:48:28.167

Visual Studio 将安装快捷方式来启动命令提示，为触发构建设置适当的环境。您可以通过右键单击它并检查其目标属性来查看 x64 命令提示符的快捷方式指向的位置。它通常指向：

“C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\vcvarsall.bat”amd64

这里有更多信息：[https ://msdn.microsoft.com/en-us/library/x4d2c09s.aspx](https://msdn.microsoft.com/en-us/library/x4d2c09s.aspx)

# jquery - 如何在 ruby on rails 中访问 rails 助手和嵌入资产 javascript 文件中的 ruby ？

> ID：10268035
> 
> 赞同：0
> 
> 时间：2012-04-22T12:43:53.313
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3.1, asset-pipeline

我有一个显示和隐藏 div，单击时显示和隐藏评论。默认情况下，在单击之前它会显示消息计数以及一些向下箭头，例如

**“55 条评论 [向下箭头]”**

当点击它变为：

**“隐藏评论 [向上箭头]”**

**我使用此代码默认显示评论数量和箭头（用户/新）：**

```
 <span class="commentsCount"><%= pluralize(m.comments.count, 'comment') %></span>
    <span class="commentArrows"><%= image_tag 'view_all_comments.png' %> </span> 
```

**我使用 JQuery 来帮助实现更改（users/load_comments.js.erb）：**

```
$('.postHolder').off().on('ajax:success', '.view_all_comments', function(){

    var postContent = $(this).parents('.post_content'),
        commentContainer = postContent.find('.comment_container'),
        getComments = "<%= j render 'users/partials/show_all_comments' %>";
        commentContainer.slice(0, -2).remove();

// The next 2 lines replace the comment count with "Hide comments" and up arrows"

          postContent.find('.commentsCount').html("Hide comments");
          postContent.find(".commentArrows img").prop("src", "/assets/up_arrows.png");

             postContent.find('.comment_container:first').before(getComments);
}); 
```

现在重要的部分是再次单击**隐藏评论**时。我需要它恢复显示评论计数。我可以将箭头恢复为原始箭头，但文本我看不到恢复评论帐户的方法，因为我无法访问我的 assets/javascripts/users.js 文件中的 rails 助手和实例变量等。

**这是代码（资产/javascripts/users.js：**

```
 // for showing and hiding comments

        $('.expandComments').click(function() {

        var showAllCommentsSubmit = $(this).find('.showAllCommentsSubmit'),
            postContent = $(this).parents('.post_content'),
            commentContainer = postContent.find('.comment_container');

            if ($(this).hasClass('visible')) {
                postContent.find(".comment_container").slice(0, -1).hide();
                postContent.find(".commentArrows img").prop("src", "/assets/view_all_comments.png");

//Here is where I need the code to replace the "Hide comments" text.

            }  else {

                if (showAllCommentsSubmit.is(':disabled')) {
                    postContent.find(".comment_container").show();
                    postContent.find(".commentArrows img").prop("src", "/assets/hide_comments.png");

                } else {
                    showAllCommentsSubmit.trigger('submit');
                    showAllCommentsSubmit.prop({disabled: true});
                    postContent.find(".commentArrows img").prop("src", "/assets/comments-loader.gif");
                }
            }

            $(this).toggleClass('visible');

        }); 
```

由于我认为不可能在资产 javascript 文件中使用嵌入式 ruby​​ / rails 助手，我将如何实现我想要实现的目标。

有没有办法在其他html之上显示一些html，然后在不再需要它时将其删除，并再次显示下面的html？

我敢肯定还有其他一些我可以提出的解决方案，例如发挥一些 css 的作用.. 有一个 div 隐藏和显示，但我还没有想出我会如何做到这一点。想知道有没有快速的解决办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:55:36.017

您可以在资产代码中使用 Rails 助手。您基本上只需要将资产从 重命名`users.js`为`users.js.erb`，Rails 将使用 ERb 对其进行预处理，然后再将内容作为 JavaScript 发出。

有关详细信息，请查看[有关资产管道中预处理的 Rails 指南](http://guides.rubyonrails.org/asset_pipeline.html#preprocessing)。

# matlab - MATLAB FFT 相位图

> ID：10268037
> 
> 赞同：2
> 
> 时间：2012-04-22T12:44:18.223
> 
> 标签：matlab, fft

我正在尝试使用 MATLAB 绘制 FFT 的相位。我有这个信号，实际上是通过调光器设置为一半强度的电流。不管怎样，这真的无所谓。基本上，在我的代码中，我将信号组合成一个向量，即。然后我对 i 执行 FFT 并将其存储在 I 中。然后我尝试获得 I 的大小和角度。

幅度谱似乎是正确的，但相位/角度不正确，我不知道为什么。有什么建议么？我确实意识到我的代码在部分编写效率低下方面有点“狡猾”。我不是 MATLAB 或任何东西的专业人士......

帮助将不胜感激。

谢谢你。

```
%             (  40/240 * sin(2*pi*50*t)      for a < t < T
% waveform = {
%             (  0                            for 0 < t < a

cycles = 2;
a = 90;

clear i  t;
aTime = a/360;
dt = 0.0001;

t = 0;
i = 0;

for n = 0 : cycles - 1;
    T = 1/50;

    t0 = 0 + (n*T) : dt : T*aTime + (n*T) - dt;
    t1 = T*aTime + (n*T) : dt : T/2 + (n*T) - dt;
    t2 = T/2 + (n*T) : dt : T*(aTime + 1/2) + (n*T) - dt;
    t3 = T*(aTime + 1/2) + (n*T) : dt : T + (n*T) - dt;
    t = [t [t0, t1, t2, t3]];

    i = [i zeros(1, length(t0))];
    i = [i 40/240 * sin(2*pi*50*t1)];
    i = [i zeros(1, length(t2))];
    i = [i 40/240 * sin(2*pi*50*t3)];
end

subplot(3,2,[1 2])
hold on;
plot(t, 40/240 * sin(2*pi*50*t), ':r');
plot(t, i);
xlabel('time (sec)')
ylabel('i(t)')
title('Current through a 40W, 240V dimmed light with alpha = 90^o')
grid on;
hold off;
axis([0, T*(n(end) + 1), -0.2, 0.2]);

fs = 1/dt;
N = length(i);
df = fs/N;
f = (-fs/2) : df : (fs/2)-df;
I = fftshift(fft(i)/N);

subplot(3,2,3)
plot(f, abs(I))
axis([-1000,1000,0,0.055]);
xlabel('frequency (Hz)')
ylabel('|i(t)|')
title('Magnitude Spectrum')
grid on;

subplot(3,2,5)
plot(f, mod(unwrap(angle(I)), 2*pi))
axis([-1000, 1000, -pi, 2.5*pi]);
xlabel('Radians')
ylabel('Arg(i(t))')
title('Frequency')
grid on;

subplot(3,2,4)
hold on;
plot(t, i);
plot(t, real(0.1*exp(1i*(2*pi*50*t + 4.139))), 'm');
plot(t, real(2*0.02653*exp(1i*(2*pi*150*t + 6.268))), 'g');
plot(t, real(2*0.008844*exp(1i*(2*pi*250*t + 3.156))), 'r');
axis([0, T*(n(end) + 1), -0.2, 0.2]);
hold off;
xlabel('Time')
ylabel('Value')
title('Fourier Series Components')
grid on;

subplot(3,2,6)
hold on;
plot(t, i);
plot(t, real(0.1*exp(1i*(2*pi*50*t + 4.139))), 'm');
plot(t, real(2*0.008844*exp(1i*(2*pi*250*t + 3.156)) + 2*0.02653*exp(1i*(2*pi*150*t + 6.268)) + 0.1*exp(1i*(2*pi*50*t + 4.139))), 'm');
plot(t, real(2*0.02653*exp(1i*(2*pi*150*t + 6.268)) + 0.1*exp(1i*(2*pi*50*t + 4.139))), 'g');
axis([0, T*(n(end) + 1), -0.2, 0.2]);
hold off;
xlabel('Time')
ylabel('Value')
title('Fourier Series Sum')
grid on; 
```

编辑：使 fftshift 同时应用于角度和幅度。

这就是我得到的： ![地块](../Images/bd6d2b9b26edeb80fcbcdf64f025b008.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T15:14:47.390

FFT 阶段必须展开才能有意义。否则会出现 2pi 的不连续性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T12:50:30.147

我认为您的问题是您使用 fftshift 作为幅度，而不是使用它作为角度。我建议你要么使用它，要么不要，混合这样的东西通常是不好的做法......

# python - 无法在 OS X 上安装 scikit-learn

> ID：10268044
> 
> 赞同：7
> 
> 时间：2012-04-22T12:45:28.813
> 
> 标签：python, scikit-learn, pip

我无法安装[scikit-learn](http://scikit-learn.org/stable/)。我可以通过从源代码或通过 pip 构建其他软件包来安装其他软件包，而不会出现问题。对于 scikit-learn，我尝试在 GitHub 上克隆项目并通过 pip 安装但没有成功。有人可以帮忙吗？这是我的一部分`pip.log`：

```
Downloading/unpacking scikit-learn
  Running setup.py egg_info for package scikit-learn
    Warning: Assuming default configuration (scikits/learn/{setup_scikits.learn,setup}.py was not found)Warning: Assuming default configuration (sklearn/svm/tests/{setup_tests,setup}.py was not found)Appending scikits.learn configuration to
    Ignoring attempt to set 'name' (from '' to 'scikits.learn')
    Appending sklearn.check_build configuration to sklearn
    Ignoring attempt to set 'name' (from 'sklearn' to 'sklearn.check_build')
    Appending sklearn.svm.tests configuration to sklearn.svm
    Ignoring attempt to set 'name' (from 'sklearn.svm' to 'sklearn.svm.tests')
    blas_opt_info:
      FOUND:
        extra_link_args = ['-Wl,-framework', '-Wl,Accelerate']
        define_macros = [('NO_ATLAS_INFO', 3)]
        extra_compile_args = ['-faltivec', '-I/System/Library/Frameworks/vecLib.framework/Headers'] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T17:31:56.057

安装[SciPy Superpack](https://github.com/fonnesbeck/ScipySuperpack)或[EPD](http://enthought.com/products/epd.php)以在 OSX 下一次性获得所有必需的依赖项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-17T04:36:33.267

我遇到了[这个不错的教程](http://shanshanchen.com/2013/05/29/install-numpy-scipy-scikit-learn-on-mac-os-x-for-data-miners/)，只需几个简单的步骤，您就可以像这样通过 PIP 安装它：

*（只有大纲。有关详细信息，请访问作者页面。）*

1.  安装 Xcode
2.  安装点子
3.  安装冲泡
4.  安装 NumPy
5.  安装 gfortran（重要！）
6.  安装 SciPy
7.  安装 matplotlib（有用）
8.  安装 scikit-learn
9.  测试

另请参阅作者页面上的评论，了解如何安装 PIP 和 Virtualenv。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-22T13:10:49.060

如果您使用[Homebrew](http://brew.sh/)，那么这两个命令应该为您完成：

```
brew tap homebrew/python
brew install scipy 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-24T16:38:29.373

您可以使用 pip 安装 scikit。

[http://scikit-learn.org/stable/install.html](http://scikit-learn.org/stable/install.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-19T21:40:57.913

您可以使用此 brew install postgresql 来安装具有正确轮文件的软件包。激活 venv 后，有时您需要下载正确的 wheel 文件才能安装某些软件包。此安装使用 setup.py install 而不是使虚拟环境可以轻松地使用 pip3 安装安装所需的包。另一个需要此安装的常见软件包是 django 的 psycopg2。

```
brew install postgresql
pip3 install scikit-learn 
```

# java - 为什么插入排序比排序数组上的快速排序快

> ID：10268046
> 
> 赞同：4
> 
> 时间：2012-04-22T12:45:52.733
> 
> 标签：java, sorting

我正在将插入排序与快速排序进行比较。我已经弄清楚为什么 qsort 在几乎排序的数组上速度较慢，但​​我无法弄清楚为什么插入排序要快得多，当然它仍然需要比较数组中几乎一样多的元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T16:19:57.873

插入排序在已排序或接近排序的数组上更快的原因是，当它将元素插入到数组的已排序部分时，它几乎不需要移动任何元素。例如，如果数组的排序部分是`1 2`并且下一个元素是`3`，它只需要进行一次比较——`2 < 3`确定它根本不需要移动`3`。因此，对已排序数组的插入排序是线性时间的，因为它只需要对每个元素进行一次比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T12:54:57.827

这取决于几个因素。插入排序将比对小型数据集的快速排序更有效。它还取决于您的后备列表实现（LinkedList 或 ArrayList）。最后，它还取决于输入数据是否有任何排序。例如，如果您的输入数据已经以相反的顺序排序并且您使用 LinkedList，则插入排序将非常快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T13:04:23.130

快速排序在已经排序的数组上具有最坏的情况（O(n^2) 时间复杂度）（参见[Wikipedia 上的快速排序条目](http://en.wikipedia.org/wiki/Quicksort)）。

根据枢轴元素的选择，这可以在一定程度上得到缓解，但同时，插入排序的最佳情况正是预排序的情况（对于此类输入，它具有 O(n) 时间复杂度），所以它对于这个特定的用例，它将击败快速排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-19T13:50:51.517

插入排序算法在已排序数组上以线性时间运行，因为对于已排序数组，插入排序只需进行一次比较，即针对前一个元素，因此已排序数组上的插入排序必须线性移动，达到复杂度为 - O(n)。与复杂度为 O(n2) 的快速排序相比

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-08-25T18:02:08.247

排序后的输入是插入排序的最佳情况（O（n））和快速排序的最坏情况（O（n ^ 2））。

这一切都与复杂性有关，复杂性由密钥比较的数量决定，这是两种算法的基本操作。

因此，当您看到两者的算法时，您会发现在插入排序中您只有 n 比较，因为当我们插入一个元素时，我们只与左元素进行比较并完成。另一方面，在快速排序的情况下，您必须不断将您的枢轴元素与所有左侧元素进行比较，并且您的数组类型会减少一个常数，导致大约 n^2 比较。

# ios - iOS 应用内购买 - “此帐户没有权限..”

> ID：10268047
> 
> 赞同：1
> 
> 时间：2012-04-22T12:46:00.687
> 
> 标签：ios, in-app-purchase

好的，这里尝试尽可能清楚地解释这一点:)

*   我为合作伙伴开发了一个应用程序。

*   他们想在他们的公司下提交应用程序，所以我得到了证书和个人资料。我打包了应用程序……他们提交了，一切都很好。

*   现在我需要用新内容更新应用程序。所以这一切都完成了，客户已经为应用程序设置了新的应用程序购买产品。

**问题：**

当我测试所有“产品请求”时，它都会显示产品描述等。

但是，当我使用 iTunes 测试帐户来测试购买时，它不起作用。它说

> “此帐户无权进行应用内购买。您可以在 iTunes Connect 中更改帐户权限。”

但是为了尝试解决问题，作为测试，我快速在我们的 iTunes 帐户中设置了一个“测试”应用程序和一个新的捆绑包 ID 等，并设置了相同的 IAP 产品。然后，我将实际客户端应用程序的应用程序 ID 更改为指向此。在设备上通过 Xcode 进行测试时，这可以正常工作。

我不知道这里出了什么问题，因为当我做原始应用程序时，一切都按预期工作，因为我能够使用我设置的 iTunes 测试帐户来测试他们的应用程序。

任何想法可能会发生什么？

问候

阿德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:18:47.577

显然，测试用户帐户需要与您的应用在同一个苹果开发者帐户上！

# haskell - 在 Haskell 中为另一种语言生成代码

> ID：10268052
> 
> 赞同：27
> 
> 时间：2012-04-22T12:46:42.823
> 
> 标签：haskell, code-generation, installscript

我想在 Haskell 中为另一种语言生成代码，但我对如何解决这个问题感到困惑。我正在寻找 Haskell 中语言的抽象和优雅表示，这对于代码生成也很有用。有问题的语言是 InstallScript（[链接](http://kb.flexerasoftware.com/doc/DocumentRepository/Installation/InstallShield/InstallShield%202012%20Premier/01_Public/Product_Manual/InstallShield2012InstallScriptReferenceGuide.pdf)到语言参考指南）。有人可以提供有关如何捕获 Haskell 类型中 InstallScript 中使用的语言结构的提示（可能带有示例吗？），或者指出类似的项目以获得灵感？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-23T11:50:16.553

这是在 Haskell 中解决的[经典问题。](http://research.microsoft.com/en-us/um/people/simonpj/papers/pj-lester-book/)

*   为您的语言定义抽象语法树
*   定义一个漂亮的打印机（生成代码）

对于奖励积分：

*   定义解析器
*   编写一个不错的 Haskell 组合器库，让您将目标嵌入到 Haskell 中
*   为您的抽象语法编写优化器

有[很多很多](http://hackage.haskell.org/packages/archive/pkg-list.html#cat:language)关于 Hackage 的例子（例如[这个](http://hackage.haskell.org/package/language-java)）。

# c# - 使用 .NET 工具提取 APK 文件内容

> ID：10268058
> 
> 赞同：1
> 
> 时间：2012-04-22T12:48:09.303
> 
> 标签：c#, android, apk

我使用 apktool 来提取 APK 文件内容。但由于某些原因，我需要这样一个用 .NET 编写的工具，所以我不需要在服务器中安装 JDK。

有这样的工具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:33:51.727

不，没有这样的工具。您需要在 C# 中启动一个进程并使用`ProcessStartInfo`类运行带有参数的批处理文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:11:21.567

我认为在另一种方法中，获取 APK 文件并创建一个 Java 程序来提取我需要的信息，例如包名称、图标资源等......然后将其公开为 COM 对象并在我的 .NET 项目中使用它。

经过深入研究，我们无法在 Java 的标准函数中提取该信息，因为提取信息的唯一方法是通过 APKTool 解压缩 APK 并从文件系统中读取清单。

另一种困难的方法是编写自己的提取器，该提取器涉及 APK 格式的深入知识。

# web-services - 带有来自 Restful Web 服务的对象的 JSF 电子商务应用程序

> ID：10268059
> 
> 赞同：0
> 
> 时间：2012-04-22T12:48:14.047
> 
> 标签：web-services, rest, jsf-2, e-commerce

我想使用 JSF 2.0 构建一个电子商务应用程序。我看到了一些示例（包括与 NetBeans 捆绑在一起的示例）。在这些示例中，数据存储在某种数据库中，并使用 SQL 进行检索和查询。在这些示例中，应用程序中有某种持久对象。我想做的是从一个 Restful Web 服务中检索数据，所以我根本不会使用 SQL。我的问题是：我是否需要在我的应用程序中包含一个具有持久对象的模型部分（MVC 模式），还是应该只使用直接与 Web 服务连接的 bean？这样的应用程序通常如何工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:53:05.130

您的 REST 服务将提供一些数据（JSON、XML），将这些数据映射到 JSF 应用程序端的模型类可能会很方便。因此，在您的 JSF bean 中，您将连接 REST 服务，将从它获得的数据映射到模型类，然后调用一些业务逻辑（使用模型类）。

显然，如果 REST 服务返回单个数字或字符串，那么仅仅为了架构而创建另一个类是没有用的。同样，如果您的业务逻辑非常简单，最好在 JSF 托管 bean 类中完成所有操作。

# python - Elementwise 乘以 1D-numpy 数组（形状 (k,1) 或 (k,)）并且结果具有第一个的形状

> ID：10268061
> 
> 赞同：5
> 
> 时间：2012-04-22T12:48:28.800
> 
> 标签：python, arrays, numpy, multiplication

我想实现一个对角矩阵应用函数，它是通过`d`首先提供对角线，然后用`x`. 当然我不想创建一个实际的矩阵，因为只需要一个元素向量乘法。

现在，一些用户将提供一个对角线`d`的形状`(k,)`，一些形状`(k,1)`。此外，`x`可以有形状`(k,)`和`(k,1)`. 我希望 apply() 方法的行为就像`*`for numpy 矩阵一样，因为结果具有与 input 相同的形状`x`。

因此问题是：在 Python/Numpy 中，是否有一种非不确定的方法可以将两个 np.arrays`x`和`y`形状`(k,)`或`(k,1)`（以任何组合）元素相乘以使结果数组的形状为`x`？

我做了一些实验`[:,None]`，

```
x = np.empty((4,1))
y = np.empty(4)
(x * y).shape         # (4,4)  -- nope
(y * y).shape         # (4,)   -- yes
(x * y[:,None]).shape # (4, 1) -- yes
(y * y[:,None]).shape # (4,4)  -- nope 
```

我当然可以将我的代码包装在 中`if len(x.shape)==...:`，但这感觉不是很pythonic。

建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T13:05:39.670

既然我理解了你的问题，我的建议就是*重塑*. 调用`reshape`返回一个视图，所以它不会产生任何大的复制成本或类似的东西。只需重新整形数组、相乘并再次整形：

```
>>> def shape_preserving_mult(x, y):
...     return (x.reshape((-1,)) * y.reshape((-1))).reshape(x.shape)
... 
```

或者更简洁地说，正如您和 rroowwllaandd 指出的那样：

```
>>> def shape_preserving_mult(x, y):
...     return x * y.reshape(x.shape)
... 
>>> shape_preserving_mult(x, y)
array([[ 0],
       [ 1],
       [ 4],
       [ 9],
       [16]])
>>> shape_preserving_mult(x, y.T)
array([[ 0],
       [ 1],
       [ 4],
       [ 9],
       [16]])
>>> shape_preserving_mult(x.T, y)
array([[ 0,  1,  4,  9, 16]])
>>> shape_preserving_mult(x.T, y.T)
array([[ 0,  1,  4,  9, 16]]) 
```

我之前建议的内容如下。

值得注意的是，如果你将一个 numpy 形状`(1, 4)`数组与一个形状数组相乘，`(4,)`你会得到接近你想要的东西。

```
>>> x = numpy.arange(5).reshape((5, 1))
>>> y = numpy.arange(5)
>>> x.shape
(5, 1)
>>> x.T.shape
(1, 5)
>>> y * x.T
array([[ 0,  1,  4,  9, 16]]) 
```

这没有 的形状`a`，但确实有 的形状`a.T`。你总是可以再次调用`T`结果。这也适用于形状数组`(5,)`，因为一维数组上的转置操作不会导致任何变化。所以也许你可以这样做：

```
>>> def transposed_mult(x, y):
...     return (x.T * y).T
... 
>>> transposed_mult(x, y)
array([[ 0],
       [ 1],
       [ 4],
       [ 9],
       [16]]) 
```

但是，如果您传递一个 shape 数组，这当然会导致相反的问题`(1, 5)`：

```
>>> transposed_mult(x.T, y)
array([[ 0,  0,  0,  0,  0],
       [ 0,  1,  2,  3,  4],
       [ 0,  2,  4,  6,  8],
       [ 0,  3,  6,  9, 12],
       [ 0,  4,  8, 12, 16]]) 
```

您在原始帖子中要求的确切内容也是如此`transposed_mult`，但如果您需要任何进一步的灵活性，它将无法按预期工作。事实上，您似乎需要额外的灵活性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T12:59:24.357

如果您可以假设`x`and`y`本质上都是一维数组，那么使用 numpy 的`.flatten()`数组方法：

```
>>> result=x.flatten()*y.flatten() 
```

应该返回一个一维数组：

```
>>> result.shape
(4,) 
```

为了保持您的形状，`x`您可以执行以下操作：

```
>>> result = x*y.reshape(x.shape)
>>> result.shape
(4,1) 
```

# entity-framework - Entity Framework 代码是否首先支持只读导航属性

> ID：10268062
> 
> 赞同：4
> 
> 时间：2012-04-22T12:48:47.643
> 
> 标签：entity-framework, properties, navigation, code-first, readonly

目前我首先使用实体​​框架代码来创建我的域模型。正如下面的代码所示，我想在“Test2”类和“Test1”类之间创建一个一对多的关联。但是当我运行应用程序时，它抛出了一个异常：

> 导航属性“T2”不是“Test1”类型的声明属性。验证它没有被明确地从模型中排除，并且它是一个有效的导航属性。

如果我修改导航属性“T2”以使其具有“受保护”或公共设置器。没关系。所以看起来实体框架不支持只读导航属性。任何人都可以解释并给出这个问题的一些链接吗？

```
public abstract class Test1Base
{
    public int Id {get; set}
    public virtual Test2 T2 {get; private set;}   
} 

public class Test1 : Test1Base
{

}

public class Test2
{
    public int Id {get; set;}
    public string Name {get; set;}
}

public class MyDbContext : DbContext
{
    public DbSet<Test1> Test1Table {get; set;}
    public DbSet<Test2> Test2Table {get; set;}

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
         base.OnModelCreating(modelBuilder);
         modelBuilder.Entity<Test1>().HasRequired(t => t.T2).WithMany();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:12:24.503

这可能是代码优先的一些小限制，这不是由私有设置器引起的，而是由基类中的私有设置器和派生类的映射引起的。如果您将`T2`声明从移动`Test1Base`到`Test1`它，它将与私有 setter 一起使用，但如果您想保留它，则`Test1Base`使 setter 受到保护。

# ruby - 令人困惑的 Ruby 方法返回值

> ID：10268064
> 
> 赞同：2
> 
> 时间：2012-04-22T12:49:08.727
> 
> 标签：ruby, methods, return-value

我有 Ruby 代码：

```
def test_111(hash)
  n = nil
  3.times do |c|
      if n
       n[c] = c
      else
       n = hash
      end
  end
end

a = {}
test_111(a)
p a 
```

**为什么它打印** `{1=>1, 2=>2}`，**而不是** `{}`??

在test_111方法中，*hash*和*a*使用同一个内存？

如何在 test_111 方法中更改*a*值？

我无法理解

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T12:50:17.970

哈希是通过引用传递的。因此，当您更改方法参数（这是一个哈希）时，您会更改原始哈希。

为避免这种情况，您应该克隆哈希。

```
test_111(a.dup) 
```

这将创建一个浅拷贝（也就是说，它不会克隆您可能拥有的子哈希）。

浅拷贝是什么的一个小例子：

```
def mutate hash
  hash[:new] = 1
  hash[:existing][:value] = 2
  hash
end

h = {existing: {value: 1}}

mutate h # => {:existing=>{:value=>2}, :new=>1}
# new member added, existing member changed
h # => {:existing=>{:value=>2}, :new=>1}

h = {existing: {value: 1}}

mutate h.dup # => {:existing=>{:value=>2}, :new=>1}
# existing member changed, no new members
h # => {:existing=>{:value=>2}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T13:06:32.427

在 ruby​​ 中，几乎每个对象都是通过引用传递的。这意味着当你做一些简单的事情时

```
a = b 
```

除非 a 是简单类型之一，否则在此分配之后`a`和`b`将指向同一事物。

这意味着如果你改变第二个变量，第一个变量也会受到同样的影响：

```
irb(main):001:0> x = "a string"
=> "a string"
irb(main):002:0> y = x
=> "a string"
irb(main):003:0> x[1,0] = "nother"
=> "nother"
irb(main):004:0> x
=> "another string"
irb(main):005:0> y
=> "another string"
irb(main):006:0> 
```

当然这同样适用于哈希：

```
irb(main):006:0> a = { :a => 1 }
=> {:a=>1}
irb(main):007:0> b = a
=> {:a=>1}
irb(main):008:0> a[:b] = 2
=> 2
irb(main):009:0> a
=> {:a=>1, :b=>2}
irb(main):010:0> b
=> {:a=>1, :b=>2}
irb(main):011:0> 
```

如果您不希望发生这种情况，请使用`.dup`or `.clone`：

```
irb(main):001:0> a = "a string"
=> "a string"
irb(main):002:0> b = a.dup
=> "a string"
irb(main):003:0> a[1,0] = "nother"
=> "nother"
irb(main):004:0> a
=> "another string"
irb(main):005:0> b
=> "a string"
irb(main):006:0> 
```

对大多数人和`dup`有`clone`同样的效果。

因此，如果您编写一个修改其参数之一的函数，除非您特别希望调用该函数的代码可以看到这些更改，否则您应该首先复制正在修改的参数：

```
def test_111(hash)
  hash = hash.dup
  # etc
end 
```

代码的行为称为*副作用*- 对程序状态的更改不是函数的核心部分。一般要避免副作用。

# xcode - 两个不同的 MFMailComposeViewController 相同的视图

> ID：10268066
> 
> 赞同：1
> 
> 时间：2012-04-22T12:49:12.853
> 
> 标签：xcode, email

嗨，我有两个不同的 MFMailComposeViewController 相同的视图，它们写在两个不同的邮件地址，我需要分别设置一个不同的成功警报。我尝试使用标签，但 MFMailComposeViewController 不能使用标签？

我怎么能这样做？

那是我的第二个 MFMailComposeViewController

```
-(IBAction)inviaMail2{
MFMailComposeViewController *mail2 = [[MFMailComposeViewController alloc] init];
mail2.mailComposeDelegate = self;

if([MFMailComposeViewController canSendMail]){
    [mail2 setToRecipients:[NSArray arrayWithObjects:@"piccolericette@alternativeindustries.it", nil]];
    [self presentModalViewController:mail2 animated:YES];

}
[mail2 release];
 }

 - (void)mailComposeController2:(MFMailComposeViewController *)controller2 didFinishWithResult:(MFMailComposeResult)result2 error:(NSError *)error{

[self dismissModalViewControllerAnimated:YES];

if (result2 == MFMailComposeResultFailed){
    UIAlertView *alert2 = [[UIAlertView alloc] initWithTitle:@"Messaggio non inviato." message:@"Non è stato possibile inviare la tua mail, verifica la tua connessione internet e riprova." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [alert2 show];
    [alert2 release];
}
else {
    UIAlertView *alert2 = [[UIAlertView alloc] initWithTitle:@"Messaggio inviato." message:@"Grazie per avermi contattato, ti risponderò il più presto possibile." delegate:self cancelButtonTitle:@"Prego" otherButtonTitles:nil];
    [alert2 show];
    [alert2 release];
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T11:53:45.047

**更新：** 我不知何故错过了您可以访问控制器。**查看**更接近 OP 想要的 .tag。
我会保留我的通用答案，因为它可能适用于您没有可以使用的自定义字段的其他情况。

**原始答案：** 这更多是针对此问题的通用设计解决方案（解决方法？）。我不确定 MFMailComposeViewController 是否有任何可用于区分的动态用户信息字段，但您可以在类中定义 2 个 MFMailComposeViewController* 属性，在创建时分配给它们，并检查结果。

就像是：

```
@property (...) MFMailComposeViewController *mail1;
@property (...) MFMailComposeViewController *mail2;

self.mail1 = [[MFMailComposeViewController alloc] init];
...

 - (void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result2 error:(NSError *)error{
    if(controller == self.mail1) { ... }
} 
```

# mysql - 在多语言站点中，为什么我要将一些文本字符串存储在数据库中，而将其他文本字符串写入标记？

> ID：10268069
> 
> 赞同：2
> 
> 时间：2012-04-22T12:49:40.000
> 
> 标签：mysql, coldfusion, internationalization, multilingual

我正在开发一个现有的多语言站点（Coldfusion/MySQL）。

为什么在我坐的很多页面上，一些文本字符串总是被*硬编码*到标记中，例如：

```
 <CFIF language = "EN"><p>Hello World</p></CFIF> 
```

而其他人则使用数据库来更新文本，如下所示：

```
 <p><cfoutput>#tx_greetings#</cfoutput></p> 
```

这里的最佳做法是什么？我想如果我要使用数据库进行翻译，那么在其中存储所有文本（长短）会更容易。如果我不使用数据库，那么所有文本都应该是*if-elsed*。混合它有点需要维护，不是吗？

另外，我存储到 MySQL 的文本字符串长度是否有限制？也许在性能方面？

感谢您的一些投入！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T14:47:24.483

你不应该在你的代码中存储字符串/翻译，如果你想要一个可维护的 i18n 站点，这是不好的做法。

您应该将所有字符串存储在同一位置、数据库或每种语言的属性文件中。哪个没关系，但要保持一致。我个人更喜欢属性文件，因为它易于编辑。

```
welcome_message=Hi {0}, Welcome to my site 
```

在 onApplicationStart() 中一次性加载所有翻译，然后提供一个包装类来访问它们并使用提供的参数格式化字符串

例如

```
#i18n.getString(user.getLocale(), "welcome_message", [user.getUsername()])# 
```

您可以使用 java.text.MessageFormat[1] 来提供强大的格式化

```
function getString(string locale, string key, array args) {
  var mf = createobject("java", "java.text.MessageFormat");
  mf.init(variables.strings[arguments.locale][arguments.key]);
  return mf.format(javacast("java.lang.Object[]", args));
} 
```

以上只是一个示例，您需要为此提供错误捕获和缓存

希望这有助于为您指明一个富有成效的方向

[1] [http://docs.oracle.com/javase/7/docs/api/index.html?java/text/MessageFormat.html](http://docs.oracle.com/javase/7/docs/api/index.html?java/text/MessageFormat.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T16:10:19.067

您可以使用 DB 或 ascii 文件，这取决于您喜欢哪个。如果你使用数据库，你可以创建一个包含以下列的表：

**country_code** ：语言的国家代码（*即 US 为英语*）

**definition_name**：定义或消息的名称（*ie db_error_msg 用于 db 操作的通用错误消息*）

**定义值** ：定义的值（*即抱歉，保存数据时出错*）

每条记录都是一个定义。

根据用户选择的语言，您的应用程序将过滤数据库，您将获得所需的所有定义的查询。我通常使用该查询来设置会话变量结构，例如：

```
 <cfif IsDefined("session.language") IS FALSE>
     <cfquery name="getDefinition" datasource="dsn">
     SELECT * FROM tbl_definitions WHERE country_code = "US"
     </cfquery>
     <cfset session.language = structnew()>
     <cfoutput query="getDefinitions">
       <cfset session.language["#definition_name#"] = "#definition_value#">
     </cfoutput>
  </cfif> 
```

在代码中，我将简单地使用：

```
<cfoutput>
<h2>#session.language.db_error_msg#</h2>
</cfoutput> 
```

我会得到当前语言的正确信息。您还可以使用不同网站使用的主定义数据库。

相同的解决方案可用于不同的配置文件（即 US.cfg、EN.cfg、ES.cfg），您可以在其中以简单的方式设置定义以获取列表。我通常使用以下系统： 每行的定义名称 = 定义值

```
db_error_msg = Sorry, an error occured saving your data
db_success_msg = Record saved 
```

然后我读取了当前的语言配置文件（即英语的 US.cfg，西班牙语的 ES.cfg）并得到相同的结果

```
<cfif IsDefined("session.language") IS FALSE>
   <cffile action="read" file="#path#\US.cfg" variable="definitions">

   <cfset session.language = structnew()>
   <cfloop index="i" list="#definitions#" delimiters="#chr(10)#">
     <cfset definition_name = ListGetAt(i,1,"=")>
     <cfset definition_value = ListGetAt(i,2,"=")>
     <cfoutput>
        <cfset session.language["#definition_name#"] = "#definition_value#">
     </cfoutput>
   <cfloop>
</cfif> 
```

这可以在会话开始时完成（如果您知道所需的语言），并且在您定义的用户会话持续时间内，您的定义将在应用程序内的任何地方都可用。您可以使用按钮、消息、表格标题等的定义以非常快速的方式创建多语言用户界面，而无需创建本地化模板或使用内联翻译。

我希望这能帮到您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T17:21:41.340

就像一些通用的本地化建议一样，请注意您将使用的变量名称来了解要检索哪个短语。不要只是让它成为英语短语，而是让它成为一个明确的特定变量，因为您还必须处理在英语中看起来相同但在其他语言中根据上下文非常不同的上下文短语。

# iphone - 在真 iPhone 上测试应用程序，但它一直在运行旧版本的应用程序？

> ID：10268071
> 
> 赞同：2
> 
> 时间：2012-04-22T12:49:47.257
> 
> 标签：iphone, xcode, testing

我已经在真正的 iPhone 上测试了我的应用程序一段时间，一切都运行良好。然后发生了一个意外——在开发过程中，我断开了我的 iPhone 来做其他事情。当我回来继续工作时，测试就不再正常工作了。我已经更新了应用程序，但在每次测试中，它都会继续运行旧版本。

更奇怪的是：它甚至没有在拔出事故之前运行版本。它实际上是在此之前运行一个版本。

我已经尝试了一些事情，例如断开并重新启动 iTunes/XCode/iPhone 等，但它仍然运行相同的版本。

我打开了管理器，它确实给出了“ **Xcode 找不到安装此版本的软件映像**”的消息，但是没有意义的是——它在半小时前就完美运行了！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T13:11:30.697

从您的设备中删除您的应用程序并再次运行它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T12:56:46.813

清理您的项目构建，然后重新启动您的设备，现在将应用程序安装到原始设备中，

# android - Android facebook 在用户之间传递信息

> ID：10268072
> 
> 赞同：0
> 
> 时间：2012-04-22T12:49:58.767
> 
> 标签：android, facebook

我正在开发一款 Android 游戏，现在我正处于想要创建多人游戏选项的阶段。我的任务是在不同手机上的两个用户之间传递一个整数。

我的想法是通过 facebook 来做，享受它的所有社会效益。

你知道我需要使用哪些 API 技术吗？我安装了 facebook SDK，但找不到特定的 API。

谢谢分配，弗拉迪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:34:06.080

如果两个用户相互对抗（或相互对抗），那么最好的方法是 P2P 连接，即两个设备之间应该有一个套接字用于传递消息。

如果由于某种原因这不可能，那么回退将是拥有一个所有客户端都连接到的中央服务器，然后该服务器会将消息从用户 A 路由到用户 B。

至于facebook选项，有什么意义？这不是他们的 api 的用途。您可以使用[成就](https://developers.facebook.com/docs/achievements/)来发布用户分数等，获得更多的参与度和病毒式传播，但这不是为了客户之间的交流。

# postgresql - 在特定条件下获取行以交换表

> ID：10268073
> 
> 赞同：3
> 
> 时间：2012-04-22T12:50:04.837
> 
> 标签：postgresql, inheritance, triggers, constraints, plpgsql

我目前有一个父表：

```
CREATE TABLE members (
    member_id SERIAL NOT NULL, UNIQUE, PRIMARY KEY
    first_name varchar(20)
    last_name varchar(20)
    address address (composite type)
    contact_numbers varchar(11)[3]
    date_joined date
    type varchar(5)
); 
```

和两个相关的表：

```
CREATE TABLE basic_member (
    activities varchar[3])
    INHERITS (members)
);

CREATE TABLE full_member ( 
    activities varchar[])
    INHERITS (members)
); 
```

如果类型是`full`，则将详细信息输入到`full_member`表中，或者如果类型是`basic`表`basic_member`中。我想要的是，如果我运行更新并将类型更改为`basic`或`full`元组进入相应的表。

我想知道我是否可以使用以下规则来做到这一点：

```
 CREATE RULE tuple_swap_full
 AS ON UPDATE TO full_member
 WHERE new.type = 'basic'
 INSERT INTO basic_member VALUES (old.member_id, old.first_name, old.last_name,
 old.address, old.contact_numbers, old.date_joined, new.type, old.activities); 
```

...然后从 full_member 中删除记录

只是想知道我的规则是否在附近，或者是否有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:42:08.620

*   你不需要

    ```
    member_id SERIAL NOT NULL, UNIQUE, PRIMARY KEY 
    ```

    A自动`PRIMARY KEY`暗示`UNIQUE NOT NULL`：

    ```
    member_id SERIAL PRIMARY KEY 
    ```

*   我不会使用硬编码的最大长度`varchar(20)`。如果您确实必须强制执行最大长度，只需使用[`text`](http://www.postgresql.org/docs/current/interactive/datatype-character.html)并添加检查约束。更容易改变周围。

*   for 的语法`INHERITS`被破坏。关键字在列周围的括号之外。

    ```
    CREATE TABLE full_member ( 
        activities text[]
    ) INHERITS (members); 
    ```

*   表名不一致 ( `members`<-> `member`)。在我的测试用例中，我到处都使用单数形式。

*   最后，我不会对任务使用规则。**触发器`AFTER UPDATE`**似乎更可取。

考虑以下

## 测试用例：

### 表：

```
CREATE SCHEMA x;  -- I put everything in a test schema named "x".

-- DROP TABLE x.members CASCADE;
CREATE TABLE x.member (
     member_id SERIAL PRIMARY KEY
    ,first_name text
    -- more columns ...
    ,type text);

CREATE TABLE x.basic_member (
    activities text[3]
) INHERITS (x.member);

CREATE TABLE x.full_member ( 
    activities text[]
) INHERITS (x.member); 
```

### 触发功能：

[数据修改 CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING) ( `WITH x AS ( DELETE ..`) 是实现此目的的最佳工具。需要 PostgreSQL 9.1 或更高版本。
对于旧版本，首先`INSERT`然后`DELETE`.

```
CREATE OR REPLACE FUNCTION x.trg_move_member()
  RETURNS trigger AS
$BODY$
BEGIN

CASE NEW.type
WHEN 'basic' THEN
    WITH x AS (
        DELETE FROM x.member
        WHERE member_id = NEW.member_id
        RETURNING *
        )
    INSERT INTO x.basic_member (member_id, first_name, type) -- more columns
    SELECT member_id, first_name, type -- more columns
    FROM   x;

WHEN 'full' THEN
    WITH x AS (
        DELETE FROM x.member 
        WHERE member_id = NEW.member_id
        RETURNING *
        )
    INSERT INTO x.full_member (member_id, first_name, type) -- more columns
    SELECT member_id, first_name, type -- more columns
    FROM   x;
END CASE;

RETURN NULL;

END;
$BODY$
  LANGUAGE plpgsql VOLATILE; 
```

### 扳机：

请注意，它是一个`AFTER`触发器并且有一个`WHEN`条件。 `WHEN`条件需要 PostgreSQL 9.0 或更高版本。对于早期版本，您可以将其保留，触发器本身的 CASE 语句会处理它。

```
CREATE TRIGGER up_aft
  AFTER UPDATE
  ON x.member
  FOR EACH ROW
  WHEN (NEW.type IN ('basic ','full')) -- OLD.type cannot be IN ('basic ','full')
  EXECUTE PROCEDURE x.trg_move_member(); 
```

### 测试：

```
INSERT INTO x.member (first_name, type) VALUES ('peter', NULL);

UPDATE x.member SET type = 'full' WHERE first_name = 'peter';
SELECT * FROM ONLY x.member;
SELECT * FROM x.basic_member;
SELECT * FROM x.full_member; 
```

# javascript - 使用 Youtube JS api 控制多个 Youtube 视频的播放（同时播放）

> ID：10268075
> 
> 赞同：0
> 
> 时间：2012-04-22T12:50:07.240
> 
> 标签：javascript, html, youtube, youtube-api, youtube-javascript-api

我知道这个问题有一个非常相似的主题，但是我正在尝试做一些不同的事情。这一切对我来说有点新鲜......对不起......

基本上，我正在尝试使用 YouTube API 和 JS 在一个页面中同时播放多个 YouTube 视频（混搭风格），事情是我想分别控制它们中的每一个，同时它们都在播放。我找到了接近我想要的代码。问题是视频不能一起播放，一旦你在一个视频上点击播放，另一个就会停止。

我怎样才能分别控制它们，并且仍然让其他视频在后台播放而不受影响？

[这是我在另一个主题上找到的代码](http://jsfiddle.net/salman/dYUB8/)

提前感谢，玛雅人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:53:28.860

[YouTube 代码游乐场](http://code.google.com/apis/ajax/playground/#working_with_multiple_players)为此提供了一个示例。

# ios - 在 IOS 中以编程方式安装企业应用程序

> ID：10268079
> 
> 赞同：0
> 
> 时间：2012-04-22T12:50:26.143
> 
> 标签：ios, enterprise

我目前在一家正在考虑建立企业应用商店的公司工作。他们让我建立一个小小的概念证明，看看事情是如何运作的。我已经对需要到位的流程等有了一些基本的想法。但由于我从未做过移动应用程序开发，所以我有点卡住了。我目前正在互联网上搜索有关如何安装企业应用程序的信息，但我发现的只是如何使用 iTunes 来完成。

我需要一个可以通过网站以编程方式安装移动应用程序的解决方案。或者超过一个安装在设备上的应用程序（初始应用程序可以通过 iTunes 安装）...你们中的任何人有关于安装过程的任何信息并愿意分享吗？或者也许有人有一些很好的在线资源链接，或者可以指出我正确的方向。

非常感谢苏洛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:58:17.903

只需为此使用 TestFlight，它就很棒。[http://www.testflightapp.com](http://www.testflightapp.com)

它让您一键在设备上安装应用程序，通知测试人员等

阅读本文[TestFlight 是如何做到的？](https://stackoverflow.com/questions/4973244/how-does-testflight-do-it)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T15:58:13.390

根据记忆，有关于这个主题的 WWDC 视频。在此处查看 WWDC 2010 和 WWDC 2011 视频：

[WWDC 视频](https://developer.apple.com/videos/ "WWDC 视频")

不幸的是，我不记得在哪个视频中讨论了企业应用程序的主题以及如何通过网络安装它们。抱歉 - 有很多视频。

# actionscript-3 - 如何在空气窗口应用程序中检查调整大小和移动事件是否实际完成

> ID：10268081
> 
> 赞同：0
> 
> 时间：2012-04-22T12:50:37.270
> 
> 标签：actionscript-3, air

我尝试使用来自 nativewindowBoundEvents 的 RESIZE 和 MOVE 事件。但只要事件发生，它们就会不断被调用。我只是想知道，活动什么时候结束。用户实际完成移动或缩放应用程序..

> _myApp.nativeWindow.addEventListener(NativeWindowBoundsEvent.MOVE,winPosChangeHandler,false,0,true); _myApp.nativeWindow.addEventListener(NativeWindowBoundsEvent.RESIZE,winSizeChangeHandler,false,0,true);

# php - 自动选择下拉菜单

> ID：10268082
> 
> 赞同：0
> 
> 时间：2012-04-22T12:51:11.853
> 
> 标签：php, jquery, drop-down-menu

我有一个类别下拉列表。当用户从下拉列表中选择任何类别时，将出现第二个下拉列表。它将显示与类别相关的产品列表（通过 jQuery ajax）。

当用户单击产品下拉列表中的任何条目时，它将重定向到同一页面但带有`GET`查询..

例如：

```
page.php?category=3&product=6 
```

当用户在该页面上时，如何自动选择类别下拉列表和产品下拉列表？

```
 <label>Category</label>
     <select id="category">
       <option value="0">Please select a category</option>
        <?php
           $SQL = "SELECT * FROM category";
           $query = mysql_query($SQL);
           while ($cat = mysql_fetch_assoc($query)) {
              echo "<option value='{$cat['id']}'>{$cat['name']}</option>";
             }
         ?>
     </select>
     <select id="product"> </select>

    $("#category").change(function() {
        var category =  $(this).val();
        $('#product').append($("<option></option>").attr("value","0").text("Please Select Product"));
        $.getJSON(host + "/ajax_select_product.php?categoryid=" + category, function(data) {
            $.each (data, function (index, element) {
                $('#product').append($("<option></option>").attr("value",data[index].id).text(data[index].name));
            });
        });
    });

​
    $("#product").change(function() {
        var product = $("#product :selected").val()
        var category =  $("#category :selected").val()
        window.location = "page.php?category=" + category + "?product=" + product;
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:06:45.987

您可以通过以下方式做到这一点；

```
<label>Category</label>
     <select id="category">
       <option value="0">Please select a category</option>
        <?php
        $currentCategory = 0;
        $curretProduct =0;

        if (!empty($_GET['category'])) {
            $currentCategory = $_GET['category'];   
        }

        if (!empty($_GET['product'])) {
            $currentProduct = $_GET['product']; 
        }
           $SQL = "SELECT * FROM category";
           $query = mysql_query($SQL);
           while ($cat = mysql_fetch_assoc($query)) {
              if ($cat['id'] == $currentCategory) {
                echo "<option value='{$cat['id']}' selected=\"selected\">{$cat['name']}</option>";
              } else {
                echo "<option value='{$cat['id']}'>{$cat['name']}</option>";
              }
             }
         ?>
     </select>
     <select id="product"> </select>
    var currentProduct = "<?php echo $currentProduct; ?>";
    $("#category").change(function() {
        var category =  $(this).val();
        $('#product').append($("<option></option>").attr("value","0").text("Please Select Product"));
        $.getJSON(host + "/ajax_select_product.php?categoryid=" + category, function(data) {
            $.each (data, function (index, element) {
                if (data[index].id == currentProduct) {
                    $('#product').append($("<option></option>").attr("value",data[index].id).attr("selected", "selected").text(data[index].name));
                } else {
                    $('#product').append($("<option></option>").attr("value",data[index].id).text(data[index].name));
                }

            });
        });
    });

​
    $("#product").change(function() {
        var product = $("#product :selected").text()
        var category =  $("#category :selected").text()
        window.location = "page.php?category=" + category + "?product=" + product;
    }); 
```

# java - Java 线程 StackOverflowError

> ID：10268084
> 
> 赞同：1
> 
> 时间：2012-04-22T12:52:06.630
> 
> 标签：java

...

```
Thread showWordThread = new Thread() {
    public void run() {
            try {
                sleep(config.delayTime * 1000);
            } catch (Exception e) {
                System.out.println(e.toString());
            }
            this.run();
        }
    };
    showWordThread.run();
} 
```

...

在发生错误之前它已经运行了大约 5 分钟：

线程“Thread-2”java.lang.StackOverflowError 中的异常。

为什么？

我试过这个：

```
Thread showWordThread = new Thread(new Runnable() {
        public void run() {
            while (true) {
                try {
                    Thread.sleep(config.delayTime * 1000);
                } catch (Exception e) {
                    System.out.println(e.toString());
                }
            }
        }
    });
    showWordThread.start(); 
```

但是仍然出现错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T12:59:17.527

其他人解释说您应该使用`while`循环。您*还*尝试`run`在匿名类声明中调用该方法。此外，您应该调用`start`，而不是`run`- 当新线程启动时，它会`run`自动调用。我实际上也建议实施`Runnable`而不是扩展`Thread`。所以你要：

```
Thread showWordThread = new Thread(new Runnable() {
    @Override public void run() {
        while (someCondition) {
            try {
                Thread.sleep(config.delayTime * 1000);
                // Presumably do something useful here...
            } catch (Exception e) {
                System.out.println(e.toString());
            }
        }
    }
});
showWordThread.start(); 
```

或者，考虑使用[`Timer`](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)or [`ScheduledExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T13:10:15.050

您正在`run`递归调用方法。Java 将调用信息（例如参数）保存在堆栈内存中，因此当您递归调用方法并且没有任何端点时，堆栈内存将被消耗并`StackOverflow`引发异常。

也许你想增加`Heap Size`，`JVM`但这个解决方案不能解决你的问题，并且`StackOverflow`会发生。

我猜你想连续运行一个线程。我推荐以下代码：

```
Thread showWordThread = new Thread() 
{
    public void run() 
    {
            try 
            {
                sleep(config.delayTime * 1000);
            } 
            catch (Exception e) 
            {
                System.out.println(e.toString());
            }
            // this.run(); this snnipet code  make error
        }
    };
    showWordThread.run();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T12:56:01.057

您的代码具有无限递归，您应该将代码更改为：

```
 Thread showWordThread = new Thread() {
        public void run() {
            while (true) {
                try {
                    Thread.sleep(config.delayTime * 1000);
                } catch (Exception e) {
                    System.out.println(e.toString());
                }
            }
        }
    };
    showWordThread.start(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T12:57:00.603

不要从 run() 方法中调用 run()。这肯定会产生堆栈溢出，因为您不断重新输入相同的方法而没有退出条件。而是使用`while`循环。

```
Thread showWordThread = new Thread() {
    public void run() {
        while(condition) {
            try {
                sleep(config.delayTime * 1000);
            } catch (Exception e) {
                System.out.println(e.toString());
            }
        }
    };
    showWordThread.start();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T12:55:04.547

每次运行时，您的函数都会调用它自己。
这会导致堆栈溢出。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-22T12:55:07.237

可能是因为您从自身调用`run`方法 ( )？`this.run()`

# prolog - Prolog 中的“谁是理发师”逻辑谜题

> ID：10268086
> 
> 赞同：4
> 
> 时间：2012-04-22T12:52:17.327
> 
> 标签：prolog, puzzle, prolog-dif

我正在阅读 Raymond Smullyan 的“To mock a Mockingbird”。书中有一个谜题是这样的：

> 这个故事中的塞维利亚与西班牙著名的塞维利亚（实际上没有）之间的任何相似之处纯属巧合。在这个神秘的塞维利亚小镇，男性居民在那些而且只有在他们喜欢的时候才会戴假发。没有两个居民在所有日子里都表现得一样；也就是说，给定任何两个男性居民，至少有一天其中一个戴假发而另一个不戴。给定任何男性居民 X 和 Y，如果 Y 在 X 所做的所有日子里都戴着假发，则据说居民 Y 是 X 的追随者。此外，给定任何居民 X、Y 和 Z，如果 Z 在 X 和 Y 都做的所有日子里都戴着假发，则说居民 Z 是 X 和 Y 的追随者。
> 
> 其中五个居民被命名为 Alfredo、Bernardo、Benito、Roberto 和 Ramano。关于它们的已知事实如下：
> 
> 事实 1.. Bernardo 和 Benito 在戴假发的习惯上是截然相反的；也就是说，在任何一天，其中一个戴假发，另一个不戴。
> 
> 事实 2：罗伯托和拉马诺同样是对立的。
> 
> 事实 3：拉马诺戴假发，而且只有在阿尔弗雷多和贝尼托都戴假发的日子里。
> 
> 塞维利亚只有一位理发师，关于他的已知事实如下：
> 
> 事实 4：贝尔纳多是阿尔弗雷多和理发师的追随者。
> 
> 事实 5：给定任何男性居民 X，如果 Bernardo 是 Alfredo 和 X 的追随者，那么理发师只是 X 的追随者。
> 
> 阿尔弗雷多只戴黑色假发；贝尔纳多只戴白色假发；Benito 只戴灰色假发；罗伯托只戴红色假发；拉马诺只戴棕色假发。
> 
> 一个复活节的早晨，有人看到理发师戴着假发。他穿的是什么颜色的？

我发现在 Prolog 中解决这个问题会很有趣，但我很早就陷入了困境：

```
isOpposite( bernardo, benito   ).
isOpposite( benito  , bernardo ).
isOpposite( roberto , ramano   ).
isOpposite( ramano  , roberto  ).

wears( alfredo , black ).
wears( bernardo, white ).
wears( benito  , gray  ).
wears( roberto , red   ).
wears( ramano  , brown ).

whatWearsTheBarber( WigColor ) :-
  member( Barber, [ alfredo, benito, bernardo, roberto, ramano ] ),
  wears( Barber, WigColor ). 
```

我不知道如何有效地编码某人跟随其他人，我不知道如何根据该信息进行推理。我在 Prolog 中关注了其他一些逻辑难题的解决方案，但我无法找到解决方案。

**编辑：**这是从 Smulyan 的书中复制的解决方案：

> 步骤 1：首先，我们证明 Roberto 是理发师的追随者。
> 
> 好吧，考虑一下理发师戴假发的任何一天。阿尔弗雷多那天要么戴假发，要么不戴。假设阿尔弗雷多这样做。然后贝尔纳多那天也戴着假发，因为贝尔纳多是阿尔弗雷多和理发师的追随者。所以贝尼托那天不能戴假发，因为他是贝尔纳多的对面。然后拉马诺那天不能戴假发，因为他只在阿尔弗雷多和贝尼托都戴假发的日子里戴假发，而贝尼托这一天没有戴假发。既然拉马诺这一天不戴假发，那么罗伯托就必须戴，因为罗伯托是拉马诺的对面。这证明了在理发师戴假发的任何一天，如果阿尔弗雷多也戴假发，那么罗伯托也戴假发。
> 
> 现在，理发师戴假发但阿尔弗雷多不戴假发的那一天呢？好吧，既然阿尔弗雷多不这样做，那么阿尔弗雷多和贝尼托当然也不会这样做；因此，根据事实 3，拉马诺没有，因此根据事实 2，罗伯托也这样做。所以罗伯托在理发师戴假发而阿尔弗雷多不戴的任何一天都戴假发——事实上，他在阿尔弗雷多不戴的所有日子里都戴假发。 t，不管理发师。这证明了在理发师戴假发的任何一天，罗伯托也戴假发，不管那天阿尔弗雷多戴假发还是不戴假发。所以罗伯托确实是理发师的追随者。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T15:35:07.827

**Edit2：**由于@killy9999 发布了书中的部分解决方案，我决定重写我的 Prolog 以反映 Smullyan 的推理。原始的部分解决方案保留在下面。

首先是一些基本结构

```
 person(alfredo).
 person(benito).
 person(roberto).
 person(ramano).
 person(bernardo).

 day([_Alfredo,_Benito,_Bernardo,_Roberto,_Romano]).

 % barber(alfredo). % Follows from Fact 4.
 barber(benito).
 % barber(bernardo). % Follows from Fact 4.
 barber(roberto).
 barber(romano).

 wearsWig(alfredo,[1,_X,_Y,_Z,_W]). 
 wearsWig(benito,[_X,1,_Y,_Z,_W]).
 wearsWig(bernardo,[_X,_Y,1,_Z,_W]).
 wearsWig(roberto,[_X,_Y,_Z,1,_W]).
 wearsWig(romano,[_X,_Y,_Z,_W,1]).

 noWig(alfredo,[0,_X,_Y,_Z,_W]).
 noWig(benito,[_X,0,_Y,_Z,_W]).
 noWig(bernardo,[_X,_Y,0,_Z,_W]).
 noWig(roberto,[_X,_Y,_Z,0,_W]).
 noWig(romano,[_X,_Y,_Z,_W,0]). 
```

那么我们有两种一致性条件。其结果是对方从不同时戴假发。另一个来自事实 3 和事实 4。

```
 consistent2(_D,[]).
 consistent2(D,[(X,Y)|Os]):-wearsWig(X,D),noWig(Y,D),consistent2(D,Os).
 consistent2(D,[(X,Y)|Os]):-noWig(X,D),wearsWig(Y,D),consistent2(D,Os).

 consistent3(O,G):-consistent3(O,_D,G).

 consistent3(_O,_D,[]).
 consistent3(O,D,[(X,Y,Z)|Gs]):-
     wearsWig(X,D),wearsWig(Y,D),wearsWig(Z,D),
     consistent2(D,O),consistent3(O,D,Gs).
 consistent3(O,D,[(_X,Y,_Z)|Gs]):-
     noWig(Y,D),consistent2(D,O),consistent3(O,D,Gs).
 consistent3(O,D,[(_X,_Y,Z)|Gs]):-
     noWig(Z,D),consistent2(D,O),consistent3(O,D,Gs).

fact3(D):-wearsWig(romano,D),wearsWig(alfredo,D),wearsWig(benito,D).
fact3(D):-noWig(alfredo,D),noWig(romano,D).
fact3(D):-noWig(benito,D),noWig(romano,D). 
```

这足以证明罗伯托遵循理发师（步骤 1）：

```
 ?- person(Barber),barber(Barber),
    O = [(benito,bernardo),(roberto,romano)],
    G = [(bernardo,alfredo,Barber),(romano,alfredo,benito)],
    consistent3(O,D,G),fact3(D),
    wearsWig(Barber,D),noWig(roberto,D).
 false. 
```

因此排除了罗马诺作为理发师。

我们也已经得到（第 2 步）Bernardo 跟随 Roberto 和 Alfredo：

```
 ?- person(Barber)barber(Barber),
    O = [(benito,bernardo),(roberto,romano)],
    G = [(bernardo,alfredo,Barber),(romano,alfredo,benito)],
    consistent3(O,D,G),fact3(D),
    wearsWig(alfredo,D),wearsWig(roberto,D),noWig(bernardo,D).
 false. 
```

下一步（第 3 步）需要使用 Fact 5，这是一个通用声明（适用于塞维利亚的所有男性居民），并且难以在 Prolog 中编码。

```
 consistent4(_D,_Barber,[]).
 consistent4(D,Barber,[X|Xs]):-
    wearsWig(X,D1),wearsWig(alfredo,D1),
    noWig(bernardo,D1),consistent4(D,Barber,Xs).
 consistent4(D,Barber,[X|Xs]):-
    wearsWig(X,D),wearsWig(alfredo,D),
    wearsWig(bernardo,D),wearsWig(Barber,D),
    consistent4(D,Barber,Xs). 
```

现在定义根谓词和花哨的颜色：

```
wears(alfredo, black).
wears(bernardo, white).
wears(benito, gray).
wears(roberto, red).
wears(ramano, brown).

whatWearsTheBarber(WigColor):-
   person(Barber),
   day(Easter),
   barber(Barber),
   wearsWig(Barber,Easter),
   fact3(Easter),
   G=[(bernardo,alfredo,Barber),(romano,alfredo,benito)],
   O=[(benito,bernardo),(roberto,romano)],
   consistent2(Easter,O), 
   consistent3(O,D,G),
   X=[alfredo,benito,bernardo,roberto,romano],
   consistent4(D,Barber,X),
   wears(Barber, WigColor). 
```

以下 SWI-Prolog 查询显示 RED 是唯一的答案

```
 ?- findall(WigColor,whatWearsTheBarber(WigColor),B),list_to_set(B,R).
 B = [red, red, red, red, red, red, red, red, red|...],
 R = [red]. 
```

感谢安德鲁·库克。我借鉴了他的回答。

下面的文字是最初发布并产生评论的答案。

* * *

**编辑：**这个谜题实际上非常困难，因为一个人必须记录很多天，而不仅仅是特定的复活节。以下解决方案通过仅考虑该特定日期的塞维利亚事态来大大减少搜索。

将塞维利亚市的情况视为表示为列表的未知关系可能更容易：

```
 [ [WearsWig,IsBarber], ... , [WearsWig,IsBarber] ] 
```

对于目前的人口，我们可以说

```
 seville(S) :- 
       S=[Benito,Bernardo,Roberto,Ramano,Alfredo], 
       opposite(Benito,Bernardo),
       opposite(Roberto,Ramano),
       fact3(Ramano,Alfredo,Benito),
       fact4(Bernardo,Alfredo),
       noBarber(Bernardo),noBarber(Alfredo),
       onlyOneBarberWearsWig(S). 
```

相关谓词定义如下：

```
 noWig([0,_X]).
 wearsWig([1,_X]).

 isBarber([_X,1]).
 noBarber([_X,0]).

 opposite(X,Y):-noWig(X),wearsWig(Y). 
 opposite(X,Y):-noWig(Y),wearsWig(X).

 fact3(X,Y,Z):-wearsWig(X),wearsWig(Y),wearsWig(Z).
 fact3(X,Y,_Z):-noWig(X),noWig(Y).
 fact3(X,_Y,Z):-noWig(X),noWig(Z).

 fact4(X,Y):-wearsWig(X),wearsWig(Y),wearsWig(Z),isBarber(Z).
 fact4(_X,Y):-noWig(Y).

 onlyOneBarberWearsWig([X|Xs]):-isBarber(X),wearsWig(X),noBarbers(Xs).
 onlyOneBarberWearsWig([X|Xs]):-noBarber(X),onlyOneBarberWearsWig(Xs).
 noBarbers([]).
 noBarbers([X|Xs]):-noBarber(X),noBarbers(Xs).

 barbersWigColor([_X,_Y,_Z,_U,Alfredo],black):-isBarber(Alfredo).
 barbersWigColor([_X,Bernardo,_Y,_Z,_U],white):-isBarber(Bernardo).
 barbersWigColor([Benito,_X,_Y,_Z,_U],gray):-isBarber(Benito).
 barbersWigColor([_X,_Y,Roberto,_Z,_U],red):-isBarber(Roberto).
 barbersWigColor([_X,_Y,_Z,Ramano,_U],brown):-isBarber(Ramano).

 whatWearsTheBarber(Color):-seville(X),barbersWigColor(X,Color). 
```

使用上述定义，SWI 快速返回：

```
 ?- seville(X).
 X = [[0, 0], [1, 0], [1, 1], [0, 0], [0, 0]] ;
 X = [[0, 0], [1, 0], [1, 1], [0, 0], [1, 0]] ;
 X = [[0, 0], [1, 0], [1, 1], [0, 0], [0, 0]] ;
 X = [[1, 1], [0, 0], [1, 0], [0, 0], [0, 0]] ;
 X = [[1, 0], [0, 0], [1, 1], [0, 0], [0, 0]] ;
 false.

 ?- whatWearsTheBarber(Color).
 Color = red ;
 Color = red ;
 Color = red ;
 Color = gray ;
 Color = red ;
 false. 
```

我不太明白 Fact 5 是如何工作的。我不能排除贝尼托是理发师的情况。然而，我想将此作为答案发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T14:37:20.810

发布为“答案”只是因为它需要评论。这是我第一次用 prolog 尝试这样的事情。我不确定我对 not/1 的使用是否正确。给出白色和棕色作为两个（！）答案（尽管我认为棕色会被排除在外，如果事实 4 意味着伯纳德不能成为理发师）。注释掉的部分导致无限递归。

```
person(bernardo).
person(benito).
person(roberto).
person(ramano).
person(alfredo).

opposite(bernardo, benito). % fact 1
opposite(benito, bernardo). % fact 1
opposite(roberto, ramano). % fact 2
opposite(ramano, roberto). % fact 2
opposite(X, Y):- dif(X, Y). % cannot be opposite to yourself
%opposite(X, Y):- opposite(Y, X). % symmetric

wears(alfredo, black).
wears(bernardo, white).
wears(benito, gray).
wears(roberto, red).
wears(ramano, brown).

follower(A, A).
follower(bernardo, alfredo). % fact 4
follower(ramano, alfredo):- % fact 3
  follower(alfredo, benito); follower(benito, alfredo).
follower(ramano, benito):- % fact 3
  follower(alfredo, benito); follower(benito, alfredo).
follower(X, ramano):- % fact 3
  follower(X, alfredo); follower(X, benito).
%follower(A, B):-
%  dif(A, B),
%  person(X),
%  follower(A, X),
%  follower(X, B).

follower(A, B):- not(opposite(A, B)).
follower(B, A):- not(opposite(A, B)).

fact5(Barber):-                                                                 
  not(follower(bernardo, X));                                                   
  not(follower(bernardo, alfredo));                                             
  person(X),                                                                    
  person(Y),                                                                    
  follower(Barber, X),                                                          
  dif(Y, X),                                                                    
  not(follower(Barber, Y)).                                                     

whatWearsTheBarber(WigColor):-                                                  
  person(Barber), % implicit in question?                                       
  dif(alfredo, Barber), % fact 4                                                
  follower(bernardo, Barber), % fact 4                                          
  fact5(Barber),                                                                
  wears(Barber, WigColor). 
```

# c# - HTTPS SSL登录和PDF下载

> ID：10268089
> 
> 赞同：1
> 
> 时间：2012-04-22T12:52:59.330
> 
> 标签：c#, .net, ssl, https, pdf-scraping

我正在为这个问题写信寻求帮助：连接到我们供应商之一的网站并自动下载 PDF 格式的发票。我尝试了几种方法：

1：Webbrowser - 我可以访问带有 pdf 链接的页面，但我无法将它们保存到磁盘（在新窗口中打开）（PDF 是即时生成的，属于这种类型`https://www.axxes.fr/it/client/pge1_relevefacturepdf.aspx?selnumdoc=700051126&typ=DUP&lng=ES&famdoc=DUP&typfic=PDF`）

2：Watin - 我不能像 Webbrowser 那样自动保存 pdf

3：HttpWebRequest - 我无法登录。这是我使用的代码：

```
public void doSomething()
{
    string post_data = "_cm_url=/it/client/default.aspx&_cm_user=user&_cm_pwd=pwd";
    string uri = "https://www.axxes.fr/it/identification/default.cgi";
    HttpWebRequest request = (HttpWebRequest)
    WebRequest.Create(uri); request.KeepAlive = false;
    request.ProtocolVersion = HttpVersion.Version10;
    request.Method = "POST";
    byte[] postBytes = Encoding.ASCII.GetBytes(post_data);
    request.ContentType = "application/x-www-form-urlencoded";
    request.ContentLength = postBytes.Length;
    System.Net.ServicePointManager.CertificatePolicy = new MyPolicy();
    Stream requestStream = request.GetRequestStream();
    requestStream.Write(postBytes, 0, postBytes.Length);
    requestStream.Close();
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();
    listBox1.Text = (new StreamReader(response.GetResponseStream()).ReadToEnd());
    Console.WriteLine(response.StatusCode);
}

public class MyPolicy : ICertificatePolicy
{
    public bool CheckValidationResult(ServicePoint srvPoint,
    X509Certificate certificate, WebRequest request,
    int certificateProblem)
    {
        return true;
    }
} 
```

供应商站点是[https://www.axxes.fr/it/](https://www.axxes.fr/it/) 认证模块是这样的：

```
<form name="blocident" action="/it/identification/default.cgi" method="POST"> 
<input type="hidden" name="_cm_url" value="/it/client/default.aspx"> 
<div class="e_idlign"> 
 <div class="e_idcol1"> 
  <label for="login" accesskey="2">Login</label> 
  <input type="text" class="e_chp77px" name="_cm_user" id="login">
 </div> 
 <div class="nof"></div> 
 <div class="e_idcol2">
  <label for="password">Password</label> 
  <input type="password" class="e_chp77px" name="_cm_pwd" id="password"> 
 </div> 
</div> 
<div class="e_idlign"> 
 <input type="image" alt="Valider l'identification" src="/it/images/css/env/bt_ok.gif" class="e_btOk" name="btOk"> 
</div> 
<ul id="e_identLien"> 
  <li class="sep">
   <a href="/it/pge1_clientmoralcreation.aspx">Iscriversi</a>
  </li> 
  <li>
   <a href="/it/pge1_question.aspx">Password dimenticata?</a>
  </li> 
</ul>
</form> 
```

我尝试使用 Fiddler 分析导航浏览器的流量，这是因为：

1

```
POST /it/identification/default.cgi HTTP/1.1
_cm_url=%2Fit%2Fclient%2Fdefault.aspx&_cm_user=user&_cm_pwd=password&btOk.x=23&btOk.y=12 
```

2

```
GET /it/client/default.aspx HTTP/1.1
ASP.NET_SessionId=3hbcfrzstvxwo145tpgpvmvw
IdSes=4fba1069405c428bab1........ 
```

3

```
GET /it/client/pge1_clientrecherche.aspx HTTP/1.1
ASP.NET_SessionId=3hbcfrzstvxwo145tpgpvmvw
IdSes=4fba1069405c428............. 
```

虽然我发布的代码只是对 CGI 的请求。老实说，我不知道如何访问。好像少了点什么……饼干？如何管理它？你有什么建议吗？

任何想法？再次感谢

# android - 找不到类 'oauth.signpost.commonshttp.CommonsHttpOAuthConsumer'

> ID：10268091
> 
> 赞同：4
> 
> 时间：2012-04-22T12:53:11.403
> 
> 标签：android

最近，我遇到一个问题，我的android应用程序总是意外停止，并且在日志上打印一些错误。事实上，我不知道如何基于我寻求帮助的每个人都想要的logcat调试我的程序。请帮助我！

这是我的日志。

```
04-22 11:57:20.653: W/dalvikvm(346): VFY: unable to resolve new-instance 41 (Loauth/signpost/commonshttp/CommonsHttpOAuthConsumer;) in LOAuth4Sina/com/AuthActivity;
04-22 11:57:20.653: D/dalvikvm(346): VFY: replacing opcode 0x22 at 0x000f
04-22 11:57:20.673: D/dalvikvm(346): VFY: dead code 0x0011-0039 in LOAuth4Sina/com/AuthActivity;.onCreate (Landroid/os/Bundle;)V
04-22 11:57:20.673: I/dalvikvm(346): Could not find method oauth.signpost.OAuthProvider.setOAuth10a, referenced from method OAuth4Sina.com.AuthActivity.onNewIntent
04-22 11:57:20.693: W/dalvikvm(346): VFY: unable to resolve interface method 41: Loauth/signpost/OAuthProvider;.setOAuth10a (Z)V
04-22 11:57:20.693: D/dalvikvm(346): VFY: replacing opcode 0x72 at 0x0010
04-22 11:57:20.733: W/dalvikvm(346): VFY: unable to resolve exception class 44 (Loauth/signpost/exception/OAuthMessageSignerException;)
04-22 11:57:20.733: W/dalvikvm(346): VFY: unable to find exception handler at addr 0x68
04-22 11:57:20.733: W/dalvikvm(346): VFY:  rejected LOAuth4Sina/com/AuthActivity;.onNewIntent (Landroid/content/Intent;)V
04-22 11:57:20.766: W/dalvikvm(346): VFY:  rejecting opcode 0x0d at 0x0068
04-22 11:57:20.766: W/dalvikvm(346): VFY:  rejected LOAuth4Sina/com/AuthActivity;.onNewIntent (Landroid/content/Intent;)V
04-22 11:57:20.766: W/dalvikvm(346): Verifier rejected class LOAuth4Sina/com/AuthActivity;
04-22 11:57:20.766: W/dalvikvm(346): Class init failed in newInstance call (LOAuth4Sina/com/AuthActivity;)
04-22 11:57:20.785: D/AndroidRuntime(346): Shutting down VM
04-22 11:57:20.785: W/dalvikvm(346): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-22 11:57:20.812: E/AndroidRuntime(346): FATAL EXCEPTION: main
04-22 11:57:20.812: E/AndroidRuntime(346): java.lang.VerifyError: OAuth4Sina.com.AuthActivity
04-22 11:57:20.812: E/AndroidRuntime(346):  at java.lang.Class.newInstanceImpl(Native Method)
04-22 11:57:20.812: E/AndroidRuntime(346):  at java.lang.Class.newInstance(Class.java:1429)
04-22 11:57:20.812: E/AndroidRuntime(346):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-22 11:57:20.812: E/AndroidRuntime(346):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
04-22 11:57:20.812: E/AndroidRuntime(346):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-22 11:57:20.812: E/AndroidRuntime(346):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-22 11:57:20.812: E/AndroidRuntime(346):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-22 11:57:20.812: E/AndroidRuntime(346):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 11:57:20.812: E/AndroidRuntime(346):  at android.os.Looper.loop(Looper.java:123)
04-22 11:57:20.812: E/AndroidRuntime(346):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-22 11:57:20.812: E/AndroidRuntime(346):  at java.lang.reflect.Method.invokeNative(Native Method)
04-22 11:57:20.812: E/AndroidRuntime(346):  at java.lang.reflect.Method.invoke(Method.java:521)
04-22 11:57:20.812: E/AndroidRuntime(346):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-22 11:57:20.812: E/AndroidRuntime(346):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-22 11:57:20.812: E/AndroidRuntime(346):  at dalvik.system.NativeStart.main(Native Method) 
```

# linux - 将时间和程序输出存储到单独的变量中

> ID：10268096
> 
> 赞同：1
> 
> 时间：2012-04-22T12:54:42.553
> 
> 标签：linux, bash, unix, sh

使用 bash，如何将程序执行所需的时间存储在一个变量中，并将程序的输出存储在另一个变量中？我知道`time`将其输出发送到`stdout`；我得到的最接近的是：

```
exec 3>&1 4>&2
time_output=$( { time echo hello world 1>&3 2>&4; } 2>&1 ) 
```

但是“hello world”会打印到终端。如何将“hello world”捕获到另一个变量？

我也试过：

```
prog_output=$(time_output=$( { time echo hello world 1>&3 2>&4; } 2>&1 ) ) 
```

但这不起作用。`prog_output`不包含任何内容，并且“hello world”被打印到终端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T18:45:35.283

这对你有用吗？

```
prog_output=`( time ls ) 2> time_output`
time_output=`cat time_output` 
```

# firefox - 通过 CSS 处理 DIV 中的 WIDTH 和 HEIGHT 百分比问题（firefox 不起作用）

> ID：10268102
> 
> 赞同：0
> 
> 时间：2012-04-22T12:55:14.243
> 
> 标签：firefox, css, height, width, centering

我对这个问题满脑子都是，所以让我分享一下我的挫败感，以便寻找有相同经历的人，幸运的是，找到了解决方案。

事情是这样的：

[http://jsfiddle.net/w4d2E/](http://jsfiddle.net/w4d2E/)

在 chrome 中，百分比工作正常，但在 Firefox（最新版本）中尝试相同时，内容 div 不再水平和垂直扩展。

我在这里分析了所有类似的问题，但找不到任何有效的答案。

提前致谢

PS：我尝试在“内容”层中使用块显示而不是“框”，但仍然具有相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:44:49.477

您正在使用 XUL 框布局。我建议不要这样做。 `-moz-box`不是 CSS flexbox 布局，正如您所想的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:03:20.687

这里的问题是`display: -moz-box`身体。如果你删除它一切正常。这似乎是一个错误，所以我建议在[错误跟踪器](https://bugzilla.mozilla.org)中提交报告。

# c# - VSTO 2010 以编程方式激活方程编辑器

> ID：10268104
> 
> 赞同：1
> 
> 时间：2012-04-22T12:55:39.183
> 
> 标签：c#, .net, vsto, ms-office, add-in

C#/.NET 3.5+

我正在尝试编写一个打开（/关闭）内置公式编辑器的 PowerPoint 2010 加载项，就好像您单击了“*插入*功能区”选项卡上的按钮一样，以解决奇怪地缺少键绑定的问题。[新的键绑定](http://blogs.msdn.com/b/vsod/archive/2010/04/08/using-shortcut-keys-to-call-a-function-in-an-office-add-in.aspx)就位。现在我需要让 PowerPoint 误以为我按下了不同的组合键，这听起来既不正确也不特别容易，或者手动激活编辑器。有没有`Some.Path.To.A.SetFancyEquationEditorEnabled(true);`我可以挂钩的方法，或者实现这一目标的不同方法？

**编辑 26/04：** 此块将模拟支持的快捷方式组合，但工作不可靠（连续调用两次失败）。我没有运气 emulating `Alt+=`，这在英文版中也是如此。我发布这个是因为它不是一个真正的解决方案

```
SendKeys.SendWait("%");
SendKeys.SendWait("N");
SendKeys.SendWait("3");
SendKeys.SendWait("I"); 
```

[MSDN：如何：在代码中模拟鼠标和键盘事件](http://msdn.microsoft.com/en-us/library/ms171548.aspx)

# c++ - Unordered_map 迭代器失效

> ID：10268106
> 
> 赞同：2
> 
> 时间：2012-04-22T12:55:51.697
> 
> 标签：c++, iterator, unordered-map

我有这个迭代器循环，

```
typedef  boost::unordered_map<std::pair<int, int>, NavigationNode> NodesMap;
NodesMap nodes;
for (NodesMap::iterator it= nodes.begin(); it != nodes.end() ; ++it)
{

  if(it->second.type == NavigationNodeType_Walkable)
  {
    ConnectNode(&it->second);
  }

} 
```

ConnectNode 函数似乎使迭代器无效。它在 NavigationNode 中推送新元素并修改 NavigationNode 的现有成员。

我有两个问题

*   传递它->秒作为指针不好吗？
*   遍历此容器的最佳方法是什么？

谢谢你。

**编辑：**

像这样访问容器的元素

```
 nodes[intpair(x, y)] 
```

ConnectNode函数内部会导致这个问题吗？

**edit2** 是的。

这是为什么？我将如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:19:04.820

*   传递它->秒作为指针不好吗？

    这取决于接受指针本身的函数的作用。单独来看，传递指针本身并没有错。

*   遍历此容器的最佳方法是什么？

    您使用的方式很好。使用`begin()`和`end()`迭代是相当标准的。

所以我认为问题一定出在`ConnectNode`，并且很可能您没有迭代器失效问题，而是其他问题。

“确实像这样访问容器的元素”

```
nodes[intpair(x, y)] 
```

这将在地图中添加一个新条目，该条目的键`intpair(x,y)`不存在，所以是的，这可能会弄乱迭代。您可以通过在使用运算符访问之前检查该键的元素是否存在来避免这种情况`[]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T13:28:18.797

根据您的更新，`ConnectNode`可以修改您正在迭代的地图。

```
nodes[intpair(x, y)] 
```

如果地图中不存在该键，则将插入一个新元素。这可能会导致映射重新散列，使所有迭代器无效。

为避免修改地图，您可以使用`find()`or `at()`。`find()`将通过其返回值指示键是否存在，`at()`如果键不存在则抛出。

如果您确实需要在 期间向地图添加新元素`ConnectNode`，那么事情就比较棘手了。您也许可以将它们放在一个单独的容器中，然后`nodes`在循环之后添加它们。

# php - 更新 PHP 中已选中的复选框

> ID：10268107
> 
> 赞同：1
> 
> 时间：2012-04-22T12:55:58.797
> 
> 标签：php, mysql, checkbox

假设我有一个用户选择的复选框列表。

```
<input type="checkbox" name="utility[]" id="utility[]" value="Water" />Water<br />
<input type="checkbox" name="utility[]" id="utility[]" value="Cable" />Cable<br />
<input type="checkbox" name="utility[]" id="utility[]" value="Electricity" />Electricity<br />
etc... 
```

用户选择了水并将其添加到数据库中。现在用户想要更新列表：

```
<input type="checkbox" name="utility[]" id="utility[]" value="Water" checked="checked"/>Water<br />
<input type="checkbox" name="utility[]" id="utility[]" value="Cable" />Cable<br />
<input type="checkbox" name="utility[]" id="utility[]" value="Electricity" />Electricity<br />
etc... 
```

如何检查该实用程序是否已在 PHP 中检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T13:21:16.053

我过去所做的，为了避免出现数百行臃肿，这是......

首先编译一个变量中的所有 html，没有任何“检查”实例。

```
$boxes = '';
$boxes .= '<input type="checkbox" name="utility[]" id="utility[]" value="Water" />Water<br />';
$boxes .= '<input type="checkbox" name="utility[]" id="utility[]" value="Cable" />Cable<br />';
$boxes .= '<input type="checkbox" name="utility[]" id="utility[]" value="Electricity" />Electricity<br />'; 
```

现在我遍历你的字段数组来检查。我也在这里提供了一个示例数组。

```
$already_checked = array('Water', 'Electricity');

foreach( $already_checked as $ac ) {
    $find = 'value="' . $ac . '"';
    $replace = $find . ' checked="checked"';
    $boxes = str_replace($find, $replace, $boxes);
}

echo $boxes; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T13:01:49.887

你可以这样做：

```
<input type="checkbox" name="utility[]" value="Water" 
     <?= in_array('Water', $utilities) ? 'checked="checked"' : '' ?>" 
/> 
```

（`$utilities`上面的变量是类似 的替代品`$_REQUEST['utilities']`，具体取决于代码的结构。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T13:10:07.917

像那样？

```
<input type="checkbox" name="utility[]" id="utility[]" value="Water"
   <?php
   if(isAlreadyChecked("Water"))
     echo "checked=\"checked\""
   ?>
/>Water<br />

<?php
   function isAlreadyChecked(value)
   {
     //Check if it is already checked and return a boolean
   }
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-17T21:44:49.330

我尝试了`in_array`条件的所有变体，但永远无法让它工作（检查其值先前已被选中并因此插入数据库的复选框）。我尝试使用表连接进行复杂查询，但也没有运气。我最终放弃并生成了一个`display:hidden` `div`打开数组（出于某种奇怪的原因，我不得不 IMPLODE 而不是爆炸）并将其项目列为逗号分隔的文本。然后我加入了一点 jQuery`indexOf()`魔法来确定每个复选框的值是否是所述数组的一部分。用 jQuery 花了我 10 分钟的时间，非常简单。

这是一些可以正常工作的示例代码：

```
<div class="categories">
  <span class="keywords"><?php $categories = array(); $categories = implode(', ', $keywords); echo $categories ?></span>
  <em>Please verify category selections with each update.</em><br/>
  <?php
    include 'db.php'; 
      $sql = mysqli_query($con,"SELECT * FROM categoriesTable ORDER BY Category_Name ASC");
        while ($row = mysqli_fetch_assoc($sql))
        {
        $key = urldecode($row['Category_Name']);
        $id = urlencode($row['catID']);
        echo "<input type='checkbox' name='Category_Key[]' value='$id' id='cat_$id' $chk> $key<br/>";
        }
  ?>
</div> 
```

CSS 将该 div 设置为不可见：

```
.keywords { display:none; visibility:hidden; } 
```

和 jQuery 部分：

```
$(document).ready(function() {  
    $('.categories input').each(function(index,data) {
        var str=$('.keywords').text();
        var catid = $(this).val();
        var chk = str.indexOf(catid);
        if (chk >= 0) {
            $(this).prop('checked', true);
        }
    });
}); 
```

我希望这可以帮助那些想知道为什么`in_array`条件使他们失败的人。由于这属于数据和 UI 之间关于数据持久性的暮光之城，我认为这是一条合法的路线。您有一个“回声”语句来生成多个复选框（在我这里有大约 40 个类别），然后是一个简单的 jQuery`.each()`来定位之前选择的内容并将其对应的框呈现为选中状态。

# objective-c - 键盘不移动视图

> ID：10268112
> 
> 赞同：0
> 
> 时间：2012-04-22T12:56:30.010
> 
> 标签：objective-c, ios, textfield

当我点击文本字段并出现键盘时，我正在尝试编写一些代码以使视图向上移动。包含文本字段的视图不是程序启动时出现的第一个视图。所以我在 ViewController 中写了一些代码

```
 - (void)viewDidLoad {
 [super viewDidLoad];
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidShow:) name:UIKeyboardDidShowNotification object:nil];
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidHide:) name:UIKeyboardDidHideNotification object:nil];
 }

-(void)keyboardDidShow:(NSNotification*)notification {
   NSDictionary* userInfo = [notification userInfo];
   NSValue* value = [userInfo objectForKey:UIKeyboardFrameBeginUserInfoKey];
   CGSize keyboardSize = [value CGRectValue].size;

   gm.frame = CGRectMake(gm.frame.origin.x, gm.frame.origin.y, gm.frame.size.width, gm.frame.size.height-keyboardSize.height);
}

-(void)keyboarDidHide:(NSNotification*)notification {
   gm.frame = CGRectMake(gm.frame.origin.x, gm.frame.origin.y, gm.frame.size.width, gm.frame.size.height);
} 
```

gm 是包含文本字段的视图：

```
@class gameOverMenu;

@interface RootViewController : UIViewController {
    gameOverMenu* gm;
}
@end 
```

因此，当我点击这些方法的文本字段时，程序会执行这些方法但没有任何反应，我的意思是视图没有被键盘移动，我不能让键盘消失。为什么这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:59:00.243

尝试使用`bounds`而不是`frame`. 锚定可能会妨碍您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T13:11:12.623

你想让它向上移动还是改变大小？这行得通吗？

```
-(void)keyboardDidShow:(NSNotification*)notification {
   NSDictionary* userInfo = [notification userInfo];
   NSValue* value = [userInfo objectForKey:UIKeyboardFrameBeginUserInfoKey];
   CGSize keyboardSize = [value CGRectValue].size;

   gm.frame = CGRectMake(gm.frame.origin.x, gm.frame.origin.y-keyboardSize.height, gm.frame.size.width, gm.frame.size.height);
}

-(void)keyboarDidHide:(NSNotification*)notification {
   NSDictionary* userInfo = [notification userInfo];
   NSValue* value = [userInfo objectForKey:UIKeyboardFrameBeginUserInfoKey];
   CGSize keyboardSize = [value CGRectValue].size;

   gm.frame = CGRectMake(gm.frame.origin.x, gm.frame.origin.y+keyboardSize.height, gm.frame.size.width, gm.frame.size.height);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T14:58:31.323

这段代码对我有用：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidShow:) name:UIKeyboardDidShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidHide:) name:UIKeyboardDidHideNotification object:nil];
}

-(void)keyboardDidShow:(NSNotification*)notification {
    NSDictionary* userInfo = [notification userInfo];
    NSValue* value = [userInfo objectForKey:UIKeyboardFrameBeginUserInfoKey];
    CGSize keyboardSize = [value CGRectValue].size;

    webView.frame = CGRectMake(webView.frame.origin.x, webView.frame.origin.y, webView.frame.size.width, webView.frame.size.height-keyboardSize.height);
}

-(void)keyboardDidHide:(NSNotification*)notification {
    NSDictionary* userInfo = [notification userInfo];
    NSValue* value = [userInfo objectForKey:UIKeyboardFrameBeginUserInfoKey];
    CGSize keyboardSize = [value CGRectValue].size;

    webView.frame = CGRectMake(webView.frame.origin.x, webView.frame.origin.y, webView.frame.size.width, webView.frame.size.height+keyboardSize.height);
} 
```

# node.js - Node.js 的 PayPal 模块

> ID：10268113
> 
> 赞同：8
> 
> 时间：2012-04-22T12:56:40.133
> 
> 标签：node.js, paypal, payment-gateway

我需要在我的 Node.js 项目中实现一些使用 PayPal 的功能。支持 PayPal 的 Node.js 可用库有哪些？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:20:30.893

[James Carr 的这篇文章](https://www.x.com/devzone/articles/integrating-paypal-express-checkout-your-nodejs-app)（以及[后续](https://www.x.com/node/4917)文章）是一个很好的讨论。它利用了他的 npm 模块[paynode](https://github.com/jamescarr/paynode)。

**编辑：**链接的文章已经消失（感谢@UpTheCreek 的提示）。但是模块本身仍然存在并且有[文档](https://github.com/jamescarr/paynode/tree/master/docs)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-22T10:53:08.000

现在可用的是 PayPal 的用于 REST API 的 Node.js SDK，[在这里非常容易](https://github.com/paypal/rest-api-sdk-nodejs)

```
 var paypal_sdk = require('paypal-rest-sdk');
paypal_sdk.configure({
  'host': 'api.sandbox.paypal.com',
  'port': '',
  'client_id': '<Client ID>',
  'client_secret': '<Client Secret ID>'
});

var card_data = {
  "type": "visa",
  "number": "4417119669820331",
  "expire_month": "11",
  "expire_year": "2018",
  "cvv2": "123",
  "first_name": "Joe",
  "last_name": "Shopper"
};

paypal_sdk.credit_card.create(card_data, function(error, credit_card){
  if (error) {
    console.log(error);
    throw error;
  } else {
    console.log("Create Credit-Card Response");
    console.log(credit_card);
  }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T15:40:28.847

在寻找 Node.js 模块时，请务必查看官方[模块 wiki 页面](https://github.com/joyent/node/wiki/modules)。

我只能找到一个 Paypal 模块，[Paypal IPN 模块](https://github.com/andzdroid/paypal-ipn)，它只能验证 IPN 消息。

如果您需要更多的东西，您可能必须自己构建它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-22T13:34:32.910

我记得在类似的项目上工作，并且在浏览网络以寻求故障排除时，我偶然发现了一个当时对我有用的线程。我试着找到那个线程，我想是[这个](http://groups.google.com/group/nodejs/browse_thread/thread/44c19b52c7ebb5b6)。希望这对你有用，我记得这对我来说是那些令人沮丧的项目之一。迪娜

# javascript - 使用 Phonegap 访问 Android 上的联系人

> ID：10268122
> 
> 赞同：4
> 
> 时间：2012-04-22T12:57:32.647
> 
> 标签：javascript, android, html, cordova

我正在使用 phone-gap 开发一个应用程序。我正在尝试访问移动设备上的联系人，因为我稍后会使用它们。我现在正在尝试编写代码来查找手机上的联系人。这是我正在使用的 JS 文件：

```
alert('Starting JS');
var TAP = ('ontouchend' in window) ? 'touchend' : 'click';
alert('I entered the function'); 

   document.addEventListener('DOMContentLoaded', function () {
   alert('I entered the second function');

       x$('#friendSubmit').on(TAP, function () {
           var filter = x$('#friendName')[0].value;
           alert('I entered the third function');

           if (!filter)
            {
            alert('Cant find contacts');

                // no contents
                return;
            } 
           else 
           {
              findContactByName(filter, function (contacts) 
              {

   alert(contacts.length + ' contact(s) found matching "' +filter + '"');
  }
); }               

  }); });
  function findContactByName(name, callback) {
       function onError() {
           alert('Error: unable to read contacts');
       };
       var fields = ["displayName", "name"],
           options = new ContactFindOptions();
       options.filter = name;
       options.multiple = true;
       // find contacts
       navigator.service.contacts.find(fields, callback, onError,
       options);
     ￼} 
```

没有任何警报被提醒，因此代码中似乎有问题（但是当我删除“findContactByName”函数时它会发出警报。

你知道我是否应该添加任何类型的插件，或者更新任何东西以便这些功能可以工作？我正在使用cordova 1.6.1 版，并更新了清单中的权限，以便能够访问联系人。那么，您知道我的代码有什么问题吗？为什么它不起作用？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T22:57:03.857

您是否在等待 deviceready 事件（已加载 PhoneGap）？

以下代码适用于我将具有名称字段的所有联系人放入名称数组中：

```
function onDeviceReady() {
    // specify contact search criteria
    var options = new ContactFindOptions();
    options.filter="";          // empty search string returns all contacts
    options.multiple=true;      // return multiple results
    filter = ["displayName"];   // return contact.displayName field

    // find contacts
    navigator.contacts.find(filter, onSuccess, onError, options);
}

var names = [];

// onSuccess: Get a snapshot of the current contacts
//
function onSuccess(contacts) {
    for (var i=0; i<contacts.length; i++) {
        if (contacts[i].displayName) {  // many contacts don't have displayName
            names.push(contacts[i].displayName);
        }
    }
    alert('contacts loaded');
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T19:00:26.773

您正在处理一个旧示例：

```
navigator.service.contacts.find(fields, callback, onError, options); 
```

在很多版本中都不是打电话给联系人的正确方式。采用：

```
navigator.contacts.find(fields, callback, onError, options); 
```

反而。

# regex - 如何在 shell 中使用正则表达式 grep 这种模式？

> ID：10268127
> 
> 赞同：1
> 
> 时间：2012-04-22T12:58:29.213
> 
> 标签：regex, grep

我想使用以下代码对“1-10”、“10-20”、“1-9”（不带双引号）之类的模式进行 grep：

```
grep '[[:digit:]]\-[[:digit:]]' mydoc 
```

可以 grep "1-9" 但我不知道如何 grep 其他两种模式！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:08:44.323

减号不需要掩蔽。+ 允许多次出现。

```
egrep '[0-9]+-[0-9]+' mydoc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T13:36:37.730

`grep -E '[[:digit:]]+-[[:digit:]]+' mydoc`

`grep -E '[[:digit:]]{1,2}-[[:digit:]]{1,2}' mydoc`

?

# c++ - reinterpret_cast 和 STATUS_ACCESS_VIOLATION

> ID：10268131
> 
> 赞同：-1
> 
> 时间：2012-04-22T12:59:17.017
> 
> 标签：c++, exception, reinterpret-cast, explicit-conversion

在尝试使用 C++ 和`reinterpret_cast`函数时，我尝试将 a 转换`short`为 a`string`并得到一个 STATUS_ACCESS_VIOLATION 异常。

```
 short s = 32767;

   short* s2 = &s;
   string* test4 = reinterpret_cast<string*>(s2);

   cout << "reinterpret_cast: " << *test4 << endl; 
```

据我了解，尝试使用一块内存，该内存未分配给我的应用程序进程。

我怎样才能注意这种被禁止的内存访问的尝试？我怎样才能只重新解释这件作品，其中包含我的短期价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:10:27.510

您没有转换`short`为`string`; 您正在获取 a 的地址`short`，然后尝试访问该地址处的内存，就好像它包含 a 一样`string`，但它没有。

幸运的是，在您的情况下，这导致一些随机数据被解释为无效指针，因此您遇到了访问冲突错误。如果那里碰巧有一些看起来像有效的字符串结构的东西，那么可能会发生各种奇怪的事情。

> 我怎样才能注意这种被禁止的内存访问的尝试？

不要使用`reinterpret_cast`在指向不相关类型的指针之间进行转换，并期望重新解释的值指向一个有效的对象；并且根本不要使用它，除非你确切地知道你在用它做什么。

> 我怎样才能只重新解释这件作品，其中包含我的短期价值？

如果要将数字转换为字符串，则可以使用字符串流：

```
std::ostringstream stream;
stream << s;
std::cout << "formatted with a stringstream: " << stream.str() << std::endl; 
```

或者，如果您使用的是 C++11，则可以使用标准函数将数字转换为字符串：

```
std::string string = std::to_string(s);
std::cout << "converted with to_string: " << string << std::endl; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T13:15:45.800

强制转换不会自动将一种数据类型转换为另一种数据类型。 `reinterpret_cast`是一种特别强大和危险的操作，只有在熟悉相关数据类型的情况下才能使用。我不会在这里详细介绍，但总而言之，指向short 的指针不能`reinterpret_cast`转换为指向字符串的指针。

如果您需要将短值转换为字符串，请查看[stringstream](http://www.cplusplus.com/reference/iostream/stringstream/)类，它与其他流一样可以使用各种输入（包括短值）并将它们转换为字符串。

# javascript - HTMLCanvasElement 没有方法“toDataUrl”

> ID：10268133
> 
> 赞同：7
> 
> 时间：2012-04-22T12:59:20.367
> 
> 标签：javascript, html, canvas, data-url

我正在尝试从画布中获取 dataUrl 以用作各种元素上的 css 背景图像。但我总是得到以下错误`Uncaught TypeError: Object #<HTMLCanvasElement> has no method 'toDataUrl'`

这是我的测试代码

```
<!DOCTYPE html>
<html>
<body>
<canvas id="myCanvas" width="200" height="100" style="border:1px solid #c3c3c3;">
Your browser does not support the canvas element.
</canvas>
<script type="text/javascript">
  var c=document.getElementById("myCanvas");
  var ctx=c.getContext("2d");
  ctx.fillStyle="#FF0000";
  ctx.fillRect(0,0,150,75);
  alert(c.toDataUrl());
</script>
</body>
</html> 
```

又是变相的安全功能？还是我只是愚蠢...

提前致谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-22T13:03:59.727

您的函数名称不正确。观看案例：

```
alert(c.toData**URL**());
```

[演示](http://jsfiddle.net/a9mgx/)

# c++ - 在不知道名称的情况下打开文件

> ID：10268137
> 
> 赞同：1
> 
> 时间：2012-04-22T12:59:53.550
> 
> 标签：c++, fstream

我想运行一个循环，它将打开文件夹中的所有文件并对它们执行一些操作。但是，当我尝试通过

```
"*.*" 
```

在 stream.open()

，它不会打开任何文件。（`is_good()`返回`false`）

```
fstream stream;
stream.open("*.*", fstream::out); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T13:02:05.173

使用类似`dirent.h`或 boost 的 FileSystem Api 来找出目录中的所有文件`*.*`并将它们存储在一个`std::vector`或什么中。然后遍历向量并打开所有文件。

```
for(int i = 0; i < files.size(); i++)
{
   stream.open(files[i], fstream::out);
} 
```

# sql-server - 多 SQL 查询或联接？

> ID：10268143
> 
> 赞同：-1
> 
> 时间：2012-04-22T13:01:12.193
> 
> 标签：sql-server, performance

我有一张`SpecialOffers`名为特价商品的桌子和桌子，`SOItems` 如果我找到它，我想获得特定商品的特价，所以首先我这样做了：

```
IF EXISTS(SELECT * FROM SOTtems WHERE ItemType = 2 AND Itemid = @id)
BEGIN
      INSERT INTO #SO
      SELECT * FROM SpecialOffers so 
      INNER JOIN SOItems soi ON so.Id = soi.SpecialOfferID
      WHERE soi.ItemType = 2 AND soi.Itemid = @id
END 
```

但是为了摆脱 INNER JOIN 因为我认为这对性能更好，我这样做了：

```
DECLARE @specialOfferID INT

SET @specialOfferID = (SELECT SpecialOfferID FROM SOTtems WHERE ItemType = 2 AND Itemid = @id)

IF @specialOfferID IS NOT NULL
BEGIN
     INSERT INTO #SO
     SELECT * FROM SpecialOffers so 
     WHERE ID = @specialOfferID
END 
```

因此，对于这个示例和一般情况，执行更多 sql 查询或使用 join 哪个更有效，性能更好

注意：在我写的存储过程中，我必须这样做超过 6 次，这就是我问你的原因 :)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:10:05.580

这种手动优化可能是不必要的，因为优化器完全有能力处理这个问题。

您可以将两者放入 SSMS 并一起运行，并查看执行计划中的相对成本。

避免连接通常不是优化的第一步。

我的第一步通常是查看索引策略并确保我没有遗漏基本索引，然后查看执行计划，看看是否有任何明显的问题。

然后我不会优化，直到我遇到实际的性能问题 - 然后只有在了解真正导致性能问题的原因之后。

我实际上会将其简化为：

```
INSERT INTO #SO
SELECT *
FROM SpecialOffers so 
INNER JOIN SOItems soi
    ON so.Id = soi.SpecialOfferID
    AND soi.ItemType = 2
    AND soi.Itemid = @id 
```

就是这样 - 没有 EXISTS 检查或其他任何东西 - 内部连接意味着检查是否存在是多余的，因为否则它不会插入任何东西。从某种意义上说，这使得代码更易于维护，因为如果条件发生更改，您不需要复制条件，并且连接中的代码不太可能被意外更改。另一方面，如果连接确实被更改，它可能会产生更严重的影响。

请注意，您仍然可以将其编写为 WHERE 版本，而无需使用 EXISTS 检查。

更少的代码通常意味着更少的错误隐藏位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T13:12:00.863

在 Management Studio 的窗口中粘贴这两个查询，并显示查询的执行计划。这会告诉你到底发生了什么。

您很可能会看到性能差异很小。可能使第二个更快的是它没有`IF EXISTS(...)`，但另一方面，结果将被缓存，因此差异仍然很小。

另一件可以产生影响的事情是，您正在`#SO`使用第一个查询将更多数据放入表中。当您使用`SELECT *`时，您获得的数据超出了您的需要。例如，字段`SOItems.SpecialOfferID`和`SpecialOffers.Id`都包含在内，但您知道它们始终相同。指定您想要返回的字段，这样您就不会获取超出您需要的信息。

# php - Instagram API (JSON + PHP)：显示从 X 开始而不是从 0 开始的条目

> ID：10268151
> 
> 赞同：0
> 
> 时间：2012-04-22T13:02:50.587
> 
> 标签：php, json, api, instagram

:) 这是我现在用来从 Instagram 提取我的条目的代码：

```
 <?php
        setlocale(LC_TIME, 'it_IT');
        function get_instagram($tag=bombacarta,$count=10,$width=612,$height=612){
            $url = 'https://api.instagram.com/v1/tags/'.$tag.'/media/recent/?access_token=13137.f59def8.1a759775695548999504c219ce7b2ecf&count='.$count;
            // Also Perhaps you should cache the results as the instagram API is slow
            $cache = './wp-content/themes/raymond-31/instagram_json/'.sha1($url).'.json';
            if(file_exists($cache) && filemtime($cache) > time() - 500){
                // If a cache file exists, and it is newer than 1 hour, use it
                $jsonData = json_decode(file_get_contents($cache));
            } else {
                $jsonData = json_decode((file_get_contents($url)));
                file_put_contents($cache,json_encode($jsonData));
            }
            $result = '<div style="border-top:1px solid #ddd">'.PHP_EOL;
            foreach ($jsonData->data as $key=>$value) {
                $location = (!empty($value->location->name))?'presso '.$value->location->name:null;
                $result .= "\t".'<em>'.htmlentities($value->caption->text, ENT_QUOTES, "UTF-8").'</em><br /><img src="'.$value->images->standard_resolution->url.'" alt="'.htmlentities($value->caption->text, ENT_QUOTES, "UTF-8").'" width="'.$width.'" height="'.$height.'" /><br /><div class="postinfo">Scattata da '.$value->caption->from->full_name.' il '.htmlentities(gmstrftime('%e %B %Y alle %R', $value->caption->created_time + 7200)).' '.htmlentities($location).'</div><br />'.PHP_EOL;
            }
            $result .= '</div>'.PHP_EOL;
            return $result;
        }
        echo get_instagram();
        ?> 
```

我很想在 5 个条目后将其显示为缩略图。所以我想在standard_resolution中有5个实体，另一个.. 10..？20..？（不知道）作为可点击的缩略图。

当然，我可以再次复制/粘贴代码，用 thumbnail_resolution 替换 standard_resolution 但我如何指定我想从（比如说）条目 5 而不是条目 0 开始（以避免在其他图像之前再次重复相同的 5 个图像)? :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:15:09.600

试试这个：

```
 function get_instagram($tag=bombacarta,$count=10,$width=612,$height=612){
            $url = 'https://api.instagram.com/v1/tags/'.$tag.'/media/recent/?access_token=13137.f59def8.1a759775695548999504c219ce7b2ecf&count='.$count;
            // Also Perhaps you should cache the results as the instagram API is slow
            $cache = './wp-content/themes/raymond-31/instagram_json/'.sha1($url).'.json';
            if(file_exists($cache) && filemtime($cache) > time() - 500){
                // If a cache file exists, and it is newer than 1 hour, use it
                $jsonData = json_decode(file_get_contents($cache));
            } else {
                $jsonData = json_decode((file_get_contents($url)));
                file_put_contents($cache,json_encode($jsonData));
            }
            $result = '<div style="border-top:1px solid #ddd">'.PHP_EOL;
            $ic=0;
            foreach ($jsonData->data as $key=>$value) {
                $location = (!empty($value->location->name))?'presso '.$value->location->name:null;
if($ic>=5){$res_c=thumbnail_resolution; $x_data="TESTT";}else{$res_c=standard_resolution;$x_data='Scattata da '.$value->caption->from->full_name.' il '.htmlentities(gmstrftime('%e %B %Y alle %R', $value->caption->created_time + 7200)).' '.htmlentities($location);}
$ic++;
                $result .= "\t".'<em>'.htmlentities($value->caption->text, ENT_QUOTES, "UTF-8").'</em><br /><img src="'.$value->images->$res_c->url.'" alt="'.htmlentities($value->caption->text, ENT_QUOTES, "UTF-8").'" width="'.$width.'" height="'.$height.'" /><br /><div class="postinfo">'.$x_data.'</div><br />'.PHP_EOL;
            }
            $result .= '</div>'.PHP_EOL;
            return $result;
        } 
```

# c - C中的指针-构造矩阵时的“分段错误”

> ID：10268152
> 
> 赞同：0
> 
> 时间：2012-04-22T13:03:00.437
> 
> 标签：c, matrix, struct, segmentation-fault

我在 32 位 Ubuntu 虚拟机上使用 Eclipse 来处理项目。在尝试实现结构或尝试运行特定功能时，我遇到了一个大问题。功能是这个：

```
int count (matrix m, int v[], int w[], int col) {

    int r=0;
    int j=0;

    while (j < m.length) {
        int k=0;
        bool aux=true;

        while (k < col && aux ){
            if (v[k] == 1) {
                if(m.i[j][k] != w[k])
                    aux=false;
            }
            k++;
        }

        if(aux) r++;
        j++;
    }
    return r;
} 
```

该函数接收一个矩阵（定义如下），一个带有 1 和 0 的向量（用于了解要搜索的列，一个包含我们要在这些列中搜索的值的向量以及列数（等于向量的长度）和矩阵）。当它遇到第二个“如果”时，它给了我分段错误（我不明白它是什么），我可以看到以这种方式定义它是不正确的，但我已经尝试过并且我可以'似乎没有找到访问向量中值的方法。下面是我的结构矩阵：

```
typedef int *ind; 

struct matrix { 
    ind *i;
    int length;
};
typedef struct matrix matrix; 
```

在这个结构中，我的矩阵有一个指针和长度（行数）；指针指向一个指针向量（每行一个指针），每个指针都指向一个向量，实际上就是我的矩阵行。这是我添加和创建空矩阵的函数：

```
matrix emptyS(int n, int col) {
matrix m;
int d=0;
m.length=0;
m.i=(ind*) malloc(sizeof(int)*n);
int x;
    for (x=0; x < n; x++)
           {
               *m.i = (int*) malloc(sizeof(int)*col);
           }
while (d<n){
    m.i[d]=NULL;
    d++;
}
return m;
} /*Updated*/

matrix add(matrix m,int v[]){
    m.i[m.length+1]=v;
    m.length++;
    return m;
} 
```

我知道这是一个非常具体的问题，但我一直在疯狂地改变我的功能并且似乎无法成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T13:08:41.333

你的定义`i`是这样的：

```
 ind *i; 
```

您有以下定义`ind`：

```
typedef int* ind; 
```

这意味着您对`i`真的定义是这样的：

```
int ** i; 
```

这是指向指针的指针，这意味着您必须错误地分配内存。

```
m.i=(ind*) malloc(sizeof(int)*n); 
```

此分配仅用于 a `int*`，但第二个指针呢？你从来没有为它分配任何内存！

分配矩阵的行，如下所示：

```
for (int x = 0; x < nofrows; x++)
   { 
       *m.i = (int*)malloc(sizeof(int)); 
   } 
```

**编辑**

为矩阵分配后，您的代码将矩阵中的指针设置为`NULL`，基本上使您刚刚分配的所有内存*悬空*，*没有任何指向它*！

```
while (d<n){
    m.i[d]=NULL; <--- LEAVES YOUR MEMORY JUST ALLOCATED FOR ROW d DANGLING.
    d++;
} 
```

您不应该将其设置为`NULL`，而是应该在刚刚为其分配内存的矩阵中写入内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T13:21:19.093

换行

```
m.i=(ind*) malloc(sizeof(int)*n); 
```

经过

```
m.i=(ind*) malloc(sizeof(ind)*n); 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T15:38:51.653

```
#include <stdlib.h>
#include <stdio.h>

typedef enum{false,true}  bool;

typedef struct matrix_ {
    int **rows;
    unsigned size ;
    unsigned used ;
} matrix;

unsigned count (matrix m, int v[], int w[], unsigned ncol) {
    unsigned cnt=0;
    unsigned j=0;

    for (j=0; j < m.used; j++) {
        unsigned k;
        bool aux=true;

        for (k=0;k < ncol && aux; k++ ){
            if (v[k] == 1  && m.rows[j][k] != w[k]) {
                    aux=false;
            }
        }

        if(aux) cnt++;
    }
    return cnt;
}
#define barf(s) do { \
    fprintf (stderr, "%s\n", s); \
    exit (EXIT_FAILURE); \
    } while(0)

matrix emptyS(unsigned siz) {
    matrix m;
    unsigned d;

    m.used=0;
    m.size = siz;
    m.rows = malloc(siz * sizeof *m.rows );

    for (d=0; d<siz; d++){
        m.rows[d]=NULL;
    }
    return m;
}

matrix add(matrix m,int v[]){
    if (m.used >= m.size) barf("Danger, Bill Robinson!" );
    m.rows[m.used++]=v;
    return m;
}
int main(void)
{
int a[] = { 0,1,0};
int b[] = { 0,1,1};
int c[] = { 0,0,0};
int v[] = { 1,0,1};
int w[] = { 0,1,0};
matrix mymatrix;
unsigned zcount;

mymatrix = emptyS(3);
mymatrix = add( mymatrix, a);
mymatrix = add( mymatrix, b);
mymatrix = add( mymatrix, c);

zcount = count(mymatrix, v, w, 3);

printf("Count = %u\n", zcount);

return 0;
} 
```

一些“风格”提示：

*   for 循环比 while() 循环更不容易出错，并且节省了两行代码。
*   对于计数和索引，无符号类型不易出错。（只有一个角盒）
*   不要在 typedef 中隐藏指针；它会混淆你自己和他人。
*   不要强制转换 malloc() 的返回值；它不是必需的，并且可能会抑制错误消息。
*   `ptr = malloc (n * sizeof *ptr)`是更稳定的 WRT 错字和未来的编辑。
*   如果您分配一个可变大小的对象（例如您的矩阵），则将大小（元素数）存储**在**该对象内。一个对象应该是“独立的”。

# c# - 从 C# Windows Phone XNA 游戏项目中引用 F#

> ID：10268161
> 
> 赞同：1
> 
> 时间：2012-04-22T13:05:02.083
> 
> 标签：c#, dll, f#, xna

我对此很陌生，我目前正在为大学做一个项目，该项目涉及必须在 C# 和 F# 中创建一个 Windows Phone Xna 游戏。我一直在尝试将 F# 链接到 C# 项目，例如在 F# 项目中创建一个可以在 C# 中使用的变量。我想使用 F# 为 C# 游戏做一些计算。但是我真的很难将这两个项目联系起来，我尝试将项目添加到同一个解决方案中，我尝试使用 F# C# 模板，但它似乎不会选择 F# 项目。我已经阅读了此处的问题以使用 F# 项目中的 dll 并在 C# 项目中引用它，但是在阅读了很多内容后我仍然不确定如何执行此操作。谁能告诉我如何从 F# 项目中获取整数值以在 C# 中使用，或者如何使用/创建此 dll 在 Windows Phone XNA 上执行此操作？我试图研究，但一无所获，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T18:51:12.187

1.  在 C# 项目的解决方案中创建 F# 项目
2.  在您的 C# 项目中，右键单击引用并选择添加引用...
3.  从项目选项卡中，选择您的 F# 项目。

您现在应该能够在 C# 项目中使用 F# 项目的*公共*类型。例如，如果您在 F# 中使用“type public”创建了一个类型，您将能够实例化它并调用它的静态方法（如果有）。

# html - fmt 消息将识别某些键，但其他则不

> ID：10268162
> 
> 赞同：0
> 
> 时间：2012-04-22T13:05:38.697
> 
> 标签：html, jsp, msgfmt

所以我正在处理 fmt 消息。但是我使用的一些键没有被识别。一些键的工作，但其他没有。这是我第一次使用这个。我完全被难住了。我究竟做错了什么？

编辑！

好的，我修好了。删除并重新创建所有属性文件神奇地修复了它。我仍然不知道他为什么给我这个错误。

例如在同一页面上，这将起作用：

```
<li><a  href="GameController?action=Home"><fmt:message key="home"/></a></li> 
```

但这不会：

```
<p><fmt:message key="developers"/></p> 
```

这是de属性文件：

```
games.titel=Games    
home=Home          
prijs=Price      
game=game       
editGame=Edit Game        
naam=Name       
kiesDeveloper=Choose a developer        
addDeveloper=Add Developer           
developer=developer        
developers=Developers          
logIn=Log In
about=About          
editDeveloper=Edit Developer          
kiesGame=Choose a game         
voegGameAanDatabaseToe=Add a game to the Database          
voegDeveloperAanDatabaseToe=Add a developer to the Database       
addingGame=Adding a game 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:18:51.177

好的，我修好了。删除并重新创建所有属性文件神奇地修复了它。我仍然不知道他为什么给我这个错误。

# xml - 如何在 XML 模式中表示具有属性的单个元素？

> ID：10268167
> 
> 赞同：1
> 
> 时间：2012-04-22T13:05:51.473
> 
> 标签：xml, schema

我有一个关于 XML 模式的问题。

我试图解释如下单个元素，但它失败了。

```
<parent-element>
    <check-element type="same">string value</check-element>
</parent-element> 
```

那有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:34:21.410

我自己已经解决了这个问题。;)

```
<xs:complexType name="check-type">
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="check"/>
      </xs:extension>
    </xs:simpleContent>
</xs:complexType>

<xs:element name="parent-element">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="check-element" type="target:check-type" minOccurs="1" maxOccurs="1"/>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

# c++ - 从二叉搜索树中删除节点

> ID：10268169
> 
> 赞同：0
> 
> 时间：2012-04-22T13:06:10.057
> 
> 标签：c++, algorithm, data-structures, binary-tree

在下面的代码中，我尝试实现一个基本的**删除**操作。但是，甚至在开始复杂的删除部分之前，我都未能删除**leaf node**。我想这可能与定义变量的位置有关，但是我无法解决它。任何想法，将不胜感激。

我想删除节点的部分基本上是作为`delete temp;`部分实现的（顺便说一下，如果我插入它，因为`delete[]temp;`它仍然不起作用）。

```
void remove(int value){
        if(root==NULL)
            cout<<"The list is empty!"<<endl;
        else {
            Node *temp=root;
            while(temp!=NULL)
            {
                cout<<"Processing: "<<temp->data<<endl;
                if(value==temp->data)
                {
                    cout<<"Data verified"<<endl;
                    //DELETE ROOT
                    if(temp->left && temp->right) //If it has two children
                    {
                        cout<<"Root with two children"<<endl;
                        return;
                    }
                    if(temp->left || temp->right)
                    {
                        cout<<"Root with a single child"<<endl;
                        return;
                    }
                    else {
                        cout<<"Leaf node"<<endl;
                        delete temp;
                        return;
                    }
                }
                else if(value<temp->data){
                    if(temp->left)
                        temp=temp->left;
                    else
                        return;
                }
                else{
                    if(temp->right)
                        temp=temp->right;
                    else
                        return;
                }

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T14:11:44.860

[`delete`操作员](http://en.wikipedia.org/wiki/Delete_%28C%2B%2B%29)不会按照您[的想法去做。](http://en.wikipedia.org/wiki/Delete_%28C%2B%2B%29)它的作用是将对象使用的内存标记为未使用，这意味着它可以再次使用（它也调用对象的析构函数，但这与这里无关）。

它*不会*做的是修改任何指向已删除对象的指针，你必须自己做。

因此，该分支的正确代码必须访问已删除节点的父节点，并将其`left`or`right`字段（取决于已删除节点是哪个）设置为`NULL`. 只有这样你才能真正`delete`的节点。

# c# - C# 查找数组中的最小值

> ID：10268180
> 
> 赞同：0
> 
> 时间：2012-04-22T13:07:23.003
> 
> 标签：c#, arrays, listbox

```
 var minSalary = lstEmployeeData.Items.OfType<Employee>().Min(x => x.EmpsSalary);
    var empsWithMinSalary = lstEmployeeData.Items.OfType<Employee>().Where(x => x.EmpsSalary == minSalary);

    string names = "";
    foreach(var e in empsWithMinSalary)
    names += Environment.NewLine + e.EmployeeFirstName;
    string msg = string.Format("The following emplyoees have the lowest salary of {0} : {1}", minSalary, names);
    MessageBox.Show(msg); 
```

以上是我查找最低薪水按钮的代码，但是它显示“foreach(var e in empsWithMinSalary) 我收到一个错误，说 e 已经在使用中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T13:30:12.340

查看您的代码，在我看来，您正在将文本项添加到 ListBox，因此当然要从中获得薪水并不容易。

相反，您应该将 Employee 对象传递给列表框以保留所有必要的信息；这样，您的添加方法将是：

```
 private void btnSave_Click(object sender, EventArgs e)
    {
        var empid = Convert.ToInt32(txtEmployeeID.Text);
        var empfirstname = Convert.ToString(txtEmployeeFirstName.Text);
        var emplastname = Convert.ToString(txtEmployeeLastName.Text);
        var empsalary = Convert.ToDouble(txtSalary.Text);

        var emp = new Employee(empid, empfirstname, emplastname, empsalary);

        lstEmployeeData.Items.Add(emp);
    } 
```

当然，要得到想要的显示文本，你需要重新定义`ToString()`Employee的方法，例如像这样：

```
 class Employee
    {
        // other methods...

        public override string ToString()
        {
            return this.EmployeeToString();
        }
    } 
```

最后，当单击“显示最低工资的员工”按钮时，您应该简单地执行以下操作：

```
private void btnLowestSalary_Click(object sender, EventArgs e)
{
    var minSalary = lstEmployeeData.Items.OfType<Employee>().Min(x => x.Salary);
    var empWithMinSalary = lstEmployeeData.Items.OfType<Employee>()
                                          .First(x => x.Salary == minSalary);

    string msg = string.Format("{0} has the lowest salary of {1}", empWithMinSalary.EmployeeFirstName, minSalary);
    MessageBox.Show(msg);
} 
```

**编辑 ：**

如果不止一名员工的薪水相同，您可以执行以下操作：

```
private void btnLowestSalary_Click(object sender, EventArgs e)
{
    var minSalary = lstEmployeeData.Items.OfType<Employee>().Min(x => x.Salary);
    var empsWithMinSalary = lstEmployeeData.Items.OfType<Employee>()
                                           .Where(x => x.Salary == minSalary);

    foreach(var e in empsWithMinSalary)
    {
        string msg = string.Format("{0} has the lowest salary of {1}", e.EmployeeFirstName, minSalary);
        MessageBox.Show(msg);
    }
} 
```

或更好：

```
private void btnLowestSalary_Click(object sender, EventArgs e)
{
    var minSalary = lstEmployeeData.Items.OfType<Employee>().Min(x => x.Salary);
    var empsWithMinSalary = lstEmployeeData.Items.OfType<Employee>()
                                           .Where(x => x.Salary == minSalary);

    string names = "";
    foreach(var e in empsWithMinSalary)
        names += Environment.NewLine + e.EmployeeFirstName;
    string msg = string.Format("The following emplyoees have the lowest salary of {0} : {1}", minSalary, names);
    MessageBox.Show(msg);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T13:21:00.187

让我向您介绍我的朋友 Linq；

```
using System;
using System.Linq;

class Employee
{
    public string Name { get; set; }
        public decimal Salary { get; set; }
}

public class Test
{
    public static void Main()
    {
        Employee[] emps = new Employee[] 
        {
            new Employee { Name = "John", Salary = 9 },
            new Employee { Name = "Paul", Salary = 8 },
            new Employee { Name = "George", Salary = 6 },
            new Employee { Name = "Ringo", Salary = 6 }
        };
        decimal minSalary = emps.Min(x => x.Salary);

        foreach(var e in emps.Where(e => e.Salary == minSalary))
            Console.WriteLine("{0} {1}", e.Name, e.Salary);
    }
} 
```

现场测试：http: [//ideone.com/BYjiW](http://ideone.com/BYjiW)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T13:22:21.220

这可以这样做：

```
var lowsalemp = from ee in emp where ee.empsalary == (from e in emp select e.empsalary).Min() select ee;
            foreach (var leastsalemp in lowsalemp)
            {
                Console.WriteLine(leastsalemp.empsalary);
            } 
```

# c++ - C++ 调用两次导致访问冲突

> ID：10268183
> 
> 赞同：0
> 
> 时间：2012-04-22T13:07:55.923
> 
> 标签：c++, access-violation

第一次尝试调用 that->getValue() 看起来不错，但只是下面的行（while 循环的头部）给了我 getValue 方法内的错误“访问冲突”。

```
if(first != 0){
  listElement *that = first;    

  cout << "add: " <<    that->getValue() << " | " << value  << endl; 

  while(that->getValue() < value) {..}
} 
```

我是否在任何地方通话期间编辑该值？get 方法仅包含“返回值”....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T13:11:20.353

显而易见的解释是，在这段代码中

```
while(that->getValue() < value) {..} 
```

在`{..}`你正在做的里面`that = that->next;`设置`that`为空指针。

您需要`that != NULL`在`while`循环中添加一个测试，以防止在没有找到符合搜索条件的项目的情况下到达列表末尾。

```
while(that != NULL && that->getValue() < value) 
```

如果您包含了所有代码，那会有所帮助，因为代码的关键部分似乎在代码`{..}`块中！

# eclipse - 将 WEB-INF/lib 添加到构建路径

> ID：10268185
> 
> 赞同：1
> 
> 时间：2012-04-22T13:08:32.990
> 
> 标签：eclipse, jakarta-ee

当我在 Eclipse 中创建一个新的 java EE 项目时，WEB-INF/lib 文件夹是否会自动添加到 java 构建路径中，还是我需要从项目属性中手动将其添加到构建路径中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T13:15:50.630

如果您在 Eclipse 中安装了 WTP（Web 工具平台），它会在您的项目创建为 Web 项目时自动添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T13:11:54.890

将自动添加：是的：

# python - 在哪里可以找到 build_tests 命令？

> ID：10268189
> 
> 赞同：0
> 
> 时间：2012-04-22T13:09:15.217
> 
> 标签：python, unit-testing, nose, distribute, python-2to3

当我阅读使用 tox 在多个 python 中测试一个包的示例时，我发现了一个`"build_tests"`将（`2to3`'d）测试文件放在`build/`目录中的命令。我也可以在一些项目的`tox.ini`文件和一些 gentoo ebuilds 中搜索它，但我仍然不知道哪个包安装了这个命令。我有 python 3.2，最后一个鼻子测试和最后一个分发，但`"python setup.py build_tests"`仍然给出错误。

那么我必须安装什么才能获得此命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:06:53.257

好的，我做了更多查找，我发现至少在鼻子中有一个添加此命令的自定义脚本。因此，如果我想对 py3k 进行测试，我可能不得不复制这个想法。

# jakarta-ee - Java-EE6：如何设计层之间传递的@Entity？

> ID：10268190
> 
> 赞同：1
> 
> 时间：2012-04-22T13:09:23.783
> 
> 标签：jakarta-ee, entity, 3-tier

我目前正在使用 Java-EE6（GlassFish 3.1.2、MySQL Server 5.1 和 Netbeans 7.1.1）开发 3 层应用程序。

该项目目前包括3个项目：

*   企业应用程序/EJB：控制数据库实体的外观
*   Java Class-Library：表示数据库模型的@Entity 注释类（该项目由 EE-app 和胖客户端共享，以便在层之间交换实体实例）
*   J2SE Fat-Client：服务器资源的 JNDI 查找（远程访问 EJB）

为了在创建/修改/删除实体时更新客户端的 GUI，我决定通过实现一个主题来使用 JMS，其中每个客户端在启动时订阅，并且 EJB 容器上的消息驱动 bean 充当发布者。

现在我面临以下大问题：

*   我将生命周期侦听器（@PostUpdate 等）附加到实体对象，然后它们应该将更新消息发布到订阅的客户端。实体类位于 class-lib 项目中，而发布者位于 EE-app 中。问题是，EE 应用程序引用了类库项目，但反之亦然（因为不允许循环项目引用）。因此，实体类中的生命周期回调方法在 EE-app 中的消息驱动发布者 bean 上没有引用。

这是一个与设计更相关的问题，因此问您这是否基本上是使用 Java-EE6 设计 3 层应用程序的正确方法？

如果可能，我想避免 DTO/DAO，以尽可能降低复杂性，并且应用程序不会产生繁重的网络流量。

提前感谢您的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:14:35.067

我通过在所有层之间直接传递@Entity 对象解决了这个问题。通过激活静态编织（使用 eclipse-link 作为 jpa 提供程序），我能够对重关系使用延迟获取。为了只从客户端获取特别重要的关系，我使用负载组来定义应该在通过网络序列化之前预获取的惰性关系，从而将实体与实体管理器分离。反之亦然，再次将实体发送到服务器，我只是在服务器端外观上使用 EntityManager.merge(T) 将实体恢复为托管状态。即使对于非常复杂的数据层次结构，这种设计也能正常工作。

# video-processing - 尝试使用 H264 对 HTTP 实时流进行编码

> ID：10268192
> 
> 赞同：0
> 
> 时间：2012-04-22T13:09:51.133
> 
> 标签：video-processing, video-encoding, http-live-streaming, xuggle

我正在尝试对媒体文件进行编码以用于 HTTP Live Streaming，但到目前为止还没有太多运气。当我使用 ICodec.ID.CODEC_ID_MPEG2TS 或 ICodec.ID.CODEC_ID_MPEG4 对流编码进行编码时，但使用 Apple 的验证工具时出现错误：

> 错误：（-12971）MPEG2 解析器损坏流（程序 1，轨道 257）错误：（-12971）未能将段解析为 MPEG-2 TS 或 ES

如果我将它们保存为 .mp4 而不是 .ts，那么它们会在 Quicktime 中播放（但不是 .ts）

如果我使用 ICodec.ID.CODEC_ID_H264 我在编码时收到以下错误：

> java.lang.RuntimeException: 无法打开流 com.xuggle.xuggler.IStream@-397916640[index:0;id:1;streamcoder:com.xuggle.xuggler.IStreamCoder@-397916528[codec=com.xuggle.xuggler. ICodec@-397916032[type=CODEC_TYPE_VIDEO;id=CODEC_ID_H264;name=libx264;];时基=1/25;帧率=0/0;像素类型=YUV420P;宽度=640;高度=360;];帧率： 0/0；时基：1/90000；方向：OUTBOUND；]：不允许操作

我对编码器有以下设置：

```
 coderSettings.width = 640;
        coderSettings.height = 360;
        coderSettings.bitRate = 700000;
        coderSettings.codec = ICodec.ID.CODEC_ID_H264;
        coderSettings.globalQuality = 75;
        coderSettings.sampleRate = 22050; 
```

我只是想知道我是否做错了什么。我不太了解视频编码，因此在尝试编码为 H264 时可能只是忘记了一个简单的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T19:45:57.967

新版本的 Xuggler 5.5 解决了该问题。但是，即使指定 H264 编码器（基于扩展名），它似乎也使用了 mpeg2ts 编码器。这会给 QT 和 iOS 设备带来问题。

直接使用 FFMPEG 可能会更好，因为有更多的控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:49:07.120

xuggler 是必需的吗？如果没有，可以使用 ffmpeg（xuggler 的基础）准备资产，例如使用[这些说明](http://www.ioncannon.net/programming/452/iphone-http-streaming-with-ffmpeg-and-an-open-source-segmenter/)。

# python - 禁用标准。和 Python 沙盒实现中的文件 I/O

> ID：10268193
> 
> 赞同：6
> 
> 时间：2012-04-22T13:09:51.650
> 
> 标签：python, file, io, sandbox, pypy

我正在尝试设置 Python 沙箱并希望禁止访问标准和文件 I/O。我正在运行的 Python 服务器中运行沙箱。

我已经看过像`RestrictedPython`和这样的模块`PyPy`；但是，我希望能够在我正在运行的 Python 服务器中编译沙箱代码，而不是通过外部进程。

是否有任何替代方法可以防止访问诸如`print`、`raw_input`或之类的命令`open`？上述模块是否可以用于在运行的 Python 程序中编译沙箱代码的方式？

在最坏的情况下，您将如何阻止访问`raw_input`？

编辑：根据[这个关于安全评估 Python 代码的教程](http://lybniz2.sourceforge.net/safeeval.html)，是否可以传入一个经过操作的**内置**模块？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T21:19:39.493

对此的粗略共识是，CPython 的复杂性和自省能力使得将解释器的某些部分列入黑名单的[尝试是不可靠的。](http://mail.python.org/pipermail/python-dev/2012-March/117175.html)我相信主要尝试之一是 tav 的[safelite](http://tav.espians.com/a-challenge-to-break-python-security.html)。[导致 CPython 崩溃](http://mail.python.org/pipermail/python-dev/2012-March/117339.html)也不是那么难，这为运行任意代码开辟了另一条路径。避免来自任意代码的资源耗尽或 CPU 使用 DoS 可能不可能在进程内进行（您需要看门狗、系统限制等）。

对于希望在 Python 中执行沙盒代码的人来说，关键是避免自己滚动（或简单地修改`sys`, `__builtins__`）：很容易说服自己它是坚如磐石的，但却错过了一些绕过保护的明显解决方法。请记住，Python 曾经包含一个提供这种保护的模块，甚至存在明显的问题，可以逃脱其限制。IIRC，它很容易将非受限对象（通过内省）钓鱼到受限环境中。

也就是说，[pysandbox](https://github.com/haypo/pysandbox)是由一位核心 Python 开发人员编写的，他认为它在限制例如 IO 时是安全的（并且它结合了许多以前的研究）并且可以像你想要的那样在进程内运行（尽管有一些更少的功能，比如 DoS CPU 和内存使用的保护）。

# gwt - 如何在 GWT 中创建接口的实例？

> ID：10268195
> 
> 赞同：0
> 
> 时间：2012-04-22T13:10:04.797
> 
> 标签：gwt

如何创建接口的实例？例子

```
@Connection(name="ClckCnt", version="1.0", description="Click Counter", maxsize=10000) 
public interface MyInterface extends DataService{

    @Update("CREATE TABLE IF NOT EXISTS clickcount ("
      + "id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, "
      + "clicked INTEGER)")
  void initTable(VoidCallback callback);

     @Update("INSERT INTO clickcount (clicked) VALUES ({when.getTime()})")
  void insertClick(Date when, RowIdListCallback callback);
}

public class WebApp implements EntryPoint{

    MyInterface myInterface = GWT.create(MyInterface.class);

    public void onModuleLoad(){

    }
} 
```

[我从gwt-html5-database 项目](http://code.google.com/p/gwt-mobile-webkit/downloads/list)中获得了这种示例。在这个项目中是一个示例应用程序，他们以相同的方式进行操作，但它不起作用。有人有想法吗？问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T13:38:56.967

请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDeferred](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDeferred)

您可以提供具体的实现并根据某些属性（例如，包括用户代理和/或语言环境）选择要使用的实现，或者使用生成器。您可以将两者结合起来：在某些情况下使用具体实现，在另一种情况下使用生成器，具体取决于属性。

# c++ - ostream 运算符重载

> ID：10268200
> 
> 赞同：1
> 
> 时间：2012-04-22T13:11:06.870
> 
> 标签：c++, operator-overloading

我有一个名为 Dollars 的课程

```
 class Dollars
    {
    private:
            int dollars;
    public:
    Dollars(){}
    Dollars(int doll)
    {
            cout<<"in dollars cstr with one arg as int\n";
            dollars = doll;
    }
    Dollars(Cents c)
    {
            cout<<"Inside the constructor\n";
            dollars = c.getCents()/100;
    }
    int getDollars()
    {
            return dollars; 
    }
    operator int()
    {
            cout<<"Here\n";
            return (dollars*100);
    }

    friend ostream& operator << (ostream& out, Dollars& dollar)
    {
            out<<"output from ostream in dollar is:"<<dollar.dollars<<endl;  
            return out;
    }
    };

    void printDollars(Dollars dollar)
    {
            cout<<"The value in dollars is "<< dollar<<endl;
    }

    int main()
    {
            Dollars d(2);
            printDollars(d);
            return 0;
    } 
```

在上面的代码中，如果我删除了重载的 ostream 运算符，那么它将转到

```
 operator int()
    {
            cout<<"Here\n";
            return (dollars*100);
    } 
```

但是在提供 ostream 重载时，它不会去那里。

我的困惑

`Why isn't there any return type for operator int() function as far as my understanding says that all functions in C++ should have a return type or a void except the constructors.`

我可以在那里提供一些用户定义的数据类型而不是 int 吗？

在什么情况下我应该使用这个功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T13:20:11.717

这种类型的运算符称为[*转换函数*](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Fcplr385.htm)。在您的情况下，它从 转换`Dollars`为`int`。该语法是标准的，您不能指定返回类型（您已经说明了类型）。

如果需要，您可以为自定义类型创建转换运算符。你可以有：

```
operator Yen() { ... }
operator Euro() { ... } 
```

然后可以使用这些函数将 of 的实例`Dollar`隐式转换为 a `Yen`or `Euro`，而无需强制转换（或`Dollar`在`Yen`or`Euro`类中采用 a 的构造函数）。

来自“C++03”标准（§12.3.2/2）的示例：

```
class X {
 // ...
 public:
 operator int();
};

void f(X a)
{
 int i = int(a);
 i = (int)a;
 i = a;
} 
```

C++11 允许将转换函数标记为*显式*。在这种情况下，仅在直接初始化期间才考虑转换函数。（这通常是避免意外转换的好方法，尤其是对于基本类型。）标准中的示例是（§12.3.2/2）：

```
class Y { };
struct Z {
 explicit operator Y() const;
};

void h(Z z) {
 Y y1(z);     // OK: direct-initialization
 Y y2 = z;    // ill-formed: copy-initialization
 Y y3 = (Y)z; // OK: cast notation
} 
```

（并且 C++11 声明转换函数不能声明为*static*。）

# c++ - 子类不继承祖父母属性

> ID：10268205
> 
> 赞同：2
> 
> 时间：2012-04-22T13:11:35.433
> 
> 标签：c++

我有以下 C++ 代码：

```
#include <iostream>
#include <string>
using namespace std;

class Surface
{
public:
    virtual void draw();
protected:
    int x,y;
};

class Control: public Surface
{
public:
    Control(): x(10), y(10), name("control") { cout << "Control constructor" << endl; }
    void draw() {}
protected:
    string name;
};

class Label: public Control
{
public:
    Label(): x(10), y(10), name("label"), text("label") { cout << "Label constructor" << endl; }
    void draw() { cout << "drawing a label" << endl; }

protected:
    string text;
};

int main(int argc, const char *argv[])
{
    Label l;
    return 0;
} 
```

尝试编译时，出现以下错误：

```
$ g++ main.cpp
main.cpp: In constructor 'Control::Control()':
main.cpp:16:16: error: class 'Control' does not have any field named 'x'
main.cpp:16:23: error: class 'Control' does not have any field named 'y'
main.cpp: In constructor 'Label::Label()':
main.cpp:25:14: error: class 'Label' does not have any field named 'x'
main.cpp:25:21: error: class 'Label' does not have any field named 'y'
main.cpp:25:28: error: class 'Label' does not have any field named 'name' 
```

我不明白为什么不`Control`继承`Label`s`Surface`属性？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-22T13:21:57.037

继承的成员不能出现在成员初始化列表中。试想一下，它们怎么会出现在派生类的成员初始化列表中，因为当它被执行时，它们（即基类成员）已经被创建*（回想一下，基子对象是在派生类构造函数和成员之前创建的） -初始化列表）*。

如果它被允许，那么这将意味着基类成员将被允许多次*初始化，这是没有意义的。*在 C++ 中，对象不会多次*初始化*^(1 。)初始化只发生一次；分配可以发生多次。

编写该代码的正确方法是参数化基类构造函数，并将`x`和`y`作为参数传递给基类构造函数。

^(1\. 我的意思是*动态初始化*只发生一次。但是，一个对象**可以被**初始化两次：一次在编译时称为*静态*初始化，另一次在运行时称为动态初始化。有关更多信息，请参阅：[什么是 c++ 中对象的动态初始化？](https://stackoverflow.com/questions/5945897/what-is-dynamic-intialization-of-object-in-c))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T13:22:39.907

您的构造函数可以重写为（只是一个伪代码来说明这一点，这不会编译）：

```
Control(): Surface::x(10), Surface::y(10), name("control") { 
cout << "Control constructor" << endl; 
} 
```

因此，您将初始化变量，这些变量已经（或可能）在您的父类中初始化。您不能两次初始化变量。`x`但是，您可以为and分配新值`y`：

```
Control(): name("control") { 
cout << "Control constructor" << endl; 
/*Surface::*/x = 10;
/*Surface::*/y = 10;
} 
```

或者你可以创建一个构造函数`Surface(int x, int y)`并在那里传递你的 x 和 y ：

```
Control(): Surface(/*x=*/10, /*y=*/10), name("control") { 
cout << "Control constructor" << endl; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T13:26:34.397

如果您为基类定义了适当的参数化构造函数来负责初始化它们自己的字段，那么您的问题将不复存在。把它留给子类是糟糕的设计。所以你的代码可以重写为：

```
class Surface
{
public:
    Surface(int x_, int y_): x(x_), y(y_) { cout << "Surface constructor" << endl; }
    virtual void draw();
protected:
    int x,y;
};

class Control: public Surface
{
public:
    Control(int x_ = 10, int y_ = 10, string name_ = "control")
        : Surface(10, 10), name(name_) { cout << "Control constructor" << endl; }
    void draw() {}
protected:
    string name;
};

class Label: public Control
{
public:
    Label(): Control(10, 10, "label"), text("label") { cout << "Label constructor" << endl; }
    void draw() { cout << "drawing a label" << endl; }

protected:
    string text;
}; 
```

# f# - f# fibbonaci 高效算法

> ID：10268207
> 
> 赞同：0
> 
> 时间：2012-04-22T13:11:47.887
> 
> 标签：f#, fibonacci

这是计算斐波那契数的 2 个函数，它们都可以正常工作，但以不同的方式编写。

您认为哪一个更好、更高效、代码更易于理解？

```
let fibe n =
    let rec loop acc1 acc2 n = 
        match n with
        | n when n = 0I -> acc1        
        | x -> loop acc2 (acc1 + acc2) (x - 1I)
    loop 0I 1I n

let myfib n =
    if n = 0I then 0I
    else if n = 1I then 1I
    else
    let rec loop i f s = 
        match i with 
        | x when x = n -> f+s 
        | x when x < n -> loop (i+1I) s (s+f)        
    loop 2I 0I 1I 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:19:37.833

说到清晰度，您的两个功能 IMO 都没有必要杂乱无章，并且为此目的使用了不充分的语言机制。

生成斐波那契非常适合通过 表示`unfold`，如下所示：

```
let fibnum n =
    let fibnums = Seq.unfold (fun (current, next) -> 
                Some(current, (next, current+next)))(0I,1I)
    fibnums |> Seq.nth n 
```

你如何使它更短更清晰？

**更新**：由于问题的作者认为与具有序列号的斐波那契成员一起操作的能力`bigint`同样重要，因此上述代码段绝对可以用于此要求，尽管变得不那么简单：

```
let fibnum bigN = 
    let fibnumsI =
        ((0I,0I),(1I,0I))
        |> Seq.unfold (fun ((current, idx), (next, idx)) ->  
            Some((current, idx),((next, idx + 1I), (current+next, idx + 1I))))
    fibnumsI |> Seq.skipWhile (fun (x,i) -> i < bigN) |> Seq.head |> fst 
```

# php - ajax + php 正确错误处理的另一个建议

> ID：10268210
> 
> 赞同：1
> 
> 时间：2012-04-22T13:11:57.743
> 
> 标签：php, jquery

$.ajax 有两个返回值：成功和错误。
如果 $.ajax 调用一个 php 模块，如何将响应发送到成功和错误？
例如：
如果这行代码返回错误：

```
$connection = mysql_connect($server,$user,$password); 
```

如果 php 模块的执行正确，我想在 ajax-error 中收到错误，
然后我想在 ajax-sucess 中收到一条消息
如果我从 PHP 发送 echo "message" 我总是在 ajax-success 中收到消息我有义务测试什么是成功，什么不是！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T13:20:52.920

来自[jQuery ajax 文档](http://api.jquery.com/jQuery.ajax/)：

> *error(jqXHR, textStatus, errorThrown)***请求失败**
> 时调用的函数。...

 **在服务器端，请求已经成功。通常，结果回调将是成功处理程序，而不是错误处理程序。

您应该在 ajax-success 处理程序中处理 mysql_connect 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T13:22:54.023

我认为只有当*ajax*调用不起作用时，ajax 错误回调才会返回错误，而不是在你的（成功'ajaxed'）*脚本*中的某些东西（如你的情况下的 sql 命令）不起作用的情况下。

但是，要处理来自 ajax 成功回调函数中数据的 sql 错误，您可以解析返回的数据。我的意思是你可以在你的脚本输出中创建一个 id='sql_error' 的 div，然后读取这个 div 的内容。如果没有 sql 错误，那么您的错误 div 的内容必须为零。

像这样的东西，也许（未经测试）：

```
$.get(url, function (data) {
    var sql_error = $("#sql_error", data).html(); 
    // or var content = $("#error", $(data)).html();

    // you can then show output in the way you want, depending on sql_error
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T06:05:06.863

试试这个....（经过测试）。在服务器端错误的条件中使用它。

```
header('403 Forbidden', true, 403);
die('forbiden to log in. No authorization'); 
```

这将唤起错误函数。根据您的需要放置状态代码和消息。**

# asp.net - 使用成员资格提供程序 asp.net 4.0 更改 CreateUserWizard 控件的字段映射

> ID：10268215
> 
> 赞同：0
> 
> 时间：2012-04-22T13:12:35.187
> 
> 标签：asp.net, membership, login-control

我在 asp.net 4.0 中使用 CreateUserWizard Control 和成员资格提供程序。

在这种情况下，用户名存储在 aspnet_Users 表的“用户名”字段中。

我想在 aspnet_Membership 表的电子邮件字段中保存“用户名”字段（在我的情况下，用户名也是电子邮件）； ***换句话说，我想更改这些字段的映射。***

我怎样才能做到这一点？

**注意：我的问题是如何更改映射。以上是唯一的例子**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:43:40.700

您可以通过调用 CreateUser 方法而不是使用 CreateUserWizard 轻松实现。

```
<asp:TextBox ID="EmailTextBox" runat="Server" />
<asp:TextBox ID="PasswordTextBox" runat="Server" />
<asp:TextBox ID="PasswordQuestionTextBox" runat="Server" />
<asp:TextBox ID="PasswordAnswerTextBox" runat="Server" />

string username = EmailTextBox.text; // Same as email
string password = PasswordTextBox.text;
string email = EmailTextBox.text;
string passwordQuestion = PasswordQuestionTextBox.text;
string passwordAnswer = PasswordAnswerTextBox.text;
bool isApproved = true;

MembershipCreateStatus status;

MembershipUser membershipUser = System.Web.Security.Membership.CreateUser(username, password, email, passwordQuestion, passwordAnswer, isApproved, out status);

if (status != MembershipCreateStatus.Success)
   throw new Exception(status.ToString()); 
```

# .net - SQLite：BLOB 用于存储大文件？

> ID：10268217
> 
> 赞同：1
> 
> 时间：2012-04-22T13:12:53.767
> 
> 标签：.net, vb.net, sqlite, large-files

我想在 sqlite 数据库中存储大文件（超过 100mb）。我注意到，它的性能不好。我必须将文件存储在本地文件夹中，还是必须重写我的代码？

```
 Shared Sub BlobToFile(ByVal Blob As Byte(), ByVal file As String)
        Dim MyData() As Byte = Blob
        Dim K As Long
        K = UBound(MyData)
        Dim fs As New FileStream _
         (file, FileMode.Create, _
          FileAccess.Write)
        fs.Write(MyData, 0, K)
        fs.Close()
        MyData = Nothing
        K = Nothing
    End Sub
    Shared Function FileToBlob(ByVal Filepath As String) As Byte()
        Dim fs As New FileStream _
     (Filepath, FileMode.Open, _
      FileAccess.Read)
        Dim MyData(fs.Length) As Byte
        fs.Read(MyData, 0, fs.Length)
        fs.Close()
        Return MyData
    End Function
'Then I Do this:
Dim x As New Sqliteparameter With {.Name ="@file", .value=Filetoblob("C:\Testfile.zip"), .DbType.Binary}
Dim y As New SqliteCommand With {.Commandtext = "INSERT INTO FILES(File) Values(@file);"}
y.Parameters.add(x)
y.Executenonquery() 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T14:18:22.637

通常最好的做法是不要将大文件存储在数据库中，除非有对它的支持，例如 mssql 服务器。我建议只查看将文件的位置存储在数据库中并将文件存储在某种文件系统中。

# python - VBScript 到 Python 代码段的转换

> ID：10268219
> 
> 赞同：2
> 
> 时间：2012-04-22T13:13:02.113
> 
> 标签：python, com, vbscript

我正在尝试将此**VBScript**代码转换为**Python** (Win32) 代码，但没有运气！

```
Dim objMain, objSysInf, stMsg

Set objMain = CreateObject("nnetcom.oMain")

Call objMain.UnlockComponent("xxx-xxxxx-xxxxx-xx")

Set objSysInf = CreateObject("nnetcom.oSystemInfo")

Call objSysInf.GetSystemInfos

stMsg = objSysInf.cOsName & " " & objSysInf.cOsType & vbCrLf & _
        objSysInf.cOsCpu & vbCrLf & objSysInf.cOsMem & vbCrLf & _
        objSysInf.cOsGpu

MsgBox stMsg, vbInformation, "System Information"

Set objSysInf = Nothing
Set objMain = Nothing 
```

**我正在运行安装了Python 2.7.3**和**Python for Windows Extensions**的 Windows 7 32 位。此外，我通过从... **“Lib\site-packages\win32com\client\”**执行**“makepy.pyc”**添加了 COM 对象，但没有运气，总是收到一些错误消息...

 **这是我的 Python 代码：

```
import pythoncom
import win32com.client

objMain = win32com.client.Dispach("nnetcom.oMain")

ret = objMain.UnlockComponent("xxx-xxxxx-xxxxx-xx")

objSysInf = win32com.client.Dispach("nnetcom.oSystemInfo")

objSysInf.GetSystemInfos()

stMsg = objSysInf.cOsName

print(stMsg) 
```

有没有人可以帮助我进行这次谈话？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T13:32:19.940

`Dispach`应该是`Dispatch`。**

# python - 为 checkboxSelectMultiple 提供值

> ID：10268220
> 
> 赞同：1
> 
> 时间：2012-04-22T13:13:05.733
> 
> 标签：python, django

问题是我无法使用已通过视图中的实例选择和转发的选项值填充我的 checkboxSelectMultiple 小部件。

这些是相关的类：

看法：

```
if sid and request.method != "POST":
    try:
        obj = Service.objects.get(pk=int(sid), user=request.user.pk)
        form = addNewService(instance=obj)
    except:
        return HttpResponseRedirect("/") 
```

形式：

```
class addNewService(forms.ModelForm):
    pk = forms.HiddenInput()
    authorities = forms.ModelMultipleChoiceField(queryset=authorities.objects.all(), widget=forms.CheckboxSelectMultiple, required=True)
    error_css_class = 'error'
    required_css_class = 'required'
    #organisation_logo = forms.ImageField()
    class Meta:
        model = Service
        #exclude = ("user",)
        fields = (  'service_name',
                    'category',
                    'service_duration',
                    'price',
                    'bursarie',
                    'vat_included',
                    'travelExpensesIncluded',
                    'authorities',
                    'type_of_delivery',
                    'description',
                    'active',
                    ) 
```

模型：

```
class Service(models.Model):
    user = models.ForeignKey(User)
    service_name = models.CharField(max_length=30)
    description = models.TextField()
    category = models.ForeignKey(Category)
    authorities = models.ManyToManyField(authorities)
    active = models.BooleanField()

    def removeServiceURL(self):
        return "/Services/Remove/%s"%self.pk

    def __unicode__(self):
        return "%s @ %s"%(self.service_name, self.user.username) 
```

复选框相应地显示，但是当我从一个实例打开表单时，除了复选框之外，所有内容都正确填写，这些复选框都未选中。

我究竟做错了什么？

谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:24:34.140

尝试：

```
def your_view(request, sid=None):
    if sid and request.method == "GET":
        try:
            obj = Service.objects.get(pk=sid, user=request.user)
            form = addNewService(instance=obj)
        except Service.DoesNotExist:
            return HttpResponseRedirect("/")

#rest of view 
```

你不想在你的 try/except 中吞下所有的异常。检查您正在处理的特定异常；它使调试更容易。此外，在您的查询集中，您试图在主键上匹配用户，但将其与对象进行比较：如果您想在 pk 上进行匹配，请执行以下操作：`user__id=request.user.id`但是，如果用户是匿名的，这将失败。

# c - OpenGL - 如何从中心缩放对象？

> ID：10268221
> 
> 赞同：0
> 
> 时间：2012-04-22T13:13:20.470
> 
> 标签：c, opengl, glut

我的 .c 程序使用 glut 创建了一个对象并将纹理映射到该对象上。然后用户可以操作该对象。当对象按比例放大然后按比例缩小时，它会移出窗口并移出视野。我如何确保对象在缩放时保持居中或替代不能移出窗口？如果需要，我可以包含我的代码。

我在想，如果我总是从对象的中心缩放，这会有所帮助，但不确定如何做到这一点，因为它似乎总是从角落缩放，导致它移出屏幕

好的，所以图像最初似乎是从中心缩放的，但是当图像被翻译后，之后的任何缩放都会导致它移动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T13:18:16.837

为此，您需要在对象和窗口边缘之间创建碰撞检测算法。如果屏幕上对象的边缘或像素碰到窗口的边缘，则不应再进一步。

网上有很多关于这方面的资料，我相信你可以找到一些例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T13:21:00.517

听起来好像缩放操作没有从对象中心位置缩放对象，这将导致对象远离其原点。

确保在任何转换*之前执行缩放操作。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T13:45:19.757

对象是一组点。例如，如果它们的所有坐标都是正的，则缩放看起来像是从角落完成的。为了防止这种情况，您需要自己进行一些翻译。

```
glScaled(...);
glTranslated(/*-1 * center coordinates relative to the object*/);
//draw the object 
```

请注意，使对象居中的方法不止一种。最简单的一种是找到边界框的中心。

# javascript - jQuery 检查复选框并触发 javascript onclick 事件

> ID：10268222
> 
> 赞同：26
> 
> 时间：2012-04-22T13:13:29.270
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 检查复选框并在此过程中触发 onclick 事件。

假设我在 html 中定义了一个复选框：

```
<input type="checkbox" value="checked" name="check1" onclick="alert(this.value);"> 
```

我有一个在函数中触发的 jQuery 语句：

```
$('input[name=check1]').attr('checked', true); 
```

结果是复选框被选中，但没有触发 javascript onclick 事件（因此没有警报）。但是，如果我要手动触发点击：

```
$('input[name=check1]').attr('checked', true).trigger('click'); 
```

结果是复选框被选中，javascript onclick 事件被触发（并且值被正确获取）但之后复选框被取消选中。

谁能告诉我如何实现我想要做的事情？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-22T13:15:05.200

使用`.triggerHandler()`代替`.trigger()`：

```
$('input[name=check1]').attr('checked', true).triggerHandler('click'); 
```

此外，使用`.prop()`代替`.attr()`：

```
$('input[name=check1]').prop('checked', true).triggerHandler('click'); 
```

（如果您使用的是 jQuery 1.6 或更新版本。）*编辑*——另外，正如我在另一个答案中评论的那样，当以编程方式触发事件时，您必须注意 jQuery 的怪异行为。[这是一个说明性的jsfiddle。](http://jsfiddle.net/Pointy/nrYec/) 当元素上发生真正的“点击”时，该元素的“点击”处理程序将看到“已检查”标志的更新值。也就是说，如果您单击未选中的复选框，则单击处理程序将看到“已选中”标志设置为`true`. 但是，如果您通过 jQuery 在未选中的复选框上触发“单击”，“单击”处理程序将看到“选中”标志设置为`false`！在我看来，这是一件非常糟糕的事情，但它总是这样做。

*再次编辑*——哦，还有，我忘记了另一个重要的（也很烦人的）jQuery 怪事：由于未知的原因，`.triggerHandler()`API 只会在第*一个匹配的元素*上调用处理程序。如果您尝试触发所有复选框“单击”处理程序，换句话说：

```
$('input:checkbox').triggerHandler('click'); 
```

那么只会触发页面上的第一个复选框。为了处理这种精神错乱，我通常做的是将处理程序与我自己的假事件名称以及“点击”绑定：

```
$('input:checkbox').bind('click my-click', function() ... ) // or ".on()" with 1.7 
```

这样我就可以触发“我的点击”并获得两全其美：库触发*所有*匹配元素的处理程序，但它不会切换元素的实际状态。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-22T13:15:30.340

改变：

```
$('input[name=check1]').attr('checked', true).trigger('click'); 
```

至：

```
$('input[name=check1]').trigger('click').prop('checked', true); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T13:25:44.367

[这个答案](https://stackoverflow.com/a/7387583/908879)似乎工作正常：

`$('input[name=check1]').attr('checked', true).change();`

[jsFiddle 演示](http://jsfiddle.net/NRPSA/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-07T20:17:37.043

`.on('changed', ...)`绝对是您应该在复选框元素上绑定的内容（它的行为更加合理。然后您可以手动触发`.click()`要切换状态的元素上的 a 以查看正确的事件触发发生（并查看匹配中的 DOM说明那些处理程序也看到的内容）。

```
<input type="checkbox" value="checked" name="check1">
<script>
    $('input').on('change', function(e) {alert(e.target.value);});
    $('input').click();
    // see the alert, and if you checked $(e.target).is(':checked') you should get true
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-29T13:11:23.640

点击选中..再次点击取消选中..
这是这个的逻辑

```
$('input[name=check1]').prop('checked',!$('input[name=check1]').prop('checked')); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-23T00:21:48.587

只是其他帖子的插件，因为我无法发表评论。我发现我必须为道具使用字典。

IE

`$('input[name=check1]').prop({'checked' : !$('input[name=check1]'}).prop('checked'));`

# facebook - Facebook“Like Box”：如何使其与我的 Facebook 页面 URL 一起使用？

> ID：10268223
> 
> 赞同：0
> 
> 时间：2012-04-22T13:13:30.503
> 
> 标签：facebook, facebook-likebox

我想使用 Facebook 的“Like Box”社交插件，可以在这里获取代码：

[http://developers.facebook.com/docs/reference/plugins/like-box/](http://developers.facebook.com/docs/reference/plugins/like-box/)

但是，当我使用我的 Facebook 页面的 URL 填充标题为“Facebook 页面 URL”的字段时，我会收到一条错误消息，而不是应该显示“Like Box”预览的位置。错误信息是：

“无法检索指定页面的 id。请验证是否传入了正确的 href。”

当在浏览器中导航到我的 Facebook 个人资料时，我输入的 URL 与地址栏中显示的完全相同。这与我在 Facebook 上的隐私设置有关吗？如果有，特别是哪一个？我不想摆弄所有这些，而且我似乎找不到一个明确地说“允许外部网站使用插件连接到您的个人资料”之类的东西。

提前感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T13:17:05.277

您不能为 facebook 个人资料添加点赞按钮，它仅适用于页面。你有没有喜欢过某人的个人资料？

# html - iFrame 未加载 URL

> ID：10268226
> 
> 赞同：25
> 
> 时间：2012-04-22T13:14:15.853
> 
> 标签：html, iframe

我正在使用以下简单的 iFrame 代码来加载 Yahoo，但无论如何它都没有加载。在 Chrome Inspector 中，我首先看到 URL 状态为 301，然后取消。知道为什么会这样吗？

```
<iframe name="iframe1" src="http://yahoo.com"></iframe> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-22T13:19:44.680

您可能会在日志中收到一条错误消息，内容如下：

`"Refused to display document because display forbidden by X-Frame-Options."`

要回答您的问题：

雅虎这样做是为了`avoid clickjacking attacks, by ensuring that their content is not embedded into other sites.`

有关更多信息，请阅读： [https ://developer.mozilla.org/en/The_X-FRAME-OPTIONS_response_header](https://developer.mozilla.org/en/The_X-FRAME-OPTIONS_response_header)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-22T13:39:10.650

如果您在使用简单 javascript 的 iframe 中，也很容易要求网站不要加载。例如，推特就是这样做的

```
<script type="text/javascript">
//<![CDATA[
    if (window.top !== window.self) {
        document.write = "";
        window.top.location = window.self.location;
        setTimeout(function () {
            document.body.innerHTML = '';
        }, 1);
        window.self.onload = function (evt) {
            document.body.innerHTML = '';
        }; 
    }
//]]>
</script> 
```

我在这里没有看到控制台错误，所以我想这里就是这种情况。

雅虎！JavaScript 被混淆了，但你可以看到他们肯定在这个片段中删除了一些东西。（代码取自雅虎网站）

```
if(self!==self.top){b=function(){if(g.readyState=="complete"){f.remove(g,e,b); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-01-10T17:43:55.460

如果托管网页的站点强制使用安全`HTTPS`连接，则某些浏览器（当然是 chrome）将要求同时使用所有网络资源`HTTPS`。

当前 iframe 中的 URL 使用的是 HTTP`src="http://yahoo.com"`

**尝试使用 HTTPS：`src="https://yahoo.com"`**

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-14T13:45:30.123

实际上 yahoo 、 google 和这样的网站不允许 iframes 进入他们的网站。他们阻止 iframe 显示他们的网站

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-30T16:22:18.897

当父级未加密时，我最新的 Firefox 默默地拒绝加载未加密的 iframe。它没有显示有关尝试加载孩子或任何不尝试这样做的理由的控制台消息。

# java - 线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException: 0 尝试将字符串与 Hangman 游戏中的字符串数组进行比较时

> ID：10268229
> 
> 赞同：0
> 
> 时间：2012-04-22T13:14:46.440
> 
> 标签：java, arrays, swing, netbeans

我正在用 Java 为大学课程制作一个 Hangman 游戏，但我的代码有问题。我已经让它运行并打开，但是当我在文本框中输入一个字母进行猜测时，我收到了这个错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 0
at hangman.HangmanFrame.guessButtonActionPerformed(HangmanFrame.java:164)
at hangman.HangmanFrame.access$000(HangmanFrame.java:14)
at hangman.HangmanFrame$1.actionPerformed(HangmanFrame.java:75)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
at java.awt.Component.processMouseEvent(Component.java:6290)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
at java.awt.Component.processEvent(Component.java:6055)
at java.awt.Container.processEvent(Container.java:2039)
at java.awt.Component.dispatchEventImpl(Component.java:4653)
at java.awt.Container.dispatchEventImpl(Container.java:2097)
at java.awt.Component.dispatchEvent(Component.java:4481)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4575)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4236)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4166)
at java.awt.Container.dispatchEventImpl(Container.java:2083)
at java.awt.Window.dispatchEventImpl(Window.java:2482)
at java.awt.Component.dispatchEvent(Component.java:4481)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:648)
at java.awt.EventQueue.access$000(EventQueue.java:84)
at java.awt.EventQueue$1.run(EventQueue.java:607)
at java.awt.EventQueue$1.run(EventQueue.java:605)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
at java.awt.EventQueue$2.run(EventQueue.java:621)
at java.awt.EventQueue$2.run(EventQueue.java:619)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:618)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

根据列表中的第一个错误，我怀疑它与这段代码有关：

```
 do
    {
        if (playerGuess.equals(arrayToGuess[c]))
        {
            correct = true;
            lettersToGet[c] = playerGuess;
        }

        c++;
    }
    while (c < 6);

    c = 0; 
```

进一步来说：

```
if (playerGuess.equals(arrayToGuess[c])) 
```

我不知道这有什么问题，因为这是我第一次使用字符串数组并将数组每个部分中的字符与用户输入的字符进行比较。希望有人可以提供帮助。如果您需要更多信息，请告诉我，我会尽快回复您。我还创建了一个短期 Pastebin，因此可以查看整个代码以帮助发现问题：[Pastebin Link](http://pastebin.com/xg40gvPM)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T13:45:02.720

您的问题出在`split`方法上-它用 reqexp 拆分字符串，而 dot 具有特殊含义，您必须设置

```
 String breaker = "[.]"; 
```

或者

```
 String breaker = "\\."; 
```

顺便说一句：如果您需要获取字符串的第 i 个字符，您可以使用`s.charAt( i )`并且不需要拆分 ;-)

# android - 更新 ADT ？（Eclipse）

> ID：10268230
> 
> 赞同：1
> 
> 时间：2012-04-22T13:14:52.097
> 
> 标签：android, eclipse, adt

我已将我的 android SDK 和 ADT 更新为 18 。但是每当我启动 Eclipse 时，它​​都会显示“您的 16 版本的 sdk 版本将其更新到 17 或更高版本。有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T13:04:39.073

基本上，您需要做的就是打开“帮助”>>“安装新软件”>>检查是否有用于更新 ADT 站点的 URL 条目。

查看完整的解决方案 [如何在 Eclipse 中更新我的 ADT？](https://stackoverflow.com/questions/12634568/how-can-i-update-my-adt-in-eclipse/17677199#17677199)

# regex - PL/SQL Reg Exp 在字符串中找到数字

> ID：10268231
> 
> 赞同：1
> 
> 时间：2012-04-22T13:14:54.353
> 
> 标签：regex, oracle

此行应该只检查 test_data 表中的 c1 字符串，如果没有数字，则整个 c1 字符串显示在 result1 列中。我尝试自行测试这部分，但它似乎不起作用。

任何人都可以帮忙吗？表和列都已创建，只是没有提供我需要的结果。结果似乎是随机的：一些带数字的字符串被插入，而一些则没有。

```
SELECT case WHEN REGEXP_Instr(c1, '[:digit:]')=0 
            THEN c1
      end result1
FROM test_data; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T17:01:07.580

使用`[[:digit:]]`而不是`[:digit:]` POSIX 字符类只能在括号内使用。

```
SELECT
    case WHEN REGEXP_Instr(c1, '[[:digit:]]')=0 THEN c1 end result1
    ,c1
FROM
(
    select 'asdf' c1 from dual union all
    select '1234' c1 from dual union all
    select 'as1234df' c1 from dual
) test_data; 
```

# asp.net-mvc - 像stackoverflow这样的赞成-反对票验证？

> ID：10268235
> 
> 赞同：1
> 
> 时间：2012-04-22T13:15:22.967
> 
> 标签：asp.net-mvc, validation, client-side

我想在 asp.net mvc 中制作像 stackoverflow 这样的 upvote-downvote 面板。如果它被所有者赞成，我想显示警告窗格。我正在使用 EF。这是我的行动链接。

```
<a href='@Url.Action("Upvote", "Author")'>
     <img src='@Url.Content("~/Images/upvote.png")' width="20" height="20" />
</a> 
```

我可以在客户端或任何地方验证它吗？在客户端，我有从中发布的用户 ID。我想获得使它被投票的用户ID。逻辑是什么？

我无法编写更多示例代码，因为我不知道该怎么做。对不起我的英语不好。另外，如果不清楚，任何人都可以编辑我的问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T13:34:35.967

您也可以在页面上使用当前登录的用户 ID，但由于您必须在服务器上再次验证它，为什么不让服务器处理它呢。如果您没有使用 AJAX 来记录投票（为什么不使用），那么只需进行检查并在视图中呈现一条消息，指出为什么没有记录投票。如果您使用的是 AJAX（对您有好处），则让投票记录操作返回一些 JSON，其状态表明未记录投票以及原因，然后在对话框中显示消息。

在后一种情况下，您可能希望使用数据属性来记录一些信息，以便更轻松地形成 AJAX 请求。

```
<a href='@Url.Action("Upvote", "Author")' data-vote-type="up" class="vote-button">
     <img src='@Url.Content("~/Images/upvote.png")' width="20" height="20" />
</a>

$('.vote-button').on('click', function() {
    var $this = $(this),
        href = $this.attr('href'),
        voteType = $this.data('vote-type');
    $.post(href,{ "voteType": voteType }, function(result) {
         if (!result.Success) { // failed, show message
             $('<div title="error"><p>' + result.Message + '</p></div>')
                  .dialog({
                     autoOpen: true,
                     modal: true,
                     resizable: false,
                     ...
                  });
         }
         else { // mark vote as recorded
            $('.vote-button').removeClass('active');
            $this.addClass('active');
         }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T13:17:44.917

您可以在源中的某处嵌入当前登录的用户 ID：

```
<html data-user-id="@CurrentUser.Id">

var me = $('html').data('user-id'); 
```

# django - Django存储惰性翻译

> ID：10268246
> 
> 赞同：0
> 
> 时间：2012-04-22T13:17:26.663
> 
> 标签：django, translation

在尝试实现网站的翻译版本时，我遇到了以下问题：

假设我有一个这样定义的模型：

```
class Model(models.model)
    name=models.CharField(max_length=10)
    ... 
```

为了创建一些数据（稍后显示在网页上），我使用了一个特殊的视图，其中包括以下行：

```
Model.objects.create(name = "testName",...) 
```

我尝试使用以下代码实现翻译：

```
Model.objects.create(name = _("testName"),...) 
```

如果我 import `ugettext`as `_`，它只是将“testName”的翻译值放入数据库中。如果我导入`ugettext_lazy`为`_`，我有一个`InterfaceError`（更准确地说是`Error binding parameter X - probably unsupported type`.

我想知道如果我必须找到一些解决方法，是否可以进行这样的初始化。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:33:35.423

只需将英文版本存储在数据库中，并且仅在输出期间调用 ugettext/_lazy。这显然只有在存在这些字符串的翻译时才有效，否则它将以任何方式显示英文版本......</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T13:39:47.757

`ugettext`并`ugettext_lazy`用于静态 I18N 翻译。它们应用于代码中的可翻译文本，以将文本收集到`.po`文件中，最后收集到文件中`.mo`。
通常对于动态文本，您需要通过 Django ORM 在 DB 中创建翻译模式，并在 Django Admin 等视图中编辑翻译。然后在您看来，根据请求的语言显示正确的翻译版本。
您可以通过酸洗将其“存储”`ugettext_lazy` `__proxy__`到数据库中，并且可以解开并应用`unicode`它以获取翻译。但是，IMO，将文字从代码存储到数据库毫无意义。

如果您想要通过 Web 界面管理的基于 po 的翻译解决方案，请参考[https://github.com/mbi/django-rosetta](https://github.com/mbi/django-rosetta)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T16:53:15.920

只需添加它以防有人需要它。

这是我发现实现 Florian 解决方案并避免`_`每次都需要添加/删除函数的最佳方式。您将在包含字符串的文件中定义一个虚拟函数：

```
def _(input):
     return input 
```

这样，您的字符串将以原始语言存储，但`makemessages`仍将像需要翻译的字符串一样处理它们，从而将它们放入`.po`文件中。你只需要`{% trans %}`在 html 中使用块。

# r - AMORE - 两个输入变量的“与老师”的神经网络训练

> ID：10268247
> 
> 赞同：1
> 
> 时间：2012-04-22T13:17:28.380
> 
> 标签：r, neural-network

我有一个非常愚蠢的问题，但这仍然是一个问题。结果，我想用两个输入数据集“P1”、“P2”和“T”训练一个神经网络。如果只有“x1”，我知道该怎么做，但我不能用两个变量来管理它。这是我的代码，它绘制了输入数据 (x1,x2,y) 的 3d 图，但仅绘制了输出数据的 2d 图。我希望我已经正确解释了。

```
library(AMORE)

P1 <- Dane02[,1]
P2 <- Dane02[,2]
T <- Dane02[,3]

target <- T    

net <- newff(n.neurons=c(2,20,10,1), learning.rate.global=0.01,
             momentum.global=0.01, error.criterium="LMS", 
             Stao=NA, hidden.layer="tansig", 
             output.layer="purelin", method="ADAPTgdwm")

result <- train(net, P1, P2, target, error.criterium="LMS", 
                report=TRUE, show.step=100, n.shows=100 )

y <- sim(result$net, P1, P2)

library(rgl)
plot3d(P1,P2,target)
points3d(P1,P2,y, col="red") 
```

如下图所示，看起来它正在训练网络，认为“P2”是目标。我对么？我该如何纠正？![从两个不同的角度拍摄。 你看红色地块是平的](../Images/3ecef6c8dad2f7a6fc6d44453b795505.png)

改正后的结果： ![结果](../Images/7694f3eb3387f1e2c395ddb000a26c04.png)

# asp.net - 注销时回收

> ID：10268248
> 
> 赞同：2
> 
> 时间：2012-04-22T13:17:41.253
> 
> 标签：asp.net, .net, iis-7

在生产环境中，我有一个 IIS 托管的 asp.net 应用程序，实际上是许多 Web 应用程序。每个应用程序都会消耗大量内存，但目前限制它的唯一方法是回收（nHibernate 似乎正在泄漏内存，并且它正在创建大量字符串集合）。问题是在回收之后它会不断注销用户还是放弃会话？在本地计算机上，我无法重现该问题。我试过使用状态服务器但没有运气，问题还在继续，SQL 状态保存会改变什么，还是我只是错过了铅或错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T13:28:14.690

当应用程序池被回收时，如果会话数据存储在内存中（InProc，默认值），所有会话都将丢失。

会话是通过在用户浏览器中放置一个带有密钥的 cookie 并将该密钥保存在服务器状态机上来创建的。

如果您使用 SQL Server 存储会话，您将避免服务器丢失会话信息。[MSDN 上的会话状态模式](http://msdn.microsoft.com/en-us/library/ms178586.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T10:55:26.597

答案令人惊讶，它与我在应用程序中登录的视图状态错误有关，我在[MSDN 站点](http://support.microsoft.com/kb/555353)之一上找到了正确的解释，尤其是这一行：

> **关于 machineKey**
> 
> “[...] 当应用程序池**在用户帐户下**运行时，不会生成上述密钥，从而导致间歇性无效视图状态错误。”

总之，所有必须做的就是[生成一个机器密钥](http://technet.microsoft.com/en-us/library/cc772287%28v=ws.10%29.aspx)，并且回收不会导致用户重新进行身份验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T13:51:56.620

你写了你尝试过 StateServer 模式，但 stateserver 模式像 sqlserver 一样工作，如果我不知道它错了。StateServer 可以从 Windows 服务启动，并且在您的 web.config 中您可以设置您的服务器 IP 地址（哪个状态服务器已启动并正在工作）。

如果 stateserver 不适合你，我怀疑 sql server 会。问题可能出在我觉得的另一个领域。

> ASP.NET 会话状态支持会话数据的几种不同存储选项。每个选项都由 SessionStateMode 枚举中的值标识。以下列表描述了可用的会话状态模式：
> 
> InProc 模式，将会话状态存储在 Web 服务器的内存中。这是默认设置。
> 
> **StateServer 模式**，它将会话状态存储在称为 ASP.NET 状态服务的单独进程中。这可确保**在重新启动 Web 应用程序时保留会话状态，**并且还使会话状态可用于 Web 场中的多个 Web 服务器。
> 
> **SQLServer**模式将会话状态存储在 SQL Server 数据库中。这可确保**在重新启动 Web 应用程序时保留会话状态，**并且还使会话状态可用于 Web 场中的多个 Web 服务器。
> 
> 自定义模式，可让您指定自定义存储提供程序。
> 
> 关闭模式，禁用会话状态。
> 
> 您可以通过将 SessionStateMode 枚举值分配给应用程序 Web.config 文件中 sessionState 元素的 mode 属性来指定希望 ASP.NET 会话状态使用的模式。InProc 和 Off 以外的模式需要其他参数，例如本主题后面讨论的连接字符串值。您可以通过访问 HttpSessionState.Mode 属性的值来查看当前选定的会话状态。

# c# - Enum.ToString 返回错误的值？

> ID：10268250
> 
> 赞同：5
> 
> 时间：2012-04-22T13:17:53.897
> 
> 标签：c#, enums, tostring

我有一个简单的枚举：

```
public enum MyEnum
{
    [Description("Zero")]
    Zero,
    [Description("A positive number")]
    Positive,
    [Description("Any integer")]
    AnyInteger,
    [Description("A negative number")]
    Negative,
    [Description("Reserved number")]
    Reserved =2
} 
```

但是，运行以下代码：

```
MyEnum temp = MyEnum.AnyInteger;

string en = temp.ToString(); 
```

将 en 字符串设置为 Reserved。

为什么会发生？

是否有其他方法可以将字符串设置为使用的枚举字符串（在本例中为 AnyInteger）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T13:24:52.620

定义枚举时，第一个值从那里开始，`0`除非您另外定义，否则它会从那里上升，所以在您的情况下是：

```
public enum MyEnum
        {
            [Description("Zero")]
            Zero, //0
            [Description("A positive number")]
            Positive, //1
            [Description("Any integer")]
            AnyInteger, //2
            [Description("A negative number")]
            Negative, //3
            [Description("Reserved number")]
            Reserved = 2 // it's 2 again
           } 
```

您可以在枚举中定义相同的值两次（或更多）。`ToString`查找具有相同值的名称：

```
MyEnum temp=MyEnum.AnyInteger; //temp = 2

string en=temp.ToString(); // return the name of the first name with value 2. 
```

如果您坚持“保留”的值应为 2，请将他放在正确的位置。否则删除`=2`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T13:20:29.047

发生这种情况是因为您已将 reserved 设置为 2。如果您想为枚举设置值，您应该全部执行或不执行。

# ios - 将 UILabel 放在弹出框控制器的顶部（按 Z 顺序）？

> ID：10268257
> 
> 赞同：0
> 
> 时间：2012-04-22T13:18:37.803
> 
> 标签：ios, ipad

我的应用程序在弹出窗口中显示了一些选择。我想通过从选择中将文本标签快速移动到光标来为选择设置动画。在下图中：如果我点击“他们”这个词，我希望我的标签以类似的字体出现，并且文本“他们”出现在当前显示“他们”的弹出框顶部，然后向光标移动。实际发生的是标签出现在弹出框下方，并且在它“清除”弹出框之前不会变得可见。

所以：我的问题是我用于动画的标签在 Z 顺序上低于弹出框。

这种天真的方法不起作用：

```
 [self.view.window bringSubviewToFront:self.animationLabel]; 
```

可以修复吗？应该是？

![在此处输入图像描述](../Images/2d5ded40fa4481d14509b5a03e3e2948.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T03:51:38.377

警报级别的 UIWindow 有效。我怀疑其他任何事情。你生活和学习...

向 Noah Witherspoon 致敬： [如何在 UIPopoverController 之上添加视图](https://stackoverflow.com/questions/2622063/how-to-add-a-view-on-top-of-a-uipopovercontroller)

# java - 带有 SimpleLayoutPanel 的 GWT DataGrid 不会显示垂直滚动条

> ID：10268266
> 
> 赞同：2
> 
> 时间：2012-04-22T13:19:49.033
> 
> 标签：java, gwt, datagrid

GWT 展示，以及我发现的许多示例，总有一个非常简单的 DataGrid 用法：

1.  您在 UIBinder 中定义 DataGrid 元素，并设置要提供的字段。
2.  在视图**构造函数**中初始化网格 - 定义列**并添加数据**
3.  生成 UI 活页夹
4.  它呈现的一切都符合预期..

但常见情况并非如此静态：您通常设置网格但没有数据，这些数据可能仅在用户执行某些操作（单击按钮等）后提供。

我花了很多时间在我复杂的 UI 布局中展示 DataGrid :| 为此，网格现在托管在具有 100% 宽度和高度的 SimpleLayoutPanel 中，并且此 SimpleLayoutPanel 位于某个停靠面板内。但由于我不明白的原因 - 网格的显示超出了停靠面板的大小，所以我永远看不到它的滚动条的底端。

这是我的 UI 活页夹（为了清楚起见删除了一些东西）：

```
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
    xmlns:g="urn:import:com.google.gwt.user.client.ui">

<ui:style>

.sidePadding {
    padding-left: 8px;
        padding-right: 8px;
 }

    .expanded {
    width: 100%;
    height: 100%;
}

<g:DockLayoutPanel unit="PX" styleName="{style.expanded}">
    <g:north size="45">
        ...
    </g:north>
    <g:center>
    </g:center>
        ...
    <g:east size="190">
        <g:FlowPanel styleName="{style.sidePadding}">
            <g:FlowPanel>
                <g:Label>SOME TOOLBAR</g:Label>
            </g:FlowPanel>
            <g:HTMLPanel>
                <g:Label>SOME PANEL PANEL </g:Label>
            </g:HTMLPanel>
            <g:FlowPanel ui:field="eastContent">
                <g:Label>SOME FLOW PANEL</g:Label>
            </g:FlowPanel>
            <g:SimpleLayoutPanel ui:field="imagesGrid" addStyleNames="{style.expanded}"/>
        </g:FlowPanel>
    </g:east>
</g:DockLayoutPanel>

</ui:UiBinder> 
```

事实证明 - 东面板的高度为 650 像素，这是正确的值，但 SimpleLayoutPanel 内的 DataGrid 也具有相同的高度！并且因为它之前有一些标签等 - 它溢出了东面板的大小..

有什么帮助？？？

**更新：** 似乎如果我从东面板中删除所有内容并只留下 DataGrid 的 SimpleLayoutPanel - 它可以找到！但我确实需要在网格上方添加所有这些额外的标签 - 我找不到解决方案。??

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T13:54:33.997

请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels)

布局面板（`RequiresResize`小部件）必须一直嵌套到其他布局面板（`ProvidesResize`小部件）中，直到具有明确和固定大小（即不满足，例如未以父面板的百分比给出）的 、a 或*布局*面板`RootLayoutPanel`，而是以像素为单位）。`ResizePanel`

 *在这里，你`FlowPanel`在`DockLayoutPanel`和之间`SimpleLayoutPanel`打破了层次结构。

您可能希望将 s`FlowPanel`与 a进行交易`HeaderPanel`，将所有`FlowPanel`s 放在*标题*中（在容器中`FlowPanel`）并将您的`SimpleLayoutPanel`（或您的`Datagrid`）作为*内容*。
尽管没有实施`ProvidesResize`，`HeaderPanel`但尊重此合同，但仅针对其*内容*子项（这是它的关键：根据's 的大小和*页眉*和*页脚的**内在*大小调整*内容*子项的大小）`HeaderPanel`*

# android - 由于 ClassNotFoundException 导致的 Android 应用 FC

> ID：10268269
> 
> 赞同：0
> 
> 时间：2012-04-22T13:20:07.253
> 
> 标签：android

小部件工作正常，但主要活动 FC 的。

日志如下：

```
04-22 14:13:58.045: D/AndroidRuntime(2479): Shutting down VM
04-22 14:13:58.045: W/dalvikvm(2479): threadid=1: thread exiting with uncaught exception (group=0x40018560)
04-22 14:13:58.065: E/AndroidRuntime(2479): FATAL EXCEPTION: main
04-22 14:13:58.065: E/AndroidRuntime(2479): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.liamwli.reboot_widget/com.liamwli.reboot_widget.RebootwidgetActivity}: java.lang.ClassNotFoundException: com.liamwli.reboot_widget.RebootwidgetActivity in loader dalvik.system.PathClassLoader[/data/app/com.liamwli.reboot_widget-2.apk]
04-22 14:13:58.065: E/AndroidRuntime(2479):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1680)
04-22 14:13:58.065: E/AndroidRuntime(2479):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
04-22 14:13:58.065: E/AndroidRuntime(2479):     at android.app.ActivityThread.access$1500(ActivityThread.java:123)
04-22 14:13:58.065: E/AndroidRuntime(2479):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
04-22 14:13:58.065: E/AndroidRuntime(2479):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 14:13:58.065: E/AndroidRuntime(2479):     at android.os.Looper.loop(Looper.java:130)
04-22 14:13:58.065: E/AndroidRuntime(2479):     at android.app.ActivityThread.main(ActivityThread.java:3835)
04-22 14:13:58.065: E/AndroidRuntime(2479):     at java.lang.reflect.Method.invokeNative(Native Method)
04-22 14:13:58.065: E/AndroidRuntime(2479):     at java.lang.reflect.Method.invoke(Method.java:507)
04-22 14:13:58.065: E/AndroidRuntime(2479):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
04-22 14:13:58.065: E/AndroidRuntime(2479):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
04-22 14:13:58.065: E/AndroidRuntime(2479):     at dalvik.system.NativeStart.main(Native Method)
04-22 14:13:58.065: E/AndroidRuntime(2479): Caused by: java.lang.ClassNotFoundException: com.liamwli.reboot_widget.RebootwidgetActivity in loader dalvik.system.PathClassLoader[/data/app/com.liamwli.reboot_widget-2.apk]
04-22 14:13:58.065: E/AndroidRuntime(2479):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
04-22 14:13:58.065: E/AndroidRuntime(2479):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
04-22 14:13:58.065: E/AndroidRuntime(2479):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
04-22 14:13:58.065: E/AndroidRuntime(2479):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-22 14:13:58.065: E/AndroidRuntime(2479):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1672)
04-22 14:13:58.065: E/AndroidRuntime(2479):     ... 11 more 
```

我是android应用程序开发的新手，不知道问题是什么:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T13:55:08.340

Android 正在寻找一个名为的类`com.liamwli.reboot_widget.RebootwidgetActivity`，但找不到它。确保所有内容都拼写正确，包括大小写。

我还建议您去掉包名称中的下划线，因为这可能会导致您出现问题。Java 包通常是字母、数字和点。

# java - 是否可以从java中的另一个类导入监听器

> ID：10268274
> 
> 赞同：0
> 
> 时间：2012-04-22T13:20:38.677
> 
> 标签：java, swing, jbutton, actionlistener

如果我有一个 java 类并且我想使用另一个类的监听器，我该怎么做？例如，如果我有两个 JFrame 并且其中一个中有一个按钮，我可以让它在另一个类中做某事吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T13:23:45.413

您可以在一个类中创建一个公共方法

```
public void addSomeButtonActionListener(ActionListener listener) {
    someButton.addActionListener(listener);
} 
```

这将允许其他对象将侦听器添加到您感兴趣的按钮。请注意，如果一个按钮添加了多个侦听器，则无法保证哪个会首先触发或以任何触发顺序触发。

或者，您可以使用所有 Swing 组件固有的 PropertyListener 支持，创建您自己的绑定属性，并允许外部类将 PropertyChangeListeners 添加到感兴趣的类中，以侦听绑定属性的更改。有关这方面的更多信息，请查看[本教程](http://java.sun.com/developer/onlineTraining/Beans/Beans4/bound.html)。请注意，如果您走这条路，并且如果您的类扩展了 Swing 组件，则无需编写自己的方法，`addPropertyChangeListener(...)`或者`removePropertyChangeListener(...)`因为这些方法以及 SwingPropertyChangeSupport 字段已经是所有 Swing 组件的固有组件。如果您的类没有扩展 Swing 组件，那么是的，您需要编写上述方法，但您仍然可以使用 GUI 类的关键组件之一的 SwingPropertyChangeSupport。

后一种解决方案是我喜欢的解决方案，但我发现我更经常听取模型的绑定属性而不是我的观点。

如果您需要更多详细信息，请告诉我们更多关于您的代码和问题的信息。

# iis - IIS URL 重写规则 - 如何删除某些段？

> ID：10268275
> 
> 赞同：1
> 
> 时间：2012-04-22T13:20:48.563
> 
> 标签：iis, iis-7, url-rewriting, url-rewrite-module

我已阅读iis.net[上为 URL 重写模块创建重写规则](http://learn.iis.net/page.aspx/461/creating-rewrite-rules-for-the-url-rewrite-module/)的文章，我想从我的 url 中删除一些段。

例如，来自：

```
/article/archive/2289/01/articleid/191/reftab/36/word1 word2 word3 
```

至：

```
/article/articleid/191/word1-word2-word3 
```

我已经用这个更改了我的 web.config 文件，但我无法解决我的问题：

```
<rewrite>
  <rules>
    <rule name="Remove segments">
      <match url="^article/archive/2289/01/([0-9]+)/([_0-9a-z-]+)" />
      <action type="Rewrite" url="article/articleid/{R:1}/{R:2}" />
    </rule>
  </rules>
</rewrite> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:59:38.560

看起来你正试图向后做。该`<match>`元素表示友好 URL - 用户在浏览器中输入的 URL、链接中包含的 URL 以及 IIS 接收的 URL。

该`<action>`元素表示*不友好*的URL - 如果您不使用 rewrite 模块，您将不得不使用的丑陋 URL。

```
<match url="^article/articleid/([0-9]+)/([_0-9a-z-]+)" />
<action type="Rewrite" url="/article/archive/2289/01/articleid/{R:1}/reftab/36/{R:2}" /> 
```

这里的问题是你可能不想硬编码`2289/01`，对吧？您需要将其合并到您的友好 URL 中，或者提出一些可以在没有这些数字的情况下处理请求的中间处理程序。

# c# - 获取配置部分

> ID：10268286
> 
> 赞同：0
> 
> 时间：2012-04-22T13:21:56.053
> 
> 标签：c#, windows-services, app-config, configurationmanager

我有一个桌面应用程序，我需要用它来测试我的 Windows 服务。

该应用程序只是调用一个处理我的业务的 Windows 服务类，首先它应该从 app.config 加载一些数据。

应用程序配置在服务项目中，我将配置存储在自定义部分 [ABCConfigurationSection] 中。喜欢 ...

```
<ABCConfigurationSection>
    <ConnectSettings>
      <clear />
      <add key="HostIp" value="10.0.X.X"/>
    </ConnectSettings>
 </ABCConfigurationSection> 
```

主要配置部分就像..

```
<configuration>
  <configSections>
    <section name="ABCConfigurationSection" type="ABCConfiguration, App.Core" />
  </configSections>
</configuration> 
```

当我检索将“ABCConfigurationSection”作为部分名称传递的配置部分时，我得到了 null ！关于应用程序配置的结构是否缺少某些东西的任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T13:51:10.283

在您的 configSections 中，对于“ABCConfigurationSection”部分，您声明一个名为“ABCConfiguration”的类型是处理您的部分的类型。

这意味着，在您的代码中，您应该定义一个名为 ABCConfiguration 的类，该类派生自 ConfigurationSection 来读取您的部分。

关于这个主题有很多细节。这是一个指向[MSDN](http://msdn.microsoft.com/en-us/library/2tw134k3.aspx)的链接，其中给出了一个完整的示例

# java - Java 中的 HTTP 客户端连接

> ID：10268296
> 
> 赞同：0
> 
> 时间：2012-04-22T13:23:53.603
> 
> 标签：java

我正在尝试使用套接字建立 HTTPClient 连接，但无法弄清楚。当我运行代码时，我收到以下消息；

```
HTTP/1.1 400 Bad Request
Date: Sun, 22 Apr 2012 13:17:12 GMT
Server: Apache/2.2.16 (Debian)
Vary: Accept-Encoding
Content-Length: 317
Connection: close
Content-Type: text/html; charset=iso-8859-1

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
</p>
<hr>
<address>Apache/2.2.16 (Debian) Server at pvs.ifi.uni-heidelberg.de Port 80</address>
</body></html> 
```

**代码在这里：**

```
import java.net.*;
import java.io.*;

public class a1 {
  public static void main ( String[] args ) throws IOException {
    Socket s = null;

    try {
        String host = "host1";
        String file = "file1";
        int port = 80; 
```

**在这里，我正在创建套接字：**

```
 s = new Socket(host, port);

        OutputStream out = s.getOutputStream();
        PrintWriter outw = new PrintWriter(out, false);
        outw.print("GET " + file + " HTTP/1.1\r\n");
        outw.print("Accept: text/plain, text/html, text/*\r\n");
        outw.print("\r\n");
        outw.flush();           

        InputStream in = s.getInputStream();
        InputStreamReader inr = new InputStreamReader(in);
        BufferedReader br = new BufferedReader(inr);
        String line;

        while ((line = br.readLine()) != null) {
                System.out.println(line);
        }

    } 
    catch (UnknownHostException e) {} 
    catch (IOException e) {}

        if (s != null) {
                try {
                        s.close();
                }
                catch ( IOException ioEx ) {}
        }
  }
} 
```

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T13:33:51.750

如果您真的非常想编写自己的 HTTP 客户端（比看起来更难，但很有教育意义），那么您缺少`Host`HTTP 1.1 中所需的标头：

```
outw.print("Host: " + host + ":" + port + "\r\n"); 
```

请参阅[RFC 2616，第*14.23 节。主持人*](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.23)：

> 客户端必须在所有 HTTP/1.1 请求消息中包含 Host 头字段。

所以你的请求**很糟糕**，它错过了必需的`Host`标头。

# xml - 选择元素的属性名称

> ID：10268303
> 
> 赞同：0
> 
> 时间：2012-04-22T13:25:18.187
> 
> 标签：xml, xpath

这是一个示例 XML：

```
<parentNode name="Any Name">

    <childNode>50</childNode>

</parentNode> 
```

我想检查一下，如果“childNode”的内容是“50”，那么在 XPath 的帮助下显示名称“Any Name”。请告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:40:33.837

如果调用的元素是 50 ，那么路径`/parentNode[childNode = 50]/@name`选择调用的属性。`name``childNode`

# ruby-on-rails - Rails 3 - 部分用于新页面和编辑页面

> ID：10268304
> 
> 赞同：0
> 
> 时间：2012-04-22T13:25:25.270
> 
> 标签：ruby-on-rails, ruby, partial-views

我想为**编辑**和**新**视图实现部分。

所以，我现在有这样的代码部分：

### _subject_fields.html.erb

```
<div class="control-group">
  <%= f.label :subject_name, "Name of subject", :class => "control-label" %>

  <div class="controls">
    <%= f.text_field :subject_name,
                     :placeholder => field_placeholder,
                     :value => subject_name %>
  </div>
</div> 
```

我用这样的代码调用我的部分：

```
<%= render :partial => 'subject_fields', 
         :locals => { :f => f,
                      :field_placeholder => @everpresent_field_placeholder,
                      :subject_name => @some_var,
                     }
 %> 
```

但这里有问题。**当我在编辑**视图中渲染这样的部分时，我不应该通过`subject_name`，因为 rails 会自动为我执行此操作（我的意思是 rails 会为我执行此操作，除非我设置自己的 :value ，因为我也想在新视图中使用此部分） . 但我应该通过**新**`subject_name`的观点。我该如何解决？我应该部分添加条件还是什么？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T13:45:34.777

根本不需要价值部分。当您说时`f.text_field :subject_name`，您是在表单上调用 text_field `f`。f 作用于一个对象（如 @blog_post in `form_for @blog_post do |f|`）。Rails 尝试调用 @blog_post 上的 text_field 方法，如果有返回值，则将其填充到 text_field 中。

因此，如果有一个主题名称 text_field 的值将被设置（如：edit） r 如果没有，则留空（如：new）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T13:44:45.917

试试这个：

```
<%= render :partial => 'subject_fields', 
         :locals => { :f => f,
                      :field_placeholder => @everpresent_field_placeholder,
                     }.merge params[:action]=='new' ? { :subject_name => @some_var } : {}
 %> 
```**

# vb.net - VB.NET：form.show() 被调用了吗？

> ID：10268306
> 
> 赞同：0
> 
> 时间：2012-04-22T13:25:54.477
> 
> 标签：vb.net, forms, hide, show, splitcontainer

我有一个非常简单的问题。

我打电话给一个表格，`.show()`然后`.hide()`我想确定当前状态。我一直在检查`.visible`以确定表单是否可见，但我偶然发现了一个问题。我的表单正在一个 SplitContainer 中呈现，每次隐藏表单时我都会折叠它。因此，按照逻辑，一旦我隐藏了`.hide()`不再可见的表单，并且由于我已经折叠了它的容器，即使我调用`.show()`它仍然不可见，因为它的容器已关闭。

那么，我怎样才能简单地检查是否`.show()`已被调用，而不是检查表单是否可见。

最终目标是显示（）/隐藏（）表单以及折叠/取消折叠容器。

提前致谢！

PS：我知道我可以简单地检查容器并相应地显示表单，但我的表单也支持从容器中分离，所以这对我不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T13:47:46.710

你不能在这里走捷径。通过修改表单的 TopLevel 属性以便您可以将其放在面板上，表单的 Visible 属性不再是您最后调用 Show() 还是 Hide() 的可靠指示。因为读取属性只会告诉*用户*是否可以看到表单。如果控件的 Parent 不可见，则该控件的 Visible 属性将返回 False，即使您将其设置为 True。

解决方法很简单，只需使用布尔变量来跟踪。或者当你需要它处于/可见时调用 Show and Hide，在它已经可见时调用 Show 或在它已经不可见时调用 Hide 无关紧要。

# .net - 生产环境中的日志记录优化

> ID：10268313
> 
> 赞同：0
> 
> 时间：2012-04-22T13:26:43.777
> 
> 标签：.net, wcf, optimization, logging, production

我正在优化我们应用程序中的一些功能，我想通过在生产环境中记录真实用例频率来衡量成功/发现改进。鉴于我正在优化，我不想花时间写入文件。

我的想法是......我可以决定执行路径中的一个分割点并生成一个新线程来检查一个对象并将一些测量结果记录到磁盘吗？我的查询线程会受到惩罚吗？有什么我必须考虑的影响吗？

如果重要，该应用程序是 Windows 机器上的 .NET WCF，并且仅在短期内需要。此外，我需要在应用程序端执行此操作，因为我需要记录只有应用程序才能进行的测量。

谢谢你的想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:36:56.650

为什么不试试像 New Relic 这样的 APM 工具呢？

# html - 如何使 3 列嵌套列表只有内边距（没有外边距）？

> ID：10268314
> 
> 赞同：0
> 
> 时间：2012-04-22T13:27:04.647
> 
> 标签：html, css, grid, less, nested-lists

在将嵌套列表与其他所有内容对齐时，我遇到了一个小问题。我为一个站点使用semantic.gs 网格：http: [//grrr.dontmeshwithus.com/](http://grrr.dontmeshwithus.com/) 如您所见，底部的嵌套列表与上面的黑线或div“幻灯片”不对齐。外部列表的左右两侧都有一个小间隙。通过调整浏览器窗口的大小，您可以更清楚地看到问题。

有什么技巧或方法可以解决这个问题吗？我发现我可以摆脱差距的唯一方法是使用 CSS3 列，但它们不能跨浏览器工作。有没有办法让它们跨浏览器工作？还是有另一种方法可以只给列表项内边距？或者我应该只使用 CSS3 列并为 IE 做一个后备..？

HTML：

```
<article id="memberContainer">
    <ul id="memberList">
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
        <li>5</li>
        <li>6</li>
        <li>7</li>
        <li>8</li>
    </ul>
 </article> 
```

CSS（/少）：

```
 @columns: 12;
 @column-width: 81;
 @gutter-width: 19;
 @total-width: 100%;

    #memberContainer {
    .border;
    ul#memberList {
      .row(9);
      li {
        .column(3,9);
        margin-top: 1em;
      }
    }
  } 
```

我正在使用的 semantic.gs 网格可以在这里找到： [https ://github.com/twigkit/semantic.gs/blob/master/stylesheets/less/grid.less](https://github.com/twigkit/semantic.gs/blob/master/stylesheets/less/grid.less)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:15:12.877

你总是可以尝试 :first-of-type 和 :last-of-type css3 选择器。这应该使您可以访问第一个和最后一个 li 元素以删除其边距

像这样的东西（少）

```
ul#memberList {
    li{
        &:first-of-type, &:last-of-type{
             margin-left:0; 
             margin-right:0;
        }
    }
} 
```

参考：[http](http://www.w3.org/TR/selectors/#first-of-type-pseudo) ://www.w3.org/TR/selectors/#first-of-type-pseudo last of type 就在它下面。

编辑：由于您正在渲染一个包装列表，因此只有在您预先知道每行元素的数量时才能执行此操作。您可以使用 nth-child [http://www.w3.org/TR/selectors/#nth-child-pseudo](http://www.w3.org/TR/selectors/#nth-child-pseudo)或 nth-of-type [http://www.w3.org/TR/selectors/#nth- of-type-pseudo](http://www.w3.org/TR/selectors/#nth-of-type-pseudo)选择器。

就像是

```
ul#memberList {
    li{
        &:nth-of-type(3n){
             margin-left:0; 
             margin-right:0;
        }
    }
} 
```

应该照顾你的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T15:41:21.557

你试过了吗`:first-child`（`:last-child`http://www.quirksmode.org/css/firstchild.html）

我认为它会是这样的：

```
ul#memberList {
    li{
        &:first-child, &:last-child{
             margin-left:0; 
             margin-right:0;
        }
    }
} 
```

# c++ - 检查数组的特定列中是否存在整数

> ID：10268319
> 
> 赞同：0
> 
> 时间：2012-04-22T13:28:37.033
> 
> 标签：c++, arrays, int

我必须做以下练习：

编写一个函数，给定两个整数（x 和 k）和一个 MXN 矩阵，如果有一个元素在矩阵的至少 x 列中至少出现 k 次，则返回 TRUE。

这是我的解决方案，但有问题：

```
#include <iostream>
using namespace std;

const int DIM = 3;

bool check ( int matrix[DIM][DIM], int element,  int k,  int x )
{
    bool occur = false;
    int i,j = 0;
    for ( i=0; i<DIM; i++ )
    {
        for ( j=0; j<DIM; j++)
        {
            while ( i<k && occur)
            {
                matrix[i][j] == element;
                i++;
            }
        }
    }
    return occur;
}

int main ()
{
    int matrix[DIM][DIM] = {{1,2,3},
                            {4,1,6},
                            {7,8,9}};
    int x = 2;
    int k = 1;
    int elemento = 1;
    if ( check (matrix, element, k , x))
    {
        cout << "l'elemento "<< elemento <<" ricorre "<< k <<" volta/e in "<< x <<" colonna/e";
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:35:03.833

您需要将任务分成更小的块。要检查一个数字是否在 x 列中出现 k 次，首先编写一个函数来检查一个数字是否在一列中出现 k 次。该函数将有一个 for 循环。当你写它时，测试它，看看你是否做得正确。然后将该函数放入另一个非常相似的 for 循环中，就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:47:13.113

```
bool check(int matrix[M][N], int element, int k, int x)
{
        int c1 = 0;
        for (int i = 0; i < M; ++i) {
                int c2 = 0;
                for (int j = 0; j < N; ++j) {
                        if (matrix[i][j] == element)
                                ++c2;
                }
                if (c2 >= k)
                        ++c1;
        }
        return c1 >= x;
} 
```

自己优化；）

# sql - 多个并集后选择

> ID：10268320
> 
> 赞同：0
> 
> 时间：2012-04-22T13:29:00.543
> 
> 标签：sql, union

我需要从多个联合中选择不同的值。我需要在不同数据库的多个表上使用联合。但是我尝试使用这段代码：

```
SELECT DISTINCT name ((SELECT name FROM tab1) UNION (SELECT name FROM tab2)) 
```

我有这个错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'UNION (SELECT name FROM tab2 )' at line 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T13:35:27.187

试试这个：

```
SELECT DISTINCT name FROM (
    SELECT name FROM tab1 
    UNION 
    SELECT name FROM tab2
) TABLEALIAS 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T13:37:46.057

您不需要使用“不同”。UNION 已经为您提供了独特的结果。

```
SELECT name FROM tab1
UNION
SELECT name FROM tab2 
```

这会给你正确的结果。顺便说一下，如果你想从不同的数据库中获取数据，你需要使用数据库名称。请参考以下内容；

```
SELECT name FROM db1.tab1
UNION
SELECT name FROM db2.tab2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T13:33:30.520

```
SELECT DISTINCT name FROM ((SELECT name FROM tab1) UNION (SELECT name FROM tab2)) as sth 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T13:46:39.210

您需要一个`FROM`, 和一个内部结果的别名：

```
SELECT DISTINCT name
FROM (
  SELECT name FROM tab1
  UNION
  SELECT name FROM tab2
) x 
```

但是，您根本不需要`DISTINCT`那里，`UNION`已经删除了重复项。

# python - Python 到 Perl 的翻译器，python 缩进

> ID：10268321
> 
> 赞同：0
> 
> 时间：2012-04-22T13:29:12.380
> 
> 标签：python, perl, perl-data-structures

我正在为一个项目将 Python 翻译成 Perl。我要求的是一个提示，或者是我的问题的起点。

问题：我应该如何将 Python 中的多行`if`//语句`for`（`while`假设一个块的缩进相当于每个块的 4 个空格）翻译成 Perl？

我正在用 Perl 编写这个，所以我正在考虑使用某种数据结构（例如数组）来捕获具有相同缩进级别的连续行块，但我不确定我究竟是如何做到这一点的?

另一种可能的方法是“窥视”下一行（我正在使用 读取 Python 文件`while (<>)`），但这会将指针更改为下一行。

这是一个示例 Python 代码：

```
#!/usr/bin/python
import sys

x = 4
for i in range(0, x+1):
    print i
    i = i + 1 
```

希望翻译成：

```
#!/usr/bin/perl -w

$x = 4;
foreach $i (0..$x) {
    print $i, "\n";
    $i = $i + 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T16:16:15.830

我不明白为什么有人想要这样做，但显然有一个名为[Perthon](http://perthon.sourceforge.net/)的项目声称将 Python 翻译成 Perl。

至少他们通过使用[Parse::RecDescent](http://search.cpan.org/perldoc/Parse%3a%3aRecDescent)而不是使用正则表达式以正确的方式做到这一点;-)

# java - 如何可靠地检测到代码是否正在从任务队列中执行？

> ID：10268331
> 
> 赞同：1
> 
> 时间：2012-04-22T13:31:20.107
> 
> 标签：java, google-app-engine, task-queue

在我的代码深处，我如何可靠地检测到处理程序的当前调用是否是从任务队列中调用的？

我知道，在 GAE/J 中，如果我检查了`HttpServletRequest`对象，我可以检查是否设置了[以下标题](https://developers.google.com/appengine/docs/java/taskqueue/overview-push#Task_Execution)：

*   `X-AppEngine-QueueName`
*   `X-AppEngine-TaskName`
*   `X-AppEngine-TaskRetryCount`
*   `X-AppEngine-FailFast`
*   `X-AppEngine-TaskETA`

任何这些标头的存在都表明处理程序正在由任务队列调用。

但是假设我的代码中需要进行检测的部分在几个抽象层的深处，我无法访问`HttpServletRequest`对象，有没有什么方法可以可靠地检测当前执行环境是否是从任务队列中调用的或不？

我希望有一些容易获得的东西，比如：

```
SystemProperty.environment.value() == Value.TaskQueue 
```

类似于我们可以使用`SystemProperty.environment.value() == Value.Development`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:59:55.633

我最终检查了请求的标头是否包含`X-AppEngine-TaskName`，并且感谢 AlexR 的建议，将检查结果存储在线程局部变量中。

根据下面的 Eric Willigers 评论，事实证明 Google 已经`X-AppEngine-TaskName`从外部请求中丢弃了标头，从而保护应用程序免受试图伪造标头的恶意攻击者的攻击，因此这似乎是迄今为止最安全的方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-22T13:42:49.460

尝试检查堆栈跟踪：`new Throwable().getStackTrace()`。这将返回一个数组`StackTraceElement`。您可以遍历数组并识别从队列中调用的典型类+方法。

# javascript - jQuery：将滚动事件绑定到动态加载的内容

> ID：10268334
> 
> 赞同：1
> 
> 时间：2012-04-22T13:31:53.130
> 
> 标签：javascript, jquery, ajax, user-interface, scroll

我最近一直在开发一个应用程序，它在 UI 中广泛使用垂直滚动条。我一直在使用 jQuery 做很多工作，但最近我遇到了一些障碍。

我的所有内容都是动态加载的，包括将具有滚动条的 div。将 .scroll 绑定到该特定 div 不会执行任何操作。我已经通过闭包函数尝试了多种方法，使用 .on 和 .live 但似乎都没有。

以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-22T13:34:14.957

而是将其绑定到文档：

```
$(document).on('scroll', '#divId', function() { /* ... code ... */ }); 
```

# css - jQuery UI 选项卡，ID 属性

> ID：10268335
> 
> 赞同：1
> 
> 时间：2012-04-22T13:32:07.487
> 
> 标签：css, jquery-ui, jquery-ui-tabs

为了演示显示包含选项卡的元素，[jQuery 选项卡文档](http://docs.jquery.com/UI/Tabs#overview)提供了以下示例：

```
$('#example').tabs(); 
```

我需要在我的页面上多次出现选项卡，因此将示例更改为：

```
$('.example', parentEl).tabs(); 
```

父元素将只包含 1 次出现的 tabs 元素，因此可以按预期工作。但是，每个选项卡的内容都需要一个 ID 属性：

```
<div class="tabs">
  <ul>
      <li><a href="#One" class="TabLink"><span>One</span></a></li>
      <li><a href="#Two" class="TabLink"><span>Two</span></a></li>
  </ul>
  <div id="One"></div>
  <div id="Two"></div>
</div> 
```

由于我将有多个选项卡（从用户事件生成），我真的不应该使用 ID 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T13:40:20.287

你应该使用一个ID。这就是 jquery 如何确切地知道每个选项卡要加载哪些内容。但是，如果您不使用 id，它会为每个元素分配一个唯一的。

# php - 从每个子数组中获取特定元素

> ID：10268337
> 
> 赞同：31
> 
> 时间：2012-04-22T13:32:20.960
> 
> 标签：php, arrays

我有一个常见的模式，我确信 PHP 中必须有一个内置的数组函数来处理，但就是看不到它。

我有多个数组，如下所示：

```
$testArray = array (
    'subArray1' => array(
        'key1' => "Sub array 1 value 1",
        'key2' => "Sub array 1 value 1"
    ),
    'subArray2' => array(
        'key1' => "Sub array 2 value 1",
        'key2' => "Sub array 2 value 2"
    )
); 
```

我需要`key1`从每个子数组中获取值，其中可以有任意数量。

我总是最终只是遍历每个数组以获得所需的值，但我确信必须有一种更简单、更有效的方法来处理这个问题。

我目前正在使用以下简单的 foreach 来解析数组：

```
$preparedSubs = array();

foreach($testArray as $subArray) {
    $preparedSubs[] = $subArray['key1'];
} 
```

它尽可能短，但正如我所说，我确信有一个 PHP 构造可以更好地处理这个问题。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-22T13:37:30.377

在 PHP 5.5 之前，这将是最有效的解决方案：

```
$key = 'key1';

$output = array_map(function($item) use ($key) {
    return $item[$key];
}, $testArray); 
```

从 PHP 5.5 开始，现在有一个`array_column`函数（参见[COil 的回答](https://stackoverflow.com/a/28065712/283078)）。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-01-21T11:09:20.567

从 PHP 5.5 开始，您可以使用[array_column()](http://php.net/manual/en/function.array-column.php)函数：

```
$key = 'key1';

$testArray = array (
    'subArray1' => array(
        'key1' => "Sub array 1 value 1",
        'key2' => "Sub array 1 value 2"
    ),
    'subArray2' => array(
        'key1' => "Sub array 2 value 1",
        'key2' => "Sub array 2 value 2"
    )
);

$output = array_column($testArray, $key);
var_dump($output); 
```

将输出：

```
array(2) {
  [0]=>
  string(19) "Sub array 1 value 1"
  [1]=>
  string(19) "Sub array 2 value 1"
} 
```

与接受的答案的唯一区别是您丢失了原始密钥名称，但我认为这对您而言不是问题。

# java - 爪哇 | Slick2D - 如何在 TiLeD 中使用对象？

> ID：10268340
> 
> 赞同：0
> 
> 时间：2012-04-22T13:32:57.817
> 
> 标签：java, object, entity, slick2d

您好，我正在创建一个游戏，我有几种方法可以让训练师站立（因为这是一款口袋妖怪游戏），但是我必须每次将他们的位置编码为我制作的每张新地图的实体。有没有办法在 TiLeD 中制作一个对象，然后让 Java 自动导入所有培训师？

谢谢！

编辑：如果有办法，那么请解释一下如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:02:47.797

试试看一下 Slick2D 论坛 - 有关于 call 的子类的工作，`TiledMap`它`TiledMapPlus`更面向对象，更少数组风格。

# c++ - OpenMP 嵌套 for 循环（使用 Qt）

> ID：10268341
> 
> 赞同：0
> 
> 时间：2012-04-22T13:33:17.030
> 
> 标签：c++, qt, parallel-processing, openmp, qpainter

我正在编写一个程序（C++）来合并图像（QPainter）。以顺序方式它工作得很好，但我必须将它与 OpenMP 并行化。我怎样才能做到这一点？我认为可能的问题是内存分配或嵌套 for 循环。这是我的第一个问题，在此先感谢:)

```
int width = (x2-x1)+1;
int height = (y2-y1)+1;

//every image is 256x256
QImage mapa = QImage(256*width, 256*height, QImage::Format_ARGB32_Premultiplied);
QPainter painter(&mapa);

painter.setCompositionMode(QPainter::CompositionMode_SourceOver);

int x=0;
int y=0;

#pragma omp parallel
{
char *kawalek;

#pragma omp parallel for lastprivate(i) firstprivate(j) shared(x1, x2, y1, y2, painter) reduction(+:y, x)
for(i=y1; i<=y2; i++){
    x=0;
    #pragma omp parallel for shared(x1, x2, i, y, painter) reduction(+:x)
    for(j=x1; j<=x2; j++){
        {
        kawalek = (char*) malloc(snprintf(NULL, 0, "pobrane/%d_%d.png", j, i)+1);
        sprintf(kawalek, "pobrane/%d_%d.png", j, i);
        //cout << "czesc: " << kawalek << endl;
        QImage fragment(kawalek);
        painter.drawImage(x, y, fragment);

        //cout << "wspolrzedne czesci x: " << x << "y: " << y << endl;
        }
        x+=256;
    }
    y+=256;
}
}

painter.end();

mapa.save(filename); 
```

* * *

@Riateche，谢谢；）

我的下一个问题是为什么那个循环不加速......

```
#pragma omp parallel for private(i) shared(ile)
    for(i=0; i<ile; i++){
        results[i].load(sciezki[i]);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T13:51:47.040

您不能同时`mapa`从多个线程写入变量（通过对其进行绘制）。

如果您使用 Qt 线程，我建议您使用信号和插槽将计算结果传递给主线程。另一种方法是在主线程中创建结果数组。每个线程只会将他自己的结果写入数组的一个单元格。在所有线程完成后，主线程必须读取结果并绘制它们。

并考虑 QImage::load() 加载 png 文件。它比您的代码更简单。

# iphone - 替换连续的空格、制表符、换行符

> ID：10268342
> 
> 赞同：3
> 
> 时间：2012-04-22T13:33:25.703
> 
> 标签：iphone, ios, nsstring

我有一个带有连续空格、制表符、换行符的 NSString。有什么方法可以只播放一个空格吗？我有一个小的 UIlabel 视图来显示它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T13:39:22.240

你可以试试这个：

```
NSString *string = @" spaces in front and at the end ";
NSString *trimmedString = [string stringByTrimmingCharactersInSet:
                              [NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

这里的关键是 whitespaceAndNewlineCharacterSet，来自 Apple[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nscharacterset_Class/Reference/Reference.html#//apple_ref/occ/clm/NSCharacterSet/whitespaceAndNewlineCharacterSet)：

```
Returns a character set containing only the whitespace characters space (U+0020) and tab (U+0009) and the newline and nextline characters (U+000A–U+000D, U+0085). 
```

# c# - 当socketclient等待socket服务器响应又名TimeOut时如何中止

> ID：10268344
> 
> 赞同：0
> 
> 时间：2012-04-22T13:33:36.457
> 
> 标签：c#

我编写了一个套接字客户端，它将数据发送到套接字服务器并等待套接字服务器对接收到的数据大小的响应。对于错误处理，如果套接字客户端等待的时间过长，我希望它像超时因素一样中止连接。我怎么做。这是我的代码：

```
clientSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
clientSocket.Connect(new IPEndPoint(IPAddress.Parse(host), port));

clientSocket.Send(Encoding.ASCII.GetBytes(data));

// Get the total length
clientSocket.Receive(data); 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T13:38:53.417

`ReceiveTimeout`在您的`Socket`对象上设置属性。

[http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.receivetimeout.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.receivetimeout.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T13:44:23.080

据我所知，您正在使用 TCP。TCP 确保可靠的交付。即，如果服务器关闭，则“clientSocket”中的值为零。此外，如果您想从服务器显式发送数据，您可以通过 {ReceiveTimout} 属性在服务器和客户端设置超时。

# sql - Oracle：导入电子表格数据

> ID：10268345
> 
> 赞同：0
> 
> 时间：2012-04-22T13:33:39.617
> 
> 标签：sql, oracle, ora-01830

我有一个在 Oracle 中创建的表。我在表中有三个日期列。我正在尝试通过 oracles 电子表格导入将一些数据导入表中，我要导入大约 100 条记录，数据示例如下：

```
1235    |   05/4749     |   18-Mar-2006 15:26   |   19-Mar-2006   |  AM  |   19-Mar-2006 09:15  |   19-Mar-2006 10:45   |   351 
```

但是，当我尝试将此类记录导入 oracle 时，出现错误：

> ORA-01830: 日期格式图片在转换整个输入字符串之前结束

有人可以建议我应该如何成功导入这些数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:46:57.883

您有两种格式的日期：小时和分钟（2006 年 3 月 18 日 15:26）和没有时间元素的日期（2006 年 3 月 19 日）。很难说哪一个让你感到悲伤，但可能是小时和分钟。这不是标准的日期时间格式：Oracle 也需要秒。

至于你怎么修？一种方法是调整输入数据并添加`:00`到每个日期时间值。但这并不总是可能的，也许是不可取的。

更好的方法是更改​​加载过程，使其识别每列的特定格式。您如何执行此操作取决于“oracles 电子表格导入”的含义。没有这样的东西，至少在数据库中没有。有各种支持此功能的客户端工具（来自 Excel 或 CSV）：SQL Developer、Apex、SQL*Loader、外部表。

所以，告诉我们您正在使用哪种工具，我们可以为您提供进一步的帮助。

# php - 向 mysql 表添加日期的问题

> ID：10268350
> 
> 赞同：0
> 
> 时间：2012-04-22T13:34:01.833
> 
> 标签：php, mysql, date

我在 CSV 中获取日期并尝试以 mysql 日期格式将其添加到我的数据库中。这是我的代码（或其中一些）：

```
 while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
 {
    $originalDate = $data[1];
    echo "original date format:".$originalDate."<br/>";

    //$delivery_date = date('Y-m-d', strtotime($originalDate));

    $parts = explode('/', $originalDate);
    $delivery_date = $parts[2] . '-' . $parts[1] . '-' . $parts[0]; // 09/12/2011

    echo "new date format:".$delivery_date."<br/>";

    $row++;
    $import="INSERT into dispatch (delivery_note_number, delivery_date) 
    values ('$data[0]','$delivery_date')";
    mysql_query($import) or die(mysql_error());

 } 
```

“回声”只是为了帮助我调试。新的日期格式 $delivery_date 以适合插入数据库的方式回显，例如 2012-04-15

但是，当我检查数据库时，我最终得到的是 0000-00-00

任何想法为什么 mysql 不接受日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:37:42.827

将其更改为：

```
$import="INSERT into dispatch (delivery_note_number, delivery_date) 
    values ('".$data[0]."','".$delivery_date."')"; 
```

那应该有帮助。

# regex - Shell/AWK - 它不显示值，以及如何添加 reg exp

> ID：10268355
> 
> 赞同：1
> 
> 时间：2012-04-22T13:34:18.747
> 
> 标签：regex, linux, perl, unix, awk

我有一个小问题，下面的代码工作正常，但现在它什么也没显示，我不太明白这个错误在哪里。

```
> #! /bin/bash

awk -F, '       FILENAME = $1 { FS = ":" }

        { print $1 " "  $2 " "  $3 " " $4 }

                ' 
```

*   我想添加一些选项，例如： ./search thefile -C

我希望 reg ex -C 像一个选项并显示一些特定的东西。

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T13:54:02.807

只是为了让你开始。. .

如果文件 test.dat 看起来像这样

```
100:200:300:400 
```

然后这个 shell 脚本将打印每个值。

```
#! /bin/bash
awk 'BEGIN { FS = ":" } NF==4 && $0 ~/:/{ print FILENAME, $1 " "  $2 " "  $3 " " $4 }' $1 
```

使用单引号参数调用 shell 脚本“test.sh”，如

```
./test.sh 'test*.dat' 
```

该测试`NF>=4`确保在尝试打印之前至少有四个字段。正则表达式匹配`$0~/:/`确保该行至少有一个冒号。（可能有更好的方式来表达你想要做的事情。）

该`FILENAME`变量告诉您​​该行来自哪个文件。在您确信事情按预期工作后，您也许可以将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:05:19.580

你绝对不想这样做：

```
FILENAME = $1 
```

你可能是说

```
FILENAME == $1 
```

除此之外，如果没有一些上下文，包括示例输入和预期输出，脚本就没有真正意义。

# windows - 从数据库读取数据时需要制作进度条

> ID：10268364
> 
> 赞同：0
> 
> 时间：2012-04-22T13:35:33.050
> 
> 标签：windows, winforms

我的进度条有问题。我有一个按钮 ( `SELECT * FROM Table`)。

当我单击它时，我想在 datagridview 中显示数据。没关系，工作正常。

但现在我需要制作一个进度条，同时从数据库中读取数据。

默认情况下，进度条可见应为 false。阅读时 - 进度条可见是真的。

当从数据库中读取数据时，可见的进度条应该再次为假。

我有一个代码，但它工作不正确（1\. 进度条有问题等等）也许你可以给我另一个变种？

```
 private void button3_Click(object sender, EventArgs e)
 {
    timer1.Start();         
 }

 private void timer1_Tick(object sender, EventArgs e)
 {
        progressBar1.Visible = true;
        progressBar1.Minimum = 10;
        progressBar1.Maximum = 100;

        progressBar1.Increment(+10);
        if (progressBar1.Value == 90)
        {         
            groupBox3.Enabled = true;
            connect con = new connect();
            DataTable data = connnection.query("SELECT * FROM User WHERE surname LIKE '" + textBox1.Text + "%'");
            dataGridView1.DataSource = tb;

        }
        if(progressBar1.Value == 100)
          progressBar1.Visible = false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:54:43.573

你需要重新思考你的逻辑。

当您进行 SQL 调用时，将其视为在程序外部运行的代码，这意味着您只能启动它并等待它完成，但您无法访问内部结构，例如它的进展情况。

作为替代方案，您可以做的是：

1.  将您的 SQL 调用放在[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)中。MSDN 上有很好的例子，而且非常容易使用。
2.  当您调用 BackgroundWorker 时，这会释放您的 UI 以运行某种“请稍候”控件。由于您不知道 SQL 命令何时结束，因此至少您可以设置某种控制来让用户知道程序正在“处理”。
3.  一旦 BackgroundWorker`RunWorkerCompleted`发生，您可以删除您的 Please Wait 并绑定您的数据。

# mysql - MySQL 的远程访问问题

> ID：10268369
> 
> 赞同：0
> 
> 时间：2012-04-22T13:36:32.487
> 
> 标签：mysql, remote-access

我做了以下事情来连接到 MySQL 服务器。

```
[mysqld]
bind-address = xx.xx.xx.xx 
```

并且做了

```
GRANT ALL ON *.* TO user-name@'xx.xx.xx.xx' IDENTIFIED BY '******'; 
```

我可以从远程机器 telnet 到 3306 端口。但是我的 rake 任务无法连接。

可能是什么问题？我可以去哪里看？有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T13:45:44.110

您是否将服务器的 ip 作为主机名传递给“grant”指令？我认为这不是你想要的。用户的主机名是他的真实IP地址，而不是服务器的IP地址。使用通配符允许来自任何主机（但不是本地主机）的连接：

```
GRANT ALL ON *.* TO user-name@'%' IDENTIFIED BY '******'; 
```

# eclipse-rcp - 如何识别在 eclipse rcp 应用程序中运行的 viewpart 实例

> ID：10268373
> 
> 赞同：2
> 
> 时间：2012-04-22T13:37:34.017
> 
> 标签：eclipse-rcp

我在我的 eclipse rcp 应用程序中打开了多个视图实例。谁能告诉我如何识别正在运行的 viewpart 实例。以及如何以编程方式切换到相同 ViewId 的不同实例？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:07:24.600

我假设你已经`allowMultiple`在视图声明中设置了。

在您的代码中使用`getViewSite().getSecondaryId()`以获取当前视图的辅助 id。

并用于`IWorkbenchPage.showView(String viewId, String secondaryId, int mode)`激活不同的视图...

# c# - 在手风琴中找不到文件上传

> ID：10268376
> 
> 赞同：0
> 
> 时间：2012-04-22T13:37:49.573
> 
> 标签：c#, asp.net

我有一个文件上传控件的问题，我有一个手风琴，在 ContentTemplate 里面我有一个文件上传控件，当提交发送按钮时，我试图找到该控件，但总是让它为空。

```
<asp:Accordion ID="Accordion1" runat="server" AutoSize="None" FramesPerSecond="40"
                SelectedIndex="-1" TransitionDuration="100" FadeTransitions="true" RequireOpenedPane="false"
                SuppressHeaderPostbacks="true" ContentCssClass="accordionContent" HeaderCssClass="accordionHeader"
                HeaderSelectedCssClass="accordionHeaderSelected" 
                OnItemCommand="Accordion1_ItemCommand" 
                onitemdatabound="Accordion1_ItemDataBound">
                <HeaderTemplate>
                    <%#DataBinder.Eval(Container.DataItem, "order_id")%>
                    <asp:Label ID="lblOrderID" runat="server" Text='<%#Eval("description")%>'></asp:Label>
                </HeaderTemplate>
                <ContentTemplate>
                    <asp:Label ID="lblNotes" runat="server" Text='<%#Eval("notes")%>'></asp:Label>
                    <asp:Label ID="lbltext" runat="server" Text='להגשת מועמדות למשרה זו צרף קו"ח'></asp:Label>
                    <asp:FileUpload ID="FileUpload1" runat="server" />
                    <asp:Button ID="btnSend" runat="server" Text="שלח" CommandName="send" />
                </ContentTemplate>
            </asp:Accordion> 
```

* * *

```
 protected void Accordion1_ItemCommand(object sender, CommandEventArgs e)

    {
        if (e.CommandName == "send")
        {
            FileUpload fu = new FileUpload();
            fu = (FileUpload) FindControl("FileUpload1");
            if (fu.HasFile)
            {
                SmtpClient client = new SmtpClient();
                MailAddress from = new MailAddress("", "יש לך הודעה חדשה", System.Text.Encoding.UTF8);
                MailAddress to = new MailAddress("");
                MailMessage message = new MailMessage(from, to);
                message.Body = "";
                //Attachment data = new Attachment(FileUpload.
                //message.Attachments.Add(FindControl("fu"));
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T13:46:40.723

通过执行 FindControl，您将在顶级容器中进行搜索，并且 FindControl 不是递归的。如果您想找到上传控件，您需要从直接父级搜索，这似乎是 Accordion1。

```
FileUpload fu = Accordion1.FindControl("FileUpload1") as FileUpload; 
```

# php - 有没有像 GITLAB 这样用 PHP 编写的程序？

> ID：10268383
> 
> 赞同：15
> 
> 时间：2012-04-22T13:38:43.397
> 
> 标签：php, gitlab

我正在寻找一个可以在我公司的 Intranet 上运行的程序来帮助整理项目。GitHub 是不可能的，因为我不会为私人回购付费，但我喜欢 GitHub 的外观。

GITLAB 也不错，我会选择它，除非我的服务器运行的是 PHP 而不是 Ruby。有解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T08:26:06.003

有一些 PHP 项目，但与 GitLab 相比，所有项目都没有积极开发

*   gitphp - [http://gitphp.org/projects/gitphp/wiki](http://gitphp.org/projects/gitphp/wiki) ...有点不喜欢该项目的网站基于 Redmine ... 18 个贡献者 - 只有 1 个似乎是活跃的[http://www.ohloh。净/p/gitphp/贡献者](http://www.ohloh.net/p/gitphp/contributors)
*   mtrack - [http://mtrack.wezfurlong.org/features.html](http://mtrack.wezfurlong.org/features.html) ... 9 位贡献者 - 2 位活跃[http://www.ohloh.net/p/mtrack/contributors](http://www.ohloh.net/p/mtrack/contributors)
*   Redmine-Php 似乎已经死了（主页已关闭...... git-repo 自 1 年以来未更新）
*   traq 似乎也很有趣... [http://traq.io/](http://traq.io/)

当然，还有更多我不知道的:)

随意在[https://www.ohloh.net](https://www.ohloh.net)上搜索trac、redmine、gitlab 和其他已知系统的类似项目。

在我看来，mtrack 似乎是最有前途的，因为它提供了在 UI 中分叉项目等功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T13:52:05.547

[此处列出了](http://alternativeto.net/software/gitlab/?platform=linux)GitLab 的替代方案。

关于 PHP，唯一的一个是[Redmine-Php](https://github.com/saadullahsaeed/redmine-php)，但开发活动很少。
所以似乎没有任何可行的PHP“GitLab-like”。

*   [Trac 使用 python](http://trac.edgewall.org/wiki/TracDev/DevelopmentEnvironmentSetup)。
*   [Redmine 在铁路上使用红宝石](http://www.redmine.org/)
*   [GitLab](http://gitlabhq.com/)本身使用 ruby​​。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-28T12:36:18.953

也许[phabricator](http://www.phabricator.com/)是你正在寻找的东西。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-22T13:49:59.877

使用[https://bitbucket.org/](https://bitbucket.org/)我将它用于我所有的私人存储库，它是可靠的。你也可以托管 git 和 svn 项目。

# python - 在python中尽早结束循环

> ID：10268388
> 
> 赞同：-2
> 
> 时间：2012-04-22T13:39:08.153
> 
> 标签：python, loops, if-statement, for-loop, while-loop

> **可能的重复：**
> [Python 提前离开循环](https://stackoverflow.com/questions/2184287/python-leave-loop-early)

所以，我在 python 中有一个循环，我需要它从另一个数字中获取一个数字，直到它为负数，并且每次减去时都有一条消息。问题是，如果变量符合第一个条件，它将通过整个循环来拟合条件并每次打印消息。

```
sb = bosshp12 - final
if sb <= 0:
    print( 'You need to do 1 second of damage to get a 4% Soulbound. ' )
sb - final
if sb <= 0:
    print( 'You need to do 2 seconds of damage to get a 4% Soulbound. ' ) 
```

因此，如果数字已经`< 0`在第一个 if 语句中，它仍然会通过。我希望循环在之后中断`sb <= 0`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T13:50:11.110

如果我做对了，所有代码都在一个while循环下，你可以使用break语句

```
sb = bosshp12 - final
    if sb <= 0:
            print( 'You need to do 1 second of damage to get a 4% Soulbound. ' )
            break
    sb - final
    if sb <= 0:
            print( 'You need to do 2 seconds of damage to get a 4% Soulbound. ' ) 
```

哦，elif 语句似乎也可以满足您的需要？

```
sb = bosshp12 - final
        if sb <= 0:
                print( 'You need to do 1 second of damage to get a 4% Soulbound. ' )
        sb - final
        elif sb <= 0:
                print( 'You need to do 2 seconds of damage to get a 4% Soulbound. ' ) 
```

这样，如果 sb <=0 在第一次检查时为 True，则不会检查第二次。

# javascript - 为什么没有调用该函数？

> ID：10268391
> 
> 赞同：0
> 
> 时间：2012-04-22T13:39:23.363
> 
> 标签：javascript, html

我正在根据 URL 测试一个东西。如果 URL 以*logout.jsp*结尾，则应显示注销消息，如果 URL 以*index.jsp*结尾，则不应显示该消息。为此，我使用了 `document.getElementById("id").hidden = value`. 但这不起作用。事实上，该函数没有被调用。我不知道问题是什么。

**HTML 片段**

```
<table id="LogoutMessage" onload="urlCheck()">
            <tr>
                <td>
                    <h2>You are successfully logged out !</h2>
                </td>
            </tr>
        </table> 
```

**javascript函数**

```
<script type="text/javascript">
    function urlCheck() {
        alert("in the function urlCheck");
        if(document.URL.endsWith() = "logout.jsp")
            document.getElementById("LogoutMessage").hidden = false;
        else if(document.URL.endsWith() = "index.jsp")
            document.getElementById("LogoutMessage").hidden = true;                
    }
</script> 
```

***JSP中的***整页****

 ***```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>PhotoArtWork</title>
    <jsp:include page="reusable/stylesheets.html" />
    <script type="text/javascript" src="js/modernizr-1.5.min.js"></script>
</head>
<body>
    <jsp:include page="reusable/header.html" />
    <!-- begin content --><div id="site_content">
        <table id="LogoutMessage" onload="urlCheck()">
            <tr>
                <td>
                    <h2>You are successfully logged out !</h2>
                </td>
            </tr>
        </table>
  <ul class="slideshow">
    <li class="show"><img width="950" height="450" src="images/home_1.jpg" alt="&quot;You can put a caption for your image right here&quot;"></li>
    <li><img width="950" height="450" src="images/home_2.jpg" alt="&quot;You can put a description of the image here if you like, or anything else if you want.&quot;"></li>
    <li><img width="950" height="450" src="images/home_3.jpg" alt="&quot;You can put a description of the image here if you like, or anything else if you want.&quot;"></li>

  </ul>
  </div>
<!-- end content -->
<script type="text/javascript">
    function urlCheck() {
        alert("in the function urlCheck");
        if(document.URL.endsWith() = "logout.jsp")
            document.getElementById("LogoutMessage").hidden = false;
        else if(document.URL.endsWith() = "index.jsp")
            document.getElementById("LogoutMessage").hidden = true;                
    }
</script>
<jsp:include page="reusable/footer.html" />
</body>
</html> 
```

问题是什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:41:29.990

没有`.hidden`属性。它是元素样式的一部分，您将使用可见性。

```
document.getElementById("LogoutMessage").style.visibility = "hidden"; // or "visible" 
```

如果我不得不猜测，你想使用`display`而不是`hidden`.

```
document.getElementById("LogoutMessage").style.display = "none"; // or "block" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T13:54:12.067

要调用您的代码，请执行以下操作：

`<body onload="urlCheck()">`

或者将脚本放在`body`标签的最后，只包含函数的内部代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T13:58:40.810

Javascript 没有原生的`endsWith`. 所以你必须先创建一个

```
String.prototype.endsWith = function(suffix) {
    return this.indexOf(suffix, this.length - suffix.length) !== -1;
}; 
```

此外，没有~~`style.hidden property`~~. 请`style.display`改用

正确的函数`urlCheck`应该是这样的

```
function urlCheck() {
    alert("in the function urlCheck");
    if(document.URL.endsWith("logout.jsp"))
        document.getElementById("LogoutMessage").style.display= 'block';
    else if(document.URL.endsWith("index.jsp"))
        document.getElementById("LogoutMessage").style.display= 'none';
} 
```

哦，正如 Mic 所说，请像这样调用函数 onload。

```
window.onload = function() { urlCheck(); } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T15:08:03.773

您可以使用 jQuery。包括

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

并使用

```
$('#LogoutMessage').hide(); 
```

用于隐藏消息和

```
$('#LogoutMessage').show(); 
```

用于显示消息

调用你的函数

```
$(document).ready(function(){
    urlCheck();
})
function urlCheck() {
    var url = document.URL;
    var urlArr = url.split('/')
    if($.inArray('logout.jsp', urlArr))
    {
        $('#LogoutMessage').show();
    }
    if($.inArray('index.jsp', urlArr))
    {
        $('#LogoutMessage').hide();
    }
} 
```

试试上面的。***

# wordpress - Wordpress remove_role（）不起作用

> ID：10268392
> 
> 赞同：1
> 
> 时间：2012-04-22T13:39:25.060
> 
> 标签：wordpress, user-roles

嗨，我正在尝试删除一些自定义创建的角色，

```
$wp_roles = new WP_Roles();
$wp_roles->remove_role("your_role"); 
```

一些角色删除得很好。但是当我第一次删除几个 otehr 角色时，它们似乎已成功删除。但在下次刷新后，他们正在重新创建。

我很确定，如果它不存在，这不是重新创建角色的东西。当我通过 add_role 创建这些角色时，这些角色是完全独立的，没有内部代码创建这些角色。

谢谢

我尝试使用“用户角色编辑器”插件也没有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:41:39.403

如果您有权访问 phpmyadmin，请尝试直接编辑数据库。

**wp_user_roles**在**wp_options**表中。

每个用户的角色/能力都在 wp_usermeta 中的**wp_capabilities****记录**中

 **在那里，您可以添加/编辑/删除任何具有最少 mysql 知识的角色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-23T16:06:05.337

试试这个

```
//check if role exist before removing it
if( get_role('subscriber') ){
      remove_role( 'subscriber' );
}

//check if role exist before removing it
if( get_role('contributor') ){
      remove_role( 'contributor' );
}

//check if role exist before removing it
if( get_role('editor') ){
      remove_role( 'editor' );
}

//check if role exist before removing it
if( get_role('author') ){
      remove_role( 'author' );
} 
```**

# php - PHP - 将 mysql 结果数组转换为局部变量数组？

> ID：10268396
> 
> 赞同：0
> 
> 时间：2012-04-22T13:39:52.237
> 
> 标签：php, arrays

我有以下代码：

```
$catsQuery = "
        SELECT id, category
        FROM categories
        ORDER BY category
";
$catsSql = mysqli_query($link, $catsQuery);

$cats = array();

mysqli_data_seek($catsSql, 0);
while($rowCats = mysqli_fetch_assoc($catsSql))
{
    $cats[$rowCats['id']]['catName'] = $rowCats['category'];
}

foreach ($cats as $catKey => $cat['$catName'])
{
    $pageContent .= "<p>$catKey | $catName</p>
    ";
} 
```

这两列`id`包含`category`如下数据：

*   **编号 | 类别**
*   1 | 鞋
*   2 | 衬衫
*   3 | 帽子

我想做的是将表中的所有行`categories`变成一个名为的局部变量`cats`

在 while 循环中，当每个 rows 数组键成为类别 id 时，会生成一个本地数组，然后将类别名称分配给该键。`var_dump($cats)`表明每一行都被添加到变量中，正如我所描述的。

但是在 foreach 中，由于某种原因，它作为新行返回的每个 id，但类别的名称显示为最后可能的类别名称，跨越所有键。

为什么变量上的转储显示一组数据，但以这种内容方式打印的循环显示这个奇怪的打嗝？

像这样：

*   1 | 帽子
*   2 | 帽子
*   3 | 帽子

如果有人可以阐明我做错了什么导致此问题，将不胜感激。

谢谢你！！

编辑：

由于以下答案而创建的功能代码：

```
//categories to local array
$catsQuery = "
    SELECT id, category, catDirPath
    FROM categories
    ORDER BY category
";
$catsSql = mysqli_query($link, $catsQuery);
$cats = array();
mysqli_data_seek($catsSql, 0);
while($rowCats = mysqli_fetch_assoc($catsSql))
{
    $cats[$rowCats['id']]['catName'] = $rowCats['category'];
    $cats[$rowCats['id']]['catPath'] = $rowCats['catDirPath'];
}
// subCats to local array
$subsQuery = "
    SELECT id, subCat, category_id, subDirPath
    FROM subCats, sub_categories
    WHERE subCats.id = sub_categories.sub_id
    ORDER BY category_id
";
$subsSql = mysqli_query($link, $subsQuery);
$subs = array();
mysqli_data_seek($subsSql, 0);
while($rowSubs = mysqli_fetch_assoc($subsSql))
{
    $subs[$rowSubs['id']]['subName'] = $rowSubs['subCat'];
    $subs[$rowSubs['id']]['catId'] = $rowSubs['category_id'];
    $subs[$rowSubs['id']]['subPath'] = $rowSubs['subDirPath'];
}
// loop through categories and if subs exist, add to resultset and display  
foreach ($cats as $catId => $cat)
{
    $pageContent .= "
    <div style='margin-bottom: 10px; border black solid 1px;'>
    <ul>
    <li style='list-style-type: none; margin-bottom: 5px;'><a href='$docPath/category/{$cat['catPath']}/'>{$cat['catName']}</a></li>
    ";
    foreach ($subs as $subId => $sub)
    {
        if($sub['catId'] == $catId)
        {
        $pageContent .= "
        <li style='list-style-type: circle; padding-left: 15px; font-size: 70%;'><a href='$docPath/category/{$cat['catPath']}/{$sub['subPath']}/'>{$sub['subName']}</a></li>
        ";
        }
    }
    $pageContent .= "
    </ul>
    </div>
    ";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T13:44:22.143

构建数组后，您必须像这样执行 foreach 循环：

```
foreach ($cats as $catId => $cat)
{
    $pageContent .= "<p>$catKey | ".$cat['catName']."</p>";
} 
```

但为什么不`$cats[$rowCats['id'] = $rowCats['category'];`首先呢？那么这就足够了：

```
foreach ($cats as $catId => $catName)
{
    $pageContent .= "<p>$catKey | $catName</p>";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T13:44:50.510

你的代码看起来不错。在 while 循环之后，您是否在 $cats 数组上尝试过 var_dump？我怀疑这条线给你带来了问题

```
foreach ($cats as $catKey => $cat['$catName']) 
```

你可能应该改变它

```
foreach ($cats as $catKey => $catDetails)
{
    $catName = $catDetails['catName'];
    $pageContent .= "<p>$catKey | $catName</p>";
} 
```

# wpf - wpf 富文本框图像移动和流文档内容作为电子邮件

> ID：10268399
> 
> 赞同：2
> 
> 时间：2012-04-22T13:40:22.440
> 
> 标签：wpf, image, richtextbox, flowdocument

我有3个问题：

1.  有什么方法可以使用鼠标移动 wpf Richtextbox 中的图像？

    我将图像添加到 rtb 如下：

    ```
    BitmapImage bitmap = new BitmapImage(new Uri(@"C:\daf\apple.png"));
    Image image = new Image();            
    image.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
    image.Source = bitmap;
    image.Width = 60;
    image.Height = 70;
    myRTB.BeginChange();
    TextPointer tp = myRTB.CaretPosition.GetPositionAtOffset(0, LogicalDirection.Forward);
    InlineUIContainer imageContainer = new InlineUIContainer(image, tp);
    myRTB.CaretPosition = imageContainer.ElementEnd;
    myRTB.EndChange();
    myRTB.Focus(); 
    ```

2.  将图像放入 rtb 并在其上写一些字后，我将其保存为 html 格式，并从richtextbox flowdocument 内容中获取了 html 代码。但是当我将相同的保存的 html 代码重新使用回（html 到 xaml 转换器）流文档时，图像大小非常大。

    在html代码中：

    ```
    "IMG src=\"file:///C:\daf\apple.png\" STYLE=\"width:60;height:70;font-family:tahoma;font-size:11;\" 
    ```

    当我将 RTB 内容保存到 html 时，这是相同的 html 代码部分。但是当使用这个保存的 html 进行渲染时，图像非常大。

    出于测试目的，我在 html 代码中将宽度和高度值更改为 30 并尝试。但图像仍然显示为非常大。

    有什么想法吗？

3.  无论如何将wpf Richtextbox flowdocument的内容（其中包含图像）作为电子邮件发送？

非常感谢它。

# c# - 以特定格式读取和显示数据

> ID：10268400
> 
> 赞同：0
> 
> 时间：2012-04-22T13:40:26.497
> 
> 标签：c#, xml, winforms

这是一些 XML：

```
<CHECKOUT>
   <EQUIPMENT path="#rtu1_130" name="RTU-1 Gym">
   <POINT ref="rstat/zone_temp">
     <notation />
     <date>Fri 17 Aug 2007</date>
     <time>10:1:22:0</time>
     <operator>th</operator>
     <done>true</done>
   </POINT>
   <POINT ref="sfan">
     <operator>th</operator>
     <done>true</done>
     <notation />
     <time>10:15:36:0</time>
     <date>Fri 17 Aug 2007</date>
   </POINT>
<EQUIPMENT path="#rtu11_130" name="RTU-11 Rm 157F">
   <POINT ref="da_temp">
     <done>true</done>
     <notation />
     <date>Mon 9 Jul 2007</date>
     <time>13:44:10:0</time>
     <operator>th</operator>
   </POINT>
   <POINT ref="clg_stg1">
     <notation />
     <done>true</done>
     <time>10:42:7:0</time>
     <date>Fri 17 Aug 2007</date>
     <operator>th</operator>
   </POINT>  
 </EQUIPMENT>
</CHECKOUT> 
```

这是我的代码：

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load("C:/Users/David/Desktop/co.xml");
XmlNodeList lstEquip = xmlDoc.GetElementsByTagName("EQUIPMENT");
XmlNodeList lstPoint = xmlDoc.SelectNodes("/CHECKOUT/EQUIPMENT/POINT");

foreach (XmlNode node1 in lstEquip)
{
  XmlElement companyElement = (XmlElement)node1;
  lstPoints.Items.Add(companyElement.Attributes["name"].InnerText);

  foreach (XmlNode node2 in lstPoint)
  {
    XmlElement companyElement2 = (XmlElement)node2;
    lstPoints.Items.Add(companyElement2.Attributes["ref"].InnerText);

  }
  lstPoints.Items.Add("*******************");
} 
```

这是一个“故障排除”应用程序，我不会在现实生活中通过 lstPoints（列表框）来处理这两个元素，但 senario 适用于我的问题。foreach 将按如下方式加载 lstPoints：

RTU-GYM rstat/zone_temp Fri 17 Aug 2007 10:1:22:0 th true.....

它将一直持续到文件末尾。然后：

RTU-11 Rm 157F....

并且会在它得到另一个之前循环一遍。

我需要 lstPoints 显示如下：

RTU-Gym rstat/zone_temp sfan

* * *

RTU-11 Rm 157F da_temp clg_stg1

按照这个顺序......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:25:49.457

xsd 中需要猜测的给定名称和 ref 属性

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load("C:/Users/David/Desktop/co.xml");
foreach(XmlNode equipmentNode in xmlDoc.DocumentElement.SelectNodes("EQUIPMENT"))
{
  lstPoints.Items.Add(equipmentNode.Attributes["name"].Value);
  foreach(XmlNode pointNode in equipmentNode.SelectNodes("POINT"))
  {
    lstPoints.Items.Add(pointNode.Attributes["ref"]).Value);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:34:36.650

这是一个 Linq2Xml 替代方案

```
XDocument xDoc = XDocument.Load(....);
var equipments = xDoc.Descendants("EQUIPMENT")
                .Select(eq => new
                {
                    Name = eq.Attribute("name").Value,
                    Path = eq.Attribute("path").Value,
                    Points = eq.Descendants("POINT")
                            .Select(p=>new 
                            {
                                Ref = p.Attribute("ref"),
                                Operator = p.Element("operator").Value
                            })
                            .ToArray()

                })
                .ToArray(); 
```

-

```
foreach (var eq in equipments)
{
    Console.WriteLine(eq.Name);
    foreach (var p in eq.Points)
    {
        Console.WriteLine("\t" + p.Ref);
    }
} 
```

# c# - 如何使用 CallNtPowerInformation（带互操作）获取 Windows SystemExecutionState？

> ID：10268401
> 
> 赞同：1
> 
> 时间：2012-04-22T13:40:32.160
> 
> 标签：c#, interop, pinvoke

我真的很努力在 C# 中使用[CallNtPowerInformation函数。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372675%28v=vs.85%29.aspx)我需要获取 Windows SystemExecutionState。[（此处列出的](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373208%28v=vs.85%29.aspx)可能值）。

我找到了合适的 C# 签名：

```
 [DllImport("powrprof.dll", SetLastError = true)]

    private static extern UInt32 CallNtPowerInformation(
         Int32 InformationLevel,
         IntPtr lpInputBuffer,
         UInt32 nInputBufferSize,
         IntPtr lpOutputBuffer,
         UInt32 nOutputBufferSize
         ); 
```

现在我需要使用信息级别 16 来读取“SystemExecutionState”。这是我到目前为止的代码：

```
IntPtr status = Marshal.AllocCoTaskMem(Marshal.SizeOf(typeof(ulong)));
UInt32 returnValue = CallNtPowerInformation(
    16, 
    (IntPtr)null, 
    0, 
    status, (
    UInt32)Marshal.SizeOf(typeof(ulong)));
Marshal.FreeCoTaskMem(status); 
```

根据微软文档：

> lpOutputBuffer 缓冲区接收一个包含系统执行状态缓冲区的 ULONG 值。

如何从 IntPtr 获取 ULONG 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T13:41:50.590

使用 a`out uint`而不是`IntPtr`.

```
[DllImport("powrprof.dll", SetLastError = true)]
private static extern UInt32 CallNtPowerInformation(
     Int32 InformationLevel,
     IntPtr lpInputBuffer,
     UInt32 nInputBufferSize,
     out uint lpOutputBuffer,
     UInt32 nOutputBufferSize
);

uint result;
CallNtPowerInformation(..., out result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T13:43:55.963

调用[`Marshal.ReadInt32(status)`](http://msdn.microsoft.com/en-us/library/eawzfdz5.aspx)以获取值。

```
uint statusValue = (uint)Marshal.ReadInt32(status); 
```

该类`Marshal`具有一整套`ReadXXX`方法，可让您从非托管内存中读取。

# iphone - 将应用程序部署到不同的 iPhone 设备

> ID：10268403
> 
> 赞同：0
> 
> 时间：2012-04-22T13:40:47.320
> 
> 标签：iphone

我有 4 台设备安装了不同的 ios 版本。我的mac上有5个usb接口。是否可以将 ad hoc 版本部署到这些设备上进行自动测试？我想知道它是否需要苹果脚本？

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:15:38.433

Transporter Chief 是一个 ruby​​ 程序，其编写/旨在完成此任务。这是一篇关于设置和使用它的博客文章：

[http://gamua.com/blog/2012/03/how-to-deploy-ios-apps-to-the-iphone-via-the-command-line/](http://gamua.com/blog/2012/03/how-to-deploy-ios-apps-to-the-iphone-via-the-command-line/)

# css - 颜色的减法 - 需要得到一种颜色的透明值

> ID：10268409
> 
> 赞同：0
> 
> 时间：2012-04-22T13:41:48.947
> 
> 标签：css, transparency, alpha

我只是想获得 rgb 颜色（#ebfcff）的 rgba 值。rgb 颜色是放在白色背景上时的 rgba。（a 代表阿尔法）

所以：searchedColour + #ffffff = #ebfcff

在我的评估中，解决方案是从#ebfcff 中减去白色。但是你如何减去颜色？

我已经在寻找合适的解决方案。有谁知道如何从给定的 RGB 颜色中减去白色以获得新的颜色，它是 rgba 格式的，当它与白色重叠时等于给定的颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T21:41:52.553

Colour values aren't just added.

When you plot a colour `X` on top of a colour `Y`, the value of each colour channel of the resulting colour, `C`, is given by:

```
C = X * a + Y * (a-1) 
```

Using the floating point representation (each channel is a value from 0 to 1); where `a` is the alpha channel of `X`. (It's easily converted back to 0-255).

For white, `Y` is 1 for all channels, so:

```
C = X * a + (a-1) 
```

So, if `a` is 0, you clearly can't find X, which makes sense: If the colour was totally transparent, it makes no difference to the combined colour.

Similarly, if your colour was white (`X`=1), you couldn't determine the alpha (the combined colour would be white regardless of the alpha).

Also, you can't find either `X` or `a` without knowing the other.

If you knew the alpha of the colour, then you could determine what the colour was, but if your combined colour (`C`) is a discrete value (such as an integer from 0 to 255), then it is rounded, so you can only get an approximation of the plotted colour (`X`). How accurate it is depends on the alpha (the more transparent the plotted colour was, the less accurately you can determine the colour).

So, solving for X:

```
 X * a = C - a - 1
Therefore:  X = (C - a - 1 ) / a 
```

For 8-bit colour channels (24-bit colour):

```
X = 255 * ( C/255 - a/255 - 1 ) / (a/255) 
```

(Given a 6-digit hexadecimal value, apply this for each pair of digits, `C`).

You could optimise it to avoid the floating point calculation.

I don't know if that's any use, but that's all you can do.

# java - 将值从 jsp 传递到 servlet

> ID：10268415
> 
> 赞同：0
> 
> 时间：2012-04-22T13:42:24.810
> 
> 标签：java, jsp, servlets

在这个特定问题上我需要你的帮助我想将 .jsp 程序中隐藏输入类型的值传递给 servlet 程序

我在做的基本上就是这个

```
<input type="hidden" name="articleId" id="articleId" value=" <%request.getParameter("articleId");%>"/> 
```

并且从 servlet 我得到了价值

```
String articleId = request.getParameter("message");
        PrintWriter out = response.getWriter();
        out.println(articleId); 
```

它不打印任何 think 。jsp表单方法是post，servlet方法是doPost

任何想法为什么它不传递参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T13:43:42.160

您使用了错误的参数，应执行以下操作：

```
String articleId = request.getParameter("articleId");
PrintWriter out = response.getWriter();
out.println(articleId); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T14:01:32.933

1：更改您的输入值（您忘记了 <% **=**）：

```
<input type="hidden" name="articleId" id="articleId" value="<%=request.getParameter("articleId");%>" /> 
```

2：在getParamater中改变你的论点：

```
String articleId = request.getParameter("articleId");
PrintWriter out = response.getWriter();
out.println(articleId); 
```

# database - Redis读取配置文件错误：

> ID：10268416
> 
> 赞同：1
> 
> 时间：2012-04-22T13:42:35.203
> 
> 标签：database, configuration, nosql, redis, config

```
*** FATAL CONFIG FILE ERROR ***
Reading the configuration file, at line 135
>>> 'slave-serve-stale-data yes'
Bad directive or wrong number of arguments 
```

[同一个问题](https://stackoverflow.com/questions/5367713/unable-to-start-redis-server-due-to-config-file-error)

但我没有安装旧版本（redis 版本是 2.4.10），无法运行 src/redis-server（哪里有`src`dir？），我的系统是 archlinux，由 pacman 安装。

谢谢。

# php - jquery 从数据到数据

> ID：10268417
> 
> 赞同：0
> 
> 时间：2012-04-22T13:42:46.550
> 
> 标签：php, click, jquery, jquery-click-event

我有一个 div 列表，我想要实现的是当用户单击 column 时，它会获取数据方将其分配给变量 from，当再次单击另一列时，它将数据分配给变量。

我确实知道如何通过 ajax 向 php 发送值，只是从和到获取变量的事实是问题所在。这是一个棋盘游戏，我需要将两个变量从和到发送到服务器

```
<div class="column" data-square="4-4">
    <div class="lol">p</div>
</div>
<div class="column" data-square="4-5">
    <div class="lol">p</div>
</div>

<div class="column" data-square="4-6">
    <div class="lol">p</div>
</div>

$( ".column" ).click(function(){
    var from = $(this).data('square');
    var to = $(this).data('square');    
    alert(to);
    alert(from);
}); 
```

假设有 10 个 div //其中 10 个具有不同的 data-square p 值，其中用户点击其中一个，它应该将数据平方值存储在变量中，当用户再次点击另一个 div 时，它应该存储变量在变量中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:01:37.753

这是一种方法。使变量可以从点击事件外部访问`from`并`to`跟踪它们的值。首先为 赋值`from`，然后为`to`并执行您的 ajax 请求。Javascript 看起来像这样：

```
// Create a function scope so we don't messy the global one
(function() {

    var from = null;
    var to = null;

    $(".column" ).click(function(){
        if(from === null)
        {
            from = $(this).data('square');
        }
        else
        {
            to = $(this).data('square');

            //
            // DO YOUR AJAX STUFF HERE
            //

            // Reset
            from = to = null;
        }
    });

}()); 
```

[这是一个 JSFiddle 演示](http://jsfiddle.net/jm4eb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T14:13:47.127

摆弄：

[http://jsfiddle.net/iambriansreed/4674X/](http://jsfiddle.net/iambriansreed/4674X/) HTML：

```
<div id="notes">
    <span class="note1">Click Move From</span>
    <span class="note2">Click Move To</span>
    <span class="note3"></span>
</div>
<div class="column" data-square="4-4">
    <div class="lol">p</div>
</div>
<div class="column" data-square="4-5">
    <div class="lol">p</div>
</div>

<div class="column" data-square="4-6">
    <div class="lol">p</div>
</div> 
```

jQuery: var from_data = false, to_data = false;

```
$('#notes .note1').show().siblings().hide(); 

$( ".column" ).click(function(){

    if(from_data && to_data) return;  

    if(!from_data){
        $('#notes .note2').show().siblings().hide(); 
        from_data = $(this).data('square');

    }else if(!to_data){
        to_data = $(this).data('square');

        $('#notes .note3').text(
        'Moved from '+from_data+' to '+to_data+'.'
        ).show().siblings().hide();

        setTimeout(function(){
            $('#notes .note3').fadeOut(function(){
                from_data = false; to_data = false;
                $('#notes .note1').show().siblings().hide();                
            });        
        },2000);

    }

});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T14:08:04.160

如果您知道 Jquery ajax 关系，您应该使用 Jquery 的 ajax 函数 ( `$.ajax({... });`) 将数据传递到您的 php 文件，并使用 JSON 类型。`echo json_encode($array);`您可以在 php 的 json_encode 函数（如）之后从 php 文件中获取一个数组。

# objective-c - 在两个 NSString 中保留换行符

> ID：10268421
> 
> 赞同：0
> 
> 时间：2012-04-22T13:43:16.293
> 
> 标签：objective-c, ios, nsstring, uitextview, bing-api

在我的应用程序中，我翻译 TextView 的内容并将其呈现给用户。

**我的问题是：**第一个字符串的格式很好，换行符在翻译过程中变松了。

识别文本：[图 1](http://dl.dropbox.com/u/4736649/2012-04-22%2017.57.48.png) 翻译文本：[图 2](http://dl.dropbox.com/u/4736649/2012-04-22%2017.58.05.png)

**我的问题是：**如何以某种方式在与第一个 NSString 相同的位置附加相同数量的换行符，让它看起来像第一个字符串？

*翻译：*

```
[[MSBingTranslator sharedTranslator] initWithDelegate:self andTranslateText:txtView.text fromLan:detectedLanguage toLan:@"de"];

- (void) MSBingTranslator:(MSBingTranslator *)cls translatedText:(NSString *) text {
    txtView.text = text;
}

- (void) MSBingTranslator:(MSBingTranslator *)cls detectedLanguage:(NSString *)lan {
    detectedLanguage = lan;
}

- (void) MSBingTranslator:(MSBingTranslator *)cls failedWithError:(NSString *) error {
} 
```

我正在使用[https://github.com/moeseth/Bing-Translator](https://github.com/moeseth/Bing-Translator)进行翻译，这是一个围绕 Microsoft 必应翻译的 Objective-c 包装器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T15:41:46.750

我不认为你真的能做到这一点，主要是因为当你翻译时，你经常会得到与开始时不同的字数。确定哪些单词/组与之前/之后字符串中的哪些单词匹配将非常困难（除非您一次翻译一个单词而不会翻译相同）。如果不是因为这个，您可以在翻译后的字符串上使用 componentsSeparatedByCharactersInSet 并通过旧数组查找空字符串以确定在新数组中添加新行的位置。

顺便说一句，您可以使用以下方法，而不是创建数组然后将其写入可变字符串：

```
NSMutableString *mString = [txtView.text mutableCopy]; 
```

（除非您将数组用于其他用途）

# android - 使用画布在游戏中显示对话框

> ID：10268422
> 
> 赞同：4
> 
> 时间：2012-04-22T13:43:17.713
> 
> 标签：android, multithreading, dialog, surfaceview

在发现开始一个新的意图可能不是通知 GameOver 用户的正确方法之后，我现在正在努力使用 runOnUiThread、Runnable 和对话框。

问题：我将如何以及在哪里实现 Dialog.show() 来通知用户游戏已经结束？在我的日志中，一切正常（所以我设法在应该的时候得到消息游戏结束）。在某些时候，布尔 GameManger.LevelEnded 切换为 true。发生这种情况时，我想显示对话框..

我已经尝试过 runOnUiThread、Runnable 和 Async 线程。想不通。

我有一个游戏。活动 AppelzActivity ：

```
public class AppelzActivity extends Activity {
    /** Called when the activity is first created. */

    private static final String TAG = AppelzActivity.class.getSimpleName();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(null);

        // requesting to turn the title OFF
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        // making it full screen
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        // set our MainGamePanel as the View
        setContentView(new MainGamePanel(this));
        Log.d(TAG, "View added");
    }
} 
```

我的 MainGamePanel 类：

```
public class MainGamePanel extends SurfaceView implements
SurfaceHolder.Callback {

// DECLARING VARS (REMOVED FOR READABILITY)

    public MainGamePanel(Context context) {
        super(context);
        getHolder().addCallback(this);
        Display display = ((WindowManager) getContext().getSystemService(Context.WINDOW_SERVICE))
        .getDefaultDisplay();
        GameManager.panel = this;

        width = display.getWidth();
        height = display.getHeight();
        RectScreen.set(0,0,width,height);

        // CREATING CONTROLS, MISSION AND VISIBLE OBJECTS (REMOVED FOR READABILITY)

        thread = new MainThread(getHolder(), this);
        setFocusable(true);
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        thread.setRunning(true);
    }

        // HANDELING ON TOUCH EVENTS AND SUCH (REMOVED FOR READABILITY)

    @Override
    protected void onDraw(Canvas canvas) {
        // fills the canvas with black
        canvas.drawColor(Color.BLACK);
        backGnd.draw(canvas);

        basket.draw(canvas);
        for (int i = 0; i < AppleList.size();i++){
            AppleList.get(i).draw(canvas);
        }
        btnMoreFruit.draw(canvas);
        btnLessFruit.draw(canvas);

        if (GameManager.count){

            glyphsCount.drawString(MainThread.canvas, Integer.toString(GameManager.i), (width/2-120), (height/2-120));

        }

    }
} 
```

最后，MainThread 类：

```
public class MainThread extends Thread {

    private static final String TAG = MainThread.class.getSimpleName();

    private SurfaceHolder surfaceHolder;
    private MainGamePanel gamePanel;
    private DialogManager dialogManager;
    public static boolean running;
    public static Canvas canvas;

    public void setRunning(boolean running) {
        MainThread.running = running;
    }

    public MainThread(SurfaceHolder surfaceHolder, MainGamePanel gamePanel) {
        super();
        this.surfaceHolder = surfaceHolder;
        this.gamePanel = gamePanel;
        this.dialogManager = dialogManager;
    }

    @Override
    public void run() {
        // Canvas canvas;
        Log.d(TAG, "Starting game loop");
        while (running) {
            MainThread.canvas = null;
            // try locking the canvas for exclusive pixel editing on the surface

            try {
                MainThread.canvas = this.surfaceHolder.lockCanvas();
                synchronized (surfaceHolder) {
                    // update game state
                    this.gamePanel.update();

                    // render state to the screen
                    // draws the canvas on the panel
                    this.gamePanel.onDraw(MainThread.canvas);

                }
            } finally {
                // in case of an exception the surface is not left in
                // an inconsistent state
                if (MainThread.canvas != null) {
                    surfaceHolder.unlockCanvasAndPost(MainThread.canvas);
                }
            } // end finally
        }
    }
} 
```

Basket.java - 这是游戏中的一个对象。如您所见，如果它在某个位置，我开始一个 CountDown ：

```
public class basket {

 private Bitmap bitmap; // the actual bitmap
 private int x;   // the X coordinate
 private int y;   // the Y coordinate'
 public static int width;
 public static int height;
 public float X = 100;
 public float Y = 100;

 private boolean touched; // if droid is touched/picked up

 public basket(Bitmap bitmap, int x, int y) {
  this.bitmap = bitmap;

  width = bitmap.getWidth(); 
  height = bitmap.getHeight(); 
 }

 public Bitmap getBitmap() {
  return bitmap;
 }
 public void setBitmap(Bitmap bitmap) {
  this.bitmap = bitmap;
 }

 public int getWidth(){
      return bitmap.getWidth();
     }

     public int getHeight(){
      return bitmap.getHeight();
     }

 public int getX() {
  return x;
 }

 public void setX(float x) {

    // if basket is further than slotmargin 
     if (x + width/2 > SlotManager.SlotmarginX) {
        // if basket is NOT in CheckOut area    
         if (this.Y < MainGamePanel.height - 80 - height/2){
            x = SlotManager.SlotmarginX - width/2;

        } else {
            // if basket IS in CheckOut area
            x = MainGamePanel.width - width/2;

            // Start the countdown timer if not already running
            if (!GameManager.count){
                GameManager.count=true;
// --- HERE I START COUNTDOWN
                GameManager.handler.postDelayed(GameManager.runnable, 0);                               
            }

        }
    } else {

        // Basket is NOT in CheckOut area; stop countdown timer
        GameManager.count=false;
    }

     this.X = x;
 }

 public int getY() {
  return y;
 }
 public void setY(int y) {
        if (y + height/2 > MainGamePanel.height - 80){
            y = MainGamePanel.height - 80 - height/2;
        }

  this.Y = y;
 }

 public boolean isTouched() {
  return touched;
 }

 public void setTouched(boolean touched) {
  this.touched = touched;
 }

 public void draw(Canvas canvas) {
      canvas.drawBitmap(bitmap, X - width/2, Y - height/2, null);
 }

 public void handleActionDown(int eventX, int eventY) {
  if (eventX >= (X - width/ 2) && (eventX <= (X + width/2))) {
   if (eventY >= (Y - height/ 2) && (eventY <= (Y + height/ 2))) {
    // basket touched
    setTouched(true);
   } else {
    setTouched(false);
   }
  } else {
   setTouched(false);
  }

 }
} 
```

GameManager 中的倒计时是：

```
 @Override
        public void run()
        {
            if (SlotManager.alSlottedFruitList.size() > 0){
            //TODO Create Full screen countdown timer
                Log.d("", "Countdown Timer in GameManager " + i);

                i--;
                if (count && i > -1) // stop timer when count is false
                {
                    handler.postDelayed(runnable, 1000);
                } else {
                    if (i == -1){
                        Log.d("", "RoundUp the Level");

// --- HERE I WANT TO DO A LEVEL END AND SHOW THE DIALOG                        

                    }
                    // reset Countdown (if basket outside checkout)
                    i = 6;
                }
            } else {
                // reset Countdown (if slot has no fruits)
                i = 6;
            }
        }
    };

    public static void startCountDown() {
        handler.postDelayed(GameManager.runnable, 0);
    }

    public static void finishRound() {
        listener.onRoundFinished();
    }

    public static List<Integer> missionlist;

    public static void CreateMission(){
        int maxtotalitems = 6;
        missionlist = new ArrayList<Integer>();
        Random Rnd = new Random();

        for (int FruitType = 0; FruitType < FruitManager.fruitResources.size();FruitType++){
            for (int x = 0; x < Rnd.nextInt(maxtotalitems); x++){
                missionlist.add(FruitType); 
            }}

// --- HERE I WANT TO SHOW A DIALOG CONTAINING THE MISSION

        for (int x = 0; x < FruitManager.fruitResources.size();x++){
            Log.d("MISSION", "Mission for " + x + " : " + Collections.frequency(missionlist, x));
        }

// Let's show the Dialog containing the mission 

    }

    public void LevelEnd(){
        // First, count the Fruits in the slot
        SlotManager.countSlotInv();
        List<Integer> list = new ArrayList<Integer>();      
        // Fill itemIds with the types of fruits
        for (apple a : SlotManager.alSlottedFruitList){
            Integer itemId = Integer.valueOf(a.FruitType);
            list.add(itemId);
        }

            for (int key = 0; key < 3 ; key++) {
                boolean succeed = CheckMissionComplete(key, Collections.frequency(list, key));

                System.out.println(key + " : " + Collections.frequency(list, key));
                    Log.d("MISSION", "Number : " + key + " : succeed = " + succeed );                   
            }
            listener.onRoundFinished();
    }

    public boolean CheckMissionComplete(int key, int amount) {

        //CheckMission
        if (amount == Collections.frequency(missionlist, key)){
            return true;            
        } else {
        return false;
        }
    }

    public GameManager(GameListener listener) {
        this.listener = listener;
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T10:41:15.710

我认为，最简单的方法是通过监听器引入回调机制。为此，添加一个侦听器接口（例如`GameListener.java`），保持对该接口实例的引用并在类中调用其方法，您的所有游戏逻辑都出现在该类中（例如`Game.java`）。然后，让您`AppelzActivity`实现此接口并在调用适当的回调时显示对话框：

**`GameListener.java`**：

```
public interface GameListener {
    /** 
    * ...
    * NOTE: may be called on any thread
    */
    public void onRoundFinished();
    ...
} 
```

**`Game.java`**：

```
public class Game {
    private GameListener listener;

    public Game(GameListener listener) {
        this.listener = listener;
    }

    ...

    //Let's say, round finishes here
    public void finishRound() {
        ...

        listener.onRoundFinished();
    }
} 
```

**`AppelzActivity.java`**：

```
public class AppelzActivity extends Activity implements GameListener {

    private static final int DLG_ROUND_FINISHED = 1;

    ...

    @Override
    public void onRoundFinished() {
        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                showDialog(DLG_ROUND_FINISHED);
            }
        });
    }

    @Override
    protected Dialog onCreateDialog(int id) {
        Dialog dialog = null;
        switch (id) {
        case DLG_ROUND_FINISHED:
            AlertDialog.Builder builder = new AlertDialog.Builder(this);

            ... // init your dialog here

            dialog = builder.create();
            break;
        }
        return dialog;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T06:50:01.220

尽量保持简单。`GameManager`在您的班级中保留对上下文的引用。用它来显示你的对话框。

```
public class MainGamePanel extends SurfaceView implements
                                   SurfaceHolder.Callback {

public MainGamePanel(Context context) {
    super(context);
   .......
    GameManager.panel = this;
    GameManager.context = context; // add a reference to the context in GameManager..
   ........
   ........

    thread = new MainThread(getHolder(), this);
    setFocusable(true);
} 
```

在你`GameManager`使用它来调用`runOnUIThread()`

```
 Activity context;  // Context of the main activity..
 ........
 @Override
    public void run()
    {
        if (SlotManager.alSlottedFruitList.size() > 0){
        //TODO Create Full screen countdown timer
            Log.d("", "Countdown Timer in GameManager " + i);

            i--;
            if (count && i > -1) // stop timer when count is false
            {
                handler.postDelayed(runnable, 1000);
            } else {
                if (i == -1){
                    Log.d("", "RoundUp the Level");

// --- HERE I WANT TO DO A LEVEL END AND SHOW THE DIALOG    

                    context.runOnUIThread(new Runnable() {   // Use the context here
                        @override
                        public void run() {
                            showLevelEndDialog();
                        }
                    }
                }
                // reset Countdown (if basket outside checkout)
                i = 6;
            }
        } else {
            // reset Countdown (if slot has no fruits)
            i = 6;
        }
    }
}; 
```

# java - Y 偏移，坦克上的轨道 - 三角学

> ID：10268425
> 
> 赞同：2
> 
> 时间：2012-04-22T13:43:46.837
> 
> 标签：java, android, graphics, trigonometry

坦克履带需要在坦克的任一侧，坦克可以面向360度旋转。这是一张图片来解释这一点：

[http://imgur.com/ySFTk](http://imgur.com/ySFTk)

坦克履带目前仅水平偏移，我试图沿坦克核心垂直偏移它们（不工作）。

这是我到目前为止所做的：

```
private void tracksPosition()
{
    _DegreeToRadien = Math.toRadians(_degrees);

    _ObjectXCenter = (int) (_object_x + ((_itemAnimation.getWidth() / 2)) - _trackAnimationLeft.getWidth() / 2);
    _ObjectYCenter = (int) (_object_y + ((_itemAnimation.getHeight() / 2)) - _trackAnimationLeft.getHeight() / 2);

    //For left track
    _xOffset = -1 * (_itemAnimation.getHeight() / 2);

    _trackLeftPosition.set
    (
        (int)(((_xOffset) * Math.cos(_DegreeToRadien / 2)) + _ObjectXCenter),
        (int)(((_xOffset) * Math.sin(_DegreeToRadien / 2)) + _ObjectYCenter)
    ); 
```

它适用于 X 偏移，但由于某种原因，我无法在不奇怪的情况下计算出 Y 偏移。

//------- 答案 ----------// 对于所有想知道我是如何做到这一点的人，答案是：

```
 //For left track

    //Decide how far away the track is from the tank
    _xOffset = _itemAnimation.getHeight() / 1.5;

    //Decide where the track is horizontally to the tank (Ie front, back)
    _DegreeToRadien = Math.toRadians(_degrees + 110);

    //Set the point of the track, takes the centre of the tank and adds the current position, cos and sin basically divide (though multiplication) the current position according to the direction the tank is facing.
    _trackLeftPosition.set
    (
        _ObjectXCenter + (int)(_xOffset * Math.cos(_DegreeToRadien))
        ,
        _ObjectYCenter + (int)(_xOffset * Math.sin(_DegreeToRadien))
    ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T14:12:38.693

我需要更多信息来提供帮助，但是：

1.  您可能可以通过使用一些矩阵数学来更系统地做您想做的事情。
2.  注释代码中的每个变量。有时这可以帮助我在事情变得抽象时发现错误。

*编辑：*

此链接显示如何围绕原点旋转一个点。 [http://en.wikipedia.org/wiki/Rotation_matrix](http://en.wikipedia.org/wiki/Rotation_matrix)

如果您将坦克的组件表示为相对于原点的一系列顶点，您可以系统地对每个点应用旋转。然后在这些点之间画线以形成旋转的形状是一件小事。例如，如果您的坦克是方形的，您可以确定它的顶点位于 (1,1)、(-1,1)、(-1,-1) 和 (1, -1)。您的轨道会相似，但左侧轨道可能是 (-1, 1.25), (-1.25, 1.25), (-1.25, -1.25), (-1, -1.25)。相同的旋转矩阵会正确旋转它们。这将使它们围绕原点旋转。不是你想要的，但这是一个开始。

然后要在 xy 轴上进行平移，只需将 X 和 Y 坐标添加到水箱的整体 XY 坐标中。

我没有时间刷新我的记忆，但是一个稍微大一点的矩阵也可以做翻译。所以基坐标、旋转和期望的 (x,y) 都进去了，最后的点坐标出来了。

这可能看起来更复杂，但您的代码会更小，更不容易出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:01:13.810

对于所有想知道我是如何做到这一点的人来说，答案是：

```
 //For left track

    //Decide how far away the track is from the tank
    _xOffset = _itemAnimation.getHeight() / 1.5;

    //Decide where the track is horizontally to the tank (Ie front, back)
    _DegreeToRadien = Math.toRadians(_degrees + 110);

    //Set the point of the track, takes the centre of the tank and adds the current position, cos and sin basically divide (though multiplication) the current position according to the direction the tank is facing.
    _trackLeftPosition.set
    (
        _ObjectXCenter + (int)(_xOffset * Math.cos(_DegreeToRadien))
        ,
        _ObjectYCenter + (int)(_xOffset * Math.sin(_DegreeToRadien))
    ); 
```

# scala - 使用 ScalaQuery 的通用存储库

> ID：10268428
> 
> 赞同：3
> 
> 时间：2012-04-22T13:44:06.440
> 
> 标签：scala, generics, repository, scalaquery

我正在使用出色的 ScalaQuery，并且我正在尝试为常见操作创建一个通用存储库，但我无法接受它。希望有人可以提供帮助。

我有例如以下结构

```
abstract class Record(id : Int) 
class Product(id: Int,name:String,price : Int) extends Record(id)
class Order(id: Int,name:String,amount: Int)  extends Record(id) 
```

以及用于产品和订单的拖车表。现在我想要通用存储库：

```
trait RecordRepository[T <: ExtendedTable[O]]{
     findById(id:Int) : Option[T]
     findAll() : List[T]
     save(entity:T)
     ...
}      

class ProductRepository extends RecordRepository[Product]
class ProductRepository extends RecordRepository[Order]

object ProductTable extends ExtendedTable[(Long, String, Int)]("product") {
  def id = column[Long]("id", O.PrimaryKey, O.AutoInc) 
  def name = column[String]("name", O.NotNull) 
  def price = column[Int]("price", O.NotNull) 
  def * = id ~ name ~ price 
} 
object OrderTable extends ExtendedTable[(Long, String, Int)]("order") {
  def id = column[Long]("id", O.PrimaryKey, O.AutoInc) 
  def name = column[String]("name", O.NotNull)
  def amount = column[Int]("price", O.NotNull) 
  def * = id ~ name ~ amount
} 
```

我无法使用 for 理解来实现查询，因为描述表的元组在编译时在特征（或抽象类）RecordRepository 中是未知的。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:02:52.780

@singy 好的，很好，以为您将（映射）遗漏了（您应该编辑您的答案，而不是将映射放在评论中，顺便说一句）。

尝试以下操作：
1）更改`class Product`为`case class Product`
2）替换`ExtendedTable[(Long, String, Int)]`为，`ExtendedTable[Product]`

# jqgrid - 如何将网格高度调整为recnum？

> ID：10268433
> 
> 赞同：0
> 
> 时间：2012-04-22T13:44:44.327
> 
> 标签：jqgrid

参数

```
height:'100%' 
```

调整到recount，而不是recnum，还是我错了？
我希望有一个固定的高度，无论记录如何，调整到记录
我的意思是我不想要“一半”显示的行！

# c# - 使用 Json.NET 将多个类的对象序列化为单个 JSON

> ID：10268435
> 
> 赞同：6
> 
> 时间：2012-04-22T13:44:46.843
> 
> 标签：c#, asp.net, json, json.net

我想使用 Json.NET 将多个类的对象连接到一个 JSON 响应中。我想将以下内容构建到单个 JSON 响应中：

```
{
  "data": [
    {
      "from": {
        "name": "Pawan Shrestha",
        "id": "100001187416487"
      },
      "created_time": "2012-04-22T10:21:22+0000",
      "unread": true,
      "to": {
        "name": "Shashwat Tripathi",
        "id": "100000559654730"
      }
    }
  ],
  "summary": {
    "unread_count": 1,
    "total_count": 1,
    "updated_time": "2012-04-22T10:21:22+0000"
  }
  "response_generated_on" : "2012-04-12 14:23:33"
} 
```

我正在通过以下方式创建 JSON 响应：

```
Customer cs = new Customer(2011); //2011 is Customer A/c No.
string j = JsonConvert.SerializeObject(cs); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-22T13:47:15.080

您可以使用匿名类型：

```
JsonConvert.SerializeObject(new {
    data = new[] { ... },
    summary = ...
}); 
```

# jquery - jQuery下拉列表

> ID：10268437
> 
> 赞同：2
> 
> 时间：2012-04-22T13:44:55.203
> 
> 标签：jquery, sql, drop-down-menu

虽然我之前已经从 SQL 数据库填充了一个下拉列表（很久以前，我什至不记得怎么做）我现在需要一些帮助来填充由 SQL 数据库填充的下拉列表，然后取决于什么选择时，显示下一个下拉列表，该下拉列表再次由 SQL 数据库中的另一个表填充。

有人可以帮忙吗，最好有一个演示，因为我已经很久没有做过任何 SQL 了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:01:53.790

好简单！

```
<select name="ALBUM">
    $sql = "SELECT * FROM `PHOTOALBUM` WHERE `USERNAME` = '{$Modules['User']->Username}' ;";
    $RESULTS = mysql_query($sql);
    while($ROW = mysql_fetch_assoc($RESULTS)) {
        echo '<option value="' . $ROW['ALBUM'] . '">' . $ROW['ALBUM'] . '</option>';
    }
</select> 
```

这是我用于我创建的网站之一。它会获取您所有的相册并创建一个下拉列表，以便在添加照片时从中进行选择。希望这可以帮助。

# android - 如果选择了地图标记，则执行一项操作，否则执行另一项操作

> ID：10268442
> 
> 赞同：0
> 
> 时间：2012-04-22T13:45:33.200
> 
> 标签：android, android-mapview

我有一个使用 itemizedlayout 放置在其上的标记的地图视图。如果用户触摸了地图上不是标记的点，我想执行动作 A，如果用户选择了一个标记，那么我想使用 onTap 方法执行另一个动作。问题是，我使用的每一种技术，当用户点击标记时，我都会得到这两个动作。我将不胜感激有关使这项工作的任何想法。我会发布代码，但是我尝试过的所有代码都失败了，因为它应该正常工作！:) 任何帮助表示赞赏。

我想通了……我们必须在 onTap 中调用超类，然后我同时使用两种 onTap 方法……查看代码和注释。

```
public class MarkerMapOverlay extends ItemizedOverlay<OverlayItem> {

Context mContext;

private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();

public MarkerMapOverlay(Drawable defaultMarker, Context context) {
    super(boundCenter(defaultMarker));
    mContext = context;
}

public void addOverlay(OverlayItem marker) {
    mOverlays.add(marker);
    populate();
}

@Override
protected OverlayItem createItem(int i) {
    return mOverlays.get(i);
}

@Override
public int size() {
    return mOverlays.size();
}

public boolean onTap (final GeoPoint p, final MapView mapView){
    //call the superclass, did it hit a marker?  If yes, it returns true onTap(index)
    //returned a marker and event is handled and we do stuff with the marker in onTap(index)
    if (super.onTap(p, mapView)) {
        return true;
    } 
    //We did not hit a marker, do other stuff and return the event has handled.
    Toast.makeText(mContext, "touch", Toast.LENGTH_SHORT)
    .show();
    return true;

}

@Override
protected boolean onTap(int index) {
    OverlayItem item = mOverlays.get(index);
    AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
    dialog.setTitle(item.getTitle());
    dialog.setMessage(item.getSnippet());
    dialog.show();
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T14:16:19.240

对于标记操作，请使用`onTap`in `ItemizedOverlay`。

对于其他触摸动作，请使用`onTouchListener`您的`mapView`：

```
mapView.setOnTouchListener(new OnTouchListener() {

    @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            Toast.makeText(getBaseContext(), "touch", Toast.LENGTH_LONG).show();
            return false;
        }
    }); 
```

# python - 如何从另一个无法访问它们的对象逐行使用文件/光标

> ID：10268447
> 
> 赞同：2
> 
> 时间：2012-04-22T13:46:24.793
> 
> 标签：python

我有一个程序可以从 CSV 文件或数据库中读取对象（任务）。这两个来源的共同点是您必须在使用资源后明确关闭对资源的访问。

我遵循使 CSV 和 DB 类都可迭代的方法，因此迭代它们会返回任务。这对于使用它们很方便，但是我不相信它是干净的，并且我有以下问题：

*   访问文件或数据库的最佳方法是什么？我为此使用构造函数，但我不确定多线程等...
*   关闭资源（文件，光标）的最佳方法是什么。外部对象是否应该通知访问完成，或者 CSV 或 DB 对象是否应该检测到我们位于文件末尾并关闭它？

我不确定我做对了（它适用于单次运行，但我的意思是这要插入网站，因此可以进行多次访问）

```
class CSV(AbstractDAO):
    def __init__(self, sourcePath):
        self.sourcePath = sourcePath
        self.csvFile = codecs.open(sourcePath, 'rb', 'UTF-8')

    def __iter__(self):
        return self

    def next(self):
        return self._buildTaskFromLine(self.csvFile.next())

    def deleteAllTasks(self):
        pass

    def loadTask(self, taskID):
        csvFile = codecs.open(self.sourcePath, 'rb', 'UTF-8')
        for line in csvFile:
            taskValues = line.split(";")
            if taskValues[0] == unicode(taskID):
                return self._buildTaskFromLine(line)
            else:
                return None

    def saveTask(self, task):
        pass

    def loadPredecessorsID(self, task):
        csv = codecs.open(self.sourcePath, 'rb', 'UTF-8')
        for line in csv:
            taskValues = line.split(";")
            if taskValues[0] == unicode(task.id):
                return taskValues[2].split(",")
        return None

    def _buildTaskFromLine(self, line):
        taskValues = line.split(";")
        taskID = taskValues[0]
        taskName = taskValues[1]
        taskAncestors = taskValues[2]
        taskDuration = int(taskValues[3])
        return Task(taskID, taskName, taskDuration) 
```

这是数据库实现

```
class SQLite(AbstractDAO):
    def __init__(self, sourcePath):
        self.connection = sqlite3.connect(sourcePath)
        self.cursor = None

    def __iter__(self):
        self.cursor = self.connection.cursor()
        self.cursor.execute("select * from Tasks")
        return self

    def next(self):
        if self.cursor is not None:
            row = self.cursor.fetchone()
            if row is None:
                self.cursor.close()
                raise StopIteration
            else:
                return self._buildTaskFromRow(row)

    def deleteAllTasks(self):
        cursor = self.connection.cursor()
        cursor.execute("delete from Tasks")
        self.connection.commit()
        cursor.close()

    def loadTask(self, id):
        cursor = self.connection.cursor()
        param = (id,)
        cursor.execute("select * from Tasks t where t.id = ? ", param)
        taskRow = cursor.fetchone()
        task = self._buildTaskFromRow(taskRow)
        cursor.close()
        return task

    def saveTask(self, task):
        cursor = self.connection.cursor()
        param = (task.id,)
        cursor.execute("select * from Tasks t where t.id = ? ", param)
        taskRow = cursor.fetchone()
        if taskRow is None:
            param = (task.id, task.name, task.duration)
            cursor.execute("insert into Tasks values (?,?,?)", param)
            self.connection.commit()
            cursor.close()

        else:
            param = (task.id, task.name, task.duration)
            cursor.execute("update Tasks \
            set description = ?, duration = ?  \
            where id = ? ", param)
            self.connection.commit()
            cursor.close()

    def loadPredecessors(self, task):
        pass

    def _buildTaskFromRow(self, row):
        taskId = row[0]
        taskName = row[1]
        taskDuration = row[2]
        return Task(taskId, taskName, taskDuration) 
```

最后，上面的代码例如被 ma TaskTree 这样调用（它是一个包含所有任务的对象）

```
def loadTreeFrom(self, source, sourcePath):
    if source not in ('CSV', 'DB'):
        raise AttributeError('Unknown source : supported sources are CSV or DB')

    dao = None
    if source == 'CSV':
        dao = CSV(sourcePath)
    elif source == "DB":
        dao = SQLite(sourcePath)

    #populate the tasks first
    for task in dao:
        self.tasks[unicode(task.id)] = task

    # then populate the dependencies
    for item in self.tasks.iteritems():
        ancestorsID = dao.loadPredecessorsID(item[1])
        self.addDependencies(item[1], ancestorsID) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:05:15.267

这是对您的问题的一种侧面回答，但根据您的描述，我认为您应该考虑将这些对象变成[context manager](http://docs.python.org/library/stdtypes.html#typecontextmanager)。这样，您可以简单地使用`with`块，而不是让您的“外部对象通知访问完成”。进入块时，`__enter__`会调用上下文管理器对象的方法；当它退出时，你的上下文管理器对象的`__exit__`方法被调用。这是一个（非常）简单的例子：

```
>>> class DummyManager(object):
...     def __enter__(self):
...         print 'entering with block!'
...         return 'foo'
...     def __exit__(self, exc_type, exc_val, exc_tb):
...         print 'exiting with block!'
...         print 'this is exception info, if an exception was raised:'
...         print exc_type, exc_val, exc_tb
... 
>>> with DummyManager() as dummy:
...     print dummy
... 
entering with block!
foo
exiting with block!
this is exception info, if an exception was raised:
None None None 
```

这是迭代对象让您的 DB/CVS 对象知道不再需要它的好方法。

老实说，我不知道你应该如何处理并发访问等——因为我不知道你的整体设计。但是`__enter__`and`__exit__`方法可能是处理锁等的好地方，如果你需要的话。

基于此系统重构类的一种方法是编写方法，*假设*资源是打开的，而不是一直打开和关闭它。然后总是引用`with`块内对象的实例；该`with`语句负责初始化和打开资源，并在控制离开块时关闭它们。因此，例如，您的`loadTask`and`saveTask`方法将不再需要`x.open(...)`and`x.close()`开头和结尾的行，并且只要正在使用资源，它就会完全打开。

如果您愿意，您可以创建公共的打开和关闭方法，然后只需拥有`__enter__`并`__exit__`调用它们。然后您的用户（或您）可以决定是使用 with 块还是以经典样式打开和关闭对象。无论哪种方式，对象的行为都类似于 Python 中的文件。（我有没有提到文件也是上下文管理器？）

根据您的新代码，您将调用资源，如下所示：

```
def loadTreeFrom(self, source, sourcePath):
    if source not in ('CSV', 'DB'):
        raise AttributeError('Unknown source : supported sources are CSV or DB')

    dao = None
    if source == 'CSV':
        dao = CSV            # dao just a reference to the class now
    elif source == "DB":
        dao = SQLite

    with dao() as tasks:
        #populate the tasks first
        for task in tasks:
            self.tasks[unicode(task.id)] = task

        # then populate the dependencies
        for item in self.tasks.iteritems():
            ancestorsID = dao.loadPredecessorsID(item[1])
            self.addDependencies(item[1], ancestorsID) 
```

现在，当您调用时`loadPredecessorsID`，它不会*每次都*打开和关闭资源。

# c++ - 从不同模块调用函数 - 参考错误

> ID：10268454
> 
> 赞同：1
> 
> 时间：2012-04-22T13:46:59.630
> 
> 标签：c++, reference

我有以下程序。它是面向对象的，有一个结构“数组”（我必须使用我定义的结构，所以 vector.h 不计算在内）我存储一些对象。类函数和结构在 M.cpp (main) 中工作得很好，但是当我尝试从 controller.cpp 调用它们时，我得到一个参考错误。

ListStruct.h：

```
template <class T>
struct Array{
    int days;
    T * M;

    Array( int size ) : days(size), M(new T[size])
    {
    }
    ~Array()
    {
       delete[] M;
    }
};

void currentDay();

template <class T>
void add(int,int,Array<T> &);

template <class T>
void dummyData(Array<T> &); 
```

ListStruct.cpp

```
#include <stdlib.h>
#include <iostream>
#include <ctime>

#include "ListStruc.h"
#include "Expe.h"

using namespace std;

int currDay;

void currentDay(){
    time_t t = time(0);   // get time now
    struct tm * now = localtime( & t );
    ::currDay = now->tm_mon + 1;
}

void add(int cant, int type,Array <Expe> &A){
    //Adds to current day the amount to a specific type
    int newVal;
    newVal = A.M[currDay].getObj(type);
    newVal += cant;
    A.M[currDay].editObj(type,newVal);

}

void dummyData(Array <Expe> &A){
    for(int i=0; i<31; i++){
        A.M[i].Expe::setObj((i*3),(i*1),(i*6),(i*2),(i*4),(i*5));
    }
} 
```

M.cpp - 程序的主要功能：

```
#include <iostream>

#include "Expe.h"
#include "ListStruc.h"
#include "Controller.h"

using namespace std;
int main(){
//Main function of the program. no pre/ post condition.

Array <Expe> A(31);   // Work space
Array <Expe> B(31);   // Backup space

cout<<&A; // testing for allocation
cout<<&B;

Expe a;
a.setObj(5,5,5,5,5,5); // checking class functions
a.printObj();

A.M[1]=a;
A.M[1].printObj();

//check dummy FOR-, WORKS!
for(int i=0; i<31; i++){
    A.M[i].Expe::setObj((i*3),(i*1),(i*6),(i*2),(i*4),(i*5));
}

a.editObj(3,100);
a.printObj();        // check objects calling, WORKS!
cout<<"Obj A.[10]:";
A.M[10].printObj();
cout<<endl<<"Obj A.[29]:";
A.M[29].printObj();

    dummyData(A);  ///////ERROR///////// 
```

错误：

```
D:\c++\Begin\Lab3-5_OOP\Debug/../M.cpp:44: undefined reference to `void dummyData<Expe>(Array<Expe>&)' 
```

我尝试了所有我能想到的...上网，但仍然找不到该参考错误的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:57:09.373

Looks like the version of dummyData you've provided in ListStruct.cpp is not considered as a full specialization of a templated version. So, compiler is unable to find it. You should define it as a `template<> void dummyData<Expe>(Array<Expe>&)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T13:59:16.567

You are declaring function templates `add` and `dummyData`, but defining non-templates.

If you only need these functions to work on `Array<Expe>` rather than on generic arrays, then change the declarations to non-templates:

```
class Expe;
void add(int,int,Array<Expe> &);
void dummyData(Array<Expe> &); 
```

If they need to be generic, then you'll have to move the definitions into the header file; templates usually need the definition to be available in every source file that uses them. However, your functions appear to be working specifically with `Expe`, so I don't think they do want to be templates.

Also, your `Array` type is breaking the [Rule of Three](https://stackoverflow.com/questions/4172722), making it very dangerous to use. Why don't you use `std::vector` to manage the dynamic array safely?

UPDATE: You say you want to see how to do this while keeping it a template. To do that, you'll need an explicit specialisation for `Expe`. That would look something like this:

```
template <> void dummyData(Array<Expe> &) {
    // your Expe version goes here
} 
```

I'm not 100% sure whether or not you'd also need to declare the specialisation in the header file; it's a long time since I've done anything this weird, so I'm not quite sure of the details. Certainly, if you implement the generic version, then you will have to declare this specialisation; otherwise the generic version will be chosen instead. In any event, it's simpler just to overload the function for `Array<Expe>`.

# jpa - 新表中的 JPA ManyToOne

> ID：10268456
> 
> 赞同：1
> 
> 时间：2012-04-22T13:47:10.830
> 
> 标签：jpa

我有以下表格：标签，员工，位置。Employee 和 Location 可以有更多标签。我认为最好为这些关系创建新表：employee_tag 和 location_tag。

如何使用 JPA 执行此操作？现在我得到了这个： 员工类：

```
@OneToMany()
@JoinTable(name="employee_tag", joinColumns={
    @JoinColumn(name="ID_employee", referencedColumnName="ID")
}, inverseJoinColumns={
    @JoinColumn(name="ID_tag", referencedColumnName="ID")
})
private Collection<Tag> tags; 
```

标记类：

```
@ManyToOne()
private Employee employee; 
```

它创建了一个名为employee_tag 的新表，但tag 仍然有一个employee_ID 列。如何将标签链接到此表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:40:26.970

如果你需要一个单向的一对多关联，你不必将员工关联放在标签类中，你必须在 Employee 类中声明关联。

```
@Entity
public class Employee {
   @OneToMany()
   @JoinTable(name="employee_tag", joinColumns={
   @JoinColumn(name="ID_employee", referencedColumnName="ID")
   }, inverseJoinColumns={
   @JoinColumn(name="ID_tag", referencedColumnName="ID")
   })
   public Collection<Tag> tags;
   ...
}

@Entity
public class Tag {      
   ...
} 
```

否则，您可以进行双向关联，如下所示：

```
@Entity
public class Employee {
   @OneToMany(mappedBy="troop")
   public Collection<Tag> tags;
   ...
}

@Entity
public class Tag {
   @ManyToOne
   @JoinColumn(name="employee_fk")
   public Employee employee;
   ...
} 
```

看看[休眠注释文档](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html/entity.html#entity-mapping-association)

# android - 广播接收器中的 Android 音频管理器

> ID：10268459
> 
> 赞同：0
> 
> 时间：2012-04-22T13:47:43.983
> 
> 标签：android, audio

我在 BroadCast Receiver 中使用下面的代码来获取音频管理器

```
AudioManager audio = (AudioManager) getSystemService(AUDIO_SERVICE); 
```

但它显示错误 & eclips 说**AUDIO_SERVICE 无法解析为变量**

这里有什么问题？如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T08:52:35.827

试试这个

```
public void onReceive(Context context, Intent intent) {
    AudioManager audio = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T13:38:19.990

尝试：

```
AudioManager audio = (AudioManager) getSystemService(Context.AUDIO_SERVICE); 
```

# asp.net-mvc-3 - 参数字典包含一个空条目”

> ID：10268462
> 
> 赞同：0
> 
> 时间：2012-04-22T13:47:50.613
> 
> 标签：asp.net-mvc-3

我有这个问题，我似乎无法弄清楚。我正在向我的控制器发布数据。控制器声明如下所示：

```
public ActionResult Create(string Title, string Description, string Payment, string Adress, string ZIP, float Longitude, float Latitude) 
```

使用 Fiddler，发布的数据看起来像这样

![Fiddler 发布的数据](../Images/46873b9bf9cab0f07f5254007057b374.png)

发布时收到此错误消息：

> 参数字典包含`null`方法“System.Web.Mvc.ActionResult Create(System.String, System.String, System.String, System.String, System) 的不可为空类型“System.Single”的参数“Longitude”的条目'GjortWebRole.Controllers.MyController' 中的 .String、Single、Single)'。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:39:00.650

正如在[这个问题](https://stackoverflow.com/questions/1285819/jquery-asp-net-mvc-passing-float-number)中提到的，MVC 没有`ModelBinder`开箱即用的 for 浮点数。如果您希望操作接受浮动参数，则必须创建自己的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T14:04:45.740

如参数表所示，您按照经度（浮点）参数的顺序发送城市值（字符串）。尝试在经度参数之前将城市参数添加到您的操作方法中。

```
public ActionResult Create(string Title, string Description, string Payment, string Adress, string ZIP,string City, float Longitude, float Latitude) 
```

**更新**

根据您的评论，`Create`方法声明应如下

```
[HttpPost]
public ActionResult Create(FormCollection myform)
{
   String Title = myform["Title"];//title is the name of html tag
   Strign ZIP = myform["ZIP"];//ZIP is the name of html tag
   .
   .
   .
} 
```

# java - 空指针访问：变量数据在该位置只能为空

> ID：10268464
> 
> 赞同：8
> 
> 时间：2012-04-22T13:48:03.780
> 
> 标签：java, android, eclipse

好的，这就是我所拥有的：

```
 String[] data = null;
    String[] data2 = null;
    String[] datas = res.split("(s1)");
    int i1 = 0;
    int i2 = 0;
    for(String datasx : datas)
    {
        i1++;
        String[] datas2 = datasx.split("(s2)");

        for(String datas2x : datas2)
        {
            String[] odcinek = datas2x.split("(s3)");
            data[i2] = odcinek[1] + "////" + odcinek[2] + "////" + odcinek[6];
            i2++;
        }
    } 
```

它不工作。应用程序在此行崩溃：

```
data[i2] = odcinek[1] + "////" + odcinek[2] + "////" + odcinek[6]; 
```

实际上，Eclipse 给了我以下警告：

> 空指针访问：变量数据在该位置只能为空

但我不知道出了什么问题。有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T13:52:05.243

好像您需要动态列表，所以您需要替换`String[] data = null;`以使用[列表](http://developer.android.com/reference/java/util/List.html)

```
List data = new ArrayList<String>();
String[] data2 = null;
String[] datas = res.split("(s1)");

int i1 = 0;
int i2 = 0;

for (String datasx : datas) {
    i1++;
    String[] datas2 = datasx.split("(s2)");

    for (String datas2x : datas2) {
        String[] odcinek = datas2x.split("(s3)");
        data.add(odcinek[1] + "////" + odcinek[2] + "////" + odcinek[6]);
        i2++;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T13:54:33.483

您正在将数组数据初始化为空，当您尝试访问它时，它会给您空指针访问错误。

在尝试访问它之前，您必须将其初始化为适当的类型，即将它初始化为 String[] 而不是 null。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T13:52:14.340

您需要初始化“数据”变量。此时为空。

请尝试以下

```
String[] datas2 = datasx.split("(s2)");
data = new String[datas2.length]; 
```

# c - 频繁 isatty() 调用的性能影响

> ID：10268467
> 
> 赞同：3
> 
> 时间：2012-04-22T13:48:15.837
> 
> 标签：c, linux, unix, glibc, tty

我目前正在编写一个在终端上产生彩色输出的 linux 程序。由于程序 stdout 可以重定向到文本文件，或者通常重定向到非终端接收器，并且这些方法应尽可能保持通用，因此我需要调用`isatty(int fd)`以确定是否应该发送 ASCII 颜色转义码。

因为我不确定在每次调用 printf() 之前调用 isatty() 对性能的影响，所以我实现了一个缓冲区，用于缓冲前 16 个 fds 的 isatty() 结果：

```
#include <stdbool.h>
#include <stdio.h>
#include <unistd.h>

#define TERM_NORMAL     "\x1b\x5bm"
#define TERM_BRIGHT     "\x1b\x5b\x31m"
#define TERM_BOLD       "\x1b\x5b\x31m"
#define TERM_BLINK      "\x1b\x5b\x35m"
#define TERM_RED        "\x1b\x5b\x33\x31m"

//to prevent unnecessary isatty() calls, provide this lookup table
//for the first 16 fds
//0 means that it has not been checked yet
//1 means the fd is not a tty
//2 means the fd is a tty 
char isattybuf[16] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
inline bool isattybuffered(int fd) {
        if(fd >= 0 && fd < sizeof(isattybuf)) {
                if(!isattybuf[fd])
                        isattybuf[fd] = isatty(fd) + 1;
                return isattybuf[16] - 1;
        } else {
                return isatty(fd);
        }
}

#define colprintf(col, format, ...)                                     \
        if(isattybuffered(fileno(stdout)))                              \
                printf(col format TERM_NORMAL, ## __VA_ARGS__);         \
        else                                                            \
                printf(format, ## __VA_ARGS__);

#define colfprintf(col, f, format, ...)                                 \
        if(isattybuffered(fileno(f)))                                   \
                fprintf(f, col format TERM_NORMAL, ## __VA_ARGS__);     \
        else                                                            \
                fprintf(f, format, ## __VA_ARGS__);

//for testing
int main() {
        colprintf(TERM_BRIGHT TERM_BLINK, "test1\n");
        colprintf(TERM_RED TERM_BRIGHT,   "test2\n");
} 
```

但这也有一些缺点：

*   由于它将是库头文件的一部分，因此每个包含头文件的*单个c 文件都会有一个缓冲区数组*
*   相应地， isatty() 可能会被调用 n 次，其中 n 是使用代码的 c 文件的数量
*   如果打开文件，调用 isatty()，然后关闭文件，然后使用相同的 fd 打开 tty，则缓冲区信息可能是错误的

消除前两个问题的另一种解决方案是使用关键字将缓冲区变量放入单独的 c 文件中`extern`，但是即使代码被编译为共享库对象并被多个程序同时使用，这是否可行？

不幸的是，`ISATTY(3)`手册页没有提供有关该方法的性能影响的任何提示。

**更新** 我刚刚运行了一些基准测试，似乎`isatty()`每次`ioctl`调用它时都会执行一个系统调用，在我的 x86_64 ARCH 系统上花费大约 700ns 或 500 个时钟周期。一个 write() 系统调用（由 调用`printf`）大约需要相同的时间，所以如果`isatty()`没有缓冲，我会损失更少的 1µs 或每个输出操作的大约一半的性能（与终端所需的时间相比，这似乎可以忽略不计滚动，但在将输出重定向到大文本文件时会变得很重要）。特别是在连续调用时`printf()`，`write`系统调用仅每 4096 字节调用一次，因此代码可能会花费大部分时间等待 isatty() 的结果，因此缓冲似乎是有意义的。

所以我仍然想听听你对我缓冲尝试的意见，以及我提到的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T14:04:56.377

一个快速的基准测试表明，至少在 Darwin 上，isatty 没有被缓存，并且每次都会执行一次 ioctl。在 2.8GHz i7 (mac) 上，对文件描述符 0 - 99 进行 10 000 次检查仅需 0.4 秒。我会说调用 printf 的成本远远高于调用 isatty。

无论如何，我会使用函数指针。一开始我会调用一个 isatty 并将一个指针映射到函数（没有 ascii 的 printf / 有 ascii 的 printf），然后使用该指针。

马丁

# c# - 节点类模型

> ID：10268469
> 
> 赞同：0
> 
> 时间：2012-04-22T13:48:42.407
> 
> 标签：c#

我已经制作了一个基类节点，其中包含添加和删除子节点、处理父节点以及搜索祖先、后代等的方法。到目前为止一切都很好。

现在我想创建一个派生类型 TreeNode ：受益于所有这些节点功能的节点，但同时限制子节点和父节点具有相同的 TreeNode 类型。就像现在一样，我仍然将 Node 作为子级和父级的类型。

我可以以某种方式更改 Node 类的属性和方法参数类型以匹配派生类的类型，而无需手动覆盖或“新建”吗？

```
class Node
{
  public TypeOfThisInstance Parent { get; }
}

class TreeNode : Node
{
} 
```

`TreeNode.Parent`现在应该是 a`TreeNode`而不是 a `Node`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:53:29.923

使用泛型：

```
public class BaseNode<T> where T : BaseNode<T>
{
  private T _parent;
  public T Parent { get { return _parent;} }
}
public class Node : BaseNode<Node>
{
} 
public class TreeNode : BaseNode<TreeNode>
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T13:54:58.893

我认为您需要构建[复合设计模式](http://miroprocessordev.blogspot.com/2012/01/design-patterns-series-14-compsite.html)。这一切都是关于创建树状结构，其中结构中的叶子可以以与分支相同的方式处理（它们是可以包含多个叶子以及其他分支的子结构）。这里的想法是，为了让生活更轻松，您应该能够以相同的方式处理树结构中的叶子和叶子的组成。

# windows - 计算逻辑字体大小

> ID：10268470
> 
> 赞同：2
> 
> 时间：2012-04-22T13:49:02.483
> 
> 标签：windows, font-size

许多示例显示了以下从磅值计算字体逻辑大小的方法，这也是我的代码多年来一直这样做的方式：

`SizeLogical = -MulDiv(SizePt, GetDeviceCaps(hdc, LOGPIXELSY), 72);`

但我最近注意到像[这样](https://stackoverflow.com/questions/7729725/how-can-you-tell-programmatically-if-large-fonts-are-in-use-on-a-windows-7-pc)的例子使用了 96 而不是 72。这是因为显示器的物理分辨率多年来一直在增加，所以它们显示每英寸 96 像素，而不是排版的经典每英寸 72 点？如果是这样，正确的解决方案是动态确定因素，但是调用哪个 Windows API 来做到这一点？还是我误解了这一切？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:15:26.447

72 是每英寸的点数，这永远不会改变。96 是每英寸的像素数，它可以因系统而异。

我相信您使用的公式直接来自 Microsoft 文档。编辑 - 这里是：http: [//msdn.microsoft.com/en-us/library/dd183499%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/dd183499%28v=vs.85%29.aspx)

您不必担心 96，因为这是 GetDeviceCaps 返回的内容。

# screen-scraping - 屏幕抓取和 SQL 数据库

> ID：10268471
> 
> 赞同：-1
> 
> 时间：2012-04-22T13:49:12.440
> 
> 标签：screen-scraping

我正在考虑开始一个涉及屏幕抓取各种网站的小项目，我想将其数据存储在服务器上的 SQL 数据库中。

几年前，我使用 C# 和名为“screen-scraper”的软件完成了这个项目，它为我完成了大部分艰苦的工作，但我认为这个解决方案并不像它可能的那样好，尽管它最终可以工作，所以我这次想做得更好。由于我现在不记得的原因，我永远无法在服务器上运行 screen-scraper 并且总是不得不让我自己的另一台计算机自行进行抓取，然后数据将从那里上传到服务器..（也许我只是个白痴）。

尽管我以前没有 Python 经验，但我听说过有关 Python 和 Beautiful Soup 的非常好的事情。

我希望最终一切都能够在服务器端运行，因此 python 脚本在某些服务器上运行 24/7，以某种频率更新 SQL 数据库。其他代码也将存在于服务器上，并由用户调用以操作数据库等中的数据。

我对基于 C 的语言有更多经验，但如果值得的话，我不介意学习一些 Python。我只是想确保我朝着正确的方向前进..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:26:28.623

Python 很好，可能是最流行的抓取选择。我不鼓励漂亮的汤，因为它使用它自己的语法，而 lxml 使用 xpath，如果你了解它，它在你的 c 项目中也会很有用。

# matlab - MSER 在 MATLAB 中的完整实现

> ID：10268472
> 
> 赞同：3
> 
> 时间：2012-04-22T13:49:22.640
> 
> 标签：matlab, implementation, matlab-cvst, mser

我想知道在 MATLAB 中是否有完整的 MSER（[最大稳定极值区域）实现？](http://en.wikipedia.org/wiki/Maximally_stable_extremal_regions)[VLFeat](http://www.vlfeat.org/~vedaldi/code/mser.html)中的那些是 Mex 或 C++ 实现，并被导入到 Matlab

感谢您的指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T03:53:28.603

[`detectMSERFeatures`](http://www.mathworks.com/help/toolbox/vision/ref/detectmserfeatures.html)在 CVS 工具箱中怎么样？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-13T02:59:47.797

是的，[CVS 工具箱](http://www.mathworks.de/products/computer-vision/)确实有 MSER 检测器的完整实现。检查*detectMSERFeatures.m*文件。

# php - PHP 打印到本地热敏打印机，没有网络名称就无法工作

> ID：10268479
> 
> 赞同：5
> 
> 时间：2012-04-22T13:50:15.090
> 
> 标签：php, printing, fopen, thermal-printer

我用 PHP 构建了一个 POS（销售点）应用程序，可以直接打印到热敏打印机。在大多数情况下，我使用 WAMP 在本地网络服务器上运行应用程序。

部分打印代码为：

```
$printer = "\\\\localhost\\TM-T88V";

// Open connection to the thermal printer
$fp = fopen($printer, "w");
if (!$fp){
  die('no connection');
}

$data = " PRINT THIS ";

// Cut Paper
$data .= "\x00\x1Bi\x00";

if (!fwrite($fp,$data)){
  die('writing failed');
} 
```

只要 PC 连接到网络，此代码就可以正常工作。我可以使用 fopen 和 "LOCALHOST" 或 "COMPUTER-NAME" 让 PHP 连接到共享打印机（在同一台电脑上或网络中的电脑上）： fopen("\\localhost\TM-T88V" ,'w');

如果我断开电脑与网络的连接，PHP 将无法再连接到 \\localhost 或 \\COMPUTER-NAME。

我尝试过类似：fopen('TM-T88V')、fopen('\\.\TM-T88V')，但我不断收到“[function.fopen]：无法打开流：没有这样的文件或目录……”。

如何在没有活动网络连接的情况下连接到本地（共享）打印机（最好按名称）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T16:41:09.270

你试过`fopen("PRN", "w")`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-25T09:57:58.520

这是我在 PHP 中用于打印作业的代码片段：

```
$handle = printer_open('Printer Name in windows here');

if($handle) { // Make sure the printer is present before sending the job
// print job here
} 
```

# javascript - 在我的模板（jQuery 或 Underscore）中显示数组值的总和值

> ID：10268480
> 
> 赞同：1
> 
> 时间：2012-04-22T13:50:20.727
> 
> 标签：javascript, jquery, html, templates, underscore.js

underscore.js 正在处理页面上的模板，我的页面上也有 jQuery。

我有一个看起来像这样的数组：

```
orders = [{q:5},{q:5},{q:5},{q:5},{q:5}]; 
```

现在在页面上我想要打印 q 的总和，但我无法让它工作。

我尝试了很多代码片段，但它们似乎都不起作用。我认为已经工作的是这个：

```
<td><% print( _.reduce(orders.q), function(memo, num){ return memo + num; }, 0 ) %></td> 
```

它来自下划线本身的页面。

这段代码给了我：

```
undefined is not a function; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T13:52:29.750

`orders.q``q`在数组上寻找一个属性`orders`——所以`orders.q`很可能是返回`undefined`，这确实不是一个函数。

您可能想要传递`_.pluck(orders, 'q')`，它返回一个数组，其中`q`每个项目的值`orders`, `_.reduce`。并仔细检查你的括号：

```
_.reduce(orders.q, function(memo, num){ return memo + num; }, 0) 
```

# jsp - JSTL如何连接值？

> ID：10268481
> 
> 赞同：3
> 
> 时间：2012-04-22T13:50:33.890
> 
> 标签：jsp, loops, jstl, concatenation, el

我得到以下代码：

```
<c:forEach var="i" begin="1" end="${finalDisccount}">
                <p><c:out value="${tracksCD}" /> Tracks für CD${i} hochladen</p>
                <p><input id="filename_${i}" type="file" name="filename_${i}" size="50" multiple="multiple" required="required"/></p>
</c:forEach> 
```

值“tracksCD”必须与变量 i 连接，以便循环创建类似这样的内容：

```
<p><c:out value="${tracksCD1}" /> Tracks für CD${i} hochladen</p>
<p><c:out value="${tracksCD2}" /> Tracks für CD${i} hochladen</p> 
```

等等。有没有办法将 ${tracksCD} 和 ${i} 组合起来以动态获取 ${tracksCD1} 等等？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:14:24.290

如果您知道数据的范围，那么您可以在范围映射中访问它`${requestScope}`，`${sessionScope}`或者`${applicationScope}`。例如，当它在请求范围内时：

```
<c:forEach var="i" begin="1" end="${finalDisccount}">
    <c:set var="tracksCDKey" value="${tracksCD}${i}" />
    <p><c:out value="${requestScope[tracksCDKey]}" /> Tracks für CD${i} hochladen</p>
    <p><input id="filename_${i}" type="file" name="filename_${i}" size="50" multiple="multiple" required="required"/></p>
</c:forEach> 
```

然而，你有一个非常讨厌的设计错误。而是将它们收集在数组或列表中，`${tracksCDs}`以便您可以执行以下操作：

```
<c:forEach var="i" begin="1" end="${finalDisccount}">
    <p><c:out value="${tracksCDs[i - 1]}" /> Tracks für CD${i} hochladen</p>
    <p><input id="filename_${i}" type="file" name="filename_${i}" size="50" multiple="multiple" required="required"/></p>
</c:forEach> 
```

或者，如果`${finalDisccount}`碰巧与数组/列表具有相同的大小：

```
<c:forEach items="${tracksCDs}" var="${tracksCD}" varStatus="loop">
    <p><c:out value="${tracksCD}" /> Tracks für CD${loop.count} hochladen</p>
    <p><input id="filename_${loop.count}" type="file" name="filename_${loop.count}" size="50" multiple="multiple" required="required"/></p>
</c:forEach> 
```

# c# - 如何在 C# 中创建相对于用户文档的文件目录？

> ID：10268483
> 
> 赞同：0
> 
> 时间：2012-04-22T13:50:56.007
> 
> 标签：c#, file, save

我正在尝试在 XNA 中创建一个保存文件目录，我有一个 XML 序列化程序设置来存储游戏的分数，但是当游戏第一次运行时，我希望它在名为 SaveData 的文件夹中的用户文档中创建文件。我可以创建 XML 文件 itsef，但我不确定如何在用户文档中创建它，因为用户名每次都不同？

所以我的问题是如何保存与任何用户名相关的文档？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T13:56:00.260

这应该可以帮助您入门：

> [Environment.GetFolderPath](http://msdn.microsoft.com/en-us/library/system.environment.getfolderpath.aspx) ( [Environment.SpecialFolder.MyDocuments](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx) );

# mysql - 在 mysql 中发布符号“Ã，Õ ...” 在 mysql 中“Ã Õ”

> ID：10268484
> 
> 赞同：0
> 
> 时间：2012-04-22T13:50:58.303
> 
> 标签：mysql

如何解决这个错误？？？

```
mysql_query("
    update sondaje set  
    `oponent1`='$get[oponent1]', 
    `oponent2`='$get[oponent2]', 
    `intrebare`='$get[intrebare]', 
    `votes1`='$get[votes1]', 
    `votes2`='$get[votes2]', 
    `email`='$get[email]',
    `img1`='$get[img1]',
    `id`='$get[ids]',
    `date`='$get[date]',
    `img2`='$get[img2]'
    where `id`='$get[id]'") or die(mysql_error()); 
```

在 mysql 中发布符号“Ã，Õ ...”

# jqgrid - 在屏幕中间显示所有表格

> ID：10268496
> 
> 赞同：0
> 
> 时间：2012-04-22T13:52:12.793
> 
> 标签：jqgrid

无论屏幕、网格数量和浏览器如何，如何始终在屏幕中间显示表单（编辑、添加、删除）？
与网格相关的确认、警告表单的同上。

# oracle - 使用 oracle 中的检查约束将日期与当前日期进行比较

> ID：10268499
> 
> 赞同：1
> 
> 时间：2012-04-22T13:52:51.777
> 
> 标签：oracle, date, constraints

> **可能重复：**
> [在检查约束中使用日期，Oracle](https://stackoverflow.com/questions/5332562/using-date-in-a-check-constraint-oracle)

使用此查询在 oracle 中进行检查约束

```
alter table "ADVERTISEMENT" add constraint "ADVERTISEMENT_DATE" check ( "AD_DATE" ad_date>=sysdate) / 
```

但是，得到错误`ORA-00920: invalid relational operator`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:35:05.107

检查约束是关于必须始终为真的数据的断言。因此，尝试使用当前日期执行检查约束绝对没有意义。因为如果今天是真的，那么明天一定是假的。

有多种方法可以解决这个问题，但没有一种完全令人满意。

您可以提供一个 PL/SQL API 来发出插入语句，因为这使您可以控制以确保该列始终填充 SYSDATE。不是每个人都喜欢 PL/SQL API。

您可以使用 SYSDATE 作为该列的默认值来定义表。然后使用表上的权限来防止其他用户填充该列。这仅适用于表所有者以外的用户。

您可以使用插入和更新触发器来使用 SYSDATE 覆盖任何用户分配的值。但是触发器会对性能产生影响。

# django - Nginx 可以访问 memcached 以检查某个值以确定重定向到哪里吗？

> ID：10268501
> 
> 赞同：3
> 
> 时间：2012-04-22T13:53:20.197
> 
> 标签：django, nginx, memcached

我的 Django 应用程序中有一个中间件，可将移动客户端重定向到用户可配置的移动域。这并不简单`m.[current domain]`，因为用户自己定义域。为了保存查询，我可以存储一个类似于`{'www.example.com': 'mobile-version.example.com'}`. 但是，我想保存 wsgi 服务器和完整的 Django 堆栈，以免移动请求到达，因为这个简单的逻辑是唯一发生的事情。我的想法是，如果我能以某种方式将此逻辑放在 Nginx 中，我将能够完全绕过 Django，从而节省一些资源。这可能吗？我读过人们通过 memcached 为整个站点提供服务的地方（似乎是简单 Varnish 使用的更便宜的替代品），但方法似乎有点不同。

逻辑是这样的：

```
$mobile_domain = memcached.get_by_key("mobile_domain_for:" + $current_domain)
IF $mobile_domain:
    redirect $mobile_domain + $path_info + $query_strings 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:09:31.967

看起来第三方[memc-nginx-module](http://wiki.nginx.org/NginxHttpMemcModule)具有查找特定 memcached 键的能力。

# qt - 如何在 Qt 中打印 uint16 单色图像？

> ID：10268502
> 
> 赞同：1
> 
> 时间：2012-04-22T13:53:22.963
> 
> 标签：qt, monochrome, uint16

我正在尝试从 Dicom 文件打印图像。我将原始数据传递给 convertToFormat_RGB888 函数。据我所知，Qt 无法处理单色 16 位图像。

这是原始图像（在此处转换为 jpg）：http: [//imageshack.us/photo/my-images/839/16bitc.jpg/](http://imageshack.us/photo/my-images/839/16bitc.jpg/)

```
bool convertToFormat_RGB888(gdcm::Image const & gimage, char *buffer, QImage* &imageQt) 
```

在这个函数里面，我进入这个......

```
...
else if (gimage.GetPixelFormat() == gdcm::PixelFormat::UINT16)
    {
        short *buffer16 = (short*)buffer;
        unsigned char *ubuffer = new unsigned char[dimX*dimY*3];
        unsigned char *pubuffer = ubuffer;
        for (unsigned int i = 0; i < dimX*dimY; i++)
        {
             *pubuffer++ = *buffer16;
             *pubuffer++ = *buffer16;
             *pubuffer++ = *buffer16;
              buffer16++;
        }
        imageQt = new QImage(ubuffer, dimX, dimY, QImage::Format_RGB888);
... 
```

这段代码是从这里稍微改编的：gdcm.sourceforge.net/2.0/html/ConvertToQImage_8cxx-example.html

但原来的我得到了一个执行错误。使用我的至少我得到一个图像，但它不一样。

这是新图像（在此处转换为 jpg）：http: [//imageshack.us/photo/my-images/204/8bitz.jpg/](http://imageshack.us/photo/my-images/204/8bitz.jpg/)

我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T13:57:50.187

Try to get values of pixels from buffer manually and pass it to QImage::setPixel. It can be simplier.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T14:36:23.657

您在此处将 16 位整数分配给 8 位变量：

```
*pubuffer++ = *buffer16; 
```

结果是未定义的，大多数编译器只是将低 8 位移动到目标位置。你想要高 8 位

```
*pubuffer++ = (*buffer16) >> 8; 
```

另一个问题是字节顺序。根据源数据的[字节顺序](http://en.wikipedia.org/wiki/Endianness)，您可能需要调用[QtEndian](http://qt-project.org/doc/qt-4.8/qtendian.html)函数之一。

最后，您实际上不需要使用任何 32 位或 24 位 Qt 图像格式。使用 8 位`QImage::Format_Indexed8`并将[颜色表](http://qt-project.org/doc/qt-4.8/qimage.html#setColorTable)设置为灰色。

# php - 从 AJAX JSON 结果数据填充选择列表

> ID：10268513
> 
> 赞同：1
> 
> 时间：2012-04-22T13:54:36.317
> 
> 标签：php, javascript, jquery

您好 stackoverflow 开发人员，首先，很抱歉，如果我找不到解决方案，但我已经尝试了一段时间。我不确定我的方法是否是最好的，所以，如果有 AJAX 和/JSON 的替代方案，请随时提出建议。

我正在创建一个旅游指南网站，注册用户将根据地区和州包括他们的度假村、餐馆和旅游景点。我正在使用 Joomla！和 Seblod （使用一些自定义 PHP、MySQL、Javascript 和 AJAX）。由于我不想手动创建 27 个动态选择，我一直在尝试使用 PHP/AJAX/JSON/JQuery 选择注册海滩列表（必须与度假村和旅游景点相关）。

除了填充海滩列表外，一切正常，我不知道问题出在哪里。我尝试了多种方法来追加、创建或添加选项，但没有任何反应。PHP/JSON 结果是：

```
`
    [{"id":"17","title":"Porto+de+Galinhas"},{"id":"18","title":"Serrambi"},{"id":"19", "title":"Tamandar%E9"}]

`

```

这是这个 PHP 脚本的结果：

```
`

    if($_GET['q'] == '海滩'){
        $praiaSQL = sprintf("SELECT * FROM vp_content AS c LEFT JOIN vp_cck_store_item_content AS v ON c.id = v.id WHERE c.catid = 10 AND v.cck = 'praia' AND v.venue_state = '%s' ORDER BY c.title ASC;", $_GET['s']);
        $query = mysqli_query($connection, $praiaSQL);
        $普拉亚 = 数组（）；
        而($results = mysqli_fetch_assoc($query)){
            array_push($praia, array('id' => $results['id'], 'title' => urlencode($results['title'])));
        }
        回声 json_encode($praia);
    }

`

```

我还需要一个处理重音字符的解决方案。我在这里尝试 urlencode 并在 JQuery 中解码，但可能是问题所在。当我将其保留为原始数据时，当有重音字符时，结果项为空。

这是处理结果的相关 JQuery（其中 x = 选择和 u = 获取 AJAX JSON 结果的 URL - 我已经评论了代码中的问题所在）：

```
`

    函数 setBeachList(x,u){
            var theDiv = "#cck1r_" + x;
            var theSelect = "#" + x;
            $j(theSelect).children("option:not(:first)").remove();

            $j.ajax({
                网址：你，
                contentType: "应用程序/json;charset=UTF-8",
                成功：函数（数据）{
                    如果（数据。长度）{
                         /****
                           这就是我卡住的地方，因为我找不到方法来确保
                           数据实际上正在被处理/处理。
                           我已经尝试过警报和各种其他选项来填充
                           选择。
                           我知道它被调用是因为 before: and after: 函数
                           在工作中。
                         *****/
                        /*
                        $j.each（数据，函数（k，v）{
                            var o = 新选项（）；
                            var newTitle = urldecode(v.title);
                            $j(o).html(newTitle).val(v.id);
                            $j(theSelect).append(o);
                        });
                        */
                        var htm = '';
                        for (var i = 0; i '+urldecode(data[i].title)+'';
                        }

                        $j(theSelect).html(htm);
                    }
                },
                发送前：函数（）{
                    $j(theDiv).hide();
                },
                完成：函数（）{
                  $j(theDiv).show();  
                },
                数据类型：'json'，
            });
        }

`

```

感谢您的时间和耐心，我不是这方面的专家（不完全是新手，但很接近......）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:07:29.060

`urldecode`不是 javascript 函数，您可以使用`decodeURIComponent`它来代替它。

当你改变它时它正在工作，

[http://jsfiddle.net/MzMPK/1/](http://jsfiddle.net/MzMPK/1/)

**更新：**

我认为您的问题是关于尝试对重音字符进行编码，如果您的所有编码都设置为 UTF-8，它应该可以在不编码它们的情况下工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T15:17:53.393

这是一个常见的 JSON 解析静默错误。

如果 JSON 格式不正确，ajax 请求将静默失败。

此问题的第二个最常见原因是编码。确保在调用 AJAX 的页面和返回数据的脚本中使用 UTF-8。

您的重音数据问题可以通过不在服务器端对数据进行编码来解决，因此不需要在客户端取消编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T04:19:30.927

回答我自己的问题：由于我不是 AJAX/JSON 专家，我不知道这是否是预期的行为，但生成 AJAX 结果的响应页面不能包含与预期不同的数据。由于我留下了一个区域的输出，请求页面在处理它时遇到了问题。一旦我删除了不必要的数据，选择列表就会更新得很好。

那是我在帖子中忘记提及的事情，因为我认为页面中有多个结果是可以的。使用 Firebug 检查代码，请求得到了很好的处理。

感谢大家的宝贵时间，给您带来的不便，我们深表歉意...

我不得不将 htmlentities 添加到响应页面，因为重音返回 null，尽管我在每个文件上都明确使用 UTF-8 ......

# java - 按下包含来自不同活动的地理位置详细信息的按钮并将其显示在 MapView 上？

> ID：10268515
> 
> 赞同：1
> 
> 时间：2012-04-22T13:54:57.317
> 
> 标签：java, android, android-mapview

我有一个 mapView 类和一个 StoreFinder 类。我希望能够按下 AlertDialog 中的按钮，该按钮保存地理点值经度和纬度。我希望它在我的 MapView 中显示经度和纬度值的位置。

简单的：

在 ALERTDIALOG -> MapView 显示位置中按下带有经度和纬度的按钮。

我该怎么做呢？

感谢您的充裕时间。

代码：

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.storefinder_bars);

    sirius();
}

public void sirius() {
    ImageButton hoursButton = (ImageButton) findViewById(R.id.hours);
    ImageButton addressButton = (ImageButton) findViewById(R.id.address);
    //ImageButton phoneButton = (ImageButton) findViewById(R.id.phone);

    final AlertDialog.Builder siriushours = new AlertDialog.Builder(this);
    hoursButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            siriushours.setTitle("Opening Hours");
            siriushours.setMessage(

                       "\n---Monday---\n" +        "CLOSED" 
                     + "\n\n---Tuesday---\n" +     "CLOSED" 
                     + "\n\n---Wednesday---\n" +   "22:00 - 3:00" 
                     + "\n\n---Thursday---\n" +    "CLOSED" 
                     + "\n\n---Friday---\n" +      "22:00 - 3:00"
                     + "\n\n---Saturday---\n" +    "22:00 - 3:00"
                     + "\n\n---Sunday---\n" +      "CLOSED");

            siriushours.setPositiveButton("OK",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog,
                                int which) {
                            dialog.dismiss();
                        }

                    });

            siriushours.show();
        }
    });

    //ADDRESS
    final AlertDialog.Builder siriusadd = new AlertDialog.Builder(this);
    addressButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            siriusadd.setTitle("Address");
            siriusadd.setMessage(

                    "33 Belvoir Street, Leicester , LE1 6SL");

            siriusadd.setPositiveButton("Show On Map",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog,
                                int which) {

                        }

                    });

            siriusadd.setNegativeButton("Route",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog,
                                int which) {
                            Intent intent = new Intent(android.content.Intent.ACTION_VIEW,
                                    Uri.parse("http://maps.google.com/maps?daddr="+52.63274+","+-1.13145));
                                    startActivity(intent);
                        }

                    });

            siriusadd.show();
        }
    });

} 
```

我想在此处设置正按钮：“siriusadd.setPositiveButton("在地图上显示",”以允许我从 AlertDialog 跳转到我的 MapView 地理坐标。如果没有，我有气球逐项布局，我有标记地点。我希望他们能跳到那个地方。但是，地理点可以。

为所有的帮助干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:03:08.187

用于`MapController`动画到所需的地理点。`MapController`为您实例化`MapView`：

```
private MapController mc;
mc = mapView.getController(); 
```

为按钮初始化对话框集后`onClickListener`（这里是正按钮的示例：

```
dialog.setPositiveButton(mContext.getString(R.string.photo), new DialogInterface.OnClickListener() { 

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub          
                mc.animateTo(geoPoint);
            }

        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:56:19.557

只需使用 putExtra 调用意图：

```
siriusadd.setPositiveButton("Show On Map",
                new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog,
                            int which) {

                        Intent myIntent = new Intent(getApplicationContext(),
                            MyMapActivity.class);
                        myIntent.putExtra("id", anId);
                        // add any additional informations with other key values 
                        // (latitude or longitude)
                        startActivityForResult(myIntent, 0);

                    }

                }); 
```

在您的地图活动的 onResume 方法中将这些信息获取到您的地图活动中并适当地设置您的地图视图：

```
@Override
protected void onResume() {
    super.onResume();
    Intent intent = getIntent();
    if (intent.getStringExtra("id") == null) {
        // your map logic goes here
    }

} 
```

# python - Python字符串到unicode

> ID：10268518
> 
> 赞同：54
> 
> 时间：2012-04-22T13:55:29.417
> 
> 标签：python, string, unicode, python-2.x, python-unicode

> **可能重复：**
> [如何将 ASCII 字符串视为 unicode 并在 python 中对其中的转义字符进行转义？](https://stackoverflow.com/questions/267436/how-do-i-treat-an-ascii-string-as-unicode-and-unescape-the-escaped-characters-in)
> [如何将 unicode 转义序列转换为 python 字符串中的 unicode 字符](https://stackoverflow.com/questions/990169/how-do-convert-unicode-escape-sequences-to-unicode-characters-in-a-python-string)

我有一个包含 unicode 字符的字符串，例如`\u2026`等。不知何故，我没有收到它`unicode`，而是收到了`str`. 如何将其转换回 unicode？

```
>>> a="Hello\u2026"
>>> b=u"Hello\u2026"
>>> print a
Hello\u2026
>>> print b
Hello…
>>> print unicode(a)
Hello\u2026
>>> 
```

所以显然`unicode(a)`不是答案。那是什么？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-04-22T13:59:40.150

Unicode 转义仅适用于 Unicode 字符串，所以这

```
 a="\u2026" 
```

实际上是一个由 6 个字符组成的字符串：'\'、'u'、'2'、'0'、'2'、'6'。

要从中制作 unicode，请使用`decode('unicode-escape')`：

```
a="\u2026"
print repr(a)
print repr(a.decode('unicode-escape'))

## '\\u2026'
## u'\u2026' 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-04-22T13:59:53.707

使用编解码器对其进行`unicode-escape`解码：

```
>>> a="Hello\u2026"
>>> a.decode('unicode-escape')
u'Hello\u2026'
>>> print _
Hello… 
```

这是因为对于非 unicode 字符串，`\u2026`无法识别，而是将其视为文字序列字符（更清楚地说，`'Hello\\u2026'`）。您需要对转义进行解码，而`unicode-escape`编解码器可以为您做到这一点。

请注意，您可以`unicode`通过指定编解码器参数以相同的方式识别它：

```
>>> unicode(a, 'unicode-escape')
u'Hello\u2026' 
```

但`a.decode()`方式更好。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-04-22T14:00:00.530

```
>>> a="Hello\u2026"
>>> print a.decode('unicode-escape')
Hello… 
```

# cakephp - CakePHP 1.3：调用admin_delete时如何不删除图像

> ID：10268520
> 
> 赞同：1
> 
> 时间：2012-04-22T13:56:04.570
> 
> 标签：cakephp, cakephp-1.3

**编辑**：更新我的问题以获得更多澄清

**==================================================== ========**

我使用MeioUpload 上传图片。图片位置放置在 DB`users`表中`image`，如下所示：`/img/uploads/users/img/picture34.png`.

当一个用户被删除时，CakePHP 也会从该图像中访问该图像的物理位置`User.image`并删除该图像。

这里没有belongTo/HasMany 关系，因为我没有图像模型/控制器。

如何防止 CakePHP 物理删除此图像？

**==================================================== ========**

`admin_delete`在我的应用程序中，我可以选择使用`users_controller.php`. 但是，当调用此函数时（见以下函数），保存在 DB 中的图像也会被删除。如何防止此功能删除图像。

```
function admin_delete($id = null) {

    if (!$id) {
        $this->Session->setFlash(__('Este usuario nao existe', true));
        $this->redirect(array('action'=>'index'));
    }

    if ($this->User->delete($id)) {
        $this->Session->setFlash(__('Este usuario ja foi removido', true));
        $this->redirect(array('action'=>'index'));
    }

    $this->Session->setFlash(__('Este usuario nao foi removido', true));
    $this->redirect(array('action' => 'index'));
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:05:07.357

编辑

Meiupload 行为定义了这个 beforeDelete 方法：

```
/**
 * Deletes all files associated with the record beforing delete it.
 *
 * @author Vinicius Mendes
 * @param $model Object
 */
function beforeDelete(&$model) {
    $model->read(null, $model->id);
    if(isset($model->data)) {
        foreach($this->__fields as $field=>$options) {
            $file = $model->data[$model->name][$field];
            if($file && $file != $options['default'])
                $this->_deleteFiles($file, $options['dir']);
        }
    }
    return true;
} 
```

由于没有不删除图像的选项，我认为唯一的方法是暂时分离行为。无法测试它，但这样的东西可以工作：

```
function admin_delete($id = null) {
    $this->User->Behaviors->disable('MeioUpload');

    // your code

    $this->User->Behaviors->enable('MeioUpload');
} 
```

===

我假设图像通过 belongsTo/hasMany 关联与用户模型相关联？在这种情况下，标准的 delete 方法有一个[参数来避免删除关联数据](http://book.cakephp.org/1.3/view/1036/delete)，这里是 delete 函数的定义：

```
delete(int $id = null, boolean $cascade = true); 
```

如果您将*cascade*设置为 false，则关联的图像不会被删除：

```
if ($this->User->delete($id,false)) {
    $this->Session->setFlash(__('Este usuario ja foi removido', true));
    $this->redirect(array('action'=>'index'));
} 
```

# c++ - Why c++ template parameters should be declared as class type?

> ID：10268523
> 
> 赞同：4
> 
> 时间：2012-04-22T13:56:42.620
> 
> 标签：c++, templates, syntax, language-lawyer

Syntax of Function Template

```
template <**class** T, ...>
    returntype functionname(arguments)
    {
           .....
           .....
     } 
```

I have two Questions?

1.  Why the template parameter should be declared as a class type?(ie with the use of class keyword)
2.  When we declared it as a class type then what the thing the compiler will do?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-22T14:01:21.057

That's the usual confusion that arises from the usage of `class` in `template` arguments.

That `class` thing has nothing to do with classes; it merely says that the template accepts a type template argument (as opposed to integral¹ template arguments), which can be *any* type, not only classes.

So, why did they choose `class`? Because they had to use a keyword that was surely not used in any C++ program and more or less "sounded good" - and `class` was ok, since it was already a reserved keyword in C++.

Notice that there's an alternative to `class`: the `typename` keyword. They are perfectly equivalent², but `typename` in my opinion is much more clear, since the name just says "what follows is a type argument", without making you think that it must be a class.

Why both syntax are allowed? Because the `typename` keyword had do be introduced in the language *later* (when they noticed that it was necessary to add another keyword to disambiguate some declarations inside templates); then, it was "retrofitted" also for the `template` arguments declarations. This usage of the `class` keyword was kept for compatibility with programs/documentation written in the meantime.

* * *

1.  here I say "integral" for simplicity, obviously I mean non-type template parameters in general (C++11, §14.1 ¶4).
2.  > There is no semantic difference between class and typename in a template-parameter.

    (C++11, §14.1 ¶2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T14:02:17.923

因为这是语言定义告诉您使用的词。在这种情况下，“T 类”表示“T 是某个类型的名称”，而不是“T 是某个类的名称”。

我相信理由在于不想再添加另一个保留字。

但是，该语言最终添加了另一个保留字：您可以等效地说“typename T”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T14:02:50.420

请注意，您可以将标准类型传递给`template`，而不仅仅是类：

```
template <class T, int N> class mysequence {..}; 
```

因此，`class`此处的关键字告诉编译器将 T 视为类。N被视为整数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T14:00:31.043

According to the Standard, there are two keywords : `class` and `typename`. You can use any one of them in a template definition. Both has same meaning: when you write `class` (or `typename`) in a template definition, it means the user of the template has to pass a *type* as template argument to the template; it doesn't mean anything more than that. If it is a function template, then the template argument *may be* deduced (in some cases) from the argument to the function.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T14:01:31.430

> (1) 为什么模板参数要声明为类类型？

**不**完全正确。你也可以使用`typename`。:)
更重要的是，您也可以`const`将某些类型的对象声明为参数。例如

```
template<int I>  // <---- 'I' is not a class/typename
class A { ... };
...
A<3> obj; 
```

> (2) 当我们将它声明为类类型时，编译器会做什么？

其实**不多**。
但是，当您调用它的对象时，编译器会检查该类型实际上是一个类型名称。例如

```
template<class T>
class A { ... };  // ok ... not much to check
...
A<int> obj1; // compiler checks if 'int' is a type ---> yes
A<3> obj2; // compiler checks if '3' is a type ---> no 
```

# c# - Auto fill Webform(date field ) through Webbrowser winforms

> ID：10268524
> 
> 赞同：1
> 
> 时间：2012-04-22T13:56:46.180
> 
> 标签：c#, winforms, browser, autofill, datefield

I am automating the process of Ticket booking through www.irctc.co.in Till now I am able to login.. But when specifying ticket details in next form, I am not able to set the Journey Date field(Calender with text box) value..

I tried this

```
 wb.Document.GetElementById("stationFrom").SetAttribute("value", "testStation");
        wb.Document.GetElementById("stationTo").SetAttribute("value","testagain");

        wb.Document.GetElementById("JDatee1").InvokeMember("onfocus");
        wb.Document.GetElementById("JDatee1").SetAttribute("value", "05/31/2012");
        wb.Document.GetElementById("JDatee1").SetAttribute("CurrentDate", "31");
        wb.Document.GetElementById("JDatee1").SetAttribute("CurrentMonth", "05");
        wb.Document.GetElementById("JDatee1").SetAttribute("CurrentYear", "2012"); 
        wb.Document.GetElementById("JDatee1").InvokeMember("onblur");

But after submitting form, date field gets the today's date.. 

Rest of the field I am able to fill.. 
```

# sql - Windows 7 remote ODBC connection to Sybase 11

> ID：10268526
> 
> 赞同：0
> 
> 时间：2012-04-22T13:56:56.817
> 
> 标签：sql, windows-7, sybase

I'm using windows7 32bit, and connection to remote sybase databse using odbc the connection goes fine, but when I'm retrieving arabic data I get unreadable characters

Any suggestion please.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T23:38:25.873

“Sybase 11”是指 Sybase SQL Anywhere 11 吗？AFAIK，Sybase ASE 没有版本 11，所以我在这里猜。

确保您用于连接数据库的字符集与存储数据的字符集相匹配。 Try `select db_property('charset')`，它将告诉您字符集。然后使用[此处记录](http://dcx.sybase.com/index.html#1201/en/dbadmin/charset-conparm.html)`charset`的连接参数断开连接并重新连接。

# javascript - 在第一个数字出现时拆分字符串

> ID：10268528
> 
> 赞同：2
> 
> 时间：2012-04-22T13:57:05.990
> 
> 标签：javascript, regex

我没有得到一个合适的正则表达式来分割这样的字符串：

```
72 g tocirah snaeb 101 sgge 108 g darl 111 spuc loi 32 sinihccuz 
```

基于数字首次出现的字符串，如下所示：

```
72 g tocirah snaeb, 101 sgge, 108 g darl, 111 spuc loi, 32 sinihccuz 
```

我怎样才能做到这一点：

```
var str="72 g tocirah snaeb 101 sgge 108 g darl 111 spuc loi 32 sinihccuz";
var regex="/  /";
var result=str.match(regex); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:02:46.940

采用：

```
var result=str.replace(/ (\d+)/gm, ", $1"); 
```

**搜索模式**：搜索一个空格字符后跟一个或多个数字并捕获该数字。

```
 / (\d+)/gm 
```

**Replace**：替换为 a ，后跟捕获的数字。

```
, $1 
```

你可以在这里测试它：http: [//jsfiddle.net/2FwKF/3/](http://jsfiddle.net/2FwKF/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T14:13:25.090

这适合吗？

```
var str="72 g tocirah snaeb 101 sgge 108 g darl 111 spuc loi 32 sinihccuz";
var regex=/\b(?=\d)/g;

var list = str.split(regex); 
```

[在http://jsfiddle.net/gaby/zT4QY/](http://jsfiddle.net/gaby/zT4QY/)演示（*需要控制台*）

# java - proxy server which can handle both http and https requests - java

> ID：10268531
> 
> 赞同：4
> 
> 时间：2012-04-22T13:57:31.063
> 
> 标签：java, ssl, proxy

i am here looking for resources or sample code for proxy server which can handle both http and https requests written in java. i searched google and found lot of data on how to handle http requests but not https.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:14:45.797

代理无法处理 HTTPS，但仍提供端到端安全性。无法使用构建 HTTPS 的 SSL/TLS。

不提供端到端安全性的代理仅具有有限的实用性。所以我对你找不到现有的实现并不感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T16:51:28.083

我假设您在这里需要一个普通的 HTTPS 代理，这是一个不会查看请求而只是在用户代理使用 HTTP`CONNECT`方法后将所有流量中继到实际 HTTPS 服务器的代理。这就是浏览器通常将 HTTP 代理服务器用于 HTTPS 请求的方式。

我没试过，但你可以看看 Jetty 和[它的`ConnectHandler`](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/server/handler/ConnectHandler.html).

# java - Pascals triangle in one loop

> ID：10268532
> 
> 赞同：0
> 
> 时间：2012-04-22T13:57:37.233
> 
> 标签：java, pascals-triangle

Is it possible to write the pascal's triangle by using one loop ? I have written it by using more than one loop and it is working fine.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:36:58.367

哎呀，我会让我的评论成为答案：

作为提示，我将创建一个方法，该方法将您要生成的三角形的行数作为输入，然后在方法的开头计算将转换为的项目总数，然后让您的 for 循环循环通过所有项目。在循环内，您可以轻松计算您所在的行和列，然后使用此信息来创建您的项目值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T14:47:02.190

你想要的代码[在这里](http://yogeshmprajapati.blogspot.in/2012/04/create-pascals-triangle-in-one-loop.html)

或者

```
package net.yogesh.test;

import java.util.ArrayList;
import java.util.List;

public class pascal3 {

    public static void main(String[] args) {

        int noOfRows = 10;
        int counter = 1;
        List<Integer> list = new ArrayList<Integer>();
        list.add(1);

        list = itMe(list, counter,noOfRows);
    }

    public static List<Integer> itMe(List<Integer> list, int counter,int noOfRows) {
        System.out.println(list);

        List<Integer> tempList = new ArrayList<Integer>();

        tempList.add(1);
        for (int i = 1; i < list.size(); i++) {
            tempList.add(list.get(i) + list.get(i-1));
        }
        tempList.add(1);

        if(counter != noOfRows)
            itMe(tempList, ++counter,noOfRows);

        return tempList;
    }
} 
```

**笔记**

这里的输出符合预期

但如果你想在格式化视图中比你需要使用额外的循环。

**输出**

```
[1]
[1, 1]
[1, 2, 1]
[1, 3, 3, 1]
[1, 4, 6, 4, 1]
[1, 5, 10, 10, 5, 1]
[1, 6, 15, 20, 15, 6, 1]
[1, 7, 21, 35, 35, 21, 7, 1]
[1, 8, 28, 56, 70, 56, 28, 8, 1]
[1, 9, 36, 84, 126, 126, 84, 36, 9, 1] 
```

# c++ - Box2D sync new bodies become awake after first world step even if i init them to !awake

> ID：10268534
> 
> 赞同：0
> 
> 时间：2012-04-22T13:57:59.127
> 
> 标签：c++, box2d

Hi I'm having some fun with Box2D. And I'm working on a network game that requires full sync with all bodies. (There wont be many bodies).

So the plan is that i start up a server with some bodies in it. The server does the world simulation steps. Then after a while a client connects. When it does the server sends all state data for all bodies in the world to the client and the client will create them as NEW bodies. And then the client will have an exact fully synchronized copy of the game on the client side. Any small change on the server is copied and sent as message to the client. And because Box2D is deterministic any change on the server side will behave exactly the same on the client.

This works great if all bodies are awake. However when i one of them are asleep the simulations becomes unsynced. The positions, angles and velocitys for sleeping bodies differ with just a few decimals. **actually it looks like they just need to be resting to screw up the sync.**

So what i noticed was that even if i EXPLICITLY set a NEW body to be asleep, after the next world step it will become awake again. I'm guessing that is because Box2D needs to run a check on new bodies of some sort.

Is there anyway to fix this? And keep the sync?

*currently im resyncing all bodies every 120th frame if offsync is detected by my checksum check. and keeps doing that until they are insync again. this causes some snapping of the game objects but still works surprisingly well, but id rather the game would not get offsync in the first place.*

the server will send the float and int values to the client who will create the bodies using the following code. the server uses pretty much the same code when creating bodies on the server side:

```
//------------create world---------------
b2Vec2 gravity(0.0f, -10.0f);
b2World world(gravity);
world.SetAllowSleeping(true);

//---------------create bodies from values sent by server----------------------
//body def
b2BodyDef bodyDef;

if(bodyType == static_body)
bodyDef.type = b2_staticBody;
else if(bodyType == dynamic_body)
bodyDef.type = b2_dynamicBody;
else
throw "error invalid body def types";

bodyDef.angle = angle;
bodyDef.angularDamping = angularDamping;
bodyDef.angularVelocity = angularVelocity;
bodyDef.gravityScale = gravityScale;

bodyDef.linearDamping = linearDamping;
bodyDef.linearVelocity.x = linearVelocityX;
bodyDef.linearVelocity.y = linearVelocityY;
bodyDef.position.x = positionX;
bodyDef.position.y = positionY;

bodyDef.active = isActive;
bodyDef.awake = isAwake;
bodyDef.bullet = isBullet;
bodyDef.fixedRotation = isFixedRotation;
bodyDef.allowSleep = isSleepingAllowed;

//body
// Call the body factory which allocates memory for the ground body
// from a pool and creates the ground box shape (also from a pool).
// The body is also added to the world.
body = world.CreateBody(&bodyDef);

//fixture def
b2PolygonShape polygonShape;
polygonShape.SetAsBox(shapeWidth, shapeHeight);

b2FixtureDef fixtureDef;
fixtureDef.shape = &polygonShape;
fixtureDef.restitution = 0.5f;  // air resistance / fluid resistance
fixtureDef.density = 1.0f;
fixtureDef.friction = 1.0f;

//fixture
body->CreateFixture(&fixtureDef);

//set mass inertia and center
b2MassData md;
md.center = b2Vec2_zero;
md.I = intertia;
md.mass = mass;
body->SetMassData(&md);

//these cannot be predefined for some reason, seems like a bug in box2d
body->SetFixedRotation(isFixedRotation);

//----------run game simulations-----------
float32 timeStep = 1.0f / 60.0f;
int32 velocityIterations = 6;
int32 positionIterations = 2;

world.Step(timeStep, velocityIterations, positionIterations); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:05:10.407

我在 box2d 论坛上问过，如果模拟在不同的时间步长开始，box2d 的内部状态似乎可能会有所不同。所以唯一的解决方案是解决它。

[http://www.box2d.org/forum/viewtopic.php?f=3&t=8462&p=36115#p36115](http://www.box2d.org/forum/viewtopic.php?f=3&t=8462&p=36115#p36115)

# eclipse - Return BIRT calculated report values back to custom web application for further processing

> ID：10268535
> 
> 赞同：0
> 
> 时间：2012-04-22T13:58:07.300
> 
> 标签：eclipse, web-services, reporting, birt

I'd like to run a report in a custom application (no birt viewer, direct integration of the report engine in the application code for rendering reports under the hood and providing links to the final documents).

After rendering the report I need to read back specific values which were calculated in the report - e.g. for pushing it towards a webservice of a different application.

Imagine an invoice report with master and details which calculates in the master section then the aggregated payment sum of all invoice details. If I would need to pass the calculated payment sum to a payment service from the appplication (not in the report!) - how would I do that ?

*   I've seen DataExtractionTasks in the Birt API. However they seem to be heavily query-related in the rare examples I found and I am not sure if they would somehow work with non-resultset data as well.

*   I tried to use GlobalPersistentReportVariables and access them after rendering the report via the API - however via the API they always seem to be null. Not sure if this is the "right way" to access calculated report values. I think they are mainly provided for sharing data in between different report elements like tables.

I certainly do not want to duplicate the report logic in the application just to calculate the payment sum again.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:36:05.650

虽然我认为理论上 DataExtraction 任务是正确的，但我无法获得一个简单的报表元素（例如动态文本元素）的值来将其发布到其他地方。

我现在通过滥用神圣的 appContext（通用用途的任何东西）将所需的数据返回到我的应用程序中来工作（报告将计算值写入 appcontext - 应用程序在呈现报告后读取）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:28:33.033

首先是集成 --> [http://wiki.eclipse.org/Birt_3.7_Migration_Guide](http://wiki.eclipse.org/Birt_3.7_Migration_Guide)

其次，您必须为 BIRT 创建自定义 XML 插件。

将该插件添加到您的集成 BIRT 中。

现在以 XML 格式呈现您的报告（记住 XML 格式将在您的插件中定义，因此请提供这样的格式，以便您可以使用任何 javascript、jquery 或 Java 文件轻松阅读它）

现在做任何你喜欢的计算/操作。

就我而言，我有 2 个上下文文件，即

Context-1(Myapplication.war)--calling-->> Context-2(带有自定义XML插件的BIRT.war)

我使用带有 URL 的 javascript XMLRequest 方法调用 BIRT 报告：“http://localhost:8080/birt/framset? _report *=GraphReport1.rptdesign&* _format=xml”

并在 javascript 中读取 xml 格式并根据数据显示自定义的 jquery 图。

# php - 如何根据出现次数对值进行分组

> ID：10268536
> 
> 赞同：-1
> 
> 时间：2012-04-22T13:58:15.990
> 
> 标签：php, arrays

我有一个包含数字字符串的变量，这些数字对于`ids`存储在数据库表中的某些记录是唯一的。字符串值可能如下所示`"3,4,4,6,2,4,7,7,7"`。我使用`explode()`函数将这些数字转换为数组，以便我可以使用循环并检索它们识别的记录。我`array_unique()`用来删除重复出现的数字，但我仍然需要一种方法来知道特定数字在字符串中出现了多少次。请问我该怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:04:53.050

采用：

```
array_count_values($array) 
```

它给你

```
Array
(
[3] => 1
[4] => 3
[6] => 1
[2] => 1
[7] => 3
) 
```

# eclipse - Eclipse: Can I Bind Commands To The Mouse?

> ID：10268537
> 
> 赞同：1
> 
> 时间：2012-04-22T13:58:23.587
> 
> 标签：eclipse, mouse

I'd like to bind the Eclipse command "Toggle Block Selection" ( shift + alt + a ) to be activated when the right mouse button is **held down**, turned off when the right button is released and not be activated at all if the right mouse button is just single clicked ( in that case I'd like the normal context menu to come up ).

Is this possible with Eclipse?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:29:31.933

在 Eclipse 3.x中*无法*将一般手势绑定到命令。我相信 Eclipse 4 中正在进行一些支持手势的工作，但我不知道当前状态。

已经有许多 Eclipse 插件可以添加一些有限的手势。在市场上搜索它们...

# ruby-on-rails - Rails，用户触发的 ajax 调用和 html 输出选项

> ID：10268541
> 
> 赞同：0
> 
> 时间：2012-04-22T13:58:47.203
> 
> 标签：ruby-on-rails, json, jquery

我正在让用户触发（jquery click）ajax调用来加载额外的数据来填充网页，构建html的正确方法是什么：我应该在rails控制器中生成html并只返回html数据，还是应该返回JSON并在ajax函数中构建它？还是有一些更好的方法可以在 Rails 中进行 ajax 调用？

下面是目前的 countries.html.haml 代码（控制器中生成的 html 数据）：

```
$('#tab li').click( function(){
  $('#tab li').removeClass('active');
  $(this).addClass('active');

  var first_l = $(this).attr("id")

  $.ajax({
    url: "/countries/get_flags",
    type: "GET",
    data: {first_letter: first_l},
    complete: function() {
      // called when complete
    },
    success: function(data) {
      // called when succesful
      $('#countries_container').html("");
      $('#countries_container').append(data);
    },
    error: function(xhr,status,error) {
      // called when error
    }
  });
}); 
```

和控制器：

```
def get_flags

  @html = ""
  @fetched_countries = Country.all( :conditions => "name like '#{params[:first_letter]}%'")
  i = 1
  @html = "<div class='row country-row'>"
  @fetched_countries.each do |country|
    if i % 5 == 0
      @html += "<div class='row country-row'>"
      i = 1
    end

    @html += "<div class='span3 '>"
    @html += "<div class='country-name'>#{country.name}</div>"
    @html += "<div class='country-image thumbnail'><img  alt='#{country.id.to_s}' src='/assets/countries/x100/#{country.id.to_s}.png' /></div></div>"
    if i % 4 == 0
      @html += "</div>"
    end
    i = i + 1

  end
  render :text => @html

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:33:07.017

首先，最自然的放置复杂 HTML 生成代码的地方是 Helper。通常在视图代码中使用助手。它们通过辅助方法包含在视图代码中。但是如果您发现需要在控制器中生成 HTML 代码，您可以使用帮助代码并将 HTML 从控制器返回给浏览器。

为了直接回答这个问题，我建议在您的控制器中生成 HTML，而不是尝试在浏览器中使用 JavaScript 来构建它。当您使用 Rails 和 Javascript 时，rails 是一个比浏览器中的 JavaScript 更健壮的环境，将尽可能多的开发工作集中在更全面的环境中才有意义。

作为奖励答案，如果您发现自己在帮助程序中构建了大量复杂的 HTML 代码，您可能需要查看 Builder::XmlMarkup，特别是如果您来自 C/C++ 背景。Builder::XmlMarkup 允许您以对 C 程序员来说非常直观的方式创建 HTML。即使您不是来自 C/C++，Builder::XmlMarkup 也会生成非常易读的代码，例如：

```
require 'active_support/builder' unless defined?(Builder)  

def an_html_generator_method(somestuff)
  xm = Builder::XmlMarkup.new
  xm.div(:class=>'mydiv') {
    xm.ul(:id=>'aMenu') {
      somestuff.each do |i|
        xm.li { xm << i.whatever }
      end
    }
  }
end 
```

# php - how to imitate headers of my browser for cURL?

> ID：10268544
> 
> 赞同：0
> 
> 时间：2012-04-22T13:59:08.563
> 
> 标签：php, curl

I am using my webserver for testing, and I am not too sure about how to use the headers of the request right.
It contains of some values that can be set with the curl_setopt() function like the `CURLOPT_REFERER`, and on the other hand I can simply set up all the header myself using `CURLOPT_HTTPHEADER`

This is how I am doing this now:

```
curl_setopt($curl, CURLINFO_HEADER_OUT, true);
$headers=array("Host: localhost/mySite/index.php","Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language: en-us,en;q=0.5","Accept-Encoding: gzip, deflate","Connection: keep-alive","Referer: https://localhost/mySite/index.php");
curl_setopt($curl, CURLOPT_HTTPHEADER, $headers); 
```

But some issues rise when I set the cookie for example.
I see in my webrowser that I have on the very first request a cookie value:

```
Cookie: ASP.NET_SessionId=rrnrwk453nraysm4u1adlrjk; 

ASPSESSIONIDQCDSDBDD=DLHLOOIAJEMBHJODKPGMNEED; ASPSESSIONIDQADQDACD=EMNBELFBMNKGBFKIOOHFPPGI 
```

and for the much that I know the cookie is a response from the server, so this doesn't quite makes sense for me. My question is, what should I do if I wanted to imitiate my webrowser, how should I go about this?

How do I build the REQUEST HEADER? is it simply copying the contents of HTTPLiveHeaders ? But what about the cookies ?
Am I doing things right here ?

# zend-framework - 尝试在 CLI 中运行 zend 框架 phpunit 测试，但无法更改 php.ini 文件中的 include_path

> ID：10268547
> 
> 赞同：0
> 
> 时间：2012-04-22T13:59:35.520
> 
> 标签：zend-framework, phpunit, php

在命令提示符中，我运行了命令“php --ini”，它显示使用的文件是：C:\wamp\bin\php\php5.3.8\php.ini

然后我尝试通过取消注释并使其更改包含路径指令： include_path = ".;C:\wamp\bin\php\php5.3.8\pear;C:\Users\xxx\My Documents\Aptana Studio Workspace\ xxx\图书馆\Zend;"

但是，这不会改变包含路径，我不知道为什么不这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T07:54:51.690

弄清楚问题是什么。我已经安装了 PEAR，但我没有意识到它实际上没有编辑示例 include_path 指令，而是将自己的条目添加到 INI 文件的最底部。

# c# - 应用程序与缓存：锁定机制

> ID：10268555
> 
> 赞同：6
> 
> 时间：2012-04-22T14:00:31.337
> 
> 标签：c#, asp.net, caching, .net-4.0

`Application`asp.net 中的类具有`Lock`支持线程安全的机制。

正如我们所知 -`Application`可以全局访问。

样本 ：

```
Application.Lock();
Application["MyCode"] = 21;
Application.UnLock(); 
```

行。

**但**

也是`Cache`全局可访问的（并且没有锁定机制，也用于删除/添加项目）

那么为什么`Application`会有锁定机制而`Cache`没有呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T14:59:14.683

`Application`是旧 ASP 技术遗留下来的数据存储。它有一个全局锁。当您调用`Application.Lock()`所有线程中对 Application 对象的所有访问时，都会被阻止。

另一方面`Cache`，ASP.NET 引入的较新对象允许您使用自己的锁定语义。您可以使用 .NET 的`lock`语句来确保对 Cache 对象的线程安全访问，同时保持您的 Web 应用程序尽可能并行。该`lock`语句要安全得多，因为当您退出`lock`块时，可以保证释放锁。应用程序对象不保证这一点。缓存还提供了自动过期机制，它更适合缓存。它还可以根据应用程序对象当然缺少的依赖合同和可选优先级来使密钥过期。

我认为没有理由使用`Application`over `Cache`object。

示例：假设您在缓存中有一百个项目，并且您有一个项目要存储在缓存中，如果它不存在的话。当你使用 时`Application`，你这样做：

```
if(Application["someData"] == null) 
{
    Application.Lock();
    if(Application["someData"] == null) 
    {
        Application["someData"] = getValue(); //a very long time consuming function
    }
    Application.Unlock();
} 
```

在这种情况下，所有对 Application 对象的访问都会被阻止，即使它们完全不相关。如果`getValue()`导致异常，您的应用程序会因为未释放锁而被挂起。你需要用`try`..包裹`finally`它以确保它是安全的。

另一方面，在使用`Cache`对象时，您可以这样做：

```
if(Cache["someData"] == null)
{
    lock(myLockObject)  // or other shared lock for that single value
    {
        if(Cache["someData"] == null)
        {
            Cache["someData"] = getValue();
        }
    }
} 
```

In this case only code blocks which require access to `myLockObject` would be waiting. Others which access to `Cache` would be running in parallel just fine. And in case `getValue()` throws an exception your lock is released without any issues letting other threads continue execution.

# javascript - JScript 数组问题

> ID：10268556
> 
> 赞同：0
> 
> 时间：2012-04-22T14:00:40.700
> 
> 标签：javascript, arrays, com, jscript

**重新发布的工作代码**

（我试图从我的 ActiveX 组件中获取数组，但没有运气。当我运行脚本时，我得到空的消息框，但我知道数组在那里:)

```
var objMain, objAdapt, lgCount, stMsg = "";

objMain = new ActiveXObject("nnetcom.oMain");

objMain.UnlockComponent("xxx-xxxxx-xxxxx-xx");

objAdapt = new ActiveXObject("nnetcom.oNetworkAdapter");

objAdapt.GetNetworkAdapters(); // Collects Network Adapters

vrAdapters = objAdapt.cName; // cName holds collected Network Adapter names

var vrAdaptVB = new VBArray(vrAdapters);

var vrAdaptJS = vrAdaptVB.toArray();

for (lgCount in vrAdaptJS) {
  stMsg = stMsg + vrAdaptJS[lgCount] + '\r\n'; 
}

WScript.Echo(stMsg);

objAdapt = null
objMain = null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:09:26.480

```
var vrAdaptVB = new VBArray(vrAdapters);

var vrAdaptJS = vrAdaptVB.toArray();

stMsg = "";

for (lgCount = 0; lgCount < vrAdaptJS.length; ++lgCount) {
 stMsg = stMsg + vrAdaptJS[lgCount] + '\r\n';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:14:27.913

根据汉斯的评论，

```
for (lgCount in vrAdapt)
{
    stMsg = stMsg + vrAdapt[lgCount] + '\r\n';
} 
```

应该：

```
for (lgCount in vrAdapt)
{
    stMsg = stMsg + lgCount + '\r\n';
} 
```

因为 lgCount 是元素，而不是索引。

我的错。这个例子有效：

```
var list = {a:1,b:2,c:3,d:4,e:5};
var msg = "";
for (i in list) {
    msg = msg + list[i]; 
}
//msg = 12345

msg = "";
for (i in list) {
    msg = msg + i; 
}
//msg = abcde

var list = [1,2,3,4,5];
msg = "";
for (i in list) {
    msg = msg + i; 
}
//msg = 01234

msg = "";
for (i in list) {
    msg = msg + list[i]; 
}
//msg = 12345 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:18:48.550

**或者我第一次发布的答案最简单的方法是：**

```
var vrAdaptVB = new VBArray(vrAdapters);

var vrAdaptJS = vrAdaptVB.toArray();

stMsg = "";

for (lgCount in vrAdaptJS) {
 stMsg = stMsg + vrAdaptJS[lgCount] + '\r\n'; 
} 
```

**这个例子也适用于我！**

![列出网络适配器工作示例](../Images/a00f2e56ad3af7e44a7a59b2ed561982.png)

# c# - Why does this cloning not work?

> ID：10268558
> 
> 赞同：1
> 
> 时间：2012-04-22T14:00:52.927
> 
> 标签：c#, .net, reflection

I'm trying to clone instances of a derived class, but somehow it doesn't work well. The cloning method is:

```
public static T CloneFieldsAndProperties<T>(T input)
{
    T result = (T)Activator.CreateInstance(typeof(T));
    PropertyInfo[] listOfProps = typeof(T).GetProperties(BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.Static | BindingFlags.Public | BindingFlags.FlattenHierarchy | BindingFlags.CreateInstance);
    FieldInfo[] listOfFields = typeof(T).GetFields(BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.Static | BindingFlags.Public | BindingFlags.FlattenHierarchy | BindingFlags.CreateInstance);
    foreach (PropertyInfo prop in listOfProps) prop.SetValue(result, prop.GetValue(input, null), null);
    foreach (FieldInfo field in listOfFields) field.SetValue(result, field.GetValue(input));
    return result;
} 
```

As you can see, I added many `BindingFlags` because it wasn't working. But to no avail.

It *does* work in a simple case:

```
MyclassA1 a1 = new MyclassA1();
MyclassA a = CloneFieldsAndProperties(a1);
if (a is MyclassA1) Text = "Works"; 
```

Where:

```
class MyclassA
{
    public int i;
}

class MyclassA1 : MyclassA
{
    public int i1;
} 
```

But in my real program it doesn't. The real program's classes' declarations are long so I'm not posting them here. What might be the problem?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T14:36:02.097

很久以前我有同样的问题。经过大量谷歌搜索后，对我来说唯一真正的解决方案是对其进行序列化和反序列化。这不是一个糟糕的解决方案，您只会损失一点性能，只需这样做：

将此标签添加到您的班级：

```
[Serializable()]
public class a
{

} 
```

然后你可以创建一个这样的函数：

```
public object Clone()
{
    IO.MemoryStream mem = new IO.MemoryStream();
    System.Runtime.Serialization.Formatters.Binary.BinaryFormatter form = new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();
    form.Serialize(mem, this);
    mem.Position = 0;
    return form.Deserialize(mem);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T07:33:49.683

如果您需要浅克隆，只需使用`Object.MemberwiseClone`. 如果您需要深度克隆，请序列化然后反序列化您的对象（例如使用`BinaryFormatter`or `DataContractSerializer`）。这将解决诸如循环和交叉引用之类的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T15:19:36.060

这将起作用并且可能比序列化方法更快：

**代码：**

```
using System;

namespace Cloning
{
    class Program
    {
        static void Main(string[] args)
        {
            Derived d = new Derived() { property = 1, field = 2, derivedProperty = 3, derivedField = 4 };
            Base b = new Derived(d);

            // Change things in the derived class.
            d.property = 5;
            d.field = 6;
            d.derivedProperty = 7;
            d.derivedField = 8;

            // Output the copy so you know it's not shallow.
            Console.WriteLine((b as Derived).property);
            Console.WriteLine((b as Derived).field);
            Console.WriteLine((b as Derived).derivedProperty);
            Console.WriteLine((b as Derived).derivedField);

            Console.ReadLine();
        }

        class Base
        {
            public int property { get; set; }
            public int field;
        }

        class Derived : Base
        {
            public Derived() { }

            public Derived(Derived d)
            {
                // Perform the deep copy here.
                // Using reflection should work, but explicitly stating them definitely
                // will, and it's not like it's not all known until runtime.
                this.property = d.property;
                this.field = d.field;
                this.derivedProperty = d.derivedProperty;
                this.derivedField = d.derivedField;
            }

            public int derivedProperty { get; set; }
            public int derivedField;
        }

    }
} 
```

**测试：**

[http://goo.gl/pQnAL](http://goo.gl/pQnAL)

**输出：**

```
1
2
3
4 
```

**注释：**

我真的会想象这不仅适用于微不足道的情况，但可能不会：

```
public static T CloneFieldsAndProperties<T>(T input)
{
    T result = (T)Activator.CreateInstance(input.GetType());

    PropertyInfo[] properties = input.GetType().GetProperties();
    FieldInfo[] fields = input.GetType().GetFields();

    foreach (PropertyInfo property in properties)
        property.SetValue(result, property.GetValue(input, null), null);
    foreach (FieldInfo field in fields)
        field.SetValue(result, field.GetValue(input));

    return result;
} 
```

# web-services - 2 Factor Strong Authentication with Windows Live

> ID：10268560
> 
> 赞同：1
> 
> 时间：2012-04-22T14:01:24.130
> 
> 标签：web-services, security, authentication, openid, dotnetopenauth

I can see a video here [http://vimeo.com/2581892](http://vimeo.com/2581892) of 2 Factor Strong Authentication with Windows Live.

How is this possible as I never heard Microsoft provide an API like Google here [http://googleenterprise.blogspot.fr/2011/09/strong-authentication-to-protect.html](http://googleenterprise.blogspot.fr/2011/09/strong-authentication-to-protect.html) ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:54:47.113

我不能肯定地说，但我怀疑 Windows Live 无法使用 Yubikey。您链接到的视频下方的标题说：（已添加重点）

> 这个*模拟*如何将 YubiKey 添加到 Microsoft LiveID 登录体验的*外观*。

最接近 2 因素身份验证的 Windows Live 是它（至少在过去）允许 InfoCard 身份验证，但我从未见过广告，而且我已经有一段时间没有看到该选项了，所以他们可能拉了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:01:37.183

看起来他们已经在许多依赖 Live ID 的服务上实施了 2 因素身份验证。其中包括访问以下内容：

*   计费.microsoft.com
*   xbox.com 购买积分
*   远程连接到另一台计算机时的 SkyDrive

两个必需的因素是：

*   您的 Microsoft 帐户和密码
*   发送到您之前与您的帐户关联的备用电子邮件地址或手机的代码。

（来自[http://answers.microsoft.com/en-us/windowslive/forum/liveid-wlsecurity/two-factor-authentication-tfa-what-is-a-microsoft/79321863-cf01-44f3-a181-87f531c5129e](http://answers.microsoft.com/en-us/windowslive/forum/liveid-wlsecurity/two-factor-authentication-tfa-what-is-a-microsoft/79321863-cf01-44f3-a181-87f531c5129e)）

# eclipse - Eclipse 语法错误 android:targetSdkVersion="10"

> ID：10268565
> 
> 赞同：0
> 
> 时间：2012-04-22T14:01:34.553
> 
> 标签：eclipse

嗨，我需要为 libGdx 添加目标 SDK 版本，但如果抛出“错误”，则 eclipse - 在包 android- 中找不到属性 targetSdkVersion 的资源标识符

```
<uses-sdk android:minSdkVersion="3" android:targetSdkVersion="10"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

这让我很困惑，因为它不允许我的应用程序在设备上运行。

任何帮助真的很感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:02:53.667

您确定已下载版本 10 SDK (2.3.3) 吗？

# c# - asp.net 数据库连接

> ID：10268566
> 
> 赞同：1
> 
> 时间：2012-04-22T14:01:37.203
> 
> 标签：c#, asp.net

请看下面的代码。

```
protected void Button2_Click(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection(constring);

    SqlCommand cmd = new SqlCommand();

    if (DropDownList3.SelectedItem.Text == "Economy")
    {
        seats = Convert.ToInt32(DropDownList1.SelectedItem.Text);

        cmd.Connection = con;
        con.Open();
        cmd.CommandText = "select easeats from flight where fno='" + fn + "'";
       int eds = Convert.ToInt32(cmd.ExecuteScalar());

        if (eds > seats)
        {
            Panel2.Visible = true;                //seats available
            cl = DropDownList3.SelectedItem.Text;  
            seat = seats.ToString();
            seats = eds;
        }
        else
        {
            Panel3.Visible = true;         // seats not available 
        }
        con.Close();
    }
} 
```

我在行中遇到错误：`int eds = Convert.ToInt32(cmd.ExecuteScalar());`

错误是

> 将 varchar 值转换为数据类型 int 时出错

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T14:11:17.667

首先，永远不要像这样构造你的查询。请改用参数化查询。

其次，错误消息非常清楚 - 您正在尝试转换为 int 一些 varchar 列，该列可能还包含一些文字字符，而不仅仅是数字......

第三，更喜欢“使用”语句而不是显式关闭连接。这样更安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T14:13:13.970

尝试替换：

```
int eds = Convert.ToInt32(cmd.ExecuteScalar()); 
```

和：

```
int eds = 0;

int.TryParse(cmd.ExecuteScalar(), out eds); 
```

这样，如果转换失败，您就没有问题并继续 eds = 0...

旁注，您对异常和连接生命周期的处理非常差，请考虑以这种方式替换整个块：

```
protected void Button2_Click(object sender, EventArgs e)
{
    using(var con = new SqlConnection(constring))
    using(var cmd = con.CreateCommand())
    {
        if (DropDownList3.SelectedItem.Text == "Economy")
        {
            seats = Convert.ToInt32(DropDownList1.SelectedItem.Text);

            con.Open();
            cmd.CommandText = "select easeats from flight where fno='" + fn + "'";

            int eds = 0;
            object result = cmd.ExecuteScalar(); 
            int.TryParse(result, out eds);

            if (eds > seats)
            {
                Panel2.Visible = true;                //seats available
                cl = DropDownList3.SelectedItem.Text;  
                seat = seats.ToString();
                seats = eds;
            }
            else
            {
                Panel3.Visible = true;         // seats not available 
            }
        }
    }
} 
```

当然，无论如何，你也应该考虑重构整个事情，将数据库和业务逻辑与 UI 逻辑明确分离，一般来说，你不应该直接处理 UI 内部的连接和查询，更不用说在`ButtonClick`事件处理程序中处理。

# oracle - Oracle 实体关系图表工具

> ID：10268568
> 
> 赞同：1
> 
> 时间：2012-04-22T14:01:38.797
> 
> 标签：oracle, oracle11g, data-modeling

有谁知道一个很好的开源工具可以用来管理 Oracle 11G 中的实体？对于 Mysql，我们有工作台，尽管它有一些错误，但它正在变得更好。至于 Oracle，我找不到用于建模数据的工具。我希望有人能引导我朝着正确的方向前进。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T14:15:52.253

Oracle 的 Data Modeler 不是开源的，但它是免费的：

[http://www.oracle.com/technetwork/developer-tools/datamodeler/overview/index.html](http://www.oracle.com/technetwork/developer-tools/datamodeler/overview/index.html)

# c# - 在分配给 ViewState 之前保留可序列化对象的位置

> ID：10268569
> 
> 赞同：0
> 
> 时间：2012-04-22T14:01:43.633
> 
> 标签：c#, .net, serialization

我的理解是，如果我们使用 ViewState 来保存对象，则应将其标记为可序列化。我很好奇可序列化对象在分配给 ViewState 之前保存在哪里？我可以在将对象分配给视图状态时更改序列化方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:10:17.510

视图状态在保存视图状态阶段被序列化为Page类的SavePageStateToPersistenceMedium()方法中的隐藏表单域，在加载视图状态阶段被Page类的LoadPageStateFromPersistenceMedium()方法反序列化。只需做一些工作，我们就可以将视图状态持久化到 Web 服务器的文件系统中，而不是作为一个隐藏的表单字段压在页面上。为此，我们需要创建一个派生自 Page 类并覆盖 SavePageStateToPersistenceMedium() 和 LoadPageStateFromPersistenceMedium() 方法的类。

详细文章请访问[这里](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

# sql - 添加后无法更新新列

> ID：10268570
> 
> 赞同：20
> 
> 时间：2012-04-22T14:02:03.117
> 
> 标签：sql, sql-server, sql-server-2008

给定以下 SQL：

```
IF EXISTS (SELECT * FROM sys.columns WHERE name = 'NewFieldName' AND object_id = OBJECT_ID('dbo.MyTableName'))
    RETURN

-- Add NewFieldName column to part of the Summer 2012 release cycle.
ALTER TABLE dbo.[MyTableName] ADD
    [NewFieldName] SmallINT NOT NULL
        CONSTRAINT DF_MyTableName_NewFieldName DEFAULT (2)

UPDATE [MyTableName] SET NewFieldName = 1 WHERE [Name] = 'FindMe' --Update one specific value 
```

产生以下错误消息：

> 消息 207，级别 16，状态 1，第 10 行无效的列名称“NewFieldName”。

我确定我错过了一些基本的东西，但是尝试在更改之后放置“GO”会使 UPDATE 每次都运行，我不想那样做。

我如何构造这个语句，以便它检查该列是否存在，如果它不添加它，然后按照我的 UPDATE 语句中的说明设置值？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-22T14:44:27.213

您需要在添加新列后编译引用新列的语句。这样做的一种方法是将其作为子批次运行`EXEC`。

```
IF NOT EXISTS (SELECT * 
               FROM   sys.columns 
               WHERE  name = 'NewFieldName' 
                      AND object_id = OBJECT_ID('dbo.MyTableName')) 
BEGIN
  -- Add NewFieldName column to part of the Summer 2012 release cycle. 
  ALTER TABLE dbo.[MyTableName] 
           ADD [NewFieldName] SMALLINT NOT NULL 
           CONSTRAINT DF_MyTableName_NewFieldName DEFAULT (2) 

  EXEC(' UPDATE [MyTableName] SET NewFieldName = 1 WHERE [Name] = ''FindMe''') 
END 
```

它最初为您工作的原因可能是因为在编译批处理时表本身并不存在，因此这意味着其中引用该表的所有语句都需要延迟编译。

# c++ - 如何通过另一个变量的相对值来确定一个变量？

> ID：10268572
> 
> 赞同：1
> 
> 时间：2012-04-22T14:02:14.147
> 
> 标签：c++, arduino, epsilon

我正在为我目前正在使用 Arduino 构建的机器人实施 PID 控制算法。

我的问题更多与编程逻辑有关。

我必须计算一个变量，一个错误，int eps。这个 eps 将介于 -7 和 +7 之间。

从机器人中，我以双精度形式获取输入，其值在 0 到 7000 之间。

我的算法必须像这样工作：

```
if(input >= 500){
     if(input >= 1000){
          if(input >= 1500){
          ..........
          }
     }else{
          eps = 6;
     }
}else{
     eps = 7;
} 
```

等等...

换句话说，我必须为 eps 分配一个值，该值将由输入包含在哪个间隔中确定。

我的问题是什么是最有效、最节省时间和最节省资源的方式？

我使用的是 Arduino 和他们自己的 IDE，而不是 Eclipse。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T14:10:15.347

如果 7 对应于 7000，-7 对应于 0，并且不同 epsilon 值之间的间隔相等（500），那么您可以编写`eps = static_cast<int>(input/500.0) - 7`. 不确定 Arduino 中的静态转换 - 您只需将值四舍五入到较低的整数（下限）。

如果您有其他确定 eps 的算法，请更清楚地说明，我们将尝试为此产生数学；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T17:36:41.367

arduino 有地图功能。[http://arduino.cc/en/Reference/map](http://arduino.cc/en/Reference/map)

所以你需要这样的东西；每股收益 = 地图（输入，0、7000、-7、+7）；

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T17:40:31.050

我会说最快的方法是：

```
switch (int(input) /  500)
{
case 0: ... // 0..500
case 1: ... // 500..1000
case 2: ... // 1000..1500
etc
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-22T17:44:06.697

从您的代码示例中并不完全清楚您要实现的目标，但假设您希望将 (0 到 7000) 均匀地分配`input`到 (-7 到 7)`eps`值，以便所有间隔均等表示，您不能使用500 的倍数。使用 500 将导致极值之一（-7 或 7）仅来自非常小的`input`值范围。

例如，您可以使用以下函数从`eps`计算`input`：

```
int eps(double input) {
  return ((int)(input/500.0)) - 7;
} 
```

但是，使用此函数会生成以下映射，这使得`eps`7 的值比其他所有值都少得多：

```
 input         | eps
>=    0.0 and <  500.0 | -7
>=  500.0 and < 1000.0 | -6
>= 1000.0 and < 1500.0 | -5
>= 1500.0 and < 2000.0 | -4
>= 2000.0 and < 2500.0 | -3
>= 2500.0 and < 3000.0 | -2
>= 3000.0 and < 3500.0 | -1
>= 3500.0 and < 4000.0 |  0
>= 4000.0 and < 4500.0 |  1
>= 4500.0 and < 5000.0 |  2
>= 5000.0 and < 5500.0 |  3
>= 5500.0 and < 6000.0 |  4
>= 6000.0 and < 6500.0 |  5
>= 6500.0 and < 7000.0 |  6
>= 7000.0              |  7 
```

如果您确实想要均匀分布，则需要使用以下代码：

```
int eps(double input) {
  return ((int)(input/466.733333))-7;
} 
```

# objective-c - 如何生成通用表视图控制器？

> ID：10268574
> 
> 赞同：0
> 
> 时间：2012-04-22T14:02:27.673
> 
> 标签：objective-c, cocoa-touch, uitableview

我创建了一个自定义*TablePickerViewController*，它是*UITableViewController*的子类。我正在使用此类来显示自定义类型*TablePickerItem*的对象列表。

我在我的 iOS 应用程序中多次使用*TablePickerViewController*来显示用户必须选择项目的不同类型的列表——然后另一个视图控制器*MainViewController*应该对这个选择做出反应并做一些事情。

我创建了这个协议并在*TablePickerViewController*中创建了一个委托属性：

```
@protocol TablePickerViewControllerDelegate <NSObject>
- (void)tablePickerViewController:(TablePickerViewController *)controller
                    didSelectItem:(TablePickerItem*)item;
@end 
```

当我在*MainViewController中设置一个新的**TablePickerViewController*时，它也被设置为委托——而不是当用户点击表格视图中的单元格时它会收到通知。

 *问题是我的*MainViewController*将使用不同的数据（*TablePickerItem* ）设置多个*TablePickerViewController*。我应该如何设置我的*MainViewController*来处理这些多个*TablePickerViewController*？他们每个人的事件将导致在我的*MainViewController*中调用相同的协议方法。

 ***此外，我需要获取*TablePickerItem*表示的元素，因为我需要知道例如在`tablePickerViewController:didSelectItem`方法中操作时的元素 ID。我是否应该通过向 TablePickerItem 添加类似内容并将原始对象设置到此属性然后创建它来处理`@property (nonatomic) id element`这个*问题*？

如果我的解决方案似乎以错误的方式完成，也许有人可以给我一个关于如何创建通用表格视图控制器的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T14:10:46.967

我不完全确定你的设置，但如果你有多个选择器反馈给主控制器，那么你可以只引用选择器，例如

```
// MainViewController.m

@interface MainViewController ()

@property (nonatomic, strong) TablePickerViewController *picker1;
@property (nonatomic, strong) TablePickerViewController *picker2;
// ... and so on. Obviously you know your problem domain so you can change
// the terrible naming above to something appropriate

@end

@implementation MainViewController

// ...

- (void)theMethodWhereYouSetUpYourPickers;
{
    TablePickerViewController *picker1 = [[TablePickerViewController alloc] init];
    picker1.delegate = self;
    self.picker1 = picker1;
    // ...
}

- (void)tablePickerViewController:(TablePickerViewController *)controller
                didSelectItem:(TablePickerItem*)item;
{
    if (controller == self.picker1) {
         NSLog(@"Something was picked in picker 1 %@", item);
    } else if (controller == self.picker2) {
         NSLog(@"Something was picked in picker 2 %@", item);
    }
}

// ...

@end 
```****

# php - 使用 PHP 生成随机 IP 地址

> ID：10268575
> 
> 赞同：19
> 
> 时间：2012-04-22T14:02:30.573
> 
> 标签：php, numbers

我想生成一个随机 IP 地址。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-22T14:06:26.033

在**64 位**PHP 上：

```
long2ip(rand(0, 4294967295)); 
```

在 2021 年使用任何受支持的 PHP 版本（7.4 和 8.0）。

注意：由于现在几乎所有机器都是 x64 并且正在放弃 32 位操作系统的开发，如果这不起作用，您可能需要下载 x64 版本的 PHP。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-04-22T14:07:12.493

检查[mt_rand 函数](http://php.net/manual/en/function.mt-rand.php)。

你可能想运行这个：

```
<?php
    $randIP = mt_rand(0, 255) . "." . mt_rand(0, 255) . "." . mt_rand(0, 255) . "." . mt_rand(0, 255);
?> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-25T03:53:49.967

```
$ip = long2ip(mt_rand()); 
```

这种方式更具可读性。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-10-04T07:47:36.187

根据这里的一些答案，我决定添加**一个答案来纠正所犯的一些错误**......

```
mt_rand(int $min, int $max); 
```

一些示例使用此函数，最大值为**4294967295**。但是这个函数只支持最大值**2147483647**，实际上是一半。传递更高的数字将返回**false**。在不传递任何内容的情况下使用此函数也只会给出所需值的一半。所以

```
long2ip(mt_rand()); 
```

将返回一个最大 ip`127.255.255.255`

要拥有完整的范围，您需要一些类似的东西：

```
long2ip(mt_rand()+mt_rand()); 
```

但即使在这个示例中，您也会最大程度地得到`255.255.255.254`. 因此，要拥有完整的范围，您需要第三个`mt_rand()`.

以简写代码获得总范围的正确方法是：

```
$ip = long2ip(mt_rand()+mt_rand()+mt_rand(0,1)); 
```

注意使用 + 而不是 *。因为`max value`*`max value`会`255.255.255.255`按预期返回，但获得较低 ip 的机会不再那么好。为了保持使用 * 的好机会，您可以执行以下操作：

```
$ip = long2ip((mt_rand()*mt_rand(1,2))+mt_rand(0,1)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-22T14:07:30.307

如果有的话，您还可以从自己的网络服务器日志中获取有效 IP 池：

> cat /var/log/apache2/access_log |cut -d' ' -f1|egrep -v '[az]'|sort|uniq >lotsofip.txt

然后在php中：

```
$ips = file('lotsofip.txt');    
echo $ips[array_rand($ips)]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-16T15:46:11.497

对于 IPV6：

```
<?php

function randomizeFromList(array $list)
{
    if (empty($list)) {
        return null;
    }
    $randomIndex = random_int(0, count($list) - 1);

    return $list[$randomIndex];
}

function generateIpv6(): string
{
    $ipv6String = '';
    //IPV6 Pattern ([0-9a-fA-F]{0,4}:){1,7}[0-9a-fA-F]{0,4}
    $hexSymbols = [
        '0',
        '1',
        '2',
        '3',
        '4',
        '5',
        '6',
        '7',
        '8',
        '9',
        'a',
        'b',
        'c',
        'd',
        'e',
        'f',
        'A',
        'B',
        'C',
        'D',
        'E',
        'F',
    ];

    $randomLength2 = random_int(1, 7);
    for ($i = 0; $i < $randomLength2; ++$i) {
        $ipv6String    .= randomizeFromList($hexSymbols);
        $randomLength1 = random_int(0, 4);
        for ($j = 0; $j < $randomLength1; ++$j) {
            $ipv6String .= randomizeFromList($hexSymbols);
        }
        $ipv6String .= ':';
    }

    $randomLength3 = random_int(0, 4);
    for ($k = 0; $k < $randomLength3; ++$k) {
        $ipv6String .= randomizeFromList($hexSymbols);
    }

    return $ipv6String;
}

echo(generateIpv6()); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-03-30T10:13:57.300

```
$ip = intval(rand()%255).'.'.intval(rand()%255).'.'.intval(rand()%255).'.'.intval(rand()%255); 
```

# c++ - c++ 地图和性能

> ID：10268576
> 
> 赞同：-2
> 
> 时间：2012-04-22T14:02:43.833
> 
> 标签：c++, memory, maps, destructor, allocation

我有这个类如下：

```
class nLetterFrequency
{
private:
    map<string, int> frequencyTable;

    void insert(const string& letterPerm);
    void parseFile(int n);                     //calls insert()

public:

    nLetterFrequency(int n);                   //calls parseFile()
    ~nLetterFrequency();
}; 
```

显然我的代码没有任何问题，事实证明它只需要 2 到 3 分钟就可以完成（这不是很奇怪吗？）。这对我来说似乎很可疑，因为我首先用 Java 编写了这个实现，并在几秒钟内完成。两种语言之间的表现怎么会如此激烈？这是由于地图类在 c++ 和 Java 中实现的方式不同吗？在 Java 中，我使用的是 TreeMap，我也使用了 HashMap，但切换到 TreeMap 因为我想对我的地图进行排序。这是 parseDictionary 函数和 insert 函数的代码。构造函数调用 parseDictionary() 就是这样。

```
void nLetterFrequency::parseDictionary(int n)
{
    ifstream infile("3dictionary.txt");     //length of words >= 3                 

    while(!infile.eof())                    //while we are not at the end of the file
    {
        string word;

        getline(infile, word);         

        if(word.length() < n)
        {
        printf("Error: check the dictionary file since word.length() < n\n");
            exit(0);   //quit the program
        }

        for(int i = 0; i < word.length() - n + 1; i++)
        {
            string perm("");
            for(int j = 0; j < n; j++)
            {
                perm += word[i+j];
            }

            insert(perm);
        }

    }

    infile.close();
}

void nLetterFrequency::insert(const string& letterPerm)
{
    if(frequencyTable.count(letterPerm))                         //letterPerm is already in frequencyTable
    {
        frequencyTable.find(letterPerm)->second++;               //increment the current frequency of entry letterPerm
    }
    else                                                               //insert the new permutation into frequencyTable
    {
        frequencyTable.insert(pair<string, int>(letterPerm, 1));
    }
} 
```

感谢所有的帮助，我很感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T14:10:28.803

似乎不太可能在 300,000 行时呕吐，但您需要进行算术运算。300,000 行中有多少个“字符串”？假设您的意思可能是“单词”，那可能是大约 500 万个单词。也许每个单词是 8 个字符。疯狂地猜测，这可能是每个地图节点 32 个字节。总计约 160 MB。不是很多。

构造函数参数“n”是干什么用的？您是说在插入字符串之前它就失败了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T14:33:12.680

所有内存分配都在 map 内处理，因此恕我直言，您不需要分配两次（一次在您的构造函数内（隐式））和另一次 - 在构造函数的主体内。除非地图的生命周期应该大于 nLetterFrequency 对象。

# java - 按代码滚动视图

> ID：10268579
> 
> 赞同：4
> 
> 时间：2012-04-22T14:02:53.053
> 
> 标签：java, android, view, scroll

我想以编程方式滚动一个`View`. 到目前为止，我发现了两种可能性：

*   `scrollTo(x,y)`: 的左上角`View`对应于必须在 中绘制的点 (x,y) `View`。问题是，在调用之后，无法手动滚动`View`显示 y 上方的内容或 x 左侧的内容。
*   `setScrollY(y)`: 似乎是我正在寻找的功能。但它仅适用于 14 级以上的 API。我的应用程序应该与 API 8 级一起使用。

是否有另一个功能可以做我想做的事情？

提前感谢您花时间帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:26:45.213

你`View`在一个`ScrollView`吗？如果没有，您将需要在使用代码设置滚动位置后自己处理事件以手动滚动视图。听起来您既想要手动控制又想要编程控制，因此您需要使用滚动容器或自己处理触摸事件。

# java - 通过 wget 在 Linux 上下载 Java JDK 会显示许可证页面

> ID：10268583
> 
> 赞同：634
> 
> 时间：2012-04-22T14:03:10.920
> 
> 标签：java, linux, installation, wget

当我尝试从 Oracle 下载 Java 时，我最终下载了一个页面，告诉我我需要同意 OTN 许可条款。

> # 对不起！
> 
> 要从 Oracle 技术网下载产品，您必须同意 OTN 许可条款。
> 
> 请确保...
> 
> *   您的浏览器启用了“cookies”和 JavaScript。
> *   您为要下载的产品单击了“接受许可”。
> *   您在接受许可后 30 分钟内尝试下载。

如何下载和安装 Java？

* * *

## 回答 #1

> 赞同：1707
> 
> 时间：2012-06-09T09:21:56.930

**适用于 JDK 17 的 2021 年 12 月 23 日**

```
wget --no-check-certificate -c --header "Cookie: oraclelicense=accept-securebackup-cookie" https://download.oracle.com/java/17/archive/jdk-17.0.1_linux-x64_bin.rpm 
```

**自 2021 年 7 月 27 日起适用于 JDK 16**

```
wget --no-check-certificate -c --header "Cookie: oraclelicense=accept-securebackup-cookie" https://download.oracle.com/otn-pub/java/jdk/16.0.2%2B7/d4a915d82b4c4fbb9bde534da945d746/jdk-16.0.2_linux-x64_bin.rpm 
```

**自 2020 年 11 月 5 日起适用于 JDK 15**

```
wget --no-check-certificate -c --header "Cookie: oraclelicense=accept-securebackup-cookie" https://download.oracle.com/otn-pub/java/jdk/15.0.1+9/51f4f36ad4ef43e39d0dfdbaf6549e32/jdk-15.0.1_linux-x64_bin.rpm 
```

**适用于 JDK 14 的 07-11-2020**

```
wget --no-check-certificate -c --header "Cookie: oraclelicense=accept-securebackup-cookie" https://download.oracle.com/otn-pub/java/jdk/14.0.1+7/664493ef4a6946b186ff29eb326336a2/jdk-14.0.1_linux-x64_bin.rpm -O ~/Downloads/jdk-14.0.1_linux-x64_bin.rpm 
```

PS：阿尔夫添加了这个（我）:-)这个，我不知道如何在最后发表评论......享受它。

**针对 Oracle JDK 11 更新**

```
wget --no-check-certificate -c --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/11+28/55eed80b163941c8885ad9298e6d786a/jdk-11_linux-x64_bin.tar.gz 
```

**针对 JDK 10.0.2 更新**

```
wget --no-check-certificate -c --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/10.0.2+13/19aef61b38124481863b1413dce1855f/jdk-10.0.2_linux-x64_bin.tar.gz 
```

**针对 JDK 10.0.1 更新**

```
wget --no-check-certificate -c --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/10.0.1+10/fb4372174a714e6b8c52526dc134031e/jdk-10.0.1_linux-x64_bin.tar.gz 
```

**已针对 JDK 9**进行了更新 ，看起来您现在可以直接从 java.net 下载它，而无需发送标头

```
wget http://download.java.net/java/GA/jdk9/9/binaries/jdk-9+181_linux-x64_bin.tar.gz 
```

**针对 JDK 8u191 更新**

焦油广州：

```
wget --no-cookies --no-check-certificate --header "Cookie: gpw_e24=http%3a%2F%2Fwww.oracle.com%2Ftechnetwork%2Fjava%2Fjavase%2Fdownloads%2Fjdk8-downloads-2133151.html; oraclelicense=accept-securebackup-cookie;" "https://download.oracle.com/otn-pub/java/jdk/8u191-b12/2787e4a523244c269598db4e85c51e0c/jdk-8u191-linux-x64.tar.gz" 
```

转速：

```
wget --no-cookies --no-check-certificate --header "Cookie: gpw_e24=http%3a%2F%2Fwww.oracle.com%2Ftechnetwork%2Fjava%2Fjavase%2Fdownloads%2Fjdk8-downloads-2133151.html; oraclelicense=accept-securebackup-cookie;" "https://download.oracle.com/otn-pub/java/jdk/8u191-b12/2787e4a523244c269598db4e85c51e0c/jdk-8u191-linux-x64.rpm" 
```

**针对 JDK 8u131 更新**

转速：

```
 wget -c --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u131-b11/d54c1d3a095b4ff2b6607d096fa80163/jdk-8u131-linux-x64.rpm 
```

焦油广州：

```
 wget -c --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u131-b11/d54c1d3a095b4ff2b6607d096fa80163/jdk-8u131-linux-x64.tar.gz 
```

使用 curl 的 RPM：

```
 curl -v -j -k -L -H "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u131-b11/d54c1d3a095b4ff2b6607d096fa80163/jdk-8u131-linux-x64.rpm > jdk-8u112-linux-x64.rpm 
```

在上述所有情况下，将 'i586' 替换为 'x64' 以下载 32 位版本。

*   **-j** -> 垃圾饼干
*   **-k** -> 忽略证书
*   **-L** -> 跟随重定向
*   **-H [arg]** -> 标题

`curl`可以用来代替`wget`.

**JDK 7u79 的更新**

焦油广州：

```
wget --no-check-certificate --no-cookies --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/7u79-b15/jdk-7u79-linux-x64.tar.gz 
```

使用 curl 的 RPM：

```
curl -v -j -k -L -H "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/7u79-b15/jdk-7u79-linux-x64.rpm > jdk-7u79-linux-x64.rpm 
```

再次确保为您正在下载的版本指定正确的 URL。您可以在此处找到 URL：[Oracle JDK 下载站点](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)

**2012 年 6 月 9 日的原始答案**

如果您希望使用 命令行从命令行下载 Oracle JDK `wget`，则有一种解决方法。运行`wget`命令如下：

```
wget --no-cookies --header "Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com" "http://download.oracle.com/otn-pub/java/jdk/7/jdk-7-linux-x64.tar.gz" 
```

请务必将下载链接替换为您正在下载的版本的正确链接。

* * *

## 回答 #2

> 赞同：256
> 
> 时间：2014-03-17T22:08:34.893

（*[Irani](https://stackoverflow.com/q/10268583/1821548)更新了我的回答，但在这里澄清一下。*）

### 编辑：针对[Java 17.0.1更新，于](https://www.oracle.com/java/technologies/javase/17u-relnotes.html)[2021 年 10 月 19 日](https://blogs.oracle.com/java/post/jdk-1701-11013-8u311-and-7u321-have-been-released)发布

## wget

```
wget -c --header "Cookie: oraclelicense=accept-securebackup-cookie" https://download.oracle.com/java/17/latest/jdk-17_linux-x64_bin.tar.gz 
```

*[有关更多信息，请参阅oracle.com](https://www.oracle.com/java/technologies/javase-downloads.html)中的下载。*

*   **`-c / --continue`**

允许继续未完成的下载。

*   **`--header "Cookie: oraclelicense=accept-securebackup-cookie"`**

自*2014 年 3 月 15 日起，此 cookie 在接受*[许可协议](https://www.gnu.org/software/wget/manual/wget.html#HTTP-Options)后提供给用户，并且是访问*download.oracle.com*中的 Java 包所必需的。*2012 年 3 月 27 日*的前一次（也是第一次）实施使用了 cookie `gpw_e24=http%3A%2F%2Fwww.oracle.com[...]`。这两起案件均未向公众公布。

*该值不必是“ `accept-securebackup-cookie`”。*

### 不需要

*   **`--no-cookies`**

该组合`--no-cookies --header "Cookie: name=value"`被称为“[官方](https://daniel.haxx.se/docs/curl-vs-wget.html)”cookie 支持，但此处并非严格要求。

## 卷曲

```
curl -L -C - -b "oraclelicense=accept-securebackup-cookie" -O https://download.oracle.com/java/17/latest/jdk-17_linux-x64_bin.tar.gz 
```

*   **`-L / --location`**

*cURL*需要通过所有镜像重定向。

*   **`-C / --continue-at -`**

*往上看。cURL`-`最后需要破折号 ( )。*

*   **`-b / --cookie "oraclelicense=accept-securebackup-cookie"`**

*与 相同`-H / --header "Cookie: ..."`，但也接受文件。*

*   **`-O`**

*cURL*需要用于保存文件（有关更多差异，请参见 [作者的比较][8]）。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-06-26T14:47:26.137

从命令行下载Java一直很麻烦。我最近一直在做的是使用 FireFox（其他浏览器可能工作）在我的笔记本电脑上开始下载，暂停它（在下载窗口中），使用上下文菜单中显示的“复制下载链接”菜单项下载文件。然后可以在 Linux 机器上使用此 URL 来下载相同的文件。我希望 URL 的生存时间很短。丑陋，但总体上是成功的。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2017-04-11T19:16:08.207

**针对 JDK 8u171 RPM 更新**

```
wget --no-check-certificate -c --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u171-b11/512cd62ec5174c3487ac17c61aaa89e8/jdk-8u171-linux-x64.rpm 
```

* * *

*以下链接已过时*

~~**针对 JDK 8u161 RPM 更新**~~

 ~~```
wget --no-check-certificate -c --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u161-b12/2f38c3b165be4555a1fa6e98c45e0808/jdk-8u161-linux-x64.rpm 
```~~ 

**针对 JDK 8u152 RPM 更新**

```
wget --no-check-certificate -c --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u152-b16/aa0333dd3019491ca4f6ddbe78cdb6d0/jdk-8u152-linux-x64.rpm 
```

**针对 JDK 8u144 RPM 更新**

```
wget --no-check-certificate -c --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u144-b01/090f390dda5b47b9b721c7dfaa008135/jdk-8u144-linux-x64.rpm 
```

**针对 JDK 8u131 RPM 更新**

```
wget --no-check-certificate -c --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u131-b11/d54c1d3a095b4ff2b6607d096fa80163/jdk-8u131-linux-x64.rpm 
```

**针对 JDK 8u121 RPM 更新**

```
wget --no-check-certificate -c --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u121-b13/e9e7ea248e2c4826b92b3f075a80e441/jdk-8u121-linux-x64.rpm 
```

 ~~* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-11-12T16:04:16.503

我知道甲骨文尽一切可能使他们的 Java 运行时和 Java SDK 尽可能地困难。

这里有一些命令行爱好者的指南。

对于类似 Debian 的系统（在`Debian`Squeeze 和`Ubuntu`12.x+ 上测试）

```
su -
echo "deb http://ppa.launchpad.net/webupd8team/java/ubuntu precise main" | tee -a /etc/apt/sources.list
echo "deb-src http://ppa.launchpad.net/webupd8team/java/ubuntu precise main" | tee -a /etc/apt/sources.list
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys EEA14886
apt-get update
apt-get install --yes oracle-java7-installer
exit 
```

注意：如果您知道更好或更简单的方法添加评论，我将更新指南。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-08-06T20:25:49.360

Java SE 开发工具包 12.0.2

广州

```
wget  --no-cookies --no-check-certificate --header "Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie" https://download.oracle.com/otn-pub/java/jdk/12.0.2+10/e482c34c86bd4bf8b56c0b35558996b9/jdk-12.0.2_linux-x64_bin.tar.gz 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-06-25T06:55:36.657

最新测试，

> wget --no-cookies --no-check-certificate --header "Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com" " [https://edelivery.oracle.com/otn-pub/java/ jdk/7u25-b15/jdk-7u25-linux-x64.tar.gz](https://edelivery.oracle.com/otn-pub/java/jdk/7u25-b15/jdk-7u25-linux-x64.tar.gz) "

请注意，如果您关心绝对安全性，则禁用证书检查。:)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-04-22T14:04:08.670

Oracle 在下载链接上放置了一个预防 cookie，以强制您同意这些条款，即使使用 Java 的许可协议明确指出，仅通过使用 Java，您就“同意”该许可。

Oracle 想要的方法是您通过协议下载它。之后，针对您的特定 Linux 修改此脚本

```
#!/bin/bash
#Author: Yucca Nel http://thejarbar.org
#Will restart system
#Modify these variables as needed...
tempWork=/tmp/work
locBin=/usr/local/bin
javaUsrLib=/usr/lib/jvm

sudo mkdir -p $javaUsrLib
mkdir -p $tempWork
cd $tempWork

#Extract the download
tar -zxvf $downloadDir/jdk*tar.gz

#Move it to where it can be found...

sudo mv -f $tempWork/jdk* $javaUsrLib/

sudo ln -f -s $javaUsrLib/jdk1/bin/* /usr/bin/

#Update this line to reflect versions of JDK...
export JAVA_HOME="$javaUsrLib/jdk1.7.0_03"
#Extract the download
tar -zxvf $tempWork/*

#Move it to where it can be found...

sudo mv -f $tempWork/jdk1* $javaUsrLib/

sudo ln -f -s $javaUsrLib/jdk1*/bin/* /usr/bin/
sudo rm -rf $tempWork
#Update this line to reflect newer versions of JDK...
export JAVA_HOME="$javaUsrLib/jdk1.7.0_03"

if ! grep "JAVA_HOME=$javaUsrLib/jdk1.7.0_03" /etc/environment
then
    echo "JAVA_HOME=$javaUsrLib/jdk1.7.0_03"| sudo tee -a /etc/environment
fi

exit 0 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2015-07-02T16:00:14.243

对于那些也需要 JCE8 的人，您也可以下载它。

```
curl -L -C - -b "oraclelicense=accept-securebackup-cookie" -O http://download.oracle.com/otn-pub/java/jce/8/jce_policy-8.zip 
```

或者

```
wget --no-check-certificate -c --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jce/8/jce_policy-8.zip 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2012-06-13T13:30:30.930

这适用于 JDK 6，您只需将下载 url 替换为最新版本。

```
wget --no-cookies --header "Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2Ftechnetwork%2Fjava%2Fjavase%2Fdownloads%2Fjdk6-downloads-1637591.html;" http://download.oracle.com/otn-pub/java/jdk/6u33-b03/jdk-6u33-linux-x64.bin 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2018-09-06T10:01:17.557

这个命令现在可以下载jdk8 tgz包（2018-09-06），祝你好运！

```
wget --no-cookies --no-check-certificate --header "Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie" "http://download.oracle.com/otn-pub/java/jdk/8u141-b15/336fa29ff2bb4ef291e347e091f7f4a7/jdk-8u141-linux-x64.tar.gz" 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2018-04-11T16:29:12.483

我没有为每个新的 Java 版本使用新链接或更改现有脚本，而是寻找一种更通用的方法来自动下载所需的 Java 包并稍后通过`yum localinstall ${JAVA_ENVIRONMENT}-${JAVA_VERSION}-linux-x64.rpm`.

我使用了一种类似于手动/用户操作的微不足道的方法来查找包并下载它。我也很确定人们会通过使用其他工具（如`egrep`,`awk`等）找到一种更优雅的方式来实现这一点，所以在这里作为示例：

```
#!/bin/bash

### Proxy settings
# If there is a company proxy 

PROXY="my.proxy.local:8080"
PROXY_TYPE="--proxy-ntlm" # or leave empty with ""
USER="user"
PASS='pass'

### Find out the links to JRE and JDK 
# To do so, got to the page http://www.oracle.com/technetwork/java/javase/downloads/

BASE_URL="technetwork/java/javase/downloads"

# Put the whole page into a single string/line

BASE_URL_OUTPUT="$(curl -s -k ${PROXY_TYPE} -x "http://${USER}:${PASS}@${PROXY}" -L0 http://www.oracle.com/${BASE_URL}/)"

# Define the environments to download 

JAVA_ENVIRONMENTS=("JRE" "JDK") # ! yet "SERVER-JRE"

for JAVA_ENVIRONMENT in "${JAVA_ENVIRONMENTS[@]}"
do

echo
echo "JAVA_ENVIRONMENT="$JAVA_ENVIRONMENT
echo

for (( JAVA_BASE_VERSION = 8; JAVA_BASE_VERSION <= 10; JAVA_BASE_VERSION += 2 ))  
do

echo "JAVA_BASE_VERSION="$JAVA_BASE_VERSION

### "Read the page"
# and follow the links for the package interested in 

DOWNLOAD_SITE="$(echo $BASE_URL_OUTPUT | grep -m 1 -io "${JAVA_ENVIRONMENT}${JAVA_BASE_VERSION}-downloads-[0-9]*.html" -- | tail -1)"
echo "DOWNLOAD_SITE="$DOWNLOAD_SITE

### Gather the necessary download links
# To do so, following the link to the download site
# reading and accept the license 
# 
# ... the greedy regular expression is to address the different syntax of the links
# and already prepared for OR .gz files 

DOWNLOAD_LINK_OUTPUT="$(curl -s -k ${PROXY_TYPE} -x "http://${USER}:${PASS}@${PROXY}" -L -j -H "Cookie: oraclelicense=accept-securebackup-cookie" http://www.oracle.com/${BASE_URL}/${DOWNLOAD_SITE} |  grep -io "filepath.*${JAVA_ENVIRONMENT}-[${JAVA_BASE_VERSION}].*linux[-_]x64[._].*\(rpm\)" -- | cut -d '"' -f 3 | tail -1)"

# and echo out the link

echo "DOWNLOAD_LINK_OUTPUT="$DOWNLOAD_LINK_OUTPUT

done

done 
```

由于下载链接现在可用，因此可以继续使用`wget`或`curl`。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2013-12-20T14:34:29.767

以上所有内容似乎都假设您知道最新 Java RPM 的 URL...

Oracle 提供每个 Java 版本 的*最新更新的持久链接，如*[https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=397248601136938&id=1414485.1](https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=397248601136938&id=1414485.1)中所述- 尽管您需要创建/登录到 Oracle 支持帐户. *否则您只能访问每个 Java 版本的最后一次“公开”更新，例如 1.6_u45（2013 年 3 月；最新更新是 u65，2013 年 10 月）*

一旦你**知道**了持久链接，你应该能够将它解析为真正的下载；以下对我有用，但我还不知道“aru”参考是否发生变化。

```
ME=<myOracleID>
PW=<myOraclePW>
PATCH_FILE=p13079846_17000_Linux-x86-64.zip

echo "Get real URL from the persistent link"

wget -o getrealurl.out --no-cookies --no-check-certificate --user=$ME \
--password=$PW --header "Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com" \
https://updates.oracle.com/Orion/Services/download/$PATCH_FILE?aru=16884382&\
patch_file=$PATCH_FILE

wait    # wget appears to go into background, so "wait" waits 
        # until all background processes complete

REALURL=`grep "^--" getrealurl.out |tail -1 |sed -e 's/.*http/http/'`
wget -O $PATCH_FILE $REALURL
#These last steps must be done quickly, as the REALURL seems to have a short-lived 
#cookie on it and I've had no success with  --keep-session-cookies etc. 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2017-01-18T12:59:54.593

正如这里已经发布的那样： [https ://stackoverflow.com/a/41718895/4370196](https://stackoverflow.com/a/41718895/4370196)

# JDK 8 更新 121 的更新

由于 Oracle 在其下载链接中插入了一些 md5hash，因此无法自动为命令行组装下载链接。

所以我修改了一些讨厌的 bash 命令行来获取最新的 jdk 下载链接，下载它并直接通过 rpm 安装。对于所有感兴趣的人：

> wget -q [http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html) -O ./index.html && grep -Eoi ']+>' index.html | grep -Eoi '/technetwork/java/javase/downloads/jdk8-downloads-[0-9]+.html' | （头-n 1）| awk '{打印" [http://www.oracle.com](http://www.oracle.com) "$1}' | xargs wget --no-cookies --header "Cookie: gpw_e24=xxx; oraclelicense=accept-securebackup-cookie;" -O index.html -q && grep -Eoi '"文件路径":"[^"]+jdk-8u[0-9]+- **linux-x64.rpm** "' index.html | grep -Eoi 'http:[ ^"]+' | xargs wget --no-cookies --header "Cookie: gpw_e24=xxx; oraclelicense=accept-securebackup-cookie;" -q -O ./jdk8.rpm && sudo rpm -i ./jdk8.rpm

**粗体部分**应替换为您喜欢的包装。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2014-04-22T09:51:49.530

`java-package`我通过使用几次（对于各种架构）制作软件包来解决这个问题（对于基于 Debian 的 Linux 发行版） ，然后在内部分发它们。

最大的好处是这种方法总是有效的。不管甲骨文的网页变得多么疯狂。Oracle 不能再破坏我的构建！

缺点是最初设置的工作量更大。

*   在浏览器中手动下载 tar.gz 文件（从而“接受”他们的条款）
*   运行`make-jpkg jdk-7u51-linux-x64.tar.gz`。这创造了`oracle-java8-jdk_8_amd64.deb`
*   在您的组织内分发它

对于通过 Internet 分发，我建议使用受密码保护的 apt 存储库或使用对称加密提供原始包：

```
passphrase="Hard to crack string. Use /dev/urandom for inspiration."
gpg --batch --symmetric --force-mdc --passphrase-fd 0 \
   oracle-java8-jdk_8_amd64.deb <<< "$passphrase" 
```

当然，在 Internet 上提供（未加密的）.deb 包*可能*违反了您与 Oracle 的许可协议，该协议规定：

> ... Oracle 授予您 ... 许可 ... 以在内部复制和使用完整且未经修改的软件，其唯一目的是运行程序”

在接收端，如果你有一个受密码保护的 apt repo，你需要做的就是`apt-get install`它。如果您有原始包，请下载、解密`dpkg -i`它们。奇迹般有效！

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-04-25T20:00:40.503

截至 2017 年 4 月 25 日，接受的答案对我不起作用。但是，简单的解决方案是使用`-b`标志而不是`--header`选项。

例如，要获取 jdk-1.8_131：

```
version='8u131'; wget -H -O jdk-$version-linux-x64.tar.gz --no-check-certificate --no-cookies -b "oraclelicense=a" http://download.oracle.com/otn-pub/java/jdk/$version-b11/jdk-$version-linux-x64.tar.gz 
```

这将在后台执行，将输出写入`wget-log`.

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2017-09-24T15:33:01.253

**wget**这对我有用 JDK8

```
wget --no-cookies --no-check-certificate --header "Cookie: gpw_e24=http%3A%2F%2F%www.oracle.com%2F; oraclelicense=accept-securebackup-cookie" "http://download.oracle.com/otn-pub/java/jdk/8u131-b11/d54c1d3a095b4ff2b6607d096fa80163/jdk-8u131-linux-x64.rpm" 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2014-02-09T00:32:21.070

尝试

```
wget --no-cookies --header "Cookie: s_nr=1359635827494; s_cc=true; gpw_e24=http%3A%2F%2Fwww.oracle.com%2Ftechnetwork%2Fjava%2Fjavase%2Fdownloads%2Fjdk6downloads-1902814.html; s_sq=%5B%5BB%5D%5D; gpv_p24=no%20value" http://download.oracle.com/otn-pub/java/jdk/6u45-b06/jdk-6u45-linux-x64-rpm.bin --no-check-certificate -O ./jdk-6u45-linux-x64-rpm.bin 
```

如果您像我一样尝试获取 Oracle JDK 6。

来源：[使用 curl/wget 下载 Oracle JVM](https://gist.github.com/hgomez/4697585)

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2015-05-19T11:55:24.363

我为我的 gentoo 盒子制作了一个 jdk 下载脚本（特定于 tar.gz）。不需要像其他类似脚本一样更新，尝试“蛮力”下载您想要的任何版本的最新版本。

**用法**

```
jdk-download< <version> <platform> [<build>]

* <version> - Something like "8u40"
* <platform> - Usually i586 or x64
* <build> - The internal build number used by oracle, to avoid guessing and trying to download starting from 99 to 1 (build 0, really?!!) 
```

[博文](http://bonfab.io/?p=10)

[位桶上的来源](https://bitbucket.org/bfx/jdk-download/src/2b32dbe6775ce6008b84bf3dc1d9329708f88774/jdk-download?at=default)

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2017-11-01T00:28:57.513

[oracle-java-download](https://github.com/veita/oracle-java-download)是 GitHub 上的一个项目，它允许您为 JDK 8 和 JDK 9 创建下载链接，您可以将其用于进一步处理，例如在自动构建或部署过程中。

它需要 Linux、Docker 和 JDK >= 8 才能运行。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2018-01-18T13:35:59.837

wget --no-cookies --no-check-certificate --header "Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie" " [http://download. oracle.com/otn-pub/java/jdk/8u161-b12/2f38c3b165be4555a1fa6e98c45e0808/jdk-8u161-linux-x64.rpm?AuthParam=1516282527_40effcfefd78d78bce12c0a4030a1b05](http://download.oracle.com/otn-pub/java/jdk/8u161-b12/2f38c3b165be4555a1fa6e98c45e0808/jdk-8u161-linux-x64.rpm?AuthParam=1516282527_40effcfefd78d78bce12c0a4030a1b05) ”

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2018-02-07T13:45:21.870

**语境**

我最近遇到了同样的问题，尽管此页面上的评论和其他一些评论提供了有用的提示 - 我认为最好记录下我为可能需要进一步帮助的人解决问题所采取的步骤。

**系统详情**

我按照以下位置的分步 pnda 安装指南在 AWS 上设置 PNDA：

```
https://github.com/pndaproject/pnda-guide/blob/develop/provisioning/aws/PREPARE.md 
```

我在 AWS 云上使用 ubuntu 14.04 [符合免费套餐条件]，并从 64 位 windows8.1 笔记本电脑上运行代码。我正在使用 PUTTY 连接到服务器实例。我 git 将 pnda 代码从[https://github.com/pndaproject/pnda](https://github.com/pndaproject/pnda)克隆到 ubuntu 实例。

**重要说明** 请注意，如果您计划在 AWS 上使用 Ubuntu 实例，请确保它仅是 14.04。如果您使用版本 16，则它不起作用。我学得很辛苦！

**解决步骤**

正如那些已经遇到这里讨论的错误的人所知道的那样 - 镜像创建文件涉及以下步骤 -

1）运行脚本create_mirror.sh `[ sudo su -s ./create_mirror.sh ]`，运行完整的镜像创建过程

2) 该脚本依次调用各种其他脚本 - 其中之一是**create_mirror_misc.sh**；这个脚本是指`pnda-static-file-dependencies.txt`哪个有要下载的文件列表。

3) 在 pnda-static-file-dependencies.txt 的第一行是下载 jdk-8u131-linux-x64.tar.gz 文件的参考 `http://download.oracle.com/otn-pub/java/jdk/8u131-b11/d54c1d3a095b4ff2b6607d096fa80163/jdk-8u131-linux-x64.tar.gz oraclelicense=accept-securebackup-cookie`；正是在这一点上，我的脚本因消息而失败`Failed to download http://download.oracle.com/otn-pub/java/jdk/8u131-b11/d54c1d3a095b4ff2b6607d096fa80163/jdk-8u131-linux-x64.tar.gz after 3 retries`

4）我浏览到该页面`http://download.oracle.com/otn-pub/java/jdk/8u131-b11/d54c1d3a095b4ff2b6607d096fa80163/jdk-8u131-linux-x64.tar.gz`，发现显示以下错误消息`**In order to download products from Oracle Technology Network you must agree to the OTN license terms**`

5）为了解决这个问题，我对`pnda-static-file-dependencies.txt`; 我添加了 --no-check-certificate --no-cookies 以绕过许可条款协议条件

6）所以修改后的代码看起来像 -`http://download.oracle.com/otn-pub/java/jdk/8u131-b11/d54c1d3a095b4ff2b6607d096fa80163/jdk-8u131-linux-x64.tar.gz --no-check-certificate --no-cookies oraclelicense=accept-securebackup-cookie`

我希望这是有帮助的。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2018-06-13T08:26:29.007

你应该试试：

```
wget \
        --no-cookies \
        --header "Cookie: oraclelicense=accept-securebackup-cookie" \
        http://download.oracle.com/otn-pub/java/jdk/8u172-b11/a58eab1ec242421181065cdc37240b08/jdk-8u172-linux-x64.tar.gz \
        -O java.tar.gz 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2019-09-19T02:27:37.243

下载jdk 8u221

```
$ wget -c --content-disposition "https://javadl.oracle.com/webapps/download/AutoDL?BundleId=239835_230deb18db3e4014bb8e3e8324f81b43"
$ old=$(ls -hat | grep jre | head -n1)
$ mv $old $(echo $old | awk -F"?" '{print $1}') 
```

我的博客[044-wget下载jdk8u221](https://anjia0532.github.io/2019/09/18/wget-jdk-8u221)

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2020-03-16T16:09:54.350

这是自己获取命令的方法。这适用于任何版本：

1.  在此处访问软件包页面：[https ://www.oracle.com/java/technologies/javase-jdk11-downloads.html](https://www.oracle.com/java/technologies/javase-jdk11-downloads.html)
2.  单击所需软件包的下载链接
3.  选中表明您已“审核并接受...”的框
4.  右键单击并从按钮复制​​链接地址
5.  粘贴到文本编辑器中，然后在“nexturl=”之后复制所有内容，以“https://”开头
6.  更新此命令中的下载 URL，您应该一切顺利：

    wget --no-check-certificate -c --header "Cookie: oraclelicense=accept-securebackup-cookie" [https://download.oracle.com/otn/java/jdk/11.0.6+8/90eb79fb590d45c8971362673c5ab495/jdk- 11.0.6_linux-x64_bin.tar.gz](https://download.oracle.com/otn/java/jdk/11.0.6+8/90eb79fb590d45c8971362673c5ab495/jdk-11.0.6_linux-x64_bin.tar.gz)

为了进一步解释 wget，--no-check-certificate 应该足够清楚，但是可以通过使用浏览器中的开发者工具网络选项卡发现标头内容（对于任何调用）。开发人员工具功能强大，非常值得花时间学习。享受。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2021-09-27T11:30:48.147

这个问题将从 Oracle JDK 17 开始解决 -

[https://www.oracle.com/java/technologies/jdk-script-friendly-urls/](https://www.oracle.com/java/technologies/jdk-script-friendly-urls/)

可以从命令行下载最新版本的 Oracle JDK 17，也可以使用下载 URL 在脚本和 dockerfile 中自动下载，下载 URL 将提供当前的更新版本。

一个可以使用 -

```
wget https://download.oracle.com/java/17/latest/jdk-17_linux-x64_bin.tar.gz 
```

获取最新 17 版本的格式

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2019-10-08T15:48:35.897

发生这种情况是因为当您在浏览器的下载页面上单击“接受”按钮时，该网页会保存一个 cookie，用于在让您下载文件之前检查您的协议。尝试使用 wget 从命令行下载时会出现问题，这是因为没有随 wget 请求发送的用于下载文件的 cookie 信息，因此从文件服务器的角度来看，您是一个未接受许可证的全新用户协议。

一种解决方案是使用 wget 实用程序的 --header 选项发送 cookie 信息（如上面其他答案所示）。理想情况下，如果某些内容受到保护，您将使用 wget 提供的各种会话管理选项。然而，对于这个特定问题，它（当前）通过发送`Cookie`带有下载请求的标头来解决。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-03-29T17:39:09.263

@eric 回答对我有用，您需要在设置的命令中接受条款，即

```
"Cookie: oraclelicense=accept-securebackup-cookie" 
```

所以你的最终命令看起来像这样

```
wget -c --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u131-b11/d54c1d3a095b4ff2b6607d096fa80163/jdk-8u131-linux-x64.tar.gz 
```

`8u131`您可以通过更改为来决定更新版本`8uXXX`。只要它在回购中可用。

* * *

## 回答 #29

> 赞同：-3
> 
> 时间：2013-12-06T13:13:59.740

```
sudo wget --no-check-certificate --no-cookies --header "Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com" "http://download.oracle.com/otn-pub/java/jdk/7u45-b18/jdk-7u45-linux-x64.rpm" 
```

* * *

## 回答 #30

> 赞同：-4
> 
> 时间：2013-09-26T19:53:51.743

为什么不点击从浏览器下载，然后复制并粘贴下载的确切链接，例如：

```
wget http://download.oracle.com/otn-pub/java/jdk/7u40-b43/jdk-7u40-linux-x64.tar.gz?AuthParam=1380225131_dd70d2038c57a4729d8c0226684xxxx 
```

您可以在接受 oracle 中的条款并单击下载后，通过查看浏览器的网络选项卡找到该链接。在 Chrome 中按 F12。火狐中的萤火虫。~~

# iphone - 这个视图或框架叫什么？

> ID：10268584
> 
> 赞同：1
> 
> 时间：2012-04-22T14:03:27.000
> 
> 标签：iphone, ios5

我现在正在学习编写一个简单的 iPhone 程序。有谁知道以下效果是如何创建的，即复选标记？

![](../Images/23619d9c939e7d94aba41b6f766435b9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:09:10.073

在我看来，这是一个HUD。有很多替代方法可以产生类似的效果：

*   [https://github.com/samvermette/SVProgressHUD](https://github.com/samvermette/SVProgressHUD)
*   [https://github.com/jdg/MBProgressHUD](https://github.com/jdg/MBProgressHUD)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T14:07:19.560

没有提供此功能的内置视图或控件，但常见的第三方（也支持进度指示器）是[MBProgressHUD](https://github.com/matej/MBProgressHUD)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T14:09:19.320

对此没有内置效果。您可以使用带有复选框图像的 UIImageView 来实现这一点。将 UIImageView alpha 设置为 .3f。

# ios - iCloud 仅在 App 终止后同步

> ID：10268585
> 
> 赞同：1
> 
> 时间：2012-04-22T14:03:51.820
> 
> 标签：ios, sandbox, icloud

我的 iOS 应用程序使用 iCloud 使文档与 OS X 版本保持同步。这几乎可以正常工作。

问题是设备 iCloud 沙箱仅在应用程序终止后同步，因为我的应用程序将在后台保持打开状态，只要它没有被系统关闭，这增加了任一客户端之间发生文档冲突的可能性。

我试过打电话

```
NSError *error = NULL;
[[NSFileManager defaultManager] startDownloadingUbiquitousItemAtURL:downloadfile error:&error]; 
```

当应用程序进入后台时，正如文档声称的那样

> 如果尚未下载基于云的文件或目录，则调用此方法将启动下载过程。如果该项目在本地存在，则调用该方法会将本地副本与云中的版本同步。

关于如何在应用程序仍处于打开状态时强制同步的任何想法？

# arrays - Zend 表单元素数组

> ID：10268589
> 
> 赞同：1
> 
> 时间：2012-04-22T14:04:33.087
> 
> 标签：arrays, zend-framework, zend-form, element

我正在使用 Zend Form 构建一个简单的消息系统，用户可以在其中选择多个收件人。每个收件人可能是不同的用户类型，因此我需要同时拥有用户类型和 ID 才能发送到服务层。该表单将从选择一个收件人开始（作为表单中的一个数组元素），我计划使用 jQuery 将每个后续收件人附加到所述数组。我希望以这个结束：

```
array(4) {
    ["Subject"] => string(4) "My message subject"
    ["Body"] => string(6) "My body of text"
    ["Recipients"] => array(1) {
        [0]
            ["profile"] => string(2) "476"
        }
        [1]
            ["otherusertype"] => string(1) "54"
        }
    }
} 
```

这将使我能够轻松轻松地遍历每个收件人，获得用户类型和相应的 ID。

现在，我目前正在 Zend Form 中执行此操作：

```
$form->addElement(
    'hidden', 
    $type, 
    array(
        'value' => $id, 
        'belongsTo' => 'Recipients'
    )
); 
```

但这给我留下了

```
array(4) {
  ["Subject"] => string(4) "hfgh"
  ["Body"] => string(6) "fghfgh"
  ["Recipients"] => array(1) {
    ["profile"] => string(1) "1"
  }
} 
```

如您所见，如果我将另一个用户类型为“profile”的收件人添加到数组中，它将被覆盖。

我怎样才能在这个数组中获得一个额外的维度？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T07:35:02.983

您应该将您`belongsTo`的设置为数组：

```
 $this->addElement('hidden',  '1', array(
        'value' => 1, 
        'belongsTo' => 'Recipients[profile]'
    ));
    $this->addElement('hidden',  '2', array(
        'value' => 2, 
        'belongsTo' => 'Recipients[profile]'
    )); 
```

# javascript - Google Charts - 动画过渡示例

> ID：10268590
> 
> 赞同：3
> 
> 时间：2012-04-22T14:04:37.327
> 
> 标签：javascript, google-visualization

看看我下面的 JS，我的 google 图表的 drawChart 函数。这按我的预期工作。但是，因为`var chart ...`在 drawChart 函数内部，动画不起作用 - 相反谷歌认为它每次都在创建一个全新的图表，并且只是刷新图表。

我想在他们的示例中执行类似操作，其中数据根据我的设置**移动（1000 毫秒，默认缓动：线性）。**示例在这里：[https ://developers.google.com/chart/interactive/docs/animation](https://developers.google.com/chart/interactive/docs/animation)

`var chart ...`如果我从`drawChart`函数中取出，我会收到“*未定义图表*”错误。感谢经常使用谷歌图表的任何人的帮助。谢谢您的帮助。

```
var chart = "notSet";
google.load('visualization', '1.0', {'packages':['corechart']});
google.setOnLoadCallback(setGoogleData);
google.setOnLoadCallback(drawChart);
newValue = 0;
var data = [];
function setGoogleData(){
  data[0] = new google.visualization.DataTable(JSON_DATA_LOCATED_HERE);
  data[1] = new google.visualization.DataTable(JSON_DATA_LOCATED_HERE);
  var chart = new google.visualization.LineChart(document.getElementById('stopByTripChart'));
}
function drawChart() {
  if(chart == "notSet"){
    var chart = new google.visualization.LineChart(document.getElementById('stopByTripChart'));
  }
  var options = {"title":"Average Load Summary","titlePosition":"in","width":1100,"height":700,"hAxis.slantedTextAngle":90,"hAxis.position":"out","pointSize":5,"animation.duration":1000,"animation.easing":"linear","hAxis.showTextEvery":1,"hAxis.title":"Stops"};
  chart.draw(data[newValue], options);
}
function changeChart(){
  newValue = document.getElementById("chartNumber").value;
  drawChart();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T18:24:35.433

我自己从未尝试过 Google 图表，但我认为这样的代码会起作用：

```
var chart = null;
function drawChart() {
  if(chart === null){
     chart = new google.visualization.LineChart(document.getElementById('stopByTripChart'));
  }
  var options = {"title":"Average Load Summary",
                 "titlePosition":"in",
                 "width":1100,
                 "height":700,
                 "hAxis" :{"slantedTextAngle":90,
                           "position":"out",
                           "showTextEvery":1,
                           "title":"Stops"},
                 "pointSize":5,
                 "animation":{"duration":1000,
                              "easing": 'out'};
  chart.draw(data[newValue], options);
}
function changeChart(){
  newValue = document.getElementById("chartNumber").value;
  drawChart();
} 
```

否则，关于未定义图表的错误可能来自您可能在加载谷歌库之前放置代码的事实。因此，在 google 对象存在之前调用了图表（但很难仅用那个片段来判断）。

# python - 错误：无法导入设置，因为无法定义环境变量（Django 日志记录）

> ID：10268597
> 
> 赞同：0
> 
> 时间：2012-04-22T14:05:13.973
> 
> 标签：python, django, logging

我启动了一个 django 应用程序，我需要在我的应用程序中使用日志记录模块

这是setting.py 中的（LOGGING 部分），我没有更改任何内容。

```
LOGGING = {
'version': 1,
'disable_existing_loggers': False,
'handlers': {
    'mail_admins': {
        'level': 'ERROR',
        'class': 'django.utils.log.AdminEmailHandler'
    }
},
'loggers': {
    'django.request': {
        'handlers': ['mail_admins'],
        'level': 'ERROR',
        'propagate': True,
    },
} 
```

}

我在与模型相同的目录中有一个名为 categories.py 的文件，这是 categories.py 的代码

```
import logging
from django.template import RequestContext
from django.shortcuts import render_to_response
from models import Task
from models import Category
from models import Subcategory

 logger = logging.getLogger(__name__)

def li():
    logger.error('Finished')

def categories(request):
    all_categories = Category.objects.all()
    return render_to_response('categories/view all categories & tasks.html', {'all_categories': all_categories},RequestContext(request)) 
```

我在与 models.py 相同的目录中有另一个名为 myapl2.py 的文件，这是代码

```
import logging
import categories

def main():
    logging.basicConfig(filename='myapp.log',format='%(message)s,%(asctime)s',datefmt='%m/%d/%Y %I:%M:%S %p',level=logging.DEBUG)

    categories.li()

if __name__ == '__main__':
    main() 
```

在 cmd 中，当我 cd 到此目录并运行 myapl2.py 时出现错误，

导入类别时似乎有问题，

我在cmd中得到以下内容：

从 django.shortcuts 导入 render_to_response

引发错误：无法导入设置，因为无法定义环境变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:10:12.840

首先要做的事情：编写这样一个独立脚本的最方便的方法是使用[manage.py 子命令](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/ "manage.py 子命令")。

关于您的代码的两条评论：

*   在 myapl2.py 中，您正在设置日志记录。Django 也这样做，使用您的 LOGGING 设置。那两个可能会互相咬。

*   并且（可能是复制/粘贴错误）：categories.py 行前面有一个空格`logging = ...`，这也可能会给您一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T14:28:38.343

如果你刚刚做了 python myapl2.py 这个错误，请阅读[https://docs.djangoproject.com/en/dev/topics/settings/#using-settings-without-setting-django-settings-module](https://docs.djangoproject.com/en/dev/topics/settings/#using-settings-without-setting-django-settings-module)

# javascript - javascript复选框验证

> ID：10268599
> 
> 赞同：0
> 
> 时间：2012-04-22T14:05:23.880
> 
> 标签：javascript, checkbox

复选框的验证不起作用。它没有给出任何错误。你能帮我修一下吗？以及如何将错误合并到一个警报中而不是一个一个？

谢谢你的帮助。

html代码：

```
<form class="contact_form" action="" method="post" name="contact_form" onsubmit="returnonFormSubmit(this)">
<li>
<label for="First Name">First Name:</label>
<input type="text" name="visitor_name" /><br />
</li>

<li>
<label for="condition">I agree with the terms and conditions.</label>
<input type="checkbox" name="lan" /><br />
</li>

<li>
              <label for="Male">Male:</label>
          <input type="radio" name="gender" value="m" /> &nbsp; Female:<input type="radio" name="gender" value="f" /><br />
              </li>
              <li>
              <label for="National Rating">National Rating:</label>
              <select name="make">
              <option selected>-- SELECT --</option>
              <option> Below 1200 </option>
              <option> 1200 - 1500 </option>
              <option> 1500 - 1800 </option>
              <option> 1800 - 2100 </option>
              <option> Above 2100 </option>
              </select><br />
              </li>

<li>
<button class="submit" type="submit">Submit</button>
</li>
     <div id="error_message" style="color:#ff0000;"></div> 
```

javascript代码：

```
 function onFormSubmit(form_element)
{
    var checked = 0;
    var letters = /^[a-zA-Z]+$/;

if (form_element.visitor_name.value.match(letters))
    {
            true;
            }
    else
            {
    alert("Please enter a valid first name. For example; John.");
    false;
    }
        if (form_element.lan.checked == false)
            {
            alert("Please accept the terms and conditions");
            false;
            }
if (form_element.gender[0].checked == false && form_element.gender[1].checked == false)
    {
    alert("Please select a gender.");
    false;
    }
    if (form_element.make.selectedIndex == 0)
            {
            alert("Please select your rating interval.");
            form_element.make.focus();
            false;
            }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:09:24.313

你有一个错字`onsubmit="returnonFormSubmit(this)"`。它应该是

```
onsubmit="return onFormSubmit(this)" 
```

在控制台打开的情况下运行它会给你一个有价值的错误/警告。尝试 Chrome 的开发者工具、Firefox 的 Firebug 或类似工具。

要将错误合并为一个，您可以从一个空字符串开始，`msg = ''`并在出现错误时附加到它。然后在函数的底部，`alert(msg)`如果它非空则返回 false，否则返回 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T14:14:23.323

您应该将错误消息连接到一个变量中。

```
function onFormSubmit(form_element)
{
    var checked = 0;
    var letters = /^[a-zA-Z]+$/;
    var errorMessage = "";
    if (!form_element.visitor_name.value.match(letters))
    {
        errorMessage += "Please enter a valid first name. For example; John.\n";
    }
    if (form_element.lan.checked == false)
    {
        errorMessage += "Please accept the terms and conditions\n";
    }
    if (errorMessage != "")
    {
       alert(errorMessage);
       return false;        
    }
    return true;
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T14:22:03.693

修复 returnonFormSubmit(this) 中的错字后，它可以在 Chrome 和 Firefox 中使用。

（顺便说一句：你忘记了回报）

要组合警报，我会使用一个数组。例子：

```
function onFormSubmit(form_element)
{
    var checked = 0;
    var letters = /^[a-zA-Z]+$/;

    var alerts = new Array();

    if (!form_element.visitor_name.value.match(letters))
        alerts.push("Please enter a valid first name. For example; John.");

    if (!form_element.lan.checked)
        alerts.push("Please accept the terms and conditions");

    if (alerts.length == 0) {
        return true;
    }

    alert(alerts.join("\n"));

    return false;
} 
```

# ajax - Sencha Touch 2 Ajax 代理未在列表中显示数据

> ID：10268601
> 
> 赞同：0
> 
> 时间：2012-04-22T14:05:27.140
> 
> 标签：ajax, proxy, touch, extjs

希望有人可以提供帮助..我已经搜索了几个小时试图找到解决方案..

我正在尝试在商店中使用 ajax 代理填充列表。如果我将 json 数据内联，它可以完美运行，但我似乎无法从代理返回任何数据，即使 url 在浏览器中返回完全相同的 json 数据。我究竟做错了什么？？？

店铺：

```
Ext.define('m3.store.News', {  
extend: 'Ext.data.Store',  

requires: ['m3.model.News'],  

config: {  
    model: 'm3.model.News',  
    autoload: true,  
    proxy: {  
        type: 'ajax',  
        url: 'http://localhost/lib',  
        reader: {  
            type: 'json'  
        }  
    }  
}); 
```

如果我内联添加数据，它会完美运行：

```
Ext.define('m3.store.News', {  
extend: 'Ext.data.Store',  

requires: ['m3.model.News'],  

config: {  
    model: 'm3.model.News',  
    autoload: true,  
    proxy: {  
        type: 'ajax',  
        url: 'http://localhost/lib',  
        reader: {  
            type: 'json'  
        }  
    },  
data: [{"title":"Test Title 1","id":"1","text":"<div>Test Text 1<\/div>"},{"title":"Test Title 2","id":"2","text":"<div>Test Text 2<\/div>"}]  
}); 
```

其他一切正常，所以我不会发布其他文件，如果您可能需要它们，请告诉我。

我什至尝试过静态 json 文件，但似乎没有从代理返回。

有没有办法在控制台中测试代理的响应？我试过“Ext.getStore('News');” 但它返回一个空数组。

使用 Sencha Touch 2 MVC。

它看起来很简单，但我就是无法让它工作.. 非常感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T03:19:25.553

我认为您在这里缺少的是`rootProperty`加载`data`通过`Ajax`代理的同时。

您需要提及此属性以识别 json 的根。

```
reader : {
   type:'json',
   rootProperty:'data'
} 
```

并且您的 json 数据应采用如下格式（根应为“数据”）

```
{
    "data": [
        {
            "title": "Test Title 1",
            "id": "1",
            "text": "<div>Test Text 1</div>"
        },
        {
            "title": "Test Title 2",
            "id": "2",
            "text": "<div>Test Text 2</div>"
        }
    ]
} 
```

我认为，它现在应该适用于这些更改。

# python - Python类继承：AttributeError：'[SubClass]'对象没有属性'xxx'

> ID：10268603
> 
> 赞同：35
> 
> 时间：2012-04-22T14:05:36.420
> 
> 标签：python, inheritance, class-attributes

我有以下基类和子类：

```
class Event(object):
    def __init__(self, sr1=None, foobar=None):
        self.sr1 = sr1
        self.foobar = foobar
        self.state = STATE_NON_EVENT

# Event class wrappers to provide syntatic sugar
class TypeTwoEvent(Event):
    def __init__(self, level=None):
        self.sr1 = level
        self.state = STATE_EVENT_TWO 
```

在我的代码中，我正在检查一个`TypeTwoEvent`类的实例，检查我知道基类中存在的字段 - 我希望它默认为 value `None`。但是，我的代码引发了以下异常：

> AttributeError：“TypeTwoEvent”对象没有属性“foobar”

我的印象是基类字段将由子类继承，并且创建子类的实例将实例化基类（并因此调用其构造函数）......

我在这里想念什么？为什么没有`TypeTwoEvent`属性`foobar`- 当派生它的基类有`foobar`属性时？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-22T14:18:11.177

你的子类应该是：

```
class TypeTwoEvent(Event):

    def __init__(self, level=None, *args, **kwargs):
        super(TypeTwoEvent, self).__init__(*args, **kwargs)
        self.sr1 = level
        self.state = STATE_EVENT_TWO 
```

因为你重写了`__init__`方法，所以如果你想让父行为发生，你需要调用父方法。

请记住，`__init__`尽管它的名字很奇怪，但这并不是一种特殊的方法。它只是对象创建后自动调用的方法。否则它是一个普通的方法，并且应用普通的继承规则。

```
super(ClassName, self).__init__(arguments, that, goes, to, parents) 
```

是调用方法的父版本的语法。

对于`*args`and `**kwargs`，它只是确保我们捕获传递给的所有附加参数`__init__`并将其传递给父方法，因为您的子方法签名没有这样做，而父方法需要这些参数才能工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T14:11:05.450

您正在覆盖`__init__`父类的构造函数 ( )。要扩展它，您需要通过调用显式调用父级的构造函数[`super()`](http://docs.python.org/library/functions.html#super)。

```
class TypeTwoEvent(Event):
    def __init__(self, level=None, **kwargs):
        # the super call to set the attributes in the parent class
        super(TypeTwoEvent, self).__init__(**kwargs)
        # now, extend other attributes
        self.sr1 = level
        self.state = STATE_EVENT_TWO 
```

请注意，`super`调用*并不*`__init__`总是位于子类中方法的顶部。它的位置取决于你的情况和逻辑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T14:11:00.590

创建实例时，将`__init__`调用其方法。在这种情况下，即`TypeTwoEvent.__init__`。超类方法不会被自动调用，因为那会非常混乱。

您应该调用`Event.__init__(self, ...)`from `TypeTwoEvent.__init__`（或使用`super`，但如果您不熟悉它，请先阅读它，以便您知道自己在做什么）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T14:09:37.877

需要从继承类`__init__`的方法中调用基类的`__init__`方法。

请参阅[此处](https://stackoverflow.com/questions/5636419/python-init-method-in-inherited-class)了解如何执行此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-23T16:30:33.493

我也有这个问题，但我已经把`super().__init__()`我的派生类放在了底部，这就是它不起作用的原因。因为我尝试使用未初始化的属性。

# iphone - 如何链接异步 NSURLConnections？

> ID：10268608
> 
> 赞同：0
> 
> 时间：2012-04-22T14:06:29.093
> 
> 标签：iphone, nsurlconnection

链接异步 NSURLConnections 最合适的方法是什么？例如，我需要使用 Web 服务注册用户。工作流程如下：获取注册令牌 => 使用令牌注册 => 获取登录令牌 => 使用令牌登录。

我知道如何创建一个异步 NSURLConnection，但我不确定如何在继续之前确保之前的连接已经完成。我知道我可以使用它来实现这一点，`NSURLConnection sendSynchronousRequest`但我不喜欢在这些链接请求发生时我的主线程被阻塞。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:26:44.107

当我们为 iPhone 构建第一个版本的 SignMeOut 时，我们确实做到了这一点。我们创建了 NSUrlconnection 的一个子类，并在 connectionDidFinish 中给它一个标识标签，您将能够使用带有枚举的简单开关/案例。效果很好 - 您可以在我们的博客中看到整个流程以及示例和代码

[http://www.isignmeout.com/multiple-nsurlconnections-viewcontroller/](http://www.isignmeout.com/multiple-nsurlconnections-viewcontroller/)

**更新**

我已将 NSURLConnection 子类修改为更简单的类别。大多数用法是相同的，但使用相同的类更清洁

[https://github.com/Shein/Categories](https://github.com/Shein/Categories)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T14:14:44.637

你可以看看`connectionDidFinishLoading`启动另一个异步连接。对于连接结束的条件，您可以保留对连接的引用，以防其他连接也有望完成（在您的情况下可能不需要）。让您的班级遵循并在委托方法`NSURLConnectionDelegate`中触发适当的连接。`connectionDidFinishLoading`您还可以使用该`connectionDidReceiveData:`方法检查从服务接收到的凭据等。也通过[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T14:24:57.880

你有不同的选择：

*   使用可变数组或字典创建队列
*   如果您将它与用于 NSUrlConnection 的新的唯一 ios5 API 结合使用，则创建一个 NSOperationQueue 会很容易
*   第三方库，例如 AFNetworking
*   阻止 GCD 对它们进行分组（由于 NSRunLoop 原因很难，请注意连接在哪个线程中运行）

# iphone - 无法加载特定国家/地区的资源

> ID：10268609
> 
> 赞同：0
> 
> 时间：2012-04-22T14:06:50.727
> 
> 标签：iphone, ios5, localization

我正在使用以下方法从文本文件中加载不同语言的文本资源：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"myfile" ofType:@"txt"];

if(filePath) {

    NSString *myText = [[NSString alloc] initWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil];

} 
```

非常适合我的英语、德语等语言特定资源。

但我也有一些特定国家/地区的资源，例如英国的英文文本、美国的英文文本、奥地利的德文等。

如果手机设置为特定国家（地区格式），我希望这些资源会被加载，但事实并非如此。文件路径将始终设置为“纯”语言文件夹中的文件。

例如，我在文件夹中有 myfile.txt：

```
en.lproj
en-GB.lproj
en-US.lproj 
```

但它总是加载 en.lproj 中的那个

文件夹是使用 Xcode 中的本地化功能创建的，并且都位于同一个文件夹中。

有点奇怪的是，这些由 Xcode 创建的文件夹确实用连字符分隔语言和国家，但根据文档，它应该是一个下划线。我试图手动将文件夹（带下划线）复制到项目中，但它仍然不起作用。

我如何设法加载特定国家/地区的文件？

谢谢.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T22:04:57.310

我创建了 Localisations.string 的“荷兰-荷兰”翻译，并将 iPhone 语言设置为荷兰语，但 NSLocalizedString 总是返回英文翻译。解决方案是创建一个“荷兰语”翻译（nl.lproj）而不是“dutch-netherlands”（nl-NL.lproj）。

在 iOS4 或 iOS5 的设置屏幕中，您可以选择荷兰语，但没有针对 Dutch-Netherlands 或 Dutch-Belgium 的子选择，即使这些在 XCode 中可用。在我看来，XCode 提供的翻译选项比 iOS 实际支持的要多。

我的意思是没有办法让你的应用程序使用“nl-NL”资源。我猜德国和奥地利也有同样的问题（“de-DE”和“de-AT”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:56:48.133

**注意：**您的代码示例是一种加载文本资源的复杂方式。如果您正在加载非字符串资源，例如图像或媒体文件，这很好，但对于简单的字符串，只使用`.strings`每种语言的一个文件（包含多个本地化字符串）并调用`NSLocalizedString`以获取给定字符串的相关语言版本要容易得多。

**答：** “区域格式”下的iOS设置不影响资源加载。相反，它控制系统如何执行依赖于区域设置的功能（例如日期/数字格式和解析）。控制加载本地化资源的哪个语言版本的 iOS 设置是语言设置（常规 > 国际 > 语言）。目前，它只包括两个英文变体：“English”和“British English”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T17:45:08.527

我对 nl-NL.lproj（荷兰）和 ca-ES.lproj（加泰罗尼亚语）有同样的问题。我的解决方案是使用 Xcode 添加语言。转到 Xcode 项目，然后在 Info 选项卡中添加语言。将自动创建文件夹 nl-NL.lproj 和 ca-ES.lproj。

然后您可以在模拟器（Xcode 版本 4.6）上尝试此操作，这些语言不会使用单词，而是会加载英语。

首先手动将文件夹 nl-NL.lproj 重命名为 nl.lproj。最后转到文件 {MY_PROJECT}.xcodeproj/project.pbxproj 并替换以下行的 PATH：

```
 C3D2888817108DDA00CE8AC2 /* nl-NL */ = {isa = PBXFileReference; lastKnownFileType = text.plist.strings; name = "nl-NL"; path = "nl.lproj/Localizable.strings"; sourceTree = "<group>"; };
    C3D2888917108DE500CE8AC2 /* nl-NL */ = {isa = PBXFileReference; lastKnownFileType = text.plist.strings; name = "nl-NL"; path = "nl.lproj/InfoPlist.strings"; sourceTree = "<group>"; }; 
```

就是这样，现在我可以正确设置这些语言了。

# objective-c - 如何从我的 ViewController 的 TableView 中删除自定义表格视图单元格？

> ID：10268610
> 
> 赞同：0
> 
> 时间：2012-04-22T14:06:57.093
> 
> 标签：objective-c, uitableview

在我的一个 ViewControllers 中，我添加了一个 tableview 作为子视图。

在这个 tableView 中，我实现了自定义表格视图单元格，其中包含一个删除按钮初始化。

所以，当我点击删除时，相关数据被删除，但tableview中的行仍然存在，当我重新加载我的APP时它会消失。

谁能帮我吗..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T14:14:25.470

您必须从[UITableView](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/deleteRowsAtIndexPaths%3awithRowAnimation%3a)使用此方法：

```
- (void)deleteRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation 
```

索引路径是要删除的行的索引。

# playframework - Akka 的语言和产品替代品是什么？

> ID：10268613
> 
> 赞同：25
> 
> 时间：2012-04-22T14:07:18.073
> 
> 标签：playframework, rabbitmq, akka, actor

现在我正在看[Play Framework](https://www.playframework.com/)并且非常喜欢它。在 Play 中提供的功能中，大量宣传的部分之一是[Akka](http://akka.io/)。

为了更好地理解 Akka 以及如何正确使用它，您能告诉我在其他语言或产品中有哪些替代方案吗？

[RabbitMQ](http://www.rabbitmq.com/)与它相比如何？有很多重叠吗？一起使用它们实用吗？在哪些用例中？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-03T01:08:14.447

我使用[RabbitMQ](http://www.rabbitmq.com/) + Spring AMQP + Guava 的 EventBus 使用 Guava 的 EventBus 自动注册 Actor-like messengers 以[匹配](http://code.google.com/p/guava-libraries/wiki/EventBusExplained)接收到的消息。

与 Spring AMQP 和 Akka 的相似性是不可思议的。Spring AMQP 的[SimpleMessageListenerContainer + MessageListener](http://static.springsource.org/spring-amqp/reference/html/#d0e402)几乎等同于一个 Actor。

然而，就所有意图和目的而言，RabbitMQ 比 Akka 更*强大*，因为它有许多不同语言的客户端**实现**，**提供持久性**（持久队列）、**拓扑路由**和**可插入的 QoS 算法**。

话虽如此，Akka 更方便，理论上 Akka 可以完成上述所有工作，有些人已经编写了扩展，但大多数人只是使用 Akka，然后让 Akka 通过 RabbitMQ 传递消息。此外，Spring AMQP SimpleMessageListener 容器有点重，如果你创建了几百万个容器会发生什么，还不清楚。

**事后看来，我会考虑在未来的项目中使用 Akka 到 RabbbitMQ 而不是 Spring AMQP。**

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-22T14:22:51.390

最好的起点是[很棒的 Akka 官方文档](http://doc.akka.io/docs/akka/2.0.1/)。我认为最接近 Akka 的产品/框架是[erlang](/questions/tagged/erlang "显示标记为“erlang”的问题")语言。我*猜*（我没有使用 Play 框架）Akka 是用来实现 Comet 和其他异步处理的。

[rabbitmq](/questions/tagged/rabbitmq "显示标记为“rabbitmq”的问题")在思想上有些相似（用于发送消息的基础设施），请注意 RabbitMQ 甚至是用[erlang](/questions/tagged/erlang "显示标记为“erlang”的问题")编写的，但它们的用例略有不同。我想说的是，虽然 RabbitMQ 专注于消息传递，但 Akka 更多的是关于参与者（消息接收者和发送者）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-22T15:58:41.343

当 Play 2.0 加入 Typesafe 并开始更多地使用 Akka 时，我也经历了同样的思考过程，我能提供的最佳建议是搜索“Actor 模型”。

维基百科是一个很好的资源 - [http://en.wikipedia.org/wiki/Actor_model](http://en.wikipedia.org/wiki/Actor_model)。它有一个可以支持 Actor 模型的编程语言列表，也有一个基于 Actor 模型的框架列表（包括 Akka）。

简而言之，Actor 模型基于并发计算模型中的 Actor 概念。Actors 并不一定意味着传递消息，但最常见的用例将让 Actors 传递消息（这就是与 rabbitMQ 的相似之处所在）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-12T06:59:26.157

你也可以考虑使用 Vertx，它也是一个 Reactive 平台[http://vertx.io/](http://vertx.io/)

在那里您可以考虑类似于 Actor 范例的 Verticle（ [http://vertx.io/docs/vertx-core/java/#_verticles ）。](http://vertx.io/docs/vertx-core/java/#_verticles)和Akka的Databus类似的EventBus( [http://vertx.io/docs/vertx-core/java/#event_bus](http://vertx.io/docs/vertx-core/java/#event_bus) )

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-12T04:49:35.983

Akka 是一个用于构建**并发**和**分布式**系统的工具包和运行时。为了实现这一点，Akka 使用了 Actor 模型。如果您正在寻找 Akka 的替代方案，我认为您找不到像 Akka 这样的完整解决方案，因为 Akka 有几个功能可以让您开发强大的**并发**和**分布式**系统：

*   阿卡演员
*   演员路由、监督和监控
*   异步和非阻塞消息传递
*   Akka Cluster（用于集群管理）
*   Akka 持久性（用于实现事件溯源、持久性参与者和至少一次传递消息传递）
*   Akka I/O（用于 TCP 和 UDP 通信）
*   Akka HTTP（用于作为客户端或服务器的 HTTP 通信）
*   Akka Stream（用于流处理）
*   ...

但我建议看看[Erlang/OTP](https://www.erlang.org/)和[Quasar](http://docs.paralleluniverse.co/quasar/)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-11T21:12:53.203

[http://scalecube.io](http://scalecube.io)是一个低延迟的微服务库。一个完整的解决方案，使您能够开发强大的并发和分布式系统。

像 Akka： - 它基于八卦和游泳协议。- 它的消息基于 protobuf（全双工）驱动。- 它用于JVM。- 低延迟，大约快 6 倍。- 使用被证明比 akka 流更快的 RxJava。

与 Akka 不同： - 它不那么自以为是 - 不是一个框架。- 不强制将 Actor 模式作为整体模式。

# import - 如何从父包和兄弟包中导入 python 模块

> ID：10268629
> 
> 赞同：2
> 
> 时间：2012-04-22T14:09:51.180
> 
> 标签：import, python-2.7

这个（或类似的）问题之前已经被问过很多次了，但在我的情况下，没有一个解决方案可以工作。我的项目结构是这样的：

```
| project_2
      main.py
      __init__.py
      systems.py
      | config
            __init__.py
            options.py
      | database
            __init__.py
            database.py
            entity.py
      | tests
            __init__.py
            test_systems.py
            test_options.py
            test_database.py
            test_entity.py 
```

显然我需要在tests包下导入test modules中的所有模块。我尝试了使用点语法的相对导入：

```
from ..systems import System
from ..config import options
from ..database.entity import Entity 
```

返回 ValueError：尝试在非包中进行相对导入。我已经尝试过一个包结构，其中所有东西（包括系统）都在它自己的包中。它失败并显示相同的消息。

真正困扰我的是这应该有效：[PEP 328](http://www.python.org/dev/peps/pep-0328/)，但它没有。我真的想避免必须将包附加到 $PYTHONPATH 或使用一些疯狂的方法，例如从文件路径加载带有 imp 的模块。

我读到问题的一部分可能是 systems.py 在主包中，但这并不能解释为什么其余的相对导入也不起作用。

PS 实际上，我从 PEP 328 重新创建了示例只是为了对其进行测试，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:21:26.127

当python文件进行相对导入时，您会得到它，但该文件没有通过导入另一个模块（但例如从命令行）作为模块加载。鉴于这种结构：

```
.
├── main.py
└── test
    ├── __init__.py
    ├── a.py
    └── b.py 
```

主要.py：

```
from test.a import A
print A 
```

一个.py：

```
from .b import B
A = B

if __name__ == '__main__':
    print A 
```

b.py：

```
B = 'b' 
```

现在尝试：

```
python main.py 
```

结果是

```
b 
```

与

```
python test/a.py 
```

你得到：

```
Traceback (most recent call last):
  File "test/a.py", line 1, in <module>
    from .b import B
ValueError: Attempted relative import in non-package 
```

起作用的是：

```
python -m test.a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-28T20:48:37.640

如果您只是添加`.`到您的 python 路径，如果您从`project_2`文件夹相对路径运行脚本，例如`config.options`将起作用。不幸的是，这需要在每台机器上更新 PYTHONPATH。

在 Python 2.7.14 上测试

# janrain - 使用 Janrain Capture RESTful API 创建用户/实体

> ID：10268638
> 
> 赞同：0
> 
> 时间：2012-04-22T14:11:05.170
> 
> 标签：janrain

是否可以在不使用内置注册小部件但使用 RESTful API 的情况下使用 Janrain Capture 创建用户/实体？

[http://developers.janrain.com/documentation/capture/api-use-and-error-codes/](http://developers.janrain.com/documentation/capture/api-use-and-error-codes/)

我希望通过一些步骤向用户提出一些问题，然后最后用这些数据注册他们，而不是使用内置的小部件。

此外，我希望在不同的设备（例如电视）上编写应用程序，这些设备也可以注册用户但可能无法运行 javascript，并希望后端可以使用 REST 来创建用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T06:57:24.387

这是检查用户登录名/密码是否正确的方法。您可以将用户名和密码作为属性传递，而不是使用 id。

[http://developers.janrain.com/documentation/api/entity/](http://developers.janrain.com/documentation/api/entity/)

然后，您必须维护自己的 cookie 状态才能登录（将令牌存储在安全 cookie 中是一种选择）

这是注册方法

[http://developers.janrain.com/documentation/api/entity-create/](http://developers.janrain.com/documentation/api/entity-create/)

# sql-server - SQL Server 2008 集成安全性

> ID：10268640
> 
> 赞同：0
> 
> 时间：2012-04-22T14:11:06.590
> 
> 标签：sql-server, sql-server-2008, jdbc

有人请告诉我，我可以从哪里下载 sqljdbc_auth.dll 用于 32 位操作系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:20:42.543

您是否尝试过检查`installation directory\sqljdbc_version\language\auth\`机器目录中的文件？按照[这里](http://msdn.microsoft.com/en-us/library/ms378428%28v=sql.105%29.aspx)的指示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:07:39.190

dll是“sqljdbc_auth.dll”，它包含在MS SQL JDBC驱动程序存档中[链接](http://www.microsoft.com/en-us/download/details.aspx?id=2505)按下载，下载Eula，然后最后下载jdbc驱动程序存档并在其中查找dll

# python - Jenkins Git 插件：git describe 不能描述任何东西

> ID：10268641
> 
> 赞同：3
> 
> 时间：2012-04-22T14:11:09.680
> 
> 标签：python, git, jenkins, jenkins-plugins

我正在使用 Jenkins 的[Git 插件](http://wiki.hudson-ci.org/display/HUDSON/Git+Plugin)并使用[Douglas Creager 的 get_git_version](https://gist.github.com/300803)脚本。这使用 git describe 为 python 模块获取一些合理的版本。通常这会产生类似的东西`0.1-11-g80fe130`，但在詹金斯我得到：

```
+ git describe
fatal: No names found, cannot describe anything. 
```

我已将插件配置为不通过“跳过内部标签”提供自己的标签。

[像这个关于从詹金斯推送的问题](https://stackoverflow.com/questions/10172454/pushing-committing-with-the-jenkins-git-plugin-not-on-any-branch-github-repo)中那样对主分支进行额外的检查并没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T14:21:45.197

关于标签（如“[本周 Git 提示：标签](http://alblue.bandlem.com/2011/04/git-tip-of-week-tags.html)”中所述）

> 如果没有找到带注释的标签，那么它将打印`fatal: No names found, cannot describe anything`.
> **要允许 describe 使用非注释标签，请使用`git describe --tags`**.
> 也可以使用 来针对分支进行描述`git describe --all`，尽管这仅在分支是远程已知的情况下才有意义。

因此，Git 插件正在针对其执行简单 git describe 的当前存储库可能不包含任何带注释的标记（这解释了为什么签出分支的提示并不能解决问题：这不是关于一个分离的头部情况）

您需要克隆存储库，包括标签。

* * *

实际上，[OP Jasper Van Den Bosch](https://stackoverflow.com/users/708221/jasper-van-den-bosch)报告：

> 我没有正确推送标签

没有推送标签，意味着 Jenkins 在更新自己的克隆时没有得到这些标签，意味着`git describe`无法正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T14:19:23.823

`git describe`在当前签出之前的历史记录中有标签（最好是带注释的标签）之前，它不起作用。

```
/tmp/repo$ git describe
fatal: No names found, cannot describe anything.
/tmp/repo$ git tag foo
/tmp/repo$ git describe
fatal: No annotated tags can describe '14d827c72b2f277a5cd3e65e7b0e0502edc58fa3'.
However, there were unannotated tags: try --tags.
/tmp/repo$ git tag -a 'annotated-tag' -m 'whatever'
/tmp/repo$ git describe
annotated-tag 
```

# wicket - 如何显示具有对象列表作为字段的对象的检票数据表或列表视图行项目

> ID：10268651
> 
> 赞同：0
> 
> 时间：2012-04-22T14:12:35.950
> 
> 标签：wicket

```
AID      BID    count1  count2
AID1    1   3   4
            2   4   5
            3       4   2
AID2    4   6   10   
            5   2   4
            6   4   6
AID3    7   4   5
            8        9  4 
```

这是我试图显示的表格，它为 ObjA 中的每个 AID 显示 ObjB 的列表。

我想使用 Wicket DataTable 或 Listview 显示可排序数据。我使用了 SortableData 提供程序，它适用于简单的对象，例如

```
ObjA{
int a;
String b;
} 
```

但是我有一个对象，其中包含对象列表作为字段，如下所示。

```
ObjA{
Long aId;
List<ObjB> listObjB;
} 
```

@magomi 感谢您的回复。这是代码和相应的 Html 文件。我正在使用数据表。我不确定如何为每个 aID 呈现表中 listObjBs (bID,count,count2) 中的项目。在 ObjA 中为 listObjBs 添加列的正确方法是什么

```
***columns.add(new PropertyColumn<ObjA>(Model.of("B ID"), "ObjBCounts.bID",
                "ObjBCounts.BID"));
        columns.add(new PropertyColumn<ObjA>(Model.of(" Count"), "objBCounts.count"));
        columns.add(new PropertyColumn<ObjA>(Model.of("Count2”),"objBCounts.count2"));*** 
```

如何在迭代器方法中对列 bID 进行排序？

```
Public class HomePage extends Webpage
private static List<ObjB> listObjBs = Arrays.asList(
            new ObjB(15L,2,5),
            new ObjB(12L,7,10),
            new ObjB(13L,3,5),
            new ObjB(10L,6,5));

    private static List<ObjA> contacts = Arrays.asList( 
            new ObjA(1L,listObjBs),
            new ObjA(2L,listObjBs),
            new ObjA(3L,listObjBs),
            new ObjA(4L,listObjBs));

    public HomePage(final PageParameters parameters) {
        List<IColumn<ObjA>> columns = new ArrayList<IColumn<ObjA>>();
        columns.add(new PropertyColumn<ObjA>(Model.of("A ID"), "aID",
                "aID"));

        Public class HomePage extends Webpage
private static List<ObjB> listObjBs = Arrays.asList(
            new ObjB(15L,2,5),
            new ObjB(12L,7,10),
            new ObjB(13L,3,5),
            new ObjB(10L,6,5));

    private static List<ObjA> contacts = Arrays.asList( 
            new ObjA(1L,listObjBs),
            new ObjA(2L,listObjBs),
            new ObjA(3L,listObjBs),
            new ObjA(4L,listObjBs));

    public HomePage(final PageParameters parameters) {
        List<IColumn<ObjA>> columns = new ArrayList<IColumn<ObjA>>();
        columns.add(new PropertyColumn<ObjA>(Model.of("A ID"), "aID",
                "aID"));

        columns.add(new PropertyColumn<ObjA>(Model.of("B ID"), "ObjBCounts.bID",
                "ObjBCounts.BID"));
        columns.add(new PropertyColumn<ObjA>(Model.of(" Count"), "objBCounts.count"));
        columns.add(new PropertyColumn<ObjA>(Model.of("Count2”),"objBCounts.count2"));

        add(new DefaultDataTable<ObjA>("contacts", columns,
                new ContactsProvider(), 10));
    }
rivate static class ContactsProvider extends SortableDataProvider<ObjA> {
    public ContactsProvider() {
        setSort("aID", SortOrder.ASCENDING);
    }

    public Iterator<? extends ObjA> iterator(int first, int count) {
        List<ObjA> data = new ArrayList<ObjA>(contacts);
        Collections.sort(data, new Comparator<ObjA>() {

            public int compare(ObjA o1, ObjA o2) {
                int dir = getSort().isAscending() ? 1 : -1;

                if ("bID".equals(getSort().getProperty())) {
                    return dir * (o1.listObjB.get(0).getBID().compareTo(o2.listObjB.get(0).getBID()));
                } else {

                    return dir * (o1.getAID().compareTo(o2.getAID()));
                }
            }
        });
        return data.subList(first, Math.min(first + count, data.size()))
                .iterator();
    }

    public int size() {
        return contacts.size();
    }

    public IModel<ObjA> model(ObjA object) {
        return Model.of(object);
    }

}

<html>
<body>
<table border ="1" cellspacing = "1" wicket:id="contacts" class="contacts"></table>
</body>
</html>

        add(new DefaultDataTable<ObjA>("contacts", columns,
                new ContactsProvider(), 10));
    }
rivate static class ContactsProvider extends SortableDataProvider<ObjA> {
    public ContactsProvider() {
        setSort("aID", SortOrder.ASCENDING);
    }

    public Iterator<? extends ObjA> iterator(int first, int count) {
        List<ObjA> data = new ArrayList<ObjA>(contacts);
        Collections.sort(data, new Comparator<ObjA>() {

            public int compare(ObjA o1, ObjA o2) {
                int dir = getSort().isAscending() ? 1 : -1;

                if ("bID".equals(getSort().getProperty())) {
                    return dir * (o1.listObjB.get(0).getBID().compareTo(o2.listObjB.get(0).getBID()));
                } else {

                    return dir * (o1.getAID().compareTo(o2.getAID()));
                }
            }
        });
        return data.subList(first, Math.min(first + count, data.size()))
                .iterator();
    }

    public int size() {
        return contacts.size();
    }

    public IModel<ObjA> model(ObjA object) {
        return Model.of(object);
    }

}

<html>
<body>
<table border ="1" cellspacing = "1" wicket:id="contacts" class="contacts"></table>
</body>
</html>

ObjB{
Long bId;
int  count;
int count2;
} 
```

它想显示来自 ObjA 的数据，其中包含可排序表中的 objB 列表 有人可以帮助我处理检票口标记以及如何填充列。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T14:44:36.700

我不太确定，但看起来你正在以一种不可能的方式将 ObjA 和 ObjB 混合到一个表中。对不对，你想显示一个 ObjA 表（至少这是你的第一列）？还是要显示一个 ObjB 表（如第二列和第三列所示）？

只要一个表由**一个**列表支持，您就不能将另一个列表混合到该表中。

在我看来，您有以下选择：

1.  您可以拥有一个 ObjA 表格，并且在表格单元格内您可以拥有一个带有 ObjB 表格的面板。但是没有对所有 ObjA 的所有 ObjB 行进行排序。
2.  您可以定义某种类型的 DTO，该 DTO 具有混合了 ObjA 和 ObjB 的对象。像这样的东西：

    类数据（） { int objAId; 整数 objBId；整数计数1；整数计数2；... }

3.  您可以使用标准重复视图并将排序实现到您自己的数据提供程序中。

# java - 将字符附加到加载到内存中的文件的最快/最有效的方法是什么？

> ID：10268654
> 
> 赞同：0
> 
> 时间：2012-04-22T14:12:48.997
> 
> 标签：java, file-io, java.util.scanner

```
 read_data = new BufferedReader( new FileReader(args[0]) );
    data_buffer = new StringBuffer();

    int i;

    while(read_data.ready())
    {           
        while((i = read_data.read()) != -1)
        {
            data_buffer.append((char)i);
        }           
    }

    data_buffer.append(System.getProperty("line.separator")); 
```

我想要做的是，将整个 .txt 文件读入字符串并在字符串中附加一个换行符。然后可以通过传递 data_buffer.toString() 创建一个新的 Scanner 来处理这个字符串。显然，对于非常大的文件，此过程会占用大量时间，而我要做的只是将换行符附加到已读入内存的 .txt 文件中。

我知道整个想法似乎有点古怪或奇怪，但有没有更快的方法？

干杯:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T14:41:14.267

做某事的最快方法往往是根本不做。

为什么不以不需要末尾换行符的方式修改解析代码？如果您每次都附加它，您也可以更改代码以使其表现得好像它在那里，而实际上它并不存在。

接下来我要尝试的是避免逐个字符地创建一个巨大的字符串，因为这确实相当昂贵。您可以`Scanner`基于 an创建一个，它可能比将数据读入并解析它`InputStream`要快得多。`String`您可以覆盖您`FileInputStream`以在文件末尾返回一个虚拟换行符，从而避免粘贴字符串的实例化。

如果您确实必须将数据读入缓冲区，那么使用基于数组`read()`的流方法读取字节数组可能会更好 - 比逐字节快得多。由于您可以提前知道文件的大小，因此您可以为缓冲区分配空间以放置额外的行尾标记并将其插入数组中。与创建 a`StringBuffer`并从中制作 a 相比`String`，这不需要缓冲区的完整副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T14:54:27.697

据我所知，您*实际上*要做的是以这样一种方式读取文件，即在最后一行的末尾似乎总是有一个行分隔符。

如果是这种情况，那么您可以通过实现 的子类型来做到这一点`FilterReader`，并在到达字符流末尾时让它“插入”一个或两个额外的字符。

执行此操作的代码不会是微不足道的，但它会避免在内存中缓冲整个文件的时间和空间开销。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T14:51:02.987

如果您所做的只是将生成的文件传递给 Scanner，您应该为该文件创建一个 Readable 并将其发送给 Scanner。

这是一个示例（未经测试）：

```
public class NLReader implements Readable {

    Reader r;
    boolean atEndOfReader = false;
    boolean atEnd = false;

    public NLReader(Reader r) {
        this.r = r;
    }

    public int read(CharBuffer cb) throws IOException {
        if (!atEndOfReader) {
            int result = r.read(cb);
            if (result == -1) {
                atEndOfReader = true;
            } else {
                return result;
            }
        }
        if (!atEnd) {
            String nl = System.getProperty("line.separator");
            cb.append(nl);
            atEnd = true;
            return nl.length();
        }

        return -1;
    }
} 
```

这只会读取文件一次，从不复制它（与您的 StringBuffer 不同——除非您真的需要 StringBuffer 的同步，否则您应该使用 StringBuilder）。

这也不会将实际文件加载到内存中，因此也可以节省内存压力。

# java - 在 Web 应用程序中构建 JSF 文件

> ID：10268657
> 
> 赞同：-1
> 
> 时间：2012-04-22T14:12:54.653
> 
> 标签：java, jsf, jakarta-ee

我正在制作一个 Web 应用程序 (JSF)，我想知道如何构造文件。我有不同的资源可供用户交互，例如“问题”。

我会创建一个名为“问题”的文件夹并执行以下操作：

*   index.xhtml --> 列出问题
*   add.xhtml --> 添加新问题
*   edit.xhtml --> 编辑问题
*   show.xhtml --> 显示问题

或者您会将文件称为 questions.xhtml、question-add.xhtml 等？

**还是**两种选择都错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:16:51.740

两者都是可能的，对于小型项目，您可能希望将其保存在单个文件夹中。对于较大的项目，子文件夹将帮助您保持更好的概览。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T14:24:02.357

在我看来，添加有意义的前缀或后缀是更好的方法，或者至少放在有意义的文件夹中也可以。

添加前缀/后缀将加速您的编码（通过更容易在项目中查找/修改文件）并使您的合作伙伴生活更轻松......（同时尝试理解已经制作的代码）

# iphone - iOS iPhone如何按使用频率列出UTextView中的所有关键字？

> ID：10268658
> 
> 赞同：1
> 
> 时间：2012-04-22T14:12:55.897
> 
> 标签：iphone, objective-c, ios, uitextview, keyword

我得到了`UITextView`一个任意长度的文本（最多 10000 个字符）。我需要解析此文本，提取所有关键字并按使用频率列出它们，最常用的单词在最上面，下一个，等等。我很可能会在操作完成后呈现一个模态 UITableView。

我正在考虑一种**有效且有用**的方法来做到这一点。我可以尝试使用 [空格、标点符号等] 形式的分隔符来分隔字符串。这给了我一个字符序列数组。我可以将每个添加序列添加为一个`NSMutableDictionary`键，并在我看到该单词的另一个实例时增加它的计数。但是，这可能会导致 300-400 个单词的列表，其中大多数的频率为 1。

有没有一种好方法来实现我所描述的逻辑？我应该尝试按字母顺序对数组进行排序并尝试某种“模糊”逻辑匹配吗？**是否有任何 NSDataDetector 或 NSString 方法可以为我做这种工作？**

另一个问题是：我如何提取诸如 a、at、to、for 等内容，并且不将它们列在我的关键字列表中？

如果我可以看一下已经完成此任务的示例项目，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:54:24.167

您可以使用[`CFStringTokenizer`](http://developer.apple.com/library/ios/#documentation/CoreFoundation/Reference/CFStringTokenizerRef/Reference/reference.html)来获取单词边界。对于计数，您可以`NSMutableDictionary`按照您的建议使用 或`NSCountedSet`，这可能会更有效。

如果您对频率为 1（或其他阈值）的单词不感兴趣，则必须在计算完所有单词*后将它们过滤掉。*

要忽略某些单词（a、the、for...），您需要一个特定于文本语言的单词列表。维基[百科关于停用词](http://en.wikipedia.org/wiki/Stop_words)的文章包含几个链接，例如[这个 CSV 文件](http://www.textfixer.com/resources/common-english-words.txt)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T15:11:42.743

有很多方法可以做到这一点。

您绝对应该将所有关键字添加到数组（或其他集合对象）并引用它/遍历它，以便您搜索这些关键字并且仅搜索这些关键字（并且避免检查 a、at、to、for、 ETC。）

```
NSArray *keywords = [ add your keywords ];

NSString *textToSearchThrough = @" your text ";  // or load your text File here

- loop control statement here (like maybe fast enumerate), and inside this loop:
NSRange range = [textToCheckThrough rangeOfString:keywords[currentKeyword] 
                              options:NSCaseInsensitiveSearch];
if(range.location != NSNotFound) {
   // meaning, you did find it 
   // add it to a resultsArray, add 1 to this keyword's occurrenceCounter (which you must also declare and keep track of)
   // etc.
} 
```

然后你遍历你的结果数组，检查每个关键字的出现次数，清除那些出现次数小于 minOccurrenceCount 的人，然后从最高到最低排序剩余的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:41:05.850

我最终选择了`CFStringTokenizer`. 我不确定下面的桥接演员表是否正确，但它似乎有效

```
-(void)listAllKeywordsInString:(NSString*)text
    {
        if(text!=nil)
        {
            NSMutableDictionary* keywordsDictionary = [[NSMutableDictionary alloc] initWithCapacity:1024];
            NSString* key = nil;
            NSLog(@"%@",text);

             NSLog(@"Started parsing: %@",[[NSDate date] description]);

            CFStringRef string =(__bridge CFStringRef)text; // Get string from somewhere

        CFStringTokenizerRef tokenizer = CFStringTokenizerCreate(kCFAllocatorDefault,  (__bridge_retained CFStringRef) text, CFRangeMake (0,CFStringGetLength((__bridge_retained CFStringRef)text)), kCFStringTokenizerUnitWord, CFLocaleCopyCurrent());

            unsigned tokensFound = 0; // or the desired number of tokens

            CFStringTokenizerTokenType tokenType = kCFStringTokenizerTokenNone;

            while(kCFStringTokenizerTokenNone != (tokenType = CFStringTokenizerAdvanceToNextToken(tokenizer)) ) {
                CFRange tokenRange = CFStringTokenizerGetCurrentTokenRange(tokenizer);
                CFStringRef tokenValue = CFStringCreateWithSubstring(kCFAllocatorDefault, string, tokenRange);

                // This is the found word
                key =(__bridge NSString*)tokenValue;

                //increment its count
                NSNumber* count = [keywordsDictionary objectForKey:key];
                if(count!=nil)
                {
                     [keywordsDictionary setValue:[NSNumber numberWithInt:1] forKey:key];
                }else {
                    [keywordsDictionary setValue:[NSNumber numberWithInt:count.intValue+1] forKey:key];
                }

                CFRelease(tokenValue);

                ++tokensFound;
            }
            NSLog(@"Ended parsing. tokens Found: %d, %@",tokensFound,[[NSDate date] description]);
            NSLog(@"%@",[keywordsDictionary description]);
            // Clean up
            CFRelease(tokenizer);

        }

    } 
```

# c++ - 类方法的多重定义

> ID：10268660
> 
> 赞同：1
> 
> 时间：2012-04-22T14:12:58.870
> 
> 标签：c++, build, compilation, compiler-errors, multiple-definition-error

我有文件 long_arithm.cpp：

```
#ifndef LONG_ARITHM.CPP
#define LONG_ARITHM.CPP

#include <iostream>
#include <list>

namespace long_arithm {

    typedef signed char schar;
    enum { error_char = 127 };

    class longint {
    public:
        longint() : minusSign(0), array() { }
        longint(int num) { fromInt(num); }
        longint(std::string str) { fromString(str); }
        longint(const longint& other) : minusSign(other.minusSign), array(other.array) { }

        void fromInt(int num);
        void fromString(std::string str);

    protected:
        schar digtochar(schar num);
        schar chartodig(schar ch);

        inline bool isDigit(schar ch) { /* code */ }
        inline bool isSpaceChar(schar ch) { /* code */ }

    private:
        bool minusSign;
        std::list<schar> array;
    };
};

void long_arithm::longint::fromInt(int num) {
    /* code */
}

void long_arithm::longint::fromString(std::string str) {
    /* code */

long_arithm::schar long_arithm::longint::digtochar(schar num) {
    /* code */
}

long_arithm::schar long_arithm::longint::chartodig(schar ch) {
    /* code */
}

#endif 
```

现在我正在尝试构建它，但我有错误（第 1 行和第 2 行 - Eclipce 标题）：

```
Building target: long_arithmetics
Invoking: Cross G++ Linker
g++  -o "long_arithmetics"  ./long_arithm.o ./main.o   
./main.o: In function `long_arithm::longint::fromInt(int)':
/home/gxoptg/Документы/My works/Developing/C++/long_arithmetics/Debug/../long_arithm.cpp:153: multiple definition of `long_arithm::longint::fromInt(int)'
./long_arithm.o:/home/gxoptg/Документы/My works/Developing/C++/long_arithmetics/Debug/../long_arithm.cpp:153: first defined here
./main.o: In function `long_arithm::longint::fromString(std::basic_string<char, std::char_traits<char>, std::allocator<char> >)':
/home/gxoptg/Документы/My works/Developing/C++/long_arithmetics/Debug/../long_arithm.cpp:168: multiple definition of `long_arithm::longint::fromString(std::basic_string<char, std::char_traits<char>, std::allocator<char> >)'
./long_arithm.o:/home/gxoptg/Документы/My works/Developing/C++/long_arithmetics/Debug/../long_arithm.cpp:168: first defined here
./main.o: In function `long_arithm::longint::chartodig(signed char)':
/home/gxoptg/Документы/My works/Developing/C++/long_arithmetics/Debug/../long_arithm.cpp:204: multiple definition of `long_arithm::longint::chartodig(signed char)'
./long_arithm.o:/home/gxoptg/Документы/My works/Developing/C++/long_arithmetics/Debug/../long_arithm.cpp:204: first defined here
./main.o: In function `long_arithm::longint::digtochar(signed char)':
/home/gxoptg/Документы/My works/Developing/C++/long_arithmetics/Debug/../long_arithm.cpp:188: multiple definition of `long_arithm::longint::digtochar(signed char)'
./long_arithm.o:/home/gxoptg/Документы/My works/Developing/C++/long_arithmetics/Debug/../long_arithm.cpp:188: first defined here 
```

（注意，行链接（如：188）已损坏，因为我扔掉了很多注释的代码行。）

为什么我有这些错误以及我应该纠正什么？据我了解，

```
void fromInt(int num); 
```

和其他是“预定义”，我看不到该方法的任何其他定义。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T14:33:53.320

在类定义之外定义的函数必须移动到源 (.cpp) 文件中，或者必须使用`inline`它们前面的关键字。否则，该函数的副本将放置到每个包含头文件的源文件中，并标记为对其他模块可用，并且当有多个模块时，链接器会报错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T14:43:00.133

你说你包含`long_arithm.cpp`在main中。但是您也可以单独编译它，然后尝试将结果与`main.o`. 这就是导致重复的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T14:19:30.813

看起来您没有关闭命名空间定义并在命名空间内使用它的名称来限定函数名称，同时在内部定义它们。将此 .cpp 文件包含在其他文件中可能会导致在不同的 .cpp 文件中出现多个定义，从而导致上述问题。

# jquery - 如何使用下面的 jquery 代码设置隐藏文本字段并将其重置为空？

> ID：10268671
> 
> 赞同：0
> 
> 时间：2012-04-22T14:13:55.587
> 
> 标签：jquery

我正在使用下面的代码来弹出一个文本字段 onchange 某些下拉菜单。工作得很好，但我遇到了一个问题，我似乎无法让它工作。Onload，隐藏的文本框内有“**选择**”作为文本。{选择是默认的 0 值}。如果用户未从下拉列表中选择任何内容，则文本“ **Select** ”在发送数据时会导致错误，因为它与接收端的值不匹配。

我想更改下面的代码以包含以下内容： onload >> hidden text field is set to empty/equals nothing if value "Select" is in the hidden text field, change to empty/equals nothing

```
$(document).ready(function() {
        $("select#4359, select#4360, select#4361, select#4362, select#4374, select#4378").change(function(){
            $("#5334").val($(this).find(":selected").text());
        })
        .trigger('change');
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:28:21.127

我没有正确理解您的要求。但我相信您正在寻找类似的东西，当用户选择除选择以外的选项时，将该项目的文本设置为隐藏，否则将其设置为空。这段代码将做到这一点。

```
$(document).ready(function() {
        $("#5334").val("");
        $("select#4359, select#4360, select#4361, select#4362, select#4374, select#4378").change(function(){
            $("#5334").val("");
            var txt=$(this).find(":selected").text();
            if(txt!="Select")
            {
                $("#5334").val(txt);
            }     
        })
        .trigger('change');
 }); 
```

示例：http: [//jsfiddle.net/UXu7C/9/](http://jsfiddle.net/UXu7C/9/)

# android - Android 2.3.3 ListView 与 ScrollView

> ID：10268672
> 
> 赞同：1
> 
> 时间：2012-04-22T14:14:21.690
> 
> 标签：android, listview, scrollview

我有一个 ListView 和 TextView。他们都在一个`LinearLayout`. 而这`LinearLayout`是在`ScrollView`. 所以它看起来像这样：

```
Linearlayout
ScrollView
linearlayout
ListView
TextView
Linearlayout
ScrollView
linearlayout 
```

但是你不能滚动它。它只显示`ListView`. 并且由于`ListView`某种原因被裁剪。

这是正常的吗？如果不是那么如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:24:04.570

是的，这是一个问题，因为列表视图已经是一个滚动视图。基本上，当您将滚动视图封装在另一个滚动视图中时，android 无法知道用户想要滚动哪个滚动视图。通常，最底层是滚动的。`iOS`在某些情况下仍然可以解决这个问题，但 android 从来没有。你会得到奇怪的滚动特性。您可以将水平滚动视图放在垂直滚动视图中，这样就可以正常工作。因此，我建议您以不使用`ScrollView`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T14:28:18.003

我遇到了同样的问题。

只需将您的`ScrollView`标签更改为您的**xml**`HorizontalScrollView`内部，您就完成了。

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T14:36:41.587

使用以下 xml 代码。如果我是对的，您不需要 Listview。您可以仅使用文本视图来执行此操作。这是滚动列表视图的代码。

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>   
<LinearLayout android:id="@+id/linearLayout2" android:layout_width="fill_parent" android:layout_height="wrap_content" android:orientation="vertical">
<TextView
    android:id="@+id/label"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@+id/label"
    android:textSize="30px" >
</TextView>
</LinearLayout> 
```**

# spring - 在 ContextLoaderListener 上使用 spring 3.1.1 初始化 Tomcat 失败

> ID：10268677
> 
> 赞同：0
> 
> 时间：2012-04-22T14:14:37.513
> 
> 标签：spring, tomcat

我试图用 Spring 加载 Tomcat 服务器但失败并出现错误（见下文），我只使用一个 zip 用于 spring：spring-core-3.1.1.RELEASE.jar 并在 web.xml 中进行了非常基本的配置任何帮助将不胜感激.

提前谢谢。严

* * *

## 网页.xml：

```
 <listener>
            <listener-class>
                org.springframework.web.context.ContextLoaderListener
            </listener-class>
        </listener>

        <context-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>
                /WEB-INF/config/controllers.xml
            </param-value>
        </context-param> 
```

* * *

## 错误：

严重：向 org.springframework.web.context.ContextLoaderListener java.lang.NoSuchMethodError 类的侦听器实例发送上下文初始化事件的异常：org.springframework.web.context.ConfigurableWebApplicationContext.setId(Ljava/lang/String;)V at org. springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:369) at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284) at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener. java:111) 在 org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779) 在 org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273) 在 org.apache.catalina.util .LifecycleBase.start(LifecycleBase.java:150) 在组织。apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566) 在 org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556) 在 java.util.concurrent.FutureTask$Sync。 innerRun(Unknown Source) at java.util.concurrent.FutureTask.run(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source ) 在 java.lang.Thread.run(Unknown Source)runTask(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source)runTask(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:16:55.277

尝试将`spring-webmvc`依赖项添加到您的 pom：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-webmvc</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T14:19:32.700

缺少的方法位于`ConfigurableApplicationContext`inside `spring-context*.jar`。所以这不可能`spring-core-3.1.1.RELEASE.jar`是您拥有的*唯一*Spring JAR。尝试添加：

```
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-context</artifactId>
  <version>3.1.1.RELEASE</version>
</dependency> 
```

到你的 CLASSPATH。

# java - java仿射变换正确顺序

> ID：10268684
> 
> 赞同：1
> 
> 时间：2012-04-22T14:15:40.117
> 
> 标签：java, swing

我无法确定正确的转换顺序以应用于我的应用程序中的元素。该应用程序具有具有父/子关系的元素，并且每个元素都有一个转换（每个元素都在本地空间中绘制然后转换）。

我要存档的是，如果我转换父级，它的所有子级也应该得到转换（因此，如果您旋转父级，则子级应该围绕父级旋转）。

下面的代码就是这样做的，但问题是当我旋转父级然后想要移动子级时。它朝错误的方向移动（由于其父变换）。我试过改变变换的顺序，但没有运气（我知道我应该先翻译然后变换，然后孩子绕着自己的轴旋转——而不是父母）。

编码：

```
 Element e;
 AffineTransform t = new AffineTransform();
 AffineTransform t3 = new AffineTransform();

 for (i = 0; i < el.size(); i++)
 {
    e = el.get(i);
    t3.setToIdentity();
    t.setToIdentity();
    tmp = e.getParent();
    while(tmp != null)
    {
         t.translate(tmp.getX(), tmp.getY());
         t3.rotate(Math.toRadians(tmp.getAngle()),tmp.getAnchorX(), tmp.getAnchorY());
         tmp = tmp.getParent();
    }

    t.concatenate(t3);
    t.translate(e.getX(), e.getY());

    t.rotate(Math.toRadians(e.getAngle()),e.getAnchorX(), e.getAnchorY());

    e.draw(g2d,t);
} 
```

问题： - 给定两个元素（另一个元素的一个子元素） - 父元素旋转（40 度） - 然后子元素移动 10px 我如何连接转换，以便当我移动子元素时它不会沿旋转方向移动？

编辑：Torious 发布的代码（尚未工作）：

```
public AffineTransform getTransformTo(Element ancestor) {
    AffineTransform t = (AffineTransform)getAffineTransform().clone();
    Element parent = getParent();
    while (parent != null && parent != ancestor) {
        t.preConcatenate(parent.getAffineTransform());
        parent = parent.getParent();
    }
    return t;
}

public void translateInAncestorSpace(Element ancestor, Point translation) {
    AffineTransform fromAncestor = getTransformTo(ancestor); // to ancestor space
    try
    {
        fromAncestor.invert();
    } catch(Exception e)
    {
       e.printStackTrace();   
    }
    translation = (Point)fromAncestor.transform(translation, new Point());

    Transform t1 = new Transform();
    t1.translate(translation.x,translation.y);
    transform(t1);
} 
```

代码输出：

```
 Moving by [x=1,y=1] old position [x=22,y=40]
 Moved by [x=-21,y=-39] new position [x=1,y=1]
 Moving by [x=2,y=2] old position [x=1,y=1]
 Moved by [x=1,y=1] new position [x=2,y=2]
 Moving by [x=4,y=3] old position [x=2,y=2]
 Moved by [x=2,y=1] new position [x=4,y=3] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T14:28:33.527

像这样的东西：

```
// get composite transform for 'e'
t.setToIdentity();
t.translate(e.getX(), e.getY());
t.rotate(...);

tmp = e.getParent();
while (tmp != null) {

    // get composite transform for parent
    t3.setToIdentity();
    t3.translate(tmp.getX(), tmp.getY());
    t3.rotate(...);
    tmp = tmp.getParent();

    t.preConcatenate(t3); // t3 is applied after t
}

e.draw(g2d, t); 
```

**编辑：**为了在“全局空间”中移动一个元素，而它实际上是另一个元素的子元素，我建议将所需的移动转换为元素空间，以便可以简单地将其添加到其翻译中：

*（未经测试的代码）*

```
// Element.getTransformTo: get transform to ancestor or root (null)
public AffineTransform getTransformTo(Element ancestor) {
    AffineTransform t = getCompositeTransform();
    Element parent = getParent();
    while (parent != null && parent != ancestor) {
        t.preConcatenate(parent.getCompositeTransform());
        parent = parent.getParent();
    }
}

// Element.translateInAncestorSpace
// ancestor may be null for root/global space
public void translateInAncestorSpace(Element ancestor, Point translation) {
    AffineTransform fromAncestor = getTransformTo(ancestor); // to ancestor space
    fromAncestor.invert(); // from ancestor space

    // [NEW] re-apply element rotation since translation occurs after rotation
    fromAncestor.rotate(Math.toRadians(angle), anchor.x, anchor.y);

    translation = fromAncestor.deltaTransform(translation, new Point());

    // translation is now in element space; add to existing translation
    element.setX(element.getX() + translation.x);
    element.setY(element.getY() + translation.y);
}

// example usage:
// (this should move the element 10px to the right, regardless
// of parent transforms)
element.translateInAncestorSpace(null, new Point(10, 0)); 
```

还可以考虑实施一种`AffineTransform Element.getCompositeTransform()`方法，最终使您的生活更轻松。

还考虑将你的“元素树”从根节点渲染到叶节点，所以你会得到这样的东西：

```
public void render(Element node, AffineTransform transform) {

    AffineTransform nodeTransform = node.getCompositeTransform();
    nodeTransform.preConcatenate(transform);

    node.draw(g2d, nodeTransform);

    for (Element child : node.children())
        render(child, nodeTransform);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T18:13:21.833

好的，我想我现在明白你想要什么了。下面的代码*应该*（未经测试）连接翻译，而不是旋转。每个元素仅受其自身旋转的影响。

*我已将此作为新答案发布，因为代码的意图与我之前答案中的代码不同。*

使用此代码，只需设置元素的 x 和 y 即可对其进行翻译。

```
// set e's translation
t.setToIdentity();
t.translate(e.getX(), e.getY());

// add ancestor translations (order is irrelevant)
Element parent = e.getParent();
while (parent != null) {
    t.translate(parent.getX(), parent.getY());
    parent = parent.getParent();
}

// append e's rotation (applied first)
t.rotate(...);

e.draw(g2d, t); 
```

你是这个意思吗？

# linux-kernel - 内核模块获取网络抖动和带宽？

> ID：10268687
> 
> 赞同：1
> 
> 时间：2012-04-22T14:16:14.547
> 
> 标签：linux-kernel, statistics, bandwidth, kernel-module

我需要获取本地计算机上的接口列表，以及它们的 IP 地址、MAC 和一组 QoS 测量值（延迟、抖动、错误率、丢失率、带宽）......

我正在编写一个内核模块来从本地网络设备读取这些信息，到目前为止，我已经提取了上面提到的所有内容，除了抖动和带宽......

我正在使用 linux 内核 2.6.35

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:21:28.673

这取决于您所说的*带宽*。在大多数情况下，您只能从 PHY 获得更好称为*比特率*的东西。我想你更需要一些关于更高层可用带宽的信息，如果没有完成主动或被动测量，你就无法获得这些信息，例如发送类似 ICMP 回声的探测数据包，并调查回复。您还应该明确网络中的两个点是什么（实际端点和通信层），您希望在它们之间测量可用带宽。

至于*抖动*，你还需要做一些测量，基本上和上面的方法一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-03T15:06:32.083

我知道这是一篇旧帖子，但您至少可以通过检查 RTCP 数据包（如果它们可用）来实现抖动。据我所知，它们通过 RTP 端口的 +1 进入并与任何 RTP 流一起出现。可以从 RTCP 获得很多信息，但出于您的目的，只需基本的源描述即可：

**编辑**：（没看预览）

只需查看此[链接](https://www.ietf.org/rfc/rfc3550.txt)以了解协议的详细信息，但您可以很容易地从 RTCP 数据包中获取抖动。

根据您使用 RTP 流的目的，还有很多其他资源，例如扩展报告中的 VoIP 指标报告块 ( [https://www.rfc-editor.org/rfc/rfc3611#page-25](https://www.rfc-editor.org/rfc/rfc3611#page-25)）。

**编辑**：

根据 Artem 的要求，这里有一个基本流程，您可以这样做：

1.  RTP 流在端口 16400 上启动（发生这种情况所需的驱动程序/机制很可能已经到位）。

2.  告诉内核也开始监听端口 16401（RTP 流端口上方的 1）；这就是 RTCP pkts 开始发挥作用的地方。

3.  随着 RTCP pkts 的出现，将它们发送到您想要处理它们的任何地方（即，如果您想在用户空间或其他地方解析它）。

4.  解析所需数据的 pkts。我不知道有一个特定的库可以做到这一点，但是很容易将一些结构指向它（在 C 中）并取消引用，注意 Endianess。

# r - R中的“加权”回归

> ID：10268689
> 
> 赞同：14
> 
> 时间：2012-04-22T14:16:21.830
> 
> 标签：r, linear-regression, weighted

我创建了一个类似下面的脚本来执行我称之为“加权”回归的事情：

```
library(plyr)

set.seed(100)

temp.df <- data.frame(uid=1:200,
                      bp=sample(x=c(100:200),size=200,replace=TRUE),
                      age=sample(x=c(30:65),size=200,replace=TRUE),
                      weight=sample(c(1:10),size=200,replace=TRUE),
                      stringsAsFactors=FALSE)

temp.df.expand <- ddply(temp.df,
                        c("uid"),
                        function(df) {
                          data.frame(bp=rep(df[,"bp"],df[,"weight"]),
                                     age=rep(df[,"age"],df[,"weight"]),
                                     stringsAsFactors=FALSE)})

temp.df.lm <- lm(bp~age,data=temp.df,weights=weight)
temp.df.expand.lm <- lm(bp~age,data=temp.df.expand) 
```

您可以看到在 中`temp.df`，每一行都有其权重，我的意思是总共有 1178 个样本，但对于具有相同`bp`和的行`age`，它们合并为 1 行并在`weight`列中表示。

我使用了`weight`函数中的参数`lm`，然后将结果与另一个数据框进行了交叉检查，该`temp.df`数据框已“扩展”。但我发现`lm`2 个数据帧的输出不同。

我是否误解了函数中的`weight`参数`lm`，任何人都可以让我知道如何正确地运行回归（即不手动扩展数据框）对于像这样呈现的数据集`temp.df`？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-22T18:47:57.077

这里的问题是自由度没有被适当地加起来以获得正确的 Df 和均方和平方统计。这将纠正问题：

```
temp.df.lm.aov <- anova(temp.df.lm)
temp.df.lm.aov$Df[length(temp.df.lm.aov$Df)] <- 
        sum(temp.df.lm$weights)-   
        sum(temp.df.lm.aov$Df[-length(temp.df.lm.aov$Df)]  ) -1
temp.df.lm.aov$`Mean Sq` <- temp.df.lm.aov$`Sum Sq`/temp.df.lm.aov$Df
temp.df.lm.aov$`F value`[1] <- temp.df.lm.aov$`Mean Sq`[1]/
                                        temp.df.lm.aov$`Mean Sq`[2]
temp.df.lm.aov$`Pr(>F)`[1] <- pf(temp.df.lm.aov$`F value`[1], 1, 
                                      temp.df.lm.aov$Df, lower.tail=FALSE)[2]
temp.df.lm.aov
Analysis of Variance Table

Response: bp
            Df Sum Sq Mean Sq F value   Pr(>F)   
age          1   8741  8740.5  10.628 0.001146 **
Residuals 1176 967146   822.4 
```

与之比较：

```
> anova(temp.df.expand.lm)
Analysis of Variance Table

Response: bp
            Df Sum Sq Mean Sq F value   Pr(>F)   
age          1   8741  8740.5  10.628 0.001146 **
Residuals 1176 967146   822.4                    
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
```

我有点惊讶这在 R-help 上没有更频繁地出现。无论是那个还是我的搜索策略开发能力都随着年龄的增长而减弱。

# javascript - 如何根据光标移动*到*的元素更改 jQuery .mouseleave() 的行为？

> ID：10268690
> 
> 赞同：0
> 
> 时间：2012-04-22T14:16:24.353
> 
> 标签：javascript, jquery, html, css

大家好，我整理了一个简单的下拉菜单系统，它使用 hoverIntent 来显示子菜单并显示灯箱样式的“熄灯”深色背景。

我已经让菜单工作了，但我想更新它，所以如果你从一个项目移动到下一个项目，深色背景会保持在原来的位置，而不是消失和重新出现。

我创建了一个 jsFiddle，所以你可以看到我在说什么：http: [//jsfiddle.net/gGd6Y/10/](http://jsfiddle.net/gGd6Y/10/)

尝试将鼠标悬停在菜单项 1 上，然后移至项 2。

我希望能够在对 HoverIntent 的调用的 .mouseleave() 部分中看到鼠标光标移动到的元素，然后如果它是另一个菜单项，我会阻止关闭深色背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:28:54.323

以 HTML 的当前设置方式，它无法完成。阴影覆盖了其他可悬停的元素。因此，当您`mouseleave`将鼠标悬停在阴影上时，而不是其他 LI。

我提出的解决方案：http: [//jsfiddle.net/iambriansreed/k98LP/](http://jsfiddle.net/iambriansreed/k98LP/)

我让菜单出现在阴影上方。我延迟了阴影淡出动作，并确保在实际淡出之前没有悬停其他菜单项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T14:46:57.513

看看这是否有帮助：http: [//jsfiddle.net/gGd6Y/11/](http://jsfiddle.net/gGd6Y/11/)

我已经更改了菜单项以保持在覆盖层的顶部。

**编辑：**

我在上一条评论中提出的解决方案：

[http://jsfiddle.net/gGd6Y/16/](http://jsfiddle.net/gGd6Y/16/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T14:30:13.793

简单的解决方案是将 mouseleave 侦听器添加到所有项目的容器中。

更灵活的解决方案是`is_element_hovered`为每个元素存储布尔值。当 mouseleave 事件发生时，设置小的延迟，然后延迟检查您的布尔值并正确设置背景动画。

# haskell - Haskell：加载当前目录路径中的所有文件

> ID：10268692
> 
> 赞同：5
> 
> 时间：2012-04-22T14:16:43.470
> 
> 标签：haskell, ghc, ghci, winghci

命令（在 GHCi 中）

```
:load abc 
```

加载文件 abc 中的函数（必须存在于当前目录路径中）。如何加载当前目录路径中的所有文件？谢谢

## -------------------------------------------------- --------------------------------

[回复下面的帖子]

嗨 Rotskoff，谢谢我尝试了你的建议，但我无法让它发挥作用，所以我想我一定误解了一些东西。

我创建了 3 个文件 test.hs、test1.hs 和 test2.hs，如下所示：

->

```
--test.hs
import NecessaryModule 
```

->

```
--test1.hs
module NecessaryModule where

addNumber1 :: Int -> Int -> Int
addNumber1 a b = a + b 
```

->

```
--test2.hs
module NecessaryModule where

addNumber2 :: Int -> Int -> Int
addNumber2 a b = a + b 
```

然后当我这样做时：

```
:load test 
```

我收到错误消息：

```
test.hs:1:8:
    Could not find module `NecessaryModule':
      Use -v to see a list of the files searched for. 
```

谢谢

## -------------------------------------------------- -------------------------------------------

谢谢。这就是我为使其正常工作所做的（遵循 Rotskoff 的建议）：

->

```
--test.hs
import NecessaryModule1
import NecessaryModule2 
```

->

```
--NecessaryModule1.hs
addNumber1 :: Int -> Int -> Int
addNumber1 a b = a + b 
```

->

```
--NecessaryModule2.hs
addNumber2 :: Int -> Int -> Int 
addNumber2 a b = a + b 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T16:03:14.257

大概您的意思是 Haskell 源文件，因为您不能将`:load`GHCi 中的命令用于其他任何内容。

在您加载的源文件的顶部，包括以下行：

`import NecessaryModule`

对于每个源文件，确保命名模块，例如，

`module NecessaryModule where`

应该出现。GHCi 将自动链接所有文件。

如果您尝试导入数据，请查看`System.Directory`文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T21:19:08.433

如果文件名和模块的名称相同，则更好：

```
➤ mv test1.hs NecessaryModule.hs
➤ ghci
GHCi, version 7.0.4: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Loading package ffi-1.0 ... linking ... done.
Prelude> :load test
[1 of 2] Compiling NecessaryModule  ( NecessaryModule.hs, interpreted )
[2 of 2] Compiling Main             ( test.hs, interpreted )
Ok, modules loaded: NecessaryModule, Main. 
```

因为`:load`命令加载模块（按文件名）及其依赖项（您可以通过键入`:help`或`:?`在 GHCi 提示符中读取）。

该`:load`命令还删除了当前 GHCi 会话中定义的所有先前声明，因此要加载当前目录中的所有文件，您可以执行以下操作：

```
Prelude> :q
Leaving GHCi.
➤ ghci *.hs
GHCi, version 7.0.4: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Loading package ffi-1.0 ... linking ... done.

<no location info>:
    module `main:NecessaryModule' is defined in multiple files: NecessaryModule.hs
                                                            test2.hs
Failed, modules loaded: none.
Prelude> :q
Leaving GHCi.
➤ rm test2.hs
➤ ghci *.hs  
GHCi, version 7.0.4: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Loading package ffi-1.0 ... linking ... done.
[1 of 2] Compiling NecessaryModule  ( NecessaryModule.hs, interpreted )
[2 of 2] Compiling Main             ( test.hs, interpreted )
Ok, modules loaded: NecessaryModule, Main.
*NecessaryModule> 
```

# android - 将字符串传递给活动

> ID：10268703
> 
> 赞同：1
> 
> 时间：2012-04-22T14:17:27.253
> 
> 标签：android

我是 Android 开发和 Java 的新手，想知道是否有人可以帮助我解决以下问题：

我创建了一个运行在指定端口上侦听的服务器线程的应用程序。我想将从连接的客户端收到的消息打印到活动中的 TextView 中。

服务器线程在一个单独的类中。此类中的 run 方法侦听客户端连接并将接收到的任何数据读取到 String 中。

对我来说，将此字符串的内容传输回活动以便它可以更新 TextView 的最佳方式是什么？

根据我的（有限）理解，只有 ui 线程应该更新 TextView，我找不到让 runOnUiThread 更新 TextView 的方法。

按要求添加代码。

活动代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView messages = (TextView) findViewById(R.id.messages);

    try {
        newThread server = new newThread(this, messages);
    } catch(Exception e) {
        Toast.makeText(ChatActivity.this, e.toString(), Toast.LENGTH_LONG).show();
    }

} 
```

newThread 类中的运行方法：

```
public void run()
{
    serv = new ServerSocket(8000);
    while(true)
    {
        cli = serv.accept();
        user = cli.getInetAddress().toString();
        BufferedReader cli_in = new BufferedReader(new InputStreamReader(cli.getInputStream()));
        OutputStreamWriter cli_out = new OutputStreamWriter(cli.getOutputStream());

        while((buf = cli_in.readLine()) != null)
        {
            // Update the messages TextView with buf 
        }

     }
} 
```

为了避免让事情变得过于混乱，我已经省略了我可以忽略的不相关代码。

基本上，在 run() 的内部 while 循环中，我想将“buf”字符串传递给活动，以便可以使用其内容更新消息文本视图。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:10:04.113

也许是个坏主意，但是使用 AsyncTask 怎么样？没有尝试这是否可行，但它可能，因为 onProgressUpdate 可以访问 UI 线程。

```
private TextView messages;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    messages = (TextView) findViewById(R.id.messages);

    ReceiveTask receive = new ReceiveTask();
    receive.execute(100)
    }
private void updateTextView(String text)
    {
            messages.setText(text);
    }
    private class ReceiveTask extends AsyncTask<Integer, String, Long> {

    @Override
    protected void onPreExecute() {

    }

    protected Long doInBackground(Integer... urls) {
        newThread nt = new newThread();
        while(true)
        {
            publishProgress(run());
        }
        return (long)0;
    }

    protected void onProgressUpdate(String... value) {
        updateTextView(value[0]); //method in Activity class, to update TextView
    }

    protected void onPostExecute(Long result) {

        }
    } 
```

基本上`publishProgress`会将数据发送到`onProgressUpdate`，然后将数据发送到主类中的方法（updateTextView）并更新TextView。

如果你告诉别人你正在聊天，通常会有所帮助。此外，需要修改 run() 以返回字符串，并从中删除 while(true) 循环。这不是最好的主意，我建议您先阅读一些有关如何进行 android 聊天的教程。

# c++ - 为什么可以将 const char* 分配给 char*？

> ID：10268705
> 
> 赞同：15
> 
> 时间：2012-04-22T14:17:37.713
> 
> 标签：c++, string, char, literals

我知道 example`"hello"`是 type `const char*`。所以我的问题是：

1.  我们如何将像这样的文字字符串分配给`"hello"`非`const char*`像这样的：

    ```
    char* s = "hello";  // "hello" is type of const char* and s is char*
                        // and we know that conversion from const char* to
                        // char* is invalid 
    ```

2.  是像`"hello"`，它将在我的所有程序中占用内存的文字字符串，还是就像在语句结束时将被销毁的临时变量？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-22T14:19:20.810

其实`"hello"`是类型`char const[6]`。

但问题的要点仍然是正确的——为什么 C++ 允许我们将只读内存位置分配给非`const`类型？

唯一的原因是向后兼容旧的 C 代码，它不知道`const`. 如果 C++ 在这里很严格，它会破坏很多现有的代码。

也就是说，大多数编译器都可以配置为*警告*此类代码已弃用，甚至默认情况下这样做。此外，C++11 完全不允许这样做，但编译器可能还没有强制执行。

* * *

对于 Standerdese 粉丝：
^([参考 1]) **C++03 标准：§4.2/2**

> 不是宽字符串文字的字符串文字（2.13.4）可以转换为“pointer to char”类型的右值；宽字符串文字可以转换为“指向 wchar_t 的指针”类型的右值。无论哪种情况，结果都是指向数组第一个元素的指针。仅当存在显式适当的指针目标类型时才考虑这种转换，而不是当一般需要从左值转换为右值时。[**注意：此转换已弃用**. 见附录 D。] 为了在重载决议 (13.3.3.1.1) 中排序，这种转换被认为是数组到指针的转换，然后是限定转换 (4.4)。[示例：“abc”转换为“pointer to const char”作为数组到指针的转换，然后转换为“pointer to char”作为限定转换。]

C++11 只是删除了上面的引用，这意味着它是 C++11 中的非法代码。

^([参考 2]) **C99 标准 6.4.5/5“字符串文字 - 语义”：**

> 在翻译阶段 7 中，将一个字节或值为零的代码附加到由一个或多个字符串文字产生的每个多字节字符序列。然后使用多字节字符序列来初始化一个静态存储持续时间和长度刚好足以包含该序列的数组。对于字符串字面量，数组元素的类型为 char，并使用多字节字符序列的各个字节进行初始化；对于宽字符串文字，数组元素的类型为 wchar_t，并使用宽字符序列进行初始化...
> 
> 如果它们的元素具有适当的值，则未指定这些数组是否不同。**如果程序尝试修改这样的数组，则行为未定义。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T14:27:13.010

> 像“hello”这样的文字字符串会在我的所有程序中占用内存，这就像一个临时变量，在语句结束时会被销毁。

它保存在程序数据中，因此在程序的生命周期内可以使用。您可以从当前范围返回指向此数据的指针和引用。

被强制转换为的唯一原因`const char*`是`char*`与 c 的兼容性，例如 winapi 系统调用。与任何其他 const 强制转换不同，这种强制转换是不明确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T14:19:31.277

只需使用`string`：

```
std::string s("hello"); 
```

那将是 C++ 方式。如果您真的必须使用`char`，则需要创建一个数组并在其上复制内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T14:37:09.617

第二个问题的答案是该变量`s`作为指向字符的类型指针存储在 RAM 中。如果它是全局的或静态的，它会在堆上分配并在运行程序的整个生命周期内保持在那里。如果它是本地（“自动”）变量，它会在堆栈上分配并一直保留到当前函数返回。在任何一种情况下，它都会占用保存指针所需的内存量。

字符串`"Hello"`是一个常量，它与所有其他常量和初始化程序一起存储为程序本身的一部分。如果您构建程序以在设备上运行，则该字符串将存储在 ROM 中。

请注意，因为字符串是常量并且`s`是指针，所以不需要复制。指针`s`只是指向存储字符串的位置。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-04-22T14:28:42.950

在您的示例中，您不是在分配，而是在构建。例如，std::string 确实有一个`std::string(const char *)`构造函数（实际上它更复杂，但没关系）。而且，类似地，char *（如果它是一个类型而不是一个指向类型的指针）可以有一个 const char * 构造函数，它正在复制内存。

我实际上并不知道编译器是如何在这里真正工作的，但我认为它可能与我上面描述的类似：`"Hello"`在堆栈中构造一个副本，并`s`使用该副本的地址进行初始化。

# c - 为什么我的语言抽认卡程序会因为 if 语句而崩溃？

> ID：10268712
> 
> 赞同：0
> 
> 时间：2012-04-22T14:18:32.157
> 
> 标签：c

**我只完成了程序的 1 部分，所以选择菜单选项 1** 一切正常，直到我 在 engtotagall(); 中添加*if(words[i].errorflag==0){} ;* 这样用户只有在之后才可以选择回答他的错误。在菜单中选择 1 后程序崩溃。这是为什么？我不明白为什么会这样。

```
#include <stdio.h>
#include <stdlib.h>
int clear(void);
int initialize(void);
int engtotagall(void);
int tagtoengall(void);
int engtotagnoun(void);
int tagtoengnoun(void);
int engtotagverb(void);
int tagtoengverb(void);
int engtotagothers(void);
int tagtoengothers(void);

struct flshcard
{
    char english[10];
    char tagalog[10];
    char speechprt;
    char errorflag;
}words[10];

int main()
{
    while(1)
    {
        char choice;
        printf("Language Flashcard Practice Program\n");
        printf("1 - English -> Tagalog (All Words)\n2 - Tagalog -> English (All Words)\n3 - English -> Tagalog (Nouns)\n4 - Tagalog -> English (Nouns)\n5 - English -> Tagalog (Verbs)\n6 - Tagalog -> English (Verbs)\n7 - English -> Tagalog (Others)\n8 - Tagalog -> English (Others)\n9 - Exit\n");
        choice=getchar();
        if(choice=='1')
        {
            clear();
            initialize();
            engtotagall();
        }

        else if(choice=='9')
        {
            exit(EXIT_SUCCESS);
        }
        else
        {
            clear();
            printf("\n%cPlease input a valid option.\n",7);
        }
    }
}

/* Start of function for clearing the pages */
int clear(void)
{
    int i;
    for(i=0;i<25;i++)
    {
        printf("\n");
    }
}

/* Start of the function for initializing the words */
int initialize(void)
{
    /* Making errorflag 0 in all words array */
    int i;
    for(i=0;i<10;i++)
    {
        words[i].errorflag=0;
    }
    /* words[0] struct */
    strcpy(words[0].english,"cards");
    strcpy(words[0].tagalog,"baraha");
    words[0].speechprt='n';
    /* words[1] struct */
    strcpy(words[1].english,"punch");
    strcpy(words[1].tagalog,"suntok");
    words[1].speechprt='v';
    /* words[2] struct */
    strcpy(words[2].english,"ugly");
    strcpy(words[2].tagalog,"pangit");
    words[2].speechprt='o';
    /* words[3] struct */
    strcpy(words[3].english,"child");
    strcpy(words[3].tagalog,"bata");
    words[3].speechprt='n';
    /* words[4] struct */
    strcpy(words[4].english,"dance");
    strcpy(words[4].tagalog,"sayaw");
    words[4].speechprt='v';
    /* words[5] struct */
    strcpy(words[5].english,"small");
    strcpy(words[5].tagalog,"maliit");
    words[5].speechprt='o';
    /* words[6] struct */
    strcpy(words[6].english,"cat");
    strcpy(words[6].tagalog,"pusa");
    words[6].speechprt='n';
    /* words[7] struct */
    strcpy(words[7].english,"jump");
    strcpy(words[7].tagalog,"talon");
    words[7].speechprt='v';
    /* words[8] struct */
    strcpy(words[8].english,"dumb");
    strcpy(words[8].english,"bobo");
    words[8].speechprt='o';
    /* words[9] struct */
    strcpy(words[9].english,"frog");
    strcpy(words[9].tagalog,"palaka");
    words[9].speechprt='n';
}
/* Start of function for English to Tagalog (All Words) */
int engtotagall(void)
{
    int i,k,choice;
    char answer[15];
    for(i=0;i<10;i++)
    {
        if(words[i].errorflag==0) /* I just added this and its now crashing */
        {
            printf("\nWhat is the tagalog for %s?\n",words[i].english);
            gets(answer);
            while(answer[k]!='\0')
            {
                tolower(answer[k]);
            }
            if(strcmp(answer,words[i].tagalog)==0)
            {
                printf("\nYou are correct!!\n");
            }
            else
            {
                printf("\nWrong answer!!\n");
                words[i].errorflag=1;
            }
        }
    }
    printf("\n\n1 - Take the whole test again\n2 - Answer your mistakes only\3 - Go back to Menu\n4 - Exit Program\n");
    scanf("%d",choice);
    if(choice==1)
    {
        initialize();
        engtotagall();
    }
    else if (choice==2)
    {
        engtotagall();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:28:13.713

爱克：

```
 while(answer[k]!='\0')
    {
        tolower(answer[k]);
    } 
```

k**未初始化。** 你几乎可以肯定从一开始就在这里越界。这将导致故障并导致您的崩溃。

另外，如果 answer[k] != '\0'...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T14:28:19.427

这是`while`您尝试将字符串转换为小写的循环。你不初始化`k`，也不改变它的值，所以在绝大多数情况下，while循环将永远持续下去。你可能想要的是一个`for`循环，像这样：

```
int i;
for (i = 0; i < strlen(answer, 15); i++) {
    answer[i] = tolower(answer[i]);
} 
```

# c# - 具有数据库发布功能的 Windows 窗体应用程序

> ID：10268719
> 
> 赞同：2
> 
> 时间：2012-04-22T14:19:23.703
> 
> 标签：c#, sql-server, winforms, publishing

我会尽量让问题保持简单和简短 - 发布使用 SQL Server 数据库的 Windows 窗体应用程序时的最佳实践是什么？

使用带有先决条件的 ClickOnce 我可以强制安装 SQL Server Express，但如果它已经安装了怎么办？你如何建立连接字符串？您如何找到服务器实例的名称？应该使用哪种身份验证 - Windows 或 SQL？这个过程可以自动化还是用户交互不可避免？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T23:19:49.810

添加答案，因为无论如何这是您决定采用的方式，很高兴为您提供帮助:)

您还可以考虑使用不需要设置并直接在您的应用程序进程中运行的 SQL Server Compact。当然不提供 SQL Express 的所有功能，所以真的取决于你的需要。

看看：[Microsoft SQL Server Compact 4.0](http://www.microsoft.com/download/en/details.aspx?id=17876)

注意：如果您可以轻松摆脱触发器，那么您要么削减了功能，要么摆脱了您并不真正需要的东西。我是老派，从不使用触发器，它们经常被滥用，看到人们创建触发器只是为了在列中设置默认值，因为不知道可以使用默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:02:31.827

嗯，在这种情况下，我会说你必须考虑到数据库的使用，如果数据库连接到一个支持许多用户的网络，则需要进行身份验证，并且不可避免地会面临某种用户交互。

# java - 同步对象句柄是否传递给 Java 中的被调用函数？

> ID：10268723
> 
> 赞同：0
> 
> 时间：2012-04-22T14:19:47.813
> 
> 标签：java, locking

所以可以说我有这个代码：

```
public void bar(){
  synchronized(foo){foo.remove(0)}
}

public void doStuff(){
  synchronized(foo){
     bar()
  }
} 
```

同步会意识到我所在的当前链有这个锁并继承它还是会死锁？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T14:23:19.580

您从同步块获得的锁是*可重入*的。这不会死锁，一个线程可以多次获取同一个对象的锁。

请参阅[内在锁和同步](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T14:35:24.597

正如马特所说，它不会死锁。

我如何看待它

这种锁定机制不依赖于方法调用，而是依赖于控制流。单个线程如何执行语句以及当线程遇到同步块时，它会在同步签名中请求对象的锁定。

如果有，则进入，否则将在对象的锁池中等待，直到收到通知。

执行 doStuff() 的线程已经携带了锁，所以这就是为什么没有死锁的原因

# android - Android 更改画布背景颜色而不会丢失任何绘图

> ID：10268724
> 
> 赞同：9
> 
> 时间：2012-04-22T14:20:11.837
> 
> 标签：android, android-canvas

我正在尝试找到一种方法来设置画布背景，并使用从自定义颜色选择器中拾取的颜色而不删除其上的任何绘图。我正在尝试创建一个可以在画布上绘制并将其保存为 png 的应用程序。但是当我为当前画布设置新背景时，所有绘图都消失了。我正在使用这样的东西：

`mCanvas.drawColor(picker.getColor());`

有什么想法可以让事情正常进行吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T08:39:41.943

已经对您的问题给出的答案都指向正确的方向：您确实需要将背景色块和前景图分开在单独的图层中，然后将它们合并，然后将其全部保存在 .png 文件中。这也是 Adob​​e Photoshop 工作流程的设计方式......如果我们考虑一下，它确实是有道理的：以像 MsPaint 这样的软件为例：因为它不使用图层，它必须依赖像填充算法这样的东西来完成（尽管以不完整的方式）远程类似于背景变化的事情......

实现这种事情的一种方法是实例化由 2 个不同位图支持的 2 个 Canvas 对象。第一个 Canvas-Bitmap 对将用于您在前景的绘图，第二个 Canvas-Bitmap 对将用于您的合并图层绘图（即前景绘图 + 背景色块）。然后，当您需要保存第二个位图时，它将被保存到 .png 文件中。这样，我们的第一个 Canvas-Bitmap 对存储您的前景信息，如果需要更改背景颜色，这些信息不会被破坏。每次进行操作时，图层都可以合并到第二个 Canvas-Bitmap 对中，以便始终有一个具有正确内容的位图可以随时保存。

这是我为清除此方法而制作的自定义视图。它实现了一个简单的视图，用于使用手指在触摸屏上绘制一条蓝线，背景颜色根据手指的 XY 位置而变化，以演示背景颜色的变化，而无需完整实现所固有的不必要的代码复杂性带有色轮/菜单/*除其他外*：

```
package com.epichorns.basicpaint;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Point;
import android.graphics.Paint.Style;
import android.view.View;

public class PaintView extends View{

    Bitmap mMergedLayersBitmap=null; //Note: this bitmap here contains the whole of the drawing (background+foreground) to be saved.
    Canvas mMergedLayersCanvas=null;

    Bitmap mBitmap = null; //bitmap onto which we draw our stuff
    Canvas mCanvas = null; //Main canvas. Will be linked to a .bmp file
    int mBackgroundColor = 0xFF000000; //default background color
    Paint mDefaultPaint = new Paint();

    Paint mDrawPaint = new Paint(); //used for painting example foreground stuff... We draw line segments.
    Point mDrawCoor = new Point(); //used to store last location on our PaintView that was finger-touched

    //Constructor: we instantiate 2 Canvas-Bitmap pairs
    public PaintView(Context context, int width, int height) {
        super(context);
        mMergedLayersBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888); 
        mMergedLayersCanvas = new Canvas(mMergedLayersBitmap);

        mBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);
    }

    //Change background color
    public void changeColor(int newColor){
        mBackgroundColor = newColor;
        invalidate(); //refresh view: this will indirectly invoke onDraw soon afterwards
    }

    //Called by user of PaintView in order to start a painting "stroke" (finger touching touch-screen): stores the 
    //location of the finger when it first touched the screen
    public void startDraw(int x, int y, int radius, int color){
        mDrawPaint.setColor(color);
        mDrawPaint.setStyle(Style.STROKE);
        mDrawPaint.setStrokeWidth(radius);
        mDrawCoor.x = x;
        mDrawCoor.y = y;        
    }

    //Called by user of PaintView when finger touching touch-screen is moving (must be called after a startDraw, 
    //as the latter initializes a couple of necessary things)
    public void continueDraw(int x, int y){
        mCanvas.drawLine(mDrawCoor.x, mDrawCoor.y, x, y, mDrawPaint);
        mDrawCoor.x = x;
        mDrawCoor.y = y;
        invalidate(); //refresh view: this will indirectly invoke onDraw soon afterwards
    }

    //Merge the foreground Canvas-Bitmap with a solid background color, then stores this in the 2nd Canvas-Bitmap pair.
    private void mergeLayers(){
        mMergedLayersCanvas.drawColor(mBackgroundColor);
        mMergedLayersCanvas.drawBitmap(mBitmap, 0, 0, mDefaultPaint);
    }

    @Override
    public void onDraw(Canvas canvas){
        mergeLayers();
        canvas.drawBitmap(mMergedLayersBitmap, 0, 0, mDefaultPaint);
    }

} 
```

为了测试这个视图，这里有一个使用`PaintView`该类的测试 Activity。这两个文件在 Android 项目中都是自给自足的，因此您可以在真实设备上轻松测试它：

```
package com.epichorns.basicpaint;

import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.util.Log;
import android.view.Display;
import android.view.MotionEvent;
import android.view.View;
import android.widget.LinearLayout;

import com.epichorns.basicpaint.PaintView;
public class BasicPaintActivity extends Activity {
    PaintView mPaintView=null;
    LinearLayout mL = null;
    boolean mIsDrawing=false;
    int mBackgroundColor = 0xFF000000;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Display display = getWindowManager().getDefaultDisplay();       
        final float dispWidth = (float)display.getWidth();
        final float dispHeight = (float)display.getHeight();

        mPaintView = new PaintView(this, display.getWidth(), display.getHeight());    
        mPaintView.changeColor(mBackgroundColor);
        mPaintView.setOnTouchListener(new View.OnTouchListener(){

            public boolean onTouch(View v, MotionEvent event) {

            if(event.getAction()==MotionEvent.ACTION_DOWN){
                    mPaintView.startDraw((int)event.getX(), (int)event.getY(), 6, 0x806060FF);              
                    mIsDrawing=true;
                    return true;
                }
                else if(event.getAction()==MotionEvent.ACTION_UP){
                    mIsDrawing=false;
                    return true;
                }
                else if(event.getAction()==MotionEvent.ACTION_MOVE){
                    if(mIsDrawing){

                        //To demonstrate background change, change background color depending on X-Y position
                        int r = (int)(255f*event.getX()/dispWidth);
                        int g = (int)(255f*event.getY()/dispHeight);
                        mBackgroundColor = Color.argb(0xFF, r,g, 0x00);
                        Log.d("DEBUG1", "Color channels: (r, g) = ("+String.valueOf(r)+", "+String.valueOf(g)+")");
                        mPaintView.changeColor(mBackgroundColor);

                        //now, draw stuff where finger was dragging...
                        mPaintView.continueDraw((int)event.getX(), (int)event.getY());
                        return true;
                    }
                    else{
                        return false;
                    }

                }

                return false;
            }

        });

        setContentView(mPaintView);
    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T14:47:47.133

当您绘制颜色时，它会在您的图纸上绘制。您需要绘制颜色，然后再次绘制其他所有内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T06:50:54.803

看看你是否想在画布中进行更改，那么你必须调用 invalidate 以将这些更改应用到你的屏幕上。如果你调用 invalidate 那么你的`onDraw()`方法将调用。

如果您只想从颜色选择器更改画布的背景颜色，则将颜色值保存在变量中并在保存变量后立即调用无效。现在您将调用。`onDraw()`现在通过调用更改画布背景并绘制您想要的所有其他内容`setBackgroundColor(color variable)``onDraw()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T10:49:10.393

使用 canvas.drawARGB(a,r,g,b) 它将适用于明确

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-23T21:31:46.957

@安卓机器人

这两行代码对我来说就像魅力一样。当用户单击任何颜色（例如： Red ）时，将该颜色设置为 mPaint

```
 mPaint.setColor(Color.RED); 
```

当你想改变画布颜色时

```
 dv.setBackgroundColor(mPaint.getColor()); 
```

其中 dv 是扩展视图（自定义视图）的类的对象。试试看，如果您遇到任何问题，请告诉我。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T06:25:23.253

只要您的背景是并且将是另一种颜色，您就可以执行以下操作：

```
for (x...)
  for (y...)
    if (bitmap.getPixel(x,y) == oldBackgroundColor)
      bitmap.setPixel(x,y,newBackgroundColor) 
```

或者，您可以在离屏位图上绘制内容，然后将背景和离屏绘制到实际位图上。这样，您可以更改将在接下来的两步绘图发生时使用的背景颜色。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-06T14:30:11.207

也许这是一个老问题，但我想为这个解决方案做出贡献，如果你从源中获取位图，然后用画布做一个可绘制的，也许这可以适合你：

```
@Override
public Bitmap transform(final Bitmap source) {
    //Background for transparent images
    Bitmap backg = Bitmap.createBitmap(source.getWidth(), source.getHeight(), Bitmap.Config.ARGB_8888);
    backg.eraseColor(Color.WHITE); // Any color you want...
    Paint back = new Paint();
    BitmapShader backshader = new BitmapShader(backg,
    BitmapShader.TileMode.CLAMP, BitmapShader.TileMode.CLAMP);
    back.setShader(backshader);
    back.setAntiAlias(true);

    // Image for the draw
    final Paint paint = new Paint();
    paint.setAntiAlias(true);
    paint.setShader(new BitmapShader(source, Shader.TileMode.CLAMP,
            Shader.TileMode.CLAMP));
    Bitmap output = Bitmap.createBitmap(source.getWidth(), source.getHeight(), source.getConfig());
    Canvas canvas = new Canvas(output);

    // IMPORTANT THING
    canvas.drawRoundRect(new RectF(margin, margin, source.getWidth()
            - margin, source.getHeight() - margin), radius, radius, back); // Draw the background first...
    canvas.drawRoundRect(new RectF(margin, margin, source.getWidth()
            - margin, source.getHeight() - margin), radius, radius, paint); // And then Draw the image, so it draws on top of the background

    if (source != output) {
        source.recycle();
    }

    // This is for if i want to put a border in the drawable, its optional
    Paint paint1 = new Paint();      
    paint1.setColor(Color.parseColor("#CC6C7B8B"));
    paint1.setStyle(Style.STROKE);
    paint1.setAntiAlias(true);
    paint1.setStrokeWidth(2);
    canvas.drawRoundRect(new RectF(margin, margin, source.getWidth()
            - margin, source.getHeight() - margin), radius, radius, paint1);

    // and then, return the final drawable...
    return output;
} 
```

希望能帮助到你...

# c# - 项目中的按钮删除方块？

> ID：10268726
> 
> 赞同：0
> 
> 时间：2012-04-22T14:20:19.610
> 
> 标签：c#, winforms, drawing

我的 C# winform 项目有问题。

我有绘制正方形的功能：

```
public void DrawingSquares(int x, int y)
{
  System.Drawing.Graphics graphicsObj;
  graphicsObj = this.CreateGraphics();
  Pen myPen = new Pen(System.Drawing.Color.Black, 5);
  Rectangle myRectangle = new Rectangle(x, y, 100, 100);
  graphicsObj.DrawRectangle(myPen, myRectangle);
}

private void button1_Click(object sender, EventArgs e)
{
  z = Convert.ToInt16(textBox1.Text)-1;
  k = Convert.ToInt16(textBox2.Text)-1;
  DrawAllSquares();
}

private void DrawAllSquares()
{
  int tempy = y;
  for (int i = 0; i < z; i++)
  {
    DrawingSquares(x, y);
    for (int j = 0; j < k - 1; j++)
    {
      tempy += 50;
      DrawingSquares(x, tempy);
    }
    x += 50;
    tempy = y;
  }
} 
```

在我的项目中，我有一个函数用于在运行时在表单中移动按钮，但是当按钮移动到绘图上时，绘图被删除。

我该怎么做才能使绘图永久化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:27:41.637

如果您需要永久（就应用程序生命周期而言），无论如何，您需要在您内部使用它`Control's`（`Control`必须绘制矩形），[OnPaint](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onpaint.aspx)方法。

如果您也需要一个`animation`：它*可以*通过使用 a`timer`并更改您传递给您的参数的坐标来解决`DrawSquares`。

希望这可以帮助。

**编辑**

伪代码：

```
public class MyControl : Control 
{
    public override void OnPaint(PaintEventArgs e)
    {
       base.OnPaint(e); 

       DrawingSquares(e.Graphics, valueX, valueY);
    }

    public void DrawingSquares(Graphics graphicsObj, int x, int y)
    {      
       Pen myPen = new Pen(System.Drawing.Color.Black, 5);
       Rectangle myRectangle = new Rectangle(x, y, 100, 100);
       graphicsObj.DrawRectangle(myPen, myRectangle);
    }

} 
```

`valueX`并且是您希望绘制矩形`valueY`的相对坐标`X`和坐标。`Y`

这些坐标可以是常数值，或者您可以从某个计时器更改它们并调用`Invalidate()`on `MyControl`，因此将执行绘制。

# c# - MonoTouch 电池电量 始终 -1

> ID：10268731
> 
> 赞同：2
> 
> 时间：2012-04-22T14:21:07.180
> 
> 标签：c#, ios, xamarin.ios, power-management, uidevice

`BatteryMonitoringEnabled`在访问电池信息之前，我设置为 True。

文档说只有在没有启用监控的情况下才应该返回 -1 。

但是，尽管我启用了监视，但我总是将 -1 作为`BatteryLevel`property 的值，将 Unknown 作为。`BatteryState`

```
UIDevice.CurrentDevice.BatteryMonitoringEnabled=true;

Console.WriteLine (UIDevice.CurrentDevice.BatteryLevel.ToString()); 
```

结果-1

```
Console.WriteLine (UIDevice.CurrentDevice.BatteryState.ToString()); 
```

结果“未知”

我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T15:30:05.727

这对我有用。你能在 iOS 模拟器中运行它吗？如果是这样，您所观察到的将是正常结果。

如果您不能这样做，请填写错误报告[@http://bugzilla.xamarin.com](http://bugzilla.xamarin.com)并说明正在使用的 MonoTouch 版本、设备、iOS 版本。

# android - 如何在 Android 中分离相机和 GUI？

> ID：10268734
> 
> 赞同：1
> 
> 时间：2012-04-22T14:21:18.640
> 
> 标签：android, user-interface, camera, encapsulation

我有一个使用 Android 相机的应用程序。

我想实现一个`CameraManager`类之类的东西，它将处理与相机、打开、关闭、相机参数和帧缓冲区有关的所有事情。

问题是，我想`CameraManager`从 GUI 中分离出来，但在 Android 中，摄像头似乎与 GUI 不可分离，因为您需要一个`surfaceView`来获得预览。

我的一个想法是，在初始化之后将`CameraManager`a 返回`surfaceView`给 GUI 管理器`CameraManager`，然后让 GUI 管理器处理所有事情。但是，它还不够分离，因为相机管理器仍在接触 GUI 的东西。

关于如何设法最大化这种封装的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T23:53:35.123

为什么不使用建议的 Google 方法并在 XML 中实现视图。创建两个自定义表面视图（在我的例子中，一个是 GLSurfaceView，另一个是 SurfaceView）。一个视图实现相机，第二个视图可以处理带有图形和/或按钮的 GUI。关键是在 XML 中创建自定义 GLSurfaceView 和 SurfaceView，使用扩展的 SurfaceView 和 GLSurfaceView 的类名。此外，您必须使 GUI 视图透明。请注意，图形是在 MainRenderer 类中绘制的，此处未包括。请注意，下面的代码存在 OpenGL 上下文丢失问题，我正在努力修复。下面显示的代码应该足以帮助您开始工作，但如果没有 mods，它将无法单独运行......下面的大部分代码都来自 Googles OpenGl Tutorial

[OpenGL ES 1.0 教程](http://developer.android.com/resources/tutorials/opengl/opengl-es10.html)

用我自己的模组把所有东西分开。

这是 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >                         
<com.zypath.opengltest.MainSurfaceView
    android:id="@+id/glSurfaceView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />                                       
<com.zypath.opengltest.CameraView
    android:id="@+id/camera"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:keepScreenOn="true" />
<LinearLayout
    android:id="@+id/status"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <TextView
         android:id="@+id/mangle"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:text="@string/mangle"
         android:textColor="@color/mcolor" />                       
</LinearLayout> 
```

主要代码的一部分：

```
 public class Main extends Activity {
  ...

   @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // When working with the camera, it's useful to stick to one orientation.
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    //Set full screen
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.main);

    //Substantiate surfaces
    cameraView = (CameraView) findViewById(R.id.camera);
    mGLView = (MainSurfaceView) findViewById(R.id.glSurfaceView);        

    //Initialize TextViews
    txtView = (TextView) findViewById(R.id.mangle);
    txtView.setText("Angle: " + String.valueOf(mAngle)); 

} 
```

自定义 MainSurfaceView 的一部分

```
 public class MainSurfaceView extends GLSurfaceView {
...

//Constructor
public MainSurfaceView(Context context, AttributeSet attrs) {       
    super(context, attrs);
    this.context = context;

    mRenderer = new MainRenderer();
    setEGLConfigChooser(8, 8, 8, 8, 16, 0); 

    setRenderer(mRenderer);
    getHolder().setFormat(PixelFormat.TRANSLUCENT);    

    setZOrderOnTop(true);

    //Render only when there is a change
    setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);         
}

//TouchEvent handler
  @Override
public boolean onTouchEvent(MotionEvent event) {

    x = event.getX();
    y = event.getY();

    .....

    return true;
} 
```

相机代码的一部分：

```
 public class CameraView extends SurfaceView implements SurfaceHolder.Callback {
  ...
private Camera camera;
SurfaceHolder holder;

public CameraView(Context context, AttributeSet attrs) {
    super(context, attrs);
    // We're implementing the Callback interface and want to get notified
    // about certain surface events.
    getHolder().addCallback( this );
    // We're changing the surface to a PUSH surface, meaning we're receiving
    // all buffer data from another component - the camera, in this case.
    getHolder().setType( SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS );
}

public void surfaceCreated( SurfaceHolder holder ) {
    // Once the surface is created, simply open a handle to the camera hardware.
    camera = Camera.open();
}

public void surfaceChanged( SurfaceHolder holder, int format, int width, int height ) {

        camera.setPreviewDisplay( holder );

    camera.startPreview();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:15:13.860

将表面视图作为参数传递给 CameraManager 构造函数。我希望你让经理开源:)

编辑：这是我在旧项目中使用的（分享是一件好事：P）

```
相机视图

包 at.fhb.triangulate.gui；
导入android.content.Context；
导入android.content.res.Resources.Theme；
导入android.view.View；
导入 at.fhb.triangulate.main.TriangulateMain；

/*
 * 版权所有 (C) 2007 Android 开源项目
 *
 * 根据 Apache 许可证 2.0 版（“许可证”）获得许可；
 * 除非遵守许可，否则您不得使用此文件。
 * 您可以在以下网址获取许可证的副本
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * 除非适用法律要求或书面同意，否则软件
 *根据许可分发是在“原样”基础上分发的，
 * 不提供任何明示或暗示的保证或条件。
 * 请参阅许可证以了解特定语言的管理权限和
 * 许可证下的限制。
 */

导入android.app.Activity；
导入android.content.Context；
导入android.graphics.Canvas；
导入android.hardware.Camera；
导入android.hardware.Camera.Size；
导入android.os.Bundle；
导入android.view.SurfaceHolder；
导入android.view.SurfaceView；
导入android.view.Window；

导入 java.io.IOException；
导入 java.util.List；

公共类 CameraView 扩展 SurfaceView 实现 SurfaceHolder.Callback {
    SurfaceHolder mHolder；
    相机 mCamera;

    公共CameraView（上下文上下文）{
        超级（上下文）；

        // 安装一个 SurfaceHolder.Callback 以便我们在
        // 创建和销毁底层表面。
        mHolder = getHolder();
        mHolder.addCallback(this);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    公共无效surfaceCreated（SurfaceHolder持有人）{
        // Surface 已创建，获取相机并告诉它在哪里
        // 绘制。
        mCamera = Camera.open();
        尝试 {
           mCamera.setPreviewDisplay(holder);
        } 捕捉（IOException 异常）{
            mCamera.release();
            mCamera = null;
            // TODO: 在此处添加更多异常处理逻辑
        }
    }

    公共无效surfaceDestroyed（SurfaceHolder持有人）{
        // 返回时 Surface 将被销毁，因此停止预览。
        // 因为CameraDevice对象不是共享资源，所以非常
        // 当活动暂停时释放它很重要。
        mCamera.stopPreview();
        mCamera = null;
    }

    公共无效surfaceChanged（SurfaceHolder持有人，int格式，int w，int h）{
        // 现在知道大小，设置相机参数并开始
        // 预览。
        Camera.Parameters 参数 = mCamera.getParameters();
        参数.setPreviewSize(w, h);
       // parameters.set("orientation", "portrait");

        mCamera.setParameters(参数);
        mCamera.startPreview();
    }

}

```

# visual-studio-2010 - 如何在 VS10 中使用 SQL Server Data Tools 更改身份验证模式？

> ID：10268735
> 
> 赞同：1
> 
> 时间：2012-04-22T14:21:28.817
> 
> 标签：visual-studio-2010, sql-server-2008, sql-server-data-tools

我使用 SSDT（SQL Server Data Tools）在 vs10 中管理我的数据库。但是在创建一个像“CREATE LOGIN netease WITH PASSWORD = '854032390'”这样的登录帐户后，我试图添加一个服务器，问题发生了——登录失败。我通过互联网寻找解决方案，我想知道如何在 VS10 中使用 SQL Server Data Tools 更改身份验证模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:38:42.027

只需在发布配置文件中编辑连接字符串。

# java - appengine java中的线程/后端

> ID：10268736
> 
> 赞同：0
> 
> 时间：2012-04-22T14:21:29.803
> 
> 标签：java, google-app-engine

我想在应用引擎中连续运行某种线程。该线程所做的是检查哈希图并根据某些业务不断更新条目。

我的 hashmap 是 X 类的公共成员变量。X 是单例类。

现在我知道 appengine 不支持 Thread 并且它有一些称为后端的想法。

现在我的问题是：如果我 24*7 连续运行后端，我会被收费吗？后端没有繁重的处理。它只是根据某些条件更新哈希图。我可以应用一些技巧以便不收费吗？我的 webapp 不用于商业用途，仅供娱乐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:12:52.817

是的，后端按小时计费。使用多少并不重要：[https ://developers.google.com/appengine/docs/billing#Billable_Resource_Unit_Costs](https://developers.google.com/appengine/docs/billing#Billable_Resource_Unit_Costs)

您是否需要立即进行此计算？您可以运行一个 cron 作业，例如每 5 分钟并执行该任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-02T09:02:25.403

或者您也可以将 10 分钟的任务排入队列，并在接近 10 分钟的限制时间时重新排入队列。为此，您可以使用任务参数将流程状态传递给下一个任务，也可以使用数据存储。

# c++ - C++11 原子和侵入式共享指针引用计数

> ID：10268737
> 
> 赞同：20
> 
> 时间：2012-04-22T14:21:31.657
> 
> 标签：c++, c++11, shared-ptr, atomic

我正在编写侵入式共享指针，并且正在使用 C++11`<atomic>`工具作为引用计数器。以下是我的代码的相关片段：

```
//...
mutable std::atomic<unsigned> count;
//...

void
SharedObject::addReference() const
{
    std::atomic_fetch_add_explicit (&count, 1u,
        std::memory_order_consume);
}

void
SharedObject::removeReference() const
{
    bool destroy;

    destroy = std::atomic_fetch_sub_explicit (&count, 1u,
        std::memory_order_consume) == 1;

    if (destroy)
        delete this;
} 
```

我从`memory_order_acquire`and `memory_order_release`first 开始，但后来我说服自己`memory_order_consume`应该足够好。经过进一步审议，在我看来，甚至`memory_order_relaxed`应该工作。

现在，问题是我是否可以使用`memory_order_consume`这些操作，或者我可以使用较弱的排序 ( `memory_order_relaxed`) 还是应该使用更严格的排序？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-22T15:26:57.760

```
void
SharedObject::addReference() const
{
    std::atomic_fetch_add_explicit (&count, 1u, std::memory_order_relaxed);
}

void
SharedObject::removeReference() const
{
    if ( std::atomic_fetch_sub_explicit (&count, 1u, std::memory_order_release) == 1 ) {
         std::atomic_thread_fence(boost::memory_order_acquire);
         delete this;
    }
} 
```

您想使用`atomic_thread_fence`严格`delete`在 . 之后的`fetch_sub`. [参考](http://www.chaoticmind.net/~hcb/projects/boost.atomic/doc/atomic/usage_examples.html#boost_atomic.usage_examples.example_reference_counters)

引用链接文本：

> 始终可以使用 memory_order_relaxed 增加引用计数器：对对象的新引用只能从现有引用形成，并且将现有引用从一个线程传递到另一个线程必须已经提供任何所需的同步。
> 
> 在删除另一个线程中的对象之前，强制在一个线程中（通过现有引用）对对象进行任何可能的访问，这一点很重要。这是通过删除引用后的“释放”操作（显然之前必须通过此引用访问对象）和删除对象之前的“获取”操作来实现的。
> 
> 可以将 memory_order_acq_rel 用于 fetch_sub 操作，但是当引用计数器尚未达到零时，这会导致不需要的“获取”操作，并且可能会造成性能损失。

# ruby-on-rails - 使用 Ember Data 和 Rails 后端的示例应用程序

> ID：10268741
> 
> 赞同：18
> 
> 时间：2012-04-22T14:21:48.170
> 
> 标签：ruby-on-rails, ember.js, ember-data

任何使用 ember 数据推荐的示例应用程序？理想情况下与 Rails 后端和模型关联。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T03:14:22.157

我一直以这个应用程序为例： [https ://github.com/dgeb/ember_data_example](https://github.com/dgeb/ember_data_example)

这篇博文也有很好的方向： [Ember Data and Rails 入门](http://timpark.io/2012/04/11/getting-started-with-ember-data-and-rails/)

[通过查看 Ember-Data 项目的文档](https://github.com/emberjs/data/blob/master/README.md)和[测试](https://github.com/emberjs/data/tree/master/packages/ember-data/tests/integration)，我能够理解关联：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:47:23.320

我发现这段代码非常有用。很好地分割成单独的文件和一个写得很好的路由器。完全反映 CRUD 行为。

[https://github.com/bazzel/ember-sample2](https://github.com/bazzel/ember-sample2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T20:24:34.217

稍微过时和简单化，但我会很快将其更新到修订版 10：

[http://github.com/mehulkar/teams](http://github.com/mehulkar/teams)

# xml - 如何使用 Perl::XML::Split 正确地将大型 XML 文件拆分为更小的块？

> ID：10268742
> 
> 赞同：-2
> 
> 时间：2012-04-22T14:21:57.257
> 
> 标签：xml, perl, parsing

我有一个文件太大而无法使用 - 它是一个几乎 100 MB 的 xmlfile

现在我想用 xml_split 分割它

该文件名为 Germany-test.xml 并且有近 100 MB - 我希望将其拆分为 5 MB

我在终端中有以下代码：

```
germany-test.xml | xml_split -s 5M -b germany -n 3 - 
```

我得到了结果：

```
syntax error at line 1, column 0, byte 0 at /usr/lib/perl5/vendor_perl/5.14.2/i586-linux-thread-multi/XML/Parser.pm line 187
martin@linux-wyee:~/gis/test/test2> 
```

这里出了什么问题？任何指向正确方向的指针将不胜感激......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:23:58.663

您确定这是您收到的全部错误消息吗？除非你有`.`你的 $PATH （你不应该），它更有可能从：

```
germany-test.xml: command not found 
```

您可以这样做`cat germany-test.xml | xml_split -s 5M -b germany -n 3 -`，但这可能符合[UUOC](http://en.wikipedia.org/wiki/Cat_%28Unix%29#Useless_use_of_cat)的条件，因此 `xml_split -s 5M -b germany -n 3 germany-test.xml`可能是最好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T15:56:16.130

管道的第 1 行第 0 列第 0 字节存在语法错误，看起来构造错误。

`xml_split … germany-test.xml`运行或之一`xml_split … < germany-test.xml`。

# ruby-on-rails - 我有一个 ruby on rails web 应用程序在 3000 端口工作我想让它在 80 端口工作

> ID：10268743
> 
> 赞同：1
> 
> 时间：2012-04-22T14:22:00.880
> 
> 标签：ruby-on-rails, iis, port

我有一个 ruby​​ on rails web 应用程序在端口 3000 上工作 我想让它在端口 80 上工作 实现它的最简单方法是什么？

我试图在文件中更改端口 3000

> C:\Ruby187\lib\ruby\gems\1.8\gems\mongrel-1.1.5-x86-mingw32\bin\mongrel_rails

但是每件事都崩溃了，所以我把它改回了 3000

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T17:13:32.763

由于您使用的是 rails 1.8.7。你应该这样做`mongrel_rails start -p 80`

您还可以通过以下方式找到更多可用选项`mongrel_rails start -h`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T14:48:46.233

您可以使用 -p 参数指定所需的端口

```
rails s -p 80 
```

# php - CodeIgniter 缓存驱动程序忽略备份适配器

> ID：10268745
> 
> 赞同：2
> 
> 时间：2012-04-22T14:22:33.060
> 
> 标签：php, codeigniter, caching, apc, fatal-error

我正在尝试使用 CodeIgniter 在其 PHP 框架中提供的缓存驱动程序。但是，它似乎完全忽略了备份适配器。

如果我使用：

```
$this->load->driver('cache', array('adapter' => 'apc', 'backup' => 'dummy')); 
```

然后我假设它会在可用的情况下使用 APC，否则它将回退到虚拟缓存（什么也不做）。这显然非常方便，因为不是每个人都会安装 APC。

情况似乎并非如此-因为在测试以下代码时出现错误：

```
if(!$config = $this->cache->get('config')) {

    //Get config from database
    $config = $this->db->from('core')->get()->row_array();

    //Cache it
    $this->cache->save('config', $config, 600); 
} 
```

( `Fatal error: Call to undefined function apc_cache_info()`)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:19:09.323

GitHub 问题跟踪器上有两个与此问题相关的活动拉取请求：

[https://github.com/EllisLab/CodeIgniter/pull/661](https://github.com/EllisLab/CodeIgniter/pull/661)

[https://github.com/EllisLab/CodeIgniter/pull/1403](https://github.com/EllisLab/CodeIgniter/pull/1403)

它们都有点不同，虽然其中一个看起来很旧（我没有注意到），但最近的第二个问题可能就在你的小巷里。

如果您可以验证其中任何一个修复程序，请给拉取请求 +1，我将合并它。

不久前我遇到了一个问题，我想在没有正确安装它的服务器上使用 Memcache，而不是退回到文件它只是对我发脾气，但我从来没有找到时间修复它。如果这是同一个问题，那就太好了，我可以将它合并。

# html - 当显示页面出现在列表视图中时，后退按钮被隐藏

> ID：10268747
> 
> 赞同：0
> 
> 时间：2012-04-22T14:22:46.490
> 
> 标签：html, css, jquery-mobile

我有以下 jQuery 移动代码

`<ul data-role="listview" data-dividertheme="b">
<g:each in="${categoryList}" var="category">
<li> <img src="../images/${category.imageName}"/>
<h3 class="ul-li-heading">${category.name}</h3>
<ul>
<g:if test="${category.userCategories}">
<g:each in="${category.userCategories}" var="ads">
<li>
Category: ${ads.category}
</li>
<li>
User: ${ads.user?.name}
</li>
<li>
Option: ${ads.optionName}
</li>
<li> Description: ${ads.description}
</li>
<hr/> </g:each>
</g:if>
<g:else>
<br/><br/><br/><br/>
<li> No User Category Description Added To Show </li>
</g:else>
</ul>
</li>
</g:each>
<div class="paginateButtons">
<g:paginate total="${categoryInstanceTotal}"/> </div> </ul>`

问题是代码工作正常，因为您看到它首先呈现一个实际上是缩略图视图的列表，当我单击缩略图时，显示按钮会显示其他信息。但是，问题是自动添加的后退按钮与内容一起包装，我无法增加自动生成以下代码的后退按钮 div 的大小。

`<div class="ui-bar-b ui-header" data-theme="b" data-role="header" role="banner">`
它的高度是 22，如果我用 firebug 增加它会增加，但是当我尝试应用 css 时，它不起作用。
任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:23:08.250

您可以添加`!important`到您的 CSS 声明中，也可以创建比 jQuery Mobile 规则更具体的规则（它们故意使之成为可能）：

```
.ui-mobile .ui-page .ui-header {
    height : 100px;
}
.ui-mobile .ui-page .ui-header a {
    height : 90px;
}​ 
```

演示：http: [//jsfiddle.net/cAr7w/](http://jsfiddle.net/cAr7w/)

`.ui-mobile`指jQuery Mobile初始化后的HTML元素，`.ui-page`指伪页面元素，`.ui-header`指每个伪页面内的header元素。

# c# - C# 抽象基类 - 扩展实现

> ID：10268749
> 
> 赞同：1
> 
> 时间：2012-04-22T14:22:59.657
> 
> 标签：c#, abstract, extend, base

我有以下情况：

```
 public class GeoLocation
   {
       public double Longitude { get; set; }
       public double Latitude { get; set; }
       public string LocationName { get; set; }
   }

    public abstract class Base
    {
        public abstract GeoLocation GeoLocation { get; set; }
    }

    public class Concrete : Base
    {
        public override GeoLocation GeoLocation
        {
            get;
            set;
        }
    } 
```

现在，如果我创建一个`Concrete2`也继承自的类，`Base`并且我希望该`GeoLocation`对象还有 1 个属性：

```
public string Address{ get; set; } 
```

实现这一点的最佳方法是什么？

我可以创建一个名为的新类`GeoLocationEx : GeoLocation`并在其中放置`Address`属性，但是在我的 Concrete2 对象中，我将有 2 个属性：`GeoLocation`并且`GeoLocationEx`我不喜欢这些属性...

我也可以将 GeoLocation 类设为部分类，并使用该类的`Address`属性对其进行扩展，`Concrete2`但我不确定这是否是对部分类的“正确”使用。

最好的方法是什么？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:36:33.837

您可能可以使用泛型：

```
 public class GeoLocation
        {
            public double Longitude { get; set; }
            public double Latitude { get; set; }
            public string LocationName { get; set; }
        }

        public class GeoLocationEx : GeoLocation
        {
            public double Address { get; set; }
        }

        public abstract class Base<T>
        {
            public abstract T GeoLocation { get; set; }
        }

        public class Concrete : Base<GeoLocation>
        {
            public override GeoLocation GeoLocation
            {
                get;
                set;
            }
        }

        public class Concrete2 : Base<GeoLocationEx>
        {
            public override GeoLocationEx GeoLocation
            {
                get;
                set;
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T14:35:51.023

```
public class GeoLocation
{
    public GeoLocation(GeoLocation obj) {/* implement a copy constructor */}
    public GeoLocation() {/* default constructor */}

    public double Longitude { get; set; }
    public double Latitude { get; set; }
    public string LocationName { get; set; }
}

public class GeoLocationEx : GeoLocation
{
    public string Address { get; set; }
}

public abstract class Base
{
    public abstract GeoLocation GeoLocation { get; set; }
}

public class Concrete2 : Base
{
    private GeoLocationEx _geoLocation;
    public override GeoLocation GeoLocation
    {
        get { return _geoLocation; }
        set
        {
            _geoLocation = new GeoLocationEx(value);
        }
    }
} 
```

现在在`Concrete2`类中，您可以直接使用私有`GeoLocationEx`字段。`Concrete2`此外，您可以为特定的东西公开其他公共方法。

关于编写复制构造函数，请参考 MSDN：http: [//msdn.microsoft.com/en-us/library/ms173116 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173116(v=vs.80).aspx)

# c - zval 之类的东西在哪里定义？

> ID：10268750
> 
> 赞同：1
> 
> 时间：2012-04-22T14:23:11.243
> 
> 标签：c, eclipse, eclipse-cdt, php-extension

我正在尝试使用 Eclipse 和 CDT 开发 PHP 扩展，但扩展代码报告为充满语法错误和警告。`include`我设法通过告诉CDT查找PHP目录和PHP源代码中的目录来摆脱其中的一部分`main`，这解决了所有包含，但仍然存在很多问题。

具体来说，我在哪里可以找到`zval`、`SUCCESS`、`FAILURE`、`STANDARD_MODULE_PROPERTIES`、`zend_module_entry`和`zend_function_entry`的定义`zend_parse_parameters`？如何让 CDT 不标记`<module name>`，`<module name>_functions`并`return_value`作为无法解析的符号？

有没有更好的方法来使用 IDE 开发 PHP 扩展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:36:56.107

在哪里可以找到：

```
typedef struct _zval_struct zval;                     : ./Zend/zend.h
struct _zval_struct {                                 : ./Zend/zend.h
SUCCESS                                               : ./Zend/zend.h
FAILURE                                               : ./Zend/zend.h
STANDARD_MODULE_PROPERTIES                            : ./Zend/zend_modules.h
typedef struct _zend_module_entry zend_module_entry;  : ./Zend/zend_modules.h
struct _zend_module_entry { :                         : ./Zend/zend_modules.h
typedef struct _zend_function_entry {
…
} zend_function_entry;                                : ./Zend/zend_API.h
zend_parse_parameters(                                : ./Zend/zend_API.c 
```

如果您想查看这样的 PHP 源代码，我建议您将 ie Vim 与`cscope`. 然后你所要做的就是在 ie 上有标记`zval`，输入两个键，它会跳转到定义。

* * *

从快速谷歌看来，Eclipse 也有一些 cscope 支持等。`Search workspace`? 我猜它需要您将 PHP 源代码加载到工作区。

说到CDT，我不知道。从来没有用过。

* * *

编辑：

出于好奇和需要了解CDT而看了一下。

*   创建了一个标准的 C 项目。
*   右键项目
    *   路径和符号
        *   源位置；添加了 PHP 目录。
*   右键项目
    *   指数
        *   重建（大来源所以需要一段时间）

现在我可以说 ie`zend_parse_param` `Ctrl``Space`并自动完成。或`zend_parse_parameters(` `Ctrl``Space`。

或选择`Search`->`C/C++...`并选择即“定义”，文本“zval” -> 搜索并获取定义。

或键入`zva` `Ctrl``Space`并获取`zval`等。

您也可以右键单击 PHP 源`Project Explorer`并选择 ie`Exclude from build`等。

# c# - 如何关闭和停止表单活动。

> ID：10268754
> 
> 赞同：0
> 
> 时间：2012-04-22T14:23:22.787
> 
> 标签：c#, winforms

我在 c# 中开始了一个游戏项目，但遇到了一个问题。在游戏中有一个带有按钮的地图表单，当您点击一个按钮时，一个新表单会打开。我的问题是我完成后不知道如何关闭表单（字段）活动。this.close() 对工作不起作用，即使我看不到它，表单也会继续工作。

```
private void Charmove_Load(object sender, EventArgs e)
    {
          .
          .
          Messagebox.show("you won the stage well done");
          this.close();//problem
           g.show;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:29:45.170

你的游戏使用`Timer`? 如果是这样，那么在关闭表单之前停止它。

```
private void Charmove_Load(object sender, EventArgs e)
{
    ...
    timer1.Stop();
    Messagebox.Show("You've won the stage. Well done!");
    this.Close();
    g.Show();
} 
```

# java - 试图显示在一个 jpanel 中创建的变量并在另一个 jpanel 中显示

> ID：10268757
> 
> 赞同：1
> 
> 时间：2012-04-22T14:24:00.157
> 
> 标签：java, netbeans, jpanel, jtextfield

我是一名编写青蛙游戏的学生，当青蛙与物体碰撞或到达终点区域时，分数会增加或生命值减少，然后青蛙会回到起始位置。这部分工作，并且在将它们输出到控制台时减少和增加工作，我尝试将变量传递给另一个 jpanel 并在那里显示它，但它不会更新并在 textField 中显示变量。

游戏面板

```
 public GamePanel() {
    super();
    setFocusable(true);
    addKeyListener(new KeyList());
    System.out.println("GAME PANE FOCUS:" + this.isFocusOwner());

    scores.setVisible(true);
    lives = p.STARTLIVES;
    scores.setCurrentLives(lives);
    txtTest.setText("Hello");
    txtTest.setVisible(true);
    add(scores,new AbsoluteConstraints(0,550,50,800));
    Boolean displayable = scores.isDisplayable();
    System.out.println("Displayable" + displayable);

    scores.setEnabled(false);
    scores.revalidate();
    scores.repaint();
    scores.setVisible(true);

    System.out.println("Displayable" + displayable);

   car1.start();
   car2.start();
   car3.start();
   car4.start();
   Log1.start();
   Log2.start();
   Log3.start();
   Log4.start();
   Log5.start();
   Log6.start();
   Log7.start();
   Log8.start();

    //check for collisions
}

final public void winZone(Rectangle object){

    if(myFrog.frogArea().intersects(object)){
        currentScore = currentScore + 100;
        System.out.println("current Score " + currentScore);
        p.setScore(currentScore);
        scores.myScore().setText("hello");

        myFrog.lostLife();
    } 
```

分数面板

```
public class jplScores extends JPanel {
 Properties p = new Properties();
 int currentLives;
 int i;

/** Creates new form jplScores */
public jplScores() {
    initComponents();

}
public void setCurrentLives(int Lives){
 currentLives = Lives;
}
public String getCurrentLives(){
    String L = Integer.toString(currentLives);
    return L;
}

public JTextField myScore(){
    return txtScore;
} 
```

目前它会从他们都在的框架中显示jpanel，但我试图让它成为面板中的一个面板，但我无法让面板从游戏面板中显示。

任何帮助都会非常感谢

```
 public FroggerGame() {

    initComponents();
    setFocusable(true);
    //repaint();
   // p.setHeight(550);
   // p.setWidth(800);
   // p.setLives(3);
   // p.setScore(0);
    PANELHEIGHT = p.getHeight();
    PANELWIDTH = p.getWidth();
    welcomePanel();

    /*
    Toolkit tool = Toolkit.getDefaultToolkit();
    imgBackground = tool.getImage(imageBackground);
    background = new ImageIcon(imgBackground);
    //setDefaultCloseOperation(EXIT_ON_CLOSE);
    */

    jps.myScore().addPropertyChangeListener(new java.beans.PropertyChangeListener() {
        public void propertyChange(java.beans.PropertyChangeEvent evt) {
           // txtScorePropertyChange(evt);

    jps.myScore().setText(Integer.toString(gp.currentScore()));
    System.out.println(Integer.toString(gp.currentScore()));

    jps.getScore(gp.currentScore());
    System.out.println(" main score " + gp.currentScore());
        }
    });

} 
```

……

```
private void btnEnterActionPerformed(ActionEvent evt) {

    welcomePanel.setVisible(false);
    getContentPane().setLayout(new AbsoluteLayout());
    getContentPane().add(gp,new AbsoluteConstraints(0,0,800,550));
    getContentPane().add(jps,new AbsoluteConstraints(0,550,800,100));

    //gp.setSize(800, 550);
   // gp.setBounds(0, 0, 800, 550);
    gp.setVisible(true);
    gp.requestFocusInWindow();

    jps.setVisible(true); 
```

gp 是游戏面板，jps 是得分面板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:27:38.630

这实际上与“面板”或 Swing GUI 编码几乎没有关系，而是与将信息从一个类传递到另一个类的基本 OOPS 问题有关。解决这个问题的一种方法是给你的分数面板一个公共方法，比如

```
public void changeScore(int value) {
   // in here add the new value to the currently 
   // displayed value and display the new value.
} 
```

然后是主类，即带有分数面板引用的类，您可以调用此方法，如果分数增加则传入 1，如果分数减少则传入 -1。

我认为这是“推送”解决方案，其中一个类将信息推送到另一类。解决此问题的另一种方法是通过侦听器，其中 Scores 类侦听其他类的关键属性，然后在发生适当事件时更改其自己的分数，这通常涉及使用 PropertyChangeListeners 或其他更特定于 Swing 的侦听器类。这有时是一个更好的解决方案，但我认为它是一个更高级的概念。

# php - php://input 因大文件而失败

> ID：10268761
> 
> 赞同：3
> 
> 时间：2012-04-22T14:24:23.900
> 
> 标签：php, file-upload, upload

我正在使用带有 ajax 和 PHP 的上传脚本，它对于小于 80MB 的文件非常有用。但是，如果文件大于 80MB，它就会失败，它甚至根本不会输出任何东西。

代码是：

```
$maxsize = getMaxFileSize();
$finalfile = $uploadpath . $finalname;
$putdata = fopen("php://input", "r");
$fp = fopen($finalfile, "w");
$filesizecalc = 0;
while ($data = fread($putdata, 1024)) {
    fwrite($fp, $data);
    $filesizecalc = $filesizecalc + 1024;
}

fclose($fp);
fclose($putdata);
if ($filesizecalc <= $maxsize) {
    addFile($_SESSION['userdata']['userid'], $finalname);
    echo "$fn uploaded";
} else {
    unlink($finalfile);
}
exit(); 
```

这适用于几乎所有 < 80 MB 的文件，但对于大于 80 MB 的文件，它不会输出任何东西，所以我什至不知道出了什么问题，即使我设置了

```
error_reporting(E_ALL | E_NOTICE);
ini_set('display_errors', 1);
ini_set('memory_limit', '1024M');
ini_set('upload_max_filesize', '1024M');
ini_set('post_max_size', '1024M');
ini_set('max_input_time', 10000);
ini_set('max_execution_time', 10000); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T15:13:15.977

让我们把它写下来作为解决方案，这样它就可以被正确阅读，而不是在评论中挖掘。

*   在 ini_set 命令之后检查您的 php_info()，一些配置变量无法从脚本中更改，有 ~ 6 个不同的值控制大上传。检查所有这些（可以在[此处](http://www.radinks.com/upload/config.php)找到列表和示例）
*   在 apache error_log 文件中检查真正的错误。（或检查 access_log 以查看服务器返回的请求状态是什么）
*   可能有一些应用程序防火墙或 apache 配置限制了请求时间。在这种情况下，您将看到响应代码，例如“连接重置”。

试试[W3Scools 上传脚本](http://www.w3schools.com/php/php_file_upload.asp)：

```
<?php
if (true)
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br />";
    echo "Type: " . $_FILES["file"]["type"] . "<br />";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
      }
    }
  }
else
  {
  echo "Invalid file";
  }
?> 
```

# r - 使用 R 绘制每个用户的每日消息，给定列出所有消息的数据框

> ID：10268762
> 
> 赞同：1
> 
> 时间：2012-04-22T14:24:44.997
> 
> 标签：r

给定一个表示如下消息的数据框：

```
df <- structure(list(message.id = c(123L, 456L), user.id = c(999L, 888L), 
      message.date = structure(c(1310950467, 1311119810), class = c("POSIXct", 
      "POSIXt"), tzone = "")), .Names = c("messageid", "user.id", 
      "message.date"), row.names = c(NA, -2L), class = "data.frame")

head(df)
message.id   user.id    message.date         
123         999       2011-07-17 17:54:27
456         888       2011-07-19 16:56:50 
```

假设某些用户有很多消息而其他用户很少（例如帕累托分布），您将如何绘制每个用户的每日平均消息数。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T16:37:46.120

您的示例非常小，无法真正使用，因此我模拟了一个应该相同的更大数据框：

```
set.seed(1)
start <- strptime("2012-01-01 00:00:00",format="%Y-%m-%d %H:%M:%S")
end <- strptime("2012-03-01 00:00:00",format="%Y-%m-%d %H:%M:%S")

df <- data.frame(
  message.id = 1:1000,
  user.id = sample(1:10,1000,TRUE,prob=1:10),
  message.date = seq(start,end,length=1000)) 
```

然后首先我们需要将日期提取为日期（而不是 POSIXt）：

```
df$date <- as.Date(df$message.date) 
```

然后我认为我们可以`plyr`用来计算每个用户每天的平均消息数，如下所示：

```
library("plyr")
df2 <- ddply(df,.(user.id),summarize,AvPerDay = mean(sapply(seq(min(df$date),max(df$date),by="day"),function(x)sum(date==x)))) 
```

新的数据框`df2`给了我：

```
 user.id  AvPerDay
1        1 0.3278689
2        2 0.6229508
3        3 0.9836066
4        4 1.1311475
5        5 1.3442623
6        6 1.8524590
7        7 1.8032787
8        8 2.8032787
9        9 2.5081967
10      10 3.0163934 
```

要绘制它，您可以制作一个条形图：

```
barplot(df2$user.id,df2$AvPerDay) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T16:42:57.463

Sacha的更好，但当我看到他的回答时，我刚刚完成。这是一种可能的基本方法：

```
#Make my own data
set.seed(15)
df <- data.frame(messageid= sample(1:1000, 1000), user.id = 
    rep(901:925, each=40), message.date = sample(seq(Sys.time(), 
    length.out = 10000, by = "hours"), 1000, replace=T))

#Make a date column
df$date <- unlist(strsplit(as.character(df$message.date), " "))[c(T, F)]

#split on user id
pidLIST <- split(df, df[, 'user.id'])
#sum and get an average by date
df2 <- data.frame(user.id=as.factor(names(pidLIST)), 
    aveMESS = sapply(seq_along(pidLIST), 
    function(i) mean(aggregate(user.id~date, pidLIST[[i]], length)[, 2])))

plot(df2) 
```

正如你所知道的，我不经常使用日期。

***PS 当您提供一个最小的可重现示例（如果它足够大以供使用）时，它会很有帮助。Sacha 和我都必须重新创建我们自己的数据集。***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:47:21.953

尝试不同的方法，我尝试了这个图：每天的箱线图显示用户消息计数的分布，以及连接每个用户的平均消息数的线。这是目标情节：

![每天用户消息的分布和平均值](../Images/0e00b4be7a10cb8841d39b0045a33e64.png)

我首先使用@Sacha Epskamp 的方法生成数据。我生成了一个大型数据集，以便为预期的情节提供一些东西

```
library("ggplot2")
library("lubridate")

# This code from Sacha Eskamp
# http://stackoverflow.com/a/10269840/1290420

# Generate a data set
set.seed(1)
start <- strptime("2012-01-05 00:00:00",
                  format="%Y-%m-%d %H:%M:%S")
end <- strptime("2012-03-05 00:00:00",
                format="%Y-%m-%d %H:%M:%S")

df <- data.frame(message.id = 1:10000,
                 user.id = sample(1:30,10000,
                                 TRUE,
                                 prob=1:30),
                 message.date = seq(start,
                                   end,
                                   length=10000)
                 ) 
```

然后我努力将数据框整理成适合情节的形状。我相信`plyr`大师将能够大大改善这一点。

```
# Clean up the data frame and add a column 
# with combined day-user
df$day <- yday(df$message.date)
df <- df[ df$day!=65, c(2,4) ]
df$day.user <- paste(df$day, df$user.id, sep="-")

# Copy into new data frame with counts for each
# day-user combination
df2 <- aggregate(df, 
                 by=list(df$day, 
                         df$day.user), 
                 FUN="length"
                 )
df2 <- df2[,c(1,2,3)]
names(df2) <- c("day", "user", "count")
df2$user <- gsub(".+-(.+)", "\\1", df2$user) 
```

然后绘制情节是简单的部分：

```
p <- ggplot(df2,
            aes(x=day,
                y=count))
p <- p + geom_boxplot(aes(group=day), colour="grey80")
p <- p + stat_summary(fun.y=mean, 
                      colour="steelblue", 
                      geom="line",
                      size=1)
p <- p + stat_summary(fun.y=mean, 
                      colour="red", 
                      geom="point",
                      size=3)
p 
```

# matlab - 如何获取 struct.somearray 包含查询数组中的元素的所有结构的列表

> ID：10268765
> 
> 赞同：0
> 
> 时间：2012-04-22T14:25:17.273
> 
> 标签：matlab

作为函数的输入，我得到了一个目标元素`T`数组 和一个结构数组，`S`其中每个结构都有一个`.elems`字段，这是一个整数（元素）列表。

我确信在 Matlab 中有一种简单的方法可以做到这一点。如何获取包含`i`特定元素的所有结构`t`的`T`索引？`S(i).elems``t`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T14:37:58.437

所以我认为你需要用一个arrayfun来做到这一点。我做了：

```
S = ... (1-by-N array of structs);
T = ... (1-by-K array of numbers);
indices = find(arrayfun(@(i)any(ismember(T, S(i).elems)), 1:numel(S))); 
```

`any(ismember(T, S(i)elems))`测试是 T 中的任何东西都在 S(i).elems 中。对`arrayfun`S 中的每个结构重复此操作。`find`从 arrayfun 返回的逻辑数组中提取索引。

# ruby-on-rails - 如何从 Rails 3 中的另一个操作调用更新操作？

> ID：10268768
> 
> 赞同：1
> 
> 时间：2012-04-22T14:26:09.260
> 
> 标签：ruby-on-rails

所以我正在编写一个基本的成员修改操作，我想，让我们保持 DRY 并只修改参数哈希然后传递给我们的`update`方法，但它似乎不起作用。我想有一些我找不到的 Rails 魔术......从我读过的内容来看，这应该有效。我正在使用 Rails 3.2。

这是我正在尝试做的一个例子：

```
 # POST /tasks/1/toggle_done
  def toggle_done
    @task = Task.find(params[:id])
    puts "<<<<<", params

    # invert done bool value
    params[:done] = !(@task.done)

    # thought maybe update_attributes retured a full set of 
    # attributes in the params...
    #params[:name] = @task.name + "...test."

    # thought maybe the method call to update was getting 
    # filtered or something. Doesn't seem to help.
    #params[:_method] = "put"
    # redirect to update with these new params

    puts ">>>>>", params

    # Why bother rewriting task.done = x; task.save; 
    # redirect_to show; etc when update already does that.
    update
  end

  # PUT /tasks/1
  # PUT /tasks/1.json
  def update
    @task = Task.find(params[:id])

    puts "======", params

    respond_to do |format|
      if @task.update_attributes(params[:task])
        format.html { redirect_to @task, notice: 'Task was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @task.errors, status: :unprocessable_entity }
      end
    end
  end 
```

我得到以下控制台输出：

```
<<<<<
{"_method"=>"post", "authenticity_token"=>"CVqzsJfSVgM7Bq/kXlrjzkWVoA7Pbne4GNEHqbQB42s=", "action"=>"toggle_done", "controller"=>"tasks", "id"=>"1"}
>>>>>
{"_method"=>"put", "authenticity_token"=>"CVqzsJfSVgM7Bq/kXlrjzkWVoA7Pbne4GNEHqbQB42s=", "action"=>"toggle_done", "controller"=>"tasks", "id"=>"1", "done"=>false, "name"=>"Put Done button in index view...test."}
======
{"_method"=>"put", "authenticity_token"=>"CVqzsJfSVgM7Bq/kXlrjzkWVoA7Pbne4GNEHqbQB42s=", "action"=>"toggle_done", "controller"=>"tasks", "id"=>"1", "done"=>false, "name"=>"Put Done button in index view...test."} 
```

所以看起来 params 数组设置正确。它使用 Flash 消息“任务已成功更新。”呈现常规`show`视图，因此看起来整个方法都已执行，但没有任何模型属性发生更改。我猜 update_attributes 里面的东西失败了。任何人都可以为我阐明这一点吗？

这也是一件疯狂的事情吗？我应该在我的 toggle_done 方法中设置和保存而不是链接更新吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T14:42:17.980

Rails 将任务对象的属性保存在 hash 中`params[:task]`。因此，您`toggle_done`需要在方法中保存结果，`params[:task][:done]`否则 rails 无法将`done`属性与任务相关联。

```
def toggle_done
  @task = Task.find(params[:id])
  params[:task] = { done: !(@task.done) }
  update
end 
```

但是通过调用 update 方法，您可以进行 3 个数据库查询，其中只有 2 个是必需的 - 前 2 个是相同的，因为您在`toggle_done`方法和`update`.

为避免这种情况，您可以将保存和重定向部分放入受保护的方法中，并在要保存时调用它。像这样：

```
def toggle_done
  @task = Task.find(params[:id])
  params[:task] =  { done: !(@task.done) }
  save_updated
end

def update
  @task = Task.find(params[:id])
  save_updated
end

protected
def save_updated
    respond_to do |format|
      if @task.update_attributes(params[:task])
        format.html { redirect_to @task, notice: 'Task was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @task.errors, status: :unprocessable_entity }
      end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T14:37:43.003

您将 params[:task] 传递给不存在的 update_attributes。尝试：

```
params[:task] = {:done => !(@task.done)} 
```

# c# - 使用 01/01/1900 00:00:00 插入的 smalldatetime 字段 DB

> ID：10268769
> 
> 赞同：1
> 
> 时间：2012-04-22T14:26:22.640
> 
> 标签：c#, datetimepicker

我希望用 c# 插入一个 smalldatetime(DB) 字段值，我使用了这段代码

```
 dataAdapter.InsertCommand = new SqlCommand("INSERT INTO journal_jour (id_emp, date, montant_acompte, heur_travaille, Absence) VALUES        (" + comboBox1.SelectedValue + "," + dateTimePicker1.Value.Date.ToShortDateString() + "," + textBox2.Text.Trim() + "," + textBox1.Text.Trim() + "," + ch + ")"
        , con); 
```

但是数据库中的字段始终填充默认值：01/01/1900 00:00:00，当我使用断点检查其值时，它做得很好，例如今天它的值是'22/04/ 2012' 提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:35:48.857

假设您的字段是数据库中的 DateTime 类型，您可以执行以下操作。它仅用于在表中插入日期，[**您应该始终在 SQL 中使用参数**](http://en.wikipedia.org/wiki/SQL_injection)。

```
SqlCommand cmd = new SqlCommand("INSERT INTO <table> (<column>) VALUES (@value)", connection);
cmd.Parameters.AddWithValue("@value", DateTime.Parse(dateTimePicker1.Value.Date.ToShortDateString()));
cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T14:35:23.040

使用 SqlParameters。你会得到两个结果。
- 防止 SQL 注入攻击
- 无需担心每种数据类型的分隔符

```
string queryText = "INSERT INTO journal_jour " +    
                   "(id_emp, date, montant_acompte, heur_travaille, Absence) " +   
                   "VALUES (@id_emp, @dtValue, @montant, @heur,@absence)";   

dataAdapter.InsertCommand = new SqlCommand(queryText, con);
dataAdapter.InsertCommand.Parameters.AddWithValue("@id_emp",comboBox1.SelectedValue);
dataAdapter.InsertCommand.Parameters.AddWithValue("@dtValue",dateTimePicker1.Value.Date);
dataAdapter.InsertCommand.Parameters.AddWithValue("@montant",textBox2.Text.Trim());
dataAdapter.InsertCommand.Parameters.AddWithValue("@heur",textBox1.Text.Trim());
dataAdapter.InsertCommand.Parameters.AddWithValue("@absence",ch); 
```

# c# - 使用 SqlDatasource 的网格视图

> ID：10268775
> 
> 赞同：0
> 
> 时间：2012-04-22T14:27:34.010
> 
> 标签：c#, asp.net, .net

我在我的 Web 中有一个`GridView`用于`SqlDatasource`将数据插入到 gridview 的行中。

网格有例如：id namegenre_id

现在我有一个带有歌曲的表格和带有流派（genre_id，genre_name）的表格，我希望在网格中使用流派名称而不是流派 ID

这是`SqlDataSource`GridView 的：

```
<asp:SqlDataSource ID="StationsDataSource" runat="server" 
        ConflictDetection="CompareAllValues" 
        ConnectionString="<%$ ConnectionStrings:TvSQLManagerConnectionString %>" 
        SelectCommand="SELECT [id],[name],[genre] FROM songs ORDER BY [name]" 
</asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:34:09.567

也用于`SQL Join`从 Genre 表中获取数据。

`SelectCommand`像这样替换您的查询

```
SELECT S.ID,S.NAME.G.GENRE_NAME AS GENRE FROM SONGS S
INNER JOIN 
GENERES G ON S.GENRE=G.GENRE_ID 
```

# javascript - 为什么“chrome.bookmarks.getTree”不起作用？

> ID：10268776
> 
> 赞同：6
> 
> 时间：2012-04-22T14:27:37.300
> 
> 标签：javascript, google-chrome-extension

如果我尝试以下代码：

```
chrome.bookmarks.getTree(function(items) {
  items.forEach(function(item) {
    document.write(item.url);
  });
}); 
```

它返回未定义。但是当我写：

```
chrome.bookmarks.getRecent(20, function(items) {
  items.forEach(function(item) {
    document.write(item.url);
  });
}); 
```

有用。

为什么会有所不同？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T05:44:06.063

两者都`chrome.bookmarks.getTree`返回[BookmarkTreeNodes](http://code.google.com/chrome/extensions/bookmarks.html#type-BookmarkTreeNode)`chrome.bookmarks.getRecent`数组，但 BookmarkTreeNodes 不一定有属性。在 的情况下，树的顶部节点是文件夹并且没有 URL：`url``getTree`

![书签树节点结构](../Images/ad99e4c12e6eb8cf154106be88f103a0.png)

如果使用`getTree`，则必须使用每个节点的`children`数组递归遍历树。知道每个 BookmarkTreeNode*要么*有一个`children`属性（如果它是一个文件夹）要么有一个`url`属性（如果它是一个实际的书签）会有所帮助。尝试类似：

```
chrome.bookmarks.getTree(function(itemTree){
    itemTree.forEach(function(item){
        processNode(item);
    });
});

function processNode(node) {
    // recursively process child nodes
    if(node.children) {
        node.children.forEach(function(child) { processNode(child); });
    }

    // print leaf nodes URLs to console
    if(node.url) { console.log(node.url); }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-16T01:56:41.870

`chrome.bookmarks`需要许可才能使用。尝试在 page 中使用它 `chrome://bookmarks`。

# matlab - 我想在最新版本的 matlab 中运行旧版本的 matlab 代码？

> ID：10268781
> 
> 赞同：1
> 
> 时间：2012-04-22T14:27:59.317
> 
> 标签：matlab

嗨，我遇到了很大的麻烦我有一个用于图像处理的小波变换代码在旧版本的 matlab 中使用旧功能，在新的 matlab 版本中不支持，即 mmread() 等。是否有任何工具或任何可以提供帮助的工具我转换或运行此代码？？？非常感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T20:06:57.910

当 Matlab 中的功能出现罕见的不兼容变化时，解决方案是修改代码以使用新功能。如果您想确保您的代码仍然可以在旧版本的 Matlab 上运行，那么您可以使用`verlessthan`：

```
if verLessThan('matlab', '7.0.1')
% -- Put code to run under MATLAB 7.0.0 and earlier here --
else
% -- Put code to run under MATLAB 7.0.1 and later here --
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T05:21:44.187

如果您拥有正在维护的 MATLAB 许可证，则可以从 MathWorks 网站下载以前版本的 MATLAB。

# image - 边缘方向

> ID：10268784
> 
> 赞同：1
> 
> 时间：2012-04-22T14:28:13.353
> 
> 标签：image, matlab

嗨，我正在尝试从图像梯度或 canny 边缘检测器中获取图像的边界方向，如[http://www.cs.swan.ac.uk/~csjason/papers/xxmm-pami2008.pdf的等式 11](http://www.cs.swan.ac.uk/~csjason/papers/xxmm-pami2008.pdf)

我目前有：

```
 clear all
 Img = imread('littlecircle.png');
 Img = Img(:,:,1);
 Img = double(Img);
 w = size(Img,1);               % width size
 h = size(Img,2);               % height size
 [Ix,Iy] = gradient(Img);       %gradient of image

 i=1;     %iteration for magnetic field loop
 b=0;     %initialize b to zero

 % Magnetic Field
 for pxRow = 1:h % fixed pixel row
 for pxCol = 1:w % fixed pixel column

 for r = 1:h % row of distant pixel
 for c = 1:w % column of distant pixel

 O(c,r) = [-Iy(c,r),Ix(c,r)];      % O(x) = (-1).^lambda(-Iy(x),Ix(x))    --ERROR HERE

 end
 end
 B(i) = {O}; % filling a cell array with results. read below
 i = i+1;
 end
 end 
```

但是，在存储到 O(c,r) 时，我得到一个下标索引不匹配。为什么是这样？如果有人认为有更好的方法可以从论文中做到这一点，那么我很乐意在这里。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:40:33.787

[您可以通过修改 matlab 的 canny 边缘检测代码或修改类似这样](http://ai.stanford.edu/~mitul/cs223b/canny.m)的替代方案，一步完成 canny + 方向检测。Canny 通过确定每一步的方向来工作，因此您可以修改 canny 代码以返回每个像素的方向图。

# jquery - 为什么我在使用页面的所有 html 内容进行 XHR POST 时得到 403？IT 在同一个域中

> ID：10268794
> 
> 赞同：0
> 
> 时间：2012-04-22T14:29:33.493
> 
> 标签：jquery, post, xmlhttprequest, large-data

当做 $.post('actions.php',{ content: 'xxxxxxxxxxxx' }, function(data){});

它工作我得到200 OK。

但是在做的时候：

$.post('actions.php',{ 内容: 转义($('body').html()) }, function(data){});

我得到 403，错误禁止。

知道为什么吗？它在同一个域上，所以我没有违反 SOP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T14:51:49.243

您可能会遇到后期限制超载。

看看这篇文章： [PHP/Apache/AJAX - POST 限制？](https://stackoverflow.com/questions/9691057/php-apache-ajax-post-limit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T15:03:51.870

帖子大小可能是一个问题。

您可以查看服务器错误日志并找出原因。

对于错误日志[http://www.cyberciti.biz/faq/apache-logs/](http://www.cyberciti.biz/faq/apache-logs/)

# ruby-on-rails - Twitter bootstrap-formtastic 在添加下拉列表后未通过 rspec 测试

> ID：10268796
> 
> 赞同：0
> 
> 时间：2012-04-22T14:29:46.790
> 
> 标签：ruby-on-rails, rspec, twitter-bootstrap, formtastic

我有一个引导表格形式，它通过了我所有的 rspec 测试。

直到我将其中一个字段从普通的 text_field 更改为下拉列表

```
<%= f.input :gender, :label => "Gender" %> 
```

到

```
<%= f.input :gender, 
:label => "Gender",
:collection => [["Female", "F"], ["Male", "M"]] 
%> 
```

然后我收到以下错误消息：

```
Failure/Error: fill_in "Gender", with: "F"
Capybara::ElementNotFound: cannot fill in, no text field, text area or password field with id, name, or label 'Gender' found. 
```

RSpec 似乎在抱怨以下行：

```
before do
    fill_in "Gender", with: "F"
    ... 
```

我做错什么了吗？编码，配置，一切？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:52:17.130

正如 klump 所说，您应该使用正确的方法来选择值。

由于您使用的是 Capybara`select "F", :from => "Gender"`

[您可以在Capybara API](http://rubydoc.info/github/jnicklas/capybara/master#Interacting_with_forms)中找到更多信息

# c# - SQLException 必须声明标量变量“@variableName”

> ID：10268798
> 
> 赞同：2
> 
> 时间：2012-04-22T14:29:55.590
> 
> 标签：c#, sqlexception, scalar

我在尝试更新特定行的数据库时遇到了一些问题，我收到了错误消息`Must declare scalar variable "@lvl"`。不太确定我应该做什么。我需要在我的 SQL 语句中声明值吗？

```
private void button1_Click(object sender, EventArgs e)
{
    GridViewCellInfo grd = (GridViewCellInfo)radGridView1.Rows[0].Cells[0];
    string lvl = grd.Value.ToString(); 

    string sqlPatientCmd =
        @"UPDATE MotorTB
          SET RightColumn = @RightColumnCB, LeftColumn =  @leftColumnCB
          WHERE (Level = @lvl)";
    SqlConnection connString = new SqlConnection(@"Data Source=MERCURY\SQLEXPRESS;Initial Catalog=AsiaDB; Integrated Security=SSPI;User ID=MERCURY\Sophie;");
    try {
        connString.Open();

        SqlCommand sqlCmdStatement = new SqlCommand(sqlPatientCmd, connString);

        GridViewCellInfo grid;
        grid = (GridViewCellInfo)radGridView1.Rows[0].Cells[1];
        string rightColVal = grid.Value.ToString();

        grid = (GridViewCellInfo)radGridView1.Rows[0].Cells[2];
        string leftColVal = grid.Value.ToString();

        sqlCmdStatement.Parameters.AddWithValue("@rightColumnCB", rightColVal);
        sqlCmdStatement.Parameters.AddWithValue("@leftColumnCB", leftColVal);
        sqlCmdStatement.ExecuteScalar();
    } catch (Exception ex) {
        Console.WriteLine(ex.ToString());
    }

    // Close the connection
    try {
        connString.Close();
    } catch (Exception ex) {
        Console.WriteLine(ex.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:33:02.453

您需要将 lvl var 添加为 SqlParamter

```
sqlCmdStatement.Parameters.AddWithValue("@lvl", lvl); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T14:33:21.067

@lvl 需要作为参数提供或在查询中以其他方式定义。

# javascript - 使用 javascript 将 gridview 列值传递给会话

> ID：10268801
> 
> 赞同：-1
> 
> 时间：2012-04-22T14:30:26.617
> 
> 标签：javascript, asp.net, session, gridview

我有一个包含产品列表的网格视图。我想要做的是使用 ItemTemplate 是使用 Onclick 事件将所选项目的 ProductID 传递给会话，这样我就可以在另一个页面上查找该会话以避免在 URL 中显示 ProductID。

```
 <asp:GridView ID="GVProducts" runat="server" 
        onselectedindexchanged="GVProducts_SelectedIndexChanged">
     <Columns>
                <asp:ImageField DataImageUrlField="FileName"  
                    DataImageUrlFormatString="Images/{0}" HeaderText="Image">
                    <ControlStyle Height="80px" Width="80px" />
            </asp:ImageField>
              <asp:TemplateField HeaderText="Title" SortExpression="ProductID" > 
<ItemTemplate> 
        <a onclick="javascript:function setSessionVariable(<%#Eval("ProductID")%>)"  href="ProductDetail.aspx"><%#Eval("Title")%></a> 
</ItemTemplate></asp:TemplateField> 

        </Columns>
              <FooterStyle BackColor="#99CCCC" ForeColor="#003399" />
              <HeaderStyle BackColor="#003399" Font-Bold="True" ForeColor="#CCCCFF" />
              <PagerStyle BackColor="#99CCCC" ForeColor="#003399" HorizontalAlign="Left" />
              <RowStyle BackColor="White" ForeColor="#003399" />
              <SelectedRowStyle BackColor="#009999" Font-Bold="True" ForeColor="#CCFF99" />
              <SortedAscendingCellStyle BackColor="#EDF6F6" />
              <SortedAscendingHeaderStyle BackColor="#0D4AC4" />
              <SortedDescendingCellStyle BackColor="#D6DFDF" />
              <SortedDescendingHeaderStyle BackColor="#002876" />
    </asp:GridView> 
```

希望这很简单，因为我刚开始使用 javascript，但我似乎无法将其传递给会话。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:21:18.807

从您的 javascript（使用 jQuery）调用 web 方法并在 web 方法上设置会话：

```
public partial class _Default : Page 
{
  [WebMethod]
  public static void SetVar(string myVar)
  {
    Session["var"] = myVar;
  }
} 
```

jQuery：

```
$.ajax({
  type: "POST",
  url: "Default.aspx/SetVar",
  data: "{'myVar':'SessionVarValueSetOnJavascript'}",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function(msg) {
    // Do something interesting here.
  }
}); 
```

[请参阅此页面以获取一个很好的示例](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T22:55:27.480

设置会话应该在服务器端完成。尝试这个

标记

```
<asp:TemplateField HeaderText="Title" SortExpression="ProductID" > 
    <ItemTemplate> 
        <asp:LinkButton ID="MyLink" runat="server" 
                  CommandName="SendID" 
                  CommandArgument='<%#Eval("ProductID")%>'>
            <%#Eval("Title")%>
        </asp:LinkButton>
    </ItemTemplate>
</asp:TemplateField> 
```

代码隐藏

```
 protected void GVProducts_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        // If multiple buttons are used in a GridView control, use the 
        // CommandName property to determine which button was clicked. 
        if (e.CommandName == "SendID")
        {
            // Get the ProductID stored in the CommandArgument 
            // property to an String. 
            string clickedProductID = e.CommandArgument.ToString();

            // Set that ProductID to Session        
            Session["ProductID"] = clickedProductID;

            // Redirect to the newpage. 
            Response.Redirect("ProductDetails.aspx");
        }
} 
```

请不要忘记添加`OnRowCommand="GVProducts_RowCommand"`到 GridView 标记。

* * *

更新：

```
 <asp:GridView ID="GVProducts" runat="server" 
    OnRowCommand="GVProducts_RowCommand"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T15:24:38.617

如果您的项目中有 jQuery 库，您可以使用 jQuery ajax 将数据发送到服务器页面。

```
function setSessionVariable(selectedval)
{
 $.post("yourserverpage.aspx", { productId : selectedval },function(data){
    alert("set to session!");
 });    
} 
```

并创建一个名为 youserverpage.aspx 的 aspx 页面，并在页面加载中读取查询字符串值并设置为会话。

# c# - 折线渲染

> ID：10268804
> 
> 赞同：2
> 
> 时间：2012-04-22T14:31:25.193
> 
> 标签：c#, wpf, shapes

我有 ItemsControl 绑定并创建多条折线，每个数据项一条。

目前我得到像显示一样的“堆栈” - 顶部的第一条折线，下面是第二条，下面是第三条，依此类推......

如何使折线出现在彼此的顶部？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T14:36:32.167

您需要将您的ItemsPanel [（](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemspanel.aspx)`ItemsControl`默认情况下`StackPanel`，这就是为什么您获得“堆栈”之类的显示）更改为另一个允许它的子项像或`Panel`一样放置在彼此身上：`Canvas``Grid`

```
<ItemsControl>
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Canvas/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
</ItemsControl> 
```

# android - Android中屏幕一半宽度的按钮

> ID：10268805
> 
> 赞同：1
> 
> 时间：2012-04-22T14:32:02.340
> 
> 标签：android, layout, button

> **可能重复：**
> [屏幕的按钮一半宽度](https://stackoverflow.com/questions/9470790/button-half-width-of-screen)

我想在一个线性层（水平方向）内创建两个按钮，每个按钮都有屏幕的一半宽度，还有一点边距。我有这个 xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/main"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/txtTitle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:paddingTop="5dp"
            android:text="@string/Title" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center|fill_horizontal"
            android:orientation="horizontal"
            android:padding="2dp" >

            <Button
                android:id="@+id/btnLeft"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="2dp"
                android:layout_weight="1"
                android:text="@string/LeftButton" />

            <Button
                android:id="@+id/btnRight"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="2dp"
                android:layout_weight="1" 
                android:text="@string/RightButton" />

        </LinearLayout>
    </LinearLayout> 
```

好吧，所有这些代码都非常适合我想要的东西，但是我收到了关于我的两个按钮的警告。它说***“嵌套权重对性能不利”***。我知道它是怎么回事，但我不知道如何更改布局以消除警告（并提高性能，我想）并保持两个按钮占据屏幕的一半。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T14:38:21.167

试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/txtTitle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:paddingTop="5dp"
        android:text="@string/Title" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginRight="2dp"
        android:layout_marginLeft="2dp"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btnLeft"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/LeftButton" />

        <Button
            android:id="@+id/btnRight"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1" 
            android:text="@string/RightButton" />

    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T14:38:56.813

```
<LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center|fill_horizontal"
            android:orientation="horizontal"
            android:padding="2dp" > 
```

将上面替换为下面":::

```
<LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:padding="2dp" android:weighSum = "2"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T15:07:11.430

```
<LinearLayout
    android:id="@+id/buttonHolder"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:orientation="horizontal"
    >

    <Button
        android:id="@+id/cmdSignup"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/Signup" />

    <Button
        android:id="@+id/cmdLogin"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/Login" />
</LinearLayout> 
```

# java - 带有捏缩放的 Android 图库

> ID：10268806
> 
> 赞同：17
> 
> 时间：2012-04-22T14:32:06.837
> 
> 标签：java, android, gallery, zooming, pinchzoom

我找到了一个[带有捏缩放的画廊](http://www.havenliu.com/android/668.html)示例项目并修复了一些错误。[你可以在这里](https://rapidshare.com/files/4067164901/galleryTest.rar)下载我的代码

它只支持全屏。它始终将图像居中到屏幕高度。但我想将标题视图放在屏幕顶部并调整图像的位置。图像位置应为：

```
header height + (screen height - header height) / 2 
```

我不太擅长使用`Matrix`. 任何人都知道如何使自定义画廊以任何尺寸（不仅仅是全屏）工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T21:28:40.233

您可以使用我的[Pinch 来缩放 Gallery](https://github.com/radioelectronic/pinchzoom-gallery)项目。您可以从图库中选择任何图像，然后在`onDoubleTap(MotionEvent e)`打开的完整图像中进行缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T07:00:28.953

您也可以使用以下代码行为图库执行图像缩放缩放选项：

```
case MotionEvent.ACTION_POINTER_DOWN:
    oldDist = spacing(event);
    Log.d(TAG, "oldDist=" + oldDist);
    if (oldDist > 10f) {
        savedMatrix.set(matrix);
        midPoint(mid, event);
        mode = ZOOM;
        Log.d(TAG, "mode=ZOOM" );
    }
    break; 
```

或者您可以[下载示例](https://github.com/alvinsj/android-image-gallery/downloads)。

# c# - 如何阅读或理解新的或未知的 asp.net 应用程序？（我是初学者）

> ID：10268809
> 
> 赞同：0
> 
> 时间：2012-04-22T14:32:24.037
> 
> 标签：c#, asp.net, .net, visual-studio, debugging

我开始在一个新团队中担任实习生。他们都很忙，无法帮助我。

我们有一个 asp.net webapplication 应用程序 C#、.net4、VS10，而且大部分代码都没有注释。

除了调试，我怎么能看到流程？大图？像所有类别的图表？

我真的迷路了，我以某种方式了解该应用程序，但还不足以开始编程。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T23:26:58.140

如果您的开发人员同事太忙（我称之为无意义） - 如何与用户或项目/产品经理或 QA/测试人员沟通？理论上，代码应该与业务计划、目标和产品特性保持一致。但是，由于您是新手，也许最好的做法是与 QA/测试人员交谈。哎呀，也许和你的开发人员一起出去吃午饭或其他什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T14:51:49.020

F12 将成为您的伙伴。如果您的（文本）光标位于函数/变量名称上，按 F12 将带您进入其声明。（如果您的鼠标上有后退/前进键，您也可以通过按鼠标上的后退按钮返回到上一个视图）。这对遍历代码结构有很大帮助。

但除此之外，我无法真正详细介绍您的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T23:36:29.050

这是一个很大的问题。

没有“一种真正的方法”可以找到这一点，因为作为必要的设计细节，ASP.net 网站必须能够基于任意数量的不同调用、表单帖子、加载起始页、调用 web 服务等来启动.

更糟糕的是，每个 aspx 页面都有可能启动整个站点。

也就是说，您可以从这里前往以下几个地方：

查看那个 global.aspx.cs 文件，看看在以单词 start、load 或 init 命名的任何方法中是否有任何重要内容。

查看设置为默认页面的 ASPX 页面，看看它的 page_load 方法中是否有任何内容。

检查 web.config 并查看是否有任何用于登录/身份验证提供程序的默认设置。

最重要的是；吞下你的骄傲，问问别人。如果你在接下来的两个月里试图解决这个问题，那么你会留下一个更糟糕的印象，而不是你去找新的团队领导寻求帮助。

告诉他们您可以使用导师，并且您希望提高工作效率并与新团队使用的方法保持同步，使用您和同事帮助 2 小时然后花费一个月猜测的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T14:19:17.663

说的很明显，但是仅仅构建项目可能会提醒您未正确设置的依赖项。一旦您可以运行该项目，最简单的做法可能是在浏览器中单击整个站点/应用程序，查看具有动态数据的任何页面的源代码，然后使用上面提到的 F12 提示从那里开始工作。没有简单的方法——只有大量的鲜血、汗水和眼泪。

# c# - Bing Maps Ajax API v7 Geolocation 回调

> ID：10268811
> 
> 赞同：1
> 
> 时间：2012-04-22T14:32:31.183
> 
> 标签：c#, javascript, jquery, bing-maps

[我使用 Bing Maps Ajax v7 API 从此处](http://207.46.16.251/en-us/library/hh125839.aspx)的示例中获取用户的位置

是否可以等到回调被执行，直到我得到用户位置的经度、纬度，或者如果他/她不允许获得位置，则出现错误？

```
 function test() {
          //Call GetMap() to get position
          GetMap();
          //Wait until callback is finished
         //Do something with user's location (result of the callback)

     }

     function GetMap()
     {

        // Set the map options
        var mapOptions = {credentials:"Bing Maps Key"};

        // Initialize the map
        var map = new Microsoft.Maps.Map(document.getElementById("mapDiv"), mapOptions);

        // Initialize the location provider
        var geoLocationProvider = new Microsoft.Maps.GeoLocationProvider(map);

        // Get the user's current location
        geoLocationProvider.getCurrentPosition({successCallback:displayCenter});

        //Execute some more code with user's location
     }

     function displayCenter(args)
     {
        // Display the user location when the geo location request returns
        alert("The user's location is " + args.center);
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:59:08.323

在 JavaScript 中，我认为您不能显式暂停执行并等待回调完成，如此处所述：[jQuery：等待函数完成以继续处理？](https://stackoverflow.com/questions/1455870/jquery-wait-for-function-to-complete-to-continue-processing) 如果您有一些依赖于获取位置回调结果的逻辑，为什么不直接调用该逻辑作为回调的一部分呢？您不需要明确地等待它。关于你想要完成的事情，你正在寻找这样的东西吗？

```
var map;
function test() {
      //Call GetMap() to get position
      GetMap();
      //Wait until callback is finished
     //Do something with user's location (result of the callback)

 }

 function GetMap()
 {

    // Set the map options
    var mapOptions = {credentials:"Bing Maps Key"};

    // Initialize the map
    map = new Microsoft.Maps.Map(document.getElementById("mapDiv"), mapOptions);

    // Initialize the location provider
    var geoLocationProvider = new Microsoft.Maps.GeoLocationProvider(map);

    // Get the user's current location
    geoLocationProvider.getCurrentPosition({successCallback:displayCenter},{errorCallback:onError});
 }

function onPositionReady(position) {
    // Execute some more code with user's location
    // For Example...
    // Apply the position to the map
    var location = new Microsoft.Maps.Location(position.coords.latitude,
        position.coords.longitude);
    map.setView({ zoom: 18, center: location });

    // Add a pushpin to the map representing the current location
    var pin = new Microsoft.Maps.Pushpin(location);
    map.entities.push(pin);
}

function onError(err) {
    switch (err.code) {
        case 0:
            alert("Unknown error");
            break;
        case 1:
            alert("The user said no!");
            break;
        case 2:
            alert("Location data unavailable");
            break;
        case 3:
            alert("Location request timed out");
            break;
    }
} 
```

**更新**：如果要将参数传递到回调中，可以使用函数绑定来覆盖`this`回调中的关键字并以这种方式传递参数：

例如，如果设置`myObject`为包含您的参数，您可以像这样传递它：

```
 geoLocationProvider.getCurrentPosition({ successCallback: onPositionReady.bind(myObject) }, { errorCallback: onError }); 
```

然后，您通过`this`关键字访问回调中的 myObject：

```
function onPositionReady(position) {
    var myProperty = this.yourProperty;  // this now refers to myObject
    // Execute some more code with user's location
    // For Example...
    // Apply the position to the map
    var location = new Microsoft.Maps.Location(position.coords.latitude,
        position.coords.longitude);
    map.setView({ zoom: 18, center: location });

    // Add a pushpin to the map representing the current location
    var pin = new Microsoft.Maps.Pushpin(location);
    map.entities.push(pin);
} 
```

# c# - 参数超出范围异常

> ID：10268816
> 
> 赞同：0
> 
> 时间：2012-04-22T14:32:50.853
> 
> 标签：c#, exception, xna

谁能告诉我为什么我会得到这个例外？好吧，我知道“为什么”我得到它是因为它说我尝试访问的列表中的元素不存在，但是单步执行代码我可以看到它确实存在？

在 Game1 中，我调用了辅助类的计算方法。然后当计算完成后，我将结果添加到 CalculationHelper 类中的 List<> 中。代码如下：

在 Game1 类中，我实例化了 CalculationHelper calcHelper 类，然后调用其中一个类方法。首先，在 Game1 中，我在 for() 循环中调用 calcHelper.ForceVanishingPointIntersections(...) 方法，如下所示。这工作得很好， calcHelper.ForceVanishingPointIntersections(...) 方法将值添加到 CalculationHelper 类中的 IntersectionPointList<> （参见下面的方法）。

```
for (int i = 0; i < LineList.Count; i++)
{
    calcHelper.ForceVanishingPointIntersections(LineList[i], LineList[i + 1]);

    AddSprite(VanishingPointIntersectionList, calcHelper.GetIntersectionPointListElementAt(i), greenCirlce);
    i++;
} 
```

要进行一些计算并向 CalculationHelper 类中的 IntersectionPointlist 添加一个值，我会这样做：

```
List<Vector2> IntersectionPointList = new List<Vector2>();
public void ForceVanishingPointIntersections(Line line1, Line line2)
{
    Vector2 intersectionPoint;
    // Do some calculations

    IntersectionPointList.Add(intersectionPoint);
} 
```

最后在 Game1 类中，for() 循环中的第二个方法我调用 AddSprite 来创建一个 Sprite。我想将存储在 CalculationHelper 类 IntersectionPointList 中的值作为 Sprite 的坐标传递。为此，我调用 calcHelper.GetIntersectionPointListElementAt(i) 调用 CalculationHelper 类中的一个方法，如下所示（应该从 IntersectionPointList<> 返回指定点 (i) 处的值） public Vector2 GetIntersectionPointListElementAt(int index) { Vector2 result = this.IntersectionPointList[index]; 返回结果；第一次执行 for() 循环时，它工作正常。我进行计算，值存储在列表中，我能够从列表中获取该值并将其传递给 AddSprite(..)。然而，第二次 for() 循环，

```
public Vector2 GetIntersectionPointListElementAt(int index)
{
    Vector2 result = this.IntersectionPointList[index];    // Exception thrown here
    return result;
} 
```

说索引超出范围？但是单步执行代码，我的 IntersectionPointList 已更新，它显示该列表现在包含 2 个值。我正在尝试访问第二个值。

有谁知道为什么会这样？对于我的生活，我无法弄清楚我哪里出错了。

如果需要更多代码，我可以发布更多，请告诉我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T14:47:42.473

因为您使用`LineList[]`索引进行访问，所以`i + 1`您必须在 for 条件中将最后一个索引减一。（注意`-1`）

```
for (int i = 0; i < LineList.Count - 1; i++) {
    calcHelper.ForceVanishingPointIntersections(LineList[i], LineList[i + 1]);
    AddSprite( ... );
} 
```

这将调用`ForceVanishingPointIntersections`索引

```
(0, 1), (1, 2), (2, 3), ... (Count-2, Count-1)

```

注意 的索引范围`LineList`是`0 ... Count-1`。

* * *

如果需要非重叠索引，例如

```
(0, 1), (2, 3), (4, 5), ... (Count-2, Count-1)

```

然后将循环更改为

```
for (int i = 0; i < LineList.Count - 1; i += 2) {
    calcHelper.ForceVanishingPointIntersections(LineList[i], LineList[i + 1]);
    AddSprite(
        VanishingPointIntersectionList,
        calcHelper.GetIntersectionPointListElementAt(i / 2),
        greenCirlce);
} 
```

**编辑**根据 Chris Gessler 的评论，第二种方法是正确的。

删除`i++`循环内部，这是非常罕见且令人困惑的。相反，将其替换为`i += 2`循环标头。

另请注意（再次根据 Chris Gessler 的说法）`IntersectionPointList`的项目数量是`LineList`. 因此调用`GetIntersectionPointListElementAt`. `i / 2`既然`i`是`{0, 2, 4, ... }`， `i / 2`就是`{0, 1, 2, ...}`。

* * *

for 循环允许您在第一和第三部分中使用逗号分隔的语句列表。您可以使用它来维护两个索引

```
for (int i = 0, k = 0; i < LineList.Count - 1; i += 2, k++) {
    calcHelper.ForceVanishingPointIntersections(LineList[i], LineList[i + 1]);
    AddSprite(
        VanishingPointIntersectionList,
        calcHelper.GetIntersectionPointListElementAt(k),
        greenCirlce);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T14:41:51.680

```
for (int i = 0; i < LineList.Count; i++)
{
    calcHelper.ForceVanishingPointIntersections(LineList[i], LineList[i + 1]);

    ...

    i++;
} 
```

而不是这样做，你应该这样做：

```
for (int i = 0; i < LineList.Count; i += 2)
{
    calcHelper.ForceVanishingPointIntersections(LineList[i], LineList[i + 1]);

    ...
} 
```

如果 LineList.Count 不是偶数，例如：3。它将从 0 开始，您使用 0 和 1。然后它跳转到 2，您使用 2 和 3。但是，哎呀！没有3个！只数3！0比2！

那是您将参数超出范围异常的时候。为避免这种情况，您可以检查 Count % 2 == 0，或者如果您不介意跳过额外的（如果有），您可以一直到 LineList.Count - 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T14:46:12.347

看起来您正在为每个 Sprite 添加两条线。索引不会排列。当 LineList 有 10 个项目时，您将只有 5 个 IntersectionPointList 项目，因此传入索引 9 将失败。

您应该将 LineList 集合更改为，`List<Tuple<string,string>>`以便每个项目有两行与每个 Sprite 对齐。这将在 Lines 和 Sprites 之间创建一对一的关系。

我想你总是可以传入一个索引 (i / 2)，它应该是每两行的正确 Sprite。

# ios - 按钮下方弹出图像

> ID：10268817
> 
> 赞同：-1
> 
> 时间：2012-04-22T14:32:57.087
> 
> 标签：ios, uiview, uiviewcontroller

我在尝试在视图中弹出图像时遇到问题。我用图像创建了一个新的 UIView 子类（UIViewImageOverlay.m）。

UIViewImageOverlay.m

```
//  ImageOverlay.m
//  ButtonPopup
//
//

#import "UIViewImageOverlay.h"

@implementation UIViewImageOverlay

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    CGContextRef contextRef = UIGraphicsGetCurrentContext();
    UIImage *myImage = [UIImage imageNamed:@"test.jpeg"];
    int w = myImage.size.width;
    int h = myImage.size.height;
    CGContextDrawImage(contextRef, CGRectMake(0, 0, w, h), myImage.CGImage);
    CGContextRelease(contextRef);
}

@end 
```

在我的 ViewController.mi 中有一个按钮`pushPush`来加载视图，但尝试给出警告

```
//  ViewController.m
//  ButtonPopup
//
//

#import "ViewController.h"
#import "UIViewImageOverlay.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize viewImageOverlay;

- (void)viewDidLoad
{
    [super viewDidLoad]; // static
}

- (void)viewDidUnload
{

    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

- (IBAction)pushPush:(id)sender {
    [self.view addSubview:self.viewImageOverlay];
}
@end 
```

视图控制器.h

```
//  ViewController.h
//  ButtonPopup
//

#import <UIKit/UIKit.h>
@class UIViewImageOverlay;

@interface ViewController : UIViewController {
    UIViewImageOverlay *viewImageOverlay;
}

@property(nonatomic, retain) UIViewImageOverlay *viewImageOverlay; 
- (IBAction)pushPush:(id)sender;
@end 
```

UIViewImageOverlay.h

```
//  ImageOverlay.h
//  ButtonPopup
//
//

#import <UIKit/UIKit.h>

@interface UIViewImageOverlay : UIView

@end 
```

`[self.view addSubview:self.viewImageOverlay];`报告`Incompatible pointer types sending 'UIViewImageOverlay *' to parameter of type 'UIView *'`

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:05:30.177

声明实例变量 viewImageOverlay 并将其定义为属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T15:10:04.627

您在控制器的头文件 ( `@class UIViewImageOverlay`) 中有一个前向类声明。它掩盖了正确的实现。

包含`UIViewImageOverlay.h`在控制器的实现文件中

# javascript - JQuery阻止元素淡入

> ID：10268826
> 
> 赞同：0
> 
> 时间：2012-04-22T14:33:49.333
> 
> 标签：javascript, jquery, fade

我制作了这个小片段来将窗口滚动到页面顶部。

```
 $(window).scroll(function(){
        $("#scrollup").fadeIn("slow");
    }); 
    $("#scrollup").click(function(){
        $('html, body').animate({ scrollTop: 0 }, 'normal', function() {
            $("#scrollup").fadeOut("slow");
        });
    }); 
```

但是，当窗口滚动后向上滚动 div 淡出时，它又淡入。如何阻止这种情况发生？谢谢。

* * *

我想我找到了一个合理的解决方案

```
$(window).scroll(function(){
    if ($(this).scrollTop() > 100) {
        $('.scrollup').fadeIn();
    } else {
        $('.scrollup').fadeOut();
    }
}); 
```

这会比更改我的原始代码更容易吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:37:41.697

您应该确保向上滚动 div 在您位于顶部或已经淡入（可见）时不会淡入

```
$(window).scroll(function(){
    if ( $(window).scrollTop() !== 0 or $("#scrollup").is(":hidden") ) then {
         $("#scrollup").fadeIn("slow");
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T14:38:21.097

您可以添加一个 if 语句来检查它是否在顶部：

```
$(window).scroll(function(){
    if($("body").scrollTop()!=0)
        $("#scrollup").fadeIn("slow");
    }); 
    $("#scrollup").click(function(){
        $('html, body').animate({ scrollTop: 0 }, 'normal', function() {
            $("#scrollup").fadeOut("slow");
        });
    });​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T14:39:20.333

退房`.stop()`：[http ://api.jquery.com/stop/](http://api.jquery.com/stop/)

```
$(window).scroll(function(){
    if ($(this).scrollTop() > 100) {
        $('.scrollup').stop().fadeIn();
    } else {
        $('.scrollup').stop().fadeOut();
    }
}); 
```

# sqlite - 如何使用 Simple.Data.SQLite 连接到 SQLite

> ID：10268827
> 
> 赞同：0
> 
> 时间：2012-04-22T14:33:52.683
> 
> 标签：sqlite, ado.net, simple.data

我在 Webmatrix 2.0 beta 中编写了这段代码：

```
string Dbfile=HttpContext.Current.Server.MapPath("data/db.db3");
var Db = Simple.Data.Database.OpenFile(Dbfile); 
```

Simple.Data.SimpleDataException：未找到 ADO 提供程序。

为什么？？

我确定我已包含参考：

包.config

```
<?xml version="1.0" encoding="utf-8"?>
<packages>
  <package id="Simple.Data.Ado" version="0.16.1.0" />
  <package id="Simple.Data.Core" version="0.16.1.0" />
  <package id="Simple.Data.Sqlite" version="0.16.0.0" />
  <package id="System.Data.SQLite" version="1.0.80.0" />
</packages> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:41:47.243

在我的测试应用程序中 conn 是物理路径，包括 db 文件名和调用

```
cn = Database.OpenConnection(conn); 
```

为我工作。当我使用 OpenFile 时，我还收到了 No ADO Provider 错误。

我正在使用（来自 NuGet）：

*   简单数据核心 0.16.1.0
*   Simple.Data.Ado 0.16.1.0
*   System.Data.SQLite 1.0.80.0
*   Simple.Data.Sqlite 0.16.0.0
*   System.Data.SQLite 1.0.80.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T20:09:08.180

获取 System.Data.SQlite 所需的 dll 可能很麻烦。如果您想快速完成，请下载[VS 2010 的 Nuget 扩展](http://nuget.org/packages/Simple.Data.Sqlite/Download)。然后您可以从扩展控制台获取 dll。

确保您阅读了[扩展安装说明](http://docs.nuget.org/docs/start-here/installing-nuget)。

# magento - Magento 致命错误：“Mage_Adminhtml_Block_Catalog_Form_Renderer_Config_DateFieldsOrder”类

> ID：10268829
> 
> 赞同：0
> 
> 时间：2012-04-22T14:34:00.567
> 
> 标签：magento

我收到此错误消息“致命错误：在第 564 行的 \app\code\core\Mage\Core\Model\Layout.php 中找不到类 'Mage_Adminhtml_Block_Catalog_Form_Renderer_Config_DateFieldsOrder'

当我单击系统-> 配置-> 目录时。我的 Shop 版本是 Magento 1.6.2，扩展是 0.9.18-Unirgy_Giftcert。

我很感激任何帮助提前谢谢Amro

你好，

Ich bekomme diese Fehlermeldung, wenn ich auf System -> Konfiguration-> Katalog klicke。Magento 版本是 Magento 1.6.2 和 Erweiterung 是 Unirgy_Giftcert-0.9.18。

Ich bin dankbar für jede Hilfe wink Vielen Dank im Voraus Amro

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:23:38.627

您的系统是否有文件位于

```
app/code/core/Mage/Adminhtml/Block/Catalog/Form/Renderer/Config/DateFieldsOrder.php ? 
```

如果是这样，这个文件是否可以被 PHP 读取？它是否包含与系统的库存安装相同的类定义？您的 Varien_Autoload 类是否已修改？

Magento 试图实例化一个 `Mage_Adminhtml_Block_Catalog_Form_Renderer_Config_DateFieldsOrder`对象但找不到该类。

# compiler-construction - CTFE如何运作？

> ID：10268831
> 
> 赞同：8
> 
> 时间：2012-04-22T14:34:18.687
> 
> 标签：compiler-construction, d

编译时函数评估 (CTFE) 如何工作？我试图了解编译器在运行时如何创建不存在的东西（例如函数）并执行它。我习惯了源代码通过编译成为二进制文件，然后执行二进制文件的想法。那么，源代码如何在编译器运行并且能够运行时变成可执行的东西呢？一个函数是否真的被创建并运行，或者它只是一个函数调用的模拟？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-22T14:53:05.853

CTFE 使用编译器中内置的解释器 - 就像您对 Python 等解释语言所期望的一样。当你编译这样的东西时：

```
bool not(bool arg) {
    return !arg;
}
void main() {
    enum compileTime = not(true); // not() called at compile time
    bool runTime = not(true);     // not() called at runtime
} 
```

编译器会经历标记化/词法分析/解析等通常阶段。当遇到 enum compileTime（或任何其他需要编译时间值的构造）时，它将尝试评估表达式右侧的内容。在常量的情况下，它会执行您期望的操作并存储常量。如果遇到函数调用，它将启动 CTFE 解释器。在给定的示例中，它知道参数是什么，以及函数中的语句做什么，它一步一步地完成并解释每一个。如果它无法在编译时解释该语句，它将发出编译时错误。在这个简单的例子中，它只是否定了参数，但是 CTFE 能够解释结构、类、循环等等，记录在这里 - [http://dlang.org/function#interpretation](http://dlang.org/function#interpretation).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:35:48.157

这本质上是一种高级形式的[常量折叠](http://en.wikipedia.org/wiki/Constant_folding)，其中编译器尝试计算使用的值，因此它不必在运行时发生（在编译时不能发生的操作（IO，内存分配，...）将导致它失败)

CTFE 的特殊之处在于它可以显式化（通过分配给一个`enum`例子）并且它会尝试评估用户定义的函数

在实践中，这可以通过编译器中的解释器来完成

# java - 将gzencoded数据传递给mcrypt_encrypt，解密后无法解压

> ID：10268832
> 
> 赞同：1
> 
> 时间：2012-04-22T14:34:21.120
> 
> 标签：java, php, encryption, gzip, block-cipher

为了简短起见，将 gzencode（或其他非文本数据）的结果传递给 mcrypt_encrypt 函数时是否存在已知问题？

细节：

基本上我有一个问题，加密/解密适用于纯文本，但如果我将压缩数据传递给加密函数，然后解密和解压缩，我会得到错误解压缩。

所以在 PHP 中，我将 gzencode() 的结果传递给 encrypt 函数。然后我进行 base64 编码以在 Web 服务网页上显示结果。然后在一个 Java 应用程序中，我使用 GZIPInputStream 对 base64 进行解码、解密和解压缩。我在最后一步出现错误。

但是，如果我跳过压缩步骤（只需将纯文本传递给 encrypt 函数），一切正常。如果我跳过加密并只进行压缩，一切也都很好。因此，如果我不将它们结合起来，这些函数似乎在 PHP 和 Java 方面都可以正常工作。

```
public static function encrypt($str,$key,$iv) {
    $str=Crypto2::pkcs5Pad($str,mcrypt_get_block_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC));
    $encrypted=mcrypt_encrypt(MCRYPT_RIJNDAEL_128,$key,$str,MCRYPT_MODE_CBC,$iv);
    return $encrypted;
}

public static function pkcs5Pad ($text, $blocksize) {
    $pad = $blocksize - (strlen($text) % $blocksize);
    $padded=$text . str_repeat(chr($pad), $pad);
    return $padded;
} 
```

Java函数：

```
public static byte[] decrypt(byte[] inputbuffer) throws Exception {
    Key key = new SecretKeySpec(keybyte, "AES");
    IvParameterSpec ivSpec = new IvParameterSpec(iv);
    Cipher c = Cipher.getInstance("AES/CBC/PKCS5Padding");
    c.init(Cipher.DECRYPT_MODE, key, ivSpec);

    c.getBlockSize();
    System.out.println("Block size="+c.getBlockSize());

    int outlen = c.getOutputSize(inputbuffer.length);
    System.out.println("Output length will be:"+outlen);
    byte[] result=c.doFinal(inputbuffer);
    return result;
}

  public static byte[] decodeBase64(String data) throws IOException{ 
    BASE64Decoder decoder = new BASE64Decoder(); 
    byte[] decodedBytes = decoder.decodeBuffer(data);

    return decodedBytes;
  }

   public static void unzipPrint(byte[] data) throws Exception{
    InputStream is=new GZIPInputStream(new ByteArrayInputStream(data));
    int ch2;
    while((ch2=is.read())!=-1) {
        System.out.print((char)ch2);
    }
   } 
```

因此，如果我在 PHP 中执行此操作： base64_encode(encrypt(gzencode($plain_text)));

这在Java中

解压缩打印（解密（decodeBase64（数据）））；

在解压缩阶段，我得到了可怕的：“java.util.zip.ZipException：超额订阅动态位长度树”。

同样，如果我跳过两端的压缩/解压缩步骤，一切都很好。如果我在两端跳过加密，那么压缩/解压缩工作正常。

**编辑：**好吧，很奇怪，但是在逐字节检查压缩数据的结果字节数组之后（在解码 base64 和解密之后），我发现一个单字节（与原始 PHP 字节数组相比）的值为 1。它是字节数 14（Java 中的索引 13），它的值是 110 而不是 111。我完全不知道这是怎么回事。

因此，如果我将该单字节从 110 更改为 111，那么我可以成功地使用 GZIPOutputStream 来解压缩数据。

**所以我知道出了什么问题，但不知道为什么。**

**编辑 2：这已解决**->感谢 Owlstead 的评论，我仔细检查了 IV 值，发现 php 和 java 代码之间存在细微差异。我不知道这如何导致结果解密数据中只有一个字节的差异。

*那是在我的 IV 中的单个 0x13 而不是 0x12 浪费了一天。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T00:18:00.230

您应该检查 IV，因为它可能只更改包含 ZIP 标头的第一个密文块。

（结束问题，很高兴您解决了问题，在我看来，您解决问题的任何一天都不会浪费:)）

# javascript - 对于 JavaScript 游戏来说，哪种通信系统最简单？

> ID：10268833
> 
> 赞同：0
> 
> 时间：2012-04-22T14:34:28.437
> 
> 标签：javascript, node.js, websocket, socket.io, nowjs-sockets

查看与 node.js 一起使用的多人游戏系统，我不知道哪种通信方法/库最容易使用。

我希望能够拥有某种通过 PHP 完成的客户端/服务器授权系统。用户使用 PHP 登录帐户管理系统，然后用户启动客户端，该客户端是用 javascript 编写的，连接到 node.js 服务器。

我的问题是如何进行此客户端/服务器通信以及是否建议使用什么库。我见过 socket.io 和 now.js 但两者都只有关于如何在没有权限的情况下使用它的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T23:04:54.140

这是关于授权的官方文档

[https://github.com/LearnBoost/socket.io/wiki/Authorizing](https://github.com/LearnBoost/socket.io/wiki/Authorizing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T14:36:21.963

你可以看看Mozilla的[BrowserQuest](https://github.com/mozilla/BrowserQuest)游戏。它是开源的，它就是这样做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T02:06:36.233

你没有提供关于游戏类型或你需要的交流类型的足够信息。您提到了 Socket.IO 和 Now.JS，但这些是必需的吗？标准的 http ajax 请求呢？然后，您将只依赖 PHP 会话和身份验证提供的 cookie。除了 PHP 之外，是否有充分的理由将 node.js 引入您的堆栈？

# c++ - Intellisense 警告：不允许不完整的类型（在内联方法中，但类型的定义在 cpp 中）

> ID：10268834
> 
> 赞同：2
> 
> 时间：2012-04-22T14:34:34.200
> 
> 标签：c++

我已经提前声明了我的枚举类，定义在 cpp 中，程序编译但我在类型名称下得到一个红色的“wave”（在 inline 方法下面）

我想问一下是否建议将该内联方法移动到cpp文件中？我是一个业余程序员，所以我不知道这个头文件中类型不完整的内联方法是否可以。

头文件：

```
#include <map>

using std::map;
enum class MinimumName;

    class Limits
    {
    public:
        Limits(TableLayout layout);
        void SetMinimum(MinimumName name, unsigned int minimum);

// other stuff irrelevant

    private:
        typedef map<MinimumName, unsigned int> MinContainer;
MinContainer::iterator Miniter;
        MinContainer Minimums;
};
                                   //intelisence warning here in argument list
inline void Limits::SetMinimum(MinimumName name, unsigned int minimum)
{                             // incomplete type is not allowed
    Miniter = Minimums.find(name);
    Miniter->second = minimum;
} 
```

.cpp 文件

```
enum class MinimumName
{
    Inside,
    Outside,
    Table
}; 
```

我应该把它移到cpp文件中吗？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T04:00:42.887

如果一个`class`方法（或任何函数）必须放在一个头文件中，该头文件将包含在几个 .cpp 文件中，那么它必须是`inline`.

这`inline`并不一定意味着通常的宏样式内联。宏样式内联由编译器决定，程序员对其没有太多控制。
此`inline`关键字是为所有 .cpp 文件仅生成一个定义的保证效果。`inline` *关键字*有效地维护了[ODR](http://en.wikipedia.org/wiki/One_definition_rule)。

AFAIK，*通常*必须`inline`在类中声明方法时（出于 ODR 目的）。因此，一旦您`inline`在类中创建方法，一切都应该可以正常工作而不会出现错误/警告。稍后将`inline`方法定义的关键字放在类之外是多余的。

# c# - 如何使用带有 C# + SQL Server 的数据网格显示数据

> ID：10268837
> 
> 赞同：0
> 
> 时间：2012-04-22T14:34:59.923
> 
> 标签：c#, sql-server, sql-server-2008, datagrid

我想询问更多使用数据网格将数据从 SQL Server 显示到 WinForm。我一直在创建一个数据网格，显示数据的存储过程是

```
ALTER PROC [dbo].[SP_GetData]
AS
  SELECT nama , nim
  FROM tabledata 
```

我已经在 C# 中创建了访问数据库和存储过程的函数

```
string Sp_Name = "dbo.SP_GetData";

SqlConnection SqlCon = new SqlConnection("Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=DBMahasiswa;Data Source=.");
SqlCon.Open();

SqlCommand SqlCom = new SqlCommand(Sp_Name , SqlCon);
SqlCom.CommandType = CommandType.StoredProcedure;

List<mahasiswaData> listMahasiswa = new List<mahasiswaData>();

using (SqlDataReader sqlDataReader = SqlCom.ExecuteReader())
{
   if (sqlDataReader.HasRows)
   {
      while (sqlDataReader.Read())
      {
         mahasiswaData DataMhs = new mahasiswaData();
         DataMhs.Nama = sqlDataReader["Name"].ToString();
         DataMhs.Umur = Convert.ToInt32(sqlDataReader["Age"]);
         listMahasiswa.Add(DataMhs);
      }
   }
}

SqlCon.Close();
return listMahasiswa; 
```

最后，在显示按钮中，我添加了这段代码

```
dgvmahasiswa.DataSource = new MahasiswaDB().LoadMahasiswa(); 
```

有人可以告诉我故障在哪里或替代方法吗？

太感谢了！:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T15:27:39.257

需要考虑的一些事情：

1.  目前，如果您的代码遇到异常，您将留下一个 SqlConnection；您已经为 SqlDataReader 使用了 using 模式；您应该将其扩展到所有一次性物品。

2.  你正在吞咽异常；如果您的查询失败，无法建立连接，或者发生了其他事情，您永远不会真正知道 - 您的函数只会返回 null。

3.  姓名或年龄是否可以为空？年龄不是数字？没有任何意外值的测试，您也永远不会知道。

4.  如果您没有任何记录，您将返回一个空列表。这是想要的吗？或者您更愿意知道没有记录？

你可能更喜欢看这样的东西：

```
public List<mahasiswaData> GetData(){

    List<mahasiswaData> gridData = new List<mahasiswaData>();

    try{

        using(SqlConnection conn = new SqlConnection("Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=DBMahasiswa;Data Source=."))
        {
            using(SqlCommand command = new SqlCommand())
            {
                command.Connection = conn;
                command.CommandType = CommandType.StoredProcedure;
                command.Text = "dbo.SP_GetData";

                using(SqlDataReader reader = command.ExecuteReader())
                {
                    if(reader.HasRows){
                        while(reader.Read())
                        {
                           object rawName = reader.GetValue(reader.GetOrdinal("Name"));
                           object rawAge = reader.GetValue(reader.GetOrdinal("Age"));

                           if(rawName == DBNull.Value || rawAge == DBNull.Value)
                           {
                               //Use logging to indicate name or age is null and continue onto the next record
                               continue;
                           }
                           //Use the object intializer syntax to create a mahasiswaData object inline for simplicity
                           gridData.Add(new mahasiswaData()
                                                   {
                                Nama = Convert.ToString(rawName),
                                                        Umur = Convert.ToInt32(rawAge) 
                                                   });

                        }
                    }
                    else{
                        //Use logging or similar to record that there are no rows. You may also want to raise an exception if this is important.
                    }

                }

            }

        }

    }
    catch(Exception e)
    {
       //Use your favourite logging implementation here to record the error. Many projects use log4Net
       throw; //Throw the error - display and explain to the end user or caller that something has gone wrong!
    }

    return gridData;

} 
```

请注意，如果您确定年龄或姓名永远不会为空，那么您可以简化中间部分：

```
while (reader.Read())
{
    //Use the object intializer syntax to create a mahasiswaData object inline for simplicity
    gridData.Add(new mahasiswaData()
    {
        Nama = reader.GetString(reader.GetOrdinal("Name")),
        Umur = reader.GetInt32(reader.GetOrdinal("Age"))
    });

} 
```

# node.js - 如何在 Nodejs 中使用 Express

> ID：10268840
> 
> 赞同：0
> 
> 时间：2012-04-22T14:35:27.160
> 
> 标签：node.js, express

在 Node.js 中使用 express 时如何将其与客户端连接？

我们是否需要在客户端包含一个 .js 文件？

目标是使用“连接”按钮创建客户端，当我单击该按钮时，客户端连接到服务器，并且在页面上提醒服务器返回。

```
var app = require('express').createServer();

app.get('/', function(req, res){
  res.send('hello world');
});
app.get('message', function(req, res){
console.log(req);
});

app.listen(3000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:48:32.430

您可以在视图文件夹中添加翡翠文件并将按钮添加到其中，然后在单击事件中，如果该 url 与服务器代码的 app.get 匹配，则提供要调用的 url，完成工作并在完成后将其渲染回您想要更改的页面。

用于渲染使用 res.render('index');

你也可以用它传递结果，

res.render('index',{result:result});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T14:43:38.993

Express 是一个 Web 开发框架（预期的客户端是 Web 浏览器）。

在应用程序的根目录中输入`node app.js`，然后在浏览器中打开[http://localhost:3000](http://localhost:3000)

# php - WordPress - 如何拥有一个不会重新加载的静态 DIV？

> ID：10268841
> 
> 赞同：0
> 
> 时间：2012-04-22T14:35:31.540
> 
> 标签：php, jquery, wordpress, static, load

在我的广播网站的新 WordPress 主题的顶部，我想在页面的最顶部有一个 DIV，其中包含一个可以播放广播流的小型 Flash 播放器。

我希望这个 DIV 是静态的，并且每次用户更改页面时都不会重新加载。实现这一目标的最佳方法是什么？

请在 jsFiddle 或类似的东西上提供一个工作演示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:48:38.167

我认为有两种方法可以让音乐继续下去

*   要么你使用框架，所以顶部框架（最好是 0px 高度）永远不会改变和播放音乐
*   或者您可以使用 ajax 构建您的整个网站，您只需更改您需要更改的内容，而不是触动播放器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T14:54:11.703

您可以使用 ajax 进行尝试，您只需通过 ajax 在页面更改请求中提取内容并根据您的要求填充 DOM（音乐播放器部分除外），然后您无需重新加载音乐播放器。

否则，如果您的音乐播放器代码是您`http`请求的一部分，那么没有人可以阻止它重新加载。

# lisp - 如何将特殊运算符应用于列表？

> ID：10268842
> 
> 赞同：2
> 
> 时间：2012-04-22T14:35:32.517
> 
> 标签：lisp, common-lisp

以下测试被拒绝：

```
CL-USER> (apply 'and '(t t t))
; Evaluation aborted on #<CCL::CALL-SPECIAL-OPERATOR-OR-MACRO #x3020013A1F3D> 
```

我的第一个回复是尝试将对`and`特殊运算符的调用封装到 lambda 中或定义我自己的定义，但它当然行不通。因为它会导致在&rest 参数上调用`apply`函数......你将如何解决这个问题？`'and`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T15:28:55.917

请改用 EVERY 函数。

```
(every #'identity '(t t t))  -> t 
```

您不能应用特殊运算符。

下一个解决方案：

```
(reduce (lambda (a b) (and a b))
        '(t t t)
        :initial-value t) 
```

不要将 APPLY 用于列表操作。使用减少。

# android - 动态列表视图中的微调器

> ID：10268847
> 
> 赞同：0
> 
> 时间：2012-04-22T14:36:06.463
> 
> 标签：android, listview, spinner, onclicklistener

我正在尝试使用自定义行创建一个列表视图，每一行都包含一个微调器。我正在用这样的数据填充该行：

```
ArrayList<HashMap> list = new ArrayList<HashMap>();
HashMap row = new HashMap();

row.put("Land_Links", c.getString(1));
row.put("Land_Rechts", c.getString(2));
row.put("Datum", c.getString(11));
row.put("Tijd", c.getString(10));

list.add(row); 
```

在我将它添加到一个 simpleAdapter 之后，然后是 listview.setAdapter。这一切都很完美。我不知道如何为微调器填充和设置 onclicklistener。

你能告诉我应该如何解决这个问题吗？

编辑：

我创建的每一行都创建了 2 个新的微调器，我想填充并将`onclick`侦听器设置为两个新的微调器。我创建了一个数组，其中包含需要在微调器中填充的值。（`R.array.score`）

当我尝试通过将微调器添加到上面的示例来填充微调器时，我得到异常微调器不是可以由这个 simpleAdapter 绑定的视图。

我的目标：要获得一个填充文本视图的循环，填充微调器并`onclick`为微调器设置侦听器。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-22T15:07:47.503

您应该扩展一个适配器（BaseAdapter、SimpleAdapter ...）并在 getView（名称并非总是这样，但通常适用于所有类型的适配器，如 baseAdapter）方法中，您可以将 onClickListener 设置为微调器。

在这里您可以找到有关 ArrayAdapter 的信息 [http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)

这里是 BaseAdapter 的代码

公共类 FrontPageAdapter 扩展 BaseAdapter {

```
private ArrayList<Item> rssItems;
private static LayoutInflater inflater = null;

public FrontPageAdapter(Activity activity, ArrayList<Item> items){
    super();
    rssItems = items;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public int getCount(){
    return rssItems.size();
}

public Object getItem(int position){
    return rssItems.get(position);
}

public long getItemId(int position){
    return getItem(position).hashCode();
}

public View getView(int position, View convertView, ViewGroup parent){
    if (convertView == null)
        convertView =  inflater.inflate(R.layout.frontpage_item, null);

    // Get the item
    Item ls = (Item)getItem(position);
    if (ls == null)
        return convertView;

    //Set the title
    String title = ls.getTitle();
    if (title == null || title.equals("")){
        ((TextView)convertView.findViewById(R.id.FrontPageItemHeader)).setText("");
    }
    else{
        ((TextView)convertView.findViewById(R.id.FrontPageItemHeader)).setText(title);  
    }

    //Obtenemos el contenido. En caso de ser null obtenemos la descripcion
    //  String description = ls.getContent();
    String subtitle= ls.getDescription();
    if (subtitle == null || subtitle.length() == 0){
        ((TextView)convertView.findViewById(R.id.FrontPageItemText)).setVisibility(View.GONE);
    }
    else{
        ((TextView)convertView.findViewById(R.id.FrontPageItemText)).setText(Html.fromHtml(subtitle));
    }

     // Other views, for example your spinner

    return convertView;
} 
```

}

# linux - 为什么我要为库更新重新编译整个程序？

> ID：10268858
> 
> 赞同：9
> 
> 时间：2012-04-22T14:37:14.920
> 
> 标签：linux, compiler-construction, linker, shared-libraries

关于以下链接： [http ://www.archlinux.org/news/libpnglibtiff-rebuilds-move-from-testing/](http://www.archlinux.org/news/libpnglibtiff-rebuilds-move-from-testing/)

有人可以向我解释为什么在更新其库之一后应该重建程序吗？

由于“主”文件根本没有更改，这有什么意义？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-22T14:44:19.150

如果所涉及的函数的签名没有改变，那么“重建”程序意味着必须重新*链接*目标文件。您不需要再次*编译*它们。

API 是描述库中公共函数接口的合约。当编译器生成代码时，它需要知道将什么类型的变量传递给每个函数，以及传递的顺序。它还需要知道返回类型，因此它知道将从函数返回的数据的大小和格式。编译代码时，库函数的地址可能表示为“库的开头，加上 140 个字节”。编译器不知道绝对地址，所以它只是指定了从库开头的偏移量。

但*在*库中，函数的*内容*（即实现）可能会发生变化。发生这种情况时，代码的长度可能会发生变化，因此函数的地址可能会发生变化。链接器的工作是了解每个函数的入口点所在的位置，并将这些地址填充到目标代码中以创建可执行文件。

另一方面，如果库中的*数据结构*发生了变化，并且库需要调用者来管理内存（这是一种不好的做法，但不幸的是很常见），那么您*将*需要重新编译代码以便它能够解释这些变化。例如，如果您的代码用于`malloc(sizeof(dataStructure))`为大小翻倍的库数据结构分配内存，则需要重新编译代码，因为`sizeof(dataStructure)`它将具有更大的值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-22T14:48:10.893

有两种兼容性：API 和 ABI。

API 兼容性是关于其他程序可能依赖的函数和数据结构。例如，如果 0.1 版的 libfoo 定义了一个名为“hello_world()”的 API 函数，而 0.2 版将其删除，则任何依赖“hello_world()”的程序都需要更新才能使用新版本的 libfoo。

ABI 兼容性是关于如何在二进制文件中表示函数，特别是数据结构的假设。例如，如果 libfoo 0.1 还定义了一个`recipe`包含两个字段的数据结构：“instructions”和“ingredients”，并且 libfoo 0.2 在“ingredients”字段之前引入了“measurements”，那么基于 libfoo 0.1 recipes 的程序必须重新编译，因为“instructions”和“成分”字段可能位于 0.2 版本的 libfoo.so 二进制文件中的不同位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T14:53:25.333

什么是“图书馆”？

如果“库”*只是*一个二进制文件（例如，动态链接库，又名“.dll”、“.dylib”或“.so”；或静态链接库，又名“.lib”或“.a”），则存在不需要重新编译，重新链接就足够了（在某些特殊情况下甚至可以避免）

另一方面，库通常不仅仅包含二进制对象——例如，头文件可能包含一些内联（或宏）逻辑。如果是这样，重新链接是不够的，您可能必须重新编译才能使用最新版本的库。

# jquery - 如何使用 jQuery Google Map UI v3 平移到某个点或标记？

> ID：10268859
> 
> 赞同：2
> 
> 时间：2012-04-22T14:37:18.313
> 
> 标签：jquery, google-maps-api-3

我检查了jQuery Google Map v3 api中的所有方法，没有pan。我找到了 v2 的示例，有一个 map.panTo 方法，但在 v3 中不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T14:54:18.193

[https://developers.google.com/maps/documentation/javascript/reference#Map](https://developers.google.com/maps/documentation/javascript/reference#Map)

V3 还是有的`map.panTo(my_latlon);`。也是一个`.panBy(`，但那不是重点。我目前有一个使用 V3 并且也使用这些方法的应用程序，所以我知道它可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T15:10:31.853

该`map.panTo(latLng:LatLng)`功能似乎对我有用：

[JsFiddle 示例](http://jsfiddle.net/D2W3j/)

# eclipse - Eclipse 中缺少包 org.mozilla.interfaces 0.0.0

> ID：10268860
> 
> 赞同：0
> 
> 时间：2012-04-22T14:37:18.813
> 
> 标签：eclipse, eclipse-plugin, dependencies

我正在尝试在 Eclipse 中安装一个名为 textmarker 的插件。但是当我尝试安装一个名为“CEV 功能”的功能时，它会抛出一个错误说`requires 'package org.mozilla.interfaces 0.0.0' but it could not be found`。谁能让我知道如何解决这种依赖关系？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:03:45.993

您需要的软件包可在 [链接中获得](http://ftp.mozilla.org/pub/mozilla.org/xulrunner/releases/1.9.2/sdk/)

根据您的机器下载相应的 xulrunner 解压它，并在文件夹 sdk/lib 中存在 jar 文件。

来源： [http ://code.google.com/p/javaxpcom/wiki/JavaXPCOM_Intro](http://code.google.com/p/javaxpcom/wiki/JavaXPCOM_Intro)

# java - 关于 Java 类的建议

> ID：10268869
> 
> 赞同：1
> 
> 时间：2012-04-22T14:38:21.027
> 
> 标签：java, swing

我正在开始 Java 课程，这是我的第一个代码，所以请温柔；）

```
//importing libraries
import java.io.*;
import javax.swing.*;

public class SongCollection {//class

//declaring arrays to hold user inputs
static String title[]={"","",""};
static String artist[]={"","",""};
static double length[]={0,0,0};

static int arrayindex=0;//declaring an index to keep track of arrays

public static void main(String[] args) throws IOException{//main method
    menu();//calling menu method
}

public static void menu() throws IOException{//menu method
    String s=JOptionPane.showInputDialog("Choose a menu option\n" +//taking user input and storing it into a string
            "1: Add Song\n" +
            "2: Search for a song\n" +
            "3: Edit a song\n" +
            "4: Sort songs\n" +
            "5: Print songs\n" +
            "6: Save songs to file\n" +
            "7: Read songs from file\n" +
            "8: Exit");
    int menu=Integer.parseInt(s);//converting user input into a number

    switch(menu){//going to the appropriate method depending on what number the user presses on the keyboard
    case 1: add(); break;
    case 2: search(); break;
    case 3: edit(); break;
    case 4: sort(); break;
    case 5: print(); break;
    case 6: tofile(); break;
    case 7: fromfile(); break;
    case 8: System.exit(0); break;
    default: JOptionPane.showMessageDialog(null,"Please choose a valid option"); break;
    }
}

public static void add() throws IOException{//add method
    if(arrayindex>=title.length){//checking if the array is full
        JOptionPane.showMessageDialog(null,"Song collection is full");
        menu();
    }

    //taking the user input and storing them into variables
    String newtitle=JOptionPane.showInputDialog("Enter the song title:");
    String newartist=JOptionPane.showInputDialog("Enter the artist of the song:");
    String s=JOptionPane.showInputDialog("Enter the length of the song:");
    double newlength=Double.parseDouble(s);//converting length into a number

    //taking the variables and storing them in the arrays
    title[arrayindex]=newtitle;
    artist[arrayindex]=newartist;
    length[arrayindex]=newlength;
    arrayindex+=1;//incrementing one to the array index because one new entry was added

    menu();
}

public static void search() throws IOException{//search method
    String key=JOptionPane.showInputDialog("Enter your search key: ");//taking in the users search key

    for(int i=0; i<title.length; i++){
        if(key.equals(title[i]) || key.equals(artist[i]) || key.equals(length[i])){//checking if the key is in any of the arrays
            JOptionPane.showMessageDialog(null,title[i]+", "+artist[i]+", "+length[i]);//printing out the found key
            menu();
        }
    }
    JOptionPane.showMessageDialog(null,"Key not found");//if the loop completes the key doesnt exist
}

public static void edit() throws IOException{//edit method
    String s=JOptionPane.showInputDialog("Which entry do you want to edit. Enter a whole number between 0 and " + (arrayindex-1));//asking the user which entry they want to edit
    int edit=Integer.parseInt(s);//converting user input into a number

    if(edit>arrayindex || edit<0){//checking if they enter a valid entry that can be editted
        JOptionPane.showMessageDialog(null,"The entry you entered is does not exist");
        menu();
    }

    //taking new entries from the user
    String newtitle=JOptionPane.showInputDialog("Enter the new song title:");
    String newartist=JOptionPane.showInputDialog("Enter the new artist of the song:");
    String s2=JOptionPane.showInputDialog("Enter the new length of the song:");
    double newlength=Double.parseDouble(s2);

    //storing them into the array replacing what was previously stored in that index
    title[edit]=newtitle;
    artist[edit]=newartist;
    length[edit]=newlength;
    menu();
}

public static void sort(){//sort method
    //nested loop to loop through all elements and make swap when needed
    for(int i=0; i<title.length-1; i++)
    {
        for (int i1=0; i1<title.length-1; i1++)
        {
            //storing title current index and title next into 2 different variables
            String t1 = title[i1];
            String t2 = title[i1 + 1];

            //storing artist current index and artist next index into 2 different variables
            String a1 = artist[i1];
            String a2 = artist[i1 + 1];

            //storing length current index and length next index into 2 different variables
            double l1 = length[i1];
            double l2 = length[i1 + 1];

            //comparing title current index with title next index using the compareto method
            if ((t1).compareTo(t2) > 0)
            {
                //creating a temporary variable to store the first variable and then swapping the 2 around
                String t3 = t1;
                title[i1] = t2;
                title[i1 + 1] = t3;

                String a3 = a1;
                artist[i1] = a2;
                artist[i1 + 1] = a3;

                Double l3 = l1;
                length[i1] = l2;
                length[i1 + 1] = l3;
            }
        }
    }
}

public static void print() throws IOException{//print method
    //looping through and printing out each element
    for(int i=0; i<title.length; i++)
    {
        JOptionPane.showMessageDialog(null,title[i]+","+artist[i]+","+length[i]);
    }
    menu();
}

public static void tofile() throws IOException{//tofile method
    final FileWriter fw=new FileWriter("SongCollection.txt");//declaring filewriter
    final BufferedWriter bw=new BufferedWriter(fw);//delcaring buffer
    final PrintWriter pw=new PrintWriter(bw);//declaring print writer

    //looping through array
    for(int i=0; i<title.length; i++)
    {
        pw.println(title[i]+","+artist[i]+","+length[i]);//using print writer to write all 3 elements on one line
    }
    pw.close();//closing the writer
    menu();
}

public static void fromfile() throws IOException{//from file method
    final FileReader inf=new FileReader("SongCollection.txt");//declaring file reader
    final BufferedReader ib=new BufferedReader(inf);//declaring buffer reader
    String s;//string to hold read lines from file

    while((s=ib.readLine())!=null)//looping through the file while the lines are not empty
    {
        JOptionPane.showMessageDialog(null,s);//outputting the read in data to the screen   
    }
}
 } 
```

我有一些问题：

如何让添加歌曲界面有返回主菜单的按钮？其他接口类似吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T14:50:58.957

这是一个典型的新手错误：你的班级做得太多了。把事情分解一下。

有一个将事物封装在一起的 Song 类：

```
package model;

public class Song {
    private String title;
    private String author;
    private int length;
    // You add the rest.
} 
```

不要使用基元数组；改用[Java 集合](http://docs.oracle.com/javase/tutorial/collections/index.html)。

从模型类中分离出 UI 的东西。无需重写所有代码即可更改 UI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T16:55:24.817

你真的应该使用 Vector 或 ArrayList，而不是那些 String[] 数组。否则，您基本上是在说用户不可能输入三个以上的输入。即使他们可以，您也必须调整数组的大小，或者您会遇到 arrayoutofbounds 异常。

通过声明 Vector 或 ArrayList，您可以继续添加元素（虽然您仍然有可用内存），并且它可以防止原始字符串数组可能引发的数组越界异常。

# c++ - C ++ fstream函数读取一行而不提取？

> ID：10268872
> 
> 赞同：13
> 
> 时间：2012-04-22T14:38:25.830
> 
> 标签：c++, fstream, extraction, peek

在 C++ 中，fstream 库（或任何库）中是否有一个函数允许我在不提取的情况下读取一行到 '\n' 的分隔符？

我知道 peek() 函数允许程序在不提取的情况下“窥视”它读取的下一个字符，但我需要一个类似 peek() 的函数来做到这一点，但要针对整行。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-22T14:49:29.053

您可以使用 和 的组合来做到这`getline`一点。`tellg``seekg`

```
#include <fstream>
#include <iostream>
#include <ios>

int main () {
    std::fstream fs(__FILE__);
    std::string line;

    // Get current position
    int len = fs.tellg();

    // Read line
    getline(fs, line);

    // Print first line in file
    std::cout << "First line: " << line << std::endl;

    // Return to position before "Read line".
    fs.seekg(len ,std::ios_base::beg);

    // Print whole file
    while (getline(fs ,line)) std::cout << line << std::endl;
} 
```

# iphone - 多个 NSFetchedResultsController 的一个委托类？

> ID：10268878
> 
> 赞同：4
> 
> 时间：2012-04-22T14:39:32.507
> 
> 标签：iphone, objective-c, ios, core-data, nsfetchedresultscontroller

我的应用程序中有几个`NSFetchedResultsControllers`，并且在每个视图控制器中，我实现了各自的委托方法。但是，与其将这些委托方法复制到每个实现 的类中`NSFetchedResultsController`，我想我只是创建一个实现这些委托方法的类，并将所有获取的结果控制器的委托设置为指向该类。这是我尝试过的，但不起作用：

由于委托方法需要知道他们正在对哪个表视图进行更改，我想我只需为每个获取的结果控制器创建一个单独的委托类，并为该类发送一个指向表视图的指针：

```
FetchedResultsDelegate *delegate = [[FetchedResultsDelegate alloc] initWithTableView:parentTableView];
self.fetchedResultsController.delegate=delegate;
[delegate release]; 
```

但是，这会导致`BAD_ACCESS`崩溃，所以这意味着我可能不应该做我上面所做的事情。

如何创建一个单一的委托类来处理我所有的委托请求`NSFetchedResultsControllers`？

**编辑：**我可以通过这样做来解决问题`@property (nonatomic, retain) FetchedResultsDelegate *delegate;`吗？有些人在说分配而不是保留？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:50:31.690

没有什么可以保留您的`FetchedResultsDelegate`作为委托属性通常声明为分配。例如[NSFetchedResultsController](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)将委托声明为

```
@property(nonatomic, assign) id <NSFetchedResultsControllerDelegate> delegate 
```

因此，您创建了对象并立即将其销毁，但给 fetchedResultsController 一个讨厌的悬空指针。

要解决此问题，您需要保留代表。所以在你的 UITableViewController 类中添加一个新属性

```
// .h
@property (nonatomic, strong) id<NSFetchedResultsControllerDelegate> tableViewDelegate;

// .m
@synthesize tableViewDelegate = _tableViewDelegate; 
```

然后，当您连接时，您只需将代码更改为此

```
FetchedResultsDelegate *delegate = [[FetchedResultsDelegate alloc] initWithTableView:parentTableView];
self.fetchedResultsController.delegate = delegate;
self.tableViewDelegate = delegate;
[delegate release]; delegate = nil; 
```

## 不要忘记

在 dealloc 中释放这个新的 ivar

```
- (void)dealloc;
{
    // ... other releases
    [_tableViewDelegate release];
    [super dealloc];
} 
```

* * *

分配的使用完全与所有权语义有关。

在这种情况下，您`UITableViewController`应该拥有 tableView 的委托（例如`strong`/ `retain`），因为没有别的。

`NSFetchedResultsController`使用`assign`而不是`retain`/的原因`strong`是因为创建它的对象很有可能充当委托，这将导致两个对象相互拥有（两者都`retain`相互持有），从而导致保留循环

# css - 边界半径问题 CSS

> ID：10268881
> 
> 赞同：0
> 
> 时间：2012-04-22T14:39:39.137
> 
> 标签：css, border

边界半径有点问题。我已经成功地将我的矩形四舍五入，但是我在将悬停在其上的悬停四舍五入时遇到了问题。您将在圆角矩形的顶角和底角看到悬停本身不是圆角的，实际上是一个矩形。我试过把它弄圆，但它也把中心弄圆了。我知道这可能没有意义，但你会通过看这里来理解：http: [//jsfiddle.net/hCg3J/](http://jsfiddle.net/hCg3J/)

我想做的就是让每个选择突出整个区域，而不是突出。

HTML：

```
<ul class="pageitem">
    <li class="list" style="border-top:none;"><a href="iphone4.html";><span class="name">iPhone 4/4S</span><div class="arrow"></div></a></li>
    <li class="list"><a href="iphone3.html";><span class="name">iPhone 3G/3GS</span><div class="arrow"></div></a></li>
    <li class="list"><a href="ipod.html";><span class="name">iPod Touch</span><div class="arrow"></div></a></li>
</ul> 
```

CSS

```
.pageitem {
    -webkit-border-radius: 8px;
    behavior: url(/border-radius.htc);
    border-radius: 8px;
    position:relative;
    zoom: 1;
    -moz-border-radius: 8em;
    -khtml-border-radius: 8px;
    border-radius: 8px;
    background-color: #fff;
    border: #878787 solid 1px;
    font-size: 12pt;
    overflow: hidden;
    padding: 0;
    height: auto;
    width: auto;
    margin: 3px 9px 17px;
    list-style: none
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T14:46:30.180

只需添加适当`-webkit-border-radius`的`.list:hover, name:hover`内容并根据您的需要进行调整。

这是一个[jsfiddle 概念证明](http://jsfiddle.net/hCg3J/4/)。您需要做的是仅对顶部元素的左上角和右上角以及底部元素的左下角和右下角进行舍入。我建议为这些元素添加一个特殊的类。

更新：

实际上，正如我在评论中建议的那样，我添加了第一个孩子和最后一个孩子选择器，[更新了小提琴](http://jsfiddle.net/hCg3J/7/)

```
.list:hover:first-child, name:hover:first-child {
     -webkit-border-radius: 8px 8px 0px 0px;
}

.list:hover:last-child, name:hover:last-child {
     -webkit-border-radius: 0px 0px 8px 8px;
} 
```

# while-loop - While 循环执行次数过多

> ID：10268884
> 
> 赞同：0
> 
> 时间：2012-04-22T14:40:19.867
> 
> 标签：while-loop

这个程序读取文本文件，在这种情况下，读取这个：

```
Sam

5 0 0 0

Dave

5 5 0 0

Bill

5 -5 0 0

Louise

3 3 5 0 
```

在我的程序早期，我执行以下 while 循环：

```
 int count = 0;

        while (input.hasNextLine())
        {

            count++;

            if (count % 2 == 1) //for every other line, reads the name
            {
                String line = input.nextLine(); 
                names.add(line); //puts name into array
            }

            if (count % 2 == 0) //for every other line, reads the ratings
            {
                ArrayList<Integer> rtemp = new ArrayList<Integer>();
                while (input.hasNextInt())
                {
                    int tempInt = input.nextInt();
                    rtemp.add(tempInt);
                }               
                allratings.add(rtemp);  

            }

        } 
```

出于某种原因，当这个 while 循环完成时，int 计数为 14。我只希望它为 8，并认为它应该是，考虑到只有 8 行文本，它应该是为每一行执行。显然，这会在程序的后期引起很大的问题。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:21:33.687

从你的第二个循环看来，光标永远不会移动到下一行......我在你之后添加了下面的行 `allratings.add(rtemp);` 并且它起作用了。

```
if(input.hasNext())
  input.next(); 
```

# eclipse - 如何将谷歌 svn 导入 eclipse/subclipse？

> ID：10268886
> 
> 赞同：0
> 
> 时间：2012-04-22T14:40:44.267
> 
> 标签：eclipse, svn, subclipse

我正在尝试将该 svn 导入 subclipse： [http ://code.google.com/p/cloud-tasks-io/source/checkout](http://code.google.com/p/cloud-tasks-io/source/checkout)

但我得到了那个错误：

> mkdir --parents -m "初始导入。" [http://cloud-tasks-io.googlecode.com/svn/trunk/test](http://cloud-tasks-io.googlecode.com/svn/trunk/test) svn: MKACTIVITY of '/svn/!svn/act/71937bda-3601-0010-a1a3-7d548ee24bfd': 405 Method Not Allowed (http: //cloud-tasks-io.googlecode.com) svn: MKACTIVITY 请求在 '/svn/!svn/act/71937bda-3601-0010-a1a3-7d548ee24bfd' 上失败 svn: MKACTIVITY of '/svn/!svn/act/ 71937bda-3601-0010-a1a3-7d548ee24bfd': 405 方法不允许 (http://cloud-tasks-io.googlecode.com) svn: MKACTIVITY 请求在'/svn/!svn/act/71937bda-3601-0010 上失败-a1a3-7d548ee24bfd'

为什么我不能将该 svn 导入 subclipse？

提前问候和谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:44:03.327

看起来你做错了很多事情。

1.  似乎您正在尝试将 Eclipse 中的某些内容添加到该 Google 存储库中？但是您的问题听起来像是您的目标是结帐。
2.  您没有使用正确的 URL。您应该打开 SVN 透视图，然后使用以下 URL 添加存储库：http: [//cloud-tasks-io.googlecode.com/svn/](http://cloud-tasks-io.googlecode.com/svn/)
3.  然后，您应该能够将该存储库扩展到包含您要签出的项目的文件夹。

请注意，如您链接到的页面所述，此存储库 URL 是只读的。因此，如果您确实想向该项目提交新代码，您必须是具有适当权限的项目成员，并且您必须使用允许写入访问权限的 URL。Google 在某处提供了该 URL，但我似乎记得它只是相同的 URL，除了您使用 https:// 而不是 http://

# sms - 接收短信提醒

> ID：10268887
> 
> 赞同：2
> 
> 时间：2012-04-22T14:40:55.080
> 
> 标签：sms

我被要求为用户构建一个应用程序，以便在他报告他的摩托车的交通更新时接收他的 iphone 的文本更新。有没有办法编写一个接收这些短信的应用程序？还是有更简单的方法来做到这一点？他不想透露他的电话号码。

# asp.net - 如何更改 gridview 所选项目的背景颜色？

> ID：10268891
> 
> 赞同：2
> 
> 时间：2012-04-22T14:41:20.900
> 
> 标签：asp.net

如何在 Asp.net Web 应用程序中更改 gridview 选定项的背景颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:47:13.157

您可以在 GridView 标记下的 aspx 页面中执行此操作：

```
<SelectedRowStyle BackColor="Orange" /> 
```

但是，如果您想在鼠标悬停或鼠标移出时使用不同的颜色，请在 RowDataBound 事件下的代码中尝试以下操作

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            e.Row.Attributes.Add("onmouseover", "this.style.cursor='hand';this.style.backgroundColor='orangered'");
            e.Row.Attributes.Add("onmouseout", "this.style.backgroundColor='white'");
        }
    } 
```

如果您想在不单击按钮的情况下选择一行，还请查看此链接：[ASP.NET: Selecting a Row in a GridView](http://msmvps.com/blogs/deborahk/archive/2010/01/25/asp-net-selecting-a-row-in-a-gridview.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T14:59:03.823

`onmouseover`您可以尝试在事件上调用 javascript 函数。[这个网站](http://www.c-sharpcorner.com/uploadfile/mahakgupta/how-to-change-color-of-rows-in-gridview-on-mouseover/)有一个简单的例子：

在服务器端：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        e.Row.Attributes["onmouseover"] =
            "javascript:mouseovercolor(this);";
        e.Row.Attributes["onmouseout"] =
            "javascript:mouseoutcolor(this);";
    }
} 
```

在客户端：

```
<script language=javascript type="text/javascript">
    function mouseovercolor(mytxt) {
        mytxt.bgColor = 'Orange';
    }
    function mouseoutcolor(mytxt) {
        element.bgColor = 'White';
    }
</script> 
```

**编辑：** [这个网站有一个很好的例子](http://www.codeproject.com/Tips/209416/Make-the-entire-GridView-Row-clickable-and-selecta)，说明如何使它与`onClick`事件一起工作：

服务器端：

```
protected void GridView1_RowDataBound(Object sender, GridViewRowEventArgs e){
  if (e.Row.RowType == DataControlRowType.DataRow){
    // javascript function to call on row-click event
    e.Row.Attributes.Add("onClick", "javascript:void SelectRow(this);");
  }
 } 
```

客户端：

```
<script type="text/javascript">
         // format current row
         function SelectRow(row) {
             var _selectColor = "#303030";
             var _normalColor = "#909090";
             var _selectFontSize = "3em";
             var _normalFontSize = "2em";
             // get all data rows - siblings to current
             var _rows = row.parentNode.childNodes;
             // deselect all data rows
             try {
                 for (i = 0; i < _rows.length; i++) {
                     var _firstCell = _rows[i].getElementsByTagName("td")[0];
                     _firstCell.style.color = _normalColor;
                     _firstCell.style.fontSize = _normalFontSize;
                     _firstCell.style.fontWeight = "normal";
                 }
             }
             catch (e) { }
             // select current row (formatting applied to first cell)
             var _selectedRowFirstCell = row.getElementsByTagName("td")[0];
             _selectedRowFirstCell.style.color = _selectColor;
             _selectedRowFirstCell.style.fontSize = _selectFontSize;
             _selectedRowFirstCell.style.fontWeight = "bold";
         }
</script> 
```

# jquery - outerHeight(true) 给出错误的值

> ID：10268892
> 
> 赞同：22
> 
> 时间：2012-04-22T14:41:36.233
> 
> 标签：jquery, positioning, dimensions

我想要一个容器元素的高度，包括边距和填充。

当我将鼠标悬停在 Chrome 开发工具中的元素上时，我得到了我正在寻找的值，但是当我使用 jQuery 时`$('element').outerHeight(true)`；我得到的值要小得多。

该元素包含一个 jQuery 轮播（在带有`position:relative`和 items的容器中`position: absolute`），这可能与它有关吗？

提前致谢

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-01-14T21:45:18.277

我已经多次遇到这个问题，最好的解决方案是在不使用任何插件或不规则的 setTimeout 函数的情况下，使用 hook 到浏览器的 onLoad 事件中。使用 jQuery，它是这样完成的：

`$(window).load(function(){ ...outerHeight logic goes here... });`

这可能与您的标准完全不同，`$(function(){ ...code... });`因此您所有其他正常工作的代码都不必等到页面上的每个元素都加载完毕。

**首先为什么会发生这种情况：**
Chrome 的渲染算法与 Firefox 不同，这会导致它在页面上的所有元素完全绘制/显示并可供 jQuery 选择和检索高度之前触发 onLoad 事件。`setTimeout()`大部分时间都可以工作，但你不想对天生如此盲目的东西产生依赖——谁知道呢，将来 Chrome 中的这个“怪癖”可能会被修复！:)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-18T06:57:52.997

我有同样的问题。*通过使用setTimeout*稍等片刻，我在 Chrome 中获得了正确的高度：

```
 setTimeout ( function () {
        var ht = $('.my-class').outerHeight( true );
    }, 1); 
```

我希望这会有所帮助！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-03T11:15:35.763

I've run into same problem.

Firefox outerheight via console.log: 430 Chrome outerheight via console.log: 477

Real outerheight (firebug layout): 820

After opening Firebug or removing statusbar it sets correct value (820) in console.log (and hence the code works as it should).

The issue was due to images. Even though you are running it on document ready, not all images might be loaded yet, and therefore the calculations are wrong.

I am using desandro's plugin and it has fixed my issue. [https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-22T14:45:12.563

我想你可能需要

```
.outerHeight({margin: true}); 
```

按照[这里](http://docs.jquery.com/Plugins/dimensions/outerHeight)：

> 可以通过将边距设置为 true 的选项映射来包含边距。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-05-27T22:41:04.327

对我来说完全正确的工作是@Matt Reilly 和@Lasha 答案的结合

```
$(window).load(function() {
    setTimeout(function() {
        // all the logic in here
    }, 1);
}); 
```

我曾经把代码放进去，`$(document).ready(function(){...});`但有时它会变得古怪，所以上面的工作完美。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-10-31T12:59:11.830

内部隐藏、固定和绝对元素没有使用 outerHeight 正确计算。

试试 scrollHeight 属性：

```
$('element').prop('scrollHeight') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-07T16:32:59.957

如果窗口已加载并且文档已准备好并且您已经考虑了浮动并且您仍然遇到此问题，那么请考虑寻找具有相同 id 的元素。确保您使用 jQuery 选择器获得了正确的元素。我忘了我在 dom 中有另一个具有完全相同 id 的元素。考虑使用 jQuery 更改背景颜色来验证。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-13T12:08:43.027

一个小技巧。将代码放在 jquery 的加载、滚动和调整大小函数中，如下所示：

```
$(window).on('load scroll resize', function(){
    //outerHeight code
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-24T05:50:43.043

尝试了这些解决方案中的每一个。最后打开检查器，发现我`p`还有一个`margin-top`. 一如既往地感谢规范化...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-31T18:49:47.850

如果您按类选择，您可以一次选择多个元素，如果第一个元素的高度错误，它将是您使用 outerHeight() 获得的高度（这是我个人的问题）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-21T21:16:45.763

[根据文档](http://api.jquery.com/outerheight/)，`outerHeight`不能保证在以下情况下准确：

*   页面被缩放
*   元素或其父元素被隐藏

# c# - 如何将 Socket EndPoint 传递给 WCF 服务？

> ID：10268893
> 
> 赞同：0
> 
> 时间：2012-04-22T14:41:40.600
> 
> 标签：c#, wcf, sockets, file-transfer, endpoint

我使用 WCF 传输文件

在客户端 [WINFORM]

```
private void Send(TransferEntry Entry, int bufferSize)
    {
        using (FileStream fs = new FileStream(Entry.SrcPath, FileMode.Open, FileAccess.Read))
        {
            byte[] buffer = new byte[bufferSize];
            long sum = 0;
            int count = 0;
            using (Socket listener = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp))
            {
                IPEndPoint endpoint = new IPEndPoint(IPAddress.Any, 0);
                listener.Bind(endpoint);
                listener.Listen(1);
                client.Receive(listener.LocalEndPoint, Entry.DestPath, Entry.Size, bufferSize);
                //i get an exception here.
                using (Socket socket = listener.Accept())
                {
                    do
                    {
                        count = fs.Read(buffer, 0, buffer.Length);
                        socket.Send(buffer, 0, count, SocketFlags.None);
                        sum += count;
                        worker.ReportProgress((int)((sum * 100) / Entry.Size));
                    } while (sum < Entry.Size);
                }
            }
        }
    } 
```

在 WCF [服务]：在 IFileManager.cs 上：

```
[OperationContract]
    void Receive(System.Net.EndPoint endpoint, string destPath, long size, int bufferSize); 
```

在 FileManagerService.cs 上：

```
public void Receive(EndPoint endpoint, string destPath, long size, int bufferSize)
    {
        using (Socket client = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp))
        {
            client.Connect(endpoint);
            using (FileStream fs = new FileStream(destPath, FileMode.Create, FileAccess.Write))
            {
                byte[] buffer = new byte[bufferSize];
                long sum = 0;
                int count = 0;
                do
                {
                    count = client.Receive(buffer, 0, buffer.Length, SocketFlags.None);
                    fs.Write(buffer, 0, count);
                } while (sum < size);
                fs.Flush();
            }
        }
    } 
```

**然后我在客户端 [Winform] 得到了这个异常**：

`System.ServiceModel.CommunicationException was unhandled by user code Message=There was an error while trying to serialize parameter http://tempuri.org/:endpoint. The InnerException message was 'Type 'System.Net.IPEndPoint' with data contract name 'IPEndPoint:http://schemas.datacontract.org/2004/07/System.Net' is not expected. Consider using a DataContractResolver or add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.'. Please see InnerException for more details.`

为什么只有当我传递`EndPoint`参数时才会发生这种情况！我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:56:08.773

您的服务器期待一个`EndPoint`，但您正在发送一个`IPEndPoint.`

您可以通过告诉服务期望`IPEndPoint`使用[ServiceKnownTypeAttribute](http://msdn.microsoft.com/en-us/library/system.servicemodel.serviceknowntypeattribute.aspx)来解决此问题。

# c# - VS2010中的真透明图片框

> ID：10268900
> 
> 赞同：0
> 
> 时间：2012-04-22T14:42:23.350
> 
> 标签：c#, winforms, visual-studio, transparency, picturebox

在我的 WinForm 应用程序中，我需要对一些图像进行分层。但是，我无法获得透明控件来放置图像。我做了一些研究并提出了以下课程：

```
public class TransparentPicture : PictureBox
{
    protected override CreateParams CreateParams
    {
        get
        {
            CreateParams cp = base.CreateParams;
            cp.ExStyle |= 0x20;
            return cp;
        }
    }

    protected override void OnPaintBackground(PaintEventArgs e)
    {
        // do nothing
    }

    protected override void OnMove(EventArgs e)
    {
        RecreateHandle();
    }

} 
```

在我关闭 Visual Studios 并重新打开解决方案之前，这似乎工作正常。然后我的控件全部消失在设计器中。它们在我运行程序时显示，但我也需要它们在设计器中显示，我可以继续设计我的应用程序。

我知道这不是我需要做的所有事情，因为这些控件总是导致我的程序冻结几秒钟之类的东西。

所以我的问题是..有人知道我在哪里可以找到透明控件的代码，或者如何修复我拼凑在一起的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T14:52:28.397

使TransparentPicture 成为常规PictureBox，直到IsTransparent 属性设置为true。

在设计时将该属性设置为 false，并在 FormLoad 事件中设置为 true（仅在您实际运行应用程序时才会发生）。

这样，在设计时，它们将表现得像普通的图片框，但是当您运行应用程序时，它们将变得透明。

```
public class TransparentPicture : PictureBox
{
    public bool IsTransparent { get; set; }

    protected override CreateParams CreateParams
    {
        get
        {
            CreateParams cp = base.CreateParams;

            if (this.IsTransparent)
            {
                cp.ExStyle |= 0x20;
            }

            return cp;
        }
    }

    protected override void OnPaintBackground(PaintEventArgs e)
    {
        if (!this.IsTransparent)
        {
            base.OnPaintBackground(e);
        }
    }

    protected override void OnMove(EventArgs e)
    {
        if (this.IsTransparent)
        {
            RecreateHandle();
        }
        else
        {
            base.OnMove(e);
        }
    }
} 
```

然后，在您的 FormLoad 事件中，您应该执行以下操作：

```
for (var i = 0; i < this.Controls.Count; i++)
{
    var tp = this.Controls[i] as TransparentPicture;

    if (tp != null)
    {
        tp.IsTransparent = true;
    }
} 
```

或者，如果您只有几个：

```
tp1.IsTransparent = tp2.IsTransparent = tp3.IsTransparent = true; 
```

# android - 全面管理 Android 中的 Fragment 流

> ID：10268903
> 
> 赞同：1
> 
> 时间：2012-04-22T14:43:13.657
> 
> 标签：android, android-activity, transactions, fragment, flow

我的应用程序中有一个特殊的片段流，因此我需要能够切换到任何片段，同时尽可能将片段保留在内存中（所以如果内存紧张，可以释放片段）。

到目前为止，我已经成功地替换了当前片段，但问题是前一个片段总是被破坏，所以如果我回到它（例如使用操作栏），它会重新创建并这需要一些时间。

我使用片段而不是活动的原因是操作栏的良好使用，将多个片段放入同一个容器中的能力，非灵活的活动意图使用等......

我不使用“返回”堆栈的原因是我希望从任何片段转到任何片段，因为流程可以改变。

这是我的代码片段：

```
Fragment fragment=... ; //get the fragment from cache or create if not available yet...
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        ft.replace(R.id.mainActivity_fragmentContainer, fragment).commit(); 
```

我也尝试过使用 ViewPager，但由于我不想具有滑动效果（它允许您滑动到其他片段）并且由于其中一个片段已经包含 viewPager，所以它是一个障碍。禁用主 viewPager 上的滑动效果会以某种方式在另一个上禁用它。

顺便说一句，我使用的是片段的 android 支持库，而不是原生 API。

**我的问题是：我如何才能完全控制要转到哪个片段，同时最大限度地提高速度并避免太多内存用于片段？**

* * *

编辑：现在，我使用下一个解决方法：对于 onDestroyView，我采用创建视图的父级并从那里删除创建的视图。

对于 onCreateView ，如果我已经拥有之前创建的视图，我会返回它。

但是，我认为这是一件非常冒险的事情，因为我不确定片段管理是如何工作的，所以它可能会导致奇怪的问题。另外，我不确定如果 android 确定它的内存不足会发生什么 - 它会破坏未使用的片段（这很好）还是会导致内存不足异常（这很糟糕）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T15:55:37.043

实现目标的一种方法是使用 FragmentTransaction.show 和 FragmentTransaction.hide。您可以使用 Fragment.isAdded 来确定是第一次显示还是调用 FragmentTranscation.add。缺点是当显示和隐藏片段时你不会得到暂停/恢复事件；您将需要覆盖 onHiddenChanged。如果您想支持后退导航，您还必须管理自己的堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T15:51:19.043

我同意你关于“风险很大”的评论。由于您的方法的后果不是很清楚，我不建议使用它。

为了更好地了解您的问题并给您一些指示：

1.  你认为什么是慢？我也一直“疯狂”地切换片段，它在平板电脑上运行良好，但在一些低端手机上需要更长的时间——但仍然可以接受

2.  您的片段需要创建多少工作？即每次需要准备什么样的底层数据？（同样，我有几个超过 1k 条目的列表片段，它们每次都准备好，而且速度非常快）

3.  你如何准确地替换片段？你特别打电话给`getFragmentManager().executePendingTransactions();`

# xcode - 是否可以查看mac应用程序的来源？

> ID：10268907
> 
> 赞同：7
> 
> 时间：2012-04-22T14:44:09.277
> 
> 标签：xcode, macos, decompiling

看看事情是如何运作的，但不确定它的合法性会很有用

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T14:54:58.627

大多数 Mac 应用程序都是使用 Objective-C 中的 Cocoa 编写的；虽然它是一种编译语言，但这意味着有相当多的信息可供反编译器使用。

我不确定是否有很多利用这些信息的反编译器，至少我没有听说过。

但是，还有另一种选择；[F脚本](http://www.fscript.org/)。

F-Script 可用于附加到可执行文件并探索其接口，虽然不如源代码好，但它可以让您非常清楚地了解可执行文件是如何构建的，以及它是如何运行的。

至于合法性问题：

IANAL，但据我所知，出于兼容性目的的逆向工程在许多司法管辖区都是合法的，我无法想象反编译可执行文件以查看其代码是非法的，除非特定的 EULA 明确禁止。

**编辑：**特别是 WRT Steam，它可能不是用 Cocoa 编写的，而是带有某种 .NET 兼容层的 C#；如果您想学习如何为 Mac OS X 制作应用程序，这可能不是一个好的起点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-16T15:12:34.360

到目前为止，我用过的最好的 Mac OS X 反汇编程序是 Hopper，可在此处获得：http: [//www.hopperapp.com/](http://www.hopperapp.com/)

它还将尽其所能将程序集转换为 C 伪代码。它将生成带有蓝线（真正的蓝色，喜欢它）的代码流程图，表示正确的路径，红色的表示错误的路径。

它是 Mac OS 逆向工程工具。甚至还有[Youtube](https://www.youtube.com/results?search_query=hopperapp%20macos)视频会向您展示如何使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T14:52:06.947

如果它是一个开源应用程序，是的。否则，可以通过[反编译](http://en.wikipedia.org/wiki/Decompiler)来实现，但输出将是一个真正的痛苦。如果您只想要类别和类的协议和接口，请查看[class-dump](http://www.codethecode.com/projects/class-dump/)。

我不知道 nib 反编译器。

反编译是否合法：请教律师。这可能（并且可能确实）因司法管辖区而异。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-22T15:14:35.003

> 是否可以查看mac应用程序的来源？

实际上，没有。当然，您可能可以使用反编译器进行查看，但是您将获得的输出类型不容易阅读。如果你问这个问题，这条路线可能对你没有帮助。

> 对 GUI 以及 mac 版 steam 应用程序的工作方式特别感兴趣

可以肯定的是，它的工作方式与大多数其他应用程序的工作方式大致相同。它可能使用自定义控件*看起来*不同于主要使用标准 Cocoa 控件的典型应用程序。但在底层，几乎所有为 MacOS X 编写的 GUI 应用程序都将使用 Cocoa 提供的运行循环、响应程序链和视图层次结构。主要的例外是主要使用 OpenGL 或 WebKit 等替代框架构建的应用程序。

具体来说，弄清楚 Steam 应用程序做了哪些您想做的事情。看看 Cocoa 提供的工具，看看你能不能自己弄明白；如果没有，请在这里询问。

# php - mysql php搜索表单 - 想要在选择查询之前从用户输入中去除特殊字符

> ID：10268914
> 
> 赞同：0
> 
> 时间：2012-04-22T14:44:59.947
> 
> 标签：php, mysql, regex, forms, search

我试图弄清楚如何在运行 SQL SELECT 查询之前从 PHP 搜索表单中的用户输入中去除特殊字符。

我有一个 PHP 搜索表单，可将​​用户输入提交给选择查询 > mysql 5 > Linux。选择查询查看一列中的 LIKE 匹配并将结果返回到结果页面。数据库中的列没有特殊字符 - 只是字母数字值。

我的数据库字段值看起来像这样 33345678DEP

如果用户输入 333-456*78DEP ，我将如何去除特殊字符？

我读过关于 REGEX - 看起来它可能是答案，但我不知道如何实现它。

执行搜索的我的 PHP 代码如下：

```
if (isset($_GET['InventoryByVendorForm'])) {
$colname_InventoryByVendorResults = $_GET['InventoryByVendorForm'];
}
mysql_select_db($database_ic3, $ic3);
$query_InventoryByVendorResults = sprintf("SELECT icCombinedSupplier_wrk.icMaster_icmKEY, icCombinedSupplier_wrk.icsSupplierID, icCombinedSupplier_wrk.icsPartNum, icCombinedSupplier_wrk.icsQuantityOnHand, icCombinedSupplier_wrk.icsCost, icCombinedSupplier_wrk.icsCore, icCombinedSupplier_wrk.icsLastInventoryUpdate, icMaster.icmLineCode, icAttributes.`icaPartslink#` AS icaPartslink FROM icMaster INNER JOIN (icCombinedSupplier_wrk INNER JOIN icAttributes ON icCombinedSupplier_wrk.icMaster_icmKEY = icAttributes.icMaster_icmKEY) ON icMaster.icmKEY = icCombinedSupplier_wrk.icMaster_icmKEY WHERE `icCombinedSupplier_wrk`.`icMaster_icmKEY` Like %s ORDER BY icMaster_icmKEY ASC", GetSQLValueString("%" . $colname_InventoryByVendorResults . "%", "text")); 
```

我最好的猜测是我需要在语句周围实现 REGEX [[alnum]] 的使用：

```
$colname_InventoryByVendorResults = $_GET['InventoryByVendorForm'] 
```

如何从搜索框中的用户输入中删除所有非字母/数字字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:58:02.540

[preg_replace](http://php.net/manual/en/function.preg-replace.php)是执行此操作的正确工具：

```
$validated = preg_replace("/[^A-Za-z0-9]/","",$colname_InventoryByVendorResults); 
```

字母数字字符集有快捷方式，但这种方式非常直观易懂。

"^" 否定选择，因此任何不是字母数字的字符都将被空字符串替换。

祝你有美好的一天，斯特凡

# python - 使用 decode() 与正则表达式来取消转义这个字符串

> ID：10268918
> 
> 赞同：7
> 
> 时间：2012-04-22T14:45:30.633
> 
> 标签：python, regex, string, escaping, decode

我有以下字符串，我正在尝试找出取消转义它的最佳做法。

该解决方案必须有点灵活，因为我从 API 接收此输入，并且我不能绝对确定当前字符结构（`\n`而不​​是`\r`）将始终相同。

`'"If it ain\'t broke, don\'t fix it." \nWent in for a detailed car wash.\nThe attendants raved-up my engine when taking the car into the tunnel. NOTE: my car is...'`

这个正则表达式似乎应该可以工作：

```
text_excerpt = re.sub(r'[\s"\\]', ' ', raw_text_excerpt).strip() 
```

我也读过这`decode()`可能会起作用（并且通常会是一个更好的解决方案）。

```
raw_text_excerpt.decode('string_unescape') 
```

沿着这些路线尝试了一些东西，但没有奏效。有什么建议么？正则表达式在这里最好吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-03T08:18:15.023

您正在寻找的编解码器是`string-escape`：

```
>>> print "\\'".decode("string-escape")
' 
```

我不确定他们在哪个版本中添加了它，但......可能是您正在使用的旧版本，没有它。我在跑：

```
Python 2.6.6 (r266:84292, Mar 25 2011, 19:36:32) 
[GCC 4.5.2] on linux2 
```

# bash - awk 语法错误帮助识别

> ID：10268920
> 
> 赞同：1
> 
> 时间：2012-04-22T14:45:46.713
> 
> 标签：bash, awk

我似乎无法确定语法错误在哪里..我尝试了这两条语句，但没有任何内容写入“BlockedIPs”文件。有人可以帮忙吗？谢谢！

```
awk '/ (TCP|UDP) / { split($5, addr, /:/); cmd = "/Users/user1/Scripts/geoiplookup " addr[1] | awk '{print $4, $5, $6}'; cmd | getline rslt; close(cmd); print $1, $2, $3, rslt }' < "$IP_PARSED" >> "$BlockedIPs"

awk '/ (TCP|UDP) / { split($5, addr, /:/); cmd = "/Users/user1/Scripts/geoiplookup " addr[1] " | awk '{print $4, $5, $6}'" ; cmd | getline rslt; close(cmd); print $1, $2, $3, rslt }' < "$IP_PARSED" >> "$BlockedIPs" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:37:27.807

您的问题主要在于引用，并且源于您试图从 AWK 单行代码中调用 AWK 的事实。这当然是可能的，但要正确引用将是非常棘手的。

`geoiplookup`如果您将完整的输出检索到一个变量中，然后执行 a`split()`来获取您需要的数据，那会好得多。就像是：

```
awk '/ (TCP|UDP) / { split($5, addr, /:/); cmd = "/Users/user1/Scripts/geoiplookup " addr[1]; cmd | getline rslt; split(rslt, r); close(cmd); print $1, $2, $3, r[4], r[5], r[6] }' < "$IP_PARSED" >> "$BlockedIPs" 
```

# .net - 谷歌地图 VBnet

> ID：10268923
> 
> 赞同：2
> 
> 时间：2012-04-22T14:46:06.417
> 
> 标签：.net, google-maps

我试图通过谷歌地图获得从一个地方到另一个地方的“旅行距离”。谷歌 API 对 vbnet 并不完全有用。

所以我选择了另一种方法......即使用网络浏览器。

[http://maps.google.com/maps?daddr=XXX&saddr=YYY](http://maps.google.com/maps?daddr=XXX&saddr=YYY) 这将在浏览器中获取地图，我想我能做的就是提取 DocumentText 以检索我需要的信息，但我遇到了同样的问题 [如何获得完整的 html 源代码？](https://stackoverflow.com/questions/7740095/how-to-get-a-full-html-source)

如果有办法获得“完整来源”，请感谢任何帮助。或者是否有任何方法可以直接获得“旅行距离”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T15:18:32.053

您正在谈论的过程不是*官方支持*的通过谷歌地图获取旅行距离的方式。我的建议是使用可以提供您正在寻找的内容的[Google Distance Matrix API Web Service 。](https://developers.google.com/maps/documentation/distancematrix/)

# opencl - 需要一个在 QEMU 下工作的 OpenCL 库

> ID：10268925
> 
> 赞同：1
> 
> 时间：2012-04-22T14:46:29.757
> 
> 标签：opencl, qemu

我不确定是否要安装它，但我需要一个可以在 QEMU 下实际工作的 OpenCL 库。我已经尝试过 NVidia 和 AMD，但它们似乎都没有在那里运行。有人有什么主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:38:57.423

使用 Intel 或 AMD 的库，它们都在 CPU 上运行。

# java - JList 到 JTextArea

> ID：10268934
> 
> 赞同：0
> 
> 时间：2012-04-22T14:47:47.353
> 
> 标签：java, swing, jlist, jtextarea

好的，这是我在 JAVA 中的第一个项目（银行应用程序），我想要的只是显示从数据库中获取的结果并将其设置为 JTextArea。但是，我希望银行职员能够单击 JTextArea 中的一行并执行某些操作（一旦我在 JTextArea 中获得结果，我将处理该问题）；这就是我使用 JList 的原因。我已经达到了能够在不使用 JList 的情况下在 JTextArea 中显示结果的地步。我的问题是：

*   如果可能，如何将 JList 放入 JTextArea？

这是我的代码的一部分：

```
// function that will search for a record in the database
private void searchRecord(){

    try {

        Connection connect = null;

        Class.forName("com.mysql.jdbc.Driver");

        String url = "url";
        String user = "user";
        String password ="password";

        connect = DriverManager.getConnection(url,user,password);

        Statement SQLStatement = connect.createStatement();
        String select = "SELECT * FROM customerinfo WHERE LastName LIKE '"+ txtSearch.getText().trim() +"%'";
        ResultSet rows = SQLStatement.executeQuery(select);

        while(rows.next()){

            textArea.setLineWrap(true);

            String first = rows.getString("FirstName");
            String last = rows.getString("LastName");
            String middleInitial = rows.getString("MiddleInitial");
            String[] row = {first, last, middleInitial};
            list = new JList(row);
            list.setVisibleRowCount(5);
            list.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
            //textArea.append(row[1].toString() + ", " + row[0].toString() + " " + row[2].toString() + ".\n");
            textArea.append(list values goes here + "\n"); // here is where I'm stuck!!!
            //System.out.println(rows.getString("LastName"));
        } 
```

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:11:45.923

```
//Dont put list to JTextArea.You can put data into directly

String first = rows.getString("FirstName");
String last = rows.getString("LastName");
String middleInitial = rows.getString("MiddleInitial");

JTextArea txaDetails=new JTextArea();
txaDetails.append("\n"+first +last +middleInitial +"\n");
txaDetails.setCaretPosition(txaDetails.getDocument().getLength()); 
```

# git - git pull 删除未提交的更改

> ID：10268940
> 
> 赞同：11
> 
> 时间：2012-04-22T14:48:34.690
> 
> 标签：git

我刚刚在 github 上创建了一个新的存储库。从一个充满文件的文件夹开始，我所做的步骤是：

```
git init
git add -A
git remote add origin ...

#Now pull in the first commit that github made
git pull origin master

#Check everything is OK
ls 
```

哎呀！我所有的文件都消失了！发生了什么？我可以让他们回来吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-22T17:40:40.817

你可以让他们回来。尽管唯一指向它的是索引，`git add`但仍将添加的内容放在 repo 中。我会从 a 开始`git fsck`寻找“悬空”（git 对“未引用”的稍微古怪的拼写）blob 和`git cat-file -p`那些 blob，如果有太多我会做类似`find .git/objects -type f | xargs ls -lt`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-07-30T10:23:36.633

对我来说，以下工作：

1.  转到受影响的文件。
2.  右键单击并选择**Local History**并选择**Show History**。从那里您可以查看对文件所做更改的历史记录，然后选择要将文件恢复到的时间。
3.  你会得到两个窗口，左边的一个有**>>**。单击所有**>>**，这会将您的更改发送到右侧窗口。
4.  关闭窗口，然后您就可以将文件恢复到您想要的位置。

我希望它有帮助！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-04T02:26:05.347

我同意接受的答案，但是在我的情况下，结果太多了`git fsck`。这个解决方案帮助我找到丢失的文件：

在丢失的文件中搜索字符串：

```
grep -rin <string_in_missing_file> .git/ 
```

例如：

```
grep -rin MyClassName .git/ 
```

搜索结果：

```
.git//lost-found/other/3cfaa36226f52a5c1b38c2d2da3912656c998826:5:class MyClassName extends ParentClass
.git//lost-found/other/e7b8923de4afb230ad523b5b515f50cb9c624248:5:class MyClassName extends ParentClass 
```

搜索结果在哪里：

```
.git/<path_to_file>:<line_number_of_found_string>:<found_string_and_context> 
```

然后恢复文件：

```
git cat-file -p 3cfaa36226f52a5c1b38c2d2da3912656c998826 > ../<desired_file_path>/MyClassName.php 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-01-03T17:19:12.217

当我尝试推送我的提交并收到提示时，我做了类似的事情：更新被拒绝，因为您当前分支的提示落后于提示：它的远程对应项。在再次推送之前集成远程更改（例如提示：'git pull ...'）。

我试图通过

```
git reset HEAD~3 . 
git stash 
git pull 
git stash pop
git push 
```

并意外地再次拉动并推动更改。我7天的所有工作都丢失了。

这对我来说可以让我的所有工作回到本地分支：

`git reset --hard HEAD@{"15 minutes ago"}`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-22T14:54:23.090

由于您从未提交过文件，因此不抱歉。您需要采取的步骤是：

```
git init
git add .
git commit -m 'Initial commit'
git remote add origin ...
git push origin master 
```

请记住，当有疑问时，请始终承诺。只要你这样做，你总是可以用 git 撤销东西。

# visual-studio-2010 - 使用 strcmp 将 argv 项目与字符串文字进行比较没有像我预期的那样工作

> ID：10268946
> 
> 赞同：1
> 
> 时间：2012-04-22T14:48:56.760
> 
> 标签：visual-studio-2010, visual-c++, argv, strcmp

我对 Visual C++ 很陌生，所以这可能是一个“男生”错误，但以下代码没有按我的预期执行：

```
#include "stdafx.h"
#include <string.h>

int _tmain(int argc, _TCHAR* argv[])
{
    if (strcmp((char*)argv[1], "--help") == 0)
    {
        printf("This is the help message."); //Won't execute
    }
    return 0;
} 
```

命名的可执行文件`Test.exe`按如下方式启动

```
Test.exe --help 
```

我期待该消息`This is the help message.`，但我没有看到它 - 调试显示`if`条件显示为 -1 而不是 0，正如我所期望的那样。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:05:10.403

好的，我已经弄清楚发生了什么。`argv[]`数组被声明为，这是一个宏，它根据`TCHAR*`项目是否启用了 Unicode（`wchat_t`如果启用或未启用）来调整类型`char`。我试图使用的`strcmp`函数是非 Unicode 字符串比较，而`wcscmp`Unicode 等效。该`_tcscmp`函数根据 Unicode 设置使用适当的字符串比较函数。如果我替换`strcmp`为`_tcscmp`，问题就解决了！

```
#include "stdafx.h"
#include <string.h>

int _tmain(int argc, _TCHAR* argv[])
{
    if (_tcscmp(argv[1], _T("--help")) == 0)
    {
        printf("This is the help message."); //Will execute :)
    }
    return 0;
} 
```

`_T`如果启用了 Unicode，该函数会将参数转换为 Unicode。

另请参阅：[是否建议使用 strcmp 或 _tcscmp 比较 Unicode 版本中的字符串？](https://stackoverflow.com/questions/2107103/strcmp-or-tcscmp-in-unicode)

# java - 使用 Java 中的 Obj-C 类，有没有办法？

> ID：10268948
> 
> 赞同：2
> 
> 时间：2012-04-22T14:49:12.347
> 
> 标签：java, android, objective-c, class

我正在开发一个需要我在 java 中运行此代码的项目，但是对于代码的一小部分，我想访问一个用 Objective-C 编写的类。我想通过类传递参数，然后将数据检索回我的 Java 文件。

因此，尝试更清楚地解释它。我的 Java 代码需要能够访问一个 Objective C 文件并检索我可以用 Java 实现的数据。我目前的 IDE 是 eclipse，因为我需要为 android 做这个。有什么可能的方法来完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:02:33.703

您可以使用 Rococoa，[http://code.google.com/p/rococoa/](http://code.google.com/p/rococoa/)，也可以使用 JNI

这是一个类似的问题和答案：[Wrapping an existing application with JNI](https://stackoverflow.com/questions/1670859/wrapping-an-existing-application-with-jni)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T15:11:48.237

看看 JIGS，GNUStep 的 Java 接口。[http://www.gnustep.it/jigs/](http://www.gnustep.it/jigs/)

# apache2 - Apache vhost 解析为 localhost 文档根目录

> ID：10268954
> 
> 赞同：4
> 
> 时间：2012-04-22T14:50:48.617
> 
> 标签：apache2, virtualhost, ubuntu-11.10, virtual-hosts, apache2.2

[我从http://httpd.apache.org/download.cgi](http://httpd.apache.org/download.cgi)下载了 apache2.2.22 src并进行了安装。安装工作正常。但是当我尝试添加虚拟主机时，问题就出现了。我添加了 2 个虚拟主机 1\. localhost 2\. someother.localhost 两者都指向不同的文档根目录，但解析到第一个虚拟主机的文档根目录。

这是我的虚拟主机文件，

> 名称虚拟主机 *:80
> 
> ```
> <VirtualHost *:80>
>     ServerAdmin webmaster@dummy-host2.example.com
>     DocumentRoot "/webserver/htdocs"
>     ServerName localhost
>     ErrorLog "logs/localhost-error_log"
>     CustomLog "logs/localhost-access_log" common
> </VirtualHost>
> <Directory /home/sourabhn/somepath>
>     Options FollowSymLinks
>     AllowOverride All
>     Order allow,deny
>     Allow from all
> </Directory>
> <VirtualHost *:80>
>     ServerAdmin webmaster@dummy-host2.example.com
>     DocumentRoot "/home/sourabhn/somepath"
>     ServerName someother.localhost
>     ErrorLog "logs/someother-localhost-error_log"
>     CustomLog "logs/someother-localhost-access_log" common
> </VirtualHost> 
> ```

我在 hosts 文件中做了相应的条目。我正在运行 Ubuntu 11.10 机器。请回复您的宝贵建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:57:32.173

[我立刻注意到你的文件和我从bobpeers](http://bobpeers.com/linux/apache_virtual_hosts)这样的网络教程拼凑而成的文件之间存在差异。我已经在虚拟主机块中添加了`<Directory>`块。

```
NameVirtualHost *:80
<VirtualHost *:80>
DocumentRoot /var/www/
ServerName xtiansimonslaptop.local
    <Directory "/var/www/">
        Allow from all
        Options +Includes +Indexes +FollowSymLinks
        AllowOverride all
    </Directory>
</VirtualHost> 
```

我正在研究 Drupal，所以我可以将名称解析到 Drupal 目录，它会处理其余的事情。在 Drupal 安装中，我有几个项目，每个项目都在一个 Drupal 安装中设置了自己的域名。下面是一个名为 hello.local 的 Drupal 站点示例，我的另一个 Drupal 站点可能是 cheese.local。两者都指向同一个目录。

```
<VirtualHost *:80>
    DocumentRoot /var/www/php/drupal7
    ServerName hello.local
#   ServerAlias *.hello.local
        <Directory "/var/www/php/drupal7">
            Allow from all
            Options +Includes +Indexes +FollowSymLinks
            AllowOverride all
        </Directory>
</VirtualHost> 
```

现在它的工作保存为注释行 ServerAlias。这带来了我学到的关于设置 vHosts 的另一点。/etc/hosts 文件对于正确设置很重要。

在 bobpeers 的示例中，您将看到他们的 hosts 条目示例，

```
ServerName bobpeers.live
ServerName bobpeers.dev 
```

我希望反向名称`live.bobpeers.local`是服务器名称的更清晰示例。这就是问题——我发现示例中存在不一致之处。一些示例根本不使用诸如`.local`或遵循通用签名之类的关键术语`sub-domain.domaon.com`。复制一个人的非正常示例您可能会认为上面的 ServerName 引用了两个虚拟主机 live.local 和 dev.local。据我所知，也许他们会！

关于虚拟主机的另一件事。手册页显示了这一点，

```
 127.0.0.1       localhost
   192.168.1.10    foo.mydomain.org       foo
   192.168.1.13    bar.mydomain.org       bar 
```

对我的本地主机沙箱有用的是这个，

```
 127.0.0.1    localhost
   127.0.0.1    mydomain.local           mydomain
   127.0.0.1    foo.mydomain.local       foo
   127.0.0.1    bar.mydomain.local       bar 
```

这似乎是正确的，因为基于名称应该可以解决所有问题，而不是这个 192.168.1.x IP 掩码废话。(^_^)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T16:35:57.630

我的建议：声明一个“全局”ServerName 和一个全局 DocumentRoot，然后在您的虚拟主机[http://httpd.apache.org/docs/2.0/mod/core.html#serveralias](http://httpd.apache.org/docs/2.0/mod/core.html#serveralias)中仅使用核心指令 ServerAlias 。

# c# - 从 ListView 中获取价值

> ID：10268957
> 
> 赞同：-1
> 
> 时间：2012-04-22T14:51:12.050
> 
> 标签：c#, wpf, xaml, data-binding

使用以下 XAML 如何`<TextBlock/SenderName>`根据列表视图当前选定的项目检索假设或嵌套在堆栈面板中的任何其他控件的值？在 C# 中

# XAML

```
<ListView x:Name="ItemListView"  
      ItemsSource="{Binding}"
      Margin="1041,120,85,68" SelectionChanged="ListView1_SelectionChanged">
    <ListView.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <TextBlock Text="{Binding SenderName}" 
                   FontSize="20" Margin="15,0,0,0" HorizontalAlignment="Right" />
                <TextBlock Text="{Binding Value}"  
                   FontSize="18" Margin="5,0,0,0" TextWrapping="Wrap" HorizontalAlignment="Right" />
                <TextBlock Visibility="Collapsed" Text="{Binding StreamId}" />
                <TextBlock Text="{Binding DateTime}" 
                   FontSize="16" Margin="15,0,0,0" HorizontalAlignment="Right" />
            </StackPanel>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T15:31:34.037

如果您使用的是 MVVM 方法，那么您的 ListView 的 ItemsSource 将绑定到您的 ViewModel 上的一个属性。要访问 ListBox 的 SelectedItem 中的值，请将 SelectedItem 绑定到视图模型上的另一个成员。就像是：

代码：

```
public class ViewModel
{
    public ObservableCollection<MyListViewItem> Items {get;set;}
    public MyListViewItem SelectedListItem {get;set;}
} 
```

XAML：

```
<ListView DataContext="{Binding Path=myViewModel}" 
     ItemsSource="{Binding Path=Items}"
     SelectedItem="{Binding Path=SelectedListItem}" /> 
```

如果您希望从代码隐藏中执行此操作，您可以访问`SelectedItem`ItemListView 的成员，该成员应该是当前所选项目绑定到的对象。

最后，如果您想从另一个控件绑定到该控件，您可以使用 ElementName 和 SelectedItem 访问它

```
<TextBlock Text="{Binding ElementName=ItemListView, Path=SelectedItem.SenderName}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T15:17:14.993

不明白所有，但我认为您的意思是用户可以在列表框中选择一个文本块，并且您想要获取这个文本块的值。如果是这样，您可以简单地执行以下操作：

```
 string sel = Listview1.SelectedItem.Text;
string value = null;
foreach ( con in Stackpanel.Controls) {
    if ((con) is Textblock) {
        if (con.Name == sel) {
            value = ((con)Textblock).Text;
            break; 
        }
    }
} 
```

# android - 无法更改 Android AdMob 的目标版本

> ID：10268962
> 
> 赞同：0
> 
> 时间：2012-04-22T14:51:57.243
> 
> 标签：android, import, compilation, admob, target

我确定我遗漏了一些东西，但是当我将 project.properties 文件中的目标更改为

```
 target=android-13 
```

从

```
 target=android-8 
```

我的所有导入语句都中断了我的整个项目。我对 java 或 android 的导入语句都没有被识别。有任何想法吗？

# python - python 3.2 错误说 urllib.parse.urlencode() 未定义

> ID：10268966
> 
> 赞同：33
> 
> 时间：2012-04-22T14:52:22.153
> 
> 标签：python, python-3.2

我正在尝试在我的一个脚本中使用 urllib.parse.urlencode() 方法。导入 urllib

```
#!/usr/bin/python3.2

import urllib

data = urllib.parse.urlencode({'type': 'device_code','client_id': 150792241632891}) 
```

它以前可以工作，但现在我收到以下错误。

**输出**

```
Traceback (most recent call last):
  File "/home/rakesh/programming/test.py", line 8, in <module>
    data = urllib.parse.urlencode({'type': 'device_code','client_id': 150792241632891})
AttributeError: 'module' object has no attribute 'parse' 
```

最初我怀疑我的 python shell，但是当我检查它使用的是 python 3.2 版本时，它应该是 fiine。

现在我完全困惑为什么 python shell 会这样。我在这里错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-04-22T14:56:15.003

你没有在你的程序中显示导入，所以我不能确定，但​​我敢打赌你做到了

```
import urllib 
```

这不会导入和重新导出单独的模块`urllib.parse`。做

```
import urllib.parse 
```

反而。

（`import urllib`在 Python 3.x 中是相当无意义的，因为所有功能都在子模块中，而这些不是由顶级模块导入的。）

# android - 调用 stop() 和 release() android 后声音不会停止

> ID：10268967
> 
> 赞同：1
> 
> 时间：2012-04-22T14:52:23.887
> 
> 标签：android, audio, media-player, release

我有一个活动，可以在得分屏幕上循环播放一首简单的歌曲，具体取决于玩家在我的游戏中是赢还是输。但是，在退出我的 Score Activity 后，声音会继续循环，直到发生垃圾回收。以下是我的代码片段。我目前强制垃圾收集停止声音！为什么 stop() 或 release() 不起作用？

```
public void onPause(){
    super.onPause();
    _sounds.release();
}

public void load(){
    _victory = MediaPlayer.create(mActivity, R.raw.victory);
    _victory.setLooping(true);

    _failure = MediaPlayer.create(mActivity, R.raw.flutedeath);
    _failure.setLooping(true);
}

public void release(){
    _victory.stop();
    _victory.release();
    _victory = null;

    _failure.stop();
    _failure.release();
    _failure = null;
    System.gc();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:24:04.323

您是否尝试过使用类似这样的 OnCompletionListener：

```
 try {
            mp = MediaPlayer.create(this, fileId);
            mp.start();

            mp.setOnCompletionListener(new OnCompletionListener() {

                public void onCompletion(MediaPlayer mp) {
                    mp.release();
                    mp = null;

                }
            });
        } catch (Exception exception) {
        } 
```

# iphone - 如何生成 iPhone 指纹？

> ID：10268969
> 
> 赞同：0
> 
> 时间：2012-04-22T14:52:30.503
> 
> 标签：iphone, security

这个网站[http://www.gemalto.com/financial/ebanking/sdk/index.html](http://www.gemalto.com/financial/ebanking/sdk/index.html)正在谈论“设备指纹”

在 iPhone 上你会怎么做？通过创建基于 UUID 的令牌？不能以某种方式欺骗 UUID 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:56:38.287

这听起来像是营销语言。他们可能正在使用 cookie 和 MAC 地址的组合，并且其中可能正在进行一些公私密钥加密。是的，这一切都可以伪造。网络设备可能拥有的任何“指纹”都是可以被欺骗的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T15:02:51.357

首先，Apple 使用的设备 UDID 现在不再受支持，使用它的应用程序将被拒绝。一切都可能被欺骗或丢失/更改 - 即使设备已恢复。

我最好的选择是使用 WiFi 卡的 MAC 地址，或者只是在服务器端生成它并将其存储在本地设备上（这比设备更能跟踪安装）

# android - Eclipse 在连续运行期间触发我的 JUnit 测试的构建

> ID：10268976
> 
> 赞同：0
> 
> 时间：2012-04-22T14:53:12.970
> 
> 标签：android, eclipse, scala, junit, adt

出于某种原因，每次我运行我的 Android JUnit 测试然后立即重新运行它们时，Eclipse/ADT 似乎都会重建测试项目，然后它会重新上传并重新安装测试 apk。显然，这大大减慢了速度。

我检查了项目的 bin 目录，每次重新运行测试时，测试项目似乎都会重新构建（即使没有更改源文件。）

这是设计上的正常操作，还是有办法防止 ADT/Eclipse 即使在没有代码更改的情况下重建测试项目？我没有选中“自动构建”。如果相关的话，我碰巧在测试项目中使用了 Robotium、Scala、TreeShaker 和 Infinitest。

# .htaccess - .htaccess 不适用于 subdomain.domain.com 但 domain.com

> ID：10268980
> 
> 赞同：0
> 
> 时间：2012-04-22T14:53:24.420
> 
> 标签：.htaccess

我是 .htaccess 文件的初学者，但我可以研究一些隐藏 php 扩展或将索引重定向到根目录所需的规则。

但是，当我尝试通过子域访问我的域时，我收到服务器错误或不允许我访问的消息。（我尝试删除规则，但最终没有一条规则适用于子域）。

是否需要在 .htaccess 文件中写入其他内容以使它们同时适用于子域和我的普通域，例如：

www.domain.com（作品）

subdomain.domain.com（不起作用）

我使用通常指向 myserver.com/subfolder 的 parallels confixx 设置子域。

这是我使用的规则：

```
 #redirect 404 to index
    ErrorDocument 404 http://subdomain.domain.com

    #hide .php ending
    RewriteEngine on
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME}\.php -f
    RewriteRule ^(.*)$ $1.php

    # gzip compression.
    <IfModule mod_deflate.c>
      # html, xml, css, and js:
      AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css application/x-javascript text/javascript application/javascript application/json
      # webfonts and svg:
      <FilesMatch "\.(ttf|otf|eot|svg)$" >
        SetOutputFilter DEFLATE
      </FilesMatch>
    </IfModule>

    Options +FollowSymLinks 
    RewriteCond %{THE_REQUEST} ^.*/index
    RewriteRule ^(.*)index.php$ http://subdomain.domain.com$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:27:49.237

我刚刚收到来自服务器支持的消息。

If you are using Parallels Confixx to manage your domains mod_rewrite has to be enabled from your host **manually** which is needed for the .htaccess to work on here.

# ruby - 学习 Ruby，寻找 if 语句的可能重构

> ID：10268982
> 
> 赞同：2
> 
> 时间：2012-04-22T14:53:41.703
> 
> 标签：ruby, if-statement

我有一些想法，但想获得其他一些选择。这是丑陋的：

```
def normal_balance
  if type.to_s == 'Asset' or type.to_s == 'Expense'
    if contra
      "Credit"
    else
      "Debit"
    end
  else
    if contra
      "Debit"
    else
      "Credit"
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T15:03:42.777

不完全是特定于 ruby​​ 的方法，但由于您只是在给定集合中的值反转布尔值，您可以将布尔值表示为变量，然后只需使用一个条件来获取“借方”或“贷方”字符串.

```
def normal_balance
  debit = %w[Asset Expense].include?(type.to_s) ? !contra : contra
  debit ? "Debit" : "Credit"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T15:24:06.133

```
%w[Asset Expense].include?(type.to_s) == !!contra ? "Credit" : "Debit" 
```

`!!`只是用来强制`contra`转换为布尔值，所以我们可以使用`==`. 也可以写成

```
%w[Asset Expense].include?(type.to_s) ^ contra ? "Debit" : "Credit" 
```

但这不太可读，恕我直言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T15:18:11.413

```
def normal_balance(type,con)
  contra = {:yes => 'Debit'}
  contra.default= 'Credit'
  card_type = {:Asset => contra, :Expense => contra}
  card_type.default = contra

  card_type[type.to_sym][con.to_sym]
end 
```

这主要用于替换`if`您使用哈希。

我不知道可能的值是什么，`contra`所以你应该在第一个哈希中替换它。

实际上，在您的情况下，您只测试 contra_type。也许你应该只测试它。

# javascript - Javascript 变量显示为未定义

> ID：10268983
> 
> 赞同：0
> 
> 时间：2012-04-22T14:53:57.310
> 
> 标签：javascript

我现在挣扎了一段时间，我找不到这段代码不起作用的原因。

当点击#submitmsg 时，它应该触发另一个从 php 文件中获取时间的函数。这是一个聊天框，在这种情况下它应该显示名称（即 Ja），并在其旁边显示时间，即变量“tajm”。尽管显示的是未定义而不是时间。

知道为什么这不起作用吗？

下面的代码片段：

```
var tajm;

$(document).ready(function () {
    $("#submitmsg").click(function () {
        time();
        var newtext = $("#textmsg").val();
        var oldtext = document.getElementById("textbox").innerHTML;
        document.getElementById("textbox").innerHTML = oldtext + "<br/><div id='name'>Ja:     " + tajm + "</div><div id='red'>" + newtext + "</div>";
        $("#textbox").scrollTop($("#textbox")[0].scrollHeight);
    });
});

function time() {
    var ajax = new XMLHttpRequest();
    ajax.onreadystatechange = function () {
        if (ajax.readyState == 4) {
            tajm = ajax.responseText;
        }
    };
    ajax.open("GET", "r.php", true);
    ajax.send(null);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:56:53.693

AJAX 是**异步**的。

您的回调仅在其余代码完成后运行一段时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:11:06.023

由于 ajax 是异步的，java 脚本从不等待执行 time 方法。在这种情况下，您需要编写以下代码片段格式

```
$(document).ready(function () {
    $("#submitmsg").click(function () {
        $.load("r.php",function(){
            var newtext = $("#textmsg").val();
            var oldtext = document.getElementById("textbox").innerHTML;
            document.getElementById("textbox").innerHTML = oldtext + "<br/><div id='name'>Ja:     " + tajm + "</div><div id='red'>" + newtext + "</div>";
            $("#textbox").scrollTop($("#textbox")[0].scrollHeight);
        }

    });
}); 
```

注意：设置超时有效，因为您等待加载您的 ajax 调用。

# css - IE9圆角和透明背景问题

> ID：10268984
> 
> 赞同：0
> 
> 时间：2012-04-22T14:54:10.503
> 
> 标签：css, internet-explorer-9

我已经搜索了很多，但我真的找不到答案。

我到处都有更圆的边框，到处都很好，除了使用 img 作为背景的元素（图像得到漂亮的圆角，但后面是某种黑色背景）。

图片便于理解问题：

[![](../Images/0cf213942b1bc6c1432d5912c2a36145.png)](https://i.stack.imgur.com/TRTtV.png)

我真的坚持这一点。任何建议是这个 IE 问题还是我错过了什么？

灰色标题的 CSS 是这样的：

```
#header {
    background-image: url("images/bg-header.png");
    background-repeat: repeat-x;
    border-radius: 4px 4px 0 0;
    color: #FFFFFF;
    font-size: 13px;
    font-weight: bold;
    height: 46px;
    line-height: 46px;
    padding: 0 0 0 15px;
    text-shadow: 0 -1px 0 #332829;
    width: 575px;
} 
```

小提琴：

```
http://jsfiddle.net/2BnDR/2/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:09:03.473

试试这个也许：

```
#DivThatImageIsIn img{
  border-radius: same as div;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:45:17.520

我发现 IE9 确实存在奇怪的黑色背景环绕元素和错误，就像您在上面的打印屏幕上看到的那样。当您在同一元素上有 box-shadow 或 text-shadow + filter 时。

我已经从我的 CSS 中删除了所有过滤器，它就像魅力一样。

例如。

```
.header {
    filter: dropshadow(color=#3e3132, offx=0, offy=-1); /* delete this one and it works */
    text-shadow: 0px -1px 0px #3e3132;
} 
```

# php - 使用 simplexml 将多个 rss 提要插入 MYSQL

> ID：10268986
> 
> 赞同：0
> 
> 时间：2012-04-22T14:54:16.627
> 
> 标签：php, mysql, xml, rss, simplexml

下面是我将多个 rss 提要解析为 mysql 数据库的代码。我认为我在 foreach 部分做错了，因为没有输出。然而，数据库被填满。使用 1 个提要时，脚本可以正常工作。有人看到我做错了吗？提前谢谢了 ：）

```
$feeds = ('https://www.ictu.nl/rss.xml', 'http://www.vng.nl/smartsite.dws?id=97817');
$xml = simplexml_load_file($feeds);

foreach($xml->channel->item as $item)
{
$date_format = "j-n-Y"; // 7-7-2008
echo date($date_format,strtotime($item->pubDate));  
         echo '<a href="'.$item->link.'" target="_blank">'.$item->title.'</a>';
         echo '<div>' . $item->description . '</div>';

mysql_query("INSERT INTO rss_feeds (id, title, description, link, pubdate) 
VALUES (
    '', 
    '".mysql_real_escape_string($item->title)."', 
    '".mysql_real_escape_string($item->description=htmlspecialchars(trim($item->description)))."', 
    '".mysql_real_escape_string($item->link)."', 
    '".mysql_real_escape_string($item->pubdate)."')");       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:53:56.393

试试这个：

```
<?php
$feeds = array('https://www.ictu.nl/rss.xml', 'http://www.vng.nl/smartsite.dws?id=97817');
foreach( $feeds as $feed ) {
    $xml = simplexml_load_file($feed);

    foreach($xml->channel->item as $item)
    {
    $date_format = "j-n-Y"; // 7-7-2008
    echo date($date_format,strtotime($item->pubDate));  
             echo '<a href="'.$item->link.'" target="_blank">'.$item->title.'</a>';
             echo '<div>' . $item->description . '</div>';

    mysql_query("INSERT INTO rss_feeds (id, title, description, link, pubdate) 
    VALUES (
        '', 
        '".mysql_real_escape_string($item->title)."', 
        '".mysql_real_escape_string($item->description=htmlspecialchars(trim($item->description)))."', 
        '".mysql_real_escape_string($item->link)."', 
        '".mysql_real_escape_string($item->pubdate)."')");       
    }
}
?> 
```

希望能帮助到你。

# c# - 将 3 层数组反序列化为字典

> ID：10268993
> 
> 赞同：0
> 
> 时间：2012-04-22T14:54:59.707
> 
> 标签：c#, json, json.net

步骤 1\. 将第一条消息反序列化到 dictionary1 (receivedDict)

步骤 2\. 将 dictionary1["data"] 反序列化为 dictionary2 (receivedDict2)

每当第二层包含另一个序列化数组时，它就会失败。如果没有，它会起作用。第三步是反序列化 dictionary2["replaceArray"] 但由于错误，我没有达到那个阶段。

挑剔：

![在此处输入图像描述](../Images/9b8023b250b8b89c2df6189e0e5acd2e.png)

编码：

```
CGlobals.output("Received a message with length: " + _message.Length);
Console.WriteLine("message Contains : " + _message);

//Unserialize main message
Dictionary<string, string> receivedDict = new Dictionary<string, string>();
try
{
    receivedDict = CJsonStuff.unserializeDict(_message);
}
catch (Exception ex) { return retError(1, ex.Message,false); }
if (receivedDict.Count < 1) return retError(2, "",false);

//List all elements for debugging.
string temp = "";
foreach (KeyValuePair<string, string> item in receivedDict)
{
    temp += item.Key + " : " + item.Value + "\n";
}
Console.WriteLine("\n" + temp + "\n");

//Parse jobID
int jobID = -1;
try
{
    jobID = Int32.Parse(receivedDict["jobID"]);
}
catch (Exception ex) { return retError(3, ex.Message,false); }

//Parse alteredID
int alteredID = -1;
bool isAltered = false;
try
{
    Dictionary<string, string> receivedDict2 = new Dictionary<string, string>();
    Console.WriteLine("Unserializing : "+receivedDict["data"]);
    receivedDict2 = CJsonStuff.unserializeDict(receivedDict["data"]); //Error occurs here
    Console.WriteLine("Unserialized data");

    //Show all elements for debugging.
    string temp2 = "";
    foreach (KeyValuePair<string, string> item in receivedDict2)
    {
        temp2 += item.Key + " : " + item.Value + "\n";
    }
    Console.WriteLine("\n" + temp2 + "\n");

    if (receivedDict2.ContainsKey("alteredID"))
    {
        alteredID = Int32.Parse(receivedDict2["alteredID"]);
        isAltered = true;
    }
}
catch (Exception ex) { Console.WriteLine(ex.Message); return retError(6, ex.Message, false, jobID); } 
```

CJSonStuff：

```
public static Dictionary<string, string> unserializeDict(string thestring)
{
    Dictionary<string, string> dict = new Dictionary<string, string>();
    dict = JsonConvert.DeserializeObject<Dictionary<string, string>>(thestring);
    return dict;
} 
```

所以基本上，它可以很好地反序列化第一条消息，即使它包含一个嵌入式序列化数组，但是尝试再次执行完全相同的操作失败了。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:09:30.653

那是因为它`data` *是*一个字符串，它不是一个 JSON 对象，它是一个 JSON 对象的字符串表示，这是一个很大的区别（注意`"`开头和结尾的`data`）。

据我所知，您不能将 JSON 对象反序列化为字符串，这样做对我来说没有意义。您应该将其反序列化为`JObject`or `Dictionary<string, object>`，或者（如果数据没有更改，则为最佳选择）为此创建一个类并反序列化为该类。

# c# - ReadLine() 不接受第一个字符

> ID：10268994
> 
> 赞同：-1
> 
> 时间：2012-04-22T14:55:04.450
> 
> 标签：c#, switch-statement, readline

**我发现问题**
问题出在 MonoDevelop 上，它在控制台中运行良好。感谢您的帮助。

我正在使用 C# 控制台应用程序，并且我构建了一个简单的菜单，当要求用户输入时，它没有显示输入的第一个字符。

这是我的代码。

```
Console.Write("Input >");
string result = Console.ReadLine();
switch(result) {
     case "1":
          Console.WriteLine("1");
     break;
     case "2":
         Console.WriteLine("2");
     break;
     default:
         Console.WriteLine("Invalid");
     break;
} 
```

**--EDIT-- 实际代码**

```
Console.Write("\t\t\t+");
Console.ForegroundColor = ConsoleColor.Yellow;
Console.Write("-----------------------------");
Console.ForegroundColor = ConsoleColor.Green;
Console.WriteLine("+");

Console.Write("\t\t\t|");
Console.ForegroundColor = ConsoleColor.Red;
Console.Write("---MENU----------------------");
Console.ForegroundColor = ConsoleColor.Green;
Console.WriteLine("|");

Console.Write("\t\t\t|");
Console.ForegroundColor = ConsoleColor.Red;
Console.Write("------|1|-HELP MENU----------");
Console.ForegroundColor = ConsoleColor.Green;
Console.WriteLine("|");

Console.Write("\t\t\t|");
Console.ForegroundColor = ConsoleColor.Red;
Console.Write("------|2|-INITIATE CHAT------");
Console.ForegroundColor = ConsoleColor.Green;
Console.WriteLine("|");

Console.Write("\t\t\t|");
Console.ForegroundColor = ConsoleColor.Red;
Console.Write("------|3|-CONFIGURATION -----");
Console.ForegroundColor = ConsoleColor.Green;
Console.WriteLine("|");

Console.Write("\t\t\t+");
Console.ForegroundColor = ConsoleColor.Yellow;
Console.Write("-----------------------------");
Console.ForegroundColor = ConsoleColor.Green;
Console.WriteLine("+");

Console.ForegroundColor = ConsoleColor.White;           
string result = Console.ReadLine();
menuInput(result); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T15:03:53.680

适合我

```
 Console.Write("\t\t\t+");
        Console.ForegroundColor = ConsoleColor.Yellow;
        Console.Write("-----------------------------");
        Console.ForegroundColor = ConsoleColor.Green;
        Console.WriteLine("+");

        Console.Write("\t\t\t|");
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Write("---MENU----------------------");
        Console.ForegroundColor = ConsoleColor.Green;
        Console.WriteLine("|");

        Console.Write("\t\t\t|");
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Write("------|1|-HELP MENU----------");
        Console.ForegroundColor = ConsoleColor.Green;
        Console.WriteLine("|");

        Console.Write("\t\t\t|");
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Write("------|2|-INITIATE CHAT------");
        Console.ForegroundColor = ConsoleColor.Green;
        Console.WriteLine("|");

        Console.Write("\t\t\t|");
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Write("------|3|-CONFIGURATION -----");
        Console.ForegroundColor = ConsoleColor.Green;
        Console.WriteLine("|");

        Console.Write("\t\t\t+");
        Console.ForegroundColor = ConsoleColor.Yellow;
        Console.Write("-----------------------------");
        Console.ForegroundColor = ConsoleColor.Green;
        Console.WriteLine("+");

        Console.ForegroundColor = ConsoleColor.White;

        Console.Write("Input >");
        string result = Console.ReadLine();
        switch (result)
        {
            case "1":
                Console.WriteLine("1");
                break;
            case "2":
                Console.WriteLine("2");
                break;
            default:
                Console.WriteLine("Invalid");
                break;
        }

        Console.ReadLine(); 
```

![在此处输入图像描述](../Images/0699a9c1f674a54f314783bcfc8adb60.png)

# iphone - 如何将字节数组转换为 NSString 或 NSMutableArray

> ID：10268995
> 
> 赞同：0
> 
> 时间：2012-04-22T14:55:09.957
> 
> 标签：iphone

我正在从以下方法中定义的服务器接收一些字节数据

```
 - (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag
      {

      \//04 01 00
NSString *string = [
                    [NSString alloc] 
                    initWithData:data
                    encoding:NSASCIIStringEncoding
                    ];
NSLog(string);

char *ptr = (void *)[data bytes]; // set a pointer to the beginning of your data bytes

if(*ptr == 0x06) {
    NSLog(@"okay,.. got a  0x06");
}
ptr++; // go to the next byte
if(*ptr == 0x05) {
    NSLog(@"okay,.. got a 0x05");
}
ptr++;
if(*ptr==0X00){
    NSLog(@"okay,.. got a 0X00");

}

//04 01 00
NSString* newStr = [[NSString alloc] initWithData:data
                                         encoding:NSASCIIStringEncoding];
///////////////////
///////////////////
NSLog(@"I received some thing , now trying to read it");
UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"Data Received" message:newStr delegate:nil cancelButtonTitle:@"ok" otherButtonTitles:nil];
[alert show];
[alert release];

 [sock readDataWithTimeout:-1 tag:0];
//NSLog(@"Reading %@",newStr); 
```

}

我可以比较十六进制值，但在 UIAlertView 中看不到，因为我认为我无法正确转换，所以请帮助如何转换为 NSString 和 NSMutableArray 以便我可以动态使用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:33:12.373

尝试这个，

```
 NSString* newStr = [[NSString alloc] initWithData:data
                                     encoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T15:46:22.887

我没有尝试您的代码，但并非所有 ascii 字符都可以直观地表示。尝试使用一些 ascii 代码 >32 的代码，寻找字母或数字。或者将字符作为十进制或十六进制数字回显。