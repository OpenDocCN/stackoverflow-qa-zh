# StackOverflow 问答 11743000-11743999

# sql - 将 SQL 查询转换为 Hibernate Criteria 表达式

> ID：11743002
> 
> 赞同：2
> 
> 时间：2012-07-31T14:59:14.987
> 
> 标签：sql, hibernate, criteria, restriction

我无法将此表达式转换为 Criteria 表达式：

```
SELECT profile_profiles.profile_sup_id 
  FROM profil
  INNER JOIN profile_profiles ON profile_profiles.profile_id = profil.id 
        AND profil.id = 4 
```

任何人都可以帮忙吗？

我有一张桌子'Profil'多对多和refelxive

配置文件 1 --- profile_profiles --- 配置文件 2

```
public class Profil implements Serializable {

    private static final long serialVersionUID = 1L;
    private Long id;
    private String libelle;
    private Set<Profil> profiles = new HashSet<Profil>(0);
...
} 
```

血红蛋白

```
<set name="profiles" table="profile_profiles" cascade="all">
            <key column="profile_id" />
            <many-to-many column="profile_sup_id" class="com.steriamedshore.proboard.model.referentiel.Profil" />
        </set> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:10:29.887

thank you very much @JB Nizet

I did actually find the solution yesterday :

```
hibernateCriteria.createCriteria("profil").createAlias("profiles", "ps").add( Restrictions.eq("ps.id",superieurCriteria.getProfilId()) ) ; 
```

peace.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:07:55.287

```
Criteria c = session.createCriteria(Profil.class, "profil");
c.createAlias("profil.profiles", "supProfil");
c.add(Restrictions.eq("profil.id", 4);
c.setProjection(Projections.property("supProfil.id")); 
```

上面应该，AFAIK，从连接表到配置文件表的附加连接，但它应该返回与您的 SQL 查询相同的内容。

# ruby-on-rails - 在rails上保存记录

> ID：11743009
> 
> 赞同：0
> 
> 时间：2012-07-31T14:59:37.280
> 
> 标签：ruby-on-rails, database, combobox

正如您从我之前的问题中知道的那样，我已经习惯了 rails，目前我的 create 函数有问题，因为它没有保存数据库中组合框中的记录，如下所示：

![在此处输入图像描述](../Images/e5c1989c8faacd418743ccf738fccb09.png)

但它将其余记录保存在数据库中，为了检查它我输入：

```
rails console
TankingLog.all
TankingLog Load (0.7ms)  SELECT "tanking_logs".* FROM "tanking_logs" 

[#<TankingLog id: 7, car_id: 28, cost: 3000.0, date: "2012-07-30 00:00:00", gallon: 2.0, gas_station_id: nil, km: 5000, created_at: "2012-07-30 22:00:40", updated_at: "2012-07-30 22:00:40">] 
```

如您所见，gas_station_id 字段为 nil，但它必须是所选车站的 id 我感谢任何帮助，如果这是一个愚蠢的问题，我们深表歉意

这是表格：

```
<div class="container">
    <h2>new tanking log</h2>
    <%= form_for ([@user,@car,@tankinglog]) do |f| %>
      <div><%= f.label :cost %><br />
      <%= f.text_field :cost %></div>

      <div><%= f.label :gallon %><br />
      <%= f.text_field :gallon %></div>

      <div><%= f.label :km %><br />
      <%= f.text_field :km %></div>

      <div><%= f.label :date %> <i>( format yyyy-mm-dd )</i> <br />
      <%= f.text_field :date %></div>

      <div><%= f.label :Station %><br />
      <%= select("gas_station", "name", GasStation.all.collect {|gs| [ gs.name, gs.id ] }, { :include_blank => true })%></div>
      <p>
        if you don't see the station that you want, you can <%= link_to "create it", new_gas_station_path%> 
      </p>

      <div><%= f.submit "create tanking",:class => "btn btn-primary" %></div>
    <% end %>
    <br />
    <%= link_to "Back", user_car_tanking_logs_path(@user, @car),:class => "btn btn-primary"%>
  </div> 
```

和 tankinglog 控制器

```
class TankingLogsController < ApplicationController
def new
@user = User.find(params[:user_id])  
@car = @user.cars.find(params[:car_id])
@tankinglog = @car.tanking_logs.build
end

def create
@user = User.find(params[:user_id])  
@car = @user.cars.find(params[:car_id])
@tankinglog = @car.tanking_logs.build(params[:tanking_log])
if @tankinglog.save
  redirect_to user_car_tanking_logs_path(@user, @car), :flash => { :notice => "  new tanking created!" }
else
  redirect_to new_user_car_tanking_log_path ,:flash => { :notice => " sorry try again :(" }
end
end
def index
  @user = User.find(params[:user_id]) 
  @car = @user.cars.find(params[:car_id])    
  @tankinglog = @car.tanking_logs.all
end
end 
```

如果你想看模型...

```
class TankingLog < ActiveRecord::Base
belongs_to :gas_station 
belongs_to :car
attr_accessible :car_id, :cost, :date, :gallon, :gas_station_id, :km
validates_presence_of :cost, :date,:gallon,:km
validates_numericality_of :cost, :gallon
validates_numericality_of :km #:only_integer
end

class GasStation < ActiveRecord::Base
has_many :tanking_logs
attr_accessible :name
validates_presence_of :name
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:19:28.317

编辑这个：

```
<%= f.select("gas_station_id", GasStation.all.collect {|gs| [ gs.name, gs.id ] }, { :include_blank => true })%></div> 
```

# facebook - 自定义简单的 HTML facebook 应用程序，不适用于 IEX8

> ID：11743010
> 
> 赞同：1
> 
> 时间：2012-07-31T14:59:45.497
> 
> 标签：facebook, internet-explorer, google-chrome

我创建了一个非常基本的 html facebook 应用程序，带有链接图片。真的很基本的东西，但它没有以某种方式在 IEX8 上显示。它确实适用于 Firefox/Safari 和 Chrome。

这是代码：

```
<table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><a href="https://www.yourreservation.net/tb3/index.cfm?bf=INSERTHERE&iatanumber=FACEBOOK&arrivaldate=2012-07-30" target="_blank"><img style="DISPLAY: block" border="0" hspace="0" src="http://www.vfmii.com/medlib3/VS_Worldhotels_photo/0/47/674/47674181/47674181.jpg" width="760" height="456" /></a></td></tr></tbody></table> 
```

有人有线索吗？

谢谢

# python - 使用 strftime 将 python 日期时间转换为纪元

> ID：11743019
> 
> 赞同：269
> 
> 时间：2012-07-31T14:59:57.987
> 
> 标签：python, datetime, utc, epoch, strftime

我有一个 UTC 时间，我想要从纪元开始的秒数。

我正在使用 strftime 将其转换为秒数。以 2012 年 4 月 1 日为例。

```
>>>datetime.datetime(2012,04,01,0,0).strftime('%s')
'1333234800' 
```

2012 年 4 月 1 日 UTC 从纪元开始是 1333238400 ，但上面的返回 1333234800 相差 1 小时。

所以看起来 strftime 正在考虑我的系统时间并在某处应用时区转换。我认为 datetime 纯粹是幼稚的？

我怎样才能解决这个问题？如果可能避免导入其他库，除非是标准的。（我有便携性问题）。

* * *

## 回答 #1

> 赞同：513
> 
> 时间：2012-07-31T15:10:58.887

如果您想将 python 日期时间转换为自纪元以来的秒数，您可以显式执行此操作：

```
>>> (datetime.datetime(2012,04,01,0,0) - datetime.datetime(1970,1,1)).total_seconds()
1333238400.0 
```

在 Python 3.3+ 中，您可以[`timestamp()`](https://docs.python.org/3/library/datetime.html#datetime.datetime.timestamp)改用：

```
>>> datetime.datetime(2012,4,1,0,0).timestamp()
1333234800.0 
```

* * *

**为什么你不应该使用`datetime.strftime('%s')`**

Python 实际上并不支持 %s 作为 strftime 的参数（如果您在[http://docs.python.org/library/datetime.html#strftime-and-strptime-behavior](http://docs.python.org/library/datetime.html#strftime-and-strptime-behavior)检查它不在列表中），唯一的它工作的原因是因为 Python 正在将信息传递给您系统的 strftime，它使用您的本地时区。

```
>>> datetime.datetime(2012,04,01,0,0).strftime('%s')
'1333234800' 
```

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2012-07-31T15:04:33.757

我对时区等有严重的问题。Python 处理所有这些的方式碰巧很令人困惑（对我来说）。使用日历模块似乎一切正常（请参阅链接[1](https://stackoverflow.com/questions/2956886/python-calendar-timegm-vs-time-mktime)、[2](http://docs.python.org/library/calendar.html)、[3](https://stackoverflow.com/questions/4046401/how-do-i-convert-a-datetime-to-a-utc-timestamp-in-python)和[4](http://www.epochconverter.com/)）。

```
>>> import datetime
>>> import calendar
>>> aprilFirst=datetime.datetime(2012, 04, 01, 0, 0)
>>> calendar.timegm(aprilFirst.timetuple())
1333238400 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2013-06-20T01:31:43.507

```
import time
from datetime import datetime
now = datetime.now()

time.mktime(now.timetuple()) 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-09-23T19:20:00.273

```
import time
from datetime import datetime
now = datetime.now()

# same as above except keeps microseconds
time.mktime(now.timetuple()) + now.microsecond * 1e-6 
```

（对不起，它不会让我对现有答案发表评论）

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-04-05T19:27:43.190

如果您只需要 unix /epoch 时间的时间戳，则这一行有效：

```
created_timestamp = int((datetime.datetime.now() - datetime.datetime(1970,1,1)).total_seconds())
>>> created_timestamp
1522942073L 
```

并且仅依赖`datetime` 于 python2 和 python3 中的作品

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-03-21T07:06:21.063

对于明确的独立于时区的解决方案，请使用 pytz 库。

```
import datetime
import pytz

pytz.utc.localize(datetime.datetime(2012,4,1,0,0), is_dst=False).timestamp() 
```

输出（浮点数）：1333238400.0

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-09-09T00:49:44.333

这适用于 Python 2 和 3：

```
>>> import time
>>> import calendar
>>> calendar.timegm(time.gmtime())
1504917998 
```

只需遵循官方文档... [https://docs.python.org/2/library/time.html#module-time](https://docs.python.org/2/library/time.html#module-time)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-25T13:51:53.703

在 Python 3.7 中

> 以 date.isoformat() 和 datetime.isoformat() 发出的格式之一返回与 date_string 对应的日期时间。具体来说，此函数支持格式为 YYYY-MM-DD[*HH[:MM[:SS[.fff[fff]]]][+HH:MM[:SS[.ffffff]]]] 的字符串, 其中 * 可以匹配任何单个字符。

[https://docs.python.org/3/library/datetime.html#datetime.datetime.fromisoformat](https://docs.python.org/3/library/datetime.html#datetime.datetime.fromisoformat)

# android - 在操作栏中使用 Spinner 作为视图切换控制器

> ID：11743023
> 
> 赞同：1
> 
> 时间：2012-07-31T15:00:00.657
> 
> 标签：android, android-actionbar, android-spinner

我想在我的 Android 应用程序的操作栏中使用 Spinner 作为视图切换控制器，就像本机邮件应用程序一样（参见[Android Common App UI](http://developer.android.com/design/get-started/ui-overview.html#app)的第 2 部分）。

到目前为止，通过查看 Android Developers 的示例代码，我已经设法将 Spinner 放在操作栏中并用字符串数组填充它（参见[此处的屏幕截图）。](http://i46.tinypic.com/2yo989e.gif)

我的问题是：

1.  如何从操作栏中隐藏活动名称“MyAcitivity”，以便 Spinner 获得更多位置？
2.  如何让 Spinner 显示两行，一行用于标题，另一行用于副标题？就像在本机邮件应用程序中一样。
3.  为什么 Spinner 中的项目文本是黑色的，而不是操作栏中其他文本的白色？

我正在为 Android 4.0 及更高版本进行开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:13:51.410

> 1.如何从操作栏中隐藏活动名称“MyAcitivity”，以便 Spinner 获得更多位置？

要删除此标题，您应该在 manifast 中编辑活动标签，以便`android:label=" "` 在您希望的每个活动中执行此操作

> 3.为什么Spinner中的item文本是黑色的，而不是action bar中其他文本的白色？

您可以为诸如 theme.holo.light 之类的文本颜色创建样式并将此主题应用于您的活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:16:37.180

> 如何从操作栏中隐藏活动名称“MyAcitivity”，以便 Spinner 获得更多位置？

呼吁`setDisplayShowTitleEnabled(false)`参加`ActionBar`这项活动。

> 如何让 Spinner 显示两行，一行用于标题，另一行用于副标题？就像在本机邮件应用程序中一样。

创建包含多行的布局，用于您的`SpinnerAdapter`.

> 为什么 Spinner 中的项目文本是黑色的，而不是操作栏中其他文本的白色？

可能您需要使用`getThemedContext()`on`ActionBar`才能`Context`与`SpinnerAdapter`构造函数一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:20:36.727

> 1) 如何从操作栏中隐藏活动名称“MyAcitivity”，以便 Spinner 获得更多位置？

如果您使用的是标准主题，您只需查找“noTitleBar”版本并添加它

```
android:theme="@android:style/Theme.Light.NoTitleBar" 
```

仅供参考：[检查此链接，它包含更详细的信息](https://stackoverflow.com/questions/5752619/about-the-full-screen-and-no-titlebar-from-manifest)

> 2) 如何让 Spinner 显示两行，一行用于标题，另一行用于副标题？就像在本机邮件应用程序中一样

I really dont get what you wanna do. If u need a text above and one below a spinning icon, you can just create a linear layout (a vertical one) adding inside of it the 3 elements

> 3) Why is the item text in the Spinner black and not white as the rest of the text in action bar?

You can modify every element in your layout by editing the style you are using.

FYI: [basic theme in android](http://developer.android.com/guide/topics/ui/themes.html)

# mysql - 选择一个区间的多个平均值

> ID：11743029
> 
> 赞同：3
> 
> 时间：2012-07-31T15:00:12.797
> 
> 标签：mysql, sql

所以我的同事正在研究一个可以描述为这样的模式：

```
+--------------------+-----------+
| DATETIME timestamp | INT value |
+--------------------+-----------+ 
```

每 5 分钟输入一行，其中包含该时刻的值。

这就是棘手的地方。他希望获得 7 天间隔内每 8 小时的平均值。

当然，我可以想到涉及一些客户端代码的解决方案，我们想知道是否可以在 SQL 中做更多的事情。

所以本质上，他想要：

```
SELECT timestamp, value
  FROM table
 WHERE timestamp >= NOW() - INTERVAL 7 DAYS 
   AND timestamp <= NOW(); 
```

然后将其分解为 8 小时块，并对每个块的内容进行平均。（每个区块应该有 12 行，每天应该有 3 个区块）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:15:52.443

尝试

```
SELECT avg(`value`)
FROM `table`
WHERE timestamp >= NOW() - INTERVAL 7 DAY AND timestamp <= NOW()
group by concat(date(`timestamp`), case when hour(`timestamp`) between 0 and 7 then 1
                                        when hour(`timestamp`) between 8 and 15 then 2
                                        else 3 end) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:12:05.370

如果您不只在您的请求中执行它，您可以在执行请求之前尝试以下拆分间隔的方法：

```
boundary1 = NOW()
boundary2 = NOW()

FOR i = 0 to 21 //7 days, 3 intervals of 8 hours per days
    boundary1 = boundary2
    boundary2 = boundary1 - seconds(8 hours)
    req = "SELECT timestamp, value FROM table WHERE timestamp >= "+boundary2+" AND timestamp <= "+boundary1
ENDFOR 
```

# liferay - 更改控制面板主题

> ID：11743032
> 
> 赞同：1
> 
> 时间：2012-07-31T15:00:27.477
> 
> 标签：liferay, liferay-theme

我发现网上有很多页面描述了我需要做什么。我需要`portal_ext.properties`用主题更改文件：

```
control.panel.layout.regular.theme.id=mytheme_WAR_mythemetheme 
```

我更改了`portal-ext.properties`文件中的属性，甚至将文件的副本添加到了我的 portlet 结构 ( `docroot/WEB-INF`)。我已经部署，重新启动了tomcat等。根本没有任何变化。

我错过了什么？更好的问题 - 为什么这会如此不必要地困难？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T15:12:40.597

或者您可以从控制面板执行此操作。

1.  以管理员身份登录（`test@lifery.com`除非更改）
2.  确保您已部署主题。
3.  转到：控制面板→门户设置→显示设置→外观→默认控制面板主题，然后从下拉选项中选择您的主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:07:30.170

文件的正确名称是portal-ext.properties 而不是portal_ext.properties。

该文件应位于您的 LIFERAY_HOME 文件夹下，其中 LIFERAY_HOME 是部署 liferay 的位置。只需使用此属性在此位置创建或编辑此文件并重新启动服务器

# java - 我的 android 应用程序多次检测到同一个蓝牙设备

> ID：11743036
> 
> 赞同：6
> 
> 时间：2012-07-31T15:00:40.587
> 
> 标签：java, android, bluetooth, broadcastreceiver

我正在使用来自 Android 开发者网站的代码来检测范围内的蓝牙设备，并将它们添加到 ArrayAdapter。问题是，每个设备都被添加到 ArrayAdapter 5-6 次。现在，我只是使用这里的代码：http: [//developer.android.com/guide/topics/connectivity/bluetooth.html#DiscoveringDevices](http://developer.android.com/guide/topics/connectivity/bluetooth.html#DiscoveringDevices)

这是我所拥有的：

```
mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();      
mBluetoothAdapter.startDiscovery();

final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();

        // When discovery finds a device
        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            // Get the BluetoothDevice object from the Intent
            BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);

            // Add the name and address to an array adapter to show in a ListView
            mArrayAdapter.add(device.getName() + "\n" + device.getAddress());
        }
    }
}; 
```

知道是什么原因造成的吗？我该怎么做才能让设备只添加一次到 ArrayAdapter，而不是 5 次？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T15:08:30.690

我不确定这是一个错误还是什么，但我在我的一些设备上也遇到过这种情况。为了解决这个问题，`List`只需一次添加找到的设备并进行一些检查。见下文：

```
private List<BluetoothDevice> tmpBtChecker = new ArrayList<BluetoothDevice>();

    final BroadcastReceiver mReceiver = new BroadcastReceiver() {
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();

            // When discovery starts    
            if(BluetoothAdapter.ACTION_DISCOVERY_STARTED.equals(action)){
                //clearing any existing list data
                tmpBtChecker.clear();
            }

            // When discovery finds a device
            if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                // Get the BluetoothDevice object from the Intent
                BluetoothDevice device = 
                    intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);

                // Add the name and address to an array adapter
                if(!tmpBtChecker.contains(device)){
                   tmpBtChecker.add(device);
                   mArrayAdapter.add(device.getName()+"\n"+device.getAddress());
                }
            }
        }
    }; 
```

# c++ - SDL 程序中的多重定义错误

> ID：11743049
> 
> 赞同：0
> 
> 时间：2012-07-31T15:01:04.450
> 
> 标签：c++, sdl, definition

`beeld`我对变量的, `knop`, `clips`, `foto`, `text`, `font`, `fontkleur`, `muziek`,的多个定义有疑问`event`。问题主要在这些文件中：

全局变量.h

```
#ifndef globals_H
#define globals_H

#include "SDL/SDL.h"
#include "SDL/SDL_image.h"
#include "SDL/SDL_ttf.h"
#include "SDL/SDL_mixer.h"

SDL_Surface *beeld = NULL;
SDL_Surface *knop = NULL;
SDL_Rect clips[ 4 ];
SDL_Surface *foto = NULL;
SDL_Surface *text = NULL;
TTF_Font *font = NULL;
SDL_Color fontkleur = { 100, 0, 10 };
Mix_Music *muziek = NULL;
SDL_Event event;

#endif 
```

主文件

```
#include "SDL/SDL.h"
#include "SDL/SDL_image.h"
#include "SDL/SDL_ttf.h"
#include "SDL/SDL_mixer.h"

#include "variabelen.h"
#include "class.h"
#include "functies.h"
#include "globals.h"

#include <string>

int main( int argc, char* args[] )
{
    bool stop = false;
    if( init(beeld_L,beeld_H,beeld_BPP) == false )
    {
        return 1;
    }

    foto = zichtbaar_scherm( "rescource/achtergrond.png" );
    knop = zichtbaar_scherm( "rescource/knop.png" );
    font = TTF_OpenFont( "rescource/lazy.ttf", 80 );
    muziek = Mix_LoadMUS( "rescource/muziek.wma" );

    laad_prenten(foto);
    laad_prenten(knop);
    laad_text(font);
    laad_muziek(muziek);

    if( laad_prenten(foto) == false || laad_prenten(knop) == false || laad_text(font) == false || laad_muziek(muziek) == false )
    {
        return 1;
    }

    set_clips();

    Knop drukknop( 170, 180, 320, 120 );

    plus_laag( 0, 0, foto, beeld );

    text = TTF_RenderText_Solid( font, "START !", fontkleur );
    plus_laag( ( 320 - text->w ) / 2, 30, text, knop );
    Mix_PlayMusic( muziek, -1 );

    while( stop == false )
    {
        if( SDL_PollEvent( &event ) )
        {

            if( event.type == SDL_QUIT )
            {
                stop = true;
            }
            if( drukknop.events() == true )
            {
                stop = true;
            }
        }
        drukknop.toon();

        if( SDL_Flip( beeld ) == -1 )
        {
            return 1;
        }
    }

    afsluiten();

    return 0;
} 
```

该程序制作了一个小菜单：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:10:33.880

像在 .h 文件中那样定义变量有一个严重的问题。这样的定义为该变量保留空间，因此如果您在两个不同的 C++ 文件中包含这样的 .h 文件，您将在每个 c++ 模块中获得单独的实例，这在链接时会给您带来冲突。

通常在 .h 文件中，变量被**声明**（但未定义） extern 像这样

```
extern int X; 
```

这使符号有效但不保留内存，因此如果您包含 extern 关键字，那么多个定义的问题就会消失。但是，您确实需要 ONE 模块中的一个真正的完整**定义**（可能是您的 main.cpp 文件）

```
int X=0; 
```

# backbone.js - 如何迭代一系列 Backbone 集合？

> ID：11743063
> 
> 赞同：4
> 
> 时间：2012-07-31T15:01:39.773
> 
> 标签：backbone.js

如何迭代一个范围，比如说从 3\. 到 10.，一个 Backbone 集合？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T15:17:57.027

通过对模型数组进行[切片](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice)并在结果上使用 _.each

```
var c=new Backbone.Collection(...);
_.each( c.models.slice(3,11), function(model) {
    console.log(model.get("id"));
}); 
```

[slice](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice)是基于 0 的，并且不包括结束索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:34:14.650

与切片相反，您可以使用集合的 at 方法更直接一些。

```
for (var idx=3;idx<=10;++idx) {
    var model = collection.at(idx);
    ...do something...
} 
```

# arrays - CSV 字符串与数组：这是否过于字符串化？

> ID：11743067
> 
> 赞同：2
> 
> 时间：2012-07-31T15:01:56.380
> 
> 标签：arrays, string, performance

我在生产环境中遇到了供应商提供给我们的一些现有代码。他们使用字符串来存储逗号分隔的值，以存储来自数据库的过滤结果。请记住，这是一种**名为 PowerOn 的专有脚本语言**，它与 AIX 系统上的数据库接口，但它是一种支持字符串、整数和数组的语言。

例如，我们有；

```
Account
----------------
123
234
3456
28390 
```

伪代码可能看起来像；

```
Define accounts As String
For Each Account
   accounts=accounts + CharCast(Account) + ","
End 
```

而不是我希望看到的东西

```
Define accounts As Integer Array(99)
Define index as Integer=0
For Each Account
   accounts(index)=Account
   index=index+1
End 
```

到循环完成时，`accounts`看起来像；`123,234,3456,28390,`. 该字符串稍后用于测试特定实例是否存在

```
If CharSearch("28390", accounts) > 0 Then Call DoSomething 
```

在示例中，该语句的计算结果为 true`DoSomething`并被调用。 **给定数组的选项，为什么要在一串逗号分隔值中存储整数值？** 我遇到的每种语言，执行基于字符串的操作几乎总是比基于整数的操作更昂贵。

考虑到我以前没有见过这种技术，而且我的经验有些有限，**有这个名字吗？这是常见的做法，还是只是另一个过于字符串化的例子？要扩展现有代码，我应该继续使用字符串方法吗？** 我们是否从供应商那里获得了粗俗的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:42:51.280

我在评论中的内容仍然有效，但我真正的答案是：这可能是关于兼容性/可移植性的设计决定。在您的整数数组案例（以及足够低级别的 API）中，您通常会发现自己会问诸如“今天”机器上整数大小的安全猜测是什么。字节序呢。

所有数据格式中最便携和最灵活的一直是并且将一直是印刷表示。处理它可能没有那么快，但这就是适配器/转换器等开始的地方。我不会惊讶地发现（人类可读的）某些东西的打印表示，*特别是*在你描述的数据库 API 中。

如果您想要快速的东西，只需将提供给您的任何内容转换为更有效的内部格式，您进行处理并将其转换回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:43:22.997

使用逗号分隔的字符串而不是数组本身并没有错。当然，您不能轻易访问`n`这样一个集合的 random 元素，但如果不需要这样的随机访问，那么它不会受到任何惩罚，对吧？

据我所知，出于非常实际的原因， Oracle DB 将`NUMBER`值存储为字符串（如果我的记忆是正确的 - 对于s 也是如此）。`DATE`

在您的具体示例中，在处理传递数据而不跨越进程边界时，使用字符串似乎是一种过度杀伤力。但是，当通过线路发送数据或存储在磁盘上时，字符串数据类型的选择是否更有意义？

# javascript - 选中单选按钮时显示第二个 div

> ID：11743069
> 
> 赞同：0
> 
> 时间：2012-07-31T15:02:01.850
> 
> 标签：javascript, html, css, button, radio

我试图制作一个联系表格，人们将在其中检查“单程”票或“往返”票。

当用户到达联系表格并显示一（1）个日期字段时，将检查第一个“单向”，但如果选中“往返”，我希望显示第二个日期字段和返回日期。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:21:28.737

只需观察单选按钮的 onchange 事件。当它到达时，您可以检查天气单程或往返选择，然后显示/隐藏带有返回日期字段的 div。

```
<!DOCTYPE html>
<head>
<script>
    function hdl_change(e) {
        document.getElementById('date2').style.visibility = 
            e.checked && e.id == 'opt_2' ? 'visible' : 'hidden';
    }
</script>
</head>
<body>
<form name="myForm">
  <input id="opt_1" type="radio" name="trip" value="oneway" onchange="hdl_change(this)"> One way<br>
  <input id="opt_2" type="radio" name="trip" value="round" onchange="hdl_change(this)"> Roundtrip<br>
</form>
<div id="date1"> date 1 stuff ...</div>
<div id="date2" style="visibility:hidden">  date 2 stuff ...</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:05:51.823

您需要使用*javascript*和*事件*处理程序来完成此操作，因为常规 html*表单*元素不附带这种*依赖/绑定*功能（为避免混淆：潜在的子元素也是如此）。

 *该答案将为您提供一个很好的提示，因为它回答了与类似问题/请求相关的问题：[https ://stackoverflow.com/a/5137316/1093284](https://stackoverflow.com/a/5137316/1093284)

**更新：**

由于您似乎不是很有经验，这是一个最简单的示例：

```
<!-- include jquery.js library first  (http://jquery.com/) -->
<script src="jquery.js"></script>

<!-- then work the magic -->
<script>
$(document).ready(function(){

    $('#inputB').hide;

    $('#checkboxA').click(
        function(e){
                $('#inputA').show;
                $('#inputB').hide;
        });
    $('#checkboxB').click(
        function(e){
                $('#inputB').show;
                $('#inputA').hide;
        });
});
</script> 
```

如果您足够适合使用 jQuery，请在此页面上查看其他答案，网址为[https://stackoverflow.com/a/11743381/1093284](https://stackoverflow.com/a/11743381/1093284)

最后但并非最不重要的一点是，我认为[https://stackoverflow.com/a/11743482/1093284](https://stackoverflow.com/a/11743482/1093284)上的答案提供了最佳解决方案，因为它很小并且不需要完整的 32kb javascript 库。另一方面，内联 javascript 实际上是不可行的。无论如何……重要的是用户，他们更喜欢加载速度更快的页面，而不是窗帘后面编码精美的内容。*

# c# - 从unity3d c#调用delphi .dll时出错

> ID：11743072
> 
> 赞同：1
> 
> 时间：2012-07-31T15:02:03.917
> 
> 标签：c#, delphi, dll, unity3d

尝试从 unity3d C# 代码调用 .dll（由 delphi 制成）函数时出现以下错误。

这里是图片，

[![在此处输入图像描述](../Images/0576fe0861129a68de57f66e68288f35.png)](https://i.stack.imgur.com/ZNda9.png)

错误说，

[![在此处输入图像描述](../Images/0273630711eff5c75f7d4fbf0e77c79a.png)](https://i.stack.imgur.com/KHjX3.png)

和 .dll 代码是，

[![在此处输入图像描述](../Images/ea8a7786b500e0758bf412108677f79b.png)](https://i.stack.imgur.com/GgHoZ.png)

那么为什么会出现错误以及如何解决呢？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T15:08:41.367

你写的地方

```
error = GetRequestResult(code); 
```

你需要写

```
error = GetRequestResult(out code); 
```

这正是第二条错误消息所说的内容。

* * *

查看您的代码，以您`PChar`的方式从 Delphi DLL 返回一个与您的 P/invokes 不兼容。P/invoke marshaller 假设您的返回值已分配，`CoTaskMemAlloc`并将调用`CoTaskMemFree`您返回的指针。这将导致一些问题。我认为你需要在某个时候解决这个问题，但由于它不是这个问题的主题，我不会尝试在这里解决这个问题。

# ios - Xcode Archive 调试条错误

> ID：11743075
> 
> 赞同：15
> 
> 时间：2012-07-31T15:02:14.727
> 
> 标签：ios, xcode, strip

我正在尝试将大型遗留 C++ 库与 iOS 应用程序集成。我们能够在设备上构建和运行，但我们无法存档应用程序。存档失败并出现以下错误。

命令 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/strip 失败，退出代码为 1

我在试纸条上做了一个“-v”，得到了一系列类似的警告

/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/strip：**无法剥离的重定位条目引用的符号：** /MyApp/DerivedData/SmartMusic_iPad/Build/Intermediates/ArchiveIntermediates/MyApp /IntermediateBuildFilesPath/UninstalledProducts/libMyLib-iOS.a(MyWhatever.o)

目前尚不清楚此消息是警告还是失败的原因。条带输出中没有其他问题迹象。有什么线索吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-24T14:41:48.367

在静态库目标的构建设置下，为“部署后处理”和“在复制期间剥离调试符号”选择否。它是编译后的代码，因此不需要剥离符号。我遇到了同样的错误（'usr/bin/strip failed with exit code 1'），这为我解决了这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-15T08:57:38.213

就我而言，我将以下内容添加到我的库目标构建设置中并开始正常工作：

*   死代码剥离：否

*   在复制过程中去除调试符号：所有配置都没有

*   条带样式：非全局符号

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-26T14:48:42.150

`Strip Style`Xcode 中的默认值是`All Symbols`，这对于可执行文件是可以的，但是对于一个库，您需要将其设置为，`Non-Global Symbols`因为必须保留全局符号。

由于剥离仅作为部署后处理的一部分完成，因此调试构建通常不受此选项的影响，因为对于它们，设置 DEPLOYMENT_POSTPROCESSING 通常设置为 NO。但是，在归档时，您创建了一个发布版本，并且这里 DEPLOYMENT_POSTPROCESSING 默认设置为 YES，因此您需要设置正确的条形样式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T15:06:34.990

有不同的选项`strip`（请参阅[手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/strip.1.html)），我认为您会想要使用该`-r`选项。您可以在 Xcode 项目设置中设置要执行的剥离*类型*。看看您是否可以将 Xcode 中的选项与手册页中的选项相关联。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-07T08:06:25.257

我有同样的问题，但我编辑`DEPLOYMENT POSTPROCESSING`到`NO`但它不起作用。

我只是去`Build Phases`我的目标中的标签，并在`Copy Bundle Resources`我删除`Foundation.framework`，然后我添加`Foundation.framework`到`Link Binary With Libraries`，它对我有用！

希望这将解决您的问题！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-06T07:22:53.593

我通过释放更多空间来修复此错误

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-02T12:22:00.167

对我有用的是，当我决定修复 Xcode 10.1 中的另一个问题时，我的模拟器没有启动，直到我真正需要它时我才忽略它，运行下面的命令有助于解决这个问题

```
sudo chmod 1777 /private/tmp 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-06-20T21:28:25.887

在 Xcode 11.5 上，我通过设置`Strip Linked Product`为框架目标解决了这个`No`问题。`Build Settings`

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2017-04-20T13:14:20.800

尝试将 STRIP_INSTALLED_PRODUCT 设置为 No 为您的目标（您遇到错误的目标）构建设置。
如果这不起作用，请尝试以下选项以及上述选项

*   死代码剥离：否
*   在复制过程中去除调试符号：所有配置都没有
*   条带样式：非全局符号

希望这能解决您的问题。

# jquery - 如何通过我的 jqGrid 或 sjg:grid 中的自定义按钮调用编辑规则

> ID：11743076
> 
> 赞同：0
> 
> 时间：2012-07-31T15:02:31.877
> 
> 标签：jquery, ajax, jqgrid, struts2

我们正在使用构建在 jqGrid 之上的 Struts2-jQuery Grid (sjg:grid)

我们添加了在我的网格列中定义的编辑规则，当我单击网格附带的“保存”按钮时，它们会被调用。但是，我们在网格的 NavBar/ToolBar 中为“保存操作”定义了一个自定义按钮。

**当用户单击我们的自定义按钮时，如何调用为网格列定义的规则（通过 EditRules）？**

**更新（提供更多细节和示例代码）：** 

jQGrid 似乎有自定义“edittype”和“editrules”选项..[参考网址](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#custom)

我们为我们的网格列定义了类似的自定义编辑规则，如下所示。

```
<sjg:gridColumn name="customType" index="customType" title="customType"
editable="false" edittype="custom" editrules="{custom:true, custom_func:mypricecheck}"></sjg:gridColumn> 
```

并且javascript函数在同一个JSP页面中定义如下

```
function mypricecheck(value, colname) {
alert('Calling custom validation');
if (value < 0 || value >20) 
  return [false,"Please enter value between 0 and 20"];
else 
  return [true,""];
} 
```

我们使用我的 sjg:grid 标签中的这个附加属性在我们的 sjg:grid 中添加了一个自定义按钮。

```
navigatorExtraButtons="{
                           SaveAll:{
                                     title:'Save All',
                                     onclick:function(){fnSaveAll()}
                                   }
                         }; 
```

现在点击这个自定义按钮，我想从我的 fnSaveAll() javascript 函数中调用 editrules 验证。当我单击网格附带的默认“保存”按钮时，会自动调用 editrules 验证。

如果我知道它是如何在内部调用的，那么我可以通过我的自定义按钮以相同的方式调用。

# html - 最小化 HTML 文件的大小

> ID：11743079
> 
> 赞同：0
> 
> 时间：2012-07-31T15:02:37.980
> 
> 标签：html, compression, gzip

我目前正在为报告生成一个大型 HTML 文件（大约 2-3 mb），并且该文件将被传输很多次。它不是通过任何形式的网络主机访问的，它只是一个被网络访问的文件，但网络遍布世界各地，因此并不是到处都快。

我知道 gzip 压缩，但从外观上看，它只能与 apache Web 服务器或类似的东西一起使用，通过 .htaccess 文件配置它。我已经从 HTML 文件中删除了空格，我的问题是除了将其压缩到标准存档中之外，我还能做些什么来最小化文件的大小？

谢谢，我很乐意回答任何其他问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:08:07.750

您当然可以查看 HTML 结构本身，看看是否可以减少标签数量。例如，您有一堆可以替换的嵌套表结构？您是否有可以放入单独样式表的内联样式？您是否有任何可以放入单独文件中的 javascript 内容？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:17:46.433

我不认为没有合适的网络服务器就可以压缩它，因为网络服务器会告诉浏览器文件要[在 HTTP 响应](https://www.rfc-editor.org/rfc/rfc2616#section-14.11)中解压缩。

如果格式是文件的大部分（即标签和脚本比文本多），您可以使用 css 来最小化大小。

如果数据量大，那么信息量就多于标签，建议你使用web服务器（也可以用[微软的IIS](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/5bce429d-c4a7-4f9e-a619-5972497b932a.mspx?mfr=true)压缩）

但是，如果可能的话，还要考虑将数据拆分到多个文件中，例如具有不同级别的详细信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T15:35:13.177

It is possible to contain compressed data within the HTML file and use a JavaScript to dynamically compress the data as the page is rendered using a JavaScript implementation of the Decompression module. See this answer for references: [JavaScript implementation of Gzip](https://stackoverflow.com/questions/294297/javascript-implementation-of-gzip)

# iphone - 使用自定义 URL 方案从 3 个 plist 文件传递 数据

> ID：11743081
> 
> 赞同：0
> 
> 时间：2012-07-31T15:02:39.540
> 
> 标签：iphone, migration, plist, url-scheme

我有精简版和完整版应用程序。我需要将应用程序（Lite）的 Documents 文件夹中的 3 个 plist 文件中的数据传递给新的（完整）应用程序。我知道可以使用自定义 URL 方案来完成。有人可以解释导出/导入数据的过程吗？

任何人都可以确认这可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:08:05.883

由于 iOS 上的沙盒环境，应用程序只能访问自己的`Documents`文件夹。这意味着您的完整应用程序无法访问`.plist`Lite`Documents`文件夹中的文件（在您的情况下是文件）。

# javascript - 上传前调整图像大小，但同步上传（不是 ajax）。可能吗？

> ID：11743082
> 
> 赞同：1
> 
> 时间：2012-07-31T15:02:42.740
> 
> 标签：javascript, image, forms, resize

我有一个包含一些字段的表单，包括输入类型='文件'，用于上传图像。
我正在寻找一种方法来调整此字段选择的图像大小，但不立即上传。

我已经阅读了一些教程，这些教程教授了以下过程：
1 - 使用文件字段上的“onchange”事件捕获图像；
2 - 创建具有所需图像大小的画布元素；
3 - 在画布元素中绘制图像并读取其内容；
4 - 使用 FormData 异步发送图像数据 (ajax)。

我想在第 3 步之前做同样的事情，然后在用户单击表单的提交按钮时将调整大小的图像与其他字段一起发送。

有人知道吗？
谢谢！

Ps：一些帖子几乎可以满足我的要求：
[http :](http://coding.pressbin.com/84/File-API-Resize-photo-before-upload/)
[//coding.pressbin.com/84/File-API-Resize-photo-before-upload/ 在 HTML5 画布中调整图像大小](https://stackoverflow.com/questions/2303690/resizing-an-image-in-an-html5-canvas)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:25:07.497

如果您想调整图像大小以节省空间，请尝试： [http ://www.researchandtechnology.net/bcif/](http://www.researchandtechnology.net/bcif/)

这是一种 JavaScript 图像压缩算法。

这也可能有帮助：[Javascript无损图像压缩](https://stackoverflow.com/questions/4481800/javascript-lossless-image-compression)

并将其包含在其他表单项中，base 64 对图像进行编码 [如何使用 javascript 将图像转换为 base64 字符串](https://stackoverflow.com/questions/6150289/how-to-convert-image-into-base64-string-using-javascript)

并将其作为字符串发送

如果您不尝试这样做，您能否提供更多信息？

# javascript - 使用 .empty() 和 .html() 后没有悬停事件

> ID：11743083
> 
> 赞同：1
> 
> 时间：2012-07-31T15:02:44.813
> 
> 标签：javascript, jquery, html, jquery-ui-sortable, jquery-hover

我有一个可排序的列表（jQuery UI），我想使用“li”元素的 id 以编程方式对其进行排序。（它们都是数字）。

为此，我做了这个功能：

```
function resetList()
{
   var orderedItems = new Array();
   var unorderedItems = $("#sortable").find('li');

   for(var i = 0; i < unorderdItems.length; i++)
   {
       var counter = 0;
       var check = false;
       do {

           if(unorderedItems[counter].id == (i+1))
           {
                check = true;
                orderedItems.push(unorderedItems[counter]);                   
           }
           counter++;  

       } while (!check && counter < unorderedItems.length);
    } 

    $("#sortable").empty().html(orderedItems);           
} 
```

我认为这很好用（我是 javascript 新手，所以我不知道该代码是否“专业”）

问题是，在我调用该函数之后，不再触发 jQuery 悬停或鼠标悬停事件（之前一直在工作）

我的“li”元素的内容：

```
<li class="ui-state-default">
    <div class="image" style=\"height:100%; width:100%;">
        <img class="overlay" src="img/pic.png" height="200" width="200" style="height:200px; width:200px; visibility:hidden;" />
    </div>;
</li> 
```

JavaScript：

```
$(".image").hover(function(e)
{
//make overlay visible  
}, function(e) 
{       
//hide overlay      
}); 
```

任何想法为什么在我调用 resetList() 后悬停功能不起作用？

抱歉英语不好，感谢您的帮助！

-缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:08:28.380

我很确定在您对元素进行排序后，新的 dom 元素会添加到您的页面中，替换旧的。结果，您的事件处理程序会丢失。您应该能够通过使用委托事件很容易地修复它`on`

```
$(".ui-state-default").on("mouseenter", ".image", function() { .....

$(".ui-state-default").on("mouseleave", ".image", function() { ..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:13:17.033

如果您使用 jquery 1.7 或更高版本，请使用 .on 否则使用 .delegate

```
$(".image").on("mouseover mouseout",function(evt){
    if (evt.type == 'mouseover') {
           // do something on mouseover
        alert("over");
      } else {
        // do something on mouseout
        alert("out");
      }
     }); 
```

较早版本的 jquery

```
$("body").delegate(".image","hover",function(evt){
    if (evt.type == 'mouseenter') {
        // do something on mouseover
        alert("over");
    }else {
        // do something on mouseout
        alert("out");
        }
}); 
```

你是对的，改为委托

Dafen，hover 不会使用从 javascript 动态创建的元素，因此使用 .on 或委托，无论如何你已经找到了你的答案，只是纠正我的答案，这样没有人会犯同样的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:19:55.773

困难的是，整数不是有效的 HTML ID（ID 应该以字母 [A-Za-z] 开头）

# log4net - log4net 重复条目

> ID：11743085
> 
> 赞同：0
> 
> 时间：2012-07-31T15:02:51.170
> 
> 标签：log4net

我是 log4net 的新手，一直在阅读和阅读，并没有得出我的问题是什么的结论。这是配置：

```
<root>
  <level value="DEBUG" />
  <appender-ref ref="AdoNetAppender"/>
</root>

<appender name="AdoNetAppender" type="log4net.Appender.AdoNetAppender">
  <bufferSize value="1" />
  <connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  <connectionString value="Server=XXXXX;Database=XXX;Network=XXXXX;User ID=XXXXX;Password=XXXXX" />
  <commandType value="StoredProcedure" />
  <commandText value="dbo.LogWrite" />
  <parameter>
    <parameterName value="@LogDate" />
    <dbType value="DateTime" />
    <layout type="log4net.Layout.RawTimeStampLayout" />
  </parameter>
  <parameter>
    <parameterName value="@LogLevel" />
    <dbType value="String" />
    <size value="50" />
    <layout type="log4net.Layout.PatternLayout" value="%level" />
  </parameter>
  <parameter>
    <parameterName value="@Logger" />
    <dbType value="String" />
    <size value="255" />
    <layout type="log4net.Layout.PatternLayout" value="%logger" />
  </parameter>
  <parameter>
    <parameterName value="@UserID" />
    <dbType value="Int32" />
    <layout type="log4net.Layout.PatternLayout" value="%property{UserID}" />
  </parameter>
  <parameter>
    <parameterName value="@Message" />
    <dbType value="String" />
    <size value="4000" />
    <layout type="log4net.Layout.PatternLayout" value="%message" />
  </parameter>
  <parameter>
    <parameterName value="@Exception" />
    <dbType value="String" />
    <size value="4000" />
    <layout type="log4net.Layout.ExceptionLayout"/>
  </parameter>
</appender> 
```

当我转到 .NET 页面并在 Page_Load 中执行此语句时：

`log.Error("hi")`

我将此错误作为我的数据库表中的一个条目。但是，如果我很快再次访问此页面，我总共会获得 3 个条目？似乎如果我在重新加载页面之前等待大约 10 秒，我只会再获得一个条目。我已将缓冲区大小设置为 1。有人遇到同样的问题吗？社区的大多数人倾向于说，如果有问题，那么很可能是在您的配置中，但对我来说，我的配置看起来不错。

非常感谢任何能对此有所启发的人！

//丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:07:28.303

Log4Net 可能工作得很好。它正在记录正在发生的事情。

您需要弄清楚为什么 Page_Load 在您不期望的情况下正在执行。

# javascript - 如何让 jQuery 循环容器的宽度与其下一张幻灯片的宽度相同？

> ID：11743088
> 
> 赞同：1
> 
> 时间：2012-07-31T15:03:00.573
> 
> 标签：javascript, jquery, plugins, width, cycle

我会尝试更具体：

我有这个 html 标记片段：

```
<div id="slider">
<ul>
<li>first slide</li>
<li>secondth slide</li>
<li>third slide</li>
<li>fourth slide</li>
</ul>
</div> 
```

和这个 js 片段来激活循环

```
$('#slider ul').cycle({ 
    easing: 'easeInBounce',
    fx: 'scrollUp',
    speed:400,
    timeout:5000
}); 
```

现在我希望 #slider ul 宽度自动计算与其 ul li 元素相同。

希望你们明白我的意思！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:28:48.347

编辑：

好的，所以你可以在回调之前（或回调之后）使用：

html:

```
Ul width: <input type="text" id="ulwidth" />
<div id="slider">
<ul>
<li style="width: 150px">first slide</li>
<li style="width: 230px">secondth slide</li>
<li>third slide</li>
<li>fourth slide</li>
</ul>
</div> 
```

和 JS：

```
$('#slider ul').cycle({ 
    fx: 'fade',
    before: function(curr, next, option){ // or after: function...
           //console.log(curr.style.width);
           var w = curr.style.width; // or next.style.width
           $('#slider ul').css({'width': w});
           $('#ulwidth').val($('#slider ul').width());
    }
}); 
```

这可以根据下一个或当前 li（使用之后或之前）来适应 ul 宽度：[示例](http://jsfiddle.net/alex_ball/TkNWK/4/)

# javascript - 在单击列表时使用 bootstrapDropdown 防止下拉菜单消失

> ID：11743089
> 
> 赞同：4
> 
> 时间：2012-07-31T15:03:10.383
> 
> 标签：javascript, twitter-bootstrap

我正在使用[bootstrap-dropdown](http://twitter.github.com/bootstrap/javascript.html#dropdowns)生成下拉菜单。我想防止单击菜单时菜单消失。

我已经实现了以下代码，但它不起作用。知道如何解决吗？

## HTML

```
<li class="dropdown notification">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">
    <span class="notification-label label label-info">
      <i class="icon-inbox icon-white"></i>
      <span class="notification-number">{{ unread_notifications }}</span>
    </span>
  </a>
  <ul class="dropdown-menu notification-list"></ul>
</li> 
```

## JS

```
events: {
  'click ul.notification-list': 'onClickNotification'
},

onClickNotification: function (e) {
  e.preventDefault();
  console.log(e);
}, 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T15:05:09.667

你试过`event.stopPropagation`吗？

```
onClickNotification: function (e) {
    e.stopPropagation();
    console.log(e)
}, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T15:21:01.117

如果您想禁用下拉列表的所有自动关闭，您可以禁用侦听器

```
$('html').off('click.dropdown') 
```

### [JSFiddle](http://jsfiddle.net/AVaqX/)

# git - 关于 git --amend -m "blablalba"

> ID：11743104
> 
> 赞同：1
> 
> 时间：2012-07-31T15:03:59.553
> 
> 标签：git

我想修改我上次提交和推送的消息。我`git --amend -m "blahblah"` 应该`git push`再做一次吗？我需要`-f`什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:06:40.243

如果您已经推送了提交，`--amend`除非您确定没有其他人已经从中拉出，否则不要这样做。如果您知道这一点，则需要`git push -f`将更改公开。

真的，如果您已经推送它，请不要进行非快进修改（rebase，--amend）。这将导致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:09:52.863

修改已发布的历史记录通常是个坏主意。发布的历史是指已被推送到上游的提交。

不过，如果您**必须**这样做，我会找到删除上游分支然后重新推出本地分支的最佳方法。

```
git push origin :<branch-name>
git push -u origin <branch-name> 
```

（如果您的遥控器以其他方式命名，请更改来源）

这样做之后，您必须注意与其他协作者进行交流。在获取最新更改后，他们将希望将本地分支重置为远程分支

```
git fetch origin
git reset <branch-name> origin/<branch-name> 
```

注意：以上内容将使他们丢失任何他们没有推送到流或合并到其他分支的提交。

# sql - 在 SQLite 中的多列上选择语句

> ID：11743120
> 
> 赞同：2
> 
> 时间：2012-07-31T15:04:58.060
> 
> 标签：sql, sqlite, select

我有一个数据库，其中包含名为帮助的表，其中包含名为 i_id、issue、url、steps、kw1、kw2...kw12 的列。

kw1-kw12 字段中有一个词作为关键字，可以为空。

当我做：

```
sqlite> select issue,url,steps from help where kw1='adobe'; 
```

我得到：

```
blank popup|blankpopup.html|S
missing pdfs|missingpdfs.html|S
printall not populating|printall.html|A 
```

这是对的。 **我的问题是，当我移动到跨 kw1-kw12 的多个字段中的另一个关键字（如“ie”）时，我如何使用 select 语句而不是仅搜索 kw1，而是搜索kw1*到*kw12？**

我知道 ie 在哪些字段中。我有一个 Excel 表，它告诉我数据库是如何构建的，但使用数据库的人将无法访问它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T15:10:58.783

如果我理解正确，您只需要使用 Or 关键字并搜索所有 kw 字段

```
sqlite> select issue,url,steps from help where kw1='ie' or kw2='ie' or kw3='ie' or kw4='ie' or kw5='ie' or kw6='ie' or kw7='ie' or kw8='ie' or kw9='ie' or kw10='ie' or kw11='ie' or kw12='ie'; 
```

# ios - ios代码签名问题

> ID：11743129
> 
> 赞同：1
> 
> 时间：2012-07-31T15:05:15.397
> 
> 标签：ios, xcode, code-signing

我在使用 IOS CodeSigning 时遇到了麻烦。

我搜索了它，但我无法找出问题所在。

**这是我的问题**

1.  [http://i.stack.imgur.com/caCR7.png](http://i.stack.imgur.com/caCR7.png)
2.  [http://i.stack.imgur.com/OIkLH.png](http://i.stack.imgur.com/OIkLH.png)

我的捆绑包 ID 是正确的，但它不起作用。错误信息是；“代码签名错误：身份‘iPhone Developer’与默认钥匙串中的任何有效、未过期的证书/私钥对不匹配”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:17:40.353

转到 Organizer，选择 Device 选项卡，然后在 Provisioning Profiles（左侧面板中的第一个条目）下，您应该会看到您的证书。它们有效吗？如果不是，您可能会丢失私钥。

如果你去你的钥匙串，在证书下你应该看到你的开发者资料。它们应该是可扩展的，当您扩展时，您应该看到有私钥。没有它，证书将无效。

# sql - 替换列数据的 SQL 脚本

> ID：11743131
> 
> 赞同：0
> 
> 时间：2012-07-31T15:05:22.703
> 
> 标签：sql, postgresql

我有一个 PostgreSQL 数据库，我想制作一个脚本，将表 A 的一列的数据替换为其他表列的数据。我写了这个 PL/PgSQL 函数：

```
BEGIN;

    CREATE TEMPORARY TABLE tmp_table (id bigint PRIMARY KEY,
        registrationnumber character varying(255));
    INSERT INTO tmp_table
    select id,registrationnumber from tableB;

    for d in tmp_table loop
        update TABLEA set registrationnumber=d.id where 
            registrationnumber=d.registrationnumber;
        return next d;
    end loop;

END; 
```

我的脚本出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:33:17.677

没有理由在循环中执行此操作 - 让数据库引擎为您执行此操作。

```
 UPDATE tablea 
  SET registrationnumber = tableb.id
  FROM tableb
 WHERE tablea.registrationnumber = tableb.registrationnumber;

select * from tablea; 
```

请参阅此 SQLFiddle：

[http://sqlfiddle.com/#!1/1281b/1](http://sqlfiddle.com/#!1/1281b/1)

请注意，您将 varchar 值隐式转换为 bigint。如果这些 varchar 值中的任何一个未正确转换，则语句*将失败*。

# objective-c - 使用 AVPlayer 循环播放电影的特定片段 - 总是回到开头

> ID：11743134
> 
> 赞同：0
> 
> 时间：2012-07-31T15:05:27.487
> 
> 标签：objective-c, ios, avfoundation, avplayer

我有一个大约 12 秒长的视频。5-10 秒是可循环的。

我想第一次从头开始播放视频，然后无限期地循环播放 5-10 秒。

但是，当我尝试时，视频又跳回到开头。我在这里做错了吗？视频为 H.264 mp4 格式。

这是我使用的一段代码：（每帧都会调用更新函数）

```
-(void) update:(double)timeDelta
{
    if ( !m_player ) {
        return;
    }

    CMTime time = m_player.m_player.currentTime;
    if ( CMTimeGetSeconds(time) > 10.0f ) {
        [m_player seekToTime:CMTimeMakeWithSeconds(5.0f, time.timescale)];     
    }
} 
```

任何帮助将非常感激。

谢谢，丰富

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:53:50.403

大多数玩家只会寻找 I 图片（Intra 图片）。可能是您的剪辑在开始时只有一张 I 图片，而在 5 秒后又有一张。检查那个。如果您可以重新编码，则使用每 1 秒插入的 I 图片重新编码以允许您执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T17:57:02.587

如果特定视频的关键帧间隔大于 5 秒，它可能正在寻找关键帧。

尝试调整视频的编码方式，以便您能够在 5 秒标记处获得关键帧，或者使用

```
[m_player seekToTime:CMTimeMakeWithSeconds(5.0f, time.timescale) toleranceBefore: kCMTimeZero toleranceAfter: kCMTimeZero]; 
```

请注意，如果您这样做，解码器必须在您想要的点恢复播放之前解码这 5 秒的视频，因此您可能会在循环中出现短暂的延迟。

# java - 替换打印流中的文本

> ID：11743136
> 
> 赞同：1
> 
> 时间：2012-07-31T15:05:30.263
> 
> 标签：java, regex, replace, printstream

是否可以在打印流中替换正则表达式？

我有一段代码记录了控制台窗口中显示的所有文本，但它也记录了 ANSI 转义码。

我发现这个正则表达式`"s:\x1B\[[0-9;]*[mK]::g"`可以删除它们，但它只适用于字符串。有没有办法将正则表达式替换应用于恒定的字符串流并过滤掉 ANSI 转义码？

如果可能的话，尽可能地简化它，在编程方面我仍然是一个新手，我只是在一个已经存在的程序上构建。

**编辑：**

我有这个代码，我在堆栈溢出的其他地方找到了它，这允许我同时流式传输到日志文件和控制台。

这就是我使用的，然后我在这之后设置了发球台。

```
Logging tee = new Logging(file, System.out); 
```

.

```
package com.md_5.mc.chat;

import java.io.IOException;
import java.io.OutputStream;
import java.io.PrintStream;

public class Logging extends PrintStream
{
  private final PrintStream second;

  public Logging(OutputStream main, PrintStream second)
  {
    super(main);
    this.second = second;
  }

  public void close()
  {
    super.close();
  }

  public void flush()
  {
    super.flush();
    this.second.flush();
  }

  public void write(byte[] buf, int off, int len)
  {
    super.write(buf, off, len);
    this.second.write(buf, off, len);
  }

  public void write(int b)
  {
    super.write(b);
    this.second.write(b);
  }

  public void write(byte[] b) throws IOException
  {
    super.write(b);
    this.second.write(b);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:18:36.730

创建创建一个子类`FilterOutputStream`，比如说`RegexOutputStream`。这个类应该缓冲所有写入它的数据（来自不同的`write(...)`方法）。在该`flush()`方法中，它应该应用正则表达式，然后将结果写入底层`OutputStream`。

接下来，实例化`PrintWriter`要写入的`RegexOutputStream`. 这样你就不需要改变`PrintWriter`类的行为。如果您不再需要过滤，您可以将 RegexOutStream 从链中取出，一切都会再次运行。

请注意，根据您使用 的方式`PrintWriter`，这可能会导致`RegexOutputStream`s 缓冲区变得非常大。如果您创建`PrintWriter`自动刷新，它将在每一行和每个字节数组之后刷新。有关详细信息，请参阅其[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:08:35.580

您可以对有问题的打印流进行子类化并在调用适当的方法之前执行您的正则表达式替换`super`？例如

```
public void ExampleStream extends PrintStream {

  @Override
  public void print(String s) {
    super(s.replaceAll(ANSI_PATTERN,""));
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:25:03.923

我认为`Logging`类中的代码不是一个好方法（至少是这样）：

*   如果您有权访问 PrintStream 源代码，您可能会发现当前重新定义的方法可能根本没有使用： PrintStream#print(...) 方法委托于 textOut#write(...) （不在重新定义的 OutputStream 上） ＃写（...） ）。
*   因此，您应该重新定义 print(String) 和 print(char[]) 方法以有效过滤输出。
*   答案中有一些重新定义的方法的例子（包括这个更进一步）。

或者，如果您只想要一个过滤掉 ANSI 代码的 PrintStream（正如我最初理解的那样），那么在 FilterOutputStream 上实现它会更方便（正如 mthmulders 所建议的那样，因为您将不得不重新定义更少的东西并且会更容易重复使用）：

*   `BufferedOutputStream`制作课堂副本。随意命名。（例如**TrimAnsiBufferedStream**）
*   然后重新定义de flushBuffer()方法：

    ```
    private void flushBuffer() throws IOException {
        if (count > 0) {
            String s = new String(buf, 0, count); // Uses system encoding.
            s.replaceAll(ANSI_PATTERN, "");
            out.write(s.getBytes());
            count = 0;
        }
    } 
    ```

*   当您需要实例化替换 ANSI 的 PrintStream 时，调用`new PrintStream(new TrimAnsiBufferedStream(nestedStream))`.

*   这可能不是万无一失的（例如，编码配置可能发生的任何事情，或者缓冲区大小不够大，或者打印流中的刷新选项），但我不会让它过于复杂。

顺便一提。欢迎 kukelekuuk00。请务必阅读常见问题解答和对答案的反馈（我们关心您，请回报）。

# c++ - Qt QTextEdit 仅加载一半文本文件

> ID：11743137
> 
> 赞同：0
> 
> 时间：2012-07-31T15:05:39.830
> 
> 标签：c++, qt, qt4, qtextedit

我有一个问题：我的项目是一个非常简单的带有 QTextEdit 和 QSyntaxHighlighter 的项目，我正在尝试加载一个 .cpp 文件并仅突出显示该文件的第八行，但如果 QTextEdit 无法加载整个文件我要求它突出显示这条线。

下图显示了问题：

![在此处输入图像描述](../Images/9e85484fada7228c4ec3bfa583d43e4f.png)

该应用程序的相关代码如下：

```
void MainWindow::openFile(const QString &path)
{
    QString fileName = path;

    if (fileName.isNull())
        fileName = QFileDialog::getOpenFileName(this,
            tr("Open File"), "", "C++ Files (*.cpp *.h)");

    if (!fileName.isEmpty()) {
        QFile file(fileName);
        if (file.open(QFile::ReadOnly | QFile::Text))
            editor->setPlainText(file.readAll());

        QVector<quint32> test;
        test.append(8); // I want the eighth line to be highlighted
        editor->highlightLines(test);
    }
} 
```

和

```
#include "texteditwidget.h"

TextEditWidget::TextEditWidget(QWidget *parent) :
    QTextEdit(parent)
{
    setAcceptRichText(false);
    setLineWrapMode(QTextEdit::NoWrap);

}

// Called to highlight lines of code
void TextEditWidget::highlightLines(QVector<quint32> linesNumbers)
{

    // Highlight just the first element
    this->setFocus();
    QTextCursor cursor = this->textCursor();
    cursor.setPosition(0);
    cursor.movePosition(QTextCursor::Down, QTextCursor::MoveAnchor, linesNumbers[0]);
    this->setTextCursor(cursor);
    QTextBlock block = document()->findBlockByNumber(linesNumbers[0]);
    QTextBlockFormat blkfmt = block.blockFormat();
    // Select it
    blkfmt.setBackground(Qt::yellow);
    this->textCursor().mergeBlockFormat(blkfmt);
} 
```

但是，如果您想使用我使用的 cpp 文件（在 FileToOpen\diagramwidget.cpp 目录中）测试项目，这里是完整的源代码

[http://idsg01.altervista.org/QTextEditProblem.zip](http://idsg01.altervista.org/QTextEditProblem.zip)

我已经尝试解决这个问题很长时间了，我开始怀疑这是否不是错误或类似的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:47:09.207

`QTextEdit`不能一次接受这么多的文字。拆分它，例如这样：

```
if (!fileName.isEmpty()) {
    QFile file(fileName);
    if (file.open(QFile::ReadOnly | QFile::Text))
    {
        QByteArray a = file.readAll();

        QString s = a.mid(0, 3000);//note that I split the array into pieces of 3000 symbols.
        //you will need to split the whole text like this. 
        QString s1 = a.mid(3000,3000);

        editor->setPlainText(s);
        editor->append(s1);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:08:29.457

似乎 QTextEdit 控件在每次加载后都需要时间，设置一个`QApplication:processEvents();`after`setPlainText()`可以解决问题，尽管它不是一个优雅的解决方案。

# javascript - CouchDB reduce 函数给出了意想不到的结果

> ID：11743139
> 
> 赞同：0
> 
> 时间：2012-07-31T15:05:44.403
> 
> 标签：javascript, couchdb, mapreduce, couchapp

我正在开发一个沙发应用程序。我的文档包含一个名为标签的字段，我正在尝试检索所有文档中的唯一标签。我的地图/减少功能如下：

地图.js

```
function(doc){
        if(doc.tags){
            emit(doc.tags,1);
        }
} 
```

减少.js

```
function(keys,values,rereduce){
    return sum(values);
} 
```

返回的输出是所有标签的计数。我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:22:20.113

如果您想要所有标签的列表，则不需要 reduce 功能。您需要使用 option 调用您的视图`group=true`。所以例如你打电话

```
http://localhost:5984/yourdb/views/tag_view?group=true 
```

或者使用[couch.js](http://daleharvey.github.com/jquery.couch.js-docs/symbols/%24.couch.html)你可以做

```
$.couch.db.view('your_view', {data: {"group": true}}); 
```

如果您查看文档，您会看到您`ajaxOptions`为请求定义的方式与为 jQuery 中的普通 ajax 请求定义它们的方式相同。因此，您只需使用[此处记录的数据选项](http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings)

有关详细信息，请参阅[CouchDB Wiki 分组](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views#Grouping)。

# alfresco - Alfresco Share - 动态呈现表单中的字段

> ID：11743141
> 
> 赞同：0
> 
> 时间：2012-07-31T15:05:54.280
> 
> 标签：alfresco, alfresco-share

我的问题或多或少在标题中，我在我的数据模型中添加了一个新的数据类型。

```
<type name="moi:montype">
  <title>titre type</title>
  <parent>cm:content</parent>
  <mandatory-aspects>
    <aspect>moi:monaspect</aspect>
  </mandatory-aspects>
</type> 
```

这个使用了一个新方面，我在其中添加了一个新字段

```
<aspect name="moi:monaspect">
  <title>titre aspect</title>
  <properties>
    <property name="moi:monchamp">
      <type>d:text</type>
      <mandatory>false</mandatory>
    </property>
    ...
  </properties>
</aspect> 
```

然后，我通过编辑文件 share-config-custom.xml 在共享表单中显示了这个新字段。

```
<config evaluator="node-type" condition="moi:montype">
  <forms>
    <form>
      <field-visibility>
        <show id="moi:monchamp"/>
        ...
      </field-visibility>
      <appearance>
        <field id="moi:monchamp" label="Champ texte" />
        ...
      </appearance>
    </form>
  </forms>
</config> 
```

到那时，我可以测试我的更改并且新字段显示良好。但我想更进一步，并根据登录的用户组设置例如字段的显示。如果登录的用户是“特权组”的一部分，则显示该字段，否则将不显示，或仅在只读模式下显示。

你认为我们能做到吗？如何 ？我查看了文档，但找不到我的快乐。我不要求完整的解决方案，而是要遵循的提示。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:16:58.130

每个字段都有一个组件渲染器。这些是使用 FreeMarker 实现的。大多数情况下，就像您的情况一样，您依赖于默认的组件渲染器。除了 Matjaz 提到的选项之外，另一个选项是将字段指向自定义渲染器。渲染器可以检查用户的组成员身份和该字段所需的组（例如，可能作为参数传入），然后决定是否显示自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T17:19:30.590

另一种方法是编写自己的共享配置表单评估器（如 node-type ...）

这可以检查节点类型和用户权限角色/组

让您为每个设置（每个用户组/角色）编写一个配置

...

注意！这将适用于表单，因此纯粹是一种装饰设置，露天界面和 CIFS 等将不支持此设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:00:16.663

有几种方法可以做到这一点。

最简单的方法是制作一个 webscript，它根据当前登录的用户是否在您的目标组中为表单字段返回 html。然后添加一个表单控件，它只是 javascript 对 webscript 进行 ajax 调用，并将结果附加到在表单控件 (ftl) 中指定的容器 div。

您可以使用的第二种方法是扩展“org.alfresco.repo.forms.processor.AbstractFilter”并在 Java 中实现该功能。如果当前登录的用户不在目标组中，您可能可以在生成并删除表单字段后实施。

希望这个对你有帮助... ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-08T11:45:17.990

没有简单的方法可以做到这一点，因为 alfresco 不允许您设置节点属性的权限。

每个字段都有控制模板，您可以定义自己的。在您的模板中，您将根据用户类型定义如何呈现此属性。

```
<config evaluator="node-type" condition="cm:content">
   <forms>
      <form>
         <appearance>
            <field id="cm:title">
               <control template="/org/alfresco/components/form/controls/yourOwnFtl.ftl" />
            </field>
         </appearance>
      </form>
   </forms>
</config> 
```

# vb.net - SSIS 编写变量脚本任务

> ID：11743142
> 
> 赞同：0
> 
> 时间：2012-07-31T15:05:55.127
> 
> 标签：vb.net, ssis

不知道我在这里做错了什么 - 我正在尝试生成一个变量，然后我将其传递给 FTP 任务。

在脚本任务中，我设置变量 ReadWrite = User::WildCard。目前，User::WildCard 变量的字符串值为“test.csv”。此脚本应将今天的字符串值重命名为“/forecasts/forecast_20120730.csv”。截至目前，脚本运行成功，但变量未写入。

```
#Region "Imports"
Imports System
Imports System.Data
Imports System.Collections
Imports System.Math    
Imports Microsoft.SqlServer.Dts.Runtime
Imports System.IO
Imports System.Text
Imports System.Windows.Forms
#End Region

'ScriptMain is the entry point class of the script.  Do not change the name, attributes,
'or parent of this class.
<Microsoft.SqlServer.Dts.Tasks.ScriptTask.SSISScriptTaskEntryPointAttribute()> _
<System.CLSCompliantAttribute(False)> _
Partial Public Class ScriptMain
    Inherits Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase

    'This method is called when this script task executes in the control flow.
    'Before returning from this method, set the value of Dts.TaskResult to indicate success or failure.
    'To open Help, press F1.

    Enum ScriptResults
        Success = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success
        Failure = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure
    End Enum

    Public Sub Main()

        Dim FilePart As String

        FilePart = Format(Now, "yyyyMMdd")

        Dts.Variables("WildCard").Value = "/forecasts/forecast_" & FilePart & "*.csv"
        Dts.TaskResult = ScriptResults.Success

    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:19:55.977

在您的代码中，我在任何地方都看不到 LockForWrite 。我认为您需要它才能写回变量。[这](http://consultingblogs.emc.com/jamiethomson/archive/2005/02/09/SSIS_3A00_-Writing-to-a-variable-from-a-script-task.aspx)是 Jaime Thomson 的博客中关于如何做到这一点的一个出色而简单的示例。希望这可以帮助。

# dynamic - Solr 为结果中的每个文档返回不同的输出字段

> ID：11743144
> 
> 赞同：2
> 
> 时间：2012-07-31T15:05:58.623
> 
> 标签：dynamic, solr, field

您好，我已阅读 Solr wiki 并在此处搜索，但没有找到适合我用例的解决方案：

我们正在将具有不同类型合同的客户数据索引到一个文档中。因此，每个客户都会生成一份包含一份或多份不同合同的 Solr 文档。

每个合约的字段通过导入动态添加（例如contract_type_1_s、contract_type_2_s、...；contract_change_date_1_dt、contract_change_date_2_dt、...）。*因此，所有带有“ 2* ”的字段都与第 2 号合同相关。这样，用户可以搜索具有第 1 类合同但没有第 2 类合同的客户，依此类推。

我的用例现在只返回与查询匹配的合同字段。

这是一个例子：

```
<doc>
  <field name="id">100</field>
  <field name="customer_name">paul</field>
  <field name="contract_type_1_s">inhouse</field>
  <field name="contract_change_date_1_dt">2012-09-01T00:00:00Z</field>
</doc>
<doc>
  <field name="id">101</field>
  <field name="customer_name">fred</field>
  <field name="contract_type_1_s">inhouse</field>
  <field name="contract_change_date_1_dt">2012-09-01T00:00:00Z</field>
  <field name="contract_type_2_s">external</field>
  <field name="contract_change_date_2_dt">2012-09-01T00:00:00Z</field>
</doc>
<doc>
  <field name="id">102</field>
  <field name="customer_name">karl</field>
  <field name="contract_type_1_s">external</field>
  <field name="contract_change_date_1_dt">2012-09-01T00:00:00Z</field>
  <field name="contract_type_2_s">inhouse</field>
  <field name="contract_change_date_2_dt">2012-09-01T00:00:00Z</field>
</doc> 
```

如果用户现在搜索合同类型为“外部”的客户，则结果中包含 ID 为**101**和**102**的文档。现在我想返回与查询匹配的合同的不同字段。

在此示例中，对于文档**102**，它们应该是**contract_change_date_1_dt** ，对于文档**101 ，它们应该是****contract_change_date_2_dt**，因为 1 号合同在文档 102 中是外部的，而 2 号合同在文档 101 中是外部的。

 ******有没有办法通过内置组件实现这种行为？

* * *

我知道我可以找出哪些字段与查询与突出显示组件相匹配。

我最终得到以下解决方案，但它迫使我扩展 Solr：

1.  编写一个 QParser 来识别需要字段，将它们添加到 fl-param
2.  在将结果返回给客户端之前执行突出显示查询
3.  遍历结果中的所有文档并将与每个文档的查询匹配的字段添加到结果列表中

我希望我把我的问题说清楚了。非常感谢任何可以将其存档的好方法的建议。

问候勒内

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:31:50.073

如果有人需要类似的东西;-)

我现在设法通过以下方式建立我的自定义结果列表：

创建一个自定义查询组件（扩展标准查询组件）来存储查询中使用的字段。在准备方法中使用存储的字段激活突出显示：

```
// Making params modifieable
ModifiableSolrParams modifiableParams = new ModifiableSolrParams(params);
req.setParams(modifiableParams);
modifiableParams.set(HighlightParams.FIELDS, queryFieldList);
modifiableParams.set(HighlightParams.HIGHLIGHT, "true");
modifiableParams.set(HighlightParams.FIELD_MATCH, "true");
modifiableParams.set(HighlightParams.SIMPLE_PRE, "");
modifiableParams.set(HighlightParams.SIMPLE_POST, ""); 
```

创建一个自定义 HighlightComponent（扩展标准 HighlightComponent）以根据标准构建结果。结果。在过程方法中，我现在获取突出显示信息并提取我需要的信息：

```
NamedList<Object> rspValues = rb.rsp.getValues();
NamedList<Object> nlHl = (NamedList<Object>) rspValues.get("highlighting");
this.hlDocsAndFields = extractHighlightingInfo(nlHl); 
```

为此，我创建了一个自定义列表，它能够计算每个合同的匹配数（突出显示的结果中有多少合同_X_s 字段）。

这工作正常。

我现在停留在响应作者身上，他在构建响应时自己解析文档字段:-(

有人对更改/自定义响应作者有什么建议吗？

问候勒内

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:16:34.833

我现在管理了整个事情。

我根本不能更改响应作者:-)

我只需要存储我为每个文档解析的所有字段并将它们添加到响应中：

```
rb.rsp.setReturnFields(globalResultFields); 
```

问候勒内******

# javascript - 如何测试 ember-data 已提交到服务器？

> ID：11743154
> 
> 赞同：0
> 
> 时间：2012-07-31T15:06:19.230
> 
> 标签：javascript, ember.js, jasmine

我有一个模型可以通过 ember-data rest 适配器保存到我的服务器。

如何通过存根或模拟 ember-data 的提交功能来测试数据是否正确发送并返回到服务器，而无需重新测试 ember-data 已经测试过的内容？

最好是茉莉花！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:42:57.523

在单元测试中，您永远不应该使用真正的客户端服务器通信。通常你会模拟浏览器的 XMLHttpRequest 实现。

有很多工具，比如[jasmine-fake-ajax](https://github.com/mileskin/jasmine-fake-ajax)或[sinonjs](http://sinonjs.org/docs/#server)。两者都覆盖浏览器的 XHR 实现并模拟服务器。因此，您可以设置路线以及应该返回的内容。两者都可以非常精细地调整，因此您可以检查是否为类型、内容类型或设置 http 响应代码。

```
{
    setUp: function () {
        this.xhr = sinon.useFakeXMLHttpRequest();
        var requests = this.requests = [];

        this.xhr.onCreate = function (xhr) {
            requests.push(xhr);
        };
    },

    tearDown: function () {
        this.xhr.restore();
    },

    "test should fetch comments from server" : function () {
        var callback = sinon.spy();
        myLib.getCommentsFor("/some/article", callback);
        assertEquals(1, this.requests.length);

        this.requests[0].respond(200, { "Content-Type": "application/json" },
                                 '[{ "id": 12, "comment": "Hey there" }]');
        assert(callback.calledWith([{ id: 12, comment: "Hey there" }]));
    }
} 
```

# python - Python / Django - 调用函数的日志名称

> ID：11743159
> 
> 赞同：1
> 
> 时间：2012-07-31T15:06:23.813
> 
> 标签：python, django, logging

我有一个带有两个管理命令的 django 应用程序，它们都调用一个公共库。让我们称它们为sync_a 和sync_b。我希望日志条目记录调用函数（或模块），以便我知道日志消息是来自 sync_a 还是 sync_b

```
# sync_a.py
from utils.some_module import some_function
import logging
logger = logging.getLogger(__name__)

class Command(BaseCommand):
    some_function('a')

# sync_b.py
from utils.some_module import some_function
import logging
logger = logging.getLogger(__name__)

class Command(BaseCommand):
    some_function('a')

# some_module.py
def some_function(param):
    logger.info("running") 
```

我在 settings.py 中的日志记录设置是：

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'formatters': {
        'semi_verbose': {
            'format': '[%(levelname)s] %(module)s %(name)s %(funcName)s(): %(message)s'
        },
    },
    'handlers': {
        'console':{
            'level':'DEBUG',
            'class':'logging.StreamHandler',
            'formatter': 'semi_verbose'
        }
    },
    'loggers': {
        'app': {
            'handlers': ['console'],
            'level': 'debug',
            'propagate': True
        }
    }
} 
```

我看到的日志消息格式如下：

```
[INFO] utils.some_module some_function(): running 
```

我希望它们包含sync_a 或sync_b。

我不确定我正在尝试做的事情是否不寻常，或者我是否错误地配置了一些东西。我知道我可以自定义 log.info() 行以使用参数或使用检查，但我试图找到一个不需要这样做的解决方案，因为我有几个管理命令和库喜欢它的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:58:51.023

我查看了 Python 日志记录[文档](http://docs.python.org/library/logging.html)，它看起来不像[`LogRecord`](http://docs.python.org/library/logging.html#logrecord-objects)捕获您正在寻找的信息。

如果我要这样做，我想我会编写一个[`Formatter`](http://docs.python.org/library/logging.html#logging.Formatter)可以查找并将调用堆栈信息添加到日志调用的自定义。[检查](http://docs.python.org/library/inspect.html)模块的堆栈[功能](http://docs.python.org/library/inspect.html#inspect-stack)可能是最好的方法。

# c# - 如何编码和解码 base64 字符串？

> ID：11743160
> 
> 赞同：1153
> 
> 时间：2012-07-31T15:06:24.827
> 
> 标签：c#, base64

1.  如何在给定字符串的情况下返回 base64 编码的字符串？

2.  如何将 base64 编码的字符串解码为字符串？

* * *

## 回答 #1

> 赞同：2085
> 
> 时间：2012-07-31T15:06:24.827

### 编码

```
public static string Base64Encode(string plainText) {
  var plainTextBytes = System.Text.Encoding.UTF8.GetBytes(plainText);
  return System.Convert.ToBase64String(plainTextBytes);
} 
```

### 解码

```
public static string Base64Decode(string base64EncodedData) {
  var base64EncodedBytes = System.Convert.FromBase64String(base64EncodedData);
  return System.Text.Encoding.UTF8.GetString(base64EncodedBytes);
} 
```

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2020-08-03T23:13:15.547

一个班轮代码：

注意：使用`System`和`System.Text`指令。

**编码：**

```
string encodedStr = Convert.ToBase64String(Encoding.UTF8.GetBytes("inputStr")); 
```

**解码：**

```
string inputStr = Encoding.UTF8.GetString(Convert.FromBase64String(encodedStr)); 
```

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2016-03-17T20:46:33.613

我正在与一些简洁的功能分享我的实现：

*   使用 Encoding 类的扩展方法。基本原理是有人可能需要支持不同类型的编码（不仅仅是 UTF8）。
*   另一个改进是优雅地失败，空条目的结果为空 - 它在现实生活场景中非常有用，并支持 X=decode(encode(X)) 的等价性。

备注：请记住，要使用扩展方法，您**必须**`using`（！）使用关键字（在这种情况下）导入命名空间`using MyApplication.Helpers.Encoding`。

**代码：**

```
namespace MyApplication.Helpers.Encoding
{
    public static class EncodingForBase64
    {
        public static string EncodeBase64(this System.Text.Encoding encoding, string text)
        {
            if (text == null)
            {
                return null;
            }

            byte[] textAsBytes = encoding.GetBytes(text);
            return System.Convert.ToBase64String(textAsBytes);
        }

        public static string DecodeBase64(this System.Text.Encoding encoding, string encodedText)
        {
            if (encodedText == null)
            {
                return null;
            }

            byte[] textAsBytes = System.Convert.FromBase64String(encodedText);
            return encoding.GetString(textAsBytes);
        }
    }
} 
```

**使用示例：**

```
using MyApplication.Helpers.Encoding; // !!!

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Test1();
            Test2();
        }

        static void Test1()
        {
            string textEncoded = System.Text.Encoding.UTF8.EncodeBase64("test1...");
            System.Diagnostics.Debug.Assert(textEncoded == "dGVzdDEuLi4=");

            string textDecoded = System.Text.Encoding.UTF8.DecodeBase64(textEncoded);
            System.Diagnostics.Debug.Assert(textDecoded == "test1...");
        }

        static void Test2()
        {
            string textEncoded = System.Text.Encoding.UTF8.EncodeBase64(null);
            System.Diagnostics.Debug.Assert(textEncoded == null);

            string textDecoded = System.Text.Encoding.UTF8.DecodeBase64(textEncoded);
            System.Diagnostics.Debug.Assert(textDecoded == null);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2018-03-06T13:25:45.310

根据 Andrew Fox 和 Cebe 的回答，我将其转为字符串扩展，而不是 Base64String 扩展。

```
public static class StringExtensions
{
    public static string ToBase64(this string text)
    {
        return ToBase64(text, Encoding.UTF8);
    }

    public static string ToBase64(this string text, Encoding encoding)
    {
        if (string.IsNullOrEmpty(text))
        {
            return text;
        }

        byte[] textAsBytes = encoding.GetBytes(text);
        return Convert.ToBase64String(textAsBytes);
    }

    public static bool TryParseBase64(this string text, out string decodedText)
    {
        return TryParseBase64(text, Encoding.UTF8, out decodedText);
    }

    public static bool TryParseBase64(this string text, Encoding encoding, out string decodedText)
    {
        if (string.IsNullOrEmpty(text))
        {
            decodedText = text;
            return false;
        }

        try
        {
            byte[] textAsBytes = Convert.FromBase64String(text);
            decodedText = encoding.GetString(textAsBytes);
            return true;
        }
        catch (Exception)
        {
            decodedText = null;
            return false;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2016-04-13T08:05:15.853

与 andrew.fox 答案略有不同，因为要解码的字符串可能不是正确的 base64 编码字符串：

```
using System;

namespace Service.Support
{
    public static class Base64
    {
        public static string ToBase64(this System.Text.Encoding encoding, string text)
        {
            if (text == null)
            {
                return null;
            }

            byte[] textAsBytes = encoding.GetBytes(text);
            return Convert.ToBase64String(textAsBytes);
        }

        public static bool TryParseBase64(this System.Text.Encoding encoding, string encodedText, out string decodedText)
        {
            if (encodedText == null)
            {
                decodedText = null;
                return false;
            }

            try
            {
                byte[] textAsBytes = Convert.FromBase64String(encodedText);
                decodedText = encoding.GetString(textAsBytes);
                return true;
            }
            catch (Exception)
            {
                decodedText = null;
                return false;   
            }
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2019-07-31T14:40:50.777

您可以使用以下例程将字符串转换为 base64 格式

```
public static string ToBase64(string s)
{
    byte[] buffer = System.Text.Encoding.Unicode.GetBytes(s);
    return System.Convert.ToBase64String(buffer);
} 
```

您也可以使用非常好的在线工具[OnlineUtility.in](http://www.onlineutility.in/base64_Encode)以 base64 格式编码字符串

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2020-03-18T11:27:54.860

URL 安全 Base64 编码/解码

```
public static class Base64Url
{
    public static string Encode(string text)
    {
        return Convert.ToBase64String(Encoding.UTF8.GetBytes(text)).TrimEnd('=').Replace('+', '-')
            .Replace('/', '_');
    }

    public static string Decode(string text)
    {
        text = text.Replace('_', '/').Replace('-', '+');
        switch (text.Length % 4)
        {
            case 2:
                text += "==";
                break;
            case 3:
                text += "=";
                break;
        }
        return Encoding.UTF8.GetString(Convert.FromBase64String(text));
    }
} 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2019-05-29T05:01:22.793

```
 using System;
    using System.Text;

    public static class Base64Conversions
    {
        public static string EncodeBase64(this string text, Encoding encoding = null)
        { 
            if (text == null) return null;

            encoding = encoding ?? Encoding.UTF8;
            var bytes = encoding.GetBytes(text);
            return Convert.ToBase64String(bytes);
        }

        public static string DecodeBase64(this string encodedText, Encoding encoding = null)
        {
            if (encodedText == null) return null;

            encoding = encoding ?? Encoding.UTF8;
            var bytes = Convert.FromBase64String(encodedText);
            return encoding.GetString(bytes);
        }
    } 
```

用法

```
 var text = "Sample Text";
    var base64 = text.EncodeBase64();
    base64 = text.EncodeBase64(Encoding.UTF8); //or with Encoding 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2019-09-22T04:02:06.450

您可以像这样显示它：

```
var strOriginal = richTextBox1.Text;

byte[] byt = System.Text.Encoding.ASCII.GetBytes(strOriginal);

// convert the byte array to a Base64 string
string strModified = Convert.ToBase64String(byt);

richTextBox1.Text = "" + strModified; 
```

现在，将其转换回来。

```
var base64EncodedBytes = System.Convert.FromBase64String(richTextBox1.Text);

richTextBox1.Text = "" + System.Text.Encoding.ASCII.GetString(base64EncodedBytes);
MessageBox.Show("Done Converting! (ASCII from base64)"); 
```

我希望这有帮助！

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2021-06-24T06:55:56.717

```
// Encoding
string passw = "tes123";
var plainTextBytes = System.Text.Encoding.UTF8.GetBytes(passw);
string pass = System.Convert.ToBase64String(plainTextBytes);

// Normal
var encodedTextBytes = Convert.FromBase64String(pass);
string plainText = Encoding.UTF8.GetString(encodedTextBytes); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-06-22T00:19:44.593

对于那些只想编码/解码单个 base64 数字的人：

```
public static int DecodeBase64Digit(char digit, string digit62 = "+-.~", string digit63 = "/_,")
{
    if (digit >= 'A' && digit <= 'Z') return digit - 'A';
    if (digit >= 'a' && digit <= 'z') return digit + (26 - 'a');
    if (digit >= '0' && digit <= '9') return digit + (52 - '0');
    if (digit62.IndexOf(digit) > -1)  return 62;
    if (digit63.IndexOf(digit) > -1)  return 63;
    return -1;
}

public static char EncodeBase64Digit(int digit, char digit62 = '+', char digit63 = '/')
{
    digit &= 63;
    if (digit < 52)
        return (char)(digit < 26 ? digit + 'A' : digit + ('a' - 26));
    else if (digit < 62)
        return (char)(digit + ('0' - 52));
    else
        return digit == 62 ? digit62 : digit63;
} 
```

Base64有[多种版本](https://en.wikipedia.org/wiki/Base64)，对于数字 62 和 63 的用途存在分歧，因此`DecodeBase64Digit`可以容忍其中的几种。

# c# - 字符串格式：来自 String.Format 的比例和精度

> ID：11743161
> 
> 赞同：7
> 
> 时间：2012-07-31T15:06:26.207
> 
> 标签：c#, .net, string, format

我需要格式化数字（使用 WPF 转换器），我能做到的唯一方法是通过 string.Format。

我有两个格式化参数：*比例和精度。* 我可以分别实现我所需要的，但它不能同时用于两者：

**示例（有效）：**

```
string.Format("{0:#,##0,,}", 1234567890.123m) == "1,235"
string.Format("{0:#,#.000}", 1234567890.123m) == "1,234,567,890.123" 
```

**我需要的：**

```
string.Format("????", 1234567890.123m) == "1,234.568" 
```

（这意味着 1,234.568 百万）如您所见，我找不到既可以缩放又可以显示小数的格式模式。

任何的想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T15:37:00.887

我的一位同事得到了解决方案：

```
string.Format("{0:#,##0,,.000}", 1234567890.123m) == "1,234.568" 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-31T15:09:06.243

我认为字符串格式不会为您做到这一点。你将不得不自己划分它。

# php - 如果没有结果，则选择 COUNT (*) 失败

> ID：11743163
> 
> 赞同：0
> 
> 时间：2012-07-31T15:06:26.653
> 
> 标签：php, mysql

> **可能重复：**
> [警告：mysql_fetch_* 期望参数 1 是资源，布尔给定错误](https://stackoverflow.com/questions/11674312/warning-mysql-fetch-expects-parameter-1-to-be-resource-boolean-given-error)

我正在尝试做一个简单的查询（如下）以查看表中是否找不到任何行。如果没有，那就做点什么。

```
$content_status_sql = "SELECT COUNT (*) as count FROM AT_vbc_content_status WHERE member_id= '".$_SESSION['member_id']."'";
$content_status = mysql_fetch_assoc(mysql_query($content_status_sql)) or die(mysql_error());

if ($content_status['count'] == 0){
// Do some stuff 
```

但是，我不断收到此错误...

> 警告：mysql_fetch_assoc()：提供的参数不是第 247 行 [path to my script] 中的有效 MySQL 结果资源
> 
> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '*) 附近使用的正确语法，作为 count FROM [name of my table] WHERE member_id= '16'' at line 1

我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:10:21.207

您必须删除**COUNT**和**(**

```
COUNT(*) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T15:10:01.773

删除 COUNT 和括号之间的空格，如下所示： COUNT(*)

有关说明，请参阅下面链接中的 MySQL 文档

[http://dev.mysql.com/doc/refman/5.1/en/function-resolution.html](http://dev.mysql.com/doc/refman/5.1/en/function-resolution.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:10:04.517

MySql 函数是`COUNT(field_name)`and 之间不能有空格，所以去掉 and 之间多余`COUNT`的空格`(*)``COUNT``(*)`

```
$content_status_sql = "SELECT COUNT(*) as count FROM AT_vbc_content_status WHERE member_id= '".$_SESSION['member_id']."'"; 
```

# imap - 当我有很多帐户时如何向 IMAP 服务器查询新邮件

> ID：11743165
> 
> 赞同：1
> 
> 时间：2012-07-31T15:06:32.017
> 
> 标签：imap

现在，我想编写一个程序（守护程序）来查询 IMAP 服务器是否有新邮件，并在新邮件到达时通知客户端。而且我有数千个电子邮件帐户，所以我想知道如何高效轻松地完成这项工作。

据我了解，我知道两种可能的解决方案。

*   一个一个地查询邮箱账号，就是'poll'风格
*   使用 IMAP 空闲扩展和事件驱动 I/O (epoll)[参考](http://www.quora.com/Cue-formerly-Greplin/How-does-Greplin-query-Google-Mail-for-new-mails)

我想知道这两种解决方案的优缺点。

我也想知道是否有任何库（C、C++、PHP、Python）可以帮助我做这样的事情。或者我怎么能自己做到这一点。

还是第三种解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:01:38.097

IMAP IDLE 的优点是减少了开销并（可能）提高了响应能力。

轮询的优点是所有服务器都支持它，而并非所有服务器都支持 IDLE。

至于库，@Max 指出了 Python 中的 imaplib 和 imaplib2。我确定您提到的其他语言也有类似的库。

至于第三个选项，而不是 IMAP 库，您可能会考虑使用[context.io](http://context.io)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:12:26.207

*如果它是您的*imap 服务器，可能还有第三个选项。在这种情况下，您可以绕过协议本身并监视服务器数据库本身的更改。那会更有效，因为它省略了整个通信层。

# ruby-on-rails - has_many 通过自定义类型的多态

> ID：11743168
> 
> 赞同：1
> 
> 时间：2012-07-31T15:06:42.783
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有 2 个应用程序，一个用作 API 并具有只读访问权限，另一个是主应用程序。在主应用程序中，我有很多通过多态的关系。主应用程序中的模型看起来像这样，它们工作得很好：

```
class Category < ActiveRecord::Base
  has_many :category_associations
  has_many :posts, through: :category_associations
  has_many :pages, through: :category_associations
end

class Post < ActiveRecord::Base
  has_many :category_associations, as: :associated
  has_many :categories, as: associated, through: :category_associations, source: :post
end

class Page < ActiveRecord::Base
  has_many :category_associations, as: :associated
  has_many :categories, as: associated, through: :category_associations, source: :post
end

class CategoryAssociation
  belongs_to :category
  belongs_to :associated, polymorphic: true
end 
```

现在对于第二个应用程序，我将需要访问相同的表，但我的类名会不同，这会影响我似乎无法覆盖的类型字段，即使使用 source_type。：

```
class Category < ActiveRecord::Base
  has_many :category_associations
  has_many :articles, through: :category_associations
  has_many :static_contents, through: :category_associations
end

class Article < ActiveRecord::Base
  self.table_name = 'posts'

  has_many :category_associations, as: :associated
  has_many :categories, as: associated, through: :category_associations, source: :article, source_type: 'Post'
end

class StaticContent < ActiveRecord::Base
  self.table_name = 'pages'

  has_many :category_associations, as: :associated
  has_many :categories, as: associated, through: :category_associations, source: :static_content, source_type: 'Page'
end

class CategoryAssociation
  belongs_to :category
  belongs_to :associated, polymorphic: true
end 
```

我收到以下错误：

```
=> Posts.first.categories

# ActiveRecord::HasManyThroughAssociationPointlessSourceTypeError: Cannot have a has_many :through association 'Post#categories' with a :source_type option if the 'CategoryAssociation#category' is not polymorphic. Try removing :source_type on your association. 
```

似乎当我从类别中获取帖子时

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-01T02:13:53.170

你试过把`polymorphic:true`这个类别`belongs_to`吗？似乎这是错误消息点所指向的方向，尽管我不确定

```
class CategoryAssociation
  belongs_to :category, polymorphic: true
  ...
end 
```

# ruby-on-rails - rails content_for 未显示

> ID：11743170
> 
> 赞同：0
> 
> 时间：2012-07-31T15:06:46.000
> 
> 标签：ruby-on-rails, partial, content-for

我在 customers/new 中有一个 :sidebar 部分，我愿意。content_for 部分是从嵌套的部分调用的。文本“hello1”出现，但“hello2”没有出现。

没有错误被抛出，我不知道如何排除故障。

有任何想法吗？

```
**layouts/application.haml**

.container
  - unless signed_in?
   = render "custom/account_#{current_account.id}" rescue nil
  = yield

**customers/new.haml**

= yield :sidebar

**custom/_account_2.haml**

%p hello1
- content_for :sidebar do
 %p hello2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:36:22.060

我相当肯定`new.haml`会先渲染，然后是部分渲染，最后是布局。`new.haml`首先渲染是你的问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-01T01:37:42.093

```
- content_for :sidebar do 
```

改成

```
= content_for :sidebar do 
```

# .net - 使用 C#.net 操作 excel

> ID：11743175
> 
> 赞同：0
> 
> 时间：2012-07-31T15:06:58.383
> 
> 标签：.net, excel, c#-4.0

我想问哪个是从 C# 操作 excel 表的最佳库。我将使用 excel 工作表对工作表进行排序，使用公式 =EXACT()，通过使用下移单元格选项插入几列。将数据从数据库复制到excel。

我想知道哪个库可以提供更多的独立性来玩 excel

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:17:55.447

你试过`Microsoft.Office.Interop.Excel`吗？我相信这暴露了您从使用 VBA ( `ActiveSheet`, `Cells`, `Range`, 等)中获得的所有功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T22:22:48.673

[试试](http://closedxml.codeplex.com)ClosedXML 。它处理排序、插入、删除，以及更多。这是[排序数据](http://closedxml.codeplex.com/wikipage?title=Sorting%20Data&referringTitle=Documentation)文档。

# magento - Magento：如何仅使用电子邮件和密码创建帐户

> ID：11743176
> 
> 赞同：1
> 
> 时间：2012-07-31T15:06:58.687
> 
> 标签：magento, registration, magento-1.7

我正在使用 Magento 1.7。

我想简化创建帐户（注册新用户）以显示并只需要电子邮件和密码。

用户在购买时只需填写其他信息（如姓名、地址等）。

背后的想法是每个用户都需要提供电子邮件地址才能查看网站内容。

我已经在使用[此扩展程序](http://www.magentocommerce.com/magento-connect/wabism-members-only-7590.html)以使该站点仅对登录用户可用。我需要一种方法来简化注册过程，只包括电子邮件和密码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-09T05:15:49.327

您可以从 Magento Connect 尝试此扩展 -[快速注册](http://www.magentocommerce.com/magento-connect/catalog/product/view/id/19173/s/fast-registration-6987/)它只允许客户使用电子邮件和密码进行注册

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:19:32.047

`app/design/frontend/default/{yourtheme}/template/customer/form/register.phtml`

并注释掉不需要的字段。

这就是你想要的，对吧？

# javascript - jQuery - 获取单元格值并使用结果更新单元格值

> ID：11743177
> 
> 赞同：-2
> 
> 时间：2012-07-31T15:07:00.403
> 
> 标签：javascript, jquery

我正在研究一个简单的 jQuery 函数，该函数将从表中的 2 个单元格中获取一些输入字段的值，然后执行一些简单的数学运算来计算差异，然后用差异更新另一个单元格值。

这是我的功能：

```
$(document).ready(function(){

    $('#Calculate').click(function(){

    var nextYearTotal = $("#textfield6").text();
    var lastYearTotal = $("#textfield1").text();

    nextYearTotal = Number(nextYearTotal);
    lastYearTotal = Number(lastYearTotal);

    var updatedTotal = nextYearTotal - lastYearTotal;

    $('#textfield7').html(updatedTotal);
    });
}); 
```

无论 textfield6 和 textfield1 输入字段中的值是什么，我都会在 textfield7 单元格中得到“0”作为结果。

我是 jQuery 新手 - 如果有人能指出我的错误，我将不胜感激。当我单击表格行中的按钮时，将调用此函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:15:10.847

使用值而不是文本。

```
var nextYearTotal = Number($("#textfield6").val());
var lastYearTotal = Number($("#textfield1").val()); 
```

查看工作[**演示**](http://jsfiddle.net/dezzS/)

```
$(document).ready(function() {
    $('#Calculate').click(function() {
        var nextYearTotal = Number($("#textfield6").val());
        var lastYearTotal = Number($("#textfield1").val());

        var updatedTotal = nextYearTotal - lastYearTotal;

        $('#textfield7').html(updatedTotal);
    });
});​ 
```

**编辑**
对原始帖子的评论澄清了源字段是输入，但目标字段只是一个单元格。

根据评论，我更新了演示和代码以确保完整性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:10:15.687

尝试这个：

```
$(document).ready(function(){

    $('#Calculate').click(function(){

    var nextYearTotal = parseFloat($("#textfield6").text());
    var lastYearTotal = parseFloat($("#textfield1").text());

    var updatedTotal = nextYearTotal - lastYearTotal;
    if (!(isNaN(updatedTotal)))
         $('#textfield7').html(updatedTotal);
    });
}); 
```

应该工作假设你有 3`<td>`的 ID 的`"textfield1"`,`"textfield6"`和`"textfield7"`一个按钮或链接`id="Calculate"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:17:12.250

```
$(document).ready(function(){

$('#Calculate').click(function(){

var nextYearTotal = $("#textfield6").val();
var lastYearTotal = $("#textfield1").val();

nextYearTotal = Number(nextYearTotal);
lastYearTotal = Number(lastYearTotal);

var updatedTotal = nextYearTotal - lastYearTotal;

$('#textfield7').html(updatedTotal);
});
}); 
```

# bash - 为什么在 Windows7 MSYS 下安装 bash-it 时出现 mkdir 错误

> ID：11743181
> 
> 赞同：-1
> 
> 时间：2012-07-31T15:07:17.867
> 
> 标签：bash, windows-7, mingw, msys, bash-it

我克隆了 repo [https://github.com/revans/bash-it.git](https://github.com/revans/bash-it.git)并在 linux 下成功安装了它，但是当我尝试在 Windows7 MSYS 下安装它时遇到了麻烦。

在 install.sh 中：

```
function load_all() {
  file_type=$1
  [ ! -d "$BASH_IT/$file_type/enabled" ] && mkdir "$BASH_IT/${file_type}/enabled"
  ln -s $BASH_IT/${file_type}/[^_]available/* "${BASH_IT}/${file_type}/enabled"
  } 
```

它返回一些像这样的错误

```
Would you like to enable all, some, or no aliases? Some of these may make bash s
lower to start up (especially completion). (all/some/none) all
mkdir: cannot create directory `/c/Users/Dan/.bash_it/aliases/enabled': No such
file or directory 
```

看起来路径是正确的并被引用，我以管理员身份运行 cmd 然后运行 ​​msys.bat，还有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:12:56.110

严格来说，它似乎`mkdir`失败了，因为“/c/Users/Dan/.bash_it/aliases”不存在。

对MingW一无所知，是否`BASH_IT`应该改为“c：/Users/Dan/.bash_it”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:09:44.517

我通过将“mkdir”更改为“mkdir -p”来修复它

# wordpress - 用于编辑角色名称、角色标签名称的 WP 功能

> ID：11743182
> 
> 赞同：0
> 
> 时间：2012-07-31T15:07:23.543
> 
> 标签：wordpress, roles

我曾经致力于编辑角色名称和标签名称的功能，但无法编辑角色标签名称

```
function change_role_name($role_name, $new_role_name, $display_name) {
    global $wp_roles;

    if ( ! isset( $wp_roles ) )
        $wp_roles = new WP_Roles();

    $role =& get_role($role_name);

    $wp_roles->roles[$role]['name'] = $new_role_name; //not working for editing role label name
    $wp_roles->role_names[$role] = $display_name;           
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-01T02:35:13.090

You could remove the old role and add a new one with the same capabilities. Though, this saves directly to the database instead of on the fly, so be careful.

```
function change_role_name( $old, $new, $new_display ) {
    $old_role = get_role( $old );
    $new_caps = $old_role->capabilities;

    remove_role( $old );
    add_role( $new, $new_display, $new_caps );
} 
```

# android - Android 通知 - 如何在不召回活动的情况下将活动置于前面

> ID：11743184
> 
> 赞同：0
> 
> 时间：2012-07-31T15:07:26.363
> 
> 标签：android, android-activity, android-notification-bar

在我的应用程序中，在一个活动（AndroidNotification.java）中，我正在执行以下操作：

1）当用户按下主页按钮时，我会显示一条通知。

2）当用户单击通知时，我会显示带有活动的应用程序 - AndroidNotification.java

3）当我的应用程序出现时，我关闭通知栏上的通知（即在 onResume 方法中）

下面的代码工作，但问题是通知再次调用活动（AndroidNotification.java）

我的问题是我不想重新启动活动，通知应该带来

活动从后台到前台，它不应该调用重新启动。

当前行为的结果是再次调用活动，以便再次使用整个功能。那就是问题所在 。

我的代码：

```
private NotificationManager mNotificationManager;
Notification notifyDetails;
......
mNotificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        notifyDetails = new Notification(R.drawable.ic_launcher,
            "Notification, Click Me!", System.currentTimeMillis());

    Context context = AndroidNotification.this;
    CharSequence contentTitle = "Notification Test";
    CharSequence contentText = "Get back to Application on clicking me.";

    Intent notifyIntent = new Intent(context, AndroidNotification.class);
    notifyIntent.setFlags(Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT );

    PendingIntent intent = PendingIntent.getActivity(
            AndroidNotification.this, 0, notifyIntent,0);

    // Set properties to notify object - its title, text
    notifyDetails.setLatestEventInfo(context, contentTitle,contentText, intent);

    // Notify user in status bar
    mNotificationManager.notify(SIMPLE_NOTFICATION_ID, notifyDetails); 
```

是否需要为 AndroidManifest.xml 中的特定活动添加任何内容

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:46:28.563

我已经通过在创建方法中添加以下内容来解决

```
if ((getIntent().getFlags() & Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT) != 0) { 
    // Activity was brought to front and not created, 
    // Thus finishing this will get us to the last viewed activity 
    finish(); 
    return; 
} 
```

# sql - 右对齐左零填充oracle？

> ID：11743186
> 
> 赞同：2
> 
> 时间：2012-07-31T15:07:28.540
> 
> 标签：sql, oracle

```
SELECT RIGHT('000000' + CAST([ID] as SYSNAME), 8) ID 
  FROM Table1 
```

上面的查询使列右对齐并在 sql server 中填充左零。有人可以让我知道 Oracle DB 中的等价物吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T15:11:00.803

`SELECT LPAD(ID,8,'0') FROM Table1`可能对你有用。

看看[这个](http://www.techonthenet.com/oracle/functions/lpad.php)lpad 的用法

# visual-studio - 单源/多项目模板

> ID：11743189
> 
> 赞同：1
> 
> 时间：2012-07-31T15:07:35.280
> 
> 标签：visual-studio, visual-studio-2008, project-template, visual-studio-templates

我想为 Visual Studio 2008 创建一个多项目模板，其中包含访问相同源文件的两个项目（移动和桌面开发的单一源）。以下多项目模板：

```
<TemplateContent>
    <ProjectCollection>
        <ProjectTemplateLink ProjectName="Client.CF">Client\Template.CF.vstemplate</ProjectTemplateLink>
        <ProjectTemplateLink ProjectName="Client.FF">Client\Template.FF.vstemplate</ProjectTemplateLink>
        <!-- some other projects -->
    </ProjectCollection>
</TemplateContent> 
```

将创建这个结构：

```
Solution folder
  - Client.CF
    - Client.CF.csproj
    - Other project files
  - Client.FF
    - Client.FF.csproj
    - Other project files 
```

对于单一来源，需要以下结构：

```
Solution folder
  - Client
    - Client.CF.csproj
    - Client.FF.csproj
    - Other project files 
```

在使用了模板 XML 之后，我怀疑是否可以创建这样的模板。有没有人已经做到了这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:36:31.210

由OP编辑...

# 不要这样做 - 它不起作用。

字幕：

## 我可以让我的一周回来吗？

为什么？嗯，项目中的许多文件都相互关联。盲目地链接到它们的通配符会将它们包含在构建中，但关系将会丢失。

即使忽略这个基本缺陷，包含和排除文件的可能性范围也是......嗯，很多。在项目开始之前，不要在项目中建立脆弱性和技术债务。

在单个项目中使用多个构建配置是更好的解决方案（双关语）。有关我正在谈论的事情，请参阅[https://stackoverflow.com/a/4457508/492 。](https://stackoverflow.com/a/4457508/492)

我会在这里留下这个**错误**的答案，以防万一它让你走上死胡同，或者至少提高你对这个问题的认识。嘿，把它当作练习吧。嘿，至少我在学习。有时。

顺便说一句，通配符链接诸如扩展方法等常用实用程序类之类的东西可能是一件好事。请注意其影响。

.
.

*原来的故事……*

我这样做只是为了构建同一个应用程序的 6 个（是的 - 六个）版本。AutoCAD - 他们喜欢每 3 年打破一次 API。不要让我开始。我也在为其他兼容的应用程序构建，所以 AutoCAD 只有 3 个版本。我跑题了。

这是我的做法。`zSourceCode`我有一个名为源代码的额外项目。呃。我也有`AssemblyInfoForAllProjects.cs`文件。每个项目还有一个带有属性`AssemblyTitle`&的附加 AssemblyInfo.cs 项目`AssemblyDescription`，只是因为我想在名称和描述中标识构建版本。

像这样链接到`zSourceCode`项目文件的其他项目......

`<Compile Include="..\zSourceCode\**\*.*" Exclude="..\zSourceCode\Properties\AssemblyInfo.cs;..\zSourceCode\bin\**\*.*;..\zSourceCode\obj\**\*.*;..\zSourceCode\**\*.csproj;..\zSourceCode\**\*.user;..\zSourceCode\**\*.vstemplate;..\zSourceCode\readme.txt;..\zSourceCode\**\*.lsp;..\zSourceCode\**\*.scr;..\zSourceCode\**\*.ico;;..\zSourceCode\**\*.txt"> <Link>Src\%(RecursiveDir)%(Filename)%(Extension)</Link> </Compile>`

忽略我在 readme.txt（带有 *.txt）上翻倍的事实，您可能没有任何 LISP (*.lsp) 或 AutoCAD (*.scr) 的启动脚本，这就是它的要点。

使用此通配符语法，您可以将文件和文件夹添加到源项目，它们将传播到您的所有构建项目。您可以在该项目本身中添加特定于该项目的任何代码。

我添加了扩展方法来修补版本之间的行为变化。这些位于解决方案之外的中心位置，因此我可以在一个地方修补所有与 AutoCAD 相关的东西。这很棘手，因为我想通过绝对路径引用它。让 VS 在编译链接中生成绝对路径的唯一方法是将这些东西放在另一个驱动器上（或将文件夹映射到另一个驱动器号）。

多项目模板的其余部分根据[http://msdn.microsoft.com/en-us/library/ms185308.aspx](http://msdn.microsoft.com/en-us/library/ms185308.aspx)提供，这可能是您从中获得第一块代码的地方。

通过在解决方案和项目之间获得令人惊讶的文件夹层来寻找这个*相当烦人的问题：http:* [//social.msdn.microsoft.com/Forums/en-US/vsx/thread/11d7da1d-40cf-4b5c-ac27 -d7fe504062a8/](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/11d7da1d-40cf-4b5c-ac27-d7fe504062a8/)。您可以通过编写 Iwizard 实现来解决这个问题，但这必须在 GAC 和 blahblahblah 中进行。我只是手动打乱它们并`.sln`在 Notepad++ 中编辑文件。NP++ 对于编辑项目文件也很方便。VS 只是在您更改项目时重新加载项目，除非您破坏它们。我提到源代码控制了吗？

此外，第一次生成解决方案时，您必须将其关闭并重新打开以查看解决方案资源管理器中的链接。

# c# - 如何使用 ASP.NET 修改共享点库文件

> ID：11743191
> 
> 赞同：1
> 
> 时间：2012-07-31T15:07:42.347
> 
> 标签：c#, asp.net, sharepoint

首先，我只是一个菜鸟

我想修改一个 .aspx 模板并复制以在同一个库中创建一个新文件，我用谷歌搜索了它，但没有显示太多

有人可以帮忙吗？链接或代码将非常有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:54:23.363

您应该从 SharePoint Designer 开始，它是 Microsoft 的免费产品。

一部相当不错的介绍电影[http://www.youtube.com/watch?v=tpwEUA9IGdY](http://www.youtube.com/watch?v=tpwEUA9IGdY)，youtube 上还有很多。

资源

*   [http://sharepoint.microsoft.com/en-us/product/related-technologies/pages/sharepoint-designer.aspx](http://sharepoint.microsoft.com/en-us/product/related-technologies/pages/sharepoint-designer.aspx)
*   [http://www.microsoft.com/en-us/download/details.aspx?id=16573](http://www.microsoft.com/en-us/download/details.aspx?id=16573) SharePoint Designer 32 位
*   [http://www.microsoft.com/en-us/download/details.aspx?id=24309](http://www.microsoft.com/en-us/download/details.aspx?id=24309) SharePoint Designer 64 位

# ios - 使用 UISegmentedControl 进行多项选择 - Pages 使用的是什么？

> ID：11743194
> 
> 赞同：8
> 
> 时间：2012-07-31T15:07:45.857
> 
> 标签：ios, objective-c, uisegmentedcontrol

我想制作一个粗体/下划线/斜体工具栏，就像您在 Pages (iPhone/iPad) 上看到的那样。他们使用似乎是 UISegmentedControl 的东西。

但是他们可以同时选择粗体/下划线，这对于当前的 UISegmentedControl 似乎是不可能的。我能找到的最接近的是“瞬间”，它使 UISegmentedControl 像一个按钮数组。

NSSegmentedControl（Mac 版）似乎通过设置 [cell setTrackingMode:NSSegmentSwitchTrackingSelectAny] 具有此功能。它还具有 NSSegmentSwitchTrackingMomentary，类似于 UISegmentedControl（使用 BOOL）。

有没有办法对 UISegmentedControl 进行子类化以添加此功能？有没有好的第三方工具栏控件可以做到这一点？Apple 的 Pages 在做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:57:48.920

我不认为你可以做到这一点`UISegmentedControl`。您可能希望将它们单独创建并为它们`UIButtons`做任何您想做的事情。毕竟，你正在使用像`UIButton`s 这样的行为，所以它应该不会更难。

# c# - 选项卡或 Javascript 的 Ajax 控件？（带有标签内容的 aspx 页面）

> ID：11743202
> 
> 赞同：0
> 
> 时间：2012-07-31T15:08:30.647
> 
> 标签：c#, javascript, asp.net, ajax

我有一个 ASP.NET 网站（c# 作为代码后面），其中我的一个页面具有选项卡式内容。我已经以两种不同的方式完成了它，现在我正在决定哪一种是要走的路。一种方法是，我用 javascript 完成了它。只需根据单击哪个 div 来交换 div，这效果很好（除了一些小的闪烁问题......）。另一方面，我使用了[Ajax Control Toolkit](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/)和 Tabs 控件。我正在查找 Ajax 的好处，但也看到了在 Ajax 中使用选项卡式界面的这些缺点......

*   搜索引擎看不到不在第一个选项卡中的数据，因为它们无法访问 Ajax。
*   不能为选项卡添加书签。所以客户无法保存他们想要的信息。
*   Ajax 不可访问，因此任何使用屏幕阅读器的人，甚至是不支持 JavaScript 的旧版浏览器都看不到其他选项卡中的内容。
*   如果其中一个选项卡包含大量信息，则在慢速连接上加载可能需要很长时间。而且因为 Ajax 没有表明任何事情正在发生，所以看起来页面已经损坏了。

所有这些都正确吗？我不太担心无法通过搜索引擎找到信息，因为无论如何只有网站的用户才能看到内容。

所以主要问题是，每种实施方法的优缺点是什么？Ajax 确实看起来更干净，但性能如何叠加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:19:12.513

回答您的上述观点：

> 搜索引擎看不到不在第一个选项卡中的数据，因为它们无法访问 Ajax。

搜索引擎索引他们在页面上找到的内容。如果数据不存在，他们将不会加载它。但是，如果用于检索 AJAX 结果的 URL 通过普通`<a>`标签作为单独的页面链接，则可以对其进行索引。

> 不能为选项卡添加书签。所以客户无法保存他们想要的信息。

这是真的，即使您使用非 AJAX 解决方案。要为标签添加书签，您必须有效地将页面添加到特定“状态”中。使用[散列片段](http://benalman.com/code/projects/jquery-bbq/examples/fragment-basic/)是实现此目的的好方法。

> Ajax 不可访问，因此任何使用屏幕阅读器的人，甚至是不支持 JavaScript 的旧版浏览器都看不到其他选项卡中的内容。

与通过脚本加载的任何内容一样，如果用户禁用了脚本，他们将无法获得内容。至于浏览器支持，jQuery 和许多其他库将浏览器差异抽象出来，以支持您合理希望支持的任何内容。

> 如果其中一个选项卡包含大量信息，则在慢速连接上加载可能需要很长时间。而且因为 Ajax 没有表明任何事情正在发生，所以看起来页面已经损坏了。

不正确。要加载的数据越多，完成 HTTP 请求所需的时间就越长，是的。但是“AJAX 并不表示任何事情正在发生”是不正确的——它甚至没有意义。AJAX 是一种传输机制。向用户显示“正在发生某事”的责任取决于您，并且可以通过[旋转占位符](http://ajaxload.info/)等轻松实现。

基本上，AJAX 仅通过请求初始 UI 状态所需的数据来将初始页面加载时间降至最低。与任何 HTTP 请求（包括页面加载）一样，后续请求都需要时间，但在我看来，用户体验的提升要好得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T15:20:23.170

> 搜索引擎看不到不在第一个选项卡中的数据，因为它们无法访问 Ajax。

这措辞不好。数据驻留在服务器上，所以是的，在 ajax 请求完成并填充 DOM 之前，客户端无法访问它。第一个选项卡中的数据有多重要？如果它比把它放在页面布局上那么重要。

> 不能为选项卡添加书签。所以客户无法保存他们想要的信息。

不确定书签与保存客户信息有什么关系。好像是两种不同的东西。但...

您可以像 gmail 一样实现自动保存。使用 setTimeout 将 ajax 帖子发回服务器以保存草稿或书签首选项。使用主题标签在单页应用程序中导航页面结构。

> Ajax 不可访问，因此任何使用屏幕阅读器的人，甚至是不支持 JavaScript 的旧版浏览器都看不到其他选项卡中的内容。

同样，您是否希望人们筛选您的网站？jQuery 在使用 $.ajax() 支持旧版浏览器方面做得很好。我用 jQuery Mobile 支持 IE6 和 IE7，我们广泛使用了 $.ajax()。

> 如果其中一个选项卡包含大量信息，则在慢速连接上加载可能需要很长时间。而且因为 Ajax 没有表明任何事情正在发生，所以看起来页面已经损坏了。

您可以为此使用加载条...

```
$.ajaxStart(function() { /* show spinner gif */ } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:42:22.887

如果您正在寻找一种 ajax 感觉，当您单击选项卡时页面不会闪烁，我会使用 jQuery.ajax。您将拥有更多控制权，并且那里有很多支持。

要处理搜索引擎问题，您可以提供一个站点地图，其中包含代表每个选项卡的 url。

祝你好运，汤姆

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# python - 使用 zeromq 分析并行进程

> ID：11743203
> 
> 赞同：1
> 
> 时间：2012-07-31T15:08:35.073
> 
> 标签：python, profiling, multiprocessing, zeromq

我正在尝试分析基于代理的模型。因此，一个中心类指示所有代理（或子集）执行命令，然后等到所有代理都准备好并执行下一个命令的模型......中央实体。代理互动和交易。

问题是当我分析中心实体时，它的时间主要花在等待代理上。如果我对个人代理进行概要分析，则时间主要是花在等待上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:43:32.330

这解释了如何分析单个进程[http://seiferteric.com/?p=277](http://seiferteric.com/?p=277)

# database - Django 模型 - 不区分大小写的查询/过滤

> ID：11743207
> 
> 赞同：254
> 
> 时间：2012-07-31T15:08:40.517
> 
> 标签：database, django, django-models, filtering

如何在 Django 中查询/过滤并忽略我的查询字符串的情况？

我有类似的事情并且喜欢忽略以下情况`my_parameter`：

```
MyClass.objects.filter(name=my_parameter) 
```

* * *

## 回答 #1

> 赞同：494
> 
> 时间：2012-07-31T15:08:40.517

我是这样解决的：

```
MyClass.objects.filter(name__iexact=my_parameter) 
```

甚至还有一种方法可以将其用于子字符串搜索：

```
MyClass.objects.filter(name__icontains=my_parameter) 
```

有一个[文档链接](https://docs.djangoproject.com/en/dev/topics/db/queries/#querysets-are-lazy)。

# xml - 在 Eclipse 和 Maven 中管理 Spring 命名空间模式

> ID：11743214
> 
> 赞同：2
> 
> 时间：2012-07-31T15:08:54.777
> 
> 标签：xml, eclipse, spring, namespaces

我一直在 Eclipse 中设置 Spring 命名空间`schemaLocation`没有问题，但现在我需要在没有网络连接的情况下工作，所以我无法从 springframework.org 查找模式。

我知道当我使用 Maven 引入 Spring 组件时，我得到了我需要的模式和一些映射命名空间处理程序的文件。如何设置 Eclipse 以使用这些文件，以使所需的一切都在项目中？

我知道 Eclipse 中的 XML 目录，但是在我使用的任何工作站上设置它似乎涉及大量手动活动，每次使用新的 Spring 组件或更改版本时都需要完成这些活动。似乎我需要的一切都在 Spring jar 中，那么我如何设置使用这些东西而不是任何外部设置，以便我拥有在 Eclipse 项目本身中工作和构建所需的一切？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T09:54:50.837

基于 Eclipse 的[Spring Tool Suite](http://www.springsource.org/sts)似乎能够解析依赖项所需的模式。仍在检查细节，以为我会快速找到答案以防万一有人需要它。

# c# - Quartz.Net 桌面应用程序实现 / C#

> ID：11743215
> 
> 赞同：1
> 
> 时间：2012-07-31T15:08:56.493
> 
> 标签：c#, .net, quartz.net

我的目标是在 .NET 平台内安排每周一上午 10:00 重复执行的服务（特别是根据 SQL Server 数据库中的数据发送电子邮件）。我发现我可以使用 Quartz.Net 来实现这一点。理想情况下，我想在一个桌面应用程序中实现 Quartz.Net，我可以用它来管理任务（即查看计划任务、更改计划任务的日期/时间、启动/停止计划任务等）。

我的问题是，一旦我启动计划任务（由应用程序中的按钮触发），如果我关闭应用程序，它是否仍会在指定时间运行，还是我必须保持应用程序打开。我搜索了 Google 并找到了将 Quartz.Net 安装为 Windows 服务的方法，但这不是理想的情况，因为我希望桌面应用程序能够处理所有事情，而无需安装它运行的物理计算机任何单独的服务。

使用不同的 .NET 方法来实现这一点的任何其他建议也会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:12:04.403

如果您不关心跨平台兼容性，我会推荐一个围绕 Windows 任务调度服务的包装器，比如[这个](https://github.com/dahall/taskscheduler)。您的应用程序不必保持打开状态，也不需要安装。

希望这可以帮助！

# c# - 如何不触发 comboBox.SelectedIndexChange 并更新它？

> ID：11743216
> 
> 赞同：2
> 
> 时间：2012-07-31T15:08:56.933
> 
> 标签：c#, .net, winforms, events, combobox

我编写了一个代码，每当用户从下拉组合框中选择一个值时，他们的选择就会成为集合的第一项（索引 0）。

例子

前

> [_ 我的组合框 _][v]
> 
> > ```
> >  |Dog
> >      |Tree
> >      |House 
> > ```

*用户点击“树”*

后

> [_ 我的组合框 _][v]
> 
> ```
>  |Tree
>      |Dog
>      |House 
> ```

问题是，在这个操作之后，即使一切正常，comboBox 仍然是空白的，用户不知道他们做了什么。

但是如果我按照每个人的建议去做，那就是`MyComboBox.SelectedIndex = 0;`它会触发一个无限循环，因为我会从事件处理程序 MyComboBox_SelectedIndexChanged(...)

我也尝试过`MyComboBox.Text = string_that_contains_what_I_want_to_display;`，但它同时触发了 SelectedIndexChanged 和 SelectedValueChanged。

坦率地说，我不明白为什么即使从具有相同值的项目切换，索引和值都会被触发。据我了解， SelectedValueChanged 应该只在两个项目具有不同内容时触发。

我会感谢任何能帮助我摆脱这个难题的人。

完成后，我只需要在程序界面中显示排序操作的结果。我可以重新加载包含我的控件的整个页面：它可以工作，但效率不高。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T15:14:51.027

使用`SelectionChangeCommitted`事件而不是`SelectionChange`. 该`SelectionChangeCommitted`事件仅在用户进行更改时触发，而不是在您的程序对其进行更改时触发。

# php - 从 Sphinx 中的多个索引中检索聚合数据

> ID：11743218
> 
> 赞同：1
> 
> 时间：2012-07-31T15:09:00.697
> 
> 标签：php, cakephp, sphinx

最近我一直在玩 Sphinx - 这是一个非常棒的工具。然而，事实证明，正确配置并让它做我想做的事情有点挑战。

假设我的数据库中有三个表：人员、订单、评论；然后我围绕它构建了三个独立的索引。

使用 Sphinx 提供的 PHP API，我能够连接到服务器并执行一个简单的 $Query() 命令，它确实在搜索所有索引。

现在，这是我感到困惑的部分：

结果集为每个索引返回一个数组，然后按其权重排序。因此该数组将具有三个键：

0 [人]、1 [订单] 和 2 [评论]。

我正在寻找的是**一个聚合数组**，其中包含所有按权重排序的索引的结果，这将使我以后更容易对结果进行分页。

我正在使用 CakePHP。我知道社区已经提供了现有的插件等，但它们似乎都无法搜索多个表 - 只有一个模型。

# mysql - MySQL查询将多个表中的媒体与另一个表中的元信息相关联

> ID：11743219
> 
> 赞同：0
> 
> 时间：2012-07-31T15:09:04.237
> 
> 标签：mysql, xml

我正在为一个网站使用关系 MySQL 数据库，人们可以通过上传各种媒体来创建在线故事：音频剪辑、照片、视频等。该站点将提供一个个人空间的登录，人们可以在其中创建、查看和编辑故事。对于这个问题，假设数据库有 4 个表：memorybox（包含有关故事的元信息，即：标题、日期和描述）、音频、照片和视频（后三个将所有媒体都连接到 memorybox 中的一个故事表——单个媒体文件通过具有记忆框 ID 的列链接到故事）。

我正在使用 PHP 选择与故事相关的所有媒体，以及故事的元数据，并导出到 XML 文件。从 XML 中，我将使用 jquery 首先显示故事（某种图标，带有故事标题），然后，当单击故事图标时，故事视图中的所有媒体。

我想要的是将所有媒体文件与一个故事（及其元数据）相关联。我的问题是我无法完全获得所需的 XML 结果，并且不确定问题出在查询还是数据库结构上。我试图选择 IDS 匹配的所有位置，但这为我提供了每个媒体文件的一长串单独条目。我还尝试使用 LEFT JOIN 将所有内容与记忆框 ID 相关联，但我仍然会为一个 ID 获得多个条目。我尝试了 GROUP BY，但这只给了我一行媒体数据。

是否有可以执行此操作的查询，或者我是否需要重新考虑我的数据库结构？

谢谢，谢丽尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:12:04.130

从您的问题来看，您还没有完全了解关系数据库。您是否意识到过程代码和面向对象编程之间的区别？走向 RealtionalDB 是一个类似的步骤。

*始终考虑数据集，即使该集合仅包含一条记录。一个表是一个数据集，一个查询结果是另一个，一个视图是一个，一个连接是一个结合了两个。*

**至于您的问题：** 我知道一个故事由 memorybox 表中的一条记录和任何媒体表中的一条或多条记录组成。

为此，您的表结构非常好。我 想`table memoryboxes(id int, metadata varchar)`，，，， 。 `table fotos(memorybox_id int, thefoto clob)`_ `table audios(memorybox_id int, theaudio club)``table videos(memorybox_id int, thevideo clob)`

要获得“完整故事”，您最好根据 memorybox_id 从所有这些表中进行选择。这意味着 4 个查询（为了整洁而在一个事务中）一个接一个。从这些结果集中构建 xml。

**至于连接：（** 左）连接的行为应该与您描述的完全一样。它基于前提组合数据集（在您的情况下，ids 相等）。即使“右侧”的数据集中没有匹配的记录，左连接也允许生成“左侧”数据集中的记录。想想看；这将为您提供与您的谓词匹配的数据集的所有排列。正是你所描述的。

**至于分组依据：** 分组依据（我猜是 id）将“滚动”一个数据集，并且您会注意到，您需要在分组依据子句中或在分组依据查询中包含列一个所谓的聚合函数（count、min、max、...），这意味着它们要么参与了结果分组（想想表中的复合键），要么它们的最终值将由基础数据集组中的所有数据组成。

**长话短说：**您的数据库结构很好，使用 4 个单独的查询（在一个事务中）来获取数据。

**后续步骤：** 稍后，当您想编写一个列出故事中关联媒体数量的查询时，请尝试阅读更多有关联接和分组依据的信息，例如：

```
select 
    m.metadata, 
    count(f.id) as fotocount, 
    count(a.id) as audiocount, 
    count(v.id) as videocount 
from 
    memoryboxes m 
    left join fotos f on f.memorybox_id=m.id
    left join audios a on a.memorybox_id=m.id
    left join videos v on v.memorybox_id=m.id
group by m.metadata 
```

# java - 简单的安卓 NFC 程序

> ID：11743222
> 
> 赞同：2
> 
> 时间：2012-07-31T15:09:07.583
> 
> 标签：java, android, nfc, nfc-p2p

我正在为 Android API 14（4.0 - Ice Cream Sandwich）开发一个简单的程序来测试 NFC（然后我将在更大的程序中使用它）。该程序有两个 EditText，一个带标签的输入和一个带标签的输出。目标是，当我同时点击两部运行该应用程序的手机时，输入框中输入的文本会出现在另一部手机的输出框中（这应该可以双向使用）。代码运行良好，但是当我将手机点击在一起时没有任何反应。代码如下。

```
package com.sample.nfctest;

import java.sql.Date;

import android.app.Activity;
import android.content.Intent;
import android.nfc.FormatException;
import android.nfc.NdefMessage;
import android.nfc.NdefRecord;
import android.nfc.NfcAdapter;
import android.os.Bundle;
import android.os.Parcelable;
import android.widget.EditText;
import android.widget.Toast;

public class NFCTestActivity extends Activity {

EditText input;
EditText output;
NfcAdapter mAdapter;
NdefMessage msgs[];
NdefRecord msg;
NfcAdapter nfcAdapter;
boolean somethingHappened = false;
double initialTime;
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    input = (EditText) findViewById(R.id.editText1);
    output = (EditText) findViewById(R.id.editText2);
    nfcAdapter = NfcAdapter.getDefaultAdapter(this);
    if (nfcAdapter == null)
    {
        Toast.makeText(this, "No NFC.  Sucks to suck.", Toast.LENGTH_LONG).show();
        System.out.println("No NFC.  Sucks to suck.");
        return;
    }
    initialTime =  new Date(0).getTime();
    while(!somethingHappened)
    {
        if(30000 < new Date(0).getTime() - initialTime)
            somethingHappened = true;
        onResume();
    }
}
public void onResume() 
{
    super.onResume();
    msg = new NdefRecord(NdefRecord.TNF_ABSOLUTE_URI, "text/plain".getBytes(), 
            new byte[0], input.getText().toString().getBytes());
    input.setText("");
    if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())) {
        Intent intent = getIntent();
        Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
        if (rawMsgs != null) {
            somethingHappened = true;
            msgs = new NdefMessage[rawMsgs.length];
            for (int i = 0; i < rawMsgs.length; i++) {
                msgs[i] = (NdefMessage) rawMsgs[i];
                output.append(msgs[i].toString());
            }
        }           
    }
    //process the msgs array
    NdefRecord send[] = {msg};
    try{
        nfcAdapter.setNdefPushMessage(new NdefMessage(send), this);
        somethingHappened = true;
    }catch(Exception e){}
}
} 
```

这是 main.xml 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="15dp"
        android:text="@string/Inputs"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="300dp"
        android:layout_height="100dp"
        android:layout_below="@+id/textView1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="19dp" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/editText1"
        android:layout_below="@+id/editText1"
        android:layout_marginTop="19dp"
        android:text="@string/Output"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <EditText
        android:id="@+id/editText2"
        android:layout_width="300dp"
        android:layout_height="100dp"
        android:layout_alignLeft="@+id/textView2"
        android:layout_below="@+id/textView2"
        android:layout_marginTop="18dp" />

</RelativeLayout>

</LinearLayout> 
```

这是清单。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.sample.nfctest"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="14" />
<uses-permission android:name="android.permission.NFC"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".NFCTestActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
<intent-filter>
    <action android:name="android.nfc.action.NDEF_DISCOVERED" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="text/plain" />
</intent-filter>
<intent-filter>
<action android:name="android.nfc.action.TAG_DISCOVERED"/>
</intent-filter>

<intent-filter>
<action android:name="android.nfc.action.NDEF_DISCOVERED" />
<category android:name="android.intent.category.DEFAULT" />
<data android:scheme=""
    android:host="com.sample.nfctest"
    android:pathPrefix="" />
</intent-filter>

</manifest> 
```

附带说明一下，有没有办法使用模拟器测试这样的 NFC 应用程序？我正在借别人的手机进行测试（使用 Nexus 7 和 Galaxy Nexus）。

提前致谢。

# vba - MSAccess vba中的“另存为...”对话框：如何？

> ID：11743224
> 
> 赞同：0
> 
> 时间：2012-07-31T15:09:16.353
> 
> 标签：vba, ms-access, dialog, export, ms-access-2007

在 MSAccess 中，我有一个带有按钮的掩码。当用户点击按钮时，表格中的数据将导出到 .txt 文件中：

```
Private Sub Command_Click()
Dim Rst As DAO.Recordset
Dim AField As DAO.Field
Dim TempStr As String
Dim FileNumber
FileNumber = FreeFile
Open "c:\table.txt" For Output As #FileNumber
Set Rst = CurrentDb.OpenRecordset("Tabella1", dbOpenForwardOnly)
Do While Not Rst.EOF
    For Each AField In Rst.Fields
        If (AField.Name <> "ID") Then
            TempStr = TempStr & AField.value & "    "
        End If
    Next
    Print #FileNumber, Left(TempStr, Len(TempStr) - 1)
    TempStr = ""
    Rst.MoveNext
Loop
Rst.Close
Set Rst = Nothing
Close #FileNumber
End Sub 
```

它可以工作，但我会通过允许用户选择导出数据的文件来显示“另存为...”对话框。

是否可以？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T15:18:51.940

您可以设置对 Microsoft Office xx 对象库的引用并使用 FileDialog。

[文件对话框属性](http://msdn.microsoft.com/en-us/library/ms250701(v=office.11))

```
Sub ShowFileDialog()
    Dim dlgOpen As FileDialog
    Set dlgOpen = Application.FileDialog(msoFileDialogSaveAs)
    With dlgOpen
        .InitialFileName = "Z:\docs\"
        .Show
    End With
End Sub 
```

另外：[如何从 VBA 中的文件对话框对象中获取单个文件名（对于 MS Access 2007）？](https://stackoverflow.com/questions/2158675/how-do-i-get-a-single-file-name-out-of-a-file-dialog-object-in-vba-for-ms-acces/2158796#2158796)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T19:12:07.813

有关 API 解决方案，请参见此处： [http ://access.mvps.org/access/api/api0001.htm](http://access.mvps.org/access/api/api0001.htm)

对我来说效果很好。只需复制并粘贴到新模块中。

# php - PHP：在电子邮件中显示复选框数组

> ID：11743227
> 
> 赞同：1
> 
> 时间：2012-07-31T15:09:35.890
> 
> 标签：php, arrays, forms, checkbox

问题：如何在我的电子邮件中显示选定的复选框？

我创建了一个调查 ( [http://www.hello-rio.com/surveyonshoes/](http://www.hello-rio.com/surveyonshoes/) )，并且我试图让我选择的复选框在提交表单时显示在我的电子邮件中。在这方面我是一个完全的菜鸟，任何帮助将不胜感激

这是我的 html 示例复选框代码（在 index.html 中）：

```
<label for="colors">What colors do you own? (check all that apply)</label>
<div class="twocol"><input type="checkbox" name="color_flats[]" value="black">black </div>
<div class="twocol"><input type="checkbox" name="color_flats[]" value="brown">brown </div>
<div class="twocol"><input type="checkbox" name="color_flats[]" value="beige">beige </div>
<div class="twocol"><input type="checkbox" name="color_flats[]" value="white">white </div>
<div class="twocol"><input type="checkbox" name="color_flats[]" value="gold">gold </div>
<div class="twocol"><input type="checkbox" name="color_flats[]" value="silver">silver </div>
<div class="twocol"><input type="checkbox" name="color_flats[]" value="red">red </div>
<div class="twocol"><input type="checkbox" name="color_flats[]" value="blue">blue </div>
<div class="twocol"><input type="checkbox" name="color_flats[]" value="yellow">yellow </div>
<div class="twocol"><input type="checkbox" name="color_flats[]" value="green">green </div>
<div class="twocol"><input type="checkbox" name="color_flats[]" value="orange">orange </div>
<div class="twocol"><input type="checkbox" name="color_flats[]" value="purple">purple </div><br>
<label for="others">Others</label>
<input type="text" name="color_flats[]" class="others" /> 
```

继承人完整的php代码（contact.php）：

```
<?php

/* Set e-mail recipient */
$myEmail  = "johndoe@domain.com";

/* Check all form inputs using check_input function */
$subject         = "Survey on Shoes";
$Name            = check_input($_POST['Name'], "Enter your name");
$Address         = check_input($_POST['Address']);
$Email           = check_input($_POST['Email']);
$Age             = check_input($_POST['Age']);
$Sex             = check_input($_POST['Sex']);
$Status          = check_input($_POST['Status']);
$Employment      = check_input($_POST['Employment']);
$Income          = check_input($_POST['Income']);
$pairs_flats     = check_input($_POST['pairs_flats']);
$color_flats     = check_input($_POST['color_flats']);
$size_flats      = check_input($_POST['size_flats']);
$material_flats  = check_input($_POST['material_flats']);
$brand_flats     = check_input($_POST['brand_flats']);
$frequency_flats = check_input($_POST['frequency_flats']);
$cost_flats      = check_input($_POST['cost_heels']);
$pairs_heels     = check_input($_POST['pairs_heels']);
$color_heels     = check_input($_POST['color_heels']);
$size_heels      = check_input($_POST['size_heels']);
$material_heels  = check_input($_POST['material_heels']);
brand_heels      = check_input($_POST['brand_heels']);
$frequency_heels = check_input($_POST['frequency_heels']);
$cost_heels      = check_input($_POST['cost_heels']);
$height_heels    = check_input($_POST['height_heels']);
$work            = check_input($_POST['work']);
$mall            = check_input($_POST['mall']);
$events          = check_input($_POST['events']);
$travel          = check_input($_POST['travel']);

/* If e-mail is not valid show error message */
if (!preg_match("/([\w\-]+\@[\w\-]+\.[\w\-]+)/", $Email))
{
    show_error("E-mail address not valid");
}

/* If URL is not valid set $website to empty */
if (!preg_match("/^(https?:\/\/+[\w\-]+\.[\w\-]+)/i", $website))
{
    $website = '';
}

/* Let's prepare the message for the e-mail */
$message = "Hello!

Your form has been submitted by:

Name: $Name
Address: $Address
Email: $Email
Age: $Age
Sex: $Sex
Status: $Status
Employment: $Employment
Income: $Income

FLATS
Pairs: $pairs_flats pairs
Color: $check_msg
Size: $size_flats
Material: $material_flats
Brand: $brand_flats
Frequency: $frequency_flats pairs a year
Cost: Php $cost_flats

HEELS
Pairs: $pairs_heels pairs
Color: $color_heels
Size: $size_heels
Material: $material_heels
Brand: $brand_heels
Frequency: $frequency_heels pairs a year
Cost: $cost_heels
Height: $height_heels inches

Work/School: $work
Mall: $mall
Events: $events
Travel: $travel

End of message
";

/* Send the message using mail() function */
mail($myEmail, $subject, $message);

/* Redirect visitor to the thank you page */
header('Location: thanks.html');
exit();

/* Functions we used */
function check_input($data, $problem='')

    $data = trim($data);
    $data = stripslashes($data);
    $data = htmlspecialchars($data);
    if ($problem && strlen($data) == 0)
    {
        show_error($problem);
    }
        return $data;
}

function show_error($myError)
{
?>
    <html>
    <body>

        <b>Please correct the following error:</b><br />
        <?php echo $myError; ?>

    </body>
    </html>
<?php
exit();
}
?> 
```

我已经尝试过各种代码，例如 implode、if 语句、foreach 等。似乎无法正确...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:17:03.700

```
$color_flats = check_input(implode("," , $_POST['color_flats']));

$message = "...

FLATS
Pairs: $pairs_flats pairs
Color: $color_flats

..."; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:18:50.453

由于`$color_flats`是一个数组，因此您需要在每个数组上循环

```
foreach($color_flats as $whatever){
    echo $whatever;
} 
```

或者您可以将其内爆以制作一个唯一的字符串：

```
echo implode(',', $color_flats); 
```

* * *

```
<?php

#   Default Vars
$_color_flats = '';
if(isset($color_flats) === TRUE){
    #   Is Array ?
    if(is_array($color_flats) === TRUE){
        #   Count
        $c = count($color_flats);

        #   Loop
        for($i=0; $i < $c; $i++){
            $_color_flats.= (isset($color_flats[$i]) === TRUE ? $color_flats[$i] : '').($i == ($c-1) ? '' : ($i == $c-2 ? ' and ' : ', '));
        }
    }
}

echo $_color_flats;

?> 
```

# macos - 检查 webView 是否正在加载

> ID：11743241
> 
> 赞同：1
> 
> 时间：2012-07-31T15:10:09.927
> 
> 标签：macos, android-activity, webview

我想检查我的 webView 是否正在加载。我的代码是：

```
if (???) {
    [activityIndicator startAnimation:self];
} else {
    [activityIndicator stopAnimation:self];
} 
```

我知道 iOS 的`webView.loading`. mac有什么用？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-31T15:22:03.483

不要在加载 webview 时启动动画，而是在加载 webview 之前启动动画。然后在 webview 完成加载时停止动画

# html - 从一页到另一页的水平规则

> ID：11743243
> 
> 赞同：-1
> 
> 时间：2012-07-31T15:10:11.643
> 
> 标签：html, css

如果您在下面查看我的网站，当我更改页面时，标题文本下方的 hr 会发生一些变化。我确保每个页面都是 charset utf-8 [http://dl.dropbox.com/u/13722201/Dorset%20Designs/notindex.html](http://dl.dropbox.com/u/13722201/Dorset%20Designs/notindex.html)

这是一个简单的问题，我已经研究并尝试了不同的东西，为什么 -1 ？编辑：我也尝试添加一个不起作用的 CSS 重置。会不会是两个元素之间的冲突？如果是这样，添加重要标签会修复它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:32:20.743

您的 div#sub 在您的主页上与其他页面的高度不同，这可能会迫使水平规则向下。

为什么不使用 php 在每个页面上包含一个公共标题以强制一致性：

```
<?php include_once('header.php'); ?> 
```

# c# - 如何存储 IEnumerable 的实例 在内存缓存中？

> ID：11743244
> 
> 赞同：1
> 
> 时间：2012-07-31T15:10:13.313
> 
> 标签：c#, memcached

我正在尝试存储`IEnumerable<T>`到 memcached 中，但是，我只能成功存储`T`.

在 memcached 中存储枚举是否有不同的代码？

```
public IEnumerable<UsContentView> GetContentViewByUserId(int userId)
    {
        Expire("contentViewUserId_" + userId);
        var result = Memcached.Get<IEnumerable<UsContentView>>("contentViewUserId_" + userId);

        if (result == null)
        {
            result = db.UsContentViews.Where(m => m.UserID == userId).OrderBy(m => m.ArticleId).Distinct();

            var arr = result.ToArray();
            var arrList = arr.ToList();
            //store it in the cache, with the key
            StoreList(arrList, "contentViewUserId_" + userId);

            MemoryStream mem = new MemoryStream();
            BinaryFormatter b = new BinaryFormatter();
            try
            {
                b.Serialize(mem, result);
            }
            catch (EntitySqlException ex)
            {
                throw new ApplicationException("The object query failed", ex);
            }
            catch (EntityCommandExecutionException ex)
            {
                throw new ApplicationException("The object query failed", ex);
            }
            catch (SerializationException ex)
            {
                throw new ApplicationException("The object graph could not be serialized", ex);
            }
        }

        return result;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:11:46.080

将其解析为数组或列表，并以与`T`.

```
using System.Linq;

var array = myEnumerable.ToArray();
var list = myEnumerable.ToList(); 
```

对于事物列表，请注意不要在 Memcached 上达到每个键的 2MB 内存最大值，如果您为键启用了磁盘备份，则为 10MB。

实际上，我们通过存储`byte[]`和使用自定义序列化（有时是自制的，有时是 ProtoBuf）来解决这个问题，以保持快速和轻便。

# sql - SSIS中的OLEDB源视图不刷新

> ID：11743246
> 
> 赞同：0
> 
> 时间：2012-07-31T15:10:15.470
> 
> 标签：sql, sql-server, tsql, ssis

我在数据库中创建了一个视图，DbConfig。视图定义是

```
use DbConfig
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[v_ETL_priority]
AS
SELECT
'EF5F126FU1'    code
,'N'                activeind
,'Unknown'      decode
,   0               prioritydays
UNION ALL
SELECT  distinct
cast(LTRIM(RTRIM([priority_code])) as varchar(10))
,case when [inactive] =0 then 'Y' else 'N' end
,cast(LTRIM(RTRIM([description])) as varchar(30))
,[days]
FROM OPEN_DB.[dbo].[rm_priority] 
```

现在该视图用作其中一个数据流的 OLEDB 源。它工作正常。

有名为 OPEN_DB_UK、OPEN_DB_KD、OPEN_DB_Usa 的数据库，都具有与 OPEN_DB 相同的结构并包含相同的表 rm_priority 现在，如果我将 OPEN_DB 重命名为 OPEN_DB_old 并将 OPEN_DB_UK 重命名为 OPEN_DB，那么视图将不得不从新数据库（英国数据库）中提供数据行正确的？是的，它在 SSMS 中从 [V_VAT] 查询视图时会给出。但在 SSIS OLEDB 源中，它仍然会根据第一个数据库 OPEN_DB 给出数据行。为什么它不提供基于 SSIS OLEDB 源中 OPEN_DB_uk 的新数据库的数据行

有没有人遇到过类似的问题？是因为视图定义不同吗？

请任何 SSIS 专家帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:17:54.450

一段时间前，我遇到了类似的问题，并且通过再次重新创建连接来解决问题。删除现有连接并创建新连接并进行相同配置。请试试这个方法，让我知道你的意见。

# python - 使用正则表达式来避免 if elifs

> ID：11743251
> 
> 赞同：3
> 
> 时间：2012-07-31T15:10:24.737
> 
> 标签：python

我是 Python 的新手，我用它来做一个丑陋的小 put-this-tabular-data-into-a-db 转换。程序查看数据，在 MySQL 中创建表，然后将数据读入表中。在本节中，检查标题行文本以对数据类型做出一些决定。我有一个想法，我可以很聪明，用一个正则表达式而不是 if/elifs 来做到这一点。我的解决方案至少适用于这种情况，我不必担心多个匹配项。我要问的是，这种方法在效率方面有什么真正的优点吗？

```
def _typeMe(self, header_txt):
    # data typing
    colspecs = {
        'id':'SMALLINT(10)', 
        'date':'DATE', 
        'comments':'TEXT(4000)',
        'flag':'BIT(1)', 
        'def':'VARCHAR(255)'
    }
    # regex to match on header text e.g. 'Provisioner ID'
    r = re.search(re.compile('(ID$)|(Date)|(Comments$)|(FLAG$)', re.IGNORECASE), header_txt)
    checktype = lambda m: max(m.groups()).lower() if m else 'def'
    return colspecs[checktype(r)] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:33:56.453

绝对地; 你所拥有的是所谓[的数据驱动编程](http://en.wikipedia.org/wiki/Data-driven_programming)。一般来说，这是一种很好的风格，因为它允许您轻松进行更改，而不必担心重复代码部分。

就性能而言，它不太可能产生太大影响。重要的是它比替代方案更具*可读性*和*可维护性。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:32:36.223

我同意@ecatmur 的回答；我只是想发布一些对于评论来说有点太长的轻微代码建议。

没必要做`re.search(re.compile('...', re.IGNORECASE), header_text)`。相反，您可以直接将字符串作为`re.search('...', header_text, re.IGNORECASE)`. 如果您一遍又一遍地使用相同的正则表达式，速度会`re.compile`更快，但`re.search`如果您不这样做，朋友会为您调用它。

虽然我不同意 Colin 对命名 lambdas 的蔑视（它可能很方便，因为它们仍然是一行而不是两行），你根本不需要一个内部函数：

```
return colspecs[max(m.groups()).lower() if m else 'def'] 
```

如果您只创建一个捕获组而不是四个捕获组，则该`max(m.groups())`技巧也不是必需的：`'(ID|Date|Comments|Flag)$'`。然后你可以做`m.group(1)`。

# php - 修改正则表达式以匹配时间

> ID：11743253
> 
> 赞同：0
> 
> 时间：2012-07-31T15:10:31.037
> 
> 标签：php, regex

我想把**2012-07-16T21:00:00**从

```
 <abbr title="2012-07-16T21:00:00" class="dtstart">Monday, July 16th, 2012</abbr> 
```

但我遇到了一些困难。这就是我所做的

```
preg_match('/<abbr title="(.*)" \/>/i', $file_string, $time);
$time_out = $time[1]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:14:16.623

采用

```
preg_match('/<abbr title="([^"]*)" \/>/i', $file_string, $time); 
```

因此，您的匹配器将首先停止 <<">> ([^"] 表示除 ") 之外的任何内容

或者

```
preg_match('/<abbr title="([0-9T:-]*)" \/>/i', $file_string, $time); 
```

更准确地说，使用仅包含您需要捕获的内容的组。（注意“被排除在外）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:13:22.083

虽然我不认为为此使用正则表达式是最好的方法，但在某些情况下可能没问题。

如果您使用的是正则表达式，这就是您所需要的：

```
preg_match('/<abbr title="([^"]*)"/i', $file_string, $time); 
```

在此处查看实际操作：http: [//viper-7.com/qZu9tj](http://viper-7.com/qZu9tj)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:48:11.830

尝试这种方式而不是正则表达式：

```
$dom = new DOMDocument;
$dom->loadXML($file_string);

$abbr = simplexml_import_dom($dom);

$time;
foreach ($abbr[0]->attributes() as $key => $value)
{
    if ($key == 'title')
    {
        $time = $value;
        break;
    }
}
echo $time; 
```

正则表达式处理这类事情可能会很痛苦。最好使用解析器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T17:39:33.153

最好的方法是使用 HTML 解析器，例如 PHP 的**[DOM](http://php.net/dom)**。

```
<?php

    $html = <<<HTML
<abbr title="2012-07-16T21:00:00" class="dtstart">Monday, July 16th, 2012</abbr>
HTML;

    $dom = new DOMDocument();
    $dom->loadHTML($html);
    $abbr  = $dom->getElementsByTagName("abbr")->item(0);
    $title = $abbr->getAttribute("title");

    echo $title; 
```

即使您的数据看起来不完全一样，这也将起作用：

*   如果之前或之后还有其他属性`title`。
*   如果有尾随空格或其他不可见字符。
*   无论报价类型（`"`、`'`或无）。

所以请不要使用 RegEx，因为它最终会让你对 cuthulu 失去理智。`<center>`受不了就晚了。

# python - 如何在 Python 中格式化输出？

> ID：11743257
> 
> 赞同：2
> 
> 时间：2012-07-31T15:10:35.747
> 
> 标签：python, formatting, python-2.6, file-processing

我在用 Python 格式化一些代码时遇到困难：我的代码在这里：

```
keys = ['(Lag)=(\d+\.?\d*)','\t','(Autocorrelation Index): (\d+\.?\d*)',       '(Autocorrelation Index): (\d+\.?\d*)',     '(Semivariance): (\d+\.?\d*)']

import re
string1 = ''.join(open("dummy.txt").readlines())
found = []
for key in keys:
found.extend(re.findall(key, string1))
for result in found:
    print '%s  =  %s' % (result[0],result[1])
raw_input() 
```

到目前为止，我得到了这个输出：

> 滞后 = 1
> 
> 滞后 = 2
> 
> 滞后 = 3
> 
> 自相关指数 = #value
> 
> ……
> 
> ……
> 
> 半方差 = #value

但我想要的输出是：

```
 Lag        AutoCorrelation Index   AutoCorrelation Index   Semivariance
  1              #value                   #value               #value
  2              #value                   #value               #value
  3              #value                   #value               #value 
```

如果此输出可以在[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)文件或 txt 文件中实现，那就太好了！

我认为这是一种输出循环的方式，但我对循环不是很好。

## 我更新的代码（旧版本）

基于@mutzmatron 的回答

```
keys = ['(Lag)=(\d+\.?\d*)',
    '(Autocorrelation Index): (\d+\.?\d*)',
    '(Semivariance): (\d+\.?\d*)']

import re
string1 = open("dummy.txt").readlines().join()
found = []
for key in keys:
    found.extend(re.findall(key, string1))
raw_input()
for result in found:
    print '%s  =  %s' % (result[0], result[1])

raw_input() 
```

还没有编译！我正在使用 IDLE python 2.6 ，不知道错误消息，因为我不知道提示符中的 pause 命令！

## 原始问题

我对python完全陌生并且有一个问题。我正在尝试处理一个大文本文件。这里只是其中的一个片段：

```
Band: WDRVI20((0.2*b4-b3)/((0.2*b4)+b3))
Basic Statistics:
  Min: -0.963805
  Max: 0.658219
  Mean: 0.094306
  Standard Deviation: 0.131797
Spatial Statistics, ***Lag=1***:
  Total Number of Observations (Pixels): 769995
  Number of Neighboring Pairs: 1538146
  Moran's I:
    ***Autocorrelation Index: 0.8482564597***
    Expected Value, if band is uncorrelated: -0.000001
    Standard Deviation of Expected Value (Normalized): 0.000806
    Standard Deviation of Expected Value (Randomized): 0.000806
    Z Significance Test (Normalized): 1052.029088
    Z Significance Test (Randomized): 1052.034915
  Geary's C:
    ***Autocorrelation Index: 0.1517324729***
    Expected Value, if band is uncorrelated: 1.000000
    Standard Deviation of Expected Value (Normalized): 0.000807
    Standard Deviation of Expected Value (Randomized): 0.000809
    Z Significance Test (Normalized): 1051.414163
    Z Significance Test (Randomized): 1048.752451
  ***Semivariance: 0.0026356529***
Spatial Statistics, Lag=2:
  Total Number of Observations (Pixels): 769995
  Number of Neighboring Pairs: 3068924
  Moran's I:
 Autocorrelation Index: 0.6230691635
   Expected Value, if band is uncorrelated: -0.000001
   Standard Deviation of Expected Value (Normalized): 0.000571
   Standard Deviation of Expected Value (Randomized): 0.000571
 Z Significance Test (Normalized): 1091.521976
 Z Significance Test (Randomized): 1091.528022
  Geary's C:
Autocorrelation Index: 0.3769372504
  Expected Value, if band is uncorrelated: 1.000000
  Standard Deviation of Expected Value (Normalized): 0.000574
  Standard Deviation of Expected Value (Randomized): 0.000587
 Z Significance Test (Normalized): 1085.700399
 Z Significance Test (Randomized): 1061.931158
Semivariance: 0.0065475488 
```

我需要提取星 *** 值（例如：`Autocorrelation Index`、`Semivariance`值）之间的信息并对其进行处理，也许将其写入不同的文本文件或 excel 文件。我可以这样做吗？帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:19:21.317

填充要查找的键（[正则表达式）列表。](http://en.wikipedia.org/wiki/Regular_expression)例如，

```
keys = ['(Lag)=(\d+\.?\d*)',
        '(Autocorrelation Index): (\d+\.?\d*)',
        '(Semivariance): (\d+\.?\d*)'] 
```

然后使用正则表达式搜索这些，

```
import re
string1 = ''.join(open(FILE).readlines())
found = []
for key in keys:
    found.extend(re.findall(key, string1))

for result in found:
    print '%s  =  %s' % (result[0], result[1]) 
```

然后你应该有一个你想要的条目列表，你可以用它来做你接下来需要做的事情！

结果：

```
Lag  =  1
Autocorrelation Index  =  0.8482564597
Autocorrelation Index  =  0.1517324729
Semivariance  =  0.0026356529 
```

**CSV**

要输出到 CSV，请使用`csv`模块；

```
import csv
outfile = open('fileout.csv', 'w')
wrt = csv.writer(outfile)
wrt.writerows(found)
outfile.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:17:45.523

为了按部分格式化数据，可能最简单的方法是按如下方式处理段

```
keys =['(Lag)=(\d+\.?\d*)',
    '(Autocorrelation Index): (\d+\.?\d*)',
    '(Semivariance): (\d+\.?\d*)']

import re
string1 = ''.join(open("dummy.txt").readlines())

sections = string1.split('Spatial Statistics')

output = []
heads = []

for isec, sec in enumerate(sections):
    found = []
    output.append([])
    for key in keys:
        found.extend(re.findall(key, sec))
    for result in found:
        print '%s  =  %s' % (result[0],result[1])
        output[-1].append(result[1])
    if len(found) > 0 & len(heads) == 0:
        heads = [result[0] for result in found]    

fout = open('output.csv', 'w')
wrt = csv.writer(fout)
wrt.writerow(heads)
wrt.writerows(outputs)
fout.close() 
```

# css - Sass/Compass - 使用变量作为相对路径

> ID：11743260
> 
> 赞同：1
> 
> 时间：2012-07-31T15:10:50.760
> 
> 标签：css, sass, compass-sass

是否可以使用变量在 Sass 中设置相对路径？我已经尝试过，但只是不断出错。在我的管理 css 文件中，我试图避免为需要从 css 访问的任何图像编写背景（../../img/admin/img.jpg）。我试过写类似的东西

```
$admin_img: '../../img/admin';
body {
    background: url($admin_img/background.png);
} 
```

此代码不起作用，并一直说它需要 ')' 但找到 '.png);'

是否可以使用变量设置路径以及如何完成？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:28:54.647

我认为您需要插入变量：

```
$admin_img: '../../img/admin'; 
body { 
    background: url(#{$admin_img}/background.png); 
} 
```

# sql - 在 DB2 数据库中插入多行

> ID：11743265
> 
> 赞同：35
> 
> 时间：2012-07-31T15:11:03.393
> 
> 标签：sql, db2

我想在 DB2 表中插入多行。我有一个看起来像这样的查询

```
insert into tableName 
(col1, col2, col3, col4, col5) 
values 
(val1, val2, val3, val4, val5),
(val1, val2, val3, val4, val5),
(val1, val2, val3, val4, val5),
(val1, val2, val3, val4, val5); 
```

此查询不起作用。我不知道在 DB2 中是否有语法上更正确的方法来执行此操作。但是插入我的测试数据会很有用。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-31T15:27:38.627

我假设您正在使用 DB2 for z/OS，不幸的是（无论出于何种原因，我从来没有真正理解为什么）不支持在适合全选的情况下使用值列表。

您可以使用如下选择。这有点笨拙，但它有效：

```
INSERT INTO tableName (col1, col2, col3, col4, col5) 
SELECT val1, val2, val3, val4, val5 FROM SYSIBM.SYSDUMMY1 UNION ALL
SELECT val1, val2, val3, val4, val5 FROM SYSIBM.SYSDUMMY1 UNION ALL
SELECT val1, val2, val3, val4, val5 FROM SYSIBM.SYSDUMMY1 UNION ALL
SELECT val1, val2, val3, val4, val5 FROM SYSIBM.SYSDUMMY1 
```

您的语句可以在 DB2 for Linux/Unix/Windows (LUW) 上运行，至少当我在我的 LUW 9.7 上测试它时。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-02-12T19:30:49.360

更新 - 更简洁的版本

```
INSERT INTO tableName (col1, col2, col3, col4, col5) 
VALUES ('val1', 'val2', 'val3', 'val4', 'val5'),
       ('val1', 'val2', 'val3', 'val4', 'val5'),
       ('val1', 'val2', 'val3', 'val4', 'val5'),
       ('val1', 'val2', 'val3', 'val4', 'val5') 
```

* * *

以下内容也适用于 DB2，并且略少罗嗦

```
INSERT INTO tableName (col1, col2, col3, col4, col5) 
VALUES ('val1', 'val2', 'val3', 'val4', 'val5') UNION ALL
VALUES ('val1', 'val2', 'val3', 'val4', 'val5') UNION ALL
VALUES ('val1', 'val2', 'val3', 'val4', 'val5') UNION ALL
VALUES ('val1', 'val2', 'val3', 'val4', 'val5') 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-15T18:36:55.027

其他方法

```
INSERT INTO tableName (col1, col2, col3, col4, col5)
select * from table(                        
                    values                                      
                    (val1, val2, val3, val4, val5),   
                    (val1, val2, val3, val4, val5),   
                    (val1, val2, val3, val4, val5),   
                    (val1, val2, val3, val4, val5)    
                    ) tmp 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-09-17T10:32:14.833

I disagree on the comment posted by Hogan. Those instructions will work for IBM DB2 Mini, but it's not the case of DB2 Z/OS.

Here is an example:

```
Exception data: org.apache.ibatis.exceptions.PersistenceException:
The error occurred while setting parameters

SQL: INSERT INTO TABLENAME(ID_, F1_, F2_, F3_, F4_, F5_) VALUES
 (?,          1,          ?,          ?,          ?,          ?),          
 (?,          1,          ?,          ?,          ?,          ?)

Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: 
ILLEGAL SYMBOL ",". SOME SYMBOLS THAT MIGHT BE LEGAL ARE: FOR <END-OF-STATEMENT> NOT ATOMIC. SQLCODE=-104, SQLSTATE=42601, DRIVER=4.25.17 
```

So I can confirm that inline comma separated bulk inserts are not working on DB2 Z/OS (maybe you could feed it some props to get it working...)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-25T11:00:15.210

None of the above worked for me, the only one working was

```
insert into tableName  
select 11, 'BALOO' from sysibm.sysdummy1 union all
select 22, nullif('','') AS nullColumn from sysibm.sysdummy1 
```

The nullif is used since it is not possible to pass null in the select statement otherwise.

# javascript - HTML5 音频进度条长度

> ID：11743266
> 
> 赞同：2
> 
> 时间：2012-07-31T15:11:04.473
> 
> 标签：javascript, jquery, html, audio, progress-bar

```
<html>
    <head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
        <script>
            $(document).ready(function(){

                var counter = 0;
                var numOfTracks = $(".audio-player").length;
                $("#play-bt").click(function(){
                    $(".audio-player")[counter].play();
                    $("#message").text("Music started");
                })

                $("#pause-bt").click(function(){
                    $(".audio-player")[counter].pause();
                    $("#message").text("Music paused");
                })

                $("#stop-bt").click(function(){
                    $(".audio-player")[counter].pause();
                    $(".audio-player")[counter].currentTime = 0;
                    $("#message").text("Music Stopped");
                })

                $("#next-bt").click(function(){
                    $(".audio-player")[counter].pause();
                    $(".audio-player")[counter].currentTime = 0;
                    counter++;

                    if(counter > numOfTracks - 1){
                        counter = 0 ;
                    }

                    $(".audio-player")[counter].play();
                    $("#message").text("Next Track started");
                })

                $("#prev-bt").click(function(){
                    $(".audio-player")[counter].pause();
                    $(".audio-player")[counter].currentTime = 0;
                    counter--;
                    $(".audio-player")[counter].play();
                    $("#message").text("Previous Track");
                })

                $(".audio-player").bind('timeupdate', function(){

                    //Gets the whole duration of the track.
                    //No idea kung saan ko ilalagay sa UI**IMPLEMENT LATER**
                    var track_length = $(".audio-player")[counter].duration;
                    var secs = $(".audio-player")[counter].currentTime;
                    var progress = (secs/track_length) * 100;

                    $('#progressbar').css({'width' : progress * 2});

                    //Will Use these later on production
                    //NOTE DO NOT DELETE
                    //Track Minutes
                    var tcMins = parseInt(secs/60);
                    //Track Seconds
                    var tcSecs = parseInt(secs - (tcMins * 60));

                    if (tcSecs < 10) { tcSecs = '0' + tcSecs; }

                    // Display the time. REMEMBER
                    $('#timecode').html(tcMins + ':' + tcSecs);
                })
            })
        </script>
            <style>

        /*Seperate this some time in the development*/

        #playerContainer{ 
            background-color: #A8A8A8  ; 
            width: 260px; 
            height: 55px;
            padding: 8px;
            border: 1px solid #d0d0d0;
        }
        /* Player Controls */

        /*list items of controls */

        #playerControls li { 
            display: block; 
            width: 32px; 
            height: 32px; 
            padding: 0px;
            float: left; 
            cursor: pointer;
        }

        #playerControls { list-style: none; padding: 0px; margin: 0px;}

        /*Images for each li items items */
        #play-bt { background: url('icons/glyphicons_173_play.png'); background-repeat:no-repeat }
        #pause-bt {background: url('icons/glyphicons_174_pause.png'); background-repeat:no-repeat;}
        #next-bt { background: url('icons/glyphicons_176_forward.png'); background-repeat:no-repeat}
        #prev-bt {background: url('icons/glyphicons_172_rewind.png'); background-repeat:no-repeat;}

        /*Progress Stuff*/

        /*Remember to manipulate its width via javascript later*/
        #progressContainer 
        { 
            background-color:#e0e0e0;
            height: 14px; 
            width: 256px; 
            float: left;
            margin-left: 0px;
        }

        #progressbar {background-color: #1384bb; height:14px; width:0%; }

            </style>
    </head>
<body>
            <audio class ="audio-player"  name= "audio-player" src="04-zedd-stars_come_out_(terravita_remix).ogg" >
                <p>Sorry your file doesn't support html5</p>
            </audio>
            <!--Second Track For Testing Purposes-->
            <audio  class ="audio-player" name= "audio-player" src="01-hard_rock_sofa-quasar.mp3" ></audio>

            <div id="message"></div>
                <div id = "playerContainer">

                    <ul id =  "playerControls" >
                        <li id = "prev-bt"></li>
                        <li id= "play-bt"></li>
                        <li id= "pause-bt"></li> 
                        <li id = "next-bt"></li>
                        <li id= "stop-bt" ></li>
                        <li><span id ="timecode"></span></li>

                    </ul>
                        <div id="progressContainer"><!-- Progess bars container //-->
                            <div id="progressbar"></div>
                        </div>
                </div>

            </div>

    </body>
</html> 
```

这段代码工作得很好。我在这里遇到的问题是进度条。有些曲目没有完全填满进度条。例如，如果轨道只有 2 分钟长，它基本上不会完成进度容器。如果曲目超过 6 分钟，则进度条超出播放器容器。

我的问题如何创建一个进度条，无论曲目的持续时间有多长，它都会完全加载或完成进度条。假设我们对进度条容器的长度有一个特定的宽度。

这是 jsfiddle [http://jsfiddle.net/vUpeC/中的代码](http://jsfiddle.net/vUpeC/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T15:31:02.773

假设持续时间属性正常运行，我认为您不需要将“进度”乘以 2。

这个

```
 $('#progressbar').css({'width' : progress * 2}); 
```

应该

```
 $('#progressbar').css({'width' : progress+'%' }); 
```

# java - 在java中获取特定范围内的随机数

> ID：11743267
> 
> 赞同：20
> 
> 时间：2012-07-31T15:11:09.073
> 
> 标签：java, random

> **可能重复：**
> [Java：在一个范围内生成随机数](https://stackoverflow.com/questions/363681/java-generating-random-number-in-a-range)

我想使用生成随机数

```
java.util.Random(arg); 
```

唯一的问题是，该方法只能接受一个参数，所以这个数字总是在 0 和我的参数之间。有没有办法生成（比如说）200 到 500 之间的随机数？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-31T15:12:49.307

```
Random rand = new Random(seed);
int random_integer = rand.nextInt(upperbound-lowerbound) + lowerbound; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T15:12:56.453

首先，您必须创建一个 Random 对象，例如：

```
Random r = new Random(); 
```

然后，如果你想要一个 int 值，你应该使用`nextInt` int myValue = r.nextInt(max);

现在，如果你想在一段时间内这样做，只需执行以下操作：

```
 int myValue = r.nextInt(max-offset)+offset; 
```

在你的情况下：

```
 int myValue = r.nextInt(300)+200; 
```

您应该查看文档：

[http://docs.oracle.com/javase/6/docs/api/java/util/Random.html](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T15:13:59.540

我认为您误解了 Random 的工作原理。它不返回整数，而是返回一个 Random 对象，其参数是 PRNG 的*种子值*。

```
Random rnd = new Random(seed);
int myRandomValue = 200 + rnd.nextInt(300); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T15:15:13.790

您传递给构造函数的参数是种子，而不是绑定。

要获得 200 到 500 之间的数字，请尝试以下操作：

```
Random random = new Random(); // or new Random(someSeed);
int value = 200 + random.nextInt(300); 
```

# crystal-reports - 如何减少 Crystal Reports 中的空白/空白行？

> ID：11743269
> 
> 赞同：0
> 
> 时间：2012-07-31T15:11:17.473
> 
> 标签：crystal-reports

我正在使用 VS 2010 和 CR13。我有多个数据源。

我有一排重复的不同学生贷款。每一行之间都有大量的空白，这让我发疯。我可以勾选任何选项以使其消失吗？我选中了 Keep Together 和 Suppress Blank，所以我遗漏了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:15:09.760

如果您在行尾有任何空白，它将显示在报告中。

要删除空白，请确保您的报告字段具有适当的高度，然后向上拖动详细信息部分底部的水平条，使其接触到您的报告字段的底部。

例如：

这很糟糕，并且会导致空白：

```
-Detail section-------------------------------------------------------
+--------------+ +--------------+
| Report field | | Report field |
+--------------+ +--------------+

---------------------------------------------------------------------- 
```

这很好：

```
-Detail section-------------------------------------------------------
+--------------+ +--------------+
| Report field | | Report field |
+--------------+ +--------------+
---------------------------------------------------------------------- 
```

# java - 如何为 Glassfish 自定义 Java 应用程序创建 GUI？

> ID：11743270
> 
> 赞同：0
> 
> 时间：2012-07-31T15:11:17.733
> 
> 标签：java, swing, user-interface, glassfish

我想为我为 Glasshfish 编写的应用程序创建一个自定义 GUI。由于该程序由 Glassfish 运行，因此 Main 方法在这种情况下无济于事。我还尝试在 init() 方法中显示 JFrame，但没有显示任何内容。有没有人试过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:56:50.017

1.  创造`SplashScreen`

2.  开始`Glasshfish`

3.  创造`GUI`

4.  将所需的 vakue 添加到 GUI

5.  如果 Glasshfish 启动并创建了 GUI，则隐藏 SplashScreen 并显示 GUI

# python - 在正则表达式匹配后选择文本

> ID：11743271
> 
> 赞同：2
> 
> 时间：2012-07-31T15:11:18.410
> 
> 标签：python, regex

我真的被python中的正则表达式困住了。我有一个包含以下项目的字符串：

```
"""
(001,002) SI [SomeTag]:Element
(001,003e) LO [SomeTag2]:Element2
(001,004r) LR [SomeTag3]:Element3
(001,006) HI [SomeTag4]:Element4
""" 
```

我想选择“Element2”。我试图选择与

```
me = re.search("\(001,003e\)(.*)", obj) 
```

它给了我整条线。但我只想要“Element2”。如何选择“：”之后的正则表达式匹配的行中的所有内容（例如“（001,003e）”）。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:17:54.000

添加上面的评论作为回答：

您可以使用[否定字符类](http://www.regular-expressions.info/charclass.html#negated)并使用`\(001,003e\)[^:]*:(.*)`. 第二组将返回“Element2”。

# android - Android：片段无法获得活动

> ID：11743272
> 
> 赞同：19
> 
> 时间：2012-07-31T15:11:22.723
> 
> 标签：android, android-fragments

我有一个进行片段交易的活动

```
DetailFragment newFragment = new DetailFragment();
transaction.replace(R.id.mylist, newFragment);
transaction.addToBackStack(null);
transaction.commit(); 
```

效果很好。现在我知道在我的活动中我需要在 newFragment 中的布局中替换一个动态字符串。我以为我可以在 transaction.commit() 之后调用，就像

```
newFragment.setMyString("my dynamic value"); 
```

在 newFragment.java 我有

```
public void setMyString(String s)
{
 TextView tv = (TextView) getActivity().findViewById(R.id.myobject);
 tv.setText(s);
} 
```

关键是 getActivity() 返回 null。如何获得查找布局元素所需的上下文？

**编辑：**

我尝试使用捆绑包跟随路线，因为这似乎是最干净的方式。所以我改变了我的代码：

```
Bundle b = new Bundle();
b.putString("text", "my dynamic Text");
DetailFragment newFragment = new DetailFragment();
transaction.replace(R.id.mylist, newFragment);
transaction.addToBackStack(null);
transaction.commit(); 
```

我的片段 onCreateView 如下所示：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
{
   View v = inflater.inflate(R.layout.mylayout, container, false);
   TextView t = (TextView) v.findViewById(R.id.texttobereplaced);
   t.setText(savedInstanceState.getString("text");
} 
```

看来 savedInstranceState 是空的。我应该在哪里找到我的捆绑包？

**编辑2：**

错过了回复中的 getArguments() 。现在正在工作。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-31T15:33:08.160

确保您`getActivity()`在或之后调用`onAttach()`，因为之前它会返回`null`。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-31T15:19:23.100

您的尚未`Fragment`附加到`Activity`尚未，这也意味着您的布局尚未膨胀（请参阅[片段生命周期](http://developer.android.com/guide/components/fragments.html#Lifecycle)）。这里最好的解决方案是将您的`String`值作为参数添加到`Fragment`via[`Fragment.setArguments(Bundle)`](http://developer.android.com/reference/android/app/Fragment.html#setArguments%28android.os.Bundle%29)方法。这可以`Fragment`通过该[`Fragment.getArguments()`](http://developer.android.com/reference/android/app/Fragment.html#getArguments%28%29)方法在接收中检索。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T15:18:27.573

所以我也使用相同的片段事务管理器，我可以看到你的代码的唯一问题是你在你的 newFragment 类的 onCreateView 方法中定义 TextView tv，然后像这样实例化它：

```
public class AboutFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.newFragment, container, false);
        TextView tv = (TextView) v.findViewById(R.id.textview);
        return v;
    }

    public void setMyString(String s) {
        tv.setText(s);
    }
} 
```

我知道这并没有多大意义，但这就是我运行代码的方式，并且运行良好:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T18:55:45.763

如果您需要在 OnCreateView 中调用 getActivity，请将您的所有代码从 onCreateView 移动到 onActivityCreate 并且只剩下几行

```
View v = inflater.inflate(R.layout.xxxx, container, false);
    return v; 
```

在 onCreateView

但我有一个有趣的情况。

在我的 onActivityCreated

```
Spinner s1 = (Spinner) getActivity().findViewById(R.id.bitlength);
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
            getActivity(), R.array.bitlengths,
            android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    s1.setAdapter(adapter); 
```

有时 onActivityCreated 不会运行（正确！？），因此微调器 s1 变为空。

# php - PHP 如何全局访问这个数组？

> ID：11743275
> 
> 赞同：1
> 
> 时间：2012-07-31T15:11:37.873
> 
> 标签：php, arrays, global-variables

我对 PHP 不太熟悉，正在寻找以下问题的最佳解决方案：

*   我有一个 PHP 数组，其中包含有关我的脚本的重要信息

我需要在我的脚本中经常重复使用它。

```
$my_settings = array('width'=>'300', 'height'=>'200', ...); 
```

*   我将其存储在 MySQL 数据库中。

*   PHP 脚本每次运行时都需要从 MySQL 获取该数组，以便知道如何组合视图。

（数组最终会变得相当大......也许几百行......）

在我的脚本开头只获取和定义这个数组一次的最佳实践是什么，所以我可以一直通过其他函数等重用它......？

是通过全局定义吗？

```
global $my_settings;
$my_settings = get_my_settings_from_db();

function returnSetting($key='') {
 global $my_settings;
 return $my_settings[$key];

} 
```

或者这是个坏主意？

最有效的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:21:00.150

而不是使用`global`（这是一件坏事），您应该注入变量（或者甚至更好地将您需要的部分注入需要它的函数中）：

```
$my_settings = get_my_settings_from_db();

function returnSetting($settings, $key='') {
     return $settings[$key];
}

returnSetting($my_settings, $key); 
```

或者也许更好地创建一个设置类：

```
class Settings
{
    protected $settings;

    public function __construct($settings)
    {
        $this->settings = $settings;
    }

    public function getSetting($key)
    {
        return $this->settings[$key];
    }
}

// you only create one instance per request, so you would do this in for example your bootstrap file
$settings = new Settings($my_settings); 
```

假设您有一个需要一些设置的类，您可以执行以下操作：

```
class Foo
{
    protected $settings;

    public function __construct($settings)
    {
        $this->settings = $settings;
    {

    public function bar()
    {
        // do something which requires a setting
        echo $this->settings->getSetting('dimensions');
    }
}

$settings = new Settings($my_settings);
$foo = new Foo($settings);
$foo->bar(); 
```

这样做时，您将使您的代码具有更好的可测试性和可维护性。

请注意，这只是我用一只手拿着啤酒写的东西，它未经测试，但你应该明白这一点。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:18:19.520

环球真好！<- 如果今天是 2002 年 7 月，我会这么说

但在 2012 年全球必须被所有忍者开发者杀死。

尝试为此使用静态变量：

```
class DataCollector{
    static $my_settings = array('width'=>'300', 'height'=>'200');
}

//You could use the values at ANY place or function
echo DataCollector::$my_settings['width']; 
```

另请阅读 OOP 基础知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:16:44.870

您不需要像这样的第一个全局变量：

```
$my_settings = get_my_settings_from_db();

function returnSetting($key='') {
 global $my_settings;
 return $my_settings[$key];

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-10-05T09:06:12.557

### 使用 $GLOBALS['my_settings']

$GLOBAL 是一个 php 超级全局变量，它可以用来代替 'global' 关键字来访问全局范围内的变量，即可以从 php 脚本中的任何位置访问的变量，即使是在函数或方法中。

```
$my_settings = array('width'=>'300', 'height'=>'200', ...);
function blablabla() {
  $b = $GLOBALS['my_settings'] ;
  echo $b ;
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-31T15:32:59.897

```
function getSettings($id, $type) {
if(!$id == 0) {
$sql = "SELECT * FROM 'database' WHERE 'id' = '".$id."'";
$result = mysql_query($sql);

if(mysql_num_rows($result) == 0) {
while($row = mysql_fetch_assoc($result)) {
if($type == "setting1") {
        return $row['setting1'];
    } elseif($type == "setting2") {
        return $row['setting2'];
    } elseif($type == "setting3") {
        return $row['setting3'];
    } elseif($type == "setting4") {
        return $row['setting4'];
    } else {
        return "Wrong Input";
        }
} } else { return "Not Initialized";}
else { return "No $id input"; }}} 
```

存储登录`$_SESSION`并调用`getSetting($_SESSION['id'], "setting1")`

# excel - 如何使用 Excel VBA 自动化 PeopleSoft？

> ID：11743276
> 
> 赞同：0
> 
> 时间：2012-07-31T15:11:40.197
> 
> 标签：excel, vba, peoplesoft

我在电子表格中有一个人员列表和他们的电子邮件，我需要将他们的电子邮件输入到他们在 People Soft V8 上的帐户中。它们有数千个，所以我希望使这个过程自动化。

我从以下代码开始，但一直在

运行时错误
自动化错误 未指定错误

```
Sub GoToWebSiteUpdate()
Dim appIE As InternetExplorer
Dim sURL As String
Dim UserN As Variant
Dim myLoginID As String

Set appIE = New InternetExplorer
sURL = "Webaddress"
appIE.navigate sURL
appIE.Visible = True

     'Enter information in the first drop down
    Set UserN = appIE.document.getElementsById("InputBox")
    UserN(0).Value = "012354"

Set appIE = Nothing
End Sub 
```

如果有人有任何想法会很棒，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:30:08.300

有几种非常简单的方法可以做到这一点。

**1）快速而肮脏的方法：** 使用 Excel 公式（在每行的最后一个单元格中）将值连接在一起形成 SQL 语句（每行 1 个）。然后，您可以在您选择的 SQL 工具中运行它们。

**2）“正确”的方法：** 使用 ExcelToCI。这是一个 Excel 上传工具，它将运行所有页面验证等。它的内容比我在这里写的要多，但这是 PeopleBooks 中有关它的部分的链接：http: [//docs.oracle.com/cd/ E28394_01/pt852pbh1/eng/psbooks/tcpi/book.htm?File=tcpi/htm/tcpi10.htm#H3002](http://docs.oracle.com/cd/E28394_01/pt852pbh1/eng/psbooks/tcpi/book.htm?File=tcpi/htm/tcpi10.htm#H3002)

亲切的问候

邓肯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-09T12:19:39.977

我用来从 peoplesoft 提取报告的实际工作代码。代码是通过在互联网上查找各种博客和代码库来准备的

代码将循环遍历数据范围，即开始日期和结束日期并生成摘录。因为 Psoft 不能在提取中提供超过 65K 行，所以我让它一次运行 7 天。

```
Public Declare PtrSafe Function SetForegroundWindow Lib "user32" (ByVal HWND As Long) As Long

Sub PPS_Report_Extractor()

Dim Cell, Rng As Range   'Declaring cell for looping thru date range
'Dim appIE As Object      'InternetExplorer.Application
Dim appIE As InternetExplorer
Dim sURL As String       'URL String
Dim Element As Object    'HTMLButtonElement
Dim btnInput As Object   'MSHTML.HTMLInputElement
Dim ElementCol As Object 'MSHTML.IHTMLElementCollection
Dim Link As Object       'MSHTML.HTMLAnchorElement
Dim Counter, myNum       'Add Counter
    Counter = 0          'Declare Start for Counter
    myNum = 147          'Declare the number of repitition required

RemNamedRanges 'Delete the older ranges

'---Set New Range of reporting start dates -----
Range("A1").Offset(1, 0).Select
Range(Selection, Selection.End(xlDown)).Select
Selection.Name = "ElementCol"

Set Rng = Worksheets("Sheet1").Range("Elementcol")

'---Launch the IE -----
' Set appIE = CreateObject("InternetExplorer.Application")
Set appIE = New InternetExplorerMedium

sURL = "" ' open the URL by loggin intot PPS query then past that url here

appIE.Navigate sURL
appIE.Visible = True

'While appIE.Busy
'    DoEvents
'Wend

Pause (5) 'Allow IE to load

SendKeys "{ENTER}" 'Hit log on button in IE

'-Loop to generate the Files for full year starts here ---

For Each Cell In Rng

A = Format(Cell.Value, "DD-MM-YYYY")
B = Format(Cell.Offset(0, 1).Value, "DD-MM-YYYY")
'----Code for extraction ---START---

Application.Wait Now + TimeValue("00:00:5")
'Pause (5) 'Allow IE to load

appIE.Document.getelementbyid("InputKeys_bind2").Value = A
appIE.Document.getelementbyid("InputKeys_bind3").Value = B
appIE.Document.getelementbyid("#ICQryDownloadExcelFrmPrompt").Click

Pause (5)
SendKeys "{ENTER}", 5

'---Wait for excel generation to complete

I = 0
Set fo = CreateObject("Scripting.FileSystemObject")
Do Until fo.FileExists(OutFile) 'Loop until the output file is created, this could be infinity if there is a problem
    Application.Wait (Now + TimeValue("0:00:2")) 'Holds the program for 2 seconds
    DoEvents
    I = I + 1
    If (I = 10) Then
    SendKeys "%S" 'Alt S to save the report
    GoTo 1
    End If
Loop
1
'----Code for extraction ---END---
Next Cell

'-Loop to generate the Files for full year Ends here here ---

MsgBox "The range has " & K & " rows."

End Sub 
```

# c# - 在 asp.net 中对同一个文本框使用 ajax 和正则表达式验证器有冲突吗？

> ID：11743278
> 
> 赞同：0
> 
> 时间：2012-07-31T15:11:42.470
> 
> 标签：c#, asp.net, .net

我的代码 Asp 块：

----------

```
 <ContentTemplate>
            <asp:Label runat="server" ID="lblHelloWorld" Text="label" />
            <br />
                <asp:TextBox ID="TextBox2"  AutoPostBack ="true" OnTextChanged="emailavail"  runat="server" ></asp:TextBox>
                <br />
            </ContentTemplate>
            </asp:UpdatePanel>
        </td>
        <td>
            <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" 
                ControlToValidate="TextBox2" ErrorMessage="Emailid cannot be left blank" Display="Dynamic"></asp:RequiredFieldValidator>
            <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" Display="Dynamic"   
                ControlToValidate="TextBox2" ErrorMessage="Enter correct mailid" 
                ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"></asp:RegularExpressionValidator> 
```

部分背后的代码：

* * *

```
 protected void emailavail(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection();
    con.ConnectionString = "Data Source=DB-SERVER-PC\\NET3USER;Initial Catalog=prakash;User Id=sa;Password=strongsa;";
    con.Open();
    SqlCommand com = new SqlCommand("Select Emailid from details1 where Emailid=@email", con);
    com.Parameters.AddWithValue("@email", TextBox2.Text);

    SqlDataReader dr;
    dr = com.ExecuteReader();
    if (dr.Read() == true)
    {
        lblHelloWorld.Text = "Email not available";
    }
    else
    {
        lblHelloWorld.Text = "Email available"; 
    }
} 
```

所以我的问题是，一旦我在文本框中输入mailid，验证器仍然在那里，它不会离开。如果我删除 autopostback 属性，我的验证器工作正常，但不显示我的 ajax 标签。请帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:33:34.597

如果禁用 AutoPostBack，您需要在更新面板中进行其他控制以将异步回发到服务器

例如，在文本框之后放置一个按钮。

# sql - 将带有 CASE 的 SQL 转换为 Access

> ID：11743281
> 
> 赞同：2
> 
> 时间：2012-07-31T15:11:47.047
> 
> 标签：sql, ms-access

如何在访问中完成以下内容

```
SELECT MONTH([Date]) as monthNum, 
AVG(CASE WHEN loc ='1' THEN  [Count] END) AS locAVG, 
AVG(CASE WHEN dept ='50' THEN  [Count] END) AS deptAVG, 
FROM [table]
GROUP BY MONTH([Date]) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T15:16:05.953

您可以[`IIF`](http://office.microsoft.com/en-us/access-help/iif-function-HA001228853.aspx)在这种情况下使用；

```
AVG( IIF(loc = "1", 1, 0) ) AS locAVG, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:30:21.287

假设`[Count]`是一个字段的名称，并且您希望成为其中 的行`locAVG`的平均值，您可以利用函数忽略 Null 值这一事实。因此，使用表达式提供给when但 Null 否则。`[Count]``loc ='1'``AVG()``IIf()``[Count]``AVG()``loc ='1'`

对使用类似的`IIf()`表达式`deptAVG`。

```
SELECT MONTH([Date]) as monthNum, 
    AVG(IIf(loc ='1', [Count], Null)) AS locAVG, 
    AVG(IIf(dept ='50', [Count], Null)) AS deptAVG, 
FROM [table]
GROUP BY MONTH([Date]); 
```

# ios5 - XCode 4.4的iOS PhoneGap ChildBrowser“格式字符串未使用数据参数”警告

> ID：11743284
> 
> 赞同：3
> 
> 时间：2012-07-31T15:11:50.883
> 
> 标签：ios5, cordova, childbrowser

我已将 XCode 更新到 v4.4，并开始在 PhoneGap (Cordova 1.9.0) ChildBrowser 插件中收到警告，而 v4.3 从未出现过。（我的代码中没有其他任何更改。）当我看到这些警告时，我拉出了最新版本的 ChildBrowser 插件，这也没有使警告消失。

无论如何...在 ChildBrowserCommand.m 中：

```
-(void) onClose
{
    NSString* jsCallback = [NSString stringWithFormat:@"window.plugins.childBrowser.onClose();",@""];
    [self.webView stringByEvaluatingJavaScriptFromString:jsCallback];
}

-(void) onOpenInSafari
{
    NSString* jsCallback = [NSString stringWithFormat:@"window.plugins.childBrowser.onOpenExternal();",@""];
    [self.webView stringByEvaluatingJavaScriptFromString:jsCallback];
} 
```

这些中的每一个都会给出“格式字符串未使用的数据参数”警告。这是有道理的，因为`@""`即使它有一个值，也没有地方可以将它放入格式字符串中。

我不是 Objective-C 专家，但我意识到我可以通过删除`,@""`调用中的 来摆脱警告。

只是发布以防万一有人可以解释为什么在更新到 XCode 4.4 后开始出现此问题，以及是否/如何将其标记为 GitHub 上的 iOS PhoneGap ChildBrowser 插件的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:04:02.983

我遇到了同样的问题，我不得不承认我没有注意到您的回答，所以：我不知道为什么要修复它并且很高兴知道，但这就是修复。要解决此问题，请使用以下代码：

```
-(void) onClose
{
    NSString* jsCallback = [NSString stringWithFormat:@"window.plugins.childBrowser.onClose();"];
    [self.webView stringByEvaluatingJavaScriptFromString:jsCallback];
}

-(void) onOpenInSafari
{
    NSString* jsCallback = [NSString stringWithFormat:@"window.plugins.childBrowser.onOpenExternal();"];
    [self.webView stringByEvaluatingJavaScriptFromString:jsCallback];
} 
```

# javascript - 使用 jquery 创建图像序列

> ID：11743297
> 
> 赞同：-6
> 
> 时间：2012-07-31T15:12:28.670
> 
> 标签：javascript, jquery, html

我正在尝试找到一种方法来为一系列图像设置动画，最好使用 javascript/jQuery。我想做的是制作某种计数器来重命名我的源图像onClick。

每次点击（后退/前进）都会触发下一系列图像。

所以在一定的时间间隔内 ``<img src="01.jpg" />`` 替换 ``<img src="02.jpg" />`` 替换 ``<img src="03.jpg" />``

等等

因此，彼此快速跟进的图像看起来像动画:)

我希望我已经说清楚了，任何帮助将不胜感激！

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:16:55.483

一种简单易懂的方式来完成你想要的事情是将所有图像定位在同一个位置，并且一次只显示一个......

```
var images = $('img.slideshow'),
    nextStep = function(i) {
       images.hide().eq(i).show();
       setTimeout(function(){
             nextStep((++i)%($('img.slideshow').length));
       },1000);
   };
nextStep(0); 
```

这是显示动画的一种非常简单的方法

# c# - Expression.Assign Right 属性必须可读

> ID：11743303
> 
> 赞同：0
> 
> 时间：2012-07-31T15:12:40.057
> 
> 标签：c#, xml, lambda, expression-trees

运行此代码时出现以下参数异常（“表达式必须是可读的参数名称：正确”），但无法弄清楚原因。

此代码旨在创建一个委托以获取 XmlNode 中的属性并将它们映射到对象上的属性。

```
private static Action<XmlNode, T>   createMapperFunction() {
            var props = typeof(T).GetProperties().ToArray();
            var xmlNodeParameter = Expression.Parameter(typeof(XmlNode), "x");
            var resultParameter = Expression.Parameter(typeof(T), "result");
         //   Expression.
            var exprList = new List<Expression>();
            for (int i = 0 ; i < props.Length ; i++) {
                if (props[i].PropertyType == typeof(string))
                    exprList.Add(Expression.Assign(Expression.Property(resultParameter,props[i].Name), 
                            Expression.Property(
                                Expression.Property(
                                    Expression.Property(xmlNodeParameter,"Attributes"), "ItemOf", Expression.Constant(props[i].Name)),"InnerText")));
            }
            var body = Expression.Block(exprList);
            return Expression.Lambda<Action<XmlNode, T>>(body, xmlNodeParameter, resultParameter).Compile();

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:37:53.077

[`XmlAttribute.InnerText`](http://msdn.microsoft.com/en-us/library/system.xml.xmlattribute.innertext%28v=vs.100%29.aspx)是只写的。`XmlAttribute.InnerText`用作赋值的右侧不起作用，因为表达式无法读取值以`Assign`将其分配给左侧。

# optimization - 优化？`i--` 与 `i++`

> ID：11743305
> 
> 赞同：1
> 
> 时间：2012-07-31T15:12:40.510
> 
> 标签：optimization, loops

当循环结构引起我的注意时，我正在浏览一些 JavaScript 代码。它并没有什么特别之处，而是以一种与我不同的方式进行迭代。当我需要循环一些不依赖于顺序的东西时，我通常会计数，从头到尾迭代，如下所示：

```
do
{
    // I feel like I'm going in circles
    i++;
} while (i < length) 
```

然而，这个 JavaScript 函数倒计时，从头到尾循环。

```
var i = data.length - 1;
if(i >= 0)
{                   
    do
    {
        // Around and around, we go                     
    }while(i--)
} 
```

向下计数有什么好处还是只取决于开发人员的偏好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:22:12.657

我你正在从数组中删除东西，倒退会更好。

考虑你有一个包含 10 个东西的数组，你最终想要通过在循环期间执行的一些条件来删除索引 3 和 4 处的项目。你正在增加你的计数器。当您在 3 处移除时，阵列相对于计数器会发生什么情况？数组长度缩小到 9，索引 4 处的内容现在位于索引 3，并且您将计数器增加到 4。您只是跳过了要删除的内容。如果你倒退，你就避免了这个问题。

此外，[倒退更快](https://stackoverflow.com/questions/3520688/javascript-loop-performance-why-is-to-decrement-the-iterator-toward-0-faster-t)，因为处理器可以将索引与 0 进行比较，而不是将索引与随机数进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:27:18.427

嗯。理论上不，循环使用 for 或使用 while 应该没有区别，但这是我的 2 美分。查看是否存在差异的唯一方法是进行性能测试，一个使用while，另一个使用for，比如说100万个元素，计算执行时间并自己看看。循环有很多优化技术（无论是 for 还是 while），最常见的一种是在一个循环中进行多次迭代。示例：一个标准的 for 循环是：

```
var i;
for (i=0;i < N; i++) {
    bla();
} 
```

现在我们通过在每次迭代中执行相同的多次来优化它

```
var i;
    for (i=0;i < N; i+=5) {
        if (i < N-5) {
          bla();
          bla();
          bla();
          bla();
          bla();
        }
    }
for (j=i; j <N;j++){
  bla();
} 
```

这种方式保证了更少的迭代次数。根据您每次迭代的操作以及数组/堆栈的大小，它可以提供更好的性能。有很多关于如何提高循环性能的文章

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:20:47.240

可能不是。开发人员很可能只是想倒数。

但是，标准的 0 到 length-1 循环并不总是理想的。例如，在特定的缓存架构下，无论出于何种原因，反向访问结构的元素可能会更快。我想不出任何合理的情况会在 JavaScript 中发生这种情况，但它确实发生在基于应用程序的语言中，尤其是像 C 这样的相对低级的语言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T15:25:34.490

引用类似的 SO 问题/答案：

> 因为您的转发条件每次都必须接收数组的长度属性，而另一个条件只需要检查“大于零”，这是一项非常快速的任务。

[循环迭代-Bergi](https://stackoverflow.com/a/8689656/218159)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T15:34:23.333

我看到至少一项研究表明减少的 while 循环是在 JavaScript 中执行循环的最快方法：[https ://blogs.oracle.com/greimer/entry/best_way_to_code_a](https://blogs.oracle.com/greimer/entry/best_way_to_code_a)

请注意，这是针对研究中的 JavaScript 引擎的，其他语言/机器实现可能会提供不同的结果。例如，在 C 语言中，优化编译器可能会完全展开您的循环，并且生成的代码根本不会循环。

# java - 如何使用 JAXB 将空值表示为空元素？

> ID：11743306
> 
> 赞同：10
> 
> 时间：2012-07-31T15:12:43.597
> 
> 标签：java, xml, jaxb

我的`XSD`结构如下：-

```
<element name="XYZDate" maxOccurs="1" minOccurs="1" nillable="true" type="date"/> 
```

当我在该字段中设置空值时，它允许我但在`XML`生成时从`JAXB`编组它产生输出

```
<XYZDate xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/> 
```

而在结果中我想要输出，`<XYZDate/>`即不想要模式和其他属性。
我在使用的帮助下摆脱了这个问题，但它在单行中`XMLStreamWriter`产生了完整的内容。`XML`我需要格式正确`XML`。如果我需要使用`IndentingXMLStreamWriter`我的`Java`版本不支持它并且我无法控制 Java Container 来更改或修改。

请提出任何形成格式`XML`良好的解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-31T20:42:15.500

**注意 #1：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人和[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

* * *

**注意 #2：** 您看到的输出与您使用 JAXB 映射的输出相匹配。有关更多信息，请参阅：

*   [http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html](http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html)

* * *

**将 NULL 表示为空元素**

如果要将 null 表示为空元素，有几个选项。

**选项 #1 - 使用标准 JAXB API**

***日期适配器***

您可以使用 an`XmlAdapter`来更改将 的实例`Date`编组为 XML 的方式。我们将日期转换为一个类的实例，该实例具有一个映射的属性`@XmlValue`（参见[http://blog.bdoughan.com/2011/06/jaxb-and-complex-types-with-simple.html](http://blog.bdoughan.com/2011/06/jaxb-and-complex-types-with-simple.html)）。JAXB RI 不调用`XmlAdapter`null 值的机制，因此您将需要使用诸如 MOXy 之类的 JAXB impl。

```
package forum11743306;

import javax.xml.bind.annotation.XmlValue;
import javax.xml.bind.annotation.adapters.XmlAdapter;
import javax.xml.datatype.XMLGregorianCalendar;

public class DateAdapter extends XmlAdapter<DateAdapter.AdaptedDate, XMLGregorianCalendar>{

    @Override
    public AdaptedDate marshal(XMLGregorianCalendar date) throws Exception {
        AdaptedDate adaptedDate = new AdaptedDate();
        adaptedDate.value = date;
        return adaptedDate;
    }

    @Override
    public XMLGregorianCalendar unmarshal(AdaptedDate adaptedDate) throws Exception {
        return adaptedDate.value;
    }

    public static class AdaptedDate {
        @XmlValue
        public XMLGregorianCalendar value;
    }

} 
```

***根***

使用注解`XmlAdapter`引用。`@XmlJavaTypeAdapter`

```
package forum11743306;

import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;
import javax.xml.datatype.XMLGregorianCalendar;

@XmlRootElement
public class Root {

    private XMLGregorianCalendar xyzDate;

    @XmlElement(name = "XYZDate", required=true, nillable = true)
    @XmlJavaTypeAdapter(DateAdapter.class)
    public XMLGregorianCalendar getXyzDate() {
        return xyzDate;
    }

    public void setXyzDate(XMLGregorianCalendar xyzDate) {
        this.xyzDate = xyzDate;
    }

} 
```

**选项 #2 - 使用 MOXy 的 @XmlNullPolicy 扩展**

MOXy 提供了一个`@XmlNullPolicy`扩展，让您可以灵活地表示 null。

```
package forum11743306;

import javax.xml.bind.annotation.*;
import javax.xml.datatype.XMLGregorianCalendar;

import org.eclipse.persistence.oxm.annotations.*;

@XmlRootElement
public class Root {

    private XMLGregorianCalendar xyzDate;

    @XmlElement(name = "XYZDate", required=true, nillable = true)
    @XmlNullPolicy(emptyNodeRepresentsNull = true, nullRepresentationForXml = XmlMarshalNullRepresentation.EMPTY_NODE)
    public XMLGregorianCalendar getXyzDate() {
        return xyzDate;
    }

    public void setXyzDate(XMLGregorianCalendar xyzDate) {
        this.xyzDate = xyzDate;
    }

} 
```

* * *

**其它文件**

以下文件可与任一选项一起使用以完成示例。

***jaxb.properties***

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅： [http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

***演示***

```
package forum11743306;

import javax.xml.bind.*;
import javax.xml.datatype.DatatypeFactory;

import org.eclipse.persistence.Version;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);
        System.out.println(Version.getVersion());
        System.out.println(jc.getClass());

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

        Root root = new Root();
        root.setXyzDate(null);
        marshaller.marshal(root, System.out);

        root.setXyzDate(DatatypeFactory.newInstance().newXMLGregorianCalendar("2012-08-01"));
        marshaller.marshal(root, System.out);
    }

} 
```

***输出***

```
2.4.0
class org.eclipse.persistence.jaxb.JAXBContext
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <XYZDate/>
</root>
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <XYZDate>2012-08-01</XYZDate>
</root> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T16:30:15.963

您应该阅读[nillable 和 minOccurs XSD 元素属性](https://stackoverflow.com/questions/1903062/nillable-and-minoccurs-xsd-element-attributes)`nil`，因为和`empty`元素之间的区别在`XML`. ie`xsi:nil=true`类似于`SQL NULL`但具有空元素表示空元素的存在。:)
我知道这很令人困惑。

要解决您的特定问题，如果您使用`JAXB`序列化来生成它，我建议您阅读[如何使用 JAXB 实例化一个空元素](https://stackoverflow.com/questions/594537/how-to-instantiate-an-empty-element-with-jaxb)。该问题本身向您展示了如何生成一个空元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-11T10:25:24.437

布莱斯的回答很好，但已经过时了。有一种更好、更简单的方法可以实现同样的效果。我搜索了许多论坛并结合了不同的解决方案来解决这个问题。我在这里分享，以便对其他人有所帮助。

* * *

**注意：**以下解决方案比日期更普遍。

* * *

## 方法 - 1：如果你想用空字符串替换 xml 中的所有空值

**会话事件适配器类**

将以下类添加到代码中的方便包中。

```
package com.dev

import org.eclipse.persistence.descriptors.ClassDescriptor;
import org.eclipse.persistence.mappings.DatabaseMapping;
import org.eclipse.persistence.oxm.mappings.XMLDirectMapping;
import org.eclipse.persistence.oxm.mappings.nullpolicy.XMLNullRepresentationType;
import org.eclipse.persistence.sessions.*;

public class NullPolicySessionEventListener extends SessionEventAdapter {

@Override
public void preLogin(SessionEvent event) {
    Project project = event.getSession().getProject();
    for(ClassDescriptor descriptor : project.getOrderedDescriptors()) {
        for(DatabaseMapping mapping : descriptor.getMappings()) {
            if(mapping.isAbstractDirectMapping()) {
                XMLDirectMapping xmlDirectMapping = (XMLDirectMapping) mapping;
                xmlDirectMapping.getNullPolicy().setMarshalNullRepresentation(XMLNullRepresentationType.EMPTY_NODE);
                xmlDirectMapping.getNullPolicy().setNullRepresentedByEmptyNode(true);
            }
        }
    }
 } 
```

}

**实体类**

```
package com.dev;

import javax.xml.bind.annotation.*;

import org.eclipse.persistence.oxm.annotations.*;

@XmlRootElement(name = "Entity")
public class Entity {

    @XmlElement(name = "First_Name", required=true, nillable = true)
    private String firstName;

    @XmlElement(name = "Last_Name" , required=true, nillable = true)
    private String lastName;

    public Entity(){}

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

} 
```

**DemoApp 类**

```
package com.dev;

import javax.xml.bind.*;
import org.eclipse.persistence.*;
import java.util.Map;
import java.util.HashMap;

public class DemoApp {

public static void main(String[] args) throws Exception {
    Map<String, Object> properties = new HashMap<String,Object>(1);
    SessionEventListener sessionEventListener = new NullSessionEventListener();
    properties.put(JAXBContextProperties.SESSION_EVENT_LISTENER, sessionEventListener);
    JAXBContext context = JAXBContextFactory.createContext(new Class[] {ListofEntities.class, list.get(0).getClass()},properties);
    Marshaller marshaller = jc.createMarshaller();
    marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

    Entity entity = new Entity();
    entity.setfirstName(null);
    entity.setLastName(null);
    marshaller.marshal(entity, System.out);

    entity.setfirstName("Ramu");
    entity.setLastName("K");
    marshaller.marshal(entity, System.out);
} 
```

}

**输出：**

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <First_Name/>
   <Last_Name/>
</root>
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <First_Name>Ramu</First_Name>    
   <Last_Name>Ramu</Last_Name>   
</root> 
```

## 方法 - 2：如果您只想用 xml 中的空字符串替换选定的空值

**实体类**

```
package com.dev;

import javax.xml.bind.annotation.*;

import org.eclipse.persistence.oxm.annotations.*;

@XmlRootElement(name = "Entity")
public class Entity {

    @XmlElement(name = "First_Name", required=true, nillable = true)
    @XmlNullPolicy(emptyNodeRepresentsNull = true, nullRepresentationForXml = XmlMarshalNullRepresentation.EMPTY_NODE)
    private String firstName;

    @XmlElement(name = "Last_Name" , required=true, nillable = true)
    private String lastName;

    public Entity(){}

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

} 
```

**DemoApp 类**

```
package com.dev;

import javax.xml.bind.*;
import org.eclipse.persistence.*;

public class DemoApp {

public static void main(String[] args) throws Exception {
    JAXBContext context = JAXBContextFactory.createContext(new Class[] {ListofEntities.class, list.get(0).getClass()},null);
    Marshaller marshaller = jc.createMarshaller();
    marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

    Entity entity = new Entity();
    entity.setfirstName(null);
    entity.setLastName(null);
    marshaller.marshal(entity, System.out);

    entity.setfirstName("Ramu");
    entity.setLastName("K");
    marshaller.marshal(entity, System.out);
} 
```

}

**输出：**

在此输出中，我们看到只有带有 XmlNullPolicy 注释的元素在值为 null 时显示。由于 jaxb 的默认行为，省略了其他元素。

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <First_Name/>
</root>
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <First_Name>Ramu</First_Name>    
   <Last_Name>Ramu</Last_Name>   
</root> 
```

**参考：**

1.  [在哪里包含 jaxb.properties 文件？](https://stackoverflow.com/questions/4340625/where-to-include-jaxb-properties-file)

2.  [将空值表示为 xml jaxb 中的空元素](https://stackoverflow.com/questions/17366054/represent-null-value-as-empty-element-in-xml-jaxb)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T12:51:51.227

我投票赞成gbvb的答案。

我不明白你为什么要这个但是。

`xmlns:xsi`带有and的空元素`xsi:nil`是正确的方法。

如果没有这些属性，任何`reasonable`解析器都会为您提供空字符串`even if the element is self-closed`。

假设您想给客户一个整数值，这意味着许多玩家得分中的最高分。

当您可以计算时，您可以给出正确的值。当还没有球员实际得分时，你应该正确的价值为`NULL`或`nil`这意味着没有记录累积。

```
<highestScore among="128">98</highestScore> 
```

可以说最高分是128次尝试中的98次。

和

```
<highestScore among="0"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:nil="true"/> 
```

可以说没有最高分是因为没有记录分数。

但

```
<highestScore/> 
```

没有任何意义，只是一个简单的自封闭空元素。

# c - 我可以找出我的 C 程序中包含的哪些库实际上被使用了吗？

> ID：11743314
> 
> 赞同：1
> 
> 时间：2012-07-31T15:13:20.097
> 
> 标签：c

我的 C 程序中有大量包含。在开发过程中，我尝试了不同的做事方式，所以我敢打赌，我已经包含了许多库，但没有使用。

编译器是否摆脱了不使用的库？有什么工具可以告诉我吗？即使编译器确实摆脱了代码，如果我可以摆脱一些东西，它也会整理源代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:21:34.587

实际上，决定什么最终进入可执行文件的不是编译器，而是链接器。现代链接器足够聪明，除非使用代码，否则不会从库中提取代码。因此，您可以链接到数百个库，但如果您不调用其中的任何函数，那么它们不会向您的程序添加任何代码。

至于头文件，大多数只包含声明和预处理器宏，它们不会自己添加代码。包含许多头文件的最大缺点是它会减慢源文件的编译速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:17:22.373

不，该工具集将链接到您告诉它链接的任何库中。您可以通过诸如 Doxygen 之类的工具运行源代码，该工具将生成有关代码使用方式的文档页面和图表，但不一定告诉您您是否在正确或有效地使用图书馆。

由程序员决定是否需要该库并仔细选择执行程序所需的库。不必要的包含会增加编译时间，并可能使二进制文件膨胀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:50:20.207

可能对您有用的 Linux 实用程序

a）包含在您的目标代码/库中的符号（比如一个函数）

b）共享库的依赖项分别是**nm**和**ldd**工具。

下面的链接对于更多信息非常有用，

[http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html](http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html)

# php - Symfony2.1 嵌入式表单和外键关系

> ID：11743317
> 
> 赞同：0
> 
> 时间：2012-07-31T15:13:36.343
> 
> 标签：php, doctrine-orm, twig, symfony-2.1

我决定完全改写我的问题。希望我的问题通过这种方式更清楚。

如何在实体中嵌入表示外键字段的表单？例如，属性具有状态表（拥有、可用、待售等）的外键。使用嵌入式表单，我不确定如何让我的嵌入式表单（在这种情况下为状态）了解嵌入它的父实体，以便在提交表单时，创建/更改属性上的状态只会更改外键关系。我可以通过调用 $property->setStatus($status) 来查询属性并更改其状态，所以我相信我的教义关系是正确的。

现在，我在尝试更改表单提交状态时收到此错误：

```
Catchable Fatal Error: Object of class Test\Bundle\SystemBundle\Entity\Status could not be converted to string in /home/vagrant/projects/test.dev/vendor/doctrine/dbal/lib/Doctrine/DBAL/Connection.php line 1118 
```

我的表单创建：

```
$form = $this->createForm(new PropertyType(), $property); 
```

我的 Property 实体中 Property 与 Status 的实体关系：

```
/**
 * @var Status $status
 *
 * @ORM\ManyToOne(targetEntity="Test\Bundle\SystemBundle\Entity\Status")
 * @ORM\JoinColumn(name="StatusId", referencedColumnName="Id", nullable=false)
 */
protected $status; 
```

这是我的 PropertyType 类中嵌入 StatusType 类的行：

```
->add('status', new StatusType()) 
```

这是我的 StatusType 表单类：

```
class StatusType extends AbstractType
{
public $statusType = null;

public function __construct($statusType)
{
    $this->statusType = $statusType;
}

public function buildForm(FormBuilderInterface $builder, array $options)
{

    $builder->add('name', 'entity', array('label' => 'Status Name',
            'class'     => 'Test\Bundle\SystemBundle\Entity\Status',
            'property'  => 'name'));

}

public function getParent()
{
    return 'form';
}

public function getDefaultOptions(array $options)
{
    return array('data_class' => 'Test\Bundle\SystemBundle\Entity\Status');
}

public function getName()
{
    return 'status';
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:29:58.507

在没有看到您的`Status`实体的情况下，听起来您需要为其添加一个`__toString()`方法。为了让 Symfony 将实体呈现为文本，它需要知道要显示什么。像这样的东西...

```
class Status
{    
    public $title;

    public function __toString()
    {
        return $this->title;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:57:47.623

我发现的一种解决方案是将所有逻辑放在 PropertyType 上以获得状态。

```
->add('status', 'entity',
            array('class'   => 'Test\Bundle\SystemBundle\Entity\Status',
                'property'  => 'name',
                'query_builder' => function(EntityRepository $er){
                    return $er->createQueryBuilder('status')
                    ->orderBy('status.name', 'ASC');
                })) 
```

而不是嵌入 StatusType：

```
->add('status', new StatusType()) 
```

我不喜欢这种方法，因为每个使用 Status 的实体都会有这个重复，但它暂时有效，直到我弄清楚如何让它工作。

# java - 文件不完整的ftp

> ID：11743318
> 
> 赞同：0
> 
> 时间：2012-07-31T15:13:37.920
> 
> 标签：java, ftp

信不信由你，但这是我第一次尝试构建一个 ftp 客户端来自动化程序中的过程。到目前为止，一切都很好，直到现在。我有一个包含异常长行的文本文件。不计算大约是 2 或 3 个屏幕宽，不是智能手机屏幕而是 15.4"。问题是 ftp 上传但将所有行都剪短了。在每行相同数量的字符之后，它们似乎都被剪短了。我m 使用 jscape。查看仅用于 ftp 的 api，有一个 setTransferBlockSize。我尝试对其进行操作，但似乎没有任何区别。以下是我正在使用的基本方法：

```
public String Connect()
{
    FtpException connected;
    String message="";
    try
    {
        // connect to FTP server
         ftp.connect();
         ftp.setReceiveBufferSize(BUFFER_SIZE);
         ftp.setSendBufferSize(BUFFER_SIZE);

         System.out.println("Connected to "+this.hostname+" ; Username = "+this.username);

         ftp.setAscii();

        //System.out.println("Present working directory(conn) - "+ftp.getDir());
    }
    catch(FtpException e)
    {
         connected=e;
        e.printStackTrace();
        message=connected.toString();
    }
    return message;
}

public void SetRemoteDirectory(String remoteLocation )
{
    try
    {
        ftp.setDirUp();
        ftp.setDir(remoteLocation);
        System.out.println("Present working directory(remdir) - "+ftp.getDir());
        //ftp.getDirListingAsString();
    }
    catch (FtpException e)
    {

        e.printStackTrace();
    }
}

public void UploadDataset(String _localFile, String _remoteFile, int  _blockSize)
{
    try
    {
        System.out.println("Locale File: "+_localFile);
        System.out.println("Remote File: "+_remoteFile);
        ftp.setBlockTransferSize(_blockSize);
        ftp.upload(_localFile, _remoteFile);
    }
    catch(FtpException e)
    {
        e.printStackTrace();
    }
}//UploadDatset 
```

# visual-studio-2008 - 除了时间戳的部分，如何确保编译给我们从一台计算机到另一台计算机的相同 dll 文件？

> ID：11743325
> 
> 赞同：0
> 
> 时间：2012-07-31T15:14:04.937
> 
> 标签：visual-studio-2008, dll, compilation, compare

我在 C++ Visual Studio 2008 中使用相同编译器版本在两台不同的计算机上编译了一个 dll。源代码在两台计算机上是相同的。不幸的是，dll在一台计算机和另一台计算机之间是不同的，但大小是相同的。谁能告诉我为什么？除了时间戳的部分，如何确保编译给我们从一台计算机到另一台计算机的相同 dll 文件？

谢谢！

# database - PostgreSQL：这是因为锁（行级）吗？

> ID：11743329
> 
> 赞同：1
> 
> 时间：2012-07-31T15:14:13.313
> 
> 标签：database, postgresql, geospatial, postgis, postgresql-9.1

我有一张包含大约 210 万个元组的表。其中有纬度和经度列。我正在尝试将其转换为地理类型（带有 SRID 的点）。

我写的函数（过程）在我限制条目时工作正常（比如：）`SELECT id,longitude,latitude FROM list_of_location limit 50`。

```
CREATE OR REPLACE FUNCTION convertlatlon() RETURNS VOID AS $$
DECLARE rec RECORD;
BEGIN
    FOR rec IN SELECT id,longitude,latitude FROM list_of_location
    LOOP
    UPDATE list_of_location SET location= concat('SRID=4326;POINT(',rec.longitude,' ',rec.latitude,')') WHERE id=rec.id;    
    END LOOP;
END;
$$ LANGUAGE 'plpgsql' ; 
```

* * *

*   当我尝试在整个表上运行它时，PostgreSQL 似乎什么也没做。已经等了一个半小时。
*   消耗它正在运行的内核上 99% 的 CPU。
*   不会弹出任何其他 PostgreSQL 实例来利用其他内核（因为请求来自单个用户？）。
*   这是因为锁（行级别）吗？
*   如何规避这一点？

*PS我很确定这将作为题外话关闭。但是，我必须寻找答案。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:59:59.280

我不知道是什么原因造成的，但听起来可能在此操作中获得了锁。您可以轻松地验证这一点：

```
SELECT * FROM pg_locks; 
```

将告诉您当前使用了哪些锁。和

```
SELECT * FROM pg_stat_activities WHERE waiting; 
```

会告诉你，如果有锁，哪些事务正坐在那里空闲等待释放锁。那应该为您指明正确的方向。

> 不会弹出任何其他 PostgreSQL 实例来利用其他内核（因为请求来自单个用户？）。

这就是 postgres 的工作方式。单个会话将分拆一个后端。单个查询不做任何排序多进程或并发操作。

> 如何规避这一点？

你为什么要循环？我认为你可以一口气做到这一点。为什么不这样做：

```
UPDATE list_of_location 
SET location = ST_GeogFromText('POINT(' || longitude || ' ' || latitude || ')'); 
```

（假设这会给你正确的结果）

# php - 比较从 SQL 数据库中提取的 PHP 中的两个日期

> ID：11743342
> 
> 赞同：1
> 
> 时间：2012-07-31T15:15:04.017
> 
> 标签：php, sql, date

我知道 Stack Overflow 上有很多关于如何在 PHP 中比较两个日期的示例，但我无法让我的代码正常工作。

目前我有两个日期缓存日期和命中日期。我正在尝试设置它，如果缓存日期距命中日期超过 2 小时，它将重新缓存新信息。我目前有以这种格式存储在 MySQL 中的日期：`$lastcache = date("m.d.y G:i");`

我当前的代码只有大约一半的时间（由于某种原因主要是在晚些时候）是这样的：

```
$lastcache = $row['lastcache'];
$expiredate = date("m.d.y G:i", strtotime("-120 minutes"));

if( $expiredate > $lastcache){
    cache($input);      
}else{
    //do cool stuff
} 
```

我怎样才能更好地比较这两个日期，看看是否已经过去了超过 2 小时？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T15:20:11.410

这段代码非常适合我，用你的变量更新：

```
$interval = (strtotime(date("Y-m-d H:i:s")) - strtotime($lastcache) ) / 60; 
```

这将返回时间间隔，以分钟为单位。将数学添加到您想要的任何格式。

假设您将间隔结果保持在几分钟内，您只需执行以下操作：

```
if($interval >= 120) {...} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T15:41:00.273

请考虑使用 PHP 的日期/时间对象。文档可以在[这里找到](http://php.net/manual/en/book.datetime.php)

# c - 如何不在 C 中打印整数值

> ID：11743343
> 
> 赞同：-1
> 
> 时间：2012-07-31T15:15:04.283
> 
> 标签：c, printf

我有一个打印功能：

```
myprintf("%d ..... other_things_to_print"); 
```

*   我从许多不同的函数中调用这个 myprintf() 函数。

*   假设函数 func() 调用 myprintf() 但它没有为“%d”传递任何内容（在上面的 myprintf() 中显示为粗体）。

*   我不想打印零来代替这个**“%d”**

我怎样才能***避免***在这里打印***任何东西***来代替“%d”？

*我试过： '\b', ' ' - 但 myprintf() 正在打印这些字符的等效整数值。*

请就这个问题给我一些提示。

谢谢。

此致，

桑迪普·辛格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:27:26.580

如果您不想`%d`在没有为其提供参数时打印，则在函数内部使用`if()-else`结构`myprintf()`来不输出该位置。这是一个例子：

```
if( d_variable ) {
    printf("%d ..... other_things_to_print");
} else {
    printf("..... other_things_to_print");
} 
```

这就是`if-else`允许你做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T04:34:10.543

您可以为此目的使用 void 指针，如下所示。

```
#define ONE_INT        1
#define ONE_INT_ONE_STRING 2

struct print_format
{
    unsigned int type;
    void *data;
}

struct fomat_one_int
{
    int num;
}

struct fomat_one_int_one_Str
{
    int num;
    char *str;
}

.......

void myprintf(struct print_format *format)
{
    unsinged int format_type = 0;

    format_type = format->type;

    switch(format_type)
    {
        case ONE_INT:
        {
            struct format_one_int *f = NULL;
            f = (struct format_one_int *)fomat->data;
            printf("%d some string", f->num);
            break;
        }
        case ONE_INT_ONE_STRING:
        {
            struct fomat_one_int_one_Str *f = NULL;
            f = (struct fomat_one_int_one_Str *)fomat->data;
            printf("%d some string %s", f->num, f->str);
            break;
        }
        ......
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:25:53.037

而是传递一个指向 int 的指针。

如果指针为 NULL，则不打印 int；如果指针不为 NULL，则打印 int

```
foo(int *value, const char *txt) {
  if (value && txt) printf("%d %s\n", *value, txt);
  else if (value) printf("%d\n", value);
  else if (txt) printf("%s\n", txt);
  else printf("(no data)\n");
} 
```

你可以用不同的数据调用它

```
int x = 42; foo(&x, "x");
            foo(NULL, "NULL");
            foo(&x, NULL);
            foo(NULL, NULL); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-31T15:22:50.757

您可以更改 myprintf 以采用多个 args 参数`n`：

```
void myprintf(int n, int arg1, int arg2, int arg3) {
  if (n == 3) {
    printf("%d %d %d", arg1, arg2, arg3);
  } else if (n == 2) {
        printf("%d %d", arg1, arg2);
  } else if (n == 1) {
        printf("%d" , arg1);
  } else if (n == 0) {
        printf("no");
  }
} 
```

并定义一些宏：

```
#define myprint0() myprintf(0, -1, -1, -1)
#define myprint1(x) myprintf(1, x, -1, -1)
#define myprint2(x,y) myprintf(2, x, y, -1)
#define myprint3(x,y,z) myprintf(3, x, y, z) 
```

# c# - 如何在 C# 中使用 Windows 服务安排电子邮件任务？

> ID：11743345
> 
> 赞同：0
> 
> 时间：2012-07-31T15:15:06.420
> 
> 标签：c#, email, windows-services, windows-server-2008, scheduled-tasks

我正在创建一个通知任务。我有一个 Web 界面来创建任务。所以，我有两张表，一张是 NotificationToBeReleased，另一张是 Notifications。我想在服务器上运行一个 Windows 服务来查找所有的 deliveryDate 并开始向用户发送电子邮件并从 NotificationToBeReleased 中删除该行并进入 Notifications 表。

我是新手，良好的基本开始会对我有很大帮助！或任何建议也欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:23:33.027

要触发计划任务，请查看[Quartz.net](http://quartznet.sourceforge.net/)。

对于小型通知项目，您建议的解决方案（轮询数据库以获取交付日期）将在一定程度上起作用。当您需要检查任何问题时，问题就来了。例如，如果电子邮件发送失败会怎样？它是否应该离开该行并每分钟检查一次。如果电子邮件确实发出了但我们未能清除该行怎么办。用户被电子邮件淹没。

如果您追求可扩展性，那么轮询数据库以发送通知可能会成为一个问题。最好使用企业消息队列解决方案。[数据库作为队列反模式](http://mikehadlow.blogspot.co.uk/2012/04/database-as-queue-anti-pattern.html)

# android - 哪些云数据库提供商在简单/小型应用程序中受欢迎？

> ID：11743350
> 
> 赞同：2
> 
> 时间：2012-07-31T15:15:23.170
> 
> 标签：android, ios, database, amazon-s3, cloud

我目前正在开发一个应用程序，该应用程序使用数据库来存储用户输入的数据，并将 Web 服务作为应用程序和数据库之间的中介。当我上线时，数据库和 Web 服务需要由提供商托管（不能在设备本地）。

我对销售数百万份这个应用程序没有任何幻想，但是我想保持乐观，并计划一个下载量达到 10,000 的好案例。为了争论，假设每次加载时，在该实例期间传输 1 MB 的数据。我需要确保，如果我为该应用程序收取几美元，那么在几年的过程中，它最终不会让我花费超过每个用户的费用，从而使我破产。

我所知道的唯一真正的供应商是 Amazon Web Services/S3。还有其他更受欢迎和/或更经济的吗？或者那是最受欢迎/最有价值的路线？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:27:54.490

试试[mongolab](http://www.mongolab.com)，免费选项可以轻松满足您的需求。ps他们也有restful api

此列表还可以帮助找出不同的选项：[http ://www.mongodb.org/display/DOCS/Hosting+Center](http://www.mongodb.org/display/DOCS/Hosting+Center)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T11:47:13.370

你试过 NuoDB 吗？他们提供弹性可扩展的 SQL 云数据库。看看[http://www.nuodb.com/explore/sql-cloud-database-editions/](http://www.nuodb.com/explore/sql-cloud-database-editions/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:18:49.087

如果您获得 AWS 的预留实例，这需要长期承诺，它的价格非常便宜，几乎与使用您自己的硬件一样。不过，使用费是额外的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T08:49:21.757

听起来您需要一个提供满足您性能要求的持续免费增值计划的提供商。这种方式可能是经济的，因为不会有持续的成本。我知道 Xeround 的云 MySQL 服务有一个限制为 10MB 左右的免费计划，还有 EnterpriseDB for PostgreSQL 似乎有一个免费计划（我自己没有尝试过）。当然，对于这些类型的数据库服务，您需要将应用程序本身托管在各自的云（Amazon、RackSpace 等）中，而且这不会永远免费，我相信没有一个云提供商有永久免费计划 -将应用托管成本考虑在内。

# c - C - 循环输入

> ID：11743352
> 
> 赞同：3
> 
> 时间：2012-07-31T15:15:26.013
> 
> 标签：c, loops, area

我正在尝试学习 C，并且我编写了一个小程序来计算各种形状的面积。这是源代码：

```
#include "stdafx.h"

struct entry
{
    float x;
    float y;
};

void square()
{
    printf("\nPlease enter the size of one of the square's sides\n");

    struct entry sq;
    scanf_s("%f\n", &sq.x);

    printf("\nThe area of the square is %.2f\n\n", sq.x * sq.x);
}

void rectangle()
{
    printf("\nPlease enter the length and breadth of the rectangle\n");

    struct entry rec;
    scanf_s("%f\n", &rec.x);
    scanf_s("%f\n", &rec.y);

    printf("\nThe area of the rectangle is %.2f\n\n", rec.x * rec.y);
}

void triangle()
{
    printf("\nPlease enter the width and height of the triangle\n");

    struct entry tri;
    scanf_s("Width: %f\n", &tri.x);
    scanf_s("Height: %f\n", &tri.y);

    printf("\nThe area of the triangle is %.2f\n\n", (tri.x * tri.y)/2);
}

void circle()
{
    printf("\nPlease enter the radius of the circle\n");

    struct entry circ;
    scanf_s("%f\n", &circ.x);

    printf("\nThe area of the circle is %.2f\n\n", 3.14 * circ.x * circ.x);
}

void main()
{
    int input = 0;

    do
    {
        printf("---Area of a Shape---\n\n");
        printf("1\. Square\n");
        printf("2\. Rectangle\n");
        printf("3\. Triangle\n");
        printf("4\. Circle\n");
        printf("5\. Exit\n");
        printf("\n\n");

        printf("Please make a choice\n");
        scanf_s("%d", &input);

        switch(input)
        {
            case 1: square();
                    break;

            case 2: rectangle();
                    break;

            case 3: triangle();
                    break;

            case 4: circle();
                    break;

            case 5: printf("\n\nThank you for using this program!  Press enter to exit!\n");
                    break;

            default: printf("\nInvalid choice!\n\n");
                    break;
        }       
    }
    while(input != 5);

    getchar();
    getchar();
} 
```

该程序唯一的问题是，在输入边的大小以计算面积后，它会等待我输入另一个数字（做出选择），然后再显示答案。我不知道问题出在哪里。我认为在转移到另一个函数之前，C 会确保它执行手头的整个函数。你能帮我解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T15:19:21.193

在您的`scanf`格式中，

```
scanf_s("%f\n", &rec.x); 
```

the`'\n'`不代表文字`'\n'`，而是代表任意序列的空白字符。因此`scanf_s`调用不会结束，直到您在数字（和空格）之后输入一个非空格字符[输入可能不会发送到您的程序，直到您在此之后键入一个换行符]。只需`'\n'`从格式中删除。

# ios - 通过在 iPad 上测试应用程序的非常奇怪的问题

> ID：11743353
> 
> 赞同：0
> 
> 时间：2012-07-31T15:15:32.550
> 
> 标签：ios, xcode, debugging, xcode4.4

我在使用 xcode 测试我的应用程序构建时遇到了一个非常奇怪的问题。我启动 XCODE IDE 并连接我的 iPad，这是为测试而配置的。然后我按下播放按钮或使用快捷方式将应用程序部署到我的设备上。

但是，如果我想第二次测试应用程序（通常我按 CMD+R），什么也不会发生。只有一次我遇到错误（**等待应用程序启动超时**）。

在模拟器上一切正常。

我试图完全重新创建该项目，但没有任何成功。

他妈的是什么原因？

我正在运行 XCODE 4.4

有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:34:42.160

好的，我发现了这个问题，但这也很奇怪。我正在我的应用程序中使用 webview，并且图像被放置在那里。现在，如果我在那里使用 jpg 图像（隔行扫描），就会出现问题。如果我使用具有替代格式（如 png）的相同图像，并且它的文件大小是最大的倍，那么一切正常。

这有点奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:35:00.780

这其中的原因很多。大多数情况下，您的 iPad 上都会出现一些进程。只需重新启动您的 ipad，清理您的项目并重新启动。这应该照顾它。为了防止类似的问题进一步发生。确保在调试时启动新构建之前在 xCode 上停止应用程序（即：在单步执行断点期间）。并且尽量不要两次太快地启动同一个应用程序，这也会带来问题。

如果重新启动不起作用，那么这意味着您在项目中搞砸了一些东西。试着环顾四周你做了什么。作为最后的手段，构建一个新项目并将重要文件传输到那里。

# sql - 内联数据源（sqlcommand + 连接字符串 + 参数）在 ASP .net 中编译到哪里（它不在 ViewState 中）？

> ID：11743356
> 
> 赞同：1
> 
> 时间：2012-07-31T15:15:39.537
> 
> 标签：sql, compilation, location, inline

内联数据源（sqlcommand + 连接字符串 + 参数）在 ASP .net 中编译到哪里（它不在`ViewState`）？

所以当我查看页面的源代码时它不在HTML中，`ViewState`如果我反编译它也不是。那么它是否编译到与 aspx.vb/aspx.cs 文件相同的位置？

因此，在 aspx 文件中使用内联代码与在 aspx.vb/cs 文件中使用相同的查询相比，在安全性方面没有什么不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:54:22.260

ASP.NET 内联代码被编译成 dll 到`Temporary ASP.NET Files`文件夹，请参阅ASP.NET[编译的 dll](https://stackoverflow.com/questions/3508701/asp-net-compiled-dlls)

尽管我强烈建议不要留下任何没有格式化目的的内联代码，尤其是数据访问层。

至于您对安全性的关注，您的内联编码连接字符串对任何对网站文件夹具有读取权限的人以及`Temporary ASP.NET Files`对服务器上的文件夹具有读取权限的任何人都是可见的，但是，使用 IIS，它不会任何通过 http(s) 协议浏览您的网站的人都可以访问。

# r - 在绘图函数的 x 轴上设置 xlim 和中断

> ID：11743357
> 
> 赞同：0
> 
> 时间：2012-07-31T15:15:49.357
> 
> 标签：r, plot

我有一个这样的df：

```
Value   Time
10      2012-06-23 01:00:00
20      2012-06-23 02:00:00 
```

时间被格式化为`as.PoSIXct(df$Time, format="%Y-%m-%d %H:%M:%S")`

我正在尝试将轴中的中断设置为每 2 小时显示一次 xaxis 刻度线，如下所示：

```
plot(df$Time, df$Value, ylim(0,100), xlim(seq(c("2012-06-23 01:00:00", "2012-06-23 23:00:00", 2))) 
```

我得到无效的 xlim 值。有任何想法吗？

我试过这条线，还是不行：

```
plot(df$Time, df$Value, col="red", type="l", xlab="Date", ylab="% Memory Utilization", xlim=seq(c(as.POSIXct("2012-06-23 01:00:00"), as.POSIXct("2012-06-23 23:00:00"), by="hour"))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-25T23:21:43.833

即使正确指定 xlim = 并使用 POSIXlt 格式的日期，我也遇到了类似的问题。我怀疑问题是 R 对日期不是很友好。我用等效的方法解决了它：

```
my.limits <- c("2012-06-23 01:00:00", "2012-06-23 23:00:00")  # example data
my.limits <- as.numeric(my.limits)  # new step to convert data
plot(..., xlim = my.limits, ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:34:03.317

我看到了一些问题，首先是`xlim`参数不是函数，应该是`xlim=`而不是`xlim(`，但是由于括号不匹配，我认为这是一个错字，最好复制并粘贴您尝试过的实际代码（以及有错误、警告、输出等）。

其次，seq 函数被传递 2 个字符串，而不是 2 个日期，您需要将它们显式转换为日期以传递给`seq`函数，以便调用正确的方法（并且您可能需要指定 2 指的是小时，不是分钟、天等）。

如果您给我们一个可重现的示例（用于`dput`创建我们可以复制和粘贴的数据）和/或实际输出和消息，那么我们可以更轻松地为您提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:38:27.657

首先，您应该尝试将您的问题分解为基本问题，即`xlim`声明，而不是与`plot`. 你实际上在用`seq`你提供给 xlim 的东西做什么：

```
> seq(c("2012-06-23 01:00:00", "2012-06-23 23:00:00", 2))
[1] 1 2 3 
```

显然，这就是问题所在，也是您接下来要关注的地方。

其次，您可以非常具体地搜索有关按小时在 R 中创建日期序列的信息，这将使您回答这个[问题](https://stackoverflow.com/questions/10887923/hourly-date-sequence-in-r)。将其应用于您的问题是微不足道的：

```
seq(as.POSIXct("2012-06-23 01:00:00"), as.POSIXct("2012-06-23 23:00:00"), by="hour") 
```

这使：

```
 [1] "2012-06-23 01:00:00 MDT" "2012-06-23 02:00:00 MDT" "2012-06-23 03:00:00 MDT" "2012-06-23 04:00:00 MDT"
# all the other rows...
[21] "2012-06-23 21:00:00 MDT" "2012-06-23 22:00:00 MDT" "2012-06-23 23:00:00 MDT" 
```

您还错误地为绘图函数指定了参数。你应该使用`xlim=`，而不是`xlim(...)`。

# ruby-on-rails-3 - Rails3 多选表单和数据库字段

> ID：11743359
> 
> 赞同：0
> 
> 时间：2012-07-31T15:15:55.367
> 
> 标签：ruby-on-rails-3, forms, associations, multi-select

我有一个应用程序，我正在对模型进行 collection_select。我需要能够从 SpecialEquipment 中选择多个 ID。

这是我的选择声明：

```
<%= f.collection_select(:special_equipment_id, SpecialEquipment.all, :id, :name,  {}, {:multiple => true, :class => 'select'})%> 
```

我正在使用 select2 gem 使 UI 更具吸引力，它允许我选择多个 id，但是当表单写入数据库时​​，它只写入第一个选择。

```
1.9.3p194 :004 > Call.last.special_equipment
  Call Load (0.9ms)  SELECT "calls".* FROM "calls" ORDER BY "calls"."id" DESC LIMIT 1
  SpecialEquipment Load (0.3ms)  SELECT "special_equipments".* FROM "special_equipments" WHERE "special_equipments"."id" = 1 LIMIT 1
 => #<SpecialEquipment id: 1, name: "O2", created_at: "2012-06-27 21:43:41", updated_at: "2012-06-27 21:43:41"> 
```

我究竟做错了什么？我的关联设置如下：

Call.rb belongs_to :special_equipment

Special_Equipment.rb has_many :calls

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:14:41.803

这是通过使用 has_many :through 关联并将表单输入写入连接表来解决的。我现在可以多选并正确保存记录。

# objective-c - 在不知道文件编码的情况下，objectivec 中的内存映射

> ID：11743364
> 
> 赞同：1
> 
> 时间：2012-07-31T15:16:08.477
> 
> 标签：objective-c, macos, encoding, character-encoding

我有一个程序可以扫描一个大文件以查找一些文本。这里加载文件的两行将其映射到内存中，以避免在它是一个大文件时完全加载它。

```
NSData *buf = [NSData dataWithContentsOfFile:sourceFile options:NSDataReadingMappedIfSafe error:&err];
NSMutableString *string = [[NSMutableString alloc] initWithBytesNoCopy:(void *)buf.bytes length:buf.length encoding:NSASCIIStringEncoding freeWhenDone:NO]; 
```

鉴于我不知道编码文件有什么，我如何在不提供 NSASCIIStringEncoding 的情况下打开它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:21:25.257

好吧，IMO 的重点是，如果不指定应该使用哪种编码来解释这些字节，就不能从某些字节创建字符串。

你不知道，这很好，操作系统也不知道，那根本行不通。将使用编码，因此最好指定一个。

另一方面，如果您真的对此感到困扰并预见到需要支持各种编码，请记住，如果您指定了错误的编码，那么字符串创建将失败（您得到 nil）。如果发生这种情况，您可以尝试使用不同的编码，依此类推，直到找到适合的编码。（只要您的数据完全可以表示为字符串）。

# c# - C# File.AppendText 到下一行

> ID：11743367
> 
> 赞同：0
> 
> 时间：2012-07-31T15:16:14.610
> 
> 标签：c#, compact-framework

我有这个方法

```
TextReader tr = new StreamReader(@"\IPSM\DeviceConfig.EXM");    
int NumOFLines = 6;    
String[] ListLines = new string[NumOFLines];    
for (int i = 1; i < NumOFLines; i++)
{    
    ListLines[i] = tr.ReadLine();    
}    
using (StreamWriter output = File.AppendText(@"\temp\exm.txt"))    
{    
    output.Write(ListLines[5]);    
}    
tr.Close();    
return; 
```

读取它们附加到另一个文本文件的文本文件的第 5 行，输出为

```
Line1    
Line2LINE5 //from the other text file 
```

我想

```
Line1    
Line2    
LINE5 //from the other text file 
```

如何让它输出到下一行我仅限于 Compact Framework

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:23:31.450

您可以使用[WriteLine](http://msdn.microsoft.com/library/7ack4zyt)用 CrLf 写一行。

```
 using (StreamWriter output = File.AppendText(@"\temp\exm.txt"))     
        {     
            output.WriteLine(ListLines[5]);     
        } 
```

因此，您的文件始终以新行结尾（删除或编辑现有文件以确保它）。如果不能，请尝试以下方法：

```
 using (StreamWriter output = File.AppendText(@"\temp\exm.txt"))     
        {     
            output.WriteLine();
            output.Write(ListLines[5]); 
        } 
```

WriteLine 应该在 CF 上可用，如果没有，您可以将换行符附加到 Write 的字符串参数

```
 output.Write(ListLines[5] + Environment.NewLine); 
```

或者

```
 output.Write(ListLines[5] + "\r\n"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:27:02.217

如果您查看此链接中的示例，它显示了“Environment.NewLine”的使用，我不确定您是否可以在紧凑框架上使用它，但值得一试。[http://msdn.microsoft.com/en-us/library/ms143356.aspx](http://msdn.microsoft.com/en-us/library/ms143356.aspx)

# c# - xml搜索节点问题

> ID：11743368
> 
> 赞同：0
> 
> 时间：2012-07-31T15:16:20.920
> 
> 标签：c#, xml

我有以下 XML 结构：

```
<html xmlns ="http://www.w3.org/1999/xhtml" >
 <head>
  . .
 </head>
 <body>
  <div id="1"></div>
  <div id="2"></div>
 </body>
</html> 
```

我使用 linq to xml 访问 id = "2" 的 div。我在 XDocument 中加载了文档：

```
 XDocument  ndoc = XDcoument.load(path);
   XElement n = new XElement("name","value");
   XNamespace xn = "http://www.w3.org/1999/xhtml";

ndoc.Descendants(xn + "div").Single(p => p.Attribute("id").Value == "1").Add(n);

                             OR

ndoc.Descendants("div").Single(p => p.Attribute("id").Value == "1").Add(n); 
```

我尝试了两种情况，每种情况都有一个异常序列不包含任何元素。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:51:47.863

对我来说，你的例子（有点修改）工作正常：

```
 var xml = @"<html xmlns ='http://www.w3.org/1999/xhtml' >
 <head>
 </head>
 <body>
  <div id='1'></div>
  <div id='2'></div>
 </body>
</html>";
            XDocument xd = XDocument.Parse(xml);

            XElement n = new XElement("name", "value");
            XNamespace xn = "http://www.w3.org/1999/xhtml";

            xd.Descendants(xn + "div").Single(p => p.Attribute("id").Value == "1").Add(n);

            Console.WriteLine(xd); 
```

输出

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head></head>
  <body>
    <div id="1">
      <name xmlns="">value</name>
    </div>
    <div id="2"></div>
  </body>
</html> 
```

所以我真的不明白你的问题。请检查您是否复制所有正确=）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:27:56.597

这应该工作

```
XNamespace xn = XNamespace.Get("http://www.w3.org/1999/xhtml");
ndoc.Descendants(xn + "div").Single(p => p.Attribute("id").Value == "1").Add(n); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:32:19.253

这将起作用

```
XDocument ndoc =XDcoument.load(path);
XElement n = new XElement("name", "value");
XNamespace xn = "http://www.w3.org/1999/xhtml";

var item = ndoc.Descendants(xn + "div").FirstOrDefault(p => p.Attribute("id").Value == "1");
if(item!=null)
    item.Add(n); 
```

使用`Single`方法，如果你确定你的表达中只会出现一个元素。如果有任何机会，可能会出现多个元素，请使用`FirstOrDefault`()

请记住，这`Descendants()`将为您提供任何子级别（子级、大子级等）具有匹配条件的所有元素

`Elements()`方法只会给你直接（直接）孩子。

所以要小心使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T17:45:28.220

你可以试一试这个[Xml 库](https://github.com/ChuckSavage/XmlLib/)，它应该很容易得到它：

```
XElement root = XElement.Load(path);
XElement div = root.XPathElement("//div[@id={0}]", 1);
if(null != div) // which it shouldn't be
    div.Add(n); 
```

# python - Python：扫描 raw_input

> ID：11743372
> 
> 赞同：1
> 
> 时间：2012-07-31T15:16:38.067
> 
> 标签：python

我想从 raw_input() 获取多个命令。我一直在使用这个：

```
reply = raw_input(">").split(' ')

command = reply[0]

file = reply[1] 
```

但这对我来说似乎很hacky有没有更好的方法在python中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:18:53.783

我相信最pythonic的方式是

```
command,file = raw_input(">").split() 
```

使用元组解包而不是索引

在 Python3.0+ 中，您可以使用

```
command,file,*everything_else = raw_input(">").split()#untested 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:20:35.280

这是读取多个命令的完全可接受的方式。如果不使用拆分，真的没有办法做到这一点。唯一需要注意的是空格*只能*描绘参数的结尾，因为它会在任何空格上分割。

编辑：如果您遇到多个空格的问题，请使用`split()`而不是`split(' ')`. 这将需要多个空格作为一个拆分。

# perl - 理解这个对象创建语句

> ID：11743375
> 
> 赞同：1
> 
> 时间：2012-07-31T15:16:43.517
> 
> 标签：perl, object

我对 Perl 不太熟悉，但我将它用于我要编写的简单脚本。该脚本将与 Qualys 交互，因此在查找有关 Qualys API 的信息时，我在查看他们的示例代码时发现了此语句。我已将它放在 Pastebin.com（[此处](http://pastebin.com/VMg2dysJ)）上，因此您无需下载即可查看。如果出于某种原因您确实想自己下载它，[这里](https://community.qualys.com/community/developer)是我为那些希望能够下载源代码的人获得它的页面的链接（它是“获取地图”之一）。

无论如何，这是让我有点困惑的声明（第 261 行）：

```
$request = new HTTP::Request GET => $url; 
```

我对声明的`new`和`GET => $url`部分感到困惑。

1.  我想我主要了解`new`声明的部分发生了什么，但是如果有人可以解释如何`HTTP::Request`创建一个`LWP::UserAgent`有助于澄清这一行的新内容（我查看了 CPAN 上的 LWP::UserAgent，但是“KEY/DEFAULT “他们在`new`子程序解释下的表格对我来说毫无意义）。
2.  我真的不知道`GET => $url`声明部分发生了什么。我的猜测是它在其中一个中分配了一个值，`HTTP::Request`但`LWP::UserAgent`我找不到任何信息来支持这个想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T15:19:08.460

给定的行相当于

```
$request = HTTP::Request->new(GET => $url); 
```

也可以写成

```
$request = HTTP::Request->new('GET', $url); 
```

该示例使用了间接方法语法。

`HTTP::Request`和之间的联系在[CPAN 文档](http://search.cpan.org/~gaas/HTTP-Message-6.03/lib/HTTP/Request.pm)`LWP::UserAgent`中概述如下：

```
require HTTP::Request;
$request = HTTP::Request->new(GET => 'http://www.example.com/');

$ua = LWP::UserAgent->new;
$response = $ua->request($request); 
```

所以`HTTP:.Request->new(...)`创建了一个可以由*用户代理执行的新**请求*

# python - 通过 xmlrpc 与 supervisord 交谈

> ID：11743378
> 
> 赞同：0
> 
> 时间：2012-07-31T15:16:47.400
> 
> 标签：python, xml-rpc, xmlrpclib, supervisord

我正在尝试`supervisor`通过 xmlrpc 与之交谈。基于[`supervisorctl`](https://github.com/Supervisor/supervisor/blob/master/supervisor/supervisorctl.py)（尤其是[这一行](https://github.com/Supervisor/supervisor/blob/master/supervisor/options.py#L1512)），我有以下内容，它似乎应该可以工作，而且确实可以工作，只要它连接到足以从服务器接收错误：

```
#socketpath is the full path to the socket, which exists
# None and None are the default username and password in the supervisorctl options
In [12]: proxy = xmlrpclib.ServerProxy('http://127.0.0.1', transport=supervisor.xmlrpc.SupervisorTransport(None, None, serverurl='unix://'+socketpath))

In [13]: proxy.supervisor.getState() 
```

导致此错误：

```
---------------------------------------------------------------------------
ProtocolError                             Traceback (most recent call last)
/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/<ipython-input-13-646258924bc2> in <module>()
----> 1 proxy.supervisor.getState()

/usr/local/lib/python2.7/xmlrpclib.pyc in __call__(self, *args)
   1222         return _Method(self.__send, "%s.%s" % (self.__name, name))
   1223     def __call__(self, *args):
-> 1224         return self.__send(self.__name, args)
   1225
   1226 ##

/usr/local/lib/python2.7/xmlrpclib.pyc in __request(self, methodname, params)
   1576             self.__handler,
   1577             request,
-> 1578             verbose=self.__verbose
   1579             )
   1580

/home/marcintustin/webapps/django/oneclickcosvirt/lib/python2.7/site-packages/supervisor/xmlrpc.pyc in request(self, host, handler, request_body, verbose)
    469                                           r.status,
    470                                           r.reason,
--> 471                                           '' )
    472         data = r.read()
    473         p, u = self.getparser()

ProtocolError: <ProtocolError for 127.0.0.1/RPC2: 401 Unauthorized> 
```

这是`unix_http_server`部分`supervisord.conf`：

```
[unix_http_server]
file=/home/marcintustin/webapps/django/oneclickcosvirt/tmp/supervisor.sock   ; (the path to the socket file)
;chmod=0700                 ; socket file mode (default 0700)
;chown=nobody:nogroup       ; socket file uid:gid owner
;username=user              ; (default is no username (open server))
;password=123               ; (default is no password (open server)) 
```

因此，应该没有身份验证问题。

似乎我的代码在所有材料方面都与 中的等效代码相同`supervisorctl`，但`supervisorctl`实际上有效。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T16:19:28.220

您的代码看起来基本正确。我正在使用 Python 2.7 运行 Supervisor 3.0，并给出以下信息：

```
import supervisor.xmlrpc
import xmlrpclib

p = xmlrpclib.ServerProxy('http://127.0.0.1',
        transport=supervisor.xmlrpc.SupervisorTransport(
            None, None,
            'unix:///home/lars/lib/supervisor/tmp/supervisor.sock'))

print p.supervisor.getState() 
```

我得到：

```
{'statename': 'RUNNING', 'statecode': 1} 
```

您确定您正在运行的 Supervisor 实例正在使用您认为的配置文件吗？如果你`supervisord`在调试模式下运行，你看到连接了吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-07T16:15:20.507

我不使用 xmlrpclib 中的 ServerProxy，而是使用 Server 类，并且不必定义任何到套接字的传输或路径。不确定您的目的是否需要，但这是我经常使用的瘦客户端。它几乎直接来自文档。

```
python -c "import xmlrpclib;\
supervisor_client = xmlrpclib.Server('http://localhost:9001/RPC2');\
print( supervisor_client.supervisor.stopProcess(<some_proc_name>) )" 
```

# javascript - 我可以用jQuery画一条线吗？

> ID：11743386
> 
> 赞同：9
> 
> 时间：2012-07-31T15:17:14.107
> 
> 标签：javascript, jquery, css, drawing

我有一个网络应用程序，我希望用户通过以下方式绘制一条线：当他单击**Point1**并移动鼠标时，将线从**Point1**绘制到**当前鼠标位置**，然后单击**Point2**绘制最终**从 Point1 到 Point2 的**线。

如何使用 jQuery 和/或其插件之一来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T16:14:29.787

已接受的挑战。

我尝试使用 CSS 转换和一堆 Javascript 中的数学来做到这一点 - 半小时后我有了这个：

[http://jsfiddle.net/VnDrb/2/](http://jsfiddle.net/VnDrb/2/)

在灰色方块上单击 2 次，应绘制一条线。当角度> 45度时，仍然有一个小错误会画线错误。也许其他人知道如何解决这个问题。也许不是使用 Math.asin (arcsinus)，而是使用其他三角函数，但我真的不擅长。我想即使有一个小错误我也会发布它，我认为这对你来说是一个好的开始。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-15T00:04:19.830

这个周末我尝试了许多不同的方法，最适合我的解决方案来自 Adam Sanderson： http: [//monkeyandcrow.com/blog/drawing_lines_with_css3/](http://monkeyandcrow.com/blog/drawing_lines_with_css3/)

他的演示在这里： http: [//monkeyandcrow.com/samples/css_lines/](http://monkeyandcrow.com/samples/css_lines/)

它的核心很简单，总是好的。

```
div.line{
  transform-origin: 0 100%;
  height: 3px; /* Line width of 3 */
  background: #000; /* Black fill */
}

function createLine(x1,y1, x2,y2){
  var length = Math.sqrt((x1-x2)*(x1-x2) + (y1-y2)*(y1-y2));
  var angle  = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI;
  var transform = 'rotate('+angle+'deg)';

    var line = $('<div>')
      .appendTo('#page')
      .addClass('line')
      .css({
        'position': 'absolute',
        'transform': transform
      })
      .width(length)
      .offset({left: x1, top: y1});

  return line;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T15:20:25.873

~~你不能用 jQuery 和经典的 HTML 来做到这一点。~~

1.  您可以使用 SVG（IE8 的 +svgweb- [http://code.google.com/p/svgweb/](http://code.google.com/p/svgweb/)）来动态创建 SVG。jQuery + svgweb 完美运行，您只需要知道如何创建 SVG 节点并且您只需要 jquerify 这个节点。在大多数情况下查询后只使用一种方法`attr()`

2.  您可以使用 Raphael [http://raphaeljs.com/](http://raphaeljs.com/)（基于 SVG 和 VML）来实现

3.  您可以使用 Canvas（对于 IE8- 为[http://flashcanvas.net/ ）](http://flashcanvas.net/)

* * *

对于 SVG 编程将是这样的：

1.  创建第一个点的时刻：您创建空线`var Line`（此点坐标也是`x1`和`y1`）

2.  然后你绑定`mousemove`重新绘制Line`x2`的`y2`属性

3.  冻结最后一行位置`mousedown`后打开。`mousemove`

* * *

**更新**

您可以使用 CSS/JS 来完成，但主要问题在于 IE8- 的计算，它只有用于转换的矩阵过滤器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-28T16:51:19.717

一段时间以来一直在使用它的修改版本。效果很好。

[http://www.ofdream.com/code/css/xline2.php](http://www.ofdream.com/code/css/xline2.php)

因此，在第一次单击时，将其拖放并作为占位符 div 对象，可能是一个小圆圈，然后在他们移动鼠标时继续重画一条线，或者在他们第二次单击时绘制它，使用原始占位符作为指导。

我最近为此制作了另一个辅助函数，因为我的工具涉及移动线条：

```
function setLinePos(x1, y1, x2, y2, id) {
    if (x2 < x1) {
        var temp = x1;
        x1 = x2;
        x2 = temp;
        temp = y1;
        y1 = y2;
        y2 = temp;
    }
    var line = $('#line' + id);
    var length = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));
    line.css('width', length + "px");
    var angle = Math.atan((y2 - y1) / (x2 - x1));
    line.css('top', y1 + 0.5 * length * Math.sin(angle) + "px");
    line.css('left', x1 - 0.5 * length * (1 - Math.cos(angle)) + "px");
    line.css('-moz-transform', "rotate(" + angle + "rad)");
    line.css('-webkit-transform', "rotate(" + angle + "rad)");
    line.css('-o-transform', "rotate(" + angle + "rad)");

 } 
```

那是 jquery 版本，在这个迭代中我没有 IE 要求，所以我忽略了它。我可以很容易地适应原始功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-31T07:58:10.523

班上

```
function getXY(evt, element) {
    var rect = element.getBoundingClientRect();
    var scrollTop = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop;
    var scrollLeft = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft;
    var elementLeft = rect.left + scrollLeft;
    var elementTop = rect.top + scrollTop;

    x = evt.pageX - elementLeft;
    y = evt.pageY - elementTop;
    return { x: x, y: y };
}
var LineDrawer = {
    LineHTML: `<div style="cursor: pointer;transform-origin:center; position:absolute;width:200px;height:2px; background-color:blue"></div>`,
    isDown: false,
    pStart: {},
    pCurrent :{},
    containerID: "",
    JLine: {},
    angle: 0,
    afterLineCallback: null,
    Init: function (containerID, afterLineCallback) {
        LineDrawer.containerID = containerID;
        LineDrawer.afterLineCallback = afterLineCallback;
        LineDrawer.JLine = $(LineDrawer.LineHTML).appendTo("#" + LineDrawer.containerID);
        LineDrawer.JLine.css("transform-origin", "top left");
        LineDrawer.JLine.hide();
        //LineDrawer.JLine.draggable({ containment: "#" + LineDrawer.containerID });
        $("#" + LineDrawer.containerID).mousedown(LineDrawer.LineDrawer_mousedown);
        $("#" + LineDrawer.containerID).mousemove(LineDrawer.LineDrawer_mousemove);
        $("#" + LineDrawer.containerID).mouseup(LineDrawer.LineDrawer_mouseup);
    },
    LineDrawer_mousedown: function (e) {
        if (e.target === LineDrawer.JLine[0]) return false;
        LineDrawer.isDown = true;
        let p = LineDrawer.pStart = getXY(e, e.target);
        LineDrawer.JLine.css({ "left": p.x, "top": p.y, "width": 1});
        LineDrawer.JLine.show();
    },
    LineDrawer_mousemove: function (e) {
        if (!LineDrawer.isDown) return;
        LineDrawer.pCurrent = getXY(e, document.getElementById("jim"));
        let w = Math.sqrt(((LineDrawer.pStart.x - LineDrawer.pCurrent.x) * (LineDrawer.pStart.x - LineDrawer.pCurrent.x)) + ((LineDrawer.pStart.y - LineDrawer.pCurrent.y) * (LineDrawer.pStart.y - LineDrawer.pCurrent.y)));
        LineDrawer.JLine.css("width", w - 2);
        LineDrawer.angle = Math.atan2((LineDrawer.pStart.y - LineDrawer.pCurrent.y), (LineDrawer.pStart.x - LineDrawer.pCurrent.x)) * (180.0 / Math.PI);
        //the below ensures that angle moves from 0 to -360
        if (LineDrawer.angle < 0) {
            LineDrawer.angle *= -1;
            LineDrawer.angle += 180;
        }
        else LineDrawer.angle = 180 - LineDrawer.angle;
        LineDrawer.angle *= -1;

        LineDrawer.JLine.css("transform", "rotate(" + LineDrawer.angle + "deg");

    },
    LineDrawer_mouseup: function (e) {
        LineDrawer.isDown = false;
        if (LineDrawer.afterLineCallback == null || LineDrawer.afterLineCallback == undefined) return;
        LineDrawer.afterLine(LineDrawer.angle, LineDrawer.pStart, LineDrawer.pCurrent);
    },
}; 
```

用法：

```
var ECApp = {
    start_action: function () {
        LineDrawer.Init("jim", ECApp.afterLine);            
    },
    afterLine(angle, pStart, pEnd) {
        //$("#angle").text("angle : " + angle);
        let disp = "angle = " + angle;
        disp += " Start = " + JSON.stringify(pStart) + " End = " + JSON.stringify(pEnd);
        //alert(disp);
        $("#angle").text("angle : " + disp);
    }
}
$(document).ready(ECApp.start_action); 
```

HTML

```
<div class="row">
<div class="col">
    <div id="jim" style="position:relative;width:1200px;height:800px;background-color:lightblue;">            
    </div>
</div> 
```

# javascript - 检查数组是否为空或存在

> ID：11743392
> 
> 赞同：474
> 
> 时间：2012-07-31T15:17:28.490
> 
> 标签：javascript, php, jquery, arrays

第一次加载页面时，我需要检查是否有图片`image_array`并加载最后一张图片。

否则，我禁用预览按钮，提醒用户按下新图像按钮并创建一个空数组来放置图像；

问题是一直`image_array`在`else`火灾中。如果存在数组 - 它只是覆盖它，但警报不起作用。

```
if(image_array.length > 0)
    $('#images').append('<img src="'+image_array[image_array.length-1]+'" class="images" id="1" />');
else{
    $('#prev_image').attr('disabled', 'true');
    $('#next_image').attr('disabled', 'true');
    alert('Please get new image');
    var image_array = [];
} 
```

更新在加载 html 之前，我有这样的事情：

```
<?php if(count($images) != 0): ?>
<script type="text/javascript">
    <?php echo "image_array = ".json_encode($images);?>
</script>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：630
> 
> 时间：2012-07-31T15:30:42.330

```
if (typeof image_array !== 'undefined' && image_array.length > 0) {
    // the array is defined and has at least one element
} 
```

您的问题可能是由于隐式全局变量和变量提升的混合而发生的。确保`var`在声明变量时使用：

```
<?php echo "var image_array = ".json_encode($images);?>
// add var  ^^^ here 
```

然后确保您以后不会意外地重新声明该变量：

```
else {
    ...
    image_array = []; // no var here
} 
```

* * *

## 回答 #2

> 赞同：283
> 
> 时间：2014-01-05T22:43:18.750

# 检查数组是否为空

现代方式，ES5+：

```
if (Array.isArray(array) && array.length) {
    // array exists and is not empty
} 
```

一种老派的方式：

```
typeof array != "undefined"
    && array != null
    && array.length != null
    && array.length > 0 
```

一种紧凑的方式：

```
if (typeof array != "undefined" && array != null && array.length != null && array.length > 0) {
    // array exists and is not empty
} 
```

CoffeeScript 方式：

```
if array?.length > 0 
```

* * *

## 为什么？

**案例未定义**
未定义变量是您尚未为其分配任何内容的变量。

```
let array = new Array();     // "array" !== "array"
typeof array == "undefined"; // => true 
```

**案例 Null**
一般来说，null 是缺少值的状态。例如，当您错过或未能检索某些数据时，变量为空。

```
array = searchData();  // can't find anything
array == null;         // => true 
```

**Case Not an Array**
Javascript 有一个动态类型系统。这意味着我们不能保证一个变量持有什么类型的对象。我们有可能不是在与`Array`.

```
supposedToBeArray =  new SomeObject();
typeof supposedToBeArray.length;       // => "undefined"

array = new Array();
typeof array.length;                   // => "number" 
```

**Case Empty Array**
现在，由于我们测试了所有其他可能性，我们正在讨论`Array`. 为了确保它不是空的，我们询问它所持有的元素数量，并确保它有多个元素。

```
firstArray = [];
firstArray.length > 0;  // => false

secondArray = [1,2,3];
secondArray.length > 0; // => true 
```

* * *

## 回答 #3

> 赞同：76
> 
> 时间：2016-02-22T19:27:09.363

怎么样（ECMA 5.1）：

```
if(Array.isArray(image_array) && image_array.length){
  // array exists and is not empty
} 
```

* * *

## 回答 #4

> 赞同：53
> 
> 时间：2016-06-21T20:04:11.543

这就是我使用的。第一个条件涵盖了truthy，它同时具有null 和undefined。第二个条件检查一个空数组。

```
if(arrayName && arrayName.length > 0){
    //do something.
} 
```

或者感谢 tsemer 的评论，我添加了第二个版本

```
if(arrayName && arrayName.length) 
```

然后我在 Firefox 中使用 Scratchpad 对第二个条件进行了测试：

```
var array1;
var array2 = [];
var array3 = ["one", "two", "three"];
var array4 = null;

console.log(array1);
console.log(array2);
console.log(array3);
console.log(array4);

if (array1 && array1.length) {
  console.log("array1! has a value!");
}

if (array2 && array2.length) {
  console.log("array2! has a value!");
}

if (array3 && array3.length) {
  console.log("array3! has a value!");
}

if (array4 && array4.length) {
  console.log("array4! has a value!");
}
```

***这也证明了这一点`if(array2 && array2.length)`并且`if(array2 && array2.length > 0)`完全相同***

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2020-03-19T07:21:16.220

# [可选链](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining)

随着可选链提案达到第 4 阶段并获得更广泛的支持，有一种非常优雅的方法可以做到这一点

```
if(image_array?.length){

  // image_array is defined and has at least one element

} 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2012-07-31T15:21:48.113

你应该使用：

```
 if (image_array !== undefined && image_array.length > 0) 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2012-07-31T15:22:31.700

如果你想测试是否已经定义了图像数组变量，你可以这样做

```
if(typeof image_array === 'undefined') {
    // it is not defined yet
} else if (image_array.length > 0) {
    // you have a greater than zero length array
} 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2018-06-08T10:38:23.243

JavaScript

```
( typeof(myArray) !== 'undefined' && Array.isArray(myArray) && myArray.length > 0 ) 
```

Lodash & 下划线

```
( _.isArray(myArray) && myArray.length > 0 ) 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2014-06-02T16:26:05.440

您可以使用 jQuery`isEmptyObject()`来检查数组是否包含元素。

```
var testArray=[1,2,3,4,5]; 
var testArray1=[];
console.log(jQuery.isEmptyObject(testArray)); //false
console.log(jQuery.isEmptyObject(testArray1)); //true 
```

来源：[https ://api.jquery.com/jQuery.isEmptyObject/](https://api.jquery.com/jQuery.isEmptyObject/)

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-09-24T14:35:43.810

如果不存在则不会导致异常并转换为布尔值的简单方法：

```
!!array 
```

例子：

```
if (!!arr) {
  // array exists
} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2020-09-21T23:52:53.387

最好的检查是：

```
 let someArray: string[] = [];
    let hasAny1: boolean = !!someArray && !!someArray.length;
    let hasAny2: boolean = !!someArray && someArray.length > 0; //or like this
    console.log("And now on empty......", hasAny1, hasAny2); 
```

查看完整的示例列表： [![代码示例](../Images/dd930ef2e7848c0821156ef0cfa52ab0.png)](https://i.stack.imgur.com/rjhpw.png) [![结果](../Images/1a11d6c05de8bc785b314fdbbfe527fa.png)](https://i.stack.imgur.com/ocxjg.png)

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2018-03-07T16:24:34.073

这个怎么样 ？检查未定义数组的长度可能会引发异常。

```
if(image_array){
//array exists
    if(image_array.length){
    //array has length greater than zero
    }
} 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2017-06-03T09:25:22.277

使用[undescore](http://underscorejs.org/#isArray)或[lodash](https://lodash.com/docs/4.17.4#isArray)：

`_.isArray(image_array) && !_.isEmpty(image_array)`

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-04-03T17:46:47.200

我在 Javascript 中经常遇到这个问题。对我来说，最好的方法是在检查长度之前进行非常广泛的检查。我在此问答中看到了其他一些解决方案，但我希望能够检查其中一个`null`或`undefined`任何其他错误值。

```
if(!array || array.length == 0){
    console.log("Array is either empty or does not exist")
} 
```

这将首先检查`undefined`、`null`或其他错误值。如果其中任何一个为真，它将完成布尔值，因为这是一个`OR`. 然后可以检查风险更大的检查`array.length`，如果数组未定义，可能会出错。如果`array`is`undefined`或将永远无法达到`null`，因此条件的顺序非常重要。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-01-29T10:47:29.777

如果您没有将变量声明为数组，则可以创建一个检查：

```
if(x && x.constructor==Array && x.length){
   console.log("is array and filed");
}else{
    var x= [];
    console.log('x = empty array');
} 
```

这将检查变量 x 是否存在，如果存在，则检查它是否是填充数组。否则它会创建一个空数组（或者你可以做其他事情）；

如果您**确定**创建了一个数组变量，则可以进行简单检查：

```
var x = [];

if(!x.length){
    console.log('empty');
} else {
    console.log('full');
} 
```

您可以[在此处查看我的小提琴，](http://jsfiddle.net/dqtngu6h/1/)其中显示了检查数组的最可能方法。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-07-13T23:36:44.227

对我来说，当我将一些高评价的答案放入 jsfiddle 时，它​​们肯定“有效”，但是当我有一个动态生成的数组列表数量时，答案中的很多代码对我不起作用。

**这就是为我工作的。**

```
var from = [];

if(typeof from[0] !== undefined) {
  //...
} 
```

请注意，未定义周围没有引号，我不在意长度。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-07-15T04:29:15.503

> 以下是我包装在一个函数中的解决方案，该函数还会引发错误，以管理对象范围和传递给函数的所有可能数据类型的几个问题。

这是我用来检查这个问题的小提琴（[来源](https://jsfiddle.net/mingsai/8oub4L75/)）

```
var jill = [0];
var jack;
//"Uncaught ReferenceError: jack is not defined"

//if (typeof jack === 'undefined' || jack === null) {
//if (jack) {
//if (jack in window) {
//if (window.hasOwnP=roperty('jack')){
//if (jack in window){

function isemptyArray (arraynamed){
    //cam also check argument length
  if (arguments.length === 0) { 
    throw "No argument supplied";
  }

  //console.log(arguments.length, "number of arguments found");
  if (typeof arraynamed !== "undefined" && arraynamed !== null) {
      //console.log("found arraynamed has a value");
      if ((arraynamed instanceof Array) === true){
        //console.log("I'm an array");
        if (arraynamed.length === 0) {
            //console.log ("I'm empty");
            return true;
        } else {
          return false;
        }//end length check
      } else {
        //bad type
        throw "Argument is not an array";
      } //end type check
  } else {
    //bad argument
    throw "Argument is invalid, check initialization";;
  }//end argument check
}

try {
  console.log(isemptyArray(jill));
} catch (e) {
    console.log ("error caught:",e);
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-01-29T10:01:43.430

我发现的工作方式（来自另一种语言）是制作一个简单的函数来测试。

创建一个检查数组大小并通过参数传递长度的函数。

```
isEmpty(size){
        if(size==0) {
            return true;
        } else  {
            return false;
        }
    }

//then check
if(isEmpty(yourArray.length)==true){
            //its empty
        } else {
            //not empty
        } 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-03-16T08:45:30.400

你应该做这个

```
 if (!image_array) {
      // image_array defined but not assigned automatically coerces to false
    } else if (!(0 in image_array)) {
      // empty array
      // doSomething
    } 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-04-02T17:27:40.343

在我的情况下，`array_.length`总是返回 0，即使它里面有值。可能是因为非默认索引。

因此，要检查数组是否已定义，我们使用`typeof _array !== 'undefined'` 然后检查它是否包含任何日期，我只需将其与空数组进行比较`_array !== []`

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-09-07T21:08:26.137

可能你`image_array`的不是数组，而是一些具有`length`属性的对象（如字符串） - 试试

```
if(image_array instanceof Array && image_array.length) 
```

```
function test(image_array) {
  if(image_array instanceof Array && image_array.length) { 
    console.log(image_array,'- it is not empty array!')
  } else {
    console.log(image_array,'- it is empty array or not array at all!')
  }
}

test({length:5});
test('undefined');
test([]);
test(["abc"]);
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2018-08-13T11:36:19.487

在 ts

```
 isArray(obj: any) 
{
    return Array.isArray(obj)
  } 
```

在 HTML 中

(照片 == 未定义 || !(isArray(photos) && photos.length > 0) )

* * *

## 回答 #23

> 赞同：-5
> 
> 时间：2012-07-31T15:20:07.647

当您创建 image_array 时，它是空的，因此您的 image_array.length 为 0

正如下面的评论中所述，我根据这个 [问题的答案编辑我的答案](https://stackoverflow.com/questions/500431/javascript-variable-scope)）：

```
var image_array = [] 
```

在 else 括号内不会对之前在代码中定义的 image_array 进行任何更改

# comments - 从 LiveFyre 迁移评论？

> ID：11743399
> 
> 赞同：2
> 
> 时间：2012-07-31T15:17:49.837
> 
> 标签：comments, facebook-comments

我们正在为产品页面上的企业品牌网站寻找评论系统。我们一直倾向于 LiveFyre 而不是 Facebook 评论，因为它有可能进入 Twitter 等其他社交媒体市场。

但是，我们并不完全了解它是如何工作的，以及如果我们选择在稍后阶段离开它会产生什么影响？评论存储在哪里，如果我们稍后切换到 Disqus 或 Facebook 评论，评论会被保留吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T07:56:35.377

这是我通过电子邮件发送给 LiveFyre 后的官方回复：

“抱歉，我一定错过了您不在 WordPress 上。目前，没有存储非 WordPress 网站的评论，但正在开发用于导入和导出这些评论的 API。虽然我没有该功能的确切预计到达时间，请务必关注 blog.livefyre.com 以获取更新，因为我们将首先在那里发布它们！”

# java - 将下载的图像保存到文件

> ID：11743401
> 
> 赞同：0
> 
> 时间：2012-07-31T15:17:53.893
> 
> 标签：java, image

我正在尝试从 Internet 下载图像并使用以下方法将其保存到文件中：

```
private BufferedImage saveImageLocally(String remoteImageURL, String imageType, File localImage) {

    URL url = new URL(remoteImageURL);
    BufferedImage image = ImageIO.read(url);
    ImageIO.write(image, imageType, localImage);
    return image;
} 
```

但是，我[遇到了](https://stackoverflow.com/questions/11742598/reading-image-from-url)可以`ImageIO.read`通过以下方式解决的问题：

```
Image image = Toolkit.getDefaultToolkit().createImage(url); 
```

改为读取图像。但是，我不能使用`ImageIO.write`将图像保存到文件，因为第一个参数必须是`RenderedImage`.

有没有办法将 a `Image`（而不是 a `BufferedImage`）保存到文件中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:20:57.870

```
 URL url = new URL(imageUrl);
        InputStream is = url.openStream();
        OutputStream os = new FileOutputStream(destinationFile);

        byte[] b = new byte[2048];
        int length;

        while ((length = is.read(b)) != -1) {
            os.write(b, 0, length);
        }

        is.close();
        os.close(); 
```

# sql-server - 有什么方法可以在 LLBLGen 中进行插入或更新/合并/更新插入

> ID：11743405
> 
> 赞同：3
> 
> 时间：2012-07-31T15:17:57.867
> 
> 标签：sql-server, orm, sql-server-2008-r2, llblgenpro, llblgen

我想使用 LLBLGen 进行升级，而无需先获取然后保存实体。
我已经找到了在不先获取实体的情况下进行更新的可能性，但是我必须知道它已经存在。

更新条目的频率与插入新条目的频率差不多。

是否有可能一步完成？
一步完成有意义吗？

事实：

*   LLBLgen Pro 2.6
*   SQL Server 2008 R2
*   .NET 3.5 SP1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:37:47.767

我知道我对此有点晚了，但我记得与 LLBLGenPro 一起工作时，这是完全有可能的，它的优点之一就是一切皆有可能！我没有我的样本，但我很确定你有一个名为的方法`UpdateEntitiesDirectly`可以像这样使用：

```
// suppose we have Product and Order Entities
using (var daa = new DataAccessAdapter())
{
    int numberOfUpdatedEntities = 
        daa.UpdateEntitiesDirectly(OrderFields.ProductId == 23 && OrderFields.Date > DateTime.Now.AddDays(-2));
} 
```

使用 LLBLGenPro 时，我们能够完成使用 ORM 框架所能做的一切，真是太棒了！它还有一种方法可以进行批量删除`DeleteEntitiesDirectly`，这在您需要删除一个实体并将其替换为另一个实体的情况下可能很有用。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:59:16.383

我认为您可以通过使用 EntityCollection 来实现您想要的。首先通过 DataAccessAdapter 的 FetchEntityCollection 方法获取要更新的实体，然后更改该集合中所需的任何内容，向其中插入新实体并使用 DataAccessAdapter、SaveCollection 方法保存它。这样，现有实体将被更新，新实体将被插入到数据库中。例如，在您想要操作指定产品订单的产品订单场景中，您可以使用如下内容：

```
int productId = 23;
var orders = new EntityCollection<OrderEntity>();
using (DataAccessAdapter daa = new DataAccessAdapter())
{
    daa.FetchEntityCollection(orders, new RelationPredicateBucket(OrderFields.ProductId == productId))

    foreach(var order in orders)
    {
        order.State = 1;
    }

    OrderEntity newOrder = new OrderEntity();
    newOrder.ProductId == productId;
    newOrder.State = 0;
    orders.Add(newOrder);

    daa.SaveEntityCollection(orders);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:55:01.177

据我所知，这是不可能的，也不可能。

如果您只是在未获取的实体上调用 adapter.Save(entity)，框架会假定它是新的。如果您考虑一下，框架如何知道是发出 UPDATE 还是 INSERT 语句？无论如何，某处必须查询数据库以查看该行是否存在。

为单个实体（非递归）保存创建或多或少自动执行此操作的东西并不难。这些步骤将类似于：

1.  创建一个新实体并设置它的字段。
2.  尝试使用 PK 或唯一约束获取相同类型的实体（还有其他选项，但没有统一的选项）
3.  如果获取失败，只需保存新实体（INSERT）
4.  如果获取成功，将创建的实体的字段映射到获取的实体的字段。
5.  保存获取的实体（更新）。

# c# - 更改 Entity Framework 4.3 的默认 ErrorMessage

> ID：11743407
> 
> 赞同：1
> 
> 时间：2012-07-31T15:18:02.817
> 
> 标签：c#, entity-framework-4.3

我想更改我们在 Entity Framework 4.3 中验证时获得的默认 ErrorMessage。我们找到了适用于 EF4.1 的语言包，但没有适用于 4.3 的语言包吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-07T21:59:45.617

我们通过手动翻译我们遇到的所有验证消息解决了这个问题！我们使用一些正则表达式从最终错误消息中提取消息资源字符串。

```
 private static Dictionary<string, string> _errorTranslation;

    private static string TranslateErrorMessage(string errorMessage)
    {
        if (_errorTranslation == null)
        {
            _errorTranslation = new Dictionary<string, string>();

            // MaxLength-Attribute
            _errorTranslation.Add(
                @"^The field (.*) must be a string or array type with a maximum length of (.*)\.$",
                @"Das Feld $1 hat eine maximale Länge von $2.");

            // MinLength-Attribute
            _errorTranslation.Add(
                @"^The field (.*) must be a string or array type with a minimum length of (.*)\.$",
                @"Das Feld $1 hat eine minimale Länge von $2.");

            // StringLength-Attribute
            _errorTranslation.Add(
                @"^The field (.*) must be a string with a maximum length of (.*)\.$",
                @"Das Feld $1 hat eine maximale Länge von $2.");

            // Range-Attribute
            _errorTranslation.Add(
                @"^The field (.*) must be between (.*) and (.*)\.$",
                @"Das Feld $1 muss zwichen $2 und $3 liegen.");

            // Required-Attribute
            _errorTranslation.Add(
                @"^The (.*) field is required\.$",
                @"Das Feld $1 wird zwingend benötigt.");
        }

        foreach (var pattern in _errorTranslation)
            if (Regex.IsMatch(errorMessage, pattern.Key))
                return Regex.Replace(errorMessage, pattern.Key, pattern.Value);

        return errorMessage;
    } 
```

**编辑** 自从我 5 个月前发布我的问题以来没有人回答，我们提出了这个糟糕的解决方案。很遗憾地问，为什么我对此投了反对票？

# wcf - 在 POST 而不是 GET 中使用 OData 参数查询 WCF 服务

> ID：11743410
> 
> 赞同：0
> 
> 时间：2012-07-31T15:18:14.137
> 
> 标签：wcf, wcf-data-services, wcf-ria-services, odata

我们调用 wcf svcs（不是我们的）并且我们使用gets 来搜索产品数据库。

示例： http: [//foo.com/SearchProducts.svc](http://foo.com/SearchProducts.svc) ?$skip=0$take=10$includeTotalCount=true

我们传递 Odata 参数来分页 SearchProducts svc 的结果。svc 已更改为 POST，因为我们的过滤器“skus”之一有时很大（数百个 skus），这会导致 GET 中断，因为 uri 太大。我们认为最简单的解决方案是将调用更改为帖子，但现在似乎没有使用 Odata 参数。

在进行 POST 时，这些参数是否需要以不同的方式发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:10:03.970

兼容的 OData 服务不支持查询的 POST 动词（除非您使用 POST 隧道，但无论如何您都会达到 URL 限制）。所以我想知道它对你有什么作用。

可以使用以下几种方法克服 URL 大小限制：

*   简化查询表达式。显然这只能到此为止，但它通常是最好的解决方案，因为它也可能会加快查询执行速度。
*   请改用批处理。您可以在批处理中发送 GET 请求。在这种情况下，URL 的长度不是问题，因为查询 URL 是在批处理的负载中发送的。
*   为您正在使用的复杂查询定义服务操作（但由于您不拥有该服务，这对您来说可能不是一个好的解决方案）。

# c# - 你应该如何组合班级成员的哈希码？

> ID：11743414
> 
> 赞同：0
> 
> 时间：2012-07-31T15:18:23.903
> 
> 标签：c#, hashcode

为一个类生成哈希码时，可以使用该类成员的哈希码吗？这是一个示例类：

```
class Sample
{
    private readonly string _strA, _strB;
    public Sample(string strA, string strB)
    {
        this._strA = strA;
        this._strB = strB;
    }
    public override int GetHashCode()
    {
        return (this._strA + "###" + this._strB).GetHashCode();
    }
} 
```

我认为只要 _strA 和 _strB 都不包含字符串“###”，这将起作用。我不完全确定，因为我不知道如何在字符串上生成哈希码的细节。

[我在创建两个数字的哈希码](https://stackoverflow.com/questions/892618/create-a-hashcode-of-two-numbers)的帖子中看到了一个解决方案，我可以根据自己的目的进行定制，但我认为我的解决方案更简单（只要两个字符串都不包含“###”）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:30:15.410

如果您有多个字段对对象的整体哈希码有贡献，那么一种简单且相当有效的方法是：

```
public override int GetHashCode()
{
    int hash = 17;

    hash = hash*23 + field1.GetHashCode();
    hash = hash*23 + field2.GetHashCode();
    hash = hash*23 + field3.GetHashCode();

    // And so on for all applicable fields.
    // field1, field2 and field3 are all class field members.

    return hash;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:21:02.067

更好的方法是[使用 Times 33 hash 之类的东西以](https://stackoverflow.com/questions/7700400/whats-a-good-hash-function-for-english-words)数学方式组合哈希码。在您当前的代码中，每次`GetHashCode`调用时都会创建一个临时字符串，这可能会导致性能不佳。

```
public override int GetHashCode()
{
    // omit null-coalesce if we know them to be non-null
    return (33 * (this._strA ?? "").GetHashCode())
         + (this._strB ?? "").GetHashCode();
} 
```

如果您的类是真正不可变的，那么预先计算哈希码可能值得 4 字节：

```
private readonly int _hash;

public Sample(string strA, string strB)
{
    this._strA = strA;
    this._strB = strB;
    this._hash = (33 * (this._strA ?? "").GetHashCode())
               + (this._strB ?? "").GetHashCode();
}

public override int GetHashCode()
{
    return this._hash;
} 
```

# bash - 图层名称应该在 gdal_rasterize for 循环中是什么？

> ID：11743417
> 
> 赞同：1
> 
> 时间：2012-07-31T15:18:30.890
> 
> 标签：bash, shapefile, raster, gdal

我是 Linux 新手，目前正在尝试在 BASH 中在一组 shapefile 上运行此代码：

```
for file in /mnt/hgfs/Shared/*.shp ; do
gdal_rasterize -l ??? -burn 1 -tr 0.5 0.5 -te -180 -90 180 90 $file rast2
gdal_merge.py -o rast1 rast2 rast1
done 
```

rast1 是一个空栅格，用于将以下栅格绑定到。我无法弄清楚这段代码中 -l 之后的语法应该是什么......我认为其余的运行良好。我试过使用 $file 但终端给了我以下错误：

```
Unable to find layer /mnt/hgfs/Shared/SHAPE1.shp, skipping. 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:35:23.120

注意：我从未使用过 GDAL，并且对它一点也不熟悉。

由于[http://www.gdal.org/gdal_rasterize.html](http://www.gdal.org/gdal_rasterize.html)的底部表明“mask”的图层名称可以与“mask.shp”一起使用，我建议剥离扩展名`$file`并将其用作图层名称：

```
gdal_rasterize -l $(basename $file .shp) -burn 1 -tr 0.5 0.5 -t -180 -90 180 90 $file rast2 
```

# c# - XDocument，XElement：序列不包含匹配元素

> ID：11743419
> 
> 赞同：3
> 
> 时间：2012-07-31T15:18:37.130
> 
> 标签：c#, asp.net, xml, linq-to-xml, xelement

使用 C# 搜索 xml 文件的元素但得到关注

**错误：**序列不包含匹配元素

```
 XNamespace siteNM = "http://schemas.microsoft.com/AspNet/SiteMap-File-1.0";
            XDocument sitemap = new XDocument
                (new XDeclaration("1.0", "UTF-8", null), 
                     new XElement(siteNM + "siteMap", 
                          new XElement(siteNM + "siteMapNode", new XAttribute("title", "Home"), new XAttribute("url", "home.aspx"), new XAttribute("description", "Home"))
                                 ));
    XElement x = sitemap.Root; 
```

我尝试了以下**两种**搜索元素的方法，但都给了我**同样的错误**。

**第一种方式：**

```
XElement child = x.Descendants("siteMapNode").Where(el => el.Attribute("title") != null && el.Attribute("title").Value == "Home").First(); 
```

**第二种方式：**

```
XElement child1 = x.Descendants("siteMapNode").First(el => (string)el.Attribute("title") == "Home"); 
```

请帮我。非常感谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T15:24:49.983

缺少命名空间

```
XElement child = x.Descendants(siteNM + "siteMapNode")
                .First(el => el.Attribute("title") != null && el.Attribute("title").Value == "Home"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T15:25:44.787

您可能还应该在搜索查询中添加 namespece：

```
XElement child = x.Descendants(siteNM + "siteMapNode").Where(el => el.Attribute("title") != null && el.Attribute("title").Value == "Home").First(); 
```

# css - 项目有多余的垂直间距

> ID：11743421
> 
> 赞同：0
> 
> 时间：2012-07-31T15:18:43.293
> 
> 标签：css, html-lists, margin, padding

[现场直播。](http://growingedgecoaching.com/)

最右侧 Twitter 提要中的`<li>`项目之间的间距过大，我不知道为什么——我找不到任何奇怪的填充或边距问题。

该网站是 Wordpress，但这里是呈现的 HTML：

```
<li>
    <h2><a href="#">Recent Tweets</a></h2>
    <div id="twitter-feed">

        <ul>
                                                        <li>
            RT @LollyDaskal: regret is often the result of too many excuses. #leadfromwithin #leadership</li>
                                                        <li>
            What you do in small doses becomes big doses in your life.</li>
                                                        <li>
            RT @ThisIsSethsBlog: Seth's Blog: Two kinds of unique http://t.co/1TJ1Vuf9</li>
                                                        </ul>
    </div><!-- end twitter-feed -->
    <div class="forward-link">
        <p><a href="https://twitter.com/growing_edge"><span style="color:#b8bf33">Follow @Growing_Edge</span></a></p>
    </div><!-- end forward-link -->
</li> 
```

和 CSS

```
#landing-brief #twitter-feed {
    font-family: Verdana, Geneva, Tahoma, sans-serif;
    font-size: 75%;
    line-height: 1.5;
    color: #333333;
    margin-left: -28px;
}

#landing-brief #twitter-feed ul li {
    padding-bottom: 5px;
    height: 200px;
}

#landing-brief .forward-link {
    position: absolute;
    left: 0; 
    bottom: 0;
} 
```

关于造成这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:29:22.973

这里有两条线是罪魁祸首。这两个都指定了 200px 的显式高度。我猜它来自您使用的模板。

```
/* On line 2836 in style.css */
#landing-brief #twitter-feed ul li {
    height: 200px;
    padding-bottom: 5px;
}
/* On line 2814 in style.css */
#landing-brief ul li {
    display: inline-block;
    height: 200px;
    padding-bottom: 20px;
    padding-right: 20px;
    position: relative;
    vertical-align: top;
    width: 250px;
} 
```

要修复它，您需要将块的显式高度覆盖`li`为 auto !important;，或者完全删除块的高度`li`。

我是如何得出这个结论的：我将 Firefox 与 FireBug 一起使用并检查了个人 Twitter 帖子。在两个样式块上禁用 200px 高度后，它看起来是正确的。

请让我知道这是否有效:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:23:49.077

```
#landing-brief #twitter-feed ul li {
    padding-bottom: 5px;
    height: 200px;   <--- here is your problem.
} 
```

使用元素检查器可以让您查看元素的定义样式来自何处。并且可以帮助您快速发现此类问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:24:01.967

```
#landing-brief #twitter-feed ul li {
padding-bottom: 5px;
height: 50px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T15:24:39.267

高度：200px`#landing-brief #twitter-feed ul li`是造成这种情况的原因。通过完全移除高度使其更小或使其自动。

不确定您是否意识到这一点，但使用开发者控制台在 Safari/Chrome 中调试 HTML/JS/CSS 非常有用，因为您可以实时更改字段并查看浏览器将如何呈现它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T15:24:27.537

li 的高度是`height:200px`, 改为`height:auto;`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T15:25:33.727

我想说这是你给“#landing-brief #twitter-feed ul li”的高度。尝试这个：

```
#landing-brief #twitter-feed ul li {
padding-bottom: 5px;
height: auto;
} 
```

# php - 字符串无法转换为 JSONArray

> ID：11743422
> 
> 赞同：0
> 
> 时间：2012-07-31T15:18:46.960
> 
> 标签：php, android, string, jsonexception

我正在尝试从 php 文件中获取数据。

这是我的 PHP 代码：

```
$sql=mysql_query("select * from `tracking`");
while($row=mysql_fetch_assoc($sql))
$output[]=$row;
print(json_encode($output)); 
```

我真的需要所有的数据。这是我用来获取和转换数据的代码：

```
String result = null;
InputStream is = null;
StringBuilder sb = null;

ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
try {
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://server/getData.php");
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity entity = response.getEntity();
    is = entity.getContent();
} catch(Exception e) {
    Log.e("log_tag", "Error in http connection"+e.toString());
}

//convertion de la réponse en String
try {
    //BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"),8);
    BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"),8);
    sb = new StringBuilder();
    sb.append(reader.readLine() + "\n");

    String line="0";
    while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
        //sb.append(line);
    }

    is.close();
    result=sb.toString();             
} catch(Exception e) {
    Log.e("log_tag", "Error converting result "+e.toString());
}

// Affectation des données
try {
    JSONArray jArray = new JSONArray(result);
    Log.d("jArray", ""+jArray);
    JSONObject json_data= null;

    for(int i=0; i<jArray.length(); i++) {
        p = new Position();
        json_data = jArray.getJSONObject(i);

        Log.d("js", ""+json_data);
        id=json_data.getInt("id");
        lat=(float) json_data.getDouble("lat");
        lon=(float) json_data.getDouble("lon");
        speed=(float) json_data.getDouble("speed");
        alt=json_data.getDouble("alt");
        time=json_data.getString("time");
        date=json_data.getString("date");

        p.setId(id);
        p.setLat(lat);
        p.setLon(lon);
        p.setSpeed(speed);
        p.setAlt(alt);
        p.setDate(date);
        p.setTime(time);

        datasource.createPosition(p);
    }
} catch(JSONException e1) {
    Log.e("JSONEX", ""+e1);
} catch (ParseException e1) {
    e1.printStackTrace();
} 
```

这确实适用于模拟器，但不适用于我的安卓手机，我不明白原因。
现在这是我从服务器获取的 json 结果：

> [{"id":"180","lat":"33.894707","lon":"-6.327312","speed":"0.00000","alt":"397","date":"29/ 07/2012","时间":"23:44"}]

这是在[http://jsonlint.com/](http://jsonlint.com/)`JSONArray`上经过有效验证的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:46:10.827

我发现 JSON 有什么问题。我在开头发现了一个字符“？” 在代码中的某处添加，直到我将 logCat 条目存储到文件中才可见。所以我添加了代码行，它现在工作正常。

```
result = result.substring(1); 
```

我希望它可以在未来对 Waqas 有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-30T09:26:34.503

把这行：

```
 while(result.charAt(0)!='[')  //or result.charAt(0)!='{'
        {
            result = result.substring(1);
            Log.d("Tag1", "remove 1st char");

        } 
```

后：

```
 result = sb.toString(); 
```

变成这样：;

```
 result = sb.toString();

        while(result.charAt(0)!='[')
        {
            result = result.substring(1);
            Log.d("Tag1", "remove 1st char");

        } 
```

# javascript - 选择下一个功能

> ID：11743423
> 
> 赞同：0
> 
> 时间：2012-07-31T15:18:47.807
> 
> 标签：javascript, jquery

我的“#picknext”函数选择网格中的下一个单词为用户拼写。目前，除了连续两次选择同一行之外，它还可以完成其工作。

我怎样才能防止这种情况？

```
$('#pickNext').mousedown(function() {
    // remove the class from all td's
    $('td').removeClass('spellword');
    // pick a random word
    rndWord = Math.floor(Math.random() * (listOfWords.length));

    // apply class to all cells containing a letter from that word
    $('td[data-word="' + listOfWords[rndWord].name + '"]').addClass('spellword');
}); 
```

HTML...

```
<ul style="display:none;" id="wordlist">
  <li data-word="mum" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav" data-pic="http://www.clker.com/cliparts/5/e/7/f/1195445022768793934Gerald_G_Lady_Face_Cartoon_1.svg.med.png"></li>
  <li data-word="cat" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav" data-pic="http://www.clker.com/cliparts/c/9/9/5/119543969236915703Gerald_G_Cartoon_Cat_Face.svg.med.png"></li>
  <li data-word="dog" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav" data-pic="http://www.clker.com/cliparts/e/9/4/1/1195440435939167766Gerald_G_Dog_Face_Cartoon_-_World_Label_1.svg.med.png"></li>
  <li data-word="bug" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav" data-pic="http://www.clker.com/cliparts/4/b/4/2/1216180545881311858laurent_scarabe.svg.med.png"></li>
  <li data-word="rat" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav" data-pic="http://www.clker.com/cliparts/C/j/X/e/k/D/mouse-md.png"></li>
  <li data-word="dad" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav" data-pic="http://www.clker.com/cliparts/H/I/n/C/p/Z/bald-man-face-with-a-mustache-md.png"></li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:22:34.167

您需要将 rndWord 变量存储在事件侦听器范围之外的某个位置，无论是父范围，还是使用 this.data('rndWord')，然后你可以做一个看起来像

```
var r = rndWord;
while (r == rndWord) {
     rndWord = Math.floor(Math.random() * (listOfWords.length));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:24:05.037

不确定我是否理解正确，但是..也许，也许很大..

```
$('td[data-word="' + listOfWords[rndWord].name + '"]').not($(this)).addClass('spellword'); 
```

# ios - 在编译时将大型数据库文件添加到 iOS App 包以避免索引？

> ID：11743427
> 
> 赞同：1
> 
> 时间：2012-07-31T15:18:50.897
> 
> 标签：ios, xcode, indexing, bundle, xcode4.4

我在使用新版本的 Xcode（4.4 和 4.5）时遇到了一个严重问题，我的项目中有一个非常大的 .sql 数据库文件存储在项目中。由于多种原因，该文件无法更改……但其大小为 +270Mb。这会导致 Xcode 挂在“索引文件...”上并且变得完全缓慢并且对我必须强制退出应用程序的点没有响应，并且实际上无法完成任何编码。我曾多次向 Apple 提出错误报告，但似乎被忽略了！

我不想完全禁用 Xcode 索引，因为我发现代码完成功能非常有用。

我的问题是：我可以从 Xcode 捆绑资源中删除数据库，然后在编译时自动添加它吗？

对于如何解决这个问题的任何和所有建议，我将不胜感激。

问候，山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:22:47.577

万一有人遇到Xcode索引一个巨大的不需要的文件的问题......我通过将Xcode中的文件类型设置为“MP3音频文件”来修复它......

.sql 文件在应用程序中后似乎对它的功能没有任何影响，但会阻止 Xcode 尝试对其进行索引。

如果有人对此有更好的解决方案，我很想听听！

# c# - 静态/通用/非通用定义错误

> ID：11743431
> 
> 赞同：0
> 
> 时间：2012-07-31T15:19:04.677
> 
> 标签：c#

技术人员——我认为我为 Split 正确定义了这个静态扩展，我显然不是因为消息：必须在非泛型静态类中定义扩展方法。

这是一个简单的 c# 控制台程序来测试一些东西。这是我所拥有的：

```
class Program
{ 
  static int Main(string[] args)
  {
    int[] numbers = new int[10000]; 
           for (int i = 0; i < numbers.Length; ++i) 
               numbers[i] = i; 

  int[][] sectionedNumbers = numbers.Split(1000); 
   .
   . //blah blah blah .. rest of code

 return 0;
 }

 public static T[][] Split<T>(this T[] arrayIn, int length)
 {
  bool even = arrayIn.Length % length == 0;
    .
    .
    . // blah blah .. more code

   return newArray;
   } 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:20:53.650

您的课程`Program`不是错误消息所要求的静态课程。

*   将`static`指令添加到类声明中：

    ```
     static class Program
     {
         // ... 
    ```

*   或`Split`完全移入另一个静态类。

然后你的代码应该再次编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:20:46.100

您好，您的容器类必须是静态的

在静态类中设置你的方法

```
public static class Extension
{
 public static T[][] Split<T>(this T[] arrayIn, int length)
 {
  bool even = arrayIn.Length % length == 0;
    .
    .
    . // blah blah .. more code

   return newArray;
   }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:23:10.530

您需要在类中定义扩展方法，如下所示：

```
public static class ArrayExtensions
{
 public static T[][] Split<T>(this T[] arrayIn, int length) 
 { 
  bool even = arrayIn.Length % length == 0; 
    . 
    . 
    . // blah blah .. more code 

   return newArray; 
   } 
} 
```

# couchdb - CouchDB 中的 reduce 函数参数是什么？

> ID：11743435
> 
> 赞同：1
> 
> 时间：2012-07-31T15:19:12.503
> 
> 标签：couchdb, mapreduce

我知道 reduce 函数应该在某种程度上结合 map 函数的结果，但究竟传递给 reduce 函数的是什么？

```
function(keys, values){
  // what's in keys?
  // what's in values?
} 
```

我试图在 Futon 临时视图构建器中探索这一点，但我得到的只是*reduce_overflow_errors*。所以我什至不能打印`keys`or`values`参数来试图理解它们的样子。

谢谢你的帮助。

编辑：

我的问题如下。我正在使用蒲团的临时视图生成器。

我有一组表示文本文件的文档（它用于我想用来简化文档翻译的脚本）。

```
text_file:
    id   // the id of the text file is its path on the file system 
```

我还有一些文档代表出现在上述文件中的文本片段，以及它们在每个文件中的位置。

```
text_fragment:
    id
    file_id   // correspond to a text_file document 
    position 
```

我想为每个 text_file 获取该文件中出现的文本片段的列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:27:14.793

**更新**

> 关于 JavaScript API 更改的注意事项：在 2008 年 5 月 20 日星期二（Subversion 修订版 r658405）之前，向地图索引发出一行的函数被命名为“map”。它现在已更改为“发射”。

这就是为什么`map`使用而不是`emit`重命名的原因。抱歉，我更正了我的代码，使其在最新版本的 CouchDB 中有效。

**编辑**

我认为您正在寻找的是 sql db 语言中的 has-many 关系或连接。这是Christopher Lenz 的[一篇博客](http://www.cmlenz.net/archives/2007/10/couchdb-joins)文章，准确描述了 CouchDB 中这种场景的选择。

在最后一部分中，描述了一种可用于所需列表的技术。您需要以下格式的地图功能

```
function(doc) {
  if (doc.type == "text_file") {
    emit([doc._id, 0], doc);
  } else if (doc.type == "text_fragment") {
    emit([doc.file_id, 1], doc);
  }
} 
```

现在您可以通过以下方式查询视图：

```
my_view?startkey=["text_file_id"]&endkey;=["text_file_id", 2] 
```

这为您提供了表单列表

*   文本文件
*   text_fragment_1
*   text_fragment_2
*   ..

**旧答案**

直接来自[CouchDB Wiki](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views#Reduce_Functions)

```
function (key, values, rereduce) {
    return sum(values);
} 
```

Reduce 函数按 key、values 和 rereduce 的顺序传递三个参数

Reduce 函数必须处理两种情况：

1.  **当 rereduce 为 false 时：**

    *   key 将是一个数组，其元素是 [key,id] 形式的数组，其中 key 是 map 函数发出的 key，id 是生成 key 的文档的 key。
    *   values 将是为键中的各个元素发出的值的数组，即`reduce([ [key1,id1], [key2,id2], [key3,id3] ], [value1,value2,value3], false)`
2.  **当 rereduce 为真时：**

    *   键将为空
    *   values 将是先前调用reduce 函数返回的值数组，即`reduce(null, [intermediate1,intermediate2,intermediate3], true)` Reduce 函数应返回单个值，既适用于最终视图的value 字段，也适用于传递给reduce 函数的values 数组的成员。

# php - 在php中使用mongodb的$and

> ID：11743442
> 
> 赞同：0
> 
> 时间：2012-07-31T15:19:27.463
> 
> 标签：php, mongodb, database

设置，php + mongodb。

数据库应包含多个项目，其中“标题”包含“Apple”和“Orange”。我试图只获取同时包含“Apple”和“Orange”的项目。

```
 $regexOne = new MongoRegex( '/Apple/i' ); 
  $regexTwo = new MongoRegex('/Orange/i');

  $cursor = $collection->find( array( '$and' => array( array('Title' => $regexOne), array('Title' => $regexTwo) ) ) ); 
```

将 '$and' 替换为 '$or' 的相同查询可以正常工作（或至少看起来如此），但是尽管数据库中存在与这些条件匹配的数据，但这不会返回任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:23:41.110

呼应[dimo414 所说](https://stackoverflow.com/questions/11743442/using-mongodbs-and-in-php#comment15587158_11743442)的，第一步只是将 Mongo 的 shell 与 PHP 进行比较。这两个是等价的：

```
$ mongo 
MongoDB shell version: 2.2.0-rc0
connecting to: test
> db.foo.drop()
true
> db.foo.insert({title:"apple"})
> db.foo.insert({title:"orange"})
> db.foo.insert({title:"apple orange"})
> db.foo.insert({title:"banana apple"})
> db.foo.insert({title:"banana plum"})
> db.foo.find({$and: [{title:/apple/i}, {title:/orange/i}]})
{ "_id" : ObjectId("501804c4e7dc9abd7b58cd83"), "title" : "apple orange" }
> db.foo.find({$or: [{title:/apple/i}, {title:/orange/i}]})
{ "_id" : ObjectId("501804bde7dc9abd7b58cd81"), "title" : "apple" }
{ "_id" : ObjectId("501804c0e7dc9abd7b58cd82"), "title" : "orange" }
{ "_id" : ObjectId("501804c4e7dc9abd7b58cd83"), "title" : "apple orange" }
{ "_id" : ObjectId("501804cce7dc9abd7b58cd84"), "title" : "banana apple" } 
```

在 PHP 中（使用[phpsh](http://www.phpsh.org/)）：

```
php> $c = (new Mongo())->test->foo;

php> =iterator_to_array($c->find(['$and' => [['title' => new MongoRegex('/apple/i')], ['title' => new MongoRegex('/orange/i')]]]))
array(
  "501804c4e7dc9abd7b58cd83" => array(
    "_id" => <object #10 of type MongoId> {
      $id => "501804c4e7dc9abd7b58cd83",
    },
    "title" => "apple orange",
  ),
)

php> =iterator_to_array($c->find(['$or' => [['title' => new MongoRegex('/apple/i')], ['title' => new MongoRegex('/orange/i')]]]))
array(
  "501804bde7dc9abd7b58cd81" => array(
    "_id" => <object #11 of type MongoId> {
      $id => "501804bde7dc9abd7b58cd81",
    },
    "title" => "apple",
  ),
  "501804c0e7dc9abd7b58cd82" => array(
    "_id" => <object #12 of type MongoId> {
      $id => "501804c0e7dc9abd7b58cd82",
    },
    "title" => "orange",
  ),
  "501804c4e7dc9abd7b58cd83" => array(
    "_id" => <object #13 of type MongoId> {
      $id => "501804c4e7dc9abd7b58cd83",
    },
    "title" => "apple orange",
  ),
  "501804cce7dc9abd7b58cd84" => array(
    "_id" => <object #14 of type MongoId> {
      $id => "501804cce7dc9abd7b58cd84",
    },
    "title" => "banana apple",
  ),
) 
```

# ruby-on-rails - 在 Rails 上安装 ruby 时遇到问题

> ID：11743448
> 
> 赞同：2
> 
> 时间：2012-07-31T15:19:40.070
> 
> 标签：ruby-on-rails, rubygems, fedora

我越来越

```
错误：在执行 gem ... (NameError) 未初始化常量 Gem::RemoteFetcher::OpenSSL
```

当我尝试跑步时

```
# gem 安装导轨
```

我已经有了

*   红宝石 v1.8.7
*   宝石 (rubygems.nonarch) v1.7.2

已安装。

知道我应该怎么做吗？

* * *

现在运行`sudo gem install rails`给了我：

```
错误：安装导轨时出错：
    错误：无法构建 gem 原生扩展。

        /usr/bin/ruby extconf.rb
mkmf.rb 在 /usr/lib/ruby/ruby.h 找不到 ruby​​ 的头文件

Gem 文件将继续安装在 /usr/lib/ruby/gems/1.8/gems/json-1.7.4 中以供检查。
结果记录到 /usr/lib/ruby/gems/1.8/gems/json-1.7.4/ext/json/ext/generator/gem_make.out

```

* * *

通过 YUM 安装的一切

运行 Fedora 15

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T18:50:33.390

我在执行#gem install rake 时遇到了类似的问题，但我发现我的系统位于代理服务器后面，因此我尝试通过以下命令提供代理地址：

```
gem install rake -p http//IPaddress:proxyport (put : after http) 
```

它对我有用，之后没有这样的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:32:00.657

打`rvm requirements`。你没有`libssl-dev`安装。

```
➜  ~  rvm requirements

Requirements for Linux ( DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=10.10
DISTRIB_CODENAME=maverick
DISTRIB_DESCRIPTION="Ubuntu 10.10" )

NOTE: 'ruby' represents Matz's Ruby Interpreter (MRI) (1.8.X, 1.9.X)
             This is the *original* / standard Ruby Language Interpreter
      'ree'  represents Ruby Enterprise Edition
      'rbx'  represents Rubinius

bash >= 4.1 required
curl is required
git is required (>= 1.7 for ruby-head)
patch is required (for 1.8 rubies and some ruby-head's).

To install rbx and/or Ruby 1.9 head (MRI) (eg. 1.9.2-head),
then you must install and use rvm 1.8.7 first.

Additional Dependencies:
# For Ruby / Ruby HEAD (MRI, Rubinius, & REE), install the following:
  ruby: /usr/bin/apt-get install build-essential openssl libreadline6 libreadline6-dev curl git-core zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool bison subversion

# For JRuby, install the following:
  jruby: /usr/bin/apt-get install curl g++ openjdk-6-jre-headless
  jruby-head: /usr/bin/apt-get install ant openjdk-6-jdk

# For IronRuby, install the following:
  ironruby: /usr/bin/apt-get install curl mono-2.0-devel 
```

我不知道 Fedora 的要求与 Ubuntu 的要求有何不同，但这可能只是在包名称中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T02:32:58.330

我刚刚在 Ubuntu 上安装 gem 时遇到了同样的问题。它现在正在工作，我认为我所做的修复它是通过防火墙启用 ssl。

看起来 gem 返回此错误以响应未能建立 SSL 连接，大概是在尝试处理失败时。

罗素

# javascript - 启用客户端日志记录 - Socket.io-client

> ID：11743450
> 
> 赞同：0
> 
> 时间：2012-07-31T15:19:45.630
> 
> 标签：javascript, socket.io

如何在 Socket.io (Socket.io-client) 中启用客户端日志记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T17:20:04.037

我刚刚在[https://github.com/LearnBoost/socket.io-client](https://github.com/LearnBoost/socket.io-client)看了代码，我认为不可能在客户端启用日志记录。

# javascript - Node.js http 请求

> ID：11743452
> 
> 赞同：1
> 
> 时间：2012-07-31T15:19:51.297
> 
> 标签：javascript, node.js

我是 node.js 的初学者，我似乎没有让它工作。

```
 function sleep(milliSeconds){
    var startTime = new Date().getTime();
    while (new Date().getTime() < startTime + milliSeconds); 
}

var isRequestComplete = false;
while(isRequestComplete == false){
console.log("in make request");
var querystring = require('querystring');

var data = querystring.stringify({
      username: 'username',
      password: 'password',
      action: 'convert',
      voice: 'engfemale1',
      text: 'stuff and things, this should take longer than one request.'
    });

var options = {
  host: 'ws.ispeech.org',
  port: 80,
  path: '/api/rest/1.5',
  method: 'POST',
  headers: {
        'Content-Type': 'application/x-www-form-urlencoded',
        'Content-Length': data.length
    }
};

var http = require('http');
var req = http.request(options, function(res) {
    console.log("got response");
    res.setEncoding('utf8');
    res.on('data', function (chunk) {
        console.log("body: " + chunk);
        if(chunk.indexOf("finished") != -1){
            isRequestComplete = true;
        }
    });
});

req.on('error', function(e) {
  console.log('problem with request: ' + e.message);
});
req.write(data);
req.end();
console.log("completed");
sleep(5000);
} 
```

无论出于何种原因，http 请求都不会发回响应。除非代码完全完成，否则在 while 循环中我永远不会得到响应。因此循环永远不会结束。我的程序中的用户名和密码是输入的，这里不保密。谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:43:01.463

[查看http://nodejs.org/](http://nodejs.org/)上的第一个 http-server 示例。

您必须创建一个 http-server 来侦听来自到达指定 IP-Address:Port 的浏览器的请求。一旦请求到达，服务器将指定的响应发送到浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:27:51.657

这不是让你的代码休眠的方法！while 循环不是“休眠”，而是尽可能快地处理。在您的情况下，它会日复一日地试图到达您的目的地。

看看这里看看这个*应该如何工作。 [http://nodejs.org/api/http.html](http://nodejs.org/api/http.html)

# validation - 具有 OGNL 表达式上下文的 Struts 2 访问者验证器

> ID：11743456
> 
> 赞同：1
> 
> 时间：2012-07-31T15:19:59.510
> 
> 标签：validation, struts2

我在使用 Struts 2 中的“Visitor”验证器时遇到问题。如果我对“context”参数进行硬编码，它可以正常工作。问题在于我需要这是一个 OGNL 表达式。

例如：

```
<validators>
<field name="model">
    <field-validator type="visitor">
        <param name="context">%{myAlias}</param>
        <param name="appendPrefix">false</param>
        <message />     
    </field-validator>
</field>
</validators> 
```

这将在我的操作中调用“getMyAlias”方法（它成功了！），它返回一个字符串。

```
public class ValidationAction extends ActionSupport implements ModelDriven<ValidationModel>{

    private ValidationModel xyz = new ValidationModel();

    @Override
    public String execute() throws Exception {  
        return SUCCESS;
    }

    @Override
    public ValidationModel getModel() {
        return xyz;
    }

    public String getMyAlias(){
        return "b";
    }

} 
```

我创建了一个名为“ValidationModel-b-validation.xml”的验证 xml 文件，并将其与我的 ValidationModel.java 文件一起放入包中。只需将“%{myAlias}”更改为“b”即可成功验证。

所以，我知道访问者验证器可以工作，但不能使用 OGNL 表达式。

任何想法为什么？谷歌根本没有帮助。似乎没有人尝试过这个。

# javascript - Sharepoint：如何通过 Javascript/JQuery 从自定义表单上的 DateTimeField 获取日期值？

> ID：11743458
> 
> 赞同：0
> 
> 时间：2012-07-31T15:20:00.390
> 
> 标签：javascript, jquery, validation, sharepoint, datetime

我已经在网上搜索了一段时间，但我找不到我的问题的简单答案。所以，我有一个带有日期和时间类型的 Sharepoint 列表，并且我创建了一个自定义表单来添加新元素。在表单上，​​我创建了一个 DateTimeField 就像这样：

```
<SharePoint:DateTimeField runat="server" id="ff_Order_Asset_DeliveryDate" FieldName="DeliveryDate"  /> 
```

一切正常。现在我想添加一个验证，因为选择的日期不能是过去，所以我需要比较它与当前日期。我想使用 PreSaveAction 在 javascript 中执行此操作，但问题是，我不知道如何从我的控件中获取日期值。我试过这样的事情：

```
var dateSelected = document.getElementById("<%=ff_Order_Asset_DeliveryDate.ClientID%>");
var dateFromSelection = new Date(dateSelected.value);
var dateNow = new Date();
if (dateFromSelection < dateNow)
doSomething(); 
```

但它当然行不通。请赐教我怎么能做到这一点？我将不胜感激！

- - - - - - - - - - - - - - - - 回答 - - - - - - - - - --------------------

如果有人关心：似乎我唯一应该做的就是使用这个 jQuery 语法：

```
var dateSelected = $('input[id*="ff_Order_dFAsset_DeliveryDate"]'); 
```

因为正如 Mark Oreta 所说，Sharepoint 为我控制的 ID 添加了很多内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:47:20.497

您反对使用[列验证](http://sharepointsolutions.com/sharepoint-help/blog/2011/02/how-to-validate-a-due-date-in-a-sharepoint-2010-list/)吗？如果是这样，我建议只是验证这种方式。

如果 javascript 是您唯一的选择，那么它不会像选择文本框那么容易，因为 sharepoint 在生成表单时会将一堆数据添加到项目的 id 中。根据您发布的内容，您似乎已经提取了表单，所以我要做的是在 div 周围包裹一个跨度，以便在 div 内生成输入并以这种方式定位它。

```
<span id="span-dateselected">
 <SharePoint:DateTimeField runat="server" id="ff_Order_Asset_DeliveryDate" FieldName="DeliveryDate"  />
</span> 
```

然后在您的 javascript 中，您需要找到跨度，然后是输入：

```
var dateFromSelection = document.getElementById("span-dateselected").getElementsByTagName("input")[0].value; 
```

上面的代码片段做了一些可能好的也可能不好的假设，因此您可能想要测试 javascript 是否正确找到了输入。我建议使用 Jquery 遍历生成的列表，但我意识到这可能不是您的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-27T09:58:54.570

如果有人关心：似乎我唯一应该做的就是使用这个 jQuery 语法：

```
var dateSelected = $('input[id*="ff_Order_dFAsset_DeliveryDate"]'); 
```

因为正如 Mark Oreta 所说，Sharepoint 为我控制的 ID 添加了很多内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:25:32.557

你试过下面的代码吗？

```
var dateSelected = document.getElementById("ff_Order_Asset_DeliveryDate.ClientID"); 
```

没有 ASp 标签？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T06:18:42.420

不要使用日期时间字段控制见下面的网址： [http ://www.entwicklungsgedanken.de/2009/08/21/do-not-use-datetimefield-when-displaying-the-date-of-your-field/](http://www.entwicklungsgedanken.de/2009/08/21/do-not-use-datetimefield-when-displaying-the-date-of-your-field/)

# ruby-on-rails - 在 windows cmd 上显示 unix 颜色（例如 ←[31m）

> ID：11743460
> 
> 赞同：8
> 
> 时间：2012-07-31T15:20:09.160
> 
> 标签：ruby-on-rails, windows, rspec, cmd, conemu

我最近开始在 Windows 7 上进行一些 ruby​​ on rails 开发，并发现许多命令（rspec、guard 等）输出颜色代码仅显示在 windows 命令行上的文本中（或通过我使用的 Console2） . 例如：

```
←[31mrspec ./spec/views/users/index.html.erb_spec.rb:21←[0m ←[36m# users/index renders a list of users←[0m
←[31mrspec ./spec/requests/homes_spec.rb:9←[0m ←[36m# Homes GET /homes ←[0m
←[31mrspec ./spec/views/users/new.html.erb_spec.rb:13←[0m ←[36m# users/new renders new user form←[0m
←[31mrspec ./spec/views/users/show.html.erb_spec.rb:13←[0m ←[36m# users/show renders attributes in <p>←[0m 
```

我知道您可以通过从`--color`配置文件（例如 .respc 文件）中取出命令来关闭大多数工具的颜色，但是必须对所有内容都这样做很痛苦，并且颜色编码会很好。

有什么想法可以让这些在 Windows 中正确显示吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T16:07:38.860

1.  将 Console2 更改为[ConEmu](http://sourceforge.net/projects/conemu/)（我是此控制台的作者）。它支持 Ansi x3.64

2.  或者，您可以使用 AnsiCon 启用 Ansi

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T09:18:42.337

我将 Console2 ( [http://sourceforge.net/projects/console/](http://sourceforge.net/projects/console/) ) 与 ansicon ( [https://github.com/adoxa/ansicon](https://github.com/adoxa/ansicon) ) 一起使用，效果很好：

1.  从作者那里编译或下载 dll：http: [//ansicon.adoxa.cjb.net/](http://ansicon.adoxa.cjb.net/)并将其放入包含在您的路径中的目录中；
2.  在控制台中，启动 ansicon ：`ansicon -i`

# android - 非游戏程序员的手机游戏框架

> ID：11743463
> 
> 赞同：0
> 
> 时间：2012-07-31T15:20:20.640
> 
> 标签：android, ios, mobile, frameworks, game-engine

我是一名 15 岁的程序员，我已经编程了几年，但我从未做过任何认真的游戏开发。我已经构建了一个 Windows 实用程序（使用 C++），并且在 Google Play Store / iOS App Store 中有一个 Android (Java) 和 iOS (Objective-C) 应用程序。

现在我想为 Android 和 iOS 创建一个手机游戏。正如我所说，我从未开发过游戏。对我来说，什么是一个好的起点？我应该使用什么框架？

先感谢您。

*更新*：我想要一个可以在 Android 和 iOS 上运行的跨平台框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:03:25.550

如果您来自非编程背景，那么您应该尝试以下几个框架：

游戏沙拉 [http://gamesalad.com](http://gamesalad.com)

游戏制作者 [http://www.yoyogames.com/gamemaker](http://www.yoyogames.com/gamemaker)

StencylWorks [http://www.stencyl.com/stencyl/overview/](http://www.stencyl.com/stencyl/overview/)

构造 2 [http://www.scirra.com/](http://www.scirra.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T15:31:39.127

如果您希望使用原生 sdks 为 ios 和 android 开发游戏，您应该选择 cocos2d - 它是基于 opengl 的游戏引擎，可作为开源（免费）使用。

你可以在 iOS 两个平台上找到它：- [http://www.cocos2d-iphone.org/](http://www.cocos2d-iphone.org/) android :- [http://code.google.com/p/cocos2d-android-1/](http://code.google.com/p/cocos2d-android-1/)
祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:23:18.413

检查下面的链接

[http://obviam.net/index.php/getting-started-in-android-game-development-with-libgdx-create-a-working-prototype-in​​-a-day-tutorial-part-1/](http://obviam.net/index.php/getting-started-in-android-game-development-with-libgdx-create-a-working-prototype-in-a-day-tutorial-part-1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T15:28:11.590

查看 AndEngine，[https://github.com/nicolasgramlich/AndEngine/](https://github.com/nicolasgramlich/AndEngine/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-18T19:46:33.200

我同意 Hardik 关于用于 Android 开发的 Libgdx 游戏框架的观点。这是一个很好的游戏开发框架。您在一个地方进行编程，它会创建游戏在 Android 和 Web 上所需的内容。

# linux - x86 CR3 的 SPARC 架构中对应的寄存器是什么？

> ID：11743464
> 
> 赞同：0
> 
> 时间：2012-07-31T15:20:22.200
> 
> 标签：linux, assembly, x86, paging, sparc

我知道在 x86 架构中，我可以在内核上下文中读取 CR3 寄存器以跟踪内核的页面目录。

现在我正在尝试在具有 SPARC 架构的 linux 上做同样的工作。如何在 SPARC 中访问内核的页面目录？

SPARC 中与 x86 CR3 对应的寄存器是什么？

他们的分页机制是否相同？

附言。ARM 呢？，我有一些关于这些的文件，但我需要更多……提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:51:32.653

在 SPARC 上，TLB 故障是在软件中处理的，所以没有像 CR3 这样的东西。您必须检查当前的流程数据结构才能找到所需的信息。

另一方面，ARM 使用硬件转换，MMU 作为协处理器处理，使用 MRC/MCR 访问转换表基址寄存器。有关更多信息，请参见 ARM 网站：http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0056d/ [BABIDADG.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0056d/BABIDADG.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:32:17.497

SPARC 规范本身不强制使用 MMU，也不要求 MMU 的特定实现；它只定义了 CPU 和 MMU 之间的接口（主要关注需要通过 MMU 活动生成的陷阱）。

话虽如此 - 我必须在这里声明，我只知道 Sun / Fujitsu 的 SPARC CPU，而不是嵌入式产品（LEON 和前辈） - SPARC CPU 早`sun4`在 1990 年的工作站 CPU 就有 MMU。

与许多非强制 SPARC CPU 功能一样，MMU 的控制通过所谓**的***地址* **S***速度* **I***标识符*(ASI) 进行。
这些 ASI 是 SPARC 体系结构的一个特性，最好将其描述为 x86 分段和内存映射寄存器之间的混合。它们的使用改变了“地址”对 SPARC CPU 的含义（就像 x86 中使用段 [reg] 改变了“地址”的含义）——除了 ASI 地址范围后面没有可配置的“描述符表” ，但通常是特定于硬件的控制寄存器。即，它们没有“映射”到普通的物理地址空间，而是“映射”到*备用*地址范围。

首先，在、`sun4`和架构（32 位 sparcv7）中，MMU 被称为（SPARC 参考 MMU）并实现了两级硬件表遍历。这已被弃用，我不记得对此的控制规则是什么。`sun4c``sun4d``sun4m``srmmu`

当 Sun 创建该`sun4u`架构时，硬件实现的转换表遍历被认为开销太高而且内存太密集。因此，table-walking MMU 实现完全被支持在软件中实现*大多数*（但不是全部）MMU 功能。特别是，唯一可编程到硬件中的是 TLB 的内容，转换后备缓冲区 - 这意味着如果映射没有容易地缓存在 TLB 中，则会发生 MMU 未命中陷阱，并且陷阱处理程序将执行表查找，重新编程最后的TLB（以便之后重新发出指令将成功）。这就是名称`sfmmu`（*Software* MMU）的由来。MMU 通过控制`ASI_MMU`，而实际的上下文寄存器是特定于 CPU 的......

见，供参考：

*   [pg。2007 UltraSPARC 架构参考手册的第 351ff 段](http://www.opensparc.net/docs/UA2007-current-draft-HP-EXT.pdf)- 这列出了与 MMU 控制相关的 ASI 编号。
*   OpenSolaris 源代码，[使用`ASI_MMU_CTX`](http://src.opensolaris.org/source/search?q=ASI_MMU_CTX&project=onnv).
*   OpenSolaris 源代码，[`sfmmu_asm.s`](http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/sfmmu/ml/sfmmu_asm.s)（小心眼睛流血和大脑变得糊状）
*   OpenSolaris 源代码， 即软件端哈希链/转换表遍历；它可能有幸成为 Solaris 内核中最大的源文件……[`hat_sfmmu.c`](http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/sfmmu/vm/hat_sfmmu.c)

回复，ARM：我建议您再次提出这个问题，作为一个单独的帖子。随着 ARM 多个（无 mmu 和带 mmu）实现的存在，已经发展（例如，有基于 ARMv7 指令集的带/不带 MMU 的 Cortex-A8/M3）。ARM 自己的 MMU 规范通常称为*VMSA*（虚拟内存系统架构），并且有几个修订版。这篇文章已经太长了，无法包含更多细节；-)

# batch-file - 如果时间在指定时间段内，则设置批处理文件变量

> ID：11743471
> 
> 赞同：3
> 
> 时间：2012-07-31T15:20:39.723
> 
> 标签：batch-file, dos, batch-processing

我创建了一个批处理文件，该文件定期从自动化作业中触发。

在批处理文件中，我想检查时间是否在上午 12 点到上午 8 点之间，设置一个具有特定值的变量，否则，将其设置为默认值。

任何提示我如何在批处理文件中执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T16:14:32.203

我看到这已经得到了回答，但解决方案对我来说似乎不必要地复杂。此外，一些额外的解释可能有助于理解解决方案。

您可以使用以下命令访问批处理文件中的当前时间`%TIME%`：

```
C:\>echo %TIME%
18:01:52,64 
```

您可以使用以下语法访问`%TIME%`（或任何其他变量）的子字符串：

```
C:\>echo %TIME:~0,2%
18 
```

因此，要按照您的描述有条件地设置变量，您将执行以下操作：

```
IF %TIME:~0,2% LSS 08 ( SET VAR=particularValue ) ELSE ( SET VAR=defaultValue ) 
```

**编辑：**在@dbenham 的帮助下更正了解决方案 - 查看他的回答和评论，看看我最初的尝试有什么问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T16:01:57.180

```
for /f "delims=:." %%T in ("%time%") do if %%T lss 08 (set var=someValue) else (set var=default) 
```

***编辑***- zb226 是正确的 - 上面比需要的更复杂。做起来简单得多

```
if %time:~0,2% lss 08 (set var=someValue) else (set var=default) 
```

08 中的前导 0 很关键。原因是 0 前面的数字被视为八进制表示法，而 8 和 9 不是有效的八进制数字。如果在任一侧看到无效的八进制数，IF 语句将进行字符串比较。因此，如果当前小时为 09，`09 lss 8`则为 TRUE，因为 0 在 8 之前排序。更改为`09 lss 08`给出正确答案。

如果恰好是上午 8:00:00.00，则上述任一解决方案都将值设置为默认值。如果您真的想要上午 8:00:00.00 之前的“特定值”并在之后的任何时间默认，那么它有点复杂。在那种情况下，我会回到 FOR 解决方案。

```
for /f "tokens=1-4 delims=:." %%A in ("%time%") do (
  set var=default
  if %%A lss 08 set var=someValue
  if %%A%%B%%C%%D equ 08000000 set var=someValue
) 
```

# sharepoint-2010 - 在没有 SharePoint 2010 的情况下在本地使用对象模型开发 Infopath 2010

> ID：11743483
> 
> 赞同：0
> 
> 时间：2012-07-31T15:21:31.013
> 
> 标签：sharepoint-2010, infopath2010, sharepoint-object-model

1.  我在 Windows 7 企业版上
2.  我已经安装了 infopath 2010 并且之前使用过它
3.  但由于我的要求，我必须使用对象模型来编写代码，并且需要我添加对 SharePoint 的引用
4.  我读了一些文章，但它没有任何解决方案满足我的需要（它是在 web 部分和远程调试上，他们谈到了导出注册表并将其导入本地框）

我的问题是我需要在我的本地电脑上安装什么（最少的 SP Foundation 或任何它），以便我可以开发代码并在 Visual Studio 中添加共享点参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:24:26.063

最低限度是将 Microsoft.SharePoint.dll（位于 14 hives 文件夹中）添加到您的项目中 - 但您不会对此感到满意。您可能能够编写代码并且编译器不会抱怨缺少引用，但您将无法调试或从 SharePoint 对象获取任何信息，因为所有信息都存储在特定数据库（配置数据库、内容数据库）中。

最好的解决方案是安装 SP Foundation（最好在 VM 中） - 如果您想针对仅在标准/企业版本中可用的功能（例如 InfoPath Froms Service）进行编码，则必须安装相应的版本。

# php - 内存限制、500 错误、巨大的上传问题

> ID：11743486
> 
> 赞同：1
> 
> 时间：2012-07-31T15:21:41.420
> 
> 标签：php, file-upload, ini

阅读一些答案，但从未找到与我的问题直接相关的内容。

我有一个 48 兆字节的 .csv 文件，我正在尝试上传和运行，以便客户可以进行大规模的产品更新/插入。我们偶尔可以让上传工作，但现在我的 Ajax 请求返回了 500 错误。以下是一些细节：

**我们的服务器支持将最大上传文件大小设置为 100 兆字节。**

我在脚本顶部使用以下 ini_sets：

```
set_time_limit(0);
ini_set("memory_limit",-1);
ini_set('max_execution_time', 0); 
```

这就是我认为问题所在。由于我必须做大量的测试才能使这个脚本工作；我大概每天上传 10 次左右。这确实给服务器带来了压力，而且他们的网站目前每天也有大约 500 次访问。

每月带宽传输：12775.43 / 3000 MB

关于这个问题，我有什么想法可以反馈给我的老板吗？这有点需要今天完成，我仍在处理清理问题，但如果这是带宽问题，那么我们不能再次进行测试，直到明天服务器重置它的每月带宽。

感谢您的任何想法。

**注意：这在过去有效。如果我做较小尺寸的文件，它也能正常工作，但客户端明确要求我们使用这个 48 兆字节的 .csv 文件。**

**再次注意：上传工具似乎在一定程度上工作，因为它发布并上传到我希望它发布到的文件夹。我认为的问题是，在花费 10 分钟上传和准备文件后，解析所有数据并超时。**

**另一组注释：以下是 500 Internal Server 问题：**

**服务器遇到内部错误或配置错误，无法完成您的请求。请联系服务器管理员 webmaster@ *_* __ *_* .com 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。服务器错误日志中可能提供有关此错误的更多信息。此外，在尝试使用 ErrorDocument 处理请求时遇到 500 Internal Server Error 错误。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:25:34.017

也许这有任何帮助。

[https://github.com/valums/file-uploader/issues/61](https://github.com/valums/file-uploader/issues/61)

> 我已经测试了上传大文件（一个 20MB+ 的文件和 64MB 的 php 内存设置），并且从 PHP 中获得了一致的内存最大化错误，因为它将上传的 XHR 内容加载到 $HTTP_RAW_POST_DATA 中。尽管将 always_populate_raw_post_data 设置为 false，但它一直在这样做，并且由于文档在这个问题上有点稀疏，我在解决它时遇到了麻烦。事实证明，如果您将内容类型伪造为“multipart/form-data”，PHP 不会填充 $HTTP_RAW_POST_DATA（我尝试了其他内容类型，这是唯一似乎有效的内容类型），并且您可以上传大文件而无需点击低内存限制。至少在 Chrome 和 Firefox 中，二进制完整性得到了维护，这是我尝试过的。*

我在这里找到了它：

[通过 php 输入处理上传时减少 PHP 中的内存消耗](https://stackoverflow.com/questions/9430021/reduce-memory-consumption-in-php-while-handling-uploads-by-php-input)

# .net - Smtp 服务器 - powershell ping 脚本上的“发送邮件失败”

> ID：11743491
> 
> 赞同：0
> 
> 时间：2012-07-31T15:22:06.803
> 
> 标签：.net, powershell, iis-7, smtp

我正在开发一个 Powershell 脚本，它可以 ping 服务器并在 ping 失败时向我发送电子邮件。除电子邮件部分外，一切正常。当我使用下面的代码（在 ping 并取回响应之后）时收到的错误是“发送邮件失败”。嗯。我试过改变我的身份验证，但这并没有改变任何东西。目前，它在 IIS 中配置为在 localhost 的 25 端口上运行。关于我需要更改什么的任何想法？防火墙？不同的端口？

```
$smtpServer = "localhost:25"

$msg = new-object Net.Mail.MailMessage
$smtp = new-object Net.Mail.SmtpClient($smtpServer)

$msg.From = "address@mail.com"

$msg.To.Add("destination@mail.com")

$msg.Subject = "Warning: ping failed on $server"

$msg.Body = "The server $server with ip address $ip does not reply!"

$smtp.Send($msg) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:36:11.750

尝试从 $smtpServer 变量 ($smtpServer = "localhost") 中删除端口。端口（默认为 25）已在 $smtp ($smtp.Port) 上配置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:28:52.850

你用的是什么服务器？如果您使用的是 Exchange 2007/2010，则需要在 Exchange 端进行其他配置，如本文所述。 [http://blogs.technet.com/b/exchange/archive/2006/12/28/3397620.aspx](http://blogs.technet.com/b/exchange/archive/2006/12/28/3397620.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:31:35.993

这听起来像是 IIS 的问题。是否配置了中继？

# php - 显示由 php 生成的内容的问题，wordpress 在 IE 中构建

> ID：11743495
> 
> 赞同：-4
> 
> 时间：2012-07-31T15:22:24.997
> 
> 标签：php, html, css, internet-explorer

这是网站[http://www.therustyzip.com/](http://www.therustyzip.com/)

我似乎根本无法让它工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:25:35.367

从您页面的来源可以看出您的问题始于：

```
<html> lang="en"> 
```

您需要将其更改为：

```
<html lang="en"> 
```

# java - Java，在两点之间生成点的直接路径

> ID：11743497
> 
> 赞同：2
> 
> 时间：2012-07-31T15:22:30.007
> 
> 标签：java, path, point

我目前有一个不好的方法来执行此操作，它只是将起点平移 1/-1，具体取决于 x/y 坐标是在当前坐标之上还是之下，并将其添加到 ArrayList 直到起点 .equals(end )，这是一个糟糕的解决方案，因为它创建了一个非常糟糕的路径，看起来像下面的黑色路径。

![https://dl.dropbox.com/u/64681860/paths.png](../Images/11e41636452409af2e752bf7a95ad934.png)

我正在尝试在两点之间生成点的直接路径（与 Graphics.drawLine 制作的线相同）。

我猜我需要使用 Math 类来获取角度，但我对 Math API 不是很熟悉。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T15:44:05.247

一种有点幼稚的方法是计算斜率的比率，而不是角度。

就像是：

```
float ratio = (y2 - y1) / (x2 - x1); 
```

然后：

```
width = x2 - x1;
for(int i = 0; i < width; i++) {
    float x = x1 + i;
    float y = y1 + (ratio * i);
    points.add(new Point(x,y));
} 
```

如果浮动不是您需要的，您需要进行一些转换。

您还需要处理 x1 == x2 的特殊情况，否则会出现被零除的错误。

使用这种方法，线越陡，生成的点就越少。如果您希望无论角度如何，点都均匀分布，则需要打破 sin/cos/tan。

为至少主要 8 个罗盘方向上的线编写单元测试，以消除任何故障。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:44:18.947

这实际上是一个数学问题而不是编程问题。您需要找到从`start`到的向量，`end`然后对其进行缩放并将其添加到`start`所需的点数。

在伪代码中：

```
f(start,end,nPoints) -> (path)
   delta = (end-start) / nPoints //Find the best difference vector.
   current = start //Set the current point to the start.
   i = 0
   while(|current-end| < epsilon)
      current += delta
      path[i] = current
      i = i + 1 
```

我假设这些点是浮点数（由于除法）。 `epslion`应该选择一个小的值（取决于你的问题）来检查相等性（永远不要`!=`用于浮点！）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:45:49.217

这是一个非常简单的概念，但您并不清楚您到底想要什么。根据定义，任意两点之间有无数个点（并且在其中两个点之间*，*存在无数个点。依此类推。）

最简单的解决方案是计算点 A 和点 B 之间的线的公式，然后决定你希望你的点相距多远，并使用你的线公式计算这些点。

初等几何告诉我们，两点之间的斜率在 y 的变化超过 x 的变化。因此`m = (y1 - y2)/(x1 - x2)`，所有这些值都是双精度值，并且`x1`和`y1`属于同一点。

那么两点之间的直线的公式是`y - y1 = m(x - x1)`。然后你所要做的就是开始插入值，比如说，`x`获取结果`y`，然后绘制它。

当然，这是整个事情背后的*想法。*使用向量会好得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T15:29:01.343

查看[这个](https://stackoverflow.com/questions/7586063/how-to-calculate-the-angle-between-two-points-relative-to-the-horizontal-axis)先前回答的问题以计算角度。然后使用距离公式求距离。

```
double dist = Math.sqr((x2 - x1)^2 + (y2 - y1)^2);  //obviously wont compile but you get the idea. 
```

# android - Android：通过消息传递、G+、Twitter、Facebook 可靠地共享资产中的图像？

> ID：11743502
> 
> 赞同：5
> 
> 时间：2012-07-31T15:22:49.240
> 
> 标签：android, android-intent, share

我正在尝试在我的 android 应用程序中创建一个按钮，允许用户使用他们选择的社交媒体网络共享图像。图像文件存储在应用程序的资产文件夹中。

我的计划是实现一个自定义 ContentProvider 以提供对图像的外部访问，然后发送一个 TYPE_SEND 意图，指定我的内容提供程序中图像的 uri。

我已经这样做了，它适用于 Google+ 和 GMail，但对于其他服务它失败了。最难的部分是找到关于我应该从我的 ContentProvider 的 query() 方法返回的信息。一些应用程序指定一个投影（例如 Google+ 要求提供 _id 和 _data），而一些应用程序将 null 作为投影传递。即使指定了投影，我也不知道列中需要哪些实际数据（类型）。我找不到这方面的文档。

我还实现了 ContentProvider 的 openAssetFile 方法，它被调用（Google+ 调用了两次！），但随后查询方法也不可避免地被调用。似乎只有查询方法的结果才算数。

有什么想法我哪里出错了吗？我应该从我的查询方法返回什么？

下面的代码：

```
// my intent

Intent i = new Intent(android.content.Intent.ACTION_SEND);
i.setType("image/jpeg");
Uri uri = Uri.parse("content://com.me.provider/ic_launcher.jpg");
i.putExtra(Intent.EXTRA_STREAM, uri);       
i.putExtra(android.content.Intent.EXTRA_TEXT, text);
startActivity(Intent.createChooser(i, "Share via"));

// my custom content provider

public class ImageProvider extends ContentProvider
{
private AssetManager _assetManager;

public static final Uri CONTENT_URI = Uri.parse("content://com.me.provider");

// not called
@Override
public int delete(Uri arg0, String arg1, String[] arg2) 
{
    return 0;
}

// not called
@Override
public String getType(Uri uri) 
{
    return "image/jpeg";
}

// not called
@Override
public Uri insert(Uri uri, ContentValues values) 
{
    return null;
}

@Override
public boolean onCreate() 
{
    _assetManager = getContext().getAssets();
    return true;
}

@Override
public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) 
{
    MatrixCursor c = new MatrixCursor(new String[] { "_id", "_data" });

    try
    {
                    // just a guess!! works for g+ :/
        c.addRow(new Object[] { "ic_launcher.jpg",  _assetManager.openFd("ic_launcher.jpg") });
    } catch (IOException e)
    {
        e.printStackTrace();
        return null;
    }

    return c;
}

// not called
@Override
public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs) 
{
    return 0;
}

// not called  
@Override
public String[] getStreamTypes(Uri uri, String mimeTypeFilter)
{

    return new String[] { "image/jpeg" };
}

// called by most apps
@Override
public AssetFileDescriptor openAssetFile(Uri uri, String mode) throws FileNotFoundException 
{

    try 
    {
        AssetFileDescriptor afd = _assetManager.openFd("ic_launcher.jpg");
        return afd;
    } catch (IOException e) 
    {
        throw new FileNotFoundException("No asset found: " + uri);
    }
}

// not called
@Override
public ParcelFileDescriptor openFile(Uri uri, String mode)
        throws FileNotFoundException
{

    return super.openFile(uri, mode);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T23:13:26.770

谢谢，您的问题解决了我的问题；）我遇到了与您完全相反的问题：除 g+ 外，所有服务都可以使用。我在查询方法中返回 null，这导致 g+ 崩溃。

真正暴露我的图像的唯一方法是实现`openFile()`. 我将图像存储在文件系统中，而不是资产中，但我想您可以`ParcelFileDescriptor`从您的文件系统中获取`AssetFileDescriptor`并返回它。我的`openFile()`方法如下所示：

```
@Override
public ParcelFileDescriptor openFile(Uri uri, String mode)
        throws FileNotFoundException {
    String path = uri.getLastPathSegment();
    if (path == null) {
        throw new IllegalArgumentException("Not a Path");
    }
    File f = new File(getContext().getFilesDir() + File.separator + "solved" + path + ".jpg");
    int iMode;
    if ("r".equals(mode)) {
        iMode = ParcelFileDescriptor.MODE_READ_ONLY;
    } else if ("rw".equals(mode)) {
        iMode = ParcelFileDescriptor.MODE_READ_WRITE;
    } else if ("rwt".equals(mode)) {
        iMode = ParcelFileDescriptor.MODE_READ_WRITE | ParcelFileDescriptor.MODE_TRUNCATE;
    } else {
        throw new IllegalArgumentException("Invalid mode");
    }       
    return ParcelFileDescriptor.open(f, iMode); 
} 
```

这适用于我安装的所有服务，`ACTION_SEND`除了 g+。使用您的查询方法使其也适用于 google plus。

# java - 如何使用 CardLayout 显示下一个卡片项目？

> ID：11743505
> 
> 赞同：3
> 
> 时间：2012-07-31T15:23:01.897
> 
> 标签：java, swing, jframe, jpanel, cardlayout

我创建了一个类，它有一个名为cards 的面板，它的布局是CardLAyout。我添加了卡片项目。在这个类中，我想通过调用哪个来创建一个单独的方法，布局切换到下一张卡片。

```
import java.awt.CardLayout;
import java.awt.Container;

public class cards 
{
      public Container cards;

//creating objects for other classes
public cricGUI gu;
public cricMainMenu mm;

public void cardsList()
{
    cards = new Container();
    cards.setLayout(new CardLayout());

    //adding panels and contentPanes from other classes.
    mm = new cricMainMenu();
    gu = new cricGUI();

    cards.add(mm.contentPane);
    cards.add(gu.pane);
}
public void getNextCard(Container x)
{

} 
```

}

所以你可以看到我在我的卡片中添加了其他类的面板。我想要做的是创建 getNextCard() 方法，它将当前活动的面板作为它的参数。当我调用这个函数时，它应该用我的 CardLayout 列表中的下一个切换当前活动的面板。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:46:47.613

You may want to have a look at [How to use CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html).

Basic principle is, that every card gets its own identifier (usually a String Constant). To switch to a specific card, you call

```
layout.show( container, identifier ); 
```

To implement a method like `getNextCard()` (better name would probably be `switchToNextCard( container, identifier )`) you could for example use an easy switch case construct like:

```
public void switchToNextCard( Panel container, String currentCard )
{
      switch ( currentCard )
      {
        case CARD1:
          layout.show( container, CARD2 );
          break;
        case CARD2:
          layout.show( container, CARD1 );
          break;
        default :
          throw IllegalArgumentException("Unsupported CardIdentifier.")
          break;
      }
} 
```

In this Method CARD1 and CARD2 are your identifiers (String Constants) for your panels within your cardlayout. In this case it would switch back and forward between those two cards.

# python - Python Popen 的行为不像子进程

> ID：11743506
> 
> 赞同：0
> 
> 时间：2012-07-31T15:23:04.560
> 
> 标签：python, subprocess

我的问题是——我需要从子进程获取输出，我使用以下代码来调用它——（随意忽略长参数。导入的东西是 stdout= subprocess.PIPE）

```
 (stdout, stderr) = subprocess.Popen([self.ChapterToolPath, "-x",  book.xmlPath , "-a", book.aacPath , "-o",   book.outputPath+ "/" + fileName + ".m4b"], stdout= subprocess.PIPE).communicate()
        print stdout 
```

感谢下面的答案，我已经能够获得程序的输出，但我最终还是要等待进程终止，然后才能得到任何东西。有趣的是，在我的调试器中，控制台中有各种各样的文本飞过，它们都被忽略了。但是，当任何东西都以黑色写入控制台时（我正在使用 pycharm），程序继续没有问题。主程序可以等待某种输出以便继续吗？这是有道理的，因为我正在尝试与它进行通信......我可以在控制台中看到的文本与使其进入标准输出的实际文本之间有区别吗？我将如何收集写入控制台的文本？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:24:51.773

[文档`subprocess.call()`](http://docs.python.org/library/subprocess.html#using-the-subprocess-module)的第一行是这样描述的：

> 运行 args 描述的命令。等待命令完成，然后返回 returncode 属性。

因此，它必须等待子进程退出。

[`subprocess.Popen()`](http://docs.python.org/library/subprocess.html#popen-constructor)相比之下，不这样做，而是返回一个进程的句柄，而不是 then `communicate()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:38:43.043

要从程序中获取所有输出：

```
from subprocess import check_output as qx

output = qx([program, arg1, arg2, ...]) 
```

在程序运行时获取输出：

```
from subprocess import Popen, PIPE

p = Popen([program, arg1, ...], stdout=PIPE)
for line in iter(p.stdout.readline, ''):
    print line, 
```

`program`如果在交互运行时逐行打印，但在作为子进程运行时缓冲其输出，则 ' 端可能存在缓冲问题。根据您的操作系统或程序，有多种解决方案，例如，您可以使用[pexpect 模块](http://www.noah.org/wiki/Pexpect#Q%3a_Why_not_just_use_a_pipe_.28popen.28.29.29.3F)运行它。

# html - 使用paintEvent() 绘制文本

> ID：11743507
> 
> 赞同：0
> 
> 时间：2012-07-31T15:23:05.080
> 
> 标签：html, qt, qt4, qstring, qpainter

我有一个程序需要用paintEvent() 绘制一些文本。我试过这个：

```
1\. QPainter painter; // painter for the canvas
2\. painter.drawText(QPoint location, QString canvasText); 
```

在哪里

```
3\. QString canvasText = variablesText.append("< b >");
4\. variablesText.append((*fieldIter).second.c_str());
5\. variablesText.append(":< /b > ");
6\. variablesText.append(someValue);
7\. variablesText.append("\n"); 
```

我需要格式化文本，canvasText 应该如下所示：

**一些粗体文本：**一些非粗体文本。（新队）

**一些粗体文本 2：**一些非粗体文本 2。(newLine) 并且持续了一段时间。

我遇到的问题是 QString 中不能包含 HTML 代码，因此文本显示如下：

```
< b>Some bold text:< /b> some not bold text. < b>Some bold text 2: < /b>
some not bold text2.\n 
```

有没有办法在paintEvent中使用draw来以我需要的方式显示文本？带有 QString （或 QLabel 或其他东西）

我正在使用 Qt4。

感谢您的帮助 =)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:03:59.443

[`QTextDocument`](http://doc.qt.nokia.com/4.7-snapshot/qtextdocument.html)似乎很适合你所追求的，特别是`setHtml()`. A`QTextDocument`可以格式化您的文本并通过小部件的`QPainter`. 像下面这样的东西是最简单的解决方案：

```
void Test::paintEvent(QPaintEvent *)
{
  QPainter painter(this);

  QTextDocument doc;
  doc.setHtml("<b>Title</b><p>Body Text</p>");

  doc.drawContents(&painter, rect());
} 
```

但是请记住，这可能非常低效。您可能只想在源 html 更改时才`drawContents()`缓存...`QPixmap`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T15:57:40.887

假设您正在尝试通过painter在`QRect`rect的 str 中打印 HTML 格式的文本内容。`QPainter`执行以下操作：

```
QString str; // this string contains HTML formatted contents 
QTextDocument * document = new QTextDocument(this) ;
document->setHtml(str) ;

painter.translate( rect.left() , rect.top() ) ;
document->drawContents( &painter , QRect( 0 , 0,  rect.width() , rect.height() ) ; 
```

# xml - 根据另一个属性的值限制属性值

> ID：11743510
> 
> 赞同：3
> 
> 时间：2012-07-31T15:23:13.520
> 
> 标签：xml, xsd

考虑这个 XSD：

```
<?xml version="1.0" encoding="UTF-8"?>

<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="Test">
        <xs:complexType>
            <xs:attribute name="X">
                <xs:simpleType>
                    <xs:restriction>
                        <xs:enumeration value="One"/>
                        <xs:enumeration value="Two"/>
                    </xs:restriction>
                </xs:simpleType>
            </xs:attribute>
            <xs:attribute name="Y">
                <xs:simpleType>
                    <!-- Choose how to restrict the value based on the value of the X attribute. -->
                    <xs:restriction base="if X=One then List1 else List2"/>
                </xs:simpleType>
            </xs:attribute>
        </xs:complexType>
    </xs:element>

    <xs:simpleType name="List1">
        <xs:restriction base="xs:string">
            <xs:enumeration value="Option1"/>
            <xs:enumeration value="Option2"/>
        </xs:restriction>
    </xs:simpleType>

    <xs:simpleType name="List2">
        <xs:restriction base="xs:string">
            <xs:enumeration value="Option3"/>
            <xs:enumeration value="Option4"/>
        </xs:restriction>
    </xs:simpleType>
</xs:schema> 
```

所以对于属性`Test/@Y`，我想根据 的值来限制可能的值`Test/@X`。如果`X`是`One`，则`Y`can 必须在 中`List1`，否则，`Y`必须在 中`List2`。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:43:08.610

检查这个关于共现约束的问题：[XSD: Define attributes based on the value of previous attribute](https://stackoverflow.com/questions/11412224/xsd-define-attributes-based-on-the-value-of-previous-attribute/11413401#11413401)

总结：

*   在 XSD 1.1 中可能
*   在 XSD 1.0 中不可能

# eclipse-plugin - 如何在自定义 Eclipse 编辑器中公开内容格式化程序？

> ID：11743511
> 
> 赞同：2
> 
> 时间：2012-07-31T15:23:15.240
> 
> 标签：eclipse-plugin, jface

我正在通过子类化编写自定义 Eclipse 编辑器`TextEditor`，但我无法使用`Format`我配置的操作。

我阅读了[创建商业质量 IDE](https://www.ibm.com/developerworks/opensource/tutorials/os-ecl-commplgin2/)中的 3 个部分，并且了解了`SourceViewerConfiguration`. 我实现了所需的方法：

```
 override def getContentFormatter(viewer: ISourceViewer) = {
    val formatter = new MultiPassContentFormatter(getConfiguredDocumentPartitioning(viewer), IDocument.DEFAULT_CONTENT_TYPE)
    formatter.setMasterStrategy(new ScalaFormattingStrategy(textEditor))
    formatter
  } 
```

`Format`但是，我在菜单、上下文菜单、工具栏等中找不到任何位置。Java 快捷方式 ( `CMD-Shift-F`) 也不起作用。

编辑：我在`SourceViewerConfiguration`我创建的子类中实现了其他方法，其他一切都在我的编辑器中按预期工作（完成、超链接、协调）。

公开格式化程序的首选方法是什么？我还需要做些什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T18:48:25.793

引用[Eclipse 格式化程序常见问题解答](http://wiki.eclipse.org/FAQ_How_do_I_support_formatting_in_my_editor%3F)：

> 最后，您需要**创建一个**调用格式化程序的操作。文本基础结构没有定义通用的格式化操作，但很容易创建自己的格式化操作。该操作的 run 方法可以简单地在源查看器上调用以下命令来调用格式化程序：
> 
> `sourceViewer.doOperation(ISourceViewer.FORMAT);`

# powershell - PowerShell 返回多个值

> ID：11743512
> 
> 赞同：2
> 
> 时间：2012-07-31T15:23:16.417
> 
> 标签：powershell

我正在编写一个 PowerShell 函数，我希望它返回一个布尔值。问题是 PowerShell 将返回管道中的任何内容，而不仅仅是 return 语句中明确包含的内容。

考虑以下代码。

```
function getTrue(){
  $testVariable = "test"
  $test
  return $true
}

$answer = getTrue

Write-host $answer 
```

这段代码的输出是

```
test True 
```

这会返回一个`System.Object[]`. 我想强制返回值为 a `System.Boolean`。

如果我添加[Write-Host](https://docs.microsoft.com/en-gb/powershell/module/Microsoft.PowerShell.Utility/Write-Host?view=powershell-5.1) ，此代码可以正常工作：

```
function getTrue(){
  $testVariable = "test"
  Write-Host $test
  return $true
} 
```

唯一的问题是我依赖于其他人正在编写的函数（我无法修改它），并且我不能保证他们使用 a`Write-Host`而不是仅仅将变量留在行中。

有没有办法强制函数只返回我想要的值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T15:31:15.143

仅用于[`Out-Null`](https://technet.microsoft.com/en-us/library/hh849716.aspx)抑制意外返回：

```
function getTrue(){
    $test = "test";
    $test | Out-Null;
    return $true;
}

$answer = getTrue
Write-Host $answer 
```

和

```
function getTrue(){
    $test = "test";
    Write-Host $test | Out-Null;
    return $true;
}

$answer = getTrue
Write-Host $answer 
```

# sql - 如何从没有输出参数的存储过程中返回值

> ID：11743513
> 
> 赞同：2
> 
> 时间：2012-07-31T15:23:16.573
> 
> 标签：sql, stored-procedures, sql-server-2008-r2, return-value

这是我目前使用的存储过程的伪代码，

```
CREATE PROC uspFoo
(
@id int,
@type nvarchar(255),
@status bit output
)
AS
IF ....
SET @status=1
ELSE
SET @status=0
GO 
```

在执行这个存储过程时，我不得不传递一个输出参数来存储它的返回值，

```
DECLARE @id int, @type nvarchar(255), @status bit
SET @id=..
SET @type=..
EXEC uspFoo @id, @assayType, @status output

PRINT @status

GO 
```

返回值或在本例`status`中为 0 (false) 或 1 (true)。

我怎样才能`bit`直接返回一个值（例如），而不必将它存储在一个临时输出参数中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T15:29:58.630

在这种情况下，您可以使用存储过程的返回值。以下应该工作。

```
CREATE PROC uspFoo
(
@id int,
@type nvarchar(255)
)
AS
IF ....
  RETURN 1
ELSE
  RETURN 0
GO 
```

致电：

```
DECLARE @id int, @type nvarchar(255), @status bit
SET @id=..
SET @type=..
EXEC @status=uspFoo @id, @assayType

PRINT @status 
```

# java - 推广发布订阅模式以允许同一消息通道上的多种类型的良好模式是什么？

> ID：11743516
> 
> 赞同：1
> 
> 时间：2012-07-31T15:23:26.527
> 
> 标签：java, spring, design-patterns, observer-pattern, enterprise-integration

我正在使用春季发布订阅设置，将事件发布到单个频道。

不同的事件彼此完全不同，从类型派生侦听器的行为会很混乱。

我有足够的类型，但是我不喜欢大量不同的消息通道来处理不同的类型，所以如果可能的话，我想防止这种情况发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:22:44.353

该要求既不是队列哲学也不是主题哲学......除了一些额外的识别受体逻辑之外还有一些混合......我试图给出一个基本的想法，

```
 Message -> this interface will have multiple subclasses for different types of messages
  interface Receptor {
        boolean isMessageDigestable(Message);
        void digestMessage(Message);
        void subscribe(Publisher);
  }

 different receptor will implement Receptor

 class Publisher {

      List<Receptor> receptors;

      void addReceptor(){//your code here};

      void produceMessage() {
          Message m = ....//message production
          for (Receptor r : receptors)
            {
               if (r.isDigestableMessage(m))
                     r.digestMessage(m);
            }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:26:40.410

看看 Spring Integration 模式。您可以仅使用声明性逻辑来执行 pub/sub/channel 模式。

[http://static.springsource.org/spring-integration/reference/html/overview.html](http://static.springsource.org/spring-integration/reference/html/overview.html)

# java - 在 jsp 中确定列表大小时遇到 问题

> ID：11743519
> 
> 赞同：1
> 
> 时间：2012-07-31T15:23:31.403
> 
> 标签：java, list, jsp, view

我正在尝试确定视图中集合的大小。我不想像在下面的代码中那样传递大小`.size()`。

```
@RequestMapping(value = "/search/searchAndReplace")
public ModelAndView searchAndReplace(HttpServletRequest request, HttpServletResponse response) {
    ModelAndView model = new ModelAndView("content/search/searchAndReplace");

    List<Content> searchResults = (List<Content>) request.getSession().getAttribute("searchResults");
    model.addObject("searchResults", searchResults);
    model.addObject("searchResultsCount", searchResults.size());

    return model;
} 
```

在我看来，当我做的`${searchResultsCount}`事情正常时，当我做的时候`${searchResults.size()}`我得到了错误`Class javax.el.BeanELResolver can not access a member of class java.util.ArrayList$SubList with modifiers "public"`

我不明白为什么会窒息。有人可以提供一些见解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T15:29:39.690

在您的示例中，EL 解析器`size`在对象上查找属性，但对象上没有方法`getSize()`。相反，请使用 EL 表达式`fn:length(searchResults)`。您需要为此定义`fn`命名空间：

```
 <%@ taglib uri="http://java.sun.com/jsp/jstl/functions"
prefix="fn" %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T15:32:43.760

我很确定您需要先将其转换为它的对象类型。

```
<%
List<Content> searchResults = (List<Content>)request.getAttribute("searchResults");
%> 
```

比你应该能够使用 ${searchResults.size()}

# windows - CMD命令不起作用？

> ID：11743521
> 
> 赞同：0
> 
> 时间：2012-07-31T15:23:34.717
> 
> 标签：windows, cmd, dos, command-prompt

当我在桌面上的文件夹上运行以下命令时，它工作正常

```
cacls folder_name /e /p everyone:n 
```

但是，当我试图在同一个文件夹上做相反的事情时，即

```
cacls folder_name /e /p everyone:f 
```

这是给“错误：访问被拒绝”为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:28:13.747

您是否以管理员身份运行命令终端？对此最好的解释是，您无法完全控制正在运行的用户的此文件夹，因此您不能将此权限授予其他人。

# php - 在 Has 类型函数中返回布尔值

> ID：11743524
> 
> 赞同：0
> 
> 时间：2012-07-31T15:23:42.420
> 
> 标签：php

在构建“Has”类型函数时，我想知道是否应该返回一个像这样的布尔值

```
public function HasGolferAccess($user)
{
    if( $user instanceof GolferInterface)
    {
        return 1;
    }
    else
    {
        return 0;
    }
} 
```

这是一个好习惯吗？

## 编辑

这将返回一个严格的布尔值（1 和 0 是整数，而不是严格的布尔值）：

```
if( $user instanceof GolferInterface)
{
    return true;
}
else
{
    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:25:23.943

我建议简单地这样做：

```
public function HasGolferAccess($user)
{
    return ($user instanceof GolferInterface);
} 
```

# android - 选项卡片段中的按钮

> ID：11743525
> 
> 赞同：1
> 
> 时间：2012-07-31T15:23:44.617
> 
> 标签：android, eclipse, tabs, imagebutton

我正在关注如何使用片段制作标签的教程。每个选项卡在 java 文件中都有这个：

> 公共类 rdfri 扩展片段 {

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    if (container == null) {
        // We have different layouts, and in one of them this
        // fragment's containing frame doesn't exist.  The fragment
        // may still be created from its saved state, but there is
        // no reason to try to create its view hierarchy because it
        // won't be displayed.  Note this is not needed -- we could
        // just run the code below, where we would create and return
        // the view hierarchy; it would just never be used.
        return null;
    }
   return (LinearLayout)inflater.inflate(R.layout.rdfri, container, false);
} 
```

> }

我想尝试在片段中获取一个 imageButton。我认为图像按钮可以使用以下代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.rdmon); 
```

> ImageButton Rainbowbook = (ImageButton) findViewById(R.id.imageButton1);

```
 rainbowbook.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {

            Intent myIntent = Intent(rdmon.this, RainbowBookActivity.class);
            rdmon.this.startActivity(myIntent);
        }
    }); 
```

> }

那么我将如何在片段代码中获取按钮代码呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:28:33.343

将按钮代码放在`onActivityCreated`片段类中的重写方法中。

```
@Override 
public void onActivityCreated(Bundle savedInstanceState) { 
    super.onActivityCreated(savedInstanceState);   
    ImageButton rainbowbook = (ImageButton) findViewById(R.id.imageButton1);

    rainbowbook.setOnClickListener(new View.OnClickListener() { 
    public void onClick(View view) { 
        Intent myIntent = Intent(rdmon.this, RainbowBookActivity.class); 
        rdmon.this.startActivity(myIntent); 
       } 
    }); 
} 
```

这当然假设您的 imagebutton 包含在您的片段布局中。

# php - in_array 如何检查对象是否在对象数组中？

> ID：11743527
> 
> 赞同：14
> 
> 时间：2012-07-31T15:23:48.010
> 
> 标签：php, object-comparison

是否`in_array()`进行对象比较以检查所有属性是否相同？如果`$obj1 === $obj2`，它会只做指针比较吗？

`$obj1->getId()`我正在使用 ORM，所以如果它进行对象比较，我宁愿循环测试是否已经在数组中的对象。如果没有，那就`in_array`更简洁了。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-31T15:26:46.347

[`in_array()`](http://php.net/manual/en/function.in-array.php)*进行松散*比较 ( ) ，`$a == $b`除非您传递`TRUE`给第三个参数，在这种情况下，它会进行*严格*比较 ( `$a === $b`)。

在语义上，`in_array($obj, $arr)`与此相同：

```
foreach ($arr as &$member) {
  if ($member == $obj) {
    return TRUE;
  }
}
return FALSE; 
```

...并且`in_array($obj, $arr, TRUE)`与此相同：

```
foreach ($arr as &$member) {
  if ($member === $obj) {
    return TRUE;
  }
}
return FALSE; 
```

...并引用[手册](http://php.net/manual/en/language.oop5.object-comparison.php)中实际检查的内容：

> 使用比较运算符（==）时，对象变量的比较方式很简单，即：如果两个对象实例具有相同的属性和值，并且是同一类的实例，则它们相等。
> 
> 另一方面，当使用恒等运算符 (===) 时，对象变量是相同的当且仅当它们引用同一类的同一实例时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:26:28.520

对象在 PHP 5+ 中始终是引用，并且只能通过使用`clone`.

这意味着您应该能够使用`in_array()`.

# naming - 警告和错误的通用术语？

> ID：11743528
> 
> 赞同：0
> 
> 时间：2012-07-31T15:23:49.863
> 
> 标签：naming

考虑您要将错误和警告插入到同一数据库实体中。你会怎么称呼这张桌子？

例子：

```
+----+-------+---------+
| ID | TYPE  | MESSAGE |
+----+-------+---------+
|  1 | ERROR |   FOO   |
|  2 | WARNG |   BAR   |
|  3 | ERROR |   TXT   |
+----+-------+---------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:31:41.327

我会使用**异常**。它也是一个很好的 Matrix 参考，所以一些用户可能会窃笑。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:26:00.737

`Message`将是我最好的个人猜测，但英语不是我的母语。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:25:12.873

一位同事认为`Signal`，从流程的角度来看，这将是通用术语。

# mysql - MySQL：通过查询获取组中的最新值

> ID：11743535
> 
> 赞同：3
> 
> 时间：2012-07-31T15:24:03.510
> 
> 标签：mysql, sql, database

我有两张桌子`questions`和`answered`. `answered`包含所有用户的所有问题的答案。一个用户可以多次回答一个问题。可以正确或错误地回答问题。

我正在寻找一个查询，它将返回一个类别中所有问题的正确和错误答案的计数。**不过，我只想使用最新的答案。**因此，如果用户之前错误地回答了相同的问题并且最近正确地回答了相同的问题，我只想计算最新的 - 正确的 - 一个。

这是我到目前为止得到的：

[http://sqlfiddle.com/#!2/31e2e/2/0](http://sqlfiddle.com/#!2/31e2e/2/0)

```
SELECT a.correct, count(*) as count
FROM answered a JOIN questions q ON a.question_id = q.id 
WHERE a.user_id = 1 AND q.category_id = 1
GROUP BY correct 
```

它返回

```
|  CORRECT  |  COUNT  |
-----------------------
|  0        |   2     |
-----------------------
|  1        |   4     |
----------------------- 
```

我想要的是

```
|  CORRECT  |  COUNT  |
-----------------------
|  0        |   1     |
-----------------------
|  1        |   2     |
----------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:37:36.987

这是您需要的查询：

```
SELECT a.correct, count(*) as counter
FROM answered a
JOIN (SELECT user_id, question_id, max(created) as maxCreated
      FROM answered
      GROUP BY user_id, question_id) aux
  ON a.user_id = aux.user_id AND
     a.question_id = aux.question_id AND
     a.created = aux.maxCreated
JOIN questions q ON a.question_id = q.id
WHERE a.user_id = 1 AND q.category_id = 1
GROUP BY a.correct 
```

使用`aux`子查询仅选择来自给定用户的问题的最后一个答案的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:42:10.437

如果您只需要在给出正确答案时计算正确答案：

```
select b.correct, count(*) from
(
SELECT a.question_id, max(a.correct) correct 
FROM answered a JOIN questions q ON a.question_id = q.id 
WHERE a.user_id = 1 AND q.category_id = 1
GROUP BY a.question_id
 ) B 
group by b.correct 
```

如果后来不正确的答案消除了正确的答案，并且您只需要最后/当前的结果：

```
select a.correct,count(*) from 
(
select user_id, question_id, max(created) maxDate 
from answered a WHERE a.user_id = 1
group by a.user_id, a.question_id
) m

join answered a 
 on m.question_id=a.question_id 
    and m.user_id=a.user_id
    and m.maxDate=a.created
join questions q on a.question_id=q.id

where q.category_id = 1

group by a.correct 
```

# javascript - 将 DIV 内容复制到另一个 DIV

> ID：11743538
> 
> 赞同：1
> 
> 时间：2012-07-31T15:24:06.457
> 
> 标签：javascript, jquery, html

如何在使用 jquery 加载页面时将 DIV1 的内容复制到 DIV2？我试过了

```
$('.buffer').html($("#beskeder_vis").html()); 
```

但是我没能成功

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:26:18.350

假设您的选择器是正确的，您应该将代码放入 .ready() 事件中。

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

所以像：

```
jQuery(document).ready(function() {
    jQuery('.buffer').html(jQuery("#beskeder_vis").html());
} 
```

否则 jQuery 将无法找到您的元素，因为在执行您的函数时未加载 DOM。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T15:26:09.420

您应该在就绪事件上绑定事件处理程序。请参阅文档：[就绪功能](http://api.jquery.com/ready/)

```
$(document).ready(function () {
  $('.buffer').html($("#beskeder_vis").html());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:26:12.930

```
$('#two').html($('#one').html()); 
```

看这个[活生生的例子](http://jsfiddle.net/UKBxH/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T15:32:01.910

这个对我有用。它可能与您使用 Proof [jsfiddle的 jquery 版本有关](http://jsfiddle.net/weightlossexp/5G439/)

# asp.net - 处理 EF4 中模型的默认值

> ID：11743542
> 
> 赞同：3
> 
> 时间：2012-07-31T15:24:30.173
> 
> 标签：asp.net, visual-studio-2010, oop, orm, entity-framework-4

我想知道在制作模型时处理关系默认值的最佳方法是什么。（特别是 EF4）

例如，我的组织有一个默认联系人，我想知道哪一个是最好的方法。我有这两个选项（或任何其他人建议如果更好）

使用关系：

```
public  class Contact
{
    public int Id { get; set; }
    public string FirstName { get; set; }
}

public  class Organization
{
    public int Id { get; set; }
    public string Name { get; set; }
    public ICollection<Contact> Contacts { get; set; }
    //Use a relationship for the default contact?
    public Contact DefaultContact { get; set; }
} 
```

使用价值：

```
public  class Contact
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    //Use value?
    public boolean IsDefault { get; set; }
}

public  class Organization
{
    public int Id { get; set; }
    public string Name { get; set; }
    public ICollection<Contact> Contacts { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:35:22.653

我会选择选项 1。虽然 2 肯定更容易实现，但它不会强制执行诸如“不能有 2 个默认联系人”之类的规则。我最终得到如下内容：

```
public class Organization {
    // ...
    public virtual ICollection<Contact> { get;set; }
    [ForeignKey("DefaultContactId")]
    public Contact DefaultContact { get;set; }
    public int? DefaultContactId { get;set; }
} 
```

这种方法有一个限制 - 它不适用于嵌套删除（有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/10584341/entity-framework-5-0b2-code-first-one-to-many-and-one-to-one-for-the-same-table)）。因此，您需要为一对多关系禁用 CascadeOnDelete：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Contact>().HasRequired(co => co.Organization).WithMany().WillCascadeOnDelete(false);
} 
```

（代码未经测试就完成，但应该可以工作）

另一个问题是无法在添加组织的同时添加默认联系人，因为 EF 无法确定正确的语句顺序。您需要在每个之间调用 .SaveChanges。您仍然可以使用 TransactionScope 来克服这个问题，但它并不干净：

```
using (var ts = new TransactionScope()) 
{
    Organization org = new Organization
    {
        // ...
        Contacts = new Collection<Contact>()
    }
    org.Contacts = new Contact() {};

    orgRepo.SaveChanges();

    // Now wire up the default contact
    org.DefaultContact = org.Contacts.First();
    orgRepo.SaveChanges();
} 
```

# python - Python，MySQL 事务死锁

> ID：11743546
> 
> 赞同：0
> 
> 时间：2012-07-31T15:24:46.010
> 
> 标签：python, mysql, deadlock

我有一张让我烦恼的大桌子。我在这张表中有超过 3.5 亿条记录，并且每秒钟都在增长。我正在尝试对此表进行统计以构建静态报告。问题是我遇到了很多死锁。报告的逻辑在 python 中实现并进行 MySQL 查询。我正在尝试找到一种机制或方法来告诉我的 python 代码在检测到死锁时始终重试查询。问题是即使我使用脏记录它也会死锁。

我可以这样做：

```
retry until completion:
  query('SELECT ....') 
```

问候多米尼克

# hibernate - Hibernate Infinispan 实体/查询缓存

> ID：11743549
> 
> 赞同：1
> 
> 时间：2012-07-31T15:24:52.220
> 
> 标签：hibernate, caching, jboss, second-level-cache, infinispan

几天来，我一直在为这个问题撞墙。

我们正在尝试使用 Infinispan 实现 Hibernate 的二级缓存。该应用程序在 JBoss AS 6 上运行，并使用 JTA 事务。

在我们的 persistence.xml 中，我们有：

```
...
<!-- JTA configurations -->
<property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.JBossTransactionManagerLookup" />
<property name="current_session_context_class" value="jta" />

<!-- Infinispan configurations -->
<property name="hibernate.cache.use_second_level_cache" value="true" />
<property name="hibernate.cache.use_query_cache" value="true" />

<property name="hibernate.cache.region.factory_class" value="org.hibernate.cache.infinispan.InfinispanRegionFactory"/>
<property name="hibernate.cache.infinispan.cachemanager" value="java:CacheManager/entity"/>
... 
```

如此处定义[：](https://docs.jboss.org/author/display/ISPN/Using+Infinispan+as+JPA-Hibernate+Second+Level+Cache+Provider)

据我们了解，这是我们执行以下操作所需的缓存类型：

**用例一：** 我们在包含参考数据的数据库中有记录。此数据不会在很长一段时间内更改（我们希望 :)）。

我们希望缓存这些记录，因为它们可能会被大量查询。当用户查询这些数据时，不需要去数据库，因为它应该被缓存。

对于这种情况，缓存类型是查询缓存，还是实体缓存？由于查询总是相同的，我的理解是查询缓存，因为 que 查询应该总是返回相同的结果。

我的查询：

```
List<MyEntity> list = session.createCriteria(MyEntity.class)
        .add(Restrictions.eq("id", 1))
        .setCacheable(true)
        .list(); 
```

**用例二：** 用户从数据库中获取特定记录，他可能会更新它。我们希望将此实体（或实体列表）保存在用户的会话（登录会话）缓存中，因此如果他在客户端更新此实体，我们不需要在更新前进行选择。在这种情况下，由于我们正在保存特定的实体，所以它被认为是实体缓存，对吧？如果我们想存储

为此，我们正在使用：

```
@Cacheable (true)
@Cache(usage = CacheConcurrencyStrategy.TRANSACTIONAL)
public class MyEntity implements Serializable 
{
...
} 
```

我是否正确地做出了这些假设？如果没有，这里的方法是什么？我想我把这件事弄得一团糟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:21:39.690

第二级（实体）缓存是（使其更简单）基于 id 作为键的映射。因此，每次在其他实体中“引用”引用数据时，实体管理器首先检查它是否存在于缓存中，然后再进入数据库。

查询缓存是查询的结果（id）实体的缓存。然后基于 ids 它将检索相应的实体（最好从实体缓存中......），因此您需要将实体缓存在二级缓存中才能使用。

对于您的第一个用例，请参考数据：您应该将实体注释为可缓存并使用只读策略。实体管理器在加载时会将引用数据放入引用实体中，或者使用 find(clazz,id) 从二级缓存中取出引用数据。

案例 2 有点棘手。没有“会话”范围的缓存（如果您需要将中间结果绑定到用户会话，则需要通过 SFSB 或任何上层会话机制自行管理）。如果您使实体可缓存，它将为服务器上的每个用户缓存，实体管理器上下文与用户没有直接链接。

如果要防止在更新之前进行选择，则应通过扩展的持久性上下文防止实体达到非托管状态（以防止合并）。如果实体经常可以由多个用户更新，则缓存可能会降低性能，因为管理一致性所花费的时间比访问数据库所花费的时间要长。

如果您在那里遇到性能瓶颈，您应该首先查看相关的实体获取和传播注释，如果它们太大，您会发出请求或/并从数据库更新太多数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:00:23.460

交叉发布到[https://community.jboss.org/message/751275#751275](https://community.jboss.org/message/751275#751275) - 在那里查看我的答案。

# android - 从配置活动中获取设置

> ID：11743551
> 
> 赞同：0
> 
> 时间：2012-07-31T15:24:55.323
> 
> 标签：android, android-widget, appwidgetprovider

我需要以下情况的帮助。我有配置活动的小部件。在活动中是带有一些值的微调器，这应该会影响小部件的外观（只有一个文本`TextView`）。这时候，我在Configure activity中设置`AlarmManager`了widget update（service）和modify 。`TextView`这工作正常，但是当我重新启动手机时，不再设置警报，我应该再次设置它。我做不到，因为配置活动的设置丢失了。

有解决方案 - 将`AppWidgetID`小部件设置保存到数据库，但我认为，这不是最好的解决方案。一个问题是，该`onUpdate`方法在 ConfigureActivity方法`AppWidgetProvider`之前被调用。`onCreate`

简而言之，我需要从配置活动中获取一些设置，将其传递给 AppWidgetProvider 并更新小部件。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:29:03.980

听起来像是一份工作`SharedPreferences`。使用您的配置活动来设置偏好值并从您的小部件中读取它们。用于`PreferenceManager.getDefaultSharedPreferences(Context)`访问共享首选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:30:44.527

使用[共享首选项](http://developer.android.com/reference/android/content/SharedPreferences.html)怎么样？如果您需要保存一些与您的应用程序相关的首选项设置，您可以使用此解决方案。

像这样的东西：

```
SharedPreferences sharedPreference = getSharedPreferences(PREFS_NAME, 0);
String prefName = sharedPreference.getString(YOUR_PREF_NAME, DEFAULT_VALUE); 
```

# embedded - ARM 皮质架构的实时操作系统有哪些选择？

> ID：11743553
> 
> 赞同：2
> 
> 时间：2012-07-31T15:25:04.737
> 
> 标签：embedded, arm, rtos

我正在寻找 Arm M/R 系列的 RTOS（用 C++ 开发）？有人可以为 ARM Cortex-M 或 R 系列推荐好的 RTOS 吗？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T13:39:46.917

获得任何价值的答案都需要有人客观地评估所有这些，而这是不太可能的。

流行度和适合度不一定是一回事。您应该选择具有您的应用程序需要的功能、可与您的开发工具配合使用并且许可模型和成本满足您的需求和预算的 RTOS。

您使用的工具链是一个明确的考虑因素——内核感知调试和启动项目都有助于成功的开发。一些调试器/RTOS 组合甚至可能允许线程级断点和调试。

Keil 的 MDK-ARM 包括一个简单的 RTOS，具有基于优先级的抢占式调度和进程间通信以及一系列中间件，例如文件系统，以及 TCP/IP、CAN 和 USB 堆栈，无需额外费用（除非您想要源代码）。

IAR 提供[与许多](http://www.iar.com/en/Products/RTOS/Integrated-RTOSes/)用于 EWB 的 RTOS 产品的集成。他们的[ARM EWB 页面](http://www.iar.com/en/Products/IAR-Embedded-Workbench/ARM/)列出了具有内置和供应商插件支持的 RTOS。

我个人使用过 Keil RTX，但改用 Segger embOS，因为当时 RTX 在 Cortex-M 上还不够成熟，给我带来了一些问题。然而，RTX 的测量上下文切换时间比 embOS 快。值得注意的是，IAR 的 EWB 与 embOS 集成，因此如果您尚未投资工具链，这可能是更简单的途径。我还在 Cortex M 上评估了 FreeRTOS（与 OpenRTOS 相同，但具有不同的许可和支持模型），但发现它的 API 不如 embOS 复杂和完整，并且上下文切换时间明显更慢。

embOS 具有与 RTX 类似的中间件支持，但需要额外付费。然而，我设法挂接了另一个开源文件系统和处理器供应商提供的 USB 堆栈，在 embOS 和 RTX 中都没有任何问题，因此中间件支持可能并非在所有情况下都至关重要。

其他选项是 Micro C/OS-II。它再次获得中间件支持，但需要额外付费。它的调度程序比大多数其他调度程序更原始，要求每个线程都有不同的优先级，并且不支持循环/时间片调度，这对于非实时后台任务通常很有用。它主要通过详细描述内核实现的相关书籍而流行。较新的 Micro C/OS-III 克服了调度程序的限制。

另一方面，eCos 是一个完整的 RTOS 解决方案，具有高端功能，使其适用于您可能选择 Linux 但需要实时支持和占用空间小的许多应用程序。

关键是您可能会认为 RTOS 支持抢占式调度和 IPC，并且具有合理的性能水平（尽管我提到了不同的上下文切换时间，但在 STM32F1xx 上，72MHz 时的范围在 5 到 15us 之间）。因此，我会关注诸如成熟度（RTOS 可用于您的目标的时间——您甚至可以查看发行说明以了解它达到成熟度的速度以及可能存在哪些问题）、工具集成、API 是否适合您需要一个预期的软件架构、来自供应商或第三方的中间件支持以及许可（您负担得起，并且您能以您想要的方式合法地部署它吗？）。

关于使用 C++，大多数 RTOS 都提供了 C API（甚至是用 C++ 编写的 eCos）。这并不是一个真正的问题，因为 C 代码可以在二进制级别与 C++ 互操作，但是您可以有效地利用 C++ 的强大功能来降低 RTOS 选择的关键性。我所做的是定义了一个 C++ RTOS 类库，它提供了一个通用 API，提供了所需的设施；例如，我有诸如`cTask`, `cMutex`, `cInterrupt`, `cTimer`,之类的课程`cSemaphore`等。应用程序代码写入此 API，并为任意数量的 RTOS 实现类库。这样，由于类库充当抽象层，因此可以将应用程序代码移植到许多目标和 RTOS 的很少或没有变化。我已经成功地为 Windriver VxWorks、Segger embOS、Keil RTX，甚至 Linux 和 Windows 实现了这个类库，用于仿真和原型设计。

一些供应商确实为其 RTOS 提供了 C++ 包装器，例如 Accelerated Technology 的[Neucleus C++ for Neucleus RTOS](http://www.acceleratedtechnology.com.tw/embedded/nuc_cplus.html)，但这并不一定提供您可能需要在不更改应用程序代码的情况下更改 RTOS 的抽象。

在 RTOS 中进行 C++ 开发需要注意的一件事是，大多数 RTOS 库都是在C++ 在调用main()*之前*`main()`为静态全局对象调用构造函数时初始化的。一些 RTOS 调用在 RTOS 初始化之前无效是很常见的，这可能会导致问题 - 特别是因为它在 RTOS 之间有所不同。一种解决方案是修改您的 C 运行时启动代码，以便在静态构造函数*之前*调用 RTOS 初始化，但在建立基本 C 运行时环境之后。另一种解决方案是简单地避免在静态对象中调用 RTOS。**`main()`**

# ruby-on-rails - Rails：糟糕的解释器

> ID：11743556
> 
> 赞同：0
> 
> 时间：2012-07-31T15:25:15.257
> 
> 标签：ruby-on-rails, rake, bundler, interpreter

我最近在rails中遇到了这个问题。几乎我输入的每一个代码都返回一个错误，说有一个糟糕的解释器。以下是我最近遇到的一些错误：

**捆绑安装**

> sh exe": /c/Program Files (x86)/ruby-1.9.3/bin/bundle: "c:/Program: bad interpreter: 没有这样的文件或目录

**耙分贝：迁移**

> sh exe": /c/Program Files (x86)/ruby-1.9.3/bin/rake: "c:/Program: bad interpreter: 没有这样的文件或目录

有谁知道如何解决这个问题？即使我多次重新安装导轨，我也无法解决此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:09:53.707

**解决方案：**

路径名中不应有空格。要解决此问题，您可以：

**1)**在路径中添加引号 (" ")。示例如下：

`C:\Program Files (x86)\ruby-1.9.3\bin`会变成`"C:\Program Files (x86)\ruby-1.9.3\bin"`

**2）**在新的非间距路径中重新安装

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:27:58.890

它似乎不喜欢路径中的空间......

您可以在没有空格的路径中重新安装所有内容吗？它通常更安全

# windows-phone-7 - 如何在 windows phone 7 中使用freshbooks api？

> ID：11743557
> 
> 赞同：2
> 
> 时间：2012-07-31T15:25:15.990
> 
> 标签：windows-phone-7, freshbooks-api

我在windows phone 7中使用freshbooks api制作应用程序，当我添加api链接以添加服务参考时出现问题，它要求输入用户名和密码，但是当我输入用户名和密码时它再次询问。谁能告诉我如何将 api 链接添加到参考文献？

或其他在 windows phone 中使用freshbooks api 的技巧。

请帮助我提前谢谢。

# c# - C#根据前一个字符将字符串拆分为数组

> ID：11743563
> 
> 赞同：0
> 
> 时间：2012-07-31T15:25:33.493
> 
> 标签：c#, .net

我需要获取一个字符串，并根据与他们进行的字符类型不匹配的字符将其拆分为一个数组。

因此，如果您有“asd fds 1.4#3”，它将按如下方式拆分为数组

```
stringArray[0] = "asd";
stringArray[1] = " ";
stringArray[2] = "fds";
stringArray[3] = " ";
stringArray[4] = "1";
stringArray[5] = ".";
stringArray[6] = "4";
stringArray[7] = "#";
stringArray[8] = "3"; 
```

关于实现这一目标的最佳方法的任何建议？当然，我可以创建一个基于 .ToCharArray() 的循环，但我正在寻找一种更好的方法来实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:40:38.173

该程序会产生您想要的准确输出，但我不确定它是否适合您的目标。

```
class Program
{
    private static void Main(string[] args)
    {
        var splited = Split("asd fds 1.4#3").ToArray();
    }

    public static IEnumerable<string> Split(string text)
    {
        StringBuilder result = new StringBuilder();
        foreach (var ch in text)
        {
            if (char.IsLetter(ch))
            {
                result.Append(ch);
            }
            else
            {
                yield return result.ToString();
                result.Clear();
                yield return ch.ToString(CultureInfo.InvariantCulture);
            }
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:41:24.370

使用正则表达式和链接的组合，您可以执行以下操作。

```
using System.Text.RegularExpressions;
using System.Linq;

var str="asd fds 1.4#3";
var regex=new Regex("([A-Za-z]+)|([0-9]+)|([.#]+)|(.+?)");

var result=regex.Matches(str).OfType<Match>().Select(x=>x.Value).ToArray(); 
```

添加其他捕获组以捕获其他差异。最后的捕获`(.+?)`是非贪婪的一切。因此，此捕获中的每个项目都将被视为不同（包括两次相同的项目）

更新 - 正则表达式的新版本

```
var regex=new Regex(@"(?:[A-Za-z]+)|(?:[0-9]+)|(?:[#.]+)|(?:(?:(.)\1*)+?)"); 
```

这现在使用非捕获组，以便`\1`可以在最终捕获中使用。这意味着如果同一字符在然后捕获所有组，则将对其进行分组。

例如，在字符串“asd fsd”将创建 4 个字符串（每个空格将被认为是不同的）之前，现在结果是 3 个字符串，因为 2 个相邻的空格被组合在一起

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:31:35.953

使用正则表达式：

```
var mc = Regex.Matches("asd fds 1.4#3", @"([a-zA-Z]+)|.");
var res = new string[mc.Count];
for (var i = 0; i < mc.Count; i++)
{
    res[i] = mc[i].Value;
} 
```

# gcc - ***检测到缓冲区溢出***

> ID：11743569
> 
> 赞同：5
> 
> 时间：2012-07-31T15:25:46.943
> 
> 标签：gcc

我的程序在 Ubuntu 11.04 上用“make”正确编译，但是当我运行它时，它给出了错误。这是Ubuntu上的错误吗？或者这是编译器之间变量类型的差异？请帮助我

```
*** buffer overflow detected ***: src/trilearn_player terminated
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(__fortify_fail+0x50)[0x9cd0a0]
/lib/i386-linux-gnu/libc.so.6(+0xe5f7a)[0x9cbf7a]
/lib/i386-linux-gnu/libc.so.6(__strcpy_chk+0x3f)[0x9cb30f]
src/trilearn_player[0x804dd24]
src/trilearn_player[0x808b2d5]
src/trilearn_player[0x80920cf]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xe7)[0x8fce37]
src/trilearn_player[0x804a421]
======= Memory map: ========
00139000-0015d000 r-xp 00000000 08:0b 6060       /lib/i386-linux-gnu/libm-2.13.so
0015d000-0015e000 r--p 00023000 08:0b 6060       /lib/i386-linux-gnu/libm-2.13.so
0015e000-0015f000 rw-p 00024000 08:0b 6060       /lib/i386-linux-gnu/libm-2.13.so
001b4000-001b5000 r-xp 00000000 00:00 0          [vdso]
00488000-0049d000 r-xp 00000000 08:0b 6831       /lib/i386-linux-gnu/libpthread-2.13.so
0049d000-0049e000 r--p 00015000 08:0b 6831       /lib/i386-linux-gnu/libpthread-2.13.so
0049e000-0049f000 rw-p 00016000 08:0b 6831       /lib/i386-linux-gnu/libpthread-2.13.so
0049f000-004a1000 rw-p 00000000 00:00 0 
00558000-00637000 r-xp 00000000 08:0b 134145     
00637000-0063b000 r--p 000de000 08:0b 134145     /usr/lib/i386-linux-gnu/libstdc++.so.6.0.14
0063b000-0063c000 rw-p 000e2000 08:0b 134145     /usr/lib/i386-linux-gnu/libstdc++.so.6.0.14
0063c000-00643000 rw-p 00000000 00:00 0 
0087b000-00885000 r-xp 00000000 08:0b 6826       /lib/i386-linux-gnu/libnss_files-2.13.so
00885000-00886000 r--p 00009000 08:0b 6826       /lib/i386-linux-gnu/libnss_files-2.13.so
00886000-00887000 rw-p 0000a000 08:0b 6826       /lib/i386-linux-gnu/libnss_files-2.13.so
008e6000-00a42000 r-xp 00000000 08:0b 5792       /lib/i386-linux-gnu/libc-2.13.so 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T03:17:05.937

/lib/i386-linux-gnu/libc.so.6(__strcpy_chk+0x3f)[0x9cb30f]

看起来您将太多字符复制到目的地。

# redis - 这是 Redis 的一个很好的用例吗？

> ID：11743577
> 
> 赞同：0
> 
> 时间：2012-07-31T15:26:06.507
> 
> 标签：redis

假设我有能力让用户相互交友，并且我有一个显示用户朋友的小部件。

是否会在这里使用 Redis 来通过 user.id 存储关系？

```
1,2
1,5
4,1
3,1

1.friends -> 2, 3, 4, 5 
```

但是，我需要为那些朋友获取详细信息。我是否正确假设这将使用查询来完成`"id IN(2,3,4,5)"?`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:16:25.290

你绝对可以使用 redis 来表示这些数据。一种策略是为每个用户详细信息使用哈希，由用户 ID（例如`user:1 => {'name': 'foo', 'email': 'foo@foo.foo'}`）和一组用于关系的用户 ID（例如）键控`user:1:friends => (2, 3, 4, 5)`您是正确的，然后您需要为`hgetall user:<ID>`朋友集中的每个用户做一个获取该用户的信息。HGETALL 是 O(N)，其中 N 是字段数；对于字段数量较小且（相对）固定的用户对象之类的东西，HGETALL 实际上是 O(1)，因此那里的额外查找并不是非常昂贵。您还可以使用 redis 管道对这些查找进行批处理并最大限度地减少网络费用。

# jquery - 循环遍历表并使用 Jquery 选中复选框

> ID：11743581
> 
> 赞同：1
> 
> 时间：2012-07-31T15:26:12.073
> 
> 标签：jquery, html-table

我有一个 HTML 表格，其中第一列是一个复选框，我在表格上方有一个超链接，上面写着“检查所有”，如果他们点击这个我需要遍历表格中的每一行并检查分配给该行的复选框，该表建立在页面加载“Databind”之上。

到目前为止，这是我的 jQuery，我将其从“Check All”链接中调用：

```
$('#HypSelectAll').click(function() {
    var count = $('#gvPerformanceResult>tbody>tr').length; //Count the amount of rows in the HTML table
    for (i = 0; i < count; i++) {

    }
});​ 
```

我现在不确定如何引用 gvPerformanceResult 列...。找到名为“chkExportToExcel”的复选框，该表可能有 1-25 行。有人可以帮我给我一个起点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T15:29:25.900

无需手动执行循环。让 jQuery 做它的事：

```
$('#HypSelectAll').click(function () {
    $('#gvPerformanceResult')
       .find('input[type="checkbox"]')
       .prop('checked', true);
}); 
```

* * *

如果整个表格中还有其他复选框，并且您*确实必须*如此具体，请尝试以下操作：

```
$('#HypSelectAll').click(function () {
    $('#gvPerformanceResult')
        .find('> tbody > tr > td:first-child > input[type="checkbox"]')
        .prop('checked', true);
}); 
```

但我真的想不出一个可以保证这样的场景。如果你不得不求助于这个，你可能在你的 HTML 结构中遇到了一些更深层次的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:28:36.173

您不需要像那样循环，只需告诉 jQuery 查找表中的复选框并将它们标记为已选中（假设表中唯一的复选框是您希望包含在“全选”中的复选框）。

```
$('#HypSelectAll').click(function () {
        $("#gvPerformanceResult").find("input[type=checkbox]").prop("checked", true);
}); 
```

# grails - Grails 和 Groovy 元类包名称约定

> ID：11743582
> 
> 赞同：2
> 
> 时间：2012-07-31T15:26:15.910
> 
> 标签：grails, groovy, metaclass

我希望能够根据此处[使用委托元类](http://groovy.codehaus.org/Using+the+Delegating+Meta+Class "使用委托元类")定义的约定将我的元类放在包 groovy.runtime.metaclass 中。我已经安排`MyClassMetaClass`了`groovy.runtime.metaclass.mypackage.`具体课程`mypackage.MyClass{}`。不幸的是，调用`MyClass{}`不会被`MyClassMetaClass{}`. 也许这与 grails 的初始化方式有关..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:27:13.830

可以通过更改*BootStrap.groovy*在 grails 项目中使用委托元类。

```
import org.codehaus.groovy.runtime.InvokerHelper
class BootStrap {

    def init = { servletContext ->
        def myMetaClass = new MyClassMetaClass(MyClass.class)
        InvokerHelper.metaRegistry.setMetaClass(MyClass.class, myMetaClass)
    }
    def destroy = {
    }
} 
```

当然，这与实现问题中提到的委托元类不同。

# iphone - 跨设备的媒体查询冲突

> ID：11743584
> 
> 赞同：1
> 
> 时间：2012-07-31T15:26:19.857
> 
> 标签：iphone, css, media-queries

我的网站上有 3 个媒体查询，我遇到的问题是 iphone 的 -webkit-min-device-pixel-ratio 一个在 android 设备上发生冲突，并且屏幕在 android 上无法正确解析，如果我使用这个 mq该站点可以正确呈现，但在 iphone 4 上却没有，并且在 320px 宽度下工作。

有没有办法只能让 iphone 4/4s 设备查看 -webkit-min-device-pixel-ratio: 1.5 媒体查询？

以下是我的媒体查询：

```
 /*iphone4*/
            @media only screen and (-webkit-min-device-pixel-ratio : 1.5),only screen and (min-device-pixel-ratio : 1.5) {

            /*Main*/
            div#container {
                width: 480px;
            }
    }

/*Other mobile phones*/
        @media screen and (max-width: 767px) {

          div#container {width: 480px;}
        }

/*Tablets*/   
        @media only screen and (max-width: 1023px) and (min-width: 768px) {
         div#container {width: 768px;}

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:09:53.983

你认为 iPhone 4 有多宽（以像素为单位），你认为它的比例值是多少？阅读您的规则，我觉得您想说“如果是大手机，则将其设为 480 宽。如果是视网膜的较小手机，则将其设为 480 宽，否则为 768”

但实际上，一个 iphone4 是 320 像素宽，比例为 2，所以你想让你的容器宽 320 像素，然后`background-size:contain`对图像做一些事情

但是，忽略...此页面：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Media2</title>
<style>
body, html {margin:0;padding:0;height:100%;width:100%; background-color:#000000;}
#block {background-size:contain; background-image:url('http://www.robotwoods.com/images/blog/640_300px.png'); display:block; width:320px; height:150px; }
@media (max-width: 767px) { body {background-color:#0000FF;} }
@media (max-device-width: 320px) and (-webkit-min-device-pixel-ratio: 2) { body {background-color:#00FF00;} }
@media (min-width: 768px) { body {background-color:#FF0000;} }
</style>
</head>
<body>
<div id="block"></div>
</body>
</html> 
```

出现：

*   iPod touch 中的蓝色
*   Android Nexus S 中的蓝色
*   黑莓粗体中的蓝色
*   iPhone4 中的绿色
*   iPad 中的红色

如果您有其他设备要测试，可以访问[http://www.robotwoods.com/dev/misc/so_media2.html 。](http://www.robotwoods.com/dev/misc/so_media2.html)我在这里发布了一个关于媒体查询的小条目：http: [//blog.robotwoods.com/2012/08/media-queries/](http://blog.robotwoods.com/2012/08/media-queries/)但并没有真正进入像素比率方面

# c# - 使用 Request 和 Youtube Api 在 Youtube 上上传视频

> ID：11743586
> 
> 赞同：1
> 
> 时间：2012-07-31T15:26:20.807
> 
> 标签：c#, upload, youtube-api

我创建了两个以不同方式上传的程序.. 几天前他们都在工作.. 但不是我不知道发生了什么他们不工作

首先是

```
 client.Headers.Add("Content-Type", "application/x-www-form-urlencoded");

            string response = client.UploadString("https://www.google.com/youtube/accounts/ClientLogin",
               string.Format("Email={0}&Passwd={1}&service=youtube&source=YouTube.Library",
                   username, password)); 
```

我得到 403 错误代码，没有更多信息

第二次我使用 youtube api 2.0，当我想上传视频时出现此错误

请求被中止：请求被取消。

代码在这里

```
 Video newVideo = new Video();
        newVideo.Title = "denemeeeeeee";
        newVideo.Tags.Add(new MediaCategory("Autos", YouTubeNameTable.CategorySchema));
        newVideo.Keywords = "education, funny deneme";
        newVideo.Description = "bilgi mi istiyorsun";
        newVideo.YouTubeEntry.Private = false;
        newVideo.Tags.Add(new MediaCategory("mydevtag, anotherdevtag",
         YouTubeNameTable.DeveloperTagSchema));

        newVideo.YouTubeEntry.MediaSource = new MediaFileSource("c:\\file2.flv",
          "video/quicktime");
        Video createdVideo = Request.Upload(newVideo); 
```

我用了两个开发者密钥，结果是一样的。我不知道问题出在哪里？也许 youtube 改变了一些东西？因为前几天还在上班。。

而且我认为我的开发者帐户因任何原因被阻止？我不知道什么是条件.. 因为我的程序是公开的，人们可以使用他们想要的方式。我无法检查它们...另一方面，我创建了第二个谷歌帐户并创建了一个开发人员密钥并尝试了它，结果是一样的..我的朋友因此无法使用我的程序..

# php - mysql db中的复选框值

> ID：11743589
> 
> 赞同：0
> 
> 时间：2012-07-31T15:26:31.360
> 
> 标签：php, mysql

下面的代码有什么问题。错误警告：为 foreach() 提供的参数无效

```
 if(isset($_POST['submit']))
        {
        foreach($_POST['team[]'] as $value)
        {
        $insert=mysql_query("INSERT INTO team('team') VALUES ('$value')");
        }
        if($insert)
        {
        echo "dONE";
        }
        }
<form method="post" action="check.php">
<input type="checkbox" name="team[]" value="AG"> Argentina
<input type="checkbox" name="team[]" value="GE"> Germany
<input type="checkbox" name="team[]" value="BR"> Brazil
<input type="submit" name="submit" value="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:28:07.133

尝试：

```
foreach($_POST['team'] as $value) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:28:28.643

不要参考`team[]`。而是使用

```
if (isset($_POST['team'])) {
    foreach($_POST['team'] as $value) { ... }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:30:59.590

当您从 $_POST 收到变量 team 时，它将是每个复选框的数组。

因此，`team[]`您应该使用而不是使用

```
foreach($_POST['team'] as $value) 
```

另外，您应该知道，如果没有选中任何复选框，则关键团队将不存在，因此请确保在您的 foreach 之前执行`if (isset($_POST['team']))`

每次循环时，您都会覆盖插入。

你可能想做这样的事情：

```
if(isset($_POST['submit']))
{
    if (isset($_POST['team']))
    {
        $insert = true;

        foreach($_POST['team'] as $value)
        {
            // we add security with mysql_real_escape_string
            $value = mysql_real_escape_string($value);
            $result = mysql_query("INSERT INTO team('team') VALUES ('$value')");

            if (!$result)
            {
                $insert = false;
                break;
            }
        }

        if($insert)
        {
            echo "dONE";
        }
    }
} 
```

您可能需要检查[mysql_real_escape_string](http://www.php.net/manual/en/function.mysql-real-escape-string.php)为您的代码添加安全性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T15:28:44.933

当您`name=something[]`输入时，php 将为您创建数组，因此您只需要执行

`foreach($_POST['team'] as $value)`

也`name=team[member][]`可以像这样在php中迭代类似的东西

`foreach($_POST['team']['member'] as $value)`

因此，它使分组输入和处理多个动态输入变得非常容易

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T15:30:14.350

尝试以下操作：

```
$teams = $_POST['team'];
$submitted = $_POST['submit'];

if(isset($submitted) && is_array($teams)) {

     foreach($teams as $team) {
          /* Escapes special characters in a string for use in an SQL statement */ 
          $team = mysql_real_escape_string($team)
          $insert = mysql_query("INSERT INTO team('team') VALUES ('$team')");
     }

     if($insert) {
          echo "dONE";
    }
} else {
    echo "Either Form Not Submitted or Teams is Not Array";
} 
```

# objective-c - 如何消除在xCode中使用前必须声明该方法的错误

> ID：11743596
> 
> 赞同：0
> 
> 时间：2012-07-31T15:26:51.683
> 
> 标签：objective-c, ios

我相信我可以在某处关闭该错误！查看以下引发此错误的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    NSString *databaseName = @"TasksDB.db";

    NSArray *documentsDir = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *documentsDirectoryPath = [documentsDir objectAtIndex:0];

    databasePath = [documentsDirectoryPath stringByAppendingPathComponent:databaseName];

    [self checkAndCreateDatabase];

    // Override point for customization after application launch.
    return YES;
}

-(void) checkAndCreateDatabase 
{

} 
```

抛出 checkAndCreateDatabase 无法识别的错误。这也是因为我没有在接口文件中声明 checkAndCreate... 方法，我不想这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:31:29.657

在文件中将其声明为私有方法`.m`：

```
@interface AppDelegate ()

- (void)checkAndCreateDatabase;

@end

@interface AppDelegate

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:30:04.727

它不应该在包含和源文件中声明为私有方法吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:30:25.587

在 .m 文件的开头创建一个类扩展并在那里声明它。这使它远离发布的界面。

（类扩展本质上是空类别，但有特殊的存储声明规则：http: [//developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)）

# tapestry - Tapestry 5.3 中的完整 shiro 配置

> ID：11743601
> 
> 赞同：1
> 
> 时间：2012-07-31T15:27:04.833
> 
> 标签：tapestry, shiro, tynamo

我在 Tapestry 5.3.4 中有一个应用程序，它使用 Tapestry-security 0.4.6 插件和 shiro 1.2.0 进行身份验证，它运行良好。但是，我想使用 EHCache 来缓存会话数据，并最终在缓存上集群几个实例。这一切都可以通过 shiro 实现，但是它需要通过 shiro.ini 进行配置，Tapestry 不支持该配置。有没有办法在应用程序中以这种方式配置 shiro，或者强制加载 ini 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:43:14.830

掌握`SecurityManager`和调用`securityManager.setCacheManager(new EhCacheManager())`应该可以解决问题。

# c# - 使用 ADO 访问 REST 服务

> ID：11743607
> 
> 赞同：0
> 
> 时间：2012-07-31T15:27:22.640
> 
> 标签：c#, rest, repository, xamarin.android, asp.net-web-api

我正在使用 c# 开发一个 monodroid 应用程序，并尝试利用 Generic Repository 以一致的方式访问我的本地 SQLite DB 和远程 REST WS。

由于 SQLiteDataReader 实现了 IDataReader，我想知道是否有办法以相同的方式（使用 IDataReader）访问从 Web-Api MVC4 REST Web 服务器返回的有效负载。这不是 ADO.NET 的重点吗？

目前，WS 返回序列化的 JSON，但是如果需要支持 IDataReader，我可以更改它。

此外，关于如何使用 SQLite DB 和 REST WS 使通用存储库工作（在 MonoDroid 范围内）的任何其他建议都会很棒。

这是一些代码...

```
public interface IDataMapper<T>
{
  T Map(IDataReader reader);
}

public interface IRepository<T>
{
  List<T> Read(ICond cond);
  T FindOne(ICond cond);
}

public class RepositorySQL<T> : IRepository<T>
{
  private AndroidDB _dbLayer;
  private IDataMapper<T> _dataMapper;

  public RepositorySQL(IDataMapper<T> dataMapper)
  {
    _dbLayer = new AndroidDB();
    _dataMapper = dataMapper;
  }

  public List<T> Read(ICond cond) {...}
  public T FindOne(ICond cond) {...}
}

public class RepositoryREST<T> : IRepository<T>
{
  private WSBuffer<T> _wsBuffer;
  private IDataMapper<T> _dataMapper;

  public RepositoryREST(IDataMapper<T> dataMapper)
  {
    _wsBuffer = new WSBuffer<T>();
    _dataMapper = dataMapper;
  }

  public List<T> Read(ICond cond) {...}
  public T FindOne(ICond cond) {...}
} 
```

我在想也许可以实现一些 ADO 接口（如 IDataReader）并将反序列化的结果集包装在实现类中？

我真的真的很想要一致性！感谢您的帮助，你们总是很棒。

# animation - xna 4.0 动画循环

> ID：11743613
> 
> 赞同：1
> 
> 时间：2012-07-31T15:27:52.263
> 
> 标签：animation, loops, xna-4.0

大家好，我一直在关注本教程[http://www.gogo-robot.com/2011/05/30/xna-skinned-model-animations/](http://www.gogo-robot.com/2011/05/30/xna-skinned-model-animations/)到目前为止，它很好地播放了动画和一切，但现在我想要扩展它并停止连续循环，例如，当我释放 a 键时我希望他停止跳跃，但如果我按住 a 键我希望他继续跳跃，我按下 a 键使模型跳跃。到目前为止，我已经尝试过，但都没有奏效。我对如何做到这一点感到困惑，感谢您对此的任何帮助。

```
 private void HandleInput(GameTime gameTime)
    {
        currentGamePadState = GamePad.GetState(PlayerIndex.One);

        // Check for changing anims
        //SkinningData skinningData = model.Tag as SkinningData;
        SkinningData sd = jumper.model.Tag as SkinningData;

        if (currentGamePadState.Buttons.A == ButtonState.Pressed)
        {
            if (jumper.animationPlayer.CurrentClip.Name != "Fire")
                jumper.animationPlayer.StartClip(sd.AnimationClips["Fire"]);
        }

        if (currentGamePadState.Buttons.X == ButtonState.Pressed)
        {
            if (jumper.animationPlayer.CurrentClip.Name != "DieF")
                jumper.animationPlayer.StartClip(sd.AnimationClips["DieF"]);

        }

        //does not work
        if (currentGamePadState.Buttons.X == ButtonState.Released)
        {
            if (jumper.animationPlayer.CurrentClip.Name == "DieF")
                jumper.animationPlayer.StartClip(sd.AnimationClips["Idel"]);

        }

        if (currentGamePadState.Buttons.Y == ButtonState.Pressed)
        {
            if (jumper.animationPlayer.CurrentClip.Name != "Idel")
                jumper.animationPlayer.StartClip(sd.AnimationClips["Idle"]);
        }

        //does not work
        if (jumper.animationPlayer.CurrentTime ==    jumper.animationPlayer.CurrentClip.Duration)
        {
            //set him back to idel
            jumper.animationPlayer.StartClip(sd.AnimationClips["Idle"]);

        } 
```

我在游戏中没有运气尝试过这些配置

```
 // Starts playing the entirety of the given clip
    public void StartClip(string clip, bool loop)
    {
        AnimationClip clipVal = skinningData.AnimationClips[clip];
        StartClip(clip, TimeSpan.FromSeconds(0), clipVal.Duration, loop);
    }

    // Plays a specific portion of the given clip, from one frame
    // index to another
    public void StartClip(string clip, int startFrame, int endFrame, bool loop)
    {
        AnimationClip clipVal = skinningData.AnimationClips[clip];

        StartClip(clip, clipVal.Keyframes[startFrame].Time,
            clipVal.Keyframes[endFrame].Time, loop);
    }

    // Plays a specific portion of the given clip, from one time
    // to another
    public void StartClip(string clip, TimeSpan StartTime, TimeSpan EndTime, bool loop)
    {
        CurrentClip = skinningData.AnimationClips[clip];
        currentTime = TimeSpan.FromSeconds(0);
        currentKeyframe = 0;
        Done = false;
        this.startTime = StartTime;
        this.endTime = EndTime;
        this.loop = loop;

        // Copy the bind pose to the bone transforms array to reset the animation
        skinningData.BindPose.CopyTo(BoneTransforms, 0);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:13:17.347

你能不能在动画剪辑上附加一个布尔值来告诉它只播放一次，或者一个可以调用的*活动变量。*

# javascript - jQuery 输入未隐藏

> ID：11743621
> 
> 赞同：0
> 
> 时间：2012-07-31T15:28:18.427
> 
> 标签：javascript, jquery, html, codeigniter

我正在开发一个基于 CodeIgniter 的新网站。我试图根据输入值将一些元素隐藏到我的表单中，但该字段不会隐藏但保持禁用状态。

这是我的代码：

HTML：

```
<div class="clearfix">
    <label for="form-timezone" class="form-label">Filters<small>Options</small></label>
    <div class="form-input">
        <?php 
            echo form_dropdown('filter', $filters,'', 'id="form-timezone"');
            echo form_dropdown('city', $cities, '', 'id="city"');
            echo form_dropdown('country', $countries, '', 'id="country"');
        ?>
    </div>
</div> 
```

这基本上给出了类似的东西：

```
<div class="clearfix">
    <div class="form-input">
        <select name="filter" id="form-timezone">
            <option value="city">City</option>
            <option value="country">Country</option>
        </select>
        <select name="cities" id="city">
            <option value="Paris">Paris</option>
            <option value="London">London</option>
        </select>
        <select name="countries" id="country">
            <option value="fr">France</option>
            <option value="en">England</option>
        </select>
    </div>
</div> 
```

JS：

```
$(function() {

    $("#city").hide();
    $("#country").hide();

    $("#form-timezone").change(function() {
        if ( $("#form-timezone").val() == "city"){
            $("#city").show();
            $("#country").hide();
        }
        else if ( $("#form-timezone").val() == "country"){
            $("#city").hide();
            $("#country").show();
        }
    });
}); 
```

我尝试在`<input>`我的 html 中添加一个字段，并将其隐藏在 js 中，并且效果很好。我不知道为什么，但似乎只有`form_dropdown`不隐藏......

请问有人知道我做错了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:33:49.297

不知道你说的不工作是什么意思。但是如果没有 if 语句，您的代码会简单得多。

```
$("#form-timezone").change(function() {
     var el =  $('#' + $(this).val()); // <-- store matched element
     el.show();  // <-- show matched element
    $("#country,#city").not(el).hide(); // <-- hide unmatched element
}); 
```

他们在这个小提琴中工作正常（他们隐藏而不是禁用） - 在 Firefox/Chrome/IE9 中测试

[http://jsfiddle.net/5LNWr/1/](http://jsfiddle.net/5LNWr/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:38:16.803

它在[这个小提琴](http://jsfiddle.net/La68q/)中对我有用。

`});`您发布的 Javascript 代码在 DOM 就绪处理程序之后缺少关闭。我假设输出是`<select>`每个 PHP`echo`语句的一个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:39:35.157

您提到表单字段“保持禁用状态”。这是否意味着他们一开始就被禁用了？禁用的表单元素不会在所有浏览器 (Firefox) 中捕获事件。

如果不是这样，你能提供一个jsfiddle吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T15:50:06.333

```
<div class="clearfix">
    <div class="form-input">
        <select name="filter" id="form-timezone">
            <option value="city">City</option>
            <option value="country">Country</option>
        </select>
        <!-- Here a select foreach city and country -->
    </div>
</div> 
```

看看如何没有城市和国家的 ID？您不能在此处选择 ID。

```
$("#city").show();
$("#country").hide(); 
```

不会工作。也许试试

```
var $firstOption= $(“#form-timezone option:first”) 
```

# php - jquery自动建议示例不起作用

> ID：11743625
> 
> 赞同：0
> 
> 时间：2012-07-31T15:28:31.017
> 
> 标签：php, jquery, mysql

这对你们中的一些人来说可能很容易，但对我来说非常困难，因为这是第一次这样做。

通过查看网络上的一些示例，我最终得到了以下自动建议示例的代码，但该代码不起作用。

谢谢

**HTML**

```
<html>
<head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function()
        {
            $('#textbox_postcode').autocomplete(
            {
                source: 'search-db.php',
                minLength: 3
            });
        });
    </script>
</head>

<body>
    <form action="search.php" method="post">
        <input type="text" id="textbox_postcode" value="" />&nbsp;&nbsp;&nbsp;<input type="submit" value="Search" />
    </form>
</body>
</html> 
```

**PHP**

> $keyword = ltrim(strtolower(strip_tags($_GET['keyword'])));
> 
> if (!$keyword) 返回；
> 
> $host = '本地主机'; $user = 'root'; $pswd = ''; $dtbs = '地理地图';
> 
> $host_conn = mysql_connect($host, $user, $pswd); $dtbs_conn = mysql_select_db($dtbs);
> 
> $return = 数组（）；
> 
> $sql = "SELECT id, postcode FROM postcodes WHERE postcode LIKE '$keyword%' ORDER BY postcode"; $run = mysql_query($sql);
> 
> if (@mysql_num_rows($run) == 0) 返回；
> 
> 而 ($records = mysql_fetch_array($run, MYSQL_ASSOC)) { $return[] = $records; }
> 
> 回声 json_encode($return);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:19:09.027

尝试更改`$_GET['keyword']`为`$_GET['term']`

# linux - CLI 从 osm 文件生成地图图块（打开街道地图）？

> ID：11743629
> 
> 赞同：2
> 
> 时间：2012-07-31T15:28:43.293
> 
> 标签：linux, gps, openstreetmap

我尝试使用[Maperitive](http://maperitive.net/)从 osm 文件生成地图图像图块。但这个过程既缓慢又难以自动化。

我在看一些工具可以做这样的事情：

```
mapgen planet.osm lv1-10 lat0 lon0 lat1 lon1 [some other rendering options] 
```

在哪里

*   Planet.osm 是开放的街道地图格式文件。
*   lv1-10 是缩放级别
*   lat0 lon0 lat1 lon1 是地理坐标。

并输出到包含数千个 png 平铺文件的文件夹。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T18:52:23.120

根据您的示例命令行，我猜您正在尝试使用整个星球数据（planet.osm）进行渲染。这在 Maperitive 中是不可行的，因为它需要在渲染之前将整个 OSM 文件加载到内存中（即使您只指定了一个小的边界框）。

为大面积（整个国家、大陆或地球）渲染图块的唯一真正方法是将 OSM 数据填充到 PostGIS 数据库中，然后使用 Mapnik 进行渲染。

或者，您可以先使用 osmosis 之类的工具将planet.osm 剪切成一个小文件，但这也需要很长时间。

还要注意以下事情（[引用我自己](http://maperitive.net/docs/Commands/GenerateTiles.html#Performance%20And%20Storage%20Considerations)的话）：

> 指定缩放级别时要小心。每个缩放级别需要大约四倍于前一个级别的图块，因此您可以非常快速地获得大量图块，这可能需要很长时间才能生成并且需要大量磁盘空间。
> 
> 假设我们有一张缩放级别为 10 的地图大致覆盖了整个计算机屏幕（这大约是伦敦及其周边地区）。这意味着缩放级别 10 大约有 15 个图块。如果我们想要为整个地图生成直到缩放级别 19 的图块会发生什么？
> 
> *   缩放级别 11：60 个图块
> *   缩放级别 12：240 个图块
> *   缩放级别 13：960> 平铺
> *   ...
> *   缩放级别 17：245,760 个图块（cca. 80 分钟的工作，cca.> 10 GB 的磁盘空间）
> *   缩放级别 18：983,040 个图块（超过 5 小时的工作，大约 40 GB 的磁盘空间）
> *   缩放级别 19：3,932,160 个图块（几乎一整天的工作，大约 160 GB 的磁盘空间）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T16:11:32.270

我不知道任何这样的工具已经存在。您可以轻松地调整各种项目用来生成地图图块的众多脚本之一——它们中的大多数都使用[Mapnik](http://mapnik.org/)。看看这个[Mapnik 演示](https://github.com/mapnik/mapnik/blob/master/demo/python)——它有很好的文档记录并且应该相对容易适应。

请注意，您需要为渲染提供额外的参数（在命令行或脚本本身中）——最值得注意的是一个样式文件，它告诉 Mapnik 如何渲染数据。

# android - 如何对 TextViews 中的数字进行排序并显示它们？

> ID：11743631
> 
> 赞同：-1
> 
> 时间：2012-07-31T15:28:45.277
> 
> 标签：android, sorting, textview

嗨，有人可以建议我一个示例，说明如何根据 textviews 中的数字对 textviews 进行排序。我能够从需要排序的 TextViews 中获取文本并将最小的数字放在首位。

谢谢你。

```
public void sortNumbers(View v) {

    String[] numbers = new String[7];
    numbers[0] = textView23.getText().toString();
    numbers[1] = textView33.getText().toString();
    numbers[2] = textView43.getText().toString();
    numbers[3] = textView53.getText().toString();
    numbers[4] = textView63.getText().toString();
    numbers[5] = textView73.getText().toString();
    numbers[6] = textView83.getText().toString();

    Integer[] intValues = new Integer[numbers.length];
    for (int i = 0; i < numbers.length; i++) {
        intValues[i] = Integer.parseInt(numbers[i].trim());
    }
    Collections.sort(Arrays.asList(intValues));

    for (int i = 0; i < intValues.length; i++) {
        Integer intValue = intValues[i];

        //here I want to assign sorted numberes to the TextViews

    }

} 
```

* * *

所以我听从了杰弗里的建议。这是仍然无法正常工作的代码。有什么问题？

创建了一个 TextViews 数组：

```
TextView[] tvs = new TextView[7];

    tvs[0] = textView23;
    tvs[1] = textView33;
    tvs[2] = textView43;
    tvs[3] = textView53;
    tvs[4] = textView63;
    tvs[5] = textView73;
    tvs[6] = textView83; 
```

对数组进行排序并将新值分配给 TextView：

```
 Arrays.sort(tvs, new TVTextComparator());

    textView23.setText(tvs[0].getText().toString());
    textView33.setText(tvs[1].getText().toString());
    textView43.setText(tvs[2].getText().toString());
    textView53.setText(tvs[3].getText().toString());
    textView63.setText(tvs[4].getText().toString());
    textView73.setText(tvs[5].getText().toString());
    textView83.setText(tvs[6].getText().toString()); 
```

这是 Comporator 类：

```
public class TVTextComparator implements Comparator<TextView> {
    public int compare(TextView lhs, TextView rhs) {

        Integer oneInt = Integer.parseInt(lhs.getText().toString());
        Integer twoInt = Integer.parseInt(rhs.getText().toString());

        return oneInt.compareTo(twoInt);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:49:55.743

要对您的 textViews 进行排序，首先将它们放入一个数组中，

```
TextView[] tvs = new TextView[7];
tvs[0] = textView23;
tvs[1] = textView33;
// and so on 
```

请注意，如果您有父容器的句柄，则可以使用`ViewGroup.getChildCount()`and轻松构建数组`getChildAt()`。

现在为文本视图编写一个比较器，

```
class TVTextComparator implements Comparator<TextView> {
  @Override
  public int compare(TextView lhs, TextView rhs) {
    return lhs.getText().toString().compareTo(rhs.getText().toString());
    // should check for nulls here, this is NOT a robust impl of compare()
  }
} 
```

现在使用比较器对数组进行排序，

```
Arrays.sort(tvs, 0, tvs.length, new TVTextComparator()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:42:46.577

```
public void sortNumbers(View v) {

String[] numbers = new String[7];
numbers[0] = textView23.getText().toString();
numbers[1] = textView33.getText().toString();
numbers[2] = textView43.getText().toString();
numbers[3] = textView53.getText().toString();
numbers[4] = textView63.getText().toString();
numbers[5] = textView73.getText().toString();
numbers[6] = textView83.getText().toString();

Integer[] intValues = new Integer[numbers.length];
for (int i = 0; i < numbers.length; i++) {
    intValues[i] = Integer.parseInt(numbers[i].trim());
}
Collections.sort(Arrays.asList(intValues));

  textView23.setText(intValues[0]);
  textView33.setText(intValues[1]);
  textView43.setText(intValues[2]);
  textView53.setText(intValues[3]);
  textView63.setText(intValues[4]);
  textView73.setText(intValues[5]);
  textView83.setText(intValues[6]);
} 
```

# android - android共享意图选择器没有出现

> ID：11743635
> 
> 赞同：0
> 
> 时间：2012-07-31T15:28:50.573
> 
> 标签：android, facebook, google-plus

我想在 facebook、twitter、google+ 和我的 android 应用程序中通过电子邮件分享文本。我搜索并找到了以下代码：

```
 Intent sharingIntent = new Intent(Intent.ACTION_SEND);
           sharingIntent.setType("plain/text");
           sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, "My text");
           startActivity(Intent.createChooser(sharingIntent,"Share using")); 
```

我正在使用谷歌模拟器 API8 平台 2.2。我在我的模拟器上安装了 facebook 和 g+，我还配置了我的 gmail 帐户。当我点击上面写有代码的分享按钮时，我没有选择菜单来选择分享方式：facebook、g+、gmail..相反，它直接使用我的gmail帐户来分享..有什么问题吗用模拟器？？我究竟做错了什么？？请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:31:05.790

尝试在此处遵循本教程：http: [//mobile.tutsplus.com/tutorials/android/android-sdk-implement-a-share-intent/](http://mobile.tutsplus.com/tutorials/android/android-sdk-implement-a-share-intent/)

也许你错过了一些步骤。

# iphone - 将 NSString 转换为 nsdate 不起作用

> ID：11743637
> 
> 赞同：0
> 
> 时间：2012-07-31T15:28:54.853
> 
> 标签：iphone, ios, ipad, nsdate

我正在使用以下代码将日期从 NSString 转换为 NSDate

```
NSString *dateString = @"julho-29-2012 05:01 PM";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd-MM-yyyy hh:mm:ss a"];
NSDate* dateFromString = [dateFormatter dateFromString:dateString];
NSLog(@"%@",dateFromString);
[dateFormatter release]; 
```

但这对我不起作用:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:34:47.223

那是因为格式不匹配。

```
"julho-29-2012 05:01 PM" 
```

遵循以下格式：

```
"MMMM-dd-yyyy hh:mm a" 
```

基本上，您的日期格式化程序无法理解您的字符串并提供默认值`nil`.

* * *

**编辑**

您可能需要更改格式化程序区域设置，因为您的日期字符串不是英语而是葡萄牙语。

```
[dateFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"pt-PT"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:35:24.573

您的日期格式化程序的格式与您的字符串格式的日期不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:39:27.340

您的日期格式字符串与字符串中的日期格式不匹配。

尝试：

```
[dateFormatter setDateFormat:@"MMMM-dd-yyyy hh:mm a"];
[dateFormatter setLocale:[[NSLocale alloc]initWithLocaleIdentifier:@"pt"]]; 
```

仅当您的手机不是葡萄牙语时才需要设置区域设置。

# android - Android 接口和 onCreate()

> ID：11743642
> 
> 赞同：3
> 
> 时间：2012-07-31T15:29:12.140
> 
> 标签：android, interface, onclicklistener

这是一个关于使用接口的双重问题 - 即活动中的 onclickListener （和相关）。

1.  onCreate 应该很短 - 文档如是说 - 但如果我有很多很多视图，所有这些视图都具有 onClickListeners，它可能会变得很长。我担心这会导致 UI 线程超时。这是一个问题吗？
2.  有没有使用 onClickListener 的最佳方法？我的意思是，Activity 最好实现 onCLickListener 然后有一个很长的 onClick() 方法？或执行以下操作：

    ```
    mView.setOnClickListener(new OnClickListener(){
       ...
     }); 
    ```

每个视图？它真的有什么不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:32:52.950

它不应该为你的活动的加载而烦恼，因为`onClick`只有在点击它的视图时才会执行监听器内的代码。

**此外，在onCreate**中执行繁重的东西（网络、数据库、可绘制操作等）并不是一个好主意。如果您确实需要进行此类处理，则将其卸载到`AsyncTask`在单独的线程中运行您的代码，从而使您的 UI（主）线程空闲。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T15:40:25.907

1.  它们的意思是“短”，即不做任何需要很长时间才能处理的事情`onCreate()`。像数学计算、网络或数据库访问、超大位图膨胀等任何事情都应该在一个线程中完成。设置视图的唯一开销`onClickListener`是调用方法、设置引用以及通常创建对象。如果对象创建做了上述任何事情，那么最好在创建对象之前预加载它。

2.  没有真正的区别。您选择什么完全取决于您的实施和编码风格。使用您展示的匿名对象有点像“设置并忘记”风格的方式。如果操作是按钮独有的，则它是合适的。`onClickListener()`如果需要在每次点击时保持状态，则需要创建一个全新的类来实现。这样，您只需创建一次对象并将所有必要的视图设置为单个对象。如果许多视图在单击时执行相同的操作，则以这种方式执行此操作也可能很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T15:48:24.133

1）我同意Deev的回答。

2）请注意，如果您选择使用匿名内部类解决方案

```
mView.setOnClickListener(new OnClickListener(){
...
}); 
```

您为每个分配创建一个对象。相反，如果您`OnClickListener`在活动中实现，则不会创建任何其他对象。这对于少量对象并没有太大的区别，但可以为大量对象（你说有很多很多）节省一些内存（并从 GC 中拯救你）。[性能设计中](http://developer.android.com/guide/practices/performance.html#object_creation)建议避免创建无用的对象

# java - 获取子文件夹的名称 - Perforce Java API

> ID：11743643
> 
> 赞同：0
> 
> 时间：2012-07-31T15:29:20.503
> 
> 标签：java, file, api, directory, perforce

我正在尝试编写一个在 Perforce 中采用路径的方法，例如

```
//depot/... 
```

并吐出其中的任何子目录

```
//depot/folderA
//depot/folderB
//depot/folderC 
```

我试过使用，

```
 public List<IFileSpec> getIFileSpecList(String file) {
    List<IFileSpec> fileList = null;
    try {
        fileList = iServer.getDepotFiles(
                    FileSpecBuilder.makeFileSpecList(new String[] {file}), false);  //Get list of file(s) in path
    }
    catch(Exception e){e.printStackTrace();}
    return fileList;
 } 
```

但在我的情况下，仓库包含太多文件，允许在一个查询中请求这些文件。

[所以我的问题是，是否可以使用P4](http://www.perforce.com/perforce/doc.current/manuals/p4java-javadoc/ "P4") Java API在 Perforce 的目录中检索子目录

**编辑**

我正在寻找命令的 Java 等价物`p4 dirs //depot/*`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:48:39.780

我想你想要的是 IServer.getDirectories() 方法：[http ://www.perforce.com/perforce/doc.current/manuals/p4java-javadoc/com/perforce/p4java/server/IServer.html#getDirectories% 28java.util.List,%20boolean,%20boolean,%20boolean%29](http://www.perforce.com/perforce/doc.current/manuals/p4java-javadoc/com/perforce/p4java/server/IServer.html#getDirectories%28java.util.List,%20boolean,%20boolean,%20boolean%29)

# asp.net - 网址中的 IIS 点（句点）

> ID：11743646
> 
> 赞同：0
> 
> 时间：2012-07-31T15:29:24.790
> 
> 标签：asp.net, .net, iis, url-routing

在 IIS 7.5 中是否可以允许带有句点的网址（不是扩展名）？我正在努力将用户个人资料网址设置为类似 site.com/firstname.lastname 但我收到“未找到匹配的构造函数”错误。我想知道这在 IIS 中是否可行，如果可以，怎么办？这是 asp.net 网络表单应用程序，我试图拦截 HttpRequestBegin 进程以确定它是什么用户，然后重定向到实际的用户个人资料页面（site.com/user/profiles/userid）。

# php - 强制 wordpress 通过 TCP 连接到数据库

> ID：11743654
> 
> 赞同：2
> 
> 时间：2012-07-31T15:29:57.427
> 
> 标签：php, mysql, wordpress

我正在尝试将在我的机器上运行的 wordpress 连接到在我的机器（localhost）上通过隧道连接的远程 mysql 数据库。数据库连接通过向`mysql`CLI 客户端提供以下参数来工作

```
$ mysql --protocol=TCP -P 10000 -h localhost -u username -p'password' db_name

Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 93438893
Server version: 5.5.8-log Source distribution

Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> show databases;
+-----------------------------------+
| Database                          |
+-----------------------------------+
| information_schema                |
| db_name                           |
+-----------------------------------+
2 rows in set (1.38 sec) 
```

在`wp-config.php`wordpress 文件中，我尝试了以下值：

```
define('DB_NAME', 'db_name');
define('DB_USER', 'username');
define('DB_PASSWORD', 'password');
define('DB_HOST', 'localhost');
define('DB_PORT', 10000); 
```

这不起作用并引发以下错误：

```
Warning: include(/home/gaurish/Dropbox/code/projects/blog/wp-content/advanced-cache.php): failed to open stream: No such file or directory in /home/gaurish/Dropbox/code/projects/blog/wp-settings.php on line 62 
Warning: include(): Failed opening '/home/gaurish/Dropbox/code/projects/blog/wp-content/advanced-cache.php' for inclusion (include_path='.:/usr/share/php:/usr/share/pear') in /home/gaurish/Dropbox/code/projects/blog/wp-settings.php on line 62 
Warning: mysql_connect(): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) in /home/gaurish/Dropbox/code/projects/blog/wp-includes/wp-db.php on line 1038 
```

上述错误（`Can't connect to local MySQL server through socket`）中的最后一行给出了连接失败的原因，因为 wordpress 试图通过 unix 套接字进行连接。

现在，我需要设置哪些参数才能让 wordpress 作为`mysql`CLI 客户端连接到数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:32:43.747

如果您想通过 TCP 而不是 Unix 套接字进行连接，请尝试将主机从`localhost`, 更改为`127.0.0.1`.

```
define('DB_HOST', '127.0.0.1');  // forces TCP 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T16:20:41.273

我能够使用以下设置进行连接`wp-config.php`。

```
define('DB_NAME', 'db_name');
define('DB_USER', 'username');
define('DB_PASSWORD', 'password');
define('DB_HOST', '127.0.0.1:10000');
define('DB_PORT', 10000); 
```

数据库连接成功:)

# java - 如何从命令行为 jconsole 指定用户名和密码？

> ID：11743660
> 
> 赞同：1
> 
> 时间：2012-07-31T15:30:15.510
> 
> 标签：java, jconsole

> **可能重复：**
> [JConsole 命令行凭据](https://stackoverflow.com/questions/6343364/jconsole-command-line-credentials)

有没有办法从命令行为 jconsole 指定用户名和密码？我想完全从命令行启动 jconsole，因为主机名太长（service:jmx:rmi://serveraddress:8010/jndi/rmi://serveraddress:8000/jmxrmi）我不记得了。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:33:03.557

您需要编写一个包含所有参数（或）命令行的 bat 文件，如下所示。像这样的东西。

```
jconsole -J-Djavax.net.ssl.keyStore=value
 -J-Djavax.net.ssl.keyStorePassword=value
 -J-Djavax.net.ssl.trustStore=value
 -J-Djavax.net.ssl.trustStorePassword=value 
```

注意：这是示例，应替换您需要的实际参数而不是这些。

# windows - 如何手动编写和执行 Windows .exe（使用十六进制编辑器的机器代码）？

> ID：11743662
> 
> 赞同：47
> 
> 时间：2012-07-31T15:30:20.127
> 
> 标签：windows, exe, executable, machine-code

我想知道如何仅通过使用十六进制编辑器来编写像 Hello World 程序这样简单的东西。我知道我可以在接近机器级别使用汇编程序和汇编语言来实现这一点，但我只想尝试在 Hello World 等玩具示例中真正编写机器代码。

这可能是一个简单的 DOS .COM 文件，我可以在 DOSBox 上运行。但是，如果有人可以提供一个 .EXE 文件的示例，以便直接在我的 Windows PC 上运行它，那就太好了。

这只是纯粹的好奇。不...我不打算直接用二进制机器代码编写程序（我什至不经常编写汇编代码，我大多数时候只是使用 C/C++ 作为我最底层的工具）。我只是想看看是否有可能做到这一点，因为可能有人在计算机的早期就必须这样做。

PS：我知道关于这个主题有类似的问题，但没有一个提供有效的例子。我只想要一个简单的例子，这样它就可以帮助我理解编译器和汇编器是如何生成可执行文件的。我的意思是......过去必须有人为第一个程序手动完成此操作。此外，对于 Windows EXE 格式，肯定有人在 Microsoft 编写了第一个工具来生成格式以及 Windows 本身读取并执行它的方式。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-31T16:08:08.103

[corkami/wiki/PE101](https://raw.githubusercontent.com/corkami/pics/master/binary/pe101/pe101.png)上有一个非常简约但功能齐全的（在 Win7 上也是）exe ，它的每个字节都在漂亮的图形中进行了解释。您可以在十六进制编辑器中手动输入所有内容，但填充可能会使这有点乏味。

至于历史，是的，微软的某个人发明了 exe 格式（旧的 DOS MZ exe 格式），他（或微软的其他人）为它编写了一个加载器和一个链接器，这是传统上将输出转换为编译器（“目标文件”）转换成可执行文件。有可能（甚至可能，我会说）第一个 exe 程序是手工编写的，毕竟它们只是为了测试新的加载程序。

后来，AT&T 的 COFF 格式被 Microsoft 扩展为 PE 格式，它仍然具有 MZ 标头，并且通常（但可选，它不在 corkami 示例中，它实际上可以是任何东西）包含一个用于打印消息的小型 DOS 程序“此程序不能在 DOS 模式下运行”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-04T05:25:04.170

1) .com 文件是最简单的开始位置，将在 dosbox 上运行，基本上程序从文件中的偏移量 0x100 开始，我认为第一个 0x100 可以是任何东西，不记得了

2）虽然第一个程序通常是手动编写和组装成机器代码的，但我们正在谈论当您将两个数字相加时将它们保存在内存中并且很高兴您可以休息一天。将内容打印到视频卡的“hello world”程序要复杂得多。现在你可以使用dos系统调用做一个非常简单的，也许这不是你感兴趣的，也许是。

3）基于 2，在 1960 年代或 1970 年代，任何比一次测试一条或几条指令更复杂的东西，即使在编写手工组装程序时，您也可以手动在汇编器中编写程序，然后将其组装成机器代码，然后加载它。基本上首先学习汇编语言，然后学习如何为其生成机器代码，然后开始将这些字节输入十六进制编辑器。现在不是 1960 年代，除非你享受过度的痛苦，通过写 asm 来学习上面的内容，使用汇编程序生成机器码，然后使用反汇编程序对其进行反汇编，并将汇编语言和机器码并排检查以显着提高您获得一个工作程序所需的时间。如果你在有操作系统和指令集之前为一家芯片公司工作，您仍然可以利用团队的其他成员、芯片设计人员等来了解如何制作和安排机器代码。您不会仅凭高水平的语言经验就可以完成这一切，并希望成功。

4) x86 是一个可怕的指令集，如果你不懂汇编，我强烈建议你不要先学习它。拥有 x86 是我听到的最糟糕的借口，首先要学习 x86。你已经提到过dosbox，所以已经计划模拟/模拟，所以使用一个好的指令集并模拟它或购买硬件（低于50美元甚至低于20美元都会给你买一块具有更好指令集的板）。如果您选择购买一些，我建议先进行模拟/仿真并与硬件并行。如果您真的想要教育，编写自己的模拟器一点也不难。也许发明你自己的指令集。

5）这些都不能帮助您理解编译器的作用。了解汇编语言然后反汇编编译器输出是您获得该知识的最佳途径，不涉及机器代码，无需实际运行程序。编译器从高级语言转到低级语言（例如 C 到 asm 或 C++ 到 asm）。然后了解汇编程序的作用，由于历史和其他原因，有许多不同的解决方案。今天的典型解决方案是单独的编译器、汇编器和链接器（除非您告诉它不要，否则编译器会为您调用汇编器和链接器，这三个步骤是隐藏的，实际上编译过程可能不止一个程序运行以完成该任务）。输出二进制文件的汇编器必须解析整个程序，输出到对象的汇编器将在机器代码中留下漏洞供链接器填充。诸如分支或调用另一个对象中的项目之类的事情，在链接器将内容放入二进制文件并知道间距/寻址之前，它无法编码。还访问存在于其他对象中的变量。

您可能看不到有关十六进制编辑程序的实际示例，因为首先这是一个如此广泛的问题，没有简单的答案（什么操作系统，系统，什么系统调用或您正在创建这些，什么文件格式，什么十六进制编辑器等）。也因为它是一个高层次的问题和问题，真正的问题是我在哪里学习汇编，我在哪里学习汇编和机器代码之间的关系，我在哪里学习系统调用（这不是汇编问题，他们与学习 asm 无关，您学习汇编语言本身，然后如果您不能直接使用高级语言执行系统调用，则学习将其用作执行系统调用的工具），我在哪里了解可执行文件格式，例如 .com， .exe、coff、elf等。什么是好的或容易的或一些形容词，在 xyz 操作系统或环境上运行的十六进制编辑器。分别提出这些问题，您将找到答案和示例，一旦您有了这些答案，您将知道如何使用十六进制编辑器输入机器代码来制作程序。一个较短的示例是，当您看到 SO 上发布的程序的反汇编时，您正在看到完整程序的十六进制示例，其中一些是以十六进制显示的完整程序。如果您知道文件格式，您只需将这些内容输入十六进制编辑器即可。其中一些是以十六进制显示的完整程序。如果您知道文件格式，您只需将这些内容输入十六进制编辑器即可。其中一些是以十六进制显示的完整程序。如果您知道文件格式，您只需将这些内容输入十六进制编辑器即可。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-01T15:21:45.037

我手工制作二进制文件，但我认为汇编本身比纯十六进制编辑器更容易，因为更新任何东西都会很困难。

*   最简单的肯定是 DOS COM 格式，你甚至可以[在 notepad 中输入](http://code.google.com/p/corkami/wiki/Encodings#COM)，或者至少，即使是普通的[Hello World](https://code.google.com/p/corkami/source/browse/trunk/misc/MakePE/examples/com.asm?r=137)也很容易。

*   EXE（非 DOS 格式）也不需要太多，请参见[此处](https://code.google.com/p/corkami/source/browse/trunk/misc/MakePE/examples/exetiny.asm?r=137)。

*   如果你想制作一个 PE，你可以制作一个[TinyPE](http://code.google.com/p/corkami/wiki/PE?show=content#minimal_sizes)。

大多数二进制文件应以[PE](https://www.dropbox.com/sh/kojbmbb6hm64mcg/suVxNVV0XY)、[EXE 和 COM](http://code.google.com/p/corkami/downloads/detail?name=BinaryCorpus_v2.zip)的形式提供。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-31T15:37:03.540

没有发现，但本教程应该让您更好地了解汇编如何映射到机器代码（x86 ELF）：[http](http://timelessname.com/elfbin/) ://timelessname.com/elfbin/ （特别是查看页面的下半部分）

> 这个页面是关于我尝试创建最小的 x86 ELF 二进制文件的尝试，该二进制文件将在 Ubuntu Linux 上执行 Hello World 我的第一次尝试从 C 开始，然后进展到 x86 汇编，最后到 hexeditor。

分析像这样的非常小的可执行文件非常棒，因为程序集和机器代码之间的映射将更容易发现。这也是一篇关于该主题的非常有趣的文章（虽然与您的问题不完全相关）：[http](http://www.phreedom.org/research/tinype/) ://www.phreedom.org/research/tinype/ （x86 PE）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-02-05T11:21:47.940

我写了一篇关于在命令提示符下使用 ECHO 创建可执行 DOS 二进制文件的文章。无需其他 3rd 方 HEX 实用程序或 x86 IDE！

该技术使用键盘组合 - ALT ASCII 代码，将 OPCODES 转换为在 MSDOS 下直接可读的二进制格式。输出是一个完全可运行的二进制 *.com 文件。

[http://colinord.blogspot.co.uk/2015/02/extreme-programming-hand-coded.html](http://colinord.blogspot.co.uk/2015/02/extreme-programming-hand-coded.html)

**摘录：** 在 DOS 提示符下键入以下键命令，记​​住按住左 ALT。

```
c:\>Echo LALT-178 LALT-36 LALT-180 LALT-2 LALT-205 LALT-33 LALT-205 LALT-32 > $.com 
```

上面的代码实际上是描述 X86 汇编程序以在屏幕上打印美元符号的操作码值。

完成后，您的提示应如下所示。按回车构建！

```
c:\>Echo ▓$┤☻═!═  > $.com 
```

运行文件“$.com”，您将看到屏幕上显示一个美元 ($) 字符。

```
c:\>$.com
$
c:\> 
```

恭喜！您刚刚创建了名为 $.com 的第一手编码可执行文件。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-09-27T19:27:39.357

您可以进行反汇编并尝试找出您在汇编器中使用的操作码的机器码

例如

```
org 0x100
mov dx,msg
mov ah,0x09
int 0x21
ret
msg db 'hello$' 
```

使用 nasm -fbin ./a.asm -o ./a.com 编译具有 ndisasm a.com 提供以下反汇编：

```
00000000  BA0801            mov dx,0x108
00000003  B409              mov ah,0x9
00000005  CD21              int 0x21
00000007  C3                ret
00000008  68656C            push word 0x6c65
0000000B  6C                insb
0000000C  6F                outsw
0000000D  24                db 0x24

00000000 to 00000007 are the instructions 
```

所以您可以使用 ba0801 机器代码，使用一些十六进制编辑器，尝试将其更改为 ba0901，并且只会打印“hello”，您可以使用十六进制编辑器并使用 NOP 填充内容，即机器中的 0x90代码，例如：

```
00000000:  ba 50 01 90 90 90 90 90  90 90 90 90 90 90 90 90  .@..............
00000010:  b4 09 90 90 90 90 90 90  90 90 90 90 90 90 90 90  ................
00000020:  cd 21 90 90 90 90 90 90  90 90 90 90 90 90 90 90  .!..............
00000030:  c3 90 90 90 90 90 90 90  90 90 90 90 90 90 90 90  ................
00000040:  71 77 65 72 74 79 75 69  61 73 64 66 67 68 6a 24  qwertyuiasdfghj$
00000050:  61 73 64 66 67 68 6a 6b  61 73 64 66 67 68 6a 24  asdfghjkasdfghj$
00000060:  -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --  ---------------- 
```

如果你用扩展名 .com 保存它，你可以在 DosBox 中运行它

# r - 将函数应用于按 cut() 分组的数据

> ID：11743667
> 
> 赞同：1
> 
> 时间：2012-07-31T15:30:27.200
> 
> 标签：r

我想要一些关于使用 cut 汇总数据的帮助。我在不太复杂的情况下取得了成功，但现在我陷入了困境。

数据：

```
> dput(sumsq)
structure(list(part_no = c(10L, 10L, 10L, 10L, 10L, 10L, 10L, 
10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 
10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 
10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 
10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 
10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 
10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 
10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 
10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 
10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 
10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 
10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
8L, 8L, 8L, 8L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L), ratperc = c(0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -8, 0.8, 
0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 
0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 
0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 
0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 
0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 
0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 
0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 
0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 
0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 
0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0, 0, 0, 0, 
0, 0, 75.6, 0, 89.6, 24.8, -100, -100, 75.6, 100, 100, -100, 
-100, -100, -100, -100, -100, 75.6, 98.4, 98.4, -51.2, -51.2, 
0.8, 0.8, 0.4, 0.4, 0.4, 0.4, 75.2, -100, -100, -100, 1.2, -0.4, 
-0.4, -0.4, -0.4, 100, 100, -1.6, 0, 0, 0, 0, -100, 0.4, 100, 
0.4, 0.4, 100, -0.4, -78.4, 0.4, 100, 100, 100, 100, -100, 23.6, 
61.2, 61.2, 69.2, 75.6, 75.6, 75.6, 75.6, 75.6, 98, 98, 98, -75.2, 
-75.2, 47.2, 47.2, 47.2, 47.2, 76.8, 97.6, -71.6, -71.6, -71.6, 
-71.6, 24, 52, 52, 52, 75.2, 75.2, -77.6, 25.2, 47.2, 76.4, 76.4, 
76.4, 76.4, 76.4, 76.4, 76.4, 76.4, 76.4, 76.4, 76.4, 76.4, 76.4, 
76.4, -73.2, -73.2, -73.2, -73.2, 0.8, 0.8, 75.2, 75.2, 75.2, 
75.2, 75.2, 75.2, 0.4, 0.4, 0.4, 0.4, 0.4, -100, -100, -100, 
-100, -100, 73.2, 2, -0.8, -0.8, -0.8, -100, -0.4, -0.4, 50.4, 
50.4, 50.4, 50.4, 50.4, 50.4, -76.4, 99.6, 99.6, -76.4, 100, 
100, 50.4, 1.2, 28, -1.2, 93.6, 41.2, 1.6, 24.8, -1.6, 0, 0, 
24.8, -24, 26, 50.8, 2, 28, 36.4, 24, -43.6, 33.6, 61.2, 81.2, 
86.8, 34, -51.6, -2, 28.4, 2, 82, 41.6, 25.6, 82, 0.8, 92, 1.2, 
86.4, 54, 96, 0.4, -54.4, 1.2, -93.2, -49.2, -98.4, -2, -77.2, 
93.2, 23.6, 78.8, 42.4, 0.4, 2.8, 70.8, 24.4, 2.4, 62, 92.8, 
16.4, -61.2, 24.4, -77.2, -0.4, 74.8, 3.6, 82, 82, 18, 54, 9.2, 
55.2, 96.4, 96.4, 90, 90, -84.4, -84.4, -2.8, -2, -90.4, 2.4, 
34.8, 24, -1.6, -16.8, 2.8, 2.4, -83.2, 22.4, 22.4, -1.6, -1.6, 
60, -2.4, 2.4, 2, 0.8, -22.8, 2, -1.6, 25.2, 2, 2, -52.8, -1.2, 
-1.2, 3.2, -74.4, 3.2, 3.2, -78.4, 0.4, -2.4, 0.4, 0.4, 0.4, 
0.4, 0.4, 0.4, -79.2, -0.8, -0.8, -0.8, -0.8, -0.8, -3.2, 41.2, 
-0.8, -0.8, -0.8, -0.8, -83.2, -1.6, -1.6, 0.4, 0.4, 0.4, -90, 
-1.6, -1.6, -1.6, -1.6, -1.6, -1.6, -1.6, -1.6, -1.6, -1.6, -1.6, 
77.6, -79.6, 80.8, -81.6, -93.2, -100, 8.4, 75.6, 82.8, 67.2, 
-27.2, 78.8, 65.6, 84.8, 73.6, 46.8, -62.4, 57.2, 74, 13.6, -0.8, 
32.8, -27.2, 6.4, -67.2, 79.2, -64, 58, -40.4, 64, 8, 60, 76.8, 
-24.8, -52.4, 56.8, 75.6, 38.4, -50.4, -72.8, -83.6, 24, 34.8, 
54.4, -54, 67.6, 78.4, -41.6, -64.4, -83.6, -93.6, 76.8, -2.4, 
-19.2, -54, -38, 5.2, 52.4, 64.8, 42.4, 77.6, -46.4, -74.8, -60.4, 
-83.2, -56.4, -34.8, -16.8, 21.2, 40, 59.2, 0.4, -17.6, 24.4, 
-14.4, 35.2, -26.8, 42, 44, -1.2, -35.6, 10.8, -19.6, -35.2, 
22.4, -18.4, 27.6, -9.6, 43.2, -31.2, 45.2, 23.6, -16.4, 28.8, 
40.4, 25.6, -8, 15.6, 11.2, -17.2, 15.6, -17.6, 18, 24, -9.6, 
-34.8, 12.4, -17.2, 36.4, -9.2, -35.2, -19.6, 10.4, -15.6, -30.4, 
30.8, 16.4, -14.8, -26.4, -34.4, 52.8, 34.4, 55.6, 21.2, 41.2, 
52, 36.8, 50, 15.6, 36, 53.6, -22.8, 14.8, 25.2, -13.2, -18.8, 
32, 20.8, -6.8, -16.4, -27.6, 14.4, 26.8, 38, -28.4, 19.6, -23.6, 
18.4, -19.6, 11.6, 0, 0, 0, -26, -52.4, -24.4, 2, 19.6, -10.8, 
3.6, 3.6, -25.2, 28.4, 12, -11.2, 3.2, 37.2, 26, 0.8, 47.6, -17.2, 
2.4, -12, -52.4, 0.8, 28.4, -12, 36.4, 2.4, 50.4, -16, 24.4, 
-2.4, -2.4, 15.2, -1.6, -1.6, -1.6, 24.4, -36, 33.2, 1.2, 1.2, 
-48.8, -22.4, -1.2, -100, -1.6, -1.6, -26.4, 28, -47.6, 86, -1.6, 
-1.6, -1.6, -1.6, -1.6, 41.6, -16, 29.6, -14.8, 3.2, 3.2, 100, 
0.8, 0.8, 0.8, 0.8, 25.6, 24.8, -28, 0.8, -39.2, -97.6, -97.6, 
-50, 0, 0, 49.6, 0.8, 54, 25.6, -1.2, -1.2, -90.8, 4.4, 4.4, 
41.6, -40.8, -6, -6, 51.6, -8.4, 0, 0, 0, -60, 2.8, -52.4, 1.6, 
1.6, 1.6, 18.8, 24.4, -0.4, -0.4, -0.4, -0.4, -51.6, -0.4, -0.4, 
-0.4, 26, 0, 18, -42.4, -1.6, -0.4, 60.4, -2.8, -2.8, -2.8, 76, 
2.8, 2.8, -29.2, -23.2, 23.6, -26.8, 0.4, 0.4, -40.8, -3.6, -47.6, 
27.6, -2.4, -2.4, -76, -2, -2, -2, -30.8, 26.8, -4.4, -4.4, -4.4, 
3.6, -0.8, -0.8, 67.2, -1.2, -48.8, 63.2, -42, 50, 30.8, 57.6, 
-48.8, -48.8, 41.6, -39.2, -39.2, -35.6, 40, -44, -39.6, -39.6, 
-50.8, 0, -48.8, 40, -53.2, 52, -47.2, -47.2, -46, 26.4, -29.2, 
0, -46.8, -46.8, 34.8, -43.6, 0, 39.2, 0.4, -48.4, 0, -23.6, 
29.2, 29.2, -53.2, -53.2, 19.2, 46.4, 46.4, -2, 36, 2, -25.2, 
-50, -1.6, -2, 35.2, -32.8, 31.2, -43.2, 46, -28.8, -0.4, -50.4, 
0.8, -43.6, 0.4, 27.6, -37.6, -37.6, 37.6, -50, 40.8, -0.8, -50.4, 
-49.6, 45.6, 45.6, -48.8, -0.8, -54, -54, 43.2, -48.8, 46.4, 
-42.8, 54, -54.4, 34.8, 0.4, 0.4, 0.4, 0.8, -50.4, -50.8, -50.8, 
51.6, -68.8, 0.8, 52, -42, -42, 0, -56.8, -56.8, 0.8, -48, -46.4, 
-46.8, -46.8, 0.4, 0.4, 37.2, -36.8, -36.8, -0.4, -0.4, -0.4, 
-0.4, -0.4, -48.8, 0.8, 0.8, 58.8, 2, 2, 2, 2, 29.2, -50.4, 49.6, 
41.2, -39.2, 38.8, -38.8, 28, -38, 40.8, 0.8, 0.8, 0.8, 0.8, 
0.8, -51.2, 27.2, -54.8, 0.8, 0.8, -40.4, -40.4, 0, -46.8, 35.2, 
-50.4, 9.6, -0.4, -15.2, 17.6, -26.8, -14.4, 42.8, 18.8, 2.8, 
0, -33.2, -36.4, -7.6, 18.8, 34.4, 8.8, -25.6, -16.8, -10, -50.8, 
10, -11.2, -7.2, -15.2, -62.8, 27.6, -12.8, -1.2, -24.4, 18.8, 
-7.2, 37.2, 8.4, -40, -9.6, 20, -27.2, 27.2, 7.2, -31.6, -31.6, 
27.6, -1.6, -20, -20, 34.4, 18, -23.6, 28.4, -16, 15.2, -30.4, 
-9.2, -7.6, 12.4, 23.2, 15.6, 23.2, 37.2, -8.8, -21.6, -31.6, 
-23.2, 25.2, 33.2, 9.2, 34.4, 18, 5.2, -50.4, 34.8, 12.4, -13.6, 
-7.2, 6.4, 15.2, 2, 12.8, -14.4, 32.4, 15.6, 23.2, 30, -11.6, 
-34.8, 12, -24, -11.2, -41.2, 34.4, 18.8, 18.8, 12, 37.6, 10, 
35.2, -24.4, 24.8, 40.4, 52.4, 14, -41.6, 34, 43.2, -6, -28, 
24, 35.2, 26.8, -15.2, 28, 38.8, 11.6, 57.6, 28, 12, -18.8, 35.6, 
25.2, 40.4, 59.2, -58.4, 10.4, -23.6, 18, -14, 35.2, 13.6, 48.4, 
32.8, 32.8, -17.2, -11.2, 26, -24, 15.2, -66.4, 24.4, -30.4, 
39.6, 30, 53.2, 59.6, -40.4, -14, 36, 36, 41.6, 32, 57.6, 8.4, 
62, 85.6, 85.6, 84.4, 38, 63.2, 67.2, -42.8, 63.6, 95.2, 65.2, 
86.8, 87.2, 9.2, 83.2, 11.6, 83.2, 83.2, 79.6, 63.2, 88.8, -62, 
-84.8, -84.8, -86.8, -4.4, 87.2, 86, 17.2, 81.6, -60.8, -87.6, 
80, 37.2, -64.8, 86.4, 87.2, 94.4, 94, -61.6, 86.8, 86.4, 86.8, 
86, -86, 94.4, -87.6, 80, 84.8, 86.8, -64.8, 85.2, 83.2, -90.8, 
88.8, 85.6, 85.2, 87.2, 85.2, 85.6, -64, 84.8, 84.4, -90, 84.8, 
82, -83.6, 88.4, 92, 80.8, 79.6, 80.4, 78.4, 78.4, 80, 80, 79.2, 
81.2, 84.8, -78.4, 80.8, -88.8, 81.6, 81.6, -64.8, -85.6, 89.2, 
90.4, -84, 85.2, -32.8, 49.6, 83.2, 81.2, 79.2, 80, 85.6, 81.6, 
34.4, -85.6, 83.6, 82.4, 84, 81.2, 85.6, 85.6, 87.6, 84.8, 85.6, 
82.8, -86.4, -60, 36.8, -85.6, 86.4, -65.6, 81.6, -81.2, 92.8, 
-86.4, 84.8, 63.2, 36, 86.4, 86.4, 82.4, 83.2, 82.8, 82.4, 80.8, 
80.4, 80.4, -63.6, 84.8, 84.8, 68, 93.2, 88, 89.6, 33.6, 83.6, 
-67.2, 88.8, 88, 85.2, -39.6, 84.8), diffdist = c(-9L, -7L, -16L, 
-17L, -38L, 55L, -17L, -2L, -18L, -24L, -7L, 24L, -40L, -35L, 
69L, -42L, -15L, 80L, 73L, -28L, 39L, -46L, 40L, -49L, 11L, -9L, 
-6L, -50L, 71L, 23L, -69L, -1L, 8L, 37L, -29L, -16L, 25L, -8L, 
-44L, 27L, -20L, -11L, 16L, -16L, 40L, -57L, -13L, 13L, 40L, 
-7L, 51L, -19L, -2L, -9L, 22L, 35L, -13L, -20L, -4L, -64L, 0L, 
-48L, -55L, -19L, 20L, 6L, 31L, 9L, -62L, -4L, -50L, 39L, 53L, 
-22L, 33L, 58L, 62L, -37L, 5L, -5L, 36L, 35L, -9L, 16L, -42L, 
-20L, 7L, 24L, 29L, -80L, 41L, -18L, -28L, -16L, 6L, 15L, -37L, 
52L, -12L, -40L, 64L, -28L, 22L, 29L, -4L, -47L, -3L, -61L, -2L, 
21L, 3L, 9L, 35L, 73L, -20L, -8L, -53L, -19L, -11L, -6L, -56L, 
17L, -20L, -66L, -16L, -29L, 26L, -29L, 44L, 38L, 40L, 51L, 84L, 
-33L, -33L, -6L, -71L, -14L, -13L, -47L, 21L, 5L, -9L, -42L, 
-26L, 35L, 53L, 2L, -6L, 31L, -22L, -70L, -17L, 35L, -55L, 9L, 
-14L, 2L, 11L, -71L, 49L, 30L, -40L, -77L, 15L, 53L, -29L, 51L, 
68L, -5L, -24L, -75L, -60L, -27L, -43L, -5L, -3L, -31L, -22L, 
8L, -43L, 9L, -43L, -35L, 70L, -47L, -23L, 25L, -64L, 0L, -24L, 
-17L, 68L, -12L, -57L, 28L, -9L, 42L, 35L, 21L, 13L, 9L, -9L, 
-12L, 31L, -6L, -8L, -33L, 20L, -4L, -53L, 37L, -33L, 21L, 68L, 
-28L, -56L, 61L, -69L, -12L, 9L, -23L, -60L, -9L, -7L, 45L, -44L, 
-33L, 47L, -7L, 53L, -2L, -13L, -18L, 57L, -2L, 45L, 40L, -18L, 
9L, -21L, 22L, 4L, 27L, 27L, -63L, -62L, -59L, 13L, -3L, -62L, 
2L, 23L, 52L, 20L, -18L, 52L, 40L, -51L, -24L, -18L, -29L, -47L, 
-33L, 64L, -74L, -36L, 18L, -36L, 22L, 8L, -46L, 24L, 4L, -74L, 
-3L, 18L, -53L, 20L, 60L, -9L, -19L, 15L, 31L, 18L, 35L, 24L, 
11L, -40L, -64L, 33L, -31L, 8L, 58L, 41L, -33L, -53L, -35L, 2L, 
-19L, 42L, -53L, 64L, 46L, -53L, 62L, -77L, -18L, -3L, -11L, 
33L, -67L, 68L, 0L, 51L, 13L, -11L, 40L, -65L, 22L, 39L, -5L, 
76L, -44L, -35L, 15L, 0L, 13L, 7L, 6L, -51L, -44L, -20L, 20L, 
11L, -55L, -66L, -49L, 4L, -58L, -27L, 20L, -16L, 42L, -69L, 
71L, -68L, -42L, 44L, 31L, -13L, -63L, -72L, -13L, 19L, 39L, 
-13L, 71L, -53L, -33L, 67L, -42L, 14L, 39L, 33L, -13L, -19L, 
73L, -71L, -24L, 11L, 0L, -42L, -71L, -1L, -62L, -11L, -7L, 18L, 
49L, 8L, -21L, -5L, 13L, -38L, 62L, -15L, -27L, 0L, -33L, 9L, 
-40L, -57L, 60L, 73L, -24L, 0L, 22L, -37L, -46L, -27L, 27L, 0L, 
6L, 77L, -13L, 47L, 71L, -20L, 11L, 18L, 31L, 8L, 80L, -87L, 
-20L, 57L, -37L, 24L, 62L, -11L, -50L, 9L, 52L, 7L, 2L, -57L, 
-50L, 69L, 7L, -42L, -43L, -22L, 46L, 57L, 24L, 35L, 9L, -54L, 
51L, 6L, -8L, -8L, 9L, 48L, 24L, 31L, -55L, 53L, 44L, 7L, -7L, 
22L, -53L, 42L, -44L, -2L, 6L, -9L, -5L, 33L, -20L, 20L, 36L, 
39L, -16L, -25L, 44L, -28L, 4L, -4L, -47L, -87L, 6L, -38L, 51L, 
-9L, 37L, -47L, 72L, -19L, 26L, 37L, -43L, 29L, -11L, 54L, 4L, 
-41L, -24L, -55L, 11L, 35L, 22L, 57L, 61L, 40L, -52L, -17L, 10L, 
28L, -24L, -28L, -3L, -9L, -47L, 40L, 35L, 57L, 13L, 13L, 33L, 
24L, 22L, -67L, -49L, -77L, 7L, -36L, 9L, 29L, -16L, -5L, 11L, 
-13L, 57L, -17L, 49L, 66L, -55L, -33L, -6L, -29L, 5L, -62L, 80L, 
33L, 73L, 87L, -3L, 18L, 40L, 18L, 70L, 49L, 55L, 5L, -13L, 9L, 
-17L, 36L, -22L, 9L, 0L, -75L, -40L, -12L, 17L, 19L, -9L, 13L, 
-15L, -51L, 10L, -20L, 1L, 3L, 40L, 38L, 19L, 11L, 0L, 89L, -10L, 
49L, 44L, 75L, 83L, -8L, 36L, -60L, 38L, -53L, -19L, 11L, 4L, 
-53L, -51L, -11L, 71L, 20L, 7L, -33L, 37L, 3L, 49L, 22L, -57L, 
-74L, -30L, 22L, 11L, -9L, -19L, -51L, -42L, 3L, 55L, -42L, -7L, 
-19L, -53L, 32L, -73L, 11L, -9L, -31L, 20L, -5L, 55L, -26L, -22L, 
-28L, 75L, -15L, -58L, 20L, 37L, -26L, -57L, -50L, -47L, -35L, 
-20L, 22L, 1L, 28L, 0L, -38L, 24L, 40L, 22L, -33L, 34L, -28L, 
-18L, 33L, -57L, 4L, -13L, -25L, -62L, 33L, -62L, 55L, 28L, -9L, 
14L, -50L, -18L, -40L, 20L, 24L, -53L, -27L, 23L, 4L, 13L, 27L, 
-55L, -4L, 44L, 4L, -9L, -17L, -44L, -42L, 18L, -33L, -44L, 17L, 
-53L, -13L, -24L, -56L, -41L, 28L, 31L, 21L, -13L, 27L, -46L, 
-50L, -25L, 29L, -7L, -6L, -11L, -18L, 71L, -69L, -50L, -3L, 
2L, 18L, -24L, -40L, -15L, -46L, 11L, 29L, 10L, -30L, 7L, -13L, 
50L, 77L, 2L, 9L, -71L, -9L, -62L, -55L, 29L, 38L, -48L, -22L, 
-30L, 39L, -44L, 42L, -5L, -61L, 16L, 24L, -46L, 2L, 4L, -8L, 
-16L, 33L, -35L, 80L, -39L, 19L, -55L, -23L, -46L, 2L, 7L, -77L, 
-5L, 18L, -44L, -18L, -62L, -62L, -84L, 85L, 13L, 49L, 11L, 41L, 
40L, -38L, 15L, 39L, -13L, 39L, -11L, -64L, 58L, 35L, -18L, 34L, 
18L, 24L, -22L, -4L, -46L, -71L, 22L, -44L, -49L, -11L, -40L, 
-4L, 11L, -5L, 37L, -24L, -27L, -33L, 52L, -11L, 9L, -54L, 0L, 
-24L, 0L, 18L, 13L, -17L, 22L, 64L, 58L, 71L, -6L, -24L, 29L, 
-3L, -22L, -9L, 55L, -9L, -16L, -35L, 56L, 25L, -58L, -26L, -9L, 
62L, -48L, -62L, 9L, 35L, -8L, 33L, 40L, 55L, 40L, 35L, -23L, 
11L, 46L, 62L, -15L, -2L, -9L, -17L, 39L, 15L, -13L, -37L, 20L, 
-7L, -14L, 70L, 28L, -2L, 55L, -25L, 6L, -36L, 30L, 62L, 66L, 
11L, 24L, -42L, 58L, 9L, 45L, 4L, 0L, -20L, 20L, 27L, -4L, 3L, 
-40L, -2L, 2L, 10L, 8L, 20L, -24L, -39L, -13L, 20L, -45L, -76L, 
-46L, 3L, -55L, -18L, 22L, 2L, -14L, -20L, -26L, 51L, -66L, -9L, 
0L, 51L, 22L, -12L, 27L, -35L, 11L, 38L, -3L, 15L, 4L, -55L, 
44L, -55L, -46L, 6L, -46L, 22L, 22L, 46L, 20L, 35L, -11L, -20L, 
-53L, 51L, -80L, -59L, -53L, -78L, -36L, -13L, 31L, 33L, -9L, 
-26L, 31L, -14L, -16L, -15L, -53L, 9L, 65L, 3L, 44L, -42L, 45L, 
-13L, -7L, -6L, 52L, 60L, -3L, -3L, 7L, -40L, 2L, 29L, 11L, 33L, 
40L, -16L, -9L, -21L, 78L, -60L, 15L, 0L, 17L, -15L, -18L, 48L, 
26L, 31L, -53L, -9L, -3L, -1L, 64L, 7L, 44L, -38L, -23L, 13L, 
55L, 57L, -71L, -20L, 23L, -18L, 4L, 16L, -7L, 52L, 42L, 24L, 
5L, -2L, 6L, -33L, 9L, 30L, -51L, 58L, 53L, -44L, -22L, -44L, 
-75L, -60L, 46L, 14L, 13L, -5L, -7L, 69L, -18L, 53L, 52L, -62L, 
-13L, 22L, 64L, -18L, 71L, 24L, -9L, 68L, -40L, -10L, -2L, 12L, 
37L, 40L, 79L, 3L, 42L, -55L, 7L, -31L, 20L, 16L, 7L, 11L, -14L, 
70L, 24L, 3L, -57L, -14L, 51L, -19L, -62L, -16L, -2L, -68L, 4L, 
7L, -20L, 4L, -15L, 49L, -16L, 11L, 6L, 56L, -6L, 68L, 28L, 33L, 
-62L, 20L, -39L, -12L, -45L, -30L, -15L, 37L, 44L, 39L, 38L, 
46L, 33L, 2L, -3L, 29L, 44L, 2L, -57L, 37L, 42L, 20L, 5L, 53L, 
-51L, 11L, -5L, -24L, 7L, 29L, -20L, -15L, 24L, 80L, 4L, 82L, 
29L, -24L, 68L, -38L, 27L, 71L, 30L, 42L, 14L, -75L, -41L, 22L, 
46L, -72L, -53L, 78L, 54L, 22L, -55L, 57L, -1L, -54L, 80L, 68L, 
-17L, -18L, -3L, 5L, 16L, -39L, -21L, -29L, -64L, -5L, 46L, -8L, 
3L, -15L, 26L, -6L, 38L, -2L, -13L, -62L, -51L, -60L, 9L, -64L, 
51L, 31L, 36L, 0L, -35L, 29L, 22L, 31L, -2L, 14L, 73L, -17L, 
17L, -58L, 55L, 37L, -16L, 71L, 28L, 72L, -26L, 22L, 12L, 25L, 
23L, -46L, -9L, -55L, -7L, 18L, -40L, 28L, -9L, 5L, -6L, 26L, 
58L, 31L, -38L, -27L, 14L, -34L, -5L, 9L, 20L, -35L, 31L, -3L, 
-19L, -33L, 34L)), .Names = c("part_no", "ratperc", "diffdist"
), row.names = c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 
12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 
25L, 26L, 27L, 28L, 29L, 30L, 31L, 32L, 33L, 34L, 35L, 36L, 37L, 
38L, 39L, 40L, 41L, 42L, 43L, 44L, 45L, 46L, 47L, 48L, 49L, 50L, 
51L, 52L, 53L, 54L, 55L, 56L, 57L, 58L, 59L, 60L, 61L, 62L, 63L, 
64L, 65L, 66L, 67L, 68L, 69L, 70L, 71L, 72L, 73L, 74L, 75L, 76L, 
77L, 78L, 79L, 80L, 81L, 82L, 83L, 84L, 85L, 86L, 87L, 88L, 89L, 
90L, 91L, 92L, 93L, 94L, 95L, 96L, 97L, 98L, 99L, 100L, 101L, 
102L, 103L, 104L, 105L, 106L, 107L, 108L, 109L, 110L, 111L, 112L, 
113L, 114L, 115L, 116L, 117L, 118L, 119L, 120L, 121L, 122L, 123L, 
124L, 125L, 126L, 127L, 128L, 129L, 130L, 131L, 132L, 133L, 134L, 
135L, 136L, 137L, 138L, 139L, 140L, 141L, 142L, 143L, 144L, 145L, 
146L, 147L, 148L, 149L, 150L, 301L, 302L, 303L, 304L, 305L, 306L, 
307L, 308L, 309L, 310L, 311L, 312L, 313L, 314L, 315L, 316L, 317L, 
318L, 319L, 320L, 321L, 322L, 323L, 324L, 325L, 326L, 327L, 328L, 
329L, 330L, 331L, 332L, 333L, 334L, 335L, 336L, 337L, 338L, 339L, 
340L, 341L, 342L, 343L, 344L, 345L, 346L, 347L, 348L, 349L, 350L, 
351L, 352L, 353L, 354L, 355L, 356L, 357L, 358L, 359L, 360L, 361L, 
362L, 363L, 364L, 365L, 366L, 367L, 368L, 369L, 370L, 371L, 372L, 
373L, 374L, 375L, 376L, 377L, 378L, 379L, 380L, 381L, 382L, 383L, 
384L, 385L, 386L, 387L, 388L, 389L, 390L, 391L, 392L, 393L, 394L, 
395L, 396L, 397L, 398L, 399L, 400L, 401L, 402L, 403L, 404L, 405L, 
406L, 407L, 408L, 409L, 410L, 411L, 412L, 413L, 414L, 415L, 416L, 
417L, 418L, 419L, 420L, 421L, 422L, 423L, 424L, 425L, 426L, 427L, 
428L, 429L, 430L, 431L, 432L, 433L, 434L, 435L, 436L, 437L, 438L, 
439L, 440L, 441L, 442L, 443L, 444L, 445L, 446L, 447L, 448L, 449L, 
450L, 601L, 602L, 603L, 604L, 605L, 606L, 607L, 608L, 609L, 610L, 
611L, 612L, 613L, 614L, 615L, 616L, 617L, 618L, 619L, 620L, 621L, 
622L, 623L, 624L, 625L, 626L, 627L, 628L, 629L, 630L, 631L, 632L, 
633L, 634L, 635L, 636L, 637L, 638L, 639L, 640L, 641L, 642L, 643L, 
644L, 645L, 646L, 647L, 648L, 649L, 650L, 651L, 652L, 653L, 654L, 
655L, 656L, 657L, 658L, 659L, 660L, 661L, 662L, 663L, 664L, 665L, 
666L, 667L, 668L, 669L, 670L, 671L, 672L, 673L, 674L, 675L, 676L, 
677L, 678L, 679L, 680L, 681L, 682L, 683L, 684L, 685L, 686L, 687L, 
688L, 689L, 690L, 691L, 692L, 693L, 694L, 695L, 696L, 697L, 698L, 
699L, 700L, 701L, 702L, 703L, 704L, 705L, 706L, 707L, 708L, 709L, 
710L, 711L, 712L, 713L, 714L, 715L, 716L, 717L, 718L, 719L, 720L, 
721L, 722L, 723L, 724L, 725L, 726L, 727L, 728L, 729L, 730L, 731L, 
732L, 733L, 734L, 735L, 736L, 737L, 738L, 739L, 740L, 741L, 742L, 
743L, 744L, 745L, 746L, 747L, 748L, 749L, 750L, 901L, 902L, 903L, 
904L, 905L, 906L, 907L, 908L, 909L, 910L, 911L, 912L, 913L, 914L, 
915L, 916L, 917L, 918L, 919L, 920L, 921L, 922L, 923L, 924L, 925L, 
926L, 927L, 928L, 929L, 930L, 931L, 932L, 933L, 934L, 935L, 936L, 
937L, 938L, 939L, 940L, 941L, 942L, 943L, 944L, 945L, 946L, 947L, 
948L, 949L, 950L, 951L, 952L, 953L, 954L, 955L, 956L, 957L, 958L, 
959L, 960L, 961L, 962L, 963L, 964L, 965L, 966L, 967L, 968L, 969L, 
970L, 971L, 972L, 973L, 974L, 975L, 976L, 977L, 978L, 979L, 980L, 
981L, 982L, 983L, 984L, 985L, 986L, 987L, 988L, 989L, 990L, 991L, 
992L, 993L, 994L, 995L, 996L, 997L, 998L, 999L, 1000L, 1001L, 
1002L, 1003L, 1004L, 1005L, 1006L, 1007L, 1008L, 1009L, 1010L, 
1011L, 1012L, 1013L, 1014L, 1015L, 1016L, 1017L, 1018L, 1019L, 
1020L, 1021L, 1022L, 1023L, 1024L, 1025L, 1026L, 1027L, 1028L, 
1029L, 1030L, 1031L, 1032L, 1033L, 1034L, 1035L, 1036L, 1037L, 
1038L, 1039L, 1040L, 1041L, 1042L, 1043L, 1044L, 1045L, 1046L, 
1047L, 1048L, 1049L, 1050L, 1201L, 1202L, 1203L, 1204L, 1205L, 
1206L, 1207L, 1208L, 1209L, 1210L, 1211L, 1212L, 1213L, 1214L, 
1215L, 1216L, 1217L, 1218L, 1219L, 1220L, 1221L, 1222L, 1223L, 
1224L, 1225L, 1226L, 1227L, 1228L, 1229L, 1230L, 1231L, 1232L, 
1233L, 1234L, 1235L, 1236L, 1237L, 1238L, 1239L, 1240L, 1241L, 
1242L, 1243L, 1244L, 1245L, 1246L, 1247L, 1248L, 1249L, 1250L, 
1251L, 1252L, 1253L, 1254L, 1255L, 1256L, 1257L, 1258L, 1259L, 
1260L, 1261L, 1262L, 1263L, 1264L, 1265L, 1266L, 1267L, 1268L, 
1269L, 1270L, 1271L, 1272L, 1273L, 1274L, 1275L, 1276L, 1277L, 
1278L, 1279L, 1280L, 1281L, 1282L, 1283L, 1284L, 1285L, 1286L, 
1287L, 1288L, 1289L, 1290L, 1291L, 1292L, 1293L, 1294L, 1295L, 
1296L, 1297L, 1298L, 1299L, 1300L, 1301L, 1302L, 1303L, 1304L, 
1305L, 1306L, 1307L, 1308L, 1309L, 1310L, 1311L, 1312L, 1313L, 
1314L, 1315L, 1316L, 1317L, 1318L, 1319L, 1320L, 1321L, 1322L, 
1323L, 1324L, 1325L, 1326L, 1327L, 1328L, 1329L, 1330L, 1331L, 
1332L, 1333L, 1334L, 1335L, 1336L, 1337L, 1338L, 1339L, 1340L, 
1341L, 1342L, 1343L, 1344L, 1345L, 1346L, 1347L, 1348L, 1349L, 
1350L, 1501L, 1502L, 1503L, 1504L, 1505L, 1506L, 1507L, 1508L, 
1509L, 1510L, 1511L, 1512L, 1513L, 1514L, 1515L, 1516L, 1517L, 
1518L, 1519L, 1520L, 1521L, 1522L, 1523L, 1524L, 1525L, 1526L, 
1527L, 1528L, 1529L, 1530L, 1531L, 1532L, 1533L, 1534L, 1535L, 
1536L, 1537L, 1538L, 1539L, 1540L, 1541L, 1542L, 1543L, 1544L, 
1545L, 1546L, 1547L, 1548L, 1549L, 1550L, 1551L, 1552L, 1553L, 
1554L, 1555L, 1556L, 1557L, 1558L, 1559L, 1560L, 1561L, 1562L, 
1563L, 1564L, 1565L, 1566L, 1567L, 1568L, 1569L, 1570L, 1571L, 
1572L, 1573L, 1574L, 1575L, 1576L, 1577L, 1578L, 1579L, 1580L, 
1581L, 1582L, 1583L, 1584L, 1585L, 1586L, 1587L, 1588L, 1589L, 
1590L, 1591L, 1592L, 1593L, 1594L, 1595L, 1596L, 1597L, 1598L, 
1599L, 1600L, 1601L, 1602L, 1603L, 1604L, 1605L, 1606L, 1607L, 
1608L, 1609L, 1610L, 1611L, 1612L, 1613L, 1614L, 1615L, 1616L, 
1617L, 1618L, 1619L, 1620L, 1621L, 1622L, 1623L, 1624L, 1625L, 
1626L, 1627L, 1628L, 1629L, 1630L, 1631L, 1632L, 1633L, 1634L, 
1635L, 1636L, 1637L, 1638L, 1639L, 1640L, 1641L, 1642L, 1643L, 
1644L, 1645L, 1646L, 1647L, 1648L, 1649L, 1650L, 1801L, 1802L, 
1803L, 1804L, 1805L, 1806L, 1807L, 1808L, 1809L, 1810L, 1811L, 
1812L, 1813L, 1814L, 1815L, 1816L, 1817L, 1818L, 1819L, 1820L, 
1821L, 1822L, 1823L, 1824L, 1825L, 1826L, 1827L, 1828L, 1829L, 
1830L, 1831L, 1832L, 1833L, 1834L, 1835L, 1836L, 1837L, 1838L, 
1839L, 1840L, 1841L, 1842L, 1843L, 1844L, 1845L, 1846L, 1847L, 
1848L, 1849L, 1850L, 1851L, 1852L, 1853L, 1854L, 1855L, 1856L, 
1857L, 1858L, 1859L, 1860L, 1861L, 1862L, 1863L, 1864L, 1865L, 
1866L, 1867L, 1868L, 1869L, 1870L, 1871L, 1872L, 1873L, 1874L, 
1875L, 1876L, 1877L, 1878L, 1879L, 1880L, 1881L, 1882L, 1883L, 
1884L, 1885L, 1886L, 1887L, 1888L, 1889L, 1890L, 1891L, 1892L, 
1893L, 1894L, 1895L, 1896L, 1897L, 1898L, 1899L, 1900L, 1901L, 
1902L, 1903L, 1904L, 1905L, 1906L, 1907L, 1908L, 1909L, 1910L, 
1911L, 1912L, 1913L, 1914L, 1915L, 1916L, 1917L, 1918L, 1919L, 
1920L, 1921L, 1922L, 1923L, 1924L, 1925L, 1926L, 1927L, 1928L, 
1929L, 1930L, 1931L, 1932L, 1933L, 1934L, 1935L, 1936L, 1937L, 
1938L, 1939L, 1940L, 1941L, 1942L, 1943L, 1944L, 1945L, 1946L, 
1947L, 1948L, 1949L, 1950L, 2101L, 2102L, 2103L, 2104L, 2105L, 
2106L, 2107L, 2108L, 2109L, 2110L, 2111L, 2112L, 2113L, 2114L, 
2115L, 2116L, 2117L, 2118L, 2119L, 2120L, 2121L, 2122L, 2123L, 
2124L, 2125L, 2126L, 2127L, 2128L, 2129L, 2130L, 2131L, 2132L, 
2133L, 2134L, 2135L, 2136L, 2137L, 2138L, 2139L, 2140L, 2141L, 
2142L, 2143L, 2144L, 2145L, 2146L, 2147L, 2148L, 2149L, 2150L, 
2151L, 2152L, 2153L, 2154L, 2155L, 2156L, 2157L, 2158L, 2159L, 
2160L, 2161L, 2162L, 2163L, 2164L, 2165L, 2166L, 2167L, 2168L, 
2169L, 2170L, 2171L, 2172L, 2173L, 2174L, 2175L, 2176L, 2177L, 
2178L, 2179L, 2180L, 2181L, 2182L, 2183L, 2184L, 2185L, 2186L, 
2187L, 2188L, 2189L, 2190L, 2191L, 2192L, 2193L, 2194L, 2195L, 
2196L, 2197L, 2198L, 2199L, 2200L, 2201L, 2202L, 2203L, 2204L, 
2205L, 2206L, 2207L, 2208L, 2209L, 2210L, 2211L, 2212L, 2213L, 
2214L, 2215L, 2216L, 2217L, 2218L, 2219L, 2220L, 2221L, 2222L, 
2223L, 2224L, 2225L, 2226L, 2227L, 2228L, 2229L, 2230L, 2231L, 
2232L, 2233L, 2234L, 2235L, 2236L, 2237L, 2238L, 2239L, 2240L, 
2241L, 2242L, 2243L, 2244L, 2245L, 2246L, 2247L, 2248L, 2249L, 
2250L), class = "data.frame") 
```

使用向量：

```
timevec1 = as.vector(ggplot2:::breaks(sumsq$diffdist, "n", n=8)) 
```

`xtabs`我通常使用和使用来总结数据`cut`：

```
bb1 = data.frame(xtabs(~ratperc +cut(diffdist, timevec1 ), dat=sumsq))
colnames(bb1) = c("rating", "range", "freq", "id") 
```

虽然这个解决方案不是我想要的，但我能够使用`ddply`.

但是现在我也需要保留`part_no`，但我似乎无法将多个列传递给`cut`.

问题是，有没有办法一步完成所有事情？基本上为每个参与者获得每次剪辑的所有评分的平均值？换句话说，part_no 作为行，范围作为列，交集是低于那里的值的评级平均值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:50:41.727

如果你只想要每个`part_no`和间隔的平均评分，`cut(diffdist, timevec1 )`我会做这样的事情：

```
#Add cut variable as new column
sumsq$range <- cut(sumsq$diffdist,timevec1)

#Summarise using ddply
ddply(sumsq,.(part_no,range),summarise,val = mean(ratperc)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:47:33.630

如果您想要每个参与者和间隔的平均值或每个参与者的间隔的累积平均值，我没有得到。

如果你想要正常的意思，你可以得到它

```
sapply(split(sumsq, cut(sumsq$diffdist, timevec1)), function(ss)
    sapply(split(ss$ratperc, ss$part_no), mean)) 
```

如果你想要累积，你可以将它改写为

```
t(sapply(split(sumsq, sumsq$part_no), function(ss){
    sapply(timevec1[-1], function(tc) mean(ss$ratperc[ss$diffdist <= tc]))
})) 
```

# python - 为什么我会收到 TypeError？

> ID：11743669
> 
> 赞同：1
> 
> 时间：2012-07-31T15:30:34.937
> 
> 标签：python, class

我对这个程序的目标是记录 4 条信息（员工编号、员工姓名、轮班编号和小时工资率），然后显示它们。我需要在这个程序中使用类。

这是类代码：

```
class Employee(object):

    def __init__(self, name, number):
        self.__name = name
        self.__number - number

    def set_name(self, name):
        self.__name = name

    def set_number(self, number):
        self.__number = number

    def get_name(self):
        return self.__name

    def get_number(self):
        return self.__number

class ProductionWorker(Employee):

    def __init__(self, name, number,
                 shift, payRate):

        Employee.__init__(self, name, number)

        self.__shift = shift
        self.__payRate = payRate

    def set_shift(self, shift):
        self.__shift = shift

    def set_payRate(self, payRate):
        self.__payRate = payRate

    def get_shift(self):
        return self.__shift

    def get_payRate(self):
        return self.__payRate 
```

这是导入类代码并执行它的代码：

```
import employee

name = input('Name: ')
number = input('Employee Number: ')
shift = input('Shift number (Enter 1 for day and 2 for night): ')
payRate = input('Hourly Pay Rate: ')

myEmployee = employee.ProductionWorker(name, number,
                           shift, payRate)

print('--------------------')
print('Employee Information')
print('--------------------')
print('Name:', myEmployee.get_name())
print('Employee Number:', myEmployee.get_number())
print('Customer number:', myEmployee.get_Shift())
print('Hourly Pay Rate:', myEmployee.get_payRate()) 
```

好的，固定类型：

```
myEmployee = employee.Employee(name, number,
                           shift, payRate) 
```

到：

```
myEmployee = employee.ProductionWorker(name, number,
                           shift, payRate) 
```

但现在我收到了这个错误：

```
Traceback (most recent call last):
      File "C:/Users/Alex/Desktop/Programming Concepts/Homework 2/Chapter 13/Employee and Production Worker Class.py", line 9, in <module>
        shift, payRate)
      File "C:/Users/Alex/Desktop/Programming Concepts/Homework 2/Chapter 13\employee.py", line 24, in __init__
        Employee.__init__(self, name, number)
      File "C:/Users/Alex/Desktop/Programming Concepts/Homework 2/Chapter 13\employee.py", line 5, in __init__
        self.__number - number
    AttributeError: 'ProductionWorker' object has no attribute '_Employee__number' 
```

再次感谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T15:34:16.320

改变

```
myEmployee = employee.Employee(name, number,
                       shift, payRate) 
```

到

```
myEmployee = employee.ProductionWorker(name, number,
                       shift, payRate) 
```

[此外，还有一条建议：在 Python 中](http://tomayko.com/writings/getters-setters-fuxors)编写 getter 和 setter 通常是不受欢迎的。只需将成员公开并像这样获取/设置它们：

```
myEmployee.name = "David"
print myEmployee.name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T15:34:52.130

只需更改以下几行：

```
myEmployee = employee.Employee(name, number,
                       shift, payRate) 
```

到

```
myEmployee = employee.ProductionWorker(name, number,
                       shift, payRate) 
```

我想这可能只是一个错字..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T15:35:02.323

你在你的主代码中弄错`Employee`了。`ProductionWorker`

代替

```
myEmployee = employee.Employee(name, number,shift, payRate) 
```

经过

```
myEmployee = employee.ProductionWorker(name, number,shift, payRate) 
```

# java - Java - 使用分隔符解析文本以分隔不同的参数

> ID：11743686
> 
> 赞同：0
> 
> 时间：2012-07-31T15:31:11.490
> 
> 标签：java, regex, java.util.scanner, delimiter

您将如何使用多个定界符或单个定界符来检测和分离不同的字符串匹配？

例如，我使用 a`Scanner`来解析以下字符串：

> MrsMarple=新人（）；MrsMarple.age=30;

我想分离出这个字符串，依次确定何时创建一个新人以及何时设置他们的年龄。我还需要知道设置的年龄。

这些参数之间和/或任何一方都可以有任何内容（它们之间不一定必须有空格，但分号是必需的）。“MrsMarple”可以是任何词。我还希望忽略同一行上“//”（两个斜杠）之后的任何参数，但这是可选的。

如果您能想到使用正则表达式的简单替代方法，我非常愿意考虑它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:45:25.570

我可能会尝试一个简单的拆分/循环方法。

给定`String input = "MrsMarple=new Person(); MrsMarple.age=30;"`：

```
String[] noComments = input.split("//");
String[] statements = input.split(noComments[0]);
for(String statement: statements) {
    String[] varValue = statement.split("=");
    ...
    // Additional MrsMarple-SmartSense Technology (tm) here...
    ...
} 
```

明智地使用`String.trim()`和/或其他简单的工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T16:30:05.913

或者为了使问题更笼统（并且没有正则表达式），您可以尝试编写脚本（因为它看起来像脚本语言语法）：http: [//java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting/](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting/)。例子：

```
ScriptEngineManager mgr = new ScriptEngineManager();
ScriptEngine jsEngine = mgr.getEngineByName("JavaScript");
String input = "MrsMarple=new Person(); MrsMarple.age=30;"
try {
  jsEngine.eval(input);
} catch (ScriptException ex) {
    ex.printStackTrace();
} 
```

在这种情况下，您将需要一个名为 Person 的 Java 类以及名为 age 的公共字段。以上代码未经测试，您可能需要添加类似

```
jsEngine.eval("importPackage(my.package);"); 
```

让它工作。无论如何，Oracle 的教程应该会有所帮助。

# java - 打印多行字符串

> ID：11743689
> 
> 赞同：1
> 
> 时间：2012-07-31T15:31:15.010
> 
> 标签：java, logging, log4j, slf4j

> **可能重复：**
> [为多行文本每行显示一个日志](https://stackoverflow.com/questions/4669590/displaying-a-log-per-line-for-a-multiline-text)

给定`String m = "abc\ncdf";`并使用 slf4j 和 log4j，

如果我尝试`logger.debug(m);`在方法中使用该字符串`SomeClass.doSomething()`，则将显示新行之后的文本而没有标准的日志记录前缀：

```
10:40:35,732 [DEBUG] SomeClass.doSomething():32: abc
cdf 
```

如果我使用 util 方法来拆分字符串并将每一行打印为自己的记录器调用：

```
class PrintUtil {
    public static void print(String s) {
        for(String line : s.split("\\n"))
            logger.debug(line);
    }
} 
```

并更改`SomeClass.doSomething()`为 call`PrintUtil.print(m);`然后我丢失了原始班级信息：

```
10:40:35,737 [DEBUG] PrintUtil.print():45: abc
10:40:35,737 [DEBUG] PrintUtil.print():45: cdf 
```

是否可以在不丢失调用类/方法信息的情况下打印多行字符串？

为了澄清，所需的输出将是：

```
10:40:35,732 [DEBUG] SomeClass.doSomething():32: abc
10:40:35,732 [DEBUG] SomeClass.doSomething():32: cdf 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:40:25.503

如果我理解你的话，你想要这样的东西：

```
 10:40:35,737 [DEBUG] PrintUtil.print():45: abc
                                            cdf 
```

在字符串中添加 '\t' (tab) 怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:41:14.527

您应该能够添加“\r\n”

```
logger.info("test\r\ntest"); 
```

# linux - 如何加密 api 用于编写内核模块

> ID：11743690
> 
> 赞同：0
> 
> 时间：2012-07-31T15:31:14.937
> 
> 标签：linux, module, kernel, cryptoapi

我想写一个小的内核模块，我必须在其中获取一个静态字符串，对其进行十六进制编码，然后使用 arc4 算法对其进行加密，然后反转该过程。逻辑对我来说很清楚。我正在遭受的是使用加密 API 的指南。我无法准确找到出路。如果有人能给我一个粗略的介绍或有用的链接，那将对我有很大帮助。我搜索了很多关于它的内容，但无法完全弄清楚。提前致谢。

# php - php用htaccess密码读取一个url？

> ID：11743692
> 
> 赞同：0
> 
> 时间：2012-07-31T15:31:19.497
> 
> 标签：php, fread, http-status-code-401

```
$handle = fopen(site_url() . "/?post_type=tab_content&p=$content_id&_parent_id=$parent_id&_page_id=$page_id", "r");
$contents = fread($handle, filesize($filename));
fclose($handle); 
```

给我：

```
Warning: fopen(http://dev.yoursite.com/website/?post_type=tab_content&p=424&_parent_id=92&_page_id=110): failed to open stream: HTTP request failed! HTTP/1.1 401 Authorization Required in /var/www/domains/dev/website/wp-content/themes/insource/index.php on line 82 Warning: fread() expects parameter 1 to be resource, boolean given in /var/www/domains/dev/website/wp-content/themes/insource/index.php on line 83 Warning: fclose() expects parameter 1 to be resource, boolean given in /var/www/domains/dev/website/wp-content/themes/insource/index.php on line 84 
```

这是我可以用php绕过的东西吗？非常感谢-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:34:18.127

您可以尝试像这样输入内联用户名和密码：

```
http://username:password@dev.yoursite.com/website/?post_type=tab_content&p=424&_parent_id=92&_page_id=110 
```

这应该适用于基本的http身份验证

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T15:34:23.740

您应该能够提供用户名和密码作为 URL 字符串的一部分，就像 FTP 连接一样：

`http://username:password@url.com/path/`

# php - PDO 绑定参数问题

> ID：11743693
> 
> 赞同：-1
> 
> 时间：2012-07-31T15:31:22.223
> 
> 标签：php, pdo

我正在尝试将我的代码转换为`PDO`from `mysql_query`，并从这个函数开始

```
function label_for_field($field_name, $table_name) {
        $table = array();
        // Bind variables to parameters
        $param_array = array(':bundle' => $table_name, ':field_name' => $field_name);
        // Prepare Query Statement
        $query = "SELECT data FROM field_config_instance WHERE bundle = :bundle AND field_name = :field_name";
        $STH = $DBH -> prepare($query);
        // Execute
        $STH -> execute($param_array);

        // Set the fetch mode
        $STH -> setFetchMode(PDO::FETCH_OBJ);
        while ($row = $STH -> fetch()) {
            $info = unserialize($row -> data);
            $table[] = $info['label'];
        }
        return $table[0];
    } 
```

我正在尝试输出它以查看它是否有效

```
include_once ("includes/connect.php");
include ("includes/functions.php");

echo label_for_field("field_account_number", "account_table"); 
```

这是`connect.php`

```
// Include Constants
require_once ("constants.php");

//Establish Connection
try {
    $DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
}
catch (PDOException $e) {
    echo $e -> getMessage();
} 
```

不知道是不是因为我绑定的参数不对，只是给了我一个服务器错误页面

“服务器错误。网站在检索时遇到错误......”

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:35:38.430

您需要设置[PDO 错误模式](http://php.net/manual/en/pdo.error-handling.php)以产生异常，然后才能捕获它们。

在你的`connect.php`：

```
try {
    $DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
    $DBH->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
} 
```

然后，您可以在函数中使用与连接文件类似的 try/catch 语句，并使用它来显示开发环境中的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:39:46.133

试试这个，看看你是否得到了从查询返回的有效对象。

```
 // Prepare Query Statement
    $query = "SELECT data FROM field_config_instance WHERE bundle = :bundle AND field_name = :field_name";
    $STH = $DBH -> prepare($query);
    $STH->bindValue(":bundle", $table_name);
    $STH->bindValue(":field_name", $field_name);
    $STH->execute();
    $STH->setFetchMode (PDO::FETCH_OBJ);

    $result = $STH->fetchAll();

    var_dump($result); 
```

# java - 我不明白“this”与超类一起使用

> ID：11743703
> 
> 赞同：3
> 
> 时间：2012-07-31T15:31:52.420
> 
> 标签：java, oop, inheritance, interface, polymorphism

我有两个类和一个如下所示的接口。快速总结：接口 Winterface、Class Big、Class Little 扩展 Big 并实现 Winterface。

```
public interface Winterface {}

public class Big {

    public int hello = 88;

    public Big() {}

    public void theMethod() {
        System.out.println ("Big was here: " + (this instanceof Winterface) + ", " + this.hello);
    }
}

public class Little extends Big implements Winterface{

    private boolean hello = true;
    public Little(){}

    public void theMethod() {
        super.theMethod();
        System.out.println("Little was here: " + hello);
    }

    public static void main(String [] args) {
        Little l = new Little();
        l.theMethod();
    }
} 
```

当我在 Little 中执行 main 时，我得到以下输出

大在这里：真的，88 小在这里：真的

我的问题是，怎么能

1) (this instanceof Winterface) 返回 true 但是

2) this.hello 是 88 岁吗？如果 this.hello = 88，那么 this = Big，它不是 Winterface 的一个实例。

我不明白这是怎么可能的，在此先感谢

编辑：谢谢大家我现在明白'this'指的是little，这是一个Big并实现Winterface。由于该方法被称为 super.theMethod()，因此可用的变量“hello”是 Big 中的变量，即使“this”指的是 little。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:35:27.800

`l`is `Little`but `Little`is a`Big` **并且**还实现了 的行为`Winterface`。
这`super`是对父类的调用，因此使用了父类的`hello`成员（即`Big`）。
你没有这样做`this.hello`，但`super.theMethod()`它使用了**父**类的成员变量`hello`。

**更新：**
调用父类中 的`super.theMethod()`相应方法。在父类中，您访问父类的字段（也属于派生类，因为`Little`也是 a `Big`）。因此`this.hello`，此时正在访问属于父类的代码部分。
你可以想象一下内存打印`Little`如下：

```
++++++++
+ Big  +
--------
+Little+
++++++++ 
```

`Little`父 ie 的所有成员变量也是如此`Big`，当代码在`super.theMethod()`其中运行时，它在`Big`.
正如彼得在他的回答中所说，方法不支持多态，我希望这种过于简单的描述有助于理解这一点

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T15:35:46.390

`this`只能是一类。但是`this.hello`，该类可以访问该字段。

因为`this`只能是一个类，它是一个`Little`具有父级`Big`并实现的类，`Winterface`当您在其父级中调用一个方法时，它只能看到`hello`它所看到的。

即Java 支持方法的多态性，但不支持字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:38:46.113

这是因为`this instanceof ...`检查不使用静态（即编译时）类型（即`Big`），而是对象的（`this`'）动态运行时类型（即，`this.getClass()`），这`Little`在您的示例中。如果它使用静态类型，那么运算符将毫无意义，因为我们将：

```
Object obj = "foo";

if (obj instanceof Object) { /* always entered */ }
/* but */ if (obj instanceof String) { /* never entered */ } 
```

静态地，在编译时。运算符的目的`instanceof`是启用运行时类型测试，例如：

```
Object obj = /* whatever */;

if (obj instanceof String) {

    String str = (String)obj;   // Cast cannot fail
    ...

} else if (obj instanceof Long) {

    Long val = (Long)obj;       // Cast cannot fail
    ...
} 
```

请注意，这种技术只能谨慎使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T15:40:08.657

您的变量是 Big 和 Little 的一个实例。它是 Little 的直接实例，但由于 Little 继承自 Big，instanceof 运算符也将为 Big 返回 true。

```
Little l = new Little();
System.out.println(l instanceof Little); // true, l is an instance Little
System.out.println(l instanceof Big); // true, l is an instance of Little which inherits from Big 
```

您的另一个误解（我假设）是“方法查找”的工作原理。当您调用 theMethod 时，它会选择 Little 对该方法的实现。但是，当您调用 super.theMethod 时，您已经明确表示“调用此方法的 Big 版本”，然后在该方法中它使用 Big 的 hello 变量而不是 Little 的 hello 变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T15:53:26.683

这里发生的情况是，当您在其中定义变量`hello`时，`Little`您并没有覆盖其中的变量`hello`，而是在`Big`其中定义了一个新变量`hello`，`Little`该变量将隐藏`hello`在`Big`. 因此，在 的范围内`Big`，`hello`将引用整数值 88，在 的范围内`Little`，`hello`将引用 true。这些都是包含在您的对象中的不同变量，唯一的区别是您引用它们的范围。

就像这里的其他人所说的那样，`instanceof`它是一个比较对象的运行时类型（返回的内容`this.getClass()`）的运算符。`Big`即使在您的对象中的变量范围将引用 时，`Big`它`this`仍然是运行时类型`Little`，这就是为什么它是`Winterface`.

# iphone - 工具栏隐藏iOS时出现黑条

> ID：11743704
> 
> 赞同：0
> 
> 时间：2012-07-31T15:31:53.550
> 
> 标签：iphone, objective-c, ios, toolbar

我有 MKMapView 的视图：

```
- (void)viewDidLoad
{
   [super viewDidLoad]; 
   self.navigationController.toolbarHidden = NO;

   /* code of MKMapView ...*/
}

- (void)viewWillDisappear:(BOOL)animated
{
   self.navigationController.toolbarHidden = YES;
} 
```

当我从这个视图中出来时，几秒钟而不是 toolBar 我看到黑色条纹！这是什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:14:04.040

也许你可以试试

```
 [self.navigationController setHidden:Yes animated:Yes]; 
```

如果不这样做，请将调用移出此视图控制器。将它移动到 viewWillAppear: 您要移动到的视图控制器的方法，就像这样

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    [self.navigationController setToolbarHidden:Yes animated:animated];
} 
```

这就是我拥有自己的方式并且有效的方式。

# c# - “底层提供者在打开时失败”

> ID：11743708
> 
> 赞同：3
> 
> 时间：2012-07-31T15:32:06.087
> 
> 标签：c#, wcf, entity-framework

尝试使用实体框架打开连接时，我不断收到此错误。我可以毫无问题地从数据库更新模型，但是当我在调试中运行代码时，它会出现此错误。（在 Windows 2008 虚拟机上运行）

出现错误的代码片段如下所示：

```
public partial class SpatialDatabase : global::System.Data.Objects.ObjectContext
{
    try
    {
        using (EntityConnection conn = new EntityConnection(this.Connection.ConnectionString))
        {
            conn.Open(); // <== fails here

            EntityCommand cmd = conn.CreateCommand();
            ... 
```

这是与 Oracle 数据库的连接。

这段代码显然在其他地方运行正常，所以我感觉它与连接有关。我们正在使用 Oracle for .NET (ODAC) 驱动程序。我不知道它是 64 位还是 32 位，但它在更新模型时有效，但在调试中运行时无效。

（如果我知道要显示什么，我会显示额外的代码！）

来自 app.config 的连接字符串：

```
<connectionStrings>
  <add name="SpatialDatabaseContext" connectionString="metadata=res://*/SpatialDatabase.csdl|res://*/SpatialDatabase.ssdl|res://*/SpatialDatabase.msl;provider=Oracle.DataAccess.Client;provider connection string=&quot;DATA SOURCE=ds_name_here;PASSWORD=password_here;PERSIST SECURITY INFO=True;USER ID=user_id_here&quot;" providerName="System.Data.EntityClient" />
</connectionStrings> 
```

[编辑]

```
System.Data.SqlClient.SqlException: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified) 
```

[/编辑]

[编辑2]

以上可能是一个红鲱鱼。我再次运行它并没有看到那个错误，但我确实看到了这个 InnerException：

```
[Oracle.DataAccess.Client.OracleException] = {"ORA-12154: TNS:could not resolve the connect identifier specified"} 
```

[/编辑2]

[编辑 3]

我尝试改用 EFOracleProvider。它构建得很好，但是当我去生成实体模型时，我得到了这个：

```
Microsoft (R) EdmGen version 3.5.0.0
Copyright (C) 2008 Microsoft Corporation. All rights reserved.

error 7001: The provider did not return a ProviderManifestToken string.
Attempt to load Oracle client libraries threw BadImageFormatException. This problem will occur when running in 64 bit mode with the 32 bit Oracle client components installed.
An attempt was made to load a program with an incorrect format. (Exception from HRESULT: 0x8007000B)

Generation Complete -- 1 errors, 0 warnings 
```

我安装了 32 位和 64 位版本的 Oracle 客户端组件。如何选择运行 32 位还是 64 位？

[/编辑3]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:13:43.407

我找到了几个链接，认为它们会对您有所帮助！因此在这里分享。

参考这篇博文，[http](http://th2tran.blogspot.in/2009/06/underlying-provider-failed-on-open.html) ://th2tran.blogspot.in/2009/06/underlying-provider-failed-on-open.html 这部分我想从这篇博文中与你分享。“所以 IIS 正试图访问凭据 'NT AUTHORITY\NETWORK SERVICE' 下的数据库。我通过 SQL Server Management Studio 查看了数据库设置，果然，该帐户未列为允许连接的用户之一。所以我加了他。网络应用程序能够成功连接。”

试试这个！

如果您已经处理了它，请参考以下链接：[MSSQL 错误“底层提供程序在打开时失败”](https://stackoverflow.com/questions/2475008/the-underlying-provider-failed-on-open)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:11:11.083

抱歉，如果以上任何内容对您没有帮助。我刚刚添加它们是因为您在 [编辑] 中添加了与 SQL Server 相关的内容

无论如何，请在 SQL Server 中检查以下内容：[http ://www.sswug.org/articlesection/default.aspx?TargetID=44331](http://www.sswug.org/articlesection/default.aspx?TargetID=44331)

如果是 Oracle，如果有帮助，请参考以下链接。

[http://ora-12154.ora-code.com/](http://ora-12154.ora-code.com/) http://blogs.msdn.com/b/dataaccesstechnologies/archive/2010/06/30/ora-12154-tns-could-not-resolve-the-在创建链接服务器到 oracle.aspx 时连接标识符指定错误

问候，

Varun Shringarpure

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T08:37:47.980

> 服务器未找到或无法访问。

表示您的连接字符串指向无法找到的服务器。最常见的（至少对我而言）是由于错误的 Sql Server 名称，在您的情况下可能是类似的。检查

```
Data Source=(local) 
```

连接字符串的一部分指向您可以使用其他工具/应用程序访问的连接

（例如`app.config`，`.edmx`文件的应该指向同一个地方）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-27T14:44:19.863

在连接字符串中，对于数据源，确保使用完整的描述符而不是 TNSNames.ora 中的条目。例如，

```
`"data source=(DESCRIPTION= (ADDRESS= (PROTOCOL=TCP) (HOST=**host_name**) (PORT=**1521**)) (CONNECT_DATA= (SERVER=dedicated) (SID=**db_instance**)))"` 
```

代替

```
"data source=**my_tns_ds**" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T15:37:19.547

有关信息，没有修复。

我最终放弃了我遇到问题的VM并构建了另一个（其他人构建了它！）

现在问题消失了。

# c++ - 自动修复 C++ 代码库中的文件名大小写？

> ID：11743709
> 
> 赞同：1
> 
> 时间：2012-07-31T15:32:06.617
> 
> 标签：c++, automation

我正在将在 Windows 平台上开发的 C++ 代码库移植到 Linux/GCC。看来作者不关心文件名的大小写，所以他用

```
#include "somefile.h" 
```

代替

```
#include "SomeFile.h" 
```

包括实际上称为“SomeFile.h”的文件。我想知道是否有任何工具可以自动修复这些包含？这些文件都在一个目录中，因此该工具很容易找到正确的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:39:57.860

编辑：在做任何事情之前请注意，我假设您要么有文件的副本，要么最好在源代码管理中拥有基线版本，如果您出于任何原因需要回滚。

你应该能够做到这一点`sed`：像`sed -i 's/somefile\.h/SomeFile.H/I' *.[Ch]`

这意味着采用不区分大小写`somefile`（尾随`/I`）并`-i`使用其他文本`SomeFile.H`.

您甚至可以循环执行（完全未经测试）：

```
for file in *.[Ch]
do
    sed -i "s/$file/$file/I" *.[Ch]
done 
```

我应该注意，虽然我不相信这适用于您，但 Solaris`sed`不支持`-i`，您必须安装 GNU sed 或重定向到文件并重命名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:40:01.357

原谅我，我现在远离我的 linux 环境，所以我不能自己测试这个，但我可以告诉你你需要使用哪些实用程序来完成它。

1.  打开终端并使用`cd`导航到正确的目录。

    `cd ~/project`

2.  获取您需要的所有 .h 文件的列表。您应该能够毫不费力地通过 shell 的通配符扩展来完成此操作。

    `ls include/*.h libs/include/*.h`

3.  获取整个项目中所有文件的列表（.c、.cpp、.h、.whatever），任何可以#include“header.h”的文件。再次，通配符扩展。

    `ls include/*.h libs/include/*.h *.cpp libs/*.cpp`

4.  使用 for 循环遍历项目中的每个文件

    ```
    for f in ... # wildcard file list
    do
        echo "Looking in $f"
    done 
    ```

5.  使用 for 循环遍历每个头文件

    ```
    for h in ... # wildcard header list
    do
        echo "Looking for $h"
    done 
    ```

6.  对于每个项目文件中的每个标头，使用`sed`搜索`#include "headerfilename.h"`，并替换为`#include "HeaderFileName.h"`或任何正确的大小写。

    **警告：未经测试，可能很危险：** 这个东西是一个开始的地方，在使用前应该彻底测试。

    ```
    h_escaped=$(echo $h | sed -e 's/\([[\/.*]\|\]\)/\\&/g') # escapes characters in file name
    argument="(^\s*\#include\s*\")$h_escaped(\"\s*\$)" # I think this is right
    sed -i -e "s/$argument/\$1$h\$2/gip"` 
    ```

    是的，我知道它看起来很糟糕。

需要考虑的事项：

*   与其直接在生产代码库上运行它，不如先彻底测试它。
*   `sed`可以像录像机一样吃文件可以吃磁带。
*   做好备份。
*   做另一个备份。
*   这是一个涉及硬盘访问的 O(N^2) 操作，如果您的项目很大，它将运行缓慢。如果您的项目不是很大，请不要打扰，但如果是，请考虑做一些事情来将`sed`s 的输出传递给其他`sed`s。
*   您的搜索应该不区分大小写：它应该匹配 #include、#INCLUDE、#iNcLuDe 以及现有头文件名中存在的任何大小写组合，以及包含和头之间的任何数量的空格。如果您保留空格，则可以加分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:36:05.593

使用 Notepad++ 执行“在文件中查找”并替换。

从工具栏：搜索 - 在文件中查找。然后完成“查找内容”和“替换为”。

# audio - 使用 GLSL 进行频率调制？

> ID：11743715
> 
> 赞同：5
> 
> 时间：2012-07-31T15:32:34.270
> 
> 标签：audio, glsl, signal-processing

## 1\. 背景

我正在使用[GLSL](http://en.wikipedia.org/wiki/GLSL)来绘制给定频率下的波形*幅度，如下所示：*

![GLSL 图](../Images/5431bf6286a19e9b8668f5ad444f5317.png)

显示像上面这样的简单波形是一项微不足道的任务，只需使用正确的方程式（[此处](http://pastebin.com/ChV3YFtA)提供 GLSL 摘录代码）。我现在要做的是显示两个波形之间的**频率调制结果。**

* * *

## 2.研究

经过一些研究，我发现了两种可能的方法来实现这一点：

1.  **使用类似 dsp 的方法**，据我所知，使用*相位累加器*（请参阅[此处的第一个答案](https://dsp.stackexchange.com/questions/971/how-to-create-a-sine-wave-generator-that-can-smoothly-transition-between-frequen)）结合查找表是使用信号处理时的建议方法。作为一个 GLSL 初学者，我明白这对于 GLSL 着色器来说是不可能的，因为它们不能跨多个 GPU 周期存储和增加变量。

2.  **使用纯数学方法**，这涉及到像乔宁的[简单 fm 公式](http://img140.imageshack.us/img140/9420/chowning.png)这样的方程。 [FM 公式 http://img577.imageshack.us/img577/4820/fmformula.png](http://img577.imageshack.us/img577/4820/fmformula.png)
    该公式在某些情况下效果很好（[*余弦波*调制另一个*余弦*](http://img819.imageshack.us/img819/2972/83735936.png)或[*余弦*调制*锯齿*](http://img267.imageshack.us/img267/900/fmsaw.png)）但我无法找到一个通用方程在每种情况下都可以工作（当*锯齿波*调制*余弦*时，我希望[载波频率被锯齿幅度调制](http://img267.imageshack.us/img267/5721/sawcos.png)，但我得到的只是载波显然未调制）。

* * *

## 3\. 问题

*   解决这个问题的最佳方法是什么？
*   GLSL 是否可以使用类似 dsp 的方法？
*   如果没有，是否有任何通用的 FM 方程足够灵活来完成所有工作？

考虑到我在这里所涉及的所有学科（音频 dsp、计算机科学、gpu 编程、数学）都缺乏技能，如果我在这里遗漏了一些非常简单的东西，我不会感到惊讶。请耐心等待。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T11:43:30.327

您说得对，相位累加器的通常类似 dsp 的方法不太适合 GPU 上的并行计算。因此，“纯数学”方法可能是最好的选择。

将 Chowing 的简单 FM 公式推广到更通用的频率调制函数在[Wikipedia 页面上的频率调制](http://en.wikipedia.org/wiki/Frequency_modulation)（该页面上的第一个方程）中给出。关键是 cos 函数的参数是*相位*，正如维基百科上的方程所示，相位是频率的时间积分。在 FM 中，频率通常是载波加上调制：例如，对于简单的正弦 FM，使用 Chowing 的公式，频率作为时间的函数`t`是

```
f(t) = f_c - M * f_m * sin(f_m * t) 
```

其中`f_c`是载波频率，`M`是调制量，`f_m`是调制频率。这集成到阶段

```
p(t) = f_c * t + M * cos(f_m * t) 
```

这对应于您问题等式中的阶段。

用锯齿调制余弦`f(t)`将是锯齿波（加上载波频率），因此要找到`p(t)`锯齿波的时间积分。这相对简单（它应该是一个分段二次函数），但是如果您有困难，math.stackexchange 的人应该能够提供帮助。

（注意：我在这里用时间来表达一切`t`，但这也可以是空间，`x`而不是。）

# javascript - .isNumber 如何在 underscore.js 中工作？

> ID：11743722
> 
> 赞同：4
> 
> 时间：2012-07-31T15:32:54.127
> 
> 标签：javascript, underscore.js

在underscore.js中，下面的代码好像加了_.isNumber()

```
 // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp.
  each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'], function(name) {
    _['is' + name] = function(obj) {
      return toString.call(obj) == '[object ' + name + ']';
    };
  }); 
```

但肯定还有其他事情发生，因为将这段代码直接复制到 Firefox 会导致它作为`toString.call(5)`返回失败`[xpconnect wrapped native prototype]`——所以它显然在某处做了其他事情——但我不知道是什么。

以下是 Firefox 中的结果示例：

[http://jsbin.com/uviyaz/2/edit](http://jsbin.com/uviyaz/2/edit)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:39:47.357

您的 jsbin 正在显示`window.toString`，其中下划线正在使用`Object.prototype.toString`，他们`toString`在代码中将其别名为本地。

见[http://jsbin.com/uviyaz/3/edit](http://jsbin.com/uviyaz/3/edit)

另请参阅[下划线的来源](http://underscorejs.org/underscore.js)：

```
 // Create quick reference variables for speed access to core prototypes.
  var slice            = ArrayProto.slice,
      unshift          = ArrayProto.unshift,
      toString         = ObjProto.toString,
      hasOwnProperty   = ObjProto.hasOwnProperty; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:40:17.037

在下划线的代码中，`toString`是一个局部变量，其值为`Object.prototype.toString`. 你假设它是一个全局函数——这就是你得到意想不到的结果的原因。

来自[下划线的源代码](https://github.com/documentcloud/underscore/blob/master/underscore.js#L23)：

```
 // Save bytes in the minified (but not gzipped) version:
  var ArrayProto = Array.prototype,
      ObjProto = Object.prototype,
      FuncProto = Function.prototype;

  // Create quick reference variables for speed access to core prototypes.
  var push = ArrayProto.push,
      slice = ArrayProto.slice,
      unshift = ArrayProto.unshift,
      toString = ObjProto.toString,
      hasOwnProperty = ObjProto.hasOwnProperty; 
```

# ios - 分离 NSData 对象

> ID：11743723
> 
> 赞同：0
> 
> 时间：2012-07-31T15:32:56.230
> 
> 标签：ios, json, twitter, nsdata

我正在使用 NSURLConnection 通过 Twitter 接收推文流。我收到的每条推文都是一个 NSData 对象。连接接收数据并附加后，NSData 对象的日志如下所示：

```
Data that is received: <3c68746d 6c3e0a3c 68656164 3e0a3c6d 65746120 68747470 2d657175 
69763d22 436f6e74 656e742d 54797065 2220636f 6e74656e 743d2274 6578742f 68746d6c 
3b206368 61727365 743d7574 662d3822 2f3e0a3c 7469746c 653e4572 726f7220 34303120 
556e6175 74686f72 697a6564 3c2f7469 746c653e 0a3c2f68 6561643e 0a3c626f 64793e0a 
3c68323e 48545450 20455252 4f523a20 3430313c 2f68323e 0a3c703e 50726f62 6c656d20 
61636365 7373696e 6720272f 312f7374 61747573 65732f66 696c7465 722e6a73 6f6e272e 
20526561 736f6e3a 0a3c7072 653e2020 2020556e 61757468 6f72697a 65643c2f 7072653e 
0a202020 20202020 20202020 20202020 20202020 20202020 20202020 20202020 20202020 
20202020 20202020 20202020 200a2020 20202020 20202020 20202020 20202020 20202020 
20202020 20202020 20202020 20202020 20202020 20202020 20200a20 20202020 20202020 
20202020 20202020 20202020 20202020 20202020 20202020 20202020 20202020 20202020 
2020200a 20202020 20202020 20202020 20202020 20202020 20202020 20202020 20202020 
20202020 0a3c2f62 6f64793e 0a3c2f68 746d6c3e 0a> 
```

现在我的问题是，如何将它们分开，以便每个都是它们自己的 NSData 对象？在我能够做到之前，我无法使用 NSJSONSerialization 解析它。我假设这些地址中的每一个都是需要解析的推文。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:40:58.270

这是你收到的提要，目前在 NSData 中。您需要将其转换为 NSString 才能使用 NSLog 并查看提要实际上是什么，或者如果您正在使用 NSXMLParser 解析提要中的内容，则可以将此 NSData 对象直接传递给解析器。

要将 NSData 转换为 NSString，您可以使用：

```
NSString* newStr = [[[NSString alloc] initWithData:theData
                                         encoding:NSUTF8StringEncoding] autorelease];
//autorelease for non-arc environment

NSLog(@"%@",newStr); 
```

# php - 在 PHP 中从文本文件创建 html 表

> ID：11743724
> 
> 赞同：0
> 
> 时间：2012-07-31T15:32:58.113
> 
> 标签：php, html

我正在尝试从以逗号分隔的文本文件中存储的名称列表创建一个 5 列的 html 表。

我已经做到了这一点，但我离一个称职的编码员还很远，需要一些帮助。目前它在一长列中显示表格。

```
<?php
$f = fopen("names.txt", "r");
while (!feof($f)) { 
$arrM = explode(",",fgets($f));   

$val = current  ( $arrM )  ;
print "<table border=1>";
while ( $val )
    {
      print "<tr> <td> $val </td> ";
      $val = next ( $arrM) ;
      print "<td> $val </td> </tr> ";
      print "\n";
      $val = next ( $arrM );
    }

print "</table>";
}
    ?> 
```

首先十分感谢

已解决...这是任何寻求相同帮助的 Google 员工的代码...

```
<?php 
    $tdcount = 1; $numtd = 3; // number of cells per row 
    print "<table>"; 
    $f = fopen("names.txt", "r"); 
    while (!feof($f)) { 
        $arrM = explode(",",fgets($f)); 
        $row = current ( $arrM ); 
        if ($tdcount == 1) 
            print "<tr>"; print "<td>$row </td>"; 
        if ($tdcount == $numtd) { 
            print "</tr>"; 
            $tdcount = 1; 
        } else { 
            $tdcount++; 
        } 
    } 
    if ($tdcount!= 1) { 
        while ($tdcount <= $numtd) { 
            print "<td>&nbsp;</td>"; $tdcount++; 
        } print "</tr>"; 
    } 
    print "</table>"; 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:37:54.227

将 CSV 文件打印为 HTML 表格，无论它有多少列，使用[`fgetcsv()`](http://php.net/fgetcsv)：

```
if( ($handle = fopen( 'test.csv', 'r' )) !== false )
{
    $output = '<table>';
    while( ($data = fgetcsv( $handle )) !== false )
    {
        $output .= '<tr>';
        foreach( $data as $value )
        {
            $output .= sprintf( '<td>%s</td>', $value );
        }
        $output .= '</tr>';
    }
    fclose( $handle );
    $output .= '</table>';
}
echo $output; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:41:19.073

如果`$arrM`包含从对逗号分隔的数据字符串执行的数组派生的数组，则`explode()`您所要做的就是一个`foreach()`on`$arrM`

```
echo "<table border='1'>";
foreach ($arrM as $val) {
    echo "<tr><td>" . $val . "</td></tr>";
}
echo "</table>"; 
```

当然，这是如果您想创建一个包含一列和多行的垂直表。但是，如果这是您想要完成的，它听起来更像是一个列表而不是一个表格。在这种情况下，你可以试试这个：

```
echo "<ul>";
foreach ($arrM as $val) {
    echo "<li>" . $val . "</li>";
}
echo "</ul>"; 
```

然后，您可以使用 CSS（级联样式表）对其进行样式设置。

**更新：**如果您想在列中显示所有名称，只需将`<tr>`标签分开：

```
echo "<table border='1'><tr>";
foreach($arrM as $val) {
    echo "<td>" . $val . "</td>";
}
echo "</tr></table>"; 
```

相反，如果您只想要 x 列，还有一种方法可以做到这一点：

```
$maxCols = 10;
$counter = 0;

echo "<table border='1'>";
foreach ($arrM as $val) {
    $newRow = ($counter++ % $maxCols == 0);
    if ($newRow) {
        echo "<tr>";
    }
    echo "<td>" . $val . "</td>";
    if ($newRow) {
        echo "</tr>";
    }
}
// fill out the rest of the table
$remainingCols = $maxCols - (count($arrM) % $maxCols);
for ($i = 0; $i < $remainingCols; $i++) {
    echo "<td>&nbsp;</td>";
}
echo "</table>"; 
```

我的数学可能与此有关，但您至少应该能够使用此代码并对其进行调试。

# php - MySQL：插入、更新和签入单个查询

> ID：11743727
> 
> 赞同：0
> 
> 时间：2012-07-31T15:33:06.570
> 
> 标签：php, mysql

我正在托管一个网站，授权用户可以在其中添加内容。内容放置在网页上的块内。授权用户能够创建新块并将块按特定顺序放置。块的顺序和内容存储在数据库中。

创建新块时，将执行以下两个 MySQL 查询：

使用以下查询更新数据库中块的订单号：

```
UPDATE `Block`
SET `block_order` = `block_order` + 1
WHERE `tab_nr` = $tab_nr
AND `block_order` > $nr; 
```

通过执行以下查询添加新块：

```
INSERT INTO `Block`
  (`id`, `tab_nr`, `block_order`, `html`, `created`)
VALUES
  (NULL, $tab_nr, $nr + 1, '$html', CURRENT_TIMESTAMP); 
```

这些查询的问题在于，无论第二个查询发生什么，都会执行第一个查询。如果第二个查询失败（无论原因是什么），其他块的订单号仍然会因第一个查询的执行而改变。这样，大宗订单号就搞砸了。

我需要的是一个单独的查询，它将新块添加到数据库中，并且当且仅当有相同编号的块时才更新其他块的订单号。但问题是我找不到能满足我所有需要的查询。例如“ON DUPLICATE KEY UPDATE”只会更新与新插入冲突的行，但在我的情况下，其他行也需要更新。对于摆脱上述问题的查询有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:36:52.043

看看[事务性数据库查询](http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-transactions.html)。这是完成您正在尝试做的事情的正确方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:39:43.580

正如马特在评论中所说，您需要使用交易查询。这样的事情可能会有所帮助。

```
START TRANSACTION;

UPDATE Block
SET block_order = block_order + 1
WHERE tab_nr = $tab_nr
AND block_order > $nr;

INSERT INTO Block
  (id, tab_nr, block_order, html, created)
VALUES
  (NULL, $tab_nr, $nr + 1, '$html', CURRENT_TIMESTAMP);

COMMIT; 
```

因此，即使第一个查询失败，整个事务也会回滚并为您节省麻烦。

# javascript - 添加画廊图片的链接

> ID：11743729
> 
> 赞同：1
> 
> 时间：2012-07-31T15:33:08.370
> 
> 标签：javascript, jquery

我正在使用 jQuery 图库脚本，我想添加一个指向大图像的链接，但我不确定如何，因为 div 和图像是动态生成的。我非常感谢您可能提出的任何建议或建议。

这是我尝试过的方法，除了第一个图像由于某种原因损坏之外。

```
.prepend('<div id="' + id + '"><a class="imghold" href="#"></a></div>') 
```

我将锚点添加到 div，然后将其添加到 img 标签：

```
.appendTo('#' + id + ' a.imghold') 
```

除了列表中的第一个图像被破坏之外，哪个有效。由于某些原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:00:02.440

认为 jQuery 包装是您正在寻找的。

[http://api.jquery.com/wrap/](http://api.jquery.com/wrap/)

```
$(<image-selector>).wrap('<a href="<url>"></a>'); 
```

# java - 如何从注释控制器中的表单中获取值

> ID：11743730
> 
> 赞同：0
> 
> 时间：2012-07-31T15:33:10.853
> 
> 标签：java, spring, jsp, spring-mvc, controller

我有一些 jsp 页面 manage.jsp 和里面的表格：

```
<form method="POST" action="./manage.form">
    <div style=" float: left;">
        <textarea id="errors" name="errors">${ignoredExceptions}</textarea>
    </div>

    <div id="successOrErrorSave"></div>

    <div style="clear: both;">
        <input type="submit" id="saveIgnoredErrors" style="margin-left: auto; margin-top: 10px;" value="<spring:message code="errorlogging.ignredExceptions.save" />"/>
    </div>
 </form> 
```

我有一些控制器 ManageController：

```
/**
 * The main controller.
 */
@Controller
public class ManageController {

    protected final Log log = LogFactory.getLog(getClass());

    @RequestMapping(value = "/module/manage", method = RequestMethod.GET)
    public void showForm(ModelMap model) {
        GlobalProperty glProp = Context.getAdministrationService().getGlobalPropertyObject(
            Constants.GP_IGNORED_EXCEPTION);
        if (glProp != null) {
            model.addAttribute("ignoredExceptions", glProp.getPropertyValue());
        } else {
            model.addAttribute("ignoredExceptions", "");
        }
    }

    @RequestMapping(value = "module/manage", method = RequestMethod.POST)
    public String processSubmit(@ModelAttribute(value = "ignoredExceptions") String ignoredExceprions, BindingResult result,
                                SessionStatus status) {
        boolean successSave = false;
        GlobalProperty glProp = Context.getAdministrationService().getGlobalPropertyObject(
            ErrorLoggingConstants.ERRROR_LOGGING_GP_IGNORED_EXCEPTION);
        if (glProp != null) {
            glProp.setPropertyValue(ignoredExceprions);
            GlobalProperty saved = Context.getAdministrationService().saveGlobalProperty(glProp);
            System.out.println(saved.getPropertyValue());
                        if (saved != null && saved.getPropertyValue().equals(ignoredExceprions)) {
                successSave = true;
            }
        }
                status.setComplete();
        return "module/manage";
    }
} 
```

当我在 textarea 中打开管理页面时，我正在显示当前被忽略的异常。我需要保存用户输入的新值被忽略的异常，然后重定向到相同的管理页面，该页面将查看被忽略的异常的新值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:20:40.283

ignoreExceptions 的更改值与表单中名为 errors 的 textarea 字段相关联，因此您可以从请求中读取错误值或作为 RequestParameter

```
@RequestMapping(value = "module/manage", method = RequestMethod.POST)
public String processSubmit(@RequestParam(value = "errors", required = false) String   ignoredExceprions, BindingResult result,
                            SessionStatus status) {
    boolean successSave = false;
    GlobalProperty glProp = Context.getAdministrationService().getGlobalPropertyObject(
        ErrorLoggingConstants.ERRROR_LOGGING_GP_IGNORED_EXCEPTION);
    if (glProp != null) {
        glProp.setPropertyValue(ignoredExceprions);
        GlobalProperty saved = Context.getAdministrationService().saveGlobalProperty(glProp);
        System.out.println(saved.getPropertyValue());
                    if (saved != null && saved.getPropertyValue().equals(ignoredExceprions)) {
            successSave = true;
        }
    }
            status.setComplete();
    return "module/manage";
} 
```

}

# ajax - 文件上传器的 Ajax 实现中的内存泄漏（Heroku 上的 Django）

> ID：11743734
> 
> 赞同：3
> 
> 时间：2012-07-31T15:33:25.233
> 
> 标签：ajax, django, file-upload, heroku, django-imagekit

我已经为 Django 创建了一个 ajax 文件上传器，但是每个上传的文件都占用了一**大块**内存（30-80 mb），而且似乎并没有放过它。

我们在 Heroku 上，它为每个测功机分配 512mb 的内存，所以我很快就开始遇到内存过剩的错误。

这是处理请求的 Django 视图代码：

```
if request.is_ajax():
        # the file is stored raw in the request
        upload = request
        is_raw = True
        try:
          filename = request.GET[ 'add_image' ]
        except KeyError:
          return HttpResponseBadRequest( "AJAX request not valid" )
        (fileBaseName, fileExtension)=os.path.splitext(filename)

        uniquename = biz_id + "__" + get_a_uuid() + fileExtension
        saved = save_upload(upload, uniquename, biz) 
```

这是 save_upload 代码：

```
try:
    #BusinessImage is my Django model.  It uses django-imagekit to processs
    #the raw uploaded image into three sizes (plus the original)
    bi = BusinessImage(name=uploaded.GET.get("name"), business=biz)
    if not BusinessImage.objects.filter(business=biz).exists():
        bi.primary_image = True
    bi.original_image.save(filename,ContentFile(uploaded.read()))
except IOError:
    # could not open the file most likely
    return False
finally:
    uploaded.close()
return True 
```

这段代码改编自[这篇文章](https://stackoverflow.com/questions/4750168/fileupload-with-django)（感谢 Alex Kuhl 和 Thunder Rabbit）。

我在想内存问题可能与 django-imagekit 有关，或者我可能没有正确关闭文件，但我不确定。我真的很感激任何帮助。

谢谢！

粘土

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:44:00.273

Django 上传处理程序通常不用于处理和转换文件，它们是为了让它们准备好传递给 request.FILES 数组中的视图（通过保存到 /tmp 或保存到内存）。

`[nginx upload module][1]`如果您想要一种简单、快速且低内存的方式来获取进度反馈，请尝试使用（并上传进度）。它将上传文件复制到磁盘上的指定位置，并在 POST vars 中使用文件路径、大小和 mime 类型将请求传递到视图。比使用 django 更有效。

# c++ - 以下 xerces 代码会导致内存泄漏吗？

> ID：11743739
> 
> 赞同：1
> 
> 时间：2012-07-31T15:33:51.590
> 
> 标签：c++, xerces, xerces-c

我查看了我在互联网上找到的 xerces 生成 XML 的示例。Transcode 函数似乎执行了一些编码，但它填充的缓冲区从未被释放。根据文档，您必须手动释放 ti：

> 注意：返回的缓冲区是动态分配的，调用者有责任在不再需要时将其删除。您可以调用 XMLString::release 来释放这个返回的缓冲区。

doc->release 可以从内存中释放它吗？

```
 XMLCh tempStr[100];

    XMLString::transcode("Range", tempStr, 99);
    DOMImplementation* impl = DOMImplementationRegistry::getDOMImplementation(tempStr, 0);

    XMLString::transcode("root", tempStr, 99);
    DOMDocument*   doc = impl->createDocument(0, tempStr, 0);
    DOMElement*   root = doc->getDocumentElement();

    XMLString::transcode("FirstElement", tempStr, 99);
    DOMElement*   e1 = doc->createElement(tempStr);
    root->appendChild(e1);

    XMLString::transcode("SecondElement", tempStr, 99);
    DOMElement*   e2 = doc->createElement(tempStr);
    root->appendChild(e2);
    doc->release(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:44:22.647

如果我误解了，请原谅我，但是`transcode`您在那里使用的版本实际上并没有创建或返回任何缓冲区，因为它正在修改您提供的缓冲区 ( `tempStr`)。您的示例代码不会泄漏内存。

*确实*返回缓冲区的版本（例如`transcode`，除了示例代码块中的版本之外的所有其他版本）使用实例来执行分配。这里的文档似乎有点稀疏，但据我所知，默认设置没有声称要清理它分配的任何内存。因此，您应该假设您需要自己销毁返回的缓冲区。*`MemoryManager``XMLPlatformUtils::fgMemoryManager`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:48:45.293

不，`doc->release()`不是释放缓冲区。

正如您引用的文档所说，如果您正在调用返回转码字符串的函数，*则*需要使用 释放缓冲区：`XMLString::release()``transcode`

```
char *str = XMLString::transcode(someStringVarToBeTranscoded);
XMLString::release(&str); 
```

您的示例不需要这样做，因为您使用的`transcode`是返回`boolean`值的函数。*

# asp.net - 表单身份验证 cookie 值在 firebug 中看起来为空

> ID：11743740
> 
> 赞同：0
> 
> 时间：2012-07-31T15:33:55.113
> 
> 标签：asp.net, formsauthentication

我在让 Forms Authentication Ticket 和 Cookie 正常工作时遇到了很多麻烦，因为现在我只是想知道在检查 FireFox 和 Chrome 中的值时 cookie 在 firebug 中似乎没有价值是否正常。这似乎不对，在我浏览完这段代码后，cookie 出现了，但是是空的。在此代码中，sUserData 已正确设置。

我这样设置：

```
Dim sUserData As String = HttpContext.Current.Request.Cookies("UserID").Value & "|" & 
    HttpContext.Current.Request.Cookies("UserName").Value & "|" & 
    HttpContext.Current.Request.Cookies("UserEmail").Value

Dim fat As FormsAuthenticationTicket = New FormsAuthenticationTicket(1, _
    HttpContext.Current.Session("UserID"), DateTime.Now, _
    DateTime.Now.AddDays(6), True, sUserData, _
    FormsAuthentication.FormsCookiePath)

HttpContext.Current.Response.Cookies.Add(New HttpCookie(FormsAuthentication.FormsCookieName, _
    FormsAuthentication.Encrypt(fat))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:47:32.967

不，在使用 Chrome 时，我可以看到 cookie 的价值。让我们尝试做一个简单的检查。您可以先尝试简单的键值对而不是 FormAuthentication Ticket。

# jquery - 在文本框上方或下方对齐弹出通知 (CSS/jQuery)

> ID：11743741
> 
> 赞同：0
> 
> 时间：2012-07-31T15:33:59.390
> 
> 标签：jquery, html, css, jquery-ui, xhtml

我在[这里](http://pwtest1234.perfmon.com/)有一个密码重置页面，每当用户在带有 class 的“新密码”文本框中键入时，都会弹出一个 jquery 弹出窗口`id="pswd_info"`。

问题是弹出窗口覆盖了文本框。现在我将它固定在页面底部，没有任何其他解决方案。当浏览器尺寸缩小时，这并不好，如下所示：

![PWUpdate 屏幕的图像](../Images/040fd492614fb2570de4df4968d9d1ec.png)

我应该探索哪些技术来将弹出窗口或“新密码”文本框向上移动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:44:49.237

您正在使用这个 css：

```
right: 360px; 
```

这个位置从页面的右端弹出 360 像素。这将是一个问题，因为大多数用户有不同的屏幕宽度。（尝试调整浏览器窗口的大小）

要使用更通用的居中方法，请使用：

```
right:50%;
margin-right:-125px; 
```

这会将它定位在中间。margin-right 是弹出窗口全宽的一半，以补偿元素自身的宽度。

你的底部属性也会有同样的问题，因此我建议使用顶部而不是底部。（加上你有 2 个不同的底部属性，一个是有缺陷的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:42:05.207

我会将弹出窗口移动到与密码输入字段相同的 li 元素中：

```
<li style="position: relative;">
    <label for="pswd">New Password:</label>
    <span>
        <input id="MainContent_pswd" type="password" autocomplete="off" name="ctl00$MainContent$pswd">
    </span>
    <div id="pswd_info">place your password info box content here...</div>
</li> 
```

但是您必须在 li 元素处设置“位置：相对”（通过类或如上例所示）

至少您必须设置“底部：（您到下一个相对父级的底部距离）px；” 财产 ：）

# javascript - javascript XML 子节点

> ID：11743746
> 
> 赞同：0
> 
> 时间：2012-07-31T15:34:14.270
> 
> 标签：javascript, xml, nodes

您好我正在尝试使用 childNodes 访问节点的元素。这是一个示例 XML

```
<ROOT xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<node>
 <nodeid>28</nodeid> 
 <account_no xsi:nil="true" /> 
 <address1>15 CANCUN CT</address1> 
 <serial_no>112199543</serial_no> 
 <x_lat>25.95513358000</x_lat> 
 <y_lon>-97.49027147000</y_lon> 
 <alarm>
  <alarmid>Outage</alarmid> 
  <alarmtime>2012-07-30T14:46:29</alarmtime> 
 </alarm>
 <alarm>
  <alarmid>Restore</alarmid> 
  <alarmtime>2012-07-30T14:48:37</alarmtime> 
 </alarm>
 </node>
</ROOT> 
```

我正在尝试获取第二个 childNodes 但无法使用 javascript。但是，我可以通过此 js 代码从第一个获取节点值。

```
var alarmId = xmlDocOut.getElementsByTagName('alarmid')[i].childNodes[0].nodeValue;
var alarmTime = xmlDocOut.getElementsByTagName('alarmtime')[i].childNodes[0].nodeValue; 
```

如果我尝试使用 ...[i].childNodes[1].nodeValue，js 将在该行抛出一个错误，提示“需要对象”。
我试过了

```
...[i].childNodes[1...4].nodeValue 
```

和

```
...[i].childNodes[0].childNodes[0].nodeValue. 
```

而且还是一无所有！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:42:45.173

xmlDocOut.getElementsByTagName('alarmid')[i].childNodes[1] 不存在；每个 alarmId 节点只有 1 个子节点；一个文本节点。

例如：

```
<alarmid>Outage</alarmid> 
```

有 1 个子节点；带有 text == "Outage" 的 textNode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:54:45.057

我明白了，我只需在下标中添加一个 ...[i+1].childNodes[0].nodeValue 即可获得第二个警报元素。

# youtube-api - 如何获取之前上传的视频的视频 ID，该视频在 Youtube 上被拒绝为重复视频？

> ID：11743749
> 
> 赞同：3
> 
> 时间：2012-07-31T15:34:15.190
> 
> 标签：youtube-api

我已经将我的视频内容上传到了 Youtube，但之后我看到了一个“问题”，当使用相同的帐户再次将相同的视频上传到 Youtube 时，Youtube 正在拒绝这个视频，并显示这条消息“<strong>重复内容”并且它没有返回给我有效的视频（**重复**）网址，但我想找到以前的视频网址，因为用户不明白为什么他/她的视频被拒绝。

最后 ，

如何获取先前上传的视频的视频 ID，该视频在 Youtube 上被拒绝为重复视频？

谢谢 ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T08:04:41.113

重复内容意味着谷歌检查了他们的服务器以查看视频是否已经存在于他们的服务器上。因为他们的服务器上已经存在相同的视频，所以会显示重复内容的消息。

这意味着您必须在 YouTube 上搜索相同的视频（及其 URL）。如果您找到相同的视频和 URL，则必须使用该视频的 URL - 否则您必须将该视频转换为另一种格式（通过[视频压缩](http://blog.ektel.com.np/2012/04/huffman-encoder-decoder-vlsi-design-systematic-block-diagram/)或文件转换，例如 MPEG 到 MWV 或 MWV 到 FLV 等），以便 Google 的算法不会不要将其视为原始视频的副本。

如何获取视频ID？[这是一个例子](http://youtu.be/iXPYGj0_epw)。最后一个 - iXPYGj0_epw - 是您的视频 ID，但要首先找到该视频，您必须搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-20T13:10:27.893

你必须找到过去上传的视频管理器，当我使用 YouTube 时，这对我来说总是一个真正的壮举——如何找到这个页面并不直观，但一旦我找到了，我就可以看到第一次尝试以及当我最近收到此错误时，有两个被拒绝的重复项。

# c# - 在 ContinueWith 中观察任务异常

> ID：11743756
> 
> 赞同：11
> 
> 时间：2012-07-31T15:34:33.507
> 
> 标签：c#, .net, multithreading, parallel-processing, task-parallel-library

有多种方法可以观察任务中引发的异常。其中之一在带有 OnlyOnFaulted 的 ContinueWith 中：

```
var task = Task.Factory.StartNew(() =>
{
    // Throws an exception 
    // (possibly from within another task spawned from within this task)
});

var failureTask = task.ContinueWith((t) =>
{
    // Flatten and loop (since there could have been multiple tasks)
    foreach (var ex in t.Exception.Flatten().InnerExceptions)
        Console.WriteLine(ex.Message);
}, TaskContinuationOptions.OnlyOnFaulted); 
```

我的问题：异常会在 failureTask 开始后自动观察到，还是仅在我“触摸” ex.Message 后才会观察到？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T15:52:50.007

一旦您访问该属性，它们就会被视为*观察到的。*`Exception`

另请参阅`AggregateException.Handle`。您可以`t.Exception.Handle`改用：

```
t.Exception.Handle(exception =>
            {
            Console.WriteLine(exception);
            return true;
            }
    ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-04T14:47:56.263

样本

```
Task.Factory.StartNew(testMethod).ContinueWith(p =>
            {
                if (p.Exception != null)
                    p.Exception.Handle(x =>
                        {
                            Console.WriteLine(x.Message);
                            return false;
                        });
            }); 
```

# sql - SQL SERVER：如何自动填写表的列，而不必键入它们？

> ID：11743758
> 
> 赞同：2
> 
> 时间：2012-07-31T15:34:34.997
> 
> 标签：sql, sql-server, select

我有一个包含很多列的表，我想在其中一个列上执行 ISNULL。目前我的选择声明只是`SELECT *`。是否有一种快捷方式/方法可以让列在我的表的选择中以逗号分隔的列表中写出，这样我就不必全部输入它们？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T15:35:58.853

在 Management Studio 对象资源管理器中展开该表。

选择“列”节点并将其拖到查询窗口中。它将生成表中所有列的逗号分隔列表。

![在此处输入图像描述](../Images/2febb61d502a71b312fb497fd37bb080.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:40:41.733

在管理工作室中右键单击表-> 将表编写为-> 选择到-> 剪贴板-> 粘贴到您的查询窗口中。

或使用 Red Gates SQL Prompt 之类的插件工具，它可以让您在 * 之后键入“ctrl + space”来填充所有列

# c# - 向我的应用程序添加服务层

> ID：11743760
> 
> 赞同：2
> 
> 时间：2012-07-31T15:34:43.860
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework

目前，我有一个控制器方法，其中包括一个 try/catch 语句，用于发送循环通过数据库列表的电子邮件：

```
try
            {
                // MailSender object declaration
                MailSender objMail = new MailSender();

                // Set SMTP server address
                objMail.Host = "smtp.test.com";

                // Sender's address
                objMail.From = "test@test.com";

                // Subject
                objMail.Subject = surveyprogrammodel.Subject;

                // HTML format?
                objMail.IsHTML = true;

                //Send to Mail Queue
                objMail.Queue = true;
                objMail.QueuePath = Server.MapPath("~\\MailQueue\\");

                     foreach (var item in EmailList)
                        {

                            //  Create dynamic link to the take the Survey
                            var SurveyLink = strUrl + UrlContent + "SurveyResponse/Create?MemberId=" + item.PersonModels.MemberId + "&ProgramId=" + item.ProgramId;

                            // Recipient's address
                            objMail.AddAddress(item.PersonModels.Email);

                            // Body
                            objMail.Body = surveyprogrammodel.Body + "<br /><br />Please take the survey using the link below:<br /><br /><a href=\"" + SurveyLink + "\">" + SurveyLink + "<a/>";

                            // Send message
                            objMail.Send();

                            objMail.ResetAddresses();
                        }
                    }

                    catch (Exception ex)
                    {
                        Response.Write("An error occurred: <font color=red>"+ ex.Message + "</font>");
                    } 
```

我想知道如何将这个语句分解为一种服务，以便我可以在需要时轻松交换邮件实现。有没有一个很好的例子可以解释实现这一目标的最佳方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:16:28.553

在最简单、最不复杂的示例中，您可以简单地创建一个界面。

```
interface IEmailer
{
    void Send(List<Email> email);
}

class SimpleMailer : IEmailer
{
    void Send(List<Email> email)
    {
        //do work
    }
}

class ComplexMailer : IEmailer
{
    void Send(List<Email> email)
    {
        //do work
    }
} 
```

用法

```
IEmailer mailer = new SimpleMailer(); 
```

实施变更

```
IEmailer mailer = new ComplexMailer(); 
```

然后，如果您想要查找样式的实现，您可以实现服务定位器模式/使用 DI 框架（StructureMap、Ninject 等）。MSDN 上有一个示例[here](http://msdn.microsoft.com/en-us/library/ff921142.aspx)。

# clojure - 不应该有一个 jit 减少对 invokeDynamic 的需求吗？

> ID：11743761
> 
> 赞同：3
> 
> 时间：2012-07-31T15:34:46.307
> 
> 标签：clojure, jvm, jruby, invokedynamic

在对invokeDynamic做了很多阅读之后，我仍然有点困惑。一个重复的主题似乎是Clojure实际上并不需要它，或者至少比JVM上的其他动态语言实现更少需要它（Jruby，JPython，Groovy等.).我不了解所有细节，但似乎有类型注释是主要原因，它简单地消除了动态调度问题。

1-将调用动态描述为有效实现复杂方法调度场景的方式是否安全？（还有更多吗？）

2-不应该有一个 jit 消除对调用动态的需要吗？问题似乎是由于缺少运行时类型信息而引起的，jit*应该*有这些信息。

3-JRuby好像有个jit，用invokdynamic，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T00:48:22.933

主要原因是 Clojure 不需要“invokedynamic”，因为它实际上并没有做那么多的动态调度。尤其是：

*   只要 Clojure 有足够的类型信息（例如调用带有类型提示的 Java 类），它就会直接进行方法分派
*   使用接口方法调度（通过 IFn）调用所有函数
*   编译器在许多情况下进行智能内联（例如原始函数），避免任何类型的调度
*   通过接口方法调度调用协议函数

这涵盖了绝大多数调度案例。

当然，在一些调度案例中，invokedynamic 可能被证明是有用的（例如多方法），并且它可能用于优化 Clojure 的其他部分（例如 var 查找），因此 Clojure 将能够获得一些好处。

# javascript - 使文本框在单击时保持值。

> ID：11743767
> 
> 赞同：0
> 
> 时间：2012-07-31T15:35:04.560
> 
> 标签：javascript, jquery, html, text, input

我正在尝试制作可编辑的文本。我所拥有的是您单击的一行文本，我需要出现一个文本框，允许用户更改文本的值。使用我拥有的代码，当您单击时，文本会消失。有任何想法吗？html

```
 <div class="test">Click here</div> 
```

jQuery

```
 $(".test").click(function() {
           var inputValue = $(".test").text();  
           $(".test").html("<input value='"+inputValue+"' 
               type='text' id='box1'>");
           $("#box1").val(inputValue).select();
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:38:31.553

如果您将使用现有的解决方案，也许会更简单。例如：[可编辑](http://www.appelsiini.net/projects/jeditable)

但如果你想（见[演示](http://jsfiddle.net/Rm8eC/)）：

```
$(document).ready(function () {
    var beginEdit = function () {
        var text = $(this).text();
        var input = $('<input value="' + text + '" type="text">').one('blur', endEdit);

        $(this).empty().append(input);
    };

    var endEdit = function () {
        var text = $(this).val();
        $(this).parent().html(text).one('click', beginEdit);
    };

    $(".text").one('click', beginEdit);
});​ 
```

作为 jQuery 的插件（参见[DEMO2](http://jsfiddle.net/Rm8eC/1/)）：

```
$.fn.editable = function () {
    this.each(function () {    
        var beginEdit = function () {
            var text = $(this).text();
            var input = $('<input value="' + text + '" type="text">').one('blur', endEdit);

            $(this).empty().append(input);
        };

        var endEdit = function () {
            var text = $(this).val();
            $(this).parent().html(text).one('click', beginEdit);
        };

        $(this).one('click', beginEdit);        
    });
};

$(document).ready(function () {
    $(".text").editable();
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:46:37.727

This [jsFiddle](http://jsfiddle.net/KZWZY/) has an example. When you click a paragraph, the jQuery event handler replaces the HTML in the paragraph with a text box containing the text of the paragraph.

When you click the newly-created text box, the text in it disappears. This is because the event handler fires again when you click the text box: the HTML of the paragraph (the text box) is replaced with a text box containing the text of the paragraph. There's no text, so now you get a new empty text box.

There's a few ways you could stop this happening. When you create the text box, you could change the class of the paragraph, meaning your event handling code would no longer fire. Or, you could have another handler for the click event of the text boxes, and in here call the [stopPropagation](http://api.jquery.com/event.stopPropagation/) function.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:44:47.733

拿走线`$("#box1").val(inputValue).select();`。您已经在`html()`方法中设置了值。此外，在调试器中检查 inputValue 是否有值。

格雷厄姆指出的是，当你点击它时，它会变成

```
<div class="test"><input value="Click here" type="text" id="box1"></div> 
```

单击事件仍在外部 div 上，因此当您再次单击它时，它会清除文本框。

# facebook - 如何获取facebook个人资料大方形图片？

> ID：11743768
> 
> 赞同：21
> 
> 时间：2012-07-31T15:35:06.490
> 
> 标签：facebook, facebook-graph-api

Facebook 个人资料图片是公开的。
例如[https://graph.facebook.com/oleg.dats/picture](https://graph.facebook.com/oleg.dats/picture)它是方形的，但要小
要获得更大的图片[https://graph.facebook.com/oleg.dats/picture?type=large](https://graph.facebook.com/oleg.dats/picture?type=large)但是这个不是正方形。
有没有办法获得方形头像（200px/200px）？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-31T15:50:49.743

您将需要自己发布处理。尺寸是

*   正方形 (50x50)
*   小（50 像素宽，可变高度）
*   正常（100 像素宽，可变高度），和
*   大（大约 200 像素宽，可变高度）

自 2012 年 8 月 22 日星期三宣布，

`width`您可以通过 Graph API 使用和查询备用尺寸`height`，例如

```
 https://graph.facebook.com/1207059/picture?width=121&height=100 
```

所以在你的情况下

```
https://graph.facebook.com/oleg.dats/picture?width=200&height=200 
```

或者在 FQL 中

`SELECT url, real_width, real_height FROM profile_pic WHERE id=100000896260238 AND width=200 AND height=200`

[[来源 - [http://developers.facebook.com/blog/post/2012/08/22/platform-updates--operation-developer-love/](http://developers.facebook.com/blog/post/2012/08/22/platform-updates--operation-developer-love/) ]]

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-15T17:05:17.887

您可以使用它来获取任何大小的个人资料图片：

[https://graph.facebook.com/digitizor/picture?width=700&height=200](https://graph.facebook.com/digitizor/picture?width=700&height=200)

这显示了 700 像素 x 200 像素的 facebook.com/digitizor 的个人资料图片

根据您的要求更改尺寸和 Facebook 个人资料名称

[http://digitizor.com/2012/09/15/graphi-api-profile-picture/](http://digitizor.com/2012/09/15/graphi-api-profile-picture/)

# html - 一种列出指向站点上特定文件夹的任何链接的方法

> ID：11743769
> 
> 赞同：1
> 
> 时间：2012-07-31T15:35:10.980
> 
> 标签：html, hyperlink

我想知道是否有软件、网站或流程可以让我搜索网站（以类似于链接检查器的方式），而不是标记损坏的链接，它会列出指向指定链接的任何链接文件夹。（即浏览 www.example.com 上的所有页面，并列出所有具有以 www.example.com/blah/ 开头的链接的页面）

# java - 当我知道缺陷并想要搜索是否有与之关联的 UserStory 时使用的查询

> ID：11743770
> 
> 赞同：1
> 
> 时间：2012-07-31T15:35:10.937
> 
> 标签：java, rally

我正在用 Java 编写代码，并且已经从 Rally 中检索了一个包含缺陷项的 JsonArray。现在我希望能够只获得那些与我相关联的缺陷之一的用户故事。我一直无法提出一个好的查询来执行此操作，目前我正在获取所有用户故事，然后查看他们的缺陷字段以查看我的缺陷之一是否是成员。

任何人都可以提出一个可以让我直接获得与缺陷相关的故事的查询吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:06:30.280

您最好的选择是指定一个提取，该提取将从故事中提取您需要的字段并将它们附加到缺陷。

```
fetch=Requirement,Name,Iteration,ScheduleState 
```

这将使故事（需求）和缺陷中的所有这些领域都水合起来。

```
{
    Defect: {
        _ref: "https://rally1.rallydev.com/slm/webservice/x/defect/5678.js",
        Name: "Sad Pandas",
        Iteration: null,
        Requirement: {
            _ref: "https://rally1.rallydev.com/slm/webservice/x/hierarchicalrequirement/1234.js",
            _refObjectName: "Pandas",
            Name: "Pandas",
            Iteration: null,
            ScheduleState: "In-Progress",
            Blocked: false,
            _type: "HierarchicalRequirement"
        },
        ScheduleState: "Idea",
        Blocked: false,
        Errors: [ ],
        Warnings: [ ]
    }
} 
```

# python - 如何从python中的列表列表中获取元组的数量

> ID：11743771
> 
> 赞同：0
> 
> 时间：2012-07-31T15:35:10.223
> 
> 标签：python, list

> **可能重复：**
> [如何将字符串的元素放入具有某种行为的列表中](https://stackoverflow.com/questions/11726305/how-can-i-put-an-element-of-a-string-in-a-list-with-a-certain-behaviour)

假设我有两个列表：

```
list1 = [[(1, 1), (1, 2), (1, 3), (1, 4)]]

list2 = ['A'] 
```

现在我需要类似的东西

```
dic1 = {'A': len(list1)} 
```

现在`len(list1)`应该是`4`因为我需要计算元组的数量，在这种情况下是 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:38:45.127

`dic1 = {'A': len(list1[0])}`

现在你得到的长度是`list1`, 但`list1`它是一个包含另一个列表的列表。使用它，您正在访问列表中的元组列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:46:18.883

Adding some wild guessing on what you are actually trying to do:

```
>>> list1 = [[(1, 1), (1, 2), (1, 3), (1, 4)], [(2, 1), (2, 2)]]
>>> list2 = ['A', 'B']
>>> dic1 = {key: len(tuples) for (key, tuples) in zip(list2, list1)}
>>> dic1
{'A': 4, 'B': 2} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:46:54.300

The problem is that `list1` only has one item - another list. What you're trying to get is the length of the list in `list1`.

So use `len(list1[0])` instead of `len(list1)` and you should be good.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T15:41:40.203

```
dic1 = {list2[0]: len(list1[0])} 
```

# mysql - 删除在第 n 列中也具有相同值的重复行

> ID：11743773
> 
> 赞同：1
> 
> 时间：2012-07-31T15:35:19.097
> 
> 标签：mysql, database

我有一个mysql表。标题的结构如下：

**字段字段字段字段供应商**
数据数据数据数据数据数据数据数据数据数据数据数据数据数据数据数据数据数据数据数据数据数据数据数据数据数据数据
数据数据数据数据
数据
数据
数据数据2

现在，我想删除共享相同供应商值的重复行。因此，不应将相同但具有不同供应商列值的两行视为重复。但是，相等且共享相同供应商值的两行或多行将被视为重复，应将其删除，只留下一个现有副本。

使用mysql如何做到这一点？

我做了这样的事情，但它删除了所有内容，而不仅仅是重复的值。我希望至少还剩一份。

```
DELETE 
```

从汽车到哪里（（auto.email='carolzvalentine@yahoo.com'）和（auto.vendors='5552'））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:45:19.123

您可以使用以下`UNIQUE`方法在表的列上添加索引`ALTER IGNORE`：

```
ALTER IGNORE TABLE mytbl ADD UNIQUE INDEX (field1, field2, field3, field4, vendors) 
```

如[手册中所述](http://dev.mysql.com/doc/en/alter-table.html)：

> `IGNORE`是标准 SQL 的 MySQL 扩展。`ALTER TABLE`如果新表中的唯一键有重复项，或者在启用严格模式时出现警告，它会控制如何工作。如果`IGNORE`未指定，则在发生重复键错误时中止并回滚副本。如果`IGNORE`指定，则仅第一行用于在唯一键上具有重复项的行。其他冲突的行被删除。不正确的值将被截断为最接近的匹配可接受值。

这也将防止将来添加重复项（如果您想允许这样，您可以`DROP`在创建索引后创建索引）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:37:07.627

```
"DELETE x
 FROM $table x
 LEFT
 JOIN
 ( SELECT vendors
        , email
        , MIN(lead_id) min_lead_id
     FROM $table
    GROUP
       BY vendors
        , email
 ) y
ON y.vendors = x.vendors
AND y.email = x.email
AND y.min_lead_id = x.lead_id
WHERE x.vendors = $vendor
AND y.min_lead_id IS NULL;"; 
```

这会做到的。只需将该代码中的 php 变量替换为正确的值即可。

> $vendor = 供应商列的
> 名称 $table = 表的名称

这段代码的唯一问题是它不是完全最优的。凭借 25,000 条记录集并在虚拟专用服务器中运行，它平均只需 2 分钟即可完成任务。

干杯

# sql - 在sas中合并sql的类似语句

> ID：11743778
> 
> 赞同：1
> 
> 时间：2012-07-31T15:35:27.997
> 
> 标签：sql, merge, sas

大家好，我需要在 Sas 中合并两个表

但有一个条件，如 sql 合并语句：

```
MERGE INTO TABLE_NAME USING table_reference ON (condition)
WHEN MATCHED THEN
UPDATE SET column1 = value1 [, column2 = value2 ...]
WHEN NOT MATCHED THEN
INSERT (column1 [, column2 ...]) VALUES (value1 [, value2 ... 
```

有类似的东西吗？

如果没有你能告诉我我怎样才能使这种附加条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:05:01.210

您可以使用 MODIFY 插入新行以及替换现有数据。代码看起来像这样（如果不知道您匹配的是什么以及您可能拥有的任何其他条件，我无法更具体）。只是一个警告，如果您的两个数据集都很大，那么以这种方式使用 MODIFY 是非常低效的，因为针对事务数据集中的每一行的主数据集执行单独的查找。在@Rob 的解决方案中使用索引将提高这种情况下的性能。正如@Rob 所说，替代方案是使用 UPDATE（类似于此处的 MODIFY）或仅使用标准 MERGE，这两者都替换现有数据集而不是就地修改。最后一个选择是使用 PROC SQL，您可以在其中使用与当前代码类似的东西。

```
data master;
modify master (in=a) transaction (in=b);
by id;
if not a and <condition> then do;
    _error_=0;
    output;
    end;
else if a and b and <condition> then replace;
run; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:00:32.097

我不知道有任何直接的方法可以做到这一点。当我过去完成它时，我首先附加新行（使用），然后对现有行`proc append`进行第二步。对于修改步骤，如果要就地重建表，则需要在单个数据`modify`步骤中使用数据步骤与 a`set`和语句的组合。`modify`这样做的好处是它的 I/O 少得多（如果它是一个大表并且只有一小部分要更新）并且它保留了现有的索引。缺点是它要复杂得多。代码看起来像这样：

```
 **
  ** REPLACE VALUES IN CPANEL.PW_STAT WITHOUT REBUILDING THE ENTIRE TABLE.
  *;
  data cpanel.pw_stat;

    set redirect_updates;
    modify cpanel.pw_stat key=primary;

    select(_iorc_);  
      when(%sysrc(_sok)) do;
        * MATCHED TRANSACTION DATASET TO MASTER DATASET. REPLACE THE VALUE;
        if date_redirected ne tmp_date_redirected then do;
          date_redirected = tmp_date_redirected;
          replace;
        end;
      end;
      when(%sysrc(_dsenom)) do;
        * NO MATCH. DO NOT ADD OBS OR REPLACE OBS OR DELETE OBS.  RESET ERR AND DO NOTHING.;
        _error_ = 0;
      end;
      otherwise do;
        put 'ERROR: Unexpected value for _IORC_= ' _iorc_;
        put 'Program terminating. DATA step iteration # ' _n_;
        put _all_;
        stop;
      end;
    end;
  run; 
```

我应该补充一点，如果性能不是问题，那么从头开始重新创建一个表会更好。

# ruby-on-rails - 在 Rails 迁移中将 postgres 日期时间列设置为 nil

> ID：11743781
> 
> 赞同：1
> 
> 时间：2012-07-31T15:35:34.790
> 
> 标签：ruby-on-rails, postgresql, rails-migrations

我正在编写一个`premium_from`在 postgres 表中填充 datetime 列的 rails 迁移。

我对人口没有任何问题，但是我一直在为迁移编写回滚方法，因为当我尝试将 datetime 属性更改回`nil`. 我也无法得到任何有用的错误消息，所以我完全不确定发生了什么。

这是我最近的迭代（出于绝望，我尝试单独处理帐户，因为似乎也没有其他方法）：

```
def self.down
  Account.where('premium_from is not null').each do |a| 
    a.update_attribute(:premium_from, 'null')
  end
end 
```

这愉快地运行了大约 7 秒钟，然后让我所有填充的`premium_from`条目仍然完好无损，我也无法在谷歌中找到任何有用的东西。

**有人知道如何`nil`在 postgres 中设置日期时间列条目吗？**

还是我只是忽略了一些明显的东西？

编辑：向上看起来像这样

```
csv.each do |row|
  if account = Account.premium.find_by_name(row.first)
    # This .find is necessary because .premium uses a join, meaning that it returns
    # read-only objects
    Account.find(account.id).update_attribute(:premium_from, Time.parse(row.last))
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:47:26.397

首先，我会避免在迁移中引用`Account`类，除非您`Account`在迁移本身中定义了一个类。这始终是明智的做法，因为您可能会重构`Account`该类并在将来将其命名为不同的名称，这样迁移就不会运行。`class Account < ActiveRecord::Base; end`应该做的事情。

在这种情况下，我建议只使用 SQL。它很简单，并且性能会更好。无需将所有这些记录带入并构建 AR 对象，只需发布​​更新即可。这是我的做法：

```
execute "UPDATE accounts SET premium_from = NULL where premium_from IS NOT NULL;" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:37:54.313

你试过了吗 ：

```
a.update_attribute(:premium_from, nil) 
```

您的列是否允许在 postgres 中使用空值？

# objective-c - iOS 5 - 从异步调用的方法中捕获返回值

> ID：11743792
> 
> 赞同：2
> 
> 时间：2012-07-31T15:36:04.210
> 
> 标签：objective-c, ios5, grand-central-dispatch

我有一个方法 fetchFromWeb，它返回一个对象。我想从 GCD 异步调用这个方法。有人可以解释我如何从异步调用的方法中捕获返回值吗？

**或者**，我应该设置对象值，然后设置某种通知，而不是显式地从此方法获取返回值吗？

这是我所拥有的，谢谢！

```
 dispatch_async(kBGQueue, ^{

            NSData *data = [NSData dataWithContentsOfURL:kURL];
            [self performSelectorOnMainThread:@selector(fetchFromWeb:) 
                                   withObject:data 
                                waitUntilDone:YES];

            //Need to get the return value from method fetchFromWeb in selector....

        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T16:22:40.613

dataWithContentsOfURL 仅适用于文件 URL，不适用于 Web URL。它不是异步的。即使您使用 GCD 将其发送到自己的线程，也不是正确的方法。

如果你需要出去上网，你需要使用 NSURLConnection。

使用 + (void)sendAsynchronousRequest:(NSURLRequest *)request queue:(NSOperationQueue *)queue completionHandler:(void (^)(NSURLResponse* , NSData*, NSError*))handler

最初您走在正确的轨道上-您不​​希望该方法返回值。让完成处理程序块使用您收到的数据设置一个属性（ivar），并按照您的建议，在块的末尾使用通知来提醒您它已完成。该通知可以触发访问属性的方法，您可以获取数据对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T16:00:51.403

不要使用`performSelectorOnMainThread:withObject:waitUntilDone:`，因为您无法从中获得回报。与主调度队列一起使用`dispatch_sync`，其效果与`performSelectorOnMainThread:withObject:waitUntilDone:YES`.

```
dispatch_async(kBGQueue, ^{

    NSData *data = [NSData dataWithContentsOfURL:kURL];

    __block id result = nil; // Use the correct type here.
    dispatch_sync(dispatch_get_main_queue(), ^{

        result = [self fetchFromWeb:data];
    });

    // Do something with result here.
}); 
```

* * *

*编辑*：我应该补充一点，正如 Jason Howlin 所指出的，你不应该`dataWithContentsOfURL:`在运输应用程序中使用。用作快速`n`--dirty 调试工具是可以的，但`NSURLConnection`它是正确的方法。从 iOS 5.0`+sendAsynchronousRequest:queue:completionHandler:`开始，使用起来并没有那么难。

# java - 在java servlet的init中唯一标识服务器的好方法是什么

> ID：11743794
> 
> 赞同：1
> 
> 时间：2012-07-31T15:36:05.023
> 
> 标签：java, jsp, servlets, websphere

我有一个 Java Web 应用程序，它在许多服务器上运行。此应用程序中的一些 servlet 在启动时加载以预加载一些数据。加载此数据的协议将根据应用程序部署在哪个服务器上而改变。（要加载的文件的路径会发生变化，而且安全性也存在差异，因此获取一些文件比其他文件更复杂）。有没有一种方法可以在 java servlet 的 init 函数中唯一标识我的应用程序所在的服务器/机器？我原本是一起工作的`HttpServletRequest.getServerName(),`这已经足够了，但它在 init 中不可用。我知道延迟初始化，所以不要告诉我这样做，如果可能的话，我会尽量避免这种情况，因为这些文件的加载时间很长。如果我能找到完美的机器名称，但我不知道如何从 api 中得到它。我所需要的只是一种从初始化中唯一识别机器的方法。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:15:05.843

与其让我的应用程序依赖于一组（硬编码的）IP，不如使用绑定到 JNDI 的简单字符串属性来识别每个服务器。

硬编码 IP/主机名通常不是一个好主意。部署应用程序后，可能会立即更改基础架构 :)

另一方面，JNDI 是获取应用服务器资源的标准方式。将资源（字符串属性）绑定到 JNDI 可以在 WAS 管理控制台中完成，并且从 JNDI 获取属性值很容易。IBM 甚至[发布了一个关于此的教程](http://www.ibm.com/developerworks/websphere/library/techarticles/0611_totapally/0611_totapally.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:40:21.187

也许一种方法是使用以下命令检查主机的名称：

```
java.util.InetAddress.getLocalHost().getHostName() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:48:09.930

我曾经有过类似的要求，我们使用了系统属性。基本上，您使用 -D 参数在服务器的启动命令中定义属性：

```
-DserverId=serverA 
```

然后在您的 servlet 中，您可以使用以下命令访问它：

```
System.getProperty("serverId") 
```

您只需给每个服务器启动一个不同的 id。

希望这可以帮助。

# javascript - 需要帮助将文本保持在 3 行，无论长度如何

> ID：11743795
> 
> 赞同：1
> 
> 时间：2012-07-31T15:36:08.907
> 
> 标签：javascript, jquery, line-breaks, lines

我需要找到一种使用 jQuery 将文本保留在 3 行的方法，而不管其长度如何。（或者我猜是javascript）

所以这段文字：

```
First Project Name Combined with First Location 
```

插入了中断使其看起来像这样：

```
First Project Name
Combined with
First Location 
```

虽然这段文字：

```
Second Project Name Combined with Second Location And Text To Make This Text Area Even More Incredibly Extra Long 
```

插入了中断使其看起来像这样：

```
Third Project Name Combined with Third
Location And Text To Make This Text Area
Even More Incredibly Extra Extra Long 
```

我假设代码将涉及计算字符或空格的数量，除以 3，然后在相对于分割长度的这么多空格之后插入中断。虽然不太确定如何用代码编写它。

我用我正在使用的实际代码设置了[一个 jsFiddle 。](http://jsfiddle.net/Honsou/C3ehM/)代码需要与第一段代码一起工作。（这已经被一个很棒的stackoverflow用户慷慨地解决了）

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:48:04.953

```
var text = 'Text to split in lines',
    lines = [],
    chunks, i;

text = text.split(' ');
chunks = Math.ceil(text.length / 3);

for ( i = 0; i < 3; i++) {
    lines.push( text.slice(i * chunks , chunks * i + chunks ).join(' ') );
} 
```

这是小提琴：http: [//jsfiddle.net/sCRvm/](http://jsfiddle.net/sCRvm/)

* * *

在这里，您可以[使用插件格式](http://jsfiddle.net/BguKx/)：

```
(function($) {
    $.fn.splitToLines = function(numberOfLines) {
        return this.each(function() {

            var $this = $(this),
                lines = [],
                text, chunks, i;

            text = $this.text().split(' ');

            chunks = Math.ceil(text.length / numberOfLines);

            for ( i = 0; i < numberOfLines; i++) {
                lines.push( text.slice(i * chunks , chunks * i + chunks ).join(' ') );
            }

            $this.html( lines.join('<br />') );

        });
    };
}(jQuery)); 
```

包含此脚本后，您可以像这样调用它：

```
$('div').splitToLines(3); 
```

这是小提琴：http: [//jsfiddle.net/BguKx/1/](http://jsfiddle.net/BguKx/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:46:23.277

Note: it's possible that there is a better approach to this than the one you've suggested; if there is, I don't know it, but I'm posting this as a way to achieve your suggested approach, not necessarily as the best way to solve the problem.

Assumes that the string is stored in `str`.

```
var len = str.length; // total length of the string
var breakpoint = len/3; // caching a third of it
var bp1 = -1; // location of the first <br>
var bp2 = -1; // location of the second <br>
for ( var i = 0; i < len; ++i ) // going through the entire string
{
    if ( str[i] == ' ' ) // might be a good idea to check for any whitespace character
    {
        if ( bp1 < 0 || Math.abs(breakpoint - i) < Math.abs(breakpoint - bp1) )
        { // either the first time through, or a better location for the first <br> than the previous best
            bp1 = i;
        }
        else if ( bp2 < 0 || Math.abs((bp1+breakpoint) - i) < Math.abs((bp1+breakpoint) - bp2) )
        { // either the first time after getting the first <br>, or a better location for the second <br>
            bp2 = i;
        }
    }
}
if ( bp1 > 0 && bp2 > 0 ) // found places
{
    str = str.substring(0, bp1) + '<br>' + str.substring(bp1+1, bp2) + '<br>' + str.substring(bp2+1);
}
else
{
    // didn't work; put some error checking code here?
} 
```

# internationalization - Play Framework - 不同语言的 TemplateLoader

> ID：11743796
> 
> 赞同：1
> 
> 时间：2012-07-31T15:36:11.833
> 
> 标签：internationalization, playframework, playframework-1.x

我正在使用播放 1.2.4。我的应用程序以多种语言运行。我需要管理员用户向客户发送电子邮件。但是，管理员用户的语言设置是固定的，我需要以他们的首选语言向客户发送电子邮件。我正在渲染电子邮件模板，`TemplateLoader`但找不到使用其他语言选项渲染模板的方法？

有没有办法用不同的语言选项呈现模板？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:12:35.570

`Lang.set("language_code");`应该给你你需要的。

在普通模板中，您可以通过使用覆盖当前浏览器定义的语言包

```
 Lang.change("fr"); 
```

或者

```
 Lang.set("fr"); 
```

你可以在[这里](http://www.playframework.org/documentation/1.1/i18n)阅读。

[查看源代码](https://github.com/playframework/play/blob/master/framework/src/play/i18n/Lang.java)，`change`将修改用户的 cookie，这对您的用例没有好处，但`set`会更改当前线程的语言包，因此这应该可以满足您的需求。

# google-maps-api-3 - Google Maps v3 上的可点击行车路线

> ID：11743799
> 
> 赞同：1
> 
> 时间：2012-07-31T15:36:34.883
> 
> 标签：google-maps-api-3, driving-directions

我正在制作一个谷歌地图项目，需要创建一条点击它的路线。

我的项目有 2 个点具有预定义的 lat 和 lng，我想自己绘制点 A 和 B 的起点和终点，并且不要失去它的功能。

我制作了另一个项目，您可以单击它来绘制路线，但它没有标记，也不是可拖动的，[这是我的带有完整代码的实际项目](http://www.inventoresdegaragem.com/dbteste/index.htm)，我将在此处发布一个仅包含我的方向的短代码。

我希望我第一次点击 A 点，第二次点击我的 B 点，并且他们可以拖动它们，就像链接的项目一样

```
function goma()
{   
    var mapDiv = document.getElementById('mappy');
    var mapOptions = {
    zoom: 12, 
    center: new google.maps.LatLng(-23.563594, -46.654239),
    mapTypeId : google.maps.MapTypeId.ROADMAP
    }
    pode ser ROADMAP, SATELLITE, HYBRID, TERRAIN
    map = new google.maps.Map( mapDiv, mapOptions ); 

    //Render route, etc.
    ren = new google.maps.DirectionsRenderer( {'draggable':true} );
    ren.setMap(map);
    ren.setPanel(document.getElementById("directionsPanel"));
    ser = new google.maps.DirectionsService();

    //Create the route
    ser.route({ 'origin': new google.maps.LatLng(-23.563594, -46.654129), 'destination':  new google.maps.LatLng(
-23.563672, -46.640396), 'travelMode': google.maps.DirectionsTravelMode.DRIVING},function(res,sts) {
        if(sts=='OK')ren.setDirections(res);    
    })      

} 
```

我在这里更新我的代码，我只完成了 wayA，即第一个航路点，第二个是预定义的 latLng，在您单击的位置，它会获取 latLng 并放入“原点”。

```
 google.maps.event.addListener(map, "click", function(event) {
            wayA = new google.maps.Marker({ 
              position: event.latLng,
              map: map                
            });
     });
    ren = new google.maps.DirectionsRenderer( {'draggable':true} );
    ren.setMap(map);
    ren.setPanel(document.getElementById("directionsPanel"));
    ser = new google.maps.DirectionsService();          
    ser.route({ 'origin': wayA, 'destination':  new google.maps.LatLng(
-23.563672, -46.640396), 'travelMode': google.maps.DirectionsTravelMode.DRIVING},function(res,sts) {
        if(sts=='OK')ren.setDirections(res);    
    }) 
```

[这是我的完整代码测试](http://www.inventoresdegaragem.com/dbteste/index.htm)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T19:02:32.540

概念：（听起来这就是你想要的）

1.  向地图添加点击事件监听器
2.  当用户单击地图时，添加一个可拖动的标记（我会为其添加一个单击侦听器，以便他们可以通过单击它来删除它）
3.  当用户第二次点击地图时，添加第二个可拖动标记
4.  添加第二个标记后，使用两个标记的位置调用路线服务。
5.  如果任一标记被拖动，请再次调用路线服务。

（如果这是您正在尝试并遇到问题，代码或实时链接会有所帮助）

你缺少#3和#4

[工作示例](http://www.geocodezip.com/inventoresdegaragem_com_dbteste_indexA.html)

**代码片段：**

```
var map, ren, ser;
var data = {};
var data2 = {};
var marker;
var infowindow;
var doMark = true;
var directionsDisplay;

var wayA;
var wayB;

//Função de Inicio

function goma() {

  var mapDiv = document.getElementById('mappy');

  var mapOptions = {
      zoom: 12,

      center: new google.maps.LatLng(-23.563594, -46.654239),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    //Cria o mapa do google, coloca as definições do mapa, como tipo de visualização, pode ser ROADMAP, SATELLITE, HYBRID, TERRAIN
  map = new google.maps.Map(mapDiv, mapOptions);

  var control = document.createElement('DIV');
  control.style.padding = '1px';
  control.style.border = '1px solid #000';
  control.style.backgroundColor = 'white';
  control.style.cursor = 'pointer';
  control.innerHTML = '<img src="https://web.archive.org/web/20151226013612if_/http://i47.tinypic.com/2dlp2fc.jpg" border="0" alt="Image and video hosting by TinyPic">';
  control.index = 1;

  map.controls[google.maps.ControlPosition.TOP_RIGHT].push(control);

  google.maps.event.addDomListener(control, 'click', function() {
    doMark = false;
    markNow();

  });

  google.maps.event.addListener(map, "click", function(event) {
    if (!wayA) {
      wayA = new google.maps.Marker({

        position: event.latLng,
        map: map

      });
    } else {
      wayB = new google.maps.Marker({

        position: event.latLng,
        map: map

      });

      //Renderiza a rota, o draggable é diz se o waypoint é arrastavel ou não
      ren = new google.maps.DirectionsRenderer({
        'draggable': true
      });
      ren.setMap(map);
      ren.setPanel(document.getElementById("directionsPanel"));
      ser = new google.maps.DirectionsService();

      //Cria a rota, o DirectionTravelMode pode ser: DRIVING, WALKING, BICYCLING ou TRANSIT
      ser.route({
        'origin': wayA.getPosition(),
        'destination': wayB.getPosition(),
        'travelMode': google.maps.DirectionsTravelMode.DRIVING
      }, function(res, sts) {
        if (sts == 'OK') ren.setDirections(res);
      })

    }
  });
}

var html = "<table>" +
  "<tr><td>Nome:</td> <td><input type='text' id='name'/> </td> </tr>" +
  "<tr><td>Endereco:</td> <td><input type='text' id='address'/></td> </tr>" +
  "<tr><td>Tipo:</td> <td><select id='type'>" +
  "<option value='oficina' SELECTED>oficina</option>" +
  "<option value='restaurante'>restaurante</option>" +
  "</select> </td></tr>" +
  "<tr><td></td><td><input type='button' value='Salvar' onclick='saveData()'/></td></tr>";
infowindow = new google.maps.InfoWindow({
  content: html
});

google.maps.event.addDomListener(window, 'load', goma);
```

```
html,
body {
  height: 100%;
  width: 100%;
}
```

```
<script src="https://maps.google.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="mappy" style="float:left;width:70%; height:100%"></div>
<div id="directionsPanel" style="float:right;width:30%;height 100%"></div>
<div>
  <label>Endereco</label>
</div>
```

# xcode - iOS & SQLite：如何将数据库条目存储为 NSString 变量

> ID：11743804
> 
> 赞同：1
> 
> 时间：2012-07-31T15:36:55.667
> 
> 标签：xcode, cocoa-touch, ios5, sqlite, xcode4.3

我对任何类型的编程都是全新的，并且在过去的一个月里已经设法学习了足够的 Obj-C 和 C 来编写一个功能正常的应用程序。但是，在我的应用程序完成之前，我只剩下一个问题。我的数据存储在我需要在我的应用程序中使用的 sqlite 数据库中。我需要能够从数据库中选择数据并将其存储为 NSString 变量，以便可以在我的应用程序的输出中使用它。

我搜索了许多教程，但发现其中大多数都是针对在应用程序中创建数据库并更改其内容的。我只需要调用信息并将其存储为变量。

任何指向相关教程的链接以及任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:01:41.323

假设您已将字符串作为 utf-8 数据存储在 sqlite db 中，您将从查询结果中提取它并制作一个像这样的 NSString：

```
#import <sqlite3.h>

// Open the db
sqlite3 *db;
int result = sqlite3_open("path/to/your/db", &db);

// Prepare your query
sqlite3_stmt *statement;
result = sqlite3_prepare_v2(db, "select * from table where...;", -1, &statement, NULL);

// Process each row of the response
while (SQLITE_ROW == ((result = sqlite3_step(statement))))
{
    NSString *string = @"";

    // Pull out a given column as a text result
    char *c = sqlite3_column_text(statement, yourStringColumnIndex);

    // Make an NSString out of it
    if (c)
        string = [NSString stringWithUTF8String:c];

    NSLog(@"%@", string);
}

// Release the prepared statement and close the db
sqlite3_finalize(statement);
sqlite3_close(db); 
```

显然，您应该检查错误结果并做出适当的响应。

# c++ - 禁用 __LINE__ 宏？

> ID：11743808
> 
> 赞同：2
> 
> 时间：2012-07-31T15:37:12.057
> 
> 标签：c++, macros

我想做一些异常处理。我打算使用`__LINE__`and`__FILE__`宏。

我有一些头文件 Vectors.hpp，我在其中为向量结构实现了一些类。在这个类中，我实现了`operator []`，并且每次将此运算符与越界索引一起使用时，我都想抛出一个异常。我在一些源代码 test.cpp 中测试这个类。然后我希望能够在 test.cpp 中看到发生这种情况的确切行。

但是我知道`__LINE__`每次包含一些标题时宏都会被禁用，所以我得到的是 Vectors.hpp 中处理异常的行，而不是 test.cpp 中的行。有没有一个很好的方法来解决这个问题？或者，如何实现自己的`__LINE__`宏？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T15:40:30.627

`__LINE__`宏永远不会被禁用。它在你写它的地方展开。有两种编写代码的方法（更准确地说，有两种生成令牌的方法）：

*   手动写
*   使用预处理器编写代码

如果你有它是`foo.cpp`这样的文件（只是示例性的，实际上这是非常糟糕的代码）

```
class Foo {
public:
    Frob operator[] (size_t) { throw __LINE__ }
}; 
```

then`__LINE__`总是 3 并且`__FILE__`总是`foo.cpp`。

那是因为宏在使用它们的地方被扩展。解决方案是找到一种方法将它们扩展到*您想要*的位置，唯一的方法是定义另一个宏：

```
#define safe_subscript(foo, index) \
      try {foo[index];} \
      catch(...) { std::cout << __LINE__ << '\n'; }

....
safe_subscript(foo, 256); 
```

但是正如您所看到的，这会导致非常丑陋的代码和变通方法。

真正的解决方案：只要在越界（）时抛出异常`throw std::out_of_range`，或者像[标准库](http://en.cppreference.com/w/cpp/container/vector/at)那样做：

```
T& operator[] (size_type i) { return store_[i]; }
T& at (size_type i) { if (i>size_) throw std::out_of_range("crap");
                      return store_[i]; }

T operator[] (size_type i) const { return store_[i]; }
T at (size_type i) const { if (i>size_) throw std::out_of_range("crap");
                           return store_[i]; } 
```

如果您的用户收到异常，他应该调试*他/她/它*发生编程错误的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:42:50.260

您可以将当前行作为异常的一部分传递。将您的例外定义为

```
struct MyException : public std::exception {
    MyException(const char* line) : errorLine(line);
    const char* errorLine;
}; 
```

并按如下方式使用它：

```
if (isError())
     throw MyException(__LINE__); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:43:55.833

很简单，您必须在捕获异常时添加该信息，通常我们会创建一个扩展 std::exception 的类，并使用一些附加属性来安装明确的错误消息，在其上包含`__LINE__`,`__FILE__`甚至`__FUNCTION__`

这一个也回答了这个问题： [获取有关c++异常在catch块内的位置的信息？](https://stackoverflow.com/questions/3026649/getting-information-about-where-c-exceptions-are-thrown-inside-of-catch-block)

# c# - 如何使用C#在excel中的多个单元格周围设置边框

> ID：11743809
> 
> 赞同：13
> 
> 时间：2012-07-31T15:37:13.200
> 
> 标签：c#, excel, border

我正在开发一个创建 excel 文件的项目。

我无法在多个单元格上放置边框来组织 excel 文件。

假设我想要一个从单元格 B5 到 B10 的边框。B5，B6，B7，...之间不应该有边界

目前，我有这个代码：

```
workSheet_range = worksheet.get_Range("B5", "B10");
workSheet_range.Borders.Color = System.Drawing.Color.Black.ToArgb(); 
```

它制作了边框，但是它在每个单元格周围放置了一个边框，而不是为所有单元格放置一个大边框。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-31T16:00:09.147

您需要单独设置这些

```
.Borders[Excel.XlBordersIndex.xlEdgeBottom] 
.Borders[Excel.XlBordersIndex.xlEdgeRight]
.Borders[Excel.XlBordersIndex.xlEdgeLeft]  
.Borders[Excel.XlBordersIndex.xlEdgeTop] 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-04-09T20:06:57.410

也许这可以帮助：

```
workSheet_range.BorderAround(Excel.XlLineStyle.xlContinuous, Excel.XlBorderWeight.xlThick); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-07T21:00:08.680

这是在每个单元格周围设置边框的代码：

```
xlWS.get_Range("C9", "N9").Cells.Borders.Weight = XL.XlBorderWeight.xlMedium; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-10T11:22:51.397

我在不影响性能的情况下这样做了。我正在使用一个简单的excel来格式化：

**之前**

[![在此处输入图像描述](../Images/9e7be63a5cd2a0b539b7e14e9d58903f.png)](https://i.stack.imgur.com/pZdk8.jpg)

我设法将范围作为`A1:C4`变量动态存储在**exRange**中，并使用下面的代码给出边框

```
((Range)excelSheet.get_Range(exRange)).Cells.Borders.LineStyle = XlLineStyle.xlContinuous; 
```

**后**

[![在此处输入图像描述](../Images/c985c745972bc60553064ccfd3fa501b.png)](https://i.stack.imgur.com/ItdCr.jpg)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-13T09:43:45.920

```
// ** - You Should do it in all Cells 

//BorderAround: Medium**

worksheet.get_Range("b5", "b5").Cells.BorderAround(Missing.Value, Excel.XlBorderWeight.xlMedium, Excel.XlColorIndex.xlColorIndexAutomatic, ColorTranslator.ToOle(Color.FromArgb(255, 192, 0)));

worksheet.get_Range("b6", "b6").Cells.BorderAround(Missing.Value, Excel.XlBorderWeight.xlMedium, Excel.XlColorIndex.xlColorIndexAutomatic, ColorTranslator.ToOle(Color.FromArgb(255, 192, 0)));

worksheet.get_Range("b10", "b10").Cells.BorderAround(Missing.Value, Excel.XlBorderWeight.xlMedium, Excel.XlColorIndex.xlColorIndexAutomatic, ColorTranslator.ToOle(Color.FromArgb(255, 192, 0))); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-02T17:47:46.853

此代码在 (row1,col1) 到 (row2,col2) 的区域周围设置了一个边框。单个单元格没有边框。变量颜色是一个整数颜色索引号。有关索引号及其相应颜色的列表，请参阅[http://www.databison.com/excel-color-palette-and-color-index-change-using-vba/ 。](http://www.databison.com/excel-color-palette-and-color-index-change-using-vba/)

```
 Range cell1 = worksheet.Cells[row1,col1];
    Range cell2 = worksheet.Cells[row2,col2];
    Range range = worksheet.get_Range(cell1,cell2);
    range.BorderAround(
        Type.Missing, XlBorderWeight.xlThick, (XlColorIndex)color, Type.Missing ); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-20T12:02:54.477

```
ws.UsedRange.BorderAround(
                        Xl.XlLineStyle.xlDash,
                        Xl.XlBorderWeight.xlThick,
                        Xl.XlColorIndex.xlColorIndexAutomatic,
                        ColorTranslator.ToOle(Color.Blue)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-14T17:55:13.363

这是我的解决方案，只需使用 UsedRange() 函数

```
Excel.Range tRange = oSheet.UsedRange;
            tRange.Borders.LineStyle = Excel.XlLineStyle.xlContinuous;
            tRange.Borders.Weight = Excel.XlBorderWeight.xlThin; 
```

# sql-server - 如何在 SQL Server 中获取上个月的第一天和最后一天（带时间戳）

> ID：11743810
> 
> 赞同：134
> 
> 时间：2012-07-31T15:37:13.497
> 
> 标签：sql-server, datetime

我找不到给出上个月第一天和最后一天时间戳的解决方案。

这是解决方案。

```
SELECT DATEADD(month, DATEDIFF(month, -1, getdate()) - 2, 0) as FirtDayPreviousMonthWithTimeStamp,
    DATEADD(ss, -1, DATEADD(month, DATEDIFF(month, 0, getdate()), 0)) as LastDayPreviousMonthWithTimeStamp 
```

如果`currentdate = '2012-7-31'`

结果：`2012-06-01 00:00:00.000 2012-06-30 23:59:59.000`

如果`currentdate = '2012-1-1'`

结果：`2011-12-01 00:00:00.000 2011-12-31 23:59:59.000`

* * *

## 回答 #1

> 赞同：260
> 
> 时间：2012-07-31T17:46:50.790

```
select DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE())-1, 0) --First day of previous month
select DATEADD(MONTH, DATEDIFF(MONTH, -1, GETDATE())-1, -1) --Last Day of previous month 
```

* * *

## 回答 #2

> 赞同：124
> 
> 时间：2013-07-31T10:53:30.683

本周的第一天。

```
select CONVERT(varchar,dateadd(week,datediff(week,0,getdate()),0),106) 
```

本周的最后一天。

```
select CONVERT(varchar,dateadd(week,datediff(week,0,getdate()),6),106) 
```

上周的第一天。

```
select CONVERT(varchar,DATEADD(week,datediff(week,7,getdate()),0),106) 
```

上周的最后一天。

```
select CONVERT(varchar,dateadd(week,datediff(week,7,getdate()),6),106) 
```

下周的第一天。

```
select CONVERT(varchar,dateadd(week,datediff(week,0,getdate()),7),106) 
```

下周的最后一天。

```
select CONVERT(varchar,dateadd(week,datediff(week,0,getdate()),13),106) 
```

当月的第一天。

```
select CONVERT(varchar,dateadd(d,-(day(getdate()-1)),getdate()),106) 
```

当前月份的最后一天。

```
select CONVERT(varchar,dateadd(d,-(day(dateadd(m,1,getdate()))),dateadd(m,1,getdate())),106) 
```

在此示例中，仅日期为 31 天。剩余天数不是。

上个月的第一天。

```
select CONVERT(varchar,dateadd(d,-(day(dateadd(m,-1,getdate()-2))),dateadd(m,-1,getdate()-1)),106) 
```

上个月的最后一天。

```
select CONVERT(varchar,dateadd(d,-(day(getdate())),getdate()),106) 
```

下个月的第一天。

```
select CONVERT(varchar,dateadd(d,-(day(dateadd(m,1,getdate()-1))),dateadd(m,1,getdate())),106) 
```

下个月的最后一天。

```
select CONVERT(varchar,dateadd(d,-(day(dateadd(m,2,getdate()))),DATEADD(m,2,getdate())),106) 
```

本年度的第一天。

```
select CONVERT(varchar,dateadd(year,datediff(year,0,getdate()),0),106) 
```

本年度的最后一天。

```
select CONVERT(varchar,dateadd(ms,-2,dateadd(year,0,dateadd(year,datediff(year,0,getdate())+1,0))),106) 
```

去年的第一天。

```
select CONVERT(varchar,dateadd(year,datediff(year,0,getdate())-1,0),106) 
```

去年的最后一天。

```
select CONVERT(varchar,dateadd(ms,-2,dateadd(year,0,dateadd(year,datediff(year,0,getdate()),0))),106) 
```

明年的第一天。

```
select CONVERT(varchar,dateadd(YEAR,DATEDIFF(year,0,getdate())+1,0),106) 
```

明年的最后一天。

```
select CONVERT(varchar,dateadd(ms,-2,dateadd(year,0,dateadd(year,datediff(year,0,getdate())+2,0))),106) 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-12-25T09:44:21.337

```
SELECT CONVERT(DATE,DATEADD(MM, DATEDIFF(MM, 0, GETDATE())-1, 0)) AS FirstDayOfPrevMonth
SELECT CONVERT(DATE,DATEADD(MS, -3, DATEADD(MM, DATEDIFF(MM, 0, GETDATE()) , 0))) AS LastDayOfPrevMonth 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2016-09-12T10:01:37.097

**解决方案**

> 您请求的日期格式称为**ODBC**格式（代码**120**）。

要实际计算您请求的值，请在 SQL 中包含以下内容。

> 复制粘贴...

```
DECLARE
    @FirstDayOfLastMonth DATETIME = CONVERT(DATE, DATEADD(d, -( DAY(DATEADD(m, -1, GETDATE() - 2)) ), DATEADD(m, -1, GETDATE() - 1)))
    , @LastDayOfLastMonth DATETIME = CONVERT(DATE, DATEADD(d, -( DAY(GETDATE()) ), GETDATE())) 
```

> ...并在您的代码中使用：
> 
> *   **@FirstDayOfLastMonth**
> *   **@LastDayOfLastMonth**

请注意，它必须在引用参数的任何语句之前粘贴，但从那时起，您可以在代码中引用**@FirstDayOfLastMonth**和**@LastDayOfLastMonth**。

**例子**

让我们看看一些实际的代码：

```
DECLARE
    @FirstDayOfLastMonth DATETIME = CONVERT(DATE, DATEADD(d, -( DAY(DATEADD(m, -1, GETDATE() - 2)) ), DATEADD(m, -1, GETDATE() - 1)))
    , @LastDayOfLastMonth DATETIME = CONVERT(DATE, DATEADD(d, -( DAY(GETDATE()) ), GETDATE()))

SELECT
    'First day of last month' AS Title, CONVERT(VARCHAR, @FirstDayOfLastMonth , 120) AS [ODBC]
UNION 

SELECT 
    'Last day of last month' AS Title, CONVERT(VARCHAR, @LastDayOfLastMonth , 120) AS [ODBC] 
```

*运行上面的代码以产生以下输出：*

[![图一](../Images/cc5b40e0fc57a45765039f3f3e22df2e.png)](https://i.stack.imgur.com/Buinj.png)

***注意：*** *请记住，我今天的日期是**2016 年 9 月 12 日**。*

> **更多（为了完整起见）**

**常用日期参数**

你还想要更多吗？

要设置更全面的方便日期相关参数，请在 SQL 中包含以下内容：

```
DECLARE
    @FirstDayOfCurrentWeek DATETIME = CONVERT(DATE, DATEADD(WEEK, DATEDIFF(WEEK, 0, GETDATE()), 0))
    , @LastDayOfCurrentWeek DATETIME = CONVERT(DATE, DATEADD(WEEK, DATEDIFF(WEEK, 0, GETDATE()), 6))
    , @FirstDayOfLastWeek DATETIME = CONVERT(DATE, DATEADD(WEEK, DATEDIFF(WEEK, 7, GETDATE()), 0))
    , @LastDayOfLastWeek DATETIME = CONVERT(DATE, DATEADD(WEEK, DATEDIFF(WEEK, 7, GETDATE()), 6))
    , @FirstDayOfNextWeek DATETIME = CONVERT(DATE, DATEADD(WEEK, DATEDIFF(WEEK, 0, GETDATE()), 7))
    , @LastDayOfNextWeek DATETIME = CONVERT(DATE, DATEADD(WEEK, DATEDIFF(WEEK, 0, GETDATE()), 13))
    , @FirstDayOfCurrentMonth DATETIME = CONVERT(DATE, DATEADD(d, -( DAY(GETDATE() - 1) ), GETDATE()))
    , @LastDayOfCurrentMonth DATETIME = CONVERT(DATE, DATEADD(d, -( DAY(DATEADD(m, 1, GETDATE())) ), DATEADD(m, 1, GETDATE())))
    , @FirstDayOfLastMonth DATETIME = CONVERT(DATE, DATEADD(d, -( DAY(DATEADD(m, -1, GETDATE() - 2)) ), DATEADD(m, -1, GETDATE() - 1)))
    , @LastDayOfLastMonth DATETIME = CONVERT(DATE, DATEADD(d, -( DAY(GETDATE()) ), GETDATE()))
    , @FirstDayOfNextMonth DATETIME = CONVERT(DATE, DATEADD(d, -( DAY(DATEADD(m, 1, GETDATE() - 1)) ), DATEADD(m, 1, GETDATE())))
    , @LastDayOfNextMonth DATETIME = CONVERT(DATE, DATEADD(d, -( DAY(DATEADD(m, 2, GETDATE())) ), DATEADD(m, 2, GETDATE())))
    , @FirstDayOfCurrentYear DATETIME = CONVERT(DATE, DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()), 0))
    , @LastDayOfCurrentYear DATETIME = CONVERT(DATE, DATEADD(ms, -2, DATEADD(YEAR, 0, DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()) + 1, 0))))
    , @FirstDayOfLastYear DATETIME = CONVERT(DATE, DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()) - 1, 0))
    , @LastDayOfLastYear DATETIME = CONVERT(DATE, DATEADD(ms, -2, DATEADD(YEAR, 0, DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()), 0))))
    , @FirstDayOfNextYear DATETIME = CONVERT(DATE, DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()) + 1, 0))
    , @LastDayOfNextYear DATETIME = CONVERT(DATE, DATEADD(ms, -2, DATEADD(YEAR, 0, DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()) + 2, 0)))) 
```

更早地包含它是最有意义的，最好是在您的过程或 SQL 查询的顶部。

声明后，可以在代码中的任何位置引用参数，根据需要多次引用。

**例子**

让我们看看一些实际的代码：

```
DECLARE
    @FirstDayOfCurrentWeek DATETIME = CONVERT(DATE, DATEADD(WEEK, DATEDIFF(WEEK, 0, GETDATE()), 0))
    , @LastDayOfCurrentWeek DATETIME = CONVERT(DATE, DATEADD(WEEK, DATEDIFF(WEEK, 0, GETDATE()), 6))
    , @FirstDayOfLastWeek DATETIME = CONVERT(DATE, DATEADD(WEEK, DATEDIFF(WEEK, 7, GETDATE()), 0))
    , @LastDayOfLastWeek DATETIME = CONVERT(DATE, DATEADD(WEEK, DATEDIFF(WEEK, 7, GETDATE()), 6))
    , @FirstDayOfNextWeek DATETIME = CONVERT(DATE, DATEADD(WEEK, DATEDIFF(WEEK, 0, GETDATE()), 7))
    , @LastDayOfNextWeek DATETIME = CONVERT(DATE, DATEADD(WEEK, DATEDIFF(WEEK, 0, GETDATE()), 13))
    , @FirstDayOfCurrentMonth DATETIME = CONVERT(DATE, DATEADD(d, -( DAY(GETDATE() - 1) ), GETDATE()))
    , @LastDayOfCurrentMonth DATETIME = CONVERT(DATE, DATEADD(d, -( DAY(DATEADD(m, 1, GETDATE())) ), DATEADD(m, 1, GETDATE())))
    , @FirstDayOfLastMonth DATETIME = CONVERT(DATE, DATEADD(d, -( DAY(DATEADD(m, -1, GETDATE() - 2)) ), DATEADD(m, -1, GETDATE() - 1)))
    , @LastDayOfLastMonth DATETIME = CONVERT(DATE, DATEADD(d, -( DAY(GETDATE()) ), GETDATE()))
    , @FirstDayOfNextMonth DATETIME = CONVERT(DATE, DATEADD(d, -( DAY(DATEADD(m, 1, GETDATE() - 1)) ), DATEADD(m, 1, GETDATE())))
    , @LastDayOfNextMonth DATETIME = CONVERT(DATE, DATEADD(d, -( DAY(DATEADD(m, 2, GETDATE())) ), DATEADD(m, 2, GETDATE())))
    , @FirstDayOfCurrentYear DATETIME = CONVERT(DATE, DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()), 0))
    , @LastDayOfCurrentYear DATETIME = CONVERT(DATE, DATEADD(ms, -2, DATEADD(YEAR, 0, DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()) + 1, 0))))
    , @FirstDayOfLastYear DATETIME = CONVERT(DATE, DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()) - 1, 0))
    , @LastDayOfLastYear DATETIME = CONVERT(DATE, DATEADD(ms, -2, DATEADD(YEAR, 0, DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()), 0))))
    , @FirstDayOfNextYear DATETIME = CONVERT(DATE, DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()) + 1, 0))
    , @LastDayOfNextYear DATETIME = CONVERT(DATE, DATEADD(ms, -2, DATEADD(YEAR, 0, DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()) + 2, 0))))

SELECT  
    'a) FirstDayOfCurrentWeek.' AS [Title] ,
    @FirstDayOfCurrentWeek AS [DATE (Server default)] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentWeek, 127) AS [ISO8601] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentWeek, 103) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [British&French] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentWeek, 104) + ' ' + CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [German] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentWeek, 105) + ' ' + CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Italian] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentWeek, 111) + ' ' + CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Japan] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentWeek, 100) AS [U.S.] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentWeek, 120) AS [ODBC]
UNION
SELECT  
    'b) LastDayOfCurrentWeek.' AS [Title] ,
    @LastDayOfCurrentWeek AS [DATE (Server default)] ,
    CONVERT(VARCHAR, @LastDayOfCurrentWeek, 127) AS [ISO8601] ,
    CONVERT(VARCHAR, @LastDayOfCurrentWeek, 103) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [British&French] ,
    CONVERT(VARCHAR, @LastDayOfCurrentWeek, 104) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [German] ,
    CONVERT(VARCHAR, @LastDayOfCurrentWeek, 105) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Italian] ,
    CONVERT(VARCHAR, @LastDayOfCurrentWeek, 111) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Japan] ,
    CONVERT(VARCHAR, @LastDayOfCurrentWeek, 100) AS [U.S.] ,
    CONVERT(VARCHAR, @LastDayOfCurrentWeek, 120) AS [ODBC]
UNION
SELECT  
    'c) FirstDayOfLastWeek.' AS [Title] ,
    @FirstDayOfLastWeek AS [DATE (Server default)] ,
    CONVERT(VARCHAR, @FirstDayOfLastWeek, 127) AS [ISO8601] ,
    CONVERT(VARCHAR, @FirstDayOfLastWeek, 103) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [British&French] ,
    CONVERT(VARCHAR, @FirstDayOfLastWeek, 104) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [German] ,
    CONVERT(VARCHAR, @FirstDayOfLastWeek, 105) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Italian] ,
    CONVERT(VARCHAR, @FirstDayOfLastWeek, 111) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Japan] ,
    CONVERT(VARCHAR, @FirstDayOfLastWeek, 100) AS [U.S.] ,
    CONVERT(VARCHAR, @FirstDayOfLastWeek, 120) AS [ODBC]
UNION
SELECT  
    'd) LastDayOfLastWeek.' AS [Title] ,
    @LastDayOfLastWeek AS [DATE (Server default)] ,
    CONVERT(VARCHAR, @LastDayOfLastWeek, 127) AS [ISO8601] ,
    CONVERT(VARCHAR, @LastDayOfLastWeek, 103) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [British&French] ,
    CONVERT(VARCHAR, @LastDayOfLastWeek, 104) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [German] ,
    CONVERT(VARCHAR, @LastDayOfLastWeek, 105) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Italian] ,
    CONVERT(VARCHAR, @LastDayOfLastWeek, 111) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Japan] ,
    CONVERT(VARCHAR, @LastDayOfLastWeek, 100) AS [U.S.] ,
    CONVERT(VARCHAR, @LastDayOfLastWeek, 120) AS [ODBC]
UNION
SELECT  
    'e) FirstDayOfNextWeek.' AS [Title] ,
    @FirstDayOfNextWeek AS [DATE (Server default)] ,
    CONVERT(VARCHAR, @FirstDayOfNextWeek, 127) AS [ISO8601] ,
    CONVERT(VARCHAR, @FirstDayOfNextWeek, 103) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [British&French] ,
    CONVERT(VARCHAR, @FirstDayOfNextWeek, 104) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [German] ,
    CONVERT(VARCHAR, @FirstDayOfNextWeek, 105) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Italian] ,
    CONVERT(VARCHAR, @FirstDayOfNextWeek, 111) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Japan] ,
    CONVERT(VARCHAR, @FirstDayOfNextWeek, 100) AS [U.S.] ,
    CONVERT(VARCHAR, @FirstDayOfNextWeek, 120) AS [ODBC]
UNION
SELECT  
    'f) LastDayOfNextWeek.' AS [Title] ,
    @LastDayOfNextWeek AS [DATE (Server default)] ,
    CONVERT(VARCHAR, @LastDayOfNextWeek, 127) AS [ISO8601] ,
    CONVERT(VARCHAR, @LastDayOfNextWeek, 103) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [British&French] ,
    CONVERT(VARCHAR, @LastDayOfNextWeek, 104) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [German] ,
    CONVERT(VARCHAR, @LastDayOfNextWeek, 105) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Italian] ,
    CONVERT(VARCHAR, @LastDayOfNextWeek, 111) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Japan] ,
    CONVERT(VARCHAR, @LastDayOfNextWeek, 100) AS [U.S.] ,
    CONVERT(VARCHAR, @LastDayOfNextWeek, 120) AS [ODBC]
UNION
SELECT  
    'g) FirstDayOfCurrentMonth.' AS [Title] ,
    @FirstDayOfCurrentMonth AS [DATE (Server default)] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentMonth, 127) AS [ISO8601] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentMonth, 103) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [British&French] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentMonth, 104) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [German] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentMonth, 105) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Italian] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentMonth, 111) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Japan] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentMonth, 100) AS [U.S.] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentMonth, 120) AS [ODBC]
UNION
SELECT  
    'h) LastDayOfCurrentMonth.' AS [Title] ,
    @LastDayOfCurrentMonth AS [DATE (Server default)] ,
    CONVERT(VARCHAR, @LastDayOfCurrentMonth, 127) AS [ISO8601] ,
    CONVERT(VARCHAR, @LastDayOfCurrentMonth, 103) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [British&French] ,
    CONVERT(VARCHAR, @LastDayOfCurrentMonth, 104) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [German] ,
    CONVERT(VARCHAR, @LastDayOfCurrentMonth, 105) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Italian] ,
    CONVERT(VARCHAR, @LastDayOfCurrentMonth, 111) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Japan] ,
    CONVERT(VARCHAR, @LastDayOfCurrentMonth, 100) AS [U.S.] ,
    CONVERT(VARCHAR, @LastDayOfCurrentMonth, 120) AS [ODBC]
UNION
SELECT  
    'i) FirstDayOfLastMonth.' AS [Title] ,
    @FirstDayOfLastMonth AS [DATE (Server default)] ,
    CONVERT(VARCHAR, @FirstDayOfLastMonth, 127) AS [ISO8601] ,
    CONVERT(VARCHAR, @FirstDayOfLastMonth, 103) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [British&French] ,
    CONVERT(VARCHAR, @FirstDayOfLastMonth, 104) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [German] ,
    CONVERT(VARCHAR, @FirstDayOfLastMonth, 105) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Italian] ,
    CONVERT(VARCHAR, @FirstDayOfLastMonth, 111) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Japan] ,
    CONVERT(VARCHAR, @FirstDayOfLastMonth, 100) AS [U.S.] ,
    CONVERT(VARCHAR, @FirstDayOfLastMonth, 120) AS [ODBC]
UNION
SELECT  
    'j) LastDayOfLastMonth.' AS [Title] ,
    @LastDayOfLastMonth AS [DATE (Server default)] ,
    CONVERT(VARCHAR, @LastDayOfLastMonth, 127) AS [ISO8601] ,
    CONVERT(VARCHAR, @LastDayOfLastMonth, 103) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [British&French] ,
    CONVERT(VARCHAR, @LastDayOfLastMonth, 104) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [German] ,
    CONVERT(VARCHAR, @LastDayOfLastMonth, 105) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Italian] ,
    CONVERT(VARCHAR, @LastDayOfLastMonth, 111) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Japan] ,
    CONVERT(VARCHAR, @LastDayOfLastMonth, 100) AS [U.S.] ,
    CONVERT(VARCHAR, @LastDayOfLastMonth, 120) AS [ODBC]
UNION
SELECT  
    'k) FirstDayOfNextMonth.' AS [Title] ,
    @FirstDayOfNextMonth AS [DATE (Server default)] ,
    CONVERT(VARCHAR, @FirstDayOfNextMonth, 127) AS [ISO8601] ,
    CONVERT(VARCHAR, @FirstDayOfNextMonth, 103) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [British&French] ,
    CONVERT(VARCHAR, @FirstDayOfNextMonth, 104) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [German] ,
    CONVERT(VARCHAR, @FirstDayOfNextMonth, 105) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Italian] ,
    CONVERT(VARCHAR, @FirstDayOfNextMonth, 111) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Japan] ,
    CONVERT(VARCHAR, @FirstDayOfNextMonth, 100) AS [U.S.] ,
    CONVERT(VARCHAR, @FirstDayOfNextMonth, 120) AS [ODBC]
UNION
SELECT  
    'l) LastDayOfNextMonth.' AS [Title] ,
    @LastDayOfNextMonth AS [DATE (Server default)] ,
    CONVERT(VARCHAR, @LastDayOfNextMonth, 127) AS [ISO8601] ,
    CONVERT(VARCHAR, @LastDayOfNextMonth, 103) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [British&French] ,
    CONVERT(VARCHAR, @LastDayOfNextMonth, 104) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [German] ,
    CONVERT(VARCHAR, @LastDayOfNextMonth, 105) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Italian] ,
    CONVERT(VARCHAR, @LastDayOfNextMonth, 111) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Japan] ,
    CONVERT(VARCHAR, @LastDayOfNextMonth, 100) AS [U.S.] ,
    CONVERT(VARCHAR, @LastDayOfNextMonth, 120) AS [ODBC]
UNION
SELECT  
    'm) FirstDayOfCurrentYear.' AS [Title] ,
    @FirstDayOfCurrentYear AS [DATE (Server default)] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentYear, 127) AS [ISO8601] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentYear, 103) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [British&French] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentYear, 104) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [German] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentYear, 105) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Italian] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentYear, 111) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Japan] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentYear, 100) AS [U.S.] ,
    CONVERT(VARCHAR, @FirstDayOfCurrentYear, 120) AS [ODBC]
UNION
SELECT  
    'n) LastDayOfCurrentYear.' AS [Title] ,
    @LastDayOfCurrentYear AS [DATE (Server default)] ,
    CONVERT(VARCHAR, @LastDayOfCurrentYear, 127) AS [ISO8601] ,
    CONVERT(VARCHAR, @LastDayOfCurrentYear, 103) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [British&French] ,
    CONVERT(VARCHAR, @LastDayOfCurrentYear, 104) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [German] ,
    CONVERT(VARCHAR, @LastDayOfCurrentYear, 105) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Italian] ,
    CONVERT(VARCHAR, @LastDayOfCurrentYear, 111) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Japan] ,
    CONVERT(VARCHAR, @LastDayOfCurrentYear, 100) AS [U.S.] ,
    CONVERT(VARCHAR, @LastDayOfCurrentYear, 120) AS [ODBC]
UNION
SELECT  
    'o) FirstDayOfLastYear.' AS [Title] ,
    @FirstDayOfLastYear AS [DATE (Server default)] ,
    CONVERT(VARCHAR, @FirstDayOfLastYear, 127) AS [ISO8601] ,
    CONVERT(VARCHAR, @FirstDayOfLastYear, 103) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [British&French] ,
    CONVERT(VARCHAR, @FirstDayOfLastYear, 104) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [German] ,
    CONVERT(VARCHAR, @FirstDayOfLastYear, 105) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Italian] ,
    CONVERT(VARCHAR, @FirstDayOfLastYear, 111) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Japan] ,
    CONVERT(VARCHAR, @FirstDayOfLastYear, 100) AS [U.S.] ,
    CONVERT(VARCHAR, @FirstDayOfLastYear, 120) AS [ODBC]
UNION
SELECT  
    'p) LastDayOfLastYear.' AS [Title] ,
    @LastDayOfLastYear AS [DATE (Server default)] ,
    CONVERT(VARCHAR, @LastDayOfLastYear, 127) AS [ISO8601] ,
    CONVERT(VARCHAR, @LastDayOfLastYear, 103) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [British&French] ,
    CONVERT(VARCHAR, @LastDayOfLastYear, 104) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [German] ,
    CONVERT(VARCHAR, @LastDayOfLastYear, 105) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Italian] ,
    CONVERT(VARCHAR, @LastDayOfLastYear, 111) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Japan] ,
    CONVERT(VARCHAR, @LastDayOfLastYear, 100) AS [U.S.] ,
    CONVERT(VARCHAR, @LastDayOfLastYear, 120) AS [ODBC]
UNION
SELECT  
    'q) FirstDayOfNextYear.' AS [Title] ,
    @FirstDayOfNextYear AS [DATE (Server default)] ,
    CONVERT(VARCHAR, @FirstDayOfNextYear, 127) AS [ISO8601] ,
    CONVERT(VARCHAR, @FirstDayOfNextYear, 103) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [British&French] ,
    CONVERT(VARCHAR, @FirstDayOfNextYear, 104) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [German] ,
    CONVERT(VARCHAR, @FirstDayOfNextYear, 105) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Italian] ,
    CONVERT(VARCHAR, @FirstDayOfNextYear, 111) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Japan] ,
    CONVERT(VARCHAR, @FirstDayOfNextYear, 100) AS [U.S.] ,
    CONVERT(VARCHAR, @FirstDayOfNextYear, 120) AS [ODBC]
UNION
SELECT  
    'r) LastDayOfNextYear.' AS [Title] ,
    @LastDayOfNextYear AS [DATE (Server default)] ,
    CONVERT(VARCHAR, @LastDayOfNextYear, 127) AS [ISO8601] ,
    CONVERT(VARCHAR, @LastDayOfNextYear, 103) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [British&French] ,
    CONVERT(VARCHAR, @LastDayOfNextYear, 104) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [German] ,
    CONVERT(VARCHAR, @LastDayOfNextYear, 105) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Italian] ,
    CONVERT(VARCHAR, @LastDayOfNextYear, 111) + ' ' +  CONVERT(CHAR(5), @FirstDayOfCurrentWeek, 108) AS [Japan] ,
    CONVERT(VARCHAR, @LastDayOfNextYear, 100) AS [U.S.] ,
    CONVERT(VARCHAR, @LastDayOfNextYear, 120) AS [ODBC]; 
```

*运行上面的代码以产生以下输出：*

[![在此处输入图像描述](../Images/1f1cc94c4dae8d15179a34f4a2da0b06.png)](https://i.stack.imgur.com/8G0YV.jpg)

如果您的国家/地区丢失，那是因为我不知道它的代码。如果您可以编辑此答案并为您所在的国家/地区添加一个新列，那将是最有帮助和感激的。

提前致谢。

***注意：*** *请记住，我今天的日期是**2016 年 9 月 12 日**。*

**参考**

如需进一步阅读 ISO8601 国际日期标准，请点击以下链接：

*   [https://en.wikipedia.org/wiki/ISO_8601](https://en.wikipedia.org/wiki/ISO_8601)

如需进一步了解 ODBC 国际日期标准，请点击以下链接：

*   [https://technet.microsoft.com/en-us/library/ms190234(v=sql.90).aspx](https://technet.microsoft.com/en-us/library/ms190234(v=sql.90).aspx)

要查看我使用的日期格式列表，请点击以下链接：

*   [https://msdn.microsoft.com/en-GB/library/ms187928.aspx](http://msdn.microsoft.com/en-GB/library/ms187928.aspx)

如需进一步了解 DATETIME 数据类型，请点击以下链接：

*   [https://msdn.microsoft.com/en-GB/library/ms187819.aspx](https://msdn.microsoft.com/en-GB/library/ms187819.aspx)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-04-02T09:50:08.007

从 SQL2012 开始，引入了一个名为`EOMONTH`. 使用此功能可以轻松找到上个月的第一天和最后一天。

```
select DATEADD(DD,1,EOMONTH(Getdate(),-2)) firstdayoflastmonth, EOMONTH(Getdate(), -1) lastdayoflastmonth 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-06-05T18:21:56.497

```
SELECT DATEADD(m,DATEDIFF(m,0,GETDATE())-1,0) AS PreviousMonthStart

SELECT DATEADD(ms,-2,DATEADD(month, DATEDIFF(month, 0, GETDATE()), 0)) AS PreviousMonthEnd 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-03-09T07:09:41.003

要获取上个月的第一个日期：

```
select DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE())-1, 0) LastMonthFirstDate 
```

要获取上个月的最后日期：

```
select DATEADD(MONTH, DATEDIFF(MONTH, -1, GETDATE())-1, -1) LastMonthEndDate 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-12-27T06:26:36.007

我在 SSRS 报告中使用了以下逻辑。

```
BUS_DATE = 17-09-2013

X=DATEADD(MONTH,-1,BUS_DATE) = 17-08-2013

Y=DAY(BUS_DATE)=17

first_date = DATEADD(DAY,-Y+1,X)=01-08-2013

last_date  = DATEADD(DAY,-Y,BUS_DATE)=31-08-2013 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-09-17T21:08:08.770

取一些基准日期，即某个月的 31 日，例如“20011231”。然后使用
以下过程（我在下面给出了 3 个相同的示例，只有 @dt 值不同）。

```
declare @dt datetime;

set @dt = '20140312'

SELECT DATEADD(month, DATEDIFF(month, '20011231', @dt), '20011231');

set @dt = '20140208'

SELECT DATEADD(month, DATEDIFF(month, '20011231', @dt), '20011231');

set @dt = '20140405'

SELECT DATEADD(month, DATEDIFF(month, '20011231', @dt), '20011231'); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-08-13T09:12:08.003

您可以通过执行在 SQL Server 中获取上个月的第一天和最后一天（带有时间戳）

```
--select dateadd(dd,-datepart(dd,getdate())+1,dateadd(mm,-1,getdate())) --first day of previous month 
--select dateadd(dd,-datepart(dd,getdate()),getdate()) -- last day of previous month** 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-09-29T22:56:49.833

这是一个相当直接和动态的方式。对于上个月的最后一天，从今天的日期中减去当前的数字日期。对于上个月的第一天，使用相同的代码，只是重复从先前的结果中减去数字天并加 1。

```
declare @PriorEOM as datetime
declare @PriorFOM as datetime

Set @PriorEOM = dateadd(day,-day(getdate()),getdate())

Set @PriorFOM = dateadd(day,-day(@PriorEOM) + 1,@PriorEOM)

Print @PriorEOM
Print @PriorFOM 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-07-29T09:02:34.283

我还没有看到这个解决方案；这是我更喜欢它更简单的可读性：

```
select dateadd(month,-1,format(getutcdate(),'yyyy-MM-01')) 
```

# php - 找到这个东西并替换它之后的东西

> ID：11743812
> 
> 赞同：0
> 
> 时间：2012-07-31T15:37:29.760
> 
> 标签：php, jquery

基本上我希望PHP打开一个配置文件，搜索一个字符串并替换后面的内容我在我创建的代码中遇到的问题是它找到了字符串`$db_pass =`并能够替换它......但是然后在文件有一个额外的 `"password");`行...所以我需要它能够替换整行或剪切其余行以便能够删除它。

```
 $dbFile = 'dbconfig.php';
    $String = "\$db_pass =\"new_password\";\n";
    file_put_contents($dbFile, str_replace("\$db_pass =", $String,    file_get_contents($dbFile))); 
```

数据库配置文件

```
 <?php
    // Database Constants
    db_pass = "hi";
    db_user = "hssi";
?> 
```

我当前的脚本输出像这样 dbconfig.php

```
 <?php
    // Database Constants
    db_pass = "new_password";
"hi";
    db_user = "hssi";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:44:54.280

代替

```
str_replace("\$db_pass =", $String 
```

利用：

```
preg_replace('/\$db_pass = "(.*)";/', $String 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T15:49:32.640

您想使用[正则表达式](http://www.regular-expressions.info/)来替换整行，而不是行的开头。[`preg_replace()`](http://www.php.net/manual/en/function.preg-replace.php)是用于查找和替换正则表达式的 PHP 函数。

执行您正在寻找的示例代码将是：

```
$dbFile = 'dbconfig.php';
$String = '$db_pass = "new_password";';
file_put_contents(
    $dbFile,
    preg_replace('/\$db_pass = "(.*)";/', $String, file_get_contents($dbFile))
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:44:31.647

看看这个： http: [//php.net/manual/en/function.parse-ini-file.php](http://php.net/manual/en/function.parse-ini-file.php)

# image - 是否可以创建圆形（或任何其他非矩形）图像？

> ID：11743815
> 
> 赞同：15
> 
> 时间：2012-07-31T15:37:47.207
> 
> 标签：image, png, image-manipulation

我看到的所有圆盘形图像实际上都在一个矩形框中，并且侧面（下图中的黑色部分）是透明的。

![圆盘状图像](../Images/a756e1bc36859c2f309ffd0c9214df48.png)

是否有可能有一个圆形画布本身？或者图像总是设计成矩形的？

如果是，**如何？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T16:09:31.920

没错，任何非矩形图形都确实存在于与轴对齐的边界矩形内。这样做是因为矩形很容易处理。整个显示器本身只是像素的矩形排列。

确定一个点是否在矩形内非常容易：如果 X 坐标位于给定的 Xmin 和 Xmax 点之间，并且 Y 坐标位于 Ymin 和 Ymax 之间，则该点在矩形内。这两个测试是独立的——Xmin 和 Xmax 值不依赖于 Y 值，反之亦然。这比确定一个点是否位于圆形、三角形或任何其他形状内更容易，因为在这些形状中您需要乘法或大型查找表等操作。

并考虑在窗口系统中发生的基本操作。首先它必须在屏幕上渲染完整的图片。系统内部有一堆重叠的窗口来表示，为了形成画面，它必须决定屏幕上每个单独的像素需要是什么颜色。这对于矩形来说是最简单的。系统扫描每一行和每一列，并使用简单边界测试确定包含给定 X、Y 坐标的最上面的窗口。然后由该窗口选择像素的颜色。

相反，当鼠标点击屏幕某处时，系统必须确定点击了哪个窗口或对象，然后向其发送点击消息。这实际上是同一个问题，通过遍历重叠对象列表并根据每个对象的矩形限制测试鼠标指针坐标很容易处理。

这两个基本操作可以在软件中轻松完成，甚至可以在专用硬件中完成。其他一些不基于矩形的方法会做得更多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T16:08:32.643

我从来没有遇到过一种[光栅图形](http://en.wikipedia.org/wiki/Raster_graphics)文件格式，它可以存储除矩形像素阵列或其压缩版本之外的任何内容。为了存储一些任意形状，文件必须以某种形式包含文件中像素将被填充到的形状的规范。我可以看到它是如何完成的，但我从未见过它完成。

一种方法非常简单：

*   存储一个由 0 和 1 组成的矩形数组，其中 1 表示文件包含规范的像素；
*   存储像素本身，在上述数组中每个 1 一个。

另一种方法是存储：

*   图像矩形边界框的尺寸（以像素为单位）；
*   在文件的数据部分中，每行中第一个像素相对于矩形边界框的位置；
*   像素本身。

很难找到一个令人信服的理由来处理这种方法引发的并发症。

[当然，矢量图形](http://en.wikipedia.org/wiki/Vector_Graphics)是另一种鱼。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T16:20:15.637

我知道这不是您的想法，但是可以组合无限多、无限薄、完美定位的矩形图像来创建任意的非矩形形状。

请参阅[http://meyerweb.com/eric/css/edge/raggedfloat/demo.html](http://meyerweb.com/eric/css/edge/raggedfloat/demo.html)。

当然，在现实世界中，您将被限制为至少 1 px 的高度/宽度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-26T01:28:23.240

*计算机编程基于矩阵，该矩阵具有确定的行和列，也是 90 度。因此设备以运行程序的方式制造，因此屏幕是矩形的。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-16T23:42:09.143

问题是您的像素不会相同。图像的关键特征之一是所有行的大小相同。这是因为如果行的长度不同，则数组的维度将不一致。以这种方式对称划分圆的唯一方法是使用圆内的直径和圆。所以圆形图像中的像素看起来像这样： [![几何上不完美，自制](../Images/4ea2088645935987c1f5ee45542d6e16.png)](https://i.stack.imgur.com/BEcKz.png)

它看起来像这样的原因很简单。考虑获取矩形坐标的最有效方法。这当然是通过（距离 x，距离 y）的元组，因为对于最大 x 的一些任意限制和对 y 的单独限制，这些坐标的范围是一个矩形。但是，将填充一个圆的坐标范围将由成对的（距离 x，度 y）组成。使用 (x,y) 坐标是可能的，但它本质上是在圆周围制作一个正方形，并在该正方形上找到一些不允许的点。当我们将圆坐标划分为像素时，它们看起来像上面那样。这里的每个部分都是一个像素。然而，有一个相当大的问题：最靠近边缘的像素比靠近中心的像素大。为了获得高清晰度的外部像素，您需要内部像素的图像质量不合理。那将是巨大的空间浪费。圆形图像看起来像您发布的图像的原因是因为矩形分区均匀，因此没有这个问题。因此，人们通常更喜欢只取圆圈周围的正方形。制作一种新的图像格式只是为了排除角落中相当少量的像素是很荒谬的，所以他们只使用现有的。希望这是您正在寻找的答案。人们通常更喜欢只取圆圈周围的正方形。制作一种新的图像格式只是为了排除角落中相当少量的像素是很荒谬的，所以他们只使用现有的。希望这是您正在寻找的答案。人们通常更喜欢只取圆圈周围的正方形。制作一种新的图像格式只是为了排除角落中相当少量的像素是很荒谬的，所以他们只使用现有的。希望这是您正在寻找的答案。

# android - Android Canvas.drawText 不呈现

> ID：11743816
> 
> 赞同：4
> 
> 时间：2012-07-31T15:37:48.733
> 
> 标签：android, canvas, custom-view, drawtext

我有一个自定义视图，可以在屏幕上绘制几个不同的东西。每个人都有自己的绘画对象。一切都画得很好，除了文字。它在 Gingerbread 中运行良好，但 ICS+ 没有文本。

这是我的绘制方法：

```
protected void onDraw(Canvas canvas)
{
   canvas.save(Canvas.MATRIX_SAVE_FLAG);
   canvas.scale(getWidth(), getHeight());

   drawGrid(canvas);
   drawHeader(canvas);
   drawSelected(canvas);
   drawDays(canvas);
   drawToday(canvas);

   canvas.restore();
} 
```

Grid、Selected 和 Today 工作正常。Header 和 Days 是文本绘图，它们不起作用。

这是drawHeader方法：

```
private void drawHeader(Canvas canvas)
{
   canvas.drawText("Sun", DAYS[0], .05f, paintDaysOfTheWeek);
   canvas.drawText("Mon", DAYS[1], .05f, paintDaysOfTheWeek);
   canvas.drawText("Tues", DAYS[2], .05f, paintDaysOfTheWeek);
   canvas.drawText("Wed", DAYS[3], .05f, paintDaysOfTheWeek);
   canvas.drawText("Thurs", DAYS[4], .05f, paintDaysOfTheWeek);
   canvas.drawText("Fri", DAYS[5], .05f, paintDaysOfTheWeek);
   canvas.drawText("Sat", DAYS[6], .05f, paintDaysOfTheWeek);

   canvas.drawLine(.01f, .0f, .99f, .0f, paintMediumBlack);
   canvas.drawLine(.01f, .07f, .99f, .07f, paintMediumBlack);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T20:13:41.210

我通过添加解决了这个问题

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
    setLayerType(LAYER_TYPE_SOFTWARE, paint) 
```

到我的自定义视图。不知道为什么我需要它，如果有人可以解释它，那就太好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:48:20.380

启用硬件加速后，它有时会通过删除它认为不需要的绘图调用来进行优化。

例如，如果您在另一个视图下方有一个视图，它可以决定不渲染它，假设它是隐藏的，因此不需要渲染它。

# linux - 如何终止 shell 脚本中的分叉进程？

> ID：11743828
> 
> 赞同：0
> 
> 时间：2012-07-31T15:38:20.467
> 
> 标签：linux, shell, scripting

我正在尝试同时运行多个命令。我通过将每个命令附加到看起来像的单个命令来在脚本中准备它

```
and=" & "
command=$command1$and$command2
eval $command 
```

但是，当我运行它时，每个命令都会被分叉并正确完成，但它会挂在命令行上并且永远不会让我返回提示符。

示例（脚本 run.sh）。如果这两个命令是：

```
command1="echo 'Hello'"
command2="echo 'World'" 
```

那么输出是：

```
person: ./run.sh
Hello
World
## It Hangs here 
```

代替

```
person: ./run.sh
Hello
World
person: 
```

那么如何终止分叉进程，或者让脚本阻塞直到分叉进程完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:43:08.143

假设您的示例已简化（因为“echo”应立即完成并返回提示符），您只需将第二个命令置于后台即可。IOW，尝试：

```
command="$command1 & $command2 &" 
```

请注意，我已经删除了您的“和”变量，因为它只是混淆。单曲`&`绝不是`and`手术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:45:29.107

Are you getting output like this:

```
~/dev/other $ echo foo &
[1] 522
~/dev/other $ foo
▯ # blink, blink, blink… 
```

In this case you *are* being returned to the prompt, but the prompt is appearing before `echo` completes, and thus the string to be `echo`ed is appearing after the prompt, followed by a newline. You can write your next command on that new line after the prompt, or just hit `enter` to get a new prompt.

If this is happening in a script, you can add the builtin `wait` to the end of the script to ensure that the script doesn't return the prompt before all of its backgrounded child processes are complete.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:50:11.583

我认为你的命令应该是这样的：

```
command= $command1$and$command2$and 
```

# ios - 核心动画：仅在图层的指定部分执行动画（iOS）

> ID：11743834
> 
> 赞同：1
> 
> 时间：2012-07-31T15:38:50.610
> 
> 标签：ios, animation, core-animation, calayer

我在这里非常绝望，正在寻找一种将动画添加到 a`CALayer`但使其仅应用于图层的一部分的方法。或者，如果它甚至可能。

我正在尝试为文本的一部分（当前使用`UILabel`）设置动画，但其余部分保持原样。

这是一个很好的例子：

计数器，当您添加/删除计数时，只有一位数会发生变化。

谢谢

编辑1：

我正在尝试编辑文本***/part/的位置。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:27:49.223

你所描述的是不可能的。核心动画适用于整个图层。UIView 动画适用于整个视图。

如果您想为图层/视图的一部分设置动画，则无需将其切成小块并仅对要更改的部分进行动画处理。

一个例外是您可以为 CAShapeLayer 的路径设置动画。只要路径保持相同的结构（控制点的数量/类型），路径的变化就会被动画化。

如果您有一个使用路径定义文本的形状图层，并且您可以设计一种方法来转换路径，同时保持相同数量和类型的控制点，您可以更改部分形状。

还可以对图层蒙版的更改进行动画处理。有了它，您可以显示或隐藏图层的一部分，这可以为您提供类似于为图层的一部分设置动画的效果。例如，您可以使图层的中间部分逐渐消失为透明。

# ruby - 将数字的 JSON 序列化强制为特定精度

> ID：11743835
> 
> 赞同：5
> 
> 时间：2012-07-31T15:38:53.507
> 
> 标签：ruby, json

考虑以下代码，该代码旨在将数字四舍五入到最接近的百分之一并将结果序列化为 JSON：

```
require 'json'
def round_to_nearest( value, precision )
  (value/precision).round * precision
end
a = [1.391332, 0.689993, 4.84678]
puts a.map{ |n| round_to_nearest(n,0.01) }.to_json
#=> [1.3900000000000001,0.6900000000000001,4.8500000000000005] 
```

有没有办法使用 JSON 以**特定级别的精度序列化所有数字**？

```
a.map{ ... }.to_json( numeric_decimals:2 )
#=> [1.39,0.69,4.85] 
```

这可以使用 Ruby 内置的 JSON 库或其他 JSON gem。

**编辑**：正如在下面对答案的评论中所指出的，我正在寻找一个通用解决方案来处理所有包含数字的任意数据的 JSON 序列化，而不是具体的数字平面数组。

* * *

*^(请注意，在这种特定情况下，可以通过重写方法来解决上述问题：)*

```
def round_to_nearest( value, precision )
  factor = 1/precision
  (value*factor).round.to_f / factor
end 
```

*^(...但这并不能解决在序列化过程中强制精度级别的普遍愿望。)*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T18:17:04.413

我只是使用 ruby​​ 的内置圆形方法对其进行预圆形：[http ://www.ruby-doc.org/core-1.9.3/Float.html#method-i-round](http://www.ruby-doc.org/core-1.9.3/Float.html#method-i-round)

```
a.map{ |n| n.round(2) }.to_json 
```

这对我来说看起来很干净，而不是获取所有类型的自定义库并传入参数。

编辑评论：

我知道您可以通过积极支持做到这一点。

```
# If not using rails
require 'active_support/json'

class Float
  def as_json(options={})
    self.round(2)
  end
end

{ 'key' => [ [ 3.2342 ], ['hello', 34.1232983] ] }.to_json
# => {"key":[[3.23],["hello",34.12]]} 
```

更精确的解决方案：[更好的猴子补丁](https://stackoverflow.com/questions/11743835/force-json-serialization-of-numbers-to-specific-precision/11746479#11750364)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T23:11:54.037

由于内置的​​ JSON 库不调用`#as_json`或`#to_json`在 Numerics 上（大概是为了速度），我们可以使用 Rails 的[ActiveSupport](http://as.rubyonrails.org/)库（不需要 Rails）。

我们巧妙地做了猴子补丁，这样它只有在调用时传递用户指定的选项时才会生效`to_json`：

```
require 'active_support/json' # gem install activesupport

class Float
  def as_json(options={})
    if options[:decimals]
      value = round(options[:decimals])
      (i=value.to_i) == value ? i : value
    else
      super
    end
  end
end

data = { key: [ [ 2.991134, 2.998531 ], ['s', 34.127876] ] }
puts data.to_json             #=> {"key":[[2.991134,2.998531],["s",34.127876]]}
puts data.to_json(decimals:2) #=> {"key":[[2.99,3],["s",34.13]]} 
```

如上一个示例所示，有一些额外的代码用于将整数值浮点数转换为纯整数，这样序列化就不会浪费字节输出`3.00`，而可以直接放入`3`（JSON 和 JS 中的值相同）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T18:54:11.323

因为您正在处理浮点，所以我倾向于说使用格式字符串转换为字符串，然后传递它们。他们可以让你很好地设置精度：

```
a = [1.391332, 0.689993, 4.84678]
a.map{ |f| '%.2f' % f }
=> ["1.39", "0.69", "4.85"] 
```

如果您想要真正的浮点数，请将它们转换回来：

```
a.map{ |f| ('%.2f' % f).to_f }
=> [1.39, 0.69, 4.85] 
```

从那时起，您可以编写一些东西来覆盖 JSON 的默认 Array 序列化程序或 Float 序列化程序，但是 JSON 会这样做，它可以接受您想要的精度或格式字符串。

* * *

只是为了澄清一下，使用`to_f`将在序列化之前发生，这不会使结果 JSON 输出膨胀或在接收端强制任何类型的“魔法”。浮点数将传输并反序列化为浮点数：

```
irb(main):001:0> require 'json'
true
irb(main):002:0> a = [1.391332, 0.689993, 4.84678]
[
    [0] 1.391332,
    [1] 0.689993,
    [2] 4.84678
]
irb(main):003:0> a.map{ |f| ('%.2f' % f).to_f }.to_json
"[1.39,0.69,4.85]"
irb(main):004:0> JSON.parse(a.map{ |f| ('%.2f' % f).to_f }.to_json)
[
    [0] 1.39,
    [1] 0.69,
    [2] 4.85
] 
```

从以下内容开始：

```
class Float
  def to_json
    ('%.2f'%self).to_f
  end
end
(355.0/113).to_json # => 3.14 
```

并弄清楚如何将其应用于浮点数组。不过，您可能需要使用纯 Ruby JSON。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-31T19:06:48.267

1.  序列化过程中不应该处理精度；
2.  可能你对这些数字有一些你没有明确表示的语义（也许是货币值？也许这是一个快速而肮脏的脚本，不需要明确表示这个语义）和
3.  当您的程序真正需要精度时，使用浮点数作为您的实现是解决问题的不好方法。浮点数的表示具有固有的不准确性（[浮点精度问题](http://en.wikipedia.org/wiki/Floating_point_numbers#Accuracy_problems)）。请改用 BigDecimal。

# eclipse - eclipse - 以特殊顺序编译多个项目

> ID：11743836
> 
> 赞同：0
> 
> 时间：2012-07-31T15:38:57.747
> 
> 标签：eclipse, compilation

简短的问题，有没有办法在eclipse中以特殊顺序构建两个java项目？第一个项目是服务器，第二个项目是 gui。所以，首先服务器应该比 gui 编译/运行。在日食中找不到方法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:44:17.880

在 gui 的项目 Properties/Java Build Path 中指定服务器项目。当您尝试构建 gui 时，它将检查并在需要时重新构建服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:58:16.973

找到了。发射组是解决方案...

# r - R中两个或多个文件的条形图平均值

> ID：11743840
> 
> 赞同：1
> 
> 时间：2012-07-31T15:39:14.540
> 
> 标签：r

我有两个文本文件，A.txt 和 B.txt（将来可能会更多）。每个文本文件看起来像这样（但具有不同的值）：

```
1
2
5
6
7 
```

我想绘制文本文件中每一行的平均值，例如，将文本文件组合成一个看起来像这样的矩阵：

```
1 5
2 7
5 5
6 9
7 7 
```

然后制作一个由 5 个条组成的条形图，每个代表每行的平均值（1+5/2、2+7/2 等）。我还想绘制代表每个条形图的标准误差的误差线（假设我有多个文本文件）。

我可以对单个文本文件执行以下操作：

```
my.data <- read.table('A.txt')
barplot(t(my.data)) 
```

这将绘制一个文本文件。但不确定如何获取两个文本文件，将它们组合起来，绘制平均值并生成误差线。有任何建议或资源链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:44:26.740

也许是这样的：

```
my.data <- do.call("cbind", lapply(list.files(pattern="*.txt"), read.table))
my.data <- rowMeans(my.data)
barplot(t(my.data)) 
```

请注意，这未经测试。

# python - Python tkinter 在标题栏中更改“打开”

> ID：11743841
> 
> 赞同：4
> 
> 时间：2012-07-31T15:39:25.660
> 
> 标签：python, python-2.7

我想在 tkinter 窗口中更改标题栏下方显示为“打开”的部分——请参见下面的 root.title("Old file selected first")：

![在此处输入图像描述](../Images/293ce5fdcde442ef234398a9b582a938.png) 这是我的代码的一部分：

```
import Tkinter as tk
import tkFileDialog

root = tk.Tk()
root.title("Old file selected first") # what i would like to appear instead of 'Open'
root.withdraw()
old_file = tkFileDialog.askopenfilename(filetypes=[('.csvfiles', '.csv')]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:49:16.607

您甚至不需要运行其他 tk 主应用程序，除非您想隐藏弹出的 tkinter 默认框。

```
import tkFileDialog

old_file = tkFileDialog.askopenfilename(filetypes=[('.csvfiles', '.csv')],
                                        title='Old file selected first') 
```

有关详细信息，请参见此处：http: [//tkinter.unpythonic.net/wiki/tkFileDialog](http://tkinter.unpythonic.net/wiki/tkFileDialog)

# asp.net - 来自 web.config 和默认登录的 Active Directory 身份验证

> ID：11743843
> 
> 赞同：0
> 
> 时间：2012-07-31T15:39:27.223
> 
> 标签：asp.net, active-directory, forms-authentication

目前我有一种方法来检查用户是否经过身份验证，但我希望我的 ASP.net 应用程序使用默认登录名实现 ActiveDirectory 身份验证。

我目前的方法：

```
public bool IsAuthenticated(string user, string pass)
        {
            bool authenticated = false;
            string path = "LDAP://my path here";
            DirectoryEntry adsEntry = new DirectoryEntry(path);
            adsEntry.AuthenticationType = AuthenticationTypes.Secure;
            adsEntry.Username = user;
            adsEntry.Password = pass;
            DirectorySearcher adsSearcher = new DirectorySearcher(adsEntry);
            adsSearcher.Filter = "(sAMAccountName=" + user + ")";

            try
            {
                SearchResult adsSearchResult = adsSearcher.FindOne();
                authenticated = true;
                adsEntry.Close();
            }
            catch (Exception ex)
            {
                // Failed to authenticate. Most likely it is caused by unknown user
                // id or bad strPassword.
                //strError = ex.Message;
                adsEntry.Close();
            }

            return authenticated; 
```

尝试在 web.config 中实现登录功能，我写了以下内容：

```
 <membership defaultProvider="MembershipADProvider">
      <providers>
        <add
          name="MembershipADProvider"
          type="System.Web.Security.ActiveDirectoryMembershipProvider, System.Web, 
            Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
                    connectionStringName="ADConnectionString"
                    />

      </providers>
    </membership> 
```

它似乎正在连接到 LDAP 服务器，因为它会抛出一个`Bad username or password valdiation error`. 另一方面，我不确定它是否甚至连接到服务器，因为该服务器在 3 次不正确的身份验证尝试后阻止了其他每个应用程序上的用户，而这并没有发生。我不确定是否必须将属性添加`connectionUsername`到`connectionPassword`web.config 或让`Login`命令在登录时用每个用户名/密码填充它们。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:01:40.397

我使用的是相同类型的设置，我可以从配置中的代码中看到的唯一区别是我添加了 attributeMapUsername 属性。

```
<membership defaultProvider="MembershipADProvider">
  <providers>
    <add name="MembershipADProvider"
         type="System.Web.Security.ActiveDirectoryMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
         connectionStringName="ADConnectionString"
         attributeMapUsername="sAMAccountName"
    />
  </providers>
</membership> 
```

在后面的代码中，我只是通过会员提供程序检查验证，如下所示。

```
// Connect to the proper membership provider based on the domain name entered by the user.
MembershipProvider provider = Membership.Providers["MembershipADProvider"];

// Check if the domain provider exists.
if ( provider != null )
{
    // Validate the user based on the credentials they entered.
    if ( provider.ValidateUser( username, password ) )
    {
        // Authenticate the user and redirect them to the return URL.
        FormsAuthentication.SetAuthCookie( username, false );
        Response.Redirect( returnUrl );
    }
} 
```

# sql-server - 非聚集索引插入显示计划运算符 - 缺少？

> ID：11743854
> 
> 赞同：2
> 
> 时间：2012-07-31T15:40:05.020
> 
> 标签：sql-server, sql-execution-plan

我看过几个执行计划示例，它们显示“非聚集索引插入显示计划运算符”。我继续创建了一个带有非聚集索引的表。

如果我在那里插入并显示实际（或估计）执行。计划我看不到这个操作员。只有聚集索引插入或表插入（取决于结构）。

使用版本 SQL Server 2008 R2 开发者版。

我错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:44:05.403

您可能需要插入更多行才能看到显示为单独运算符的非聚集索引维护。

您可以获得“[宽](http://blogs.msdn.com/b/craigfr/archive/2007/08/22/optimized-non-clustered-index-maintenance-in-per-index-plans.aspx)”（每索引）或“[窄](http://blogs.msdn.com/b/craigfr/archive/2007/08/15/optimized-non-clustered-index-maintenance.aspx)”（每行）计划。

对于狭窄的计划，索引维护在计划中不显示为单独的运算符。在 Management Studio 中，您可以右键单击聚集索引插入运算符，然后在属性窗口中展开“对象”节点以查看此类计划的受影响索引。

所以例如

```
CREATE TABLE #T(
A INT CONSTRAINT PK PRIMARY KEY, 
B INT CONSTRAINT UQ UNIQUE) 

/*narrow plan*/
INSERT INTO #T 
SELECT 1,1

/*wide plan*/   
INSERT INTO #T 
SELECT DISTINCT number, number
FROM master..spt_values
WHERE number <> 1

DROP TABLE #T 
```

给出以下两个方案

[![计划](../Images/f060d47f2867307796f2e02601fade9b.png)](https://i.stack.imgur.com/WROUD.jpg)

并在第一个计划中扩展 CI 插入运算符的属性窗口显示

![特性](../Images/d514fff4f91247c398cdc29c79aaf428.png)

# java - 在android中读取一堆文件并写入套接字（异步）会产生OutofMemoryError异常

> ID：11743856
> 
> 赞同：0
> 
> 时间：2012-07-31T15:40:05.897
> 
> 标签：java, android

在我的 android 应用程序中，我读取了一大堆 64KiB 的文件并将其写入套接字。对套接字的写入是异步的，我无法控制它，它也不提供回调函数。

如果我读取大文件，我会得到 OOM 异常，因为套接字仍在解析字节并通过网络发送它们。

作为参考，代码如下所示：

```
byte[] chunk = new byte[64 * 1024];
int read;
while ((read = fis.read(chunk)) != -1) {
  // Async call
  socket.write(chunk);
  chunk = new byte[64 * 1024];
} 
```

有没有我可以遵循的设计模式来克服这种情况。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:52:06.490

TCP 数据包只能容纳 1.5 - 9 KB，具体取决于 MTU。因此，如果您使用 8 KB 缓冲区，它可能不会有任何区别。

您的问题的原因是您正在创建数组的副本..

```
while ((read = fis.read(chunk)) != -1) {
  socket.write(chunk, 0, read); // no need to make this asynchronous.
} 
```

操作系统发送 TCP 缓冲区通常为 64 KB，并且已经异步发送数据。除非您有 infiniband 或 40 GigE，否则它不太可能有帮助。复制缓冲区中的数据可能会使其变慢。

# java - 在 JOptionPane 中显示数组（字符串）的内容

> ID：11743861
> 
> 赞同：2
> 
> 时间：2012-07-31T15:40:16.747
> 
> 标签：java, arrays, string, swing

我在这里有三个类，它们要求输入并且应该在对话框中显示一个字符串数组。

第一类：

```
public class Card {

  public int rank;
  public int suit;
  public String rankName;
  public String suitName;
  public String cardName;

  public Card () {
    rank = 0;
    suit = 0;
    rankName = "";
    suitName = "";
    cardName = "";
  }

  public int getRank() {
    return rank;
  } 
  public void setRank(int rank) {
    this.rank = rank;
  }
  public int getSuit() {
    return suit;
  }
  public void setSuit(int suit) {
    this.suit = suit;
  }
  public String getRankName() {
    return rankName;
  }
  public void setRankName(String rankName) {
    this.rankName = rankName;
  }
  public String getSuitName() {
    return suitName;
  }
  public void setSuitName(String suitName) {
    this.suitName = suitName;
  }
  public String getCardName() {
    return cardName;
  }
  public void setCardName(String cardName) {
    this.cardName = cardName;
  }
} 
```

第 2 类 - 这是我应该输出存储在数组中的字符串的类。我认为我在做仿制药部分的方向是正确的，但我不喜欢那样做。请指导我打印所有这些。

```
import javax.swing.JOptionPane;

public class Deck {

    public void assignIntegerValues(Card card) {
        //Card card = new Card();
        String[] suitNameArray = {"Clubs", "Spades", "Hearts", "Diamonds"};
        String[] rankNameArray = {"Ace", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten", "Jack", "Queen", "King"};
        List<Card> cardName = new ArrayList();

        card.setSuitName  (suitNameArray[card.getSuit()-1]);
        card.setRankName (rankNameArray[card.getRank()-1]);
        card.setCardName (card.getSuitName() + "-" + card.getRankName());
        JOptionPane.showMessageDialog(null, card.cardName);
    }

    public void displayAll (Card card) {
        for (int i=0; i<card.cardName.length(); i++) {
            String print = JOptionPane.showMessageDialog(null, card.cardName[i]);
        }
    }
} 
```

第 3 类：

```
import javax.swing.JOptionPane;

public class DisplayDeck {

    public static void main(String[] args) {

        Card card = new Card();
        Deck deck = new Deck();
        int answer;
        String again;

        do {
            String suitString = JOptionPane.showInputDialog("Suit: ");
            card.setSuit (Integer.parseInt(suitString));

            String rankString = JOptionPane.showInputDialog("Rank: ");
            card.setRank (Integer.parseInt(rankString)); 

            deck.assignIntegerValues(card);
            String answerString = JOptionPane.showInputDialog("Try again? (1/0) ");
            answer = Integer.parseInt(answerString);
        } while (answer == 1);

        deck.displayAll(card);

    }
} 
```

我正在尝试显示用户输入的 cardNames。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:19:01.603

```
public void displayAll (Card[] cards) {
    String output = "";
    for (int i=0; i<cards.length(); i++) {
        output += cards[i].getCardName() + "\n";
    }
    JOptionPane.showMessageDialog(null, output);
} 
```

您需要将数组传递给 displayAll 否则您只有一张卡。

然后在实际创建 JOptionPane 之前构建输出字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:31:14.827

另一种方法取决于`Deck`有一个添加每个新的集合`Card`：

```
class Deck {
    private List<Card> cards = new ArrayList<Card>();
    ...
} 
```

要`Card`覆盖`toString()`,

```
@Override
public String toString() {
    return cardName;
} 
```

然后`displayAll()`变得非常简单：

```
public void displayAll() {
    JOptionPane.showMessageDialog(null,
        new JScrollPane(new JList(cards.toArray())));
} 
```

![图片](../Images/afc2c055812dcb4266e486889c938a78.png)

# jquery - jQuery QTip 修改 ASP.net 超链接控件的 'NavigateUrl' 属性

> ID：11743862
> 
> 赞同：0
> 
> 时间：2012-07-31T15:40:19.377
> 
> 标签：jquery, asp.net, qtip

我正在使用[QTip](http://craigsworks.com/projects/qtip/) JQuery 插件来显示一个弹出对话框。通过使用 AJAX 查询 .aspx 页面来加载弹出对话框。.aspx 页面仅加载带有相对 URL 的超链接控件的“NavigateUrl”属性。

如果我调试 .aspx 页面，我可以看到服务器端代码正在将正确的相对 URL 加载到“NavigateUrl”属性中，但是当通过 QTip 呈现 href 标记时，有时会修改 URL（即通常在URL 结构已被剥离）。修改似乎是完全随机的。

如果我使用“~/fantasy-football/nfl/free/rankings/wide-receiver.aspx”，“nfl”部分将被剥离，链接生成为：“http://site/fantasy-football/free/rankings /wide-receiver.aspx"

但如果我稍微改变它，它就可以工作。例如，“~/fantasy-football/nfl2/free/rankings/wide-receiver.aspx”正确转换为：“http://site/fantasy-football/nfl2/free/rankings/wide-receiver.aspx” .

如果我在页面本身上做同样的事情（不使用 JQuery），地址就被正确解析了。

jQuery

```
 // Notice the use of the each method to gain access to each element individually
  $('.supplementalRankSection img').each(function () {

    $(this).qtip(
        {
          content:
      {
        url: 'qtipsources/suppsources.aspx',
        data: { adp: $(this).parent().prev().prev().prev().attr('value'), cswr: $(this).parent().prev().prev().attr('value'), cbs: $(this).parent().prev().attr('value'), positionCode: positionCode },
        method: 'get'
      },
          position: {
            corner: {
              tooltip: 'leftMiddle',
              target: 'rightMiddle'
            }
          },
          hide: { when: 'mouseout', fixed: true },
          style: { name: 'mystyle', width: 165, height: 60, padding: 0 }
        }); /* close qtip */
  }); /* close each */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:49:14.323

尝试将 url 更改为不带“~”的值，例如：“/fantasy-football/nfl2/free/rankings/wide-receiver.aspx”

# android - DLL 到 Android Eclipse 项目中

> ID：11743864
> 
> 赞同：1
> 
> 时间：2012-07-31T15:40:20.977
> 
> 标签：android, eclipse, dll, shared-libraries

我有一个很大的问题，我不明白，所以如果可以的话，请帮助。

我们有一个用 C# 编写的微控制器库，它已被转换为 DLL 文件。没关系，很好。我必须为微控制器编写一个 Android“遥控器”应用程序，所以我必须将 DLL 包含到我的 Eclipse 项目中，以便能够调用其中的函数。这是不可能的（我做不到:)）所以我正在尝试使用android NDK转换DLL，因为它是产品和.so文件。

我的第一个问题是，这是正确的方法吗？

在我有一个 so 文件后，我想将其包含到我的 Eclipse 项目中，但我无法做到。:(

有谁知道我应该怎么做？

太感谢了，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:52:25.157

您将无法将 C# 中内置的 dll 直接导入任何 Android 应用程序或设备。您可能需要获取所有 C# 代码，将其转换为 C++，然后使用 NDK 对其进行编译，然后创建一个 jni 接口，然后使用 loadLibrary 将 .so 实际包含在正在运行的 java Android 应用程序中。

# c# - C#将多条记录写入一行

> ID：11743866
> 
> 赞同：0
> 
> 时间：2012-07-31T15:40:23.747
> 
> 标签：c#

我正在使用 c# 编写创建一个文本文件。我正在尝试在文本文件的一行中写入 2 条记录。我的数据源来自存储过程的结果集。

这是我拥有的代码。目前我只是逐条记录。我想将一行中的 2 条记录写入文本文件。

例子：

记录 1 记录 6

记录 2 记录 7

记录 3 记录 8

记录 4 记录 9

记录 5 记录 10

记录 11 记录 16

记录 12 记录 17

记录 13 记录 18

记录 14 记录 19

记录 15 记录 20

```
 public bool SalesPriceIndexProcess()
    {
        int page = 1, count = 1;
        FileStream fs = new FileStream(Properties.Settings.Default.Path + SalesPriceDirectoryReportName, FileMode.Create);
        StreamWriter sw = new StreamWriter(fs);
        foreach (ManhattanLUSESalesPriceIndex_Result s in _db.ManhattanLUSESalesPriceIndex())
        {
            if (count == 1)
            {
                SalesPriceHeaderWrite(s.BldgClassCd, ref fs, ref sw);
            }
            string saleDate = s.SaleDt.ToString();
            sw.WriteLine("{0,13:C0}{1,-5} {2,-4} {3,5} {4,3} {5,15:C0}{6} {7,-8} {8,4}"
                , s.SalePriceAmt, s.MultiSplitCd
                , Convert.ToInt16(s.StoriesNbr) + s.LandUseMajorCd
                , (s.LegalBlkId + "-"), s.LegalLot
                , s.TransAssdTotalAmt, s.BldgClassCd.PadRight(2)
                , (saleDate.Length > 6 ? saleDate.Substring(4, 2) + "/" + saleDate.Substring(6, 2) + "/" + saleDate.Substring(2, 2) : "")
                , page    
                );

            PclIdPageIndexDict.Add(s.PclId, page);
            if (count % 5 == 0)
            {
                sw.WriteLine(SalesPriceLineBreak);
            }
            if (count % 145 == 0)
            {
                sw.WriteLine(SalesPricePageBreak);
            }

            count++; //increment by 1
            page = count % 145;
        }
        return true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:29:08.047

```
if(_db.ManhattanLUSESalesPriceIndex().Count() < 5)
{
// throw
}
else
{
    var collectionStore = _db.ManhattanLUSESalesPriceIndex().ToList();
    for(int i = 5; i < collectionStore.Count(); i++)
    {
        var recordN = collectionStore[i-5];
        // do whatever outputting you want
        var recordNPlusFive = collectionStore[i];
        // do whatever outputting you want
        }
    }
} 
```

编辑代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:51:49.580

您将需要将最后 5 行存储在队列中。在你写下你的台词的地方，你需要说一些类似的话：

```
while(!eof) {
  for (int i=0; i<5; i++) {
    queue.enqueue(readline());
  }

  for (int i=0; i<5; i++) {
   write(queue.dequeue());
   write(readline());
   write('\n');
  }
} 
```

您的问题是关于 C# 语法还是行对的逻辑？

# c++ - 使用较旧版本的 MFC 和较新版本的 Visual Studio

> ID：11743871
> 
> 赞同：2
> 
> 时间：2012-07-31T15:40:33.183
> 
> 标签：c++, visual-studio-2010, mfc, visual-studio-2012

我正在使用 Visual Studio 2012 (v11)，它使用的 MFC 版本尚未广泛分发并且与 Windows XP 不兼容。

我在寻找解决方案时偶然发现了这篇文章，但没有成功。我认为这是因为我的计算机上没有 Visual Studio 2010 或更早版本的安装。

[将较新的 Visual Studio 版本与较旧的 MFC 版本一起使用？](https://stackoverflow.com/questions/9016952/use-newer-visual-studio-version-with-an-older-mfc-version)

有没有办法在 Visual Studio 2012 上编译至少与 Windows XP 兼容的 MFC 应用程序，而不存在任何旧版 Visual Studio 安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T02:01:58.253

不幸的是，我不认为你想要的是可能的。[这篇](http://blogs.msdn.com/b/vcblog/archive/2012/06/15/10320645.aspx)文章说，当 Windows 8 正式发布时，今年秋天确实会有 XP 支持。但是[这篇](http://www.microsoft.com/visualstudio/11/en-us/products/compatibility)文章说您还需要安装 Visual Studio 2010。我的猜测是 VS2012 根本不具备支持 XP 的能力，而今年秋季的更新只是将它与 VS2010 联系起来。可能有一些非官方的方法可以做到这一点，但似乎 MS 完全放弃了对 XP 的支持，所以如果你想开发它，你可能需要 VS2010。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:01:01.870

只是一个简短的脚注：我已经能够从 Visual C++ 6.0 成功使用来自 vs2010 的更新的 MFC 和更新的编译器。这需要大量的内脏和交换，但至少以这种方式是可能的。当然，我还没有反过来测试它，但看起来你应该能够，只是不要指望它能完美地工作。此外，由于 Visual Studio 可以通过扩展进行大量自定义，您可能可以对“热交换”库等进行扩展。但我向您保证，使用 2008 更容易，它并没有丢失太多，尤其是现在有了 MS 推出的功能服务包，以提供诸如色带、tr1 等更新的东西。除非我真的想要更新的 MFC 等，否则我还没有看到转移到 2010 或 2012 的理由。我不，尝试过，讨厌过，留在 2008 年。

# activeadmin - 带有 ActiveAdmin 的 CopyCopter 会收到大量超时错误。

> ID：11743872
> 
> 赞同：0
> 
> 时间：2012-07-31T15:40:37.017
> 
> 标签：activeadmin, copycopter

我正在使用带有 ActiveAdmin 的 CopyCopter。我在消息中收到以下超时错误，并且管理员端像糖蜜一样移动。为什么 Copycopter 甚至会从 ActiveAdmin 视图中收到消息？我错过了握手的哪一部分？

```
14 matches for "Copycopter" in buffer: *run*
     12:** [Copycopter] [P:12387] [T:70108530607720] Timeout::Error: Timeout::Error
     16:** [Copycopter] [P:12387] [T:70108512996560] Downloaded translations
     22:** [Copycopter] [P:12387] [T:70108512996560] Timeout::Error: Timeout::Error
     38:** [Copycopter] [P:12387] [T:70108512996560] Timeout::Error: execution expired
     43:** [Copycopter] [P:12387] [T:70108512996560] Timeout::Error: Timeout::Error
     55:** [Copycopter] [P:12387] [T:70108512996560] Downloaded translations
     60:** [Copycopter] [P:12387] [T:70108512996560] Timeout::Error: Timeout::Error
     72:** [Copycopter] [P:12387] [T:70108512996560] Downloaded translations
     79:** [Copycopter] [P:12387] [T:70108512996560] Timeout::Error: execution expired
    191:** [Copycopter] [P:12387] [T:70108512996560] No new translations
    196:** [Copycopter] [P:12387] [T:70108512996560] Timeout::Error: Timeout::Error
    204:** [Copycopter] [P:12387] [T:70108512996560] Timeout::Error: execution expired
    244:** [Copycopter] [P:12387] [T:70108512996560] Downloaded translations
    249:** [Copycopter] [P:12387] [T:70108512996560] Timeout::Error: Timeout::Error 
```

上面一些消息的更多上下文：

```
Started GET "/assets/active_admin/nested_menu_arrow_dark.gif" for 127.0.0.1 at 2012-07-31 10:36:34 -0400
Served asset /active_admin/nested_menu_arrow_dark.gif - 200 OK (7ms)

Started GET "/admin/my_page" for 127.0.0.1 at 2012-07-31 10:36:50 -0400
** [Copycopter] [P:12387] [T:70108512996560] Timeout::Error: execution expired
Processing by Admin::MyPageController#index as HTML
  AdminUser Load (0.3ms)  SELECT "admin_users".* FROM "admin_users" WHERE "admin_users"."id" = 1 LIMIT 1
  Rendered /Users/cmmagid/.rvm/gems/ruby-1.9.3-p125@rails32/gems/activeadmin-0.4.4/app/views/active_admin/page/index.html.arb (40.4ms)
Completed 200 OK in 48ms (Views: 43.1ms | ActiveRecord: 0.3ms)
** [Copycopter] [P:12387] [T:70108512996560] Timeout::Error: Timeout::Error

Started GET "/assets/active_admin.css?body=1" for 127.0.0.1 at 2012-07-31 10:37:01 -0400
Served asset /active_admin.css - 304 Not Modified (4ms) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:56:46.573

Copycopter should not be messaged from the views. The client works by forking a process and contacting Copycopter every 300 seconds. That number is configurable in the `polling_delay` setting:

[https://github.com/copycopter/copycopter-ruby-client/blob/master/lib/copycopter_client/configuration.rb](https://github.com/copycopter/copycopter-ruby-client/blob/master/lib/copycopter_client/configuration.rb)

Maybe the logs above look like Copycopter is part of the app's GET requests because Copycopter's output is being mixed into the logs at funny times.

The `Timeout::Error` I assume is a problem on the `copycopter-server` side. How is the server being run? Is it on Heroku with one dyno and the app is going to sleep after 20 or 30 seconds of inactivity? That would be my guess since it is occasionally downloading the translations according to the logs:

`Downloaded translations 249`

# java - Java 首选项本地安全存储

> ID：11743877
> 
> 赞同：1
> 
> 时间：2012-07-31T15:40:47.377
> 
> 标签：java, encryption, login

我正在寻找一种在 Java 客户端应用程序中存储密码的**安全过程。**我将使用[Preferences API](http://docs.oracle.com/javase/7/docs/api/java/util/prefs/Preferences.html)来存储数据客户端。

我希望我的客户能够存储登录信息（登录名和密码）以加快下次登录。我不想保持密码清晰，所以我会加密它。客户端/服务器通信是通过 SSL 建立的，所以我可以在服务器端存储密钥。

我的第一个建议是，在成功登录时，服务器会向客户端发送一个密钥来加密他的密码然后存储它。然后在下一个会话打开时，客户端将他的最后一个会话 id 发送回服务器，服务器通过解密密钥进行回答。

这可以使用私钥/公钥或仅使用一个密钥。

我认为它不安全，因为会话 ID 将被清楚地存储，因此任何人都可以解密密码......

任何命题，都必须有一个经典的过程。

提前致谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:47:29.823

没办法，真的。您希望计算机记住一个秘密，这样用户就不必与系统交互来进行身份验证。您可以加密秘密并自动解密，但这仍然可以通过机器上的信息来实现。有权访问本地存储的攻击者将能够回放您实施的任何方案并检索密码。

一种妥协是钥匙串系统，其中所有存储的用户密码都由用户在登录时产生的主密码加密，因此他只需要记住一个。但这超出了单个应用程序的范围。

# specflow - 我可以在 Specflow 中重用场景吗？

> ID：11743879
> 
> 赞同：4
> 
> 时间：2012-07-31T15:40:56.070
> 
> 标签：specflow

我有一个像下面这样的 Specflow 场景

```
Scenario: I Shoot a gun
When I pull the trigger
Then It should expel a bullet from the chamber 
```

我想要的是像下面的代码一样重用这个场景

```
Scenario: I Shoot a gun till there are no bullets left
    Given I have a fun with 2 bullets in
    And I Shoot a gun
    And I Shoot a gun
    Then There should be no bullets left in the gun 
```

此刻我必须重复场景中的所有步骤我开枪，如下所示

```
Scenario: I Shoot a gun till there are no bullets left
     Given I have a fun with 2 bullets in
 When I pull the trigger
 Then It should expel a bullet from the chamber
 When I pull the trigger
 Then It should expel a bullet from the chamber
     Then There should be no bullets left in the gun 
```

在上面的这种情况下，我只节省了 2 个步骤，但在我的实际应用程序中，在某些情况下，我节省了大约 20 多个步骤的重写。我相信能够调用 Scenario 可以更容易阅读，而不必担心隐藏的步骤。

这在 Specflow 中可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:30:19.810

因为我想不出你想多次重复使用完全相同的测试的原因，所以我假设你想用不同的参数重复使用场景。这可以通过使用场景大纲和示例来完成：

```
场景大纲：人员提供地址
    鉴于我在地址页面上
    我已经在邮政编码字段中输入了 /zipcode/
    我已经在 house_number 字段中输入了 /number/
    当我按下一步时
    然后我应该被重定向到确认页面
例子：
    | 邮政编码 | 号码 |
    | 第666章 1 |
    | 第666章 2 |
    | 第666章 3 |
    | 555 | 2 |

```

（“/zipcode/”和“/number/”中的 / 应该是 '<' 和 '>' 符号）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T03:42:29.097

据我了解，您希望能够说：

```
Scenario: I Shoot a gun till there are no bullets left
    Given I have a fun with 2 bullets in
     When I shoot the gun 2 times
     Then There should be no bullets left in the gun 
```

您可以从另一个步骤中调用步骤。*您可以在“当我开枪 2 次”*的步骤定义中看到这一点：

```
[When(@"I shoot the gun (*.) times")]
public void WhenIShootTheGunNTimes(int times)
{
    // Fire the gun the specified number of times.
    for ( int i = 0; i < times; i++ )
    {
        // Call the other two steps directly in code...
        WhenIPullTheTrigger();
        ThenItShouldExpelABulletFromTheChamber();
    }
} 
```

它只是按照您在小黄瓜中指定的次数调用其他步骤。我选择直接在 C# 中调用这些方法。[您也可以使用此处](https://github.com/techtalk/SpecFlow/wiki/Calling-Steps-from-Step-Definitions)指定的小黄瓜间接调用它们。

# matlab - Matlab plot：当x改变时自动更新对应的y

> ID：11743882
> 
> 赞同：1
> 
> 时间：2012-07-31T15:41:06.503
> 
> 标签：matlab

我想用 X 和 Y 绘制，当我更新 X 的范围时，向量大小会改变，所以需要像这样再次分配 Y：

`>> y = sin(x)`

如果我不这样做，我通常会得到：

```
>> plot (x,y)
Error using plot
Vectors must be the same lengths. 
```

所以我想知道，如果有一种方法可以自动完成

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:59:21.220

你可以做`y`一个函数（句柄），

```
y = @(x)sin(x)
plot (x,y(x),x2,y(x2),x3,y(x3),x4,y(x4)) 
```

当然，有了这么简单的功能，你也可以坚持下去`sin`，即

```
plot (x,sin(x),x2,sin(x2),x3,sin(x3),x4,sin(x4)) 
```

您也可以组合该`plot`命令以进一步简化调用：

```
plotsin = @(x)plot(sin(x)); 
```

这样你就可以打电话

```
plotsin(x); 
```

对于任何输入`x`

# c - 为什么 strcpy() 也复制 \n？我可以摆脱它吗？

> ID：11743884
> 
> 赞同：1
> 
> 时间：2012-07-31T15:41:09.433
> 
> 标签：c, arrays, printf, strcpy

我调试了一个函数，它正在工作。所以，是的，自学 C 似乎进展顺利。但我想让它变得更好。也就是说，它读取这样的文件：

```
want 
to 
program
better 
```

并将每一行单独的字符串放入一个字符串数组中。然而，当我把东西打印出来时，事情变得很奇怪。据我所知， strcpy() 应该只复制一个字符串，直到 \0 字符。如果这是真的，为什么下面要打印字符串 want 和 \n？就像 strcpy() 也复制了 \n 并且它挂在那里。我想摆脱它。

我复制文件的代码如下。我没有包括整个程序，因为我认为这与正在发生的事情无关。我知道问题出在这里。

```
void readFile(char *array[5049]) 
{
    char line[256]; //This is to to grab each string in the file and put it in a line. 
    int z = 0; //Indice for the array

    FILE *file;
    file = fopen("words.txt","r");

    //Check to make sure file can open 
    if(file == NULL)
    {
        printf("Error: File does not open.");
        exit(1);
    }
    //Otherwise, read file into array  
    else
    {
        while(!feof(file))//The file will loop until end of file
        {
           if((fgets(line,256,file))!= NULL)//If the line isn't empty
           {
             array[z] = malloc(strlen(line) + 1);
             strcpy(array[z],line);
             z++;
           }    
        }
    }
    fclose(file);
} 
```

所以现在，当我执行以下操作时：

```
 int randomNum = rand() % 5049 + 1;

     char *ranWord = words[randomNum];
     int size = strlen(ranWord) - 1; 
     printf("%s",ranWord);
     printf("%d\n",size);
     int i; 
     for(i = 0; i < size; i++)
     {
          printf("%c\n", ranWord[i]);
     } 
```

它打印出来：

```
these 
6
t
h
e
s
e 
```

它不应该打印出以下内容吗？

```
 these6
 t
 h
 e
 s
 e 
```

所以我唯一能想到的是，当我将字符串放入数组时，它也将 \n 放入其中。我怎样才能摆脱它？

一如既往，怀着敬意。极客欧米茄

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T15:45:27.250

`fgets`也读入`\n`，它是您输入文件的一部分。如果您想摆脱它，请执行以下操作：

```
int len = strlen(line);
if (len > 0 && line[len-1] == '\n') line[len-1] = '\0'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:55:59.640

例如，当您阅读第一行时，您实际阅读的是“want\n”，因为换行符是该行的一部分。所以你得到“想要\n\0”。其他行也是如此（最后一行除外，除非您的文件最后有一个空行）。

# android - 检测哪个事件完成活动

> ID：11743890
> 
> 赞同：0
> 
> 时间：2012-07-31T15:41:26.777
> 
> 标签：android

如何检测导致调用活动完成/停止的事件。在按下后退按钮、按下主页键的情况下，用户从通知栏导航。当活动被调用停止时，我如何检测这三种情况。（ICS）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:46:20.343

如果用户使用返回键离开，`onDestroy()`则将调用该方法。

但我不确定是否可以区分最后两种情况（主页键和通知）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:37:04.823

您可以覆盖 View 的 onKeyDown 方法，并在那里捕获返回和主页按钮以及其他按钮。你应该记得返回 super.onKeyDown(keyCode, event); 在您在某处标记按下了什么键之后。这样，默认操作将继续。

重要的是在您的视图上调用 requestFocus() 。在其他情况下，它不会收到任何按键，也不会调用您的任何回调。

您应该能够知道 back 被按下，home 被按下或其他东西超出了您的活动。那是没有检测到回家或回家并调用 Activity.onStop() 的时候。我希望你正在寻找这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:12:25.313

您应该检查以下链接并下载示例项目

[http://developer.android.com/training/basics/activity-lifecycle/index.html](http://developer.android.com/training/basics/activity-lifecycle/index.html)

# google-app-engine - Google App Engine (java) 的集成测试

> ID：11743894
> 
> 赞同：11
> 
> 时间：2012-07-31T15:41:39.720
> 
> 标签：google-app-engine, testing, integration-testing

我正在尝试为我的 GAE/j 应用程序开发一些有效的集成测试。我熟悉[https://developers.google.com/appengine/docs/java/tools/localunittesting](https://developers.google.com/appengine/docs/java/tools/localunittesting) - 这些工具非常适合小型单元测试。我现在对开发测试实际 Web 请求的集成测试很感兴趣。例如，我想测试 web.xml 是否将 servlet 和过滤器映射到预期的 URL，并测试我的 JSP 是否生成了我预期的内容。

我的目标是在 JVM 中建立一个本地开发服务器，我可以向它发起请求。不过，我对其他集成策略持开放态度；正如我上面所说，我只想有效地测试 JSP 生成和其他请求级功能。

我已经设法使用 DevAppServerFactory 在同一个 JVM 中启动开发服务器。但是，它生成的 DevAppServer 似乎使用了与主 JVM 不同的类加载器。这使得测试更具挑战性——我不能使用任何本地单元测试 Local*TestConfig 类来控制该服务器的行为。同样，我不能“滚动我自己的”钩子来通过例如静态来修改行为，因为我可以在测试工具中改变的静态与 DevAppServer 正在查看的静态不同。这使得跳过对当前测试不重要的功能（例如，需要登录）、注入失败、注入模拟等变得具有挑战性。这确实限制了我测试代码的完整和有效程度。

我发现网络上真正缺乏与 App Engine 进行集成测试的文档。我敢肯定有人以前做过这个……有什么技巧或资源可以分享吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:59:25.660

基本上，你需要做两件事：

1.  添加两个 servlet（或其他），**它们必须仅在 testing 期间启用**，它允许您远程调用帮助程序的 setup 和 teardown。
2.  让您的 servlet 引擎以*完全*单线程的方式处理请求。这是必需的，因为出于某种原因，Google 提供的 Helper 类仅在当前线程中生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-12T12:21:41.533

我同意这个问题没有得到很好的记录。
我设法编写了一个端到端测试，将服务器作为黑盒启动并发送 HTTP 请求。

它是这样工作的：

```
package com.project.org;

import static org.junit.Assert.assertEquals;
import java.io.File;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import com.google.appengine.api.urlfetch.HTTPResponse;
import com.google.appengine.api.urlfetch.URLFetchServiceFactory;
import com.google.appengine.tools.development.testing.BaseDevAppServerTestConfig;
import com.google.appengine.tools.development.testing.DevAppServerTest;
import com.google.appengine.tools.development.testing.DevAppServerTestRunner;
import com.google.appengine.tools.development.testing.LocalServiceTestHelper;

@RunWith(DevAppServerTestRunner.class)
@DevAppServerTest(HelloWorldTest.TestConfig.class)
public class HelloWorldTest {

  public class TestConfig extends BaseDevAppServerTestConfig {

    @Override public File getSdkRoot() {
      // You may need to tweak this.
      return new File("../../appengine-java-sdk-1.9.15");
    }

    @Override public File getAppDir() {
      return new File("war");
    }

    @Override
    public List<URL> getClasspath() {
      // There may be an easier way to do this.
      List<URL> classPath = new ArrayList<>();
      try {
        String separator = System.getProperty("path.separator");
        String[] pathElements = System.getProperty("java.class.path").split(separator);
        for (String pathElement : pathElements) {
          classPath.add(new File(pathElement).toURI().toURL());
        }
      }
      catch (MalformedURLException e) {
        throw new RuntimeException(e);
      }
      return classPath;
    }
  }

  private final LocalServiceTestHelper testHelper;
  private final String port;

  public HelloWorldTest() {
    testHelper = new LocalServiceTestHelper();
    port = System.getProperty("appengine.devappserver.test.port");
  }

  @Before public void setUpServer() {
    testHelper.setUp();
  }

  @After public void tearDown() {
    testHelper.tearDown();
  }

  @Test public void testHelloWorld() throws Exception {
    URL url = new URL("http://localhost:" + port + "/hello");
    HTTPResponse response = URLFetchServiceFactory.getURLFetchService().fetch(url);
    assertEquals(200, response.getResponseCode());
    assertEquals("Hello world!", new String(response.getContent(), "UTF-8"));
  }
} 
```

* * *

现在我遇到的问题是，如果您有两个这样的测试，每个测试都单独通过，您就不能在同一个二进制文件中运行它们。[该文件](https://code.google.com/p/googleappengine/source/browse/trunk/java/src/main/com/google/appengine/tools/development/testing/DevAppServerTestHelper.java?r=219)第 37 行的异常被抛出：

> IllegalStateException("Dev Appserver 已经在运行。")

不知道如何解决这个问题。

# png - javafx，alpha通道不适用于窗口标题

> ID：11743898
> 
> 赞同：2
> 
> 时间：2012-07-31T15:41:53.010
> 
> 标签：png, javafx-2, alpha-transparency

我有一个带有 alpha 通道的小图像，当它在窗口标题栏上呈现时，呈现出一种“框架”效果。
![带框的图标](../Images/95c331667c74e792fb6ad560c4b45cf4.png)

这不是图像的问题，因为使用 swing 我可以正确渲染它：

![在此处输入图像描述](../Images/eed5a0b9bc9c3056cd0841f6462e4441.png)

第一种情况的代码是：

```
 BorderPane bp = new BorderPane();
    primaryStage.setScene(new Scene(bp));
    Image image = new Image(getClass().getResourceAsStream("icon.png"));
    primaryStage.getIcons().add(image); 
```

工作示例是用良好的旧摇摆生成的：

```
 ImageIcon ii = new ImageIcon(getClass().getResource("icon.png"));
    setIconImage(ii.getImage()); 
```

我的想法是我错过了一些高级 javafx 图像设置，但我不知道这个缺少的设置是什么。

跟随png图像：
![图像.png](../Images/5050604a8e58c6f340428c7df5f7fa66.png)

操作系统：win 7、JavaFX 2.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:34:51.560

不幸的是，你遇到了一个错误。我已将其归档为[http://javafx-jira.kenai.com/browse/RT-23859](http://javafx-jira.kenai.com/browse/RT-23859)

随时向该错误添加您的评论或投票。

# pdf - pdf.js 插件可以在 web/localhost 上运行，那么本地机器呢？

> ID：11743899
> 
> 赞同：0
> 
> 时间：2012-07-31T15:41:53.040
> 
> 标签：pdf, pdf.js

PDF.js（web-canvas-pdf 渲染插件）在 web/localhost 上运行良好，并且似乎无法在本地机器上运行。我的项目必须以 DVD 形式交付。那么，它在本地机器/DVD 中根本不起作用吗？或者是否有任何解决方法可以使 pdf.js 插件与 DVD 中的本地计算机一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:05:03.100

这取决于浏览器。从 github查看[README 。](https://github.com/mozilla/pdf.js/blob/master/README.md)

从标有“获取代码”的部分：

> 您需要启动本地 Web 服务器，因为某些浏览器不允许为 file:// url 打开 PDF 文件。

如果你可以在 DVD 中包含 Python，那么你可以运行一个网络服务器

```
python -m SimpleHTTPServer 
```

# javascript - Stop Safari 6 JS Debugger From Being So Verbose

> ID：11743900
> 
> 赞同：8
> 
> 时间：2012-07-31T15:41:59.220
> 
> 标签：javascript, debugging, safari

I'm finding the Safari 6 debugger to be extremely verbose and pauses execution of JS for every minor exception. Does anyone know how to disable this?

Example:

*   Open web inspector in Safari 6
*   Visit [http://www.google.com/mobile/](http://www.google.com/mobile/)

Notice how even if you were in the JS console, you'd be switched into debug view to see the error. This is not very good and slows debugging down considerably.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-31T16:17:03.867

to disable the the breaks, you have to go to "**Breakpoints** (CTRL + 7)" and then disable "**All Uncaught Exceptions**". This should do the trick.

But i myself, find that the console is really slow, it has a delay until it shows the "console.log()" messages. This is quite annoying.

# asp.net-mvc - 错误状态：“内部服务器错误”。错误代码：500 - jqGrid ASP.NET MVC

> ID：11743904
> 
> 赞同：1
> 
> 时间：2012-07-31T15:42:08.917
> 
> 标签：asp.net-mvc, entity-framework, jqgrid, jqgrid-asp.net

我正在使用 jqgrid 模态表单来添加和编辑表格的行。我正在使用实体框架和数据库优先方法从现有数据库创建模型。当我添加或编辑行时，行被正确添加或编辑并正确保存在数据库中，当我检索添加或编辑的行并在 jqGrid 中查看时，它们会正确显示。但是，唯一的问题是当我添加或编辑时，它会抛出***错误状态：“内部服务器错误”。错误代码：模态表单中的 500***。

任何人都知道为什么会发生这种情况？由于添加或编辑正常进行，有没有办法可以忽略此错误消息并使其根本不显示？

任何帮助是极大的赞赏！

**编辑：**

```
public ActionResult Create(string oper, string id, Employee employee)
{
try
{
 if (oper == "add")
 {
   if (ModelState.IsValid)
   {
    db.Employees.Add(employee);
    db.SaveChanges();
    return RedirectToAction("Index");   
   }
 }
 if (oper == "edit")
 {
  if (ModelState.IsValid)
  {
    db.Entry(employee).State = EntityState.Modified;
    db.SaveChanges();
    return RedirectToAction("Index");
  }
 }
  if (oper == "del") 
  {
    Employee employees = db.Employees.Find(Int32.Parse(id));
    db.Employees.Remove(employees);
    db.SaveChanges();
    return RedirectToAction("Index");
  }
}
catch (InvalidOperationException ex)
{
}
catch (Exception e)
{
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:49:42.110

感谢大家的所有建议。我弄清楚我做错了什么。实际上，问题不在于数据格式不正确或代码未命中，问题在于我将更改保存到数据库后，这就是为什么它没有被异常块捕获。

将更改保存为 [db.SaveChanges()] 后，我将重定向到索引操作。这就是问题所在。我正在重定向到错误的索引操作。此 Index 操作中的代码尝试返回一些为 null 的值，因此引发 ArgumentNullException 并显示 YSOD。

注意：我能够使用事件查看器发现 ArgumentNullException。在 Run 和 Goto Windows Logs - Application 中键入 Event Viewer。您将能够看到您的应用程序的所有警告。打开警告，转到常规选项卡，您将能够看到抛出了什么样的异常。希望这可以帮助有需要的人。

# php - 调用单例类时找不到类 PDO

> ID：11743910
> 
> 赞同：0
> 
> 时间：2012-07-31T15:42:28.800
> 
> 标签：php, static, pdo, singleton

谁能告诉我什么可能导致这个错误“致命错误：找不到类 PDO”

当我这样调用单例类时：`$db = db::krijgInstantie();`

我使用 mvc 设计，这个错误很奇怪，因为我对另一个站点使用相同的代码

```
public static function krijgInstantie()
    {
        if (!self::$instantie)
        {
            $config = config::krijgInstantie();
            $db_type = $config->config_waarden['database']['db_type'];
            $hostnaam = $config->config_waarden['database']['db_hostnaam'];
            $dbnaam = $config->config_waarden['database']['db_naam'];
            $db_wachtwoord = $config->config_waarden['database']['db_wachtwoord'];
            $db_gebruikersnaam = $config->config_waarden['database']['db_gebruikersnaam'];
            $db_poort = $config->config_waarden['database']['db_poort'];

        self::$instantie = new PDO("$db_type:host=$hostnaam;port=$db_poort;dbname=$dbnaam",$db_gebruikersnaam, $db_wachtwoord);
            self::$instantie-> setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        }
        return self::$instantie;
    } 
```

谢谢，理查德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:44:24.080

您的 PHP 安装缺少 PDO 模块。检查您的 PHP.ini。

另见： http: [//php.net/manual/en/pdo.installation.php](http://php.net/manual/en/pdo.installation.php)

# jquery - jquery jqgrid 隐藏列代码

> ID：11743916
> 
> 赞同：0
> 
> 时间：2012-07-31T15:42:42.433
> 
> 标签：jquery

我已经开始在我的 asp.net 应用程序中使用 jqgrid。

ASP.NET, C#

我想知道如何通过后面的代码显示/隐藏列。

我有这个：

我有一个用户首选项表，我将在表中存储用户网格列首选项。

现在基于这个偏好，我想在网格中显示/隐藏我的列。

这可以通过 jquery jgrid 实现吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T06:54:56.813

```
JQGrid1.Columns.FromDataField("ColumnDataField").Visible = false; 
```

# android - ProgressDialog 没有出现

> ID：11743922
> 
> 赞同：0
> 
> 时间：2012-07-31T15:42:54.187
> 
> 标签：android, progressdialog

我`ProgressDialog`的没有显示。

这是代码：

```
et.setOnEditorActionListener(new TextView.OnEditorActionListener() {
        public boolean onEditorAction(TextView v, int actionId,
                KeyEvent event) {
            if (actionId == EditorInfo.IME_ACTION_SEARCH) {
                performSearch();
                return true;
            }
            return false;
        }

        private void performSearch() {
            ProgressDialog pd = null;
            pd = ProgressDialog.show(MainActivity.this, "Buscando...",
                    "Buscando " + et.getText() + " en GuiaColor");
            lv.setAdapter(new SearchAdapter(MainActivity.this, handler
                    .search(et.getText().toString(), 20)));
            pd.dismiss();
        }
    }); 
```

它工作得很好，唯一的问题是对话框没有出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:54:13.073

尝试以下代码在后台线程中进行查询，并在任务完成后关闭对话框：

```
 private void performSearch() {
        final ProgressDialog dialog = ProgressDialog.show(MainActivity.this, "Buscando...", "Buscando " + et.getText() + " en GuiaColor");

        new Thread() {
            public void run() {
                lv.setAdapter(new SearchAdapter(MainActivity.this, handler.search(et.getText().toString(), 20)));
                dialog.dismiss();
            }
        }.start();
    } 
```

# classpath - RAD 抱怨项目缺少库文件，但它们存在于 .classpath 中

> ID：11743929
> 
> 赞同：2
> 
> 时间：2012-07-31T15:43:15.850
> 
> 标签：classpath, rad

在我的 RAD 中，通常当我启动它并转到我的工作区时，我看到一些项目有一个红色的错误十字符号。通常消息是缺少某些库等。但是通过转到每个项目的构建路径，我可以看到这些库存在于构建路径中。

这个问题我一直在通过删除 RAD 抱怨的库、构建项目、添加库并再次构建项目来解决。然后错误消失了。似乎 RAD 不知何故失去了对图书馆的追踪。然而，.classpath 文件显示该库存在，即使 RAD 抱怨。

是否有永久解决此问题的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T01:10:04.970

这是一个已知的 RAD 问题，并且已多次报告。转到每个“损坏的”项目，右键单击并选择“JavaEE -> Update EAR Libraries”，错误应该会消失。关闭和重新打开有问题的项目，然后清理和重建工作区，也会有所帮助。

# php - URL 未在 CodeIgniter 中重定向

> ID：11743934
> 
> 赞同：1
> 
> 时间：2012-07-31T15:43:44.020
> 
> 标签：php, codeigniter

我有一个新网站，我在其中安装了 codeigniter（最新）。现在进行测试，我的默认页面 www.example.com 中有一个表单。我已经在 .htaccess 的帮助下从 url 中删除了 index.php 。现在，如果我提交表单，我已将其重定向到 www.example.com/controller_name/function_name。正如我所写，该 URL 显示完美

```
<form action="<?php echo base_url(); ?>controller_name/function_name" method="post" > 
```

另外，我的 base_url 为[http://www.example.com](http://www.example.com)。

现在的问题是，在重定向到 www.example.com/controller_name/function_name 后，它会引发 no page found 错误。但是我已经写`echo "test";`在那个函数里了。

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:15:42.957

对于我的设置 - 它还修改了 htaccess 以删除 index.php - 我必须将我的配置文件设置为

```
$config['index_page'] = '';
$config['base_url'] = ''; 
```

我正在使用请求 URI：

```
$config['uri_protocol'] = 'REQUEST_URI'; 
```

在更改这些内容之前，我还没有找到一个页面。试试这个，看看它是否适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:20:40.943

问题是您如何删除 index.php

我敢肯定，如果您尝试发布到`<?php echo base_url(); ? >index.php/controller_name/function_name`，它将起作用。

你必须重新编辑你的 .htaccess

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T18:25:55.217

这是我的设置的样子：

**配置文件**

```
$config['index_page'] = '';
$config['base_url'] = '';
$config['uri_protocol'] = 'REQUEST_URI'; 
```

**.htaccess**

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1/ [L,QSA] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T18:40:42.080

设置新的 CodeIgniter 安装对于第一次安装的人来说可能是个问题，但我可以向你保证，这比你想象的要容易。

也许我为十一提供者的 CodeIgniter workink 完成的教程可以帮助你： [www.eleven2.com/forum/topic/247-codeigniter-framework/](http://www.eleven2.com/forum/topic/247-codeigniter-framework/)

请检查您是否按照教程中的说明正确设置了 CodeIgniter；如果一切正常，我们必须在 php 配置或其他方面发现问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T11:51:24.917

试试这个

```
<form action="<?php echo base_url(); ?>/controller_name/function_name" method="post" > 
```

或者只是你可以使用：

```
<form action="<?php echo base_url(controller_name/function_name); ?>" method="post" > 
```

该死的肯定会起作用的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-13T16:51:25.637

有同样的问题，使用 CI 3.1.5。使用此设置修复它。

**配置文件**

```
$config['index_page'] = 'index.php';    
$config['base_url'] = '-your domain-';    
$config['url_suffix'] = ''; 
```

**.htaccess**

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

将 .htaccess 文件放在“应用程序”文件夹之外

# php - 表单提交对话框

> ID：11743936
> 
> 赞同：1
> 
> 时间：2012-07-31T15:43:44.950
> 
> 标签：php, javascript

我有一个基本表单，它要求提供某些信息，然后在实际将其提交到单独的 php 文件以通过电子邮件将表单提交给我之前使用 javascript 验证表单但是，在成功提交表单后，它会转到空白页，然后是谢谢你弹出窗口出现。如何设置它以便点击提交按钮不会转到新页面，而只会在当前页面上显示弹出窗口？

我填写表格的代码是：

```
<form action="send_group.php" method="post" onsubmit='return formValidator()'>
//Asks to input information
    <input type="submit" value="Submit" />
</form> 
```

我的 PHP 代码是：

```
<?php
$webmaster_email = "email@email.com"; //E-mail the message will be sent to

$info = $_REQUEST['info'] ;
$info1= $_REQUEST['info1'] ;
$info2= $_REQUEST['info2'] ;
$info3= $_REQUEST['info4'] ;

mail( "$webmaster_email", "Information Form Submission",
    "Info: $info
Info1: $info1
Info2: $info2
Info3: $info3" );

echo "<script type='text/javascript'>\n";
echo "alert('Thank you for your booking request. We will get back to you as soon as possible.');\n";
echo "</script>";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:47:36.760

您必须使用 AJAX 请求。因此，您在提交按钮上绑定了一个 onclick 事件，然后发送一个 AJAX 请求，当 AJAX 请求成功时，您将显示您的响应（坏与否）。JQuery 对于 AJAX 请求非常强大且简单，请看这里：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T15:48:27.787

您可以使用 AJAX 在后台提交数据，或者更简单的选项将 from 和 php 放入同一个 php 文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T16:07:44.040

好吧，浏览器准确地显示了它从您的 php-script 接收到的内容。

在没有 Ajax 的情况下解决问题的一种方法可能是以下方法：要在处理请求后显示原始页面，请添加例如

```
header("location: your_form_page.php?req=1"); 
```

在成功的情况下，例如

```
header("location: your_form_page.php?req=-1"); 
```

如果 send_group.php 发生错误。GET 参数 req 可用于显示感谢框或错误消息。切换逻辑当然必须已经在 your_form_page.php 中实现，例如

```
if ($_GET['req'] == '1') {
    echo "<script type='text/javascript'>\n";
    echo "alert('Thank you for ...');\n";
    echo "</script>";
} else if ($_GET['req'] == '-1') {
    echo "<script type='text/javascript'>\n";
    echo "alert('Error ...');\n";
    echo "</script>";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T15:47:25.760

脚本成功完成后，您必须使用`location`标头重定向用户

```
header("location: formPage.php?success=1"); 
```

然后在您的原始表单页面上，您可以运行 javascript。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T15:47:32.750

使用 xhrRequest (ajax) 从验证页面检索信息，然后向您的用户显示结果。

# html - 主页在 Firefox 14.0.1 中无法正确显示

> ID：11743941
> 
> 赞同：0
> 
> 时间：2012-07-31T15:44:03.227
> 
> 标签：html, css, firefox

由于某种原因，我的网页在 Firefox 14.0.1 版中无法正确显示。在 IE9、Safari、chrome 中正确显示。我的一个朋友也说他和我有同样的经历。

在 Firefox 中，如果我缩小或布局更改。但随后 YouTube 视频开始涂抹和像素化。我让一个朋友在他们的计算机上检查 Firefox，同样的事情发生了。

[http://www.streetstyles4all.co.uk/images/screen_shot.jpg](http://wwww.streetstyles4all.co.uk/images/screen_shot.jpg)

左上角的屏幕截图显示了页面的加载方式。放大或缩小后显示右上角，上下滚动后显示左下角。

HTML：

有问题的部分的 HTML 是：

```
 <div id="homewallcontainer">

                <div id="homesidenavcontainer">

                <script type="text/javascript" src="http://forms.aweber.com/form/23/850302323.js"></script>
                </div>

                <div id="newsletterblurb">
                <p>
                Learn everything you need to get yourself going in the world of street dance, tips, facts, what to wear, music, videos and more.  Just fill in the form above - simple!
                </p>
                </div>  

                <div id="contentcontainerhome2">
                   <h1>Street Styles 4 All is the place to be for street dance! With classes, DVD's that are sold worlwide, dancers for hire, streetwear...find out why you should choose Street Styles 4 All:
                   </h1>
                            <div id="homess4atrailer">
        <iframe width="466" height="302" src="http://www.youtube.com/embed/QyhgZ6I_DHo" frameborder="0" allowfullscreen></iframe>
        </div>

           </div>

    </div> 
```

CSS是：

```
#homewallcontainer {
background: url("images/wall.png") repeat scroll 0 0 transparent;
height: 542px;
margin-top: -1px;
width: 960px;
}

#homesidenavcontainer {
float: left;
margin-left: 41px;
margin-top: 110px;
width: 253px;
}

#homesidenavcontainer {
float: left;
margin-left: 41px;
margin-top: 110px;
width: 253px;
}

#contentcontainerhome2 {
float: right;
margin-right: 17px;
margin-top: 46px;
width: 528px;
}

#homess4atrailer {
margin-left: 56px;
padding: 38px 0 10px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:34:36.183

首先：您的问题/问题非常不清楚。您没有调整大小的问题，您只是有一个混乱的网站，当您调整大小时“看起来正确”，对吧？这就是你想说的吗？

您的问题是：该站点是由业余爱好者构建的。有很多布局问题，但有一个简单的解决方案：

删除位置：相对；ss4a4.css 中的#indexwrapper，大约第 250+ 行！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:01:03.487

Firefox 出现故障的原因似乎是使用了 HEIGHT 属性。它应用于 2 个 div，在删除 HEIGHT 和 POSITION:RELATIVE 属性后，替换为 FLOATS、MARGINS 和 PADDING 以创建相关部分中所有 div 和嵌套 div 的布局，更正了 firefox 问题。

该网站的那部分是不小心写的！

# android - 如何为小部件声明接收器以处理您自己的广播以及系统广播

> ID：11743942
> 
> 赞同：0
> 
> 时间：2012-07-31T15:44:02.907
> 
> 标签：android, android-widget, widget, broadcastreceiver, appwidgetprovider

假设我想`receiver`为我自己的小部件定义一个，并且我希望它`org.test.mywidget.MY_ACTION`与系统广播一起处理我自己的广播`APPWIDGET_xxx` ，如果我希望它仅在从相同的应用程序包？我尝试了以下 XML 代码，但通过这种方式，该`APPWIDGET_DELETE`操作不再传递给小部件提供程序：

```
 <receiver
        android:name="MyWidgetProvider">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>

        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/my_widget_info" />
    </receiver>
    <receiver
        android:name="MyWidgetProvider"
        android:exported="false">
        <intent-filter>
            <action android:name="org.test.mywidget.FORCE_SMALL_WIDGET_UPDATE" />
        </intent-filter>
    </receiver> 
```

上面的 XML 有我提到的问题（没有传递 DELETED 事件），而且对我来说似乎也不好，因为重新定义了接收器。所以我将所有内容压缩如下：

```
 <receiver
        android:name="MyWidgetProvider">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            <action android:name="org.test.mywidget.FORCE_SMALL_WIDGET_UPDATE" />
        </intent-filter>

        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/my_widget_info" />
    </receiver> 
```

这可行`APPWIDGET_UPDATE`，`APPWIDGET_DELETE` 我自己的广播都已交付，但现在我有一个问题：现在其他应用程序是否能够将带有操作的广播意图交付`org.test.mywidget.FORCE_SMALL_WIDGET_UPDATE`给我的小部件，因为该`android:exported`值`true`默认设置为？也许我错过了一些与这个*导出*值相关的基本概念，所以如果你们中的一些人能让我更好地理解一切，我会很高兴:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:53:47.007

> 如果我希望它仅在从同一个应用程序包发送的情况下处理我自己的广播？

如果操作字符串全部包含在您自己的包中，则您不需要，甚至不需要操作字符串。只需使用将`Intent`Java 类对象作为第二个参数的构造函数，并使用它来发送要被接收者接收的广播。

> 我尝试了以下 XML 代码，但通过这种方式，APPWIDGET_DELETE 操作不再传递给小部件提供程序

那是因为在您的代码中没有`<intent-filter>`引用该操作字符串。

> 现在其他应用程序是否能够通过操作 org.test.mywidget.FORCE_SMALL_WIDGET_UPDATE 向我的小部件传递广播意图，因为 android:exported 值默认设置为 true？

是的。当然，第三方应用程序可以发送`APPWIDGET_UPDATE`广播，甚至`Intent`可以直接破解识别您的组件的内容，您也会收到这些。

我怀疑在你的情况下，正确的答案是简单地实现第二个`BroadcastReceiver`，一个没有 no`<intent-filter>`的，它处理你只想在你的包中的操作。或者，如果您不需要为此使用 a `PendingIntent`，请从 Android 支持包中`BroadcastReceiver`考虑。`LocalBroadcastManager`

# java - 带有 Maven 和 Jenkins 的 Eclipse @NonNull 注释

> ID：11743946
> 
> 赞同：4
> 
> 时间：2012-07-31T15:44:09.297
> 
> 标签：java, eclipse, maven, jenkins, notnull

我想使用来自 Eclipse Juno 的新 @NonNull 注释，但我正在处理的项目基于 Maven 并与 Jenkins 一起部署。

有什么方法可以让我的注释不会破坏其他不使用 Eclipse 和 Jenkins 的开发人员的代码？

PS：方法参数的空值检查甚至不适用于 Eclipse 和 Maven 插件（Maven 插件编译没有问题，但即使使用 @NonNull 注释的方法被调用时使用空参数也不会引发错误）。

PS：看到我的线程已经有几个月了，有什么更好的方法可以用 Maven 获得 NonNull 注释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:59:35.157

有一个 Eclipse [Bug](https://bugs.eclipse.org/bugs/show_bug.cgi?id=366298)用于跟踪将这些注释发布到 Maven Central。

我现在看到的唯一解决方法是手动下载 jar，然后将其发布到您的内部 Maven 存储库。

更新：要在 Maven 构建中使用它，请考虑使用 Eclipse JDT 而不是 javac。[这](http://kthoms.wordpress.com/2011/01/10/using-the-jdt-compiler-in-normal-maven-builds/)可能会有所帮助。

# jquery - 检查输入标签是否输入了文本的选择器是什么？

> ID：11743947
> 
> 赞同：1
> 
> 时间：2012-07-31T15:44:08.857
> 
> 标签：jquery, input, selector

我想获取所有 type=text 的输入，用户没有输入任何内容。到目前为止，我的选择器是：

`$('input[type=text]')`

，但我不知道如何，如果有办法，还要检查选择器中输入的文本。我知道我可以使用 .text() 进行检查，但我想知道是否有办法将其放入选择器本身。我基本上在寻找：

```
$('input[type=text][text != ""]') 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:46:54.650

用户输入的文本在`value`属性中可用，因此您可以使用[Attribute Not Equal](http://api.jquery.com/attribute-not-equal-selector/)选择器：

```
var nonEmptyInputs = $("input[type='text'][value!='']"); 
```

*注意：*我的原始答案使用[:text](http://api.jquery.com/text-selector/)选择器而不是[Attribute Equals](http://api.jquery.com/attribute-equals-selector/)选择器：

```
var nonEmptyInputs = $("input:text[value!='']"); 
```

然而，`:text`它比 Attribute Equals 选择器慢*并且*在 jQuery 1.7 中被弃用，所以第一种语法可能应该是首选。

# android - 使用 MySQL 数据库连接的 Android 登录活动

> ID：11743952
> 
> 赞同：0
> 
> 时间：2012-07-31T15:44:18.450
> 
> 标签：android

我正在做一个关于 android“Android 登录活动与 MySQL 数据库连接”的教程

请查看：[http ://codeoncloud.blogspot.com/search/label/Android](http://codeoncloud.blogspot.com/search/label/Android)

我的网络服务工作正常，但是当我用 ---> 更改清单文件时

```
uses-sdk android:minSdkVersion="8" 
  uses-permission android:name="android.permission.INTERNET" 
```

然后我的模拟器什么也没有显示，控制台结果是：

```
[2012-07-31 20:51:41 - AndroidLoginExample] Automatic Target Mode: using existing emulator 'emulator-5554' running compatible AVD 'testdevice'
[2012-07-31 20:51:41 - AndroidLoginExample] Uploading AndroidLoginExample.apk onto device 'emulator-5554'
[2012-07-31 20:51:42 - AndroidLoginExample] Installing AndroidLoginExample.apk...
[2012-07-31 20:51:46 - AndroidLoginExample] Success!
[2012-07-31 20:51:46 - AndroidLoginExample] \AndroidLoginExample\bin\AndroidLoginExample.apk installed on device
[2012-07-31 20:51:46 - AndroidLoginExample] Done! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:56:37.050

你错过了这部分..应用程序启动器活动可能会丢失

```
 <action android:name="android.intent.action.MAIN">     
  <category android:name="android.intent.category.LAUNCHER"></category>
  </action> 
```

# java - 非活动期后连接超时问题

> ID：11743958
> 
> 赞同：5
> 
> 时间：2012-07-31T15:44:26.560
> 
> 标签：java, spring, hibernate, database-connection, c3p0

我们有一个使用 hibernate 作为 ORM 工具的 api，我们使用 c3p0 作为连接池处理程序。当我们处于负载状态时，我们没有问题。但是，当 api 一天左右处于非活动状态时，我们将遇到“无法获得连接”异常。因此，如果周末没有人使用该 API，我们会在周一早上收到连接错误。

> 原因：java.sql.SQLException：客户端检出连接的尝试已超时。

我们使用mysql作为数据库。在我的研究中，我了解到 mySQL 会在 8 小时左右后使连接失效。连接池可能会向客户端发出过时的连接，因此客户端的连接超时异常。

目前，我们没有在 C3Po 中配置任何连接测试。可以说，如果我在池将连接提供给客户端之前使用 IdleTestPeriod 测试连接。那么如果我的所有连接在某个时间点都未能通过测试会发生什么？是否会从池中删除那些失败的连接并再次生成新的活动连接？

目前，这是我们正在使用的 c3p0 设置。这个问题还有其他可能的原因吗？

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
        <property name="driverClass" value="${----}"/>
        <property name="jdbcUrl" value="${----}"/>
        <property name="user" value="${----}"/>
        <property name="password" value="${------}"/>
        <property name="minPoolSize" value="5"/>
        <property name="acquireIncrement" value="5" />
        <property name="maxPoolSize" value="125" />
        <property name="maxStatements" value="10" />
        <property name="maxIdleTime" value="180" />
        <property name="maxIdleTimeExcessConnections" value="30" />
        <property name="checkoutTimeout" value="3000" />
        <property name="preferredTestQuery" value="SELECT 1" />
    </bean> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T18:04:19.183

因此，您设置了 3 秒（3000 毫秒）的 checkoutTimeout。这就是您看到的异常。客户端只允许等待三秒钟从池中签出连接；如果三秒钟还不够，他们会看到您的异常。

问题是，为什么客户要花这么长时间才能获得连接？通常检查连接是一个非常快的操作。但是如果所有连接都被签出，那么客户端必须等待（缓慢）从数据库中获取连接。

您已将池配置为非常积极地剔除连接。如果超过 maxIdleTimeExcessConnections=30 秒，任何数量超过 minPoolSize=5 的连接都将被销毁。然而，您的池已配置为大规模爆发：maxPoolSize=125。假设您的应用程序安静了一段时间，然后收到来自客户端的大量连接请求。池将很快用完 Connections 并开始获取，在 acquireIncrement=5 的突发中。但是如果突然有 25 个客户端并且池中只有 5 个连接，那么第 25 个客户端在获取连接之前可能会超时并非不可能。

你可以做很多事情。这些调整是可分离的，您可以根据需要混合或匹配。

1.  不那么积极地剔除空闲的“多余”连接，因此一般来说，您的池具有服务突发请求的能力。您可能会完全放弃 maxIdleTimeExcessConnections，并在 maxIdleTime=180 秒不使用后让 Connections 慢慢枯萎。（不利的一面？在不活动期间，更大的资源占用时间更长。）

2.  将 minPoolSize 设置为更高的值，这样池就不太可能看到连接太少的活动爆发。（缺点？更大的永久资源占用。）

3.  从您的配置中删除 checkoutTimeout。c3p0 的默认设置是允许客户端无限期地等待连接。（缺点？也许你更喜欢客户快速报告失败而不是等待可能的成功。）

我认为您观察到的问题与连接测试或 MySQL 超时本身没有太大关系，但这并不意味着您不应该处理这些问题。我会听从 nobeh 关于 MySQL 重新连接问题的建议。（我不是 MySQL 的大用户。）您应该考虑实施连接测试。你有一个preferredTestQuery，所以测试应该相当快。我通常的选择是使用 testConnectionOnCheckin 和 idleConnectionTestPeriod。见[http://www.mchange.com/projects/c3p0/#configuring_connection_testing](http://www.mchange.com/projects/c3p0/#configuring_connection_testing)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:22:03.217

在[MySQL Java Connector中的](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html)**高可用性和集群**部分中，查看属性；特别是和。使用 JDBC 连接 URL 中的属性。他们以前在使用 MySQL、Hibernate 和 C3P0 时帮助过我。希望这会有所帮助。`autoReconnect``autoReconnetForPools`

# gwt - 哪个更高效，使用HashMap或If语句导航

> ID：11743967
> 
> 赞同：1
> 
> 时间：2012-07-31T15:44:48.497
> 
> 标签：gwt, if-statement, hashmap, mvp

我有一个使用 URL 导航和 MVP 模式的 GWT Web 应用程序。对于每个 URL，我都有一个要调用的演示者。我有大约 20 位不同的演示者，要决定呼叫哪一位，我使用的条件如下

```
if (view.equals("vue1")){
   presenter = new presenter1();
}else if(view.equals("vue2")){
   presenter = new presenter2();
}else if(view.equals("vue3") || vue.equals("vue4") || vue.equals("vue5")){
   presenter = new presenter345();
}
... 
```

我尝试了另一种选择，即在应用程序启动时加载 HashMap。该地图包含作为键的视图和作为值的演示者。但它变得复杂，因为我经常有多个键（视图）指向同一个 Presenter。因此，对于上面示例中的最后一个条件，我将执行以下操作：

```
map.put("vue3",new Presenter345);
map.put("vue4",new Presenter345);
map.put("vue5",new Presenter345); 
```

问题 ：

1-哪一个是有效的，知道代码在客户端（JavaScript）？

2-还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:49:41.950

如果你只有20个左右，我真的不会太担心。我会使用 switch 语句，并尝试首先包含最有可能的视图。或者保留 if 语句，然后再次首先测试最可能的条件。但我想一个 hashmap 会给你一个平均 O(1)，而 if 语句或 switch 会给你平均 O(n)

# ruby-on-rails - Rails - find_or_create_by 给出意想不到的结果

> ID：11743968
> 
> 赞同：1
> 
> 时间：2012-07-31T15:44:52.583
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我目前正在为我的数据库播种，下面的部分给了我一些我没想到的结果：

```
 trim.model_years.find_or_create_by_value([
 {value: '2009 (58)'},
 {value: '2009 (09)'},
 {value: '2009 (59)'},
 {value: '2010 (59)'},
 {value: '2010 (10)'},
 {value: '2010 (60)'},
 {value: '2011 (60)'},
 {value: '2011 (11)'},
 {value: '2011 (61)'},
]) 
```

我本来希望这会单独处理每一个，并为记录执行 find_or_create （我从普通的创建方法调整了格式，它只会创建 9 个单独的记录）。

然而，似乎正在发生的是我得到 1 条记录，这是一个包含所有记录的字符串，包括“值：”等。

如何格式化它以允许 9 个单独的记录被 find_or_created？

编辑：非常感谢关于迭代数组的答案 - 我现在似乎到了某个地方，但仍然有一个问题，即不是创建一个记录和附加关联，而是种子文件仍在创建重复记录每个循环。我在下面包含了我修改后的代码：

```
 make = Make.find_or_create_by_value(value: 'Alfa Romeo')
model = make.models.find_or_create_by_value(value: '147')
trim = model.trims.find_or_create_by_value(value: '2.0 Lusso 5d (2001 - 2005)')
values = [
 {value: '2001 (X)'},
 {value: '2001 (Y)'},
 {value: '2001 (51)'},
 {value: '2002 (51)'},
 {value: '2002 (02)'},
 {value: '2002 (52)'},
 {value: '2003 (52)'},
 {value: '2003 (03)'},
 {value: '2003 (53)'},
 {value: '2004 (53)'},
 {value: '2004 (04)'},
 {value: '2004 (54)'},
 {value: '2005 (54)'},
 {value: '2005 (05)'}
]
values.each do |item|
  trim.model_years.where(item).first_or_create
end 
```

当然，有很多这样的块，所有这些都应该重复使用相同的模型年份，但 first_or_create 似乎总是在创建重复项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:53:12.593

通过迭代你的数组：

```
values = [
  {value: '2009 (58)'},
  {value: '2009 (09)'},
  {value: '2009 (59)'},
  {value: '2010 (59)'},
  {value: '2010 (10)'},
  {value: '2010 (60)'},
  {value: '2011 (60)'},
  {value: '2011 (11)'},
  {value: '2011 (61)'},
]

values.each do |item|
  trim.model_years.find_or_create_by_value(item[:value])
end 
```

顺便说一句，Rails Guides 建议使用[`first_or_create`](http://guides.rubyonrails.org/active_record_querying.html#find-or-build-a-new-object)而不是`find_or_create_by`. 使用`first_or_create`您的代码可能如下所示：

```
values.each do |item|
  trim.model_years.where(item).first_or_create
end 
```

对不起，但我不明白你的新问题。这不应该创建重复的记录。它应该为每个模型创建模型年份。像这样的东西：

```
id | model_id | value
=========================
 1 |        1 | 2001 (X)
 2 |        1 | 2001 (Y)
 3 |        1 | 2001 (51)
 4 |        1 | 2002 (51)
 5 |        1 | 2002 (52)
 6 |        2 | 2001 (X)
 7 |        2 | 2001 (Y)
 8 |        2 | 2001 (51) 
```

所以，是的，会有重复的值，但所有的行都是唯一的。如果这不是你想要的，你必须改造你的数据库。

# c++ - C++ 未定义对方法的引用，如果所有内容都转到 .h 怎么办？

> ID：11743974
> 
> 赞同：0
> 
> 时间：2012-07-31T15:45:13.370
> 
> 标签：c++, extern, undefined-reference

我在下面编写的简单 C++ 代码出现编译错误
**“未定义对 'featureExtract()' 的引用”** （在 windows 下使用代码块），

在**`FeaureExtract.h`**

```
#ifndef FEATUREEXTRACT_H_INCLUDED
#define FEATUREEXTRACT_H_INCLUDED

extern void featureExtract();

#endif // FEATUREEXTRACT_H_INCLUDED 
```

在**`FeatureExtract.cpp`**

```
#include "FeatureExtract.h"
void featureExtract()
{
    some code
} 
```

在**`main.cpp`**

```
#include "FeatureExtract.h"
int main()
{
    featureExtract();
} 
```

我已经使用关键字“C++ undefined reference to”搜索了 SO 并阅读了数十个条目（许多是类或 Linux 下的），但我无法解决我自己的问题（我不知道为什么）。
感谢您的任何提示~

在解决这个问题之前，我只好把所有的工作人员都放在FeatureExtract.h中，它可以工作，但似乎不太好。这篇文章（[Why have header files and .cpp files in C++?](https://stackoverflow.com/questions/333889/in-c-why-have-header-files-and-cpp-files)）解释了.h文件的主要优点是“将接口与实现分离”，我想知道将所有接口和实现放在.h文件中是否会有其他效果？

谢谢~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:49:11.710

看起来您没有将两个目标文件链接到最终的二进制文件中。不幸的是，我不熟悉代码块，但请确保将所有`.cpp`文件添加到您的项目中。

另一个不太可能的可能性是两个 cpp 文件之间的名称装饰以某种方式不同。确保您使用 C++ 编译这两个文件，并且该文件不会编译为 C 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:49:31.273

您发布的代码看起来不错。正如 Zeta 所说，所有文件都在同一个项目中吗？

# c++ - 抛出的异常中的文本在哪里？

> ID：11743981
> 
> 赞同：5
> 
> 时间：2012-07-31T15:45:27.040
> 
> 标签：c++, exception

> **可能重复：**
> [如何从捕获的异常中打印消息？](https://stackoverflow.com/questions/5282577/how-to-print-message-from-caught-exception)

抱歉，如果这是基本的或重复的 - 我先进行了几次搜索，但没有找到任何可以回答这个问题的东西。

如果我做一些基本的事情，比如：

```
throw exception("This thing didn't work"); 
```

我在哪里可以看到？该字符串不会显示在输出控制台、堆栈跟踪或与项目关联的任何 .log 文件中。让我想知道为什么如果在任何地方都看不到它，我什至会在那里放一根绳子。我当然可以使用堆栈跟踪来查看它在哪里爆炸，但这违背了首先出现异常的目的。

在 Java 中，当我给它一个字符串时，我会在输出的某处看到该字符串。我只是想知道是否可以在 C++ 中重现这种行为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T15:47:29.397

`std::exception()`有一个名为 的成员函数`what()`。看：

[http://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-html-USERS-3.3/classstd_1_1exception.html](http://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-html-USERS-3.3/classstd_1_1exception.html)

对于类似的东西`std::logic_error`，它会返回您传递给构造函数的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:44:54.293

您必须捕获异常才能看到字符串。*有一个最后的异常处理程序*可能很有用，如下所示：

```
int main(int argc, char **argv)
{
    try {
        ...
    }
    catch(const std::exception& e) {
        std::cout << "Uncaught exception: " << e.what() << std::endl;
    }
} 
```

在 GUI 应用程序中，您可以在主事件循环中使用 catch 语句，并在消息框中显示错误消息。

在事件驱动的非 GUI 应用程序中，您还可以在主事件循环中使用 catch 语句，并将错误消息写入日志文件。

这些方法将确保您看到所有异常。当然，大多数异常应该在它们到达最后的异常处理程序之前被捕获。

# javascript - Adding a custom button in row in jqGrid?

> ID：11743983
> 
> 赞同：0
> 
> 时间：2012-07-31T15:45:34.373
> 
> 标签：javascript, jquery, ajax, jqgrid, client

I want to make a simple table that contains a custom button in a row. When the button is pushed, I want to pop up an 'alert' box. I have read some posts on this, for example: [this post](https://stackoverflow.com/questions/1384685/how-do-you-add-scripts-to-custom-buttons-on-rows-in-jqgrid) and [this other post](https://stackoverflow.com/questions/1299479/adding-a-button-to-a-row-in-jqgrid), and I don't understand why my code is not working. The buttons are drawn, but pushing them has no effect.

I have three attempts described here.

Version 1\. The button click never fires:

```
 $(document).ready(function(){
      jQuery("#simpletable").jqGrid({
         datatype: "local",
        colNames:['A','B','Status'],
        colModel:[
        {name:'A',index:'A'},
        {name:'B',index:'B'},
        {name:'status',index:status}
    ],
        data:[ 
        {'A':2,'B':100,'status':"<button  onclick=\"jQuery('#simpletable').saveRow('1', function(){alert('you are in')});\" >in</button>"},
        {'A':1,'B':200,'status':"<button onclick=\"jQuery('#simpletable').saveRow('2', function(){alert('you are in')});\" >in</button>"},
        ],
        caption: "Demo of Custom Clickable Button in Row",
        viewrecords:true,
        editurl:'clientArray',
    });

   }); 
```

Html Code:

```
<table id="simpletable"></table> 
```

EDIT 8/2/12 -- I've learned some things since my original post and here I describe two more attempts.

Version 2: I use onCellSelect. This works, but it would not allow me to put more than one button in a cell. Additionally, I made the code nicer by using the format option suggested by one of the comments to this post.

```
function status_button_maker_v2(cellvalue, options, rowObject){
    return "<button class=\"ver2_statusbutton\">"+cellvalue+"</button>"
};

jQuery("#simpletablev2").jqGrid({
    datatype: "local",
    colNames:['A','B','Status'],
    colModel:[
    {name:'A',index:'A'},
    {name:'B',index:'B'},
    {name:'status',index:status,editable:true,formatter:status_button_maker_v2}
    ],
        data:[ 
    {'A':2,'B':100,'status':"In"},
    {'A':1,'B':200,'status':"Out"}
        ],

    onCellSelect:function(rowid,icol,cellcontent,e){
    if (icol==2){

        alert('My value in column A is: '+$("#simpletablev2").getRowData(rowid)['A']);
    }else{
        return true;
    }
    },

    caption: "Demo of Custom Clickable Button in Row, ver 2",
    viewrecords:true,
});  //end simpletablev2 
```

Markup:

```
<style>.ver2_statusbutton { color:blue;} </style>
<h3>simple table, ver 2:</h3>
<table id="simpletablev2"></table> 
```

Version 3: I tried to use the solution to [w4ik's post](https://stackoverflow.com/questions/2774018/call-a-function-from-a-button-that-is-created-during-jqgrids-gridcomplete-event?answertab=active#tab-top), using ".on" instead of deprecated ".live". This causes the button click to fire, but I don't know how to retrieve the rowid. w4ik also struggled with this, and he posted that he worked it out, but not how he did it. I can get the last row selected, but this will always refer to the previous row selected because the button is taking priority.

I would prefer this solution if I could get it to work.

```
jQuery("#simpletablev3").jqGrid({
    datatype: "local",
    colNames:['A','B','Status'],
    colModel:[
    {name:'A',index:'A'},
    {name:'B',index:'B'},
    {name:'status',index:status,editable:true,formatter:status_button_maker_v3}
    ],
        data:[ 
    {'A':2,'B':100,'status':"In"},
    {'A':1,'B':200,'status':"Out"}
        ],
    caption: "Demo of Custom Clickable Button in Row, ver 3",
    viewrecords:true,
    onSelectRow: function(){},
    gridComplete: function(){}
});  //end simpletablev3

$(".ver3_statusbutton").on(
    {
    click: function(){
        //how to get the row id?  the following does not work
        //var rowid = $("#simpletablev3").attr('rowid'); 
        //
        //it also does not work to get the selected row
        //   this is always one click behind:
        //$("#simpletablev3").trigger("reloadGrid");
        rowid = $("#simpletablev3").getGridParam('selrow');
        alert("button pushed! rowid = "+rowid);
    }
    }); 
```

Markup:

```
 <style>.ver3_statusbutton {    color:red;} </style>
 <h3>simple table, ver 3:</h3>
 <table id="simpletablev3"></table> 
```

In summary, I'm struggling with the issue of getting my button to be pushed *at the right time*. In version 1, the row gets selected and the button never gets pushed. Version 2 does not use the "button" at all -- It just handles the cell click. Verion 3 gets the button click before the row select (wrong order).

Any help would be appreciated!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T16:23:52.973

您可以在此处对每一行使用操作格式化程序，并在 formatOptions 中将编辑和删除按钮设置为 false，如下所示：

```
formatoptions: {editbutton:false,delbutton:false}} 
```

并遵循这两个演示：

[http://www.ok-soft-gmbh.com/jqGrid/Admin3.htm](http://www.ok-soft-gmbh.com/jqGrid/Admin3.htm)

[http://ok-soft-gmbh.com/jqGrid/TestSamle/Admin1.htm](http://ok-soft-gmbh.com/jqGrid/TestSamle/Admin1.htm)

在这些自定义按钮的单击事件中显示您的警报：

**编辑**

```
var getColumnIndexByName = function (grid, columnName) {

                var cm = grid.jqGrid('getGridParam', 'colModel'), i, l = cm.length;

                for (i = 0; i < l; i++) {

                    if (cm[i].name === columnName) {

                        return i; // return the index

                    }

                }

                return -1;

            },

function () {

                var iCol = getColumnIndexByName(grid, 'act');

                $(this).find(">tbody>tr.jqgrow>td:nth-child(" + (iCol + 1) + ")")

                    .each(function() {

                        $("<div>", {

                            title: "Custom",

                            mouseover: function() {

                                $(this).addClass('ui-state-hover');

                            },

                            mouseout: function() {

                                $(this).removeClass('ui-state-hover');

                            },

                            click: function(e) {

                                alert("'Custom' button is clicked in the rowis="+

                                    $(e.target).closest("tr.jqgrow").attr("id") +" !");

                            }

                        }

                      ).css({"margin-right": "5px", float: "left", cursor: "pointer"})

                       .addClass("ui-pg-div ui-inline-custom")

                       .append('<span class="ui-icon ui-icon-document"></span>')

                       .prependTo($(this).children("div"));

                });

            } 
```

如果您检查此代码，我试图通过将列名指定为“act”来找出索引值，您可以通过提供不同的列名来获取任何其他列的索引。

```
var iCol = getColumnIndexByName(grid, 'Demo'); and the rest of the code will be same for you. //demo is the column name where u want to add custom button 
```

并为此按钮编写单击事件。

让我知道这是否适合您。

# javascript - .aspx page JS will fire Onload scripts before controls seem to be rendered for some reason

> ID：11743984
> 
> 赞同：0
> 
> 时间：2012-07-31T15:45:34.987
> 
> 标签：javascript, jquery, asp.net, user-controls

I have code which will fire on load, and fetch the object based on the ID. It returns null.

```
<script type = "text/javascript">
   $(function(){
      var TV = $find("FieldTreeViewer");
   });
</script>
<body>
   <telerik:RadTreeView OnClientNodeExpanded="nodePopulating" OnClientNodeClicked="checkLeaf" runat="server" ID = "FieldTreeViewer">
   </telerik:RadTreeView>
</body> 
```

It seems that onload will return null, but if i go into the console and reenter the var TV statement, it will assign it. I figure that the Control was NOT rendered yet. How would I go about making it so that the page renders BEFORE firing the function?

I am aware of asp having onLoad, onInit, etc, but this is purely markup, there is no magic behind the scenes.

**I just thought that markup would render, and then when the page finishes loading, i could call a function to reference the control by ID.**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:02:01.230

尝试在 window.load 上执行您的代码，如下所示：

```
$(window).load(function () 
{ 
    var TV = $find("FieldTreeViewer"); 
}); 
```

# mysql - Mysql having a table reference itself

> ID：11743987
> 
> 赞同：0
> 
> 时间：2012-07-31T15:45:38.813
> 
> 标签：mysql, sql

What I'd like to do is for a gaming application I need to search for my non player characters and they have a field called target_id that stores the id of whatever they are chasing.

```
given:
table mobs with fields and some example data
id   x   y   target_id
1    1   1   2
2    3   3   1 
```

I would like to return the following data with a query

```
id   x   y   target_id target_x target_y
1    1   1   2         3        3
2    3   3   1         1        1 
```

This is what I tried but it has syntax errors

```
SELECT id,x,y,target_id, target.x, target.y FROM mobs LEFT JOIN mobs AS target ON      target_id=id FROM mobs WHERE 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:47:56.850

据我所知，正确的语法是：

```
SELECT mobs.id, mobs.x, mobs.y, mobs.target_id, target.x, target.y 
FROM mobs 
LEFT JOIN mobs AS target 
ON      mobs.target_id = target.id 
```

您已经通过说“JOIN”指定了“FROM”，当您不需要过滤任何行时，您不需要 WHERE

编辑：对不起，我没有把别名放进去——你需要确保最后一部分（和选择中的字段）有你想要定位的表——记住，如果你有两个表，说 target_id 没有多大意义在具有相同列名的查询中。否则你会得到一个模棱两可的错误。我已将别名添加到查询中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T15:49:17.507

我不知道你为什么有 a`WHERE 1`或 second `FROM`，但我相信这就是你想要的：

```
SELECT M.id, M.x, M.y, M.target_id, T.x, T.y 
FROM mobs AS M
LEFT JOIN mobs AS T 
ON M.target_id = T.id 
```

将来，您应该发布您的表定义和预期结果，以便您的问题更加清晰。

# actionscript-3 - 使用主项目加载器预加载一些 FLV 或 F4V

> ID：11743988
> 
> 赞同：0
> 
> 时间：2012-07-31T15:45:41.857
> 
> 标签：actionscript-3, flash, load, flv, preload

我的项目有一个主加载器，用于加载项目的所有资产。我需要用它加载一些我的视频。

视频有 16mb，我想在主加载器完成后加载 3mb 使用。

我尝试使用 Netconnection/Netstream 打开一个新连接以加载 3mb 并关闭连接，但是当项目启动并播放视频时，会打开一个新连接，从头开始加载它。

我正在尝试找到一种可以使用已加载的 3mb 的方法。这样做，用户不需要等待一个主加载器和一个辅助加载器（缓冲时间）。

这是我的代码，对不起各位。

```
var loader:Loader = new Loader();

var nc:NetConnection = new NetConnection();
var ns:NetStream = new NetStream(nc);

var client:Object = new Object();

var swfRatio:Number;
var videoRatio:Number;

function init():void
{
    nc.connect(null);

    client.onCuePoint = cuePointHandler;
    client.onMetaData = metaDataHandler;

    ns.client = client;

    loader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, progressLoader);
    addEventListener(Event.ENTER_FRAME, progressTotal);

    loader.load(new URLRequest("swf/main.swf"));
    ns.play("f4v/main_movie.f4v");
    ns.pause();
}

function progressLoader(event:ProgressEvent):void
{               
    swfRatio = (event.bytesLoaded / event.bytesTotal);
}

function progressTotal():void
{
    //Here i get the amount that i want to preload from my video, in this case i want 3mb or 3072000 bytes
    videoRatio = (ns.bytesLoaded / 3072000);

    //This is a variable that i use to fill my loader asset and verify if my content its totaly loaded.
    var frameValue:int = ((videoRatio + swfRatio) / 2) * 100;

    if (frameValue >= 100)
    {
        removeEventListener(Event.ENTER_FRAME, progressTotal);
        // Here i close my connection, i suppose that i need to use the same connection in my player.
        ns.close();
        ns = null;
        nc.close();
        nc = null;
        loaderComplete();
    }
}

function loaderComplete():void
{
    removeChild(assetLoader);
    //Here i add my player to the stage, i want to use the preloaded video with him.
    addChild(loader.content);
}

function cuePointHandler(infoObject:Object):void {
    trace(infoObject.name);
}

function metaDataHandler(infoObject:Object):void {
    trace("metaData");
} 
```

然后在我刚刚加载并添加到舞台的播放器中，我正在使用 OSMF 来帮助我进行控制。

为了测试“预加载的视频”，我正在这样做：

```
private var mediaPlayer:MediaPlayerSprite;

private function _init(e:Event):void
{
    this.removeEventListener(Event.ADDED_TO_STAGE, _init);

    mediaPlayer = new MediaPlayerSprite();
    addChild(mediaPlayer);  
    //And here OSMF start to load the entire main_movie.f4v again.
    mediaPlayer.resource = new URLResource("f4v/main_movie.f4v");   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:12:22.750

如果您让视频完全下载，您的策略似乎会奏效。我假设如果视频完全下载，浏览器**可能会**缓存它并使其可供下一个`NetStream`出现。

否则，您的策略看起来不错。您正在做什么（播放，然后立即暂停视频）是开始缓冲视频的方式。但是由于有两个`NetStream`正在使用（一个由主加载器使用，另一个由 OSMF 播放器使用），这将不起作用。

也许您可以设计一个方案，`NetStream`将主加载程序中的文件传递给加载的 SWF (main.swf)。这样它就可以使用它已经下载的数据。只是一个想法，我从未尝试过这个。

另一个想法是让您的 main.swf 中的 OSMF 播放器进行缓冲。这意味着只有在加载 main.swf 之后才会开始缓冲（这可能为时已晚）。

# build - 在 NAnt 中的 zip 文件中创建文件夹

> ID：11743993
> 
> 赞同：7
> 
> 时间：2012-07-31T15:46:03.497
> 
> 标签：build, zip, directory, nant

在 NAnt 脚本结束时，最后一步是创建一个 ZIP 文件。

目前，我正在这样做：

```
<zip zipfile="${target.dropfile}">
    <fileset basedir="${somefolder}">
        <include name="file1.dll" />
    </fileset>
    <fileset basedir="${someotherfolder}">
        <include name="file2.dll" />
    </fileset>
    <!-- ...etc ... -->
</zip> 
```

这很好用，但我希望 zip 文件更有条理。我希望 zip 文件包含两个文件夹，文件夹 1 和文件夹 2，并且我希望 file1.dll 位于文件夹 1 中，而 file2.dll 位于文件夹 2 中。有没有办法在`<zip />`任务中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T16:36:47.643

只需使用前缀变量。

```
<zip zipfile="${target.dropfile}">
    <fileset basedir="${somefolder}" prefix="folder1">
        <include name="file1.dll" />
    </fileset>
    <fileset basedir="${someotherfolder}" prefix="folder2">
        <include name="file2.dll" />
    </fileset>
    <!-- ...etc ... -->
</zip> 
```

# xcode4.4 - Xcode 4.4 将 .h 和 .m 连接到视图控制器

> ID：11743994
> 
> 赞同：0
> 
> 时间：2012-07-31T15:46:13.483
> 
> 标签：xcode4.4

我正在使用 Xcode 4.4，我正在尝试将 .h 和 .m 文件连接到我的故事板中的视图控制器，但我添加文件的选项是：Objective-C 类 Objective-C 类别 Objective-C 类扩展Objective-C 协议 Objective-C 测试用例类

我找到的每个教程和答案都是针对 4.2 版本的，它可以选择我没有的 Objective-C 子类。我想知道是否有人知道如何在 4.4 中做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:19:03.127

为什么必须将 .m 和 .h 连接到视图控制器？尝试简单的方法：文件 - 新文件 - 目标 c 类，并在第二个窗口中检查“使用 XIB 接口”。有了这个，你会得到 .m .h 和 .xib ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:40:40.017

我有同样的问题，刚刚找到了答案。首先，确保阅读有关情节提要的 Xcode 帮助（在帮助菜单中，键入故事...）其次，确保 XCode 向您显示他的完整界面（在工具栏中，选择所有三个视图图标，或至少选择右下角和左下角图标。

帮助中有一个视频，解释了如何执行此操作。

# c# - 使用 linq to xml 和 Htmlagilitypack

> ID：11743998
> 
> 赞同：0
> 
> 时间：2012-07-31T15:46:23.620
> 
> 标签：c#, xml, html-agility-pack

我正在使用 HtmlAgilityPack 从字符串中创建一个 htmldocument，例如：

```
 HtmlDocument updoc = new HtmlDocument();
   updoc.load(stringContents); 
```

现在我想将 HtmlNodes 作为 XElement 的子级插入。我试过 ：

```
 XDocument xdoc = XDocument.load(path);
   XElement body = xdoc.Descendants(ns + "body").Single();
   body.Add(updoc.GetElementbyId("h"));
   body.Add(updoc.GetElementbyId("m"));
   body.Add(updoc.GetElementbyId("f")); 
```

但结果只会是对象名称（HtmlNodeAgilityPack，..），不起作用。基本上我正在尝试使用 HtmlAgilityPack 与 linq to xml 的组合。这可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:31:09.210

我只是在谷歌上搜索东西，所以这可能不适合你。但是您需要使用返回的[HtmlNode](http://www.pacman.schlet.net/docs/HtmlAgilityPack/HtmlNode.html)`GetElementbyId()`的属性来创建您的元素。

所以是这样的：

```
HtmlNode node = updoc.GetElementbyId("h");
XElement e;
body.Add(e = new XElement(node.Name, XElement.Parse(node.InnerHtml))); 
```

如果节点有[HtmlAttribute](http://www.pacman.schlet.net/docs/HtmlAgilityPack/HtmlAttribute.html) (s)，添加它们如下：

```
foreach(HtmlAttribute att in node.Attributes)
{
    e.Add(new XAttribute(att.Name, att.Value));
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T16:29:10.847

为什么不只使用 StringBuilder 生成您的 xml 并使用[XDocument.Parse(string)解析它](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.parse.aspx)

```
Example :

StringBuilder xmlBuilder = new StringBuilder();
//Build xml with the builder
XDocument xDoc = XDocument.Parse(xmlBuilder.ToString()); 
```