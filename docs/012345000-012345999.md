# StackOverflow 问答 12345000-12345999

# c# - 使用 EF Code First 编辑实体时出错

> ID：12345004
> 
> 赞同：0
> 
> 时间：2012-09-10T03:26:00.107
> 
> 标签：c#, entity-framework, ef-code-first

尝试首先使用 EF 代码编辑实体时出现此错误：

> 发生参照完整性约束违规：定义参照约束的属性值在关系中的主体对象和从属对象之间不一致。

我的实体是与国家有关系的生产者。我的编辑代码如下：

```
Producer producer = this.DataContext as Producer;
context.Producers.Attach(producer);
context.Entry(producer).State = EntityState.Modified;
context.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:55:18.673

我找到解决方案。我使用下面的代码，它工作正常，但我仍然不确定它是否是最好的方法。

```
Producer producer = this.DataContext as Producer;
Producer p = context.Producers.Find(producer.Id);
context.Entry(p).CurrentValues.SetValues(producer);
context.SaveChanges(); 
```

# python - 使用python的facebook api

> ID：12345011
> 
> 赞同：1
> 
> 时间：2012-09-10T03:27:10.613
> 
> 标签：python, facebook-graph-api, pyfacebook

我想知道如何编写 python 代码来获取 Facebook 帖子上的点赞、评论等。我正在使用该`pyfacebook`界面，但是当我在 python 中使用它运行一些代码时，它给了我一个错误：

```
Traceback (most recent call last):
  File "ts.py", line 2, in <module>
    import facebook
  File "build/bdist.linux-i686/egg/facebook/__init__.py", line 58, in <module>
ImportError: No module named django.conf 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:08:35.020

您可以尝试[facebook-sdk](https://github.com/pythonforfacebook/facebook-sdk)，按照示例进行操作，您可以在[Facebook Graph API](https://developers.facebook.com/docs/reference/api/)中获得任何您想要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:56:26.447

您需要在系统上安装一个名为*Django*的 Web 框架才能使用`pyfacebook`.

但是：似乎有些人认为 Python 是[该工作的错误工具](http://www.robertames.com/blog.cgi/entries/pyfacebook-tutorials-suck.html)，并指出；

> 如果您不在 PHP 中，那么您已经落后了半步。看起来 PHP 库 + 集成非常好，经过良好测试，有据可查等。

也：

> [the] pyfacebook 教程真的是一个 django 教程。

您可能想研究[安装 Django](https://docs.djangoproject.com/en/1.4/topics/install/)，然后从那里开始。我建议*不要*偏离官方的 Django 教程，因为它是一个非常好的教程。

# c++ - 在类 A 的构造函数中构造 B 的对象

> ID：12345012
> 
> 赞同：-1
> 
> 时间：2012-09-10T03:27:11.717
> 
> 标签：c++, gcc

这是我想要做的，我希望类 A 的构造函数为 B 的对象调用 B 的构造函数，例如 main()->A->B

A.cpp：（包括 Bh）

```
A::A(){
  B foo;
} 
```

乙：

```
class B{
 B(){//some code};
}; 
```

但 GCC 不会编译并说***A::B foo has initializer 但不完整类型***。我猜编译器在 A 中没有看到 B 的本地类，所以它抱怨并且不知道 B 类来自另一个文件。我的问题是如何在上面的 A 的构造函数中构造 B 的对象。我确定我缺少一些关于 C++ 的基础知识，请多多包涵。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T03:48:40.833

尝试

```
class A
{
    public:
        A();  // Don't define A::A() here
              // As the compiler has not seen B
};
class B
{
    public:
        B() {}
};
// At this point both classes have been seen
A::A()
{
    ::B foo;  // So now you can use B
              // Note I am using ::B here
              //      As the error message suggests that you have some class B defined
              //      Within A which is confusing it. the prefix :: means take the class
              //      B from the global scope rather than a closer scope.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T03:43:27.057

您没有任何类型的类`A::B`。从您的评论来看，您似乎正在尝试`B`通过调用来使用指向它的指针`A::B *`。这是不正确的。指向的指针`B`总是`B *`，无论它出现在哪里。从您所说的来看，您似乎想要这样的东西：

一个.hpp

```
#ifndef A_HPP_
#define A_HPP_

class B;
class A {
public:
    A(B * b);
private:
    B * my_very_own_b;
};

#endif    // A_HPP_ 
```

a.cpp

```
#include "a.hpp"
#include "b.hpp"

A::A(B * b):
    my_very_own_b(b)
    {
} 
```

b.hpp

```
#ifndef B_HPP_
#define B_HPP_

class B {
public:
    B();
private:
    int x;
};

#endif    // B_HPP_ 
```

b.cpp

```
#include "b.hpp"
B::B():
    x(0)
    {
} 
```

主文件

```
#include "a.hpp"
#include "b.hpp"

int main() {
    B b;
    A a(&b);
    return 0;
} 
```

# asp.net - 在 asp.net Web 应用程序中集成 dotnetnuke 模块

> ID：12345013
> 
> 赞同：0
> 
> 时间：2012-09-10T03:27:15.987
> 
> 标签：asp.net, dotnetnuke

我有现有的 asp.net web 应用程序，它包括成员资格和角色以及管理部分等。现在我想在我的 asp.net Web 应用程序中集成 dotnetnuke journal 模块。

是否可以在我的网络应用程序中集成 dotnetnuke 模块？我下载 dotnetnuke 源代码并编译了日志模块。

谁能更新我如何在我的网络应用程序中集成 dotnetnuke 模块..我现在不想切换到 dotnetnuke。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:46:15.117

您最好的选择是利用 API 从您的自定义应用程序中访问日志。

模块本身依赖于 DNN 及其上下文（用户、页面、模块等）才能正常运行。

我相信你可以撕掉很多，但我不确定你想要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:25:04.370

> 是否可以在我的网络应用程序中集成 dotnetnuke 模块？

不。

成功完成任务的唯一方法是将 ASP.NET 应用程序转换为 DotNetNuke 应用程序。为此，您将不得不合并两个站点的身份验证端。这应该不是不可能的，因为 DNN 使用 ASP.NET 身份验证提供程序。

如果您可以正确地将用户数据库合并到 DotNetNuke 安装中，那么您就成功了一半。然后，您可以使用 DotNetNuke 页面管理功能通过直接链接到它们来加载您的自定义页面，并逐渐合并您现有的应用程序。

否则，您将没有希望集成 Journal 模块。而且您需要花费数百甚至数千小时的编码来尝试和复制它。

# python - Sqlalchemy 按顺序获取最后 X 行

> ID：12345015
> 
> 赞同：23
> 
> 时间：2012-09-10T03:27:45.223
> 
> 标签：python, sqlalchemy

我需要从表中获取最后 X 行，但按 ID 顺序。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-10T04:34:03.253

```
query = users.select().order_by(users.c.id.desc()).limit(5)

print reversed(conn.execute(query).fetchall() ) 
```

反正是这样的

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-06-21T17:21:33.050

这对我有用...

```
c=session.query(a).order_by(a.id.desc()).limit(2)
c=c[::-1] 
```

该方案比 BrendanSimon 提出的 python 切片方案快 10 倍。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-28T01:22:06.420

我相信您可以在 order_by 参数前加上“-”来获得相反的顺序。

```
query = users.select().order_by(-users.c.id.desc()).limit(5) 
```

另外，我相信您可以使用 python 切片作为限制的替代方法。

```
query = users.select().order_by(users.c.id.desc())[-5:]

query = users.select().order_by(-users.c.id.desc())[:5] 
```

# jquery - IE FF 故障与 jQuery 滑块中的多个 Google 图表

> ID：12345016
> 
> 赞同：3
> 
> 时间：2012-09-10T03:27:51.417
> 
> 标签：jquery, charts, slider

我一直在尝试自己独奏这个，但我碰到了一堵砖墙。我在 jQuery 滑块的一个页面上收集了 6 个不同的 Google 图表。在 Chrome 中查看时一切都很完美，但在 FF 和 IE 中出现故障。在 FF 和 IE 中，第一个框架的 Google Chart 很好，但是当您将滑块推进到不同的 Google Chart 时，图例、hAxis 和 vAxis 标题会被丢弃。当图表在滑块之外时，图表很好。我认为这是某种 CSS 冲突，但我还没有弄清楚。我一直在疯狂地使用 FireBugging，但找不到解决方案。我在谷歌为生成谷歌图表而创建的 iframe 中注意到的一件事是它使用的文本标签对齐的 x 和 y 的一致性。在 jQuery 滑块内部时实际上是不同的。任何帮助或见解将不胜感激。下面的第一个链接是 Google Chart/jQuery 滑块组合。第二个是没有滑块的图表。

带滑块： [http ://www.burlington-weather.com/current_weather_conditions.php?cityzip=05401](http://www.burlington-weather.com/current_weather_conditions.php?cityzip=05401)

没有滑块： [http ://www.burlington-weather.com/current_old.php?cityzip=05401](http://www.burlington-weather.com/current_old.php?cityzip=05401)

PS ...是的，我确实尝试了一个完全不同的滑块，我得到了相同的结果！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:06:12.197

这可能是因为很难为浏览器渲染两个 SVG 图像。一种解决方案是使用 requestAnimationFrame 创建自定义动画函数并在一帧动画两个对象。教程很多，应该不难。

# fullcalendar - 如果我更改操作系统时区，事件（作为 json 提要）、开始结束参数 unix 时间戳会有所不同

> ID：12345020
> 
> 赞同：4
> 
> 时间：2012-09-10T03:29:06.033
> 
> 标签：fullcalendar, unix-timestamp

我正在使用 fullcalendar 插件，如果有人能帮帮我，我将不胜感激。

我通过 PHP URL 获取 json 事件。像这样的东西：

```
$('#calendar').fullCalendar({ events: "/myfeed.php" }); 
```

所以在我返回事件的 php 页面中，我得到了 3 个 GET 参数：

*   '_'
*   '开始'
*   '结尾'

start 和 end 参数，以 UNIX 时间戳表示日期。到目前为止一切顺利，发生的问题是，如果我更改操作系统上的时区。还可以更改这些参数 start 和 end，用于日历中同一天的相同查询。最奇怪的是它只发生在 Mozilla Firefox 中。在谷歌浏览器中，不会出现此问题。

例如

我已经设置了我的时区（（UTC-04：00）圣地亚哥）我指的是议程上的 09.09.2012，萤火虫告诉我这些参数正在发送到我的 php 页面

*   _ 1347245953581
*   结束 1347246000
*   开始 1347159600

但是，如果我将时区从我的操作系统更改为 ((UTC-03: 00) Buenos Aires) 在 09.09.2012 的议程上进行咨询，那么现在发送到 PHP 页面的其他参数。

*   _ 1347246338047
*   结束 1347332400
*   开始 1347246000

因为是同一天，所以发送其他开始和结束参数以检查事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T12:11:37.687

fullcalendar 上有一个 ignoreTimezone 选项可能会有所帮助。我不确定它是否会影响传递给提要的开始/结束时间。

[http://arshaw.com/fullcalendar/docs/event_data/ignoreTimezone/](http://arshaw.com/fullcalendar/docs/event_data/ignoreTimezone/)

另一种选择是将传递的时间戳转换为 Date 对象，然后从 Date 对象中获取本地数据，然后在查询中使用它。

[在 JavaScript 中将 Unix 时间戳转换为时间](https://stackoverflow.com/questions/847185/convert-a-unix-timestamp-to-time-in-javascript)

我知道这不是确切的答案，但它可能会对您有所帮助。

这是一段 PHP 代码示例，用于将传递的时间戳转换为本地格式化日期：

```
$startts = $_REQUEST["start"]; // original timestamp

$startdt = new DateTime('now', new DateTimeZone('Europe/Oslo') ); // setup a local datetime
$startdt->setTimestamp($startts); // Set the date based on timestamp

echo $startdt->format('Y-m-d H:i:s'); // Output local date and time 
```

# asp-classic - 如何仅保存从数据库中检索到的已编辑数据？我很困惑。我可以删除特定记录但不能只保存特定记录

> ID：12345024
> 
> 赞同：0
> 
> 时间：2012-09-10T03:29:45.470
> 
> 标签：asp-classic

我需要检索产品信息。从数据库中，现在想要编辑一些数据并将其保存回数据库。我创建了编辑表单页面并将值传递给另一个保存页面。我想要的只是保存已编辑的记录，但是当我单击“保存”按钮时，所有记录的数据都通过了。我困惑的是使用相同的传递方法，我只能成功删除特定的记录。

这是我的代码..

```
<table cellpadding="0" cellspacing="0" border="1" width="100%">
    <tr class="border bluebackend" >
        <td class="center bold" width="30">Size</td>
        <td class="center bold" width="30">Color</td>
        <td class="center bold" width="27%">Est. Qty (dz.)</td>
        <td class="center bold" width="30">&nbsp;</td>
        <td class="center bold" width="30">&nbsp;</td>
    </tr>
<%
dim total_qty_est, total_qty
if rsPdtn_sizeColor.eof then 
response.Write "<tr><td colspan=""3"">file not found</td></tr>"
Else                      
Do while Not rsPdtn_sizeColor.EOF

total_qty_est = rsPdtn_sizeColor.fields.item("pdtn_st_qty_est")
total_qty = total_qty + total_qty_est       

%>                                              
    <tr >
        <td class="center">
            <select name="pdtn_st_size">
                <option selected>-- size -- </option>
                <option value="L" <%=checkSelectedScript(rsPdtn_sizeColor.fields.item("pdtn_st_size"),"L")%>>L</option>
                <option value="XL" <%=checkSelectedScript(rsPdtn_sizeColor.fields.item("pdtn_st_size"),"XL")%>>XL</option>

            </select>                                                                    
        </td>
        <td class="center">
            <select name="pdtn_st_color">
                <option selected>-- color -- </option>
                <option value="Orange" <%=checkSelectedScript(rsPdtn_sizeColor.fields.item("pdtn_st_color"),"Orange")%>>Orange</option>
                <option value="Pink" <%=checkSelectedScript(rsPdtn_sizeColor.fields.item("pdtn_st_color"),"Pink")%>>Pink</option> 
            </select>                                                                         
        </td>
         <td class="center">
            <input type="text" value="<%=PcsToDz(rsPdtn_sizeColor.fields.item("pdtn_st_qty_est"))%>" name="pdtn_st_qty_est" size="3">
            &nbsp;&nbsp;(<%=rsPdtn_sizeColor.fields.item("pdtn_st_qty_est")%>)
         </td>
        <td><input type="button" name="" value="Del" onClick="confirmationDeletePrice('../engine/delPdtn_szCl.asp?pdtn_szcl_id= <%=rsPdtn_sizeColor.fields.item("pdtn_szcl_id")%>&pdtn_st_id=<%=rsPdtn_sizeColor.fields.item("tbl_pdtn_sizecolor.pdtn_st_id")%>')"></td>     
        <td class="center" >
        <input type="button" name="" value="Save" onClick="confirmationSaveProduction_Szcl('production_szcl_edit_action.asp?pdtn_szcl_id= <%=rsPdtn_sizeColor.fields.item("pdtn_szcl_id")%>')">

         <input type="hidden" value="Y" name="edit_pdtn_szcl">
          <input type="hidden" value="<%=rsPdtn_sizeColor.fields.item("pdtn_szcl_id")%>" name="pdtn_szcl_id">                                                                    
        </td>                                                               
    </tr>
<%
rsPdtn_sizeColor.movenext

Loop    
rsPdtn_sizeColor.movefirst
end if
%> 
```

这是我的保存页面代码...

```
<%
    pdtn_st_id = Request.form("pdtn_st_id")
    pdtn_st_qty_est_dz = Request.form("pdtn_st_qty_est")

        if pdtn_st_qty_est_dz <> "" then
            pdtn_st_qty_est = DztoPcs(pdtn_st_qty_est_dz)
        end if

    pdtn_st_size =   Request.form("pdtn_st_size")   
    pdtn_st_color =   Request.form("pdtn_st_color") 
    edit_pdtn_szcl =   Request.form("edit_pdtn_szcl")   

    call checkBlank(pdtn_st_qty_est)

    if SomethingError <> "yes" then

        Call DBConnOpen()

            Set Rs = Server.CreateObject("ADODB.Recordset")
            Set Rs.ActiveConnection = Conn

            strSQL = "SELECT * FROM tbl_pdtn_sizecolor"
                pdtn_szcl_id = Request.form("pdtn_szcl_id")
                strSQL = strSQL & " WHERE pdtn_szcl_id =" & pdtn_szcl_id & ""
                Rs.Open strSQL, Conn, 1, 3          

            Rs.Fields("pdtn_st_id") = pdtn_st_id
            Rs.Fields("pdtn_st_qty_est") = pdtn_st_qty_est
            Rs.Fields("pdtn_st_size") = pdtn_st_size    
            Rs.Fields("pdtn_st_color") = pdtn_st_color  

            Rs.Update
            Rs.Close

            response.redirect "production_view.asp?pdtn_st_id=" & pdtn_st_id

        Call DBConnClose()

    else
        call writeInputError
    end if
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:35:04.303

最简单的解决方案是将现有标签移动到循环中的表格行周围。这样您就可以一次编辑一行，而无需修改您的保存页面代码。

我在下面的代码中添加了表单标签，但您需要使用您已经在使用的 FORM 标签：

```
<table cellpadding="0" cellspacing="0" border="1" width="100%">
    <tr class="border bluebackend" >
        <td class="center bold" width="30">Size</td>
        <td class="center bold" width="30">Color</td>
        <td class="center bold" width="27%">Est. Qty (dz.)</td>
        <td class="center bold" width="30">&nbsp;</td>
        <td class="center bold" width="30">&nbsp;</td>
    </tr>
<%
dim total_qty_est, total_qty
if rsPdtn_sizeColor.eof then 
response.Write "<tr><td colspan=""3"">file not found</td></tr>"
Else                      
Do while Not rsPdtn_sizeColor.EOF

total_qty_est = rsPdtn_sizeColor.fields.item("pdtn_st_qty_est")
total_qty = total_qty + total_qty_est       

%>
    <form action="" method=""><!--move your form open tag here-->                                       
    <tr >
        <td class="center">
            <select name="pdtn_st_size">
                <option selected>-- size -- </option>
                <option value="L" <%=checkSelectedScript(rsPdtn_sizeColor.fields.item("pdtn_st_size"),"L")%>>L</option>
                <option value="XL" <%=checkSelectedScript(rsPdtn_sizeColor.fields.item("pdtn_st_size"),"XL")%>>XL</option>

            </select>                                                                    
        </td>
        <td class="center">
            <select name="pdtn_st_color">
                <option selected>-- color -- </option>
                <option value="Orange" <%=checkSelectedScript(rsPdtn_sizeColor.fields.item("pdtn_st_color"),"Orange")%>>Orange</option>
                <option value="Pink" <%=checkSelectedScript(rsPdtn_sizeColor.fields.item("pdtn_st_color"),"Pink")%>>Pink</option> 
            </select>                                                                         
        </td>
         <td class="center">
            <input type="text" value="<%=PcsToDz(rsPdtn_sizeColor.fields.item("pdtn_st_qty_est"))%>" name="pdtn_st_qty_est" size="3">
            &nbsp;&nbsp;(<%=rsPdtn_sizeColor.fields.item("pdtn_st_qty_est")%>)
         </td>
        <td><input type="button" name="" value="Del" onClick="confirmationDeletePrice('../engine/delPdtn_szCl.asp?pdtn_szcl_id= <%=rsPdtn_sizeColor.fields.item("pdtn_szcl_id")%>&pdtn_st_id=<%=rsPdtn_sizeColor.fields.item("tbl_pdtn_sizecolor.pdtn_st_id")%>')"></td>     
        <td class="center" >
        <input type="button" name="" value="Save" onClick="confirmationSaveProduction_Szcl('production_szcl_edit_action.asp?pdtn_szcl_id= <%=rsPdtn_sizeColor.fields.item("pdtn_szcl_id")%>')">

         <input type="hidden" value="Y" name="edit_pdtn_szcl">
          <input type="hidden" value="<%=rsPdtn_sizeColor.fields.item("pdtn_szcl_id")%>" name="pdtn_szcl_id">                                                                    
        </td>                                                               
    </tr>
    </form><!--move your form close tag here-->
<%
rsPdtn_sizeColor.movenext

Loop    
rsPdtn_sizeColor.movefirst
end if
%> 
```

# database - 如何在 Play 中使用 eBean 定义“TEXT”类型！框架？

> ID：12345027
> 
> 赞同：13
> 
> 时间：2012-09-10T03:30:10.900
> 
> 标签：database, playframework-2.0, ebean

当我将模型类中的变量定义为字符串时，它在 DB 中被转换为 'VARCHAR(255)'。

但是，我想保存超过 255 个，因为这些数据是由几个段落组成的很长的文本。

据我记得，DB 中有一个 TEXT 类型可以保存很长的文本。

如何在 Play 中定义 TEXT 类型！框架？

我尝试了 Play 中定义的 Constraints.MaxLength 和 Constraints.Max！框架 API。

但是，仍然 1.sql 文件（由 Ebean DDL 自动创建）将此变量定义为 VARCHAR(255)。

提前致谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-10T06:58:28.130

在您的模型中，只需将列定义设置为`TEXT`：

```
@Entity
public class MyEntity extends Model {

    @Id
    private Long id;

    @Column(columnDefinition = "TEXT")
    private String aLongText;
    ....

} 
```

我已经将它与 Postgres 一起使用，不知道它是否可以与其他数据库服务器一起使用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-01T08:30:51.523

您可以`@Lob`在字段上使用注释，这将`longtext`在 MySQL上产生类型并`text`在 PostgreSQL 上输入：

```
package models;

import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Lob;

@Entity
public class Foo {

    @Id
    public Long id;

    @Lob
    public String bar;

} 
```

在 MySQL 中，这会产生：

```
mysql> describe foo;
+-------+------------+------+-----+---------+----------------+
| Field | Type       | Null | Key | Default | Extra          |
+-------+------------+------+-----+---------+----------------+
| id    | bigint(20) | NO   | PRI | NULL    | auto_increment |
| bar   | longtext   | YES  |     | NULL    |                |
+-------+------------+------+-----+---------+----------------+
2 rows in set (0.00 sec) 
```

在 PostgreSQL 中，这会产生：

```
foodb=> \d foo;
     Table "public.foo"
 Column |  Type  | Modifiers
--------+--------+-----------
 id     | bigint | not null
 bar    | text   |
Indexes:
    "pk_foo" PRIMARY KEY, btree (id) 
```

根据[Java EE api](http://docs.oracle.com/javaee/6/api/javax/persistence/Lob.html)：

> Lob 类型是从持久字段或属性的类型推断出来的

这意味着一个类型的字段`String`应该给你一些文本 blob，一个类型的字段`byte[]`应该给你一些二进制 blob。

# jquery - 附加按钮后调用函数

> ID：12345028
> 
> 赞同：0
> 
> 时间：2012-09-10T03:30:24.153
> 
> 标签：jquery

当事件单击 button1 时，我让 jQuery 代码添加 HTML elemnet button2 ，并在单击 button2 时创建另一个以将另一个 HTML 元素添加到 DIV 第一个运行但第二个不运行。如何解决这个问题呢 ？

问题示例

```
var button2='<input type="button" vale="add" id="idbutton2" >';
$('#idbutton1').click(function(){
  $('#divid1').html(button2);
});

$('#idbutton2').click(function(){
  $('#divid2').html("text");
}); 
```

button2 添加到 DIV，我想在单击 button2 时运行 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T03:32:26.147

将其更改为：

```
$('#divid1').on('click', '#idbutton2', function(){
    $('#divid2').html("text");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:33:09.057

改为`.on`委托事件处理程序。

```
$(document).on('click', '#idbutton2', function(){
  $('#divid2').html("text");
}); 
```

或者你可以直接将它绑定在 button2 上。

```
var button2= $('<input type="button" vale="add" id="idbutton2" >').click(function(){
  $('#divid2').html("text");
});

$('#idbutton1').click(function(){
    $('#divid1').html(button2.html());
}); 
```

# android - android 如何检查从服务器传递到设备的证书是否为有效证书？

> ID：12345031
> 
> 赞同：0
> 
> 时间：2012-09-10T03:31:25.000
> 
> 标签：android

任何人都可以帮助找到如何从 android 应用程序建立有效的 Https 连接。我不清楚如何检查从服务器传递的证书是否是有效的证书？从我的 android 应用程序并建立与服务器的连接。这是 android 支持的证书

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T03:39:24.987

它可能是有效的（如未过期且具有验证的签名），但不受 Android 信任。当您自动连接到 HTTPS URL 时，Android 将同时检查（信任和有效性），如果其中任何一个检查失败，您将收到异常。

简单地说，只要尝试连接到一个 HTTPS URL 看看会发生什么。

“支持”（即，受信任的）颁发者证书因 Android 版本而异，并且从 ICS (4.0) 开始，您可以安装自己的证书。

# regex - 在 vb.net 中需要正则表达式提取帮助

> ID：12345033
> 
> 赞同：-1
> 
> 时间：2012-09-10T03:32:03.677
> 
> 标签：regex, vb.net

我有一个 html 源代码，需要在`<h1>15</h1>`标签之间检索值。 `<h1>`实例在完整的 html 代码中多次出现。

下面是html代码的示例部分

```
<div class="rs_text_11_may">
    <p>Rs</p>
    <h1>15</h1>
</div> 
```

我尝试了很多，但我没有实现它。帮帮我的朋友...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T03:48:14.790

您需要以下正则表达式：`(?<=<h1>).+?(?=</h1>)`这在 C# 中运行良好。

```
Regex regex = new Regex(@"(?<=<h1>).+?(?=</h1>)");
MatchCollection mc = regex.Matches(@"<h1>15</h1><h1>14</h1>", 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:44:42.837

**试试这个（更好的方法是使用[LINQ](http://msdn.microsoft.com/en-us/vstudio/bb688087)，而不是 RegEx）**

```
Public Function test() As Boolean
        Try
            Dim xe As XElement = <div class="rs_text_11_may">
                                     <p>Rs</p>
                                     <h1>15</h1>
                                 </div>
            Dim h1s = xe...<h1>
            For Each ele As XElement In h1s
                MsgBox(ele.Value)
            Next
            Return True
        Catch ex As Exception
            Return False
        End Try
    End Function 
```

# objective-c - 将 NSInteger 转换为字节

> ID：12345037
> 
> 赞同：2
> 
> 时间：2012-09-10T03:32:59.167
> 
> 标签：objective-c, ios, nsinteger

我想构造一个内容为 3 NSInteger 类型的 NSData 对象，我使用以下代码：

```
- (void)test
{

    NSInteger i = 12, j = 2000, k = 2;

    NSMutableData *md = [NSMutableData dataWithCapacity:10];

    [md appendBytes:&i length:sizeof(i)];
    [md appendBytes:&j length:sizeof(j)];
    [md appendBytes:&k length:sizeof(k)];

    NSLog(@"data is %@",md);
} 
```

但是当我记录它时，它告诉我：

```
data is <0c000000 d0070000 02000000> 
```

我把这些翻译成十进制，这些数字是201326592、3490119680、33554432。所以我不知道为什么是这些数字，我该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T03:40:07.403

您使用的是 little-endian 架构，这意味着 LSB（最低有效字节）排在第一位。序列 0c 00 00 00 代表数字 00 00 00 0c，即 12。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T05:22:33.590

最后我按照 Marcelo 的回答，发现这个 API 对我很有效：

```
- (void)test
{

    NSInteger i = 12, j = 2000, k = 2;

    NSInteger i2 =  CFSwapInt32HostToBig(i);
    NSInteger j2 = CFSwapInt32HostToBig(j);
    NSInteger k2 = CFSwapInt32HostToBig(k);

    NSMutableData *md = [NSMutableData dataWithCapacity:10];

    [md appendBytes:&i2 length:sizeof(i2)];
    [md appendBytes:&j2 length:sizeof(j2)];
    [md appendBytes:&k2 length:sizeof(k2)];

    NSLog(@"data is %@",md);

} 
```

日志：

```
data is <0000000c 000007d0 00000002> 
```

# .htaccess - magento .htaccess 密码保护内页（不是主页）

> ID：12345040
> 
> 赞同：1
> 
> 时间：2012-09-10T03:33:07.607
> 
> 标签：.htaccess, magento

我想使用 .htaccess 密码保护 Magento 的所有内页，除了主页。eg [http://www.example.com/abc](http://www.example.com/abc)（密码保护） [http://www.example.com](http://www.example.com)（首页，无需密码保护）

我尝试使用`setifenv request_uri = "/" => allow`，但没有用。它仍然密码保护所有页面，包括主页。我还在 Magento 管理员 URL 重写中尝试了一些方法，但这些方法也不起作用。

有高手可以帮忙吗？谢谢

乙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T03:42:24.630

假设您使用的是 apache：

```
SetEnvIfNoCase Request_URI ^/index.html$ norequire_auth=true
SetEnvIfNoCase Request_URI ^/$ norequire_auth=true

# Auth stuff
AuthUserFile /var/www/htpasswd
AuthName "Password Protected"
AuthType Basic

# Setup a deny/allow
Order Deny,Allow
# Deny from everyone
Deny from all
# except if either of these are satisfied
Satisfy any
# 1\. a valid authenticated user
Require valid-user
# or 2\. the "require_auth" var is NOT set
Allow from env=norequire_auth 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-19T10:26:17.510

将以下代码添加到您的根 htaccess 文件中，并且不要忘记更改您的管理 url，`.htpasswd`文件页面。

```
<Files "admin">
        AuthName "Cron auth"
        AuthUserFile E:\wamp\www\magento\.htpasswd
        AuthType basic
        Require valid-user
    </Files> 
```

在您的根文件夹中创建 .htpasswd 文件并添加以下用户名和密码（设置默认用户名：admin 和密码：admin123）

```
admin:$apr1$8.nTvE4f$UirPOK.PQqqfghwANLY47. 
```

如果您仍然遇到任何问题，请告诉我。

# python - python re模块中的'[ab]+'是否等于'(a|b)+'？

> ID：12345047
> 
> 赞同：11
> 
> 时间：2012-09-10T03:34:04.660
> 
> 标签：python, regex, python-2.7

我认为 pat1 = '[ab]' 和 pat2 = 'a|b' 在 Python(python2.7, windows) 're' 模块中作为正则表达式模式具有相同的功能。但是我对'[ab]+'和'(a|b)+'感到困惑，它们是否具有相同的功能，如果没有，你能解释一下细节。

```
'''
Created on 2012-9-4

@author: melo
'''

import re
pat1 = '(a|b)+'
pat2 = '[ab]+'
text = '22ababbbaa33aaa44b55bb66abaa77babab88'

m1 = re.search(pat1, text)
m2 = re.search(pat2, text)
print 'search with pat1:', m1.group()
print 'search with pat2:', m2.group()

m11 = re.split(pat1, text)
m22 = re.split(pat2, text)
print 'split with pat1:', m11
print 'split with pat2:', m22

m111 = re.findall(pat1, text)
m222 = re.findall(pat2, text)
print 'findall with pat1:', m111
print 'findall with pat2:', m222 
```

输出如下：

```
search with pat1: ababbbaa
search with pat2: ababbbaa
split with pat1: ['22', 'a', '33', 'a', '44', 'b', '55', 'b', '66', 'a', '77', 'b', '88']
split with pat2: ['22', '33', '44', '55', '66', '77', '88']
findall with pat1: ['a', 'a', 'b', 'b', 'a', 'b']
findall with pat2: ['ababbbaa', 'aaa', 'b', 'bb', 'abaa', 'babab'] 
```

为什么'pat1'和'pat2'不同，它们有什么区别？'pat1' 实际上可以匹配什么样的字符串？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-10T04:02:27.803

您在第一个模式中有一个捕获组。

根据[文档](http://docs.python.org/library/re.html#re.split)，

> **re.split()**
> ... 如果在*pattern*中使用捕获括号，则 pattern 中所有组的文本也作为结果列表的一部分返回。...

尝试让该组不被捕获，看看你是否得到了你所期望的：

```
pat1 = '(?:a|b)+' 
```

# c - 将二进制无符号向量转换为 dec 列表

> ID：12345048
> 
> 赞同：1
> 
> 时间：2012-09-10T03:34:08.277
> 
> 标签：c

此代码将`unsigned long`向量变量转换`cR1`为`NB_ERRORS`数字（在`a`变量中我打印这些数字）。

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

int EXT_DEGREE = 8;
int NB_ERRORS = 8;
int BIT_SIZE_OF_LONG = 32;
typedef unsigned short gf_t;
int main(void){

int j, k, l;
gf_t a;
unsigned long cR1 [] = {418636844,2037720909}; //example
for (l = 0; l < NB_ERRORS; ++l) {
    k = (l * EXT_DEGREE) / BIT_SIZE_OF_LONG;
    j = (l * EXT_DEGREE) % BIT_SIZE_OF_LONG;
    a = cR1[k] >> j;
    if(j + EXT_DEGREE > BIT_SIZE_OF_LONG)
        a ^= cR1[k + 1] << (BIT_SIZE_OF_LONG - j);
    a &= ((1 << EXT_DEGREE) - 1);
    printf("a = %d\n", a);
} 
```

例如，我有一个 cR1 数组，其中包含以下两个元素：

`0,0,1,1,0,1,0,0,0,0,1,0,0,1,1,1,1,1,0,0,1,1,1,1,0,0,0,1,1,0,0,0` `1,0,1,1,0,0,1,0,1,1,1,0,0,1,0,0,1,0,1,0,1,1,1,0,1,0,0,1,1,1,1,0`

执行该代码我得到：

```
 a = 44
    a = 228
    a = 243
    a = 24
    a = 77
    a = 39
    a = 117
    a = 121 
```

这段代码从右到左转换，我想修改为从左到右转换。我可以在哪里修改这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-28T15:06:04.957

尝试修改`j`计算线。将其替换为：

```
j = ( (NB_ERRORS - 1 - l) * EXT_DEGREE) % BIT_SIZE_OF_LONG; 
```

中包含的数字`cR1`将从左侧开始转换。输出将是：

```
a = 24
a = 243
a = 228
a = 44
a = 121
a = 117
a = 39
a = 77 
```

# java - 如何使用 Apache CXF 覆盖入站消息验证？

> ID：12345051
> 
> 赞同：0
> 
> 时间：2012-09-10T03:34:32.210
> 
> 标签：java, validation, cxf, customization

当我为整数字段输入非数字内容时，我收到一条错误消息：

> “不是数字：0.012A”。

在为模式验证解组时，有没有办法输出自定义错误消息？

我正在使用 Apache CXF 2.6.1

```
<entry key="schema-validation-enabled" value="true" ></entry> 
```

在 cxf-spring.xml 中。

> java.lang.RuntimeException：不是数字：在 org.apache.cxf.jaxb.io.DataReaderImpl$WSUIDValidationHandler.handleEvent(DataReaderImpl. java:78) 在 com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:655) 在 com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleError(UnmarshallingContext. java:691) 在 com.sun.xml.bind.v2.runtime.unmarshaller.Loader.handleParseConversionException (Loader. java:271) 在 com.sun.xml.bind.v2.runtime.unmarshaller 的 com.sun.xml.bind.v2.runtime.unmarshaller.LeafPropertyLoader.text(LeafPropertyLoader.java:69)。UnmarshallingContext.text(UnmarshallingContext.java:514) 在 com.sun.xml.bind.v2.runtime.unmarshaller.InterningXmlVisitor.text(InterningXmlVisitor.java:93) 在 com.sun.xml.bind.v2.runtime.unmarshaller。 com.sun.xml.bind.v2.runtime.unmarshaller 上的 StAXStreamConnector.processText(StAXStreamConnector.java:338)。com.sun.xml.bind.v2.runtime.unmarshaller 上的 StAXStreamConnector.handleEndElement(StAXStreamConnector.java:216)。 StAXStreamConnector.bridge(StAXStreamConnector.java:185) 在 com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:370) 在 com.sun.xml.bind.v2.runtime.unmarshaller。 UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:349) 在 org.apache.cxf.jaxb.JAXBEncoderDecoder.doUnmarshal(JAXBEncoderDecoder.java:784) 在 org.apache.cxf.jaxb.JAXBEncoderDecoder。在 org.apache.cxf.jaxb.JAXBEncoderDecoder$1.run(JAXBEncoderDecoder.java:812) 在 org.apache.cxf.jaxb 的 java.security.AccessController.doPrivileged(Native Method) 访问 $100(JAXBEncoderDecoder.java:97)。 JAXBEncoderDecoder.unmarshall(JAXBEncoderDecoder.java:810) 在 org.apache.cxf.jaxb.JAXBEncoderDecoder.unmarshall(JAXBEncoderDecoder.java:644) 在 org.apache.cxf.jaxb.io.DataReaderImpl.read(DataReaderImpl.java:157)在 org.apache.cxf.interceptor.DocLiteralInInterceptor.handleMessage(DocLiteralInInterceptor.java:108) 在 org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262) 在 org.apache.cxf.transport.ChainInitiationObserver.onMessage (ChainInitiationObserver.java:122) 在 org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:211) 在 org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:193) 在 org.apache.cxf 的 org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:213) .transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:129) 在 org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:187) 在 org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost (AbstractHTTPServlet.java:110) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:710) 在 org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:166) 在 org.apache。 catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) 在 org.apache.catalina.core.ApplicationFilterChain。doFilter(ApplicationFilterChain.java:206) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175) at org.apache .catalina.core.StandardHostValve.invoke(StandardHostValve.java:128) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java :109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:263) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844) 在 org.apache.coyote.http11。 org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java: 上的 Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:584)447）在java.lang.Thread.run（未知来源）

# google-drive-api - google-drive-sdk : 调用 google-drive-sdk

> ID：12345056
> 
> 赞同：0
> 
> 时间：2012-09-10T03:35:30.617
> 
> 标签：google-drive-api

我是使用谷歌脚本和驱动 SDK 的新手。

我想调用drive-sdk的复制功能。当我尝试它时，我收到一条消息，说我需要身份验证。

我在哪里可以找到如何从谷歌脚本进行身份验证以验证驱动器 SDK 的示例？

提前致谢。

比亚焦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:08:09.187

[https://developers.google.com/drive/quickstart-php](https://developers.google.com/drive/quickstart-php)是 PHP 的一个很好的例子。他们有其他语言的快速入门示例：Java、Python、.NET、Ruby、Javascript、Go 和 Objective-C/iOS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:38:43.647

查看有关[身份验证](https://developers.google.com/drive/about-auth)的 Google Drive SDK 文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-07T12:39:42.480

首先，查看 Google 关于[使用 Drive API 进行授权](https://developers.google.com/drive/v3/web/about-auth)的信息。

然后，选择您希望使用的语言，如果您想玩或正在制作网络应用程序，我会推荐 JavaScript（或 Node.js）。

如果您愿意，可以查看[OAuth2.0 流程的简化说明](https://aaronparecki.com/oauth-2-simplified/)。

澄清一下，您可以用来开始使用 JavaScript（例如）的基本步骤是：

1.  查看[此 Google 官方入门页面](https://developers.google.com/drive/v3/web/quickstart/js)
2.  [在 Google Developers Console 中设置 Drive API](https://console.developers.google.com/flows/enableapi?apiid=drive&pli=1)
3.  从入门页面复制代码
4.  确保将 Google Developer 控制台中的 ClientID 放入复制的代码中
5.  如果您还没有安装 Python（版本 2 或 3）
6.  使用 Python（版本 2）启动 Web 服务器并将“ [http://localhost:8000/quickstart.html](http://localhost:8000/quickstart.html)`python -m SimpleHTTPServer 8000` ”加载到您的 Web 浏览器中

# ravendb - AppHarbor 没有覆盖我的本地 RavenDB 条目

> ID：12345061
> 
> 赞同：0
> 
> 时间：2012-09-10T03:36:46.887
> 
> 标签：ravendb, appharbor

当我将我的应用程序发布到 appHarbor 时，我在访问我的应用程序页面并禁用自定义错误时收到以下错误。它抱怨 Web.config 文件中的行：

`the entry ravendb has already been added`

每次发布时都必须进入并“准备”我的 web.config 和 app.config，这很烦人。它不应该覆盖我在那里输入的任何值吗？

# ruby-on-rails - Rails Flash 消息助手

> ID：12345065
> 
> 赞同：5
> 
> 时间：2012-09-10T03:37:30.597
> 
> 标签：ruby-on-rails, ruby-on-rails-3, flash-message

我已经设置了一个 Flash 助手：

```
def flash_message
  flash.each do |key, msg|
    content_tag :div, msg, :id => key, :class => 'flash'
  end
end 
```

我已经把它放在了我的 application.html.erb 中：

```
<%= flash_message %> 
```

它返回的内容是这样的：

```
{:notice=>"Testing"} 
```

我对rails相当陌生，所以这可能是一个业余错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T04:08:20.457

你是对的，这是一个业余错误。;)

在这里使用 .each 只是迭代消息并为每个消息创建一个 div。您想要的是从 div 中创建一个数组，然后在最后将它们连接在一起。像这样的东西：

```
def flash_message
  flash.map do |key, msg|
    content_tag :div, msg, :id => key, :class => 'flash'
  end.join
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T04:59:15.100

您没有犯任何错误，通过创建帮助程序，您减少了执行常见事情所需的代码量，这对测试和组织非常有用。

我的一个建议是您更改设置并制作共享部分以显示代码，以便更易于管理。然后让您的辅助方法将参数代理到部分函数调用。

首先设置您的部分（将其保存为 shared/_flash_messages.html.erb）：

```
<div class="flash-messages">
<% if messages && messages.length > 0 %>
 <% messages.each do |key, message| %>
  <div id="<%= key %>" class="flash"><%= message %></div>
 <% end %>
<% else %>
  No Messages to display
<% end %>
</div> 
```

然后设置您的辅助方法：

```
def register_flash_message(key,message)
  flash[key]=message
end

def display_flash_messages()
  render 'shared/flash_messages', :messages => flash
end 
```

这将使事情更容易维护和定制。您也不必处理必须在 Ruby 中构建 HTML，因为所有内容都存储在部分中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T04:13:26.233

问题是你的助手的回归。您必须在变量中返回 html 代码。

这个小小的改变对我有用：

```
 def flash_message
    html = ""
    flash.each do |key, msg|
      html << (content_tag :div, msg, :id => key, :class => 'flash')
    end
    html
  end 
```

请记住，ruby 中的最后一行是返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-29T16:18:18.783

要获得 flash 消息范围上的关闭按钮，您可以执行以下操作：（它可能可以写得更好）：

```
 def flash_helper
    content_tag :div, class: "flash-messages" do
      flash.map do |key, value| 
        content_tag :div, class: "alert alert-dismissable alert-#{key}" do 
          content_tag(:span, '&times;'.html_safe, class: :close, 'data-dismiss' => 'alert') + value
        end
      end.join().html_safe
    end
  end 
```

# ios - 如何检查特定应用程序的联系人的 iOS 6 隐私设置？

> ID：12345066
> 
> 赞同：-1
> 
> 时间：2012-09-10T03:37:45.463
> 
> 标签：ios, ios6

我有一个 iOS 应用程序读取本地电话簿并将它们保存到本地 sqlite3 数据库中。你知道在iOS6中，系统中增加了一个名为隐私设置的新功能。

所以我的问题来了，如何在阅读联系人时检查我的应用程序的隐私设置被禁用？有没有发送通知？

我搜索了很多网站，但没有好的结果。目前我的应用程序的行为是，

禁用读取联系人，当应用程序从后台切换到前台时，或有时重新启动（其他时间有效。），联系人仍显示在我的应用程序列表中。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:36:31.197

现在 iOS 6 向公众开放。我试过了，发现很简单。检查地址簿是 nil 很好。这适用于 iOS 发行版。

对于以前的预发布版本，情况并非总是如此。它可能会返回 0 联系电话。无论如何，它不是最终用户版本。

# java - 小程序中 Class.forName("java.util...") 上的“禁止的包名称：java.util”

> ID：12345068
> 
> 赞同：0
> 
> 时间：2012-09-10T03:38:06.683
> 
> 标签：java, reflection, applet, securityexception

我有一个引用 2 个签名 jar 的小程序：

*   我的applet.jar
*   jackson-all-1.9.9.jar

第二次启动小程序时（第一次没有错误），我得到这个：

```
Exception in thread "thread applet-main.MyApplet-1"
java.lang.ExceptionInInitializerError
              at org.codehaus.jackson.map.deser.StdDeserializerProvider.<init>(StdDeserializerProvider.java:81)
              at org.codehaus.jackson.map.ObjectMapper.<init>(ObjectMapper.java:398)
              at org.codehaus.jackson.map.ObjectMapper.<init>(ObjectMapper.java:358)
              at org.codehaus.jackson.map.ObjectMapper.<init>(ObjectMapper.java:328)
              at net.Remote.<init>(Remote.java:50)
              at main.Env.init(Env.java:44)
              at main.MyApplet.init(MyApplet.java:25)
              at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
              at java.lang.Thread.run(Unknown Source) 
Caused by: java.lang.SecurityException: Prohibited package name: java.util
              at java.lang.ClassLoader.preDefineClass(Unknown Source)
              at java.lang.ClassLoader.defineClassCond(Unknown Source)
              at java.lang.ClassLoader.defineClass(Unknown Source)
              at java.security.SecureClassLoader.defineClass(Unknown Source)
              at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
              at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
              at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
              at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
              at java.lang.ClassLoader.loadClass(Unknown Source)
              at java.lang.Class.forName0(Native Method)
              at java.lang.Class.forName(Unknown Source)
              at org.codehaus.jackson.map.deser.BasicDeserializerFactory.<clinit>(BasicDeserializerFactory.java:74)
              ... 9 more 
```

有问题的行是以下 try-catch 块中的第一行：

```
try {
    Class<?> key = Class.forName("java.util.ConcurrentNavigableMap");
    Class<?> value = Class.forName("java.util.ConcurrentSkipListMap");
    @SuppressWarnings("unchecked")
        Class<? extends Map<?,?>> mapValue = (Class<? extends Map<?,?>>) value;
    _mapFallbacks.put(key.getName(), mapValue);
} catch (ClassNotFoundException cnfe) { // occurs on 1.5
} 
```

有几件事我不明白：

*   为什么我的 Java7 JVM 没有将其**从运行时库中取出**？反而
*   为什么它会**尝试`/java/util/ConcurrentNavigableMap.class`**从我的服务器下载，这显然失败了`404`？
*   ~~既然失败了，为什么它会**尝试连续快速重新下载`myapplet.jar`25次**，每次都成功（`200`），每次都返回相同的jar文件？~~

**更新**我不确定 25 次重试是否是由试图加载类的类加载器引起的，可能是其他一些代码试图加载资源（这仍然很奇怪，但与`CurrentNavigableMap`问题无关），所以我'将从我的问题中排除。

注意我猜它不会尝试重新下载jackson jar文件，因为该文件已在`cache_archive`属性中列出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:07:45.293

这是？

错误的：

```
Class.forName("java.util.ConcurrentNavigableMap"); 
```

正确：http:
[//java.sun.com/javase/ja/6/docs/ja/api/java/util/concurrent/package-tree.html](http://java.sun.com/javase/ja/6/docs/ja/api/java/util/concurrent/package-tree.html)

```
Class.forName("java.util.concurrent.ConcurrentNavigableMap"); 
```

# objective-c - admob portate 模式不能横向工作

> ID：12345072
> 
> 赞同：0
> 
> 时间：2012-09-10T03:39:11.353
> 
> 标签：objective-c, ios, ipad, cordova

我想知道当用户将 ipad 置于横向模式而不是 portate 时如何调整高度

这段代码适用于肖像，但我需要做些什么才能让它在风景中也能正常工作。我试过谷歌搜索和其他博客，但所有尝试都失败了。

```
- (void) viewDidLoad
{

    bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeSmartBannerPortrait];
    bannerView_.adUnitID = MY_BANNER_UNIT_ID;
    CGRect screenRect = [[UIScreen mainScreen] bounds];
    CGFloat screenWidth = screenRect.size.width;
    CGFloat screenHeight = screenRect.size.height;
    CGFloat screenXPos = (screenWidth /2);
    CGFloat screenYPos = screenHeight - 60;
    [bannerView_ setCenter:CGPointMake(screenXPos, screenYPos)];
    bannerView_.rootViewController = self;
    [self.view addSubview:bannerView_];

    // Initiate a generic request to load it with an ad.
    GADRequest *request = [GADRequest request];
    // remove this line when you are ready to deploy for real

    [bannerView_ loadRequest:request];

    [super viewDidLoad];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:54:25.137

试试这个，

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    if (UIInterfaceOrientationIsLandscape(toInterfaceOrientation)) {
        //your frame for landscape
    } else {
        //your frame for portrait
    } 
} 
```

# iphone - 如何将 POST 值发送到网站？

> ID：12345074
> 
> 赞同：0
> 
> 时间：2012-09-10T03:39:24.013
> 
> 标签：iphone, objective-c, asihttprequest

我需要通过 UITextField 从我的应用程序提交值，我希望这个值显示在我发送请求的网站上。我使用 ASIHTTPRequest 向网站发送请求。我试过这样的事情：

```
 NSURL *url = [NSURL URLWithString:@"http://www.project4hire.com/freelance_job_16265.html"];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setRequestMethod:@"POST"];
//
[request setPostValue:priceField  forKey:@"bid"];
[request setPostValue:dayField forKey:@"days2c"];
[request setPostValue:commentField forKey:@"comment"];
[request setPostValue:@"1" forKey:@"notify"];
[request setPostValue:@"placebid" forKey:@"Place Bid >>"];
[request setPostValue:@"e6fb12104854e6e9" forKey:@"suid"];
[request setPostValue:@"placebid" forKey:@"a"];
[request setPostValue:@"16265" forKey:@"pid"];

[request setDelegate:self];
[request setDidFailSelector:@selector(requestBidFailed:)];
[request setDidFinishSelector:@selector(requestBidFinished:)];
[request startAsynchronous];

}
- (void)requestBidFailed:(ASIHTTPRequest *)request
{
//notify user
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Error sending         request to the server" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
[alert show];

}

- (void)requestBidFinished:(ASIHTTPRequest *)request
{
NSLog(@"Status: %d", request.responseStatusCode);
NSLog(@"string: %@",request.responseString);
} 
```

这是投标表格：[BidForm](http://pastebin.com/kViv3bT6) 这是请求和响应标头：[标头](http://pastebin.com/YCNPqG96)

我收到回复 200，但我发送的值未显示在网站上。谁能给我建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:12:41.330

我有同样的问题，但我的在模拟器上工作，但在设备上没有工作，然后我读了一篇文章，它显示 ASIHTTPRequest API 的创始人不再更新他们的库（我不知道那篇文章是否可靠） ，所以我决定使用一个更新的库，即 RestKit。您可以从这个网站下载并设置它：restkit.org，如果您在安装时遇到任何问题，可以请我帮助您。以下是在 restkit 库上发布的简单代码：

```
- (void)post
{
    [RKClient clientWithBaseURLString:@"http://www.project4hire.com"];

    NSDictionary* params = [NSDictionary dictionaryWithObjectsAndKeys:
                            priceField, @"bid",
                            dayField, @"days2c", nil];

    [[RKClient sharedClient] post:@"/freelance_job_16265.html" params:params delegate:self];
}

- (void)objectLoader:(RKObjectLoader*)objectLoader didFailWithError:(NSError*)error {
    NSRange range = [[error localizedDescription] rangeOfString:@"-1012"];
    if (range.length > 0){
        //Do whatever here to handle authentication failures
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Error sending         request to the server" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
    }
    RKLogError(@"Hit error: %@", error);
}

- (void)request:(RKRequest*)request didLoadResponse:(RKResponse*)response
{
    if ([request isGET]) {
        // Handling GET /foo.xml

        if ([response isOK]) {
            // Success! Let's take a look at the data
            NSLog(@"Retrieved XML: %@", [response bodyAsString]);
        }

    } else if ([request isPOST]) {

        // Handling POST /other.json
        if ([response isJSON]) {
            NSLog(@"Got a JSON response back from our POST!");
        }

    } else if ([request isDELETE]) {

        // Handling DELETE /missing_resource.txt
        if ([response isNotFound]) {
            NSLog(@"The resource path '%@' was not found.", [request resourcePath]);
        }
    }

    NSLog(@"HTTP status code:     %d", response.statusCode);
    NSLog(@"HTTP status message:  %@", [response localizedStatusCodeString]);
    NSLog(@"Header fields: %@", response.allHeaderFields);
    NSLog(@"Body: %@", response.bodyAsString);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:49:28.470

我注意到您正在发布到 HTML 文件。除非您有一些特殊设置以允许 HTML 文件可执行，否则 html 文件将不会处理您发布给它的数据。是只有一个值没有显示还是所有值都没有显示。如果所有值都丢失，那么我最初所说的内容是正确的，您将需要使用 PHP、CF、Perl 或任何您想要接收从应用程序发布的数据的语言。

# c# - Index out of range for rectangle array?

> ID：12345077
> 
> 赞同：1
> 
> 时间：2012-09-10T03:40:37.907
> 
> 标签：c#, arrays, xna, collision-detection, rectangles

I have this problem with assigning individual rectangles to each value in an list. To try this out I first tried to give a rectangle to value 5.

```
snakeBodyRectangleArray[5] = new Rectangle((int)snakeBodyArray[5].X, (int)snakeBodyArray[5].Y, textureSnakeBody.Width, textureSnakeBody.Height);
// above is in update 
protected override void Initialize()
    {
        // TODO: Add your initialization logic here
        graphics.PreferredBackBufferWidth = 500;
        graphics.PreferredBackBufferHeight = 500;
        graphics.IsFullScreen = false;
        graphics.ApplyChanges();
        Window.Title = "Curvy Snake";

        snakeBodyArray = new List<Vector2>();
        snakeBodyRectangleArray = new List<Rectangle>();

        bodyTimer.Elapsed += new ElapsedEventHandler(updateBodyPositions);
        bodyTimer.Interval = 120;
        bodyTimer.Enabled = true;

        base.Initialize();
    } 
```

If you need more code, just ask.

thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T03:50:50.890

It looks like that your array is a 5 element one or more precisely it's `number of element is <6` and you are trying to access an element which is out of the range of `snakeBodyRectangleArray`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:43:54.110

How is snakeBodyRectangleArray declared? Does it have a size of 6 or higher?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T00:03:46.467

I used

```
snakeBodyRectangleArray[bodyNumber] = new Rectangle((int)snakeBodyArray[bodyNumber].X, (int)snakeBodyArray[bodyNumber].Y, textureSnakeBody.Width, textureSnakeBody.Height); 
```

and put it into a private void.

# android - 从菜单充气器开始新活动

> ID：12345079
> 
> 赞同：1
> 
> 时间：2012-09-10T03:41:34.400
> 
> 标签：android, android-activity

我正在使用 Android 并且我有一个菜单选项，我希望该选项在我点击它时启动一个新的活动，但是当我尝试实现启动活动时，我总是强制关闭这里是我的代码：

```
@Override
public boolean onOptionsItemSelected(MenuItem item)
{
    switch (item.getItemId()) 
    {
        case R.id.tentang :
            startActivity(new Intent(getApplicationContext(), about.class));
            finish();
            return true;
        default : 
            return super.onContextItemSelected(item);
    }
} 
```

你有什么解决办法吗？

编辑：这个论坛中的一些人让我展示我的 logcat，这里是：

```
09-10 12:08:01.096: INFO/Process(764): Sending signal. PID: 764 SIG: 9
09-10 12:08:01.306: INFO/ActivityManager(68): Displayed com.dg.tkd/.digital_tkd: +5s285ms
09-10 12:08:01.947: INFO/ActivityManager(68): Process com.android.launcher (pid 764) has died.
09-10 12:08:01.957: INFO/WindowManager(68): WIN DEATH: Window{407e2040 com.android.launcher/com.android.launcher2.Launcher paused=false}
09-10 12:08:04.027: DEBUG/dalvikvm(68): GC_EXPLICIT freed 316K, 47% free 4468K/8327K, external 2904K/3627K, paused 164ms
09-10 12:08:06.926: WARN/KeyCharacterMap(801): No keyboard for id 0
09-10 12:08:06.936: WARN/KeyCharacterMap(801): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
09-10 12:08:07.837: DEBUG/dalvikvm(317): GC_EXPLICIT freed 13K, 55% free 2577K/5703K, external 716K/1038K, paused 847ms
09-10 12:08:08.906: INFO/ActivityManager(68): Starting: Intent { cmp=com.dg.tkd/.about } from pid 801
09-10 12:08:09.966: WARN/ActivityManager(68): Activity pause timeout for HistoryRecord{40622310 com.dg.tkd/.digital_tkd}
09-10 12:08:10.487: DEBUG/dalvikvm(801): GC_EXTERNAL_ALLOC freed 69K, 52% free 2604K/5379K, external 908K/1038K, paused 117ms
09-10 12:08:10.856: ERROR/dalvikvm-heap(801): 12111476-byte external allocation too large for this process.
09-10 12:08:10.987: ERROR/GraphicsJNI(801): VM won't let us allocate 12111476 bytes
09-10 12:08:10.987: DEBUG/dalvikvm(801): GC_FOR_MALLOC freed 2K, 52% free 2602K/5379K, external 908K/1038K, paused 46ms
09-10 12:08:10.997: DEBUG/skia(801): --- decoder->decode returned false
09-10 12:08:11.026: DEBUG/AndroidRuntime(801): Shutting down VM
09-10 12:08:11.026: WARN/dalvikvm(801): threadid=1: thread exiting with uncaught exception (group=0x40015560)
09-10 12:08:11.126: ERROR/AndroidRuntime(801): FATAL EXCEPTION: main
09-10 12:08:11.126: ERROR/AndroidRuntime(801): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dg.tkd/com.dg.tkd.about}: android.view.InflateException: Binary XML file line #7: Error inflating class android.widget.ImageView
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1622)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1638)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:928)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.os.Looper.loop(Looper.java:123)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.app.ActivityThread.main(ActivityThread.java:3647)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at java.lang.reflect.Method.invokeNative(Native Method)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at java.lang.reflect.Method.invoke(Method.java:507)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at dalvik.system.NativeStart.main(Native Method)
09-10 12:08:11.126: ERROR/AndroidRuntime(801): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class android.widget.ImageView
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.view.LayoutInflater.createView(LayoutInflater.java:518)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.app.Activity.setContentView(Activity.java:1657)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at com.dg.tkd.about.onCreate(about.java:11)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1586)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     ... 11 more
09-10 12:08:11.126: ERROR/AndroidRuntime(801): Caused by: java.lang.reflect.InvocationTargetException
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at java.lang.reflect.Constructor.constructNative(Native Method)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.view.LayoutInflater.createView(LayoutInflater.java:505)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     ... 22 more
09-10 12:08:11.126: ERROR/AndroidRuntime(801): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:450)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:326)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.content.res.Resources.loadDrawable(Resources.java:1709)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.widget.ImageView.<init>(ImageView.java:118)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     at android.widget.ImageView.<init>(ImageView.java:108)
09-10 12:08:11.126: ERROR/AndroidRuntime(801):     ... 25 more
09-10 12:08:11.197: WARN/ActivityManager(68):   Force finishing activity com.dg.tkd/.about
09-10 12:08:11.276: WARN/ActivityManager(68):   Force finishing activity com.dg.tkd/.digital_tkd
09-10 12:08:11.747: INFO/dalvikvm(68): Jit: resizing JitTable from 2048 to 4096
09-10 12:08:11.841: WARN/ActivityManager(68): Activity pause timeout for HistoryRecord{4065fc60 com.dg.tkd/.about}
09-10 12:08:11.926: INFO/ActivityManager(68): Start proc com.android.launcher for activity com.android.launcher/com.android.launcher2.Launcher: pid=810 uid=10001 gids={}
09-10 12:08:14.467: INFO/WindowManager(68): Setting rotation to 0, animFlags=1
09-10 12:08:14.497: INFO/ActivityManager(68): Config changed: { scale=1.0 imsi=310/260 loc=en_US touch=3 keys=2/1/2 nav=3/1 orien=1 layout=18 uiMode=17 seq=20}
09-10 12:08:16.466: WARN/WindowManager(68): Window freeze timeout expired.
09-10 12:08:16.466: WARN/WindowManager(68): Force clearing orientation change: Window{4068bc20 Toast paused=false}
09-10 12:08:16.657: INFO/ActivityThread(810): Pub com.android.launcher2.settings: com.android.launcher2.LauncherProvider
09-10 12:08:17.976: DEBUG/dalvikvm(810): GC_EXTERNAL_ALLOC freed 461K, 54% free 2684K/5767K, external 1032K/1038K, paused 120ms
09-10 12:08:18.946: WARN/ActivityManager(68): Launch timeout has expired, giving up wake lock!
09-10 12:08:19.087: INFO/ActivityManager(68): Displayed com.android.launcher/com.android.launcher2.Launcher: +7s195ms (total +9s128ms)
09-10 12:08:19.447: INFO/Process(801): Sending signal. PID: 801 SIG: 9
09-10 12:08:19.567: INFO/ActivityManager(68): Process com.dg.tkd (pid 801) has died.
09-10 12:08:19.576: ERROR/InputDispatcher(68): channel '4076f4f8 com.dg.tkd/com.dg.tkd.digital_tkd (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
09-10 12:08:19.576: ERROR/InputDispatcher(68): channel '4076f4f8 com.dg.tkd/com.dg.tkd.digital_tkd (server)' ~ Channel is unrecoverably broken and will be disposed!
09-10 12:08:19.637: INFO/WindowManager(68): WIN DEATH: Window{4068bc20 Toast paused=false}
09-10 12:08:19.996: WARN/ActivityManager(68): Activity idle timeout for HistoryRecord{4065fc60 com.dg.tkd/.about}
09-10 12:08:20.256: INFO/WindowManager(68): WIN DEATH: Window{4076f4f8 com.dg.tkd/com.dg.tkd.digital_tkd paused=true}
09-10 12:08:20.427: ERROR/InputDispatcher(68): Received spurious receive callback for unknown input channel.  fd=162, events=0x8
09-10 12:08:21.057: WARN/InputManagerService(68): Got RemoteException sending setActive(false) notification to pid 801 uid 10036
09-10 12:08:21.427: DEBUG/dalvikvm(810): GC_EXTERNAL_ALLOC freed 57K, 53% free 2756K/5767K, external 1561K/1572K, paused 92ms
09-10 12:08:21.767: DEBUG/dalvikvm(68): GC_EXPLICIT freed 640K, 47% free 4488K/8327K, external 3079K/3627K, paused 230ms
09-10 12:08:24.277: DEBUG/dalvikvm(810): GC_CONCURRENT freed 207K, 50% free 2934K/5767K, external 1796K/2091K, paused 16ms+13ms
09-10 12:08:24.936: DEBUG/dalvikvm(810): GC_EXTERNAL_ALLOC freed 135K, 51% free 2844K/5767K, external 2026K/2091K, paused 95ms
09-10 12:08:25.396: ERROR/dalvikvm-heap(810): 12111476-byte external allocation too large for this process.
09-10 12:08:25.456: ERROR/GraphicsJNI(810): VM won't let us allocate 12111476 bytes
09-10 12:08:25.648: DEBUG/dalvikvm(810): GC_FOR_MALLOC freed 4K, 51% free 2839K/5767K, external 1917K/2091K, paused 55ms
09-10 12:08:25.648: DEBUG/skia(810): --- decoder->decode returned false
09-10 12:08:25.648: WARN/dalvikvm(810): threadid=9: thread exiting with uncaught exception (group=0x40015560)
09-10 12:08:25.697: ERROR/AndroidRuntime(810): FATAL EXCEPTION: launcher-loader
09-10 12:08:25.697: ERROR/AndroidRuntime(810): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
09-10 12:08:25.697: ERROR/AndroidRuntime(810):     at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
09-10 12:08:25.697: ERROR/AndroidRuntime(810):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:450)
09-10 12:08:25.697: ERROR/AndroidRuntime(810):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:326)
09-10 12:08:25.697: ERROR/AndroidRuntime(810):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
09-10 12:08:25.697: ERROR/AndroidRuntime(810):     at android.content.res.Resources.loadDrawable(Resources.java:1709)
09-10 12:08:25.697: ERROR/AndroidRuntime(810):     at android.content.res.Resources.getDrawable(Resources.java:581)
09-10 12:08:25.697: ERROR/AndroidRuntime(810):     at android.app.ContextImpl$ApplicationPackageManager.getDrawable(ContextImpl.java:2147)
09-10 12:08:25.697: ERROR/AndroidRuntime(810):     at android.content.pm.PackageItemInfo.loadIcon(PackageItemInfo.java:140)
09-10 12:08:25.697: ERROR/AndroidRuntime(810):     at android.content.pm.ComponentInfo.loadDefaultIcon(ComponentInfo.java:154)
09-10 12:08:25.697: ERROR/AndroidRuntime(810):     at android.content.pm.PackageItemInfo.loadIcon(PackageItemInfo.java:145)
09-10 12:08:25.697: ERROR/AndroidRuntime(810):     at com.android.launcher2.IconCache.cacheLocked(IconCache.java:142)
09-10 12:08:25.697: ERROR/AndroidRuntime(810):     at com.android.launcher2.IconCache.getTitleAndIcon(IconCache.java:91)
09-10 12:08:25.697: ERROR/AndroidRuntime(810):     at com.android.launcher2.ApplicationInfo.<init>(ApplicationInfo.java:74)
09-10 12:08:25.697: ERROR/AndroidRuntime(810):     at com.android.launcher2.LauncherModel$LoaderTask.loadAllAppsByBatch(LauncherModel.java:1119)
09-10 12:08:25.697: ERROR/AndroidRuntime(810):     at com.android.launcher2.LauncherModel$LoaderTask.loadAndBindAllApps(LauncherModel.java:1019)
09-10 12:08:25.697: ERROR/AndroidRuntime(810):     at com.android.launcher2.LauncherModel$LoaderTask.run(LauncherModel.java:522)
09-10 12:08:25.697: ERROR/AndroidRuntime(810):     at android.os.Handler.handleCallback(Handler.java:587)
09-10 12:08:25.697: ERROR/AndroidRuntime(810):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-10 12:08:25.697: ERROR/AndroidRuntime(810):     at android.os.Looper.loop(Looper.java:123)
09-10 12:08:25.697: ERROR/AndroidRuntime(810):     at android.os.HandlerThread.run(HandlerThread.java:60)
09-10 12:08:25.748: WARN/ActivityManager(68):   Force finishing activity com.android.launcher/com.android.launcher2.Launcher
09-10 12:08:25.856: INFO/ActivityManager(68): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10000000 cmp=com.android.launcher/com.android.launcher2.Launcher } from pid 0
09-10 12:08:29.367: INFO/ActivityManager(68): Displayed com.android.launcher/com.android.launcher2.Launcher: +3s494ms
09-10 12:08:32.178: INFO/Process(810): Sending signal. PID: 810 SIG: 9
09-10 12:08:32.257: INFO/ActivityManager(68): Process com.android.launcher (pid 810) has died.
09-10 12:08:32.286: INFO/WindowManager(68): WIN DEATH: Window{406808e0 com.android.launcher/com.android.launcher2.Launcher paused=false}
09-10 12:08:32.666: INFO/ActivityManager(68): Start proc com.android.launcher for activity com.android.launcher/com.android.launcher2.Launcher: pid=822 uid=10001 gids={}
09-10 12:08:33.267: DEBUG/dalvikvm(33): GC_EXPLICIT freed 8K, 54% free 2520K/5379K, external 716K/1038K, paused 589ms
09-10 12:08:33.447: DEBUG/dalvikvm(33): GC_EXPLICIT freed <1K, 54% free 2520K/5379K, external 716K/1038K, paused 179ms
09-10 12:08:33.767: DEBUG/dalvikvm(33): GC_EXPLICIT freed <1K, 54% free 2520K/5379K, external 716K/1038K, paused 195ms
09-10 12:08:34.896: INFO/ActivityThread(822): Pub com.android.launcher2.settings: com.android.launcher2.LauncherProvider
09-10 12:08:35.977: DEBUG/dalvikvm(822): GC_EXTERNAL_ALLOC freed 462K, 54% free 2685K/5767K, external 1032K/1038K, paused 109ms
09-10 12:08:37.046: WARN/InputManagerService(68): Got RemoteException sending setActive(false) notification to pid 810 uid 10001
09-10 12:08:37.267: INFO/ActivityManager(68): Displayed com.android.launcher/com.android.launcher2.Launcher: +4s987ms
09-10 12:08:37.627: DEBUG/dalvikvm(822): GC_EXTERNAL_ALLOC freed 59K, 53% free 2753K/5767K, external 1561K/1572K, paused 105ms
09-10 12:08:40.757: DEBUG/dalvikvm(822): GC_CONCURRENT freed 231K, 50% free 2908K/5767K, external 1981K/2091K, paused 19ms+8ms
09-10 12:08:41.056: DEBUG/dalvikvm(822): GC_EXTERNAL_ALLOC freed 89K, 51% free 2829K/5767K, external 1944K/2091K, paused 97ms
09-10 12:08:41.546: ERROR/dalvikvm-heap(822): 12111476-byte external allocation too large for this process.
09-10 12:08:41.687: ERROR/GraphicsJNI(822): VM won't let us allocate 12111476 bytes
09-10 12:08:41.697: DEBUG/dalvikvm(822): GC_FOR_MALLOC freed 2K, 51% free 2826K/5767K, external 1926K/2091K, paused 52ms
09-10 12:08:41.747: DEBUG/skia(822): --- decoder->decode returned false
09-10 12:08:41.767: WARN/dalvikvm(822): threadid=10: thread exiting with uncaught exception (group=0x40015560)
09-10 12:08:41.806: ERROR/AndroidRuntime(822): FATAL EXCEPTION: launcher-loader
09-10 12:08:41.806: ERROR/AndroidRuntime(822): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
09-10 12:08:41.806: ERROR/AndroidRuntime(822):     at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
09-10 12:08:41.806: ERROR/AndroidRuntime(822):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:450)
09-10 12:08:41.806: ERROR/AndroidRuntime(822):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:326)
09-10 12:08:41.806: ERROR/AndroidRuntime(822):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
09-10 12:08:41.806: ERROR/AndroidRuntime(822):     at android.content.res.Resources.loadDrawable(Resources.java:1709)
09-10 12:08:41.806: ERROR/AndroidRuntime(822):     at android.content.res.Resources.getDrawable(Resources.java:581)
09-10 12:08:41.806: ERROR/AndroidRuntime(822):     at android.app.ContextImpl$ApplicationPackageManager.getDrawable(ContextImpl.java:2147)
09-10 12:08:41.806: ERROR/AndroidRuntime(822):     at android.content.pm.PackageItemInfo.loadIcon(PackageItemInfo.java:140)
09-10 12:08:41.806: ERROR/AndroidRuntime(822):     at android.content.pm.ComponentInfo.loadDefaultIcon(ComponentInfo.java:154)
09-10 12:08:41.806: ERROR/AndroidRuntime(822):     at android.content.pm.PackageItemInfo.loadIcon(PackageItemInfo.java:145)
09-10 12:08:41.806: ERROR/AndroidRuntime(822):     at com.android.launcher2.IconCache.cacheLocked(IconCache.java:142)
09-10 12:08:41.806: ERROR/AndroidRuntime(822):     at com.android.launcher2.IconCache.getTitleAndIcon(IconCache.java:91)
09-10 12:08:41.806: ERROR/AndroidRuntime(822):     at com.android.launcher2.ApplicationInfo.<init>(ApplicationInfo.java:74)
09-10 12:08:41.806: ERROR/AndroidRuntime(822):     at com.android.launcher2.LauncherModel$LoaderTask.loadAllAppsByBatch(LauncherModel.java:1119)
09-10 12:08:41.806: ERROR/AndroidRuntime(822):     at com.android.launcher2.LauncherModel$LoaderTask.loadAndBindAllApps(LauncherModel.java:1019)
09-10 12:08:41.806: ERROR/AndroidRuntime(822):     at com.android.launcher2.LauncherModel$LoaderTask.run(LauncherModel.java:522)
09-10 12:08:41.806: ERROR/AndroidRuntime(822):     at android.os.Handler.handleCallback(Handler.java:587)
09-10 12:08:41.806: ERROR/AndroidRuntime(822):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-10 12:08:41.806: ERROR/AndroidRuntime(822):     at android.os.Looper.loop(Looper.java:123)
09-10 12:08:41.806: ERROR/AndroidRuntime(822):     at android.os.HandlerThread.run(HandlerThread.java:60) 
```

谢谢大家，你们太棒了！现在我完成了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T04:00:02.467

尝试这个

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    //Toast.makeText(this, "You pressed the icon!", Toast.LENGTH_LONG).show();
    Intent i = new Intent(MainActivity.this, SecondActivity.class);
    startActivity(i);

    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T03:47:42.387

在 return 语句中更改：

```
super.onContextItemSelected(item); 
```

至：

```
super.onOptionsItemSelected(item); 
```

我修改了你的方法：

```
@Override
public boolean onOptionsItemSelected(MenuItem item)
{
    switch (item.getItemId()) 
    {
        case R.id.tentang :
            startActivity(new Intent(getApplicationContext(), about.class));
            return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T04:34:09.620

我猜您没有将 Activity 添加到 AndroidManifest.xml。假设您的 Activity 是 com.yourdomain.About。将这些行添加到 AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.yourdomain"
    android:versionCode="1"
    android:versionName="1.0">

<uses-sdk android:minSdkVersion="7" />

<application .......

<activity
    android:name=".About"
    android:label="About!" >
</activity> 
```

我希望这有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T12:40:27.893

尝试这个：

```
@Override
public boolean onOptionsItemSelected(MenuItem item){

    switch(item.getItemId()){
case R.id.tentang : 
newActivity();

};  

    return super.onOptionsItemSelected(item);
}    

    private void newActivity(){

        Intent i=new Intent();
        i.setClass(Activity.this, about.class);
        startActivity(i);   
    } 
```

其实你的问题是：

```
OutOfMemoryError: bitmap size exceeds VM budget. 
```

“[将图像加载到位图对象时出现奇怪的内存不足问题](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object/823966#823966)”可能会对您有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T03:47:26.327

尝试删除finish()。

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    Toast.makeText(this, "selected ", 20).show();
    Intent intent_details = new Intent(this, about.class);
    startActivity(intent_details);
    return true;
} 
```

# scheme - MIT-Scheme：无限循环上的不同行为取决于数字

> ID：12345080
> 
> 赞同：1
> 
> 时间：2012-09-10T03:41:53.813
> 
> 标签：scheme, sicp, mit-scheme

当我根据我使用的数字运行代码时看到两种不同的行为时，我正在研究 SICP 书中练习 1.6 的解决方案。

如果我在调用 sqrt-iter 过程时使用自然数，解释器永远不会停止，但是当我使用浮点数强制十进制除法时，解释器会响应：Aborting！：超出最大递归深度。

有谁知道不同行为的原因？

我的回答提出了一个要点，以帮助任何想要运行代码的人，只需复制和粘贴：[http](http://bit.ly/Qv1wru) ://bit.ly/Qv1wru 。mit-scheme 版本是 9.1.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:01:20.000

您的`good-enough?`程序似乎错误，请尝试以下程序：

```
(define (good-enough? guess x)
  (< (abs (- (sqr guess) x)) 0.001)) 
```

# php - 从 PHP 脚本调用 python 脚本

> ID：12345084
> 
> 赞同：0
> 
> 时间：2012-09-10T03:42:28.667
> 
> 标签：php, python

我需要从 PHP 脚本调用 python 脚本并将结果返回给 PHP。我玩`proc_open`功能。但它不起作用。你知道为什么吗？这是 PHP 脚本：

```
$msg = "this is a new message \n bla ble !@#$%^&*%(*))(_+=-";
$descriptorspec = array(
0 => array("pipe","r"),
1 => array("pipe","w"),
2 => array("file","./error.log","a")
) ;
$cwd = './' ;
$command = 'python ./upper.py ';
$proc = proc_open($command, $descriptorspec, $pipes, $cwd) ;
if ( is_resource( $proc ) ) {
    fwrite( $pipes[0], $msg );
    fclose( $pipes[0] );
    fclose( $pipes[1] );
    proc_close($proc);
    echo "proc is closed\n";
}
else {
    echo 'proc is not a resource';
} 
```

python `upper.py' 脚本

```
import sys
print 'in python script'

data = sys.stdin.readlines()
print data 
```

输出是：

```
in php script
proc is closed 
```

我在error.log中有错误：

```
close failed in file object destructor:
sys.excepthook is missing
lost sys.stderr 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T03:22:17.617

以防万一答案对任何人都很重要：

发生错误是因为您在`$pipes[1]`python 脚本有机会编写它之前立即关闭，甚至很可能在它开始运行之前。我的系统（Mac）上的错误是：

```
close failed: [Errno 32] Broken pipe 
```

（只是出于好奇，你运行的是什么类型的系统，它会给你这个奇怪的信息？）

无论如何，您可以通过在关闭管道之前读取管道来避免错误，例如，

```
stream_get_contents($pipes[1]); 
```

这保证了 python 脚本将有机会在管道仍处于打开状态时写入管道（至少一次）。

如果您是 python 脚本的作者，那么让它写入输出没有多大意义，除非您的 PHP 脚本要读取它所写的内容。

另一方面，如果 python 脚本不是您制作的，并且它写入您不关心的输出，您*可能*可以通过玩一些游戏来避免读取输出`pcntl_wait()`or `pcntl_waitpid()`—— 尽管我不会赌它。一个更安全的选择可能是只读取输出流并将它们扔在地板上。

（提出了一个有趣的问题，无论您是否关心输出：如果您*事先*不知道输出的结尾会是什么样子，并且子进程在您关闭管道并调用之前不会退出`proc_close()`，你怎么知道子进程什么时候真正完成了你叫它做的事情？）

另一种选择（到目前为止我未经测试）可能是将您不关心的任何输出流连接到描述符，例如：

```
array("file", "/dev/null", "w") 
```

`/dev/null`或您的系统上的任何等价物。

# java - 如何使用 xuggler 从 Flash 视频中只创建一个缩略图？

> ID：12345085
> 
> 赞同：2
> 
> 时间：2012-09-10T03:42:36.093
> 
> 标签：java, xuggler

我正在尝试从 *flv 视频的随机位置仅创建一个缩略图。我在网上找到的代码示例并没有真正的帮助。如果有人知道如何做到这一点，或者有可以做到的代码或方法，请分享/解释。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-29T23:37:38.340

我已经浏览了此处提供的示例代码 (http://www.javacodegeeks.com/2011/02/xuggler-tutorial-frames-capture-video.html)，它从给定的输入视频文件中创建缩略图。为了只创建一个，您可以引入一个类级别的成员变量（在示例代码中，变量名称是 imageGrabbed）。这个变量只跟踪缩略图的生成，一旦创建了第一个缩略图，然后在调用函数中（在示例代码中调用函数是 main()）while 循环退出。

希望这可以帮助。

问候，伊斯梅尔。

```
/**
 * VideoThumbnailsExample.java Oct 29, 2012
 */
package com.test;

import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;

import com.xuggle.mediatool.IMediaReader;
import com.xuggle.mediatool.MediaListenerAdapter;
import com.xuggle.mediatool.ToolFactory;
import com.xuggle.mediatool.event.IVideoPictureEvent;
import com.xuggle.xuggler.Global;

/**
 * <pre>
 * Java File.
 * Title        : VideoThumbnailsExample.java
 * Description  : <Description>
 * </pre>
 */
public class VideoThumbnailsExample
{
    public static final double SECONDS_BETWEEN_FRAMES = 1;

    private static final String inputFilename = "/Users/ismail/practice/vlc/sample.3gp";
    private static final String outputFilePrefix = "/Users/ismail/practice/vlc/";

    // The video stream index, used to ensure we display frames from one and
    // only one video stream from the media container.
    private static int mVideoStreamIndex = -1;

    // Time of last frame write
    private static long mLastPtsWrite = Global.NO_PTS;

    public static final long MICRO_SECONDS_BETWEEN_FRAMES = (long) (Global.DEFAULT_PTS_PER_SECOND * SECONDS_BETWEEN_FRAMES);

    public static void main(String[] args)
    {
        long startTime = System.currentTimeMillis();
        long stopTime = 0L;

        IMediaReader mediaReader = ToolFactory.makeReader(inputFilename);

        // stipulate that we want BufferedImages created in BGR 24bit color
        // space

        try
        {
            mediaReader
            .setBufferedImageTypeToGenerate(BufferedImage.TYPE_3BYTE_BGR);

            ImageSnapListener isListener = new ImageSnapListener();

            mediaReader.addListener(isListener);

            // read out the contents of the media file and
            // dispatch events to the attached listener

            while (!isListener.isImageGrabbed())
            {
                mediaReader.readPacket();
            }
            /*
            while (mediaReader.readPacket() == null)
                ;
            */
            //mediaReader.readPacket();
            stopTime = System.currentTimeMillis();

        }
        catch(Exception ex)
        {
            ex.printStackTrace();
        }

        System.out.println("Total Time: " + (stopTime-startTime));

    }

    private static class ImageSnapListener extends MediaListenerAdapter
    {
        public boolean imageGrabbed = false;

        public void onVideoPicture(IVideoPictureEvent event)
        {

            if (event.getStreamIndex() != mVideoStreamIndex)
            {

                // if the selected video stream id is not yet set, go ahead an
                // select this lucky video stream

                if (mVideoStreamIndex == -1)
                    mVideoStreamIndex = event.getStreamIndex();

                // no need to show frames from this video stream
                else
                    return;

            }

            // if uninitialized, back date mLastPtsWrite to get the very first
            // frame

            if (mLastPtsWrite == Global.NO_PTS)

                mLastPtsWrite = event.getTimeStamp()
                        - MICRO_SECONDS_BETWEEN_FRAMES;

            // if it's time to write the next frame

            if (event.getTimeStamp() - mLastPtsWrite >= MICRO_SECONDS_BETWEEN_FRAMES)
            {

                String outputFilename = dumpImageToFile(event.getImage());

                this.imageGrabbed = true; //set this var to true once an image is grabbed out of the movie.

                // indicate file written
                double seconds = ((double) event.getTimeStamp())
                        / Global.DEFAULT_PTS_PER_SECOND;

                System.out.printf("at elapsed time of %6.3f seconds wrote: %s\n",seconds, outputFilename);
                //System.out.printf("at elapsed time of %6.3f seconds wrote: SOMEFILE\n",seconds);

                // update last write time
                mLastPtsWrite += MICRO_SECONDS_BETWEEN_FRAMES;

            }

        }

        private String dumpImageToFile(BufferedImage image)
        {

            try
            {

                String outputFilename = outputFilePrefix
                        + System.currentTimeMillis() + ".jpg";

                System.out.println("Thumbnail image name is going to be : =====>" + outputFilename);

                ImageIO.write(image, "jpg", new File(outputFilename));

                return outputFilename;

            }

            catch (IOException e)
            {
                e.printStackTrace();
                return null;

            }

        }

        public boolean isImageGrabbed() {
            return imageGrabbed;
        }

    }

} 
```

# ruby-on-rails - GitLab 电子邮件未发送？

> ID：12345087
> 
> 赞同：5
> 
> 时间：2012-09-10T03:42:58.780
> 
> 标签：ruby-on-rails, linux, ruby-on-rails-3, debian, gitlab

GitLab 应该在创建帐户时自动向新用户发送包含密码的电子邮件。

我检查了 mail.log 文件，没有看到发送或尝试发送的记录。
我可以通过 postfix 命令行毫无问题地发送邮件。

在 gitlab ui 中，我没有失败或任何事情。当我查看邮件时，我看到这个待处理：

```
 Class      Args 

 Notify     ["new_user_email", 8, "qrnq1kSQ"] 
```

我已经修改了 gitlab.yml 以获得正确的发件人地址：notify@mydomain.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:33:18.123

所以我发现我必须在我的服务器上手动运行 resque 进程才能处理队列中的作业。我将在别处问另一个问题，看看如何使其自动化。

命令是：

```
sudo -u gitlab bundle exec rake environment resque:work QUEUE=* RAILS_ENV=production BACKGROUND=yes 
```

# ruby-on-rails - 当前用户为nil，在生产环境中添加http基本认证后

> ID：12345088
> 
> 赞同：3
> 
> 时间：2012-09-10T03:43:00.163
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, ruby-on-rails-3.2, authlogic

我在我的应用程序中实现了 http 基本身份验证，在实现基本 http 身份验证后，当前用户在生产模式下始终为 nil。粘贴在我的代码下方供您参考。

在应用程序控制器中：

```
def authenticate_user
  if (Rails.env.production? && current_user_session.nil?)
    authenticate_or_request_with_http_basic do |username, password|
      username == HTTP_AUTHENTICATION_USERNAME && password == HTTP_AUTHENTICATION_PASSWORD
    end
  end
end 
```

HTTP 凭证取自初始化文件的位置。

```
HTTP_AUTHENTICATION_USERNAME="xxxx"
HTTP_AUTHENTICATION_PASSWORD="yyy" 
```

我也在用户会话模型中尝试了“allow_http_basic_auth false”，但它没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:20:10.180

我认为问题可能出在您的陈述上

```
if (current_user_session.nil?) 
```

根据我在此处找到的文档 - [Authlogic 文档](http://austinonrails.org/files/authlogic_and_auth_helpers.pdf)，即使对于匿名用户，current_user_session 似乎也从未真正为零。

尝试使用：

```
if (current_user.nil?) 
```

# distributed - Freebase 是键值存储吗？

> ID：12345092
> 
> 赞同：0
> 
> 时间：2012-09-10T03:43:42.773
> 
> 标签：distributed, freebase, key-value-store

freebase 存储系统是如何工作的？它是否使用像 Cassandra 或 MongoDB 这样的分布式键值存储？我一直在寻找有关此详细信息的文档..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:22:08.963

Freebase 使用一个名为 Graphd 的专有[图形数据库](http://en.wikipedia.org/wiki/Graph_database "维基百科上的图形数据库")来存储类型、属性、主题等。

# asp.net - 基本选择脚本需要很长时间才能检索 70 个值

> ID：12345094
> 
> 赞同：0
> 
> 时间：2012-09-10T03:43:59.317
> 
> 标签：asp.net, vb.net, select, execute

我有一个具有数据绑定和模板列的网格视图。我不会在这里粘贴整个 XML 代码，但基本上这里是每一列的细分：

*   项目 ID（数据绑定列）
*   项目类别（数据绑定列）
*   项目子类别（数据绑定列）
*   项目（数据绑定列）
*   订单数量（文本框 - 无界模板字段）
*   供应商（DropDownList 无界模板字段）**
*   项目成本（文本框 - 无界模板字段）
*   付费（复选框 - 无界模板字段）

网格视图仅按所选类别检索所有记录和过滤器（因此每个类别仅提取约 70 条记录 - 所以它不是巨大的）。

在 SSMS - 这需要 0 秒来执行。

在 ASP.net 中大约需要 20 秒。

更糟糕的是，供应商 DropDown 目前是一个空白字段。但是，当我实际将此代码添加到源代码时：

```
<ItemTemplate>
<asp:DropDownList ID="ddSupplier" runat="server" DataSource="<%# PopulateControls() %>"  
                   DataTextField="SupplierName"  DataValueField="SupplierName" />
</ItemTemplate>
<ControlStyle BorderStyle="Solid" />
<HeaderStyle HorizontalAlign="Left" VerticalAlign="Middle" />
<ItemStyle BorderStyle="None" HorizontalAlign="Left" VerticalAlign="Middle" 
           Width="50px" />
 </asp:TemplateField> 
```

然后检索所有值大约需要 60 秒。

我的问题：

1.  有没有更快的方法通过gridview中的基本选择脚本来提取值？
2.  有 1 个或多个带有绑定字段的模板是否有问题？我有其他只包含数据绑定列的数据网格，它们执行得非常快。

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:31:09.777

没看到你后面的代码，我只能说这么多。但是已经有一些问题了。

gridview 中的 70 行并不小。网格在 ViewState 中存储了大量数据。如果可能，对数据进行分页。如果没有，请尝试将会话用于 ViewState。

的数据源`ddSupplier`可能是相同的。设置在`RowDataBound`

```
protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
{
   if (gv.EditIndex == e.Row.RowIndex && 
       e.Row.RowType==DataControlRowType.DataRow) 
   {       
       DropDownList ddSupplier= (DropDownList)e.Row.FindControl("ddSupplier"); 
       //bind the control
       //MySuppliers would be read and kept in Session on first page load
       ddSupplier.DataSource = MySuppliers;
   }
} 
```

模板绑定字段不是问题。

您可以通过分析代码来更好地理解问题，并查看这 20 秒的实际使用情况。

# visual-studio-2012 - Visual Studio 2012 UI 自定义

> ID：12345095
> 
> 赞同：5
> 
> 时间：2012-09-10T03:44:29.763
> 
> 标签：visual-studio-2012, visual-studio-addins

是否有任何可用的加载项可让您自定义 Visual Studio 2012 IDE 的 UI 外观？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T08:39:40.813

[正如Daniel 所说，](https://stackoverflow.com/a/12347936/588868) [Visual Studio 2012 颜色主题编辑器](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)适合您。

还有一个开源项目可以在 VS 2012 中恢复 VS 2010 的图标：

[Visual Studio 图标修补程序](http://vsip.codeplex.com/)。

无论如何我都不会使用它，因为它更像是一种 hack，而不是真正的解决方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T08:34:02.947

此扩展使您可以基本控制 VS2012 调色板：

[http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)

不幸的是，在此扩展中无法控制图标、窗口的外观/圆度等。

# c# - 在 C# 中获取 IE Windows 安全对话框的句柄

> ID：12345099
> 
> 赞同：0
> 
> 时间：2012-09-10T03:44:45.900
> 
> 标签：c#, .net, internet-explorer, console-application

这是我的要求。我需要在 c# 中创建小型控制台应用程序。我将在快速启动时使用它的快捷方式。每当 IE 弹出安全对话框（见下文）询问用户 ID 和密码时，我将从快速启动中调用此应用程序，此应用程序将在弹出窗口中填写用户 ID 和密码。谁能指导我如何做到这一点。

实际上，在开发过程中，我需要（一次又一次）连接不同的服务器，并且所有服务器都有不同的 id 和复杂的 psw。我在想我会在我的快速启动中为每个服务器提供这个应用程序的不同实例。这样每次弹出此对话框时，我需要做的就是单击逻辑快捷方式。是否有意义？？

![在此处输入图像描述](../Images/ca8da2ca680edf9e486095f62322efea.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T23:35:45.657

尝试示例

[http://user:password@thewebsite.com](http://user:password@thewebsite.com)

如果用户和密码正确，这将自动登录，如果不正确，则会向您发送错误 401

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-10T04:04:28.263

您不能将凭据存储在 Windows 保管库中吗？这样，您无需一次又一次地提供用户名/密码。

# php - 多个实体坚持原则2 Zend

> ID：12345103
> 
> 赞同：2
> 
> 时间：2012-09-10T03:45:11.000
> 
> 标签：php, doctrine-orm

我有 3 个实体`Users`，`UserProfile`并且`Staffs`

用户配置文件通过用户 id 链接到用户表 Staff 表使用 userprofileid 链接到用户配置文件

管理员创建用户配置文件并生成注册号、用户名和密码。

我想将用户记录添加到用户表，然后添加用户配置文件，然后将配置文件 ID 添加到人员表。

我想按顺序保留三个实体

我试图为像这样的用户创建一个实例

```
$this->userent->setUsername('xxx');
$this->em->persist($this->userent);
$this->em->flush(); 
```

然后：

```
$this->profileent->setFirstname('xxx');
$this->em->persist($this->profileent);
$this->em->flush(); 
```

基本上一个表单在三个实体之间共享，我想顺序插入三个表，

> 更新

除了`users`实体，我还有一个`usertype`链接到用户的实体......我只想保留外键。我有

`setUserType(Usertype $userType)`方法 users 中 user_type 实体的实例

当我做

```
 $this->userent = new Users();
$this->userent->setUserType($this->em->getRepository('\Campus\Entity\Usertype')->findByUserType("admin")) 
```

我得到了错误

```
Argument 1 passed to Campus\Entity\Users::setUserType() must be an instance of Campus\Entity\Usertype, array given 
```

如果我传递作为 Usertype 实例的数组的值

我收到一条错误消息，说需要 ArrayCollection..help 的数组！！！

```
Argument 1 passed to Doctrine\Common\Collections\ArrayCollection::__construct() must be of the type array, object given, called in D:\xampp\htdocs\zend\library\Doctrine\ORM\UnitOfWork.php on line 406 defined in D:\xampp\htdocs\zend\library\Doctrine\Common\Collections\ArrayCollection.php on line 46 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T22:09:34.743

少考虑数据库，多考虑对象。这就是教义的全部意义。

你想要这样的东西：

```
<?php
// create some entities

$user = new Entity\User();
$user->setUsername('userman');

$profile = new Entity\UserProfile();
$profile->setFirstname('joe');
$profile->setLastname('smith');

$staff = new Entity\Staff();
$staff->setSomething('value-for-something');

// associate those entities together
$profile->setStaff($staff);
$user->setProfile($profile);

// assuming you have set up cascade={"persist"} on your associations
$this->em->persist($user);

// if you haven't set up cascade={"persist"}, you will need to call persist on each entity:
// $this->em->persist($profile);
// $this->em->persist($staff);

$em->flush(); 
```

所以，基本的想法是你构建你的对象，将它们放入 Doctrine 的工作单元（通过调用 persist() 并可能设置一些级联），然后通过调用 flush 在单个事务中将它们全部写入数据库()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:06:37.123

您可以持久化每个实体，然后在最后刷新一次。

如果您的实体之间有关系，您可以检查以下注释

```
cascade={"persist"} 
```

“级联将操作持久化到关联实体。”

看看这里的文档：http: [//docs.doctrine-project.org/en/2.0.x/reference/working-with-associations.html#transitive-persistence-cascade-operations](http://docs.doctrine-project.org/en/2.0.x/reference/working-with-associations.html#transitive-persistence-cascade-operations)

# c - 用指针拆分句子会导致段错误

> ID：12345104
> 
> 赞同：0
> 
> 时间：2012-09-10T03:45:26.827
> 
> 标签：c, pointers

我想用指针把一个句子分成单词。

我写了一些代码，但我真的很困惑，因为我遇到了分段错误。请帮帮我。提前致谢。

```
char **breakstring(char *str)
{
    char **temp=(char **)malloc(5*sizeof(char *));
    char **temp_store = temp;
    while((*str) != '/0')
    {
      while((*str != '\0') && *str!=' ')
      {
      **temp=*str;
      **temp++;
      *str++;
      }

      str++;
      temp++;
    }
    return temp_store;
}

int main()
{
    char **arra;
    char *arr="this is a stupid string";
    arra=breakstring(arr);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T04:00:48.007

有几个问题：

有了这条线：

```
char **temp=(char **)malloc(2*sizeof(char *)); 
```

您只能存储 2 个字，因为您只为 2 个`char *`指针分配内存。但实际上你存储的不止这些。

当您尝试最后一个单词时，您的内部`while`循环尝试读取无效内存，因为它会尝试查找`' '`空间，但它会被`'\0'`.

```
while(*str!=' ')
{
   **temp=*str;
   **temp++;
   *str++;
} 
```

将其更新为：

```
while((*str != '\0') && *str!=' ')
{
   **temp=*str;
   **temp++;
   *str++;
} 
```

第三，您正在返回更新的`temp`指针。即它已被递增并更改为指向最后一个单词。相反，您需要返回`temp`. 你可以这样做：

```
char **breakstring(char *str)
{
    char **temp=(char **)malloc(2*sizeof(char *));
    char **temp_store = temp;
    while((*str) != '/0')
    ....
    return temp_store;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T03:55:59.297

```
char **temp=(char **)malloc(2*sizeof(char *)); 
```

您分配了 2 个指针。您的输入字符串有超过 2 个空格。如果您仍想使用动态内存，则必须定期调用`realloc`以请求更多空间，或者可能引入其他大于 2 的任意最大值。

```
 while(*str!=' ')
  {
**temp=*str;
**temp++;
*str++;
  } 
```

这说的是“当字符串的当前字符不是空格时，将字符串添加到`temp`, 并前进。所以如果你被调用，`"This is a ..."`你最终会得到`"This is a ..."`, `"his is a ..."`,`"is is a ..."`等。在这个循环中你想要前进`str`不分配给`temp`。（您还需要添加条件`*str`，即`while (*str && *str != ' ')`）在循环之外，您需要类似 的内容`*temp++ = str;`，然后跳过所有空格字符。（您可能还想添加一个`NUL`终止符来停止字符串，但是您'已经用`const char *`字符串文字调用了该函数，因此为了保持您可能必须将整个字符串复制到堆上。）

总而言之，我们在这里引入的堆分配量对于字符串操作来说有点不像 C。我建议不要返回堆分配并传递常量字符串，而是查看一个类似`strsep()`（更好的版本`strtok()`）的接口，它会修改调用者的缓冲区。

*更新：* @Rohan 关于返回值问题也是正确的。如果你继续这样做`temp++`，你需要记住分配开始的原始位置，并将其返回。虽然，我会重新审视`strsep`or `strtok_r`。

# mongodb - 在 mongodb 的引用列表中缓慢查询

> ID：12345105
> 
> 赞同：0
> 
> 时间：2012-09-10T03:45:41.713
> 
> 标签：mongodb, morphia

我正在通过 Morphia 并使用 Play 2 在 MongoDB 中的网站中保存搜索日志。该日志具有通常的查询词和结果列表。所以基本上是这样的：

```
public class SearchLog {

    public String query;

    @Indexed
    @Reference(lazy = true, ignoreMissing = true)
    public List<Result> results;

    @Indexed
    @Embedded
    public LocalDateTime timestamp;

} 
```

我根据搜索完成的时间以及结果是否包含“this”来构建查询。

```
Query q = q().filter("timestamp >=", start).filter("timestamp <=", end)
    .field("results").hasThisElement(something).order("timestamp").asList(); 
```

数据库中有大约 8000 个日志条目，每个日志包含约 10-20 个结果。我正在测试的这个特定查询返回大约 4000 个条目。但是，即使使用 Index，查询也非常慢（>10 秒）。我做错了什么/有没有办法优化 MongoDB 的查询方式？

谢谢

# java - Android Java 调用 if AND else 代码块

> ID：12345108
> 
> 赞同：0
> 
> 时间：2012-09-10T03:46:08.450
> 
> 标签：java, android, if-statement

我正在使用 ORMLite，并创建了一个从 ORMLite dao 框架扩展的自定义 DAO。在自定义 dao 中，我重写了 create 方法，并添加了一些逻辑。我查询实体列表，如果不存在则创建一个新实体，如果存在则返回现有实体的 id。查询工作正常，因为我正在运行时调试和检查列表对象。但是，只要列表大小为 0，它就会执行 if..else 的第一个块，然后执行第二个块，完全忽略 return 语句。如果列表不为空，它将按预期工作。

任何人都知道为什么这会表现得很时髦吗？我什至将覆盖方法名称更改为“persist”，以防它出于某种原因递归调用自身，但它不起作用。

```
@Override
public int create(DigitalAsset dAsset) throws SQLException {
        List<DigitalAsset> assets = this.queryForMatching(dAsset);

        if (assets.size() == 0) {
            return super.create(dAsset);
        }
        else {
            return assets.get(0).getId();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:55:03.877

我现在感觉很愚蠢，但经过进一步研究，我发现 ORMLite create 方法返回受影响的行数，而不是 id。事实证明，代码根本没有通过这两个块。已经很晚了，我当时可能还没有完全意识到。

# java - 使用 Play 框架进行 Junit 测试

> ID：12345109
> 
> 赞同：0
> 
> 时间：2012-09-10T03:46:50.033
> 
> 标签：java, junit, playframework-2.0

我正在使用带有 Java 的 Play 2 框架。我有一些方法可以在类中操作全局 Json 对象，并将结果放在一个数组中。这意味着这些方法不接受变量并返回 void。有人可以向我解释如何使用 junit 测试来测试这些方法。我知道在使用 junit 进行测试时接受变量并显式返回值的测试方法。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:50:46.293

为了使您的方法可测试，您需要对其进行更改，使其接受 JSON 对象并返回另一个对象。

而不是这样做：

```
myMethod(); 
```

你会做：

```
myModifiedJsonObject = myMethod(myJsonObject); 
```

*全球*的东西很糟糕。

# vb.net - How do I limit BitConverter.GetBytes() to return only a certain amount of bytes using VB.NET?

> ID：12345111
> 
> 赞同：0
> 
> 时间：2012-09-10T03:46:56.143
> 
> 标签：vb.net, bitconverter

I do:

```
Dim BytArr() as Byte = BitConverter.GetBytes(1234) 
```

Since, by default, they are 32 bits, it returns 4 byte elements.

I want to be able to control it to return only like two bytes. Maybe only three bytes. Are there any built-in functions to control it?

I don't want to rely on using shifting `>> 8 >> 16 >> 24 >> 32`, etc..

I also don't want to rely on type casting the data in GetBytes() to a specific datatype.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T12:56:24.007

It is not that `GetBytes` defaults to 32 bits, it is that `GetBytes` returns an array of the size required to hold the data type. If you pass a Long then you will get a 8 elements in your array.

The best way to control this is indeed casting the data you pass in. Otherwise you could truncate some of the number.

That being said, you could do something like this:

```
Dim BytArr() as Byte = Array.Resize(BitConverter.GetBytes(1234), 2) 
```

But if the value you passed in exceeded what could be stored in 2 bytes (in this case) then you will have some very broken code.

# php - orderby 无法在 wordpress 中处理自定义查询

> ID：12345122
> 
> 赞同：0
> 
> 时间：2012-09-10T03:49:28.983
> 
> 标签：php, wordpress

我在一个 wordpress 网站上工作，我需要我的自定义查询。我设法执行了一个看起来像的查询

```
"SELECT wp_posts.*,a.meta_value as meta FROM wp_posts LEFT JOIN wp_postmeta ON wp_posts.ID = wp_postmeta.post_ID ORDER BY wp_posts.post_date" 
```

这个查询执行得很好我在一个页面的三个地方运行这个查询

现在的问题是我需要在其中一个查询中覆盖顺序，并且需要通过 postmeta 中的值来完成，而我尝试过的 query_posts 似乎不起作用

```
$args = array(
            'orderby' => 'meta',
            'order' => 'DESC'
);

query_posts($args); 
```

但这并没有覆盖查询

如果我尝试 wp_posts 中的任何字段，它似乎可以工作

有什么帮助吗？欣赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:00:43.763

尝试：

  'orderby' => 'meta_value',

# php - 登录 Facebook 应用程序无法获取用户的任何信息

> ID：12345124
> 
> 赞同：0
> 
> 时间：2012-09-10T03:49:39.903
> 
> 标签：php, facebook, codeigniter

我的应用程序使用 facebook SDK 登录有问题（使用 codeigniter 的网络）

首先，使用登录的用户查询数据登录确定，但只有我无法获取的用户电子邮件，

所以，我增加了接收电子邮件的范围`$this->facebook->getLoginUrl('scope'=>'email')`，然后，我收到了电子邮件，但问题是，当我在下面添加代码时，我什么也没得到：

```
$this->facebook->getLoginUrl(array('scope'=>'email','redirect_uri' => $mycurrent_url)) 
```

redirect_uri 到我的 current_url 已更正，但未能获取数据。 **我想要的是，使用redirect_uri 获取所有数据！**

请看代码：

```
$user = $this->facebook->getUser();

    if($user) {

        try {

            $user_info = $this->facebook->api('/me');

            $args = $logout_url;

    $data['getLogoutUrl'] = $this->facebook->getLogoutUrl($args);

    } catch(FacebookApiException $e) {
            echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>';
            $user = null;
        }
    } else {

   $param = array('scope' => 'email','redirect_uri' => $mycurrent_url);

       $data['getURLLogin'] = "<a href=\"".$this->facebook->getLoginUrl($param)."\">Login with facebook</a>";

    } 
```

这段代码有什么问题？

提前感谢您的帮助。

# python - 正则表达式排除特定字符串

> ID：12345125
> 
> 赞同：1
> 
> 时间：2012-09-10T03:49:43.973
> 
> 标签：python, regex, parsing

我在这里阅读了一些帖子，但他们无法帮助我弄清楚我的问题：

您可以阅读下面的正则表达式，它试图匹配排除特定字符串“个人资料图片”的地方。如果表达式的开始字符串不是“个人资料图片”，我想匹配所有其他情况，但它不起作用：

```
re.compile(r"(?!Profile Pictures)</strong></a><div class=\"photoTextSubtitle fsm fwn fcg\">(\d+) photos</div>") 
```

返回匹配的数字（\d+），但“个人资料图片”仍算作其中之一。我尝试了不同的方法，但它们都不起作用。但是，我仍然觉得消极的前瞻性是解决它的方法。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:23:01.520

根据[python regex 文档](http://docs.python.org/library/re.html)，您正在使用`(?!...`或*否定的前瞻断言*

> 如果 ... 下一个不匹配，则匹配。这是一个否定的前瞻断言。例如，Isaac (?!Asimov) 将匹配 'Isaac ' 仅当它后面没有 'Asimov' 时。

在这种情况下，您想要的`(?<!...`是一个*否定的后向断言*。这是因为您试图避免匹配要匹配的文本*之前*的文本，而不是之后的文本。从正则表达式文档：

> 如果字符串中的当前位置之前没有匹配 ...，则匹配。这称为否定后向断言。与肯定的后向断言类似，包含的模式必须只匹配一些固定长度的字符串。以否定后向断言开头的模式可能在被搜索的字符串的开头匹配。

那会给你一个看起来像这样的正则表达式：

```
re.compile(r"(?<!Profile Pictures)</strong></a><div class=\"photoTextSubtitle fsm fwn fcg\">(\d+) photos</div>") 
```

当然，如果没有您提供的一些示例，很难对此进行测试。

# php - 一页上有多个 Wordpress 模板

> ID：12345126
> 
> 赞同：1
> 
> 时间：2012-09-10T03:50:07.067
> 
> 标签：php, wordpress, templates

忍受我...

1.  我正在尝试创建一个简单的 Wordpress 索引模板，允许用户使用**自定义字段**编辑副本。
2.  索引页分为 4 个部分。
3.  每个部分都有自己的外观和感觉，就好像它是自己的页面一样。

这就是我的想法：

1.  将四个部分中的每一个都创建为 Wordpress“页面”
2.  将带有我想要显示的 HTML 的自定义页面模板应用于四个页面中的每一个。
3.  使用自定义字段创建任何可编辑副本块。
4.  在 index.php 模板上显示所有这些页面。
5.  禁用页面上的可视化编辑器，只显示自定义字段。

上面列表中的第 4 位是我卡住的地方。我不确定如何将页面（包括它们的模板）放到索引中。我也不确定这是否真的是正确的做法。我还探索了创建自定义对象，但没有走多远。任何建议都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:45:41.987

您将无法在一页上显示“页面”，因为这不是 Wordpress 的工作方式。每一页都是这样。页面。

从技术上讲，您可以包含 4 个不同的 iframe，它们加载 4 个不同的页面。您可以通过他们的 URL 调用他们

执行此操作的正确方法是在您的索引页面上包含四种不同的 POST TYPES。并以不同的方式设计它们。

您也可以通过使用 CATEGORIES 而不是自定义帖子类型来做到这一点。并且只是对每个类别进行不同的样式设置。

# ios - 移动位于键盘下方的内容

> ID：12345131
> 
> 赞同：1
> 
> 时间：2012-09-10T03:51:15.073
> 
> 标签：ios, view, uiscrollview, keyboard, uitextfield

[我对位于键盘下方的](https://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)Apple 文档移动内容中的代码有疑问。我已经对此进行了研究，但是在开始使用替代解决方案之前，我正在寻找对我在这里模糊的概念的澄清。

不幸的是，一旦键盘动画完成向上移动键盘，视图就会向下移动并完全移出现场。无论文本字段实际上是否被键盘覆盖，都会发生这种情况。所以现在我又开始尝试理解文档中提供的代码，在尝试更改各种参数后，我一直无法让它正常工作。

苹果提供的相关代码为：

```
 - (void)keyboardWasShown:(NSNotification*)aNotification

NSLog(@"keyboardWasShown");
NSDictionary* info = [aNotification userInfo];
CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);
scrollView.contentInset = contentInsets;
scrollView.scrollIndicatorInsets = contentInsets;

// If active text field is hidden by keyboard, scroll it so it's visible
// Your application might not need or want this behavior.
CGRect aRect = self.view.frame;
aRect.size.height -= kbSize.height;
if (!CGRectContainsPoint(aRect, activeField.frame.origin) ) {
    NSLog(@"if");
    CGPoint scrollPoint = CGPointMake(0.0, activeField.frame.origin.y-kbSize.height);
    NSLog(@"scrollPoint is %@", NSStringFromCGPoint(scrollPoint));
    [scrollView setContentOffset:scrollPoint animated:YES]; 
```

首先，在我如下所述更改任何内容之前，我得到的是：

```
GO[4614:c07] keyboardWasShown
2012-09-08 22:58:23.892 DRO GO[4614:c07] if
2012-09-08 22:58:23.892 DRO GO[4614:c07] scrollPoint is {0, -281} 
```

所以，分解它：

1.  NSLog 只是我的信息，表明该方法被调用

2.  NSDictionary - 包含有关键盘的信息，包括其尺寸，以便自动考虑不同设备或方向中的不同键盘尺寸。

3.  CGSize - 从字典中获取实际大小

4.  UIEdgeInsets - 在 UIKit 函数参考中找到参考 - 为按钮或视图创建边缘插入，其中插入是绘图矩形周围的边距，其中每一边（左、右、顶部和底部）可以具有不同的值。在这种情况下，将底部边缘设置为键盘的高度。由于我的视图是向下移动而不是向上移动，因此我尝试颠倒“顶部”和“底部”值，认为它们可能是颠倒的。而不是视图随着动画顺利向下滚动，现在它只是在键盘弹出时闪烁而看不见，我得到了这个：

    GO[4829:c07] 如果 2012-09-08 23:06:57.146 DRO GO[4829:c07] 滚动点为 {0, -281}

5.  scrollView.contentInset：内容视图插入到封闭滚动视图的距离。使用此属性可添加到内容周围的滚动区域。大小的单位是点。默认值是UIEdgeInsetsZero 看起来这应该是在滚动视图的底部添加区域以允许它与键盘一起向上移动。

6.  scrollView.scrollIndicatorInset - 告诉滚动指示器按比例移动以响应键盘的视图移动

7.  CGRect - 创建一个具有视图尺寸的 aRect 对象。

8.  aRect - CGRect 的高度值，减去键盘的高度。我在这里超级模糊-应该是键盘未覆盖的视图区域。

9.  if - 如果 CGpoint 不是（在位于键盘下方的矩形中，在活动文本字段内的某个点） - 这没有意义；这里的逻辑让我无法理解

10.  NSLog - 告诉我我们已经走到了这一步

11.  CGScrollPoint - 定义视图应该滚动到的点。由于视图原点是左上角，减去键盘高度应该让它向上滚动键盘高度的距离，保持文本字段在视图中。只是为了好玩，当我尝试将其更改为 +kbSizeHeight 时，我的视图迅速消失并且： GO[4682:c07] if 2012-09-08 23:02:48.078 DRO GO[4682:c07] scrollPoint is {0, 679 }

12.  NSLog - 告诉我视图要移动到哪个滚动点

13.  [scrollView - 使用动画告诉scrollView 适应新的scrollPoing

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T04:37:22.690

我不知道Apple是如何做到的，我相信他们建议将内容放入滚动视图中，然后当您点击文本字段时，您告诉滚动视图向上滚动以便您可以看到您正在输入的内容。

我有点懒惰，所以我所做的就是告诉视图本身在用户点击将被键盘隐藏的字段时向上移动。

我通常这样做：

```
// shift view up
self.view.transform = CGAffineTransformMakeTranslation(0, -someYOffsetValue);

// shift view back down to original value
self.view.transform = CGAffineTransformMakeTranslation(0, 0); 
```

您可以将其包装在 UIView animateWithDuration: 块中以实现平滑过渡。

# ios - ios - ipad 上的 gif 颜色变化

> ID：12345133
> 
> 赞同：0
> 
> 时间：2012-09-10T03:51:29.853
> 
> 标签：ios, ipad, html, gif

在为 iPad 创建 HTML5 应用程序时遇到问题。

我有这个 GIF 文件，它用作背景图像，它具有光球在轨道上移动的动画效果。问题是，每当我单击屏幕上的任何链接或下拉菜单时，背景图像都会从红色变为蓝色，如图所示。

[http://i1225.photobucket.com/albums/ee387/xavianaxw/photo.png](http://i1225.photobucket.com/albums/ee387/xavianaxw/photo.png)

所以是的！我希望有人知道发生了什么，因为这是我在公司的第一个项目，我不想把事情搞砸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:41:47.257

也许您使用的是真彩色 Gif 图像，而不是索引 Gif。
GIF 是基于调色板的，它不常用于真彩色图像。
所以也许你需要使用一个特殊的工具来转换你的 gif 图像。

# sql - 有什么方法可以编写 SQL 语句，如果该语句无法检索数据，则使用其他 SQL 语句？

> ID：12345134
> 
> 赞同：1
> 
> 时间：2012-09-10T03:52:41.653
> 
> 标签：sql, ms-access, asp-classic

（有没有办法编写 SQL 语句，如果该语句无法检索数据（因为其表的某些部分为空），则使用其他 SQL 语句或使其仅显示可用的数据？）

我有 SQL 语句来显示生产批次和他们的每个最新活动，如下所示......

```
q_maxdate :

SELECT 
    tbl_pdtn_startup.pdtn_st_id, 
    tbl_production.pdtn_id, 
    tbl_product.pd_name
FROM 
    (
        tbl_pdtn_startup 
        INNER JOIN tbl_product 
        ON tbl_pdtn_startup.pd_id = tbl_product.pd_id
    ) 
    INNER JOIN tbl_production 
    ON tbl_pdtn_startup.pdtn_st_id = tbl_production.pdtn_st_id; 
```

与此 SQL 连接

```
SELECT 
    q_maxdate.pdtn_st_id, 
    Sum(tbl_pdtn_sizecolor.pdtn_st_qty_est) AS SumOfpdtn_st_qty_est,
    q_maxdate.MaxOfpdtn_date, 
    q_maxdate.pd_name, 
    q_maxdate.pdtn_st_pdNote, 
    q_maxdate.pd_id, 
    q_maxdate.MaxOfwk_stage, 
    q_maxdate.LastOflb_name, 
    q_maxdate.pdtn_st_date, 
    q_maxdate.pdtn_st_qty_act
FROM 
    q_maxdate 
    INNER JOIN tbl_pdtn_sizecolor 
    ON q_maxdate.pdtn_st_id=tbl_pdtn_sizecolor.pdtn_st_id
GROUP BY 
    q_maxdate.pdtn_st_id, 
    q_maxdate.MaxOfpdtn_date, 
    q_maxdate.pd_name, 
    q_maxdate.pdtn_st_pdNote, 
    q_maxdate.pd_id, 
    q_maxdate.MaxOfwk_stage, 
    q_maxdate.LastOflb_name, 
    q_maxdate.pdtn_st_date, 
    q_maxdate.pdtn_st_qty_act
ORDER BY 
    q_maxdate.pdtn_st_date DESC; 
```

问题是它不会显示任何在 tbl_pdtn_startup 中只有数据但在 tbl_production 中为空的记录。所以我想要的是，如果发生这种情况，然后执行只显示可用数据的新 SQL 语句。

类似于 ... if sql1 <> "" then execute sql1 else execute sql2 end if

非常感谢您

（已编辑）根据下面的答案，我选择了“如果不存在”来解决这个问题，方法如下：

```
IF NOT EXISTS (SELECT q_maxdate.pdtn_st_id, Sum(tbl_pdtn_sizecolor.pdtn_st_qty_est) AS SumOfpdtn_st_qty_est, q_maxdate.MaxOfpdtn_date, q_maxdate.pd_name, q_maxdate.pdtn_st_pdNote, q_maxdate.pd_id, q_maxdate.MaxOfwk_stage, q_maxdate.LastOflb_name, q_maxdate.pdtn_st_date, q_maxdate.pdtn_st_qty_act
FROM q_maxdate INNER JOIN tbl_pdtn_sizecolor ON q_maxdate.pdtn_st_id=tbl_pdtn_sizecolor.pdtn_st_id
GROUP BY q_maxdate.pdtn_st_id, q_maxdate.MaxOfpdtn_date, q_maxdate.pd_name, q_maxdate.pdtn_st_pdNote, q_maxdate.pd_id, q_maxdate.MaxOfwk_stage, q_maxdate.LastOflb_name, q_maxdate.pdtn_st_date, q_maxdate.pdtn_st_qty_act
ORDER BY q_maxdate.pdtn_st_date DESC ) 

THEN SELECT tbl_pdtn_startup.pdtn_st_id, tbl_product.pd_name, tbl_pdtn_startup.pdtn_st_date
    FROM (tbl_pdtn_startup INNER JOIN tbl_product ON tbl_pdtn_startup.pd_id = tbl_product.pd_id) INNER JOIN tbl_production ON tbl_pdtn_startup.pdtn_st_id = tbl_production.pdtn_st_id
    GROUP BY tbl_pdtn_startup.pdtn_st_id, tbl_product.pd_name, tbl_pdtn_startup.pdtn_st_date
    ORDER BY tbl_pdtn_startup.pdtn_st_date DESC 
END 
```

但是，它没有用.. 我的 SQL 技能非常有限。所以你能帮我解决这个问题吗..非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T03:57:21.297

您可以使用@@ROWCOUNT 来确定您的sql1 返回了多少行。如果 rowcount 为 0，那么它可能什么也没返回，所以使用 sql2

您也可以使用 IF NOT EXISTS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:01:16.223

我认为最简单的方法是编写存储过程，您可以查看以下链接

[http://www.databasejournal.com/features/msaccess/article.php/3407531/How-to-Execute-SQL-Stored-Procedures-from-Microsoft-Access.htm](http://www.databasejournal.com/features/msaccess/article.php/3407531/How-to-Execute-SQL-Stored-Procedures-from-Microsoft-Access.htm)

快乐编码！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T03:56:35.210

有几种方法可以做到这一点。

例如，Oracle PL/SQL 和 MSSQL T-SQL 都允许“if-then-else”。

然而，可*移植*的方法是使用 ANSI-SQL“case”语句。例如：

*   [SQL 案例语句语法？](https://stackoverflow.com/questions/4622/sql-case-statement-syntax)

*   [http://www.codeproject.com/Articles/39103/A-Simple-Use-of-SQL-CASE-Expression](http://www.codeproject.com/Articles/39103/A-Simple-Use-of-SQL-CASE-Expression)

# javascript - 在jQuery中克隆次数？

> ID：12345135
> 
> 赞同：0
> 
> 时间：2012-09-10T03:52:45.347
> 
> 标签：javascript, jquery

我正在`localStorage`使用`#id, #id+number of times div has been duplcated`. 这样做的原因是我有一个按钮，它`.clone()`是 div 的次数与用户单击它的次数一样多，然后将克隆的 div 以及多少次保存到 localstorage。然而，我的问题是弄清楚如何将`.clone()`它返回到页面的次数与 localstorage 项目中的数值一样多。

例如，如果 localstorage 项目是这样的：`(#one, #one-5)`，我希望 div`one`被克隆`5`到正文中。

到目前为止，我的代码可以在这里看到：

[http://jsfiddle.net/charlescarver/fLJcs/2/](http://jsfiddle.net/charlescarver/fLJcs/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T03:54:49.170

您需要使用某种带有计数器的循环。[`for`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for)或者[`while`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/while)将是完全足够的。

```
var max = 5;
for (var i=0; i<max; i++) {
    // clone here
} 
```

或者

```
var max = 5;
while(max--) {
    // clone here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T03:57:13.193

将计数作为本地存储中的第二项不是更有意义吗？

```
(#one, 5) 
```

无论如何，您想使用循环来迭代 n 次（在本例中为 5 次）并且每次都附加元素。

就像是

```
// n is the number of times to clone (n=5 here)
for (var i = 0; i < n; i++) {
    // clone your element
} 
```

[多次复制和克隆元素](http://jqueryminute.com/duplicate-and-clone-elements-multiple-times/)也可能有用。一个小 jQuery 插件来抽象这个。

我不知道您如何将其存储在本地存储中，但您可以对对象进行[字符串化](http://www.json.org/js.html)并存储它们。

```
myobject = {
  'id': 'one',
  'count': 5
}
// Save
localStorage.setItem('myobject', JSON.stringify(myobject));
// Retrieve
var myobject = JSON.parse(localStorage.getItem('myobject')); 
```

现在你可以得到它的属性，比如`myobject.id`and `myobject.count`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T04:22:48.690

我会这样做：

[http://jsfiddle.net/LShYs/](http://jsfiddle.net/LShYs/)。

基本上，您只需添加一个循环：

```
for (var i=0; i< parseInt(all[1])-1; i++){
   duplicateDiv("#" + all[0]);
} 
```

并将您的点击事件提取到一个新方法（duplicateDiv），该方法现在从您的点击处理程序和循环中调用。很简单。

# c# - 在文档中的任何位置插入来自另一个 xml 文件的节点（c#）

> ID：12345139
> 
> 赞同：0
> 
> 时间：2012-09-10T03:53:07.957
> 
> 标签：c#, xml

```
XmlTextReader myReader = new XmlTextReader("abc.xml");
XmlDocument mySourceDoc = new XmlDocument();
mySourceDoc.Load(myReader);
myReader.Close();

myReader = new XmlTextReader("pqr.xml");
XmlDocument myDestDoc = new XmlDocument();
myDestDoc.Load(myReader);
myReader.Close();

XmlNode rootDest = myDestDoc["root node"];
XmlElement nodeOrig = (XmlElement)mySourceDoc["root node"].ChildNodes[0];
XmlNode nodeDest = myDestDoc.ImportNode(nodeOrig, true);

try
{
    rootDest.AppendChild(nodeDest);
}
catch (Exception ex)
{
    MessageBox.Show("" + ex);
}
XmlTextWriter myWriter = new XmlTextWriter("pqr.xml", Encoding.UTF8);
myWriter.Formatting = Formatting.Indented;

myDestDoc.WriteTo(myWriter);
myWriter.Close(); 
```

如果必须将节点作为根节点的子节点插入，则上面的代码运行良好。但我想将节点作为任何其他节点的子节点插入。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:48:11.830

说，你有以下xml：

```
<CONFIGURATION>
  <File>D:\Test\TestFolder\TestFolder1\TestFile.txt</File>
  <Dir>D:\Test\TestFolder\TestFolder1\</Dir>
  <File>D:\Test\TestFolder\TestFolder2\TestFile02.txt</File>
  <File>D:\Test\TestFolder\TestFolder2\TestFile04.txt</File>
  <Dir>D:\Test\TestFolder\TestFolder2\</Dir>
</CONFIGURATION> 
```

并且您想创建一个新的，仅包含*File*节点；根节点也必须称为*Files*。这样的 xml 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<Files>
  <File>D:\Test\TestFolder\TestFolder1\TestFile.txt</File>
  <File>D:\Test\TestFolder\TestFolder2\TestFile02.txt</File>
  <File>D:\Test\TestFolder\TestFolder2\TestFile04.txt</File>
</Files> 
```

以下代码执行此操作：

```
XElement infile = XElement.Load("In.xml");
XElement outfile = new XElement("Files");
foreach (XElement x in infile.Elements("File"))
    outfile.Add(x);
outfile.Save("Out.xml"); 
```

这是一个简单的示例，您如何使用 LINQ To XML 将节点从一个 xml 文档传输到另一个。考虑使用这个。

你应该喜欢它。

**编辑**

原始xml：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <abc>
    <pdf>hhh</pdf>
  </abc>
</root> 
```

用户输入：

```
abc#uuu#ttt 
```

输出xml：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <abc>
    <pdf>hhh</pdf>
    <uuu>ttt</uuu>
  </abc>
</root> 
```

编码：

```
 string userinput = "abc#uuu#ttt";
        XElement infile = XElement.Load("In.xml");
        XElement temp = infile;
        string[] commands = userinput.Split(new string[] { "#" }, StringSplitOptions.RemoveEmptyEntries);
        for (int i = 0; i < commands.Length; i++)
        {
            if (i + 1 == commands.Length)
                temp.Value = commands[i];
            else
            {
                if (temp.Element(commands[i]) == null)
                    temp.Add(new XElement(commands[i]));
                temp = temp.Element(commands[i]);
            }
        }
        infile.Save("Out.xml"); 
```

# ruby-on-rails - 如何使用 Rabl gem 自定义来自 Rails 应用程序的 JSON 响应

> ID：12345140
> 
> 赞同：0
> 
> 时间：2012-09-10T03:53:20.983
> 
> 标签：ruby-on-rails, ruby, json, api, rabl

在我的 Rails API 应用程序中，我使用 Rabl gem 来呈现 JSON。但是，我将 JSON 定义为特定格式。

这是我的 rails 应用程序作为响应发送的 JSON：

```
 [{"lat":"49.2505","lng":"-123.1119"},{"lat":"49.2515","lng":"-123.1109"}] 
```

这是客户想要得到的响应

```
 {"photos":[{"lat": 37.775, "lng": -122.4183333}, ...]} 
```

**这是在文件index.json.rabl**中呈现 json 的代码

 **```
collection @photos
attributes :lat, :lng 
```

我在 index.json.rabl 文件中尝试了此代码，但响应如下集合 @photos node(:photos) { |photos|attributes :lat, :lng}

```
 [{"photos":["lat","lng"]},{"lat":"49.2515","lng":"-123.1109","photos":["lat","lng"]}] 
```

不完全是客户需要的

我必须在此代码中进行哪些更改才能为客户端获取正确的 JSON 响应。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:00:37.300

我解决了这个问题：

index.json.rabl

```
 collection @photos => :photos 
 attributes :lat, :lng 
```

产量

```
 {"photos":[{"lat":"49.2505","lng":"-123.1119"},{"lat":"49.2515","lng":"-123.1109"}]} 
```**

# xpages - XPages 按列值过滤。如何显示 8 个可用值中的 2 个值？

> ID：12345143
> 
> 赞同：0
> 
> 时间：2012-09-10T03:54:00.460
> 
> 标签：xpages

该视图是员工列表，第一个排序列是“部门”。有8个部门：A，B，C，D，E，F，G，H。在某些情况下，我只需要显示 C 和 G 部门的员工（或者在不同条件下可能来自 3、4 或更多部门）。类似于视图选择公式（@Formula），其中：

```
SELECT (Form="Staff") && (Department="C" || Department="G") 
```

在“按类别名称过滤”中，我输入了静态值：部门。

在“按列值过滤”中，我测试静态值：C、G 和 C;G。两者都不会显示任何结果。我用以下代码测试计算值仍然不能：

```
var newArr=new Array("C");
newArr.push("G");
return newArr; 
```

对于真实视图，部门列，我打开/关闭分类但没有成功。

我的要求有什么解决方法吗？或者“按列值过滤”根本不能接受多个值？目前我正在尝试对视图选择公式中的所有内容进行编码（我不确定是否可能，因为我想创建类似的东西：

```
SELECT (Form="Staff") && ----the part here will be dynamically generated multiple (Department=" " || Department=" " and so on) 
```

我的设计器和注释是 8.5.3（带有 extlib 但没有任何修订包。如果这会有所帮助）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T04:12:53.517

按列值过滤取 ONE 值。您可以做的是在 view.FTSearch 中指定搜索查询中的部门，或者您“作弊”并首先加载一个部门并使用 Ajax 调用检索第二个部门来修改加载的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:20:43.267

对于少量组合，您可以相应地更改视图：使用组合键创建额外的类别并查找该值。

列公式示例：

```
tmpGroups := "CG":"AB":"DE";
tmpDepGroups := @Trim( @Replace( tmpGroups; @ReplaceSubstring( tmpGroups; Department; "" ); "" ));
@Trim( Department : tmpDepGroups ) 
```

确保您将允许用户仅查找在类别中准备的键（tmpGroups 列表）。

# php - PHP - 依赖类

> ID：12345144
> 
> 赞同：0
> 
> 时间：2012-09-10T03:54:13.630
> 
> 标签：php, arrays, multidimensional-array, dependencies, sorting

我正在使用这个问题中的 Dependency Class [PHP dependency class](https://stackoverflow.com/questions/9159983/php-dependency-class)我正在使用特别是 Paul Norman 的版本，它工作得几乎完美，但我发现订单并不总是正确的

您可以在此处查看代码[http://codepad.org/EBtWWn1b](http://codepad.org/EBtWWn1b)

结果不对，应该是

```
已加载：数组
(
    [0] => 菜单
    [1] => 设置
    [2] => 国家
    [3] => 仪表板
    [4] => 语言
    [5] => 模块
    [6] => 用户
)
失败：数组
(
)

```

你知道有什么方法可以解决吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T04:45:07.727

关于 Paul Norman 的解决方案，我不知道该告诉您什么，但似乎有一个错误......我尝试了一个解决方案，它似乎满足了您示例中的依赖关系（尽管没有完全列出它们你想要的顺序...）

```
class Dependencies
{
    private $items;
    private $depends;
    private $hasDependency;

    public function __construct()
    {
        $this->items = array();
        $this->depends = array();
        $this->hasDependency = array();
    }

    public function add($item, $dependsOn = array())
    {
        $this->items[] = $item;
        foreach ($dependsOn as $dependsOnItem)
        {
            $this->items[] = $dependsOnItem;
            $this->depends[$dependsOnItem][] = $item;
        }

        $this->items = array_unique($this->items);
        $this->hasDependency[$item] = $dependsOn;
    }

    public function getLoadOrder()
    {
        $order = array();

        $hasChanged = true;
        while (count($order) < count($this->items) && $hasChanged === true)
        {
            $hasChanged = false;
            foreach ($this->hasDependency as $item => $dependencies)
            {
                if ($this->satisfied($item, $order))
                {
                    $order[] = $item;
                    unset($this->hasDependency[$item]);
                    $hasChanged = true;
                }
            }
        }

        if (count($order) < count($this->items) && $hasChanged === false)
        {
            echo 'Impossible set of dependencies';
            return false;
        }

        return $order;
    }

    private function satisfied($item, $addedSoFar)
    {
        $dependencies = $this->hasDependency[$item];

        foreach ($dependencies as $dependency)
        {
            if (!in_array($dependency, $addedSoFar))
            {
                return false;
            }
        }

        return true;
    }
}

$deps = new Dependencies();

$deps->add('countries', array('menus', 'settings'));
$deps->add('dashboard', array('menus'));
$deps->add('languages', array('menus', 'settings'));
$deps->add('menus');
$deps->add('modules'  , array('menus'));
$deps->add('settings' , array('menus'));
$deps->add('users'    , array('menus'));

print_r($deps->getLoadOrder()); 
```

# html - 使用引导折叠javascript时，最后一个div不会折叠

> ID：12345148
> 
> 赞同：0
> 
> 时间：2012-09-10T03:55:01.620
> 
> 标签：html, twitter-bootstrap

我有以下示例说明我如何尝试使用 bootstrape collapse javascript 功能。 [http://jsfiddle.net/jsieber/xSf5a/4/](http://jsfiddle.net/jsieber/xSf5a/4/)

即使所有其他 div 在打开不同的 div 时关闭，第 6 个 div 仍保持打开状态。我使用托管的 bootstrap.min.js 和 bootstrap.min.css 文件作为资源。这是 bootstrap-collapse.js 实施中的已知错误，还是我的标记中有一个我忽略的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:39:20.963

没有错误，只是您的标记中有一个错误：您忘记了`</div>`第五个手风琴组的结束。关闭可折叠元素的选择器是

```
this.$parent.find('> .accordion-group > .in') 
```

因此，如果它是嵌套在另一个手风琴组内的手风琴组，它将不会找到可折叠元素。

### [JSFiddle](http://jsfiddle.net/mmfansler/vZdrC/)

# c# - 使用实体框架保存实体列表

> ID：12345150
> 
> 赞同：3
> 
> 时间：2012-09-10T03:55:08.407
> 
> 标签：c#, entity-framework-4.1

如何使用 Entity Framework Code First 将实体列表保存到数据库中？

我在保存实体列表时遇到问题。

下面是我写的代码：

```
List<Account> accounts = ActivateAccount();

// Save merchant account & bank information into database
using (var context = new MyContext())
{
    try
    {
        context.Accounts.Attach(accounts);
        context.SaveChanges();
    }
    catch (Exception ex)
    {

    }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T04:49:31.413

请参阅以下链接。Attach 和 AddToObject 之间的区别

[实体框架 4 - AddObject 与 Attach](https://stackoverflow.com/questions/3920111/entity-framework-4-addobject-vs-attach)

请澄清您是更新断开的记录还是添加记录。下面是在数据库中添加记录的代码。

```
using (var context = new MyContext())
{
    try
    {
        foreach(var row in accounts){
            context.AddToAccounts(row);
        }
        context.SaveChanges();
    }catch (Exception ex){
        //Log any exception here.
    }     
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T04:12:24.373

```
List<Account> accounts = ActivateAccount();

// Save merchant account & bank information into database
using (var context = new MyContext())
{
    try
    {
        context.Accounts.Add(accounts);
        context.SaveChanges();
    }
    catch (Exception ex)
    {

    }
} 
```

尝试用 Add 替换 Attach 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-03T21:04:33.663

我在这篇文章中找到了几种方法来做到这一点[https://stackoverflow.com/a/12853252/7287324](https://stackoverflow.com/a/12853252/7287324)

希望它能解决你的问题。

# google-app-engine - 在 POST 请求中使用动态电子邮件内容进行推送通知

> ID：12345152
> 
> 赞同：0
> 
> 时间：2012-09-10T03:56:03.663
> 
> 标签：google-app-engine, email, rest, post, push-notification

我是一名 iOS 开发人员，涉足非常陌生的领域。我有一个客户想要使用电子邮件正文，其内容是动态项目（如姓名、地址、GPS 坐标），并将该信息用作推送通知的一部分。

本质上，我需要弄清楚如何获取电子邮件正文、解析这些常见项目的内容、获取这些项目并发出 POST 请求以向我的应用程序发起推送通知（可能使用 Parse 的 REST API） .

我考虑过的一些选项。编写一个服务器端应用程序来监视新电子邮件，解析正文并生成代码并发出 POST 请求（但我不确定具体如何）。

使用 Google 的 App Engine 并创建某种脚本并使用 gmail（不确定具体如何操作）。

我希望有人对如何以某种流线型和优雅的方式实现这一点有一些想法。输入表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:25:35.577

您可以查看`MailService`Google AppEngine 以帮助您满足您的要求。这是[文档](https://developers.google.com/appengine/docs/java/mail/)。

该服务提供了接收发送到您的应用程序的电子邮件的能力。请参阅此处的 Java 链接：[https](https://developers.google.com/appengine/docs/java/mail/receiving) ://developers.google.com/appengine/docs/java/mail/receiving 。如果您使用的是 Python，则可以从 Python 文档中获得相同的信息。传入邮件服务将允许您编写一个简单的处理程序/servlet，每次收到电子邮件时都可以调用该处理程序/servlet。您可以解析电子邮件内容并创建您的推送通知数据。

或者，您可以通过以下方式将其分解：1）接收电子邮件并创建任务 2）任务发送推送通知，而不是同步执行所有操作

希望这可以帮助。

# c# - 嵌套接口和抽象实现类

> ID：12345158
> 
> 赞同：2
> 
> 时间：2012-09-10T03:56:57.527
> 
> 标签：c#, c#-4.0, interface, abstract-class, nested-class

当我尝试使用抽象类实现嵌套接口时，我在 C# 4.0 中偶然遇到了这个问题：

```
public class A
{
    public interface InnerInterface
    {
        void Method();
    }
}

public abstract class B : A.InnerInterface
{
    public abstract void A.InnerInterface.Method();
}

public class C : B
{
    public override void A.InnerInterface.Method()
    {
        System.Console.WriteLine("C::A.InnerInterface.Method()");
    }
} 
```

不幸的是，上面的代码无法编译，出现以下错误：

> 错误 CS0106：修饰符“抽象”对此项无效
> 
> 错误 CS0106：修饰符“public”对此项目无效
> 
> 错误 CS0106：修饰符“覆盖”对此项无效
> 
> 错误 CS0106：修饰符“public”对此项目无效

但是，如果接口是非嵌套接口，如下所示：

```
public interface SomeInterface
{
    void Method();
}

public abstract class B : SomeInterface
{
    public abstract void Method();
}

public class C : B
{
    public override void Method()
    {
        System.Console.WriteLine("C::Method()");
    }
} 
```

它编译好。

为什么在第一种情况下编译器错误？我在这里错过了什么吗？还是不允许用抽象类实现嵌套接口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T04:02:19.200

问题不在于嵌套 - 它与显式接口实现有关。如果您将“工作”示例更改为使用：

```
public abstract void SomeInterface.Method() 
```

你会看到同样的问题。您应该能够轻松地使用带有嵌套接口的隐式接口实现：

```
public abstract class B : A.InnerInterface
{
    public abstract void Method();
}

public class C : B
{
    public override void Method()
    {
        System.Console.WriteLine("C::A.InnerInterface.Method()");
    }
} 
```

...如果你*想*使用显式接口实现，它应该以与非嵌套接口相同的方式工作。但是您不会写`public`显式接口实现，它们也不能是抽象的（IIRC）。

# python - 更改相关命令后，如何自动运行 py.test？

> ID：12345164
> 
> 赞同：4
> 
> 时间：2012-09-10T03:57:36.483
> 
> 标签：python, unit-testing, pytest

通过 autonose 或 nosy，一旦某些测试文件或相关文件发生更改，它将自动运行鼻子测试。我想问一下py.test是否提供了类似的功能，是否有其他工具可以自动激发py.test。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T08:30:31.090

您可以安装[pytest-xdist 插件](http://pypi.python.org/pypi/pytest-xdist)并发出：

```
$ py.test --looponfail <filename> 
```

您还可以设置“looponfailroots” ini-file 选项来指导插件查找更改的位置。

# python - 以二进制格式 Python 显示 1 和 0 的字符串

> ID：12345165
> 
> 赞同：0
> 
> 时间：2012-09-10T03:57:39.777
> 
> 标签：python, string, image, file, binary

有什么方法可以从二进制格式中实际获取 1 和 0 的字符串？

```
# read in image data
fh = open('test.png','rb')
data = fh.read()
fh.close()

# write binary to text file
fh = open('test.txt','w')
fh.write(data)
fh.close
fh.close() 
```

我怎样才能把那个数据字符串变成 1 和 0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T04:04:00.527

这会将字符串中的每个字节转换为 8 个二进制数字，并用空格分隔它们。您可以轻松更改分隔符。

```
data = " ".join(bin(ord(b))[2:].rjust(8, "0") for b in data) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T04:02:02.803

使用`with`这样您就不必显式关闭 fh

```
with open('test.txt','w') as fh:
    fh.write("".join(bin(ord(x))[2:].zfill(8) for x in data) 
```

如果文件很大，上面会占用大量内存，相反你应该读取`data`更小的块并`write()`多次调用

旁白：
`fh.close`只是对关闭文件的方法的引用。要调用该方法（即关闭文件），您需要说`fh.close()`

# json - 如何强制将请求正文解析为纯文本而不是 Express 中的 json？

> ID：12345166
> 
> 赞同：40
> 
> 时间：2012-09-10T03:57:40.950
> 
> 标签：json, node.js, express, content-type, connect

我正在使用 nodejs + Express (v3)，如下所示：

```
app.use(express.bodyParser());
app.route('/some/route', function(req, res) {
  var text = req.body; // I expect text to be a string but it is a JSON
}); 
```

我检查了请求标头并且缺少内容类型。即使“Content-Type”是“text/plain”，它似乎也被解析为 JSON。无论如何告诉中间件总是将正文解析为纯文本字符串而不是 json？以前的早期版本`req`可以`req.rawBody`解决这个问题，但现在不再存在了。在 Express 中强制将正文解析为纯文本/字符串的最简单方法是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-11-27T18:14:51.513

在 express 4.x 中，您可以使用来自 bodyParser [https://www.npmjs.org/package/body-parser的文本解析器](https://www.npmjs.org/package/body-parser)

只需添加 app.js

```
app.use(bodyParser.text()); 
```

也在想要的路线上

```
router.all('/',function(req,res){
    console.log(req.body);

}) 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2015-05-07T11:19:32.700

默认情况下`bodyParser.text()`只处理文本/纯文本。将类型选项更改为包括`*/json`或`*/*`。

```
app.use('/some/route', bodyParser.text({type: '*/*'}), function(req, res) {
  var text = req.body; // I expect text to be a string but it is a JSON
});

//or more generally:
app.use(bodyParser.text({type:"*/*"})); 
```

[你可以在这里](https://github.com/expressjs/body-parser#type-2)找到文档

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-09-10T05:37:58.547

如果去掉`bodyParser()`中间件的使用，应该是文本。您可以查看`bodyParser`文档以获取更多信息：[http ://www.senchalabs.org/connect/middleware-bodyParser.html](http://www.senchalabs.org/connect/middleware-bodyParser.html)

删除这一行：

```
app.use(express.bodyParser()); 
```

### 编辑：

看起来你是对的。同时，您可以创建自己的`rawBody`中间件。但是，您仍然需要禁用`bodyParser()`. 注意：`req.body`仍将是`undefined`.

这是一个演示：

**应用程序.js**

```
var express = require('express')
  , http = require('http')
  , path = require('path')
  , util = require('util');

var app = express();

function rawBody(req, res, next) {
  req.setEncoding('utf8');
  req.rawBody = '';
  req.on('data', function(chunk) {
    req.rawBody += chunk;
  });
  req.on('end', function(){
    next();
  });
}

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.use(rawBody);
  //app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
});

app.post('/test', function(req, res) {
  console.log(req.is('text/*'));
  console.log(req.is('json'));
  console.log('RB: ' + req.rawBody);
  console.log('B: ' + JSON.stringify(req.body));
  res.send('got it');
});

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

**测试.js**

```
var request = require('request');

request({
  method: 'POST',
  uri: 'http://localhost:3000/test',
  body: {'msg': 'secret'},
  json: true
}, function (error, response, body) {
  console.log('code: '+ response.statusCode);
  console.log(body);
}) 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2019-08-24T20:26:36.213

Express 通过内容类型了解如何解码正文。**它必须在中间件中有特定的解码器，这些解码器从4.x**嵌入到库中：

```
app.use(express.text())
app.use(express.json()) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-01T17:05:19.187

您可以使用 plainTextParser ( [https://www.npmjs.com/package/plaintextparser](https://www.npmjs.com/package/plaintextparser) ) 中间件..

```
let plainTextParser = require('plainTextParser');
app.use(plainTextParser()); 
```

或者

```
app.post(YOUR_ROUTE, plainTextParser, function(req, res) {             
  let text = req.text;

  //DO SOMETHING....
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-03-26T12:55:27.883

**实现这一目标的两个重要事项。**

1.  您需要添加文本中间件才能处理正文中的文本
2.  您需要通过在请求中添加正确的标头“Content-type: text/plain”来设置内容类型

这是两者的示例代码。

```
const express = require('express');
const app = express();
const bodyParser = require('body-parser')
//This is the needed text parser middleware 
app.use(bodyParser.text()); 

app.post('/api/health/', (req, res) => {
    res.send(req.body);
});

const port = process.env.PORT || 3000;
app.listen(port, () => console.log(`Listening on ${port} ${new Date(Date.now())}`));
```

将此保存为 index.js。

安装依赖项。

```
npm i -S express 
npm i -S body-parser 
```

运行。

```
node index.js 
```

现在向它发送请求。

```
curl -s -XPOST -H "Content-type: text/plain" -d 'Any text or  json or whatever {"key":value}' 'localhost:3000/api/health' 
```

您应该能够看到它发回您发布的任何内容。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-21T16:41:44.763

我做的：

```
router.route('/')
.post(function(req,res){
    var chunk = '';

    req.on('data', function(data){
        chunk += data; // here you get your raw data.
    })        

    req.on('end', function(){

        console.log(chunk); //just show in console
    })
    res.send(null);

}) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-01-23T01:58:59.560

确保 express 和 bodyParser 的版本已经升级到合适的版本。表达 ~4.x 和 bodyParser ~1.18.x。那应该这样做。有了这些，以下应该可以工作

> app.use(bodyParser.text());

# .htaccess - R=301 从 domain.tld/index.php?id=1 到 domain.tld

> ID：12345169
> 
> 赞同：0
> 
> 时间：2012-09-10T03:58:39.920
> 
> 标签：.htaccess, mod-rewrite, redirect

我有这个。这不会在浏览器地址栏中更改`domain.tld/index.php?id=1`为。`domain.tld`如何制定可以正常进行永久 301 重定向的规则？

```
RewriteRule ^domain.tld$ domain.tld/index.php?id=1 [NC,R=301,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:03:39.160

你想要这样的东西。您不能与主机 ( `domain.tld`)匹配`RewriteRule`

```
RewriteCond %{HTTP_HOST} domain.tld$ [NC]
RewriteCond %{QUERY_STRING} id=1
RewriteRule ^index.php$ / [L,R=301] 
```

# ruby - 'else if' 块内的减法运算的语法错误？

> ID：12345171
> 
> 赞同：-1
> 
> 时间：2012-09-10T03:59:34.297
> 
> 标签：ruby, syntax-error, if-statement

我收到以下错误：

```
/calcTax.rb:9: syntax error, unexpected $undefined
  grandtotal = $#{subtotal - tax} 
```

从这段代码：

```
print('What amount would you like to calculate tax for?  $')
subtotal = gets.to_i
taxrate = 0.078
tax = subtotal * taxrate
if (tax > 0.0)
  grandtotal = $#{subtotal + tax}
else if (tax < 0.0)
  grandtotal = $#{subtotal - tax}
puts "Tax on $#{subtotal} is $#{tax}, so the grandtotal is $#{grandtotal}." 
```

我想知道我是否需要以`subtotal`不同的方式设置一个值，或者我可以做些什么来修复我的程序？

我`unexpected $end`在第 10 行也遇到了错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:02:53.153

您的语法有一些问题。

首先，`$#{blah}`仅在将变量插入带引号的字符串时才需要（并且仅有效！）语法。当您只是执行计算时，您可以简单地说：

```
grandtotal = subtotal + tax 
```

您还需要`then`在两行末尾添加一个`if`，更改`else if`为`elsif`，并`end`在第二`grandtotal`行之后添加一个。完成这项工作后，您应该拥有：

```
print('What amount would you like to calculate tax for?  $')
subtotal = gets.to_i
taxrate = 0.078
tax = subtotal * taxrate
if tax > 0.0 then
  grandtotal = subtotal + tax
elsif tax < 0.0 then
  grandtotal = subtotal - tax
end
puts "Tax on $#{subtotal} is $#{tax}, so the grandtotal is $#{grandtotal}." 
```

这似乎有效。

# plugins - 从浏览器制作照片

> ID：12345178
> 
> 赞同：1
> 
> 时间：2012-09-10T04:01:05.687
> 
> 标签：plugins, photo

我有一台佳能 550 D 相机，我需要将相机与浏览器集成。如何从浏览器制作照片？可能是一些插件？过程应如下所示：客户端单击“照片”，浏览器向相机发送信号，相机拍摄并以图像响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:22:09.600

我的公司将此任务外包，解决方案是使用使用 dll 连接到相机的小程序

# ssh - 所有用户的 SSH 强制命令

> ID：12345184
> 
> 赞同：2
> 
> 时间：2012-09-10T04:02:03.267
> 
> 标签：ssh, openssh

我目前编写了一个验证权限的脚本，当用户 ssh 进入机器时，我想将它作为 SSH 的强制命令运行。

但是，SSH 似乎要求您专门确定要为每个单独的 rsa-key 运行的强制命令。

有没有办法告诉 SSH 使用脚本作为所有用户的默认强制命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:20:10.647

似乎 SSH 不允许您以一般方式执行此操作。您可能需要利用 Unix 登录过程的不同部分。您可以使您的脚本成为系统 shell 初始化的一部分，或者更好的是，让 PAM 使用类似[pam_script](http://linux.die.net/man/5/pam_script)的东西为您完成这项工作。

# python - 读取行文件中的python语法

> ID：12345186
> 
> 赞同：-3
> 
> 时间：2012-09-10T04:02:14.270
> 
> 标签：python

我开始学习 python，但遇到了 SyntaxError。当我构建过滤器以获取日志文件中的最新记录时。像这样的日志文件

```
 Sat Jun  2 03:32:13 2012 [pid 12461] CONNECT: Client "66.249.68.236"
  Sat Jun  2 03:32:13 2012 [pid 12460] [ftp] OK LOGIN: Client "66.249.68.236", anon     password "gxxglxxxxt@google.com"
  Sat Jun  2 03:32:14 2012 [pid 12462] [ftp] OK DOWNLOAD: Client "66.249.68.236",   "/pub/10.5524/100001_101000/100022/readme.txt", 451 bytes, 1.39Kbyte/sec

import time
lines=[]
f= open("/opt/CLiMB/Storage1/log/vsftp.log")
line = f.readline()
lines=[line for line in f]
def OnlyRecent(line):
    return time.strptime(line.split("[")[0].strip(),"%a %b %d %H:%M:%S %Y" <(time.time()-(60*60*24*5)))
print ("\n".join(filter(OnlyRecent,lines)))
f.close() 
```

运行时出错

```
 Traceback (most recent call last):
 File "ex2.py", line 8, in ?
 print("\n".join(filter(OnlyRecent,lines)))
 File "ex2.py", line 7, in OnlyRecent
 return time.strptime(line.split("[")[0].strip(),"%a %b %d %H:%M:%S %Y" <(time.time()-(60*60*24*5)))
 File "/usr/lib64/python2.4/_strptime.py", line 287, in strptime
 format_regex = time_re.compile(format)
 File "/usr/lib64/python2.4/_strptime.py", line 264, in compile
 return re_compile(self.pattern(format), IGNORECASE)
 File "/usr/lib64/python2.4/_strptime.py", line 251, in pattern
 format = regex_chars.sub(r"\\\1", format)
 TypeError: expected string or buffer 
```

如何解决它。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:11:27.063

前面的答案是正确的，但是由于您使用的是 python 版本 3.x+，因此还有另一个语法错误，其中`print`始终作为函数调用。

因此，添加额外的括号，然后，使您的`print`调用成为函数调用。

```
print("\n".join(filter(OnlyRecent,lines))) 
```

PS 使用变量而不是将大量工作塞进一行以使您的代码更具可读性也是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T04:05:14.307

在这一行`return time.strptime(line.split("[")[0].strip(),"%a %b %d %H:%M:%S %Y" <(time.time()-(60*60*24*5))`中，您缺少一个右括号')'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T04:05:15.517

您需要在 return 语句的末尾加上一个额外的右括号。

```
>>> def OnlyRecent(line):
...     return time.strptime(line.split("[")[0].strip(),"%a %b %d %H:%M:%S %Y"   <(time.time()-(60*60*24*5))) 
```

您可以从控制台本身找到它！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T04:13:56.373

通过保持简短的行使您的代码更易于阅读：

```
import time

def is_recent(line):
    time_string = line.split("[")[0].strip()
    line_time = time.strptime(time_string, '%a %b %d %H:%M:%S %Y')

    return line_time < (time.time() - (60 * 60 * 24 * 5))

with open('/opt/CLiMB/Storage1/log/vsftp.log', 'r') as handle:
    lines = filter(is_recent, handle)

print '\n'.join(lines) 
```

# android - 我们可以在 android 中将嵌套 id 定义为 `@+id/index/btn1` 吗？

> ID：12345189
> 
> 赞同：0
> 
> 时间：2012-09-10T04:02:37.523
> 
> 标签：android

我们可以这样定义 id：

```
<TextView android:id="@+id/btn1" /> 
```

但是有很多活动和很多组件，ID可能很容易与其他人重复。

是否能够定义嵌套的 ide，例如：

```
<TextView android:id="@+id/index/btn1" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T04:05:45.220

你不能。但是，您可以 1) 使用 _ 创建名称空间的外观，例如：

```
<TextView android:id="@+id/index_btn1" /> 
```

或 2) 您可以在不同的 xml 文件中重用相同的 Id。只要视图中没有重复的 id，findViewById() 就可以正常工作。

有关详细信息，请参阅文档中有关 ID 的部分：http: [//developer.android.com/reference/android/view/View.html](http://developer.android.com/reference/android/view/View.html)

# java - 请Java帮助

> ID：12345198
> 
> 赞同：0
> 
> 时间：2012-09-10T04:04:16.547
> 
> 标签：java

我无法向控制台显示以使我的结果如下所示。这些数字只是示例，您应该能够使用任何数字的最终结果。

```
Operation     Result
25+5          30
25-5          20
25*5          125
25/5          5 
```

到目前为止，这是我的代码！

```
import javax.swing.JOptionPane;
public class Arithmetic {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub

    //local variables
        String firstNumber;
        String secondNumber;
        int number1;
        int number2;
        int sum;

    // input = get First and Second Numbers from user
        firstNumber = JOptionPane.showInputDialog("Enter first Number");
        secondNumber = JOptionPane.showInputDialog("Enter Second Number");

    // convert numbers from string to integer
        number1 = Integer.parseInt(firstNumber);
        number2 = Integer.parseInt(secondNumber);

   // add the numbers
        sum = number1 + number2;
        sum = number1 - number2;
        sum = number1 * number2;
        sum = number1 / number2;

 //display the results

        System.out.println("Operation   Result" );
        System.out.println(number1 + "(+)" + number2 );

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:35:07.713

首先，您需要为每个操作使用单独的变量。像这样，

```
int sum, subtract, multiply, divide; 
```

然后您需要对每个操作进行计算并将其存储在相应的变量中，

如下代码：

```
try{    
        sum = number1 + number2;
        subtract = number1 - number2;
        multiply = number1 * number2;
        divide = number1 / number2;

 //display the results

        System.out.println("Operation\tResult" );
        System.out.println(number1 + "(+)" + number2+"\t\t"+sum );
        System.out.println(number1 + "(-)" + number2+"\t\t"+subtract );
        System.out.println(number1 + "(*)" + number2+"\t\t"+multiply );
        System.out.println(number1 + "(/)" + number2+"\t\t"+divide );
    }
    catch(Exception e){
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T05:12:14.297

这是一个固定/简化版本：

```
import javax.swing.JOptionPane;
public class Arithmetic {
    public static void main(String[] args) {
        int number1 = Integer.parseInt(
                JOptionPane.showInputDialog("Enter First Number"));
        int number2 = Integer.parseInt(
                JOptionPane.showInputDialog("Enter Second Number"));

        System.out.print("Operation \tResult\n" + 
                number1 + "+" + number2 + " \t\t" + (number1+number2) + "\n" +
                number1 + "-" + number2 + " \t\t" + (number1-number2) + "\n" +
                number1 + "*" + number2 + " \t\t" + (number1*number2) + "\n" +
                number1 + "/" + number2 + " \t\t" + (number1/number2) + "\n"
                );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T04:08:30.820

首先，您需要打印出每个操作的结果。其次，您正在计算结果

```
 sum = number1 + number2; 
    sum = number1 - number2; 
    sum = number1 * number2; 
    sum = number1 / number2; 
```

每次你扔掉以前的结果并将新结果分配给变量`sum`。您可能需要为每个结果使用不同的变量。

您可能还会询问有关格式化列的问题。首先，您应该担心输出所有数据。一旦你做了这么多工作，你就可以处理格式化了。

# javascript - 10 个列表的不同 CSS 样式 项目

> ID：12345199
> 
> 赞同：2
> 
> 时间：2012-09-10T04:04:21.557
> 
> 标签：javascript, css, html-lists

我这里是这样的：

```
<ul class="bwp-rc-ulist">

<li class="recent-comment">Item 1</li>
<li class="recent-comment">Item 2</li>
<li class="recent-comment">Item 3</li>
<li class="recent-comment">Item 4</li>
<li class="recent-comment">Item 5</li>
<li class="recent-comment">Item 6</li>
<li class="recent-comment">Item 7</li>
<li class="recent-comment">Item 8</li>
<li class="recent-comment">Item 9</li>
<li class="recent-comment">Item 10</li>

</ul> 
```

我想添加以下 CSS 样式：

```
li.list1, li.list6 { background-color: red; }
li.list2, li.list7 { background-color: blue; }
li.list3, li.list8 { background-color: black; }
li.list4, li.list9 { background-color: yellow; }
li.list5, li.list10 { background-color: gray; } 
```

不幸的是，我不能这样做，因为 UL 和 LI 是由 wordpress 插件（更好的 Wordpress 评论和除外插件）动态创建的。

我已经读过一些 nth-child 的东西，但它并没有解决我的问题。也许如果有人可以告诉我正确的脚本是什么？

我也在寻找适用于 IE7-9、chrome 和 ff 的脚本。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T04:11:21.767

**CSS 解决方案**

```
ul.bwp-rc-ulist li:nth-child(1),
ul.bwp-rc-ulist li:nth-child(6) {
    background-color: red;
}

ul.bwp-rc-ulist li:nth-child(2),
ul.bwp-rc-ulist li:nth-child(7) {
    background-color: blue;
}

ul.bwp-rc-ulist li:nth-child(3),
ul.bwp-rc-ulist li:nth-child(8) {
    background-color: black;
}

ul.bwp-rc-ulist li:nth-child(4),
ul.bwp-rc-ulist li:nth-child(9) {
    background-color: yellow;
}

ul.bwp-rc-ulist li:nth-child(5),
ul.bwp-rc-ulist li:nth-child(10) {
    background-color: gray;
} 
```

或者如果你喜欢它更紧凑一点：

```
ul.bwp-rc-ulist li:nth-child(5n+1) {
    background-color: red;
}

ul.bwp-rc-ulist li:nth-child(5n+2) {
    background-color: blue;
}

ul.bwp-rc-ulist li:nth-child(5n+3) {
    background-color: black;
}

ul.bwp-rc-ulist li:nth-child(5n+4) {
    background-color: yellow;
}

ul.bwp-rc-ulist li:nth-child(5n+5) {
    background-color: gray;
} 
```

**jQuery 解决方案（使用您的 CSS）**

```
$('ul.bwp-rc-ulist li.recent-comment').each(function(index) {
    $(this).addClass("list" + (index + 1));
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T04:18:26.013

HTML：

```
<ul id="ulEle"  class="bwp-rc-ulist">
    <li class="recent-comment">Item 1</li>
    <li class="recent-comment">Item 2</li>
    ...
</ul> 
```

或者：

```
<div  id="ulEle">
    <ul  class="bwp-rc-ulist">
        <li class="recent-comment">Item 1</li>
        <li class="recent-comment">Item 2</li>
        ...
    </ul>
</div> 
```

JS：

```
<script type="text/javascript">
  var ulGet=document.getElementById("ulEle");
  var liList=ulGet.getElementsByTagName("li");
  for(var i=0;i<liList.length;i++)
  {
      liList[i].style.className="list"+(parseInt(i)+1);
  }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T04:15:59.087

试试这个 CSS

[http://jsfiddle.net/hVspz/](http://jsfiddle.net/hVspz/)

```
li:nth-child(6n+1) {  
  color: red; 
}

li:nth-child(6n+2) {  
  color: blue;
} 
```

等等

# java - 获取 Java 套接字连接

> ID：12345201
> 
> 赞同：0
> 
> 时间：2012-09-10T04:04:43.623
> 
> 标签：java, security, sockets, applet, accesscontrolexception

我在更新 Java 后开始出现问题（我认为）当我尝试连接到我的 Cpp 服务器（这似乎工作正常）时，我收到一条错误消息，我找不到任何帮助。

以下是错误消息

```
java.security.AccessControlException: access denied
("java.net.SocketPermission" "127.0.0.1:4000" "connect,resolve")
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:366)
    at java.security.AccessController.checkPermission(AccessController.java:555)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
    at java.lang.SecurityManager.checkConnect(SecurityManager.java:1051)
    at java.net.Socket.connect(Socket.java:574)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.<init>(Socket.java:425)
    at java.net.Socket.<init>(Socket.java:208)
    at jclientbare.init(jclientbare.java:27)
    at sun.applet.AppletPanel.run(AppletPanel.java:434)
    at java.lang.Thread.run(Thread.java:722) 
```

Java源代码如下

```
import java.awt.*;
import java.applet.*;
import java.io.*;
import java.net.*;
import javax.swing.*;

public class jclientbare extends Applet {

    static BufferedReader in;
    static PrintStream out;

    public void init()  {

         try    {
                System.out.println("Test NN");
            Socket socket = new Socket( "localhost", 4000 );
        in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            out = new PrintStream( socket.getOutputStream(), true);
         }

         catch (UnknownHostException e) {

        JOptionPane.showMessageDialog(null, "Unknown Host..");
            System.out.println("Unknown host: kq6py");

           } catch  (IOException e) {

        JOptionPane.showMessageDialog(null, "NO IO.");
            System.out.println("No I/O");
         }
     }

} 
```

Java 小程序不注册连接，它只是用错误消息轰炸。任何帮助，将不胜感激！我认为这可能是 java.policy 的问题，但我不知道如何解决它。

呃，你如何进行堆栈跟踪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T04:12:45.013

试试这个来授予权限：

```
grant 
{
  permission java.net.SocketPermission 
  "127.0.0.1:4000", "connect,resolve";
}; 
```

有关授予权限的详细信息，您可以查看以下链接：http: [//java.sun.com/developer/onlineTraining/Programming/JDCBook/appA.html](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/appA.html)

这篇文章很好地解释了策略文件的位置以及如何使用特定的策略文件运行应用程序。

以下链接详细说明了在哪里可以找到策略文件以及加载策略文件的顺序： [//download.java.net/jdk8/docs/technotes/guides/security/PolicyFiles.html#DefaultLocs](http://download.java.net/jdk8/docs/technotes/guides/security/PolicyFiles.html#DefaultLocs)

据我了解，如果您在 Windows 中，那么您可以在您的“我的文档”文件夹中放置一个文件“.java.policy”。当你在浏览器中运行一个小程序时，它会发现这个策略文件作为用户策略文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T05:53:30.067

```
System.exit(1); 
```

即使是受信任的小程序也无法调用`System.exit(int)`. 没有安全管理器的小程序***不应***要求 VM 结束。这就像客人烧毁了宾馆。

最好执行以下操作：

```
URL crash = new URL(getCodeBase(), "crash.html");
getAppletContext().showDocument(crash); 
```

并忽略有关策略文件的内容。它们不能解决现实世界（野生网络）部署的任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T14:18:04.280

啊哈！我了解到您不能在向您发送类文件的同一源上运行小程序。安装 Lighttpd 后，我可以使用`http://localhost/index.htm`. 希望这对其他人有帮助！

# php - 在 Zend 模块化结构中获取 javascript 的模块名失败

> ID：12345203
> 
> 赞同：1
> 
> 时间：2012-09-10T04:05:10.057
> 
> 标签：php, zend-framework, smarty, modular

我试图在 CustomControllerAction.php 中获取 $this->moduleName 的值，但我在模块 javascript 和一般模块之间得到了不同的值。

对于： http: [//myip.com/username/general](http://myip.com/username/general) 回显结果为“一般”

但是对于： http: [//myip.com/username/javascript](http://myip.com/username/javascript) 回显结果是“默认”，但我知道它应该是“javascript”。

为什么模块 javascript 无法获取其模块名称？

我使用 Zend Framework 模块化结构和 Smarty 进行视图展示。

谢谢你。

这是我的代码：

/modules/javascript/controlles/IndexController.php

```
<?php
class Javascript_IndexController extends modules_CustomControllerAction
{
    public function init()
    {
        /* Initialize action controller here */
        parent::init();
        $view = new EZ_View_SmartyJS($this->config->smarty->toArray());     
        $view->setScriptPath(APPLICATION_PATH.'/modules/javascript/views/theme_classic/js/');       
        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper(
            'ViewRenderer'
        );
        $viewRenderer->setView($view);
        $viewRenderer->setViewSuffix($this->config->smarty->javascriptSuffix);
        $this->_helper->layout->disableLayout();
        $this->getResponse()
            ->setHeader('Content-Type', 'text/javascript');

        $this->params = $this->getRequest()->getParams();
        $this->view->params = $this->params;

    }
}
?> 
```

/modules/general/controlles/IndexController.php

```
<?php
class General_IndexController extends modules_CustomControllerAction{
    public function init()
    {
        parent::init();
        // initialize smarty view
        $view = new EZ_View_Smarty($this->config->smarty->toArray());
        $view->setScriptPath(APPLICATION_PATH.'/modules/general/views/theme_classic/scripts/');
        // setup viewRenderer with suffix and view
        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper('ViewRenderer');
        $viewRenderer->setViewSuffix('tpl');
        $viewRenderer->setView($view);

        $layout = Zend_Layout::getMvcInstance();
        $layout->setViewSuffix('tpl');

        /**
         * Set inflector for Zend_Layout
         */
        $inflector = new Zend_Filter_Inflector(':script.:suffix');
        $inflector->addRules(array(':script' => array('Word_CamelCaseToDash', 'StringToLower'),
                                                      'suffix'  => 'tpl'));
         // Initialise Zend_Layout's MVC helpers
        $theme = 'theme_classic';
        Zend_Layout::startMvc(array('layoutPath' => APPLICATION_PATH . '/modules/themes/'.$theme.'/layout/',
                                    'view' => $view,
                                    'contentKey' => 'general',
                                    'inflector' => $inflector));
    }
}
?> 
```

/application/Bootstrap.php

```
<?php
    protected function _initRoutes()
    {
        $this->bootstrap('frontcontroller');
        $front = $this->getResource('frontcontroller');

        $router = $front->getRouter();

        $router->addRoute('root', new Zend_Controller_Router_Route(
            '/',
            array(
                'module' => 'home',
                'controller' => 'index',
                'action' => 'index'
            )
        ));
        $router->addRoute('javascript', new Zend_Controller_Router_Route(
            ':username/javascript/:action/*',
            array(
                'controller' => 'index'
            )
        )); 

        $router->addRoute('default', new Zend_Controller_Router_Route(
            ':username/:module/:action/*',
            array(
                'controller' => 'index'
            )
        )); 

        $router->addRoute('index', new Zend_Controller_Router_Route(
            ':username/:module',
            array(
                'controller' => 'index',
                'action' => 'index'
            )
        ));     
        return $router;
    }
?> 
```

/application/modules/CustomControllerAction.php

```
<?php
    public function init(){
        $controller = Zend_Controller_Front::getInstance();
        $this->moduleName = $controller->getRequest()->getModuleName();
        $this->controllerName = $controller->getRequest()->getControllerName();
        $this->actionName = $controller->getRequest()->getActionName();
        $this->userName = $controller->getRequest()->getParam('username');

        echo moduleName; //<------------------test result
    }
?> 
```

# ios - 更改 UIDatePicker 订单？

> ID：12345208
> 
> 赞同：4
> 
> 时间：2012-09-10T04:05:33.627
> 
> 标签：ios, uidatepicker

从这个[url](http://www.edumobile.org/iphone/iphone-programming-tutorials/add-datepicker-programmatically-and-display-date-in-iphone/)看到，日期选择器显示为**month-date-year**，我可以将其更改为**date-month-year**吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:16:38.667

[根据开发者页面](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIDatePicker_Class/Reference/UIDatePicker.html)（查看 DatePicker 模式部分），这取决于运行它的设备的区域设置。

> 显示的确切项目及其顺序取决于区域设置。

属性 'locale' 可用于显式指定要使用的模式，但从 iOS 5 开始不推荐使用。通常最好保留此设置，以便日期以该地区用户最熟悉的格式显示他们将手机设置为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-06T07:08:26.610

将 DatePicker local 设置为“en_GB”，您将获得**日期-月份-年份**顺序。

datePicker.datePickerMode = UIDatePickerMode.date

datePicker.locale = NSLocale(localeIdentifier: "en_GB") as Locale

# php - 依赖 MySQL 的自动增量功能？

> ID：12345211
> 
> 赞同：0
> 
> 时间：2012-09-10T04:06:31.083
> 
> 标签：php, mysql, sql

我的表中总是有一个“ID”字段，并使用这些 ID 完成我的 PHP 工作。

喜欢;

```
id      Username
1       User1
2       User2
3       User3 
```

PHP 是这样工作的；

```
show_member_details.php?memberID=3 
```

ID 字段始终设置为自动递增。

在大型项目/表上依赖 MySQL 的自动增量功能是否安全？就像一个表中的一百万个条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:21:21.100

是的，您可以将其定义为 AUTO INCREMENT。

您需要将 ID 字段定义为 BIGINT，其范围为 0 到 18446744073709551615。

FOR 安全地显示在 url 中，您可以对其进行加密。

# rvm - Updating rvm ruined my entire environment because I ran "get head" instead of "get stable"

> ID：12345217
> 
> 赞同：4
> 
> 时间：2012-09-10T04:07:44.773
> 
> 标签：rvm, rvmrc

Let me preface this question that this is occurring in zsh.

I updated rvm to version 1.15.8\. I did a force reinstall of all my rubies. Also set the gems back to pristine conditions. Here is a list of the problems I have encountered:

```
# 1.8.7 no longer compiles because it

# Going to a project directory that contains a .rvmrc file now causes this:

__rvm_remove_from_path:11: failed to compile regex: invalid character range
__rvm_remove_from_path:11: failed to compile regex: invalid character range
__rvm_remove_from_path:11: failed to compile regex: invalid character range
__rvm_remove_from_path:11: failed to compile regex: invalid character range
__rvm_remove_from_path:11: failed to compile regex: invalid character range
__rvm_remove_from_path:11: failed to compile regex: invalid character range
... for thousands of lines with no end.

# Typing "rvm use 1.9.4-p194@mygemset" yields the same result as above.

# And my favorite: 

bundle install

Tells me I need to install gem bundler'

I do it.

bundle install

Still tells me I need to install gem bundler! 
```

I wish I knew how to get back to the previous version of rvm. This is a real problem as I have a deadline. Usually I don't even upgrade rvm to avoid these environment problems, but I was following the directions to try to get it to work with Textmate.

Somebody please help.

UPDATE AFTER ANSWER:

2 things.

1) I ran "rvm get head" instead of "rvm get stable". Cut and paste fail.

2) I figured out the 1.8.7 issue. I ran:

```
brew install tcl 
```

and:

```
brew install tk 
```

I also changed the ownership of all stuff under $HOME/.rvm to be owned by me. Made sure X11 was installed. Then ran:

```
rvm remove 1.8.7-p352 
```

and:

```
rvm install 1.8.7-p352 
```

Worked like a charm!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T09:34:40.063

I ran into the same problem.

This should install the previous version.

```
rvm get 1.15.7 
```

here's the issue on github [https://github.com/wayneeseguin/rvm/issues/1095](https://github.com/wayneeseguin/rvm/issues/1095)

# c# - 单击时可见文本框

> ID：12345220
> 
> 赞同：2
> 
> 时间：2012-09-10T04:08:14.293
> 
> 标签：c#, asp.net

当用户单击按钮时，有什么方法可以使文本框可见？我的意思是，用户只会在单击按钮时看到文本框。提前感谢您对我的帮助。有一个好的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T04:17:15.667

使按钮在按钮 Click 事件上可见。

双击按钮以添加 Click 事件处理程序。

您的代码应如下所示：

```
private void btnShow_Click(object sender, EventArgs e)
{
    txtBox.Visible = true;
} 
```

如果您不希望在执行此操作时刷新整个页面，您可能需要将这些控件包装在 updatePanel 中

参考： [UpdatePanels 简介](http://msdn.microsoft.com/en-us/library/bb399001.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T04:15:09.007

这是一个简单的问题还是我错过了什么？

默认情况下，文本框是可见的。在属性中，您可以将其设置为 false（即，使其不可见）。

然后在面板上添加一个按钮。

然后代码隐藏按钮很简单：

```
textbox1.visible = true (this is vb code) 
```

这个问题还有其他问题还是我错过了什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T04:15:36.933

使用样式：

```
textBox.Style.Add("visibility", "hidden");
textBox.Style.Add("display", "none"); 
```

一旦单击按钮，再次反转它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T04:16:04.513

在页面加载集上：

```
 TextBox1.Visible = false; 
```

并在按钮中单击：

```
protected void Button1_Click(object sender, System.EventArgs e)  
{  
        TextBox1.Visible = true;  
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T04:35:33.640

如果你在谈论网络。在文档加载时使用 jquery 或 javascript 隐藏文本框，并使用以下代码在按钮上单击显示文本框。

```
$(document).ready(function(){
    $('#textBoxClientID').hide();
});

$('#buttonClientID').click(function(){
    $('#textBoxClientID').show();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T04:38:24.140

最好将这些操作放在客户端。通过这种方式，您不会将页面发送到服务器以进行此简单操作。

将onclick触发器添加到按钮以使文本框可见

```
<input type="button" value="Click Me!"              onclick="javascript:document.all['txtArea'].display='';" />
<input type="text" value="Some text..." style="display:none;" id="txtArea" />​ 
```

示例：http: [//jsfiddle.net/r54Et/](http://jsfiddle.net/r54Et/)

相同的方法可以应用于服务器控件。

更新：如果您使用服务器控件 asp:... 并且在查找文本框元素的 id 时遇到问题，asp.net 4.0+ 支持静态名称。这意味着您可以为您的元素设置一个修复名称。另一种解决方法是 asp.net 将客户端生成的 id 保存在 ClientID 属性中。所以在这种情况下，我们将有：

```
<input type="button" value="Click Me!"              onclick="javascript:document.all['<%=txtArea.ClientID%>'].display='';" />
<asp:textbox tunat="server" Text="Some text..." id="txtArea" ..... />​ 
```

# c# - 由于尾随分隔符，拆分字符串导致数组项长度不均匀

> ID：12345222
> 
> 赞同：0
> 
> 时间：2012-09-10T04:08:20.117
> 
> 标签：c#, arrays, string, split

通常当你拆分一个字符串时，`Hi,One,Two`你会得到 3 个分隔项。

但是，当您在最后一项上需要额外的逗号时，`Hi,One,Two,`您将获得 4 项。

我将一个字符串拆分为一个字符串数组，发现数组项的长度不均匀，因为字符串末尾有额外的分隔符：

```
string test = "[one]\t\t\t[two]\t\t\t";
string[] testArr = test.Split(new char[] { '\t' }, StringSplitOptions.None); 
```

结果是：

[0] = "[one]"
[1] = ""
[2] = "" **<- 缺少第 4 项**
[3] = "[two]"
[4] = ""
[5] = ""
[6 ] = "" <- 它有第四项

**有没有办法不必为除最后一个段之外的所有段添加第四个逗号？**

编辑：

当然我可以很容易地使用这段代码：

```
string test = "[one]\t\t\t\t[two]\t\t\t";
string[] testArr = test.Split(new char[] { '\t' }, StringSplitOptions.None); 
```

并得到理想的结果：

[0] = "[一]"
[1] = ""
[2] = ""
[3] = ""
[4] = "[二]"
[5] = ""
[6] = ""
[7 ] = ""

出于这个问题之外的目的，我希望我可以有相等的尾随分隔符，而不是调整字符串，使最后一个字符串的尾随逗号少一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T04:50:41.377

> 有没有办法不必为除最后一个段之外的所有段添加第四个逗号？

`String.Split`可以正常工作，因此您需要另一个逗号来为字符串生成额外的索引。你有两个选择

1.  把逗号放在你前面`Split`
2.  在你之后添加一个空元素`Split`

我希望您在问题中没有包含更多内容。

例如，您是否加入`[one],,,`和`[two],,,`？如果你是，那么你想用逗号分隔符加入它们，渲染`[one],,,,[two],,,`（注意额外的逗号）。尝试更早地插入逗号。

最大的问题是你为什么关心在你的数组中携带空字符串？使用列表，如果需要，插入额外的字符串。当您真正需要它们时，只需将字符串添加到列表中，而不是携带空的。或者使用对象而不是字符串集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T04:35:21.087

> 我不想做这个代码，我不能在最后去掉逗号：

使用[string.TrimEnd](http://msdn.microsoft.com/en-us/library/system.string.trimend.aspx)删除尾随逗号，然后根据逗号拆分字符串。

```
string test = "[one],,,,[two],,,";
test = test.TrimEnd(',');
string[] testArr = test.Split(new char[] { ',' }, StringSplitOptions.None); 
```

或者在一个声明中：

```
 string[] testArr2 = "[one],,,,[two],,,"
                               .TrimEnd(',')
                               .Split(new char[] { ',' }, StringSplitOptions.None); 
```

根据您编辑的问题，您当前的代码应该为您提供您正在寻找的结果。看下面的截图

![在此处输入图像描述](../Images/f3a69b95c8473dcf3596cd8372a13c21.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T05:42:31.490

```
string test = "[one]\t\t\t[two]\t\t\t";
string[] arrUnEven = test.Split(new char[] { '\t' }, StringSplitOptions.None);

test = test.TrimEnd(new char[] { '\t' });
test = test + new String( '\t',2);
string[] arrEven = test.Split(new char[] { '\t' }, StringSplitOptions.None); 
```

# java - TrafficStats 中的 getMobileTx/RxBytes() 和 getTotalTx/RxBytes() 有什么区别？

> ID：12345223
> 
> 赞同：0
> 
> 时间：2012-09-10T04:08:21.853
> 
> 标签：java, android

前两种方法是关于“移动接口”，另外两种是关于“所有网络接口”。那些是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T04:13:20.347

我*希望*“所有网络接口”包括 WiFi（如果设备碰巧支持，则有线），但“移动接口”仅包括通过蜂窝连接（3G、GPRS 等）的数据。

# java - android中的登录表单验证

> ID：12345225
> 
> 赞同：1
> 
> 时间：2012-09-10T04:08:29.383
> 
> 标签：java, android, validation

我在 Android 中开发了一种登录表单。我在这里使用了验证。我必须填写任何人（用户名或密码）然后我的应用程序应该显示*成功！*并且应该转移到其他活动。

但是，如果两个字段都为空，则不应显示成功消息，而应显示*登录失败！！！*.

请帮帮我。

**这是我的网络服务代码：**

```
public class XcartLogin {
    public String authentication(String userName, String password) {
        String retrievedUserName = "";
        String retrievedPassword = "";
        String status = "";
        try {
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/xcart432-pro", "root", "");
            PreparedStatement statement = con.prepareStatement("SELECT * FROM xcart_customers WHERE login = '" + userName + "'");
            ResultSet result = statement.executeQuery();
            while (result.next()) {
                retrievedUserName = result.getString("login");
                retrievedPassword = result.getString("password");
            }
            if (retrievedUserName.equals(userName) && retrievedPassword.equals(password)) {
                status = "Success!";
            } else {
                status = "Login fail!!!";
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return status;
    }
} 
```

**这是对我的 android 代码的验证：**

```
if(status.equals("Success!"))
    {
        // ADD  to save  and  read next time
        String strUserName = userName.getText().toString().trim();
        String strPassword = userPassword.getText().toString().trim();
        if (null == strUserName || strUserName.length() == 0)
        {
            // showToast("Enter Your Name");
            userName.setError( "username is required!" );
            isUserValidated = false;
        }
        if (null == strPassword || strPassword.length() == 0)
        {
            // showToast("Enter Your Password");
            isPasswordValidated = false;
            userPassword.setError( "password is required!" );
        } 
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T04:28:01.150

在`if(status.equals("Success!"))`验证代码中的语句之前，您应该首先执行此操作以避免在任何文本字段首先为空时查询数据库：

```
boolean errorOccurred = false;
if (strUserName.equals("")) {
    userName.setError("Username is required!");
    errorOccurred = true;
}

if (strPassword.equals("")) {
    userName.setError("Password is required!");
    errorOccurred = true;
}

if (errorOccurred) {
    return; // avoids executing the part of your code which queries the db
} 
```

检查输入字段的值是否`null`是毫无意义的，因为如果它们不包含任何内容，它只会是一个空字符串，或者`""`. 然后，为了简化您的网络服务代码......

```
if (result.next()) { // use if instead of while, because ideally, only ONE record should
                     // be returned and hence, no need to loop;

    // then, just get the corresponding password
    retrievedPassword = result.getString("password");
}

if (retrievedPassword.equals(password)) {
    status = "Success!";
} 
```

进一步的建议：输入“成功！” 在`String`常量中并使用它而不是文字值。通过这种方式，您犯错的机会更小，并且更容易编辑您的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T04:11:58.947

**尝试使用此条件：**

```
if(retrievedUserName.equals(userName)&&retrievedPassword.equals(password)&&!(retrievedUserName.equals("") && retrievedPassword.equals(""))) 
```

**而不是你的条件：**

```
if(retrievedUserName.equals(userName)&&retrievedPassword.equals(password)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T04:25:37.167

首先，您使用 PreparedStatement 的方式不正确。以下是您应该如何修改它：

```
PreparedStatement statement =  con.prepareStatement("SELECT * FROM xcart_customers WHERE login = ?"); 
```

然后，您将使用`setString(int paramIndex, String value)`设置值，然后调用该`executeQuery()`方法。像这样的东西：

```
PreparedStatement statement =  con.prepareStatement("SELECT * FROM xcart_customers WHERE login = ?");
statement.setString(1, userName);

ResultSet result = statement.executeQuery(); 
```

这是在代码中使用 PreparedStatement 的安全且实际的方法。

现在，要测试您的要求，您应该执行以下操作：

```
if(userName.equals(retrievedUserName)&&password.equals(retrievedPassword)&&!("".equals(retrievedUserName) && "".equals(retrievedPassword))) 
```

请注意，我正在对照*retrievedUserName*和*retrievedPassword检查**用户*名和*密码*，而**不是**相反，因为根据[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#getString%28int%29) for *.retrievedUserName*或*retrievedPassword*可能为空。******`getString(int)`******

 *****> 返回：列值；如果值为 SQL NULL，则返回值为 null

如果该值为 null，那么您将处理 a `NullPointerException`，我想您可能希望避免这种情况。此外，出于同样的原因，您可能希望在尝试查询数据库之前检查参数是否为空值。*****

# c# - 创建 smb 服务器以共享文件

> ID：12345233
> 
> 赞同：3
> 
> 时间：2012-09-10T04:09:33.677
> 
> 标签：c#, smb, network-share

大多数在线地方都解释了如何连接和读取由 smb 服务器托管的数据。Wikipedia 在以下位置解释了有关 smb 的更多信息：

[http://en.wikipedia.org/wiki/Server_Message_Block](http://en.wikipedia.org/wiki/Server_Message_Block)

所以我想做的是能够从windows eplorer打开一个文件（位于互联网上）：

![在此处输入图像描述](../Images/14bf65270542ca9e86ddbe12418426fe.png)

**我需要将此功能添加到我正在创建的程序中。**如果创建这样的服务器很复杂，我想我不会这样做，但我想尽力而为。我发现这个链接可以帮助我做我正在寻找的东西：http: [//www.codeproject.com/Articles/309936/Csharp-NET-Network-File-System-NFS-Server](http://www.codeproject.com/Articles/309936/Csharp-NET-Network-File-System-NFS-Server) 但我不能让它工作。

`hello world`如果我能有一个例子，我将服务器的 ip 放在 Windows 上，它会显示一个名为 hello world 的目录，我将非常感激。我计划在 Windows 计算机上运行服务器。

此外，它不必是 smb 服务器。任何可以让我在 Windows 上浏览文件的服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-12T10:05:31.760

SMBLibrary 是一个开源 C# SMB 1.0/CIFS 和 SMB 2 服务器库。

您可以实现 IFileSystem 并提供一个包含“hello world”文件的目录:)

请注意，Windows 只会连接到在端口 139 或端口 445 上运行的服务器，您不能指定任何其他端口（打印屏幕中的 server:port 语法无效）

[http://vm1.duckdns.org/public/SMBLibrary/SMBLibrary.htm](http://vm1.duckdns.org/public/SMBLibrary/SMBLibrary.htm)

[https://github.com/TalAloni/SMBLibrary](https://github.com/TalAloni/SMBLibrary)

塔尔阿洛尼

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T04:14:57.793

根据我的经验，您无法连接到本地网络之外的 SMB 共享。如果您尝试挂载 SMB 共享，则必须使用 VPN 或其他形式的隧道适配器进行连接。

但我对你的问题有点困惑。您是在寻找 SMB 协议的示例代码，还是只想要 SMB 共享？研究一些简单的东西，比如带有 Samba 的 Ubuntu。Samba 是一个非常简单的 SMB 共享，但就像我之前所说的，它无法在 Internet 上运行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-10T04:58:41.063

为什么不让自己变得容易，并在客户和“服务器”之间设置一个保管箱，这样您就可以跳过任何 vpn 并且不必自己编写任何代码，尽管您必须安装保管箱。

或者，您可以编写自己的本地版本的 Dropbox，将文件同步到中央存储库（通过任何传输机制 http(s)、(s)ftp ...），然后让客户端运行应用程序，将它们与服务器同步

编辑：看看[http://www.lifehacker.com.au/2011/07/how-to-set-up-a-file-syncing-dropbox-clone-you-control/](http://www.lifehacker.com.au/2011/07/how-to-set-up-a-file-syncing-dropbox-clone-you-control/)

# android - 测量 cpu 和其他硬件设备的负载、带宽和内存使用情况

> ID：12345234
> 
> 赞同：2
> 
> 时间：2012-09-10T04:09:45.830
> 
> 标签：android, cpu, cpu-usage

我需要测量android手机中每个设备（cpu、视频加速器、显示器等）的负载（mcps - 每秒百万周期）、带宽（MBps）和内存消耗（KB）。我知道获取 cpu 使用率的过程（[在 Android 中获取内存使用情况](https://stackoverflow.com/questions/3118234/how-to-get-memory-usage-and-cpu-usage-in-android)），但我想知道我们如何为手机上的其他硬件块做到这一点？

是否有任何可用的文档？

Rgds，萨潘

# html - 改变div的背景

> ID：12345235
> 
> 赞同：-6
> 
> 时间：2012-09-10T04:10:01.320
> 
> 标签：html

我无法更改我的一个 div 的背景颜色。我正在尝试将列（特色狗、特色猫、特色其他）的背景更改为#E0E6FF。我尝试将整个部分包含在一个名为 features 的 div 中，并为其添加背景颜色，但它没有用。有什么建议么？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>Adoption Process and Application</title>
<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
<style type="text/css">

* {
margin: 0px 0px;
padding: 0px 0px;
}

/* MAIN WRAPPER */ 
.wrapper {
width: 1092px;
margin-right: auto;
margin-left: auto;
}

/* BODY */ 
body {
background-image: url(mainback.png);
background-repeat: repeat-y repeat-x;
}

/* HEADER */   
#header {
margin: 0px;
//padding: 50px 0px 0px 0px;
}

.banner {
margin-left: 31.4%;
margin-bottom: -5px;
}

/* NAVIGATION */
#nav {
padding: 0px; 
//margin: 10px 0px 10px 0px;
background-color: #330033;
overflow: hidden;
}

#nav ul {
margin: 0px;
padding: 0px;
list-style-type: none;      
}

#nav li {
text-align: center;
float: left;
padding: 0px 0px 0px 37px;
width: 220px;
color: E0E6FF
}

#nav a {
font-family: Copperplate Gothic Light, sans-serif;
letter-spacing: 1px;
color: #E0E6FF;
display: block;
font-size: 1.3em;
height: 50px;
line-height: 50px;
text-decoration: none;
text-transform: uppercase; 
font-weight: bold;
}

#nav a:hover {
background: #FFC473;
color: #330033;
}

/* MAIN CONTENT */ 
#main {
padding: 15px 0px 15px 0px;
margin: 0px;
width: 1092px;
float: left;
background-color: #330033;
}

#main p {
font-family: "Times New Roman", Times, serif;
font-size: 15px;
line-height: 20px;
letter-spacing: 1.5px;
padding: 0em 1em 1em 1.5em;
color: #E0E6FF;
text-indent: 20px;
}

h1 {
font-weight: bold;
font-family: Copperplate Gothic Light, sans-serif;
font-size: 1.2em;
text-transform: uppercase;
padding: 0em 0em 0em 1em;
color: #330033;
}

#intro {
overflow: hidden;
}

/* FEATURED */
#featured {
background-color: #E0E6FF;
}

/* PICTURES */
#dogs img, #cats img, #others img {
border: 2px solid #330033;
width: 300px;
height: 225px;
}

#dogs h1, #cats h1, #others h1 {
font-family: Copperplate Gothic Light, sans-serif;
font-size: 1.4em;
text-align: center;
}

/* DOG CONTENT */
#dogs {
border: 3px solid #330033;
float: left;
margin-right: 50px;
margin-top: 15px;
margin-bottom: 15px;
margin-left: 10px;
width: 300px;;
height: 750px;
padding: 5px 13px 5px 5px;
color: #330033;
}

#dogs_inner {
background-image: url(images/backgrounds/contentBG.jpg);
background-repeat: no-repeat;
}

/* CAT CONTENT */
#cats {
border: 3px solid #330033;
float: left;
margin-right: 50px;
margin-top: 15px;
margin-bottom: 15px;
width: 300px;;
height: 750px;
padding: 5px 13px 5px 5px;
color: #330033;
}

#cats_inner {
background-image: url(images/backgrounds/contentBG.jpg);
background-repeat: no-repeat;
}

/* OTHER CONTENT */
#others {
border: 3px solid #330033;
float: left;
width: 300px;
margin-top: 15px;
margin-bottom: 15px;
margin-right: 10px;
height: 750px;
padding: 5px 13px 5px 5px;
color: #330033;
}

#others_inner {
background-image: url(images/backgrounds/contentBG.jpg);
background-repeat: no-repeat;
}

/* LIST STYLE */
#dogs ul, #cats ul, #others ul {
list-style-type: none;
}

/* SPAN STYLE */
.h2 {
font-weight: bold;
text-decoration: underline;
}

/* FOOTER */
#footer {
margin: 0px;
padding: 0px;
clear: both;
color: #E0E6FF;
height: 60px;
width: 1092px;
background-color: #330033;
}

#footer_inner {
font-family: "Times New Roman", Times, serif;
font-size: 14px;
letter-spacing: 1.5px;
color: #E0E6FF;
}

.footer_location {
float: left;
font-size: .85em;
text-align: left;
padding: 14px 55px 15px 60px;
}

.footer_social {
float: left;
font-size: .85em;
padding: 18px 5px 0px 200px;
}

#footer img {
padding: 0px 5px 0px 0px;
}

.footer_contact {
float: right;
font-size: .85em;
text-align: right;
padding: 14px 60px 15px 55px;
}

#footer a:link {
color: #E0E6FF;
}

#footer a:hoover {
color: #E0E6FF;
}

#footer a:visited {
color: #E0E6FF;
}

</style>

</head>
<body>

<div id="header">
    <div class="wrapper">
        <img class="banner" src="banner.png" alt="Paws and Claws Animal Rescue" />
    </div> <!--end div wrapper -->
</div> <!--end div header -->

<div class="wrapper">   
    <div id="nav">      
        <ul>
            <li><a href="final.html">Home</a></li>
            <li><a href="available.html">Available Pets</a></li>
            <li><a href="happytails.html">Happy Tails</a></li>
            <li><a href="application.html">Process</a></li>
        </ul>
    </div> <!--end nav div -->

    <div id="intro">
        <div id="main">
        <p>Hello! We are Paws and Claws Animal Rescue. Paws and Claws is a nonprofit organization that works to save the lives of animals. We see each animal as special and worthy of our attention. Our dedicated team of volunteers work countless hours to enrich the lives of animals who were given less than acceptable attention in the past. Volunteers start by giving a full assessment of each animal that comes into the rescue both for medical reasons and temperament. From their, volunteers work to socialize and adapt the animals to new environments so they are able to be adopted to forever homes as soon as possible</p>
<p>
We take great care in the placement of all our animals and work hard to make sure they find the perfect forever home. For all these dogs have been through having their regular lives interrupted, the least we can do is find them a safe and loving home. We take pride in the care we provide for our animals and ensure they are up-to-date on all their shots and vaccinations before placing them in homes. Each of our animals are spayed or neutered, brought up-to-date on rabies, distemper and bordetella vaccinations, heartworm tested and put on prevention prior to being adopted as needed per animal.</p>
<p>
Why should you choose to adopt from Paws and Claws? Paws and Claws does not turn away any animal for any reason: not for age, size, breed, or condition. Choosing Paws and Claws gives you the best option for getting the pet of your dreams. And we are here for you every step of the way. If you have any questions, please do not hesitate to call or email. We want the best for our animals so we are willing to do whatever it takes to accomplish that.
</p>
    </div> <!-- end div main -->
    </div> <!-- end div intro -->
</div> <!-- end div wrapper -->

<div class="wrapper">
    <div id="featured">
        <div id="dogs">
    <div id="dogs_inner">
        <h1>Featured Canines</h1>
        <img src="simba.png" alt="Simba, age 6yrs" />
        <ul>
            <li><span class="h2">Name:</span> Simba</li>
            <li><span class="h2">Nickname:</span> Mr. Fluffy or Mr. Smiley (wait until you see him grin when you come home!)</li>
            <li><span class="h2">Gender:</span> Male</li>
            <li><span class="h2">Breed:</span> Pomeranian Mix</li>
            <li><span class="h2">Age:</span> 6 years</li>
            <li><span class="h2">Weight:</span> 12 pounds</li>
            <li><span class="h2">History:</span> Simba is originally from South Carolina. He tested positive for heart worm, and his foster parents could not afford to pay for the treatment. Simba traveled all the way to our rescue group where he successfully underwent intense treatment and is now heart worm free. Overall, Simba is a wonderful, loving dog. All he really needs is a blanket or pillow bed to sleep on, some stuffed animals toys, and daily walks right around 7:00pm (he will let you know when he is ready!) </li>
            <li><span class="h2">Socialization:</span> Simba gets along well with most other dogs, but he does best with dogs that are a similar size or small than he is. He adjusts to living with cats, but would prefer them not to be around!</li>
            <li><span class="h2">Special Needs:</span> Simba struggles with seizures; however, with proper medication, he has been seizure free for over a year.</li>
            <li><span class="h2">Adoption Fee:</span> $300</li>
        </ul>
    </div><!--end div dog_inner-->
</div><!--end div dog-->

<div id="cats">
    <div id="cats_inner">
        <h1>Featured Felines</h1>
        <img src="jake.png" alt="Jake, age 6yrs" />
        <ul>
            <li><span class="h2">Name:</span> Jake</li>
            <li><span class="h2">Nickname:</span> N/A</li>
            <li><span class="h2">Gender:</span> Male</li>
            <li><span class="h2">Breed:</span> Domestic Short Hair, Gray/White</li>
            <li><span class="h2">Age:</span> 6 years</li>
            <li><span class="h2">Weight:</span> 16 pounds</li>
            <li><span class="h2">History:</span> Jake was found with a lady who was selling him outside of Croppers Grocery Store. He was brought into the rescue looking for a more stable home. Jake is a loving cat that likes to cuddle and even sleep by your side at night. He also enjoys a good brushing. If you just show him the brush he will leap up on the table and meow in anticipation. Jake also enjoys some people food like chicken, so be sure to put your leftovers away! Jake has a lot of love to give and is anxiously awaiting a new forever home.</li>
            <li><span class="h2">Socialization:</span> Jake gets along well with both cats and dogs, but he is an instigator for trouble! He knows dogs don't much care for him, but he likes to lurk within sighting distance to show he is fearless. </li>
            <li><span class="h2">Special Needs:</span> Jake is an inside/outdoor cat. He needs a big yard (does not have to be fenced in) that is away from any major roads.</li>
            <li><span class="h2">Adoption Fee:</span> $200</li>
        </ul>
    </div><!--end div cat_inner-->
</div><!--end div cat-->

<div id="others">
    <div id="others_inner">
        <h1>Featured Others</h1>
        <img src="floppy.png" alt="Floppy, age 3yrs" />
        <ul>
            <li><span class="h2">Name:</span> Floppy</li>
            <li><span class="h2">Nickname:</span> N/A</li>
            <li><span class="h2">Gender:</span> Female</li>
            <li><span class="h2">Breed:</span> Lionhead</li>
            <li><span class="h2">Age:</span> 3 years</li>
            <li><span class="h2">Weight:</span> 4 pounds</li>
            <li><span class="h2">History:</span> Floppy and her siblings came from a hoarder in New Jersey who became quickly overwhelmed by the number of pets she had consumed. When Floppy came into our rescue she was in desperate need of a bath and nail clipping. After some cleaning up, Floppy was like a new rabbit and quickly nestled into his freshly layered cage. Her favorite snack is yogurt drops and will friend anyone who gives them to her! Floppy is looking for some one is ready and excited to love her. </li>
            <li><span class="h2">Socialization:</span> Floppy gets along very well with other rabbits. She grew up with two siblings who often shared a cage. She also pays little attention to other animals including dogs and cats. She adjusts well to be handled by people once she gets to know you.</li>
            <li><span class="h2">Special Needs:</span> Floppy is a great pet, but we would prefer she be handled by someone who has experience with rabbits.</li>
            <li><span class="h2">Adoption Fee:</span> $100</li>
        </ul>
    </div><!--end div other_inner-->
</div><!--end div other-->

    </div><!-- end div featured -->
</div> <!-- end div wrapper -->

<div class="wrapper">
<div id="footer">
    <div id="footer_inner">
        <p class="footer_location">1234 Forbes Avenue<br />
        Pittsburgh, PA 15213</p><!--end p footer_location-->

        <p class="footer_social">
        <a href="www.petfinder.com"><img src="finder.png" alt="See our animals on Petfinder" /></a>
        <a href="www.facebook.com"><img src="Facebook.png" alt="Friend us on Facebook" /></a>
        <a href="www.twitter.com"><img src="twitter.png" alt="Follow us on Twitter" /></a>
        <a href="www.youtube.com"><img src="youtube.png" alt="Visit Our YouTube Channel" /></a></p><!--end p footer_social-->

        <p class="footer_contact">Telephone: 512.341.8872<br />
        Email: <a href="mailto:paws+claws@gmail.com">paws+claws@gmail.com</a></p><!--end p footer_contact-->
    </div><!--end div footer_inner-->
</div><!--end div footer-->
</div> <!--end wrapper div -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:16:18.197

添加这个 [http://jsfiddle.net/nAQSv/1/](http://jsfiddle.net/nAQSv/1/)

```
#featured {
background-color: #E0E6FF;
height: auto;
overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T04:22:02.543

您的#dogs、#cats 等样式正在使用该`float: left`属性，这使得容器元素不会扩展为包含这些浮动元素。

一种常见的解决方案是在末尾使用`div`具有相应样式的空。`clear: both`但更清洁、更好的解决方案是`overflow: auto`在#featured 中设置属性，以扩展此 div 并完全按照您的要求进行操作。

# scala - 如何从生成的 pom 中排除具有显式 URL 的库依赖项？

> ID：12345239
> 
> 赞同：5
> 
> 时间：2012-09-10T04:10:52.710
> 
> 标签：scala, sbt

我正在将[Scala Migrations](http://code.google.com/p/scala-migrations/)项目从 ant/ivy 转移到 sbt。[它可以选择使用 log4jdbc 作为任何公共 Maven 存储库](http://code.google.com/p/log4jdbc/wiki/FAQ)中不存在的库依赖项（从我能找到的）。

```
libraryDependencies +=
  "log4jdbc" % "log4jdbc" % "1.1" from "http://log4jdbc.googlecode.com/files/log4jdbc4-1.1.jar" 
```

我希望生成的 POM 不包含 log4jdbc，因为它不在任何存储库中。如果不列出 log4jdbc，POM 会更好，这是一个正确的假设吗？此外，对于使用 sbt 的 Scala Migrations 用户来说，列出它会不会更好？

我编写了以下设置以从 POM 中删除 log4jdbc 依赖项。有没有更好、更简单的方法？可以将设置添加到 sbt 以自动执行此操作吗？

```
// Do not include log4jdbc as a dependency.
pomPostProcess := { (node: scala.xml.Node) =>
  val rewriteRule =
    new scala.xml.transform.RewriteRule {
      override def transform(n: scala.xml.Node): scala.xml.NodeSeq = {
        val name = n.nameToString(new StringBuilder).toString
        if (name == "dependency") {
          if ((n \ "groupId").text == "log4jdbc")
            scala.xml.NodeSeq.Empty
          else
            n
        }
        else {
          n
        }
      }
    }
  val transformer = new scala.xml.transform.RuleTransformer(rewriteRule)
  transformer.transform(node)(0)
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T19:51:24.687

因为您提到了 POM，所以我假设您想要支持 Maven 用户或者您想要发布到 Maven 存储库。如果不是这样，您不需要发布到 POM，您可以像在 Ant/Ivy 设置中一样使用 Ivy 元数据。

由于您了解 Ivy，因此该`from(URL)`方法本质上是通过声明一个自定义工件并将其`from`属性设置为 URL 来实现的。与 Maven/POM 无关，Ivy 在交付的 Ivy 文件中不包含自定义工件。（至少，我相信这是标准的 Ivy 行为，而不是 sbt 配置 Ivy 要做的事情。）

但是，也没有办法在 pom.xml 中提供依赖项的 URL。您如何处理这可能取决于您期望客户做什么，但一种相当通用的解决方案是将依赖项声明为可选：

```
libraryDependencies +=
  "log4jdbc" % "log4jdbc" % "1.1" % "compile,optional" from
    "http://log4jdbc.googlecode.com/files/log4jdbc4-1.1.jar" 
```

客户端需要显式声明依赖项才能使用它。因为它不是存储库，所以 sbt 用户仍然需要复制`from "..."`声明。Maven 用户只能在存储库中使用依赖项，尽管他们可以相当容易地将其手动安装到本地存储库中。

# iphone - 多个 if-else Vs for 循环

> ID：12345241
> 
> 赞同：0
> 
> 时间：2012-09-10T04:11:19.293
> 
> 标签：iphone, objective-c, performance

在解析 xml 文档时，我使用了多个 if-else 来明智地解析数据标签。我也可以对 for 循环做同样的事情。但是我对使用哪个感到困惑，因为性能会提高。哪个会更快？

```
//Parsing with If-Else

if(element.name isEqualToString:@"String1") {
object.id = [element.value intValue];
}
if(element.name isEqualToString:@"String2") {
object.name = element.value;
}
if(element.name isEqualToString:@"String3") {
object.address = element.value;
}
.....

// OR Parsing with for loop

for(NSString * str in NSArray) {
[dict setObject:element.value forKey:element.name];// This will add parsing element in dict
}

//Use the dictionary to show data later 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:08:46.297

字典查找可以更快，因为它使用密钥哈希。也就是说，您应该始终在尝试优化代码之前对其进行分析。

就个人而言，我喜欢字典方法，因为它是不那么平凡的代码。此外，您可以轻松地将元素名称映射到感兴趣的字典键：

```
NSDictionary *keySubstitutions = { @"String1" : @"id", @"String2" : @"name", ... };

for(NSXMLElement * element in elements) {
    id key = keySubstitutions[element.name];
    if (key)
        dict[key] = element.value;
    // else the element name is not supported
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T04:24:49.040

这实际上既是关于代码结构的问题，也是关于表示的问题。具有命名属性的对象强烈建议使用 if-elseif 结构，而字典强烈建议使用循环。

XML（以及它的所有亲属）与名称-值表示完美配对。标签是名称，标签主体是值。

字典是要走的路，因此循环也是如此。这是 NS 解析器以及我能想到的任何第三方做出的选择。

# google-chrome-extension - 有没有办法将“索引页面”添加到 chrome 扩展？

> ID：12345260
> 
> 赞同：1
> 
> 时间：2012-09-10T04:14:04.607
> 
> 标签：google-chrome-extension

我正在开发一个使用多功能框作为其主界面的 chrome 扩展。结果，一些交互泄漏到多功能框历史记录中。单击其中任何一个，浏览器会尝试访问具有以下 url 格式的页面：

```
chrome-extension://[EXTENSION_ID]/?q=[EXTENSION_INPUT] 
```

这总是会导致找不到页面错误。有没有办法定义这个页面或以其他方式处理这个问题？

# ios - 在 iOS 设备上“离屏”时，UIText 视图的内容不会呈现

> ID：12345261
> 
> 赞同：2
> 
> 时间：2012-09-10T04:14:08.870
> 
> 标签：ios, xcode, uitextview

我正在使用 UITextView 来呈现一些文本。我正在使用以下代码使我的主视图更大，以将输出设置为更高的分辨率（我还将所有子视图缩放相同的因子）。

```
 UIGraphicsBeginImageContext(CGSizeMake(ImageView.frame.size.width*4, ImageView.frame.size.height*4));
[outputView setFrame:CGRectMake(outputView.frame.origin.x, outputView.frame.origin.y, outputView.frame.size.width*4, outputView.frame.size.height*4)];
     [[outputView layer] renderInContext:UIGraphicsGetCurrentContext()]; 
```

在缩放方面工作正常。唯一的问题是，如果 UITextView 元素“不在屏幕上”，它将无法正确呈现。因此，在没有 *4 比例因子的情况下，一切都可以很好地呈现，但是被推离屏幕的 UITextView 元素无法正确呈现（大部分只是空白）。

有没有办法覆盖它，强制它渲染？

谢谢阅读

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T04:28:38.820

做这个：

```
 CGAffineTransform newtransform = CGAffineTransformMakeScale(4.0, 4.0);
  self.view.transform = newtransform;
  CGRect newFrame = CGRectApplyAffineTransform(self.view.frame, newtransform);
  //CGSize fittingSize = [yourTextView sizeThatFits:CGSizeZero];
  UIGraphicsBeginImageContext(newFrame.size);
  [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
  UIImahe *capImage = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T03:32:36.827

最终使用标签，仅用于渲染。所以 UIText 视图用于在界面中显示，以及用于交互，但它们被暂时隐藏并被标签替换以进行渲染。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-10T14:38:50.103

为了以 Mrwolfy 的回答为基础，我还设法通过将`UITextView`in的内容复制到 a 来解决类似的问题`UILabel`- 无论出于何种原因，它的行为似乎有所不同。这是我使用的代码：

```
UILabel* contents = [[UILabel alloc] initWithFrame:textView.frame];
[textView.superview addSubview:contents];
contents.numberOfLines = 0;
contents.lineBreakMode = NSLineBreakByWordWrapping;
contents.attributedText = textView.attributedText;

textView.hidden = YES;

// Now render the scrollview in slices
for (CGFloat y = 0; y < scrollView.contentSize.height; y += scrollView.frame.size.height) {
    [scrollView setContentOffset:CGPointMake(0, y) animated:NO];
    [scrollView.layer renderInContext:context];
}

textView.hidden = NO;

[contents removeFromSuperview]; 
```

# git - 查看 git 日志而不签出

> ID：12345262
> 
> 赞同：2
> 
> 时间：2012-09-10T04:14:12.537
> 
> 标签：git, logging, github, repository

是否可以使用简单的命令查看 Git 存储库的 Git 日志；换句话说，无需下载回购协议？

我想阅读 Github 上几个存储库的日志并解析它们以获得某些统计信息。

例如，为此：

[https://github.com/shumsky/Player](https://github.com/shumsky/Player)

我尝试了 git log -p github.com/shumsky/Player 但收到“模棱两可的论点”消息

我以前从未真正使用过 Git。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:29:21.647

[基于 Github API](http://developer.github.com/v3/repos/commits/)，这里是你应该使用的 API 调用

```
curl -u '<your-github-username>' https://api.github.com/repos/<repo-user>/<repo-project>/commits 
```

对于[D3](https://github.com/mbostock/d3)库，您可以使用：

```
curl -u '<your-github-username>' https://api.github.com/repos/mbostock/d3/commits > all-d3-commits.txt 
```

这是一些输出。警告，它有很多数据。

```
[
  {
    "url": "https://api.github.com/repos/mbostock/d3/commits/183060d40ffce8a8bd233feeedd80f84d4707642",
    "committer": {
      "type": "User",
      "repos_url": "https://api.github.com/users/mbostock/repos",
      "subscriptions_url": "https://api.github.com/users/mbostock/subscriptions",
      "url": "https://api.github.com/users/mbostock",
      "gists_url": "https://api.github.com/users/mbostock/gists{/gist_id}",
      "received_events_url": "https://api.github.com/users/mbostock/received_events",
      "avatar_url": "https://secure.gravatar.com/avatar/005a27e09fe946ebef64bf4d134efc0a?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
      "login": "mbostock",
      "organizations_url": "https://api.github.com/users/mbostock/orgs",
      "events_url": "https://api.github.com/users/mbostock/events{/privacy}",
      "gravatar_id": "005a27e09fe946ebef64bf4d134efc0a",
      "followers_url": "https://api.github.com/users/mbostock/followers",
      "id": 230541,
      "starred_url": "https://api.github.com/users/mbostock/starred{/owner}{/repo}",
      "following_url": "https://api.github.com/users/mbostock/following"
    },
    "sha": "183060d40ffce8a8bd233feeedd80f84d4707642",
    "author": {
      "type": "User",
      "repos_url": "https://api.github.com/users/mbostock/repos",
      "subscriptions_url": "https://api.github.com/users/mbostock/subscriptions",
      "url": "https://api.github.com/users/mbostock",
      "gists_url": "https://api.github.com/users/mbostock/gists{/gist_id}",
     "received_events_url": "https://api.github.com/users/mbostock/received_events",
      "avatar_url": "https://secure.gravatar.com/avatar/005a27e09fe946ebef64bf4d134efc0a?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
      "login": "mbostock",
      "organizations_url": "https://api.github.com/users/mbostock/orgs",
      "events_url": "https://api.github.com/users/mbostock/events{/privacy}",
      "gravatar_id": "005a27e09fe946ebef64bf4d134efc0a",
      "followers_url": "https://api.github.com/users/mbostock/followers",
      "id": 230541,
      "starred_url": "https://api.github.com/users/mbostock/starred{/owner}{/repo}",
      "following_url": "https://api.github.com/users/mbostock/following"
    },
    "comments_url": "https://api.github.com/repos/mbostock/d3/commits/183060d40ffce8a8bd233feeedd80f84d4707642/comments",
    "parents": [
      {
        "url": "https://api.github.com/repos/mbostock/d3/commits/11a19ec03d21a2908ce2d0ceed954e6a41a58cfc",
        "sha": "11a19ec03d21a2908ce2d0ceed954e6a41a58cfc"
      }
    ],
    "commit": {
      "url": "https://api.github.com/repos/mbostock/d3/git/commits/183060d40ffce8a8bd233feeedd80f84d4707642",
      "committer": {
        "email": "mbostock@gmail.com",
        "date": "2013-01-24T17:26:22Z",
        "name": "Mike Bostock" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:59:23.537

正如[Pos5e5s3dFr3ak](https://stackoverflow.com/users/1156254/pos5e5s3dfr3ak)在评论中提到的那样，针对 GitHub 存储库自动查询的方法是使用[他们的 API](http://developer.github.com/v3/)：

例如， [Git 提交 API 页面](http://developer.github.com/v3/git/commits/)可以让您获取提交数据（及其相关评论，日志的一部分），而无需克隆完整的 repo。
但是您也可以查询`README`文件、分支（查看特定项目的其他克隆是否有活动），...

# php - 如何定义正则表达式（preg_replace）以删除数字字符之间的空格

> ID：12345265
> 
> 赞同：0
> 
> 时间：2012-09-10T04:14:33.580
> 
> 标签：php, regex, string, preg-replace, space

我有这样的字符串：

```
$str = "old iccid : 809831 3245 345 new iccid : 999000 112221" 
```

如何定义正则表达式以删除 PHP 中数字字符之间的空格字符，成为此输出？

```
$output = "old iccid : 8098313245345 new iccid : 999000112221"; 
```

我试过使用这种语法：

```
$output = preg_replace( '/\d[ *]\d/', '', $str); 
```

但效果不佳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:16:22.503

尝试：

```
$output = preg_replace('/(?<=\d)\s+(?=\d)/', '', $str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-25T14:02:58.530

正则表达式引擎可以更快地/以更少的步骤遍历字符串，而无需后视。

171个步骤：（[演示](https://regex101.com/r/duGHMe/1)）

```
/(?<=\d)\s+(?=\d)/ 
```

115个步骤（[演示](https://regex101.com/r/duGHMe/2)）

```
/\d\K\s+(?=\d)/ 
```

您会看到，在使用环视时，正则表达式引擎必须在每次出现空格时查看 1 或 2 种方式。

通过检查一个数字后跟一个空格，正则表达式引擎只有在找到合格的两个字符序列后才需要向前看。

在许多情况下，环视和捕获组最终会花费额外的“步骤”，因此我更喜欢寻找更有效的替代模式。

仅供参考，`\K`“重新启动完整的字符串匹配”。换句话说，它匹配然后忘记直到元字符位置的所有字符。

ps 您也可以使用`/\d\K\s+(\d)/`将步骤降低到 106 [Demo](https://regex101.com/r/duGHMe/4)，但是您需要参考捕获组，我个人的偏好是避免在替换中使用该语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-07T20:01:31.323

试试这个 ：

```
$input = "old iccid : 809831 3245 345 new iccid : 999000 112221"
$output = preg_replace("/(\d)\s+(\d)/", "$1$2", $input);
echo $input . "\n" . $output; //old iccid : 8098313245345 new iccid : 999000112221 
```

# factory-bot - Factory Girl 4.0.0 中的关联

> ID：12345275
> 
> 赞同：2
> 
> 时间：2012-09-10T04:16:05.310
> 
> 标签：factory-bot

我刚刚打开 Factory_Girl 并试图弄清楚如何构建依赖工厂，由于新版本的原因，大多数问题似乎已经过时。

我正在使用关联，但除了创建关联对象之外，该对象似乎与主对象无关或不相关

基本上这就是我所拥有的

```
factory :computer do
  serial_no "12345"
end

factory :allocation do
  association :computer_id, factory: :computer
end 
```

分配属于_to 计算机和计算机有_many 分配基本上分配是计算机移动或诸如此类的任何时间的记录。

我不确定自己做错了什么，但每次运行时，分配的computer_id 都是“1”，但计算机的ID 是随机的（通常是0-20 之间的数字），然后我的测试失败因为它找不到合适的计算机对象。

编辑：好像还不够混乱，实际的类名是Assignment，我试图简单地说。这是所涉及的实际代码，实际代码没有问题，因为 computer_id 和 user_id 在创建期间作为参数传递给 create 方法。

```
describe "GET index" do
  it "assigns assignments as @assignment" do
    Assignment.any_instance.stubs(:valid?).returns(true)
    assignment = FactoryGirl.create :associated_assignment
    get :index, {}, valid_session
    assigns(:assignments).should eq([assignment])
  end
end 
```

涉及的工厂有

```
factory :user do
  fname "John"
  lname "Smith"
  uname "jsmith"
  position "placeholder"
end

factory :computer do
  asset_tag "12345"
  computer_name "comp1"
  make "dell"
  model "E6400"
  serial_no "abc123"
end

factory :associated_assignment, class: Assignment do
  association :user_id, factory: :user
  association :computer_id, factory: :computer
  assign_date '11-11-2008'
end 
```

控制器是：

```
def index
  @assignments = []
  @computers = Computer.all
  Computer.all.each do |asset|
    @assignments <<  Assignment.where(:computer_id => asset.id).order("assign_date ASC").last
  end
  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @assignments }
    format.xls { send_data @assignments.to_xls }
end 
```

目前我正在运行这个替代测试来检查我的身份证：

```
describe "GET index" do
  it "assigns assignments as @assignment" do
    Assignment.any_instance.stubs(:valid?).returns(true)
    assignment = FactoryGirl.create :associated_assignment
    get :index, {}, valid_session
    assigns(:computers).should eq([assignment])
  end
end 
```

这会返回以下内容，其中计算机的 ID 是随机的，但分配的 computer_id 始终为 1。

```
Failure/Error: assigns(:computers).should eq([assignment])

   expected: [#<Assignment id: 12, user_id: 1, computer_id: 1, assign_date: "2008-11-11", created_at: "2012-09-10 23:59:48", updated_at: "2012-09-10 23:59:48">]
        got: [#<Computer id: 14, serial_no: "abc123", asset_tag: 12345, computer_name: "comp1", make: "dell", model: "E6400", created_at: "2012-09-10 23:59:48", updated_at: "2012-09-10 23:59:48">] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T04:47:21.503

工厂不保证任何东西都会有什么 id。但是您可以通过以下方式找到正确的计算机对象：

```
allocation = FactoryGirl.create(:allocation)
computer = allocation.computer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T01:27:02.797

我认为问题在于：computer_id 与：computer。这是使用 FactoryGirl 推断工厂和关联的能力的一种方法：

```
factory :computer do
  serial_no "12345"
end

factory :allocation do
  computer
end 
```

此外，如果您希望每台计算机的规格中都有唯一的序列号，请使用：

```
sequence :serial_no do |n|
  "1234#{n}"
end

factory :computer do
  serial_no
end

factory :allocation do
  computer
end 
```

Factory Girl 了解您的模型及其关联，因此它可以拾取它们并推断如何创建相关对象。

因此：

```
allocation = FactoryGirl.create :allocation 
```

创建一个分配对象和一个序列号为 12340 的关联计算机。计算机对象的 id 已经在分配的 computer_id 字段中，因此关系已完全建立。allocation.computer 将起作用，并且 allocation.computer_id 将与 allocation.computer.id 相同。

这使用了 FactoryGirl 的一些语法糖。您可以通过提供关联（字段）名称和工厂名称来更加明确：

```
factory :computer do
  serial_no "12345"
end

factory :allocation do
  association :computer, factory: :computer
end 
```

# java - 日食地狱。. . 读取项目描述文件（.project）失败

> ID：12345276
> 
> 赞同：22
> 
> 时间：2012-09-10T04:16:07.993
> 
> 标签：java, eclipse

我认为 Eclipse 试图让我痛苦。几个小时前，我的项目运行良好，编译良好。突然间，一切都变了。Eclipse 以某种方式清除了我对文件（活动、清单等）所做的所有更改。我确保经常保存，但是当我去运行项目时，我得到一个错误，我有一个构建错误。我检查了一下，没有，所以我关闭了 Eclipse，所以我可以重新打开，看看错误是否会消失。相反，Eclipse 会清除我的所有文件，最终我在磁盘上创建了一个包含大量空白代码文件的项目。无论如何我尝试运行，我收到下面的错误消息。

**无法读取“com.example.android.nfc.simulator.FakeTagsActivity.FakeTagsActivity”的项目描述文件 (.project)。该文件已在磁盘上更改，现在包含无效信息。在描述文件恢复到有效状态之前，项目将无法正常运行。**

任何人都知道这到底是怎么回事，我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T04:32:38.710

我建议清除所有与 eclipse 相关的配置文件（如果您手动对这些配置文件进行了一些更改，请确保备份）并再次导入项目，方法如下

**文件 -> 导入... -> 现有项目到工作区**

确保在执行此操作之前备份整个项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T20:47:38.757

当 Eclipse 陷入某种模糊状态时，我通常会发现在工作区目录中重新创建 .metadata 文件夹很有用。这是一个激进的解决方案，但它通常对我有用。之后，您可以重新导入所有项目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-07T19:01:13.407

这发生在我身上，因为我的 .project 文件中有冲突。我在文本编辑器中打开它并修复了冲突（在我的情况下，从`====...`to`>>>branch...`和 中删除`<<<HEAD`）然后我能够在 eclipse 中打开项目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-25T13:09:26.420

我刚刚遇到同样的问题（使用基于 Eclipse 构建的 Zend Studio 12）。我的问题是我正在从远程服务器创建一个项目，而我只是在下载所有内容，其中还包括`.project`旧项目中的文件。直到我关闭程序并尝试再次打开它（通常直到第二天），它才显示此错误。

我似乎已经通过确保`.project`在初始化项目时不下载来解决它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T04:22:37.687

如果 .project 文件是文本文件，那么如果您在版本控制中拥有它，您可能希望从那里复制它。

在您尝试以下操作之前，请备份您当前的项目状态。

假设您没有旧副本，您可以在文本编辑器中打开它并尝试查看是否有明显错误。

如果失败，请将项目的源文件复制到新位置（没有 eclipse 配置文件）并将其作为新项目导入 eclipse。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-06T01:56:51.393

如果您使用`git`，请完成合并，例如`del` 您的`androidmanifest`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-24T01:17:15.777

如果所有文件都是空的，并且您没有可用的备份，我无能为力。我建议将来使用适当的版本控制。

使用 git 或 mercurial，它们有很好的 UI 集成（参见 tortoisegit/tortoisehg）。

要将构建过程和库管理与 eclipse 分离，请查看 maven 或 gradle，这可能会对您未来的项目有所帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-19T09:47:29.327

如果您仍然拥有所有其他源（.java 文件、AndroidManifest.xml、资源），您可以通过简单地转到包含项目的文件夹，删除您所说的 .project 文件来恢复您的项目。为空，然后使用新项目向导从现有的源代码树为您重新创建项目（和 .project 文件）。

从菜单中选择**File -> New... -> Project**，然后在第一个对话框中，**从 Existing Code 中选择 Android Project**。

如果您对 .project 做了任何特殊处理（依赖特定的 .jar 文件或更改类路径），您可能必须在重新创建项目后重新执行这些步骤；但至少它应该选择你已经拥有的代码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-12-10T05:38:36.830

我在 Eclipse 中也遇到了相同的问题，但真正的问题是我将实际的源项目文件夹从源位置（eclipse 试图从中获取项目）删除到其他地方，因此我的 eclipse 无法获取 web.xml 文件，因为它不可用。现在我将源项目文件夹位置更改为 eclipse 尝试搜索的路径。为我解决了问题。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-11-02T06:00:44.800

只需删除工作区中的“服务器”文件夹，然后重试。

# objective-c - 在 iOS 中创建自己的自定义库？

> ID：12345279
> 
> 赞同：3
> 
> 时间：2012-09-10T04:16:18.193
> 
> 标签：objective-c, ios, xcode, model-view-controller, shared-libraries

我对编程还很陌生，想更有效地开始编程。尽我所能尝试我经常发现自己偏离了 MVC 模型。

我想知道在 xcode objc 中编码时是否有任何提示或方法可以保持代码井井有条？更具体地说（我知道你们喜欢这样 :) 我想

1.  能够编写可以从一个项目带到另一个项目的库或自包含代码
2.  与他人共享我的代码作为开源项目
3.  防止自己编写不符合正确结构的杂乱代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T06:58:15.330

*   使用高警告级别。构建干净。
*   删除所有静态分析器问题。
*   写一些单元测试。
*   保持公共接口小。
*   指定库的依赖项（例如，最低 SDK 版本和依赖库）。
*   定期针对多个/支持的操作系统版本进行编译。
*   学习创建和管理静态库目标。这就是您在另一个项目中支持和重用该库所需要的全部（除非您将外部资源拖到图片中，这会变得很痛苦）。
*   没有全局状态（例如单例、全局变量）。
*   精确地支持多线程上下文（更常见的是，并发应由客户端负责）。
*   记录您的公共界面（也许您的私人界面也是如此……）。
*   定义一个精确和统一的误差模型。
*   你永远不会有足够的错误检测。
*   设定非常高的标准——构建它们以作为参考实现重用。
*   尽早确定库的粒度。这些应该非常小且集中。
*   考虑为您的后端/核心库使用 C 或 C++ 实现（这些东西可以被剥离）。
*   请为您的库的 objc 类和类别建立并指定任何前缀。也使用好的前缀。
*   最小化可见的依赖关系（例如，不要`#import`大量可能隐藏的框架）。
*   确保它在客户端不需要添加额外`#import`的 s 的情况下编译。
*   不要依赖客户把东西放在特定的地方，否则资源会有特定的名称。
*   对于内存消耗和执行成本要非常保守。
*   没有泄漏。
*   没有僵尸。
*   主线程上没有缓慢的阻塞操作。
*   在经过良好测试并且已经稳定一段时间之前，不要发布任何东西。错误会破坏客户的代码，如果它不断破坏他们的程序，他们就不太可能重用您的库。
*   学习、使用和学习*优秀的*图书馆。
*   请某人（最好是比您更有经验的人）来检查您的代码。
*   在项目中适当的地方使用/使用库。
*   在添加功能之前修复错误。

不要让这吓到你——它真的很有趣，你可以在这个过程中学到很多东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T06:19:22.943

您可以通过多种方式重用代码：

*   将代码存储在一个公共目录中，并将该目录包含在您的项目中。简单，但可能存在版本控制问题。
*   创建一个单独的项目，该项目构建一个静态 iOS 库，然后创建一个框架。设置更复杂，因为它涉及构建框架目录结构的脚本。但易于在其他项目中使用，并且可以处理版本控制和设备/模拟器组合库。
*   创建一个单独的项目，该项目构建一个静态 iOS 库，然后将其作为子项目包含在其他项目中。避免构建框架，结果可以更加优化。

这是基本的 3，当然有很多关于这些的变化以及你如何处理它们。你决定做的很多事情都取决于你要为谁做这件事。例如，我喜欢我自己的代码的子项目，但对于我想为其他人提供的代码，我认为框架更好。即使他们有更多的工作要做。另外，我可以用 api 文档的文档集将它们包装起来，并将整个文件作为 DMG 上传到 github 供其他人下载。

# c# - 关于工具箱

> ID：12345284
> 
> 赞同：1
> 
> 时间：2012-09-10T04:16:40.897
> 
> 标签：c#

我正在使用 Visual Studio 2008。工具箱中的某些类别被禁用我不知道为什么。例如，标准类别。我需要使用下拉列表控件，但所有工具都是灰色的。还有一件奇怪的事情，它适用于 Web 表单应用程序，但不适用于窗口表单应用程序。

我重新安装了VS2008但徒劳无功。我已经尝试过的所有内容：

1.  我在工具菜单下的导入和导出设置中重置了所有设置
2.  开发环境/重置设置
3.  开发环境/安全模式
4.  devenv /ResetSkipPkgs

所有这些都是徒劳的。我找不到出去的路。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:45:08.600

控件及其应用时间之间存在差异。我建议您了解一些有关 Visual Studio 的基础知识并了解其中的区别。

[这是一篇关于C# 控件](http://www.codeproject.com/Articles/1465/Beginning-C-Chapter-13-Using-Windows-Form-Controls)的精彩文章

对于作为 Web 控件的 FileUpload 控件；您需要在 Windows.Form 中使用 OpenFileDialog。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T05:26:07.497

我不能将此作为评论发布，因此我将其发布为答案。对于 web 表单中的浏览按钮，您有一个`Open File Dialog`控件，您必须将其拖放到您的表单中，并且必须将其分配给一个简单的按钮。

以下是如何将打开文件对话框分配给按钮：

```
 private void btnBrowes_Click(object sender, EventArgs e)
        {
            openFileDialog.InitialDirectory = "C:\\";
            openFileDialog.FilterIndex = 1;
            openFileDialog.Title = "Open File";
        } 
```

在这里阅读更多：

[**打开文件对话框**](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.aspx)
[**C# 浏览文件**](http://www.dotnetperls.com/openfiledialog)

# jquery - Apprise 警报闪烁并消失

> ID：12345285
> 
> 赞同：0
> 
> 时间：2012-09-10T04:16:42.203
> 
> 标签：jquery

我一直在尝试让“Apprise”警报[插件](http://thrivingkings.com/read/Apprise-The-attractive-alert-alternative-for-jQuery)在我的网站上运行。我有所有必要的文件，所以这不是问题。

发生的情况是，当我单击“提交”按钮时，我可以在屏幕上看到警报片刻，然后它就消失了。
当我使用常规`alert()`时，而不是`apprise()`，警报保持在那里并且没有问题。

每当我使用该标签时，这似乎都是一个问题`<a>`，因为我可以使用“li”标签`apprise()`并且它工作得很好。你知道为什么它会闪烁然后马上消失吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:09:49.620

这有点晚了，但我刚刚遇到了完全相同的问题并且能够像这样解决它：

```
apprise('test', null, function(){
    e.preventDefault();
}); 
```

所以现在执行将等到单击通知“确定”按钮，然后 preventDefault() 取消按钮的默认行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T04:26:25.880

> *“每当我使用“a”标签时似乎都会出现问题，因为我可以将“li”标签与“apprise()”一起使用，并且效果很好。你知道为什么它会闪烁然后马上消失吗？ "*

锚标记的默认行为可能是让您搞砸的原因 - 通常当您单击锚时，会发生某种导航，无论是在当前页面内还是到另一个页面。您可以从单击事件处理程序中取消默认的锚点单击行为。

您没有显示任何 html 或 JS 代码，所以我只能猜测您的代码结构，但假设您在标签`.apprise()`的点击处理程序中使用，请`<a>`尝试取消默认行为：

```
$("a").click(function(e) {
   // your code here
   // something.apprise(); etc

   e.preventDefault();
}); 
```

# c# - 如何启用 .Net web-API 来接受 g 压缩的帖子

> ID：12345292
> 
> 赞同：15
> 
> 时间：2012-09-10T04:18:32.500
> 
> 标签：c#, asp.net-web-api

我有一个相当标准的 .net MVC 4 Web API 应用程序。

```
 public class LogsController : ApiController
{

    public HttpResponseMessage PostLog(List<LogDto> logs)
    {
        if (logs != null && logs.Any())
        {
            var goodLogs = new List<Log>();
            var badLogs = new List<LogBad>();

            foreach (var logDto in logs)
            {
                if (logDto.IsValid())
                {
                    goodLogs.Add(logDto.ToLog());
                }
                else
                {
                    badLogs.Add(logDto.ToLogBad());
                }
            }

            if (goodLogs.Any())
            {
                _logsRepo.Save(goodLogs);
            }

            if(badLogs.Any())
            {
                _logsBadRepo.Save(badLogs);
            }

        }
        return new HttpResponseMessage(HttpStatusCode.OK);
    }
} 
```

这一切都很好，我有能够向我发送他们的日志的设备，而且效果很好。但是现在我们开始担心正在传输的数据的大小，我们想看看接受使用 GZIP 压缩的帖子？

我该怎么做呢？它是在 IIS 中设置还是我可以使用操作过滤器？

**编辑 1**

继菲利普的回答之后，我的想法是我需要在请求到达我的控制器之前拦截它的处理。如果我可以在 Web api 框架尝试将请求的主体解析为我的业务对象之前捕获请求，这会失败，因为请求的主体仍然被压缩。然后我可以解压缩请求的主体，然后将请求传递回处理链，希望 Web Api 框架能够将（解压缩的）主体解析为我的业务对象。

看起来使用 DelagatingHandler 是要走的路。它允许我在处理过程中访问请求，但在我的控制器之前。所以我尝试了以下？

```
 public class gZipHandler : DelegatingHandler
{

    protected override System.Threading.Tasks.Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, System.Threading.CancellationToken cancellationToken)
    {
        string encodingType = request.Headers.AcceptEncoding.First().Value;

        request.Content = new DeCompressedContent(request.Content, encodingType);

        return base.SendAsync(request, cancellationToken);
    }
}

public class DeCompressedContent : HttpContent
{
    private HttpContent originalContent;
    private string encodingType;

    public DeCompressedContent(HttpContent content, string encodType)
    {
        originalContent = content;
        encodingType = encodType;
    }

    protected override bool TryComputeLength(out long length)
    {
        length = -1;

        return false;
    }

    protected override Task<Stream> CreateContentReadStreamAsync()
    {
        return base.CreateContentReadStreamAsync();
    }

    protected override Task SerializeToStreamAsync(Stream stream, TransportContext context)
    {
        Stream compressedStream = null;

        if (encodingType == "gzip")
        {
            compressedStream = new GZipStream(stream, CompressionMode.Decompress, leaveOpen: true);
        }

        return originalContent.CopyToAsync(compressedStream).ContinueWith(tsk =>
        {
            if (compressedStream != null)
            {
                compressedStream.Dispose();
            }
        });
    }

} 
```

}

这似乎工作正常。SendAsync 方法在我的控制器之前被调用，并且 DecompressedContent 的构造函数被调用。但是 SerializeToStreamAsync 从未被调用，所以我添加了 CreateContentReadStreamAsync 以查看是否应该在此处进行解压缩，但这也没有被调用。

我觉得我已经接近解决方案了，但只需要一点点额外的东西就可以了。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-20T21:59:33.453

我对 POST gzipped 数据到 .NET web api 控制器有同样的要求。我想出了这个解决方案：

```
public class GZipToJsonHandler : DelegatingHandler
{
    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request,
                                                           CancellationToken cancellationToken)
    {
        // Handle only if content type is 'application/gzip'
        if (request.Content.Headers.ContentType == null ||
            request.Content.Headers.ContentType.MediaType != "application/gzip")
        {
            return base.SendAsync(request, cancellationToken);
        }

        // Read in the input stream, then decompress in to the outputstream.
        // Doing this asynronously, but not really required at this point
        // since we end up waiting on it right after this.
        Stream outputStream = new MemoryStream();
        Task task = request.Content.ReadAsStreamAsync().ContinueWith(t =>
            {
                Stream inputStream = t.Result;
                var gzipStream = new GZipStream(inputStream, CompressionMode.Decompress);

                gzipStream.CopyTo(outputStream);
                gzipStream.Dispose();

                outputStream.Seek(0, SeekOrigin.Begin);
            });

        // Wait for inputstream and decompression to complete. Would be nice
        // to not block here and work async when ready instead, but I couldn't 
        // figure out how to do it in context of a DelegatingHandler.
        task.Wait();

        // This next section is the key...

        // Save the original content
        HttpContent origContent = request.Content;

        // Replace request content with the newly decompressed stream
        request.Content = new StreamContent(outputStream);

        // Copy all headers from original content in to new one
        foreach (var header in origContent.Headers)
        {
            request.Content.Headers.Add(header.Key, header.Value);
        }

        // Replace the original content-type with content type
        // of decompressed data. In our case, we can assume application/json. A
        // more generic and reuseable handler would need some other 
        // way to differentiate the decompressed content type.
        request.Content.Headers.Remove("Content-Type");
        request.Content.Headers.Add("Content-Type", "application/json");

        return base.SendAsync(request, cancellationToken);
    }
} 
```

使用这种方法，通常使用 JSON 内容和自动模型绑定的现有控制器继续工作而无需任何更改。

我不确定为什么其他答案被接受。它提供了一种处理响应的解决方案（这是常见的），但不是请求（这是不常见的）。Accept-Encoding 标头用于指定可接受的响应编码，与请求编码无关。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-05-23T15:58:03.303

我相信正确的答案是 Kaliatech 的，如果我有足够的声望点，我会留下这个作为评论并投票给他，因为我认为他基本上是正确的。

但是，我的情况需要查看编码类型类型而不是内容类型。使用这种方法，调用系统仍然可以在内容类型中指定内容类型为 json/xml/etc，但指定使用 gzip 或可能的其他编码/压缩机制对数据进行编码。这使我无需在解码输入后更改内容类型，并允许任何内容类型信息以其原始状态流过。

这是代码。同样，这 99% 是 Kaliatech 的回答，包括评论，所以如果这有用，请投票给他的帖子。

```
public class CompressedRequestHandler : DelegatingHandler
{
    protected override System.Threading.Tasks.Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, System.Threading.CancellationToken cancellationToken)
    {
        if (IsRequetCompressed(request))
        {
            request.Content = DecompressRequestContent(request);
        }

        return base.SendAsync(request, cancellationToken);
    }

    private bool IsRequetCompressed(HttpRequestMessage request)
    {
        if (request.Content.Headers.ContentEncoding != null &&
            request.Content.Headers.ContentEncoding.Contains("gzip"))
        {
            return true;
        }

        return false;
    }

    private HttpContent DecompressRequestContent(HttpRequestMessage request)
    {
        // Read in the input stream, then decompress in to the outputstream.
        // Doing this asynronously, but not really required at this point
        // since we end up waiting on it right after this.
        Stream outputStream = new MemoryStream();
        Task task = request.Content.ReadAsStreamAsync().ContinueWith(t =>
            {
                Stream inputStream = t.Result;
                var gzipStream = new GZipStream(inputStream, CompressionMode.Decompress);

                gzipStream.CopyTo(outputStream);
                gzipStream.Dispose();

                outputStream.Seek(0, SeekOrigin.Begin);
            });

        // Wait for inputstream and decompression to complete. Would be nice
        // to not block here and work async when ready instead, but I couldn't 
        // figure out how to do it in context of a DelegatingHandler.
        task.Wait();

        // Save the original content
        HttpContent origContent = request.Content;

        // Replace request content with the newly decompressed stream
        HttpContent newContent = new StreamContent(outputStream);

        // Copy all headers from original content in to new one
        foreach (var header in origContent.Headers)
        {
            newContent.Headers.Add(header.Key, header.Value);
        }

        return newContent;
    } 
```

然后我在全球范围内注册了这个处理程序，如果你容易受到 DoS 攻击，这可能是一个冒险的提议，但是我们的服务被锁定了，所以它对我们有用

```
GlobalConfiguration.Configuration.MessageHandlers.Add(new CompressedRequestHandler()); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-10T21:38:26.723

虽然 Web API 不支持`Accept-Encoding`开箱即用的标头，但 Kiran 有一篇关于如何做到这一点的精彩博客文章 - [http://blogs.msdn.com/b/kiranchalla/archive/2012/09/04/handling- compression-accept-encoding-sample.aspx](http://blogs.msdn.com/b/kiranchalla/archive/2012/09/04/handling-compression-accept-encoding-sample.aspx) - 使用自定义 MessageHandler

如果您实施他的解决方案，您需要做的就是发出带有`Accept-Encoding: gzip`或`Accept-Encoding: deflate`标头的请求，Web API 响应将在消息处理程序中为您压缩。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-08T16:09:02.643

试试这个

```
 public class DeCompressedContent : HttpContent
{
    private HttpContent originalContent;
    private string encodingType;

    /// <summary>
    /// 
    /// </summary>
    /// <param name="content"></param>
    /// <param name="encodingType"></param>
    public DeCompressedContent(HttpContent content, string encodingType)
    {

        if (content == null) throw new ArgumentNullException("content");
        if (string.IsNullOrWhiteSpace(encodingType)) throw new ArgumentNullException("encodingType");

        this.originalContent = content;
        this.encodingType = encodingType.ToLowerInvariant();

        if (!this.encodingType.Equals("gzip", StringComparison.CurrentCultureIgnoreCase) && !this.encodingType.Equals("deflate", StringComparison.CurrentCultureIgnoreCase))
        {
            throw new InvalidOperationException(string.Format("Encoding {0} is not supported. Only supports gzip or deflate encoding", this.encodingType));
        }

        foreach (KeyValuePair<string, IEnumerable<string>> header in originalContent.Headers)
        {
            this.Headers.TryAddWithoutValidation(header.Key, header.Value);
        }

        this.Headers.ContentEncoding.Add(this.encodingType);
    }

    /// <summary>
    /// 
    /// </summary>
    /// <param name="stream"></param>
    /// <param name="context"></param>
    /// <returns></returns>
    protected override Task SerializeToStreamAsync(Stream stream, TransportContext context)
    {
        var output = new MemoryStream();

        return this.originalContent
            .CopyToAsync(output).ContinueWith(task =>
            {
                // go to start
                output.Seek(0, SeekOrigin.Begin);

                if (this.encodingType.Equals("gzip", StringComparison.CurrentCultureIgnoreCase))
                {
                    using (var dec = new GZipStream(output, CompressionMode.Decompress))
                    {
                        dec.CopyTo(stream);
                    }
                }
                else
                {
                    using (var def = new DeflateStream(output, CompressionMode.Decompress))
                    {
                        def.CopyTo(stream);
                    }
                }

                if (output != null)
                    output.Dispose();
            });

    }

    /// <summary>
    /// 
    /// </summary>
    /// <param name="length"></param>
    /// <returns></returns>
    protected override bool TryComputeLength(out long length)
    {
        length = -1;

        return (false);
    }
} 
```

# php - PHP $_FILES 计数不正确

> ID：12345298
> 
> 赞同：2
> 
> 时间：2012-09-10T04:20:10.233
> 
> 标签：php, file, uploading

我有一个文件输入，可以选择多个文件，如下所示：

```
<input type = 'file' name = 'file[]' id = 'file' class = 'file' multiple = 'multiple' /> 
```

当用户选择一个文件（或多个文件）时，我使用 Javascript 将 id 和类更新为“oldFile”，然后添加另一个文件输入，但使用 file2[] 而不是 file[]。只要用户继续选择文件，就会发生这种情况。然后，当用户提交表单时，文件会发送到我的 PHP 脚本。我尝试了两种计算文件的方法，如下所示。

第一个是简单的

```
$files = count($_FILES); 
```

第二个是

```
$f = 0;
foreach($_FILES as $b)
{
    $f++;
}
$files = $f; 
```

但是，当我按特定顺序选择文件时，它返回的计数不正确。

如果我选择两个文件，然后是一个文件，然后是两个文件并提交表单，它说我提交了 4 个文件。

如果我选择两个文件然后选择一个文件，它会正确显示 3 个文件。

知道问题可能是什么（不确定我是否有意义）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T04:23:49.103

当您使用基于数组的文件上传名称时，PHP 的 $_FILES 有点不稳定。在这种情况下，创建的结构实际上是

```
$_FILES = array(
   'name' => array(
      0 => 'name of first file'
      1= > 'name of second file'
      etc...
   'type' => array(
      0 => 'type of first file',
      1 => 'type of second file'
   etc..
); 
```

这意味着您将获得与上传中跟踪的字段数相匹配的常量计数（$_FILES）。要准确计算上传了多少文件，您需要计算其中一个子键，例如。

```
count($_FILES['name']); 
```

不要问我为什么会这样。PHP 的设计已经够愚蠢了，这只是证明其根本愚蠢的众多例子之一。

一个更明智/理智的设计师会使用

```
$_FILES = array(
   0 => array(... all data about file #1),
   1 => array('... all data about file #2),
   etc...
) 
```

# php - 没有类型所有结构的两个表之间复制值的解决方案

> ID：12345299
> 
> 赞同：0
> 
> 时间：2012-09-10T04:20:17.677
> 
> 标签：php, mysql

我用这个代码

```
update 
contracts a, 
contracts_history b 
set 
a.name_surname=b.name_surname 
```

我的表有 64 列，我正在寻找一种解决方案来复制所有数据而不必指定列名 - 沿着这些线：

```
 $sql = "INSERT INTO `contracts_history` 
         SELECT * FROM `contracts` WHERE id='$contract_id'"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:33:41.927

`insert into select...`只要您的表与匹配数据类型的字段数量完全相同，您就可以使用该语法 - 否则您将*不得不*使用列名来指定要复制的内容。

我只是运行以下示例，向您展示语法：

```
mysql> use test
Database changed
mysql> show tables;
Empty set (0.00 sec)

mysql> create table test1 (id int(2), varry varchar(3));
Query OK, 0 rows affected (0.08 sec)

mysql> create table test2 (id int(2), barry varchar(3));
Query OK, 0 rows affected (0.05 sec)

mysql> insert into test2 values(1,'aaa');
Query OK, 1 row affected (0.00 sec)

mysql> select * from test1;
Empty set (0.00 sec)

mysql> insert into test1 (select * from test2);
Query OK, 1 row affected (0.06 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql> select * from test1;
+------+-------+
| id   | varry |
+------+-------+
|    1 | aaa   |
+------+-------+
1 row in set (0.00 sec)

mysql> alter table test2 add column third int(1);
Query OK, 1 row affected (0.06 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql> update test2 set barry='ccc';
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> insert into test1 (select * from test2);
ERROR 1136 (21S01): Column count doesn't match value count at row 1
mysql> 
```

# xaml - 如何通过 TextBlock 找到 silverlight TreeViewItem？

> ID：12345301
> 
> 赞同：0
> 
> 时间：2012-09-10T04:20:46.437
> 
> 标签：xaml, silverlight-4.0, treeview

我试图在鼠标右键单击时选择 TreeViewItem。有我的 XAML：

```
<TreeView x:Name="treeView" ItemsSource ="{Binding DisplayedDocuments}"  
                    SelectedItemChanged="TreeView_SelectedItemChanged" IsEnabled="True"   
                    MouseRightButtonDown="treeView_MouseRightButtonDown">
        <sdk:TreeView.ItemTemplate>
        <sdk:HierarchicalDataTemplate ItemsSource="{Binding Path=DisplayedSubItems}">
             <StackPanel Orientation="Horizontal">
                <Image Source="{Binding Converter={StaticResource docImageConverter}}"/>
                <TextBlock Width="5"></TextBlock>
                <TextBlock Text="{Binding Caption}" 
                           MouseRightButtonDown="TextBlock_MouseRightButtonDown"/> 
             </StackPanel>  
        </sdk:HierarchicalDataTemplate>
        </sdk:TreeView.ItemTemplate>
</TreeView> 
```

当我单击 treeViewItem 时，有时会`TextBlock.MouseRightButtonDown`引发而不是`treeView.MouseRightButtonDown`. 所以，我想通过 TextBlock_MouseRightButtonDown 中的 TextBlock 获取 treeViewItem。我试图以这种方式得到它：

```
 TextBlock docCaption = e.OriginalSource as TextBlock;
    StackPanel stackPanel = docCaption.Parent as StackPanel; 
```

但 stackPanel.Parent 为空。

我试图按名称查找控件：

```
 TreeViewItem treeViewItem = (TreeViewItem)treeView.FindName(docCaption.Text); 
```

但它返回null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:14:13.120

使用 VisualTreeHelper 获取父级：http: [//blogs.msdn.com/b/kmahone/archive/2009/03/29/visualtreehelper.aspx](http://blogs.msdn.com/b/kmahone/archive/2009/03/29/visualtreehelper.aspx) http://miguelmadero.blogspot.com.au/2008/07/use -visualtreehelper-to-navigate.html

# java - 从 JAVA 中读取 XML 文件时的引号问题

> ID：12345302
> 
> 赞同：1
> 
> 时间：2012-09-10T04:21:01.797
> 
> 标签：java, xml-parsing, sax

我正在尝试从 XML 中读取数据并将数据存储在文本文件中。我的代码在读取和存储数据方面效果很好，除非 XML 文件中的段落包含双引号。

例如：

```
 <Agent> "The famous spy" James Bond </Agent> 
```

输出将忽略任何带引号的数据，结果将是：詹姆斯邦德

我正在使用 SAX，这是我的部分代码可能存在问题：

```
 public void characters(char[] ch, int start, int length) throws SAXException 
  { 
        tempVal = new String(ch, start, length); 
  } 
```

我想我应该在将字符串存储在我的 tempVal 之前替换引号。

有任何想法吗？？？

**这是完整的代码以防万一：**

> 公共类蕴涵{
> 
> ```
>  private String Text;
> 
>   private String Hypothesis;
> 
>   private String ID;
> 
>   private String Entailment; 
> ```
> 
> }

```
//Event Handlers
public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
    //reset
    tempVal = "";
    if(qName.equalsIgnoreCase("pair")) {
        //create a new instance of Entailment
        tempEntailment = new Entailment();
        tempEntailment.setID(attributes.getValue("id"));
        tempEntailment.setEntailment(attributes.getValue("entailment"));
    }
}

public void characters(char[] ch, int start, int length) throws SAXException {
    tempVal = new String(ch, start, length);
}

public void endElement(String uri, String localName, String qName) throws SAXException {
    if(qName.equalsIgnoreCase("pair")) {
        //add it to the list
        Entailments.add(tempEntailment);
    }else if (qName.equalsIgnoreCase("t")) {
        tempEntailment.setText(tempVal);
    }else if (qName.equalsIgnoreCase("h")) {
        tempEntailment.setHypothesis(tempVal);
    }
}

public static void main(String[] args){
    XMLtoTXT spe = new XMLtoTXT();
    spe.runExample();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:25:20.973

您的`characters()`方法被多次调用，因为解析器将输入视为几个相邻的文本节点。您的代码编写方式（您没有显示）您可能只保留最后一个文本节点。

需要自己积累相邻文本节点的内容。

```
StringBuilder tempVal = null;

public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
    //reset
    tempVal = new StringBuilder();
    ....
}

public void characters(char[] ch, int start, int length) throws SAXException {
    tempVal.append(ch, start, length);
}

public void endElement(String uri, String localName, String qName) throws SAXException {
    String textValue = tempVal.toString();
    ....
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:23:14.100

有趣的是，我模拟了你的情况，我的 SAX 解析器工作正常。我正在使用 jdk 1.6.0_20，这就是我创建解析器的方式：

```
 // Obtain a new instance of a SAXParserFactory.
  SAXParserFactory factory = SAXParserFactory.newInstance();
  // Specifies that the parser produced by this code will provide support for XML namespaces.
  factory.setNamespaceAware(true);
  // Specifies that the parser produced by this code will validate documents as they are parsed.
  factory.setValidating(true);
  // Creates a new instance of a SAXParser using the currently configured factory parameters.
  saxParser = factory.newSAXParser(); 
```

我的 XML 标头是：

```
<?xml version="1.0" encoding="iso-8859-1"?> 
```

那你呢？

# python - 使特定方法/api/url 的cherrypy 访问日志静音

> ID：12345304
> 
> 赞同：4
> 
> 时间：2012-09-10T04:21:09.503
> 
> 标签：python, cherrypy

问题很简单，我们希望 CherryPy 不记录被调用的特定公开方法/API 的访问日志。

基本上，当调用此 API 时，URL 的查询字符串中有一些非常敏感的参数，如果泄露，将暴露潜在的安全性。自然这是一个 /GET 请求，不幸的是，这是传递参数的唯一方式，因为它是从外部服务到该 Web 服务器的重定向（302）。

如果它不记录 URL，那也可以达到目的。

那么，有没有一种方法可以通过 API、URL 等过滤访问日志中的日志消息？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T05:25:59.503

cherrypy`logging`默认使用 Python 的标准模块，因此您只需添加自定义过滤器即可。`/foo`此示例将忽略任何带有路径前缀的GET 请求：

```
import logging

class IgnoreURLFilter(logging.Filter):
    # simple example of log message filtering

    def __init__(self, ignore):
        self.ignore = 'GET /' + ignore

    def filter(self, record):
        return self.ignore not in record.getMessage()

app = cherrypy.tree.mount( YourApplication() )
app.log.access_log.addFilter( IgnoreURLFilter('foo') )
cherrypy.engine.start() 
```

# bash - Bash：是否可以在执行前更改命令

> ID：12345319
> 
> 赞同：0
> 
> 时间：2012-09-10T04:23:26.833
> 
> 标签：bash, terminal, command-line-arguments, bsd, getopt

我想更改命令，以便将命令行标志（选项）放在命令行参数之前，这是由 GNU getopt 自动完成的。

Mac 使用 BSD getopt，因此缺少该功能。我想调整 bash，以便在执行一个命令时，我运行一个脚本来解析标志和参数，重新排序它们并执行重新排序的命令。

这样一来，双方

```
ls -lh /tmp
ls /tmp -lh 
```

将在我的 Mac 终端上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:24:34.977

除非您知道每个命令`optstring`的函数参数是什么样的，否则您无法安全地编写通用工具来完成在命令行上重新排序参数的工作。`getopt()`考虑：

```
make something -f makefile
cp   something -f makefile 
```

在第一个命令中，您必须将`-f`和都移到`makefile`前面以规范化命令调用。在第二种情况下，您只能移动`-f`; 如果您也移动以下文件名，您将重写命令并破坏您的数据。

当然，如果命令也采用长格式或样式参数，您还必须知道`getopt_long()`参数字符串的外观。`--force``--file=makefile`

坦率地说，您最好在 Linux 上的环境中使用 POSIXLY_CORRECT，忘记它提供的隐蔽灵活性，并始终学会在您的论点之前编写您的选项。如果你这样做，你的代码将在所有类 Unix 机器上运行得更好。

* * *

您可以将 GNU 软件安装在除`/bin`and之外的某个目录中`/usr/bin`（例如`/usr/gnu/bin`，然后确保`/usr/gnu/bin`将 PATH 放在系统目录之前。也有类似的预构建系统[`fink`](http://www.finkproject.org/)。但是，这对 Apple 提供的工具没有帮助没有来自 GNU 的类似物。还有一个“危险”，即您编写的 shell 脚本将无法移植到其他没有与您相同的设置的 Mac 上。

# php - 收到新查询时运行音频文件 PHP MySQL

> ID：12345320
> 
> 赞同：0
> 
> 时间：2012-09-10T04:23:42.277
> 
> 标签：php, mysql

我们有一个网站，我们可以在该网站上接收有关我们在线销售的产品的查询。

当收到支持员工的新询问时，我想运行一个音频文件，提醒该人有新的询问已分配给他们。

管理模块在 PHP 和 MySQL 中工作。

查询表列如下

```
  查询ID | 编码名称 | 电邮 | Created_On | 出席_状态 

```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:40:57.923

我会创建一个定期运行的 AJAX 脚本（比如说每分钟）

*   检查数据库的状态：表示同时是否有新订单到来
*   像 nageeb 建议的那样播放音频文件。

这假设员工有一个始终打开的页面。

如果您向我们提供更多信息，我可以更新此信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:43:07.140

这是一个快速的解决方案，并且对应用程序的结构不太了解，这可能会或可能不会起作用......

*   我假设可能有某种页面列出了您网站上现有的查询，代表只是保持打开状态......如果是这样，请将其设置为每 5m 左右刷新一次。
*   在生成查询列表的 for() 循环中，确保您有一列将查询标识为“新”（可能是 Attended_Status 字段？）。
*   在 for() 循环中放置一个 if() 语句并检查是否有任何定义新查询的内容，如果它解析为 true，则回显如下内容：`<object height="1" width="1" data="some_alert.mp3"></object>`它应该基于任何默认值生成一个 1x1（基本上不可见）mp3 播放器音频播放器安装在用户的计算机上。

这是我能想到的最快/最简单的方法，正如我上面所说，对您的应用了解不多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T04:28:31.737

另一种解决方案是使用 php 电子邮件功能，因此当您将行插入数据库时​​，查找代表电子邮件并向他发送电子邮件以通知他。（电子邮件程序可以播放音频剪辑）。

# objective-c - 将 Facebook 社交插件与 FB iOS SDK 连接起来

> ID：12345324
> 
> 赞同：0
> 
> 时间：2012-09-10T04:24:45.180
> 
> 标签：objective-c, ios, xcode, facebook

在我们的一个应用程序中，我们的用户已经使用 登录`iOS FB SDK`，并且在一个页面中正在显示`comment box social plugin`以呈现评论，但似乎它无法使用现有的记录会话。

是否需要任何步骤以便用户不需要双重登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:37:42.703

评论框社交插件不是为 iOS 设计的。但是我们可以通过限制用户仅使用 WebView 弹出窗口登录 FB 来使其工作。**为此，请在- (void)authorize:(NSArray *)permissions;**中为 authorizeWithFBAppAuth 和 safariAuth 设置 NO Facebook.m的方法

```
- (void)authorize:(NSArray *)permissions {
self.permissions = permissions;

[self authorizeWithFBAppAuth:NO safariAuth:NO];
} 
```

这会将所有 facebook 凭据存储在 sharedHTTPCookieStorage 中。现在，当您使用 webview 加载评论框社交插件时，它将识别现有会话。

# ruby - 在 Ruby 中为可选关联处理“nil:NilClass 的未定义方法‘每个’”的优雅方式？

> ID：12345326
> 
> 赞同：3
> 
> 时间：2012-09-10T04:24:57.333
> 
> 标签：ruby, associations, try-catch, optional

我有一个场景，我有可选的关联。有时关联存在，有时则不存在。

当我尝试在屏幕上显示数据时遇到问题（想想一个简单的索引操作）。

考虑以下应用程序设置：

*   项目有许多可交付成果
*   项目有许多部署记录（此模型的两个属性是“名称”和“描述”）

我有兴趣从可交付成果索引操作中提取部署记录关联。

我让它与以下代码一起工作，但我觉得它有点难看：

```
@array = deliverable.try(:project).try(:deployment_record)
if @array
   @array.each do |r|
   [r.name, r.description].join(' - ')
end 
```

重写这个更优雅的方式是什么？我试过

```
deliverable.try(:project).try(:deployment_record).each do |r|
   [r.name, r.description].join(' - ')
end 
```

但我一直遇到 nil:NilClass错误的**未定义方法“每个” 。**我似乎无法找到一种方法来优雅地绕过在 Nil 对象上调用的 .each 。我有一种感觉，不知怎的，我应该能够更优雅地做到这一点，但我不能把手指放在上面。

我在代码库中多次重复使用这个片段，所以如果我只是将它复制并粘贴到任何地方，那额外的两行真的会害死我。我很高兴关联检索失败，我只想优雅地失败，没有任何错误或消息。有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-18T17:53:20.537

您可以使用该`to_a`方法来确保您有一个可以使用的数组（`nil`将产生一个空数组）：

```
@array.to_a.each do |item|
    #Whatever...
end 
```

`to_a`这不是最优雅的事情——您必须记住`@array`将

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T05:19:48.613

在交付中，`has_many :deployment_records, through: :project`然后当您要求部署记录时，它们将作为空集合返回。

# mysql - 使用第二个表作为查找？

> ID：12345328
> 
> 赞同：2
> 
> 时间：2012-09-10T04:25:31.350
> 
> 标签：mysql, sql, join, sql-like

我有三张桌子，

帖子、标签、帖子_标签_链接

帖子有：id，内容

标签有：id、标签

Posts_Tags_Link 有：post_id、tag_id

基本上，如果标签链接到帖子，则在 Posts_Tags_Link 中创建一个条目，因为这是多对多关系。

无论如何，我想做一些搜索并从链接到特定关键字的帖子中返回所有行。

例如，如果我有

帖子：

```
id | content
 1 | some stuff
 2 | more stuff
 3 | stuff again 
```

标签：

```
id | tag
 1 | first
 2 | second
 3 | third
 4 | fourth 
```

Posts_Tags_Link

```
post_id | tag_id
      1 | 1
      1 | 2
      2 | 2
      3 | 3
      3 | 4 
```

我搜索`second`我想返回

```
id | content
 1 | some stuff
 2 | more stuff 
```

我假设我要为此使用连接，我是否只需将我的帖子表连接到链接表，在 post_id 上并将链接表连接到链接表到 tag_id 列上的标签表？

我相信这是对的，但是如果我只想匹配与搜索匹配的行（比如不是在哪里），我会使用 like 还是不同的连接之一起作用？

我希望如果我搜索`sec`它会得到与我搜索的结果相同的结果，`second`所以相信我必须使用 like 来执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T04:30:07.530

您应该加入这三个表，因为您想从中搜索，例如

```
SELECT  a.*
FROM    post a
            INNER JOIN Posts_Tags_Link b
                on a.id = b.post_id 
            INNER JOIN Tag c
                ON b.tag_tag_id = id
WHERE   a.content like '%keyword%' OR     -- build you conditions here
        c.tag like '%keyword%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T04:58:32.267

尝试使用以下查询。

```
SELECT p.id, p.content FROM
Posts_Tags_Link ptl 
    INNER JOIN Posts p ON p.id = ptl.post_id
    INNER JOIN Tags t ON t.id = ptl.tag_id
WHERE t.tag = 'second' 
```

# ios - 重新排序 ALA 资产

> ID：12345333
> 
> 赞同：1
> 
> 时间：2012-09-10T04:25:50.023
> 
> 标签：ios, alassetslibrary, alasset

有谁知道如何在资产库中重新排序资产？ALAsset 是否有类似 order 属性的东西，我可以使用它来更改资产的顺序？枚举资产时的默认顺序是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-13T17:08:59.710

约会是可能的。您需要使用以下方法为 ALAsset 创建一个类别

```
// in the .h
- (NSDate *) date;

// in the .m
- (NSDate *) date
{
    return [self valueForProperty:ALAssetPropertyDate];
} 
```

然后将所有资产添加到 NSMutableArray 并像这样对该数组进行排序：

```
NSSortDescriptor *sort = [NSSortDescriptor sortDescriptorWithKey:@"date" ascending:NO];
self.assets = [tmpAssets sortedArrayUsingDescriptors:@[sort]]; 
```

我在这里有一个教程，这将在第二部分（本周晚些时候发布）中详细讨论。

[iPhone 编程教程：创建像 Over 一样的图像库 - 第 1 部分](http://brandontreb.com/iphone-programming-tutorial-creating-an-image-gallery-like-over-part-1)

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:47:44.310

使用公共 API 是不可能的。如果您想在将来看到该功能，请在[http://bugreport.apple.com留下功能请求](http://bugreport.apple.com)

# php - 如何使用 jquery 将数据预填充到组合框？

> ID：12345334
> 
> 赞同：-1
> 
> 时间：2012-09-10T04:25:49.157
> 
> 标签：php, jquery, ajax

我这里有 3 个组合框，当单击查找按钮（使用 ajax）时，将在这些组合框中选择值。这里我们有一个 onclick 函数 lookupVIN()。点击此按钮时，car-year、car-model 和 car-make 组合框将选择一个特定的值，该值对应于在 car-vin 输入框中输入的值。

```
<input class="frmIn" size="30"  name="car-vin" id="car-vin" type="text" value="<?php echo $vr_vn; ?>" />
<input onclick="lookupVIN()" name="btnVin" type="button" value="Lookup" />
                      <br/>
                      <div id="vinDet" style="line-height: 20px; margin-bottom: 10px; margin-top: 10px;"></div></td>
          </tr>
                  <tr>
            <td>Year</td>
            <td>

        <select name="car-years" id="car-years">

          </select></td>
      </tr>
              <tr>
        <td>Make</td>
        <td><select name="car-makes" id="car-makes">

          </select></td>
      </tr>
              <tr>
        <td>Model</td>
        <td><select name="car-models" id="car-models">
          </select></td>
      </tr> 
```

我必须用存储在表（数据库）中的值预填充这些组合框。我怎样才能使用 jquery ajax 来做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:45:49.677

```
function lookupVIN() {
  var vin = $('input[name="btnVIN"]').val();
  $.post('{url/to/json/response/}', {'vin': vin}, function (data) {
    var year = data.year,
        make = data.make,
        model = data.model;
    $('#car-years').find('option[value="' + year + '"]').prop('selected', true);
    $('#car-make').find('option[value="' + make + '"]').prop('selected', true);
    $('#car-model').find('option[value="' + model + '"]').prop('selected', true);
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T04:40:59.973

我不确定您要问什么，但请看一下[http://www.electrictoolbox.com/jquery-add-option-select-jquery](http://www.electrictoolbox.com/jquery-add-option-select-jquery)上的示例“添加多个选项”，因为这似乎至少你在问什么。

# api - 是否可以通过 url 搜索 Twitter 用户？

> ID：12345336
> 
> 赞同：6
> 
> 时间：2012-09-10T04:26:02.377
> 
> 标签：api, search, twitter, seo

我正在开发一个应用程序，我想知道是否有任何方法可以通过给定 URL 搜索特定用户？

基本上我想做的是找出一个网站和 twitter 帐户之间的关系，比如给定域 foobar.com，代码将找出这个网站可能的 twitter 帐户，比如@iamowneroffoobar，其 url 值已设置为推特中的“http://foobar.com”。

通过检查 twitter API，[https://dev.twitter.com/docs/api/1.1/get/users/search](https://dev.twitter.com/docs/api/1.1/get/users/search)我找不到任何方法来做到这一点，但我已经看到这个功能已经被其他几个人实现了网站，有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:31:46.297

我没有直接或简单的答案，但您可以尝试使用 Google 或 Bing 的搜索 API 在 Twitter 页面中查找 URL。

[本文](http://www.twitterpowersystem.com/blog/how-to-find-people-on-twitter-using-google/)指出，您可以根据个人简介中使用的字词搜索 Twitter 用户 - *site:twitter.com intitle:”on twitter” “bio* * sport”*

*这将为您提供一长串在其 Twitter 简历中使用过“运动”一词的人。同样，只需更改搜索词以满足您自己的需要。*

看看您是否可以调整此搜索查询以以编程方式查找 Twitter 用户的简历中指定的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:30:02.167

您可以制作自己的网络爬虫，在 HTML 源页面中搜索 www.twitter.com/username 链接。例如，在 Web 上搜索在域名中的“foobar”下索引的热门网站，然后在这些页面中抓取包含用户名的 twitter 按钮的代码。我对如何在 Python 中做到这一点有一些想法。主要是我在 Udacity.com 上的 CS101 课程中学到的。

# ruby - Ruby Hash - 按值排序并打印键

> ID：12345342
> 
> 赞同：3
> 
> 时间：2012-09-10T04:27:26.373
> 
> 标签：ruby, arrays, sorting, hash

这是我的哈希。

```
=> {"f11"=>1, "f12"=>3, "f13"=>3, "f07"=>5, "f10"=>1} 
```

我想按从最大到最小的值进行排序，然后从键中创建一个数组。

```
=> ["f07", "f12", "f13", "f11", "f10"] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T04:39:25.470

这是给你的单线（我喜欢红宝石！）：

```
h.keys.sort {|a, b| h[b] <=> h[a]} 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T04:57:40.423

Hash 混合了 Enumerable 模块，为我们提供了 sort 和 sort_by 等方法。在这种情况下，我们可以使用 sort_by 来按值的顺序获取集合。

```
 h={"f11"=>1, "f12"=>3, "f13"=>3, "f07"=>5, "f10"=>1} 
 h.sort_by{ |key, value| -value }  
 => [["f07", 5], ["f12", 3], ["f13", 3], ["f11", 1], ["f10", 1]] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T04:58:57.163

更短！：

```
h.keys.sort_by{|a| h[a]}.reverse 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T04:38:59.597

```
a = {"f11"=>1, "f12"=>3, "f13"=>3, "f07"=>5, "f10"=>1}
b = Hash[a.sort_by{|k,v| v}]
puts b.keys.reverse 
```

# php - Roundcube 服务器错误被禁止

> ID：12345344
> 
> 赞同：0
> 
> 时间：2012-09-10T04:28:05.393
> 
> 标签：php, mysql, email, imap, roundcube

我在我的网络服务器上安装了圆形立方体邮件，位于 rackaspace 云站点上。它一直工作到今天早上才开始出现服务器 403 错误。

ajax 调用的结果是无效请求。

我所做的唯一更改是，我将服务器上的时区更改为悉尼/澳大利亚，默认设置为美国，因为服务器位于那里。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-10T13:05:09.453

我知道我正在挖掘死者，但它可以帮助一些人在未来遇到同样的问题。`php.ini`就我而言（Debien Wheezy），这是我文件上的错误设置（我不知道是哪个...） 。当我更新 PHP 并将我的配置文件替换为来自 Debian 的配置文件时，一切突然变得正常。

# msbuild - 在 MSBuild 步骤中使用 Jenkins 版本环境变量

> ID：12345356
> 
> 赞同：10
> 
> 时间：2012-09-10T04:30:28.280
> 
> 标签：msbuild, jenkins, jenkins-plugins

我目前正在使用 Jenkins“版本号插件”为构建版本设置环境变量。这在 jenkins 中运行良好，但我需要一种方法将其传递给 MSBuild，以便更新 exe 和 dll 的版本号。我尝试了下面的配置，但它没有更新构建版本

![版本号配置](../Images/028d46bd245d46795c78f23fa493e0ec.png)

![构建配置](../Images/0f36c1085dc140b0c64f223ff05ce1cd.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:59:07.027

**环境变量名称**应*不带*百分号 ('%')，如下所示：

```
VERSION 
```

除此之外，我认为你很高兴。

也可以考虑
`${BUILDS_ALL_TIME}`
换成
`${BUILDS_ALL_TIME, XX}`

（这将强制执行带有前导零的两位数的内部版本号）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T21:15:52.350

这是一个 MSBuild 目标，它将文件 GlobalAssemblyInfo.cs 中的修订号替换为来自 Jenkins 的 SVN_REVISION 变量。

我们有一个多项目解决方案，其中每个项目都引用相同的 GlobalAssemblyInfo 以获得公共信息（如版本）。修改它，使其适合您的设置。

通过存在条件，目标在未安装 MSBuildCommunityTasks 的开发人员计算机上执行。在这些情况下，GlobalAssemblyInfo.cs 中的版本号保持不变。

```
<Target Name="InjectSVNRevision" Condition="Exists('$(MSBuildExtensionsPath)\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets')">
<!-- When this build is done by the Jenkins CI server; the svn revision number is set in the environment variable SVN_REVISION
     This little snippet replaces the revision number in GlobalAssemblyInfo.cs with this svn revision number
  -->
<Message Text="Injecting SVN revision number in GlobalAssemblyInfo.cs" />
<FileUpdate Files="GlobalAssemblyInfo.cs"
    Multiline="true"
    Singleline="false"
    Regex="(AssemblyVersion|AssemblyFileVersionAttribute|AssemblyFileVersion)\(&quot;([0-9]+\.[0-9]+\.[0-9]+)(\.[0-9]+)?&quot;\)"
    ReplacementText="$1(&quot;$2.$(SVN_REVISION)&quot;)" 
    Condition="$(SVN_REVISION) != '' "/>
</Target> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-12T12:34:45.557

我发现最简单的方法是使用[Change Assembly Version](https://wiki.jenkins-ci.org/display/JENKINS/Change+Assembly+Version)。使用该插件，您只需提供版本号（或使用的环境变量），它将在您工作区的所有 AssemblyInfo.cs 文件中替换它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-29T01:26:20.063

一个非常快速的解决方法是在您的 msbuild 任务之前创建一个 powershell 任务。这是假设您如上所述定义了 VERSION 变量（没有 %%）。并且您在构建开始之前检查了删除工作区。

这是 powershell 任务的代码。

```
gci -rec -Filter *AssemblyInfo* | ForEach { (Get-Content $_.FullName) | ForEach-Object {$_ -replace "1.0.0.0",$env:VERSION } | Set-Content $_.FullName} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-08T13:59:02.650

这是我的摘要，使其工作所需的内容：

安装此插件：

```
https://plugins.jenkins.io/versionnumber/
https://plugins.jenkins.io/change-assembly-version-plugin/ 
```

确保您的 AssemblyInfo.cs 包含：

```
[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")] 
```

设置不带“$”的版本变量名。

定义一个不错的版本号，例如：'1.1.${BUILD_NUMBER}.${SVN_REVISION}'

[![在此处输入图像描述](../Images/35ec9c2fa8884a0d3d12f97d5a2b16d1.png)](https://i.stack.imgur.com/67YwE.png)

添加“更改程序集版本”-构建步骤。在“${...}”示例中输入您的变量：“${VERSION}” [![在此处输入图像描述](../Images/e983202ea9ae519da1bc6ba3c10fb973.png)](https://i.stack.imgur.com/koOAw.png)

如果您仍然遇到构建错误。检查您的项目文件和 AssemblyInfo.cs 是否存在合并冲突。

# .bash-profile - 将 find 放入 bash_profile 函数中

> ID：12345357
> 
> 赞同：0
> 
> 时间：2012-09-10T04:31:00.937
> 
> 标签：.bash-profile, bash

我想在我的 .bash_profile 中创建 bash 函数，它基本上做了一个`find ./ -name $1`非常简单的想法，但似乎不起作用。我的尝试没有以正确的方式打印东西，即：

```
find_alias() {
     `find ./ -name $1 -print`                                                                                                                                                                           
 }
 alias ff='find_alias $1' 
```

以上，如果我做类似的事情，`ff *.xml`我会得到以下一个班轮：

> bash：.pom.xml：权限被拒绝

之后如下：

```
find_alias() {
    echo -e `find ./ -name $1 -print`
}
alias ff='find_alias $1' 
```

确实找到了它们，但是将其输出放在一条长长的线上，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T04:37:57.617

```
find_alias() {
  find ./ -name $1 -print
} 
```

您不需要也不想要反引号。那将尝试执行`find`命令返回的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T05:13:39.617

反引号使 shell 将其中的输出视为应执行的命令。如果您尝试过`´echo "ls"´`，那么它将首先执行`echo "ls"`，获取文本输出，`ls`然后执行它列出所有文件。

在您的情况下，您正在执行的文本结果`find ./ -name *.xml -print`是匹配文件的列表。当然它没有意义，因为匹配的文件名（在大多数情况下）不是命令。

你得到的输出意味着两件事：

*   你试图从 pom.xml 执行脚本（就像你输入的那样 `./pom.xml`） - 没有意义
*   您没有该文件的执行权限

因此，正如@Mat 建议的那样，针对您的问题的简单解决方案是删除反引号并让输出`find`显示在您的终端中。

# dos - 使用 DOS 复制多个文件

> ID：12345360
> 
> 赞同：2
> 
> 时间：2012-09-10T04:31:09.747
> 
> 标签：dos

我有不同的文件夹，例如：a、b、c 等，每个文件夹都有不同的文件，例如：x、y、z 等。文件 x、y、z 位于每个文件夹中。有没有办法使用单个命令从不同文件夹复制每个文件？我希望结果是所有文件夹中的 x 文件都在一个文件夹中。

例如：xcopy/S x*.* C:\Folder

它可以从不同的文件夹中复制所有的 x 文件。如何使用单个命令从不同文件夹复制 x、y、z？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T04:53:49.160

您必须在批处理文件中或直接从 cmd 中使用“for”。

```
for %I in (file1.txt file2.txt file3.txt) do xcopy\s %I c:\somedir\ 
```

您可以为不同文件夹中的不同文件提供绝对/相对路径，而不是文件名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T23:51:53.467

没有办法在 DOS 中使用单个命令来执行此操作。你需要的是一个像下面这样的脚本。这可以在您尝试从中收集的树的根文件夹中执行，如下所示：

```
batch.bat x*.* 
```

它将递归地收集当前目录和所有子目录中与 x*.* 匹配的所有文件。它们将以这种格式保存：

```
folder1\x1.txt - > folder1x1.txt
folder2\x5.txt - > folder2x5.txt
folder3\x1.txt - > folder3x1.txt 
```

这是代码：

```
@echo off
FOR /F "delims=" %%I IN ('DIR .\%1 /B /AA /S') DO (CALL :COPYFILE %%I)
GOTO END

:COPYFILE
set "ofn=%~1"
set "fn=%~1"
call:MakeRelative fn
set fn=%fn:\=%
set fn=%fn::=%
copy %ofn% %fn%
goto:eof

:MakeRelative file base -- makes a file name relative to a base path
::                      -- file [in,out] - variable with file name to be converted, or file name itself for result in stdout
::                      -- base [in,opt] - base path, leave blank for current directory
:$created 20060101 :$changed 20080219 :$categories Path
:$source http://www.dostips.com
SETLOCAL ENABLEDELAYEDEXPANSION
set src=%~1
if defined %1 set src=!%~1!
set bas=%~2
if not defined bas set bas=%cd%
for /f "tokens=*" %%a in ("%src%") do set src=%%~fa
for /f "tokens=*" %%a in ("%bas%") do set bas=%%~fa
set mat=&rem variable to store matching part of the name
set upp=&rem variable to reference a parent
for /f "tokens=*" %%a in ('echo.%bas:\=^&echo.%') do (
    set sub=!sub!%%a\
    call set tmp=%%src:!sub!=%%
    if "!tmp!" NEQ "!src!" (set mat=!sub!)ELSE (set upp=!upp!..\)
)
set src=%upp%!src:%mat%=!
( ENDLOCAL & REM RETURN VALUES
    IF defined %1 (SET %~1=%src%) ELSE ECHO.%src%
)
EXIT /b

:END 
```

希望这可以帮助！

# django - 如何在模板中显示 BooleanField 名称？

> ID：12345362
> 
> 赞同：6
> 
> 时间：2012-09-10T04:31:53.053
> 
> 标签：django, django-models, django-templates

**楷模：**

```
completed = models.BooleanField(_('Completed')) 
```

**模板：**

```
{% if object.completed %}
    <strong>{{ object.completed }}</strong>
{% endif %} 
```

**输出：**

```
<strong>True</strong> 
```

**我需要的：**

```
<strong>Completed</strong> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T05:00:45.583

另外，请查看[`yesno`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#yesno)模板过滤器。用法：

```
<strong>{{ object.completed|yesno:"Completed,Uncomplited" }}</strong> 
```

或者：

```
<strong>{{ object.completed|yesno:"Completed," }}</strong> 
```

## 更新：

另一方面，您始终可以制作自己的模板过滤器。例如，下一个返回一个`verbose_name`指定字段：

**foo_tags.py：**

```
@register.filter()
def get_field_name(object, field):
    verbose_name = object._meta.get_field(field).verbose_name
    return verbose_name 
```

**模板.html：**

```
{% if object.completed %}
    <strong>{{ object|get_field_name:'completed' }}</strong>
{% endif %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T04:46:05.917

```
{% if object.completed %}<strong>Completed</strong>{% endif %} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T04:51:28.837

您可以尝试将标签属性添加到表单字段：

```
completed = forms.BooleanField(label=mark_safe('<strong>Completed</strong>')) 
```

当您使用时`{{ form.completed.label }}`，您将拥有`<label><strong>Completed</strong></label>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T04:47:39.653

我认为您无法使用对象实例来获得它。如果您`modelForm`在模板中有该模型，则可以使用`{{form.completed.label}}`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-13T05:11:07.083

我会简单地使用：

```
{% if object.completed %}
    <p><strong>Completed</stromg></p>
{% else %}
    <p><strong>Not Completed</strong></p>
{% endif %} 
```

# amazon-ec2 - as-create-or-update-trigger：找不到命令

> ID：12345363
> 
> 赞同：4
> 
> 时间：2012-09-10T04:32:09.360
> 
> 标签：amazon-ec2, amazon-web-services

我在这里下载 Auto Scaling 工具：

[http://aws.amazon.com/developertools/2535](http://aws.amazon.com/developertools/2535)

当我尝试创建触发器时，找不到该命令。我也导出了它的环境，但是没有找到命令。我试图找到那个 as-create-or-update-trigger 文件夹，但是没有这样的文件。这是怎么回事？

> root@ip:/root/tools# as-create-or-update-trigger Trigger1 --auto-scaling-group AutoScale --namespace "AWS/EC2" --measure CPUUtilization --statistic Average --dimensions "AutoScalingGroupName=AutoScale " --units "百分比" --period 60 --lower-threshold 30 --upper-threshold 70 --lower-breach-increment"=-1" --upper-breach-increment "1" --breach-duration 120 OK-创建/更新触发器
> 
> as-create-or-update-trigger：找不到命令

有没有人有同样的问题？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T08:30:10.960

我认为这已被弃用，取而代之的是“mon-put-metric-alarm”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:37:18.777

该命令现已弃用，取而代之的是 Auto Scaling 策略和 cloudwatch 警报。

这里有一些关于如何执行此操作的文档：http: [//docs.amazonwebservices.com/AutoScaling/latest/DeveloperGuide/US_SetUpASLBApp.html](http://docs.amazonwebservices.com/AutoScaling/latest/DeveloperGuide/US_SetUpASLBApp.html)

# ios - 无法在 Xcode 上编译 Neon 代码：“错误指令”

> ID：12345368
> 
> 赞同：1
> 
> 时间：2012-09-10T04:32:40.837
> 
> 标签：ios, xcode, arm, neon

我有一个代码库，在 Xcode 下，我调用的每条 NEON 指令都会出现错误“错误指令”。基本上似乎没有检测到NEON。

我正在尝试构建一个静态库，我去了新项目，选择了 Cocoa Touch 静态库，然后添加了我现有的文件。

我正在阅读的所有内容都表明应该已经启用了 NEON。我删除了对 armv6 的所有引用，并以 iOS 5.1 为目标

此外，所讨论的代码都包含在“.s”文件中定义的例程中——纯汇编。我没有使用内部方法调用。这是我尝试运行代码时遇到的错误：

```
unknown directive .fpu neon
Command /Applications/Xcode.app/Contents/Developer/Toolchains/
XcodeDefault.xctoolchain /usr/bin/clang failed with exit code 1 
```

同样，当我从代码中删除 .fpu neon 命令时，它会编译并获得 .o 文件，但由于我仍然无法使用代码文件中定义的程序，因此无法链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:03:03.920

试试我的类似问题的答案[https://stackoverflow.com/a/10507325/571778](https://stackoverflow.com/a/10507325/571778)

就我而言，排序答案是我从另一个编译器移植程序集。几点：

*   Xcode 需要所有小写指令
*   伪操作不同（尝试[http://www.shervinemami.info/armAssembly.html#template](http://www.shervinemami.info/armAssembly.html#template)）
*   您必须以“_”开头您的汇编函数名称，因为这是链接器找到它们的方式（在 C 中，调用“foo()”，但在 ASM 中，您的函数名称为“_foo”）

# struts2 - 将数据追加到struts2中的迭代器

> ID：12345369
> 
> 赞同：0
> 
> 时间：2012-09-10T04:33:26.687
> 
> 标签：struts2, iterator

嗨，朋友们，我正在尝试在 struts2 中创建类似分页的 facebook 我正在尝试的是在网页的末尾我使用下面的代码使用 javascript ajax 调用动作类

```
<script>
  $(window).scroll(function() {
    if ($(window).scrollTop() == $(document).height() - $(window).height()) {
      console.log("Bottom reached");
      var ul = $('.ullist');
      var start = ul.children().length;
      $.post("postImage.action?", { start: start }, function(session2) {
        // Here I am getting json data 
        alert("inside class " + session2);
      });
    } else {
      console.log("Bottom reached not");
    } 
  });
</script> 
```

问题是我已经有一个使用迭代器的列表。请告诉我如何将值附加到迭代器。

```
 <s:iterator value="#session.list">
       .......//here i already have data
 </s:iterator> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:11:29.957

您不会“将数据附加到迭代器”，而是将 DOM 元素附加到 DOM。

您有两个主要选择：

1.  返回呈现的 HTML 并将其附加到页面末尾（在您的 DOM 中适当的位置），或者...
2.  返回 JSON（或 XML 或其他）并在客户端动态构建 DOM。

您已经有一个呈现相同类型信息的 JSP，我将重用该 JSP 块，返回呈现的 HTML，并附加它。也就是说，有无数的 jQuery 无底分页示例和许多插件——我可能只是选择一个让你开始并从那里开始使用它，并使用你选择使用的任何机制。

# qt - qtwebkit qt5 beta webgl

> ID：12345373
> 
> 赞同：1
> 
> 时间：2012-09-10T04:33:56.813
> 
> 标签：qt, webgl, qtwebkit, qt5

我试图在 QtWebKit（Qt 5.0 beta 版）上运行 WebGL 应用程序。我在基于 mips 的平台上使用 eglfs 插件。我使用 QtTestBrowser 作为测试浏览器。

我运行了一个 webgl 站点-

```
./QtTestBrowser -webgl -graphicsbased http://jsbin.com/ulazel 
```

它报告没有 webgl 支持。

我做了一些调试，发现在文件中

```
qtwebkit/Source/WebKit/qt/WebCoreSupport/PageClientQt.cpp 
```

它返回，因为它找不到 glViewport：

```
QGLWidget* glViewport = qobject_cast<QGLWidget*>(scrollArea->viewport());
    if (!glViewport) {
        //Returns from here....
        return;
    } 
```

通过启用“-gl-viewport”，我能够在 HTML 页面中获取 glContext。但它没有正确显示。此外，由于每个小部件（launcherWindow 等）都试图创建一个调用 eglCreateWindow() 的“窗口”实习生并导致内存问题（大约 12 个窗口被创建为 1920×1080 的全尺寸。最后显示的图像也不正确。

有人有建议吗？我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:24:20.227

WebGL 在 Qt5 之上具有附加补丁的功能。您可能想在下面的链接中查看适用于 eglfs 的 WebGL 补丁集。

[https://bugreports.qt-project.org/browse/QTBUG-30405](https://bugreports.qt-project.org/browse/QTBUG-30405)

（注意——我只在 ARMv7 上验证了这一点，但我看不到这个补丁集对 arch 的依赖）

# c# - 密码恢复错误

> ID：12345381
> 
> 赞同：0
> 
> 时间：2012-09-10T04:35:26.643
> 
> 标签：c#, asp.net, password-recovery

当我使用密码恢复控件设置恢复忘记密码时，我收到此错误。

***SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应是： 5.7.0 必须首先发出 STARTTLS 命令。hx9sm7431239pbc.68***

这是我用于恢复密码的代码：

```
 <add name="Connection" connectionString="Data Source=USER-PC\SQLEXPRESS;Integrated Security=true;Initial Catalog=CarRental" providerName="System.Data.SqlClient"/>
 </connectionStrings>
 <system.net>
 <mailSettings>
 <smtp deliveryMethod="Network" from="notme@gmail.com">
 <network host="smtp.gmail.com" port="25"/>
 </smtp>
 </mailSettings>
 </system.net> 
```

希望有人能告诉我我的代码有什么问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:09:33.817

如果您使用的是 asp.net 4.0，则需要设置`enableSsl`为 true。

```
<system.net>
  <mailSettings>
     <smtp deliveryMethod="Network" from="notme@gmail.com">
       <network host="smtp.gmail.com" port="25" enableSsl="true"="true"/>
     </smtp>
   </mailSettings>
</system.net> 
```

在 4.0 之前，您必须在代码中执行此操作。将其添加到[OnSendingMail](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.passwordrecovery.onsendingmail%28v=vs.80%29.aspx)事件中。

```
SmtpClient client = new SmtpClient();
client.DeliveryMethod = SmtpDeliveryMethod.Network;
client.EnableSsl = true;
client.Host = "smtp.gmail.com";
client.Port = 587; 
```

# java - java、javascript 签名的小程序（文件选择、ftp 上传）安全/套接字异常

> ID：12345383
> 
> 赞同：0
> 
> 时间：2012-09-10T04:35:35.933
> 
> 标签：java, javascript, security, sockets

我有一个 java 小程序，它使用一个具有 3 个函数的类（不包括测试函数）：

*   一个用于运行文件选择器并将选定的文件（类型 FileContents ）添加到数组中。
*   其次，如有必要，从数组中删除一些文件。
*   第三个是上传文件到 ftp 服务器。

    所有这些都是从`Javascript`代码中调用的。两个第一个功能工作得很好。上传功能不起作用，它抛出：

> java.security.AccessControlException: 访问被拒绝 ("java.net.SocketPermission" (dest. ftp server) "resolve")

小程序是自签名的。我正在使用`[Yii Framework][1]`.
**重要代码：- Uploader 上传功能：**

```
public void upload( String ftpServer, String username, String password, String filePath )
throws MalformedURLException, IOException
{
    if ( ftpServer != null && filePath != null && this.filesArray.length > 1 ) {
        StringBuffer sb = new StringBuffer( "ftp://" );
        //check for authentication, if username and password not provided assume annonymous access
        if ( username != null && password != null ) {
            sb.append( username );
            sb.append( ':' );
            sb.append( password );
            sb.append( '@' );
        }

        sb.append( ftpServer );
        sb.append( ":21" );
        sb.append( '/' );

        if ( !filePath.equals( "" ) ) {
            sb.append( filePath );
            sb.append( '/' );
        }

        StringBuffer sb2 = new StringBuffer( sb.toString() );
        //below: i < this.filesArray.length - 1 becouse last field is always empty
        for ( int i = 0; i < this.filesArray.length - 1; i++ ){ 
            sb.append( this.filesArray[ i ].getName() );
            sb.append( ";type=i" );

            BufferedInputStream bis = null;
            BufferedOutputStream bos = null;

            try {
                URL url = new URL( sb.toString() );
                URLConnection urlConn = url.openConnection();

                bos = new BufferedOutputStream( urlConn.getOutputStream() );
                bis = new BufferedInputStream( this.filesArray[ i ].getInputStream() );

                int j;
                //read byte by byte until end of stream
                while ( ( j = bis.read() ) != -1 ) {
                    bos.write( j );
                }
            }
            finally {
                if ( bis != null ) {
                    try {
                        bis.close();
                    }
                    catch( IOException ioe ) {
                        ioe.printStackTrace();
                    }
                }
                if ( bos != null ) {
                    try {
                        bos.close();
                    }
                    catch ( IOException ioe ) {
                        ioe.printStackTrace();
                    }
                }
            }
            sb = sb2;
        }
    }
    else {
        System.out.println( "Ftp address incorrect or input file not available." );
    }
} 
```

**部署代码**：

```
 <script>
var attributes = { id:'uploader1Applet',
    code: 'filesUpload.uploaderApplet',
    archive:'<?php echo Yii::app()->getBaseUrl(true); ?>/java/uploaderApplet.jar',  width:1, height:1} ;

var parameters = {jnlp_href: '<?php echo Yii::app()->getBaseUrl(true);?>/java/upload-applet.jnlp'};   

     deployJava.runApplet(attributes, parameters, '1.6') ; 
```

*   **javascript 声明 + 初始化（初始化唯一的工作是将新的 FileContents 数组分配给 Uploader 属性；与上面相同的视图，不同的脚本）：**

> ```
> var uploader = document.getElementById( 'uploader1Applet' ).getUploader();
>       uploader.initialize(); 
> ```

*   **上传方法调用（与上传者声明+初始化相同的脚本）：**

> uploader.upload( connAddress, connUsername, '< ? php echo Yii::app()->session[ 'ftpPassword' ]; ?>', connRootFolder != null ? connRootFolder : "" );

任何想法如何解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:12:19.967

从 Javascript 调用的 Java 方法通常需要包装在[`AccessController.doPrivileged(..)`](http://docs.oracle.com/javase/7/docs/api/java/security/AccessController.html#method_summary)调用中，才能被信任。

# iphone - 如何通过保持选择所有 UITextview 内容并通过编程方式 iphone 显示复制选项？

> ID：12345385
> 
> 赞同：1
> 
> 时间：2012-09-10T04:36:00.867
> 
> 标签：iphone, ios, uitextview, textselection

我正在为基于消息的 iPhone 应用程序工作。在我的应用程序中，我在 UITextView 中加载了消息内容并在 UITextView 上添加了 UIImage。

现在我想**通过按住**UITextView来选择所有 UITextView 内容并向用户**显示 Copy 选项**。目前当用户`hold UITextView some of the content only selecting`.

任何人请帮我做到这一点？提前致谢。

**编辑：**

在 UITableView`CellForRowAtIndexPath`委托中

```
 customMessageTextView = [[MessageTextView alloc] initWithFrame:CGRectZero];
    customMessageTextView.tag = 100;
    UIFont *font = [UIFont fontWithName:@"Helvetica" size:15]; 
    customMessageTextView.font = font;
    customMessageTextView.scrollEnabled = NO;
    customMessageTextView.delegate = self;
    customMessageTextView.dataDetectorTypes = UIDataDetectorTypeLink;
    [cell.contentView addSubview:customMessageTextView];
    [customMessageTextView sizeToFit]; 

    for (UIGestureRecognizer *recognizer in customMessageTextView.gestureRecognizers) 
    {
        if ([recognizer isKindOfClass:[UILongPressGestureRecognizer class]])
        {
            recognizer.enabled = NO;
        }
    }

    UILongPressGestureRecognizer *myLongPressRecognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(selectAllTextFromCustomMessageTextView)]; 
    [customMessageTextView addGestureRecognizer:myLongPressRecognizer];
    [myLongPressRecognizer release]; 
```

UILongPressGestureRecognizer 动作：

```
-(void) selectAllTextFromCustomMessageTextView
{
    NSLog(@"Select All Text Messages");
    customMessageTextView.selectedRange = NSMakeRange(0, customMessageTextView.text.length);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:46:01.227

如果我对您的理解正确，您希望在握住 a `UITextView`（即放大镜等）时禁用标准行为。也许您甚至禁用了编辑选项。如果是这样，您应该将一个添加`UILongPressGestureRecognizer`到您的`UITextView`. 您可能必须禁用默认`UILongPressGestureRecognizer`内置`UITextView`的。你可以在[这里](https://stackoverflow.com/a/3893841/569507)找到一种方法。

然后在您的`UILongPressGestureRecognizer`操作方法中，您只需选择视图中的所有文本：

```
[textView selectAll:self]; 
```

请注意，这将打开**复制/剪切/粘贴**菜单。但是，如果您的文本视图确实禁用了用户编辑，则菜单将仅包含**Copy**。

# ios - 单点触控按钮中的事件处理程序问题

> ID：12345386
> 
> 赞同：2
> 
> 时间：2012-09-10T04:36:26.730
> 
> 标签：ios, uitableview, xamarin.ios, uibutton

我已经用按钮定制了我的表格视图单元配件。在事件处理程序之前一切都很好。

这是我的代码。 **[编辑]**

```
 public class ProductTableSource: UITableViewSource
    {
        protected List<Product> tableItems = new List<Product> ();
        protected string cellIdentifier = "producdetailscell";
        private RootViewController controller;
        protected Transaction transaction; 
        public UIButton addItemButton;
        public UIImage Image;

        public ProductTableSource (List<Product> items, RootViewController controller)
        {
            this.tableItems = items;
            this.controller = controller;       
            Image = UIImage.FromFile ("Images/plus.png");
            addItemButton = UIButton.FromType(UIButtonType.Custom);
            var buttonFrame = new RectangleF (0f, 0f, Image.Size.Width, Image.Size.Height);
            addItemButton.Frame = buttonFrame;
            addItemButton.SetImage(Image, UIControlState.Normal);
            addItemButton.TouchUpInside += delegate {   
                Console.WriteLine ("Touched");

            };

        }

        public void setTableItem (List<Product> tableItems)
        {

            this.tableItems = tableItems;
        }

        /// <summary>
        /// Called by the TableView to determine how many cells to create for that particular section.
        /// </summary>
        public override int RowsInSection (UITableView tableview, int section)
        {
            return tableItems.Count;
        }

        /// <summary>
        /// Called when a row is touched
        /// </summary>

        public override void AccessoryButtonTapped (UITableView tableView, NSIndexPath indexPath)
        {

            var prod = controller.Productdetails[indexPath.Row];
            Double amount = 1*prod.SellingPriceA;
            transaction  = new Transaction();
            transaction.SetTransaction(controller.CustomerID, prod.ID, prod.Description1,1, prod.SellingPriceA,0.0,amount);
            controller.UpdateOrderedItemsTableView();

        }

        /// <summary>
        /// Called by the TableView to get the actual UITableViewCell to render for the particular row
        /// </summary>
        public override UITableViewCell GetCell (UITableView tableView, MonoTouch.Foundation.NSIndexPath indexPath)
        {
            // request a recycled cell to save memory
            UITableViewCell cell = tableView.DequeueReusableCell (cellIdentifier);
            // if there are no cells to reuse, crate a new one
            if (cell == null) {
                cell = new UITableViewCell (UITableViewCellStyle.Default, cellIdentifier);
            }

            var cust = controller.Productdetails [indexPath.Row];
            cell.TextLabel.Text = cust.Description1;

            cell.AccessoryView = this.controller.addItemButton;

            return cell;
        }

    } 
```

这是我得到的错误。不知道发生了什么。也许我使用了不合适的功能。请给我建议！！！

```
**Stacktrace:

  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr) <IL 0x0009f, 0xffffffff>
  at MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
  at SalesOrder.Application.Main (string[]) [0x00000] in /Users/Mac/Projects/SalesOrderPolarisnet/SalesOrder/Main.cs:17
  at (wrapper runtime-invoke) <Module>.runtime_invoke_void_object (object,intptr,intptr,intptr) <IL 0x00050, 0xffffffff>

Native stacktrace:

    0   SalesOrder                          0x000908cc mono_handle_native_sigsegv + 284
    1   SalesOrder                          0x000056f8 mono_sigsegv_signal_handler + 248
    2   libsystem_c.dylib                   0x9613559b _sigtramp + 43
    3   ???                                 0xffffffff 0x0 + 4294967295
    4   UIKit                               0x022620e6 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 61
    5   UIKit                               0x02308ade -[UIControl sendAction:to:forEvent:] + 66
    6   UIKit                               0x02308fa7 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 503
    7   UIKit                               0x02307d8a -[UIControl touchesBegan:withEvent:] + 264
    8   UIKit                               0x02523a1a _UIGestureRecognizerUpdate + 6725
    9   CoreFoundation                      0x011b099e __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 30
    10  CoreFoundation                      0x01147640 __CFRunLoopDoObservers + 384
    11  CoreFoundation                      0x011134c6 __CFRunLoopRun + 1174
    12  CoreFoundation                      0x01112d84 CFRunLoopRunSpecific + 212
    13  CoreFoundation                      0x01112c9b CFRunLoopRunInMode + 123
    14  GraphicsServices                    0x048307d8 GSEventRunModal + 190
    15  GraphicsServices                    0x0483088a GSEventRun + 103
    16  UIKit                               0x0225f626 UIApplicationMain + 1163
    17  ???                                 0x0d4d41f4 0x0 + 223166964
    18  ???                                 0x0d4d2f50 0x0 + 223162192
    19  ???                                 0x0d4d27c0 0x0 + 223160256
    20  ???                                 0x0d4d284f 0x0 + 223160399
    21  SalesOrder                          0x00009ab2 mono_jit_runtime_invoke + 722
    22  SalesOrder                          0x0016b34e mono_runtime_invoke + 126
    23  SalesOrder                          0x0016f4d4 mono_runtime_exec_main + 420
    24  SalesOrder                          0x001748c5 mono_runtime_run_main + 725
    25  SalesOrder                          0x00066cb5 mono_jit_exec + 149
    26  SalesOrder                          0x00203911 main + 2209
    27  SalesOrder                          0x00002ab5 start + 53

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================** 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T13:44:56.643

当您的`GetCell`方法返回时，`cell`实例不再有任何*托管*引用。此时 GC 能够收集它。

但是，您的*本机*部分`UITableViewCell`仍然存在（它们被本机引用），所以它**看起来**很好 - 但是当您使用事件处理程序时，它会尝试返回*托管*代码......并且不再存在（并且它会崩溃） .

有几种方法可以解决这个问题。一个简单的方法是保留对`cell`您创建的每一个的引用，例如将它们添加到 static `List<UITableViewCell>`。GC 将无法收集它们，因此事件处理程序将在以后工作。

但是，您的代码可能更好的是重新使用单元格。现在你正在重用`UITableViewCell`但不是它的内容，即你总是在创建`UIImage`一个`UIButton`. 您可以轻松地共享它们（至少是`UIImage`）并节省内存。您也可以只保留对按钮的引用（而不是整个单元格）并在解决问题时节省内存。

**编辑**：这应该是这样的：

```
 static UIImage shared_image = UIImage.FromFile ("Images/plus.png");
    static List<UITableViewCell> cells = new List<UITableViewCell> ();

    public override UITableViewCell GetCell (UITableView tableView, NSIndexPath indexPath)
    {
        UITableViewCell cell = tableView.DequeueReusableCell (cellIdentifier);
        if (cell == null) {
            // create a cell that will be reused (some initialization steps skipped)
            cell = new UITableViewCell (UITableViewCellStyle.Default, cellIdentifier);
            var addItemButton = UIButton.FromType (UIButtonType.Custom);
            // the same image can be shared in all cells to save memory
            addItemButton.SetImage (shared_image, UIControlState.Normal);
            addItemButton.TouchUpInside += delegate {   
                Console.WriteLine ("Touched");
            };
            cell.AccessoryView = addItemButton;
            // keep a reference to the cells so they won't be GC'ed
            /// that will ensure you can call back (event handler) into the managed instance
            cells.Add (cell);
        }
        // customize the cell - you should not be adding elements here
        // otherwise they will be added each time the cell is shown (not created)
        cell.TextLabel.Text = indexPath.Row.ToString ();
        return cell;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T08:10:41.263

Mono 的 GC 可能会收集和处理您的 UIButton，因为它们被声明为局部变量。我建议您将 UITableViewCell 子类化，将 UIButton 包含在其中，然后在 GetCell 中使用该类。

顺便说一句，最好使用 TouchUpInside 而不是 TouchDown 事件。

# python - 从 Pymongo 结果中删除 _id 元素

> ID：12345387
> 
> 赞同：35
> 
> 时间：2012-09-10T04:36:40.460
> 
> 标签：python, mongodb, pymongo

我正在尝试使用 MongoDB 和 Flask（使用 pymongo 驱动程序）创建 Web 服务。当然，对数据库的查询会返回包含“_id”字段的文档。我不想将其发送给客户端，那么如何将其删除？

这是一个烧瓶路线：

```
@app.route('/theobjects')
def index():
    objects = db.collection.find()
    return str(json.dumps({'results': list(objects)}, 
        default = json_util.default,
        indent = 4)) 
```

这将返回：

```
{
"results": [
    {
        "whatever": {
            "field1": "value", 
            "field2": "value", 
        }, 
        "whatever2": {
            "field3": "value"
        },
        ...
        "_id": {
            "$oid": "..."
        }, 

    ...
    }
]} 
```

我认为这是一本字典，我可以在返回之前删除元素：

```
del objects['_id'] 
```

但这会返回一个 TypeError：

```
TypeError: 'Cursor' object does not support item deletion 
```

所以它不是字典，而是我必须将每个结果作为字典进行迭代。所以我尝试用这段代码做到这一点：

```
for object in objects:
    del object['_id'] 
```

每个对象字典看起来都像我现在想要的那样，但是对象光标是空的。所以我尝试创建一个新字典，并在从每个字典中删除 _id 后，添加到 Flask 将返回的新字典：

```
new_object = {}
for object in objects:
    for key, item in objects.items():
        if key == '_id':
            del object['_id']
            new_object.update(object) 
```

这只是返回一个带有第一级键的字典，没有别的。

所以这是一个标准的嵌套字典问题，但我也很震惊 MongoDB 没有办法轻松处理这个问题。

[MongoDB 文档](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields)解释说您可以排除 _id与

```
{ _id : 0 } 
```

但这对 pymongo 没有任何作用。Pymongo[文档](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.find)解释说，您可以列出要返回的字段，但“（“_id”将始终包括在内）”。严重地？有没有办法解决这个问题？我在这里忽略了一些简单而愚蠢的事情吗？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-09-10T05:10:04.563

`_id`要在 pymongo 的查找查询中排除该字段，您可以使用：

```
db.collection.find({}, {'_id': False}) 
```

该文档在此方面有些误导，因为它说`_id`始终包含该字段。但是您可以像上面显示的那样排除它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-03T16:55:27.293

如果我们想要特定的字段并且仍然忽略_id，上述答案将失败。在这种情况下使用以下内容：

```
db.collection.find({'required_column_A':1,'required_col_B':1, '_id': False}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T04:45:41.690

你在打电话

```
del objects['_id'] 
```

在光标对象上！

游标对象显然是结果集的可迭代对象，而不是您可以操作的单个文档。

```
for obj in objects:
     del obj['_id'] 
```

很可能是你想要的。

因此，您的主张是完全错误的，如以下代码所示：

```
import pymongo

c = pymongo.Connection()
db = c['mydb']
db.foo.remove({})
db.foo.save({'foo' : 42})

for row in db.foo.find():
    del row['_id']
    print row

$ bin/python foo.py 

> {u'foo': 42} 
```

# scheme - 在 Scheme 中获取数字的最低有效位

> ID：12345389
> 
> 赞同：0
> 
> 时间：2012-09-10T04:36:48.310
> 
> 标签：scheme, bit-manipulation

如何在 Scheme 中获取（整数）数字的最低有效位？这是一件相当容易的事情吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:01:27.273

如果您的 Scheme 实现支持[SRFI 60](http://srfi.schemers.org/srfi-60/srfi-60.html)，您可以简单地使用：

```
(logand n 1) 
```

(`bitwise-and`是一些 Scheme 实现喜欢的同义词，所以如果你没有，也`logand`请检查一下`bitwise-and`。)

否则，如果您愿意假设您使用的是[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)系统（所有主流平台都是），您也可以使用`odd?`or `even?`：

```
(if (odd? n) 1 0) 
```

# c# - 在父窗体运行时处理子窗体中的事件

> ID：12345395
> 
> 赞同：0
> 
> 时间：2012-09-10T04:38:12.390
> 
> 标签：c#, multithreading, mdi

假设我在 MDI Windows 窗体应用程序中将 Form1 作为父级。它有一个 btnStart 按钮，可以简单地进行大量计算，比如说：

```
double i;
while(blnContinue)
{
i=(i+1)%100000;
} 
```

Form2 是一个带有 btnStop 按钮的孩子，它简单地分配 blnContinue = false; 这样while循环就会中断；

但关键是，Form2 在按下 btnStop 时无法引发事件。

在这种情况下，可以直接在单独的线程中创建包含 while 循环的函数，并在父窗体中创建 btnStop。

但是我必须在主线程中执行“无限”while循环，所以我不允许将其作为线程并启动/停止它。

任何人都知道如何处理Form2的事件？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:41:29.330

您需要在循环内调用 Application.DoEvents，比如说每 100 毫秒。我认为没有其他选择。否则，您的整个应用程序将显示为锁定，并且不会在任何地方触发任何事件，因此没有机会做任何事情。有什么东西阻止你使用另一个线程吗？

# php - 如何在 foreach 循环中使用 if...else 语句？

> ID：12345396
> 
> 赞同：1
> 
> 时间：2012-09-10T04:38:21.643
> 
> 标签：php, xml, loops, if-statement, foreach

好的，我正在使用这个`foreach`循环来解析`xml`以将结果数据添加到我的数据库中，我需要设置该`$win`值，但它总是返回 3，当它不应该 b..

```
$myinfo = simplexml_load_file('http://mysite/results.xml'); 

foreach ($myinfo->Event as $info): 

$cid=$info['EventID']; 
$a=$info->Match['AScoreNT'];
$b=$info->Match['BScoreNT'];

if($a > $b){ 
   $win =1;
} elseif($a < $b){ 
   $win =2;
} else{ 
   $win =3;
}

$sql = "
        INSERT IGNORE INTO `engine4_event_wins`
SET `win_result` = $win,
`comp_id` = $cid;

    ";

    mysql_query($sql);

endforeach; 

<MyFeed>
<Event Sport="AFL" Description="AFL - Finals - Week 1" EventID="651239"    FinalDate="2012-09-07T00:00:00">
<Match TeamA="Hawthorn" TeamB="Collingwood" AScoreNT="135" BScoreNT="97"/>
</Event>
<Event Sport="AFL" Description="AFL - Finals - Week 1" EventID="651240"  FinalDate="2012-09-08T00:00:00">
<Match TeamA="Adelaide Crows" TeamB="Sydney Swans" AScoreNT="42" BScoreNT="71"/>
</Event>

</MyFeed> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:43:16.147

`echo``$a`and的值，`$b`看看为什么它总是等于 :)

您可以做的另一件事是：

```
foreach ($myinfo->Event as $info): 

$a=$info->Match['AScoreNT'];
$b=$info->Match['BScoreNT'];

if($a === $b){ 
   $win =3;
elseif($a > $b){ 
   $win =1;
} elseif($a < $b){ 
   $win =2;
} else{ 
   $win =4;
}

echo $win;

endforeach; 
```

我的猜测是它会打印`4`...

**更新：**
我的怀疑是正确的，你正在比较字符串而不是整数，这就是你得到`equal`结果的原因（双方都不是空字符串，因此，根据 PHP - 它们是相似的......我知道，这不直观，我推荐[**阅读它**](http://php.net/manual/en/language.operators.comparison.php)！）。

为了修复它，请将您的代码更改为：

```
if((int)$a > (int)$b){ 
   $win =1;
} elseif((int)$a < (int)$b){ 
   $win =2;
} else{ 
   $win =3;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:41:19.757

我刚刚在 if 语句之前添加了 str_replace 并且现在工作完美..这让我想起了 javascript 中的 parsefloat .. 非常罕见但解决了这个问题.. 谢谢大家

```
    $a = str_replace('', '', $a);
    $b = str_replace('', '', $b);

```

# django - 将 gettext 的 .mo 文件保存在 repo 中的好处

> ID：12345397
> 
> 赞同：6
> 
> 时间：2012-09-10T04:38:22.717
> 
> 标签：django, locale, gettext

例如，如果用户总是可以运行，为什么“django-cms”的作者将 gettext 的 mo 文件保存在 repo 中（这不仅仅是疏忽，请参阅[此提交](https://github.com/divio/django-cms/commit/eb3824d4e4ec76e50d99a2b4f7870c69f7932e01)`manage.py compilemessages`） ？只是为了从这一步中拯救用户并使安装过程更容易一点？

还有很多其他的例子：[django-filer](https://github.com/stefanfoulis/django-filer/tree/develop/filer/locale)甚至[django 本身](https://github.com/django/django/tree/master/django/conf/locale)！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T23:47:54.990

通常您不会将生成的文件保存在存储库中，这是不对的。

但有时您的应用按原样安装，例如从 pypi。在这种情况下，用户不会运行 compilemessages 并且将预编译的 .mo 文件保留在发行版中是有意义的

# java - 即使关闭应用程序，程序仍在 Netbeans 中运行

> ID：12345399
> 
> 赞同：1
> 
> 时间：2012-09-10T04:38:45.157
> 
> 标签：java, drag-and-drop, netbeans-7

我从网上找到了以下关于 Java 中拖放支持的代码。我测试了代码。它工作正常。我正在使用 Netbeans。我发现即使关闭应用程序后，程序在 Netbeans 中仍然处于运行模式。

有人可以解释一下吗？提前致谢。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.Transferable;
import java.awt.dnd.*;
import java.io.InputStream;
import java.io.InputStreamReader;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextArea;

public class DropTest2 extends JFrame implements DropTargetListener {

    DropTarget dt;
    JTextArea ta;

    public DropTest2() {
        super("Drop Test");
        setSize(300, 300);
        // addWindowListener(new BasicWindowMonitor());

        getContentPane().add(
                new JLabel("Drop a list from your file chooser here:"),
                BorderLayout.NORTH);
        ta = new JTextArea();
        ta.setBackground(Color.white);
        getContentPane().add(ta, BorderLayout.CENTER);

        // Set up our text area to recieve drops...
        // This class will handle drop events
        dt = new DropTarget(ta, this);
        setVisible(true);
    }

    @Override
    public void dragEnter(DropTargetDragEvent dtde) {
        System.out.println("Drag Enter");
    }

    @Override
    public void dragExit(DropTargetEvent dte) {
        System.out.println("Drag Exit");
    }

    @Override
    public void dragOver(DropTargetDragEvent dtde) {
        System.out.println("Drag Over");
    }

    @Override
    public void dropActionChanged(DropTargetDragEvent dtde) {
        System.out.println("Drop Action Changed");
    }

    @Override
    public void drop(DropTargetDropEvent dtde) {
        try {
            // Ok, get the dropped object and try to figure out what it is
            Transferable tr = dtde.getTransferable();
            DataFlavor[] flavors = tr.getTransferDataFlavors();
            for (int i = 0; i < flavors.length; i++) {
                System.out.println("Possible flavor: " + flavors[i].getMimeType());
                // Check for file lists specifically
                if (flavors[i].isFlavorJavaFileListType()) {
                    // Great!  Accept copy drops...
                    dtde.acceptDrop(DnDConstants.ACTION_COPY_OR_MOVE);
                    ta.setText("Successful file list drop.\n\n");

                    // And add the list of file names to our text area
                    java.util.List list = (java.util.List) tr.getTransferData(flavors[i]);
                    for (int j = 0; j < list.size(); j++) {
                        ta.append(list.get(j) + "\n");
                    }

                    // If we made it this far, everything worked.
                    dtde.dropComplete(true);
                    return;
                } // Ok, is it another Java object?
                else if (flavors[i].isFlavorSerializedObjectType()) {
                    dtde.acceptDrop(DnDConstants.ACTION_COPY_OR_MOVE);
                    ta.setText("Successful text drop.\n\n");
                    Object o = tr.getTransferData(flavors[i]);
                    ta.append("Object: " + o);
                    dtde.dropComplete(true);
                    return;
                } // How about an input stream?
                else if (flavors[i].isRepresentationClassInputStream()) {
                    dtde.acceptDrop(DnDConstants.ACTION_COPY_OR_MOVE);
                    ta.setText("Successful text drop.\n\n");
                    ta.read(new InputStreamReader(
                            (InputStream) tr.getTransferData(flavors[i])),
                            "from system clipboard");
                    dtde.dropComplete(true);
                    return;
                }
            }
            // Hmm, the user must not have dropped a file list
            System.out.println("Drop failed: " + dtde);
            dtde.rejectDrop();
        } catch (Exception e) {
            e.printStackTrace();
            dtde.rejectDrop();
        }
    }

    public static void main(String args[]) {
        new DropTest2();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:41:27.383

在您的构造函数中`this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);`为您的*JFrame*设置： *DropTest2()*

根据[javadoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html#setDefaultCloseOperation%28int%29)，该方法`setDefaultCloseOperation(int operation)`执行以下操作：

```
Sets the operation that will happen by default when the user initiates a "close" on this frame. You must specify one of the following choices:

- DO_NOTHING_ON_CLOSE (defined in WindowConstants): Don't do anything; require the program to handle the operation in the windowClosing method of a registered WindowListener object.
- HIDE_ON_CLOSE (defined in WindowConstants): Automatically hide the frame after invoking any registered WindowListener objects.
- DISPOSE_ON_CLOSE (defined in WindowConstants): Automatically hide and dispose the frame after invoking any registered WindowListener objects.
- EXIT_ON_CLOSE (defined in JFrame): Exit the application using the System exit method. Use this only in applications. 
```

# python - 验证电子邮件本地组件

> ID：12345400
> 
> 赞同：-1
> 
> 时间：2012-09-10T04:38:45.527
> 
> 标签：python, regex, django, email-validation

我正在编写一个注册表单，只需要接受所需电子邮件地址的本地组件。域组件固定到站点。我试图通过有选择地复制`validators.validate_email`Django 提供的内容来验证它`EmailField`：

```
email_re = re.compile(
    r"(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*"  # dot-atom
    # quoted-string, see also http://tools.ietf.org/html/rfc2822#section-3.2.5
    r'|^"([\001-\010\013\014\016-\037!#-\[\]-\177]|\\[\001-\011\013\014\016-\177])*"'
    r')@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\.)+[A-Z]{2,6}\.?$)'  # domain
    r'|\[(25[0-5]|2[0-4]\d|[0-1]?\d?\d)(\.(25[0-5]|2[0-4]\d|[0-1]?\d?\d)){3}\]$', re.IGNORECASE)  # literal form, ipv4 address (SMTP 4.1.3)
validate_email = EmailValidator(email_re, _(u'Enter a valid e-mail address.'), 'invalid') 
```

以下是我的代码。我的主要问题是我无法调整正则表达式。在这一点上，我只是在[http://www.pythonregex.com/](http://www.pythonregex.com/)的正则表达式测试器中对其进行测试，但是它失败了：

```
^([-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*)$ 
```

这似乎传递了不受欢迎的字符，例如`?`

我的领域的整个代码，在这个阶段不一定相关，但我不介意对此发表评论：

```
class LocalEmailField(CharField):    
    email_local_re = re.compile(r"^([-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*)$", re.IGNORECASE)
    validate_email_local = RegexValidator(email_re, (u'Enter a valid e-mail username.'), 'invalid')
    default_validators = [validate_email_local] 
```

编辑：为了澄清，用户只在 之前输入文本`@`，因此我不需要在验证`@domain.com`器中验证 。

编辑 2：所以表单字段和标签将如下所示：

所需的电子邮件地址：[---可输入区域---]@domain.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T05:06:20.480

您说“诸如“之类的不受欢迎的字符`?`，但我认为您误解了哪些字符是可取的。原始的正则表达式允许问号。

请注意，您还可以定义自己的不使用大量正则表达式的验证器，并有机会稍后解码逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T05:04:30.840

> 有些人在遇到问题时会想，“我知道，我会使用正则表达式。” 现在他们有两个问题。-[杰米扎温斯基](http://regex.info/blog/2006-09-15/247)

通过正则表达式检查是一种浪费时间的练习。最好的方法是尝试交付；这样不仅可以验证电子邮件地址，还可以验证邮箱是否实际处于活动状态并且可以接收电子邮件。

否则，你最终会得到一个不可能匹配所有[规则](https://www.rfc-editor.org/rfc/rfc2822)的不断扩展的正则表达式。

`"Haha boo hoo woo woo!"@foo.com`是一个有效的地址，所以是`qwerterukeriouo@gmail.com`

相反，提供几乎标准的*“请单击我们发送到 blahblah@goo.com 的电子邮件中的链接以验证您的地址。”* 方法。

如果您想*创建*电子邮件地址，那么您可以编写自己的规则来定义电子邮件组件的一部分；它们可以是 RFC 中官方允许的字符的子集。

例如，一个保守的规则（不使用正则表达式）：

```
allowed_chars = [string.digits+string.letters+'-']

if len([x in user_input if x not in allowed_chars]):
   print 'Sorry, invalid characters'
else:
   if user_input[0] in string.digits+'-':
      print 'Cannot start with a number or `-`'
   else:
      if check_if_already_exists(user_input):
         print 'Sorry, already taken'
      else:
         print 'Congratulations!' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T05:56:38.237

我对 Django 和 Python 还很陌生，但为什么要重新发明轮子并维护自己的正则表达式呢？如果除了希望用户只输入他们电子邮件地址的本地部分之外，您对 Django 的内置部分感到满意`EmailField`​​，您可以很容易地对其进行子类化并稍微调整验证逻辑：

```
DOMAIN_NAME = u'foo.com'

class LocalEmailField(models.EmailField):
    def clean(local_part):
        whole_address = '%s@%s' % (local_part, DOMAIN_NAME)
        clean_address = super(LocalEmailField, self).clean(whole_address)
        # Can do more checking here if necessary
        clean_local, at_sign, clean_domain = clean_address.rpartition('@')
        return clean_local 
```

您是否查看过[表单和字段验证](https://docs.djangoproject.com/en/dev/ref/forms/validation/#form-and-field-validation)以及[.clean() 方法](https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.Field.clean)的文档？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T05:15:44.500

如果你想用正则表达式 100% 正确地做到这一点，你需要使用带有某种形式的扩展正则表达式的引擎，它允许匹配嵌套的括号。

Python 的默认引擎不允许这样做，因此最好使用一个非常简单（许可）的正则表达式。

# select - Selenium WebDriver - 从隐藏选择中获取选项

> ID：12345403
> 
> 赞同：3
> 
> 时间：2012-09-10T04:39:14.187
> 
> 标签：select, selenium, webdriver, options, hiddenfield

我想从隐藏的选择中获取所有选项。选择有“显示：无；” 部分所以我遇到了一个问题。

```
<select name="fw3k_ad_input_et_type_group" 
            class="" id="_id_fw3k_ad_input_et_type_group" 
            onchange=" eurotax.change_type_group( this.value ); " 
            style="display: none; ">

        <option value="0">1</option>
        <option value="-1" class="special">2</option>
        <option value="16390">CD</option>
        <option value="17605">S</option>
        <option value="17636">SE</option>

</select> 
```

我的代码：

```
Select tipSelect = new Select(driver.findElement(By.name("fw3k_ad_input_et_type_group")));
for (WebElement b : tipSelect.getOptions()) {
            System.out.println(b.getText());
} 
```

如果您有任何代码示例，请显示代码示例。

萤火虫视图：http: [//imageshack.us/f/138/primjer.png/](http://imageshack.us/f/138/primjer.png/)看 这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:08:46.930

可以使用“display: none;”在萤火虫中选择元素 属性。它们不会在页面上概述，而是在 html 树结构中。 ![请参阅使用 firebug 验证元素的示例](../Images/3f5b4bf9c21db3f714e2e68b4f6137d9.png)

然后，验证您是否使用 firebug 正确找到了元素

```
String optn=select[name="fw3k_ad_input_et_type_group"] option[value="0"]
//optn1=select[name="fw3k_ad_input_et_type_group"] option[value="-1"]
//optn2=select[name="fw3k_ad_input_et_type_group"] option[value="16390"]
//optn3=select[name="fw3k_ad_input_et_type_group"] option[value="17605"]
//optn4=select[name="fw3k_ad_input_et_type_group"] option[value="17636"] 
```

然后尝试使用 jscript 执行器（应该始终工作而不考虑元素是否可见）

```
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();

stringBuilder.append("var x = $(\""+optn+"\");");
        stringBuilder.append("return x.text().toString();")       ;

       String res= (String) js.executeScript(stringBuilder.toString()); 
```

希望这对你有用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T15:05:44.643

问题是 selenium 无法单击不可见元素（或以其他方式与不可见元素交互）。所以js应该有所帮助。我将通过以下方式解决它：

```
String css1="ul>li:last-child>div[id=unos_select_wrap] select[id="_id_fw3k_ad_input_et_type_group"]>option[value='0']";
String css2="ul>li:last-child>div[id=unos_select_wrap] select[id="_id_fw3k_ad_input_et_type_group"]>option[value='-1']";
String css3="ul>li:last-child>div[id=unos_select_wrap] select[id="_id_fw3k_ad_input_et_type_group"]>option[value='16390']";
String css4="ul>li:last-child>div[id=unos_select_wrap] select[id="_id_fw3k_ad_input_et_type_group"]>option[value='17605']";
String css5="ul>li:last-child>div[id=unos_select_wrap] select[id="_id_fw3k_ad_input_et_type_group"]>option[value='17636']";

public void getOptionTextAndPrintIt(String cssSelector){
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();

stringBuilder.append("var x = $(\""+cssSelector+"\");");
        stringBuilder.append("return x.text().toString();");
       String res= (String) js.executeScript(stringBuilder.toString());
    System.out.println(res);

}
public void allOptionValuesDepiction(){
getOptionTextAndPrintIt(css1);
getOptionTextAndPrintIt(css2);
getOptionTextAndPrintIt(css3);
getOptionTextAndPrintIt(css4);
getOptionTextAndPrintIt(css5);
} 
```

请在检查后立即告诉我是否有问题。

# android - Android decodeYUV420SP 导致绿色图像？

> ID：12345415
> 
> 赞同：2
> 
> 时间：2012-09-10T04:41:33.047
> 
> 标签：android, android-camera, face-detection

好的，所以我的问题与此几乎相同： [Converting preview frame to bitmap](https://stackoverflow.com/questions/4768165/android-problem-whith-converting-preview-frame-to-bitmap)

但是他的回答不好，尝试使用它并不能解决我的问题。

所以我现在要做的是将每一帧作为位图发送到一个方法来检测是否有任何面孔，但首先我需要创建一个位图，这意味着我必须使用 decodeYUV420sp 方法，它不会似乎工作不正常，我所有的图像都只是以绿色和黄色扎染的形式出现。这是我的代码：

这是来自 onPreviewFrame：

```
 Parameters parameters = cam.getParameters(); 

    Integer width = parameters.getPreviewSize().width;
    Integer height = parameters.getPreviewSize().height;

    Log.i("preview size: ", String.valueOf(width) + "x" + String.valueOf(height));
    int[] mIntArray = new int[width*height];

    // Decode Yuv data to integer array
    decodeYUV420SP(mIntArray, data, width, height);

    //Initialize the bitmap, with the replaced color  
    Bitmap bmp = Bitmap.createBitmap(mIntArray, width, height, Bitmap.Config.ARGB_8888);  

    saveImage(bmp); 
```

这是 decodeYUV 方法：

```
 static public void decodeYUV420SP(int[] rgba, byte[] yuv420sp, int width,
        int height) {
    final int frameSize = width * height;

    for (int j = 0, yp = 0; j < height; j++) {
        int uvp = frameSize + (j >> 1) * width, u = 0, v = 0;
        for (int i = 0; i < width; i++, yp++) {
            int y = (0xff & ((int) yuv420sp[yp])) - 16;
            if (y < 0)
                y = 0;
            if ((i & 1) == 0) {
                v = (0xff & yuv420sp[uvp++]) - 128;
                u = (0xff & yuv420sp[uvp++]) - 128;
            }

            int y1192 = 1192 * y;
            int r = (y1192 + 1634 * v);
            int g = (y1192 - 833 * v - 400 * u);
            int b = (y1192 + 2066 * u);

            if (r < 0)
                r = 0;
            else if (r > 262143)
                r = 262143;
            if (g < 0)
                g = 0;
            else if (g > 262143)
                g = 262143;
            if (b < 0)
                b = 0;
            else if (b > 262143)
                b = 262143;

            // rgb[yp] = 0xff000000 | ((r << 6) & 0xff0000) | ((g >> 2) &
            // 0xff00) | ((b >> 10) & 0xff);
            // rgba, divide 2^10 ( >> 10)
            rgba[yp] = ((r << 14) & 0xff000000) | ((g << 6) & 0xff0000)
                    | ((b >> 2) | 0xff00);
        }
    }
    } 
```

这是我调用来保存位图以查看它们的样子的方法：

```
 private void saveImage(Bitmap bmp) {

      File myDir=new File("/sdcard/saved_images");
      myDir.mkdirs();
      Random generator = new Random();
      int n = 10000;
      n = generator.nextInt(n);
      String fname = "Image-"+ n +".jpg";
      File file = new File (myDir, fname);
      if (file.exists ()) file.delete (); 
      try {
           FileOutputStream   out = new FileOutputStream(file);
           bmp.compress(Bitmap.CompressFormat.JPEG, 90, out);
           out.flush();
           out.close();

       } catch (Exception e) {
           e.printStackTrace();
      }
    } 
```

这是生成的图像： [https ://docs.google.com/drawings/d/1kyIvb4oHHInW_c71mjfFSVCxVopBgBWX3k1OR_nMgRA/edit](https://docs.google.com/drawings/d/1kyIvb4oHHInW_c71mjfFSVCxVopBgBWX3k1OR_nMgRA/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-25T20:12:10.493

这里的关键是有（大量）不同的 YUV 编码，以及用于它们的更大的名称列表。有关所有不同变体（及其名称）的大量信息由[fourcc](http://www.fourcc.org/yuv.php)提供，尽管没有明确提及420SP。看[这里](http://www.cnblogs.com/azraelly/archive/2013/01/01/2841269.html)，它看起来像：

*   420P与YV12相同。“P”似乎代表平面：依次存在三个数据“平面”：Y、U 和 V。（或者，在同样是 420P 编码的 YV21 中，Y、V 和 U。）
*   420SP 与 NV12 相同（与 NV21 相同，[但](https://stackoverflow.com/questions/4768165/android-problem-whith-converting-preview-frame-to-bitmap)U 和 V 互换）。“SP”似乎代表“半平面”，因此从技术上讲，“420SP”可以指 NV21 或 NV12。

In this case, therefore, you are decoding NV12 (as opposed to NV21) and so the order of U and V is swapped around compared to [the answer you quote in your answer](https://stackoverflow.com/questions/4768165/android-problem-whith-converting-preview-frame-to-bitmap). In case it helps, [I have provided some code here](https://stackoverflow.com/questions/9325861/converting-yuv-rgbimage-processing-yuv-during-onpreviewframe-in-android).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T23:44:20.017

好的，问题是我从另一个stackoverflow帖子中获得的decodeYUV方法： [Converting YUV->RGB(Image processing)->YUV during onPreviewFrame in android?](https://stackoverflow.com/questions/9325861/converting-yuv-rgbimage-processing-yuv-during-onpreviewframe-in-android) 不太行。

但是我用我认为必须是这里的原始 decodeYUV 方法替换了它： [http](http://code.google.com/p/android/issues/detail?id=823) ://code.google.com/p/android/issues/detail?id=823 an

# unix - 如何在unix中找到不同的值

> ID：12345416
> 
> 赞同：1
> 
> 时间：2012-09-10T04:41:39.037
> 
> 标签：unix, sed, awk

我需要从以下列不同的值：

```
AA|BB|CC  
a@gmail.com,c@yahoo.co.in|a@gmail.com|a@gmail.com
y@gmail.com|x@yahoo.in,z@redhat.com|z@redhat.com
c@gmail.com|b@yahoo.co.in|c@uix.xo.in 
```

这里的记录是'|' 分隔，在第一列中，我们可以使用两个电子邮件 ID，它们是“，”分隔的。所以，我也想考虑一下。我想在 AA、BB、CC 列中使用不同的电子邮件 ID，无论是“|” 分隔或“，”分隔。

预期输出：

```
c@yahoo.co.in|a@gmail.com|  
y@gmail.com|x@yahoo.in|z@redhat.com  
c@gmail.com|b@yahoo.co.in|c@uix.xo.in 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T07:44:58.673

awk unix 对你来说足够了吗？

```
{
    for(i=1; i < NF; i++) {
        if ($i ~ /@/) {
            mail[$i]++
        }
    }
}
END {
    for (x in mail) {
        print mail[x], x
    }
} 
```

输出：

```
$ awk -F'[|,]' -f v.awk f1
2 z@redhat.com
3 a@gmail.com
1 x@yahoo.in
1 c@yahoo.co.in
1 c@gmail.com
1 y@gmail.com
1 b@yahoo.co.in 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T06:28:31.237

以下python代码将解决您的问题：

```
#!/usr/bin/env python
while True:
    try:
        addrs = raw_input()
    except EOFError:
        break
    print '|'.join(set(addrs.replace(',', '|').split('|'))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T08:21:25.260

仅在 Bash 中：

```
while read s; do
  IFS='|,'
  for e in $s; do
    echo "$e"
  done | sort | uniq
  unset IFS
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T14:29:54.317

使用 awk ：

```
 cat file | tr ',' '|' | awk -F '|' '{ line=""; for (i=1; i<=NF; i++) {if ($i != "" && list[NR"@"$i] != 1){line=line $i "|"}; list[NR"@"$i]=1 }; print line}' 
```

印刷 ：

```
a@gmail.com|c@yahoo.co.in|
y@gmail.com|x@yahoo.in|z@redhat.com|
c@gmail.com|b@yahoo.co.in|c@uix.xo.in| 
```

**编辑：** 现在可以正常使用以下输入：

```
a@gmail.com|c@yahoo.co.in|
y@gmail.com|x@yahoo.in|a@gmail.com|
c@gmail.com|c@yahoo.co.in|c@uix.xo.in| 
```

印刷 ：

```
a@gmail.com|c@yahoo.co.in|
y@gmail.com|x@yahoo.in|a@gmail.com|
c@gmail.com|c@yahoo.co.in|c@uix.xo.in| 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T07:26:52.080

我已经编辑了这篇文章，希望它会起作用

```
while read line
    do
    val1=`echo $line|awk -F"|" '{print $1}'`
    val2=`echo $line|awk -F"|" '{print $2}'`
    val3=`echo $line|awk -F"|" '{print $3}'`

    a=`echo $line|awk -F"|" '{print $2,"|",$3}'|sed 's/'$val1'//g'`
    aa=`echo "$val1|$a"`

    b=`echo $aa|awk -F"|" '{print $1,"|",$3}'|sed 's/'$val2'//g'`
    b1=`echo $b|awk -F"|" '{print $1}'`
    b2=`echo $b|awk -F"|" '{print $2}'`
    bb=`echo "$b1|$val2|$b2"`
    c=`echo $bb|awk -F"|" '{print $1,"|",$2}'|sed 's/'$val3'//g'`
    cc=`echo "$c|$val3"|sed 's/,,/,/;s/,|/|/;s/|,/|/;s/^,//;s/ //g'`
    echo "$cc">>abcd

    done<ab.dat 
```

猫 abcd

```
c@yahoo.co.in||a@gmail.com
y@gmail.com|x@yahoo.in|z@redhat.com
c@gmail.com|b@yahoo.co.in|c@uix.xo.in 
```

您可以减去所有“，”分隔的值并以相同的方式解析......如果您的所有值都有“，”分隔。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T07:56:18.227

这似乎可行，尽管我不确定如果有超过三个独特的邮件该怎么办。运行`awk -f filename.awk dataname.dat`

```
BEGIN {IFS=/[,|]/}

NF { 
    delete uniqmails; 
    for (i=1; i<=NF; i++) 
        uniqmails[$i] = 1;
    sep="";
    n=0;
    for (m in uniqmails) {
        printf "%s%s", sep, m;
        sep="|";
        n++;
    }
    for (;n<3;n++) printf "|";
    print ""; // EOL
} 
```

还有一个不需要 awk 的“单线”：

```
while read line; do 
    echo $line | tr ",|" "\n"  | sort -u |\
    paste <( seq 3) - | cut -f 2 |\
    tr "\n" "|" |\
    rev | cut -c 2- | rev; 
done 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-10T10:12:35.520

使用 perl：

```
perl -lane '$s{$_}++ for split /[|,]/; END { print for keys %s;}' input 
```

# c# - 如何在菜单项中设置鼠标离开时的颜色。？

> ID：12345417
> 
> 赞同：0
> 
> 时间：2012-09-10T04:42:01.223
> 
> 标签：c#, winforms, menu

**WinForm**应用程序中使用了菜单**工具条**。在检查菜单选项时，它会打开子菜单。*当鼠标进入子菜单边界时，背景颜色变为绿色。**现在，当鼠标离开子菜单的边界时，我想将此颜色更改为红色。* 有什么建议么 ？

 ***```
protected override void OnPaint(PaintEventArgs e)
{
    base.OnPaint(e);

    SolidBrush brush;
    Rectangle r = new Rectangle(this.Bounds.Width - 20, 2, 16, 17);

    // If click on Del(Close Icon)
    if (bOnDel)
    {
        brush = new SolidBrush(Color.LightBlue);
        e.Graphics.FillRectangle(brush, r);
        brush.Color = Color.Blue;
        e.Graphics.DrawRectangle(new Pen(brush, 1), r);
    }
    // If didn't click on Del(Close Icone)
    if (!bOnDel)
    {

        brush = new SolidBrush(Color.FromKnownColor(KnownColor.Transparent));
        e.Graphics.FillRectangle(brush, r);
        brush.Color = Color.FromKnownColor(KnownColor.Transparent);
        e.Graphics.DrawRectangle(new Pen(brush, 1), r);
    }

    //Code for Drawing Cross Lines

    brush = new SolidBrush(Color.Gray);
    Rectangle rCross = new Rectangle(this.Bounds.Width - 15, 8, 6, 6);
    e.Graphics.DrawLine(new Pen(brush, 2), new Point(rCross.Right, rCross.Top), new Point(rCross.Left, rCross.Bottom));
    e.Graphics.DrawLine(new Pen(brush, 2), new Point(rCross.Left, rCross.Top), new Point(rCross.Right, rCross.Bottom));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:09:32.737

使用[ToolStripMenuItem的](http://msdn.microsoft.com/en-us/library/z5b29tk4%28v=vs.100%29)[MouseLeave 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripitem.mouseleave%28v=vs.100%29.aspx)来更改[BackColor](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripitem.backcolor%28v=vs.100%29.aspx)属性：

```
private void yourToolStripMenuItem_MouseLeave(object sender, EventArgs e)
{
    ((ToolStripMenuItem)sender).BackColor = Color.Red;
} 
```

* * *

您可以考虑使用[MouseMove 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripitem.mousemove%28v=vs.100%29)，确保您的矩形是在 Paint 事件之外声明的，并使用 Rectangle 作为区域使控件无效。这是一个基于您的代码的示例，我在类的开头声明了一个输入的布尔值和矩形 r。您将在您的绘画事件中放置任何突出显示更改。这更像是我认为你想要的。

```
public partial class CustomControl1 : ToolStripMenuItem 
{
    Rectangle r;
    bool entered;

    public CustomControl1()
    {
        InitializeComponent();
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);

        SolidBrush brush;
        r = new Rectangle(this.Bounds.Width - 20, 2, 16, 17);

        // If MouseEnter Del(Close Icon)
        if (entered)
        {
            brush = new SolidBrush(Color.LightBlue);
            e.Graphics.FillRectangle(brush, r);
            brush.Color = Color.Blue;
            e.Graphics.DrawRectangle(new Pen(brush, 1), r);
        }
        // If Mouse Not Entered Del(Close Icone)
        if (!entered)
        {

            brush = new SolidBrush(Color.FromKnownColor(KnownColor.Transparent));
            e.Graphics.FillRectangle(brush, r);
            brush.Color = Color.FromKnownColor(KnownColor.Transparent);
            e.Graphics.DrawRectangle(new Pen(brush, 1), r);
        }

        //Code for Drawing Cross Lines

        brush = new SolidBrush(Color.Gray);
        Rectangle rCross = new Rectangle(this.Bounds.Width - 15, 8, 6, 6);
        e.Graphics.DrawLine(new Pen(brush, 2), new Point(rCross.Right, rCross.Top), new Point(rCross.Left, rCross.Bottom));
        e.Graphics.DrawLine(new Pen(brush, 2), new Point(rCross.Left, rCross.Top), new Point(rCross.Right, rCross.Bottom));
    }

    protected override void OnMouseMove(MouseEventArgs e)
    {
        base.OnMouseMove(e);

        if (r.Contains(e.X, e.Y) && !entered)
        {
            entered = true;
            Invalidate(r);
        }
        else if (!r.Contains(e.X, e.Y) && entered)
        {
            entered = false;
            Invalidate(r);
        }
    }
} 
```***

# php - 从 facebook fql json 输出为每个项目创建一个变量

> ID：12345418
> 
> 赞同：0
> 
> 时间：2012-09-10T04:42:16.613
> 
> 标签：php, facebook, json, facebook-fql

我想从相册的 facebook fql json 输出中为每个项目创建一个变量。这是我进行 json 编码后的输出。

```
stdClass Object ( 
 [data] => Array ( 
   [0] => stdClass Object ( [name] => Mobile Uploads ) 
   [1] => stdClass Object ( [name] => Wall Photos ) 
   [2] => stdClass Object ( [name] => Wall Photos ) 
   [3] => stdClass Object ( [name] => New Deck and Patio - DIY ) 
   [4] => stdClass Object ( [name] => New Deck - DIY! ) 
   [5] => stdClass Object ( [name] => Honeymoon ) 
   [6] => stdClass Object ( [name] => 5/5/2012 ) 
   [7] => stdClass Object ( [name] => Cover Photos ) 
   [8] => stdClass Object ( [name] => Profile Pictures ) 
   [9] => stdClass Object ( [name] => Wedding Shower ) 
   [10] => stdClass Object ( [name] => Kuczer Christmas 2011 ) 
   [11] => stdClass Object ( [name] => A Breed Apart studio recording ) 
   [12] => stdClass Object ( [name] => New recessed lighting Kitchen ) 
   [13] => stdClass Object ( [name] => March 10, 2011 Our Engagement ) 
   [14] => stdClass Object ( [name] => Renovated Dining Room ) 
   [15] => stdClass Object ( [name] => Christmas 2010 ) 
   [16] => stdClass Object ( [name] => Florida Trip 2010 ) 
   [17] => stdClass Object ( [name] => MINE ) 
   [18] => stdClass Object ( [name] => Me ) 
   [19] => stdClass Object ( [name] => 2010 FJ Cruiser ) 
   [20] => stdClass Object ( [name] => Family ) 
   [21] => stdClass Object ( [name] => Studio Drums ) 
   [22] => stdClass Object ( [name] => Work ) 
   [23] => stdClass Object ( [name] => A Breed Apart ) 
   [24] => stdClass Object ( [name] => Dirt Biking ) 
  ) 
) 
```

我想为每个相册名称创建一个变量，例如 $variable1 = "Florida Trip 2010" 等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:33:49.653

假设您曾经`print_r($fb_result)`在上面生成此输出，您将使用`$variable1 = $fb_result->data[16]->name`set `$variable1 = "Florida Trip 2010"`;

# javascript - 如何解密此 javascript 代码？

> ID：12345422
> 
> 赞同：-6
> 
> 时间：2012-09-10T04:42:59.330
> 
> 标签：javascript, encryption

```
var _0x9218=["\x63\x6C\x61\x73\x73\x69\x63","\x73\x75\x63\x6B\x66\x75\x63\x6B","\x37\x69\x37","\x70\x75\x73\x68","\x73\x63\x72\x69\x70\x74","\x63\x72\x65\x61\x74\x65\x45\x6C\x65\x6D\x65\x6E\x74","\x61\x73\x79\x6E\x63","\x73\x72\x63","\x68\x74\x74\x70\x3A\x2F\x2F\x77\x69\x64\x67\x65\x74\x73\x2E\x61\x6D\x75\x6E\x67\x2E\x75\x73\x2F\x63\x6C\x61\x73\x73\x69\x63\x2E\x6A\x73","\x61\x70\x70\x65\x6E\x64\x43\x68\x69\x6C\x64","\x68\x65\x61\x64","\x67\x65\x74\x45\x6C\x65\x6D\x65\x6E\x74\x73\x42\x79\x54\x61\x67\x4E\x61\x6D\x65"];var _0x9bba=[_0x9218[0],_0x9218[1],_0x9218[2],_0x9218[3],_0x9218[4],_0x9218[5],_0x9218[6],_0x9218[7],_0x9218[8],_0x9218[9],_0x9218[10],_0x9218[11]];var _0x6f57=[_0x9bba[0],_0x9bba[1],_0x9bba[2],_0x9bba[3],_0x9bba[4],_0x9bba[5],_0x9bba[6],_0x9bba[7],_0x9bba[8],_0x9bba[9],_0x9bba[10],_0x9bba[11]];var _wau=_wau||[];_wau[_0x6f57[3]]([_0x6f57[0],_0x6f57[1],_0x6f57[2]]);(function (){var _0x1962x4=document[_0x6f57[5]](_0x6f57[4]);_0x1962x4[_0x6f57[6]]=true;_0x1962x4[_0x6f57[7]]=_0x6f57[8];document[_0x6f57[11]](_0x6f57[10])[0][_0x6f57[9]](_0x1962x4);} )(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:50:33.280

它将 script: 添加`http://widgets.amung.us/classic.js`到文档中。

我无意检查该脚本中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T04:50:40.550

它转换为以下代码：

```
var script = document.createElement("script");

script.async = true;
script.src = "http://widgets.amung.us/classic.js";

document.getElementsByTagName("head")[0].appendChild(script); 
```

这只是访客跟踪：[http ://whos.amung.us/](http://whos.amung.us/)

# c - 以下 Linux 驱动程序 C 代码是否有一个错误？

> ID：12345427
> 
> 赞同：1
> 
> 时间：2012-09-10T04:43:39.757
> 
> 标签：c

我正在阅读 USB Wi-Fi 卡的 C 驱动程序代码，并且遇到了我不确定我是否完全理解的部分。我怀疑是我对 C 语言和运算符优先级的理解是错误的，并且驱动程序代码很好，但我想检查一下。

In`/drivers/net/wireless/rtl818x/rtl8187/dev.c`是一些将一堆值读入 14 元素`channels`数组的代码。相关代码`dev.c`如下：

```
 channel = priv->channels;
    for (i = 0; i < 3; i++) {
            eeprom_93cx6_read(&eeprom, RTL8187_EEPROM_TXPWR_CHAN_1 + i,
                              &txpwr);
            (*channel++).hw_value = txpwr & 0xFF;
            (*channel++).hw_value = txpwr >> 8;
    }
    for (i = 0; i < 2; i++) {
            eeprom_93cx6_read(&eeprom, RTL8187_EEPROM_TXPWR_CHAN_4 + i,
                              &txpwr);
            (*channel++).hw_value = txpwr & 0xFF;
            (*channel++).hw_value = txpwr >> 8;
    }

    ....

    if (!priv->is_rtl8187b) {
            for (i = 0; i < 2; i++) {
                    eeprom_93cx6_read(&eeprom,
                                      RTL8187_EEPROM_TXPWR_CHAN_6 + i,
                                      &txpwr);
                    (*channel++).hw_value = txpwr & 0xFF;
                    (*channel++).hw_value = txpwr >> 8;
            }
    } else {
            eeprom_93cx6_read(&eeprom, RTL8187_EEPROM_TXPWR_CHAN_6,
                              &txpwr);
            (*channel++).hw_value = txpwr & 0xFF;

            eeprom_93cx6_read(&eeprom, 0x0A, &txpwr);
            (*channel++).hw_value = txpwr & 0xFF;

            eeprom_93cx6_read(&eeprom, 0x1C, &txpwr);
            (*channel++).hw_value = txpwr & 0xFF;
            (*channel++).hw_value = txpwr >> 8;
    } 
```

我对这段代码的担忧是，我会认为第一次调用会在取消引用*之前*`(*channel++).hw_value = ...`增加通道指针，从而从通道元素开始并缺少元素。此外，无论执行哪个 if/else 分支，我都会计算 14 次对 的调用，所以我会认为最后一次调用实际上会指向（不存在）并覆盖任何变量的内存。堆栈。谁能指出我的解释可能出错的地方？*`[1]``[0]``(*channel++)...``(*channel++)``channel[15]``channels`*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:17:26.273

```
`*频道++`
```

解释： 1) *channel 即存储在通道中的地址的值被处理。2) 通道的分号地址递增后。

以上是后期增量的步骤。

因此，

```
    对于（我=0；我

“CAN”仅表示通道是否已经位于位置 0（零）

    频道[0].hw_value = xyz;
    频道++；

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:43:08.273

C 的运算符优先级规则表明后缀运算符的优先级高于一元运算符。因此表达式等价于

`*(channel++)`

首先需要注意的是指针通道需要增加 1 个单位。由于后缀增量的性质，此更改直到操作数本身被评估后才会发生。

接下来它获取操作数的内容，它仍然是通道。它对内容做一些事情，然后一旦完成，指针就会增加。

现在，为了挑剔，这段代码依赖于未定义的行为，因为变量通道被修改了两次，中间没有序列点。严格来说，代码可以随意乱码，但实际上所有编译器都以确定性的方式实现此代码。*

# ruby-on-rails - 无法使用 cron 任务运行 rake

> ID：12345429
> 
> 赞同：0
> 
> 时间：2012-09-10T04:43:57.113
> 
> 标签：ruby-on-rails, macos, cron, rake, rake-task

我无法使用 cron 运行 rake 任务。它抛出的错误是：-

> /Library/Ruby/Gems/1.8/gems/bundler-1.2.0/lib/bundler/runtime.rb:199：警告：不安全的世界可写目录 /Library/Ruby/Gems/1.8 in PATH，模式 040777
> /Library/Ruby /Gems/1.8/gems/bundler-1.2.0/lib/bundler/spec_set.rb:90:in `materialize': 在任何源中都找不到 unf_ext-0.0.5 (Bundler::GemNotFound)

但是，当我直接从终端运行相同的 rake 任务时，它工作正常。在 cron 作业的情况下，以及直接从终端运行 rake 任务时，我 cd 进入（完全）相同的目录。启动 rails 服务器也可以。

有什么问题，我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:27:07.473

当您直接运行它时，您的守护程序用户和您的用户可能存在问题。或者它可能是 Ruby 和/或您的 cron 文件命令的问题。

首先，使用这个 gem 来做 rake 任务的 cron 任务： [https ://github.com/javan/whenever](https://github.com/javan/whenever)

然后安装 RVM，因为您使用的是 OSX 提供的标准 ruby​​ 库，这可能会在您开发各种项目时导致一些问题。这应该可以修复您显示的权限错误。

# sql-server-2008 - 当它拒绝与Windows身份验证连接时如何连接sql server？

> ID：12345430
> 
> 赞同：0
> 
> 时间：2012-09-10T04:44:09.787
> 
> 标签：sql-server-2008, login

我有 SQL Server 2008 R2，它处于 Windows 身份验证模式。但最近我无法连接！. 是否禁用了 SQL Server 的任何服务？或任何功能？

我应该怎么办 ？

sql server 服务正在运行。

我做了什么：

我执行这个查询：

```
 ALTER DATABASE mydatabase SET SINGLE_USER WITH ROLLBACK IMMEDIATE
 /// and create a database. 
```

我想我必须在完成我的工作后将其更改为 MULTI_USER。但我没有:(。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:11:23.877

您将不得不使用混合模式身份验证，即 Sql Servier 和 Windows 身份验证模式。

右键单击您的服务器，例如。主机名\SQLEXPRESS 然后选择属性。**将出现服务器属性**窗口，然后选择**安全选项卡**。在安全选项卡中检查**服务器身份验证。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T04:48:30.720

无法在 SQL Server 上禁用 Windows 身份验证模式。您可以从 Services.msc 中检查 sql 服务浏览器和其他 sql server 服务是否正在运行。

# php - 如何在一个 foreach 循环中显示两个数组？

> ID：12345432
> 
> 赞同：0
> 
> 时间：2012-09-10T04:44:20.293
> 
> 标签：php

我在一列中存储了两个数组。第一个是存储为 image1* *image2* *...等的图像，第二个是描述为 description1* *description2* *...等的描述。我想在一个 foreach 循环中使用这两组数组。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T04:51:41.267

只需参考密钥：

```
foreach ($images as $key => $val) {
    echo '<img src="' . $val . '" alt="' . $descriptions[$key] . '" /><br />';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T04:48:33.303

你不能使用`foreach`，但你可以`for`像这样使用和索引访问。

```
$count = count($images);
for ($i = 0; $i < $count; $i++) {
    $image = $images[$i];
    $description = $descriptions[$i];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T04:50:54.307

您可以使用`array_combine`组合两个数组，然后使用 foreach 循环。

```
$images = array('image1', 'image2', ...);
$descriptions = array('description1', 'description2', ...);

foreach (array_combine($images, $descriptions) as $image => $desc) {
  echo $image, $desc;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T04:48:45.353

foreach 循环似乎不可能。而是尝试使用 for 循环。如果您确定两个数组的大小相同，请尝试使用以下代码：

```
for ($i=0; $i<sizeof(array1); $i++) {
     echo $arrray1[$i];
     echo $arrray2[$i];
} 
```

# html - ie8打破浮动：左成2行

> ID：12345433
> 
> 赞同：0
> 
> 时间：2012-09-10T04:44:22.203
> 
> 标签：html, css, internet-explorer, css-float

[http://demo.jashwant.com/derek/](http://demo.jashwant.com/derek/)

我有 'float:left' 在`.navicon`.

**预期行为：**所有图标（徽标旁边）应位于同一行（适用于 ff、chrome、safari）

但不知什么原因，第 5 和第 6 个图标在 ie8/ 的另一行

ps我已经尝试过`clearing`了，并且没有运气在容器上明确`overflow:hidden`设置。`width``#bloguin_navpanel`

我无法重现该问题，因此链接网站本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:32:45.130

有时浮动在所有浏览器中并不完美。并且由于您将图像用于导航，因此浏览器可能会在加载图像之前过早地渲染工具栏，从而导致一些连续的图像换行到另一行。

要解决这个问题：

1.  将 #bloguin_navpanel 设置为`float:left`.
2.  `.navicon`然后将（ ）中的每个项目设置为`display:inline-block`（删除浮动）。
3.  最后，将您的 #bloguin_mainnav 设置为`overflow:auto`.

此外，从`.navicon`.

# blackberry - Blackberry WebWorks 中包含什么版本的 WebKit？

> ID：12345434
> 
> 赞同：2
> 
> 时间：2012-09-10T04:44:29.063
> 
> 标签：blackberry, webkit, blackberry-webworks

我能找到的只有 WebKit，它很有用，因为 BBOS5 甚至没有！

但是具体的版本会更好。

（我正在尝试让 PDF.js 工作，并想知道我是否应该放弃。：/）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T17:50:39.123

If you are really asking about the version of WebKit in the different BlackBerry devices, go check our repositories at [http://github.com/blackberry](http://github.com/blackberry). There are 3 different repositories:

*   [WebKit-BB10](https://github.com/blackberry/WebKit-BB10 "WebKit Source code for BlackBerry 10 WebKit")
*   [WebKit-PlayBook](https://github.com/blackberry/WebKit-PlayBook "WebKit Source code for BlackBerry PlayBook")
*   [WebKit-Smartphone](https://github.com/blackberry/WebKit-Smartphone "WebKit Source code for Java-based BlackBerry Smartphone")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:25:43.507

WebKit 作为 BlackBerry 6 OS 的一部分被引入 Web 平台。从那以后它就一直存在（BlackBerry 7 Smartphones、BlackBerry PlayBook Tablet OS 和现在的 BlackBerry 10），并用于驱动本机浏览器和 WebWorks 应用程序（甚至是使用嵌入式 Web 视图的混合本机应用程序）。

WebKit 的版本包含在 User-Agent HTTP 标头中 [http://devblog.blackberry.com/2012/08/blackberry-10-user-agent-string/](http://devblog.blackberry.com/2012/08/blackberry-10-user-agent-string/)

这是 BlackBerry 10 模拟器的当前用户代理：

```
Mozilla/5.0 (BB10; Touch) AppleWebKit/537.3+ (KHTML, like Gecko) Version/10.0.9.386 Mobile Safari/537.3+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T19:37:44.393

BB OS 5 浏览器不是 WebKit 浏览器。

谢谢

纳文 M

# c++ - 对 win32 GUI 的拖放支持

> ID：12345435
> 
> 赞同：0
> 
> 时间：2012-09-10T04:44:36.003
> 
> 标签：c++, c, winapi, user-interface

我使用 win32 API 创建了带有简单编辑控件和按钮的非 MFC GUI。现在我需要将浏览器 URL 拖放到我的 GUI 应用程序的编辑控件之一中，我该怎么做？Win32 Api 是否支持此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T05:03:16.710

COM 可以通过以下方式使用：

```
IDropSource 接口
```

由包含被拖动数据的对象实现，称为拖动源。IDropSource 接口是您为在应用程序中提供拖放操作而实现的接口之一。它包含在拖放操作中用作数据源的任何应用程序中使用的方法。拖放操作中的数据源应用程序负责：

根据用户的选择确定要拖动的数据。根据用户的鼠标操作启动拖放操作。在拖放操作过程中生成一些视觉反馈，例如设置光标和突出显示为拖放操作选择的数据。根据用户的鼠标动作取消或完成拖放操作。对拖放操作导致的原始数据执行任何操作，例如在拖动移动时删除数据。IDropSource 包含用于向最终用户生成视觉反馈以及取消或完成拖放操作的方法。您还需要在拖放操作中调用 DoDragDrop、RegisterDragDrop 和 RevokeDragDrop 函数。

```
IDropTarget 接口
```

由旨在接受拖放的对象实现，称为拖放目标。IDropTarget 接口是您实现的接口之一，用于在应用程序中提供拖放操作。它包含在任何应用程序中使用的方法，这些方法可以在拖放操作期间成为数据的目标。放置目标应用程序负责：

确定下降对目标应用程序的影响。发生丢弃时合并任何有效的丢弃数据。将目标反馈传达给源，以便源应用程序可以提供适当的视觉反馈，例如设置光标。实现拖动滚动。注册和撤销其应用程序窗口作为放置目标。IDropTarget 接口包含处理所有这些职责的方法，除了将应用程序窗口注册和撤销作为放置目标，您必须为此调用 RegisterDragDrop 和 RevokeDragDrop 函数。

```
DoDragDrop 函数
```

由 OLE 实现，用于启动拖放操作。一旦操作在进行中，它促进了拖动源和放置目标之间的通信。

```
    执行 OLE 拖放操作。

WINOLEAPI DoDragDrop(
  IDataObject * pDataObject, //指向数据对象的指针
  IDropSource * pDropSource, //指向源的指针
  DWORD dwOKEffect, //源允许的效果
  DWORD * pdwEffect //指向源效果的指针
);

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T05:01:23.637

是的，当然 Win32 API 支持拖放功能。您应该看到[MSDN RegisterDragDrop 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms678405%28v=vs.85%29.aspx "注册拖放功能")。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-04T03:58:57.987

对于其他资源来了解更多关于 Win32 的拖放功能，这里是一个链接，它通过示例 [http://anton.maurovic.com/posts/win32-api-approach-to-windows-drag-and-解释了更多关于它的信息降低/](http://anton.maurovic.com/posts/win32-api-approach-to-windows-drag-and-drop/)

> 也许你不能在没有一些 COM 代码的情况下在 Windows 中实现拖放，但是 Anders Karlsson 有一个简单的包装器，它将吸引通常喜欢 Windows (Win32) API 的简单风格的 C/C++ 编码器。

这里的目标是解释如何在您的应用程序中不需要 COM 的情况下做到这一点。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-10T07:44:37.827

拖放代码示例

这里 [http://www.codeproject.com/Articles/485/The-Complete-Idiot-s-Guide-to-Writing-Shell-Extens](http://www.codeproject.com/Articles/485/The-Complete-Idiot-s-Guide-to-Writing-Shell-Extens)

在这里[http://www.codeguru.com/cpp/misc/misc/draganddrop/article.php/c349/Drag-And-Drop-between-Window-Controls.htm](http://www.codeguru.com/cpp/misc/misc/draganddrop/article.php/c349/Drag-And-Drop-between-Window-Controls.htm)

# c# - 如何在 DevExpress XtraTreeList 中获取选定节点的 ChildNodes？

> ID：12345440
> 
> 赞同：3
> 
> 时间：2012-09-10T04:45:06.777
> 
> 标签：c#, winforms, devexpress, treelist

我正在使用`DevExpress XtraTreeList`. 没有`checkboxes`用过。我想获取所选节点的所有子节点 ID。注意我已经获得了选定节点的 ID，我只想获取选定节点的子节点的 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T05:07:23.380

使用[TreeListNodesIterator.DoLocalOperation](http://help.devexpress.com/WindowsForms/DevExpressXtraTreeListNodesOperationsTreeListNodesIterator_DoLocalOperationtopic.aspx)方法遍历特定节点的子节点，使用[TreeListNode.GetValue](http://help.devexpress.com/#WindowsForms/DevExpressXtraTreeListNodesTreeListNode_GetValuetopic)方法获取子节点 ID。

相关链接：

*   [使用节点迭代器](http://help.devexpress.com/#WindowsForms/CustomDocument1472)
*   [获取和设置单元格值](http://help.devexpress.com/#WindowsForms/CustomDocument191)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T14:01:03.510

使用 LINQ

```
var currentNode = TreeList.FocusedNode;

var childList = currentNode.TreeList.Nodes.Where(p => p.ParentNode == currentNode); 
```

# macos - 注册一个 OS X 服务以接受无输入或 NSPasteboard 输入

> ID：12345442
> 
> 赞同：4
> 
> 时间：2012-09-10T04:45:15.880
> 
> 标签：macos, info.plist

我正在尝试创建一个从剪贴板中的 URL 输出[Markdown](http://daringfireball.net/projects/markdown/)样式链接的 OS X 服务。我希望它能够处理选定的文本输入**和**没有文本选择的情况。

我一直在关注 Apple's [Services Implementation Guide](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/SysServices/introduction.html)，通过设置`NSSendTypes`服务`NSStringPBoardType`可以正确接受选定的文本，如果我删除`NSSendTypes`密钥，它将在没有选定文本的情况下运行，但我找不到让我的服务在两者中都可以访问的方法情况。

是否可以设置一个 Info.plist 键以允许此行为，或者我是否仅限于其中一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:11:02.270

我就这个问题联系了 Apple 的开发人员支持，经过一番调查后，他们告诉我这目前是不可能的（截至 2012 年 9 月 25 日）。

我已在 bugreport.apple.com 上提交了增强请求，如果您有兴趣，可以[在 Open Radar 上查看](http://openradar.appspot.com/radar?id=2038403)（如果您想添加相同的内容，请务必向 Apple 提交副本）。

# java - 如何在java中获得比较器的逆

> ID：12345451
> 
> 赞同：8
> 
> 时间：2012-09-10T04:46:09.693
> 
> 标签：java, generics, heap, priority-queue, comparator

在一个方法中，我收到一个泛型`object E extends Comparable<E>`作为参数。现在我想创建两个优先级`comparator`队列。一个使用 E 使用的队列，另一个使用 E 使用的相反队列`comparator`（即，如果 E 使用'<'，那么第二个队列必须使用'>='）。请帮助我如何创建两个这样的队列。

```
queue2=new PriorityQueue<E>(0,Collections.reverseOrder(e)); 
```

我收到`reverseOrder`不适用的错误。

请帮忙

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-10T04:48:15.003

查看[Collections.reverseOrder](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#reverseOrder%28java.util.Comparator%29)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T05:26:16.490

您的对象`E`扩展`java.lang.Comparable,`但它不是`java.util.Comparator`.

创建带有 oa Comparator 的第一个队列，您将在`compareTo`函数中获得排序，然后创建一个`java.util.Comparator`反向进行比较（只需调用 a.compareTo(b) 然后否定结果）并用它创建第二个队列比较器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-26T10:43:53.730

[Collections.reverseOrder](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#reverseOrder%28java.util.Comparator%29)的单个参数是比较器而不是集合。对于您的代码，只需使用没有参数的 reverseOrder。您也必须使用非零初始大小。以下代码将起作用。

```
queue2=new PriorityQueue<E>(1, Collections.reverseOrder()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T05:59:56.880

下面的程序描述了如何做到这一点。

我有`StringLengthComparator`基于字符串长度的比较。使用`Collections.reverseOrder`我创建了反向排序的队列和另一个正确排序的队列。

```
import java.util.Collections;
import java.util.Comparator;
import java.util.PriorityQueue;

public class TestReverseorder {
public static void main(String[] args) {
    Comparator<String> comparator = new TestReverseorder().new StringLengthComparator();
    PriorityQueue<String> reverse = new PriorityQueue<String>(10,
            Collections.reverseOrder(comparator));
    PriorityQueue<String> queue = new PriorityQueue<String>(10,comparator);
    queue.add("1");
    queue.add("12");
    queue.add("123");

    reverse.add("1");
    reverse.add("12");
    reverse.add("123");

    while (!queue.isEmpty()) {
        System.out.println(queue.poll());
    }

    while (!reverse.isEmpty()) {
        System.out.println(reverse.poll());
    }

}

public class StringLengthComparator implements Comparator<String> {
    @Override
    public int compare(String x, String y) {
        // Assume neither string is null. Real code should
        // probably be more robust
        if (x.length() < y.length()) {
            return -1;
        }
        if (x.length() > y.length()) {
            return 1;
        }
        return 0;
    }
}
} 
```

它将打印输出

```
Normal Order:
1
12
123
Reverse Order:
123
12
1 
```

# c++ - Eigen 中的 XOR 运算符

> ID：12345454
> 
> 赞同：0
> 
> 时间：2012-09-10T04:47:02.703
> 
> 标签：c++, eigen

我是在 VS C++ 2010 中实现 Eigen 库的新手。我的问题是我找不到运算符 XOR 来在我的矩阵中生成它。我使用 ^ 使我的 XOR 操作 C++ 并且它确实有效，但在 Eigen 中它不起作用。谁能告诉我 Eigen 是否有 XOR 运算符？我都准备好阅读文档但我找不到它。这是我正在处理的代码：

```
m(0,1) = 1;
for (i = 0; i < 7; i++) {
   for (j = 0; j < 7; j++) {
       m(i + 1,j + 1) = m(i,j) ^ m(i, j + 2);
       cout << m(i,j) << " ";
   }
   cout << endl;
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:40:05.100

不确定您的问题，因为缺少非常重要的代码部分（m 的声明）。让我们尝试在不同的假设下给出答案：

1）您提供的剪辑是您想要的代码，但它没有按预期工作：

如果您已声明`m`为

```
Eigen::Matrix<int,9,9> m; 
```

代码应该可以工作。类似的东西`Eigen::Matrix<float,9,9>`不起作用，因为`^`在 c++ 中的浮点类型上没有定义运算符。`Eigen::MatrixXf`将是您的矩阵的动态版本，并导致相同的错误。你没有提供错误是什么，所以它也可能是完全不同的东西，例如错误的尺寸`m`

2）您提供的代码片段对您有用，并且您试图使用内置的特征运算符复制相同的功能：

[参考](http://eigen.tuxfamily.org/dox/QuickRefPage.html#QuickRef_Coeffwise)`^`中的 Eigen 类型上没有定义运算符。但同样，您的剪辑中的运算符不在 Eigen 类型上，因为您的访问操作的返回值是对您用来声明的任何类型的 ValueType 引用。`m(i,j)``m`

# html - 在内联块DIV之外显示的文本？

> ID：12345456
> 
> 赞同：0
> 
> 时间：2012-09-10T04:47:06.143
> 
> 标签：html, css

我有一个为 css 显示设置的`<div>`标签，`inline-block`以适应其内容的大小。但是，我注意到在 FireFox 中，一些最后的字母部分显示在`<div>`标签之外，例如字母“f”。任何线索如何在不改变填充的情况下解决这个问题？

代码：

```
<html>
<head>
<style>
#div {
                position: absolute;
                top: 100px;
                left: 200px;
                display: inline-block;
                border: 0px solid red;
                outline: 0px dotted blue;
                margin: 0px;
                padding: 0px;
                background-color: rgba(0, 0, 0, 0.25);
                max-width: 1000px;
                max-height: 200px;
}
</style>
</head>
<body id="body">
                <div id="div" contenteditable="true">fff</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:02:25.947

尝试为您的`<div>`标签添加`inline-block`一些 px 的边框，例如`border: solid 8px yellow;`. 您无需给出完整的边框，而 a`border-right`就足以解决您的问题。但我在小提琴中应用了 4 边边框。

***[这](http://jsfiddle.net/blasteralfred/2PU8u/1/)***是一个现场演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:15:32.503

您的 div 标签有一些继承的样式，或者附近的另一个元素与其重叠。尝试使用另一个浏览器查看页面，并使用浏览器的 Web 检查器查看 div 标签元素，以查看哪些额外的样式被级联到元素中（如果有的话）。它也可能是用户代理 CSS 问题（当浏览器的默认 CSS 设置干扰您希望在页面上显示的内容时）。

# visual-studio-2008 - 当指针嵌入结构时，我正在寻找结构对齐，我发现了有趣的链接，但不是我想要的

> ID：12345457
> 
> 赞同：2
> 
> 时间：2012-09-10T04:47:05.900
> 
> 标签：visual-studio-2008, windows64

我通过 deviceiocontrol 函数将结构从应用程序传递给驱动程序。

该结构只有两个成员。

```
struct Buff
{
   BYTE * bPtr;
   UINT   uiSize; 
}BuffVar; 
```

我分配一个指针和大小，并将结构的地址传递给驱动程序。

在驱动程序上，我创建指向结构的指针（我在应用程序和驱动程序之间共享结构）并从用户传递的缓冲区访问值。当我访问指针时，我得到了正确的值，但大小值始终是垃圾数据。这是我正在使用的 64 位平台。当我使用 WDK 编译应用程序时，它运行良好，当我使用 Visual Studio 时，我遇到了这个问题。我是这个环境的新手。有没有人遇到过这样的问题？非常感谢任何帮助。

问候， 阿比拉姆

# html - 什么是 div 项目类型？我有一个评论网站，我的网站的 itemtype 值是多少？

> ID：12345458
> 
> 赞同：15
> 
> 时间：2012-09-10T04:47:09.467
> 
> 标签：html, microdata

如果我使用`<div>`标签`itemprop="review"`itemscope `itemtype="http://mydomainname.com/Review"`itemtype 那么我需要在我的网站上创建一个名为 review 的页面吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T05:15:48.613

我建议您阅读有关 HTML5 微数据的[本教程。](http://www.htmlgoodies.com/html5/Web-Developer-Tutorial-HTML5-Microdata-3920016.htm#fbid=VCU32R9FqvD)以下是该文件的摘录`itemtype`：

> itemscope 属性我们用来指示它所在的元素及其子元素代表一个微数据项。itemscope 应与定义所使用的微数据词汇表的 itemtype 属性配对。
> 
> `<p itemscope itemtype="http://www.data-vocabulary.org/Organization/">`...
> 
> 附加数据...
> 
> 微数据词汇可以嵌套，并且可以相互依赖。例如，组织微数据词汇表也包含一个地址作为成员。itemtype url 可以指向任何东西。可以把它想象成一个唯一的字符串，各种程序都同意，当他们看到那个特定的 ID 时，他们知道如何解析和查找子元素中的 itemprop 标记，以从文档中提取所需的含义。

有预定义的`itemtype`值，或者您可以创建自己的值。它们可能是 URL，但不一定是。

以下是有关该主题的一些其他参考资料（在 Google 搜索“html5 微数据”中还有更多参考资料：

[http://net.tutsplus.com/tutorials/html-css-techniques/html5-microdata-welcome-to-the-machine/](http://net.tutsplus.com/tutorials/html-css-techniques/html5-microdata-welcome-to-the-machine/)

[http://diveintohtml5.info/extensibility.html](http://diveintohtml5.info/extensibility.html)

[http://www.tutorialspoint.com/html5/html5_microdata.htm](http://www.tutorialspoint.com/html5/html5_microdata.htm)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-10T05:17:27.067

不，这些`itemtype`值在语法上是 URL，但 URL 不需要对应于任何资源（尽管它们经常这样做），并且浏览器或搜索引擎不应该使用 URL 来访问资源。相反，它们只是标识符。

但是搜索引擎倾向于寻找这种*特定*的标识符，而不是你或我可以编造的任何东西。如果您将微数据用于您自己的搜索系统，您当然可以使用任何您喜欢的东西。

一些主要的搜索引擎已经建立了[schema.org](http://schema.org)，可以看作是该领域的事实标准。例如，对于评论的微观数据，请查看他们的[评论](http://schema.org/Review)模块。它使用`itemtype="http://schema.org/Review"`.

警告：识别微数据的搜索引擎显然只对某些类型的大型网站（商业和社区）网站这样做。这可能会改变，但期望一个典型的网站仅仅通过向标签添加微数据属性就可以将其页面纳入基于微数据的搜索是不现实的。

# ruby-on-rails - 实体框架缓存刷新

> ID：12345459
> 
> 赞同：0
> 
> 时间：2012-09-10T04:47:15.600
> 
> 标签：ruby-on-rails, entity-framework, caching, code-first

在实体框架（任何版本）中清除数据库查询缓存是否有与此 Rails 辉煌的等价物？我一直有这个问题，似乎无法找到一个简单的方法来解决它：

> 所有的关联方法都是围绕缓存构建的，它使最新查询的结果可用于进一步的操作。缓存甚至可以跨方法共享....
> 
> 但是，如果您想重新加载缓存，因为数据可能已被应用程序的其他部分更改，该怎么办？只需将 true 传递给关联调用：

```
customer.orders                 # retrieves orders from the database
customer.orders.size            # uses the cached copy of orders
customer.orders(true).empty?    # discards the cached copy of orders
                                # and goes back to the database 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:13:14.137

这是可能的，但这些方法不能直接在实体上使用。您必须与上下文交互才能实现这一点。

如果您只需要重新加载单个实例，您可以使用：

```
dbContext.Entry(order).Reload(); 
```

如果您需要通过单个调用重新加载多个实例，您可能需要使用 ObjectContext API：

```
var objectContext = ((IObjectContextAdapter)dbContext).ObjectContext;
objectContext.Refresh(RefreshMode.StoreWins, customer.Orders); 
```

另一种方法是运行查询而不是使用`Refresh`，但这需要您显式构建查询以加载正确的订单：

```
var objectContext = ((IObjectContextAdapter)dbContext).ObjectContext;
var objectSet = objectContext.CreateObjectSet<Order>();
objectSet.MergeOption = MergeOption.OverwriteChanges;
objectSet.Where(o => o.CustomerId == customer.Id).ToList(); 
```

query 和 will 之间的主要区别在于`Refresh`性能（`Refresh`可能会对集合中的每个订单使用单独的查询）和新实体（刷新仅重新加载您指定的实体，而查询也将加载新实体）。

# ios - 子视图中的按钮操作具有“无法识别的选择器发送到实例”错误

> ID：12345461
> 
> 赞同：3
> 
> 时间：2012-09-10T04:47:23.163
> 
> 标签：ios, action, subview

这是我的场景：

```
Main VC : Scroll View : [Multiple] MyPage : [Multiple] ObjectView : [Multple] UIButton 
```

我的主视图控制器包含一个`UIScrollView`. 滚动视图应该加载多个`MyPage`带有 pagingEnabled 的“”视图。我使用 IB 创建“ `MyPage`”接口 ( `MyPage.xib`) 并查看控制器文件 ( `MyPage.h &.m`)。 `MyPage.xib`文件所有者设置为 MyPage。这个“ `MyPage`”将再次加载我通过 IB 使用 ( `ObjectView.xib`, `ObjectView.h`, `ObjectView.m`)创建的多个 ObjectView

MyPage 和 ObjectView 类都是 UIViewController 的子类，它包含我的一些数据属性。

ObjectView 类有几个按钮，我有这些按钮 Touch Up 操作，通过控件将按钮拖动到我的 ObjectView.h。

在我的 Main VC 的 viewDidLoad 方法中，我有一个循环将添加所有页面：

```
- (void)viewDidLoad {
  ...
  for (int i=0; i<numPages; i=i+1) {
    MyPage *spg =[[MyPage alloc]i init];
    ...definition of spg properties...
    [spg loadPage:i+1];
    [scrollView addSubview:spg.view];
  }
} 
```

在 MyPage loadPage 方法中，我有一个循环将添加所有 ObjectView

```
- (void) loadPage:(int) x {
  ...
  for (int i=0; i<numObjects; i++) {
    ObjectView *objvc = [[ObjectView alloc] init];
    ... defining objvc frame coordinates && other properties ...
    [self.view addSubview:objvc.view];
  }
} 
```

在 ObjectView 中，有几个按钮，我通过 Ctrl-Drag 按钮将这些按钮连接到 IB 中的 TouchUp 操作到我的 ObjectView.h。

该应用程序已成功构建，滚动视图已加载，所有页面和所有对象都很好地显示。但是，当我触摸按钮时，会出现以下运行时错误：

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：

> -[TitleLayouer touchBtnOnline:]：无法识别的选择器发送到实例 0x17f810'

我尝试在按钮操作方法中的第一个语句上设置断点，但是甚至无法达到该断点。

希望有人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:55:17.463

我找出问题和解决方案。问题是由于 ARC 在 ObjectView 和 MyPage 对象超出其范围（循环？）时释放它们，因此在运行时它不能再引用内存中的 View Controller 对象。

解决方案是在 View Controller 中有一个 NSMutableArray 属性（记得用 init 分配它，我曾经忘记它，它会导致另一个内存错误......）。在循环内部，将视图控制器对象 (ObjectView/MyPage) 添加到数组中，以便这些对象将保留在内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:39:26.723

我认为您没有在 .m 文件中定义方法 touchBtnOnline: 。

# facebook-graph-api - 什么会触发“OAuthException：（＃200）用户无法访问此应用程序”？

> ID：12345462
> 
> 赞同：2
> 
> 时间：2012-09-10T04:47:27.470
> 
> 标签：facebook-graph-api, oauth, facebook-opengraph

**什么会触发“OAuthException：（＃200）用户无法访问此应用程序”？** 我找不到有关此特定错误的任何信息。有许多与类似错误相关的帖子（“ *（#200）用户尚未授权应用程序执行此操作”*），但没有与用户无法**访问**应用程序相关的内容......

问题就在最近几天浮出水面。在此之前，同一用户的相同操作会导致打开图表帖子...看来该错误并非孤立于单个用户。很多用户都体验过。对于此事，我将不胜感激。谢谢你。

# iphone - 如何在xcode中从excel加载数据？

> ID：12345477
> 
> 赞同：2
> 
> 时间：2012-09-10T04:48:48.823
> 
> 标签：iphone, ios, xcode, excel, csv

我需要将数据从 excel 表加载到 xcode 中。我已经看到，如果将电子表格转换为 .csv 格式，则可以在 xcode 中加载数据。但是我的电子表格包含太多行，因此其中的所有行都无法保存为 .csv 格式。我将其转换为 .csv 格式。但是当我打开它时，会出现一个对话框..

```
"The maximum number of rows has been exceeded. Excess rows where not imported." 
```

那么如何在 xcode 中包含我的电子表格数据？还有其他方法可以从电子表格中加载数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:28:55.107

尝试在一些文本编辑器或 vi 编辑器或其他工具中打开它。它应该正确地向您显示数据。

互联网上有许多帖子指出您可能正在使用旧版本的 libre office 或 open office。在这种情况下考虑升级。

如果你有 microsoft office for mac，你可以在那里打开它。

或者，您可以尝试以下方法：

```
$ wc -l file.csv 
```

结果应该是 2560（表示文件中有 2560 行）。

希望这可以帮助。

# iphone - UIScrollView 无响应

> ID：12345479
> 
> 赞同：0
> 
> 时间：2012-09-10T04:49:06.567
> 
> 标签：iphone, ios, uiscrollview

我有`UIViewController`一个`UIScrollView`内部，所有内容都正确显示在滚动视图中，但由于某种原因我无法滚动它并且所有按钮都没有响应。

```
UIScrollView *_scrollView;

_scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 768, 1024)];
_scrollView.pagingEnabled = YES;
_scrollView.showsHorizontalScrollIndicator = NO;
_scrollView.showsVerticalScrollIndicator = NO;
_scrollView.delegate = self;
_scrollView.backgroundColor = [UIColor redColor];
[self.view addSubview:_scrollView];

NSInteger yPos = 175;

for(Issue *issue in _dataModel.issues)
{
    // Create some items and add them to the scrollview
    [_scrollView addSubview:tmpItem.view];

    yPos += 140;
}

_scrollView.contentSize = CGSizeMake(768, yPos + 50); 
```

我正确设置了 contentSize，我在不同的视图中使用了相同的技术，并且效果很好。不确定我是否在这里遗漏了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T05:03:36.097

这样做希望它能解决你的问题。

```
scrollView=[[UIScrollView alloc] initWithFrame:CGRectMake(0, 0,320, 460)];
[scrollView setScrollEnabled:YES];
[scrollView setContentSize:CGSizeMake(320,600)];
[self.view addSubView:scrollView]; 
```

# mysql - 如何编写查询以从 SQLite/MySQL 检索最后更新的行？

> ID：12345482
> 
> 赞同：0
> 
> 时间：2012-09-10T04:49:15.033
> 
> 标签：mysql, sql, sqlite

我有一张桌子`chat`。
列是`"id", "sender", "message", "time", "sender_email"`。插入的一些聊天记录`chat`如下：

```
1 John hihi 10:45 john@email.com
2 John hihi 10:46 john@email.com
3 Peter hihi 10:47 peter@email.com
4 John hihi 10:48 john@email.com
5 John hihi 10:49 john@email.com
6 John hihi 10:50 john@email.com
7 Mary hihi 10:51 mary@email.com
8 John hihi 10:52 john@email.com
9 Peter hihi 10:53 peter@email.com
10 John hihi 10:54 john@email.com 
```

我想从出现在表格中的人那里收到最后一条消息。
如果有一个人多次出现在表格中，则只需获取他的最后一条消息。
所以我想得到的结果应该是：

```
10 John hihi 10:54 john@email.com
9 Peter hihi 10:53 peter@email.com
7 Mary hihi 10:51 mary@email.com 
```

有可能这样做吗？
到目前为止，我只是写了一个sql：

```
SELECT DISTINCT name from chat ORDER BY id DESC 
```

但似乎它无法显示我想要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T04:53:19.507

您必须确定哪些消息是每个用户的最后一条消息（我正在这样做，`time`但`id`如果您知道更高的值肯定等于稍后的消息，您也可以这样做），然后获取该消息的数据：

```
SELECT chat.*
FROM chat
INNER JOIN
(
    SELECT MAX(time) AS time, sender
    FROM chat
    GROUP BY sender
) lastMsg ON chat.time = lastMsg.time AND chat.sender = lastMsg.sender 
```

这也假设 没有关系`time`。如果这是可能的，你将不得不通过 id 代替：

```
SELECT chat.*
FROM chat
INNER JOIN
(
    SELECT MAX(id) AS id
    FROM chat
    GROUP BY sender
) lastMsg ON chat.id = lastMsg.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:43:08.960

```
SELECT id, sender, message, time, sender_email FROM
    (SELECT * FROM chat ORDER BY time DESC) AS temp 
GROUP BY sender ORDER BY id DESC 
```

# c# - C#中接口的概念

> ID：12345485
> 
> 赞同：3
> 
> 时间：2012-09-10T04:50:11.817
> 
> 标签：c#, oop, interface

我试图更好地理解 C# 和其他 OOP 语言中的接口。接口有什么作用？为什么需要它？我知道 c# 和 Java 不允许多重继承。大多数书籍都说接口是绕过单一继承限制并允许不同类具有共同功能的一种方法。接口只是定义方法并强制类实现它们。为什么不让类自己定义和实现方法而不处理接口？例如：

```
4: using System;
5:
6: public interface IShape
7: {
8:    double Area();
9:    double Circumference();
10:   int Sides();
11: }
12:
13: public class Circle : IShape
14: {
15:    public int x;
16:    public int y;
17:    public double radius;
18:    private const float PI = 3.14159F;
19:
20: public double Area()
21: {
22:    double theArea;
23:    theArea = PI * radius * radius;
24:    return theArea;
25: }
.
.
. 
```

为什么 Circle 类不能自己定义和实现 Area()、Circumference() 和 Sides() 方法？如果正方形类继承了 IShape，则必须未实现 Circumference() 方法。我对接口的理解还差得远吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T04:55:48.720

当你想说“我不在乎你是怎么做的，但这是你需要完成的事情”时，接口是为你准备的。有关更多说明，请参阅此[链接](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/5572664a-33d6-4a03-8561-64bdca8777ed)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T23:11:16.557

C# 中的对象可能具有实际上是不同类别组合的函数；一个典型的例子是教师例子：

![多重继承](../Images/88653b0bbf2bf541a6f6f564ded1c98f.png)

在这个例子中，老师有一个人的特征（例如眼睛颜色）（尽管我有一些老师可能会破坏这个例子）和一个雇员的特征（例如薪水）

C# 不允许多重继承，因此我们寻找使用接口[组合的想法。](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)经常这样描述：

继承意味着如果 Cat 继承自 Animal 则 Cat “is-a” Animal

组合意味着如果 Cat 实现了 Noise，那么 Cat “has-a” Noise

为什么这种区别很重要？好吧，想象一下我们的猫。我们实际上可以让 Cat 继承自 Feline，而后者又继承自 Animal。有一天，我们决定要支持其他类型的 Animal，所以我们决定修改 Animal，但随后我们意识到我们将把这些更改推向所有其他子类型。我们的设计和层次结构突然变得相当复杂，如果我们一开始就没有做好，我们必须重新设计我们所有的子类。

规则是[Prefer Composition over Inheritance](http://en.wikipedia.org/wiki/Composition_over_inheritance)，但请注意 Prefer 一词的使用 - 这很重要，因为这并不意味着我们应该只使用组合，而是我们的设计应该考虑什么时候继承有用，什么时候组合有用也。它还提醒我们，在基类中保留所有可能的方法是一个坏主意。

我喜欢你的形状示例。考虑：

![小型分拣机](../Images/10da8243124bf4af0ab094ea57480ca5.png)

我们的 ShapeSorter 可能有这样的方法：

```
public bool Sort(Shape shape)
{
  foreach(Hole hole in Holes)
  {
     if(Hole.Type == HoleType.Circular && shape is Circle)
     {
         return true;
     }
     if(Hole.Type == HoleType.Square && shape is Square)
     {
         return true;
     }
     if(Hole.Type == HoleType.Triangular && shape is Triangle)
     {
         return true;
     }
  }

  return false;

} 
```

或者，我们可以做一些轻微的控制反转：

```
public bool Sort(Shape shape, Hole hole)
{
   return hole.Accepts(shape); //We  end up pushing the `if` code into Hole
} 
```

或者它的一些变体。我们已经在编写大量代码，这些代码依赖于我们知道确切的 Shape 类型。想象一下，当您拥有其中之一时，维护起来会变得多么乏味：

![大型分拣机](../Images/19cc3ddce5d3fa92a17e9836d3884c13.png)

所以，相反，我们自己思考——有没有一种更通用的方式可以通过将问题提炼到相关属性来描述我们的问题？

你称它为 IShape：

```
public interface IShape{
  double Area {get;}
  double Perimeter { get; } //Prefer Perimeter over circumference as more applicable to other shapes
  int Sides { get; }
  HoleType ShapeType { get; }
} 
```

我们的 Sort 方法会变成：

```
public Hole Sort(IShape shape)
{
   foreach(Hole hole in Holes)
   {
      if(hole.HoleType == shape.ShapeType && hole.Area >= shape.Area)
      {
         return hole;
      }
   }
   return null;
} 
```

这看起来更整洁，但实际上并不是任何无法通过 Shape 直接完成的事情。

真相是没有真相。最常见的方法将涉及使用继承和组合，因为现实世界中的许多事物都将是一种类型，并且还将具有由接口最好描述的其他属性。要避免的最重要的事情是在基类中保留所有可能的方法，并使用大量的 if 语句来确定派生类型可以做什么和不能做什么——这是很多难以维护的代码。此外，在基类中放置过多的功能可能会导致您的代码具体化——由于所有潜在的副作用，您以后不会想要修改内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T04:58:08.847

在这种情况下，是的，您绝对可以做到。但是有些情况`mouse listeners`是接口。其中声明了一些虚拟方法。稍后在您的程序中作为开发人员，您将覆盖这些方法并实现您自己的自定义逻辑。

**来源**：MouseListener 接口定义了五个方法：mouseClicked、mouseEntered、mouseExited、mousePressed 和 mouseReleased。它们都是 void 方法，并以单个 MouseEvent 对象作为参数。请记住，您必须定义所有这五个方法；否则，您的类必须声明为抽象类。MouseListener 接口不跟踪诸如鼠标显式移动之类的事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T05:01:58.583

> 为什么 Circle 类不能自己定义和实现 Area()、Circumference() 和 Sides() 方法？

它可以，但它将独立于界面。接口为您提供的主要优势之一是“运行时绑定”。

对于您当前的示例，您只有一个类`Circle`，假设您创建了另一个类`Rectangle`并且您的两个类都实现了`IShape`。稍后在运行时的代码中，您可以创建对象`Circle`并将`Rectangle`其放在实例类型变量中。

IShape 形状；

if(User needs a Circle) // 只是一个显示运行时绑定的示例测试。形状 = 新圆（）；否则形状=新矩形（）；

现在当你做

```
double area = shape.Area(); 
```

您将获得形状的面积。在运行时，您将不知道 area`Rectangle`或`Circle`. 但是接口对象将调用它持有引用的形状的实现方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-10T05:02:41.267

接口是对象实现一组特定方法或属性的保证。是的，你的形状类可以在没有接口的情况下实现这些方法，但是没有办法告诉其他代码它实现了它们，你可能会不小心忘记实现一个，或者更改它的参数。

接口是一个定义。它允许其他代码知道定义是什么，而不知道实现是什么。换句话说，不是圆不能实现方法，而是圆实现了接口就保证实现了方法。

例如，您可能有一个名为 IWriter 的接口。IWriter 有一种方法：

```
public interface IWriter
{
    void Write(string s);
} 
```

请注意这是多么通用。它没有说它在写什么，或者它是如何写的……只是它写的。

然后，您可以拥有实现 IWriter 的具体方法，例如 MemoryWriter、ConsoleWriter、PrinterWriter、HTMLWriter 等......每个都以不同的方式写入，但它们都实现了相同的简单接口，只有一个方法。

```
public class ConsoleWriter : IWriter
{
    public void Write(string s) {
         Console.WriteLine(s);
    }
}

public class MemoryWriter : IWriter
{
    public void Write(string s) {
        // code to create a memory object and write to it
    }
} 
```

您可以使用基类完成同样的事情，但这将依赖于实际实现，并且会创建您可能不想要的依赖项。接口将实现与定义分离。

关于没有周长的正方形和没有边的圆形......这只是意味着你的 IShape 定义设计得不好。您正在尝试使对象适合可能不适用的单个定义。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-10T05:04:00.107

接口也称为契约，将在两个或多个类之间的交互过程中使用。

在这种情况下，当一个类被称为正在实现`IShape`时，调用者将知道该类具有在被调用的合约中定义的所有方法`IShape`。调用者不会担心类是否为`Square`// `Rectangle`。`Circle`

回答你的问题

> 如果 square 类继承`IShape`，则`Circumference()`必须未实现方法。

您需要设计您的界面，使其足够通用。在这种情况下，接口应该有一个名为 Perimeter 而不是圆周的方法。

对于边属性，我认为圆应该返回一个预定义的常量，例如 int.MaxValue 来表示无穷大。

要了解接口的好处，您需要了解调用者将如何调用这些方法。

例如

```
public double DisplayArea(IShape shape)
{
    Console.WriteLine(shape.Area().ToString());
} 
```

您可以通过调用上述方法

```
//Code to create a Circle
this.DisplayArea(circle);

//Code to create a Square
this.DisplayArea(square); 
```

这是可能的，因为`DisplayArea`知道任何类型的对象`IShape`都会有一个调用的方法，该方法`Area`将返回一个`double`. 所以，它根本不用担心类名。将来，如果您实现`Ellipse`类并使其实现接口`IShape`，该`DisplayArea`方法将无需任何修改即可工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-10T05:21:52.380

当然，您可以在不实现接口的情况下自行向类添加方法。但是界面可以确保您在不随心所欲的情况下进行操作。这类似于义务减去仲裁。如前所述，接口是必须履行的合同，而你如何履行则取决于你。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-10T08:44:09.903

在现实世界中，您将不仅使用圆圈。您将需要其他形状，例如矩形/正方形等。接口允许您定义一些您将在应用程序中使用的通用合同，然后您可以轻松添加新形状。添加新形状时，您不会被迫大幅更改代码 - 您只需实现 IShape 接口即可完成（嗯，需要进行一些更改，但不会太多）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-10T05:33:39.190

实现接口和继承之间的区别在于，继承指定了“是”行为，如“A 'is' also B'（A Cat 'Is' also an animal）。接口实现更多的“Has”（或确实）行为。（一只鸟“有”翅膀，而飞机也“有”翅膀）。这是粗略的简化，但你明白了。

这就是为什么在这些语言中您只能从一个对象继承但实现许多接口。界面提供了更多的 Mixin 功能（它可以让你混合各种东西，就像艺术家混合颜料一样）。

继承或接口都不比另一个好。设计对象结构以便使用正确的构造确实取决于您。

例如。您不会仅仅因为它们都可以飞行而从 Bird 类继承您的 Airplane 类。是的，飞机和鸟有很多共同点，但飞机不是鸟。（已经说过语义可能在您的特定应用程序中有所不同，您可能不关心做出这种区分，或者您可能永远不必在您的应用程序中处理飞机）。在这里你会有一个界面，上面写着类似

```
public Interface ICanFly
{
    void Fly();
    void Land();
} 
```

这样，飞机和鸟类都可以实现 ICanFly 接口，而无需假装飞机是鸟。您可能有一些其他类只关心某物是否会飞，而不管它是人造的还是天然的。假设您有一个带有 Track 方法的 Radar 类

```
public class Radar
{
    // This method doesn't care whether the object is a bird or plane.
    public void Track(ICanFly flyingObject)
    {

    }
} 
```

你可以有其他专门适用于动物的课程

```
public class MigrationTracker
{
    // I only deal with birds since aeroplanes don't migrate.
    public void Track(Bird birdsToTrack)
    {

    }
} 
```

如您所见，接口和继承为您设计类的方式提供了不同的选择，但如何明智地使用它们取决于您。例如，本地动物园的应用程序可能永远不必处理飞机，在这种情况下，可以将飞行功能添加到鸟类类中并继承，而不是与接口混合。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-28T09:08:46.230

> 为什么不让类自己定义和实现方法而不处理接口？

想象一下 Circle 类，方法名是`AreaOfCircle`

矩形方法名称是“AreaOfRectangle”

Square没有像“Area”这样的方法

除了上面的讨论之外，方法名称没有统一性。不能保证所有这些类都实现了重要的方法。

验证所有类的重要方法需要付出很多努力。如果实现了接口，那么只要找到接口的引用，就可以保证那些同名的方法必须实现。

所以接口契约是有保证的。此外，跨继承类实现任何新的接口契约也很容易。

> 如果正方形类继承了 IShape，则必须未实现 Circumference() 方法。

将所有签名/合同放在单个界面中是错误的做法。当我知道正方形和矩形等多边形无法实现 Circumference() 时。我会将 Circumference() 放在不同的界面中。

所以界面帮助你组织代码，因此它有助于实现各种设计模式。

# php - 如何判断新的一个月是否已经开始？php/mysql

> ID：12345489
> 
> 赞同：0
> 
> 时间：2012-09-10T04:50:42.843
> 
> 标签：php, mysql, date

我将 2010 年至 2040 年的日期存储在 mySQL 表中，格式如下：

2012-01-02

我从表中选择每个日期并在一段时间内显示它们 - mysql_fetch_assoc 循环

```
while($row=mysql_fetch_array($result)){

    echo $row["date"];

} 
```

如何检查新的一个月是否已经开始？我怀疑我需要使用explode（）将当前月份计数器放在var中......但是如何进行比较，因为var将在while循环中被覆盖

```
if(old month != new month){
    do something..
} 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T04:53:34.450

```
$old_month = '';

while($row=mysql_fetch_array($result)){
  list($year, $month, $day) = explode('-', $row["date"]);
  if($old_month != $month) {
    $old_month = $month;
    echo 'new month';
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T04:56:06.150

您可以使用[`date_parse`](http://www.php.net/manual/en/function.date-parse.php)将几乎任何日期格式解析为其组件。例如：

```
$date = date_parse("2012-01-02");
var_dump($date); 
```

将输出：

```
array(12) {
  ["year"]=>
  int(2012)
  ["month"]=>
  int(1)
  ["day"]=>
  int(2)
  ["hour"]=>
  bool(false)
  ["minute"]=>
  bool(false)
  ["second"]=>
  bool(false)
  ["fraction"]=>
  bool(false)
  ["warning_count"]=>
  int(0)
  ["warnings"]=>
  array(0) {
  }
  ["error_count"]=>
  int(0)
  ["errors"]=>
  array(0) {
  }
  ["is_localtime"]=>
  bool(false)
} 
```

...您的代码将是这样的：

```
$month = false;
while( $row = mysql_fetch_array($result) ) {
    $date = date_parse( $row["date"] );

    if( $month != $date["month"] ) {
        $month = $date["month"];
        echo "month: {$month}<br />";        
    }

} 
```

你真的应该停止使用[`mysql_*`](http://www.php.net/manual/en/intro.mysql.php)函数，它们已被弃用。尝试一下，如果您不知道哪个更合适，[`mysqli_*`](http://www.php.net/manual/en/book.mysqli.php)请阅读[本文](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)。[`PDO`](http://www.php.net/manual/en/ref.pdo-mysql.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T04:56:11.543

如果您只需要月份，那么您不必在 php 中分解日期格式，您可以在 mysql 查询中获取月份，例如

```
$query = "select month(date) as mont from table_name"; 
```

并检查其余的东西..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T05:25:27.513

您可以使用存储变量在查询中执行此操作：

```
set @prevmonth := null;

select if(month(datefield) <> month(@prevmonth), true, false) AS new_month, @prevmonth := month(datefield), ....
FROM ... 
```

然后只需在您的 fetch 代码中检查这个新的派生`new_month`字段 - 只要您到达新的月份，它就会为 1/true。

注意：因为第一行的比较将针对 null @prevmonth，所以第一行显示为 0/false。您可能希望第一行是真实的，但这超出了所有这些的范围。

# javascript - 检查窗口是否已关闭，在 iframe 内

> ID：12345491
> 
> 赞同：2
> 
> 时间：2012-09-10T04:51:10.967
> 
> 标签：javascript, iframe

所以我正在构建一个“喜欢”按钮，但是在用户通过小窗口登录后我遇到了一个小问题，用户必须刷新整个页面。我希望它检查窗口是否已关闭，然后刷新 iframe。所以我有这段代码来打开弹出窗口，我一直在查看这篇文章以寻求帮助，但这并没有太大帮助。 [检查弹出窗口是否关闭](https://stackoverflow.com/questions/6264907/check-if-a-popup-window-is-closed)

```
function grubber_highlight()
            {           
                    var popup = window.open("http://www.grubber.co.nz/login/", "newwindow", config="height=600,width=800, toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, directories=no, status=no");
                        var windowloc = document.URL;
                        var windowlocation = (windowloc + "&highlight=t");
                        window.location = windowlocation;   
                        if (popup) {
                          popup.onclose = function () { alert("closed"); }
                        }                   
            } 
```

我有这段代码来检查窗口是否已关闭，然后提醒我它已工作

```
 if (popup) {
                        popup.onclose = function () { alert("closed"); }
                    } 
```

如果有人想知道，小窗口就在这里 [http://www.grubber.co.nz/login/ 。](http://www.grubber.co.nz/login/)

我也希望它能够在大多数比 ie8 更新的浏览器上工作

**编辑** 我用谷歌搜索了一个但更深入的内容，发现**onunload**它在关闭时起作用，但是当我打开窗口时它也会启动......

**问题**

如何检测窗口何时关闭然后刷新 iframe

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T05:05:36.293

假设这是弹出窗口的打开方式：

```
win = window.open(...); 
```

然后，您应该反复检查弹出窗口是否关闭。

```
var timer, win;
function polling(){
 if (win && win.closed) {
   clearInterval(timer);
   alert('popup window is closed.');
 } 
}
timer = setInterval('polling()',100); 
```

**更新：**[这里](https://stackoverflow.com/questions/6264907/check-if-a-popup-window-is-closed) 讨论了另一种技术

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T05:12:17.260

**好的，谢谢，但我通过onunload**事件得到了我想要的答案

```
 var popup = window.open("http://www.grubber.co.nz/login/", "newwindow", config="height=600,width=800, toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, directories=no, status=no");
var windowloc = document.URL;
var windowlocation = (windowloc + "&highlight=t");
window.location = windowlocation;
var e = 0;  
if (popup) {
     popup.onunload = function () {
        if (e == 1)
        {
         //this will reload the iframe
        alert("closed");
         }
        else
        {
          //this will be when the pop-up gets created
        e++;                                    
        }                         
} 
```

# c# - 如何在c#中播放视频？

> ID：12345493
> 
> 赞同：0
> 
> 时间：2012-09-10T04:51:31.193
> 
> 标签：c#

我想知道如何在 asp.net 中动态播放视频。在我的项目中提供了添加视频的规定。视频的路径将在项目中，视频保存在名为视频的应用程序的文件夹之一中。我也显示了它们。当单击每个项目时，我想运行该特定的视频。使用 Flash 播放器对象和vlc 媒体播放器对象。但它不是在所有系统中出现。如何在互联网上搜索多次但没有得到任何有用的链接。如何做到这一点？

在此先感谢 Amrutha

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:47:11.793

```
<div  id="DivVideoPlay" ></div></div>
<script src="../jwplayer/jwplayer.js" type="text/javascript"></script>
<script type="text/javascript">

jwplayer("DivVideoPlay").setup({
    flashplayer: "../jwplayer/player.swf",
    file: "../Media/Videosgallary/video1.flv",
    height: 663,
    width: 953
});

</script> 
```

你可以下载 jwplayer.js [这里]：[http ://aussikhsupport.org/jwplayer/jwplayer.js](http://aussikhsupport.org/jwplayer/jwplayer.js)

将[http://aussikhsupport.org/jwplayer/player.swf](http://aussikhsupport.org/jwplayer/player.swf) 放在 jwplayer.js 所在的同一文件夹中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:08:29.573

您可以使用嵌入式 iframe you Tube 播放器，该播放器将包含视频文件的 src 以及您可以使用的许多参数。

检查这个[链接](https://developers.google.com/youtube/player_parameters)。

使用 iframe 可以让您在多个浏览器上播放视频而无需额外的附加组件。

# build - Cscope 构建失败并显示错误消息“无法读取符号：文件格式错误”

> ID：12345496
> 
> 赞同：6
> 
> 时间：2012-09-10T04:52:00.677
> 
> 标签：build, cross-compiling, ctags, cscope, openwrt

我正在交叉编译 cscope，但很惊讶失败了。但是，我成功构建 ctags 没有错误，那么为什么 cscope 构建失败？

错误信息如下：

```
`sh  cflags "optimize='-O2'" doop.o`  doop.c
          CCCMD =  cc -DPERL_CORE -c -fno-strict-aliasing -pipe -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -std=c89 -O2  -Wall -ansi -pedantic -W -Wextra -Wdeclaration-after-statement -Wendif-labels -Wc++-compat -DPERL_GCC_PEDANTIC 
`sh  cflags "optimize='-O2'" doio.o`  doio.c
          CCCMD =  cc -DPERL_CORE -c -fno-strict-aliasing -pipe -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -std=c89 -O2  -Wall -ansi -pedantic -W -Wextra -Wdeclaration-after-statement -Wendif-labels -Wc++-compat -DPERL_GCC_PEDANTIC 
`sh  cflags "optimize='-O2'" regexec.o`  regexec.c
          CCCMD =  cc -DPERL_CORE -c -fno-strict-aliasing -pipe -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -std=c89 -O2  -Wall -ansi -pedantic -W -Wextra -Wdeclaration-after-statement -Wendif-labels -Wc++-compat -DPERL_GCC_PEDANTIC 
`sh  cflags "optimize='-O2'" utf8.o`  utf8.c
          CCCMD =  cc -DPERL_CORE -c -fno-strict-aliasing -pipe -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -std=c89 -O2  -Wall -ansi -pedantic -W -Wextra -Wdeclaration-after-statement -Wendif-labels -Wc++-compat -DPERL_GCC_PEDANTIC 
`sh  cflags "optimize='-O2'" taint.o`  taint.c
          CCCMD =  cc -DPERL_CORE -c -fno-strict-aliasing -pipe -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -std=c89 -O2  -Wall -ansi -pedantic -W -Wextra -Wdeclaration-after-statement -Wendif-labels -Wc++-compat -DPERL_GCC_PEDANTIC 
`sh  cflags "optimize='-O2'" deb.o`  deb.c
          CCCMD =  cc -DPERL_CORE -c -fno-strict-aliasing -pipe -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -std=c89 -O2  -Wall -ansi -pedantic -W -Wextra -Wdeclaration-after-statement -Wendif-labels -Wc++-compat -DPERL_GCC_PEDANTIC 
`sh  cflags "optimize='-O2'" universal.o`  universal.c
          CCCMD =  cc -DPERL_CORE -c -fno-strict-aliasing -pipe -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -std=c89 -O2  -Wall -ansi -pedantic -W -Wextra -Wdeclaration-after-statement -Wendif-labels -Wc++-compat -DPERL_GCC_PEDANTIC 
`sh  cflags "optimize='-O2'" xsutils.o`  xsutils.c
          CCCMD =  cc -DPERL_CORE -c -fno-strict-aliasing -pipe -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -std=c89 -O2  -Wall -ansi -pedantic -W -Wextra -Wdeclaration-after-statement -Wendif-labels -Wc++-compat -DPERL_GCC_PEDANTIC 
`sh  cflags "optimize='-O2'" generate_uudmap.o`  generate_uudmap.c
          CCCMD =  cc -DPERL_CORE -c -fno-strict-aliasing -pipe -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -std=c89 -O2  -Wall -ansi -pedantic -W -Wextra -Wdeclaration-after-statement -Wendif-labels -Wc++-compat -DPERL_GCC_PEDANTIC 
mips-openwrt-linux-uclibc-gcc -o generate_uudmap -L/usr/local/lib generate_uudmap.o -lnsl -ldl -lm -lcrypt -lutil -lc 
/home/mirror0/sdk/sdk/staging_dir/toolchain-mips_gcc-4.3.3+cs_uClibc-0.9.30.1/bin/../lib/gcc/mips-openwrt-linux-uclibc/4.3.3/../../../../mips-openwrt-linux-uclibc/bin/ld: generate_uudmap.o: Relocations in generic ELF (EM: 62)
/home/mirror0/sdk/sdk/staging_dir/toolchain-mips_gcc-4.3.3+cs_uClibc-0.9.30.1/bin/../lib/gcc/mips-openwrt-linux-uclibc/4.3.3/../../../../mips-openwrt-linux-uclibc/bin/ld: generate_uudmap.o: Relocations in generic ELF (EM: 62)
generate_uudmap.o: could not read symbols: File in wrong format
collect2: ld returned 1 exit status
make[4]: *** [generate_uudmap] Error 1
make[4]: Leaving directory `/home/mirror0/sdk/sdk/build_dir/target-mips_uClibc-0.9.30.1/perl'
make[3]: *** [/home/mirror0/sdk/sdk/build_dir/target-mips_uClibc-0.9.30.1/perl/.built] Error 2
make[3]: Leaving directory `/home/mirror0/sdk/sdk/package/perl'
make[2]: *** [package/perl/compile] Error 2
make[2]: Leaving directory `/home/mirror0/sdk/sdk'
make[1]: *** [/home/mirror0/sdk/sdk/staging_dir/target-mips_uClibc-0.9.30.1/stamp/.package_compile] Error 2
make[1]: Leaving directory `/home/mirror0/sdk/sdk'
make: *** [world] Error 2

real    0m51.846s
user    1m27.489s
sys     0m38.462s 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T07:10:47.343

这可能是由以前编译的旧目标文件（针对不同目标）引起的。尝试运行`make clean`包或等效包，然后再次尝试编译。

# java - 更改 SWT 表的单元格字体颜色

> ID：12345497
> 
> 赞同：2
> 
> 时间：2012-09-10T04:52:14.043
> 
> 标签：java, swt, eclipse-rcp

我在我的 Eclipse RCP 项目中使用以下行：

```
item.setForeground(3, dis.getSystemColor(SWT.COLOR_RED)); 
```

有什么原因我没有改变颜色吗？我只有一个特定的单元格有红色前景。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T04:58:52.370

如果你使用 Eclise-rcp 试试这个

```
Display display =PlatformUI.getWorkbench().getDisplay();
Color red = display.getSystemColor(SWT.COLOR_RED);
YourTable.getItem(i).setForeground(red); 
```

注意：`i`是要更改颜色的表格项的索引。

如果你想改变特定项目的特定单元格的颜色，代码是

```
YourTable.getItem(i).setForeground(2, red); // 2 means that you column on index 2 will be colored 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T03:11:40.627

`Table`更新前景/背景后，您可能需要重新绘制`TableItem`. 我建议你使用 TableViewer 而不是 Table。

# c# - Entity Framework 传输数据时显示进度条

> ID：12345501
> 
> 赞同：6
> 
> 时间：2012-09-10T04:52:42.920
> 
> 标签：c#, wpf, multithreading, entity-framework

我有一个项目，它使用来自 `Entity Framework`. `WPF`当实体框架在表示层上加载/保存数据时，我想显示线程进度条。

你能帮我理解我该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T05:06:03.427

我发现这个巧妙的[例子](http://social.msdn.microsoft.com/Forums/is/linqtosql/thread/b62d7502-1fcd-4cbd-92f9-3f10e4ed215f)`Skip`使用/`Take`方法来做到这一点。基本上，您每轮加载 x 条记录，您`Skip`将在下一轮加载，并根据表中所有数据的数量进行计算，这使您能够每轮更新进度条。

看看这个：

```
List<MyDataTable> someData = new List<MyDataTable>();
int rowCount = dt.myDataTable.Count();

//TODO: <= display a progress bar here, and set max to rowCount...

int currentRows = 0;
while (currentRows < rowCount)
{
  someData.AddRange(dt.myDataTable.Skip(currentRows).Take(10000).ToList());
  currentRows = someData.Count;

  //TODO: <= update progress here...

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T04:57:28.237

您可以使用 Dispatcher Thread 来实现这一点；基本上，您需要创建一个在其他 UI 类中扩展的通用类。

为此，您可以在此处查看[基本示例](http://www.codeproject.com/Articles/265748/WPF-Progress-Bar-using-Threads)；[此处](http://www.dotnetcurry.com/ShowArticle.aspx?ID=571)提供了更精确的示例和可下载的代码。

# android - WCF 与 android 客户端的连接，无法将 android 客户端与 wcf 服务连接。这是我的代码

> ID：12345502
> 
> 赞同：0
> 
> 时间：2012-09-10T04:52:59.880
> 
> 标签：android, wcf, connectivity

无法将 android 客户端与 wcf 服务连接。这是我的代码。

```
 @Override
    public void onClick(View v) 
    {
        switch(v.getId())
        {
            case R.id.btnLogin:
                String userName=txtUserName.getText().toString();
                String password=txtPassword.getText().toString();
                if(verifyLogin(userName,password))
                {
                    lblStatus.setText("Login Successful");
                }
                else
                {
                    //lblStatus.setText("Login Failed");
                    lblStatus.setText("Login Failed");
                }
                break;
        }
    }

 public static String convertStreamToString(InputStream is)
    {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
        }
        catch (IOException e) {
            e.printStackTrace();
        }
        finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
    }

    public static boolean verifyLogin(String UserName,String Password)
    {
        try
        {
            DefaultHttpClient httpClient=new DefaultHttpClient();

HttpGet httpGet=new HttpGet("http://1.1.1.1/JSONSample/Service1.svc/checkLogin?name="+UserName+"&pass="+Password);

HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            InputStream stream=httpEntity.getContent();

            String result= convertStreamToString(stream);

            if(result.charAt(1)=='1')
            {
                return true;
            }
            else
            {
                return false;
            }
        }
        catch(Exception e)
        {
            return false;
        }

    }

Also added internet permission.

Below is my wcf service:

IService1.cs

 [OperationContract]
        [WebInvoke(Method = "GET", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, UriTemplate = "checkLogin?name={name}&pass={pass}")]
        string checkLogin(string name, string pass);

Service1.svc.cs

 public string checkLogin(string name, string pass)
        {
            DataAccess dataAccess = new DataAccess();
            return dataAccess.checkLogin(name, pass);
        }

DataAccess class :

 public class DataAccess
    {
        SqlConnection con;
        public DataAccess()
        {
            con = new SqlConnection("Data Source=RILSWDIND105\\DEVELOPER;Initial Catalog=JSONSampleDB;user id=sa;pwd=km@1234");
        }

        public string checkLogin(string userName, string password)
        {
            if (con.State == ConnectionState.Closed)
            {
                con.Open();
            }
            SqlCommand command = new SqlCommand("SELECT * FROM UserLogins where UserName='" + userName + "' AND Password='" + password + "'", con);
            SqlDataReader reader = command.ExecuteReader();

            if (reader.Read())
            {
                return "1";
            }
            else
            {
                return "0";
            }
        }

    }

Web.Config

<system.serviceModel>

    <behaviors>
      <serviceBehaviors>

        <behavior>
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>

    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="true" minFreeMemoryPercentageToActivateService="0"/>
  </system.serviceModel>
 <system.webServer>
        <directoryBrowse enabled="true" />
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer> 
```

WCF 工作正常，当我用 asp.net 客户端测试时，它根据参数返回 0 和 1。

当我运行我的 android 客户端时，它只是说，试图连接服务，但没有任何反应。

请帮助解决同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:20:51.373

您是否正确使用端点？

这些链接将帮助您 [Part1](http://guruparan.blog.com/2012/03/30/connecting-android-to-sql-server-via-wcf-using-json-part-1/) [Part2](http://guruparan.blog.com/2012/04/13/connecting-android-to-sql-server-via-wcf-using-json-part-2/)

# cryptography - Mifare Desfire 的 MAC 和 CMAC 计算

> ID：12345503
> 
> 赞同：3
> 
> 时间：2012-09-10T04:53:11.973
> 
> 标签：cryptography, aes, mifare, message-authentication-code

谁能帮我指导 Mifare Desfire 的 MAC（4 字节）和 CMAC（8 字节）的计算？我得到了意想不到的结果。

```
Deskey      =   0000000000000000
Block1(B1)  =   1122334455667788
Block2(B2)  =   9900112200000000
IV          =   0000000000000000
sessionkey  =   2923be84b1495461

R1 = Enc(B1 xor IV)         f2f13994d24714ca
R2 = Enc(R1 xor B2)         880fe38ab9e8a8d3
MAC   880fe38a

Expected MAC =  c8d70ad2 95a88a36 
```

**CMAC结果**

```
AESKey          =       00000000000000000000000000000000
Block           =       000102030405060708090a0b0c0d0e0f
Enc(Block)      =       7aca0fd9bcd6ec7c9f97466616e6a282
SubKey1         =       CDD297A9DF1458771099F4B39468565C
SubKey2         =       9BA52F53BE28B0EE2133E96728D0AC3F
CMAC(16bytes)   =       8A57896F795CB6ABF6867DAD41A5FB15 
```

CMAC 是否仅由 DES 和 TDES 生成，例如 DES 加密所有块，除了最后一个块应该像零售 MAC 计算一样进行 TDES 加密吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:12:34.783

关于 MAC 计算，它似乎是数据的 3DES CBC 模式加密，明文填充零和全零 IV。3DES 密钥是通过将会话密钥与 24 个零字节进行异或运算来创建的。这是Java中的示例：

```
import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.DESedeKeySpec;
import javax.crypto.spec.IvParameterSpec;
import javax.xml.bind.DatatypeConverter;

public class MACTest {

  public static void main(String[] args) throws Exception {

    final byte[] keyBytes = new byte[24];
    final byte[] paddedPlaintext = 
        hexStringToByteArray("11223344556677889900112200000000");
    final byte[] iv = new byte[8];
    final byte[] sessionKeyBytes = hexStringToByteArray("2923be84b1495461");

    final byte[] derivedKeyBytes = new byte[24];
    for (int i = 0; i < sessionKeyBytes.length; i++) {
      derivedKeyBytes[i] = (byte) (keyBytes[i] ^ sessionKeyBytes[i]);
    }

    System.out.println(toHexString(derivedKeyBytes));
    SecretKeyFactory factory = SecretKeyFactory.getInstance("DESede");
    SecretKey derivedKey = factory.generateSecret(new DESedeKeySpec(
        derivedKeyBytes));

    Cipher c = Cipher.getInstance("DESede/CBC/NoPadding");
    c.init(Cipher.ENCRYPT_MODE, derivedKey, new IvParameterSpec(iv));
    byte[] result = c.doFinal(paddedPlaintext);
    System.out.println(toHexString(result));
  }

  public static String toHexString(byte[] array) {
    return DatatypeConverter.printHexBinary(array);
  }

  public static byte[] hexStringToByteArray(String s) {
    return DatatypeConverter.parseHexBinary(s);
  }
} 
```

输出：

```
2923BE84B149546100000000000000000000000000000000
F2F13994D24714CA880FE38AB9E8A8D3 
```

您没有提供足够的信息来了解计算 AES CMAC 示例所需的内容，以及您的问题实际是什么。大概你没有得到预期的结果？

# iphone - 确保对象在来自块的延迟调用中存在

> ID：12345504
> 
> 赞同：0
> 
> 时间：2012-09-10T04:53:11.407
> 
> 标签：iphone, ios, ipad, grand-central-dispatch

在下面粘贴的代码中，如何检查/确保在执行对​​“showResultToUser”的调用时对象仍然存在并且我不会调用已发布的对象？

```
__block MyClass pSelf = self;

dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(queue, ^
{
    [pSelf doSomeBackgroundWork];
    dispatch_async(dispatch_get_main_queue(), ^
    {
        [pSelf showResultToUser];
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:59:02.783

你有什么理由使用`__block`而不是`__weak`？您似乎没有更改 的值`self`（无论如何这将是一件奇怪的事情），并且使用弱引用既可以防止任何保留周期，又可以确保如果`pSelf`对象被释放，您的变量将指向`nil`并且您会'不要冒一个糟糕的访问崩溃的风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T00:18:26.897

我认为这个问题被 __block 分配行为以及 pSelf 变量本身是否处于稳定存储中（它是：__block 导致它在堆上分配，即使它是在堆栈框架内声明的）感到困惑。更重要的是，在没有 ARC（你说你没有使用）的情况下，你在将块传递给 dispatch_async() 之前明确地保留这些对象，然后从块中释放它们。请参阅 dispatch_async 的手册页并查找标有“COMPLETION CALLBACKS”的部分，其中正在创建 async_read() 函数作为示例 - 看看目标队列是如何被保留然后释放的？遵循相同的模式将使您摆脱麻烦。

请注意，块内的 ObjC 实例变量对象会自动“免费”获得保留行为（http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxVariables.html），但也有在保留/释放行为中明确表示没有害处，因为它使代码更清晰（恕我直言）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T05:00:10.717

来自苹果开发者网站：

> __block 变量存在于变量的词法范围和在变量的词法范围内声明或创建的所有块和块副本之间共享的存储中。因此，如果在帧内声明的块的任何副本在帧结束后仍然存在（例如，通过在某处排队以供以后执行），则存储将在堆栈帧的破坏中幸存下来。给定词法范围内的多个块可以同时使用一个共享变量。

这意味着它不会被释放。

* * *

除此之外，没有办法检查您的句柄是否引用了有效变量，因为如果它*被*释放，它可能会被另一个有效（但不同）的变量重新使用，您的“测试”会说它没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T05:05:39.593

`__block`您可以通过删除限定变量来防止对象被释放：

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(queue, ^
{
    [self doSomeBackgroundWork];
    dispatch_async(dispatch_get_main_queue(), ^
    {
        [self showResultToUser];
    });
}); 
```

您可能会不必要地延长被引用对象的生命周期，但如果没有其他东西保留它，它将在内部块执行结束时被释放。

# objective-c - 子类中的超类方法放置

> ID：12345512
> 
> 赞同：2
> 
> 时间：2012-09-10T04:54:00.160
> 
> 标签：objective-c, ios, inheritance, initialization

> **可能重复：**
> [我什么时候应该打电话给超级？](https://stackoverflow.com/questions/3906704/when-should-i-call-super)

`[super viewDidLoad]`调用超类方法（如or`[super init]`或）时是否有区别/首选方式`[super viewDidUnload]`？我已经看到教程将它们放在第一行或作为子类方法的最后一行。我只是想知道是否会有任何依赖关系，例如超类方法是否会做一些设置，孩子可以**在预先调用时使用，或者超类方法是否可以对孩子****在最后调用时**所做的事情进行一些优化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T05:18:00.337

我的一般经验法则是，构造/创建`super`行为首先调用，而破坏或拆除状态的行为以相反的顺序发生 -`super`最后调用。很少需要偏离这一点。

原因通常不是为了优化（如您的帖子中所问），而是为了可预测的*语义*。

**示例 A：**

建造：

```
- (id)init
{
  self = [super init]; // << set up super
  if (0 != self) {
    // set up self
  ... 
```

破坏：

```
- (void)dealloc
{
  [ivar release], ivar = 0; // << tear down self
  [super dealloc]; // << tear down super 
```

**示例 B：**

建造：

```
- (void)viewWillAppear:(BOOL)pAnimated
{
  [super viewWillAppear:pAnimated]; // << call through super first
  // now set up self
  ... 
```

破坏：

```
- (void)viewDidDisappear:(BOOL)pAnimated
{
  // tear down self
  [super viewDidDisappear:pAnimated]; // << now tear down super 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:15:53.980

*您必须首先*初始化 super ，因为 super 构造函数可以选择返回 的原始值以外的值`self`。

```
self = [super init]; 
```

如果您`self`在调用 之前初始化 的其他属性`[super init]`，这些更改可能会被删除。

*那到底是为了什么？*

@Justin 指出 Class Clusters（在返回 NSDictionary 或 NSString 的实例时使用）使用此机制根据任务提供略有不同的子类。单例也可以使用它，Objective-C 的（现已弃用）`Pose`功能也可以。

# iphone - 单独拖放图像

> ID：12345517
> 
> 赞同：1
> 
> 时间：2012-09-10T04:55:14.530
> 
> 标签：iphone, ios, ios5

我正在寻找一种在 iOS 中一次拖动图像的方法（而不是一次拖动一堆图像）。我已经问过这样的问题并且确实得到了一些答案，但是没有用。我相信它没有用，因为我的情况可能与预期不同，这就是我发布相同问题的原因。我听说手势可能有用，但我尝试了很多不同类型的代码，但没有得到任何结果。请帮忙。

最亲切的问候。

```
cowKeys = [[NSArray alloc] initWithObjects:@"cow",@"cow1",@"cow2",@"cow3",nil];

-(void) dealcows {

    while (current cow <= 11) {

        currentName = [NSMutableString stringWithFormat:@"%@.png", [cowsShuffled        objectAtIndex:currentCard] ];
        totalcowrValue = totalDealerValue + [[dictionary valueForKey:[cowsShuffled objectAtIndex:currentcow]] intValue];

        UIImageView *imageView = [[UIImageView alloc] init];

        if (currentcow== 1){

            if (autoPlay == YES){
                imageView.image= [UIImage imageNamed:currentName];
            } else {
                imageView.image= [UIImage imageNamed:currentName];
            }

            cow = (UIImageView *)[self.view viewWithTag:11];
            cow.userInteractionEnabled = YES;
            cow1 = (UIImageView *)[self.view viewWithTag:1];
            cow1.userInteractionEnabled = YES;
        }
    }
}

- (void)touchesMoved:(NSSet *)set withEvent:(UIEvent *)event {
    CGPoint a = [[set anyObject] locationInView:self.view];
    CGPoint r = [[set anyObject] locationInView:self.view];
    cow.center = a;

    cow1.center = r;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:18:11.327

添加`UIPanGestureRecognizer`到要移动的 imageView 并将 @selector 添加到该`UIPanGestureRecognizer`. 相信我，我已经用 CALayers 和 subviews 完成了这个动人的事情。它像黄油一样工作。

# asp.net - 使用 Web Matrix 发布站点（安装 SQL Server 管理对象 (SMO)）

> ID：12345522
> 
> 赞同：0
> 
> 时间：2012-09-10T04:55:57.773
> 
> 标签：asp.net, sql-server-2008, umbraco, webmatrix

我在使用网络矩阵发布博客（Umbraco CMS）时遇到问题。它给了我这个信息

> ---- 无法启动
> 
> --- 请安装 SQL Server 管理对象 (SMO)

我搜索了那个错误来解决它，但我找不到任何有用的东西我试图从 SQL Server 2008 安装程序中添加这个功能，但我发现所有功能都已经安装在其中

我也在 MSDN 中搜索过，但这个链接没有太多信息

[http://msdn.microsoft.com/en-us/library/ms162189.aspx](http://msdn.microsoft.com/en-us/library/ms162189.aspx)

我希望你能帮助我解决这个问题。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:47:31.197

您的服务器上似乎没有安装 WebMatrix 兼容性所需的组件。

您可以使用 Web Platform Installer 4.0 下载并安装它们（产品 --> 服务器 --> IIS 推荐配置）。

有关深入的过程描述，请查看[安装服务器组件](http://www.iis.net/learn/web-hosting/joining-the-web-hosting-gallery/install-server-components)。

# android - 在 intellij idea 中生成覆盖方法

> ID：12345523
> 
> 赞同：1
> 
> 时间：2012-09-10T04:56:01.093
> 
> 标签：android, intellij-idea

> **可能重复：**
> [IDEA 和 Eclipse：扩展类时如何自动生成方法](https://stackoverflow.com/questions/9425338/idea-and-eclipse-how-to-automatic-generate-method-when-extends-a-class)

我只是从 eclipse 切换到 intellij 想法。因为它更快，我喜欢每个项目的单个工作区。我的问题是如何在 intellij 中生成方法？就像在 Eclipse 中一样，您将在编辑器中右键单击并像这样导航

![在此处输入图像描述](../Images/3b459a33818702187f7c3df7e648d84c.png)

如何在intellij中做到这一点？谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T05:03:14.583

Ctrl + O （覆盖方法）和 Ctrl + I （实现方法）是您正在寻找的:)

这是备忘单

[http://www.jetbrains.com/idea/docs/IntelliJIDEA_ReferenceCard.pdf](http://www.jetbrains.com/idea/docs/IntelliJIDEA_ReferenceCard.pdf)

祝你好运 ：）

# php - php中的mp3歌曲上传代码无法正常工作

> ID：12345528
> 
> 赞同：0
> 
> 时间：2012-09-10T04:56:30.423
> 
> 标签：php, mp3

我有一个网站，在这里我需要实现一个 php 函数来上传一首歌曲（mp3）并需要播放那首歌曲。我已经做了一个代码。看我的代码

```
if(trim($_FILES['frmFile']['name'])!=""){ 
        if (($_FILES["frmFile"]["type"] == "audio/mpeg" || $ext=="mp3" ||  $ext=="MP3")&& ($_FILES["frmFile"]["size"] < 2000000))
            { 
            if ($_FILES["frmFile"]["error"] > 0)
            {
                $error="Error In Uploading";
                exit;
            }
            else
            {
                $orgFileNmae=$_FILES['frmFile']['name'];
                $uniqname = rand().$fileName.".".$ext;
                 $uploadfile=$uploaddir.$uniqname;

                if(move_uploaded_file($_FILES['frmFile']['tmp_name'], $uploadfile)) {

                }

            }
            }else{
                $error="Invalid file";

            }

            } 
```

我从网上下载了一首 mp3 歌曲，并尝试上传文件，但它显示

> 上传错误，我打印了文件属性，然后我得到了`$_FILES["frmFile"]["error"] =1`

然后我只需在 vLc 和其他播放器中播放下载的代码，它运行良好。那为什么这个文件不能正确上传..

我已经打印了上传的文件数组然后我得到了结果

```
Array ( [name] => blind_willie.mp3 [type] => [tmp_name] => [error] => 1 [size] => 0 ) 
```

有人知道吗 ？

谁有上传mp3歌曲的好代码

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:16:40.910

根据[PHP 文档](http://php.net/manual/en/features.file-upload.errors.php)，上传错误`1`意味着文件太大并且超过了预设的 PHP 最大允许上传文件大小。

您的代码的逻辑流程也是向后的 - 您应该检查的第一件事是`['error']`参数，然后再执行其他任何操作。如果上传失败（或不存在），您可能无法获得有效的文件名，但您仍然可以继续进行，就好像一切正​​常。同样，您相信用户不会提供虚假文件名，并使用该用户提供的文件名作为上传安全的基础。伪造该文件名是微不足道的，允许他们上传他们想要的任何内容，只需重命名`nastyvirus.exe`为`goodsong.mp3`.

```
if ($_FILES['frmFile']['error'] !== UPLOAD_ERR_OK) {
   die("Upload failed with error code " . $_FILES['frmFile']['error']);
}
$finfo = new finfo(FILEINFO_MIME_TYPE);
if($finfo->file($_FILES['frmFile']['tmp_name']) != 'audio/mpeg') {
    die("Invalid file type uploaded");
}
etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:17:31.817

您需要设置以下值以增加文件上传大小

```
file_uploadsile_uploads
upload_max_filesize
max_input_time
memory_limit
max_execution_time
post_max_size 
```

干杯

# java - 将过滤器映射到jsp

> ID：12345530
> 
> 赞同：0
> 
> 时间：2012-09-10T04:56:38.673
> 
> 标签：java, jsp, servlet-filters

如何将过滤器映射到 JSP？我希望当我第一次调用 JSP 时首先调用一个过滤器，然后将请求发送到 JSP。我怎么做 ？

```
<filter>
    <filter-name>Filter-1</filter-name>
    <filter-class>Filters.Filter_1</filter-class>
</filter>
<filter-mapping>
    <filter-name>Filter-1</filter-name>
    <!-- map the filter to jsp . How do I do that ?-->
</filter-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T05:02:55.573

添加唯一标识您的特定 JSP 调用的 URL 模式

```
<filter-name>Filter-1</filter-name>
<url-pattern>YourJsp.jsp</url-pattern> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:03:24.713

```
<filter-mapping>  
   <filter-name>Filter-1</filter-name>  
   <servlet-name>your-Servlet-Name</servlet-name>  
</filter-mapping> 
```

我们可以做所有的 JSP：

```
 <url-pattern>*.jsp</url-pattern> 
```

# php - 用于文件上传和图像大小调整等的 PHP 软件设计模式

> ID：12345544
> 
> 赞同：1
> 
> 时间：2012-09-10T04:59:21.653
> 
> 标签：php, design-patterns, uml

我想知道我应该使用什么模式来实现一个处理文件上传、转换的类和一个处理图像大小调整等的类。

我正在考虑实现（适配器模式）文件类和一个适配器类，ImageResize 类可以使用适配器类中的函数

任何关于我应该使用哪种模式的建议都值得赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:27:43.787

一般来说，我将装饰器模式用于任何转换组合。

![装饰图案](../Images/00d37b01cf64571b5813d59944fa1e1c.png)

在这里，您的“ConcreteComponent”可以是任何完整的过程（如上传），“Decorator”子类是任何单个转换，如“调整大小”、“转换”等。

因此，如果您想调整大小，然后剪辑图像，您可以执行以下操作：

```
process = new Clip(new Resize(new Upload(myImage)));
process->run(); 
```

或者

```
process = new Upload(myImage);  // concrete component
process = new Resize(process);  // decorator
process = new Clip(process);    // decorator
process->run(); 
```

但这不是“THE”解决方案。这取决于您想要达到的目标。也许您可以将其与工作流程结合起来，或者在某种程度上......

# python-3.x - Anjuta 中的 Python3 支持

> ID：12345545
> 
> 赞同：6
> 
> 时间：2012-09-10T04:59:28.333
> 
> 标签：python-3.x, gnome, anjuta

我最近下载并安装了 Anjuta 作为 Python 开发工具。我在 Ubuntu 12.04 平台上使用 Python 3.2.3 进行开发。

[按照Gnome 开发中心](http://developer.gnome.org/anjuta-manual/stable/project-wizard-create.html.en)网站上的“创建新项目”建议，我开始按照说明进行操作，但很快意识到该项目使用的是 Python 2.7（系统默认值）。

我在“编辑首选项”下找到了一个 Python 选项，但是将路径更改为指向我所需的 Python 版本似乎并没有达到预期的效果。现在，每次我打开 Anjuta 时，都会出现一条关于路径配置错误的消息。

我在网上找不到任何关于此的信息。

有没有人有为 Python3 设置 Anjuta 的经验？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-22T03:21:26.583

他不是在问自动完成。虽然这本身就是一个问题。此页面上的答案对我来说都没有解决任何问题。他指的是执行命令。当您执行代码时，它并不总是使用首选项中描述的或您希望它使用的 python 版本。检查 .py 文件的顶部。看看哪里有shebang命令

```
#!/usr/bin/python 
```

将其更改为

```
#!/usr/bin/python3 
```

或任何路径是您选择的解释器的路径。

如果这不存在，请将其放在 .py 文件的顶部，我几乎可以完全保证它会解决您的问题。

我希望这个回应不会太晚，它仍然可以帮助那些迷失和困惑的人。

它为我解决了这个问题。我花了一整天的时间研究，终于通过阅读[https://docs.python.org上的 python 手册弄清楚了这一点](https://docs.python.org)

这些文档中有大量重要信息，请查看！

请让我知道这是否也解决了您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T10:38:20.977

错误消息是否有任何机会提到 python-rope？如果是这样，错误可能与这个库而不是 python 本身有关。我在 Ubuntu 12.04 上，最近安装了 Anjuta & python3，我自己也发现了类似的问题。我将错误追溯到 Anjuta 用于自动完成的 python-rope 库。我从 Ubuntu 存储库安装了 python-rope，但安装的版本仅适用于 python2，所以我必须从[这里](https://pypi.python.org/pypi/rope_py3k)手动安装 python3 端口，并使用 'sudo python3 setup.py install' 安装它（在 lib 目录中课程）。在那之后，Anjuta 不再抱怨了。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-11T18:53:12.683

以下是如何让 Python 3 自动补全在运行于 Xubuntu 12.04 上的 Anjuta 3.4.0 中工作：

```
sudo apt-get install anjuta anjuta-extras python3 python3-pkg-resources 
```

从这里下载最新版本的 python3 绳索：[https](https://pypi.python.org/pypi/rope_py3k) ://pypi.python.org/pypi/rope_py3k 。安装绳索（可能调整版本号）：

```
tar zxvf rope_py3k-0.9.4-1.tar.gz
cd rope_py3k-0.9.4-1/
sudo python3 setup.py install --prefix=/usr --install-lib=/usr/lib/python3/dist-packages
sudo ln /usr/lib/python3/dist-packages/rope_py3k-0.9.4_1-py3.2.egg-info /usr/lib/python3/dist-packages/rope-0.9.4_1-py3.2.egg-info 
```

现在`python3`在命令行中运行并检查这些语句是否有效：

```
import rope
import pkg_resources
pkg_resources.get_distribution('rope').version 
```

现在修补自动完成脚本以在 Python 2 和 3 版本下工作：

```
sudo nano /usr/lib/anjuta/anjuta-python-autocomplete.py 
```

添加第一行：

```
from __future__ import print_function 
```

然后将所有`print blahblah`命令修改为 Python 3 语法`print(blahblah)`。命令位于第`print`124、143 和 144 行。

现在启动 Anjuta 并将 Edit->Preferences->Python->Environment: 指向`/usr/bin/python3`. 重新启动 Anjuta 和自动完成应该可以工作。

如果需要更多调试，请尝试`anjuta`从命令行运行，到达您期望自动完成的位置，然后在终端中查看输出。如果它仍然抱怨`anjuta-python-autocomplete.py`，请尝试`python3`手动运行此脚本。

# android - Android应用程序与。过程

> ID：12345547
> 
> 赞同：5
> 
> 时间：2012-09-10T04:59:50.173
> 
> 标签：android, process, pid

我创建了一个带有一个 Activity 和包名称的 Android 应用程序`"com.explore"`

```
 <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

我运行 ps 命令。

```
USER     PID   PPID  VSIZE  RSS     WCHAN    PC         NAME
app_137   2974  91    478604 48524 ffffffff 00000000 S com.explore 
```

我按下返回按钮。我退出应用程序并进入主屏幕现在再次运行 ps 命令。

```
USER     PID   PPID  VSIZE  RSS     WCHAN    PC         NAME
app_137   2974  91    472428 42572 ffffffff 00000000 S com.explore 
```

进程 2974 仍在运行。有人可以解释一下我的行为吗？那是内存使用情况，状态或进程将持续多长时间？按下后我应该从我的代码中终止进程吗？如何优雅地杀死进程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T05:27:16.217

当您运行一个应用程序时，如果它尚未运行，它会获得一个新的进程 ID。这个 ID 一直存在，直到它完全不在内存中。（这可以通过使用应用程序设置中的“强制停止”选项来实现和测试。）

但是，当用户点击返回或主页按钮时，应用程序不会退出，并且在大多数情况下，只会暂停或停止。

您可以阅读[此文档](http://developer.android.com/reference/android/app/Activity.html#ProcessLifecycle)，其中详细介绍了流程生命周期。第 1 点和第 2 点基本上说，除非绝对必要（强制关闭或没有内存），否则不会终止前台进程（或在某些表面上的进程，例如对话框）。第 3 点很重要；它说任何不再需要的进程——即用户已经“关闭”它——可能会也可能不会被杀死，这取决于设备的内存。最后，第 4 点，任何没有做任何事情，但只是......存在......将尽快被杀死。

您可能还想查看[`Activity`生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)。这将准确地向您显示应用程序的每个步骤何时发生（即何时暂停、何时停止以及何时销毁）。它唯一没有真正涵盖的是内存的过度分配（或方向更改，这会重新触发整个生命周期）。

最后，请记住，Android 是智能的。它比大多数开发人员更好地管理其流程，并尝试保留尽可能多的流程以便于重用。除非您**绝对确定**您希望您的进程内存不足，否则您永远不应该杀死它。而且[我们必须杀死和管理进程的方式从来都不是很好](https://stackoverflow.com/questions/6528231/how-to-force-quit-the-android-app-and-restart-it)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T05:08:43.403

开始阅读[基础知识](http://developer.android.com/guide/components/fundamentals.html)。简而言之，在大多数情况下，您不应该关心进程，Android 会负责自动启动和停止这些进程。杀死进程可能会导致系统重新启动它，因此通常没有什么好处。忘记“任务杀手”和类似的实用程序，它们现在大多没用。

# objective-c - 当字符串太大时，NSLog 在主线程中运行（？）阻塞主线程？

> ID：12345551
> 
> 赞同：0
> 
> 时间：2012-09-10T05:00:09.583
> 
> 标签：objective-c, asynchronous, nslog, appdelegate

当我的应用程序启动时，我需要将一些剩余的数据发送到服务器，所以在

```
applicationDidFinishLaunching 
```

我调用了一种将一些核心数据实体转换为 JSON 文本并将其发送到服务器的方法。有时应用程序崩溃是因为：

> xxxxxx 未能及时启动

我的第一个想法是，当应用程序启动时我正在做一些事情，它阻塞了主线程，然后我意识到这可能不是问题，因为我使用 NSURLConnection 发送异步数据并且不应该阻塞主线程，经过一些测试，我发现当数据很大时，应用程序更容易崩溃，因为连接是异步的，唯一可疑的代码是当我从 Core Data 实体创建 JSON 文本时，我使用 NSLog 打印它，我尝试使用硬编码的大 json 文件，它总是崩溃，如果我注释掉 NSLog 行，它不会崩溃。

根据场景，我想知道：

1.  我在想，NSLog 是否在主线程上运行，而不管它在哪个线程中被调用？然后我在Apple的文档中找到：

> NSLogv 的输出是序列化的，因为一个进程中只有一个线程可以一次执行上述写入/日志记录。在下一个线程可以开始尝试之前，所有写入/记录消息的尝试都已完成。

这是否意味着即使它在非主线程中，但它正在记录一些长字符串，导致主线程被阻塞？

1.  NSLog 的字符串大小是否有任何限制（理论上，实际）？硬编码的 JSON 文件为 150KB。

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T05:34:15.660

使用 GCD 队列并异步转储日志。

粗略地说，您需要创建一个串行队列：

```
lqueue = dispatch_queue_create("com.example.logging", NULL) 
```

使用它写日志：

```
dispatch_async(lqueue, ^{ /* write log here */ }) 
```

我没有对其进行测试，但`NSLog`您可能需要使用 ASL（`asl_*`函数族）来代替。

或者更好的是，只需使用一些解决方案，如[https://github.com/robbiehanson/CocoaLumberjack](https://github.com/robbiehanson/CocoaLumberjack)，它已经完成了所有这些工作等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:52:51.593

我认为您的应用程序正在被 iOS 看门狗计时器杀死。如果您检查错误日志，您应该会看到代码 0x8badf00d。基本上，看门狗计时器会监视应用程序的启动和停止，如果它们花费的时间过长，它就会将它们杀死。它监视的方法之一是 applicationDidFinishLaunching 方法。没有关于您的应用程序必须执行多长时间启动的文档，但它只有几秒钟。

您需要做的是将您的代码移动到另一个方法或后台线程。applicationDidFinishLaunching 应该尽快完成。

在此处搜索 0x8badf00d，您会发现很多关于它的讨论以及组织代码的方法。

# php - php substr() 期望参数 1 是字符串，给定数组

> ID：12345554
> 
> 赞同：1
> 
> 时间：2012-09-10T05:00:18.757
> 
> 标签：php, mysql, arrays, string

嗨，我正在尝试从 mysql 中的特定表中获取列列表，然后根据列生成一个表单，但我不断收到错误，页面只是空白。

```
mysql_select_db($DB_Name) or die(mysql_error());
$query=mysql_query("SHOW COLUMNS FROM mytable") or die (mysql_error());
$j=0;

while($row=mysql_fetch_assoc($query)){
    if(substr($row,0,2)=="S_"){
        echo substr($row,2);?>:<input type="text" name="<?php echo $row;?>" maxlength="<?php echo getlength($j, "mytable");?>" /><?php ?><!--textbox code here --><?php
    }
    $j++;
} 
```

`getlength();`是我编写的一种方法，可以更轻松地获取`length of a field`列。它工作准确。

谢谢

我想我没有提到。由于该站点是动态的，因此该列的名称是未知的。这样做的目的是从特定表中获取列名列表并以有序的方式显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T05:17:28.190

mysql_fetch_assoc 返回一个关联数组。在这种情况下，您很可能会得到一个如下所示的数组：

```
[FIELD] => "Name of the field",
 [Type] => "varchar(32)",
 [Null] => YES,
 [Key] => PRI,
 [Default] => '',
 [Extra] => '' 
```

因此，如果要检查 S_ 的字段名称，则需要将 substr 行更改为

```
substr($row['FIELD'], 0, 2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T05:01:54.053

当您调用 时`substr()`，您当前正在传入`$row`，这是一个数组。您需要在中指定索引`$row`才能返回特定元素，如下所示：

```
 $row['name'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T05:30:07.027

您需要确定要跟踪的列。下面是正确的脚本：

```
<?php
    if(substr($row['some_column'],0,2)=="S_"){
        echo substr($row['some_column'],2);

    }
?> 
```

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T05:19:25.367

代替

```
if(substr($row,0,2)=="S_"){
    echo substr($row,2);?> 
```

和

```
 if(substr($row['FIELD'],0,2)=="S_"){
    echo substr($row['FIELD'],2);?> 
```

# cocos2d-iphone - Cocos2D 连续滚动基于瓷砖的游戏：仅在设备中出现奇怪的闪光

> ID：12345556
> 
> 赞同：1
> 
> 时间：2012-09-10T05:00:35.663
> 
> 标签：cocos2d-iphone

感谢您的帮助和阅读本文。

这是我的来源：[Download_Cocos2d_Continuous_Scrolling_Tile_Based_Game](https://github.com/Gururajtallur/Cocos2d-Tile-game)

其基于连续滚动瓷砖的 cocos2D 游戏。在这个游戏中，tileMaps 是根据需要加载和释放的——第三个瓦片地图是在第一个释放的时候加载的。重复相同的过程。由于加载时间，观察到磁贴滚动中的一些混蛋。所以我使用单独的线程来加载瓷砖地图。这导致屏幕出现奇怪的闪烁......仅在设备中。

1.  我该如何修复这个闪光灯？
2.  如何避免瓷砖滚动中的小混蛋？或任何替代加载方法？

这是加载代码：

```
[NSThread detachNewThreadSelector:@selector(loadTileMapInThread:) toTarget:self withObject:nil];

-(void)loadTileMapInThread:(id)argument
{
    NSAutoreleasePool *autoreleasepool = [[NSAutoreleasePool alloc] init];
    CCGLView *view = (CCGLView*)[[CCDirector sharedDirector] view];
    EAGLContext *auxGLcontext = [[EAGLContext alloc]
                                 initWithAPI:kEAGLRenderingAPIOpenGLES2
                                 sharegroup:[[view context] sharegroup]];

    if( [EAGLContext setCurrentContext:auxGLcontext] ) {

        [self LoadTilesMap];

        glFlush(); //whn I comment this also..flash observed

        [EAGLContext setCurrentContext:nil];
    } else {
        CCLOG(@"cocos2d: ERROR: TetureCache: Could not set EAGLContext");
    }

    [auxGLcontext release];

    [autoreleasepool release];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T20:33:21.237

通过异步加载瓷砖地图，您只是用 cocos2d 没有任何东西要渲染的短时间替换加载时间中断 - 直到加载新的瓷砖地图。我猜线程在这里不是一个修复，它只是给你一个不同的症状来解决同样的问题。

我认为您可以解决此问题的方法是：

*   在需要显示新加载的 tilemap 部分之前开始线程加载某个阈值
*   创建较小的小节瓷砖地图（理想情况下与屏幕尺寸一样小或稍大一些），以便它们加载更快
*   将瓷砖地图预加载到内存中，但为那些不应该渲染的地图设置可见 = NO

如果仅仅因为它们消耗的内存而不能加载所有的瓷砖地图，并且其他选项也不起作用，那么除非你可以实现自己的、内存优化的瓷砖地图系统版本，否则你很不走运。

# angularjs - 将资源动态注入控制器 - angularjs

> ID：12345561
> 
> 赞同：4
> 
> 时间：2012-09-10T05:00:45.567
> 
> 标签：angularjs

这有效：

```
function DetailsCtrl($scope, Plan){
    $scope.entities = Plan.query();
} 
```

这不会：

```
function DetailsCtrl($scope){
    var injector = angular.injector(['myApp.services']);
    var name = 'Plan';
    var Entity = injector.get(name);

    $scope.entities = Entity.query();
} 
```

在第二种情况下，不会引发错误，并且 console.log($scope.entities) 会转储加载的实体。但是变量没有在模板中呈现。我猜在用变量填充 $scope 之前正在加载模板。如果是这样，我如何确保 $scope 及时加载了变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T21:30:27.210

我创建了一个服务来动态加载资源：

服务：

```
var m = angular.module('myApp.services', ['ngResource']).
    factory('Entity',function($resource){
        return {
            Plan: $resource('/api/plans/:id',{id: '@id'})
        }
    }).
  value('version', '0.1'); 
```

控制器：

```
function DetailsCtrl($scope, Entity){
    $scope.entities = Entity['Plan'].query();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T05:07:36.093

是的，情况就是这样。无论作用域是从资源中获取数据还是从 http 调用中获取数据，都会加载 Angular 模板。据我了解，Angular 要么监听 $scope 变量，要么有一些神奇的方法触发模板渲染的重新加载。

在这种情况下，也许 Angular 正在识别一个共享资源服务（计划模型）正在被传入，并且它期望它将用于获取一些数据。在第二个示例中，Angular 不知道您将在其中使用另一个服务，因此它不会为 $scope 变量准备任何回调或检查操作。

如果出于某种原因您为 $scope 变量设置了一个值并且 Angular 没有注意到更改，那么您可以立即更新您的模板，然后您可以调用它：

```
$scope.$digest(); //or $scope.$apply(); 
```

唯一的问题是，如果在它已经执行摘要操作时调用它，它会抛出错误（只需在语句周围使用 try/catch 分支）。

如果这不起作用，那么您将需要仔细检查模板本身是否具有正确的表达式语法。

# forms - JQuery Ajax 表单附加查询字符串

> ID：12345563
> 
> 赞同：1
> 
> 时间：2012-09-10T05:00:49.390
> 
> 标签：forms, jquery

我在将 ajaxSubmit 与[jQuery Form](http://www.malsup.com/jquery/form/)一起使用时遇到问题- 即使在发布表单时，它偶尔也会将所有参数序列化为查询字符串。它们也作为表单数据包含在内，但查询字符串偶尔会超过服务器的最大 url 长度。

如果有某种方法可以防止，有谁知道为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T05:04:38.810

你用过`type`ajaxform吗`POST`_`type``GET`

```
$('#yourFrmId').ajaxForm({
  type : 'Post',
  ...... so on
}); 
```

# asp.net-mvc-3 - mvc3 - facebook喜欢显示索引而不是网站名称

> ID：12345564
> 
> 赞同：1
> 
> 时间：2012-09-10T05:01:10.420
> 
> 标签：asp.net-mvc-3, facebook-like

我正在使用 asp.net mvc3 框架并将我的网站上传到服务器。但是在单击 facebook like 按钮时，它在 facebook 上显示为索引而不是站点名称。我该如何改变呢？还有没有办法在名字前面添加标志？这是我的fb代码：

```
<div class="fb-like" data-href="http://www.example.com/" data-send="false" data-width="450" data-show-faces="false" data-colorscheme="light" data-font="arial"></div> 
```

脸书脚本：

```
<div id="fb-root"></div>
    <script>(function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=*********";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T21:12:43.613

您需要在网站上使用 Open Graph 标记，或者至少需要为您的主页提供一个正确的页面标题。将 OG 标记添加到代表“喜欢的”URL 的任何视图中。

Facebook 向 url 发出一个 http 请求以获取一些元数据，然后他们寻找位于页面标题中的 Open Graph 标签，如果没有找到，它将回退到页面标题和元描述属性。在 Open Graph Tags 部分查看[此页面。](http://developers.facebook.com/docs/reference/plugins/like/)以下是 html 中的开放图形标记实现示例：

```
<head>
<title>My Super site</title>
<meta property="og:type" content="website">
<meta property="og:image" content="http://example.com/my_super_image.jpg">
<meta property="og:title" content="My super site">
</head> 
```

此外，该网站**必须处于生产状态**，以便 Facebook 可以访问该页面。

# facebook - 链接到 Facebook 时间线视图上的年/月页面

> ID：12345567
> 
> 赞同：4
> 
> 时间：2012-09-10T05:01:39.733
> 
> 标签：facebook, facebook-graph-api

有没有办法在时间线视图中创建指向特定月份/年份的链接（即某种锚格式）？

或者通过图形 API 生成链接的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T18:42:01.477

找到了

`http://www.facebook.com/<username>/timeline/2012/8`

# mysql - Mysql 或/和优先级？

> ID：12345569
> 
> 赞同：22
> 
> 时间：2012-09-10T05:01:56.510
> 
> 标签：mysql, operator-precedence

我想知道或/和如何工作？

例如，如果我想获取 display = 1 的所有行

我只能做`WHERE tablename.display = 1`

如果我想要 display = 1 或 2 的所有行

我只能做`WHERE tablename.display = 1 or tablename.display = 2`

但是，如果我想获取 display = 1 或 2 以及**任何**内容、标签或标题包含的所有行怎么办？`hello world`

逻辑将如何发挥作用？

```
Select * from tablename 
where display = 1 or display = 2 and content like "%hello world%" or tags like "%hello world%" or title = "%hello world%" 
```

会是我的猜测。但是我可以通过几种方式阅读它。

它是否读出为：

```
 (display = 1 or display = 2) and (content like "%hello world%" or tags like "%hello world%" or title = "%hello world%") 
```

或作为

```
((display = 1 or display = 2) and (content like "%hello world%")) or (tags like "%hello world%" or title = "%hello world%") 
```

等等

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-10T05:15:34.947

MySQL 文档有一个[很好的页面](http://dev.mysql.com/doc/refman/5.0/en/operator-precedence.html)，其中包含有关哪些运算符优先的信息。

从那个页面，

> 12.3.1\. 运算符优先级
> 
> 运算符优先级显示在以下列表中，从最高优先级到最低优先级。在一行中一起显示的运算符具有相同的优先级。
> 
> ```
> INTERVAL
> BINARY, COLLATE
> !
> - (unary minus), ~ (unary bit inversion)
> ^
> *, /, DIV, %, MOD
> -, +
> <<, >>
> &
> |
> = (comparison), <=>, >=, >, <=, <, <>, !=, IS, LIKE, REGEXP, IN
> BETWEEN, CASE, WHEN, THEN, ELSE
> NOT
> &&, AND
> XOR
> ||, OR
> = (assignment), := 
> ```

所以你原来的查询

```
Select
    *
from tablename 
where
    display = 1
    or display = 2
    and content like "%hello world%"
    or tags like "%hello world%"
    or title = "%hello world%" 
```

将被解释为

```
Select
    *
from tablename 
where 
    (display = 1)
    or (
        (display = 2)
        and (content like "%hello world%")
    )
    or (tags like "%hello world%")
    or (title = "%hello world%") 
```

如有疑问，请使用括号明确您的意图。虽然 MySQL 页面上的信息很有帮助，但如果查询被重新访问，它可能不会立即显而易见。

您可能会考虑以下内容。请注意，我已将 更改`title = "%hello world%"`为`title like "%hello world%"`，因为这更符合您所描述的目标。

```
Select
    *
from tablename 
where
    (
        (display = 1)
        or (display = 2)
    ) and (
        (content like "%hello world%")
        or (tags like "%hello world%")
        or (title like "%hello world%")
    ) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-09-01T00:17:10.370

运行此查询：

```
select 1 or 1 and 0 
```

如果输出为`1`，则表示优先级为：

```
select 1 or (1 and 0) 
```

如果出来了`0`，那么优先级是：

```
select (1 or 1) and 0 
```

剧透：它出来了`1`

也就是说，`AND`s 在 s 之前被评估`OR`，或者正如我喜欢说的，AND 更粘。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T05:04:41.377

您需要为多个`OR`条件使用括号。并且`display = 1 OR display = 2`您可以使用`display IN(1,2)`. 试试这个：

```
SELECT * FROM tableName
WHERE display IN (1,2)
AND (content LIKE "%hello world%" 
OR tags LIKE "%hello world%" 
OR title LIKE "%hello world%") 
```

有关更多信息，请查看[MySQL：运算符优先级](http://dev.mysql.com/doc/refman/5.5/en/operator-precedence.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T05:04:16.657

在所有 SQL 服务器中，`AND`优先于`OR`，因此请记住在 s 周围加上方括号`OR`：

```
select * from tablename 
where (display = 1 or display = 2)
 and (content like "%hello world%" 
      or tags like "%hello world%" 
      or title = "%hello world%") 
```

顺便说一句`(display = 1 or display = 2)`，相当于`display in (1, 2)`.

# javascript - 在 javascript 中使用 split 函数想在页面加载时拆分 url？

> ID：12345571
> 
> 赞同：1
> 
> 时间：2012-09-10T05:02:07.097
> 
> 标签：javascript, jquery

> **可能重复：**
> [在 JavaScript 中获取查询字符串值](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

我有一个如下网址

```
 http://domain_name/?act=SiteVisit 
```

我想拆分此 URL，并希望在页面加载时将行为值放入一个变量中。

```
$('document').ready(function(){
    var mail_link  = window.location;   
    var arrURL     = mail_link.split('='); 
    alert(arrURL[1]);
    return false;
}); 
```

我使用了上面的代码，但它不起作用。但如果我打印并分配我在警报消息中得到的变量，它的工作原理

所以告诉我如何在变量中获取 SiteVisit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:04:05.243

`window.location`不返回任何东西。它应该是`window.location.href`

```
var mail_link  = window.location.href;   
var arrURL = mail_link.split('='); 
alert(arrURL[1]);
return false; 
```

[**看演示**](http://jsfiddle.net/akhurshid/khwjX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T05:10:49.233

您可以使用`location.search`，它代表位置的查询部分（之后的所有内容`?`）：

```
$('document').ready(function(){
    alert(location.search.split('=')[1]); 
}); 
```

如果字符串包含多个参数（例如`?act=SiteVisit&last=yesterday`），您可以将其分解为：

```
var params = {}, srch = location.search.split('&');
for (var i=0;i<srch.length;i+=1){
  var pair = srch[i].split('=');
  params[pair[0]]  = pair[1];
}
// for ?act=SiteVisit&last=yesterday =>
// params.act = 'SiteVisit'
// params.last = 'yesterday' 
```

# ajax - 需要 jQuery 脚本引用才能在“WebGrid”帮助器中启用 Ajax 支持

> ID：12345575
> 
> 赞同：1
> 
> 时间：2012-09-10T05:02:27.667
> 
> 标签：ajax, asp.net-mvc-3

我已经查看了其他解决方案，但我认为它们不适用于我的情况。

问题是一切运行良好并通过代码。当我调试时 - 所有值和一切都正确返回。但是当我查看网络时，它返回给我以下异常：“需要 jQuery 脚本引用才能在 \"WebGrid\" 帮助程序中启用 Ajax 支持。”。

这个想法是，一旦从下拉菜单中进行了选择，我就会尝试更新 webGrid 所属的部分视图。

所以**控制器**：

```
 [HttpGet]
    public ActionResult FilterGrid(string selVal)
    {
        ItemType itemType = db.ItemTypes.FirstOrDefault(type => type.Name == selVal);

        IEnumerable<Item> items = db.Items.ToList().Where(types => types.ItemTypeId.ToString() == itemType.Id.ToString());

        return PartialView("_Grid", items.ToList());
    } 
```

我将**网格作为部分**：

```
<div id="grid">
    @Html.Partial("_Grid", items)
</div> 
```

和**网格**本身：

```
@using ManagerApp.Models
@model IEnumerable<Item>

@{ 
     var grid = new WebGrid(Model.ToList(), rowsPerPage: 5, ajaxUpdateContainerId:"grid");
    }
    @grid.GetHtml(columns: grid.Columns(
            grid.Column(columnName: "Name", header: "Name", format: (item) => @Ajax.ActionLink((string)item.Name, "ItemDetails", new { id = item.Id }, new AjaxOptions() { HttpMethod = "POST", UpdateTargetId="viewData", InsertionMode = InsertionMode.Replace }), style: "gridStyle"),
            grid.Column(columnName: "Price", header: "Price"),
            grid.Column("", format: (item) => @Ajax.ActionLink("Edit", "EditItem", new { id = item.Id }, new AjaxOptions() { HttpMethod = "POST", InsertionMode = InsertionMode.Replace, UpdateTargetId = "viewData" })),
            grid.Column("", format: @<text>@Html.ActionLink("Delete", "DeleteItem", "ItemType", new { id = item.Id }, null)</text>)
 )) 
```

和 ajax 脚本：

```
/// <reference path="jquery-1.5.1.js" />

$(function () {
    $("#GridItemTypes").change(function (event) {
        $.ajax({
            type: 'GET',
            url: "ItemType/FilterGrid",
            data: { selVal: $(this).find("option:selected").html() }
        });

    }
    );
}); 
```

所以它确实通过了所有的选择过滤，并进入局部视图，然后它似乎具有正确的值，但它没有呈现。

我在这里想念什么？

我在页面顶部有我的参考资料，因为将它们放在底部只会破坏我页面上的其他内容，而这个仍然无法正常工作。

我是否尝试发布或获取也没关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:03:06.037

您按什么顺序添加 javascript/jquery 引用？

确保 jquery 引用是最重要的。

```
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/other1.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/other2.js")" type="text/javascript"></script> 
```

# php - 针对不同的 mime 类型调整 PHP 图像大小

> ID：12345584
> 
> 赞同：2
> 
> 时间：2012-09-10T05:03:14.257
> 
> 标签：php, image, resize

我是一个 php 菜鸟，正在尝试创建一个图像大小调整脚本，将上传的图像缩小到更小的尺寸。使用下面的当前脚本，我可以显示原始图像。新的宽度和高度似乎没有注册。任何帮助表示赞赏。

```
 <?php

    if ($_SERVER['REQUEST_METHOD']=='POST') {
      if (isset($_FILES['image']['tmp_name'])) {
        if ($_FILES['image']['error']==0){
        $new_dir = '/PHP_MySQL_Practice/uploaded/images';
        $fullpath = $_SERVER['DOCUMENT_ROOT'].$new_dir;
        if(!is_dir($fullpath)) {
            mkdir($fullpath, 0777, TRUE); 
        }
        //get file name and type(extension)
        $name = $_FILES['image']['name'];
        $type = $_FILES['image']['type'];

        //separate image name after first "dot"
        $separated = explode(".", $name);
        //get string before the dot which was stored as the 1st item in the separated array.
        $first = $separated[0];
        //use php function pathinfo to get extension of image file
        $ext = pathinfo($name, PATHINFO_EXTENSION);
        //concatenate current timestamp (to avoid file overwrites) with the extracted file 'firstname' and add the extension
        $name = time().'_'.$first.'.'.$ext;
        $target = $fullpath.'/'.$name;

        if (move_uploaded_file($_FILES['image']['tmp_name'], $target)) {

            resizeImage($target, $name);
            echo '<img src="' . $target . '"/>';

        }

    }
    else {

        echo 'there was an error in saving ur image file.';
    }
}   
else {

    echo 'ur image could not be uploaded.';
}
    }
    else {
    ?>
<form method="POST" enctype="multipart/form-data">
    <label>upload image: </label>
    <input type="file" name="image" />
    <input type="submit" />
</form> 
    <?php   
    }

    //function to resize image
    function resizeImage($dir, $img) {
list($src_w, $src_h) = getimagesize($dir);
$max_w = 150;
$max_h = 150;
if ($src_w > $max_w) {
    $ratio = $max_w / $src_w;
    $new_img_w = $src_w * $ratio;
}
else if ($src_h > $max_h) {
    $ratio = $max_h / $src_h;
    $new_img_h = $src_h * $ratio;
}
$img_mime_type = getimagesize($dir);
switch ($img_mime_type['mime']) {
    case 'image/jpeg':
    case 'image/pjpeg':
        $src = imagecreatefromjpeg($dir);
        return $src;
        break;
    case 'image/gif':
        $src = imagecreatefromgif($dir);
        return $src;
        break;
    case 'image/png':
        $src = imagecreatefrompng($dir);
        return $src;
        break;
    default:
        return FALSE;
        break;
}
$new_img = imagecreatetruecolor($new_img_w, $new_img_h);
imagecopyresampled($new_img, $src, 0, 0, 0, 0, $new_img_w, $new_img_h, $max_w, $max_h);
switch ($img_mime_type['mime']) {
    case 'image/jpeg':
    case 'image/pjpeg':
        imagejpeg($new_img, $dir, 100);
        break;
    case 'image/gif':
        imagegif($new_img, $dir);
        break;
    case 'image/png':
        imagepng($new_img, $dir);
        break;
    default:
        return FALSE;
        break;
}

imagedestroy($src);
imagedestroy($new_img);
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T05:11:12.270

那里有一些缺陷

1.  `imagegif`只有2个参数`$im`和保存位置
2.  `imagepng`压缩级别从 0 到 9 而不是 100
3.  您没有保存图像，`null`应该`imagejpeg($new_img, null, 100);`更改为`$dir`
4.  你的最后一个功能`imagdestroy($src);`是错误的，应该是`imagedestroy($src);`

你`switch`应该是：

```
switch ($img_mime_type['mime']) {
    case 'image/jpeg':
    case 'image/pjpeg':
        imagejpeg($new_img, $dir, 100);
        break;
    case 'image/gif':
        imagegif($new_img, $dir);
        break;
    case 'image/png':
        imagepng($new_img, $dir);
        break;
    default:
        return FALSE;
        break;
} 
```

你的调整大小功能：

```
function resizeImage($dir, $img) {
    //echo $dir; die;
    list($src_w, $src_h) = getimagesize($dir);
    $max_w = 150;
    $max_h = 150;
    if ($src_w > $max_w) {
        $ratio = $max_w / $src_w;
        $max_w = $src_w * $ratio;
    }
    else if ($src_h > $max_h) {
        $ratio = $max_h / $src_h;
        $max_h = $src_h * $ratio;
    }
    $img_mime_type = getimagesize($dir);
    $src = imagecreatefromstring(file_get_contents($dir));
    $new_img = imagecreatetruecolor($max_w, $max_h);
    imagecopyresampled($new_img, $src, 0, 0, 0, 0, $max_w, $max_h, $src_w, $src_h);
    switch ($img_mime_type['mime']) {
        case 'image/jpeg':
        case 'image/pjpeg':
            imagejpeg($new_img, $dir, 100);
            break;
        case 'image/gif':
            imagegif($new_img, $dir);
            break;
        case 'image/png':
            imagepng($new_img, $dir);
            break;
        default:
            return FALSE;
            break;
    }

    imagedestroy($src);
    imagedestroy($new_img);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:09:37.557

您不是在保存图像，而是在输出图像的内容。如果您查看 imagejpeg 的文档，您会看到第二个参数是您要保存图像的路径。因此，将您的第二个参数（null）更改为您想要保存调整大小的图像的任何位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T05:13:42.673

使用以下函数调整图像大小

```
function image_resize($image, $maxWidth, $maxHeight = null)
{
        $file = $image;
        $file_headers = @get_headers($file);

        //validate file not exists
        if( isset($file_headers[0]) && strpos($file_headers[0], '404') ) {
            return;
        }

    $arrayUploadPath = wp_upload_dir();
    $fileUploadSubDir = str_replace(basename($image),'', str_replace($arrayUploadPath['baseurl'], '', $image));
    $fileUploadDir = $arrayUploadPath['basedir'] . $fileUploadSubDir;

    //validate sour ce file existance
    if(!file_exists($fileUploadDir . basename($src))) return null;

    $fileUploadUrl = $arrayUploadPath['baseurl'] . $fileUploadSubDir;
    $srcFileName = $fileUploadDir . basename($image);
    $srcSize = getimagesize($srcFileName);
    $width = $srcSize[0];
    $height = $srcSize[1];

    if( empty($maxHeight) ) {
        $size = wp_constrain_dimensions($width, $height, $maxWidth);
        $maxHeight = $size[1];
    }

    //fix for image_resize_dimensions() constraint in image_resize() function
    if($maxHeight >= $height) $maxHeight = $height - 1;

    $newImage = image_resize($srcFileName, $maxWidth, $maxHeight);

    $newFileNameUrl = !empty($newImage) && !is_object($newImage) ? $fileUploadUrl . basename($newImage) : null;

    return $newFileNameUrl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T05:57:46.430

试试这个功能...

在此函数中，您可以根据需要传递高度和宽度，因为共有三种可能性可以按比例调整图像大小

1.  如果高度大于宽度，那么您必须根据高度调整大小。
2.  如果宽度大于宽度，那么您必须调整宽度。
3.  调整高度和宽度。

这是示例，

```
//first of all get Height and width of image 

 function getHeight($image) {
    $sizes = getimagesize($image);
    $height = $sizes[1];
    return $height;
}

//You do not need to alter these functions
function getWidth($image) {
    $sizes = getimagesize($image);
    $width = $sizes[0];
    return $width;
} 
```

现在在这里调整所需的尺寸我正在使用 500px（高度和宽度都）

```
 $width = $this->getWidth($fullpath);
    $height = $this->getHeight($fullpath);

     $profilecroppedthumb = UPLOAD_PATH."FILENAME_WITH_EXTENSION";
     $fullpath = $uploadDirectory.$filename.'.'.$ext;

        if ($width >= 500 && $height >= 500) {
            thumb($fullpath, $profilecroppedthumb, "500", "500");
        }
        elseif($width >= 500 && $height <= 500)
        {
            thumb($fullpath, $profilecroppedthumb, "500", "");
        } 
        elseif($width <= 500 && $height >= 500)
        {
            thumb($fullpath, $profilecroppedthumb, "", "500");
        }
        else
        {
            $target = fopen($profilecroppedthumb, "w");
            fseek($temp, 0, SEEK_SET);
            stream_copy_to_stream($temp, $target);
            fclose($target);
        } 
 function thumb($file, $save, $width="", $height="")
{   
    //GD-Lib > 2.0 only!
    //@unlink($save);

    //get sizes else stop

    if (!$infos = @getimagesize($file)) {
    //echo $infos = @getimagesize($file); exit('saf');
        return false;
    }

    // keep proportions
    $iWidth = $infos[0];
    $iHeight = $infos[1];
    $iRatioW = $width / $iWidth;
    $iRatioH = $height / $iHeight;

    if($height == "" ) {
        if ($iRatioW < $iRatioH) {
                $iNewW = $iWidth * $iRatioW;
                $iNewH = $iHeight * $iRatioW;
            } else {
                $iNewW = $iWidth * $iRatioW;
                $iNewH = $iHeight * $iRatioW;
            }
    }
    elseif ($width == "")
    {
    if ($iRatioW < $iRatioH) {
                $iNewW = $iWidth * $iRatioH;
                $iNewH = $iHeight * $iRatioH;
            } else {
                $iNewW = $iWidth * $iRatioH;
                $iNewH = $iHeight * $iRatioH;
            }
    }
    else 
    {
        if ($iRatioW < $iRatioH) {
            $iNewW = $iWidth * $iRatioW;
            $iNewH = $iHeight * $iRatioW;
        } else {

            $iNewW = $iWidth * $iRatioH;
            $iNewH = $iHeight * $iRatioH;

        }
    }
    //$iNewW = $width;
    //$iNewH = $height;

    //Don't resize images which are smaller than thumbs
    if ($infos[0] < $width && $infos[1] < $height) {
        $iNewW = $infos[0];
        $iNewH = $infos[1];
    }

    if($infos[2] == 1) {
        /*
        * Image is typ gif
        */
        $imgA = imagecreatefromgif($file);
        $imgB = imagecreate($iNewW,$iNewH);

        //keep gif transparent color if possible
        if(function_exists('imagecolorsforindex') && function_exists('imagecolortransparent')) {
            $transcolorindex = imagecolortransparent($imgA);
                //transparent color exists
                if($transcolorindex >= 0 ) {
                    $transcolor = imagecolorsforindex($imgA, $transcolorindex);
                    $transcolorindex = imagecolorallocate($imgB, $transcolor['red'], $transcolor['green'], $transcolor['blue']);
                    imagefill($imgB, 0, 0, $transcolorindex);
                    imagecolortransparent($imgB, $transcolorindex);
                //fill white
                } else {
                    $whitecolorindex = @imagecolorallocate($imgB, 255, 255, 255);
                    imagefill($imgB, 0, 0, $whitecolorindex);
                }
        //fill white
        } else {
            $whitecolorindex = imagecolorallocate($imgB, 255, 255, 255);
            imagefill($imgB, 0, 0, $whitecolorindex);
        }
        imagecopyresampled($imgB, $imgA, 0, 0, 0, 0, $iNewW, $iNewH, $infos[0], $infos[1]);
        imagegif($imgB, $save);        

    } elseif($infos[2] == 2) {
        /*
        * Image is typ jpg

        */
        $imgA = imagecreatefromjpeg($file);
        $imgB = imagecreatetruecolor($iNewW,$iNewH);
        imagecopyresampled($imgB, $imgA, 0, 0, 0, 0, $iNewW, $iNewH, $infos[0], $infos[1]);
        imagejpeg($imgB, $save,100);

    } elseif($infos[2] == 3) {
        /*
        * Image is typ png
        */
        $imgA = imagecreatefrompng($file);
        $imgB = imagecreatetruecolor($iNewW, $iNewH);
        imagealphablending($imgB, false);
        imagecopyresampled($imgB, $imgA, 0, 0, 0, 0, $iNewW, $iNewH, $infos[0], $infos[1]);
        imagesavealpha($imgB, true);
        imagepng($imgB, $save,100);
    } else {
        return false;
    }

    return true;
} 
```

希望这有助于...

# scheme - 模与位运算

> ID：12345587
> 
> 赞同：1
> 
> 时间：2012-09-10T05:03:24.610
> 
> 标签：scheme, bit-manipulation, modulo

以下哪种方法更有效（在Scheme中，但我想没关系）？（目标是获得最低有效位）

`(define (lsb n) (- n (bitwise-and n (- n 1))))`

`(define (lsb n) (remainder n 2))`

（对于那些不熟悉 Scheme 的人。

```
int lsb (int n)
{
    return n % 2;
} 
```

对比

```
int lsb (int n)
{
    return n - (n & (n - 1));
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T04:12:28.723

如果 DIV 在新的 CPU 中变得更高效，它肯定不会比按位运算更快，而且在大多数架构上，可能会从余数中剔除（这意味着 div 指令）

如果你只关心 lsb 为什么不这样写：

```
(define (lsb n)
   (bitwise-and 1 n)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T15:06:01.323

你写的问题不正确。您正在尝试比较不同功能的性能。例如，对于 n == 2，您的第一个函数返回零，而第二个返回 2。

所以，如果你想优化这两个功能，那么它们是：

第一个：

```
return n & 1; 
```

第二：

```
return n & -n; 
```

# iphone - 处理媒体文件 - IOS

> ID：12345590
> 
> 赞同：0
> 
> 时间：2012-09-10T05:03:50.630
> 
> 标签：iphone, ios, cocoa-touch, media, record

我正在开发与视频会议相关的应用程序。我已经探索了如何录制音频和视频并使用 UIPickerViewcontroller 进行了测试，这里我的问题是 UIPickerViewController 将捕获音频和视频并自行创建任何文件并存储在特定位置，但是我不想要我的应用程序的文件，我需要原始数据，以便在记录自己时我必须通过服务器将该数据传输给其他用户（不想在本地存储）。我一直在探索 AV Foundation，我的方向是否正确？AV基础会适合我的需要吗？或者我需要在哪里集中注意力？

非常感谢您的任何建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T04:45:48.843

经过一番探索，我开始使用 AVAssertwriter 来捕获帧并进行处理。

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput 
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer 
       fromConnection:(AVCaptureConnection *)connection 
```

这是一个委托方法，使用它来捕获缓冲区（sampleBuffer）并对其进行处理。

# iphone - 如何转换流式音频格式以使其在 ios 上运行

> ID：12345594
> 
> 赞同：0
> 
> 时间：2012-09-10T05:04:11.637
> 
> 标签：iphone, ios, core-audio

我正在寻找一种方法来转换 .ogg 扩展音频流链接，以便它在 iOS 上工作。

我想实时转换音频并通过 iphone 播放。

这是一个例子：http: [//upload.wikimedia.org/wikipedia/en/b/b5/Radiohead_-_Pyramid_Song_%28sample%29.ogg](http://upload.wikimedia.org/wikipedia/en/b/b5/Radiohead_-_Pyramid_Song_%28sample%29.ogg)

我正在使用[https://github.com/mattgallagher/AudioStreamer](https://github.com/mattgallagher/AudioStreamer)这个代码用于 POC 关于这个任务。请建议我如何实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T06:26:45.440

Mpmovieviewcontroller 播放器是下载流数据然后播放相同数据的好例子。

你必须搜索它并实施它。它对我来说工作得很好。

# java - Eclipse 导入现有 Android 应用程序失败

> ID：12345597
> 
> 赞同：-5
> 
> 时间：2012-09-10T05:04:26.977
> 
> 标签：java, android, eclipse

> **可能重复：**
> [Eclipse Hell。. . 读取项目描述文件（.project）失败](https://stackoverflow.com/questions/12345276/eclipse-hell-failed-to-read-the-project-description-file-project)

我尝试使用导入功能导入现有应用程序，但我在下面弹出错误。我会很感激任何帮助。

![在此处输入图像描述](../Images/09ebba1add66821463ba7f2dbff01cbe.png)

.Project 文件的内容

```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
    <name>NFCFakeProjects</name>
    <comment></comment>
    <projects>
    </projects>
    <buildSpec>
        <buildCommand>
            <name>com.android.ide.eclipse.adt.ResourceManagerBuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>com.android.ide.eclipse.adt.PreCompilerBuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>org.eclipse.jdt.core.javabuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>com.android.ide.eclipse.adt.ApkBuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
    </buildSpec>
    <natures>
        <nature>com.android.ide.eclipse.adt.AndroidNature</nature>
        <nature>org.eclipse.jdt.core.javanature</nature>
    </natures>
</projectDescription> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:06:49.683

如果您有原始项目的备份，请尝试替换位于 Andriod 项目根目录中的 .project 文件。或者，尝试打开 .project 文件并检查任何无效内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:11:02.143

.project 文件存在一些问题来克服这个问题创建**`new android project`**然后复制您现有的**`src`**和**`res`**文件夹并将其放入新创建`project`的应该返回您的项目。

# windows-8 - 在 Windows 8 应用商店应用的 ItemView 中更改所选项目的背景颜色

> ID：12345599
> 
> 赞同：3
> 
> 时间：2012-09-10T05:04:33.927
> 
> 标签：windows-8, microsoft-metro

我在我最近的 Windows 8 应用程序中使用 ItemView，但是，所选项目具有这种令人讨厌的蓝色/紫色背景，我更愿意用更适合该应用程序的东西替换它。

不幸的是，由于这是一个 Windows 8 应用程序，文档非常有限，超出了微软自己的范围，我的搜索没有发现任何有用的东西。

我想知道是否有人在“以前称为 Metro 的界面”应用程序中弄清楚了如何做到这一点。

我用 C# 编写了我的应用程序。

编辑：解决方案

您可以将资源添加到您的 App.xaml ResourceDictionary。如果它们与控件使用的资源的名称匹配，它们将覆盖该值。这适用于所有控件，而不仅仅是 ItemView。被覆盖的资源也将出现在 Blend 中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T05:37:02.760

要覆盖所选项目的默认紫色重音，您需要覆盖资源字典中的一些画笔并提供您自己的颜色：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- overrides -->
    <SolidColorBrush x:Key="ListViewItemSelectedPointerOverBackgroundThemeBrush" Color="#00FFFFFF" />
    <SolidColorBrush x:Key="ListViewItemSelectedPointerOverBorderThemeBrush" Color="#80FFFFFF" />
    <SolidColorBrush x:Key="ListViewItemSelectedBackgroundThemeBrush" Color="#40FFFFFF" />

</ResourceDictionary> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:11:55.923

我发现这个更好：

```
<SolidColorBrush x:Key="ListViewItemSelectedPointerOverBackgroundThemeBrush" Color="Transparent" />
<SolidColorBrush x:Key="ListViewItemSelectedPointerOverBorderThemeBrush" Color="Transparent"  />
<SolidColorBrush x:Key="ListViewItemSelectedBackgroundThemeBrush" Color="Transparent" /> 
```

# ruby - 在Ruby中提取URI最后一段的最佳方法

> ID：12345602
> 
> 赞同：24
> 
> 时间：2012-09-10T05:04:46.597
> 
> 标签：ruby, string, uri, string-parsing

给定 URI 字符串，例如：

```
http://www.somesite.com/abc
http://www.somesite.com/alpha/beta/abc
http://www.somesite.com/alpha/abc 
```

`abc`在 Ruby 中获取这些 URI 末尾的最优雅的方式是什么？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-09-10T05:13:52.333

我会使用适当的 URI 解析器，比如[URI 模块](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html)之一来从 URI 中获取路径。然后将其拆分`/`并获取它的最后一部分：

```
require 'uri'

URI(uri).path.split('/').last 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-10T05:10:28.540

```
uri.split('/')[-1] 
```

或者

```
uri.split('/').last 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-03-25T20:16:57.817

虽然此处答案中建议的所有用法`split`都是合法的，但我认为[@matsko 的答案](https://stackoverflow.com/questions/12345602/best-way-to-extract-last-segment-of-uri-in-ruby#answer-12345659)是具有更清晰代码的答案：

```
last = File.basename(url) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-10T05:11:27.700

试试这些：

```
if url =~ /\/(.+?)$/
  last = $1
end 
```

或者

```
last = File.basename(url) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-27T08:33:53.250

从终端命令行：

```
ruby -ruri -e "print File.basename(URI.parse('$URI').path)" 
```

从您的 .rb 源内部：

```
require 'uri'
theURI = 'http://user:pass@example.com/foo/bar/baz/?lala=foo'
uriPathTail = File.basename(URI.parse(theURI).path) # => baz 
```

它适用于您拥有的任何合法的 theURI。

如果不使用 URI.parse()，则 url 的任何参数都将被错误地视为 URI 的最后一段。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-02T20:20:43.060

如果该值是任何轨道字符串 + URI，那么下面的解决方案应该可以工作。

首先，从字符串中提取 URI：

```
uri_string = URI.extract("Test 123 http://www.somesite.com/abc") 
```

上面的命令返回一个数组

然后使用提取 URI 的最后一部分

```
uri_string[0].split('/').last 
```

先决条件：需要将“uri”添加到ruby脚本中

# .net - Azure WebRole MVC4 安装问题

> ID：12345603
> 
> 赞同：1
> 
> 时间：2012-09-10T05:04:53.583
> 
> 标签：.net, azure, asp.net-mvc-4

我正在尝试将 ASP .NET MVC4 应用程序部署到 Windows Azure，我有一个安装 MVC4 的启动任务。但是我的角色没有上线，部署状态是：

等待角色启动...系统启动任务正在运行

站点已部署...

正在恢复...

等待角色启动...系统启动任务正在运行

站点已部署...

正在恢复...

等待角色启动...系统启动任务正在运行

站点已部署...

正在恢复...

这一直在发生。

我注意到的另一件有趣的事情是，如果我 RDP 进入角色实例，那么角色就会变为就绪状态。

任何人都有一个想法，这里出了什么问题？

谢谢阿努

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T15:40:16.050

As Sandrino mentioned, startup tasks can cause this. Whenever I see that pattern, it seems that most of the time I have assemblies referenced that are on on the Azure VM that I am being deployed to.

There is a tool out there: [http://gacviewer.cloudapp.net/](http://gacviewer.cloudapp.net/) that will compare assemblies in your csproj file with the current Azure OS version to locate any assemblies that will need to be marked as CopyLocal=true. Note that this tool is looking at osfamily=2\. VS defaults to creating osfamily=1 in your cscfg file.

This seems highly likely to me since you are deploying an MVC 4 project probably with a version of EntityFramework that is not on the Azure VM.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:49:03.127

我得到了解决方案，问题是运行启动任务以安装 MVC4 的用户（我认为它的“系统”）的许可。我已更新我的启动脚本 (installmvc4-main.cmd) 以执行以下操作：

1.  创建另一个脚本“installmvc4-impl.cmd”，该脚本调用 power shell 脚本“installmvc4.ps1”，执行策略设置为不受限制。

2.  创建一个 powershell 脚本“installmvc4.ps1”以使用包中包含的安装程序安装 mvc4（我从[http://www.microsoft.com/en-us/download/details.aspx?id=30683](http://www.microsoft.com/en-us/download/details.aspx?id=30683)下载了它）

3.  创建一个用户，将其添加到管理员组并安排一个任务以使用此用户运行“installmvc4-impl.cmd”。

这里的脚本'installmvc4-main.cmd'：

```
REM 创建dos脚本 installmvc4-impl.cmd 调用powershell脚本安装MVC4

如果 "%%EMULATED%%"=="true" 回显转到 :EOF > %~dp0installmvc4-impl.cmd
echo powershell -ExecutionPolicy Unrestricted %~dp0installmvc4.ps1 ^> installmvc4.ps1.log 2^>^&1 >> %~dp0\installmvc4-impl.cmd
回声退出 ^/B 0 >> %~dp0installmvc4-impl.cmd

REM 创建powershell脚本 installmvc4.ps1 安装MVC4

echo 调用表达式“%~dp0AspNetMVC4Setup.exe /q /norestart”> %~dp0installmvc4.ps1

REM 创建一个管理员用户并使用此用户安排任务以运行安装 MVC4 的脚本

网络用户 anuchandy 管理员！@#123 /add
网络本地组管理员 aunchandy /add
schtasks /CREATE /TN "install-mvc4-task" /SC ONCE /SD 01/01/2020 /ST 00:00:00 /RL HIGHEST /RU anuchandy /RP Admin!@#123 /TR "%~dp0\installmvc4 -impl.cmd" /F
schtasks /RUN /TN "install-mvc4-task"

```

注意：确保 srartup 任务 installmvc4-main.cmd 的字符编码为 ANSI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:08:43.270

这可能是由导致问题的启动任务或您的 Web 应用程序无法正常工作引起的。由于诊断模块可能需要几分钟才能将日志发送到您的存储帐户，我建议您通过 RDP 连接并查看事件查看器（在应用程序下）以查看发生了什么（查找错误和警告）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-14T13:00:47.560

您的启动脚本文件最后应该有 EXIT /B 0 命令。

# android - 更改表格行字体颜色

> ID：12345604
> 
> 赞同：0
> 
> 时间：2012-09-10T05:04:55.043
> 
> 标签：android

我为我的比赛取得了高分`activity`。我使用表格行来输出分数。我的问题是如何更改表格行中字体的颜色，因为我看不到输出是什么。

这是我的布局代码：

```
<TableLayout
        android:id="@+id/data_table"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:visibility="invisible"
        >

        <TableRow android:visibility="invisible" >

            <TextView
                android:layout_marginLeft="65dp"
                android:visibility="invisible"
                android:text="#"
                android:textColor="#000000" />

            <TextView
                android:visibility="invisible"
                android:text="Score"
                android:textColor="#000000" />

            <TextView
                android:visibility="invisible"
                android:text="Player"
                android:textColor="#000000" />

        </TableRow>
    </TableLayout> 
```

这是我的高分输出的颜色`activity`。

![在此处输入图像描述](../Images/fc2d41f7926d81ed76228843a9d2d089.png)

我如何将灰色的变为黑色？

这是我添加表格的方法：

```
{
            TableRow tableRow= new TableRow(this);

            ArrayList<Object> row = data.get(position);

            TextView idText = new TextView(this);
            idText.setText(row.get(0).toString());
            tableRow.addView(idText);

            TextView textOne = new TextView(this);
            textOne.setText(row.get(1).toString());
            tableRow.addView(textOne);

            TextView textTwo = new TextView(this);
            textTwo.setText(row.get(2).toString());
            tableRow.addView(textTwo);

            dataTable.addView(tableRow);
        } 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:46:23.143

You need to assign a text color when you create the `TextView`s programmatically, because Android will use its default (grey) color otherwise. Black is `0xFF000000`.

```
TextView textOne = new TextView(this);
textOne.setTextColor(0xFF000000);
textOne.setText(row.get(1).toString());
tableRow.addView(textOne); 
```

Note that you may want to [use a color resource](https://stackoverflow.com/questions/3668958/how-to-set-color-for-the-textview-in-android) for this to keep it consistent with your other `TextView`s.

# emacs - 使用 org-mode 导出时，目录 div 位置错误

> ID：12345605
> 
> 赞同：4
> 
> 时间：2012-09-10T05:05:04.753
> 
> 标签：emacs, org-mode, bibtex

**环境：** Ubuntu 12.04 32bit。带有内置组织模式的 Emacs 24。在另一个几乎相同的 emacs 配置（家用笔记本）
上复制。`ubuntu 12.04`设置如下： http: [//www.mail-archive.com/emacs-orgmode@gnu.org/msg11528.html](http://www.mail-archive.com/emacs-orgmode@gnu.org/msg11528.html)

**目标：**在 .org 中使用`\cite{}`并导出为 html。

```
#+TITLE: bug

#+LINK: bib file:bibref.bib::%s

#+BIBLIOGRAPHY: bibref plain limit:t

* Heading
Table of content position in exported html is wrong. \cite{Yang2012} 
```

在 html 导出中，`table-of-content`div 被插入到其他块中，这经常会弄乱显示。有没有人注意到同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:32:19.137

org 模式允许直接控制目录的位置，如[http://orgmode.org/manual/Table-of-contents.html](http://orgmode.org/manual/Table-of-contents.html)。只需在第一个标题前插入 [TABLE-OF-CONTENTS]。

# android - 在android中按下主页按钮后应用程序未打开主要活动

> ID：12345607
> 
> 赞同：2
> 
> 时间：2012-09-10T05:05:08.280
> 
> 标签：android, android-activity

在我的应用程序活动 A 中调用活动 B。在活动 BI 中按主页按钮。一段时间后，应用程序被杀死。但是当我再次打开我的应用程序时，即使应用程序之前被杀死，它也会打开 B 而不是活动 A。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:12:22.907

通常，当您按下主页按钮时，您当前的活动不会被操作系统杀死。为了解决你的问题放置这个

```
android:noHistory="true" 
```

在 Activity B 标签的清单文件中。您的活动不会被记住，当您下次运行应用程序时，它会将您带到活动 A

# mysql - 执行有和没有查询 MYSQL

> ID：12345608
> 
> 赞同：1
> 
> 时间：2012-09-10T05:05:12.930
> 
> 标签：mysql

我可以在一个查询中得到 2 个结果吗？

例如：我有以下查询。

```
SELECT * 
FROM table1 JOIN table2 ON table1.id = table2.id 
WHERE table1.user_id = $var; 
```

我想要的第一个结果是`WHERE table1.user_id = $var`. 第二个结果是没有`WHERE table1.user_id = $var`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:17:24.107

您是否希望`userid`等于的结果位于不等于`$var`的结果之上？`userid``$var`

```
SELECT * 
FROM   table1 
       JOIN table2 
           ON table1.id = table2.id 
ORDER BY IF(table1.user_id = $var, 0 , 1) ASC 
```

# node.js - Node.js 中对 API 的异步调用模式

> ID：12345611
> 
> 赞同：8
> 
> 时间：2012-09-10T05:05:37.583
> 
> 标签：node.js, asynchronous, express

构建我的第一个“严肃”Node.js 项目（使用 Express）。

我需要对几个 REST API 进行多次调用，收集所有结果，对它们进行处理并将完整的 JSON 返回给客户端（HTML5 + AJAX）。

1.  调用 API A
2.  调用 API B
3.  再次调用 API A（来自 B 的结果）
4.  将 3 次调用的结果处理为 JSON
5.  response.send(结果)

我确定/希望有一个简单的模式、解决方案或模块，我只是没有正确地用谷歌搜索:) 我也希望对在哪里放置这些操作（在“路线”下？单独的文件？ ETC。）

谢谢你的时间！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T06:02:27.747

[异步](https://github.com/caolan/async)模块适合这种工作。具体来说，您可以使用[async.waterfall](https://github.com/caolan/async#waterfall)函数。

例子：

```
async.waterfall([
    function(callback){
        callback(null, 'one', 'two');
    },
    function(arg1, arg2, callback){
        callback(null, 'three');
    },
    function(arg1, callback){
        // arg1 now equals 'three'
        callback(null, 'done');
    }
], function (err, result) {
   // result now equals 'done'    
}); 
```

编辑，如果您在作业之间有一些重要的依赖关系，那么您可以使用[async.auto](https://github.com/caolan/async#auto)。它将根据功能的要求确定运行功能的最佳顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T06:04:41.263

周围有很多控制流库。我在以前的项目中使用过 Q，对此我没有任何抱怨，但是我可能会考虑在我的下一个项目中使用 caolan 的异步库。

[https://github.com/caolan/async](https://github.com/caolan/async)

根据您上面的描述，您可能想看看使用并行函数

[https://github.com/caolan/async#parallel](https://github.com/caolan/async#parallel)

您描述的问题可以很容易地转移到文档中的并行示例

编辑：我错过了关于 API 调用依赖的一点。每当您需要沿链传递值并控制您需要使用瀑布方法的顺序时（请参阅 qiao 的答案）。如果存在调用独立的情况，您将使用并行方法。下面是并行方法的一个示例

```
async.parallel({
    google: function(callback){
      http.get("http://www.google.com", function(res){
        console.log("google done");
        callback(null, res.statusCode);
      })
    },
    yahoo: function(callback){
      http.get("http://www.yahoo.com", function(res){
        console.log("yahoo done");
        callback(null, res.statusCode);
      })    
    }
  },
  function(err, results) {
    if(!err){
      console.log("all done");
      console.log(results.google);
      console.log(results.yahoo);
    }else{
      console.log(err);
    }
  }
); 
```

这样做的目的是让您的所有请求并行处理，并在它们全部完成后给您一个回调。这是您可以处理数据的地方。

控制流库列表：

[https://github.com/joyent/node/wiki/Modules#wiki-async-flow](https://github.com/joyent/node/wiki/Modules#wiki-async-flow)

# c# - 有没有办法“尝试解析”一个字符串到 System.Globalization.CultureInfo

> ID：12345614
> 
> 赞同：5
> 
> 时间：2012-09-10T05:06:07.197
> 
> 标签：c#, cultureinfo

在 C# 中，我正在使用

```
CultureInfo.GetCultureInfo(myCulture) 
```

但是字符串变量的格式可能不是很好，有没有办法先尝试解析字符串或先验证它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T05:10:50.117

以下产生了所有文化的集合：

```
CultureInfo.GetCultures(CultureTypes.AllCultures) 
```

从那里，而不是`GetCultureInfo`你可以做的：

```
.FirstOrDefault(c => c.Name == myCulture) 
```

而不是`AllCultures`您可能想要过滤掉[`SpecificCultures`](http://msdn.microsoft.com/en-us/library/system.globalization.culturetypes.aspx).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-26T09:45:49.603

没有文化对象的tryparse。一种方法是按照建议遍历所有文化并寻找一种，另一种方法是使用简单的 try 解析：

```
try
{
    // making sure the lang is a calture
    System.Globalization.CultureInfo c = new System.Globalization.CultureInfo(lang);
}
catch
{
    lang = Session["lang"].ToString();
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-10T05:13:25.607

我总是在我的项目中使用一个小帮手。所有算术类型都有 TryParse 方法

```
public static bool TryParseDouble(this string text, out double value)
{
   return double.TryParse(text, NumberStyles.Any,
                          CultureInfo.InvariantCulture, out value);
} 
```

用途

```
double value;
bool isStringOK = theString.TryParseDouble(out value); 
```

# jquery - 从 Facebook 灯箱弹出窗口中删除灰色边框

> ID：12345620
> 
> 赞同：1
> 
> 时间：2012-09-10T05:06:57.450
> 
> 标签：jquery, html, facebook

[如何删除 Facebook 灯箱弹出http://jsfiddle.net/pyqNg/](http://jsfiddle.net/pyqNg/)周围的深灰色边框

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T05:13:28.880

就这样改

```
.mdbox-title {border:20px solid white;}   //or specify .mdbox-title{border:0px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:15:33.707

所以你会[喜欢这个](http://jsfiddle.net/pyqNg/1/)

```
 $('.mdbox-title').css("border","0px solid #DDDDDD"); 
```

# opengl-es - OpenGL中的插值是什么？

> ID：12345622
> 
> 赞同：10
> 
> 时间：2012-09-10T05:07:09.477
> 
> 标签：opengl-es

我刚开始学习 OpenGL ES 2.0，在这个过程中我遇到了一些对我来说没有意义的术语，即使有定义。像这个：**插值**

从*OpenGL ES 2.0 Programming Guide*一书中，我看到了**插值**的定义：

> 用于从分配给图元的每个顶点的变化值为每个片段生成变化值的机制称为插值。

虽然我理解[这个答案](https://stackoverflow.com/a/5249475/668963)`Linear Interpolation`的含义，但上面的定义对我来说没有意义。

您能否换一种说法并举例说明什么是插值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-10T11:16:07.867

至于“换句话说”的一般定义，您可以在网上找到一些。例如，我可以尝试向您解释：

当您有有限数量的数据试图表示无限数量的数据时，您使用插值，例如，您有 2 个点代表一条线：

对于插值，你总是需要一个表示的提示，在行的情况下你需要 2 个点（提示是“它是一条线”），假设它们是向量 A 和 B。现在解决方案是`T(s) = A + s*(B-A)`任何实数 's'在两个方向都获得无尽的线路。要在 A 和 B 之间找到一条线，您需要在区间 [0, 1] 上定义“s”，以便`T(0)=A`while`T(1)=B`和这是线性插值。

对于更复杂的插值，您可以稍微研究一下 openGL：

请注意，在 GL 和您的 GPU 中使用的算法比我在这里要写的要复杂和优化得多，但通常具有相同的结果。

在形状的情况下，您通常使用由 3 个向量（顶点）定义的三角形，并说它是一个三角形（您在绘制方法中说“三角形”）。在将一些矩阵应用于这些向量之后，您将在绘图缓冲区上获得它们的 2d 投影（可能发生在顶点着色器中）。现在您需要用一些颜色、纹理或颜色插值填充缓冲区中的所有这些点。首先，所有这些绘制点（实际上它们在缓冲区上的位置）都是线性插值机制的结果（您在 GL 中无法控制它）。其次，填充什么颜色通常又是线性插值：

尝试通过设置颜色指针来绘制具有不同颜色顶点的三角形。您将在整个表面上获得一个非常平滑的颜色幽灵，这是根据位置插值进行颜色线性插值的结果（您会在片段着色器中为需要绘制的每个像素获得位置插值结果）。您可以像这样手动实现这种颜色插值结果：

输入：

```
Vector a, b, c; //original triangle positions
Vector interpolationABC; //current fragment interpolation between a, b and c
Color colorA, colorB, colorC; //colors for vectors a, b and c 
```

输出（此片段的颜色）：

```
Color output = (
(a - interpolationABC).length() * colorA + 
(b - interpolationABC).length() * colorB + 
(c - interpolationABC).length() * colorC ) 
/ (
(a - interpolationABC).length() + 
(b - interpolationABC).length() + 
(c - interpolationABC).length() ); 
```

这种机制再次代表线性插值（实际上非​​常慢，但它应该可以解决问题并且非常易读）

至于非线性插值的示例，您需要一点想象力：假设我们正在绘制一个球体。为了保持简单，假设它的中心在 (0,0,0) 中，半径为 1。球体是用 N 个三角形创建的，如果 N 不够大（大多数情况下）由于性能问题，它是有点“前卫”，我们想把它弄平一点。所以我们必须打开一些灯（无论如何它只是一个没有灯的圆圈）并弄清楚如何设置法线。一方面，您可以计算由 3 个点定义的曲面的法线，每个三角形将具有唯一的法线，但会产生“迪斯科球”效果，另一方面，您知道球体的任何点“P”的法线是`normalized(P-center)`或者在这种情况下是点本身。所以每个顶点法线是顶点的位置本身（所以现在每个三角形都有3个不同的法线），每个片段的法线是这些法线的插值：

如果您使用与颜色相同的插值机制，您会发现法线的长度不是“恒定的”，从而导致缺陷，迫使您使用不同的机制（非线性）。在这种特定情况下，您可以简单地对这些线性片段结果进行归一化并获得所需的结果，但在这种特定情况下，您也可以从片段位置计算法线（您可以对任何数学上可呈现的形状执行此操作）。但是知道在实践中你会得到一个奇怪的形状，它有光滑的部分和边缘，并且可能有不同大小的法线来代表一些很棒的效果，这就是为什么有很好的机制可以在形状上插入不同的参数。

同样，插值机制是一种通过只知道有限数量的数据就可以产生无限数量结果的机制（其中一种机制称为“线性插值”）。或者换句话说，正如您发布的更具体的示例：

> 用于从分配给图元的每个顶点的变化值为每个片段生成变化值的机制称为插值。

# r - 从 sys.time 中获取数字

> ID：12345628
> 
> 赞同：2
> 
> 时间：2012-09-10T05:08:01.913
> 
> 标签：r, concatenation

是否有一种更有效/更优雅的方法来执行以下操作，其中我将输出中的所有数字连接`Sys.time()`起来

```
x <- as.character(Sys.time())
paste0(substr(x,0,4),substr(x,6,7),substr(x,9,10),substr(x,12,13),substr(x,15,16),substr(x,18,20)) 
```

它可能包括以某种方式粘贴和折叠，但不知道该怎么做......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T05:17:24.500

您可以使用格式文字`strftime()`将`POSIXct`对象转换为字符：

```
strftime(Sys.time(), "%Y%m%d%H%M%S")
[1] "20120910061602" 
```

有关`?strftime`要使用的字符串文字的详细信息，请参阅。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-10T06:19:31.463

我本来以为`format`是第一选择：

```
format(Sys.time(), "%Y%m%d%H%M%S")
[1] "20120909231732" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-10T05:17:03.983

您可以只去除非数字字符：

```
gsub("[^0-9]","",x)
[1] "20120910151242" 
```

# java - 如何在android中的地图上的地理点之间绘制虚线？

> ID：12345629
> 
> 赞同：0
> 
> 时间：2012-09-10T05:08:04.533
> 
> 标签：java, android

我已经参考了这里的链接[Drawing dotted (....)trail path 而不是线 (________)](https://stackoverflow.com/questions/10185445/drawing-dotted-trail-path-instead-of-a-line)，在

```
Bitmap bmp = BitmapFactory.decodeResource(this.getResources(),R.drawable.greenflag);
Bitmap bmp = BitmapFactory.decodeResource(this.getResources(),R.drawable.redflag); 
```

在drawble.greenflag中，是图像文件还是xml文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:11:55.380

用它在两个地理点之间画线

```
class MyOverlay extends Overlay 
{
  public MyOverlay() {
  }
  public void draw(Canvas canvas, MapView mapv, boolean shadow) {
   super.draw(canvas, mapv, shadow);
   Paint mPaint = new Paint();
   mPaint.setDither(true);
   mPaint.setColor(Color.RED);
   mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
   mPaint.setStrokeJoin(Paint.Join.ROUND);
   mPaint.setStrokeCap(Paint.Cap.ROUND);
   mPaint.setStrokeWidth(100);
   for (int i = 0; i < numPoints - 1; i++) {
    float latiA = (float) Double.parseDouble(latlong[i].getLat());
    float longiA = (float) Double.parseDouble(latlong[i].getLon());
    float latiB = (float) Double.parseDouble(latlong[i + 1].getLat());
    float longiB = (float) Double.parseDouble(latlong[i + 1].getLon());
    //distance = getDistance(latiA, longiA, latiB, longiB);
    int latA = (int) (1000000 * Double.parseDouble(latlong[i].getLat()));
    int longA = (int) (1000000 * Double.parseDouble(latlong[i].getLon()));
    int latB = (int) (1000000 * Double.parseDouble(latlong[i + 1].getLat()));
    int longB = (int) (1000000 * Double.parseDouble(latlong[i + 1].getLon()));
    GeoPoint gP1 = new GeoPoint(latA, longA);
    GeoPoint gP2 = new GeoPoint(latB, longB);
    Point p1 = new Point();
    Point p2 = new Point();
    Path path = new Path();
    projection.toPixels(gP1, p1);
    projection.toPixels(gP2, p2);
    path.moveTo(p2.x, p2.y);
    path.lineTo(p1.x, p1.y);
    canvas.drawPath(path, mPaint);
   }
    }
} 
```

# objective-c - 将字符串转换为二进制

> ID：12345632
> 
> 赞同：0
> 
> 时间：2012-09-10T05:08:15.063
> 
> 标签：objective-c, json

我从 web 服务收到响应为 json 字符串，我希望它将该字符串转换为二进制。

有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:14:13.953

```
char s[255] = "JSON String value";
//for each character, print it's binary aoutput
int i,c,power;
for ( i=0 ; s[i]!='\0' ; i++ )
 {
  //c holds the character being converted
  c = s[i];
  //for each binary value below 256 (because ascii values < 256)
  for ( power=7 ; power+1 ; power-- )
  //if c is greater than or equal to it, it is a 1
  if ( c >= (1<<power) )
   {
     c -= (1<<power); //subtract that binary value
     printf("1");
   }
   //otherwise, it is a zero
  else
     printf("0");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:15:37.803

您可以使用来自 NSString 对象的 dataUsingEnconding 消息：

[数据使用编码：](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/dataUsingEncoding%3a)

# c# - 为windows手机开发锁屏

> ID：12345637
> 
> 赞同：-2
> 
> 时间：2012-09-10T05:08:39.277
> 
> 标签：c#, windows-phone-7

我还是初级水平。但我真的很期待如何使用 Visual Studio SDK 或 Blend 4 创建锁屏壁纸。真的需要你们的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:18:12.780

您不能使用 C# 代码更改锁屏壁纸。虽然您可以使用创建图像`WritableBitmap`并将其保存到`PicturesHub`，但用户可以自己更改锁屏壁纸。希望以下链接对您有所帮助：[http ://forums.silverlight.net/t/184613.aspx/1](http://forums.silverlight.net/t/184613.aspx/1)

# lisp - 通过在球拍中设计一个解释器来重写这个脚本

> ID：12345647
> 
> 赞同：5
> 
> 时间：2012-09-10T05:10:20.570
> 
> 标签：lisp, scheme, racket

原来的脚本是这样的：

```
#lang racket
(for ([i (in-range 3)])
    (for ([j (in-range 9)])
      (display "X"))
     (display "\n"))

(for ([i (in-range 6)])
  (for ([j (in-range 3)])
    (display " "))
  (for ([j (in-range 3)])
    (display "X"))
  (for ([j (in-range 3)])
    (display " "))
  (display "\n"))

(for ([i (in-range 3)])
    (for ([j (in-range 9)])
      (display "X"))
     (display "\n")) 
```

输出是：

```
XXXXXXXXX
XXXXXXXXX
XXXXXXXXX
   XXX   
   XXX   
   XXX   
   XXX   
   XXX   
   XXX   
XXXXXXXXX
XXXXXXXXX
XXXXXXXXX 
```

我想知道是否可以使用这样的 DSL 重写它：

```
(define a
  "3 9 X
6 3 b 3 X 3 b
3 9 X") 
```

进而：

```
(interpret a) 
```

绘制此图。

有谁知道最好的方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T19:15:30.623

要解决这样的问题，首先要描述一种数据类型，它可以在 DSL 中捕获您想要的操作，而不是专注于表面语法。一旦掌握了数据类型，您应该可以更轻松地解决问题。

乍一看，我们可以用您的语言设计 3 种基本形式：

1.  字符串
2.  重复
3.  测序

我们可以用原始字符串和结构来表示这个不相交的类。让我们将这个类作为一个整体称为“pexpr”，即“可打印的 expr”。在代码中：

```
;; An pexpr is one of the following:
;;   * a primitive string,
;;   * a seq, or
;;   * a repeat
(struct seq (bodies) #:transparent)    ;; bodies is a list of pexpr
(struct repeat (n body) #:transparent) ;; n is a number, body is a pexpr 
```

将一些辅助函数设为缩写可能会有所帮助，因为“seq”和“repeat”本身有点冗长。

```
;; For convenience, we define some abbreviations s and r for seq and repeat,
;; respectively.
(define (s . bodies)
  (seq bodies))
(define (r n . bodies)
  (repeat n (seq bodies))) 
```

您的示例“I”字符串可以这样写：

```
(define an-example
  (s
   (r 3 (r 9 "X") "\n")
   (r 6 (r 3 " ") (r 3 "X") "\n")
   (r 3 (r 9 "X") "\n"))) 
```

请注意，此编码具有换行符的显式表示，仅从表面语法来看，换行符是隐式的。然后解析器的工作就是在表面语法中提取行并将它们转换为 pexpr，但这应该不会太难。希望。:)

无论如何，*解释*函数就变成了为这样的模板填写详细信息的问题：

```
(define (interpret pexpr)
  (match pexpr
    [(? string?)
     ...]
    [(struct seq (bodies))
     ...]
    [(struct repeat (n body))
     ...])) 
```

'...' 应该很容易填写。

这种解决这类问题的方法在[如何设计程序](http://www.ccs.neu.edu/home/matthias/HtDP2e/)和[编程语言：应用程序和解释](http://www.cs.brown.edu/~sk/Publications/Books/ProgLangs/)中有所描述。我建议看看它们：它们是好东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T06:35:51.810

当然，这看起来可行。这是一个解析问题，主要是。我会像这样打破它。您的每条输入行都指定一个输出行块。在 Racket 中找出一种表示它的好方法。做一些例子，以确保它涵盖了您希望它涵盖的内容。接下来，我可能会编写呈现这些块之一的函数。大多数情况下，我会先做一个，这样我才能满意地看到输出。然后，我会编写一个函数来获取这些块规范的列表并将它们全部输出。然后，我将编写一个解析单行输入的函数。看起来您可以使用空格（例如，使用“regexp-split”）拆分这些行，然后使用临时解析器处理这些列表。这是我认为我最有可能出错的部分，而且我 d 在编码之前编写一堆测试用例。最后，您需要一个函数在输入的每一行上调用此解析器，然后将生成的块规范发送到显示函数。

# c# - 重新分配给枚举变量不起作用

> ID：12345649
> 
> 赞同：0
> 
> 时间：2012-09-10T05:10:34.510
> 
> 标签：c#, enums, variable-assignment

我在一个类中有一个枚举类型的静态变量。

```
public enum SomeEnum
{
    UnwantedValue,
    DesiredValue
}

public class SomeClass
{
    public static SomeEnum Variable;
    ...
} 
```

我想在别处重新分配变量，但无论出于何种原因，分配对其值没有影响。

```
public class OtherClass
{
    public OtherClass()
    {
        // SomeClass.Variable defaults to SomeEnum.UnwantedValue

        SomeClass.Variable = SomeEnum.DesiredValue;

        // SomeClass.Variable still equals SomeEnum.UnwantedValue
    }

    public void Foo()
    {
        SomeClass.Variable = SomeEnum.DesiredValue;
        // This does not work either
    }
} 
```

显式分配枚举的值没有效果。

```
public enum SomeEnum
{
    UnwantedValue = 0,
    DesiredValue = 1
} 
```

在初始化时为变量赋值是唯一有效的时间赋值，但我仍然无法在其他地方更改值。

```
public static SomeEnum Variable = SomeEnum.DesiredValue; 
```

我不知道为什么我不能重新分配这个变量的值。

编辑：将变量更改为实例类型允许我像往常一样重新分配它的值。

```
public SomeEnum Variable; // This fixes the problem 
```

但是，这是不可行的，因为它在单例类中使用并且需要保持静态（如果有人想告诉我我需要单例，该类旨在处理跨系统资源的争用）整个应用程序；枚举类型用作资源状态的标志）。

[注意：我提到了[这个问题](https://stackoverflow.com/questions/6834441/what-could-cause-an-assignment-to-not-work)，但它没有解释为什么不能重新分配变量。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:14:06.597

回答这个问题有点困难，因为您显示的代码并不是您遇到问题的确切代码。我感觉这里少了一些东西。不过，这可能有助于使事情更清楚：

尝试在包含枚举的类中创建方法`SetSomeEnum()`，`GetSomeEnum()`并将枚举本身设为私有。严格来说，这应该不会对逻辑产生任何影响。但是，它应该使调试更容易，因为您将能够逐步完成并更清楚地看到正在进行哪些调用等。

```
private static SomeEnum _myEnum;

public static void SetSomeEnum(SomeEnum value){
    _myEnum = value;
}

public static SomeEnum SetSomeEnum(SomeEnum value){
    return _myEnum;
} 
```

**编辑：**再想一想，这里可能更可取一个属性：

```
public SomeEnum MyEnum
{
    get { return _myEnum }
    set { _myEnum = value; }
} 
```

# xmpp - 如何在 xp 上配置/安装 xmpp 服务器

> ID：12345655
> 
> 赞同：1
> 
> 时间：2012-09-10T05:11:03.550
> 
> 标签：xmpp

我想在我的机器上配置 XMPP 服务器（Microsoft Windows xp 专业版），请告诉我如何继续。我在哪里可以下载它以及安装的所有步骤。

谢谢迪帕克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T08:25:14.117

在 Windows XP 上安装 XMPP/Jabber 服务器的最简单方法是安装[Openfire](http://www.igniterealtime.org/projects/openfire/index.jsp)。这是[指南](http://www.igniterealtime.org/builds/openfire/docs/latest/documentation/install-guide.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:44:25.723

这里有一个适用于 Windows 的 ejabberd 安装程序：http: [//www.process-one.net/en/ejabberd/downloads/](http://www.process-one.net/en/ejabberd/downloads/)

它适用于 Windows XP 吗？

# java - 如何从Java程序执行命令

> ID：12345661
> 
> 赞同：0
> 
> 时间：2012-09-10T05:11:33.583
> 
> 标签：java, selenium

我需要执行这个命令来停止 selenium 服务器。

```
wmic path win32_process Where "CommandLine Like '%selenium-server%'"  Call Terminate 
```

从我的java程序。我试过了

```
Runtime.getRuntime().exec("command as a single string escaped") 
```

和

```
Runtime.getRuntime().exec(String[]) 
```

但它没有被执行。当我从 cmd 执行相同的命令时，它工作正常。有人可以帮忙吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:22:08.083

转义/处理空格最好使用[ProcessBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:20:35.537

你可以尝试使用[这个](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5B%5D,%20java.lang.String%5B%5D,%20java.io.File%29)：

```
public Process exec(String[] cmdarray, String[] envp, File dir) 
  throws IOException 
```

> 在具有指定环境和工作目录的单独进程中执行指定的命令和参数。

[然后使用process.waitFor()](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html#waitFor%28%29)方法等待进程结束。

# sql - 计数和查询

> ID：12345670
> 
> 赞同：1
> 
> 时间：2012-09-10T05:12:24.973
> 
> 标签：sql

请检查下表：

```
Id    Code     Name      State       District     Status   
-----------------------------------------------------------
1     10001    ABC       Gujarat     Jamnagar       1
2     10002    BCA       Gujarat     Amreli         0
3     10003    XYZ       NJ          ACX            1
4     10001    VBC       Gujarat     Jamnagar       1 
```

我在下面有疑问

```
SELECT STATE,
    District,
    SUM(CASE 
            WHEN STATUS = 0
                THEN 1
            ELSE 0
            END) Active,
    SUM(CASE 
            WHEN STATUS = 1
                THEN 1
            ELSE 0
            END) InActive
FROM TableA
GROUP BY STATE,
    District 
```

现在它将返回以下结果给我

```
State   District  Active  InActive
------------------------------------
Gujarat  Jamnagar   0       2
Gujarat  Amreli     1       0
NJ       ACX        0       1 
```

但我需要计算相同的单行`Code`，所以它将返回`InActive`1 `State` `Gujarat`而`District` `Jamnagar`不是 2。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:16:48.567

Rater than `SUM`, select `MAX`，因此这些值不会聚合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T05:25:34.037

您如何清楚地选择子查询中的所有列？

```
SELECT STATE,
    District,
    SUM(CASE 
            WHEN STATUS = 0
                THEN 1
            ELSE 0
            END) Active,
    SUM(CASE 
            WHEN STATUS = 1
                THEN 1
            ELSE 0
            END) InActive
FROM (
    SELECT DISTINCT STATE,
        District,
        STATUS
    FROM tableA
    ) a
GROUP BY STATE,
    District 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/acd4b/2)

# android - 从android中的其他活动获取和设置值微调器

> ID：12345671
> 
> 赞同：0
> 
> 时间：2012-09-10T05:12:32.217
> 
> 标签：android

我有这样的代码-mainclass-

```
 Spinner pilihtype;
 ArrayAdapter<CharSequence> adapter = 
 ArrayAdapter.createFromResource(this, R.array.typestore, android.R.layout.simple_spinner_item);

 adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
 pilihtype=(Spinner)findViewById(R.id.Stype);
 pilihtype.setAdapter(adapter); 
```

它显示了我的微调器值并且有效

现在我有一个也有微调器的编辑类。我想要我的微调器从 mainclass 中的选定值编辑类 setvalue，你能给我一个解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:29:00.793

```
Spinner pilihtype;
ArrayAdapter<CharSequence> adapter =  ArrayAdapter.createFromResource(this, R.array.typestore, android.R.layout.simple_spinner_item);

adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
pilihtype=(Spinner)findViewById(R.id.Stype);
pilihtype.setAdapter(adapter); 
```

从您当前的活动

```
Intent i = new Intent(YourActivity.this, nextActivity.class);
Bundle bundle = new Bundle();
bundle.putString("SpinnerValue",pilihtype.getSelectedItem().toString());
i.putExtras(bundle);
StartActivity(i); 
```

在您的下一个活动中

```
Bundle bundle = getIntent().getExtras();
String selectedItem = bundle.getString("SpinnerValue"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:21:31.900

您可以将选定的值作为“附加”的一部分传递给您的 Intent。`intent.putExtra()`, `intent.getExtra()`.

# instagram - 只接收特定用户的实时订阅更新？

> ID：12345672
> 
> 赞同：1
> 
> 时间：2012-09-10T05:12:41.377
> 
> 标签：instagram

我已经使用实时 API 成功订阅了某个标签。当我使用我的帐户（即链接到我的开发者密钥的帐户）拍照时，我会立即收到通知。但是，当朋友使用相同的标签时，我根本不会收到*任何*通知。我检查了服务器日志 - 根本没有对我的订阅 url 的请求。我究竟做错了什么？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T09:51:20.847

订阅可以推送。如果这不起作用，请使用拉动 - 频率由您决定。通常，限制为 30 个呼叫/小时。所以每次通话大约 2 分钟。您可以设置一个 cron 作业以每 2 分钟拉一次媒体 api :)

# ember.js - Emberjs 容器视图，如何从容器中按名称选择子视图。当以编程方式添加子视图时

> ID：12345673
> 
> 赞同：2
> 
> 时间：2012-09-10T05:13:03.220
> 
> 标签：ember.js

如何从容器中按名称选择子视图。当以编程方式添加子视图时。

```
aContainer = Ember.ContainerView.create({

  });

AnotherViewClass = Ember.View.extend({
    template: Ember.Handlebars.compile("Another view")
  });

aContainer.get('childViews').pushObject(AnotherViewClass.create());
var selectedView = aContainer.get('bView'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:38:23.013

添加后可以将子视图名称设置为容器，如下所示：

```
var bView = AnotherViewClass.create();

aContainer.get('childViews').pushObject(bView);
aContainer.set('bView', bView); 
```

在这一步之后，你可以通过名称获取它：

```
var selectedView = aContainer.get('bView'); 
```

请参阅此工作示例： http: [//jsfiddle.net/tualatrix/FEvSc/1/](http://jsfiddle.net/tualatrix/FEvSc/1/)，控制台将输出正确的子视图。

# terminal - 屏幕：找不到“xterm-256color”的 terminfo 条目

> ID：12345675
> 
> 赞同：51
> 
> 时间：2012-09-10T05:13:14.107
> 
> 标签：terminal, osx-lion

当我跑

```
screen 
```

在远程主机（运行 Linux）上，我收到以下错误：

```
Cannot find terminfo entry for 'xterm-256color'. 
```

我在 Mac OSX Lion 上运行终端来访问远程主机。我已经用谷歌搜索了这个问题的解决方案，似乎人们建议这样做

```
export TERM=xterm-color 
```

这对我不起作用。

请帮忙。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-11-26T08:57:18.393

找出支持的 TERM：

```
ls /usr/share/terminfo/x 
```

这将为您提供受支持的术语列表，即

```
xterm
xterm-xfree86 
```

设置环境变量：

```
export TERM=xterm-xfree86 
```

并运行屏幕：

```
TERMINFO='/usr/share/terminfo/' screen 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-25T21:23:55.080

在您用于 ssh 的终端应用程序中，转到首选项 -> 高级 -> 将终端声明为： -> xterm-color（或 xterm-256color 之外的其他内容）

此答案取自对该帖子的评论，该帖子有另一个解决方案： [http ://marcoschuh.de/wp/?p=873](http://marcoschuh.de/wp/?p=873)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-04-11T17:43:35.727

对于我的 Buffalo Linkstation，我是这样解决的：

```
cd /lib/terminfo/x
ln -s xterm-color xterm-256color 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-04-12T05:23:28.340

您在`terminfo`远程计算机上缺少与“xterm-256color”匹配的文件。

Screen 不知道如何模拟您要求的终端（xterm-256color），因为它没有描述您正在使用的终端的文件（xterm-256color）。

您可以更改 ENV 变量`TERM`以请求远程机器拥有的终端仿真。例如：`export TERM=vt220`，但这会假设你的遥控器有一个 vt220 terminfo 文件，你不会得到漂亮的颜色，你必须做其他乏味的事情才能让它坚持下去。更好的...

如果您的本地机器有 terminfo 文件，但您的远程机器没有，例如，linux/macos 与 QNAP/QNAS/busybox/rpi/router/modem/IOTdevice 通话，那么...

您可以将必要的文件复制到它并指示您的远程终端将其用于屏幕。例如：

```
[local] $ scp /lib/terminfo/x/xterm-256color john@nasbox:xterm-256color
[local] $ ssh john@nasbox
[remote] $ ls
xterm-256color
[remote] $ TERMINFO='/share/homes/john/xterm-256color' screen 
```

此时屏幕应该可以工作。您的本地计算机可能在`terminfo`其他地方有该目录（`/etc/terminfo/`并且`/usr/share/terminfo/`是常见的替代方案；您可能需要四处寻找才能找到您的目录）。

要对其进行更永久的设置，请将其移至主目录中的“.terminfo”目录（如果您知道得更好，也可以在其他地方）。例如：

```
[remote] mkdir -p .terminfo/x
[remote] mv xterm-256color .terminfo/x
[nasbox] screen 
```

相同的技术应该适用于其他终端仿真。ENV 变量`TERM`决定了它应该尝试模拟哪个终端，并且同名文件提供了使这一切发生的魔法代码。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-05-15T13:15:28.880

我以前使用默认的 Mac OS X 终端应用程序通过 ssh 访问我的基于 Ubuntu 的 tmux，发现了你描述的问题 - 我的 bash 和 tmux 设置为 screen-256color，这个选项甚至不在 Mac 的列表中终端首选项。

我尝试添加该行：

```
export TERM=screen-256color 
```

作为启动命令，但它被忽略并在启动时被 xterm-color 覆盖。

我还设法将 Mac 终端的设置更改为 screen-256color，方法是选择 Shell > Export Settings，然后编辑它生成的 XML 文件，找到 xterm-color 行并将其更改为 screen-256color，然后选择 Shell > Importing this设置文件。然而，在启动终端后，我发现它*仍然*用 xterm-color 覆盖了这个设置。

所以我承认并下载了[iTerm2](http://www.iterm2.com/#/section/home)，它允许我通过在纯文本字段中输入来更改 screen-256color 设置（而不是从有限的下拉菜单中选择）。这可以立即生效*，甚至无需关闭并重新打开控制台*。

所以总而言之，我建议使用 iTerm2 而不是默认的 Mac 终端（它似乎不允许您对 $TERM 进行更改）。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-05-22T07:02:34.250

您可以`ncurses-term`在远程服务器 (Debian/Ubuntu) 上安装以解决此问题。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-10-05T03:48:20.823

I was able to change Mac OSX(10.7.5) terminal(v2.2.3, 303.2) emulation from the menu Terminal>Preferences>Settings>Advanced>Emulation Declare terminal as xterm-color

Opening a new terminal ssh connection enabled the new setting.

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-09-10T05:22:44.057

您可能需要在 Linux 主机上安装一个软件包，该软件包提供以下文件之一：

```
/usr/share/terminfo/x/xterm-256color
/lib/terminfo/x/xterm-256color 
```

例如，在 Ubuntu 上，这是由`ncurses-base`软件包提供的。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-07-23T17:49:16.840

另一种情况，例如从内部升级到 Debian Buster `screen`。

Terminfo`xterm-256colour`格式已更改，因此`screen`无法恢复之前的会话。

您可以使用`export TERM=xterm`关闭屏幕会话，然后重新启动屏幕。这次它将使用正确的 terminfo 文件，因此它会成功。

来源：[https ://bugs.debian.org/cgi-bin/bugreport.cgi?bug=901843](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=901843)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-26T08:44:58.080

在问题中，用户的配置要求提供不是默认的终端描述**`screen`**。这最终由 Apple 的更新解决。在问题中引用的版本中，Apple 没有提供该终端描述。他们现在这样做（并且自 2015 年以来一直如此）。作为记录，这里是一个目录列表，显示了 MacPorts (in `/opt/local`)、本地构建的 ncurses (in `/usr/local`) 和 Apple/system 文件的相关条目`/usr/share`：

```
-rw-r--r--   1 root         1912 Oct  3 2015    opt/local/share/terminfo/73/screen-256color
-rw-r--r--   1 root         1924 Oct  3 2015    opt/local/share/terminfo/73/screen-256color-bce
-rw-r--r--   1 root         1954 Oct  3 2015    opt/local/share/terminfo/73/screen-256color-bce-s
-rw-r--r--   1 root         1940 Oct  3 2015    opt/local/share/terminfo/73/screen-256color-s
-rw-r--r--   1 root         1912 Apr 12 04:22   usr/local/ncurses/share/terminfo/73/screen-256color
-rw-r--r--   1 root         1924 Apr 12 04:22   usr/local/ncurses/share/terminfo/73/screen-256color-bce
-rw-r--r--   1 root         1954 Apr 12 04:22   usr/local/ncurses/share/terminfo/73/screen-256color-bce-s  
-rw-r--r--   1 root         1940 Apr 12 04:22   usr/local/ncurses/share/terminfo/73/screen-256color-s
-rw-r--r--   1 root         1828 Aug 22 2015    usr/share/terminfo/73/screen-256color
-rw-r--r--   1 root         1840 Aug 22 2015    usr/share/terminfo/73/screen-256color-bce
-rw-r--r--   1 root         1866 Aug 22 2015    usr/share/terminfo/73/screen-256color-bce-s
-rw-r--r--   1 root         1856 Aug 22 2015    usr/share/terminfo/73/screen-256color-s 
```

你可能会注意到一些细节：

*   在 OSX 上，默认文件系统忽略大小写，因此**`s`**以十六进制编码（使其与 不同**`S`**）

*   这些条目的大小略有不同。Apple 提供了旧版本的终端数据库，它缺少一些功能。

*   使用`toe`，我看到了这个：

```
    --> /usr/local/ncurses/share/terminfo
    ----> /usr/share/terminfo
    ------> /opt/local/share/terminfo
    *-*-*-: screen-256color 256色的GNU屏幕   
    *-*-*-: screen-256color-bce 具有 256 色和 BCE 的 GNU 屏幕
    *-*-*-: screen-256color-bce-s 使用 BCE 和状态行的 256 色 GNU 屏幕
    *-*-*-: screen-256color-s 具有 256 种颜色和状态行的 GNU 屏幕

```

并将系统与 MacPorts 进行比较：

```
--- macports    2017-04-26 04:38:21.000000000 -0400
+++ system      2017-04-26 04:40:08.000000000 -0400
@@ -1,19 +1,19 @@
-#      Reconstructed via infocmp from file: /opt/local/share/terminfo/73/screen-256color
+#      Reconstructed via infocmp from file: /usr/share/terminfo/73/screen-256color
 screen-256color|GNU Screen with 256 colors,
        am, km, mir, msgr, xenl,
-       colors#256, cols#80, it#8, lines#24, pairs#32767,
+       colors#256, cols#80, it#8, lines#24, ncv#3, pairs#32767,
        acsc=++\,\,--..00``aaffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzz{{||}}~~,
        bel=^G, blink=\E[5m, bold=\E[1m, cbt=\E[Z, civis=\E[?25l,
        clear=\E[H\E[J, cnorm=\E[34h\E[?25h, cr=^M,
        csr=\E[%i%p1%d;%p2%dr, cub=\E[%p1%dD, cub1=^H,
        cud=\E[%p1%dB, cud1=^J, cuf=\E[%p1%dC, cuf1=\E[C,
        cup=\E[%i%p1%d;%p2%dH, cuu=\E[%p1%dA, cuu1=\EM,
-       cvvis=\E[34l, dch=\E[%p1%dP, dch1=\E[P, dim=\E[2m,
-       dl=\E[%p1%dM, dl1=\E[M, ed=\E[J, el=\E[K, el1=\E[1K,
-       enacs=\E(B\E)0, flash=\Eg, home=\E[H, ht=^I, hts=\EH,
-       ich=\E[%p1%d@, il=\E[%p1%dL, il1=\E[L, ind=^J, is2=\E)0,
-       kbs=^H, kcbt=\E[Z, kcub1=\EOD, kcud1=\EOB, kcuf1=\EOC,
-       kcuu1=\EOA, kdch1=\E[3~, kend=\E[4~, kf1=\EOP, kf10=\E[21~,
+       cvvis=\E[34l, dch=\E[%p1%dP, dch1=\E[P, dl=\E[%p1%dM,
+       dl1=\E[M, ed=\E[J, el=\E[K, el1=\E[1K, enacs=\E(B\E)0,
+       flash=\Eg, home=\E[H, ht=^I, hts=\EH, ich=\E[%p1%d@,
+       il=\E[%p1%dL, il1=\E[L, ind=^J, initc@, is2=\E)0, kbs=^H,
+       kcbt=\E[Z, kcub1=\EOD, kcud1=\EOB, kcuf1=\EOC, kcuu1=\EOA,
+       kdch1=\E[3~, kend=\E[4~, kf1=\EOP, kf10=\E[21~,
        kf11=\E[23~, kf12=\E[24~, kf2=\EOQ, kf3=\EOR, kf4=\EOS,
        kf5=\E[15~, kf6=\E[17~, kf7=\E[18~, kf8=\E[19~, kf9=\E[20~,
        khome=\E[1~, kich1=\E[2~, kmous=\E[M, knp=\E[6~, kpp=\E[5~,
@@ -22,6 +22,6 @@
        rmul=\E[24m, rs2=\Ec\E[?1000l\E[?25h, sc=\E7,
        setab=\E[%?%p1%{8}%<%t4%p1%d%e%p1%{16}%<%t10%p1%{8}%-%d%e48;5;%p1%d%;m,
        setaf=\E[%?%p1%{8}%<%t3%p1%d%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;%p1%d%;m,
-       sgr=\E[0%?%p6%t;1%;%?%p1%t;3%;%?%p2%t;4%;%?%p3%t;7%;%?%p4%t;5%;%?%p5%t;2%;m%?%p9%t\016%e\017%;,
+       sgr=\E[0%?%p6%t;1%;%?%p1%t;3%;%?%p2%t;4%;%?%p3%t;7%;%?%p4%t;5%;m%?%p9%t\016%e\017%;,
        sgr0=\E[m\017, smacs=^N, smcup=\E[?1049h, smir=\E[4h,
        smkx=\E[?1h\E=, smso=\E[3m, smul=\E[4m, tbc=\E[3g, 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-05-09T15:25:29.920

我在完全不同的情况下遇到了同样的问题。

通过输入 infocmp，我得到了无法打开 terminfo 的消息。但它也告知了它试图获得的路径。我所做的只是用正确的术语（xterm-256color）创建那条路径。使用 find * 我在另一个目录中找到它并复制到新目录。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2017-04-26T03:20:05.060

您只需复制`/usr/share/terminfo/x/xterm-256color`到您要连接的服务器。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2020-06-17T01:03:34.020

如果您导出变量，请不要忘记刷新终端源...

`source ~/.bashrc` 或者只是打开一个新终端。可能是原始海报无法导出的原因。

# mysql - 给定时间内每 5 分钟的数据平均值

> ID：12345679
> 
> 赞同：6
> 
> 时间：2012-09-10T05:13:35.407
> 
> 标签：mysql

我的 MySQL 有问题。我需要两个特定时间之间来自 MySQL 的数据的平均值。

为此，我正在使用：

```
select avg(Column) 
from Databasename.tablename 
where datetime BETWEEN '2012-09-08 00:00:00' AND '2012-09-08 15:30:00' 
```

现在，我需要的是给定时间内每 5 分钟的数据平均值。通过使用这个：

```
select avg(Column) 
from Databasename.Tablename 
where datetime BETWEEN '2012-09-08 15:00:00' 
                   AND '2012-09-08 15:30:00' + 'INTERVAL 5minutes' 
```

它没有显示任何错误，但显示`NULL`.

如何在两个特定时间段内每 5 分钟获取一次数据？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-10T05:24:47.267

# 分组到间隔

您应该使用`group by`为要平均的每个间隔创建一个组。

```
select avg(Column), convert((min(datetime) div 500)*500 + 230, datetime) as time
from Databasename.tablename 
where datetime BETWEEN '2012-09-08 00:00:00' AND '2012-09-08 15:30:00'
group by datetime div 500 
```

这利用了日期和时间可以隐式转换为数字的事实，该数字随后将具有格式`YYMMDDhhmmss`。将这样的数字除以 100 会去除秒数，类似地除以 500 会为每 5 分钟间隔生成一个唯一数字。

我选择的附加列将给出间隔的中间值：间隔中的任何时间（这里选择最小值，但这并不重要），变成那个 5 分钟的间隔数，回到日期和时间数字，然后加上两分半钟。您可以使用类似的语法来计算间隔的开始（简单地`+ 230`省略）或（包括）结束 ( `+ 459`)。

使用[sqlfiddle](http://sqlfiddle.com/#!2/29042/1)测试。

# 范围处理结束

请注意，您的`BETWEEN`范围将包括`15:30:00`从当时开始的间隔中的行，但不包括其他行。也许您想从您的选择中排除范围的结尾：

```
where datetime >= '2012-09-08 00:00:00' AND datetime < '2012-09-08 15:30:00' 
```

# 为什么你得到 NULL

至于为什么您的查询会产生`NULL`：要进行区间算术，您不要将整个区间事物括在引号中，并且您使用单数名称作为时间单位。IE

```
'2012-09-08 15:30:00' + INTERVAL 5 minute 
```

但这只会将范围扩展到`2012-09-08 15:35:00`并且仍然不会创建您想要的那些 5 分钟间隔。您编写它的方式是尝试添加两个字符串，这在 MySQL 中是不可能的，除非字符串可以转换为数字，在这种情况下将添加这些数字。

您可能希望使用区间算术来计算区间的唯一结束，即区间*后*的第一秒：

```
 convert((min(datetime) div 500)*500, datetime) + INTERVAL 5 minute as endOfInterval 
```

简单地添加`500`而不是`230`我的查询将不起作用，因为结果数字可能代表每小时最后一个间隔的无效日期。

# c# - 下拉列表是否已重新加载？

> ID：12345685
> 
> 赞同：0
> 
> 时间：2012-09-10T05:14:10.033
> 
> 标签：c#, asp.net

我创建了一个动态下拉列表并将一些数据放入其中。这是在 ascx.cs 页面中完成的，并且

当我们在asp.net,c#中选择下拉列表时。我一直在重新加载页面并跳过这些值。例如：我有一个下拉菜单，其中包含以下值：下拉菜单 - Id's (-- Select --,1,2,3,4,5,6,7,8,9)

When Id is selected the Index Changed event would be fired and the dropdown value I would be sending into it. 然后我想在会话中捕获该值。

但是，当我选择一个 Id 时， -- Select -- 值会被加载到下拉列表中以显示。

实际的想法是，当我根据选择选择值 3 或 6 或任何其他值时，需要显示数据。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T05:16:16.497

`DropDownList`您只需要在用户第一次请求页面时绑定 a 。在页面上绑定之前检查用户是否没有回帖`Load`

```
if(!IsPostBack)
{
    //Bind your list here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:22:41.917

如果您在页面加载事件中绑定下拉列表而不是将该代码置于非 IsPostBack 条件

```
Page.IsPostBack Is used to check if the user posted back to the page. Meaning they 
clicked a button or changed a field in the form that causes it to post back to itself. 
```

所以，代码是

```
Page_Load Event
{
      If(!IsPostBack)
      {
            //bind dropdownlist
      }
} 
```

# java - 如何从数据库和 listview Android 中删除一个项目？

> ID：12345687
> 
> 赞同：0
> 
> 时间：2012-09-10T05:14:25.670
> 
> 标签：java, android

使用 Arrayadapter 在列表视图上显示存储在数据库中的元素。现在我想从列表视图和数据库中删除项目。请帮我解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:20:13.323

要从数据库中删除行，请尝试使用示例[http://codinglookseasy.blogspot.in/2012/08/sqlite-database.html](http://codinglookseasy.blogspot.in/2012/08/sqlite-database.html)。并在从数据库中删除后，从 arrayadapter 中删除项目并使用 adapter.notifyDataSetChanged() 从列表视图中删除它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:31:54.497

考虑使用游标适配器将列表视图绑定到您的数据库表。这里有一个例子：http: [//thinkandroid.wordpress.com/2010/01/09/simplecursoradapters-and-listviews/](http://thinkandroid.wordpress.com/2010/01/09/simplecursoradapters-and-listviews/)

该示例使用已弃用的“startManagingCursor”，它已被弃用，取而代之的是 CursorLoader。一旦你最终实现了 CursorLoader，它就很好了。您注册了一些侦听器，您的 UI 会立即更新以反映对数据库的任何更改（无需手动添加/删除列表视图中的行）。

查看[CursorLoaders 有什么好处？](https://stackoverflow.com/questions/7182920/what-are-the-benefits-of-cursorloaders)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T04:45:09.143

这是我的代码：

```
Cursor c = db.rawQuery("SELECT * FROM BOOKMARKS", null);

ID = c.getColumnIndex("ID");

            audiotime=c.getColumnIndex("BookmarkTime");
            // Check result.
            c.moveToFirst();
            if (c != null) 
            {
                // Loop through all Results
                do 
                {
                    /*String str=c.getString(ID);
                    audiobooks.add(str);*/
                    str=c.getString(audiotime);
                    audiobooks.add(str);
}
                while(c.moveToNext());

                c.close();
                db.close();

                //TODO
                arrayAdapter=new ArrayAdapter<String>(this,  R.layout.row3, R.id.itemr1,audiobooks);
                lv.setAdapter(arrayAdapter);
cursor.close();
        db.close(); //close db resources
}
public void onClick(View v) 
{
if(v.getId()==R.id.Delete)
{

db = openOrCreateDatabase("DB", 0, null);
db.delete("BOOKMARKS", null, null);

int j=lv.getCount();
                Toast.makeText(GetAudioBookmarks.this, " after delete listview count  " +j,Toast.LENGTH_SHORT).show();

} 
```

我无法做到这一点，因为我只将书签字符串添加到列表视图中。我已经粘贴了我的代码，它将从数据库中获取数据并添加到列表视图中。现在我的代码将像单击删除一样工作，将删除数据库上的所有项目，但列表视图计数将与它保持的值相同，但不会在列表视图上显示任何数据。

# c - 在 C (OSX) 中更改文件描述符限制

> ID：12345688
> 
> 赞同：3
> 
> 时间：2012-09-10T05:14:30.380
> 
> 标签：c, macos, file-descriptor, setrlimit

我想增加在 OSX 10.7 上运行的 C 程序可用的文件描述符的最大数量。我已将以下代码添加到我的项目中，但它失败了！

```
struct rlimit limit;
if(getrlimit(RLIMIT_NOFILE, &limit))
{
    perror("Failed to get limit");
    return -1;
}

printf("%llu, %llu\n", limit.rlim_cur, limit.rlim_max);
limit.rlim_cur *= 4;
printf("%llu, %llu\n", limit.rlim_cur, limit.rlim_max);

if(setrlimit(RLIMIT_NOFILE, &limit))
{
    perror("Failed to set limit");
    return -1;
} 
```

它打印这个日志：

```
4864, 9223372036854775807
19456, 9223372036854775807
Failed to set limit: Invalid argument 
```

最高限额似乎有点太高了。这是怎么回事？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T05:49:20.083

来自 man setrlimit：

> setrlimit() 现在在历史上成功的地方返回 errno 设置为 EINVAL。... 使用“rlim_cur = min(OPEN_MAX, rlim_max)”。

OPEN_MAX在 <sys/syslimits.h>中定义为**10240**

所以它未能将 rlimit_cur 设置为 19456。

# c# - Silverlight 4 捕获源没有停止

> ID：12345689
> 
> 赞同：0
> 
> 时间：2012-09-10T05:14:36.027
> 
> 标签：c#, silverlight, audio, silverlight-4.0

我正在开发一个 Silverlight 项目，以在网页上录制音频。

单击暂停按钮后，代码将始终抛出异常：

**捕获源未停止**

如果我在这行代码上放一个断点并在那里等待 3-5 秒然后运行代码，不会抛出异常。

```
 if (audioSink.CaptureSource.State == CaptureState.Started) (break point is on this line) 
```

这是代码

```
 private void Pause(object sender, RoutedEventArgs e)
    {
        //System.Threading.Thread.Sleep(TimeSpan.FromSeconds(5));
        if (audioSink.CaptureSource.State == CaptureState.Started)
        {
            audioSink.CaptureSource.Stop();

            this.btnPause.IsEnabled = false;
            this.btnRecord.IsEnabled = true;
            this.btnSave.IsEnabled = true;
        }
    }

   audioSink.CaptureSource.Stop(); (This is the line of code which throws the exception) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:45:17.317

不确定它是否有帮助：

在使用视频源时，我倾向于使用[CaptureDeviceConfiguration.AllowDeviceAccess](http://msdn.microsoft.com/en-us/library/system.windows.media.capturedeviceconfiguration.alloweddeviceaccess%28v=vs.95%29)属性来检查我是否可以操纵捕获对象。

[您可以通过调用CaptureDeviceConfiguration.RequestDeviceAccess](http://msdn.microsoft.com/en-us/library/system.windows.media.capturedeviceconfiguration.requestdeviceaccess%28v=vs.95%29)获得对设备的访问权限。您应该在调用捕获的 Start 方法之前调用此方法。如果您在 Start 方法上执行此操作，那么您应该已经有权访问并调用 Stop 方法而不会出现问题。

# iphone - 如何在两台设备之间共享我使用 sqlite 数据库存储的所有数据，以通过转储到另一台设备来重用数据

> ID：12345690
> 
> 赞同：0
> 
> 时间：2012-09-10T05:14:41.860
> 
> 标签：iphone, objective-c, ipad, sqlite, mfmailcomposer

我已经在**iPhone 中实现了一个应用程序，（Objective-c）**

因为我已经用于**`SQLITE`**数据库。

现在我需要分享数据。

**分享数据：**

1.  我需要通过邮件发送数据。
2.  在那我附上我的数据库文件（可能是csv格式？）
3.  通过转储数据在其他应用程序中重新使用我的数据..

任何有用的回复，提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:09:47.467

您可能已经看到一些应用程序从邮箱打开 pdf 文件，因为这些应用程序自己注册以处理 .pdf 文件。因此，iOS 会显示注册打开 pdf 文件的可用应用程序列表，以便用户可以选择任何一个应用程序来查看附件。

同样，您可以创建自己的文件扩展名并在 info.plist 文件中注册，以便在邮件中点击附件时，它会提供在您的应用程序中打开的选项。

Raywenderlich 为此提供了一个非常好的教程。

[如何在您的 iOS 应用程序中通过电子邮件导入和导出应用程序数据](http://www.raywenderlich.com/1980/how-to-import-and-export-app-data-via-email-in-your-ios-app)

看看吧，一定会帮到你的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T19:42:45.853

您可能还想考虑将您的问题分成两部分：1）导出为 CSV，然后 2）通过电子邮件发送您的 CSV。这是第 1 部分的帮助链接：使用 CHCSVParser：[https ://github.com/davedelong/CHCSVParser](https://github.com/davedelong/CHCSVParser)

# java - DBCP 数据源池？

> ID：12345691
> 
> 赞同：1
> 
> 时间：2012-09-10T05:14:49.050
> 
> 标签：java, jdbc, connection-pooling, apache-commons-dbcp

我正在实现 Apache DBCP 连接以提高执行多个查询的程序的效率。

问题是仅仅有一个连接池是不够的，因为我也有多个数据源（我有 m-datasaources，每个数据源都有 n-个连接）。

如何解决这个问题？

每个数据源都需要连接池吗？是否有数据源池？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:52:16.290

是的，每个数据源都需要一个池。

# iphone - 全屏视图隐藏导航和标签栏 iphone

> ID：12345695
> 
> 赞同：2
> 
> 时间：2012-09-10T05:15:14.620
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller, uinavigationbar

我有一个导航控制器（比如 navC），并且我在 navC 中推送了一个标签栏控制器（比如 tabC）。在 tabC 我有一个视图控制器（比如 viewC）。现在我的任务是让 viewC 在点击时全屏显示。但是有些如何在调整视图大小时，标签栏所在的区域永远不会被占用，我在隐藏标签栏的地方得到一个空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:10:11.937

在点击时实现此功能

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

if (appDelegate.navigationController.navigationBar.hidden == NO)
{
  CATransition *animation = [CATransition animation];
  [animation setType:kCATransitionFade];
  [[self.view.window layer] addAnimation:animation forKey:@"layerAnimation"];

[[UIApplication sharedApplication] setStatusBarHidden:YES animated:YES];
[appDelegate.navigationController setNavigationBarHidden:YES animated:YES];

[self.tabBarController.tabBar setHidden:YES];
 self.view.frame = CGRectMake(0,0,320,480);

 }
    if (appDelegate.navigationController.navigationBar.hidden == YES)
    {

  CATransition *animation = [CATransition animation];
  [animation setType:kCATransitionFade];
  [[self.view.window layer] addAnimation:animation forKey:@"layerAnimation"];

[[UIApplication sharedApplication] setStatusBarHidden:NO animated:YES];
[appDelegate.navigationController setNavigationBarHidden:NO animated:YES];
[self.tabBarController.tabBar setHidden:NO];
self.view.frame = CGRectMake(0,0,320,368);
 }   
 } 
```

您必须添加 QuartzCore/QuartzCore.h

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:51:55.027

也许如果您输入一些代码，我可以提供更准确的帮助，但据我了解，您需要隐藏`navigationBar`. `navigationController`这种方式`navigationController`本身是完全隐藏的，但您仍然可以访问它来推送和弹出视图控制器，就像您已经在做的那样。

```
self.navigationController    = [[UINavigationController alloc] init];
[self.navigationController setNavigationBarHidden:YES animated:NO]; 
```

希望这可以帮助...

# iphone - 如何集成 NativeContacts 功能以将新手机号码添加到联系人中？

> ID：12345702
> 
> 赞同：-1
> 
> 时间：2012-09-10T05:15:50.267
> 
> 标签：iphone, contacts

我有一个要求，我必须集成 iPhone 设备的本机联系人功能。我有一个 UITextField 我正在输入一个新的电话号码。当我完全输入它时，它应该允许我将该联系人添加到本机设备联系人。我可以在单击按钮时加载本机联系人，但无法获得添加联系人功能。

请给我建议/

谢谢里兹万

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:28:55.650

如果不使用 AddressBook 、 AddressBookUI 框架，这是不可能的。查看下面提到的链接以使用这些框架执行此操作：

[如何将我的应用程序中的联系人添加到 iOS 通讯录](https://stackoverflow.com/questions/3334047/how-to-add-a-contact-from-my-app-to-iphone-address-book)

# android - 同步位置代码 Android

> ID：12345705
> 
> 赞同：0
> 
> 时间：2012-09-10T05:15:55.140
> 
> 标签：android, google-maps, location, executorservice, android-location

我正在开发 Android 上的 GPS 定位服务。我已经在 Android 服务中实现了我的 GPS 位置代码。这是我的位置代码的快照。在我的应用程序中，还有其他线程并行工作以将这些位置坐标发送到服务器。

```
public void onLocationChanged(Location loc) {
            if (loc != null) {
                synchronized (lock) {
                    currentLat = loc.getLatitude();
                    currentLon = loc.getLongitude();

                    if (loc.hasSpeed()) {
                        float speedInMeterSec = loc.getSpeed();
                    }
                } 
```

我有兴趣同步我的位置代码，以便在我更新地图上的这些值、执行计算或使用这些值通过网络发送数据时，可能不会发生脏读问题。currentLat 和 currentLon 变量在我的服务中是静态的。

我想听听您的建议，以提高代码质量，特别是同步我的位置代码。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:16:59.900

您实际上不需要在 OnLocationChanged 中同步您刚刚收到的位置。但您似乎想要同步 currentLat 和 currentLong。这样做的方法是使用公共 getter 和 setter 将 currentLat 和 currentLong 设为私有，并同步 get/set 函数。如：

```
public void synchronized setCurrentLat(double latitude){
currentLat = latitude;
} 
```

确保 currentLat 本身是私有静态的。有其他问题，请追问！

# php - yii 扩展：如何在用户网格视图中显示用户的角色？

> ID：12345709
> 
> 赞同：1
> 
> 时间：2012-09-10T05:16:42.193
> 
> 标签：php, yii, yii-extensions

Q : 如何在用户网格视图中显示用户的角色？

描述：我正在使用用户和权限扩展。我想在用户/管理员的网格视图中显示用户的角色。并按用户角色过滤。我怎样才能？

这是我的看法

```
$this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'user-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        array(
            'name' => 'username',
            'type'=>'raw',
            'value' => 'CHtml::link(UHtml::markSearch($data,"username"),array("admin/view","id"=>$data->id))',
        ),
        array(
            'name'=>'email',
            'type'=>'raw',
            'value'=>'CHtml::link(UHtml::markSearch($data,"email"), "mailto:".$data->email)',
        ),
        'create_at',
        'lastvisit_at',
        array(
            'name'=>'status',
            'value'=>'User::itemAlias("UserStatus",$data->status)',
            'filter' => User::itemAlias("UserStatus"),
        ),
        array(
            'class'=>'CButtonColumn',
        ),
    ),
)); 
```

这是我的控制器

```
public function actionIndex()
    {
        $rasdataProvider = new RAssignmentDataProvider();
        $dataProvider=new CActiveDataProvider('User', array(
            'criteria'=>array(
                'condition'=>'status>'.User::STATUS_BANNED,
            ),

            'pagination'=>array(
                'pageSize'=>Yii::app()->controller->module->user_page_size,
            ),
        ));

        $this->render('index',array(
            'dataProvider'=>$dataProvider,
            'rasdataProvider'=>$rasdataProvider,
        ));
    } 
```

更新#1

这是 user.php 的关系

```
 public function relations()
    {
        $relations = Yii::app()->getModule('user')->relations;
        if (!isset($relations['profile']))
            $relations['profile'] = array(self::HAS_ONE, 'Profile', 'user_id');
        return $relations;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:12:30.967

尝试添加 profile.role

```
'columns'=>array(
    array(
        'name' => 'username',
        'type'=>'raw',
        'value' => 'CHtml::link(UHtml::markSearch($data,"username"),array("admin/view","id"=>$data->id))',
    ),
    'profile.role', // through relation `profile` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T12:02:00.760

下面的示例应该可以解决问题。将其复制到您的列数组中。

```
array(
    'name'=>'assignments',
    'header'=>Rights::t('core', 'Roles'),
    'type'=>'raw',
    'htmlOptions'=>array('class'=>'role-column'),
    'value'=>'$data->getAssignmentsText(CAuthItem::TYPE_ROLE)',
), 
```

这取自 rights/view/assignment/view.php 文件。

# c# - 如何访问另一个邮箱的“已发送邮件”文件夹

> ID：12345718
> 
> 赞同：2
> 
> 时间：2012-09-10T05:17:25.980
> 
> 标签：c#, visual-studio-2010, outlook-addin, outlook-2010

我在使用 VS 2010（C#）添加 Outlook 2010 时遇到问题。当用户使用“发送为”权限发送邮件时，“已发送邮件项目”将保存到用户的个人邮箱，而不是发送为邮箱发送的项目。现在我想将它从用户的个人邮箱移动到作为邮箱发送的项目文件夹中。我正在尝试使用以下代码

```
 Outlook.Application oApp = new Outlook.Application(); 
                Outlook.NameSpace oNS = oApp.GetNamespace("mapi");
                Outlook.Recipient oRecip = oNS.CreateRecipient(mailboxname); 
                oRecip.Resolve();
                if (oRecip.Resolved) 
                {  

                 Outlook.MAPIFolder sentItemssendas = oNS.GetSharedDefaultFolder(oRecip, Outlook.OlDefaultFolders.olFolderSentMail);                       

                } 
```

但是此代码抛出错误“无法完成操作。一个或多个参数值无效。” . 但使用相同的代码，我可以访问 olFolderInbox。在 Google 中搜索后，我知道“olFolderSentMail”没有授权访问。(http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._namespace.getshareddefaultfolder.aspx) 现在我的问题是有什么方法可以实现我的功能吗？如何将已发送邮件从我的个人邮箱发送项目移动到“发送为”邮箱发送项目？

*注意：由于用户只有“发送为”权限，因此 Outlook 仅加载用户的当前配置文件。除了救赎，还有什么办法吗？

# nhibernate - NHibernate 自定义方言

> ID：12345723
> 
> 赞同：0
> 
> 时间：2012-09-10T05:18:10.203
> 
> 标签：nhibernate, dialect

我正在处理一个遗留数据库，我正在编写一个自定义驱动程序和方言来使用 NHibernate 访问数据。我需要抑制生成的 sql 中的别名，所以我认为我应该覆盖 genericDialect，对吗？有没有关于如何做到这一点的教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:34:49.390

不幸的是，这是一件非常罕见的事情，我认为你不会找到任何关于这个主题的教程。您只需要下载源代码并深入研究：

当前版本的源码：[https ://github.com/nhibernate/nhibernate-core](https://github.com/nhibernate/nhibernate-core)

以前的版本：http: [//sourceforge.net/projects/nhibernate/files/NHibernate/](http://sourceforge.net/projects/nhibernate/files/NHibernate/)

您可能想看看以下方法：

```
NHibernate.Dialect.ExtractColumnOrAliasNames() 
```

查找该方法的用法以了解其他方言如何使用它。

还可以尝试搜索“别名”这个词，并特别在 NHibernate.Dialect 命名空间中查找该词的用法。即使这样，也可能需要对代码进行大量调查才能找到答案。

如果您确实发现设法抑制别名，请务必发布后续信息，创建博客条目等以分享您的发现，因为我会非常感兴趣。

# c# - WPF 中 GridViewDataColumn.CellEditTemplate 上的 MVVM 嵌套绑定

> ID：12345727
> 
> 赞同：1
> 
> 时间：2012-09-10T05:18:38.597
> 
> 标签：c#, wpf, mvvm, binding, autocomplete

我有一个 Viewmodel，其中包含名为 Projects 和**Users**的属性。Project 类包含 Project Manager、Date、AssignedTo 属性。在我看来，我有一个网格，其中我的 itemsource 绑定到 Projects，并且 datacolumns 绑定到 Project Manager、Date 和 Assigned To。

现在，我通过添加自动完成文本框向 AssignedTo 列添加了一个单元格编辑模板，因此当用户编辑该列时，它会自动给出建议的用户值。我现在的问题是我希望这个自动完成文本框的 ItemSource 绑定到我的 ViewModel 的属性，即**用户**（这是一个字符串列表）。由于网格已经绑定到项目，我如何强制 celledit 模板绑定到我的 ViewModel 中的另一个属性，即**Users**。

我知道有一些方法可以做到这一点，例如将另一个演示属性附加到项目，但我不想这样做，因为这个类在我的应用程序中使用了很多。我确实尝试了不同类型的绑定，例如相对源，但在这个阶段似乎没有任何工作正常。也许我错过了一些东西，或者真的没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:25:38.857

我见过的最好的方法是使用所谓的“[数据上下文代理](http://weblogs.asp.net/dwahlin/archive/2009/08/20/creating-a-silverlight-datacontext-proxy-to-simplify-data-binding-in-nested-controls.aspx)”。将其放在 XAML 文档的资源部分中，例如：

```
<Window.Resources>
    <local:DataContextProxy x:Key="DataContextProxy" />
</Window.Resources> 
```

现在，您可以从自动完成集合中将其作为静态资源绑定到它，例如：

```
ItemsSource="{Binding Path=DataContext.MyViewModel.AutoCompleteItems,Source={StaticResource DataContextProxy}}" 
```

（请注意，您必须在路径前加上前缀`DataContext`才能获得正确的绑定。）

我不太明白为什么*RelativeSource*绑定在这些情况下不起作用，但是在尝试从数据网格内部进行绑定时我遇到了类似的麻烦。但是，这种数据上下文代理方法很容易使用，并且可以完成工作。

# xpages - 检查扩展库并重定向到 Notes

> ID：12345728
> 
> 赞同：0
> 
> 时间：2012-09-10T05:18:53.743
> 
> 标签：xpages

我正在尝试实现一个 XPage 应用程序以在客户端中运行。该应用程序当前具有默认显示给用户的 Notes 视图版本。由于该应用程序依赖于扩展库，我只希望用户在安装了 extlib 的情况下获得 XPage 版本。如果不是，那么我想将用户重定向回 Notes 元素。

所以，我看到了两种可能的模式；

**1号**

*   将应用程序启动到 xpage
*   检查扩展库是否存在
    *   如果不存在，则重定向到 Notes 元素
    *   如果存在，重定向到 xpage

**2号**

*   将应用程序启动到 Notes 表单/页面
*   检查扩展库是否存在
    *   如果不存在，则重定向到 Notes 元素
    *   如果存在，重定向到 xpage

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:34:07.430

你可以使用

```
var v = com.ibm.xsp.extlib.util.ExtLibUtil.getExtLibVersion(); 
```

在 try ... catch 构造中。如果存在 extlib，它将返回版本；如果未安装，它将引发异常，然后您可以重定向到 Notes 元素

# macos - 如何在 macOS 上禁用垂直同步

> ID：12345730
> 
> 赞同：14
> 
> 时间：2012-09-10T05:18:58.787
> 
> 标签：macos, opengl, sdl, vsync

对于我所有的 SDL/OpenGL 程序，帧速率都停留在 60fps，所以看起来垂直同步已启用，但不是由我启用，也不是在我的代码或我的设置中。所以我现在想如果有办法禁用它，也许在一些深层的 macOS 设置中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-05T04:14:54.047

这使我能够在我的 MacBook Pro 上获得大约每秒 700 帧。

*   [下载 Xcode 图形工具 - 2014 年 8 月下旬](https://developer.apple.com/downloads/index.action?q=graphics)
*   安装或仅安装**图形工具**
*   打开**石英调试**
*   转到工具 -> 显示光束同步工具
*   选择禁用光束同步

它也不是永久性的，非常适合测试/基准测试。

[来源](https://discussions.apple.com/message/2962693#discussion-2959446)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T07:52:47.100

欢迎来到 SO。[我在这里](https://stackoverflow.com/questions/10866561/cocoa-opengl-unlocked-framerate/10881400#10881400)为类似问题概述了一种方法。您应该考虑到大多数 Mac LCD 被锁定为 60Hz，而最近的硬件被限制为 120Hz。禁用 vsync 可能只会导致 CPU/GPU 周期的浪费，并可能引入撕裂伪影。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-12T20:26:58.977

经过多年寻找解决方法（并在[Brett Hale](https://stackoverflow.com/users/906839/brett-hale)的帮助下），这对我有用 - 我在渲染循环开始时添加了那段代码（不仅在 init 中，因为 Apple 似乎重置了每次的 SwapInterval 设置......），终于能够有不同步的帧率：

```
#ifdef __APPLE__
GLint                       sync = 0;
CGLContextObj               ctx = CGLGetCurrentContext();

CGLSetParameter(ctx, kCGLCPSwapInterval, &sync);
#endif 
```

不要忘记包括`<OpenGL/gl.h>`

这不是最好的解决方案，但它实际上是我发现的唯一一个像魅力一样工作的解决方案。

# android - Android - 在暂停预览时拍照

> ID：12345731
> 
> 赞同：2
> 
> 时间：2012-09-10T05:19:01.920
> 
> 标签：android, camera

我有一个相机预览，我已经成功地使用 `Camera.takePicture()`.
但是现在我添加了一个单独的选项，通过简单地调用来暂停当前按需预览`camera.stopPreview()`但是我仍然希望能够捕获屏幕上的内容（但不是我的控件、按钮等）。
有没有这样做或其他方式`to pause/freeze the camera`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T03:15:04.780

您可以保存每次调用预览回调时返回的数据。

```
PreviewCallback pcb = new PreviewCallback() {
    public void onPreviewFrame(byte[] data, Camera arg1) {
        bitmap = BitmapFactory.decodeByteArray(data, 0, data.length);
        //bitmap is a static Bitmap
    }
} 
```

在你打电话之前，我不知道这会对帧率有多大影响 `stopPreview()`。

调用后`stopPreview()`，位图包含捕获的最后一帧。

# database - codeigniter 中的动态全局变量

> ID：12345733
> 
> 赞同：0
> 
> 时间：2012-09-10T05:19:04.027
> 
> 标签：database, codeigniter, dynamic, global-variables

在 codeigniter 中使用动态全局变量的最佳实践是什么？

我想根据我从我尝试的库中加载的数据加载一个带有常量的文件，但是它们是在模型初始化之前加载的

我希望它如何工作：

1）用户登录 2）php 检查该用户是普通用户（来自数据库）还是管理员 3）如果是普通用户，我将相应地定义我的全局变量，否则我将使用不同的全局变量

这应该只发生一次，当人们登录时。这正是我的做法：

该人登录，php 检查（在同一控制器中）需要如何定义全局变量。它定义了它们，但是一旦我从另一个控制器调用这些变量，它们就会被删除。（我用 AJAX 调用另一个控制器）哦，我还应该说当我们同时运行多个 AJAX 请求时 CI 存在错误（如果同时使用 AJAX，则不能使用 CI 会话）

所以问题真的是：我如何防止它们被删除？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T22:35:15.393

## 首先 - 简单的部分：

CodeIgniter 与 AJAX 的数据库会话[已得到解决](https://stackoverflow.com/a/12341624/568884)（最近）。

## 第二 - 关于全局：

我对您的建议是首先扩展 CodeIgniter 的`CI_Controller`课程，以实现 Phil Sturgeon 的博客题为[Keeping It Dry](http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-base-Classes-Keeping-it-DRY)中概述的技术。完成后，让所有控制器继承自 a`MY_Controller`而不是直接继承自`CI_Controller`.

然后你可以让`MY_In_Controller`, `MY_Out_Controller`, `MY_Admin_Controller`...etc 从 扩展`MY_Controller`，但我离题了。重要的部分是检查新基本控制器中的登录状态并设置全局变量。

```
class MY_Controller extends CI_Controller{
    function __construct(){
        parent::__construct();

        $l = $this->session->userdata("loggedin");
        if((!isset($l))||($l==FALSE)){
            /*user is logged out - set appropriate globals*/
        }
        else{
            /*user is logged in - fetch them from the database and set appropriate globals*/
        }
    }
} 
```

现在，当您创建新的控制器时，例如`Blog`、`News`或`About`，您不必每次都设置全局变量，它们将可以在您的控制器、模型和视图中访问；都是因为父类会照顾它。

# java - 现有应用程序内登录时间的条件

> ID：12345735
> 
> 赞同：0
> 
> 时间：2012-09-10T05:19:14.643
> 
> 标签：java

我正在开发一个现有的应用程序，其中处理用户登录的代码中存在以下条件。

```
if ((PresentTime - LoginTime) <= browservalidationinsecs) 
{

// Means this is positive and proceed further processing .

} 
```

这`PresentTime`是服务器内部当前时间的时间。

这`LoginTime`是用户通过浏览器启动应用程序的时间。

在应用程序内`browservalidationinsecs`被硬编码为 45 秒。

我无法理解为什么会保持这种状态。

任何人都可以有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T05:25:20.960

这个条件可能会给出`Time out error` 45 秒。

假设用户启动一个应用程序并且在接下来的 45 秒内没有登录，然后当他输入他的凭据而不是成功登录时，它将再次将他重定向到登录页面。

这种类型的代码主要出现在安全是重中之重的银行和金融应用程序中。

# python - 重新加载守护程序状态的最佳方式 - 从以我的自定义格式保存的数据或持久数据库？

> ID：12345738
> 
> 赞同：0
> 
> 时间：2012-09-10T05:19:26.913
> 
> 标签：python, database, daemon, persistent-object-store

我有一个无限的进程在运行，每天结束时它基本上写入一个文件并用更新的数据填充内部对象。

它在 Ubuntu 上运行并用 Python 编写。

如果进程崩溃/重新启动等，请建议恢复数据的最佳方法是什么。

我应该阅读到目前为止生成的所有文件并更新新创建的对象，以便它拥有所有可用的备份信息，还是应该将数据保存在数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:17:37.297

我发现[shelve](http://docs.python.org/library/shelve.html)模块非常适合状态 - 它提供了更好的 api 并且比直接的 pickle 多一点 - 非常适合（传统）数据库看起来有点矫枉过正。

# google-chrome - 问题：Google Chrome 上同一页面上的 2 个 jQuery 插件（iButton + zclip）

> ID：12345740
> 
> 赞同：0
> 
> 时间：2012-09-10T05:19:43.060
> 
> 标签：google-chrome, jquery-plugins, zclip

这是我的代码：

```
$(document).ready(function(){
    $(function(){
       $('#post_status').iButton({
                duration: 200         
                , easing: "swing"                      
                , labelOn: "Active"                                               
                , labelOff: "Hidden"                         
                , resizeHandle: "auto"                    
                , resizeContainer: "auto"                 
       });
    });
$('a.copy').each(function(){
        var $this = $(this);
        $this.zclip({
            path : 'path/to/ZeroClipboard.swf',
            copy : function(){
                    var copyText = $(this).prev().val();
                    return copyText;
                }
        });
    });
}); 
```

zClip 正确地将 Flash 对象附加到元素，但是当我单击时，文本不会复制到剪贴板。

如果我评论 iButton 的部分，zClip 会正常工作。

有人遇到过这个问题吗？

PS 适用于 Firefox，但不适用于 Chrome

PS2 对不起，我的英语不好。

示例代码：http: [//jsfiddle.net/nHSbc/](http://jsfiddle.net/nHSbc/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:57:40.833

请找出为什么如果您评论 if 行，一切正常。只是在 chrome 和 firefox 中它有问题，而不是在 IE 中。单击按钮时，复制功能似乎为空。

这可能是使用 zclip 插件时的配置错误问题。

第 63 - 67 行，文件：jquery.zclip.js

```
//if(!$.isFunction(settings.copy)){
    clip.setText(settings.copy);
//} else {
//  clip.setText(o.triggerHandler('zClip_copy'));
//} 
```

干杯

# algorithm - 如何检查循环单链表是否为pallindrome？

> ID：12345748
> 
> 赞同：6
> 
> 时间：2012-09-10T05:21:02.787
> 
> 标签：algorithm, data-structures, linked-list

问题：我有一个单链表（即只有指向下一个节点的指针的列表）。此外，这是一个循环链表（在这个例子中，最后一个节点有一个指向第一个节点的指针）。列表中的每个节点都包含一个字符。

此类列表的示例可以是：a->b->c->b->a

现在我如何验证这个列表是否是一个pallindrome？

我想到了以下解决方案：

1.  从列表的头部开始。找到列表的长度，然后找到中间节点。现在从列表的头部重新开始，并继续将元素推入堆栈直到中间。现在从 mid 和 pop 元素遍历列表。如果弹出元素的值等于当前节点的值。如果不是，则返回 false。否则，继续直到堆栈为空并且我们已经验证了所有字符。缺点：使用额外的堆栈空间:(

2.  从列表的头部开始。找到列表的长度，然后找到中间节点。现在反转这个列表的第二半。然后使用 2 个指针（一个指向开始，另一个指向中间 + 1 个元素），检查值是否相同。如果不是，则返回 false。否则继续，直到我们再次到达起始节点。缺点：更改原始数据结构。

有没有更优雅的方法来解决这个问题（希望不使用 O(n) 额外空间或更改原始列表）？我对算法感兴趣，而不是任何特定的实现。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T09:48:48.080

由于您正在处理*单个*链表，因此您*必须*使用一点额外的空间或更多的额外时间。

您的第一种方法听起来很合理，但是您可以在一次运行中确定列表的长度*和回文性。*

我们修改了所谓的弗洛伊德寻环算法：

*   两个指针，“慢”和“快”，都从链表头开始；慢指针每次迭代前进一个列表元素，快指针两个元素
*   在每一步中，慢指针将当前元素压入堆栈

如果快指针到达链表的末尾，慢指针指向链表的中间，所以现在：

*   慢指针前进到列表的末尾，并且在每一步中：
*   它从堆栈中弹出一个元素并将其与当前列表元素进行比较（如果它们不相等，则返回`false`）
*   如果慢指针到达链表的末尾，它是一个回文

对于具有奇数个元素的列表，需要做一些额外的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T18:13:32.073

我认为我们不需要额外的空间。这可以通过 O(n) 复杂度来完成。

修改菲利普的解决方案：

我们修改了所谓的弗洛伊德寻环算法：

“slow”和“fast”两个指针，都从链表头开始；慢指针每次迭代前进一个列表元素，快指针每步两个元素，慢指针将当前元素压入堆栈如果快指针到达列表末尾，慢指针指向列表中间，所以现在：

在链表的开头（开始指针）有另一个指针，现在 - 将开始指针和慢速指针一一移动并比较它们 - 如果它们不相等，则返回 false - 如果慢速指针到达末尾列表，它是一个回文

这是 O(n) 时间复杂度，不需要额外的空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:00:31.040

这是伪Haskell（这些天我不记得确切的语法）并且我已经为非循环情况编写了 - 为了解决这个问题，只需将与 [] 匹配的子句替换为您用来识别的任何条件你绕了一圈。

```
p(xs) = q(xs, Just(xs)) != Nothing

q([], maybeYs) = maybeYs

q(x : xs, Nothing) = Nothing

q(x : xs, maybeYs) =
    let maybeZs = q(xs, maybeYs) in
    case maybeZs of
        Nothing        -> Nothing
        Just (x :: zs) -> Just(zs)
        otherwise      -> Nothing 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T23:56:36.733

由于您知道链表确实会形成一个循环，并且您只是在寻找从头开始的回文，因此您可以自己更轻松地完成此操作。

```
A -> B -> C -> B -> A 
```

在这种情况下，从 head 处的指针（称为 H）和 head.Left() 处的指针开始（称为 T）。

现在继续将头指针 H 向右移动，将尾指针 T 向左移动。

当您遍历列表时，验证这些元素的值是否相等（即回文）。

但是，您的停止条件需要更多时间。有两种情况：

*   两个指针都指向同一个元素（即奇数个元素）
*   H 指针指向 T 右侧的元素。

因此，如果 H==T 或 H==(T.Right()) 则停止。

使用这种方法（或类似方法），您只需访问每个元素一次。

如果您不知道链表是​​否是循环的，请使用其他解决方案中的 Tortoise and Hare 方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T09:11:48.077

只需粘贴我的实现，以便我们可以相互比较，在这里进行完整[测试](https://gist.github.com/3720907)：

```
/**
 * Given a circular single linked list and the start pointer, check if it is a palindrome
 * use a slow/fast pointer + stack is an elegant way
 * tip: wheneve there is a circular linked list, think about using slow/fast pointer
 */

#include <iostream>
#include <stack>
using namespace std;

struct Node
{
    char c;
    Node* next;

    Node(char c) {this->c = c;}
    Node* chainNode(char c)
    {
        Node* p = new Node(c);
        p->next = NULL;
        this->next = p;
        return p;
    }
};

bool isPalindrome(Node* pStart)
{
    Node* pSlow = pStart;
    Node* pFast = pStart;

    stack<Node*> s;
    bool bEven = false;
    while(true)
    {
        // BUG1: check fast pointer first
        pFast = pFast->next;
        if(pFast == pStart)
        {
            bEven = false;
            break;
        }
        else
        {
            pFast = pFast->next;
            if(pFast == pStart)
            {
                bEven = true;
                break;
            }
        }

        pSlow = pSlow->next;
        s.push(pSlow);

    }
    if(s.empty()) return true; // BUG2: a, a->b->a
    if(bEven) pSlow = pSlow->next; // BUG3: a->b->c->b->a, a->b->c->d->c->b->a: jump over the center pointer

    while(!s.empty())
    {
        // pop stack and advance linked list
        Node* topNode = s.top();
        s.pop();
        pSlow = pSlow->next;

        // check
        if(topNode->c != pSlow->c)
        {
            return false;
        }
        else
        {
            if(s.empty()) return true;
        }
    }

    return false;
} 
```

# jsp - 从 JSP 中的 URL 获取参数

> ID：12345761
> 
> 赞同：3
> 
> 时间：2012-09-10T05:22:32.717
> 
> 标签：jsp

> **可能重复：**
> [如何使用 JSP 从 URL 获取参数](https://stackoverflow.com/questions/1890438/how-to-get-parameters-from-the-url-with-jsp)

请帮忙！我想`http://111.0000.0000.0000/2-abc-xyz?sessid=32323232-232322323`使用 JSP 从 "" 中提取 sessid。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T05:33:45.497

尝试

EL 表达式

```
${param.sessid} 
```

或 Java 代码。

```
String value=request.getParameter("sessid"); 
```

或者

使用 java.net.URI，

```
URI uri=new URI("http://111.0000.0000.0000/2-abc-xyz?sessid=32323232-232322323");
System.out.println(uri.getQuery()); 
```

# java - 为什么我的方法有错误？

> ID：12345762
> 
> 赞同：-1
> 
> 时间：2012-09-10T05:22:34.167
> 
> 标签：java, class, methods

我不明白为什么我在 setInitialQuantity 方法声明中收到这些错误，有人介意看一下吗？

```
public class Invoice
{
    private int quantity;
    private String partNum;
    private String partDesc;
    private double unitPrice;

    //constructor 
    public Invoice ( int initialQuantity, String partNumber, String partDescript, double unitPrice)
    {
        public void setInitialQuantity ( int initialQuantity )
        {
            quantity = initialQuantity;
        }   
    }//end Invoice constructor
} 
```

错误：

```
javac Invoice.java
Invoice.java:16: illegal start of expression
    public void setInitialQuantity ( int initialQuantity )
    ^
Invoice.java:16: illegal start of expression
    public void setInitialQuantity ( int initialQuantity )
           ^
Invoice.java:16: ';' expected
    public void setInitialQuantity ( int initialQuantity )
                                  ^
Invoice.java:16: ';' expected
    public void setInitialQuantity ( int initialQuantity )
                                                        ^
4 errors 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:24:45.283

您不能在 Java 中的另一个（或构造函数）中拥有一个方法，将其移到构造函数之外但在类中。

```
public class Invoice
{
    private int quantity;
    private String partNum;
    private String partDesc;
    private double unitPrice;

    //constructor 
    public Invoice ( int initialQuantity, String partNumber, String partDescript, double unitPrice)
    {
    }//end Invoice constructor

public void setInitialQuantity ( int initialQuantity )
    {
            quantity = initialQuantity;
    }   

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T05:25:56.240

您不能在另一个方法中定义方法。

```
//constructor     
public Invoice(int initialQuantity,String partNumber,String partDescript,double unitPrice)
{
   this.quantity=initialQuantity;
   this.partNum=partNumber;
   this.partDesc=partDescript;
   this.unitPrice=unitPrice;
}   
public void setInitialQuantity(int initialQuantity)
{
    quantity = initialQuantity;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T05:26:14.800

将 Cosntructor 更改为：

```
 public Invoice ( int initialQuantity, String partNumber, String partDescript, double unitPrice)
    {      
       quantity = initialQuantity;         
    }//end Invoice constructor 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T05:35:59.467

您不能在构造函数中使用方法，可能是您正在寻找类似的东西：

```
public class Invoice
{
    private int quantity;
    private String partNum;
    private String partDesc;
    private double unitPrice;

    //constructor 
    public Invoice ( int initialQuantity, String partNumber, String partDescript, double unitPrice)
    {
        quantity = initialQuantity;
        partNum = partNumber;
        partDesc = partDescript;
        unitPrice = unitPrice;
    }//end Invoice constructor

    public void setInitialQuantity ( int initialQuantity )
    {
        quantity = initialQuantity;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T05:37:20.030

您应该在构造函数之外定义“setInitialQuantity”，然后从构造函数中调用它。像这样的东西：

```
//constructor          
public Invoice (int initialQuantity, String partNumber, String partDescript, double unitPrice)
{   
   setInitialQuantity(initialQuantity);     
}//end Invoice constructor

public void setInitialQuantity (int initialQuantity)
{
   quantity = initialQuantity;
} 
```

# python - 客户端正在读取/写入扭曲的数据？

> ID：12345765
> 
> 赞同：1
> 
> 时间：2012-09-10T05:22:47.303
> 
> 标签：python, client, twisted

我正在学习扭曲，所以我可以将它与我拥有的二十一点 pygame 集成。在弄清楚如何将数据从一个客户端传递到服务器然后再传递给其他客户端时，我试图了解如何操作通常在本示例中的每个客户端屏幕中打印到终端的字符串：

当我说操作时，我的意思是将数据类型更改为“数据”的列表、整数、元组等，打印它的信息`(type(data))`，并为任何关键字设置条件。

```
from twisted.internet import stdio, reactor, protocol
from twisted.protocols import basic
import re

## when client receives data from server // the client script checks then blits ##

class DataForwardingProtocol(protocol.Protocol):
    def __init__(self):
        self.output = None
        self.normalizeNewlines = False

    def dataReceived(self,data):
        if self.normalizeNewlines:

    ## see if data is == to secret ##
    ## this never returns True ? ##
            if data == 'secret':
                print "This line isn't secure"
            else:
                data = re.sub(r"(\r\n|\n)","\r\n",data)
        if self.output:
            if data == "secret":
                print "This line isn't secure"
            else:

         ## this will return the error message below ##
         ## so I'm very unsure of what is going on with 'data' ##
                self.output.write(type(data))

class StdioProxyProtocol(DataForwardingProtocol):
    def connectionMade(self):
        inputForwarder = DataForwardingProtocol()
        inputForwarder.output = self.transport
        inputForwarder.normalizeNewlines = True
        stdioWrapper = stdio.StandardIO(inputForwarder)
        self.output = stdioWrapper

class StdioProxyFactory(protocol.ClientFactory):
    protocol = StdioProxyProtocol

reactor.connectTCP('192.168.1.2', 6000, StdioProxyFactory())
reactor.run() 
```

回报：

```
Unhandled Error
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/twisted/python/log.py", line 84, in callWithLogger
    return callWithContext({"system": lp}, func, *args, **kw)
  File "/usr/lib/python2.7/dist-packages/twisted/python/log.py", line 69, in callWithContext
    return context.call({ILogContext: newCtx}, func, *args, **kw)
  File "/usr/lib/python2.7/dist-packages/twisted/python/context.py", line 118, in callWithContext
    return self.currentContext().callWithContext(ctx, func, *args, **kw)
  File "/usr/lib/python2.7/dist-packages/twisted/python/context.py", line 81, in callWithContext
    return func(*args,**kw)
--- <exception caught here> ---
  File "/usr/lib/python2.7/dist-packages/twisted/internet/posixbase.py", line 614, in _doReadOrWrite
    why = selectable.doRead()
  File "/usr/lib/python2.7/dist-packages/twisted/internet/tcp.py", line 203, in doRead
    return self._dataReceived(data)
  File "/usr/lib/python2.7/dist-packages/twisted/internet/tcp.py", line 209, in _dataReceived
    rval = self.protocol.dataReceived(data)
  File "Downloads/trial.py", line 22, in dataReceived
    self.output.write(type(data))
  File "/usr/lib/python2.7/dist-packages/twisted/internet/_posixstdio.py", line 53, in write
    self._writer.write(data)
  File "/usr/lib/python2.7/dist-packages/twisted/internet/process.py", line 174, in write
    abstract.FileDescriptor.write(self, data)
  File "/usr/lib/python2.7/dist-packages/twisted/internet/abstract.py", line 335, in write
    self._tempDataLen += len(data)
exceptions.TypeError: object of type 'type' has no len() 
```

所以我永远无法“检查”“数据”，当我尝试打印出有关数据的任何内容或更改其类型时，我会得到一个广泛的错误？有什么明显的我遗漏了，或者这是错误的方法吗？如果有帮助，这里是[服务器](https://paste.lugons.org/show/3ydYkKJIcoDIIZjEDERk/)脚本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T05:29:24.660

当您调用 type() 时，它返回对象的类型，而不是表示对象类型的字符串。

您可以改为检查类型：

```
>>> aString = 'abc'
>>> anInt = 123
>>> type(aString) is str
True
>>> type(aString) is int
False
>>> type(anInt) is str
False
>>> type(anInt) is int
True 
```

您收到的数据不会是列表、元组或其他类型的对象，除非您对其进行序列化。查看模块`Pickle`以查看如何序列化对象的示例！

# css - 标题不是直接穿过吗？

> ID：12345766
> 
> 赞同：1
> 
> 时间：2012-09-10T05:22:55.477
> 
> 标签：css

有人可以告诉我为什么这个标题不会直接穿过吗？我的目标是让 One call 在右侧获取所有信息，在右侧获取 800 电话号码。我将它们放在自己的 div 中，但 800# 正在包装。

我尝试过浮动、文本对齐甚至跨度而不是 div。

您可以在这里找到该网站：http: [//jsfiddle.net/G78sd/](http://jsfiddle.net/G78sd/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:27:18.623

您有两个[块级元素](http://www.w3.org/TR/CSS2/visuren.html#block-boxes)，这就是它们“包装”的原因。所以解决它的一种方法是给每个元素一个宽度，然后浮动它们。

```
.CompanyName {
    color: #330000;
    font-family: Tahoma, Geneva, sans-serif;
    font-size: 28px;
    font-weight: bolder;
    /* text-shadow: 3px 3px 4px rgba(0, 0, 0, .9); */
    font-variant:small-caps;
    margin-top: 22px;
    width: 450px;
    float: left;
}

.HeaderPhoneNumber {
    color: #330000;
    font-family: Tahoma, Geneva, sans-serif;
    font-size: 28px;
    font-weight: bolder;
    /* text-shadow: 3px 3px 4px rgba(0, 0, 0, .9); */
    font-variant:small-caps;
    width: 450px;
    float: right;
    text-align: right;
} 
```

# asp.net-mvc - 如何检测移动（不是平板电脑）请求？

> ID：12345771
> 
> 赞同：1
> 
> 时间：2012-09-10T05:23:33.927
> 
> 标签：asp.net-mvc, c#-3.0

如何检测`ASP.NET` `MVC`应用程序中的移动设备（但不是平板电脑）请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T05:27:48.207

在 ASP.NET 中，您可以使用 Request.Browser.IsMobileDevice 属性和 Request.UserAgent 轻松检测移动设备请求。

以下代码检查 IsMobileDevice 属性并重定向到移动特定页面：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Request.Browser.IsMobileDevice)
    {
        Response.Redirec("~/default_mobile.aspx");          
    }
} 
```

如果您从移动浏览器请求“default.aspx”，它将重定向到 default_mobile.aspx 页面

[在这里阅读](http://www.codeproject.com/Articles/213825/ASP-net-Mobile-device-detection)他们详细解释的地方

有时这可能不适用于某些平板电脑

为此，您必须使用 Request.Browser.ScreenPixelsWidth 并针对各种屏幕尺寸的值进行验证以实现此目的。我认为这将是在服务器端做这件事的唯一方法

如果您想信任客户端 javascript 。有多种脚本可以做到这一点。

检查此[检测移动浏览器](http://detectmobilebrowsers.com/)，这也可能对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:46:00.460

As the other bloke said, you can use `Request.Browser.IsMobileDevice`

Either in your controller or in your layout page

**Razor**. You can do this in the layout page and it'll change depending on device e.g.

```
@if (Request.Browser.IsMobileDevice) {

} 
```

**Controller** for an individual View e.g.

```
public ActionResult Index()
{
    if (Request.Browser.IsMobileDevice)
         return View("Index.Mobile");
    else
         return View();      
} 
```

An alternative is to use this API called 51Degrees.mobi. I personally haven't used it, but it looks pretty good and very complete: [http://51degrees.codeplex.com/wikipage?title=MVC](http://51degrees.codeplex.com/wikipage?title=MVC)

Also, this has some more information on the subject of mobile detection. [http://www.asp.net/whitepapers/add-mobile-pages-to-your-aspnet-web-forms-mvc-application](http://www.asp.net/whitepapers/add-mobile-pages-to-your-aspnet-web-forms-mvc-application)

# perl - Perl解析csv文件

> ID：12345775
> 
> 赞同：0
> 
> 时间：2012-09-10T05:24:10.417
> 
> 标签：perl

我只是第一次尝试读取 .csv 文件。我浏览了以下链接：

[http://metacpan.org/pod/Text::CSV_XS#Reading-a-CSV-file-line-by-line](http://metacpan.org/pod/Text::CSV_XS#Reading-a-CSV-file-line-by-line)：

我毫无疑问，如果你愿意，你可以告诉我这是个愚蠢的问题，但我不知道，为什么我无法弄清楚 perl 究竟是如何读取 csv 文件的 :(

所以，我的疑问是：

**第一个问题**

逐行读取csv文件和解析文件有什么区别。

我有一个简单的程序，我正在逐行读取 csv 文件。下面是我的程序：

```
#!/usr/bin/perl -w
use strict;
use Text::CSV;
use Data::Dumper;

my $csv=Text::CSV->new( );
my $my_file="test.csv";
open(my $fl,"<",$my_file) or die"can not open the file $!";
#print "$ref_list\n";

while(my $ref_list=$csv->getline($fl))
{

print "$ref_list->[0]\n";
} 
```

以下是 csv 文件中的数据：

```
"Emp_id","Emp_name","Location","Company"
102713,"raj","Banglore","abc"
403891,"Rakesh","Pune","Infy"
530201,"Kiran","Hyd","TCS"
503110,"raj","Noida","HCL" 
```

**第二个问题：**

如果我想获得特定的 Emp_id 以及 Location 那么我该如何继续。

**第三个问题：**

如果我只想要 102713 ,530201,503110 Emp 记录，即名称、位置、公司名称，那我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T05:52:02.287

CSV 文件可以很好地表示文本格式的表格数据，但它不适合内存中的表示。正因为如此，我们必须创建一个适当的代表。一种这样的表示是散列：

```
my $hashref = {
   Emp_Id   => ...,
   Emp_name => ...,
   Location => ...,
   Company  => ...,
}; 
```

如果标题行在数组`@header`中，我们可以使用以下方法创建此哈希：

```
my @header = ...;
my @row = @{$csv->getline($fl)}; # turn the arrayref into an array
my $hashref = {};
for my $i (0..$#header) {
  $hashref->{$header[$i]} = $row[$i];
}
# The $hashref now looks as described above 
```

然后我们可以创建使用 id 值作为键的查找哈希。所以`%lookup`看起来像这样：

```
my %lookup = (
   102713 => $hashref_to_first_line,
   ...,
); 
```

我们通过做填充它

```
$lookup{$row[0]} = $hashref; 
```

在上述循环之后。然后我们可以访问某个 hashref

```
my $a_certain_id_hashref = $lookup{102713}; 
```

或直接访问某些元素

```
my $a_certain_id_location = $lookup{102713}{Location}; 
```

如果键不存在，这些查找应该返回`undef`。

如果 CSV 文件太大，这可能会导致 perl 内存不足。在这种情况下，散列应该是`tie`d 到文件，但这完全是一个不同的主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:31:35.320

这是解决您的第二个问题和第三个问题的一部分的另一个选项：

```
use Modern::Perl;
use Text::CSV;

my @empID = qw/ 102713 530201 503110 /;

my $csv = Text::CSV->new( { binary => 1 } )
  or die 'Cannot use CSV: ' . Text::CSV->error_diag();

my $my_file = "test.csv";
open my $fl, '<', $my_file or die "can not open the file $!";

while ( my $ref_list = $csv->getline($fl) ) {

    if ( $ref_list->[0] ~~ @empID ) {
        say "Emp_id: $ref_list->[0] is Location: $ref_list->[2]";
    }
}

$csv->eof or $csv->error_diag();
close $fl; 
```

输出：

```
Emp_id: 102713 is Location: Banglore
Emp_id: 530201 is Location: Hyd
Emp_id: 503110 is Location: Noida 
```

该数组`@empID`包含您感兴趣的 ID。在`while`循环中，使用智能匹配运算符 (Perl v5.10+) 检查每个 Emp_id 以查看它是否在 ID 列表中。如果是，则打印 Emp_id 及其对应的 Location。

# apache - Apache - Mercurial - 身份验证 - Active Directory 组/LDAP 组

> ID：12345776
> 
> 赞同：0
> 
> 时间：2012-09-10T05:24:33.090
> 
> 标签：apache, authentication, mercurial, apache2, ldap

操作系统：Linux OpenSUSE 版本控制 - Mercurial Apache2

我运行 http://my.os.name/ 它给了我一个页面 - 因此 apache 正在运行。我运行 http://my.os.name:/hg - 它显示 Mercurial 页面，因此 mercurial 显示在 http Internet Explorer 页面上。

我能够在 Mercurial 中创建存储库/或进行正常工作。

我需要的。1\. 当我打开上面的 Hg 链接时，而不是显示 Mercurial(Hg) 存储库页面主页，它应该首先检查我是否属于我的公司，即它应该使用 Windows Active Directory 或 LDAP 服务器进行身份验证。

1.  如果我对文件进行任何更改或在 Hg 中创建目录/存储库，那么它应该确保 / 验证/验证我是否具有执行该操作的有效访问权限。

我该怎么做，我需要一步一步的帮助，因为我是 Apache/Mercurial 身份验证设置的新手。

我几乎已经阅读了有关设置的所有在线帮助，到目前为止，我能够确定当我打开 Hg 链接时，是否会弹出用户名/密码提示，但它没有接受它/不起作用。

我也不想创建 .htpasswd/ .htaccess 或摘要文件。我想知道的是，如果在 Windows Active Directory 中，如果我为 ex 创建了一个安全组：Company/Project1_readers、Company/Project1_Contributors、Company/Project1_Repository1_Readers、Company/Project1_Repository2_Contributors... 并且在那些 AD 安全组 ID 中，如果我添加了所有开发人员，然后在 AD 中使用这些组，我想授予开发人员访问权限，而不是在 .hg/hgrc 文件中添加这些用户。（这通常是我们在 TFS（Team Foundation Server）中授予/撤销访问权限的方式），而不是在每个存储库等中弄乱文件（添加/删除用户）等。

我该怎么做以上？

如果最好的方法是只创建 .htpasswd/.htaccess/.htdigest 等文件，请告知...如果我在实现上述情况时错了。

我的 httpd.conf 文件包含另一个 .conf 文件（其中包含）

==========================================

```
<Directory /srv/www/hg>
   Order deny,allow
   Deny from All
   AuthType Basic
#   #AuthName "Apache Web Site: Login with your AD(Active Directory) credentials"
   AuthName "Mercurial Repositories"
#
#
#   AuthBasicProvider ldap
#   AuthzLDAPAuthoritative off
#   #AuthLDAPURL ldap://10.211.16.1:389/OU=TSH,DC=tsh,DC=Mason,DC=com?sAMAccountName
#   AuthLDAPURL "ldap://10.211.16.1:389/?samAccountName?sub?(objectClass=user)"
##               #ldap://ldap.your-domain.com:389/o=stooges?uid?sub
#   AuthLDAPBindDN "cn=xyzserver,OU=Services,OU=Users,OU=Infrastructure,OU=DEN,OU=KSH,DC=Psh,DC=Mason,DC=com"
#                  #"cn=StoogeAdmin,o=stooges"
#   AuthLDAPBindPassword secret1
   require valid-user
#   require ldap-user
   Satisfy any
</Directory> 
```

当我在 Jenkins 中使用 abvoe LDAP URL 时，Jenkins 在登录时成功地对用户进行身份验证，那么为什么在此服务器的 .conf 文件中同样不起作用。注意，在 apache2 中，以上内容不必在 httpd.conf 文件中。包含概念是让我包含 file.conf 和 file.conf 包含上述代码。这与 httpd.conf 文件中提到的 Apache2 方向一致。

其余的 mercurial 文件 hgwebdir.cgi、hgweb.cgi、hgweb.config 都很好（根据我读过的在线博客）。

我已经加载了所有必需的模块（因为它们在 /etc/apache2/sysconfig.d/loadmodule.conf 文件中可见（LDAP auth 所需的模块，即 mod_ldap、mod_authz_ldap 等与 ldap 和 apache 相关的模块）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:39:09.723

好的，没有使用我的 Windows Ldap 凭据的提示部分现在正在工作。

我说错了什么。- 见行：对于 AuthLDAPURL 和 AuthLDAPBindPassword，这些是我上面显示的帖子中的罪魁祸首。- 原因是，我是 Windows AD/LDAP 概念的新手，所以无法从我公司的系统团队中找到任何人。所以尝试了我自己的双手。AuthLDAPURL 的第一行，我从我们的一个 Jenkins 实例的 GLOBAL 配置文件 (config.xml) 中获得。

用于显示配置的 Jenkins GUI 不显示密码（因为它们被屏蔽了），因此您会看到 Manager 的 DN 密码为“* * * * * *”。所以，我想我应该打开 Jenkins 实例的 config.xml 文件并从那里得到密码“secret1”。实际上“secret1”只是一个例子，实际上它是一些疯狂的价值，比如“VVX12##!5GH”。

所以基本上我之前使用的那个不能正常工作，因为 LDAP 身份验证无法正常工作，你必须与 SYSTEMS 团队中的某人或 WHO 实际在 Jenkins 实例中为 LDAP 身份验证进行设置的人交谈。

最后我得到了密码，并且成功了。

# 解决方案：请参阅下面我所做的更改。

*   需要注意的一件重要事情是，在 Jenkins 中，LDAP 的 AUTHURL 是：

    AuthLDAPURL ldap://10.211.16.1:389/OU=TSH,DC=tsh,DC=Mason,DC=com?sAMAccountName

但是，从 Unix/Linux/在我的情况下，SUSE 机器上，我们必须将这一行稍微更改为

```
AuthLDAPURL ldap://10.211.16.1:389/OU=TSH,DC=tsh,DC=Mason,DC=com?sAMAccountName?sub 
```

有关此的更多信息（Apache2.2 连接到 Windows AD（Active Directory）身份验证）：PS：[http ://www.yolinux.com/TUTORIALS/LinuxTutorialApacheAddingLoginSiteProtection.html](http://www.yolinux.com/TUTORIALS/LinuxTutorialApacheAddingLoginSiteProtection.html)

然后 - 我在文件中输入了 cn=xyzserver（经理 DN 用户 ID）的正确密码，然后一切都很好。

apache 配置文件或您单独创建并包含在 httpd.file 或通过 /etc/sysconfig/apache2 文件管理器（变量 APACHE_INCLUDE...）的文件的快照现在看起来像：

```
<Directory /srv/www/htdocs/hg>
   Order deny,allow
   Deny from All
   AuthType Basic
   AuthName "LDAP Access - Mercurial"
   AuthBasicProvider ldap
   AuthzLDAPAuthoritative off
   AuthLDAPURL ldap://10.211.16.1:389/OU=TSH,DC=tsh,DC=Mason,DC=com?sAMAccountName?sub

#AuthLDAPURL "ldap://10.211.16.1:389/OU=TSH,DC=Mason,DC=com?sAMAccountName?sub?(objectClass=*)"

   AuthLDAPBindDN "cn=xyzserver,OU=Services,OU=Users,OU=Infrastructure,OU=DEN,OU=KSH,DC=Psh,DC=Mason,DC=com"

   AuthLDAPBindPassword CorrectPassword!

#   require ldap-user c149807
#   AuthUserFile "/dev/null"

   require valid-user
   Satisfy any
</Directory> 
```

我现在将在实际存储库中获取用户访问部分，因为 Auth 部分是从 IE（Internet Explorer）到 Hg（Mercurial）从 Linux/Unix/OpenSUSE 机器完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:39:40.097

如果在 mercurial 中多次提示用户凭据。设置 Mercurial_Keyring 然后

这个问题来了，没有人以简单的方式解释。

？？？如果我使用 servername、servername 的 IP 或 servername 的 FQDN，如何使 [auth] xx.prefix = servername/hg_or_something 对 servername/hg 位置下的所有存储库起作用？

答案：Arun • 2 分钟前 -</p>

```
OK, I put this in ~/.hgrc (Linux/Unix -home directory's .hgrc hidden file) or Windows users %UserProfile%/mercurial.ini or %HOME%/mercurial.ini file.

[auth]
default1.schemes = http https
default1.prefix = hg_merc_server/hg
default1.username = c123456

default2.schemes = http https
default2.prefix = hg_merc_server.company.com/hg
default2.username = c123456

default3.schemes = http https
default3.prefix = 10.211.222.321/hg
default3.username = c123456

Now, I can checkout using either Server/IP/Server's FQDN. 
```

# javascript - Zoomooz zoomContainer 移开

> ID：12345780
> 
> 赞同：4
> 
> 时间：2012-09-10T05:25:03.013
> 
> 标签：javascript, jquery, zooming, zoomooz

我正在尝试使用 zoomooz + jquery.mouse.wheel 和 jquery.kinetic.js 在表单设计器中实现自由拖动/滚动功能的缩放。这是该功能的演示：http: [//jsfiddle.net/mVf8Z/](http://jsfiddle.net/mVf8Z/)

我的问题是：

1.  “重置”按钮无法将状态重置为原始状态。它放大容器并将其移动到视口的右上角

2.  当我使用鼠标滚轮在容器内放大时，容器能够放大，但它总是移到视口的右上角

知道我的代码哪里错了吗？

**更新**

添加附加层后，似乎移开问题已解决，请查看[http://jsfiddle.net/mVf8Z/3/](http://jsfiddle.net/mVf8Z/3/)。但是，仍然存在2个问题：

1.  我无法使用 jquery.kinetic 拖动/滚动将页面滚动到预期的视口。在放大发生之前这是可以的

2.  单击重置按钮不会重置为原始状态，而是会缩小一点。

**更新 2**

我最终得到了一个基于 zynga scroller (http://zynga.github.com/scroller/) 的解决方案。这是小提琴：http: [//jsfiddle.net/mVf8Z/5/](http://jsfiddle.net/mVf8Z/5/)。这个解决方案的问题是放大效果与 zoomooz 相比很糟糕。我在[https://github.com/zynga/scroller/issues/28向 zynga 提交了一个问题](https://github.com/zynga/scroller/issues/28)

# javascript - PJAX 请求完成并下载资源后的回调

> ID：12345781
> 
> 赞同：1
> 
> 时间：2012-09-10T05:25:07.797
> 
> 标签：javascript, ajax, jquery-events, pjax

我的一个应用程序使用 PJAX 样式导航，这意味着我们使用 AJAX 加载部分页面，然后使用 HTML5 history/pushState API 更新浏览历史记录，而不是加载整个页面。

以前我使用该`window.onload`事件来测量最终用户页面加载时间，并且我希望能够通过 PJAX 页面加载记录这些时间，问题是在 PJAX 加载后此事件不会触发。

我可以访问一个`pjax:end`在 PJAX 请求完成后触发的事件，但是在所有资产完成下载之前触发。我希望能够测量下载页面所需的完整时间，包括下载额外（图像/脚本）资产的时间。

这可能吗？是否有我遗漏的回调或一些可以让我测量完整请求时间的魔法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:49:49.803

我意识到我只需要等待图像（而不是脚本）。一位朋友向我指出了这个 jQuery 插件：[https ://github.com/alexanderdickson/waitForImages](https://github.com/alexanderdickson/waitForImages)

我正在使用此代码来触发 onload 事件：

```
$('#main-inner').waitForImages(function() {
  window.onload();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T05:46:36.640

我认为异步加载的 HTML 块没有特定事件。我认为最好的选择是附加您的 html，找到每个`img`and `script`，然后为每个事件绑定到`load`事件（假设为 jQuery）。当加载数量等于您找到的元素数量时，所有内容都已加载。我希望这有帮助。

```
var start = new Date().getTime(),
    elems = $('#my-div').append(html).find('img, script'),
    count = 0;

elems.on('load', function () {
    if (++count === elems.length) {
        var diff = new Date().getTime() - start;
    }
}); 
```

# c# - WebAuthBroker 无法连接到服务，但在 IE 中手动发布是成功的

> ID：12345783
> 
> 赞同：0
> 
> 时间：2012-09-10T05:25:25.937
> 
> 标签：c#, windows-8, visual-studio-2012

我有一个 Windows 8 应用程序，它使用 WebAuthBroker 构建字符串并发布到 https：。相关代码如下。

问题是 WebAuthBroker 采用了这个 URI 并且无法连接，但是当我手动将此 URI 发布到 IE 中时，它工作正常。

在 Windows 8 上运行 VS2012。在 Package.appmanifest 中，启用了 Enterprise Authentication、Internet(Client)、Internet(Client&Server)、Private Networks(Client&Server) 和 Shared User Certificates。

```
 async Task AuthenticateAsync()
    {
        var requestUriStr = string.Format("{0}?client_id={1}&response_type=token&redirect_uri={2}", logonUriString, clientId, redirectUriString);

        requestUriStr += "&scope=stream";

        var requestUri = new Uri(requestUriStr, UriKind.RelativeOrAbsolute);
        var redirectUri = new Uri(redirectUriString, UriKind.RelativeOrAbsolute);

        var result = await WebAuthenticationBroker.AuthenticateAsync(WebAuthenticationOptions.None, requestUri, redirectUri);

        if (result.ResponseStatus != WebAuthenticationStatus.Success)
        {
            throw new Exception("Login failed: " + result.ResponseErrorDetail);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T02:31:23.463

我发现了我的问题。来自：[http ://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/13d3742d-4b6b-444e-840e-a4db11462a08](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/13d3742d-4b6b-444e-840e-a4db11462a08)

> 事实证明，如果您使用 Fiddler 调试您的 HTTP 请求，它将使 WebAuthenticationBroker 停止工作。这可能与此应用程序中提供的“解密 HTTPS 流量”选项有关，也可能无关，但是当我关闭 Fiddler 时，WebAuthenticationBroker 又开始工作了。我可以通过再次启动 Fiddler 来随意复制错误，并通过关闭它来解决问题。
> 
> 我没有深入研究启用或禁用 Fiddler 的 HTTPS 选项是否会影响 WebAuthenticationBroker 类和方法的使用，但乍一看似乎几乎不禁用 HTTPS 会使其再次工作。为了安全起见，我通常会亲自关闭它。

所以我在编写/调试的整个过程中都打开了 Fiddler。我关闭了 Fiddler，它第一次起作用了！

# c - 使用 OpenGL 时显示功能不起作用

> ID：12345795
> 
> 赞同：0
> 
> 时间：2012-09-10T05:26:29.680
> 
> 标签：c, sockets, opengl

我正在尝试使用 OpenGL 绘制一条线，而该线的两端坐标都在空闲函数中设置，但是当我使用套接字通过网络发送端点坐标时，它没有被绘制。下面是代码的快照

```
int  main(int argc, char **argv) 
{
glutInit(&argc,argv);
glutInitWindowSize( 1024,1024);       /* A x A pixel screen window  */

glutInitDisplayMode( GLUT_RGB | GLUT_SINGLE);
glutCreateWindow("Skeleton Tracker"); /* window title                   */
glutDisplayFunc(display);         /* tell OpenGL main loop what     */
glutIdleFunc(idle);

//first create the connection then we wil talk about the data transfer...
 /*****Code for server connection *****/

processRequest();
return 0;
}

void processrequest()
{
byte_sent = send(ClientSocket,(char*)&msg_pkt,sizeof(MSG_PACKET),0);
ofile<<"\nByte sent for start generating "<<byte_sent<<endl;
Sleep(1000);

memset(buf,0,sizeof(buf));

glutMainLoop(); 
}

void display(void)
{
glClearColor(1.0f, 1.0f, 1.0f, 1.0f);                
glClear(GL_COLOR_BUFFER_BIT);     /* clear the window */
glColor3f ( 0.0, 1.0 , 0.0);       /* draw in light red */
glBegin(GL_LINES);
glVertex2f(x[0] , y[0]);
glVertex2f(x[1] , y[1]);
glEnd();

glEnd();
glFlush();

}

void idle(void)
{

printf("\nIn Idle function\n");

nRetVal = recv(ClientSocket , (char*)mainbuf , 192,0);

printf("\nAmount of data received : %d\n" , nRetVal);
memcpy(buf , mainbuf ,  sizeof(buf));   //buf is of 8 bytes to hold 2 floating nos.

memcpy( &x[p] ,buf , 4); // upto 3
x[p] = x[p]/10.0;

memcpy( &y[p] ,buf+4 , 4); //upto 7
y[p] = y[p]/10.0;

glutPostRedisplay();

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:45:22.197

你的程序设计是有问题的——你的空闲函数中有阻塞的 recv() 函数，这不好，空闲应该尽可能快，以免影响你的渲染。

考虑创建一个用于渲染的线程和第二个用于网络通信的线程，或者至少在您的空闲函数中使用不可阻塞的 recv() 来检查套接字上是否有任何可用数据，然后再从中读取（recv'ing）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:14:36.787

感谢哥们您的时间......实际上我忘记在调用 glutMainloop 之前定义正交投影矩阵......

```
gluOrtho2D( -250, 250, -250, 250); 
```

它现在工作。

# php - 全名字段中的空格验证

> ID：12345798
> 
> 赞同：0
> 
> 时间：2012-09-10T05:26:58.353
> 
> 标签：php, codeigniter

我想在全名字段中检查全名字段应该接受名字和姓氏之间的空格，使用我正在使用`strrpos()`它的函数但不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:30:34.990

你可以使用正则表达式...

```
if (preg_match("/(.+)( )(.+)/", $full_name))
{ 
// returns true if name is formed of two words with a space between
} 
```

为了更好的验证，您可以使用 \w 尽管请记住它只会匹配英文单词字符。有关更多信息，请参见此处：[为什么 \w 仅匹配 javascript 正则表达式中的英文单词？](https://stackoverflow.com/questions/397788/why-does-w-match-only-english-words-in-javascript-regex#397801)

```
preg_match("/(\w+)( )(\w+)/", $full_name) 
```

# drupal - 如何在 Drupal 的管理员端显示表格数据？

> ID：12345800
> 
> 赞同：0
> 
> 时间：2012-09-10T05:27:12.340
> 
> 标签：drupal, admin, drupal-webform

我创建了自定义表，该表中的条目是使用 webform 从前端完成的。

整个过程工作正常，邮件也发送给管理员，但我需要在单独的页面中向管理员显示该表信息，例如在网格视图或表列表中

那么有没有办法制作一个页面，只有管理员才能看到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:40:36.253

看起来您应该能够使用[Views](https://drupal.org/project/views)和[Webform MySQL Views](https://drupal.org/project/webform_mysql_views)来实现这一点。基本上，Views 是一个很棒的模块，用于在 Drupal 中构建和显示数据（通常是内容）。Webform 数据通常无法在 Views 中访问，但 Webform MySQL Views 解决了这个问题。

# hardware - 块和扇区之间的区别

> ID：12345804
> 
> 赞同：23
> 
> 时间：2012-09-10T05:27:38.247
> 
> 标签：hardware, block, sector

参考[这篇](http://www.alphaurax-computer.com/computer-tips/hard-drive-knowledge-blocks-vs-sectors)文章，有一行写着：

> 因为操作系统可以寻址的块或驱动器地址的数量是有限的。通过将一个块定义为多个扇区，操作系统可以在不增加块地址数量的情况下使用更大的硬盘驱动器。

这是什么意思？“操作系统可以寻址”是什么意思？随后的数学也不清楚。64*512怎么会小于64*4呢？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-10T05:45:09.040

这样看。操作系统文件系统中用于存储数据的每个块都需要一定数量的元数据与您正在写入的实际文件数据一起存储。例如：时间戳（创建、修改）、文件名、所有权/权限位。对于跨越多个块的文件，您还必须存储每个块的 ID 以及它们链接在一起的顺序等。

确定操作系统中的块大小是一种权衡的情况。每个文件必须至少占据一个块，即使文件长度为 0 字节，所以文件的元数据需要附加到一些东西上。除非您可以保证您的文件的大小始终是块大小的倍数（例如，在 4k 块 OS 中，所有文件都是 4k），否则对于不完全适合的文件会有一定的浪费那个街区。

当您需要存储许多小文件时，小块大小很好。另一方面，更多块 = 更多元数据，因此您最终会在开销上浪费大量存储系统，跟踪所有文件的位置。

另一方面，大块意味着更少的元数据，但在存储小文件时也意味着更大的浪费。例如，存储在 4k 块中的 1 字节文件浪费了该块的 3.99k。

操作系统必须为这些块中的每一个分配一个 ID 号，以便对其进行唯一标识。使用 8 位 ID 字段的操作系统只能跟踪 256 个块，因此，通过扩展，只能跟踪 256 个文件。但如果这些块中的每一个实际上都是 1 兆字节，那么您最多可以存储 256 兆字节的数据。

您链接到的文章有一个错字/逻辑缺陷：它们的意思是 512 **BYTES**，而不是 512k，所以 64*512 字节小于 64*4k，即 64*4096 字节。大多数硬盘驱动器附带 512 字节的扇区/块大小。

然而，如前所述，小块意味着更多的元数据。现在驱动器大小在 3+ TB 范围内，具有 512 字节块，您必须拥有 3TB/512 字节 = 64.4 亿块的元数据存储。这是空间的一大浪费。因此，现在他们交付的驱动器具有 4k 块，大 8 倍，因此您只需要存储 8.05 亿块的元数据。可能的文件总数减少了 8 倍，但元数据量的减少意味着您实际上可以存储更多的可用数据。

顺便说一句，64 亿块比 32 位系统可以直接寻址的块要大。2^32 的上限约为 42 亿，因此较旧的 32 位机器无法使用整个 3TB 驱动器。因此切换到更大的块大小。32 位盒子可以轻松处理 8.05 亿个区块。

# database - 数据库与 Base 或 MS 访问中的表有什么关系？

> ID：12345805
> 
> 赞同：-2
> 
> 时间：2012-09-10T05:27:40.703
> 
> 标签：database, ms-access

数据库如何与 Base 或 MS 访问中的表相关，我想知道数据库如何与表相关的关系的答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:37:20.183

好吧，鉴于问题中的简约细节：

> 数据库包含表。

[表（数据库）](http://en.wikipedia.org/wiki/Table_%28database%29)

# php - 将会话转移到另一个网站

> ID：12345807
> 
> 赞同：0
> 
> 时间：2012-09-10T05:27:51.187
> 
> 标签：php, session

我`moodle LMS`在三个不同的国家（例如：印度、美国、欧洲）。对于这些站点，他们有*单独的管理员*。假设我是主要*管理员*，我希望能够一次*登录*管理所有网站。

如果我登录*Indian LMS*并选择*America LMS* in `DROP DOWN`，那么*会话*应该*转移到* **America LMS**。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:07:43.687

您将遇到 cookie 域限制作为您的第一个主要障碍。本质上，您无法从发布它的域以外的域读取登录 cookie（会话工作所必需的），因此**us-foo.com**上的 moodle 实例将永远无法从**eu-bar.com**。

解决此问题的最简单方法是使用单独的登录表单。提交时，使用 JavaScript 打开隐藏的 iFrame 到所有三个站点的登录页面，用户名和密码通过`GET`参数传递。Moodle 本身可能不支持使用`GET`;发送登录凭据。您可能需要编辑登录脚本。

不过，有一个关于使用 Moodle 进行此操作的论坛主题 -[你可能很幸运。](http://moodle.org/mod/forum/discuss.php?d=204823&parent=893843)

但无论如何，要使这样的登录多路复用 hack 起作用，这意味着您必须在三个站点之间保持管理员用户名和密码不变。如果它们都从同一个数据库运行，您可以使用触发器在数据库中强制执行此操作；否则，您将需要更改密码更改脚本以将这些更改写入远程数据库。

这是一项严肃的事业吗？有点儿。不幸的是，它不是一个非常强大的解决方案，并且在更新等方面可能非常脆弱。您可能会发现最好的选择是单独登录，特别是考虑到这些黑客不容易嵌入到站点的主登录中，并且您需要使用类似的临时同步来进行日志记录也可以通过网络进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:51:11.420

如果您的网站是同一域的子域，您应该考虑阅读以下内容： [PHP Sessions across sub domain](https://stackoverflow.com/questions/1064243/php-sessions-across-sub-domains)

为主域和所有子域设置cookie。因此，您可以从**us.foo.com**和**eu.foo.com读取相同的 cookie**

另外，您应该有一个唯一的用户数据库或多个同步（无论如何我更喜欢第一个选项）。

# android - 如何在屏幕上创建应用程序图标时防止吐司消息

> ID：12345809
> 
> 赞同：3
> 
> 时间：2012-09-10T05:28:19.467
> 
> 标签：android, icons, toast

我想在手机屏幕上创建**appp 图标**并且我这样做了，但是当我这样做时，**应用程序会自动创建 toast 消息**，如何在创建应用程序图标或删除屏幕上的图标时防止此 toast 消息？谢谢。

![在此处输入图像描述](../Images/702f142c2faac9391eee39031c759122.png)

**那是我如何做的代码**

```
private void addShortcut(){
Intent shortcutIntent = new Intent("com.android.launcher.action.INSTALL_SHORTCUT");

// Shortcut name
shortcutIntent.putExtra(Intent.EXTRA_SHORTCUT_NAME, getString(R.string.app_name));
shortcutIntent.putExtra("duplicate", false);

ComponentName comp = new ComponentName(this.getPackageName(), "."+this.getLocalClassName());
shortcutIntent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, new Intent(Intent.ACTION_MAIN).setComponent(comp));

// Shortcut icon
ShortcutIconResource iconRes = Intent.ShortcutIconResource.fromContext(this, R.drawable.icon);
shortcutIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE, iconRes);

sendBroadcast(shortcutIntent);
}

private void delShortcut(){
Intent shortcut = new Intent("com.android.launcher.action.UNINSTALL_SHORTCUT");

// Shortcut adı
shortcut.putExtra(Intent.EXTRA_SHORTCUT_NAME, getString(R.string.app_name));

String appClass = this.getPackageName() + "." +this.getLocalClassName();
ComponentName comp = new ComponentName(this.getPackageName(), appClass);
shortcut.putExtra(Intent.EXTRA_SHORTCUT_INTENT, new Intent(Intent.ACTION_MAIN).setComponent(comp));

sendBroadcast(shortcut);
}

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
delShortcut();
addShortcut(); 
```

**添加快捷方式的权限**

```
<uses-permission android:name="com.android.launcher.permission.INSTALL_SHORTCUT"></uses-permission>
<uses-permission android:name="com.android.launcher.permission.UNINSTALL_SHORTCUT" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:37:12.013

不，抱歉，没有办法阻止默认系统`Toast`的出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:01:11.230

创建隐藏属性（我创建 CheckBox），在创建快捷方式后将其设置为 true，然后检查参数：

```
private void checkShortcut() {
        shortCut = GlobalClass.PREFS.getBoolean("ShortCut", false);
        if (shortCut == true) {
            //addShortcut();
        }
        else{
            remShortcut();
        }

    } 
```

# c# - Windows 便携式设备 API 和 WPD_COMMAND_STILL_IMAGE_CAPTURE_INITIATE 命令

> ID：12345810
> 
> 赞同：1
> 
> 时间：2012-09-10T05:28:21.530
> 
> 标签：c#, winforms, automation, camera, wpd

我目前正在为需要使用固定相机收集站在柜台前的人的照片的政府机构编写 C# windows 窗体应用程序。要收集照片，应用程序需要操作静态相机并检索图像。

该应用程序将在 Windows7 上运行，因此不支持 WIA（Windows 图像采集）。我使用 Windows 便携式设备 API 编写了代码，以从插入计算机的设备中获取支持的命令列表。

要让应用程序拍照，插入计算机（相机）的设备必须支持`WPD_COMMAND_STILL_IMAGE_CAPTURE_INITIATE`. 目前，我可以访问的相机（各种佳能 powershots）都不支持所需的`WPD_COMMAND_STILL_IMAGE_CAPTURE_INITIATE`命令，并且很多互联网搜索都没有显示支持该`WPD_COMMAND_STILL_IMAGE_CAPTURE_INITIATE`命令的相机列表。大多数相机支持存储命令，但不支持通过 Windows 便携式设备 API 以编程方式拍摄照片。

是否有人使用 Windows 便携式设备 API 和 WPD_COMMAND_STILL_IMAGE_CAPTURE_INITIATE 命令成功拍摄并检索了照片？如果是这样，您使用的是什么品牌和型号的相机？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T18:30:03.110

WPD_COMMAND_STILL_IMAGE_CAPTURE_INITIATE maps to the InitiateCapture (0x100E) PTP command.

This list has some PTP cameras that support InitiateCapture: [http://www.circuitsathome.com/ptpusb-control-camera-data](http://www.circuitsathome.com/ptpusb-control-camera-data)

# .net - 我必须通过 .Net 使用 MS office 2010 处理 Microsoft Office Document 映像。我该怎么做？

> ID：12345811
> 
> 赞同：1
> 
> 时间：2012-09-10T05:28:22.957
> 
> 标签：.net, ms-office, modi

我的系统中有 MS Office 2010，我需要安装 Microsoft Office document Imaging (MODI)。由于它在 2010 年不可用，我已按照中给出的步骤（方法 3）

[http://support.microsoft.com/kb/982760](http://support.microsoft.com/kb/982760)

站点并已安装 MODI。但我在开始菜单中看不到 MODI，但可以通过命令提示符查看

我已经下载了 MDIVWCTL.DLL 并正在尝试注册它，但我无法注册它，因为它说找不到指定的模块。

现在我想知道如何通过 .NET 使用它。请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T06:00:53.957

您需要添加对 .net 项目的引用。添加参考时，转到 com 选项卡并查找 Ms Office Document Imaging Library (MODI) 12.0。

# javascript - javascript函数的执行顺序和函数后面的代码？

> ID：12345812
> 
> 赞同：0
> 
> 时间：2012-09-10T05:28:39.990
> 
> 标签：javascript, asp.net, button, code-behind

我有一个asp服务器按钮，我有onClick用于代码执行背后的代码，onClientClick用于执行javascript函数。

```
<asp:Button ID="Button1" runat="server" onclick="Button1_Click" 
        style="z-index: 1; left: 648px; top: 202px; position: absolute" 
        Text="Show route" OnClientClick="droute(); return false" /> 
```

我无法确定是先生成 onClick 事件还是先执行 onClientClick 还是它们并行运行？我希望先生成 onClick 事件，然后再生成 onClientClick，因为后者需要从前者检索值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T05:33:51.937

如果您想控制执行顺序，您可以只创建一个 javascript 函数，以所需的顺序调用您的其他两个函数，然后将一个函数与 ASP.NET 挂钩，`onclick`而不是将任何内容留给 ASP.NET？

```
<asp:Button ID="Button1" runat="server" onclick="thisClick()" 
    style="z-index: 1; left: 648px; top: 202px; position: absolute" 
    Text="Show route"/>

function thisClick() {
    Button1_Click.apply(this, arguments);
    droute.apply(this, arguments);
    return false;
} 
```

# garbage-collection - cassandra 磁盘空间使用情况

> ID：12345817
> 
> 赞同：0
> 
> 时间：2012-09-10T05:29:01.373
> 
> 标签：garbage-collection, cassandra

问题：我们cassandra的数据库占用了很多磁盘空间。估计的数据大小约为 10 Gb，而占用的磁盘空间约为 100 Gb。我们做了很多写入/删除。我们有两个节点。

这是我们尝试做的事情（按照完成的顺序）：

1.  在两个节点上运行压缩 - 已完成，但效果为零
2.  将 gc_grace 设置为 0。
3.  在两个节点上运行修复 - 一个节点成功，另一个修复“挂断” - 它还活着，但持续了 3 天，之后我们将其切断。
4.  在两个节点上运行压缩 - 已完成，但效果仍然为零。

有人可以帮忙吗？我们接下来应该做什么？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-29T08:10:03.360

我在 Cassandra 2.0.9 中遇到了类似的问题。

通过`nodetool clearsnapshot`在每个节点上使用，我成功地清理了 HDD 上的空间。可以仅删除指定列族的快照。可以在[此处](http://www.datastax.com/documentation/cassandra/1.2/cassandra/tools/toolsNodetool_r.html)找到有关 nodetool 实用程序使用的详细信息。

# java - 这是解析字符串的好方法吗？

> ID：12345822
> 
> 赞同：0
> 
> 时间：2012-09-10T05:29:52.663
> 
> 标签：java, parsing

我的程序从带有格式的纯文本文件中读取行：`<integer>;<integer>%n`，`;`分隔符在哪里。它将两个解析的整数与其他 2 个已知值进行比较，`tallyArray[i]`如果它们匹配则递增。

我目前使用：

```
try {
    scan = new Scanner(new BufferedReader(new FileReader("LogFileToBeRead.txt")));

    for (int i = 0; i < tallyArraySize; i++) {
        explodedLogLine = scan.nextLine().split(";");

        if (IntReferenceVal1 == Integer.parseInt(explodedLogLine[0]) && IntReferenceVal2 == Integer.parseInt(explodedLogLine[1])) {
           tallyArray[i]++;
        }
    }
} finally {
    if (scan != null) { scan.close(); }
} 
```

我想知道这种方法是否有任何严重的错误。它不需要是生产质量的。

另外，有没有像这样解析字符串的标准方法？

编辑：我们可以假设文本文件格式完美。但我看到了考虑可能的例外情况的重要性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:35:35.347

据我所知，该程序存在三个缺陷。

1.  分隔符`;`如果有分隔符被意外删除或意外添加怎么办
2.  应该检查`explodedLogLine`它是否有长度`2`，`null`否则会导致意外的运行时错误
3.  您应该捕获`NumberFormatException`格式异常，因为您永远无法确定 Input 始终是数字

下面的一个简单说明让您了解事情将如何出错。

```
 String str = "3;;3";
    System.out.println(Arrays.toString(str.split(";"))); 
```

此代码将在这种情况下打印，因为`[3, , 3]`您的程序将生成字符串无法解析为整数。`NumberFormatException``""`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:35:43.273

您没有处理方法调用`NumberFormatExceptions`引发的问题。`Integer.parseInt()`如果有一行错误，则执行退出您的 for 循环。

您没有审查正在读取的文件的完整性。如果没有`;`字符或者字符串实际上不是数字，则执行只会退出您发布的代码块。

* * *

如果您可以假设文件格式完美，并且您准备使用扫描仪，则可以将`;`分隔符添加到扫描仪：

```
scan = new Scanner(new BufferedReader(new FileReader("LogFileToBeRead.txt")));
scan.useDelimiter(Pattern.compile("(;|\\s)"));

for (int i = 0; i < tallyArraySize; i++) {
    int ref1 = scan.nextInt();
    int ref2 = scan.nextInt();

    if (IntReferenceVal1 == ref1 && 
        IntReferenceVal2 == ref2) {
       tallyArray[i]++;
    }
} 
```

只需`Scanner.nextInt()`为每条线路调用两次。

# scala - scala：向枚举添加方法

> ID：12345823
> 
> 赞同：4
> 
> 时间：2012-09-10T05:29:54.817
> 
> 标签：scala, enums

我有一个像这样的简单枚举：

```
object ConditionOperator extends Enumeration {

  val Equal           = Value("equal")
  val NotEqual        = Value("notEqual")
  val GreaterOrEqual  = Value("greaterOrEqual")
  val Greater         = Value("greater")
  val LessOrEqual     = Value("lessOrEqual")
  val Less            = Value("less") 
```

我想为每个枚举添加一个方法，以便我可以像这样使用它：

```
def buildSqlCondition(field: String, operator: ConditionOperator.Value, value: String ) = {
  val sqlOperator = operator.toSql
  [...] 
```

所以，ConditionOperator.Equal.toSql 会返回“=”，而 ConditionOperator.NotEqual.toSql 会返回“<>”，等等......

但我不知道如何定义 toSql 方法，以便每个枚举都可以“看到”它自己的值并决定如何将自己转换为 sql 运算符......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T05:37:34.337

这是我在过去对该主题的各种搜索中为 Scala 2.9.2 找到的示例：

```
object Progress extends Enumeration {
    type enum = Value

    val READY = new ProgressVal {
      val isActive = false
      def myMethod: Any = { .. }
    }

    val EXECUTE = new ProgressVal {
      val isActive = true
      def myMethod: Any = { .. }
    }

    val COMPLETE = new ProgressVal {
      val isActive = false
      def myMethod: Any = { .. }
    }

    protected abstract class ProgressVal extends Val() {
      val isActive: Boolean
      def myMethod: Any
    }
    implicit def valueToProgress(valu: Value) = valu.asInstanceOf[ProgressVal]
}
type Progress = Progress.enum 
```

*   `implicit`是使其可用的关键。

*   和有点多余`type enum`；`type Progress`我将它们包括在内是为了将这两个概念都介绍为我发现有帮助的东西。

* * *

为了给予应有的荣誉，最初的想法来自 Sean Ross[在回答这个问题是重复的问题时](https://stackoverflow.com/questions/4346580/how-to-add-a-method-to-enumeration-in-scala?rq=1)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T09:53:57.480

您可以从定义一个覆盖`Enumeration.Val`. 为简化起见，我们称它为（我们重载了定义`Value`的原意）。所以我们有了新的类型，它继承了它本身继承了。`Value``Enumeration``Value``Enumeration.Val``Enumeration.Value`

鉴于它`toSql`没有副作用并为每个枚举返回不同的字符串，您不妨将其设为`val`.

最后，为了使其完全可用，您需要让 ConditionOperator.apply 和 ConditionOperator.withName 返回新定义的`Value`类，而不是. 否则，当使用 apply 或 withName 按索引/名称查找实例时，将无法调用 toSql，因为枚举类型不够具体。理想情况下，我们只想覆盖并添加强制转换，但这些方法是最终的。但是我们可以在这里使用一个小技巧：定义新方法 和`Value``Enumeration``ConditionOperator``apply``withName``ConditionOperator.Value``apply``withName`具有相同的签名，但有一个始终可用的附加隐式参数（Predef.DummyImplicit 非常适合此卷）。附加参数确保签名不同，以便我们能够定义这些新方法，同时与原始的 apply/withName 方法几乎没有区别。scala 中重载解析的规则确保我们的新方法是编译器喜欢的方法（因此我们在实践中隐藏了原始方法）。

```
object ConditionOperator extends Enumeration {
  // Here we overload the meaning of "Value" to suit our needs
  class Value(name: String, val toSql: String) extends super.Val(name) {
    def someFlag: Boolean = true // An example of another method, that you can override below
  }
  val Equal           = new Value("equal", "=")
  val NotEqual        = new Value("notEqual", "<>")
  val GreaterOrEqual  = new Value("greaterOrEqual", ">=")
  val Greater         = new Value("greater", ">")
  val LessOrEqual     = new Value("lessOrEqual", "<=") { override def someFlag = false }
  val Less            = new Value("less", "<")  
  final def apply(x: Int)( implicit dummy: DummyImplicit ): Value = super.apply(x).asInstanceOf[Value]
  final def withName(s: String)( implicit dummy: DummyImplicit ): Value = super.withName(s).asInstanceOf[Value]
} 
```

您可以检查您现在是否可以执行`ConditionOperator(2).toSql`ConditionOperator.withName("greaterOrEqual") 之类的操作，它们都按预期返回 ">="。最后，上面的体操可以抽象掉：

```
abstract class CustomEnumeration extends Enumeration {
  type BaseValue = super.Val
  type CustomValue <: super.Value
  type Value = CustomValue
  final def apply(x: Int)( implicit dummy: DummyImplicit ): CustomValue = super.apply(x).asInstanceOf[CustomValue]
  final def withName(s: String)( implicit dummy: DummyImplicit ): CustomValue = super.withName(s).asInstanceOf[CustomValue]
}
object ConditionOperator extends CustomEnumeration {
  class CustomValue(name: String, val toSql: String) extends BaseValue(name) {
    def someFlag: Boolean = true
  }
  val Equal           = new Value("equal", "=")
  val NotEqual        = new Value("notEqual", "<>")
  val GreaterOrEqual  = new Value("greaterOrEqual", ">=")
  val Greater         = new Value("greater", ">")
  val LessOrEqual     = new Value("lessOrEqual", "<=") { override def someFlag = false }
  val Less            = new Value("less", "<")  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T05:53:48.067

```
object ConditionOperator extends Enumeration {

  implicit def overrideValue(v:Value) = new OverridedValue(v)
  class OverridedValue(val v:Value) {
    def toSql = v.toString
  }
  val Equal           = Value("=")
  val NotEqual        = Value("<>")
  val GreaterOrEqual  = Value(">=")
  val Greater         = Value(">")
  val LessOrEqual     = Value("<=")
  val Less            = Value("<")

}

import ConditionOperator._

assert(Equal.toSql == "=") 
```

在 scala 2.10 中，您可以通过使用隐式类使其更简单，替换

```
implicit def overrideValue(v:Value) = new OverridedValue(v)
class OverridedValue(val v:Value) {
  def toSql = v.toString
} 
```

和

```
implicit class OverridedValue(val v:Value) {
  def toSql = v.toString
} 
```

# ruby - 在编写 gem 时，默认包含它的模块有多糟糕？

> ID：12345824
> 
> 赞同：0
> 
> 时间：2012-09-10T05:30:02.227
> 
> 标签：ruby, include, gem

在编写 Ruby 库时，什么时候可以在一个文件中执行此操作？

```
module MyLib
  # some definitions
end

include MyLib 
```

我发现通常，一个人必须

```
require 'some_gem' 
```

首先，然后

```
include SomeGem 
```

但是我想知道，在一些更简单的情况下，当您只想为核心添加一点功能时，是否可以默认包含主模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T05:42:50.580

require 'some_gem' / include SomeGem 组合主要在脚本中找到（与库相反）。在库中，将命名空间分开是很重要的——这是首先拥有命名空间的全部意义所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T05:35:47.593

是的，这是一种不好的做法。如果你包含它，那么你就是在选择人们如何使用它。您正在为他们做出决定，他们希望将其包含在全局命名空间中。这不是你要做的决定，做一个优秀的 Ruby 公民，不要改变你的用户环境。允许他们选择他们想要如何使用代码。

# javascript - 使用 Ajax 上传 Javascript 表单

> ID：12345830
> 
> 赞同：0
> 
> 时间：2012-09-10T05:30:34.363
> 
> 标签：javascript

我使用以下函数使用 ajax 上传表单，

```
function directConvert(form, action_url, div_id){
        // Create the iframe...
        var iframe = document.createElement("iframe");
        iframe.setAttribute("id", "upload_iframe");
        iframe.setAttribute("name", "upload_iframe");
        iframe.setAttribute("width", "0");
        iframe.setAttribute("height", "0");
        iframe.setAttribute("border", "0");
        iframe.setAttribute("style", "width: 0; height: 0; border: none;");  
        // Add to document...
        form.parentNode.appendChild(iframe);
        window.frames['upload_iframe'].name = "upload_iframe";   
        iframeId = document.getElementById("upload_iframe");     
        // Add event...
        var eventHandler = function () {     
                if (iframeId.detachEvent) iframeId.detachEvent("onload",eventHandler);
                else iframeId.removeEventListener("load", eventHandler, false);             
                // Message from server...            

                if (iframeId.contentDocument) {
                    content = iframeId.contentDocument.body.innerHTML;
                } else if (iframeId.contentWindow) {
                    content = iframeId.contentWindow.document.body.innerHTML;
                } else if (iframeId.document) {
                    content = iframeId.document.body.innerHTML;
                }                   
                document.getElementById(div_id).innerHTML = content;     
                // Del the iframe...
                setTimeout('iframeId.parentNode.removeChild(iframeId)',50);
            }    
        if (iframeId.addEventListener) iframeId.addEventListener("load", eventHandler, true);
        if (iframeId.attachEvent) iframeId.attachEvent("onload", eventHandler); 
        // Set properties of form...
        form.setAttribute("target", "upload_iframe");
        form.setAttribute("action", action_url);
        form.setAttribute("method", "post");
        form.setAttribute("enctype", "multipart/form-data");
        form.setAttribute("encoding", "multipart/form-data");  
        form.submit();      
    } 
```

但提交后，表单在**新窗口中打开，而不是在同一窗口中打开。**如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:33:46.487

你试过用 `iframe.setAttribute("target", "_parent");`吗？

# android - 在android中滚动获取下一张图片

> ID：12345831
> 
> 赞同：0
> 
> 时间：2012-09-10T05:30:49.677
> 
> 标签：android, android-scrollview

我有一个`ImageView`内部。`RelativeLayout`它从中获取图像`database`。我想向它添加滚动事件，这样当滚动图像时，我应该根据滚动方向获取下一个和上一个图像。

我怎么能在android中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:24:22.647

## [OnScrollListener](http://developer.android.com/reference/android/widget/AbsListView.OnScrollListener.html)

*   滚动列表或网格时要调用的回调的接口定义。

实施`onScrollListner`如下代码的示例 -

```
//Here is where the magic happens
this.getListView().setOnScrollListener(new OnScrollListener(){

//useless here, skip!
@Override
public void onScrollStateChanged(AbsListView view, int scrollState) {}

//dumdumdum
@Override
public void onScroll(AbsListView view, int firstVisibleItem,
    int visibleItemCount, int totalItemCount) 
    {
        //what is the bottom iten that is visible
        int lastInScreen = firstVisibleItem + visibleItemCount;             

        //is the bottom item visible & not loading more already ? Load more !
        if((lastInScreen == totalItemCount) && !(loadingMore)){
            Thread thread =  new Thread(null, loadMoreListItems);
            thread.start();
        }
    }
}); 
```

看看[这个例子](http://p-xr.com/android-tutorial-dynamicaly-load-more-items-to-the-listview-never-ending-list/)，你也可以[在 ListView 中使用这个 Lazy load of](https://stackoverflow.com/q/541966/940096) images

# drupal-7 - 在 Drupal 7 中创建项目部分

> ID：12345833
> 
> 赞同：3
> 
> 时间：2012-09-10T05:31:08.160
> 
> 标签：drupal-7

我是 Drupal 的新手，想做以下事情：

1.  允许简单的用户注册过程
2.  一旦用户注册，允许他们注册一个项目->一个项目将基本上有一个名称、一个地址和一张图片。
3.  允许项目内部有团队

请指导如何进行以及执行此操作所需的模块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T05:44:08.330

因此，有一个名为“用户”的核心模块。这允许创建用户名和身份验证。只需转到“管理员/模块”并启用它。然后花一些时间来熟悉它在创建帐户和管理用户方面的工作原理。

如果您需要额外的登录功能（例如能够使用电子邮件地址而不是用户名登录），有一个名为[LoginToboggan](http://drupal.org/project/logintoboggan)的模块提供了很多很好的功能

对于用户配置文件，有一个名为[Profile2](http://drupal.org/project/profile2)的新 Drupal 7 模块应该可以满足您的需求。只需安装它及其依赖项并指定哪些字段应位于用户配置文件中。

对于团队和项目，我认为您可能以错误的方式思考事情。查看模块[Organic Groups](http://drupal.org/project/og)。这将允许您或用户创建自己的团队，然后可以与不同的节点相关联。

最后，创建一个名为 Project 的节点类型。指定该项目所需的任何字段。然后，设置您的权限，以便用户可以创建组和创建新项目。

# python - 实时GPS跟踪

> ID：12345839
> 
> 赞同：0
> 
> 时间：2012-09-10T05:32:54.387
> 
> 标签：python, gps, real-time, sms-gateway, real-time-data

我正在尝试使用 python() 制作实时 GPS 跟踪设备。

# 特征

我有 10 个固定位置

```
loc0 = (lat0,lon0)
loc1 = (lat1,lon1)
loc2 = (lat2,lon2)
loc3 = (lat3,lon3)
loc4 = (lat4,lon4)
loc5 = (lat5,lon5)
loc6 = (lat6,lon6)
loc7 = (lat7,lon7)
loc8 = (lat8,lon8)
loc9 = (lat9,lon9) 
```

我现在的位置

```
locCurrent = (latCurrent,lonCurrent) 
```

# 计算距离的代码

```
def haversine(lon1, lat1, lon2, lat2):
    """
    Calculate the great circle distance between two points 
    on the earth (specified in decimal degrees)
    """
    # convert decimal degrees to radians 
    lon1, lat1, lon2, lat2 = map(radians, [lon1, lat1, lon2, lat2])
    # haversine formula 
    dlon = lon2 - lon1 
    dlat = lat2 - lat1 
    a = sin(dlat/2)**2 + cos(lat1) * cos(lat2) * sin(dlon/2)**2
    c = 2 * asin(sqrt(a)) 
    km = 6367 * c
    return km 
```

# 怀疑

1.）当距离小于 5 公里时，我应该如何有效地触发功能，例如发送电子邮件或短信（一种可能的方法是运行无限循环并检查距离（此处为 5 公里） ，但这不是很有效，）

2.）这是除了python之外最喜欢的语言来完成同样的事情

请建议一些有关相同的文档**教程，在此先感谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:57:40.130

如果您打算通过串行端口不断收集 GPS 数据，请查看扭曲服务器（它的反应器支持来自串行端口的事件） [http://twistedmatrix.com/trac/](http://twistedmatrix.com/trac/) 有一个示例不断获取 gps 位置串行 - 请参阅此页面上的 gpsfix.py [http://twistedmatrix.com/documents/current/core/examples/](http://twistedmatrix.com/documents/current/core/examples/) 。它可能不是您想要的，但它是一个很好的起点，并且允许您使用一些工作代码来评估该方法。

# python - 如何通过 WebKit [PySide/PyQt] 发送 POST 请求

> ID：12345841
> 
> 赞同：1
> 
> 时间：2012-09-10T05:33:00.843
> 
> 标签：python, pyqt, pyside

使用 PySide，如何从 python 代码中的 webkit 表单中获取 POST 数据？

这是我的简单代码：

```
 import sys 
    from PySide.QtCore import * 
    from PySide.QtGui import QApplication 
    from PySide.QtWebKit import QWebView 

    html = """ 
    <html> 
    <body> 
        <form action="" method="post"><input name="test" /><input type="submit" value="submit"/></form>
    </body> 
    </html> 
    """ 

    if __name__ == '__main__': 
        app = QApplication(sys.argv) 
        view = QWebView() 
        frame = view.page().mainFrame() 
        view.setHtml(html) 
        view.show() 
        app.exec_() 
```

我想得到我提交的字符串[key=test]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T06:50:47.713

通过将您的自定义 createRequest 虚函数绑定到网络管理器，您可以看到正在发布的数据：

**注意：**使用*data.readAll()*将清空顺序*QIODevice*，因此稍后 webkit 将无法访问数据，并且不会发布任何内容。使用*data.peak(1024)* 将具有相同的效果而不会丢失数据，唯一的不便是您必须传递您希望读取的数据大小。

```
import sys 
from PySide.QtCore import * 
from PySide.QtGui import QApplication 
from PySide.QtWebKit import QWebView, QWebPage
from PySide.QtNetwork import QNetworkAccessManager

html = ''' 
<html> 
<body> 
    <form action="http://www.google.com" method="post"><input type="text" name="test" /><input type="submit" value="submit"/></form>
</body> 
</html> 
''' 

class Browser(object):

    def __init__(self):
        self.network_manager = QNetworkAccessManager()
        self.network_manager.createRequest = self._create_request

        self.web_page = QWebPage()
        self.web_page.setNetworkAccessManager(self.network_manager)

        self.web_view = QWebView()
        self.web_view.setPage(self.web_page)

        self.html_data = None

    def _create_request(self, operation, request, data):
        # data contains all the post data that is being added to the request
        # so you can look into it here
        print data.readAll()
        reply = QNetworkAccessManager.createRequest(self.network_manager,
                                                    operation,
                                                    request,
                                                    data)
        return reply

if __name__ == '__main__': 
    app = QApplication(sys.argv) 
    browser = Browser() 
    frame = browser.web_page.mainFrame() 
    browser.web_view.setHtml(html) 
    browser.web_view.show() 
    app.exec_() 
```

# c# - 使用 DotNetZip 仅从 zip 中提取 XML 文件

> ID：12345843
> 
> 赞同：1
> 
> 时间：2012-09-10T05:33:12.930
> 
> 标签：c#, .net, xml, zipfile, dotnetzip

我想提取存档中的所有 XML 文件，我正在使用 DotNetZip 提取文件。

在 DotNetZip 的文档中，这是一个示例：

```
using (ZipFile zip = ZipFile.Read(zipArchiveName))
{
  zip.ExtractSelectedEntries("name = *.xml  and  mtime > 2009-01-15");
} 
```

这是我的方法：

```
private void processButton_Click(object sender, EventArgs e)
{
    string uniquePath = string.Format(@"C:\{0}", Guid.NewGuid());
    System.IO.Directory.CreateDirectory(uniquePath);
    using (ZipFile zip = ZipFile.Read(textBox1.Text))
    {
        zip.ExtractSelectedEntries("name = *.xml");
    }
} 
```

但它什么也没提取。如何使用 DotNetZip 提取所有 xml 文件，感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:08:10.747

将*uniquePath*设置为当前目录，

```
string uniquePath = string.Format(@"C:\{0}", Guid.NewGuid());
System.IO.Directory.CreateDirectory(uniquePath);
using (ZipFile zip = ZipFile.Read(textBox1.Text))
    {
        System.IO.Directory.SetCurrentDirectory(uniquePath);
        zip.ExtractSelectedEntries("name = *.xml",,ExtractExistingFileAction.OverwriteSilently);
    } 
```

或使用，

```
var collections=zip.SelectEntries("name=*.xml");
foreach (var t in collections )
{
 t.Extract(uniquePath,ExtractExistingFileAction.OverwriteSilently);
 } 
```

# c++ - 使用提升条件变量

> ID：12345844
> 
> 赞同：3
> 
> 时间：2012-09-10T05:33:14.493
> 
> 标签：c++, boost

我正在设计一个异步记录器类，如下所示。但是，不确定我是否以正确的方式使用了 boost 条件变量。任何人都可以对此发表评论吗？这里的 processLogEntry 方法是一个线程函数，我在这里使用 boost。

```
void LogWriter::stopThread()
{
    mStop = true;
    mCond.notify_one();
    mThread->join();
}   

void LogWriter::processLogEntry()
{
    while(!mStop)
    {
        boost::mutex::scoped_lock lock(mMutex);
        mCond.wait(lock);
        while(!q.empty())
        {
            // process begins
        }
    }
}

void LogWriter::addLogEntry()
{
    boost::mutex::scoped_lock lock(mMutex);
    // add it in the queue
    mCond.notify_one();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T06:32:33.427

正如已经指出的那样，您必须使用互斥锁进行`mStop`原子访问或保护其*所有访问。*算了`volatile`，这与你的目的无关。

此外，当等待条件变量时，`wait`即使没有调用通知函数（这些是所谓的虚假唤醒），调用也可能返回。因此，`wait`需要保护调用。

```
void LogWriter::stopThread()
{
    {
        boost::mutex::scoped_lock lock(mMutex);
        mStop = true;
        mCond.notify_one();
    }
    mThread->join();

}   

void LogWriter::processLogEntry()
{
    for(;;) {
        boost::mutex::scoped_lock lock(mMutex);
        // We wait as long as we're not told to stop and
        // we don't have items to process
        while(!mStop && q.empty()) mCond.wait(lock);

        // Invariant: if we get here then
        // mStop || !q.empty() holds

        while(!q.empty())
        {
            // process begins
        }

        if(mStop) return;
    }
} 
```

# .net - .NET 3.5 中超过 100 万个有序集合的推荐数据结构

> ID：12345847
> 
> 赞同：10
> 
> 时间：2012-09-10T05:33:39.083
> 
> 标签：.net, performance, data-structures, collections, .net-3.5

我的数据结构知识太生疏了，老实说，这从来都不是我的强项。

现在我们要构建一个类似队列的组件，它具有以下要求：

1.  必须能够排队、出列和按键查找特定项目。
2.  每个项目将是一个结构或类，以另一个类为键，具有 5 个不同的属性，类似于类别。假设类似：MasterCategoryId、ChildCategoryId、TimeId、PriorityId、GroupId。
3.  它必须是一个排序集合。
4.  通常，该集合将容纳 5k 到 10k 个对象，但为了考虑最坏的情况，我们正在测试我们当前的原型以容纳大约一百万个对象。
5.  现在它不会是多线程的。
6.  集合中大约 90% 或 95% 的项目（排队）将在创建组件时发生，但该组件被用作树，从某种意义上说，我们将出列集合中的最后一个项目，请计算它，然后它将它的结果报告给它的父级，它可能已经在集合中，也可能不在集合中。如果不是，则用于尝试查找父项的队列方法将不得不插入该项目。
7.  由于组件就像一个正在处理的队列，因此在将所有内容出列后集合将为空。

我想总结一下。因此，显然单个列表或有序列表是不可能的，因为每次我们从集合中添加或删除对象时，它都会再次排序，并且在具有一百万个对象的单个集合中执行此操作很慢。

我们过去测试了几种方法，例如链表，事实证明这种方法排队速度快，但查找项目慢（因为我们确实有这种情况）。

现在我们已经想出了一个像这样的结构

```
SortedDictionary<int, SortedDictionary<int, SortedDictionary<int, SortedDictionary<int, SortedDictionary<int, .. 
```

你明白了。

这是分组级别的最佳选择，保持每个集合相对较小（每个字典大约 300 个项目）。

因此，对于第一级，我们将有一个 sorteddictionary，其键是每个主类别的 id，值将是一个 sorteddictionary，其键将是子类别的 id……等等.

现在我们已经测试了 100、1,000、10,000、100,000 和 1,000,000 个项目。

对于较小的范围，高达 100k，解决方案很快。它可以在不到一秒的时间内排队/出队/查找，甚至高达 300k，这确实高于我们将处理的 80-90% 的场景。

当涉及到一百万时，它确实会变得更慢，大约需要 3-4 秒来排队整个事情，最多需要 10 秒才能耗尽队列。

所以，我的问题是：

1.  是否有更适合我们特定场景的集合或方法？
2.  我以前从未使用过这么多的收藏品。对于如此高的数字，这些时间安排是否合理？我之所以问是因为我读过一些推文，这些人在 MSMQ 或 NserviceBus 之类的东西上每秒执行 20 万次操作（我知道这与此无关，我只是想理解和比较我的结果）。
3.  我现在在原型中使用的对象只是模拟类，只是复合对象键和单个属性。当我使用真正的课程时，我的结果会受到影响吗？我猜不是，因为所有框架都会添加对对象的引用，但只是想确认一下，因为就像我说的那样，数据结构从来都不是我最擅长的知识。
4.  作为一个单独的主题，如果我想为多线程做准备，我需要考虑哪些因素？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:48:07.623

几点说明和一般性建议（对不起，我没有时间测试自己）：

我相信您的一般方法 - 嵌套（排序）字典 - 是合理的。令我满意的是，我经常使用类似的结构 - 不是出于性能原因，因为我的案例总是很小，而是为了清晰和灵活。

在您的情况下，它还解决了性能问题之一，因为排序（在插入和删除时）需要时间，而较小的（子）字典显然排序更快。

是的，将类实例作为值（或键）仅使用引用，因此在这方面，您的类的大小或结构并不重要。

删除（和添加）的时间增加可能（主要）是由每次删除（或添加）项目时进行的重新处理引起的。

关于添加项目的性能：

如果您的案例使您能够以排序（升序）顺序为字典提供项目，您可能希望切换到 SortedLIST，而不是 SortedDICTIONARY，因为在列表中添加项目是 O(1) 而不是 O(log n ) 如果新项目将在排序集合结束时结束。

一个集合有一个初始的 CAPACITY - 为项目保留的空间。添加超出集合当前容量的项目会导致 (a) 增加集合的容量值；(b) 为（整个）新产能重新分配空间；(c) 将值从原始（小）存储复制到新存储。因此，如果您对集合的大小有所了解：使用适当的容量初始化集合。使用 sortedDictionary 时（还）不可能做到这一点，但 sortedLIST 支持该功能。

关于删除项目的表现：

您可能需要考虑使用一种使用自定义类包装排序集合的方法，这样它就不会“真正”删除项目（从而避免重新使用），直到整个集合为空。

总而言之，尝试使用以下几行（使用 vb 语法；我相信您可以将其翻译成 C#、C+ 或您希望使用的任何语言。

```
Public Class MySortedCollection(Of myKeyType, myValueType)

  Public Sub New(Optional myCapacity As Integer = 0)

    If myCapacity <= 0 Then
      MyValues = New SortedList(Of myKeyType, myValueType)
      ValidItems = New Dictionary(Of myKeyType, Boolean)
    Else
      MyValues = New SortedList(Of myKeyType, myValueType)(myCapacity)
      ValidItems = New Dictionary(Of myKeyType, Boolean)(myCapacity)
    End If

    LiveItemsCount = 0
  End Sub

  Private MyValues As SortedList(Of myKeyType, myValueType)

  Private ValidItems As Dictionary(Of myKeyType, Boolean)

  Private LiveItemsCount As Integer

  Public ReadOnly Property Count As Integer
    Get
      Return LiveItemsCount
    End Get
  End Property

  Public Sub Clear()
    MyValues.Clear()
    ValidItems.Clear()
    LiveItemsCount = 0
  End Sub

  Public Sub Add(key As myKeyType, value As myValueType)
    MyValues.Add(key, value)
    ValidItems.Add(key, True)
    LiveItemsCount += 1
  End Sub

  Public Function Remove(key As myKeyType) As Integer
    If ValidItems(key) Then
      ValidItems(key) = False
      LiveItemsCount -= 1
      If LiveItemsCount = 0 Then
        MyValues.Clear()
        ValidItems.Clear()
      End If
    End If
    Return LiveItemsCount
  End Function

  Public Function TryGetValue(key As myKeyType, ByRef value As myValueType) As Boolean
    If MyValues.TryGetValue(key, value) Then
      If ValidItems(key) Then
        Return True
      Else
        value = Nothing
      End If
    End If
    Return False
  End Function

  Public Function TryGetAndDelete(key As myKeyType, ByRef value As myValueType) As Boolean
    If Me.TryGetValue(key, value) Then
      ValidItems(key) = False
      LiveItemsCount -= 1
      If LiveItemsCount = 0 Then
        MyValues.Clear()
        ValidItems.Clear()
      End If
      Return True
    End If
    Return False
  End Function

  // add more collection-wrapping methods as needed

End Class 
```

您为包装类的开销以及内部用于跟踪“真实”项目与被认为已删除的项目的辅助字典“支付”性能方面的费用。但是，您可以在删除项目时保存重复排序。当然，这取决于实际情况是否会有所帮助（或有害......）。再说一次，我自己没有测试过。

# jquery - 无法绑定点击事件：H 是未定义的错误

> ID：12345853
> 
> 赞同：0
> 
> 时间：2012-09-10T05:34:19.650
> 
> 标签：jquery

我已经通过使用删除了点击事件，`$('#div_id').unbind('click');`但在某些情况下我想为同一个 div 添加点击事件。我用作`$('#div_id').bind('click');`.

但它在 firbug 中给出了错误，`H is undefined`因此我无法在点击事件中保留它。

我正在使用`jquery.min.js`. 是因为缩小版的jquery吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:38:59.267

你可以这样做：

*   在外部定义处理函数

*   并像下面这样使用

    ```
     function handlerFunction() {
       // code for click hander
      }

      $('#div_id').bind('click', handlerFunction); 
    ```

因为您必须使用事件***[bind()](http://api.jquery.com/bind/)***设置 handlerFunction 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:39:46.407

确保包含 click 事件的函数处理程序。此外，如果您担心交换特定 div 元素（但不是所有事件）的点击事件，那么只需考虑将 JQuery 委托事件处理程序用于父元素，然后仅使用一些状态变量来识别元素是否为“否”事件点击操作在它后面。

# codeigniter - codeigniter 上传图片和其他数据

> ID：12345862
> 
> 赞同：1
> 
> 时间：2012-09-10T05:36:16.363
> 
> 标签：codeigniter

我有一个表单正在提交，用户可以上传该表单中的图片，然后提交整个表单。我在 codeigniter 网站上找到了一个显示上传表单的教程（仅用于上传，而不是其他数据）。链接是：[Codeigniter 上传教程](http://codeigniter.com/user_guide/libraries/file_uploading.html)。如何提交表单然后上传文件，同时将其他详细信息上传到数据库中的其他表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:00:55.313

下面是一个例子

```
 function add_staff(){
            $this->load->library('form_validation');
            $this->load->helper(array('form', 'url'));
            // field name, error message, validation rules
            $this->form_validation->set_rules('name', 'Full name', 'trim|required');
                            $this->form_validation->set_rules('designation', 'Last Name', 'trim|required');
            if($this->form_validation->run() == FALSE)
            {   
                $data['main_content']   =   'staff/add_staff';
                $this->load->view('admin/template',$data);
            }
            else
            {
                $config['upload_path'] = 'uploads/staff/';
                $config['allowed_types'] = 'gif|jpg|png|jpeg';

                $this->load->library('upload', $config);
                $this->upload->initialize($config);
                if ( ! $this->upload->do_upload('file'))
                {
                                            $data['error'] = array('error' => $this->upload->display_errors());

                    $new_staff = array(
                            'name' => $this->input->post('name'),
                            'designation' => $this->input->post('designation'),
                                                            'phone' => $this->input->post('phone'),
                                                            'email' => $this->input->post('email'),
                                                            'address' => $this->input->post('address'),
                                                            'description' => $this->input->post('description'),
                            'status' => $this->input->post('status')
                    );

                }
                else
                {   
                    $file_data  =   $this->upload->data('file');

                    $new_staff = array(
                            'name' => $this->input->post('name'),
                            'designation' => $this->input->post('designation'),
                                                            'phone' => $this->input->post('phone'),
                                                            'email' => $this->input->post('email'),
                                                            'address' => $this->input->post('address'),
                                                            'photo' => $file_data['file_name'],
                                                            'description' => $this->input->post('description'),
                            'status' => $this->input->post('status')
                    );

                }                   
                    if($this->staff_model->add_staff($new_staff)):
                        $this->session->set_flashdata('success', 'Staff added Sucessfully !!');
                    endif;
                    redirect('admin/staff');                        
            }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:56:00.780

您可以将其他数据以及表单文件一起传递给控制器​​，例如

```
<?php echo form_open_multipart('upload/do_upload');?>
    <input type="text" name="someField" value=""  />
    <input type="file" name="userfile" size="20" />
    <input type="submit" value="upload" />
</form> 
```

并在您的**上传**控制器的**do_upload**函数中：

```
$someField = $this->input->post("somefield"); //save to some db
//and rest of your file to be uploaded code from the same link you provided 
```

你的意思是这样的吗

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:36:59.310

Image MOO 是一个出色的库，可以即时完成图像操作......

例如，要将上传的图像调整为特定路径，您只需执行此操作

```
public function thumbnailer($uploader_response,$field_info,$files_to_upload)
{
    $this->load->library('image_moo');
$file_uploaded=$field_info->upload_path.'/'.$uploader_response[0]->name;
$thumbnails=$field_info->upload_path.'/thumbnails/'.$uploader_response[0]->name;
    $cart_thumbnails=$field_info->upload_path.'/cart_thumbnails/'.$uploader_response[0]->name;
$this->image_moo->load($file_uploaded)->resize(400,250)->save($thumbnails,false);
} 
```

希望这可以帮助 ！！

# php - 如果日期是，则使用 PHP 读取 XML 文件

> ID：12345864
> 
> 赞同：-1
> 
> 时间：2012-09-10T05:36:21.420
> 
> 标签：php, xml, date, if-statement

因此，我正在尝试创建一个在特定日期读取特定 XML 文件的页面。我有这个问题，所有的帮助将不胜感激。

这是我的 XML 文件的结构：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<excercises>
  <excercise>
        <name>Test</name>
    <sr></sr>
    <weight>25kg</weight>
    <comment>Testing</comment>
  </excercise>
    <excercise>
    <name>Test II</name>
    <sr></sr>
    <weight>250kg</weight>
    <comment>Testing more</comment>
  </excercise>
</excercises> 
```

这是我的 PHP 代码：

```
<?php $month = mktime("m"); ?>
<?php $weekday = mktime("weekday"); ?>

<?php 
$doc = new DOMDocument(); 

if ($month == "01","03","05","07","09","11") && ($weekday == "Monday") {
    $doc->loadXML( 'resourceMon.xml' ); }
if ($month == "01","03","05","07","09","11") && ($weekday == "Tuesday") {
    $doc->load( 'resourceTue.xml' ); }
if ($month == "01","03","05","07","09","11") && ($weekday == "Thursday") {
    $doc->load( 'resourceThu.xml' ); }
if ($month == "01","03","05","07","09","11") && ($weekday == "Friday") {
    $doc->load( 'resourceFri.xml' ); }

if ($month == "02","04","06","08","10","12") && ($weekday == "Monday") {
    $doc->load( 'resourceMon.xml' ); }
if ($month == "02","04","06","08","10","12") && ($weekday == "Tuesday") {
    $doc->load( 'resourceTue.xml' ); }
if ($month == "02","04","06","08","10","12") && ($weekday == "Thursday") {
    $doc->load( 'resourceThu.xml' ); }
if ($month == "02","04","06","08","10","12") && ($weekday == "Friday") {
    $doc->load( 'resourceFri.xml' ); }

else { echo "This day is not a right day to workout!"; }

$xpath = new DOMXPath($dom);  

$root=$doc->documentElement;

$excercises = $dom->getElementsByTagName( "excercise" ); 
foreach( $excercises as $excercise ) { 
  $names = $excercise->getElementsByTagName( "name" ); 
  $name = $names->item(0)->nodeValue; 

  $sr = $excercise->getElementsByTagName( "sr" ); 
  $sr = $sr->item(0)->nodeValue; 

  $weights= $excercise->getElementsByTagName( "weight" ); 
  $weight= $weights->item(0)->nodeValue; 

  $comments = $excercise->getElementsByTagName( "comment" ); 
  $comment = $comments->item(0)->nodeValue; 

  echo "<tr><td><b>$name</b></td><td>$sr</td><td>$weight</td><td><i>$comment</i></td></tr>"; 

  } 
?> 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:19:14.210

你可以这样写条件

```
if (($month == "01" || $month =="03" || $month =="05" || $month =="07" || $month =="09" || $month =="11")) && ($weekday == "Monday") {
    $doc->loadXML( 'resourceMon.xml' ); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:19:30.680

[mktime](http://php.net/manual/en/function.mktime.php)返回一个 unix 时间戳

您需要使用[date()](http://php.net/manual/en/function.date.php)

```
date('l') // returns Monday, Tuesday, Wednesday etc.
date('m') // returns month in two digits, 01, 02, 03 etc. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:22:44.703

首先，阅读[`mktime`](http://php.net/mktime). 它根本不像您尝试使用它的方式那样工作。

其次，`$foo == "01", "02", ...`是胡说八道。[`in_array`](http://php.net/in_array)如果您需要这样的比较，请使用。

第三，你把事情复杂化了。执行以下操作：

```
$file = 'resource' . date('D') . '.xml';

$doc->loadXML($file); 
```

或者

```
switch (date('N')) {
    case 1 :
        $file = 'resourceMon.xml';
        break;
    case 2 :
        ...
    default :
        return false;
}

$doc->loadXML($file); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T06:30:26.473

1) 使用 date() 代替 mktime。
2) 使用 load() 而不是 loadXML。
3) 创建一个数组并使用 in_array() 在数组中查找特定月份

```
<?php $month = date("m"); 
$weekday = date("D"); 

$doc = new DOMDocument(); 

$monthHaystack = array("01","03","05","07","09","11");
if (in_array($month,$monthHaystack) && ($weekday == "Mon")) {
    $doc->load( 'resourceMon.xml' ); }

else { echo "This day is not a right day to workout!"; }

?> 
```

然后其余的保持不变，也不需要 xpath。

# javascript - 使用 jQuery 1.8.1 拥有多个 $(document).ready 是否有任何开销

> ID：12345866
> 
> 赞同：4
> 
> 时间：2012-09-10T05:36:38.530
> 
> 标签：javascript, jquery

我有这样的代码：

```
$(document).ready(function () {

    $('.accessLink')
        .bind('click', accessLinkClick);
    $('#logoutLink')
        .click(function (e) {
            window.location = $(this).attr('data-href')
        });

}); 
```

我的站点的每个部分的功能都分为许多小文件，并且在部署站点时，这些文件被简化并连接起来。

这些多达十个的小文件中的每一个都在 $(document).ready 上等待。谁能告诉我这样做是否有很多开销。将我的代码拆分为功能区域意味着代码看起来很容易维护，但我只是想知道现在我使用的是 jQuery 1.8.1 的开销

更新：

根据答案，我开始编写如下代码：

```
$(document).ready(function () {

    accessButtons(); // login, register, logout
    layoutButtons();
    themeButtons();  // theme switcher, sidebar, print page

}); 
```

然后将每个函数编码为：

```
function accessButtons() {

    $('.accessLink')
        .bind('click', accessLinkClick);
    $('#logoutLink')
        .click(function (e) {
            window.location = $(this).attr('data-href')
        });

}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T06:11:52.607

`$(document).ready()`这是 10次调用与随后调用 10 个初始化函数之间的区别。

通过 10 次调用，您将获得：

*   10 次来电`$(document)`。
*   10 次调用该`.ready()`方法。
*   一个 DOM 就绪事件的事件监听器
*   当 DOM 就绪事件触发时，它会循环遍历一组回调并调用传递给`.ready()`.

如果你有一个`$(document).ready()`调用了所有 10 个初始化函数，你会得到这个：

*   1 打电话给`$(document)`.
*   1 调用`.ready()`方法。
*   一个 DOM 就绪事件的事件监听器
*   当 DOM 就绪事件触发时，它会调用您的一个就绪处理程序。
*   然后您的就绪处理程序调用 10 个初始化函数调用。

因此，差异大约是构建 9 个额外的 jQuery 对象和进行 9 个额外的`.ready()`方法调用所需的时间。在极端情况下，这可能很明显，但您不太可能在实践中看到差异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T05:43:47.153

仅使用该`.ready()`函数来包装所有需要在加载所有其他代码并且页面准备好后运行的代码。如果您有任何可以自行运行的库并且不需要对 DOM 做任何事情，那么您不需要将它们放入就绪调用中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T05:40:39.360

如果代码需要按顺序执行，那么它们应该在同一个 dom 就绪回调函数中，否则，你可以将它们分成不同的 dom 就绪回调函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-10T05:46:56.983

[Performance goes down](http://jsperf.com/docready/10) when using many `$(document).ready()` calls, but it doesn't seem to be too bad, and on some browsers it doesn't seem to affect performance very much at all. The linked page has test results for several popular browsers when using `$()` to modify a large DOM.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-10T06:10:53.163

由于性能问题，我个人为每个页面创建了单独的函数。因此`$(document).ready()`，您只需在每个页面上触发一个函数，而不是多次运行。这样，我通常`$(document).ready()`只运行两次，一次用于全局，然后一次用于特定页面。

```
function ContactForm() {
    $(function () {
         // Contact form page specific stuff.
    });
} 
```

在我看来（根据您的问题，我假设您使用的是 MVC），我所做的是添加以下内容：

```
@section scripts {
    @Scripts.Render("~/bundles/ContactForm")
    <script type="text/javascript">ContactForm();</script>
} 
```

# android - 如何在android中将html5游戏制作为apk文件

> ID：12345869
> 
> 赞同：1
> 
> 时间：2012-09-10T05:36:57.050
> 
> 标签：android, html

我做了一个 HTML5 游戏，现在我想在 Android 中将游戏打包成一个 apk 文件。

如何在 Android 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T05:42:08.730

我认为`WebView`应该可以解决您的问题。这可能看起来很简单，但在我看来，如果您正在考虑在 android 设备中实现任何 HTML/JavaScript 技巧，那么它是有效的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T05:50:07.773

`Webview` is a `ViewGroup` in android. you can create a instance and add it to any hierarchy.

```
WebView webview = new WebView(this);
setContentView(webview);
webview.loadUrl("http://google.com/"); 
```

# eclipse - 有没有办法让 eclipse 代码完成来过滤在单词中任何地方键入的文本选项，而不仅仅是开始？

> ID：12345872
> 
> 赞同：0
> 
> 时间：2012-09-10T05:37:12.367
> 
> 标签：eclipse

我刚刚开始使用 eclipse Indigo 进行 Scala 开发。当我键入 X. 并调用完成时，eclipse 中的任何地方是否有设置将过滤器行为更改为“任何地方”？

如果我有一个带有字段 foo.name 和方法 foo.fullName、foo.capAllNames 的对象 foo，我希望当我键入 foo.name 时这三个对象都保留在选择列表中。

目前，该列表正在过滤单词的开头，因此仅 foo.name 属性将保留在给定的示例中。我希望过滤器基于单词中任何位置出现的文本，这可以在 eclipse 中完成吗？

谢谢约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T00:29:35.867

看起来 moeTi 建议的代码推荐器可以完成这项工作，但我可能需要等待一段时间，直到最新的错误修复过滤到一个可以很好地与 Scala 插件配合使用的版本（当我安装它时，它/eclipse 抛出了异常） ):

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=383395](https://bugs.eclipse.org/bugs/show_bug.cgi?id=383395)

# javascript - 浏览器重新加载时如何保存位置哈希状态

> ID：12345878
> 
> 赞同：0
> 
> 时间：2012-09-10T05:38:09.390
> 
> 标签：javascript

全部。我正在使用 livereload，它是自动重新加载 html、js 文件工具。

这很方便。但是我有一个问题。我正在制作依赖于哈希更改网站的单个网页应用程序。像这样 。/#/家，/#/产品。因此，当在 /#/product 重新加载浏览器时，它会重新加载并返回到 root / url。很难调试。

我想在重新加载浏览器时保存哈希位置。如果我重新加载 /#/product page ，我想留在 /#/product 页面。

你有什么主意吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T05:44:10.593

您没有在`/#/home`. 使用`/#home`or`/#product`它将在重新加载时持续存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:43:26.750

加载页面时，您需要运行 javascript 代码来检查当前哈希值并构建与该哈希值匹配的正确页面状态。然后，当您的页面重新加载时，基本页面将从服务器加载，然后您的代码将运行并查看该`#/product`哈希值并为该哈希值构建适当的页面。

# c# - 带有 Imagetools 的动画 Gif，在 WP7 c#

> ID：12345879
> 
> 赞同：3
> 
> 时间：2012-09-10T05:38:27.040
> 
> 标签：c#, windows-phone-7, silverlight-4.0, windows-phone-7.1

嗯，这已经解决了。我不知道这是否是我的一个小故障，或者 ImageTools 是否只是一个痛苦的设置。谢谢大家的回答，他们很可能都有效。一旦我标记为已回答确实有效，但方法如下：

> （感谢 Patrick 坚持这一点，他的代码如下所述。）
> 
> （另外，也非常感谢其他提交了一些东西的人。对不起，如果我的菜鸟把你们吓跑了）

要让动画 Gif 在您的 wp7 7.1 应用程序中工作，请执行以下步骤：

1）下载ImageTools（我当时用的是最新版本（0.3））[http://imagetools.codeplex.com/downloads/get/156530](http://imagetools.codeplex.com/downloads/get/156530)

2) 解压文件，然后在“Bin > Phone”文件夹中将所有* dll 文件扩展名放入您的 wp7 应用程序文件夹中。不需要添加其他文件 (xml/pdb)。（*这一步是额外的工作，我们稍后会删除这些额外的 dll，但它会省去头疼的问题。）

3) 在解决方案资源管理器窗口 > 参考文件夹下拉菜单中添加对 wp7 应用程序的引用。为此，请右键单击“引用”文件夹，单击“添加引用”并浏览到 dll 文件。重复这个过程。（最终引用所有这些 dll 是额外 2 分钟工作中的 1 分钟，但编译时不应出现任何错误）

4) 现在在要添加图像的 xaml 页面上，将其添加到标题代码的顶部：

```
xmlns:it="clr-namespace:ImageTools.Controls;assembly=ImageTools.Controls"
xmlns:vm="clr-namespace:GifViewer.ViewModels" 
```

注意：将“GifViewer”更改为您的应用程序名称。

5) 在同一页面的正下方，添加以下代码：

```
<phone:PhoneApplicationPage.DataContext>
    <vm:MainViewModel/>
</phone:PhoneApplicationPage.DataContext>

<Grid x:Name="LayoutRoot" Background="Transparent">
    <it:AnimatedImage  Source="{Binding AnimationImage}" />
</Grid> 
```

注意：不一定是网格。根本不需要任何东西。它可以独立存在。

6）接受的答案在应用程序中有一个名为“ViewModels”的文件夹，其中有一个名为“MainViewModel”的自定义类因此在解决方案资源管理器或桌面中，添加一个名为 ViewModels 的文件夹并制作名为 MainViewModel 的 ac# 类页面。将其移动到该文件夹​​中，然后刷新解决方案资源管理器。如果看不到文件，则需要单击解决方案资源管理器标题下的“显示所有文件”按钮。

7）使用下面接受的答案，在“MainViewModel.cs”类页面中，在其他页面下方添加以下内容：

```
using ImageTools;
using ImageTools.Controls; 
using ImageTools.IO;
using ImageTools.IO.Gif; 
```

8) 接受的答案使用此代码。复制此代码时将“GifViewer”更改为您的应用程序名称，并更改 gif 的 Uri 位置。在我的示例中，我有一个名为“Gif”的文件夹，其中包含“explosion.gif”。默认情况下，构建操作可以保留为资源。

```
namespace GifViewer.ViewModels {
    public class MainViewModel : DependencyObject {
        public MainViewModel() {
            Decoders.AddDecoder<GifDecoder>();
            Uri uri = new Uri("Gif/explosion.gif", UriKind.Relative);
            ExtendedImage image = new ExtendedImage();
            // either of these two method work.
            // Just remove the first / to switch
            //*
            image.LoadingCompleted +=
                (o, e) => Dispatcher.BeginInvoke(() => AnimationImage = image);
            image.UriSource = uri;
            /*/
            Stream stream = Application.GetResourceStream(uri).Stream;
            GifDecoder decoder = new GifDecoder();
            decoder.Decode(image, stream);
            AnimationImage = image;
            /**/
        }

        public static readonly DependencyProperty AnimationImageProperty =
            DependencyProperty.Register("AnimationImage",
                typeof(ExtendedImage),
                typeof(MainViewModel),
                new PropertyMetadata(default(ExtendedImage)));

        public ExtendedImage AnimationImage {
            get { return (ExtendedImage)GetValue(AnimationImageProperty); }
            set { SetValue(AnimationImageProperty, value); }
        }
    }
} 
```

继续编译。您可能会收到指示无法加载的运行时错误，但运行应用程序应该可以摆脱它。

你的 gif 现在应该可以播放了。

9) 开始删除不需要的额外 dll 引用（2 分钟额外工作的另一分钟）。基本上，您想要引用的只是：

```
ImageTools
ImageTools.Controls
ImageRools.IO.Gif 
```

甚至可能不需要 ImageTools.Controls，但文件大小为 25kb，老实说，如果我删除它，我无法获得 gif 显示。

给你！

* * *

## 我问的原始问题

试图让我的动画 gif 在我的 WP7 应用程序中播放时，我头疼得厉害。尽管有 imagetools 并在 stackoverflow/web 上查看当前的“解决方案”，但我根本无法连接这些点来实现这一点。

下面概述了我的问题，但作为参考，我查看了： [Display GIF in a WP7 application with Silverlight](https://stackoverflow.com/questions/4152564/display-gif-in-a-wp7-application-with-silverlight) 和[http://blog.naviso.fr/wordpress/?p=733](http://blog.naviso.fr/wordpress/?p=733)

那么，如何将这个破事设置为在 wp7 应用程序中显示动画 gif 呢！？具体问题 - 这是让我的动画 gif 出现的正确代码吗？如果没有，下面需要修复什么？

我在手机上的动画 gif 文件位置（不是来自互联网）：

> GIF/爆炸.gif

Xaml 主页：

```
xmlns:imagetools="clr-namespace:ImageTools.Controls;assembly=ImageTools.Controls" 
....

<phone:PhoneApplicationPage.Resources>
        <imagetools:ImageConverter x:Key="ImageConverter" />
</phone:PhoneApplicationPage.Resources>

....
<imagetools:AnimatedImage x:Name="animationgif" Source="{Binding ImageSource, Converter={StaticResource ImageConverter}}" /> 
```

以及 xaml 页面背后的代码：

```
public partial class MainPage : PhoneApplicationPage
{
 using ImageTools;
 using ImageTools.Controls;
 using ImageTools.IO.Gif;

 public MainPage()
    {
        InitializeComponent();
        ImageTools.IO.Decoders.AddDecoder<ImageTools.IO.Gif.GifDecoder>();
    }

 public void eventtofiretoshowexplosion_gif(object sender, MouseButtonEventArgs e)
 {
   // A main problem -- this code doesn't work by itself, as what is the ImageSource!?
   // It cannot be used as a variable it says.
   // animationgif.ImageSource does not work at all (not a method).
   ImageSource = new Uri("http://mysite/my.gif", UriKind.Absolute);
 }
} 
```

在过去的几个小时里，这一直困扰着我，我真的需要一些帮助。如果对此有快速修复，请提供帮助并展示它是如何完成的，而不是引导我进入页面。我已经看过太多关于这个的页面了，虽然每个页面都声称可以工作，但它不能在我的应用程序中使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:06:35.983

您的图像的构建操作似乎不正确，因此应用程序无法“找到”资源。

你有两个选择。将构建操作设置为内容，或将其设置为资源并指定“如果较新则复制”。

*   打开您的解决方案资源管理器
*   打开你的属性窗口
*   点击你的图片
*   将构建操作设置为`Resource`并复制到输出目录`Copy if newer`

进一步阅读：[WPF 中的资源 – I（二进制资源）](http://csharpsimplified.wordpress.com/2009/02/16/resources-in-wpf-i-binary-resources/)

* * *

鉴于上述资源“要求”，我使用视图模型整理了一个小示例，该示例似乎可以工作。我希望你会发现它有用。viewmodel 类位于名为 ViewModels 的文件夹中。

```
using System;
using System.IO;
using System.Windows;
using ImageTools;
using ImageTools.IO;
using ImageTools.IO.Gif;

namespace GifViewer.ViewModels {
    public class MainViewModel : DependencyObject {
        public MainViewModel() {
            Decoders.AddDecoder<GifDecoder>();
            Uri uri = new Uri("Gif/explosion.gif", UriKind.Relative);
            ExtendedImage image = new ExtendedImage();
            // either of these two method work.
            // Just remove the first / to switch
            //*
            image.LoadingCompleted +=
                (o, e) => Dispatcher.BeginInvoke(() => AnimationImage = image);
            image.UriSource = uri;
            /*/
            Stream stream = Application.GetResourceStream(uri).Stream;
            GifDecoder decoder = new GifDecoder();
            decoder.Decode(image, stream);
            AnimationImage = image;
            /**/
        }

        public static readonly DependencyProperty AnimationImageProperty =
            DependencyProperty.Register("AnimationImage",
                typeof(ExtendedImage),
                typeof(MainViewModel),
                new PropertyMetadata(default(ExtendedImage)));

        public ExtendedImage AnimationImage {
            get { return (ExtendedImage)GetValue(AnimationImageProperty); }
            set { SetValue(AnimationImageProperty, value); }
        }
    }
} 
```

和xml

```
<phone:PhoneApplicationPage 
    x:Class="GifViewer.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:it="clr-namespace:ImageTools.Controls;assembly=ImageTools.Controls"
    xmlns:vm="clr-namespace:GifViewer.ViewModels"
    mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    shell:SystemTray.IsVisible="True">

    <phone:PhoneApplicationPage.DataContext>
        <vm:MainViewModel/>
    </phone:PhoneApplicationPage.DataContext>

    <Grid x:Name="LayoutRoot" Background="Transparent">
        <it:AnimatedImage  Source="{Binding AnimationImage}" />
    </Grid>
</phone:PhoneApplicationPage> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T19:13:43.753

使用 AnimatedImage 时，您的源绑定必须返回 ExtendedImage。ExtendedImage 类基本上是普通 Image 控件的“BitmapImage”等价物。

# sql - Sql Server View 显示某些表中没有数据的记录

> ID：12345882
> 
> 赞同：0
> 
> 时间：2012-09-10T05:39:05.020
> 
> 标签：sql, sql-server, asp.net-mvc, asp.net-mvc-3, sql-server-2008

我有表 Products、Sales 和 ProductsInStores。ProductsInStores 表跟踪每个商店中有多少产品。我有一个 SalesProductsInStoresView，其中包含表 Sales 和 ProductsInStores 中的列。

但也有来自不同连锁店的产品，因此这些产品没有 ProductsInStores 记录。因此，当进行销售时，如果 Product 没有 ProductsInStores 记录，SalesProductsInStoresView 不会显示 Sales。

我可以让我的视图显示没有 ProductsInStores 记录的销售，并且只在 ProductsInStores 列上显示空单元格，如果这不可能，我可能还有其他选项，我正在使用 Asp.Net MVC 和 Sql Server 2008。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:29:58.570

使用左外连接

```
Select a.field1,b.field2
from tablea A
left outer join tableb b on b.fieldc = a.fieldc 
```

这允许从内部表返回数据，同时保持与外部表的连接，即使没有数据存在。

# linux - kmalloc 如何返回大于物理地址大小的物理地址？

> ID：12345884
> 
> 赞同：0
> 
> 时间：2012-09-10T05:39:19.403
> 
> 标签：linux, memory-management, kmalloc

我`kmalloc`在 Linux 的设备驱动程序中分配一块内存。我得到的地址是`0xffff880000180000`。我正在使用具有 46 位物理地址空间的 IvyBridge 处理器。这意味着 CPU 没有超过 46 个寻址引脚，因此它无法访问上面的任何地址`0x00003fffffffffff`。我得到的地址显然比这更大，因为它设置了第 47 位。

假设`kmalloc`返回一个物理指针（即虚拟地址、线性地址和物理地址相同的指针），如果 CPU 无法访问它，我如何获得这样的地址？

* * *

这个问题与“[为什么我在 Linux 中将 kmalloc 与 GFP_DMA 一起使用时会得到一个高地址？](https://stackoverflow.com/questions/12337914/why-am-i-getting-a-high-address-when-i-use-kmalloc-with-gfp-dma-in-linux "为什么我在 Linux 中将 kmalloc 与 GFP_DMA 一起使用时会得到一个高地址？") ”。但是，它并不相同。这个问题一般是关于物理地址`kmalloc`返回的，而链接的问题是关于返回地址的使用`GFP_DMA`及其与返回地址的关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T05:57:21.043

它显然不是物理地址，而是线性或虚拟地址，并且是“规范形式”，其中第 47 位的值被“符号扩展”到第 63 位。

# ruby-on-rails - 通过 has_many 删除记录：通过

> ID：12345886
> 
> 赞同：0
> 
> 时间：2012-09-10T05:40:04.713
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, has-many-through, has-many

我的模型架构：

用户

```
has_many :activities
has_many :companies through: :activities 
```

公司

```
has_many :activities
has_many :users, through: :activities 
```

活动

```
belongs_to :user
belongs_to :company 
```

当我尝试运行时出现问题，或者`current_user.activities.delete_all(["company_id=?", params[:id]])`我收到此错误：`clear``destroy`

```
ArgumentError: wrong number of arguments (1 for 0)
    from /home/rom/.rvm/gems/ruby-1.9.3-p194@rails-3.2.8/gems/activerecord-3.2.8/lib/active_record/associations/collection_association.rb:156:in `delete_all'
    from /home/rom/.rvm/gems/ruby-1.9.3-p194@rails-3.2.8/gems/activerecord-3.2.8/lib/active_record/associations/collection_proxy.rb:46:in `delete_all' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:57:44.693

使用以下

```
Activity.delete_all(["company_id=? AND user_id=?", params[:id], current_user.id]) 
```

# sql - 查询使用 rank() 需要优化

> ID：12345887
> 
> 赞同：0
> 
> 时间：2012-09-10T05:40:09.547
> 
> 标签：sql, oracle

```
select * from
(
  Select DISTINCT 
    DocManREPORT_View.DOCINPUTDATE,
    DocManREPORT_View.REACTIVATEDATE,
    DocManREPORT_View.TRACENO,
    DocManREPORT_View.CLIENTNAME,
    DocManREPORT_View.DOCUMENTID,DocManREPORT_View.BARCODEID,
    DocManREPORT_View.INPUTMODE,
    DocManREPORT_View.INPUTSOURCE,PI.start_time,
    RANK() OVER (PARTITION BY process_instance_id 
       ORDER BY last_modified_date desc) rank,
    PI.STATUS AS PROCESSSTATUS 
  FROM DocManREPORT_View 
  INNER JOIN PROCESS_INSTANCE PI ON 
    (pi.instance_id = DocManREPORT_View.process_instance_id)
) 
where rank = 1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:42:33.260

如果可以，请尝试使用

```
 RANK() OVER (PARTITION BY process_instance_id 
       ORDER BY last_modified_date desc) rank, 
```

在 VIEW 内部，因为我认为 View 已经拥有所有数据来进行这一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:21:13.097

我认为 DISTINCT 子句可能会破坏性能。我建议您通过将其包含在 partition by 子句中来摆脱它，然后看看您有什么。

# css - 子链接重复相同的样式

> ID：12345891
> 
> 赞同：0
> 
> 时间：2012-09-10T05:40:36.080
> 
> 标签：css, class, html-lists, repeat

我正在制作导航栏。[这是参考链接](http://www.htmldrive.net/items/show/437/CSS3-only-horizontal-drop-line-tab-menu)

问题是我为主选项卡应用的样式也对子链接重复。我为子链接（“nav2”）创建了单独的类。它在 Chrome 和 Mozilla Firefox 中运行良好，但无法在 IE 中解决此问题。请帮忙，有点急。

这是我的代码

HTML：

```
<div id="menu">
<ul id="nav">
<li><a href="#">Tab1</a>
<ul id="nav2">
<li><a href="#">Menu 1 Submenu item 1</a></li>
<li><a href="#">Menu 1 Submenu item 2</a></li>
<li><a href="#">Menu 1 Submenu item 3</a></li>
</ul>
</li>

<li><a href="#">Tab2</a>
<ul id="nav2">
<li><a href="#">Sub Link for tab 2</a></li>
<li><a href="#">Some other link</a></li>
<li><a href="#">Some othe rlink</a></li>
</ul>
</li>

<li><a href="#">Tab3</a></li>
<li><a href="#">Tab4</a></li>

</li>
</ul>
</div> 
```

这是CSS

CSS：

```
#menu {
  width: 100%;
  height: 35px;
  clear: both;
}

ul#nav {
float: left;
width:100%;
margin: 0;
padding: 0;
list-style: none;
-moz-border-radius-topright: 5px;
-webkit-border-top-right-radius: 5px;
-moz-border-radius-topleft: 5px;
-webkit-border-top-left-radius: 5px;
}

ul#nav li {
 display: inline;
}

ul#nav li a {
  float: left;
font-family:Arial, Helvetica, sans-serif;
font-size:12px;
font-weight:bold;
line-height: 35px;
color: #7e764c;
text-decoration: none;
text-shadow: 1px 1px #ffffff;
margin:0 4px 0 0;
padding: 0 15px;
-moz-border-radius-topright: 5px;
-webkit-border-top-right-radius: 5px;
-moz-border-radius-topleft: 5px;
-webkit-border-top-left-radius: 5px;
background: #fff3b3;
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fffce9', endColorstr='#fff3b3');
background: -webkit-gradient(linear, 0 0, 0 70%, from(#fffce9), to(#fff3b3));
background: -moz-linear-gradient(#fffce9, #fff3b3 70%);
background: linear-gradient(#fffce9, #fff3b3 70%);
-pie-background: linear-gradient(#fffce9, #fff3b3 70%);
behavior: url(PIE.htc);
}

ul#nav .current a, ul#nav li:hover > a  {
color: #353535;
text-decoration: none;
text-shadow: 1px 1px #ffe8a1;
background: #fecf3a;
-moz-border-radius-topright: 5px;
-webkit-border-top-right-radius: 5px;
 -moz-border-radius-topleft: 5px;
-webkit-border-top-left-radius: 5px; 
}

ul#nav  ul {
display: none;
}

ul#nav2 li a {
background:none;
}

ul#nav li:hover > ul {
position: absolute;
display: block;
width: 100%;
height: 35px;
position: absolute;
margin: 35px 0 0 0;
background-color:#fecf3a;
border-bottom:1px solid #c3aa6f;
}

ul#nav li:hover > ul li {
float: left;
font-family:Arial, Helvetica, sans-serif;
font-size:11px;
font-weight:normal;
line-height: 35px;
color: #86610b;
text-decoration: none;
margin: 0;
background:url(../img/line1.jpg) no-repeat right 15px;
}

ul#nav li:hover > ul li a {
float: left;
 font-family:Arial, Helvetica, sans-serif;
font-size:11px;
font-weight:normal;
line-height: 35px;
color: #86610b;
text-decoration: none;
margin: 0;
background:url(../img/arrow-btm2.png) no-repeat center 28px;
}

ul#nav li:hover > ul li a:hover {
color: #86610b;
text-decoration: none;
text-shadow: none;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:01:34.730

第一：您尚未向子菜单添加课程。您已经添加了 id “nav2”，并且 id 应该是唯一的。您应该将其更改为 class="nav2" 并在您的 css 中使用 .nav2 而不是 #nav2 来定位它。

有两种很好的方法可以解决这个问题。

1)

为顶级项目创建类。就像是：

```
<ul id="nav"> 
    <li class="navLevel1"><a href="#">Tab1</a> 
```

然后在你的css中将 ul *#nav li*更改为*.navLevel1*并将*ul#nav li a*更改为*.navLevel1 > a*。

2)

*将ul#nav li*更改为*#nav > li*并将*#nav li a*更改为*#nav > li > a*在您的 CSS

注意：我使用了子选择器（>），这意味着您只选择元素的直接子元素而不是后代。

# actionscript-3 - 滞后的自定义光标是 Flash

> ID：12345896
> 
> 赞同：1
> 
> 时间：2012-09-10T05:41:00.873
> 
> 标签：actionscript-3, flash, cursor

在 flash as3 中制作自定义光标，我已将光标替换为扫帚柄（简单矢量动画剪辑）。该代码是下面的标准自定义光标代码：

```
private function listeners():void  {
    this.addEventListener(MouseEvent.MOUSE_MOVE, attachBroom);
}

private function attachBroom(e:MouseEvent):void 
{
    broomStick.x = e.stageX - 10;
    broomStick.y = e.stageY - 5;
    e.updateAfterEvent();
} 
```

SWF 可以在[这里](http://megaswf.com/s/2472537)找到。光标在实际烟雾报警器图形顶部时很好，但是当它越过背景时，当鼠标以“快速”速度移动时，它会严重滞后。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T07:19:08.993

现在有更好的方法来做自定义光标。

从 Flash Player 10.2 开始，您可以使用本机游标，它们正在使用本机操作系统资源。

[http://www.adobe.com/devnet/flashplayer/articles/native-mouse-cursors.html](http://www.adobe.com/devnet/flashplayer/articles/native-mouse-cursors.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T06:06:18.557

试试这个而不是你的

```
private function listeners():void  {
    this.addEventListener(Event.ENTER_FRAME, attachBroom);
}

private function attachBroom(e:Event):void 
{
    broomStick.x = stage.mouseX - 10;
    broomStick.y = stage.mouseY - 5;
} 
```

逻辑相同，但 ENTER_FRAME 事件比 MOUSE_EVENTS 快。ENTER_FRAME 也没有 updataAfterEvent。

# ios - 切换视图会丢失标签栏

> ID：12345902
> 
> 赞同：1
> 
> 时间：2012-09-10T05:41:21.803
> 
> 标签：ios, viewcontroller

我正在构建基本应用程序。它使用带有 3 个视图的标签栏。我在第一个视图上有一个按钮。当我单击它时，我希望它切换到第三个视图，但将标签栏保持在底部。现在，我让它工作，但是当它切换到第三个视图时，我失去了标签栏。

我是新人，所以放轻松。我试过在这个网站上搜索，但没有任何帮助。如果可能，请提供代码以及它应该进入哪些文件。

在我的 .hi 中输入以下代码： `-(IBAction) btnClickedSell1:(id) sender;`

在 .mi 中输入以下代码：

```
-(IBAction) btnClickedSell1:(id) sender {
    Selling *second = [[Selling alloc] initWithNibName:nil bundle:nil];
    [self presentModalViewController:second animated:YES];
} 
```

我相信我必须拥有正确的代码，但是我不确定他们应该准确进入哪些文件以及在 IB 中采取的确切步骤。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:57:19.607

你不应该使用`presentModalViewController:animated`，如果你只想切换到第三个视图，我认为你应该试试这个代码：

```
 [yourTabBarController setSelectedIndex:2]; 
```

如果您的应用基于 TabBar 应用程序，您可以通过 NSApplicationDelegate 获取**yourTabBarController 。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:10:58.100

> 在基于选项卡的应用程序中，每个条形按钮都像 ViewController 一样。所以你可以重定向到下一个 ViewController 你不能保留你的第一个 Bar 按钮。

# java - 如何在 JAXB 类中使用其他 XMLElement 传输通用映射

> ID：12345904
> 
> 赞同：0
> 
> 时间：2012-09-10T05:41:34.107
> 
> 标签：java, xml, jaxb

我有以下用户 JAXB 类。如何使用 JaxB 类 如果我想在 JaxB 类中使用通用 Map 和两个“名称”和“id”XmlElement。因此，用户可以使用名称、id xml 元素和其他通用属性，例如如下。

```
Example :
JSON Format 
{"name":"xyz","id":"1","xx":"axx","yy":"byy"}

OR 
XML Format 
<name>xyz</name>
<id>1</id>
<xx>axx</xx>
<yy>byy</yy>

@XmlRootElement
public class UserJaxB {

private String name;
private String id;

/* Generic Map */
private Map<Object, Object> map;

public UserJaxB() {
}

@XmlElement(name = "id")
public String getId() {
    return id;
}

public void setId(String id) {
    this.id = id;
}

@XmlElement(name = "name")
public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public Map getMap() {
    return map;
}

public void setMap(Map<Object,Object> map) {
    this.map = map;
} 
```

}

# java - 拆分无法正常工作

> ID：12345905
> 
> 赞同：5
> 
> 时间：2012-09-10T05:41:42.147
> 
> 标签：java, split

我正在尝试将字符串中的组保存到数组中，以便在需要时可以在单个变量中使用它们。为此，我使用*拆分*，但由于某种原因，我只能在数组的第一个位置获得完整的字符串：ultimate_array[0]。如果我想使用ultimate_array[1]，我会得到一个异常，比如“越界”。你知道我在做什么错吗？

```
String string_final = "";
String[] ultimate_array = new String[100];
String sNrFact = "";

string_final="Nrfact#$idfact1#$valfact1#$idfact2#$valfact2#$idfact3#$valfact3#$idfact4#$valfact4#$idfact5#$valfact5#$idfact6#$valfact6#$idfact7#$valfact7#$idfact8#$valfact8#$idfact9#$valfact9#$idfact10#$valfact10";

ultimate_array = string_final.split("#$");
sNrFact = ultimate_array[0]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T05:46:02.067

The split takes an regular expression and `$` is a special character (end of string) so you have to escape it with backslash `\`. Anyway it is also special character, this time in Java, so you have to escape it also. The final code is:

```
ultimate_array = string_final.split("#\\$"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T05:44:09.123

```
ultimate_array = string_final.split("#\\$"); 
```

您的拆分无法正常工作的原因是拆分使用正则表达式并且“$”是正则表达式的特殊字符（*drekka*）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T05:46:15.007

You need to escape `$` (*end of string*)

```
ultimate_array = string_final.split("#\\$"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T06:17:49.763

只需更换您的线路：

```
ultimate_array = string_final.split("#$"); 
```

和：

```
ultimate_array = string_final.Split(new string[] { "#$" }, StringSplitOptions.None); 
```

我希望你的问题得到解决...

# c++ - 基本控制台打印程序

> ID：12345907
> 
> 赞同：-1
> 
> 时间：2012-09-10T05:41:57.223
> 
> 标签：c++, visual-c++

```
#include <iostream>
using namespace std;

int Main ()
{
    cout << "---------------------------------------------------------------------------------/n";
    cout << "NAME: Justin Chiang/n";
    cout << "COMPUTER LANGUAGES: Python, Lua, C++/n";
    cout << "FAVORITE VIDEO GAME: Starcraft, Diablo/n";
    cout << "I'm taking this class for math undergrad requirement and because it is very useful." << endl;
    system("PAUSE");
    return 0;
} 
```

输出：

```
1>------ Build started: Project: HW1, Configuration: Debug Win32 ------
1>  HW1.cpp
1>c:\users\asus\desktop\hw1\hw1\hw1.cpp(5): warning C4627: '#include <iostream>': 
            skipped when looking for precompiled header use
1>          Add directive to 'StdAfx.h' or rebuild precompiled header
1>c:\users\asus\desktop\hw1\hw1\hw1.cpp(25): fatal error C1010: unexpected end of file 
            while looking for precompiled header. Did you forget to add '#include  
            "StdAfx.h"' to your source?
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T05:45:22.537

转到项目属性。单击 Configuration Properties/C/C++/Precompiled Header 并选择“Not Using Precompiled Headers”选项。确切的说明可能会根据您使用的 Visual Studio 版本而有所不同，但基本上您希望关闭预编译头文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T05:44:12.660

你不见了`#include "stdafx.h"`

此外，`int Main()`不是标准 C++，你应该用`int main()`or替换你的 main 函数`int main(int argc, char** argv)`

既然我不得不说为什么你必须使用预编译的头文件，它可以使 MSVC 的编译时间更快，但它阻碍了可移植性，并且如果使用它会拖拽很多不符合标准的代码。它可能会破坏您的可移植性，但如果您正在使用另一个 IDE，您可以轻松地删除头文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T07:21:16.280

`int Main ()`应该是小写。将其更改为`int main ()`.

和

更改`cout << "... /n";` 为`cout << "... \n";`

```
#include <iostream>
using namespace std;

int main ()
{
    cout << "---------------------------------------------------------------------------------\n";
    cout << "NAME: Justin Chiang\n";
    cout << "COMPUTER LANGUAGES: Python, Lua, C++\n";
    cout << "FAVORITE VIDEO GAME: Starcraft, Diablo\n";
    cout << "I'm taking this class for math undergrad requirement and because it is very useful." << endl;
    system("PAUSE");
    return 0;
} 
```

# apache-flex - 在 Flex 4.6 中强制单击每个导航器选项卡时的 firstView

> ID：12345908
> 
> 赞同：1
> 
> 时间：2012-09-10T05:42:03.957
> 
> 标签：apache-flex, flex4, navigation

我的 tabbedViewNavigatorApplication 的默认行为有问题...

我有 5 个选项卡，每个选项卡都有几个视图包含在它们各自的 ViewNavigator 中......在向下导航到这些选项卡下的一个视图后，然后单击选项卡栏上的不同选项卡，然后返回到我刚刚使用选项卡的选项卡按钮 我最终回到了我正在查看的视图中。我希望应用程序底部的每个选项卡按钮都强制显示该堆栈中的第一个视图..而不是该堆栈中显示的最后一个视图。

有没有办法设置 selectedIndex 属性或其他东西？

为了澄清，下面的情况显示了一个只有 2 个选项卡（2 个 ViewNavigators）的示例，它们位于 TabbedViewNavigatorApplication 内：

```
Tab1(button)      Tab2(button)
Tab1 View 1       Tab2 View 1
Tab1 View 2       Tab2 View 2
Tab1 View 3       Tab2 View 3 
```

当有人向下导航到 Tab1 View 3 ，然后单击 Tab2 按钮，然后单击 Tab1 按钮时，我希望 Tab1 View 1 加载 NOT Tab1 View 3 ，这是 Tab1 堆栈中显示的最后一个视图。

如何覆盖此默认行为。

任何帮助，将不胜感激。

谢谢

马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:49:25.950

这很简单。在 tabbedViewNavigator 的创建完成时，在选项卡索引 cvhage 事件上添加一个侦听器，如下所示：

```
tabbedViewNavigator.tabBar.addEventListener(IndexChangeEvent.CHANGE,onTabChange); 
```

在这个监听器上，只需像这样调用 popToFirstView() ：

```
(tabbedViewNavigator.selectedNavigator as ViewNavigator).popToFirstView(); 
```

# ruby-on-rails - 在 Windows 7 上安装 Ruby on Rails 时出错

> ID：12345910
> 
> 赞同：0
> 
> 时间：2012-09-10T05:42:09.090
> 
> 标签：ruby-on-rails, windows-7, installation

操作系统：Windows 7 Ultimate 32 位（6.1，Build 7600）

安装 Ruby：我已成功安装 Ruby 版本 1.8.7 安装 Rails：我尝试通过在命令提示符下键入以下命令来安装 Rails 和所有依赖项：gem install rails --include-dependencies

但不幸的是，发生了如下错误：

信息： `gem install -y`现在是默认设置，将被删除 信息：使用 --ignore-dependencies 仅安装您列出的 gem 错误：安装 rails 时出错：“json”本机 gem 需要已安装的构建工具。

请更新您的 PATH 以包含构建工具或从“http://rubyinstaller.org/downloads”下载 DevKit，并按照“http://github.com/oneclick/rubyinstaller/wiki/Development-Kit”中的说明进行操作

修复它的步骤是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T13:59:14.653

“json”原生 gem 需要安装构建工具。

```
Please update your PATH to include build tools or download the DevKit from 'http://rubyinstaller.org/downloads'
and follow the instructions at 'http://github.com/oneclick/rubyinstaller/wiki/Development-Kit' 
```

似乎表明您的环境中缺少什么：构建工具，也称为编译器工具链。

RubyInstaller 提供了一个名为 Development Kit (DevKit) 的即用型包，似乎在上面的链接中有所指示。

此外，wiki 页面包含下载和安装它的所有说明。

如果你想使用 Rails，而不是使用 RubyInstaller，为什么不直接安装[RailsInstaller](http://railsinstaller.org/)，它已经集成了 DevKit，并且没有额外的安装步骤。

希望有帮助。

# php - 文本区域中的换行符

> ID：12345916
> 
> 赞同：1
> 
> 时间：2012-09-10T05:43:02.710
> 
> 标签：php, textarea, line-breaks

> **可能重复：**
> [文本区域中的换行符](https://stackoverflow.com/questions/6480655/line-breaks-in-a-textarea)

我有一个文本区域，用户在其中输入段落中的一些描述。现在我希望如果用户想要添加两个段落，他将按回车添加换行符。但是当我们将该值存储在数据库中时，该换行符不会被保存。

我想问一下，如果用户按 Enter 键添加换行符，那么它也应该保存在数据库中。

我正在使用 php。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T05:47:28.557

一个换行符应该是一个`<br />`，两个应该表示一个段落中断。因此，只需在您的代码中查找您的两个`"\n\n"`语句并将所有这些语句替换为`</p><p>`然后将`<p></p>`标签包装在整个字符串周围。

以下是应该执行的一系列步骤：

1.  提交到您的 PHP 服务器并设置`$input = $_POST['input'];`
2.  `$input = trim($input)`从输入的开头和结尾删除所有额外的换行符和空格。
3.  然后做`$input = str_replace($input, "\n\n",'</p><p>');`
4.  然后做`$input = '<p>' . $input . '</p>';`

- - 编辑 - -

最后一件事要记住。如果您不想在`<p></p>`用户输入两个以上连续的换行符时出现一堆空标签，那么您需要注意这一点。

为了解决这个问题，请改为这样做。

```
$input = preg_replace("/\n(?:\n)+/",'</p><p>', $input)
//you may need to set the PHP PCRE multiline flag for this to work 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T05:52:27.083

您可以使用 mysql_real_escape_string($input); 这也可能会节省换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T05:55:21.560

使用 nl2br($content_here); 在检索时

[http://php.net/manual/en/function.nl2br.php](http://php.net/manual/en/function.nl2br.php)

# java - 在 Android 中从数据库 MySQL 制作图表

> ID：12345919
> 
> 赞同：0
> 
> 时间：2012-09-10T05:43:15.360
> 
> 标签：java, android, mysql, database, json

我想根据我使用 JSON 代码从我的数据库 MySQL 中获得的数据在 Android 中制作一个图表，这是我的代码：

```
package android.bloodglucose.doctor;

import java.io.BufferedReader;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.achartengine.ChartFactory;
import org.achartengine.GraphicalView;
import org.achartengine.chart.PointStyle;
import org.achartengine.model.SeriesSelection;
import org.achartengine.model.XYMultipleSeriesDataset;
import org.achartengine.model.XYSeries;
import org.achartengine.renderer.XYMultipleSeriesRenderer;
import org.achartengine.renderer.XYSeriesRenderer;
import org.achartengine.tools.PanListener;
import org.achartengine.tools.ZoomEvent;
import org.achartengine.tools.ZoomListener;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.bloodglucose.doctor.R;

import android.app.Activity;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Bitmap.CompressFormat;
import android.graphics.Color;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;

public class ChartBuilder extends Activity {
  public static final String TYPE = "type";

  private XYMultipleSeriesDataset mDataset = new XYMultipleSeriesDataset();

  private XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();

  private XYSeries mCurrentSeries;

  private XYSeriesRenderer mCurrentRenderer;

  private String mDateFormat;

  private GraphicalView mChartView;

  private String textResult;

  private ArrayList<String> ids = new ArrayList<String>();
  private ArrayList<String> result = new ArrayList<String>();

  //private Button sendImage;

  InputStream is;

  String imageFilePath;

  private int index=1;

  @Override
  protected void onRestoreInstanceState(Bundle savedState) {
    super.onRestoreInstanceState(savedState);    
    mDataset = (XYMultipleSeriesDataset) savedState.getSerializable("dataset");
    mRenderer = (XYMultipleSeriesRenderer) savedState.getSerializable("renderer");
    mCurrentSeries = (XYSeries) savedState.getSerializable("current_series");
    mCurrentRenderer = (XYSeriesRenderer) savedState.getSerializable("current_renderer");
    mDateFormat = savedState.getString("date_format");
  }

  @Override
  protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putSerializable("dataset", mDataset);
    outState.putSerializable("renderer", mRenderer);
    outState.putSerializable("current_series", mCurrentSeries);
    outState.putSerializable("current_renderer", mCurrentRenderer);
    outState.putString("date_format", mDateFormat);
  }

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.xy_chart);
    Button save = (Button)findViewById(R.id.saveChart);

    mRenderer.setApplyBackgroundColor(true);
    //mRenderer.setBackgroundColor(Color.WHITE);
    mRenderer.setShowGrid(true);
    mRenderer.setAxisTitleTextSize(16);
    mRenderer.setChartTitleTextSize(20);
    mRenderer.setLabelsTextSize(15);
    mRenderer.setLegendTextSize(15);
    //mRenderer.setMargins(new int[] { 20, 30, 15, 0 });
    mRenderer.setZoomButtonsVisible(true);
    mRenderer.setPointSize(10);

        XYSeries series = new XYSeries("Blood Sugar Increment (mg/dl)");
        mDataset.addSeries(series);
        mCurrentSeries = series;
        XYSeriesRenderer renderer = new XYSeriesRenderer();
        mRenderer.addSeriesRenderer(renderer);
        renderer.setPointStyle(PointStyle.CIRCLE);
        renderer.setFillPoints(true);
        mCurrentRenderer = renderer;

       cek();
             }

  @Override
  protected void onResume() {
    super.onResume();
    if (mChartView == null) {
      LinearLayout layout = (LinearLayout) findViewById(R.id.chart);
      mChartView = ChartFactory.getLineChartView(this, mDataset, mRenderer);
      mRenderer.setClickEnabled(true);
      mRenderer.setSelectableBuffer(100);
      mChartView.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
          SeriesSelection seriesSelection = mChartView.getCurrentSeriesAndPoint();
          double[] xy = mChartView.toRealPoint(0);
          if (seriesSelection == null) {
            Toast.makeText(ChartBuilder.this, "No chart element was clicked", Toast.LENGTH_SHORT)
                .show();
          } else {
            Toast.makeText(
                ChartBuilder.this,
                "Your blood glucose level at this point is = " + (float) xy[1] + "mg/dl, where the normal level of blood glucose is < 140 mg/dl, " + textResult, Toast.LENGTH_SHORT).show();
          }
        }
      });
      mChartView.setOnLongClickListener(new View.OnLongClickListener() {
        @Override
        public boolean onLongClick(View v) {
          SeriesSelection seriesSelection = mChartView.getCurrentSeriesAndPoint();
          if (seriesSelection == null) {
            Toast.makeText(ChartBuilder.this, "No chart element was long pressed",
                Toast.LENGTH_SHORT);
            return false; // no chart element was long pressed, so let something
            // else handle the event
          } else {
            Toast.makeText(ChartBuilder.this, "Chart element in series index "
                + seriesSelection.getSeriesIndex() + " data point index "
                + seriesSelection.getPointIndex() + " was long pressed", Toast.LENGTH_SHORT);
            return true; // the element was long pressed - the event has been
            // handled
          }
        }
      });
      mChartView.addZoomListener(new ZoomListener() {
        public void zoomApplied(ZoomEvent e) {
          String type = "out";
          if (e.isZoomIn()) {
            type = "in";
          }
          System.out.println("Zoom " + type + " rate " + e.getZoomRate());
        }

        public void zoomReset() {
          System.out.println("Reset");
        }
      }, true, true);
      mChartView.addPanListener(new PanListener() {
        public void panApplied() {
          System.out.println("New X range=[" + mRenderer.getXAxisMin() + ", " + mRenderer.getXAxisMax()
              + "], Y range=[" + mRenderer.getYAxisMax() + ", " + mRenderer.getYAxisMax() + "]");
        }
      });
      layout.addView(mChartView, new LayoutParams(LayoutParams.FILL_PARENT,
          LayoutParams.FILL_PARENT));
    } else {
      mChartView.repaint();
    }
  }

  public void cek(){

      String url_select = "http://10.0.2.2/BloodGlucose/selectUserChart.php";

      HttpClient httpClient = new DefaultHttpClient();
      HttpPost httpPost = new HttpPost(url_select);

      //parameter
      String username = getIntent().getStringExtra("uname");
      ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();
      param.add(new BasicNameValuePair("username", username));
      try {
         //add parameter
          httpPost.setEntity(new UrlEncodedFormEntity(param));

        HttpResponse httpRespose = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpRespose.getEntity();

        //read content
        InputStream in = httpEntity.getContent();
        BufferedReader read = new BufferedReader(new InputStreamReader(in));

        String content = "";
        String line = "";

        while((line = read.readLine())!=null){
           content += line;
        }

        Log.d("ADBUG", "content: "+content);

        //json
        if(!content.equals("null")){

           try {
              JSONArray jArr = new JSONArray(content);
              for(int i=0;i<jArr.length();i++){
                 JSONObject jObj = jArr.getJSONObject(i);

                 String a = jObj.getString("_id");
                 String b = jObj.getString("result");

                 ids.add(a.toString());
                 result.add(b.toString());

                 Double x,y;

                         x = Double.parseDouble(a.toString());
                         y = Double.parseDouble(b.toString());
                         mCurrentSeries.add(x, y);

              }

           } catch (JSONException e) {
              // TODO Auto-generated catch block
              e.printStackTrace();
           }

        }else{
           Toast.makeText(this, "Error", Toast.LENGTH_LONG).show();
        }

     } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
     } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
     }
  }

} 
```

问题是，图表是空的，任何人都可以帮助我吗？

```
my databases
_id | result|
 1  | 180   |
 2  | 200   |
 3  | 145   | 
```

这是我的 php 代码：selectUserChart.php

```
<?php
   include_once("koneksi.php");   

   $username = $_REQUEST['username']; 

   $sqlString = "SELECT * FROM login WHERE username_user = '$username'";

   $rs = mysql_query($sqlString);

   if($rs){
      while($objRs = mysql_fetch_assoc($rs)){
         $output[] = $objRs;
      }

      echo json_encode($output);
   }
   mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:28:31.667

The only problem I saw in this code was related to your web service that returns the data. I commented that out as I cannot access it and added hardcoded data and the chart is displaying fine.

To see it yourself, please add the method below and call it instead of calling `cek()`.

```
private void addData() {
  mCurrentSeries.add(0, 1);
  mCurrentSeries.add(1, 2);
  mCurrentSeries.add(2, 1);
  mCurrentSeries.add(3, 2);
} 
```

# c# - 相同的网格视图但不同的行为

> ID：12345930
> 
> 赞同：1
> 
> 时间：2012-09-10T05:44:47.040
> 
> 标签：c#, asp.net, gridview

我在一个页面上有两个网格视图，除了它们的 ID 之外，两个网格视图都完全相同。但是一个网格视图的行为是出乎意料的。当我使用 EmptyDataTemplate 时，只有一个网格视图显示它，其他不显示。当我使用 jquery 数据表时，只有一个网格支持其他网格不支持。我无法找出这背后的原因。请帮我。在这里，我为您提供了网格视图绑定的代码及其标记。

这个很好

```
 <asp:GridView ID="gridAttributes" CssClass="table " runat="server"
      AutoGenerateColumns="False" GridLines="None">
      <EmptyDataTemplate>
               No Attribute Available.<a href="Ecommerce.aspx"> Click here to add attributes.</a>
      </EmptyDataTemplate>
      <Columns>
         <asp:TemplateField HeaderText="Include">
              <ItemTemplate>
                       <asp:CheckBox ID="cbInclude" 
                            EcommrceAttributesID='<%# Eval("EcommrceAttributesID") %>'
                            runat="server" />
              </ItemTemplate>
         </asp:TemplateField>
         <asp:TemplateField HeaderText="Name">
              <ItemTemplate><%# Eval("AttributeName")%></ItemTemplate>
         </asp:TemplateField>
         <asp:TemplateField HeaderText="Values">
              <ItemTemplate><%# Eval("Attributevalues")%></ItemTemplate>
         </asp:TemplateField>
      </Columns>
</asp:GridView> 
```

这个引起了问题

```
<asp:GridView ID="gridAttributeSC" CssClass="table " runat="server"
      AutoGenerateColumns="False" GridLines="None">
    <EmptyDataTemplate>
            No Attribute Available.<a href="Ecommerce.aspx"> Click here to add attributes.</a>
    </EmptyDataTemplate>
    <Columns>
         <asp:TemplateField HeaderText="Include">
              <ItemTemplate>
                     <asp:CheckBox ID="cbInclude" 
                           EcommrceAttributesID='<%# Eval("EcommrceAttributesID") %>'
                           runat="server" />
              </ItemTemplate>
         </asp:TemplateField>
         <asp:TemplateField HeaderText="Name">
               <ItemTemplate><%# Eval("AttributeName")%></ItemTemplate>
         </asp:TemplateField>
         <asp:TemplateField HeaderText="Values">
               <ItemTemplate><%# Eval("Attributevalues")%></ItemTemplate>
         </asp:TemplateField>
     </Columns>
</asp:GridView> 
```

这是绑定代码

```
if (eCommerceSettingId != "0")
{
      clsEcommerceAttributes attr = new clsEcommerceAttributes();
      DataSet dsAttr = attr.getEcommerceAttributesByEcommerceSettingID(new Guid(eCommerceSettingId));
      gridAttributes.DataSource = dsAttr;
      gridAttributes.DataBind();

      gridAttributeSC.DataSource = dsAttr;
      gridAttributeSC.DataBind();

}
else
{
      gridAttributes.DataSource = null;
      gridAttributes.DataBind();
      gridAttributeSC.DataSource = null;
      gridAttributeSC.DataBind();
} 
```

# jquery - jQuery自定义函数在母版页上不起作用

> ID：12345931
> 
> 赞同：0
> 
> 时间：2012-09-10T05:45:05.560
> 
> 标签：jquery, asp.net, master-pages

我在我的 Web 应用程序中创建了一个自定义 jQuery 函数，它在没有母版页的情况下工作正常，现在我有一个母版页，我在内容页面上添加了对我的 .js 文件的引用并调用自定义 js 方法，然后它给出我的错误就像

> Type error: object function (selector, context){ //jquery对象实际上只是构造函数'enhanced' return new jQuery.fn.init(selector, context, rootjQuery); } 没有方法'myCustomMethod'

我正在调用自定义方法，例如：

```
 $(document).ready(function () {
             $('#btnTest').click(function () { 
                 try {
                     $.myCustomMethod('testing title!', 'popup.aspx', 600, 400);
                 } catch (e) {
                     alert(e);
                 }
             });
         }); 
```

我的js代码是

```
(function ($) {
    $.fn.myCustomMethod = function (title, src, width, height) {
       // all my code here
}; })(jQuery); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:54:26.087

`$.myCustomMethod('testing title!', 'popup.aspx', 600, 400);`

应该

```
$(this).myCustomMethod('testing title!', 'popup.aspx', 600, 400); 
```

# standards - 哪个 ISO 适用于文档管理系统？

> ID：12345934
> 
> 赞同：0
> 
> 时间：2012-09-10T05:45:24.797
> 
> 标签：standards, iso, document-management

我目前的任务是创建一个符合 ISO（国际标准化组织）的文档管理系统。问题是，我不知道 ISO 适合和/或适用于文档管理系统。

谁能帮我吗？该系统将使用 Web 技术（如 PHP 和 MySQL）制作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:52:08.777

据我所知，“文件管理系统”是 ISO 9001 质量管理系统的一部分。尝试挖掘这个 ISO。

对于 PHP/MySQL，您需要像“Apache”这样的网络服务器，并将 PHP 和 MySQL 都连接到该服务器。我使用了“DENVER 项目”，将所有三个（Apache、PHP、MySQL）安装在一个数据包中。

# android - 返回上次更新的标签活动

> ID：12345935
> 
> 赞同：-1
> 
> 时间：2012-09-10T05:45:36.623
> 
> 标签：android, android-tabactivity

当我从选项卡 1 回来并保存数据并进入我的主选项卡活动时，我进入当前选项卡 0，那么我如何才能返回上次更新的选项卡活动？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:52:06.167

您可以使用“SharedPreferences”。

您需要使用最后更新的选项卡名称或 id 或索引将一个变量存储在共享首选项中。然后当你回来时，你需要检查这个变量是最后一个选项卡，并做一些事情去那个选项卡。

以下是一些与此相关的演示链接。

[演示一](http://marakana.com/forums/android/examples/63.html)

[演示-2](http://android-er.blogspot.in/2011/01/example-of-using-sharedpreferencesedito.html)

[演示3](http://saigeethamn.blogspot.in/2009/10/shared-preferences-android-developer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:52:24.457

您可以在加载时使用 SharedPreferences

加载时的第 1 步写入 SharedPreferences 并存储 0 值确保其写入一次

第 2 步从 SharePreference 中读取该值并获取它

步骤 3 设置值

```
 Boolean temp = true;

if(temp)
    {
         SharedPreferences.Editor shedit=shreftab.edit();
         shedit.putString("tabchange", "0");
         shedit.commit();
         temp = false;
    }

         String  vartabis = shreftab.getString("tabchange", null);
         tabhost.setCurrentTab(Integer.parseInt(vartabis)); 
```

第 4 步现在您可以根据需要更新它 SharedPreferences 文件键值并获取它

# facebook - 在 Eclipse 中为 Blackberry 正确添加 Facebook jar

> ID：12345936
> 
> 赞同：0
> 
> 时间：2012-09-10T05:45:37.260
> 
> 标签：facebook, blackberry

如何在 Eclipse 中为黑莓正确添加 Facebook .jar 文件

```
"ERRO :Module 'FacebookBlackBerrySDK-v0.8.25' not found." 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:29:17.560

以下是将 jar 正确添加到 Eclipse 项目的步骤。似乎您没有在 Eclipse 环境中正确添加 jar。所以请检查步骤。

*   在您的项目下创建一个名为“lib”（或您想调用的任何名称）的文件夹，并将下载的 JAR 文件复制到该文件夹​​中。

*   右键单击您的项目 > 属性

*   Java Build Path > Libraries > Add JARs... > 选择“lib”文件夹中的 JAR 文件

*   Java Build Path > Order and Export > 检查 JAR 文件

# javascript - 在尝试实施 Google 提要时，如何解决我的“'google' 未定义”错误？

> ID：12345937
> 
> 赞同：1
> 
> 时间：2012-09-10T05:45:52.380
> 
> 标签：javascript, html

我正在使用 Windows8 Metro Style 应用程序，我想使用 JavaScript 和 HTML5 实现 Google Feed，但出现此错误：

> “ms-appx://f5b7d159-5dd1-4c68-b0ba-3b3403d1fe78/default.html 中第 32 行第 9 列未处理的异常
> 
> 0x800a1391 - JavaScript 运行时错误：“google”未定义”

我无法使用`google.load("feeds","1");`
如何解决此问题来创建 Google API 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T05:54:27.577

您是否在 HTML 中包含了 google API 脚本？

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script> 
```

# c#-4.0 - how to add new icon image for newly created Dev express barButtonItem..?

> ID：12345938
> 
> 赞同：1
> 
> 时间：2012-09-10T05:45:52.097
> 
> 标签：c#-4.0, devexpress, windows-applications, ribbon-control

I am currently working C# windows application can any one tell me how to add new icon for the newly created barButtonItem tell me how to add new image for that button.

If i select large image Index property then it shows only the old icons that are available Can any one tell me how to add new image for the button.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:51:03.373

It would depend on how you are using your `barButtonItem`

we use it with our own set of images. you can access those via

`global::Resources.(yourOwnPath);`

as stated here [http://documentation.devexpress.com/#WindowsForms/DevExpressXtraBarsBarItem_Glyphtopic](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraBarsBarItem_Glyphtopic)

you can also use a list of images and use the index field or set the large Glyph of Glyph property of the button

# c#-4.0 - Columns get combined in .Net Column charts

> ID：12345939
> 
> 赞同：0
> 
> 时间：2012-09-10T05:45:53.640
> 
> 标签：c#-4.0, mschart

I am working in .Net Charts. I am trying to generate a Column chart. I am having two rows in my dataset. Here is my code.

```
 DataTable DT1 = new DataTable();
                    DT1 = chartViewSummaryList;
                    DataView DV = DT1.DefaultView;
                    DV.ToTable(false, new string[] { "REVENUE_TOTAL", "WEEK_END_DATE" });

                    DataSet ds = new DataSet();
                    ds.Tables.Add(DT1.Copy());

                    ds.Tables[0].Rows[0]["MARGIN"] = "0";
                    ds.Tables[0].Rows[0]["REVENUE_TOTAL"] = "3776169.61";
                    ds.Tables[0].Rows[0]["MARGIN_PCT"] = "0";
                    ds.Tables[0].Rows[0]["VISIT_REVENUE_AVG"] = "29.28";
                    ds.Tables[0].Rows[0]["VISIT_COUNT"] = "614041";
                    ds.Tables[0].Rows[0]["REVENUE_SALE"] = "1840387.18";
                    ds.Tables[0].Rows[0]["REVENUE_REGULAR"] = "1935782.43";
                    ds.Tables[0].Rows[0]["WEEK_END_DATE"] = "1/1/2012 12:00:00 AM";

                    ds.Tables[0].Rows.Add();

                    ds.Tables[0].Rows[1]["MARGIN"] = "1";
                    ds.Tables[0].Rows[1]["REVENUE_TOTAL"] = "5776169.61";
                    ds.Tables[0].Rows[1]["MARGIN_PCT"] = "0";
                    ds.Tables[0].Rows[1]["VISIT_REVENUE_AVG"] = "49.28";
                    ds.Tables[0].Rows[1]["VISIT_COUNT"] = "814041";
                    ds.Tables[0].Rows[1]["REVENUE_SALE"] = "3840387.18";
                    ds.Tables[0].Rows[1]["REVENUE_REGULAR"] = "3935782.43";
                    ds.Tables[0].Rows[1]["WEEK_END_DATE"] = "1/1/2012 12:00:00 AM";

                    Chart1.DataSource = ds;

                    for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
                    {
                        Chart1.Titles.Add(storeLevelCaption).Font = new System.Drawing.Font("Verdana", 11, FontStyle.Bold);
                        Chart1.ChartAreas["ChartArea1"].AxisX.Title = "Weeks";
                        Chart1.ChartAreas["ChartArea1"].AxisX.TitleFont = new System.Drawing.Font("Verdana", 10, FontStyle.Bold);
                        Chart1.ChartAreas["ChartArea1"].AxisX.LabelStyle.Font = new Font(new FontFamily("Verdana"), 7.25F, FontStyle.Bold);
                        string series = "Series" + i;
                        Chart1.Series.Add(series);

                        Chart1.Series[series].ChartType = System.Web.UI.DataVisualization.Charting.SeriesChartType.Column;

                        Chart1.Series[series].XValueMember = "WEEK_END_DATE";
                        Chart1.ChartAreas["ChartArea1"].AxisX.MajorGrid.Enabled = false;

                        Color color = System.Drawing.ColorTranslator.FromHtml("#B93B8F");
                        Chart1.Series[series].Color = color;

                        Chart1.ChartAreas["ChartArea1"].AxisY.Title = "Total Revenue";
                        Chart1.ChartAreas["ChartArea1"].AxisY.TitleFont = new System.Drawing.Font("Verdana", 10, FontStyle.Bold);
                        Chart1.ChartAreas["ChartArea1"].AxisY.LabelStyle.Font = new Font(new FontFamily("Verdana"), 7.25F, FontStyle.Bold);
                        Chart1.Series[series].YValueMembers = "REVENUE_TOTAL";
                        Chart1.ChartAreas["ChartArea1"].AxisY.MajorGrid.Enabled = false;

                        Chart1.Series[series].ToolTip = "Total Revenue ($) , " + ds.Tables[0].Rows[i]["WEEK_END_DATE"].ToString() + " , " + ds.Tables[0].Rows[i]["REVENUE_TOTAL"].ToString();

                        Chart1.Series[series].Font = new Font(new FontFamily("Verdana"), 7.25F, FontStyle.Bold);
                        //Chart1.Series[series].Name = "Total Revenue";
                    }
                    Chart1.ChartAreas[0].AxisY.Interval = 1;
                    Chart1.DataBind(); 
```

I am getting the chart, where two column combined together and displayed as one column. Where i had gone wrong...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:50:49.787

我无法使用 WinForm 图表程序集重现您的问题。但是，您可能想尝试使用不同的日期，因为它们绑定到您的 X 值。

```
ds.Tables[0].Rows[0]["WEEK_END_DATE"] = "1/1/2012 12:00:00 AM";
ds.Tables[0].Rows[1]["WEEK_END_DATE"] = "8/1/2012 12:00:00 AM"; // a different date 
```

仅供参考，我对您的代码进行了最低限度的更改

```
 // DT1 = chartViewSummaryList;
        // replace unknown object with this code
        DT1.Columns.Add(new DataColumn("MARGIN"));
        DT1.Columns.Add(new DataColumn("REVENUE_TOTAL"));
        DT1.Columns.Add(new DataColumn("MARGIN_PCT"));
        DT1.Columns.Add(new DataColumn("VISIT_REVENUE_AVG"));
        DT1.Columns.Add(new DataColumn("VISIT_COUNT"));
        DT1.Columns.Add(new DataColumn("REVENUE_SALE"));
        DT1.Columns.Add(new DataColumn("REVENUE_REGULAR"));
        DT1.Columns.Add(new DataColumn("WEEK_END_DATE")); 
```

并且还手动添加了一行

```
 ds.Tables.Add(DT1.Copy());
        ds.Tables[0].Rows.Add(); // Added this 
```

并从您的绘图代码中得到两列。

# model - 涉及学生付费的用例图，使用了 4 个关系

> ID：12345947
> 
> 赞同：0
> 
> 时间：2012-09-10T05:46:28.980
> 
> 标签：model, uml, use-case

我以前试过学习这个，但失败了。我的书谈到演员之间的不同关系并说

1.  “学生”与“注册课程”沟通 - 好的
2.  “支付学生费用包含在“注册课程”和“安排住宿”中“学生健康 - 不好
3.  “保险”是“支付学生费用”的延伸——不行
4.  “part time student”泛化为“students”——好的

“交学费”不包括交保险吗？教科书说扩展是例外情况，我不明白支付保险是例外吗？

当看到一个用例图时，你怎么知道从哪里开始阅读它？最左上角的符号？

用例是否清晰，只有一个是正确的，或者两个不同的用例可以正确描述相同的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:20:56.050

对于用例图，您从需要的地方开始。[在此图](http://www.google.com/imgres?imgurl=http://www.agilemodeling.com/images/models/useCaseDiagram.jpg&imgrefurl=http://www.agilemodeling.com/artifacts/useCaseDiagram.htm&h=481&w=538&sz=37&tbnid=C-zmxTpKVj-AXM%3a&tbnh=86&tbnw=96&prev=/search?q=use%2bcase%2bdiagram%2bexample&tbm=isch&tbo=u&zoom=1&q=use%20case%20diagram%20example&usg=__nx-mCrcXLHSyp-ETNMW9U_YzCwM=&sa=X&ei=mDlPUI-REorA9QS0ooCwBQ&ved=0CBwQ9QEwAA "在这张图中")中，如果您是学生，则从学生开始，并遵循他们被质疑的路径。我不知道你在这里的目标是什么，但我会写测试说：

When_Student_Drops_Seminar_Registar_should_Distribute_Information_to_Students_and_Distribute_Transcripts

如果您是注册人，您将从那个人开始等等

# android - Android usb host: asynchronous interrupt transfer

> ID：12345953
> 
> 赞同：11
> 
> 时间：2012-09-10T05:47:02.643
> 
> 标签：android, asynchronous, usb, interrupt, host

I'm trying to connect a USB-Device ( build by myself ) to communicate with my development board ( ODROID-X ) Unfortunately, the examples are very little, as far as the asynchronous communication. I'd some problems with the interrupt driven data exchange - how to build the connection by using the asynchronous interrupt mode? In one direction, the transmission was possible ... but in both it doesn't work. Is there an example like this:

*   send a ByteBuffer with endpoint_OUT
*   get a message from device on endpoint_IN

both in interrupt mode.

Thanks a lot for your support.

Hardy

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-12T08:41:20.847

也许我误解了这里的问题。从级别 12 开始，作为 API 包一部分的示例导弹发射器应用程序使用`queue()`和`requestWait()`方法来处理中断类型的端点。请求是 In 或 Out，取决于 EndPoint 的方向。

一个相当点头的请求->回复的代码看起来像这样。您可能希望以不同的方式构造真实代码，但这为您提供了需要发生的事情的要点（我希望）

```
public void run() {
    int bufferMaxLength=mEndpointOut.getMaxPacketSize();
    ByteBuffer buffer = ByteBuffer.allocate(bufferMaxLength);
    UsbRequest request = new UsbRequest(); // create an URB
    request.initialize(mConnection, mEndpointOut);
    buffer.put(/* your payload here */;

    // queue the outbound request
    boolean retval = request.queue(buffer, 1); 
        if (mConnection.requestWait() == request) { 
             // wait for confirmation (request was sent)
             UsbRequest inRequest = new UsbRequest(); 
             // URB for the incoming data
             inRequest.initialize(mConnection, mEndpointIn); 
             // the direction is dictated by this initialisation to the incoming endpoint.
             if(inRequest.queue(buffer, bufferMaxLength) == true){
                  mConnection.requestWait(); 
                  // wait for this request to be completed
                  // at this point buffer contains the data received
             }
        }
} 
```

如果您实际上正在寻找一种以异步方式运行此 IO 而不将线程绑定到它的方法，那么我认为您需要考虑使用该`DeviceConnection.getFilehandle()`方法返回一个标准文件句柄，理论上您可以像使用它一样使用它任何其他文件类型资源。但是我会注意到我没有尝试过这个。

如果这些都不能解决问题，请修改问题以澄清您正在努力寻找的示例。我希望这有帮助。

# javascript - 未捕获的 ReferenceError JavaScript

> ID：12345955
> 
> 赞同：0
> 
> 时间：2012-09-10T05:47:22.283
> 
> 标签：javascript, jquery, asp.net

好的，所以我有一个模板，我用它来将几个用户打印到一个表中。

```
function PrintUsers(item) {
    $.template('userList', '<tr onClick="OnUserPressed(${Identifier})">\
    <td>${Firstname}</td>\
    <td>${Lastname}</td>\
    </tr>');

    $.tmpl('userList', item).appendTo("#UserTableContainer");
} 
```

当我按下用户时，我希望将他/她的唯一标识符传递给我在模板中声明的名为 OnUserPressed 的函数。下面的代码只是一个测试，看看它是否真的将数据传递给函数。

```
 function OnUserPressed(Identifier) {
        alert(Identifier);
    } 
```

我的问题是：当我按下表中的第一个值时，我得到“Uncaught SyntaxError: Unexpected token ILLEGAL”。当我按下表中的任何其他值时，我得到“未捕获的 ReferenceError：xxx 未定义”，其中 xxx 是它们的唯一标识符。所以它实际上检索了 ID，但我仍然得到一个错误。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:52:49.603

您可能需要将标识符`OnUserPressed`作为字符串传递给函数。

尝试用单引号包裹`${Identifier}`模板变量：

```
<tr onClick="OnUserPressed('${Identifier}')"> 
```

* * *

编辑：回应关于单引号的评论。

在您的模板字符串中，您可以通过在它们前面加上反斜杠来转义单引号：

```
'<tr onClick="OnUserPressed(\'${Identifier}\')">' 
```

# c# - Create a web share or ftp share server

> ID：12345958
> 
> 赞同：1
> 
> 时间：2012-09-10T05:47:30.707
> 
> 标签：c#, windows, file-sharing

Sorry I think I am finally asking the right question. First I asked [Create a shell namespace extension](https://stackoverflow.com/questions/12341692/create-a-shell-namespace-extension)

Anyways I am synchronizing and sharing files between two peers just like drobox but with larger data. I was wondering how could I create a web share or ftp share server so that I can connect to it from windows.

For example when you click on:

![enter image description here](../Images/44c65e307d2bc22e872bc431f7ac26b3.png)

**Then**

![enter image description here](../Images/c332e26b8db289230a9576387b668563.png)

if I select `ftp://ftp.microsoft.com`

then this is what I get:

![enter image description here](../Images/632e4c13d5f2f62c42db966fd5919351.png)

* * *

From researching on the internet I saw that IIS supports this. I was wondering if there are some libraries that will enable me to create this server on c#.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:02:43.660

您可以使用 Apache 服务器将您的计算机变成托管服务器。Apache 附带了许多软件包，例如 xampp、wampp，它们有助于减少安装时间。

# python - 在 Django 中使用多表继承时是否可以直接设置隐式 OneToOne 键？

> ID：12345959
> 
> 赞同：1
> 
> 时间：2012-09-10T05:47:32.840
> 
> 标签：python, django, django-models, django-orm, django-signals

我正在尝试通过多表继承来扩展库模型，这就是我最终得到的：

```
class CompetitionMedia(InstagramMedia):
    visible = models.BooleanField(default=True)
    most_creative = models.BooleanField(default=False)

@receiver(post_save, sender=InstagramMedia, dispatch_uid='create_competition_media')
def create_competition_media(sender, instance, created, **kwargs):
    competition_media = CompetitionMedia()
    competition_media.instagrammedia = instance
    competition_media.save() # fails

@receiver(post_save, sender=InstagramMedia, dispatch_uid='create_competition_media2')
def create_competition_media2(sender, instance, created, **kwargs):
    CompetitionMedia.objects.create(instagrammedia=instance) # Fails 
```

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:51:29.347

据我了解，你想要得到这样的东西：

```
class CompetitionMedia(models.Model):
    instagrammedia = models.OneToOneField(InstagramMedia, primary_key=True)
    visible = models.BooleanField(default=True)
    most_creative = models.BooleanField(default=False)

@receiver(post_save, sender=InstagramMedia, dispatch_uid='create_competition_media2')
def create_competition_media(sender, instance, created, **kwargs):
    if created:  
         CompetitionMedia.objects.create(instagrammedia=instance) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:10:25.413

我显然应该设置`parent_ptr`，例如：

```
@receiver(post_save, sender=InstagramMedia, dispatch_uid='create_competition_media')
def create_competition_media2(sender, instance, created, **kwargs):
    if created:
        CompetitionMedia.objects.create(instagrammedia_ptr=instance) 
```

但是，如果您先创建并保存父级然后尝试创建子级，则存在一个问题，即使在您尚未在子级中设置的字段上，子级也会覆盖父级。如[https://code.djangoproject.com/ticket/11618](https://code.djangoproject.com/ticket/11618)和[https://code.djangoproject.com/ticket/7623](https://code.djangoproject.com/ticket/7623)中所述，所以我会避免它，因为它不是很明显会发生。

如果有人真的想走那条路，你需要做：

```
@receiver(post_save, sender=InstagramMedia, dispatch_uid='create_competition_media')
def create_competition_media2(sender, instance, created, **kwargs):
    if created:
        CompetitionMedia.objects.create(instagrammedia_ptr=instance)
        instance.save() # This should re-save the parent values. 
```

更好的是：

```
@receiver(post_save, sender=InstagramMedia, dispatch_uid='create_competition_media')
def create_competition_media2(sender, instance, created, **kwargs):
    if created:
        CompetitionMedia.objects.create(instagrammedia_ptr=instance,
            **instance.__dict__) 
```

# file - Deleting last n lines from file using batch file

> ID：12345964
> 
> 赞同：2
> 
> 时间：2012-09-10T05:49:17.273
> 
> 标签：file, windows-7, batch-file

How to delete last n lines from file using batch script

I don't have any idea about batch files, I am writing batch file for the first time.

How should I write this batch file?

For Windows7

Try it for

```
<Project_Name>

    <Noter>
        <Common>
        <File>D:\Project_Name\Util.jar</File>
        <File>D:\Project_Name\Noter.bat</File>
        <File>D:Project_Name\Noter.xml</File>
        <File>D:Project_Name\Noter.jar</File>       
        </Common>

        <Project_Name>
            <File>D:\Util.bat</File>
            <File>D:\Util.xml</File>
            <File>D:\log.bat</File>
        </Project_Name>
    </Noter>
    <CCNET> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T07:30:57.943

这是删除最后 N 行的完整脚本

*   计算总行数
*   设置 Line = Line - N ，只保留处理行号

```
@echo OFF
setlocal EnableDelayedExpansion

set LINES=0
for /f "delims==" %%I in (infile.txt) do (
    set /a LINES=LINES+1    
)

echo Total Lines : %LINES%
echo.

:: n = 5 , last 5 line will ignore 
set /a LINES=LINES-5

call:PrintFirstNLine > output.txt

goto EOF

:PrintFirstNLine
set cur=0
for /f "delims==" %%I in (infile.txt) do (      
    echo %%I        
    ::echo !cur! : %%I      
    set /a cur=cur+1    
    if "!cur!"=="%LINES%" goto EOF
) 

:EOF 

exit /b 
```

这里`call:PrintFirstNLine > output.txt`将以外部文件名作为*output.txt给出输出*

**样本输入的**输出****

 **```
<Project_Name>      
<CBA_Notifier>      
    <Common>        
    <File>D:\CBA\CBA_Notifier\Project_Name\IPS-Util.jar</File>      
    <File>D:\CBA\CBA_Notifier\Project_Name\Notifier.bat</File>      
    <File>D:\CBA\CBA_Notifier\Project_Name\Notifier.xml</File>      
    <File>D:\CBA\CBA_Notifier\Project_Name\Notifier.jar</File>              
    </Common>       
    <Project_Name>      
        <File>D:\CBA\CBA_Notifier\IPS-Util.bat</File> 
```

删除最后 5 行

**更新**

```
:PrintFirstNLine
set cur=0
for /F "tokens=1* delims=]" %%I in ('type "infile.txt" ^| find /V /N ""') do (
   if "%%J"=="" (echo.) else (
        echo.%%J
        set /a cur=cur+1    
        )  

   if "!cur!"=="%LINES%" goto EOF
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:03:17.300

该脚本将接受 1 个参数，即要中继的文件，创建一个临时文件，然后用较短的文件替换原始文件。

```
@echo off
setlocal enabledelayedexpansion
set count=
for /f %%x in ('type %1 ^| find /c /v ""') do set /a lines=%%x-5
copy /y nul %tmp%\tmp.zzz > nul
for /f "tokens=*" %%x in ('type %1 ^| find /v ""') do (
  set /a count=count+1
  if !count! leq %lines% echo %%x>>%tmp%\tmp.zzz
)
move /y %tmp%\tmp.zzz %1 > nul 
```

如果原始文件是 5 行或更少行，主输出例程将不会创建文件。为了解决这个问题，我使用`copy /y null`创建一个零字节文件。

如果您不想有一个空文件，只需删除该`copy /y nul`行，并将其替换为以下行：

```
if %lines% leq 0 del %1 
```

您应该使用一种方法或另一种方法，否则 5 行或更少行的源文件将保持不变。（既没有替换也没有删除。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-12T06:45:49.593

从文件中删除最后几行，

1 从文件中复制所需的起始行，如 from- e:\original.txt 2 将它们粘贴到新文件中，如 - e:\new\newfile1.txt

代码感谢给我这个代码的人：记住如果你有动机，甚至血液hb = 6，一切都可以完成。但总是需要大自然的帮助，因为你是它的一部分

@echo off & setLocal enableDELAYedeXpansion set N= for /f "tokens=* delims= " %%a in (e:\4.txt) do ( set /a N+=1 if !N! gtr 264 goto :did

> > e:\new4.txt echo.%%a ) :did

如果您有 800 个文件，则使用 excel 为 800 制作代码，然后将其复制到记事本并使用 Ctrl+h 替换没有空格的空格。然后将文件重命名为 haha​​.bat 。在文件编号为 1.txt 2.txt 3.txt 等的文件夹中运行。任何询问者欢迎 Erkamaldev@gmail.com “Bharata 万岁”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-24T15:40:05.220

一种编码较少的慢速方法：

```
set input=file.txt
set remove=7

for /f "delims=" %i in ('find /c /v "" ^< "%cd%\%input%"') do set lines=%i
set /a lines-=remove
for /l %i in (1,1,!lines!) do findstr /n . log.txt | findstr /b %i: 
```

可能被重定向到一个文件。
每行都以行号为前缀；可以通过额外的编码删除。
我的答案中带有`/g`标志的更快版本：
[如何在 Windows 中拆分大文本文件？](https://stackoverflow.com/questions/31786287/how-to-split-large-text-file-in-windows)

在 Win 10 CMD 中测试，文件大小为 577KB，7669 行。**

# sql - Difference between these joins

> ID：12345965
> 
> 赞同：4
> 
> 时间：2012-09-10T05:49:18.710
> 
> 标签：sql, join

Is there any difference between

```
SELECT *
FROM TABLE_A a
JOIN TABLE_B b
  ON a.propertyA = b.propertyA 
```

And the query

```
SELECT * from TABLE_A a, TABLE_B b where a.propertyA=b.propertyA. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T05:52:29.990

`INNER JOIN`是您在第一个语法中使用的ANSI ( *SQL-92 ) 语法。*它通常被认为更具可读性，尤其是当您连接大量表时。

( *SQL-89*`WHERE syntax` )更面向关系模型。两个表 JOIN'ed 的结果是应用过滤器的表的笛卡尔积，该过滤器仅选择与连接列匹配的那些行。

 *使用 WHERE 语法更容易看到这一点。

我宁愿继续`ANSI`类型连接，因为如果您省略了该`ON`子句，则会生成错误，而如果您省略条件`where`子句，旧类型的连接将不会产生错误消息，因此它将生成笛卡尔积。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T05:53:10.440

这两个例子是一样的。两者都执行一个 INNER JOIN 操作（即使它只是第二个示例中的 JOIN），它基本上返回包含与 ON 子句相关的匹配结果的所有行。

我的猜测是 JOIN 和 INNER JOIN 操作要快一点，因为它们是为特定目的而设计的，而 SELECT 语句可以修改以做更多的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T05:51:53.140

“join”版本已经有大约 20 年的历史了，并且是首选，因为它清楚地标识了用于连接的谓词，而不是用于过滤结果的谓词。如果与（如果 table_b 中没有匹配的行，您仍然可以获得 table_a 的行）
一起使用，它还允许外连接。`left join`

“逗号”版本不允许外连接（如果 table_b 中没有匹配的行，您将不会获得 table_a 的行）*

# blackberry - Get the "real" width of LabelField (BlackBerry)

> ID：12345967
> 
> 赞同：0
> 
> 时间：2012-09-10T05:49:32.517
> 
> 标签：blackberry, labelfield

If I new a LabelField like this:

```
LabelField label = new LabelField("long longgggg long text"); 
```

it shows:

-----------------------
| long longggg     |
| long text            |
-----------------------

if I use label.getWidth(), it gives the width of:

| long longggg     |

but what I need is the width of:

| long longggg

Any solution?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T08:40:32.937

这是我用来获取多行标签实际高度的方法：

```
public int getPreferredHeight() {
        String text = getText();

        int maxWidth = getManager().getPreferredWidth();
        String[] words = StringUtilities.stringToWords(text);
        int lastWordAdvance = 0;
        int lines = 1;
        for (int i = 0; i < words.length; i++) {
            int wordAdvance = getFont().getAdvance(words[i]);
            if (lastWordAdvance + wordAdvance < maxWidth ) {
                lastWordAdvance += wordAdvance;
            } else {
                lines++;
                lastWordAdvance = wordAdvance;
            }
        }
        return (int)lines * getFont().getHeight(); 
    } 
```

它一个一个地遍历单词并计算提前量，试图找出我们的标签真正使用了多少行。然后我使用 getFont().getHeight() 来确定总高度。

您可以使用我的示例中计算提前的部分来获取标签的实际宽度。为此，您可以使用 Math.max() 方法来确定最大线宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:59:36.180

检查 getPreferedWidth() 以获取长度。

如果您应用了任何字体而不是您需要的字体

```
<font object>.getAdvance(label.getText()) 
```

# vb.net - Windows Service not connecting to SQL Anywhere DB

> ID：12345970
> 
> 赞同：3
> 
> 时间：2012-09-10T05:49:54.853
> 
> 标签：vb.net, windows-services, vb.net-2010, sqlanywhere

I had built an application to connect to MySQL DB and SyBase - SQL Anywhere DB using VB.NET and appropriate ODBC connections. This was working fine until we had to make this application a service which keeps running in the background irrespective of any users logged in.

I built the application into a service and after installation, the service was able to successfully connect to MySQL DB, but I am getting the following error when connecting to SyBase (please note the connection string is exactly same as used in the application)

```
ERROR [08001] [Sybase][ODBC Driver][SQL Anywhere]Database server not found 
```

The project installer - service process installer 1 is configured as **localsystem**.

The creepiest thing here is, mysql connection is successful, when the same application was not a service, connecting to sybase was successful. Once it was made into a service it started failing. I have a Windows 7 64-bit workstation and VS 2010.

I have been trying to do every single thing for the last one week to fix it but nothing seems to be working. Any advice would be highly appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:52:47.540

看起来您正在使用 DSN 连接到 SQL Anywhere。

首先，确保您已将其配置为系统 DSN。然后，验证您使用的是 TCP/IP 连接协议（**ODBC 管理 -> 选择系统 DSN 选项卡 -> 在列表中选择 DSN -> 单击配置 -> 转到网络选项卡**）并且**不是**共享内存。

尝试连接到 SQL Anywhere 数据库服务器的 Win 服务无法**使用**共享内存。我怀疑这是问题所在，因为您可以使用相同的连接字符串从桌面应用程序进行连接。

完成这项工作的一种方法是将 SQL Anywhere 数据库作为网络服务器启动（**开始 -> 所有程序 -> Sql Anywhere 12（或 11，取决于您的设置）-> SQL Anywhere -> 网络服务器。**

这应该运行 dbsvr12.exe，它将开始侦听 TCP 端口上的连接。

然后，将*Links=tcpip*或*Host=localhost*添加到您的 Win 服务连接字符串并试一试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:05:02.517

请注意，简单的 win 应用程序正在使用来自登录用户的凭据运行，而 Windows 服务正在系统帐户上运行（在您的情况下）。您有两个选择，更改连接字符串以连接特定用户（如果您现在使用受信任的连接）或将 Windows 服务登录用户更改为您的用户。

# java - 在facebook上发布图片不起作用

> ID：12345973
> 
> 赞同：0
> 
> 时间：2012-09-10T05:50:37.740
> 
> 标签：java, android, facebook, eclipse

我正在尝试在 facebook 上上传图片。使用此代码

```
 private void getFb()
    {

        final SharedPreferences mPrefs = getSharedPreferences(
                "fbPref", Activity.MODE_PRIVATE);

        String access_token = mPrefs.getString("access_token", null);
        long expires = mPrefs.getLong("access_expires", 0);
        if(access_token != null) {
            fb.setAccessToken(access_token);
        }
        if(expires != 0) {
            fb.setAccessExpires(expires);
        }

        if(!fb.isSessionValid()) 
        {
            fb.authorize(this, new String[] {"publish_stream"}, new DialogListener() {
                public void onComplete(Bundle values) {
                    SharedPreferences.Editor editor = mPrefs.edit();
                    editor.putString("access_token", fb.getAccessToken());
                    editor.putLong("access_expires", fb.getAccessExpires());
                    editor.commit();
                }

                public void onFacebookError(FacebookError error) {}

                public void onError(DialogError e) {}

                public void onCancel() {}
            });
        }

    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        fb.authorizeCallback(requestCode, resultCode, data);

        Bundle parameters = new Bundle();
  //      parameters.putString(Facebook.TOKEN, fb.getAccessToken());
        // The byte array is the data of a picture.
        parameters.putString("message", "LolCats Test");
parameters.putString("picture", "http://cdn3.f-cdn.com/ppic/514992/logo/597178/profile_logo_597178.jpg");
parameters.putString("caption", "LLoll casts");

        try {
            fb.request("me/photos", parameters, "POST");

        } catch (FileNotFoundException fileNotFoundException) {
           // makeToast(fileNotFoundException.getMessage());
        } catch (MalformedURLException malformedURLException) {
          //  makeToast(malformedURLException.getMessage());
        } catch (IOException ioException) {
         //   makeToast(ioException.getMessage());
        }

    } 
```

唯一发生的事情是打开 FB 应用程序的页面，执行一些进度条，然后返回应用程序，没有错误等。图像未在 facebook 上共享有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T06:32:37.567

请试试这个。

```
parameters.putString("message", "LolCats Test");
parameters.putByteArray("source", "http://cdn3.fcdn.com/ppic/514992/logo/597178/profile_logo_597178.jpg".getBytes()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:13:07.623

此代码对我有用，请参阅[此处](https://github.com/facebook/facebook-android-sdk/tree/master/examples)的示例中的更多详细信息`Bitmap bi=BitmapFactory.decodeResource(getResources(), rec_id); ByteArrayOutputStream baos = new ByteArrayOutputStream();
bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
data = baos.toByteArray();
Bundle params = new Bundle();
params.putByteArray("photo", data); params.putString("caption", status); AsyncFacebookRunner mAsyncRunner=new AsyncFacebookRunner(fb); mAsyncRunner.request("me/photos", parems,"POST",new mRequestListener(),null);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T03:43:38.000

使它可以使用此代码....

```
private void getFb()
        {
            fb = new Facebook(Constants.facebookKey);
            String[] arrayOfString = new String[1];
            arrayOfString[0] = "publish_stream";
            fb.authorize(this, arrayOfString, new FBDialogListener());
        }

        @Override
        public void onActivityResult(int requestCode, int resultCode, Intent data) 
        {
            super.onActivityResult(requestCode, resultCode, data);
            fb.authorizeCallback(requestCode, resultCode, data);
        }

        private class FBDialogListener implements Facebook.DialogListener
        {

            public void onComplete(Bundle values)
            {
                Bundle localBundle = new Bundle();
                String str1 = "Myapp";
                String str2 = "This image is by Myapp, app for Android.";
                String str3 = "Download It";
                Object[] arrayOfObject = new Object[6];
                  arrayOfObject[0] = str1;
                  arrayOfObject[1] = str2;
                  arrayOfObject[2] = bitmapUrls.get(currentPosition);
                  arrayOfObject[3] = bitmapUrls.get(currentPosition);
                  arrayOfObject[4] = str3;
                  arrayOfObject[5] = "http://play.google.com/store/apps/details?id=myapp";
                  localBundle.putString("attachment", String.format("{\"name\":\"%s:\",\"href\":\"\",\"caption\":\"\",\"description\":\"%s\",\"media\":[{\"type\":\"image\",\"src\":\"%s\",\"href\":\"%s\"}],\"properties\":{\"%s\":{\"text\":\"Android market\",\"href\":\"%s\"}}}", arrayOfObject));
                  fb.dialog(ImageActivity.this, "stream.publish", localBundle, new PublishDialogListener());

            }

            public void onFacebookError(FacebookError e) {
            }

            public void onError(DialogError e) {                
            }

            public void onCancel() {

            }
        }

        private class PublishDialogListener implements Facebook.DialogListener
        {

            public void onComplete(Bundle values) {
                Toast.makeText(ImageActivity.this,  "Image has been shared"  , Toast.LENGTH_LONG).show();
            }

            public void onFacebookError(FacebookError e) {
            }

            public void onError(DialogError e) {
            }

            public void onCancel() {
            }

        } 
```

# disk - Btree：为什么访问探针比访问页面内的数据慢

> ID：12345979
> 
> 赞同：0
> 
> 时间：2012-09-10T05:51:55.293
> 
> 标签：disk, b-tree

在学习B Tree数据结构时，作者给出了page和probe的两个定义。而这两个术语是构建 B 树的主要思想。这是 page 和 probe 的两个定义：

> page：连续的数据块（例如：文件或 4096 字节块） Probe：第一次访问页面（例如：从磁盘到内存）
> 
> -->**属性**：探测请求的时间远大于访问页面内数据的时间。

1）我不太了解。我知道 I/O 访问比内存要低得多，但为什么第一次访问页面比访问页面内的数据大得多？（尽管一页中的所有数据也仍然存储在磁盘上）。

2) 在上述属性中，表示：一个探测请求大于一个页面内数据访问请求。或者，一个探测请求大于访问页面中的所有数据。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:55:49.060

好吧，由于“探测”是对页面的第一次访问，因此您需要先进行探测，然后才能访问页面内的数据。

我猜该属性应该读作“探测时间远高于探测后完成的访问”。我不得不承认，从你引用的内容来看，它的表述方式是模棱两可的。

# python - 在 feedparser 中访问“content”属性

> ID：12345980
> 
> 赞同：-1
> 
> 时间：2012-09-10T05:51:56.663
> 
> 标签：python, xml, feedparser

我在 Python 中使用 feedparser 来解析远程 xml 提要。结果包括典型的标题/链接/已发布/等，但是还有一个“内容”标签具有以下值。如何访问 value 属性？

```
[{'base': u'http://url.com', 'type': u'text/html', 'value': u'<p>html text etc', 'language': None}] 
```

我还没有看到任何阵列看起来像`[{}]`以前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T05:53:27.787

那只是列表中的字典。如果你有那个对象`x`，就做`x[0]['value']`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:53:42.920

这是一个包含一本字典的列表：

```
print content[0]['value'] 
```

从[feedparser 文档](http://packages.python.org/feedparser/reference-entry-content.html#entries-i-content)：

> `entries[i].content`
> 
> 包含有关条目完整内容的详细信息的字典列表。
> 
> Atom 提要可能包含多个内容元素。客户应根据类型和客户的能力尽可能多地渲染它们。

因此，您可以轻松地在该列表中拥有更多字典，或者 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T00:42:43.747

根据[文档](http://pythonhosted.org/feedparser/reference-entry-content.html#entries-i-content)

```
entries[i].content
entries[i].content[j].value
entries[i].content[j].type
entries[i].content[j].language 
```

ETC...

# java - Android活动每次增加2mb

> ID：12345987
> 
> 赞同：0
> 
> 时间：2012-09-10T05:52:23.577
> 
> 标签：java, android, memory-management, android-activity, android-memory

每次我退出我的 Android 应用程序并重新启动时，它会额外消耗 2 Mb，例如，如果我重新启动我的应用程序 3 次，它会多消耗 6 Mb。我使用后退按钮退出并清除 OnDestroy() 中的所有引用。

我浏览了与 Android 中的内存管理和内存泄漏有关的堆栈溢出的所有帖子，我也做了一个 MAT，但我的活动没有办法泄漏内存（持有参考），

我也对其他应用程序进行了同样的尝试，但它们保持 +/- 0.75 Mb 的恒定内存使用量。

我对 Android 内存管理感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:56:17.960

我得到了这个固定！问题是，在我的网格视图适配器中，我每次都在为网格图标文本设置字体，我应该在 On Create 中设置字体。

# c - 多次加倍变量，并将变量的所有迭代加在一起

> ID：12345990
> 
> 赞同：1
> 
> 时间：2012-09-10T05:52:44.153
> 
> 标签：c

为清晰起见而编辑。我为混乱道歉：3

好的，所以我正在上一个在线 CS 课程，我们应该用 C 语言编写一个程序，它会告诉你如果你在月初有一个便士并将其翻倍，你会有多少钱每天。

每一天，你都会得到昨天的两倍加上前几天的一切。

示例：您从 0.01 开始，然后在第 3 天计算运行总计。所以第一天是 0.01，第二天是 0.02，第三天是 0.04。在第 3 天，您将获得 0.01+0.02+0.04 (.09)。

该程序打算在任何给定月份（28 - 31 天）的持续时间内计算此过程。

我很难实现这一点。我已经把它加倍了，但我不确定如何将之前计算的天数加在一起。

这是我的代码：

```
#include <stdio.h>
#include <math.h>

int main(void) {

    /*days represents total days in months*/
    /*pens represents the number of pennies on the first day*/

    long long days;
    long long pens;

    do {
      printf("Enter the number of days in the month: ");
      scanf("%llu", &days);
    } while(days < 28 || days > 31);    

    printf("Enter the initial number of pennies: ");
    scanf("%llu", &pens);

    for (int i=0; i<= days-1; i++) {
      pens += pow(2,i);
      printf("You'll have $%llu\n", pens);
    }
} 
```

edit2：好的，所以我想我已经修复了它，这要感谢你所有的真棒建议。我将最后一部分更改为：

```
for (int i=0; i<= days-1; i++)
        {
            pens = pens + (pens * 2);

        }
        total = pens / 100;
        printf("You'll have $%.2f\n", total);

    } 
```

虽然输出仍然存在一个小问题（我在想，这是由于我使用的数据类型造成的？）它打印出来：

您将获得 0.00 美元 您将获得 0.00 美元 您将获得 0.00 美元 您将获得 0.00 美元 您将获得 2.00 美元 您将获得 7.00 美元 您将获得 21.00 美元、您将获得 65.00 美元 您将获得 196.00 美元、您将获得 590.00 美元您将获得 $1771.00 您将获得 $5314.00 您将获得 $15943.00 您将获得 $47829.00 您将获得 $143489.00 您将获得 $430467.00 您将获得 $1291401.00 您将获得 $3874204.00

等等

相当不错，但我打赌它不是那么准确，因为前几次迭代是 0.00。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T06:00:45.433

好吧，让我们把你必须做的事情翻译成伪代码：

```
var daily_amount = 0.01
var total = daily_amount

iteration_over_days:
    daily_amount *= 2
    total += daily_amount 
```

从那里，您需要做的就是翻译成 C。

享受！

除了使用`long`数据类型，您还可以从 1 开始，然后在末尾除以 100：$0.01 -> $1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:58:33.293

我认为以下行需要更改：

```
pens+=pow(2,i); 
```

它应该是：

```
pens = pens + (pens * 2) 
```

逻辑是，如果您在第 1 天以 1 便士开始，那么它将是这样的

第 1 天：1 + (1 * 2) = 3
第 2 天：3 + (3 * 2) = 9
第 3 天：9 + (9 * 2) = 27
以此类推..

我希望这是您所期望的逻辑。通过执行 pow(2,i)，您只是将每日计数的平方添加到您每天的总金额中，这似乎不是基于您的问题的预期逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T05:59:16.353

不要每次都计算功率！只需跟踪运行计数并每天加倍。

这是您需要`total_days`天数的算法的核心：

```
typedef unsigned long long int my_uint;

my_uint initial_payment = 1;
my_uint total_pennies = 0;

for (my_uint day_payment = initial_payment, day = 0; days != total_days; ++day)
{
    total_pennies += day_payment;
    day_payment *= 2;
}

// now have total_pennies 
```

* * *

当然你会注意到 1 +  *q*  +  *q* ²  +  *q* ³  + ... +  *q* ^(*N*  - 1)与 ( *q* ^(*N*)  - 1) / ( *q*  - 1) 相同，因此只需一步即可计算出答案 (例如，在您的情况下*q* = 2 和*N*天）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T05:59:36.097

这是您正在查看的代码：

```
total = 0;
for (int i = 1; i <= days; i++) {
     total += pens;
     pens = pens*2;
}
printf("You'll have $%d\n", total); 
```

# android - 如何像对话一样将列表视图项目设置为左右两侧..？

> ID：12345994
> 
> 赞同：0
> 
> 时间：2012-09-10T05:53:00.080
> 
> 标签：android, listview, adapter

目前正在开发一个应用程序，用于接收消息并按它们来的顺序显示它们。但现在我被困在如何根据传入和传出消息显示这些消息。我有一部安卓手机。在那个消息是左右对齐的。我想像那样显示消息..?? 我知道使用 listview 我可以做到这一点，但如何......？任何建议..??

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T06:01:08.077

您可以使用`getItemViewType()`和`getViewTypeCount()`使用`BaseAdapter`并决定显示具有某些逻辑条件的多行。根据返回的视图类型，您可以决定在列表中的哪个位置显示哪个视图。[`This blog`](http://android.amberfog.com/?p=296)也有完整的解释 ListView 如何使用不同的视图工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T06:04:39.310

尝试使用相对布局并考虑布局中的两个 textView 并使用它们将其膨胀到列表中。对于这两个 textViews 考虑使用

```
android:layout_alignParentLeft="true" 
```

一个和

```
android:layout_alignParentRight="true" 
```

给另一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T18:00:39.153

根据 G_S 的回答和 Android 的 simple_list_item_1.xml，这里有一些针对该问题的 xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:minHeight="?android:attr/listPreferredItemHeight" >

    <TextView
        android:id="@+id/tv1"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="6dip"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/tv2"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="6dip"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

# c# - 如何将数据绑定值存储在asp.net中的其他变量中

> ID：12345997
> 
> 赞同：1
> 
> 时间：2012-09-10T05:53:11.750
> 
> 标签：c#, asp.net, ascx

```
 <asp:DataList ID="dlAssignftp" Visible="false" runat="server" RepeatColumns="5" RepeatDirection="Vertical"
            HorizontalAlign="left" CellPadding="1" CellSpacing="1" Width="100%">
            <ItemTemplate>
                <ul class="gallery clearfix slideshow">
                    <li>
<a href='<%# DataBinder.Eval (Container.DataItem, "Image Path") %>' rel="prettyPhoto[pp_gal]">                   
                        <asp:Image ImageUrl='<%# DataBinder.Eval (Container.DataItem, "Image Path") %>' ID="imgftp"
                            runat="server" Height="100px" Width="100px" Visible="true" />
                         </a>                         
                    </li>        
                    <asp:RadioButton ID="rbtn_ftpimg" runat="server" Text="Select" TextAlign="Right" AutoPostBack="true" GroupName='<%# DataBinder.Eval (Container.DataItem, "Image Path") %>' OnCheckedChanged="rbtn_ftpimg_Changed" />            
                </ul>                    
            </ItemTemplate>

        </asp:DataList> 
```

在上面的**ascx 代码**中，我如何将**'<%# DataBinder.Eval (Container.DataItem, "Image Path") %>'**值存储在其他变量中，或者我如何打印 ImageUrl 路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:58:50.520

使用它的`hidden`值控制`asp.net`并将值存储在其上。

```
 <asp:hiddenfield id="ValueHiddenField" value='<%# DataBinder.Eval (Container.DataItem, "Image Path") %>' runat="server"/> 
```

使用`DataList_ItemDataBound`事件获取每个隐藏字段的值

```
Protected void Item_Bound(Object sender, DataListItemEventArgs e)
      {
         if (e.Item.ItemType == ListItemType.Item || 
             e.Item.ItemType == ListItemType.AlternatingItem)
         {

            // Retrieve the ValueHiddenField control in the current DataListItem.
            HiddenField imgPath = (HiddenField)e.Item.FindControl("ValueHiddenField");
            string path = imgPath.Value;
         }
      } 
```

要获取更多详细信息，请阅读[此..](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)

# firefox - 从 Firefox 调用 VBScript 的正确方法是什么？

> ID：12345998
> 
> 赞同：0
> 
> 时间：2012-09-10T05:53:19.113
> 
> 标签：firefox, vbscript, outlook

我希望能够从位于网络共享上的 Firefox 调用 vbscript。因此，我在工作中的所有团队成员都可以看到它。使用：

```
<a href='file://///server/path/to/file.vbs'>run me</a> 
```

该脚本的作用是通过 Samba 从客户端获取服务器端信息，并使用该信息打开一个 MS Outlook 新电子邮件窗口，其中填写了 HTML 格式的服务器端（Linux 系统）信息。我愿意还没有发送电子邮件，因为我想让队友确保他们要发送的内容是正确的。我们必须使用 Outlook。不幸的是 mailto: 似乎不允许任何类型的 HTML 格式，这就是我转向 VBScript 的原因。

似乎在 IE 中工作，尽管在它允许你运行它之前你会得到提示。我想现在还可以。确保您在 IE 中运行它有点烦人，尤其是对于我们这些不喜欢使用 IE 的人。

现在 Firefox 所做的只是在浏览器中显示代码内容。

我什至不确定我是否以正确的方式进行这一切，但从我的立场来看，我想我希望能够从 Firefox 运行它。如果没有，我会活下来。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:46:14.120

我不认为这是可能的。即使是这样，也可能存在安全风险。

要启动脚本，您必须运行“wscript.exe file.vbs”，但这是不允许的，否则病毒可以很容易地利用它。

因此，除非您想使用某些浏览器漏洞利用，否则这是不可能的。