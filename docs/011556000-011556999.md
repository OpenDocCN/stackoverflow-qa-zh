# StackOverflow 问答 11556000-11556999

# c++ - boost::tuple 的搜索向量

> ID：11556003
> 
> 赞同：0
> 
> 时间：2012-07-19T07:36:15.657
> 
> 标签：c++, boost, vector, tuples

所以我有这个向量：

```
 vector<boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool> > wait; 
```

我想寻找那些在其中具有真实性的东西，我该怎么做，就是这样。

我研究过 boost::phoenix 但不确定它是如何工作的任何建议，任何想法。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T07:41:37.257

像这样的东西`std::find_if(wait.begin(),wait.end(),istruetuple)`...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:02:00.307

由于您刚刚开始，这里有一些示例代码（我不知道您使用的是什么编译器，但`auto`如果您支持 C++11，您可以使用 , range-based for 等）：

```
typedef vector<boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool> >::iterator vec_iter;
for (vec_iter i = wait.begin(); i != wait.end(); ++i)
{
    if (boost::get<3>(*i) == true)
    {
       // This tuple has true in it, so do something
    }
} 
```

C++11 版本：

```
for (auto& i : wait)
{
    if (boost::get<3>(i) == true)
    {
        // Do stuff
    }
} 
```

# magento - magento 类别网址，管理员 404 错误

> ID：11556006
> 
> 赞同：1
> 
> 时间：2012-07-19T07:36:39.353
> 
> 标签：magento, magento-1.5

我是一个magento新手。我观察到，当我通过将提取的所有内容直接复制到本地主机来安装 magento 时......即（当应用程序、媒体、皮肤、index.php 等都直接粘贴到本地主机时）我无法访问管理员只需输入 localhost/admin。而我必须输入 localhost/index.php/admin 才能进入管理面板。

此外，当我单击任何类别时，我也遇到了同样的问题。我必须在类别名称之前附加 index.php/ 才能使类别链接正常工作。

谁能告诉我如何让他们工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:02:27.097

在管理面板中检查您的基本 URL，转到系统 | 配置 | Web 并确保 Secure and Unsecure Base URL 不包含“index.php”部分。

如果您在我的安全或不安全 Web 配置中没有 index.php，并且这种情况发生在前端和后端，请尝试启用 url 重写并查看是否可以解决问题。您需要在本地主机上启用 mod_rewrite。

你的本地服务器是什么？

# android - 从存储在 SQLite 中的坐标创建地理点 - Android

> ID：11556007
> 
> 赞同：1
> 
> 时间：2012-07-19T07:36:42.737
> 
> 标签：android, sqlite, google-maps, google-maps-markers

我有一个存储坐标的数据库，我想读取这些坐标并在地图上自动填充。我已经尝试了几次，但似乎无法让它发挥作用。这是我的代码：

```
public class allmapactivity extends MapActivity {
MapController mControl;
GeoPoint GeoP;
MapView mapV;
private SQLiteAdapter mySQLiteAdapter;
Cursor cursor;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    mapV = (MapView) findViewById(R.id.mapview);
    mapV.displayZoomControls(true);
    mapV.setBuiltInZoomControls(true);
    mapV.setSatellite(false);

    List<Overlay> mapOverlays = mapV.getOverlays();
    Drawable drawable = this.getResources().getDrawable(R.drawable.pin);
    HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable, this);

    cursor = mySQLiteAdapter.queueAll5();
    cursor.moveToFirst();

    while (cursor.isAfterLast() == false) {
        GeoPoint point = new GeoPoint((int) (cursor.getInt(cursor.getColumnIndex(SQLiteAdapter.KEY_CONTENT11))*1E6), (int) (cursor.getInt(cursor.getColumnIndex(SQLiteAdapter.KEY_CONTENT12))*1E6));
        OverlayItem overlayitem = new OverlayItem(point, "Test", "Test");
        itemizedoverlay.addOverlay(overlayitem);
        mapOverlays.add(itemizedoverlay);
    cursor.moveToNext();
}

}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

} 
```

如果有人能告诉我为什么这不起作用，我将不胜感激！PS这里是logcat：

```
07-19 07:27:14.193: E/AndroidRuntime(531): FATAL EXCEPTION: main
07-19 07:27:14.193: E/AndroidRuntime(531): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.inh.mapbud/com.inh.mapbud.allmapactivity}: java.lang.NullPointerException
07-19 07:27:14.193: E/AndroidRuntime(531):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
07-19 07:27:14.193: E/AndroidRuntime(531):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
07-19 07:27:14.193: E/AndroidRuntime(531):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-19 07:27:14.193: E/AndroidRuntime(531):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
07-19 07:27:14.193: E/AndroidRuntime(531):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-19 07:27:14.193: E/AndroidRuntime(531):  at android.os.Looper.loop(Looper.java:130)
07-19 07:27:14.193: E/AndroidRuntime(531):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-19 07:27:14.193: E/AndroidRuntime(531):  at java.lang.reflect.Method.invokeNative(Native Method)
07-19 07:27:14.193: E/AndroidRuntime(531):  at java.lang.reflect.Method.invoke(Method.java:507)
07-19 07:27:14.193: E/AndroidRuntime(531):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-19 07:27:14.193: E/AndroidRuntime(531):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-19 07:27:14.193: E/AndroidRuntime(531):  at dalvik.system.NativeStart.main(Native Method)
07-19 07:27:14.193: E/AndroidRuntime(531): Caused by: java.lang.NullPointerException
07-19 07:27:14.193: E/AndroidRuntime(531):  at com.inh.mapbud.allmapactivity.onCreate(allmapactivity.java:45)
07-19 07:27:14.193: E/AndroidRuntime(531):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-19 07:27:14.193: E/AndroidRuntime(531):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
07-19 07:27:14.193: E/AndroidRuntime(531):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:38:05.277

检查 allmapactivity 活动的第 45 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T09:32:05.360

尝试移动这条线

```
mapOverlays.add(itemizedoverlay); 
```

在您的循环之外，您似乎在为每个条目一次又一次地循环。

# php - 如何使用 Preg Match

> ID：11556010
> 
> 赞同：-2
> 
> 时间：2012-07-19T07:36:50.913
> 
> 标签：php, regex

我有一个字符串

`$str = '11,22,33';`

`$str = '22,44,55;`

`$str = '66,22;`

我如何使用 preg 匹配，以便通过匹配任何字符串中的 22 将产生输出为 1 即（对于案例 1，它应该匹配“，22”，对于案例 2 是 shd 匹配“22”，对于案例 3，它应该匹配“ ,22")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:58:50.250

```
<?php
$str = '11,22,33';
$findme   = '22';
$pos = strpos($str, $findme);

if ($pos !== false) {
//found it
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:41:09.597

使用这个正则表达式：

```
/,?22,?/ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T07:40:47.560

使用 php.net

[http://php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

# tabs - 屏幕方向更改时，ActionBar + Tab 崩溃

> ID：11556016
> 
> 赞同：1
> 
> 时间：2012-07-19T07:37:22.050
> 
> 标签：tabs, orientation, android-actionbar, landscape, portrait

我的应用程序具有以下特点。

*   在横向模式下，将屏幕分成两半并显示几个片段（“LocFragment”和“MapFragment”）。
*   在纵向模式下，在 ActionBar 中显示 2 个选项卡。一个 Fragment 覆盖整个屏幕，并在 Fragments 之间切换，带有 Tab 选择。
*   针对 4.x+，所以我不关心支持库或 ActionBarSherlock。

如果应用程序启动时手机处于横向模式，则一切正常。但是当 1) 手机处于纵向模式，2) 应用程序启动，以及 3) 手机转为横向模式时，应用程序会崩溃。

```
layour/activity_main.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <FrameLayout
        android:id="@+id/FragmentContainer"
        android:layout_width="match_parent" 
        android:layout_height="match_parent">
    </FrameLayout> 
```

```
 layout-land/activity_main.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <fragment
        android:name="org.solamour.eq.LocFragment"
        android:id="@+id/EarthquakeListFragment"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="match_parent" />
    <fragment
        android:name="org.solamour.eq.MapFragment"
        android:id="@+id/EarthquakeMapFragment"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="match_parent" /> 
```

```
public class MainActivity extends Activity {
    TabListener<LocFragment> locTabListener;
    TabListener<MapFragment> mapTabListener;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ActionBar actionBar = getActionBar();
        View fragmentContainer = findViewById(R.id.FragmentContainer);
        boolean bLandscape = fragmentContainer == null;

        if (!bLandscape) {
            actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
            actionBar.setDisplayShowTitleEnabled(false);

            Tab listTab = actionBar.newTab();
            locTabListener = new TabListener<LocFragment>
                (this, R.id.FragmentContainer,
                        LocFragment.class);
            listTab.setText("List")
                .setContentDescription("List of locations")
                .setTabListener(locTabListener);
            actionBar.addTab(listTab);

            Tab mapTab = actionBar.newTab();
            mapTabListener = new TabListener<MapFragment>
                (this, R.id.FragmentContainer,
                        MapFragment.class);
            mapTab.setText("Map")
                .setContentDescription("Map of interests")
                .setTabListener(mapTabListener);
            actionBar.addTab(mapTab);
        }
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        View fragmentContainer = findViewById(R.id.FragmentContainer);
        boolean bLandscape = fragmentContainer == null;

        if (!bLandscape) {
            FragmentTransaction ft =
                    getFragmentManager().beginTransaction();
            if (mapTabListener.fragment != null) {
                ft.detach(mapTabListener.fragment);
            }
            if (locTabListener.fragment != null) {
                ft.detach(locTabListener.fragment);
            }
            ft.commit();
        }

        super.onSaveInstanceState(outState);
    }

    @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);

        View fragmentContainer = findViewById(R.id.FragmentContainer);
        boolean bLandscape = fragmentContainer == null;

        if (!bLandscape) {
            locTabListener.fragment =getFragmentManager().
                    findFragmentByTag(LocFragment.class.getName());
            mapTabListener.fragment = getFragmentManager().
                    findFragmentByTag(MapFragment.class.getName());
        }
    }

    public static class TabListener<T extends Fragment>
            implements ActionBar.TabListener {
        private Fragment fragment;
        private Activity activity;
        private Class<T> fragmentClass;
        private int fragmentContainer;

        public TabListener(Activity activity,
                int fragmentContainer, Class<T> fragmentClass) {
            this.activity = activity;
            this.fragmentContainer = fragmentContainer;
            this.fragmentClass = fragmentClass;
        }

        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            if (fragment == null) {
                String fragmentName = fragmentClass.getName();
                fragment = Fragment.instantiate(activity, fragmentName);
                ft.add(fragmentContainer, fragment, fragmentName);
            } else {
                ft.attach(fragment);
            }
        }

        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            if (fragment != null) {
                ft.detach(fragment);
            }
        }

        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            if (fragment != null)
                ft.attach(fragment);
        }
    }
} 
```

说到崩溃，Eclipse 只是说“无法启动活动 ComponentInfo{...}: android.view.InflateException: Binary XML file line #7: Error inflating class fragment”。它必须在“setContentView(R.layout.activity_main)”中的某个地方，但我不确定如何设置源代码以在代码中遵循。我会很感激任何建议。谢谢你。

__

溶胶

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:33:02.607

错误在横向布局的第 7 行：

`fragment android:name="org.solamour.eq.LocFragment"`

也许类的路径是错误的，或者也许 LocFragment 有一个错误，当你显示它时你会崩溃。

# java - 新的 schemaFactory 实例因非法参数而失败

> ID：11556024
> 
> 赞同：2
> 
> 时间：2012-07-19T07:37:42.473
> 
> 标签：java, xml, xsd

设置验证 XML 文档时，我的语句

```
String schemaLanguage = XMLConstants.W3C_XML_SCHEMA_NS_URI;
SchemaFactory schemaFactory = SchemaFactory.newInstance(schemaLanguage); 
```

失败：

```
java.lang.IllegalArgumentException: http://www.w3.org/2001/XMLSchema 
```

关于为什么会这样以及可以做什么的任何想法？

# javascript - javascript函数说未定义

> ID：11556025
> 
> 赞同：0
> 
> 时间：2012-07-19T07:37:47.060
> 
> 标签：javascript, function, defined

我写了一个函数来计算很多东西，

所以我把我的变量的值放在隐藏类型的输入中，所以我们有这个代码：

```
 <input type="hidden" id="p1" value="5000.00">
 <input type="hidden" id="p2" value="5000.01">
 <input type="hidden" id="p3" value="8000.00">
 <input type="hidden" id="p4" value="8000.01">
 <input type="hidden" id="t1" value="15.0">
 <input type="hidden" id="t2" value="12.0">
 <input type="hidden" id="t3" value="6.0">
 <input type="hidden" id="versement" value="12554.35">
 <input type="hidden" id="type" value="d"> 
```

此外，我有以下代码，首先是一个输入，以便编写要计算的金额：

和顶部的功能：

所以我们有：

```
 <script language="text/javascript">
 function hono(p1,p2,p3,p4,t1,t2,t3,type,versement,montantacompte)
 {
     var p1             = document.getElementById("p1").value;
     var p2             = document.getElementById("p2").value;
     var p3             = document.getElementById("p3").value;
     var p4             = document.getElementById("p4").value;
     var t1             = document.getElementById("t1").value;
     var t2             = document.getElementById("t2").value;
     var t3             = document.getElementById("t3").value;
     var type           = document.getElementById("type").value;    
     var versement      = document.getElementById("versement").value;
     var montantacompte = document.getElementById("montantacompte").value;

     if (type== "d")
        {
            if(versement== 0 && montantacompte <= p1)
            {
                reste1= montantacompte;
                pc= t1/100;
                taux1= pc+1;
                h1=((reste1*taux1)+reste1);
                honoraires=h1;
                document.getElementById('taux-1').value=taux1;
                document.getElementById('palier1').value=h1;
                document.getElementById('sommehonoraires').value=honoraires;
            }
            else if(versement < p1 && (versement + acompte) <= p1)
            {
                reste1= montantacompte;
                pc= t1/100;
                taux1= pc+1;
                h1= (reste1*taux1)-reste1;
                honoraires= h1;
                document.getElementById('taux-1').value=taux1;
                document.getElementById('palier1').value=h1;
                document.getElementById('sommehonoraires').value=honoraires;
            }
            else if(versement <= p1 && (versement+montantacompte)>= p2 && (versement+montantacompte)<=p3)
            {
                reste1=p1-versement;
                pc=t1/100;
                taux1=pc+1;
                h1=(reste1*taux1)-reste1;
                reste2=montantacompte-reste1;
                pc2=t2/100;
                taux2=pc2+1;
                h2=(reste2*taux2)-reste2;
                honoraires=h1+h2;
                document.getElementById('taux-1').value=taux1;
                document.getElementById('palier1').value=h1;
                document.getElementById('taux-2').value=taux2;
                document.getElementById('palier-2').value=h2;
                document.getElementById('sommehonoraires').value=honoraires;
            }
            else if (versement==0 && montantacompte>=p2 && montantacompte <=p3)
            {
                reste2=montantacompte-p1;
                reste1=p1;
                pc=(t1/100);
                taux1=pc+1;
                h1=((reste1*taux1)-reste1);
                pc2=(t2/100);
                taux2=pc2+1;
                h2=((reste2*taux2)-reste2);
                honoraires=(h1+h2);
                document.getElementById('taux-1').value=taux1;
                document.getElementById('palier1').value=h1;
                document.getElementById('taux-2').value=taux2;
                document.getElementById('palier2').value=h2;
                document.getElementById('sommehonoraires').value=honoraires;
            }
            else if(versement<=p3 && versement>=p2 && (versement+montantacompte)>=p2 && (versement+montantacompte)<=$3)
            {
            reste1=montantacompte;
            pc=($2/100);
            taux1=pc+1;
            h1=((reste1*taux1)-reste1);
            honoraires=h1;  
            document.getElementById('taux-1').value=taux1;
            document.getElementById('palier1').value=h1;
            document.getElementById('sommehonoraires').value=honoraires;
            }
            else if(versement>=p2 && versement<=p3 && (versement+montantacompte)>=p4)
            {
            reste1=p4-versement;
            pc=(t2/100);
            taux2=pc+1;
            h2=((reste1*taux2)-reste1);
            reste2=montantacompte-reste1;
            pc2=(t3/100);
            taux3=pc2+1;
            h3=((reste2*taux3)-reste2);
            honoraires=(h2+h3);
            document.getElementById('taux-3').value=taux3;
            document.getElementById('palier3').value=h3;
            document.getElementById('taux-2').value=taux2;
            document.getElementById('palier2').value=h2;
            document.getElementById('sommehonoraires').value=honoraires;
        }
        else if(versement==0 && montantacompte>=p4)
        {
            reste1=p1;
            reste2=p3-p2;
            pc=(t1/100);
            taux1=pc+1;
            h1=((reste1*taux1)-reste1);
            pc2=(t2/100);
            taux2=pc2+1;
            h2=((reste2*taux2)-reste2);
            reste3=(montantacompte-reste1-reste2);
            pc3=(t3/100);
            taux3=pc3+1;
            h3=((reste3*$taux3)-reste3);
            honoraires=(h1+h2+h3);
            document.getElementById('taux-1').value=taux1;
            document.getElementById('palier1').value=h1;
            document.getElementById('taux-3').value=taux3;
            document.getElementById('palier3').value=h3;
            document.getElementById('taux-2').value=taux2;
            document.getElementById('palier2').value=h2;
            document.getElementById('sommehonoraires').value=honoraires;
        }
    else if(versement>=p4)
        {
            reste3=montantacompte;
            pc3=($3/100);
            taux3=pc3+1;
            h3=((reste3*taux3)-reste3);
            honoraires=(h3);
            document.getElementById('taux-3').value=taux3;
            document.getElementById('palier3').value=h3;
            document.getElementById('sommehonoraires').value=honoraires;
        }
    }
    if (type=="l")
    {
    pc1=(t1/100);
    taux1=pc1+1;
    honoraires=montantacompte*taux1;
    document.getElementById('taux-1').value=taux1;
    document.getElementById('palier1').value=h1;
    document.getElementById('sommehonoraires').value=honoraires;
    }
 }

 </script><input type="text" name="montantacompte" id="montantacompte" onKeyUp="hono(p1,p2,p3,p4,t1,t2,t3,type,versement,montantacompte)"  /> 
```

在控制台中它告诉我该函数没有定义，或者它是，因为我已经写了它......一切都在正文中。

我们在控制台中有这个：

> 未捕获的 ReferenceError：未定义荣誉 test.php:166 onkeyup

第 166 行是函数后面的输入类型文本。

对不起，我的英语不好，

如果您需要更多精度，请问我，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:44:29.953

`language="text/javascript"`应该是错误的，`language="JavaScript"`但那是旧的/过时的/过时的/折旧的，所以`type="text/javascript"`改用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:45:45.317

乍一看，我注意到您的脚本属性错误。

```
 <script language="text/javascript"> 
```

应该：

```
 <script type="text/javascript"> 
```

# opencv - 在 cmake 中找不到 CUDA_NPP_LIBRARY_ROOT_DIR

> ID：11556033
> 
> 赞同：0
> 
> 时间：2012-07-19T07:38:33.377
> 
> 标签：opencv, cmake, gpu

我正在尝试安装启用 cuda 的 opencv 2.2。我已经安装了 CUDA 并且还用它编译和测试了一些程序。

现在我想用gpu安装opencv。我下载了 cmake-gui 并设置了 CUDA。当我点击配置按钮时，它确实找到了 cuda 工具包，但给了我这个错误：

```
CMake Error at modules/gpu/FindNPP.cmake:102 (message):
NPP headers/libraries are not found.  Please specify
CUDA_NPP_LIBRARY_ROOT_DIR in CMake or set $NPP_ROOT_DIR.

Call Stack (most recent call first):
modules/gpu/CMakeLists.txt:38 (find_package) 
```

我已将所有内容都安装在默认目录中。我的 cuda-toolkit 版本是 4.0。我也有没有安装 gpu 的 opencv 2.2。如果它可能有帮助：我的操作系统是 ubuntu 11.04，我的 gpu 是 geforce gtx550，我的 cuda 驱动程序版本是 280.13

# php - 使用 Valve/Steam API 转换多个 ID

> ID：11556035
> 
> 赞同：1
> 
> 时间：2012-07-19T07:38:40.020
> 
> 标签：php, steam-web-api, steam

所以这是一个很长的解释。

我有一个反恐精英：源服务器，带有商店的游戏内插件。此存储将其数据保存在 MySQL 数据库中（对于此实例，名为“存储”）。商店在该数据库中跟踪玩家的钱（在表“用户”中的“信用”列上）。它基于“steam_id”存储客户端（每个客户端唯一）

“steam_id”的格式为（示例）：STEAM_0:0:123456789 或 STEAM_0:1:12345789。

我的页面显示了数据库中排名前 1000 的用户（按信用排序）。

**我的问题：**我需要将这些丑陋的 steam_id 转换为实际名称。

**我现在在哪里：**

[Steam API 文档](https://developer.valvesoftware.com/wiki/Steam_Web_API#GetPlayerSummaries_.28v0002.29 "Steam API 文档")

根据 API 文档，我在查询 API 时必须使用“社区 ID”。如果我想获得多个用户，我可以使用逗号分隔 GET 字符串中的社区 ID。

(http://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=APIKEY&steamids= **76561197960435530,76561197960435531** &format=json)

我有一个函数可以将 steam_id 转换为 API 可接受的 ID。

```
function SteamID2CommunityID($steam_id){
    $parts = explode(':', str_replace('STEAM_', '' ,$id));
    $communityID = bcadd(bcadd('76561197960265728', $parts['1']), bcmul($parts['2'], '2'));
    return $communityID;
} 
```

有了这个，我可以用这个来制作我的逗号分隔的社区 ID 列表：

```
while ($row = $mysqli->fetch_assoc($request)) {
      $ids .= ',' . SteamID2CommunityID($row['steamid']) . ',';
} 
```

现在对于棘手的部分，所有这些值都返回到一个 JSON 数组中。我需要添加一些东西，所以当我显示我的数据时，我可以将“steam_id”直接转换为“名称”（使用现有数组）。

输出示例（删除了大多数键和值以使其可读）

```
 Array (
[response] => Array
    (
        [players] => Array
            (
                [0] => Array
                    (
                        [steamid] => 76561198010207577
                        [personaname] => [rGA] Stainbow
                    )

                [1] => Array
                    (
                        [steamid] => 76561197966653036
                        [personaname] => |K}{R|Mastarious(MNBH)
                    )

            )

    )

   ) 
```

再说一次，我将如何直接从“steam_id”变成一个名字？

感谢任何可以提供代码和/或建议的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:52:38.437

这是[另一个 Stack Overflow 问题](https://stackoverflow.com/questions/9909826/php-search-array-in-array)的变体副本，它更实用且本地化程度较低，但我不妨回答一下。

假设您的输入`steam_id`是`$INPUT`并且您的最终输出数组存储在 中，这是您可以用来转换为`$OUTPUT`的函数方法：`foreach``steam_id``personaname`

```
/**
 * Convert steam_id to personaname
 * @returns STRING The name associated with the given steam_id
 *          BOOL   FALSE if no match was found
 */
function steamID_to_name($INPUT, $OUTPUT)
{
    // This gets the relevant part of the API response.
    $array = $OUTPUT['response']['players'];

    // Using your function to convert `steam_id` to a community ID
    $community_id = SteamID2CommunityID($INPUT);

    // Linear search
    foreach ($array as $array_item)
    {
        // If a match was found...
        if ($community_id == $array_item['steamid'])
            // Return the name
            return $array_item['personaname'];
    }

    // If no match was found, return FALSE.
    return false;
} 
```

# java - hibernate spring执行顺序存储过程

> ID：11556036
> 
> 赞同：1
> 
> 时间：2012-07-19T07:38:41.927
> 
> 标签：java, spring, hibernate, java-stored-procedures

我正在使用带有spring的hibernate（用于事务管理）并且有一个像这样的DAO

```
@Transactional
class Dao{

public save(Entity e){
//stored an entity
Entity saved = entityManager.merge(e);

//flush the dataset to the db
entityManager.flush();

//updates the saved entity with a stored procedure
entityManger.createNameQuery(STORED_PROCEDURE).setParameter(0, saved.getId()).executeUpdate();
}
} 
```

这将在以下环境中执行，结果不同：

*   JUnit：这里一切正常。实体被存储，存储过程更新保存的数据集。
*   Glassfish 上的 EJB：首先执行存储过程，然后执行保存操作（我从休眠中记录 sql 命令）。似乎没有执行刷新。

因此，存储实体不包括存储过程的更新。我不知道为什么这些操作在 Glassfish 环境中以不同的顺序执行，并且在 Junit 测试用例中一切正常。

有任何想法吗？

# javascript - 使用 JavaScript 转义单引号

> ID：11556043
> 
> 赞同：2
> 
> 时间：2012-07-19T07:39:04.110
> 
> 标签：javascript, jsp, escaping

我知道在 HTML 中转义特殊字符。

但是，我仍然在问这个，因为我遇到了一种情况。

我有一个 JSP，其中不允许我对输入​​进行验证。用户正在输入特殊字符进行测试。

输入字符串：

> '#@$%

当我从数据库中显示时，我正在使用

```
<%= StringEscapeUtils.escapeHtml(map[i].get("text").toString())%> 
```

其中“map”是一个 Hashmap 数组。这工作正常。

当我需要将此字符串传递给 JavaScript 时，问题就出现了

```
<input type="Button"
onclick="onEdit('<%= StringEscapeUtils.escapeHtml(map[i].get("text").toString())%>',
'<%= strShortCut%>','<%= map[i].get("uid")%>')" value="Edit"> 
```

字符串变为`''#@$%'`。

如何转义单引号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:49:11.833

如果您将使用 Java，也许您可​​以在 Java 中执行以下操作。

```
import org.apache.commons.lang.StringEscapeUtils;
...

String result = StringEscapeUtils.escapeJavaScript(jsString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:04:37.480

只需在每个单引号前加上反斜杠即可。像下面这样： StringEscapeUtils.escapeHtml(map[i].get("text").toString()).replace("\'","\\'")

但是您的问题不仅在于单引号。还有双引号 (") 和反斜杠本身 (\)。

使用与前面所示相同的技术。您也可以使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)，但我向您展示了最简单的方法。

要检查转义字符，请查看 URL [http://docs.oracle.com/javase/tutorial/java/data/characters.html](http://docs.oracle.com/javase/tutorial/java/data/characters.html)。

# java - 如何在 JDesktopPane 中锁定 Jinternal Frame

> ID：11556044
> 
> 赞同：0
> 
> 时间：2012-07-19T07:39:09.487
> 
> 标签：java, swing, jinternalframe, jdesktoppane, jdesktop

我正在使用`JDesktopPane`和`Jinternal Frame`。

我想锁定`Jinternal Frame inside JDesktopPane`。

建议需要更改的方法或属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:08:11.437

你可以

1.  提供自己的[`DesktopManager`](http://docs.oracle.com/javase/6/docs/api/javax/swing/DesktopManager.html)管理`setFrameBounds`方法
2.  实现您自己的内部框架并覆盖`setBounds(x, y, width, height)`, 并通过向 super 调用提供您自己的 x、y 值来保持位置。

# python - 不同django应用程序中的django tastepie外键

> ID：11556045
> 
> 赞同：0
> 
> 时间：2012-07-19T07:39:15.367
> 
> 标签：python, django, tastypie

我正在尝试从另一个应用程序的模型中提取其外键在当前应用程序中被引用。这就是它的`model.py`样子。

```
class DataQuestion(models.Model):
    ...
    PollF = models.ForeignKey('myapp2.PollF') 
```

如果我尝试在 tasypie 中使用它，我会得到一个`null`值。这就是我的`api.py`样子。

```
from myapp2.models import DataQuestion

class HelperSurveyResource(ModelResource):
    class Meta:
        queryset = DataQuestion.objects.all()
        resource_name='some_name'
        ...
    def dehydrate(self,bundle):
        bundle.data['complete']=True if(bundle.obj.isPComplete) else False
        return bundle

class QnResource(ModelResource):
    pollF=fields.ForeignKey(HelperSurveyResource,'some_name',full=True,null=True)

class Meta:
    queryset=DataQuestion.objects.all() 
```

这是我得到的结果：

```
{"pollF": null,
"numAnswers": 1,
....
"text": "How much do you earn per day?"}, 
```

我该怎么做才能获得非空值？有什么帮助吗？谢谢

---------编辑--------- 问题在 IRC 上得到了回答。非常感谢`Funkybob`错误是 'some_name' 应该是`pollF`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T01:48:31.800

对于 Jure C。这是答案：

```
from myapp2.models import DataQuestion

class HelperSurveyResource(ModelResource):
    class Meta:
        queryset = DataQuestion.objects.all()
        resource_name='some_name'
        ...
    def dehydrate(self,bundle):
        bundle.data['complete']=True if(bundle.obj.isPComplete) else False
        return bundle 
```

更改发生在这里 -> 到 PollF 应该是要搜索的属性的名称。我不知道这个

```
class QnResource(ModelResource):
    pollF=fields.ForeignKey(HelperSurveyResource,'pollF',full=True,null=True)

class Meta:
    queryset=DataQuestion.objects.all() 
```

# ios - 使用情节提要在 iOS 5 中使用按钮为自定义子视图设置动画以从屏幕底部飞入

> ID：11556051
> 
> 赞同：0
> 
> 时间：2012-07-19T07:39:48.293
> 
> 标签：ios, ios5, uiviewcontroller, subviews

我正在尝试模拟键盘出现动画，仅使用将向用户显示三个按钮的自定义子视图。有什么办法可以用情节提要完成这个（即无需以编程方式创建子视图）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T02:08:35.700

# 快速回答

是的，尽管您必须以编程方式设置一些子视图属性。你想要做的是让你的 UIViewController 调用：

```
[UIView animateWithDuration:animations:completion:]
```

* * *

## 详细示例

在任何方法应该调出键盘的同时尝试以下操作：

```
CGFloat windowWidth = self.mainView.frame.size.width;
CGFloat windowHeight = self.mainView.frame.size.height;

// center myCustomSubview along the x direction, and put myCustomSubview just below the screen when UIViewController initially gets onto the screen
CGPoint offScreenBelow = CGPointMake(windowWidth/2, windowHeight + (myCustomView.frame.size.y/2));
CGPoint onScreen = CGPointMake(windowWidth/2,windowHeight/2); 
// change the second argument of the CGPointMake function to alter the final height of myCustomSubview

// start myCustomSubview offscreen
myCustomSubview.center = offScreenBelow;
// make sure to add myCustomSubview to the UIViewController's view's subviews
[self.view addSubview:myCustomSubview];
float duration = 1.0; // change this value to make your animation slower or faster. (units in seconds)

// animate myCustomSubview onto the screen
[UIView animateWithDuration:duration
                 animations:^{
                     myCustomSubview.center = onScreen;
                 }
                 completion:^(BOOL finished){
                     // add anything you want to be done as soon as the animation is finished here
                 }]; 
```

确保您的方法在 'viewDidAppear:' 之后或其中被调用。当你想让 myCustomSubview 离开屏幕时，请确保在你的 UIViewController 中执行以下操作：

```
// set offscreen position same way as above
CGFloat windowWidth = self.mainView.frame.size.width;
CGFloat windowHeight = self.mainView.frame.size.height;

CGPoint offScreenBelow = CGPointMake(windowWidth/2, windowHeight + (myCustomView.frame.size.y/2));

// myCustomSubview is on screen already. time to animate it off screen
[UIView animateWithDuration:duration // remember you can change this for animation speed
                 animations:^{
                     myCustomSubview.center = offScreenBelow;
                 }
                 completion:^(BOOL finished){
                     [myCustomSubview removeFromSuperView];
                 }]; 
```

* * *

## 如果您的子视图未显示

与处理子视图一样，请确保正确设置框架，已将子视图添加到带有 的超级视图`addSubview:`，子视图不为零（并且已正确初始化），并且既不是 alpha 也不是 opacity 子视图的属性设置为 0。

# objective-c - 无法比较（空）

> ID：11556052
> 
> 赞同：0
> 
> 时间：2012-07-19T07:39:52.707
> 
> 标签：objective-c, xcode

> **可能重复：**
> [在 Objective-C 中检查空字符串的正确方法是什么？](https://stackoverflow.com/questions/968792/what-is-the-right-way-to-check-for-a-null-string-in-objective-c)

如果我的 url 为空，我应该将 url 变量分配为空..我已经尝试过但仍然没有在我的 IF 语句中输入。我什至尝试过这个`if([url isEqualToString:@""])` 但它徒劳无功下面是代码

```
-(void)newView:(NSString *)title Description:(NSString *)desc URL:(NSString *)url{
self.tblTwitter.userInteractionEnabled=NO;
self.tblFacebook.userInteractionEnabled=NO;

if (![url isEqualToString:@""])
{
    //
    NSLog(@"the perfect Value:%@",url);
 //   url=@"boom";
}
webView =[[UIWebView alloc]initWithFrame:CGRectMake(15, 25, 190, 190)];
webView.backgroundColor=[UIColor clearColor];
webView.delegate=self;
webView.opaque = NO; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:43:02.937

你试过了吗：

```
if (url == nil) 
```

nil 是 NULL 的 Objective-C，nil 并不意味着空。

这个答案可能是您正在寻找的：[在 Objective-C 中检查空字符串的正确方法是什么？](https://stackoverflow.com/questions/968792/what-is-the-right-way-to-check-for-a-null-string-in-objective-c)

# android - Android Eclipse：变量名无法解析为变量

> ID：11556055
> 
> 赞同：1
> 
> 时间：2012-07-19T07:40:12.433
> 
> 标签：android, eclipse, variables, toggle

我正在开发一个 android 应用程序，并在我的一个布局中有一个切换按钮 (id="tt")。我想要做的是将 OnClickListener 设置为该切换按钮。但是我在eclipse中收到以下错误：

```
toggleButton cannot be resolved to a variable
onClickListener cannot be resolved to a type 
```

这是代码：

```
public void ToggleMagic(){
    toggleButton = (ToggleButton)findViewById(R.id.tt);
    toggleButton.setOnClickListener(new OnClickListener(){
      //        
    });
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T07:43:25.413

`ToggleButton`您在第二行的 toggleButton 之前错过了。

```
public void ToggleMagic(){
   ToggleButton toggleButton = (ToggleButton)findViewById(R.id.tt);
    toggleButton.setOnClickListener(new OnClickListener(){
      //        
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T07:43:09.137

将 setOnClickListener 添加`ToggleButton` 为：

```
public void ToggleMagic(){

    toggleButton  = (ToggleButton) findViewById(R.id.tt);

    // attach an OnClickListener
    toggleButton.setOnClickListener(new View.OnClickListener(){
        @Override
        public void onClick(View v)
        {
            // your click actions go here
        }
    });
} 
```

并确保您正在导入以下包：

```
import android.view.View.OnClickListener;
import android.view.View; 
```

# ruby-on-rails - Rails 元搜索复选框

> ID：11556058
> 
> 赞同：0
> 
> 时间：2012-07-19T07:40:29.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3

所以我的项目模型当前包含一个名为 tags 的列，其格式为 a、b、c、d、e、f 等...在视图中，我有一个表单，它可以将复选框收集到 filters[] 中在控制器中使用 params[:filters]。我的问题是如何过滤至少包含这些标签之一的项目？

```
def index
    @search = Project.search(params[:search])
    @projects = @search.???
end 
```

我想像

```
@projects = Project.search(:tags_contains => params[:filters]) 
```

或者

```
params[:filters].each do |p|
    @projects ||= @search.where(["projects.tags like ?", p])
end 
```

会工作，但它似乎没有返回任何东西。有什么建议吗？

示例：假设复选框 a 和 c 以包含在 params[:filters] 中的形式被选中。我有三个项目：

```
Project     | Tags
------------+------
Project 1   | a,b
Project 2   | c
Project 3   | a,c
Project 4   | d 
```

在此示例中，我想返回 Project 1,2,3，因为它们至少包含 a 或 c

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:30:15.803

用 squeel gem 想通了...

```
params[:filters].each do |p|
     @projects ||= @search.where(["projects.tags like ?", "%#{p}%"])
end 
```

# android - 在 android 上显示 .mht 文件

> ID：11556059
> 
> 赞同：5
> 
> 时间：2012-07-19T07:40:36.310
> 
> 标签：android, webview, mhtml

如何在 android webview 上显示 .mht(MHTML) 文件。我试图在默认的 android 浏览器上打开 .mht 文件，但没有打开，但我可以在 Opera 移动浏览器上打开相同的文件。所以我尝试了 MHTUnpack java 库。我没有成功。

这是[一个链接](http://mac.softpedia.com/get/Development/Libraries/Java-MHT-Unpack-Library.shtml)！

如果有人使用过这个 MHTUnpack，请告诉我如何在 android 中使用它。如果还有其他图书馆，也请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:14:43.993

Found this [unknown google project](http://code.google.com/p/unknowns/source/browse/#svn/trunk/MHTView/src/org/hld/mht) which appears to be working.

This utility decodes the mhtml file and save it on given path(internal or external). After saving it returns the html file path which could be loaded into webview.

Try it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T23:01:37.523

在克服了对`WebView.saveWebArchive()`Android 4.4 中格式更改的挫败感之后，我尝试了他在回答中提到的“未知的 google 项目”Chitranshu Asthana，但提供的代码很慢（1MB *.mht 文件大约需要 10 秒，包含十几张图片）并且没有正确处理附加的文件名。

[MHT Unpack 库](http://www.chembal.com/?page_id=430)结合[Java Mail for Android](https://code.google.com/p/javamail-android/)（不是 Oracle 提供的）对我来说非常有效。

* * *

编辑：修复了 MHT Unpack 库的链接。另外，这是使用示例：

```
// contentPath - path to input .mht file
public static String unpackMht(String contentPath) throws IOException {
        // dstPath - path where file will be unpacked
        String dstPath = openTempDir(null) + File.separator;
        String indexFileName = dstPath + new File(contentPath).getName();

        try {
            Collection<Attachment> attachments = MHTUnpack.unpack(new File(contentPath));

            for (Attachment attachment : attachments) {
                String filename = attachment.getFileName();
                String path = filename == null ? indexFileName : dstPath +  filename;
                File newFile = new File(path);
                if (newFile.exists()) {
                    newFile.delete();
                }
                attachment.saveFile(path);
            }

            return indexFileName;
        } catch (MessagingException e) {
            throw new IOException(e);
        }
    } 
```

# ios - 如何从其他类返回所有数组值

> ID：11556060
> 
> 赞同：0
> 
> 时间：2012-07-19T07:40:39.597
> 
> 标签：ios, xcode, ios5, xcode4.3

如果它在 NSMutableArray 类型的单独类中创建和初始化，如何返回所有 Array 值。

这是我的简单代码。

在 FirstClassViewController 中

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    MyArrayClass *thisArray = [[MyArrayClass alloc]init];

    NSLog(@"%@",thisArray.getArray);

} 
```

在 MyArrayClass.h

```
@interface MyArrayClass : NSMutableArray{

    NSMutableArray *courseArray;

}

-(NSString*)getArray;
-(void) setArray;
@end 
```

在 MyArrayClass.m 中

```
-(NSString*) getArray{

    return courseArray;   
}

-(void) setArray{

    courseArray = [[NSMutableArray alloc]init];

    // AR111:    
    [courseArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:
                            @"AR111",@"courseCode",
                            @"Arabic Communication Skills (I)",@"courseName",
                            @"3",@"creditHours",

                            nil]];

    // AR112:    
    [courseArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:
                            @"AR112",@"courseCode",
                            @"Arabic Communication Skills (II)",@"courseName",
                            @"3",@"creditHours",

                            nil]];
} 
```

我有这个输出消息：

2012-07-19 10:36:18.344 测试[622:f803]（空）

# c# - 使用 Open xml 在单元格中写入日期值

> ID：11556061
> 
> 赞同：0
> 
> 时间：2012-07-19T07:40:42.547
> 
> 标签：c#, openxml

我需要使用 Open XML 使用日期类型在单元格中写入日期。你能告诉我我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:26:14.270

我得到了答案并与大家分享...

像我们一样添加单元格..

```
 Cell cell =new Cell(){ cellReference=A1 }; //Or other necessary details
 cell.cellValue = new CellValue(DateTime.Now.ToOADate().ToString()); 

 cell.StyleIndex=5; 
```

这里我用过

```
cell.StyleIndex=5; 
```

这是 Excel 中日期的默认样式索引。所以不需要添加所有外部样式表

享受 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-22T19:45:39.230

> 所以不需要添加所有的外部样式表

如果没有样式表，我无法让它工作。

我用[这个博客文章](http://polymathprogrammer.com/2009/11/09/how-to-create-stylesheet-in-excel-open-xml/)让它工作。除了使用日期所需的 CellStyleFormat 和 CellFormat 部分之外，样式表还需要 Font、Border、Fill、DifferentialFormat 和 TableStyle 部分。

```
private static Stylesheet CreateStylesheet()
    {
        Stylesheet ss = new Stylesheet();

        Fonts fonts = new Fonts(new OpenXmlElement[]
        {
            new Font
            {
                FontName = new FontName { Val = "Calibri" },
                FontSize = new FontSize { Val = 11 }
            }
        });
        fonts.Count = (uint)fonts.ChildElements.Count;

        Fills fills = new Fills(new OpenXmlElement[]
        {
            new Fill
            {
                PatternFill = new PatternFill { PatternType = PatternValues.None }
            }
        });
        fills.Count = (uint)fills.ChildElements.Count;

        Borders borders = new Borders(new OpenXmlElement[]
        {
            new Border
            {
                LeftBorder = new LeftBorder(),
                RightBorder = new RightBorder(),
                TopBorder = new TopBorder(),
                BottomBorder = new BottomBorder(),
                DiagonalBorder = new DiagonalBorder(),
            }
        });
        borders.Count = (uint)borders.ChildElements.Count;

        CellStyleFormats csfs = new CellStyleFormats(new OpenXmlElement[] 
        {
            new CellFormat
            {
                NumberFormatId = 0,
                FontId = 0,
                FillId = 0,
                BorderId = 0,
            }
        });
        csfs.Count = (uint)csfs.ChildElements.Count;

        CellFormats cfs = new CellFormats(new OpenXmlElement[]
        {
            new CellFormat
            {
                NumberFormatId = 0,
                FontId = 0,
                FillId = 0,
                BorderId = 0,
                FormatId = 0,
            },
            new CellFormat
            {
                NumberFormatId = 14,
                FontId = 0,
                FillId = 0,
                BorderId = 0,
                FormatId = 0,
                ApplyNumberFormat = true
            }
        });

        cfs.Count = (uint)cfs.ChildElements.Count;

        ss.Append(fonts);
        ss.Append(fills);
        ss.Append(borders);
        ss.Append(csfs);
        ss.Append(cfs);

        DifferentialFormats dfs = new DifferentialFormats();
        dfs.Count = 0;
        ss.Append(dfs);

        TableStyles tss = new TableStyles();
        tss.Count = 0;
        tss.DefaultTableStyle = "TableStyleMedium9";
        tss.DefaultPivotStyle = "PivotStyleLight16";
        ss.Append(tss);

        return ss;
    } 
```

一旦样式表就位，您就可以设置 StyleIndex。

```
cell.StyleIndex=14 
```

# ruby-on-rails - Heroku 上 Rails_admin 中仅缺少索引路由

> ID：11556062
> 
> 赞同：0
> 
> 时间：2012-07-19T07:40:45.413
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, rails-admin

我正在努力解决一个特殊问题，即我的所有 Rails Admin 路由在我的本地服务器上的开发模式下都可以正常工作。但是，只有 1 不适用于生产..

在 Cedar Stack 上使用带有 Thin 的 Rails 3.2.6 - Heroku

我无法加载 1 个称为参考的特定模型的 #index 视图。

但是，我可以加载同一模型的新视图、编辑视图和显示视图。然后再次。所有路由都可以在开发服务器上正常加载。

你们知道我可以从哪里开始吗？

提前非常感谢...

这是我在尝试访问该页面时在 Heroku 日志中遇到的错误。

```
 3.2.6/lib/active_support/notifications.rb:123:in `block in instrument'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/abstract_controller/rendering.rb:45:in `process'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_controller/metal.rb:203:in `dispatch'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_controller/metal.rb:246:in `block in action'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/routing/route_set.rb:73:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/routing/route_set.rb:36:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/
lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/routing/route_set.rb:600:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:479:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/sass-3.1.20/lib/sass/plugin/rack.rb:54:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/routing/route_set.rb:600:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-pjax-0.5.9/lib/rack/pjax.rb:12:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/warden-1.2.1/lib/warden/manager.rb:35:in `block in call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/warden-1.2.1/lib/warden/manager.rb:34:in `catch'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/warden-1.2.1/lib/warden/manager.rb:34:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/head.rb:14:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:25:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/remotipart-1.0.2/lib/remotipart/middleware.rb:30:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/flash.rb:242:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/cookies.rb:338:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/query_cache.rb:64:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:405:in `_run__1529569943628666922__call__3530359843174502737__callbacks'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:405:in `__run_callback'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:81:in `run_callbacks'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/rack/logger.rb:16:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/rack/logger.rb:26:in `call_app'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/static.rb:62:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:479:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:220:in `call'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:80:in `block in pre_process'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:78:in `catch'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:78:in `pre_process'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:53:in `process'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:38:in `receive_data'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in 
`run'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/backends/base.rb:63:in `start'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/controllers/controller.rb:86:in `start'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/server.rb:159:in `start'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:185:in `run_command'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/bin/thin:6:in `<top (required)>'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:151:in `run!'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bin/thin:23:in `load'
2012-07-18T07:39:00+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bin/thin:23:in `<main>'
2012-07-18T07:39:00+00:00 app[web.1]: 
```

我的 rake 路线看起来很正常：

```
 rails_admin        /admin                         RailsAdmin::Engine
                projects GET    /projects(.:format)            projects#index
                 project GET    /projects/:id(.:format)        projects#show
                 clients GET    /clients(.:format)             clients#index
                  client GET    /clients/:id(.:format)         clients#show
              references GET    /references(.:format)          references#index
               reference GET    /references/:id(.:format)      references#show
        new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
            user_session POST   /users/sign_in(.:format)       devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
           user_password POST   /users/password(.:format)      devise/passwords#create
       new_user_password GET    /users/password/new(.:format)  devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                         PUT    /users/password(.:format)      devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel
       user_registration POST   /users(.:format)               devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
                         PUT    /users(.:format)               devise/registrations#update
                         DELETE /users(.:format)               devise/registrations#destroy
                    root        /                              projects#index
                   about        /about(.:format)               high_voltage/pages#show {:id=>"about_me"}
                    site        /site(.:format)                high_voltage/pages#show {:id=>"site"}
                 contact        /contact(.:format)             contact_us/contacts#new
                    page        /pages/*id                     high_voltage/pages#show
                contacts POST   /contacts(.:format)            contact_us/contacts#create
             new_contact GET    /contacts/new(.:format)        contact_us/contacts#new
              contact_us        /contact_us(.:format)          contact_us/contacts#new

Routes for RailsAdmin::Engine:
    dashboard GET         /                                      rails_admin/main#dashboard
        index GET|POST    /:model_name(.:format)                 rails_admin/main#index
          new GET|POST    /:model_name/new(.:format)             rails_admin/main#new
       export GET|POST    /:model_name/export(.:format)          rails_admin/main#export
  bulk_delete POST|DELETE /:model_name/bulk_delete(.:format)     rails_admin/main#bulk_delete
history_index GET         /:model_name/history(.:format)         rails_admin/main#history_index
  bulk_action POST        /:model_name/bulk_action(.:format)     rails_admin/main#bulk_action
         show GET         /:model_name/:id(.:format)             rails_admin/main#show
         edit GET|PUT     /:model_name/:id/edit(.:format)        rails_admin/main#edit
       delete GET|DELETE  /:model_name/:id/delete(.:format)      rails_admin/main#delete
 history_show GET         /:model_name/:id/history(.:format)     rails_admin/main#history_show
  show_in_app GET         /:model_name/:id/show_in_app(.:format) rails_admin/main#show_in_app 
```

最后，我的 routes.rb 文件：

```
 Resume::Application.routes.draw do

    mount RailsAdmin::Engine => '/admin', :as => 'rails_admin'

    resources :projects, :only => [:index, :show]

    resources :clients, :only => [:index, :show]

    resources :references, :only => [:index, :show]

    devise_for :users

    root :to => 'projects#index'

    #static pages
    match 'about' => 'high_voltage/pages#show', :id => 'about_me'
    match 'site' => 'high_voltage/pages#show', :id => 'site'

    match 'contact' => 'contact_us/contacts#new' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:00:20.467

我认为您可能想将`references`模型重命名为其他名称。我认为这是 Rails 中的一项保留工作，可能会引起一些讨厌的冲突。希望这可以帮助！

# macos - 找出 .png 文件是否是屏幕截图？

> ID：11556064
> 
> 赞同：1
> 
> 时间：2012-07-19T07:40:57.383
> 
> 标签：macos, screenshot, nsfilemanager

当我使用以下代码获取特定文件的属性时：

```
NSFileManager *fileManager = [NSFileManager defaultManager];
NSDictionary *attributes = [fileManager attributesOfItemAtPath:p error:nil]; 
```

是否有属性可以知道它是否是屏幕截图？

现在我正在使用这段尴尬的代码：

```
if ([fileExtension isEqualToString:@"png"]) {
  NSMutableArray *separatetFilename;
  separatetFilename = [NSMutableArray arrayWithArray:[fileName componentsSeparatedByString:@" "]]; /* screenshots have multiple spaces in their names, I split them up to use the information */

  if ([separatetFilename count] == 4) { /* screenshots names have 4 parts when splittet by spaces */
    if ([[separatetFilename objectAtIndex:0] isEqualToString:@"Bildschirmfoto"]) { /* Bildschirmfoto = Screenshot in German */
      /* Do Something */
    }
  }
} 
```

使用此解决方案，我必须为“屏幕截图”字符串输入本地化字符串......我搜索了纪录片，但没有找到任何东西。是否有“isScreenshot”标志或我可以阅读的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:58:20.250

您的问题“是否有“isScreenshot”标志或我可以阅读的内容？答案是“是”。

我知道有两种方法可以得到答案：

a) 询问 NSFile~Manager

b) 请求元数据。

您已经使用过：

```
NSFileManager *fileManager = [NSFileManager defaultManager];
NSDictionary *attributes = [fileManager attributesOfItemAtPath:p error:nil]; 
```

如果您现在查看这本词典的键，例如

```
NSLog( @"the keys: %@", [attributes allKeys] ); 
```

你会找到键@"NSFileExtendedAttributes*"。此键的值是一个字典，其键如*com.apple.metadata:kMDItemIsScreenCapture*或*com.apple.metadata:kMDItemScreenCaptureType*或 ...。这就是您所要求的。相应的值是具有二进制属性列表的 NSData 对象。评估这些 plist 给出类似**1**（它是一个屏幕截图）和**window**用于窗口屏幕截图或**选择**窗口的一部分。

查看元数据可以通过以下方式完成：

```
 MDItemRef item = MDItemCreate( kCFAllocatorDefault, (CFStringRef)p ); 
```

如果您只需要上述值，请使用相应的键创建一个列表（一个 NSArray）：

```
NSArray *ary = [NSArray arrayWithObjects:
     @"kMDItemIsScreenCapture", @"kMDItemScreenCaptureType", nil];
NSDictionary *dict =
    (NSDictionary *)MDItemCopyAttributes( item, (CFArrayRef)ary ); 
```

并测试它返回的内容；

```
NSLog( @"the metadata are %@", dict ); 
```

在这种情况下，返回的值是 __NSCFBoolean（即 NSNumber）和 __NSCFString（即 NSString），这比二进制 plist 更易于使用。

# jquery - Droppable 创建（未）嵌套对象 - 但可拖动的位置发生了变化

> ID：11556068
> 
> 赞同：2
> 
> 时间：2012-07-19T07:41:08.243
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

我正在将一个对象拖到一个可拖放的对象中，该对象也是一个可拖动对象。放置对象后，它嵌套在可放置对象中。同样，如果我将对象拖到 droppable 之外，它就不再嵌套。

但是，如果我经常拖入和拖出可放置对象，则可拖动对象最终会位于不同的位置。

代码位于[http://jsfiddle.net/sandeepy02/kTAL3/41/](http://jsfiddle.net/sandeepy02/kTAL3/41/)

您可以通过创建对象“房间”并将“表格”拖入其中来复制问题。然后移动“房间”，“桌子”随之移动。但是，如果您将“桌子”拖出房间，然后拖入并拖出“桌子”，它会突然重新定位。

**编辑** 为了澄清我用来将拖动的项目附加到可放置项的代码是：

```
.droppable({
            drop: function(event, ui) {
                $(this).append(ui.draggable);
            },
            out: function(event, ui) {
                $("#boundaryContainer").append(ui.draggable);
            } 
```

我尝试了各种方法来在插入和退出之前保存可拖动的位置，但它们没有奏效。方法是：方法1：

```
.droppable({
            drop: function(event, ui) {
                var position = ui.draggable.offset();
                ui.draggable.appendTo($(this)).css(position);
            },
            out: function(event, ui) {
                var position = ui.draggable.offset();
                ui.draggable.appendTo("#boundaryContainer").css(position);
            } 
```

方法二：

```
.droppable({
            drop: function(event, ui) {
                var tempLeft= ui.draggable.position().left;
                var tempRight= ui.draggable.position().right;
                $(this).append(ui.draggable);
                ui.draggable.position().left = tempLeft;
                ui.draggable.position().right= tempRight;
            },
            out: function(event, ui) {
                var tempLeft= ui.draggable.position().left;
                var tempRight= ui.draggable.position().right;
                $("#boundaryContainer").append(ui.draggable);
                ui.draggable.position().left = tempLeft;
                ui.draggable.position().right= tempRight;
            } 
```

方法 3 :(

[http://jsfiddle.net/sandeepy02/kTAL3/53/](http://jsfiddle.net/sandeepy02/kTAL3/53/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:07:47.260

这里的问题是，在将第二个可拖动对象附加到可放置对象之后，它就会成为其中的一部分。您在此处的容差是默认容差，拖动光标不会重新定位。因此，无论您是否拖动内部元素，它实际上都不会离开父元素，因为光标始终位于其顶部，并且它是其父元素的一部分。在这种情况下，out 永远不会触发。

您可以通过我对您的[fiddle](http://jsfiddle.net/kTAL3/62/)进行的轻微修改来测试该行为。（修改是`cursorAt: { top: -10, left: -10 }`在第二个可拖动的。请注意，它仍然不能像您期望的那样工作，因为一旦您将可拖动的元素附加到父容器元素就会重新定位，这是预期的。您应该考虑保留 droppables和两个单独的父容器中的可拖动对象，因为当您分离它们时，当它们重新连接到同一个父容器中时，您不会遇到它们相对于另一个重新定位的问题。

# php - PHP - Zend 框架：模型中的模型？

> ID：11556070
> 
> 赞同：1
> 
> 时间：2012-07-19T07:41:30.057
> 
> 标签：php

我只是想知道，我不是 MVC 方面的专家，但在过去几年中，我一直在将我们的代码转向 Zend 框架上更好的 MVC 结构。我基本上有不同的模型为数据库中的不同实体处理不同的逻辑集。例如，产品模型和客户模型等。

我的 Product 模型是否可以实例化 Customer 模型，以便它可以使用某些 Customer 功能？或者这是控制器的工作，调用客户的相关功能，并将结果传递给产品？假设产品需要知道客户是否有某些记录，以便产品可以决定正确的数据以返回给控制器。

我只是对“最佳方式”感到好奇。我想建立一个“模型中的模型”，因为调用相同产品模型函数的不同控制器需要逻辑。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:00:56.733

恕我直言，可以实例化一个“模型中的模型”，如下面的 CakePHP 所示：

[CakePHP：调用其他模型函数](https://stackoverflow.com/questions/7204591/cakephp-calling-other-model-functions)

您也可以查看这些链接[一](http://mattmccormick.ca/2010/04/24/how-to-easily-create-models-and-table-relationships-in-zend-framework/)、[二](http://framework.zend.com/manual/en/zend.db.table.relationships.html/)和[三](https://stackoverflow.com/questions/638622/modeling-objects-with-multiple-table-relationships-in-zend-framework)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-19T08:11:05.057

您使用以下代码

```
$product  = new Application_Model_Product();  // create model class object, any model name which you want to user 
$product->getProductList();  // just any function from model 
```

# c# - 将命名空间提取到单独的 CHM 文件中

> ID：11556078
> 
> 赞同：1
> 
> 时间：2012-07-19T07:41:47.950
> 
> 标签：c#, documentation, documentation-generation, chm

我有一个包含几个 C# 类的命名空间，我想与我的分布式团队一起查看这些类。我正面临与我的同行共享大 CHM 文件的问题（不能使用公共共享站点），所以我想只共享正​​在审查的命名空间。

有没有办法从父 CHM 文件中提取命名空间文档（最好是 CHM 格式）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T22:15:05.180

是和不是。你可以为它写一个程序

1.  提取 CHM
2.  选择相关的 html 文件，并识别帮助文件（如 .css）
3.  删除其余部分，
4.  在您保留的文件中修复您删除的文件的链接 (3) (2)
5.  修复索引和目录，祈祷它们不是二进制的。
6.  重新包装整个东西。

选择和修复部分可能取决于用于制作原始 CHM 的生成器工具（和版本）。

无论如何，理论上这是可能的，但我认为不会有任何阅读。

# nopcommerce - 在 nopcommerce2.2 中获取当前客户

> ID：11556080
> 
> 赞同：3
> 
> 时间：2012-07-19T07:42:01.980
> 
> 标签：nopcommerce

我在 mvc 框架中的 nopcommerce2.2 项目中工作。我想在 aspx 页面中获取当前客户 ID。我可以在 nopcommerce2.2 中获取当前客户信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:56:06.333

采用`new WebWorkContext().CurrentCustomer`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:42:08.893

将 IWebHelper 的依赖项添加到您的构造函数并使用 CurrentCustomer 属性。

# css - css：主菜单 sub1 和 sub2 的背景颜色不显示

> ID：11556081
> 
> 赞同：1
> 
> 时间：2012-07-19T07:42:03.667
> 
> 标签：css, menu, background-color, navigationbar

在我的以下导航栏菜单中，所有元素都显示为蓝色。如何让 sub1 和 sub2 以橙色显示并以蓝色列出元素？

```
<head>
<style type="text/css">
ul{
list-style-type:none;
margin:0;
padding:0;
background-color:#33CCFF;/*orange is not displaying*/
}
li{float:left;
display:block;
width:120px;
text-align:center;
padding:4px;
color:#FFFFFF;
background-color:;#FFCC33;}/*blue*/
</style>
</head>
<body>
<ul id="menu">
<li id="menu1">Sub 1
    <ul>
        <li>test 1</li>
        <li>test 2</li>
        <li>test 3</li>
        <li>test 4</li>
    </ul>
</li>
<li id="menu2">Sub 2
    <ul>
        <li>test 1</li>
        <li>test 2</li>
        <li>test 3</li>
        <li>test 4</li>
    </ul>
</li>
      </ul>     
      </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:41:25.547

```
<ul id="menu">
<li id="menu1"><span>Sub 1</span>
    <ul>
        <li>test 1</li>
        <li>test 2</li>
        <li>test 3</li>
        <li>test 4</li>
    </ul>
</li>
<li id="menu2"><span>Sub 2</span>
    <ul>
        <li>test 1</li>
        <li>test 2</li>
        <li>test 3</li>
        <li>test 4</li>
    </ul>
</li>
      </ul> 
```

**css**

```
li{float:left;
  display:block;
  width:120px;
  text-align:center;
  padding:4px;
  color:#FFFFFF;
  background-color:;#FFCC33;}/*blue*/
}
#menu1 span,#menu2 span
{
color:orange;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:24:48.480

[http://jsfiddle.net/HtMLY/](http://jsfiddle.net/HtMLY/)

看看可能b这就是你想要的结果希望它能解决你的问题

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T07:45:56.033

修改 CSS 选择器。

试试这个：

```
ul li{
list-style-type:none;
margin:0;
padding:0;
background-color:#FFCC33;/*orange is not displaying*/
}
ul li ul li{float:left;
display:block;
width:120px;
text-align:center;
padding:4px;
color:#FFFFFF;
background-color:#33CCFF;}/*blue*/ 
```

像这样，您将准确定义必须将哪些 CSS 应用于您想要的树级别。就像您对所有 ul 和所有 li 应用相同的样式一样，与它们的级别无关。

# android - 将本机库从另一个项目链接到 JUnit 测试项目时出错

> ID：11556083
> 
> 赞同：1
> 
> 时间：2012-07-19T07:42:16.400
> 
> 标签：android, android-ndk, android-testing

我在使用 Android JUnit Test 时遇到了一些问题，下面给出了详细信息。

我有一个 Android 应用程序（要测试）和一个相应的 JUnit 测试项目（测试应用程序）。另外，我还有另一个项目，其中包含一些我打算在我的测试项目中使用的本机库。

我曾尝试将另一个项目用作 Eclipse 下的库，但在运行 JUnit 测试时，出现错误，指出“findLibrary 返回 null”。

有一个解决方法，将本机库放在要测试的应用程序中，然后使用它。但我不想将测试库放在应用程序中。有什么解决办法吗？

# android - 是否可以在运行的应用程序中从服务器下载库？

> ID：11556085
> 
> 赞同：0
> 
> 时间：2012-07-19T07:42:38.490
> 
> 标签：android, ios

我很好奇有什么方法可以在运行应用程序 wheater iOS 或 Android 时从服务器下载库。让它变得简单，我有一个应用程序能够连接特定的服务器。在应用程序中，有 2 个按钮，分别为 name1 和 name2。因此，如果我点击 name1 按钮，它会自动从服务器下载资源和库并运行。如果我触摸 name2 按钮，它还会下载资源和库，但它与按钮 name1 完全不同。结果，取决于我触摸的按钮，运行不同的应用程序。我不在乎 iOS、Android 或网络应用程序。如果您有任何想法，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T07:53:15.927

在 Android 中是可能的，但可能不是一个好主意。在执行之前，您必须确定远程代码是安全的*。*[这里](http://android-developers.blogspot.jp/2011/07/custom-class-loading-in-dalvik.html)有更详细的描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:52:49.353

您正在描述应用商店客户所做的事情，所以这是可能的，但可能与您想象的不完全一样。您需要在 Android 上使用 PackageManager 来安装应用程序或库，并且您的用户必须确认安装。

# java - Java 应用程序在 Eclipse 上运行良好，但在部署为可运行 jar 后无法正常运行

> ID：11556095
> 
> 赞同：4
> 
> 时间：2012-07-19T07:43:19.393
> 
> 标签：java, jar, inputstream

就像瓷砖说的那样，我的 Java 应用程序不能正常工作，因为它在 Eclipse 上开发时工作正常。

我完成了在 Eclipse 上构建和测试我的应用程序。正如我所料，它工作得很好。我需要将它部署为一个可运行的 jar，这样我的客户就不能在他们的系统上使用它。我通过在 Eclipse 上导出它使其成为一个可运行的 jar。当我运行可运行 jar 时，应用程序开始正常工作一段时间并停止读取文件。我在 Eclipse 上的相同代码上没有任何问题。

似乎不起作用的源代码片段如下。

```
 sfis = new SmbFileInputStream(sFile);
            in = new BufferedInputStream(sfis);

            byte buf[] = new byte[(int)sFile.length()];
            int pos = 0;
            int size = 10;
            int temp;

            while((size=in.read(buf, pos, size)) > 0){
                pos += size; 
                temp = buf.length - pos;
                if(temp < 10){
                    size = temp;
                }
            } 
```

在 Eclipse 上它不会引起任何问题。它完美地从 SMB 连接读取数据并完成其工作。但是从 jar 应用程序来看，它似乎在某个时候停止从 while 循环内的输入流中读取。这是一个我从未经历过的非常奇怪的案例。我找不到任何解决方案。

这是因为我的代码或 Eclipse 可能错误制作的 jar 文件吗？

- - - - - 附加信息 - - - - - - - - - -

在 Edmondo1984 的大力帮助下，我找到了 jar 程序停止的地方。当它从 SmbFile 进入 inputstream 时，会创建一个新线程 jcifs.util.transport.Transport，该线程被简单地阻塞，应用程序创建另一个 jcifs.util.transport.Transport，依此类推。创建 8 个或 9 个 jcifs.util.transport.Transport 线程后，它被卡住了，什么也不做。

相同的代码，相同的 jcifs 库。但是在 Eclipse 上运行和在本地机器上作为可运行 jar 运行时的工作方式不同。我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:48:28.860

“流中没有更多内容”的返回值是`-1`（参见[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedInputStream.html#read%28byte%5b%5d,%20int,%20int%29)）。

想象一下，如果您尝试`in.read(buf, pos, size)`但底层证券仍然不可用，会发生什么。然后调用立即返回`0`（零）返回值。这样，循环条件评估为假并退出循环。所以我认为你应该比较`!= -1`.

另一个可能的问题：您还可以考虑如果`size = 0`（例如由于上述情况）和`temp >= 10`. `size`因为您直接将to的值反馈`in.read(buf, pos, size)`为要读取的最大字节数，所以假设您已经更正了与 的比较，您可能会陷入无限循环`!= -1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:37:35.570

在干预流时，这种行为很常见。小的算法错误可能会在不同的环境中导致不同的症状。

您可以将“调试”信息打印到控制台，以更好地了解代码停止的位置和原因。我很确定它在读取方法上。

您的代码有几处问题，最臭名昭著的是块：

```
temp = buf.length - pos;
if(temp < 10){
  size = temp;
} 
```

为什么？当剩下 10 个或更少字节时，您将尝试在下一次 read() 中读取它们，否则您可能会尝试读取太多（再次读取整个文件大小）。在 Eclipse 中运行，该文件可能是在第一次 read() 中读取的，而在 Eclipse 中显然不是。尝试将您的代码更改为以下内容：

```
FileInputStream sfis = new FileInputStream(sFile);
ByteArrayOutputStream baos = new ByteArrayOutputStream();
byte buf[] = new byte[4096];
int read = sfis.read(buf);
while(read>0){
  baos.write(buf, 0, read);
  read = sfis.read(buf);
}
sfis.close(); 
```

还要考虑使用[Apache 的 Java IO 实用程序](http://commons.apache.org/io/)代码，而不是总是编写这种类型的代码。Java 中的 IO 需要大量样板文件，而优秀的程序员有更好的事情要做。

附带说明：将文件读入内存通常是个坏主意。除非您打算以某种方式将其数据作为一个整体进行转换，否则流式传输总是更好。我不知道您的程序是做什么用的，但请记住这一点：如果您尝试读取 10GB 文件会发生什么？还是几个？

快乐编码，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-11T08:28:44.367

Java 在任何方面都对大写字母敏感。例如，如果您有名为 image.PNG 的文件，并且在代码中将位置设置为“/image.png”（而不是“/image.PNG”），它将在 eclipse 中正常工作，但在导出可运行的 jar 文件后，java VM 会无法找到该文件。

# java - java进程在启动时挂起

> ID：11556096
> 
> 赞同：0
> 
> 时间：2012-07-19T07:43:24.277
> 
> 标签：java, memory, jvm

我有一个服务器（40GB RAM），java 进程在启动时挂起。如果我只是在 shell 上键入“java”，它会打印帮助消息，然后永远不会退出。

似乎有大约 8GB 的​​ RAM 可用。任何帮助，将不胜感激。

这是 top 的输出：

任务：总共 297 个，1 个正在运行，296 个正在休眠，0 个停止，0 个僵尸 CPU：0.0%us，19.4%sy，0.0%ni，79.5%id，0.0%wa，0.0%hi，1.1%si，0.0 %st 内存：总计 49556016k，已使用 41112432k，可用 8443584k，286900k 缓冲区交换：总计 97851904k，已使用 276044k，可用 97575860k，缓存 23982784k

PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND
13 root 15 -5 0 0 0 S 88 0.0 2302:14 ksoftirqd/3
25 root 15 -5 0 0 0 S 73 0.0 2782:56 ksoftirqd/7
4 root 15 -5 0 0 0 S 64 0.0 10223:40 ksoftirqd/0
4912 user1 20 0 1529m 211m 9.8m S 25 0.4 6510:25 java
13092 user2 20 0 6565m 2.6g 8472 S 18 5.6
1 3178 19420 8 root 3178:42 java 860 420 S 0 0.0 9:32.65 初始化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:04:15.080

`java -version`应该几乎立即退出。如果它没有正确安装。

顺便说一句，尝试安装 Java 6 更新 33，因为更新 20 已经很旧了。

# iphone - ALAssetsLibrary 获取视频的路径并稍后播放

> ID：11556100
> 
> 赞同：2
> 
> 时间：2012-07-19T07:43:26.353
> 
> 标签：iphone, objective-c, ios, xcode, alassetslibrary

使用下面的代码，我可以在 tableview 中获取视频文件。但是我无法获取视频的路径，以便我将其保存并稍后使用它来播放。

```
 - (void)viewDidLoad {

    [super viewDidLoad];
    [activity startAnimating];

    assets = [[NSMutableArray alloc] init];
    library = [[ALAssetsLibrary alloc] init];

    UIImage *viewImage;

    [library writeImageToSavedPhotosAlbum:[viewImage CGImage] orientation:(ALAssetOrientation)[viewImage imageOrientation] completionBlock:^(NSURL *assetURL, NSError *error){  
        if (error) {  
            NSLog(@"error");  
        } else {  
            NSLog(@"url %@", assetURL);

        }  
    }];  

    [library enumerateGroupsWithTypes:ALAssetsGroupAll  usingBlock:^(ALAssetsGroup *group, BOOL *stop){

        if (group != NULL) {

            [group enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop){

                if ([[result valueForProperty:ALAssetPropertyType] isEqualToString:ALAssetTypeVideo]) {
                    NSLog(@"asset: %@", result);
                    [assets addObject:result];
                }

            }];
        }

        [self.tableview reloadData];
        [self.activity stopAnimating];
        [self.activity setHidden:YES];

    }
           failureBlock:^(NSError *error){

                NSLog(@"failure"); }];

}

// Customize the number of sections in the table view.
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [assets count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    ALAsset *asset = [assets objectAtIndex:indexPath.row];
    [cell.imageView setImage:[UIImage imageWithCGImage:[asset thumbnail]]];
    [cell.textLabel setText:[NSString stringWithFormat:@"Video %d", indexPath.row+1]];

    return cell;
} 
```

这是我的输出：

```
2012-07-19 12:37:42.135 mptest[17310:707] asset: ALAsset - Type:Video, URLs:{
    "com.apple.quicktime-movie" = "assets-library://asset/asset.MOV?id=336068EA-C1B1-481C-82DA-F2419561A91A&ext=MOV";
}
2012-07-19 12:37:42.147 mptest[17310:707] asset: ALAsset - Type:Video, URLs:{
    "com.apple.quicktime-movie" = "assets-library://asset/asset.MOV?id=A1CBDDE4-4BC1-48F2-84E0-028D7B7F4879&ext=MOV";
}
2012-07-19 12:37:42.156 mptest[17310:707] asset: ALAsset - Type:Video, URLs:{
    "com.apple.quicktime-movie" = "assets-library://asset/asset.MOV?id=3D76ABC7-515C-42E7-A940-B149C78FBAB6&ext=MOV";
}
2012-07-19 12:37:42.262 mptest[17310:707] error 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T07:55:35.373

由于沙盒，您无法从 AssetsLibrary 获取实际的文件路径。但是，您有多种选择来访问/播放视频文件。

`url`1) 使用 of方法查询 Asset 的 URL`ALAssetRepresentation`并将其传递给 MPMoviePlayerController 的实例以播放视频。此 url 以 assets-library:// 开头，不是文件系统 url，但`MPMoviePlayerController`知道如何处理这样的 URL。

2）通过使用 获取视频内容，`getBytes:fromOffset:length:error:`将`ALAssetsRepresentation`视频保存到您自己的应用沙箱中以播放/编辑/共享它或用于`getBytes:fromOffset:length:error:`流式传输视频内容。

# objective-c - 消息不会连接到方法

> ID：11556102
> 
> 赞同：0
> 
> 时间：2012-07-19T07:43:31.950
> 
> 标签：objective-c

我对此有点陌生，所以这可能是初学者的错误。问题是当我向它不连接的方法发送消息时。

下面是调用方法：

```
-(BOOL) login:(LoginInfo *) info{

NSString *url = [NSString stringWithFormat:@"%@/%@?name=%@&password=%@", FAMORABLE_API_URL,FAMORABLE_API_ACTION_LOGIN, info.username, info.password];

NSDictionary* json =  [self getJson:url];
NSString *token = [json objectForKey:@"Token"]; 

NSLog(@"results: %@", token);

LoginInfo *loginResult = [LoginInfo alloc];
loginResult.token = token;
//TODO
NSLog(@"test 1 %@", loginResult.token);
    [clientService saveLoginInfo:loginResult];

return YES;

} 
```

在最后一行上，您可以看到我正在发送到 clientService 中的 saveLoginInfo，它在 ClientService.h 中声明，该文件已导入此文件中。

```
-(void) saveLoginInfo:(LoginInfo *)info{
NSLog(@"test 2 %@", info);
NSLog(@"test 3%@", info.token);
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

[defaults setObject:info.token forKey:KEY_TOKEN];
NSString *string = [defaults stringForKey:KEY_TOKEN];
NSLog(@"test 4%@", string);
// save it
[defaults synchronize];

if (!(info.token)){
    self.currentUser = nil;
    self.isLoggedOn=false;
}else{
    self.currentUser = info;
    self.isLoggedOn=true;
}    
} 
```

这是被调用的方法。我已经放了一堆日志，如果我做错了，主要是为了安全，但没有一个被执行......

您对可能出现的问题有任何想法吗？

提前谢谢汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:51:05.290

`clientService`在你的类中是`[clientService saveLoginInfo:loginResult];`一个实例变量吗？

如果是这样，请确保在调用之前已在某处实例化该对象。（在你的类的`init`方法中，或者`viewDidLoad`如果它是一个`UIViewController`。）

例如

```
- (void)viewDidLoad {
    [super viewDidLoad];
    clientService = [[MyClientService alloc] init];
}

- (id)init {
    self = [super init];
    if (self) {
        clientService = [[MyClientService alloc] init];
    }
    return self;
} 
```

（确保您还在`dealloc`方法中释放实例。

# java - 用于监听移动数据状态的 BroadcastReceiver

> ID：11556103
> 
> 赞同：1
> 
> 时间：2012-07-19T07:43:37.160
> 
> 标签：java, android, mobile, android-broadcastreceiver

我使用广播接收器来监听当前的 wifi 状态。因此，它将当前状态设置为切换按钮 (setText) 的文本（已连接、正在连接、已禁用……）。

它工作正常！

但现在我想对移动数据状态做同样的事情..

所以我使用 TelephonyManager 来设置接收器：

```
this.registerReceiver(this.DataStateChangedReceiver,
new IntentFilter(TelephonyManager.ACTION_PHONE_STATE_CHANGED)); 
```

然后我从wifi接收器复制代码并编辑它：

```
private BroadcastReceiver DataStateChangedReceiver
= new BroadcastReceiver()
{

    @Override
       public void onReceive(Context context, Intent intent) 
    {
        // TODO Auto-generated method stub

    int extraDataState = intent.getIntExtra(TelephonyManager.EXTRA_STATE ,
    TelephonyManager.DATA_DISCONNECTED);

    switch(extraDataState){
    case TelephonyManager.DATA_CONNECTED:
        data_toggle.setChecked(true);

     break;

    case TelephonyManager.DATA_DISCONNECTED:
        data_toggle.setChecked(false);

     break;

    case TelephonyManager.DATA_CONNECTING:
        data_toggle.setChecked(true);

     break;

    case TelephonyManager.DATA_SUSPENDED:
        data_toggle.setChecked(true);

     break;

    }
    }
}; 
```

应用程序启动但工具按钮没有任何反应。TelephonyManager 是错误的方法吗？连接管理器？

我想设置一个 onclicklistener 来打开/关闭移动数据。

如何做到这一点是下一个问题..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-19T09:11:44.323

在我的工作中，我使用了 ACTION_SCREEN_ON 和 _OFF 的技巧......所以，诀窍就在这样的事情中......你在 Receiver.class 中创建布尔变量，然后在连接状态改变时改变它...... ..然后在服务（或活动）中，你得到意图的地方做什么......

```
 private boolean screenOff; 
@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
        screenOff = true;
    } else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
        screenOff = false;
    }
    Intent i = new Intent(context, InternetService.class);
    i.putExtra("screen_state", screenOff);
    context.startService(i);
} 
```

# asp.net-mvc - SignalR 和 MVC 捆绑包

> ID：11556110
> 
> 赞同：25
> 
> 时间：2012-07-19T07:43:59.340
> 
> 标签：asp.net-mvc, bundle, signalr

我正在尝试将 SignalR 与 MVC 包一起使用，但在找出如何将 /signalr/hubs 脚本包含到包中时遇到问题。现在我必须在 jquery.signalR 和我的代码之间插入路径。这将导致三个 javascript 文件请求。

有没有办法将 /signalr/hubs 包含到我的 mvc 包中？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-06T21:47:44.537

有点晚了，但这是我的贡献：
创建一个包含以下内容的 javascript 文件：

```
(function ($) {
    $.ajax({
        url: "/signalr/hubs",
        dataType: "script",
        async: false
    });
}(jQuery)); 
```

然后将该文件添加到 bundles 集合中。
这将为您加载“/signalr/hubs”代码。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-19T16:40:23.160

默认的 /signalr/hubs 脚本由运行时在第一个请求时动态生成，然后缓存。

您可以使用 hubify.exe（详见[http://weblogs.asp.net/davidfowler/archive/2012/06/10/signalr-0-5-1-released.aspx](http://weblogs.asp.net/davidfowler/archive/2012/06/10/signalr-0-5-1-released.aspx)）自行预生成文件，所以你可以将它添加到 MVC 包中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-12T06:29:03.630

我知道这是一个旧线程，但我想为 SignalR 2.x 添加以下内容。我真的很想使用 SquishIt 捆绑代理，通过反复试验，我设法想出了以下内容：

```
using Microsoft.AspNet.SignalR
using Microsoft.AspNet.SignalR.Hubs

var resolver = new DefaultHubManager(new DefaultDependencyResolver());
var proxy = new DefaultJavaScriptProxyGenerator(resolver, new NullJavaScriptMinifier());
string iCanHazScriptNao = proxy.GenerateProxy("/signalr"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-13T19:36:50.753

从[asp.net](http://www.asp.net/signalr/overview/guide-to-the-api/hubs-api-guide-javascript-client#dynamicproxy)中，使用 SignalR.Utils NuGet 包，我发现我需要位于包含集线器的 DLL 的目录中：

（*假设您有一个标准的解决方案结构并使用 SignalR.Utils 的 2.2.0*）

```
cd C:\YourSolution\YourProjectWithTheHub\bin\Debug
..\..\..\packages\Microsoft.AspNet.SignalR.Utils.2.2.0\tools\signalr.exe ghp 
```

运行该工具后，您运行它的目录中将有一个`server.js`文件（在本例中为`Debug`）。

（*注意：当使用 /p 标志指定路径时，我无法让它工作，并且出于某种原因，即使它确实工作，它也会创建一个包含 signalr.exe 文件的临时目录*）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-29T20:33:54.150

我使用了此线程中提到的@KTW 响应，这是完整的更改

**捆绑配置**

```
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
            "~/Scripts/modernizr-2.6.2.js",
            "~/Scripts/jquery-2.2.3.js",
            "~/Scripts/jquery-ui-1.11.4.js",
            "~/Scripts/jquery.multiselect.js",
            "~/Scripts/jquery.dataTables.js",
            "~/Scripts/jquery.jstepper.min.js",
            "~/Scripts/underscore.min.js"
        ));

        bundles.Add(new ScriptBundle("~/bundles/SignalRScripts").Include(
            "~/Scripts/jquery.signalR-2.2.2.min.js",
            "~/Scripts/signalRBundle.js",
            "~/Scripts/Views/Search/SignalRFunctions.js"));
    }
} 
```

**SignalRFunctions.js**

```
 $(function() {
    // Declare a proxy to reference the hub.
    var usersHub = $.connection.currentUsersHub;
    //Create a function that the hub can call to broadcast messages.
    usersHub.client.broadcastMessage = function(reservationNumber, usrName) {
        //Message broadcast from server
        //now find the id with reservationNumber on the page and to that append the user name
        var id = '#' + reservationNumber;
        if ($(id).length) {
            if (usrName.length) {
                itemsOpened($(id), usrName);
            } else {
                itemsClosed($(id));
            }
        } 
        //else {
        //    //is it possible that server broad casted for a reservationNumber and is not available at the client?
        //}
    };

    //Accepts dictionary from hub and goes through search results
    //https://stackoverflow.com/questions/7776337/reading-c-sharp-dictionary-in-javascript
    usersHub.client.broadcastCollection = function (reservationNumberAndUsers) {
       for (var resNumKey in reservationNumberAndUsers) {
            if (reservationNumberAndUsers.hasOwnProperty(resNumKey)) {
                //Message broadcast from server
                //now find the id with ReservationNumber on the page and to that append the user name
                var id = '#' + resNumKey;
                if ($(id).length) {
                    if (reservationNumberAndUsers[resNumKey].length) {
                        itemsOpened($(id), reservationNumberAndUsers[resNumKey]);
                    } else {
                        itemsClosed($(id));
                    }
                }
            }
        }
    };

    $.connection.hub.start().done(function() {
                var searchedReservationNumbers = [];
                if (typeof jsData !== 'undefined') {
                    if (jsData && jsData.length) {
                        for (var i = 0; i < jsData.length; i++) {
                            searchedReservationNumbers.push(jsData[i].UReservationNumber);
                        }
                        if (searcheduReservationNumbers.length !== 0) {
                            usersHub.server.getWorkingUsersOnUReservationNumber(searcheduReservationNumbers);
                        }
                    }
                }
            }).fail(function () { console.log('Could not Connect To SignalrHub!'); });
        /*In case we would decide to continuously reconnect making connection to server.
        $.connection.hub.disconnected(function() {
            setTimeout(function() {
                    $.connection.hub.start();
                },
                5000); // Restart connection after 5 seconds.
        });*/

function itemsOpened(elem, id) {
    var item = "Opened By - " + id;
    elem.prop('title', item);
    elem.css('background-color', 'chocolate');
};

function itemsClosed(elem) {
    elem.prop('title', "");
    elem.css('background-color', '');
};
}); 
```

**信号RBundle.js**

```
(function ($) {
$.ajax({
    url: "/signalr/hubs",
    dataType: "script",
    async: false
});
}(jQuery));
/* Source https://stackoverflow.com/questions/11556110/signalr-and-mvc-bundle */ 
```

**SomePartialView.cshtml** 而不是在上面的部分视图中写在下面

```
@using Localization
@using Newtonsoft.Json
@model NameSpace.ViewModels.FilterVM

@{
    ViewBag.Title = Strings.Filter;
}

@using (Html.BeginForm())
{
    <div class="large-12 columns">
        ---SOME CODE HERE 
    </div>

}

@section scripts
{
<script type="text/javascript" language="javascript">
    var jsData = @Html.Raw(JsonConvert.SerializeObject(Model));
</script>
<script src="~/Scripts/jquery.signalR-2.2.2.min.js"></script>
<script src="~/signalr/hubs"></script>
<script src="~/Scripts/Views/Search/SignalRFunctions.js"></script>
} 
```

这改为

```
 @using Localization
    @using Newtonsoft.Json
    @model NameSpace.ViewModels.FilterVM

    @{
        ViewBag.Title = Strings.Filter;
    }

    @using (Html.BeginForm())
    {
        <div class="large-12 columns">
            ---SOME CODE HERE 
        </div>

    }

    @section scripts
    {
    <script type="text/javascript" language="javascript">
        var jsData = @Html.Raw(JsonConvert.SerializeObject(Model));
    </script>
    @Scripts.Render("~/bundles/SignalRScripts")
    } 
```

注意

```
@Scripts.Render("~/bundles/SignalRScripts") 
```

在上面的部分视图中。没有上面的 @KTW 文件（对 /signalr/hubs 的 ajax 请求）

```
var usersHub = $.connection.currentUsersHub; 
```

总是以空值出现。

# windows - 将 node-stitch 项目从 Linux 移动到 Windows - 现在它不会构建

> ID：11556111
> 
> 赞同：0
> 
> 时间：2012-07-19T07:44:02.840
> 
> 标签：windows, node.js, coffeescript, node-stitch

我遇到了一个没有多大意义的错误。这是[我的 Cakefile](http://pastebin.com/bvQaBJfF)中进行咖啡编译的部分：

```
buildsrc: ->
    stitch = require 'stitch'
    fs = require 'fs'

    # Create stitch package
    pkg = stitch.createPackage
        paths: [__dirname + '/src']
        dependencies: [
            __dirname + '/vendor/jquery-1.7.1.min.js'
            __dirname + '/vendor/jquery-ui-1.8.18.min.js'
            __dirname + '/vendor/jquery.cookie.js'
            __dirname + '/vendor/jquery.iframe-transport.js'
            __dirname + '/vendor/jquery.fileupload.js'
        ]

    # Compile the package
    pkg.compile (err, src)->
        if err
            console.warn 'Coffee compile failed:'
            console.warn err.toString()
        else
            # Save the source code
            fs.writeFile BUILD_JS_PATH, src, (err)->
                if err then throw err
                console.log 'Compiled src to ' + BUILD_JS_PATH 
```

以及运行它的输出（缩短的路径）：

```
咖啡编译失败：
错误：C:\Users\Codemonkey\...\project\src\foo.coffee 不在需要的路径中

```

这在具有相同代码和相同节点、缝合和咖啡脚本版本的 Linux 上运行得非常好。我可以看到错误是在[stitch.coffee:177](https://github.com/sstephenson/stitch/blob/master/src/stitch.coffee#L177)中抛出的，但我不知道它是什么意思，是我的错还是如何解决。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:11:31.470

是的，这是 Windows 的目录分隔符问题 - 我发现了一个解决问题的未拉取请求 - [https://github.com/sstephenson/stitch/pull/34](https://github.com/sstephenson/stitch/pull/34)

# c# - 使用 C# 对具有 Datetime 数据类型的列进行数据集排序

> ID：11556114
> 
> 赞同：4
> 
> 时间：2012-07-19T07:44:24.867
> 
> 标签：c#, asp.net

我有一个数据集（Dataset ds），您可以在下面找到数据集中包含演示数据的字段。在我的数据集中，它们是名称为日期（数据类型-日期时间）的列，我想对此列进行排序。我无法从 SQl 进行排序，因为数据集是 2 个不同数据集的合并。请帮助我了解如何在数据集中进行排序。

```
Date              Volume

07/19/201211:30AM  12

07/18/201201:30PM  13

07/17/201203:30PM  22 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-19T08:36:58.903

这是一个简单的`Linq-To-DataSet`方法：

```
IEnumerable<DataRow> orderedRows = dataSet.Tables[0].AsEnumerable()
    .OrderBy(r => r.Field<DateTime>("Date")); 
```

现在您可以将其用作`DataSource`或在`foreach`. 如果您需要实现它，您可能希望从中创建一个新`DataTable`的：

```
DataTable tblOrdered = orderedRows.CopyToDataTable(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:19:47.613

您[可以](http://msdn.microsoft.com/en-us/library/aa719810%28v=vs.71%29.aspx)从`data-set`.

然后，您可以使用[DataView.Sort 属性](http://msdn.microsoft.com/en-us/library/system.data.dataview.sort%28v=vs.71%29.aspx)对数据进行排序。

例如。

```
 DataView myDataView = DT.DefaultView;  
   myDataView.Sort = "Date DESC"; 
```

阅读有关[数据集中过滤和排序简介的更多信息](http://msdn.microsoft.com/en-us/library/b51xae2y%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-02T12:59:51.787

使用 Dataview，您可以对 Datatable 进行排序。只需将您的 Datatable 放在 Dataview 中即可查看以下示例：

您有 dtlog 表，其中有两列，一列是日期，另一列是详细信息。您想按日期列对数据表进行排序。

```
DataTable dtlog = new DataTable();
dtlog.Columns.Add("date");
dtlog.Columns.Add("details"); 
```

1.创建数据视图并将您的数据表放在视图中

```
DataView dtview = new DataView(dtlog);
string sortstring = "date DESC"; // sorting in descending manner 
dtview.Sort = sortstring; 
```

2.创建另一个表，您可以在其中保存排序的数据视图

```
DataTable dtsort =dtview.ToTable(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T07:50:14.730

您可以通过 DataView 执行此操作。如果您持有日期时间的列是日期时间列

```
DataView dv = DataTable.DefaultView;
dv.Sort = "DateTime-ColumnName ASC"; 
```

它不适用于将日期时间保存为字符串的字符串列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T07:54:03.257

DataTable 的 DataView 有一个排序属性，请将列名传递给它

例如

```
dataSet1.Table[0].DefautlView.Sort = "ColumnName"; 
```

默认排序是升序

有关更多信息，请参阅链接[http://msdn.microsoft.com/en-us/library/system.data.dataview.sort(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.data.dataview.sort(v=vs.100).aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-12T22:04:50.703

我发现我的解决方案是向 Datatable 添加更多列，我们可以在其中保存 a 的每个部分`DateTime`：

```
Tabla.Columns.Add("year", typeof(DateTime));
Tabla.Columns.Add("month", typeof(DateTime));
Tabla.Columns.Add("day", typeof(DateTime)); 
```

然后我们可以`sort`使用我们的数据表`DataView`：

```
DataView myDataView = DT.DefaultView;

case 1: ASC
  myDataView.Sort = "year asc, month asc, day asc"; 

case 2: DESC
  myDataView.Sort = "year desc, month desc, day desc";

Tabla = myDataViwe.toTable(); 
```

结果是我们按日期时间排序的数据表

# perl - perl 中的 Win32::AdminMisc 编译错误

> ID：11556120
> 
> 赞同：3
> 
> 时间：2012-07-19T07:44:46.537
> 
> 标签：perl, perl-module

我正在使用 perl 5.14.2，当我尝试编译 perl 文件时。它给了我错误“无法在@INC 中找到模块 Win32::AdminMisc 的可加载对象”，而它在 perl 5.6 上运行良好。现在我用 5.14 替换了 perl 5.6。我需要编译 Win32::AdminMisc。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:58:49.747

假设您使用的是 ActivePerl，您是否为 5.14 重新安装了[Win32::AdminMisc](http://www.roth.net/perl/adminmisc/)？仅将 5.6 库路径添加到 5.14`@INC`将不适用于任何已编译的模块。

您可以尝试添加 Roth Consulting 存储库`http://www.roth.net/perl/packages`，然后使用`ppm install Win32::AdminMisc`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T07:37:04.993

也许它不再可用。

当我在浏览器中打开[http://www.roth.net/perl/packages/Win32-AdminMisc.ppd](http://www.roth.net/perl/packages/Win32-AdminMisc.ppd)时出现错误“正在下载 Roth Consulting 存储库 Win32-AdminMisc PPD ... 未找到”，它显示为 404s，并且roth 的 FTP 站点不再起作用。

# sql-server-2008 - SQL Server：如何根据另一列的顺序在一个列上使用dense_rank

> ID：11556125
> 
> 赞同：4
> 
> 时间：2012-07-19T07:45:17.343
> 
> 标签：sql-server-2008, tsql, sql-order-by, dense-rank

我在 SQL Server 2008 中有一个表，我需要为一列交替值，比如 column `alt`。该列中的重复项始终需要相同的值，因此我正在考虑通过 % 2使用`dense_rank`该列的函数。`alt`

但是该表中也有邮政编码，我需要在分配交替值之前对数据进行排序。

所以基本上在基于列的交替值`alt`已经分配之后，当数据然后按邮政编码排序时，交替值确实需要交替（当然除了“alt”表中的重复项）。

目前，我得到一个结果，其中`alt`值确实得到了交替值，但是当按邮政编码排序时，我通过 dense_rank 函数获得了例如 0,0,0 的序列，这是问题所在。

我尝试使用临时表，但没有得到预期的结果

```
select * into #txy ordered by zip 
```

然后在该表上执行desk_rank，因为不能保证临时表的顺序。

任何想法都非常感谢！

干杯，斯蒂沃

编辑：

示例代码：

```
CREATE TABLE [xy.TestTable](
[BaseForAlternatingValue] [char](10),
[zip] [varchar](5)
) ON [PRIMARY]
GO

INSERT INTO [xy.TestTable]
       ([BaseForAlternatingValue]
       ,[zip])
 VALUES
       ('cccccccccc','99999'),
       ('bbbbbbbbbb','22222'),
       ('aaaaaaaaaa','12345'),
       ('dddddddddd','33333'),
       ('aaaaaaaaaa','12345'),
       ('bbbbbbbbbb','22222')
GO

select (DENSE_RANK() OVER (ORDER BY BaseForAlternatingValue)) % 2 as AlternatingValue
    , BaseForAlternatingValue
    , zip
    from [xy.TestTable]
    order by zip

Result:
AlternatingValue    BaseForAlternatingValue zip
1                      aaaaaaaaaa            12345
1                      aaaaaaaaaa            12345
0                      bbbbbbbbbb            22222
0                      bbbbbbbbbb            22222
0                      dddddddddd            33333
1                      cccccccccc            99999 
```

现在的问题是，当按邮政编码排序时，以下列都包含与交替值相同的值 (0)。当按邮政编码排序时，结果实际上应该有交替值，但这些交替值应该基于列 BaseForAlternatingValue。

```
0                      bbbbbbbbbb            22222
0                      dddddddddd            33333 
```

预期结果应该是：

```
AlternatingValue    BaseForAlternatingValue zip
1                      aaaaaaaaaa            12345
1                      aaaaaaaaaa            12345
0                      bbbbbbbbbb            22222
0                      bbbbbbbbbb            22222
1                      dddddddddd            33333
0                      cccccccccc            99999 
```

最后两个结果行的最后一个 AlternatingValue 不同：Alternating Value 需要在不同的邮政编码之间交替。之前倒数第三行是 0，倒数第二行也是 0。

至于下面 Mikael 的问题，“如果你有 add row ('cccccccccc','12345') 怎么办。那么预期的输出是什么？”

预期的输出将是：

```
AlternatingValue    BaseForAlternatingValue zip
1                      aaaaaaaaaa            12345
1                      aaaaaaaaaa            12345
0                      cccccccccc            12345
1                      bbbbbbbbbb            22222
1                      bbbbbbbbbb            22222
0                      dddddddddd            33333
0                      cccccccccc            99999 
```

总而言之：我需要 BaseForAlternatingValue 列的交替值，但是在按邮政编码排序时，这种交替应该是可见的。（并且 BaseForAlternatingValue 中的重复项需要相同的“交替”值）

## ----------------

最后我找到了一个更简单且相对不错的解决方案：1）使用带有插入和排序的临时表并使用id值（id值将反映order by子句）2）找出给定BaseForAlternatingValue的最小id 3) 找出 id 小于的不同 BaseForAlternatingValues 的计数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:59:22.650

尝试`ROW_NUMBER`用作`DENSE_RANK`. `DENSE_RANK`会给多行相同的值，它们在排名中并列 -`ROW_NUMBER`不会。

[`DENSE_RANK`](http://msdn.microsoft.com/en-us/library/ms173825.aspx)参考 [`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)参考

**编辑**

这很丑陋，但似乎产生了正确的结果。第一个 CTE 确定行的输出顺序并计算“交替值”。
第二个确定`BaseForAlternatingValue`输出结果集中每个实例的第一个实例。
输出查询以正确的顺序返回行，每个行的第一个“交替值”`BaseForAlternatingValue`

```
;WITH cte
AS
(
SELECT BaseForAlternatingValue, zip, 
       ROW_NUMBER() OVER (ORDER BY zip,BaseForAlternatingValue)AS rn,
       DENSE_RANK() OVER (ORDER BY zip,BaseForAlternatingValue) % 2 AS av
FROM [xy.TestTable]
)
,rnCTE
AS
(
SELECT *, 
       ROW_NUMBER() OVER (PARTITION BY BaseForAlternatingValue ORDER BY rn) AS rn2
FROM cte
)
SELECT rn.av AS AlternatingValue, 
       r.BaseForAlternatingValue, r.zip
FROM cte r
JOIN rnCTE rn
ON rn.BaseForAlternatingValue = r.BaseForAlternatingValue
AND rn.rn2 =1
ORDER BY zip, BaseForAlternatingValue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-13T15:37:03.397

我知道现在这无关紧要，因为这个问题早已得到解决。

您可以使用单个 cte 和连接来执行此操作：

```
with mins as (
    select min(zip) min_zip,
        BaseForAlternatingValue
    from xy.TestTable
    group by BaseForAlternatingValue
)
select dense_rank() over (order by m.min_zip, t.BaseForAlternatingValue) % 2 AlternatingValue,
    t.BaseForAlternatingValue,
    t.zip
from xy.TestTable t
join mins m on m.BaseForAlternatingValue = t.BaseForAlternatingValue
order by t.zip, t.base; 
```

具有单个 cte 的 SQL Server 2012 的替代解决方案：

```
with mins as (
    select min(zip) over (partition by BaseForAlternatingValue) min_zip,
        BaseForAlternatingValue,
        zip
    from xy.TestTable
)
select dense_rank() over (order by min_zip, BaseForAlternatingValue) % 2 AlternatingValue,
    BaseForAlternatingValue,
    zip
from mins
order by zip; 
```

这个想法是，如果你能保证永远不会有 2 个相同的 base 不同的 zip，你可以先按 zip 排序，然后再按 base 排序。由于您的订购仅取决于每个底座的最小 zip，因此您可以使用`min()`- 或在 2012`min() over (partition by)`年删除`join`.

# c# - 用于查找特殊数字的正则表达式

> ID：11556126
> 
> 赞同：0
> 
> 时间：2012-07-19T07:45:21.643
> 
> 标签：c#, regex

我需要帮助来编写正则表达式来捕获以下情况：

`number*number`喜欢`1242*1242`或`333*333`。两边`*`是相同的数字，但它们可以有不同的长度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T07:56:35.207

这将解决 Ofer 的答案：

```
\b(\d+)\*\1\b 
```

说明：

```
\b - word boundary
( - start capturing group
\d+ - digits (one or more)
) - stop capturing group
\* - literal *
\1 - matches exactly what is captured by group 1
\b - word boundary 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:49:17.930

这里是：

`(\d+)\*\1`

它保证右侧与左侧相同。

**编辑**

为了确保没有误报（尽管如果编程正确，我会争辩这是否应该是一个问题）使用这个版本（与尤金的略有不同，更优雅一点）：

`\b(\d+)\*\1\b`

# jquery - 如何创建简单的图像滑块/手风琴？

> ID：11556127
> 
> 赞同：0
> 
> 时间：2012-07-19T07:45:22.123
> 
> 标签：jquery, image, slider, jquery-animate, accordion

在wordpress页面中有一个垂直图像插件..

我想要一个如下所示的网页：

![在此处输入图像描述](../Images/280765ac60f064475b565dfc4e6c1fb2.png)

在这有一个主面板**产品**。其中有手风琴的图像..

只有 10% 的图像是可见的..but onclick of the **image1**它应该扩展 100%，如下所示：

![在此处输入图像描述](../Images/c14b8130504b09cbd7d7882fa0de0010.png)

最重要的是..这些图像用户应该能够放入**WP 页面**

[静态它](http://tympanus.net/codrops/2011/07/22/vertical-sliding-accordion/)可能..如图所示

但我希望它在页面中进行编辑或..其他方式..可能在一个文件夹中..

可能吗？有没有可以帮助我的插件？或者如果我需要为此编码，那么任何人都可以给我关于相同的想法......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:16:07.930

这是您的简单 jQuery 滑块/手风琴：

[您可以从这里检查（jsfiddle）。](http://jsfiddle.net/mjaA3/14/)

jQuery：

```
$('div').bind({
  click: function() {
    $('div').stop().animate({'height':'100px'},600);//600 sets time. 600miliseconds
    $(this).stop().animate({'height':'320px'},600);
  },
  /* if you want to do it with hover effects, just deactive click and use these:
  mouseenter: function() {
    $('div').stop().animate({'height':'100px'},600);//600 sets time. 600miliseconds
    $(this).stop().animate({'height':'320px'},600);
  },
  mouseleave: function() {
    $('div').stop().animate({'height':'100px'},600);
  }
  */
});​ 
```

html:

```
<div>
   <img src="http://www.hurriyet.com.tr/_np/7181/17287181.jpg" />
</div>
<div>
   <img src="http://www.hurriyet.com.tr/_np/2790/17282790.jpg" />
</div>
<div>
   <img src="http://www.hurriyet.com.tr/_np/6751/17286751.jpg" />
</div>
<div>
   <img src="http://www.hurriyet.com.tr/_np/7203/17287203.jpg" />
</div> 
```

CSS：

```
div { overflow:hidden; float:left; height:100px; margin:0 5px; border-bottom: 1px solid #000; }  ​ 
```

注意：你可以在任何东西上使用它，只需要初始化 jQuery (:

# objective-c - 具有 ARC 和非 ARC 的项目中的单例函数？

> ID：11556128
> 
> 赞同：0
> 
> 时间：2012-07-19T07:45:23.027
> 
> 标签：objective-c, cocoa-touch, memory-management

我正在做一个非 ARC 的项目。该项目有一个像全局函数类一样使用的单例类。

一切正常。除了以下问题：

*   添加了一个带有 ARC 的类
*   当从基于ARC的类访问单例类时，它第一次工作
*   可能它正在释放单例类，并且对单例类的进一步调用使应用程序崩溃，并显示消息“消息发送到解除分配的实例”

我可以想象启用 ARC 的类有点释放单例对象。

我该如何克服呢？

编辑：单例类初始化器 GlobalFunctions.m

```
#import "GlobalFunctions.h"
#import <CoreData/CoreData.h>
#import "UIImage+Tint.h"
#import "Reachability.h"
#if !TARGET_IPHONE_SIMULATOR
    #define Type @"Device"
#else
    #define Type @"Simulator"
#endif

@implementation GlobalFunctions

#pragma mark {Synthesize}
@synthesize firstLaunch=_firstLaunch;
@synthesize context = _context;

#pragma mark {Initializer}
static GlobalFunctions *sharedGlobalFunctions=nil;

- (UIColor *)UIColorFromRGB:(NSInteger)red:(NSInteger)green:(NSInteger) blue {
    CGFloat nRed=red/255.0; 
    CGFloat nBlue=green/255.0;
    CGFloat nGreen=blue/255.0;    
    return [[[UIColor alloc]initWithRed:nRed green:nBlue blue:nGreen alpha:1] autorelease];
}

#pragma mark {Class Intialization}
+(GlobalFunctions *)sharedGlobalFunctions{
    if(sharedGlobalFunctions==nil){
       // sharedGlobalFunctions=[[super allocWithZone:NULL] init];
        sharedGlobalFunctions=[[GlobalFunctions alloc] init]; //Stack Overflow recommendation, does'nt work
        // Custom initialization
        /* 
         Variable Initialization and checks
        */
        sharedGlobalFunctions.firstLaunch=@"YES";   
        id appDelegate=(id)[[UIApplication sharedApplication] delegate];        
        sharedGlobalFunctions.context=[appDelegate managedObjectContext];
    }
    return sharedGlobalFunctions;
}

-(id)copyWithZone:(NSZone *)zone{
    return self;
}
-(id)retain{
    return self;
}
-(NSUInteger) retainCount{
    return NSUIntegerMax;
}
-(void) dealloc{
    [super dealloc];
    [_context release];
}
@end 
```

全局函数.h

```
#import <Foundation/Foundation.h>

@interface GlobalFunctions : NSObject<UIApplicationDelegate>{
    NSString *firstLaunch;

}

+(GlobalFunctions *)sharedGlobalFunctions; //Shared Object 
#pragma mark {Function Declarations}
-(UIColor *)UIColorFromRGB:(NSInteger)red:(NSInteger)green:(NSInteger) blue; // Convert color to RGB

#pragma mark {Database Objects}
@property (nonatomic,retain) NSManagedObjectContext *context;

@end 
```

编辑：

尝试按照 Anshu 的建议使用 [[GlobalFunctions alloc] init]。但是应用程序仍然崩溃并显示“发送到已释放实例”的消息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T16:28:39.687

首先，删除`copyWithZone:`,`retain`和`retainCount`方法；它们在单例中毫无用处。

其次，这种`dealloc`方法是错误的； `[super dealloc]` *必须始终是最后一个语句*。

问题是你的单身人士本身；你覆盖`retain`什么都不做，但不要覆盖`release`. ARC'd 类可能会`retain`在作用域的开头和`release`结尾调用。由于单例`release`实际上仍会减少保留计数，因此单例将被释放。

删除上面提到的各种方法，它应该可以工作。

请注意，`GlobalFunctions`不应将您的类声明为正在实现`<UIApplicationDelegate>`，因为它不是应用程序的委托。此外，有两种获取相同托管对象上下文的方法很奇怪（但不是致命的）。

# javascript - 包含函数的 JSON

> ID：11556131
> 
> 赞同：4
> 
> 时间：2012-07-19T07:45:44.737
> 
> 标签：javascript, ajax, json, function

我有一个网站，它返回类似 JSON 的数据结构，如下所示：

```
{
    "name":"tom jones",
    "no": 123,
     "storedproc": function(){
                      callbuyer(0123);
                    }
} 
```

我正在使用`$.ajax()`数据类型“JSON”获取这些数据。不幸的是，我`$.ajax()`调用了错误回调，因为我的数据包含一个函数（）。我怎样才能正确解析这个？我真的需要将函数存储在一个变量中，然后再调用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T07:52:25.693

这根本**不是**合法的 JSON（正如你所知道的问题的标题）[请参阅官方 JSON 语法](http://json.org)。真正的 JSON 的好处是可以使用`JSON.parse`它来安全地包装`eval`调用。

虽然`eval`可以使用，但我建议重新审视您的应用程序的架构并找到其他方法来做您想做的事情。

特别是，我会让服务器返回`0123`唯一的，并让您的客户端保留让它知道在某些情况下应用哪些函数的逻辑（在此处的场景中，该函数将是`callbuyer`）。

这应该有效，因为您说您要调用后者的值的函数`storedproc`。由于此函数的主体包含对其的调用，`callbuyer`因此您的客户端脚本知道它是什么`callbuyer`。诀窍是让你的服务器不要发回任意的、不受约束的函数，而是你的客户端可以利用它对整个应用程序的了解以某种方式利用的数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T07:58:04.507

你能安排让服务器像这样返回 JSON：

```
{"name":"tom jones",
  "no": 123,
 "storeprocFn": callbuyer,
 "arg": "0123"}; 
```

然后你的回调函数可以调用该`callbuyer`函数并通过`arg`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T08:04:17.643

AFAIK，函数在使用时被忽略了`JSON.stringify`，它只是不打算用于克隆完整的对象（道具和方法）。但是，您也许可以将函数体作为字符串传递。
假设您决定使用字符串格式，例如`func=>var foo = 'bar'; return foo;`. 这应该作为常规 JSON 字符串传递，在解析对象之后，您可以迭代所有属性，并将这些字符串转换为如下函数：

```
for (var prop in parsedObj)
{
    if (parsedObj.hasOwnProperty(prop) && parsedObj[prop].match(/^func\=\>/))
    {
        parsedObj[prop] = new Function(parsedObj[prop].replace('func=>',''));
    }
} 
```

不过，说真的，我想说您可能想重新考虑您的方法，但这不是 JSON 的用途。这是不安全的，在确保它们不包含有害代码之后，所有 JSON 字符串都经过评估。这种方法正在创造一个漏洞/漏洞，JSON 人们努力封堵。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T07:48:28.593

使用[eval](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/eval)将字符串解释为 javascript 对象。但是，您将无法使用 JSON 数据类型。我相信您需要做的是使用“文本”作为 $.ajax 调用的数据类型。然后执行以下操作：

```
var data = eval('(' + text + ')'); 
```

应该管用。当然，eval 是邪恶的。但它会解决你的问题。只要您可以保证文本中没有任何恶意内容（没有未经处理的用户输入数据），那么您应该没问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-18T18:31:26.310

在 JSON 扩展之后，“JFON”会传输函数和数组属性。
JFON 使用 eval 并适用于以下情况：

1）您的数据来自受信任的来源（例如不是来自用户输入或来自您自己的服务器的代码），并且
2）您知道“eval”上下文没有不良副作用
（它是 eval 的上下文在函数“fromJFON”中，第 127 行）
3）重构您的应用程序以使用“无功能”JSON 的成本很高；
4) JFON 是一天的工作，所以可能需要更多的测试；

想法：使用选定的属性名称来逃避函数和数组，例如
在选定字符“ \”时在字符串中进行\ n和\本身。

在 JFON 中，选择名称 "wrap" 来传递函数及其本身： "wrap" : { "fun" : ... 和 "wrap" : { "esc" : ...

演示： http: [//landkey.org/Sandbox/z/spaceen86/js/btb/tests/jfon.htm](http://landkey.org/Sandbox/z/spaceen86/js/btb/tests/jfon.htm)

代码（使用提交 0.0.86）：
[https](https://github.com/lancelab/spaceen/blob/master/js/btb/JFON.js)
://github.com/lancelab/spaceen/blob/master/js/btb/JFON.js 测试：github.com/lancelab/spaceen/blob/master/js/btb/测试/jfon.htm

这是另一个“JWON”扩展：JSON-comments、here-documents、monkey-patching of JSON：
github.com/lancelab/Boardspirator/blob/master/diary/play/tp/jwon.js

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T07:58:45.553

对于您的示例，这将起作用：'user.storeproc = function() { callbuyer(user.no);};'

Var 'user' 是解析后的 json 的对象。

ps：可能你要格式化user.no，从123到0123

# c - 在哪里放置用于从共享内存段读取和写入的信号量？

> ID：11556132
> 
> 赞同：2
> 
> 时间：2012-07-19T07:45:44.800
> 
> 标签：c, linux, pipe, shared-memory

我已经实现了一个`pipe()`基于**共享内存**模拟系统调用的库。

现在，当我**不**使用任何代码`fork()`（例如，不调用任何子进程）时，代码可以正常工作。

我的库需要**使用任何给定** `int main()`的程序，所以这里的基本问题是信号量的修改应该在库中进行，而不是在`main`程序中进行。

图书馆 ：

这是图书馆：

```
static int flag = FALSE;
static int mutex_init = 0;
static pthread_mutex_t lock;

#define BUFFER 4096
int my_new_finish()
{
    return 1;  // always successful
}

void error_out(const char *msg)
{
    perror(msg);
    exit(EXIT_FAILURE);
} 
```

现在，当我不使用`main`调用程序时，这个库可以正常工作`fork()`。

但是，当我使用时`fork()`，所有的地狱刹车都松了。

例如 ：

```
#include <stdio.h>
#include <stdlib.h>
int main()

{
    int spd, pid, rb;
    char buff[4096];
    my_new_init();

    if (my_new_fifo("tmp_shm_pipe",0666) < 0)
    {
        perror("my_new_fifo");
        exit(1);
    }

    if (fork()) 
    {
        spd = my_new_open("tmp_shm_pipe", O_RDONLY, 0600);
        if (spd < 0)
        {
            perror("PARENT: my_new_open");
            exit(1);
        }
        rb = my_new_read(spd, buff, sizeof(buff));
        if (rb > 0)
            write(1, buff, rb);
    }

    else
    {
        spd = my_new_open("tmp_shm_pipe", O_WRONLY, 0600);
        if (spd < 0)
        {
            perror("SON: my_new_open");
            exit(1);
        }
        my_new_write(spd, "hello world!\n", sizeof("hello world!\n"));
    }

    my_new_close(spd);
    my_new_un_link("tmp_shm_pipe");
    my_new_finish();

    return 0;
} 
```

我的问题是：

1.  如何在上述库中使用信号量，而我不“知道”`main()`我将获得的程序？

2.  我试图将信号量放入库中（而不是`main()`程序中），但效果不佳。你能解释一下我怎样才能正确地做到这一点吗？

**评论 ：**

1.  请注意，这`main`只是一个例子，我可以得到无数其他`main`程序。

2.  这是作业

非常感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:04:45.113

好的，我会尽力而为，因为我不知道您对整个概念有多熟悉。

1）信号量最“正确”的地方是在读写函数中。要同步内存段上的进程，您还必须将信号量放在共享内存中。（为了使所有进程都可以访问它们）

[http://pdfcast.org/download/semaphores-sharedmem.pdf](http://pdfcast.org/download/semaphores-sharedmem.pdf)

这是一个 pdf，带有一个很好的英文注释代码示例，用于创建、使用和销毁信号量，并带有一个示例 main。它的标题是德文的，但里面没有其他不是 C 或英文的。

我希望它对您的技能有所帮助并且不会太“低级”^^

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T08:19:52.403

在您的函数`my_new_init`中，您需要在共享内存中创建一个共享信号机 - 但在它周围有一个保护，以便它只被调用一次；这个守卫通常使用模块静态（或类静态）变量在库模块内。

```
sem_t *my_semaphone;
static int init = 0;

int my_new_init()
{
    if (!init)
    {
        my_semaphone = mmap(NULL, sizeof *my_semaphone, PROT_READ | PROT_WRITE, MAP_SHARED | MAP_ANONYMOUS, -1, 0);
        if (!sem_init(my_semaphone, 1, 1))
        {
            init = TRUE;
        }
        else
            perror("Sem_init");
    }
    return 1; // always successful
} 
```

然后在顶部的 my_new_read 中：

```
ssize_t my_new_read(int spd, void *buf, size_t count)
{
    char array[4096];
    memset(array, '\0', 4096);
    ssize_t returnVal = 0;

    sem_wait(my_semaphone); 
```

并在 my_new_write 在你写了一些东西之后释放信号机。

```
 sem_post(my_semaphone);
    return returnVal; 
```

以上可能需要改进，因为 sem_wait 可能会在数据准备好之前返回，因此在共享内存段的开头使用控制结构可能是明智的。

# iphone - 在 Objective-C 中，如何从类别访问私有属性

> ID：11556134
> 
> 赞同：16
> 
> 时间：2012-07-19T07:45:49.730
> 
> 标签：iphone, objective-c, ios

我想从其类别中访问一个类的私有属性。

但是要访问私有财产，我必须在类别中重新声明相同的私有财产。
如果我不重新声明，我会收到一个编译错误，`Property '<property name>' not found on object of type '<class name> *'`.

这是从类别访问类私有属性的正确方法吗？
有没有更好的方法来做到这一点？

以下代码是在类别中重新声明私有属性的代码：

类A.h

```
@interface ClassA : NSObject
-(void)method1;
@end 
```

类A.m

```
#import "ClassA.h"

// private property
@interface ClassA()
@property (nonatomic) NSString *s;
@end

@implementation ClassA
@synthesize s;

-(void)method1
{
    self.s = @"a";
    NSLog(@"%@", [NSString stringWithFormat:@"%@ - method1", self.s]);
}
@end 
```

ClassA+Category.h

```
#import "ClassA.h"

@interface ClassA(Category)
-(void)method2;
@end 
```

ClassA+Category.m

```
#import "ClassA+Category.h"

// redeclare private property
@interface ClassA()
@property(nonatomic) NSString *s;
@end

@implementation ClassA(Category)

-(void)method2
{
    NSLog(@"%@", [NSString stringWithFormat:@"%@ - method2", self.s]);
}
@end 
```

是为私有财产创建文件（ClassA+Private.m）并从 ClassA.m 和 ClassA+Category.m 导入它的好方法：

ClassA+Private.m

```
@interface ClassA()
@property(nonatomic) NSString *s;
@end 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T09:09:43.233

解决此问题的最佳方法是在和中创建`ClassA+Private.h`和导入它。注意最后，你只需要在那里声明你的私有属性和方法，定义最好保存在.`ClassA.m``Category.m``h``ClassA.m`

# iphone - 如何更改目标c占位符的颜色

> ID：11556138
> 
> 赞同：1
> 
> 时间：2012-07-19T07:46:03.407
> 
> 标签：iphone

我想更改目标 c 中的 UItextfield 占位符颜色，但我的类是 uiviewcontroller 的子类。我可以继承 uiviewcontroller 和 uitextfield 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:54:06.457

**Swift 4.0 及以上**

```
let text = textField.placeholder ?? ""
self.attributedPlaceholder = NSAttributedString(string: text, attributes: [NSAttributedString.Key.foregroundColor: UIColor.red]) 
```

**Objective-C**

```
NSString *text = textField.text;
if (!text) {
    text = @"";
}
textField.attributedPlaceholder = [[NSAttributedString alloc] initWithString:text attributes:@{NSForegroundColorAttributeName: [UIColor redColor]}]; 
```

**旧的 Objective-C 代码**

```
[self.textfield setValue:[UIColor darkGrayColor] forKeyPath:@"_placeholderLabel.textColor”]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T06:34:41.670

您可以使用以下代码

```
[yourtextfield setValue:[UIColor colorWithRed:120.0/255.0 green:116.0/255.0 blue:115.0/255.0 alpha:1.0] forKeyPath:@"_placeholderLabel.textColor"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:03:03.617

您需要继承 UITextField 并覆盖该`drawPlaceholderInRect` 方法

看这个[问题](https://stackoverflow.com/questions/1340224/iphone-uitextfield-change-placeholder-text-color)

# javascript - XMLHttpRequest.send() 在请求 DOM 对象时抛出异常

> ID：11556139
> 
> 赞同：1
> 
> 时间：2012-07-19T07:46:12.027
> 
> 标签：javascript, firefox, xmlhttprequest, greasemonkey

我想`document`在 Firefox/Greasemonkey 用户脚本中检索 HTML 页面。

**编辑：**这*不是*跨域请求。

这是我的示例代码：

```
var r = new XMLHttpRequest();
r.open("GET", document.location.href, true);
r.responseType = "document";
r.send(null); 
```

这看起来就像[https://developer.mozilla.org/en/HTML_in_XMLHttpRequest](https://developer.mozilla.org/en/HTML_in_XMLHttpRequest)中的示例，但`r.send(null)`会导致`TypeError`. 原因，而不是抛出！将行包装在 a`try...catch`不会改变任何东西，似乎回调或事件处理程序引发了异常：

```
TypeError: document.location is null 
```

回溯指的是 Firefox 内部`event.js`文件，但不是我的脚本。

删除设置`responseType`摆脱异常的行，添加回调不会。但是，响应是有效的并`responseXML`提供了一个 DOM 树。我正在使用 FF 13.0.1。

我错过了什么还是这是一个错误？

**解决方案：**这与 Mozilla 的 Addon Builder 创建的扩展有关，而不是 Firefox。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:32:28.387

~~脚本正在运行`google.com`，您正在尝试 fetch `google.de`，对吗？这是一个跨域请求。~~ （此外，问题代码不是有效的同步或异步使用`XMLHttpRequest`。）

要在 Greasemonkey 脚本（或 Chrome）中执行跨域（或不跨域）AJAX，请使用[`GM_xmlhttpRequest()`](http://wiki.greasespot.net/GM_xmlhttpRequest).
请注意，`GM_xmlhttpRequest()`目前不允许您指定`responseType`，但无论如何在这种情况下您都不需要这样做。如果您想要一个很好的解析文档，请使用`DOMParser`.

把它们放在一起：

```
GM_xmlhttpRequest ( {
    method:     'GET',
    //url:        'https://www.google.de/',
    url:        location.href,  // self get, checking for updates
    onload:     function (respDetails) {
                    processResponse (respDetails);
                }
} );

function processResponse (respDetails) {
    // DO ALL RESPONSE PROCESSING HERE...
    var parser  = new DOMParser ();
    var doc     = parser.parseFromString (respDetails.responseText, "text/html");

    //--- Example showing that the doc is fully parsed/functional...
    console.log (doc.querySelectorAll ("p") );
} 
```

* * *

* * *

**PS：** 由于这毕竟不是跨域的，因此*更正*后的原始代码将是：

```
var r           = new XMLHttpRequest();

r.onload        = function () {
    // DO ALL RESPONSE PROCESSING HERE...
    console.log (this.response.querySelectorAll ("div") );
}
r.open ("GET", location.href, true);
r.responseType  = "document";
r.send (null); 
```

对于异步请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:06:49.900

不幸的是，您不能从一个域到另一个域执行 Ajax：

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

你可以读入CORS：

[http://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

或 JSONP 作为可能的解决方案：

[http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

但是，浏览器的设计方式使得人们不能随意地跨域创建 Ajax 请求，因为这是一个安全问题。

如果您绝对需要从不同的域中获取内容，我会考虑使用[cURL](http://en.wikipedia.org/wiki/CURL)创建您自己的服务器 API ，在同一个域上提供您自己的内容，然后在那里使用 Ajax。否则，您将不得不查看 Google 是否会授予 CORS 访问权限或具有某种内置的 JSONP 请求。

# django - 使用 RadioSelect 小部件自定义 Django 表单

> ID：11556143
> 
> 赞同：8
> 
> 时间：2012-07-19T07:46:58.877
> 
> 标签：django, django-forms, django-templates

所以我使用 jQuery UI 来[为单选按钮设置皮肤，](http://jqueryui.com/demos/button/#radio)但我无法让 Django 以必须完成的方式呈现我的表单。

我需要有这样的结构：

```
<table>
    <tr>
        <td><label for="notify_new_friends">Notify when new friends join</label></td>
        <td class="radio">
            <input type="radio" name="notify_new_friends" id="notify_new_friends_immediately" value="1" checked="checked"/><label for="notify_new_friends_immediately">Immediately</label>
            <input type="radio" name="notify_new_friends" id="notify_new_friends_never" value="0"/><label for="notify_new_friends_never">Never</label>
        </td>
    </tr>
</table> 
```

所以总结一下，我需要一个类（单选）中的单选按钮，它们有一个`input`和一个`label for`。

当我在模板中呈现表单时，`{{ profile_form.notify_new_friends }}`我得到以下信息：

```
<ul>
    <li><label for="id_notify_new_friends_0"><input type="radio" id="id_notify_new_friends_0" value="0" name="notify_new_friends" /> Immediately</label></li>
    <li><label for="id_notify_new_friends_1"><input type="radio" id="id_notify_new_friends_1" value="1" name="notify_new_friends" /> Never</label></li>
</ul> 
```

这正是我想要的，除了列表部分。所以我尝试循环它，这给了我不同格式的标签：

```
{% for item in profile_form.notify_new_friends %}
    {{ item }}
{% endfor %} 
```

这给了我：

```
<label><input type="radio" name="notify_new_friends" value="0" /> Immediately</label>
<label><input type="radio" name="notify_new_friends" value="1" /> Never</label> 
```

所以这里的问题是它停止使用`label for`并开始使用只是`label`为了包装它。

我也尝试过做这样的事情，但是然后`label`并`label_tag`没有渲染任何东西。

```
{{ profile_form.notify_new_friends.0 }}
{{ profile_form.notify_new_friends.0.label_tag }}
{{ profile_form.notify_new_friends.0.label }} 
```

*那么有谁知道我怎样才能正确渲染这个！？*

仅供参考，这是我的 forms.py：

```
self.fields['notify_new_friends'] = forms.ChoiceField(label='Notify when new friends join', widget=forms.RadioSelect, choices=NOTIFICATION_CHOICES) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T11:39:46.007

在我的代码中，我发现将小部件从

```
forms.RadioSelect 
```

到

```
forms.RadioSelect(attrs={'id': 'value'}) 
```

神奇地导致结果`tag`值包含`id`附加项目索引的属性。如果你使用

```
{% for radio in form.foo %}
    <li>
        {{ radio }}
    </li>
{% endfor %} 
```

在表单中，您会得到`label`一个`input`. 如果你想要更常规的`input`后跟`label`，你需要这样做：

```
{% for radio in form.value %}
    <li>
        {{ radio.tag }}
        <label for="value_{{ forloop.counter0 }}">{{ radio.choice_label }}</label>
    </li>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T14:42:18.970

不幸的是，这比应该的要复杂，看来您至少需要覆盖 2 个类：`RadioRenderer`和`RadioInput`. 以下内容应该可以帮助您入门，但您可能需要稍微调整一下。

首先创建一个自定义单选按钮输入小部件。我们重写 render 方法的唯一目的是摆脱烦人的结构 Django 强制执行 ( `<label><input /></label>`) 而我们想要我们的 ( `<label /><input />`)：

```
class CustomRadioInput(RadioInput):
    def render(self, name=None, value=None, attrs=None, choices=()):
        name = name or self.name
        value = value or self.value
        attrs = attrs or self.attrs
        if 'id' in self.attrs:
            label_for = ' for="%s_%s"' % (self.attrs['id'], self.index)
        else:
            label_for = ''
            choice_label = conditional_escape(force_unicode(self.choice_label))
            return mark_safe(u'%s<label%s>%s</label>' % (self.tag(), label_for, choice_label)) 
```

现在我们需要重写`RadioRenderer`以便：

1.  强制它使用我们的自定义无线电输入小部件
2.  删除`<li>`包装每个输入字段并`<ul>`包装所有输入字段：

这些方面应该做的事情：

```
class RadioCustomRenderer(RadioFieldRenderer):
    def __iter__(self):
        for i, choice in enumerate(self.choices):
            yield CustomRadioInput(self.name, self.value, self.attrs.copy(), choice, i)

    def __getitem__(self, idx):
        choice = self.choices[idx]
        return CustomRadioInput(self.name, self.value, self.attrs.copy(), choice, idx)

    def render(self):
        return mark_safe(u'%s' % u'\n'.join([u'%s' % force_unicode(w) for w in self])) 
```

最后指示 Django 使用自定义渲染器

```
notify_new_friends = forms.ChoiceField(label='Notify when new friends join', widget=forms.RadioSelect(renderer=RadioCustomRenderer), choices=NOTIFICATION_CHOICES) 
```

**请记住：**现在这会输出单选按钮和包含，`<td>`因此您需要在模板中围绕它构建一个表格，如下所示：

```
<table>
  <tr>
    <td><label for="{{field.auto_id}}">{{field.label}}</label></td>
    <td>{{ field.errors }} {{field}}</td>
  </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-17T13:13:25.957

如果有人偶然发现这个问题并且只想在没有 ul 的情况下呈现单选按钮：他们应该点击这个链接。

[https://docs.djangoproject.com/en/3.1/ref/forms/widgets/#selector-widgets](https://docs.djangoproject.com/en/3.1/ref/forms/widgets/#selector-widgets)

下面的例子。

```
{% for radio in myform.beatles %}
    <div class="myradio">
    {{ radio }}
    </div>
{% endfor %} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T10:09:28.467

由于这似乎不是一个好方法，我选择使用 jQuery 重新排列生成的代码。

```
// First remove the ul and li tags
$('.radio ul').contents().unwrap();
$('.radio li').contents().unwrap();
// Then move the input to outside of the label
$('.radio > label > input').each(function() {
    $(this).parent().before(this);
});
// Then apply the jQuery UI buttonset
$( ".radio" ).buttonset(); 
```

这使它从：

```
<ul>
    <li><label for="id_notify_new_friends_0"><input type="radio" id="id_notify_new_friends_0" value="0" name="notify_new_friends" /> Immediately</label></li>
    <li><label for="id_notify_new_friends_1"><input type="radio" id="id_notify_new_friends_1" value="1" name="notify_new_friends" /> Never</label></li>
</ul> 
```

到：

```
<input type="radio" id="id_notify_new_friends_0" value="0" name="notify_new_friends" /><label for="id_notify_new_friends_0"> Immediately</label></li>
<input type="radio" id="id_notify_new_friends_1" value="1" name="notify_new_friends" /><label for="id_notify_new_friends_1"> Never</label></li> 
```

我的 jQuery UI 样式工作正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T07:14:15.093

```
Try like this ,  I got it..

from django.forms.widgets import RadioFieldRenderer
from django.utils.encoding import force_unicode
from django.utils.safestring import mark_safe

class RadioCustomRenderer( RadioFieldRenderer ):
    def render( self ):
        return  mark_safe(u'%s' % u'\n'.join([u'%s'  % force_unicode(w) for w in self]))

in form

widgets = {
            'validity': forms.RadioSelect(renderer=RadioCustomRenderer),
        } 
```

# c++ - 如何使用 STL 获取中位数的索引？

> ID：11556151
> 
> 赞同：2
> 
> 时间：2012-07-19T07:47:21.947
> 
> 标签：c++, stl

前面已经讨论过如何计算数字数组的中位数。例如，您可以参考[使用 STL 容器进行中位数计算时的正确做法是什么？](https://stackoverflow.com/questions/1719070/what-is-the-right-approach-when-using-stl-container-for-median-calculation?lq=1). 现在我有一个不同的问题，那就是如何在原始 STL 容器中获取中位数的索引。为了说明我的问题，我举一个例子：

```
vector<int> myarray;
myarray.push_back(3);
myarray.push_back(1);
myarray.push_back(100);
myarray.push_back( 20);
myarray.push_back(200);
int n = myarray.size()/2;
nth_element(myarray.begin(), myarray.begin()+n, myarray.end());
int median = myarray[n]; 
```

在上面的代码中，我可以获得中值，但无法在原始向量数组 (4) 中获得它的索引。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T08:16:38.223

我认为没有直接的方法可以做到这一点。

您排序的向量已更改其顺序，因此在其中搜索将始终返回`n`。

您需要保存原始矢量的副本，然后在其中进行搜索。请记住，如果原始向量包含重复项，您将无法确切知道其中哪些实际上被放置在位置 n（如果这对您有任何相关性）。

作为替代方案，您可以查看 nth_element 的实现，并实现您自己的版本，该版本还报告找到的第 n 个元素的原始位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T07:53:12.570

如果可以搜索元素

```
vector<int>::iterator itOfMedian = std::find(myarray.begin(), myarray.end(), median);
int index = itOfMedian - myarray.begin(); 
```

应该做的伎俩。

编辑

看来你有道理。[nth_element](http://en.cppreference.com/w/cpp/algorithm/nth_element)对其参数向量进行排序...因此

```
vector<int> myArrayCopy = myarray;
// find median in myArrayCopy
vector<int>::iterator itOfMedian = std::find(myarray.begin(), myarray.end(), median);
int index = itOfMedian - myarray.begin(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T07:56:40.997

您可以使用[std::nth_element](http://en.cppreference.com/w/cpp/algorithm/nth_element)查找中值元素的迭代器。但是，这会对向量进行部分排序，因此您需要使用副本：

```
 std::vector<int> dataCopy = myarray;
  // we will use iterator middle later
  std::vector<int>::iterator middle = dataCopy.begin() + (dataCopy.size() / 2);
  // this sets iterator middle to the median element
  std::nth_element(dataCopy.begin(), middle, dataCopy.end());
  int nthValue = *middle; 
```

现在它变得复杂了。您有一个对应于中位数的值。您可以搜索它的原始向量，并使用[std::distance](http://en.cppreference.com/w/cpp/iterator/distance)来获取索引：

```
std::vector<int>::iterator it = std::find(myarray.begin(), myarray.end(), nthValue);
std::vector<int>::size_type pos = std::distance(myarray.begin(), it); 
```

`nthValue`但是，这仅在 in没有重复项的情况下才有效`myarray`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-09T05:11:09.087

很抱歉挖掘了一个老话题，但这是一个很好的方法。`nth_element`利用将按第一个元素对一对进行排序的事实；考虑到这一点，创建一个对的向量，其中对的第一部分是参与中位数计算的值，第二部分是索引。修改您的示例：

```
vector<pair<unsigned int, size_t>> myarray;
myarray.push_back(pair<unsigned int, size_t>(  3, 0));
myarray.push_back(pair<unsigned int, size_t>(  1, 1));
myarray.push_back(pair<unsigned int, size_t>(100, 2));
myarray.push_back(pair<unsigned int, size_t>( 20, 3));
myarray.push_back(pair<unsigned int, size_t>(200, 4));

int n = myarray.size()/2;
nth_element(myarray.begin(), myarray.begin()+n, myarray.end());

int median = myarray[n].first;
int medianindex = myarray[n].second; 
```

当然`myarray`已经重新排列，所以`myarray[medianindex]`不是中位数。如果您之前制作了副本`nth_element`，`medianindex`则将是所需的索引。

# gcc - Qt 创建者（cmake）如何将“未使用的参数”错误更改为警告？

> ID：11556153
> 
> 赞同：1
> 
> 时间：2012-07-19T07:47:34.940
> 
> 标签：gcc, compiler-errors, cmake, warnings, gcc-warning

是否可以更改 Qt 创建者中的错误（我假设这可以在`CMakeLists.txt`文件中完成）：

> /home/USER/programming/cpp_yahtzee/game.cpp:11：错误：未使用的参数“newPlayersName”[-Werror=unused-parameter]

变成警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:47:30.170

所以实际上这是`-Werror`我的 gcc 标志的问题，`CMakeLists.txt`它将所有警告转换为错误。

# c# - 访问 xml 节点时出错

> ID：11556157
> 
> 赞同：0
> 
> 时间：2012-07-19T07:48:03.663
> 
> 标签：c#, xml, linq

我有一个xml如下

```
<Students xmlns="http://AdapterTest">
<Schema name="Schema1" xmlns="urn:schemas-microsoft-com:xml-data" xmlns:dt="urn:schemas-microsoft-com:datatypes">
    <ElementType name="Student" content="empty" model="closed">
        <AttributeType name="Student_id" dt:type="string"/>
        <AttributeType name="Student_Name" dt:type="string"/>
        <attribute type="Student_id"/>
        <attribute type="Student_Name"/>
    </ElementType>
</Schema>
<Student Student_id="123456" Student_Name="Udaya" xmlns="x-schema:#Schema1"/>
<Student Student_id="568923" Student_Name="Christie" xmlns="x-schema:#Schema1"/>
<Student Student_id="741852" Student_Name="Test Name" xmlns="x-schema:#Schema1"/>
<Student Student_id="852789" Student_Name="Sample Name" xmlns="x-schema:#Schema1"/>
</Students> 
```

在我的应用程序中，我尝试使用 LINQ 访问节点，如下所示。

```
XDocument xdoc1 = XDocument.Load("Customer.xml");

        List<Student> studentList =
            (from _student in xdoc1.Element("Students").Elements("Student")
             select new Student
             {
                 firstName = _student.Attribute("Student_id").Value,
                 lastName = _student.Attribute("Student_Name").Value,

             }).ToList(); 
```

它给了我一个未设置为对象实例的对象引用。当我从根元素中删除 xmlns="http://AdapterTest" 时，它工作正常。我在这里想念的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:53:30.747

我以前也遇到过类似的问题。就像你说的，如果你从 xml 中删除命名空间，它就可以工作。你必须做这样的事情：

```
XNamespace rootNs = xdoc1.Root.Name.Namespace;
XNamespace studentNS = "x-schema:#Schema1"; 
```

然后在选择节点时在选择器前面加上 ns，例如：

```
var yourStudentList = xdoc1.Element(rootNS + "Student").Elements(studentNS + "Student"); 
```

我没有对此进行测试，但它看起来与我遇到的问题相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:00:58.377

添加命名空间：

```
 XNamespace ns1 = xdoc1.Root.GetDefaultNamespace();
        XNamespace ns2 = "x-schema:#Schema1"; 
```

并在检索元素时使用它们：

```
 List<Student> studentList =
            (from _student in xdoc1.Element(ns1 + "Students")
                                   .Elements(ns2 + "Student")
             select new Student
             {
                 firstName = _student.Attribute("Student_id").Value,
                 lastName = _student.Attribute("Student_Name").Value,
             }).ToList(); 
```

您将获得包含四个元素的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:01:00.980

您需要为 LINQ 定义一个命名空间。

```
XDocument xdoc1 = XDocument.Load("Customer.xml");
XNamespace ns = "http://AdapterTest"; //definine namespace

    List<Student> studentList =
        (from _student in xdoc1.Element(ns + "Students").Elements("Student")
         select new Student
         {
             firstName = _student.Attribute("Student_id").Value,
             lastName = _student.Attribute("Student_Name").Value,

         }).ToList(); 
```

# gwt - 从 Appengine 向 android 发送 gcm push

> ID：11556162
> 
> 赞同：2
> 
> 时间：2012-07-19T07:48:25.367
> 
> 标签：gwt, google-cloud-messaging

我能够从 android 设备注册到 appengine 一旦我向 appengine 注册，我就会在 android 应用程序上获得registrationId。使用registrationId我试图将消息从appengine服务器发送到android应用程序。

```
Sender sender = new Sender(App-Key);
Message message = new Message.Builder().addData("data", "hello client").build();
Result result = sender.send(message, registrationId , 5); 
```

我已将上述代码嵌入到 http post 方法中。

但我收到以下错误：

```
Uncaught exception from servlet
com.google.android.gcm.server.InvalidRequestException: HTTP Status Code: 401
    at com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:177)
    at com.google.android.gcm.server.Sender.send(Sender.java:121)
    at com.google.android.gcm.demo.server.SendAllMessagesServlet.doPost(SendAllMessagesServlet.java:86)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:102)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:249)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:135)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:477)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251) 
```

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:16:26.803

您应该捕获 GCMIntent 服务的 onReceiveMessage 推送意图，并使用推送意图的附加 (getExtras()) 包创建通知。

遵循本指南：http: [//developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:05:23.507

我已通过对代码进行以下更改来解决此问题

对于单个 android 设备：

```
Sender sender = new Sender(App-Key);
Message message = new Message.Builder().build();
Result result = sender.send(message, registrationId , 5); 
```

对于多个安卓设备：

```
Sender sender = new Sender(App-Key);
Message message = new Message.Builder().build();
MulticastResult result = sender.send(message, list of registrationIds , 5); 
```

然而，通知从 appengine 发送到 android 设备，但我仍然想知道如何将消息与通知一起发送到 android 设备。

# magento - Magento - 订单详情未显示在管理面板中

> ID：11556164
> 
> 赞同：3
> 
> 时间：2012-07-19T07:48:29.067
> 
> 标签：magento

我们有一个电子商务 magento 商店。现在，我们遇到了一个奇怪的问题，我无法理解和调试。

对于某些订单，magento admin 的订单详细信息页面中不会显示任何详细信息，尽管邮件已正确发送到客户并抄送至我们的电子邮件 ID。

**管理员订单详细信息页面的屏幕截图：-**

![在此处输入图像描述](../Images/348754aa125ca047d4e91a6814e5f118.png)

**包含订单详情的电子邮件截图：-**

![在此处输入图像描述](../Images/feca46e7bbfc4836e291387bfec5d502.png)

为什么会这样？？我试图检查模式但无法检查。请在这个问题上帮助我，因为我不是 magento 的专业人士，你身边的任何帮助都会为我完成工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-01-26T08:42:19.537

也试试这个，它对我有用（来自[https://magentary.com/kb/php-syntax-error-after-supee-7405-unexpected/](https://magentary.com/kb/php-syntax-error-after-supee-7405-unexpected/)）：

> **问题描述**
> 
> Magento后台SUPEE-7405补丁后销售订单管理界面为空白或者PHP错误日志报如下错误：
> 
> > PHP 解析错误：语法错误，app/code/core/Mage/Adminhtml/Helper/Sales.php 中的意外 '[' 在第 124 行
> 
> **原因**
> 
> SUPEE-7405 是为 PHP 5.4 准备的，旧的 PHP 版本与使用的新语言结构不兼容。
> 
> **解决方案**
> 
> *将app/code/core/Mage/Adminhtml/Helper/Sales.php*中的第 124 行从`$links = [];`更改为`$links = array();`：
> 
> ```
> --- app/code/core/Mage/Adminhtml/Helper/Sales.php
> +++ app/code/core/Mage/Adminhtml/Helper/Sales.php
> 
> @@ -121,7 +121,7 @@
>      public function escapeHtmlWithLinks($data, $allowedTags = null)
>      {
>          if (!empty($data) && is_array($allowedTags) && in_array('a', $allowedTags)) {
> -            $links = [];
> +            $links = array();
>              $i = 1;
>              $data = str_replace('%', '%%', $data); 
> ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T19:28:33.970

您很可能有一个本地或社区模块导致某种错误，如果页面没有为某些订单一直呈现，我会假设这些订单正在使用这个本地和/或社区模块。

您可以尝试的几件事是：

1）通过禁用所有本地模块`local.xml`

2）通过禁用社区模块`app/etc/Company_Modulename.xml`并设置`active`为`false`

禁用每次重试查看订单后，直到找到罪魁祸首。

此外，查看页面源可能有助于导致输出停止的位置，并且在页面源的最后也可能存在错误。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T07:30:25.203

我在替换`tax.phtml`文件时解决了这个问题

`app/design/adminhtml/default/default/template/sales/order/totals`

与我的原始文件。尝试一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-10T22:45:56.767

我禁用了所有插件。在我的情况下，似乎 apptha 一步结帐插件对此负责。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-27T08:03:51.157

我相信这个问题是由于默认的 Magento 造成的，因为文件不指向任何第三方结帐扩展。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-05T15:40:54.393

如果 SUPEE-7405 补丁导致此问题，请检查您的系统是否在 PHP 5.3 上运行。

该补丁打破了 PHP 5.3 的兼容性，在 app/code/core/Mage/Adminhtml/Helper/Sales.php（第 124 行）中引入了数组字面量的使用，从 5.4 版开始在 PHP 中可用，因此需要的最低 PHP 版本，应用后，是 PHP 5.4：

```
// patched app/code/core/Mage/Adminhtml/Helper/Sales.php lines 121-124
public function escapeHtmlWithLinks($data, $allowedTags = null)
{
    if (!empty($data) && is_array($allowedTags) && in_array('a', $allowedTags)) {
        $links = []; 
```

要解决此问题并恢复 PHP 5.3 兼容性（允许订单再次显示在管理屏幕中），只需使用旧的 PHP5.3 等效项更正此问题：

```
// patched and fixed app/code/core/Mage/Adminhtml/Helper/Sales.php lines 121-124
public function escapeHtmlWithLinks($data, $allowedTags = null)
{
    if (!empty($data) && is_array($allowedTags) && in_array('a', $allowedTags)) {
        $links = array(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-25T16:06:14.880

在您的服务器上将 PHP 5.3 更改为 5.6，注销并登录。刷新你的缓存。它将运行。对于版本 1.9.2.3 magento。

# url - 没有浏览器在标头中发送授权信息

> ID：11556166
> 
> 赞同：5
> 
> 时间：2012-07-19T07:48:41.690
> 
> 标签：url, google-chrome, http-headers, fiddler, basic-authentication

我正在查看[这个](https://stackoverflow.com/questions/2716990/http-basic-authentication-credentials-passed-in-url-and-encryption)和[这个](https://serverfault.com/questions/371907/can-you-pass-user-pass-for-http-basic-authentication-in-url-parameters)，在 URL 中发送凭据看起来很“容易”。例如：

> [http://gooduser:secretpassword@www.example.com/webcallback?foo=bar](http://gooduser:secretpassword@www.example.com/webcallback?foo=bar)

这一切都很好，但*它不起作用*。我已经打开了提琴手，对于 Chrome，`Authorization`标题没有发送。它似乎对其他浏览器表现出相同的行为（我在服务器上有一个断点，并且没有为 Firefox、Safari 或 IE 出现 Authorize 标头）

如何让它变得更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-11T20:53:14.967

在研究各种基本身份验证实现时偶然发现了这一点。

`401`浏览器通常仅在收到来自服务器的质询响应时才发送基本身份验证（[更多关于基本身份验证协议](http://en.wikipedia.org/wiki/Basic_access_authentication)）。如果有问题的端点同时接受经过身份验证和未经过身份验证的用户，则可能永远不会提示基于浏览器的请求输入身份验证参数。

测试此类设置的最简单方法是将 curl 请求（无论如何都发送身份验证参数）发送到您的服务器端点并验证是否收到了`authorization`标头：

`curl 'http://gooduser:secretpassword@www.example.com/webcallback?foo=bar'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T00:33:31.350

好的，经过大量搜索和试验该方法

```
http://gooduser:secretpassword@www.example.com/webcallback?foo=bar 
```

确实有效。但是，需要小心确保秘密密码不包含任何特殊字符。使用仅包含字母和数字以及连字符（如果必须）的密码，它应该可以工作。

# jquery - jQuery .each 和 div 的高度

> ID：11556167
> 
> 赞同：2
> 
> 时间：2012-07-19T07:48:44.103
> 
> 标签：jquery, height, each

我有这样的结构：

```
<div class="a">
  <div class="b"></div>
  <div class="b"></div>
 <div class="b"></div>
 <div class="b"></div>
</div>
<div class="a">
  <div class="b"></div>
  <div class="b"></div>
</div>
<div class="a">
  <div class="b"></div>
  <div class="b"></div>
  <div class="b"></div>
</div> 
```

我想在每个设置为 a 的 div 类中找到类设置为 b 的最高 div，并在警报中显示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T08:00:30.737

```
$('.a').each(function() {
    var maxHeight = 0;
    $('.b', this).each(function() {
        if($(this).height() > maxHeight) {
         maxHeight = $(this).height();  
        }
    });
    alert(maxHeight);
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-19T07:54:16.873

您可以使用[`.map()`](http://api.jquery.com/map/)生成一个包含每个匹配元素高度的 jQuery 对象（在这种情况下，它实际上是一个数字数组）。然后，您可以通过[`apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)该数组来[`Math.max`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/max)确定其中的最大值：

```
var maxHeight = Math.max.apply(Math, ​$(".b").map(function () {
    return $(this).height(); 
})); 
```

这是一个[工作示例](http://jsfiddle.net/EgFpK/1/)。

* * *

**更新**（这个应该完全按照您在问题中指定的行为）

```
$("div.a").each(function () {
    alert(Math.max.apply(Math, ​$("div.b", this).map(function () {
        return $(this).height(); 
    })));
}); 
```

这是另一个[工作示例](http://jsfiddle.net/jamesallardice/EgFpK/3/)。

# maven - 如何调用maven默认生命周期

> ID：11556170
> 
> 赞同：4
> 
> 时间：2012-07-19T07:48:57.640
> 
> 标签：maven, lifecycle

如果我打电话

```
mvn clean install 
```

maven 知道 clean 是一个生命周期，而 install 是默认生命周期的一个阶段

如果我打电话

```
mvn deploy 
```

maven 将按顺序执行默认生命周期的所有阶段。

有没有办法通过提供生命周期名称来调用默认生命周期（而不是执行生命周期的最后一个阶段）？

编辑：所以问题是：是否有命令

```
mvn lifecyclename 
```

开始执行默认生命周期？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T09:17:37.580

没有基于生命周期名称运行生命周期的命令。所以你**不能**做 a`mvn Default`并期望它运行 upto `Default:deploy`。您将不得不提及一个像,之类*的循环任务*，并且拥有该任务的生命周期将被激活。`test``package``clean`

将生命周期作为论据是没有意义的。这会令人困惑。例如运行`mvn clean`是清洁生命周期还是清洁任务？

`mvn clean`或者，键入将运行清洁生命周期会更冗长；并将`mvn clean:clean`运行清洁生命周期直到`clean`任务。

* * *

Maven有三个生命周期。执行任何生命周期的任务（比如 task_N）将导致执行整个生命周期，直到该任务（task_N）。三个生命周期是*Clean*、*Default*和*Site*。

有关更多详细信息，请参见此处[Maven 生命周期和任务顺序简介](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)

你看，当你执行的时候，`mvn test`这些事情是按那个顺序执行的

> 验证 > 初始化 > generate-sources > process-sources > generate-resources > process-resources > compile > process-classes > post-process > generate-test-sources > process-test-sources > generate-test-resources > process-测试资源>测试编译>过程测试类>测试

您不能跳过任何默认任务。您可以挂钩在任务期间执行的插件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T09:03:57.647

好像有什么误会。进一步阅读可以澄清

```
mvn clean 
```

不会调用整个干净的生命周期。事实上，清洁生命周期中有一个清洁阶段。并且该命令执行此阶段而不是生命周期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T08:03:36.037

据我所知，您无法执行孤立的生命周期阶段。

但是你可以执行一个独立的插件目标。

```
mvn deploy:deploy 
```

这不会触发任何与`deploy`阶段相关的插件执行。但是您始终可以在命令行中添加更多插件执行。所以我最好使用一个跳过所有插件执行的配置文件。

如果你想执行一个`myplugin:mygoal`与`deploy`阶段相关的，那么

```
mvn myplugin:mygoal deploy:deploy 
```

但是执行的配置必须在cli中。

但是你最好跳过你不想要的插件执行。只跳过`test`并`integration-test`在命令行中。但是您可以使用配置文件来实现这一点，该配置文件将默认周期的配置设置为跳过。

```
<profiles>
  <profile>
    <id>skip</id>
      ...
         <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
            <skip>true</skip>
            </configuration>
          </plugin>
  ... 
```

然后召唤

```
mvn deploy -Pskip 
```

# maven - 找不到 didutil:did:jar:1.0.1

> ID：11556171
> 
> 赞同：1
> 
> 时间：2012-07-19T07:48:58.653
> 
> 标签：maven, maven-2, aem

我在 pom.xml 中添加了以下依赖项

```
 <dependency>
        <groupId>com.day.cq.wcm</groupId>
        <artifactId>cq-wcm-core</artifactId>
        <version>5.4.10</version>
        <scope>compile</scope>
    </dependency>

    <dependency>
        <groupId>com.day.cq</groupId>
        <artifactId>cq-xssprotection</artifactId>
        <version>5.3.0</version>
        <scope>compile</scope>
    </dependency> 
```

但是在执行 mvn clean install 命令时出现以下错误。

> [错误] 无法在项目 platform.media 上执行目标：无法解析项目 com.abc:platform.media:bundle:1.0.0-SNAPSHOT 的依赖项：
> 
> [http://repo.adobe.com/archiva/repository/day-central](http://repo.adobe.com/archiva/repository/day-central)中找不到**didutil:did:jar:1.0.1**失败缓存在本地仓库，直到day-external的更新间隔才重新尝试解析-central 已过或强制更新

请帮忙。

问候， Vaibhav Chaturvedi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:02:56.823

尝试 cq-wcm-core 版本**5.5.0**而不是 5.4.x

```
<dependency>
  <groupId>com.day.cq.wcm</groupId>
  <artifactId>cq-wcm-core</artifactId>
  <version>5.5.0</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:04:52.700

欢迎来到堆栈溢出 :)。

如果 Maven 得到正确的诊断，您应该尝试更新选项 (-U)

```
mvn clean install -U 
```

这将强制下载。

*附加问题：*

您确定您提供了良好的凭据吗？

似乎这个 repo (http://repo.adobe.com/archiva/repository/day-central) 重定向到[http://repo.adobe.com/nexus/content/groups/public](http://repo.adobe.com/nexus/content/groups/public) (看看，它是可浏览的)，但是这个 repo 不存在（或者 public 不包含任何东西）。

***编辑***：这里是更正存储库： [http ://repo.adobe.com/nexus/](http://repo.adobe.com/nexus/)

请注意，只有解决方案改变了档案 --> 关系 :)

你所有的工件似乎都在这里：[http ://repo.adobe.com/nexus/content/groups/public/com/day/cq/wcm/cq-content/](http://repo.adobe.com/nexus/content/groups/public/com/day/cq/wcm/cq-content/)

奇怪的是，它现在可以访问了。

祝你好运。

# ios - 如何更改 iSpeech SDK for iOS 中的语言？

> ID：11556174
> 
> 赞同：0
> 
> 时间：2012-07-19T07:49:09.913
> 
> 标签：ios, text-to-speech, ispeech

我正在尝试使用适用于 iOS 的 iSpeech SDK。

我正在使用免费版本。

我对使用以下代码的英语文本到语音很好。

```
 [ispeech ISpeechSpeak:@"HELLO World"]; 
```

但我也想使用多种语言，如日本、韩国等......

如何更改 iSpeech 中的语言？

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:03:42.060

查看以下可能对您有所帮助的示例； [DotNet 示例](https://www.ispeech.org/downloads/ispeech-.net-sdk-docs-demo-20110614.zip)和 [Web 示例](http://www.ispeech.org/developer/gettingstarted/web)

从那你应该能够理解你试图做什么，因为 API 在平台上是相同的。

你可以试试： `[ispeech setVoice:@"jpjapanesemale"];`

声音在 ISSpeechSynthesisVoices.h 头文件中列出

# path - 使用 Ninject 绑定时如何获取 dll 的路径？

> ID：11556178
> 
> 赞同：0
> 
> 时间：2012-07-19T07:49:14.270
> 
> 标签：path, ninject, bind

我的网络应用程序位于“D:\WebApp 文件夹”中，并且“D:\Bin”文件夹中有一个 dll，我想使用相对路径而不是直接使用绝对路径“D:\Bin”来使用 ninject bindthe dll ，因为绝对路径可能在某个地方发生了变化。

代码如下：

```
string path="how to get the path";
kernel.Bind(x => x.FromAssembliesInPath("path")
.SelectAllClasses()
.BindDefaultInterface()); 
```

我怎样才能得到代码中的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:16:17.843

该路径可以是相对于工作目录的路径，例如“..\bin\the.dll”。确保路径位于应用程序的探测路径配置中。

# android - 转移到主要活动失败

> ID：11556181
> 
> 赞同：0
> 
> 时间：2012-07-19T07:49:18.093
> 
> 标签：android

我这里有我的启动画面的代码，但是当我在进入主游戏时将启动画面放在我的程序上时似乎是错误的，有人可以帮忙吗？谢谢！

这是我的代码：

```
 public class SpalshScreenActivity extends Activity {
         public void onAttachedToWindow() {
                super.onAttachedToWindow();
                Window window = getWindow();
                window.setFormat(PixelFormat.RGBA_8888);
            }

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.splash);
            StartAnimations();

        }

        private void StartAnimations() {
            Animation anim = AnimationUtils.loadAnimation(this, R.anim.alpha);
            anim.reset();
            LinearLayout l=(LinearLayout) findViewById(R.id.lin_lay);
            l.clearAnimation();
            l.startAnimation(anim);

            anim = AnimationUtils.loadAnimation(this, R.anim.translate);
            anim.reset();
            ImageView iv = (ImageView) findViewById(R.id.logo);
            iv.clearAnimation();
            iv.startAnimation(anim);

            anim = AnimationUtils.loadAnimation(this, R.anim.translatez);
            anim.reset();
            ImageView ib = (ImageView) findViewById(R.id.logo2);
            ib.clearAnimation();
            ib.startAnimation(anim);}

            protected Class<? extends Activity> getFollowUpActivity() {
                return BodyPartsGameActivity.class;
            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:00:19.873

如果您的问题是“为什么它没有从启动屏幕进展到下一个活动”......您永远不会发出命令。为什么你认为在正常的 Activity 上有一个 getFollowUpActivity 会被调用？

您需要一个专门的 Activity 或使用线程在特定时间后将您的 splasscreen 转发到主屏幕。

# .net - DataContractSerializer - 忽略数组中的空值

> ID：11556182
> 
> 赞同：0
> 
> 时间：2012-07-19T07:49:20.900
> 
> 标签：.net, datacontractserializer

我有一个对象数组，其中可能包含空值。

序列化数组时，我还得到一个空标记来表示空值。前任。

```
<TableType i:nil="true" />
<TableType i:nil="true" />
<TableType i:nil="true" /> 
```

没有这些值如何进行序列化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-01T14:53:26.677

在您的 DataMember 声明中，所有可选参数 EmitDefaultValues = false;

数据成员（IsRequired = false，EmitDefaultValue = false）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:57:18.330

我能想到的一种方法是使用 XmlWriter 并用 nil 修剪那些...

# mercurial - 在 Mercurial 中签署变更集的目的是什么？

> ID：11556184
> 
> 赞同：3
> 
> 时间：2012-07-19T07:49:21.727
> 
> 标签：mercurial, signature, gnupg

在 Mercurial 中有一个特殊[的](http://mercurial.selenic.com/wiki/FileFormats#A.hgsigs_.28ascii.29_.5Bgpg.5D)`.hgsigs`文件

> ...包含来自 gpg 扩展的变更集签名，每行一个。

这是干什么用的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T18:25:21.710

它仅对在变更集上声明信任/签核有用。如果变更集已由一个或多个人签名，则您知道这些人或拥有其 gpg 凭据的人签署了这些变更集。可以想象这样的工作流程，“除非有 Jim 的签名或者你被解雇，否则任何东西都不能在生产 Web 服务器上运行”或“每个人都必须签署他们编写的变更集，这样你就知道作者信息不是伪造的。”

它实际上很少使用，因为这意味着为每个签名创建一个额外的变更集。

# jboss - 启动 JBoss 5.1 GA 时出现 IOException

> ID：11556189
> 
> 赞同：1
> 
> 时间：2012-07-19T07:49:48.340
> 
> 标签：jboss, startup, ioexception

在我的服务器上启动我的 JBoss 实例需要很长时间（11 分钟），我认为这是因为这个错误：

```
2012-07-19 09:37:46,546 INFO  [org.jboss.web.WebService] (main) Using RMI server codebase: http://zpssis1p:8083/
2012-07-19 09:38:14,143 INFO  [org.jboss.wsf.stack.jbws.NativeServerConfig] (main) JBoss Web Services - Stack Native Core
2012-07-19 09:38:14,145 INFO  [org.jboss.wsf.stack.jbws.NativeServerConfig] (main) 3.1.2.GA
2012-07-19 09:38:18,608 INFO  [org.jboss.dependency.plugins.AttributeCallbackItem] (main) Owner callback not implemented.
2012-07-19 09:38:26,204 INFO  [org.jboss.logbridge.LogNotificationListener] (main) Adding notification listener for logging mbean "jboss.system:service=Logging,type=Log4jService" to server org.jboss.mx.server.MBeanServerImpl@d2b64e[ defaultDomain='jboss' ]
2012-07-19 09:39:25,721 INFO  [org.jboss.ejb3.deployers.Ejb3DependenciesDeployer] (main) Encountered deployment AbstractVFSDeploymentContext@13533447{vfsfile:/opt/jboss/5.1.0/server/default/deploy/profileservice-secured.jar/}
2012-07-19 09:39:25,725 INFO  [org.jboss.ejb3.deployers.Ejb3DependenciesDeployer] (main) Encountered deployment AbstractVFSDeploymentContext@13533447{vfsfile:/opt/jboss/5.1.0/server/default/deploy/profileservice-secured.jar/}
2012-07-19 09:39:25,725 INFO  [org.jboss.ejb3.deployers.Ejb3DependenciesDeployer] (main) Encountered deployment AbstractVFSDeploymentContext@13533447{vfsfile:/opt/jboss/5.1.0/server/default/deploy/profileservice-secured.jar/}
2012-07-19 09:39:25,726 INFO  [org.jboss.ejb3.deployers.Ejb3DependenciesDeployer] (main) Encountered deployment AbstractVFSDeploymentContext@13533447{vfsfile:/opt/jboss/5.1.0/server/default/deploy/profileservice-secured.jar/}
2012-07-19 09:47:03,479 ERROR [org.jboss.kernel.plugins.dependency.AbstractKernelController] (main) Error installing to Start: name=jboss.remoting:protocol=rmi,service=JMXConnectorServer state=Create mode=Manual requiredState=Installed

java.io.IOException: Cannot bind to URL [rmi://zpssis1p:1090/jmxconnector]: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: zpssis1p; nested exception is:
      java.net.ConnectException: Connection timed out]
      at javax.management.remote.rmi.RMIConnectorServer.newIOException(RMIConnectorServer.java:804)
      at javax.management.remote.rmi.RMIConnectorServer.start(RMIConnectorServer.java:417)
      at org.jboss.mx.remoting.service.JMXConnectorServerService.start(JMXConnectorServerService.java:131)
      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
      at java.lang.reflect.Method.invoke(Method.java:597)
      at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
      at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
      at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
      at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
      at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
      at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java:206)
      at $Proxy38.start(Unknown Source)
      at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:42)
      at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:37)
      at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62)
      at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71)
      at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51)
      at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
      at org.jboss.system.microcontainer.ServiceControllerContext.install(ServiceControllerContext.java:286)
      at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
      at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
      at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
      at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
      at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
      at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
      at org.jboss.system.ServiceController.doChange(ServiceController.java:688)
      at org.jboss.system.ServiceController.start(ServiceController.java:460)
      at org.jboss.system.deployers.ServiceDeployer.start(ServiceDeployer.java:163)
      at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:99)
      at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:46)
      at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.internalDeploy(AbstractSimpleRealDeployer.java:62)
      at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:50)
      at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:171)
      at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1439)
      at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1157)
      at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1178)
      at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1098)
      at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
      at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
      at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
      at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
      at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
      at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
      at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
      at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:781)
      at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:702)
      at org.jboss.system.server.profileservice.repository.MainDeployerAdapter.process(MainDeployerAdapter.java:117)
      at org.jboss.system.server.profileservice.repository.ProfileDeployAction.install(ProfileDeployAction.java:70)
      at org.jboss.system.server.profileservice.repository.AbstractProfileAction.install(AbstractProfileAction.java:53)
      at org.jboss.system.server.profileservice.repository.AbstractProfileService.install(AbstractProfileService.java:361)
      at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
      at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
      at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
      at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
      at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
      at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
      at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
      at org.jboss.system.server.profileservice.repository.AbstractProfileService.activateProfile(AbstractProfileService.java:306)
      at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java:271)
      at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:461)
      at org.jboss.Main.boot(Main.java:221)
      at org.jboss.Main$1.run(Main.java:556)
      at java.lang.Thread.run(Thread.java:619)
Caused by: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: zpssis1p; nested exception is:
      java.net.ConnectException: Connection timed out]
      at com.sun.jndi.rmi.registry.RegistryContext.bind(RegistryContext.java:126)
      at com.sun.jndi.toolkit.url.GenericURLContext.bind(GenericURLContext.java:208)
      at javax.naming.InitialContext.bind(InitialContext.java:400)
      at javax.management.remote.rmi.RMIConnectorServer.bind(RMIConnectorServer.java:625)
      at javax.management.remote.rmi.RMIConnectorServer.start(RMIConnectorServer.java:412)
      ... 63 more
Caused by: java.rmi.ConnectException: Connection refused to host: zpssis1p; nested exception is:
      java.net.ConnectException: Connection timed out
      at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:601)
      at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:198)
      at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:184)
      at sun.rmi.server.UnicastRef.newCall(UnicastRef.java:322)
      at sun.rmi.registry.RegistryImpl_Stub.bind(Unknown Source)
      at com.sun.jndi.rmi.registry.RegistryContext.bind(RegistryContext.java:120)
      ... 67 more
Caused by: java.net.ConnectException: Connection timed out
      at java.net.PlainSocketImpl.socketConnect(Native Method)
      at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
      at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
      at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
      at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
      at java.net.Socket.connect(Socket.java:525)
      at java.net.Socket.connect(Socket.java:475)
      at java.net.Socket.<init>(Socket.java:372)
      at java.net.Socket.<init>(Socket.java:186)
      at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:22)
      at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:128)
      at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:595)
      ... 72 more
2012-07-19 09:04:11,331 ERROR [org.jboss.kernel.plugins.dependency.AbstractKernelController] (main) Error installing to Real: name=vfsfile:/opt/jboss/5.1.0/server/default/deploy/jmx-remoting.sar/ state=PreReal mode=Manual requiredState=Real
org.jboss.deployers.spi.DeploymentException: Error deploying: jboss.remoting:service=JMXConnectorServer,protocol=rmi
      at org.jboss.deployers.spi.DeploymentException.rethrowAsDeploymentException(DeploymentException.java:49)
      at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:118)
      at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:46)
      at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.internalDeploy(AbstractSimpleRealDeployer.java:62)
      at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:50)
      at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:171)
      at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1439)
      at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1157)
      at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1178)
      at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1098)
      at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
      at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
      at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
      at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
      at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
      at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
      at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
      at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:781)
      at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:702)
      at org.jboss.system.server.profileservice.repository.MainDeployerAdapter.process(MainDeployerAdapter.java:117)
      at org.jboss.system.server.profileservice.repository.ProfileDeployAction.install(ProfileDeployAction.java:70)
      at org.jboss.system.server.profileservice.repository.AbstractProfileAction.install(AbstractProfileAction.java:53)
      at org.jboss.system.server.profileservice.repository.AbstractProfileService.install(AbstractProfileService.java:361)
      at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
      at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
      at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
      at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
      at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
      at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
      at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
      at org.jboss.system.server.profileservice.repository.AbstractProfileService.activateProfile(AbstractProfileService.java:306)
      at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java:271)
      at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:461)
      at org.jboss.Main.boot(Main.java:221)
      at org.jboss.Main$1.run(Main.java:556)
      at java.lang.Thread.run(Thread.java:619)
Caused by: java.io.IOException: Cannot bind to URL [rmi://zpssis1p:1090/jmxconnector]: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: zpssis1p; nested exception is:
      java.net.ConnectException: Connection timed out]
      at javax.management.remote.rmi.RMIConnectorServer.newIOException(RMIConnectorServer.java:804)
      at javax.management.remote.rmi.RMIConnectorServer.start(RMIConnectorServer.java:417)
      at org.jboss.mx.remoting.service.JMXConnectorServerService.start(JMXConnectorServerService.java:131)
      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
      at java.lang.reflect.Method.invoke(Method.java:597)
      at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
      at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
      at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
      at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
      at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
      at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java:206)
      at $Proxy38.start(Unknown Source)
      at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:42)
      at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:37)
      at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62)
      at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71)
      at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51)
      at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
      at org.jboss.system.microcontainer.ServiceControllerContext.install(ServiceControllerContext.java:286)
      at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
      at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
      at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
      at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
      at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
      at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
      at org.jboss.system.ServiceController.doChange(ServiceController.java:688)
      at org.jboss.system.ServiceController.start(ServiceController.java:460)
      at org.jboss.system.deployers.ServiceDeployer.start(ServiceDeployer.java:163)
      at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:99)
      ... 34 more
Caused by: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: zpssis1p; nested exception is:
      java.net.ConnectException: Connection timed out]
      at com.sun.jndi.rmi.registry.RegistryContext.bind(RegistryContext.java:126)
      at com.sun.jndi.toolkit.url.GenericURLContext.bind(GenericURLContext.java:208)
      at javax.naming.InitialContext.bind(InitialContext.java:400)
      at javax.management.remote.rmi.RMIConnectorServer.bind(RMIConnectorServer.java:625)
      at javax.management.remote.rmi.RMIConnectorServer.start(RMIConnectorServer.java:412)
      ... 63 more
Caused by: java.rmi.ConnectException: Connection refused to host: zpssis1p; nested exception is:
      java.net.ConnectException: Connection timed out
      at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:601)
      at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:198)
      at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:184)
      at sun.rmi.server.UnicastRef.newCall(UnicastRef.java:322)
      at sun.rmi.registry.RegistryImpl_Stub.bind(Unknown Source)
      at com.sun.jndi.rmi.registry.RegistryContext.bind(RegistryContext.java:120)
      ... 67 more
Caused by: java.net.ConnectException: Connection timed out
      at java.net.PlainSocketImpl.socketConnect(Native Method)
      at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
      at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
      at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
      at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
      at java.net.Socket.connect(Socket.java:525)
      at java.net.Socket.connect(Socket.java:475)
      at java.net.Socket.<init>(Socket.java:372)
      at java.net.Socket.<init>(Socket.java:186)
      at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:22)
      at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:128)
      at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:595)
      ... 72 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:58:51.870

我发现了问题。该文件`/etc/hosts`包含安装在我的 JBoss 服务器前面的 Apache 服务器的 IP 地址。我将其更改为正确的 IP 地址，服务器现在可以在此端口上连接，JBoss 启动快了 3 分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:17:18.977

几个步骤：

1.  *`service iptables stop`*如果 iptables 使用or 运行，则停止它 *`/etc/init.d/iptables stop`*。（如果问题是 iptables，您可以稍后使用规则打开特定端口。）

2.  确保与错误运行的其他服务器没有端口冲突。 *`ps -ef | grep java`* 会告诉您是否有其他 Java 服务器/进程正在运行。确保这些进程被杀死。 *`kill -9 <PID>`* 或*`killall -9 java`*。

3.  再次尝试运行 Jboss。

# iphone - 我可以在 ios 中更改 Google AdMob Ads 的导航栏位置吗？

> ID：11556193
> 
> 赞同：1
> 
> 时间：2012-07-19T07:50:09.043
> 
> 标签：iphone, objective-c, ios, admob

我可以在 ios 中更改 Google AdMob Ads 的导航栏位置吗？

![我可以更改导航栏的位置吗？](../Images/fa64f5af903610638d2ad2c62a008f3a.png)

以及如何检查 google admob 是否在屏幕上（关闭）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:04:05.627

由于 admob 已作为库合并到您的代码中，并且他们没有提供任何用于移动此栏的 API（UIToolbar，而不是 UINavigationBar），因此您无法更改它。

我**认为**他们没有任何属性来检查屏幕是否正在显示。但是您可以在您的类中设置一个 BOOL，并在 GADBannerViewDelegate 方法中将其设置为 YES 或 NO：

```
-(void)adViewWillPresentScreen:(GADBannerView *)bannerView;
-(void)adViewDidDismissScreen:(GADBannerView *)bannerView;
-(void)adViewWillDismissScreen:(GADBannerView *)bannerView;
-(void)adViewWillLeaveApplication:(GADBannerView *)bannerView; 
```

要理解它，您需要阅读一些关于 Objective-c 中的委托的内容。但我会尝试：在您的类界面中，您输入：

```
@interface MyViewController : UIViewController <GADBannerViewDelegate>
{
    BOOL isPresentingBanner;
    GADBannerView *myBanner;
} 
```

在您的类实现中，初始化委托后，定义委托：

```
myBanner.delegate = self; 
```

你实现了委托方法：

```
-(void)adViewWillPresentScreen:(GADBannerView *)bannerView
{
    NSLog(@"adViewWillPresentScreen");
    isPresentingBanner = YES;
}

-(void)adViewDidDismissScreen:(GADBannerView *)bannerView
{
    NSLog(@"adViewDidDismissScreen");
    isPresentingBanner = NO;
}

-(void)adViewWillDismissScreen:(GADBannerView *)bannerView
{
    NSLog(@"adViewWillDismissScreen");
} 
```

# php - 使用 Codeigniter 上传 Ajax 文件

> ID：11556199
> 
> 赞同：1
> 
> 时间：2012-07-19T07:50:55.193
> 
> 标签：php, jquery, ajax, codeigniter, file-upload

我正在尝试使用 codeigniter 和 ajax 上传图像。我已经有将字段值插入数据库的 ajax 方法，这是上传文件的最简单和最简单的方法。这是 JQuery 自定义函数：

```
(function($){
    jQuery.fn.ajaxSubmit =
        function() {
            $(this).submit(function(event) {
                event.preventDefault();
                var url = $(this).attr('action');                       
                var data = $(this).serialize();

                $.ajax({
                    url: url,
                    type: "POST",
                    data: data,
                    dataType: "html",
                    success: function(msg) {
                               $('#main').html(msg);
                             }
                       });

                 return this;
             });
         };
})(jQuery); 
```

我这样称呼它：

```
$(document).ready(function() {    
    $('#myForm').ajaxSubmit();
}); 
```

该功能工作正常，数据被插入数据库中，我什至在上传图像之前在模型中创建了一些目录，它们被创建但根本没有上传图像。

我知道我需要使用隐藏的 iframe 来完成这项工作，但我不太清楚如何将它集成到我的代码中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T09:04:03.317

我使用 CodeIgniter、jQuery 和 Malsup 表单插件创建了自定义**Ajax 文件上传器。**这是 HTML 和 Javascript/CSS 代码。它还支持多个文件上传和进度。

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Ajax UP Bar</title>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript" src="http://malsup.github.com/jquery.form.js"></script>
        <script type="text/javascript">
            $(document).ready( function() {
                $('form').submit( function() {
                    var bar = $('.bar');
                    var percent = $('.percent');
                    var status = $('#status');
                    $(this).ajaxForm({
                        beforeSend: function() {
                            status.html();
                            var percentVal = '0%';
                            bar.width(percentVal)
                            percent.html(percentVal);
                        },
                        uploadProgress: function(event, position, total, percentComplete) {
                            var percentVal = percentComplete + '%';
                            bar.width(percentVal)
                            percent.html(percentVal);
                        },
                        complete: function(xhr) {
                            status.html(xhr.responseText);
                        }
                    });
                });
            });
        </script>
    </head>

    <body>

        <form method="post" action="<?php echo base_url('users/upload/'); ?>" enctype="multipart/form-data">
            <label for="upload">Select : </label>
            <input type="file" name="upload[]" id="upload" multiple="multiple" />
            <input type="submit" name="fsubmit" id="fsubmit" value="Upload" />
        </form>

        <div class="progress">
            <div class="bar"></div >
            <div class="percent">0%</div >
        </div>

        <div id="status"></div>

    </body>
</html>
<style>
    body { padding: 30px }
    form { display: block; margin: 20px auto; background: #eee; border-radius: 10px; padding: 15px }

    .progress { position:relative; width:400px; border: 1px solid #ddd; padding: 1px; border-radius: 3px; }
    .bar { background-color: #B4F5B4; width:0%; height:20px; border-radius: 3px; }
    .percent { position:absolute; display:inline-block; top:3px; left:48%; }
</style> 
```

在 CodeIgniter 控制器中：

```
<?php

if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class Users extends CI_Controller
{

    public function __construct()
    {
        parent::__construct();
    }

    public function upload()
    {
        if (isset($_FILES['upload']['name'])) {
            // total files //
            $count = count($_FILES['upload']['name']);
            // all uploads //
            $uploads = $_FILES['upload'];

            for ($i = 0; $i < $count; $i++) {
                if ($uploads['error'][$i] == 0) {
                    move_uploaded_file($uploads['tmp_name'][$i], 'storage/' . $uploads['name'][$i]);
                    echo $uploads['name'][$i] . "\n";
                }
            }
        }
    }

} 
```

希望这对您有所帮助。谢谢！！

# php - 比较 unicode 输入与数据库字符串

> ID：11556200
> 
> 赞同：0
> 
> 时间：2012-07-19T07:51:04.420
> 
> 标签：php, mysql, html, utf-8, encode

我一直在stackover中一遍又一遍地搜索，但没有找到解决我问题的方法。我需要将用户输入的字符串与 mysql 数据库中的现有字符串进行比较。存储在数据库中的字符串如下： `xu&#7845;t kh&#7849;u`这意味着：“xuất khẩu” :)

用户从文本框中输入的字符串是：“xuất khẩu”

但是当我尝试比较 2 个字符串、mb_encode、htmlentities 等时，它绝不表示字符串匹配！

数据库使用utf-8通用ci，网站正确显示utf8字体。

任何人都可以给我解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T05:54:22.900

将以下内容添加到我的`.ini`文件中解决了该问题：

```
character-set-server = utf8  
collation-server = utf8_general_ci 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:57:31.967

确保在比较时使用：

```
html_entity_decode($mysqlValue, ENT_QUOTES, 'UTF-8'); // Compare with the unprocessed user input. 
```

（这会将来自 HTML 实体的 DB 值解码为特殊字符。）

或者：

```
htmlentities($userInput, ENT_QUOTES, 'UTF-8'); // Compare with the unprocessed DB value. 
```

（这会将用户的输入从包含特殊字符的字符串编码为包含 HTML 实体的字符串。）

数据库中的文本是 HTML 实体，所以我会寻找基于它的解决方案。我怀疑 UTF-8 编码是否存在问题，但最好在函数中指定以防万一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:20:24.407

对表字段使用“utf-8 general ci”时，值会正确存储，但在比较字符串时会遇到问题。例如，字符串 'tèst' 和 'test' 在与字符集和排序规则为 utf-8 general ci..的值进行比较时将返回 true。

尝试将排序规则/字符集设置为 utf8_bin。这在执行字符串比较时要安全得多。

但请记住，utf8_bin (ci) 没有不区分大小写的版本，因此您必须在保存之前将字符转换为小写。

问候，

# mysql - 查询错误 (2)

> ID：11556202
> 
> 赞同：-3
> 
> 时间：2012-07-19T07:51:04.917
> 
> 标签：mysql

```
SELECT m_name, m_status, p_num, p_date, g_code GROUP_CONCAT(g_code)
  FROM  (SELECT D.m_name, D.m_status, A.p_num, A.p_date, C.g_code 
           FROM post A 
                   LEFT OUTER JOIN postgoods B 
                          ON A.p_num = B.p_num
                   LEFT OUTER JOIN goodscode C 
                          ON B.g_num = C.g_num JOIN member D ON A.m_num = D.m_num
         ORDER BY A.p_date desc)
GROUP BY p_num 
```

不知这段代码是否出错

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:53:27.737

你在这里少了一个逗号

```
SELECT ... g_code, GROUP_CONCAT(g_code)
                 ^ 
```

## 编辑

您还缺少子选择的表别名（我将其命名为`z`）。尝试

```
SELECT m_name, m_status, p_num, p_date, g_code, GROUP_CONCAT(g_code)
FROM  (SELECT D.m_name, D.m_status, A.p_num, A.p_date, C.g_code 
       FROM post A 
       LEFT OUTER JOIN postgoods B ON A.p_num = B.p_num
       LEFT OUTER JOIN goodscode C ON B.g_num = C.g_num 
       JOIN member D ON A.m_num = D.m_num
       ORDER BY A.p_date desc) z
GROUP BY p_num 
```

您可以使用 MySQL Workbench 来运行您的查询。这是免费的。它将输出您查询的错误。

# jsf - 是否可以在 JSF (ui:repeat) 中进行分页？

> ID：11556204
> 
> 赞同：0
> 
> 时间：2012-07-19T07:51:19.467
> 
> 标签：jsf, pagination

我正在尝试在 jsf中进行**分页。**我在**ui:repeat**中从**JavaBean 中获取搜索结果。**

我如何在这里使用**分页**？

谢谢

# html - 表格单元格中的 div 强制一行

> ID：11556205
> 
> 赞同：1
> 
> 时间：2012-07-19T07:51:20.450
> 
> 标签：html, css

我有以下html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>

    </head>
<body>

    <table style="margin: 250px; width: 200px; height: 100px; background-color: Yellow; table-layout: fixed;">
        <tr>
            <td>
                <div style="margin: auto auto auto -50px; background-color: Green; width:100px; height:50px;">L</div>
                <div style="margin: auto -50px auto auto; background-color: Green; width:100px; height:50px;">R</div>
            </td>
        </tr>
    </table>
</body>
</html> 
```

我希望带有 R & L 的绿色框在没有使用 JS 的情况下位于同一行，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:05:43.380

只需添加“浮动：左；” 到框 L 上的样式属性并添加“float:right;” 到框 R 上的样式属性

然后在 td 标签处添加 valign="top" 。如果您希望它与顶部对齐，则为框的父标签。

见下面的代码

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>

</head>
<body>

    <table style="margin: 250px; width: 200px; height: 100px; background-color: Yellow; table-layout: fixed;">
        <tr>
            <td valign="top">
                <div style="float:left;margin: auto auto auto -50px; background-color: Green; width:100px; height:50px;">L</div>
                <div style="margin: auto -50px auto auto; background-color: Green; width:100px; height:50px;float:right;">R</div>
            </td>
        </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:54:22.357

添加css样式“ `float:left;`”。它会解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T07:54:44.823

您可以使用 css `display: inline-block`。请注意，这在旧版浏览器中不起作用。

或者，您可以使用`float: left`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T07:56:54.430

```
<div style="margin: auto auto auto -50px; background-color: Green; width:100px; height:50px; float:left;">L</div>
<div style="margin: auto -50px auto auto; background-color: Green; width:100px; height:50px; float:left;">R</div> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T08:03:31.777

您可以`float: left`仅将 css 添加到 DIV L；

或者您可以将 css 添加`float: left`到 DIV L 和`float: right`DIV R。

最终，这取决于您要在这里实现的目标。

# ios - 为 UIButton 添加发光效果 - iOS

> ID：11556208
> 
> 赞同：20
> 
> 时间：2012-07-19T07:51:41.483
> 
> 标签：ios, xcode, quartz-graphics

我有一个 UIButton，它是一个徽标。此徽标按钮将永远发光，但在触摸时会停止发光。它就像一个发光的动画。

有什么建议吗？

```
 Undefined symbols for architecture i386:
 "_OBJC_CLASS_$_CABasicAnimation", referenced from:
 objc-class-ref in UIView+Glow.o
 "_OBJC_CLASS_$_CAMediaTimingFunction", referenced from:
  objc-class-ref in UIView+Glow.o
  "_kCAMediaTimingFunctionEaseInEaseOut", referenced from:
  -[UIView(Glow) startGlowing] in UIView+Glow.o
   ld: symbol(s) not found for architecture i386
   clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-16T22:42:29.813

我喜欢我的“额外特殊”按钮的这种发光 + 增长/收缩动画：

```
-(void)makeViewShine:(UIView*) view
{
view.layer.shadowColor = [UIColor yellowColor].CGColor;
view.layer.shadowRadius = 10.0f;
view.layer.shadowOpacity = 1.0f;
view.layer.shadowOffset = CGSizeZero;

[UIView animateWithDuration:0.7f delay:0 options:UIViewAnimationOptionAutoreverse | UIViewAnimationCurveEaseInOut | UIViewAnimationOptionRepeat | UIViewAnimationOptionAllowUserInteraction  animations:^{

    [UIView setAnimationRepeatCount:15];

    view.transform = CGAffineTransformMakeScale(1.2f, 1.2f);

} completion:^(BOOL finished) {

    view.layer.shadowRadius = 0.0f;
    view.transform = CGAffineTransformMakeScale(1.0f, 1.0f);
}];

} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-19T12:34:31.620

我建议你使用[秘密实验室制作的 UIView 的 Glow Category](https://github.com/thesecretlab/UIView-Glow)。

示例可[在此处获得](http://blog.secretlab.com.au/2012/06/23/glowing/)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-06-07T08:33:50.123

斯威夫特 5

1.  使用动画创建 UIView 扩展

2.  在文本字段、按钮、视图（UIView 的任何子类）上使用它

注意：您可以更改值并尝试获得所需的效果。

UIView 扩展

```
import UIKit

extension UIView {
    enum GlowEffect: Float {
        case small = 0.4, normal = 2, big = 15
    }

    func doGlowAnimation(withColor color: UIColor, withEffect effect: GlowEffect = .normal) {
        layer.masksToBounds = false
        layer.shadowColor = color.cgColor
        layer.shadowRadius = 0
        layer.shadowOpacity = 1
        layer.shadowOffset = .zero

        let glowAnimation = CABasicAnimation(keyPath: "shadowRadius")
        glowAnimation.fromValue = 0
        glowAnimation.toValue = effect.rawValue
        glowAnimation.beginTime = CACurrentMediaTime()+0.3
        glowAnimation.duration = CFTimeInterval(0.3)
        glowAnimation.fillMode = .removed
        glowAnimation.autoreverses = true
        glowAnimation.isRemovedOnCompletion = true
        layer.add(glowAnimation, forKey: "shadowGlowingAnimation")
    }
} 
```

如何使用它：

```
//TextField with border
textField.doGlowAnimation(withColor: UIColor.red, withEffect: .big)

//Label
label.doGlowAnimation(withColor: label.textColor, withEffect: .small)

//Button
button.doGlowAnimation(withColor: UIColor.red, withEffect: .big) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-07-19T09:12:52.453

发光代码取自：[为 UILabel 和 UIButton 创建发光效果](http://benscheirman.com/2011/09/creating-a-glow-effect-for-uilabel-and-uibutton)

首先，您需要导入 QuartzCore 框架：

```
#import <QuartzCore/QuartzCore.h> 
```

当您创建一个按钮（或在 中`viewDidLoad`，取决于您的代码结构）时，添加以下代码：

```
UIColor *color = button.currentTitleColor;
button.titleLabel.layer.shadowColor = [color CGColor];
button.titleLabel.layer.shadowRadius = 4.0f;
button.titleLabel.layer.shadowOpacity = .9;
button.titleLabel.layer.shadowOffset = CGSizeZero;
button.titleLabel.layer.masksToBounds = NO; 
```

您需要注意两个事件：`UIControlEventTouchDown`和`UIControlEventTouchUpInside`

在`UIControlEventTouchDown`处理程序中，您将添加代码：

```
UIColor *color = [UIColor clearColor];
button.titleLabel.layer.shadowColor = [color CGColor]; 
```

在`UIControlEventUpInside`处理程序中，您将添加代码：

```
UIColor *color = button.currentTitleColor;
button.titleLabel.layer.shadowColor = [color CGColor]; 
```

同样，实现的细节取决于您是通过编程方式还是通过 Interface Builder 创建按钮，但我相信您将能够从这里解决这个问题。

编辑：对于自定义按钮，只需添加以下代码即可：

```
[button setImage:[UIImage imageNamed:@"buttonWithGlow.png"]
        forState:UIControlStateNormal];
[button setImage:[UIImage imageNamed:@"buttonWithNoGlow.png"] 
        forState:UIControlStateHighlighted]; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-03-24T03:01:24.857

以下是我的回答......

使用类别

```
/* ****FAQ?

 1.how to add glow effect on uibutton?
 [UIButton glowUIButton:playButton];

 2.how to remove effect on uibutton?
 [UIButton removeGlowUIButton:playButton];

 Ends*** */

#import <UIKit/UIKit.h>
@interface UIButton (BlinkEffect)
//blink effect category
+( void) glowUIButton:(UIButton *)inputButton;
//remove blink effect
+(void) removeGlowUIButton:(UIButton *)inputButton;
@end

#import "UIButton+BlinkEffect.h"

@implementation UIButton (BlinkEffect)

+(void) glowUIButton:(UIButton *)inputButton
{
    //add blink effect
    CALayer *viewLayer = inputButton.layer;
    viewLayer.shadowOffset = CGSizeMake(0,0);
    CGFloat radius = CGRectGetWidth(inputButton.bounds)/2.0;
    viewLayer.shadowColor = [[UIColor whiteColor] CGColor];
    viewLayer.shadowPath = [UIBezierPath bezierPathWithRoundedRect:CGRectMake(-7,-5.5, 2.5 * (radius), 2.5 * radius) cornerRadius:radius].CGPath;
    viewLayer.shadowRadius = 5.0f;
    viewLayer.shadowOpacity = 1.0f;

    //Let's animate it while we're at it.
    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"shadowOpacity"];
    animation.duration =0.7;
    animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
    animation.fromValue = [NSNumber numberWithFloat:1.0];
    animation.toValue = [NSNumber numberWithFloat:0.0];
    animation.autoreverses = YES;
    animation.repeatCount = 1.0 / 0.0;
    [viewLayer addAnimation:animation forKey:@"shadowOpacity"];

}

+(void)removeGlowUIButton:(UIButton *)inputButton
{
    CALayer *viewLayer = inputButton.layer;
    viewLayer.shadowColor = [[UIColor clearColor] CGColor];
    [viewLayer removeAnimationForKey:@"shadowOpacity"];
}
@end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-26T08:55:56.107

斯威夫特 5

alegelos 用 shadowOpacity、autorepeat 和 shadowOffset 回答：

```
extension UIView {

  enum GlowEffect: Float {
    case small = 0.4, normal = 5, big = 15
  }

  func doGlowAnimation(withColor color: UIColor, withEffect effect: GlowEffect = .normal) {
    layer.masksToBounds = false
    layer.shadowColor = color.cgColor
    layer.shadowRadius = 0
    layer.shadowOpacity = 1
    layer.shadowOffset = CGSize(width: 0, height: 3)

    let glowAnimationRadius = CABasicAnimation(keyPath: "shadowRadius")
    glowAnimationRadius.fromValue = 0
    glowAnimationRadius.toValue = effect.rawValue
    glowAnimationRadius.beginTime = CACurrentMediaTime()+0.3
    glowAnimationRadius.duration = CFTimeInterval(1.3)
    glowAnimationRadius.fillMode = .removed
    glowAnimationRadius.autoreverses = true
    glowAnimationRadius.repeatCount = .infinity
    layer.add(glowAnimationRadius, forKey: "shadowGlowingAnimationRadius")

    let glowAnimationOpacity = CABasicAnimation(keyPath: "shadowOpacity")
    glowAnimationOpacity.fromValue = 0
    glowAnimationOpacity.toValue = 1
    glowAnimationOpacity.beginTime = CACurrentMediaTime()+0.3
    glowAnimationOpacity.duration = CFTimeInterval(1.3)
    glowAnimationOpacity.fillMode = .removed
    glowAnimationOpacity.autoreverses = true
    glowAnimationOpacity.repeatCount = .infinity
    layer.add(glowAnimationOpacity, forKey: "shadowGlowingAnimationOpacity")
  }
} 
```

# wpf - 强制 XML 有关闭标签？

> ID：11556210
> 
> 赞同：2
> 
> 时间：2012-07-19T07:51:47.033
> 
> 标签：wpf, xml, silverlight

我有一个创建 XDocument 的代码，在其中，我使用 System.Xml.Linq 类添加了 XElements。唯一的问题是，如果 xml 节点没有值，它会返回一个已经关闭的标签。IE

```
 <Title /> 
```

但我有点实现创建一个同时显示开始标签和结束标签的 XML。IE

```
<Title></Title> 
```

即使它没有价值。有什么办法可以让它看起来像这样吗？

PS：我将此代码保存在数据库中，在接受数据类型 xml 的表列下，因此添加 string.Empty 在数据库上关闭，因此 FML。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:39:30.543

尝试分配`InnerText`XmlNode 与`""`. 这个动作显然会使其扩展为`<> </>`形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:15:48.003

使用 XDocument.WriteTo 方法将 XDocument 写入 XmlWriter。实现一个自定义 XmlWriter，它包装通过 XmlWriter.Create 获得的标准 XmlWriter，并将您的自定义 XmlWriter 传递给 WriteTo 方法。

自定义 XmlWriter 应该简单地将所有调用未经修改地传递给包装的 XmlWriter，除了 WriteEndElement 方法，它应该是：

```
 public override void WriteEndElement()
    {
        wrapped.WriteFullEndElement();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T07:59:06.223

您可以使用该`[XmlElement(IsNullable = true)]`属性来表示空值`xsi:nil="true"`，这是我所能得到的。

我能找到的唯一替代方法是创建您的 XML 文件，然后使用 StreamReader 和 StreamWriter 将完成的 XML 文档加载到带有 StreamReader 的字符串中，使用该`Replace()`方法查找每个可能为空的标签并将其替换为开始和结束标签，然后使用StreamWriter 用您的新字符串覆盖您的 XML 文件。

[将对象序列化为 XML 时以不同方式表示 Null 值](https://stackoverflow.com/questions/11362313/representing-null-values-differently-when-serializing-objects-to-xml)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T07:58:13.213

尝试用 设置标签的值`string.Empty`。

# google-visualization - 谷歌图表日期 X 轴与时间长度不成比例

> ID：11556215
> 
> 赞同：0
> 
> 时间：2012-07-19T07:52:10.763
> 
> 标签：google-visualization

我有一个简单的图表来绘制一段时间内的数据。数据点是以随机时间间隔采集的，我希望图表 X 轴（时间）能够实际反映这些日期之间的间隔。目前，x 轴始终在两个日期之间使用相同的间距，无论覆盖增量的时间跨度如何。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:13:04.177

[https://developers.google.com/chart/interactive/docs/gallery/annotatedtimeline](https://developers.google.com/chart/interactive/docs/gallery/annotatedtimeline)

应该做你想做的。它支持使用日期绘制图表。

# c# - 如何从组合框中删除对象？

> ID：11556216
> 
> 赞同：2
> 
> 时间：2012-07-19T07:52:11.727
> 
> 标签：c#, winforms, combobox

我有一个包含对象`Foo`类型的组合框，这是`Foo`类：

```
public class Foo
{
    public string name { get; set; }
    public string path { get; set; }
} 
```

是组合框中显示的`Foo.name`文本，`Foo.path`是所选选项的值。

在进行了一些操作后，我想从组合框中删除一个选项。

我试过这些方法：

*   1

    ```
    comboBox2.Items.Remove(@comboBox2.Text); 
    ```

*   2

    ```
    comboBox2.Items.Remove(@comboBox2.SelectedValue.ToString()); 
    ```

*   3

    ```
    Foo ToDelete = new Foo();
    ToDelete.name = @comboBox2.Text;
    ToDelete.path = @comboBox2.SelectedValue.ToString();
    comboBox2.Items.Remove(ToDelete); 
    ```

没有什么对我有用。： / 这该怎么做？

**更新**

这就是我初始化组合框的方式：

```
 string[] filePaths = Directory.GetFiles(sites.paths[comboBox1.SelectedIndex]);

        List<Foo> combo2data = new List<Foo>();

        foreach (string s in filePaths)
        {
            Foo fileInsert = new Foo();
            fileInsert.path = s;
            fileInsert.name = Path.GetFileName(s);
            combo2data.Add(fileInsert);
        }

        comboBox2.DataSource = combo2data;
        comboBox2.ValueMember = "path";
        comboBox2.DisplayMember = "name"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T08:07:04.760

comboBox2.Items.Remove(comboBox2.SelectedValue); 只会从组合框中删除，而不是从绑定到组合框的数据源中删除。您可以将其从数据源中删除并重新绑定数据源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:59:15.850

使用`ComboBox.SelectedIndex`财产。

例如：让我`comboBox1`添加到表单中。在删除按钮中：

```
if (comboBox1.SelectedIndex >= 0)
    comboBox1.Items.RemoveAt(comboBox1.SelectedIndex); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:03:17.450

```
combox1.Remove(takes an object)
Object selectedItem = comboBox1.SelectedItem; 
```

所以你可以这样做`combox1.Remove(selectedItem);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T08:44:35.827

假设您要按索引删除项目：

```
 combo2data.RemoveAt(0); //Removing by Index from the dataSource which is a List

    //Rebind
    comboBox2.DataSource = null;
    comboBox2.DataSource = combo2data;  
    comboBox2.ValueMember = "path";  
    comboBox2.DisplayMember = "name"; 
```

假设您想通过搜索成员值来删除

```
 Foo item = combo2data.Where(f => f.name.Equals("Tom")).FirstOrDefault();
    if (item != null)
    {
        combo2data.Remove(item);
        comboBox2.DataSource = null;
        comboBox2.DataSource = combo2data;  
        comboBox2.ValueMember = "path";  
        comboBox2.DisplayMember = "name";  
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T09:11:13.843

这 2 个命令将从您的数据源中删除一个项目。

```
list.Remove((Foo)comboBox1.SelectedItem); 
```

或者

```
list.Remove(list.Find(P=>P.name == comboBox1.SelectedText)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-17T15:02:17.280

我认为秘诀是首先将 null 属性分配给数据源，然后重新绑定到修改后的集合：

```
int idToRemove = 1;
var items = (cbx.DataSource as List<MyEntity>);
items.RemoveAll(v => v.Id == idToRemove);
rebindCombobox(cbx, items, "Name", "Id");

private void rebindCombobox(ComboBox cbx, IEnumerable<Object> items, String displayMember, String valueMember)
{
    cbx.DataSource = null;
    cbx.DisplayMember = displayMember;
    cbx.ValueMember = valueMember;
    cbx.DataSource = items;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-12T16:07:08.847

也许删除组合框中的所有项目 `comboBox.Items.Clear();`

# php - 如何使用 php 对象？

> ID：11556232
> 
> 赞同：-1
> 
> 时间：2012-07-19T07:53:14.433
> 
> 标签：php, object

我使用基本的 PHP 已经有一段时间了，有些东西我不太明白。

假设我有一个包含多个房地产的数据库，每个房地产都有其属性，如 ID、价格、房间数量等，这些信息仅在一个表中。我在其他表（相同的数据库）中有每个 ID 的每个房地产的地图位置。

如何创建脚本，以便每次我需要访问房地产完整信息（不同的表）时，我不必再次进行所有查询，并执行以下操作：

```
echo realestate->id;
echo realestate->name;
echo realestate->price; 
```

当我打电话给前任时。房地产-> id；脚本如何知道要获取的女巫房地产？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:55:24.507

这个问题太笼统了。你能做的最好的事情是阅读这些文章：

简短而快速的版本是您创建一个类，在其中定义它具有的属性，例如变量和/或其他对象。然后，您可以编写一个函数，该函数启动并从数据库中获取数据（这可能是一个称为构造函数的特殊函数的一部分，每当您创建对象时都会调用该函数）。您可以创建对数据执行各种操作的其他功能，例如输出到网页或更新新信息等。

更详细的版本在这些：

[http://php.net/manual/en/language.oop5.php](http://php.net/manual/en/language.oop5.php)

大概从这里开始：

[http://www.php.net/manual/en/language.oop5.basic.php](http://www.php.net/manual/en/language.oop5.basic.php)

# python - 如何检查Python中是否存在列表

> ID：11556234
> 
> 赞同：6
> 
> 时间：2012-07-19T07:53:23.900
> 
> 标签：python

检查 python 中是否存在列表或字典的最简单方法是什么？

我正在使用以下内容，但这不起作用：

```
if len(list) == 0:
    print "Im not here" 
```

谢谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T07:58:10.510

您可以使用 try/except 块：

```
try:
    #work with list
except NameError:
    print "list isn't defined" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-19T08:00:01.357

对于列表：

```
if a_list:
    print "I'm not here" 
```

dicts 也是如此：

```
if a_dict:
    print "I'm not here" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-19T08:01:04.340

当您尝试引用不存在的变量时，解释器会引发[`NameError`](http://docs.python.org/library/exceptions.html#exceptions.NameError). 但是，依赖代码中变量的存在是不安全的（您最好将其初始化为 None 或其他东西）。有时我用这个：

```
try:
    mylist
    print "I'm here"
except NameError:
    print "I'm not here" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-19T07:56:18.863

如果你能够命名它 - 它显然“存在” - 我假设你的意思是检查它是否“非空”......最pythonic的方法是使用`if varname:`. 请注意，这不适用于生成器/可迭代对象以检查它们是否*会*返回数据，因为结果将始终为`True`.

如果您只想使用某个索引/键，那么只需尝试使用它：

```
try:
    print someobj[5]
except (KeyError, IndexError) as e: # For dict, list|tuple
    print 'could not get it' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-19T11:02:07.630

例子：

```
mylist=[1,2,3]
'mylist' in locals().keys() 
```

或者使用这个：

```
mylist in locals().values() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-28T16:58:40.387

简单的控制台测试：

```
>>> if len(b) == 0: print "Ups!"
... 
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'b' is not defined 
```

* * *

```
>>> try:
...     len(b)
... except Exception as e:
...     print e
... 
name 'b' is not defined 
```

示例展示了如何检查列表是否包含元素：

```
alist = [1,2,3]
if alist: print "I'm here!"

Output: I'm here! 
```

除此以外：

```
alist = []
if not alist: print "Somebody here?"

Output: Somebody here? 
```

* * *

如果您需要检查列表/元组的存在/不存在，这可能会有所帮助：

```
from types import ListType, TupleType
a_list = [1,2,3,4]
a_tuple = (1,2,3,4)

# for an existing/nonexisting list
# "a_list" in globals() check if "a_list" is defined (not undefined :p)

if "a_list" in globals() and type(a_list) is ListType: 
    print "I'm a list, therefore I am an existing list! :)"

# for an existing/nonexisting tuple
if "a_tuple" in globals() and type(a_tuple) is TupleType: 
    print "I'm a tuple, therefore I am an existing tuple! :)" 
```

如果我们需要避免***in globals()***也许我们可以使用这个：

```
from types import ListType, TupleType
try:
    # for an existing/nonexisting list
    if type(ima_list) is ListType: 
        print "I'm a list, therefore I am an existing list! :)"

    # for an existing/nonexisting tuple
    if type(ima_tuple) is TupleType: 
        print "I'm a tuple, therefore I am an existing tuple! :)"
except Exception, e:
    print "%s" % e

Output:
    name 'ima_list' is not defined
    ---
    name 'ima_tuple' is not defined 
```

**参考书目：** 8.15。types — 内置类型的名称 — Python v2.7.3 文档 [https://docs.python.org/3/library/types.html](https://docs.python.org/3/library/types.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-04T12:07:40.700

检查（1）变量**存在**和（2）检查它是**列表**

```
try:
    if type(myList) is list:
        print "myList is list"
    else:
        print "myList is not a list"
except:
    print "myList not exist" 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-11-06T18:02:54.010

```
s = set([1, 2, 3, 4])
if 3 in s:
    print("The number 3 is in the list.")
else:
    print("The number 3 is NOT in the list.") 
```

您可以在此处找到更多相关信息：[https ://docs.quantifiedcode.com/python-anti-patterns/performance/using_key_in_list_to_check_if_key_is_contained_in_a_list.html](https://docs.quantifiedcode.com/python-anti-patterns/performance/using_key_in_list_to_check_if_key_is_contained_in_a_list.html)

# php - 禁止用户在未登录的情况下访问

> ID：11556239
> 
> 赞同：1
> 
> 时间：2012-07-19T07:53:43.210
> 
> 标签：php, html

我目前正在开发一个简单的网络系统，所以用户首先会被引导到一个登录页面，然后是一个处理页面。如果它提供的帐号数据正确，它会被引导到主页面，所以它可以执行一些操作，最后它可以注销。

所以我想问的是：如何防止用户在登录之前访问处理、主页或注销页面，我的意思是，如果我不限制它，登录操作在某种程度上是无用的。我正在使用 wamp 开发网络系统。

我考虑过使用会话变量，但是，我不知道如何检查变量的值。如果我在登录页面开始会话，那么如果我跳过登录页面但直接转到主页，我是否在主页中存在这些会话变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T07:57:12.930

1)`session_start();`在 php 页面顶部添加以初始化会话。

2）添加if语句

```
if($_SESSION['logged_in'] == 1) { ..show page.. } else { show login page } 
```

3）创建一个验证数据的登录表单，如果数据正确，则添加`$_SESSION['logged_in'] = 1;`并重定向到带有注销按钮的配置文件页面。

就这样 ：）！

我建议您查看一些教程，因为它会为您提供更多信息如何做到这一点 - [http://www.intechgrity.com/create-login-admin-logout-page-in-php-w/](http://www.intechgrity.com/create-login-admin-logout-page-in-php-w/)或任何其他通过谷歌链接 - “如何使用会话创建登录/注销功能”。

关于您的问题，在您将放在`session_start();`文件开头的每个页面中，它们将包含您为用户指定的所有会话。

**编辑：**

添加了一些有用的链接 -

[http://www.php.net/manual/en/book.session.php](http://www.php.net/manual/en/book.session.php)

[http://www.tizag.com/phpT/phpsessions.php/](http://www.tizag.com/phpT/phpsessions.php/)

[http://www.w3schools.com/php/php_sessions.asp](http://www.w3schools.com/php/php_sessions.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T01:07:07.123

好吧，这就是我要做的。使用 if 语句检查会话变量是否存在，例如，登录页面中的用户名存在，然后如果它没有显示错误 404 页面，或者将用户重定向到任何错误页面......你可能想要无论如何都要自己创建（以便将它们重定向回登录页面）。

```
<?
session_start();
if(!$_SESSION['username']){
 header("Location: HTTP/1.1 404 File Not Found", 404);
          exit;}
?> 
```

您还可以创建一个新文件并将此代码放在那里，以便您在需要用户登录才能访问它的每个页面上调用它......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-01T05:03:35.120

但是第一次尝试访问非登录页面，然后您将被重定向到登录页面，然后尝试第二次访问相同的非登录页面，即使您没有登录，您也将拥有访问权限。

# c# - 如何在silverlight中实现低级绑定？

> ID：11556242
> 
> 赞同：1
> 
> 时间：2012-07-19T07:53:50.963
> 
> 标签：c#, silverlight, binding, low-level

在我的面试（Silverlight 项目）中，我的面试官问我“如何在 Silverlight 中实现低级绑定”。请问有谁可以说说它是怎么工作的？我真的试图用谷歌搜索它，但失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:05:06.990

检查有关信息

*   [INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口
*   [绑定源概述](http://msdn.microsoft.com/en-us/library/ms743643.aspx)
*   [数据绑定概述](http://msdn.microsoft.com/en-us/library/ms752347.aspx)
*   [数据绑定操作方法主题](http://msdn.microsoft.com/en-us/library/ms752039.aspx)

# java - 将 Scala 库转换为 DLL (.NET)

> ID：11556244
> 
> 赞同：3
> 
> 时间：2012-07-19T07:53:56.383
> 
> 标签：java, scala, dll, ikvm

我正在尝试从 scala 类中创建一个 Dll。我将 IntelliJ 与 SBT 一起使用。我已经找到了一种使用 ikvm-converter 将 .jar 文件转换为 Dll 的方法。现在的问题：当我在 SBT 下使用“包”从我的 .scala 文件中创建一个 .jar 文件并尝试使用 ikvmc 将其转换为 Dll 时，结果库在集成到 C# 时为空...

例如，转换 Jama-Library（用 Java 编写）可以正常工作，而转换 Scama（用 Scala 编写）则不起作用。

有没有办法将scala代码转换为dll？是否有“Scala 到 Java”的转换工具？

最好的问候，克里斯托夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:43:37.347

我不了解 .NET，但从 SK-logic 和您对问题的评论来看：*不*`sbt package`包括Scala 运行时库，因为它假定您要将项目导出为要在其他 Scala 项目中使用的库。

 *因此，您将需要创建一个包含运行时的“胖”jar。例如，在[此博客](http://tountas-software.blogspot.co.uk/2010/07/scala-on-net-via-ikvm.html)中，您可以看到作者如何通过转换项目 jar 和运行时 jar 来创建完全独立的可执行文件。

sbt 有不同的工具可以做到这一点。最简单的是[sbt-assembly](https://github.com/sbt/sbt-assembly)，但你最终会得到一个非常大的文件，因为它只是添加了整个运行时。如果这是一个问题，您可能希望使用[proguard 插件](https://github.com/nuttycom/sbt-proguard-plugin)过滤运行时。有关此主题的更多信息，[请参阅另一个 StackOverflow 条目](https://stackoverflow.com/questions/2887655/making-stand-alone-jar-with-simple-build-tool)。*

# c++ - C++：fork/exec 还是 pthread？

> ID：11556245
> 
> 赞同：4
> 
> 时间：2012-07-19T07:53:57.597
> 
> 标签：c++, pthreads, exec, fork

我正在编写一个程序，一旦按下按钮，我必须执行一个服务器进程（只有当我决定杀死他时才会停止）。
为了执行这个过程，我决定使用 fork/execv 机制：

```
void Command::RunServer() {

    pid = fork();

    if (pid==0) {
        chdir("./bin");
        char str[10];
        sprintf(str,"%d",port);
        char *argv[] = {"./Server", str};
        execv("./Server",argv);
    }
    else {
        config->pid = pid;
        return;
    }
} 
```

在“按钮按下”的方法中，我这样做：

```
command->RunServer(); 
```

几天前它似乎工作得很好......现在我收到错误：

```
main: xcb_io.c:221: poll_for_event: Assertion `(((long) (event_sequence) - (long) (dpy->request)) <= 0)' failed. 
```

我应该尝试切换到 pthread 吗？我做了什么坏事吗？

谢谢，
欧

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T08:37:07.903

当您执行`fork()`此操作时，您的进程的所有文件描述符都将复制到新的文件描述符中。并且当你这样做时，`exec*()`所有文件描述符也会被保留，除非它们被标记为 flag `FD_CLOEXEC`。

我的猜测是某些库（可能是 Xlib）使用的某些 fd 被新进程继承，并且重复导致程序混乱。

在这些情况下，如果您想保持标准 I/O 处于打开状态，则 BSD 函数`closefrom()`( )很有用。`closefrom(3)`不幸的是，在 linux 中没有这样的功能，所以你必须做一个封闭的循环或类似的事情：

```
int open_max = sysconf (_SC_OPEN_MAX);
for (int i = 3; i < open_max; i++)
    close(i); 
```

[您可以在此处](https://stackoverflow.com/questions/899038/getting-the-highest-allocated-file-descriptor)阅读有关此问题的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T09:21:19.803

在对 , 的调用中`execv`，`argv`必须以空指针终止。前一行应该是：

```
char* argv[] = { "./Server", str, NULL }; 
```

# php - facebook登录和注销问题php-sdk

> ID：11556247
> 
> 赞同：0
> 
> 时间：2012-07-19T07:54:01.713
> 
> 标签：php, facebook, facebook-php-sdk

这是关于使用 php-sdk 的最新 fb 登录的一个问题中的 2 个问题：

1.  注销时，我正在从 facebook 和我的网站注销用户，但我只希望他注销我的网站而不是 facebook。我知道像 8tracks 这样的可能的 cos 网站正在使用它。我正在执行以下操作：example.php： `$logoutUrl = $facebook->getLogoutUrl(array( 'next'=>'http://mysite.info/facebook/examples/logout.php' ));`

logout.php： `session_start(); session_destroy(); //ovewrites the cookie setcookie ('fbsr_APPID', ' ', time() - 3600); setcookie ('fbsr_APPID', ' ', time() - 3600, "/", '.'."mysite.com"); header('Location: http://mysite.com/facebook/examples/example.php');` 我哪里错了？

1.  当用户输入他的登录凭据并且站点转到 redirrect_uri 时，它会在我的 url 上附加很多加密的东西：登录代码： `$loginUrl = $facebook->getLoginUrl(array( 'redirect_uri'=>'http://mysite.com/facebook/examples/example.php' ));`

网址：`http://mysite.com/facebook/examples/example.php?state=be53118414cc2da37146dcfa1db8a0a1&code=AQDtVYk_Ba5_NKGXTOGIuUMsmVo28zwAnbU8tuv2RZdUUlhvCvRGGWTVrv5HfvnGwzm-LwCVuK7Z_fFFyoC3cHm1BtZ6kSjijrlSknDZJ6cZ1XjPU31VCi4I0D2N4nBWv1IvXxkMqLoNZC0dLe4SCYbjyMl4ZfcDgWrlaxKWjYgamMAL7m44_5XdVUJzmaNO6_s#_=_`

它看起来很丑，我想摆脱它。

我已经尝试了很多组合，比如让 redirect_uri 指向一个页面，然后将我的用户重定向到另一个页面，但这并不能正确创建会话。我也不想使用 javascript-sdk 因为它被弹出窗口阻止程序阻止。

提前谢谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:49:29.607

> 注销时，我正在从 facebook 和我的网站注销用户，但我只希望他注销我的网站而不是 facebook。我知道像 8tracks 这样的可能的 cos 网站正在使用它。

那么他们可能根本不使用FB注销功能，而只是调用他们自己的系统注销功能。

顺便说一句，Facebook[平台政策](https://developers.facebook.com/policy/)**要求**您向用户提供一个链接，让他一次性退出您的网站*和*Facebook。（参见*I. 特性和功能，第 6 点。*）

 **> 我已经尝试了很多组合，比如让 redirect_uri 指向一个页面，然后将我的用户重定向到另一个页面，但这并不能正确创建会话。

然后你“太早”重定向了——你必须让 Facebook SDK 有机会首先读取这些参数。

初始化 Facebook 类，然后重定向——应该可以。**

# objective-c - 将旋转的文本绘制到父坐标系

> ID：11556249
> 
> 赞同：1
> 
> 时间：2012-07-19T07:54:03.727
> 
> 标签：objective-c, position, rotation, quartz-2d

我有一个 UIView，我在“drawRect”函数中手动绘制它。它基本上是一个坐标系，在 Y 轴上有“值”，在“X 轴”上有“时间”。

由于空间问题，我希望时间戳是垂直的，而不是水平的。为此，我使用：

```
CGContextSaveGState(ctx);              //Saves the current graphic context state
CGContextRotateCTM(ctx, M_PI_2);       //Rotates the context by 90° clockwise
strPos = CGContextConvertPointToUserSpace(ctx, strPos); //SHOULD convert to Usercoordinates
[str drawAtPoint:strPos withFont:fnt]; //Draws the text to the rotated CTM
CGContextRestoreGState(ctx);           //Restores the CTM to the previous state. 
```

ctx (CGContextRef)、strPos (CGPoint) 和 str (NSString) 是变量，已为“水平文本”正确且正确地初始化，其宽度为文本高度。

虽然这段代码在 iPhone 3 上完美运行，但它让我在 iPhone 4 (Retina) 上一团糟，因为 CGContextConvertPointToUserSpace 函数产生完全不同的结果，即使 iPhone 的坐标系应该保持不变。

我也尝试使用 CGAffineTransform，但结果相同。

总结一下我的问题：如何将文本绘制到父坐标系中的计算位置（0、0 为左上角）？

* * *

在再次研究了有关 Quartz 2D 的 Apple 文档后，我意识到，Pi/2 的旋转将我所有的书写都移到了屏幕左侧。

我可以通过将 CTM 平移 +height 使文字出现在垂直线上。我会继续努力，但仍然很乐意得到答案。

编辑：感谢lawicko的提醒，我能够解决这个问题。有关详细信息，请参阅答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:05:00.630

我要感谢lawicko 指出这一点。在我的测试中，我犯了两个错误……但他当然是正确的。使用 CGContextShowTextAtPoint 是最简单的解决方案，因为它不需要旋转整个 CTM。

再次谢谢你。现在，对于我的问题的实际答案。要在 x/y 位置绘制旋转文本，以下代码适用于我。

```
CGAffineTransform rot = CGAffineTransformMakeRotation(M_PI_2);    //Creates the rotation
CGContextSelectFont(ctx, "TrebuchetMS", 10, kCGEncodingMacRoman); //Selects the font
CGContextSetTextMatrix(ctx, CGAffineTransformScale(rot, 1, -1));  //Mirrors the rotated text, so it will be displayed correctly.
CGContextShowTextAtPoint(ctx, strPos.x, strPos.y, TS, 5);         //Draws the text 
```

ctx是CGContext，strPos是父坐标系中想要的位置，TS是一个char数组。

再次感谢lawicko。如果不是您的建议，我可能会永远搜索。也许这个答案会帮助遇到同样问题的其他人。

# c# - 在 .NET Compact Framework (C#) 中使用 -Xms8M 参数启动 java 虚拟机失败

> ID：11556252
> 
> 赞同：0
> 
> 时间：2012-07-19T07:54:10.980
> 
> 标签：c#, java, compact-framework

我正在寻找大约 1 1/2 天的解决方案，但无法直截了当。我试图在PocketPC 2003 中从我们的C# 应用程序中启动一个*.lnk 文件。此 *.lnk 文件包含指向 evm.exe 的链接，该链接是 PocketPC 的 JVM。传递的参数是（除其他外）-Xms8M，它告诉 JVM 保留至少 8MB 的内存。

如果直接从 Windows Explorer 启动没有问题。

现在我在 C# 中创建了一个指向 *.lnk 文件的进程。当我尝试启动它时，JVM 控制台打开并显示以下两个错误之一：“EVM 执行历史记录太大”或“无法初始化堆（阶段 1）”（或类似的东西）。

如果我删除提到的参数，应用程序就没有问题。

由于这种行为，我假设分配给新创建的进程的内存太少。这是现实的吗？如果：有没有办法为新创建的进程分配更多内存？还是我完全错了，必须采取其他方式（如果有的话）？

**编辑：**
--CodeSnippet
`this.myStartProcess = new Process { StartInfo = { FileName = appName },EnableRaisingEvents = true };`
`this.myStartProcess.Start()`
----CodeSnippet--

**编辑 2：**
经过更多研究后发现，真正的问题是可用的资源非常有限，随着时间的推移被我的启动器应用程序（启动后总共大约 1.8 MB）吃掉了。
为了改进，我开始研究垃圾收集器在 Windows Mobile 中的工作原理，因此使用了两种技术来启动虚拟机。第一个是通过将其发送到后台（表单的方法）并等待垃圾收集器完成（ ）
来减少我自己的应用程序占用的内存。 之后，我在尝试启动 VM 之前在程序内存中寻找 9 MB 的可用空间。如果没有足够的空间，我会尝试将所需的内存从存储内存转移到程序内存。`SendToBack()``GC.WaitForPendingFinalizers()`

这两种技术改善了很多！

我的启动器应用程序仍然存在问题。当我的启动器应用程序在前面时，分配的字节（具体的字符串和装箱对象）会随着时间的推移而增加......在 10 分钟内大约有 30 kb。24 小时后，设备将自动重启。目前我假设发射器在此期间总共会在前面大约 10 分钟。尽管如此，内存泄漏并不是一件好事。有人知道如何追捕吗？

提前致谢
最好的问候
马塞尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:11:15.417

看起来您有两个可能发生这种情况的原因：

*   提供给 MinWorkingSet 和 MaxWorkingSet 属性的默认值不能满足您的要求。来自[http://msdn.microsoft.com/en-us/library/system.diagnostics.process.maxworkingset.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.maxworkingset.aspx)

> 进程的工作集是物理 RAM 内存中进程当前可见的内存页集。这些页面是常驻的，可供应用程序使用而不会触发页面错误。
> 
> 工作集包括共享数据和私有数据。共享数据包括包含应用程序执行的所有指令的页面，包括 .dll 文件和 system.dll 文件中的页面。随着工作集大小的增加，内存需求也会增加。
> 
> 进程具有最小和最大工作集大小。每次创建进程资源时，系统都会为该进程保留与最小工作集大小相等的内存量。当进程处于活动状态时，虚拟内存管理器尝试至少保持最小的内存量，但它永远不会超过最大大小。
> 
> 系统设置默认的工作集大小。您可以使用 MaxWorkingSet 和 MinWorkingSet 成员修改这些大小。但是，设置这些值并不能保证内存将被保留或常驻。

*   实际上不可能在机器上为 JVM 保留所需的内存，因为操作系统管理内存的方式（我觉得这真的很令人惊讶，因为每个现代操作系统都支持虚拟内存）

# jboss - 从 OSGi-bundle 在 JBoss 7.1.1 中动态加载类时发生 ClassNotFoundException

> ID：11556255
> 
> 赞同：2
> 
> 时间：2012-07-19T07:54:16.557
> 
> 标签：jboss, classpath, osgi, classnotfoundexception, dynamic-class-loaders

我在 JBoss 7.1.1 中部署了一个简单的 OSGi 测试包，并尝试通过执行动态实例化 Jacorb ORB

```
Class clazz = Class.forName("org.jacorb.orb.ORB"); 
```

我得到的只是

```
java.lang.ClassNotFoundException: org.jacorb.orb.ORB from [Module "deployment.test:1.0.0" from Service Module Loader] 
```

我已经做了什么：

*   在 JBoss 配置中，`standalone.xml`我为 osgi-subsystem 添加了能力`<capability name="org.jacorb" startlevel="1"/>`，以便`org.jacorb`加载模块。这已经解决了我的测试包安装失败的问题。
*   我在我的`Dependencies`-Descriptor中声明了（也尝试过使用和不使用该选项）：`org.jacorb``MANIFEST.MF``export``Dependencies: org.jacorb export`

*   我将以下内容添加`jboss-deployment-structure.xml`到我的`META-INF`

    <?xml version="1.0" encoding="UTF-8"?> <jboss-deployment-structure> <deployment> <dependencies> <module name="org.jacorb" /> </dependencies> </deployment> < /jboss-部署结构>

我还对 ClassLoaders 进行了实验，并意识到 ContextClassLoader 是`null`. 但最后，我不能将其作为非测试代码来实现，因为`Class.forName()`无法更改为使用特定的类加载器。

那么为什么我会得到这个 ClassNotFoundException 呢？

提前致谢

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T05:11:42.513

经过几个小时的挖掘，我完成了这个难题；-)

1.  在`standalone.xml/domain.xml`JBoss 配置中，我`<capability name="org.jacorb" startlevel="1"/>`在下面的`<subsystem xmlns="urn:jboss:domain:osgi:1.2" activation="lazy">`部分中添加了`<capabilities>`
2.  在`META-INF/MANIFEST.MF`我添加`DynamicImport-Package: org.jacorb.orb`以允许类加载器在运行时动态扩展类路径
3.  `Thread.currentThread().setContextClassLoader(getClass().getClassLoader()`通过`null`之前设置的上下文类加载器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:10:56.657

如果你有一个普通的 OSGi 包并且它应该看到 org.jacorb.orb.ORB 类，那么你应该有： 1\. 必须在 osgi 框架中导出所有 org.jacorb 包和子包。2\. 你的包必须导入所有你使用的包——例如“Import-Package:org.jacorb.orb” 检查版本是否兼容。检查您是否导入了所有包和子包。org.jacorb 的导入并不意味着 org.jacorb.orb。

如果两个条件都满足，那么你的 bundle 的 Bundle Classloader 应该能够看到 org.jacorb.orb.ORB。

# macros - 如何理解 (void*)0

> ID：11556256
> 
> 赞同：0
> 
> 时间：2012-07-19T07:54:18.953
> 
> 标签：macros, null

最近在我的练习中，我发现了一个问题 (void*)0 回答了 NULL 指针如何实际理解这一点。

这怎么能理解？难道这就是宏NULL的定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:03:47.053

是的，实际上 ((void *)0) 是 NULL 指针的正确定义。

# mysql - MySQL，粘合表计数

> ID：11556260
> 
> 赞同：1
> 
> 时间：2012-07-19T07:54:25.297
> 
> 标签：mysql

在粘合表 product_options 中，我有以下字段... id、productid、optionid

```
CREATE TABLE `product_options` (
`id`  int NULL AUTO_INCREMENT ,
`productid`  int NULL ,
`optionid`  int NULL ,
PRIMARY KEY (`id`)
)
;

INSERT INTO product_options 
(productid, optionid)
VALUES 
(1,2),(1,4),(1,5),(1,6),(1,7),(2,4),(2,3),(2,1),(2,7),(3,1),(3,4),(4,1),(4,7),(4,6),(5,1) 
```

（见[http://www.sqlfiddle.com/#!2/3d309](http://www.sqlfiddle.com/#!2/3d309)）

现在，我想计算不同选项组合的产品数量。

例如，我追求的结果是...
选项 ID 为 6 和 7
的产品数量 = 2 所有选项 ID 为 6、7 和 1
的产品数量 = 1 选项 ID 为 1 的产品数量 = 4

我的大脑冻结了，无法弄清楚-请帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:59:33.853

```
select productid from product_options
where optionid in (6,7)
group by productid 
having count(distinct optionid)=2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:58:20.717

请尝试以下：

```
select count(*) as count0,opt from
(select productid,group_concat(optionid)as opt from product_options
where optionid in (1)
group by productid 
having count(distinct optionid)=1) a    
UNION    
select count(*) as count0,opt from
(select productid,group_concat(optionid)as opt from product_options
where optionid in (6,7)
group by productid 
having count(distinct optionid)=2) b    
UNION    
select count(*) as count0,opt from
(select productid,group_concat(optionid)as opt from product_options
where optionid in (1,6,7)
group by productid 
having count(distinct optionid)=3) c 
```

[SQL 演示在这里](http://www.sqlfiddle.com/#!2/3d309/49)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:01:11.077

尝试这个

```
select productid  from product_options
where optionid in(6,7)
group  by productid 
having COUNT(*)=2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T07:58:19.733

你的意思是这样的吗？

```
SELECT * 
FROM product_options 
WHERE optionid IN (6, 7) 
GROUP BY productid 
```

或者如果你只是想`COUNT`试试

```
SELECT COUNT(DISTINCT(productid)) 
FROM product_options 
WHERE optionid IN (6, 7) 
```

# eclipse - 如何在eclipse中保存打开的编辑器？

> ID：11556262
> 
> 赞同：1
> 
> 时间：2012-07-19T07:54:38.850
> 
> 标签：eclipse, eclipse-plugin

我需要一个eclipse插件，用来保存打开的编辑器。我知道 Extended VS Presentation 很好，但是还有其他更好的插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:03:22.000

此代码应在 Eclipse 中保存所有打开（脏）的编辑器：

```
IEditorReference[] editorReferences = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().getEditorReferences();
NullProgressMonitor monitor = new NullProgressMonitor();
if ( editorReferences != null ){ 
    for (IEditorReference iEditorReference : editorReferences) {
        IEditorPart editor = iEditorReference.getEditor(false);
        if ( editor.isDirty() )
            editor.doSave(monitor);
    }
} 
```

在较新版本的 eclipse 中，您可以创建一个小快捷方式：

```
IEditorPart[] dirtyEditors = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().getDirtyEditors();
for (IEditorPart iEditorPart : dirtyEditors) {
    iEditorPart.doSave(monitor);
} 
```

希望有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-12T07:10:54.620

您还可以一次保存所有编辑器..

```
private void doCloseEditors(IWorkbenchPage pActivePage) {
    ArrayList<IEditorReference> openParts = new ArrayList<IEditorReference>();
    for (IEditorReference part : pActivePage.getEditorReferences()) {
        if (part.isDirty()) {
            openParts.add(part);
        }
    }
    if (openParts.size() > 0) {
        pActivePage.closeEditors(openParts.toArray(new IEditorReference[0]), true);
    }
} 
```

# css - 无法在 Chrome 和 Safari 中定位背景图片

> ID：11556264
> 
> 赞同：2
> 
> 时间：2012-07-19T07:54:40.140
> 
> 标签：css, background-image

我的 CSS 中有以下代码：

```
#photos {
   width:340px;
   height:250px;
   background-image: url('../images/photosBoxIcon.png'); 
   background-position: top 20px right 20px;
   background-repeat:no-repeat;
   background-color:#211f1f;
   border: 1px solid #666666;
   float:left;
   margin-top:20px;
   border-radius: 2px;
   -webkit-border-radius: 2px;
  -moz-border-radius: 2px;  
} 
```

虽然这段代码成功地将我的背景图标定位在 Firefox 和 Opera 中，但 Chrome 和 Safari 将图标定位在左上角。

在 chrome 中检查代码时，我可以看到该行被`background-position: top 20px right 20px;`交叉，并且行的开头有一个警告标记，这意味着 Chrome 认为该代码不正确。谁能发现我的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:04:22.250

使用任何一个

```
background-position: top right; 
```

或者

```
background-position:20px 20px; 
```

你也可以使用速记，如：

```
background:#211f1f url('../images/photosBoxIcon.png') 20px 20px no-repeat; 
```

[http://www.w3schools.com/cssref/pr_background-position.asp](http://www.w3schools.com/cssref/pr_background-position.asp)

```
"background-position: top 20px right 20px;" 
```

它的语法不正确可能是 chrome 无法正确显示结果的原因

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T08:29:56.577

```
background-position: top right 20px 20px; 
```

# c# - DatagridTemplateColumn 中的动态

> ID：11556266
> 
> 赞同：2
> 
> 时间：2012-07-19T07:54:51.600
> 
> 标签：c#, .net, wpf, xaml

如果行中的值 =“无付款”我需要在数据模板中显示 ComboBox，否则我不会在行中显示组合框，我该怎么做？

这是我的数据网格模板：

```
<DataGridTemplateColumn Header="Time">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBlock VerticalAlignment="Center" Text="{Binding date_payment, Converter={StaticResource ByteArrayConverter}}" Width="135" />
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
    <DataGridTemplateColumn.CellEditingTemplate>
        <DataTemplate>
            <ComboBox IsReadOnly="False" SelectionChanged="ComboBox_SelectionChanged_1" Style="{DynamicResource ComboBoxStyle}" Height="Auto" ItemsSource="{Binding}" Width="135">
                <ComboBox.BorderBrush>
                    <SolidColorBrush Color="{DynamicResource Color1}"/>
                </ComboBox.BorderBrush>
                <ComboBox.Items>
                    <ComboBoxItem>Payment</ComboBoxItem>
                </ComboBox.Items>
            </ComboBox>
        </DataTemplate>
    </DataGridTemplateColumn.CellEditingTemplate>
</DataGridTemplateColumn> 
```

我认为需要使用事件`LoadinRow`，但我想不出，如果我设置`Name`我的组合框那么不可见（在代码中）？

请帮忙！谢谢 ：）

* * *

## **回答：**

```
<Setter Property="Visibility" Value="Hidden"/>
  <Style.Triggers>
    <DataTrigger Binding="{Binding date_payment, Converter={StaticResource ByteArrayConverter}}" Value="Не оплачено">
  <Setter Property="Visibility" Value="Visible" />
 </DataTrigger>
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:53:45.437

您无需注册活动。`DataTrigger`只需在您的`ComboBox`声明中创建一个。

```
 <ComboBox>
         <ComboBox.Triggers>
            <DataTrigger Binding="{Binding [Name of your property]}" Value="No payment">
               <Setter Property="Visibility" Value="Collapsed"/>
            </DataTrigger>
         </ComboBox.Triggers>
      </ComboBox> 
```

另一种（可能更好）的方法是在您绑定到的对象上实现一个属性，并使用一个布尔值指示客户的当前状态（例如，NoPayment 等）。`Visibility`然后，您可以使用将此状态转换为目标值的转换器将此值绑定到 ComboBoxes属性`Visibility`。

# python - 如何使用 sikuli 比较两个图像的内容？

> ID：11556270
> 
> 赞同：1
> 
> 时间：2012-07-19T07:55:04.133
> 
> 标签：python, sikuli

```
import shutil
import os
wait(5)
dir = os.path.dirname(getBundlePath()) # the folder, where your script is stored
img = capture(SCREEN) # snapshots the screen
shutil.move(img, os.path.join(dir, "shot.png")) # to make it persistent
wait(10)
dir = os.path.dirname(getBundlePath()) # the folder, where your script is stored
img2 = capture(SCREEN) # snapshots the screen
shutil.move(img2, os.path.join(dir, "shot2.png")) # to make it persistent
if img == img2:
    popup("hello")
else:
    popup("hi") 
```

它总是弹出 hi not hello ...虽然我没有改变屏幕。

我可以理解这两个是两个不同的图像名称，这就是为什么 else 块总是工作的原因。但是是否可以比较这两个图像。两张图片的内容，两者之间存在一些差异。无法上传代码，因此已对其进行了评论。如果有人知道，请提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:23:58.600

[http://doc.sikuli.org/finder.html](http://doc.sikuli.org/finder.html) <-- another way for looking inside of something

Ideally Sikuli works if you already have an image that your comparing against what's found on the screen. Below I dynamically create a region, then snap a picture, and finally compare the saved picture against what in the dynamically created region.

```
imagePath1 = capture()  #snapshots the screen
image1 = exists(imagePath1)  #Create a Match object
imagePath2 = capture()  #snapshots the screen
image2 = Pattern(imagePath2)  #Create a Matach Object
myRegion = Region(image1)  #make new region from the match object
if myRegion.exists(image2): #look in the region
    print "hello" #yeah it's in the region of the screen
else:
    print "hi"  #nope not there.... 
```

This one is more like what you want i beleive. You can take three different pictures and then a smaller picture of the one yout want. If you call `getScore()` it will return precent match [http://doc.sikuli.org/match.html#Match](http://doc.sikuli.org/match.html#Match)

```
imagePath1 = capture('Match obj take large picture') # snapshots the screen
matchObj1 = exists(imagePath1) #Make match object

imagePath2 = capture('Match obj take large picture') # snapshots the screen
matchObj2 = exists(imagePath2) #Make match object

imagePath3 = capture('Match obj take large picture') # snapshots the screen
matchObj3 = exists(imagePath3) #Make match object

imagePath4 = capture('Target, take small picture') # snapshots the screen 
patternIwant = Pattern(imagePath4) #Make a pattern object search against

matchList = [matchObj1, matchObj2, matchObj3]

for m in matchList:
    arg = m.exists(patternIwant)
    if arg != None:
        print 'image score  ', arg.getScore()
    else:
        print 'no match'
    if m.exists(patternIwant):
        print "hello"
    else:
        print "hi" 
```

# javascript - 遍历表查找第一个具有 css csstablelisttdselected 的 td 文本

> ID：11556272
> 
> 赞同：0
> 
> 时间：2012-07-19T07:55:14.567
> 
> 标签：javascript, jquery

```
 <table id="tableWorkList" class="csstablelist" cellspacing="1" cellpadding="1">
<tr><td></td><td></td><td></td><td></td><td></td></tr>
    <tr>
    <td class="csstablelisttdselected" style="display: none;">
    246
    </td>
    <td class="csstablelisttdselected" style="display: none;">
    2
    </td>
    <td class="csstablelisttdselected">
    n
    </td>
    </tr>
    </table> 
```

**我必须遍历表格并找到第一个具有 css 类名称 csstablelisttdselected 的单元格文本**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:57:18.273

试试这样：

```
$('table td.csstablelisttdselected:first').text(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:57:29.193

然后你不需要循环

```
var tdtext = $('#tableWorkList td.csstablelisttdselected:eq(0)').text(); 
```

查询在表 id'ed 下得到所有`td`的。`class csstablelisttdselected``tableWorkList`

`eq(0)`获取查询收集的集合中的第一个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T07:57:43.463

您可以在 jQuery 中用作

```
$('#tableWorkList').find('.csstablelisttdselected:eq(0)').html(); 
```

# objective-c - 相同的词法范围对象是否保留在引用它的块中？

> ID：11556273
> 
> 赞同：0
> 
> 时间：2012-07-19T07:55:18.443
> 
> 标签：objective-c, block

我已经测试了以下代码。

```
// Employee.h
@interface Employee : NSObject
@end

// Employee.m
@implement Employee
@end

// main.m
int main() {
    NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];
    Employee* john = [[Employee alloc] init];

    void (^print)(void) = ^{
        NSLog(@"employee = %@", john);
    }

    [john release];
    [pool release];
    return 0;
} 
```

我使用仪器跟踪了 john 的引用计数，但打印块中 john 的引用计数似乎没有增加。

我认为约翰应该被捕获并保留在打印块中。

我有什么误解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:33:56.373

这里的块是基于堆栈的块。基于堆栈的块不保留本地上下文。

`john`当块被复制到堆中时将被保留（通过调用`[print copy]`，不要忘记你需要或者`release`你`autorelease`复制的块）。

ARC 知道何时必须复制和释放块，它会在必要时处理。你应该考虑使用它，它会让你的生活更容易处理块。

* * *

编辑

试试这个：

```
void (^print)(void) = [^{
        NSLog(@"employee = %@", john);
    } copy];

...

[print release]; 
```

# c++ - 函数“srand”无法解决？（我正在使用 Ubuntu 操作系统和 Eclipse）

> ID：11556274
> 
> 赞同：-1
> 
> 时间：2012-07-19T07:55:19.747
> 
> 标签：c++

这是我第一次使用 Eclipse 进行 C++ 编程，但遇到了问题。我已经包含“time.h”，但错误（函数'srand'无法解决）仍然出现。请帮我！非常感谢

```
#include "iostream"
#include "time.h"
using namespace std;
#define MAX 100
void InputArray(int a[],int n)
{

    srand((unsigned)time(NULL)); //error here Function 'srand' could not be solved
        a[0]=rand()%10; //and here 
        for(int i=1; i<n; i++)
            a[i]=a[i-1] + rand()%10 + 1;
}
int main() {
    int a[MAX], n;
    InputArray(a,n);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T07:56:21.107

你忘了

```
#include <stdlib.h> 
```

# java - Java：如何动态同步方法

> ID：11556278
> 
> 赞同：0
> 
> 时间：2012-07-19T07:55:43.803
> 
> 标签：java, synchronization

我有以下用例：我有一个有两个方法 m1 和 m2 的类。通常，m1() 不需要同步，但是如果有人调用 m2()，那么只要 m2() 正在执行，m1() 就需要同步。为了实现这一点，我想出了以下代码。你能请。评论它并提出更好的选择？

注意：我意识到这种情况是不切实际的，因为例如，如果某个线程在 m1 的中间，而其他一些线程调用 m2，那么就会出现问题（如果有人指出如何处理，那就太好了那）; 尽管如此，我发现思考这个很有趣。

```
public class DynamicSync
{
    volatile MyLock lock;   
    private final MyLock DUMMY_LOCK = new DummyMyLock();
    private final MyLock SYNCHRONIZED_LOCK = new SynchronizedMyLock();

    public DynamicSync()
    {
        lock = DUMMY_LOCK;
    }

    public void dynamicallySynchronizedMethod() // this is method m1() in the question above
    {
        lock.lock();
        // some logic
        lock.unlock();
    }

    public void setLockAndExecuteLogic() // this is method m2() in the question above
    {       
        synchronized(SYNCHRONIZED_LOCK)
        {
            lock = SYNCHRONIZED_LOCK;       
            // some logic                               
        }
    }

    interface MyLock
    {
        void lock();
        void unlock();
    }

    class DummyMyLock implements MyLock
    {
        @Override
        public void lock() 
        {
        }

        @Override
        public void unlock() 
        {
        }       
    }

    class SynchronizedMyLock implements MyLock
    {
        @Override
        public synchronized void lock() 
        {
            // no op
        }

        @Override
        public void unlock() 
        {
            lock = DUMMY_LOCK;
        }       
    }
} 
```

编辑：实际的问题是：我正在设计一个对象池，我需要知道有多少和哪些对象被发出，还有多少剩余。所以我正在考虑维护两个集合：origSet 将是一个包含所有对象的 HashSet，而 dynaSet 将是一个 ConcurrentSkipListSet，我从中发出对象并将它们放回。如果我需要找出 origSet 和 dynaSet 之间的区别瞬间，我需要“冻结” dyanSet 直到计算出差异。但是获得这种差异将是一个非常罕见的操作，因此我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T08:04:38.310

Java 为多线程同步提供了广泛的 API，因此我强烈建议您不要尝试编写类似的东西，如果您不想在竞争条件的地狱中受苦受难。

如果您已经阅读过[http://www.amazon.com/Java-Concurrency-Practice-Brian-Goetz](http://www.amazon.com/Java-Concurrency-Practice-Brian-Goetz)这本书，那么您现在应该：

*   最好的解决方案是保持不可变并将线程同步问题排除在您的世界之外。
*   如果您不能保持不变，请保持防御性并在共享内部属性时制作防御性副本。这称为“安全发布”
*   如果您不能保持不变，请至少尝试使用并发集合来让您的生活更轻松。
*   如果您真的需要开发自己的锁定系统，请查看 Java ReadWriteLock。

根据您最后的评论，我有两个建议：

1.  如果您只需要获取集合的大小，而不需要使用数据对集合执行任何操作。我认为您根本不需要同步。您对 getDynaSize 的调用将返回最后一个可用值：不确定何时使用它是当前值，但除非您清楚地看到处理方法中的竞争条件，否则根本不要同步。（也许你想给我们更多的细节？）

2.  如果确实需要锁定，请使用 ReadWriteLock，

    *   它是一个可重入锁，因此如果一个线程已经获取，则后续尝试获取将是非阻塞的，它允许多个读取器进入，但只有一个写入器。
    *   每次需要将元素添加到并发集合中时，您都需要获取编写器，并在添加后释放它。此外，您必须在获取大小之前获取写入器锁，并在完成处理后释放它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T07:58:11.267

~~安全起见，让它们同步。除非您能够为您提出的任何想法或此处可能提出的任何建议提出并发正确性证明，否则风险是不值得的。~~

编辑：我放弃了。我终于明白这很像一个共享读锁，甚至在阅读另一个这么说的答案之前；-)`m1()`声明一个共享读锁并`m2()`声明一个写锁。那么任意数量的`m1()s`可以同时运行但是`m1()`&`m2()`不能同时运行，并且没有两个`m2()s`可以同时运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T08:50:59.733

我建议[`ReadWriteLock`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReadWriteLock.html)为此使用 a 。`m1()`用`readLock()`和保护。`m2()`_`writeLock()`

# pinterest - Pin It 按钮不显示计数

> ID：11556281
> 
> 赞同：3
> 
> 时间：2012-07-19T07:55:57.827
> 
> 标签：pinterest

我已集成“Pin It”按钮以在 pinterest.com 上分享我的产品图片。但它不会在我网站上的 pin it 按钮前面显示 pin 数。我写了以下代码。

这是我网站上的 pin it 按钮

```
<a class="pin-it-button" target="_blank" count-layout="horizontal" href="http://pinterest.com/pin/create/button/?url=http://www.techmodi.com/demo/bliise/products/MTY=/MTQ=/products&media=http://www.techmodi.com/demo/bliise/uploads/product/thumb/1341565713_89a084d6ff75306b0b7ed4c0a1d61916_medium.jpg&description=Nicholson Bag Black">
<img border="0" title="Pin It" src="//assets.pinterest.com/images/PinExt.png">
</a> 
```

＆此 js 文件包含在`<body>`标签关闭之前。

```
<script type="text/javascript" src="assets.pinterest.com/js/pinit.js"></script> 
```

如果有人有，请建议我解决方案。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-10T14:51:55.213

You need to load the JavaScript file asynchronously. Replace your `script` tag with the following:

```
<script type="text/javascript">
(function(d){
  var f = d.getElementsByTagName('SCRIPT')[0], p = d.createElement('SCRIPT');
  p.type = 'text/javascript';
  p.async = true;
  p.src = '//assets.pinterest.com/js/pinit.js';
  f.parentNode.insertBefore(p, f);
}(document));
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:08:57.240

在锚标签中添加**always-show-count="true"**

# arrays - 数组中是否存在数字

> ID：11556284
> 
> 赞同：0
> 
> 时间：2012-07-19T07:56:08.393
> 
> 标签：arrays, powershell

我很陌生，`Powershell`并且无法检查管道中的数字是否存在于数组中。这条线的最后一点`"-or $_ -contains $percent"`是我遇到麻烦的一点。我尝试了各种方法，但无法使其正常工作。该脚本基本上会检查我所有测试的输出中是否存在任何值，并相应地为网页区域着色。我最初尝试过`-le 10`，但由于某种原因，这也停止了`-eq Enabled`工作。我在尝试 -contains 时发现相同，`3 -eq LE entries`这就是为什么我必须单独列出它们，但我不喜欢用 90 个数字这样做。

我确信我只是错过了一些愚蠢的东西，但到目前为止花了 6 个多小时在这上面，这让我发疯。

提前致谢。

```
$percent =(10..100)$rowData | % {
    if ($_ -eq "success" -or $_ -eq "ok" -or $_ -eq "LE_40Users" -or $_ -eq "LE_1User" -or $_ -eq "LE_10Users" -or $_ -eq "Enabled" -or $_ -contains $percent)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:05:26.297

您需要在`contains`比较中反转值：

```
-or  $percent -contains $_ 
```

# codeigniter - Jquery Ajax 未定义错误

> ID：11556287
> 
> 赞同：0
> 
> 时间：2012-07-19T07:56:18.770
> 
> 标签：codeigniter, jquery, undefined

```
$.ajax({
    async: false, 
    url:’&lt;?php echo base_url(‘abc/demo/sample_foo’); ?>’,
    success: function(result){
    if(result.responseText == true)
      alert(“random text”);
    else
      alert(“some_other_random_text”);
  }
  }); 
```

在演示控制器函数中，sample_foo() 仅返回 true 或 false 值，但是当我发出警报时，它显示“未定义”我该怎么做才能检索 true 和 false 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:00:00.217

我对php一无所知，但那些引号会引起问题：

改写为：

```
 '<?php echo base_url("abc/demo/sample_foo"); ?>' 
```

或者

```
 "<?php echo base_url('abc/demo/sample_foo'); ?>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:03:29.547

如果提示“找不到页面”或“错误”，请尝试此操作以确保 url 存在，然后检查 url

```
$.ajax({
 url:'your_url',
 statusCode: {
 404: function() {
   alert("page not found");
  }
 },
 success:function(){
    alert("scss")
 }, error:function(){
     alert("err")
 }
 }); 
```

​</p>

您还需要检查 google chrome 中的控制台或 FF 中的 firebug，如果您发现您请求的 url 有错误，那么您应该再次确保您的 url

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T12:01:01.793

第一步使用绝对URL如`http://127.0.0.1/abc/demo/sample_foo`，如果可行，则重写ajax中的url参数：

```
url:"<?php echo base_url('abc/demo/sample_foo'); ?>" 
```

或者：

```
url: "<?php echo base_url().'demo/sample_foo'; ?>" 
```

如果我上面说的不起作用，请尝试将您的单引号修改为双引号，祝您好运！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-19T08:01:08.377

放入失败函数，请求是否到达函数？

# android - 平板电脑上的 Youtube 面板选项卡

> ID：11556290
> 
> 赞同：0
> 
> 时间：2012-07-19T07:56:26.720
> 
> 标签：android, android-layout

如果您查看平板设备的 Youtube 应用程序，您会在顶部看到一个由 3 个选项卡组成的面板。当用户在它们之间切换时，整体活动似乎没有改变：面板没有闪烁，但它下面的视图发生了变化。

它是怎么做的？这是否意味着他们对所有 3 个选项卡使用单个活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:19:29.927

我不知道这是否真的是一个，但有一个[Tab Host View](http://developer.android.com/reference/android/widget/TabHost.html)可以实现这一点。

它充当父活动并将标签视图作为子项处理

# c# - 是否可以仅使用事件来检测 Azure 角色实例计数的变化？

> ID：11556291
> 
> 赞同：3
> 
> 时间：2012-07-19T07:56:28.157
> 
> 标签：c#, events, azure

在我的 Azure 角色中，我需要能够随时查询当前实例数。

我没有任何内部端点，所以我不能使用[Role.Instances](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.role.instances.aspx)。我可以使用管理 API，但它比较耗时，并且查询它有时会导致协议超时错误，我宁愿不处理超时。

看起来有[RoleEnvironment.Changing](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironment.changing.aspx)事件可以包含`RoleEnvironmentTopologyChange`反映哪个角色更改实例计数的类对象。这对我来说是最佳选择——我不需要进行任何外部调用，只需在新实例计数发生变化时存储它，因此没有开销也没有超时。但是我找不到在`RoleEnvironment.Changing`触发时是否可以找到新的实例计数。

`RoleEnvironment.Changing`是否可以在 Azure 中仅使用或类似事件来检测角色实例计数和实际实例数量的变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:37:13.750

是的，在该事件处理程序中，您可以使用 RoleEnvironment.Roles 来获取角色列表。然后对于每个角色，您可以使用 Instances 属性来查找该角色有多少个实例。不需要使用管理 API。要检测变化，请在实例启动过程中查询实例计数，并将数据保存在内存中，以便以后进行比较。

此致，

明旭。

# c++ - 在 C++ 中包含和访问线程全局变量

> ID：11556298
> 
> 赞同：1
> 
> 时间：2012-07-19T07:56:52.810
> 
> 标签：c++, oop, metaprogramming

我在去过的几个工作场所都遇到过一个设计问题，但没有一个令人满意的解决方案：

假设您有一个具有动态线程数的系统。

每个线程必须可以访问一组“单例”，单例每个线程只有一个实例（因此它们不是真正的单例，而是每个线程的单例）

这组单例在编译时是已知的。

每个单例都有一个默认构造函数（为了简化事情，不过，没有这个约束的解决方案会很棒）

一个满意的解决方案应该有以下几点：

1.  每个线程可以在 o(1) 时间内访问其任何单例

2.  对单例的访问是无锁的

3.  将单例添加到“单例集”不需要在集合端编写新代码

4.  在编译期间填充“单例集”

我不确定这样的设计是否可行。如果是，我认为它需要一点元编程。

提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:29:02.847

线程局部变量很好地解决了这个问题。

```
// in .h
class ThreadSingleton
{
private:
    static __thread ThreadSingleton* thread_specific_instance;

public:
    static ThreadSingleton* get() { return thread_specific_instance; }
    ThreadSingleton();
    ~ThreadSingleton();
};

// in .cc
__thread ThreadSingleton* ThreadSingleton::thread_specific_instance;

ThreadSingleton::ThreadSingleton() {
    if(thread_specific_instance)
        std::abort(); // one instance per thread please
    thread_specific_instance = this;
}

ThreadSingleton::~ThreadSingleton() {
    thread_specific_instance = 0;
}

// usage
int main() {
    // on thread entry
    ThreadSingleton x;

    // later anywhere in the thread
    ThreadSingleton* px = ThreadSingleton::get();
} 
```

每个线程`ThreadSingleton`在堆栈上的某个位置创建，通常在线程函数中。稍后`ThreadSingleton`可以从该线程中的任何地方访问，通过`ThreadSingleton::get()`该线程返回调用线程的单例。（上面可以做一个模板来包装任何其他类，为了说明的简单我没有这样做）。

性能方面访问线程局部变量不需要任何调用（与使用创建的线程特定存储不同[`pthread_key_create`](http://pubs.opengroup.org/onlinepubs/009696799/functions/pthread_key_create.html)）有关更多详细信息，请参阅[http://www.akkadia.org/drepper/tls.pdf](http://www.akkadia.org/drepper/tls.pdf)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:54:35.070

除非我误解你，否则你描述的是线程本地存储。

在 C++11 中，您只需要声明一个变量`thread_local`即可为每个线程获取一个单独的实例。

在 C++03 中，最便携的解决方案是[`boost::thread_specific_ptr`](http://www.boost.org/doc/libs/1_50_0/doc/html/thread/thread_local_storage.html); 或者，您的编译器和/或系统库可能会提供特定于线程的存储，例如 POSIX`pthread_key_create`和朋友。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:12:59.987

好的，通常我会在评论中发布这个，因为我不太确定我是否正确理解了你的问题......但是在父 Thread 类的构造函数中创建单例集的实例还不够?

假设您有三个类 A、B 和 C（在编译时已知）和一个“线程”类。

您不会在线程头中声明 A、B 和 C 的实例吗

```
class Thread {
private:
    A *a;
    B *b;
    C *c;
public:
    Thread();
} 
```

然后在线程的构造函数中实例化它们？

```
Thread:Thread() {
    a = new A();
    b = new B();
    c = new C();
} 
```

这样，每个线程独占“拥有”单例，这意味着它可以随时访问它们，而不必担心竞争条件或锁定。

关于“添加单例”，我是否可以建议创建一个“单例父”类，然后使用可以将新指针推送到的标准容器（如 std::list）？当然，对这个列表的访问必须用锁来保护，当你在运行时，在编译时这样做时，这不是必需的。在编译期间，您最好使用静态指针数组，这将允许您尽可能快地访问指针。

再次，对不起，如果我理解你的问题是错误的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-19T08:31:52.420

我不确定我是否正确理解了你的问题，但对我来说，单例的“集合”是无关紧要的。您有固定数量的单例，将它们调用`Singleton1`到编译时已知的位置`SingletonX`。`X`线程并不重要。

对于实际的单例，您可以让它们从处理每个线程部分的单个模板化基类继承。像这样的东西：

```
template<class B>
struct SingletonBase
{
    static B &getInstance()
        {
            // One instance per thread
            static std::unordered_map<std::thread::id, B> intances;

            if (instances.find(std::this_thread::get_id()) == instances.end())
                instances[std::this_thread::get_id()] = B{};

            return instances[std::this_thread::get_id()];
        }
};

class Singleton1 : public SingletonBase<Singleton1>
{
    // ...
}; 
```

如果您不希望为单例提供不同的不同类，则可以使用[`std::array`](http://en.cppreference.com/w/cpp/container/array)它们来存储它们：

```
class Singleton : public SingletonBase<Singleton>
{
    // ...
};

std::array<Singleton, X> singletons; 
```

这将在编译时创建一个指定数量的数组`X`，并且可以像普通数组一样访问`Singleton &instance = singletons[0].getInstance();`：

请注意，我的示例代码使用“新”C++11 标准库中的功能。

# bluetooth - 使用 windows 上的wireshark 监控蓝牙流量

> ID：11556299
> 
> 赞同：1
> 
> 时间：2012-07-19T07:56:53.477
> 
> 标签：bluetooth, wireshark

我需要监控来自我的计算机的入站和出站蓝牙流量。无论如何我可以在Windows上做到这一点吗？我读过这在linux下是可能的`libpcap-0.9.6`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-14T10:07:44.740

这可能是一个旧帖子，但想回答。目前，winpcap 无法进行蓝牙数据包嗅探。只能在 linux 上使用 libpcap。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:59:58.513

我会使用数据包嗅探器，例如 Wireshark，看看您是否可以通过网络连接/适配器在列表中找到它并编写一个过滤器，或者只是捕获它。在使用普通以太网卡的情况下，我没有无数次使用 Wireshark，但使用蓝牙应该很简单。

# android - 在android中使用两种布局创建动态按钮

> ID：11556306
> 
> 赞同：0
> 
> 时间：2012-07-19T07:57:17.500
> 
> 标签：android, xml, layout, button, dynamic

我想在我的主要活动中创建动态按钮。这些按钮位于具有自己的布局文件的单独活动中。我可以向您展示我的测试项目。我想它可能会更好，但我仍然是这个领域的初学者。;-)

这是我的主要活动。没什么特别的：

```
package de.example.testprojekt;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true; 
}
} 
```

我有另一个类，代码如下：

```
package de.example.testprojekt;

import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.Button;
import android.widget.LinearLayout;

public class TestClass extends LinearLayout {

LayoutInflater inflator;

public TestClass (Context context) {
    super (context);
    initialize();
}

public TestClass (Context context, AttributeSet attrs) {
    super (context, attrs);
    initialize();
}

public TestClass (Context context, AttributeSet attrs, int defStyle) {
    super (context, attrs, defStyle);
    initialize();
}

void initialize() {
    inflator = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    inflator.inflate(R.layout.secondary_activity, this);
}

@Override
protected void onFinishInflate() {
    super.onFinishInflate();
    setupLayout();      
}

Button button1;
String TAG = "tag";
private void setupLayout () {
    button1 = (Button) findViewById(R.id.button1);

    button1.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            Log.e(TAG,"test");

        }
    });
}
} 
```

这是我的两个 XML 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout
            android:id="@+id/linearLayout"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <de.example.testprojekt.TestClass
                android:id="@+id/mainCtrl1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="30dp" />

            <de.example.testprojekt.TestClass
                android:id="@+id/mainCtrl2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="30dp" />
         </LinearLayout>

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:padding="@dimen/padding_medium"
    android:text="@string/hello_world"
    tools:context=".MainActivity" /> 
```

第二个：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="Button" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:24:36.387

如果您正在做我认为您正在做的事情，这可能会派上用场：http: [//developer.android.com/reference/android/view/ViewGroup.html](http://developer.android.com/reference/android/view/ViewGroup.html)

ViewGroup 允许您动态添加/删除视图 AFAIK。如果您将这些按钮附加到 ViewGroup （在您的情况下是您的两个布局），我会调用类似

layout.removeView(button1)

希望有帮助。

**编辑：**只是在研究一些更动态的东西时发现了这一点。似乎比视图组更强大，因为它发生在所有布局都已构建等之后。 [http://www.techrepublic.com/blog/app-builder/dynamic-styling-of-views-on-android/1131](http://www.techrepublic.com/blog/app-builder/dynamic-styling-of-views-on-android/1131)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T09:51:10.090

为此，您只需对这些按钮使用可见性即可删除

```
Button.setVisibility(View.GONE); 
```

并添加

```
Button.setVisibility(View.VISIBLE); 
```

# selenium - 以 % 为单位获取 Css 值宽度 - Selenium WebDriver- JUnit

> ID：11556318
> 
> 赞同：3
> 
> 时间：2012-07-19T07:58:01.480
> 
> 标签：selenium, webdriver, selenium-webdriver, junit4

我有一个显示动态布局（由 extjs 生成）的网页，它应该占据 100% 的宽度。我在用

> WebElement element = driver.findElement(By.id("ext-gen4"));
> 
> String backgroundColor = element.getCssValue("width");

但目前它正在返回以像素为单位的宽度，并且 WebDriver 浏览器 (Firefox) 未以最大模式显示，因此该值甚至更小。有什么办法可以得到 % 的值吗？我开始知道一些 GetCssProperty 类，但我无法正确使用它。有什么细节吗？我正在将 Selenium WebDriver 2.23 与 JUnit 一起使用。

我想必须有一种方法可以最大化窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:36:25.770

正如 Slanec 所说，您可以最大化您的窗口，例如

```
driver.manage().window().maximize() 
```

比你可以创建一个方法

```
private float getWidthInRelationToWindow(WebElement element){
    return ((float)element.getSize().getWidth())/
                  this.drivy.manage().window().getSize().getWidth();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:14:15.393

使用它来最大化：

```
driver.manage().window().maximize() 
```

甚至全屏：

```
driver.findElement(By.tagName("html")).sendKeys(Keys.F11); 
```

除了像素之外，您无法获得其他值 - 您必须自己计算百分比。请注意，您甚至不必使用 CSS 值，a[`getSize()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html#getSize%28%29)上有一个方法`WebElement`也可用于获取`<html>`或`<body>`元素的大小，然后您甚至不需要最大化。

# c++ - 是否有对 addr2line 的库调用？

> ID：11556321
> 
> 赞同：23
> 
> 时间：2012-07-19T07:58:06.003
> 
> 标签：c++, c, linux, backtrace, addr2line

我需要从 C++ 程序中获取 addr2line 提供的信息（回溯函数调用的文件和行）。是否有类似于 addr2line 的库调用？

**编辑：**我在 Linux 环境中工作。

我知道我可以直接调用 addr2line 并且我知道我可以在我的程序中使用 addr2line 的[源代码](http://www.koders.com/c/fid79D38B0848AFE045E3A0B6457DE1653F972671E3.aspx)（这也是 GPL 许可的）。但我想调用一个库函数，如果它存在的话，会更干净。

**编辑：**我将使用 binutils 的 bfd，就像 addr2line 一样。bfd 是什么意思呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T07:18:12.090

查看 addr2line 的 bsd 实现的源代码，它只有大约 400 行代码。将源代码更改为库函数应该很容易。[http://sourceforge.net/p/elftoolchain/code/HEAD/tree/trunk/addr2line/addr2line.c](http://sourceforge.net/p/elftoolchain/code/HEAD/tree/trunk/addr2line/addr2line.c)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-19T08:23:13.807

你可以试试这个功能`dladdr()`。它使用程序的动态符号，而不是调试信息（用 编译程序`gcc -rdynamic`）。

此外，您可以检查[回溯](http://www.gnu.org/software/libc/manual/html_node/Backtraces.html)库或更高级别的[堆栈](http://stacktrace.sourceforge.net/)跟踪库。
不完全是您所要求的，但它们可能会被证明是有用的。

# c# - 代码契约和重载

> ID：11556324
> 
> 赞同：2
> 
> 时间：2012-07-19T07:58:08.280
> 
> 标签：c#, code-contracts

假设我正在编写一个实用程序库，它定义了一个具有两个重载的方法：

```
public static class MyClass
{
    public static void DoSomething(string myValue, bool myFlag)
    {
        Contract.Requires<ArgumentNullException>(myValue != null);
        CallExternalMethod(myValue);
        if(myFlag){
            AlsoCallOtherMethod(myValue);
        }        
    }

    public static void DoSomething(string myValue)
    {
        Contract.Requires<ArgumentNullException>(myValue != null);
        DoSomething(myValue, true);
    }
} 
```

作为最佳实践，我只在一种方法中定义逻辑，并使用重载来指定默认参数（.Net 3.5，我不能使用 .Net 4 默认值参数）。

如您所见，我还通过使用合同来验证输入。

由于逻辑只在第一种方法中，那么第二个 Contract 没用吗？

关于运行时检查，我知道它没用，但是静态检查器呢？理解我的模式是否足够聪明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T12:01:38.540

我完全不同意[BonyT 的回答](https://stackoverflow.com/a/11556446/146622)。

代码契约是您的文档和方法契约的一部分，就像类型和名称一样。用户/开发人员没有理由假设您只是调用其他方法重载而没有别的。找出哪些合同适用于方法不应该是一个猜谜游戏。如果对参数或返回值有约束，请使用代码合同对其进行记录，即使您在内部 - 对其他人隐藏 - 只需调用另一个方法。

你不能把代码契约仅仅看作一个断言工具：控制流运行到另一个重载，它检查参数，所以我不必在这里做。您必须将其视为文档。

在实际层面上：添加代码合同也会将这些合同添加到您生成的 XML 文档中。静态检查器和代码合同编辑器扩展等工具可以向用户显示合同。[在 Pascal Cuoq 的这篇相关文章](https://stackoverflow.com/a/2769742/146622)和[Jon Skeet 的这篇文章](https://stackoverflow.com/a/2539638/146622)中可以找到一些其他好的论点。

但是，从运行时的角度来看，它*是*多余的。至于运行时开销：大多数检查将相对较小，并且没有性能问题。一些检查可能与性能有关（尤其是对集合、数组和枚举的检查），但可以在项目的代码合同属性对话框中单独禁用这些检查（例如，对于发布版本）。一般来说，合同也是如此：您可以将检查降低到您想要的任何级别，以便在非常关键的时候提高性能。如果您构建合同程序集，用户仍将获得静态检查。

总结一下。指定冗余 Requires 和 Ensures 的缺点：

*   相同的条件可能会检查两次或更多次
*   由于多次检查（如果您不禁用它）导致的微小的负面性能影响
*   更多打字（但请参阅[这些片段](http://angler.wordpress.com/2010/01/22/code-contracts-c-code-snippets-for-visual-studio/)）

专业人士：

*   代码文档
*   生成的 XML 中的文档
*   代码用户的静态检查器按预期工作
*   代码合同编辑器扩展工作
*   `ArgumentException`for Requires 发生在被调用的方法中，而不是在远处的某个方法中

# python - 在 Sphinx 中注释 Python 代码

> ID：11556331
> 
> 赞同：1
> 
> 时间：2012-07-19T07:58:21.123
> 
> 标签：python, python-sphinx

我正在为一些 Python 代码编写文档，但无法正确插入注释。我在 .rst 文件中写入的内容与生成的 html 中显示的内容之间存在问题。它看起来像这样：

.rst 文件：

```
.. sourcecode:: python  

    class Foo( argument_1, argument_2 ):           # argument_1 is blabla, arg2 is..

        def bar():                                 # method bar does ...
            print 'foo'                            # another comment

        def foo_bar():                             # foo_bar method explanation
            print 'foo_bar body'                   # .... 
```

在生成的 .html 文件中，它看起来很好，只是注释未对齐：

.html 文件：

```
class Foo( argument_1, argument_2 ):         # argument_1 is blabla, arg2 is..

    def bar():                                  # method bar does ...
        print 'foo'                            # another comment

    def foo_bar():                             # foo_bar method explanation
        print 'foo_bar body'                 # .... 
```

有没有办法解决这个问题？我在 Ubuntu 11.04 上使用 gedit 来编写这个文档。我一直在使用制表符的宽度，用空格替换制表符，但这没有帮助。

# objective-c - 设置捆绑包中的依赖多值

> ID：11556332
> 
> 赞同：0
> 
> 时间：2012-07-19T07:58:22.837
> 
> 标签：objective-c, settings.bundle, multivalue

我想在设置捆绑包中使用两个多值。第二个多值的值取决于第一个多值的选择值。例如：第一个是“州”，第二个是“城市”。每个州都有不同的城市。我能解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T17:42:41.117

您不能在设置包中执行此操作。您可以将此 UI 放在您的应用程序本身中，也许在设置屏幕中。

# iphone - iPhone Phonegap 上的“操作无法完成”警报

> ID：11556333
> 
> 赞同：3
> 
> 时间：2012-07-19T07:58:26.083
> 
> 标签：iphone, cordova, html5-audio

我正在使用 Phonegap (cordova 1.7) 创建一个 iPhone 应用程序。部分功能涉及播放远程托管的 mp3 文件。一切正常，除了有时（很少）会出现警报说`The operation could not be completed`。值得注意的是，我使用 HTML5 音频播放 mp3；此外，我已将`info.plist`文件中所有可能的 URL 列入白名单，因此这也不应该成为问题。

只是想知道是否有任何方法可以防止出现警报。

# json - 在 Windows Phone 7 上解析 json 时出错

> ID：11556335
> 
> 赞同：0
> 
> 时间：2012-07-19T07:58:49.167
> 
> 标签：json, windows-phone-7

[我从这里](http://dotnetbyexample.blogspot.com/search/label/JSON)跟着教程

但是当我想用自己的 json 实现它时，我收到一条错误消息

> 无法将当前 JSON 对象（例如 {"name":"value"}）反序列化为类型“System.Collections.Generic.List`1[BelajarJson.RootObject]”，因为该类型需要 JSON 数组（例如 [1,2, 3]）正确反序列化。要修复此错误，请将 JSON 更改为 JSON 数组（例如 [1,2,3]）或更改反序列化类型，使其成为普通的 .NET 类型（例如，不是像整数这样的原始类型，而不是像这样的集合类型可以从 JSON 对象反序列化的数组或列表。JsonObjectAttribute 也可以添加到类型中以强制它从 JSON 对象反序列化。路径“err_code”，第 2 行，位置 13。

内容.cs

```
namespace BelajarJson
{
    public class Content
    {
    public int id { get; set; }
    public string type { get; set; }
    public string label { get; set; }
    public string icon { get; set; }
    public string url { get; set; }
    public int timestamp { get; set; }
    public string key { get; set; }
    }
} 
```

分页.cs

```
namespace BelajarJson
{
public class Paging
{
    public int current_page { get; set; }
    public int total_page { get; set; }
    public int total_all { get; set; }
    public int limit_per_page { get; set; }
}
} 
```

根对象.cs

```
using System.Collections.Generic;

namespace BelajarJson
{
public class RootObject
{
    public int err_code { get; set; }
    public string message { get; set; }
    public Paging paging { get; set; }
    public List<Content> contents { get; set; }
}
} 
```

MainPage.xaml.xs

```
using System;
using System.Collections.Generic;
using System.Net;
using System.Windows;
using Microsoft.Phone.Controls;
using Microsoft.Phone.Reactive;
using Newtonsoft.Json;

namespace BelajarJson
{
public partial class MainPage : PhoneApplicationPage
{
    // Constructor
    public MainPage()
    {
        InitializeComponent();
    }

    private void Load_Click(object sender, RoutedEventArgs e)
    {

        var w = new WebClient();
        Observable
          .FromEvent<DownloadStringCompletedEventArgs>(w, "DownloadStringCompleted")
          .Subscribe(r =>
          {
              var deserialized =
                JsonConvert.DeserializeObject<List<RootObject>>(r.EventArgs.Result);
              PhoneList.ItemsSource = deserialized;
          });
        w.DownloadStringAsync(
          new Uri("http://yumugee.com/json.txt"));
    }
}
} 
```

我试图从这里谷歌搜索同样的问题，但仍然没有运气。你有一些建议如何解决这个问题？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:14:34.120

您是否确认您的结果实际上是一个对象数组，而不仅仅是一个对象。List() 的构造函数可以采用 IEnumerable，如数组，但不能采用单个对象。

JSON 数组应该类似于 [{"name":"value"},{"name":"value"}]

# json - JSON 和 SBJSON 的区别？

> ID：11556338
> 
> 赞同：3
> 
> 时间：2012-07-19T07:58:58.013
> 
> 标签：json, sbjson

*   谁能告诉我json和sbjson的区别？
*   这两个有什么用？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-19T08:03:41.163

JSON 和 SBJSON 无法比较，因为一个是标准/协议，另一个是使用该标准的特定语言实现。

[JSON](http://en.wikipedia.org/wiki/JSON)代表 Javascript 对象表示法。它只是一种传输数据的标准（类似于 XML，但更轻量级）。另请参阅[此](https://stackoverflow.com/questions/383692/what-is-json-and-why-would-i-use-it?rq=1)答案以获取更多信息。

[SBJSON](http://stig.github.com/json-framework/)是使用 Objective-C 创建的众多开源 json 解析器/生成器之一。其他一些是 touchJSON 和 JSONKit。这些允许您在编写 Objective-C 应用程序时轻松使用 JSON。

[从 iOS 5 开始，有一个名为NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)的内置类可以为您执行此操作。如果您想支持 iOS 5 之前的任何 iOS 版本，您将需要使用类似于前面提到的框架之一的东西。

在任何环境中，您通常会使用 JSON 从远程源（例如[RESTFUL](http://en.wikipedia.org/wiki/Representational_state_transfer) Web 服务）传输/接收数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:03:19.167

SBJson 是 ios/iphone 的 json 框架。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-12-11T17:49:44.720

**SBJson**是一种易于读写的数据交换格式化程序。它是一种 JSON。IOS 支持此框架。

其中**JSON**表示 JavaScript Object Notation。它是用于存储和交换信息或数据的语法。

# ios5 - 我可以使用自定义视图来替换 GKLeaderboardViewController 吗？

> ID：11556346
> 
> 赞同：1
> 
> 时间：2012-07-19T07:59:32.120
> 
> 标签：ios5, leaderboard

我想显示高分排行榜，但我不喜欢默认的 GKLeaderboardViewController 界面。有没有办法从游戏中心获取数据并显示在我的自定义视图中？

# extjs - IE 8 不支持 foreach 方法

> ID：11556348
> 
> 赞同：6
> 
> 时间：2012-07-19T07:59:40.183
> 
> 标签：extjs, internet-explorer-8, foreach

此代码在 Internet Explorer 8 中不起作用。

```
documenttab.query('.field,.button').forEach(function(c){c.setDisabled(false);}); 
```

我收到错误**SCRIPT438：对象不支持属性或方法“forEach”**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T18:34:39.410

Mozilla 还发布了方法的代码，您可以将它们放在 JS 的顶部附近，如果它们不存在，它将创建它们。

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T08:21:37.477

我相信这应该可以解决您的问题。

```
vals = documenttab.query('.field,.button')
for (i = 0; i < vals.length; i++) {
    vals[i].setDisabled(false);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T08:09:55.950

Ext 有一个 forEach 方法。在支持的情况下，它将遵循本机方法：

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Array-method-forEach](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Array-method-forEach)

```
Ext.Array.forEach(documenttab.query('.field,.button'), function(c){
    c.setDisabled(false);
}); 
```

# ruby-on-rails - 使用 ActiveAdmin 我需要显示学生的付款余额（在学生索引上）

> ID：11556349
> 
> 赞同：0
> 
> 时间：2012-07-19T07:59:52.743
> 
> 标签：ruby-on-rails, model, associations, activeadmin

这是我目前的障碍：我有 3 个相关模型：学生、课程和付款。它们的关系如下：

*   学生和课程（学生所属课程）
*   付款和学生（付款属于学生）

模型具有以下属性：

*   学生（：姓名，：课程ID）
*   课程（：名称，：课程成本）
*   付款（：payment_date，：student_id，：payment_amount）

我正在使用 ActiveAdmin 并尝试将学生的余额（即 course_cost - payment_amount）显示为 Student 索引上的“余额”列。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:04:13.777

我认为它与 ActiveAdmin 没有直接关系。您可以在 Student 类中定义方法，该方法返回当前学生的余额：

```
def balance
  self.course.course_cost - self.payments.collect(&:payment_amount).sum
end 
```

并在索引中显示余额：

```
index do
  column :balance
end 
```

# php - 计算php中2个日期之间的所有日期？

> ID：11556354
> 
> 赞同：1
> 
> 时间：2012-07-19T08:00:13.540
> 
> 标签：php, date, date-arithmetic

我有 2 个约会

```
$st_date = '2012-07-20';
$ed_date = '2012-07-27'; 
```

我想显示从`$st_date`到的所有日期`$ed_date` ：

```
2012-07-20
2012-07-21
2012-07-22
2012-07-23
2012-07-24
2012-07-25
2012-07-26
2012-07-27 
```

我想首先计算差异，运行 foreach < count，然后将 $i 天添加到 $st_date。
但我不想要循环，它会增加代码。返回所有日期数组的任何直接日期（）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:11:36.450

试试这个代码：

```
<?php
$st_date = '2012-07-20';
$ed_date = '2012-07-27';

$dateMonthYearArr = array();
$st_dateTS = strtotime($st_date);
$ed_dateTS = strtotime($ed_date);

for ($currentDateTS = $st_dateTS; $currentDateTS <= $ed_dateTS; $currentDateTS += (60 * 60 * 24)) {
// use date() and $currentDateTS to format the dates in between
$currentDateStr = date(“Y-m-d”,$currentDateTS);
$dateMonthYearArr[] = $currentDateStr;
//print $currentDateStr.”&lt;br />”;
}

echo  “&lt;pre>”;
print_r($dateMonthYearArr);
echo “&lt;/pre>”;
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T09:20:42.623

虽然我不理解您对循环的厌恶，但我确实理解尽可能地隐藏代码。

为此，我将扩展 PHP 的[DateTime](http://www.php.net/datetime)对象以提供您所追求的功能。像这样的东西： -

```
class MyDateTime extends DateTime
{
    /**
    * Creates an array of date strings of all days between
    * the current date object and $endDate
    * 
    * @param DateTime $endDate
    * @return array of date strings
    */
    public function rangeOfDates(DateTime $endDate)
    {
        $result = array();
        $interval = new DateInterval('P1D');
        //Add a day as iterating over the DatePeriod
        //misses the last day for some strange reason
        //See here http://www.php.net/manual/en/class.dateperiod.php#102629
        $endDate->add($interval); 
        $period = new DatePeriod($this, $interval, $endDate);
        foreach($period as $day){
            $result[] = $day->format('Y-m-j');
        }
        return $result;
    }
} 
```

然后当你想使用它时，你可以这样做：-

```
$st_date = new MyDateTime("2012-07-20");
$en_date = new DateTime("2012-07-27");
$dates = $st_date->rangeOfDates($en_date);
var_dump($dates); 
```

将给出以下输出：-

```
array
  0 => string '2012-07-20' (length=10)
  1 => string '2012-07-21' (length=10)
  2 => string '2012-07-22' (length=10)
  3 => string '2012-07-23' (length=10)
  4 => string '2012-07-24' (length=10)
  5 => string '2012-07-25' (length=10)
  6 => string '2012-07-26' (length=10)
  7 => string '2012-07-27' (length=10) 
```

虽然，不幸的是，您可能需要一个循环来迭代该数组:)

显然，该解决方案使用循环来实现其目标，但它们被封装在一段可重用的代码中。

有关更多信息，请参阅有关[DateTime](http://www.php.net/datetime)、[DateInterval](http://www.php.net/dateinterval)和[DatePeriod](http://www.php.net/dateperiod)的 PHP 手册。这些页面的评论中有很多提示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T08:06:54.437

```
$start = strtotime('2009-02-01'); 
$end = strtotime('2009-03-10'); 
$range = array();

$date = strtotime("-1 day", $start);  
while($date < $end)  { 
   $date = strtotime("+1 day", $date);
   $range[] = date('Y-m-d', $date);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-19T09:50:49.750

不使用 range() 和 array_map() 循环：

编辑：一个小错误，你必须跳到 86400，因为 1 天 = 86400 秒，所以现在代码应该没问题了 :)

```
 $st_date = '2012-07-20';
    $ed_date = '2012-07-27';
    $dates = range(strtotime($st_date), strtotime($ed_date),86400);
    $range_of_dates = array_map("toDate", $dates);
    print_r($range_of_dates);
    function toDate($x){return date('Y-m-d', $x);}

?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T08:02:58.313

```
$st_date = '2012-07-20';
$ed_date = '2012-07-27';

for($i=$st_date;$i<=$ed_date;$i++)echo $i."<br />"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-02T15:10:12.573

聚会有点晚了，但早先解决了这个问题，并使用以下内容进行了处理，这比此处的其他示例更干净，因此将其添加为人们的选择；

```
function dateRange($from, $to)
{
    return array_map(function($arg) {
         return date('Y-m-d', $arg);
    }, range(strtotime($from), strtotime($to), 86400));
} 
```

用法：

```
$dates = dateRange('2017-01-01', '2017-01-08'); 
```

回报：

```
Array
(
    [0] => 2017-01-01
    [1] => 2017-01-02
    [2] => 2017-01-03
    [3] => 2017-01-04
    [4] => 2017-01-05
    [5] => 2017-01-06
    [6] => 2017-01-07
    [7] => 2017-01-08
) 
```

# jquery - 在 html5/jquery 中保持相同的会话

> ID：11556358
> 
> 赞同：1
> 
> 时间：2012-07-19T08:00:20.213
> 
> 标签：jquery

我有一个 HTML5 + Jquery 代码将 HTTP POST 发送到服务器以检索数据。首先，Client 应用需要通过 Jquery + json 进行登录。然后，客户端需要使用相同的会话来调用 Web 服务来检索数据。

谁能建议我/提供一个关于如何仅使用 js/jquery 和 html5 来维护/存储会话的示例？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:04:46.407

为了保持会话，浏览器需要一个会话 cookie（在服务器端创建）。您可能需要在没有 ajax 的情况下进行身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:07:42.107

或者可能采用无 cookie 会话方法；如果您的登录 json 具有分散令牌的能力...

# mysql - db 天数与月份的变化（它们被放置在错误的位置（TIMESTAMP 格式））

> ID：11556369
> 
> 赞同：0
> 
> 时间：2012-07-19T08:00:57.770
> 
> 标签：mysql, sql, timestamp

在“a”字段中，我有格式的日期`TIMESTAMP`。例如`2010-10-12 12:00:00`，格式是`yyyy-mm-dd hh:mm:ss`. 我需要做的是更改`2010-10-12 12:00:00`为`2010-12-10 12:00:00`不更改格式（yyyy-mm-dd hh:mm:ss）。月份和日期发送到错误的地方。最大月份是 12 天，最大天数也是 12 天（因为在那里发送了几个月）。原始日期超过 12 天的所有实例都是“0000-00-00 00-00-00”。做这个`MySql`。

试过这个，但它只是将所有日期设置为 0000-00-00 00:00:00 update table_a set date=concat(substring(date, 1, 4), '-', substring(date, 9, 10), '- ', 子字​​符串(日期, 6, 7),子字符串(日期,11,19))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:05:54.410

使用这个例子

```
set @date:='2010-10-12 12:00:00';

select @date, 
concat(left(@date,5),substring(@date,9,2),'-',substring(@date,6,2),' ',right(@date,8)); 
```

# php - 有没有办法本地化 php 的错误输出？

> ID：11556375
> 
> 赞同：2
> 
> 时间：2012-07-19T08:01:04.163
> 
> 标签：php, localization

我们正在用中文（普通话）教授一堂课。对于我们的学生来说，如果运行 php（在命令行上）的错误输出可以本地化为普通话，会更容易（并且对他们更有意义）。有没有办法配置我们的 php 设置以支持这一点（即编辑 php.ini 文件）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T08:54:27.220

我已经下载了 PHP 源代码并搜索了源代码如何处理它的错误。在浏览了几个（随机挑选的）文件后，到处都发现了这些行：

```
// warning for the sleep() function
php_error_docref(NULL TSRMLS_CC, E_WARNING, "Number of seconds must be greater than or equal to 0");

// warning for the constant() function
php_error_docref(NULL TSRMLS_CC, E_WARNING, "Couldn't find constant %s", const_name);

// warning for the mysql_free_result() function
php_error_docref("function.mysql-free-result" TSRMLS_CC, E_WARNING, "%lu result set(s) not freed. Use mysql_free_result to free result sets which were requested using mysql_query()", MySG(result_allocated));

// error for the mysql-escape-string function()
php_error_docref("function.mysql-escape-string" TSRMLS_CC, E_DEPRECATED, "This function is deprecated; use mysql_real_escape_string() instead."); 
```

这种情况一直持续下去，这让我得出结论，错误是硬编码的，因此在任何其他语言中都不可用......

太糟糕了 ：（

* * *

经过数小时的搜索（准确地说是 5 小时 45 分钟） - 我找到了一些可能不值得但我该判断的解决方案。

翻译通常保存在扩展名为 .po 的文件中。这些文件包含一堆原始字符串和翻译后的字符串。这意味着您必须手动翻译每个字符串。[您可以使用PoEdit](http://www.poedit.net/)创建文件。

然后你需要解析这些文件。您可以构建一个安装了[Gettext](http://php.net/manual/en/book.gettext.php)模块的 PHP 版本。或者，Zend 框架也能够解析这些文件。

显然，您不想手动翻译每个可能的字符串。最后一种选择是使用翻译服务，例如[Google Translate](https://developers.google.com/translate/)或[Microsoft Translate](http://www.microsofttranslator.com/dev/)。

在所有情况下，您都必须用新的错误字符串替换现有的错误字符串。有一个原生 PHP 函数称为[`set_error_handler()`](http://php.net/manual/en/function.set-error-handler.php). 这允许您设置自定义错误处理功能。如果你想翻译现有的错误字符串，你应该在那里做。这是您可以使用的设置（我没有彻底测试过）：

```
<?php
set_error_handler('error_handler');

function error_handler($errno, $errstr, $errfile, $errline, $errcontext) {
    // Get the correct string for the error type
    switch($errno){
        case E_ERROR:
            $type = 'Error';
            break;
        case E_WARNING:
            $type = 'Warning';
            break;
        case E_PARSE:
            $type = 'Parse Error';
            break;
        case E_NOTICE:
            $type = 'Notice';
            break;
        case E_CORE_ERROR:
            $type = 'Core Error';
            break;
        case E_CORE_WARNING:
            $type = 'Core Warning';
            break;
        case E_COMPILE_ERROR:
            $type = 'Compile Error';
            break;
        case E_COMPILE_WARNING:
            $type = 'Compile Warning';
            break;
        case E_USER_ERROR:
            $type = 'User Error';
            break;
        case E_USER_WARNING:
            $type = 'User Warning';
            break;
        case E_USER_NOTICE:
            $type = 'User Notice';
            break;
        case E_STRICT:
            $type = 'Strict Notice';
            break;
        case E_RECOVERABLE_ERROR:
            $type = 'Recoverable Error';
            break;
        default:
            $type = 'Unknown error (' . $errno . ')';
            break;
    }

    // translate text
    $type = error_handler_translate($type);
    $str = error_handler_translate($errstr);
    $in = error_handler_translate('in');
    $line = error_handler_translate('on line');

    // echo the error in "default" PHP format
    echo '<br /><b>'. $type .':</b> ' . $str . ' '. $in .' <b>' . $errfile . '</b> '. $line .' <b>' . $errline . '</b><br />';

    // ignore the original PHP error handling
    return true;
}

function error_handler_translate($str) {
    // translate $str here

    return $str;
}
?> 
```

剩下的就是将此代码包含到您的脚本中，您应该一切都好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:30:50.540

你可以试试，这可能有效

```
/* Set locale to Dutch */
setlocale(LC_ALL, 'nl_NL'); 
```

# php - php发送邮件速度

> ID：11556377
> 
> 赞同：0
> 
> 时间：2012-07-19T08:01:09.917
> 
> 标签：php, email

我在我的 php 代码中编写了一个正常的发送邮件功能，用于密码恢复。该代码工作正常，我能够发送和接收邮件......唯一的问题是速度和时间。大约一个小时后，我从我的服务器收到邮件。我应该怎么做才能立即收到邮件。

我的 php 代码如下：

```
mail($user_email, "Password", $message,
"From:admin <admin@example.com>\r\n" .
 "X-Mailer: PHP/" . phpversion()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:14:02.567

这很可能不是 PHP 中的问题，而是您的托管服务提供商的问题。一些共享主机在发送电子邮件之前将它们排队。尤其是 GoDaddy 对此很糟糕......所以如果这恰好是您的虚拟主机，那么这就是问题所在。我看到他们的电子邮件有时在便宜的共享 linux 服务器上需要 3-4 个小时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:38:46.950

确保您发送的电子邮件对于垃圾邮件过滤器来说是干净的。您必须拥有良好的声誉才能正确发送电子邮件。当您编写自己的电子邮件发件人脚本时，请确保：

1.  *将*电子邮件格式设置为“John Doe”，而不仅仅是“john.doe@example.org”。垃圾邮件过滤器希望看到您知道发件人姓名。
2.  使用相同的*回复*电子邮件地址。如果它被添加到您的收件人联系人列表中，这是通过垃圾邮件过滤器的最佳方式之一。
3.  如果您的电子邮件采用 HTML 格式，请确保 HTML 是干净的并添加替代文本。
4.  检查 SMTP 服务器的 IP 地址是否信誉良好。

我还建议使用第三方的服务，例如[MailChimp](http://mailchimp.com)等具有良好声誉的电子邮件（从 ISP 的角度来看），您可以在其中免费开设帐户并发送交易电子邮件（除了发送新闻通讯）。他们有一个 API，允许您将您的应用程序与他们的系统耦合。

# php - 使用表库时如何为codeigniter锚添加自定义js函数

> ID：11556379
> 
> 赞同：0
> 
> 时间：2012-07-19T08:01:15.193
> 
> 标签：php, javascript, jquery, codeigniter

这是我的代码：

```
foreach($patients as $patient) {
    $this->table->add_row(++$i,
                          $patient->opd_no,
                          $patient->sname.', '.$patient->fname.' '.$patient->mname, 
                          strtoupper($patient->gender),
                          date('M d, Y', strtotime($patient->birth_date)),
                          $patient->address_no.' '.$patient->address_st.' '.$patient->address_brgy.' '.$patient->address_local.' '.$patient->address_province,
                          anchor('consultation/queue/'.$patient->pk_id, 'Initial', ar

    ray('class' => 'queue'))
); 
```

我想在锚点添加它。

编辑：好的，所以我添加了这个，希望这将是一个解决方法：

```
anchor('#'.$patient->pk_id, 'Initial', array('class' => 'queue', 'rel' => 'ic')) 
```

并尝试通过 jquery 使用 rel 属性来调用函数。像这样的东西：

```
$('a[rel=ic]').click(function() {}); 
```

但是随后出现了一个codeigniter错误页面

> 您正在查看的页面是由 CodeIgniter 动态生成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:44:54.360

这是您使用的另一个选项（模式）

anchor('home/showpage','Show Page',array('onClick' => 'Inital()')

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:59:10.177

我找到了解决方法。我没有使用 CodeIgniter 的锚点，而是使用原生 html 超链接标签`<a>`：

```
"<a href='#' class='queue' id='init_d'>Initial</a>" 
```

使用jquery添加js要容易得多，并且不再出现以前的错误。

# c++ - sprintf_s 对 win64 和 win32 有具体的使用要求吗？

> ID：11556380
> 
> 赞同：0
> 
> 时间：2012-07-19T08:01:29.297
> 
> 标签：c++, winapi, win64

下面的代码片段是一个正在运行的 SW 我是逆向工程的提取和简化（我试图强调这个问题，而不用所有的小细节来打扰你）。

在win64机器上构建以下代码会导致运行时崩溃：

```
#include "stdafx.h"
#include <stdio.h>
#include <string>
#include <stdlib.h>

using namespace std;

struct vaArgLookAlikePtrs 
{
    char* pPtr[1000];
};

int _tmain(int argc, _TCHAR* argv[])
{
    typedef std::basic_string<char> BasicString;
    static char buffer[132000];
    BasicString sFormatStr = "Var0=%s\nVar1=%.4f\nVar2=%d\n";
    struct vaArgLookAlikePtrs oData;

    void* pVoidPtr;
    int j=0;

    oData.pPtr[j] = "val0";
    j++;

    double dVar1 = 1.265;
    pVoidPtr = (void*)(&(oData.pPtr[j]));
    double* pDoublePtr = (double*)pVoidPtr;
    *pDoublePtr = dVar1;
    j++;// increment the buffer counter twice because doubles require 64 bits for     storage (This is how it works on the 32 bit machine)
    j++;

    int nVar2 = 2;
    pVoidPtr = &(oData.pPtr[j]);
    int* pIntPtr = (int*)pVoidPtr;
    *pIntPtr = nVar2;

    sprintf_s(buffer,sFormatStr.c_str(),oData);  // <-----

    cout << buffer << "\n";
    return 0;
} 
```

我有几个问题：

1.  为什么我应该`J++`在 win32 平台上将索引 ( ) 增加两次？- win32 平台如何知道“跳过”char* 点两次以获得双倍？
2.  sprintf_s 怎么知道在 win32 上从 oData（一个组合容器）中选择正确的字段？但是在win64上它崩溃了？

我认为这在某种程度上与 32 位和 64 位之间的指针大小不同，但我正在寻求您的帮助来解释这种行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T14:54:58.350

原作者只是将 C 语句组合在一起，直到它对他有用。真的，对于这段代码没有其他解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T15:10:55.770

您发布的代码毫无意义。您似乎正在尝试使用数组作为一种临时方式来为可变参数函数准备可变参数序列？抱歉，它在 C 和 C++ 中都不起作用。根本没有办法为可变参数函数“准备”一系列可变参数。

如果您正在尝试实现某种丑陋的 hack，那么请继续对`sprintf_s`. 也许你会以某种方式让它工作。但这与 C++ 语言无关。这充其量是毫无意义的。

# java - 哪一种是清除arrayList的更好方法？

> ID：11556381
> 
> 赞同：3
> 
> 时间：2012-07-19T08:01:31.167
> 
> 标签：java

我需要清除数组列表，哪个更好？为什么？

**方法1：**

```
List list = new ArrayList();
list.add("ram");

if(list!=null)
{
  list.clear();
} 
```

**方法二：**

```
List list = new ArrayList();
list.add("ram");

if(list!=null && !list.isEmpty())
{
  list.clear();
} 
```

在方法1中，我不检查列表是否为空，直接我已经清除了列表。

但是在方法2中，如果列表不为空，我已经通过检查清除了列表

```
if(list!=null && !list.isEmpty()) 
```

哪种方法更好？方法 1 还是方法 2？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T08:06:03.097

第一，尝试使用泛型：

```
List<String> list = new ArrayList<String>();
list.add("ram"); 
```

由于它现在已初始化，因此不需要空检查。

现在，如果您需要维护特定的合同，您可以检查列表是否为空，但正如@Puce 所说，这是微优化。

```
list.clear(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T08:07:05.437

它取决于实现，例如 ArrayList （这是它的`clear`方法的代码）：

```
 public void clear() {
         modCount++;

         // Let gc do its work
         for (int i = 0; i < size; i++)
             elementData[i] = null;

         size = 0;
     } 
```

意味着如果列表已经为空，代码不会花费更多时间。从这个意义上说，我会像第一种方法一样清除代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T08:07:55.743

至于[`clear()`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java#ArrayList.clear%28%29)它的源代码不检查集合是否为空。

```
public void clear() {
    modCount++;

    // Let gc do its work
    for (int i = 0; i < size; i++)
        elementData[i] = null;

    size = 0;
} 
```

但这只是一个很小的优化，我想只有在遇到性能问题时才应该注意这一点。

你可以使用这两个版本，无论如何，如果列表不为空你想清除它，如果列表为空，那么 clear() 方法将很快执行，所以......不要打扰

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-19T08:07:59.340

没关系。`clear()`vs 检查的开销`isEmpty()`是 1 行代码，a`modcount++;`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T08:04:20.587

这取决于如何`clear()`实施。这顶多是一个微优化，所以我建议不要花太多时间去想这个。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-19T08:07:03.730

由于`ArrayList`是基于数组的，因此您无需检查它是否为空。因此，我最喜欢第一种方法，因为它的“微”高性能

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-19T08:04:53.663

再次初始化列表。

```
List list = new ArrayList();
 list.add("ram");

 if(list!=null && !list.isEmpty())
 {
   list = new ArrayList();
 } 
```

# sql - GROUP BY 在 Oracle 11g 中不起作用

> ID：11556382
> 
> 赞同：3
> 
> 时间：2012-07-19T08:01:31.760
> 
> 标签：sql, oracle11g

我有一张桌子

```
expenses (
    purchase_date date, 
    item_purchased varchar2(15),
    amount number
) 
```

我想在购买日期（日期列）上执行“分组依据”。说，我必须这样做：

```
SELECT purchase_date, count(*) 
FROM expenses 
GROUP BY purchase_date; 
```

它给了我结果：

```
purchase_date    count
-------------   -------
19-Jul-12           1
20-Jul-12           1 
```

虽然我有多个属于同一天的条目

我正在使用 Oracle 11g。我的一位朋友使用 Oracle 10g，并且在她的版本中，相同的查询按预期工作。那么11g有什么问题呢？

请朋友们帮帮我。

TIA。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T08:10:01.557

DATE 列还包含一天中的时间。不幸的是，SQL*Plus（您似乎正在使用）在默认配置中不显示时间。

要摆脱聚合期间的时间，请使用 trunc() 函数：

```
SELECT trunc(purchase_date), count(*) 
FROM expenses 
GROUP BY trunc(purchase_date); 
```

如果这不会改变结果，那么您的数据很可能不是您认为的那样。然后，您应该发布一个独立的测试用例（包括创建测试数据的 INSERT 语句）。您可以在[http://sqlfiddle.com上执行此操作](http://sqlfiddle.com)

# jquery - 只需要在我的 html 页面的某些部分显示/滚动简单的模式框

> ID：11556384
> 
> 赞同：0
> 
> 时间：2012-07-19T08:01:32.887
> 
> 标签：jquery, scroll, modal-dialog, simplemodal

我有 html 页面，其中有一些列表部分我想淡出并仅在该区域内显示简单的模式框。简单的模态框不应该覆盖在整个屏幕上，而应该只出现在那个列表部分（我已经分配了 div id 的列表部分），并且模态框应该在列表的那个部分滚动。它不应该移出列表部分。

任何想法将不胜感激。

现在我的整个屏幕都在淡出并且模态在整个页面中滚动。

这是代码

```
<script type="text/javascript">
$(document).ready(function(){ $('#sample').modal({ overlayClose:false, escClose:false, }); } </script> 
</HEAD> <BODY> 
<div id="sample" style="display:none"> <p>This is some sample data</p> </div>
<table>
<tr > <td >
     some headers goes here 
</td> </tr> 
<tr > <td > 
   <div id="partdiv"> 
     <table > 
       <tr> <td>
         1\. listing items goes here 
       </td> </tr> 
      <tr> <td> 
        2\. listing items goes here 
      </td> </tr>          
   </div> 
</td> </tr> 
<tr > <td > some text goes</td> </tr>
</table> 
```

现在我只想在 partdiv 区域而不是在整个屏幕上显示模态

# java - JSR-303 对 Spring Bean 属性的注解

> ID：11556385
> 
> 赞同：1
> 
> 时间：2012-07-19T08:01:36.360
> 
> 标签：java, spring, bean-validation

是否有一种简单的方法可以使用 JSR-303 注释**在上下文启动时验证 Spring bean？**我继承了一些将配置表示为 JSR-303 注释 POJO 的类。这些都是围绕对象层次结构传递的，所以我有点坚持使用它们。

我可以想象定义 bean 设置此类的属性，然后在上下文启动时运行 JSR-303 验证器，以确保正确设置所有值。

请注意，我*不是*在询问 Spring MVC 中绑定表单提交的验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:28:01.877

如果您想在上下文初始化之后进行此验证，您可以执行以下操作：

```
@Component
public class MyValidator ApplicationListener<ContextRefreshedEvent> {

    @Autowired private ListableBeanFactory bf;
    @Autowired private Validator validator;

    @Override
    public void onApplicationEvent(ContextRefreshedEvent event) {
        for (String name : bf.getBeanDefinitionNames()) {
            Object bean = bf.getBean(name);
            validator.validate(bean);
        }
    }
} 
```

但我没有测试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:35:11.797

简短的回答是否定的。尽管最初在 JSR-303 中并未提及，但它通常用于 MVC 数据绑定和验证。我会尝试以下。

[由于您有 JSR-303 注释，因此在 Spring 上下文中](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/validation.html#validation-beanvalidation-spring)配置JSR-303 验证器。在这种情况下，它将`LocalValidatorFactoryBean`引导标准 JSR-303 验证机制。请注意，您仍然需要在您的类路径中提供 JSR-303 的供应商/实现者（例如 Hibernate Validator）。

实现一个实例[`ApplicationContextListener<ContextStartedEvent>`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/ApplicationListener.html)以在应用程序上下文启动并准备好时接收事件。此外，允许 bean 接收以下实例`LocalValidatorFactoryBean`：

```
public class GenericApplicationValidator implements ApplicationListener<ContextStartedEvent> {

  private ValidatorFactoryBean validatorFactoryBean;

  public void onApplicationEvent(ContextStartedEvent e) {
    // Refer to next step
  }

  public void setValidatorFactoryBean(ValidatorFactoryBean vfb) {
    this.validatorFactoryBean = vfb;
  }
} 
```

在方法中`onApplicationEvent(ContextStartedEvent e)`：

1.  获取应用程序上下文的实例。
2.  通过应用程序上下文，找到您需要验证的所有 bean。
3.  您有权访问`validatorFactoryBean.getValidator()`
4.  遍历所有 bean，使用验证器并验证 bean。

请记住，我没有这样做的经验。但在我看来，这可能是接近实现所需目标的一种方式。

# java - 从另一个类返回时变量中的值丢失

> ID：11556391
> 
> 赞同：1
> 
> 时间：2012-07-19T08:01:53.807
> 
> 标签：java, android, variables

在A类中使用变量v，但是当我去B类然后返回A类时，值会改变。当我回到A类时，值是初始值。我们可以通过添加到`final`变量或`static`使其保持其值来修复吗？

![在此处输入图像描述](../Images/688891f7d9d74f9c633311d3c6103525.png)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:17:24.773

如果您在谈论Android的`Activity`类，则解决方案是使用`static`，因为每次启动新活动时，启动活动都会“暂停”（`onPause()`调用其方法）。当在新启动的 'back' 按钮被按下时`Activity`，堆栈中的前一个活动被恢复并`onResume()`调用它的方法。

然而，`static`变量只初始化一次。此外，该变量的单个副本由类/活动的所有实例共享，因此使用静态的另一个好处是您可以修改任何其他类的值。

在您的情况下，您可能正在方法中初始化非静态变量`onResume()`，因此从另一个活动返回会重新初始化其值。

在使用普通 Java 类的另一个类中的函数后返回控件时，不应发生同样的情况。

# c++ - 将字符串初始化为 null 与空字符串

> ID：11556394
> 
> 赞同：58
> 
> 时间：2012-07-19T08:02:03.840
> 
> 标签：c++, string, initialization

如果我的 C++ 代码（如下所示）有一个初始化为空字符串的字符串，这有什么关系：

```
std::string myStr = "";
....some code to optionally populate 'myStr'...
if (myStr != "") {
    // do something
} 
```

与无/空初始化：

```
std::string myStr;
....some code to optionally populate 'myStr'...
if (myStr != NULL) {
    // do something
} 
```

是否有任何最佳实践或陷阱？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-07-19T08:03:27.067

有一个功能`empty()`为你准备好了`std::string:`

```
std::string a;
if(a.empty())
{
    //do stuff. You will enter this block if the string is declared like this
} 
```

或者

```
std::string a;
if(!a.empty())
{
    //You will not enter this block now
}
a = "42";
if(!a.empty())
{
    //And now you will enter this block.
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-07-19T08:03:38.577

没有陷阱。的默认构造`std::string`是`""`. 但是您不能将字符串与`NULL`. 您可以获得的最接近的是使用方法检查字符串是否为空`std::string::empty`。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-07-19T08:05:53.163

最好的：

```
 std::string subCondition; 
```

这将创建一个空字符串。

这：

```
std::string myStr = ""; 
```

进行复制初始化 - 从 中创建一个临时字符串`""`，然后使用复制构造函数来创建`myStr`.

奖金：

```
std::string myStr(""); 
```

进行直接初始化并使用`string(const char*)`构造函数。

要检查字符串是否为空，只需使用`empty()`.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-19T08:03:14.740

我更喜欢

```
if (!myStr.empty())
{
    //do something
} 
```

你也不必写`std::string a = "";`。你可以写`std::string a;`- 默认情况下它将是空的

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-02-05T14:36:21.840

空性和“空性”是两个不同的概念。正如其他人提到的，前者可以通过 来实现`std::string::empty()`，后者可以通过 来实现`boost::optional<std::string>`，例如：

```
boost::optional<string> myStr;
if (myStr) { // myStr != NULL
    // ...
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-19T08:06:35.923

默认构造函数将字符串初始化为空字符串。这是说同样事情的更经济的方式。

然而，与`NULL`恶臭的比较。这是一种仍然普遍使用的旧语法，它意味着别的东西；一个空指针。这意味着周围没有字符串。

如果要检查字符串（确实存在）是否为空，请改用该`empty`方法：

```
if (myStr.empty()) ... 
```

# php - onclick() jQuery/JavaScript 按钮显示饼图不起作用

> ID：11556396
> 
> 赞同：4
> 
> 时间：2012-07-19T08:02:09.837
> 
> 标签：php, javascript, jquery, click

```
<a data-role="button" data-transition="flip" href="#feedbackmain" inline style="height:120px" type="button" name="feedbackLink">
        <img src="icons/report.png" inline style="height:80px"/><br/>Feedback
</a> 
```

所以我有这个按钮，如上所示，我试图触发它为我打开一个饼图。问题是我似乎无法让按钮工作。如果可能的话，我也可以在网页加载时创建饼图，但我也无法弄清楚如何做到这一点。我的饼图是用 jQplot 制作的，生成如下：

```
function drawChart(data) {
     var data = data;

      var options = {
          title: 'Pie Chart',
          seriesDefaults: {
            renderer: jQuery.jqplot.PieRenderer,
            rendererOptions: {
              showDataLabels: true,
              dataLabels: 'value',
              fill: false,
              sliceMargin: 5,
              lineWidth: 5,
              startAngle: 45
            }
          },
          legend: { show:true, location: 'w' }
        };

      $.jqplot('chartDivId', data, options);
    } 
```

现在，我尝试像这样调用函数：

```
$(document).ready(function()
    {
    drawChart([[["data1",6],["data2",5],["data3",2]]]);
}) 
```

我得到一个应该绘制图表的透明框，但是......它是透明的。我可以使用 data-role: page 在同一个 div 上创建一个带有 onClick 函数的按钮并让它工作，但我宁愿让它在启动时加载，因为我需要通过 PHP 从 MySQL 加载 data1、data2、data3 参数. 我什至无法使用以下代码与第一个片段中显示的按钮联系：

```
$("#feedbackLink").click(function()
        {
        alert("2");
        })
    }); 
```

有人知道怎么修这个东西吗？要么让按钮为我做这件事，要么让图表与脚本的其余部分一起自动加载。

编辑：我什至将其简化为：

```
$(document).ready(function()
    {
        $("#test").click(function()
        {
            alert("2");
        })
}) 
```

和按钮：

```
<div data-role="page" id="page1">
    <input type="button" id="test" value="test"/>
</div> 
```

我基本上删除了整个页面中的所有其他内容，仍然没有该死的联系：U

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:10:16.920

向锚链接添加一个`id`属性，然后尝试......它肯定会工作

在 jquery 中`#`类似于元素的 id

```
$("#feedbackLink").click(function()
        {
        alert("2");
        })
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:17:25.497

您需要将 id 属性添加到锚点，以便您可以使用 JQuery 处理单击事件

```
<a data-role="button" data-transition="flip" id="feedbackLink" href="#feedbackmain" inline style="height:120px" type="button" name="feedbackLink">
    <img src="icons/report.png" inline style="height:80px"/><br/>Feedback
</a> 
```

您还需要确保您的事件处理程序写入 $(document).ready()

```
$(document).ready(function(){
    $("#feedbackLink").click(function(){
      alert("2");
    })
}); 
```

# asp.net-mvc-2 - 当asp.net mvc中的网络相关或特定于实例的错误时如何重定向到另一个页面

> ID：11556397
> 
> 赞同：0
> 
> 时间：2012-07-19T08:02:11.187
> 
> 标签：asp.net-mvc-2

我总是得到错误：

```
 A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) 
```

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

现在，我想将我的项目重定向到一个页面，该页面显示消息“我们很快就会回来”或出现的错误消息旁边的其他内容。

谁能告诉我如何在我的 asp.net mvc 2.0 项目中做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:19:10.547

您可以`Application_Error`在您的`Global.asax`：

```
protected void Application_Error()
{
    var exception = Server.GetLastError();
    var sqlException = exception as SqlException;
    // See http://msdn.microsoft.com/en-us/library/cc645603.aspx 
    // for a full list of error numbers that you might be interested in
    if (sqlException != null && sqlException.Number == 2)
    {
        // it was a SqlException with error number = 2 meaning that this
        // is the exception that you wanted to handle => we redirect to some page
        Response.Clear();
        Server.ClearError();
        Response.Redirect("~/Offline.htm");
    }
} 
```

# asp.net - iis6 url重定向

> ID：11556400
> 
> 赞同：0
> 
> 时间：2012-07-19T08:02:23.850
> 
> 标签：asp.net, url-rewriting, iis-6, url-routing

到目前为止，我一直在我的项目中使用 iis 7。我的 url 重写系统将 404 错误重定向到 iis7 中的 pagenotfound.aspx 页面，然后找到即将到来的 url mathces 并将其重定向

例如

如果请求是[http://www.mysite.com/productname](http://www.mysite.com/productname) 我会将其重定向到[http://www.mysite.com/products.aspx?id=33](http://www.mysite.com/products.aspx?id=33)

但是现在我必须在我的新项目中为我的客户使用 iis 6，我想知道这种方法是否也可以在 iis 6 中使用？是否可以以相同的方式完成，或者如果可能的话有什么不同吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:04:00.693

II6 中的自定义错误几乎以完全相同的方式工作。打开网站的属性，您将看到一个“自定义错误”选项卡，您可以访问它们。

如果您正在谈论 IIS6 的“URL 重写”样式模块，这里有一个称为 IIRF（Ionics Isapi 重写过滤器）的[模块](http://iirf.codeplex.com/)。

**编辑**- 我从未使用过 IIRF，因此无法评论它与 IIS7 的官方 URL 重写相比有多相似或有用

# java - Jenkins 构建错误 java.lang.ClassNotFoundException: hudson.remoting.Launcher

> ID：11556404
> 
> 赞同：11
> 
> 时间：2012-07-19T08:02:49.247
> 
> 标签：java, continuous-integration, hudson, jenkins, jenkins-plugins

我正在尝试将 jenkins 与 svn 集成。我已经配置了maven_home、java_home（java 1.5 update 22）。我正在使用詹金斯版本 1.459 。我的一位同事使用 svn 成功配置了 jenkins。但是由于现在我们使用的是不同的分支，所以我想添加一个新工作，以便它从新分支中检出并持续集成项目。詹金斯在远程 linux 机器上运行，我使用 vpn 连接到服务器并设置东西。我错过了什么。

```
Modules changed, recalculating dependency graph
[workspace] $ /usr/lib/jvm/jdk1.5.0_22/bin/java -cp /home/vimukthi/.jenkins/plugins/maven-plugin/WEB-INF/lib/maven3-agent-1.2.jar:/home/vimukthi/.jenkins/tools/Maven_3.0.3/boot/plexus-classworlds-2.4.jar org.jvnet.hudson.maven3.agent.Maven3Main /home/vimukthi/.jenkins/tools/Maven_3.0.3 /tmp/Jetty_0_0_0_0_2080_jenkins.war__jenkins__.wq5y0j/webinf/WEB-INF/lib/remoting-2.13.jar /home/vimukthi/.jenkins/plugins/maven-plugin/WEB-INF/lib/maven3-interceptor-1.2.jar 45339

Exception in thread "main" java.lang.ClassNotFoundException: hudson.remoting.Launcher
    at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:50)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:244)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:230)
    at org.jvnet.hudson.maven3.agent.Maven3Main.main(Maven3Main.java:130)
    at org.jvnet.hudson.maven3.agent.Maven3Main.main(Maven3Main.java:63)
ERROR: Failed to parse POMs
java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:168)
    at java.io.FilterInputStream.read(FilterInputStream.java:116)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
    at hudson.remoting.ClassicCommandTransport.create(ClassicCommandTransport.java:98)
    at hudson.remoting.Channel.<init>(Channel.java:373)
    at hudson.remoting.Channel.<init>(Channel.java:369)
    at hudson.remoting.Channel.<init>(Channel.java:330)
    at hudson.remoting.Channel.<init>(Channel.java:326)
    at hudson.remoting.Channel.<init>(Channel.java:322)
    at hudson.slaves.Channels$1.<init>(Channels.java:71)
    at hudson.slaves.Channels.forProcess(Channels.java:71)
    at hudson.maven.AbstractMavenProcessFactory.newProcess(AbstractMavenProcessFactory.java:237)
    at hudson.maven.ProcessCache.get(ProcessCache.java:231)
    at hudson.maven.MavenModuleSetBuild$RunnerImpl.doRun(MavenModuleSetBuild.java:706)
    at hudson.model.AbstractBuild$AbstractRunner.run(AbstractBuild.java:475)
    at hudson.model.Run.run(Run.java:1413)
    at hudson.maven.MavenModuleSetBuild.run(MavenModuleSetBuild.java:479)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:238)
Sending e-mails to: testjenkins@gmail.com
Finished: FAILURE 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T14:12:43.873

Looks like I managed to solve the problem. Disconnecting and reconnecting the slave solves it only temporarily. But what I did is, I changed the java that master and slaves run with. Now my slaves and master run with exactly the same version of java (6u41 32bit) and it's about 3 weeks we don't face this kind of problems.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-13T14:59:21.590

可以通过破坏从属的构建根目录中的库来重现此错误。在这种情况下，重新连接从站可以解决这种情况，因为通过重新连接从站，詹金斯会复制所有必要的库等。

要查看此操作，请在重新连接时查看 jenkins 控制台，您将看到如下内容：

> Slave.jar 版本：2.28
> 
> 这是一个 Unix 从站
> 
> 复制 maven-agent.jar
> 
> 复制了 maven3-agent.jar 复制了 maven3-interceptor.jar
> 
> 复制 maven-interceptor.jar
> 
> 复制maven2.1-interceptor.jar 复制plexus-classworld.jar
> 
> 复制classworlds.jar

所以，发生了什么，所有的库都被詹金斯重新同步了。这可以归结为詹金斯中的一个错误（恕我直言）......理想情况下，奴隶应该对这类故障具有鲁棒性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-22T14:37:03.447

我在我们的测试环境中多次看到这个问题，并提供 slave.jar 解决了这个问题。

不幸的是，有一个工作在重建环境时只移动了 maven-agent* 而不是 slave.jar，我们曾经反复面对这个问题。

复制 slave.jar 解决了这个问题。

# javascript - 如何在我的网站中获取用户在线状态（实时）

> ID：11556407
> 
> 赞同：0
> 
> 时间：2012-07-19T08:02:57.457
> 
> 标签：javascript, php, jquery, session, dom-events

我想在我的网站上显示所有用户在线（实时；像任何聊天模块一样）。我正在使用下面提到的脚本来执行此操作。

**HTML：**

```
<body onbeforeunload="Unload();" onmousedown="checkfunction();">

</body> 
```

**Javascript：**

```
var doClose = false;

document.onkeydown = checkKeycode;

function checkKeycode(e){
var keycode;
if (window.event)
keycode = window.event.keyCode;
else if (e)
keycode = e.which;
 if(keycode == 17 ){
  doClose = true;
 }
}

function checkfunction(){ 
 doClose = true;
}

function Unload(){
 if(!doClose){
  set_user_log_out(<?php ehco $u_id ?>);
 }
} 
```

功能是`set_user_log_out`设置用户登出。

在上面提到的 java 脚本中，我想考虑下面提到的场景。

1.  用户可以在浏览器中打开多个选项卡。或者，他可能会打开多个浏览器（仅限同一浏览器）。
2.  用户可以关闭一个选项卡并访问另一个选项卡。
3.  用户可以单击一个选项卡并简单地关闭另一个选项卡。
4.  用户可以在不点击注销选项的情况下关闭浏览器。
5.  用户可以使用键盘快捷键（例如`ctrl`+ `F4`）关闭浏览器。

所以，我也在检查键码（使用键盘按下了哪个键）。但是，此代码存在一些问题。下面提到了它们。

*   我还没有找到任何解决方案来获取多个键的键码（例如`ctrl`+ `F4`）
*   考虑到两个选项卡，如果我键入其他 url（同一站点的），该页面会继续在 Firefox 中加载。
*   `ctrl`+`r`不能完全工作。
*   有时在尝试访问站点的其他页面时，它只是执行该功能`set_user_log_out()`（仅在 Firefox 中发生）

请建议我为此需要什么。我也浏览了下面提到的网址。

[如何追踪我网站用户的在线状态？](https://stackoverflow.com/questions/1084099/how-to-track-the-online-status-of-users-of-my-website)

但是上面网址上描述的功能没有考虑我的场景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:11:01.380

您应该在数据库中保留活动会话列表以及上次活动时间。

在对服务器的每个请求上，您应该更新发出请求的特定会话的最后活动时间。“在线用户”在此表上有 COUNT 个，比方说，最后一个活动 < 1 分钟前

在注销功能上，您还应该从此表中删除特定会话

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:33:57.450

为了让 Jerzy 给你的想法“实时”，你需要添加一些 ajax。使用ajax，您可以在不离开页面的情况下查看在线用户。此外，您可以向数据库添加离开状态，这意味着：检查用户是否仍在页面上但没有执行任何操作等。这是一个非常简单的方法:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-07T15:02:20.760

我有一个 php 脚本，它将所有在线用户存储在一个 json 文件中。然后我使用 jquery 将每个用户存储在一个`li-table`：

```
function getAllUsers(){
  $.getJSON('online.php',function(data){
   $.each(data, function(i, data){
        if(data.user_status == 'online') {
          $("#online-user")
          .append("<tr><td>" + data.user_id + "</td><td>"
                  + data.user_name + "</td><td>"
                  + data.user_status + "</td></tr>)");
         }
   });
   })
} 
```

# sql - 固定大小的数据库 - 优势？

> ID：11556409
> 
> 赞同：1
> 
> 时间：2012-07-19T08:03:04.663
> 
> 标签：sql, sql-server-2008

我有一个需要支持许多 INSERT、UPDATE 和 DELETE 的数据库。该数据库保留最近 3 个月的实时数据。数据量很大——数据库的大小约为 0.5TB。

每天我都会运行一个流程来归档超过 3 个月的数据。当然，删除数据不会释放结果空间。要回收磁盘空间，我需要（自动）收缩数据库。当需要更多数据库空间时，这当然是（自动）增长。

另一方面，我们知道[缩小数据库是邪恶的！](http://blogs.msdn.com/b/sqlserverstorageengine/archive/2007/03/28/turn-auto-shrink-off.aspx) 我想到的一个解决方案是为我的数据库设置一个从 0.5TB 到 0.8TB 甚至 0.9TB 的固定大小，或者希望在存档数据（即删除旧数据）后产生的可用空间将被数据库重用之后。

谁能确认这样我可以避免（自动）收缩+（自动）增长的需要？当然，我们假设固定大小足够大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:09:06.357

为什么不设置一个计划任务，每 n 天收缩一次数据库。

固定大小是有风险的——容易填满数据库，并阻止实时访问。

# asp.net-mvc - 我怎样才能像函数一样调用动态对象？

> ID：11556410
> 
> 赞同：1
> 
> 时间：2012-07-19T08:03:04.770
> 
> 标签：asp.net-mvc, c#-4.0, dynamic, orchardcms

我正在学习果园建筑。我在展示管理部分遇到了一个奇怪的概念。在部分视图页面中，有一个类似这样的“函数调用”语法`Display(Model.Head)`。那不是一个函数思想，它是一个在orchard WebViewPage中定义的动态对象。我想知道如何定义一个动态对象，以便您可以像我提到的函数一样调用它（并传递一个参数）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:44:47.517

我终于找到了我自己！所有操作都在幕后使用 Clay Library 完成。我编写了一个示例控制台应用程序来演示该过程。

```
class Program
    {
        static void Main(string[] args)
        {
            Display = ClayActivator.CreateInstance<MyResponser>(new List<IClayBehavior> {new MyFunctionCallBehavior()});

            //this is what i was after
            Console.Write(Display("bla bla bla"));
        }

    public static dynamic Display;
}

public class MyFunctionCallBehavior : IClayBehavior
{
    public object InvokeMember(Func<object> proceed, object self, string name, INamedEnumerable<object> args)
    {
        return ((MyResponser)self).ResponseForRequest(args.FirstOrDefault().ToString()); 
    }
}

public class MyResponser
{
    public string ResponseForRequest(string param)
    {
        return string.Format("This is response for {0}",param);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:41:50.283

一个没有粘土的更轻量级的方法是继承内置的[DynamicObject](http://msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject.aspx)类。

```
public static dynamic Display;
void Main()
{
        Display = new MyCallableObject();

        //this is what i was after
        Console.Write(Display("bla bla bla"));     
} 

public class MyCallableObject:DynamicObject
{
     public override bool TryInvoke(InvokeBinder binder, object[] args, out Object result)
     {
        result = string.Format("This is response for {0}",args.FirstOrDefault());
        return true;
     }
} 
```

# c# - 在 Avalonedit 上为边距着色

> ID：11556427
> 
> 赞同：2
> 
> 时间：2012-07-19T08:03:48.153
> 
> 标签：c#, .net, wpf, margin, avalonedit

我通过以下方式在我的 TextEditor 的左侧添加了一个边距（用于添加断点）：

```
public partial class LogicSimViewCodeWPFCtrl : UserControl
    {

private class BreakPointMargin : AbstractMargin
    {
        private const int margin = 20;
        protected override HitTestResult HitTestCore(PointHitTestParameters hitTestParameters)
        {
            return new PointHitTestResult(this, hitTestParameters.HitPoint);
        }

        protected override Size MeasureOverride(Size availableSize)
        {
            return new Size(margin, 0);
        }
    }
}

    private void LogicCodeInit()
    {
        try
        {
            TxtEditCodeViewer.TextArea.LeftMargins.Insert(0, new BreakPointMargin());
            ... 
```

边距已成功添加，但现在我想为边距的背景着色。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T14:41:30.087

[http://community.sharpdevelop.net/forums/t/16047.aspx](http://community.sharpdevelop.net/forums/t/16047.aspx)

您将不得不覆盖`OnRender`：

```
 protected override void OnRender(DrawingContext drawingContext)
    {
        Size renderSize = this.RenderSize;
        drawingContext.DrawRectangle(SystemColors.ControlBrush, null,
                                     new Rect(0, 0, renderSize.Width, renderSize.Height)); 
```

此外，您不需要派生自`AbstractMargin`- 您可以使用任何您想要的 WPF 控件。`AbstractMargin`只提供`TextView`and`Document`属性并使它们保持最新。如果您不需要这些或可以自己实现它们，则可以使用另一个基类。

# iphone - 每天设定时间的本地通知

> ID：11556428
> 
> 赞同：0
> 
> 时间：2012-07-19T08:03:55.047
> 
> 标签：iphone, uilocalnotification

我的要求很简单：如何设置每天在设定时间向用户发送本地通知？因此，例如，在上午 9 点发送通知。每天。

我试过环顾四周，但似乎没有地方有我想要的东西。他们似乎都使用日期选择器，而我对 Obj-C 的经验还不够丰富来解决它们。

任何事情都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:44:03.967

UILocalNotification 有几个属性，比如`repeatInterval`or`fireDate`可以帮助你。

[http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html)

但要小心，因为你有一些限制。检查这个：

[自定义警报的 UILocalNotification 重复间隔（周日、周一、周二、周三、周四、周五、周六）](https://stackoverflow.com/questions/6966365/uilocalnotification-repeat-interval-for-custom-alarm-sun-mon-tue-wed-thu-f)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:10:12.127

让 NSTimer 在后台运行，间隔为 60 秒。获取每分钟的当前时间。如果当前时间等于上午 9 点，则显示本地通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:21:39.620

使用 NSDateComponents 并将它们设置为 fireDate 似乎可以工作。使用repeatInterval 重复该操作。

# windows-installer - installshield 禁止从命令行重新启动

> ID：11556430
> 
> 赞同：0
> 
> 时间：2012-07-19T08:04:06.443
> 
> 标签：windows-installer, installshield

我正在使用 installshield msi 项目类型。在这我正在执行 msiexec.exe /x[productcode] /qn /norestart - 这正在生成错误代码 1722。谁能告诉我这到底是什么意思？我该如何反击呢？

错误 1722：此 Windows 安装程序包有问题。作为设置的一部分运行的程序未按预期完成。请联系您的支持人员或软件包供应商。动作 [2]，位置：[3]，命令：[4]

我提供以下设置 - 工作目录 - 系统文件夹文件名和命令行 - msiexec.exe /x[ProductCode] /qn /norestart

我也尝试过 REBOOT=ReallySuppress，REBOOT=S，REBOOT="ReallySuppress"。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:55:01.153

您是否尝试从 MSI 中将 msiexec 作为自定义操作运行？你不能那样做。msiexec 的第二个实例正在尝试实例化互斥锁，但由于它已被正在进行的安装所持有，因此无法实例化。

如果您想在安装过程中删除已安装的产品，只需使用[升级表](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372374%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:19:31.847

1722 是自定义操作遇到错误时的一般错误。

检查您的 customaction 是否在成功时返回零。

您可以忽略您的自定义操作 EXE 的返回值。或者你应该让你的自定义操作在成功时返回零。

还可以尝试 /qb 而不是 /qn 以便您可以从 Windows 安装程序中获取错误（如果有）。如果你知道了，你可以尽快修复它，然后将其更改为 /qn

# c# - 如何创建 2 个相关的下拉列表

> ID：11556432
> 
> 赞同：1
> 
> 时间：2012-07-19T08:04:12.467
> 
> 标签：c#, javascript, asp.net-mvc-3, html, jquery

我有关于手机配件的 mvc3（使用 C#）应用程序。有配件模型，它具有标签属性。当我创建新的 Accessory 对象时，我为其 Tag 属性赋予了一些值，例如 Nokia、Samsung、E55、C15、Blackberry 等。我将在配件搜索中使用 Tag 属性。在搜索时，我希望用户从下拉列表中选择手机名称，然后在其他下拉列表中动态加载手机型号。例如，当我选择诺基亚时，在底部下拉列表中，诺基亚的型号加载为 N8、E51、E55 等。

如何确定电话名称及其型号列表并动态绑定它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:06:56.593

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/CascadingDropDown/CascadingDropDown.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/CascadingDropDown/CascadingDropDown.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:13:27.553

与局部视图一起使用`Ajax.BeginForm`以替换第二个下拉列表的内容。您可以使用 Javascript 使用第一个下拉列表的`onchange`事件来回发 Ajax 表单。

确保您还包括：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

让 Ajax 与 MVC3 一起工作，假设您使用的是不显眼的 javascript 默认配置设置。

# jsf - 如何减少 Primefaces 中 p:tabView 内的空格？

> ID：11556438
> 
> 赞同：1
> 
> 时间：2012-07-19T08:04:23.463
> 
> 标签：jsf, primefaces

我正在使用 Primefaces V3.3.1 并希望减少 p:tabView 中的空间。 [![布局](../Images/e458ecf833f2677858f1d4939a2baf2a.png)](https://i.stack.imgur.com/6yxFc.png) 在这种情况下，我有 2 个嵌套的 p:tabView 和 p:dataTable。屏幕空间对我们来说非常昂贵，所以我想减少显示红色和蓝色的空间。那么，问题 1：如何减少 p:tabView 中的空格（涂成红色）？问题 2：如何减少 p:dataTable 周围的空格（涂成蓝色）？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T12:01:29.947

首先你应该学习一些关于css的东西......你所说的“空间内部”是填充css属性，你所说的“周围空间”是边距。无论如何，要减少选项卡的填充，请将以下样式添加到您的 css 文件中：

```
.ui-tabs .ui-tabs-panel {
      padding: 5px 5px;
} 
```

这将减少所有选项卡视图的平移。如果你想让这个样式只应用于一些tabView，那么你应该使用tabView的styleClass属性，然后将css规则替换为`.youTabClass .ui-tabs .ui-tabs-panel`

至于数据表..数据表本身没有边距。但似乎在您模糊的屏幕截图中，桌子周围有一个面板。p:panel 也有填充。要减少面板的填充：

```
.ui-panel .ui-panel-content {
     padding: 5px 5px;
} 
```

这也适用于您的所有面板，因此您应该使用 atyleClass 使这种样式特定于面板。

# c++ - 在 c 中工作但在 c++ 中不工作的代码

> ID：11556439
> 
> 赞同：4
> 
> 时间：2012-07-19T08:04:27.853
> 
> 标签：c++, c

以下代码在 C 中运行良好，但是当我尝试用 c++ 编写时，程序无法运行。请解释一下。

**C代码：**

```
#include<stdio.h>
#include<stdlib.h>

int main()
{
    int a = 33,b = 7;
    printf("%d\n",a&b);
    return 0;
} 
```

**C++ 代码：**

```
#include<iostream>

using namespace std;

int main()
{
    int a = 33,b = 7;
    cout << 33&7 << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-19T08:05:50.717

注意您的运算符优先级：

```
cout << (33 & 7) << endl; 
```

`&`的优先级低于`<<`。所以你需要使用`()`.

* * *

有关 C 和 C++ 中运算符优先级的完整列表：

[http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:42:33.223

您的台词将被解释为：

```
(cout <<33)&(7<<endl); 
```

它应该是：

```
cout << (33&7) << endl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T08:37:19.343

这个问题与C和C++之间的区别无关。这是关于运算符的优先级和决定表达式边界的位置。正确的示例应如下所示：

```
printf("%d\n", a&b); 
```

和

```
short cout;
int endl;
long var = cout << 33 & 7 << endl; 
```

事实上，C++ I/O 建议`<<`用于打印变量并不重要。C++ 表示重载操作的优先级与常规运算符的优先级相同。

# javascript - 使用 jqGrid 的最低 jQuery 版本

> ID：11556454
> 
> 赞同：0
> 
> 时间：2012-07-19T08:05:06.607
> 
> 标签：javascript, jquery, jqgrid

我计划将 jqGrid 用于我现有的一个项目。我真的很喜欢列标题分组选项。目前我使用的是 jQuery 1.5.2 版本。所以这个版本可以与最新版本的 jqGrid 一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:09:57.057

从[jqGrid wiki](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3asystem)（*系统要求*部分）到使用 jqGrid，您需要以下内容：

> *   任何现代网络浏览器：Mozilla Firefox、Safari、Google Chrome、Opera、Microsoft Internet Explorer
> *   **jQuery 库，版本 1.3 或更高版本**
> *   您选择的 jQuery UI 主题
> *   jqGrid 插件

**参考：**

*   [http://www.trirand.com/jqgridwiki/doku.php?id=wiki:system](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:system)

# javascript - 在一行中构建多种元素类型的 NodeList？

> ID：11556456
> 
> 赞同：2
> 
> 时间：2012-07-19T08:05:20.077
> 
> 标签：javascript, dom, concat, nodelist

我试图在没有任何辅助 JS 库的情况下在一行代码中声明页面上所有表单元素（输入、选择、文本区域和按钮）的数组。

到目前为止，我能想到的最好的就是这个丑陋的废话：

```
var formElements = Array.prototype.slice.call(document.getElementsByTagName('input')).concat(Array.prototype.slice.call(document.getElementsByTagName('select'))).concat(Array.prototype.slice.call(document.getElementsByTagName('textarea'))).concat(Array.prototype.slice.call(document.getElementsByTagName('button'))); 
```

任何人都可以帮我制作一个不那么糟糕的版本吗？

# android - ImageView 失真

> ID：11556458
> 
> 赞同：0
> 
> 时间：2012-07-19T08:05:28.993
> 
> 标签：android, dialog, bitmap, imageview, distortion

我有一个奇怪的问题。在我的应用程序中，我在图像视图中显示位图。正常情况下看起来不错。但是当一个对话框说 waitdialog 出现在前面时，它会从底部向下切。我有下面的示例图片：

正常图像：

![在此处输入图像描述](../Images/5c21671c054e5f1d301b8c6c2fac2873.png)

显示对话框后：

![在此处输入图像描述](../Images/73c0307516bd9ec3d9f0a11a088c3054.png)

知道这有什么问题吗？

**编辑：**

```
Dialog waitDialog = new ProgressDialog(this);
waitDialog.setMessage("Loading properties...");
waitDialog.show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:25:28.613

奇怪的。但是`ImageView`，当您隐藏您的`Dialog`, 或尝试设置 ImageVeiw 的任何其他参数以强制它重新布局其内容时，您是否可以尝试使您的 , 无效，如下所示：

```
img.invalidate(); 
```

# gcc - Qt 创建者 -1：错误：[CMakeFiles/yahtzee.dir/gamecontroller.cpp.o] 错误 1：找不到文件

> ID：11556461
> 
> 赞同：1
> 
> 时间：2012-07-19T08:05:32.337
> 
> 标签：gcc, cmake, qt-creator, file-not-found

我正在使用带有 CMake (2.8.7) 和 gcc 4.6.3 的 Qt creator 2.5，最近我遇到了这个奇怪的错误：

> :-1: 错误：[CMakeFiles/yahtzee.dir/gamecontroller.cpp.o] 错误 1 ​​找不到文件

我能做些什么呢？CMake 没有生成这个`gamecontroller.cpp.o`

这是我的`CMakeLists.txt`文件

```
project(cpp_workshop)
cmake_minimum_required(VERSION 2.6)

# Set default compile flags for GCC
if(CMAKE_COMPILER_IS_GNUCXX)
    message(STATUS "GCC detected, adding compile flags")
    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11 -pedantic -Wall -Wextra -Werror")
else()
    message(STATUS "GCC not detected, probably running Windows")
endif(CMAKE_COMPILER_IS_GNUCXX)

#add_definitions("-Wall -Werror")
ADD_DEFINITIONS("-Wno-unused-parameter")

add_executable(yahtzee #name of the executable
gamecontroller.h gamecontroller.cpp
player.h player.cpp
game.h game.cpp
dice.h dice.cpp
strategy.cpp strategy.h
istrategy.h
game_rules.h
main singleton 
) 
```

顺便提一下，所有这些文件都位于目录中，这是 CMake 创建的“构建”目录：

```
CMakeCache.txt  CMakeFiles  cmake_install.cmake  cpp_workshop.cbp  Makefile 
```

和上面的`CMakeFiles`目录

```
CMakeCCompiler.cmake               CMakeDirectoryInformation.cmake  CompilerIdCXX   TargetDirectories.txt
cmake.check_cache                  CMakeOutput.log                  Makefile2       yahtzee.dir
CMakeCXXCompiler.cmake             CMakeSystem.cmake                Makefile.cmake
CMakeDetermineCompilerABI_C.bin    CMakeTmp                         Progress
CMakeDetermineCompilerABI_CXX.bin  CompilerIdC                      progress.marks 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:27:09.923

好的，问题在于`Cmake`传递给 gcc 的参数

`set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")`

我把它改成了

`set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++0x")`

现在它可以工作了。令人惊讶的是，C++11 还不能与 gcc 一起使用？

# image - 一张大图制作的动画

> ID：11556466
> 
> 赞同：0
> 
> 时间：2012-07-19T08:05:48.370
> 
> 标签：image, animation

我想知道是否有任何库可以让我在网站上上传大图像而不是创建动画。

**动画描述：**
假设显示较小`300*300`，上传的图像较小`1024*768`，我希望动画环绕图像，缩小一点，放大等。

我希望我足够清楚。

感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:12:33.653

这可以通过 jquery 函数 animate 轻松完成： [jquery animate() doc](http://api.jquery.com/animate/)

他们的文档中有一些示例。您可以使用“overflow:hidden”在 div 中工作并将图像放入该 div 或设置为背景图像。animate() 允许您操作 css 样式。此外，您可以附加 animate() 调用。

# c# - 在列表中查找最新记录

> ID：11556473
> 
> 赞同：1
> 
> 时间：2012-07-19T08:06:14.460
> 
> 标签：c#, list, console-application, dataservice

我有一个 list`rms.PositiveResponse`和另一个 list `rms.NegativeResponse`。列表包含 a`RecruitID`和 a `Timestamp`。我有超过 10,000 条记录。

我正在从 Web 服务获取这些数据。

问题在于找出 a 的最新更新`RecruitID`是正面响应还是负面响应。我怎样才能确定呢？我有`Timestamp`for each `RecruitID`，最新的时间戳可以告诉我最新的更新。我怎样才能知道 a 的最新更新是什么，`RecruitID`以便我可以将其存储在数据库中？

这是我的尝试，但这是一种非常慢的比较方法，我想知道是否有更快的方法。

```
RMSDataService.RMS rms = new RMSDataService.RMS();
var negList = rms.NegativeResponse.Where(d => d.RLMSTimeStamp != null && d.RLMSTimeStamp > new DateTime(2012, 02, 22));
var posList = rms.PositiveResponse.Where(d => d.RLMSTimeStamp != null && d.RLMSTimeStamp > new DateTime(2012, 02, 22));

foreach (var pos in posList)
{
  foreach(var neg in negList)
  {
    if(neg.RLMSRecruitId == pos.RLMSRecruitId && neg.RLMSTimestamp > pos.RLMSTimestamp)
    {
      Console.WriteLine("Item fetched: RecruitId:{0} NegTimeStamp:{1} PosTimeStamp:{2}", neg.RLMSRecruitId, neg.RLMSTimeStamp, pos.RLMSTimeStamp);
    }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:18:30.537

试试这个：

```
var negList = rms.NegativeResponse.Where(d => d.RLMSTimeStamp != null && d.RLMSTimeStamp > new DateTime(2012, 02, 22)).toList();
var posList = rms.PositiveResponse.Where(d => d.RLMSTimeStamp != null && d.RLMSTimeStamp > new DateTime(2012, 02, 22)).toList();

var item = (from pos in posList
            join neg in negList
              on
                 pos.RLMSRecruitId equals neg.RLMSRecruitId
              orderby pos.RLMSTimestamp descending
              select pos).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:44:09.010

看待问题的一种方式是，您遇到的主要问题是您没有关于源数据的指示符来判断响应是 +ve 还是 -ve。因此，创建一个包含该指标的新列表，然后您可以轻松找到每个 ID**和**响应类型的最新时间的记录。

例如

```
class Record {
    public int  Id { get; set; }
    public DateTime Timestamp { get; set; }
}

private Record[] PositiveResponses = new[]{
    new Record{ Id =1 , Timestamp = new DateTime(2012,1,1)},
    new Record{ Id =1 , Timestamp = new DateTime(2012,1,2)},
    new Record{ Id =2 , Timestamp = new DateTime(2012,1,3)},
    new Record{ Id =2 , Timestamp = new DateTime(2012,1,5)}, // latest for id 2
    new Record{ Id =3 , Timestamp = new DateTime(2012,1,8)},
    new Record{ Id =4 , Timestamp = new DateTime(2012,1,8)}  // latest for Id 4
};

private Record[] NegativeResponses = new[]{
    new Record{ Id =1 , Timestamp = new DateTime(2012,1,1)},
    new Record{ Id =1 , Timestamp = new DateTime(2012,1,3)}, // latest for Id 1
    new Record{ Id =2 , Timestamp = new DateTime(2012,1,4)},
    new Record{ Id =3 , Timestamp = new DateTime(2012,1,9)}  // latest for id 3
};

[TestMethod]
public void GetLatest() {

    var results = PositiveResponses.Select(r => new {
                                                     Id = r.Id, 
                                                     Timestamp = r.Timestamp, 
                                                     Type = "Pos"
                                                 })
                                    .Union(
                  NegativeResponses.Select(r => new {Id = r.Id, 
                                                     Timestamp = r.Timestamp,
                                                     Type = "Neg"}))
                  .GroupBy(r => r.Id)
                  .Select(grp => grp.OrderByDescending(r => r.Timestamp).First());

    } 
```

我们从每个列表中选择一个新的（匿名）记录，其中包含 Id、时间戳和类型“Pos”或“Neg”，然后将它们合并到一个新列表中。

一旦我们有了新列表，就很容易按 Id 分组，然后选择时间戳最高的记录。该记录将具有 Id、Timestamp 和 Pos/Neg 指示器。

# magento - 如何在 Magento 中分组折扣？

> ID：11556475
> 
> 赞同：3
> 
> 时间：2012-07-19T08:06:23.660
> 
> 标签：magento, max, discount

有人知道如何在 Magento 中对折扣进行分组吗？如何设置每组的最大总折扣？以及如何设置最大总折扣？例如：

```
Discount Group 1:
a. Early Bird Discount = 10%
b. Member of ABC Organization = 8%
c. Member of BCD Organization = 5%
-----Total Maximum discount for this discount group = 15%

Discount Group 2:
a. Buy more than 5 items = 10%
b. Member of DFG Organization = 5%
c. Member of ASD Organization = 5%
-----Total Maximum discount for this discount group = 15%

-----Total Maximum discount for ALL discount group = 25% 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T09:02:02.430

不幸的是，不可能通过 Magento 的标准功能实现您需要的完全相同的功能。但是您可以使用折扣组创建自定义并通过观察事件来验证折扣金额`salesrule_validator_process`。

所以一步一步的发展建议：

1.  创建一个包含 2 个自定义表的新模型，这些表将包含以下字段：
    *   组表：
        *   group_id - 主键
        *   name - 组的名称
        *   max_discount - 最大折扣金额
        *   is_percent - 类型（固定或百分比）
    *   分组到规则表
        *   group_id - primary_key
        *   rule_id - 销售/规则表主键的外键 2\. 为其实现管理界面
2.  为所有组创建最大折扣的配置字段。
3.  `salesrule_validator_process`为您收到带有数据的此类事件 的事件创建观察者：
    *   `$observer->getEvent()->getRule()`- 当前应用规则的模型
    *   `$observer->getEvent()->getItem()`- 应用此规则的当前报价项目
    *   `$observer->getEvent()->getAddress()`- 应用此规则的当前报价地址
    *   `$observer->getEvent()->getQuote()`- 客户的当前报价
    *   `$observer->getEvent()->getQty()`- 用于计算折扣的商品数量：固定商品折扣、商品价格百分比、商品价格百分比
    *   `$observer->getEvent()->getResult()`- Varien_Object 具有作为折扣应用的数据，目前有两个属性。
        *   `getDiscountAmount()`- 当前显示货币的折扣金额
        *   `getBaseDiscountAmount()`- 基础网站货币的折扣金额
4.  在观察者模型中实现你的逻辑。您可以通过将应用的规则存储在您的对象中并使用下一个规则应用流程来跟踪应用的规则 - 验证组最大值并更改应用的折扣金额。

# c++ - 在类实例之间共享变量

> ID：11556481
> 
> 赞同：0
> 
> 时间：2012-07-19T08:06:44.630
> 
> 标签：c++, design-patterns, visual-c++, mfc

```
class MyApp : public CWinApp {
        afx_msg OnPrefrences();
    }; 
```

当用户从菜单栏中选择工具->首选项时，将调用 OnPrefrences()。

现在在一个对话框中（比如说 DlgX）有一个按钮，点击这个按钮我需要打开 Preference 对话框，它实际上有很多窗格，但是在这里我需要通过选择这些窗格中的一个来打开 Preference 对话框。同样在那个特定的窗格中，我需要隐藏一些控件，只有当它通过这个对话框而不是通过菜单打开时。

所以我在 MainFrm 类中创建了一个变量（比如 m_varX）。

```
void DlgX::OnButtonXClick()
{
   CMainFrame* pFrame = (CMainFrame*)AfxGetMainWnd();
   if(pFrame)
   {
       pFrame->m_varX = TRUE;
      ((CMyApp*)(AfxGetApp()))->OnPrefrences();
      pFrame->m_varX = FALSE;
   }
} 
```

在 DlgX 的按钮处理程序中，我已将此 m_varX 设为 TRUE 并调用 OnPreference()，在关闭此首选项对话框后，我已将 m_varX 设为 FALSE。

所有这一切都很好......但问题是mainFrm中的事情变得混乱。此外，我正在从事的项目是遗留项目，因此我无法进行太多更改。

***有什么模式可以处理这种情况吗？***

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:09:58.800

我认为对于这种特殊情况，即使有时不再被视为一种模式，[单例模式](http://www.codeproject.com/Articles/1921/Singleton-Pattern-its-implementation-with-C)也会为您工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:34:48.310

您可以使用自定义对话框解决此问题（如果您还没有）

当您从主菜单显示对话框时，即`onPreferences()`填充并显示所有“窗格”。你将不得不做一个自定义对话框，其中 ctor 接受一些参数。

例如

```
enum { all, part };

void MainFrame::OnPreferences() 
{
  CMyPreferences dlg( GetDocument(), all );
  dlg.DoModal();
} 
```

但是当您从对话框中调用它时，您只需填写您需要的部分。

```
void YourDialog::OnPreferences()
{
  CMyPreferences dlg( GetDocument(), part );
  dlg.doModal();
} 
```

对于要显示/允许编辑的内容的更精细调整的配置，该参数可能更复杂。

# ruby-on-rails - 通过 has_many 关系返回的 Rails 未定义方法

> ID：11556490
> 
> 赞同：0
> 
> 时间：2012-07-19T08:07:17.453
> 
> 标签：ruby-on-rails, undefined, has-many

我在这里遇到了一个我不太明白的问题。导轨 3.1。

我有两个类与 has_many 关系书籍和数据链接：

```
class Book < ActiveRecord::Base
has_many :data, :dependent => :destroy
end

class Datum < ActiveRecord::Base
belongs_to :books

def file_path
    u = @book.path + '/' + self[:name] + '.' + self[:format]
    return u
end
end 
```

这种关系正常工作，在我看来，我可以正确地从 Datum 类中提取属性。从观点来看：

```
<% book.data.each do |d| %><%= d.format %><% end %> 
```

这完美地工作。但是当我尝试引用返回路径的方法时，我得到一个未定义的方法错误。

```
<% book.data.each do |d| %><%= d.file_path %><% end %> 
```

我显然在这里遗漏了一些非常基本的东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:13:41.713

这行得通吗？

```
def file_path
    u = book.path + '/' + self[:name] + '.' + self[:format]
    return u
end 
```

请注意，我正在使用`book`而不是`@book`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:14:00.933

你们的`belongs_to`关系不对。此外，您无法`@book`在模型中访问。你的`Datum`模型应该看起来像

```
class Datum < ActiveRecord::Base
  belongs_to :book

  def file_path
    return book.path + '/' + self[:name] + '.' + self[:format]
  end
end 
```

由于`Datum`属于`book`. `book`in模型将引用该`Datum`数据所属的特定书籍。

# wpf - 如何在实体之外进行数据注释

> ID：11556491
> 
> 赞同：0
> 
> 时间：2012-07-19T08:07:21.037
> 
> 标签：wpf, entity-framework, wpf-controls, entity, data-annotations

我在我的项目中使用 Wpf 和 EntityFrameWork。我想使用 DataAnnotations，因为它是验证数据的更好方法。我设法在我的实体文件中做到了。例如，我的实体之一包括：

```
public partial class Employee : INotifyPropertyChanged, IDataErrorInfo
{
    public Employee()
    {
        this.Address = new HashSet<Address>();
        this.Certificate = new HashSet<Certificate>();
        this.ContactInformation = new HashSet<ContactInformation>();
        this.Course = new HashSet<Course>();
        this.Education = new HashSet<Education>();
        this.EmployeeTeam = new HashSet<EmployeeTeam>();
        this.Evaluation = new HashSet<Evaluation>();
        this.ExamInformation = new HashSet<ExamInformation>();
        this.JobTitle = new HashSet<JobTitle>();
        this.MilitaryService = new HashSet<MilitaryService>();
        this.Relationship = new HashSet<Relationship>();
        this.WorkExperience = new HashSet<WorkExperience>();
    }

    public int Id { get; set; }

    private string _CitizenId;

    [Required(ErrorMessage = "CitizenId is required!")]
    [RegularExpression(@"^\d+$", ErrorMessage = "Only numbers allowed")]
    public string CitizenId
    {
        get
        {
            return _CitizenId;
        }

        set
        {
            _CitizenId = value;
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("CitizenId"));
            }
        }
    }

    private int _RegNumber;
    [Required (ErrorMessage = "Registration Number is required!")]
    [RegularExpression(@"^\d+$", ErrorMessage = "Only numbers allowed")]

    public int RegNumber
    {
        get
        {
            return _RegNumber;
        }

        set
        {
            _RegNumber = value;
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("RegNumber"));
            }
        }
    }
    public Nullable<short> ResourceTypeId { get; set; }
    public Nullable<short> EmployeeRoleId { get; set; }

    private string _FirstName;

    [Required(ErrorMessage="Name is required!")]
    [RegularExpression(@"^[a-zA-Z''-'\s]{1,40}$", ErrorMessage="Numeric expressions are not allowed!")]

    public string FirstName
    {
        get
        {
            return _FirstName;
        }

        set
        {
            _FirstName = value;
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("FirstName"));
            }
        }
    }

    private string _MiddleName;
    [RegularExpression(@"^[a-zA-Z''-'\s]{1,40}$", ErrorMessage = "Numeric expressions are not allowed!")]

    public string MiddleName
    {
        get
        {
            return _MiddleName;
        }

        set
        {
            _MiddleName = value;
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("MiddleName"));
            }
        }
    }

    private string _Surname;
    [Required(ErrorMessage= "Surname is required!")]
    [RegularExpression(@"^[a-zA-Z''-'\s]{1,40}$", ErrorMessage = "Numeric expressions are not allowed!")]

    public string Surname {

        get
        {
            return _Surname;
        }

        set
        {
            _Surname = value;
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("Surname"));
            }
        }
    }

    private int _CustomerNo;
    [Required(ErrorMessage = "Customer Number is required!")]
    [RegularExpression(@"^\d+$", ErrorMessage = "Only numbers allowed")]
    public int CustomerNo
    {
        get
        {
            return _CustomerNo;
        }

        set
        {
            _CustomerNo = value;
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("CustomerNo"));
            }
        }
    }

    public System.DateTime BirthDate { get; set; }

    private string _BirthPlace;
    [Required(ErrorMessage="Birh Place is required!")]
    [RegularExpression(@"^[a-zA-Z''-'\s]{1,40}$", ErrorMessage = "Numeric expressions are not allowed!")]

    public string BirthPlace
    {
        get
        {
            return _BirthPlace;
        }

        set
        {
            _BirthPlace = value;
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("BirthPlace"));
            }
        }
    }
    public string Gender { get; set; }
    public string MaritalStatus { get; set; }
    public System.DateTime WorkBeginDate { get; set; }

    //indicates that whether the start  date is bigger than the end date which is a validation problem
  //  [CustomValidationsForDate("WorkBeginDate", ErrorMessage="Starting date cannot be bigger than the ending date")]
    public Nullable<System.DateTime> WorkEndDate { get; set; }

    private string _LogonName;
    [Required(ErrorMessage = "Logon Name is required!")]

    public string LogonName
    {
        get
        {
            return _LogonName;
        }

        set
        {
            _LogonName = value;
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("LogonName"));
            }
        }
    }

    private int _DistanceToWork;
    [RegularExpression(@"^\d+$", ErrorMessage = "Only numbers allowed")]
    [Required(ErrorMessage="This field is required!")]
    public int DistanceToWork
    {
        get
        {
            return _DistanceToWork;
        }

        set
        {
            _DistanceToWork = value;
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("DistanceToWork"));
            }
        }
    }
    public Nullable<bool> HasInternet { get; set; }
    public Nullable<bool> HasRemoteConnection { get; set; }
    public int MilitaryStatus { get; set; }
    public Nullable<int> DrivingLicense { get; set; }
    public bool IsSmoker { get; set; }

    public bool IsActive
    { get; set; }
    public Nullable<System.DateTime> CreateDate { get; set; }
    public string LeavingReason { get; set; }
    public Nullable<System.DateTime> StartDate { get; set; }

    public Nullable<System.DateTime> EndDate { get; set; }

    public virtual ICollection<Address> Address { get; set; }
    public virtual ICollection<Certificate> Certificate { get; set; }
    public virtual ICollection<ContactInformation> ContactInformation { get; set; }
    public virtual ICollection<Course> Course { get; set; }
    public virtual ICollection<Education> Education { get; set; }
    public virtual ICollection<EmployeeTeam> EmployeeTeam { get; set; }
    public virtual ICollection<Evaluation> Evaluation { get; set; }
    public virtual ICollection<ExamInformation> ExamInformation { get; set; }
    public virtual ICollection<JobTitle> JobTitle { get; set; }
    public virtual ICollection<MilitaryService> MilitaryService { get; set; }
    public virtual ICollection<Relationship> Relationship { get; set; }
    public virtual ICollection<WorkExperience> WorkExperience { get; set; }

    //Following methos have been used in order to apply DataAnnotations

    public event PropertyChangedEventHandler PropertyChanged;

    public string Error { get { return String.Empty; } }

    public string this[string property]
    {
        get { return ValidateProperty(this, property); }
    }

    public static string ValidateProperty(object instance, string propertyName)
    {
        PropertyInfo property = instance.GetType().GetProperty(propertyName);
        object value = property.GetValue(instance, null);
        List<string> errors = (from v in property.GetCustomAttributes(true).OfType<ValidationAttribute>()
                               where !v.IsValid(value)
                               select v.ErrorMessage).ToList();
        return (errors.Count > 0) ? String.Join("\r\n", errors) : null;
    }

}
} 
```

所以就像我说的那样，我在实体内部应用数据注释，但我想要在外部执行此操作，因为每当我的数据库发生更改时，所有实体都会被刷新，所以我在这里拥有的不是动态结构。那你能帮忙吗？

提前致谢。此致。

埃格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:42:54.590

您应该创建一个模型（视图模型）类并从您的实体（域模型）映射到视图模型。AutoMapper 可以帮助加快这一进程。然后将注释放在视图模型上并在视图中使用它们。

这意味着如果您的实体模型发生更改，您只需要更新映射。这也意味着您可以为同一实体创建多个不同的模型，因此您的验证不必对使用它的每个视图都相同。

# android - 列表视图中的 Android 进度对话框

> ID：11556492
> 
> 赞同：1
> 
> 时间：2012-07-19T08:07:33.267
> 
> 标签：android, android-linearlayout, progressdialog, progress

我的应用程序设计如下：

Main Activity 使用操作栏

第一个选项卡是一个片段，分为 3 个部分

| 包含列表视图的线性布局 | |包含列表视图的线性布局 | | 包含媒体控件和图像视图的线性布局|

我在这个活动中有两个 AsyncTask，一个填充中心列表视图，另一个从媒体控件开始填充图像视图（专辑封面）。

这两个都运作良好。List 视图 AsyncTask 会抛出一个进度对话框旋转轮。这将出现在屏幕的中央。我知道我可以把这个微调器放到应用程序的右上角。但是我可以将它放在列表视图线性布局的右上角，还是在线性布局的后面居中？这样一来，进度条应用于什么就不显眼但又很明显？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:41:47.730

> 我知道我可以把这个微调器放到应用程序的右上角。但是我可以将它放在列表视图线性布局的右上角，还是在线性布局的后面居中？

如果您可以计算视图的位置，您可能能够定位`ProgressDialog`您想要的位置（例如，请参阅我回答的这个问题[Change position of progressbar in code](https://stackoverflow.com/questions/11289329/change-position-of-progressbar-in-code)）。另外，请记住，这对于会看到对话框屏幕和放置在某个奇怪位置的对话框的用户来说可能是非常反直觉的（他可能不会`ProgressDialog`在数据已加载）。

另一种选择可能是修改零件的当前布局，`ListView`以在顶部添加初始消失`FrameLayout`（将覆盖整个`ListView`），其背景模拟带有 a 的屏幕的背景`Dialog`（这`FrameLayout`将包含`ProgressBar`您想要放置的位置）。这`FrameLayout`将在启动时变得可见`AsyncTask`（阻止下划线的触摸事件可能是明智的`ListView`）。这样，用户仍然可以在您的应用程序中执行操作，并且它清楚地指示`View`正在加载其数据。当然，如果用户可以独立于 loading 使用其他数据，这将很有效`ListView`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T20:03:49.680

Luksprog 的回答太好了，我想我应该在这里列出代码：绝对完美的 main_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView
    android:id="@+id/first_list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/anchor" >
</ListView>

<View
    android:id="@id/anchor"
    android:layout_width="match_parent"
    android:layout_height="5dp"
    android:layout_centerVertical="true"
    android:background="#99cc00" />

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/anchor" >

    <ListView
        android:id="@+id/second_list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <FrameLayout
        android:id="@+id/overlay"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#33c1c1c1"
        android:visibility="gone" >

        <ProgressBar
            style="?android:attr/progressBarStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right|top"
            android:indeterminate="true" />
    </FrameLayout>
</RelativeLayout> 
```

MainActivity.java

```
public class MainActivity extends Activity {

private String[] mItems = { "Item no.1", "Item no.2", "Item no.3",
        "Item no.4", "Item no.5", "Item no.6", "Item no.7", "Item no.8",
        "Item no.9", "Item no.10", "Item no.11", };

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_layout);
    // setup the two ListViews
    ListView firstList = (ListView) findViewById(R.id.first_list);
    firstList.setAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, mItems));
    firstList.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // just as an example, one you click an item in the first
            // ListView
            // a custom AsyncTask will kick in to load data in to the second
            // ListView
            new MyTask(MainActivity.this).execute((Void) null);
        }
    });
    ListView secondList = (ListView) findViewById(R.id.second_list);
    secondList.setAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, mItems));
    secondList.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // just to test that you can't click the ListView if the data is
            // loading
            Toast.makeText(getApplicationContext(), "click",
                    Toast.LENGTH_SHORT).show();
        }
    });
}

private class MyTask extends AsyncTask<Void, Void, Void> {

    private MainActivity mActivity;
    private FrameLayout mFrameOverlay;

    public MyTask(MainActivity activity) {
        mActivity = activity;
    }

    @Override
    protected void onPreExecute() {
        // the AsyncTask it's about to start so show the overlay
        mFrameOverlay = (FrameLayout) mActivity.findViewById(R.id.overlay);
        // set a touch listener and consume the event so the ListView
        // doesn't get clicked
        mFrameOverlay.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {

                return true;
            }
        });
        mFrameOverlay.setVisibility(View.VISIBLE);
    }

    @Override
    protected Void doInBackground(Void... params) {
        // do heavy work
        try {
            Thread.sleep(6000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        //remove the overlay
        mFrameOverlay.setVisibility(View.GONE);
        // setup the ListView with the new obtained data
        String[] obtainedData = { "D1", "D2", "D3" };
        ListView theList = (ListView) mActivity
                .findViewById(R.id.second_list);
        theList.setAdapter(new ArrayAdapter<String>(mActivity,
                android.R.layout.simple_list_item_1, obtainedData));
    }

}
} 
```

Luksprog，希望你不介意我发布你的代码，只是不想让它从 git 中消失，而这个答案会丢失给其他人。

# html - li 中的第二行在 CSS-reset 后的项目符号下开始

> ID：11556493
> 
> 赞同：80
> 
> 时间：2012-07-19T08:07:34.323
> 
> 标签：html, css

`ul`使用 CSS-reset 后，我​​的 -list 出现了一些问题。

当 中的文本`li`很长并且中断到第二行时，文本从项目符号下方开始。我希望它以与项目符号右侧的文本相同的边距/填充开始。

有点难以解释，但是如果您查看示例图像。左图是今天的清单。“motta varsel [...]”从项目符号下方开始，但我希望它看起来像右边的图片。

我怎样才能用 CSS 做到这一点？我认为我忽略了一些非常简单的事情，但我不知道是什么。谷歌搜索也没有返回任何有用的东西。

![在此处输入图像描述](../Images/6c64d4c5afebec9eabd7d74111b8baed.png)

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2012-07-19T08:13:33.857

该`li`标签有一个名为 的属性`list-style-position`。这会使您的项目符号在列表内部或外部。默认情况下，它设置为`inside`. 这使您的文本环绕它。如果将其设置为`outside`，则标签的文本`li`将对齐。

这样做的缺点是您的项目符号不会与`ul`. 如果要将其与其他文本对齐，可以使用边距。

```
ul li {
    /*
     * We want the bullets outside of the list,
     * so the text is aligned. Now the actual bullet
     * is outside of the list’s container
     */
    list-style-position: outside;

    /*
     * Because the bullet is outside of the list’s
     * container, indent the list entirely
     */
    margin-left: 1em;
} 
```

* * *

**编辑 2014 年 3 月 15 日** 看到人们仍然从谷歌进来，我觉得原来的答案可以使用一些改进

*   更改了代码块以**仅**提供解决方案
*   将缩进单位更改为`em`'s
*   每个属性都应用于`ul`元素
*   好评论：）

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-07-19T08:10:09.120

这是一个很好的[例子](http://dipaksblogonline.blogspot.in/2012/01/indenting-second-line-of-li-list-items.html)——

```
ul li{
    list-style-type: disc;
    list-style-position: inside;
    padding: 10px 0 10px 20px;
    text-indent: -1em;
} 
```

工作演示：http: [//jsfiddle.net/d9VNk/](http://jsfiddle.net/d9VNk/)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-09-21T16:43:10.800

我支持 Dipaks 的回答，但通常只有文本缩进就足够了，因为您可能/可能不会定位 ul 以获得更好的布局控制。

```
ul li{
text-indent: -1em;
} 
```

# installation - Chrome 安装程序如何工作？

> ID：11556498
> 
> 赞同：1
> 
> 时间：2012-07-19T08:08:07.900
> 
> 标签：installation

当您单击安装按钮时，它会立即开始安装，并且根本不需要管理权限。它是如何工作的？如何为我自己的应用程序复制它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:13:32.623

通过让您的应用程序（如 Chrome）将自己安装在用户自己的文件中的某个秘密位置，这样它就只能供该用户使用，而不能供同一台机器上的其他人使用。（并且通过拥有它，就像 Chrome 一样，它在运行时不会做需要管理员权限的事情。）

您和您的用户可能实际上并不想要这个。这取决于诸如

*   仅为一个用户安装程序是否重要
*   让用户在没有管理员权限的情况下修改可执行文件是否存在任何安全问题
*   是否有任何理由关心可执行文件的实际最终位置。

# python - 如何在离线 Linux 机器上为 nltk 安装english.pickle

> ID：11556499
> 
> 赞同：9
> 
> 时间：2012-07-19T08:08:08.493
> 
> 标签：python, linux, offline, nltk, pickle

我正在尝试在无法连接到 Internet 的 SUSE Linux 机器上运行 nltk。

我已经成功安装 nltk 并且它运行但是当我提交时

```
>>> tagged = nltk.pos_tag(tokens) 
```

我收到此错误：

> 查找错误：
> ************************************************ ************************
> 找不到资源“tokenizers/punkt/english.pickle”。请使用 NLTK 下载器获取资源：

我无法使用下载器，因为我无法将盒子连接到互联网。

有谁可以安装必要的软件包？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T19:14:41.157

数据被下载到`nltk_data`目录中。一个系统与另一个系统的不同之处在于，您可以通过执行以下操作来了解：

```
import nltk
print nltk.data.find('.') 
```

`english.pickle`应该在 的子文件夹中`<nltk_data>/taggers/`。最简单的方法是在可以访问 Internet 的机器上使用下载器，然后将其复制并放在同一个子文件夹中。只有一个版本`english.pickle`，你可以在 Windows 机器上下载它，没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T09:07:30.727

下载器将文件存储在特定文件夹中。我想可以在在线机器上下载并将文件复制到离线机器上的等效位置。在我的机器上，它下载到`/usr/local/lib/nltk_data`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-29T14:10:20.017

出于参考目的（截至 2017 年），可在 GitHub 的此链接中找到 punkt 标记器：

[https://github.com/nltk/nltk_data/blob/gh-pages/packages/tokenizers/punkt.zip](https://github.com/nltk/nltk_data/blob/gh-pages/packages/tokenizers/punkt.zip)

您应该能够从非气隙机器下载，并将其移动到闪存驱动器上。

# android - 同时选择 ImageButton 和 TextView

> ID：11556501
> 
> 赞同：2
> 
> 时间：2012-07-19T08:08:10.780
> 
> 标签：android, android-layout

我想知道是否有办法同时选择（单击时突出显示）ImageButton 和 TextView。我有一个 ImageButton 和 TextView。我已将它们放在 RelativeLayout 并将背景设置为可绘制选择器 xml。但它们并没有一起突出显示。如果我按下 ImageButton 按钮，它会单独突出显示，如果我按下布局，它会突出显示而不突出显示 ImageButton。你能在这方面帮助我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:46:10.550

我有你的解决方案

*   将和“TextView”包装`ImageButton`在“LinearLayout”中
*   禁用Imagebutton 和 textview的`clickable`,事件`focusable`
*   为您的应用自定义选择器`LinearLayout`

这是更新的`custom_component.xml`布局文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/toast_layout_root"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#f0f0f0"
    android:gravity="center"
    android:orientation="horizontal"
    android:padding="10dp" >

    <LinearLayout
        android:id="@+id/myCustomComponent"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:background="@drawable/layout_bgimage_selector"
        android:clickable="true"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:gravity="center"
        android:orientation="vertical" >

        <ImageButton
            android:id="@+id/testImage"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:clickable="false"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:src="@drawable/icon" />

        <TextView
            android:id="@+id/testText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:clickable="false"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:text="Test Text"
            android:textColor="#FFF" />
    </LinearLayout>

</RelativeLayout> 
```

此布局文件使用自定义选择器 xml 文件`layout_bgimage_selector.xml`，该文件需要放在`res/drawable`文件夹中

```
<?xml version="1.0" encoding="UTF-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/background" android:state_enabled="false"/>
    <item android:drawable="@drawable/background" android:state_focused="true" android:state_pressed="true"/>
    <item android:drawable="@drawable/background_over" android:state_enabled="true" android:state_pressed="true"/>
    <item android:drawable="@drawable/background_over" android:state_enabled="true" android:state_focused="true"/>
    <item android:drawable="@drawable/background" android:state_enabled="true"/>

</selector> 
```

我用于布局选择器的 9 个补丁图像是：

背景.9.png -![背景.9.png](../Images/abe00a4a798e99fe30e21eecdd9080ac.png)

background_over.9.png -![background_over.9.png](../Images/b9d452d540bc9c338a464c83f323ffb3.png)

将它们放在`res/drawable-hdpi`文件夹中。（或任何与您的设备配置匹配的图像资源文件夹）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:12:53.420

为 TextView 和 ImageView 的父布局使用自定义背景

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" 
>
    <item
        android:state_focused="true" 
        android:state_pressed="false" 
android:drawable="@drawable/listview_background_focused"        />
    <item
        android:state_focused="true" 
        android:state_pressed="true"
android:drawable="@drawable/listview_background_focused"        />
    <item
        android:state_focused="false" 
        android:state_pressed="true"
android:drawable="@drawable/listview_background_focused"        />
    <item
android:drawable="@drawable/listview_background_unfocused"      />
</selector> 
```

并在父布局的 onclickListener 而不是子视图中编写相应的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:50:55.177

我建议声明一个包含这样的文本和图像的按钮。

```
 <Button
        android:id="@+id/dash_bt_list"
        android:drawableTop="@drawable/your_image"
        android:background="@drawable/selector"
        android:onClick="onClickFeature"
        android:text="@string/your_text"
        android:layout_width="wrap_content" /> 
```

在你的选择器中：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
       <item android:state_focused="true" android:state_pressed="true">
           <shape>
               <solid android:color="#FFFFFF" />
               <stroke android:width="3dp" android:color="#000000" />
               <padding android:bottom="1dp" android:left="1dp" android:right="1dp"
                   android:top="1dp" />
            </shape>
            ...
    </selector> 
```

这对我有帮助

# translation - 如何翻译 OpenERP 模块？

> ID：11556502
> 
> 赞同：14
> 
> 时间：2012-07-19T08:08:10.833
> 
> 标签：translation, openerp

我刚刚构建了一个自定义 OpenERP 模块，比如说`/addons/the_meaning_of_life`. 现在我想把它翻译成另一种语言。我现在应该有一个包含 a`.pot`和`.po`文件的 i18n 文件夹。我如何生成这些？有一个分步指南会很好。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-19T08:59:41.790

好的，你可以做的是：

1.  在您的数据库中安装您的愿望语言。
2.  完成模块开发后，在测试服务器上安装模块，然后转到以下向导`Setting(or Configuration) > Translation> Import/Export/Export Translation`。然后选择模块`the_meaning_of_life`和期望的语言。并以 .po 格式导出。
3.  保存该 po 文件，然后在 po 文件中添加您想要的翻译。然后，您可以将该 po 文件导入数据库中，或者将其添加到您的模块下的文件夹下`/addons/the_meaning_of_life/i18n`，并且它可以与您的模块一起使用。
4.  （仅适用于新模块），您还需要在同一 i18n 文件夹中拥有“pot”文件，如果您还没有它，您可以通过重复步骤 2 来生成一个，但无需选择任何语言。这是您如何为模块中的某些语言提供翻译的方法，但如果您想使用 Launchpad 翻译服务，请检查以下[url](https://help.launchpad.net/Translations/)，这将指导您使用 .pot，但为此您需要清楚地在 lp 上进行项目。

希望这会回答你，问候

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-19T13:13:44.227

这是我用于此目的的 bash 脚本：

```
$ cat oerp-i18n-module
#!/bin/bash
#
# usage:
# ./oerp-i18n-module <databasename> <module name>
#
# the script will create or update PO files for en, fr, de and es. You
# will need to update the translations (and don't forget bzr add +
# commit)

dirname=$(find src -name $1 | egrep -v '(src/stable)|(src/server)')
install -d ${dirname}/i18n
for lang in en fr de es
do
    python src/server/openerp-server -c config/instance_debug.ini \
              --log-level=error --i18n-export=${lang}.po -l ${lang} \
              -d $1 --modules=$2 > /dev/null 2>&1 
    if [ -f ${dirname}/i18n/${lang}.po ]
    then
        echo merge new translations in ${dirname}/i18n/${lang}.po
        msgmerge -vU --backup=simple ${dirname}/i18n/${lang}.po ${lang}.po
        rm ${lang}.po
    else
        echo put file in ${dirname}/i18n/${lang}.po
        mv ${lang}.po ${dirname}/i18n/
    fi
done 
```

希望这会有所帮助（您可能需要编辑一些特定于我的 bzr 分支布局的路径）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-06-11T13:09:27.757

在您的数据库中安装您的愿望语言。

完成模块开发后，在测试服务器上安装模块，然后转到以下向导设置（或配置）> 翻译> 导入/导出/导出翻译。然后选择模块 the_meaning_of_life 和desire lang。并以 .po 格式导出。

保存该 po 文件，然后在 po 文件中添加您想要的翻译。然后，您可以将该 po 文件导入数据库中，或者将其添加到您的模块下的文件夹 /addons/the_meaning_of_life/i18n 下，并且它可以与您的模块一起使用。

（仅适用于新模块），您还需要在同一 i18n 文件夹中拥有“pot”文件，如果您还没有它，您可以通过重复步骤 2 来生成一个，但无需选择任何语言。这是您如何为模块中的某些语言提供翻译的方法，但如果您想使用 Launchpad 翻译服务，请检查以下 url，这将指导您使用 .pot，但为此您需要清楚地在 lp 上进行项目。

# internet-explorer - TinyMce ed.selection.select 在 Internet Explorer 中引发错误

> ID：11556504
> 
> 赞同：1
> 
> 时间：2012-07-19T08:08:18.653
> 
> 标签：internet-explorer, tinymce

我想在特定位置自动将内容添加到 TinyMce 编辑器。为此，我使用以下示例：

首先，您应该在要创建的内容的末尾添加一个跨度。然后插入后，执行此操作...

ed.selection.select(ed.dom.select('span#caret_pos_holder')[0]); //选择跨度 ed.dom.remove(ed.dom.select('span#caret_pos_holder')[0]); //删除跨度

在这里找到： [设置光标/插入符号位置的最佳方法是什么？](https://stackoverflow.com/questions/1253303/whats-the-best-way-to-set-cursor-caret-position)

这在 de Chrome 中运行良好，但在 IE 中引发错误

“DOM 异常：INDEX_SIZE_ERR (1)”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:17:29.953

这是我使用的功能（位于我自己的自定义插件之一中）

```
 // sets the caret position
    // ed is the editor instance
    // element is the html element located in the editor
    // start defines if the caret should get set to the start of the element (otherwise the end)
    setCursor: function (ed, element, start) {

        var doc = ed.getDoc();
        var edwin = ed.getWin();
        if (typeof doc.createRange != "undefined") {
            var range = ed.selection.dom.createRng();
            range.selectNodeContents(element);
            range.collapse(start);
            var win = doc.defaultView || doc.parentWindow;
            var sel = tinymce.isIE ? doc.selection : edwin.getSelection();
            sel.removeAllRanges();
            sel.addRange(range);
        } else if (typeof doc.body.createTextRange != "undefined") {
            var textRange = doc.body.createTextRange();
            textRange.moveToElementText(element);
            textRange.collapse(start);
            textRange.select();
        }
    }, 
```

示例调用：

```
setCursor(ed, $(ed.getBody()).find('span#caret_pos_holder').get(0), 0); 
```

# ajax - 如何结合整数和 varchar 字段在 Coldfusion 中构造 AJAX 响应结构？

> ID：11556505
> 
> 赞同：0
> 
> 时间：2012-07-19T08:08:18.513
> 
> 标签：ajax, loops, coldfusion, struct

我有一个在列中返回整数的查询，例如：

```
 1234.00 
```

在 Coldfusion8 中，我将其输出到表中，并添加另一列，其中包含如下货币：

```
 <td>#query.total# #query.currency#</td> 
```

但是，我现在想将查询输出到一个数据表结构中，我必须使用它来组合这两个字段

```
 <cfscript>
  variables.orderTotal = query.sum & "" & query.currency;
  QuerySetCell(rResult, "orderTotal", variables.orderTotal, variables.counter );
  </cfscript> 
```

这不起作用并破坏了整个脚本。我想我不能像这样“连接”一个整数和一个 varchar。

**问题：**
如果我想将两个字段输出到同一列中，我该怎么做呢？我将在下一步中循环查询以创建 AJAX 响应结构，如下所示：

```
<cfloop query="query">
    <cfset variables.count = variables.count + 1>[
      <cfloop list="#variables.fieldlist#" index="variables.i">
           "#query[variables.i][query.currentRow]#"
           <cfif variables.i is not listLast(variables.fieldlist)>, </cfif>
      </cfloop>]
      ... 
```

那我必须在那里做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:17:07.437

为什么不在查询中返回另一列，例如：

```
SELECT  sum || "" || currency AS "total" 
FROM    xxx 
```

然后，您可以在 cfm 代码中使用这个新列总计，如下所示：

```
#query.total# 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:56:31.553

好的。它在循环构造 AJAX 响应中是这样的吗：

```
 <cfif #variables.i# EQ "sum">
     "#query[variables.i][query.currentRow]# #rResult.currency#"
 <cfelse>
     "#query[variables.i][query.currentRow]#"
 </cfif> 
```

# web-services - 来自 IE 的 Web 服务调用正在运行，但在 chrome 和 mozilla 中不起作用

> ID：11556508
> 
> 赞同：2
> 
> 时间：2012-07-19T08:08:41.610
> 
> 标签：web-services, browser

我正在使用以下代码调用网络服务：

```
function CallService() {

    $.ajax({
        type: "GET",
        url: "http://devpc4:5566/Service1.asmx/GetItems",
dataType: "json",
data: "{}",
        contentType: "application/json; charset=utf-8",
        success: OnSuccess,
        error: OnError
    });
} 
```

OnSuccess 函数：

```
function OnSuccess(data, status) {
alert("success");

    alert(data.d);
        alert("success1");
    var ponse = '{"TableNo":"2"}';

    alert(ponse.TableNo);

} 
```

错误：

```
function OnError(request, status, error) {

    alert(status);
} 
```

它在 IE 中给了我输出，但我没有在 chrome 和 mozolla 中得到输出。
谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-08T09:32:36.813

通过添加这三个标题，您可以获得输出

*   访问控制允许来源

*   访问控制允许方法

*   访问控制允许标头

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:43:57.113

使用此[链接](https://stackoverflow.com/questions/10143093/origin-is-not-allowed-by-access-control-allow-origin)获得了解决方案。
但我必须添加更多标题，例如：

```
Access-Control-Allow-Origin
Access-Control-Max-Age
Access-Control-Allow-Methods
Access-Control-Allow-Headers 
```

现在它在 Mozilla 和 chrome 中工作。谢谢各位。

# javascript - 在jquery中双击onCellSelect

> ID：11556514
> 
> 赞同：0
> 
> 时间：2012-07-19T08:09:09.430
> 
> 标签：javascript, jquery, ajax, json

当我在特定列上双击它时，我想触发一个函数。是否有可能在这种情况下实施？我使用了这段代码，但没有任何反应。

```
jQuery("#grid").jqGrid({

...

onCellSelect : function(rowid, cellname, value, iRow, iCol) {
        $('#tblPdcNtcShipmentConfirmationCabinetDetails').dblclick(function() {
            if(cellname == "SafetyMargin"){
                showSafetyStockInfo(event,$('#tblPdcNtcShipmentConfirmationCabinetDetails').jqGrid('getRowData',$('#tblPdcNtcShipmentConfirmationCabinetDetails').jqGrid('getGridParam','selrow')));
            }
        });
    }

...

}); 
```

# sharepoint-2010 - SPGridView 中的可视化 SPmenuField

> ID：11556517
> 
> 赞同：0
> 
> 时间：2012-07-19T08:09:35.907
> 
> 标签：sharepoint-2010, spgridview, spfield

我已经创建`SPGridView`并添加了一个`SPMenuField`作为第一列和一些`BoundFields`. 然后我添加`MenuTemplate`到第一列。但也有带有白色边框的矩形。我想隐藏它们。我该怎么做 ？

![问题网格视图](../Images/d053de99891555b50da1c814876991b7.png)

这是我使用的代码：

```
 SPMenuField colMenu = new SPMenuField();
   colMenu.HeaderText = "Title";
   colMenu.TextFields = "Title";
   colMenu.MenuTemplateId = "TitleListMenu";
   colMenu.NavigateUrlFields = "WebId, ListId, ID";
   colMenu.NavigateUrlFormat = "default.aspx?WebID={0}&ListID={1}&ListItemID={2}";
   colMenu.TokenNameAndValueFields = "Param1=ID";
   colMenu.SortExpression = "Title";

   MenuTemplate typeListMenu = new MenuTemplate();
   typeListMenu.ID = "TitleListMenu";

   // ... //

   Controls.Add(typeListMenu);
   customGridView.Columns.Add(colMenu); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:19:32.897

[这](https://sharepoint.stackexchange.com/questions/41336/problem-with-visualization-spmenufield-in-spgridview)是我的问题的答案。缩小`.ms-menuimagecell`css类是必要的。

# asp.net - 从网格编辑 ASP.NET 中的用户

> ID：11556520
> 
> 赞同：0
> 
> 时间：2012-07-19T08:09:46.853
> 
> 标签：asp.net

我想编辑来自网格视图的用户。一旦我选择了用户（单击网格中的一行），我想将选定的用户详细信息填充到网格上方的编辑窗格（带有用户字段的表单）中。这在 asp.net 中是否可行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:13:04.267

是的！

检查这个：

[GridView-DetailsView (Master/Detail) 代码项目](http://www.codeproject.com/Articles/16779/GridView-DetailsView-Master-Detail-Control)

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:27:21.600

当然这是可能的，您应该使用 `gridview_SelectedIndexChanged`事件来获取最后选择的行，因此您可以使用 datagridview 的 SelectedRow 属性访问最后选择的行，这样您就可以使用 `datagridview.SelectedRow.Cells[index].Text`

为了使每一行可点击进入您的 aspx 页面的设计视图，然后单击 datagridview 右上角的箭头并单击**Edit Columns**，从可用字段中单击 + 登录 CommandField 并选择 Select，然后单击 add 并获得选择链接每个 datagridview 行。

希望这有帮助。

# html - 在 Windows 上调试 Ipad Web 应用程序

> ID：11556522
> 
> 赞同：4
> 
> 时间：2012-07-19T08:09:52.610
> 
> 标签：html, css, windows, ipad

我的网站可以在桌面版本上正确显示，但在 iPad 上几乎没有错误。如果我的操作系统是 Windows，检测问题的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-04T07:08:14.393

**选项 1 - 免费的本地机器调试**

您可以使用适用于 Windows 的 Safari 浏览器（[下载 Safari 5.1.7](http://support.apple.com/kb/dl1531)）。

*脚步*

1.  在菜单栏中启用开发菜单（按“Alt”键打开菜单栏。然后按照编辑菜单>首选项>高级选项卡。在底部找到此选项。）
2.  然后，按照开发菜单 > 用户代理进行操作。选择 iPad、iPhone 等。

开发菜单中有更多选项（例如 Show Web Inspector）来帮助您进行 JavaScript 等调试。

归功于[如何使用 Safari 调试 iPhone 和 iPad Web 应用程序。](http://www.spiraltrack.com/blog/how-debug-iphone-and-ipad-web-applications-using-safari)

**选项 2 - 对目标浏览器/操作系统/机器的付费、基于浏览器的访问**

我个人使用过[http://www.browserstack.com/](http://www.browserstack.com/)，它可以让您测试广泛组合的功能。但是，这里的调试可能不像在本地机器上那样方便。

可能有更多的公司提供类似的服务。

**当心基本的在线模拟器**

如[评论中所述](https://stackoverflow.com/questions/11556522/debug-ipad-web-app-on-windows#comment15284956_11556751)，请注意“模拟器”网站。示例：我遇到的一个网站声称要模拟 iPhone，有一张 iPhone 的图片，里面是一个，由我在(Firefox)*中打开该网站*`iframe`的浏览器尽职尽责地呈现。

 ** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T08:22:39.047

我能想到的最好方法（取决于您的实现）是使用 firefox 插件 [https://addons.mozilla.org/en-US/firefox/addon/user-agent-switcher/](https://addons.mozilla.org/en-US/firefox/addon/user-agent-switcher/)

它允许您切换到各种设备并查看它们在另一台设备上的显示方式。

此处[http://www.ampercent.com/test-website-design-iphone-ipad-mobile-devices/7075/](http://www.ampercent.com/test-website-design-iphone-ipad-mobile-devices/7075/)是让您入门的快速指南。

除了 FF 之外，还有其他浏览器的用户代理切换器，例如 Chrome。做一个谷歌搜索，自己试试你喜欢哪一个。*

# android - 将 3000X2000 像素图像设置为画布背景，无需调整大小并避免内存不足

> ID：11556528
> 
> 赞同：0
> 
> 时间：2012-07-19T08:09:59.327
> 
> 标签：android, bitmap, out-of-memory, image-scaling

我想知道是否可以有效且可以将 3000X2000px 图像设置为画布背景而不调整其大小并且不会出现内存错误。

因为我想要真实大小的图像并围绕它平移。

使用 webview 不是一种选择。

目前，我尝试使用名为“Drawable-nodpi”的文件夹结构设置背景，然后使用解码器资源方法分配位图图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:17:57.287

如此庞大的画面将不可避免地导致至少在某些设备上出现 outofmem 异常。所以我认为你需要动态缩放和加载需要显示的部分图像，可能使用缓存机制。

不幸的是，我不知道任何 Android 库组件可以为您提供开箱即用的功能，但我很确定您可以找到一些关于此主题的好文章。

# excel - 将 Excel 工作表拆分为多个工作簿

> ID：11556533
> 
> 赞同：1
> 
> 时间：2012-07-19T08:10:08.477
> 
> 标签：excel, vba

我有一个包含多个工作表的 Excel 文件。我想将其拆分为单独的文件，每个文件 3 张。

我创建了一个新的工作簿，如下所示：

```
Set NewBook = Workbooks.Add
With NewBook
     .Title = "File1"
     .Subject = "File1"
     .SaveAs FileName:="File1.xls"
End With 
```

如何将工作表从一张复制到另一张？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:46:40.293

这段代码将

*   一次将您的工作簿拆分为每批 3 张的新工作簿，
*   将它们保存为具有以下命名的新文件
*   关闭它们

> File1 （前 3 张）
> File4（第 4-6 页）
> File7（第 7-9 页）

该代码将用额外的表格“填充” Excel 文件，以保持 3 张拆分多张。

请注意，您可以使用创建新工作簿`.Copy`- 无需使用`Workbooks.Add`

**`Code to be run from the Workbook to be split`**

```
Sub BatchThree()
    Dim lngSht As Long
    Dim lngShtAdd As Long
    Dim lngShts As Long
    Dim bSht As Boolean
    With Application
        .ScreenUpdating = False
        .EnableEvents = False
        .DisplayAlerts = False
    End With
    lngSht = 1

    'pad extra sheets
    If ThisWorkbook.Sheets.Count Mod 3 <> 0 Then
        bSht = True
        lngShts = ThisWorkbook.Sheets.Count Mod 3
        For lngShtAdd = 3 To (lngShts + 1) Step -1
            ThisWorkbook.Sheets.Add after:=ThisWorkbook.Sheets(Sheets.Count)
        Next
    End If

    Do While lngSht + 2 <= ThisWorkbook.Sheets.Count
        Sheets(Array(lngSht, lngSht + 1, lngSht + 2)).Copy
        ActiveWorkbook.SaveAs ThisWorkbook.Path & "/File" & lngSht
        ActiveWorkbook.Close False
        lngSht = lngSht + 3
    Loop

    'remove extra sheets
    If bSht Then
     For lngShtAdd = 3 To (lngShts + 1) Step -1
            ThisWorkbook.Sheets(Sheets.Count).Delete
        Next
    End If

    With Application
        .ScreenUpdating = True
        .EnableEvents = True
        .DisplayAlerts = True
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:29:48.580

制作副本的基本语法（如果这是您的问题）：

```
Sub Make_Copy()
Thisworkbook.Sheets(1).Copy _
   after:=SomeWorkbook.Sheets(1)
End Sub 
```

在复制旁边，自然也可以移动工作表。您可以在之前而不是之后复制并更改工作表的名称。

# c# - 通过忽略大小写查找数组索引

> ID：11556536
> 
> 赞同：4
> 
> 时间：2012-07-19T08:10:14.457
> 
> 标签：c#, arrays, string

> **可能重复：**
> [如何向 Array.IndexOf 添加不区分大小写的选项](https://stackoverflow.com/questions/8935161/how-to-add-a-case-insensitive-option-to-array-indexof)

```
int index1 = Array.IndexOf(myKeys, "foot"); 
```

示例我`FOOT`的数组列表中有，但它会返回`index1 = -1`.

如何`foot`通过忽略大小写找到索引？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-19T08:14:24.100

通过使用`FindIndex`和一点 lambda。

```
var ar = new[] { "hi", "Hello" };
var ix = Array.FindIndex(ar, p => p.Equals("hello", StringComparison.CurrentCultureIgnoreCase)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:41:26.160

使用一个`IComparer<string>`类：

```
public class CaseInsensitiveComp: IComparer<string>
{    
    private CaseInsensitiveComparer _comp = new CaseInsensitiveComparer();
    public int Compare(string x, string y)
    {
        return _comp.Compare(x, y);
    }
} 
```

**然后对排序**后的数组执行 BinarySearch ：

```
var myKeys = new List<string>(){"boot", "FOOT", "rOOt"};
IComparer<string> comp = new CaseInsensitiveComp();

myKeys.Sort(comp);

int theIndex = myKeys.BinarySearch("foot", comp); 
```

通常在更大的阵列上最有效，最好是静态的。

# mysql - 加快 sql 查询并修复连接

> ID：11556537
> 
> 赞同：0
> 
> 时间：2012-07-19T08:10:15.237
> 
> 标签：mysql, sql

我有以下查询，它列出了所有具有匹配 facebook 帐户的帐户 - 问题是有时 facebook 表中有不止一行与联接匹配，然后我们有重复的行被重复返回，即使 ac.id AS id 应该是唯一的主键。

```
SELECT ac.id AS id
    , ac.first_name
    , ac.last_name
    , ac.email
    , ac.company_name
    , upd8r_facebook_accts.id AS fb
FROM upd8r_user_accts ac
LEFT OUTER JOIN upd8r_facebook_accts 
    ON ac.id = upd8r_facebook_accts.user_id
WHERE ac.`rfid` =  ''
AND ac.last_name !=  ''
AND ac.`owner_id` =  '121'
ORDER BY ac.`last_name` ASC 
```

两个问题是返回的重复行（我认为当 facebook 表中有不止一行与 upd8r_user_accts.id 匹配时。查询​​需要 10 秒才能运行......我在 upd8r_user_accts.id 上有一个索引认为这可能帮助，但它没有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:40:52.023

由于 upd8r_user_accts.id 是主键 - 在此列上添加索引无济于事，而且是多余的。您的查询结果表明某些用户有多个 Facebook 帐户。如果 id 列，您不说明数据类型，但您可以尝试这样的事情..

```
SELECT ac.id AS id, ac.first_name, ac.last_name, ac.email, ac.company_name, upd8r_facebook_accts.id AS fb
FROM upd8r_user_accts ac
LEFT OUTER JOIN upd8r_facebook_accts ON ac.id = upd8r_facebook_accts.user_id
WHERE ac.`rfid` =  ''
AND ac.last_name !=  ''
AND ac.`owner_id` =  '121'
AND upd8r_facebook_accts.id = (SELECT MAX(ufa.id) FROM upd8r_facebook_accts ufa WHERE ufa.user_id = ac.id)
ORDER BY ac.`last_name` ASC 
```

这将产生每个用户仅显示一行的效果，但请记住它删除的行可能不是您希望从结果中删除的行。它还假设您可以在 Id 列上执行 MAX 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:30:12.783

小费：

*   在附带的列上创建索引`ON`或`WHERE`

*   改变`SELECT`_`SELECT STRAIGHT JOIN`

# php - PHP检查1天是否过去

> ID：11556543
> 
> 赞同：-3
> 
> 时间：2012-07-19T08:10:24.700
> 
> 标签：php, datetime

> **可能重复：**
> [PHP：查找两个日期之间的天差（“YmdHis”）reture](https://stackoverflow.com/questions/4421076/phpfind-day-difference-between-two-dateymdhis-reture)

我想要做的是从数据库中获取日期，当前日期。并检查它们之间的差异是否 > 1 天：

```
$curdate= date("Y-m-d H:i:s"); 
```

`$dbdate`是以日期时间格式存储在 db 中的值。

```
$dif=$curdate-dbdate; 
```

如何检查是否`$dif>1 day`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:14:12.297

假设存储的日期与服务器在同一时区中表示，您可以使用 将其转换为时间戳[`strtotime`](http://php.net/manual/en/function.strtotime.php)，并将其与 进行比较`strtotime("-1 day")`：

```
if (strtotime($dbdate) < strtotime("-1 day"))
  frobnicate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:15:47.180

您只能从每个日期中获取日期。

```
$day = intval($curdate= date("d")); 
```

这将获得日期作为输入。对数据库的时间执行相同操作，您将获得两个表示日期的整数。使用它，您可以计算已经过去了多少天。

请注意，最后一行应如下所示：

```
$dif = abs($curdate-$dbdate); 
```

# c++ - FSEvents C++ 示例

> ID：11556545
> 
> 赞同：8
> 
> 时间：2012-07-19T08:10:37.967
> 
> 标签：c++, c, macos, fsevents

我需要为 Mac 中的文件夹创建 FSEvents 观察程序。我对 C++ 很满意，有没有办法在 C++ 代码中而不是 Objective-C 中获取 FSEvents 通知。是否有一些示例代码可以开始以及我需要包含的任何库..？

我已经在这个页面上了。 [http://developer.apple.com/library/mac/#featuredarticles/FileSystemEvents/_index.html](http://developer.apple.com/library/mac/#featuredarticles/FileSystemEvents/_index.html)

但是似乎只有Objective C，我可以有它的CPP版本吗

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-19T08:56:28.097

是的，在 C 中是可能的。您应该寻找内核队列。

这是一个观看目录的小示例：

```
#include <errno.h>       // for errno
#include <fcntl.h>       // for O_RDONLY
#include <stdio.h>       // for fprintf()
#include <stdlib.h>      // for EXIT_SUCCESS
#include <string.h>      // for strerror()
#include <sys/event.h>   // for kqueue() etc.
#include <unistd.h>      // for close()

int main (int argc, const char *argv[])
{
   int kq = kqueue ();
   // dir name is in argv[1], NO checks for errors here
   int dirfd = open (argv[1], O_RDONLY);

   struct kevent direvent;
    EV_SET (&direvent, dirfd, EVFILT_VNODE, EV_ADD | EV_CLEAR | EV_ENABLE,
            NOTE_WRITE, 0, (void *)dirname);

   kevent(kq, &direvent, 1, NULL, 0, NULL);

   // Register interest in SIGINT with the queue.  The user data
   // is NULL, which is how we'll differentiate between
   // a directory-modification event and a SIGINT-received event.
   struct kevent sigevent;
   EV_SET (&sigevent, SIGINT, EVFILT_SIGNAL, EV_ADD | EV_ENABLE, 0, 0, NULL);
   // kqueue event handling happens after the legacy API, so make
   // sure it doesn eat the signal before the kqueue can see it.
   signal (SIGINT, SIG_IGN);

   // Register the signal event.
   kevent(kq, &sigevent, 1, NULL, 0, NULL);

   while (1) {
       // camp on kevent() until something interesting happens
       struct kevent change;
       if (kevent(kq, NULL, 0, &change, 1, NULL) == -1) { exit(1); }
       // The signal event has NULL in the user data.  Check for that first.
       if (change.udata == NULL) {
           break;
       } else {
        // udata is non-null, so it's the name of the directory
        printf ("%s\n", (char*)change.udata);
       }
   }
   close (kq);
   return 0;
} 
```

详细信息可以在 ch 中找到。Mark Dalrymple 的“高级 Mac OSX 编程”的 16（kqueues 和 FSEvents）。附加信息可以在 kqueues 的 *BSD 文档中找到。

或者使用 FSEvents 的这个 API（它主要是基于 C 的）。

```
FSEventStreamRef FSEventStreamCreate (CFAllocatorRef allocator,
                                  FSEventStreamCallback callback,
                                  FSEventStreamContext *context,
                                  CFArrayRef pathsToWatch,
                                  FSEventStreamEventId sinceWhen,
                                  CFTimeInterval latency,
                                  FSEventStreamCreateFlags flags); 
```

使用纯 C 回调创建 FSEvents 事件流。

然后使用

```
void FSEventStreamScheduleWithRunLoop (FSEventStreamRef streamRef,
                                   CFRunLoopRef runLoop,
                                   CFStringRef runLoopMode); 
```

是的，在这里您可能应该使用一行 Obj-C 来获取 RunLoop 句柄：使用 -getCFRunLoop 从 NSRunLoop 获取 CFRunLoop

```
CFRunLoop* loopRef = [[NSRunLoop currentRunLoop] getCFRunLoop]; 
```

或使用纯 C 调用

```
CFRunLoop* loopRef =  CFRunLoopGetCurrent(); 
```

启动事件流

```
Boolean FSEventStreamStart (FSEventStreamRef streamRef); 
```

停止事件流

```
void FSEventStreamStop (FSEventStreamRef streamRef); 
```

然后使用以下命令从运行循环中取消调度它：

```
void FSEventStreamUnscheduleFromRunLoop (FSEventStreamRef streamRef,
                                     CFRunLoopRef runLoop,
                                     CFStringRef runLoopMode); 
```

使流无效（清理）：

```
void FSEventStreamInvalidate (FSEventStreamRef streamRef); 
```

希望这会让你开始。

# sqlite - SQLite 将默认时间戳存储为 unixepoch

> ID：11556546
> 
> 赞同：24
> 
> 时间：2012-07-19T08:10:42.983
> 
> 标签：sqlite, timestamp

定义关系时，我想在插入时将属性更新为时间戳。例如，我现在拥有的一张工作表

```
CREATE TABLE t1(
id INTEGER PRIMARY KEY AUTOINCREMENT,
time TIMESTAMP
DEFAULT CURRENT_TIMESTAMP,
txt TEXT); 
```

这是在插入时更新时间戳，例如，`insert into t1 (txt) values ('hello')`添加行`1|2012-07-19 08:07:20|hello|`。但是，我希望将此日期格式化为 unixepoch 格式。

我阅读了[文档](http://www.sqlite.org/lang_datefunc.html)，但这并不清楚。例如，我修改了表关系，`time TIMESTAMP DEFAULT DATETIME('now','unixepoch')`但出现错误。在这里，就像在文档中一样，`now`是我的时间字符串并且`unixepoch`是修饰符，但它不起作用。有人可以帮我如何将其格式化为 unixepoch 时间戳吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-19T08:20:15.620

使用`strftime`：

```
sqlite> select strftime('%s', 'now');
1342685993 
```

像这样使用它`CREATE TABLE`：

```
sqlite> create table t1 (
   ...> id integer primary key,
   ...> time timestamp default (strftime('%s', 'now')),
   ...> txt text);
sqlite> insert into t1 (txt) values ('foo');
sqlite> insert into t1 (txt) values ('bar');
sqlite> insert into t1 (txt) values ('baz');
sqlite> select * from t1;
1|1342686319|foo
2|1342686321|bar
3|1342686323|baz 
```

见[https://www.sqlite.org/lang_createtable.html#tablecoldef](https://www.sqlite.org/lang_createtable.html#tablecoldef)

> 如果列的默认值是括号中的表达式，则表达式会为插入的每一行计算一次，并将结果用于新行。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-04-02T18:33:06.103

注意 'timestamp' 不是 SQLite 已知的数据类型（请参阅[此处](https://www.sqlite.org/datatype3.html)的列表）。strftime() 生成的默认值实际上将存储为文本。

如果将值存储为数字而不是字符串很重要，请将字段声明为 Integer 并将 CAST() 添加到组合中，如下所示：

```
create table t1(
...
ts_field integer(4) default (cast(strftime('%s','now') as int)),
...
); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-03T18:02:02.570

事实上 strftime，也可以这样使用：

```
SELECT strftime('%s', timestamp) as timestamp FROM ... ; 
```

给你：

> 1454521888

'timestamp' 表列甚至可以是文本字段，使用`current_timestamp`as DEFAULT。

没有 strftime：

```
SELECT timestamp FROM ... ; 
```

给你：

> 2016-02-03 17:51:28

# tfs - 通过 NuGet 分发许可的 Metro XAML 控制套件

> ID：11556547
> 
> 赞同：0
> 
> 时间：2012-07-19T08:10:47.197
> 
> 标签：tfs, custom-controls, microsoft-metro, nuget

我目前正在参与在 XAML/C++ 中构建一个广泛的自定义控制套件，这将是一个“付费”包，它将提供给 Metro XAML 开发人员，但需要支付许可费。

我想让客户通过我们公司的网站购买许可证，然后通过 Visual Studio 中的 Nuget 访问他们的购买。

我的问题是：

1) 我可以将 NuGet 打包技术用于“付费”组件吗（用户需要输入凭据或许可证密钥才能从我们的私有 Nuget 存储库中获取它们 - 或类似的东西）

2）我们希望托管我们自己的 Nuget 存储库来控制访问，并希望连接到我们的 TFS 系统 - 有人知道这是否可能吗？

我们试图创建的场景是潜在客户访问我们的网站，购买我们的控件套件，通过 Nuget 在 Visual Studio 中（安全地）下载我们的控件并获得自动更新。另一方面，我们对 TFS 进行所有开发，按下“部署”按钮，更新会自动发布到我们基于 TFS 的 Nuget 存储库。

我知道这是一个复杂的多方面问题，但欢迎提出任何建议:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T22:04:50.120

首先，NuGet 不应该包含任何内置的安全机制——它是[OPC](http://en.wikipedia.org/wiki/Open_Packaging_Conventions)格式的简单 zip 存档。一旦您的客户收到包裹，他就可以将其发送给任何人。您可以出售一项服务——最新版本、错误修复支持等等。

怎么练。您可以实施 NuGet API 并共享给您的客户唯一的提要。

*   做任何你想要的身份验证。
*   根据需要创建尽可能多的提要（根据您的许可政策）。
*   每个供稿将仅包含您的包裹的子集
*   使用内置客户密钥即时创建一个包（这违反了项目的道德规则） - 因为包没有签名。

但这使您能够让客户使用 NuGet 作为平台来更新您的包以及任何共享包。

AFAIK，没有用于 NuGet（Nuget Gallery、Nuget.Server 等）的公共画廊，这将限制对包的访问。

# iphone - 为 iPhone 创建自定义滑块

> ID：11556548
> 
> 赞同：1
> 
> 时间：2012-07-19T08:10:55.713
> 
> 标签：iphone, objective-c, ios, xcode

我需要为我的 iPhone 应用程序创建一个自定义垂直滑块，仅仅是因为 UISlider 会变窄。它将用作我遥控直升机的油门“棒”。我设法在xcode中旋转滑块

```
throttleSlider.transform = CGAffineTransformMakeRotation(3*M_PI_2); 
```

但我认为这很丑陋，因为滑块仍然水平出现在我的故事板上。另外，我无论如何都找不到使滑块更宽的方法。

我将如何解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:15:03.890

在我现在正在开发的应用程序中，我们需要一个自定义滑块。它必须更宽（44 像素宽，表格视图单元格的默认大小）。我们通过使用可拉伸图像和调整滑块的属性来实现我们的目标：

```
UIImage* sliderCenterImage = [UIImage imageNamed:@"sliderCenter.png"];
[slider setThumbImage:sliderCenterImage forState:UIControlStateNormal];
UIImage *leftStretch2 = [[UIImage imageNamed:@"sliderLeft.png"]
                             stretchableImageWithLeftCapWidth:5.0 topCapHeight:0.0];
slider setMinimumTrackImage:leftStretch2 forState:UIControlStateNormal];
UIImage *rightStretch = [[UIImage imageNamed:@"sliderRight.png"]
                          stretchableImageWithLeftCapWidth:1.0 topCapHeight:0.0];
[slider setMaximumTrackImage:rightStretch2 forState:UIControlStateNormal]; 
```

这样我就得到了一个滑块，它可以满足 tableView 的整个单元格。thumbImage 是代表滑块中间的图像（您与之交互的那个，默认为圆点）， minimumTrackImage 将是滑块左侧的部分（默认为蓝色），maximumTrackImage 是部分通常在滑块中心的右侧留空。UISlider 的更多属性允许进一步自定义。看看[UISlider 开发者参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISlider_Class/Reference/Reference.html)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T08:35:10.587

我以前使用过这个实现`UICustomSwitch`，来自 Catamount Software 的博客：

[UICustomSwitch](http://www.catamount.com/blog/uicustomswitch-customizing-uiswitch-color-it-change-labels/)

它尝试自定义熟悉的`UISwitch`类，但它通过子类化`UISlider`并用自定义图像替换正常的开关图像来实现这一点。您可以下载此代码，然后将包含的图像替换为您自己绘制的图像。

因为这是一个开关，它只有开和关设置，你会看到它用这个来响应触摸：

```
[self setOn:on animated:YES]; 
```

只需去掉调用的代码，`setOn:animated:`以便滑块不会将其值一直强制为 0.0 或 1.0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-24T05:51:21.097

作为更新的答案，不推荐使用stretchableImageWithLeftCapWidth。建议使用

[resizableImageWithCapInsets](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImage_Class/index.html#//apple_ref/occ/instm/UIImage/resizableImageWithCapInsets:)

对于 swift 中的自定义滑块：

```
 var thumb = UIImage(named: "slider_thumb")
    musicSlider.setThumbImage(thumb, forState: UIControlState.Normal)

    var left = UIImage(named: "left_slide")?.resizableImageWithCapInsets(UIEdgeInsets(top: 0.0,left: 0.0,bottom: 0.0,right: 0.0))
    musicSlider.setMinimumTrackImage(left, forState: UIControlState.Normal)
    var right = UIImage(named: "right_slide")?.resizableImageWithCapInsets(UIEdgeInsets(top: 0.0,left: 0.0,bottom: 0.0,right: 0.0))
    musicSlider.setMaximumTrackImage(right, forState: UIControlState.Normal) 
```

UIEdgeInserts 指定不会调整大小的图像缓冲区。所以 left:15.0 意味着距离左侧 15 像素的区域不会被调整大小。就我而言，我不在乎，所以一切都为零。

请注意，图像本身就是使滑块变宽的原因。我的拇指图像高度为 35 像素，左右滑块图像高度为 20 像素。所有都从 Images.xcassets 切片和调整大小（应该保存图像）

# c# - 如何从 UDP 消息中播放波形数据（c#）

> ID：11556552
> 
> 赞同：1
> 
> 时间：2012-07-19T08:11:11.273
> 
> 标签：c#, .net, udp, audio-streaming, naudio

我有一个应用程序通过 UDP 端口通过网络接收波形数据（PCM 原始数据）。如何设置使用 Naudio 播放接收到的波形数据。我试图用谷歌查找并阅读一些与 Naudio 文档相关的东西，但到目前为止还没有成功。任何帮助或提示将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:49:27.507

简单的。

UDP 流 --> 缓冲区 --> NAudio WaveStream

首先，检查源 PCM 音频是否可以被 NAudio 正确播放。在通过套接字发送之前，请“离线”执行此操作。

我会做一些研究并稍后发布一些代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T08:34:12.837

好吧，我很久以前就对 nAudio 的东西做了一些工作，很抱歉我可能帮不上什么忙，因为我恐怕我几乎不记得它了……

但我认为有类似 WaveOut 类和 WaveStream 之类的东西，其中包含您的 WAV 数据，并且您在将 WaveOut 类与 WaveStream 关​​联后调用 Play。

试试看一下这个 WavOut 类，你可能会得到一些线索，当我从事这个工作时，我对这个音频世界还是很陌生，我的方法是使用他们播放 wav 文件的示例程序，看看他们是如何做到的。 ..这就是我弄清楚需要做什么的方式....

祝你好运...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T14:13:20.410

NAudioDemo 应用程序在网络聊天演示中演示了如何执行此操作。您使用`BufferedWaveProvider`来存储解压缩的音频，并使用它来馈送 WaveOut。如果没有足够的缓冲音频，您可能还想自动暂停，以防止播放卡顿。

# bash - 使用 bash 脚本分发命令行

> ID：11556553
> 
> 赞同：0
> 
> 时间：2012-07-19T08:11:13.610
> 
> 标签：bash, process, parallel-processing

我正在尝试实现简单的并行化，其中命令行分布在不同的进程中。为此，我编写了这个我命名的脚本`jobsel`：

```
(only "#! /bin/bash" and help message is omitted)

slots=$1
sel=$2

[[ $slots -gt 0 ]] || die_usage
[[ $sel -lt $slots ]] || die_usage

i=0
while read line
do
        (( i % slots == sel )) && eval $line
        i=$(( i + 1 ))
done

# in case the last line does not end with EOL
if [[ $line != "" ]]; then
        (( i % slots == sel )) && eval $line
        i=$(( i + 1 ))
fi 
```

我放`eval`是因为没有它我无法在命令中使用重定向或管道。

当我像`$HOME/util/jobsel 22 0 < cmds`在控制台模拟器上运行它时，当`cmds`一个文件包含`echo 0 >> out`越来越多的行时，它会按预期`0, 22, 44...`在单独的行中输出。目前很好。

所以我把这个工作。但是当我通过安全 shell 运行它时，我`at`使用后台运行它（每行以 结尾`&`）。然后有一个问题。当我输入 8 行时，启动了 21 个进程！`ps -AFH`具有相同命令和不同 pID 的打印进程。所有工作流程都在同一级别，直接在 init 之下。我的程序无论如何都不会创建子进程。

困惑的是，我尝试了`echo 0 >> out`脚本，`at`然后输出包含重复的行。仍然难以相信，并且认为同时附加可能导致异常，我使用其他方法来确认某些行运行了多次。

`at`此外，当一切都在终端中运行或我为每个工作进程创建单独的作业时，没有这种异常情况。

但这怎么会发生呢？我的脚本有问题吗？`at/atd`有什么bug吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:10:16.883

GNU[并行](http://www.gnu.org/software/parallel/)是您尝试实现的。

提示：与 xargs 结合使用效果很好

# jquery - 稍后在代码中访问 $(this)

> ID：11556555
> 
> 赞同：4
> 
> 时间：2012-07-19T08:11:19.473
> 
> 标签：jquery

我正在使用 ajax 制作一个小型投票应用程序。当您单击 +1 对项目进行投票时，将运行以下代码，将其投票计数加一，然后 php 按投票返回重新排序的项目列表。我想要的是投票赞成的项目变成绿色。更改颜色的代码必须在重新排序和检索项目后运行。

下面是代码块之一。中间的文字正在讨论该特定部分正在做什么。

```
$(function(){
  $(".plus").live('click', function() {
      var plus = $(this).data('plus');
      var dataString = "plus="+plus; 
```

下一行代码获取带有类的单击按钮的父元素，`.heading`并将其背景颜色设置为绿色以显示它已被投票。这很好用，只是您只能看到一秒钟，因为在成功投票的项目上，它们会被检索并再次输出以通过投票重新排序它们。

```
$(this).parents(".itemheading").stop().animate({ backgroundColor: "#cdeb8b"}, 100);

        $.ajax({
      type: "POST",
      url: "bin/processButtons.php",
      data: dataString,
      success: function() {

        $.ajax({url: 'retrieve.php', dataType: 'json'}).done(function(data) {

            var html = data['html'];
            $('#content')
                .html(data['html']) 
```

我想要做的是将代码行移到此处，以便在项目被投票然后检索后为颜色设置动画。这不再起作用，因为`$(this)`需要在单击按钮后立即在按钮上完成。

```
 $(this).parents(".itemheading").stop().animate({ backgroundColor: "#cdeb8b"}, 100); 
    });
      }
     });
    return false;
    });
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:13:22.770

您可以将`context`参数传递给`$.ajax`, 以手动设置上下文。

```
$.ajax({ context: this, url: ... }).done(function() {
   // $(this) still yields the clicked button
}); 
```

同样，如果你想变得古怪，也是有效的：

```
$.ajax({ context: $, url: ... }).done(function() {
    this('#my-button').remove();
}); 
```

不过，不要那样做。我只是添加它来说明`context`参数是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:15:51.680

假设我正确理解了您的问题，您是否希望能够保留 $(this) 以供以后使用？

在这种情况下，您应该能够将其存储在一个变量中：

```
var reference = $(this);

//A chunk of code.

$.ajax({url: 'retrieve.php', dataType: 'json'}).done(function(data) {
    //The HTML stuff...
    reference.parents(".itemheading").stop().animate({ backgroundColor: "#cdeb8b"}, 100);
} 
```

应该这样做。如果您在函数中定义引用，您应该能够在您在该函数中定义的任何 AJAX 成功函数中访问它（如果有意义的话）。

另一种方法是我们在下面的评论中讨论的 - 使用您的 PHP 为每个答案分配一个特定的 ID 并存储对它的引用...

```
var reference = $(this).attr("id");
//A chunk of code.

$.ajax({url: 'retrieve.php', dataType: 'json'}).done(function(data) {
    //The HTML stuff...
    $("#" + reference).parents(".itemheading").stop().animate({ backgroundColor: "#cdeb8b"}, 100);
 } 
```

# powershell - 如何实现一个powershell函数库？

> ID：11556556
> 
> 赞同：5
> 
> 时间：2012-07-19T08:11:19.130
> 
> 标签：powershell, code-organization

我最近参与了一个我们必须使用 powershell 脚本部署的项目。我们在不同的文件中或多或少地编写了 2000 行代码。其中一些致力于通用方法，但是在为每个方法编写了 500 行代码之后，很难找到要使用的方法，或者是否有必要实现一个新方法。

所以，我的问题是关于实现 powershell 函数库的最佳方法是什么：

拥有一些包含大量代码的文件比拥有大量包含几行代码的文件更好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T16:11:58.227

@MikeShepard 的答案在概念上是可行的。以下是一些与之相关的实现想法：

*   我有多种语言的开源库。正如 Mike Shepard 所建议的，我的[PowerShell API](http://cleancode.sourceforge.net/api/powershell/)从将顶层组织成不同的主题开始。

*   对于那些具有多个功能的主题（模块）（例如*SvnSupport*），每个公共功能都位于一个单独的文件中，其中包含其私有的支持功能和变量，从而增加了凝聚力并减少了耦合。

*   要将主题（模块）中的函数集合包装在一起，您可以单独枚举它们（通过点源或包括在清单中，如@Thomas Lee 建议的那样）。但我更喜欢从 Scott Muc 那里学到的技术。使用以下代码作为 .psm1 文件的*全部*内容，并将每个其他函数放在同一目录中的单独 .ps1 文件中。

* * *

```
Resolve-Path $PSScriptRoot\*.ps1 |
? { -not ($_.ProviderPath.Contains(".Tests.")) } |
% { . $_.ProviderPath } 
```

* * *

实际上，关于函数和模块还有很多话要说。感兴趣的读者可能会发现我在 Simple-Talk.com 上发表的文章[进一步深入兔子洞：PowerShell 模块和封装](http://www.simple-talk.com/dotnet/.net-tools/further-down-the-rabbit-hole-powershell-modules-and-encapsulation/)是一个有用的起点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T08:16:50.910

您可以创建一个[模块](http://msdn.microsoft.com/en-us/library/windows/desktop/dd878340%28v=vs.85%29.aspx)，您可以在其中*存储*专用于常见作业的所有脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:01:57.377

我同意@Christian 的建议并使用模块。

您可能会使用的一种策略是将模块分解为多个脚本并将它们全部包含在最终模块中。您可以在 .PSM1 文件中明确点源它们，也可以在清单（.PSD1 文件）中指定文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T13:36:40.740

我倾向于根据主题（松散地，名词）拥有多个模块。例如，如果我有一堆处理 MongoDB 的函数，我就会有一个 MongoDB 模块。如果我需要它们，这使得将它们拉入会话变得很容易，但不会因为一堆我很少使用的功能而使每个会话变得混乱。一致的命名约定将很容易知道要导入什么。例如，modMongoDB.psm1 是一个容易记住的名称。

附带说明一下，在 3.0 中，模块加载可以配置为自动，因此无需在您的配置文件中预加载一堆模块。

# javascript - 使用 jQuery 选择下一个选项

> ID：11556557
> 
> 赞同：28
> 
> 时间：2012-07-19T08:11:20.557
> 
> 标签：javascript, jquery, option, next

我正在尝试创建一个可以选择下一个选项的按钮。

所以，我有一个带有几个选项的选择（id=selectionChamp），下一个输入（id=fieldNext），我尝试这样做：

```
$('#fieldNext').click(function() {
    $('#selectionChamp option:selected', 'select').removeAttr('selected')
          .next('option').attr('selected', 'selected');

    alert($('#selectionChamp option:selected').val());      
}); 
```

但我无法选择下一个选项.. 谢谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-19T08:15:57.937

```
$('#fieldNext').click(function() {
    $('#selectionChamp option:selected').next().attr('selected', 'selected');

    alert($('#selectionChamp').val());      
}); 
```

@VisioN 的更好回答：[https ://stackoverflow.com/a/11556661/1533609](https://stackoverflow.com/a/11556661/1533609)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-19T08:17:35.650

```
$("#fieldNext").click(function() {
    $("#selectionChamp > option:selected")
        .prop("selected", false)
        .next()
        .prop("selected", true);
});​ 
```

**演示：http:** [//jsfiddle.net/w9kcd/1/](http://jsfiddle.net/w9kcd/1/)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-19T08:39:57.883

没有 jQuery 也很简单。一旦达到最后一个选项，这个选项将循环到第一个选项：

```
function nextOpt() {
  var sel = document.getElementById('selectionChamp');
  var i = sel.selectedIndex;
  sel.options[++i%sel.options.length].selected = true;
}

window.onload = function() {
  document.getElementById('fieldNext').onclick = nextOpt;
} 
```

一些测试标记：

```
<button id="fieldNext">Select next</button>
<select id="selectionChamp">
 <option>0
 <option>1
 <option>2
</select> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-19T08:24:19.373

```
$(function(){
  $('#button').on('click', function(){
    var selected_element = $('#selectionChamp option:selected');
    selected_element.removeAttr('selected');
    selected_element.next().attr('selected', 'selected');

    $('#selectionChamp').val(selected_element.next().val());

  });
}); 
```

[http://jsbin.com/ejunoz/2/edit](http://jsbin.com/ejunoz/2/edit)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-12-06T06:33:27.700

我希望这样的按钮能够循环通过选项，并触发更改事件。这是可能的解决方案：

```
$("#fieldNext").click(function() {
  if ($('#selectionChamp option:selected').next().length > 0) 
    $('#selectionChamp option:selected').next().attr('selected', 'selected').trigger('change');
  else $('#selectionChamp option').first().attr('selected', 'selected').trigger('change');
}); 
```

这是 jsFiddle：http: [//jsfiddle.net/acosonic/2cg9t17j/3/](http://jsfiddle.net/acosonic/2cg9t17j/3/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T08:17:19.897

```
$('#fieldNext').click(function() {
$('#selectionChamp option:selected').removeAttr('selected')
      .next('option').attr('selected', 'selected');

alert($('#selectionChamp option:selected').val());      
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-19T08:18:11.847

试试这个 ：

```
 $(document).ready(function(){
        $("#fieldNext").on("click",function(){
            $optionSelected = $("#selectionChamp > option:selected");
            $optionSelected.removeAttr("selected");
            $optionSelected.next("option").attr("selected","selected");       
        });
    }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-08T14:17:06.500

如果除了选项元素之外还有选项组元素，其他解决方案将不起作用。在这种情况下，这似乎有效：

```
var options = $("#selectionChamp option");
var i = options.index(options.filter(":selected"));
if (i >= 0 && i < options.length - 1) {
    options.eq(i+1).prop("selected", true);
} 
```

（你可能认为 for 的表达式`i`也可以写成`options.index(":selected")`，但这并不总是有效。我不知道为什么，欢迎解释。）

# java - 从线程回调到调用类

> ID：11556564
> 
> 赞同：0
> 
> 时间：2012-07-19T08:11:35.370
> 
> 标签：java, multithreading

我目前有一个扩展类`Thread`。在那个类中，我得到一个网页的内容（这只是 JSON 数据）并解析它。这取决于我得到什么 JSON 对象，因为这决定了我采取什么行动或我必须显示什么视图。

但是我目前的做法是我在一个类中检查所有可能的 JSON 请求并基于该请求执行操作。

例如，我的班级看起来像这样：

```
public class Communicator extends Thread
{
    Thread threadToInterrupt = null;
    String URL = null;

    public Houses ( String URL )
    {
        threadToInterrupt = Thread.currentThread();
        setDaemon(true);

        this.URL = URL;
    }

    public void run()
    {
        // Code to get the JSON from a web page
        // Finally parse the result into a String
        String page = sb.toString();

        JSONObject jObject = new JSONObject(page); 
        if ( !jObject.isNull("house") )
        {
            // do alot of stuff
        }
        else if ( !jObject.isNull("somethingelse") )
        {
            // do alot of other stuff
        }
    }
} 
```

正如你可以想象的那样，这个类很快就会被大量的 JSON 检查和代码弄得一团糟。感觉这不是正确的方法。

我想，也许最好传递一个被调用的回调方法？这样我就可以将我的课程改为这样的：

```
public class Communicator extends Thread
{
    Thread threadToInterrupt = null;
    String URL = null;

    public Houses ( String URL, String JsonString, object CallbackMethod )
    {
        // ... code
    }

    public void run()
    {
        // ....

        JSONObject jObject = new JSONObject(page); 
        if ( !jObject.isNull(this.JsonString) )
        {
            // THen call the CallbackMethod...
            CallbackMethod ( jObject );
        }
    }
} 
```

* * *

```
public class MyClass
{
    public void MyFunc()
    {
        (new Communicator("http://url.tld", "House", this.MyCallback)).start();
    }

    public void MyCallback(JSONObject jObject)
    {
        // Then i can perform actions here...
    }
} 
```

* * *

不确定这是否是个好主意。但如果是这样，我如何创建像我的示例中的回调？这有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:15:36.087

您不会使用回调，而是使用像 MyJsonHandler 这样的处理程序对象：

```
public class MyClass
{
    public void MyFunc()
    {
        (new Communicator("http://url.tld", "House", new MyJsonHandler())).start();
    }

}

public class MyJsonHandler() {

         public void handle(JsonObject jo) {
         // ...
          }

} 
```

或者在需要时创建一个新的 MyJsonHandler：

```
public void run()
    {
        // ....

        JSONObject jObject = new JSONObject(page); 
        if ( !jObject.isNull(this.JsonString) )
        {
            // THen call the CallbackMethod...
           new MyJsonHandler().handle(jObject);
        }
    } 
```

# .net - 通过现有网站访问 CRM 页面

> ID：11556568
> 
> 赞同：0
> 
> 时间：2012-07-19T08:11:49.510
> 
> 标签：.net, azure, crm

我有一个企业网站。从网站上，我想向 CRM 2011 和 windows azure 添加链接和身份验证。因此，您需要能够通过现有网站访问 CRM Pages。这可能吗？是否需要任何 asp.net 开发？请大家帮忙，我们将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T07:57:02.877

尝试使用 ADX 门户或 CRM SDK。我相信你可以通过快速的谷歌搜索很容易地弄清楚它

# ios - Xcode - 如何使用运行脚本将应用程序移出沙箱？

> ID：11556570
> 
> 赞同：3
> 
> 时间：2012-07-19T08:12:00.260
> 
> 标签：ios, xcode, jailbreak, run-script

基本上据我了解，如果我的应用程序想通过扩展坞连接器（引脚 12 / 13）使用串行通信，则应用程序必须位于应用程序沙箱文件夹之外。现在我不想每次在 Xcode 中单击时都必须`ssh`进入我的手机并复制`theAppFolder.app`到（那太愚蠢了）。`/Applications/``Run`

现在在做一些研究时，我偶然发现了[这篇博文](http://hcgilje.wordpress.com/2010/02/15/iphone-serial-communication/)。在评论中，有人给出[了](http://hcgilje.wordpress.com/2010/02/15/iphone-serial-communication/#comment-5562)我在这个问题中所说的内容。

现在他的解决方案是做我想做的事情的最佳方式，还是有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T23:44:11.423

有点晚了，但我使用 Xcode 的构建命令和构建后脚本在我越狱的 iOS 设备上获取我的应用程序，并使用 Cydia 的工具启动它（它实际上*会*从目录运行应用程序`/Applications`）。[在此处](https://stackoverflow.com/a/13707260/381233)查看我的答案以获取更多信息。仍然缺少的是调试能力，但我已经习惯了使用`NSLog`和跟踪系统日志。

# javascript - 防止“点击”事件多次触发+褪色问题

> ID：11556571
> 
> 赞同：3
> 
> 时间：2012-07-19T08:12:00.813
> 
> 标签：javascript, jquery, html, css, gallery

各位早安。我正在制作的一个简单的 jQuery 画廊有问题。它允许用户通过一些按钮循环浏览一组图像，同时在计时器上旋转这些图像。我的问题是用户可以多次单击按钮，这会排队淡入动画并一遍又一遍地重复，例如用户单击按钮 5 次 > 相同的图像淡入/淡出 5 次 > 画廊移动到下一个图像。

我试过使用：

`$('#homeGalleryImage li a').unbind('click');`

触发 click 事件然后重新绑定后：

`$('#homeGalleryImage li a').bind('click');`

完成后，但这只是在按下按钮一次后删除点击事件并且永远不会重新绑定它？

我还尝试通过以下方式禁用该按钮：

`$('#homeGalleryImage li a').attr('disabled', true);`

无济于事……？

还有一个次要问题，如果您在图像过渡时设法单击按钮，下一个图像会出现“褪色”，就好像不透明度已降低一样？很奇怪......这是按钮点击的代码：

```
var i = 1;
var timerVal = 3000;
$(function () {
    $("#homeGalleryControls li a").click(function () {
        var image = $(this).data('image');
        $('#galleryImage').fadeOut(0, function () {
            $('#galleryImage').attr("src", image);
        });
        $('#galleryImage').fadeIn('slow');
        $('.galleryButton').attr("src", "/Content/Images/Design/btn_default.gif");
        $(this).find('img').attr("src", "/Content/Images/Design/btn_checked.gif");
        i = $(this).data('index') + 1;
        if (i == 4) {
            i = 0;
        }
        timerVal = 0;
    });
}); 
```

这是在计时器上循环显示图像的代码：

```
//Cycle through gallery images on a timer
window.setInterval(swapImage, timerVal);
function swapImage() {
    $('#galleryImage').fadeOut(0, function () {
        var imgArray = ["/Content/Images/Design/gallery placeholder.jpg", "/Content/Images/Design/1.jpg", "/Content/Images/Design/2.jpg", "/Content/Images/Design/3.jpg"];
        var image = imgArray[i];
        i++;

        if (i == 4) {
            i = 0;
        }

        $('#galleryImage').attr("src", image);
        $('#galleryImage').fadeIn('slow');
    });
    var currentButton = $('#homeGalleryControls li a img').get(i - 1);
    $('.galleryButton').attr("src", "/Content/Images/Design/btn_default.gif");
    $(currentButton).attr("src", "/Content/Images/Design/btn_checked.gif");
} 
```

我意识到使用插件可能是一个更好的主意，但我对 jQuery 很陌生，我想学习一些东西而不是使用一些现成的代码。

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T08:14:47.197

你总是可以尝试向元素添加一些东西来取消点击事件？

例如

```
$(".element").click(function(e) {

    if ( $(this).hasClass("unclickable") ) {
        e.preventDefault();
    } else {

        $(this).addClass("unclickable");
        //Your code continues here
        //Remember to remove the unclickable class when you want it to run again.

    }

}): 
```

在您的情况下，您可以尝试在点击时添加检查。

```
$('#homeGalleryImage li a').attr('data-disabled', "disabled"); 
```

然后在你的点击事件中

```
if ( $(this).attr("data-disabled" == "disabled") {
  e.preventDefault();
} else {
  //Ready to go here
} 
```

**编辑**

这是一个显示元素变得不可点击的工作示例。[http://jsfiddle.net/FmyFS/2/](http://jsfiddle.net/FmyFS/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-14T10:11:51.517

如果你想确保注册的事件只被触发一次，你应该使用 jQuery 的[一个](https://api.jquery.com/one/#one-events-data-handler)：

> .one( events [, data ], handler ) 返回：jQuery
> 
> 描述：将处理程序附加到元素的事件。每个事件类型的每个元素最多执行一次处理程序。

见例子：

使用 jQuery：[https ://codepen.io/loicjaouen/pen/RwweLVx](https://codepen.io/loicjaouen/pen/RwweLVx)

```
// add an even listener that will run only once
$("#click_here_button").one("click", once_callback); 
```

使用 vanilly JS：[https ://codepen.io/loicjaouen/pen/gOOBXYq](https://codepen.io/loicjaouen/pen/gOOBXYq)

```
// add a listener that run only once
button.addEventListener('click', once_callback, {capture: true, once: true}); 
```

# java - 在多行 JTextField 中垂直更改光标对齐

> ID：11556572
> 
> 赞同：0
> 
> 时间：2012-07-19T08:12:09.583
> 
> 标签：java, swing, jtextfield, cursor-position, jtextcomponent

我有以下 JTextField，我想将光标位置从 JTextField 的中间更改为顶部：

![](../Images/af09eaa5dadbaf4db8da40bb50b390b7.png)

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:31:50.457

没有 multi-line 这样的东西`JTextField`。您发布的是一条常规的单行`JTextField`，只是被拉长了。

如果您需要多行文本组件，请考虑使用`JTextArea`or `JTextPane`，您可以在其中完美地将光标（插入符号）设置在第一行

*编辑*

只需阅读您的评论。用于输出的可编辑文本字段只会让用户感到困惑。至少让它不可编辑，或者选择`JLabel`一个`Border`

# php - PHP：日期选择器不起作用，按钮显示错误

> ID：11556581
> 
> 赞同：0
> 
> 时间：2012-07-19T08:12:48.370
> 
> 标签：php, button, datepicker, parse-error

我的代码中有两个问题。但首先这是完整的代码集

```
<html>

<title>IMS:MPP | Home</title>

<script type="text/javascript">

        function PopupCenter(pageURL, title,w,h) 
            {
                var left = (screen.width/2)-(w/2);
                var top = (screen.height/2)-(h/2);
                var targetWin = window.open (pageURL, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);
            } 

            var state = new Array();
            for (i=0; i<1; i++) {
                state[i] = "none";
                }

</script>

<head>
<link href="officerStyle.css" rel="stylesheet" type="text/css" media="screen" />
</head>

<script type="text/javascript" src="jsDatePick.min.1.3.js"></script>

<script type="text/javascript">
    window.onload = function(){

        new JsDatePick({
            useMode:2,
            target:"inputField",
            cellColorScheme: "armygreen",
            limitToToday:true,
        });
            };

            $(function() {
            $("#inputField1").JsDatePick();
            }
            )
            ;

            </script>

<!-- End -->

<?php

if(isset($_REQUEST['inputField1']))
    $inputField1 = $_REQUEST['inputField1'];
else
    $inputField1 = "";

include('global.php');

$host="localhost"; // Host name
$username="root"; // Mysql username
$password=""; // Mysql password
$db_name="mpp"; // Database name
$tbl_name="userinfo"; // Table name

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

//$_SESSION['myusername'] = $row['Username'];

//$_SESSION['mypassword'] = $row['UserID'];
$myusername=$_SESSION['myusername'];
//$mypassword=$_SESSION['mypassword'];

//require("mainlogin.php"); 
//$id = $_SESSION['myusername']; //Get user's ID 
$result = mysql_query("SELECT * FROM $tbl_name where Username='$myusername'"); 
$row = mysql_fetch_assoc($result); 

$type = $row['UserType'];
?>

<body>

<div id="wrapper">
    <div id="header">
    <img id="logos" src="images/logo.png" style="opacity:0.7;filter:alpha(opacity=70)"
        onmouseover="this.style.opacity=0.7;this.filters.alpha.opacity=70"
        onmouseout="this.style.opacity=1;this.filters.alpha.opacity=100" border="none"/>

    <a href="logout.php" onclick="return confirm ('Are you sure you want to Log Out?')"><img id="out" src="images/Outbtn.png" style="opacity:0.7;filter:alpha(opacity=70)"
                onmouseover="this.style.opacity=1;this.filters.alpha.opacity=100"
                onmouseout="this.style.opacity=0.7;this.filters.alpha.opacity=70" border="none"/></a>
    </div>

    <div id="page">
        <div id="page-bgbtm">
            <div id="menu">

                <?php

                /*------------------------------------------------------------ Encoder ------------------------------------------------------------*/

                    if ($type=="Encoder"){
                    //Navigation
                        echo "  <ul>
                                <li class='current_page_item'> <a href='#'>Home</a> </li>
                                <li> <a href='SalesOfficer.php'>Sales</a> </li>
                                <li> <a href='PromoOfficer.php'>Promo</a> </li>
                                <li> <a href='BankOfficer.php'>Bank</a> </li>
                                <li> <a href='PlanOfficer.php'>Plan</a> </li>
                                <li> <a href='User.php'>User</a> </li>
                                <li> <a href='Client.php'>Client</a> </li>
                                </ul>
                                </div>";

                    //Texts
                        echo "  <br/><br/><h1 class='title'><a href='#'>Welcome</a></h1>
                        <div class='entry'>";
                        echo "<h3>" . $row['UserType'] . "&nbsp" . $row['FirstName'] . "</h3>";

                        echo "<div class='post'></br>
                        <h3 class='title'>TODAY: Walk-In Clients</a></h3>";
                        echo "<h4 class ='title'>" . date("F d, Y") . date(" (D)");
                        echo "</h4></div>";

                    //TableHeader   
                        echo "<table border='1' cellpadding='5'>
                        <tr>
                         <th>Time In</th>
                         <th>Last Name</th>
                         <th>First Name</th>
                         <th>Middle Name</th>
                         <th>Promo Officer Name</th>
                         <th>Action</th>
                        </tr>";         

            /*------------------------------------------------------------ GoToDateTable ------------------------------------------------------------*/ 

                    //GoToDate

                        echo "  <link rel='stylesheet' type='text/css' media='all' href='jsDatePick_ltr.min.css' />";

                        echo"<form name='sdate' action='#' method='post'>";
                        echo"<input type='text' size='12' id='inputField' name='inputField1'>";
                        echo"<a href='#' onclick='validateForm(document.forms['sdate'].action);return false;><img src='images/go.png' height='27' width='60'></a>";

                    //GoToDateQuery

                        $result = mysql_query("SELECT TimeIn,LastName, FirstName, MiddleName ,PromoOfficerName FROM timein WHERE DateTrans='".$inputField1."'");

                    //TableAlternateFieldColor                  
                        $sw = 0;
                        while($row = mysql_fetch_array($result))
                            {
                                    if($sw == 0) 
                                        {
                                            $mycolor = "#fff";
                                            $sw = 1;
                                        }
                                    else
                                        {
                                            $mycolor = "#79b669";
                                            $sw = 0;
                                        }

                    //TableRowAndTableData                  
                                echo "<tr bgcolor='".$mycolor."'>"; 
                                echo "<td>" . $row['TimeIn'] . "</td>";
                                echo "<td>" . $row['LastName'] . "</td>";
                                echo "<td>" . $row['FirstName'] . "</td>";
                                echo "<td>" . $row['MiddleName'] . "</td>";
                                echo "<td>" . $row['PromoOfficerName'] . "</td>";
                                echo "<td><image src='images/out.png' height=27 width=60></td>";
                                echo "</tr>";
                        }

            /*------------------------------------------------------------ DateTodayTable ------------------------------------------------------------*/    

                        $datetoday=date("m.d.Y");
                        $result = mysql_query("SELECT TimeIn,LastName, FirstName, MiddleName ,PromoOfficerName FROM timein WHERE DateTrans='".$datetoday."'");

                        $sw = 0;
                        while($row = mysql_fetch_array($result))
                            {
                                    if($sw == 0) 
                                        {
                                            $mycolor = "#fff";
                                            $sw = 1;
                                        }
                                    else
                                        {
                                            $mycolor = "#79b669";
                                            $sw = 0;
                                        }
                                echo "<tr bgcolor='".$mycolor."'>"; 

                                echo "<td>" . $row['TimeIn'] . "</td>";
                                echo "<td>" . $row['LastName'] . "</td>";
                                echo "<td>" . $row['FirstName'] . "</td>";
                                echo "<td>" . $row['MiddleName'] . "</td>";
                                echo "<td>" . $row['PromoOfficerName'] . "</td>";
                                echo "<td> <a href='#' onclick = PopupCenter('timeoutform.php?salesID=<?$row['PlanHoldersID']?>','myPop1',400,430)><image src='images/out.png' height=27 width=60> </a> </td>";
                                echo "</tr>";
                            }
                        echo "<a href='#' onclick = PopupCenter('timeinform.php','myPop1',400,430)> <img src = 'images/add.png' height='27' width='60'> </a>";  
                    }   

            /*------------------------------------------------------------ Administrator ------------------------------------------------------------*/                 

                    elseif ($type=="Administrator"){
                        echo "<ul>
                              <li class='current_page_item'> <a href='#'>Home</a> </li>
                              <li> <a href='#'>Daily</a> </li>
                              <li> <a href='#'>Weekly</a> </li>
                              <li> <a href='#'>Commission</a> </li>
                              <li> <a href='#'>Client</a> </li>
                              </ul> </div>";

                        echo "  <br/><br/><h1 class='title'><a href='#'>Welcome</a></h1>
                        <div class='entry'>";
                        echo "<h3>" . $row['UserType'] . "&nbsp" . $row['FirstName'] . "</h3>";

                    }
                ?>  

            </div>

        </div>
    </div>
</div>

<div id="footer-wrapper">
    <div id="footer">
        <p>Copyright (c) 2010 Sitename.com. All rights reserved. Design by FCT.</p>
    </div>
</div>

</body>

</html> 
```

**问题1：**

```
//GoToDate

                        echo "  <link rel='stylesheet' type='text/css' media='all' href='jsDatePick_ltr.min.css' />";

                        echo"<form name='sdate' action='#' method='post'>";
                        echo"<input type='text' size='12' id='inputField' name='inputField1'>";
                        echo"<a href='#' onclick='validateForm(document.forms['sdate'].action);return false;><img src='images/go.png' height='27' width='60'></a>"; 
```

这是一个获取日期的文本框和一个触发查询以显示给定日期下的数据的按钮。问题是它在手动输入日期时有效，但在使用日期选择器时无效。

**问题2：**

```
echo "<td> <a href='#' onclick = PopupCenter('timeoutform.php?salesID=<?$row['PlanHoldersID']?>','myPop1',400,430)><image src='images/out.png' height=27 width=60> </a> </td>";
                                echo "</tr>"; 
```

这个按钮应该显示`timeoutform.php`，但它显示 ff。错误

> 解析错误：解析错误，`T_STRING' or`在第 209 行的 C:\wamp\www\IMS-MPP(Encoder)\home.php 中需要 T_VARIABLE' 或 `T_NUM_STRING'

**希望有人能帮忙。非常感谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:20:25.783

对于问题 2，您有一些不稳定的格式。尝试这个：

```
echo "<td> <a href='#' onclick = PopupCenter('timeoutform.php?salesID=".$row['PlanHoldersID']."','myPop1',400,430)><image src='images/out.png' height=27 width=60> </a> </td>"; 
```

基本上，PHP`"<?$row['PlanHoldersID']?>"`在 HTML 中打印为字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:19:56.383

“不用写`<?$row['PlanHoldersID']?>`

替换为**“.$row['PlanHoldersID']。”**

```
echo "<td> <a href='#' onclick = PopupCenter('timeoutform.php?salesID=".$row['PlanHoldersID'].",'myPop1',400,430)><image src='images/out.png' height=27 width=60> </a> </td>"; 
```

# java - 在 Unix 系统中用 Flatworm 写文件

> ID：11556582
> 
> 赞同：0
> 
> 时间：2012-07-19T08:12:51.193
> 
> 标签：java, file, shared-libraries, portability

我们的 Java 应用程序遇到了一个奇怪的情况，我们需要编写一个扁平的程序，我们决定使用 Flatworm java 库。我们编写了一个需要在 Unix 服务器上调度的企业 Java 应用程序。我们开发了我们的 java 应用程序，它在我们的 Windows 桌面 PC 上运行良好。当我们尝试执行使用 Flatworm 库的应用程序时，我们会收到一个静默错误。应用程序挂起并且不会引发任何异常。因此，我们尝试放置大量日志信息，并且我们了解问题出在哪里。

```
fileCreator = new FileCreator(outputData.getConfigMailFile(), outputData.getDownloadFolder() + trackFileName);
            fileCreator.open();
            fileCreator.setRecordSeperator("\n");
            for (MailFile mail : listMails) {
                fileCreator.setBean("mail", mail);
                fileCreator.write("mailRow");
            } 
```

当我们调用这两个方法时，错误应该在 java cicle 内部。

```
for (MailFile mail : listMails) {
                    fileCreator.setBean("mail", mail);
                    fileCreator.write("mailRow");
                } 
```

我们对这个问题有点迷茫，我们至少想了解如何捕获这个异常。执行代码的 Unix 机器似乎异常停止。我真的很感谢你的帮助。谢谢

**2012 年 7 月 19 日更新**

我们在 linux 3.2 内核 java 1.6 上进行了尝试，程序运行正常。看起来有一些东西阻止了扁虫，我们查看了应用程序在这部分代码中挂起的扁虫的源代码：

```
if (beanRef != null)
                        {
                            // Extract property name
                            Object bean = null;
                            String property = "";
                            try
                            {
                                int posOfFirstDot = beanRef.indexOf('.');
                                bean = beans.get(beanRef.substring(0, posOfFirstDot));
                                property = beanRef.substring(posOfFirstDot + 1);
                            } catch (ArrayIndexOutOfBoundsException ex)
                            {
                                throw new FlatwormCreatorException("Had trouble parsing : " + beanRef
                                        + " Its format should be <bean_name>.<property_name>");
                            }

                            // Convert to String for output
                            Object value = PropertyUtils.getProperty(bean, property);
                            val = convHelper.convert(type, value, convOptions, beanRef);
                            PropertyUtils.setProperty(bean, property, value);
                        } // end beanRef != null
                        // Handle any conversions that need to occur
                        if (val == null)
                        {
                            val = "";
                        }
                        val = convHelper.transformString(val, recElement.getConversionOptions(), recElement
                                .getFieldLength());

                        if (itRecElements.hasNext())
                            bufOut.write(val + delimit);
                        else
                            bufOut.write(val); 
```

另一个不起作用的 unix 是内核 2.6 和 java 1.6

# ruby - python setup.py develop 的 Ruby 等价物是什么？

> ID：11556584
> 
> 赞同：7
> 
> 时间：2012-07-19T08:12:57.507
> 
> 标签：ruby, gem, rvm

我是 ruby​​ 新手，需要调试一些打包为 gem 的 ruby​​ 应用程序。

我正在使用 rvm，我将包安装为 gem，并且还对该包进行了全新的 github 签出。如何告诉我的 rvm 环境使用 github repo 中的代码而不是安装的 gem？

这相当于`python setup.py develop`熟悉python的人。

> Setuptools 允许您部署项目以在公共目录或暂存区域中使用，但无需复制任何文件。因此，您可以在其签出目录中编辑每个项目的代码

[https://pythonhosted.org/setuptools/setuptools.html#development-mode](https://pythonhosted.org/setuptools/setuptools.html#development-mode)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T08:17:17.473

是的，你可以。

查看[捆绑器](http://gembundler.com/)。这是使用它的事实上的标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-31T10:56:41.200

除了上一个答案。

有时 gems/packages 提供可执行文件。这样做的好处`python setup.py develop`是，您的路径中将始终拥有该可执行文件的最新版本。这对开发来说很方便。据我所知 Gem 不提供这样的功能。要模拟您可以使用[Bundler](http://gembundler.com/)，它是如何：

*   首先创建一个新的 Gemfile：`bundle init`
*   然后编辑该文件并添加您正在处理的本地 Gem（对我来说是 Nanoc）：`gem "nanoc", path: "path/to/local/nanoc"`
*   然后要访问 Gem 提供的可执行文件，您可以通过这种方式使用 bundler：`bundle exec nanoc ...`

这里`bundle exec`将从您的 Gemfile 中获取 Gem 版本并使用它。如果该 Gem 指定了一个`:path`选项，那么它将使用该选项。

在 Python 中肯定不那么方便，但它是我在 Ruby 中找到的最接近的解决方案。

# mongodb - mongodb - 连接测试这么久

> ID：11556585
> 
> 赞同：-1
> 
> 时间：2012-07-19T08:12:58.680
> 
> 标签：mongodb

我是 Mongo DB 的新手。我正在尝试按照[本教程](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-windows/)在我的笔记本电脑中安装 MongoDB 。我按照教程中的命令启动 MongoDb 并进行连接。当我开始连接 `C:\mongodb\bin\mongo.exe` 时，它会提示新的 CMD，并说正在连接：test，但它保持不变这么久。感谢有人对此提出建议。

***截屏*** ![在此处输入图像描述](../Images/928dbc076be9f22e43b81c2a5f9bc641.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-19T08:20:21.493

似乎没有错误。这是 javascript shell 屏幕。您可以在该屏幕上使用[shell 命令。](http://docs.mongodb.org/manual/reference/javascript/)[您可以在此处](http://www.mongodb.org/display/DOCS/dbshell+Reference)找到 shell 参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T04:22:55.060

从 MongoDB 2.2rc0 开始，第一次启动`mongo`shell 时会显示一些更清晰的指令。

```
MongoDB shell version: 2.2.0-rc0
connecting to: test
Welcome to the MongoDB shell.
For interactive help, type "help".
For more comprehensive documentation, see
    http://docs.mongodb.org/
Questions? Try the support group
    http://groups.google.com/group/mongodb-user
> 
```

# android - 使用 Flash Builder 4.6 和 CS6 调试 iOS/Android？

> ID：11556590
> 
> 赞同：0
> 
> 时间：2012-07-19T08:13:16.953
> 
> 标签：android, ios, actionscript-3, flash-builder

我对调试我的应用程序的最佳方式有点困惑。

当我为 web/desktop 开发时——我只需在 flash builder 中点击“debug”，我就可以看到我所有的跟踪语句等。现在我想将它移植到 iOS 并使用陀螺仪、加速度计等进行控制。

作为开发人员，最快的测试方法是什么？我对深层内部结构（如内存使用、帧率等）不太感兴趣。我只想在 iPad 模拟器中移动并查看跟踪语句，以便进行控制……但显然 Device Central 在 CS6 中消失了

我在 Flash Pro CS6 中看到了模拟器的屏幕截图——但这让我觉得有点奇怪……好像我应该使用 Flash Pro 进行开发？还是那里的模拟器以某种方式与 Flash Builder 链接？

也许这只是我的工作流程，但是导出到 IPA 并将其移动到设备对于这个开发阶段来说太慢了（是的，为了调整，在真实设备上进行测试很重要……但是对于现在我只想在代码和测试之间快速来回切换）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:40:41.507

当您在 ios 设备中从 flash builder 调试应用程序时，您将在控制台上收到所有跟踪通知。构建应用程序后，flash builder 将提示您将其安装到您的 ios 设备上，并且一旦您运行它，您的痕迹就会开始出现。

您还需要一个 Apple 证书和一个临时配置文件来执行此操作。

# iphone - Iphone 更新应用发布日期

> ID：11556592
> 
> 赞同：1
> 
> 时间：2012-07-19T08:13:24.667
> 
> 标签：iphone, ios, ios5, app-store-connect

我有一个在 iTunes 上出售的应用程序，我最近（8 天前）向商店提交了更新，该应用程序应该在明天发布。我看到应用状态显示“等待审核”，并且我将发布日期指定为“批准后发布”。已经 8 天了，更新应用程序仍处于等待阶段。我可以更改发布日期吗？是否影响审核流程？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:56:32.170

您不需要（**也不能**）更改发布日期，您不必担心，但我不知道您为什么要更改发布日期。审核过程需要*8-10 个工作日*，这是正常的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:46:32.970

为什么必须更改发布日期？你不能。是让AppStore审核通过后自动发布，还是审核通过后手动发布。除非非常必要，否则不要在上传内容获得批准之前对其进行更改，因为这可能会延迟批准过程。

# protostuff - 使用 protostuff，如何跳过读取已删除的实体？

> ID：11556599
> 
> 赞同：0
> 
> 时间：2012-07-19T08:13:51.687
> 
> 标签：protostuff

我是使用 Protostuff 读取/写入数据的团队的一员。这是`mergeFrom`从类扩展的`Schema`类的方法：

```
@Override
    public void mergeFrom(Input input, Entity entity) throws IOException {
        for(int number = input.readFieldNumber(this); ; number = input.readFieldNumber(this))
        {
            if ( number == 0 ) {
                break;
            } else if ( number == FIELD_DEFINITION_ID ) {
                Schema idmSchema = entity.getSchema();

                // Definition id
                int definitionId = input.readUInt32();
                NodeDefinition defn = idmSchema.getById(definitionId);
                if ( defn == null ) {
                    throw new ProtostuffException("Invalid definition id "+definitionId);
                }
                Node<?> node = defn.createNode();
                entity.add(node);

                // Node
                readAndCheckFieldNumber(input, FIELD_NODE);
                input.mergeObject(node, getSchema(node.getClass()));

            } else if ( number == FIELD_CHILD_NODE_STATE ){
                //Node state
                int intState = input.readInt32();
                State state = State.parseState(intState);
                readAndCheckFieldNumber(input, FIELD_CHILD_DEFINITION_ID);
                int childDefnId = input.readInt32();
                Schema schema = entity.getSchema();
                NodeDefinition childDefn = schema.getById(childDefnId);
                entity.childStates.put(childDefn.getName(), state);
            } else {
                throw new ProtostuffException("Unexpected field number");
            }
        }
    } 
```

我现在的任务是跳过读取数据，该数据的模式已经被删除。我正在查看接口的[handleUnknownField](http://www.jarvana.com/jarvana/view/com/dyuproject/protostuff/protostuff-api/1.0.3/protostuff-api-1.0.3-javadoc.jar!/com/dyuproject/protostuff/Input.html#handleUnknownField%28int,%20com.dyuproject.protostuff.Schema%29)方法`Input`。

有没有人已经经历过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:04:12.580

解决方案确实非常基本。查看此参考：[Schema](http://code.google.com/p/protostuff/wiki/Schema)，并检查 mergeFrom 代码：

```
public void mergeFrom(Input input, User user) throws IOException
{
    while(true)
    {
        int number = input.readFieldNumber(this);
        switch(number)
        {
            case 0:
                return;
            case 1:
                user.setEmail(input.readString());
                break;
            case 2:
                user.setFirstName(input.readString());
                break;
            case 3:
                user.setLastName(input.readString());
                break;
            case 4:
                if(message.friends == null)
                    message.friends = new ArrayList<User>();
                message.friends.add(input.mergeObject(null, this));
                break;
            default:
                input.handleUnknownField(number, this);
        }
    }
} 
```

我想我应该只使用`input.handleUnknownField(number, this);`. 它以这种方式正确解决了我的问题：

```
...
} else if ( number == FIELD_DEFINITION_ID ) {
            Schema idmSchema = entity.getSchema();

            // Definition id
            int definitionId = input.readUInt32();
            NodeDefinition defn = idmSchema.getById(definitionId);
            if ( defn == null ) {
                input.handleUnknownField(number, this);
                continue;
            }
            Node<?> node = defn.createNode();
            entity.add(node);

            // Node
            readAndCheckFieldNumber(input, FIELD_NODE);
            input.mergeObject(node, getSchema(node.getClass()));

        }
... 
```

谢谢，我希望这个 QA 对其他人有益！

# android - Android : difference between invisible and gone?

> ID：11556607
> 
> 赞同：530
> 
> 时间：2012-07-19T08:14:18.817
> 
> 标签：android, android-xml, xml-attribute

What is the difference between `invisible` and `gone` for the View visibility status?

* * *

## 回答 #1

> 赞同：801
> 
> 时间：2012-07-19T08:15:31.073

INVISIBLE:

> This view is invisible, but it still takes up space for layout purposes.

GONE:

> This view is invisible, and it doesn't take any space for layout purposes.

* * *

## 回答 #2

> 赞同：300
> 
> 时间：2014-04-22T05:25:44.513

From [Documentation](http://developer.android.com/reference/android/view/View.html) you can say that

> ***View.GONE*** This view is invisible, and it doesn't take any space for layout purposes.
> 
> ***View.INVISIBLE*** This view is invisible, but it still takes up space for layout purposes.

* * *

***Lets clear the idea with some pictures.***

*Assume that you have three buttons, like below*

![enter image description here](../Images/47ead766b65ca1d2339843e4264db16d.png)

*Now if you set visibility of Button Two as invisible (`View.INVISIBLE`), then the output will be*

![enter image description here](../Images/2bfc23f307883fe0ab1c110cea8d47b9.png)

*And when you set visibility of Button Two as gone (`View.GONE`) then the output will be*

![enter image description here](../Images/a144f334bd1b2595fef123a4dd1accb4.png)

Hope this will clear your doubts.

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2014-03-26T09:06:26.820

For ListView or GridView there is an another difference, when visibility initially set to

INVISIBLE:

> Adapter's getView() function called

GONE:

> Adapter's getView() function didn't call, thus preventing views to load, when it is unnecessary

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-10-26T07:49:38.493

INVISIBLE:
The view has to be drawn and it takes time.

GONE:
The view doesn't have to be drawn.

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-11-10T12:39:33.707

I'd like to add to the right and successful answers, that if you initialize a view with visibility as `View.GONE`, the view could have been not initialized and you will get some random errors.

For example if you initialize a layout as `View.GONE` and then you try to start an animation, from my experience I've got my animation working randomly times. Sometimes yes, sometimes no.

So before handling (resizing, move, whatever) a view, you have to init it as `View.VISIBLE` or `View.INVISIBLE` to render it (draw it) in the screen, and then handle it.

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-07-21T05:17:40.527

when you make it Gone every time of compilation of program the component gets initialized that means you are removing the component from layout and when you make it invisible the component it will take the same space in the layout but every time you dont need to initialize it.

if you set Visibility=Gone then you have to initialize the component..like

eg Button _mButton = new Button(this);

_mButton = (Button)findViewByid(R.id.mButton);

so it will take more time as compared to Visibility = invisible.

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-03-10T11:20:58.297

*   **View.INVISIBLE**->The View is invisible but it will occupy some space in layout

*   **View.GONE**->The View is not visible and it will not occupy any space in layout

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-04T17:33:28.763

View.GONE = The view will not show and the rest of the views will not take its existence into consideration

View.INVISIBLE = The view will not show, but it will take its assigned space in the layout

# c# - 如何根据 DateTime 获取文件（通过 Directory.GetFile() ）

> ID：11556611
> 
> 赞同：0
> 
> 时间：2012-07-19T08:14:32.820
> 
> 标签：c#

我在我的应用程序中遇到问题我想根据 DateTime 从文件夹中获取所有文件。是否可以使用 Directory.GetFile() 或通过 C# 的任何其他内置函数

谢谢沙尚克

![在此处输入图像描述](../Images/e1973c7ab361c62d2a14d8bfd9fe40f0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:16:47.677

**Linq 解决方案**

```
string startFolder = @"c:\program files\Microsoft Visual Studio 9.0\";
System.IO.DirectoryInfo dir = new System.IO.DirectoryInfo(startFolder);
IEnumerable<System.IO.FileInfo> fileList = dir.GetFiles("*.*", System.IO.SearchOption.AllDirectories);

        IEnumerable<System.IO.FileInfo> fileQuery =
            from file in fileList
            where (file.CreationTime <= maxdate//replac eyour date here
                   && file.CreationTime >= mindate)//replac eyour date here

            orderby file.CreationTime 
            select file; 
```

* * *

您可以像这样检查文件时间

```
string fileName = @"C:\MyPath\MyFile.txt"; 
    if (File.Exists(fileName)) 
    {
        label_CreationTime.Text = 
                 File.GetCreationTime(fileName).ToString(); 
        label_LastAccess.Text = 
                 File.GetLastAccessTime(fileName).ToString(); 
        label_LastWrite.Text = 
                 File.GetLastWriteTime(fileName).ToString(); 
    } 
```

所以要直接检查你的每个文件，你需要做这样的事情

```
string[] filePaths = Directory.GetFiles(@"c:\MyDir\");
foreach(string fileName in filePaths )
{
          Console.Writeln(fileName );
          Console.Writeln(File.GetCreationTime(fileName).ToString()); 
          Console.Writeln(File.GetLastAccessTime(fileName).ToString()); 
          Console.Writeln(File.GetLastWriteTime(fileName).ToString()); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:18:18.550

使用 System.IO.FileSystemInfo.CreationTime 的一个很好的例子可以在这里找到[http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.creationtime.aspx](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.creationtime.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:18:28.680

获取 FileInfo 并检查创建/修改日期是我能想到的一个选项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T08:19:39.927

你可以试试

```
 var d = new DirectoryInfo(dirPath);
    var filesInfo d.GetFiles().OrderBy(x => x.LastAccessTime); 
```

或者您也可以查询日期时间

```
 var filesInfo = d.GetFiles().Where(x=>x.LastAccessTime > datetTime); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T08:21:41.520

您可以按属性使用[`Directory.EnumerateFiles`](http://msdn.microsoft.com/en-us/library/system.io.directory.enumeratefiles.aspx)和过滤`FileInfo`对象`LastWriteTime`，例如：

```
var minimumDate = new DateTime(2012, 1, 1);
var directory = new DirectoryInfo(@"D:\MyFolder");
var files = directory.EnumerateFiles("*", SearchOption.AllDirectories)
            .Where(f => f.LastWriteTime >= minimumDate); 
```

请注意，这可能会引发`UnauthorizedAccessException`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T08:33:34.580

要访问昨天创建的所有文件，请在 Linq 中执行以下操作，并设置所需的最小/最大值：

如果您想查看文件修改而不是创建，请替换`CreationTime`为：`LastWriteTime`

```
var targetDirectory = "Put your dir here";
var minDate = DateTime.Today.AddDays(-1);
var maxDate = DateTime.Today.AddSeconds(-1);

try
{
    var dir = new Directory(targetDirectory);
    foreach (var file in dir.GetFiles().Where(f => f.CreationTime >= minDate 
                                                && f.CreationTime <= maxDate))
    {
        // Do something with file.
        Console.WriteLine("File : {0}", file.FullName);
    }
}
catch( Exception e )
{
    // Handle access exceptions.
} 
```

# xpages - 在视图中 onclick 更改前一行和当前行的值

> ID：11556622
> 
> 赞同：0
> 
> 时间：2012-07-19T08:15:06.537
> 
> 标签：xpages, xpages-ssjs

我想更改视图中单击行的后端文档中字段的值，但也更改前一行的值。这样做的最好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:50:33.200

有趣的话题。我只是试了一下，找到了这个解决方案：

我假设您正在使用视图面板（不过，使用类似重复的东西可能会使事情变得更容易一些）。在 viewPanel 的“所有属性”下查找名为“data > var”的属性（注意：还有一个“data > data > var”，但这是另一回事！）。您可以在此处输入一个唯一名称以访问您的视图条目：

```
<xp:viewPanel rows="30" id="viewPanel1" var="entry">        
    <xp:this.data>
        <xp:dominoView var="view1" viewName="myView"></xp:dominoView>
    </xp:this.data> 
```

我添加了一个额外的列来计算其数据属性，使用当前条目的父视图导航器对象计算前一个条目，并确保当前和前一个条目都是有效的视图条目对象。然后，结果我返回上一个条目的 NoteID 值以确保我确实访问了它。

```
if(!entry.isCategory()){
    var vnav:NotesViewNavigator = entry.getParent();
    vnav.gotoEntry(entry.getDocument())
    var pentry = vnav.getPrev();
    if(pentry!=null){
        pentry.getNoteID();
    }
} 
```

为了能够正确检查这一点，我又添加了一列来显示*当前*条目的 NoteID：

```
entry.getNoteID(); 
```

结果如下所示：

![在此处输入图像描述](../Images/af4d835090107cfc7bc85427ca809451.png)

因此，一旦您拥有前一个对象，您也可以访问其文档对象。

***编辑：***如何以普通方式获取 viewNavigator 对象：

只需使用父视图对象创建您的 viewNavigator，如

```
var view = database.getView("myView);
var vnav = view.createViewNav(); 
```

另一方面，如果您看到 entry.getParent() 导致 viewEntryCollection ，您不妨尝试以不同的方式访问前一个条目：

```
var vec = entry.getParent();
if (vec.toString().indexOf("ViewEntryCollection")>0){
    var preventry = vec.getPrevEntry(entry);
} 
```

# objective-c - 如何有效地将命令名称映射到操作？

> ID：11556630
> 
> 赞同：1
> 
> 时间：2012-07-19T08:15:31.983
> 
> 标签：objective-c, ios

我有一个命令列表，其中包含数百个命令，并且需要经常调用此命令列表。像：

```
if([command isEqualToString:"openPage1"]){
  open page 1
}else if ([command isEqualToString:"jumpToPage4"]){
  get param1 and param2
  jump to page 4
}else if ([command isEqualToString:"backToPage10"]){
  get param1
  back to page 10
}.... 
```

由于有数百个命令并且经常调用，所以我认为“if else”不是一个好方法......

哪种算法更快更高效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T08:20:21.810

您可以`NSDictionary`将命令名称直接映射到代码，无论是选择器、调用还是块。就像是：

```
NSMutableDictionary *actions = [NSMutableDictionary dictionary];
[actions setObject:^{
    [self getParam1];
    [self getParam2];
    [self navigateSomewhere];
} forKey:@"openPage1"]; 
```

进而：

```
dispatch_block_t action = [actions objectForKey:command];
if (action) {
    action();
} else {
    /* handle unknown command */
} 
```

当然，字典只会被初始化一次，然后被缓存。如果操作始终是同一个调用，只是使用不同的参数，您可以将命令名称直接映射到参数：

```
// setup:
NSDictionary *commandsToPages = [NSDictionary dictionaryWithObjectsAndKeys:
    [NSNumber numberWithInt:1], @"command1",
    /* more mappings */,
    nil];
// …and later:
NSNumber *pageNumber = [commandsToPages objectForKey:commandName];
[self displayPage:[pageNumber intValue]]; 
```

如果可能的话，还可以选择仅解析命令名称以提取页码。

* * *

PS。从 LLVM 4.1 (?) 开始，您还可以使用速记文字语法来创建动作字典，这样看起来会更容易一些：

```
NSDictionary *actions = @{
    @"command1" : ^{
        …
    },
    @"command2" : ^{
        …
    },
}; 
```

请注意，即使第二个命令块之后的尾随逗号也有效。

# java - Java中如何根据String列表构造对象？

> ID：11556632
> 
> 赞同：2
> 
> 时间：2012-07-19T08:15:42.160
> 
> 标签：java

我有来自外部来源的字符串。基于这个字符串，我必须生成一个对象。我必须生成的所有对象都扩展了相同的抽象基类。我有一个关系“字符串”<->“类”的列表。

我的问题是在哪里做这一代的最佳方式以及如何做？

1.  我可以使用 if-else 方法创建单独的类。并在我需要的地方调用它。
2.  我可以把它放在这个 if-else 直接放在我需要的地方
3.  我可以把它放到抽象类中。
4.  添加到抽象类`Map<String,Class>`并尝试使用反射（但我不知道如何）
5.  别的东西？

* * *

```
abstract class Element { 
    abstract String getType();
}
class AElement extends Element{
    String getType(){return "A";}
}
class BElement extends Element{
    String getType(){return "B";}
}
class CElement extends Element{
    String getType(){return "C";}
}

class MyObject {
   Element element;
   MyObject(String text){
   //here I conscruct my object form string.
   String[] elem = text.split(";");
   this.element = someMethod(elem[3]);
} 
```

我知道 elem[3] 将是文本“A”、“B”和“C”，然后我应该在方法 someMethod() 中创建相应的 AElement、BElement 或 CElement 对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:50:13.730

[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)是一个很好的解决方案。它将使您从对象创建技术中抽象出来。

在工厂内部，您可以通过反射创建实例，如下所示：

```
public static YourAbstract createObject(String className) {
    try {
       Class c = Class.forName(className);
       YourAbstract newObject = (YourAbstract)c.newInstance();
       return newObject;
    } catch (Exception e) {
       // handle the way you need it ... e.g.: e.printStackTrace();
    }
} 
```

看看这个问题：[Using reflection in Java to create a new instance with reference variable type set to the new instance class name?](https://stackoverflow.com/questions/2215843/using-reflection-in-java-to-create-a-new-instance-with-the-reference-variable-ty)

或者，如果工厂知道所有类，则从 config 或类似的东西创建某种映射：

```
public class YourAbstractFactory {

    private static Map<String, Class> classez = new HashMap<String, Class>();

    public static YourAbstract initFactory(Map<String, Class> classes) {
        // initialize your map
        classez.putAll(classes);
    }

    public static YourAbstract initFactory(Collection<String> classes) {
        // initialize your map
        for(String className : classes) {
            try {
               Class c = Class.forName(className);
               classez.put(className, c);
            } catch (Exception e) {
               // handle the way you need it ... e.g.: e.printStackTrace();
            }
        }
    }

    public static YourAbstract createObject(String className) {
        try {
           Class c = classez.get(className);
           YourAbstract newObject = (YourAbstract)c.newInstance();
           return newObject;
        } catch (Exception e) {
           // handle the way you need it ... e.g.: e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:27:45.700

最好的方法是使用[工厂模式](http://www.oodesign.com/factory-pattern.html)。

```
public static SomeObject createObject(String externalString){
 //construct the object(Have your If-else here)
 return someObject;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:28:00.090

使用能够根据输入创建提供的对象的[工厂模式。](http://en.wikipedia.org/wiki/Factory_method_pattern)

# android - 在 android 上解析 application/smil MMS MIME 类型

> ID：11556633
> 
> 赞同：1
> 
> 时间：2012-07-19T08:15:45.697
> 
> 标签：android, sms, mime-types, mms

所以我遇到了三类彩信类型：

`Plain Text - "text/plain"`

`Image - "image/jpeg", "image/bmp", "image/gif", "image/jpg", "image/png"`

`SMIL (Synchronized Multimedia Integration Language) - "application/smil"`

因此，在 MMS 中获取属于前两类的数据时，我没有问题。但是我无法从消息类型的 MMS 中获取数据 `application/smil`

下面我列出`application/smil`了我从手机中提取的 5 个不同的彩信示例。

```
[31, 22, -1, application/smil, 123_1.smil, 106, null, null, <0000>, 0.smil, null, null, null, <smil>
  <head>
    <layout>
      <root-layout height="160" width="240"/>
      <region fit="meet" height="67%" id="Image" left="0%" top="0%" width="100%"/>
      <region fit="meet" height="33%" id="Text" left="0%" top="67%" width="100%"/>
    </layout>
  </head>
  <body>
    <par dur="8000ms">
      <img region="Image" src="cid:992"/>
    </par>
    <par dur="8000ms">
      <img region="Image" src="cid:993"/>
    </par>
  </body>
</smil>] 
```

.

```
[22, 14, -1, application/smil, null, null, null, null, <smil>, smil.xml, null, null, null, <smil>
  <head>
    <layout>
      <root-layout width="320px" height="480px"/>
      <region id="Image" left="0" top="0" width="320px" height="320px" fit="meet"/>
      <region id="Text" left="0" top="320" width="320px" height="160px" fit="meet"/>
    </layout>
  </head>
  <body>
    <par dur="5000ms">
      <img src="8555" region="Image"/>
      <text src="text_0.txt" region="Text"/>
    </par>
  </body>
</smil>] 
```

.

```
[13, 11, -1, application/smil, 123_1.smil, null, null, null, <0000>, null, null, null, null, <smil> 
  <head> 
    <layout> 
      <root-layout/>  
      <region fit="scroll" height="30%" id="Text" left="0%" top="70%" width="100%"/>  
      <region fit="meet" height="70%" id="Image" left="0%" top="0%" width="100%"/> 
    </layout> 
  </head>  
  <body> 
    <par dur="10000ms"> 
      <text region="Text" src="cid:928"/> 
    </par> 
  </body> 
</smil>] 
```

.

```
[16, 13, -1, application/smil, mms.smil, null, null, null, <AAAA>, AAAA, null, null, null, <smil>
    <head>
        <layout>
            <root-layout width="240" height="160"/>
            <region id="Image" width="100%" height="67%" left="0%" top="0%" fit="meet"/>
            <region id="Text" width="100%" height="33%" left="0%" top="67%" fit="meet"/>
        </layout>
    </head>
    <body>
    <par dur="8000ms"><text src="text__01.txt" region="Text"/></par></body>
</smil>] 
```

.

```
[5, 5, -1, application/smil, smil.smil, 106, null, null, <0000>, smil, null, null, null, <smil>
  <head>
    <layout>
      <root-layout height="160" width="240"/>
      <region fit="meet" height="67%" id="Image" left="0%" top="0%" width="100%"/>
      <region fit="meet" height="33%" id="Text" left="0%" top="67%" width="100%"/>
    </layout>
  </head>
  <body>
    <par dur="8000ms">
      <img region="Image" src="cid:351"/>
      <text region="Text" src="cid:352"/>
    </par>
  </body>
</smil>] 
```

你究竟是如何解析这种类型的彩信的？其他短信应用程序如何处理不同类型的彩信？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T03:44:27.920

所以问题是我正在创建一个`Cursor`这样的

```
Uri uri = Uri.parse("content://mms/part");
String[] projection = new String[] { "*" };
String selection = "_id = " + messageId;
Cursor cursor = mContentResolver.query(uri, projection, selection,null, null); 
```

问题是选择 arg 真的应该是

```
String selection = "mid = " + messageId; 
```

现在我的光标包含多个条目：

1.  一个条目将对应于 SMIL 文件。SMIL 是一种包含 xml 的文件格式，可帮助 MMS 查看器了解如何显示 MMS。如果您查看名为 ct 的列（内容类型的首字母缩写词），则此条目的 MIME 类型是 application/smil

2.  另一个条目将对应于包含该 MMS 中除附件之外的任何文本的文本文件。它的 MIME 类型将是 text/plain

3.  最后，您会发现另一个实际包含附件的条目。此附件可以有多种不同的 MIME 类型，具体取决于文件的内容。如果它碰巧是 jpeg，它将是 image/jpeg，如果是 png，它将是 image/png 等...

我要感谢@wnafee 在这篇文章[Android: what to do with application/smil MIME type](https://stackoverflow.com/questions/9492041/android-what-to-do-with-application-smil-mime-type)中指出这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T06:58:33.917

你可以从[这里](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.1_r2/com/android/mms/dom/smil/SmilPlayer.java?av=f)开始 它是安卓彩信查看器。支持 SMIL。我将此代码用于我当前的项目 SMIL player for android。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T23:36:24.747

w3 有一个很好的库来处理 SMIL。在这里查看[http://www.w3.org/TR/1999/WD-smil-boston-dom-19991115/java-binding.html](http://www.w3.org/TR/1999/WD-smil-boston-dom-19991115/java-binding.html)

# javascript - 如何调用阻止事件的默认行为？

> ID：11556635
> 
> 赞同：0
> 
> 时间：2012-07-19T08:15:49.137
> 
> 标签：javascript, jquery, events

好吧，我有类似的代码可以防止键盘上的“全选”动作：

```
$(document).keydown(function(e){
   // CTRL key
   if ( e.which == '17' || e.which == '224' ){
      window.isCtrlHold = true;
   }
   // A key
   // Prevent from select all from a page ( ctrl + a )
   if ( e.which == '65' && window.isCtrlHold ){
     e.preventDefault();
   }
}); 
```

从另一个地方调用的另一个脚本逃脱了阻止预览代码：

```
$('input').focus(function(){
   window.inSearch = true;
});
$(document).keydown(function(e){
   // A ( "ctrl + a" if focus within text input )
   if ( e.which == '65' && window.isCtrlHold && window.inSearch ){
     // some code that do defult action eg "e.doDefault();"
   }
}); 
```

最后，我需要防止“ctrl+a”（全选）而焦点不在 input[type=text] 内，如果焦点在输入内，则允许全选。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:20:19.830

我认为您以错误的方式处理此问题，只需将您的第一个代码更新为这样

```
$(document).keydown(function(e){
   // CTRL key
   if ( e.which == '17' || e.which == '224' ){
      var isCtrlHold = true; //(note 1)
   }
   // A key
   // Prevent from select all from a page ( ctrl + a )
   if ( e.which == '65' && isCtrlHold && window.inSearch){
     e.preventDefault();
   }
}); 
```

注意`&& window.inSearch`.

现在您可以删除此代码块

```
$(document).keydown(function(e){
   // A ( "ctrl + a" if focus within text input )
   if ( e.which == '65' && window.isCtrlHold && ! window.inSearch ){
     // some code that do defult action eg "e.doDefault();"
   }
}); 
```

**编辑：**我注意到您的代码中有更多错误

注意1：`isCtrlHold`不应该是全局的，因为单击 Ctrl （不按住）将使其`true`永远（页面的生命）。尝试点击控制（不按住），然后尝试键入`a`.

注意2：您还应该添加如下内容：

```
$('input').blur(function(){
   window.inSearch = false;
}); 
```

否则你的脚本会一直认为 serachbox 是焦点，即使它不是。

注意3：没有“对立面” `preventDefault();`，您要么阻止默认行为，要么不阻止。

# javascript - 简单的 dijit 小部件无法使用 AMD 编程进行初始化

> ID：11556639
> 
> 赞同：0
> 
> 时间：2012-07-19T08:16:02.963
> 
> 标签：javascript, dojo

我正在尝试使用 dojo 的新 AMD 功能完成简单的任务，但屏幕上没有错误，也没有显示结果......

我想重写 dojo 参考指南中提到的第一个程序示例 dijit.Tree：

```
<script type="text/javascript">
dojo.require("dojo.data.ItemFileReadStore");
dojo.require("dijit.Tree");

dojo.ready(function(){
  var store = new dojo.data.ItemFileReadStore({
      url: "{{dataUrl}}/dijit/tests/_data/countries.json"
  });

var treeModel = new dijit.tree.ForestStoreModel({
    store: store,
    query: {"type": "continent"},
    rootId: "root",
    rootLabel: "Continents",
    childrenAttrs: ["children"]
});

new dijit.Tree({
    model: treeModel
}, "treeOne");
});
</script> 
```

到 AMD 版本：

```
<!DOCTYPE  HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <title></title>
    <link rel="stylesheet" href="js/dojo/dijit/themes/claro/claro.css" />
    <script src="js/dojo/dojo/dojo.js" data-dojo-config="async: true"></script>
    <script language="JavaScript">
    var param = new Array(null,["dojo/dom","dijit/tree","dojo/data/ItemFileReadStore","dijit/tree/ForestStoreModel","dojo/domReady!"]);
    require(param[1],function(dom,dtree,ifrs,fsm)
    {
        var store = new ifrs({url: "js/countries.json"});           
        var treeModel = new fsm({store: store,query: {"type": "continent"},rootId: "root",rootLabel: "Continents",childrenAttrs: ["children"]});

        new dtree({model:treeModel},"treeOne");
    });         
    </script>
</head>
<body class="claro">
<div id="treeOne">      
</div>
</body> 
</html> 
```

Firebug 不会告诉我运行时错误，也不会告诉我缺少某些东西。页面只是保持空白。我做错了什么？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:13:10.823

主要问题是如何构建参数数组并且只使用数组中的第一个值。

还有，`dojo.ready`不一样`dojo/domReady!`

```
require(["dojo/dom", "dijit/tree", "dojo/data/ItemFileReadStore", 
  "dijit/tree/ForestStoreModel", "dojo/ready"],
function(dom, dtree, ifrs, fsm, ready) {     
  ready(function() {

    ...

  });
}); 
```

# ruby-on-rails-3 - 在确认电子邮件中设计密码

> ID：11556642
> 
> 赞同：0
> 
> 时间：2012-07-19T08:16:14.400
> 
> 标签：ruby-on-rails-3, email, devise, passwords

```
# in views/device/registration/new.html.erb:
<% password = Devise.friendly_token.first(8) %>

<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name, :locale => I18n.locale)) do |f| %>

 <%= f.hidden_field :password, :value => password %>
 <%= f.hidden_field :password_confirmation, :value => password %>

 <%= f.email_field :email %>

<%= f.submit "sign up" %>
<% end %>

# in views/device/mailer/confirmation_instructions.html.erb:
<p>Your Password: <%# @ressource.password %></p> 
```

我正在为新用户生成密码。用户会收到一封确认电子邮件，这应该是放置生成密码的正确位置。（确认后可以将密码发送给他）

但在电子邮件中@resource.password 为零！

如何在设备确认电子邮件中发送给定的密码？替代方法可能是将密码存储在数据库中而不加密，但我也没有成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T10:01:38.083

对于您提到的问题，这有点笨拙但可行。

```
# in views/device/mailer/confirmation_instructions.html.erb:
<% pass = Devise.friendly_token.first(8) %>
<p>Your password is <%= pass %></p>
<% @resource.update_attributes( { :password => pass, :password_confirmation => pass }) %> 
```

这样您就可以为您的用户设置密码并立即通过电子邮件发送给他们。您可以保持代码`views/device/registration/new.html.erb`不变，因为`user`如果您删除`password`和`password_confirmation`字段，创建将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T20:55:18.510

我对 Kulbir Saini 提出的解决方案有一些问题，因为以这种方式更新密码会导致一些设计回调来更改令牌，从而导致确认失败。

为了解决这个问题，我采用了 Kulbir 并修改了一些代码来更新密码，但避免了任何设计回调。

这可能不是最好的解决方案，但它可以解决问题。

```
<% pass = @resource.confirmation_token.first(8) %>
<p>Your password is: <%= pass %></p>
<% @resource.update_column(:encrypted_password, ::BCrypt::Password.create("#{pass}")) %> 
```

# javascript - 拖放拼写游戏风格

> ID：11556644
> 
> 赞同：1
> 
> 时间：2012-07-19T08:16:32.870
> 
> 标签：javascript, jquery, jquery-ui, drag-and-drop

我正在创建一个单词拼写，**拖放游戏**。当字母被拖到表格中的单词上时，会根据拼写的正确或错误触发样式。如果它是**正确**的，这个**词就会消失**，露出背后的画面。如果**错误**，字母会按照样式设置为**红色。**

我的问题是字母在整个游戏的其余部分都保持红色，这意味着后面的图像无法完成，因为它不允许你拼写发红的单词。我需要在下一个回合发生时采用这种风格，并允许您再次拼写该单词，有人可以帮我吗？

这是触发 CSS 的脚本...

```
$(".drop").droppable({ 

hoverClass: 'drophover',
drop: function(event, ui) {
    word = $(this).data('word');

    guesses[word].push($(ui.draggable).attr('data-letter'));

    console.log(guesses);

    if (guesses[word].length == 3) {
        if (guesses[word].join('') == word) {
            $('td[data-word=' + word + ']').addClass("wordglow2");

        } else {
            $('td[data-word=' + word + ']').addClass("wordglow");

        }
    }
}
}); 
```

这是这个的CSS...

```
.wordglow {
    -webkit-box-shadow: inset 20px 0px 10px 5px #ff0000;
    box-shadow: inset 0px 0px 10px 5px #ff0000;

}

.drop.wordglow2 {

    -webkit-box-shadow: inset 0px 0px 10px 5px #22ff22;
    box-shadow: inset 0px 0px 10px 5px #22ff22;
    visibility: hidden;
    opacity: 0;

} 
```

我已经尝试过这样做，以使错误的答案再次可以拼写..

```
$('td[data-word=' + word + ']').addClass("wordglow").removeAttr('disabled');; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:24:05.983

您可以删除`activate`活动中的课程。因此，当一个对象发红光时，当您再次开始将其拖动到下一个位置时，红色就会消失！

```
$(".drop").droppable({ 
    hoverClass: 'drophover',
    drop: function(event, ui) {
        word = $(this).data('word');

        guesses[word].push($(ui.draggable).attr('data-letter'));

        console.log(guesses);

        if (guesses[word].length == 3) {
            if (guesses[word].join('') == word) {
                $('td[data-word=' + word + ']').addClass("wordglow2");
            } else {
                $('td[data-word=' + word + ']').addClass("wordglow");
            }
        }
    },

    // this event is triggered when a draggable object is activated
    activate: function(event, ui) {
        word = $(this).data('word');

        // try to remove the class
        $('td[data-word=' + word + ']').removeClass('wordglow');
    }
}); 
```

# java - 如何在extjs中将图表数据导出为PDF？

> ID：11556645
> 
> 赞同：1
> 
> 时间：2012-07-19T08:16:36.230
> 
> 标签：java, extjs

我尝试从数据库中导出图表数据，但不知道如何导出 PDF。有什么建议用于通过使用现有的 extjs 信息将图表数据导出到 PDF 文件？紧迫的..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:30:06.630

通常，您需要您的服务器来协助完成此操作。你使用什么样的服务器？

否则，您可以尝试[https://github.com/mozilla/pdf.js](https://github.com/mozilla/pdf.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:07:35.867

我不认为 extjs 有任何内置的东西来创建 pdf。因此，您要么需要在服务器上创建它，要么可以使用客户端 js 库来生成 pdf（例如[http://code.google.com/p/jspdf/](http://code.google.com/p/jspdf/)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T00:33:35.913

我正在对此进行研究，我认为您首先必须将图表转换为图片，然后使用 PDF 生成器库并将此图片包含在其中。要将图表转换为图片： [http ://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/charts/Area.js](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/charts/Area.js)

如果您在服务器端使用它，要在 c# 上生成 PDF，它可以是 pdfsharp 或 itext

# svn - Subversion：如何合并特定的提交

> ID：11556646
> 
> 赞同：48
> 
> 时间：2012-07-19T08:16:37.537
> 
> 标签：svn, merge

我的分支上有一些承诺。我想将分支合并到主干，但是有一些提交我没有合并到我的分支上的主干。我该怎么办？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-19T08:45:25.380

您想要完成的通常称为版本控制系统中的*挑选。*

假设您要将修订版 345、364 和 377 从您的分支合并到主干，您将在干净工作副本的顶级目录中执行以下操作`trunk`：

```
svn merge -c345,364,377 ^/_your_branch_ 
```

在 Windows 上`cmd`，在分支名称周围添加引号：

```
svn merge -c345,364,377 "^/_your_branch_" 
```

您可以在 SVN Book 的相应[部分](http://svnbook.red-bean.com/en/1.8/svn.branchmerge.advanced.html#svn.branchmerge.cherrypicking)找到更多信息。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2015-03-12T08:30:48.793

只是为了扩展Yannick的答案。
当您可以将一个/几个特定提交从一个分支合并到您需要的另一个分支时（例如，需要将分支 r13 和 r666 从分支“*从*”合并到分​​支“*到*”）：

1.  检查提交可用性（只是为了确保）：

    ```
    svn diff -c 13,666 https://fullpathtoyourproject/branches/_from_ 
    ```

2.  在分支上切换*到*：

    ```
    svn sw https://fullpathtoyourproject/branches/_to_ 
    ```

3.  合并提交

    ```
    svn merge -c 13,666 https://fullpathtoyourproject/branches/_from_ 
    ```

如果您需要获取“fullpathtoyourproject”，只需输入：

```
svn info 
```

在 URL 部分中，您将看到此路径。

我更喜欢使用完整的 url/路径，因为个人相对路径在某些项目中对我不起作用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-02-14T09:29:13.687

如果一个人安装了 TortoiseSVN，以下是将一系列修订从一个分支合并到另一个的步骤。

1.  对要合并来自源分支的一系列修订的分支进行本地签出。
2.  在根文件夹中右键单击 --> TortoiseSVN --> 合并
3.  默认情况下，单击“合并一系列修订”。
4.  点击下一步
5.  输入要合并的 URL
6.  输入要合并的特定修订范围
7.  也可以单击显示日志并选择所需的修订或修订范围
8.  单击测试合并以检查它是否合并所需的修订/文件。
9.  点击合并

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2012-07-24T09:13:14.307

您可以将所需的提交与修订号合并。

# java - 了解在 Java 中创建非静态成员类，如 Effective Java 书中所述

> ID：11556649
> 
> 赞同：1
> 
> 时间：2012-07-19T08:16:48.210
> 
> 标签：java, effective-java

以下来自有效的Java：

> 非静态成员类实例与其封闭实例之间的关联是在创建前者时建立的；之后无法修改。通常，通过从封闭类的实例方法中调用非静态成员类构造函数来自动建立关联。虽然很少见，但可以使用表达式 enclosingInstance.new MemberClass(args) 手动建立关联。如您所料，关联占用了非静态成员类实例中的空间并增加了构建时间。

Bloch 在这里所说的“虽然很少见，但可以使用表达式 enclosureInstance.new MemberClass(args) 手动建立关联。正如您所期望的那样，关联占用了非静态成员类实例中的空间并增加了时间它的构造。” ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T08:24:47.657

他的意思是你至少可以通过两种方式建立联系。给定

```
public class Outer {
    public class Inner {
    }
    void f() {System.out.println(new Inner());}
}
Outer x = new Outer(); 
```

如果你打电话

```
x.f() 
```

那么您打印的值是链接到的内部对象`x`。

但也可以调用：

```
x.new Inner(); 
```

创建一个新的内部对象`x`也链接到。

布洛赫说第二种方式很少见。我不知道为什么；我过去曾使用过它。

观看[现场演示](http://ideone.com/8dKYZ)

```
class Outer {
    String name;
    public Outer(String name) {
        this.name = name;
    }

    public class Inner {
        public String toString() {
            return "I belong to " + Outer.this.name;
        }
    }

    void f() {
        System.out.println(new Inner());
    }

    void g(Outer a) { 
        System.out.println(a.new Inner());
    }
}

class Main {
    public static void main(String[] args) {
        Outer x = new Outer("x");
        Outer y = new Outer("y");
        x.f();
        x.g(y);      
    }
} 
```

输出：

```
I belong to x
I belong to y 
```

# shell - Unix for循环跳过脚本中的一个值，在命令行中正常工作

> ID：11556656
> 
> 赞同：3
> 
> 时间：2012-07-19T08:17:20.423
> 
> 标签：shell, unix, ksh

我在命令行中运行以下命令：

```
for DATAFILE in `find dir_name -type f -mtime +10 | egrep -v -e 'archive/'`
do
    echo 'Data file name- ' "$DATAFILE"
    echo 'Base name ' 
    BASENAME=`basename "${DATAFILE}"`
    DESTFILE="${BASENAME}"_`date +"%Y%m%d%H%M%S"`
    echo "Dest file - "$DESTFILE
done 
```

为此，我得到以下结果：

```
Data file name-  DIR_PATH_1/file_1.txt
Base name
Dest file - file_1.txt_20120719041239
Data file name-  DIR_PATH_2/file_2.txt
Base name
Dest file - file_2.txt_20120719041239 
```

当我将相同的命令放入 shell 脚本并执行时，我得到以下结果：

```
Data file name-  DIR_PATH_1/file_1.txt
DIR_PATH_2/file_2.txt
Base name
Dest file - file_2.txt_20120719040956 
```

我已经检查了 Control-M 和其他垃圾字符的脚本。另外，我在 shell 脚本中没有任何额外的步骤（没有参数和全部）。

有人可以指出我正确的方向。

谢谢。

**更新1：**

我对循环进行了以下更改：

早些时候：

```
for DATAFILE in `find ${ROOT_DIR} -type f -mtime +$DAYS_ARCH | 
                     egrep -v -e 'archive/'` 
```

现在：

```
find ${ROOT_DIR} -type f -mtime +$DAYS_ARCH |
     egrep -v -e 'archive/' | while read DATAFILE 
```

它现在似乎工作正常。我仍在测试以确认这一点。

**更新 2：**

从 FOR 更改为 WHILE 循环已解决此问题。但我仍然无法理解为什么会这样。任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:40:29.030

添加到您的脚本：

```
echo "My shell is: " $0
echo "My IFS is:" $IFS 
```

并将其与交互式 shell 的结果进行比较。

[通过添加hashbang](http://en.wikipedia.org/wiki/Hashbang)行，确保您的脚本由您想要的脚本执行。

根据[man sh](http://manpages.ubuntu.com/manpages/precise/en/man1/sh.1.html)， IFS 定义为：

> 输入字段分隔符。这通常设置为⟨space⟩、⟨tab⟩和⟨newline⟩。有关更多详细信息，请参阅空白分割部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T00:04:45.983

`find`在反引号中捕获输出将有效地连接所有行。这将破坏带有嵌入空格的文件名。

对于 DATAFILE 在`find ${ROOT_DIR} -type f -mtime +$DAYS_ARCH | egrep -v -e 'archive/'`

循环一次将`while read ...` 只读取一个路径名，即使它们包含空格或其他特殊字符。

# r - 将每小时降雨数据转换为特定时间间隔内的每日降雨数据

> ID：11556662
> 
> 赞同：4
> 
> 时间：2012-07-19T08:17:39.517
> 
> 标签：r, time-series

我有很长一段时间的每小时降雨量和温度数据。我想从每小时数据中获取每日价值。我正在考虑从 07:00:00 到第二天 07:00:00 的日期。

您能告诉我如何在特定时间间隔之间将每小时数据转换为每天吗？

示例：`07:00:00 to 07:00:00`或`12:00:00 to 12:00:00`）

降雨数据如下：

```
1970-01-05 00:00:00      1.0 
1970-01-05 01:00:00      1.0
1970-01-05 02:00:00      1.0
1970-01-05 03:00:00      1.0
1970-01-05 04:00:00      1.0
1970-01-05 05:00:00      3.6
1970-01-05 06:00:00      3.6
1970-01-05 07:00:00      2.2
1970-01-05 08:00:00      2.2
1970-01-05 09:00:00      2.2
1970-01-05 10:00:00      2.2
1970-01-05 11:00:00      2.2
1970-01-05 12:00:00      2.2
1970-01-05 13:00:00      2.2
1970-01-05 14:00:00      2.2
1970-01-05 15:00:00      2.2
1970-01-05 16:00:00      0.0
1970-01-05 17:00:00      0.0
1970-01-05 18:00:00      0.0
1970-01-05 19:00:00      0.0
1970-01-05 20:00:00      0.0
1970-01-05 21:00:00      0.0
1970-01-05 22:00:00      0.0
1970-01-05 23:00:00      0.0
1970-01-06 00:00:00      0.0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T08:51:04.017

首先，创建一些可重现的数据，以便我们更好地帮助您：

```
require(xts)
set.seed(1)
X = data.frame(When = as.Date(seq(from = ISOdatetime(2012, 01, 01, 00, 00, 00),
                                  length.out = 100, by="1 hour")),
               Measurements = sample(1:20, 100, replace=TRUE)) 
```

我们现在有一个包含 100 个每小时观察的数据框，其中日期开始`2012-01-01 00:00:00`和结束于`2012-01-05 03:00:00`（时间为 24 小时格式）。

其次，将其转换为 XTS 对象。

```
X2 = xts(X$Measurements, order.by=X$When) 
```

第三，学习如何对特定时间窗口进行子集化。

```
X2['T04:00/T08:00']
#                     [,1]
# 2012-01-01 04:00:00    5
# 2012-01-01 05:00:00   18
# 2012-01-01 06:00:00   19
# 2012-01-01 07:00:00   14
# 2012-01-01 08:00:00   13
# 2012-01-02 04:00:00   18
# 2012-01-02 05:00:00    7
# 2012-01-02 06:00:00   10
# 2012-01-02 07:00:00   12
# 2012-01-02 08:00:00   10
# 2012-01-03 04:00:00    9
# 2012-01-03 05:00:00    5
# 2012-01-03 06:00:00    2
# 2012-01-03 07:00:00    2
# 2012-01-03 08:00:00    7
# 2012-01-04 04:00:00   18
# 2012-01-04 05:00:00    8
# 2012-01-04 06:00:00   16
# 2012-01-04 07:00:00   20
# 2012-01-04 08:00:00    9 
```

第四，将该信息与`apply.daily`您想要的任何功能一起使用，如下所示：

```
apply.daily(X2['T04:00/T08:00'], mean)
#                     [,1]
# 2012-01-01 08:00:00 13.8
# 2012-01-02 08:00:00 11.4
# 2012-01-03 08:00:00  5.0
# 2012-01-04 08:00:00 14.2 
```

# 更新：自定义端点

重新阅读您的问题后，我发现我误解了您想要的内容。

您似乎想取 24 小时的平均值，不一定是从午夜到午夜。

为此，您应该放弃`apply.daily`，而是使用`period.apply`custom `endpoint`，如下所示：

```
# You want to start at 7AM. Find out which record is the first one at 7AM.
A = which(as.character(index(X2)) == "2012-01-01 07:00:00")

# Use that to create your endpoints. 
# The ends of the endpoints should start at 0 
# and end at the max number of records.
ep = c(0, seq(A, 100, by=24), 100)
period.apply(X2, INDEX=ep, FUN=function(x) mean(x))
#                         [,1]
# 2012-01-01 07:00:00 12.62500
# 2012-01-02 07:00:00 10.08333
# 2012-01-03 07:00:00 10.79167
# 2012-01-04 07:00:00 11.54167
# 2012-01-05 03:00:00 10.25000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T08:45:52.470

您可以使用以下代码：

```
fun <- function(s,i,j) { sum(s[i:(i+j-1)]) }
sapply(X=seq(1,24*nb_of_days,24),FUN=fun,s=your_time_serie,j=24) 
```

您只需将 1 更改为另一个值即可获得不同的时间间隔：8 of `07:00:00 to 07:00:00`or 13 for`12:00:00 to 12:00:00`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T08:41:45.823

第 1 步：将日期转换为 POSIXct

```
ttt <- as.POSIXct("1970-01-05 08:00:00",tz="GMT")
ttt
#"1970-01-05 08:00:00 GMT" 
```

第 2 步：减去 7 小时的 difftime

```
ttt <- ttt-as.difftime(7,units="hours")
ttt
#"1970-01-05 01:00:00 GMT" 
```

第 3 步：截断为天

```
ttt<-trunc(ttt,"days")
ttt
#"1970-01-05 GMT" 
```

第 4 步：使用 plyr、data.table 或任何您喜欢的方法，计算每日均值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T08:25:51.890

使用[正则表达式](http://en.wikibooks.org/wiki/R_Programming/Text_Processing#Regular_Expressions)应该可以满足您的需求。选择符合您需要的行并对值求和。在你的小时范围内的每一天都这样做，你就做好了。

# c# - C# 异步套接字和 C++ winsock2 之间的通信

> ID：11556663
> 
> 赞同：-1
> 
> 时间：2012-07-19T08:17:40.177
> 
> 标签：c#, c++, sockets

我正在尝试使用 sendfile C# 异步套接字（作为服务器）的功能并在 C++ 本机代码客户端接收此文件。当我使用它从我的 C# 服务器更新客户端的文件时，由于要求，不能使用 webServices。这是我用来发送文件的

```
IPHostEntry ipHost = Dns.GetHostEntry(Dns.GetHostName());
IPAddress  ipAddr = ipHost.AddressList[0];
IPEndPoint ipEndPoint = new IPEndPoint(ipAddr, 11000);

// Create a TCP socket.
Socket client = new Socket(AddressFamily.InterNetwork,
        SocketType.Stream, ProtocolType.Tcp);

// Connect the socket to the remote endpoint.
client.Connect(ipEndPoint);

// There is a text file test.txt located in the root directory.
string fileName = "C:\\test.txt";

// Send file fileName to remote device
Console.WriteLine("Sending {0} to the host.", fileName);
client.SendFile(fileName);

// Release the socket.
client.Shutdown(SocketShutdown.Both);
client.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:23:52.587

还有……你的问题到底是什么？

我对 c# 不太擅长，但是在 c++ 上，您可以实例化一个线程，该线程永远使用 select 侦听传入数据（也使其成为“异步”），然后以同步方法处理它（必要时使用 CriticalSection ）。

只是为了澄清这一点，这是服务器/客户端通信的一般工作方法。

服务器：实例化 Socket，将自身绑定到端口并监听传入的连接。当连接进来时，执行握手并将新客户端添加到客户端集合中。响应传入请求/向所有客户端发送定期更新

客户端：实例化套接字，使用'connect'连接到服务器并开始根据协议进行通信。

编辑：只是为了确保，这不是一个沟通不畅的小问题，你的意思是如何在客户端保存文件？

您可能想要使用此代码：（假设您在线程中使用 select）

```
fd_set fds;             //Watchlist for Sockets
int RecvBytes;
char buf[1024];
FILE *fp = fopen("FileGoesHere", "wb");
while(true) {
    FD_ZERO(&fds);      //Reinitializes the Watchlist
    FD_SET(sock, &fds); //Adds the connected socket to the watchlist
    select(sock + 1, &fds, NULL, NULL, NULL);    //Blocks, until traffic is detected
    //Only one socket is in the list, so checking with 'FD_ISSET' is unnecessary
    RecvBytes = recv(sock, buf, 1024, 0);  //Receives up to 1024 Bytes into 'buf'
    if(RecvBytes == 0) break;   //Connection severed, ending the loop.
    fwrite(buf, RecvBytes, fp); //Writes the received bytes into a file
}
fclose(fp);                     //Closes the file, transmission complete. 
```

# jquery - jQuery - 动画可折叠 DIV，向上滑动？

> ID：11556667
> 
> 赞同：3
> 
> 时间：2012-07-19T08:18:04.230
> 
> 标签：jquery, html

当用户单击按钮时，我正在使用此 jQuery 脚本为 div 设置动画以打开/关闭： [http ://www.dynamicdrive.com/dynamicindex17/animatedcollapse.htm](http://www.dynamicdrive.com/dynamicindex17/animatedcollapse.htm)

有没有办法让它向上滑动，而不是向下滑动？

我的意思是：不是 DIV 向下打开（扩展其下方的区域），它是否可以扩展其顶部的内容，使其不会向下扩展？

Blarh，我发现很难描述。

例子：

```
Before:
1###TOP OF PAGE###
2#################
3#################
4#################
5#################
6######BUTTON#####
7###HIDDEN DIV####
8##BOTTOM OF PAGE#

After:
1###TOP OF PAGE###
2#################
3######BUTTON#####
4#####OPEN DIV####
5####CONTENT######
6####CONTENT######
7####CONTENT######
8##BOTTOM OF PAGE#

Instead of like this, as default:
1###TOP OF PAGE###
2#################
3#################
4#################
5#################
6######BUTTON#####
7#####OPEN DIV####
8####CONTENT######
9####CONTENT######
10###CONTENT######
11#BOTTOM OF PAGE# 
```

抱歉我的蹩脚解释，但我希望你能理解：P

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T08:22:09.053

您可以使用[JQuery slideUp](http://api.jquery.com/slideUp/)隐藏元素或[JQuery slideDown](http://api.jquery.com/slideDown/)显示元素
也可以使用[JQuery slideToggle](http://api.jquery.com/slideToggle/)切换元素

这是一个[例子](http://jsfiddle.net/kYyAA/5/)

# c# - .ics 文件以在打开附加到的电子邮件时自动保存到 Outlook 日历

> ID：11556672
> 
> 赞同：2
> 
> 时间：2012-07-19T08:18:09.323
> 
> 标签：c#, email, calendar, outlook, icalendar

我只是想知道是否有人找到或知道一种方法来获取 .ics 文件以在未使用`Microsoft.Office.Interop.Outlook;`参考打开附加到的电子邮件时自动保存到 Outlook 日历。我不想使用 Outlook 约会对象的原因是因为我相信如果 Outlook 尚未运行，它可能会导致问题。

我在字符串生成器中创建 .ics 文件并将其附加到邮件消息中，但无法找到在打开电子邮件时将其保存到日历的方法。

我基本上在寻找一种不同的方式来获得相同的效果`Appointment.Save();`

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T03:40:40.143

Hiky，它不能（也不应该）完成。正如安德烈亚斯指出的那样，这将被不道德的人直接滥用。

如果这是针对选定的目标受众，那么处理它的方法可能是为各种流行设备提供有关如何“订阅”日历提要的说明（不导入，因为存在差异**）**

导入日历

导入 ics 文件意味着导入日历文件中定义的事件。没有同步或更新。可以将一组事件导入现有日历。

订阅日历

订阅意味着告诉日历应用程序日历的 url。然后它将定期获取日历，检查更新。日历必须公开可用，在 Google 的情况下，必须有一个 robots.txt 文件允许 google bot 访问。通常这会在一个人的日历应用程序中显示为一个单独的日历，允许一个人“单击”关闭或打开日历。

# alchemy - 炼金术链接错误：“java.lang.OutOfMemoryError：Java 堆空间”

> ID：11556673
> 
> 赞同：0
> 
> 时间：2012-07-19T08:18:10.283
> 
> 标签：alchemy

我尝试使用 Adob​​e Alchemy 编译的 C++ 代码进行 swc。一开始它工作得很好，但是当我添加更多的 c++ 代码时，不幸的是，让它链接最终会产生链接时错误：

```
 Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
at java.util.Arrays.copyOfRange(Arrays.java:3209)
at java.lang.String.<init>(String.java:215)
at java.lang.StringBuilder.toString(StringBuilder.java:430)
at macromedia.asc.parser.Scanner.nexttoken(Scanner.java:657)
at macromedia.asc.parser.Parser.getNextToken(Parser.java:673)
at macromedia.asc.parser.Parser.lookahead(Parser.java:631)
at macromedia.asc.parser.Parser.match(Parser.java:434)
at macromedia.asc.parser.Parser.parseAsmDirective(Parser.java:5128)
at macromedia.asc.parser.Parser.parseAsmStatementOrExpr(Parser.java:4949)
at macromedia.asc.parser.Parser.parseAsmStatement(Parser.java:4927)
at macromedia.asc.parser.Parser.parseStatement(Parser.java:4211)
at macromedia.asc.parser.Parser.parseAnnotatedDirectiveOrStatement(Parser.java:5645)
at macromedia.asc.parser.Parser.parseDirective(Parser.java:5594)
at macromedia.asc.parser.Parser.parseDirectives(Parser.java:5985)
at macromedia.asc.parser.Parser.parseBlock(Parser.java:4411)
at macromedia.asc.parser.Parser.parseBlock(Parser.java:4397)
at macromedia.asc.parser.Parser.parseFunctionCommon(Parser.java:1631)
at macromedia.asc.parser.Parser.parseFunctionDefinition(Parser.java:6898)
at macromedia.asc.parser.Parser.parseAnnotatableDirectiveOrPragmaOrInclude(Parser.java:5916)
at macromedia.asc.parser.Parser.parseAnnotatedDirectiveOrStatement(Parser.java:5712)
at macromedia.asc.parser.Parser.parseDirective(Parser.java:5594)
at macromedia.asc.parser.Parser.parseDirectives(Parser.java:5985)
at macromedia.asc.parser.Parser.parseBlock(Parser.java:4411)
at macromedia.asc.parser.Parser.parseBlock(Parser.java:4397)
at macromedia.asc.parser.Parser.parseClassDefinition(Parser.java:7542)
at macromedia.asc.parser.Parser.parseAnnotatableDirectiveOrPragmaOrInclude(Parser.java:5920)
at macromedia.asc.parser.Parser.parseAnnotatedDirectiveOrStatement(Parser.java:5712)
at macromedia.asc.parser.Parser.parseDirective(Parser.java:5594)
at macromedia.asc.parser.Parser.parseDirectives(Parser.java:5985)
at macromedia.asc.parser.Parser.parseBlock(Parser.java:4411)
at macromedia.asc.parser.Parser.parseBlock(Parser.java:4397)
at macromedia.asc.parser.Parser.parsePackageDefinition(Parser.java:8053) 
```

“Java堆空间”意味着Java堆空间不够，它需要设置像“java -Xms128M -Xmx512M -jar ..”这样的jave选项，但我找不到在炼金术中设置选项的位置。

请帮助我，在此先感谢。

奥德曼特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T15:41:25.427

一些事情要尝试：

*   不要使用调试标志（`-g`和朋友）进行编译。这会导致它生成大量额外代码，并经常导致它耗尽内存。
*   增加堆空间 arg ( `$jmemmax`) in `$ALCHEMY_HOME/achacks/gcc`。

# c# - Windows 8 xml 文件写入

> ID：11556676
> 
> 赞同：0
> 
> 时间：2012-07-19T08:18:12.827
> 
> 标签：c#, xml, exception, windows-8

我在写入放置在我的应用程序文件夹（Windows 8，metro 风格）中的 xml 文件时遇到问题。当我尝试以读/写模式打开文件时，我得到了 Unauthorized AccessException。我做了很多研究，但仍然一无所获。我试过这个解决方案：

```
var sf = await Package.Current.InstalledLocation.GetFileAsync(@"data.xml");
        XmlDocument xmlDoc;
        using (var stream = await sf.OpenAsync(FileAccessMode.ReadWrite))
        {
            xmlDoc = await XmlDocument.LoadFromFileAsync(sf);
            XmlElement root = xmlDoc.DocumentElement;
            XmlElement xe = xmlDoc.CreateElement("debt");

            XmlElement id = xmlDoc.CreateElement("Id");
            id.InnerText = Guid.NewGuid().ToString();

            XmlElement name = xmlDoc.CreateElement("Name");
            name.InnerText = d.Name;

            XmlElement surname = xmlDoc.CreateElement("Surname");
            surname.InnerText = d.Surname;

            xe.AppendChild(id);
            xe.AppendChild(name);
            xe.AppendChild(surname);

            root.AppendChild(xe);
        }
        if (xmlDoc != null)
            await xmlDoc.SaveToFileAsync(sf); 
```

但是在我打开流的地方再次发生异常。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:52:53.103

Package.Current.InstalledLocation.GetFileAsync 表示应用程序的安装位置，这是您无法直接写入文件的区域。使用以下

Windows.ApplicationModel.Package.Current.InstalledLocation

或者

Windows.Storage.ApplicationData.Current.LocalFolder.Path

我正在使用前者，它工作正常，请参阅[http://metrorssreader.codeplex.com/SourceControl/changeset/view/18082#263004](http://metrorssreader.codeplex.com/SourceControl/changeset/view/18082#263004)

# asp.net - 如何在gridview中选择单选按钮取决于数据集的返回值？

> ID：11556678
> 
> 赞同：0
> 
> 时间：2012-07-19T08:18:15.907
> 
> 标签：asp.net, gridview, dataset, radiobuttonlist

我有使用gridview 的Web 应用程序。在gridview中我使用了单选按钮列表这个单选按钮列表有两个项目。我想从这两个项目`Yes`中`No`选择一个项目取决于我在绑定时从数据集中获得的值。假设我的列名是`is_selected`并且它返回然后应该检查`True`单选按钮列表`Yes`. 这是我自己尝试过但没有成功的代码，

```
 <asp:TemplateField HeaderText="Ready To Join?" ItemStyle-HorizontalAlign="Center">
                        <ItemTemplate>

                   <asp:RadioButtonList ID="rbd_join" AutoPostBack="true" runat="server" 
                            RepeatDirection="Horizontal" BorderStyle="None" BorderWidth="0px" BorderColor="Transparent"
                            onselectedindexchanged="rbd_join_SelectedIndexChanged" 
                            DataValueField="is_selected">
                        <asp:ListItem Text="Yes" Value="1" ></asp:ListItem>
                        <asp:ListItem Text="No" Value="0"></asp:ListItem>
                        </asp:RadioButtonList>
                        </ItemTemplate>

<ItemStyle HorizontalAlign="Center"></ItemStyle>
                    </asp:TemplateField> 
```

**编辑后**

**添加**

按钮单击事件上的 .cs 文件，这是代码：

```
Dataset  ds=new Dataset();
ds=bindgrid();
if(ds.table[0].rows.count>0)
{
    grd_view.Datasource=ds.tables[0];
    grd_view.Databind();
}
public Dataset bindgrid()
{
    SqlParameter stud_ID = new SqlParameter("@student_id", SqlDbType.Int);
                stud_ID.Value = 1;
                SqlCommand cmdSql = new SqlCommand();
                cmdSql.CommandType = CommandType.StoredProcedure;
                cmdSql.CommandText = "usp_select_candidate_inplacement_byAdmin";
                cmdSql.Parameters.Add(stud_ID);
                DataSet ds = new DataSet();
                DataClass dl = new DataClass();
                ds = dl.dsSelect(cmdSql);
                return ds;
} 
```

这是我添加的事件

```
protected void grd_view_RowDataBound(object sender, GridViewRowEventArgs e)
{
  if (e.Row.RowType == DataControlRowType.DataRow)
            {
                var radioList = e.Row.FindControl("rbd_join") as RadioButtonList;
                var myobject = e.Row.DataItem as DataRow;
                bool is_sel = bool.Parse(myobject ["is_selected"].ToString());

                radioList.SelectedValue = is_sel ? "1" : "0";

            }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:26:55.210

您需要使用该`RowDataBound`事件：

## ASPX

```
<asp:GridView ..... OnRowDataBound="gv_RowDataBound" 
```

## 背后的代码

```
protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        var radioList = e.Row.FindControl("rbd_join") as RadioButtonList;

        // this will be the object that you are binding to the grid
        var myObject = e.Row.DataItem as DataRowView;
        bool isSelected = bool.Parse(myObject["is_selected"].ToString());

        radioList.SelectedValue = isSelected ? "1" : "0";
    }
} 
```

# android - 添加 PullToRefreshListView 并使用 ProGuard 打包后出现 ClassNotFoundException

> ID：11556680
> 
> 赞同：0
> 
> 时间：2012-07-19T08:18:19.897
> 
> 标签：android, proguard, classnotfoundexception

我将 PullToRefreshListView.java 源代码添加到我的包中。该应用程序在我使用 progard.cfg 打包之前运行良好，但在该操作之后出现错误。

它现在抛出`ClassNotFoundException`错误。

> 07-19 15:09:14.776: E/AndroidRuntime(585): 引起: java.lang.ClassNotFoundException: com.xx.xxx.widget.PullToRefreshListView

这发生在我更新我的 ADT 之后（这个 ADT 可以在 XML 文件中发送警告信息）。更新前很顺利。我也尝试更新 Android SDK，但仍然无法正常工作。

我尝试在 XML 文件中添加此 PullToRefreshListView 小部件，如下所示：

```
<com.xx.xxx.widget.PullToRefreshListView
    android:id="@+id/contentFlowList"
    style="@style/pull_refresh_listview_style"
    android:listSelector="@android:color/transparent" >
</com.xx.xxx.widget.PullToRefreshListView> 
```

ADT version20.0.1 的要求在[这里](http://developer.android.com/tools/sdk/eclipse-adt.html)。我检查了环境没有任何问题。

我可以直接成功运行应用程序，但是在我混淆代码并打包后跳转到包含 PullToRefreshListView 的 Activity 时会发生崩溃。

我怎么解决这个问题？

# c# - C#中的内存不足异常

> ID：11556683
> 
> 赞同：5
> 
> 时间：2012-07-19T08:18:31.090
> 
> 标签：c#, out-of-memory

我是 C# 的新手。因此，我不太确定我的程序有什么问题。该程序适用于小图像，但当它适用于大约 A4 大小的大图像时，它会显示“内存不足异常”。但是，如果不能处理大图像，该程序将毫无用处。我该如何解决这个问题？感谢。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Drawing;
using System.Drawing.Drawing2D;
using System.Drawing.Imaging;

namespace ConsoleApplication6
{
    class Program
    {
        static void Main(string[] args)
        {
            //Bitmap objects

            //input image
            Bitmap bmOrg = (Bitmap)Bitmap.FromFile(@"C:\B.png");  
            Bitmap bmTransparentLayover = new Bitmap(bmOrg.Width, bmOrg.Height);

            //Create Graphic Objects.
            Graphics gOriginal = Graphics.FromImage(bmOrg);
            Graphics gTransparentLayover = Graphics.FromImage(bmTransparentLayover);

            //Set Transparent Graphics back ground to an "odd" color 
            //     that hopefully won't be used to
            //Be changed to transparent later.
            gTransparentLayover.FillRectangle
                                ( Brushes.Pink, 
                                  new Rectangle
                                  (0, 
                                   0, 
                                   bmTransparentLayover.Width, 
                                   bmTransparentLayover.Height
                                  )
                                );

            //Draw "transparent" graphics that will look through 
            //  the overlay onto the original.
            //Using LimeGreen in hopes that it's not used.

            Point[] points = new Point[5];
            points[0] = new Point(130, 140);
            points[1] = new Point(130, 370);
            points[2] = new Point(420, 370);
            points[3] = new Point(420, 140);
            points[4] = new Point(130, 140);
            System.Drawing.Drawing2D.GraphicsPath gp = new
            System.Drawing.Drawing2D.GraphicsPath();
            gp.AddPolygon(points);
            gTransparentLayover.FillPath(Brushes.LimeGreen, gp);

            //Now make the LimeGreen Transparent to see through overlay.
            bmTransparentLayover.MakeTransparent(Color.LimeGreen);

            //draw the overlay on top of the original.
            gOriginal.DrawImage(bmTransparentLayover, 
             new Rectangle(0, 0, bmTransparentLayover.Width, bmTransparentLayover.Height));

            //Create new image to make the overlays background tranparent
            Bitmap bm3 = new Bitmap(bmOrg);
            bm3.MakeTransparent(Color.Pink);

            //Save file.
            //to save the output image 
            bm3.Save(@"save.png",System.Drawing.Imaging.ImageFormat.Png);  

            Image img = new Bitmap(480, 480);

            //the background image 
            img = Image.FromFile(@"a.png");  
            Graphics g = Graphics.FromImage(img);

            //to save the combined image 
            g.DrawImage(Image.FromFile(@"save.png"), new Point(-50, -70));
            img.Save(@"final.png", ImageFormat.Png); 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T10:36:34.493

> 这是一张 9992x8750 的图片

是的，您处于 32 位进程的危险区域。该图像需要一大块连续的地址空间，334 兆字节。当您在程序启动后尽早加载图像时，您会很容易地得到它。那时你可以获得大约 650 兆字节，给予或接受。

但是当你的程序分配和释放内存并加载几个程序集时，这会从那里走下坡路。地址空间变得碎片化，分配之间的漏洞越来越小。仅仅用一个笨拙的基地址加载一个 DLL 就可以突然将最大的洞减少两倍以上。问题不在于可用的虚拟内存总量，它可以是千兆字节或更多，而是最大可用块的大小。一段时间后，90 兆字节的分配失败并不完全不寻常。只是*一个*分配可能会失败，您仍然可以分配一堆，比如说，50 兆字节的块。

地址空间碎片无法治愈，您无法修复 Bitmap 类存储像素数据的方式。但是，将 64 位版本的 Windows 指定为您的程序的要求。它提供大量虚拟内存，碎片不是问题。如果您想追查它，那么您可以使用 SysInternals 的[VMMap 实用程序](http://technet.microsoft.com/en-us/sysinternals/dd535533.aspx)深入了解 VM 布局。当心您可能遇到的信息过载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:39:03.630

我怀疑您的主要问题是您同时使用了许多位图和图形实例。

可能值得尝试重新组织您的代码，以便在任何时候尽可能少地出现这些代码，使用 .Dispose() 删除您已完成的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:21:12.430

尝试在 Windows 64 位上工作，这是大多数内存问题的解决方案。

# android - 选项卡活动中的 onActivityResult 问题

> ID：11556684
> 
> 赞同：3
> 
> 时间：2012-07-19T08:18:41.640
> 
> 标签：android

我正在开发一个使用 tabHost 的应用程序。在这 5 个选项卡中，每个选项卡都可以打开多个活动。我的问题是，在最后一个选项卡（第 5 个选项卡）中，我执行了相机捕获功能，因此它打开相机并捕获图像，但在调用 onActivityResult 之前它调用第一个选项卡（第一个选项卡），然后调用最后一个选项卡的 onActivityResult。但我不知道为什么会这样？

我的代码在这里：

为了创建多个活动，我使用这个：[http ://ericharlow.blogspot.in/2010/09/experience-multiple-android-activities.html](http://ericharlow.blogspot.in/2010/09/experience-multiple-android-activities.html)

标签页：

```
public class TabPage extends TabActivity {

    Resources res;
    public static TabHost tabHost;
    TabSpec obj, obj1;
    Intent intent;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);     
        tabHost = getTabHost();
        res = getResources();

        obj1 = tabHost.newTabSpec("tab1");
        tabHost.addTab(obj1.setIndicator("",
                res.getDrawable(R.drawable.tab1)).setContent(
                new Intent(this, Act1.class)));
                        .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));

        obj = tabHost.newTabSpec("tab2");
        tabHost.addTab(obj.setIndicator("",
                res.getDrawable(R.drawable.tab2)).setContent(
                new Intent(this, Act2.class)
                        .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));

        obj = tabHost.newTabSpec("tab3");
        tabHost.addTab(obj.setIndicator("",
                res.getDrawable(R.drawable.tab3)).setContent(
                new Intent(this, Act3.class)
                        .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));

        obj = tabHost.newTabSpec("tab4");
        tabHost.addTab(obj.setIndicator("",
                res.getDrawable(R.drawable.tab4)).setContent(
                new Intent(this, Act4.class)
                        .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));

        obj = tabHost.newTabSpec("tab5");
        tabHost.addTab(obj.setIndicator("",
                res.getDrawable(R.drawable.tab5)).setContent(
                new Intent(this, Act5.class)));

            tabHost.setCurrentTab(0);

    }

    public void switchTab(int tab) {
        tabHost.setCurrentTab(tab);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:23:38.313

请检查此链接。可能对你有用。

[Android onActivityResult 从未调用](https://stackoverflow.com/questions/7812120/android-onactivityresult-never-called)

[如何从 TabHost Activity 返回结果（startActivityForResult）？](https://stackoverflow.com/questions/2497205/how-to-return-a-result-startactivityforresult-from-a-tabhost-activity)

[Android 使用选项卡中嵌套活动的 startActivityForResult。](https://stackoverflow.com/questions/6865652/android-use-startactivityforresult-from-a-nested-activity-in-a-tab)

# php - PHP表单提交给了我一个没有成功消息的白页

> ID：11556686
> 
> 赞同：0
> 
> 时间：2012-07-19T08:18:53.077
> 
> 标签：php, forms, mysqli

我正在编写一个将数据添加到 mysql 表的 php 脚本，有 4 个字段我都需要，我想我得到了大部分正确的代码，因为我从 php 书中复制了代码然后做了一些更改反映我在寻找我的特定 srcipt 的内容，但是当我去测试提交功能时，它只会给我一个白屏而不是成功/错误消息，我有点不知道从这里去哪里。下面是我的代码的副本。

```
<html>
<head>
</head>
<body>
<?php

if ($_SERVER['REQUEST_METHOD'] == 'POST') {
//input validation all required
if (!empty($_POST['airport_name'])) {
$an = trim($_POST['airport_name']);
if (!empty($_POST['airport_code'])){
$ac = trim($_POST['airport_code']);
if (!empty($_POST['airport_lat'])){
$alat = trim($_POST['airport_lat']);
if (!empty($_POST['airport_long'])){
$along = trim($_POST['airport_long']);

//if (!empty($_POST['airport_name'])){

//$an  = trip($_POST['airport_name']);

require('/../mysqli_connect.php');
$q = 'INSERT INTO airports (airport_name, airport_code, airport_lat, airport_long) VALUES (?, ?, ?, ?)';
$stmt = mysqli_prepare($dbc, $q);
mysqli_stmt_bind_param($stmt, 'ssss', $an, $ac, $alat, $along);
mysqli_stmt_execute($stmt);

if (mysqli_stmt_affected_rows($stmt) == 1) {
  echo '<p>The airport has been added!</p>';
  $_POST = array();
} else {
  $error = 'The new airport could not be added to the database!';
}
mysqli_stmt_close($stmt);
mysqli_close($dbc);

} //if airport lat
   else{
     $error = 'Please enter airport lat';
   }
}   //if airport lat
else{
  $error = 'Please enter airport latitude';
}
}  //if airport code
else {
  $error = 'Please enter an airport code';
}
}  //if airport name
else {
  $error = 'Please enter an airport name';
}
} // end of submission if
if (isset($error)) {
  echo '<h1>Error!</h1>
  <p stlye="font-weight: bold; color: #COO">'. $error . 'Please try again</p>';
}

?>
<h1>Add Airport</h1>
<form action="add_apt.php" method="post">
<fieldset><legend>Fill out the for to and and airpot:</legend>
<p><b>Airport Name:</b><input type="text" name="airport_name" size="10" value="<?php if (isset($_POST['airport_name'])) echo $_POST['airport_name']; ?>"/></p>
<p><b>Airport Code:</b><input type="text" name="airport_code" size="4" maxlegnth="4" value="<?php if (isset($_POST['airport_code'])) echo $_POST['airport_code']; ?>"/></p>
<p><b>Airport Lat:</b><input type="text" name="airport_lat" size="10" maxlegnth="40" value="<?php if (isset($_POST['airport_lat'])) echo $_POST['airport_lat']; ?>"/></p>
<p><b>Airport Long:</b><input type="text" name="airport_long" size="10" maxlegnth="40" value="<?php if (isset($_POST['airport_long'])) echo $_POST['airport_Long']; ?>"/></p>
</fieldset>
<div align="center"><input type="submit" name="submit" Value="Add Airport"/></div>
</form>
</body>
</html> 
```

以下是我启用错误时得到的错误警告：mysqli_prepare() 期望参数 1 为 mysqli，在第 29 行的 /home5/virtua15/public_html/gatewayaviation/add_apt.php 中给出 null

警告：mysqli_stmt_bind_param() 期望参数 1 为 mysqli_stmt，在第 30 行的 /home5/virtua15/public_html/gatewayaviation/add_apt.php 中给出 null

警告：mysqli_stmt_execute() 期望参数 1 为 mysqli_stmt，在第 31 行的 /home5/virtua15/public_html/gatewayaviation/add_apt.php 中给出 null

警告：mysqli_stmt_affected_rows() 期望参数 1 为 mysqli_stmt，在第 33 行的 /home5/virtua15/public_html/gatewayaviation/add_apt.php 中给出 null

警告：mysqli_stmt_close() 期望参数 1 为 mysqli_stmt，在第 39 行的 /home5/virtua15/public_html/gatewayaviation/add_apt.php 中给出 null

警告：mysqli_close() 期望参数 1 为 mysqli，在第 40 行的 /home5/virtua15/public_html/gatewayaviation/add_apt.php 中给出 null

Mysqli_connect.php 脚本

```
<?php

DEFINE ('DB_USER', '******_******');
DEFINE ('DB_PASSWORD', '*******');
DEFINE ('DB_HOST', 'localhost');
DEFINE ('DB_NAME', '******_gateway');

$dbc = @mysqli_connect (DB_HOST, DB_USER, DB_PASSWORD, DB_NAME) OR die ('Could not connect to MySQL: ' . mysqli_connect_error() );

mysqli_set_charset($dbc, 'utf8');
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:40:40.197

有一种简单的方法可以找出错误所在，即使不使用 display_errors。在您正在构建和执行查询的脚本部分中，您应该将其更改为以下内容：

```
if ($stmt = mysqli_prepare($dbc, $q)) {
    mysqli_stmt_bind_param($stmt, 'ssss', $an, $ac, $alat, $along);
    mysqli_stmt_execute($stmt);

    if (mysqli_stmt_affected_rows($stmt) == 1) {
        echo '<p>The airport has been added!</p>';
        $_POST = array();
    } else {
        $error = 'The new airport could not be added to the database!';
    }
    mysqli_stmt_close($stmt);
    mysqli_close($dbc);
}
else {
    echo '<p>'.mysqli_error($dbc).'</p>';
} 
```

通过这样做，您将收到查询中发生的任何 MySQL 错误。在这种情况下，生成的错误是：

```
Column count doesn't match value count at row 1 
```

仔细查看代码，出现此错误是因为您尝试添加 4 个字段`(airport_name, airport_code, airport_lat, airport_long)`，但您的 SQL 语句中有 5 个占位符`(?, ?, ?, ?, ?)`，因此删除其中一个占位符，它现在可以工作了。

编辑：针对您的问题和此答案中的评论，还要检查连接文件是否正确包含在您的主脚本中。

# iphone - unable to upload app on itunes because of CTMessageCenter?

> ID：11556695
> 
> 赞同：0
> 
> 时间：2012-07-19T08:19:28.393
> 
> 标签：iphone, ios5, sms, message, scheduling

I used this code in my app in order to send background sms But i am not able to upload app on itunes it says:using non public api @class CTMessageCenter;

can any one tell me any way to send schedule sms when application is in background or can any one tell me any way to send sms without presenting SMS composer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:39:27.887

There is no "legal" (aka permitted by Apple) way to do this.

The only work around I can assume is having a webservice on a server side, which would be the one sending the messages. You're app should communicate with the server and tell him what to do (text, hour...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:37:17.497

You cant :) why would apple let you send sms on peoples behalf?

# orbeon - 翻译 xbl 组件中的标签

> ID：11556708
> 
> 赞同：1
> 
> 时间：2012-07-19T08:19:52.960
> 
> 标签：orbeon, xbl

我有一个使用 Form Builder 构建的表单，其中包含一个 XBL 组件，它是一个只有 xforms 标签和输入的小表单。我想以两种语言（FR：法语和 NL：荷兰语）显示表单（顺便说一下组件），所以在 XBL 中，我复制了每个标签，属性为 lang="fr" 和 lang="nl ”。但是，当我在 Form Runner 中使用参数 fr-language=nl 运行我的表单时，我将所有表单都翻译成荷兰语，除了默认情况下仍为法语的 XBL 组件。如果我做错了什么，你能帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T19:27:10.690

Orbeon Forms 不支持元素的`lang`属性。

Orbeon Forms 4.2 提供了一种更简单的 XBL 组件国际化方法，请参阅[此博客条目](http://blog.orbeon.com/2013/05/easier-localization.html)。

# python - 从 python / postgresql / psycopg2 中的用户输入安全地指定“order by”子句

> ID：11556711
> 
> 赞同：1
> 
> 时间：2012-07-19T08:19:58.850
> 
> 标签：python, postgresql, psycopg2

我觉得这是一个愚蠢的问题，但我在任何地方都找不到任何东西。

我想使用 psycopg2 构建一个 SQL 查询，其中用户按列指定排序/顺序。客户端它是一个 javascript 数据网格，提供排序/分页等。

正常的替换练习不起作用：（注意 E'xx'）

```
cur.mogrify('select * from table offset %s limit %s order by %s', [0,5,'sort_column'])
>>> "select * from table offset 0 limit 5 order by E'sort_column'" 
```

没有清理/替换我自己的 order by 子句，推荐的方法是什么？

我是否重复： [表、字段和架构上的 psycopg2 E'](https://stackoverflow.com/questions/6294001/psycopg2-e-on-table-field-and-schema) ？

干杯

-一世

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:27:42.173

Python 的 DBAPI 中的实体名称（表/列等）不应像变量那样通过任何占位符处理来运行。您将必须进行自己的格式化：

```
'select * from table offset %s limit %s order by %s' % (0,5,'sort_column') 
```

但是请使用正确的转义/占位符功能`WHERE var = %s`等...

# objective-c - Objective-C 是否使用字符串池？

> ID：11556714
> 
> 赞同：4
> 
> 时间：2012-07-19T08:20:10.520
> 
> 标签：objective-c, string, memory, pool, string-literals

我知道[Java](https://stackoverflow.com/questions/3801343/what-is-string-pool-in-java)和[C#](http://msdn.microsoft.com/en-us/library/system.string.intern)在处理字符串文字时都使用字符串池来节省内存。

Objective-C 是否使用任何这样的机制？如果不是，为什么不呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T08:23:53.207

是的，像这样的字符串文字`@"Hello world"`永远不会被释放，它们指向同一个内存，这意味着指针比较是正确的。

```
NSString *str1 = @"Hello world";
NSString *str2 = @"Hello world";
if (str1 == str2) // Is true. 
```

这也意味着弱字符串指针不会更改为 nil（对于普通对象会发生这种情况），因为字符串文字永远不会被释放。

```
__weak NSString *str = @"Hello world";
if (str == nil) // This is false, the str still points to the string literal 
```

# javascript - 通过 JS 的面板可见性

> ID：11556716
> 
> 赞同：1
> 
> 时间：2012-07-19T08:20:14.217
> 
> 标签：javascript, ajaxcontroltoolkit

[http://www.asp.net/web-forms/tutorials/ajax-control-toolkit/getting-started/creating-a-custom-ajax-control-toolkit-control-extender-vb](http://www.asp.net/web-forms/tutorials/ajax-control-toolkit/getting-started/creating-a-custom-ajax-control-toolkit-control-extender-vb)上的教程给出了一个很好的例子基于文本框和按钮的自定义扩展程序。基本上，该按钮保持禁用状态，直到在文本框中输入至少一个字符。如果从文本框中删除文本，则该按钮将再次被禁用。

我正在尝试修改它，以便扩展器基于文本框和面板。我再次希望面板在文本框中出现文本时变得可见。

这就是我修改代码的方式...

```
Type.registerNamespace('CustomExtenders');
CustomExtenders.ShowHidePanelBehavior = function (element) {
    CustomExtenders.ShowHidePanelBehavior.initializeBase(this, [element]);
    this._targetPanelIDValue = null;
} 

CustomExtenders.ShowHidePanelBehavior.prototype = {
    initialize: function () {
        CustomExtenders.ShowHidePanelBehavior.callBaseMethod(this, 'initialize');

        // Initalization code 
        $addHandler(this.get_element(), 'keyup',
        Function.createDelegate(this, this._onkeyup));
        this._onkeyup();
    },

    dispose: function () {
        // Cleanup code  

        CustomExtenders.ShowHidePanelBehavior.callBaseMethod(this, 'dispose');
    },

    // Property accessors  
    // 
    get_TargetPanelID: function () {
        return this._targetPanelIDValue;
    },

    set_TargetPanelID: function (value) {
        this._targetPanelIDValue = value;
    },

    _onkeyup: function () {

       var e = $get(this._targetPanelIDValue);
        if (e) {
            var visibility = ("" == this.get_element().style.value);
            e.visibility = 'visible';
        }
    }

}

CustomExtenders.ShowHidePanelBehavior.registerClass('CustomExtenders.ShowHidePanelBehavior', Sys.Extended.UI.BehaviorBase); 
```

运行时面板不会出现。不会产生错误。

我哪里错了……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:04:58.780

试试这个代码：

```
_onkeyup: function () {
    var panel = $get(this.get_TargetPanelID());
    if (panel) {
        var visibilityValue = ("" == this.get_element().value) ? "hidden" : "visible";
        panel.style.visibility = visibilityValue;
    }
} 
```

# elasticsearch - elasticsearch中的多字段操作

> ID：11556718
> 
> 赞同：2
> 
> 时间：2012-07-19T08:20:15.813
> 
> 标签：elasticsearch

我开始查看 elasticsearch，我想知道是否可以使用它来完成此操作：（我进行了一些搜索，但我承认我不知道要查找什么）。

我有如下两个联系人数据：

```
{
  "id"     : "id1",
  "name"   : "Roger",
  "phone1" : "123",
  "phone2" : "",
  "phone3" : "980"
}

{
  "id"     : "id2",
  "name"   : "Lucas",
  "phone1" : "789",
  "phone2" : "123",
  "phone3" : ""
} 
```

我很想知道弹性搜索是否可以帮助我找到重复的电话号码，即使它们位于不同的电话字段中（“123”在这两个记录中都存在）。我已经看到我可以在多个字段中搜索一个字符串，所以如果我搜索 123，我可以得到这两条记录作为结果。但是，我希望能够发出一个可以返回给我的请求，如下所示：

```
{
  "phones" : {
    "123" : ["id1", "id2"],
    "980" : ["id1"],
    "789" : ["id2"]
  }
} 
```

甚至这会很有用（与号码的联系人数量）：

```
{
  "phones" : {
    "123" : 2,
    "980" : 1,
    "789" : 1
  }
} 
```

知道这是否可能吗？如果它能够做到，那就太棒了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T14:25:00.340

我同意 DrTech 更改数据结构的建议。但是，如果您出于某种原因更愿意保持原样，则可以使用多字段术语方面实现相同的结果：

```
curl "localhost:9200/phonefacet/_search?pretty=true&search_type=count" -d '{
    "query" : {
        "match_all" : {  }
    },
    "facets" : {
        "tag" : {
            "terms" : {
                "fields" : ["phone1", "phone2", "phone3"],
                "size" : 10
            }
        }
    }
}' 
```

结果将如下所示：

```
{
  "took" : 1,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 2,
    "max_score" : 0.0,
    "hits" : [ ]
  },
  "facets" : {
    "tag" : {
      "_type" : "terms",
      "missing" : 2,
      "total" : 4,
      "other" : 0,
      "terms" : [ {
        "term" : "123",
        "count" : 2
      }, {
        "term" : "980",
        "count" : 1
      }, {
        "term" : "789",
        "count" : 1
      } ]
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:20:42.893

您可以使用[terms facet](http://www.elasticsearch.org/guide/reference/api/search/facets/terms-facet.html)到达那里，但您必须更改数据结构以将所有电话号码包含在单个字段中：

创建索引：

```
curl -XPUT 'http://127.0.0.1:9200/test/?pretty=1' 
```

索引您的数据：

```
curl -XPOST 'http://127.0.0.1:9200/test/test?pretty=1'  -d '
{
   "name" : "Roger",
   "id" : "id1",
   "phone" : [
      "123",
      "980"
   ]
}
'

curl -XPOST 'http://127.0.0.1:9200/test/test?pretty=1'  -d '
{
   "name" : "Lucas",
   "id" : "id2",
   "phone" : [
      "789",
      "123"
   ]
}
' 
```

搜索所有字段，返回 中的项数`phone`：

```
curl -XGET 'http://127.0.0.1:9200/test/test/_search?pretty=1'  -d '
{
   "facets" : {
      "phone" : {
         "terms" : {
            "field" : "phone"
         }
      }
   }
}
'

# {
#    "hits" : {
#       "hits" : [
#          {
#             "_source" : {
#                "name" : "Roger",
#                "id" : "id1",
#                "phone" : [
#                   "123",
#                   "980"
#                ]
#             },
#             "_score" : 1,
#             "_index" : "test",
#             "_id" : "StaJK9A5Tc6AR7zXsEKmGA",
#             "_type" : "test"
#          },
#          {
#             "_source" : {
#                "name" : "Lucas",
#                "id" : "id2",
#                "phone" : [
#                   "789",
#                   "123"
#                ]
#             },
#             "_score" : 1,
#             "_index" : "test",
#             "_id" : "x8w39F-DR9SZOQoHpJw2FQ",
#             "_type" : "test"
#          }
#       ],
#       "max_score" : 1,
#       "total" : 2
#    },
#    "timed_out" : false,
#    "_shards" : {
#       "failed" : 0,
#       "successful" : 5,
#       "total" : 5
#    },
#    "facets" : {
#       "phone" : {
#          "other" : 0,
#          "terms" : [
#             {
#                "count" : 2,
#                "term" : "123"
#             },
#             {
#                "count" : 1,
#                "term" : "980"
#             },
#             {
#                "count" : 1,
#                "term" : "789"
#             }
#          ],
#          "missing" : 0,
#          "_type" : "terms",
#          "total" : 4
#       }
#    },
#    "took" : 5
# } 
```

# windows-phone-7 - 每 5 分钟执行一次定期任务

> ID：11556724
> 
> 赞同：0
> 
> 时间：2012-07-19T08:20:30.017
> 
> 标签：windows-phone-7

我想使用 PeriodicAgent 并在后台做一些事情，但 PeriodAgent 的默认间隔是 30 分钟，这对我的应用程序来说太长了。有什么方法（在 wp7.0 或更高版本中）可以更改间隔吗？

先感谢您。

-亚伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:21:33.220

不，那里没有。即使是 30 分钟的间隔也不能保证。

# css - 条件样式表 Rails 3

> ID：11556730
> 
> 赞同：1
> 
> 时间：2012-07-19T08:21:03.333
> 
> 标签：css, ruby-on-rails-3, asset-pipeline

这只是一个需要澄清的快速问题，我有一个 ie7 样式表，当有人通过 IE7 浏览时需要调用它，我的应用程序/布局文件中的以下内容会调用 ie7 样式表吗？

```
<!--[if lte IE 7]>
<%= stylesheet_link_tag "ie7", :media => "all" %>
<![endif]--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:15:58.917

是的，那应该只为 IE7 和旧版浏览器引入该样式表。

我发现通常最好通过以下代码段向 html 标记添加条件类，然后在 IE 规则之前添加`.lt-ieX`. 这允许您将所有相关规则放在同一个样式表中。

```
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>    <html class="lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>    <html class="lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html> <!--<![endif]--> 
```

例如

```
.alert {
  color: red;
}
.lt-ie7 .alert {
  color: blue;
} 
```

# php - 我们如何在 PHP 中添加两个日期间隔

> ID：11556731
> 
> 赞同：31
> 
> 时间：2012-07-19T08:21:10.060
> 
> 标签：php, datetime, addition, dateinterval

我想添加两个日期间隔来计算以小时和分钟为单位的总持续时间实际上我想执行 addittion 如下所示：

```
$a = new DateTime('14:25');
$b = new DateTime('17:30');
$interval1 = $a->diff($b);
echo "interval 1 : " . $interval1->format("%H:%I");
echo "<br />";

$c = new DateTime('08:00');
$d = new DateTime('13:00');
$interval2 = $c->diff($d);
echo "interval 2 : " . $interval2->format("%H:%I");
echo "<br />";

echo "Total interval : " . $interval1 + $interval2; 
```

知道如何执行这种类型的间隔加法以在 PHP 中以总小时和分钟格式获取两个间隔的总和

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-19T08:32:53.627

PHP 没有运算符重载*，因此`+`对于对象，PHP 会首先尝试将它们转换为字符串，但`DateInterval`不支持：

```
interval 1: 03:05
interval 2: 05:00
Total interval : 08:05 
```

相反，您需要创建一个新`DateTime`对象，然后使用该`add`函数添加间隔，最后显示与参考点的差异：

```
$e = new DateTime('00:00');
$f = clone $e;
$e->add($interval1);
$e->add($interval2);
echo "Total interval : ", $f->diff($e)->format("%H:%I"), "\n"; 
```

完整示例/（[演示](https://3v4l.org/J9iGJ)）：

```
$a = new DateTime('14:25');
$b = new DateTime('17:30');
$interval1 = $a->diff($b);
echo "interval 1: ", $interval1->format("%H:%I"), "\n";

$c = new DateTime('08:00');
$d = new DateTime('13:00');
$interval2 = $c->diff($d);
echo "interval 2: ", $interval2->format("%H:%I"), "\n";

$e = new DateTime('00:00');
$f = clone $e;
$e->add($interval1);
$e->add($interval2);
echo "Total interval : ", $f->diff($e)->format("%H:%I"), "\n"; 
```

* * *

您可能还想考虑查看如何`DateInterval`存储它的值，然后从它扩展以进行您自己的计算。以下示例（[Demo](https://3v4l.org/BcOh2)）很粗糙，它没有考虑[倒置的东西](http://www.php.net/manual/en/class.dateinterval.php#dateinterval.props.invert)，它[没有（重新）设置`$days`为`false`](http://www.php.net/manual/en/class.dateinterval.php#dateinterval.props.days)并且我没有[在创建时检查/测试周期说明符](http://php.net/manual/dateinterval.construct.php)的 ISO 规范，但我认为这足以展示这个想法：

```
class MyDateInterval extends DateInterval
{
    /**
     * @return MyDateInterval
     */
    public static function fromDateInterval(DateInterval $from)
    {
        return new MyDateInterval($from->format('P%yY%dDT%hH%iM%sS'));
    }

    public function add(DateInterval $interval)
    {
        foreach (str_split('ymdhis') as $prop)
        {
            $this->$prop += $interval->$prop;
        }
    }
}

$a = new DateTime('14:25');
$b = new DateTime('17:30');
$interval1 = $a->diff($b);
echo "interval 1: ", $interval1->format("%H:%I"), "\n";

$c = new DateTime('08:00');
$d = new DateTime('13:00');
$interval2 = $c->diff($d);
echo "interval 2: ", $interval2->format("%H:%I"), "\n";

$e = MyDateInterval::fromDateInterval($interval1);
$e->add($interval2);
echo "Total interval: ", $e->format("%H:%I"), "\n"; 
```

* * *

^*如果你写一个 PHP 扩展，它实际上是可能的（至少在某种程度上）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-08-05T22:19:31.457

此函数允许您组合任意数量的 DateInterval

```
/**
 * Combine a number of DateIntervals into 1 
 * @param DateInterval $...
 * @return DateInterval
 */
function addDateIntervals()
{
    $reference = new DateTimeImmutable;
    $endTime = clone $reference;

    foreach (func_get_args() as $dateInterval) {
        $endTime = $endTime->add($dateInterval);
    }

    return $reference->diff($endTime);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-20T07:36:51.873

```
function compare_dateInterval($interval1, $operator ,$interval2){
    $interval1_str = $interval1->format("%Y%M%D%H%I%S");
    $interval2_str = $interval2->format("%Y%M%D%H%I%S");
    switch($operator){
        case "<":
            return $interval1 < $interval2;
        case ">":
            return $interval1 > $interval2;
        case "==" :
            return $interval1 == $interval2;
        default:
            return NULL;
    }
}
function add_dateInterval($interval1, $interval2){
    //variables
    $new_value= [];
    $carry_val = array(
                    's'=>['value'=>60,'carry_to'=>'i'],
                    'i'=>['value'=>60,'carry_to'=>'h'],
                    'h'=>['value'=>24,'carry_to'=>'d'],
                    'm'=>['value'=>12,'carry_to'=>'y']
                );

    //operator selection
    $operator = ($interval1->invert == $interval2->invert) ? '+' : '-';

    //Set Invert
    if($operator == '-'){
        $new_value['invert'] = compare_dateInterval($interval1,">",$interval2)?$interval1->invert:$interval2->invert;
    }else{
        $new_value['invert'] = $interval1->invert;
    }

    //Evaluate
    foreach( str_split("ymdhis") as $property){
        $expression = 'return '.$interval1->$property.' '.$operator.' '.$interval2->$property.';';
        $new_value[$property] = eval($expression);
        $new_value[$property] = ($new_value[$property] > 0) ? $new_value[$property] : -$new_value[$property];
        }

    //carry up
    foreach($carry_val as $property => $option){
        if($new_value[$property] >= $option['value']){
            //Modulus
            $new_value[$property] = $new_value[$property] % $option['value'];
            //carry over
            $new_value[$option['carry_to']]++;
        }
    }

    $nv = $new_value;
    $result = new DateInterval("P$nv[y]Y$nv[m]M$nv[d]DT$nv[h]H$nv[i]M$nv[s]S");
    $result->invert = $new_value['invert'];
    return $result;
}

$a = new DateTime('00:0');
$b = new DateTime('17:30');
$interval1 = $a->diff($b);
echo "interval 1: ", $interval1->format("%H:%I"), "<br>";

$c = new DateTime('08:01:00');
$d = new DateTime('13:30:33');
$interval2 = $c->diff($d);
echo "interval 2: ", $interval2->format("%H:%I"), "<br>";

$addition = add_dateInterval($interval1,$interval2);
echo "<pre>";
echo var_dump($addition);
echo "</pre>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-27T08:40:43.150

我也有同样的情况。我通过创建一个新的来解决我的问题`stdClass`，这个对象模拟一个`DateInterval`对象，但它不是一个真实的`DateInterval`对象。然后我在对所需属性`DateInterval`执行复合赋值操作（例如 ）时遍历每个实数。`+=`见下文：

```
$dateTimeA = new DateTime('-10 day');
$dateTimeB = new DateTime('-8 day');
$dateTimeC = new DateTime('-6 day');
$dateTimeD = new DateTime('-4 day');

$intervalA = date_diff($dateTimeA, $dateTimeB);
$intervalB = date_diff($dateTimeC, $dateTimeD);

$intervalC = new StdClass; // $intervalC is an emulation of DateInterval 
$intervalC->days = 0;

foreach([$intervalA, $intervalB] as $interval) {
    $intervalC->days += (int)$interval->format('%d');
}

var_dump($intervalC);
/*
object(stdClass)[7]
  public 'days' => int 4
*/ 
```

# c++ - 如何检查哪些项目依赖于 .cpp 文件？

> ID：11556732
> 
> 赞同：1
> 
> 时间：2012-07-19T08:21:11.523
> 
> 标签：c++, visual-studio-2010, dll, compilation

我有一个解决方案，其中包含许多相互依赖的项目（大型程序，大约 200 个项目）。
许多这些连接被编译为静态库，并被编译到使用链接时间代码生成的其他项目中。

现在，假设我想测试一些东西并在某处更改单个 .cpp 文件，并且我不想重新安装整个东西，所以我只想替换受更改影响的 dll。

如何找到所有重新创建并受更改影响的 dll？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:28:01.320

如果您使用的是版本控制系统（您可能是），并且您在部署之前签入了 DLL（您可能没有），您可以询问 VCS 哪些 DLL 已更改。

因为这可能是您的工作流程中拥有这种智能的地方：您想要一个紧凑的部署，您需要在每次部署时创建一个检查点（在这种情况下，通过签入您的可部署对象）。

# objective-c - 无法识别的选择器发送到实例自定义单元格

> ID：11556736
> 
> 赞同：4
> 
> 时间：2012-07-19T08:21:36.900
> 
> 标签：objective-c, ios, xcode, uitableview

我正在尝试为我的 UITableView 制作一个自定义单元格。

因此，我创建了一个类 ( `UITableViewCell`)，并将其命名为 HomeCell。这个类有一个带有名为 titleCell 的标签的 xib 文件。

在我的 cellForRowAtIndexPath 方法中，我写道：

```
HomeCell *cell = (HomeCell *)[tableView dequeueReusableCellWithIdentifier:@"HomeCell"];

    if(cell == nil){
        NSArray *xib = [[NSBundle mainBundle] loadNibNamed:@"HomeCell" owner:self options:nil];
        for(id oneObject in xib){
            if([oneObject isKindOfClass:[HomeCell class]]){
                cell = (HomeCell *) oneObject;
            }
        }
    }

    //Get object at index data
    HomeObjectCell *tempObject = [self.dataForCell objectAtIndex:indexPath.row];

    NSLog(@"Title : %@",tempObject.title); // The tempObject.title return a NSString example

    cell.titleCell.text = tempObject.title; // <-- ERROR ! 
```

当我运行应用程序时，我得到：

> [UITableViewCell titleCell]：无法识别的选择器发送到实例 0x6e61890

任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T15:42:35.480

**你绝对确定：**

1）**..您的类“HomeCell”对于表格单元格的命名是否正确？**选择单元格，选择“身份检查器”->“自定义类”部分并查看

2) **.. 引用与每个标签/ui 图像连接的出口？**再次尝试选择您的单元格，选择“连接检查器”并查看

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:01:49.440

检查 xib 文件中的文件所有者是否属于 HomeCell 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:33:54.197

在您提到的描述中，HomeCell 有一个名为 titleLable 的成员。

在您使用 cell.titleCell.text 的代码中。

所以，我认为你应该使用 cell.titleLabel.text 而不是 cell.titleCell。崩溃消息还暗示 HomeCell 中不存在 cell.titleCell 的属性。

# iphone - 如何使用 Graph API 在 iphone 中获取 Facebook 好友在线状态。？

> ID：11556740
> 
> 赞同：1
> 
> 时间：2012-07-19T08:21:56.307
> 
> 标签：iphone, objective-c, ios, facebook-graph-api

我正在尝试使用 Graph API 获取所有在线朋友的列表。

我正在使用以下..

```
[facebook requestWithGraphPath:@"me/friends?fields=id,name,online_presence" andDelegate:self]; 
```

但这给了我 0 个结果。

谢谢。

**编辑：**

我已经拥有从 FB 执行此操作的权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:04:35.533

如果您正确配置了 friends_online_presence 权限，请尝试以下操作：

```
NSString* method = @"fql.query";
NSString* fql = @"SELECT uid, online_presence FROM user WHERE uid IN (SELECT uid2 FROM friend where uid1 = me())";
NSDictionary* params = [NSDictionary dictionaryWithObject: fql forKey: @"query"];

[[self facebook] requestWithMethodName: method
                             andParams: [params mutableCopy]
                         andHttpMethod: @"GET"
                           andDelegate: delegate]; 
```

这将为您返回在线状态的朋友列表：活动、空闲、离线或错误。

# php - 回声<< 我需要使用一些脚本，其中我发现了这个： $data = << <data 3="" 4="" 5="" 6="" 267="" min="{$min}" invoice="{$invoice}" amount="{$sum}" exp_time="{$exp_date}" descr="{$descr}" data;="" 有人可以提供更多关于$somevar="<<<DATA......和" 问问题="" 2012-07-19t08:22:13.963="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我需要使用一些脚本，其中我发现了这个：="" $data="<<<DATA" <<<html......似乎很难找到有用的信息。="" http:="" www.php.net="" manual="" de="" language.types.string.php#language.types.string.syntax.heredoc="" 它说：="" 分隔字符串的第三种方法是heredoc语法：<<<。在此运算符之后，提供一个标识符，然后是一个换行符。字符串本身紧随其后，然后再次使用相同的标识符来关闭引号。="" phpecho="" 回答="" answer="" 于="" 2012-07-19t08:25:38.263="" 这是一个heredoc语法：="" 赫雷多克="" 第三种分隔字符串的方法是="" heredoc="" 语法：<<<。在此运算符之后，提供一个标识符，然后是一个换行符。字符串本身紧随其后，然后再次使用相同的标识符来关闭引号。="" 结束标识符必须从该行的第一列开始。此外，标识符必须遵循与="" php="" 中任何其他标签相同的命名规则：它必须仅包含字母数字字符和下划线，并且必须以非数字字符或下划线开头。="" 您可以在="" 文档http:="" en="" language.types.string.php#language.types.string.syntax.heredoc中阅读更多相关信息="" 更多信息：="" 例子：="" <?php="" $mystring="<<<EOT" some="" text.="" completely="" free="" i="" can="" use="" "double="" quotes"="" 'single="" quotes',="" plus="" $variables="" too,="" which="" will="" be="" properly="" converted="" to="" their="" values,="" you="" even="" type="" eot,="" as="" long="" alone="" a="" line,="" like="" this:="" eot;="" ?="">关于heredoc，有几个关键的事情需要注意，上面的例子： 你可以使用任何你喜欢的东西；“EOT”只是一个例子 您需要在分隔符之前使用 <<< 告诉 PHP 您要进入 heredoc 模式 PHP 中使用了变量替换，这意味着您确实需要转义美元符号 - 如果您不这样做，PHP 将尝试变量替换。 您可以在文本中的任何位置使用分隔符，但不能在新行的第一列中使用 在字符串的末尾，只需键入不带空格的分隔符，然后用分号结束语句 如果没有 heredoc 语法，复杂的字符串分配很快就会变得非常混乱。Heredoc 在野外并不经常使用 - 通常你会希望它被更多地使用，因为你会遇到太多的脚本由于不使用heredoc而导致代码混乱！ http://www.tuxradar.com/practicalphp/2/6/3 于 2012-07-19T08:27:08.917 回答 This answer is useful 1 这称为 Heredoc，您可以指定一个标识符，然后使用它代替双引号字符串，这样您就不需要转义双引号，因为您的字符串已经有了不同的分隔符。它具有相同的转义规则和带有双引号字符串的解析规则（例如 \n、\r、变量解析等），但在使用 Heredoc 语法时不需要转义双引号。 {$desc}部分是 curly 语法，这是一种解析字符串中变量的复杂方法。复杂并不意味着难写。复杂意味着您可以有更多选项来解析变量（例如，您可以将函数的返回值分配为变量名，然后解析该变量等） 有关 heredoc 和 curly 语法的更多信息，请参见此处：http ://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc 于 2012-07-19T08:29:35.703 回答 Related 1 android - django + django_allauth + 安卓应用程序 3 iphone - 如何从tableview的iPhone中的sqlite数据库中删除行 4 python - LXML：删除 x 2 java - 何时使用 Java Beans 何时使用 Enterprise Java Beans 3 c# - System.Configuration.ConfigurationSettings.AppSettings 在生产中无法访问 2 android - 复杂对象的片段初始化 3 c# - 文件复制到窗口应用程序的文件夹中 3 java - 带有 MySQL 数据库的 Java 客户端 1 javascript - js .append() Angular 指令未编译 2 json - TJSONObject 销毁方法错误 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</data>

> ID：11556743
> 
> 赞同：3
> 
> 时间：
> 
> 标签：php, echo

我需要使用一些脚本，其中我发现了这个：

```
$data = <<<DATA
MIN={$min}
INVOICE={$invoice}
AMOUNT={$sum}
EXP_TIME={$exp_date}
DESCR={$descr}
DATA; 
```

有人可以提供更多关于`$somevar = <<<DATA`......和`echo <<<HTML`......似乎很难找到有用的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T08:25:38.263

[http://www.php.net/manual/de/language.types.string.php#language.types.string.syntax.heredoc](http://www.php.net/manual/de/language.types.string.php#language.types.string.syntax.heredoc)

它说： *分隔字符串的第三种方法是heredoc语法：<<<。在此运算符之后，提供一个标识符，然后是一个换行符。字符串本身紧随其后，然后再次使用相同的标识符来关闭引号。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T08:27:08.917

这是一个heredoc语法：

> 赫雷多克

> 第三种分隔字符串的方法是 heredoc 语法：<<<。在此运算符之后，提供一个标识符，然后是一个换行符。字符串本身紧随其后，然后再次使用相同的标识符来关闭引号。

> 结束标识符必须从该行的第一列开始。此外，标识符必须遵循与 PHP 中任何其他标签相同的命名规则：它必须仅包含字母数字字符和下划线，并且必须以非数字字符或下划线开头。

[您可以在 php 文档http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)中阅读更多相关信息

更多信息：

例子：

```
<?php
$mystring = <<<EOT
This is some PHP text.
It is completely free
I can use "double quotes"
and 'single quotes',
plus $variables too, which will
be properly converted to their values,
you can even type EOT, as long as it
is not alone on a line, like this:
EOT;
?> 
```

> 关于heredoc，有几个关键的事情需要注意，上面的例子：

> 你可以使用任何你喜欢的东西；“EOT”只是一个例子

> 您需要在分隔符之前使用 <<< 告诉 PHP 您要进入 heredoc 模式

> PHP 中使用了变量替换，这意味着您确实需要转义美元符号 - 如果您不这样做，PHP 将尝试变量替换。

> 您可以在文本中的任何位置使用分隔符，但不能在新行的第一列中使用

> 在字符串的末尾，只需键入不带空格的分隔符，然后用分号结束语句

> 如果没有 heredoc 语法，复杂的字符串分配很快就会变得非常混乱。Heredoc 在野外并不经常使用 - 通常你会希望它被更多地使用，因为你会遇到太多的脚本由于不使用heredoc而导致代码混乱！

[http://www.tuxradar.com/practicalphp/2/6/3](http://www.tuxradar.com/practicalphp/2/6/3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T08:29:35.703

这称为 Heredoc，您可以指定一个标识符，然后使用它代替双引号字符串，这样您就不需要转义双引号，因为您的字符串已经有了不同的分隔符。它具有相同的转义规则和带有双引号字符串的解析规则（例如 \n、\r、变量解析等），但在使用 Heredoc 语法时不需要转义双引号。

`{$desc}`部分是 curly 语法，这是一种解析字符串中变量的复杂方法。复杂并不意味着难写。复杂意味着您可以有更多选项来解析变量（例如，您可以将函数的返回值分配为变量名，然后解析该变量等）

有关 heredoc 和 curly 语法的更多信息，请参见此处：[http ://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

# php - 我需要将 symfony2 中的“角色”类声明为数组或数组集合吗？

> ID：11556744
> 
> 赞同：1
> 
> 时间：2012-07-19T08:22:18.327
> 
> 标签：php, symfony, doctrine-orm

我有这种情况：

*   `User`将属于`Groups`
*   `Groups`会有一定的`Roles`

现在我想知道我是否需要在 Group.php 中声明它

这是[Group.php](http://pastebin.com/B6CTa2vM)，这是[Role.php](http://pastebin.com/rrZa8Ejv)。

```
$this->roles = new \Doctrine\Common\Collections\ArrayCollection(); 
```

或者

```
$this->roles = new array(); 
```

我很困惑这如何与 symfony 安全性一起工作。我的意思是什么格式的 symfony 安全想要在 arraycollection 或 array 中的角色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:23:55.420

Symfony 2 期望 和`array`of`Role`作为方法中的返回值`getRoles()`。由于 a`User`可以有很多`Group`，每个组可能有很多`Role`，我会这样做：

```
/**
 * @ORM\Entity
 * @ORM\Table(name="user")
 */
class User
{
    /* @ORM\ManyToMany(targetEntity="Group", inversedBy="users") */
    private $groups;

    public function __construct()
    {
        $this->groups = new \Doctrine\Common\Collections\ArrayCollection();
    }

    public function getRoles()
    {
        $roles = array();

        foreach($this->groups as $group) :
            $roles = array_merge($roles, $group->getRoles()->toArray());
        endforeach;

        return $roles;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:56:21.297

所以，你的问题是`Array`或`ArrayCollection`？

使用 ArrayCollection 因为它在 ORM 的上下文中做得更好，并且更容易扩展/操作（参见：[Doctrine Collections](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/association-mapping.html#collections)）。

有关在 Doctrine 中设置集合的更多信息，请参阅文档中的[初始化集合](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/association-mapping.html#initializing-collections) 。

* * *

**FOSUserBundle**

您可能还想考虑使用出色的[Friends of Symfony (FOS)UserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle)。这完全支持`Groups`和`Roles`。

**访问控制列表 (ACL)**

您可能还想查看 ACL：

> 在复杂的应用程序中，您经常会面临这样的问题，即访问决策不仅基于请求访问的人（Token），而且还涉及正在请求访问的域对象。这就是 ACL 系统的用武之地。

[Symfony2 - 访问控制列表](http://symfony.com/doc/current/cookbook/security/acl.html)

# javascript - 淘汰js试图在foreach中使用select

> ID：11556749
> 
> 赞同：1
> 
> 时间：2012-07-19T08:22:37.050
> 
> 标签：javascript, knockout.js, knockout-2.0

我是一个 KO 新手，我正在做一个小型演示项目来开始使用 KO。这是一个小表格，有问题和下拉选择答案，用户可以从中选择。

HTML 片段是

```
<div data-bind="foreach: $root.bookArr1" >
    <p> Which book says <span data-bind="text: $data.bookQoute"></span>.</p>
    <p><select data-bind="options: $root.bookArr, value: answer, optionsText: 'bookName', uniqueName: true"></select></p>           
</div> 
```

视图模型如下（仅片段）

```
this.firstName = ko.observable();
this.lastName = ko.observable();
this.answer = ko.observable();

this.bookQoutes = ([ 
    { bookQoute: "Curiouser and curiouser!", bookName: "Alice in wonderland" },
    { bookQoute: "Standard (iceream)", bookName: "PQR" },
    { bookQoute: "Standard (honey)", bookName: "LMY" },
    { bookQoute: "Standard (lemon)", bookName: "JND" }
]);

this.bookArr1 = ko.observableArray( this.bookQoutes );

this.bookArr = ko.observableArray( this.bookQoutes ); 
```

我的问题是，当我从我的 html 中删除 value : answer 时，它运行良好并显示四行及其下方的下拉菜单。

但是当我添加 value: answer 时，我得到以下异常

```
Unable to parse bindings. Message: ReferenceError: answer is not defined; 
Bindings value: options: $root.bookArr, value: answer, optionsText: 'bookName', uniqueName: true 
```

谁能指出我在这里做错了什么。我到处查找，但似乎无法找到解决此问题的方法。

谢谢蒂塔什

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T09:14:03.920

您需要指定值：$root.answer，因为此时的绑定上下文是 bookQoute 的当前实例，而不是根，因此 Knockout 将在 bookQoute 上查找 answer 属性而不是找到它。

# html - 用于存储旧文本文档（塔木德、圣经等）的适当 XML 应用程序

> ID：11556754
> 
> 赞同：0
> 
> 时间：2012-07-19T08:22:57.587
> 
> 标签：html, xml, xhtml, sgml

我计划建立一个简单但广泛的古老宗教文献数据库。我想知道是否有人可以建议一种现有的 XML 兼容格式来存储此类文档。最好是一个简单的，很容易转换为 xhtml。我听说过 TEI，但是 afaik，TEI 基于 SGML，不符合 XML。在此先感谢，欢迎任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:05:31.450

好吧，你可以试试 TEI Boilerplate。来自网站的描述：

> TEI Boilerplate 是一种轻量级的解决方案，用于直接在现代浏览器中发布风格化的 TEI P5 内容。使用 TEI 样板，TEI XML 文件可以直接提供给 Web，无需服务器端处理或转换为 HTML

另外，我认为存在一个混淆：TEI 实际上是一种基于 XML 的语言。反正地址是这样的：

[http://sourceforge.net/p/teiboilerplate/wiki/Home/](http://sourceforge.net/p/teiboilerplate/wiki/Home/)

希望能帮助到你。

# python - 关于布尔值的变化

> ID：11556759
> 
> 赞同：0
> 
> 时间：2012-07-19T08:23:30.060
> 
> 标签：python, openerp

我想问

我有 2 个布尔值（复选框），所以我想要这样。

当我单击第一个布尔值（复选框）时，布尔值第二个为真，但如果我单击第二个布尔值，则条件第一个复选框为假。

我怎么能那样做？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:40:14.203

您可以编写更改方法，您可以在其中返回其他字段或相同字段的值。因此，在更改方法的第一个字段上，您的代码可能如下所示：

```
def on_change_bool1(self, cr, uid, ids, bool1):
    return {'value':{'bool1':bool1,'bool2':False}} 
```

关于更改功能的第二个字段的代码

```
def on_change_bool2(self, cr, uid, ids, bool2):
    return {'value':{'bool2': bool2,'bool1':False}} 
```

是的，您可以在这里更改业务逻辑，但请记住，在更改时它可以返回多个字段的原因，并且该值将被设置，因此如果您想强制设置一些布尔字段为 false，则强制返回 false，这样您就永远无法做到让它成为现实。或者您可以以同样的方式选择您的业务逻辑。

希望这会帮助你。

# android - 如何在屏幕上显示位图的一部分？

> ID：11556761
> 
> 赞同：0
> 
> 时间：2012-07-19T08:23:49.880
> 
> 标签：android

现在我想做一个效果，当我的手指触摸屏幕上的图片时，图片将从图片顶部显示到我准确触摸的位置。你能给我一些建议来实现这个效果吗。谢谢一百万，不管你能不能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:45:05.723

不是解决方案，而是一个线索：

您可能需要实现自己的动画来缩放/翻译您的图像。[google](http://goo.gl/ZQNlD)上有很多 tuts 。

我希望这能帮到您。

# jquery - 为什么在jquery中添加新标签时没有内容？

> ID：11556765
> 
> 赞同：0
> 
> 时间：2012-07-19T08:23:52.837
> 
> 标签：jquery, jquery-ui

首先，我使用以下代码创建了一个选项卡：

```
<div id="statsTabs" style="width:100%; height:100%">
    <ul>
        <li><a href="#f-campaign"><span>广告系列</span></a></li>
        <li><a href="#f-adgroup"><span>广告组&lt;/span></a></li>
   </ul>
</div>
<div id="f-campaign">...</div>
<div id="f-adgroup">...</div>
<script>
   $(document).ready(function() {
     $("#statsTabs").tabs();
   });
</script> 
```

一切都很好，但是当我尝试下面的代码时，我遇到了一些问题：

```
$("#statsTabs").tabs( "remove" , 0);
$("#statsTabs").tabs("add", '#f-campaign', "广告系列" , 0); 
```

出现一个带有“广告系列”标签的新标签，但里面没有内容，为什么？由于第一个代码段获取了#f-campaign 的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:26:04.397

当您调用 Remove 函数时，它会删除选项卡和内容。

这就是您无法再次添加它的原因。您需要重新构建它才能执行此操作。

我做了一个 JS fiddle`console.log()`来证明这一点：http: [//jsfiddle.net/Allan/2YcBh/](http://jsfiddle.net/Allan/2YcBh/)

您可以通过使用如下回调函数来避免这种情况：

```
$(document).ready(function() {
    $("#statsTabs").tabs({
       remove: function(event, ui) {
        // Back up the content here, or simply move the tab so that you can add it again later.
       }
    });
    $('input').click(function() {
        $("#statsTabs").tabs( "remove" , 0);
        console.log($('#f-campaign'));
        $("#statsTabs").tabs("add", '#f-campaign', "广告系列" , 0);
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:39:21.413

this：也`$("#statsTabs").tabs( "remove" , 0);` 删除 the`li`和关联`div`的，因此当您再次添加选项卡时，它没有内容，正如预期的那样。

# css - 歌剧中的日期弹出选择器问题

> ID：11556771
> 
> 赞同：0
> 
> 时间：2012-07-19T08:24:03.113
> 
> 标签：css, html, drupal-7

我有网站（正在开发中），一切似乎都很好，除了歌剧中的日期弹出选择器。在其他浏览器中，两个输入都处于活动状态，但在 Opera 中，第一个看起来不错，但另一个看起来就像不存在（或像图像） 这是网站，您可以在其中检查代码 [http://stagealpha.dyndns。 org/plasma/articles](http://stagealpha.dyndns.org/plasma/articles) 有什么想法会导致这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T23:38:08.540

您可以使用

```
<input type="date"> 
```

这将为您提供每个浏览器都支持的日期选择器，如果新浏览器不支持它，则默认为文本....

如果您想查看它的外观，请查看[http://wufoo.com/html5/types/4-date.html](http://wufoo.com/html5/types/4-date.html)

# javascript - 我们可以使用 Javascript 获取浏览器历史记录吗？

> ID：11556781
> 
> 赞同：17
> 
> 时间：2012-07-19T08:25:01.023
> 
> 标签：javascript, browser, browser-history

我们可以使用 Javascript 获取我网站的浏览器历史记录吗？

我可以看到一些旧帖子和线程在谈论这个......但这些方法对我不起作用。

是否可能以及如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T08:27:10.397

你可以利用 JavaScript 的[**History 对象**](http://www.exforsys.com/tutorials/javascript/javascript-history-object-properties-and-methods.html)来做到这一点

history 属性的返回值是 history 对象，它是一个历史项目数组，其中包含从该窗口访问的 URL 的详细信息。另外，请注意 History 对象是 JavaScript 对象，而不是 HTML DOM 对象。

Window 对象历史属性的语法：

```
window.history 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T08:29:30.650

如果您正在寻找一种在浏览器历史 URL 中导航的方法。这些链接会很有帮助。

*   [http://www.w3schools.com/jsref/obj_history.asp](http://www.w3schools.com/jsref/obj_history.asp)
*   [https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history/](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-07-06T12:34:04.000

出于隐私原因，不能读取客户端浏览器历史数据。

如果您尝试**仅在您的域中**观察或生成有关访问者的数据，则可以使用会话和 cookie 保存页面信息。

您还可以通过自己的脚本收集网站可点击对象上的点击数据，这些脚本通过 ajax 请求发送数据。

如果您正在运行单页应用程序类型的网站并使用“pushState()”函数生成您自己的 url，您只需要添加一些额外的代码来收集该数据并在页面/url 更改时使用 ajax 发送信息。

# python - 减少 Python 中的 SQLITE3 访问时间（并行化？）

> ID：11556783
> 
> 赞同：0
> 
> 时间：2012-07-19T08:25:19.827
> 
> 标签：python, sqlite, parallel-processing

我在 sqlite3 中有一个巨大的数据库，表中有 4100 万行。但是，执行单个查询大约需要 14 秒。我需要显着提高访问时间！这是硬盘硬件限制还是处理器限制？如果是处理器限制，那么我想我可以使用 8 个处理器来并行化查询。但是，我从来没有找到一种方法来并行化 SQLite for python 中的查询。有没有办法做到这一点？我可以有一个编码示例吗？还是其他数据库程序的访问效率更高？如果是，那是哪些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:50:38.083

首先，确保任何相关索引都到位以协助有效查询——这可能会或可能不会帮助......

除此之外，SQLite 是一个（奇怪的）*精简*的嵌入式 SQL DB 引擎——4100 万行可能正在推动它，具体取决于列的数量和大小等......

您可以使用您的数据库并将其导入`PostgreSQL`or `MySQL`，它们都是具有 Python 绑定和广泛功能集的开源 RDMS。他们将能够有效地处理大数据上的查询、索引、缓存、内存管理等。（或者至少，因为它们是为此目的而设计的，所以比没有的 SQLite 更有效......）

# c# - StatusStrip 可以根据其项目的大小自动更改其高度吗？

> ID：11556785
> 
> 赞同：4
> 
> 时间：2012-07-19T08:25:31.067
> 
> 标签：c#, winforms, autosize, statusstrip

我有一个包含许多项目的状态条。其中之一是`ToolStripStatusLabel`with `Spring = True`。当标签的文字太长时，看不到它。

是否可以使状态条变得更高并在多行中显示整个文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T12:10:40.410

这是一个有趣的问题....我尝试了几件事，但没有成功...基本上 ToolStripStatusLabel 的功能非常有限。

我最终尝试了一个 hack 来给出你想要的结果，但我不确定我是否会推荐这个，除非这当然是绝对必要的......

这就是我得到的...

在 StatusStrip 的属性中设置 AutoSize = false，这是为了允许调整 StatusStrip 的大小以容纳多行。我假设名为 ststusStrip1 的 statusStrip 包含名为 toolStripStatusLabel1 的标签。

在表单级别声明一个 TextBox 类型的变量：

```
 TextBox txtDummy = new TextBox(); 
```

在 Form Load 设置它的一些属性：

```
 txtDummy.Multiline = true;
  txtDummy.WordWrap = true;
  txtDummy.Font = toolStripStatusLabel1.Font;//Same font as Label 
```

处理 toolStripStatusLabel1 的绘制事件

```
 private void toolStripStatusLabel1_Paint(object sender, PaintEventArgs e)
 {        

    String textToPaint = toolStripStatusLabel1.Tag.ToString(); //We take the string to print from Tag
    SizeF stringSize = e.Graphics.MeasureString(textToPaint, toolStripStatusLabel1.Font);
    if (stringSize.Width > toolStripStatusLabel1.Width)//If the size is large we need to find out how many lines it will take
    {
        //We use a textBox to find out the number of lines this text should be broken into
        txtDummy.Width = toolStripStatusLabel1.Width - 10;
        txtDummy.Text = textToPaint;
        int linesRequired = txtDummy.GetLineFromCharIndex(textToPaint.Length - 1) + 1;
        statusStrip1.Height =((int)stringSize.Height * linesRequired) + 5;
        toolStripStatusLabel1.Text = "";
        e.Graphics.DrawString(textToPaint, toolStripStatusLabel1.Font, new SolidBrush( toolStripStatusLabel1.ForeColor), new RectangleF( new PointF(0, 0), new SizeF(toolStripStatusLabel1.Width, toolStripStatusLabel1.Height)));
    }
    else
    {
        toolStripStatusLabel1.Text = textToPaint;
    }
} 
```

IMP：不要分配标签的文本属性，而是将其放在标签中，我们将从标签中使用它

```
 toolStripStatusLabel1.Tag = "My very long String"; 
```

![截屏](../Images/74f21dfd72804f6f62c1d5876c43b836.png)

# javascript - 如何使用 xsl 值作为 onclick 的 ID

> ID：11556786
> 
> 赞同：2
> 
> 时间：2012-07-19T08:25:30.917
> 
> 标签：javascript, xml, xslt

我有以下代码：（我使用 jquery）

```
<a href="javascript:" 
  onclick="document.getElementById('TEST').style.display = ( (document.getElementById('TEST').style.display == 'block') ? 'none' : 'block' );">
  <xsl:value-of select="$DisplayTitle"/>
</a>

<div id="TEST" style="display:none">
  <xsl:value-of select="@Announcement" />
</div> 
```

这工作正常。但是我正在提取多个元素，因此唯一显示 hide 的第一个公告是合乎逻辑的，因为这是 ID:TEST 的第一个元素

现在我希望你使用 `<xsl:value-of select="@ID" />`elementbyid 但我不能只把它放在引号之间。以下内容格式不正确

```
<a href="javascript:" 
  onclick="document.getElementById('<xsl:value-of select="@ID" />').style.display = ( (document.getElementById('TEST').style.display == 'block') ? 'none' : 'block' );">
    <xsl:value-of select="$DisplayTitle"/>
</a> 
```

关于如何正确格式化的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:10:12.423

**更紧凑的解决方案**：

```
<div id="{@ID}">
    <xsl:value-of select="@Announcement"/>
</div> 
```

此外，wirhin`onclick`属性使用：

```
getElementById({@ID}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:28:14.863

您需要在希望放置属性的元素中**使用**命令`<xsl:attribute>`...

 **```
<a href="javascript:">
  <xsl:attribute name="onclick">document.getElementById('<xsl:value-of select="@ID" />').style.display = ( (document.getElementById('TEST').style.display == 'block') ? 'none' : 'block' );</xsl:attribute>
  <xsl:value-of select="$DisplayTitle"/>
</a> 
```

**更新**基于 OP 的评论...

正如我上面所说，`<xsl:attribute`必须在您希望使用该属性的元素内......事实上它必须是之后的第**一个****命令**。

代替...

```
<xsl:attribute name="id"><div id="<xsl:value-of select="@ID" />"><xsl:value-of select="@Announcement" /></div></xsl:attribute> 
```

您应该有（用换行符格式化以在此处查看）...

```
<div>
  <xsl:attribute name="id"><xsl:value-of select="@ID"/></xsl:attribute>
  <xsl:value-of select="@Announcement"/>
</div> 
```**

# c# - 在实体框架 4.0 中将字符串转换为 int 时出现运行时错误

> ID：11556788
> 
> 赞同：0
> 
> 时间：2012-07-19T08:25:41.883
> 
> 标签：c#, entity-framework-4

```
protected void GetFinalResult(IQueryable<clsProfileData> result)
{
    if (ddlHeightFrom.SelectedValue != "0" && ddlHeightTo.SelectedValue != "0")
    {
        int from = Convert.ToInt32(ddlHeightFrom.SelectedValue);      
        result = result.Where(p => Convert.ToInt32(p.Height) > from);
    }
} 
```

我正在使用 Entity Framework 4.0 并且在上述方法`p.Height`中是错误导致转换（字符串到 int）。有什么办法可以处理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:53:19.607

一个建议：如果可以的话，将高度作为数字存储在数据库中。EF（目前）没有内置函数可以轻松地将字符串转换为数字。[EntityFunctions](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.aspx) * 或[SqlFunctions](http://msdn.microsoft.com/en-us/library/system.data.objects.sqlclient.sqlfunctions.aspx)也不能帮助您。

存储数字不仅使查询更容易，而且还使您能够编写[可搜索的](http://en.wikipedia.org/wiki/Sargable)查询。`Where`正如您现在所拥有的那样，带有转换会禁用列上的任何索引。

如果您无法更改数据库，则可以使用一种解决方法：您可以使用前导零存储数字，以确保它们都具有相同的长度。然后您可以使用字符串比较，因为在排序`00002`之前出现`00010`，而在排序时`2`出现在之后`10`。这样做，您可以`String.Compare`在 linq 语句中使用，该语句转换为sql`<`或`>`在 sql 中。

另请参阅：[https ://stackoverflow.com/a/10521557/861716](https://stackoverflow.com/a/10521557/861716)

^(* Entity Framework 6 中的[DbFunctions](http://msdn.microsoft.com/en-us/library/system.data.entity.dbfunctions.aspx)。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:27:21.220

将字符串转换为 Int32 时出错。我在 XML 数据描述中找不到字段是 Int32 的任何地方。最后，存储的过程将该字段作为 int 返回，而不是字符串。奇怪的是，错误消息抱怨它无法将数据投射到另一个方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:29:01.943

首先尝试解析有效​​性：

[http://msdn.microsoft.com/en-uk/library/f02979c7.aspx](http://msdn.microsoft.com/en-uk/library/f02979c7.aspx)

（也可能在您执行此操作时：

```
Convert.ToInt32(ddlHeightFrom.SelectedValue) 
```

)

例如

```
int from;
int h;
bool fromres= Int32.TryParse(ddlHeightFrom.SelectedValue, out from);
bool hres= Int32.TryParse(p.Height, out h);
... 
```

# for-loop - 为什么`i`总是在for循环中被视为1

> ID：11556789
> 
> 赞同：0
> 
> 时间：2012-07-19T08:25:46.117
> 
> 标签：for-loop, lua, string-formatting, increment

我编写了这个简单的脚本来更新 MySQL 中的表。为此，我创建了一个 for 循环并尝试了以下操作（[键盘链接](http://codepad.org/sXKJan4O)）：

```
sUpdate = [[UPDATE `latest`
SET `date` = '%s'
WHERE `date` = '%s'
AND `fid` > 50000]]

for i = 1, 12 do
  print( i )
  sOldDate = "2009-"..tostring(i).."-10"
  sNewDate = "2010-09-"..tostring(i)
  sUpdate = string.format( sUpdate, sNewDate, sOldDate )
  print( sUpdate )
end 
```

输出如下：

```
1
UPDATE `latest`
SET `date` = '2010-09-1'
WHERE `date` = '2009-1-10'
AND `fid` > 50000
2
UPDATE `latest`
SET `date` = '2010-09-1'
WHERE `date` = '2009-1-10'
AND `fid` > 50000
3
UPDATE `latest`
SET `date` = '2010-09-1'
WHERE `date` = '2009-1-10'
AND `fid` > 50000
4
UPDATE `latest`
SET `date` = '2010-09-1'
WHERE `date` = '2009-1-10'
AND `fid` > 50000
5
UPDATE `latest`
SET `date` = '2010-09-1'
WHERE `date` = '2009-1-10'
AND `fid` > 50000
6
UPDATE `latest`
SET `date` = '2010-09-1'
WHERE `date` = '2009-1-10'
AND `fid` > 50000
7
UPDATE `latest`
SET `date` = '2010-09-1'
WHERE `date` = '2009-1-10'
AND `fid` > 50000
8
UPDATE `latest`
SET `date` = '2010-09-1'
WHERE `date` = '2009-1-10'
AND `fid` > 50000
9
UPDATE `latest`
SET `date` = '2010-09-1'
WHERE `date` = '2009-1-10'
AND `fid` > 50000
10
UPDATE `latest`
SET `date` = '2010-09-1'
WHERE `date` = '2009-1-10'
AND `fid` > 50000
11
UPDATE `latest`
SET `date` = '2010-09-1'
WHERE `date` = '2009-1-10'
AND `fid` > 50000
12
UPDATE `latest`
SET `date` = '2010-09-1'
WHERE `date` = '2009-1-10'
AND `fid` > 50000 
```

如您所见，`print(i)`打印效果很好，但是 the`sOldDate`和`sNewDate`have i 都被视为**1**。然后我改变了`sOldDate`和`sNewDate`如下：

```
sOldDate = string.format("2009-%d-10", i)
sNewDate = string.format("2010-09-%d", i) 
```

而且我仍然得到两个日期的输出：*2009-1-10*和*2010-09-1*如此[处所示](http://codepad.org/c8KkzORY)。

这个循环可能有什么问题。我在这样的循环上工作了很长时间，直到今天他们从未让我失望过。

我认为这只是我无法识别的一些愚蠢的错误。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T08:49:13.447

如前所述，您需要在循环内重命名 sUpdate 以避免覆盖外部的并破坏 string.format()。然后，您可以在 string.format() 中使用 %02d 将数字零填充到长度至少为两位数：

```
local sUpdate = [[UPDATE `latest`
SET `date` = '%s'
WHERE `date` = '%s'
AND `fid` > 50000]]

for i = 1, 12 do
  print( i )
  local sOldDate = string.format("2010-%02d-10", i)
  local sNewDate = string.format("2010-09-%02d", i)
  local update = string.format( sUpdate, sNewDate, sOldDate )
  print( update )
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T08:39:57.097

是的，问题是你`sUpdate`每次都在覆盖。

第一次，您将覆盖字符串占位符`%s`，之后，字符串将不再更改。

尝试重命名内部`sUpdate`。而且我认为您希望所有变量都为`local`?

```
local sUpdate = [[UPDATE `latest`
SET `date` = '%s'
WHERE `date` = '%s'
AND `fid` > 50000]]

for i = 1, 12 do
  print( i )
  local sOldDate = "2009-"..tostring(i).."-10"
  local sNewDate = "2010-09-"..tostring(i)
  local sUpdate = string.format( sUpdate, sNewDate, sOldDate )
  print( sUpdate )
end 
```

**编辑：**正如你在上面看到的，我保留了你的变量名，但内部`sUpdate`不会影响外部，因为它是声明的`local`。Lua 中的所有变量默认都是全局变量，因此最好确保使用声明局部变量和`local`. 我会选择使用不同的变量名称，例如：

```
local sUpdateTemplate = [[UPDATE `latest`
SET `date` = '%s'
WHERE `date` = '%s'
AND `fid` > 50000]]

for i = 1, 12 do
  print( i )
  local sOldDate = "2009-"..tostring(i).."-10"
  local sNewDate = "2010-09-"..tostring(i)
  local sUpdate = string.format( sUpdateTemplate, sNewDate, sOldDate )
  print( sUpdate )
end 
```

# php - PHP 中的 ip2long() 是否等于 MySQL 中的 INET_ATON() 函数？

> ID：11556791
> 
> 赞同：7
> 
> 时间：2012-07-19T08:25:51.383
> 
> 标签：php, mysql

如果我们有一个如下的IP地址：

```
127.0.0.1 
```

这两个函数是否将 ip 地址转换为相同的数字，或者它们是否不同并具有不同的结果？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-19T08:27:01.113

它们几乎完全相同。**ip2long**有时会返回负值，因为 PHP 使用有符号数进行估值，而 MySQL 使用无符号数。

两者都被评估为`x*(2^24) + y*(2^16) + z*(2^8) + w*(2^0)`，但在 PHP 中，由于长期签名，某些 IP 地址将显示负值。

```
For signed long, the range is 
(2^31) - 1 = −2,147,483,648 to +2,147,483,647 
```

因此，地址转换为 +2,147,483,647 时将环绕并给出负值。

```
ip2long("254.254.254.254"); // -16843010 
```

此[链接](http://mwillis.co.uk/mysql/ip2long-vs-inet_aton/)详细描述了这一点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-28T20:17:52.877

简而言之，不，但这个功能是：

```
function ipv4touint($ipv4){
    return sprintf('%u',ip2long($ipv4));
} 
```

# cakephp - 向静态页面和布局添加助手

> ID：11556793
> 
> 赞同：0
> 
> 时间：2012-07-19T08:26:12.970
> 
> 标签：cakephp

我可以`helper`在我的静态页面（例如我的主页）和布局中添加一个吗？如何？（因为没有可用的操作。在`PagesContoller.php`中，我们有`display`操作。我添加了一个`home`操作，但它被`display`操作覆盖）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:46:38.543

要在每个控制器和布局中使用 Helper，您可以在 AppController.php 中加载：

```
<?php
    class AppController extends Controller {
          public $helpers = array('Form', 'Html', 'Js', 'Time', 'MyCustomHelper');
    }
 ?> 
```

由于以下默认设置，您的`home`操作将不起作用`Config/routes.php`：

```
 Router::connect('/pages/*', array('controller' => 'pages', 'action' => 'display')); 
```

任何传递给 /pages/ 的参数都会发送到`display`操作。在 PagesController 中为函数创建新路由或创建新控制器。

使 PagesController 函数工作的示例路线：

```
 Router::connect('/pages/show/:action/*', array('controller' => 'pages')); 
```

（把这条路线放在你的路线**之前**`/pages/*`！）

# opencv - 交叉编译示例 cpp 时出现 Opencv 链接器错误（libopencv_calib3d.so：无法读取符号）

> ID：11556796
> 
> 赞同：0
> 
> 时间：2012-07-19T08:26:46.653
> 
> 标签：opencv, linker, cross-compiling, ubuntu-12.04

我正在尝试为我的 beaglebone 交叉编译示例 OpenCV cpp 代码，该代码具有基于 ARM Cortex A8 的 AM3359 处理器。但是，当我开始交叉编译时，出现以下错误：

/usr/local/lib/libopencv_calib3d.so：无法读取符号：文件格式错误 collect2：ld 返回 1 退出状态

这似乎是一个链接器错误。我很确定 libopencv_calib3d.so 没有任何问题。因为当我为我的 PC 编译程序时，一切正常。因此，问题可能出在我用于交叉编译的方法上。这是我所做的：

我以compile_opencvarm.sh的名义写了一个脚本：

```
echo "Cross-Compiling $1" 
if [[ $1 == *.c ]]
then
    arm-linux-gnueabi-gcc -ggdb `pkg-config --cflags opencv` -o `basename $1 .c` $1 `pkg-config --libs opencv`;
elif [[ $1 == *.cpp ]]
then
    arm-linux-gnueabi-g++ -ggdb `pkg-config --cflags opencv` -o `basename $1 .cpp` $1     `pkg-config --libs opencv`;
else
    echo "Please compile only .c or .cpp files with this script"
fi
echo "Cross-Compiled Output => ${1%.*}" 
```

然后将其添加到 bashrc：

```
alias opencv_arm="~/.compile_opencvarm.sh" 
```

现在当我这样做时：

```
root@ghostrider:/home/zero/Desktop# opencv_arm peopledetect.cpp 
Cross-Compiling peopledetect.cpp
/usr/local/lib/libopencv_calib3d.so: could not read symbols: File in wrong format
collect2: ld returned 1 exit status
Cross-Compiled Output => peopledetect 
```

编译脚本和交叉编译脚本的唯一区别是我在交叉编译脚本中使用了 arm-linux-gnueabi 前缀。当我只编译 cpp 文件时：

```
root@ghostrider:/home/zero/Desktop# opencv peopledetect.cpp 
compiling peopledetect.cpp
Output file => peopledetect 
```

一切都好。程序是可执行的。

现在你认为我的问题是什么？是链接器错误还是与我的交叉编译过程有关？

问候

编辑：哦，现在我注意到在 arm-linux-gnueabi 编译器使用它们之前我没有安装基于 arm 的交叉库。所以我安装了它们：

```
sudo xapt -a armel -m libv4l-dev libgtk2.0-dev libcv-dev libcvaux-dev libhighgui-dev 
```

并编辑脚本如下：

```
arm-linux-gnueabi-g++ -ggdb `arm-linux-gnueabi-pkg-config --cflags opencv` -o `basename $1 .cpp` $1 `arm-linux-gnueabi-pkg-config --libs opencv`; 
```

但现在我遇到了问题：

```
root@ghostrider:/home/zero/Desktop# opencv_arm peopledetect.cpp 
compiling peopledetect.cpp
 /usr/lib/gcc/arm-linux-gnueabi/4.6/../../../../arm-linux-gnueabi/bin/ld: warning: liblapack.so.3gf, needed by /usr/arm-linux-gnueabi/lib/libcxcore.so, not found (try using -rpath or -rpath-link)
/tmp/ccDzUCLJ.o: In function `main':
/home/zero/Desktop/peopledetect.cpp:49: undefined reference to `cv::HOGDescriptor::setSVMDetector(cv::_InputArray const&)'
/home/zero/Desktop/peopledetect.cpp:84: undefined reference to     `cv::HOGDescriptor::detectMultiScale(cv::Mat const&, std::vector<cv::Rect_<int>,  std::allocator<cv::Rect_<int> > >&, double, cv::Size_<int>, cv::Size_<int>, double, double, bool) const'
 /tmp/ccDzUCLJ.o: In function `cv::Mat::operator=(cv::Mat const&)':
 /usr/include/opencv2/core/mat.hpp:317: undefined reference to `cv::Mat::copySize(cv::Mat     const&)'
/tmp/ccDzUCLJ.o: In function `cv::Mat::release()':
 /usr/include/opencv2/core/mat.hpp:382: undefined reference to `cv::Mat::deallocate()'
 /tmp/ccDzUCLJ.o: In function `_InputArray<float>':
 /usr/include/opencv2/core/mat.hpp:1108: undefined reference to `vtable for cv::_InputArray'
/usr/arm-linux-gnueabi/lib/libcxcore.so: undefined reference to `dgelsd_'
/usr/arm-linux-gnueabi/lib/libcxcore.so: undefined reference to `dpotrf_'
/usr/arm-linux-gnueabi/lib/libcxcore.so: undefined reference to `dpotri_'
/usr/arm-linux-gnueabi/lib/libcxcore.so: undefined reference to `dsyevr_'
/usr/arm-linux-gnueabi/lib/libcxcore.so: undefined reference to `dgesv_'
/usr/arm-linux-gnueabi/lib/libcxcore.so: undefined reference to `dpotrs_'
/usr/arm-linux-gnueabi/lib/libcxcore.so: undefined reference to `dgetri_'
/usr/arm-linux-gnueabi/lib/libcxcore.so: undefined reference to `sgels_'
/usr/arm-linux-gnueabi/lib/libcxcore.so: undefined reference to `sgesv_'
/usr/arm-linux-gnueabi/lib/libcxcore.so: undefined reference to `dgetrf_'
/usr/arm-linux-gnueabi/lib/libcxcore.so: undefined reference to `sgetrf_'
/usr/arm-linux-gnueabi/lib/libcxcore.so: undefined reference to `dgels_'
/usr/arm-linux-gnueabi/lib/libcxcore.so: undefined reference to `spotrf_'
/usr/arm-linux-gnueabi/lib/libcxcore.so: undefined reference to `sgelsd_'
/usr/arm-linux-gnueabi/lib/libcxcore.so: undefined reference to `sgesdd_'
/usr/arm-linux-gnueabi/lib/libcxcore.so: undefined reference to `spotri_'
/usr/arm-linux-gnueabi/lib/libcxcore.so: undefined reference to `ssyevr_'
/usr/arm-linux-gnueabi/lib/libcxcore.so: undefined reference to `dgesdd_'
/usr/arm-linux-gnueabi/lib/libcxcore.so: undefined reference to `spotrs_'
/usr/arm-linux-gnueabi/lib/libcxcore.so: undefined reference to `sgetri_'
collect2: ld returned 1 exit status
Output file => peopledetect 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:32:13.073

我按照本指南交叉编译所有 OpenCV 库解决了我的问题：http: [//processors.wiki.ti.com/index.php/Building_OpenCV_for_ARM_Cortex-A8](http://processors.wiki.ti.com/index.php/Building_OpenCV_for_ARM_Cortex-A8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:52:56.643

我按照本指南进行操作，但构建后 opencv 分配根目录中的“lnclude/opencv2”目录为空。所以事实上我有图书馆但没有标题。我究竟做错了什么？

UPD：我应该更小心一点，所有答案都在[http://processors.wiki.ti.com/index.php/Building_OpenCV_for_ARM_Cortex-A8](http://processors.wiki.ti.com/index.php/Building_OpenCV_for_ARM_Cortex-A8)

# android - 以编程方式裁剪 Android 屏幕抓取？

> ID：11556798
> 
> 赞同：5
> 
> 时间：2012-07-19T08:26:52.800
> 
> 标签：android, screenshot

我正在使用以下（清除的）代码来拍摄“屏幕截图” `action_send`。一切正常，唯一的问题是图像不包含状态栏。我知道为什么，我只是不知道该怎么办。有什么方法可以通过编程方式裁剪图像，或者在拨打电话之前设置某种边界`getDrawingCache()`？

提前致谢！

```
View v1 = findViewById(android.R.id.content).getRootView();
v1.setDrawingCacheEnabled(true);
Bitmap screenshot = Bitmap.createBitmap(v1.getDrawingCache());
v1.setDrawingCacheEnabled(false);

String path = Images.Media.insertImage(getContentResolver(), screenshot, "title", null);
Uri screenshotUri = Uri.parse(path);

Intent sharingIntent = new Intent(Intent.ACTION_SEND);
sharingIntent.setType("image/png");
sharingIntent.putExtra(Intent.EXTRA_STREAM, screenshotUri);

startActivity(Intent.createChooser(sharingIntent, "Share image using")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:46:12.990

您可以在发送之前尝试在屏幕截图上使用[Bitmap.createBitmap 。](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap)

```
Bitmap cropimg = Bitmap.createBitmap(originalImg, 0, 0, originalImg.width(), originalImg.height() - x) 
```

'x' 是`Integer`在这种情况下从图像底部裁剪的像素数。您可以进行某些修改并相应地裁剪以满足您的要求。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:50:22.247

问题是您没有像这样截取屏幕截图，而是获取应用程序的当前图像。这不能包括状态栏，因为它不是您的应用程序的一部分，也不能向上扩展绘图区域以捕获状态栏。

# python - 亚马逊广告 API ItemSearch：获得超过 10 个页面/100 个结果？

> ID：11556807
> 
> 赞同：2
> 
> 时间：2012-07-19T08:27:12.223
> 
> 标签：python, amazon-web-services, amazon-product-api

我正在尝试将 Python 包装器用于亚马逊广告 API (http://pypi.python.org/pypi/python-amazon-product-api/)，但是当我尝试执行 ItemSearch 并尝试访问第 11 页，我得到以下内容：

```
The value you specified for ItemPage is invalid. ... between 1 and 10 
```

我知道为了避免这个问题，我可以执行另一个搜索查询，但是有没有办法在某个页面上启动搜索查询？或者有没有办法（对于书籍）为出版年份设定界限？我只需要一种方法来使我的搜索结果更小，这样我就不会遇到这个错误。现在这就是我所说的：

```
results = api.item_search('Books', ResponseGroup='Images,Large', 
                              AssociateTag='qwerty', Publisher=kwd) 
```

其中 kwd 只是从文件中获取的发布者名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:41:56.593

亚马逊只会给你前 10 页（从 API 版本 2011-08-01 开始）。您可以运行稍有不同的搜索以获得更多结果，但这些搜索也仅限于前 10 页。

# vba - 在多列中显示小计

> ID：11556808
> 
> 赞同：2
> 
> 时间：2012-07-19T08:27:16.833
> 
> 标签：vba, excel

我要做的是 SUM IF 在每个小计中的值为 1 created 。我试过使用 Subtotal 选项，但我无法让它工作（可能是因为我不擅长使用 Excel），有时我会得到 0 和 1 的总和。所以我决定做一个VBA。

这组数据差不多

```
- |    A    |    B    |  C  |
-----------------------------
1 | Names   | Points  |  N  |
-----------------------------
2 | Grimer  |   1     |  88 |
3 | Grimer  |   1     |  88 |
4 | Grimer  |   0     |  88 |
5 | Psyduck |   1     |  54 |
6 | Psyduck |   0     |  54 |
7 | Psyduck |   0     |  54 |
8 | Pikachu |   1     |  25 | 
9 | Pikachu |   1     |  25 |
10| Pikachu |   1     |  25 | 
```

这就是我想要得到的：

```
 |    A    |    B    |  C  |
-------------------------------
   1 | Names   | Points  |  N  |
-------------------------------
|  2 | Grimer  |   1     |  88 |
|  3 | Grimer  |   1     |  88 |
|  4 | Grimer  |   0     |  88 |
-  5 | Grimer  |   2     |  88 |
|  6 | Psyduck |   1     |  54 |
|  7 | Psyduck |   0     |  54 |
|  8 | Psyduck |   0     |  54 |
-  9 | Psyduck |   1     |  54 |
|  10| Pikachu |   1     |  25 | 
|  11| Pikachu |   1     |  25 |
|  12| Pikachu |   1     |  25 |
-  13| Pikachu  |   3     |  25 | 
```

每行开头的虚线（从 2 开始）是我要创建的组（每行的 B 单元格是结果.. 它应该是粗体）。下面的代码是为了得到之前的结果（表格）。它有效，但我想知道是否有一种方法，是否有更好的解决方案在 Excel 上执行此操作而无需编程。或者......是否有任何错误，因为当我运行它时，它需要几秒钟（超过 4000 行）。

```
Sub GetPointsByPokemon()

    With ThisWorkbook.ActiveSheet

        Dim Fila As Integer, InitRow As Integer, Suma As Integer

        PkNumber = .Range("C2").Value
        InitRow = 2
        ActualRow = 2
        Suma = 0

        Do Until .Cells(ActualRow, 1).Value = ""
            If .Cells(ActualRow, 2).Value = 1 Then
                Suma = Suma + 1
            End If

            If PkNumber <> .Range("C" & (ActualRow + 1)).Value Then
                .Cells(ActualRow, 1).Offset(1).EntireRow.Insert
                PkNumber = .Range("C" & (ActualRow + 2)).Value

                .Range(ActualRow & ":" & ActualRow).Offset(1).Value = .Range(ActualRow & ":" & ActualRow, 1).Value

                .Range("B" & (ActualRow + 1)).Value = Suma
                .Rows(InitRow & ":" & ActualRow).Group

                ActualRow = ActualRow + 1
                InitRow = ActualRow + 1
                Suma = 0
            End If

            ActualRow = ActualRow + 1
        Loop

    End With
End Sub 
```

所有数据都是一个示例，我不得不更改代码上的一些值。我已经使用 MySQL 完成了它，但我真的很想知道如何在 excel（和 vba）上做到这一点提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:29:21.543

就个人而言，我喜欢**Bulbasaur。**

我也不喜欢这种方法，因为您将小计硬编码到工作表中**并将它们编织到源数据**中。

但是，如果您仍然想这样做，这里是代码。它很丑，但它有效。

```
Sub AddSubtotals()

  Dim i As Long
  Dim numberOfRows As Long

  ' number of pokemon
  numberOfRows = Cells(Rows.Count, "A").End(xlUp).Row

  ' do bottom row first
  Cells(numberOfRows + 1, 1).value = Cells(numberOfRows, 1).value
  Cells(numberOfRows + 1, 2).FormulaR1C1 = "=SUMIF(R[-" & numberOfRows - 1 & "]C[-1]:R[-" & numberOfRows - (numberOfRows - 1) & "]C[-1],""" & Cells(numberOfRows, 1).value & """,R[-" & numberOfRows - 1 & "]C[0]:R[-" & numberOfRows - (numberOfRows - 1) & "]C[0])"
  ' convert to value
  Cells(numberOfRows + 1, 2).value = Cells(numberOfRows + 1, 2).value
  Cells(numberOfRows + 1, 3).value = Cells(numberOfRows, 3).value

  Range(Cells(numberOfRows + 1, 1), Cells(numberOfRows + 1, 3)).Font.Bold = True

  ' insert blank row in between each group of pokemon
  ' loop backwards because we are inserting rows
  For i = numberOfRows To 3 Step -1
    If Cells(i, 1).value <> Cells(i - 1, 1).value Then
      Cells(i, 1).EntireRow.Insert xlShiftDown

      ' copy pokemon name down
      Cells(i, 1).value = Cells(i - 1, 1).value

      ' put formula into Points field
      Cells(i, 2).FormulaR1C1 = "=SUMIF(R[-" & i - 1 & "]C[-1]:R[-" & i - (i - 1) & "]C[-1],""" & Cells(i, 1).value & """,R[-" & i - 1 & "]C[0]:R[-" & i - (i - 1) & "]C[0])"
      ' convert to value
      Cells(i, 2).value = Cells(i, 2).value

      ' copy N value down
      Cells(i, 3).value = Cells(i - 1, 3).value

      Range(Cells(i, 1), Cells(i, 3)).Font.Bold = True

    End If
  Next i

End Sub 
```

## 代码前的示例数据：

![在运行代码之前](../Images/435c448f941c1cff91f3add11f2c331f.png)

## 代码后的示例数据：

![运行代码后](../Images/7f82fbc5f65231c1b5287de845d829d8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:36:28.083

没有VBA的一种方法：

1.  选择*数据 | 小计*...*在每次更改时*：`Names` *使用功能*：`Sum`，*检查*：`Points`和`N`。

2.  选择 C ​​列并选择将`9,`小计公式中的 (Ctrl+H) 替换为另一个汇总函数，例如：`1,`(average)、`4,`(max) 或`5,`(min)。

![在此处输入图像描述](../Images/1f1e33803f6e21a94c10b8eaeb1b6247.png)

# c# - 将日期从 mm/dd/yyyy 转换为 yyyymmdd

> ID：11556809
> 
> 赞同：-4
> 
> 时间：2012-07-19T08:27:17.573
> 
> 标签：c#, .net

我想要的是当用户以日期格式在文本框中输入文本时，文本变为字符串。例如，当用户输入 2012 年 9 月 25 日时，我必须将其存储为 20120925。将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T08:29:11.333

```
string converted = DateTime.ParseExact(strInput, "MM/dd/yyyy", CultureInfo.InvariantCulture)
                  .ToString("yyyyMMdd"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:47:42.837

```
string str = blackOutFromDate.ToString("yyyyMMdd"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-26T06:00:11.543

`fileName`包含该日期字符串。因此，我`fileName`使用空字符串作为分隔符来拆分`expectedDate`.

然后我将`expectedDate`使用“-”作为分隔符拆分并将其转换为`datetime`.

```
string[] splitFileName = fileName.Split(' ');
string expectedDate = (splitFileName[1]);
string[] dateparts = expectedDate.Split('-');
expextedDate = dateparts[1] + "-" + dateparts[0] + "-" + dateparts[2]; 
DateTime CallDate = Convert.ToDateTime(expextedDate); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T08:29:23.457

使用`System.DateTime`类

```
var date = Convert.ToDateTime(textBox1.Text);
textBox1.Text = date.Year + "" + date.Month + date.Day; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T08:32:35.313

尝试这个

```
var date = DateTime.Parse("9/25/2012");
var modified = string.format("{0}{1}{2}", date.Year, date.Month, date.Day); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-05T10:18:47.747

你可以试试这个，它对我有用。

```
 DateTime dt = Convert.ToDateTime(txtFrom.Text);
 string date = Convert.ToDateTime(dt).ToString("yyyyMMdd"); 
```

# python - 计算python字符串中匹配的括号

> ID：11556810
> 
> 赞同：0
> 
> 时间：2012-07-19T08:27:18.797
> 
> 标签：python

用户键入一个包含正则表达式的字符串，如下所示：

```
'I have the string "(.*)"' 
```

或者

```
'when user enters (\d+) times text "(.*)" truncate spaces' 
```

我需要将每个匹配括号的出现计数为用户类型，因此上面的文本将为第一个文本返回计数 1，为第二个文本返回 2。另一方面，不应该计算没有匹配的括号：

```
'I am in the middle of writing this (' 
```

另外我想避免计算嵌套括号。由于此代码将在 vim 中的*每次*击键时在某些情况下执行（它是 UltiSnips 片段的一部分，因此当我创建片段并输入给定占位符时，此计数函数应评估我在每个新字符上键入的内容）它需要快点；）

总结一下要求：

1.  计算括号对
2.  不要计算没有匹配的括号
3.  不计算嵌套括号
4.  快速数数;)

根据要求 - 这是我为完成这项工作所做的初步努力： [https ://gist.github.com/3142334](https://gist.github.com/3142334)

它有效，但不幸的是它也计算内括号，所以我需要对其进行更多调整。

这是另一种仅计算外括号的解决方案：

```
def fb(string, c=0):
    left_bracket = string.find("(")
    if left_bracket > -1:
        string = string[left_bracket + 1:]
        right_bracket = string.find(")")
        if right_bracket > -1:
            if string[:right_bracket].find("(") == -1:
                c += 1
            string = string[right_bracket + 1:]
        return fb(string, c)
    else:
        return c 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:45:21.240

对于这类任务，使用 Stack ADT 很有用。每当你看到一个左括号将它放入堆栈，当你看到右括号将它从堆栈中弹出并增加计数器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:41:14.293

这是一个基于堆栈的解决方案。仅当输入是某个控制字符时才从整个字符串中计算大括号会更快，但这很棘手，因为在键入之前进行了文本选择和其他原因。这也不是很pythonic，但它似乎工作并且相对较快：

```
#!/usr/bin/env python

import re

def bracecounter(s):
    count = 0; open = 0; braces = []
    for c in s:
        if c in '()':
            braces.append(c)
            if c == '(':
                open += 1
            else:
                if ''.join(braces[-2:]) == '()':
                    braces = braces[:-2]
                    if open == 1:
                        count += 1
                    open -= 1
                else:
                    pass # closing brace without matching opening brace
    return count

fix = [
    (1, 'I have the string "(.*)"'),
    (2, 'when user enters (\d+) times text "(.*)" truncate spaces'),
    (0, 'I am in the middle of writing this ('),
    (1, ') Nested ((braces) will (not) count))))))).'),
    ]

def test():
    for exp, s in fix:
        res = bracecounter(s)
        assert exp == res, "Brace count %s != %s for '%s'" % (res, exp, s)

if __name__ == '__main__':
    test() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-22T16:44:36.540

我正在解决一个括号计数作业问题，并使用列表作为堆栈是我想出来的方式，代码如下：

```
def bracket_match(text):

    stack = []
    pairs = 0

    #iterate through the string
    for letter in text:

        if letter == '(':
            stack.append(letter)

        elif letter == ')':

            if len(stack) == 0:
                pass
            else:
                stack.pop()
                pairs += 1

    return pairs

bracket_match('())(') 
```

# sql - Ruby on Rails：在返回的搜索查询中查找列的总和

> ID：11556813
> 
> 赞同：2
> 
> 时间：2012-07-19T08:27:28.597
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3

我试图找到一个名为 的列的总和`length`，它是一个简单的整数列，其中包含每条记录持续的秒数。

我有一个搜索表单设置来查询数据库中我在控制器中设置的一些条件：

```
@time_entries = TimeEntry.find(:all, :conditions => [ "(user_id = ?) AND (projecttitle LIKE ?) AND (date BETWEEN ? AND ?)", current_user, '%'+params[:projecttitle]+'%', @startdate, @enddate ]) 
```

然后我使用不起作用的代码跟踪该查询，尝试对`length`返回的查询的列求和...

```
@total_time = @time_entries.sum(:length) 
```

然后当我在我的视图中渲染它时`<%= @total_time %>`，我得到了这个错误：

`undefined method '+' for #<TimeEntry:0x007ffdbbd45b78>`

有任何想法吗？非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T08:34:05.940

改变

```
@total_time = @time_entries.sum(:length) 
```

到

```
@total_time = @time_entries.sum(&:length) 
```

仅供参考，如果您只需要一列来操作`:select`查询中的 use 子句，例如

```
@time_entries = TimeEntry.find(:all, :select => 'length', 
                  :conditions => [ "(user_id = ?) AND (projecttitle LIKE ?) 
                           AND (date BETWEEN ? AND ?)", current_user, 
                           '%'+params[:projecttitle]+'%', @startdate, @enddate ]) 
```

如果您只需要表中某些列的总和，您可以使用[sum](http://api.rubyonrails.org/v2.3.8/classes/ActiveRecord/Calculations/ClassMethods.html#M001704)方法，例如

```
@total_time = TimeEntry.sum(:length, 
                  :conditions => [ "(user_id = ?) AND (projecttitle LIKE ?) 
                           AND (date BETWEEN ? AND ?)", current_user, 
                           '%'+params[:projecttitle]+'%', @startdate, @enddate ]) 
```

# codeigniter - Codeigniter FTP 类

> ID：11556816
> 
> 赞同：1
> 
> 时间：2012-07-19T08:27:37.080
> 
> 标签：codeigniter, ftp

我需要使用我的 codeigniter 应用程序从我的本地主机上传一个 zip 到我的网络服务器。我已按照文档进行操作，但无法上传文件，错误是：

```
An Error Was Encountered

Unable to locate the source file. Please check your path. 
```

我不知道为什么它找不到源路径，如果我尝试用`file_exists`它测试路径，但是`upload`方法失败了......

这是我的代码：

```
$this->load->library('ftp');

$config_ftp['hostname'] = 'xxxxx';
$config_ftp['username'] = 'xxxxx';
$config_ftp['password'] = 'xxxxx';
$config_ftp['debug']    = TRUE;

$this->ftp->connect($config_ftp);

if(file_exists($my_file))
    echo "ok";
else
    echo "no";

$this->ftp->upload($my_file , '/web/'.$my_file, 'binary'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:55:00.837

我已经为 ftp 使用了标准的 php 函数，现在它可以工作了

# iphone - 当下载文件时，NSURLConnection 不会在文件末尾调用 didFinishLoading，当下载暂停和恢复时

> ID：11556820
> 
> 赞同：3
> 
> 时间：2012-07-19T08:27:49.993
> 
> 标签：iphone, objective-c, ios, download, nsurlconnection

我有以下问题，现在让我发疯了好几个星期。

我有一个用于下载文件的小框架。该框架具有暂停和恢复文件下载的能力。到现在为止还挺好。问题是，每次我暂停下载然后，在我恢复它之后，如果下载的字节等于预期的文件大小，`NSURLConnection`负责下载的将不会调用`connectionDidFinishLoading`，但会继续调用`connectionDidReceiveData`，从而破坏我的下载。我不知道为什么会这样。当我不暂停/恢复下载时，一切正常。这是暂停和恢复下载的方法的代码。

```
- (id)pause 
{
    [self.connection cancel];
    self.connection = nil;
    return self;
}

- (id)resume
{
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:self.url cachePolicy:NSURLCacheStorageAllowed timeoutInterval:600];

    NSFileManager *manager = [NSFileManager defaultManager];
    NSString *localSavePath = self.savePath;
    if (failBlocks.count > 0) {
        [self cancel];
        [self start];
    }
    else {
        if( ![manager fileExistsAtPath:localSavePath] )
        {
            [manager createFileAtPath:localSavePath contents:[NSData data] attributes:nil];
        }    
        if (self.downloadData.length > 0) {

            log_muma2(@"Should resume url %@",self.url);
            // Define the bytes we wish to download.
            NSString *range = [NSString stringWithFormat:@"bytes=%i-", downloadData.length];
            [request setValue:range forHTTPHeaderField:@"Range"];
        }
        if (!self.connection) {
            NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];
            self.connection = conn;
        }        
    }
    return self;    
} 
```

如果有人能帮助我解决这个问题，我会非常高兴。

我已经测试过，如果已经下载的数据是正确的大小和类似的东西。一切似乎都很好。

提前谢谢了。特立独行

=========编辑=========

这是我的代码`didReceiveData`

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    amountDownloaded += data.length;    
    NSInteger receivedLen = [data length];
    bytesReceived = (bytesReceived + receivedLen);
    if(expectedSize != NSURLResponseUnknownLength) {
        progress = ((bytesReceived/(float)expectedSize)*100)/100;
        [self performSelectorOnMainThread:@selector(updateProgressBar) withObject:nil waitUntilDone:NO];        
        percentComplete = progress*100;        
    }

    if (self.savePath == nil || [self.savePath isEqualToString:@""]) {
        [self.downloadData appendData:data];        
    }
    else {
        [self.downloadData appendData:data];
        NSFileHandle *handle = [NSFileHandle fileHandleForWritingAtPath:self.savePath];
        [handle seekToEndOfFile];
        [handle writeData:data];
//        
    }    
    if (expectedSize < bytesReceived)
    {
        NSLog(@"download exceeded expected size %f with %lld", expectedSize, bytesReceived);
        [self pause];
        [self cancel];        
        self.connection = nil;
        self.downloadData = nil;
        bytesReceived = 0;
        expectedSize = 0;
        amountDownloaded = 0;
        progress = 0;
        percentComplete = 0;
        [self start];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:52:04.573

您如何计算预期的文件大小？

如果您使用`response.expectedContentLength`，请注意，每次在恢复下载时初始化新连接时，此值都会减小。

# c# - SolrNet 空间搜索 - 在 geodist() 上排序

> ID：11556829
> 
> 赞同：0
> 
> 时间：2012-07-19T08:28:41.023
> 
> 标签：c#, solr, solrnet

我将 Solr (3.6.0) 与 SolrNet (0.4) 一起使用，我正在寻找 SolrNet 中空间搜索的一些帮助 - 具体来说，按距离对结果进行排序。

这是我的查询：

```
var postcode = new SolrQueryByField("Postcode", fields[13]);
var distance = new SolrQueryByDistance("LatLong", latitude, longitude, 1);
QueryOptions options = new QueryOptions();
options.Rows = 25;
options.AddFilterQueries(distance); 
```

我已经尝试了显而易见的事情：

```
options.OrderBy = new List<SortOrder> { new SortOrder("geodist()", Order.ASC)}; 
```

和：

```
options.OrderBy = new List<SortOrder> { SortOrder.Parse("geodist() asc") }; 
```

作为最后的尝试，我尝试将过滤器查询与排序一起定义为额外的参数：

```
options.ExtraParams = new Dictionary<string, string>
{
    {"d", "1"},                        
    {"sField", "LatLong"},
    {"pt", latitudeString + "," + longitudeString},
    {"fq", "{!geofilt}"},
    {"sort", "geodist() asc"}
}; 
```

但一切都会导致：

```
SEVERE: org.apache.solr.common.SolrException: can not sort on unindexed field: geodist() 
```

我还尝试将 lat、long 和 distance 参数传递给 geodist() 函数，但无济于事。

我可以手动构建这个查询，而不是通过 SolrNet！似乎问题与查询字符串的排序和括号的方式有关。

这有效（手工构建）：

{d=1&sort=geodist()+asc&sfield=LatLong&version=2.2&rows=25&q=邮编："LN1+2EB"&pt=52.1,-1.11&fq={!geofilt}}

这失败了（由 SolrNet 构建）：

{d=1&sort=geodist()+asc&q=(邮编："LN1+2EB")&sField=LatLong&pt=53.289186,-0.705095&fq={!geofilt}&rows=25&version=2.2}

我假设我在做一些愚蠢的事情；一定有办法让这个功能发挥作用！任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:05:11.460

这将按距离对结果进行排序。取消注释行以过滤从点的距离。

```
solr.Query(SolrQuery.All,
                              new QueryOptions
                                  {
                                      FilterQueries = filterQueries.ToArray(), // add filter items
                                      OrderBy = new[] { new SolrNet.SortOrder("geodist()", Order.ASC) },
                                      ExtraParams = new Dictionary<string, string>
                                          {
                                              // uncomment for filtering by distance
                                              //{"fq", "{!geofilt}"},
                                              //{"d", distance.ToString(CultureInfo.InvariantCulture)} replace distance with your radius filter
                                              {"sfield", "lat_long"}, // replace lat_long with your field in solr that stores the lat long values
                                              {"pt", "-33.858727,151.213199"}, // this is the point of reference
                                                                                        }
                                  }); 
```

# c++ - 如何在桌面上使用 QtMultimediaKit？

> ID：11556831
> 
> 赞同：2
> 
> 时间：2012-07-19T08:28:44.757
> 
> 标签：c++, qt, qt-mobility

可能重复的问题，但我还没有找到答案。

所以，我正在尝试编译 Qt 示例，称为“播放器”。此示例使用 QtMobility API，但在我的 PC 上无法编译。特别是，编译器向我展示了 `fatal error: qmediaplayer.h: No such file or directory`桌面目标。但是在设置 Symbian 目标时，它编译成功。

另外，考虑到[这篇](https://stackoverflow.com/questions/9182074/cross-platform-c-c-audio-library-for-mp3-aac-wav#comment13261880_9182295)文章，我认为这是可能的，但我做错了。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:59:05.920

目前在桌面上安装 QtMobility 并不是一个好主意（如果我没记错的话，它只在 Linux 操作系统上可用）。

还是等QT5吧。从我目前所读到的内容来看，QtMobility 将与核心组件合并，并且也可用于桌面。

我知道它有点老的问题，但如果其他人正在寻找解决方案，我只想保持最新状态。

* * *

[http://qt-project.org/forums/viewthread/15536](http://qt-project.org/forums/viewthread/15536)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:37:21.610

我已经`qtmobility`在我的 Ubuntu 上安装了数据包。问题是 Qt 包管理器中缺少 Mobility API。

# php - 基于 MVC 的项目的 PHP 模型类

> ID：11556832
> 
> 赞同：0
> 
> 时间：2012-07-19T08:28:54.523
> 
> 标签：php, join, model

有没有很好的现有 PHP 模型类或库，可以在小型 MVC 框架中用作模型的“查找器”？

我们正在尝试为特定站点构建一个非常轻量级的框架，而不是使用具有大量极端功能的大型框架。最重要的是一些查询数据库的智能方式——包括关系，就像你可以在例如 CakePHP 或 Yii 框架中使用模型一样。

类用户扩展模型

现在我可以执行类似 User::find() 或 user $user->getItems() 的操作，其中 items 是具有某种设置（hasOne、hasMany 等）的预定义相关模型，甚至可能带有连接指令。

我认为重新发明轮子是不好的，但我不想只为模型的 finder 方法进入一个大型框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:35:10.853

你可以使用 PHP-activercord

[http://www.phpactiverecord.org/](http://www.phpactiverecord.org/)

> php-activerecord 是一个基于 ActiveRecord 模式的开源 ORM 库。它旨在极大地简化与数据库的交互，并消除用于常见操作的手写 SQL 的繁琐工作。与其他 ORM 不同，您不需要使用任何代码生成器，也不需要维护表的映射文件。这个库的灵感来自 Ruby on Rails 的实现，因此借鉴了它的许多约定和想法。

使用这个库很容易实现和更容易工作。它有据可查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:37:05.283

看来您正在寻找 ORM。看看[Kohana](http://kohanaframework.org/3.2/guide/orm)是如何做到的，他们使用 ActiveRecord 模式。这在过去对我来说效果很好。

# c# - 如何使用 itextsharp 为 IElement 分配字体

> ID：11556835
> 
> 赞同：0
> 
> 时间：2012-07-19T08:29:04.253
> 
> 标签：c#, asp.net, itextsharp, export-to-pdf

我创建了一个 pdf 文档，`itextsharp`并希望使用 html 文档中的数据填充它

```
string htmlText = htmlcode.ToString();

var styles = new StyleSheet();
styles.LoadTagStyle(HtmlTags.TABLE, "border", "2");

var htmlarraylist = HTMLWorker.ParseToList(new StringReader(htmlText), styles);
document.Open(); 
```

//这里我为文本创建字体

```
BaseFont baseFont = BaseFont.CreateFont(BaseFont.TIMES_ROMAN, BaseFont.CP1250,
                                                             BaseFont.EMBEDDED);
Font font = new Font(baseFont, 8); 
```

//现在我将元素添加到pdf

```
foreach (IElement t in htmlarraylist)
{
    document.Add((IElement)t);                        
} 
```

//如何为htmlarraylist中的每个元素添加字体？

//对于段落是这样的

```
doc.Add(new Paragraph("țșăî", font)); 
```

但是如何为 IElement 设置这个字体呢？

```
document.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:34:51.537

IElement 有一个 Font 属性，您可以将字体分配给它

例子：

```
foreach (IElement t in htmlarraylist)
{
        t.Font = font;
        document.Add(t);
} 
```

# php - 删除数组索引或创建没有索引的数组

> ID：11556836
> 
> 赞同：0
> 
> 时间：2012-07-19T08:29:09.713
> 
> 标签：php

所以基本上我有数组 -

```
Array (
    [0] => Array 
    (
        [name] => my_name
        [year] => my_year
        [other] => Array
        (
            [0] => Yes
            [1] => No
            [2] => Other_values
        }
    )

    [1] => Array 
    (
        [name] => my_name2
        [year] => my_year2
        [other] => Array
        (
            [0] => Yes2
            [1] => No2
            [2] => Other_values2
        }   
    )
) 
```

所以基本上我会从最后一个子数组中删除索引，它们都是[其他]数组。

基本上我希望它显示的方式是 -

```
Array (
    [0] => Array 
    (
        [name] => my_name
        [year] => my_year
        [other] => Array (Yes, No, Other_values )
    )

    [1] => Array 
    (
        [name] => my_name2
        [year] => my_year2
        [other] => Array (Yes2, No2, Other_values2 )
    )
) 
```

基本上没有索引。

是否有可能，如果不是，那么也许在创建数组时有可能？

我正在使用 array_push(); 创建它 功能。

如果你需要我的array_push()的PHP代码；功能，请给我一个通知。

希望你明白我的意思，如果有不清楚的地方，欢迎你问我，我会尽力解释更多:)！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:31:59.903

基本上它只是`var_dump`在输出中显示键的行为。每个数组都必须有键 - 即使您没有指定它，也存在键以提供对元素的访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:32:10.243

您正在以正确的方式执行此操作，这只是您使用时数组的表示形式`var_dump`。或`print_r`查看数组元素。如果您使用数字索引遍历内部数组，则不会有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T08:38:35.050

数组总是会有索引，因为它们用于操作数组，所以我不知道删除索引但保留值的方法（数组的文本表示除外）。

如果您希望转储信息在一行中，您可以使用`serialize`或`json_encode`

# c# - 如何将 html 表发送到 mvc 操作？

> ID：11556838
> 
> 赞同：0
> 
> 时间：2012-07-19T08:29:17.417
> 
> 标签：c#, asp.net-mvc-3, itextsharp

我正在尝试在表格顶部的屏幕上设置一个按钮，单击该按钮会下载包含用户看到的表格内容的 pdf。

这就是我创建 PDF 的方式以及 Action 方法的样子......

```
public ActionResult DownloadPdf(string content)
{
    MemoryStream outputStream = new MemoryStream();
    MemoryStream workStream = new MemoryStream();
    Document document = new Document();
    PdfWriter.GetInstance(document, workStream);
    document.Open();
    document.Add(new Paragraph(content));
    document.Close();

    byte[] byteInfo = workStream.ToArray();
    outputStream.Write(byteInfo, 0, byteInfo.Length);
    outputStream.Position = 0;

    //Response.AddHeader("Content-Disposition", "attachment; filename=test.pdf"); 
    //return File(byteInfo, "application/pdf", "test.pdf");
    return File(outputStream, "application/pdf", "test.pdf");
} 
```

这是我试图打印的表格...

```
<table class="donationTable statementTable">
  <tr>
     <th>Month</th> <th>Fees</th> 
   </tr>
   <tr>
     <td>
         Jan
     </td>
     <td>
         $5
     </td>
   </tr>    
</table>

<a href = "@Url.Action("DownloadPdf", "Home", new { content = "" })">Download</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:38:52.847

您可以查看[CodeProject 上的以下文章，](http://www.codeproject.com/Articles/260470/PDF-reporting-using-ASP-NET-MVC3)该文章说明了使用 iTextsharp 将 Razor 视图转换为 PDF 的好方法。这个想法是你可以把这个表放到一个部分中，然后：

```
public ActionResult DownloadPdf()
{
    MyViewModel model = ...
    return this.ViewPdf("My table", "_SomePartial", model);
} 
```

`ViewPdf`是一种扩展方法，它执行 Razor 视图并以字符串形式检索其呈现的输出，然后将其馈送到 iTextsharp 并转换为 PDF。

现在，您可以在页面上有一个指向此操作的锚点，这将允许用户下载 PDF：

```
@Html.ActionLink("Export table as Pdf", "DownloadPdf", null, new { target = "_blank" }) 
```

话虽如此，您应该知道 iTextsharp 并不是为将 HTML 转换为 PDF 而设计的，并且对它的支持非常有限。如果您的 HTML 表格中有一些花哨的 CSS 规则，它们将不会被翻译。

# jquery - Flexslider - 响应式 css 错误

> ID：11556841
> 
> 赞同：0
> 
> 时间：2012-07-19T08:29:34.143
> 
> 标签：jquery, css, slider, responsive-design, flexslider

我正在尝试将响应式媒体查询添加到主题中，而 Flexslider 正在做这个奇怪的事情，它根据媒体查询调整大小，但只显示图像的一半。

这是发生这种情况的演示：[http ://www.brainbuzzmedia.com/themes/framework/](http://www.brainbuzzmedia.com/themes/framework/)

这是我在媒体查询中使用的 css：

```
/* Tablet Portrait size to standard 980 (devices and browsers) */
@media only screen and (min-width: 768px) and (max-width: 979px) {

    div#site_wrap{
        width:95%;
    }
    div#site_wrap, div.footer, div.copyright, div#title {
        width:95%;
        padding-left:0;
        padding-right:0;
    }
    div.header, div.main, #container {
        width:auto;
    }
    .footer_form textarea {
        width:90%;
    }
} 
```

知道是什么原因造成的吗？我整晚都在做这件事。

** 我忘了提，看看我的意思是尝试调整浏览器的大小，直到它低于 980px 宽。到目前为止，768-980px 的范围是响应式的，主题的其余部分会缩小，但滑块中的图像在缩小时只显示图像的左半部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:51:35.553

我想到了。一旦它变得太小，搜索栏就会被撞出导航区域并落入滑块中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:52:21.583

问题出在您的 **div.flex-viewport**上。所有其他元素似乎都正确。然而，这个 div 在我的屏幕上停留在 433px，我不知道为什么或在哪里设置它（至少我在 Firebug 中找不到任何东西）。

我检查了我当前的 Flexslider。我没有在元素上使用 pos:rel，但其余部分是相同的，并且可以很好地从 1200-200px 缩放。

很抱歉没有更多信息。如果我偶然发现它，我会发布。

# objective-c - 在 Coretext 中获取可见的字符串范围而不在 iOS 上呈现文本

> ID：11556844
> 
> 赞同：0
> 
> 时间：2012-07-19T08:29:59.037
> 
> 标签：objective-c, ios, core-text

我有一个正在进行大量文本渲染的应用程序。有时我需要在 CoreText 中渲染大约 10 页的文本才能显示相应的视图，这确实需要相当长的时间。

为了构建页面，我使用`CTFramesetterCreateFrame`将 CTFrame 渲染到视图。然后我`CTFrameGetVisibleStringRange`用来确定渲染了哪个范围，所以我知道下一帧或页面的偏移量。

基本上我的问题是，如果我有一个`NSAttributedString`和一个`CGPath`，我用 CoreText 来绘制文本，有没有什么方法可以让我获得可见的字符串范围而不必事先渲染完整的 CTFrame？我需要这个函数才能在我实际渲染它之前找出一个文本将有多少页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:15:43.857

你试过 CTFramesetterSuggestFrameSizeWithConstraints 吗？（[https://developer.apple.com/library/mac/#documentation/Carbon/Reference/CTFramesetterRef/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/CTFramesetterRef/Reference/reference.html)）

# android - 在 setImageURI() 中找不到文件异常；

> ID：11556845
> 
> 赞同：0
> 
> 时间：2012-07-19T08:29:59.557
> 
> 标签：android, android-imageview, android-file

我正在设置 sd 卡中的联系人图像，并通过我的应用程序尝试在列表适配器中显示它。我能够正确获取图像 uri。但是当我试图设置

```
img.setImageURI(uri); 
```

有时我收到文件未找到异常。即使将 uri 转换为位图也有问题。我有四个联系人，其中 2 个联系人与图像显示正常，剩下两个我找不到文件异常。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:00:18.143

请参阅此链接 [https://stackoverflow.com/a/4240238/1441666](https://stackoverflow.com/a/4240238/1441666)

```
public static Bitmap loadContactPhoto(ContentResolver cr, long  id) {
    Uri uri = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, id);
    InputStream input = ContactsContract.Contacts.openContactPhotoInputStream(cr, uri);
    if (input == null) {
        return null;
    }
    return BitmapFactory.decodeStream(input);
} 
```

# android - android中的Textview多次点击

> ID：11556851
> 
> 赞同：0
> 
> 时间：2012-07-19T08:30:28.603
> 
> 标签：android, textview

在我的应用程序中，我有一个 TextView，当用户第一次单击它时，我必须按降序排列数据，当用户再次单击相同的文本视图时，我必须按升序排列数据。有有什么办法可以做到这一点？

我的代码：

```
public void onClick(View v) {
    // TODO Auto-generated method stub
    boolean flag = false;
    db.open();
    Cursor c;
    if(flag==false)
    {
        c = db.getIncomeTitleDescitem(intent.getStringExtra("grpsdb"));
        startManagingCursor(c);
        flag=true;
    }                   
    else
    {
        System.out.println("inside else");
        c = db.getIncomeTitleAscitem(intent.getStringExtra("grpsdb"));
        startManagingCursor(c);
        flag=false;
    }
    ListView lv=(ListView)findViewById(R.id.listView1);     
    String[] fromdes = new String[] {db.KEY_DATE,db.KEY_DESC,db.KEY_INCOME,db.KEY_TOTAL};
    int[] todes = new int[] {R.id.text1 ,R.id.text3,R.id.text5,R.id.text7};
    SimpleCursorAdapter notes = new SimpleCursorAdapter(IncomeDetails.this, R.layout.columnview, c, fromdes, todes);                          
    lv.setAdapter(notes);  
    db.close();             
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:38:38.390

您可以使用`setTag()`并`getTag()`保持该状态。

默认情况下，将 TextView 设置为`tv.setTag("descending");`内部`onClick()`使用`getTag()`并执行您的工作。

样本，

```
tv.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View paramView) {
        String order = (String) paramView.getTag();
        if(order.equalsIgnoreCase("descending")){
            // perform descending ordering
            tv.setTag("ascending");
        }
        else if (order.equalsIgnoreCase("ascending")) {
            // perform ascending ordering
            tv.setTag("descending");
        } 
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:38:46.113

你有按升序和降序排列它们的逻辑吗？

如是，

假设功能`arrangeA()`并`arrangeD()`分别按升序和降序进行排列。

```
String lastSet="none";
TextView tv= (TextView) findViewById(R.id.tv);
tv.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        if(lastSet.equals("none")||lastSet.equals("asc")) {
            arrangeD();
            lastSet="desc";
        }
        else {
            arrngeA();
            lastSet="asc";
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T08:39:05.470

是的，您可以根据单击更新标志轻松地使用标志进行跟踪。标志您可以保留为布尔值或整数，无论​​您想要什么。供你参考...

```
boolean flag = false;   // false - first click, true - second click
textView.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        if (flag == false) {
            flag = true;
            // do descending
         } else {
             flag = false;
             // do ascending
         }                
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T09:08:31.643

只需放置

```
boolean flag = false; 
```

在函数调用之上

```
public void onClick(View v) { 
```

这将完成你的任务

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T08:38:20.667

boolean sortAscend = false

在您的 TextView 中`onclicklistener()`检查`sortAscend`并对其进行排序并设置`sortAscend = !sortAscend`.

这样它会在 asc/desc 中交替排序

# c# - Marshal NOT 0 终止字符串

> ID：11556852
> 
> 赞同：3
> 
> 时间：2012-07-19T08:30:31.477
> 
> 标签：c#, c++, marshalling

我有以下非托管结构。

```
struct MyNativeStruct_Foo
{   
 char product_name[4];
 char product_model[2];
} 
```

和托管等价物

```
[StructLayout(LayoutKind.Sequential, Pack = 1)]
public struct MyManagedStruct_Foo
{
    [MarshalAs(UnmanagedType.LPStr, SizeConst = 4)]
    public string product_name;

    [MarshalAs(UnmanagedType.LPStr, SizeConst = 2)]
    public string product_model;
} 
```

不幸的是，stings 不是空终止的。使用了产品名称的全部 4 个字符。如果我用“LPStr”定义托管结构，则字符串必须以 0 结尾。

还有另一种定义托管结构的方法吗？可以定义自定义 Marshaller 属性吗？还是你有其他想法？

笔记; 本机结构无法更改。

谢谢

安贝格

[编辑] 更改为 LPStr（评论 Jason Larke）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T08:39:12.350

您可以更改编组以将字符串视为`bytes`s 的固定大小数组，然后使用`Encoding`该类将字节转换为托管字符串。

IE

```
[StructLayout(LayoutKind.Sequential)]
public struct MyManagedStruct_Foo
{
    [MarshalAs(UnmanagedType.ByValArray, SizeConst=4)]
    public byte[] product_name;

    [MarshalAs(UnmanagedType.ByValArray, SizeConst=2)]
    public byte[] product_model;

    public string GetProductName()
    {
        return System.Text.Encoding.ASCII.GetString(this.product_name);
    }

    public string GetProductModel()
    {
        return System.Text.Encoding.ASCII.GetString(this.product_model);
    }
} 
```

不完全是世界上最性感的结构，但它应该可以满足您的需求。

# java - NumberFormatException：空

> ID：11556854
> 
> 赞同：1
> 
> 时间：2012-07-19T08:30:42.703
> 
> 标签：java, exception, jakarta-ee

现在我被一个错误卡住了，它在 Eclipse 浏览器中显示以下错误。错误看起来像：

```
13:53:12,294 INFO  [STDOUT] 30
13:53:12,294 ERROR [[Expthsmon]] Servlet.service() for servlet Expthsmon threw exception
java.lang.NumberFormatException: null
at java.lang.Integer.parseInt(Unknown Source)
at java.lang.Integer.parseInt(Unknown Source)
at Expthsmon.doGet(Expthsmon.java:44)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:690)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:179)
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:241)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:580)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
at java.lang.Thread.run(Unknown Source) 
```

我相信这部分代码

```
int amountofnoon=0;
    int amountofafternoon=0;
    int noofnoon=0;
    int noofafternoon=0;
    String amountnoon=null;
    String amountafternoon=null;
    amountnoon=request.getParameter("amountnoon");
    amountafternoon=request.getParameter("amountafternoon");
    //if((amountnoon !=null )&&(amountafternoon !=null))

     amountofnoon=Integer.parseInt(amountnoon);
     System.out.println(""+amountofnoon);
     amountofafternoon=Integer.parseInt(amountafternoon);
     System.out.println(""+amountofafternoon); 
```

正在制造问题，其中amountofnoon 和amountofafternoon 应该是整数值。我该怎么办？

我还添加了从中获取值的代码的 jsp 部分：

```
<form name="expenditurefthsmon" action="Expthsmon">
<div align="center">Enter The Amount of Days Expenditure</div>
 <div align="center"><input type="text"  name="amountnoon"></input></div>
 <div align="center">Enter The Amount of Nights Expenditure</div>
<div align="center"><input type="text" name=amountafternoon"></input></div>
 <div align="center"><input type="submit" value="Calculate"></input></div>"
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:32:56.907

`amountnoon`AND/OR`amountafternoon`有值`null`，您需要验证请求参数是否为空

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T09:01:24.790

您的 html 中的上述代码缺少 name 属性的引号

```
<div align="center"><input type="text" name=amountafternoon"></input></div> 
```

它应该是

```
<div align="center"><input type="text" name="amountafternoon"></input></div> 
```

除此之外，您绝不能相信来自用户的输入，并始终在进入核心逻辑之前验证它是否为无效或空值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T08:34:11.870

你应该检查空值。例如

```
if(amountnoon != null){
    amountofnoon=Integer.parseInt(amountnoon);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T08:35:05.953

最有可能的是，这两个调用之一返回`null`：

```
amountnoon=request.getParameter("amountnoon");
amountafternoon=request.getParameter("amountafternoon"); 
```

在将这两个值传递给`Integer.parseInt`.

如果你传递`null`给`parseInt`，你会得到`NumberFormatException: null`你描述的错误。

# ios - 具有两个视图的分段控制

> ID：11556859
> 
> 赞同：0
> 
> 时间：2012-07-19T08:31:11.547
> 
> 标签：ios, view, uisegmentedcontrol

首先，我在 ViewController 中定义了两个视图。

```
@interface ViewController : UIViewController
{
    UIView *view1;
    UITableView *view2;
} 
```

我想通过使用分段控制来切换两个视图。UIview 显示按钮（图像），另一个显示在列表中。

但我有一些麻烦。

我不知道如何控制这两个视图。我发现我已经制作了[self.view]上的所有对象。

我不太了解superview和subview之间的关系。现在，我只想将它们设置在 view1 上，我不知道如何实现。

太谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:34:50.437

像这样的东西？...

```
-(IBAction)segmentChanged:(UISegmentedControl*)sender {
    if ([sender tag]==0) {
        [UIView animateWithDuration:0.5 animations:^{
            [view1 setAlpha:1.0];
            [view2 setAlpha:0.0];
        }];
    } else if ([sender tag]==1) {
        [UIView animateWithDuration:0.5 animations:^{
            [view1 setAlpha:0.0];
            [view2 setAlpha:1.0];
        }];
    }
} 
```

而不是 setAlpha，您可以使用 setFrame 将视图移出可见区域...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:37:09.767

我还没有检查代码，但它应该可以工作：-

```
-(IBAction)segmentChanged:(UISegmentedControl*)sender {
    if (sender.selectedSegmentIndex == 0) {
        view1.alpha = 0;
        view1.hidden = NO;
        [UIView animateWithDuration:0.5 animations:^{
            [view1 setAlpha:1.0];
            [view2 setAlpha:0.0];
        } completion:^(BOOL finished){ [view2 setHidden:YES]; }];
    } else {
        view2.alpha = 0;
        view2.hidden = NO;
        [UIView animateWithDuration:0.5 animations:^{
            [view2 setAlpha:1.0];
            [view1 setAlpha:0.0];
        } completion:^(BOOL finished){ [view1 setHidden:YES]; }];
    }
} 
```

并在 viewDidLoad 设置

```
view2.hidden = YES;
self.segmentControl.selectedSegmentIndex = 0; 
```

# sql - 无法找出将返回所需结果的 MySQL 语句

> ID：11556860
> 
> 赞同：0
> 
> 时间：2012-07-19T08:31:15.230
> 
> 标签：sql

我有 3 张桌子：

*   问题
*   答案
*   qa_assoc 代表`question id<->answer id`关系

我要做的是：选择所有问题，如果有任何问题也有答案，请选择答案。

```
SELECT q.id, q.content, a.id, a.content, a.dt 
        FROM questions q 
        JOIN qa_assoc qaa ON qaa.qid=q.id
        JOIN answers a ON a.id=qaa.aid
        WHERE q.course_id=? AND q.lesson_id=? AND a.user_id=? 
```

但是这个sql只选择有答案的问题。我怎样才能实现我的想法？有什么建议么？提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:42:22.817

如果你想要没有 a 的行**，**你不能有**a**，将它移到部分`WHERE`**`ON`**

 **```
SELECT q.id, q.content, a.id, a.content, a.dt 
FROM questions q 
LEFT JOIN qa_assoc qaa ON (qaa.qid=q.id)
LEFT JOIN answers a ON (a.id=qaa.aid  AND a.user_id=?)
WHERE q.course_id=? AND q.lesson_id=? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:38:32.077

你试过内/外/左连接吗？看看：[http ://dev.mysql.com/doc/refman/5.1/en/join.html](http://dev.mysql.com/doc/refman/5.1/en/join.html)**

# linux - 在 Linux 中使用 SWT-AWT 桥时出现 SWT 模态对话框的问题

> ID：11556872
> 
> 赞同：0
> 
> 时间：2012-07-19T08:32:31.850
> 
> 标签：linux, gtk, eclipse-rcp, awt, swt-awt

我们开发了一个带有 OSIG 插件的 RCP 产品。一切都在Windows中运行良好。但问题出在 Linux(GTK) 我们使用的代码：

```
Composite composite = new Composite(parent, SWT.EMBEDDED | SWT.NO_BACKGROUND | SWT.APPLICATION_MODAL); 
frame = swt_awt.new_frame(composite); 
```

当我们打开任何 SWT 模态对话框时，该框架不会被阻止。除了这个框架，其他 SWT 区域被阻塞并且不可访问。我希望它的内部实现。任何人都可以提出一些建议是否有任何解决方法。我从 2 周开始就在尝试。请帮我

**日食：** `eclipse-jee-indigo-SR2-win32` **操作系统：** `RHEL 6`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:31:28.117

这听起来可能是一个 Eclipse 错误 - SWT_AWT 桥在历史上是一个相当有错误的区域，尤其是在非 Windows 平台上。[在此处](https://bugs.eclipse.org/bugs/buglist.cgi?short_desc=SWT_AWT&resolution=---&resolution=WONTFIX&resolution=NOT_ECLIPSE&query_format=advanced&bug_status=UNCONFIRMED&bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&bug_status=RESOLVED&bug_status=VERIFIED&bug_status=CLOSED&short_desc_type=allwordssubstr)查看一组打开的 SWT_AWT 错误，以查看您的错误是否已被输入（或不会被修复）。

# java - Spring Security Web 服务认证

> ID：11556874
> 
> 赞同：-1
> 
> 时间：2012-07-19T08:32:41.963
> 
> 标签：java, spring, spring-security

您如何使用 Spring 3 Framework / Spring 3 Security / Spring Web Services翻译[这个示例？](http://www.mkyong.com/webservices/jax-ws/application-authentication-with-jax-ws/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:02:57.260

查看[Spring Secury WS 文档](http://static.springsource.org/spring-ws/site/reference/html/security.html)，特别是*7.2.2.1。纯文本用户名认证章节*。我想这就是你要找的。

**注意**。在这里，我们谈论的是 Spring-WS Security，而不是 Spring Security，它用于不同的事情。

# google-drive-api - Google Drive API - 使用 Google.Apis.Authentication

> ID：11556875
> 
> 赞同：0
> 
> 时间：2012-07-19T08:32:42.880
> 
> 标签：google-drive-api

我正在尝试使用 Google Drive API 并查看位于此处的示例 - [https://developers.google.com/drive/v2/reference/files/get](https://developers.google.com/drive/v2/reference/files/get)。

要使示例正常工作，我需要包括以下内容： **using Google.Apis.Authentication;**

有没有人用过这个dll，我似乎找不到从哪里下载它？

我设法轻松找到了 Google.Apis.Drive.v2 dll。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:17:31.590

这是[.NET 的 Google API 客户端库的](http://code.google.com/p/google-api-dotnet-client/)一部分，您可以从下载页面获取所需的 dll：

[http://code.google.com/p/google-api-dotnet-client/wiki/Downloads](http://code.google.com/p/google-api-dotnet-client/wiki/Downloads)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-07T20:08:59.747

我在这里找到了这个：[https ://code.google.com/p/google-api-dotnet-client/source/browse/Src/GoogleApis/Apis/Authentication/IAuthenticator.cs?r=e6585033994bfb3a24d4c140db834cb14b9738b2](https://code.google.com/p/google-api-dotnet-client/source/browse/Src/GoogleApis/Apis/Authentication/IAuthenticator.cs?r=e6585033994bfb3a24d4c140db834cb14b9738b2)

```
namespace Google.Apis.Authentication
{
    /// <summary>
    /// Classes that implement this interface will know how 
    /// a WebRequest with the approreate authentication embed in the request.
    /// </summary>
    [Obsolete("IAuthenticator is not supported any more and it's going to be removed in 1.7.0-beta. " +
            "Consider using UserCredential or ServiceAccountCredential from the new Google.Apis.Auth NuGet package " +
            "which supports .NET 4, .NET for Windows, Store apps, Windows Phone 7.5 and 8 and Portable Class " +
            "Libraries as well")]
    public interface IAuthenticator
    {
        /// <summary>
        /// Takes an existing httpwebrequest and modifies its headers according to 
        /// the authentication system used.
        /// </summary>
        /// <param name="request"></param>
        /// <returns></returns>
        void ApplyAuthenticationToRequest(HttpWebRequest request);
    }
} 
```

# r - ddply {plyr} 无法识别自定义函数，它告诉我我的函数不是函数

> ID：11556877
> 
> 赞同：0
> 
> 时间：2012-07-19T08:32:52.780
> 
> 标签：r, function, plyr

我有一个名为 (b2) 的矩阵，它包含 3565 行和 125 列，只有二分值（0 和 1）

我设计了一个函数来比较行`i`和行`i+1`并将差异的数量存储在新向量中。

```
loopPhudcf <- function(x){
  ## create a vector to store the results of your for loop
  output <- as.vector(rep(0, length(x[,1])))
  for (i in 1:(nrow(x))-1)  {
    output[i]<-as.vector(table(x[i,]==x[i+1,]))[1]
  }
  a<-nrow(x)
  b<-nrow(x)-1
  output<-t(as.matrix(output[c(a,1:b)]))
  output[output==ncol(x)]<-0
  return(output)
}

phudcfily123<-loopPhudcf(b2) 
```

该函数工作正常，但我还有一个 ID 变量，我使用: 添加到我的原始矩阵中`b2<-transform(b2,id=a$id)`，然后导致 3565 x 126 是最后一个 id 变量

我想使用 ddply {plyr} 应用我的函数，但要做到这一点，我只需要对没有 ID 变量 ( `as.matrix(b2[,1:(ncol(b2)-1)])`) 的原始矩阵进行子集化，但它一直说我的函数不是函数:(

```
x <- ddply(.data = b2, .var = c("id"), .fun = loopPhudcf(as.matrix(b2[,1:(ncol(b2)-1)])))

Error in llply(.data = .data, .fun = .fun, ..., .progress = .progress,  : 
  .fun is not a function. 
```

谁能帮我克服这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T17:47:28.267

`.fun`只需要一个函数；你给了它一个带有特定参数的函数，也就是函数调用的结果。你可以把它变成一个匿名函数。

```
x <- ddply(.data = b2, .var = c("id"), .fun = function(b2s) {loopPhudcf(as.matrix(b2[,1:(ncol(b2)-1)]))} 
```

我将匿名函数的参数从`b2`改为`b2s`; 如果没有这个改变它本来可以工作，但会更加混乱，因为`b2`函数内部只是原始`b2`.

（未经测试，因为我没有一个例子`b2`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T01:10:46.600

谢谢，使用包`reshape`我能够得到与使用布赖恩方法相同的结果，这是代码：

```
x<-sparseby(as.matrix(b2[,1:125]),list(group = b2[,126]), function(subset) loopPhudcf(as.matrix(b2[,1:125]))) 
```

对我来说有点奇怪的是，使用这种方法和 Brian 建议的方法，我得到了一个新矩阵，而不是我想要的向量

```
dim(x)
[1]  155 3566 
```

因此，我只需要对第一行进行子集化即可获得向量，因为这些行包含相同的信息。我的长度为 3565 的向量是使用以下方法获得的：

```
x1<-x[1,2:ncol(x)] 
```

我从 2 开始，因为第一列说明了 b2 中的 id 变量。再次感谢你！

# python - 如何让 Python 的线程在一个简单的脚本上工作

> ID：11556882
> 
> 赞同：1
> 
> 时间：2012-07-19T08:33:05.220
> 
> 标签：python

一段时间以来，我一直试图了解 Python 的踩踏功能，但无法让它按我的预期工作（这显然是一个错误的理解）。

```
from threading import Thread
from time import sleep

def firstShout():
    print "Hello"

def distantEcho():
    sleep(5)
    print "World"

t1 = Thread(target=distantEcho())
t2 = Thread(target=firstShout())

t1.start()
t2.start() 
```

我希望这会打开第一个线程，它会休眠 5 秒，同时还会调用第二个线程，该线程将立即打印“Hello”。因此，所需的输出将是“Hello”（5 秒睡眠）“World”。相反，我得到（5 秒睡眠）“世界”“你好”，好像我根本没有使用线程。

如前所述，这显然是我对线程功能缺乏了解，但我想看看如何让它与这个测试一起工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:37:38.077

只需删除线程定义中的调用（括号）：

```
t1 = Thread(target=distantEcho)
t2 = Thread(target=firstShout) 
```

# javascript - jQuery：强制 jRumble 插件在延迟后停止隆隆声的问题，假事件？

> ID：11556885
> 
> 赞同：0
> 
> 时间：2012-07-19T08:33:16.880
> 
> 标签：javascript, jquery

我正在使用 jRumble 插件 (http://jackrugile.com/jrumble) 在鼠标悬停时对菜单项进行隆隆声。但是，该插件没有设置隆隆声时间或隆隆声数量，因此它会不断地隆隆声直到鼠标退出。

我疯狂地尝试在悬停后 1 秒触发“stoprumble”，但没有运气：/

这就是我的代码现在的样子，它可以工作，但会持续发出隆隆声，直到鼠标退出。

```
$('#menu a img').hover(function(){
    $(this).trigger('startRumble');
    }, function(){
    $(this).trigger('stopRumble');
}); 
```

我需要它来做这样的事情（这不起作用）：

```
$(this).trigger('startRumble').delay(1000).trigger('stopRumble'); 
```

知道如何完成一次隆隆声吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:46:31.010

`.delay()`与 a 不同`setTimeout()`。`.delay()`只需将“空动画”添加到对象动画队列中。它不会阻止代码执行。

让你的隆隆声只有一次：

```
$('#menu a img').mouseenter(function(){ 
    var self = $(this);
    self.trigger('startRumble');
    setTimeout(function() { 
        self.trigger('stopRumble'); 
    }, 1000);
}); 
```

[在http://jackrugile.com/jrumble/](http://jackrugile.com/jrumble/)上查看演示 19

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:48:49.900

在网站上，作者有一个例子列表；示例 19 几乎可以解决问题。

```
// This is the 'Demo 19' code, with 'click' replaced with 'hover'.
var demoTimeout;
$('#demo19').hover(function(){
    $this = $(this);
    clearTimeout(demoTimeout);
    $this.trigger('startRumble');
    demoTimeout = setTimeout(function(){$this.trigger('stopRumble');}, 1500)
}); 
```

尽管您可能需要进行一些实验，但这几乎可以满足您的要求。

希望这会有所帮助！

# c# - 文件系统 WP7

> ID：11556886
> 
> 赞同：0
> 
> 时间：2012-07-19T08:33:24.237
> 
> 标签：c#, windows-phone-7

我想在 wp7 文件系统上保存一个在卸载应用程序时不会被删除的文本文件。

我想保存用户选择的应用程序版本和语言首选项，以便在用户升级应用程序时不会被删除。我不想使用IsolatedStorage，而是想使用设备的文件系统。这可能吗？如果是怎么办？？？到目前为止，我正在这样做：-

```
 public void SaveLanguageAndVersion()
    {
        IsolatedStorageFile appInfoFile = IsolatedStorageFile.GetUserStoreForApplication();

        //create new file
        using (StreamWriter writetoAppInfo = new StreamWriter(new IsolatedStorageFileStream("appInfo.txt", FileMode.Create, FileAccess.Write, appInfoFile)))
        {
            string appVer = new StringBuilder().Append(Utils.getRelVersion()).Append(":").Append(Utils.getFWversion()).ToString();
            writetoAppInfo.WriteLine(appVer);
            string appLanguage = CacheManager.getInstance().getApplicationSettings(Utils.APP_LANG);
            writetoAppInfo.WriteLine(appLanguage);
            writetoAppInfo.Close();
        }
    } 
```

但是 appinfo.txt 文件在卸载应用程序时会被删除。我想克服这一点。

如果我使用 LINQ SQL，我可以克服这个问题并实现我想要的吗？即，保存应用程序级别的信息，如用户选择的版本和语言？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:38:29.683

这是不可能的。如果您想拥有设备/用户特定数据，请考虑使用 ANID 或设备 ID 并将其存储在云中

看看这篇文章。为您提供有关如何获取 ANID 和 DeviceID 的 [信息 http://www.nickharris.net/2010/09/windows-phone-7-how-to-find-the-device-unique-id-windows-live-anonymous- ID和制造商/](http://www.nickharris.net/2010/09/windows-phone-7-how-to-find-the-device-unique-id-windows-live-anonymous-id-and-manufacturer/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:38:13.270

Windows Phone 7 在让用户在应用程序隔离存储之外进行更改方面非常挑剔。

您可以做的是将首选项保存在云中，并使用设备 ID 或用户 ID 作为密钥。当用户重新安装应用程序时，可以下载首选项。

# android - Android：带有线程的 UnsupportedOperationException

> ID：11556887
> 
> 赞同：0
> 
> 时间：2012-07-19T08:33:24.690
> 
> 标签：android, multithreading, exception

我的应用程序在使用 4.x 设备时遇到问题。看起来一个线程在更改活动（从启动屏幕到实际应用程序）时使其崩溃。这是一个屏幕截图：

![UnsupportedOperationException 屏幕截图](../Images/8150a97e015af17ce646f767b1f6e97f.png)

启动活动代码为：

```
public class Splash extends Activity {

protected boolean _active = true;
protected int _splashTime = 3000; // tempo di permanenza spash screen

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    Thread splashTread = new Thread() {
        @Override
        public void run() {
            try {
                int waited = 0;
                while(_active && (waited < _splashTime)) {
                    sleep(100);
                    if(_active) {
                        waited += 100;
                    }
                }
            } catch(InterruptedException e) {
                // do nothing
            } finally {
                finish();
                Intent i = new Intent(Splash.this, Test01Activity.class);
                startActivity(i);
                stop();
            }
        }
    };
splashTread.start();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        _active = false;
    }
    return true;
}
} 
```

此外，应用程序并没有真正崩溃，因为主要活动一直在后台工作（在“不幸的是，应用程序已停止工作”警报背后）。此问题仅在 4.x 设备中发现，2.x 和 3.x 都可以正常工作。错误在第 37 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:38:33.567

我认为异常是由于使用`deprecated stop method of Thread class`. 可能不支持它`ICS 4.0`。

您可以使用`Handler`而不是线程来达到您的目的。

您可以在启动画面`onCreate`方法中尝试以下代码

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    Handler mHandler = new Handler();
        mHandler.postDelayed(new Runnable() {

            @Override
            public void run() {
                Intent i = new Intent(Splash.this, Test01Activity.class);
                startActivity(i);
            finish();

            }
        }, _splashTime);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:47:54.377

GUI 的每个操作都必须在事件 UI 线程中进行。Android 4 在这个要求上更加严格。这可能是您的应用在其下崩溃的原因。如我所见，您不会更改 UI 线程中的活动。有关详细信息，请参阅[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

# c# - MVC 解决方案中的错误，但无论如何构建和工作！我怎样才能停止错误？

> ID：11556888
> 
> 赞同：0
> 
> 时间：2012-07-19T08:33:25.730
> 
> 标签：c#, asp.net-mvc, visual-studio-2010, devexpress, visual-studio-2012

任何建议都会很棒。

基本上我得到了各种各样的错误![错误](../Images/9733a3ba2c08c18cf2d02b16a11d9ff8.png)。

![更多错误](../Images/09f16979f4083fa198c503bb35239bd6.png)

如您所见，似乎根本找不到引用等。所有程序集都被正确引用，这得到了解决方案构建和网站运行正常这一事实的证实。（模型、部分视图等）。我只是想摆脱错误！它停止任何类型的智能感知，使网站创建速度慢得多。

以前有没有人遇到过类似的问题？有简单的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:36:43.493

尝试清理解决方案并重建它。

# javascript - 使用变量而不是 $(this) 是一种好习惯吗？

> ID：11556893
> 
> 赞同：2
> 
> 时间：2012-07-19T08:33:40.540
> 
> 标签：javascript, jquery

> **可能重复：**
> [“$(this)”的成本是多少？](https://stackoverflow.com/questions/10433014/what-is-the-cost-of-this)

就性能和可读性而言，命名变量而不是使用`$(this)`?

一个例子是

```
$(".element").click(function() {

    var elem = $(this);

    //Examples
    elem.addClass("example");
    console.log( elem.attr("id") );

}): 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:36:13.503

是的。因为`$(this)`本质上是一个触发 Dom-Search 的非常昂贵的函数调用，所以每次调用`$(this)`时都会重复它，而`var elem = $(this);`函数调用一次并将结果存储在变量中。

实际上，将选择器传递给函数比传递 DOM 元素（如`this`. 所以缓存`this`只会产生很小的影响，而缓存类似的东西`$("#foo[name|='bar']")`真的很重要。

我更喜欢`$`在变量名前面加上 ，这样很明显你在这里有一个 jQery 对象。

```
$this = $(this); 
```

现在`$this`从可读性的角度来看没有明显的缺点，同时具有性能优势。也可以通过压缩器将其缩小为单个字母变量，但`$(this)`不能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:36:38.623

我个人更喜欢缓存对保持不变的变量的引用，无论在 jQuery 中实现搜索的效率如何。无论如何，引用变量更快。

# jax-rs - 如何解决 jax-rs 中的@Path 冲突

> ID：11556894
> 
> 赞同：0
> 
> 时间：2012-07-19T08:33:42.470
> 
> 标签：jax-rs

考虑我们有以下路线的小型 Web 应用程序：“/” - 返回主页 “/post/add/” - 返回新的帖子页面

我们编写以下两个控制器来处理此路由：

```
@Path("/")
public class HomeController {
    @GET
    @Produces(HTML)
    public String home() {
        return render(new Page(HOME_PAGE_TEMPLATE));
    }
} 
```

和

```
@Path("/post")
public class PostController {

    @GET
    @Path("/add")
    @Produces(HTML)
    public String add() {
        return render(new Page(ADD_USER_PAGE_TEMPLATE));
    }
} 
```

问题是“HomeController”现在处理**所有**请求。如何强制它只处理**“** /”路由？

**UPD：** 解决方案是使用 @Path("") 注释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:25:17.840

解决方案是使用 @Path("") 注释

# mysql - 如何在存储过程或触发器中获取结果？

> ID：11556902
> 
> 赞同：0
> 
> 时间：2012-07-19T08:33:58.153
> 
> 标签：mysql, fetch, procedure

如何在存储过程或触发器中获取结果？

这是我的代码：

```
DROP TRIGGER IF EXISTS `log_activity`;

DELIMITER ;;

CREATE TRIGGER `log_activity` AFTER INSERT ON tbl_1
FOR EACH ROW
BEGIN

    SET @RESULT = (SELECT id,name FROM tbl2);

END ;; 
```

我想要我的代码：

当@结果开始时

```
//i want to get the value of the id and name 
```

结尾;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:57:17.403

阅读此内容： [http](http://www.roseindia.net/sql/trigger/mysql-trigger-after-insert.shtml) ://www.roseindia.net/sql/trigger/mysql-trigger-after-insert.shtml ，可能是此供将来参考： [http ://www.roseindia.net/sql/trigger/mysql-更新后触发.shtml](http://www.roseindia.net/sql/trigger/mysql-trigger-after-update.shtml)

注意字段名称前的“新”和“旧”前缀

# c++ - 序列化和反序列化 time_t 变量后结果不正确

> ID：11556907
> 
> 赞同：2
> 
> 时间：2012-07-19T08:34:20.220
> 
> 标签：c++, datetime

这个小程序重现了我项目中的错误。time_t 变量转换为 struct_tm，然后转换为字符串，并序列化为文件。稍后，从文件中加载此字符串，并应将其转换回 time_t。结果 time_t 与原始时间相差一小时（可能是因为夏令时）。我只能更改反序列化部分，因为文件格式应该保持不变。

```
#include “stdafx.h”
#include <iostream>
#include <字符串>
#include <时间.h>

使用命名空间标准；

string FormatDateTime(struct tm* time);
无效测试（）；

int _tmain(int argc, _TCHAR* argv[])
{
    测试（）;
    返回0；
}

string FormatDateTime(struct tm* time)
{
    静态 const char* 月[] =
    {
        “一月”、“二月”、“三月”、“四月”、“五月”、“六月”、“七月”、“八月”、“九月”、“十月”、“十一月”、“十二月”
    };

    字符 [30];
    const char* 月；

    如果（时间->tm_mon >= 0 && 时间->tm_mon < 12）
    {
        月 = 月[时间->tm_mon]；
    }
    别的
    {
        月 = "??";
    }

    sprintf(s, "%d-%s-%02d %02d:%02d:%02d",
        时间->tm_year + 1900,
        月，
        时间->tm_mday，
        时间->tm_hour,
        时间->tm_min，
        时间->tm_sec);

    返回 s;
}

无效测试（）
{
    // time_t 变量用当前时间初始化
    time_t t = 时间（NULL）；

    // time_t 变量先转换为 struct tm 然后再转换为字符串
    结构 tm* ptm = localtime(&t);

    字符缓冲区[100]；

    sprintf（缓冲区，“%d %d %d %d %d %d”，
        ptm->tm_mday, ptm->tm_mon + 1, ptm->tm_year + 1900, ptm->tm_hour, ptm->tm_min, ptm->tm_sec)；

    cout << 缓冲区 << endl; // 字符串没问题

    // 字符串保存到文件中

    // ************************************************ ************************************************

    // 稍后这个字符串会从文件中恢复

    // **** 我只能在这一行之后改变一些东西 **** //

    结构 tm stm;
    memset(&stm, 0, sizeof(stm));

    sscanf(缓冲区, "%d %d %d %d %d %d",
        &stm.tm_mday, &stm.tm_mon, &stm.tm_year, &stm.tm_hour, &stm.tm_min, &stm.tm_sec);

    stm.tm_mon -= 1；
    stm.tm_year -= 1900；

    字符串 s = FormatDateTime(ptm);

    cout << s << endl; // 好的

    // ************************************************ ************************************************
    // 现在我需要将 struct tm 转换为 time_t 并将其保存在变量中

    time_t t1 = mktime(&stm); // 不同的时间 - 1 小时的差异

    如果 ( t1 == t )
    {
        cout << "t1 == t" << endl;
    }
    别的
    {
        cout << "t1 != t !!!!!" <<endl;
    }

    // 打印 time_t - 结果不正确

    // 实用程序::FormatDateTime
    结构 tm* ptm1 = localtime(&t1);

    s = FormatDateTime(ptm1);

    cout << s << endl;
}

```

当地时间是 11.33。结果：

```
19 7 2012 11 33 17
2012-7-19 11:33:17
t1 != t !!!!!
2012-7-19 12:33:17

```

如何更改该程序的最后一部分以获得正确的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T08:47:27.023

我的猜测是`tm_isdst`您的两个 tm 结构都不同。在一种情况下它是 0，在另一种情况下是 1。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T08:36:52.850

这不会解决问题，但对于以后可能出现的兼容性问题，0 应该代表 1970 年 1 月 1 日而不是 1900 年

# html - 选择标签颜色在 Firefox 中不显示

> ID：11556908
> 
> 赞同：1
> 
> 时间：2012-07-19T08:34:28.310
> 
> 标签：html, firefox

我有一个带有简单选择下拉列表的网页，其中每个选项元素都有不同的颜色。展开后，颜色在 Firefox (8.0) 中显示良好，但是一旦您单击一个选项并且列表关闭，颜色就会变回黑色。

当我写一个摘要网页时，颜色很重要。

这个问题似乎没有出现在 IE 中

```
<select name='STATUS' style='width:100px'>
  <option value='NS' style='color:blue'>Not Started</option>
  <option value='Started' style='color:Green'>Started</option>
  <option value='Finished' style='color:red'>Finished</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:00:23.847

该`color`声明仅影响您的`option`元素，而不影响所选选项。所选选项的样式由`select`元素的样式决定。您必须使用 JavaScript 更改`select`元素的颜色才能实现所需的行为：

```
<select class="colorchange" name='STATUS' style='width:100px;'>
  <option value='NS' style='color:blue'>Not Started</option>
  <option value='Started' style='color:Green'>Started</option>
  <option value='Finished' style='color:red'>Finished</option>
</select> 
```

```
function selectColorChanger(){
    this.style.color = this.options[this.selectedIndex].style.color;
}

// this will affect all selects which have the "colorchange" class applied
var selects = document.getElementsByClassName("colorchange");
var i;

for(i = 0; i < selects.length; ++i){
    selects[i].onchange = selectColorChanger;
} 
```

[**演示**](http://jsfiddle.net/vTSrH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:36:44.670

我想出的解决方案是使用 PHP 将 style="color:$COLOR" 元素添加到选择标签本身。
由于当前状态在呈现页面时保存在数据库中，因此我检查当前处于活动状态的状态并相应地设置 $COLOR var。

谢谢您的帮助。Shame Firefox 不会像 IE chrome 等那样自动渲染它。

# java - 文本文件正在从网上下载，但 ePub/Pdf 出现问题

> ID：11556910
> 
> 赞同：1
> 
> 时间：2012-07-19T08:34:30.710
> 
> 标签：java, android, file, download, epub

我指的是以下代码从特定 URL 下载文件。

```
public class FileFromServerExample extends Activity {

    static String PACKAGE_NAME;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        PACKAGE_NAME = getApplicationContext().getPackageName();        

        File folder = new File("/data/data/"
                + FileFromServerExample.PACKAGE_NAME + "/ePub/");
        boolean created = folder.isDirectory();
        if (!created) {
            folder.mkdir();
        }

        File file = new File(folder, "Sample.epub");
        try {
            file.createNewFile();
        } catch (IOException e1) {
            e1.printStackTrace();
        }
        Downloader
                .DownloadFile(
                        "http://www.google.co.in/url?sa=t&rct=j&q=sample%20epub%20filetype%3Aepub&source=web&cd=2&ved=0CFMQFjAB&url=http%3A%2F%2Fdl.dropbox.com%2Fu%2F1177388%2Fflagship_july_4_2010_flying_island_press.epub&ei=i5gHUIOWJI3RrQeGro3YAg&usg=AFQjCNFPKsV-tieF4vKv7BXYmS-QEvd7Uw",
                        file);
}
} 
```

* * *

**下载器.java**

```
public class Downloader {

    public static void DownloadFile(String fileURL, File directory) {
        try {

            FileOutputStream f = new FileOutputStream(directory);
            URL u = new URL(fileURL);
            HttpURLConnection c = (HttpURLConnection) u.openConnection();
            c.setRequestMethod("GET");
            c.setDoOutput(true);
            c.connect();

            InputStream in = c.getInputStream();

            byte[] buffer = new byte[1024];
            int len1 = 0;
            while ((len1 = in.read(buffer)) > 0) {
                f.write(buffer, 0, len1);
            }
            f.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

我正在到达`Sample.epub`想要的位置。
但是当我尝试打开该文件时，我收到一条错误消息，指出**Not a valid zip file**。

我尝试使用各种 URL，`Pdf`而不是`ePub`（它给出**文件损坏错误**），但同样的问题仍然存在。

但是，当我尝试从此[示例链接](http://wordpress.org/extend/plugins/about/readme.txt)下载一个简单的文本文件时，它可以正常工作。

所以按照常识，这个下载的**[URL](http://www.google.co.in/url?sa=t&rct=j&q=sample%20epub%20filetype%3Aepub&source=web&cd=2&ved=0CFMQFjAB&url=http%3A%2F%2Fdl.dropbox.com%2Fu%2F1177388%2Fflagship_july_4_2010_flying_island_press.epub&ei=i5gHUIOWJI3RrQeGro3YAg&usg=AFQjCNFPKsV-tieF4vKv7BXYmS-QEvd7Uw)**`ePub`似乎可能被破坏了，但`ePub`如果我从我的 PC 浏览器访问链接，我成功下载的情况并非如此。
但是，当我尝试`ePub`在 android 应用程序中从此链接下载时，它不起作用。

任何想法，我要去哪里错了？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:03:23.537

这是因为您没有指向直接网址。相反，在浏览器中，谷歌会重定向到原始网址。在您的情况下，原始链接是：

[http://dl.dropbox.com/u/1177388/flagship_july_4_2010_flying_island_press.epub](http://dl.dropbox.com/u/1177388/flagship_july_4_2010_flying_island_press.epub)

如果您尝试下载此直接 url，您将成功。

# eclipse - Eclipse SWT 标签未显示在 Composite 中

> ID：11556915
> 
> 赞同：2
> 
> 时间：2012-07-19T08:34:54.253
> 
> 标签：eclipse, swt

如果没有设置界限，我的标签在下面的代码中没有按预期显示。我正在外壳中创建一个合成，因为我只希望背景图像出现在这个合成中。

在这种情况下，界限应该是什么？我可以根据标签的文本获得最佳界限吗？

```
Display display = PlatformUI.createDisplay();
Shell shell = new Shell(display);
shell.setText("Header);

Composite main = new Composite(shell, SWT.NONE);
main.setBounds(10, 5, 775, 505);
InputStream is = getClass().getResourceAsStream("/resources/bg.png");
Image bg = new Image(display, is);
main.setBackgroundImage(bg);        
main.setBackgroundMode(SWT.INHERIT_DEFAULT);

Label label = new Label(main, SWT.NONE);            
//label.setBounds(0, 0, 400,100);           // not showing if commented away
label.setText("Label 1"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:27:02.837

这适用于我在 Linux（Eclipse 3.6.2、Java 1.6.0.26）上：

```
public class StackOverflow
{
    public static void main(String[] args)
    {
        Display display = Display.getDefault();
        Shell shell = new Shell(display);
        shell.setText("Header");

        Composite main = new Composite(shell, SWT.NONE);
        main.setLayout(new GridLayout(1, false));
        Image bg = new Image(display, "resources/bg.png");
        main.setBackgroundImage(bg);
        main.setBackgroundMode(SWT.INHERIT_DEFAULT);

        Label label = new Label(main, SWT.NONE);    
        label.setLayoutData(new GridData(GridData.FILL_BOTH));
        label.setText("Label 1");

        main.pack();
        main.setBounds(10, 5, 775, 505);
        shell.pack();
        shell.open();
        while (!shell.isDisposed())
        {
            if (!display.readAndDispatch())
                display.sleep();
        }
    }
} 
```

# excel - Excel 2003 中的工作代码在 Windows 7 中引发运行时错误

> ID：11556922
> 
> 赞同：2
> 
> 时间：2012-07-19T08:35:14.667
> 
> 标签：excel, vba, windows-7, odbc, adodb

我在 Windows XP 32 位机器上的 Microsoft Excel 2003 中创建了下面的宏，当我按下刷新按钮时，我的电子表格会按应有的方式填充。

但是，当我在 Windows 7 机器（32 位和 64 位）的用户机器上运行此程序时，我收到以下错误消息

“运行时错误 '-2147467259 (80004005)'：[Microsoft][ODBC Driver Manager] Data source name not found an no default driver specified”

```
Private Sub CommandButton1_Click()
    Dim cmd As New ADODB.Command
    Dim conn As ADODB.Connection
    Dim prm As ADODB.Parameter
    Dim strConn As String
    Dim strSQL As String
    Dim Rst As ADODB.Recordset
    Dim WSP As Worksheet
    Dim lastRow As Long
    Dim ranges As range

 strConn = "Data Source=;Initial Catalog=;User Id=;Trusted_Connection=False;"
    Set conn = New ADODB.Connection
    Set WSP = Worksheets("KPI")

    lastRow = WSP.Cells.SpecialCells(xlCellTypeLastCell).Row
    Set ranges = WSP.range("A6", WSP.Cells(lastRow, "K"))
    ranges.Clear

    conn.Open strConn

    Set cmd = New ADODB.Command
    cmd.CommandText = "dbo.returns_kpi_data"
    cmd.CommandType = adCmdStoredProc
    cmd.ActiveConnection = conn

    cmd.Parameters.Refresh
    cmd.Parameters("@OrderDate1").Value = WSP.range("G3", "G3")
    cmd.Parameters("@OrderDate2").Value = WSP.range("I3", "I3")

    'Execute the Stored Procedure
    Set Rst = cmd.Execute

    range("A6").CopyFromRecordset Rst

    'Close the connection
    conn.Close
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:13:23.373

我猜你正在连接到 SQL Server。在对连接字符串进行模糊处理时，您已删除任何可用于正确识别问题的信息。我怀疑您可能在其他 PC 上使用 DSN，因为您在该字符串中甚至没有提供程序。您可以在此处获取有关连接字符串的信息：http: [//www.connectionstrings.com/](http://www.connectionstrings.com/)

# jpa - JPA 复合 PK 不适用于游戏框架中的“finder”

> ID：11556927
> 
> 赞同：2
> 
> 时间：2012-07-19T08:35:36.533
> 
> 标签：jpa, playframework-2.0, composite-key

我有一个名为“UserRoleHolder”的模型，如下所示。

```
@Entity
public class UserRoleHolder extends Model implements RoleHolder {
    private static final long serialVersionUID = 1L;

    @EmbeddedId
    public UserRoleHolderPK userRoleHolderPK;
    public List<UserPermission> permissions;
    public List<UserRole> roles;
    .... 
```

我制作了一个名为 UserRoleHolderPK 的复合 PK，它包含两个外键，如下所示。

```
@Embeddable
public class UserRoleHolderPK {
    @Basic
    public Long userId;
    @Basic
    public Long projectId;

    public UserRoleHolderPK(Long userId, Long projectId) {
        this.userId = userId;
        this.projectId = projectId;
    }

    public boolean equals(Object object) {
        if (object instanceof UserRoleHolderPK) {
            UserRoleHolderPK userRoleHolderPK = (UserRoleHolderPK) object;
            return userId == userRoleHolderPK.userId && projectId == userRoleHolderPK.projectId;
        } else {
            return false;
        }
    }

    public int hashCode() {
        return (int) (userId + projectId);
    }
} 
```

userId 和 projectId 来自其他模型。（User.java 和 Project.java）然后，在“UserRoleHolder”类中，我创建了一个名为“findRolesById”的方法，如下所示。

```
public static List<? extends Role> findRolesById(Long userId, Long projectId) {
    return find
            .where()
            .eq("userRoleHolderPK", new UserRoleHolderPK(userId, projectId))
            .findUnique().roles;
} 
```

但是，当我尝试运行如下所示的测试代码时，遇到了严重错误。

```
@Test
public void findRolesById() {
    // Given
    // When
    @SuppressWarnings("unchecked")
    List<UserRole> list = (List<UserRole>) UserRoleHolder.findRolesById(1l, 1l);
    // Then
    assertThat(list.get(0).name).isEqualTo("manager");
} 
```

错误就像，

'SQL 语句中的语法错误 "SELECT T0.USER_ID C0, T0.PROJECT_ID C1 FROM USER_ROLE_HOLDER T0 WHERE T0.NULL[*] = ?"; 预期的“标识符”；SQL语句：select t0.user_id c0, t0.project_id c1 from user_role_holder t0 where t0.null = ? [42001-158] 绑定值：[null] 查询是：select t0.user_id c0, t0.project_id c1 from user_role_holder t0 where t0.null = ?

我想我在使用 JPA 时错过了一些严肃和基本的东西。请让我知道是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T05:20:36.993

我认为你的问题是你试图比较 Embeddedid 对象而不是它的字段，我认为程序不会足够聪明，知道如何将用户对象比较（等于）转换为 sql，所以你可能想尝试这样的事情：

```
public static List<? extends Role> findRolesById(Long userId, Long projectId) {
    return find
            .where()
            .eq("userRoleHolderPK.userId", userId)
            .eq("userRoleHolderPK.projectId", projectId)
            .findUnique().roles;
} 
```

# android - 将 CarouselAdapter 中的 Intent 方法添加到图像

> ID：11556928
> 
> 赞同：0
> 
> 时间：2012-07-19T08:35:35.583
> 
> 标签：android, android-intent, carousel

我有一个在旋转横幅上显示图像的 3D`CarouselAdapter` [代码。](http://www.codeproject.com/Articles/146145/Android-3D-Carousel)如何在此代码中添加意图方法以单击图像并转到活动页面？

```
public abstract class  CarouselAdapter <T extends Adapter> extends ViewGroup {
  public static final int ITEM_VIEW_TYPE_IGNORE = -1;
  public static final int ITEM_VIEW_TYPE_HEADER_OR_FOOTER = -2;

  /**
   * The position of the first child displayed
   */
  @ViewDebug.ExportedProperty
  int mFirstPosition = 0;
  int mSpecificTop;

  /**
   * Position from which to start looking for mSyncRowId
   */
  int mSyncPosition;
  long mSyncRowId = INVALID_ROW_ID;
  long mSyncHeight;
  boolean mNeedSync = false;
  int mSyncMode;

  /**
   * Our height after the last layout
   */
  private int mLayoutHeight;

  /**
   * Sync based on the selected child
   */
  static final int SYNC_SELECTED_POSITION = 0;

  /**
   * Sync based on the first child displayed
   */
  static final int SYNC_FIRST_POSITION = 1;

  /**
   * Maximum amount of time to spend in {@link #findSyncPosition()}
   */
  static final int SYNC_MAX_DURATION_MILLIS = 100;

  /**
   * Indicates that this view is currently being laid out.
   */
  boolean mInLayout = false;

  /**
   * The listener that receives notifications when an item is selected.
   */
  OnItemSelectedListener mOnItemSelectedListener;

  /**
   * The listener that receives notifications when an item is clicked.
   */
  OnItemClickListener mOnItemClickListener;

  /**
   * The listener that receives notifications when an item is long clicked.
   */
  OnItemLongClickListener mOnItemLongClickListener;

  /**
   * True if the data has changed since the last layout
   */
  boolean mDataChanged;

  /**
   * The position within the adapter's data set of the item to select
   * during the next layout.
   */
  @ViewDebug.ExportedProperty    
  int mNextSelectedPosition = INVALID_POSITION;

  /**
   * The item id of the item to select during the next layout.
   */
  long mNextSelectedRowId = INVALID_ROW_ID;

  /**
   * The position within the adapter's data set of the currently selected item.
   */
  @ViewDebug.ExportedProperty    
  int mSelectedPosition = INVALID_POSITION;

  /**
   * The item id of the currently selected item.
   */
  long mSelectedRowId = INVALID_ROW_ID;

  /**
   * View to show if there are no items to show.
   */
  private View mEmptyView;

  /**
   * The number of items in the current adapter.
   */
  @ViewDebug.ExportedProperty
  int mItemCount;

  /**
   * The number of items in the adapter before a data changed event occured.
   */
  int mOldItemCount;

  /**
   * Represents an invalid position. All valid positions are in the range 0 to 1  less     than the
   * number of items in the current adapter.
   */
  public static final int INVALID_POSITION = -1;

  /**
   * Represents an empty or invalid row id
   */
  public static final long INVALID_ROW_ID = Long.MIN_VALUE;

  /**
   * The last selected position we used when notifying
   */
  int mOldSelectedPosition = INVALID_POSITION;

  /**
   * The id of the last selected position we used when notifying
   */
  long mOldSelectedRowId = INVALID_ROW_ID;

  private boolean mDesiredFocusableState;
  private boolean mDesiredFocusableInTouchModeState;

  private SelectionNotifier mSelectionNotifier;
  /**
   * When set to true, calls to requestLayout() will not propagate up the parent hierarchy.
   * This is used to layout the children during a layout pass.
   */
  boolean mBlockLayoutRequests = false;

  public CarouselAdapter(Context context) {
      super(context);
  }

  public CarouselAdapter(Context context, AttributeSet attrs) {
      super(context, attrs);
  }

  public CarouselAdapter(Context context, AttributeSet attrs, int defStyle) {
      super(context, attrs, defStyle);
  }

  /**
   * Interface definition for a callback to be invoked when an item in this
   * CarouselAdapter has been clicked.
   */
  public interface OnItemClickListener {

      /**
       * Callback method to be invoked when an item in this CarouselAdapter has
       * been clicked.
       * <p>
       * Implementers can call getItemAtPosition(position) if they need
       * to access the data associated with the selected item.
       *
       * @param parent The CarouselAdapter where the click happened.
       * @param view The view within the CarouselAdapter that was clicked (this
       *            will be a view provided by the adapter)
       * @param position The position of the view in the adapter.
       * @param id The row id of the item that was clicked.
       */
      void onItemClick(CarouselAdapter<?> parent, View view, int position, long id);
  }

  /**
   * Register a callback to be invoked when an item in this CarouselAdapter has
   * been clicked.
   *
   * @param listener The callback that will be invoked.
   */
  public void setOnItemClickListener(OnItemClickListener listener) {
      mOnItemClickListener = listener;
  }

  /**
   * @return The callback to be invoked with an item in this CarouselAdapter has
   *         been clicked, or null id no callback has been set.
   */
  public final OnItemClickListener getOnItemClickListener() {
      return mOnItemClickListener;
  }

  /**
   * Call the OnItemClickListener, if it is defined.
   *
   * @param view The view within the CarouselAdapter that was clicked.
   * @param position The position of the view in the adapter.
   * @param id The row id of the item that was clicked.
   * @return True if there was an assigned OnItemClickListener that was
   *         called, false otherwise is returned.
   */
  public boolean performItemClick(View view, int position, long id) {
      if (mOnItemClickListener != null) {
          playSoundEffect(SoundEffectConstants.CLICK);
          mOnItemClickListener.onItemClick(this, view, position, id);
          return true;
      }

      return false;
  }

  /**
   * Interface definition for a callback to be invoked when an item in this
   * view has been clicked and held.
   */
  public interface OnItemLongClickListener {
      /**
       * Callback method to be invoked when an item in this view has been
       * clicked and held.
       *
       * Implementers can call getItemAtPosition(position) if they need to access
       * the data associated with the selected item.
       *
       * @param parent The AbsListView where the click happened
       * @param view The view within the AbsListView that was clicked
       * @param position The position of the view in the list
       * @param id The row id of the item that was clicked
       *
       * @return true if the callback consumed the long click, false otherwise
       */
      boolean onItemLongClick(CarouselAdapter<?> parent, View view, int position, long id);
  }

  /**
   * Register a callback to be invoked when an item in this CarouselAdapter has
   * been clicked and held
   *
   * @param listener The callback that will run
   */
  public void setOnItemLongClickListener(OnItemLongClickListener listener) {
      if (!isLongClickable()) {
          setLongClickable(true);
      }
      mOnItemLongClickListener = listener;
  }

  /**
   * @return The callback to be invoked with an item in this CarouselAdapter has
   *         been clicked and held, or null id no callback as been set.
   */
  public final OnItemLongClickListener getOnItemLongClickListener() {
      return mOnItemLongClickListener;
  }

  /**
   * Interface definition for a callback to be invoked when
   * an item in this view has been selected.
   */
  public interface OnItemSelectedListener {
      /**
       * Callback method to be invoked when an item in this view has been
       * selected.
       *
       * Impelmenters can call getItemAtPosition(position) if they need to access the
       * data associated with the selected item.
       *
       * @param parent The CarouselAdapter where the selection happened
       * @param view The view within the CarouselAdapter that was clicked
       * @param position The position of the view in the adapter
       * @param id The row id of the item that is selected
       */
      void onItemSelected(CarouselAdapter<?> parent, View view, int position, long id);

      void onNothingSelected(CarouselAdapter<?> parent);
  }

  /**
   * Register a callback to be invoked when an item in this CarouselAdapter has
   * been selected.
   *
   * @param listener The callback that will run
   */
  public void setOnItemSelectedListener(OnItemSelectedListener listener) {
      mOnItemSelectedListener = listener;
  }

  public final OnItemSelectedListener getOnItemSelectedListener() {
      return mOnItemSelectedListener;
  }

  /**
   * Extra menu information provided to the
   * {@link android.view.View.OnCreateContextMenuListener#onCreateContextMenu(ContextMenu, View, ContextMenuInfo) }
   * callback when a context menu is brought up for this CarouselAdapter.
   *
   */
  public static class AdapterContextMenuInfo implements ContextMenu.ContextMenuInfo {

      public AdapterContextMenuInfo(View targetView, int position, long id) {
          this.targetView = targetView;
          this.position = position;
          this.id = id;
      }

      public View targetView;
      public int position;
      public long id;
  }

  /**
   * Returns the adapter currently associated with this widget.
   *
   * @return The adapter used to provide this view's content.
   */
  public abstract T getAdapter();

  /**
   * Sets the adapter that provides the data and the views to represent the data
   * in this widget.
   *
   * @param adapter The adapter to use to create this view's content.
   */
  public abstract void setAdapter(T adapter);

  /**
   * This method is not supported and throws an UnsupportedOperationException when called.
   *
   * @param child Ignored.
   *
   * @throws UnsupportedOperationException Every time this method is invoked.
   */
  @Override
  public void addView(View child) {
      throw new UnsupportedOperationException("addView(View) is not supported in CarouselAdapter");
  }

  /**
   * This method is not supported and throws an UnsupportedOperationException when called.
   *
   * @param child Ignored.
   * @param index Ignored.
   *
   * @throws UnsupportedOperationException Every time this method is invoked.
   */
  @Override
  public void addView(View child, int index) {
      throw new UnsupportedOperationException("addView(View, int) is not supported in CarouselAdapter");
  }

  @Override
  public void addView(View child, LayoutParams params) {
      throw new UnsupportedOperationException("addView(View, LayoutParams) "
              + "is not supported in CarouselAdapter");
  }

  @Override
  public void addView(View child, int index, LayoutParams params) {
      throw new UnsupportedOperationException("addView(View, int, LayoutParams) "
              + "is not supported in CarouselAdapter");
  }

  /**
   * This method is not supported and throws an UnsupportedOperationException when called.
   *
   * @param child Ignored.
   *
   * @throws UnsupportedOperationException Every time this method is invoked.
   */
  @Override
  public void removeView(View child) {
      throw new UnsupportedOperationException("removeView(View) is not supported in CarouselAdapter");
  }

  /**
   * This method is not supported and throws an UnsupportedOperationException when called.
   *
   * @param index Ignored.
   *
   * @throws UnsupportedOperationException Every time this method is invoked.
   */
  @Override
  public void removeViewAt(int index) {
      throw new UnsupportedOperationException("removeViewAt(int) is not supported in CarouselAdapter");
  }

  /**
   * This method is not supported and throws an UnsupportedOperationException when called.
   *
   * @throws UnsupportedOperationException Every time this method is invoked.
   */
  @Override
  public void removeAllViews() {
      throw new UnsupportedOperationException("removeAllViews() is not supported in CarouselAdapter");
  }

  @Override
  protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
      mLayoutHeight = getHeight();
  }

  /**
   * Return the position of the currently selected item within the adapter's data set
   *
   * @return int Position (starting at 0), or {@link #INVALID_POSITION} if there is nothing selected.
   */
  @ViewDebug.CapturedViewProperty
  public int getSelectedItemPosition() {
      return mNextSelectedPosition;
  }

  /**
   * @return The id corresponding to the currently selected item, or {@link #INVALID_ROW_ID}
   * if nothing is selected.
   */
  @ViewDebug.CapturedViewProperty
  public long getSelectedItemId() {
      return mNextSelectedRowId;
  }

  /**
   * @return The view corresponding to the currently selected item, or null
   * if nothing is selected
   */
  public abstract View getSelectedView();

  /**
   * @return The data corresponding to the currently selected item, or
   * null if there is nothing selected.
   */
  public Object getSelectedItem() {
      T adapter = getAdapter();
      int selection = getSelectedItemPosition();
      if (adapter != null && adapter.getCount() > 0 && selection >= 0) {
          return adapter.getItem(selection);
      } else {
          return null;
      }
  }

  /**
   * @return The number of items owned by the Adapter associated with this
   *         CarouselAdapter. (This is the number of data items, which may be
   *         larger than the number of visible view.)
   */
  @ViewDebug.CapturedViewProperty
  public int getCount() {
      return mItemCount;
  }

  public int getPositionForView(View view) {
      View listItem = view;
      try {
          View v;
          while (!(v = (View) listItem.getParent()).equals(this)) {
              listItem = v;
          }
      } catch (ClassCastException e) {
          // We made it up to the window without find this list view
          return INVALID_POSITION;
      }

      // Search the children for the list item
      final int childCount = getChildCount();
      for (int i = 0; i < childCount; i++) {
          if (getChildAt(i).equals(listItem)) {
              return mFirstPosition + i;
          }
      }

      // Child not found!
      return INVALID_POSITION;
  }

  /**
   * Returns the position within the adapter's data set for the first item
   * displayed on screen.
   *
   * @return The position within the adapter's data set
   */
  public int getFirstVisiblePosition() {
      return mFirstPosition;
  }

  /**
   * Returns the position within the adapter's data set for the last item
   * displayed on screen.
   *
   * @return The position within the adapter's data set
   */
  public int getLastVisiblePosition() {
      return mFirstPosition + getChildCount() - 1;
  }

  /**
   * Sets the currently selected item. To support accessibility subclasses that
   * override this method must invoke the overriden super method first.
   *
   * @param position Index (starting at 0) of the data item to be selected.
   */
  public abstract void setSelection(int position);

  /**
   * Sets the view to show if the adapter is empty
   */
  public void setEmptyView(View emptyView) {
      mEmptyView = emptyView;

      final T adapter = getAdapter();
      final boolean empty = ((adapter == null) || adapter.isEmpty());
      updateEmptyStatus(empty);
  }

  public View getEmptyView() {
      return mEmptyView;
  }

  boolean isInFilterMode() {
      return false;
  }

  @Override
  public void setFocusable(boolean focusable) {
      final T adapter = getAdapter();
      final boolean empty = adapter == null || adapter.getCount() == 0;

      mDesiredFocusableState = focusable;
      if (!focusable) {
          mDesiredFocusableInTouchModeState = false;
      }

      super.setFocusable(focusable && (!empty || isInFilterMode()));
  }

  @Override
  public void setFocusableInTouchMode(boolean focusable) {
      final T adapter = getAdapter();
      final boolean empty = adapter == null || adapter.getCount() == 0;

      mDesiredFocusableInTouchModeState = focusable;
      if (focusable) {
          mDesiredFocusableState = true;
      }

      super.setFocusableInTouchMode(focusable && (!empty || isInFilterMode()));
  }

  void checkFocus() {
      final T adapter = getAdapter();
      final boolean empty = adapter == null || adapter.getCount() == 0;
      final boolean focusable = !empty || isInFilterMode();
      // The order in which we set focusable in touch mode/focusable may matter
      // for the client, see View.setFocusableInTouchMode() comments for more
      // details
      super.setFocusableInTouchMode(focusable && mDesiredFocusableInTouchModeState);
      super.setFocusable(focusable && mDesiredFocusableState);
      if (mEmptyView != null) {
          updateEmptyStatus((adapter == null) || adapter.isEmpty());
      }
  }

  private void updateEmptyStatus(boolean empty) {
      if (isInFilterMode()) {
          empty = false;
      }

      if (empty) {
          if (mEmptyView != null) {
              mEmptyView.setVisibility(View.VISIBLE);
              setVisibility(View.GONE);
          } else {
              // If the caller just removed our empty view, make sure the list view is visible
              setVisibility(View.VISIBLE);
          }

          if (mDataChanged) {           
              this.onLayout(false, getLeft(), getTop(), getRight(), getBottom()); 
          }
      } else {
          if (mEmptyView != null) mEmptyView.setVisibility(View.GONE);
          setVisibility(View.VISIBLE);
      }
  }

  /**
   * Gets the data associated with the specified position in the list.
   *
   * @param position Which data to get
   * @return The data associated with the specified position in the list
   */
  public Object getItemAtPosition(int position) {
      T adapter = getAdapter();
      return (adapter == null || position < 0) ? null : adapter.getItem(position);
  }

  public long getItemIdAtPosition(int position) {
      T adapter = getAdapter();
      return (adapter == null || position < 0) ? INVALID_ROW_ID : adapter.getItemId(position);
  }

  @Override
  public void setOnClickListener(OnClickListener l) {
      throw new RuntimeException("Don't call setOnClickListener for an CarouselAdapter. "
              + "You probably want setOnItemClickListener instead");
  }

  /**
   * Override to prevent freezing of any views created by the adapter.
   */
  @Override
  protected void dispatchSaveInstanceState(SparseArray<Parcelable> container) {
      dispatchFreezeSelfOnly(container);
  }

  /**
   * Override to prevent thawing of any views created by the adapter.
   */
  @Override
  protected void dispatchRestoreInstanceState(SparseArray<Parcelable> container) {
      dispatchThawSelfOnly(container);
  }

  class AdapterDataSetObserver extends DataSetObserver {

      private Parcelable mInstanceState = null;

      @Override
      public void onChanged() {
          mDataChanged = true;
          mOldItemCount = mItemCount;
          mItemCount = getAdapter().getCount();

          // Detect the case where a cursor that was previously invalidated has
          // been repopulated with new data.
          if (CarouselAdapter.this.getAdapter().hasStableIds() && mInstanceState != null
                  && mOldItemCount == 0 && mItemCount > 0) {
              CarouselAdapter.this.onRestoreInstanceState(mInstanceState);
              mInstanceState = null;
          } else {
              rememberSyncState();
          }
          checkFocus();
          requestLayout();
      }

      @Override
      public void onInvalidated() {
          mDataChanged = true;

          if (CarouselAdapter.this.getAdapter().hasStableIds()) {
              // Remember the current state for the case where our hosting activity is being
              // stopped and later restarted
              mInstanceState = CarouselAdapter.this.onSaveInstanceState();
          }

          // Data is invalid so we should reset our state
          mOldItemCount = mItemCount;
          mItemCount = 0;
          mSelectedPosition = INVALID_POSITION;
          mSelectedRowId = INVALID_ROW_ID;
          mNextSelectedPosition = INVALID_POSITION;
          mNextSelectedRowId = INVALID_ROW_ID;
          mNeedSync = false;
          checkSelectionChanged();

          checkFocus();
          requestLayout();
      }

      public void clearSavedState() {
          mInstanceState = null;
      }
  }

  private class SelectionNotifier extends Handler implements Runnable {
      public void run() {
          if (mDataChanged) {
              // Data has changed between when this SelectionNotifier
              // was posted and now. We need to wait until the CarouselAdapter
              // has been synched to the new data.
              post(this);
          } else {
              fireOnSelected();
          }
      }
  }

  void selectionChanged() {
      if (mOnItemSelectedListener != null) {
          if (mInLayout || mBlockLayoutRequests) {
              // If we are in a layout traversal, defer notification
              // by posting. This ensures that the view tree is
              // in a consistent state and is able to accomodate
              // new layout or invalidate requests.
              if (mSelectionNotifier == null) {
                  mSelectionNotifier = new SelectionNotifier();
              }
              mSelectionNotifier.post(mSelectionNotifier);
          } else {
              fireOnSelected();
          }
      }

      // we fire selection events here not in View
      if (mSelectedPosition != ListView.INVALID_POSITION && isShown() && !isInTouchMode()) {
          sendAccessibilityEvent(AccessibilityEvent.TYPE_VIEW_SELECTED);
      }
  }

  private void fireOnSelected() {
      if (mOnItemSelectedListener == null)
          return;

      int selection = this.getSelectedItemPosition();
      if (selection >= 0) {
          View v = getSelectedView();
          mOnItemSelectedListener.onItemSelected(this, v, selection,
                  getAdapter().getItemId(selection));
      } else {
          mOnItemSelectedListener.onNothingSelected(this);
      }
  }

  @Override
  public boolean dispatchPopulateAccessibilityEvent(AccessibilityEvent event) {
      if (event.getEventType() == AccessibilityEvent.TYPE_VIEW_FOCUSED) {
          event.setEventType(AccessibilityEvent.TYPE_VIEW_SELECTED);
      }

      // we send selection events only from CarouselAdapter to avoid
      // generation of such event for each child
      View selectedView = getSelectedView();
      if (selectedView != null) {
          populated = selectedView.dispatchPopulateAccessibilityEvent(event);
      }

      if (!populated) {
          if (selectedView != null) {
              event.setEnabled(selectedView.isEnabled());
          }
          event.setItemCount(getCount());
          event.setCurrentItemIndex(getSelectedItemPosition());
      }

      return populated;
  }

  @Override
  protected boolean canAnimate() {
      return super.canAnimate() && mItemCount > 0;
  }

  void handleDataChanged() {
      final int count = mItemCount;
      boolean found = false;

      if (count > 0) {

          int newPos;

          // Find the row we are supposed to sync to
          if (mNeedSync) {
              // Update this first, since setNextSelectedPositionInt inspects
              // it
              mNeedSync = false;

              // See if we can find a position in the new data with the same
              // id as the old selection
              newPos = findSyncPosition();
              if (newPos >= 0) {
                  // Verify that new selection is selectable
                  int selectablePos = lookForSelectablePosition(newPos, true);
                  if (selectablePos == newPos) {
                      // Same row id is selected
                      setNextSelectedPositionInt(newPos);
                      found = true;
                  }
              }
          }
          if (!found) {
              // Try to use the same position if we can't find matching data
              newPos = getSelectedItemPosition();

              // Pin position to the available range
              if (newPos >= count) {
                  newPos = count - 1;
              }
              if (newPos < 0) {
                  newPos = 0;
              }

              // Make sure we select something selectable -- first look down
              int selectablePos = lookForSelectablePosition(newPos, true);
              if (selectablePos < 0) {
                  // Looking down didn't work -- try looking up
                  selectablePos = lookForSelectablePosition(newPos, false);
              }
              if (selectablePos >= 0) {
                  setNextSelectedPositionInt(selectablePos);
                  checkSelectionChanged();
                  found = true;
              }
          }
      }
  }

  void checkSelectionChanged() {
      if ((mSelectedPosition != mOldSelectedPosition) || (mSelectedRowId != mOldSelectedRowId)) {
          selectionChanged();
          mOldSelectedPosition = mSelectedPosition;
          mOldSelectedRowId = mSelectedRowId;
      }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:52:08.110

开始一个意图`setOnItemClickListener`

像这样 ：

```
 Carousel carousel = (Carousel)findViewById(R.id.category_carousel);
            carousel.setOnItemClickListener(new OnItemClickListener(){

                @Override
                public void onItemClick(CarouselAdapter<?> parent, View view,
                        int position, long id) {                
                Intent intent = new Intent(this,newActivity.class);     
startActivity(intent);      
                }
            }); 
```

# facebook-graph-api - 关于 Facebook 登录集成

> ID：11556929
> 
> 赞同：0
> 
> 时间：2012-07-19T08:35:38.927
> 
> 标签：facebook-graph-api

我有一个问题，我想在我的网站中集成 Facebook 登录，所以我已经在 Facebook 中注册了我的网站，现在如果我从我的网站进行 Facebook 登录，它只允许我通过 Facebook 登录，因为我已经注册了我的 Facebook 帐户中的网站。

我知道这不应该是这样。但是我在这里缺少的东西，我无法得到。我希望所有用户都能通过 Facebook 登录我的网站。

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:35:22.670

我正要建议您检查您的应用程序是否仍处于**沙盒**模式，但我从您的评论中看到您已经弄清楚了:)

# perl - 适合打印：如何使用包含多个打印列的代码点剪切字符串？

> ID：11556932
> 
> 赞同：2
> 
> 时间：2012-07-19T08:35:50.120
> 
> 标签：perl, unicode, pretty-print, substr

有没有更短的方法来剪切这个中文文本，使其适合`$print_length`宽度打印列？

```
#!/usr/bin/env perl
use warnings;
use 5.10.1;
use utf8;
binmode STDOUT, ':utf8';
use Unicode::GCString;

my $print_length = 15;

my $string1 = 'abcdefghijklmnopqrstuvwxyz';
say substr( $string1, 0, $print_length );

my $string2 = '大佛頂如來密因修證了義諸菩薩萬行首楞嚴經'; # don't know what that means
say fit_for_column( $string2 );

sub fit_for_column {
    my ( $string ) = @_;

    my $gcs = Unicode::GCString->new( $string ); 
    my $pcw = $gcs->columns();

    while ( $pcw > $print_length ) {
        $string =~ s/\X\z//;
        $gcs = Unicode::GCString->new( $string );
        $pcw = $gcs->columns();
    }
    return $string;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:40:01.443

对于像这样的小文本，我认为您无能为力。但是对于较长的文本，您可能需要查看[East Asian Width](http://www.unicode.org/Public/UNIDATA/EastAsianWidth.txt)，并使用它（可能压缩成代码点块而不是一个一个）作为文本中字符宽度的参考。你可以有一个函数，它接受一个字符串并返回它的宽度（假设标准 = 1、W = 2、H = 0.5 等）。或者返回设定长度内的文本。

# c# - 从 DataTable 中读取值

> ID：11556935
> 
> 赞同：10
> 
> 时间：2012-07-19T08:36:00.587
> 
> 标签：c#, datatable

我有一个填充了 samo 数据/值的 DataTable，我想从 DataTable 中读取数据并将其传递给一个字符串变量。

我有这个代码：

```
DataTable dr_art_line_2 = ds.Tables["QuantityInIssueUnit"]; 
```

我有一个这样的计数器：

```
for (int i = 1; i <= broj_ds; i++ )
{                                    
    QuantityInIssueUnit_value => VALUE FROM DataTable
    QuantityInIssueUnit_uom  => VALUE FROM DataTable    
} 
```

这可能吗？如果是，那么如何将数据从 DataTable 传递给这些变量？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-19T08:38:59.747

```
DataTable dr_art_line_2 = ds.Tables["QuantityInIssueUnit"];

for (int i = 0; i < dr_art_line_2.Rows.Count; i++)
{
    QuantityInIssueUnit_value = Convert.ToInt32(dr_art_line_2.Rows[i]["columnname"]);
    //Similarly for QuantityInIssueUnit_uom.
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-19T08:41:01.473

您可以使用 foreach 循环来做到这一点

```
DataTable dr_art_line_2 = ds.Tables["QuantityInIssueUnit"];

  foreach(DataRow row in dr_art_line_2.Rows)
  {
     QuantityInIssueUnit_value = Convert.ToInt32(row["columnname"]);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:43:06.720

我认为它会起作用

```
for (int i = 1; i <= broj_ds; i++ ) 
  { 

     QuantityInIssueUnit_value = dr_art_line_2[i]["Column"];
     QuantityInIssueUnit_uom  = dr_art_line_2[i]["Column"];

  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-11T08:41:54.530

对于 VB.Net 是

```
 Dim con As New OleDb.OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + "database path")
        Dim cmd As New OleDb.OleDbCommand
        Dim dt As New DataTable
        Dim da As New OleDb.OleDbDataAdapter
        con.Open()
        cmd.Connection = con
        cmd.CommandText = sql
        da.SelectCommand = cmd

        da.Fill(dt)

        For i As Integer = 0 To dt.Rows.Count
            someVar = dt.Rows(i)("fieldName")
        Next 
```

# ruby-on-rails - 如何从 Heroku 下载我的应用程序的源代码？

> ID：11556937
> 
> 赞同：1
> 
> 时间：2012-07-19T08:36:07.583
> 
> 标签：ruby-on-rails, git, heroku

> **可能重复：**
> [如何将现有的 Heroku 应用程序拉到新位置进行开发？](https://stackoverflow.com/questions/2786062/how-can-i-pull-an-existing-heroku-app-to-new-location-for-development)

如何从 Heroku 下载我的应用程序的源代码？

我的开发人员没有告诉我该怎么做就离开了。所以请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:38:47.047

您需要使用[Git](http://git-scm.com/)从 Heroku 克隆您的代码。检查[这个stackoverflow问题](https://stackoverflow.com/questions/2786062/how-can-i-pull-an-existing-heroku-app-to-new-location-for-development)以获取详细信息。

# delphi - 在默认浏览器中打开 TWebBrowser 链接

> ID：11556943
> 
> 赞同：6
> 
> 时间：2012-07-19T08:36:25.687
> 
> 标签：delphi, browser, webbrowser-control, delphi-xe2, banner

`TWebBrowser`我的应用程序在控件中显示一个从 Web 加载的小横幅。这个横幅实际上是一个包含图像的 HTML 页面；当用户点击图片时，它会将他们带到我们当前正在运行的促销活动中。

这里的坏事是当点击 TWebBrowser 中的链接时，活动页面是在 Internet Explorer 中打开的，而不是在他们的默认浏览器中。我知道发生这种情况是因为`TWebBrowser`它是基于 IE 的控件，但是有没有办法在用户选择的浏览器中打开链接？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T02:11:33.083

在这种情况`OnBeforeNavigate2`下，请检查请求的 URL，如果它是您想要启动的 URL，那么`Stop()`当前导航和调用`ShellExecute()`以在用户的​​默认外部浏览器中启动 URL。

```
procedure TForm1.WebBrowser1BeforeNavigate2(Sender: TObject; pDisp: IDispatch; var URL: Variant; var Flags: Variant; var TargetFrameName: Variant; var PostData: Variant; var Headers: Variant; var Cancel: WordBool);
begin  
  if (URL should be launched) then
  begin
    Cancel := True;
    WebBrowser1.Stop;
    ShellExecute(0, nil, PChar(String(Url)), nil, nil, SW_SHOWNORMAL);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T00:28:26.630

TWebBrowser 通过自己的 NewWindow2 事件公开 DWebBrowserExents2::NewWindow2

所以处理事件并向事件发送者提供自动化接口

```
procedure TForm1.WebBrowser1NewWindow2(
    ASender: TObject; var ppDisp: IDispatch; var Cancel: WordBool);

begin  
// create a new browser (e.g. hosted on a new tab /MDI form/ top level window)
// and expose the browser as a property of the new window. 
// Here a form2 object is created to host the new webbrowser instance
...
form2.InitNavigate=False;//the navigation will be triggered after this event
form2.Visible=False;//new window is only for getting the url
ppDisp := form2.WebBrowser1.Application;  
form2.Show;
end; 
```

现在您可以在 form2 上的 BeforeNavigate2 事件处理程序中获取新窗口的 URL。取消该事件，您可以使用 ShellExecute 启动默认浏览器。

如果您只支持 Windows SP SP2 或更高版本，您可以在创建新窗口之前挂钩 NewWindow3 事件，该事件在参数中提供 URL。

# html - HTML5 视频问题 - 令人着迷 6\. 浏览器和设备兼容性？

> ID：11556944
> 
> 赞同：0
> 
> 时间：2012-07-19T08:36:29.890
> 
> 标签：html, video, adobe-captivate

我正在制作一些帮助视频，它们需要在所有浏览器和设备上工作 - ipod/pad/phone android 等。

我的理解是你可以用 HTML5 做到这一点，并且每个设备/浏览器都有后备？

但是，我不得不添加 javascript 来检测浏览器，然后相应地转到视频将在该浏览器或设备上播放的不同 html 页面。

当然必须有一种更简单的方法可以在一个 html 页面中执行此操作？每种浏览器使用什么格式？

我也在使用 ChromeFrame 来解决 IE 问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:40:40.787

我建议查看处理浏览器支持检测的**[video.js 。](http://videojs.com/)**

对于视频格式，您可以将 mp4 和 WebM 与 video.js 一起使用，它应该涵盖所有浏览器。

从videoJS网站...

> **网络浏览器**
> 
> 无论用户使用的是最新版本的浏览器，还是 Internet Explorer 6 之类的古老版本，他们都将获得类似的 Video.js 体验，它使用超轻量级的 Flash 播放器用于不支持 HTML5 视频的浏览器。
> 
> **视频格式**
> 
> 网络视频格式可能会变得复杂。Video.js 可以通过为所有用户使用单个 MP4 文件或其他格式（如 WebM、Ogg 甚至 HTTP Live Streaming）来实现更轻松的 HTML5 兼容性。

PS。请注意，浏览器（主要是较旧的 IE 浏览器）之间会有视觉差异，尤其是在 Flash 后备启动时。全屏选项是最显着的差异。

# hibernate - 如何在 Hibernate 中加入两个表以用于报告目的？

> ID：11556957
> 
> 赞同：0
> 
> 时间：2012-07-19T08:37:27.777
> 
> 标签：hibernate

我有像这样的桌子

```
Person{id, name, dob} 
employee{id, company_name, joining_date}. 
```

我需要`employee_report`根据公共列 ID 加入这两个表。但我会得到

```
employee_report{id,name, dob, company_name, joining_date} 
```

但是如何映射这个employee_report？它正在查询数据库但收到错误：未知实体？

如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:16:47.340

如果实体之间没有关联，您可以使用 HQL 进行的唯一联接是使用 ID 上的 where 子句的内部联接：

```
select person.id, person.name, person.dob, employee.companyName, employee.joiningDate
from Person person, Employee employee
where person.id = employee.id 
```

这样的查询返回一个`List<Object[]>`，每个`Object[]`包含您选择的 5 个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:12:30.893

假设您已经创建了一个视图**employee_report**。

您必须在 Java 代码中创建相应的实体（例如：EmployeeReport），并使用 Hibernate 映射它。之后，您可以从数据库中获取员工报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T16:10:25.530

创建视图，听起来令人信服。这就是我在项目中遇到的这种要求所做的。

# python - 将数据从 HTML 表单发送到 Flask 中的 Python 脚本

> ID：11556958
> 
> 赞同：107
> 
> 时间：2012-07-19T08:37:36.653
> 
> 标签：python, html, forms, input, flask

我的 Python 脚本中有以下代码：

```
def cmd_wui(argv, path_to_tx):
    """Run a web UI."""
    from flask import Flask, flash, jsonify, render_template, request
    import webbrowser
    app = Flask(__name__)

    @app.route('/tx/index/')
    def index():
        """Load start page where you select your project folder
        or load history projects from local DB."""
        from txclib import get_version
        txc_version = get_version()
        prj = project.Project(path_to_tx)

        # Let's create a resource list from our config file
        res_list = []
        prev_proj = ''
        for idx, res in enumerate(prj.get_resource_list()):
                hostname = prj.get_resource_host(res)
        username, password = prj.getset_host_credentials(hostname)
        return render_template('init.html', txc_version=txc_version, username=username) 
```

另外，我在 init.html 中有一个 HTML 表单：

```
<form>
<input type="text" id="projectFilepath" size="40" placeholder="Spot your project files">
<input type="button" id="spotButton" value="Spot">
</form> 
```

当用户在我的 python 脚本中的变量上单击“spotButton”时，如何从“projectFilepath”传递用户输入？

我是 Python 和 Flask 的新手，如果我犯了任何错误，请原谅我。

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2012-07-19T17:35:54.587

`form`标签需要设置一些属性：

1.  `action`：表单数据在提交时发送到的 URL。生成它`url_for`。如果相同的 URL 处理显示表单和处理数据，则可以省略它。
2.  `method="post"`: 使用 POST 方法将数据作为表单数据提交。如果未给出或明确设置为，则使用 GET 方法`get`在查询字符串 ( ) 中提交数据。`request.args`
3.  `enctype="multipart/form-data"`: 当表单包含文件输入时，它必须有这个编码集，否则文件将不会被上传，Flask 也看不到它们。

`input`标签需要一个`name`参数。

添加一个视图来处理提交的数据，它`request.form`与输入的`name`. 任何文件输入都将在`request.files`.

```
@app.route('/handle_data', methods=['POST'])
def handle_data():
    projectpath = request.form['projectFilepath']
    # your code
    # return a response 
```

使用以下命令将表单设置`action`为该视图的 URL `url_for`：

```
<form action="{{ url_for('handle_data') }}" method="post">
    <input type="text" name="projectFilepath">
    <input type="submit">
</form> 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2015-06-07T23:52:36.523

你需要一个接收 POST 数据的 Flask 视图和一个发送它的 HTML 表单。

```
from flask import request

@app.route('/addRegion', methods=['POST'])
def addRegion():
    ...
    return (request.form['projectFilePath']) 
```

```
<form action="{{ url_for('addRegion') }}" method="post">
    Project file path: <input type="text" name="projectFilePath"><br>
    <input type="submit" value="Submit">
</form> 
```

# html - Phonegap/HTML - 如何显示 Web 服务返回的 pdf？

> ID：11556962
> 
> 赞同：0
> 
> 时间：2012-07-19T08:37:44.923
> 
> 标签：html, web-services, pdf

我有一个 SOAP 网络服务，它返回一个 .PDF 文件的二进制流。

该文件在物理上不存在，我需要知道是否有办法让浏览器像 HTML 链接一样解释这个流以显示生成和显示文件：`<a href="url.pdf">DOWNLOAD FILE</a>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:56:41.387

您可以将页面放在检索 PDF 流的 Web 服务器中，在响应的标头中设置所需的参数，并将响应发送到客户端。

使用 C# 和 asp.net 的示例：

HTML 链接将是：`<a href="mypdf.aspx">DOWNLOAD FILE</a>`

中的代码`mypdf.aspx`是：

```
protected void Page_Load(object sender, EventArgs e)
{
    Response.ClearContent();
    Response.AddHeader("content-disposition", 
        "attachment;filename=FilledForm.pdf");
    Response.ContentType = "application/pdf";
    byte[] bytes = GetPDFBytesFromWebService();
    Response.BinaryWrite(bytes);
    Response.End();           
} 
```

# richfaces - 如果我在 simpleTogglePanel 打开时给出 && 条件，我会收到错误消息。谁能纠正我

> ID：11556982
> 
> 赞同：0
> 
> 时间：2012-07-19T08:39:00.277
> 
> 标签：richfaces

如果我在打开时给出 && 条件，我会收到错误消息。谁能纠正我。

```
<rich:simpleTogglePanel label="Search Criteria" id="searchToggle"
            opened="#{viewScope.searchAction.soSCPanel && viewScope.resetAction.soSCpanel}" switchType="client"
            style="text-align:left; width:955px;*width:955px"> 
```

我遇到了错误，我尝试使用“and”运算符，但在这种情况下，两种情况都无法正常工作。

com.sun.facelets.FaceletException: Error Parsing /jsp/mass/ship/search.xhtml: Error Traced[line: 42] 实体名称必须紧跟实体引用中的“&”。在 com.sun.facelets.compiler.SAXCompiler.doCompile(SAXCompiler.java:234) 在 com.sun.facelets.compiler.Compiler.compile(Compiler.java:105) 在 com.sun.facelets.impl.DefaultFaceletFactory.createFacelet (DefaultFaceletFactory.java:197) 在 com.sun.facelets.impl.DefaultFaceletFactory.getFacelet(DefaultFaceletFactory.java:144) 在 com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:293) 被截断。查看日志文件以获取完整的堆栈跟踪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:30:54.540

你能像这样放置和条件吗

```
<rich:simpleTogglePanel label="Search Criteria" id="searchToggle"
        opened="#{viewScope.searchAction.soSCPanel and viewScope.resetAction.soSCpanel}" switchType="client"
        style="text-align:left; width:955px;*width:955px"> 
```

因此，更改将是“和”而不是“&&”，这似乎是合乎逻辑的 && 和 || 不会被 jsf EL（表达式语言）解释。

看看这个链接会很有用:)

[https://community.jboss.org/thread/187242](https://community.jboss.org/thread/187242)

# java - 使用 Selenium WebDriver 的简单测试设置失败

> ID：11556983
> 
> 赞同：0
> 
> 时间：2012-07-19T08:39:03.183
> 
> 标签：java, selenium, soapui

我只是想执行一个基本的硒测试。没什么特别的，只是为了确保它有效。但是会引发异常。我可能做错了什么？

当然，我使用以下方式启动服务器：`java -jar selenium-server-standalone-2.24.1.jar`

```
import static org.junit.Assert.fail;

import java.util.concurrent.TimeUnit;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.openqa.selenium.By;
import org.openqa.selenium.NoSuchElementException;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;

public class Selenium {
    private WebDriver driver;
    private String baseUrl;
    private StringBuffer verificationErrors = new StringBuffer();

    @Before
    public void setUp() throws Exception {
        driver = new FirefoxDriver();
        baseUrl = "http://www.google.de/";
        driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);
    }

    @Test
    public void testSeleniumWeb() throws Exception {
    //empty just for testing
    }
} 
```

抛出：

```
java.lang.AbstractMethodError: org.apache.crimson.tree.ElementNode2.getTextContent()Ljava/lang/String;
    at org.openqa.selenium.firefox.internal.FileExtension.readIdFromInstallRdf(FileExtension.java:134)
    at org.openqa.selenium.firefox.internal.FileExtension.writeTo(FileExtension.java:61)
    at org.openqa.selenium.firefox.internal.ClasspathExtension.writeTo(ClasspathExtension.java:64)
    at org.openqa.selenium.firefox.FirefoxProfile.installExtensions(FirefoxProfile.java:547)
    at org.openqa.selenium.firefox.FirefoxProfile.layoutOnDisk(FirefoxProfile.java:525)
    at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:74)
    at org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:149)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:78)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:128)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:79)
    at de.coconet.soapui.selenium.setUp(selenium.java:15)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:32:20.730

这与您的代码无关。你有一个类路径问题。某些类依赖于不同于类路径中第一个版本的 ElementNode2。

如果您查看[jarfinder](http://www.jarfinder.com/index.php/java/info/org.apache.crimson.tree.ElementNode2)，您会发现在 JDK 1.4 之后，此类包含在 Java 运行时 (rt.jar) 中。

我怀疑您使用的是旧版本的 JDK，而不是 WebDriver 编译时所针对的版本。WebDriver 需要 JDK 1.6+。

# .net - 使用 System.Xml.XmlDocument 解析 vcxproj

> ID：11556987
> 
> 赞同：2
> 
> 时间：2012-07-19T08:39:10.153
> 
> 标签：.net, xml, powershell, msbuild

我正在尝试使用 powershell 解析一个 vcxproj 文件（实际上是使用 .NET 类 System.Xml.XmlDocument）。该问题似乎与根元素的 xmlns 属性有关 - 请参阅下面的示例 xml 文件（原始 xml 的摘录）

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ItemGroup Label="ProjectConfigurations">
    <ProjectConfiguration Include="Debug|Win32">
      <Configuration>Debug</Configuration>
      <Platform>Win32</Platform>
    </ProjectConfiguration>
    <ProjectConfiguration Include="Release|Win32">
      <Configuration>Release</Configuration>
      <Platform>Win32</Platform>
    </ProjectConfiguration>
  </ItemGroup>
</Project> 
```

使用 powershell 我打开 xml 文件并想要选择一些节点。但这实际上并没有返回任何节点。

```
[System.Xml.XmlDocument] $xml = new-object System.Xml.XmlDocument
$xml.Load("/path/to/xml/file")
$nodes = $xml.SelectNodes("//ProjectConfiguration") 
```

我已经尝试添加一个命名空间管理器，但这并没有帮助：

```
[System.Xml.XmlDocument] $xml = new-object System.Xml.XmlDocument
$xml.Load("/path/to/xml/file")
$mgr=new-object System.Xml.XmlNamespaceManager($xml.Psbase.NameTable)
$mgr.AddNamespace("gr",$xml.configuration.psbase.NamespaceURI)
$nodes = $xml.SelectNodes("//ProjectConfiguration") 
```

如果我删除根元素的 xmlns 属性，一切正常。

问候，约翰内斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:30:44.387

[我在这里](https://stackoverflow.com/questions/6283774)找到了一个适用于此 PowerShell的 C# 示例：

```
$inputstring = @'
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ItemGroup Label="ProjectConfigurations">
    <ProjectConfiguration Include="Debug|Win32">
      <Configuration>Debug</Configuration>
      <Platform>Win32</Platform>
    </ProjectConfiguration>
    <ProjectConfiguration Include="Release|Win32">
      <Configuration>Release</Configuration>
      <Platform>Win32</Platform>
    </ProjectConfiguration>
  </ItemGroup>
</Project>
'@
$xpath = "/rs:Project/rs:ItemGroup/rs:ProjectConfiguration"
$xmldoc = New-Object System.Xml.XmlDocument
$xmldoc.LoadXml($inputstring)
# !!USE xmldoc.load if you want to load from a file instead

# Create an XmlNamespaceManager for resolving namespaces
$nsmgr = New-Object System.Xml.XmlNamespaceManager($xmldoc.NameTable);
$nsmgr.AddNamespace("rs", "http://schemas.microsoft.com/developer/msbuild/2003");

$root = $xmldoc.DocumentElement
$nodes = $root.SelectNodes($xpath, $nsmgr)

$outputstring = "Found " + $nodes.Count + " item(s)"
write-host $outputstring 
```

我得到的输出是：

```
Found 2 item(s) 
```

# javascript - jquery图片库幻灯片动画

> ID：11556991
> 
> 赞同：0
> 
> 时间：2012-07-19T08:39:22.370
> 
> 标签：javascript, jquery

我正在尝试制作一个像这样的简单图片库。[http://dimsemenov.com/plugins/royal-slider/#image-gallery](http://dimsemenov.com/plugins/royal-slider/#image-gallery) 当我单击缩略图时，图像元素将创建，加载图像会出现一点时间，创建的元素将在可见区域滑动。最后老图像元素将被删除。

```
<div id="imageGallery" style="overflow:visible;display:block;">
<div class="preview">
    <div id="content" style="width:640px;height:420px;">
         <img id="main-Image" alt="" src="../../baContent/image1.jpg" style="display:inline; top:0;left:0;" />
    </div>
</div>
<div id="thumbnails">
    <a class="thumbnail" href="../../baContent/image1.jpg"><img alt="Image 1" src="../../baContent/image1-thumb.jpg"></a>
    <a class="thumbnail" href="../../baContent/image2.jpg"><img alt="Image 2" src="../../baContent/image2-thumb.jpg"></a>   
</div> 
```

```
$(document).ready(function () {
    $(".thumbnail").click(function () {
        $("#mainImage").animate({ "left": "-640px" }, "fast");
        $('#preview').css('background-image', "url('../../baContent/spinner.gif')");
        var img = $("<img style='left:640px;display:none;' />").attr('src', this.href).load(function () {
            $('#mainImage').attr('src', img.attr('src'));
            $('#preview').css('background-image', 'none');
            $(this).parent().prevAll().remove();
            $("#mainImage").animate({ "left": "-640px" }, "fast");
        });

    });

}); 
```

我写了一些代码，但没有成功。有什么想法或教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:59:33.090

尝试 ：

```
$(document).ready(function () {
    $(".thumbnail").click(function () {
        $('#main-Image').hide();
        $('#preview').css('background-image', "url('../../baContent/spinner.gif')");

        var imgSrc = $(this).attr('href');
        var img = $("<img style='left:640px;display:none;' />").attr('src', imgSrc).load(function () {
            $('#main-Image').attr('src', imgSrc);
            $('#preview').css('background-image', 'none');
            $('#main-Image').fadeIn();
        });

        return false;
    });
});​ 
```

您可以添加所有想要的动画。

对于一个好的滑块，请参阅[http://bxslider.com/](http://bxslider.com/)。

# php - 对php中的不同文件使用相同的对象

> ID：11556993
> 
> 赞同：0
> 
> 时间：2012-07-19T08:39:33.333
> 
> 标签：php

我有两个文件，分别是 file1.php 和 file2.php。我有一个名为 form 的 php 文件，其中定义了类表单。我在 file1.php 中创建了一个对象，如下所示：

```
require_once('form.php');
$x=$_GET['field'];
$form = new Form("", ""); 
$personal = new Block("");

$address = new TextArea("address", $x, "", 3, 30); 
$personal->add($address);
$form->add($personal);
echo $form; 
```

现在我想在另一个文件 file2.php 中使用这个对象 $form 和 $personal ，如下所示：

```
$personal = new Block("");
$name = new Text("name",$x);
$personal->add($name);
$form->add($personal);
echo $form; 
```

我如何在 php.ini 中使用这些对象。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:53:31.793

如果您将一个 PHP 文件包含到另一个文件中，则没有问题，因为两者中的代码都会合并到包含代码的范围内。

否则，如果您希望我们重用代码中不同位置的对象，您可以使用[注册表](http://www.sitecrafting.com/blog/php-patterns-part/)（另请参阅：[如何在 PHP 中测试注册表模式或单例？](https://stackoverflow.com/questions/5283102/how-is-testing-registry-pattern-or-singleton-hard-in-php)）来存储实例化对象。

如果您计划在下一页加载时重复使用相同的对象，则需要对它们进行序列化，将序列化的对象存储在会话/缓存（或其他地方）中，并在加载下一页后对其进行反序列化。在这种情况下，您还需要一些机制来建立数据库连接或执行其他必需的任务（[请参阅：）`__wakeup()`](http://php.net/oop4.magic-functions.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:42:29.747

通常，每次运行脚本时都必须创建对象的新实例。

如果没有，您可以序列化对象，将其转换为字符串格式，然后在需要时取消序列化，但您必须将字符串存储在某处。声明一个新类通常更容易。

* * *

在大多数情况下，您将使用您的对象来修改数据库中的值。创建新实例时（在页面重新加载时），它会查看数据库以获取修改后的值。这样，同一个实例不必在重新加载后持续存在。

您的班级将使用 getter 和 setter（“访问器”和“修饰符”）来处理您需要的值 -`$address`例如。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:48:56.977

首先包括file1.php

然后只需调用实例：

```
require_once('file1.php');
$name = new Text("name",$x);
$personal->add($name);
$form->add($personal);
echo $form; 
```

请记住，`$form`和的实例`$personal`已经在 file1.php 中创建