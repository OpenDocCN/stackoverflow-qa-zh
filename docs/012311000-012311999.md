# StackOverflow 问答 12311000-12311999

# python - GAE python中的YAML文件url和脚本

> ID：12311000
> 
> 赞同：1
> 
> 时间：2012-09-07T02:37:49.063
> 
> 标签：python, google-app-engine, yaml

我在 Google App Engine 中使用 Python 2.7，似乎无法正确设置我的 app.yaml 文件。

我的目标是，如果我去，`http://localhost/carlos/`我会得到一个执行的 carlos.py

这是我的目录结构：

```
app\
   \app.yaml
   \main.py
   \carlos.py 
```

这是我当前的 app.yaml 文件：

```
application: myapp
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: /carlos/.*
  script: carlos.app

- url: .*
  script: main.app 
```

我的 carlos.py 文件是：

```
import webapp2

class MainHandler(webapp2.RequestHandler):
  def get(self):
    self.response.out.write("Hello, Carlos!")

app = webapp2.WSGIApplication([('/carlos', MainHandler)],
                              debug=True) 
```

但是，我现在得到的只是 404 Not Found 错误。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T05:58:29.893

我能够确定解决方案，并认为我会为那里的任何人发布它。

在我的 carlos.py 文件中，我需要替换：

```
app = webapp2.WSGIApplication([('/', MainHandler)],
                              debug=True) 
```

和

```
app = webapp2.WSGIApplication([('/carlos/', MainHandler)],
                              debug=True) 
```

WSGIApplication 的第一个参数似乎是指从您的根 Web 地址开始的 TOTAL 路径，而不是最初指向它的 INCREMENTAL 路径。

我选择这个答案而不是 Littm 提供的答案，因为我想继续使用 WSGI

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:01:58.673

它进行了以下修改：

1 - 在 yaml 文件中将“carlos.app”替换为“carlos.py”，将“main.app”替换为“main.py”。

2 - 在文件“carlos.py”中的“/carlos”之后添加一个斜杠（“/”）。

3 - 在每个python文件（carlos.py和main.py）的末尾添加以下部分代码

```
def main():
    app.run() 
```

* * *

以下是修改文件的示例：

**应用程序.yaml：**

```
application: myapp
version: 1
runtime: python27
api_version: 1
threadsafe: no

handlers:
- url: /carlos/.*
  script: carlos.py

- url: .*
  script: main.py 
```

**carlos.py :** 导入 webapp2

```
class MainHandler(webapp2.RequestHandler):
  def get(self):
    self.response.out.write("Hello, Carlos!")

app = webapp2.WSGIApplication([('/carlos/', MainHandler)],
                          debug=True)

def main():
    app.run() 
```

**主.py：**

```
import webapp2

class MainHandler(webapp2.RequestHandler):
  def get(self):
    self.response.out.write("Hello, MAIN!")

app = webapp2.WSGIApplication([('/', MainHandler)],
                          debug=True)

def main():
    app.run() 
```

您可以尝试导航到：

localhost:8080/carlos/ 和 localhost:8080/ 查看结果

希望能帮助到你 ;）

# scala - 有没有更优雅的方式来使用 Scalaz 编写这个？

> ID：12311004
> 
> 赞同：2
> 
> 时间：2012-09-07T02:38:24.433
> 
> 标签：scala, scalaz

下面的代码有效，但选项 b 上的模式匹配看起来并不优雅。有没有办法在保持相同语义的同时避免它？

```
object A {
  def apply(b: B): ValidationNEL[String, A] = ...
}

case class C(i: Int, a: Option[A])

object C {
  def apply(i: Int, b: Option[B]): ValidationNEL[String, C] = b match {
    case None => Success(C(i, None))
    case Some(sb) => A(sb).map(bb => C(i, Some(bb)))
  }     
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T07:07:41.550

使用 scalaz，您可以折叠 Option

```
b fold ( sb => A(sb) map (bb => C(i, some(bb))), C(i, none).success) 
```

可能有一种简化`sb => A(sb) map (bb => C(i, some(bb)))`使用*无点样式*的方法，但这在 scala 中通常很难看：

## 设置

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

object A {
  def apply(b: B): ValidationNEL[String, A] = sys.error("")
}
case class A()
case class B()
case class C(i: Int, a: Option[A])

// Exiting paste mode, now interpreting.

defined module A
defined class A
defined class B
defined class C 
```

## 第一个实现

```
scala> def apply(i: Int, b: Option[B]): ValidationNEL[String, C] =
     | b fold ( sb => A(sb) map (bb => C(i, some(bb))), C(i, none).success)
apply: (i: Int, b: Option[B])scalaz.Scalaz.ValidationNEL[String,C] 
```

## 第二个实现

如果你声明一等函数，你就有更好的组合机会。例如：

```
object A { val fromB: B => ValidationNEL[String, A] = _ => sys.error("") }
object C { val fromA: Int => A => C = i => a => C(i, some(a)) }

defined module A
defined module C 
```

然后

```
scala> def apply(i: Int, b: Option[B]): ValidationNEL[String, C] =
     | b fold (A.fromB andThen (_ map C.fromA(i)), C(i, none).success)
apply: (i: Int, b: Option[B])scalaz.Scalaz.ValidationNEL[String,C] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T06:30:45.953

您甚至不需要 scalaz 特定的东西来简化这一点，只需使用`Option.map`：

```
b.map { sb => /* will only be called if b is Some[A] */ }.getOrElse { /* will only be called if b is None */ } 
```

我不能给你确切的解决方案，因为你发布的代码不完整。`A`in`case class C`不在范围内。这应该是一个类型参数，还是`class A`属于`object A`?

# python - Python FLOPS 计算

> ID：12311020
> 
> 赞同：6
> 
> 时间：2012-09-07T02:41:13.467
> 
> 标签：python, flops

我一直试图在我已经实现 Python 分布式处理程序的所有计算机上获得 FLOPS 的标准化估计。虽然我目前可以很好地计算 pystones，但 pystones 并不是特别为人所知，而且我不完全确定它们的准确度。

因此，我需要一种方法来计算（或已经完成它的模块）在各种机器上的 FLOPS，这些机器可能有任何种类的 CPU 等。因为 Python 是一种解释性语言，只需计算它所花费的时间一定数量的操作不会在例如 Linpack 的级别上执行。虽然我并不特别需要与基准测试中的大“名字”之一完全相同的估计，但我希望它至少相当接近。

因此，有没有办法或预先存在的模块让我获得 FLOPS？否则，我唯一的选择是编译成 Cython，或者尝试根据 CPU 时钟速度估计功能......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T05:30:33.830

Linpack 或高性能 linpack 通常是测量触发器的行业标准。[我在这里](http://www.ucs.cam.ac.uk/docs/course-notes/unix-courses/NumericalPython/files/Examples/linpack.py)找到了一个 python 实现，但它可能没有多大用处，标准实现（特别是如果你有一个集群）将使用[HPL](http://www.netlib.org/benchmark/hpl/)。除非您想在 python 中实现自己的并行 linpack，否则 HPL 是可行的方法。[这是500 强名单](http://www.top500.org)上的大多数怪物超级计算机用来衡量其性能的方法

如果你真的很想这样做，即使它可能没有意义或没有多大用处，你可能想考虑将原始 MPI 版本移植到[0-MQ](http://www.zeromq.org/bindings:python)，它有一个很好的 python 接口。

# c# - 继承与类型标志

> ID：12311021
> 
> 赞同：5
> 
> 时间：2012-09-07T02:41:46.293
> 
> 标签：c#, oop, inheritance, types

我已经进行了一些搜索（也许我没有很好地描述我的问题）但无法找到答案

假设您有以下 POCO：

```
public class StandardObject
{
   public string A {get;set;}
   public string B {get;set;}
} 
```

在程序的其他地方有一些逻辑来处理标准对象。有时可能需要以不同方式处理 StandardObject 的情况。我们在创建 StandardObject 时就知道这一点，但是当前的任何属性都不能用于进一步确定这一点。一种方法是在 StandardObject 上添加和设置标志或类型枚举，并在处理对象时检查它。例如

```
if(standardObject.IsSpecial){...}

if(standardObject.ObjectType == StandardObjectTypeEnum.Special){...} 
```

不过，这似乎不是最好的方法。

另一种选择是创建派生类：

```
public class SpecialObject : StandardObject { } 
```

所以现在我们可以检查类型，而不是检查属性。例如

```
if(standardObject.GetType() == typeof(SpecialObject)){...} 
```

（根据我们所做的事情，类型检查可能会以不同的方式实现）

请注意，SpecialObject 不会以任何方式添加或更改 StandardObject。它本质上是同一个对象。这种方法的优点是更灵活（例如我们可以向 SpecialObject 添加一些额外的属性），但实际上它不会改变。它总是相同的。

对我来说，继承似乎是更好的方法。类型标志看起来像是代码异味，而向前继承似乎更像是正确的 OOP 方法。我在这里不确定的是，鉴于 StandardObject 和 SpecialObject 是相同的，这样做是不好的做法吗？或者有什么理由可以避免这种情况？

这里有一个类似的问题：

[棋子层次结构设计：继承与类型字段](https://stackoverflow.com/questions/4570389/chess-piece-hierarchy-design-inheritance-vs-type-fields)

然而，大多数讨论似乎都集中在国际象棋问题上，而不是什么被认为是好的设计

编辑：

封装似乎是流行的解决方案。我避免封装的原因最好在下面的示例中描述：

*   StandardObject 本质上是一个 DTO
*   有一个 StandardObject 列表。
*   列表被处理，StandardObject 被序列化
*   序列化数据通过任意数量的不同协议发送到某处
*   如果 StandardObject 为“特殊”，则其中一种协议需要设置某些参数

鉴于“特殊”情况的附加逻辑仅由处理 StandardObject 的多种不同机制之一需要，因此该逻辑似乎不属于 StandardObject 附近的任何地方

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T02:48:06.583

它们都是*代码*气味。如果您有必须在两种相关类型之间以不同方式完成的特殊处理，请让它们都实现一些允许它们处理特殊情况的虚拟方法或接口操作（如果没有必要，也可以不处理）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T03:03:32.717

您还可以使用策略模式封装您的“处理”逻辑，方法是拥有一个抽象基类，您还可以在其中放置共享实现。或者您也可以调用派生实现和继承实现。

```
public abstract class Vehicle
{
    private MovementStrategy movementStrategy;

    protected Vehicle(MovementStrategy strategy)
    {
        this.movementStrategy = strategy;
    }

    public void Move()
    {
        movementStrategy.Move();
    }

    public virtual void CommonAlert()
    {
        Console.WriteLine("Base generic vehicle alert");
    }
}

public class Car : Vehicle
{
    public Car(MovementStrategy movementStrategy)
        : base(movementStrategy)
    {
    }

    public override void CommonAlert()
    {
        Console.WriteLine("Car says 'Honk!'");
    }
}

public class Elevator : Vehicle
{
    public Elevator(MovementStrategy movementStrategy)
        : base(movementStrategy)
    {
    }

    public override void CommonAlert()
    {
        Console.WriteLine("Elevator says 'Ding!'");
        base.CommonAlert();
    }
}

public abstract class MovementStrategy
{
    public abstract void Move();
}

public class CarMovementStrategy : MovementStrategy
{
    public override void Move()
    {
        Console.WriteLine("Car moved");
    }
}

public class ElevatorMovementStrategy : MovementStrategy
{
    public override void Move()
    {
        Console.WriteLine("Elevator moved");
    }
} 
```

然后，对于您的主程序，示例使用：

```
class Program
{
    static void Main(string[] args)
    {
        Vehicle elevator = new Elevator(new ElevatorMovementStrategy());
        Vehicle car = new Car(new CarMovementStrategy());

        elevator.Move();
        car.Move();

        elevator.CommonAlert();
        car.CommonAlert();

        Console.Read();

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T02:57:41.180

如果您需要根据对象的属性以不同的方式处理对象，则最好将方法用于在类内部操作对象。对象的行为可以由一些私有状态变量或派生对象的类型决定，但调用代码不需要知道这一点。

概括地说，我们有一个元素需要根据某些属性以特定方式绘制。

如果该类只是在其中进行处理，则您只需要做：

```
MyElement.Draw(); 
```

代替：

```
if(MyElement.Flag)
{
     DrawBlue(MyElement);
}
else
{
    DrawRed(MyElement);
} 
```

对于调用代码，无需公开必须确定特定行为的方式。

# ssh - “cp -rf”（SSH）会维护不在源文件夹中的文件吗？

> ID：12311026
> 
> 赞同：1
> 
> 时间：2012-09-07T02:42:42.260
> 
> 标签：ssh, terminal

使用 SSH 命令`cp -rf`时，它会删除不在源结构中的文件还是会忽略它们？

例如：如果您正在处理从 foo/vault 到 bar/vault 的所有文件，如果 bar/vault 有其他文件，这些文件会保持不变还是会被删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T02:57:05.367

目标目录中的文件不会被删除。它们将保持不变，而源目录中的文件将被复制进去。

因此，对于上面的示例，执行副本时不会删除 bar/vault 中的文件（foo/vault 中不存在）。

# go - 在 Go 中提取子字符串

> ID：12311033
> 
> 赞同：153
> 
> 时间：2012-09-07T02:43:59.460
> 
> 标签：go, substring

我正在尝试从控制台读取整行（包括空格），然后对其进行处理。使用 bufio.ReadString，换行符与输入一起读取，所以我想出了以下代码来修剪换行符：

```
input,_:=src.ReadString('\n')
inputFmt:=input[0:len(input)-2]+"" //Need to manually add end of string 
```

有没有更惯用的方法来做到这一点？也就是说，在为您提取子字符串时，是否已经有一个库可以处理结束的空字节？

[（是的，我知道已经有一种方法可以在go readline -> string](https://stackoverflow.com/questions/6141604/go-readline-string)中读取没有换行符的行，但我正在寻找更多优雅的字符串操作。）

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2012-09-07T07:39:37.790

看起来您对切片的工作和字符串存储格式感到困惑，这与您在 C 中的不同。

*   Go 中的任何切片都存储长度（以字节为单位），因此您不必关心`len`操作的成本：无需计算
*   Go 字符串不是以 null 结尾的，因此您不必删除 null 字节，也不必`1`在切片后通过添加空字符串来添加。

要删除最后一个字符（如果它是一个字节字符），只需执行

```
inputFmt:=input[:len(input)-1] 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2019-05-14T11:27:26.153

警告：仅对字符串进行操作仅适用于 ASCII，并且当输入是非 ASCII UTF-8 编码字符时计数错误，甚至可能会损坏字符，因为它会在序列中切割多字节字符。

这是一个支持 UTF-8 的版本：

```
// NOTE: this isn't multi-Unicode-codepoint aware, like specifying skintone or
//       gender of an emoji: https://unicode.org/emoji/charts/full-emoji-modifiers.html
func substr(input string, start int, length int) string {
    asRunes := []rune(input)

    if start >= len(asRunes) {
        return ""
    }

    if start+length > len(asRunes) {
        length = len(asRunes) - start
    }

    return string(asRunes[start : start+length])
} 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-09-07T15:10:53.790

Go 字符串不是以 null 结尾的，要删除字符串的最后一个字符，您可以简单地执行以下操作：

```
s = s[:len(s)-1] 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2018-05-23T07:37:42.807

这是在 Go 中执行子字符串的简单方法

```
package main

import "fmt"

var p = fmt.Println

func main() {

  value := "address;bar"

  // Take substring from index 2 to length of string
  substring := value[2:len(value)]
  p(substring)

} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-02-05T18:37:53.987

为避免零长度输入出现恐慌，请将截断操作包装在 if

```
input, _ := src.ReadString('\n')
var inputFmt string
if len(input) > 0 {
    inputFmt = input[:len(input)-1]
}
// Do something with inputFmt 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-11-03T08:51:43.867

获取子字符串

1.  找到“sp”的位置

2.  用数组逻辑切割字符串

[https://play.golang.org/p/0Redd_qiZM](https://play.golang.org/p/0Redd_qiZM)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-01-30T08:37:33.903

8 年后，我偶然发现了这颗宝石，但我不相信 OP 最初的问题得到了真正的回答：

> 所以我想出了以下代码来修剪换行符

虽然该`bufio.Reader`类型支持一种[`ReadLine()`](https://golang.org/pkg/bufio/#Reader.ReadLine) 既可移除`\r\n`又`\n`可用作低级函数的方法，但由于需要重复检查，因此使用起来很尴尬。

IMO 删除空格的惯用方法是使用 Golang 的[字符串](https://golang.org/pkg/strings/)库：

```
input, _ = src.ReadString('\n')

// more specific to the problem of trailing newlines
actual = strings.TrimRight(input, "\r\n")

// or if you don't mind to trim leading and trailing whitespaces 
actual := strings.TrimSpace(input) 
```

在 Golang 游乐场中查看此示例：https: [//play.golang.org/p/HrOWH0kl3Ww](https://play.golang.org/p/HrOWH0kl3Ww)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-09-07T05:52:23.997

希望此功能对某人有所帮助，

```
str := "Error 1062: Duplicate entry 'user@email.com' for key 'users.email'"
getViolatedValue(str) 
```

这用于在主字符串中使用**'的子字符串**

```
func getViolatedValue(msg string) string {
    i := strings.Index(msg, "'")

    if i > -1 {
        part := msg[i+1:]
        j := strings.Index(part, "'")
        if j > -1 {
            return part[:j]
        }
        return ""
    } else {
        return ""
    }
} 
```

# javascript - 在 instagram API 中显示 20 多张照片

> ID：12311037
> 
> 赞同：16
> 
> 时间：2012-09-07T02:44:11.590
> 
> 标签：javascript, jquery, instagram

我一直在做一些研究并试图弄清楚如何显示从 instagram api 中提取的 20 多张图像。我对此很陌生，所以任何帮助将不胜感激！只是想看看有没有解决办法？看到了一些关于添加可能有帮助的分页的东西。如果是这样的话，关于如何做到这一点的细节也很棒！

这是我到目前为止的代码。

```
<script type="text/javascript">
    $.ajax({
        type: "GET",
        dataType: "jsonp",
        cache: false,
        url: "https://api.instagram.com/v1/tags/coffee/media/recent?client_id=[]&access_token=[]",
        success: function(data)  {
            for (var i = 0; i < 20; i++) {
                $(".instagram").append("<a class='big-square span2' target='_blank' href='" + data.data[i].link +"'><img src='" + data.data[i].images.low_resolution.url +"'></img></a>");
            }
        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T17:31:53.177

Instagram 对其 API 有 20 张图片限制，请查看此线程和我的答案：

[Instagram 的最大请求数是多少？](https://stackoverflow.com/questions/12322028/what-is-the-maximum-number-of-requests-for-instagram)

**编辑：另外，看看[这个](http://thegregthompson.com/old_site/displaying-instagram-images-ignoring-page-pagination/)**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-24T11:22:07.847

2015 年 11 月 17 日之前创建的任何应用程序将继续运行至 2016 年 6 月。2016 年 6 月之后，如果未通过审核流程，该应用程序将自动进入沙盒模式。
沙盒模式是真实的 Instagram 数据（即通常在 Instagram 应用程序中可见的数据），但具有以下条件：

*   沙盒中的应用程序限制为 10 个用户
*   **数据仅限于 10 个用户和每个用户的 20 个最新媒体**
*   降低 API 速率限制

[更多信息](https://www.instagram.com/developer/sandbox/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-07T02:54:30.157

尝试添加`&count=N`到请求中，其中 N 是您想要的结果数。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-07T09:11:39.563

试试这个代码

```
$api = "https://api.instagram.com/v1/tags/snow/media/recent?client_id=".$client;  

function get_curl($url) {  
    if(function_exists('curl_init')) {  
        $ch = curl_init();  
        curl_setopt($ch, CURLOPT_URL,$url);  
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);  
        curl_setopt($ch, CURLOPT_HEADER, 0);  
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);  
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);   
        $output = curl_exec($ch);  
        echo curl_error($ch);  
        curl_close($ch);  
        return $output;  
    } else{  
        return file_get_contents($url);  
    }  
}

while ($api !== NULL) {
    $response = get_curl($api);
    foreach(json_decode($response)->data as $item){   
        $src = $item->images->standard_resolution->url;  
        $thumb = $item->images->thumbnail->url;  
        $url = $item->link;  

        $images[] = array(  
        "src" => htmlspecialchars($src),  
        "thumb" => htmlspecialchars($thumb),  
        "url" => htmlspecialchars($url)  
        );  
    echo "<a href='".$src."'><img src='".$thumb."'  width='150' height='150' border='0'></a> ";
    } 
    $api = json_decode($response)->pagination->next_url;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-06T05:35:01.327

`count`你可以通过指定一个参数并设置为你想要的数字来获得20多个项目。

但是，Instagram 还对您提出的每个请求施加了 33 个未记录的限制，因此如果您收到超过 33 个请求，则必须分页。

但是，我已经编写[**了 Instafetch**](https://github.com/d4nyll/instafetch)，它可以帮助您进行分页，它甚至可以为您按标签过滤媒体。所以请放心使用！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-03T21:58:53.773

请参阅[http://instagram.com/developer/endpoints/](http://instagram.com/developer/endpoints/)。它详细介绍了端点的泛型，还列出了分页属性。简而言之，一个“分页”响应将包括一个`next_url`可用于检索下一组结果的。随后检索所有下一个 URL（只要它们在结果中提供）将为您提供完整的集合。

BTW，您可以尝试增加`count`请求中的参数。（根据您使用的 Instagram 库，可以通过`options`哈希或类似的方式提供此类内容。）这可能会为您节省一些额外的请求。我刚刚提到的页面没有指定最大计数值。我怀疑 Instagram 正在动态更改每个端点的最大值。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-17T10:13:16.543

您不能获得超过 20 个帖子，如果您是沙盒用户，请在[此处阅读“API BEHAVIOUR”下的内容](https://www.instagram.com/developer/sandbox/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-18T22:13:16.853

实际上，有机会获得接下来的 20 张图片，然后是接下来的 20 张等等……在 JSON 响应中有一个“**分页**”数组：

```
 "pagination":{
      "next_max_tag_id":"1411892342253728",
      "deprecation_warning":"next_max_id and min_id are deprecated for this endpoint; use min_tag_id and max_tag_id instead",
      "next_max_id":"1411892342253728",
      "next_min_id":"1414849145899763",
      "min_tag_id":"1414849145899763",
      "next_url":"https:\/\/api.instagram.com\/v1\/tags\/lemonbarclub\/media\/recent?client_id=xxxxxxxxxxxxxxxxxx\u0026max_tag_id=1411892342253728"
 } 
```

这是有关特定 API 调用的信息，对象“ **next_url** ”显示获取接下来 20 张图片的 URL，因此只需获取该 URL 并为接下来的 20 张图片调用它...

有关 Instagram API 的更多信息，请查看：[https ://medium.com/@KevinMcAlear/getting-friendly-with-instagrams-api-abe3b929bc52](https://medium.com/@KevinMcAlear/getting-friendly-with-instagrams-api-abe3b929bc52)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-25T09:38:17.257

您可以使用 Instagram 提要库，例如[instafeed](http://instafeedjs.com/)。它允许获取 60 张图像的提要（最多）

例如：

```
<script type="text/javascript">
    var feed = new Instafeed({
        get: 'tagged',
        tagName: 'awesome',
        limit: 20,
        clientId: 'YOUR_CLIENT_ID'
    });
    feed.run();
</script> 
```

limit (number) - 要添加的最大图像数。最多 60 个。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-18T01:01:26.280

## 老问题。新答案。

这是2021年的解决方案。

您将需要使用[Instagram Basic Display API](https://developers.facebook.com/docs/instagram-basic-display-api/overview)来显示媒体项目。（这个答案不包括设置）。

假设上述设置正确，**您可以使用*limit*参数来控制 API 返回多少媒体结果**。

**默认值为 25**（未设置限制），**允许的最大值为**100 。（您可能会使用分页获得更多结果，但这又是题外话了）。

下面的 cURL 代码示例使用[Me 端点](https://developers.facebook.com/docs/instagram-basic-display-api/reference/me)。

```
GET https://graph.instagram.com/me
    ?fields={fields}
    &access_token={access-token}
    &limit={required number of items} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-02-10T02:32:10.130

```
<script>
    var token = 'your_token',
    userid = your_id,
    num_photos = 12;
    $.ajax({
            url: 'https://api.instagram.com/v1/users/'+userid+'/media/recent',
            dataType: 'jsonp',
            type: 'GET',
            data: {access_token: token, count: num_photos},
            success: function(data){
                console.log(data);
            },
            error: function(data){
            }
        });
</script> 
```

[12 张照片](https://i.stack.imgur.com/W5fsx.png)

[https://rudrastyh.com/javascript/get-photos-from-instagram.html](https://rudrastyh.com/javascript/get-photos-from-instagram.html)

# php - #1054 - “字段列表”中的未知列“domain.com”

> ID：12311038
> 
> 赞同：0
> 
> 时间：2012-09-07T02:44:11.827
> 
> 标签：php, mysql, insert, mysql-error-1054

好的，两天后的第二个问题......我可能在这里犯了一个新手错误，但我被卡住了。

试图将域名插入到“名称”列下的表中。我所有的变量都会回显，所以我知道它们正在被传递和设置。

插入内容如下：

```
$newDomain = $_POST['newDomain']; //Get domain name
$newDomain_query =  mysql_query("INSERT INTO virtual_domains (name) VALUES ($newDomain)");
header("Location: domain_detail.php?domain=".$newDomain); 
```

我尝试了许多编写此脚本的方法，但是每次我在包含以下内容时都会得到相同的结果：

```
or die(mysql_error) 
```

在脚本中。查询没有运行，当我取出模具部分时，它只是跳转到标题位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T02:47:24.280

您需要确保在插入语句中用引号将字符串括起来。

试试这个：

```
$newDomain = $_POST['newDomain']; //Get domain name
$newDomain_query =  mysql_query("INSERT INTO virtual_domains (name) VALUES ('$newDomain')");
header("Location: domain_detail.php?domain=".$newDomain); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T02:46:35.843

您缺少围绕您的价值的引号。查询应该是：

```
"INSERT INTO virtual_domains (name) VALUES ('$newDomain')" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T02:58:47.033

扩展 Ken 的答案，让 mysql 使用 mysql_real_escape_string 处理引号的转义是一个好主意（特别是对于通过 post/get 发送的数据）。您可以使用以下方法执行此操作：

```
$newDomain = $_POST['newDomain']; //Get domain name
$newDomainEscaped = mysql_real_escape_string($newDomain);
$newDomain_query =  mysql_query("INSERT INTO virtual_domains (name) VALUES ('$newDomainEscaped')");
header("Location: domain_detail.php?domain=".$newDomain); 
```

如果有人在他们的“newDomain”中意外使用撇号，或者更糟糕的是任何 SQL 注入，这将有助于防止任何错误。

# php - 担心使用MailChimp发送会员信息

> ID：12311040
> 
> 赞同：4
> 
> 时间：2012-09-07T02:44:24.140
> 
> 标签：php, email, mailchimp, bulk-email

这更像是一个理论问题，因为**我尊重那些经常访问这个网站的人的意见**。此外，MailChimp 的工作人员仍然没有回复我一个多星期前发送的紧急电子邮件。

我担心将 MailChimp 用于我的 Web 应用程序，因为当用户需要收到这些电子邮件时，我不能允许用户“取消订阅”某些通知。

Mandrill 效果很好……但我不能用它一次向多人广播。

这是合理的担心吗？有没有办法解决？必须有安全地向需要此类电子邮件的会员群发送必要的批量电子邮件的答案。

感谢您的意见。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T15:08:44.987

我在 Mandrill 团队工作，看到了您的问题，并认为我可以提供帮助。我无法访问 MailChimp 支持队列，但我想我会添加一些有关使用 Mandrill 的详细信息，因为 Mandrill 可能非常适合您发送的电子邮件类型。

使用 MailChimp，因为它是为批量电子邮件而设计的，所以您**绝对**必须允许收件人取消订阅。没有办法删除取消订阅链接，MailChimp 的系统旨在检测何时取消订阅链接不存在并停止发送电子邮件。重新添加以前取消订阅的人是有问题的，MailChimp 列表管理功能旨在防止重新添加过去取消订阅的人。

然而，Mandrill 并不严格要求取消订阅链接，因为人们取消订阅交易和一次性电子邮件或通知通常没有意义。您可以通过 Mandrill 发送任何合法的非垃圾邮件（包括批量电子邮件）。如果您要批量发送，您只需要了解并遵守管理您的电子邮件的法律和法规（例如取消订阅链接的要求）。

您可以使用 Mandrill 一次发送给多个人，如下所述：[https ://mandrill.zendesk.com/hc/en-us/articles/205582557-Can-I-send-to-more-than-一次一个收件人-](https://mandrill.zendesk.com/hc/en-us/articles/205582557-Can-I-send-to-more-than-one-recipient-at-a-time-)

如果您使用 SMTP 集成，您可以为“收件人：”字段指定最多 1000 个收件人。如果您使用 API，您可以在“to”数组中根据需要指定任意数量的收件人：[https ://mandrillapp.com/api/docs/messages.html#method=send](https://mandrillapp.com/api/docs/messages.html#method=send)

如果您需要有关使用 Mandrill 的更多信息，请随时通过单击 help.mandrill.com 上的“提交请求”链接向 Mandrill 支持发送电子邮件。

# asp.net - ASP.NET（或 IIS）在使用 Server.MapPath 时给出错误的虚拟路径

> ID：12311041
> 
> 赞同：1
> 
> 时间：2012-09-07T02:44:53.137
> 
> 标签：asp.net, iis-7

当尝试获取我的 App_Data 文件夹的路径时，它会查看服务器上的错误路径。我有一个虚拟路径为 C:\Projects\MyProject 的网站设置。App 文件夹存在于 c:\Projects\MyProject\App_Data 中。

这段代码：

```
 var fileName = Path.GetFileName(file.FileName);
    var path = Path.Combine(Server.MapPath("~/App_Data/Uploads"), fileName); 
```

在我的 IIS 服务器上尝试导航到 C:\App_Data\Uploads\filename.ext。为什么它会尝试导航到 C:\ 根目录？

.NET 4、IIS 7、Web 窗体和 MVC 混合

# c# - MySql 获取当前日期发生的事务

> ID：12311043
> 
> 赞同：0
> 
> 时间：2012-09-07T02:45:30.093
> 
> 标签：c#, asp.net-mvc-3, linq

我正在开发一个应用程序，我需要获取当天发生的所有数据库条目。

因此，如果今天是 9 月 5 日，我需要获取该日期发生的所有交易。

如何在 linq 查询中执行此操作？

我将 DateTime.Now() 存储在该实体的数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T02:58:09.853

就像是：

```
var date = new DateTime(2012, 9, 5);
var dateEntities = Entities.Where(e => EntityFunctions.DiffDays(e.Date, date) == 0 ) 
```

# android - 如何找出apk文件中使用的Jar？

> ID：12311044
> 
> 赞同：3
> 
> 时间：2012-09-07T02:45:30.753
> 
> 标签：android, jar, apk

给定一个android apk文件，有没有一种简单的方法可以找出其中使用的jar？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T06:23:54.320

据我所知，不可能找出使用了哪些**jar-s**，因为在创建 android apk 时，jar 的内容被编译到 apk 中。

[如果 apk 的开发者没有使用混淆器软件，您可以使用apktool](http://code.google.com/p/android-apktool/)找出构建中涉及的命名空间和类名。命名空间可能是使用了哪些 jar 的提示。

# javascript - 如何从 Javascript 将控制权从 Javascript 转移到 ASP.Net 页面

> ID：12311045
> 
> 赞同：0
> 
> 时间：2012-09-07T02:45:44.513
> 
> 标签：javascript, asp.net, asp.net-mvc

我对.Net 很陌生。我搜索和谷歌了很多，但找不到我的问题的解决方案。

我有一个 ASP.Net 应用程序。在我的登录页面中，我只有一个用户 ID 字段。当用户提交按钮时，我需要一个过渡 ASP 页面（用户看不到但在后台运行的页面），它将运行一些 Javascript 并根据某些条件将控件转移到页面 a 或页面 b。我如何实现这一目标？

如何在 MVC 中从 Javascript 调用控制器操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T03:35:35.817

理想情况下，此类检查在服务器本身上完成。向客户端发送中间页面并进行重定向是一个较慢的选项（网络延迟）。

要调用特定的控制器操作，您只需将用户重定向到该 url。

在javascript中你可以使用

```
location.href = URL_TO_CONTROLLER; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:04:19.507

尝试这个

```
 function OnSubmitClick(UserID) {
                $.ajax({
                    url: "/YourControllerName/YourActionName",
                    data: { "selectedID": UserID },
                    success: function (data) {

                 });
              } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T05:04:04.487

您可以使用 ajax 函数来调用控制器操作

例子...

```
 function Foo(textInput) {
                    $.ajax({
                        url: "/ControllerName/ActionName?parameter1=" + textInput
                        success: function (data) {

                          //add code here

                     });
                  } 
```

# ruby - 无法在带有 RVM 的 Mountain Lion 上安装 Ruby 1.9.3：运行 make 时出错

> ID：12311052
> 
> 赞同：4
> 
> 时间：2012-09-07T02:46:23.910
> 
> 标签：ruby, macos, rvm, osx-mountain-lion, libz

我正在尝试安装 Ruby，这样我就可以参加“Learn Ruby the Hard Way”课程，而我在安装最新版本的 Ruby 时遇到了很多麻烦

这是我日志的相关部分：

```
compiling md5ossl.c
linking shared-object digest/md5.bundle
ld: in /usr/local/lib/libz.1.dylib, file was built for unsupported file format ( 0xce 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 0 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ) which is not the architecture being linked (x86_64): /usr/local/lib/libz.1.dylib for architecture x86_64
collect2: ld returned 1 exit status
make[2]: *** [../../../.ext/x86_64-darwin12.1.0/digest/md5.bundle] Error 1
make[1]: *** [ext/digest/md5/all] Error 2
make: *** [build-ext] Error 2 
```

我四处搜索，发现这篇文章看起来与完全相同的问题：[Cannot install Ruby 1.9.3 on Mountain Lion w/Jewlery Box: Error running make -j4 (have current readline, gcc)](https://stackoverflow.com/questions/11765527/cannot-install-ruby-1-9-3-on-mountain-lion-w-jewlery-box-error-running-make-j)

但是答案是模棱两可的“更新libz lib”。我不知道那是什么意思，我四处搜索并找到了 zlib，但我不知道这些是否与 libz 相同？我还发现另一个帖子表明libz是libtool，我的libtool版本是Apple Inc.版本cctools-829，但是libtool和libz是一样的吗？我以前从未见过这些术语，也从未使用过 Ruby，我完全糊涂了。

我有 gcc 4.2.1 和 xcode 4.4.1。感谢您的帮助，这是我在这里的第一篇文章，所以如果我做错了什么或需要提供更多信息，请告诉我。我基本上从我链接的标题中窃取了我的标题，因为我不确定如何格式化标题，我希望没关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T06:07:59.880

需要注意的是，OS X 没有放入任何东西，`/usr/local/lib`所以`/usr/local/bin`您必须自己在那里安装了一些东西，甚至可能是无意中安装的。

如果您正在使用像[rvm](http://rvm.io/)或[rbenv](http://rbenv.org/)这样的 Ruby 管理器，那么他们有特殊的构建工具来帮助完成这个过程。这比从源代码安装要容易得多，因为正确的补丁不仅适用于 Ruby，还适用于`libz`.

您可能拥有的是为您机器上的错误架构编译的库。这些可能是从旧的 PowerPC 安装，甚至是从 10.5 之前的 OS X 版本的 Intel 32 位安装的。

您最好的选择可能是简单地删除`/usr/local/lib/libz*`并使用与您的操作系统捆绑在一起的那些。您应该有一组`/usr/lib/libz*`可以工作的必需文件。

# java - 在 HP-UX 上使用 Swig 时 Java 崩溃

> ID：12311059
> 
> 赞同：1
> 
> 时间：2012-09-07T02:47:36.260
> 
> 标签：java, c++, swig, acc

我在 Hp-ux 上使用 swig 2.0.7 来包装我们的 C++ 库。在发生崩溃时尝试运行之前没有错误。

使用：

```
HP-UX bob B.11.23 U ia64 0835920252 unlimited-user license
aCC: HP C/aC++ B3910B A.06.20 [May 13 2008]
java version "1.7.0.01"
Java(TM) SE Runtime Environment (build 1.7.0.01-jinteg_2012_05_10_04_39-b00)
Java HotSpot(TM) Server VM (build 22.1-b02-jre1.7.0.01-rc2, mixed mode) 
```

swig 命令是

```
swig -c++ -package com.mybuild -java -I../Library -I../../Common mybuild.i 
```

swig 接口文件

```
/* File : mybuild.i */
%module mybuild

%include "std_string.i"

%{
#include "mybuild.h"
%}

%include "mybuild.h" 
```

在构建时，我看到一个警告

```
warning #2177-D: function
      "SWIG_JavaThrowException" was declared but never referenced
 static void SWIGUNUSED SWIG_JavaThrowException(JNIEnv *jenv, SWIG_JavaExceptionCodes code, const char *msg) { 
```

运行时出现问题，发生崩溃，我得到

```
(0) 0xc0000000054f4f60  _ZN6Thread18trace_native_stackEv + 0x140 [/opt/java7/jre/lib/IA64W/server/libjvm.so]
(1) 0xc0000000055b10c0  _ZN7VMError14report_and_dieEv + 0x6c0 [/opt/java7/jre/lib/IA64W/server/libjvm.so]
(2) 0xc0000000050d85b0  _Z30_handle_uncaught_cxx_exceptionv + 0x50 [/opt/java7/jre/lib/IA64W/server/libjvm.so]
(3) 0xc0000000017390f0  _ZSt9terminatev + 0x50 [/usr/lib/hpux64/libCsup.so.1]
(4) 0xc000000001740090  __cxa_throw + 0x1b0 [/usr/lib/hpux64/libCsup.so.1]
(5) 0xc0000000015e3220  _ZNSs9_C_unlinkEv + 0x220 [/usr/lib/hpux64/libstd_v2.so.1]
(6) 0xc0000000015f08f0  _ZNSt5ctypeIcE12_C_initfacetERKSt6locale + 0x800 [/usr/lib/hpux64/libstd_v2.so.1]
(7) 0xc0000000015f3990  _ZNKSt6locale16_C_install_facetEPN4__rw15__rw_facet_baseERKNS_2idE + 0x1d0 [/usr/lib/hpux64/libstd_v2.so.1]
(8) 0xc0000000015f2ae0  _ZNKSt6locale13_C_make_facetERKNS_2idEbiPFPN4__rw15__rw_facet_baseEiPKcmE + 0x440 [/usr/lib/hpux64/libstd_v2.so.1]
(9) 0xc0000000016d5b60  _ZNSt8ios_base4InitC3Ev + 0x1c80 [/usr/lib/hpux64/libstd_v2.so.1]
(10) 0xc000000005e72f00  __sinit_optionset_cpp_ + 0x70 [/usr/testing/mybuild.so]
(11) 0xc00000000004e1a0  EM_mark_BOS + 0x50 [/usr/lib/hpux64/dld.so]
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (0xe0000000), pid=7231, tid=1
#  Error: An uncaught C++ exception
#
# JRE version: 7.0
# Java VM: Java HotSpot(TM) 64-Bit Server VM (22.1-b02-jre1.7.0.01-rc2 mixed mode hp-ux-ia64 )
# Core dump written. Default location: /usr/testing/core or core.7231 (max size 2097151 kB). To ensure a full core dump, try "ulimit -c unlimited" before starting Java again
#
# An error report file with more information is saved as:
# /usr/testing/hs_err_pid7231.log
#
#  Please report this error to HP customer support. 
```

使用 gdb，我收到了更多信息：

```
 from /usr/lib/hpux64/libCsup.so.1
#16 0xc000000001740090:0 in __cxa_throw+0x1b0 ()
   from /usr/lib/hpux64/libCsup.so.1
#17 0xc0000000015e3220:0 in std::string::_C_unlink()+0x220 ()
   from /usr/lib/hpux64/libstd_v2.so.1
#18 0xc0000000015f08f0:0 in std::ctype<char>::_C_initfacet(std::locale const&)
   +0x800 () from /usr/lib/hpux64/libstd_v2.so.1
#19 0xc0000000015f3990:0 in std::locale::_C_install_facet(__rw::__rw_facet_base*,std::locale::id const&) const+0x1d0 () from /usr/lib/hpux64/libstd_v2.so.1
#20 0xc0000000015f2ae0:0 in std::locale::_C_make_facet(std::locale::id const&,bool,int,__rw::__rw_facet_base* (*)(int,char const*,unsigned long)) const
---Type <return> to continue, or q <return> to quit---
   +0x440 () from /usr/lib/hpux64/libstd_v2.so.1
#21 0xc0000000016d5b60:0 in std::ios_base::Init::Init()+0x1e40 ()
   from /usr/lib/hpux64/libstd_v2.so.1
#22 0xc000000005e72f00:0 in __sinit_optionset_cpp_ ()
    at /opt/aCC/include_std/iostream:48
#23 0xc00000000004e1a0:0 in EM_mark_BOS+0x50 () from /usr/lib/hpux64/dld.so 
```

我的理论是我需要调整 Swig 来阻止这次崩溃。协助将不胜感激。

**编辑代码添加了** 抱歉，我花了一段时间才弄清楚可能导致问题的原因。我发现这会导致崩溃

```
#include <iostream>
#include <string>
using namespace std;

static const string rangeFieldString("RangeField");

int main()
{

         cout << "I sure hope this works" << endl;
        return 0;
} 
```

但这不会

```
#include <iostream>
#include <string>
using namespace std;

static const char* rangeFieldString("RangeField");

int main()
{

         cout << "I sure hope this works" << endl;
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:02:27.053

我找到了解决方案。在系统上构建时，通过在CFLAGS和LDFLAGS中添加-mt，问题得到解决

```
CFLAGS=-Aa +e +DAportable +z +DD64 -mt
LDFLAGS=-Aa +e +DAportable -b +z +DD64 -mt 
```

# logging - 如何从 AIX 审计日志中获取 USER_Login 的客户端 IP 地址

> ID：12311062
> 
> 赞同：0
> 
> 时间：2012-09-07T02:48:09.720
> 
> 标签：logging, aix, audit

从`AIX`用户登录的审核日志中，我得到如下：

```
USER_Login root OK Wed Jan 31 13:51:45 2007 tsm user:
root tty: /dev/pts/2 
```

我只能获取`tty#`，但是如何获取`IP`用户登录的地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:19:00.433

命令“last”应该向您显示他们登录和注销时的 IP 地址和时间戳。

# xslt - 如何在 xsl:copy 中对所有未选择的属性执行应用模板？

> ID：12311066
> 
> 赞同：2
> 
> 时间：2012-09-07T02:48:46.210
> 
> 标签：xslt, apply-templates

假设我有以下 XSLT：

```
<xsl:template match="property">
    <xsl:copy>
        <xsl:apply-templates select="@id"/>
        <xsl:apply-templates select="@name"/>
        <xsl:apply-templates select="@componentClassID"/>
    </xsl:copy>
  </xsl:template> 
```

如何使用选择先前应用模板语句中未指定的所有属性的应用模板语句结束副本？

以下是正确的吗？

```
<xsl:apply-templates select="@*[name()!='id' and name()!='name' and name()!='componentClassID']"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T03:20:43.400

> 以下是正确的吗？
> 
> ```
> <xsl:apply-templates select=
>  "@*[name()!='id' and name()!='name' and name()!='componentClassID']"/> 
> ```

**是的，但它似乎太长了**。此外，建议不要使用`!=`运算符，因为当它的参数之一是节点集时，它的语义（行为）不直观。

**当要排除的属性名称*很多*时，我宁愿写成以下样式：**

```
<xsl:apply-templates select=
 "@*[not(contains('+id+name+componentClassID+', concat('+', name(), '+')))]"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:09:37.410

在 XSLT 2.0 当然你可以使用

```
<xsl:apply-templates select="@* except (@id, @name, @class)"/> 
```

您还可以将其简化为单个应用模板：

```
<xsl:apply-templates select="@id, @name, @class, @* except (@id, @name, @class)"/> 
```

如果您对重复感到不舒服，可以使用以下排序：

```
<xsl:apply-templates select="@*">
  <xsl:sort select="f:attOrder(.)"/>
</xsl:apply-templates>

<xsl:function name="f:attOrder" as="xs:integer">
  <xsl:param name="a" as="attribute()"/>
  <xsl:variable name="ix" select="index-of(("id", "name", "class"), local-name($a))"/>
  <xsl:sequence select="($ix, 1000)[1]"/>
</xsl:function> 
```

或者（这个也适用于 1.0）你可以使用模式：

```
<xsl:apply-templates select="@id"/>
<xsl:apply-templates select="@name"/>
<xsl:apply-templates select="@componentClassID"/>
<xsl:apply-templates select="@*" mode="remainder"/>

<xsl:template match="@id|@name|@componentClassID" mode="remainder"/> 
```

# c - 如何可视化编译器对多维数组的处理

> ID：12311068
> 
> 赞同：0
> 
> 时间：2012-09-07T02:48:58.383
> 
> 标签：c, gcc

请考虑以下代码：

```
int main()
{
    int array[3][4] = {
                          {47,29,18,65},
                          {10,11,12,13},
                          {20,21,22,23}
                      };

    printf ("%d", array[1][2]);

    return 0;
} 
```

我读过编译器在内部转换：

```
array[row_number][col_number] to *(*(array + row_number) + colnumber) 
```

是否有任何 GCC 选项可以让我获得一个可以显示的中间文件：

```
array[row_number][col_number] replaced with *(*(array + row_number) + colnumber) 
```

（就像：gcc -E 帮助我们深入分析预处理器相关信息）

谢谢。

# php - 如何用PHP中两者的区别来回显两个列SQL数据

> ID：12311075
> 
> 赞同：0
> 
> 时间：2012-09-07T02:49:48.707
> 
> 标签：php, mysql

有人可以帮助以下代码。我只是试图显示起始 num 和结束 num 之间的值的总数。即：如果开始是200，结束是205，我需要在屏幕上打印200,201,202,203,204和205。请协助使用以下代码

```
<?php

$con=mysql_connect('localhost','root') or die ("Server connection failure!");
$db=mysql_select_db('regional_data',$con) or die ("Couldn't connect the database");
$SQL="SELECT startnum, endnum FROM newchk";
$run=mysql_query($SQL,$con) or die ("SQL Error");
$nor=mysql_num_rows($run);

while ($rec = mysql_fetch_array($run))
{
    for($i=$rec['startnum']; $i=$rec['endnum']; $i++)
    {
    echo $i;
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T02:51:42.940

您错过了`<`循环`for`条件。

```
for($i=$rec['startnum']; $i<=$rec['endnum']; $i++)
{
    echo $i;
} 
```

***注意：***代码在输出中不包含逗号，它将`200201202203204205`在屏幕中产生。

如果你想打印逗号集中字符串，你可以这样做：

```
echo implode(',', range($rec['startnum'], $rec['endnum'])); 
```

# android - 如何在 Android 中找到可用的显示分辨率？

> ID：12311079
> 
> 赞同：1
> 
> 时间：2012-09-07T02:50:18.583
> 
> 标签：android, android-layout, screen-resolution

假设我们有一个想要完全管理显示区域的 Android 应用程序，因此它可以调整其子控件的大小（在运行时，没有 XML - 我们需要动态地主动修改子控件的大小）。

此应用程序将仅以横向运行，没有键盘输入，因此我们不希望可用区域发生变化。

我们将显示的大小将根据此可用区域计算。例如，一个项目恰好占据可用区域的左半部分，右半部分将与其他项目严格按比例分配。甚至字体大小也会被调整，以便它们正确地适合项目。

我最初的想法是只为 main.xml 提供一个没有内容但配置为扩展到最大大小（具有`fill_parent`或类似的东西）的网格布局。我们将使用网格布局来定位事物，但是我们对大小施加的控制将决定布局管理器如何显示事物。

希望我们可以在适当的时间（在初始化之后，绘制之前）查询网格布局以获得分辨率，然后基于此调整所有未来的绘制。

有一个更好的方法吗？我意识到 XML 旨在将内容与演示分开，但这个特定的客户希望完全控制布局，并在必要时限制可以运行代码的设备（它是一个内部应用程序，因此他们可以指定）。

我的另一个想法是在 XML 中添加具有虚假大小的所有子控件（一切都将永远存在，只是大小可能会改变）。但是，通过这样做，我不确定我是否会失去获得可用区域并因此智能调整大小的能力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T03:58:55.820

你在`resolution`和之间混淆了吗`density`？什么是“可用的显示分辨率”？每个设备只有一个像素分辨率：

```
DisplayMetrics dm = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(dm);

final int height = dm.heightPixels;
final int width = dm.widthPixels; 
```

但是您显示的内容取决于受密度和显示尺寸影响的分辨率。

**（更新）**

(1) 以全屏模式查看启动并隐藏所有标题栏或通知栏：

```
 // Remove title bar
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    // Remove notification bar
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

(2) 获取视图矩形：

```
 Rect rect = new Rect();
    Window window = getWindow();
    window.getDecorView().getWindowVisibleDisplayFrame(rect);
    int statusBarHeight = rect.top;
    int contentViewTop = window.findViewById(Window.ID_ANDROID_CONTENT).getTop();
    int titleBarHeight = contentViewTop - statusBarHeight; 
```

# c++ - 按位与逻辑

> ID：12311081
> 
> 赞同：2
> 
> 时间：2012-09-07T02:50:24.590
> 
> 标签：c++, bit-manipulation

编辑：在 C++ 中，如果我有，我需要测试 8 个标志。就处理速度而言，这将更有效：

在单个 if 语句中检查 8 个 bool 变量或使用 char 表示标志，每个标志有 1 位，并在单个 if 语句中使用单个按位运算？

如果我有 1 个标志要测试，那会有什么不同吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T02:53:18.940

如果您想要检查的*所有位都有一个**已知*值，那么比较 a 可能会更快：*`char`*

 *```
if (bitval == 0x82) ... 
```

如果您想检查某些位，而忽略其他位，将“位”保存在单独的变量中*可能会更快：*

```
if ((bitval7 == 1) && (bitval1 == 1)) ... 
```

或者，简单地屏蔽掉您不关心的位可能会更快：

```
if ((bitval & 0x82) == 0x82) ... 
```

如果您真的很担心，您可以选择以*两种*方式存储它们（前提是您保持它们同步）并根据您感兴趣的位数进行选择。

但我认为这是严重的过度杀伤，因为老实说，*速度差异可能非常小，以至于无关紧要。*

如果你要进行优化，你几乎总能在算法选择等宏观方面获得更好的投资回报，而不是像分离布尔值或改变循环方向这样的微观优化。

不要误会我的意思，这些微优化*可以*在某些情况下产生影响，但它们通常不是最好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T03:14:57.830

我通常是按位标志的粉丝，但我发现拥有一些支持功能通常会有所帮助：

```
inline bool TestAll( char flags, char value ) {
    return (flags & value) == value;
}

inline bool TestAny( char flags, char value ) {
    return (flags & value) != 0;
}

inline bool TestAllExclusive( char flags, char value ) {
    return flags == value;
}

inline bool TestAnyExclusive( char flags, char value ) {
    return (flags & value) != 0 && (flags & ~value) == 0;
} 
```

您还可以执行类似的功能来获取标志掩码，使所有这些神奇的东西更容易阅读。

如果您有要测试的真值，那么这在速度方面是赢家，因为您只是在使用常量。

```
typedef enum EmotiveFlags {
    E_ELATED       = 0x01,
    E_JOYOUS       = 0x02,
    E_NONPLUSED    = 0x04,
    E_BEWILDERED   = 0x08,
    E_ANNOYED      = 0x10,
    E_PUZZLED      = 0x20,
    E_ENRAGED      = 0x40,
    E_AMUSED       = 0x80
} EEmotiveFlags;

if( TestAny(flags, E_JOYOUS | E_ELATED | E_AMUSED) ) {
   //...
}
else if( TestAll(flags, E_ANNOYED | E_ENRAGED) && !TestAll(flags, E_AMUSED) ) {
   //...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T03:00:17.497

这个问题真的归结为编译器。这取决于它如何引用要检查的位，但是，我相信可以肯定地说，只要您检查多个位，char 会更快。

运行 char 所需的时钟周期量将明显短于单个变量，因为标志在内存中相邻堆叠，从而消除了内存寻址的要求。

但是，如果您想要明显的速度差异，除非您更改检查方法，否则您将无法获得它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-19T16:08:09.283

好吧，最好的选择是将代码编译到汇编器并检查它。

8 个布尔标志需要 8 个寄存器。这是很多。8 位标志只需要一个寄存器。如果您将所有标志放在一个寄存器中，则测试速度会非常快。*

# java - 使用接口对工厂进行单元测试的难度

> ID：12311082
> 
> 赞同：1
> 
> 时间：2012-09-07T02:50:38.893
> 
> 标签：java, unit-testing, interface, junit, mockito

最近，我一直在推动自己学习越来越多的单元测试技术，但遇到了一些我无法弄清楚的事情——即如何开始。我正在尝试使用非常非常简单的单一方法对工厂进行单元测试。我已经使用示例名称为您有帮助的人简化了它。

```
public class HandlerFactory extends SecondHandlerFactory
{
    //To hold singleton of this class.
    private static SecondHandler factoryInstance = null;

    private HandlerFactory() throws HandlerCreationException
    {
            super();
    }

    protected InterfaceExample createSomethingByThisKey(String key) throws HandlerCreationException
    {
        InterfaceExample myNewHandler = null;

        if (StringFunctions.isEqualIgnoreCase(key, "Phone"))
        {
            myNewHandler = new PhoneHandler();
        }
    }
} 
```

我在想办法设置这个测试甚至落入 createSomethingByKey() 时遇到了很大的麻烦。即便如此，我什至无法弄清楚如何正确执行我的 assertEquals() 方法。

现在，我已经准备好做一个 createInstance(); 但对我来说，如何陷入这一点似乎没有任何意义。添加的变量和接口让我在这里感到困惑。它似乎很容易测试，并且是一个非常非常短的课程——但不接触这个（Java 甚至不是我的第一语言）对我来说是一堵难以克服的墙）。

关于如何设置标准 JUnit 或 Mockito 的任何帮助（真的没关系）如何设置所有这些？此外，受保护的事实让我更加无能为力，因为正确的标准是将单元测试放在另一个包中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T04:12:14.673

老实说，我不确定你有什么困难。我只能猜测2：

1.  你不知道在这样的工厂上测试什么。
2.  您在测试受保护的方法时遇到问题

1，其实没那么难，假设你测试的方法是公开的：

```
public class HandlerFactory extends SecondHandlerFactory
{
    public InterfaceExample createSomethingByThisKey(String key) throws HandlerCreationException
    {
        InterfaceExample myNewHandler = null;

        if (StringFunctions.isEqualIgnoreCase(key, "Phone"))
        {
            myNewHandler = new PhoneHandler();
        }
    }
} 
```

此方法中的逻辑只是基于键创建处理程序实例。因此，您的测试应该旨在查看是否根据您的密钥创建了正确类型的处理程序。因此测试应该是这样的：

```
@Test
testCreateSomethingByThisKeyGivenKeyForPhoneKey {
    InterfaceExample result = handelerFactory.createSomethingByThisKey("Phone");
    assertTrue("result is a PhoneHandler", result instanceof PhoneHandler);
}

@Test
testCreateSomethingByThisKeyGivenKeyForUnknownKey {
    InterfaceExample result = handelerFactory.createSomethingByThisKey("NONEXIST");
    assertNull("result", result);
} 
```

对于问题 2（对受保护方法的访问受限），您通常有 2 个选择：我们通常将测试与被测系统 (SUT) 放在同一个包中，因此您应该能够调用受保护方法。

您还可以选择创建一个特定于测试的子类 (TSS)，该子类公开一个直接委托给 SUT 中受保护方法的方法（或覆盖以放松该方法的可见性），并针对 TSS 执行您的测试。当然，您应该确保您的 SUT 可以扩展。它可能看起来像这样

```
public class Sut {
  protected Foo methodToTest(Param param) {
    //....
  }
} 
```

像这样创建一个 TSS：

```
public class SutTss extends Sut {
  @Override
  public Foo methodToTest(Param param) {  // visibility loosen
    return super.methodToTest(param);
  }
} 
```

然后你可以自由地测试那个受保护的方法（我相信它很少在 Java 中使用，因为我们总是可以通过将测试放在与 SUT 相同的包下来调用受保护的方法）

# polynomial-math - 求解有限变量中的多项式方程

> ID：12311083
> 
> 赞同：1
> 
> 时间：2012-09-07T02:50:39.320
> 
> 标签：polynomial-math

一个简单的问题。问题是求解这样一个整数多项式方程：x+y+z=num，x,y,z的int值应该是这样的：X1<=x<=X2,Y1<=y< =Y2, Z1<=z<=Z2 ，然后找出满足该方程的 x,y,z 组合的数量。可能有比这更有效的算法：

```
for(int i=X1;i<=X2;i++)
    for(int j=Y1;j<=Y2;j++)
        for(int k=Z1;k<=Z1;k++)
            if(i+j+z==num)
                print i,j,k; 
```

我不是要代码，而是要想法。感谢任何提供有用信息的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T03:08:23.430

您的算法在 O((X2-X1)(Y2-Y1)(Z2-Z1)) 时间内运行。

为了让它更快，你可以让它检查总和是否大于 num，如果是，那么你可以跳出你所在的循环并增加下一个更大的循环。例如，Y 循环可以读取

```
for(int j = Y1; j <= Y2; j++){
    if(i + j > num){
          j = Y2;
          continue;
    }
    for ( int k = Z1;...){...}
} 
```

这将阻止算法测试一些大于 num 的组合，从而提高运行时间。请注意，您可以对所有三个循环执行此操作，仅包括到目前为止已定义的变量（此示例不测试 k，因为直到第三个循环才定义 k）。

# java - Android 示例无法编译

> ID：12311084
> 
> 赞同：2
> 
> 时间：2012-09-07T02:50:47.967
> 
> 标签：java, android

我正在努力编译和运行来自 Android 开发者网站的示例：http: [//developer.android.com/guide/topics/ui/layout/listview.html](http://developer.android.com/guide/topics/ui/layout/listview.html)

这是我输入的版本：

```
package com.chex.control;

import android.app.ListActivity;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.widget.ListAdapter;
import android.support.v4.app.LoaderManager;
import android.support.v4.widget.SimpleCursorAdapter;
import android.support.v4.content.Loader;
import android.support.v4.content.CursorLoader;

public class ListViewExample extends ListActivity implements
LoaderManager.LoaderCallbacks<Cursor> {

    Cursor cursor;

    // database columns that we will retreive
    final String[] PROJECTION = new String[] { ContactsContract.Data._ID,
            ContactsContract.Data.DISPLAY_NAME };

    final String SELECTION = "((" + ContactsContract.Data.DISPLAY_NAME
            + " NOTNULL AND (" + ContactsContract.Data.DISPLAY_NAME
            + " != ''))";

    SimpleCursorAdapter adapter=null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        String[] fromColumns = { ContactsContract.Data.DISPLAY_NAME };

        int[] toViews = { android.R.id.text1 };

        ListAdapter adapter = new SimpleCursorAdapter(this, // context
                android.R.layout.simple_list_item_1, cursor, // cursor to bind
                // to
                fromColumns, // array of cursor
                // columns to
                // bind to
                toViews, 0); // parallel
        // array
        // of
        // which
        // template
        // objects
        // to
        // bind
        // to
        // cursor
        // columns

        setListAdapter(adapter);

        // ******* THE FOLLOWING LINE WON'T COMPILE **************
        getLoaderManager().initLoader(0, null,  this);

    }

    @Override
    public void setListAdapter(ListAdapter adapter) {
        // TODO Auto-generated method stub
        super.setListAdapter(adapter);
    }

    /**
     * create and return a CursorLoader that will take care of creating a Curso
     * for the data being displayed.
     */
    @Override
    public Loader onCreateLoader(int arg0, Bundle arg1) {
        CursorLoader loader = new CursorLoader(this,
                ContactsContract.Data.CONTENT_URI, PROJECTION, SELECTION, null,
                null);

        return loader;
    }

    @Override
    public void onLoadFinished(Loader<Cursor> arg0, Cursor arg1) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onLoaderReset(Loader<Cursor> arg0) {
        // TODO Auto-generated method stub

    }

} 
```

Eclipse 给出编译错误：
`The method initLoader(int, Bundle, LoaderManager.LoaderCallbacks<D>) in the type LoaderManager is not applicable for the arguments (int, null, ListViewExample).`

显然，演员不想这样是不是例子错了？如果我只是从 Android 开发者网站剪切和粘贴，我也会遇到同样的问题。

当我在代码中更改`<Cursor>`为时`<D>`，强制转换在执行过程中失败。我不知道为什么——在我看来，班级履行了`LoaderCallbacks`合同`implements <D>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T03:03:43.350

尝试使用`getSupportLoaderManager`而不是`getLoaderManager`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T03:11:09.997

看看这里[http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

他们说你需要使用`getSupportLoaderManager`而不是`getLoaderManager`

`To manage your fragments and loaders, you must use the methods FragmentActivity.getSupportFragmentManager() and FragmentActivity.getSupportLoaderManager() (instead of the getFragmentManager() and getLoaderManager() methods).`

[http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html#getSupportLoaderManager()](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html#getSupportLoaderManager%28%29)

但是您没有使用 FragmentActivity 并且您根本没有使用此代码？它甚至需要在那里吗？

`While the LoaderManager API was introduced in HONEYCOMB, a version of the API at is also available for use on older platforms through FragmentActivity.`

由此我可以得出结论，您需要使用 a `FragmentActivity`，并使用 a `ListFragment`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T03:10:03.630

看起来您导入了错误的 LoadManager，即`android.support.v4.app.LoaderManager;`尝试导入这个：`android.app.LoaderManager`它可能会起作用。

文档：http: [//developer.android.com/reference/android/app/LoaderManager.html](http://developer.android.com/reference/android/app/LoaderManager.html)

# python - 如何将目录永久附加到 PYTHONPATH？

> ID：12311085
> 
> 赞同：4
> 
> 时间：2012-09-07T02:50:57.880
> 
> 标签：python, append, pythonpath

我尝试了下面两种常用的方法，但它们没有奏效——因此这个[看似多余的]问题。

```
import sys
sys.path.append('foo/bar') 
```

和

```
export PYTHONPATH=$PYTHONPATH:foo/bar 
```

一旦退出解释器，第一个终止附加。第二个在终端关闭时终止（尽管人们似乎对通过第二种方法永久附加没有问题）。

我在这里缺少什么以及如何解决此问题？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T02:52:30.953

如果将第二种方法放在 shell 的 init 文件中，应该没问题。（例如，`${HOME}/.bashrc`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T02:58:12.927

PYTHONPATH 是系统范围的变量，因此必须以更永久的方式设置它（基本上，这`export PYTHONPATH=$PYTHONPATH:foo/bar`需要由随后执行 python 的任何 shell 自动执行） - 操作系统特定指令如下：

Windows： [http ://docs.python.org/using/windows.html#excursus-setting-environment-variables](http://docs.python.org/using/windows.html#excursus-setting-environment-variables)

Mac/Unix：[http ://users-cs.au.dk/chili/PBI/pythonpath.html](http://users-cs.au.dk/chili/PBI/pythonpath.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T03:29:01.653

`export PYTHONPATH=foo/bar:$PYTHONPATH`如果您希望在默认库之前找到您的自定义库（如果它们具有相同的名称），我建议您使用它们。

# php - php-form-b uilder-class 不呈现

> ID：12311087
> 
> 赞同：0
> 
> 时间：2012-09-07T02:51:07.940
> 
> 标签：php

我正在尝试使用[PFBC](http://code.google.com/p/php-form-builder-class/)并且遇到了一些问题。

在一台服务器上，文件夹“PFBC”已上传到 /public_html/ 并且表单呈现正常。

在非工作服务器上，文件夹“PFBC”已上传到 /www/htdocs/ 并且表单根本没有呈现，我收到错误 500 内部服务器错误。

我正在使用的代码如下

```
<?php
session_start();
include($_SERVER["DOCUMENT_ROOT"] . "/PFBC/Form.php");
$form = new PFBC\Form("TestForm", 300);
$form->addElement(new PFBC\Element\Button);
$form->render();
?> 
```

`echo $_SERVER["DOCUMENT_ROOT"] . "/PFBC/Form.php";`

返回`/usr/home/thin30/www/htdocs/PFBC/Form.php`

并将以下代码添加到 Form.php 文件中

```
$dir = dirname(__FILE__);
echo "<p>Full path to this dir: " . $dir . "</p>"; 
```

返回`Full path to this dir: /usr/home/thin30/www/htdocs/PFBC`

有人可以告诉我为什么表单没有呈现吗？或者指出我可能有帮助的方向？

文件夹权限`/PFBC/`是`755`（工作服务器和非工作服务器）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T02:15:37.307

该项目有两个不同/单独的下载 - 一个用于 PHP 5（无命名空间），另一个用于 PHP 5.3+。您必须在 PHP 5.3+ 版本中使用命名空间，而您不能在 PHP 5 版本中使用它们。

要解决您的问题，您需要下载 PHP 5 版本 (http://php-form-b​​uilder-class.googlecode.com/files/pfbc2.3-php5.zip) 并将服务器现有的 PFBC 目录替换为下载中包含的那个。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T03:15:50.600

> 不; 现在是 5.2.17。这有什么不同？抱歉，我很擅长 PHP。

是的，它确实。该代码似乎使用了需要 php 5.3 或更高版本的名称空间。

实际上，在查看 google 代码页时，您似乎可以使用 2.x 版本而不使用命名空间，他们给出的示例是：

```
/PFBC 2.x PHP 5
session_start();
include($_SERVER["DOCUMENT_ROOT"] . "/PFBC/Form.php");
$form = new Form("GettingStarted", 300);
$form->addElement(new Element_Textbox("My Textbox:", "MyTextbox"));
$form->addElement(new Element_Select("My Select:", "MySelect", array(
   "Option #1",
   "Option #2",
   "Option #3"
)));
$form->addElement(new Element_Button);
$form->render(); 
```

# iphone - 隐藏删除按钮时自定义uitableviewcell内容没有动画

> ID：12311090
> 
> 赞同：13
> 
> 时间：2012-09-07T02:51:50.653
> 
> 标签：iphone, ios, cocoa-touch, uitableview

我想知道我缺少什么，因为隐藏删除按钮时我的单元格没有动画。在删除按钮完成动画之前，标签会跳回原始位置。

当我点击圆形编辑视图以显示删除按钮时，标签动画起作用：

![出现删除按钮的单元格屏幕截图](../Images/7447d47eeb99c4a9fde7c4c235413243.png)

但是，当我再次点击它以隐藏删除按钮时，标签的移动没有​​动画：

![删除按钮消失的单元格屏幕截图](../Images/5bce977f9f4f627a6a25ac5ffe58e70a.png)

注意：这些屏幕截图不是从以下代码创建的。但他们显示了问题。

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    homeCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[homeCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    // Set up the cell
    Consumed *drinkObj = [self.appDelegate.consumedDrinksArray objectAtIndex:indexPath.row];        
    cell.titleLabel.text = drinkObj.drinkName;
    NSString *detailTextTime = [NSDate stringFromDate:drinkObj.dateConsumed withFormat:@"h:mma"];

    NSString *detailTextrelative = [relativeDateTransformer transformedValue:drinkObj.dateConsumed];

    NSString *detailText =  [NSString stringWithFormat:@"%@ %@ ", detailTextTime,detailTextrelative];
    cell.timeLabel.text = detailText;

    cell.stdDLabel.text = @"999.0"; //[NSString stringWithFormat:@"%@", drinkObj.standardDrinks];
    cell.stdDLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;
    cell.titleLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;
    cell.timeLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-08T09:41:29.560

编辑：我看到这个错误与我最初理解的不同。让我们更正我的答案。如果我是对的，您的删除按钮会随着动画正确消失，但内容视图会在没有动画的情况下自行调整大小（在按钮动画后面）。

在这种情况下，您必须自己管理动画。假设你不支持旋转，我给你代码。如果你想支持旋转，你需要更多的代码:-)

这是一个示例项目（代码很多，因为我使用了标准的主从 xcode 模板，只看自定义单元格）：[示例项目](http://www.lombax.it/Documents/CellEditing.zip)

要将其应用于您的代码：

首先，将单元格右侧标签的自动调整大小掩码更改为锚定在左侧。

我不确定正确的标签是否是 stdDLabel，我会假设它

```
// if the right margin is flexible, the left-top-bottom are fixed
cell.stdDLabel.autoresizingMask = UIViewAutoresizingFlexibleRightMargin; 
```

在您的单元格子类中覆盖这样的`setEditing:animated:`方法：

```
-(void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    // this is an array of the labels / view that you want to animate
    NSArray *objectsToMove = @[self.stdDLabel];
    // this is the amount of pixel to move - the width of the delete button
    float pixelToMove = 70.0f;

    float animationDuration = 0.3f;

    // calculating the delta. If set editing, move from right to left. otherwise, from left to right
    float delta = (editing) ? -pixelToMove : pixelToMove;

    // put the move code in a block for avoid repeating code in the if
    void (^moveBlock)() = ^{
        for (UIView *view in objectsToMove) {
            view.center = CGPointMake(view.center.x + delta, view.center.y);
        }
    };

    // we want to move the labels only if editing is different from the current isEditing state
    if (editing != self.isEditing)
    {
        // execute the move block, animated or not
        if (animated)
            [UIView animateWithDuration:animationDuration animations:moveBlock];
        else
            moveBlock();
    }

    // call the super implementation
    [super setEditing:editing animated:animated];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T03:01:15.013

我没有检查您的所有代码，但可以肯定的是，您需要在删除的每一侧添加开始/结束更新...

```
[self.drinksTableView beginUpdates];
[self.drinksTableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
[self.drinksTableView endUpdates]; 
```

...获取动画​​。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-06T13:28:37.653

您可以使用手势识别器执行此任务。它可以帮助您管理您的单元格。还可以在单​​元格上添加一个自定义删除按钮，而不是默认的删除按钮。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-06T13:50:30.243

在`tableView:didEndEditingRowAtIndexPath:`执行通过设置它们的框架手动重新定位 UILabel 的任务

```
- (void)tableView:(UITableView*)tableView didEndEditingRowAtIndexPath:(NSIndexPath *)indexPath
{
    homeCell *cell = (homeCell *)[tableView cellForRowAtIndexpath:indexPath];

    UILabel *labelToBeRelocated = (UILabel *)[cell viewWithTag:YOUR_LABEL_TAG];

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.25f];

    [labelToBeRelocated setFrame:CGRectMake(New_PosX , New_PosY , width , height)];

    [UIView commitAnimations];
} 
```

由于上述委托方法是在 UITableViewCell 中隐藏 EditingButton（删除按钮）后调用的，因此 UILabel 只有在删除按钮被隐藏后才会重新定位其位置。希望它会帮助你。

# python - 带星号的金字塔：额外的空格

> ID：12311099
> 
> 赞同：-1
> 
> 时间：2012-09-07T02:53:36.520
> 
> 标签：python

我目前的代码是：

```
s = int(raw_input("Enter width: "))
i=0
y=0
while i < (s+1):
        if i != 0:
                print(" "*((s)-y))+(i*'* ') + (" "*((s)-y))
        i += 1
        y += 1 
```

我正在尝试将此代码提交到挑战网站，他们说代码错误，因为它不符合他们的要求。

这是他们所说的错误消息：

![在此处输入图像描述](../Images/3e3b93161bcd96d48d931692ec6d6aac.png)

你们能帮帮我吗:)？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T02:59:37.470

查看来自网站的错误消息，看起来他们不希望您有尾随空格，尽管这很难说。您可以通过以下方式轻松测试：

```
print(" "*((s)-y))+(i*'* ') + (" "*((s)-y)) 
```

到

```
print(" "*((s)-y))+(i*'* ').rstrip()) 
```

或者

```
print(" "*((s)-y))+(i*'* ')[:-1]) 
```

# java - Java 列表实例在复制后保留其指针

> ID：12311101
> 
> 赞同：2
> 
> 时间：2012-09-07T02:53:53.590
> 
> 标签：java, list, collections, reference

我有以下 LinkHashMap，

```
LinkedHashMap<String, ArrayList<String>> test1=new ... 
```

在一个循环中，我像这样分配键值对，

```
ArrayList<String> temp=new ...
//start iteration
temp.add("some strings")
test1.put("some string", temp);
temp.clear()//temp is cleared for next iteration 
```

这里*temp*是我之前创建的一个临时列表，并在其中添加了一些内容。但问题是当我清除*temp*时，传递给*test1的**temp*也被清除，这意味着它是通过引用复制的。如何在 test1 中使用 temp 仍然保持其参考。我知道这是一个基本概念，但我是 Java 新手，并没有了解它的所有功能。

 ** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T02:58:28.420

那是因为你并没有真正复制`List`, `temp`。您正在复制指针（Java 术语中的“引用”）。

这里有两个简单的解决方案：

1.  `List`将使用`new ArrayList<String>(temp)`作为您存储在地图中的内容的实际副本。
2.  与其做`temp.clear()`，不如做`temp = new ArrayList<String>()`。

第二种选择会表现最好，因为它不会复制任何东西。它只是用新鲜的`ArrayList`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T02:57:47.903

因为`LinkedHashMap.put()`方法添加了`List<T>`对象的引用（即单个*对象*现在被`LinkedHashMap`和`ArrayList<String>`引用引用，并且您可以通过对象引用 -变量或来操作*该*对象）所以不要调用该方法而是创建另一个对象。`temp``test1.get("some strings")``clear()``List<T>`

```
ArrayList<String> temp=new ArrayList<String>();
temp.add("some strings")
test1.put("some string", temp);

temp=new ArrayList<String>();
temp.add("foo");
test2.put("another string",temp); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T02:57:56.000

某人（调用者或被调用者）需要复制 ArrayList 寻址的副本`temp`，或者您需要为`temp`. 第二种方法更符合 Java 的“风格”（并且由于被调用者不在您的控制之下，可能是唯一的选择）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T02:59:02.267

不要为下一次迭代清除它，只需创建一个新的引用。从列表中删除所有元素可能会成为迭代时的性能问题。*

# c++ - 将 C++ 类移植到 ref 类（非托管到托管）

> ID：12311104
> 
> 赞同：0
> 
> 时间：2012-09-07T02:54:21.763
> 
> 标签：c++, c++-cli, unmanaged, managed

我有一个非托管类，我从 C++ Windows 窗体（托管类）调用它。但是，我想将此类重写为 ref 类，但我不确定如何处理在非托管类中声明的全局数组成员。

作为一个例子，我写了一个非常简单的类，它以某种方式显示了我需要做什么。

```
public class test {

private:
    int myArray[5][24]; 

public:
int assign(int i){
    test::myArray[2][4] = i;
    return 0;
}

int dosomething(int i){
    return test::myArray[2][4] + i;
} 
```

在这里，我有一个全局成员数组，我希望能够从类中的所有函数访问它。

在 windows 窗体中，我有一个按钮和一个组合框。这样，当按下按钮时，它只会调用类中的函数并显示结果。

```
private: System::Void thumbButton_Click(System::Object^  sender, System::EventArgs^  e) {

    test my_class;

    my_class.assign(5);
comboBox1->Text = my_class.dosomething(6).ToString();
} 
```

现在，如果我尝试将类更改为 ref 类，则会出现错误，因为全局数组是非托管的。我尝试使用 std::vectors 执行此操作，这是比直接使用数组更好的方法，但会得到相同的错误。因此，如果有人能指出一种将此类重写为 ref 类的方法，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T04:07:10.310

我不认为“全局”是您的非托管数组的正确词，因为它包含在非托管类定义中。非托管数组也没有`static`关键字，所以它是一个实例变量，远不及全局。

无论如何，您遇到的问题似乎与数组定义有关。`int myArray[5][24]`是一个非托管的“对象”，不能直接包含在您的托管类中。（您可以拥有指向非托管对象的指针，但不能拥有内联非托管对象。）您可以将其切换为指向整数数组的指针，并处理 malloc 和 free，但使用托管数组要简单得多。

这是将该数组声明为托管的语法：

```
public ref class test
{
private:
    array<int, 2>^ myArray;

public:
    test()
    {
        this->myArray = gcnew array<int, 2>(5, 24);
    }

    int assign(int i)
    {
        this->myArray[2,4] = i;
        return 0;
    }

    int dosomething(int i)
    {
        return this->myArray[2,4] + i;
    }
}; 
```

数组类以数据类型和维数为模板，因此对于整数的二维数组，`array<int, 2>`这就是您想要的。

# php - 如何使用 php 检查 rtmp 流是否存在？基因问题

> ID：12311107
> 
> 赞同：0
> 
> 时间：2012-09-07T02:54:51.013
> 
> 标签：php, rtmp, fsockopen

有没有办法用 php 检查 RTMP 流是否存在？找到类似 fsockopen() 的东西。但不确定如何使用此命令来验证流数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:02:28.287

使用 rtmpdump 找到了这个：http: [//blog.svnlabs.com/how-to-check-rtmp-source-stream-is-live-or-not/](http://blog.svnlabs.com/how-to-check-rtmp-source-stream-is-live-or-not/)

# c# - 如何在 C# 中使用 moq.mock 模拟调用静态类的方法

> ID：12311115
> 
> 赞同：2
> 
> 时间：2012-09-07T02:56:00.747
> 
> 标签：c#, unit-testing, mocking, moq

假设我有以下代码：

```
public class NumberClass
{
    public NumberClass()
    {
        DefaultNumber = 1;
    }
    public int DefaultNumber{set;get;}
}

public static class NumberSetup
{
    public static NumberClass GetDefaultNumber()
    {
        return new NumberClass();
    }
}

public class NumberSetupImplementation
{
    int FinalNumber;
    public void IncreaseNumber(int currentNumber)
    {
        FinalNumber = currentNumber + NumberSetup.GetDefaultNumber().DefaultNumber;
    }
} 
```

我想`NumberSetupImplementation.IncreaseNumber`在 c#.net 中使用 moq.mock 测试方法，我面临的问题是该方法正在调用静态方法。

我读过[这个](https://stackoverflow.com/questions/2416362/mock-static-property-with-moq)，但我不知道如何在我的情况下实现它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T03:46:19.367

您必须适当地设计您的代码以利用起订量的好处。

通常，这意味着广泛的 IoC 和应用程序的明确分离层。Moq 存在的主要原因是排除深度依赖关系，这样您就可以专注于测试独立于上下文创建的内容。有或没有起订量都是如此，它只是让它更容易一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T06:29:08.763

Moq 在后台使用动态代理，这就是为什么您不能使用 Moq 来模拟静态方法的原因。为了设计可测试性，要点之一是避免使用静态方法。对于您的示例，您可以使用 DI 进行注入`NumberSetup`，或者另一个技巧是使用两个构造函数：

```
public interface INumberSetup
{
    NumberClass GetDefaultNumber();
}

public class NumberSetup: INumberSetup 
{ 
    public NumberClass GetDefaultNumber() 
    { 
        return new NumberClass(); 
    } 
} 

public class NumberSetupImplementation 
{ 
    private int _finalNumber;
    private INumberSetup _numberSetup;

    public NumberSetupImplementation()
        : this(new NumberSetup())
    {}

    public NumberSetupImplementation(INumberSetup numberSetup)
    {
        _numberSetup = numberSetup;
    }

    public void IncreaseNumber(int currentNumber) 
    { 
        _finalNumber = currentNumber + _numberSetup.GetDefaultNumber().DefaultNumber; 
    } 
} 
```

# ios - iOS - 将图像数组保存到 CoreData

> ID：12311118
> 
> 赞同：1
> 
> 时间：2012-09-07T02:56:29.047
> 
> 标签：ios, core-data, uiimage, nsarray

我有一组 UIImages 我想存储以便以后访问。根据我的阅读，我应该将 Core Data 中的引用和图像保存到磁盘。我在我的实体上创建了一个 userImages 属性并将其设置为 Transformable，我的图像数组称为 userImages。

下一步是执行以下操作：

```
NSFetchRequest * request = [[NSFetchRequest alloc] init];
[request setEntity:[NSEntityDescription entityForName:@"Item" inManagedObjectContext:context]];
[request setPredicate:[NSPredicate predicateWithFormat:@"itemId=%@",3]];

item = [[context executeFetchRequest:request error:&error] lastObject];

if (error) {
    NSLog(@"error with request");
}

//Update the object
item.userImages = someArrayOfImageReferences;

error = nil;
if (![context save:&error]) {
    NSLog(@"error");
} 
```

但是如何构造 someArrayOfImageReferences？我是否必须创建另一个任意图像名称数组，如 image1.png、image2.png 等？似乎应该有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T04:36:38.353

图像集实际上不是 Core Data 中的 Array，而是应该由 NSSet 提供。只需将您的对象指针从您的数组复制到一个新的 NSSet 中，您就可以了。

即使图像都有文件名，不要使用那些。更好的方法是动态生成名称，至少供内部使用。当然，如有必要，您可以保留面向用户的名称。对于您的内部名称，请使用基于 GUID 的名称，该名称可以动态生成，或者可能基于当前系统时间。（请务必检查现有文件并相应地调整名称，以防用户更改系统时间。）

# objective-c - 更新 Xcode 4.4 后，didSelectRowAtIndexPath 没有运行

> ID：12311122
> 
> 赞同：0
> 
> 时间：2012-09-07T02:56:57.110
> 
> 标签：objective-c, uitableview, xcode4

我从 4.3 更新了 Xcode 4.4。我在“iPhone 5.1 Simulator”上运行了一个项目。
我可以运行一个项目。但我点击了 UITableView 的 tableCell。
所以我在“didSelectRowAtIndexPath”方法的顶部添加了“NSLog()”。但没有显示该日志。
而且我看不到通过下一个视图。

我可以为过渡的tableView做什么？

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSLog(@"(NSInteger *)indexPath.row=%d", indexPath.row);    
    NextViewController *nextViewController = [[NextViewController alloc]initWithNibName:@"NextViewController" bundle:nil];
    nextViewController.dicPatient = self.dicPatient;
    nextViewController.dicLoginKey = self.dicLoginKey;
    nextViewController.cellIdx = (NSInteger *)indexPath.row;
    [tableView deselectRowAtIndexPath:indexPath animated:YES];    
    [self.navigationController pushViewController:nextViewController animated:YES];

} 
```

PS
该项目是在 Xcode 4.2 上制作的。
当然，我在项目运行之前进行了 Clean&Build。
我的操作系统是 Lion

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T03:57:02.870

检查这些东西。在你的头文件中

```
<UITableViewDelegate> 
```

在您的实现文件中

```
your_table_view.delegate=self; 
```

或者，如果您从界面生成器中添加了 tableView，则打开您的 xib 文件。选择您的表格，然后在实用工具栏中单击连接检查器，然后在插座部分将代表分配给文件所有者

# ios - 如何让 dispatch_after 和 dispatch_semaphore_t 在 GCD 中一起工作？

> ID：12311124
> 
> 赞同：1
> 
> 时间：2012-09-07T02:57:01.397
> 
> 标签：ios, multithreading, grand-central-dispatch

我对使用`dispatch_after`和`dispatch_semaphore_t`一起执行一些任务并在每个线程之间等待一段时间感到好奇。

我使用以下代码：

```
dispatch_time_t time = dispatch_time(DISPATCH_TIME_NOW, 3ull * NSEC_PER_SEC);

dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_semaphore_t semaphore = dispatch_semaphore_create(1);

dispatch_after(time, queue, ^{

    dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);

    NSLog(@"blk01");

    dispatch_semaphore_signal(semaphore);

});

dispatch_after(time, queue, ^{

    dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);

    NSLog(@"blk02");

    dispatch_semaphore_signal(semaphore);

});

dispatch_after(time, queue, ^{

    dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);

    NSLog(@"blk03");

    dispatch_semaphore_signal(semaphore);

}); 
```

我在 3 秒后执行线程，而不是预期的延迟。

我究竟做错了什么？有没有其他方法可以在 dispatch_semaphore_t 中执行线程，每个线程执行之间有延迟时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T03:46:52.210

如果您想串行（而不是同时）执行三个块，并且您想在块之间暂停，有比使用信号量更简单的方法。最简单的方法是创建一个串行队列并在每个块的开头或结尾放置一个`sleep`（或）：`usleep`

```
dispatch_queue_t queue = dispatch_queue_create("my queue", 0);

dispatch_async(queue, ^{
    sleep(3);
    NSLog(@"blk01");
});

dispatch_async(queue, ^{
    sleep(3);
    NSLog(@"blk02");
});

dispatch_async(queue, ^{
    sleep(3);
    NSLog(@"blk03");
});

dispatch_release(queue); 
```

放入`sleep`你的块非常简单，但会占用一个线程。这可能无关紧要，除非您创建了很多队列并在其中的许多队列上睡觉。

如果您告诉我们您认为需要信号量的原因，也许我们可以为您提供更好的替代方案或如何正确使用它的建议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T03:05:55.767

您的代码没有要求每次调用之间有 3 秒的延迟。它同时调度 3 个块，所有 3 个块都接收信号量和日志。

您需要调整用于调度每个后续块的时间，或者您需要`dispatch_after()`在每个先前调用中安排后续调用。前者可能更简单，并且会让您获得更精确的计时。如果您使用后者，请务必`time`在每个块中重新计算，因为这是指绝对时间，而不是相对持续时间。

# python - 修剪 matplotlib 功率谱图

> ID：12311127
> 
> 赞同：1
> 
> 时间：2012-09-07T02:57:23.553
> 
> 标签：python, plot, matplotlib, psd

我的第一个stackoverflow问题，希望我做对了..

我正在尝试构建功率谱密度图 ( `matplotlib.pyplot.psd`)，并且我需要在绘制之前丢弃频谱两端的 256 个 bin。对于我的任务，我需要实际删除数据点，而不是简单地限制 x 轴范围。

psd 函数返回两个数组的元组，我想我可以简单地删除数组的元素，然后调用`show()`. 但它似乎不起作用。

```
from matplotlib.pyplot import *
import numpy as np

#put some dummy data into s
s=np.vectorize(complex)(range(2048),range(2048))

x=psd(s, 2048, 194171, window=np.bartlett(2048),Fc=14050000)

#trim x
del x[0][-256:]
del x[0][:256]
del x[1][-256:]
del x[1][:256]

show() 
```

这给出了：

```
Traceback (most recent call last):
  File "dummy-fft.py", line 10, in <module>
    del x[0][-256:]
ValueError: cannot delete array elements 
```

有没有更好的方法来截断 psd 图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T03:08:02.617

您可以使用 slice 来获取所需的部分，而不是删除头部和尾部：

```
from matplotlib.pyplot import *
import numpy as np

#put some dummy data into s
s=np.vectorize(complex)(range(2048),range(2048))

power, freq=psd(s, 2048, 194171, window=np.bartlett(2048),Fc=14050000)
figure()
semilogy(freq[256:-256], power[256:-256])
show() 
```

# python - 将 sqlite 数据库文件（每个文件多个表）合并到一个文件中

> ID：12311128
> 
> 赞同：0
> 
> 时间：2012-09-07T02:57:26.113
> 
> 标签：python, sqlite

我在 python 中使用 sqlite3，我有多个数据库文件，现在我想将它们组合成一个大文件。每个数据库都与一个特定的主题相关联，但它们都具有相同的结构。我将分别查询它们——我只想将它们组合到一个文件中，以便更容易移动它们。

我能想到的一种肮脏方式是这样的：

```
create_string = 'CREATE TABLE %s_table1 (id INTEGER PRIMARY KEY, doca INTEGER, docb INTEGER)' %topic1 
cur.execute(create_string) 
```

这样，我将为每个表添加主题名称前缀，并且当我进行查询时，我必须使用适当的主题名称构造一个查询字符串。但是应该有更好的方法来解决这个问题。我错过了一些明显的东西吗？

[如何在 SQLite 中合并多个数据库文件？](https://stackoverflow.com/questions/4913369/how-to-merge-multiple-database-files-in-sqlite)

[如何合并多个 SQLite 数据库？](https://stackoverflow.com/questions/80801/how-can-i-merge-many-sqlite-databases)

我已经看过这些，似乎我的问题比他们的更容易解决，但我仍然找不到更好的解决方案。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-29T00:02:27.203

如果你想移动整个表（比如，不是合并它们，而是从不同的文件中引入表），你可以在 unix 中这样做：

```
 sqlite3 'from_this_db.db' '.dump' | sqlite3 -batch 'to_this_db.db' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T03:33:02.523

我认为您的解决方案还可以。请注意，您可以将“源”游标作为“目标”游标*executemany*方法的输入。就像是：

```
src.execute('SELECT * FROM ...')
dest.executemany('INSERT INTO ...', src) 
```

# php - 如何将文本文件更改为 php 数组

> ID：12311134
> 
> 赞同：1
> 
> 时间：2012-09-07T02:57:56.027
> 
> 标签：php, arrays

如何将带有单词列表的文本文件更改为一个数组，每个单词都在自己的行中（**不带逗号**），用逗号分隔？

我猜，你用什么来操作 PHP 数组和字符串以便能够交换数据？

`explode`?

该文件如下所示：

```
This
Is
The
File
I
Want
Changed 
```

我希望它看起来像这样：

```
array(
    This,
    Or,
    This,
    Or,
    Even,
    This
); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T03:03:36.160

如果您希望它在每个换行符处拆分，请使用

```
$file = file('file.txt'); 
```

或者，如果您有要分解的文本而不是文件：

```
$file = explode("\n", $text); 
```

见[`file`](http://php.net/manual/en/function.file.php)和[`explode`](http://php.net/manual/en/function.explode.php)。

* * *

但下一次，*请自己研究*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T03:01:52.077

很容易......这样做：

```
$arch = file( 'your-file.txt' ); 
```

然后：

```
echo '<pre>'; print_r( $arch ); echo '</pre>'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T03:02:03.147

如果要获取数组，可以使用[文件](http://jp2.php.net/manual/en/function.file.php)函数。

```
$array = file($file_path, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T05:21:48.010

要在数组中更改的文本文件：=

```
 $text= 'test.txt';
 $fo= fopen($text,'r');
 $fr = fread($fo,filesize($fo));

 $strarray = explode(' ', $fr);

 print_r($strarray); 
```

# mysql - 备份redis到mysql

> ID：12311138
> 
> 赞同：1
> 
> 时间：2012-09-07T02:58:21.143
> 
> 标签：mysql, persistence, redis, backup, replication

我想将我的 redis 数据库备份到 mysql。

什么是最好的架构？

我正在考虑以下几点：

1.  在不同的服务器上为主数据库创建从站。
2.  在 Slave 之上编写一个 Node.js 应用程序来读取所有数据。
3.  创建 SQL 查询并插入 mysql 数据库。

有没有更好的方法来做到这一点？以及我如何知道 Redis Slave 实例何时用数据更新。

# java - 项目、文件夹和包中应该放什么

> ID：12311143
> 
> 赞同：4
> 
> 时间：2012-09-07T02:59:16.537
> 
> 标签：java, eclipse, naming-conventions

我是Java的初学者。我现在正在使用 Eclipse。让我感到困惑的是，我不清楚将文件放入项目、文件夹和包中的教条。如果我构建一个新类，我应该将它放入原始包中还是创建一个新包或新文件夹甚至新项目，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T03:27:23.620

这完全取决于您正在开发的应用程序。如果您正在开发一个包含许多模块的大型应用程序，您应该创建相互链接的不同项目。

但是你说你是初学者，所以你的问题的答案是：你应该总是把你的课程分类在不同的包中。分类完全是您的选择 - 如果您对它感到满意，您甚至可以按字母顺序分类。我通常根据它们的功能对它们进行分类，就像我所有的控制器类都在一个包中一样，我的 Bean 类、侦听器、常量、构建器、实用程序、解析器、比较器、模型、渲染器等也是如此。

[这篇 Java 实践文章](http://www.javapractices.com/topic/TopicAction.do?Id=205)会很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:07:54.730

## 项目结构

我强烈建议您遵循 Maven 的结构约定：[http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html) 它们是多年经验的结果。

然而，设计这样的结构始终是可扩展性和简单性之间的折衷问题。您预见的越多，维护就越复杂，但如果它快速增长，您将获得更多回报。

务实，甚至我都不太相信（因为我的工作是预测；）），试试 KISS 哲学：[http](http://en.wikipedia.org/wiki/KISS_principle) ://en.wikipedia.org/wiki/KISS_principle 。

## 封装结构

正如 Amandeep Jiddewar 所说，包必须代表它们自己的功能。至少，它们必须是反向域，例如：[http](http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html) ://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html 。例如，stackoverflow API 应该是：com.stackoverflow.*

也许，在第一次，他们将其潜入 MVC 模式

*   com.stackoverflow.controler
*   com.stackoverflow.model
*   com.stackoverflow.view

等等...

当项目成熟时......或增长过多时，他们将其拆分为表示层的战争，以及服务层的 jar（s）......

## 进一步的考虑

没有具体的规则。正如我所说，你将永远不得不处理妥协。只有经验才能让您知道何时更改配置。

查看 Stack Overflow 以获取更多想法：[命名约定](/questions/tagged/naming-conventions "显示标记为“命名约定”的问题")

# python - 以工程格式打印编号

> ID：12311148
> 
> 赞同：21
> 
> 时间：2012-09-07T03:00:21.820
> 
> 标签：python, python-2.7, decimal

我正在尝试使用 python 将数字打印成工程格式，但我似乎无法让它工作。语法看起来很简单，但它就是行不通。

```
>>> import decimal 
>>> x = decimal.Decimal(1000000)
>>> print x
1000000
>>>> print x.to_eng_string() 
1000000 
```

我不知道为什么会这样。这两个值不相等（一个是字符串，另一个是 int）。设置各种上下文`decimal`似乎也无济于事。有什么线索或想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-07T03:16:10.817

为了让它工作，你必须先标准化小数：

```
>>> x = decimal.Decimal ('10000000')

>>> x.normalize()
Decimal('1E+7')

>>> x.normalize().to_eng_string()
'10E+6' 
```

* * *

可以通过深入研究源代码来发现其原因。

如果您`to_eng_string()`在 Python 2.7.3 源代码树中检查（`Lib/decimal.py`来自 gzipped 源 tar 球[here](http://www.python.org/download/releases/2.7.3/)`__str__` ），它只需调用`eng`set 为 true。

然后你可以看到它决定了小数点左边的位数最初是：

```
leftdigits = self._exp + len(self._int) 
```

下表显示了这两件事的值：

```
 ._exp       ._int         len   leftdigits
                         -----       ---------     ---   ----------
Decimal (1000000)            0       '1000000'       7            7
Decimal ('1E+6')             6       '1'             1            7 
```

之后继续的代码是：

```
if self._exp <= 0 and leftdigits > -6:
    # no exponent required
    dotplace = leftdigits
elif not eng:
    # usual scientific notation: 1 digit on left of the point
    dotplace = 1
elif self._int == '0':
    # engineering notation, zero
    dotplace = (leftdigits + 1) % 3 - 1
else:
    # engineering notation, nonzero
    dotplace = (leftdigits - 1) % 3 + 1 
```

你可以看到，除非它已经在某个范围内*有一个指数（*`self._exp > 0 or leftdigits <= -6`

* * *

进一步的调查显示了这种行为的原因。查看代码本身，您会发现它基于（[此处](http://speleotrove.com/decimal/decarith.pdf)[`General Decimal Arithmetic Specification`](http://speleotrove.com/decimal/decarith.html)为PDF ）。

如果您搜索该文档`to-scientific-string`（基于该文档`to-engineering-string`），它会部分说明（转述，并用我的粗体字）：

> “to-scientific-string”操作将数字转换为字符串，**如果需要指数，则使用科学记数法。**操作不受上下文影响。
> 
> 如果该数是有限数，则：
> 
> 首先将系数转换为以 10 为底的字符串，使用字符 0 到 9，不带前导零（除非它的值为零，在这种情况下使用单个 0 字符）。
> 
> 接下来，计算调整后的指数；这是指数加上转换系数中的字符数减去一。也就是说，exponent+(clength-1)，其中 clength 是十进制数字的系数长度。
> 
> **如果指数小于或等于零且调整后的指数大于或等于-6，则该数字将转换为字符形式而不使用指数表示法。**在这种情况下，如果指数为零，则不添加小数点。否则（指数将为负数），将插入一个小数点，其中指数的绝对值指定小数点右侧的字符数。必要时将“0”字符添加到转换系数的左侧。如果在此插入之后小数点之前没有字符，则以传统的“0”字符为前缀。

换句话说，它正在做它正在做的事情，因为这是标准告诉它要做的事情。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-09-05T11:14:30.760

我意识到这是一个旧线程，但它确实接近搜索的顶部`python engineering notation`。

我是一个喜欢“工程101”工程单元的工程师。我什至不喜欢诸如`0.1uF`, I want that read之类的名称`100nF`。我玩过这个`Decimal`类，并不喜欢它在可能值范围内的行为，所以我推出了一个名为`engineering_notation`pip-installable 的包。

```
pip install engineering_notation 
```

在 Python 中：

```
>>> from engineering_notation import EngNumber
>>> EngNumber('1000000')
1M
>>> EngNumber(1000000)
1M
>>> EngNumber(1000000.0)
1M
>>> EngNumber('0.1u')
100n
>>> EngNumber('1000m')
1 
```

这个包还支持比较和其他简单的数值运算。

[https://github.com/slightlynybbled/engineering_notation](https://github.com/slightlynybbled/engineering_notation)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-07T03:12:12.347

在我看来，您将不得不自己动手：

```
from math import log10
def eng_str(x):
    y = abs(x)
    exponent = int(log10(y))
    engr_exponent = exponent - exponent%3
    z = y/10**engr_exponent
    sign = '-' if x < 0 else ''
    return sign+str(z)+'e'+str(engr_exponent) 
```

尽管您可能希望在该部分的格式方面更加小心`z`......

*没有经过很好的测试。如果发现错误，请随时编辑*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-06-09T10:23:43.397

有一个使用内置[printf-style String Formatting的解决方案](https://docs.python.org/3/library/stdtypes.html#printf-style-string-formatting)

我将假设（及时）您现在使用内置的 python 3，因为所有的格式都大大简化和规范化了（我建议[将此备忘单](https://pyformat.info)添加书签。

```
In [1]: myfloat = 0.000000001
In [2]: print(f'{myfloat:g}')
1e-09 
```

较旧的语法（适用于 python 2）是：

```
In [17]: '%g' % myfloat
Out[17]: '1e-09' 
```

另一个不错的格式是：

```
In [3]: print(f'{myfloat:E}')
1.000000E-09 
```

您可以对其输出进行一些控制：

```
In [4]: print(f'{myfloat:.3E}')
1.000E-09 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-03T03:08:03.633

[QuantiPhy](https://quantiphy.readthedocs.io)是另一个可以帮助您解决此问题的软件包。*QuantiPhy*提供了*Quantity*类，用于将值和单位组合到一个对象中。它可以以多种方式格式化数量。通常人们使用 SI 比例因子，但也支持工程形式。安装：

```
pip3 install quantiphy 
```

您可以从数字或字符串开始创建*Quantity对象：*

```
>>> from quantiphy import Quantity
>>> q = Quantity(10000000)
>>> q.render(form='eng')
'10e6' 
```

默认情况下， *QuantiPhy*使用 SI 表示法，但您可以将默认形式设置为 'eng'：

```
>>> print(q)
10M
>>> Quantity.set_prefs(form='eng')
>>> print(q)
10e6 
```

通常你会指定一个数量的单位：

```
>>> f = Quantity(10_000_000, 'Hz')
>>> print(f)
10e6 Hz 
```

*数量*子类*float*，因此您可以在任何使用浮点数的地方使用数量。

*QuantiPhy*是一个功能强大的软件包，它得到了很好的支持和有据可查的文档。我鼓励你试一试。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-21T15:46:29.607

matplotlib 也可以使用：

```
>>> from matplotlib.ticker import EngFormatter
>>> engFormat = EngFormatter()
>>> print(engFormat(1000))
1 k 
```

我让您在[https://matplotlib.org/stable/api/ticker_api.html](https://matplotlib.org/stable/api/ticker_api.html)中查看更多详细信息和选项 另一个更复杂的示例：

```
>>> from matplotlib.ticker import EngFormatter
>>> engFormat = EngFormatter(unit='Hz',places=2,sep='')
>>> print(engFormat(1000))
1.00kHz 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2020-03-13T19:41:20.323

现在是2020年了，伙计们！并且发生了 COVID-19 大流行。对于这种类型的工作，您必须使用 f 字符串文字：

使用python3.6.4及以上，你可以做到

```
a = 3e-4
print(f"{a:.0E}") 
```

# c++ - 如何在 C++ 中打印二维数组？

> ID：12311149
> 
> 赞同：9
> 
> 时间：2012-09-07T03:00:51.460
> 
> 标签：c++, arrays, multidimensional-array, revision

我正在尝试使用数组在屏幕上打印一个文本文件，但我不确定它为什么不像文本文件中那样显示。

文本文件：

```
1 2 3 4
5 6 7 8 
```

应用丢弃功能后屏幕显示如下：

```
1
2
3
4
5
6
7
8 
```

**编码：**

```
#include <iostream>
#include <fstream>
#include <stdlib.h>
#include <string>

using namespace std;

const int MAX_SIZE = 20;
const int TOTAL_AID = 4;

void discard_line(ifstream &in);
void print(int print[][4] , int size);

int main()
{
    //string evnt_id[MAX_SIZE]; //stores event id
    int athlete_id[MAX_SIZE][TOTAL_AID]; //stores columns for athelete id
    int total_records;
    char c; 
    ifstream reg;
    reg.open("C:\\result.txt");

    discard_line(reg);
    total_records = 0;

    while( !reg.eof() )
    {
        for (int i = 0; i < TOTAL_AID; i++)
        {
            reg >> athlete_id[total_records][i] ;//read aid coloumns
        }
        total_records++;
        reg.get(c);
    }

    reg.close();

    print(athlete_id, total_records);

    system("pause");
    return 0;
}

void discard_line(ifstream &in)
{
    char c;

    do
        in.get(c);
    while (c!='\n');
}

void print(int print[][4] , int size)
{    
    cout << " \tID \t AID " << endl;
    for (int i = 0; i < size; i++)
    {
        for (int j = 0; j < TOTAL_AID; j++)
        {
            cout << print[i][j] << endl;
        }           
    }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-07T03:23:07.637

您`std::endl`在每个数字后打印。如果你想每行有 1 行，那么你应该`std::endl`在每行之后打印。例子：

```
#include <iostream>

int main(void)
{
    int myArray[][4] = { {1,2,3,4}, {5,6,7,8} };
    int width = 4, height = 2;

    for (int i = 0; i < height; ++i)
    {
        for (int j = 0; j < width; ++j)
        {
            std::cout << myArray[i][j] << ' ';
        }
        std::cout << std::endl;
    }
} 
```

另请注意，`using namespace std;`在文件开头写入被认为是不好的做法，因为它会导致一些用户定义的名称（类型、函数等）变得模棱两可。如果您想避免用尽前缀`std::`，请在小范围内使用，`using namespace std;`以免影响其他功能和其他文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:29:15.197

错过“endl”不仅是错误的。由于调用了discard_line(reg)函数，程序也会跳过源文件的第一行，所以只能得到其他数据(5 6 7 8)。根本不需要使用该功能。另外，请确保您初始化数组并检查数组的边界，例如MAX_SIZE，以保证输入数据不会溢出数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-12T07:50:11.300

你可以这样做

```
#include <iostream>

int your_array[2][4] = { 
  {1,2,3,4}, 
  {5,6,7,8}  
};

using namespace std;

int main() {

    // get array columns and rows
      int rows =  sizeof your_array / sizeof your_array[0]; 
      int cols = sizeof your_array[0] / sizeof(int); 

      // Print 2d Array
     cout << "your_array data "<<endl<<endl;
    for (int i = 0; i < rows; ++i)
    {
        for (int j = 0; j < cols; ++j)
        {
            std::cout << your_array[i][j] << std::endl;
        }
     //   std::cout << std::endl;
    }

} 
```

输出

```
1
2
3
4
5
6
7
8 
```

# javascript - 使用 JavaScript 或 jQuery 添加输入时，如果页面被刷新，其值将被复制到其他输入

> ID：12311151
> 
> 赞同：3
> 
> 时间：2012-09-07T03:00:56.480
> 
> 标签：javascript, jquery, firefox, input

当我使用 jQuery 添加一个时，无论何时刷新页面`<input>`，新的值都会被复制到页面的预先存在的输入中！`input`

在 Firefox 中运行此页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="Scripts/jquery-1.8.0.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $('<input />').attr({ 'type': 'text' }).val(2).appendTo($('#cart'));
        })
    </script>
</head>
<body>
    <div id="cart">
    </div>
    <input type="text" id="afe" />
</body>
</html> 
```

首次加载时，原始`input`文件为空白，`input`jQuery 添加的值为`2`.

现在按`F5`。**两个**输入都将显示值`2`！

这是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T04:40:43.953

看起来 Firefox 的自动完成功能越来越混乱。Chrome 不这样做。
**请参阅[jsfiddle.net/TAGkR](http://jsfiddle.net/TAGkR/)。**

**初始页面加载**后，在 Firefox (15.01) 中看起来像这样：

![输入，新鲜](../Images/1223147806bfd6bca4e947810c463ad3.png)

但是**刷新页面/iframe**，它看起来像这样！

![输入，陈旧](../Images/e588830da9bfe95e316bb7444fecb6a5.png)

这可能是 Firefox 中的一个错误。以下是一些可以解决它的方法：

1.  将第一个输入设置为`autocomplete="off"`。
    例如：`<input type="text" id="afe" autocomplete="off" />`

    看到[这个小提琴](http://jsfiddle.net/TAGkR/2/)。

2.  让 jQuery 在原始输入之后物理添加新输入。
    例如：

    ```
    <input type="text" id="afe" />
    <div id="cart">
        <!-- JavaScript/jQuery inserts input here. -->
    </div> 
    ```

    看到[这个小提琴](http://jsfiddle.net/TAGkR/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T03:13:13.690

该问题仅适用于`<input>`您的`cart`. 每次刷新时，它将一次将它们的值更新为 jQuery 中的值。看看这个例子：http: [//jsfiddle.net/TAGkR/26/](http://jsfiddle.net/TAGkR/26/)

我尝试使用纯 Javascript 来查看 jQuery 是否可能存在一些错误，但同样的错误仍然存​​在，如下所示：http: [//jsfiddle.net/TAGkR/28/](http://jsfiddle.net/TAGkR/28/)

* * *

> **编辑**：在这一点之下是我旧的不知情的答案，但我会保持原样，使下面的评论留在上下文中。

我非常不清楚您要完成什么。如果您试图让新文本框获取另一个文本框的值，我只会将 val 函数包装在您当前的 Javascript 周围。

```
$(function() {
    $('#afe').val(
    $('<input />').attr({
        'type': 'text'
    }).val(2).appendTo($('#cart')).val());
})​;​ 
```

如果您想在之后的某个时间获得该值，那么我会这样获得：

```
$(function() {
    $('<input />').attr({
        'type': 'text'
    }).val(2).appendTo($('#cart'));

    $('#afe').val($('#cart input').val());
})​;​ 
```

如果您想澄清更多，我很乐意回答。这正是我从你描述的情况中得到的。

# joomla - 验证码验证在 Joomla 注册中不起作用

> ID：12311156
> 
> 赞同：0
> 
> 时间：2012-09-07T03:01:53.960
> 
> 标签：joomla, joomla1.5, registration, captcha

你能在下面帮忙吗：

我已经开始使用用户注册我的 Joomla 1.5 网站...

垃圾邮件机器人正在网站上注册

虽然我使用了来自网站的验证码——http: [//www.white-hat-web-design.co.uk/blog/php-captcha-security-images/](http://www.white-hat-web-design.co.uk/blog/php-captcha-security-images/)

它在注册页面链接上工作（未经验证） - [http://www.mycarhelpline.com/index.php?option=com_user&view=register&Itemid=79](http://www.mycarhelpline.com/index.php?option=com_user&view=register&Itemid=79)

但是，在注册页面中没有得到验证，

**验证码**

```
session_start();

if( isset($_POST['submit'])) {

   if( $_SESSION['security_code'] == $_POST['security_code'] && 

!empty($_SESSION['security_code'] ) ) {

        // Insert you code for processing the form here, e.g emailing the 

submission, entering it into a database. 

        echo 'Thank you. Your message said "'.$_POST['message'].'"';

        unset($_SESSION['security_code']);

   } else {

        // Insert your code for showing an error message here

        echo 'Sorry, you have provided an invalid security code';

   }

} else {

} 
```

我需要在 Joomla 的哪个文件/行 - controller.php、default.php 和 view.html.php 中放入此代码。我已经尝试在不同行的不同文件上进行排列/组合，但它不起作用。

请建议

嗨 - 即使在进行更改后它也无法正常工作，事实上它在**controller.php 中显示服务器错误 - 将完整的代码放在这里**

```
 function register_save()
     {
    global $mainframe;

    // Check for request forgeries
    JRequest::checkToken() or jexit( 'Invalid Token' );

    session_start();
    if( isset($_POST['submit'])) {
           if( $_SESSION['security_code'] == $_POST['security_code'] && !empty($_SESSION['security_code'] ) ) {
        // Insert you code for processing the form here, e.g emailing the submission, entering it into a database. 
            echo 'Thank you.';
            unset($_SESSION['security_code']);
       } else {
        // Insert your code for showing an error message here
            echo 'Sorry, you have provided an invalid security code';
       }
    } else {

    // Get required system objects
    $user       = clone(JFactory::getUser());
    $pathway    =& $mainframe->getPathway();
    $config     =& JFactory::getConfig();
    $authorize  =& JFactory::getACL();
    $document   =& JFactory::getDocument();

    // If user registration is not allowed, show 403 not authorized.
    $usersConfig = &JComponentHelper::getParams( 'com_users' );
    if ($usersConfig->get('allowUserRegistration') == '0') {
        JError::raiseError( 403, JText::_( 'Access Forbidden' ));
        return;
    }

    // Initialize new usertype setting
    $newUsertype = $usersConfig->get( 'new_usertype' );
    if (!$newUsertype) {
        $newUsertype = 'Registered';
    }

    // Bind the post array to the user object
    if (!$user->bind( JRequest::get('post'), 'usertype' )) {
        JError::raiseError( 500, $user->getError());
    }

    // Set some initial user values
    $user->set('id', 0);
    $user->set('usertype', $newUsertype);
    $user->set('gid', $authorize->get_group_id( '', $newUsertype, 'ARO' ));

    $date =& JFactory::getDate();
    $user->set('registerDate', $date->toMySQL());

    // If user activation is turned on, we need to set the activation information
    $useractivation = $usersConfig->get( 'useractivation' );
    if ($useractivation == '1')
    {
        jimport('joomla.user.helper');
        $user->set('activation', JUtility::getHash( JUserHelper::genRandomPassword()) );
        $user->set('block', '1');
    }

    // If there was an error with registration, set the message and display form
    if ( !$user->save() )
    {
        JError::raiseWarning('', JText::_( $user->getError()));
        $this->register();
        return false;
    }

    // Send registration confirmation mail
    $password = JRequest::getString('password', '', 'post', JREQUEST_ALLOWRAW);
    $password = preg_replace('/[\x00-\x1F\x7F]/', '', $password); //Disallow control chars in the email
    UserController::_sendMail($user, $password);

    // Everything went fine, set relevant message depending upon user activation state and display message
    if ( $useractivation == 1 ) {
        $message  = JText::_( 'REG_COMPLETE_ACTIVATE' );
    } else {
        $message = JText::_( 'REG_COMPLETE' );
    }

    $this->setRedirect('*********', $message);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T05:11:49.427

把你的验证码放进去

文件：`components\com_user\controller.php`
函数名称：`register_save()`

在这条线之后`JRequest::checkToken() or jexit( 'Invalid Token' );`

并将您的消息设置为变量`$message`..

希望这会奏效

# c - 为什么 gdb 一直将 optarg 显示为 0x0

> ID：12311157
> 
> 赞同：5
> 
> 时间：2012-09-07T03:01:56.020
> 
> 标签：c, gdb, getopt, getopt-long

我正在学习*getopt*和 *getopt_long* 如何工作。一个问题是，当我用**gdb**一步步运行下面这个简单的程序时，optarg总是0x0。
你知道为什么吗？是**gdb**的问题吗？
我试图在网上搜索并查看程序的汇编代码，但还没有找到答案。
调试代码表明*optarg*按预期指向 agv[3]（值“16”）。

```
#include <unistd.h>
#include <getopt.h>
#include <stdio.h>
static struct option options[] =
{
  /* name     has_arg flag  val */
  { "num",  1, NULL, 'n' },
  { NULL ,  0, NULL , 0  }
};

int main(int argc, char** argv)
{
  int option;
  option = getopt_long( argc, argv, "n:", options, NULL );
  if (option == 'n') {
    printf("%s\n", optarg);
    if (optarg == NULL)
      printf("optarg == NULL\n");
    if (optarg == 0)
      printf("optarg == 0\n");
  }

  return 0;
} 
```

在 gdb 上：

```
 (gdb) run -n 16
    Starting program: /home/ducalpha/clang/misc/a.out -n 16
...
    16          printf("%s\n", optarg);
    (gdb) p optarg
    $1 = 0x0 
```

输出：

```
$ ./a.out -n 16
16 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T03:06:21.260

（针对修订问题的修订答案）

这个对我有用。输出是：

```
Reading symbols from /home/wally/a.out...done.
(gdb) run -n 16
Starting program: /home/wally/a.out -n 16
16
[Inferior 1 (process 10999) exited normally] 
```

# c - OpenGL（在 Ubuntu 中）：glGetError() 返回 GL_INVALID_OPERATION

> ID：12311158
> 
> 赞同：2
> 
> 时间：2012-09-07T03:01:57.497
> 
> 标签：c, opengl, glew, vertex-shader

对于 OpenGL 的学习，我指的是[openglbook](http://openglbook.com/the-book/)。目前在[第 2 章](http://openglbook.com/the-book/chapter-2-vertices-and-shapes/)中，我正在尝试运行[粘贴在此处](http://ideone.com/7QN8X)以供参考的代码。

我面临的问题是以下功能：

```
void CreateShaders(void)
{
    GLenum ErrorCheckValue = glGetError();

    VertexShaderId = glCreateShader(GL_VERTEX_SHADER);
    glShaderSource(VertexShaderId, 1, &VertexShader, NULL);
    glCompileShader(VertexShaderId);

    FragmentShaderId = glCreateShader(GL_FRAGMENT_SHADER);
    glShaderSource(FragmentShaderId, 1, &FragmentShader, NULL);
    glCompileShader(FragmentShaderId);

    ProgramId = glCreateProgram();
        glAttachShader(ProgramId, VertexShaderId);
        glAttachShader(ProgramId, FragmentShaderId);
    glLinkProgram(ProgramId);
    glUseProgram(ProgramId);

    ErrorCheckValue = glGetError(); // =====> returns GL_INVALID_OPERATION
    if (ErrorCheckValue != GL_NO_ERROR)
    {
        fprintf(
            stderr,
            "ERROR: Could not create the shaders: %s \n",
            gluErrorString(ErrorCheckValue)
        );

        exit(-1);
    }
} 
```

如上function( `glew.h`)所示，为什么会返回`"GL_INVALID_OPERATION"`？
如果我评论这些行，那么它可以工作，但只会打印一个空白窗口。

这是我的[glxinfo](http://ideone.com/6DyQN)。由于我的版本是 2.2 并且此代码适用于 3.3+，因此我删除了以下代码以避免失败：

```
 glutInitContextVersion(4, 0); 
  glutInitContextFlags(GLUT_FORWARD_COMPATIBLE);
  glutInitContextProfile(GLUT_CORE_PROFILE); 
```

**更新**：在遵循@Tim 的回答建议后，我能够成功运行该程序；似乎这些行是创建问题：

> “#version 400\n”（替换为“#version 130”）

和

> 布局（位置 = 0）（已删除）。布局（位置 = 1）（已删除）。

然而，由于这个原因，预期的三角形并不完全相同。可能本教程会考虑到最新的 opengl 版本，而我没有，这会产生问题。

*有没有办法在不改变输出的情况下将代码从最新的 OpenGL (4.0+) 兼容代码修改为较低版本 (例如 < 3.0)？*我将无法升级图形硬件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T03:08:17.733

您没有对着色器编译和链接进行正确的错误检查。您的着色器中可能存在某种语法错误，导致无法编译，因此您的 useProgram 调用尝试使用无效程序。

对于每个着色器，在调用之后，`glCompileShader`您需要调用`glGetShaderiv(shader, GL_COMPILE_STATUS, compile_status)`which 返回 a`true`或`false`compile_status 来告诉您编译是否成功。如果不是，您可以调用`glGetShaderiv(shader, GL_INFO_LOG_LENGTH, length)`以获取 infoLog 的大小，然后调用`glGetShaderInfoLog()`以获取一个字符串，该字符串告诉您在编译期间发生的任何错误。

总之，编译器/链接器错误检查应该是这样的：

```
void CheckError (GLuint shaderId, uint LINE)
{
  GLint bCompiled;
  glGetShaderiv(shaderId, GL_COMPILE_STATUS, &bCompiled);
  if(bCompiled == false)
  {
    GLint length;
    glGetShaderiv(shaderId, GL_INFO_LOG_LENGTH, &length);
    GLchar *pInfo = new GLchar[length + 1];
    glGetShaderInfoLog(shaderId, length, &length, pInfo);
    fprintf(stderr, "called at line-%u: Compiler/Linker error: %s", LINE, pInfo);
    delete[] pInfo;
  }
} 
```

如果两个着色器都编译成功，那么在链接程序后，你想在程序对象上测试相同的`glGetProgramiv/GL_LINK_STATUS`东西`glGetProgramInfoLog`

# grails - 无法使用 grails 邮件插件通过雅虎服务器发送邮件

> ID：12311161
> 
> 赞同：0
> 
> 时间：2012-09-07T03:02:07.793
> 
> 标签：grails, grails-2.0

我正在使用 grails[邮件插件](http://grails.org/plugin/mail)，并且正在设置一个 smtp 请求，如下所示

```
grails {
   mail {
      host = "smtp.correo.yahoo.es"
      port = 465
      username = "myuser"
      password = "mypassword"
      props = [ "mail.smtp.auth":"true",
                       "mail.smtp.socketFactory.port":"465",
                       "mail.smtp.socketFactory.class":"javax.net.ssl.SSLSocketFactory",
                       "mail.smtp.socketFactory.fallback":"false"  ]
   }
} 
```

即使我提供了正确的用户名/密码，我也无法发送任何邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:18:22.437

我尝试通过 Gmail 发送电子邮件，在几封电子邮件（可能二十或三十封）之后，服务器开始阻止它。也许雅虎也有类似的阻止系统。现在我的系统正在通过 Amazon SMS 发送电子邮件，如果您对此感到好奇，我可以向您展示如何配置它。

检查雅虎关于发送电子邮件的政策。

# delphi - TDictionary 重复条目（Delphi）

> ID：12311165
> 
> 赞同：1
> 
> 时间：2012-09-07T03:02:17.580
> 
> 标签：delphi, duplicates, tdictionary

我正在尝试将以下值添加到

```
procedure TForm1.FormCreate(Sender: TObject);
var
  md: TDictionary<string, string>;
  s, v: string;
begin
  md := TDictionary<string, string>.Create;
  try
    s := 'orange';
    v := 'fruit';
    md.Add(s, v);

    s := 'orange ';
    v := 'color';
    md.Add(s, v);

    ShowMessage(IntToStr(md.Count));
  finally
    md.Free;
  end;
end; 
```

我知道这是重复的，但如果你看第二个橙色，你会在最后看到一个空格。我认为德尔福削减了价值，但它不应该。

有谁知道这个问题的解决方案？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T14:20:45.590

此代码显示了一个消息框，其中包含所有已知版本的 Delphi 上的数字 2。这完全符合预期，并且`TDictionary`在比较相等性时，代码肯定不会修剪您的密钥。

# android - 尝试开发安卓杀毒软件

> ID：12311166
> 
> 赞同：-5
> 
> 时间：2012-09-07T03:02:24.127
> 
> 标签：android, virus, malware

我正在尝试开发一种 Android 防病毒软件，并且正在尝试找出可能的方法。

到目前为止，我发现唯一的方法之一是使用**PackageManager**并获取已安装应用程序及其包名称的列表，并将其与黑名单进行比较。有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T03:19:05.223

开发一个以 root 身份运行的进程，甚至更好：一个审计进程和文件系统文件的 Linux 内核模块。

将防病毒软件实现为完全用户态结构的问题在于，恶意软件通常以更高的权限运行，因此很容易逃避检测，这就是 rootkit 感染如此难以处理的原因（“从轨道上核对它，它是唯一的方法来确定”）。

您的下一个问题是维护一个 virii 数据库。早在 1990 年代的原始 AV 系统保留了已知恶意软件的哈希数据库。问题是它们无法防御多态可执行文件、那些通过将自身附加到其他程序而传播的可执行文件，或者诸如 Word 宏之类的东西。另一种方法是开发一个基于启发式的系统。在基于 VM 的系统中，您可能会侥幸逃脱，因为可以轻松分析程序的行为（例如定位对恶意软件使用的系统函数的调用），但一个好的病毒将用“本机”语言编写，从而进行检测即使不是不可能，也非常困难（当我使用诺顿防病毒软件时，他们的“寻血犬”启发式系统从未起作用，并且总是产生太多误报）。

最后，您还有研究和维护这样一个数据库的艰巨任务。这就是为什么只有大型安全公司（Symantic、McAfee、NOD、Microsoft 等）开发 AV 程序的原因。

如果我是你，我会在你浪费任何时间之前立即放弃。如果这是一个教育练习，那么您将通过编写自己的病毒而不是编写一个试图阻止它们的系统来了解有关恶意软件的更多信息。

# cordova - PhoneGap：设置 ContactAddress 时出现未捕获的异常

> ID：12311167
> 
> 赞同：0
> 
> 时间：2012-09-07T03:02:37.907
> 
> 标签：cordova

我正在使用 PhoneGap 在 iPhone/Android 上保存联系人。总体而言，它似乎确实有效，但我已经追踪到最近的一次崩溃，即当我尝试将物理地址设置到我的contact() 对象中的contactAddress() 对象时，它会引发未捕获的异常。

我对要保存的联系人执行了 JSON.stringify：

```
{
    "id": 41,
    "rawId": null,
    "displayName": "Joe Customer",
    "name": {
        "givenName": "Joe",
        "familyName": "Customer"
    },
    "nickname": null,
    "phoneNumbers": [
        {
            "name": "work",
            "value": "2145556666",
            "pref": true
        },
        {
            "name": "fax",
            "value": "2147778888",
            "pref": true
        }
    ],
    "addresses": [
        {
            "streetAddress": null,
            "locality": "Dallas",
            "region": null,
            "postalCode": null,
            "country": null
        }
    ],
    "ims": null,
    "organizations": [
        {
            "pref": true,
            "type": "work",
            "name": "Acme Inc.",
            "department": null,
            "title": "Sales Person"
        }
    ],
    "birthday": null,
    "note": null,
    "photos": null,
    "categories": null,
    "urls": [
        {
            "name": "website",
            "value": "http://www.google.com",
            "pref": true
        }
    ]
} 
```

当我尝试保存它时，我得到了异常：

```
2012-09-06 21:50:38.358 MyApp[6224:707] typeValue: (null)

2012-09-06 21:50:38.359 MyApp[6224:707] *** WebKit discarded an uncaught exception in the webView:decidePolicyForNavigationAction:request:frame:decisionListener: delegate: <NSInvalidArgumentException> -[__NSCFDictionary setObject:forKey:]: attempt to insert nil value (key: type) 
```

无论我是填写整个地址对象还是只填写一个字段，它似乎都会发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:01:50.057

I think you have to set the 'rawId' field of the contact. I did also have a problem saving contacts on Android devices when working with Phonegap 2.1 and Sencha Touch 2.0 and I got a similar log output, something with "invalid argument: int is 'null'" or something. The problem was solved when I realized that I had to set the rawId of the contact.

In my case, I just wanted to update an already existing contact so I set the id of my contact object, contactToSave, to the same id as the contact I wanted to update. But when contactToSave.save() executed, there was the beforementioned error.

When I set not only the id but also the rawId of contactToSave to the same as the contact in the phonebook, the problem disappeared and I could update contacts without problem.

Try setting the rawId of your contact, though I don't know to what value, since it is a new contact.

# javascript - 如何知道何时使用 socket.io 订阅/取消订阅频道

> ID：12311170
> 
> 赞同：1
> 
> 时间：2012-09-07T03:02:52.000
> 
> 标签：javascript, node.js, socket.io

刚刚搜索了所有网络以查找订阅或取消订阅频道时如何在 node.js 服务器内部进行跟踪。我能做的就是连接和断开绑定，但不知道如何使用通道。

```
io.sockets.on('connection', function (socket) {
    console.log("["+socket.id+"] Connected");

    // handler to know when a socket subscribed a channel (*) ?
    // handler to know when a socket unsubscribed a channel (*) ?

    socket.on('disconnect', function () {
        console.log("["+socket.id+"] Disconnect");
    });
}); 
```

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:42:01.757

您正在寻找“socket.of('channelName')”...请参阅[Socket.io 文档](http://socket.io/#how-to-use)

服务器：

```
var io = require('socket.io').listen(80);

var chat = io
  .of('/chat')
  .on('connection', function (socket) {
    socket.emit('a message', {
        that: 'only'
      , '/chat': 'will get'
    });
    chat.emit('a message', {
        everyone: 'in'
      , '/chat': 'will get'
    });
  });

var news = io
  .of('/news')
  .on('connection', function (socket) {
    socket.emit('item', { news: 'item' });
  }); 
```

客户：

```
<script>
  var chat = io.connect('http://localhost/chat')
    , news = io.connect('http://localhost/news');

  chat.on('connect', function () {
    chat.emit('hi!');
  });

  news.on('news', function () {
    news.emit('woot');
  });
</script> 
```

# c# - C# 代码中的 Server.Transfer。当前上下文中不存在服务器

> ID：12311171
> 
> 赞同：1
> 
> 时间：2012-09-07T03:02:57.553
> 
> 标签：c#, asp.net, visual-studio, web

我正在制作一个将从网页调用的方法，该方法使用[Server.Transfer](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.transfer)终止当前页面的执行并开始执行新页面。

但是，由于我正在制作的方法不是 aspx 页面，Service Studio 抱怨当前上下文中不存在服务器实例。

我该如何规避这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T03:05:54.737

使用`HttpContext.Current`( `System.Web.HttpContext class defined in System.Web`)

即使您正在为 Web 应用程序开发类库，您也可以引用和使用它。

你会需要`HttpContext.Current.Server`，但你也可以在那里找到其他有用的数据。

# pdf - 打印嵌入式 PDF 的问题

> ID：12311172
> 
> 赞同：3
> 
> 时间：2012-09-07T03:03:14.963
> 
> 标签：pdf, embed

我在网页中嵌入了一个 pdf 对象。当我打印此页面时，嵌入的对象不会显示在打印输出中。打印 pdf 的唯一方法是使用插件的打印功能，但是我需要在网页顶部的 pdf 文档中添加一些标题。有没有办法做到这一点？

# ruby-on-rails - Rails：在“redirect_to”期间将参数传递给新控制器

> ID：12311185
> 
> 赞同：6
> 
> 时间：2012-09-07T03:06:05.563
> 
> 标签：ruby-on-rails, ruby, controller

我正在使用 Ryan Bates 的 Rails Cast on Wicked Wizard Forms 创建一个多步骤表单。我没有 `current_user`定义方法（不使用身份验证 gem） - 所以，我试图在 -`user.id`期间传递参数`redirect_to`- 不幸的是，我似乎无法让它工作。任何帮助表示赞赏！

我的用户控制器`create`方法

```
 def create
    @user = User.new(params[:user])
    respond_to do |format|
      if @user.save
        format.html { redirect_to controller: 'user_steps', id: 'user.id' }
        #format.html { redirect_to @user, notice: 'User was successfully created.' }#
        format.json { render json: @user, status: :created, location: @user }
      else
        format.html { render action: "new" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end 
```

`user_steps`我要重定向到的控制器：

```
class UserStepsController < ApplicationController
    include Wicked::Wizard
    steps :gender, :items, :brands, :final

    def show
        render_wizard
    end 
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T03:11:21.447

理想情况下，您应该将其作为参数传递，`redirect_to`如果您使用正确的路由路径，该方法将为您执行此操作。

例子：

```
redirect_to(user_steps_path(@user)) 
```

在您的情况下，如果您没有命名路线，您可以这样做：

```
redirect_to(controller: 'user_steps', id: @user.to_param) 
```

在 URL 中，建议使用该`to_param`方法。`id`用于数据库查询。

您传入的内容实际上是`'user.id'`作为参数。它不会被评估。

# javascript - 奇怪的 JavaScript 字符串替换行为 $&

> ID：12311192
> 
> 赞同：6
> 
> 时间：2012-09-07T03:07:07.940
> 
> 标签：javascript, regex, string, replace

使用以下代码：

```
var x = 'foo';
console.log(x.replace(x, "\\$&"));​ 
```

输出是'\foo'，如下所示：http: [//jsfiddle.net/mPKEx/](http://jsfiddle.net/mPKEx/)

为什么不是

```
'\\$&"? 
```

我用 "\$&" 替换所有 x ，这只是一个计划的旧字符串，所以为什么 string.replace 做一些疯狂的替换，当函数的第二个参数不应该做任何事情时，除了被替换......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T03:08:42.930

$& 是 Javascript 字符串替换中的一个特殊引用。它**指向**匹配的字符串。

```
$$ - 插入一个“$”
$& - 指当前模式匹配的整个文本。
$` - 指当前模式匹配左侧的文本。
$' - 指当前模式匹配右侧的文本。
$n 或 $nn - 其中 n 或 nn 是十进制数字，插入带括号的第 n 个
            子匹配字符串，前提是第一个参数是 RegExp 对象。

```

（[参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-07T05:52:42.563

在你的情况下：

```
var x = 'foo';
console.log(x.replace(x, function() {return '\\$&'})); 
```

查看差异：http: [//jsfiddle.net/mPKEx/10/](http://jsfiddle.net/mPKEx/10/)

您可以[指定一个函数作为第二个参数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter)。上述特殊替换模式（$$、$&、$`、$'、$n 或 $nn）**不适**用于这种情况。

# ios - iOS，在我的 iPad 中没有录音，在模拟器中工作正常

> ID：12311194
> 
> 赞同：0
> 
> 时间：2012-09-07T03:07:47.880
> 
> 标签：ios, ipad, audio

嗨，我在模拟器中有一个非常奇怪的问题可以完美运行，但是当我将应用程序充电到 iPad 时它不起作用。任何的想法？

在这里，我创建了所有变量以使其工作。

```
- (void)viewDidLoad {

[super viewDidLoad];

NSArray *dirPaths;
NSString *docsDir;

dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
docsDir = [dirPaths objectAtIndex:0];
NSString *soundFilePath = [docsDir stringByAppendingPathComponent:@"sound.caf"];

NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];

NSDictionary *recordSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                [NSNumber numberWithInt:AVAudioQualityMin],
                                AVEncoderAudioQualityKey,
                                [NSNumber numberWithInt:16],
                                AVEncoderBitRateKey,
                                [NSNumber numberWithInt: 2],
                                AVNumberOfChannelsKey,
                                [NSNumber numberWithFloat:44100.0],
                                AVSampleRateKey,
                                nil];

NSError *error = nil;

audioRecorder = [[AVAudioRecorder alloc] initWithURL:soundFileURL
                                            settings:recordSettings
                                               error:&error];
if (error)
{
    NSLog(@"error: %@", [error localizedDescription]);
} else {
    [audioRecorder prepareToRecord];
}

} 
```

我有一些用于录制、播放和停止的按钮。所以这些是所有这些的代码。

```
-(void) recordAudio{
if (!audioRecorder.recording){
    recordButton.enabled = NO;
    playButton.enabled = NO;
    saveButton.enabled = NO;
    stopButton.enabled = YES;
    [audioRecorder record];
}
}

-(void)stop{
recordButton.enabled = YES;
playButton.enabled = YES;
saveButton.enabled = YES;
stopButton.enabled = NO;    
if (audioRecorder.recording){
    [audioRecorder stop];
}
else if (audioPlayer.playing){
    [audioPlayer stop];
}
}

-(void) playAudio{
if (!audioRecorder.recording){
    recordButton.enabled = NO;
    stopButton.enabled = YES;
    saveButton.enabled = NO;        
    if (audioPlayer)
        audioPlayer=nil;
    NSError *error;

    audioPlayer = [[AVAudioPlayer alloc]
                   initWithContentsOfURL:audioRecorder.url
                   error:&error];

    audioPlayer.delegate = self;

    if (error)
        NSLog(@"Error: %@", [error localizedDescription]);
    else
        [audioPlayer play];
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:15:57.353

最后我找到了解决方案。在我之前的代码中，我在 ViewdidLoad 中添加了这一行。

```
AVAudioSession * audioSession = [AVAudioSession sharedInstance];
[audioSession setCategory:AVAudioSessionCategoryPlayAndRecord error: &error];
[audioSession setActive:YES error: &error]; 
```

对于我添加的设置：

```
[NSNumber numberWithInt:kAudioFormatAppleIMA4], AVFormatIDKey 
```

[我从http://www.iphoneam.com/blog/index.php?title=using-the-iphone-to-record-audio-a-guide&more=1&c=1&tb=1&pb=1](http://www.iphoneam.com/blog/index.php?title=using-the-iphone-to-record-audio-a-guide&more=1&c=1&tb=1&pb=1)复制代码和想法using AVAudioSession 来自[How to record and play sound in iPhone app?](https://stackoverflow.com/questions/5662297/how-to-record-and-play-sound-in-iphone-app)

如果你需要完整的代码是这个。

```
- (void)viewDidLoad {

[super viewDidLoad];

NSError *error = nil;

AVAudioSession * audioSession = [AVAudioSession sharedInstance];
[audioSession setCategory:AVAudioSessionCategoryPlayAndRecord error: &error];
[audioSession setActive:YES error: &error];

playButton.enabled = NO;
stopButton.enabled = NO;
saveButton.enabled = NO;

NSArray *dirPaths;
NSString *docsDir;

dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
docsDir = [dirPaths objectAtIndex:0];
docsDir = [HSAudioController pathToDocumentsFolder];
NSString *soundFilePath = [docsDir stringByAppendingPathComponent:@"sound.caf"];

NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];

NSDictionary *recordSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                [NSNumber numberWithInt:kAudioFormatAppleIMA4], AVFormatIDKey,
                                [NSNumber numberWithInt:AVAudioQualityMin], AVEncoderAudioQualityKey,
                                [NSNumber numberWithInt:16], AVEncoderBitRateKey,
                                [NSNumber numberWithInt: 2], AVNumberOfChannelsKey,
                                [NSNumber numberWithFloat:44100.0], AVSampleRateKey,
                                nil];

audioRecorder = [[AVAudioRecorder alloc] initWithURL:soundFileURL
                                            settings:recordSettings
                                               error:&error];
NSLog(@"%@",audioRecorder.url);
if (error)
{
    NSLog(@"error: %@", [error localizedDescription]);
} else {
    [audioRecorder prepareToRecord];
}
} 
```

# python - 用于聊天应用程序的 Python 或节点

> ID：12311196
> 
> 赞同：3
> 
> 时间：2012-09-07T03:08:14.217
> 
> 标签：python, node.js, chat

我打算开始一个新的聊天网络应用程序，它允许用户加入聊天室并参与聊天。我听说过很多关于 Node.js 将如何完美地解决这个问题。另外，网上有很多教程演示了如何构建一个 Node + socket.io 聊天应用程序。就个人而言，我从未尝试过 Node。我对 javascript 的了解足以与 Jquery 和 Backbone 一起使用，但由于我更喜欢​​ Python 进行 Web 开发，我一直在避免使用 Node。你们有什么建议？我应该在 Python 中尝试应用程序（我不知道从哪里开始）还是应该花一些时间学习 Node？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T03:18:10.067

我个人不是编写 Python 的忠实拥护者，虽然我喜欢 Node 并建议在某个时候试一试，但如果您已经了解 Python，那么您没有理由不使用它来完成这项任务；您可能有兴趣查看[Twisted](http://twistedmatrix.com/trac/)或[Tornado](http://www.tornadoweb.org/)。

我会说，使用 Node.js 进行事件编程的一大优点（与其他语言相比）是 Node.js 中的所有 I/O 默认情况下都是异步的。在其他环境中，您需要确保只使用非阻塞库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T03:27:09.403

Node.js 是聊天类应用程序的首选框架，因为它非常适合处理数据密集型而不是 CPU 限制的条件。我个人是 node.js 的忠实粉丝。但我要站出来告诉你，

一旦你的项目从一个简单的例子发展成一个完全成熟的应用程序，node.js 处理异步事件的语法就会变得很痛苦。我的意思是你会做多久。

```
response.onComplete( function(data) { 
    data.parseJson( function( json ) {
        json.getElement('hoo', function( value ) {
            value.HowDoIEscapeNow()
            ..... 
```

我并不是要对 node.js 说任何话，但恕我直言，一旦你进入复杂性，它就是一个完全不同的野兽。

# xml - 引用自定义 xsd 会导致智能感知仅在架构之上工作

> ID：12311200
> 
> 赞同：1
> 
> 时间：2012-09-07T03:08:58.470
> 
> 标签：xml, xsd

这是场景

1.  在 C:\Users\Win7Guru\Documents\Visual Studio 2012\Projects\foo.xsd 中创建名为 foo.xsd 的 XSD 架构
2.  创建新的xml文件
3.  `<?xml version="1.0" encoding="utf-8"?`在 xml 文档顶部添加
4.  添加架构标签`<xs:schema xmlns="C:\Users\Win7Guru\Documents\Visual Studio 2012\Projects\foo.xsd"`和结束标签`</xs:schema>`
5.  键入`<`并等待智能感知出现，但显示的只是默认选择

* * *

1.  `-->`

2.  `<![CDATA[]]>`

3.  `?`

* * *

使用 Visual Studio 2012 RTM

> 当我尝试架构上方的第 5 步时，例如
> 
> > `1\. <?xml version="1.0" encoding="utf-8"?>`
> > 
> > `2\. <------`
> > 
> > `3\. <xs:schema xmlns="C:\Users\Win7Guru\Documents\Visual Studio 2012\Projects\foo.xsd">`
> > 
> > `4\. </xs:schema>`

* * *

> 我得到了自定义选择，而不是 3 个默认选择。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:59:04.373

我假设在第一种情况下，您已经输入了and标记`<`之间的内容，因为 for eg 仅在文档​​元素内容中有效。`<xs:schema>``</xs:schema>`

由于`xs`前缀没有绑定到任何命名空间，或者通常是一个 VS 没有 XSD 的命名空间，因此 Intellisense 处理器并不真正知道要提出什么建议，超出任何 XML 的预期；因此，你看到的 3 件事。

当您`<`在 上方键入时，编辑器`<xs:schema>`不受上下文约束（如先前`<xs:schema>`由中`foo.xsd`的**全局元素**`foo.xsd`；因此你看到的东西越多。

我认为 VS 编辑器似乎提供了一种便利，因为它将 XML 命名空间 URI 与实际的 XSD 位置相关联，这增加了混乱。这很酷，但不是标准的。在 XML 命名空间的设计中，XML 命名空间 URI 的值与针对同一 XML 命名空间的 XML Schema 位置之间没有关系。换句话说，以以下形式声明了一个（默认）XML 命名空间：

`xmlns="C:\Users\Win7Guru\Documents\Visual Studio 2012\Projects\foo.xsd"`

没有标准规范可以指示处理器始终使用命名空间值本身查找该命名空间的模式。

虽然许多人认为将命名空间 URI 作为解析为 Internet 上实际资源的 URL 是一种很好的做法，但许多其他人更喜欢使用 URN 作为一种更好的方法，以避免在某种程度上造成这里造成的混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T15:52:28.903

独立于智能感知问题，您需要将命名空间前缀绑定`xs`到适当的命名空间名称。所以尝试添加

```
xmlns:xs="http://www.w3.org/2001/XMLSchema" 
```

`xs:schema`到文档的根元素 ( )。正如 Petru Gardea 所指出的，只有当编辑器对命名空间有一些内置知识时，这才会产生启用智能感知的效果。但是，即使它没有打开智能感知，如果您想要一个符合标准的 XSD 模式文档，声明命名空间也是必要的。

# c# - 安装签名应用程序时如何在Win8上通过智能屏幕？

> ID：12311203
> 
> 赞同：82
> 
> 时间：2012-09-07T03:09:11.040
> 
> 标签：c#, windows-installer

我们是开发人员，我们有一个数字签名的应用程序安装程序。当我们安装这个应用程序时，它会弹出智能屏幕，影响安装体验。它说

> **Windows 保护您的 PC**
> 
> Windows SmartScreen 阻止了无法识别的应用程序启动，运行此应用程序可能会使您的 PC 面临风险。

我认为微软除了数字签名之外还有一些验证应用程序的策略。有没有人有这个问题的经验，请给我一些线索来解决这个问题？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2015-02-06T05:44:40.263

我们刚刚经历了从**旧**的Authenticode 证书迁移到**新**证书的整个过程（不是 EV 证书，只是可以在我们的自动构建过程中使用的普通证书）。

Microsoft 不再提供任何将声誉从现有证书转移到新证书的方法。所以不要试图打电话给他们的支持。你只会浪费很多时间和精力。他们将无法提供帮助。

微软声称，如果新旧证书具有相同的文本内容，则声誉建立得更快。更具体地说，这是我从*SmartScreen® Filter 的应用程序信誉功能*支持团队得到的回复：

> 请注意，每当您续订具有已知声誉的证书时，您可能会在初次下载使用续订证书签名的文件时看到一些警告。但是，在更新的证书上建立已知声誉通常比在新证书上更快。虽然更新的证书建立了声誉，但用户仍然可以单击以运行或保存下载。为此，他们选择 Actions | 更多选项 | 无论如何从下载管理器运行。

确保 SmartScreen 不会警告用户的最佳方法是运行**Windows 应用程序认证工具包 (WACK)**，它应该包含在 Windows SDK 下载中：

![Windows 应用认证工具包](../Images/0f987d6269273fa3f37512ee4296901c.png)

运行测试后，WACK 解释了如何继续：

![最终报告 - 验证通过](../Images/32144235b37bfd072dd010c6de677209.png)

将成功申请认证的 XML 结果上传到[https://sysdev.microsoft.com](https://sysdev.microsoft.com)。几天后，SmartScreen 将知道用于认证程序的数字签名，并且不再警告用户下载。

**注意**我们无法在 Windows 8.1 的最新更新上验证我们的应用程序，我们必须使用全新安装的 Windows 8.1 才能让 WACK 成功验证我们的所有程序。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-09-07T05:59:38.797

如果您使用从 CA 购买的证书对安装程序进行了签名，您应该联系 CA 以了解他们为何未能与 Microsoft 合作以消除此警告。

如果证书不是来自 CA，而是自签名证书，您将不得不求助于 CA。

微软已经在其 Windows 团队博客上发布了大部分信息，

[https://blogs.msdn.microsoft.com/ie/2012/08/14/microsoft-smartscreen-extended-validation-ev-code-signing-certificates/](https://blogs.msdn.microsoft.com/ie/2012/08/14/microsoft-smartscreen-extended-validation-ev-code-signing-certificates/)

> **最佳实践**
> 
> 开发人员仍应遵循我们在过去博客文章中建议的最佳实践。我们在该指南中添加了通过 Windows 应用商店分发应用程序的其他选项以及 EV 代码签名选项：
> 
> *   通过 Windows 应用商店分发您的应用

Windows 8 应用程序需要通过 Windows 应用商店开发人员入职和应用程序审核流程。Windows 8 应用程序不在 Windows 8 中 SmartScreen 应用程序信誉检查或警告的范围内。

> *   对您的程序进行数字签名（标准或 EV 代码签名）

生成信誉并将其分配给数字证书以及特定文件。数字证书允许聚合数据并将其分配给单个证书，而不是许多单独的程序。尽管不是必需的，但由 EV 代码签名证书签名的程序可以立即通过 SmartScreen 信誉服务建立信誉，即使该文件或发布者之前不存在信誉。EV 代码签名证书还具有唯一标识符，可以更轻松地在证书续订期间维护声誉。只有作为 Windows 根证书计划成员的 CA 颁发的 Authenticode 证书才能建立信誉。

目前，赛门铁克和 DigiCert 正在提供 EV 代码签名证书。

> *   不要签署或分发恶意代码

分发检测为恶意的代码将删除文件中的信誉以及相关数字证书中的任何信誉——即使使用 EV 代码签名证书进行签名。

> *   申请 Windows 徽标或 Windows 8 桌面应用认证

在此处了解有关这些计划的更多信息：Windows 8 桌面应用程序认证（Windows 应用商店提交所需） Windows 徽标计划

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-09-07T06:03:13.407

我一直在寻找一段时间，所以我将分享我到目前为止找到的内容。

我没有在 Microsoft 的 Windows 8 中找到任何有关此功能的文档，但我可能只是在错误的地方寻找。

我阅读的大多数文章都讨论了 SmartScreen 过滤器的工作原理如下：

*   在运行下载的安装程序或可执行文件之前，Windows 8 会咨询数据库。
*   数据库可以报告该程序是否已：
    *   报告为恶意/网络钓鱼，（并由 Microsoft 员工验证）。
    *   许多人使用/运行。

如果有足够多的人运行该安装程序，而没有将其报告为恶意程序，最终该程序将被标记为安全，其他用户将不会收到烦人的消息。

一些资料来源：（[这里](http://www.ghacks.net/2012/02/09/how-to-bypass-smartscreen-filter-windows-protected-your-pc-in-windows-8/)）（[这里](http://www.7tutorials.com/what-smartscreen-filter-how-does-it-work)）

用户安装程序时发送给 Microsoft 的信息包括 IP 地址、安装程序的哈希值和数字签名，可能还有应用程序的文件名。（[见这里](http://log.nadim.cc/?p=78)）

Microsoft 员工可以直接访问数据库，以添加和标记安全的所有 Microsoft 应用程序。

也许微软已经设置了一种方法来预先认证您的安装程序，如果没有，您可能只需要等到足够多的人运行安装程序。（但不确定会有多少）。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-10-01T04:15:10.827

我刚刚经历了这个过程，我将在其中添加一些信息。

1) 买一辆电动汽车。这很值得。下次升级证书时，升级到 EV 证书。价格每年增加约 100 美元。EV 证书被认为更安全，因为它们更难被窃取。发给您时，将发给您一个硬件令牌设备以完成签名。不幸的是，最终标志与自动构建不兼容。

它并不像听起来那么可怕。他们将为您提供第二个证书来签署您的可执行文件（在安装程序内），该证书仍然与自动化兼容。安装程序上的签名必须与硬件令牌一起签名。

2）如果你不想获得EV证书，你需要声誉。如果您正在升级，Microsoft 会将信誉从您的旧证书转移到您的新证书。您必须联系 MSDN 技术支持，大约一周后即可完成。我提交了我的新旧安装程序——带有新旧证书——他们修复了它。

3) 如果这是您的第一个证书，那么您会一直使用 SmartScreen，直到获得声誉。您可能应该通过 sysdev.microsoft.com 对您的应用程序进行认证。但是，在您获得 Microsoft 的良好声誉之前，您需要下载多少次才能真正知道。

这就是我的经验。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-03-15T23:41:11.480

由于 Windows 8.1 已经发布。

*   当您通过 Internet 将所有标准代码签名证书下载到您的 PC 并尝试安装它们时，Microsoft 停用了所有可信任的标准代码签名证书，但如果您通过 USB 或 CD-ROM 分发您的应用程序，则标准代码签名证书应用程序可以工作。

*   不要使用`signtool.exe`来验证（`signtool.exe verify /pa mysetup.exe`会显示成功，但当其他用户下载它并尝试安装 SmartScreen 时会失败，弹出窗口将继续显示）

使用 Windows 应用认证工具包 (WACK)

![在此处输入图像描述](../Images/1f9112964ed5514c838aa35d9c7e49ea.png)

*   此标准代码签名证书已失效。意味着如果您拥有标准代码签名证书，它将不再像过去那样可靠地工作，即使 Windows 应用程序认证工具包 (WACK) 显示 PASS 和 WARNING，并不意味着其 100% 验证成功

![在此处输入图像描述](../Images/7401137fe8bb7a361fe96bcfa3409f11.png)

您必须购买 EV 证书 ( [https://www.globalsign.com/en/code-signing/](https://www.globalsign.com/en/code-signing/) )

因此，要 100% 成功，请遵循勺子饲料：

第 1 步：转到[https://sysdev.microsoft.com](https://sysdev.microsoft.com)并登录

a) 创建公司帐户 > 下一步

b) 下载微软提供的 zip 格式的 winqual.exe 文件，现在用您的标准证书或 EV 证书对 winqual.exe 进行签名，然后单击下一步上传文件进行验证。

就我而言，它失败了，因为我拥有微软不再允许的标准证书。所以你们现在要做的就是购买EV许可证，否则你就完蛋了，并且可以在没有任何线索的情况下花费你的一生来解决这个问题。

![在此处输入图像描述](../Images/872aafa65342d585ebf4d1c152923a18.png)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-07-30T16:58:11.997

我已经测试了 EV 证书解决方案，它确实有效。

遗憾的是，我还要提到 EV 证书与在服务上下文下执行签名的 TeamBuild 不兼容。EV 证书需要与 SafeNet, Inc 提供的加密服务提供商接口的硬件令牌，以供所有授权的 EV 证书供应商（VeriSign 和 DigiCert）使用。

当签名发生时，来自 Safenet 的驱动程序将提示输入与在服务上下文中执行有些不兼容的密码。此外，Safenet 提供的保护可以防止从实际控制台以外的任何地方进行签名。您甚至无法从远程桌面会话中签名。因此，从 Teambuild 内部签约充其量是有问题的，而在最坏的情况下是不可能的。

我曾与 Microsoft 合作过，他们无法提供解决方法来签署或任何其他方式来在 SmartScreen 下获得即时声誉。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-24T12:34:14.750

不幸的是，我没有足够的代表来简单地评论上述答案之一。但是，如果您为已发布的应用程序指定部分信任（我选择了 Internet 区域）并且有代码签名证书，则不会显示智能屏幕警告（在 Win10 上检查）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-04-14T17:29:22.493

我使用令牌上的 EV 证书 (GlobalSign) 以自动方式签署我的应用程序。使用 .bat 文件。在“.bat”文件中，输入 ex: (对于 sha1)

```
SignTool.exe sign /n "Exact Enterprise name in the cert - token" /t "http://timestamp.globalsign.com/scripts/timstamp.dll" "c:\Patch_to_file\Filename.exe" 
```

“证书中的确切企业名称 - 令牌”应该是证书中的确切名称（令牌）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-01T06:13:00.310

“文件的版本与您正在运行的 Windows 版本不兼容”。在 Windows 2008 服务器下，没有“更多信息”按钮可供选择安装。

当我们使用非 Microsoft 产品 (Delphi) 开发 Windows 桌面软件（不是“应用程序”）并使用 Innosetup 作为我们的安装程序时，应用程序验证毫无意义。它在那里闲置了 30 分钟，我们只需启动应用程序，然后手动关闭应用程序，它就会生成通过报告。

我们对所有版本和其中的每个可执行文件进行代码签名。

当我们将 XML 上传到 Microsoft 时，经过认证的 XML 位于与我们的主要开发人员帐户无关的站点上，无法将其发布到 Microsoft Store。每个应用程序浪费了 45 分钟。

# php - wordpress 单页名称

> ID：12311204
> 
> 赞同：1
> 
> 时间：2012-09-07T03:09:23.537
> 
> 标签：php, wordpress

假设这是我自己的主题的自定义帖子类型代码：

```
    register_post_type('wpmon-产品',
        大批（
            '标签' => 数组（
                '名称' => __( '我的商店' ),
                'singular_name' => __( 'Product' ),
                'add_new' => __('添加新产品'),
                'add_new_item' => __('添加新产品'),
                'edit_item' => __( '编辑产品' ),
                'new_item' => __( '添加新产品' ),
                'view_item' => __('查看产品'),
                'search_items' => __( '搜索产品' ),
                'not_found' => __( '未找到产品' ),
                'not_found_in_trash' => __( '没有在垃圾箱中找到产品' )
            ),
            '公共' => 真的，
            '支持' => 数组（'title', 'editor', 'thumbnail', 'comments'）,
            'rewrite' => array("slug" => 'product'),
            'menu_position' => 5,
            'register_meta_box_cb' => 'my_custom_metaboxes'
        )
    );

```

在我的主题板文件夹上：我的 single.php php 的名称应该是什么？是'single-wpmon-product.php'吗？或“单一产品.php”

我都试过了..但它不起作用:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T03:23:56.330

模板确实需要`single-wpmon-product.php`。正如您可能已经看到的那样，WordPress Codex 在此处为您提供指南：http: [//codex.wordpress.org/Post_Type_Templates](http://codex.wordpress.org/Post_Type_Templates)。我已经在本地创建了您的自定义 post_type，并且该模板文件名适用于我。

我不确定为什么它不适合你。你确定你是在里面 `My Store`而不是在里面创建这些帖子`Posts`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T07:52:05.597

单页名称取决于您注册的自定义帖子类型的名称。所以这个帖子类型的单个模板文件必须是 single-wpmon-product.php 。

也许你忘了在“init hook”中调用注册函数。例如，如果函数名称是： `function register_myposttype() ;`

所以你必须把它称为 `add_action( 'init', 'register_myposttype' );`

# rspec - 有没有办法配置 rspec 在第一次失败时中止剩余的规范？

> ID：12311206
> 
> 赞同：0
> 
> 时间：2012-09-07T03:09:56.737
> 
> 标签：rspec, guard, spork

我在 spork 和 guard 下运行规范，这使事情变得复杂。但这将非常方便。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T23:39:59.270

正如评论中所回答的那样，快速失败。

# css - IE9 css 没有正确对齐菜单

> ID：12311212
> 
> 赞同：0
> 
> 时间：2012-09-07T03:10:47.313
> 
> 标签：css, html, internet-explorer-9

我有以下html：

```
<header>
        <nav>
            <ul id="menu">
                <li><img src="../Content/themes/base/images/logo.png" /></li>                        
                <li>@Html.ActionLink("Songs", "Index", "Home")</li>
                <li>@Html.ActionLink("New", "About", "Home")</li>                    
            </ul>
            <div class="fb-like" data-href="abc.com" data-send="false" data-width="450" data-show-faces="false" data-colorscheme="light" data-font="arial"></div>
        </nav>
    </header> 
```

和CSS：

```
ul#menu {
    padding: 0 0 2px;
    position: relative;
    margin: 0;
    text-align: left;
    display:inline;
}

ul#menu li {
    display:inline;
    list-style: none;
}

ul#menu li#greeting {
    padding: 10px 20px;
    font-weight: bold;
    text-decoration: none;
    line-height: 2.8em;
    color: #fff;
}

ul#menu li a {
    padding: 10px 20px;
    font-weight: bold;    
    line-height: 2.8em;
    padding: 8px 15px;
    text-decoration: none;
    font-weight: bold;
    color: black;   
    float: right;
    font-size: 20px;
}

ul#menu li a:hover {
    color: #c00;
    background-color: aliceblue;
}

ul#menu li a:active {
    background-color: #a6e2a6;
    text-decoration: none;
}

ul#menu li.selected a {
    background-color: #fff;
    color: #000;
} 
```

这在 Chrome 中效果很好，在 Firefox 上效果很好，也只有 FB 之类的文字没有显示，这没什么大不了的。但在 IE 上，所有菜单链接都在左侧，这很糟糕。我尝试了很多事情，但无法解决。谁能看看我做错了什么？

![它在 IE 中的外观](../Images/c5ef8c3a6476b12b4dde7fc43e8b1fbc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T04:39:13.333

检查您的`nav`元素或`ul`元素的样式是否有错误的定位或宽度限制或您不想要的边距/填充。

如果你确实浮动了你的锚点，并且你也有非锚点（比如图像），你会想要浮动那个图像以保持它的一致性？

另外，您的标记可以非常简化，例如：

```
<nav>
  <a href="/html/">HTML</a>
  <a href="/html5/">HTML5</a>
  <a href="/css/">CSS</a>
  <a href="/css3/">CSS3</a>
  <a href="/js/">JavaScript</a>
</nav> 
```

*示例来自 www.w3schools.com/html5/tag_nav.asp*

# ruby-on-rails - Ruby state_machine gem 和状态持久性 - 我错过了什么吗？

> ID：12311213
> 
> 赞同：1
> 
> 时间：2012-09-07T03:11:01.677
> 
> 标签：ruby-on-rails, ruby, state-machine

我希望在我的一个模型中实现一个状态机，并且我一直在考虑 state_machine gem，它看起来很流行并且似乎有一个不错的、简单的 API。

无论如何，似乎没有持久化模型状态的概念，因为文档没有说明使用 ActiveRecord 或任何其他受支持的 ORM 将状态映射到数据库属性的任何方法。我希望从数据库中加载一个对象，如果需要，检查它的状态，并根据它的状态允许某些事件/转换发生。

*   我在这里完全遗漏了什么还是没有办法保持当前状态？
*   如果不是，瞬态状态如何对状态在很长一段时间内发生变化的任何持久模型有用？
*   我应该使用其他插件，更适合工作流程的插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T03:14:36.270

就文档而言，状态机库适用于任何属性，无论是使用`attr_accessor`、`@`-instance 变量还是数据库列创建的属性。`save`不过，如果进行了任何更改，您似乎有责任进行记录。

# function - Postgresql：将输入键/值对转储到 PL/pgSQL 中的字符串变量中

> ID：12311216
> 
> 赞同：2
> 
> 时间：2012-09-07T03:11:41.193
> 
> 标签：function, postgresql, input, parameters, plpgsql

我需要找到一种方法来转储 PL/pgSQL 函数输入参数的键/值对：

```
CREATE OR REPLACE FUNCTION _test(A text, B text)
...
raise info 'Params dump: %', _x;
... 
```

执行时：

```
select _text('HELLO', 'WORLD'); 
```

该函数提出如下信息：

```
'A = HELLO, B = WORLD' 
```

有没有办法将输入参数键/值对转储到变量中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:40:53.717

如果您可以使函数[`VARIADIC`](http://www.postgresql.org/docs/current/static/sql-createfunction.html)具有统一的参数类型，并且可以打印数组，那么这是可能的。您没有参数名称，因为它们没有名称，但您确实获得了参数位置。

否则不，在 PL/PgSQL 中是不可能的，尽管它应该在其他 PL 中，如 PL/Perl、PL/Python 等。

能够获得`RECORD`包含所有函数参数的 a 会非常好，因此您可以打印它，将其提供给[`hstore`](http://www.postgresql.org/docs/current/static/hstore.html)扩展等，但目前这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T12:42:23.250

转储输入参数有一种尴尬的方式：

```
create or replace function _tester(
  _txt text,
  _int int
) returns void
language 'plpgsql' as
$$
declare
  _out text = '';
  _rec record;
  _func_name text = '_tester';
begin

  for _rec in SELECT parameters.ordinal_position as _pos, parameters.parameter_name as _nm
  FROM information_schema.routines
  JOIN information_schema.parameters
  ON routines.specific_name=parameters.specific_name
  WHERE routines.routine_name = _func_name
  ORDER BY parameters.ordinal_position
  loop
    if _rec._pos = 1 then
       _out = _out || _rec._nm || ' = ' || $1::text || chr(10);
    elsif _rec._pos = 2 then
       _out = _out || _rec._nm || ' = ' || $2::text || chr(10);
    end if;
  end loop;

  raise notice '%', _out;
end;
$$;

select _tester('A','1');

NOTICE:  _txt = A
_int = 1 
```

请注意，必须添加与输入参数一样多的 if/elsif。不确定那部分是否可以更简洁。

# parsing - Erlang Bit 语法模式匹配在 shell 中工作，但不是作为传递的参数

> ID：12311225
> 
> 赞同：1
> 
> 时间：2012-09-07T03:13:18.657
> 
> 标签：parsing, syntax, erlang, udp, bit

我正在尝试制作一个简单的 UDP 数据包解码器。

```
packet_decoder(Packet)->
<<Opts:8,MobIdLength:8,MobId:64,MobIdType:8,MgeType:8,SeqNum:16,Rest/binary>> = Packet,
io:format("Options:~p~n",Opts),
io:format("MobIdLength:~p~n",MobIdLength),
io:format("MobId:~p~n",MobId),
io:format("MobIdType:~p~n",MobIdType),
io:format("MgeType:~p~n",MgeType),
io:format("SeqNum:~p~n",SeqNum). 
```

数据包由接收循环传递：

```
rcv_loop(Socket) ->
inet:setopts(Socket, [{active, once}, binary]),
io:format("rcvr started:~n"),
receive
    {udp, Socket, Host, Port, Bin} ->
        packet_decoder(Bin),
        rcv_loop(Socket)
end. 
```

我不断收到（以下错误编辑 9/7/12 9:30 EST）：

```
** exception error: no match of right hand side value 
                    <<131,8,53,134,150,4,149,0,80,15,1,2,1,2,0,16,80,71,115,
                      52,80,71,115,53,24,63,227,197,211,...>>
     in function  udp_server:packet_decoder/1
        called as udp_server:packet_decoder(<<131,8,53,134,150,4,149,0,80,15,
                                              1,2,1,2,0,16,80,71,115,52,80,71,
                                              115,53,24,63,227,197,...>>)
     in call from udp_server:rcv_loop/1 
     in call from udp_server:init/0 
```

如果我在 Erlang shell 中创建与二进制相同的变量，即

```
Packet = <<131,8,53,134,150,4,149,0,80,15,1,2,1,2,0,16,80,71,115,52,80,71,115,53,24,63,227,197,211,228,89,72,0,0,0,0,0,0,0,16,0,5,5,32,1,4,255,159,15,18,28,0,34,62,2,0,0,0,0,0,0,0,47,67>>.

<<Opts:8,MobIdLength:8,MobId:64,MobIdType:8,MgeType:8,SeqNum:16,Rest/binary>> = Packet. 
```

它工作得很好。将它传递给我缺少的函数是否有一些微妙之处？我已经尝试了我认为的一切（除了正确的方法）。我尝试设置类型和大小。我也刚试过

```
<<Rest/binary>> = Packet. 
```

无济于事。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:09:20.627

运行代码时遇到的错误与您的代码不匹配。你得到的错误：

```
** exception error: no match of right hand side value ... 
```

是一个`badmatch`错误，来自显式`=`匹配，其中模式与 RHS 中的值不匹配。`=`的代码中没有`rcv_loop/1`。这意味着您正在运行的循环不是此代码。所以有几个问题要问：

*   当您重新编译包含的模块时，您`rcv_loop/1`是否重新启动循环以便运行新代码？这不是自动完成的。
*   你确定你正在加载/运行你认为的代码吗？我知道这个问题听起来很愚蠢，但是处理一个版本的代码并加载另一个版本非常容易，而且并不少见。你需要正确的路径。

关于你的代码提到的其他事情不会给出这个错误。对 的调用`io:format/2`是错误的，但在您对 进行实际调用时会导致错误`io:format/2`。像你一样使用这个变量`Socket`并不是一个错误，它只是意味着你只想从那个套接字接收 UDP 数据包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T06:48:23.253

**编辑：我的答案的第一部分是完全错误的，所以为了不误导，我删除了它。**

就像发现的**Alexey Kachayev** io:format 将列表作为第二个参数，所以：

```
packet_decoder(Packet)->
<<Opts:8,MobIdLength:8,MobId:64,MobIdType:8,MgeType:8,SeqNum:16,Rest/binary>> = Packet,
io:format("Options:~p~n",[Opts]),
io:format("MobIdLength:~p~n",[MobIdLength]),
io:format("MobId:~p~n",[MobId]),
io:format("MobIdType:~p~n",[MobIdType]),
io:format("MgeType:~p~n",[MgeType]),
io:format("SeqNum:~p~n",[SeqNum]). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:08:12.157

我想通了（有点）。我一直在 erlide in eclipse 中进行此工作，这对所有其他部分都运行良好。我尝试从 erl shell 编译它，它工作正常。eclipse 表示源代码的方式或它调用 erlang 编译器和 shell 的方式肯定有一些细微的差别。我将与 erlide.org 一起讨论。谢谢您的帮助！

# python - Python print 语句显示不需要的字符

> ID：12311226
> 
> 赞同：0
> 
> 时间：2012-09-07T03:13:26.247
> 
> 标签：python, python-3.x, printf

我是 python 新手，在分配课程时遇到困难。

这是我的代码：

```
print ('Plants for each semicircle garden: ',round(semiPlants,0)) 
```

这是打印的内容：

```
('Plants for each semicircle garden:', 50.0) 
```

如您所见，我得到了我不想显示的括号和撇号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T03:21:55.260

当你认为你正在使用 python3.x 时，你显然在使用 python2.x。在 python 2.x 中，括号中的内容被解释为`tuple`.

一种解决方法是使用字符串格式来执行此操作：

```
print ( 'Plants for each semicircle garden: {0}'.format(round(semiPlants,0))) 
```

这将适用于 python2.6 及更高版本（单个参数周围的括号不会被解释为`tuple`。要获得 1 元组，您需要这样做`(some_object,)`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T04:17:21.797

删除括号，因为 print 是一个语句，而不是 Python 2.x 中的函数：

```
print 'Plants for each semicircle garden: ',round(semiPlants,0)

Plants for each simicircle garden:  50.0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T03:21:44.803

您已标记此问题 Python-3.x，但看起来您实际上是在使用 Python 2 运行代码。

要查看您使用的版本，请运行“python -V”。

# android - Illegal state 当媒体播放器播放完声音时出现异常，为什么？

> ID：12311232
> 
> 赞同：0
> 
> 时间：2012-09-07T03:14:44.850
> 
> 标签：android, android-mediaplayer, illegalstateexception

我正在开发简单的 android 应用程序，使用 Media Player 播放声音。它有一个按钮，触摸时会播放声音。当我触摸后退按钮时；如果声音正在播放，则必须停止。如果声音没有播放（播放完毕），它必须回到以前的活动，但现在它因非法状态异常而崩溃。先感谢您。

这是按钮的代码。

```
SoundButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            if (mp != null) {
                mp.stop();
            }
            mp = MediaPlayer.create(getApplicationContext(),
                    R.raw.p3_x1_slow);
            mp.reset();
            try {
                mp.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            mp.setOnCompletionListener(new OnCompletionListener() {
                public void onCompletion(MediaPlayer mp) {
                    // TODO Auto-generated method stub
                    mp.release();
                }
            });

            mp.start();

        }
    }); 
```

这是我检测到后退按钮的地方

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        if (mp != null || mp.isPlaying()) {
            Practice_3_detail.this.finish();
        } else if (mp == null) {
            finish();
        } else if(mp != null && mp.isPlaying()){
            //mp.pause();
            finish();
        } else
        {
            finish();
        }

    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T03:24:39.670

试试下面的代码。在完成当前活动之前，您必须停止媒体播放器并释放它的对象。

@覆盖

```
 public boolean onKeyDown(int keyCode, KeyEvent event) 
 {
        if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) 
        {
             if(mp != null)
             {
                 mp.stop();
                 mp.release();
             }
             finish();
             return true;
        }
        return super.onKeyDown(keyCode, event);
  } 
```

# iphone - 如何在 iOS 应用中及时登录 Facebook

> ID：12311236
> 
> 赞同：1
> 
> 时间：2012-09-07T03:15:06.737
> 
> 标签：iphone, ios, facebook, ipad, login

[已经查看了有关如何将 facebook 与 iOS 集成](http://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/)的 facbook 页面，但我一直在寻找的是有点不同。

我只想在用户决定共享内容时提示 Facbook 登录，FB 文档中解释的流程通过如何登录（处理来自 FB 登录的异步响应）并显示发布按钮，但我们需要的是显示“发布到FB”按钮，当用户点击时，我希望用户登录，然后去预览将要发布的内容，然后发布到FB。

我正在使用 FB SDK 和 iOS 5，困难在于如何将 FB 登录流程直接连接到 Post 流程。

谢谢埃兰戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:02:22.870

下面是我编写的一些代码。如果用户还没有从设备设置中登录 Facebook，那么只需调用 即可获得更好的用户体验`openActiveSessionWithPublishPermissions:`，它可以一步完成读取和发布权限。否则，您只需依次执行这两个权限。一旦读取权限成功，您就执行发布权限。

我使用 Facebook SDK 3.2.1 在 iOS6 和 iOS5 设备上测试了这段代码

```
- (BOOL)hasFacebookInDeviceSettings
{
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    ACAccountType *accountTypeFB = [accountStore accountTypeWithAccountTypeIdentifier:@"com.apple.facebook"];
    BOOL hasFacebookBuiltinAccount = (accountTypeFB != nil);
    return hasFacebookBuiltinAccount;
}

- (BOOL)hasLoggedInToFacebookInDeviceSettings
{
    if (![self hasFacebookInDeviceSettings]) {
        return NO;
    }
    BOOL result = [SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook];
    return result;
}

- (void)openFacebookSessionWithAllowLoginUI:(BOOL)allowLoginUI
{
    if (![self hasLoggedInToFacebookInDeviceSettings]) {
        // Simpler if we don't have the built in account
        [FBSession openActiveSessionWithPublishPermissions:@[@"publish_actions"]
                                           defaultAudience:FBSessionDefaultAudienceFriends
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session,
                                                             FBSessionState state,
                                                             NSError *error) {
                                             [self facebookSessionStateChanged:session
                                                                         state:state
                                                                         error:error];
                                         }];
    }
    else if (!FBSession.activeSession.isOpen) {
        __block BOOL recursion = NO;
        [FBSession openActiveSessionWithReadPermissions:nil
                                           allowLoginUI:allowLoginUI
                                      completionHandler:^(FBSession *session,
                                                          FBSessionState state,
                                                          NSError *error) {
                                          if (recursion) {
                                              return;
                                          }
                                          recursion = YES;
                                          if (error || !FBSession.activeSession.isOpen) {
                                              [self facebookSessionStateChanged:session
                                                                          state:state
                                                                          error:error];
                                          }
                                          else {
                                              assert(FBSession.activeSession.isOpen);
                                              if ([FBSession.activeSession.permissions indexOfObject:@"publish_actions"] == NSNotFound) {
                                                  [FBSession.activeSession requestNewPublishPermissions:@[@"publish_actions"]
                                                                                        defaultAudience:FBSessionDefaultAudienceFriends
                                                                                      completionHandler:^(FBSession *session,
                                                                                                          NSError *error) {
                                                                                          [self facebookSessionStateChanged:session
                                                                                                                      state:FBSession.activeSession.state
                                                                                                                      error:error];
                                                                                      }];
                                              }
                                          }
                                      }];
    }
} 
```

`hasFacebookInDeviceSettings`告诉您此设备是否甚至从设置中支持 Facebook（即这是 iOS6+）。

`hasLoggedInToFacebookInDeviceSettings`告诉您用户是否已从 iOS6 Facebook 设备设置登录到 Facebook。

您需要创建自己的`facebookSessionStateChanged:`代码和其他代码，如[登录教程中所述](https://developers.facebook.com/docs/howtos/ios-6/)

# javascript - 'document.writeln(something(params))' 什么都不做

> ID：12311244
> 
> 赞同：0
> 
> 时间：2012-09-07T03:16:07.167
> 
> 标签：javascript

我是 JavaScript 的新手，正在学习教科书。我写了下面的代码，并且警报模式窗口正确显示，但`document.writeln(triangle(8,5))`什么也没做。为什么？

![](../Images/fc91146e51ae1f168eb4db7734cac92c.png)

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Area of Triangle</title>
</head>
<body>
    <h1>Area of Triangle</h1>
    <pre>
        <script type="text/javascript" charset="utf-8">
            <!--

            var triangle;

            triangle = function(base, height) {
              return base * height / 2;
            };

            alert(triangle(8, 5));

            documnt.writeln(triangle(8, 5));

            -->
        </script>
    </pre>
</body>
</html> 
```

谢谢你的好意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T03:18:44.847

你拼错`document`了`documnt`。尝试：

```
document.writeln(triangle(8, 5)); 
```

# c# - DIY“解决”功能

> ID：12311251
> 
> 赞同：1
> 
> 时间：2012-09-07T03:17:12.820
> 
> 标签：c#, .net, visual-studio-2010, resolve

我想创建自己的自动“解决”功能。在 VS 中，当您右键单击并选择“解决”时，它会为您提供选项，并在选择一个时，将必要的“使用 ...”语句添加到该文件中。

我想更进一步：

1.  我想在发生更改时解析文本以查找可能需要的任何引用，而不是下划线并等待用户“解决”。
2.  我不仅要提供“使用 ...”语句，还要弄清楚在项目中要引用哪个 DLL。在 VS 中，如果您已经引用了正确的库，您只会得到“解决”。

现在，为了降低复杂性：

1.  我只关心 C#/VS/.NET 附带的内置 .NET 库。

我知道在某些情况下，甚至 .NET 类也会重叠（例如 System.Threading 和 System.Windows.Forms 中的 Timer），但它们是例外。

**所以，我的问题是，是否有一些列表/映射可以将所有 .NET 类映射到“使用 ...”语句和库引用（包括标准文件路径）？或者，有什么方法可以让我自动生成这样的列表吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T03:27:31.780

您可以寻找提供此功能的 3rd 方产品。市场上有一个很棒的产品 ReSharper，它从源代码文件（而不是编译代码）构建符号数据库，它也快速且优化。如果它已经从解决方案中的其他项目知道此程序集，它确实允许您解析符号并添加对程序集的引用。我相信它不是唯一的产品。

从系统程序集中构建类列表并不难。只需从标准安装中创建系统程序集列表，加载每个程序集并创建公共类列表。查看 System.Reflection.Assembly 方法，例如 Load() 和 GetTypes()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T03:23:19.527

我认为您可以列出 GAC 中的 DLL，并使用反射列出每个 DLL 的所有公共类。

通过这种方式，您可以创建一个映射，并确定要添加哪个引用以及要添加哪个 using 语句。

# php - fopen() 无法打开流：权限被拒绝，但权限应该是有效的

> ID：12311256
> 
> 赞同：9
> 
> 时间：2012-09-07T03:18:08.150
> 
> 标签：php, linux, permissions, io, fopen

所以，我有这个错误：

```
Warning: fopen(/path/to/test-in.txt) [function.fopen]: failed to open stream: Permission denied 
```

`ls -l`在 is所在的目录中执行`test-in.txt`会产生以下输出：

```
-rw-r--r-- 1 $USER $USER 1921 Sep  6 20:09 test-in.txt
-rw-r--r-- 1 $USER $USER    0 Sep  6 20:08 test-out.txt 
```

为了克服这个问题，我决定执行以下操作：

```
chgrp -R www-data /path/to/php/webroot 
```

然后做了：

`chmod g+rw /path/to/php/webroot`

然而，当我运行我的 php5 脚本打开文件时，我仍然得到这个错误。为什么会这样？我已经通过 CGI 使用 LAMP 和 cherokee 尝试过这个，所以不可能是这样。

有某种解决方案吗？

**编辑**

我还要补充一点，我现在只是通过 localhost 进行开发。

**更新 - PHP`fopen()`行**

```
$fullpath = $this->fileRoot . $this->fileInData['fileName'];

$file_ptr = fopen( $fullpath, 'r+' ); 
```

我还应该提到，如果可能的话，我想坚持使用 Cherokee。为 Apache/Cherokee 设置文件权限有什么意义？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T03:26:53.367

检查运行 PHP 的用户是否对文件路径的每个目录都具有“X”权限。
它将需要它来访问文件

如果您的文件是：`/path/to/test-in.txt`
您应该对以下内容拥有 X 权限：

*   `/path`
*   `/path/to`

并阅读权限`/path/to/test-in.txt`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-16T09:46:52.997

此错误的另一个原因可能是文件目录不存在。

我只是在 fopen 之前添加 php 代码：

```
if(!file_exists(dirname($file))) 
    mkdir(dirname($file)); 
```

这帮帮我。

# python - python中的水平图

> ID：12311262
> 
> 赞同：4
> 
> 时间：2012-09-07T03:19:24.747
> 
> 标签：python, matplotlib, orientation

我正在寻找一个顺时针方向旋转 90 度的图。这种图的一个类似例子是“hist(x,orientation='horizo​​ntal')”。有什么方法可以实现类似的方向。

```
#Make horizontal plots.
import random
import matplotlib.pyplot as plt
x = random.sample(range(1000), 100)
x
plt.plot(x) #orientation='horizontal'
plt.show() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T05:21:47.400

`plt.plot(x)`根据 y 轴自动绘制 x 值。为了获得旋转图，您必须根据 x 轴绘制 x 值。因此，您需要为 y 轴制作一个向量，该向量的长度与您的样本相同。

```
import random
import matplotlib.pyplot as plt
import numpy as np

x=random.sample(1000)
y=np.arange(1000)
plt.plot(x,y) 
```

使用`plt.plot(x)`，matplotlib 将您的 x 值作为其 y 值并自动为 x 轴生成一个向量。

# java - 在 Eclipse 中运行 Junit 测试，不断收到“NoClassDefFoundError”

> ID：12311263
> 
> 赞同：3
> 
> 时间：2012-09-07T03:19:25.863
> 
> 标签：java, eclipse, unit-testing, junit, noclassdeffounderror

我添加了一个新的测试类。并尝试运行它，但得到 no class def found 错误。但其他测试类工作正常。而且我确信新的测试类已经编译，它的 .class 文件在正确的文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T03:47:02.877

问题中没有足够的信息来提供真正的答案。

调试的第一步是查看 .class 文件是否真的在类路径中，执行类似的操作，

```
Class c = SomeClass.class;
System.out.println(c.getResource(c.getSimpleName() + ".class")); 
```

如果您打印非 null 的内容，则 .class 文件位于类路径中。

第二步是确保 NoClassDefFoundError 确实是因为您正在加载的类不存在而导致的。使用[Eclipse 异常断点](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/views/breakpoints/ref-addexception_viewaction.htm)来中断 NoClassDefFoundError，并查看它真正尝试加载的类。可能是 X 类需要 Y 类才能加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T10:49:34.840

通过右键单击项目解决问题，然后选择 maven->更新项目配置。

但我仍然不知道什么时候出错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:13:11.563

如果类文件在编译时存在，但在运行时不可用，则会收到 NoClassDefFoundError。所以我的建议是检查你的类路径，也许新测试缺少一个库或其他东西。

# c# - 使用 Outlook 对象模型的邮件项目的发件人邮件地址

> ID：12311264
> 
> 赞同：1
> 
> 时间：2012-09-07T03:19:33.963
> 
> 标签：c#, outlook

1.  如何查看单个或一组邮件的发件人邮件地址？
2.  即使未打开Outlook，Outlook插件是否也可以验证？

这是我迄今为止尝试过但无法获取 SMTP 邮件地址的方法......

```
Outlook.NameSpace mnmspc;
Outlook.MAPIFolder inBox;  
Outlook.Items mitems;  

mnmspc = Application.GetNamespace("MAPI");  
inBox = mnmspc.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderInbox);  
mitems = inBox.Items;  
foreach (Outlook.MailItem i in mitems) { .... } 
```

提前致谢。

阿米特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T06:25:42.647

使用 MailItem 上的[SenderName](http://msdn.microsoft.com/en-us/library/office/aa171985%28v=office.11%29.aspx)、[SenderEmailAddress](http://msdn.microsoft.com/en-us/library/office/aa171942%28v=office.11%29.aspx)和[SenderEmailType](http://msdn.microsoft.com/en-us/library/office/aa171944%28v=office.11%29.aspx)（例如交换或 SMTP）属性来获取有关发件人的信息。不幸的是，调用 Outlook API 确实会打开 Outlook。

# forms - Internet Explorer 和 post_max_size

> ID：12311267
> 
> 赞同：0
> 
> 时间：2012-09-07T03:20:08.110
> 
> 标签：forms, file-upload, internet-explorer-9, php

IE9 有问题，去看看...我尝试上传文件，虽然 post_max_size 设置为 30M，但当我在 Firefox 中提醒 php 调用 ini_get('post_max_size') 的结果时，在 Internet Explorer 中显示它设置为8M……？？？我讨厌 Internet Explorer，但我必须以某种方式让它工作。任何人都可以对可能发生的事情提供任何答案吗？我认为不需要发布代码，但是如果您需要任何东西，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T11:20:49.173

post_max_size 的问题至少与 godaddy.com 相关，是您必须将 php.ini 文件命名为 php5.ini；此外，如果您导入 php.ini 文件并在托管服务器中更改它的名称，则 .ini 文件夹中名为 session.save_path 的部分可能会为您的会话读取错误的 tmp 位置，因此您必须创建自己的安全文件系统中的目录或找出应该存储它们的位置并输入该路径。希望这可以帮助那里的人。

# javascript - 如何将 div 值传递给 window.open？

> ID：12311268
> 
> 赞同：3
> 
> 时间：2012-09-07T03:20:11.873
> 
> 标签：javascript, popup

我正在尝试将 a 传递`DIV`给新窗口。

### JavaScript

```
function openWin() {
    myWindow=window.open('','','width=200,height=100');
} 
```

### HTML

```
<div id="pass">pass this to the new window</div>
<a href="#" onclick="openWin();">click</a> 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-07T03:25:14.757

我想你想要这个：

```
var divText = document.getElementById("pass").outerHTML;
var myWindow = window.open('','','width=200,height=100');
var doc = myWindow.document;
doc.open();
doc.write(divText);
doc.close(); 
```

（[在 jsfiddle.net 上的演示](http://jsfiddle.net/KZYJU/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-14T05:28:29.473

它对我有用

```
var divText = document.getElementById("id").outerHTML;
    var myWindow = window.open('','','width=200,height=100');
    var doc = myWindow.document;
    doc.open();
    doc.write(divText);
    doc.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T03:22:52.497

将 div 的 id 传递给函数。

```
 function openWin(id) {
     var divText = document.getElementById(id).innerHTML;
     myWindow=window.open('','','width=200,height=100');
 }

 <div id="pass">pass this to the new window</div>
 <a href="#" onclick="openWin('pass')" />click</a> 
```

# string - 方法不返回字符串

> ID：12311269
> 
> 赞同：0
> 
> 时间：2012-09-07T03:20:18.610
> 
> 标签：string, methods

我正在编写一个方法，该方法为某个标记的输入返回一个字符串。它被赋予一个标记，然后确定该标记适合的等级。但它给了我这个错误：

private String getGrade(int mark) throws Exception{ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 这个方法必须返回字符串类型的结果

代码是：

```
String a = "A, Well done!";
String b = "B, still room for improvement.";
String c = "C, need to improve a lot!";
String d = "D, you got lucky!";
String e = "You failed, please retake the test!";

if (marks>80 || marks==80){
return a;
} else if (marks>70 && marks<80 || marks==70){
return b;
}else if (marks>60 && marks<70 || marks==60){
return c;
} else if (marks>=50 && marks <60){
return d;
}else if (marks<50){
return e;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T03:29:16.273

看起来你最后需要一个“其他”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T03:30:16.100

```
String a = "A, Well done!";
String b = "B, still room for improvement.";
String c = "C, need to improve a lot!";
String d = "D, you got lucky!";
String e = "You failed, please retake the test!";

if (marks>80 || marks==80){
return a;
} else if (marks>70 && marks<80 || marks==70){
return b;
}else if (marks>60 && marks<70 || marks==60){
return c;
} else if (marks>=50 && marks <60){
return d;
}else{
return e;
} 
```

正如你`t return a value if`所做的那样 if (marks<50)` 语句失败，虽然我们知道这里没有失败的可能性，但程序以这种方式运行只能像我一样使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T03:37:12.343

你必须在这里放出else并返回一个字符串值，否则语句将不会执行。试试看，希望对你有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T03:28:44.353

编译器不会尝试足够聪明地评估所有可能的情况并确保您始终在条件的所有分支中返回一个字符串。您还需要有一个没有返回默认值（即字符串）的`else`子句。`if`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T04:36:51.207

你可以试试这个，它可能对你有帮助。

```
String a = "A, Well done!";
String b = "B, still room for improvement.";
String c = "C, need to improve a lot!";
String d = "D, you got lucky!";
String e = "You failed, please retake the test!";

if (marks>=80){
return a;
} else if (marks>=70) {
return b;
} else if (marks>=60){
return c;
} else if (marks>=50){
return d;
} else {
return e;
} 
```

**或者**

```
String a = "A, Well done!";
String b = "B, still room for improvement.";
String c = "C, need to improve a lot!";
String d = "D, you got lucky!";
String e = "You failed, please retake the test!";
String r=""

if (marks>=80){
r=a;
} else if (marks>=70) {
r=b;
} else if (marks>=60){
r=c;
} else if (marks>=50){
r=d;
} else {
r=e;
}

return r; 
```

我希望第二个很好，因为它总是有返回路径并向调用者返回一些东西。

# excel - IF公式将日期与当前日期进行比较并返回结果

> ID：12311270
> 
> 赞同：8
> 
> 时间：2012-09-07T03:20:32.707
> 
> 标签：excel, date, if-statement, compare

我正在寻找一个公式，它允许我查看一个单元格并检查它是否大于或等于今天的日期并返回一个措辞结果，例如“逾期”。如果为空则返回另一个单词，或者什么都没有。

我尝试将源单元格 ( `O10`) 中的结果复制到另一个单元格 ( `Y10`) 并使用 if 语句，但这似乎过于费力 - 必须有一种方法可以从源单元格中读取信息吗？见下文。当单元格为空白时，它也会返回过期:(

```
=IF(O10>Y10,"OVERDUE","NOT DUE") 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-07T03:31:48.620

您可以在要查看`Overdue`或`Not due`结果的单元格中输入以下公式：

```
=IF(ISBLANK(O10),"",IF(O10<TODAY(),"Overdue","Not due")) 
```

此公式首先测试源单元格是否为空白。如果是，则结果单元格将填充空字符串。如果源不是空白，则公式会测试源单元格中的日期是否早于当天。如果是，则将值设置为`Overdue`，否则将其设置为`Not due`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-01T21:56:09.830

我认为这将涵盖 O10 中的任何可能情况：

`=IF(ISBLANK(O10),"",IF(O10<TODAY(),IF(TODAY()-O10<>1,CONCATENATE("Due in ",TEXT(TODAY()-O10,"d")," days"),CONCATENATE("Due in ",TEXT(TODAY()-O10,"d")," day")),IF(O10=TODAY(),"Due Today","Overdue")))`

对于今天之前的日期，它将告诉您该项目的到期天数。如果 O10 = 今天，那么它将显示“今天到期”。今天过去的任何事情都会过期。最后，如果它是空白的，则单元格也将显示为空白。让我知道你的想法！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-16T23:32:57.847

布莱克提供的公式似乎对我不起作用。对于过去的日期，它会在 xx 天后返回，而对于未来的日期，它会过期返回。此外，它只会逾期 15 天返回，而实际上它可能是 30、60 90+。

我创建了这个，它似乎工作并提供“在 xx 天内到期”、“逾期 xx 天”和“今天到期”。

```
=IF(ISBLANK(O10),"",IF(DAYS(TODAY(),O10)<0,CONCATENATE("Due in ",-DAYS(TODAY(),O10)," Days"),IF(DAYS(TODAY(),O10)>0,CONCATENATE("Overdue ",DAYS(TODAY(),O10)," Days"),"Due Today"))) 
```

# apache-flex - flex 4树控件不更新

> ID：12311273
> 
> 赞同：1
> 
> 时间：2012-09-07T03:20:57.563
> 
> 标签：apache-flex, tree, arraycollection

我在 Flex 4.6 中使用 MX Tree 控件。它的数据提供者是一个嵌套的 ArrayCollection。控件的工作方式是，当树节点展开时，事件会冒泡到另一个组件，该组件检测事件并从服务器获取数据并更新 ArrayCollection（即单击分支的 ArrayCollection）。但是在我关闭特定分支并再次展开它之前，更新的数据不会显示在树中。

例如

*   + 文件夹 1
*   + 文件夹 2
*   + 文件夹 3

最初，当用户展开文件夹 1 时，文件夹 1 的子项是一个空的 ArrayCollection，从后端获取数据并添加到子项 ArrayCollection。但这不会显示文件夹 1 下的子项。如果我关闭文件夹 1 并再次打开它，它会显示出来。我认为当数据添加到 ArrayCollection 时，它应该更新显示。有人可以让我知道我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:59:58.547

根据我的经验，以下内容可以通知 Tree 控件其列表需要重绘：

*   arrayCollection.refresh();
*   tree.invalidateList();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T02:04:10.383

我找到了问题的解决方案。当任何子 ArrayCollection 类更新时，我需要在主 ArrayCollection 类上调用 itemupdated。这会正确更新视图。因此，在上面的示例中，如果用户单击文件夹 2，事件将传播到一个模型，该模型将数据添加到文件夹 2 的子数组集合中，一旦完成，我应该在我的主 ArrayCollection 上调用 itemupdated，并将更新的项目作为文件夹 2 ，这正确更新了树视图。

# magento - 我收到错误：Abstract.php 中的 getResourceHelper

> ID：12311275
> 
> 赞同：-1
> 
> 时间：2012-09-07T03:21:11.110
> 
> 标签：magento, magento-1.4, magento-1.6

当我尝试从 1.4x 升级到 1.6x 时，我遇到了一个错误 magento，我是在 localhost 中完成的，我将文件夹皮肤、媒体、应用程序从服务器中的旧 magento 复制到 localhost 中的新 magento，n 转储 sql，这个是错误..

> 致命错误：在第 533 行调用 C:\Ampps\www\magento\app\code\core\Mage\Core\Model\Resource\Db\Collection\Abstract.php 中未定义的方法 Mage::getResourceHelper()

帮助伙计们！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T06:39:52.637

当您说您复制了应用程序文件夹时-您是否也复制了应用程序/代码？如果是这样，我敢打赌这就是你的问题所在。

您刚刚将所有 1.4 代码复制到 1.6 内容之上，因此肯定会出现错误。

你应该复制：

*   /皮肤/
*   /应用程序/设计/
*   /app/etc/local.xml
*   /应用程序/等/模块/
*   /媒体/
*   /app/code/local/ （如果你有任何东西在这里）
*   /app/code/community/（如果您已安装任何 3rd 方模块）

复制文件时，我建议您不要覆盖现有文件。只要您的主题设置正确（例如，您不仅编辑了内置主题），并且您的代码以正确的方式编写（将核心文件复制到本地，或编写自己的扩展），这应该没事。

如果您确实有任何本地代码，则可能需要对其进行修改才能使其在较新版本的 Magento 上运行。1.4 和 1.6 之间有很多变化（然后是 1.7，我建议您升级到）。

数据库结构也可能在这些版本之间发生了变化（我无法确认），所以我还要小心，只是碰撞和导入 MySQL 数据库可能会给您带来问题（它可能有效，但可能无效！）。

# javascript - 谷歌地图和地理编码

> ID：12311276
> 
> 赞同：0
> 
> 时间：2012-09-07T03:21:23.563
> 
> 标签：javascript, maps, geocode

我昨天开始玩 Google Maps API，非常有趣..

虽然有一个小问题..我正在尝试制作一个使用地理编码的搜索功能。由于某种原因，它不会将地图移动到检索到的搜索结果区域。我知道它可以很好地检索坐标，我添加了一个`alert();`可以很好地显示它们的坐标。

现场演示：[http ://teknologix.net/test.html](http://teknologix.net/test.html)

我怀疑它与`initialize()`函数中定义的映射变量有关。不过，我不是 100% 确定：

```
<!DOCTYPE html>

<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyB4iGeXYKfqv65-8c9UbR1qPavZb6VFXCU&sensor=false"></script>
<script type="text/javascript">
var geocoder = new google.maps.Geocoder();
var map;

function geocodePosition(pos) {
  geocoder.geocode({
    latLng: pos
  }, function(responses) {
    if (responses && responses.length > 0) {
      updateMarkerAddress(responses[0].formatted_address);
    } else {
      updateMarkerAddress('Cannot determine address at this location.');
    }
  });
}

function updateMarkerStatus(str) {
  document.getElementById('markerStatus').innerHTML = str;
}

function updateMarkerPosition(latLng) {
  document.getElementById('info').innerHTML = [
    latLng.lat(),
    latLng.lng()
  ].join(', ');
}

function updateMarkerAddress(str) {
  document.getElementById('address').innerHTML = str;
}

function initialize() {
  var latLng = new google.maps.LatLng(-33.90616588876475, 151.15102333450318);
  var map = new google.maps.Map(document.getElementById('mapCanvas'), {
    zoom: 15,
    center: latLng,
    disableDefaultUI: true,
    zoomControl: true,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });

  var marker = new google.maps.Marker({
    position: latLng,
    title: 'Point A',
    map: map,
    draggable: true
  });

  // Update current position info.
  updateMarkerPosition(latLng);
  geocodePosition(latLng);

  // Add dragging event listeners.
  google.maps.event.addListener(marker, 'dragstart', function() {
    updateMarkerAddress('Dragging...');
  });

  google.maps.event.addListener(marker, 'drag', function() {
    updateMarkerStatus('Dragging...');
    updateMarkerPosition(marker.getPosition());
  });

  google.maps.event.addListener(marker, 'dragend', function() {
    updateMarkerStatus('Drag ended');
    geocodePosition(marker.getPosition());
    map.panTo(marker.getPosition());
  });

  google.maps.event.addListener(map, 'bounds_changed', function() {
    marker.setPosition(map.getCenter());
    updateMarkerPosition(marker.getPosition());
  });
}

function codeAddress() {
    var address2 = document.getElementById('target').value;
    geocoder.geocode( { 'address': address2}, function(results) {
            alert(results[0].geometry.location);
            map.setCenter(results[0].geometry.location);
    });
}

google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>
<body>
  <style>
   html { height: 100% }
   body { height: 100%; margin: 0; padding: 0 }
  #mapCanvas {
    height: 85%;
    width: 100%;
    position: relative;
  }
  #infoPanel div {
    background: white;
    top: 0px;
    position: relative;
    height: 20px;
    width: 500px;
  }
  </style>

  <div id="mapCanvas"></div>
  <div id="infoPanel">
    <b>Marker status:</b>
    <div id="markerStatus"><i>Click and drag the marker.</i></div>
    <b>Current position:</b>
    <div id="info"></div>
    <b>Closest matching address:</b>
    <div id="address"></div>
  </div>
  <div>
      <input id="target" type="textbox" value="Sydney, NSW">
      <input type="button" value="Geocode" onclick="codeAddress();">
      <input type="button" value="Test" onclick="test();">
  </div>
</body>
</html> 
```

任何帮助将不胜感激！感谢您的阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:11:28.430

首先要尝试的是更改`initialize()`函数，这样您就不会`map`在该函数的范围内重新声明变量。换句话说，更改`var map = ...`为`map = ...`，这将设置全局`map`变量的值。

# java - 从类中运行主类？

> ID：12311287
> 
> 赞同：-1
> 
> 时间：2012-09-07T03:23:29.547
> 
> 标签：java, netbeans

![在此处输入图像描述](../Images/e7afeed609f5fc0598ac0002b0f318b0.png)

你好呀，

如何通过设置配置从 netbeans 运行 main() 方法？

编辑：我的 VMach 是一个 .class 文件，我该如何运行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T03:35:55.300

设置主类：右键单击项目>运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T03:39:15.597

看看[这个](http://netbeans.org/kb/docs/java/quickstart.html)。我认为一点谷歌搜索会帮助你。以及在 Youtube 上观看视频以使用 IDE。还阅读和研究您正在使用的 IDE。无需在 SO 上发布问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T03:38:47.967

假设您已正确设置主项目，只需按 F6

# android - Android 4.0 ImageView setImageBitmap 不起作用

> ID：12311288
> 
> 赞同：4
> 
> 时间：2012-09-07T03:23:30.250
> 
> 标签：android, imageview

我用 ffmpeg 开发了一个应用程序来解码媒体帧。我用解码结果填充了一个 Bitmap 对象，并使用 ImageView.setImageBitmap 来显示位图。在 Android 2.3 中它运行良好，但在 Android 4.0 或更高版本中它不起作用。代码很简单：

```
imgVedio.setImageBitmap(bitmapCache);//FIXME:in 4.0 it displays nothing 
```

然后我尝试将位图写入文件并重新加载文件以显示。

```
String fileName = "/mnt/sdcard/myImage/video.jpg";
FileOutputStream b = null;
try 
{
    b = new FileOutputStream(fileName);
    bitmapCache.compress(Bitmap.CompressFormat.JPEG, 100, b);// write data to file
} 
catch (FileNotFoundException e) 
{
    e.printStackTrace();
} finally 
{
    try 
    {
        if(b != null)
        {
            b.flush();
            b.close();
        }
    }
    catch (IOException e) 
    {
        e.printStackTrace();
    }
}
Bitmap bitmap = BitmapFactory.decodeFile(fileName);
imgVedio.setImageBitmap(bitmap); 
```

它可以工作，但是性能太差了。那么有人可以帮我解决问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-15T07:22:08.503

我认为这是一个内存不足的问题，您可以使用以下方法修复它：

```
private Bitmap loadImage(String imgPath) {
    BitmapFactory.Options options;
    try {
        options = new BitmapFactory.Options();
        options.inSampleSize = 2;
        Bitmap bitmap = BitmapFactory.decodeFile(imgPath, options);
        return bitmap;
    } catch(Exception e) {
        e.printStackTrace();
    }
    return null;
} 
```

“inSampleSize”选项将返回较小的图像并节省内存。您可以在 ImageView.setImageBitmap 中调用它：

```
imgVedio.setImageBitmap(loadImage(IMAGE_PATH)); 
```

# jquery - 部分回发后jQuery重置按键计数

> ID：12311289
> 
> 赞同：2
> 
> 时间：2012-09-07T03:23:34.463
> 
> 标签：jquery, asp.net

我有一个`TextBox`asp.net 内部，`UpdatePanel`它用一些 jquery 记录按键的次数

```
$(document).on("keypress", "#TextBox",function()   {
    $("#KeyPressCount").val(i += 1);
}); 
```

在 UpdatePanel 内单击按钮后，我进行了部分回发，jquery 按预期重新绑定并继续计算按键次数。

现在，如果我想在部分回发后重置计数，我将如何去做？

因此，如果它计算了 20 次按键，则发生回发，它将重置为 0 并重新开始计数。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T03:26:31.870

你可以这样做

```
$(document).on("keypress", "#TextBox",function()   { 
    var $keypress = $("#KeyPressCount");
    // if i==20 the set it to 0 or else add 1       
    $keypress.val($keypress.val() >= 20 ? 0 : $keypress.val() += 1);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T03:28:27.553

```
var keyPresses = 0;

$(document).on("keypress", "#TextBox",function()   {
    $("#KeyPressCount").val(keyPresses += 1);
}); 
```

现在您需要做的就是在执行回发的函数中将 keyPresses 的值更新为 0。

# ruby - Sinatra：User.first 方法

> ID：12311298
> 
> 赞同：0
> 
> 时间：2012-09-07T03:24:19.333
> 
> 标签：ruby, sinatra

我正在阅读一本使用 Sinatra 制作 Twitter 克隆的书，以提高我对 Ruby 的了解。我对作者的使用感到困惑

```
User.first(:nickname => params[:recipient]) 
```

他在整个代码中的多个位置使用它，如下例所示。

```
post '/message/send' do
recipient = User.first(:nickname => params[:recipient])
Status.create(:text => params[:message], :user => User.
get(session[:userid]), :recipient => recipient)
redirect '/messages/sent'
end 
```

究竟是什么“第一”添加到这个方法。例如，它是在搜索第一个使用昵称作为参数传入的用户：recipient？换句话说，它是否等同于“查找”？

我应该补充一点，这也让我感到困惑，因为昵称应该是唯一的，所以如果它确实在做的话，它没有理由需要搜索“第一个”。

**更新**

作者正在为 ORM 使用 DataMapper

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T03:46:33.123

好的，'first' 是一个'finds' 的数据映射器方法。从文档

```
zoo  = Zoo.first(:name => 'Metro')    # first matching record with the name 'Metro' 
```

# jquery - 孩子的 Z 指数没有按预期工作

> ID：12311302
> 
> 赞同：0
> 
> 时间：2012-09-07T03:24:40.727
> 
> 标签：jquery, css, z-index

也许这只是漫长的一天，但我不知道我在哪里搞砸了。本质上，黑框应该隐藏在父对象后面，然后滑出（预期的想法是，当输入更改时，它会滑出一个保存按钮供用户单击）。为了不担心触发它的原因，我只是放了一个按钮来执行滑出动作。但是 .configSave 框如何不隐藏在具有正确 z-index 设置的父级后面。

这是要查看的jsfiddle：

[http://jsfiddle.net/qBuyG/2/](http://jsfiddle.net/qBuyG/2/)

谢谢。

-赛斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T03:40:14.750

干得好：

[http://jsfiddle.net/hmartiro/qBuyG/13/](http://jsfiddle.net/hmartiro/qBuyG/13/)

我将要隐藏的元素的 z-index 设置为 -1，并删除了另一个 z-index。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T03:43:05.350

`z-index`总是相对于最近的显式定位元素；每个这样的元素都会创建自己的层。

如果你想把`#configSave`它的父级隐藏起来`#configBox`，你需要给它分配一个`z-index`of `-1`。的or`z-index`则无关紧要。（[演示](http://jsfiddle.net/qBuyG/15/)）`#boxostuff``#configBox`

如果你想隐藏`#configSave`在 (currently transparent) 后面`#boxostuff`，你需要给它分配一个`z-index`比那个更低的值——同样，`z-index`of`#configBox`无关紧要。（[演示](http://jsfiddle.net/qBuyG/17/)，[带背景](http://jsfiddle.net/qBuyG/19/)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T03:38:23.703

我找不到让它像你一样工作的方法。你能把链接从盒子里拿出来吗？如果它不在盒子里面，它就可以工作，它需要在后面。

# php - 将重定向 URL 链接添加到 JS 函数

> ID：12311303
> 
> 赞同：0
> 
> 时间：2012-09-07T03:25:03.867
> 
> 标签：php, javascript

如何在下面的代码中添加重定向 URL 链接到 JS 函数（示例表单操作到：session.php）。我尝试了另一种方式代码，但它仍然无法运行。

```
$(document).ready(function() {
    $("#submit_butt").click(function() {
        var conf = {
            frequency: 5000,
            spread: 5,
            duration: 600
        };
        /* do your AJAX call and processing here...
        ....
        ....
        */
        // this is the call we make when the AJAX callback function indicates a login failure 
        $("#login").vibrate(conf);

        // let's also display a notification
        if($("#errormsg").text() == "")
            $("#loginform").append('<p id="errormsg">Invalid username or password!</p>');       

        // clear the fields to discourage brute forcing :)
        $("#password").val("");
        document.forms['login_form'].elements['username'].focus();
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T03:46:12.863

你可以试试这个

```
// similar behavior as an HTTP redirect
window.location.replace("http://stackoverflow.com");

// similar behavior as clicking on a link
window.location.href = "http://stackoverflow.com"; 
```

[https://developer.mozilla.org/en-US/docs/DOM/window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)

参考：[如何在 JavaScript/jQuery 中重定向到另一个网页？](https://stackoverflow.com/questions/503093/how-can-i-make-a-redirect-page-in-jquery-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T04:46:19.553

你可以用这个..

```
window.location.href = "http://www.google.com"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T04:35:06.933

你可以试试

```
 <script>
 function name(){
    window.location ='abc.php';
 }
 </script> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-07T03:33:30.263

你可以通过在你的 javascript 中闯入 php 代码

```
$(document).ready(function()
{

    <?php 
       someFunction();
    ?>
}); 
```

但前提是您的 javascript 在 php 文件中，以便它可以由 php 处理。因此，如果您链​​接到需要更改为 .php 的 .js 文件

# ruby-on-rails - 使用 less (2.2.1) 会引发需要 therubyracer 的错误（无法在 Windows 上安装 therubyracer）

> ID：12311306
> 
> 赞同：8
> 
> 时间：2012-09-07T03:26:08.910
> 
> 标签：ruby-on-rails, less, twitter-bootstrap-rails, therubyracer

我一直在努力让 twitter-bootstrap-rails gem 在我的 Windows 机器上运行，并在尝试安装“therubyracer”gem 时遇到错误，这是旧版本的 less gem 的依赖项。

我认为升级到不依赖于 therubyracer 的 less 2.2.1 但是尽管如此，它似乎认为我仍然需要安装 therubyracer。这是我尝试启动 Rails 服务器“rails s”时得到的错误输出。

```
$ rails s
[WARNING] Please install gem 'therubyracer' to use Less.
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require': cannot load such file -- v8 (LoadError)
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/less-2.2.2/lib/less/java_script/v8_context.rb:2:in `<top (required)>'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/less-2.2.2/lib/less/java_script.rb:9:in `default_context_wrapper'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/less-2.2.2/lib/less/java_script.rb:17:in `context_wrapper'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/less-2.2.2/lib/less/loader.rb:10:in `initialize'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/less-2.2.2/lib/less.rb:14:in `new'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/less-2.2.2/lib/less.rb:14:in `<module:Less>'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/less-2.2.2/lib/less.rb:9:in `<top (required)>'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/less-rails-2.2.3/lib/less/rails.rb:6:in `<top (required)>'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/less-rails-2.2.3/lib/less-rails.rb:1:in `<top (required)>'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/twitter-bootstrap-rails-2.1.2/lib/twitter-bootstrap-rails.rb:9:in `<top (required)>'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:68:in `require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:66:in `each'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:66:in `block in require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:55:in `each'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:55:in `require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler.rb:122:in `require'
    from C:/Sites/alliance/config/application.rb:9:in `<top (required)>'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:53:in `require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:53:in `block in <top (required)>'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

这是我的`Gemfile`和`Gemfile.lock`文件。谁能帮我弄清楚如何告诉我的应用它不需要安装“therubyracer”？

---- `Gemfile`----

```
source 'https://rubygems.org'

gem 'rails',   '~> 3.2.3'
gem 'jquery-rails'
gem 'haml-rails'
gem 'simple_form'
gem 'decent_exposure'
gem "devise", :git => "git://github.com/plataformatec/devise.git"
gem 'cancan'
gem 'prawn'
gem 'ransack'
gem 'eventmachine', '= 1.0.0.rc.4'
gem 'therubyracer', :platforms => :ruby

group :assets do
  gem 'execjs'
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'bootstrap-sass'
  gem 'twitter-bootstrap-rails' 
  gem 'uglifier', '>= 1.0.3'
end

group :development, :test do
  gem 'debugger'
  gem 'rails_best_practices'
  gem 'factory_girl_rails', '~> 2.0'
  gem 'sqlite3'
  gem 'simplecov', require: false
  gem 'rspec-rails'
  gem 'rspec-instafail'
  gem 'rspec-steps'
  gem 'factory_girl_rails', '~> 2.0'
  gem "capybara"
  gem "selenium-webdriver"
  gem 'launchy' # provides save_and_open_page
  gem 'fuubar'

  gem 'database_cleaner'
  gem 'rantly'
  gem 'heroku'
  gem 'rb-fsevent' #, :require => false if RUBY_PLATFORM =~ /darwin/i
  gem 'guard-rspec'
end

group :production do
  gem 'mysql2'
  gem 'thin'
  gem 'pg'
end 
```

---- `Gemfile.lock`----

```
GIT
  remote: git://github.com/plataformatec/devise.git
  revision: f7dd59839cd39ed3c57948d37e8a95c697c14647
  specs:
    devise (2.1.2)
      bcrypt-ruby (~> 3.0)
      orm_adapter (~> 0.1)
      railties (~> 3.1)
      warden (~> 1.2.1)

GEM
  remote: https://rubygems.org/
  specs:
    Ascii85 (1.0.1)
    actionmailer (3.2.8)
      actionpack (= 3.2.8)
      mail (~> 2.4.4)
    actionpack (3.2.8)
      activemodel (= 3.2.8)
      activesupport (= 3.2.8)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.4)
      rack (~> 1.4.0)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.1.3)
    activemodel (3.2.8)
      activesupport (= 3.2.8)
      builder (~> 3.0.0)
    activerecord (3.2.8)
      activemodel (= 3.2.8)
      activesupport (= 3.2.8)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activeresource (3.2.8)
      activemodel (= 3.2.8)
      activesupport (= 3.2.8)
    activesupport (3.2.8)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    addressable (2.3.2)
    arel (3.0.2)
    awesome_print (1.0.2)
    bcrypt-ruby (3.0.1-x86-mingw32)
    bootstrap-sass (2.1.0.0)
    builder (3.0.1)
    cancan (1.6.8)
    capybara (1.1.2)
      mime-types (>= 1.16)
      nokogiri (>= 1.3.3)
      rack (>= 1.0.0)
      rack-test (>= 0.5.4)
      selenium-webdriver (~> 2.0)
      xpath (~> 0.1.4)
    childprocess (0.3.5)
      ffi (~> 1.0, >= 1.0.6)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.3.3)
    colored (1.2)
    columnize (0.3.6)
    commonjs (0.2.6)
    daemons (1.1.9)
    database_cleaner (0.8.0)
    debugger (1.2.0)
      columnize (>= 0.3.1)
      debugger-linecache (~> 1.1.1)
      debugger-ruby_core_source (~> 1.1.3)
    debugger-linecache (1.1.2)
      debugger-ruby_core_source (>= 1.1.1)
    debugger-ruby_core_source (1.1.3)
    decent_exposure (1.0.2)
    diff-lcs (1.1.3)
    erubis (2.7.0)
    eventmachine (1.0.0.rc.4-x86-mingw32)
    excon (0.16.2)
    execjs (1.4.0)
      multi_json (~> 1.0)
    factory_girl (3.0.0)
      activesupport (>= 3.0.0)
    factory_girl_rails (2.0.0)
      factory_girl (~> 3.0.0)
      railties (>= 3.0.0)
    ffi (1.1.5)
    fuubar (1.0.0)
      rspec (~> 2.0)
      rspec-instafail (~> 0.2.0)
      ruby-progressbar (~> 0.0.10)
    guard (1.3.2)
      listen (>= 0.4.2)
      thor (>= 0.14.6)
    guard-rspec (1.2.1)
      guard (>= 1.1)
    haml (3.1.7)
    haml-rails (0.3.4)
      actionpack (~> 3.0)
      activesupport (~> 3.0)
      haml (~> 3.0)
      railties (~> 3.0)
    hashery (2.0.1)
    heroku (2.31.2)
      heroku-api (~> 0.3.4)
      launchy (>= 0.3.2)
      netrc (~> 0.7.7)
      rest-client (~> 1.6.1)
      rubyzip
    heroku-api (0.3.4)
      excon (~> 0.16.1)
    hike (1.2.1)
    i18n (0.6.1)
    journey (1.0.4)
    jquery-rails (2.1.2)
      railties (>= 3.1.0, < 5.0)
      thor (~> 0.14)
    json (1.7.5)
    launchy (2.1.2)
      addressable (~> 2.3)
    less (2.2.2)
      commonjs (~> 0.2.6)
    less-rails (2.2.3)
      actionpack (>= 3.1)
      less (~> 2.2.0)
    libwebsocket (0.1.5)
      addressable
    listen (0.5.0)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.19)
    multi_json (1.3.6)
    mysql2 (0.3.11-x86-mingw32)
    netrc (0.7.7)
    nokogiri (1.5.5-x86-mingw32)
    orm_adapter (0.4.0)
    pdf-reader (1.2.0)
      Ascii85 (~> 1.0.0)
      hashery (~> 2.0)
      ruby-rc4
    pg (0.14.1-x86-mingw32)
    polyamorous (0.5.0)
      activerecord (~> 3.0)
    polyglot (0.3.3)
    prawn (0.12.0)
      pdf-reader (>= 0.9.0)
      ttfunk (~> 1.0.2)
    progressbar (0.11.0)
    rack (1.4.1)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.2)
      rack
    rack-test (0.6.1)
      rack (>= 1.0)
    rails (3.2.8)
      actionmailer (= 3.2.8)
      actionpack (= 3.2.8)
      activerecord (= 3.2.8)
      activeresource (= 3.2.8)
      activesupport (= 3.2.8)
      bundler (~> 1.0)
      railties (= 3.2.8)
    rails_best_practices (1.10.1)
      activesupport
      awesome_print
      colored
      erubis
      i18n
      progressbar
      sexp_processor
    railties (3.2.8)
      actionpack (= 3.2.8)
      activesupport (= 3.2.8)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (>= 0.14.6, < 2.0)
    rake (0.9.2.2)
    ransack (0.7.0)
      actionpack (~> 3.0)
      activerecord (~> 3.0)
      polyamorous (~> 0.5.0)
    rantly (0.3.1)
    rb-fsevent (0.9.1)
    rdoc (3.12)
      json (~> 1.4)
    rest-client (1.6.7)
      mime-types (>= 1.16)
    rspec (2.11.0)
      rspec-core (~> 2.11.0)
      rspec-expectations (~> 2.11.0)
      rspec-mocks (~> 2.11.0)
    rspec-core (2.11.1)
    rspec-expectations (2.11.3)
      diff-lcs (~> 1.1.3)
    rspec-instafail (0.2.4)
    rspec-mocks (2.11.2)
    rspec-rails (2.11.0)
      actionpack (>= 3.0)
      activesupport (>= 3.0)
      railties (>= 3.0)
      rspec (~> 2.11.0)
    rspec-steps (0.0.8)
      rspec (>= 2.6)
    ruby-progressbar (0.0.10)
    ruby-rc4 (0.1.5)
    rubyzip (0.9.9)
    sass (3.2.1)
    sass-rails (3.2.5)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    selenium-webdriver (2.25.0)
      childprocess (>= 0.2.5)
      libwebsocket (~> 0.1.3)
      multi_json (~> 1.0)
      rubyzip
    sexp_processor (4.0.1)
    simple_form (2.0.2)
      actionpack (~> 3.0)
      activemodel (~> 3.0)
    simplecov (0.6.4)
      multi_json (~> 1.0)
      simplecov-html (~> 0.5.3)
    simplecov-html (0.5.3)
    sprockets (2.1.3)
      hike (~> 1.2)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    sqlite3 (1.3.6-x86-mingw32)
    thin (1.4.1)
      daemons (>= 1.0.9)
      eventmachine (>= 0.12.6)
      rack (>= 1.0.0)
    thor (0.16.0)
    tilt (1.3.3)
    treetop (1.4.10)
      polyglot
      polyglot (>= 0.3.1)
    ttfunk (1.0.3)
    twitter-bootstrap-rails (2.1.2)
      actionpack (>= 3.1)
      less-rails (~> 2.2.3)
      railties (>= 3.1)
    tzinfo (0.3.33)
    uglifier (1.3.0)
      execjs (>= 0.3.0)
      multi_json (~> 1.0, >= 1.0.2)
    warden (1.2.1)
      rack (>= 1.0)
    xpath (0.1.4)
      nokogiri (~> 1.3)

PLATFORMS
  x86-mingw32

DEPENDENCIES
  bootstrap-sass
  cancan
  capybara
  coffee-rails (~> 3.2.1)
  database_cleaner
  debugger
  decent_exposure
  devise!
  eventmachine (= 1.0.0.rc.4)
  execjs
  factory_girl_rails (~> 2.0)
  fuubar
  guard-rspec
  haml-rails
  heroku
  jquery-rails
  launchy
  mysql2
  pg
  prawn
  rails (~> 3.2.3)
  rails_best_practices
  ransack
  rantly
  rb-fsevent
  rspec-instafail
  rspec-rails
  rspec-steps
  sass-rails (~> 3.2.3)
  selenium-webdriver
  simple_form
  simplecov
  sqlite3
  therubyracer
  thin
  twitter-bootstrap-rails
  uglifier (>= 1.0.3) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T04:49:21.907

我强烈建议您关注 Daniel Kehoe 的优秀作品： [https](https://github.com/RailsApps/rails3-bootstrap-devise-cancan) ://github.com/RailsApps/rails3-bootstrap-devise-cancan ，如果您还没有的话。

关于我在您的 Gemfile 中看到的唯一可疑之处是其中包含“rubyracer”。为什么会在那里？尝试删除它。`bundle install`当然，无论何时进行任何更改，都不要忘记。

# perl - Perl 检查要获取的 url 中是否存在文件

> ID：12311308
> 
> 赞同：1
> 
> 时间：2012-09-07T03:26:13.810
> 
> 标签：perl, download

在对 URL 数据库执行 file::fetch 时，某些 URL 仅包含顶级域，例如[http://google.com](http://google.com)。我如何构造我的 if 检查，以便它验证是否有要获取的文件，所以当我创建一个新的 file::fetch 对象时，它不会抛出这个错误：

`Use of uninitialized value $path in pattern match (m//) at C:/Perl/lib/File/Spec/Unix.pm line 267.
Use of uninitialized value in string eq at C:/Perl/lib/File/Fetch.pm line 395.`

这是我的代码片段，我正在尝试进行一些验证

```
my $uri_handle = File::Fetch->new(uri => $url);
my $getfile = $uri_handle ->file;
if ($getfile){
    my $dir_handle = $uri_handle->fetch( to => $dir ) or die "Couldn't fetch file: $uri_handle->error\n";
    #print "[ID:$myid] File fetch completed!\n\n";
}else{
    print "[ID:$myid] There is no file to be fetched from $url\n\n";
} 
```

但是 file 方法也失败了，因为它无法在 URL 中检索文件名。

```
Thread 1 terminated abnormally: Can't call method "file" on an undefined value at C:\test\multihashtest2.pl line 102. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T03:57:42.960

在尝试加载 URI 之前，您的 perl 脚本不会知道网络服务器上的内容和不知道的内容—— URL 看起来如何并不重要。您需要尝试获取文件并优雅地处理任何错误。

如果您发布代码会有所帮助，但您可能可以通过查看[文档](http://perldoc.perl.org/File/Fetch.html)来回答您自己的问题。

特别是`new()`method `returns false on error`，但这只是在实际获取 URI 之前对其进行验证。当您调用`fetch()`File::Fetch 对象时，它`Returns the full path to the downloaded file on success, and false on failure.`

因此，相应地处理这些方法返回的内容。

**编辑：**现在您发布了代码。如果错误抱怨 $uri_handle 未定义，请检查 $url 是否设置正确并检查错误。第 1 行之后：

```
print $url;
print $uri_handle->error; 
```

# python - 需要解释的简单 for 循环

> ID：12311310
> 
> 赞同：2
> 
> 时间：2012-09-07T03:26:49.043
> 
> 标签：python

我知道这听起来很傻，但我一生都无法弄清楚这个 for 循环如何返回 13、11、9、7 背后的逻辑。

```
 for i in range(13,5,-1):
        if i % 2 != 0:
            print i 
```

我知道第一个值是它开始的数字，第二个是它停止的地方，第三个是它所采取的步骤。“if i % 2 !=0:”是让我失望的原因。谁能解释我发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T03:29:08.813

第一位是从to`range(13,5,-1)`倒数的。下一点是。 相当于说，或者“如果这个数字可以除以 2 没有余数”，所以你的陈述是说“ ”（这显然与“ ”相同）。 `13``6``i%2 != 0``i%2 == 0``if even``if odd``if not even`

基本上，循环打印从 13 开始的奇数并减少到 6（但 6 是偶数，所以它不会被打印）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T03:29:43.027

% 是模运算符。从[文档](http://docs.python.org/reference/expressions.html)：

> %（取模）运算符产生第一个参数除以第二个参数的余数。数字参数首先转换为通用类型。零右参数引发 ZeroDivisionError 异常。参数可以是浮点数，例如，3.14%0.7 等于 0.34（因为 3.14 等于 4*0.7 + 0.34。）模运算符总是产生与第二个操作数（或零）具有相同符号的结果；结果的绝对值严格小于第二个操作数的绝对值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T03:30:07.047

```
if i % 2 !=0 
```

该行的意思是“如果 i 除以 2 后的余数不等于 0”，因此它正在检查 i 是否为奇数。for 循环倒计时 1，但 if 语句跳过打印偶数。

# scala - Salat 和嵌入的 MongoDb 文档

> ID：12311312
> 
> 赞同：0
> 
> 时间：2012-09-07T03:26:55.447
> 
> 标签：scala, mongodb, playframework, playframework-2.0, salat

我有一个由 2 个嵌入文档组成的案例类，其中一个是列表。我在检索列表中的项目时遇到了一些问题。

请在下面查看我的代码：

```
package models

import play.api.Play.current
import com.novus.salat._
import com.novus.salat.dao._
import com.mongodb.casbah.Imports._
import se.radley.plugin.salat._
import com.novus.salat.global._

case class Category(
  _id: ObjectId = new ObjectId,
  category: Categories,
  subcategory: List[SubCategories]
)

case class Categories(
  category_id: String,
  category_name: String
  )

case class SubCategories(
  subcategory_id: String,
  subcategory_name: String
)

object Category extends ModelCompanion[Category, ObjectId] {
  val collection = mongoCollection("category")
  val dao = new SalatDAO[Category, ObjectId](collection = collection) {}
  val CategoryDAO = dao

  def options: Seq[(String,String)] = {
    find(MongoDBObject.empty).map(it => (it.category.category_id, it.category.category_name)).toSeq
  }

  def suboptions: Seq[(String,String,String)] = {
    find(MongoDBObject.empty).map(it => (it.category.category_id, it.subcategory.subcategory_id, it.subcategory.subcategory_name)).toSeq
  }
} 
```

我得到错误：`value subcategory_id is not a member of List[models.SubCategories]`这对我没有任何意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:47:27.090

你正在这样做：

```
def suboptions: Seq[(String,String,String)] = {
  find(MongoDBObject.empty).map(category => {
    val categories: Categories = category.category
    val categoryId: String = categories.category._id
    val subcategory: List[Subcategory] = category.subcategory
    val subcategoryId: String = subcategory.subcategory_id //here you are trying to 
      //get id from list of subcategories, not one of them
    val subcategoryName: String = subcategory.subcategory_name //same here
    (categoryId, subcategoryId, subcategoryName)).toSeq  
  }
} 
```

顺便提一句。在 Scala 中使用snake_case 非常少见，val/var 名称应该使用 camelCase 格式，请参阅[此](http://docs.scala-lang.org/style/naming-conventions.html#values_variable_and_methods)

编辑：您可以通过执行以下操作使其变得简单：

```
case class Category(
  _id: ObjectId = new ObjectId(), 
  id: String,
  name: String,
  subcategories: List[Subcategory]
)
case class Subcategory(
  id: String,
  name: String
)
//not tested
def suboptions: Seq[(String, String, String)] = {
  val categories = find(MongoDBObject.empty)
  for{
    category <- categories;
    subcategory <- category.subcategories
  } yield (category.id, subcategory.id, subcategory.name)
} 
```

# php - 我有一个验证问题，它不断重复

> ID：12311313
> 
> 赞同：2
> 
> 时间：2012-09-07T03:27:04.260
> 
> 标签：php

我正在尝试验证名称以确保未使用该名称，但由于某种原因，验证错误不断自我重复，在这里我希望它显示用户何时使用之前的“名称已在使用中”但我'我得到这个“名称已经在用户名已经在用户名已经在用户名已经在用户名已经在用户名已经在用户名已经在用户名已经在使用”。我怎么能阻止它？

```
 $types = array();
$result = mysql_query("SELECT * FROM `im_album` WHERE username = '".$user_data['username']."'  ");

while(($row =  mysql_fetch_assoc($result))) {
    $types[] = $row['name'];
}
if (isset($_POST['img_album'])) {
       $al_name = $_POST['name'];
       $al_description = $_POST['description'];
       $mode = $_POST['mode'];

       if(empty($al_name)){
           $errors[] = 'album name required';
           }

        if (strlen($al_name) > 55 || strlen($al_name) > 255) {
            $errors[] = 'name fields are to long ';

        }
        foreach($types  as $album){
            if ($al_name == $album) 
             $errors[] = "name already in use";

        }};
        echo output_errors($errors); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T03:46:17.157

```
foreach($types  as $album){
        if ($al_name == $album) {
           $errors[] = "name already in use";
           break;
        }
} 
```

试试这个代码块而不是你那里的代码块。

# php - 如何使用 Facebook PHP SDK 自动发布到朋友墙

> ID：12311315
> 
> 赞同：0
> 
> 时间：2012-09-07T03:27:17.360
> 
> 标签：php, facebook-php-sdk

即使用户当前未登录，是否可以使用应用程序在 facebook 中发布朋友墙/时间线？这是我目前正在处理的代码，您可以看到它在朋友墙上发布消息（用实际的个人资料 ID 替换friend_id）。这可行，但用户必须登录才能执行此操作。如果我希望此脚本自动执行（无需用户干预），我不知道该怎么做。

```
<?php
require 'php_sdk/src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'XXX',
  'secret' => 'XXX',
));

$session = $facebook->getUser();
$me = null;

if($session){
    try{
        $me = $facebook->api('/me');

        $facebook->api('/friend_id/feed', 'post', array('message'=>'hello without user!'));

    }catch(FacebookApiException $e){
        echo $e->getMessage();
    }
}

if($me){
    $logoutUrl = $facebook->getLogoutUrl();
    echo "<a href='$logoutUrl'>Logout</a>";
}else{
    $loginUrl = $facebook->getLoginUrl(array(
        'scope' => 'user_about_me,user_birthday,user_location,email,read_friendlists,friends_location,friends_birthday,publish_stream'
    ));
    echo "<a href='$loginUrl'>Login</a>";
}
?> 
```

有任何想法吗？非常感谢代码示例和指向特定文档的链接，这些链接可以帮助我了解它是如何工作的，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T03:57:32.147

当用户登录时，您需要捕获他们的“访问令牌”

```
$facebook = new Facebook(array( 
  'appId'  => 'XXX', 
  'secret' => 'XXX', 
)); 

// NOTE: wrap these in try/catch blocks for safety - this is example only
$session = $facebook->getUser(); 
$access_token = $facebook->getAccessToken(); 
```

要稍后以他们的身份发布，请使用访问令牌

```
$facebook = new Facebook(array( 
  'appId'  => 'XXX', 
  'secret' => 'XXX', 
)); 

// NOTE: wrap these in try/catch blocks for safety - this is example only
$facebook->setAccessToken($access_token); 
// Then check /me and you should still have the same user.
// Then post to /me/feed to post to the wall. 
```

令牌有效期为 2 天。如果需要，您可以将其延长至 60 天。

* * *

编辑：为了 exented 令牌，您调用该函数

```
$facebook->setExtendedAccessToken(); 
```

在“getAccessToken”调用之前。

# html - HTML5 标签和 div 标签

> ID：12311318
> 
> 赞同：2
> 
> 时间：2012-09-07T03:28:14.370
> 
> 标签：html

一段时间以来，我一直在使用 HTML5 构建网站，我喜欢使用它提供的新标签。避免在 div 之后使用 div 的能力是一件很棒的事情，它可以使 html 更清晰、更容易阅读。让我有点困惑的是，何时使用 div 标签在语义上是正确的。我知道 div 是语义标记内容的集合，可能需要组合在一起，但我已经看到了许多编写 HTML5 的方法以及程序员如何使用 div，我只是不确定什么是正确的方式和错误的方式或换句话说，好的方式和更好的方式。

例如：

```
<div id="header">
    <header>
        <h1>Here is a header!</h1>
    </header>       
</div>

<header id="header">
    <h1>Here is a header!</h1>
</header> 
```

两者都是编写 html 的方法，但其中一种在语义上比另一种更正确吗？将 id 或类添加到页眉、页脚、导航或旁边标签并设置它们的样式是最佳做法，还是为 div 标签添加样式？还是有可能我只是在想这个？如果有人可以帮助我休息并给我一个很好的理解，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T03:30:25.977

使用标签并使用 Modernizer.js，因此您可以获得 IE 支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T03:39:54.990

我认为编写标题的语义方式类似于

```
<header>
    <h1>This is the page heading!</h1>
    <!-- extra header information -->
    <p>A paragraph explaining the page</p>
    <!-- navigation can go into the header, but it doesn't have to -->
    <nav>
        <ul>
            <li><a href="/example-page">Example page</a></li>
        </ul>
    </nav>
</header> 
```

关键点是 header 元素不应该在 div#header 元素内，因为那是多余的。出于同样的原因，标题元素也不需要 id。

# android - 如何以编程方式查找设备是 Galaxy Note？

> ID：12311319
> 
> 赞同：0
> 
> 时间：2012-09-07T03:28:17.083
> 
> 标签：android, model

我想以编程方式查找给定的正在运行的设备是否是*Galaxy Note 。*我该怎么做，请帮助我找到一个片段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T03:32:54.037

android.os.Build.MODEL；

```
String deviceModel = android.os.Build.MODEL; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T03:29:54.190

为了获得 android 设备名称，您只需添加一行代码：

```
android.os.Build.MODEL; 
```

将以下代码复制并粘贴到您的项目 onCreate() 中：

```
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
TextView tv1 = (TextView) findViewById(R.id.tv1);
String str = android.os.Build.MODEL;
tv1.setText(str); 
```

# c# - 如何让我的老板相信 ANSI C 不适合我们的新项目？

> ID：12311328
> 
> 赞同：3
> 
> 时间：2012-09-07T03:29:11.367
> 
> 标签：c#, c, programming-languages

几个月前，我们开始开发一个应用程序来控制内部开发的测试设备并记录一组测量值。它应该有一个简单的 UI，并且由于必须进行连续记录，因此可能需要线程。此应用程序将使用几年，并在此期间由一些计算机科学专业的学生维护。

我们的老板大约 30 年前毕业（不要被视为冒犯；我也有一半以上的时间在我身上）并要求我们用 ANSI C 开发这个应用程序。理由是他是唯一一个将一直在身边，因此他必须能够理解我们在做什么。他还规定我们不应该使用抽象数据类型；他甚至给了我们一个列表，上面有他希望我们使用的全局变量的名称（叹气）。

我实际上尝试了这种方法一段时间，但它确实让我放慢了速度，以确保所有指针操作都是安全的并且所有字符串都具有正确的大小。此外，实际与手头问题相关的代码行数只是我们代码库的一小部分。几天后，我放弃了整个事情并重新开始使用 C#。我们的老板已经看过程序运行并且他喜欢它的工作方式，但他不知道它是用另一种语言编写的。

下周我们两个会见面检查源代码，以便他“知道如何维护它”。我有点害怕，我想听听你们的意见，我可以用什么论据来支持我的决定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T03:33:12.883

老实说，它可能会在你的脸上炸开，但如果你的老板不是一个完整的傻瓜，他会看到你的工作效率有多高，并且能够继续前进。C# 确实使用了与 ANSI C 不同的范式，包括 OOP 等等，但语法足够相似，他应该能够弄清楚。如果不是在代码中留下很多好的注释，也许就足以产生一些他可以阅读的实际技术文档。

# git - 如何从 git 裸远程存储库中删除文件？

> ID：12311330
> 
> 赞同：6
> 
> 时间：2012-09-07T03:29:25.923
> 
> 标签：git, git-remote

我有一个远程裸 git 存储库。

一位新开发者克隆了它，但他没有正确配置的 .gitignore 文件，因此他错误地将一些不需要的文件推送到远程。当我提取更改并合并时，我得到了这些以前未跟踪的文件。其他人也从远程提取了更改，并且也拥有这些不需要的文件。

如何从远程存储库以及其他所有人的远程/来源/分支中删除这些文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T03:39:51.347

请参阅 github 对此有一个常见问题解答：[https](https://help.github.com/articles/remove-sensitive-data) ://help.github.com/articles/remove-sensitive-data 以下是步骤：

1.  从本地（工作）树重写树。

    $ git filter-branch --index-filter 'git rm --cached --ignore-unmatch Rakefile' \ --prune-empty --tag-name-filter cat -- --all

2.  强制推送到远程。

    $ git push origin master --force

3.  每个人都从遥控器中拉出（并`--force`在需要时使用）

为了防止这种情况再次发生，您应该`.gitignore`在存储库中检查（并且可以选择在服务器上设置一个挂钩）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T03:40:06.620

这是一个三步过程：

1.  从存储库的副本中删除文件（使用[`git rm`](http://git-scm.com/docs/git-rm)或[完全从历史记录中清除这些文件，](https://help.github.com/articles/remove-sensitive-data)具体取决于这些文件从不在存储库中的重要性）
2.  使用 . 将您的更改推送回远程存储库[`git push --force`](http://git-scm.com/docs/git-push)。
3.  让每个人都知道他们可以重新拉取存储库——这将需要[`git rebase`](http://git-scm.com/docs/git-rebase)他们在最后一次知道*好的*提交上进行工作。

作为最后一步，您可能还希望将`.gitignore`文件添加到存储库，以便在克隆存储库时忽略所有正确的文件。

# cakephp-1.3 - CakePHP 1.3 JavaScript 或 XML 扩展的自定义 404 错误？

> ID：12311343
> 
> 赞同：1
> 
> 时间：2012-09-07T03:31:14.847
> 
> 标签：cakephp-1.3

我已经将我的路由器设置为解析*js*和*xml*扩展，并为它们提供相应的布局。

*但是当/controller/action.js*或*/controller/action.xml*无效时，它会将 error404 页面的 HTML 呈现为纯文本。

如何强制 404 页面为*.js*和*.xml*输出空白页面？或者，或者，它是否进行了重定向？

# markdown - Pandoc：将 Markdown 转换为 HTML，语法高亮

> ID：12311344
> 
> 赞同：12
> 
> 时间：2012-09-07T03:31:16.393
> 
> 标签：markdown, pandoc

我正在将 markdown 转换为 HTML，并且我想包含语法突出显示的代码。

我正在使用一些包含以下语法的降价：

```
 ~~~ {.c}
  long factorial (int n)
  {
    long result = 1;
    while (n > 1)
      result *= n--;
    return result;
  }
  ~~~ 
```

但我不知道使用哪个语法突出显示扩展来处理此语法。什么是好的扩展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-06-16T18:20:10.700

> > > 从评论中回答，请在给予负面评价之前进行编辑。

# 解决方案

Pandoc 自动进行语法高亮。您不需要外部扩展。

只要确保使用该`-s`标志，您就可以获得一个带有突出显示所需的 CSS 的独立 HTML 文件。您还可以使用该`--highlight-style`选项来调整配色方案。

***注意：这些评论假设您使用的是最新的`pandoc, 1.9.4.2.`***

> 添加`-s`选项时，我收到以下错误消息：`pandoc -m -t -s slidy 7-functional-design.md -o 7-functional-design.hpart`. 如果我尝试添加，我会收到相同的错误消息`--highlight-style=haddock`。

你想要`-s -t slidy`而不是`-t -s slidy`.

`slidy`是 -t 选项的参数，需要紧随其后。

# python - 使用python操作excel 2007文件

> ID：12311345
> 
> 赞同：1
> 
> 时间：2012-09-07T03:31:19.667
> 
> 标签：python, excel

使用 python 我需要能够对 excel 2007 的工作簿执行以下操作：

1.  删除行
2.  对工作表进行排序
3.  从列中获取不同的值

我正在研究[openpyxl](http://packages.python.org/openpyxl/index.html#)；但是，它似乎功能有限。

任何人都可以推荐一个可以完成上述任务的库吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T20:44:23.303

我想先让您知道这**只是一个基于 Windows 的解决方案**。但如果您使用的是 Windows，我建议您使用**Win32Com**，它可以在[此处找到。](http://sourceforge.net/projects/pywin32/files/pywin32/Build%20217/)该模块让 Python 以编程方式访问任何 Microsoft Office 应用程序（包括 Excel），并使用 VBA 中使用的许多相同方法。通常你会做的是记录一个宏（或从内存中回忆）如何在 VBA 中做某事，然后在 Python 中使用相同的函数

首先，我们要连接到 Excel 并访问第一个工作表作为示例

```
#First we need to access the module that lets us connect to Excel
import win32com.client 

# Next we want to create a variable that represents Excel
app = win32com.client.Dispatch("Excel.Application")   

# Lastly we will assume that the workbook is active and get the first sheet
wbk = app.ActiveWorkbook
sheet = wbk.Sheets(1) 
```

此时，我们有一个名为*sheet*的变量，它代表我们将使用的 Excel 工作表。当然有多种方法可以访问工作表，这通常是我演示如何在 excel 中使用 win32com 的方式，因为它非常直观。

现在假设我在第一张纸上有以下值，我将逐个讨论如何回答您的问题：

```
 A    
1   "d"
2   "c"
3   "b"
4   "a"
5   "c" 
```

删除行：假设您要删除活动工作表中的第一行。

```
sheet.Rows(1).Delete() 
```

这将创建：

```
 A
1   "c"
2   "b"
3   "a"
4   "c" 
```

接下来让我们按升序对单元格进行排序（尽管我建议将值提取到 python 并在列表中进行排序并将值发送回）

```
rang = sheet.Range("A1","A4")
sheet.Sort.SetRange(rang)
sheet.Sort.Apply() 
```

这将创建：

```
 A
1   "a"
2   "b"
3   "c"
4   "c" 
```

现在我们将从列中获得不同的值。这里要带走的主要内容是如何从单元格中提取值。您可以使用*sheet.Range("A1","A4")*一次选择多个单元格，也可以使用 sheet.Cells(row,col) 逐个单元格地迭代来访问这些值。Range 要快几个数量级，但 Cells 更容易调试。

```
#Get a list of all Values using Range
valLstRange = [val[0] for val in sheet.Range("A1","A4").Value]

#Get a list of all Values using Cells
valLstCells = [sheet.Cells(row,1).Value for row in range(1,4)]

#valLstCells and valLstRange both = ["a","b","c","c"] 
```

现在最后您想保存工作簿，您可以使用以下方法执行此操作：

```
wbk.SaveAs("C:/savedWorkbook.xlsx") 
```

你完成了！

**关于 COM 的信息**

如果您使用过 VBA、.NET、VBscript 或任何其他语言来使用 Excel，那么这些 Excel 方法中的许多方法看起来都是一样的。那是因为它们都使用微软提供的同一个库。该库使用 COM，这是 Microsoft 向与语言无关的程序员提供 API 的方式。COM 本身是一项较旧的技术，调试起来可能很棘手。如果您想了解有关 Python 和 COM 的更多信息，我强烈推荐Mark Hammond[在 Win32 上进行 Python 编程。](http://shop.oreilly.com/product/9781565926219.do)在官方 .msi 安装程序中在 Windows 上安装 Python 后，他会受到热烈欢迎。

**WIN32COM 的替代方案**

我还需要指出，在大多数情况下，有几种出色的开源替代方案可以比 COM 更快，并且可以在任何操作系统（Mac、Linux、Windows 等）上运行。这些工具都解析包含 .xlsx 的压缩文件。如果您不知道 .xlsx 文件是 .zip，只需将扩展名更改为 .zip，然后您就可以探索内容（在您的职业生涯中至少要做一次这很有趣）。其中我推荐使用 [Openpyxl](https://pypi.python.org/pypi/openpyxl)，它用于在性能至关重要的服务器上解析和创建 Excel 文件。*切勿将 win32com 用于服务器活动，因为它会为每个可能泄漏的实例打开一个进程外的 excel.exe 实例*

**推荐**

我会向与执行数据发现活动的个人数据集（分析师、金融服务、研究人员、会计师、业务运营等）密切合作的用户推荐 win32com，因为它与开放式工作簿配合得很好。但是，需要执行非常大的任务且占用空间很小*或*并行处理非常大的任务的开发人员*或用户**必须*使用诸如 openpyxl 之类的包。

# android - 如何在Android中为布局设置固定纵横比

> ID：12311346
> 
> 赞同：44
> 
> 时间：2012-09-07T03:31:41.230
> 
> 标签：android

我试图将布局的宽度设置为“fill_parent”，同时让视图的高度与长度相同，以使布局成为正方形。

任何建议将不胜感激，在此先感谢！:D

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2017-08-30T15:35:51.173

随着[ConstraintLayout](https://developer.android.com/training/constraint-layout/index.html)的引入，您不必编写任何代码或使用第三方或依赖`PercentFrameLayout`于 26.0.0 中已弃用的第三方。

以下是如何使用以下方法为您的布局保持 1:1 纵横比的示例`ConstraintLayout`：

```
<android.support.constraint.ConstraintLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <FrameLayout
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_marginEnd="0dp"
        android:layout_marginStart="0dp"
        android:layout_marginTop="0dp"
        android:background="@android:color/black"
        app:layout_constraintDimensionRatio="H,1:1"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent">

    </FrameLayout>

</android.support.constraint.ConstraintLayout> 
```

或者，您可以直接在布局编辑器中编辑布局，而不是编辑您的 XML 文件：

[![布局编辑器](../Images/811f8065c07ec3ebe3cb41d7c12fc693.png)](https://i.stack.imgur.com/LN29x.png)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-02-10T11:58:14.573

在你的*build.gradle*添加：

```
compile 'com.android.support:percent:23.1.1' 
```

并在您的*layout.xml中* **包装**您想要遵循[PercentFrameLayout](http://developer.android.com/reference/android/support/percent/PercentFrameLayout.html)内的比率的任何视图或视图组，其中：

```
android:layout_width="match_parent"
android:layout_height="wrap_content" 
```

然后对于要遵循比率的视图或视图组，**替换** *android:layout_width*和*android:layout_height*：

```
 app:layout_aspectRatio="178%"
    app:layout_widthPercent="100%" 
```

并且您有一个视图或视图组，其中纵横比为 16:9 (1.78:1)，宽度与父级匹配，高度也相应调整。

注意：删除正常的宽度和高度属性很重要。Lint 会抱怨，但它会起作用。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-09-07T03:43:47.887

您可以尝试最初将 设置`layout_height`为`wrap_content`。但从那里我认为你必须进入代码。只是为了实验，在您的活动中尝试以下操作：

```
@Override
public void onResume(){
    super.onResume();
    findViewById(R.id.squareView).getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
        @Override public void onGlobalLayout() {
            View squareView = findViewById(R.id.squareView);
            LayoutParams layout = squareView.getLayoutParams();
            layout.height = squareView.getWidth();
            squareView.setLayoutParams(layout);
            squareView.getViewTreeObserver().removeGlobalOnLayoutListener(this);
        }
    });
} 
```

`R.id.squareView`有问题的观点在哪里`id`。请注意，此代码包含在`onGlobalLayout`调用中以确保其`squareView.getWidth()`具有有意义的值。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-05-30T06:49:15.767

我为类似的用例创建了一个布局库。随意使用它。

[比例布局](https://github.com/riteshakya037/RatioLayouts)

# 安装

将此添加到文件顶部

```
repositories {
    maven {
        url  "http://dl.bintray.com/riteshakya037/maven" 
    }
}

dependencies {
    compile 'com.ritesh:ratiolayout:1.0.0'
} 
```

# 用法

在布局的根视图上定义“app”命名空间

```
xmlns:app="http://schemas.android.com/apk/res-auto" 
```

在你的布局中包含这个库

```
<com.ritesh.ratiolayout.RatioRelativeLayout
        android:id="@+id/activity_main_ratio_layout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        app:fixed_attribute="WIDTH" // Fix one side of the layout 
        app:horizontal_ratio="2" // ratio of 2:3
        app:vertical_ratio="3"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T03:49:46.967

```
LinearLayout ll = (LinearLayout)findViewById(R.id.LL);

int width = ll.getWidth();
LinearLayout.LayoutParams ll_params = new LinearLayout.LayoutParams(width, width);
ll.setLayoutParams(ll_params); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-16T08:31:28.227

如果你想保持纵横比并且父布局必须是“wrap_content”（对于带有可变文本的文本视图很有用），你可以添加一个假视图，它保持纵横比并且其他元素必须限制在这个视图中：

```
 <androidx.constraintlayout.widget.ConstraintLayout     
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

    <View
        android:id="@+id/ratio_constraint"
        android:layout_width="0dp"
        android:layout_height="0dp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintDimensionRatio="122:246"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

    <androidx.appcompat.widget.AppCompatTextView
        android:id="@+id/text_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:layout_constraintEnd_toEndOf="@id/ratio_constraint"
        app:layout_constraintStart_toStartOf="@id/ratio_constraint"
        app:layout_constraintTop_toTopOf="@id/ratio_constraint"
        tools:text="The TextView which can extend the layout" />

  </androidx.constraintlayout.widget.ConstraintLayout> 
```

[![在此处输入图像描述](../Images/e992a988e53e3d124b3c7b2b1f766e99.png)](https://i.stack.imgur.com/GPZ6Z.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-09T07:55:50.683

```
 final RelativeLayout rlMyList = findViewById(R.id.rlMyList);
 rlMyList.postDelayed(new Runnable() {
     @Override
     public void run() {
          int width = rlMyList.getWidth();
          LayoutParams lp = (LayoutParams) rlMyList.getLayoutParams();
          lp.width = width;
          lp.height = (int) (width * 0.67);// in my case ratio 3:2
          rlMyList.setLayoutParams(lp);
     }
 },500); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-09-07T03:38:31.177

设置高度为`fill_parent`，宽度为`wrap_content`

你用`android:adjustViewBounds="true"`

# python - 为什么 __getattr__ 不会因为缺少“神奇”调用的方法而被调用？

> ID：12311348
> 
> 赞同：3
> 
> 时间：2012-09-07T03:32:11.840
> 
> 标签：python, python-3.x, getattr

我正在尝试实现一个类，其中尝试访问当前类或其任何祖先中不存在的任何属性将尝试从成员访问这些属性。下面是我正在尝试做的一个简单的版本。

```
class Foo:
    def __init__(self, value):
        self._value = value

    def __getattr__(self, name):
        return getattr(self._value, name)

if __name__ == '__main__':
    print(Foo(5) > Foo(4)) # should do 5 > 4 (or (5).__gt__(4)) 
```

但是，这会引发`TypeError`. 即使使用`operator`模块的`attrgetter`类也会做同样的事情。我正在查看[有关自定义属性访问的文档](http://docs.python.org/py3k/reference/datamodel.html?highlight=__get__#object.__getattr__)，但我发现它并不容易阅读。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T03:43:16.883

如果我对您的理解正确，那么您正在做的事情是正确的，但它仍然不适用于您尝试使用它的用途。原因是隐式魔法方法查找不使用`__getattr__`（`__getattribute__`或任何其他类似的东西）。这些方法实际上必须以它们的神奇名称显式地存在。您的方法适用于普通属性，但不适用于魔术方法。（请注意，如果您`Foo(5).__lt__(4)`明确地这样做，它将起作用；它只是隐式的“魔术”查找——例如，在使用`__lt__`时调用`<`）——被阻止。）

[这篇文章](https://stackoverflow.com/questions/9057669/how-can-i-intercept-calls-to-pythons-magic-methods-in-new-style-classes)描述了一种使用元类自动生成魔法方法的方法。如果您只需要某些方法，您可以在类上手动定义它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T03:41:37.037

`__*__`除非它们确实存在，否则方法将不起作用 - 因此它们`__getattr__`也`__getattribute__`不允许您代理这些调用。您必须手动创建每个方法。

是的，这确实涉及相当多的复制和粘贴。是的，在这种情况下完全没问题。

您也许可以使用[werkzeug LocalProxy](https://github.com/mitsuhiko/werkzeug/blob/master/werkzeug/local.py#L248)类作为基础或代替您自己的类；使用时您的代码将如下所示`LocalProxy`：

```
print(LocalProxy(lambda: 5) > LocalProxy(lambda: 4)) 
```

# php - 带有 ping 的 php 主机状态和 mysql 查询的结果

> ID：12311349
> 
> 赞同：1
> 
> 时间：2012-09-07T03:32:22.757
> 
> 标签：php, mysql, function, ping

我创建了一个数据库，用于跟上网络上的静态 IP 列表。我有一个按顺序列出 ips 的页面，我的脚本可以列出数据库中的 ips 和其他数据，但我想添加一个脚本来 ping 每个 ip 地址并判断它是否正常，这是我的代码必须显示所有内容：

```
$dbConn = connectToDb();

$sql= <<< END

SELECT *
FROM `ipadds` 
ORDER BY oct1 ASC, oct2 ASC, oct3 ASC, oct4 ASC;

END;

$result=mysql_query($sql) or die(mysql_error()); 

$options=""; 

while ($row=mysql_fetch_array($result)) {

    $oct1=$row['oct1']; 
    $oct2=$row['oct2']; 
    $oct3=$row['oct3']; 
    $oct4=$row['oct4']; 
    $SubnetMask=$row['SubnetMask']; 
    $Hostname=$row['Hostname']; 
    $MAC=$row['MAC']; 
    $Description=$row['Description']; 
    $DeviceType=$row['DeviceType']; 
    $Location=$row['Location']; 
    $Comments=$row['Comments']; 

    $options.="<tr><td><a href=editcomputer.php?queryID=$id><img src=images/edit.gif alt=print border=0></a> <a href=deletecomputer.php?queryID=$id><img src=images/edit-delete-icon.png alt=print border=0></a></td><td><a href='HTTP://$oct1.$oct2.$oct3.$oct4' target=_blank>$oct1.$oct2.$oct3.$oct4</a></td><td>$SubnetMask</td><td>$Hostname</td><td>$MAC</td><td>$Description</td><td>$DeviceType</td><td>$Location</td></tr>";

}
?> 
<center>

<font size=-1>

<img src="images/edit.gif"> - Edit Computer<br>

<img src="images/edit-delete-icon.png"> - Delete Computer<br>

</font>

<font size="2">

<table>

<tr>

<td>

<hr>

</td>

</tr>
<table cellpadding="15" border="1">
<tr>
<td>

</td>
<td>
<u>IP Address</u>
</td>
<td>
<u>Subnet Mask</u>
</td>
<td>
<u>Hostname</u>
</td>
<td>
<u>MAC Address</u>
</td>
<td>
<u>Description</u>
</td>
<td>
<u>Device Type</u>
</td>
<td>
<u>Location</u>
</td>

<?=$options?>
</table> 
```

我想在我的表中添加另一行并将其作为向上或向下的“状态”，有什么建议吗？

我找到了这段代码，它完全可以自己工作，我指定了地址，但无法在我的“while”语句中工作：

```
function pingAddress($ip) {
    $pingresult = exec("ping -n 3 $ip", $outcome, $status);
    if (0 == $status) {
        $status = "alive";
    } else {
        $status = "dead";
    }
    echo "The IP address, $ip, is  ".$status;
}

pingAddress("ip addres of host here"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T03:43:15.147

不用说你不应该使用`mysql_*`函数（哎呀，我刚刚做了），你所要做的就是改变你的函数以返回一个值：

```
function pingAddress($ip) {
    $pingresult = exec("ping -n 3 $ip", $outcome, $status);
    if (0 == $status) {
        return true;
    } 
    return false;
} 
```

然后在你的循环中：

```
while ($row=mysql_fetch_array($result)) {
    [...]
    if (pingAddress($ip) === true) {
        // IP is up
    }
    else {
        // IP is down
    }
} 
```

# mapreduce - MapReduce Input/OutPut 为每个键值对发出

> ID：12311350
> 
> 赞同：2
> 
> 时间：2012-09-07T03:32:39.040
> 
> 标签：mapreduce

MapReduce 用于传递和发出键值对的基本信息。我需要一点点清楚我们通过什么以及发出什么。这是我的担忧：MapReduce 输入和输出：

1.Map() 方法——它需要单个键值对还是键值对列表并发出什么？2.对于每个输入键值对，映射器发出什么？相同类型还是不同类型？3.对于每个中间键，reducer 会发出什么？有类型限制吗？4.Reducer 接收与相同键关联的所有值。这些值将如何排序，如排序或轨道排序？该顺序是否因运行而异？5.在 shuffle 和 sort 阶段，键和值的呈现顺序是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-01T16:08:35.403

*   对于每个输入 k1，v1 映射发出零个或多个 k2，v2。
*   对于每个 k2 reducer 接收 k2，list(v1,v3,v4..)。
*   对于每个输入 k2，list(v) reducer 可以发出零个或多个 k3、v3。

值在步骤 2 中任意排序。键、值 - 映射器和化简器的输出应该是相同类型，即所有键必须是相同类型，所有值必须是相同类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:42:30.830

映射方法：接收作为输入 (K1,V1) 并返回 (K2,V2)。也就是说，输出键和值可以不同于输入键和值。

Reducer 方法：在 mapper 的输出被正确打乱后（相同的 key 进入相同的 reducer），reducer 的输入为 (K2, LIST(V2))，其输出为 (K3,V3)。作为 shuffle 过程的结果，key 到达了由 key K2 排序的 reducer。

如果您想以您的特定方式对键进行排序，您可以实现键 K3 的 compareTo 方法。

```
Referring your questions:

1\. Answered above.
2\. You can emit whatever you want as long it consists of a key and a value. 
   For example, in the WordCount you send as key the word and as value 1.
3\. In the WordCount example, the reducer will receive a word and list of number. 
   Then, it will sum up the numbers and emit the word and its sum.
4\. Answered above.
5\. Answered above. 
```

# javascript - Javascript/Ajax：通过单击按钮检查有效的电子邮件和电话号码

> ID：12311353
> 
> 赞同：3
> 
> 时间：2012-09-07T03:33:06.923
> 
> 标签：javascript, jquery, ajax, jquery-ui

我目前正在使用 Javascript 和 ajax 提交而无需刷新页面。*工作部分：*我在第一个 jquery-ui 选项卡中放置了一个表单。每次用户单击“下一步”按钮时都会提交表单，结果将显示在下一个选项卡中。如果表单为空并且用户单击下一步按钮，则会显示错误警报消息。

在验证电子邮件和电话号码字段时，我遇到了困难。用户可以放任何他们想要的东西，仍然可以继续下一个选项卡，这是个大问题。当电话号码/电子邮件格式错误时，有没有办法显示警报消息？[例子](http://webprolearner.ueuo.com/dropdown-menu/test2.php)

**javascript/ajax**

```
 <script> 
 $(function () {
    var $tabs = $('#tabs').tabs({
        disabled: [0, 1],
        select: function () {
            $.ajax({
                type: "POST",
                url: "includes/post_tabs.php",
                data: {
                    "name": $("#contact_name").val(),
                    "email": $("#email").val(),
                    "phone": $("#phone").val()

                },
                success: function (result) {
                    $("#inputResult").html(result);
                }
            });
        }
    });

    $(".ui-tabs-panel").each(function (i) {
        var totalSize = $(".ui-tabs-panel").size() - 1;
        if (i != totalSize) {
            next = i + 2;
            $(this).append("<a href='#' class='next-tab mover' rel='" + next + "'>Next Page &#187;</a>");
        }
        if (i != 0) {
            prev = i;
            $(this).append("<a href='#' class='prev-tab mover' rel='" + prev + "'>&#171; Prev Page</a>");
        }
    });

    $('.next-tab').click(function () {
        var currentTab = $('#tabs').tabs('option', 'selected');
        if (
        (
        currentTab == 0 && /*(A)*/
        $.trim($('#contact_name').val()).length > 0 && $.trim($('#phone').val()).length > 0 && $.trim($('#email').val()).length > 0
        )
        ) {
            var tabIndex = $(this).attr("rel");
            $tabs.tabs('enable', tabIndex).tabs('select', tabIndex).tabs("option", "disabled", [0, 1]);
        } else {
            switch (currentTab) {
            case 0:
                alert('Please fill out all the required fields.', 'Alert Dialog');
                break;

            }
        }
        console.log("preventing default");
        return false;
    });

    $('.prev-tab').click(function () {
        var tabIndex = $(this).attr("rel");
        $tabs.tabs('enable', tabIndex).tabs('select', tabIndex).tabs("option", "disabled", [0, 1]);
        return false;
    });

    });
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T04:24:48.963

查看 jQuery 验证和验证组。

[Jquery 验证组](https://stackoverflow.com/questions/3671300/jquery-validation-groups)

单击下一步时，您可以选择仅验证某些字段。

# phpmyadmin - 访问我的 PHPMyAdmin 实例时出错

> ID：12311357
> 
> 赞同：0
> 
> 时间：2012-09-07T03:33:24.100
> 
> 标签：phpmyadmin

我正在开发我的网站应用程序。PHPMyAdmin 工作正常，直到我重新启动计算机。当我尝试访问 PHPMyAdmin 时，出现此错误：

![在此处输入图像描述](../Images/3c3d4b44592295736cf4482ffd949892.png)

在那之前我没有做任何奇怪的事情。我刚刚使用我的代码。我不知道该怎么办。我的代码仍然可以在浏览器中运行，并且数据似乎仍然存在。但我无法访问 PHPMyAdmin。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T05:24:02.063

这可以通过清除 cookie 来解决。要了解如何清除 cookie，请查看此 [Clearing cache and cookies](http://support.google.com/accounts/bin/answer.py?hl=en&answer=32050)链接。您还可以使用google chrome和 firefox [webdeveloper的](https://addons.mozilla.org/en-us/firefox/addon/web-developer/)[Web Developer 工具](http://chrispederick.com/work/web-developer/)来查看和清除 cookie

# javascript - Javascript图像编辑插件

> ID：12311359
> 
> 赞同：8
> 
> 时间：2012-09-07T03:33:36.283
> 
> 标签：javascript, jquery, image, plugins

我在哪里可以找到 Javascript 或 jQuery 图像编辑器插件，用户可以在其中单击图像进行编辑，并且该插件允许他们裁剪、调整大小、旋转、翻转等

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T19:13:01.887

[Pixastic](http://pixastic.com/lib/)和[CamanJS](http://camanjs.com)会很有用，但~~最好的绝对是[Aviary](http://aviary.com/web)~~（自 2018 年 12 月起已弃用）。

# apache - 将目录重定向到新地址

> ID：12311360
> 
> 赞同：0
> 
> 时间：2012-09-07T03:33:42.523
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

嗨，我想将我的目录重定向到新地址并从末尾删除 .html ext

例子：

```
http://www.mysite.com/viewdownload/11-e/652-elena-2010.html
redirect to
http://www.mysite.com/download/viewdownload/11-e/652-elena-2010 
```

或者

```
http://www.mysite.com/viewdownload/9-b/1281-birdsong-2012.html
redirect to
http://www.mysite.com/download/viewdownload/9-b/1281-birdsong-2012 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T03:37:01.320

假设安装了 mod_rewrite，只需在 .htaccess 文件中使用 URL 重写。您可以使用 URL 重写来重定向用户以及进行内部传输。

一个很好的参考在这里：[http ://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

请注意，如果有任何自定义逻辑可以将旧 URI 映射到新 URI，您可能需要将旧 URI 重写为 PHP 脚本，然后该脚本返回所需的文件。

# django - 将项目部署到bitnami后django postgresql数据库中的关系数据库错误

> ID：12311363
> 
> 赞同：4
> 
> 时间：2012-09-07T03:34:11.313
> 
> 标签：django, postgresql, deployment, bitnami

我正在使用 amazon ec2 和 bitnami-djangostack ami 部署我的 django 项目。

当我在本地开发应用程序时，我使用了 mysql。但是在部署项目后，我使用了默认的 bitnami postgresql。

现在我收到以下错误：

```
django.db.utils.DatabaseError: relation "appName_appName" does not exist
LINE 1: SELECT (1) AS "a" FROM "appName_appName" WHERE "appName_a...
                           ^ 
```

我不知道为什么数据库两次命名数据库（appName_appName）。

这是完整的终端：

```
bitnami@dom:/opt/bitnami/projects/Project$ sudo python manage.py syncdb
/opt/bitnami/apps/django/lib/python2.6/site-packages/django/db/__init__.py:60: DeprecationWarning: Short names for ENGINE in database configurations are deprecated. Prepend default.ENGINE with 'django.db.backends.'
  DeprecationWarning
/opt/bitnami/projects/Project/cookbook/models.py:94: DeprecationWarning: A Field class whose db_type method hasn't been updated to take a `connection` argument.
  class JSONField(models.TextField):
Syncing...
Creating tables ...
Creating table auth_permission
Creating table auth_group_permissions
Creating table auth_group
Creating table auth_user_user_permissions
Creating table auth_user_groups
Creating table auth_user
Creating table auth_message
Creating table django_content_type
Creating table django_session
Creating table django_site
Creating table django_admin_log
Creating table registration_registrationprofile
Creating table south_migrationhistory

You just installed Django's auth system, which means you don't have any superusers defined.
Would you like to create one now? (yes/no): yesa
Please enter either "yes" or "no": yes
Username (Leave blank to use 'root'): xxxx
E-mail address: xxxxx
Password: xxx
Password (again): xxx
Traceback (most recent call last):
  File "manage.py", line 14, in <module>
    execute_manager(settings)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/management/__init__.py", line 438, in execute_manager
    utility.execute()
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/management/__init__.py", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/management/base.py", line 191, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/management/base.py", line 220, in execute
    output = self.handle(*args, **options)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/management/base.py", line 351, in handle
    return self.handle_noargs(**options)
  File "/opt/bitnami/python/lib/python2.6/site-packages/South-0.7.6-py2.6.egg/south/management/commands/syncdb.py", line 90, in handle_noargs
    syncdb.Command().execute(**options)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/management/base.py", line 220, in execute
    output = self.handle(*args, **options)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/management/base.py", line 351, in handle
    return self.handle_noargs(**options)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/management/commands/syncdb.py", line 109, in handle_noargs
    emit_post_sync_signal(created_models, verbosity, interactive, db)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/management/sql.py", line 190, in emit_post_sync_signal
    interactive=interactive, db=db)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/dispatch/dispatcher.py", line 172, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/contrib/auth/management/__init__.py", line 70, in create_superuser
    call_command("createsuperuser", interactive=True)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/management/__init__.py", line 166, in call_command
    return klass.execute(*args, **defaults)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/management/base.py", line 220, in execute
    output = self.handle(*args, **options)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/contrib/auth/management/commands/createsuperuser.py", line 134, in handle
    User.objects.create_superuser(username, email, password)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/contrib/auth/models.py", line 140, in create_superuser
    u = self.create_user(username, email, password)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/contrib/auth/models.py", line 136, in create_user
    user.save(using=self._db)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/db/models/base.py", line 460, in save
    self.save_base(using=using, force_insert=force_insert, force_update=force_update)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/db/models/base.py", line 570, in save_base
    created=(not record_exists), raw=raw, using=using)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/dispatch/dispatcher.py", line 172, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/opt/bitnami/projects/Project/cookbook/models.py", line 68, in create_cookbook_for_user
    if created and not instance.cookbooks.exists():
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/db/models/manager.py", line 192, in exists
    return self.get_query_set().exists(*args, **kwargs)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/db/models/query.py", line 496, in exists
    return self.query.has_results(using=self.db)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/db/models/sql/query.py", line 424, in has_results
    return bool(compiler.execute_sql(SINGLE))
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/db/models/sql/compiler.py", line 735, in execute_sql
    cursor.execute(sql, params)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/db/backends/util.py", line 34, in execute
    return self.cursor.execute(sql, params)
  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 44, in execute
    return self.cursor.execute(query, args)
django.db.utils.DatabaseError: relation "appName_appName" does not exist
LINE 1: SELECT (1) AS "a" FROM "appName_appName" WHERE "appName_a...
                               ^ 
```

谢谢你，凯蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T02:29:31.390

我刚刚将 appname_appname 添加到我的数据库中，它现在可以正常工作了。

抱歉误导-我的错误。我仍然不明白为什么这段代码没有被添加到 syncdb 上的数据库中。

但现在一切都很好

# asp.net-mvc - 如何扩展 html.textboxfor 以删除 name 属性？

> ID：12311364
> 
> 赞同：4
> 
> 时间：2012-09-07T03:34:13.250
> 
> 标签：asp.net-mvc

我想扩展 helper 使它像这样：

```
 @html.TextBoxFor(x=>x.CustomerId).ReadOnly() 

```

并输出不带name属性的input元素，这样就不会发布到服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T07:38:53.553

这应该可以解决问题：

```
public static class MyInputExtensions
{
    public static MvcHtmlString NameLessTextBoxFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression)
    {
        var textBox = htmlHelper.TextBoxFor(expression);

        string pattern = @"name=""([^""]*)""";

        string fixedHtml = Regex.Replace(textBox.ToHtmlString(), pattern, "");

        return new MvcHtmlString(fixedHtml);
    } 
} 
```

用法：

```
@Html.NameLessTextBoxFor(x=> x.CustomerId) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-19T16:02:38.100

你不能这样做。

（至少没有一些丑陋的解决方法来处理从助手返回的字符串值）

编写 Html 帮助程序是为了帮助您为模型生成表单字段，目的是它们会将数据发送到服务器。对于强类型助手（如`Html.TextBoxFor(x => x.CustomerId)`），名称取自[传递的表达式](https://github.com/aspnet/AspNetWebStack/blob/ba26cfbfbf958d548e4c0a96e853250f13450dc/src/System.Web.Mvc/Html/InputExtensions.cs#L458)，对于非强类型助手（如`Html.TextBoxFor("CustomerId", Model.CustomerId)`），当名称为空或为空时，[检查会引发异常。](https://github.com/aspnet/AspNetWebStack/blob/ba26cfbfbf958d548e4c0a96e853250f13450dc/src/System.Web.Mvc/Html/InputExtensions.cs#L487)

如果您想生成没有“名称”属性的输入，那么就**不要使用 html 辅助**方法。

例如，如果您想更改 html 帮助程序的用法以生成相同的输出但没有“名称”属性，那么：

1.  而不是这个：

```
@Html.TextBoxFor(x => x.BetAmount) 
```

1.  写这个：

```
<input type="text" value="@Model.BetAmount" /> 
```

2.  而不是这个：

```
@Html.TextBoxFor(x => x.BetAmount, new { @class = "red", placeholder = "Type Stuff", data_maximum_value = Model.MaximumBetAmount }) 
```

2.  写这个：

```
<input type="text" value="@Model.BetAmount" class="red" placeholder="Type Stuff" data_maximum_value="@Model.MaximumBetAmount" /> 
```

3.  而不是这个（你使用带有“格式”参数的重载）：

```
@Html.TextBoxFor(x => x.BetAmount, "{0:0}", new { @class = "blue" }) 
```

3.  写这个：

```
<input type="text" value="@Html.FormatValue(Model.BetAmount,"{0:0}")" class="red" /> 
```

因为在传递“格式”参数时`Html.TextBoxFor` [使用。](https://github.com/aspnet/AspNetWebStack/blob/ba26cfbfbf958d548e4c0a96e853250f13450dc/src/System.Web.Mvc/Html/InputExtensions.cs#L497) `Html.FormatValue`

这与 html 助手所做的并不完全相同，因为 html 助手首先尝试从 ModelState 获取数据以进行验证（这是一个[常见的陷阱](https://weblog.west-wind.com/posts/2012/apr/20/aspnet-mvc-postbacks-and-htmlhelper-controls-ignoring-model-changes)）。但在 99% 的情况下，这可能就足够了

如果您想知道辅助方法实际在做什么，我建议您检查 ASP.NET MVC 的实际[源代码。](https://github.com/aspnet/AspNetWebStack/)这不是黑魔法。

# android - 使用 NDK 在 WebView 中拦截 POST

> ID：12311365
> 
> 赞同：3
> 
> 时间：2012-09-07T03:34:17.277
> 
> 标签：android, android-ndk, http-post, android-webview

我试图在 WebView android 中拦截 http POST 方法，但找不到任何合适的方法。在 API 11 中有一个方法 shouldInterceptRequest，但它只提供 webviewq 和 url 作为参数，因此只满足 GET 请求，它不提供 POST 正文数据和请求类型指示符。

我的问题：有没有办法在 android NDK 中覆盖这个方法？或者如果我可以传递一个标识请求的标志，我也可以提供 POST 数据。

另外，如果您有任何其他解决方案，请告诉我。

# jquery - 您如何使用 jQuery 的 .each() 将相同的脚本应用于具有相同类的每个元素？

> ID：12311368
> 
> 赞同：0
> 
> 时间：2012-09-07T03:34:52.163
> 
> 标签：jquery, each

我有一个**列出了多个购物车项目。当客户将鼠标悬停在购物车项目上时，我有一个“x 战警标志”外观的删除按钮，我想在项目旁边淡入。**

 **当列表中只有一项时，我没有问题让它工作。但是，当购物车中有多个商品时，jQuery 的操作很时髦。它仍然会淡入，但只有当我将鼠标悬停在购物车中的最后一项时，当然所有“删除 X”图像都变得可见。啊...

所以我四处搜索并认为**.each()**是我的救星。我一直试图让它工作，但没有运气。当我尝试实现它时，我的脚本就中断了。

**任何人对此 * *.each()****事物以及如何将其实现到我的脚本中都有任何指示？**

我尝试`cartItem.each(function(){`在 mouseEnter/mouseLeave 事件周围放置一个（并使用一些`$(this)`选择器使其“有意义”），但这并没有做任何事情。也尝试了其他一些事情，但没有运气...

我通常会使用自己的 id 而不是使用类来制作每个删除按钮，然后用我们的 ASP 文件中的 (i) 填充该值，然后为每个按钮复制以下内容，但必须有另一种方式。那是不必要的……不是吗？

这是 HTML（对不起，有很多）：

```
<ul id="head-cart-items">
 <!-- Item #1 -->
 <li>
  <!-- Item #1 Wrap -->
  <div class="head-cart-item">

   <div class="head-cart-img" style='background-image:url("/viewimageresize.asp?mh=50&amp;mw=50&amp;p=AFE&amp;f=Air_Intakes_Magnum_FORCE_Stage-1_PRO_5R")'>
   </div>

   <div class="head-cart-desc">
    <h3>
     <a href="/partdetails/AFE/Intakes/Air_Intakes/Magnum_FORCE_Stage-1_PRO_5R/19029">AFE Magnum FORCE Stage-1 PRO 5R Air Intakes</a>
    </h3>
    <span class="head-cart-qty">Qty: 1</span>
    <span class="head-cart-price">$195.00</span>

    <!-- Here is my Remove-X... -->
    <a class="remove-x" href='/cart//7806887'>
     <img src="/images/misc/remove-x.png">
    </a>
   </div>

  </div>
 </li>

 <!-- Item #2 -->
 <li>
  <!-- Item #2 Wrap -->
  <div class="head-cart-item">

   <div class="head-cart-img" style='background-image:url("/viewimageresize.asp?mh=50&amp;mw=50&amp;p=Exedy&amp;f=Clutch_Kits_Carbon-R")'>
   </div>

   <div class="head-cart-desc">
    <h3>
     <a href="/partdetails/Exedy/Clutch/Clutch_Kits/Carbon-R/19684">Exedy Carbon-R Clutch Kits</a>
    </h3>
    <span class="head-cart-qty">Qty: 1</span>
    <span class="head-cart-price">$2,880.00</span>

    <!-- Here is my other Remove-X... -->
    <a class="remove-x" href='/cart//7806888'>
     <img src="/images/misc/remove-x.png">
    </a>
   </div>

  </div>
 </li>
</ul> 
```

这里是 jQuery...

```
$(document).ready(function(){

    var removeX = $(".remove-x");
    var cartItem = $(".head-cart-item");

    // Start with an invisible X
    removeX.fadeTo(0,0);

    // When hovering over Cart Item
    cartItem.mouseenter(function(){

        // Fade the X to 100%
        removeX.fadeTo("normal",1);

        // On mouseout, fade it back to 0%
        $(this).mouseleave(function(){
            removeX.fadeTo("fast",0);
        });

    });

}); 
```

如果你没有看到它，这里是我试图淡化的“X”......

```
 <!-- Here is my Remove-X... -->
    <a class="remove-x" href='/cart//7806887'>
     <img src="/images/misc/remove-x.png">
    </a> 
```

我在这里先向您的帮助表示感谢。你们总是在这里震撼我的世界。我需要你（直到现场直播才能回家...... :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T03:43:08.390

这`this/$(this)`是非常有用的地方

```
$(document).ready(function(){
    var cartItem = $(".head-cart-item");

    // Start with an invisible X
    $('.remove-x').fadeTo(0,0);

    // When hovering over Cart Item
    cartItem.mouseenter(function(){           
       // Fade the X to 100%
       $('.remove-x',this).fadeTo("normal",1);    
       // On mouseout, fade it back to 0%
     }).mouseleave(function(){
        $('.remove-x',this).fadeTo("fast",0);
     });        
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T03:43:38.203

你有多个 remove-x 元素，所以它只褪色最后一个。试试这个。

```
// When hovering over Cart Item
cartItem.mouseenter(function(){
    var removeX = $(this).find(".remove-x");
    // Fade the X to 100%
    removeX.fadeTo("normal",1);

    // On mouseout, fade it back to 0%
    $(this).mouseleave(function(){
            removeX.fadeTo("fast",0);
    });
}); 
```**

# android - killBackgroundProcesses 不适用于设置？

> ID：12311369
> 
> 赞同：0
> 
> 时间：2012-09-07T03:35:25.970
> 
> 标签：android

我想通过使用 killBackgroundProcesses 来杀死 SETTINGS 的后台进程。但它不工作没有任何错误？我使用 API(8) 级别 2.2 并在清单中具有 KILL_BACKGROUND_PROCESSES 权限。

```
 ActivityManager activityManager = (ActivityManager)getApplicationContext().getSystemService(Context.ACTIVITY_SERVICE); 
  activityManager.killBackgroundProcesses("com.android.settings"); 
```

“com.android.settings”由ActivityManager中getRunningTasks的getPackageName检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:12:47.820

`killBackgroundProcesses()`静默跳过作为用户“系统”运行的包，其中包括*com.android.settings*。换句话说，`killBackgroundProcesses()`不适用于系统应用程序。

查看进程拥有的用户 ID 的一种简单方法是使用`adb shell top`，它位于`UID`列中：

```
 PID PR CPU% S  #THR     VSS     RSS PCY UID      Name
15828  0   0% S    12 488668K  40124K  fg system   com.android.settings
                                          ^ 
```

# android - 我怎么知道振动器是否在工作？

> ID：12311373
> 
> 赞同：2
> 
> 时间：2012-09-07T03:36:04.753
> 
> 标签：android

android手机振动时是否会触发任何事件，以便我可以订阅我的事件处理程序？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T03:42:02.963

您可以使用[Context.getSystemService()](http://developer.android.com/reference/android/content/Context.html#getSystemService%28java.lang.String%29)来获取[Vibrator](http://developer.android.com/reference/android/os/Vibrator.html)对象。使用该对象，您可以识别手机是否有振动器。

```
Vibrator vibrator  = context.getSystemService(Context.VIBRATOR_SERVICE); 
```

要识别手机是否有振动器，请使用[hasVibrator()](http://developer.android.com/reference/android/os/Vibrator.html#hasVibrator%28%29)

```
 vibrator.hasVibrator() 
```

您可以使用开始和停止振动

```
vibrate.vibrate(long milliseconds);
vibrate.cancel(); 
```

# 编辑：看到op的评论后..

我认为当手机开始振动 AFAIK 时您不会收到通知。（如果有人清除我的错误，很高兴）..您可以确定手机是处于振动模式还是静音模式或正常模式（见[这个](https://stackoverflow.com/questions/2048427/how-can-i-detect-whether-the-android-phone-in-silent-mode-programatically)）..但是振动模式并不意味着手机现在正在振动..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T03:43:46.817

getVibrateSetting(int vibrateType) 但是：此方法已弃用。[应用程序应根据可通过getRingerMode()](http://developer.android.com/reference/android/media/AudioManager.html#getRingerMode%28%29)查询的当前振铃模式维护自己的振动策略。

# google-maps - 谷歌地图或开放街道或其他东西

> ID：12311375
> 
> 赞同：0
> 
> 时间：2012-09-07T03:36:16.360
> 
> 标签：google-maps, google-maps-api-3, openstreetmap, geotagging

一段时间以来，我一直在为一个与体育相关的网站研究一个概念，用户可以在地图上记录一个位置，并将该位置放入一项运动的类别中，然后按一两个指标对其进行评分。我希望这些指标显示在地图上，但我想要一个链接或按钮来查看完整的页面描述。

我知道这可以通过谷歌地图实现，但我对 Open Street Maps 或其他选项知之甚少。我预计每天大约有 50,000 次观看，并且很好奇最好的选择是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T06:51:56.747

这两个框架都运行良好，从您的用例来看，您应该能够使用其中任何一个。有一些事情要记住：

*   数据集：谷歌地图对用户来说可能看起来更“熟悉”
*   使用限制：谷歌地图的使用限制为[每天 25000](https://developers.google.com/maps/faq#usagelimits)次地图加载，之后加载 1000 次地图需要 0.5 美元
*   [Leaflet](http://leaflet.cloudmade.com/)库在使用 OSM 时是一个很好的库，并且正在积极开发中。它是免费的，以及 OSM 瓷砖
*   根据您的磁贴提供商，来自 Google 的磁贴加载速度可能会更好 - 可能是由于他们的 CDN。
*   ...但是您当然可以使用其他自定义图块，例如来自[Mapquest](http://www.fubra.com/blog/2011/11/24/google-maps-free-alternatives/)，或者您可以滚动自己的图块，例如通过[TileMill](http://mapbox.com/tilemill/)

最后，我们决定将 Leaflet 与 Mapquest 瓦片一起使用，到目前为止我们非常满意。我们需要 Leaflet 中的一些附加功能来完成更高级的任务，但我们开发了这些功能并为 Leaflet 提供了补丁。Mapquest 的瓦片加载速度不如 Google，但我们的用户已经习惯了 Leaflet 和 Mapquest 的外观和感觉。

# ios - 警报键盘可以用于 iOS 上的任何文本字段吗？

> ID：12311376
> 
> 赞同：3
> 
> 时间：2012-09-07T03:36:19.800
> 
> 标签：ios, xcode, ios5, keyboard

我正在开发我的第一个 iOS 应用程序，我真的很喜欢警报键盘的外观。我想知道我是否可以将它用于任何页面，或者是否有特定原因？我不希望我的第一个应用程序因为一些不重要的事情而被拒绝，但这将是一个很好的补充。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T03:41:22.253

您可以将它用于任何您想要的东西，alert 只不过是一种键盘样式，并且绝对没有任何地方可以告诉您可以和不能使用它。

```
[myTextField setKeyboardAppearance:UIKeyboardAppearanceAlert]; 
```

# php - jquery 悬停和while循环

> ID：12311378
> 
> 赞同：0
> 
> 时间：2012-09-07T03:36:53.833
> 
> 标签：php, javascript, jquery

我有一个带有while循环的php表来显示记录。

我添加了一个 jQuery 悬停处理程序来做到这一点，如果悬停它会在同一行显示一条消息，但问题是，如果悬停它会在所有行中显示一条消息。

这是CSS：

```
<style>
  .tansa{
    position: absolute;
    margin-right: -60px;
    margin-top:-25px;
    background: #CBDFF3; border: 1px solid #4081C3; font-size: 0.88em;
    padding: 2px 7px; display: inline-block;
    border-radius: 8px; -moz-border-radius: 8px; -webkit-border-radius: 8px;
    line-height: 1.2em; 
    text-shadow: 0 0 0em #FFF;
    overflow: hidden;
    text-align: center;
    color:black;
    display:none;
  }

  .arrow{ 
    position: relative;
    width: 0;
    height: 0;
    top: -25px;
    border-top: 5px solid #000000;
    border-right: 5px solid transparent;
    border-left: 5px solid transparent;
    display:none;
  }
</style> 
```

这是我的php：

```
<table><tr>row</tr>
<?php
$results = mysql_query("select * from MyTable");
while{$r = mysql_fetch_array($results)){
echo "<tr><td>Row : <img src='img/tans.png' width='24' height='24' class='tansef' /><span      class='tansa' >the message</span><div class='arrow'></div></td></tr>";
}
?>
</table> 
```

这是jquery

```
$(document).ready(function(){
  $('.tansef').hover(function(){
    var sh = $('.tansa');
    var sharrow = $('.arrow');
    sh.show();
    sharrow.show();
  }, function(){
    var shs = $('.tansa');
    var sharrows = $('.arrow');
    shs.hide();
    sharrows.hide();
  });
}); 
```

任何解决方案仅在每一行中显示消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T03:42:18.987

尝试改变：

```
var sh = $('.tansa');
var sharrow = $('.arrow'); 
```

到：

```
var sh = $(this).siblings('.tansa');
var sharrow = $(this).siblings('.arrow'); 
```

（以及等效的 shs 和 sharrows 变量）。您的代码正在引用具有特定类的所有元素，而不是那些相对于通过使用悬停的元素的元素`this`。

**[jsFiddle 示例](http://jsfiddle.net/j08691/ep2pq/)**

# json - 让 Python 2.7 的“json”在遇到随机字节字符串时不抛出异常

> ID：12311380
> 
> 赞同：0
> 
> 时间：2012-09-07T03:36:59.587
> 
> 标签：json, google-app-engine, character-encoding, python-2.7, simplejson

`json`尝试使用 Python 2.7 （即：）将 dict 对象序列化为 json 字符串`import json`。

```
Example:
json.dumps({
    'property1':        'A normal string',
    'pickled_property': \u0002]qu0000U\u0012
}) 
```

该对象中有一些字节字符串是使用“腌制”的数据`cPickle`，因此出于 json 的目的，它们基本上是随机字节字符串。我正在使用 django.utils `simplejson`，这很好用。但我最近在谷歌应用引擎上切换到 Python 2.7，他们似乎不再有 simplejson 可用。

现在我正在使用`json`，当它遇到不属于 UTF-8 的字节时会引发异常。我得到的错误是：

```
UnicodeDecodeError：“utf8”编解码器无法解码位置 0 的字节 0x80：无效的起始字节

```

如果它像调试可能那样打印出一串字符代码会很好，即：`\u0002]q\u0000U\u001201`. 但我真的不太关心它如何处理这些数据，只要它不抛出异常并继续序列化它确实识别的信息。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T06:32:11.070

[JSON 规范](http://www.json.org/)根据unicode 字符定义字符串。出于这个原因，`json`模块假定`str`它接收到的任何实例都包含编码的 unicode 文本。它将尝试将 UTF-8 作为其默认编码，当您的字符串输出`pickle.dumps`可能不是有效的 UTF-8 序列时，这会导致麻烦。

幸运的是，解决问题很容易。您只需要告诉`json.dumps`函数使用什么编码而不是 UTF-8。以下将起作用，即使`my_bytestring`不是有效的 UTF-8 文本：

```
import json, cPickle as pickle

my_data = ["some data", 1, 2, 3, 4]
my_bytestring = pickle.dumps(my_data, pickle.HIGHEST_PROTOCOL)
json_data = json.dumps(my_bytestring, encoding="latin-1") 
```

我相信任何 8 位编码都可以代替`latin-1`此处使用的编码（请确保稍后使用相同的编码进行解码）。

当您想解开 JSON 编码数据时，您需要调用`unicode.decode`，因为`json.loads`总是将编码字符串作为`unicode`实例返回。因此，要从上面`my_data`恢复列表`json_data`，您需要以下代码：

```
my_unicode_data = json.loads(json_data)
my_new_bytestring = my_unicode_data.encode("latin-1")  # equal to my_bytestring
my_new_data = pickle.loads(my_new_bytestring)          # equal to my_data 
```

# linux - 挂载点 /dev/sdb1/mnt 不是目录

> ID：12311383
> 
> 赞同：1
> 
> 时间：2012-09-07T03:37:06.697
> 
> 标签：linux, archlinux

我正在安装 Arch Linux，并按照在线说明安装 /dev/sdb1/mnt。

当我输入

```
mount /dev/sdb1/mnt 
```

它返回

```
mount: you must specify the filesystem type 
```

同时使用 auto 和 ext4 （我的文件系统类型，我很确定）

```
mount auto /dev/sdb1/mnt 
```

我明白了

```
mount: mount point /dev/sdb1/mnt is not a directory 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T03:56:49.120

您缺少一个空格：

```
# right here---v
mount /dev/sdb1 /mnt 
```

mount 命令需要一个设备和一个目录。`/dev/sdb1`是设备，`/mnt`是目录。

# knockout.js - 可观察数组，其中数组中的每个项目都包含一个数组 - 如何使内部数组可观察

> ID：12311385
> 
> 赞同：3
> 
> 时间：2012-09-07T03:37:19.097
> 
> 标签：knockout.js

**问题**：我让 Json 从服务器返回。Json 是一系列业务，其中每个业务可以有多个联系人。我还想让联系人成为一个可观察的数组，以便绑定到联系人的 html 元素在删除时得到更新，而数组在编辑时得到更新。

我已经设置了以下 jsFiddle - [http://jsfiddle.net/rdotlee/GCwjX/1/](http://jsfiddle.net/rdotlee/GCwjX/1/)。

这是我来自 jsFiddle 的视图模型。

```
 var businessViewModel =
{
    allBusinesses: ko.observableArray([
                                        { name: "Biz1", id: 1, Contacts: [{ name: "Joe", email: "test@test", phone: "555-111-1111" }, { name: "Smith", email: "smith@test", phone: "777-111-2223"}] },
                                        { name: "Biz2", id: 2, Contacts: [{ name: "Joe", email: "test@test", phone: "555-222-1111" }, { name: "Smith", email: "smith@test", phone: "555-111-2222"}] }
                                      ]),

    businessId: ko.observable(1)

};

businessViewModel.selectedBusiness = ko.dependentObservable(function () {
    var biz = this.allBusinesses()[0];

    for (var i = 0; i < this.allBusinesses().length; i++) {
        if (this.allBusinesses()[i].id == this.businessId()) {
            biz = this.allBusinesses()[i];
            break;
        }
    }
    return biz;
}, businessViewModel);

businessViewModel.removeContact = function (contact) {
    ko.utils.arrayRemoveItem(this.selectedBusiness().Contacts, contact);
    ko.applyBindings(businessViewModel, $("#sectionBusinesses")[0]);
} .bind(businessViewModel); 
```

做我需要的最干净/推荐的方法是什么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:57:55.350

首先，我不确定您为什么每次删除联系人时都调用 ko.applyBindings 。您通常只想调用一次 applyBindings，而这通常会导致问题。

我建议使用 ko.mapping 插件，这将使整个过程相当轻松。

我还更新了您的 removeContact 以使用更新后的 ViewModel 并稍微更改了您的 selectedBusiness 。

这是小提琴： http: [//jsfiddle.net/GCwjX/5/](http://jsfiddle.net/GCwjX/5/) 和代码：

```
var jsonData = {
    allBusinesses: [{
        name: "Biz1",
        id: 1,
        Contacts: [{
            name: "Joe",
            email: "test@test",
            phone: "555-111-1111"},
        {
            name: "Smith",
            email: "smith@test",
            phone: "777-111-2223"}]},
    {
        name: "Biz2",
        id: 2,
        Contacts: [{
            name: "Joe",
            email: "test@test",
            phone: "555-222-1111"},
        {
            name: "Smith",
            email: "smith@test",
            phone: "555-111-2222"}]}]
};
var businessViewModel = {
    allBusinesses: ko.observableArray(),
    businessId: ko.observable(1)
};

businessViewModel.selectedBusiness = ko.dependentObservable(function() {
    var biz = this.allBusinesses()[0];
    biz = ko.utils.arrayFirst(this.allBusinesses(), function(item) { 
        return (item.id() === parseInt(this.businessId())); 
    }, this);
    return biz;
}, businessViewModel);

businessViewModel.removeContact = function(contact) {
    this.selectedBusiness().Contacts.remove(contact);
}.bind(businessViewModel);

ko.mapping.fromJS(jsonData, {}, businessViewModel);
ko.applyBindings(businessViewModel);​ 
```

# ruby-on-rails - Rails 3嵌套形式

> ID：12311388
> 
> 赞同：1
> 
> 时间：2012-09-07T03:38:11.193
> 
> 标签：ruby-on-rails, ajax, forms, nested-forms

我对嵌套表单有疑问，我已经调查了一些可能的解决方案（[嵌套表单 gem](https://github.com/ryanb/nested_form "1")、[Railscasts](http://railscasts.com/episodes/197-nested-model-form-part-2)），但仍然不知道如何实现它。

我的问题完全基于上面的解决方案，所以如果你需要，请阅读:)

现在，我的问题是：如果我想在“创建/编辑”**调查**后每页添加/编辑“只有一个”**问题（它是答案）** ，我该怎么做？

 **换句话说，“创建/编辑”**调查**页面中只有一个**Question**（但可能有动态数量的**Answers ）字段。**以及如何 **添加另一个问题**， **编辑上一个问题**或 **删除当前问题** 功能。

 ******我尝试通过两种方法解决这个问题，一种是每次添加新问题时都使用 javascript 隐藏上一个问题，但是在这个模式中，我无法编辑现有问题。

另一个正在使用 Ajax，但是……我不知道。********

# python - Python 错误：未定义名称“管理员”

> ID：12311390
> 
> 赞同：15
> 
> 时间：2012-09-07T03:38:26.607
> 
> 标签：python, django, django-models, django-admin, django-urls

我第一次在 Django 中创建 Python 应用程序。我知道我必须取消注释 urls.py 中的管理工具，我已经这样做了。我也加了`autodiscover`。每次我尝试向管理面板添加新功能时，都会收到此错误：

“NameError：名称'admin'未定义”

这是我在模型中使用以添加到管理面板的代码：

```
class ChoiceInline(admin.StackedInline):
    model = Choice
    extra = 3

    class PollAdmin(admin.ModelAdmin):
    fieldsets = [
        (None,               {'fields': ['question']}),
        ('Date information', {'fields': ['pub_date'], 'classes': ['collapse']}),
    ]
    inlines = [ChoiceInline] 
```

这是我正在使用的python终端中的代码

```
admin.site.register(Poll, PollAdmin) 
```

这是我的 urls.py 中的代码：

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'iFriends.views.home', name='home'),
    # url(r'^iFriends/', include('iFriends.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
    ) 
```

有人知道为什么找不到管理员名称吗？

**编辑**

这是我的整个模型文件：

```
from django.db import models

class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')
    def __unicode__(self):
        return self.question
    def was_published_recently(self):
        return self.pub_date >= timezone.now() - datetime.timedelta(days=1)

    class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice_text = models.CharField(max_length=200)
    votes = models.IntegerField()
    def __unicode__(self):
        return self.choice_text

#COMMENTED OUT UNTIL I FIX THE ADMIN NAME
from django.config import admin

class ChoiceInline(admin.StackedInline):
    model = Choice
    extra = 3

    class PollAdmin(admin.ModelAdmin):
    fieldsets = [
        (None,               {'fields': ['question']}),
        ('Date information', {'fields': ['pub_date'], 'classes': ['collapse']}),
    ]
    inlines = [ChoiceInline]

#ADD THIS TO THE MAIN PYTHON FUNCTION
admin.site.register(Poll, PollAdmin) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T04:52:10.833

`from django.config import admin`应该`from django.contrib import admin`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-03T21:06:30.070

在`**url.py**`文件顶部，添加以下代码

```
from django.contrib import admin
admin.autodiscover() 
```

因此，该特定块应如下所示

* * *

```
from django.conf.urls import patterns, include, url
**from django.contrib import admin
admin.autodiscover()**

# Uncomment the next two lines to enable the admin:
# from django.contrib import admin
# admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'examplesite.views.home', name='home'),
    # url(r'^examplesite/', include('examplesite.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    #url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
**url(r'^admin/', include(admin.site.urls)),**

) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-21T19:34:13.387

我像这样更改我的 urls.py ......这应该是基本格式

```
from django.conf.urls import  include, url
from django.contrib import admin

admin.autodiscover()
urlpatterns = [
     url(r'^admin/', include(admin.site.urls)),
    ] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-01T00:07:13.957

经过漫长而痛苦的寻求解决这个愚蠢的问题，我终于找到了答案！另一个 Django 程序员遇到了同样的问题，发现了这个：

在 ChoiceInLine 的父级中（您将在本教程中看到“admin.StackedInline”），StackedInline 中的 L 不应该大写……就这么简单……非常感谢 Karen Tracey……

[http://grokbase.com/p/gg/django-users/133v4wx0sx/django-1-5-tutorial-error-module-has-no-attribute-stackedinline](http://grokbase.com/p/gg/django-users/133v4wx0sx/django-1-5-tutorial-error-module-has-no-attribute-stackedinline)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T03:59:56.427

我怀疑您`from django.contrib import admin`的模型文件中没有定义`ModelAdmin`类的`class ChoiceInline(admin.StackedInline):`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T04:47:29.880

您应该将管理员代码（#COMMENTED OUT 直到我修复管理员名称之后的所有内容）放到 admin.py

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-20T15:31:44.010

为我解决这个问题的一种方法是在开头添加这个`admin.py`：

```
from django.contrib import admin 
```

# apache - mod_rewrite - 301 重定向问题

> ID：12311395
> 
> 赞同：0
> 
> 时间：2012-09-07T03:38:57.057
> 
> 标签：apache, mod-rewrite

我已经为这个看似简单的重定向任务苦苦挣扎了好几个小时，而我的一生都无法让它继续下去。无论我在 url 中传递**1** *还是* **19**的值，在这两种情况下它都会将我重定向到**http://mywebsite.com/catalogue-gifts/chicks**。（理想情况下，我希望第二个条件/规则将用户带到**http://mywebsite.com/catalogue-gifts/mango-fruit-trees/**）

以下是我所拥有的：

```
RewriteCond %{QUERY_STRING} pID=1<br />
RewriteRule ^product_details2\.asp$ http://mywebsite.com/catalogue-gifts/chicks$1? [L,R=301]

RewriteCond %{QUERY_STRING} pID=19<br />
RewriteRule ^product_details2\.asp$ http://mywebsite.com/catalogue-gifts/mango-fruit-trees$1? [L,R=301] 
```

非常感谢任何帮助..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T03:47:52.113

这是因为`RewriteCond`匹配是有界的正则表达式。因此，如果您在查询字符串中有：

```
pID=19 
```

它将匹配`pID=1`，因为它不检查查询字符串的结尾，`pID=1`是`pID=19`.

您需要将条件更改为：

```
RewriteCond %{QUERY_STRING} pID=1(&|$) 
```

和

```
RewriteCond %{QUERY_STRING} pID=19(&|$) 
```

`(&|$)`末尾的表示在这些数字之后，您有一个字符`&`（用于另一个参数）或字符串的结尾 ( `$`)。

此外，如果您担心其他可能以`pID`, like结尾的查询字符串参数`foopID`，那么您应该在这些正则表达式的前面添加一个边界检查，如下所示：

```
RewriteCond %{QUERY_STRING} (^|&)pID=1(&|$) 
```

所以`(^|&)`要么是查询字符串的开头，要么是一个`&`字符。

# mysql - 带有 SUM 的 MySQL LEFT JOIN 很慢

> ID：12311396
> 
> 赞同：3
> 
> 时间：2012-09-07T03:39:06.923
> 
> 标签：mysql, performance, query-optimization, sum, left-join

我需要优化此查询的想法：

```
SELECT U.Id
    , U.Name
    , SUM(P.Credit) AS CreditAmount
    , SUM(P.Debit) AS DebitAmount
    FROM users U
    LEFT JOIN payments P ON P.UserId = U.Id
    WHERE U.StatusId = 1 /* Active Users Only */
    GROUP BY U.Id 
```

有关表格的一些信息：

1.  `users`表：10,000+ 条记录
2.  `payments`表：2,000,000+ 条记录，按`UserId`列索引

查询最多需要 2 分钟。通过查询查询，发现`SUM`函数是查询慢的原因。`SUM`尝试在不到 2 秒的情况下执行查询。

有没有改进这个查询的空间？谢谢

**编辑 1**

这是我使用时得到的`EXPLAIN`：

```
id  select_type table   type    possible_keys   key     key_len     ref             rows    Extra
1   SIMPLE      U       ALL                                                         8304    Using where; Using temporary; Using filesort
1   SIMPLE      P       ref     UserId          UserId  5           Database.U.Id   361     "" 
```

该索引`payments.UserId`正在查询中使用。对此有什么想法吗？

**编辑 2** 表信息：

```
users   "CREATE TABLE `users` (
  `Id` int(11) NOT NULL auto_increment,
  `StatusId` int(11) default NULL,
  `Name` varchar(60) default NULL,
  `TimeZone` varchar(100) default NULL,
  PRIMARY KEY  (`Id`),
  KEY `StatusId` (`StatusId`),
  CONSTRAINT `FK_User_Status` FOREIGN KEY (`StatusId`) REFERENCES `userStatus` (`Id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8"

payments    "CREATE TABLE `payments` (
  `Id` int(11) NOT NULL auto_increment,
  `UserId` int(11) default NULL,  
  `Description` varchar(200) default NULL,
  `Debit` decimal(11,2) default NULL,
  `Credit` decimal(11,2) default NULL,
  `Date` datetime default NULL,
  PRIMARY KEY  (`Id`),
  KEY `UserId` (`UserId`),
  CONSTRAINT `FK_Payment_User` FOREIGN KEY (`UserId`) REFERENCES `users` (`Id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:00:57.643

如果添加以下索引：

```
CREATE INDEX ix_status ON users (StatusId, Id);
CREATE INDEX ix_userid ON payments (UserId, Credit, Debit); 
```

并添加`FORCE INDEX`选项：

```
SELECT U.Id
    , U.Name
    , SUM(P.Credit) AS CreditAmount
    , SUM(P.Debit) AS DebitAmount
    FROM 
        users U FORCE INDEX (ix_status)
    LEFT JOIN 
        payments P FORCE INDEX (ix_userid) ON P.UserId = U.Id
    WHERE 
        U.StatusId = 1 /* Active Users Only */
    GROUP BY
        U.Id; 
```

您的查询几乎肯定会执行得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:08:19.037

根据此[链接](https://stackoverflow.com/questions/2178441/is-it-possible-to-speed-up-a-sum-in-mysql)，我无法加快该`SUM`功能。这里的主要问题是我选择了大量的记录。

我想重新设计`users`表格，添加一个新列，如该列将包含表格`TotalPayment`中的总`credit`减量。我知道它违反了数据库规范化规则，但我猜这种重新设计是为了节省性能。`debit``payments`

非常感谢你们的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T02:44:22.870

Kael，这是我运行的脚本及其输出，用于显示我在第一个答案中提供的索引和查询，将查询时间从大约 14.3 秒减少到仅 0.75 秒：

```
DROP TABLE IF EXISTS payments;
DROP TABLE IF EXISTS users;
DROP TABLE IF EXISTS userStatus;

CREATE TABLE userStatus (
    Id int(11) NOT NULL auto_increment,
    PRIMARY KEY  (Id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE users (
    Id int(11) NOT NULL auto_increment,
    StatusId int(11) default NULL,
    Name varchar(60) default NULL,
    TimeZone varchar(100) default NULL,
    PRIMARY KEY  (Id),
    KEY StatusId (StatusId),
    CONSTRAINT FK_User_Status FOREIGN KEY (StatusId) REFERENCES userStatus (Id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE payments (
    Id int(11) NOT NULL auto_increment,
    UserId int(11) default NULL,  
    Description varchar(200) default NULL,
    Debit decimal(11,2) default NULL,
    Credit decimal(11,2) default NULL,
    Date datetime default NULL,
    PRIMARY KEY  (Id),
    KEY UserId (UserId),
    CONSTRAINT FK_Payment_User FOREIGN KEY (UserId) REFERENCES users (Id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS ids;
CREATE TABLE IF NOT EXISTS ids (
    id INT UNSIGNED AUTO_INCREMENT NOT NULL,
    PRIMARY KEY (id)
) ENGINE=MyISAM; -- must be MyISAM
INSERT INTO ids SET id = NULL; # inserts a 1
UPDATE ids SET id=0;
ALTER TABLE ids AUTO_INCREMENT=1;
INSERT INTO ids SELECT NULL FROM ids; #      1      1
INSERT INTO ids SELECT NULL FROM ids; #      2      2
INSERT INTO ids SELECT NULL FROM ids; #      4      4
INSERT INTO ids SELECT NULL FROM ids; #      8      8
INSERT INTO ids SELECT NULL FROM ids; #     10     16
INSERT INTO ids SELECT NULL FROM ids; #     20     32
INSERT INTO ids SELECT NULL FROM ids; #     40     64
INSERT INTO ids SELECT NULL FROM ids; #     80    128
INSERT INTO ids SELECT NULL FROM ids; #    100    256
INSERT INTO ids SELECT NULL FROM ids; #    200    512
INSERT INTO ids SELECT NULL FROM ids; #    400  1,024
INSERT INTO ids SELECT NULL FROM ids; #    800  2,048
INSERT INTO ids SELECT NULL FROM ids; #   1000  4,096
INSERT INTO ids SELECT NULL FROM ids; #   2000  8,192
INSERT INTO ids SELECT NULL FROM ids; #   4000 16,384

INSERT INTO 
userStatus
(id)
SELECT
id
FROM
ids
WHERE
id > 0
ORDER BY
id
LIMIT 2;

INSERT INTO 
users
(Id, StatusId)
SELECT
id,
IF(RAND() < .9, 1, 2) -- 90% of users are 'Active'
FROM
ids
WHERE
id > 0 AND
id <= 20000
ORDER BY
id;

INSERT INTO
payments
(Id, UserId, Debit, Credit, `Date`)
SELECT
NULL,
i1.id,
ROUND(RAND() * 1000, 2),
ROUND(RAND() * 1000, 2),
NOW() - INTERVAL FLOOR(RAND() * 86400 * 1000) SECOND
FROM
ids i1,
ids i2 
WHERE
i1.id > 0 AND
i1.id <= 20000 AND
i2.id < 100
ORDER BY
RAND();

EXPLAIN
SELECT U.Id
    , U.Name
    , SUM(P.Credit) AS CreditAmount
    , SUM(P.Debit) AS DebitAmount
    FROM users U
    LEFT JOIN payments P ON P.UserId = U.Id
    WHERE U.StatusId = 1 /* Active Users Only */
    GROUP BY U.Id;

SELECT U.Id
    , U.Name
    , SUM(P.Credit) AS CreditAmount
    , SUM(P.Debit) AS DebitAmount
    FROM users U
    LEFT JOIN payments P ON P.UserId = U.Id
    WHERE U.StatusId = 1 /* Active Users Only */
    GROUP BY U.Id;

SELECT U.Id
    , U.Name
    , SUM(P.Credit) AS CreditAmount
    , SUM(P.Debit) AS DebitAmount
    FROM users U
    LEFT JOIN payments P ON P.UserId = U.Id
    WHERE U.StatusId = 1 /* Active Users Only */
    GROUP BY U.Id;

SELECT U.Id
    , U.Name
    , SUM(P.Credit) AS CreditAmount
    , SUM(P.Debit) AS DebitAmount
    FROM users U
    LEFT JOIN payments P ON P.UserId = U.Id
    WHERE U.StatusId = 1 /* Active Users Only */
    GROUP BY U.Id;

CREATE INDEX ix_status ON users (StatusId, Id);
CREATE INDEX ix_userid ON payments (UserId, Credit, Debit);

EXPLAIN
SELECT U.Id
    , U.Name
    , SUM(P.Credit) AS CreditAmount
    , SUM(P.Debit) AS DebitAmount
    FROM 
        users U FORCE INDEX (ix_status)
    LEFT JOIN 
        payments P FORCE INDEX (ix_userid) ON P.UserId = U.Id
    WHERE 
        U.StatusId = 1 /* Active Users Only */
    GROUP BY
        U.Id;

SELECT U.Id
    , U.Name
    , SUM(P.Credit) AS CreditAmount
    , SUM(P.Debit) AS DebitAmount
    FROM 
        users U FORCE INDEX (ix_status)
    LEFT JOIN 
        payments P FORCE INDEX (ix_userid) ON P.UserId = U.Id
    WHERE 
        U.StatusId = 1 /* Active Users Only */
    GROUP BY
        U.Id;

SELECT U.Id
    , U.Name
    , SUM(P.Credit) AS CreditAmount
    , SUM(P.Debit) AS DebitAmount
    FROM 
        users U FORCE INDEX (ix_status)
    LEFT JOIN 
        payments P FORCE INDEX (ix_userid) ON P.UserId = U.Id
    WHERE 
        U.StatusId = 1 /* Active Users Only */
    GROUP BY
        U.Id;

SELECT U.Id
    , U.Name
    , SUM(P.Credit) AS CreditAmount
    , SUM(P.Debit) AS DebitAmount
    FROM 
        users U FORCE INDEX (ix_status)
    LEFT JOIN 
        payments P FORCE INDEX (ix_userid) ON P.UserId = U.Id
    WHERE 
        U.StatusId = 1 /* Active Users Only */
    GROUP BY
        U.Id; 
```

这是输出：

```
[ross@titanv ~]$ mysql -vvv < ex.sql temp
--------------
DROP TABLE IF EXISTS payments
--------------

Query OK, 0 rows affected (0.01 sec)

--------------
DROP TABLE IF EXISTS users
--------------

Query OK, 0 rows affected (0.00 sec)

--------------
DROP TABLE IF EXISTS userStatus
--------------

Query OK, 0 rows affected (0.01 sec)

--------------
CREATE TABLE userStatus (
        Id int(11) NOT NULL auto_increment,
        PRIMARY KEY  (Id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
--------------

Query OK, 0 rows affected (0.01 sec)

--------------
CREATE TABLE users (
        Id int(11) NOT NULL auto_increment,
        StatusId int(11) default NULL,
        Name varchar(60) default NULL,
        TimeZone varchar(100) default NULL,
        PRIMARY KEY  (Id),
        KEY StatusId (StatusId),
        CONSTRAINT FK_User_Status FOREIGN KEY (StatusId) REFERENCES userStatus (Id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
--------------

Query OK, 0 rows affected (0.00 sec)

--------------
CREATE TABLE payments (
        Id int(11) NOT NULL auto_increment,
        UserId int(11) default NULL,  
        Description varchar(200) default NULL,
        Debit decimal(11,2) default NULL,
        Credit decimal(11,2) default NULL,
        Date datetime default NULL,
        PRIMARY KEY  (Id),
        KEY UserId (UserId),
        CONSTRAINT FK_Payment_User FOREIGN KEY (UserId) REFERENCES users (Id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
--------------

Query OK, 0 rows affected (0.01 sec)

--------------
DROP TABLE IF EXISTS ids
--------------

Query OK, 0 rows affected (0.00 sec)

--------------
CREATE TABLE IF NOT EXISTS ids (
        id INT UNSIGNED AUTO_INCREMENT NOT NULL,
        PRIMARY KEY (id)
) ENGINE=MyISAM
--------------

Query OK, 0 rows affected (0.01 sec)

--------------
INSERT INTO ids SET id = NULL
--------------

Query OK, 1 row affected (0.00 sec)

--------------
UPDATE ids SET id=0
--------------

Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

--------------
ALTER TABLE ids AUTO_INCREMENT=1
--------------

Query OK, 1 row affected (0.00 sec)
Records: 1  Duplicates: 0  Warnings: 0

--------------
INSERT INTO ids SELECT NULL FROM ids
--------------

Query OK, 1 row affected (0.00 sec)
Records: 1  Duplicates: 0  Warnings: 0

--------------
INSERT INTO ids SELECT NULL FROM ids
--------------

Query OK, 2 rows affected (0.00 sec)
Records: 2  Duplicates: 0  Warnings: 0

--------------
INSERT INTO ids SELECT NULL FROM ids
--------------

Query OK, 4 rows affected (0.00 sec)
Records: 4  Duplicates: 0  Warnings: 0

--------------
INSERT INTO ids SELECT NULL FROM ids
--------------

Query OK, 8 rows affected (0.00 sec)
Records: 8  Duplicates: 0  Warnings: 0

--------------
INSERT INTO ids SELECT NULL FROM ids
--------------

Query OK, 16 rows affected (0.00 sec)
Records: 16  Duplicates: 0  Warnings: 0

--------------
INSERT INTO ids SELECT NULL FROM ids
--------------

Query OK, 32 rows affected (0.01 sec)
Records: 32  Duplicates: 0  Warnings: 0

--------------
INSERT INTO ids SELECT NULL FROM ids
--------------

Query OK, 64 rows affected (0.00 sec)
Records: 64  Duplicates: 0  Warnings: 0

--------------
INSERT INTO ids SELECT NULL FROM ids
--------------

Query OK, 128 rows affected (0.00 sec)
Records: 128  Duplicates: 0  Warnings: 0

--------------
INSERT INTO ids SELECT NULL FROM ids
--------------

Query OK, 256 rows affected (0.00 sec)
Records: 256  Duplicates: 0  Warnings: 0

--------------
INSERT INTO ids SELECT NULL FROM ids
--------------

Query OK, 512 rows affected (0.00 sec)
Records: 512  Duplicates: 0  Warnings: 0

--------------
INSERT INTO ids SELECT NULL FROM ids
--------------

Query OK, 1024 rows affected (0.00 sec)
Records: 1024  Duplicates: 0  Warnings: 0

--------------
INSERT INTO ids SELECT NULL FROM ids
--------------

Query OK, 2048 rows affected (0.00 sec)
Records: 2048  Duplicates: 0  Warnings: 0

--------------
INSERT INTO ids SELECT NULL FROM ids
--------------

Query OK, 4096 rows affected (0.01 sec)
Records: 4096  Duplicates: 0  Warnings: 0

--------------
INSERT INTO ids SELECT NULL FROM ids
--------------

Query OK, 8192 rows affected (0.01 sec)
Records: 8192  Duplicates: 0  Warnings: 0

--------------
INSERT INTO ids SELECT NULL FROM ids
--------------

Query OK, 16384 rows affected (0.02 sec)
Records: 16384  Duplicates: 0  Warnings: 0

--------------
INSERT INTO 
userStatus
(id)
SELECT
id
FROM
ids
WHERE
id > 0
ORDER BY
id
LIMIT 2
--------------

Query OK, 2 rows affected (0.01 sec)
Records: 2  Duplicates: 0  Warnings: 0

--------------
INSERT INTO 
users
(Id, StatusId)
SELECT
id,
IF(RAND() < .9, 1, 2) 
FROM
ids
WHERE
id > 0 AND
id <= 20000
ORDER BY
id
--------------

Query OK, 20000 rows affected (0.11 sec)
Records: 20000  Duplicates: 0  Warnings: 0

--------------
INSERT INTO
payments
(Id, UserId, Debit, Credit, `Date`)
SELECT
NULL,
i1.id,
ROUND(RAND() * 1000, 2),
ROUND(RAND() * 1000, 2),
NOW() - INTERVAL FLOOR(RAND() * 86400 * 1000) SECOND
FROM
ids i1,
ids i2 
WHERE
i1.id > 0 AND
i1.id <= 20000 AND
i2.id < 100
ORDER BY
RAND()
--------------

Query OK, 2000000 rows affected (21.52 sec)
Records: 2000000  Duplicates: 0  Warnings: 0

--------------
EXPLAIN
SELECT U.Id
    , U.Name
    , SUM(P.Credit) AS CreditAmount
    , SUM(P.Debit) AS DebitAmount
    FROM users U
    LEFT JOIN payments P ON P.UserId = U.Id
    WHERE U.StatusId = 1 
    GROUP BY U.Id
--------------

+----+-------------+-------+------+---------------+----------+---------+-----------+-------+-------------+
| id | select_type | table | type | possible_keys | key      | key_len | ref       | rows  | Extra       |
+----+-------------+-------+------+---------------+----------+---------+-----------+-------+-------------+
|  1 | SIMPLE      | U     | ref  | StatusId      | StatusId | 5       | const     | 10274 | Using where |
|  1 | SIMPLE      | P     | ref  | UserId        | UserId   | 5       | temp.U.Id |     1 |             |
+----+-------------+-------+------+---------------+----------+---------+-----------+-------+-------------+
2 rows in set (0.00 sec)

--------------
SELECT U.Id
    , U.Name
    , SUM(P.Credit) AS CreditAmount
    , SUM(P.Debit) AS DebitAmount
    FROM users U
    LEFT JOIN payments P ON P.UserId = U.Id
    WHERE U.StatusId = 1 
    GROUP BY U.Id
--------------

+-------+------+--------------+-------------+
| Id    | Name | CreditAmount | DebitAmount |
+-------+------+--------------+-------------+
|     1 | NULL |     47824.73 |    49580.71 |
|     2 | NULL |     46426.02 |    52019.69 |
...
| 19999 | NULL |     50041.10 |    47696.88 |
| 20000 | NULL |     51923.69 |    50349.38 |
+-------+------+--------------+-------------+
18057 rows in set (14.60 sec)

--------------
SELECT U.Id
    , U.Name
    , SUM(P.Credit) AS CreditAmount
    , SUM(P.Debit) AS DebitAmount
    FROM users U
    LEFT JOIN payments P ON P.UserId = U.Id
    WHERE U.StatusId = 1 
    GROUP BY U.Id
--------------

+-------+------+--------------+-------------+
| Id    | Name | CreditAmount | DebitAmount |
+-------+------+--------------+-------------+
|     1 | NULL |     47824.73 |    49580.71 |
|     2 | NULL |     46426.02 |    52019.69 |
...
| 19999 | NULL |     50041.10 |    47696.88 |
| 20000 | NULL |     51923.69 |    50349.38 |
+-------+------+--------------+-------------+
18057 rows in set (14.10 sec)

--------------
SELECT U.Id
    , U.Name
    , SUM(P.Credit) AS CreditAmount
    , SUM(P.Debit) AS DebitAmount
    FROM users U
    LEFT JOIN payments P ON P.UserId = U.Id
    WHERE U.StatusId = 1 
    GROUP BY U.Id
--------------

+-------+------+--------------+-------------+
| Id    | Name | CreditAmount | DebitAmount |
+-------+------+--------------+-------------+
|     1 | NULL |     47824.73 |    49580.71 |
|     2 | NULL |     46426.02 |    52019.69 |
...
| 19999 | NULL |     50041.10 |    47696.88 |
| 20000 | NULL |     51923.69 |    50349.38 |
+-------+------+--------------+-------------+
18057 rows in set (14.17 sec)

--------------
CREATE INDEX ix_status ON users (StatusId, Id)
--------------

Query OK, 0 rows affected (0.05 sec)
Records: 0  Duplicates: 0  Warnings: 0

--------------
CREATE INDEX ix_userid ON payments (UserId, Credit, Debit)
--------------

Query OK, 0 rows affected (5.09 sec)
Records: 0  Duplicates: 0  Warnings: 0

--------------
EXPLAIN
SELECT U.Id
    , U.Name
    , SUM(P.Credit) AS CreditAmount
    , SUM(P.Debit) AS DebitAmount
    FROM 
        users U FORCE INDEX (ix_status)
    LEFT JOIN 
        payments P FORCE INDEX (ix_userid) ON P.UserId = U.Id
    WHERE 
        U.StatusId = 1 
    GROUP BY
        U.Id
--------------

+----+-------------+-------+------+---------------+-----------+---------+-----------+-------+-------------+
| id | select_type | table | type | possible_keys | key       | key_len | ref       | rows  | Extra       |
+----+-------------+-------+------+---------------+-----------+---------+-----------+-------+-------------+
|  1 | SIMPLE      | U     | ref  | ix_status     | ix_status | 5       | const     | 10274 | Using where |
|  1 | SIMPLE      | P     | ref  | ix_userid     | ix_userid | 5       | temp.U.Id | 10002 | Using index |
+----+-------------+-------+------+---------------+-----------+---------+-----------+-------+-------------+
2 rows in set (0.00 sec)

--------------
SELECT U.Id
    , U.Name
    , SUM(P.Credit) AS CreditAmount
    , SUM(P.Debit) AS DebitAmount
    FROM 
        users U FORCE INDEX (ix_status)
    LEFT JOIN 
        payments P FORCE INDEX (ix_userid) ON P.UserId = U.Id
    WHERE 
        U.StatusId = 1 
    GROUP BY
        U.Id
--------------

+-------+------+--------------+-------------+
| Id    | Name | CreditAmount | DebitAmount |
+-------+------+--------------+-------------+
|     1 | NULL |     47824.73 |    49580.71 |
|     2 | NULL |     46426.02 |    52019.69 |
...
| 19999 | NULL |     50041.10 |    47696.88 |
| 20000 | NULL |     51923.69 |    50349.38 |
+-------+------+--------------+-------------+
18057 rows in set (0.75 sec)

--------------
SELECT U.Id
    , U.Name
    , SUM(P.Credit) AS CreditAmount
    , SUM(P.Debit) AS DebitAmount
    FROM 
        users U FORCE INDEX (ix_status)
    LEFT JOIN 
        payments P FORCE INDEX (ix_userid) ON P.UserId = U.Id
    WHERE 
        U.StatusId = 1 
    GROUP BY
        U.Id
--------------

+-------+------+--------------+-------------+
| Id    | Name | CreditAmount | DebitAmount |
+-------+------+--------------+-------------+
|     1 | NULL |     47824.73 |    49580.71 |
|     2 | NULL |     46426.02 |    52019.69 |
...
| 19999 | NULL |     50041.10 |    47696.88 |
| 20000 | NULL |     51923.69 |    50349.38 |
+-------+------+--------------+-------------+
18057 rows in set (0.75 sec)

--------------
SELECT U.Id
    , U.Name
    , SUM(P.Credit) AS CreditAmount
    , SUM(P.Debit) AS DebitAmount
    FROM 
        users U FORCE INDEX (ix_status)
    LEFT JOIN 
        payments P FORCE INDEX (ix_userid) ON P.UserId = U.Id
    WHERE 
        U.StatusId = 1 
    GROUP BY
        U.Id
--------------

+-------+------+--------------+-------------+
| Id    | Name | CreditAmount | DebitAmount |
+-------+------+--------------+-------------+
|     1 | NULL |     47824.73 |    49580.71 |
|     2 | NULL |     46426.02 |    52019.69 |
...
| 19999 | NULL |     50041.10 |    47696.88 |
| 20000 | NULL |     51923.69 |    50349.38 |
+-------+------+--------------+-------------+
18057 rows in set (0.75 sec)

Bye 
```

# iphone - iPhone - 如何导入所有日历事件，包括事件 ID？

> ID：12311398
> 
> 赞同：2
> 
> 时间：2012-09-07T03:39:30.140
> 
> 标签：iphone, calendar, ekeventstore

我正在开发一个与 iPhone 日历相关的简单应用程序。我可以将日历事件从我的应用程序添加到 iPhone 日历。一旦我保存事件，我需要获取保存的事件 ID。我怎样才能做到这一点。下面是保存事件的代码。

```
EKEventStore *eventStore = [[EKEventStore alloc] init]; 
EKEvent *event  = [EKEvent eventWithEventStore:eventStore]; 
event.title     = @"xxx"; 
event.notes = @"yyy";   
event.startDate = [[NSDate alloc] init];
event.endDate   = [[NSDate alloc] initWithTimeInterval:600 sinceDate:event.startDate]; 
[event setCalendar:[eventStore defaultCalendarForNewEvents]];
NSError *err;
[eventStore saveEvent:event span:EKSpanThisEvent error:&err]; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:37:29.867

对于保存事件调用此方法，并打印所有带有标识符的保存事件...

```
- (void)eventEditViewController:(EKEventEditViewController *)controller
didCompleteWithAction:(EKEventEditViewAction)action {

NSError *error = nil;

EKEvent *thisEvent = controller.event;

switch (action) {
case EKEventEditViewActionCanceled:
// Edit action canceled, do nothing.
break;

case EKEventEditViewActionSaved:
// When user hit "Done" button, save the newly created event to the event store,
// and reload table view.
// If the new event is being added to the default calendar, then update its
// eventsList.
if (self.defaultCalendar ==  thisEvent.calendar) {

[self.eventsList addObject:thisEvent];
}

[controller.eventStore saveEvent:controller.event span:EKSpanThisEvent error:&amp;error];
**NSLog(@"thisEvent.id = %@", thisEvent.eventIdentifier);**
[self.tableView reloadData];
break;

case EKEventEditViewActionDeleted:
// When deleting an event, remove the event from the event store,
// and reload table view.
// If deleting an event from the currenly default calendar, then update its
// eventsList.
if (self.defaultCalendar ==  thisEvent.calendar) {
[self.eventsList removeObject:thisEvent];
}
 **NSLog(@"thisEvent.id = %@", thisEvent.eventIdentifier);**
[controller.eventStore removeEvent:thisEvent span:EKSpanThisEvent error:&amp;error];
[self.tableView reloadData];
break;

default:
break;
}
// Dismiss the modal view controller
[controller dismissModalViewControllerAnimated:YES];

} 
```

# c# - 聊天消息提醒，例如 Gmail 提醒

> ID：12311407
> 
> 赞同：0
> 
> 时间：2012-09-07T03:41:00.260
> 
> 标签：c#, wpf

我是 WPF 的初学者。我创建了聊天应用程序。现在我的消息警报有问题。所以，我想创建消息警报。例如：当其他用户 A 与用户 B 聊天时，用户 B 之后会在任务栏上看到提示信息，如果用户 B 想要回复，用户 B 必须点击任务栏以显示表单聊天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T03:49:16.637

[使用通知窗口库使用此链接进行更多研究](http://msdn.microsoft.com/en-us/library/system.windows.notificationwindow%28v=vs.95%29.aspx)

这是[如何在我的 C# 应用程序中显示任务栏通知的类似帖子？](https://stackoverflow.com/questions/1476086/how-do-i-show-a-taskbar-notification-in-my-c-sharp-application)

# sas - SAS 是代表 Statistical Analysis System 的首字母缩写词还是从来都不是首字母缩写词？

> ID：12311408
> 
> 赞同：-2
> 
> 时间：2012-09-07T03:41:15.610
> 
> 标签：sas, acronym

我知道这不是一个编程问题。

这学期我在学习两门 SAS 应用课程，我发现每位教授对 SAS 名称的解释存在矛盾。其中一个说 SAS 不代表任何东西，另一个说它是统计分析系统，它也在 SAS 的维基百科页面上。虽然没有多大关系，但知道答案会满足我的好奇心。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T15:03:38.010

对于由 SAS Institute, Inc. 提供的软件公司和解决方案，`SAS`不是首字母缩略词。它是公司的注册商标，自 1976 年起正式简称为`SAS`。最初的软件被称为“统计分析系统”，许多人继续这样称呼它。然而，`SAS`不仅仅是统计软件。

仅供参考：“SAS”作为首字母缩写词有数百种不同的含义，从“San Antonio Shoe”到英国的“Special Air Service”。

编辑： [这是](http://www.barrsystems.com/includes_content/about_us/the_company/SASBEGINNINGS/PlayVideo.html)SAS 的原始创始人之一托尼·巴尔 (Tony Barr) 制作的一小时演示视频的链接。这是一段计算的历史，就像 SAS 一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T07:04:33.193

是的，SAS 最初是 Statistical Analysis System 的首字母缩写词，尽管自从它被这样使用以来已经有一段时间了。在 SAS 的“现代”时代，他们不再指的是这个。

# jquery - jQuery UI ProgressBar - 设置值等于 HTML 属性

> ID：12311411
> 
> 赞同：0
> 
> 时间：2012-09-07T03:41:26.727
> 
> 标签：jquery, html, jquery-ui

我试图在同一个类下初始化多个进度条，只用一个 jQuery 片段。我希望将值设置为 HTML 属性“值”。

这是html：

```
<div class="pop" value="98"></div>
<div class="pop" value="85"></div>
<div class="pop" value="78"></div>
<div class="pop" value="54"></div> 
```

这是我*认为*可行的jQuery ：

```
$( ".pop" ).progressbar({
value: parseInt($(this).attr("value"))
}); 
```

但它没有。进度条出现，但它们看起来好像它们的值是 0。

如果我将其更改为：

```
$( ".pop" ).progressbar({
value: parseInt($(".pop").attr("value"))
}); 
```

然后它们都被初始化，但它们的所有值都设置为第一个 HTML 元素的值（在本例中，它们都将设置为 98）。我预料到了这一点。

那么有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T04:00:45.807

您想使用 jQuery.each 函数。这是一个例子：

```
$.each($(".pop"), function() {
    $(this).progressbar({ value: parseInt($(this).attr("value")) });
}); 
```

替代示例：

```
$(".pop").each(function() {
    $(this).progressbar({ value: parseInt($(this).attr("value")) });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T04:01:05.153

我将遍历每个 div 以确保它获取正确的“值”属性，因为`$(this)`在您的第一个示例中没有像`this`该上下文中的 Window 对象那样为您提供任何东西。

```
$('.pop').each(function(index) {
    $(this).progressbar({
        value: parseInt($(this).attr("value"))
    });      
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-07-08T15:12:14.207

您必须设置 value 属性：

```
var progressBar = $('#progressBar');
var v = 70;
progressBar.arrt('value', v); 
```

# c++ - 快速找到 2^x 的方法

> ID：12311413
> 
> 赞同：4
> 
> 时间：2012-09-07T03:41:37.537
> 
> 标签：c++, c

如何在 C 中快速找到 2^x。如果你们有任何想法，请提供帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-07T03:43:28.843

是整数还是浮点数？对于 int，使用左移。对于浮点数，pow() 函数

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-07T03:44:49.137

向左位移，这将数字乘以 2，每次位移，就像将十进制数字向左移动会使它们乘以 10。

使用`<<`运算符，如下所示：

```
int twoPowZero = 1; // any number^0 is 1
int twoPowOne  = 1 << 1; // this sets the '2' bit to '1'
int twoPowTwo  = 1 << 2;
int twoPowFive = 1 << 5;
int twoPowTen  = 1 << 10; 
```

依此类推，直到您到达`1 << 30`. 如果您使用带符号的 32 位整数，那么`1 << 31`由于二进制补码，您将得到 -2147483648。如果要高于使用`long long unsigned int`或`uint64_t`（64 位整数）。或者，如果您的平台支持：`uint128_t`.

如果你想走得更高，你需要滚动你自己的“大整数”代码。请注意，某些平台和编译器带有 128 位整数类型，但运行时性能各不相同：它们可能需要一个可以执行 128 位操作的处理器，或者它们可能会将其分解为两个 64 位操作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-07T03:44:23.097

回想一下，在二进制系统中，某个位置的位`N`表示`2^N`。因此，正数的公式`int`是

```
1 << x 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-07T03:45:24.990

```
#include <stdio.h>
#include <math.h>

int main ()
{
  printf ("7.0 ^ 3 = %lf\n", pow (7.0,3));
  printf ("4.73 ^ 12 = %lf\n", pow (4.73,12));
  printf ("32.01 ^ 1.54 = %lf\n", pow (32.01,1.54));
  return 0;
} 
```

输出：

```
7.0 ^ 3 = 343.000000
4.73 ^ 12 = 125410439.217423
32.01 ^ 1.54 = 208.036691 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-07T03:45:43.207

```
 #include <math.h>
 float powf(float x, float y); /* C99 */
 double pow(double x, double y);
 long double powl(long double x, long double y); /* C99 */ 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-07T03:46:49.367

`1`在第`x`th 位位置设置 a ： `1 << x`。

在这种情况下`x`应该小于整数类型的宽度，并且`x`应该是正数。

# multithreading - 在有多个协程的环境中，实现优先级是否明智？

> ID：12311416
> 
> 赞同：2
> 
> 时间：2012-09-07T03:42:13.993
> 
> 标签：multithreading, lua, coroutine

我正在阅读一些 Lua 书籍，并且正在考虑将一些遗留的（并且写得不好的）C 代码迁移到 Lua 和 C 的混合体中。

然而，这个遗留代码使用线程来处理一些关键任务（基本上是音频/视频流），而有些简单的任务也需要一些关注（用户界面）。根据我的阅读，Lua 不直接支持线程，它促进了协程的使用。

在这种情况下迁移到基于协程的环境是否明智？在我看来，我可以想象一个调度程序，它总是在每次尝试恢复最不重要的协程之间首先尝试恢复高优先级协程。因为我没有这方面的经验，所以我在这里问。

**编辑**

尼可波拉斯询问了更多细节。

这是一个实时应用程序。我不能承受很大的延迟来处理某些事件，例如准备好处理的新视频帧。之前的 C 程序使用线程和回调来执行此操作。例如，在出现新帧时，会调用回调并准备数据以进行处理（回调作为生产者，视频线程作为消费）。

我还没有考虑如何处理回调（也许我会用 C 保留它们并使用一些互斥锁来更新 Lua 代码的数据），但我怀疑这种设置是否使用提到的工具，适用于此类问题，如果有人有一些示例或故事并想分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T05:31:55.567

您可能*可以*这样做；据我所知，您的主要挑战将是决定您可以放弃的最小时间段以及如何保证不超过这段时间。

例如，假设您的流媒体可以容忍长达 10 毫秒的延迟。这意味着您的 UI 操作必须分成不超过 10 毫秒的块。如果你恢复你的 UI 协程在文件中进行搜索并且你需要读取一个文件并且它变得很大并且读取时间超过了 10 毫秒怎么办？在您的 UI 协程将控制权交还给调度程序之前，您的流式协同程序不会获得控制权，然后调度程序会恢复您的流式协同程序。这仅意味着您需要非常小心地考虑您的 UI 可以执行的所有操作以及如何保证所有操作都遵守您为它们设置的时间限制。

在抢占式多任务处理中，调度程序会处理这一点（但它有其自身的缺点），但在协程的情况下，您的 UI 逻辑需要处理它。有一些具有类似逻辑的 lua 库（例如，copas 所做的事情接近于使用超时的套接字可能需要的东西）。

比较回调和协程，我开始越来越喜欢协程方法。它们的功能可能是相同的，但是基于协程的代码比基于回调的代码更容易阅读（并且在许多情况下更容易编写）（严格来说，在我看来）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T04:25:03.687

你没有理由不试试这个。游戏是创建一个适当的调度程序，并确保您的任何例程都不会花费太多时间才能完成。

这将有多难取决于您的代码，但调度程序可能非常简单——通过优先级或简单的计时器（如果上次运行重要的例程大于 N 毫秒，则运行重要的例程）。

yield 有一些优势，它确实使同步变得容易。

简单地说，你应该证明它，看看它是否对你足够有效。稍微玩一下，你应该很快就知道这是否真的适合你，从它的声音来看，你的调度程序可能不是很复杂。没有理由让它成为通用的，保持简单并专注于你正在做的任务，然后你循环“通用”，或者从操作系统教科书中拉出一些随机调度程序。

# javascript - 为 DataTables aoColumnDefs 创建 JavaScript 数组（JSON 格式）

> ID：12311420
> 
> 赞同：1
> 
> 时间：2012-09-07T03:42:59.650
> 
> 标签：javascript, json, datatables

我想为 DataTables 参数 aoColumnDefs 创建以下 JSON 数据：

```
var aryJSONColTable = [
                        {"sTitle": "Column00", "aTargets": [0]},
                        {"sTitle": "Column01", "aTargets": [1]},
                        {"sTitle": "Column02", "aTargets": [2]},
                        {"sTitle": "Column03", "aTargets": [3]}
                      ] 
```

然后我将变量放入我的 DataTable 变量声明中，如下所示：

```
var oTable = $('#report').dataTable({
                                "aoColumnDefs": aryJSONColTable,
                                "bProcessing": true,
                                "bServerSide": true,
                                "bLengthChange": true,
                                "bFilter": true,
                                "aaSorting": [[ 3, "desc" ]],
                                "sScrollX": "100%",
                                "bScrollCollapse": true,
                                "bJQueryUI": true,
                                "sAjaxSource": "./getDataEA.php"
                            }); 
```

基于[这个有用的讨论](https://stackoverflow.com/questions/2250953/how-do-i-create-javascript-arrayjson-format-dynamically)，我尝试了一个 JavaScript 循环来创建 JSON 数据 aryJSONColTable，如下所示：

```
//create JSON array for aoColumnDefs
var aryColTableChecked = ["column00", "column01", "column02", "column03"];
var aryJSONColTable = [];

for (var i in aryColTableChecked) {
    aryJSONColTable.push({
                      "sTitle": aryColTableChecked[i],
                      "aTargets": [i]
                    });
}; 
```

我总是从上面的 JavaScript 循环中为数据“aTargets”获取值“ [1](https://stackoverflow.com/questions/2250953/how-do-i-create-javascript-arrayjson-format-dynamically) ”，我希望为数据“aTargets”获取值 [running_index_number]。

请在这件事上帮助我。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T03:50:23.470

`for...in`适用于对象而不是数组，并且`aryColTableChecked`是一个数组。你可以这样做：

```
var arr = [];
var max = 3; // zero based
for (var i = 0, n; i <= max; i++) {
    n = i > 9 ? '' + i : '0' + i; // make sure it has 2 digits
    arr.push({
        sTitle: 'Column' + n,
        aTargets: [i] // why array here?            
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T03:54:13.833

我建议您从`for..in`循环更改为标准`for`循环，因为迭代数组`for..in`是“危险的”，因为如果您使用的库添加了属性/方法，`Array.prototype`那么循环也将迭代这些。

此外，**迭代`for..in`器`i`将是一个*string*，**正在创建`"aTargets" : ["0"]`，并且您希望它是一个要创建的数字`"aTargets" : [0]`。

```
var aryColTableChecked = ["column00", "column01", "column02", "column03"];
var aryJSONColTable = [];

for (var i = 0; i <  aryColTableChecked.length; i++) {
    aryJSONColTable.push({
                      "sTitle": aryColTableChecked[i],
                      "aTargets": [i]
                    });
}; 
```

似乎工作正常：http: [//jsfiddle.net/nnnnnn/Ek8tr/](http://jsfiddle.net/nnnnnn/Ek8tr/)

注意：您生成的**不是 JSON**，它是一个对象数组。（JSON 是一种始终为*字符串*的数据交换格式。JSON 看起来像 JS 对象字面量和数组字面量语法，但它不是一回事。）

# php - Facebook 应用程序：安全画布 URL

> ID：12311432
> 
> 赞同：3
> 
> 时间：2012-09-07T03:43:48.947
> 
> 标签：php, facebook, security

我有一个域，以便我可以启动一个 facebook 应用程序。但是当我填写基础知识时，（画布页面，ur..etc）我遇到了安全画布网址，这真的让我很困惑，我已经搜索了几个小时，我有点绝望的。哈哈。我已经注册了 StartSSL，因为我这样做只是为了学习目的并且它是免费的。

每当我要保护 http 时，我都会收到此错误

**SSL 连接错误 无法与服务器建立安全连接。这可能是服务器的问题，或者可能需要您没有的客户端身份验证证书。错误 107 (net::ERR_SSL_PROTOCOL_ERROR)：SSL 协议错误。**

这是我所做的：

-我将 'src' 的所有内容放在我的文件夹 'ssl' 上的 facebook-php-sdk 中，这也是我网站的子域。我将我的 appID 和 appSecret 放在 index.php 中

- 在我的 SSL/TLS 管理器（我正在使用 cpanel）上，我填写了文本字段上的所有要求以获得 CSR

-我复制了 csr 并在 StartSSL 上提交

- 之后 LLS 站点提示我应该放置一个子域。

- 然后他们给了我一个 CRT。之后我又去了我的cpanel，将它粘贴到crt manager上并安装

我真的认为这样做后我的网址可以在 https 上浏览。请帮助我，我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:47:42.337

我在之前的 facebook 应用程序项目中遇到了同样的问题。那是因为托管应用程序的服务器没有 SSL 证书。我们通过获取服务器的 SSL 证书解决了这个问题。

# jquery - 按类名从所有标签中删除属性

> ID：12311433
> 
> 赞同：1
> 
> 时间：2012-09-07T03:44:08.360
> 
> 标签：jquery

我有一个标签样式为 class="input" 的表单

标签位于表单域内，它们被设计为在您输入域时消失。那工作正常。问题是当我在提交表单后重置表单时。

```
jQuery("#requestform").get(0).reset(); 
```

此语句将清除字段，但我还需要从标签中删除“可见性：隐藏”属性，以便标签重新出现。

我试过这个，但没有奏效：

```
jQuery('.formlabel').removeAttr("visibility"); 
```

这是我页面中的一些示例 html：

```
<label class="input">
    <span class="formlabel" style="color: rgb(153, 153, 153); visibility: hidden;">Email</span>
    <input type="text" id="email" name="email" title="email">
</label> 
```

我的 jQuery 有什么问题？从我的所有 class="formlabel" 标签中删除所有“可见性”属性的正确方法是什么？

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T03:45:42.400

`visibility`不是属性，而是 CSS 属性。您需要使用`.css('visibility', 'visible')`：

```
$('.formlabel').css('visibility', 'visible'); 
```

如果您不需要`visibility: hidden`考虑使用的保留布局的行为`display: none`- 那么您可以简单地使用`.show()`来使元素可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T03:48:21.147

尝试：

```
$('.formlabel').css('visibility', ''); 
```

# firefox - 如何在 FF 和 Chrome 之间找到结果一致的 div 的像素高度

> ID：12311438
> 
> 赞同：0
> 
> 时间：2012-09-07T03:44:54.317
> 
> 标签：firefox, google-chrome, html, height

背景故事：我有一个 SVG 画布，上面有一些折线。我还有一些 HTML`<span>`和`<textarea>`元素需要相对于这些折线精确定位。

我首先将 SVG 中的 HTML 元素放在`<foreignElement>`标签中，但我在那里遇到了问题，因为 IE 根本看不到它们，而 Firefox 也看不到`<textarea>`s。所以我把它们从 SVG 中取出，现在每个浏览器都能看到它们。

到目前为止，一切都很好。现在，我知道确保它们与折线正确定位的唯一方法是使用 CSS 为 HTML 元素和 SVG 画布提供绝对位置。

这是我的问题。在所有这些元素之上是一个标题 div。我希望整个 SVG 业务都位于标题下方的合理距离处。说 15 像素。但是由于 SVG 是绝对定位的，所以我需要知道该标题 div 的高度才能将 SVG 和相关的 HTML 元素放到正确的位置。

我试过 jQuery 的`.height()`方法和一些相关的方法。它们的问题在于 Firefox 和 Chrome 给出了两种不同的结果。我知道这并不能反映两者之间的真实像素高度差，因为我可以直观地看到 FF 中的标题略高，但 FF 给出的高度读数较小。

如何为我的标题 div 获得与浏览器一致的高度读数？或者至少一个我可以用来在每个浏览器中将其他元素绝对定位在它下方相同距离的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:46:22.660

你可以试试这个功能

```
function getHeight() {
    return Math.min(
            Math.min(document.body.scrollHeight, document.documentElement.scrollHeight),
            Math.min(document.body.offsetHeight, document.documentElement.offsetHeight),
            Math.min(document.body.clientHeight, document.documentElement.clientHeight)
        );

} 
```

或者简单地说`document.documentElement.clientHeight`，这通常在我用于测试的所有浏览器（Chrome、Firefox、Safari 和 Opera）中对我有用

[编辑] 上面的函数返回body的宽度和高度，为了对任何div使用它，使用这个

```
function getHeight(div) {
        return Math.min(div.scrollHeight, div.offsetHeight, div.clientHeight);  
    } 
```

你可以像这样使用它

```
var myDiv = document.getElementById('myDivId');
console.log('the height is ' + getHeight(myDiv)); 
```

[edit2]请记住，根据浏览器的不同，div 实际上可能具有不同的大小。

假设这是 google chrome，顶部的绿色栏是导航栏，高度为 75px。您将其设置为 100%，填满您的屏幕，高度为 1000 像素，您将一个 100 像素的 div 放置在顶部，并将一个 100 像素的 div 粘贴到屏幕底部（蓝色）。它们之间的紫色 div 的高度为 725px。

![谷歌浏览器示例](../Images/44a6d38c3454ef29f27ec08f25a8e0d4.png)

下面是Firefox。它被放置在同一个 1000px 的屏幕上，也是 100%，但它的导航栏有 100px 的高度。使用相同的 100px 蓝色 div 到顶部和底部，紫色 div 在这里将有 700px 的高度，与 chrome 不同。

![火狐示例](../Images/3f3eec49b6646e31cdaabba32692ae5b.png)

当然，这是一个非常非常简单的例子，我怀疑这是你的情况。但是您可能对 div 展示位置有类似的问题，您应该尝试检查一下。

# git - 通过 SSH 克隆让服务器认为 GIT 的主目录是文件系统的根目录？

> ID：12311440
> 
> 赞同：3
> 
> 时间：2012-09-07T03:45:26.893
> 
> 标签：git

我已经设置了一个简单的服务器，它有一个使用 SSH 连接的 git 帐户。我尝试克隆位于其主目录 (/srv/git) 中的存储库`git clone ssh://git@server:port/repository`。`~/`除非我在存储库名称前面加上它，否则它将不起作用。如果我不预先添加它，那么只有当存储库位于文件系统的根目录时它才会起作用。

不知何故，git 没有实现自己的用户目录。我怎样才能改变这种“奇怪”的行为，使其按预期工作？（至少对我来说）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T03:49:44.797

您必须提供绝对路径或使用`~`指示主目录的路径。引自[`git-clone(1)`](http://www.kernel.org/pub/software/scm/git/docs/git-clone.html)：

> ssh 和 git 协议还支持 ~username 扩展：
> 
> *   `ssh://[user@]host.xz[:port]/~[user]/path/to/repo.git/`
> *   `git://host.xz[:port]/~[user]/path/to/repo.git/`
> *   `[user@]host.xz:/~[user]/path/to/repo.git/`

另一种解决方案是使用诸如[gitolite](https://github.com/sitaramc/gitolite)之类的东西。然后您将能够使用存储库 URL，例如`sshuser@host:reponame`

# scheme - 如何捕捉 eval 失败的球拍？

> ID：12311453
> 
> 赞同：1
> 
> 时间：2012-09-07T03:46:39.883
> 
> 标签：scheme, racket

文档说`eval`返回`any`......我有一个案例必须知道是否`eval`失败..如何测试这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T04:48:08.100

就像@leppie 说的那样，你照常做。这是一个例子：

```
(define (eval* expr)
  (with-handlers ([exn? (λ (e) `(fail ,(exn-message e)))])
    `(success ,(eval expr)))) 
```

另请参阅[沙盒库](http://docs.racket-lang.org/reference/Sandboxed_Evaluation.html)以更好地控制评估，并且（一如既往）[注意](http://docs.racket-lang.org/guide/eval.html)使用`eval`.

# objective-c - Objective C. Kochan 中的编程。任务 6.6

> ID：12311455
> 
> 赞同：2
> 
> 时间：2012-09-07T03:46:51.633
> 
> 标签：objective-c

“编写一个程序，从终端输入一个整数，然后提取并以英文显示整数的每个数字。因此，如果用户输入 932，程序应显示以下内容：九三二（如果用户只输入 0.)"

这是我的解决方案。我输入数字后，Xcode 什么也不做。（我的错误是代码被写成反向显示数字）

你能帮我吗？错误在哪里？

```
#import <Foundation/Foundation.h>
int main (int argc, char *argv[])
{
NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

int number, right_digit;

NSLog (@"Enter your number.");
scanf ("%i", &number);

do {

    right_digit = number % 10;

    switch (right_digit) {

        case '0':
            Nslog (@"zero");
            break;

        case '1':
            NSLog(@"one");
            break;

        case '2':
            NSLog(@"two");
            break;

            case '3':
            NSLog(@"three");
            break;

        case '4':
            NSLog(@"four");
            break;

        case '5':
            NSLog(@"five");
            break;

            case '6':
            NSLog(@ "six");
            break;

            case '7':
            NSLog(@"seven");
            break;

            case '8':
            NSLog(@"eight");
            break;

            case '9':
            NSLog(@"nine");
            break;
        default:
            break;
    }

    number /= 10;

}

while ( number != 0 );

[pool drain];
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:06:23.777

字符`'0'`与数字不同`0`。

# iphone - iOS：Tableview 的页脚视图在 Scroll 上弹跳

> ID：12311461
> 
> 赞同：0
> 
> 时间：2012-09-07T03:48:09.353
> 
> 标签：iphone, ios, uitableview, uiscrollview, uiimageview

我在表格视图的页脚视图中添加了一个相当大的按钮（用于保存可点击的图像作为背景）。我还打算在图像下方添加另一个按钮。在滚动到视图末尾时，如果不反弹就无法查看图像的底部。

我查了这个问题，很多人提到这是由于表格视图的大小大于屏幕造成的，建议使用界面生成器将其最小化。但是，鉴于图像的大小，它变得不可能这样做。

有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T04:42:09.013

只需实现 UITableViewDelegate 方法

```
- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section 
```

并返回足够大的高度以适合您的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T04:44:52.047

当页脚视图的大小发生变化时，您需要将其重新分配给`tableFooterView`表格的属性以使其识别更改。

# java - 用于在 Twitter 中建模图形的 Twitter API

> ID：12311463
> 
> 赞同：-1
> 
> 时间：2012-09-07T03:48:33.753
> 
> 标签：java, api, twitter, graph, social-networking

哪个 Twitter 库可以让我在分析模式和数据可视化方面对图形和网络进行建模？我对 Java 和 C# 最满意，但是我可以使用 C++。

随意推荐其他语言，甚至方法！（我不清楚要下载哪个库以及为什么重要，Twitter 不应该让它们都保持最新吗？）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:29:31.723

Twitter 仅维护[Twitter 库](https://dev.twitter.com/docs/twitter-libraries)列表，但不认可任何内容。这是列表：

如果您使用 C#，我的库[LINQ to Twitter](http://linqtotwitter.codeplex.com/)就在列表中。

图书馆将为您提供对数据的访问权，您可以出于自己的目的获取和操作这些数据。

# coffeescript - 带参数的函数定义

> ID：12311464
> 
> 赞同：0
> 
> 时间：2012-09-07T03:48:34.640
> 
> 标签：coffeescript

我是 CoffeeScript 的新手，所以也许我的问题没有建设性。如果是这样，我很抱歉。无论如何，问题在于编写功能。我尝试了以下两种方法，但变量效果不佳。我该怎么写这个？

第一种方式：arg.foo

```
triangle = (arg...) ->
    if arg.base == undefined then arg.base = 1;
    if arg.height == undefined then arg.height = 1;
    arg.base * arg.height / 2

document.writeln triangle
    base:8
    height:5 # => return 0.5 ... 
```

第二种方式：arg['foo']

```
triangle = (arg...) ->
    if arg['base'] == undefined then arg['base'] = 1;
    if arg['height'] == undefined then arg['height'] = 1;
    arg['base'] * arg['height'] / 2

document.writeln triangle
    base:8
    height:5 # => return 0.5 ... 
```

谢谢你的好意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:40:51.987

我借此机会提及其他一些细节：

您的第一次尝试`arg...`不起作用，因为`...`语法（称为[*splat*](http://coffeescript.org/#splats)）将采用剩余的参数并将它们放入 array `arg`。

对默认参数的改进是：

```
triangle = (arg) ->
    arg.base ?= 1
    arg.height ?= 1

    arg.base * arg.height / 2 
```

该构造`?=`使用[存在运算符](http://coffeescript.org/#operators)，`arg.base ?= 1`并将分配`1`给`arg.base`iff `arg.base`is `null`or `undefined`。

但它变得更好！Coffeescript 支持[解构赋值](http://coffeescript.org/#destructuring)，所以你可以这样写：

```
triangle = ({base, height}) ->
    base ?= 1
    height ?= 1

    base * height / 2 
```

如果您愿意，可以使用 Coffeescript 的默认参数，如下所示：

```
triangle = ({base, height} = {base: 1, height: 2}) ->
    base * height / 2 
```

但是，*如果*您只想指定or ，即*如果* 您将其称为，那将是，因此可能不是您想要的。`base``height``triangle(base: 3)``height``undefined`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T03:55:10.440

很抱歉我找到了答案。我应该使用`arg`而不是`arg...`.

```
triangle = (arg) ->
    if arg.base == undefined then arg.base = 1;
    if arg.height == undefined then arg.height = 1;
    arg.base * arg.height / 2

document.writeln triangle
    base:8
    height:5 # => return 20 !!! 
```

# javascript - 在某些索引处删除/删除数组中的值

> ID：12311467
> 
> 赞同：4
> 
> 时间：2012-09-07T03:49:06.967
> 
> 标签：javascript, arrays, loops

我有一个这样的数组：

```
peoples = ['dick', 'jane', 'harry', 'debra', 'hank', 'frank' .... ] 
```

一个包含这样的键：

```
keys  = [1, 6, 3, 12 .... ] 
```

现在我可以写这样的东西：

```
var peoplesStripedOfKeyPostions = [];

for(i = 0; i < peoples.length; i++){
    for(j = 0; j < keys.length; j++){
        if( i !== keys[j]){
            peoplesStripedOfKeyPostions.push( peoples[i] );
        }
    }        
} 
```

如果你不知道，我需要生成一组人员，这些人员在数组键中定义的某些位置被剥夺了人员。我知道必须有一个漂亮而有效的方法来做到这一点，但我当然想不出。（阵列管理不是我的强项）。

你知道更好的方法吗？（如果我得到多个有效的答案，jsperf 将确定获胜者。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T03:55:18.507

```
people.filter(function(x,i){return badIndices.indexOf(i)==-1}) 
```

如果`badIndices`数组很大，这将变得低效。一个更有效（尽管不太优雅）的版本是：

```
var isBadIndex = {};
badIndices.forEach(function(k){isBadIndex[k]=true});

people.filter(function(x,i){return !isBadIndex[i]}) 
```

（*注意：您不能使用名为的变量`keys`，因为这是一个内置函数*）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T17:33:06.133

您可以按索引从数组中删除条目，然后收集剩下的人。

```
keys.forEach(function(i) { delete people[i]; });

peopleRemaining = Object.keys(people).map(function(i) { return people[i]; }); 
```

请注意，这会修改原始`people`数组。

# trigger.io - 清除模式窗口上的 cookie

> ID：12311469
> 
> 赞同：4
> 
> 时间：2012-09-07T03:49:38.087
> 
> 标签：trigger.io

我正在使用 forge.tabs.openWithOptions 进行 OAuth2 身份验证，并希望为用户提供一个选项，以便用户注销并以其他用户身份登录，而无需完全卸载应用程序。然而，Trigger.io 似乎保存了 cookie。有什么方法可以清除 cookie 以便用户重新登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:48:10.230

我们已经在我们的功能积压中为此提出了一张票，并将在完成后报告 - 目前无法在使用 forge.tabs.openWithOptions 打开的模式视图中直接清除 cookie

# c# - WPF 样式设置器的目标名称到依赖属性的属性

> ID：12311475
> 
> 赞同：0
> 
> 时间：2012-09-07T03:50:28.370
> 
> 标签：c#, wpf, xaml

我正在尝试将`targetname`样式设置器的设置为依赖属性的`Name`属性。不太清楚如何解决这个问题。

> ```
> //Customcontrol's Generic.xaml
> <Style TargetType="{x:Type Controls:MyControl}">
>     <Setter Property="Template">
>         <Setter.Value>
>             <ControlTemplate TargetType="{x:Type Controls:MyControl}">
>                 <Border Background="{TemplateBinding Background}"
>                         BorderBrush="{TemplateBinding BorderBrush}"
>                         BorderThickness="{TemplateBinding BorderThickness}">
>                     <ContentControl Content="{TemplateBinding Content}"/>
>                 </Border>
>             </ControlTemplate>
>         </Setter.Value>
>     </Setter>
>     <Setter TargetName="WHAT SHOULD I PUT HERE" Property="Opacity" Value="0.75"/>
> 
> </Style>
> 
> // Dependency Property
> public static readonly DependencyProperty LabelToDisplayProperty  ...
> 
> // In XAML that adds the custom control
> LabelToDisplay="{x:Reference Name=TitleLabel}" 
> ```

基本上在`TargetName`我想把`name`那个`LabelToDisplay`属性引用的对象的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T04:58:55.917

也许您可以将该 Opacity 设置器移动到 LabelToDisplay 对象中并仅在需要时触发它？

也许您可以在 TargetName 中绑定 LabelToDisplay？

如果没有，我认为还有最后一个选项，您将针对 LabelToDisplay 制作新的 DataTrigger，然后执行以下操作：

```
<DataTrigger.EnterActions>

    Animation here

</DataTrigger.EnterActions> 
```

您可以轻松地设置带有动画的目标。（例如，您根本不需要“名称”属性，只需提供它需要的对象）

# jquery - jquery函数，如果一个或其他事件发生

> ID：12311477
> 
> 赞同：0
> 
> 时间：2012-09-07T03:51:06.933
> 
> 标签：jquery, function

最好的写作方式是什么

**如果**

```
$("#div1").click() 
```

      **或者**

```
$("#div2").hover() 
```

**然后**

```
{ do some function } 
```

我知道如何将共享共同元素的事件链接在一起，但是我将如何为多个元素执行多个事件（如果我的术语不正确，请见谅！）。

谢谢你的帮助！

**编辑：**为了澄清，我想知道当上述两个事件中的*任何一个发生时是否可以运行一个函数。*因此，如果发生 A 或 B，则执行 C。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T03:53:14.280

```
var x = function(e) { console.log(e); };

$("#div1").click(x)
$("#div2").hover(x) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T03:53:51.953

有什么问题：

```
var fn = function(){ ... }

$("#div1").click(fn);
$("#div2").hover(fn); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T03:54:49.993

对于 1 个元素和 2 个或更多事件：

```
$("#div").on("click hover", function(){
   console.log("execute");
}); 
```

对于 2 个元素，每个元素都有 1 个事件：

```
function print(a) {
   console.log(a);
}

$("#div1").on("click", function(){
   print("click");
});

$("#div2").on("hover", function(){
   print("hover");
}); 
```

# python - Cython - 从第二个扩展类型访问扩展类型的 c 类型成员

> ID：12311478
> 
> 赞同：0
> 
> 时间：2012-09-07T03:51:08.057
> 
> 标签：python, cython

我有一个扩展类型，其中包含一些 c 指针作为成员。我想公开这些成员，以便我可以从不同的扩展类型访问它们。有没有办法这样做？

这基本上是这样的：

类型A.pxd：

```
cdef class typeA(object):
  cdef double *myArray 
```

类型B.pyx：

```
cimport typeA
import typeA

cdef class typeB(object):
  typeA.typeA myA
  cdef someFunction(self):
    b = myA.myArray[0] 
```

如何从 typeB 访问 myArray （最好没有 python 开销）？

# c# - ASP.NET MVC 4 + Ninject MVC 3 = 没有为此对象定义无参数构造函数

> ID：12311479
> 
> 赞同：39
> 
> 时间：2012-09-07T03:51:13.800
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, ninject, visual-studio-2012

**更新 - 请查看我的答案以获取此问题的解决方案的链接和说明**

*在我们开始之前，我知道这是一个非常常见的问题，我已经使用 Ninject 很多个月没有问题，但现在它出现了，我无法找到解决办法。另外，不，到目前为止，Google 和 SO 上的结果都没有帮助我。*

因此，请考虑在 Windows Server 2008 R2 上的 Visual Studio 2012 的一个非常、非常、非常简单的原型 ASP.NET MVC 4 项目上运行的以下代码：

```
public class DefaultController : Controller {
    private IGroupPrincipalRepository GroupPrincipalRepository { get; set; }

    [Inject]
    public DefaultController(
        IGroupPrincipalRepository groupPrincipalRepository) {
        this.GroupPrincipalRepository = groupPrincipalRepository;
    }
} 
```

这是`NinjectWebCommon.cs RegisterServices`方法：

```
kernel.Bind(typeof(IGroupPrincipalRepository)).ToConstructor(
    c =>
        new GroupPrincipalRepository(new PrincipalContext(ContextType.Domain, "?", "?", "?", "?"))).InSingletonScope(); 
```

现在，这就是我使用 Ninject（但 .NET 4 上的 ASP.NET MVC 3）的其他项目的工作方式，据我所知，这是使一切正常工作所需要的。那么，为什么我突然得到*没有为这个对象定义的无参数构造函数。*例外？

**更新**

这是完整的`NinjectWebCommon.cs`文件：

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(App_Start.NinjectWebCommon), "Start")]
[assembly: WebActivator.ApplicationShutdownMethodAttribute(typeof(App_Start.NinjectWebCommon), "Stop")]

namespace App_Start {
    using System;
    using System.DirectoryServices.AccountManagement;
    using System.Repositories.ActiveDirectory;
    using System.Web;
    using Microsoft.Web.Infrastructure.DynamicModuleHelper;
    using Ninject;
    using Ninject.Web.Common;

    public static class NinjectWebCommon {
        private static readonly Bootstrapper bootstrapper = new Bootstrapper();

        public static void Start() {
            DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
            DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
            bootstrapper.Initialize(CreateKernel);
        }

        public static void Stop() {
            bootstrapper.ShutDown();
        }

        private static IKernel CreateKernel() {
            var kernel = new StandardKernel();
            kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
            kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

            RegisterServices(kernel);
            return kernel;
        }

        private static void RegisterServices(
            IKernel kernel) {
            kernel.Bind(typeof(IGroupPrincipalRepository)).ToConstructor(
                c =>
                    new GroupPrincipalRepository(new PrincipalContext(ContextType.Domain, "", "", "", ""))).InSingletonScope();
        }
    }
} 
```

**更新 - 请查看我的答案以获取此问题的解决方案的链接和说明**

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-25T04:36:13.580

我知道这是一个老问题，但似乎没有任何真正的答案，我已经解决了这个问题，所以这是我的解决方案：

创建自定义控制器工厂：

```
public class NinjectControllerFactory : DefaultControllerFactory
{
    private IKernel ninjectKernel;
    public NinjectControllerFactory(IKernel kernel)
    {
        ninjectKernel = kernel;
    }
    protected override IController GetControllerInstance(RequestContext requestContext, Type controllerType)
    {
        return (controllerType == null) ? null : (IController) ninjectKernel.Get(controllerType);
    }
} 
```

然后，如果您使用的是 NinjectHttpApplication，则将以下行添加到 OnApplicationStarted：

```
ControllerBuilder.Current.SetControllerFactory(new NinjectControllerFactory(Kernel)); 
```

如果你没有使用 NinjectHttpApplication，那么在你创建内核之后的某处添加该行并将它传递给你新创建的内核的引用。

而已。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-09-07T21:19:40.987

好吧，我没有确切的答案*为什么*会出现错误，但我知道是*谁*造成的，那就是 Visual Studio 2012。我在与 2012 年相同的机器上安装了 Visual Studio 2010，安装了 ASP.NET MVC 4对于 2010 年，我将 2012 年的项目重新创建为 2010 年，逐字逐句，逐字逐句。最终结果是，当 2010 年调试项目时，一切正常，Ninject 会按应有的方式注入依赖项。

当 2012 调试其项目时，它只是出现了`No parameterless constructor defined for this object`异常。2012 年 .NET 4.0 和 .NET 4.5 之间的重新定位没有任何作用。从 NuGet 重新安装 Ninject 也无济于事。我什至将 2010 和 2012 项目都配置为使用本地 IIS 服务器，以确保完全确定，最终结果是相同的。

我将假设 Visual Studio 2012 或 Ninject 存在错误。我在这两个项目之间的唯一区别是它们从哪个 IDE 运行，而 2012 项目是崩溃的那个，所以这就是我将矛头指向 Visual Studio 2012 的原因。

**更新**

伙计们。伙计们！我又遇到了这个问题，并在另一个 SO 问题中找到了解决方案：[Ninject + MVC3 is not injectioning into controller](https://stackoverflow.com/questions/14343388/ninject-mvc3-is-not-injecting-into-controller)。

基本上，这是使其工作的 Web.config 缺少的内容：

```
<dependentAssembly>
    <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
</dependentAssembly> 
```

我猜这迫使框架意识到允许 Ninject 最终能够绑定的 IoC 容器。虽然，我不禁认为 Ninject NuGet 包应该在 Web.config 中寻找该绑定重定向的存在并自动添加它。它肯定会帮助解决这个问题上发生的很多问题。

PS 从我链接的那个帖子中投票赞成，因为它值得！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-09T13:40:53.837

不要重新发明轮子，只需尝试 Install-Package Ninject.MVC3

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-19T14:41:18.483

从 NuGet 获取 MVC3 后，我收到了相同的错误消息。
我不知道您是否以与我相同的方式设置项目，但我的项目`web.config`是根据环境自动生成的。来自 NuGet 的 MVC 正在添加`rows (<runtime>)`，`web.config`并且由于我的合并配置文件设置不正确，这些行已被删除。

问候，

金

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-06-14T06:19:41.857

整个事情太荒谬了，我切换到 Autofac，厌倦了从来没有一次能够成功地将 Ninject 添加到项目中。Web API、MVC4、MVC5 都有问题。

对于 MVC5 人员，使用 Ninject MVC3，将以下内容添加到 web.config 应用程序级别：

```
 <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <dependentAssembly>
                <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35"/>
                <bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0"/>
            </dependentAssembly>
            <dependentAssembly>
                <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35"/>
                <bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0"/>
            </dependentAssembly>
            <dependentAssembly>
                <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35"/>
                <bindingRedirect oldVersion="1.0.0.0-5.1.0.0" newVersion="5.1.0.0"/>
            </dependentAssembly>
        </assemblyBinding>
    </runtime> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-28T15:06:25.697

这是一个肮脏的解决方案！把这个

```
var type = typeof(Ninject.Web.Mvc.MvcModule); 
```

在 AppStart 事件开始时（或其他任何地方）

现在让我解释一下如果有人还没有得到窍门意味着什么。问题是我们的 http 应用程序类可以驻留在解决方案中的任何位置。不仅在 Web 应用程序中。这非常重要，因为 asp.net 编译例程与通常的库应用程序不同。它通过 BuildManager 帮助程序急切地加载所有引用的库，而通常 clr 不会从开始加载类型，除非它们被直接使用。

现在让我们回到我们的情况：Ninject.Web.Mvc 作为动态插件工作，不需要在代码中提及任何内容。因此，如果它在类库中被引用，则不会加载，这会导致 Mvc.Dependancy 初始化中断。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-09T02:55:47.887

当使用带有 ASP.NET 4.0/4.5 的 Visual Studio 2012/2013 时，似乎会出现问题。的版本在文件`System.Web.Mvc`中设置为。那没起效。`4.0.0.0``Web.config`

我的解决方案是

1.  删除`NinjectWebCommon.cs`
2.  将 Dere Jone 的`NinjectControllerFactory`课程复制到项目中：

    ```
    public class NinjectControllerFactory : DefaultControllerFactory
    {
       private IKernel ninjectKernel;
       public NinjectControllerFactory(IKernel kernel)
       {
          ninjectKernel = kernel;
       }

       protected override IController GetControllerInstance(RequestContext requestContext, Type controllerType)
       {
          return (controllerType == null) ? null : (IController) ninjectKernel.Get(controllerType);
       }
    } 
    ```

3.  将内容更改`Global.asax`为：

    ```
    public class MvcApplication : NinjectHttpApplication
    {
       protected override IKernel CreateKernel()
       {
           IKernel kernel = new StandardKernel();

           // kernel.Load(Assembly.GetExecutingAssembly());

           // kernel.Bind<ISomeClass>().To<SomeClass>();

           return kernel;
       }

       protected override void OnApplicationStarted()
       {
           AreaRegistration.RegisterAllAreas();

           WebApiConfig.Register(GlobalConfiguration.Configuration);
           FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
           RouteConfig.RegisterRoutes(RouteTable.Routes);
           BundleConfig.RegisterBundles(BundleTable.Bundles);

           ControllerBuilder.Current.SetControllerFactory(new NinjectControllerFactory(Kernel));
       }
    } 
    ```

    之后，您的注射应该会起作用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-08T13:34:06.073

我遇到了这个问题，但仅限于 Web 服务调用。在这个答案上找到我的解决方案[https://stackoverflow.com/a/12379938/129580](https://stackoverflow.com/a/12379938/129580)下面是提供的示例代码

```
public class Service : WebService
{
  public IContextProvider ContextProvider {get;set;}

  public Service()
  {
    ContextProvider = DependencyResolver.Current.GetService<IContextProvider>();
  }
} 
```

然后我最终变成了，希望这会有所帮助......

```
/// <summary>
/// Summary description for PartMarking
/// </summary>
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line.
[System.Web.Script.Services.ScriptService]
public class PartMarking : System.Web.Services.WebService
{
    private readonly IUnitOfWork _unitOfWork;

    public PartMarking()
    {
        _unitOfWork = DependencyResolver.Current.GetService<IUnitOfWork>();
    }

    [WebMethod]
    public DataSet GetParentConfigurations(string engineModel, string componentCode)
    {
        var results = _unitOfWork.PartMarking.GetParentSicMarkings(engineModel, componentCode);
        return results;
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-23T04:00:04.933

我有同样的问题，唯一对我有用的是将 Web 项目属性中的“本地 IIS Web 服务器”更改为“使用 Visual Studio 开发服务器”。

![在此处输入图像描述](../Images/dafbed67720d61894a64b781f15692cf.png)

我不知道为什么，但是当我这样做时，我在 NinjectWebCommon 中的断点被击中。就像@Alex 所说，每次构建应用程序时，Visual Studio 2012 的亮度不足以执行 NinjectWebCommon 中的代码。也有可能是我不够聪明，无法理解它在引擎盖下是如何工作的。

我不喜欢我的解决方案，因为我更喜欢使用我的本地 IIS Web 服务器，但目前，我有一个应用程序要创建，并且花费了很多时间来处理这个 $%?!!/bug..feature..not sure .

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-07-09T10:14:55.683

正如所有以前的海报所说，这让我有些白发。就我而言，我已经“优化”了我的参考资料太多。Ninject.* 东西在那里，但已经被弄乱了。我删除了所有引用并手动清理了 packages.conf 并再次添加了包 - 胜利！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-05-16T03:48:13.647

我尝试了所有这些解决方案，但都没有奏效。

这就是我解决它的方法：删除了我所有的临时 asp.net 文件。完成此操作后，我收到了新的配置错误。我修好了它们。最后一个真正的错误出现了：new Bootstrapper() 试图加载一个旧版本的 ninject dll。删除了所有 ninject 包。一一安装了ninject nuget包，确保安装了正确的版本。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-06-13T13:56:47.833

在我从 MVC 3 转移到 MVC 4 的最近一个项目中，我为此花了几个小时的时间。由于缺乏正确的答案，我认为这必须是我所做的事情，因为看起来 Ninject.MVC3 nuget包可以在 MVC 4 中正常工作——确实如此。

就我而言，我没有完全升级 MVC3 项目。遵循[本指南](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)后，我得到了按预期工作的东西。我的猜测是我错过了程序集绑定重定向。

因此，如果您将 MVC 3 项目升级到 MVC 4，使用 Ninject 并获得 no parameterless constructor defined 错误，希望这会有所帮助。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-05-30T22:45:02.687

我尝试使用 MVC 5 设置 Ninject。最后我必须先使用带有控制器工厂的解决方案，然后再使用带有绑定重定向的解决方案。之后，一切都按预期工作。使用本地 IIS 服务器。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-04-28T21:06:08.240

通过 Nuget 添加对 Ninject.Web.MVC 的引用为我解决了这个问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-05-25T21:57:41.283

所有这一切的捷径：下载以下 Nuget 包之一：

*   `Ninject.MVC3`
*   `Ninject.MVC5`

这将处理您需要的绑定。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-03-29T16:14:22.933

我通过从 Nuget 移除 Ninject MVC5 并安装 Ninject MVC3 来修复我的问题。

```
MVC5 == Ninject.MVC5
MVC4 == Ninject.MVC3
MVC3 == Ninject.MVC3 
```

检查参考资料中 System.Web.MVC 的版本，以确定您当前使用的是哪个版本的 MVC。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-12-02T21:25:35.940

通过从我的控制器构造函数中删除 #if #endif 指令，我能够在 MVC5 Web 项目中解决此问题。

# iphone - UISegmentedControl 在 UIView 中没有响应

> ID：12311481
> 
> 赞同：1
> 
> 时间：2012-09-07T03:51:58.013
> 
> 标签：iphone, ios, uisegmentedcontrol

我有一个`UIView`名为的属性`viewToFade`，其中包含一个`UISegmentedControl`. 当我为 设置动画时`UIView`（因此它出现在点击并逐渐消失）时，`UISegmentedControl`不响应触摸。这是我正在使用的代码：

```
-(void)fadeView
{
self.viewToFade.alpha=1;
self.viewToFade.hidden=NO;

//When I comment the following lines out, everything is fine--the `UISegmentedControl` responds as it should.  
//But when I include them, the `UISegmentedControl` doesn't register changes/taps.

[UIView animateWithDuration:0.3
                      delay: 3.0
                    options:UIViewAnimationOptionAllowUserInteraction
                 animations:^{
                     self.viewToFade.alpha = 0.0;
                 }
                 completion:nil];
} 
```

我究竟做错了什么？

（如果相关，我会说 the`UIView`和 the`UISegmentedControl`都是在 xib 文件中创建的。）

**编辑：**我想出了一种解决问题的方法，即重写代码如下：

```
-(void)fadeView
{
self.viewToFade.alpha=1;
self.viewToFade.hidden=NO;
[self performSelector:@selector(disneyfy) withObject:nil afterDelay:(3)];
} 

-(void)disneyfy
{
    [UIView animateWithDuration:0.3
                 animations:^{
                     self.viewToFade.alpha = 0.0;
                 }];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:34:44.610

我在一个示例项目中玩过这个，可以复制你的结果——我什至没有做任何动画（在我的例子中）一个按钮本身使它不受触摸的影响。然而，在我有限的测试中，我能够看到它确实对突出显示有反应。

我刚刚测试了以下内容（使用 UIBuutton，假设同样的事情适用于分段控制）：

*   在按钮上添加一个透明视图，并在动画之前为其添加手势识别器

*   让点击识别器的 actionMethod 更改按钮的突出显示，然后调度一个块以在 100 毫秒左右将其关闭（如果你真的拦截触摸，你会变得更漂亮）。

*   除了更改突出显示之外，还向控件发送类似这样的内容（再次使用按钮）：

    ```
    [tapButton sendActionsForControlEvents:UIControlEventTouchUpInside]; 
    ```

似乎控件在动画期间对此类事情做出了响应。

# c - 是否可以将打印到终端的所有内容记录到 C 中的文本文件中？

> ID：12311485
> 
> 赞同：1
> 
> 时间：2012-09-07T03:53:03.907
> 
> 标签：c, terminal, printf

我有大量的 printf 语句，我想将它们全部写入一个文本文件。我意识到我可以在每个语句之后添加 fprintf 语句，但有没有更好的方法，比如函数，或者我应该只编写自己的函数？我觉得这可能是一个标准程序，我只是不知道它叫什么，所以很难通过谷歌搜索找到答案。

**编辑：**为了清楚起见，我希望输出像往常一样继续在终端上运行，但也可以同时打印到文件中。有几个人建议使用 bash 命令。什么时候应该执行？程序运行后？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T04:00:33.183

如果你在一个 UNIX 类型的盒子上，你可以通过管道输出`tee`，这会将它传递到标准输出*和*一个文件：

```
myProg | tee /tmp/myProg.out 
```

还有一些方法可以用标准错误做同样的事情：

```
( myProg 2>&1) | tee /tmp/myProg.out_and_err 
```

这当然取决于您使用的任何外壳，但这应该适用于最常见的外壳。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T03:57:45.900

当程序运行时，使用`>`bash 操作符将程序输出重定向到一个文本文件：

IE

`myprogram > myfile.txt`

这会将通常输出到屏幕的所有内容保存`printf`到名为 myfile.txt 的文件中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T04:18:28.097

如何将标准输出重定向到一个文件，比如

```
int main ()
{
  freopen ("myfile.txt","w",stdout);
  printf ("This sentence is redirected to a file.");
  fclose (stdout);
  return 0;
} 
```

代码示例来自[freopen的 c++ 参考](http://www.cplusplus.com/reference/clibrary/cstdio/freopen/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T05:07:32.663

你可以这样做：`./executable > outputfile 2>&1`或`./executable &> outputfile`

这将使您能够将标准输出和标准输出重定向到`outputfile`.

# javascript - 为什么这个 === 窗口在 JavaScript 范围安全构造函数中是错误的？

> ID：12311486
> 
> 赞同：3
> 
> 时间：2012-09-07T03:53:06.780
> 
> 标签：javascript, constructor, window, this

我的代码是：

```
(function(){
    var test=function(){
        if(this === window)
            return new test();
    }

    test.prototype.play = function(){
        alert("Hello");
    };

    window.Test=test;
})();

window.onload=function(){
    Test().play();
}; 
```

这可以很好地工作`IE9+` `firefox` `chrome`，但是`ie 6/7/8`，错误显示`Test().play();`，谁能告诉我为什么？

错误信息是：

![在此处输入图像描述](../Images/602cc6d4322af79ed9d045debd1eecf0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T05:55:32.697

IE 有一些函数表达式的怪癖，请考虑（未在 IE 8 中测试，因为我目前没有它）：

```
(function(global){

    function test() {
        if (this === global)
            return new test();
    }

    test.prototype.play = function(){
        alert("Hello");
    };

    global.Test = test;

})(this);

window.onload = function(){
    Test().play();
}; 
```

另一种测试是：

```
 if (!(this instanceof Test)) 
```

# objective-c - 如何像这样在for循环中调用方法

> ID：12311488
> 
> 赞同：0
> 
> 时间：2012-09-07T03:53:16.103
> 
> 标签：objective-c, ios, xcode

每次 for 循环运行时，我都需要调用处理播放器的函数动画。

```
 -(void)animateDealingToPlayer:(Player *)player withDelay:(NSTimeInterval)delay
{
self.frame = CGRectMake(-100.0f, -100.0f, CardWidth, CardHeight);
self.transform = CGAffineTransformMakeRotation(M_PI);

NSArray *position = [NSArray arrayWithObjects:

                     [NSValue valueWithCGPoint:CGPointMake(100, 100)],                               
                     [NSValue valueWithCGPoint:CGPointMake(0, 0)],                                             
                     [NSValue valueWithCGPoint:CGPointMake(0, 0)],                         
                     [NSValue valueWithCGPoint:CGPointMake(200, 100)],                          
                     [NSValue valueWithCGPoint:CGPointMake(200, 100)],                                                   

                     nil];              

for(int i=0; i<6; i++) {
    NSValue *value = [position objectAtIndex:i];
    CGPoint point = [value CGPointValue];
    NSLog(@"%@",NSStringFromCGPoint(point));

    _angle = [self angleForPlayer:player];

    [UIView animateWithDuration:0.2f
                          delay:delay
                        options:UIViewAnimationOptionCurveEaseOut
                     animations:^
     {

         self.center = point;              

         self.transform = CGAffineTransformMakeRotation(_angle);
     }
                     completion:nil]; 
```

现在它一遍又一遍地重写 self.center 直到它给出第 5 个对象索引，而不是单独调用所有索引号。例如，它不是在所有点发牌，而是只在 (200,100) 发牌。我需要一些方法来每次调用 animaitedealingwithplayer 以便它会处理所有点，但我该怎么做呢？将感谢我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:15:59.923

问题是您正在创建多个应用于单个视图元素的动画块，并且您正在一次应用所有这些。

相反，您可以使动画块在完成时触发另一个动画。

[Apple View Programming Documentation](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/AnimatingViews/AnimatingViews.html#//apple_ref/doc/uid/TP40009503-CH6-SW1)中有一个示例：“*清单 4-2 显示了一个动画块的示例，它使用完成处理程序在第一个动画完成后启动新动画*”

我在这里发布示例，以便您了解它，但请阅读文档！：

```
- (IBAction)showHideView:(id)sender
{
    // Fade out the view right away
    [UIView animateWithDuration:1.0
        delay: 0.0
        options: UIViewAnimationOptionCurveEaseIn
        animations:^{
             thirdView.alpha = 0.0;
        }
        completion:^(BOOL finished){
            // Wait one second and then fade in the view
            [UIView animateWithDuration:1.0
                 delay: 1.0
                 options:UIViewAnimationOptionCurveEaseOut
                 animations:^{
                    thirdView.alpha = 1.0;
                 }
                 completion:nil];
        }];
} 
```

在您的示例中，您可能应该（在伪代码中）：

```
// center card on dealer
Animate: ^{
   // move card to player1
}, completion: ^{
   // center card on dealer
   Animate: ^{
     // move card to player2
   }, completion: ^{
     //center 
     // animate again, and again etc.
   }
} 
```

# javascript - 如何在Javascript中一次显示X个div？

> ID：12311489
> 
> 赞同：0
> 
> 时间：2012-09-07T03:53:28.513
> 
> 标签：javascript, jquery

假设我有一个名称数组：

```
var myarray = ["A", "B", "C", "D", ... "J"] 
```

假设我的数组中有 10 个条目，并且我只想在任何给定时间显示 3 个。如何使每个条目（如果显示）以红色 div 显示，并带有“后退”链接和“下一个”链接？当我单击下一步时，它将显示下一个 3；当我单击上一个时，它将显示前 3 个。

例子：

最初显示 3 个 div

```
"A"  "B"  "C" 
```

点击“下一步”显示

```
"D" "E" "F" 
```

点击“上一个”节目

```
"A" "B" "C" 
```

单击“下一步”3 次仅显示 1 个 div“J”

如何使用 Javascript 或 jQuery 来解决这个问题？任何样品表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:39:01.107

只是很快就掀起了一些东西。我认为对此有更好的模式......但它应该适用于任何充满任何东西的数组。

这有“下一个”和“上一个”按钮：http: [//jsfiddle.net/aEYSB/](http://jsfiddle.net/aEYSB/)

```
(function(){
    var index = 0,
        increment = 3,
        container = $( '#container' ),
        arr = [ 0,1,2,3,4,5,6,7,8,9,10,11,12 ],
        len = arr.length,
        limit = len - 1,

    renderMarkup = function(){
      var markup = [
        '<p>' + arr[index] + '</p>' 
      ];
      container.append( markup.join( '' ) );        
    };

    $( '#next' ).click( function(){
      container.empty();
      for( var i = 0; i < increment; i++ ){
        renderMarkup();
        if( index === limit ){ break; }
        index++;
      }
    });

    $( '#prev' ).click( function(){
      container.empty();
      for( var i = 0; i < increment; i++ ){
        renderMarkup();
        if( index === 0 ){ break; }
        index--;
      }
      var p = $( 'p' ).get().reverse();
      container.empty().append( p );
    });
})();​ 
```

这将形成一个连续的轮播：http: [//jsfiddle.net/fSNhK/](http://jsfiddle.net/fSNhK/)

```
(function(){
    var index = 0,
        increment = 3,
        container = $( '#container' ),
        arr = [ 0,1,2,3,4,5,6,7,8,9,10,11,12,13 ],
        len = arr.length,
        limit = len - 1,

    renderMarkup = function(){
      var markup = [
        '<p>' + arr[index] + '</p>' 
      ];
      container.append( markup.join( '' ) );        
    },

    controlIndex = function(){
      ( index === limit ) ? index = 0 : index++;
    };

    $( '#toggle' ).click( function(){
      container.empty();
      for( var i = 0; i < increment; i++ ){
        renderMarkup();
        controlIndex();
      }
    });
})();​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T06:31:04.063

尝试这个

***HTML***

```
<div class="main">
    <input type="submit" value="next" id="next">
    <input type="submit" value="prev" id="prev">
    <div class="show"></div>
</div> 
```

***JS代码***

```
$(document).ready(function(){
    var arr = ['a', 'b', 'c', 'd','e','f'];
    var goindex = [];
    var len=0;
    $('#next').on('click', function(){
        var next= [];
        for(var i=len; i<len+3; i++){
          next[i] = arr[i];
            goindex[i]=i;
        }
        len += 3;
        console.log(len);
        $('.show').text(next);

    });

    $('#prev').on('click', function(){
        var prev = [];
        console.log(len);
        var newlen=0;
        if(newlen>=0){
            for(var i=len-1; i>=newlen; i--){
              prev[i] = arr[i];
            }
        }
        newlen=len-3;
        len-=3;
        $('.show').text(prev);
    });
}); 
```

**[JS 小提琴链接](http://jsfiddle.net/dj5Sa/68/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T04:19:05.193

```
Set start = 0;

Loop from start to start + 3;

Change start to start+3 , and loop again 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T03:56:44.410

从这里尝试一个：[http](http://www.jquery4u.com/plugins/10-jquery-pagination-plugins/#.UElwFo0geSo) ://www.jquery4u.com/plugins/10-jquery-pagination-plugins/#.UElwFo0geSo 或者寻找 jQuery 分页

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T04:56:26.567

这是一种解决方案 - [http://jsfiddle.net/joplomacedo/3edpw/](http://jsfiddle.net/joplomacedo/3edpw/) - 按照您的建议工作。

```
var prev = document.getElementById('previous'),
    next = document.getElementById('next'),
    log  = document.getElementById('log'),
    array  = [0,2,3,9,32,2,5,8,9, 79],
    count = 0,

    updateLog = (function () {
        var x,
            amount_to_show = 3;

        return function () {
            x = count * amount_to_show;
            log.innerText = array.slice(x, x+amount_to_show).join(', ');
        };
    })(),

    nextClick = (function () {
        var x = Math.ceil(array.length / 3 - 1);

        return function () {
            if ( count != x ) {
                ++count ;
                updateLog();
            }
        };
    })(),

    previousClick = function () {
        if ( count != 0 ) {
            --count;
            updateLog();
        }
    };

prev.onclick = previousClick;
next.onclick = nextClick;

updateLog(); 
```

# c# - 使用 C# 在 MySQL 中备份数据库

> ID：12311492
> 
> 赞同：10
> 
> 时间：2012-09-07T03:54:03.310
> 
> 标签：c#, mysql, winforms

我创建了一个 Winforms 来备份我的数据库。然后当我运行我的程序时，它给出了一个未处理的 Win32Exception。“系统找不到指定的文件”尽管该文件已经存在并导致该异常。

这是我关于我的问题的代码

```
using System.Diagnostics;

private void btnProceed_Click(object sender, EventArgs e)
{
            path = @"D:\MySQL\MySQL Server 5.5\bin\mysqldump.exe -u " + txtBoxDBUsername.Text + @" -p " + txtBoxDBName.Text + @" > D:\C#\Client\Salesmate - EMC\SalesMate\Backup\" + maskeTxtBoxDBFile.Text + @"";
            Process p = new Process();
            p.StartInfo.FileName = path;
            p.Start();
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-07T04:21:25.763

您可以使用**MySqlBackup.NET**作为**MySqlDump**
文档的替代品：http:
[//www.codeproject.com/Articles/256466/MySqlBackup-NET-MySQL-Backup-Solution-for-Csharp-V](http://www.codeproject.com/Articles/256466/MySqlBackup-NET-MySQL-Backup-Solution-for-Csharp-V)
[https://github.com/MySqlBackupNET /MySqlBackup.Net](https://github.com/MySqlBackupNET/MySqlBackup.Net)

示例代码：

**备份 MySQL 数据库**

```
using MySql.Data.MySqlClient; 
```

然后是代码，

```
private void Backup()
{
    string constring = "server=localhost;user=root;pwd=qwerty;database=test;";
    string file = "C:\\backup.sql";
    using (MySqlConnection conn = new MySqlConnection(constring))
    {
        using (MySqlCommand cmd = new MySqlCommand())
        {
            using (MySqlBackup mb = new MySqlBackup(cmd))
            {
                cmd.Connection = conn;
                conn.Open();
                mb.ExportToFile(file);
                conn.Close();
            }
        }
    }
} 
```

**恢复 MySQL 数据库**

```
private void Restore()
{
    string constring = "server=localhost;user=root;pwd=qwerty;database=test;";
    string file = "C:\\backup.sql";
    using (MySqlConnection conn = new MySqlConnection(constring))
    {
        using (MySqlCommand cmd = new MySqlCommand())
        {
            using (MySqlBackup mb = new MySqlBackup(cmd))
            {
                cmd.Connection = conn;
                conn.Open();
                mb.ImportFromFile(file);
                conn.Close();
            }
        }
    }
} 
```

**更新：**
我是这个库的作者之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-17T05:29:09.817

我已经尝试过该代码，但在运行之前发生了问题。例外是 - System.Windows.Forms.dll 中发生了“System.IO.FileLoadException”类型的未处理异常

附加信息：无法加载文件或程序集“MySql.Data，Version=6.5.4.0，Culture=neutral，PublicKeyToken=c5687fc88969c44d”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T04:23:38.217

我相信您必须提及用户，密码，数据库名称和目标路径..

```
string path = @"C:\Program Files\MySQL\MySQL Server 5.5\bin\mysqldump.exe -u " + txtBoxDBUsername.Text + @" -p " + txtBoxDBName.Text + @" > " + txtBoxDBName.Text + @".sql"; 
```

备份：#mysqldump -u root -p[root_password] [database_name] > dumpfilename.sql

恢复：# mysql -u root -p[root_password] [database_name] < dumpfilename.sql

[http://www.thegeekstuff.com/2008/09/backup-and-restore-mysql-database-using-mysqldump/](http://www.thegeekstuff.com/2008/09/backup-and-restore-mysql-database-using-mysqldump/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-07T08:28:48.127

*   不要将整个调用放在“path =”中，您应该使用“Arguments”来指定参数，如名称所示。如果库检查是否存在被调用文件（您的整个路径），它不应该找到它！
*   你确定那条路径是正确的吗？您应该使用注册表找到 MySQL 服务器路径，而不是对路径进行硬编码，或者如果这对您来说不容易，您可以将其作为参数从命令行传递或从您的表单（设置页面）中指定。
*   您可能错过了凭据：-u 应该用于用户名（即使我使用 --user），-p 应该用于密码（即使我使用 --password）。为什么将“txtBoxDB **Name** .Text”作为密码传递？！
*   也许您的目标路径无效：它包含空格，如果您使用空格，则应使用引号。
*   txtBoxDBName.Text (?password?) 包含什么？也有空格？如果是，它不起作用。
*   last present of `+ @""`完全没用，它不插入任何引号。

修正了引号的代码的正确版本是： `path = @"""D:\MySQL\MySQL Server 5.5\bin\mysqldump.exe"" -u " + txtBoxDBUsername.Text + @" -p " + txtBoxDBName.Text + @" > ""D:\C#\Client\Salesmate - EMC\SalesMate\Backup\" + maskeTxtBoxDBFile.Text + @"""";`

为了提高可读性： `path = $@"""D:\MySQL\MySQL Server 5.5\bin\mysqldump.exe"" -u {txtBoxDBUsername.Text} -p {txtBoxDBName.Text} > ""D:\C#\Client\Salesmate - EMC\SalesMate\Backup{maskeTxtBoxDBFile.Text}""";`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-08T08:02:42.123

```
ProcessStartInfo psi = new ProcessStartInfo();
psi.FileName = @"C:\xampp\mysql\bin\mysql.exe";
psi.RedirectStandardInput = true;
psi.RedirectStandardOutput = false;
psi.CreateNoWindow = true;
psi.Arguments = string.Format(@"-u{0} -p{1} -h{2} {3}", "root", "password", "localhost", "your_dbname");
psi.UseShellExecute = false;
Process process = Process.Start(psi);
process.StandardInput.Write(File.ReadAllText(inputFilePath));
process.StandardInput.Close();
process.WaitForExit();
process.Close(); 
```

这个对我有用，只要您备份了 .sql 文件，您就可以尝试一下

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-23T06:25:20.170

你可以试试这个。

```
 public void BackUpData(string file)
    {
        using (MySqlConnection con = new MySqlConnection { ConnectionString = config })
        {
            using (MySqlCommand cmd = new MySqlCommand { Connection = con })
            {
                using (MySqlBackup mb = new MySqlBackup { Command = cmd })
                {

                    try
                    {
                        con.Open();

                        try
                        {
                            mb.ExportToFile(file);
                        }
                        catch(MySqlException ex)
                        {
                            msgErr(ex.Message + " sql query error.");
                            return;
                        }
                    }
                    catch(MySqlException ex)
                    {
                        msgErr(ex.Message + " connection error.");
                        return;
                    }

                }

            }

        }

    } 
```

# java - 如何调试Tomcat中的领域功能？

> ID：12311496
> 
> 赞同：8
> 
> 时间：2012-09-07T03:54:29.517
> 
> 标签：java, tomcat

我已将 server.xml 主机部分中的领域设置设置为如下所示：

```
<Realm  className="org.apache.catalina.realm.JDBCRealm"  driverName="org.gjt.mm.mysql.Driver"  
         connectionURL="jdbc:mysql://localhost:3306/test" connectionName="test" connectionPassword="test"  
             userTable="users" userNameCol="user_name" userCredCol="user_pass" userRoleTable="user_roles" 
       roleNameCol="user_role" /> 
```

同样在 web.xml 中：

```
<security-role>
    <role-name>ADMIN</role-name>
</security-role>

<security-constraint>  
    <web-resource-collection>  
        <web-resource-name>critical</web-resource-name>  
        <url-pattern>/admin/*</url-pattern>  
        <http-method>GET</http-method>  
        <http-method>POST</http-method>  
    </web-resource-collection>  
    <auth-constraint>  
        <role-name>ADMIN</role-name>  
    </auth-constraint>  
</security-constraint>  

<login-config>  
    <auth-method>FORM</auth-method>  
    <form-login-config>  
        <form-login-page>/login.jsp</form-login-page>  
        <form-error-page>/error.jsp</form-error-page>  
    </form-login-config>  
</login-config> 
```

我已经建立了数据库。但是，当 login.jsp 被调用时，即使我输入了正确的密码，我也会被重定向到 error.jsp

我想知道是否有办法在此过程中找出问题所在。我可以在 Eclipse 或任何其他可能解决问题的提示中执行此操作吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-12-18T01:31:48.627

要从领域身份验证步骤中获取调试信息，请遵循此过程。

当您在 server.xml 中定义您的领域时，将 debug="9" 添加到定义中（您当然可以使用较小的数字来减少细节）。

```
<Realm  className="org.apache.catalina.realm.JDBCRealm"  driverName="org.gjt.mm.mysql.Driver"  
   connectionURL="jdbc:mysql://localhost:3306/test" connectionName="test" connectionPassword="test"  
   userTable="users" userNameCol="user_name" userCredCol="user_pass" userRoleTable="user_roles" 
   roleNameCol="user_role" debug="9" /> 
```

您还需要将其添加到您的 logging.properties 文件中：

```
org.apache.catalina.realm.level = ALL
org.apache.catalina.realm.useParentHandlers = true
org.apache.catalina.authenticator.level = ALL
org.apache.catalina.authenticator.useParentHandlers = true 
```

您可能还需要添加它，以防止日志缓冲。如果这样做，请记住在完成调试后将其删除。

```
1catalina.org.apache.juli.FileHandler.bufferSize = -1 
```

现在，领域的调试日志应该在 catalina.out 文件中结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-09T20:44:23.877

对于其他发现此问题的人，我发现以下适用于 Tomcat 8.5.40：

```
java.util.logging.ConsoleHandler.level = ALL
org.apache.catalina.level = FINEST
org.apache.catalina.realm.JNDIRealm.level = FINEST
org.apache.catalina.realm.JNDIRealm.useParentHandlers = true 
```

关键事实似乎是您的日志记录通过了几层定义，并将被第一个具有较低级别的定义修剪，因此您需要确保它通过的每个位都是 FINEST 或 ALL。

希望这可以节省一些时间；）

伊恩。

# android - 从日历中选择日期后传递日期

> ID：12311497
> 
> 赞同：0
> 
> 时间：2012-09-07T03:54:31.560
> 
> 标签：android, date

大家我在将日期从日历传递到我的 Create_Event.class 时遇到问题。最初日期 textView 显示“文本”，然后当我单击“选择日期”按钮时，日历页面将显示，并且日期应该传递给最初显示“文本”的 textView。我尝试使用intent.putExtra 将日期从日历页面传递到Create_Events 页面进行编码，但由于NullPointerException，我遇到了强制关闭错误。谁能帮我解决这个问题？非常感谢。

供参考，代码：

日历.java

```
@Override
                public void onClick(View view)
                {
                    String date_month_year = (String)view.getTag();
                    selectedDayMonthYearButton.setText(new StringBuilder().append("Selected:").append(date_month_year));

                    Intent k = new Intent(Calendar_Event.this, Create_Events.class);
                    k.putExtra("passdate", date_month_year);
                 startActivity(k); 
```

Create_Event.java

```
 Intent intent = this.getIntent();
        if(intent == null)
        {
         String strdata = intent.getExtras().getString("passdate");
         TextView txtDate = (TextView) findViewById(R.id.textDate);
         txtDate.setText(strdata);
         }
        else
        {

        } 
```

***最初 if(intent == null) 是 if(intent != null)，我认为改变它会起作用，但它没有。:P

更新了logcat：

```
09-07 12:03:28.177: E/AndroidRuntime(1033): FATAL EXCEPTION: main
09-07 12:03:28.177: E/AndroidRuntime(1033): java.lang.RuntimeException: Unable to start activity ComponentInfo{main.page/main.page.Create_Events}: java.lang.NullPointerException
09-07 12:03:28.177: E/AndroidRuntime(1033):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
09-07 12:03:28.177: E/AndroidRuntime(1033):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-07 12:03:28.177: E/AndroidRuntime(1033):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-07 12:03:28.177: E/AndroidRuntime(1033):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-07 12:03:28.177: E/AndroidRuntime(1033):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-07 12:03:28.177: E/AndroidRuntime(1033):     at android.os.Looper.loop(Looper.java:137)
09-07 12:03:28.177: E/AndroidRuntime(1033):     at android.app.ActivityThread.main(ActivityThread.java:4424)
09-07 12:03:28.177: E/AndroidRuntime(1033):     at java.lang.reflect.Method.invokeNative(Native Method)
09-07 12:03:28.177: E/AndroidRuntime(1033):     at java.lang.reflect.Method.invoke(Method.java:511)
09-07 12:03:28.177: E/AndroidRuntime(1033):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-07 12:03:28.177: E/AndroidRuntime(1033):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-07 12:03:28.177: E/AndroidRuntime(1033):     at dalvik.system.NativeStart.main(Native Method)
09-07 12:03:28.177: E/AndroidRuntime(1033): Caused by: java.lang.NullPointerException
09-07 12:03:28.177: E/AndroidRuntime(1033):     at main.page.Create_Events.onCreate(Create_Events.java:261)
09-07 12:03:28.177: E/AndroidRuntime(1033):     at android.app.Activity.performCreate(Activity.java:4465)
09-07 12:03:28.177: E/AndroidRuntime(1033):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-07 12:03:28.177: E/AndroidRuntime(1033):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

![在此处输入图像描述](../Images/e011f1fa03c25f09440aa6b082e2816f.png) ![在此处输入图像描述](../Images/f3ab78d6ccb057a11cdb144054a3386d.png)

任何帮助将不胜感激！再次感谢。

更新：

```
 Bundle bundle = getIntent().getExtras();  
    if(bundle != null)
    {

        String date = bundle.getString("date");
        TextView txtDate = (TextView) findViewById(R.id.textDate);
        txtDate.setText(date);          
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T03:57:55.820

在 Create_Events Activity 中使用 Bundle 来获取日期。在传递数据之前，您首先需要检查它是否为空。

```
Bundle bundle = getIntent().getExtras();

if(bundle != null)
{
    String date = bundle.getString("passdate");
} 
```

> Bundle 通常用于在各种活动之间传递数据。这取决于您要传递什么类型的值，但 bundle 可以保存所有类型的值并传递给新活动。

# javascript - 将 URL 添加到 Javascript

> ID：12311499
> 
> 赞同：0
> 
> 时间：2012-09-07T03:54:45.953
> 
> 标签：javascript

如何添加：

类型：“POST”，url：“login.php”，在下面的 JS 代码中（确切地在注释“在这里进行 ajax 调用和处理......”：

```
$(document).ready(function()
    {
        $("#submit_butt").click( function()
        {
            var conf =
            {
                frequency: 5000,
                spread: 5,
                duration: 600
            };
        /* do your AJAX call and processing here...
        ....
        ....
        */
        // this is the call we make when the AJAX callback function indicates a login failure 
            $("#login").vibrate(conf);
            // let's also display a notification
            if($("#errormsg").text() == "")
            {
            $("#loginform").append();       
            // clear the fields to discourage brute forcing :)
            $("#password").val("");
            document.forms['login_form'].elements['username'].focus();
            }
            else
            {

            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T03:58:08.473

代替

```
/* do your AJAX call and processing here...
....
....
*/ 
```

和

```
$.ajax({
 type: "POST",
 url: "login.php"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T04:05:58.740

为 Ajax 处理添加此代码

```
$.ajax({
  url: "login.php",
  data: param, 
  success: function(result) {
        alert('SUCCESS');
  }
}); 
```

# ruby-on-rails - 在 Sublime 文本编辑器中构建 Ruby 时出错

> ID：12311502
> 
> 赞同：4
> 
> 时间：2012-09-07T03:55:17.130
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ubuntu, sublimetext2

```
puts "Hello World!" 
```

当我单击 CTRL+B (Tools->Build) 时，我在控制台中收到以下错误

> [Errno 2] 没有这样的文件或目录 [cmd: [u'~/.rvm/bin/rvm-auto-ruby', u'/home/ubuntu/rails_projects/Ruby/c2f.rb']] [dir: / home/ubuntu/rails_projects/Ruby] [路径：/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin: /usr/games] [已完成]

下面是 Ruby.sublime-build

```
{
    "cmd": ["~/.rvm/bin/rvm-auto-ruby", "$file"],
    "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
    "selector": "source.ruby"
} 
```

我在 Ubuntu 12.04、Sublime Text 2.0.1 中运行它

~/.rvm/bin/rvm-auto-ruby -v ruby​​ 1.9.3p194（2012-04-20 修订版 35410）[i686-linux]

我错过了什么？我还设置了 Ruby 测试，并且可以正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T07:16:28.300

问题似乎是您的 Ruby 命令路径中的**~**。可能不是很笼统，但尽量改

```
"cmd": ["~/.rvm/bin/rvm-auto-ruby", "$file"] 
```

和

```
"cmd": ["/home/your_username/.rvm/bin/rvm-auto-ruby", "$file"] 
```

# html - 悬停在FF中不起作用

> ID：12311506
> 
> 赞同：0
> 
> 时间：2012-09-07T03:55:37.100
> 
> 标签：html, css, dom, hover

```
ul {
  list-style-type: none;
  padding: 0px 5px 0px 5px;
  margin: 0px;
}

ul li {
  border-bottom: 1px solid #B9D3EE;
}

ul li a:link,
ul li a:visited,
ul li a:active {
  width: 100%;
  color: blue;
}

ul li a: hover {
  width: 100%;
  color: #ffffff;
  background-color: #B9D3EE;
} 
```

在 IE 中，上面的代码将在悬停时突出显示整个单元格。但在 FF 中，它只会突出显示其中的链接。 **我希望 FF 像 IE 一样突出显示完整的单元格。**

这是列表：请记住，仅创建了第一个链接，因为我刚刚开始创建此列表，并在发现此问题时停止对其进行测试。

```
<ul>
  <li><a href="">beauty</a></li>
  <li>creative</li>
  <li>Info Tech. (IT)</li>
  <li>cycle</li>
  <li>event</li>
  <li>financial</li>
  <li>legal</li>
  <li>lessons</li>
  <li>medical</li>
  <li>marine</li>
  <li>pet</li>
  <li>automotive</li>
  <li>farm+garden</li>
  <li>household</li>
  <li>labor/move</li>
  <li>MKT/COMM</li>
  <li>office</li>
  <li>skill'd trade</li>
  <li>real estate</li>
  <li>health/wellness</li>
  <li>travel/vac</li>
  <li>write/ed/tr8</li>
</ul> 
```

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:02:24.873

您可以将`a`元素设为块元素，因此它们将获得父元素的所有宽度（演示：http: [//jsfiddle.net/WasWE/](http://jsfiddle.net/WasWE/)）。

```
ul li a:link, ul li a:visited, ul li a:active {
  display: block;
  color: blue;
}

ul li a:hover {
  background-color: #B9D3EE;
  color: #ffffff;
}​ 
```

或者您可以向元素添加`hover`事件（演示：http: [//jsfiddle.net/XmwTV/](http://jsfiddle.net/XmwTV/)）：`li`

```
ul li:hover {
  background-color: #B9D3EE;
}

ul li a:link, ul li a:visited, ul li a:active {
  color: blue;
}

ul li a:hover {
  color: #ffffff;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-07T04:10:16.390

嗨，现在在您的 css 中删除`with 100%`并在您的**css**中`anchor link`定义`display block`**`anchor`**

 **像这样

```
ul li a: link,
ul li a: visited,
ul li a: active {

display:block; // add this line
width:100%; // remove this line

  color: blue
}

ul li a:hover{
width:100%; //remove this line
  color: #ffffff;
  background-color: #B9D3EE;
} 
```

***[演示](http://tinkerbin.com/VkcG47oC)*****

# django - 向所有人公开 django media_url 不是不安全吗？

> ID：12311511
> 
> 赞同：10
> 
> 时间：2012-09-07T03:56:44.247
> 
> 标签：django, security, django-staticfiles

根据 Django 文档：“将静态资产与用户上传的文件一起放置在 MEDIA_ROOT 中是很常见的，并在 MEDIA_URL 上同时提供它们。”

这是否意味着每个人都可以访问其他人上传的文件？不是不安全吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T05:51:01.400

# 是的

聪明的用户可能会猜出属于其他用户的媒体文件的路径。

Django 诞生于新闻出版行业，这并不令人担忧：管理员基于受信任用户的概念，例如属于同一组织的作家和编辑。

# 减轻

## 需要身份验证

不是我的第一选择，但您可以[让网络服务器针对 Django 的用户数据库进行身份验证](https://docs.djangoproject.com/en/2.2/howto/deployment/wsgi/apache-auth/)：

```
WSGIScriptAlias / /path/to/mysite.com/mysite/wsgi.py
WSGIPythonPath /path/to/mysite.com

WSGIProcessGroup %{GLOBAL}
WSGIApplicationGroup %{GLOBAL}

<Location "/media/private-user-content/">
    AuthType Basic
    AuthName "Top Secret"
    Require valid-user
    AuthBasicProvider wsgi
    WSGIAuthUserScript /path/to/mysite.com/mysite/wsgi.py
</Location> 
```

接受的答案建议从经过身份验证的 Django 视图中提供敏感文件。对于低流量的应用程序来说是可以的，但对于大型项目来说，它带来的性能损失并不是每个网站都能承受的。

## 通过云存储服务提供服务

出于性能和成本考虑，大型项目应该使用一些云存储后端。如果您的项目已经托管在三大巨头（AWS、GCP、Azure）中，请检查[Django Storages](https://django-storages.readthedocs.io/en/latest/backends/amazon-S3.html)。例如，如果您使用的是 S3 后端，则可以为生成的 URL 开启“查询参数身份验证”，瞧，问题就解决了。这有一些优点：

*   它对开发人员是透明的
*   企业级性能
*   降低存储和网络成本
*   可能是最安全的选择

## 混淆路径

对于您从同一个网络服务器提供媒体和应用程序的小型项目，您可以让爱管闲事的用户很难找到不属于他们的媒体文件：

1) 在 MEDIA_ROOT 文件夹中禁用 Web 服务器“自动索引”。对于 apache，它就像：

```
<Directory /path/to/application/media/root>
   Options -Indexes
</Directory> 
```

如果没有索引，为了访问属于其他人的文件，您将不得不猜测确切的文件名。

2) 使用 FileFields 的“upload_to”参数中的加密哈希使文件路径难以猜测：

```
def hard_to_guess(instance, filename):
    salt = 'six random words for hidden salt'
    hash =  hashlib.md5(instance.user.username + salt)
    return '/'.join(['content', hash, filename])

...

class SomeModel(models.Model):
    ...
    user = models.ForeignKey(User)        
    content = models.FileField(upload_to=hard_to_guess)
    ... 
```

此解决方案不会影响性能，因为媒体文件仍直接从网络服务器提供。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T13:25:49.953

回答您的问题：是的，这将允许每个人访问每个人上传的文件。是的，这是一个安全风险。

作为一般规则，不应直接从文件系统提供敏感文件。作为另一条规则，除非另有明确标记，否则所有文件都应被视为敏感文件。

`MEDIA_ROOT`和设置的起源`MEDIA_URL`可能在于 Django 作为发布平台的历史。毕竟，您的编辑可能不会介意他们添加到文章中的图片是否可以轻松找到。但话又说回来，文章附带的图片通常是非敏感的。

扩展您的问题：敏感文件应始终放置在 Web 服务器无法直接访问的目录中。请求这些文件只能通过视图类或函数来完成，它可以在提供文件之前进行一些合理的访问检查。

此外，不要依赖混淆敏感文件。例如，让我们使用 Paulo 的示例（请参阅其他答案）来混淆相册。现在我的图片存储为`MEDIA_URL/A8FEB0993BED/P100001.JPG`. 如果我与其他人共享此链接，他们可以轻松尝试类似的 URL `MEDIA_URL/A8FEB0993BED/P710032.JPG`，基本上可以让他们暴力破解我的整个相册。

# java - 一个并行的expectimax

> ID：12311516
> 
> 赞同：0
> 
> 时间：2012-09-07T03:57:07.700
> 
> 标签：java, algorithm, search, artificial-intelligence

是否可以使expectimax搜索并行？我想尝试一个基本的expectimax算法，比如star1，看看性能是否会显着提高。

我现在所知道的是使 alpha-beta 修剪与 minimax 平行，但它有点不同，因为机会节点涉及 expectimax。问题是我不知道该怎么做。不过我觉得理论上是可以的。

# asp.net - Dropdownlist selectedindex 在页面刷新时不起作用

> ID：12311520
> 
> 赞同：5
> 
> 时间：2012-09-07T03:57:46.163
> 
> 标签：asp.net, drop-down-menu, pageload

我遇到了一个非常正常的 ASP.NET 下拉列表的问题。我在页面中有一个下拉列表`AutoPostback=false`。以及生成下拉列表内容的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        this.dropDownList.Items.Add(new ListItem("text1", "value1"));
        this.dropDownList.Items.Add(new ListItem("text2", "value2"));
        this.dropDownList.SelectedIndex = 0;
    }
} 
```

*   运行页面，然后选择第二个选项：text2。
*   之后，按F5，这将进行页面加载（注意我还没有做任何回发，只需更改Dropdownlist的选中项并按F5）

我预计下拉列表现在将选择默认项目`index = 0`，但所选项目仍然是项目“text2” - 我选择的项目。在这种情况下，`this.dropDownList.SelectedIndex = 0;`不起作用。

我完全不明白。有人可以帮我吗？

**更新：** 此行为仅发生在 Firefox 中，不会发生在 Chrome/IE 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T05:17:28.223

您似乎误解了*回发的*含义；这*不仅仅*意味着页面刷新。当您在浏览器中点击 F5 时，原始请求将被发送到服务器，并且`Page.IsPostBack`将为*false*。

如果您想进行实际回发，请将`asp:Button`服务器控件添加到页面并单击它（或仅`AutoPostBack=true`在 DropDownList 上设置）。

* * *

似乎 Firefox 正在执行某种客户端缓存，因此当您按下 F5 时，它不会再次往返服务器。`select`您可以通过在页面加载时重置元素来解决此问题。

```
<script type='text/javascript'>
    document.getElementById('<%= dropDownList.ClientID %>').selectedIndex = 0;
</script> 
```

（注意：将其放在页面底部，以便在文档加载后执行。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T04:15:51.693

当您按 F5 时，它将与请求一起发送帖子标题。
您的最后一个请求是选择第二个选项。这样就被选中了。

如果您再次输入网址，或在地址栏中按回车键；您不会发送帖子数据。在这种情况下，您的 SelectedIndex 将为 0。

# r - igraph 中的地理布局

> ID：12311526
> 
> 赞同：3
> 
> 时间：2012-09-07T03:58:18.643
> 
> 标签：r, igraph, gephi

我想知道是否有地理布局可以将 igraph 中的网络绘制为 gephi 中的地理布局。如果没有，如何根据节点的纬度和经度绘制节点？

[https://gephi.org/2010/map-geocoded-data-with-gephi/](https://gephi.org/2010/map-geocoded-data-with-gephi/)是该布局的网页。[我不认为它有很大的圈子，但它有一个小的投影选择]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T04:07:02.257

您需要将纬度和经度转换为数字坐标（参见例如[这个问题](https://stackoverflow.com/questions/11853796/convert-longitude-latitude-coordinates-wgs-to-grid-with-equidistant-axes-in-g)，并且只需使用带有坐标的两列矩阵`layout`作为`plot.igraph()`.

# php - PHP call_user_func & $class->$func()

> ID：12311532
> 
> 赞同：3
> 
> 时间：2012-09-07T03:59:53.793
> 
> 标签：php

逆转录

功能 1：

```
$class->$func() 
```

功能二：

```
//Simple callback
call_user_func($func)
//Static class method call
call_user_func(array($class,$func))
//Object method call
$class = new MyClass();
call_user_func(array($class, $func)); 
```

有区别吗？我想看看源代码（[https://github.com/php/php-src](https://github.com/php/php-src)）我们应该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T04:07:07.693

[`call_user_func_array`](http://php.net/manual/en/function.call-user-func-array.php)在性能方面非常慢，这就是为什么在许多情况下您希望使用显式方法调用。但是，有时您想传递作为数组传递的任意数量的参数，例如

```
public function __call($name, $args) {
    $nargs = sizeof($args);
    if ($nargs == 0) {
        $this->$name();
    }
    elseif ($nargs == 1) { 
        $this->$name($args[0]);
    }
    elseif ($nargs == 2) { 
        $this->$name($args[0], $args[1]);
    }
    #...
    // you obviously can't go through $nargs = 0..10000000, 
    // so at some point as a last resort you use call_user_func_array
    else { 
        call_user_func_array(array($this,$name), $args);
    }
} 
```

我会检查`$nargs`最多 5 个（PHP 中的函数通常不太可能接受超过 5 个参数，因此在大多数情况下，我们将直接调用一个方法而不使用`call_user_func_array`对性能有好处的方法）

的结果`$class->method($arg)`与 相同`call_user_func_array(array($class,'method'), array($arg))`，但第一个更快。

# ruby-on-rails - Rails - POST 方法的路由错误

> ID：12311534
> 
> 赞同：2
> 
> 时间：2012-09-07T04:00:12.180
> 
> 标签：ruby-on-rails, ruby, routes

Rails 新手在这里（试图回答这些问题）

我正在使用 Ryan Bates 的 Rails Cast on Wicked Wizard Forms 创建一个多步骤表单。我得到一个“没有路线匹配 [POST]”/user_steps/gender”（其中性别是 user_steps 控制器下的一个视图）。

有任何想法吗？

路线.rb：

```
Store::Application.routes.draw do

  resources :likes

  resources :categories

  resources :users
  resources :user_steps

  root to: 'static_pages#home' 
```

user_steps 控制器：

```
class UserStepsController < ApplicationController
    include Wicked::Wizard
    steps :gender, :items, :brands, :final

    def show
        render_wizard
    end 

    def update
        @user.attributes = params[:user]
        render_wizard
    end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T04:37:34.473

当您定义一个新方法时，rails 将默认对该方法的获取请求。为了使其成为发布方法，请尝试添加

```
match "user_steps/gender", to: "user_steps#gender", via: "post" 
```

查看[此路线参考](http://www.engineyard.com/blog/2010/the-lowdown-on-routes-in-rails-3/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-20T17:12:58.270

我正在寻找 Rails 向导解决方案，当我遇到同样的问题时，我正在浏览“#346 Wizard Forms with Wicked”railscas。

正如@Klipfel 所建议的那样，添加一条路线是一个很好的“轨道”答案，但对于邪恶的宝石来说不是正确的方法。如果您添加指向另一个控制器方法的路由，则您将请求路由到 wicked 框架之外。

我通过为 http 方法指定 put 解决了这个问题。在 #346 Wizard Forms with Wicked railscast 案例中，它看起来像这样：

```
<%= form_for @user, url: wizard_path, method: :put do |f| %> 
```

我不确定为什么它在 railscast 中有效

# javascript - KineticJS - 用鼠标画线

> ID：12311535
> 
> 赞同：5
> 
> 时间：2012-09-07T04:00:14.760
> 
> 标签：javascript, kineticjs

我正在使用 KinectJS 根据鼠标移动绘制线条。当用户按住鼠标按钮时，我希望它成为行的“起点”，当用户释放时，它将成为行的“结束”，但是当他们按住鼠标时，我想要能够在鼠标移动时动态重绘线条。这可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-08T18:51:41.937

是的，有可能。

基本上，您必须在 onMouseMove 事件期间重新绘制图层。您需要一个标志来控制线路何时移动。

当脚本初始化时，这个标志应该是假的。

在 onMouseDown 处，行开始应该接收当前鼠标坐标并将标志设置为 true。

在 onMouseMouve 处，如果标志为真，则应更新行尾以接收当前鼠标坐标。

在 onMouseUp 时，该标志应设置为 false。

请参见下面的示例：

```
<!DOCTYPE HTML>
<html>
    <head>
        <style>
            body {
                margin: 0px;
                padding: 0px;
            }
            canvas {
                border: 1px solid #9C9898;
            }
        </style>
        <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.0.1.js"></script>
        <script>
            window.onload = function() {
                layer = new Kinetic.Layer();
                stage = new Kinetic.Stage({
                    container: "container",
                    width: 320,
                    height: 320
                });

                background = new Kinetic.Rect({
                    x: 0, 
                    y: 0, 
                    width: stage.getWidth(),
                    height: stage.getHeight(),
                    fill: "white"
                });

                line = new Kinetic.Line({
                    points: [0, 0, 50, 50],
                    stroke: "red"
                });

                layer.add(background);
                layer.add(line);
                stage.add(layer);

                moving = false;

                stage.on("mousedown", function(){
                    if (moving){
                        moving = false;layer.draw();
                    } else {
                        var mousePos = stage.getMousePosition();
                        //start point and end point are the same
                        line.getPoints()[0].x = mousePos.x;
                        line.getPoints()[0].y = mousePos.y;
                        line.getPoints()[1].x = mousePos.x;
                        line.getPoints()[1].y = mousePos.y;

                        moving = true;    
                        layer.drawScene();            
                    }

                });

                stage.on("mousemove", function(){
                    if (moving) {
                        var mousePos = stage.getMousePosition();
                        var x = mousePos.x;
                        var y = mousePos.y;
                        line.getPoints()[1].x = mousePos.x;
                        line.getPoints()[1].y = mousePos.y;
                        moving = true;
                        layer.drawScene();
                    }
                });

                stage.on("mouseup", function(){
                    moving = false; 
                });

            };
        </script>
    </head>
    <body>
        <div id="container" ></div>
    </body>
</html> 
```

# c# - 自定义日期格式解析

> ID：12311536
> 
> 赞同：2
> 
> 时间：2012-09-07T04:00:16.257
> 
> 标签：c#, .net, datetime

我有一些像这样从 FTP 服务器返回的日期

```
Aug 28 11:03
Aug 28 18:06
Sep  6 16:03 
```

我使用此代码来解析时间

```
CultureInfo provider = new CultureInfo("en-US");
_fileDateTime = DateTime.ParseExact(timestring, "MMM dd H:mm", provider); 
```

前两个日期有效，但最后一个不会。有没有人在解析这种日期格式方面有更好的想法？

`MMM d H:mm`可以使用，`Sep 6 16:03`但在我的情况下它`Sep 6 16:03`不起作用，请注意 9 月和 6 日之间的双倍空格

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T04:03:11.980

> 前两个日期有效，但最后一个不会。

那是因为您使用`dd`for date 并且返回的最后一个日期是 6 而不是 06。使用 Single `d`。如果最后返回的日期是 06，那么您的格式会很有效。

它应该像

```
DateTime.ParseExact(timestring, "MMM d H:mm", provider); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T04:01:31.197

使用一个`d`，以便它预期可能[的个位数天数](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#dSpecifier)（即，“6”而不是“06”）。

```
MMM d H:mm 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T04:23:29.283

有**多个问题**，一个是已经在其他答案中指出的问题，即使用单一`d`日期，因为上次日期`6`不是`06`。最后一个日期的另一个问题是它**在日期和月份之间有多个空格，**因为您处理单个空格日期的格式不起作用。您需要先删除多余的空间，然后使用带有 single 的格式进行解析`d`。试试下面的代码：

```
 string timestring = "Sep  6 16:03";
   //string[] array = timestring.Split(" ".ToCharArray(),StringSplitOptions.RemoveEmptyEntries);
   //timestring = string.Join(" ", array);
    timestring = System.Text.RegularExpressions.Regex.Replace(timestring, @"\s+", " ");

    CultureInfo provider = new CultureInfo("en-US");
    DateTime _fileDateTime = DateTime.ParseExact(timestring, "MMM d H:mm", provider); 
```

# php - setSendTimeout 在打开之前或之后

> ID：12311538
> 
> 赞同：0
> 
> 时间：2012-09-07T04:00:31.123
> 
> 标签：php, sockets

在php中，当我想为套接字设置超时时，我应该`setSendTimeout()`在调用之前`open()`还是调用之后调用方法`open()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:06:46.660

您将在打开套接字之后和发送之前设置超时。如果您在无论如何都会阻止发送之后设置它。

我假设您正在使用`socket_set_option`which 将打开的套接字作为其第一个参数，所以它肯定需要在之后。

是什么`setSendTimeout`？我以前从未见过。

# php - 将子 ID 动态插入到 iframe 代码中

> ID：12311541
> 
> 赞同：0
> 
> 时间：2012-09-07T04:00:55.910
> 
> 标签：php, javascript, adsense

在加载页面或 iframe 之前，我如何从目标 url 获取子 ID 并动态插入到 iframe 代码中？

我想添加 subid 以便能够在没有感谢/目标页面的情况下跟踪来自 adsense 的转化，因为 iframe 保持在同一页面上。

这是我在目标网址末尾的代码

```
&subid=campaignname_{keyword} 
```

这是我希望 subid 在加载之前动态插入的 iframe 代码

```
<iframe border="0" frameborder="0" width="680" height="800" src="http://xxxxxxx.com?PublisherSubID=</iframe> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:36:40.280

如果我理解正确，您有一个页面[http://xxxxxx.com?subid=12345](http://xxxxxx.com?subid=12345)并且您想要获取 subid 并将其放入 iframe 源的 url 中。

尝试这个：

```
<iframe border="0" frameborder="0" width="680" height="800" src="<iframe border="0" frameborder="0" width="680" height="800" src="http://xxxxxxx.com?PublisherSubID=<?php echo $_GET['subid']; ?>"></iframe> 
```

这将从页面的 $_GET 数组中获取 subid 并将其放入 iframe 的源 url。

这也将包括“campaignname_”文本。如果你想把它去掉，那么不要`$_GET['subid']`使用`str_replace("campaignname_","",$_GET['subid']);`

# javascript - 使用 jQuery .html() 时如何防止 javascript 执行

> ID：12311542
> 
> 赞同：2
> 
> 时间：2012-09-07T04:00:55.113
> 
> 标签：javascript, jquery

`$.html()`我需要使用jquery将客户创建的内容从输入 textarea 插入`div`页面上的另一个以实现实时预览功能

但如果客户在内容中键入 javascript，例如：

```
<script type='text/javascript'>
alert('abc');
</script> 
```

当用 调用这个时`.html()`，javascript 将被执行，如果我用`.text()`，那么内容将不会被视为 html。

我该如何解决这个问题？我为它创建了一个 jsfiddle：http: [//jsfiddle.net/larryzhao/VL82f/](http://jsfiddle.net/larryzhao/VL82f/)

更新：也许我需要说得更清楚，我正在为降价做一个预览。所以用户在 textarea 上输入 markdown，我转换为 html，并显示到`div#dest`. 如果用户输入如上所示的脚本怎么办？有没有办法保留原始类型但不执行它？如果没有，那么我想我会写一个正则表达式来擦除我认为的脚本块..

我找到了两个在线降价工具： [http](http://daringfireball.net/projects/markdown/dingus) ://daringfireball.net/projects/markdown/dingus 这个执行它 [http://www.ctrlshift.net/project/markdowneditor/](http://www.ctrlshift.net/project/markdowneditor/)这个只是擦除脚本块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:26:40.583

如果用户输入的文本保留在客户端上，那么**用户想要自己进行 XSS 攻击有什么关系呢？**如果文本返回到服务器，那么你会在那里对其进行清理，这样如果其他用户看到输入，他们就会看到清理后的输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T04:16:29.143

是否有用于 JavaScript 的 HTML 净化器？如果是这样，这就是这样做的方法。需要注意的是，这很难正确地做到，所以一个*简单*的正则表达式通常是不够的。如果您通过应用程序将其保存在某处，则预览功能可以通过发布和取回清理后的版本来利用该消毒剂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T04:20:19.117

您可以将脚本标签替换为其他内容，以便仅在预览中看到警报值，例如：

```
$(document).ready(function() {
    $('#source').on('keydown', function(){
       var content = ($(this).val()).replace(/(<\s*\/?\s*)script(\s*([^>]*)?\s*>)/gi ,'$1jscript$2')
        console.log( content );
        $("#dest").html( content );
    });
}); 
```

参见：[jsFiddle](http://jsfiddle.net/VL82f/12/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T04:21:11.577

您可以清理用户输入，删除 xss。

请参阅[节点验证器](https://github.com/chriso/node-validator/tree/49099c19e4ac303c4e11574007907960911b26c2)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T04:52:24.043

为什么不定位 a`<script>...</script>`并转义代码部分中的字符？

例如：

```
<script src="test/javascript>
var userInput=document.getElementByID("#input");
..
..
..
</script>

&lt;script src=&quot;test/javascript&gt;
var userInput=document.getElementByID(&quot;#input&quot;);
..
..
..
&lt;/script&gt; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-07T04:19:15.837

您必须创建一个正则表达式才能不在`<script>`预览中插入：

`<script (.|\n)*?>(.|\n)*?</script>`

或尝试一下：

```
function stripScripts(s) {
  var div = document.createElement('div');
  div.innerHTML = s;
  var scripts = div.getElementsByTagName('script');
  var i = scripts.length;
  while (i--) {
    scripts[i].parentNode.removeChild(scripts[i]);
  }
  return div.innerHTML;
}

alert(
  stripScripts('<span><script type="text/javascript">alert(\'foo\');<\/script><\/span>')
); 
```

# php - 如何使这个 MySQL 查询工作？

> ID：12311544
> 
> 赞同：1
> 
> 时间：2012-09-07T04:00:58.390
> 
> 标签：php, mysql, sql, phpmyadmin, mysqli

```
SELECT ROUND(AVG(((total - `order`) / total) * 100), 2) AS score 
FROM rankings
INNER JOIN ranking_data 
    ON ranking_id = rankings.id 
    AND opinion_id = {$opinion_id} 
    AND `type` = '{$type}'
INNER JOIN (
    SELECT rankings.id, COUNT(*) as total 
    FROM rankings
    INNER JOIN ranking_data 
        ON ranking_id = rankings.id AND `type` = '{$type}'
    WHERE case_id = {$case_id}
) AS total_table ON total_table.id = rankings.id
WHERE case_id = {$case_id}; 
```

MySQL 表： http: [//pastebin.com/jKvUrrNi](http://pastebin.com/jKvUrrNi)

简短说明：

这里的问题是我需要两个部分来执行这个评分计算。一行，以及总共相关的行。COUNT() 函数弄乱了我的选择。在子查询中，它不允许我选择当前的rankings.id（外部查询的），因为 COUNT 函数在过滤发生之前将结果减少到一行。我需要以某种方式将 id 作为参数传递给子查询的 WHERE 子句。这只是获得所需结果的一个想法，但如果您了解应用程序（如下所述），可能会有更好的方法。

长解释：

该应用程序允许用户对与医疗案例相关的意见进行排名，以用于统计目的。有两种类型的排名以相同的方式计算 - 参考前和参考后。这反映了用户在看到参考文献（在案例表中）之前和之后如何选择对意见进行排名。目前没有使用意见列表。

排名表存储一个用户经过排名过程的实例，ranking_data 表存储实际提交的数据。排名页面要求用户按偏好顺序排列意见，顶部是最好的。这个查询应该计算 Collabograde 分数，这将是人们更喜欢他们的意见而不是其他人的数量。

进入应用程序的用户首先登录，然后提交自己对案例的意见，然后将他们的意见与其他已提交的意见进行排名。每个人都这样做。例如，假设我刚刚提交了我的意见并开始排名。系统中有 4 个意见，包括我自己的意见，目前还没有其他排名（尽管每个意见通常会有一个排名）。如果我将我的意见排在第二好，那么我的 Collabograde 分数将是 2/4。当 user2 经历相同的排名过程并首先对我的意见进行排名时，它变成了 3/8。

因此对于查询，order 为 0 表示最佳，依此类推。该查询应该计算一个用户和一个案例的 Collabograde 分数。在之前的查询中检索到用户在案例中提交的意见id。我首先尝试获取该 opinion_id 在所有排名中的位置，然后获取当前选择的排名行的ranking_data 行总数。我使用这些值来计算结果。因此，我正在计算每个排名行的“分数”，然后将它们平均在一起以创建整个案例的分数。

天才四面八方，我能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:35:50.833

您想按 对子查询进行*分组*`rankings.id`，因此添加`GROUP BY rankings.id`：

```
SELECT ROUND(AVG(((total - `order`) / total) * 100), 2) AS score 
FROM rankings
INNER JOIN ranking_data 
    ON ranking_id = rankings.id 
    AND opinion_id = {$opinion_id} 
    AND `type` = '{$type}'
INNER JOIN (
    SELECT rankings.id, COUNT(*) as total 
    FROM rankings
    INNER JOIN ranking_data 
        ON ranking_id = rankings.id AND `type` = '{$type}'
    WHERE case_id = {$case_id}
    GROUP BY rankings.id
) AS total_table ON total_table.id = rankings.id
WHERE case_id = {$case_id}; 
```

# java - 我在 java 中的 ShapeApp 问题

> ID：12311547
> 
> 赞同：0
> 
> 时间：2012-09-07T04:01:17.357
> 
> 标签：java, class, inheritance, interface

我收到以下错误，这些是我的课程。

**形状类：**

```
public abstract class Shape implements Triangle{

 protected static final double DEFAULT_SIZE = (double) 1.0;
 protected static final String DEFAULT_NAME = "Unknown";
 private String shapeName;

 public Shape(){
    this.shapeName = DEFAULT_NAME;
 }

 public Shape(String name) {
    setShapeName(name);

 }

 protected void setShapeName(String name) {
 if( name.trim().length() == 0 )
     shapeName = DEFAULT_NAME;
 else
     shapeName = new String ( name );

 }

 public String getShapeName() {
    //name
 return shapeName;

 }

public abstract double getSurfaceArea();

public abstract double getPerimeter();

public String toString{
    return String.format("%s %s\nshape name: %s",getShapeName());
}
} 
```

**矩形类：**

```
public class Rectangle extends Shape implements Triangle {

private double length;
private double heigth;

public Rectangle() {
    super("Rectangle");
    setLength( super.DEFAULT_SIZE );
    setHeight( Shape.DEFAULT_SIZE );

}

public Rectangle(double theLength, double theHeight ){
    super("Rectangle");
    if ( theLength < 0 )
        setLength( Shape.DEFAULT_SIZE );
    else setLength( theLength );

    if ( theHeight < 0)
        setHeight( Shape.DEFAULT_SIZE );
    else setHeight( theHeight );
}

public double getSurfaceArea() {
    return this.length * this.heigth;
}

public double getPeremeter() {
    return 2 * this.length + 2 * this.length;

}

public double getLength(){
    return this.length;
}

public double getHeight(){
    return  this.heigth;
}

public void setLength( double theLength ){
    if ( theLength <= 0 )
        return;
    this.length = theLength;
}

public void setHeight( double theHeight ){
    if (theHeight <= 0 )
        return;
    this.heigth = theHeight;

}

public String toString(){
    return String.format("%s: \n%s: %s (%s) \n%s: %d \n%s: $%,.2f",
                      "Rect Surface Area ", "Rect Peremeter", getSurfaceArea(), getPeremeter());
}

 public double getSizeAmount(){

}

   } 
```

**圈类：**

```
public class Circle extends Shape {
private double radius;

public Circle( double theRadius ){
    super( "Circle" );
    if ( theRadius <= 0.0 )
        setRadius( Shape.DEFAULT_SIZE );
    else
        setRadius( theRadius );
}

public Circle(String string, String string2, String string3, String string4) {
    // TODO Auto-generated constructor stub
}

public double getSurfaceArea(){

    return this.radius * this.radius * Math.PI;
}

public double getPeremeter(){
    ;
    return 2 * this.radius + Math.PI;
}

public double getRadius(){
    return this.radius;

}

public void setRadius( double theRadius ) {
    if( theRadius <= 0 )
        return;
    this.radius = theRadius;
}

@Override
public double getPerimeter() {
    // TODO Auto-generated method stub
    return 0;

     public double getSizeAmount(){

     }

     public String toString(){
         return String.format("%s: \n%s: %s (%s) \n%s: %d \n%s: $%,.2f",
                  "Circle Surface Area ", "Circle Peremeter", getSurfaceArea(), getPeremeter());
     }
}
   } 
```

**三角形类：**

```
//triangle interface decleration
public interface Triangle {

double getSizeAmount(); //calculate sizes of triangle; no implementation

    }//end interface triangle 
```

**主类：**

```
 import javax.swing.JOptionPane;

    public class ShapeApp {

//public static void main(String args[])
public static void main(String[] args) {

    Triangle triangleObjects[] = new Triangle[ 4 ];

    triangleObjects[ 0 ] = new Rectangle("3.5", "4.6","42");
    triangleObjects[ 1 ] = new Rectangle("3", "2","34");
    triangleObjects[ 2 ] = new Circle("Circle", "Rectangle","0808","0808");
    triangleObjects[ 3 ] = new Circle("Circle","Rectangle","2334","2423");

    System.out.println( "List of all Shapes:\n" );

    for( Triangle currentTriangle : triangleObjects ){

        System.out.printf("%s \n%s: $%,.2f\n\n",
                currentTriangle.toString(),
                "ovo testiramo", currentTriangle.getSizeAmount());

    }

}

} 
```

这是我得到的错误：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
The constructor Rectangle(String, String, String) is undefined
The constructor Rectangle(String, String, String) is undefined

at ShapeApp.main(ShapeApp.java:14) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T04:03:26.627

错误信息很清楚：

```
The constructor Rectangle(String, String, String) is undefined

at ShapeApp.main(ShapeApp.java:14) 
```

您正在创建具有 3 个参数的 Rectangle 对象。

```
 new Rectangle("3.5", "4.6","42"); 
```

但是您的 Rectangle 类只有两个构造函数

> 1) 零参数的构造函数 2) 2 参数的构造函数

```
public Rectangle() {
  ......

}

public Rectangle(double theLength, double theHeight )
{ ....
} 
```

您需要在`Rectangle`类中添加带有 3 个参数的构造函数（或）将您的对象创建更改为两个 args 构造函数。

# xml - 如何使用 SSIS 包将具有多个相同名称元素的 XML 文件加载到数据库中

> ID：12311550
> 
> 赞同：1
> 
> 时间：2012-09-07T04:01:31.993
> 
> 标签：xml, ssis, tags, load

我正在努力将 xml 加载到在单个节点中有多个元素的数据库中：

例子 ：

```
<EMPLS>
  <EMPL>
    <ID>1</ID>
    <NAME>ALPHA</NAME>
    <HOBBY>H1</HOBBY>
    <HOBBY>H1</HOBBY>
  </EMPL>
</EMPLS> 
```

在 XSD 中，允许出现 3 个元素。

我正在使用 XML Source 来填充我的数据库。它足够智能，可以分两部分识别 XML，一个用于 EMPLS 记录，另一个用于 HOBBY，因为它允许根据 xsd 多次出现。

问题是该程序包正在为具有多次出现 HOBBY 的节点填充两条记录，其中我想要获得的所需行为是插入每个 EMPL 的单个记录，而不管 HOBBY 的出现次数和多个 HOBBY 标记的连接值应插入以逗号分隔的（可能）。

# ruby-on-rails - 使用 STI 路由失败

> ID：12311555
> 
> 赞同：0
> 
> 时间：2012-09-07T04:03:14.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, railstutorial.org, sti

第一个SO帖子，但我读过很多。自从学习了 Hartl 的 RailsTutorial 以来，我是 Rails 的新手并建立了第一个站点。

我的问题是使用 STI 路由。我相信路线设置正确，但子类 Kid 没有找到“显示”路线。

**使用 STI 的类继承**

> 类用户 < ActiveRecord::Base
> 
> 类孩子 < 用户

**儿童控制器**

> 定义显示
> 
> > @kid = Kid.find(params[:id])
> 
> 结尾

**用户控制器创建**

```
def create
@user = User.new(params[:user])
if @user.save
  flash[:success] = "Welcome to kidtunes!"
  if (@user.type = "Kid")
    ***redirect_to @kid***
  else
redirect_to @parent
  end
else
  render 'new'
end 
```

**路线.rb**

> 资源：用户，：孩子，：父母
> 
> 根到：'static_pages#home'
> 
> 将“/help”匹配到：“static_pages#help”
> 
> 将“/contact”匹配到：“static_pages#contact”
> 
> 将“/注册”匹配到：“用户#新”

**结果是：**

```
kids_new    GET    /kids/new(.:format)         kids#new
  users     GET    /users(.:format)            users#index
            POST   /users(.:format)            users#create
   new_user GET    /users/new(.:format)        users#new
  edit_user GET    /users/:id/edit(.:format)   users#edit
   user     GET    /users/:id(.:format)        users#show
            PUT    /users/:id(.:format)        users#update
            DELETE /users/:id(.:format)        users#destroy
   kids     GET    /kids(.:format)             kids#index
            POST   /kids(.:format)             kids#create
new_kid     GET    /kids/new(.:format)         kids#new
   edit_kid GET    /kids/:id/edit(.:format)    kids#edit
    kid     GET    /kids/:id(.:format)         kids#show
            PUT    /kids/:id(.:format)         kids#update
            DELETE /kids/:id(.:format)         kids#destroy
parents     GET    /parents(.:format)          parents#index
            POST   /parents(.:format)          parents#create
 new_parent GET    /parents/new(.:format)      parents#new
edit_parent GET    /parents/:id/edit(.:format) parents#edit
 parent     GET    /parents/:id(.:format)      parents#show
            PUT    /parents/:id(.:format)      parents#update
            DELETE /parents/:id(.:format)      parents#destroy
   root            /                           static_pages#home
   help            /help(.:format)             static_pages#help
contact            /contact(.:format)          static_pages#contact
 signup            /signup(.:format)           users#new 
```

**错误** 我在 redirect_to @kid 上得到以下信息

ActionController::ActionControllerError（不能重定向到零！）：app/controllers/users_controller.rb:16:in `create'

我觉得我已经检查了所有可以检查的内容，但我仍然缺少一些东西。@kid 应该正确重定向到 kids#show 路线。我不确定我是否有制作不佳的单表继承或基本路由问题。

提前致谢。-约翰

**形式**

此表单用于 users/new.html.erb 并创建用户。

```
<div class="row">
<div class="span5 offset2">
<%= form_for(@user) do |f| %>
<%= render 'shared/error_messages' %>

<%= f.label :fname, "First Name" %>
<%= f.text_field :fname %>

<%= f.label :lname, "Last Name" %>
<%= f.text_field :lname %>

<%= f.label :email %>
<%= f.text_field :email %>

<%= f.label :type, "Are you a Kid or Parent?" %>
<%= f.select :type, [['Kid','Kid'],['Parent','Parent']] %>

<%= f.label :password %>
<%= f.password_field :password %>

<%= f.label :password_confirmation, "Confirmation" %>
<%= f.password_field :password_confirmation %>

<%= f.submit "Create my account", class: "btn btn-large btn-primary" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:18:16.493

我注意到的第一件事是你正在使用`=`而不是`==`：

```
if (@user.type = "Kid") 
```

我认为这样测试它会更好：

```
if @user.is_a? Kid 
```

你能告诉我们你是如何设置`@kid`和的`@parent`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T04:19:49.060

您是否为`@kid`or`@parent`变量定义/分配了值？如果不是，它们将是`nil`，并且您将收到`cannot redirect to nil`问题中包含的错误。

请包含该`create`操作的完整代码。否则，我们只能完全信任（而不是自己阅读）重定向中发生的事情。

您的重定向可能还需要一些工作。例如，您可以这样做：

```
if (@user.is_a? Kid)
  redirect_to kid_path(@user)
else
  redirect_to parent_path(@user)
end 
```

...或与此非常相似的东西。

# apache-flex - 在 Flex 中的 ViewStack 中的视图之间传递 XMLListCollection

> ID：12311556
> 
> 赞同：0
> 
> 时间：2012-09-07T04:03:22.400
> 
> 标签：apache-flex, viewstack, xmllist

我有一个问题，我不知道要解决它。在我的应用程序中，我有一个有 2 个孩子的 ViewStack。

在 ViewStack 的第一个视图中，我有一个带有 XMLListCollection 作为数据提供者的数据网格。在此视图中，用户从数据网格中选择一条记录，然后传递到第二个视图。

在第二个视图中，从记录中选择的所有数据都将加载到不同的 textInputs 中进行修改。

我的问题是，如何在 ViewStack 中将这些数据从一个视图传递到另一个视图。我已经在这个论坛中搜索了答案，但没有回复我的问题。

所有答复将不胜感激。

谢谢和最好的问候， LE Hai-Binh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:22:32.040

您可以使用事件处理机制。当您在 datagrid 中选择一条记录（在 Viewstack 的第一个子项中）时，创建一个 Event 对象并将所有数据放入其中并调度它。在 Viewstack 的第二个孩子上编写此事件的侦听器。在侦听器方法中，从 Event 中提取数据并使用它做任何你想做的事情。

# android - 选择谷歌联系人时强制关闭

> ID：12311559
> 
> 赞同：0
> 
> 时间：2012-09-07T04:04:01.240
> 
> 标签：android, contacts

您好我正在开发一个向选定联系人发送短信的应用程序。

选择我正在使用此代码的联系人

```
 public void selectRecipient(View V)
        {
                Intent pickContactIntent=new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
                startActivityForResult(pickContactIntent,1);
        } 
```

我的 onActivityResult 函数如下

```
 @Override
                       protected void onActivityResult(int requestCode, int resultCode, Intent data)
                       {
                              // TODO Auto-generated method stub
                              super.onActivityResult(requestCode, resultCode, data);

                              if (resultCode == Activity.RESULT_OK) 
                              {

                                    if(requestCode==1)
                                    {
                                        count++;
                                        Uri contactData = data.getData();
                                        Cursor c =  managedQuery(contactData, null, null, null, null);
                                        c.moveToFirst();
                                        name= c.getString(c.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                                        String id = c.getString(c.getColumnIndex(Contacts._ID));
                                        Cursor cur =getContentResolver().query(CommonDataKinds.Phone.CONTENT_URI, null, CommonDataKinds.Phone.CONTACT_ID +" = ?", new String[]{id}, null);
                                        cur.moveToNext();

                                        String phoneNumber = cur.getString(cur.getColumnIndex(CommonDataKinds.Phone.NUMBER));
                                      }
                                }
                         } 
```

当我在联系人列表中选择任何谷歌联系人时，我会强制关闭。

如果我选择一个有号码的电话联系人，那么它工作正常。

我应该怎么做才能纠正这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:17:13.300

您将需要检查当前联系人是否至少有一个电话号码使用 并 在获取电话号码后使用`ContactsContract.Contacts.HAS_PHONE_NUMBER`关闭。因此，将您的代码更改为：`Cursor``Cursor.close();`

```
@Override  
protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    // TODO Auto-generated method stub  
    super.onActivityResult(requestCode, resultCode, data);  
    switch(requestCode)  
    {  

        case (1) :  
        {  

        if (resultCode == Activity.RESULT_OK)  
        {  

        Uri contactData = data.getData();  

        Cursor c = managedQuery(contactData, null, null, null, null);  

        c.moveToFirst();  

        String phoneNumber=this.getContactPhone(c);  

        }  

        break;  

        }  

    }  

}  

private String getContactPhone(Cursor cursor)  
{  

    int phoneColumn = cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER);    
    int phoneNum = cursor.getInt(phoneColumn);   
    String phoneResult="";  
    //System.out.print(phoneNum);  
    if (phoneNum > 0)  
    {  

        int idColumn = cursor.getColumnIndex(ContactsContract.Contacts._ID);  
        String contactId = cursor.getString(idColumn);  

            Cursor phones = getContentResolver().query(  
            ContactsContract.CommonDataKinds.Phone.CONTENT_URI,  
            null,  
            ContactsContract.CommonDataKinds.Phone.CONTACT_ID+ " = " + contactId,   
            null, null);  
            //int phoneCount = phones.getCount();  
            //allPhoneNum = new ArrayList<String>(phoneCount);  
            if (phones.moveToFirst())  
            {  
                    for (;!phones.isAfterLast();phones.moveToNext())  
                    {                                              
                        int index = phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);  
                        int typeindex = phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE);  
                        int phone_type = phones.getInt(typeindex);  
                        String phoneNumber = phones.getString(index);  
                        switch(phone_type)  
                        {  
                            case 2:  
                                phoneResult=phoneNumber;  
                            break;  
                        }  
                           //allPhoneNum.add(phoneNumber);  
                    }  
                    if (!phones.isClosed())  
                    {  
                           phones.close();  
                    }  
            }  
    }  
    return phoneResult;  
} 
```

* * *

并确保您在 AndroidManifest.xml 中具有以下权限。

```
<uses-permission android:name="android.permission.READ_CONTACTS" />

<uses-permission android:name="android.permission.WRITE_CONTACTS" /> 
```

# c# - 网格视图显示来自数据表绑定后面代码的 2 列

> ID：12311565
> 
> 赞同：1
> 
> 时间：2012-09-07T04:05:01.783
> 
> 标签：c#, asp.net, vb.net

如果 gridview 被自动生成的表格绑定在后面的代码中，我如何只在我的网格视图中显示两个列？现在它显示六列，而我只希望它显示两列？

这是我的 .aspx 页面代码：

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="Default2.aspx.vb" Inherits="Default2" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:GridView ID="GridView1" runat="server">

                <columns>
          <asp:boundfield datafield="Drug" headertext="ddddrug"/>
          <asp:boundfield datafield="date" headertext="ddddate"/>

        </columns>

        </asp:GridView>
    </div>
    </form>
</body>
</html> 
```

这是我的代码背后的代码：

```
Imports System.Data

Partial Class Default2
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    ' auto generated table
        Dim table2 As New DataTable
        ' Create four typed columns in the DataTable.
        table2.Columns.Add("ID", GetType(Integer))
        table2.Columns.Add("Drug", GetType(String))
        table2.Columns.Add("Patient", GetType(String))
        table2.Columns.Add("Date", GetType(DateTime))
        ' Add five rows with those columns filled in the DataTable.
        table2.Rows.Add(25, "Indocin", "David", DateTime.Now)
        table2.Rows.Add(50, "Enebrel", "Sam", DateTime.Now)
        table2.Rows.Add(10, "Hydralazine", "Christoff", DateTime.Now)
        table2.Rows.Add(21, "Combivent", "Janet", DateTime.Now)
        table2.Rows.Add(1100, "Dilantin", "Melanie", DateTime.Now)
        table2.Rows.Add(125, "Indocin", "David", DateTime.Now)
        table2.Rows.Add(150, "Enebrel", "Sam", DateTime.Now)
        table2.Rows.Add(110, "Hydralazine", "Christoff", DateTime.Now)

        GridView1.DataSource = table2

        GridView1.DataBind()

    End Sub

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T04:17:44.640

忽略您拥有的数据比您需要的更多的事实。将 AutoGenerateColumns 设置为 false。为需要显示的列创建 BoundColumns。例子 ：

```
BoundColumn nameColumn = new BoundColumn();
nameColumn.DataField = "Drug";
nameColumn.DataFormatString = "{0}";
nameColumn.HeaderText = "Drug"; 
```

然后将此BoundColumn 添加到gridview。

```
GridView1.Columns.Add(nameColumn);
GridView1.AutoGenerateColumns = false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T04:26:29.820

将 AutoGenerateColumns false 和绑定字段设置为：

```
 <asp:BoundField DataField="Drug"  HeaderText="ddddrug" >
        <HeaderStyle CssClass="Your class" />
  </asp:BoundField>
  <asp:BoundField DataField="date" DataFormatString="{0:yyyy/MM/dd}"  HeaderText="ddddate" >
        <HeaderStyle CssClass="Your class" />
  </asp:BoundField> 
```

如果您愿意，您还可以在标题中应用 CssClass。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T04:21:07.603

默认情况下，网格将尝试显示 DataSource 中的所有列（公共可浏览属性）。如果你只想显示两个，你应该按如下方式关闭它：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False">
       <columns>
          <asp:boundfield datafield="Drug" headertext="ddddrug"/>
          <asp:boundfield datafield="date" headertext="ddddate"/>
       </columns>
</asp:GridView> 
```

# spring - 将 Spring Applicationcontext 添加到类（在我的例子中：Hadoop Mapper 类）

> ID：12311573
> 
> 赞同：1
> 
> 时间：2012-09-07T04:06:16.533
> 
> 标签：spring, hadoop, spring-data

我正在用 spring-batch 编写一个应用程序/测试，其中包含 hadoop mapreduce 作业。

对于 spring-batch 容器，一切都很好：我在执行单元测试之前加载了 Applicationcontext 特定的配置。

（来自 spring-data hadoop 示例的代码）[http://static.springsource.org/spring-hadoop/docs/current/reference/html/batch-wordcount.html](http://static.springsource.org/spring-hadoop/docs/current/reference/html/batch-wordcount.html)

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("/launch-context.xml")
public class WordCountWorkflowTest {

      @Autowired
      private ApplicationContext ctx; 
```

当我需要从 main 方法加载 Applicationcontext 时，我发现建议通过以下方式执行此操作：

```
public class Main {
      public static void main(String[] arguments) {
          ApplicationContext ctx = new ClassPathXmlApplicationContext("applicationContext.xml");
      }
} 
```

现在我正在寻找一种从 Hadoop Mapper 类中启动 Applicationcontext 的方法。我的问题：类本身将注入 bean。我认为通常你有另一个类或对象为你启动 Applicationcontext。

以下方法似乎对我有用（但我不知道是否有一些陷阱或更好的方法，例如带有注释）：

```
public class ToHBaseMapper extends
        Mapper<LongWritable, Text, Text, IntWritable> {

    private static final String[] CONFIGS = new String[] { "/mapReduce-context.xml" };

    private static AbstractApplicationContext ctx;

    // Executed when class is loaded
    static {
        ctx = new ClassPathXmlApplicationContext(CONFIGS);
        ctx.registerShutdownHook();
    }
    ... 
```

TIA，R

# jquery - 将 jquery 数组传递给 asp.net mvc 控制器

> ID：12311574
> 
> 赞同：0
> 
> 时间：2012-09-07T04:06:23.030
> 
> 标签：jquery, ajax, asp.net-mvc

'myArray' 数组究竟应该如何传递给 mvc 控制器？我已经尝试了一切，但我似乎无法让任何工作

**控制器**

```
[HttpPost]
public ActionResult MyAction(MyModel model, List<string> myArray) {
     //code...
} 
```

**看法**

```
$('#dialog').dialog({
        //...
        buttons: {
            "Cancel": function () {
                $(this).dialog("close");
            },
            "Submit": function () {
                var arrCount= 0;
                var myArray = new Array();

                //grabs all the dropdownlists that begin with id 'dropdownlist' and adds it to 'myArray'
                $('form').contents().find("select[id ^= 'dropdownlist'] option:selected").each(function () {
                    myArray[arrCount++] = $(this).text();
                });

                if ($('form').validate().form()) {
                    $.ajax({
                        url: "MyController/MyAction",
                        type: 'POST',
                        dataType: "json",
                        traditional: true,
                        data: { 
                           model: $("form").serialize(),
                           myArray: myArray
                        },
                        success: function (result) {
                            alert("debug: complete");
                        }
                    });
                }
            }
        }
    }); 
```

我知道如何将数组本身传递给控制器​​。但是，一旦我将现有模型添加到等式中，我不确定如何将我的数组传递给控制器​​。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:53:41.893

**首先，简单的解决方案是：**

用一些分隔符制作一串数组值，

1##2##3... 或 1,2,3.. 等。

并使用

```
public ActionResult MyAction(MyModel model, string myArray) {
     string[] values = myArray.Split("##"); //split incoming string with your separator

     List<int> myIntArray = new List<int>();
     foreach (var value in values)
     {
         int tmp = 0;
         if (int.TryParse(value, out tmp))
         {
             myIntArray.Add(tmp);
         }
     }

     //code...
} 
```

适用于简单的事情。

**第二种方法稍微复杂一些，但适用于对象。**

假设您有以下内容：

```
public class YourMainModel
{
    public YourMainModel()
    {
        ArrayField = new List<YourPartialModel>()
    }

    List<YourPartialModel> ArrayField {get; set;}

    //some other fields
}

public class YourPartialModel
{
    public string Name {get; set;}

    //some other fields
} 
```

在您的视图中使用某种枚举器来执行以下操作：

```
<form id="myForm">

//some other fields from YourMainModel here

//dealing with our array
@for (int i = 0; i < Model.ArrayField.Count(); i++)
{
    @Html.TextBox("ArrayField[" + i + "].Name", Model.ArrayField[i].Name)

    //some other fields from YourPartialModel here
}

</form> 
```

接着

```
[HttpPost]
public ActionResult MyAction(YourMainModel model) {
    //use model.ArrayFields here, it should be submitted
} 
```

# winforms - 如何在 Windows 窗体中应用安全性？

> ID：12311578
> 
> 赞同：0
> 
> 时间：2012-09-07T04:06:42.963
> 
> 标签：winforms, security

在 Windows 窗体中，我们如何跟踪登录用户，例如在 Web 应用程序中，我们为此维护会话，在用户登录后，我们在会话中维护“id”，并使用会话检查每个页面的“id”，就像这样有什么办法可以在窗口应用程序中做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:15:35.997

我不这么认为——而且也没有理由。

Web 服务器上的会话是为了通过多个请求识别用户（在其会话 ID 上）。

# java - 从线程中关闭 JDialog 框

> ID：12311580
> 
> 赞同：0
> 
> 时间：2012-09-07T04:06:57.987
> 
> 标签：java, swing, concurrency, jdialog, event-dispatching

我有一个 JDialg 用于显示某个任务的进度。要显示和隐藏对话框，我有以下方法，

```
public class ProgressDisplayer extends javax.swing.JDialog {
    ......
    public void s_show() {
            this.setTitle("Month End Status");
            setModal(true);
            setResizable(false);
            pack();
            this.setLocationRelativeTo(null);
            this.setVisible(true);
        }

        public void s_hide() {
            this.dispose();
        }

    ...........
} 
```

当我尝试从下面的线程中关闭此 JDialog 框时，虽然它显示正确但我在调用`pd.s_hide()`方法时无法隐藏它。

```
...........
public void run() {            
                ProgressDisplayer pd = new ProgressDisplayer();
                pd.s_show();                    
                Thread.sleep(1000);
                pd.s_hide();
}
............. 
```

请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T04:29:25.353

这不能按预期工作的原因是，对于模式对话框，该方法`setVisible()`将阻塞调用线程，直到对话框关闭。这意味着调用线程将阻塞，并且在用户关闭对话框之前`pd.s_show()`不会继续到下一行（ ）。`Thread.sleep(1000)`

解决此问题的最简单方法是删除对`setModal(true)`. 但是，您将失去模态行为。

PS 正如 radai 提到的，从事件调度线程以外的线程调用 Swing 代码不是线程安全的。从这个意义上说，您的代码也被破坏了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T04:24:22.753

摆动操作应始终仅从摆动事件调度程序线程调用。尝试使用 SwingUtilities.invokeAndWait() 从非 gui 线程执行您的 gui 工作。你可以在这里看到一些例子：http: [//book.javanb.com/java-threads-3rd/jthreads3-CHP-7-SECT-3.html](http://book.javanb.com/java-threads-3rd/jthreads3-CHP-7-SECT-3.html)

# django - 无法通过 (....) 实例访问管理器

> ID：12311588
> 
> 赞同：0
> 
> 时间：2012-09-07T04:07:28.500
> 
> 标签：django, django-views

我有两张桌子，即 Stuff 和 Boss。根据来自用户的 slug(user_type)，我定义将使用哪个表。

```
def Person_info(request,user_type):
    if user_type=="Staff":
        item=Staff()
    elif user_type=="Boss":
        item=Boss()

................. 
```

然后，我需要从它的表中获取 item 的最后一个 id。

但是，当我尝试获取 Staff 表的最后一个 id 时，我遇到了“无法通过 Staff 实例访问 Manager”。

我怎样才能绕过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T04:18:56.003

您正在使用实例进行查询，这是不正确的。

更改您的代码如下：

```
def Person_info(request,user_type):
if user_type=="Staff":
    # Note no () at the end, which makes the item an instance by instantiating it, not a class by assigning it
    item=Staff
elif user_type=="Boss":
    item=Boss
.... 
```

# java - Struts2中getContextMap()和getValueStack()的区别？

> ID：12311592
> 
> 赞同：1
> 
> 时间：2012-09-07T04:09:03.080
> 
> 标签：java, database, string, compiler-construction, struts2

请告诉有什么区别：

```
ValueStack stack=ActionContext.getContext().getValueStack(); 
```

和：

```
Map cont = ActionContext.getContext().getContextMap(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:39:52.883

## 值堆栈（取自 struts 邮件列表）

值栈本质上是一个列表。在堆栈上调用 [1] 会返回一个从索引 1 处的元素开始的子堆栈。只有在调用堆栈上的方法时才会调用实际对象。

换句话说，假设我有一个由模型和动作组成的值堆栈，如下所示：

【型号、作用】

以下是以下 ognl 的解决方式：

[0] - 一个 CompoundRoot 对象，其中包含我们的堆栈、[模型、动作]

[1] - 另一个仅包含 [action] 的 CompoundRoot

[0].toString() - 在支持 toString() 方法的值堆栈（不包括 CompoundRoot）的第一个对象上调用 toString()

[1].foo - 在值堆栈中的第一个对象上调用 getFoo()，从 [OS:action] 开始，不包括支持 getFoo() 方法的 CompoundRoot

## 上下文映射

ActionContext 是执行 Action 的上下文。每个上下文基本上都是一个操作执行所需的对象容器，例如会话、参数、语言环境等。

```
ActionContext.getContext().getContextMap(); 
```

让您访问正在执行的上下文映射。例如，您需要访问应用程序上下文，而不是使用上述方法返回的映射来访问它

**更新** 正如@rees 所指出的

ActionContext 的上下文映射几乎是 ValueStack 的支持（上下文）映射

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T04:41:00.690

**getContextMap()** - com.opensymphony.xwork2.ActionContext 类中的方法 获取上下文映射。此方法获取上下文映射。

**getValueStack()** - com.opensymphony.xwork2.ActionContext 类中的方法 获取 OGNL 值堆栈。此方法获取此请求的当前值堆栈并返回值堆栈。有关此[方法](http://www.tutorialspoint.com/struts_2/struts_value_stack_ognl.htm)的详细信息。

# activemq - 是什么让 AMQ 队列的待处理消息数为负数？

> ID：12311593
> 
> 赞同：9
> 
> 时间：2012-09-07T04:09:05.577
> 
> 标签：activemq

在我清除队列（不是主题）的消息后，Active MQ 管理控制台中此队列的待处理消息编号变为负数。

我假设任何队列的待处理消息编号都应该是正数。是净化的问题吗？还是activemq的bug？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T19:48:35.610

这似乎是 ActiveMQ 中的一个错误。在清除队列时，我曾多次亲眼目睹过这个错误。但是，它似乎不会影响实际的消息传递。

ActiveMQ 问题跟踪器中有许多与此问题相关的未解决问题。如果你愿意，你可以投票给他们：

[https://issues.apache.org/jira/browse/AMQ-3472](https://issues.apache.org/jira/browse/AMQ-3472)

[https://issues.apache.org/jira/browse/AMQ-3111](https://issues.apache.org/jira/browse/AMQ-3111)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T23:18:50.567

清除不会阻止 mq 处理排队的作业。重新启动 ActiveMQ 只是摆脱现有的作业。不利的一面是，这将使所有数字重置为默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-17T09:19:44.423

这个问题在 ActiveMQ 5.8 中得到解决：

[https://issues.apache.org/jira/browse/AMQ-4598](https://issues.apache.org/jira/browse/AMQ-4598)

# sql - SQL 计数返回错误值

> ID：12311594
> 
> 赞同：1
> 
> 时间：2012-09-07T04:09:13.383
> 
> 标签：sql

被问到有关奥林匹克数据库的问题。

“对于参加过一项以上赛事的每位参赛者，请列出他们的名字、姓氏、他们的赛事数量以及他们最好和最差的地方（并且没有其他数据）。按人数的降序列出这些信息项目数量（即大多数项目在前），并且（当竞争对手的项目数量相同时）然后按最佳位置的升序排列，（当相同的最佳位置时）然后按最差位置的升序排列，并且（当相同的最差位置时）位置）然后按他们的姓氏升序排列。”

我一直在尝试编写查询来执行此操作，但是它没有返回正确的计数。它在计数为 2 时停止，并且不返回正确的最小值或最大值。这些表格是：

竞争对手表

```
Competitornum | Givenname | Familyname | Gender | Dateofbirth | CountryCode | 
```

结果表有

```
Eventid | Competitornum | Place | Lane | Elapsedtime | Note | 
```

询问

```
SELECT c.Givenname, Familyname, COUNT(r.Competitornum), MIN(r.Place), MAX(r.Place)
FROM Competitors c
JOIN Results r 
ON c.Competitornum=r.Competitornum
Group by c.Givenname, familyname, place
Having Count(r.Competitornum) > 1 
```

这是我到目前为止提出的查询，不确定我有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T04:17:26.270

您不想包含`place`在 GROUP BY 子句中。

您将需要一个 ORDER BY 子句来满足所有要求。

```
SELECT c.GivenName, c.FamilyName, COUNT(r.CompetitorNum) events,
       MIN(r.Place) best_place, MAX(r.Place) worst_place
  FROM Competitors c
  JOIN Results r ON c.CompetitorNum = r.CompetitorNum
 GROUP BY c.GivenName, c.FamilyName
HAVING COUNT(r.Competitornum) > 1
 ORDER BY events DESC, best_place ASC, worst_place ASC, c.FamilyName ASC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T04:17:53.153

试试这个，从 GROUP BY 中删除地点

```
Group by c.Givenname, familyname 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T04:18:06.583

从 group by 子句中删除 place 字段，然后尝试运行您的查询。

# entity-framework - 如何查看每个页面加载时正在运行的所有 SQL 查询？

> ID：12311596
> 
> 赞同：1
> 
> 时间：2012-09-07T04:09:39.337
> 
> 标签：entity-framework, asp.net-mvc-4

Django 有一个调试工具栏，可以让我看到所有正在运行的查询，我如何在 MVC4 中查看它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:21:03.940

There are quite a number of tools that you can consider. I discuss a number of these at [http://www.thinqlinq.com/Post.aspx/Title/LINQ-to-Database-Performance-hints](http://www.thinqlinq.com/Post.aspx/Title/LINQ-to-Database-Performance-hints) including Intellitrace, and SQL Profiler, and other relatively inexpensive profiling tools out there like the MVC MiniProfiler, ORM Profiler, Huagati’s LINQ to SQL Profiler, EF Prof, or at a bare minimum checking the generated code for your queries using LinqPad. Some of these options require you to modify your existing code base to plug in the profiler. Others just intercept the traffic to the database. It doesn't really matter which one you use as long as you use something particularly while you are learning.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T07:12:11.657

如果您想查看刚刚执行的 SQL 命令，您可以使用 IntelliTrace（仅在 VS Ultimate 版本中可用）。如果您想对每个请求进行分析，您可以尝试[MVC Mini Profiler](http://miniprofiler.com/)。EF 没有任何用于跟踪已执行 SQL 命令的内置工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T19:06:37.133

好的，让我们以Northwind数据库为例

```
using(NorthwindEntities context = new NorthwindEntities())
{
   var query = from p in context.Products
               where p.Product_ID == 3
               select p;

   //Query can be traced like this
   var SqlQuery = (System.Data.Objects.ObjectQuery<Product>)query;
   Console.WriteLine(SqlQuery.ToTraceString());
} 
```

您可以`var SqlQuery = (System.Data.Objects.ObjectQuery<Product>)query;`在页面加载时使用它，并且可以在任何您想要的地方打印该值。

# digital-signature - 如何对 JPG TIFF 和 BMP 等图像进行数字签名

> ID：12311597
> 
> 赞同：3
> 
> 时间：2012-09-07T04:09:41.690
> 
> 标签：digital-signature

我希望对包含 JPG、TIFF、BMP、SWf、Fla 文件的图像集进行数字签名。

我的问题是如何对这些图像进行数字签名？如果我签署 JPG 或 Tiff ，签名是否会附加到这些文件中（就像在 PDF 或 MS word 等文档文件中发生的那样）？如果是这样，它会存储在文件元数据字段中，还是留在外面？我可以提取签名数据吗？请注意，我希望单独签署这些图像，并且不希望转换为任何其他格式，例如 PDF。此外，我不希望使用电子邮件客户端对其进行签名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T06:25:41.117

一般来说，这些格式在设计时并未考虑到签名，因此您最好的选择是创建一个分离的签名并将其保存在文件附近。另一种方法是使用包装签名，但在您删除包装之前，其他软件将无法显示图像。

对于某些格式，可以将签名存储在元数据中，但是哪些应用程序能够处理呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-31T08:24:45.857

您还可以创建一个 mime 容器，其中包含原始图像和分离的签名。

附加签名仅对特定应用有用，因为它们不是标准的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-21T13:58:41.340

我知道这已经很长时间了，但你可能想研究一下隐写术。可以从文件中提取和删除元数据。隐写术将允许您以几乎只能使用统计分析才能检测到的方式嵌入数字签名（加密短语）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-04-04T01:31:07.093

尝试回答海报问题的人，而不是给出另一个不需要和不想要的意见，在我的拙见中，这几天很常见。很明显，发帖人要求的是用签名来给他的作品版权，所以你需要在图片上签名，句号，以及这样做的方法。

所以让我们看看...抓住 Gimp 或 Photoshop。获取您的图像并创建一个具有透明背景的新图层。用鼠标或数字笔在靠近右下边缘的区域写下签名。选择合并图层并拼合图像。好像这样就可以了。

# php - PHP sql语句在数据库中搜索用户名

> ID：12311599
> 
> 赞同：0
> 
> 时间：2012-09-07T04:10:10.637
> 
> 标签：php, sql, search

我正在尝试构建一个 sql 查询来搜索我的数据库中的用户。它应该帮助用户在我的网站上找到其他用户来寻找朋友。

我做了一些研究，因为我知道我不想要：

```
$query = "SELECT userName, userID FROM user WHERE userID = $userName "; 
```

因为如果他们必须输入用户的确切姓名才能找到他们，这将不是一个有效的搜索。

在做了一些研究之后，我决定尝试在前面和后面使用 % 符号的类似术语，这样它就可以是前面或后面带有数字的名称，它会显示出来。

我在网上找到的例子是这样格式化的：

```
$query = "SELECT userName, userID FROM user WHERE userID Like '%{$userName}%' "; 
```

但是当我在我的网站上执行此查询时，我遇到了返回许多结果的问题。它返回的结果不包含我的搜索词中的任何内容。

我还尝试了上面不带括号的搜索查询，因为我不明白为什么需要它们，但我得到了相同的结果。

有关如何使用上述命令查询使搜索更严格的任何建议？

或者关于我应该如何搜索我的数据库以寻找用户朋友的任何其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:17:09.723

该[`%`符号](http://www.w3schools.com/sql/sql_like.asp)用于通配符。因此，如果`$userName = 'apple'`您的查询匹配`apple`,`applepie`和`crabapple`但不匹配`appl`。

如果您想要完全匹配，请完全删除`%s`或 LIKE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T04:23:20.977

请试试这个。还有你为什么用牙套..

```
$query = "SELECT userName, userID FROM user WHERE username Like '%$userName%' "; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T04:16:27.240

考虑字符串

`Apple` `iApple` `Apple Product`

如果你输入`Apple`

**喜欢 '%{$userName}%' "**

**Returns** : will return you `Apple`, `iApple`, `Apple Product`
**Reason** :`%`两边都表示它会接受你的搜索词前后的任何文本

**喜欢'{$userName}%'"**

**Returns** : will return you `Apple`and `Apple Product`
**Reason** :`%`右侧表示它将接受您搜索词后的任何文本

**喜欢'%{$userName}'"**

**返回**：将返回您`Apple`和`iApple`
**原因**：`%`左侧表示它将接受您搜索词之前的任何文本

**像'{$userName}'"**

**Returns** : will return you `Apple`
**Reason** : 否`%`将搜索限制为搜索词

**此外**

我相信您的查询应该是

```
  $username = mysqli_real_escape_string($userName);
  $query = "SELECT userName, userID FROM user WHERE userName Like '%{$username}%'";

```

# ruby-on-rails - 带有自定义外键 sql 表达式的 ActiveRecord has_many

> ID：12311602
> 
> 赞同：3
> 
> 时间：2012-09-07T04:10:31.867
> 
> 标签：ruby-on-rails, postgresql, activerecord, associations

在 ActiveRecord 中，has_many 关系使用外键列来加载关联。所以：

```
class Person < ActiveRecord::Base
  has_many :messages
end

class Messages < ActiveRecord::Base
  belongs_to :person
end

Person.limit(10).includes(:messages) 
# select * from persons limit 10;
# select messages.* from messages where person_id in (1, 2, 3...) 
```

我有一个案例（我也看到其他人也要求这样做），我不希望 Rails 自动将外键检查附加到 where 子句。相反，我可能想要类似的东西：

```
class Person < ActiveRecord::Base
  has_many :messages, 
           :foreign_key => false, 
           :conditions => proc { ["person_id is null or person_id = ?", self.id] }
end

Person.limit(10).includes(:messages)
# select messages.* from messages where person_id is null or person_id in (1, 2, 3...) 
```

我怎样才能做到这一点？总而言之，我不希望 ActiveRecord 自动在 WHERE 子句中附加外键，我希望能够指定它用于关联的表达式。

我不想这样做：

```
class Person < ActiveRecord::Base
  def messages
    Message.where("person_id is null or person_id = #{ self.id }")
  end
end 
```

据我所知，这会破坏急切的加载。

我也不想使用`finder_sql`has_many 的选项，因为这会破坏`person.messages.where(:id => 1)`或`Person.limit(10).includes(:messages => :image)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:35:20.010

像这样的东西在 Rails 3.2.1 上对我有用：

```
class Person < ActiveRecord::Base
  has_many :messages, :finder_sql => lambda{ "SELECT * FROM messages WHERE messages.person_id=#{id} OR messages.person_id IS NULL" }
end

# person = Person.includes(:messages).first
# person.messages.loaded?  #=> true 
```

# android - 加载下一页时android崩溃

> ID：12311603
> 
> 赞同：0
> 
> 时间：2012-09-07T04:10:33.907
> 
> 标签：android

我是安卓新手

当我单击按钮登录时，我有 2 个文件 login.java 和 depan.java 没问题，并且文件 depan.java 加载成功

当我输入此代码时似乎错误开始

```
 buttonuser = (ImageButton) findViewById(R.id.BtnUser); 
```

depan.class 无法加载，应用程序崩溃。

**depan.class**

```
public class Depan extends  Activity{
ImageButton buttonuser, buttonvlan;
    @Override
    public void onCreate(Bundle wibi) {
        // TODO Auto-generated method stub
        super.onCreate(wibi);
        setContentView (R.layout.depan);

        buttonuser = (ImageButton) findViewById(R.id.BtnUser); 
```

**depan.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background"
    android:gravity="center_horizontal|center_vertical"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/BtnUser"
        android:layout_width="150dp"
        android:layout_height="100dp"
        android:scaleType="fitXY"
        android:src="@drawable/manajemenuser" />

    <ImageView
        android:id="@+id/BtnVlan"
        android:layout_width="150dp"
        android:layout_height="100dp"
        android:scaleType="fitXY"
        android:src="@drawable/manajemenvlan" />

</LinearLayout> 
```

**显现**

```
 <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

         <activity
            android:name=".login"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

         <activity
            android:name=".Depan"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

         <activity
            android:name=".user"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

         <activity
            android:name=".vlan"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:19:00.183

```
 buttonuser = (**ImageButton**) findViewById(R.id.BtnUser);

<**ImageView**
        android:id="@+id/**BtnUser**"
        android:layout_width="150dp"
        android:layout_height="100dp"
        android:scaleType="fitXY"
        android:src="@drawable/manajemenuser" /> 
```

ImageView BtnUser .... 为什么要把它投射到 ImageButton ？？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T04:21:23.367

将 xml 中的 ImageView 更改为 ImageButton

# android - 安卓更新错误

> ID：12311604
> 
> 赞同：1
> 
> 时间：2012-09-07T04:10:49.213
> 
> 标签：android

当我尝试更新我的应用程序时，我在开发人员控制台中收到以下消息。

**错误**：APK 版本 1 支持与其他更高版本 APK 相同的设备。它不会被送达。请停用 APK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:15:24.673

这就是它所说的。在激活更新之前，您必须停用现有的 .apk 文件。如果切换到简单视图，它会自动执行此操作；在高级视图中，您必须自己完成每个步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T04:24:00.783

你能检查你的版本号并检查它是否高于以前的版本。详细指南请参见 [http://developer.android.com/distribute/googleplay/publish/preparing.html](http://developer.android.com/distribute/googleplay/publish/preparing.html)和[http://mobile.tutsplus.com/tutorials/android/publish-to-android-market/](http://mobile.tutsplus.com/tutorials/android/publish-to-android-market/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T04:18:02.930

卸载现有的 .apk 并安装新的。

# wpf - 画布的孩子和画布的边框重叠

> ID：12311605
> 
> 赞同：2
> 
> 时间：2012-09-07T04:10:53.477
> 
> 标签：wpf, xaml, canvas, border

我有一个放在网格中的画布。并且网格被放置在边框中。当我在画布上绘制一些项目（例如白线）时，该项目位于边框上方，因此边框正在擦除。有谁知道我怎样才能避免它？我试图为画布设置边距，边框的大小比画布的大，但没有任何帮助。

这是我的 xaml：

```
<Border BorderThickness="1"  BorderBrush="#333333" Opacity="1" Name="inner_canvas_border">
    <Grid Name="grid1">
        <Canvas Name="Canvas1"HorizontalAlignment="Center" VerticalAlignment="Center" Width="700" Height="450" />
    </Grid>
</Border> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T05:05:40.187

`ClipToBounds`上属性的默认值为`Canvas`false。将此设置为 true，这将防止超出边界的元素`Canvas`显示在边界之外`Canvas`：

```
<Border
  BorderThickness="1"
  BorderBrush="#333333"
  Opacity="1"
  Name="inner_canvas_border">
  <Grid
    Name="grid1">
    <Canvas
      Name="Canvas1"
      HorizontalAlignment="Center"
      VerticalAlignment="Center"
      Width="700"
      Height="450"
      ClipToBounds="True" /><!-- This line here -->
  </Grid>
</Border> 
```

# google-api - 在实现 Google+ 分享按钮时，我可以指定要与之分享的人吗？

> ID：12311606
> 
> 赞同：1
> 
> 时间：2012-09-07T04:10:55.323
> 
> 标签：google-api, google-plus, google-plus-one

我想在我的网站中实现 Google+ 分享按钮。 [https://developers.google.com/+/plugins/share/](https://developers.google.com/+/plugins/share/)

似乎将共享范围默认为“公共”。有没有办法自定义它并将其设置为一个人或一个圈子？

在我的用例中，范围是提前知道的。我想为用户节省删除公共范围和输入人员的额外步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:32:22.343

It is currently not possible to programmatically set the recipients/circles of a message shared on Google+.

# coq - 节内外类型错误

> ID：12311607
> 
> 赞同：0
> 
> 时间：2012-09-07T04:11:13.430
> 
> 标签：coq

我有一个函数“ `HF`”在部分内有类型`S`

```
Open S.
HF: forall f : dup_sig Sig, dup_ar f = ASignature.arity (F f)
End S.

Signature: Type
Sig: Signature    
dp_Sig : Signature
dup_sig : Signature -> Signature
F : dup_sig Sig -> Sig
dup_symb : Signature -> Type
dup_ar : forall Sig : Signature, dup_symb Sig -> nat
ASignature.arity : forall s : Signature, s -> nat 
```

我想写一个引理：

```
Lemma incl_fl : forall R R, Fl HF R [= R'. 
```

在哪里

```
Fl: forall (S1 S2 : Signature) (F : S1 -> S2),
       (forall f : S1, ASignature.arity f = ASignature.arity (F f)) ->
       list (ATrs.rule S1) -> list (ATrs.rule S2) 
```

当我在 section 中有这个功能时就可以了`S`。

但我想`incl_fl`在节外写函数`S`。这里是`HF`外节的类型`S`。

```
HF: forall (arity : symbol -> nat) (f : dup_sig (Sig arity)),
    dup_ar f = ASignature.arity (F f)

Lemma incl_fl : forall arity R R', Fl HF R [= R'. 
```

我在“”处遇到错误`HF`：

```
The term "HF" has type
 "forall (arity : symbol -> nat) (f : dup_sig (Sig arity)),
  dup_ar f = ASignature.arity (F f)" while it is expected to have type
 "forall f : ?35524, ASignature.arity f = ASignature.arity (?35526 f)". 
```

我试图找到一个地方`arity`在这个函数中添加“ `HF`”，但我没有成功。你能帮我`incl_fl`在节外写引理“”`S`吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:39:38.417

我找到了答案。

```
Lemma incl_Fl : forall arity R R', Fl (HF (arity:=arity)) R [= R'. 
```

# image - UInt8 EXC_BAD_ACCESS

> ID：12311611
> 
> 赞同：0
> 
> 时间：2012-09-07T04:11:52.727
> 
> 标签：image, filter, buffer, exc-bad-access, uint

我有一种方法可以为图像添加过滤器。直到几个月前，这一直很好，现在当我尝试使用这种方法时，应用程序将在图像缓冲区上崩溃。我创建缓冲区并将其设置为图像的数据，稍后访问特定索引会导致错误的访问崩溃。我已经寻找了过去一两个小时，现在我确信我忽略了一些东西。我认为发布了一些不应该发布的内容。我正在使用 xcode 的 ios DP 4 预览版，我认为这个问题是从更新到 beta 开始的，但我真的不确定。

这是它崩溃的行，位于第一个**for 循环的****中间附近**

 **```
 m_PixelBuf[index+2] = m_PixelBuf[index+2]/*aRed*/; 
```

通常它设置为我检查过的红色，它不应该超出缓冲区边界。

```
 -(void)contrastWithContrast:(float )contrast colorWithColor:(float )color{
    drawImage.image = original;
    UIImage * unfilteredImage2 = [[[UIImage alloc]initWithCGImage:drawImage.image.CGImage]    autorelease];
    CGImageRef inImage = unfilteredImage2.CGImage;         
    CGContextRef ctx;
    CFDataRef m_DataRef;
    m_DataRef = CGDataProviderCopyData(CGImageGetDataProvider(inImage));
    UInt8 * m_PixelBuf  = (UInt8 *) CFDataGetBytePtr(m_DataRef);
    int length = CFDataGetLength(m_DataRef);
    NSLog(@"Photo Length: %i",length);
    //////Contrast/////////////
    //NSLog(@"Contrast:%f",contrast);
    int aRed;
    int aGreen;
    int aBlue;
    for (int index = 0; index < length; index += 4){
    aRed = m_PixelBuf[index+2];
    aGreen = m_PixelBuf[index+1];
    aBlue = m_PixelBuf[index];

    aRed = (((aRed-128)*(contrast+100) )/100) + 128;
    if (aRed < 0) aRed = 0; if (aRed>255) aRed=255;
    m_PixelBuf[index+2] = m_PixelBuf[index+2]/*aRed*/;//Always crashes here

    aGreen = (((aGreen-128)*(contrast+100) )/100) + 128;
    if (aGreen < 0) aGreen = 0; if (aGreen>255) aGreen=255;
    m_PixelBuf[index+1] = aGreen;

    aBlue = (((aBlue-128)*(contrast+100) )/100) + 128;
    if (aBlue < 0) aBlue = 0; if (aBlue>255) aBlue=255;
    m_PixelBuf[index] = aBlue;
}
ctx = CGBitmapContextCreate(m_PixelBuf,
                            CGImageGetWidth( inImage ),  
                            CGImageGetHeight( inImage ),  
                            CGImageGetBitsPerComponent(inImage),
                            CGImageGetBytesPerRow(inImage ),  
                            CGImageGetColorSpace(inImage ),  
                            CGImageGetBitmapInfo(inImage) );
CGImageRef imageRef = CGBitmapContextCreateImage (ctx);
UIImage* rawImage = [[UIImage alloc]initWithCGImage:imageRef];
drawImage.image = rawImage;

[rawImage release];
CGContextRelease(ctx); 
CFRelease(imageRef);
CFRelease(m_DataRef);

unfilteredImage2 = [[[UIImage alloc]initWithCGImage:drawImage.image.CGImage] autorelease];
inImage = unfilteredImage2.CGImage;         
m_DataRef = CGDataProviderCopyData(CGImageGetDataProvider(inImage));
m_PixelBuf = (UInt8 *) CFDataGetBytePtr(m_DataRef);
length = CFDataGetLength(m_DataRef);

///////Color////////////////    
for (int index = 0; index < length; index += 4)
{
    //Blue
    if((m_PixelBuf[index] + ((int)color * 2))>255){
        m_PixelBuf[index] = 255;
    }else if((m_PixelBuf[index] + ((int)color * 2))<0){
        m_PixelBuf[index] = 0;
    }
    else{
        m_PixelBuf[index]=m_PixelBuf[index] + ((int)color * 2);
    }

    //Green
    if((m_PixelBuf[index+1] + ((int)color * 2))>255){
        m_PixelBuf[index+1] = 255;
    }else if((m_PixelBuf[index+1] + ((int)color * 2))<0){
        m_PixelBuf[index+1] = 0;             
    }
    else{
        m_PixelBuf[index+1]=m_PixelBuf[index+1] + ((int)color * 2);  
    }

    //Red
    if((m_PixelBuf[index+2] + ((int)color * 2))>255){
        m_PixelBuf[index+2] = 255;
    }else if((m_PixelBuf[index+2] + ((int)color * 2))<0){
        m_PixelBuf[index+2] = 0;             
    }
    else{
        m_PixelBuf[index+2]=m_PixelBuf[index+2] + ((int)color * 2);  
    }

    //m_PixelBuf[index+3]=255;//Alpha
}

ctx = CGBitmapContextCreate(m_PixelBuf,  
                            CGImageGetWidth( inImage ),  
                            CGImageGetHeight( inImage ),  
                            CGImageGetBitsPerComponent(inImage),
                            CGImageGetBytesPerRow(inImage ),  
                            CGImageGetColorSpace(inImage ),  
                            CGImageGetBitmapInfo(inImage) );
imageRef = CGBitmapContextCreateImage (ctx);
rawImage = [[UIImage alloc]initWithCGImage:imageRef];
drawImage.image = rawImage;
[rawImage release];
CGContextRelease(ctx); 
CFRelease(imageRef);
CFRelease(m_DataRef);
//drawImage.image = unfilteredImage2;
willUpdate = YES;
} 
```

对不起，我刚刚复制了整个方法。

谢谢，

店铺礼遇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:03:25.480

我有同样的问题。您应该使用下面的代码来获取指向像素缓冲区的指针，而不是 CFDataGetBytePtr()。

```
CGImageRef cgImage = originalImage.CGImage;
size_t width = CGImageGetWidth(cgImage);
size_t height = CGImageGetHeight(cgImage);

char *buffer = (char*)malloc(sizeof(char) * width * height * 4);
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef cgContext = CGBitmapContextCreate(buffer, width, height, 8, width * 4, colorSpace, kCGImageAlphaPremultipliedLast);
CGContextSetBlendMode(cgContext, kCGBlendModeCopy);
CGContextDrawImage(cgContext, CGRectMake(0.0f, 0.0f, width, height), cgImage);

free(buffer);
CGContextRelease(cgContext);
CGColorSpaceRelease(colorSpace); 
```**

# perl - 如何在另一个 perl 单行程序中使用我的程序中定义的哈希值？

> ID：12311620
> 
> 赞同：0
> 
> 时间：2012-09-07T04:14:16.960
> 
> 标签：perl, hash

我在带有 Eclipse IDE 的 Windows 上使用 Perl。我已经做的是，我已经解析了一个文本文件并将我需要的内容提取到一个`%hash`. 最后，my`%hash "Key"`包含函数名称并`%hash "Value"`包含相应的函数定义。

现在，我的查询是，我可以`%hash "Values"`在`PERL`单行中使用我的（我在同一个程序的末尾运行）吗？

如果是，那么我尝试了以下方法，但它似乎不起作用：

`perl -pi.bak -e "if(! /#/){s/ PERFORM ([\\w-]+)\.?/qq(# PERFORM \$1\n). \$hash{\$1}/ge}" TestFinal.txt`;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:20:14.130

变量通常只存储在内存中，要在 Perl 的不同实例之间保持一个变量，您将需要某种“持久性”。

您可以使用 Data::Dumper、Storable、DBM::Deep 或任何其他多种机制。

**编辑：**

脚本：

```
#!/usr/bin/env perl

use strict;
use warnings;

# this module can dump a variable in "do"-able format
use Data::Dumper;

my %hash = (
  john => 'doe',
  tarzan => 'jane',
);

open my $fh, '>', 'data' or die "cannot open data file";
print $fh Dumper \%hash; 
```

一个班轮：

```
perl -e '%hash = do "data" or die "cannot load data"; # do stuff with %hash' 
```

# python - 在 python 扩展中传递默认值的正确方法是什么？

> ID：12311621
> 
> 赞同：0
> 
> 时间：2012-09-07T04:14:26.920
> 
> 标签：python, python-c-api

我如何将默认值传递给像 10,20 这样的 c 扩展，下面的代码不采用 a =10 和 b =20 的值。在下面的代码中 example.py 是一个简单的 python 代码，它调用 c 函数 calculate 。

例子.py

```
def Multiply:
  calculate( a=10,b =20) 
```

计算.c 扩展文件

```
if(! PyArg_ParseTuple(args, "ii" ,&a, &b));

-----------some more code here ------
------------------------------------ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:20:48.060

这些不是默认值；这些是关键字参数。因此，它们不会出现在`args`元组中。

相反，您可能想要[`PyArg_ParseTupleAndKeywords()`](http://docs.python.org/c-api/arg.html#PyArg_ParseTupleAndKeywords).

# php - 将 JS 文件解析为 PHP 有什么副作用？

> ID：12311622
> 
> 赞同：2
> 
> 时间：2012-09-07T04:14:30.267
> 
> 标签：php, javascript, embedding

我有一些需要在 javascript 中使用的 php 变量。我没有使用 ajax 来回传递 var，而是选择将 js 文件解析为 php。这是我所做的一个简单示例：

```
#.htaccess
AddType application/x-httpd-php .js

//scripts.js
//or for security reason, I could just use scripts.php and add header at the top)

header("Content-type: text/javascript");
alert("Hello <?php echo $_SESSION['username']; ?>"); 
```

这个方法我用了一段时间了，没发现什么明显的问题。

这样做有什么副作用吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T04:21:20.397

我看不出有什么问题，但对我来说更简单的解决方案是：

```
<script type="text/javascript">
   var username = "<?=$_SESSION["username"]?>";
</script> 
```

在模板或索引的 head-Zone 中。

# c++ - 虚拟继承如何工作？

> ID：12311623
> 
> 赞同：6
> 
> 时间：2012-09-07T04:14:30.537
> 
> 标签：c++, memory, inheritance, virtual

1.  虚拟继承是否使用 vTable？如果是或否，那么它是如何实现的
2.  虚拟继承在内存中的行为如何？
3.  虚拟继承的任何其他替代方案

非常感谢概念性的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:48:02.483

虚拟继承根据编译器以不同的方式实现。

1) 是的，vc 和 gcc 都使用 vTable 指针。但是 vc 有另一个指针 ref 作为虚拟基指针。

2) 对于经典的虚拟继承，如 Left < Top; 右 < 上; Bottom < Left 和 Right 堆栈应该是这样的：

```
Left.vptr  // -> to its vtable

Left::element_in_left

Right.vptr

Right::element_in_right

Bottom::element_in_bottom

Top::element_in_top 
```

程序使用vptr来查找vtable，对于gcc来说，viable中有一个virtual base offset值。vptr + base offset 将给出父地址。

3）我不知道你是什么意思。在 C++ 编译器中有不同的方法来实现它。其他语言也有自己的绑定函数的方法。

# html - 如何显示一个 h1 元素，旁边有一个 inline 元素，下面有一个 ap 元素？

> ID：12311624
> 
> 赞同：0
> 
> 时间：2012-09-07T04:14:32.980
> 
> 标签：html, css, block, html-heading

我之前问[了一个](https://stackoverflow.com/questions/12303124/best-practice-when-displaying-inline-html-elements-next-to-a-h1-element)关于将编辑/删除链接与 h1 元素内联的最佳方法的问题。我能够通过给出的答案来实现这一点，但我现在有额外的要求，我需要在 h1 下方显示一个段落并编辑/删除链接。

到目前为止，我的 HTML 如下所示：

```
<div class="product-header">
  <div class="title">
    <h1>Product 1</h1>
  </div>
  <div class="admin">
      (<a href="#">Edit</a> | <a href="#">Delete</a>)
  </div>
  <p class="description">Product 1 is a cool product</p>
</div> 
```

我希望它看起来像下面这样：

> **产品 1**（编辑 | 删除）
> *产品 1 是一个很酷的产品*
> 
> ...页面内容的其余部分

但我不确定使用什么 CSS 来实现这一点！我所做的一切似乎都将描述段落与标题放在同一行，如下所示：

> **产品 1**（编辑 | 删除）*产品 1 是一个很酷的产品*
> 
> ...页面内容的其余部分

[链接到 JSFiddle](http://jsfiddle.net/kDQLZ/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T04:18:20.333

无需添加`clear:both`.product **-header**类，但您确实需要添加`clear:both`.product **-header .description**类，如下所示：

```
.product-header .description {
    clear:both;
}​ 
```

[**演示**](http://jsfiddle.net/akhurshid/ngKwe/2/)

**补充笔记：**

[**clear**](https://developer.mozilla.org/en-US/docs/CSS/clear) CSS 属性指定一个元素是否可以位于其前面的浮动元素旁边，或者必须在它们下方向下移动（清除）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T04:18:11.097

您只需要添加`clear:both`到`.description`：

[http://jsfiddle.net/kDQLZ/3/](http://jsfiddle.net/kDQLZ/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T04:20:51.130

***[Jsfiddle 演示](http://jsfiddle.net/kDQLZ/3/)***

嗨，现在清除您的**p 标签类** `clear left`

像这样

```
.product-header .description {
 clear:left;   
} 
```

***[演示](http://jsfiddle.net/kDQLZ/3/)***

# php - 多维数组（有些值不是子数组）到字符串？

> ID：12311625
> 
> 赞同：0
> 
> 时间：2012-09-07T04:14:37.700
> 
> 标签：php

我正在尝试使用此`array_map`函数将多维数组转换为带图案的字符串：

```
function array_to_string($array) {
    return implode("&",array_map(function($a){return implode("~",$a);},$array));
}
$arr = array("hello",array("blue","red"),array("one","three","twenty"),"random");
array_to_string($arr); 
```

每个数组元素之间“&”和每个子数组元素之间（如果是数组）“~”

应该输出：`hello&blue~red&one~three~twenty&random`

然而这个输出：`Warning: implode(): Invalid arguments passed`（2）我尝试改变函数`array_map`来检测是否多数组的值`is_array`但是从我的输出中，我不认为这是可能的？所以本质上，我想真正的问题是如何对`array_map`函数进行测试以查看它是否`is_array`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T04:21:34.790

由于 $a 可以是数组或字符串，因此您应该在回调函数中检查它：

```
function array_to_string($array) {
    return implode("&",
               array_map(function($a) {
                   return is_array($a) ? implode("~",$a) : $a;
               }, $array)
           );
} 
```

# c# - 在 Gridview 中显示 SQL 数据库中的数据

> ID：12311626
> 
> 赞同：8
> 
> 时间：2012-09-07T04:14:48.900
> 
> 标签：c#, asp.net-mvc, gridview

我想使用 SQL 数据库中的 3 个表在网格视图中显示数据。

首先我创建了模型

```
public class common
    {

        public Artist Artist { get; set; }
        public Album Album { get; set; }
        public Genre Genre { get; set; }

    } 
```

然后这是控制器

```
 public ActionResult Show1()
    {
        var query = from a in DB.Album
                    join b in DB.Artists
                    on a.ArtistId equals b.ArtistId
                    join c in DB.Genre
                    on a.GenreId equals c.GenreId
                    where (b.ArtistId == 2)
                    select new common { Album = a, Artist = b, Genre = c };
        return View(query.ToList());
    }

} 
```

之后这是我的观点

```
@model IEnumerable<test1.Models.common>

@{
    ViewBag.Title = "Show1";
}

<h2>Show1</h2>

<div>

@{

  var grid = new WebGrid(Model, defaultSort:"Name");

}

@grid.GetHtml()

</div> 
```

但它没有显示任何数据？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T04:49:19.930

我认为您需要一个 editorTemplate 用于您的公共对象模型或使用 for 句子并填充一个 html 表

例如...

```
<table summary="">
    <thead>
        <tr>
            <th></th>
            <th>
                Account No.
            </th>
            <th>
                Customer Name
            </th>
            <th class="SingleCheckBox">
                Is Approved
            </th>
            <th  class="SingleCheckBox">
                Is Locked out
            </th>
            <th>
                Last Login
            </th>
        </tr>
    </thead>
    <tbody>
@for (int i = 0; i < Model.Count(); ++i)
{
    var item = Model[i];
    bool isSelected = item.AccountNo == selectedAccountNo;
    <tr>
        <td>@Html.RadioButton("selectedUserName", item.UserName, isSelected, new { name = "selectedUserName" })</td>
        <td>
            @Html.DisplayFor(model => model[i].UserName)
            @Html.HiddenFor(model => model[i].UserName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Email)
        </td>
        <td class="SingleCheckBox">
            @Html.CheckBoxFor(model => model[i].IsApproved) 
        </td>
        <td class="SingleCheckBox">
            @if (item.IsLockedOut)
            {
                @Html.CheckBoxFor(model => model[i].IsLockedOut);
            }
            else
            {
                @Html.CheckBoxFor(model => model[i].IsLockedOut);
            }
        </td>
        <td class="last-child">
            @(TimeZoneInfo.ConvertTime(DateTime.SpecifyKind(item.LastLoginDate, DateTimeKind.Utc), timeZoneInfo).ToString())
        </td>
    </tr>
}
    </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-18T06:24:01.080

首先在您的视图中添加 Jquery

```
<script src="../../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script> 
```

如果要样式添加样式

```
<style type="text/css">
            .webGrid { margin: 4px; border-collapse: collapse; width: 500px;  background-color:#FCFCFC;}
            .header { background-color: #C1D4E6; font-weight: bold; color: #FFF; }
            .webGrid th, .webGrid td { border: 1px solid #C0C0C0; padding: 5px; }
            .alt { background-color: #E4E9F5; color: #000; }
            .gridHead a:hover {text-decoration:underline;}
            .description { width:auto}
            .select{background-color: #389DF5}
        </style> 
```

在您的视图中添加模型

```
 @{
        test1.Models.common Common = new test1.Models.common();
    } 
```

在您的视图中添加代码

```
 @{
    var grid = new WebGrid(Model, canPage: true, rowsPerPage: 5, selectionFieldName: "selectedRow",ajaxUpdateContainerId: "gridContent");
            grid.Pager(WebGridPagerModes.NextPrevious);}
            <div id="gridContent">
            @grid.GetHtml(tableStyle: "webGrid",
                    headerStyle: "header",
                    alternatingRowStyle: "alt",
                    selectedRowStyle: "select",
                    columns: grid.Columns(
                    grid.Column("Id", "Id"),
                    grid.Column("Name", "Name"),
                    grid.Column("Description", "Description"),

             )) 
        @if (grid.HasSelection)
             {
                 common= (test1.Models.common)grid.Rows[grid.SelectedIndex].Value;
                 <b>Id</b> @common.Artist.Id<br />
                 <b>Name</b>  @common.Album.Name<br />
                 <b>Description</b> @common.Album.Description<br />

             }
    </div> 
```

根据您的模型详细信息编辑此部分

```
@if (grid.HasSelection)
         {
             common= (test1.Models.common)grid.Rows[grid.SelectedIndex].Value;
             <b>Id</b> @common.Artist.Id<br />
             <b>Name</b>  @common.Album.Name<br />
             <b>Description</b> @common.Album.Description<br />

         } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-27T09:50:29.123

由于您的模型，它没有显示任何内容。Webgrid 不知道如何呈现您的艺术家或专辑或流派表模型。

```
public ActionResult Show1()
{
    var query = from a in DB.Album
                join b in DB.Artists
                on a.ArtistId equals b.ArtistId
                join c in DB.Genre
                on a.GenreId equals c.GenreId
                where (b.ArtistId == 2)
                select new common { AlbumName = a.AlbumName, ArtistName = b.ArtistName, GenreName = c.GenreName /* ... other props */ };
    return View(query.ToList());
}

public class common
{

    public string ArtistName { get; set; }
    public string AlbumName { get; set; }
    public string GenreName { get; set; }
    //other props and not tables, use like string, int, decimal...

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-15T23:00:39.627

我相信您的问题的最佳答案是另一个问题：“***为什么是 WebGrid？*** ”

如果您参考新创建的 MVC 项目的默认功能，您将看到 Index.cshtml 将使用一个表（如**@hagensoft**提供的答案中所建议的那样）。根据我的经验，当在 Visual Studio 中为 MVC 项目正确搭建项目时，我只需要做很少的工作就可以很好地显示模型列表，甚至在必要时进行分页。

为了更好地利用分页，如果这是您所追求的，我充分利用了 NuGet 提供的 PagedList.MVC 包（[https://www.nuget.org/packages/PagedList.Mvc/](https://www.nuget.org/packages/PagedList.Mvc/)）。有大量与 PagedList 提供的功能相关的文档，PagedList 以及 Visual Studio 中新 MVC 项目的表建议/默认视图行为，与您想要的任何排序、搜索或类似功能一起创造奇迹在您的应用程序中提供。

我参考的关于排序、过滤和分页的精彩教程可以在这里找到：[https ://docs.microsoft.com/en-us/aspnet/mvc/overview/getting-started/getting-started-with-ef -using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application](https://docs.microsoft.com/en-us/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application)

如果您坚持使用 WebGrid/GridView，我建议您将数据库调用移出控制器并直接进入 Razor 视图本身，或者尝试发回专用 ViewModel 的 ObervableCollection<>，而不是 List<>从控制器。

这里故事的寓意是不要冒险远离提供的路径。尝试使用提供给您的工具并遵循 MVC 项目的默认格式。

# ruby-on-rails - Rails formtastic 要求一个国家插件。我不想要它。有谁知道怎么告诉它我不想要它？

> ID：12311629
> 
> 赞同：2
> 
> 时间：2012-09-07T04:14:59.757
> 
> 标签：ruby-on-rails, formtastic, country

我正在使用formtastic，并且我有一个国家/地区。当我尝试显示屏幕时出现此错误。

> 要使用 :country 输入，请安装 country_select 插件，例如：[https ://github.com/jamesds/country-select](https://github.com/jamesds/country-select)

现在。我不想使用任何插件。它是自由文本，我想保持这种状态。

有人知道如何删除此要求吗？应该很容易......但如果我能看到怎么做，我会很生气。

```
= semantic_form_for @store, {:html => { :class => "form-horizontal" }} do |f|
  = f.input :default_country 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T05:24:44.680

添加 , :as => :string

到导致错误的行的末尾

```
= semantic_form_for @store, {:html => { :class => "form-horizontal" }} do |f|
  = f.input :default_country, :as => :string 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-12T11:00:12.657

**在 Rails 4 中，带有国家/地区选择输入字段的表单：**

将“国家选择”添加到您的 Gemfile：

```
gem 'country-select' 
```

如果我使用语义形式选择，它不会显示以前保存的值。因此，以下内容**无法正常**工作：

```
=f.input :country, as: :select, collection: country_options_for_select 
```

所以必须使用标准表单元素才能开始**工作**：

```
=f.select :country, collection: country_options_for_select 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-23T20:34:57.247

我发现这个插件开箱即用（注意下划线而不是破折号）：

[https://github.com/chrislerum/country_select](https://github.com/chrislerum/country_select)

# regex - 使用正则表达式匹配模式

> ID：12311630
> 
> 赞同：0
> 
> 时间：2012-09-07T04:15:05.983
> 
> 标签：regex

我想在这句话的方括号中得到所有内容，包括括号：

“Abcd [括号内] xyz”

我试过这个：

re.search(r'.[.])')

但它没有给出我要找的东西，不知道如何匹配第二个括号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T04:17:25.943

您需要的正则表达式类似于：

```
\[[^\]]*\] 
```

查看上述表达式的[演示。](http://rubular.com/r/dGbevs2TAQ)

您将需要根据您的编程语言对其进行调整。

`re.search(r'.[.])')`似乎是python，所以尝试：

```
>>> import re
>>> str = "ABC [in brackets] xyz"
>>> re.search('\[[^\]]*\]',str).group(0)
'[in brackets]' 
```

# java - Jersey Jackson 序列化父字段

> ID：12311633
> 
> 赞同：1
> 
> 时间：2012-09-07T04:15:44.080
> 
> 标签：java, json, serialization, jersey, jackson

我有一个对象“A”，当对象“A”被序列化时，它扩展了对象“B”，对象“B”中的字段没有被序列化为 JSON。有任何想法吗？这是我所涉及的对象。

```
public class CreateNewPlayerAndLoginResponse extends EPNetResponse{
    private PlayerSession playerSession;

    public CreateNewPlayerAndLoginResponse() {
    }

    public CreateNewPlayerAndLoginResponse(Integer playerId, String playerSessionId) {
        this.playerSession = new PlayerSession(playerId, playerSessionId);
    }

    public CreateNewPlayerAndLoginResponse(EPNetErrorEnum error) {
        super(error);
    }

    public CreateNewPlayerAndLoginResponse(EPNetError error) {
        super(error);
    }

    public PlayerSession getPlayerSession() {
        return playerSession;
    }

    public void setPlayerSession(PlayerSession playerSession) {
        this.playerSession = playerSession;
    }

    @Override
    public String toString() {
        return "CreateNewPlayerAndLoginResponse{" + "playerSession=" + playerSession + '}';
    }

}

public class EPNetResponse implements Serializable{

    private EPNetError error;

    public EPNetResponse() {
    }

    public EPNetResponse(EPNetError error) {
        this.error = error;
    }

    public EPNetResponse(EPNetErrorEnum error){
        this.error = new EPNetError(error);
    }

    public EPNetError getError() {
        return error;
    }

    public void setError(EPNetError error) {
        this.error = error;
    }

    @JsonIgnore
    public boolean isError(){
        if(error == null){
            return false;
        }

        return true;
    }
}

public class EPNetError implements Serializable{
    private static final int UNEXPECTED_ERROR = 5417;
    private Integer code;
    private String message;

    public EPNetError() {
    }

    public EPNetError(EPNetErrorEnum error){
        this.code = error.getCode();
        this.message = error.getMessage();
    }

    public EPNetError(EPNetErrorEnum error, String message){
        this.code = error.getCode();
        this.message = message;
    }

    public EPNetError(String message){
        this.code = EPNetError.UNEXPECTED_ERROR;
        this.message = message;
    }

    public EPNetError(Integer code, String message) {
        this.code = code;
        this.message = message;
    }

    public Integer getCode() {
        return code;
    }

    public void setCode(Integer code) {
        this.code = code;
    }

    public String getMessage() {
        return message;
    }

    public void setMessage(String message) {
        this.message = message;
    }

} 
```

我得到的序列化响应是

```
{"playerSession":null} 
```

即使我 100% 确定在序列化之前对象的错误消息部分。

另外值得一提的是，我使用的是 Jackson 1.9.2 和 Jersey 1.13

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:33:31.297

如果您期望包含“错误”，则问题在于`@JsonIgnore`in `isError()`，没有任何其他注释。因此，添加`@JsonProperty`旁边`getError()`，它应该被包括在内。您可能还需要将其添加到`setError()`.

这里的问题是杰克逊认为`@JsonIgnore`这里的意思是“忽略属性'错误'”，而您可能只是希望忽略那个特定的访问器。

# ios - 使用 GCD 异步加载 UITableViewCell 图像

> ID：12311636
> 
> 赞同：15
> 
> 时间：2012-09-07T04:15:52.950
> 
> 标签：ios, uitableview, grand-central-dispatch

我目前正在尝试加载 Flickr 照片的 UITableView 列表（cs193p iOS Stanford，作业 5）。为避免 UI 阻塞事件，我已将每个单元格的缩略图下载推迟到不同的队列中（但请务必将 UI 更新回主队列中）。此代码不会异步加载图像，但会在我单击 UITableViewCell 行后添加缩略图。（见下面的截图）。知道我做错了什么吗？

PS：我已经查看了其他一些 stackoverflow 问题和 Apple 的 LazyTableImages 示例，但我仍然坚信这是实现预期结果的最干净的方法。

谢谢！

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Photo List Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell
    NSDictionary *photo = [self.photoList objectAtIndex:indexPath.row];

    if (photo != nil) {
        if ([[photo objectForKey:@"title"] length] > 0) {
            cell.textLabel.text = [photo objectForKey:@"title"];
        } else if ([[[photo objectForKey:@"description"] objectForKey:@"_content"] length] > 0) {
            cell.textLabel.text = [[photo objectForKey:@"description"] objectForKey:@"_content"];
        } else {
            cell.textLabel.text = @"Unknown";
        }
    }
    cell.imageView.image = [[UIImage alloc] initWithCIImage:nil];

    // Fetch using GCD
    dispatch_queue_t downloadThumbnailQueue = dispatch_queue_create("Get Photo Thumbnail", NULL);
    dispatch_async(downloadThumbnailQueue, ^{
        UIImage *image = [self getTopPlacePhotoThumbnail:photo];
        dispatch_async(dispatch_get_main_queue(), ^{
            if ([self.tableView.visibleCells containsObject:cell]) {
                [cell.imageView setImage:image];
            }
        });
    });
    dispatch_release(downloadThumbnailQueue);

    return cell;
} 
```

在单击一行之前 ![在单击一行之前](../Images/7ea5c76a210bd9f541aa1fd02c94d531.png)

选择行后 ![选择行后](../Images/48fa4fd18d548926ef4578fc988b57d8.png)

**更新：对于那些感兴趣的人，这是我使用的最终代码：**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  static NSString *CellIdentifier = @"Photo List Cell";
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

  // Configure the cell
  NSDictionary *photo = [self.photoList objectAtIndex:indexPath.row];

  if (photo != nil) {
    if ([[photo objectForKey:@"title"] length] > 0) {
        cell.textLabel.text = [photo objectForKey:@"title"];
    } else if ([[[photo objectForKey:@"description"] objectForKey:@"_content"] length] > 0) {
        cell.textLabel.text = [[photo objectForKey:@"description"] objectForKey:@"_content"];
    } else {
        cell.textLabel.text = @"Unknown";
    }
  }
  cell.imageView.image = [[UIImage alloc] initWithCIImage:nil];

  // Fetch using GCD
  dispatch_queue_t downloadThumbnailQueue = dispatch_queue_create("Get Photo Thumbnail", NULL);
  dispatch_async(downloadThumbnailQueue, ^{
    UIImage *image = [self getTopPlacePhotoThumbnail:photo];
    dispatch_async(dispatch_get_main_queue(), ^{
        UITableViewCell *cellToUpdate = [self.tableView cellForRowAtIndexPath:indexPath]; // create a copy of the cell to avoid keeping a strong pointer to "cell" since that one may have been reused by the time the block is ready to update it. 
        if (cellToUpdate != nil) {
            [cellToUpdate.imageView setImage:image];
            [cellToUpdate setNeedsLayout];
        }
    });
  });
  dispatch_release(downloadThumbnailQueue);

  return cell;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-07T04:18:25.047

`setNeedsLayout`设置缩略图后，您应该调用单元格。

来自苹果文档：

“当你想调整视图的子视图的布局时，在你的应用程序的主线程上调用这个方法。这个方法记下请求并立即返回。因为这个方法不强制立即更新，而是等待下一次更新循环，您可以使用它在更新任何视图之前使多个视图的布局无效。此行为允许您将所有布局更新合并到一个更新周期，这通常对性能更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T04:47:14.310

另一种解决方案（也是我用于该分配的解决方案）是在将 UIImage 分配给该 imageView 后，在单元格的 imageView 上调用 setNeedsDisplay。

所以基本上，我创建了一个名为 FlickrDownloader 的类，它封装了 FlickrFetcher 的功能（以及我的缓存代码）。FlickrDownloader 有这个方法：

```
(void)getImageForPhotoInfo:(NSDictionary *)photoInfo ofFormat:(FlickrPhotoFormat)format withCallback:(image_setter_callback_t)callback; 
```

这基本上是对 FlickrFetcher 相同函数的调用，但它添加了一个在完成下载照片时调用的回调。在更新 UITableViewCell 的 imageView 的情况下，回调如下所示：

```
image_setter_callback_t setImage = ^(UIImage *image){
    cell.imageView.image = image;
    [cell.imageView setNeedsDisplay];
}; 
```

# php - ExpressionEngine 不关闭 MySQL 和 Apache 连接

> ID：12311649
> 
> 赞同：3
> 
> 时间：2012-09-07T04:17:30.397
> 
> 标签：php, mysql, expressionengine

我今晚使用 ExpressionEngine 启动了一个客户端站点，它立即将 100 个可用的 MySQL 连接增加到最大，因此在可用连接数翻倍之后，它继续消耗所有可用连接。检查服务器后，它似乎也保留了打开的 Apache 连接。

所以我的问题是为什么要让这些连接保持打开状态，我能做些什么来解决它？否则，当网站加载时，网站会像糖蜜一样缓慢。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T07:31:02.017

mysql 连接很可能是副作用。我这么说主要是因为如果你看到大量的 apache 进程也在运行 EE，它会进入一个阶段，它已经开始打开与 MySQL 的连接，但正在等待 apache/php 端的某些东西完成并关闭联系。

您可能想在 EE 中打开模板调试，点击公共站点上加载缓慢的页面之一，但请确保您是登录的超级管理员。您应该看到 EE 为构建该页面所做的每个操作、花费的时间以及 php 内存使用量。您也许能够识别标签、第三方插件或导致 apache 端速度变慢的东西，这些东西也会导致 MySQL 中打开连接的副作用。

在查看时我应该开始的东西：显示完整的进程列表；在 mysql 中，列出的进程是否显示长时间运行的查询，或者它们全部或大部分都列为“睡眠”。如果睡觉，他们很可能会陷入上述情况。

在调用 RSS 提要等外部数据源、Twitter 等外部 API 等时也看到过这种情况，但同样可能是在 EE 模板端运行时间过长导致 EE 保持这些 mysql 连接打开直到 EE /php 终于完成并准备正确关闭连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:49:24.317

在 EE 控制面板中，转到**Admin → System Administration → Database Settings**，并确保**Persistent Database Connection**设置为**No**。

您还需要确保**/system/exoressionengine/config/config.php**文件`$config['pconnect']`中没有 for 行。

# android - 与另一个片段通信的片段接口

> ID：12311661
> 
> 赞同：3
> 
> 时间：2012-09-07T04:18:27.450
> 
> 标签：android, fragment

我已经参考了 2 次以上，并尽我所能理解 2 个片段之间的通信。借助此处上一个问题的帮助 + 2 个参考资料，我能够提出此代码。我必须在我的 FragB 中放入什么来检索用户在 ListFragment FragA 中所做的选择？

主要活动：

```
public class MainActivity extends Activity implements OnDataPass{
...

@Override
public void onDataPass(String data) {
    // TODO Auto-generated method stub

    FragA transaction1 = ((FragA) getFragmentManager().findFragmentByTag("ItemRoleList"));
    transaction1.dataPasser.onDataPass(data);

} 
```

}

这是FragA：

```
public class FragA extends ListFragment{

OnDataPass dataPasser;

public interface OnDataPass{
    public void onDataPass(String data);
}

@Override
public void onAttach(Activity a) {
    super.onAttach(a);

    // This makes sure that the container activity has implemented
    // the callback interface. If not, it throws an exception
    try {
        dataPasser = (OnDataPass) a;
    } catch (ClassCastException e) {
        throw new ClassCastException(a.toString()
                + " must implement OnHeadlineSelectedListener");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T04:55:49.280

这是我的理解。您在活动中有两个片段（A，B）。A 是一个列表片段。在 A 中选择一个项目时，您必须将一个字符串传递给 B。

`onListItemClick()`在您的片段 A 中首先覆盖

片段A：

```
public class FragmentA extends ListFragment{
    ...

    void onListItemClick(ListView l, View v, int position, long id){
        datapasser.onDatapass(data)//here pass the String
    }
} 
```

在您的活动的 onDataPass 方法中：

```
void onDataPass(String data){
    FragmentB dataUser = getFragmentB();//Your FragmentB object
    dataUser.use(data);
} 
```

片段 B：

```
public class FragmentB extends Fragment{
    ...

    void use(String data){
        //here use the data
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T06:17:43.373

我实现这一点的方式是使用观察者模式。伪代码如下：

**活动**

```
public myActivity extends Activity implements OnDataPass {
    Observable fragmentData;

    void onDataPass(String data) { fragmentData = data; }
} 
```

**片段 A**

```
...
datapasser.onDataPass(data);
... 
```

**片段 B**

```
public FragmentB extends Fragment implements Observer {

onCreate(...) {
    ...
    ((myActivity)getActivity()).fragmentData.addObserver(this);
    ...
}

update(Object data) {
   // Voila - you will arrive here whenever the data is updated
} 
```

希望这可以帮助...

# svn - 请建议带有本地机器编辑的 svn 工作流程

> ID：12311667
> 
> 赞同：2
> 
> 时间：2012-09-07T04:19:33.543
> 
> 标签：svn, version-control, workflow

我正在与一些有以下习惯的开发人员合作：

1.  在他们的本地机器上执行编辑（由于他们喜欢使用的 IDE）
2.  犯罪
3.  更新开发“服务器”
4.  测试
5.  重复

这可行，但对于正常的开发周期，它会导致大量微小的提交。问题是由于环境的原因，无法在本地机器上测试代码。因此它必须被“发送”到远程机器。

当然，我们可以只在远程服务器上进行编辑，但我正在寻找一种在本地机器上使用 IDE 的方法。

我尝试过使用支持 SCP 甚至 sshfs 的 IDE，但这都很笨拙。特别是当代码必须在远程机器上保存为不同的用户时。

我希望其他人遇到过这种情况并有更好的方法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:40:47.107

您可以尝试使用带有标志`rsync`的 ssh 或[robocopy](http://technet.microsoft.com/en-us/library/cc733145%28v=ws.10%29.aspx)`/MIR`（如果在 Windows 上）。只要每个开发人员在服务器上都有一个独特的区域，这可能会起作用：

1.  在本地执行编辑
2.  运行 rsync/robocopy 到服务器
3.  对更改感到满意时提交

如果每个人都在服务器上的公共区域上工作，那么这将不起作用，因为每个人的同步都会覆盖另一个人，所以 YMMV。

# zend-framework - 无法为 Zend_Form 下拉元素设置选定值

> ID：12311674
> 
> 赞同：3
> 
> 时间：2012-09-07T04:20:55.660
> 
> 标签：zend-framework, zend-form, zend-form-element, zend-form-select

在编辑表单中的所有字段时，除了下拉菜单外，我都无法找出问题所在。

这是我的表格

```
 $katModel = new Model_Kategoria();
        $kategorie = $katModel->getKategorie(0);

        $katList = new External_Form_Element_SelectAttribs('kategoria');
        $katList->setLabel('Kategoria: ');
        $katList->isRequired(true);
        if(isset($kategorie)) {
            foreach($kategorie as $k) {
                $katList->addOption($k['id'], $k['kategoria'], array('class' => 'level-' . $k['depth']));
            }
        }
        $this->addElement($katList); 
```

我正在使用自定义元素，所以我可以将类添加到“选项”

```
class External_Form_Element_SelectAttribs extends Zend_Form_Element {

public $options = array();

public $helper = 'selectAttribs';

/**
 * Adds a new <option>
 * @param string $value value (key) used internally
 * @param string $label label that is shown to the user
 * @param array $attribs additional attributes
 */
public function addOption ($value,$label = '',$attribs = array()) {
    $value = (string) $value;
    if (!empty($label)) $label = (string) $label;
    else $label = $value;
    $this->options[$value] = array(
        'value' => $value,
        'label' => $label
    ) + $attribs;
    return $this;
}
} 
```

在我的控制器的编辑操作中，我有

```
$zadanie = $zadanieModel->find($id)->current();
$zadanieForm->populate($zadanie->toArray()); 
```

它正确地填充了所有字段，除了那个

我试过了

```
$zadanieForm->kategoria->setValue(7);
$zadanieForm->setDefault('kategoria', 7); 
```

但它没有用。

现在我用我正在使用的自定义元素猜测它（在谷歌上找到了代码），但我不知道如何修改它，所以它对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:08:47.783

我使用以下代码创建数字从 1 到 10 的下拉列表。然后我选择 9 作为默认值：

```
$var = new Zend_Form_Element_Select('ElementName');

    for ($i = 1; $i <=10; $i++) {
        $priority->addMultiOption($i,$i);
    }

    $priority->setValue(9); 
```

# c# - ServiceStack 凭据身份验证端点给出 404

> ID：12311675
> 
> 赞同：3
> 
> 时间：2012-09-07T04:21:00.070
> 
> 标签：c#, asp.net, iis, servicestack

我在 IIS 7.5 上运行 ServiceStack 应用程序，自定义 CredentialsAuthProvider 服务于`/auth/credentials`.

它在 Visual Studio 中运行良好，但是当我将它安装在生产服务器（也是 IIS 7.5）上时，它对所有对`/auth/credentials`. 服务 REST 端点没有任何问题，如果我将提供者的超类更改为 BasicAuthProvider，身份验证工作，但我想使用表单而不是基本身份验证。我怎样才能让它正确地服务于身份验证端点？

这就是我的 Web.config 的样子：

```
<?xml version="1.0" encoding="UTF-8"?>

<configuration>
  <location path="auth">
    <system.web>
      <customErrors mode="Off"/>
      <httpHandlers>
        <add path="*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*"/>
      </httpHandlers>
    </system.web>
  </location>
  <location path="rest">
    <system.web>
      <httpHandlers>
        <add path="*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" />
      </httpHandlers>
    </system.web>

    <!-- Required for IIS 7.0 -->
    <system.webServer>
      <modules runAllManagedModulesForAllRequests="true" />
      <validation validateIntegratedModeConfiguration="false" />
      <handlers>
        <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true" />
      </handlers>
    </system.webServer>
  </location>

  <!-- Required for MONO -->
  <system.web>
    <httpHandlers>
      <add path="rest*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*"/>
      <add path="auth*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*"/>
    </httpHandlers>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
        <httpErrors errorMode="DetailedLocalOnly">
            <remove statusCode="403" subStatusCode="-1" />
            <error statusCode="403" prefixLanguageFilePath="" path="https://nearme.solarcity.com" responseMode="Redirect" />
        </httpErrors>
    <!--<modules runAllManagedModulesForAllRequests="true">
      <remove name="WebDAVModule" />
    </modules>-->
    <!--uncomment this to stop IIS 7.5 from blocking PUT and DELETE-->
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T04:39:47.183

您在配置中做出了错误的假设。

您只能将 ServiceStack 托管在**一个路径**上，该路径可以是根路径`*`，也可以是通常按照约定的自定义路径，也`/api`可以`/servicestack`是您选择的任何名称。HelloWorld 教程[显示了两个受支持选项的示例配置](http://www.servicestack.net/ServiceStack.Hello/#rootpath)。

通过使用 [Authenticate] 属性装饰 Request DTO 或 Service 来强制执行身份验证。如果您愿意，您还可以将属性添加到自定义基类，例如`AuthenticatedServiceBase`，这将确保所有子类也需要身份验证。

# android - 如何在 AlertDialog 中调用外部方法？

> ID：12311676
> 
> 赞同：0
> 
> 时间：2012-09-07T04:20:59.970
> 
> 标签：android

我有一个方法用于在 AppTools.java 中连接 HttpGet：

```
public class AppTools extends Activity {
public void connectToServerWithURL(String URL)
        throws ClientProtocolException, IOException, JSONException {
/* Start connect */
    new Thread() {
client = new DefaultHttpClient();
request = new HttpGet(URL);
response = client.execute(request);
reader = new BufferedReader(new InputStreamReader(response.getEntity()
            .getContent()));
builder = new StringBuilder();
    for (String s = reader.readLine(); s != null; s = reader.readLine()) {
        builder.append(s);
    }

if (builder != null) {
        /* Transfer to JSONArray */
        jsonTransfer = new JSONObject(builder.toString());
        systemConfigJSONArray = jsonTransfer.getJSONArray(config);
        runOnUiThread(performResult);
    }
       }.start();
} 
private Runnable performResult = new Runnable() {
    public void run() {
        closeProgressDialog();
        performResult(systemConfigJSONArray);
    }
};

/** Connect complete, interface for Override **/
public void performResult(JSONArray resultArray) {
} 
```

而且，在另一个 Activity 中扩展了 AppTools：

```
public class A extends AppTools { 
```

在活动 A 中有一个 AlertDialog 用于选择要连接的 url：

```
new AlertDialog.Builder(this).setView(aLayout)
.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int        which) {
                    /* Set command */
                    if (spinner_options.getSelectedItemPosition() == 0) {
                        connectToServerWithURL("http://...");
                    } else if (spinner_options
                            .getSelectedItemPosition() == 1) {
                        connectToServerWithURL("http://...");
                    }
                }
            }).setNegativeButton("Cancel", null).show(); 
```

里面的aLayout`.setView(aLayout)`有一个Spinner，所以setPositiveButton的onClick接口

将获得微调器的选定位置并执行该方法

但代码无法运行，LogCat 显示 AlertController$ButtonHandler 错误

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T04:49:58.210

```
//Define String before OnCreate() method

String url;

new AlertDialog.Builder(this).setView(aLayout)
.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int        which) {
                    /* Set command */
                    if (spinner_options.getSelectedItemPosition() == 0) {
                        url="http://...";
                         new YourAsyncTask().execute();
                      //  connectToServerWithURL("http://...");

                    } else if (spinner_options
                            .getSelectedItemPosition() == 1) {
                         url="http://...";
                         new YourAsyncTask().execute();
                       // connectToServerWithURL("http://...");
                    }
                }
            }).setNegativeButton("Cancel", null).show();

 class YourAsyncTask extends AsyncTask<Void, Void, Void>
    {

        private ProgressDialog progressDialog;

        @Override
        protected void onPreExecute()
        {
            //show your dialog here
            progressDialog = ProgressDialog.show(yourActivity.this,"Please wait...", "Loading  ...", true);
        }

        @Override
        protected Void doInBackground(Void... params)
        {        
            //make your request here - it will run in a different thread
            try
            {

               connectToServerWithURL(url);  

            }
            catch (Exception e)
            {
                // TODO: handle exception
            }

            return null;
        }

        @Override
        protected void onPostExecute(Void result)
        {

                progressDialog.dismiss();

        } 
```

# android - 如何在 TabPageIndicator 中获取选项卡的图标

> ID：12311677
> 
> 赞同：0
> 
> 时间：2012-09-07T04:21:06.153
> 
> 标签：android

有没有办法`TabPageIndicator`用标签图标创建。现在它只是文本。

我有一个要求，我必须`TabPageIndicator`使用选项卡的图标而不是文本来实现。

任何有用的链接或想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T04:24:21.787

```
TabSpec spec1 = tabHost.newTabSpec("Accounts");
    spec1.setIndicator(createTabView(tabHost.getContext(), "Accounts", R.drawable.tab_home));
    Intent inte = new Intent(TabsActivity.this, AccountsActivity.class);
    inte.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    spec1.setContent(inte); 
```

# android - Android：新通知到达时显示/隐藏状态栏

> ID：12311690
> 
> 赞同：0
> 
> 时间：2012-09-07T04:22:04.567
> 
> 标签：android, android-notifications, android-notification-bar

我的应用程序应该以全屏模式运行。当新项目从我们的服务器到达我的应用程序时，我还必须显示通知栏。我在 BroadcastReceiver 类中编写通知编码。我想在 MainActivity 中做出决定，例如仅在收到新通知时才显示状态栏，否则隐藏状态栏。当应用程序在前台时，一切都完成了。

通知编码：

```
Intent scheduledIntent = new Intent(context,Activity.class);

PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, scheduledIntent, 0);

                nm = (NotificationManager) context
                        .getSystemService(Context.NOTIFICATION_SERVICE);
                CharSequence from = "From address";
                CharSequence message = "New Orders received";
                Notification notif = new Notification(R.drawable.icon,"Hai", System.currentTimeMillis());
                notif.setLatestEventInfo(context, from, message, pendingIntent);
                notif.flags |= Notification.FLAG_AUTO_CANCEL;
                nm.notify(uniqueID, notif);
                notif.ledOnMS = 500;
                notif.ledOffMS = 500; 
```

通过此代码收到通知。但状态栏始终可见。没有收到通知时我需要隐藏。请为我提供正确的方法来做到这一点。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T04:29:45.043

在 OnCreate() 方法中，你必须写这个：

```
 AppPreferences prefs = new AppPreferences(PresentChatActivity.this);
             boolean notify_checkbox = prefs.getNotifyState();

    Notification(message.getBody(),fromName, name); 
```

然后，在 OnCreate() 之外，编写这个函数

```
 protected void Notification(String body, String fromName, String Notificationmsg) {

    NotificationManager notificationManager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);      

    String tickerText = getString(R.string.app_name, body);
    Notification notif = new Notification(R.drawable.ic_launcher, tickerText,
            System.currentTimeMillis());

    Intent notificationIntent = new Intent(this, PresentChatActivity.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

     notif.setLatestEventInfo(PresentChatActivity.this,Notificationmsg, message, pendingIntent);
     notif.setLatestEventInfo(getApplicationContext(), fromName, body,pendingIntent );  
     notificationManager.notify(10001, notif);
     } 
```

# c# - 使用快捷键显示 Windows 窗体

> ID：12311698
> 
> 赞同：1
> 
> 时间：2012-09-07T04:23:34.483
> 
> 标签：c#, .net, winforms, forms

我正在.Net 中创建一个 Windows 窗体应用程序。我的要求是当我按下“shift+alt+h”时，表单应该是隐藏的，当我按下“shift+alt+s”时，表单应该是可见的。
我可以隐藏窗口但无法显示请建议我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:44:40.993

您的问题是，一旦您隐藏了应用程序的窗口，它就无法再接收正常的按键事件。要在您的窗口被停用后侦听应该重新激活您的窗口的组合键，您将需要使用全局键盘挂钩。我会[在 CodePlex 上查看 C# 中的 Application and Global Mouse and Keyboard Hooks .Net 库](http://globalmousekeyhook.codeplex.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-13T12:01:29.687

你可以通过使用表单`KeyDown`事件来做到这一点

```
 private void YourForm_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.Control && e.Alt && e.KeyCode == Keys.H)
            {
                this.Hide();
            }
           else if (e.Control && e.Alt && e.KeyCode == Keys.S)
            {
                this.Show();
            } 
```

前提是这个表格是MDI表格中的子表格。

# assembly - 8086 ASM：Turbodebugger 打开文本文件，不能正常执行

> ID：12311706
> 
> 赞同：1
> 
> 时间：2012-09-07T04:24:30.757
> 
> 标签：assembly, x86, dos, x86-16, tasm

我正在处理的 ASM 任务遇到了这个小问题。它就像一个魅力......当我使用 TD 时。由于我对大会真的很陌生，我真的找不到问题所在。

我需要在屏幕上打印 .txt 文件中每个 ASCII 码的字符数（多少个 a，多少个 b，等等）。我首先使用 int 21h/3dh 打开文件以创建句柄，然后缓冲一些字节，处理它们，并缓冲下一部分直到到达文件末尾。正如我所说，当我使用 TurboDebugger 运行它时，它运行良好。但是，当我简单地从命令行执行它时，它甚至不会创建文件句柄。它在3dh中断后设置CF，这意味着错误。

我真的真的认为我没有做我需要做的事情，我会很感激这方面的帮助。谢谢！顺便说一句，我正在使用 TASM 进行编译。我不认为发布我的一段代码会有帮助，但如果你不这么认为，我会很乐意修改帖子。

这是整个代码，对西班牙语的评论感到抱歉

```
NLCR       macro
           mov dl, 0dh      ;Caracter a imprimir a dl
           mov ah, 02h      ;Preparo la impresion de un caracter
           int 21h          ;Ejecuto
           mov dl, 0ah      ;Caracter a imprimir a dl
           mov ah, 02h      ;Preparo la impresion de un caracter
           int 21h          ;Ejecuto
           endm

 SData Segment para 'Data'
            msgerrorab  db  "Error al abrir el archivo.$"
            msgerrorca  db  "Error al cargar el archivo.$"
            msgnombre   db  "Ingrese el nombre del archivo a abrir: $"
            msgnoexiste db  "Error: el archivo no existe.$"
            msgimprimir db  "=========  Caracter  ==========  Cantidad  =======",10,13,"$"
            msglinea1   db "===           $"
            caracter    db  0
            msglinea2   db  "   ==========     $"
            cuantos     dw  0
            msglinea3   db  "==========",10,13,"$"
            msgtecla    db  "Presione una tecla para mostrar mas...$"
            noarchivo   db  "$$"
            nombre      db  20 Dup(?)
            buffer      db  4096 Dup(4)
            handle      dw  0
            caracteres  dw  255 Dup(0)
            cantidad    dw  0
            eof         db  0
            bytesinv    db  10 dup("$")
            bytes       db  10 dup("$") 
            contador    db  0

SData EndS

pila segment stack 'stack'
  dw 256 dup (?) 
pila ends

CSeg Segment para public 'Code'
  Begin:
       Assume CS:CSeg, DS:SData,SS:pila 

  LeeChar Proc                  ;Procedure para leer un caracter y guardarlo. Lo salva en AL
          xor ax,ax             ;Limpia el ax para guardar el resultado
          mov ah, 08h           ;Prepara el servicio para leer un caracter
          int 21h               ;Lo ejecuta
          ret                   ;Retorna
  LeeChar endP

  ImpChar Proc                  ;Similar, pero imprime un caracter
          xor ax,ax             ;Limpia el ax para guardar el resultado
          mov ah,02h            ;Prepara el servicio para imprimir un caracter
          int 21h               ;Lo ejecuta
          ret                   ;Retorna
  ImpChar endP

ImpStr Proc                 ;Similar, pero imprime un caracter
          xor ax,ax             ;Limpia el ax para guardar el resultado
          mov ah,09h            ;Prepara el servicio para imprimir un caracter
          int 21h               ;Lo ejecuta
          ret                   ;Retorna
ImpStr endP

ImpNum     Proc                 ;el numero en ax, el bx en 000A, dx en 0, y el di en 0.
hexadec:                        ;Con esto se pasa "a decimal", es decir convierte los caracteres a numeros para ser impresos.
           div bx               ;Divido por 10 y consigo en DL el numero de mas a la derecha
           add dx, 30h          ;Sumo 48 para pasarlo a caracter. EL MODULO QUEDA EN DX
           mov bytesinv[di], dl ;Lo guardo en el vector
           xor dx,dx            ;Limpio para volverlo a hacer
           inc di               ;Aumento el indice del vector
           cmp ax,0             ;Si ya no queda nada
           je resfinal          ;Brinco al resultado final
           jmp hexadec          ;Si todavia queda, hago el proceso de division de nuevo

resfinal:                       ;Inversion de los caracteres
           xor si,si
           mov al, bytesinv[di-1] ;Estas dos lineas vuelcan el vector en otro, pero en el orden que corresponde
           mov bytes[si],al     ;Pasa al nuevo vector los caracteres
           dec di               ;Decrementa para mover el indice
           inc si               ;Aumento el indice del vector
           cmp di,0             ;Si ya no queda nada
           jne resfinal
           lea dx, bytes
           xor ax,ax
           mov ah,09h
           int 21h
           ret
ImpNum     endP
;;;;;;;;;;;;;;;;;;;;;;;          
;Comienzo del programa;
;;;;;;;;;;;;;;;;;;;;;;;

inicio:   mov ax,SData          ;Con estas dos lineas, pasamos la direccion del segmento SData y lo pasamos al ds
          mov ds,ax
          mov ax,pila
          mov ss,ax

leernombre:
          xor di,di
          xor ax,ax             ;Limpio AX
          xor dx,dx             ;Limpio DX
          lea dx, msgnombre     ;Cargo el offset del mensaje que pide el nombre
          mov ah,09h            ;Preparo el servicio de impresion
          int 21h               ;Ejecuto
          xor ax,ax             ;Limpio AX
          xor dx,dx             ;Limpio DX
          lea dx, noarchivo     ;Carga el offset de donde voy a guardar el nombre del archivo
          mov ah,0ah            ;Preparo el servicio de entrada buffereada
          int 21h               ;Ejecuto
          nlcr                  ;New line carriage return
          xor ah,ah             ;Limpio AH
          mov al, noarchivo[1]  ;En narchivo[1] esta la cantidad de caracteres que mide el nombre de archivo
          mov di,ax             ;Lo paso al DI para usarlo como indice
          mov noarchivo[di+2],0 ;La posicion di+2 del nombre contiene el Enter, o 0ah. Lo convierto en 0.
          mov ah,3dh            ;Preparo el servicio de creacion de handle para abrir el archivo
          mov al,0              ;En modo de solo lectura
          lea dx, nombre        ;Cargo el offset del nombre en DX, sin los bytes que sobran antes
          int 21h               ;Ejecuto. El handle queda en AX
          jc  errorabrir
          mov handle,ax         ;Lo paso a su variable correspondiente
          jmp cargarbuffer
errorabrir:
          lea dx, msgerrorab        ;Cargo el offset del mensaje que pide el nombre
          mov ah,09h                ;Preparo el servicio de impresion
          int 21h       
          jmp final
errorcarga:
          lea dx, msgerrorca        ;Cargo el offset del mensaje que pide el nombre
          mov ah,09h                ;Preparo el servicio de impresion
          int 21h       
          jmp final
cargarbuffer:
          xor ax,ax             ;Limpio AX
          xor bx,bx
          lea dx, buffer        ;Cargo el offset del buffer de texto
          mov ah,3fh            ;Preparo el servicio para mover el contenido del archivo
          mov bx,handle         ;Uso el handle que me genero la int 21/3dh
          mov cx,10         ;Voy a guardar 4096 caracteres a la vez
          int 21h
          jc errorcarga

          mov cantidad,ax       ;Cargo la cantidad de caracteres leidos
          cmp cantidad,4096     ;Si es menor a lo que le dije que cargara, llego al end of file
          jl  endoffile         ;
          xor si,si
          xor ax,ax
          mov bx,handle
          mov ah,3eh
          int 21h
          jmp procesarbuffer
endoffile:
          mov eof,1
          jmp procesarbuffer

procesarbuffer:
          xor bx,bx
          xor ax,ax
          xor di,di
          xor dx,dx
          mov bl,2
          mov al,buffer[si]
          mul bl
          mov di,ax
          inc caracteres[di]
          inc si
          cmp si,cantidad
          jne procesarbuffer
          cmp eof,1
          je  imprimir
          jmp cargarbuffer

imprimir:
          xor di,di
          xor dx,dx
          xor ax,ax
          xor bx,bx

          mov di,0
          mov si,0
          lea dx, msgimprimir
          mov ah,09h
          int 21h

    linea:    cmp caracteres[di],0
          je  noimprime
          inc contador
          mov ax,si
          mov caracter,al
          lea dx, msglinea1
          mov ah,09h
          int 21h
          mov dl,caracter
          xor ax,ax
          mov ah,02h
          int 21h
          lea dx, msglinea2
          xor ax,ax
          mov ah,09h
          int 21h
          push di
          push si
          mov ax, caracteres[di]
          mov bx,10
          xor dx,dx
          xor di,di
          call ImpNum
          pop si
          pop di
          inc di
          inc di
          inc si
          nlcr
          cmp si,254
          je final
          cmp contador,20
          je  pidetecla
          jmp linea

    noimprime:
          inc di
          inc di
          inc si
          cmp si,254
          je final
          jmp linea

    pidetecla:
          lea dx, msgtecla
          xor ax,ax
          mov ah,09h
          int 21h          
          xor ax,ax
          mov ah,08h
          int 21h
          nlcr
          jmp linea

    final:
           xor ax,ax            ;Limpia el al y prepara el ah para la salida.
           mov ax,4c00h         ;Servicio AH=4c int 21h para salir del programa.
           int 21h              ;Llamada al DOS. Termine el programa.
    CSeg EndS                       ;Fin del segmento de código.
    End inicio                  ;Fin del programa la etiqueta al final dice en que punto debe comenzar el programa. 
```

貌似中断返回的错误码是5，意思是访问被拒绝……会不会是路径文件的原因？？该文件位于我正在编译它的同一文件夹中，它是 F:\dos\tasm\a.txt 。顺便说一句，我正在使用 DosBox。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T18:43:27.630

我发现了一些错误并修复了它们。请参阅包含`;;;;`更改和注释的行。我不确定问题到底出在哪里。它现在在这里工作。你能试试吗？

```
NLCR macro
        mov dl, 0dh             ;Caracter a imprimir a dl
        mov ah, 02h             ;Preparo la impresion de un caracter
        int 21h                 ;Ejecuto
        mov dl, 0ah             ;Caracter a imprimir a dl
        mov ah, 02h             ;Preparo la impresion de un caracter
        int 21h                 ;Ejecuto
endm

SData Segment para 'Data'

msgerrorab      db "Error al abrir el archivo.$"
msgerrorca      db "Error al cargar el archivo.$"
msgnombre       db "Ingrese el nombre del archivo a abrir: $"
msgnoexiste     db "Error: el archivo no existe.$"
msgimprimir     db "=========  Caracter  ==========  Cantidad  =======",10,13,"$"
msglinea1       db "===           $"
caracter        db 0
msglinea2       db "   ==========     $"
cuantos         dw 0
msglinea3       db "==========",10,13,"$"
msgtecla        db "Presione una tecla para mostrar mas...$"
noarchivo       db buffer - nombre - 1, 0 ;;;; "$$"
;;;; You must initialize the input buffer for function 2 (the max len, at least)
nombre          db 20 Dup(?)
buffer          db 4096 Dup(4)
handle          dw 0
caracteres      dw 256 Dup(0) ;;;; 255 Dup(0)
;;;; You have 256 possible chars, not 255, with 255 you can overflow into "cantidad"
cantidad        dw 0
eof             db 0
bytesinv        db 10 dup("$")
bytes           db 10 dup("$")
contador        db 0

SData EndS

pila segment stack 'stack'
  dw 256 dup (?)
pila ends

CSeg Segment para public 'Code'
Begin:
        Assume CS:CSeg, DS:SData, SS:pila

LeeChar Proc                    ;Procedure para leer un caracter y guardarlo. Lo salva en AL
        xor ax, ax              ;Limpia el ax para guardar el resultado
        mov ah, 08h             ;Prepara el servicio para leer un caracter
        int 21h                 ;Lo ejecuta
        ret                     ;Retorna
LeeChar endP

ImpChar Proc                    ;Similar, pero imprime un caracter
        xor ax, ax              ;Limpia el ax para guardar el resultado
        mov ah, 02h             ;Prepara el servicio para imprimir un caracter
        int 21h                 ;Lo ejecuta
        ret                     ;Retorna
ImpChar endP

ImpStr Proc                     ;Similar, pero imprime un caracter
        xor ax, ax              ;Limpia el ax para guardar el resultado
        mov ah, 09h             ;Prepara el servicio para imprimir un caracter
        int 21h                 ;Lo ejecuta
        ret                     ;Retorna
ImpStr endP

ImpNum Proc                     ;el numero en ax, el bx en 000A, dx en 0, y el di en 0.
hexadec:                        ;Con esto se pasa "a decimal", es decir convierte los caracteres a numeros para ser impresos.
        div bx                  ;Divido por 10 y consigo en DL el numero de mas a la derecha
        add dx, 30h             ;Sumo 48 para pasarlo a caracter. EL MODULO QUEDA EN DX
        mov bytesinv[di], dl    ;Lo guardo en el vector
        xor dx, dx              ;Limpio para volverlo a hacer
        inc di                  ;Aumento el indice del vector
        cmp ax, 0               ;Si ya no queda nada
        je resfinal             ;Brinco al resultado final
        jmp hexadec             ;Si todavia queda, hago el proceso de division de nuevo

resfinal:                       ;Inversion de los caracteres
        xor si, si
resfinal2: ;;;;
        mov al, bytesinv[di-1]  ;Estas dos lineas vuelcan el vector en otro, pero en el orden que corresponde
        mov bytes[si], al       ;Pasa al nuevo vector los caracteres
        dec di                  ;Decrementa para mover el indice
        inc si                  ;Aumento el indice del vector
        cmp di, 0               ;Si ya no queda nada
        jne resfinal2 ;;;; resfinal
;;;; You don't want to be storing all digits at 'bytes[si=0]', overwriting each other
        mov bytes[si], "$"      ;;;;
;;;; You must terminate the string with '$' for function 9, you don't want garbage
        lea dx, bytes
        xor ax, ax
        mov ah, 09h
        int 21h
        ret
ImpNum endP

;;;;;;;;;;;;;;;;;;;;;;;
;Comienzo del programa;
;;;;;;;;;;;;;;;;;;;;;;;

inicio:
        mov ax, SData           ;Con estas dos lineas, pasamos la direccion del segmento SData y lo pasamos al ds
        mov ds, ax
;;;;        mov ax, pila
;;;;        mov ss, ax
;;;; .EXEs set up SS:SP for you!

leernombre:
        xor di, di
        xor ax, ax              ;Limpio AX
        xor dx, dx              ;Limpio DX
        lea dx, msgnombre       ;Cargo el offset del mensaje que pide el nombre
        mov ah, 09h             ;Preparo el servicio de impresion
        int 21h                 ;Ejecuto
        xor ax, ax              ;Limpio AX
        xor dx, dx              ;Limpio DX
        lea dx, noarchivo       ;Carga el offset de donde voy a guardar el nombre del archivo
        mov ah, 0ah             ;Preparo el servicio de entrada buffereada
        int 21h                 ;Ejecuto
        nlcr                    ;New line carriage return
        xor ah, ah              ;Limpio AH
        mov al, noarchivo[1]    ;En narchivo[1] esta la cantidad de caracteres que mide el nombre de archivo
        mov di, ax              ;Lo paso al DI para usarlo como indice
        mov noarchivo[di+2],0   ;La posicion di+2 del nombre contiene el Enter, o 0ah. Lo convierto en 0.
        mov ah, 3dh             ;Preparo el servicio de creacion de handle para abrir el archivo
        mov al, 0               ;En modo de solo lectura
        lea dx, nombre          ;Cargo el offset del nombre en DX, sin los bytes que sobran antes
        int 21h                 ;Ejecuto. El handle queda en AX
        jc  errorabrir
        mov handle, ax          ;Lo paso a su variable correspondiente
        jmp cargarbuffer

errorabrir:
        lea dx, msgerrorab      ;Cargo el offset del mensaje que pide el nombre
        mov ah, 09h             ;Preparo el servicio de impresion
        int 21h
        jmp final

errorcarga:
        lea dx, msgerrorca      ;Cargo el offset del mensaje que pide el nombre
        mov ah, 09h             ;Preparo el servicio de impresion
        int 21h
        jmp final

cargarbuffer:
        xor ax, ax              ;Limpio AX
        xor bx, bx
        lea dx, buffer          ;Cargo el offset del buffer de texto
        mov ah, 3fh             ;Preparo el servicio para mover el contenido del archivo
        mov bx, handle          ;Uso el handle que me genero la int 21/3dh
        mov cx, 4096 ;;;; 10              ;Voy a guardar 4096 caracteres a la vez
;;;; You wanted 4096 and implemented logic for 4096, so use 4096.
        int 21h
        jc errorcarga

        mov cantidad, ax        ;Cargo la cantidad de caracteres leidos
        cmp cantidad, 4096      ;Si es menor a lo que le dije que cargara, llego al end of file
        jl  endoffile           ;
        xor si, si
;;;;        xor ax, ax
;;;;        mov bx, handle
;;;;        mov ah, 3eh
;;;;        int 21h
;;;; You had the condition for file closing wrong
        jmp procesarbuffer

endoffile:
        xor si, si              ;;;;
        xor ax, ax              ;;;;
        mov bx, handle          ;;;;
        mov ah, 3eh             ;;;;
        int 21h                 ;;;;
;;;; You had the condition for file closing wrong

        mov eof, 1

        cmp cantidad, 0         ;;;;
        je  imprimir            ;;;;
;;;; The original code at 'procesarbuffer' wouldn't work with 'cantidad'=0

        jmp procesarbuffer

procesarbuffer:
        xor bx, bx
        xor ax, ax
        xor di, di
        xor dx, dx
        mov bl, 2
        mov al, buffer[si]
        mul bl
        mov di, ax
        inc caracteres[di]
        inc si
        cmp si, cantidad
        jne procesarbuffer
        cmp eof, 1
        je  imprimir
        jmp cargarbuffer

imprimir:
        xor di, di
        xor dx, dx
        xor ax, ax
        xor bx, bx

        mov di, 0
        mov si, 0
        lea dx, msgimprimir
        mov ah, 09h
        int 21h

linea:        
        cmp caracteres[di], 0
        je  noimprime
        inc contador
        mov ax, si
        mov caracter, al
        lea dx, msglinea1
        mov ah, 09h
        int 21h
        mov dl, caracter
        xor ax, ax
        mov ah, 02h
        int 21h
        lea dx, msglinea2
        xor ax, ax
        mov ah, 09h
        int 21h
        push di
        push si
        mov ax, caracteres[di]
        mov bx, 10
        xor dx, dx
        xor di, di
        call ImpNum
        pop si
        pop di
        inc di
        inc di
        inc si
        nlcr
        cmp si, 254
        je final
        cmp contador, 20
        je  pidetecla
        jmp linea

noimprime:
        inc di
        inc di
        inc si
        cmp si, 254
        je final
        jmp linea

pidetecla:
        mov contador, 0 ;;;;
;;;; You want to wait for a key after each 20 lines, not just after the first 20
        lea dx, msgtecla
        xor ax, ax
        mov ah, 09h
        int 21h
        xor ax, ax
        mov ah, 08h
        int 21h
        nlcr
        jmp linea

final:
        xor ax, ax              ;Limpia el al y prepara el ah para la salida.
        mov ax, 4c00h           ;Servicio AH=4c int 21h para salir del programa.
        int 21h                 ;Llamada al DOS. Termine el programa.

CSeg EndS                       ;Fin del segmento de codigo.

End inicio                      ;Fin del programa la etiqueta al final dice en que punto debe comenzar el programa. 
```

# python - 这个“返回 unicode（self.creator）+”-“+self.title”在 Django 中有什么作用？

> ID：12311708
> 
> 赞同：2
> 
> 时间：2012-09-07T04:24:37.903
> 
> 标签：python, django, forum

我正在关注关于使用 Django/Python 创建论坛的 lightbird 教程。这是创建`Thread`模型的代码。

```
class Thread(models.Model):
    title = models.CharField(max_length=100)
    created = models.DateTimeField(auto_now_add=True)
    creator = models.ForeignKey(User, blank=True, null=True)
    modified = models.DateTimeField(auto_now=True)
    forum = models.ForeignKey(Forum)

    def __unicode__(self):
        return unicode(self.creator) + " - " + self.title 
```

还有一个`Post`模型：

```
class Post(models.Model):
    title = models.CharField(max_length=60)
    created = models.DateTimeField(auto_now_add=True)
    creator = models.ForeignKey(User, blank=True, null=True)
    thread = models.ForeignKey(Thread)
    body = models.TextField(max_length=10000)

    def __unicode__(self):
        return u"%s - %s - %s" % (self.creator, self.thread, self.title)

    def short(self):
        return u"%s - %s\n%s" % (self.creator, self.title, self.created.strftime("%b %d, %I:%M %p"))
    short.allow_tags = True 
```

我很难理解**unicode**函数后的代码！在以非常简单的形式创建模型时，我一直在使用**unicode ，例如：**

```
class Post(models.Model):
    title = models.CharField(max_length=100)

    def __unicode__(self):
        return self.title 
```

我理解这一点，但不理解上述模型中的代码。有人可以向我解释一下吗。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T04:28:07.527

```
 unicode(self.creator) +\ #will call the __unicode__ method of the User class
 ' - ' +\ # will add a dash
 self.title #will add the title which is a string 
```

然后是第二个

```
 "%s"%some_var #will convert some_var to a string (call __str__ usually...may fall back on __unicode__ or something) 
```

所以

```
return u"%s - %s\n%s" % (self.creator, self.title, self.created.strftime("%b %d, %I:%M %p")) 
```

将为创建者调用 User 类上的`__str__`（或可能）函数`__unicode__`

然后它添加一个破折号和标题

`\n`是结束线

并将`strftime`时间戳转换为英文“MonthAbbrv. Day, 24Hr:Minutes”

# r - 在多个数据框列中重新编码 NA

> ID：12311710
> 
> 赞同：5
> 
> 时间：2012-09-07T04:24:54.293
> 
> 标签：r

我在一个数据框中有多个整数列，所有的 NA 都需要重新编码为 0。

```
df1 <- as.data.frame(sapply(paste(sample(letters,50,T),sample(letters,10), sep=""), function(x) {sample(c(NA,0:5),10,T)} ))
df2 <- as.data.frame(sapply(paste(sample(letters,5,T),sample(letters,10,T), sep=""), function(x) {sample(letters[1:5],10,T)} ))
df <- cbind(df2,df1) 
```

产生这样的输出......（仅显示 55 列的前几列）

![在此处输入图像描述](../Images/3ef49fba0a5b23c2aee00d5abd3d9277.png)

我可以像`df$col[is.na(df$col)] <- 0`每列一样手动将 NA 重新编码为 0，但是鉴于列太多，将其全部输入需要一段时间。

**如何将所有这些 NA 重新编码为 0 一行或三行？**

（我意识到我可以融化整数列，然后重新编码一个融化的列，但我宁愿在基数 R 中这样做）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T04:26:47.117

你非常接近：

```
df[is.na(df)] <- 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T04:59:41.147

使用`plyr`'s`colwise`元函数使这很容易：

```
dfZ=colwise(function(x)ifelse(is.na(x),0,x))(df) 
```

# python - 使用函数对象作为字典键

> ID：12311711
> 
> 赞同：2
> 
> 时间：2012-09-07T04:25:02.100
> 
> 标签：python, function, caching, python-3.x, decorator

我使用函数对象作为字典键。我这样做是因为我需要缓存这些函数的结果。这大致是我正在使用的代码：

```
# module cache.py:
calculation_cache = {}
def cached(func):
  # func takes input as argument
  def new_function(input):
    try:
      result = calculation_cache[(func, input)]
    except KeyError:
      result = func(input)
      calculation_cache[(func, input)] = result
    return result
  return new_function

# module stuff.py
@cached
def func(s):
  # do something time-consuming to s
  # ...
  return result 
```

我可以使用`func.__module__ + func.__name__`而不是`func`，但如果`func`工作正常，我宁愿使用它，因为我担心可能的名称冲突（例如，对于`lambda`函数或嵌套函数或被另一个具有相同名称的函数替换的函数等）

这似乎工作正常，但我怀疑这可能会在一些难以测试的情况下导致问题。

例如，我担心某个函数会以某种方式被删除，而另一个函数会重用其内存空间。在这种情况下，我的缓存将无效，但它不会知道。这是一个有效的担忧吗？如果是这样，有什么办法可以解决吗？

可以删除函数吗？重新加载模块是否会将函数移动到新地址（从而更改其哈希值，并为新函数释放旧内存地址）？有人（出于某种奇怪的原因）可以简单地删除模块中定义的函数（再次使内存可用于新函数）吗？

如果仅使用 明确定义的函数执行此操作是安全的`def`，那么我可以禁止使用`cached`except 作为装饰器（我不知道如何强制执行它，但我可以在文档字符串中记录它`cached`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T04:30:47.537

我不确定我能否解决您上述所有问题，但我可以解决其中的一个问题——

我看不出一个函数不能被垃圾收集的任何原因。但是，由于您的函数是字典中的键，只要该字典存在，您的函数的引用计数就永远不会达到零，并且不会受到垃圾回收的影响。

但是，我不知道重新加载模块，这似乎是一个极端情况，您实际上不需要担心。模块并不是真的要重新加载......在某些情况下您*可以*这样做的事实主要是为了在交互式终端中进行调试，而不是用于任何实际代码......（据我所知反正 ...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T04:53:41.270

您的代码应该可以工作。就像其他人说的那样，由于函数对象仍然被字典引用，它不会被垃圾收集。该功能可以被删除或模块重新加载。这意味着`func`标签将引用新版本的函数对象（或不引用）。但是即使不再引用旧的函数对象，它仍然会在内存中`func`。您的字典将为旧功能和新功能提供单独的条目，这可能对您更有效，因为这意味着您不会获得附加到旧功能的陈旧结果。您甚至可以使用您的字典作为后门来检索旧版本的函数。只需枚举calculation_cache.keys() 即可将其取回。

# android - 如何将 android:inputType="phone" 从 java 更改为 android:inputType="textEmailAddress"？

> ID：12311716
> 
> 赞同：3
> 
> 时间：2012-09-07T04:25:23.987
> 
> 标签：android

我是 android 的初学者，需要您的建议：

**1.**应用程序即将使用两个单选按钮（SMS 或电子邮件）发送消息（短信或电子邮件）。

**2.**启动时，SMS 单选按钮将被选中，并且联系人/接收者的 EditText 处于打开状态`android:inputType="phone"`

**3.**如果我单击 EMAIL 单选按钮，我希望将 EditText 更改为`android:inputType="textEmailAddress"`

我怎样才能从 MainActivity.java 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:27:57.307

您可以使用以下方法做到这一点：

```
et.setInputType(InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-30T09:23:30.380

试试这个，它可能对你有帮助

```
editText.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T04:31:09.550

你可以`setInputType`为你的`EditText`.

尝试

```
edittext.setInputType(InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS); 
```

了解更多信息[`click here`](http://developer.android.com/reference/android/text/InputType.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T04:49:11.803

正如其他人所说的改变输入类型的函数是 setInputType 函数，你可以如何使用它有几种方法。

1.  从代码创建一个按钮侦听器。

    或者在您的元素中使用 onClick 选项。<-- 我个人将如何做，如下所示

IE

```
`<RadioButton android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:onClick="setInputTypeToSMS"
         android:text="SMS">`
`<RadioButton android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:onClick="setInputTypeToEmail"
         android:text="EMAIL">` 
```

然后在你的主要活动中

```
public class SomeActivity extends Activity{
    private EditText editText;
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        editText = (EditText)findViewById(R.id.editText);

    }
    public void setInputTypeToEmail(View view)
    {
       editText.setInputType(InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS);
    }
    public void setInputTypeToSMS(View view)
    {
       editText.setInputType(InputType.TYPE_CLASS_PHONE);
    }
} 
```

# java - Spring Security UserMap 已弃用，如何使用普通地图？

> ID：12311717
> 
> 赞同：1
> 
> 时间：2012-09-07T04:25:26.667
> 
> 标签：java, xml, spring, configuration, spring-security

Spring Security 3.0.5 在 Eclipse 中抛出以下警告：

`Class 'org.springframework.security.core.userdetails.memory.UserMap' is marked deprecated`

对于以下配置：

```
<security:authentication-manager>
    <security:authentication-provider>
        <security:user-service>
            <security:user name="john" password="john"
                authorities="ROLE_USER" />
            <security:user name="admin" password="admin"
                authorities="ROLE_USER, ROLE_ADMIN" />
            <security:user name="system" password="system"
                authorities="ROLE_USER, ROLE_ADMIN" />
            <security:user name="guest" password="guest"
                authorities="ROLE_GUEST" />
        </security:user-service>
    </security:authentication-provider>
</security:authentication-manager> 
```

[Javadocs](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/core/userdetails/memory/UserMap.html)说，只需使用普通地图即可。但我不确定他们的意思是什么以及普通地图的去向？我对安全命名空间提供的“帮助”有点失望……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:06:04.290

我认为它已经在 3.1 中修复，因为`UserMap`在课堂上使用过，[在这个提交](https://github.com/SpringSource/spring-security/commit/f5859fabcf53857389cdd2dd4d31c9be6b7c4500#core/src/main/java/org/springframework/security/provisioning/InMemoryUserDetailsManager.java)`InMemoryDaoImpl`中被取代（包含在 3.1 中）。[`InMemoryUserDetailsManager`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/provisioning/InMemoryUserDetailsManager.html)

如果你可以升级 - 做它，如果不是 - 只是忽略警告（它是 STS 抱怨 Spring Security 内部毕竟工作正常）。

# php - 多维关联数组PHP之和

> ID：12311718
> 
> 赞同：1
> 
> 时间：2012-09-07T04:25:48.133
> 
> 标签：php, multidimensional-array, foreach, associative-array

```
Array 
( 
    [Sum_1] => Array 
                ( 
                    [0] => Array 
                        ( 
                            [e] => 1000001 
                            [u] => Test1 
                            [a] => 775.00 
                        ) 
                    [1] => Array 
                        ( 
                            [e] => 26 
                            [u] => Test2 
                            [a] => 555.00 
                        ) 
                ) 
    [Sum_2] => Array 
                ( 
                    [0] => Array 
                        ( 
                            [e] => 1000001 
                            [u] => Test1 
                            [a] => 110.00 
                        ) 
                ) 
    [Sum_3] => Array 
                ( 
                    [0] => Array 
                        ( 
                            [e] => 1000001 
                            [u] => Test1 
                            [a] => 444.00 
                        ) 
                ) 
) 
```

我想将上面的数组转换为下面的东西。我需要使用 foreach 还是 array_sum 可以这样做？

```
Array 
    ( 
        [Sum_1] => 1330.00
        [Sum_2] => 110.00
        [Sum_3] => 444.00
     ) 
```

（我想得到每个名为 Sum_1、Sum_2、Sum_3 的部分的元素 [a] 的总和）感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T04:32:47.667

你可以这样做：

```
$ret = array_map(function($val) {
  return array_sum(array_map(function($val) {
     return $val['a'];
  }, $val));
}, $array); 
```

在 php 5.4 之前：

```
function a_getter($val) {
    return $val['a'];
}
$ret = array_map(function($val) {
    return array_sum(array_map('a_getter', $val));
}, $array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T04:41:17.137

使用`foreach`循环你可以试试这个

```
$sums=array();
    foreach($ArrayOfSums as $Offset=>$ArrayOfResults){
        foreach($ArrayOfResults as $ResultOffset=>$Result){
            $sums[$Offset]+=$Result["a"];
        }
    } 
```

# asterisk - 无法检测星号中的按键

> ID：12311722
> 
> 赞同：0
> 
> 时间：2012-09-07T04:26:28.167
> 
> 标签：asterisk

我正在使用带有 confbridge 的星号 10，并在 confbridge 中为按键 1 设置了一个菜单选项。我正在使用 voipvoip sip 中继服务来拨打电话号码。问题有时是当用户按下 1 或任何键时，它不会被检测到（未执行为该 dtmf 定义的菜单选项）。这尤其发生在印度电话号码上。请这只是有时不是每次。

请帮助我，这是任何配置问题还是其他问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:31:35.683

在印度的 DTMF（或任何持续时间很短的 DTMF）的 10 分支中刚刚解决了一个错误。我很惊讶这会发生在 SIP 中继上，除非 DTMF 是带内的并且不是通过 INFO 请求或 RFC 2833 发送的。

您可能希望在此处应用该问题的补丁，看看它是否为您解决了问题。它是为 Asterisk 1.8 编写的，但您应该能够应用它：

[星号-19610](https://issues.asterisk.org/jira/browse/ASTERISK-19610)

或者，您可以直接从 Asterisk 10 分支获取修复此问题的提交的差异：

```
svn diff -c 372240 http://svn.asterisk.org/svn/asterisk/branches/10 
```

# ios - iPhone：- 如何向特定电话号码发送推送通知

> ID：12311724
> 
> 赞同：0
> 
> 时间：2012-09-07T04:26:33.580
> 
> 标签：ios, apple-push-notifications, messages

我在我的应用程序委托文件中使用了这些方法，并且能够在我的 iphone 上激活通知服务，但我的问题是，因为我想在我想要的时候向我的朋友 iphone 发送警报。为此，我想使用推送通知来自动更新他手机中的闹钟时间和消息。

* * *

```
 //in did finishlaunching

    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:
         (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)];

- (void)application:(UIApplication *)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken1 { 

    NSString *str = [NSString 
                     stringWithFormat:@"Device Token=%@",deviceToken1];
    NSLog(@"device......%@",str);

}

- (void)application:(UIApplication *)app didFailToRegisterForRemoteNotificationsWithError:(NSError *)err { 

    NSString *str = [NSString stringWithFormat: @"Error: %@", err];
    NSLog(@"device......%@",str);    

}

- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

    for (id key in userInfo) {
        NSLog(@"key: %@, value: %@", key, [userInfo objectForKey:key]);
    }    

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:56:44.673

而不是需要您的朋友注册他们的设备的推送通知。然后您需要确定哪个设备 ID 属于您的朋友。我建议的一个更简单的解决方案是简单地使用短信通知，这将允许您个性化您想要的任何电话号码。

```
-(IBAction) sendInAppSMS:(id) sender
{
    MFMessageComposeViewController *controller = [[[MFMessageComposeViewController alloc] init] autorelease];
    if([MFMessageComposeViewController canSendText])
    {
        controller.body = @"Hello! Time to get up!;
        controller.recipients = [NSArray arrayWithObjects:@"12345678", @"87654321", nil];
        controller.messageComposeDelegate = self;
        [self presentModalViewController:controller animated:YES];
    }
} 
```

来源：[http ://blog.mugunthkumar.com/coding/iphone-tutorial-how-to-send-in-app-sms/](http://blog.mugunthkumar.com/coding/iphone-tutorial-how-to-send-in-app-sms/)

注意：使用 SMS 可能更有用，因为如果个人的手机处于关机状态，他们将在手机打开后收到 SMS 消息。但是，如果个人的电话已关闭并且他们收到推送通知，则不能保证他们会收到它。如果需要他们接收消息，那么推送通知可能不是最佳解决方案。

# javascript - 使用 jquery 淡入然后淡出

> ID：12311727
> 
> 赞同：0
> 
> 时间：2012-09-07T04:26:56.437
> 
> 标签：javascript, jquery, html, css, animation

我现在才刚刚开始学习使用 jQuery，并且正在尝试淡入淡出图像。当我将鼠标悬停在图像上时，我想将图像淡化为一半不透明度。然后，只有在我移除图像的鼠标后，图像才会恢复为完全不透明。现在，我正在使用回调函数将图像淡入，但它是在淡出发生后立即执行的，而不是在我的鼠标离开图像时执行。有人对正在发生的事情有一些提示吗？

这是我的代码：

```
$(document).ready(function(){
  $("img").mouseover(function(event){
    $(this).fadeTo("fast", 0.5, function(){
      $(this).fadeTo("fast", 1.0)}
    );
  });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T04:33:02.500

试试这个

```
$(document).ready(function(){
    $("img").on('mouseover', function(event){
        $(this).fadeTo("fast", 0.5);
    }).on('mouseout', function(){
       $(this).fadeTo("fast", 1.0)    
    });
});​ 
```

[**演示**](http://jsfiddle.net/2uS8r/2/#update)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T04:33:27.987

您可以将两个事件与`on`. 我建议不要使用`hover`，因为它[即将被弃用](http://bugs.jquery.com/ticket/11731)。

```
$("img").on({
    mouseover: function() { $(this).fadeTo('fast', .5); },
    mouseout: function() { $(this).fadeTo('fast', 1); }
});​ 
```

[http://jsfiddle.net/gT4vC/](http://jsfiddle.net/gT4vC/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T04:32:20.830

我认为您在这里缺少班级或ID名称..

```
$("img").mouseover(function(event){ 
```

而不是在 $(".img").mouseover(function(event){

为鼠标悬停事件指定类或 id。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T04:32:25.837

用户`.hover()`函数，它接受两个参数，一个用于 mouseenter 事件，另一个用于 mouseleave 事件。

```
$(document).ready(function(){
    $("img").hover(function(event){
         $(this).fadeTo("fast", 0.5);
      },
      function() {
         $(this).fadeTo("fast", 1.0);
      });
}); 
```

[演示](http://jsfiddle.net/syaPr/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T04:32:30.147

试试这个：

```
$(document).ready(function() {
    $("img").mouseenter(function(event) {
        $(this).fadeTo("fast", 0.5);
    }).mouseleave(function() {
        $(this).fadeTo("fast", 1.0);
    });
});​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T04:35:15.520

演示：http: [//jsfiddle.net/DTzTH/](http://jsfiddle.net/DTzTH/)

```
$(document).ready(function () {
  $("img").hover(function () {
    $(this).fadeTo("fast", 0.5);
  }, function () {
    $(this).fadeTo("fast", 1.0);
  });
});​ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-07T04:35:33.103

这是你要找的吗？更改顶部的大写常量以获得所需效果的正确时间。

```
$(document).ready(function(){
    var FADEOUT_TIME = 500;
    var FADEIN_TIME = 500;
    $("img").on({
        mouseleave: function() {
            $(this).fadeTo(FADEIN_TIME, 1);
        },
        mouseenter: function() {
            $(this).stop().fadeTo(FADEOUT_TIME, 0.5);
        }
    });
}); 
```

# [**演示**](http://jsfiddle.net/Snowsickle/dTMNH/1/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-07T04:36:11.760

是的，你可以通过

```
$(document).ready(function(){
    $("img").on({
    mouseover: function() { $(this).fadeTo('fast', .8); },
    mouseout: function() { $(this).fadeTo('fast', 1); }
});
}); 
```

这是[js小提琴](http://jsfiddle.net/QwNaM/)

**更新**

或者你也可以使用 css 属性`opacity`

```
$(document).ready(function(){
    $("img").mouseover(function(){
       $('img').css('opacity','0.4');
    });

    $("img").mouseout(function(){
       $('img').css('opacity','1');
    })
}); 
```

因为这里是[js fiddle](http://jsfiddle.net/QwNaM/1/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-07T04:42:41.667

试试这个

```
$(document).ready(function(){
  $(".main").mouseenter(function(event){
      $(this).fadeTo("fast", 0.5).mouseleave(function(){
              $(this).fadeTo("fast", 1.0);
      });
  });
}); 
```

# android - Android SurfaceView, OnDraw 调用但显示不更新没有 invalidate()

> ID：12311731
> 
> 赞同：3
> 
> 时间：2012-09-07T04:27:18.697
> 
> 标签：android, multithreading, graphics, surfaceview, invalidation

我在遵循典型的 Android 图形流程时遇到了一些麻烦。有很多例子，但我的似乎不起作用。在我的主要活动中，我这样做：

```
super.onCreate(savedInstanceState);                           
setContentView(R.layout.activity_main); 
```

在我的资源文件中，我有 3 个覆盖 SurfaceView 的自定义类。在我的这些表面视图的构造函数中，我有这样的东西：

```
super(context, attrs);
getHolder().addCallback(this);
this.thread = new MyThread(getHolder(),this); 
```

在我的线程的运行方法中，我这样做（从我见过的许多示例中提取）：

```
Canvas c;
try {
    c = surfaceHolder.lockCanvas(null);
    synchronized (surfaceHolder) {
        panel.onDraw(c);
    }
} finally {
    if (c != null) {
    surfaceHolder.unlockCanvasAndPost(c);
} 
```

该线程在我的 SurfaceView 的“surfaceCreated”事件中启动。在 onDraw 我这样做：

```
public void onDraw(Canvas canvas) { 
    super.onDraw(canvas);
    <some drawing stuff here using canvas>
} 
```

当我运行时，线程确实在运行，并且我可以看到 onDraw 正在被调用（我在其中放置了 log print 命令），但是我的图形没有按预期更新。但是，如果我调用 this.invalidate()，图形会按照我的预期更新几次，直到我崩溃：

```
E/AndroidRuntime(748): android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 
```

根据我看到的示例，我意识到我不需要在 OnDraw 中调用 invalidate，但我这样做只是为了验证我的 onDraw 中的代码是否有效。所以，在我看来，如果没有 invalidate() 事件就会被调用，我的代码应该正确更新图形，但屏幕永远不会更新。我在主 Activity 如何实际决定它需要重新绘制它的孩子方面遗漏了一些东西。

任何想法将不胜感激。我花了一段时间试图从一些工作演示中复制东西，但我似乎被卡住了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-03T16:16:57.463

我已经遇到了同样的问题。由于找不到任何解决方案，我做了一种解决方法：创建一个`Bitmap`作为缓冲区并绘制到该位图。绘制完成后，将完整的位图绘制到视图本身。在 View 类中声明这些变量：

```
Canvas bmpCanvas;
Bitmap bmp; 
```

并在您的 onDraw() 方法中使用它，如下所示：

```
@Override
protected void onDraw(Canvas canvas) {

   if(bmp == null || bmpCanvas == null) {

       bmp = Bitmap.createBitmap(getWidth(), getHeight(), Bitmap.Config.ARGB_8888);
       bmpCanvas = new Canvas(bmp);
   }

   //do drawing-stuff here

   canvas.drawBitmap(bmp, 0, 0, p); //where p is a Paint-Object.
} 
```

现在，要更新视图/调用此方法，请使用您的视图中的一个`invalidate`或`postInvalidate()` `invalidate`一个，具体取决于您是在同一线程中还是在其他线程中调用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T05:05:43.383

你在 run() 中所做的事情会做你所做的任何事情 - 一次。您需要重复绘图过程。

一种方法是将所有内容放入`while`循环中

```
while(true){
    try {
        c = surfaceHolder.lockCanvas(null);
        synchronized (surfaceHolder) {
            panel.onDraw(c);
        }
    } finally {
        if (c != null) {
        surfaceHolder.unlockCanvasAndPost(c);
    }
} 
```

# c++ - C ++将位集写入二进制文件

> ID：12311735
> 
> 赞同：3
> 
> 时间：2012-09-07T04:27:39.503
> 
> 标签：c++, c, bit-manipulation, binaryfiles

希望这里有人可以提供帮助。我的问题如下：

我正在创建包含二进制数据的文件。每个文件的开头是一个二进制标头，其中包含有关文件内容的信息。文件头是固定大小的，52 字节。标头在标头内的特定字节偏移处具有特定信息，但是某些信息仅涵盖字节的一部分，例如 3 位。

例如：

> 字节 1-4 = 文件长度
> 
> 字节 5-8 = 标头长度
> 
> 字节 8-9 = 版本信息
> 
> 字节 10-13 = 文件创建时间戳
> 
> > 位 1-4 = 月 (1-12)
> > 
> > 位 5-9 = 日 (1-31)
> > 
> > 位 10-14 = 小时 (0-23)
> > 
> > 位 15-20 = 分钟 (0-59)
> > 
> > 位 21 = UTC 偏移方向
> > 
> > 位 22-26 = UTC 偏移小时
> > 
> > 位 27-32 = UTC 偏移分钟
> 
> ETC...

有些值是静态定义的，有些是在运行时确定的。我试图做的是创建标题的“映射”，定义属性必须消耗的位数，以及位表示的值。它们存储在 int 对的向量中，int_pair.first 是值，int_pair.second 是位数。然后我将提供的值（所有整数）转换为二进制格式，并将二进制符号插入到字符串流中。然后，我从二进制值的字符串表示创建一个位集，并将其写入文件。我的问题是字节没有以正确的顺序显示在输出文件中。

在我的示例中，我将省略获取值的方法并仅提供整数，并且为了简洁起见，我将截断标头中的一些信息（因此在此示例中，标头是 14 个字节，而不是 52 个字节），但这里是大致我在做什么：

```
#include <iostream>
#include <fstream>
#include <sstream>
#include <string>
#include <bitset>
#include <vector>
#include <algorithm>

int main ()
{
    vector<pair<int,int>> header_vec;

    header_vec.push_back(make_pair(9882719,32)); // file length
    header_vec.push_back(make_pair(52,32)); // header length
    header_vec.push_back(make_pair(6,3)); // high release identifier
    header_vec.push_back(make_pair(4,5)); // high version identifier
    header_vec.push_back(make_pair(6,3)); // low release identifier
    header_vec.push_back(make_pair(4,5)); // low version identifier

    // file open timestamp
    header_vec.push_back(make_pair(9,4));  // month
    header_vec.push_back(make_pair(6,5));  // day
    header_vec.push_back(make_pair(19,5)); // hour
    header_vec.push_back(make_pair(47,6)); // min
    header_vec.push_back(make_pair(0,1));  // utc direction
    header_vec.push_back(make_pair(0,5));  // utc offset hours
    header_vec.push_back(make_pair(0,6));  // utc offset minutes

    ostringstream oss;

    // convert each integer to binary representation
    for ( auto i : header_vec )
    {
        for (unsigned int j(i.second-1); j != -1; --j)
        {
            oss << ((i.first &(1 << j)) ? 1 : 0);
        }
    }

    // copy oss
    string str = oss.str();

    // create bitset
    bitset<112> header_bits(string(str.c_str()));

    // write bitset to file
    ofstream output("header.out", ios::out | ios::binary );
    output.write( reinterpret_cast<char *>(&header_bits), 14);
    output.close();

    return 0;

} 
```

现在，在大多数情况下，这种方法似乎有效，只是位被反转了。如果我查看 fm 中的输出文件，我希望看到：

```
File: header.out    (0x0e bytes)
Byte: 0x0

00    00 96 cc 5f 00 00 00 34 c4 c4 93 4e f0 00           ..._...4...N...O

      0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f      0123456789abcdef 
```

事实上，当我看到这个时：

```
File: header.out    (0x0e bytes)
Byte: 0x0

00    00 f0 4e 93 c4 c4 34 00 00 00 5f cc 96 00           @O...N...4..._..

      0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f      0123456789abcdef 
```

我试图在创建位集之前反转 str ，但这也不会产生所需的输出。

我想我对 bitset 的了解还不够，无法意识到为什么会发生这种情况。非常感谢任何和所有输入！另外，如果有不同的方法可以实现这一点，请分享！

在此先感谢... -J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:50:37.557

直接`bitset<>`将`reinterpret_cast<>`. 换句话说，即使数据被布置在一个不错的块中，你也不知道它是如何完成的。

如果我是你，我会编写一个更笨的函数来从位集中提取 8 位块，并使用普通访问运算符 [] 将它们作为字节写入文件。

至于另一种方法，当我想读/写二进制文件时，我通常做的是定义一个结构或一组结构，直接映射到文件的布局。

例如：

```
struct Timestamp
{
    int month:4;
    int day:5;
    int hour:5;
    int minute:6;
    int utcOffsetDirection:1;
    int utcOffsetHour:5;
    int utcOffsetMinute:5;

}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T04:55:33.413

为什么你不只使用[struct bitfield](http://msdn.microsoft.com/en-us/library/ewwyfdbe%28v=vs.71%29.aspx)，所以你只需读取和写入结构，而不用担心进行“位解析”。请注意内存对齐。确保添加一些填充以适合单词 bondaries

```
struct timestamp{
       unsigned mont:4;
       unsigned day:5;
       unsigned hour:5;
       unsigned minute:6;
       unsigned utc:1;
       unsigned utc_hour:5;
       unsigned utc_min:6   
};

struct header{
   int32_t file_length;
   int32_t header_lenght;
   int16_t version;
   timestamp tmsp;
}; 
```

# wordpress - 永久链接在 Windows 7 上的 xampp/localhost 服务器中不起作用

> ID：12311737
> 
> 赞同：3
> 
> 时间：2012-09-07T04:27:58.150
> 
> 标签：wordpress, .htaccess, xampp, permalinks

当我从 wordpress 管理员单击永久链接时，它会自动在根文件夹中创建 .htaccess 文件，然后 wordpress 站点停止使用浏览器错误**服务器错误 500**我在 httpd.conf 中进行了以下设置，并且我的 mod_rewrite 正在按照 php 工作。 ini 显示。

**httpd.conf 设置**

```
<Directory "E:/xampp/cgi-bin">
    Options FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory> 
```

* * *

```
<Directory "E:/xampp/htdocs">
    #
    # Possible values for the Options directive are "None", "All",
    # or any combination of:
    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
    #
    # Note that "MultiViews" must be named *explicitly* --- "Options All"
    # doesn't give it to you.
    #
    # The Options directive is both complicated and important.  Please see
    # http://httpd.apache.org/docs/2.2/mod/core.html#options
    # for more information.
    #
    Options All

    #
    # AllowOverride controls what directives may be placed in .htaccess files.
    # It can be "All", "None", or any combination of the keywords:
    #   Options FileInfo AuthConfig Limit
    #
    AllowOverride All

    #
    # Controls who can get stuff from this server.
    #
    Order allow,deny
    Allow from all

</Directory> 
```

* * *

**HTACCESS 文件代码**

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /xampp/ozi-tech/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /xampp/ozi-tech/index.php [L]
</IfModule>
# END WordPress 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-09-22T18:37:59.730

如果您的项目位于
*E:/xampp/htdocs/ozi-tech/*
上，那么您需要指定从 localhost 开始的路径。

```
E:/xampp/htdocs/  === localhost === / 
```

您只需要更改.htaccess 中的**RewriteBase**和**RewriteRule**：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /ozi-tech/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /ozi-tech/index.php [L]
</IfModule>
# END WordPress 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-03T05:43:04.643

我确实很难解决这个问题，但我发现的主要问题是我的本地服务器不支持 htaccess URL 重写场景，所以我在 ftp 帐户上上传了相同的代码并在线获得了缓解。

我想知道我们是否可以允许在本地服务器中进行 URL 重写，尽管我在 xampp 服务器中取消了 URL 重写模块的注释，但仍然无法在本地环境中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T07:56:26.553

使用 .htaccess

```
 RewriteEngine On
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteRule ^([^\.]+)$ $1.php [NC,L] 
```

上面的代码将去掉 .php 扩展名，从而让你说 index 而不是 index.php。是的，它适用于本地主机，几乎所有托管公司都包含它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-14T15:58:37.713

我在使用 XAMPP 时遇到了这个问题，并且我的项目位于与 XAMPP 的默认项目目录不同的目录中。

我通过添加：在**httpd.conf**的*特定*标签`AllowOverride All` *之外*解决了这个问题。 *`<Directory>`*

 ***因此，在主`<Directory />`标签本身中，如下所示：

```
#
# Deny access to the entirety of your server's filesystem. You must
# explicitly permit access to web content directories in other 
# <Directory> blocks below.
#
<Directory />
    AllowOverride all
    Require all denied
</Directory> 
```

如果您有更严格的安全需求，一定要弄清楚如何`AllowOverride`在特定目录中使用，但允许覆盖所有目录对我来说是一个快速修复。***

# windows - 在 windows 上使用 Eclipse + PyDev + python2.7

> ID：12311741
> 
> 赞同：-1
> 
> 时间：2012-09-07T04:28:37.197
> 
> 标签：windows, python-2.7, openerp

我是 openERP 新手，我已经安装了 openERP 6.0 版本、python 2.7.2、Eclipse Juno 和 windows XP。我正在关注 pydev 上的开发人员书籍模块结构。

在导入模块 osv 编译器时说未解决的导入。现在我收到这样的问题

python2.7 是否适用于 Windows 上的 openERP 6.0？

我为解释器 Python 从外部提供了 library.zip。

请提供在 pydev 上安装和配置的步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:45:22.497

“您需要 Python 2（OpenERP v6.0 为 2.5 或更高版本，v6.1 为 2.6 或 2.7）” [http://doc.openerp.com/v6.0/install/linux/server/index.html](http://doc.openerp.com/v6.0/install/linux/server/index.html)

所以它应该适用于 2.7。您是否使用 Windows“一体式安装”进行安装？然后它应该为你安装所有东西（它在 Windows 上使用它自己的 python dll）。openERP 工作正常吗？只是你的模块不工作吗？需要更多详细信息才能对此提供帮助。

# html - 如何在单独的选项卡中打开打印预览

> ID：12311744
> 
> 赞同：1
> 
> 时间：2012-09-07T04:29:15.150
> 
> 标签：html, css

我使用以下代码打印页面。

```
<a href="javascript:window.print()" style="cursor:default; cursor:hand" target="_blank"><img here>Print</a> 
```

如果我单击打印链接，将打印页面内容。我想在单独的选项卡中显示打印预览屏幕。如何解决这个问题？

# visual-studio-2005 - 如何使用 Visual Studio 代码连接远程分析服务

> ID：12311748
> 
> 赞同：1
> 
> 时间：2012-09-07T04:29:32.283
> 
> 标签：visual-studio-2005, ssas

我正在尝试使用后面的 VS2005 代码连接分析服务 (AS)。我正在使用 Microsoft.AnalysisServices.Xmla.XmlaClient.Connect(server name) 与 AS 连接，如果 Web 服务器和 sql 服务器都在同一台机器上，它的工作，但是当我尝试访问远程服务器以连接 AS 时我“无法建立连接。确保服务器正在运行。”。

我认为这是因为 AS 使用 Windows 身份验证。

我迫切需要连接和使用远程位置的 AS。任何想法？？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:04:56.370

您的 Web 服务器和 SQL Server 是否在同一个域中？如果是这样，则向 Analysis Services 授予对 IIS 应用程序池标识的访问权限。理想情况下，您将通过角色成员资格来做到这一点。如果没有，在不同域中创建具有相同名称/密码的用户应该仍然有效。

# scheme - 如何使球拍网络服务器永不超时？

> ID：12311751
> 
> 赞同：0
> 
> 时间：2012-09-07T04:29:54.823
> 
> 标签：scheme, racket

有没有办法在 Racket Web 服务器中指定服务器端永远不会超时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:34:47.970

如果您[指定超时时间](http://docs.racket-lang.org/web-server/servlet.html#%28part._timeouts%29)怎么`0`办？

如果这不是一个选项或不起作用，您可以为一些不合理的大数字设置超时，例如`31536000`- 一年中的秒数，或 30 天，或者任何比服务器可能寿命更长的时间在你的情况下。

话虽如此，有一个有效或实际上无限的超时将是非常奇怪的。在某些时候，所有服务器通常都需要放弃并假设客户端永远不会回来。这是健康的事情。否则服务员会伤心、沮丧地坐在那里，静静地记录，“他们为什么不回来？！我没有充分满足他们的需求吗？我活着只是为了服务——这是以我的名义！”

...在更严重的情况下，当您打开连接而没有超时只是坐在那里时，它可能会导致看起来像内存泄漏，随着时间的推移慢慢积累资源（内存）。在许多此类情况下，您必须重新启动服务器应用程序才能释放这些资源。

# php - 使用 PHP-ExcelReader 遇到问题 - 错误的 xls 文件？

> ID：12311754
> 
> 赞同：1
> 
> 时间：2012-09-07T04:30:10.877
> 
> 标签：php, excel

我正在尝试使用[PHP-ExcelReader](http://sourceforge.net/projects/phpexcelreader/)从 excel 文件中导入数据，但遇到了麻烦。该文件由工作中的程序生成。（虽然这是一个非官方的项目，但我只是一个爱好者）

当我读取文件时，数据很奇怪。一列中通常为 4 个字符的单元格被截断为 2。大多数其他列似乎在截断单元格时没有一致性，除了整个文本永远不会存在。如果我使用 Libreoffice 只编辑一个单元格，保存并导入同一个文件，一切都会显示正常。代码是这样的：

```
 $data = new Spreadsheet_Excel_Reader();
    $data->setOutputEncoding('CP1251');
    $data->read($filename);
    echo "<table>\n";
    for ($i = 1; $i <= $data->sheets[0]['numRows']; $i++) {
        echo "<tr>";
        for ($j = 1; $j <= $data->sheets[0]['numCols']; $j++) {
            echo "<td>";
            if (isset($data->sheets[0]['cells'][$i][$j])) {
                echo $data->sheets[0]['cells'][$i][$j];
            }
            echo "</td>";
        }
        echo "</tr>\n";
    }
    echo "</table>\n"; 
```

这个想法是这个文件将由多个用户每天至少生成一次，因此让他们保存文件、编辑它并在上传之前重新保存是不现实的。您对我如何按原样导入此文件有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T01:47:52.587

我和你有同样的烦恼。我的 xls 文件是从 SSRS 下载的。如果我下载后直接读取，字符串和数字数据将被检索为奇怪的数据。例如 ：

data in excel 1,040,809,656.00 but Spreadsheet_Excel_Reader retrieves [$-1,040,809,6561,040,809,6561,040,809,6561,040,809,6561,040,809,6561,040,809,6561,040,809,656]1,040,809,6561,040,809,6561,040,809,6561,040,809,656.1, 040,809,6561,040,809,656

我的临时解决方案是打开文件并另存为（无需编辑）。

# c - 满足 BST 属性的树 但我认为它不是 BST？

> ID：12311755
> 
> 赞同：5
> 
> 时间：2012-09-07T04:30:16.430
> 
> 标签：c, algorithm, tree

今天我在二叉树上做一个问题，在此期间我发现了一个令人满意的 BSTree 结构：“每个节点的左子节点值较小，右子节点值较大”。但它不是 BST（在我看来），因为 root 的价值比它的孙子要小。请解释一下。

二叉树：

```
 7
     /  \
    4    10
   / \
  2   8 
```

告诉我这是不是 BST？解释 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T04:33:19.110

不是，8 > 7，但 8 在 7 的左侧。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T04:49:50.393

可以在[这里](http://en.wikipedia.org/wiki/Binary_search_tree)找到更正确的 BST 定义：

> *   节点的左**子树**仅包含键小于节点键的节点。
> *   节点的右**子树**仅包含键大于或等于节点键的节点。
> *   左右**子树**也必须是二叉搜索树。

因此，尽管您的树满足每个节点左侧值较小且右侧值较大的特定情况，但它不满足涉及左右子树的更一般情况，因此不是 BST。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T08:53:33.100

它不是 BST，因为树的中序遍历不会提供排序的输出。罪魁祸首是值为 8 的节点。它位于根节点的左子树中，但大于根节点 4 。

# python - 如何用 numpy 绘制文件？

> ID：12311767
> 
> 赞同：13
> 
> 时间：2012-09-07T04:32:30.050
> 
> 标签：python, numpy, plot

我有一个 .dat 文件，其中包含两列数字，所以它看起来像这样：

```
111    112
110.9  109
103    103 
```

等等。

我想将两列相互绘制。我以前从未处理过 .dat 文件，所以我不确定从哪里开始。

到目前为止，我发现 numpy 有一些我可以用来调用的东西。

```
data = numpy.loadtxt('data.DAT') 
```

但我不知道从这里去哪里。有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-07T16:51:39.833

Numpy 本身不支持绘图。您通常会[`matplotlib`](http://matplotlib.sourceforge.net/)用于绘制 numpy 数组。

如果您只想“查看文件”，我认为最简单的方法是使用[`plotfile`](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.plotfile).

```
import matplotlib.pyplot as plt 

plt.plotfile('data.dat', delimiter=' ', cols=(0, 1), 
             names=('col1', 'col2'), marker='o')
plt.show() 
```

`gnuplot`你可以像在 ipython 中一样使用这个函数：

```
$ ipython --pylab
...
...
In [1]: plt.plotfile('data.dat', delimiter=' ', cols=(0, 1), 
...                  names=('col1', 'col2'), marker='o') 
```

或将其放入 shell 脚本并将参数传递给它以直接从您的 shell 中使用它

![plotfile_example](../Images/13a384d13c197f595d458e88a033272c.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T04:40:57.687

```
import numpy as np
import matplotlib.pyplot as plot
#data = np.loadtxt("plot_me.dat")
#x,y=np.loadtxt("plot_me.dat",unpack=True) #thanks warren!
#x,y =  zip(*data)
#plot.plot(x, y, linewidth=2.0)
plot.plot(*np.loadtxt("plot_me.dat",unpack=True), linewidth=2.0)
plot.show() 
```

[编辑]感谢您的提示，我认为它现在尽可能紧凑：P

![情节 1](../Images/292b155941f626831a642992c3009f66.png)

如果你希望它是 log10，只需在 nparray 上调用 log10）

```
plot.plot(*np.log10(np.loadtxt("plot_me.dat",unpack=True)), linewidth=2.0) 
```

![日志10](../Images/8248f4959cf5fb424891d6bb2460ddc7.png)

# ios - 现有 sqlite 数据库的核心数据

> ID：12311772
> 
> 赞同：1
> 
> 时间：2012-09-07T04:33:02.013
> 
> 标签：ios, sqlite, core-data

> **可能重复：**
> [将普通 sqlite3 数据库迁移到核心数据？](https://stackoverflow.com/questions/4131227/migrate-normal-sqlite3-database-to-core-data)

是否可以将现有的 sqlite db 加载到核心数据中？我遇到了麻烦，实际上在核心数据示例中，我发现它包含一个带有 z 前缀的表名和其他属性的数据库。那个z有什么意义？我也在这个博客中看到[http://ablogontech.wordpress.com/2009/07/13/using-a-pre-populated-sqlite-database-with-core-data-on-iphone-os-3-0/](http://ablogontech.wordpress.com/2009/07/13/using-a-pre-populated-sqlite-database-with-core-data-on-iphone-os-3-0/)使用核心数据创建数据库并加载它，这是一种解决方法，但不是将数据加载到核心数据的正确方法。我需要对表进行大量更新和查询，请建议是直接使用sqlite还是使用core data？如果是核心数据，请建议将现有sqlite文件导入核心数据的最佳方法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T13:18:13.460

Core Data 使用 SQLite 的事实应该是一个实现细节。事实上，Core Data 文档明确指出，您不应该以任何方式在 Core Data 之外访问数据库本身。

同样，您不应该在 Core Data 下强制使用您自己的数据库。

如果要将现有数据库导入 Core Data，则需要编写一些代码来遍历现有数据库中的每个条目，并创建相应的对象以插入 Core Data。

FWIW，Z_ 的东西是他们数据库上的核心数据装饰。

不要乱用数据库。现在，事实证明您可以对数据库做一些事情，但您真的不应该——除非你是专家——然后你仍然不应该，但可能会。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T05:43:29.670

您想查看 Ray Wenderlich 的关于将现有数据预加载到 Core Data 的教程：[在这里查看](http://www.raywenderlich.com/12170/core-data-tutorial-how-to-preloadimport-existing-data-updated) 这是一个非常完整的教程，它将帮助您了解有关一起使用 Sqlite 和 Core Data 的一些概念。这是一个三部分的教程。试一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T14:43:52.687

你最好听听这里的建议。鉴于内部数据库已被修饰，您至少必须对自己的数据库做同样的事情，以使其有一半的工作机会。

如前所述，您应该将它导入，例如，在您的代码库中，并为该任务编写一些一次性代码。这样，ios 将在本地为您处理一切。

# objective-c - 在 Phonegap 中写入 Cordova.plist 文件会导致错误

> ID：12311773
> 
> 赞同：0
> 
> 时间：2012-09-07T04:33:13.277
> 
> 标签：objective-c, cordova, plist, nsdictionary

我已将以下内容添加到我的 Cordova.plist 文件中：

```
Key: EnableEverything
Type: Boolean
Value: YES 
```

然后我使用以下代码读取和写入 plist 文件：

```
NSString *adKey = @"EnableEverything";

NSString *pathToSettingsInBundle = [[NSBundle mainBundle] pathForResource:@"Cordova" ofType:@"plist"];
NSMutableDictionary *plist = [NSDictionary dictionaryWithContentsOfFile: pathToSettingsInBundle];

NSString *enableEverything = [[plist valueForKey:adKey] stringValue];
NSLog(@"EnableEverything: %@", enableEverything); // this returns 1, which is correct.

// Disable in plist.
[plist setValue:NO forKey:adKey];
[plist writeToFile:pathToSettingsInBundle atomically:YES];

NSLog(@"EnableEverything: %@", enableEverything); // never reaches this line 
```

我收到以下错误：

```
2012-09-07 14:20:12.168 slq[958:707] *** WebKit discarded an uncaught exception in the webView:decidePolicyForNavigationAction:request:frame:decisionListener: delegate: <NSInternalInconsistencyException> -[__NSCFDictionary removeObjectForKey:]: mutating method sent to immutable object 
```

尝试写入文件时似乎有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:48:35.500

您正在更改应用程序包中的文件。这是苹果禁止的。检查这个：[将 NSDictionary 写入我的应用程序包中的 plist](https://stackoverflow.com/questions/2502193/writing-nsdictionary-to-plist-in-my-app-bundle?rq=1)

您必须将 plist 复制到允许更改的文件夹中，例如文档文件夹。

# angularjs - AngularJS 查询资源一次并在整个应用程序中使用数据

> ID：12311778
> 
> 赞同：3
> 
> 时间：2012-09-07T04:33:46.083
> 
> 标签：angularjs

我的应用程序有几个视图，每个视图都有一个控制器。

我有几个返回标准 JSON 数组的 API 资源。每当视图更改时，都会重新查询资源以获取相当慢的新数据。我更愿意为我的控制器提供 API 资源，而无需每次都重新查询。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T05:15:38.123

如果我理解正确，那么这就是服务的用途。它们有点像控制器共享数据的中心位置。

我查看了本教程中使用的代码的 jsfiddle：

[http://onehungrymind.com/angularjs-communicating-between-controllers/](http://onehungrymind.com/angularjs-communicating-between-controllers/)

```
var myModule = angular.module('myModule', []);
myModule.factory('mySharedService', function($rootScope) {
    var sharedService = {};

    sharedService.message = '';

    sharedService.prepForBroadcast = function(msg) {
        this.message = msg;
        this.broadcastItem();
    };

    sharedService.broadcastItem = function() {
        $rootScope.$broadcast('handleBroadcast');
    };

    return sharedService;
});

function ControllerZero($scope, sharedService) {
    $scope.handleClick = function(msg) {
        sharedService.prepForBroadcast(msg);
    };

    $scope.$on('handleBroadcast', function() {
        $scope.message = sharedService.message;
    });        
}

function ControllerOne($scope, sharedService) {
    $scope.$on('handleBroadcast', function() {
        $scope.message = 'ONE: ' + sharedService.message;
    });        
}

function ControllerTwo($scope, sharedService) {
    $scope.$on('handleBroadcast', function() {
        $scope.message = 'TWO: ' + sharedService.message;
    });
}

ControllerZero.$inject = ['$scope', 'mySharedService'];        

ControllerOne.$inject = ['$scope', 'mySharedService'];

ControllerTwo.$inject = ['$scope', 'mySharedService'];​ 
```

* * *

**编辑**

对于资源调用，我现在有一个像这样使用它们的服务。抱歉，它在咖啡脚本中

```
.factory('EventService', (SubEvent, User) ->
    subevents = {}

    return {
        getSubevent: (subevent_id) ->
            SubEvent.get {subevent_id: subevent_id}, (subevent) ->

                participants = (participant.user for participant in subevent.participants)
                User.query {participants: participants}, (users) ->
                    for user,i in users
                        subevent.participants[i].user = user

                    subevents[subevent_id] = subevent
    }
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T15:40:12.300

1.  将您的共享资源放入服务中（这几乎总是您在控制器之间共享数据的方式）。
2.  将结果缓存在服务中，因此只需执行一次昂贵的查询。

由于两者都[`$http`](http://code.angularjs.org/1.1.5/docs/api/ng.%24http)支持[`$resource`](http://code.angularjs.org/1.1.5/docs/api/ngResource.%24resource)开箱即用的缓存，因此您无需编写自己的缓存。要调整默认缓存行为，请查看[`$cacheFactory`](http://code.angularjs.org/1.1.5/docs/api/ng.%24cacheFactory).

这是我正在处理的应用程序的一个示例：

```
var app = angular.module('app', ['ngResource']);

app
  .factory('Worklogs', function($resource) {
    return $resource('/tempo/worklogs', {}, {
      'query':  {method:'GET', isArray:true, cache: true}
    });
  })
  .controller('FirstCtrl', function($scope, Worklogs, $log, $filter){
    $scope.search = SearchParameters;
    $scope.worklogs = Worklogs.query({dateFrom: $scope.search.dateFrom, dateTo: $scope.search.dateTo});
  })
  .controller('SecondCtrl', function($scope, Worklogs, $log, $filter){
    $scope.search = SearchParameters;
    $scope.worklogs = Worklogs.query({dateFrom: $scope.search.dateFrom, dateTo: $scope.search.dateTo});
  }) 
```

控制器第一次加载和每次新参数传入`query()`时，Worklogs 服务都会发出一个 HTTP 请求。每当更改控制器并重复先前的查询时，都会从缓存中加载工作日志（并且不发出 HTTP 请求）。

我正在使用 AngularJS 1.1.5，因为 1.0.x 分支缺少很多很酷的东西......可能包括这个。

# exception - Haskell 中的异常警告，但没有 OldException

> ID：12311787
> 
> 赞同：4
> 
> 时间：2012-09-07T04:35:30.750
> 
> 标签：exception, haskell

为什么此代码适用于

```
import qualified Control.OldException as E 
```

但不与

```
import qualified Control.Exception as E 
```

这是代码：

```
 fileContents <- (readFile "shpm.txt") `E.catch` (\_ -> return "") 
```

这是我遇到的“新”异常错误

```
Ambiguous type variable `e0' in the constraint:
  (E.Exception e0) arising from a use of `E.catch'
Probable fix: add a type signature that fixes these type variable(s)
In a stmt of a 'do' block:
  fileContents <- (readFile "shpm.txt")
                  `E.catch` (\ _ -> return "No Tasks") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T05:23:12.427

因为种类变了。具体来说：

*   旧异常：`catch :: IO a -> (Exception -> IO a) -> IO a`
*   例外：`catch :: Exception e => IO a -> (e -> IO a) -> IO a`

新模型需要知道`e`该类型的值是什么`Exception e`。这实际上意味着您需要告诉编译器您正在捕获哪个异常。您的示例`OldException`捕获了所有内容，现在不鼓励这样做（有关更多信息，请参阅[捕获所有异常](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Exception.html#g:4)）。

对您的功能的简单修复将是这样的：

```
foo = (readFile "foo") `E.catch` (\e -> const (return "") (e :: E.IOException)) 
```

或无 lambda 版本：

```
bar = (readFile "foo") `E.catch` myHandler

myHandler :: E.IOException -> IO String
myHandler _ = return "" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T05:21:29.460

您需要为被捕获的异常提供显式类型。例如：

```
fileContents <- (readFile "shpm.txt") `E.catch` ((\_ -> return "") :: E.SomeException -> IO String) 
```

# android - 为什么在我从设备上卸载我的应用程序时会显示此错误？

> ID：12311788
> 
> 赞同：1
> 
> 时间：2012-09-07T04:35:31.020
> 
> 标签：android

> **可能重复：**
> [由于应用程序签名不同，重新安装失败](https://stackoverflow.com/questions/5719701/re-installation-failed-due-to-different-application-signatures)

我在我的android设备上运行了一个程序。然后我卸载它。再次尝试安装它。但安装后显示此错误。

```
[2012-09-07 10:29:50 - EXT] Re-installation failed due to different application signatures.
[2012-09-07 10:29:50 - EXT] You must perform a full uninstall of the application. WARNING: This will remove the application data!
[2012-09-07 10:29:50 - EXT] Please execute 'adb uninstall com.excel' in a shell.
[2012-09-07 10:29:50 - EXT] Launch canceled! 
```

虽然我的设备中不存在该应用程序，但我如何卸载该应用程序。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:37:31.527

这是因为您的设备中已经安装了另一个应用程序，与`PackageName`您当前使用的应用程序相同，因此只需删除与您的 PackageName 相同的应用程序即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T04:45:16.167

此外，出现此错误的原因是，您已经通过将设备连接到 eclipse 来使用调试密钥运行应用程序，并尝试在同一真实设备上使用已释放密钥运行 apk。

# python - python将两个csv文件与csv模块进行比较：不遍历每一行

> ID：12311791
> 
> 赞同：2
> 
> 时间：2012-09-07T04:35:49.920
> 
> 标签：python, csv

我正在尝试比较两个 csv 文件，然后在每个 csv 文件的一行上打印 product_id 字段。这是有问题的代码。需要注意的是，在两个 csv 文件中，字段的顺序不同。

```
import csv
import sys

f1 = sys.argv[1]
f2 = sys.argv[2]
num_matches = 0

with open(f1, 'rb') as f:
    csv_readerf = csv.reader(f)
    csv_readerf.next()
    with open(f2, 'rb') as n:
        csv_readern = csv.reader(n)
        csv_readern.next()
        for row in csv_readerf:
            a_name  = row[0].replace(" ", "").lower()   #not used, can be ommitted
            a_id    = row[1]
            a_post  = row[2]
            a_rev   = row[3]
            a_loc   = row[4]                            #not used, can be ommitted
            a_desc  = row[5].replace(" ", "").lower()   #remove all whitespaces for uniformity
            a_ovr   = row[6]
            a_cmf   = row[7]
            a_sty   = row[8]
            a_siz   = row[9]
            a_arc   = row[10]
            a_wid   = row[11]
            a_url   = row[12]
            for rowP in csv_readern:
                p_name  = rowP[10].replace(" ", "").lower()
                p_id    = rowP[6]

                temp    = rowP[11].split(" ")[0:3]      #disregard time stamp
                p_post  = (" ").join(temp)

                p_rev   = rowP[7]
                if p_rev is "":
                    p_rev = "Anonymous"
                p_desc  = rowP[1].replace(" ", "").replace("\n", "").replace("\r\n", "").lower()
                p_ovr   = rowP[4]
                p_cmf   = rowP[3]
                p_sty   = rowP[0]
                p_siz   = rowP[8]
                p_arc   = rowP[9]
                if p_arc:
                    p_arc = p_arc[0 : p_arc.index(" ")]     #for arch we only want the first word
                p_wid   = rowP[5]
                p_url   = rowP[2]

                print a_id, p_id 
```

我遇到的问题是，在我转储到 .txt 文件中的输出中，并非 f1 中的所有 product_id 都被打印出来。我肯定知道这一点，因为 f1 是我创建的测试文件，我特意在其中放置了几个不同 id 的产品。

另一件需要注意的事情是，我尝试在单独的脚本中循环遍历每个 csv，并且每个都正常工作，按预期打印出每个 product_id。为什么当我嵌入 for 循环时，迭代第一个文件似乎被缩短了？可能是什么问题呢？我制作的测试文件很小，所以它们应该能够完全适合内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:43:13.380

错误是，就像 BrenBam 提到你的循环构造

```
for row in csv_readerf:
   ....
   for rowP in csv_readern:
       # will only work in the first iteration of the outer loop
       # since the csv reader hits eof
       ... 
```

所以你只需将 csv_readerf 的第一行与 csv_readern 的所有行进行比较

如果您在外循环内打开内循环的 csv 文件，则会阻止这种情况：

```
for row in csv_readerf:
    ...
    with open(f2, 'rb') as n:
       csv_readern = csv.reader(n)
       csv_readern.next()       ....

        for rowP in csv_readern:
           # will iterate over csv_readern, but only in the first iteration of the outer loop 
```

或者，如果您先将内部文件读入数组并循环遍历该数组

这是一个非常常见的初学者错误，经常发生在深度嵌套中，使用函数可能会有所帮助

# java - 在 Java 中添加对象

> ID：12311797
> 
> 赞同：-1
> 
> 时间：2012-09-07T04:36:42.603
> 
> 标签：java

我没有收到任何错误，但我无法添加课程

```
 //in my Course class i use equals method to check whether they are the sam
    public boolean equals (Course other){
    Course c = (Course) other;
    if(c != null){
        if (this.name.equals(c.name) && this.instructor.equals(c.instructor) && this.numberOfSection == (c.numberOfSection) && this.year == (c.year))
            return true;
        else
            return false;   
        }
    else 
        return false;
}

//in my CourseCatalog class i use the equals method in Course and if they are not same 
// i add the course to the catalog
public void addCourse (Course other) {
    if(other != null){
        if( !other.equals(course1) && !other.equals(course2) && !other.equals(course3) && !other.equals(course4))
        {
            if (noOfCourse == 0){
                course1 = new Course(other);
                noOfCourse ++;
            }
            if (noOfCourse == 1){
                course2 = new Course(other);
                noOfCourse ++;
            }
            if (noOfCourse == 2){
                course3 = new Course(other);
                noOfCourse ++;
            }
            if(noOfCourse == 3){
                course4 = new Course(other);
                noOfCourse ++;
            }   
        }
    }
}

            //the following code is what i do in the tester class 
            CourseCatalog myCourseCatalog  = new CourseCatalog();
    Course course1 = new Course();
    course1.setName("Math101");
    course1.setInstructor("Jack Smith");
    course1.setYear(2007);
    course1.setNumberOfSection(3);
    myCourseCatalog.addCourse(course1);

            // i add a different course 
    Course course2 = new Course("Cs101", "David Brown", 2003 ,3);
    myCourseCatalog.addCourse(course2);
    Course copyCourse = new Course(course2);
    myCourseCatalog.addCourse(copyCourse); 
```

但是程序以这种方式打印出来；

```
Name: Math101
Instructor: Jack Smith
Year: 2007
Number Of Sections: 3Name: Math101
Instructor: Jack Smith
Year: 2007
Number Of Sections: 3Name: Math101
Instructor: Jack Smith
Year: 2007
Number Of Sections: 3Name: Math101
Instructor: Jack Smith
Year: 2007
Number Of Sections: 3 
```

所以这意味着我不能添加课程为什么？我是java的新学生，所以我很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T04:43:42.237

哇这个美女。。。

您正在使用 if-else 链，以确保所有内容都`if`为真并被执行。首先`if`你检查`noOfCourse == 0`然后增加它；在下一个中，您检查`noOfCourse==1`哪个由于增量而为真。

**所以当你第一次调用你的方法`addCourse`时，所有的课程都已经设置好了。**

请更换

```
if (noOfCourse == 0){
    course1 = new Course(other);
    noOfCourse ++;
}
if (noOfCourse == 1){
    course2 = new Course(other);
    noOfCourse ++;
}
if (noOfCourse == 2){
    course3 = new Course(other);
    noOfCourse ++;
}
if(noOfCourse == 3){
    course4 = new Course(other);
    noOfCourse ++;
} 
```

和

```
if (noOfCourse == 0){
    course1 = new Course(other);
    noOfCourse ++;
} else if (noOfCourse == 1){
    course2 = new Course(other);
    noOfCourse ++;
} else if (noOfCourse == 2){
    course3 = new Course(other);
    noOfCourse ++;
} else if(noOfCourse == 3){
    course4 = new Course(other);
    noOfCourse ++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T04:45:06.900

问题是您实际上遇到了级联`if`问题。见下文...

```
if (noOfCourse == 0){
    course1 = new Course(other);
    noOfCourse ++;
}
if (noOfCourse == 1){
    course2 = new Course(other);
    noOfCourse ++;
}
if (noOfCourse == 2){
    course3 = new Course(other);
    noOfCourse ++;
}
if(noOfCourse == 3){
    course4 = new Course(other);
    noOfCourse ++;
} 
```

不管是什么`noOfCourse`，它都会增加它，从而满足它`if`下面的内容。这会导致您的课程填满多个课程空缺。解决方案是使用`else if`.

```
if (noOfCourse == 0){
    course1 = new Course(other);
    noOfCourse ++;
} else if (noOfCourse == 1) {
    course2 = new Course(other);
    noOfCourse ++;
} else if (noOfCourse == 2) {
    course3 = new Course(other);
    noOfCourse ++;
} else if (noOfCourse == 3) {
    course4 = new Course(other);
    noOfCourse ++;
} 
```

这样，它只会添加*一次*课程。:-)

顺便说一句，您应该真正使用数组或`List`此处。

```
final Count[] courses = new Course[4];
final int coursesAssigned = 0;
...
if (coursesAssigned < 4) {
  courses[coursesAssigned++] = new Course(other);
} 
```

另外，你为什么要复制`other`？

# c# - 如何以编程方式在 DevExpress TreeList 中添加节点？

> ID：12311798
> 
> 赞同：7
> 
> 时间：2012-09-07T04:36:50.317
> 
> 标签：c#, winforms, devexpress, treelist

我想在特定索引处添加节点`DevExpress TreeList`。我看过[post#1](https://stackoverflow.com/questions/3658919/devexpress-treelist-control)和[post#2](https://stackoverflow.com/questions/5768986/binding-data-to-the-treelist-control)但无法得到我需要的东西。我只想要获取父节点编号/id 并向其添加子节点的代码。

我找到了这个功能，我认为它会起作用

```
treelist.AppendNode(object nodeinfo, int parentID); 
```

如何给这个节点信息？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T04:49:47.433

请查看文档： [How to: Create Nodes in Unbound Mode in Code](http://documentation.devexpress.com/#WindowsForms/CustomDocument5559)

相关链接：[非绑定模式](http://documentation.devexpress.com/#WindowsForms/CustomDocument177)

# python - 写入文件而不覆盖

> ID：12311800
> 
> 赞同：0
> 
> 时间：2012-09-07T04:37:02.097
> 
> 标签：python, shell

我正在尝试让我的程序将其输出写入文件。它在循环中执行此操作，但我认为它每次都会覆盖文件中的内容，而不是添加到文件中。以下是相关代码：

```
g = open('mjd.txt','a')

for i in range(len(new_y)):
    os.system('vap -c "mjd" {0} > mjd.txt'.format(new_y[i])) 
```

其中 vap 是来自另一个程序的命令，它输出一行。

循环之后，我的“mjd.txt”文件中只有一行，我希望有几行。

任何帮助都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T04:44:07.090

将行更改为以下内容以追加。目前想不出 > 和 >> 的名称是什么。

```
os.system('vap -c "mjd" {0} >> mjd.txt'.format(new_y[i])) 
```

# python - Python：为什么模块中不允许“return”

> ID：12311802
> 
> 赞同：25
> 
> 时间：2012-09-07T04:37:14.553
> 
> 标签：python, module, return

如果您查看从模块编译的 Python 字节码，您将在最后看到：

```
10 LOAD_CONST               0 (None)
13 RETURN_VALUE 
```

即 a`return`在模块的根级别完全有效。但是，如果您尝试在源代码中使用它，您会得到：

```
SyntaxError: 'return' outside function 
```

为什么？

* * *

这当然是一个语言设计决定。但为什么被拿走了？A`return`在模块中通常非常有用。例如，我有时想在模块的开头编写这段代码：

```
import sys
if sys.platform != "linux2":
    print "your platform is not yet supported"
    # define some stubs
    def foo(): pass
    def bar(): pass
    return 
```

而且我不想在那里引发异常（因为这会导致模块不加载我不想要的）。

* * *

实际上，我一起编写了一些代码，这些代码可以即时操作 Python 字节码并执行返回（或者在我的情况下跳转到完成返回的末尾）。这行得通。它只是 CPython 的唯一原因是没有标准的方法来操作代码对象。

[这](https://github.com/albertz/playground/blob/master/test_importearlyexit.py)是代码。

* * *

对于可能的答案：我更喜欢真实的证据，Guido van Rossum 过去的一些陈述，而不是任何随机讨论。我自己当然可以同时兼顾优点（如前所述）和缺点，但我并没有真正看到反对它的主要原因。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T04:43:33.647

我猜这是python开发人员的决定，因为它迫使模块的**用户**处理他们的系统不受支持的事实（而不是让模块的开发人员猜测应该发生什么） . 想象一下，当他们在 Windows 机器上运行代码并且突然`module.foo()`无法按预期工作时，他们会感到惊讶。（您的警告`print`声明可能完全隐藏在可能被倾倒到标准输出的各种其他垃圾中）。

我认为处理这个问题的最惯用的方法是提出`ImportError`or `NotImplementedError`。然后**用户**可以决定他们是否可以在没有这个模块的情况下继续工作（通过捕获异常），或者他们的程序是否应该在那里崩溃和烧毁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-15T07:03:15.153

这不是“为什么”（我怀疑答案只是“`return`属于一个函数，没有令人信服的理由将它放在顶级模块代码中”）。但这是一个您可能不知道的整洁的解决方法。您的代码可以按如下方式重构，而不会增加太多复杂性：

```
import sys

def main():
    global foo, bar
    if sys.platform != "linux2":
        print "your platform is not yet supported"
        # define some stubs
        def foo(): pass
        def bar(): pass
        return

main() 
```

# jquery - iPhone 无限滚动

> ID：12311804
> 
> 赞同：0
> 
> 时间：2012-09-07T04:37:27.713
> 
> 标签：jquery, iphone, scroll, infinite-scroll

我正在使用以下内容来触发无限滚动并触发 Ajax 请求。这适用于桌面和 iPad 浏览器，但不适用于 iPhone。我错过了什么？

```
//Ajax
var page = 1;    
$(window).scroll(function() {

        if ($(window).scrollTop() + $(window).height() == $(document).height()) {

            page++;

            var data = {
                page_num : page
            };

            $.ajax({
                type : "POST",
                url : "data.php",
                data : data,
                success : function(res) {
                    $(".thumbnails").append(res);
                }
            });

        }

    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T15:57:04.543

这解决了它：

```
if ($(window).scrollTop() >= $(document).height() - $(window).height() - 60) { 
```

# html - 在 eclipse 中开发时在哪里存储 twitter bootstrap

> ID：12311810
> 
> 赞同：4
> 
> 时间：2012-09-07T04:37:58.907
> 
> 标签：html, jsp, twitter-bootstrap

我正在使用 Twitter 引导程序开发网页，现在我想将此 HTML 代码与 eclipse 中的 jsp 集成。我通过将 bootstrap 文件夹放在 web-inf 中进行了尝试，但它在 bootstrap 文件夹中显示错误。所以我的问题是我存储 twitter bootstrap 文件夹的位置，以便它可以在 eclipse 项目中使用。t 提前致谢 英语不好

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T04:56:44.817

假设您在 WebContent 文件夹中创建了一个“动态 Web 项目”引导程序。

*   网页内容
    *   引导程序
        *   css
        *   图像
        *   js
    *   元信息
    *   网络信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T07:04:36.247

我发现它要简单得多。您只需将引导文件夹放入项目目录中，然后告诉 HTML 文件中的路径。像这样：链接 href="bootstrap/css/bootstrap-combined.min.css" rel="stylesheet"

# android - 如何在 Android 中创建带边框的列表视图？

> ID：12311817
> 
> 赞同：0
> 
> 时间：2012-09-07T04:39:01.753
> 
> 标签：android, listview, multiple-columns

我使用多列列表视图将数据显示为网格，但我想要一个包含用户定义的列和行的列表视图，并带有边框。建议？

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView>

 </LinearLayout> 
```

**main1.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout android:orientation="horizontal" 
android:layout_height="wrap_content" 
android:layout_width="fill_parent" 
xmlns:android="http://schemas.android.com/apk/res/android">

<TextView
    android:id="@+id/cust"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:text="customer" />

<TextView
    android:id="@+id/order"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:text="order" />

<TextView
    android:id="@+id/freight"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:text="freight" />

<TextView
    android:id="@+id/station"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:text="station" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T04:48:22.023

**方法一：**

1）实现*自定义适配器*

2）在方法中，在返回之前为视图`getview()`设置一个背景（带*边框）。*

**方法二：**

采用`ArrayAdapter`

1）制作一个xml文件，其中`TextView`包含一个背景（有一个*边框*）

2) 将此 xml 的引用传递给`ArrayAdapter`

这是[一个教程](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)，以防你不知道我在说什么。

# javascript - 我应该为每个列表使用不同的 Backbone 类还是不同的实例？

> ID：12311818
> 
> 赞同：0
> 
> 时间：2012-09-07T04:39:12.057
> 
> 标签：javascript, model-view-controller, architecture, frameworks, backbone.js

我正在使用 Backbone.js

我的页面上有多个模型列表。我应该只用 Backbone.Collection.extend 创建一个“类”，而我的列表应该是这个“类”的实例，还是应该创建与页面上的模型列表一样多的类？

那么，我应该这样做：

```
var MyCol1 = new Backbone.Collection.extend({})
var MyCol2 = new Backbone.Collection.extend({})

var listView1 = new ItemsView({ collection: new MyCol1 })
var listView2 = new ItemsView({ collection: new MyCol2 }) 
```

或者更确切地说是这个？

```
var MyCol = Backbone.Collection.extend({})
var listView1 = new ItemsView({ collection: new MyCol })
var listView2 = new ItemsView({ collection: new MyCol }) 
```

此时所有列表的行为几乎相同，但它们将具有不同的后端 url，它们将被附加到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:31:04.020

如果有什么不同，你会发现你需要两个不同的类，或者你会发现自己陷入了*条件句*的地狱。

您可以将自定义 BaseCollection 与常见行为一起使用，并从其继承以获得详细行为。检查以下内容：

*   [如何在backbone.js 中创建基本视图？](https://stackoverflow.com/questions/12260264/how-to-create-a-base-view-in-backbone-js/12261832#12261832)
*   [在 Backbone 中进行视图混合的正确方法](https://stackoverflow.com/questions/7853731/proper-way-of-doing-view-mixins-in-backbone)
*   [Backbone.js 视图继承](https://stackoverflow.com/questions/7735133/backbone-js-view-inheritance)
*   [骨干视图继承](https://stackoverflow.com/questions/9405828/backbone-view-inheritance)

# java - 为什么在没有命名对象的情况下在参数中创建对象？

> ID：12311820
> 
> 赞同：0
> 
> 时间：2012-09-07T04:39:30.197
> 
> 标签：java, object, constructor, arguments

我创建了一个 Dimension 和一个 Point 对象，但我不需要命名这两个对象并在方法调用的参数中调用其构造函数。我可以解释为什么这是可能的吗？我已经太习惯于给我的对象命名，我需要对我的问题进行解释。

```
import java.awt.Dimension;
    import java.awt.Point;

    import javax.swing.JFrame;

    public class GameFrame extends JFrame {

        public GameFrame()
        {

            // call this method to the GameFrame object 
            // if you do not call this method the JFrame subclass will not actually close
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            // set size to an appropriate size
            // create a dimension object 
            setSize(new Dimension(600,600));

            // upon creating the object set the location of the frame to the center of the screen
            setLocation(new Point (500,300));

            // prevent the user from resizing the GameFrame object
            setResizable(false);
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T04:44:03.003

A`variable`或`identifier`仅指向对象在内存中占用的空间。**在java中，对象通过引用**传递给方法。 因此，如果您在对方法的调用中创建新对象，则该方法将有权访问存储在内存中的对象，因为您提供了对该对象位置的引用。方法完成后的后续操作将无法访问该对象，因为您没有将引用存储在命名变量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T06:02:22.840

基本上你所做的相当于：

```
Dimension dimension = new Dimension(600,600);
setSize(dimension); 
```

现在，即使它是完全相同的东西，`dimension`也只是那个新对象的标识符。如果您不需要在除新对象之外的其他任何地方使用它，这只是浪费空间。

该`setSize`方法将新对象传递给超类的变量 ，该变量`JFrame`保留您的对象，并且您的类`GameFrame`将可以通过其超类访问它。在 Java 中，每个对象都需要至少有一个对它的引用，否则它会被视为垃圾并被删除。

此外，即使您为 命名`dimension`，在执行四行代码后，该变量也会超出范围并被删除。

希望我有所帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T04:44:56.497

您没有引用具有名称的对象（只是将实例传递给方法）。如果您引用该对象，则通过该引用您可以进一步在指定范围内对该对象执行操作。

如果您认为您不需要在指定范围内对该对象进行任何进一步的操作，那么您可以简单地创建一个没有引用的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T04:53:13.593

当你写

```
setSize(new Dimension(600,600)); 
```

您实际上是在`Dimension`创建对象并将其传递给方法时保存对象的引用。

如果您不需要进一步单独使用该对象进行任何计算，则此方法效果很好，建议您使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T04:48:28.397

这是一个称为匿名类的功能，您并不真正关心对象的引用 - 但您真正关心的是对象的功能/行为。您将在函数式编程中看到更多这一点。

有关此功能的更多信息[在这里](http://www.cs.rit.edu/~tmh/courses/allJava/Anonymous.html)

# php - 使用php激活和停用mysql记录

> ID：12311822
> 
> 赞同：2
> 
> 时间：2012-09-07T04:39:42.770
> 
> 标签：php, javascript, jquery, mysql, ajax

嗨，我正在开发用户管理系统。我正在显示来自 db 的所有记录，并且成功执行了添加、编辑和删除操作。现在我需要在主页中显示为仅来自 Mysql 表的活动记录。我的管理控制中有 2 个链接，一个是激活的，另一个是停用的。如果我单击激活，记录将显示在主页中，停用意味着记录将隐藏在主页中。我插入了字段状态

```
datatype enum('active','deactive')`. 
```

我的编码如下。在编码时我需要什么改变？

**索引.php：**

```
<form method="post">
<table>

    <tr>
        <td>Title:</td>
        <td><input type="text" name="title" /></td>
    </tr>
    <tr>
        <td>Author</td>
        <td><input type="text" name="author" /></td>
    </tr>
    <tr>
        <td>Publisher Name</td>
        <td><input type="text" name="name" /></td>
    </tr>
    <tr>
        <td>Copyright Year</td>
        <td><input type="text" name="copy" /></td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td><input type="submit" name="submit" value="add" /></td>
    </tr>
</table>
<?php
if (isset($_POST['submit']))
    {      
    include 'db.php';

                    $title=$_POST['title'] ;
                    $author= $_POST['author'] ;                 
                    $name=$_POST['name'] ;
                    $copy=$_POST['copy'] ;

         mysql_query("INSERT INTO `books`(Title,Author,PublisherName,CopyrightYear) 
         VALUES ('$title','$author','$name','$copy')"); 

            }
?>
</form>
<table border="1">

            <?php
            include("db.php");

            $result=mysql_query("SELECT * FROM books");

            while($test = mysql_fetch_array($result))
            {
                $id = $test['BookID'];  
                echo "<tr align='center'>"; 
                echo"<td><font color='black'>" .$test['BookID']."</font></td>";
                echo"<td><font color='black'>" .$test['Title']."</font></td>";
                echo"<td><font color='black'>". $test['Author']. "</font></td>";
                echo"<td><font color='black'>". $test['PublisherName']. "</font></td>";
                echo"<td><font color='black'>". $test['CopyrightYear']. "</font></td>"; 
                echo"<td> <a href ='view.php?BookID=$id'>Edit</a>";
                echo"<td> <a href ='view.php?BookID=$id'>Activate</a>";
                echo"<td> <a href ='view.php?BookID=$id'>Deactivate</a>";
                echo"<td> <a href ='del.php?BookID=$id'><center>Delete</center></a>";

                echo "</tr>";
            }
            mysql_close($conn);
            ?>
</table>

View.php:
<?php
require("db.php");
$id =$_REQUEST['BookID'];

$result = mysql_query("SELECT * FROM books WHERE BookID  = '$id'");
$test = mysql_fetch_array($result);
if (!$result) 
        {
        die("Error: Data not found..");
        }
                $Title=$test['Title'] ;
                $Author= $test['Author'] ;                  
                $PublisherName=$test['PublisherName'] ;
                $CopyrightYear=$test['CopyrightYear'] ;

if(isset($_POST['save']))
{   
    $title_save = $_POST['title'];
    $author_save = $_POST['author'];
    $name_save = $_POST['name'];
    $copy_save = $_POST['copy'];

    mysql_query("UPDATE books SET Title ='$title_save', Author ='$author_save',
         PublisherName ='$name_save',CopyrightYear ='$copy_save' WHERE BookID = '$id'")
                or die(mysql_error()); 
    echo "Saved!";

    header("Location: index.php");          
}
mysql_close($conn);
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
</head>

<body>
<form method="post">
<table>
    <tr>
        <td>Title:</td>
        <td><input type="text" name="title" value="<?php echo $Title ?>"/></td>
    </tr>
    <tr>
        <td>Author</td>
        <td><input type="text" name="author" value="<?php echo $Author ?>"/></td>
    </tr>
    <tr>
        <td>Publisher Name</td>
        <td><input type="text" name="name" value="<?php echo $PublisherName ?>"/></td>
    </tr>
    <tr>
        <td>Copyright Year</td>
        <td><input type="text" name="copy" value="<?php echo $CopyrightYear ?>"/></td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td><input type="submit" name="save" value="save" /></td>
    </tr>
</table>

</body>
</html> 
```

**德尔.php：**

```
<?php
  include("db.php");  

    $id =$_REQUEST['BookID'];

    // sending query
    mysql_query("DELETE FROM books WHERE BookID = '$id'")
    or die(mysql_error());      

    header("Location: index.php");
?> 
```

请给出一些想法或编码。这是我第一次使用这个概念。？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T04:47:30.707

虽然使用主动非主动逻辑..

您必须遵循以下步骤：-

> 1.  您必须为活动和非活动创建一些带有枚举值的标志状态。
> 2.  从数据库中获取数据时，您必须给出仅获取活动记录的条件。
> 3.  如果您有活动或非活动按钮，则必须根据该按钮更新您的记录。

如果您遵循这些步骤，它将起作用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T04:48:49.243

### `enum`用于类型不是一个好主意`boolean`，因为它占用更多内存。

您可以在记录的数据库中拥有类似`active`标志的东西。由于您已经为每一行都有一个唯一的 ID，您可以这样做：

```
SELECT * FROM `books`; 
```

### 输出

```
+----+-----------------------+----------------------+----------------+------+--------+
| id | title                 | pub                  | author         | copy | active |
+----+-----------------------+----------------------+----------------+------+--------+
|  1 | A Matter of Time      | Outskirts Press      | Michael Bowler | 2010 |      0 |
|  2 | The Promise of Change | Soul Mate Publishing | Rebecca Heflin | 2011 |      0 |
+----+-----------------------+----------------------+----------------+------+--------+ 
```

对于`active`，您可以设置`0`为隐藏或`1`显示！:)

### 现在让我们激活这本书，`A Matter of Time`. 它有一个 ID `1`。

```
UPDATE `books` SET `active` = '1' WHERE  `books`.`id` = 1; 
```

### 输出

```
+----+-----------------------+----------------------+----------------+------+--------+
| id | title                 | pub                  | author         | copy | active |
+----+-----------------------+----------------------+----------------+------+--------+
|  1 | A Matter of Time      | Outskirts Press      | Michael Bowler | 2010 |      1 |
|  2 | The Promise of Change | Soul Mate Publishing | Rebecca Heflin | 2011 |      0 |
+----+-----------------------+----------------------+----------------+------+--------+ 
```

### 让我们只获取活动书籍：

```
SELECT * FROM `books` WHERE `active` = 1; 
```

### 输出

```
+----+-----------------------+----------------------+----------------+------+--------+
| id | title                 | pub                  | author         | copy | active |
+----+-----------------------+----------------------+----------------+------+--------+
|  1 | A Matter of Time      | Outskirts Press      | Michael Bowler | 2010 |      1 |
+----+-----------------------+----------------------+----------------+------+--------+ 
```

### 使用它，您可以单独检索活动书籍。现在停用这本书：

```
UPDATE `books` SET `active` = '0' WHERE  `books`.`id` = 1; 
```

### PHP 代码

```
<?php
    $result = mysql_query("SELECT * FROM `books` WHERE `active` = 1");
    while (false !== ($data = mysql_fetch_array($result)))
        echo $data["title"];
?> 
```

根据您的需要格式化代码。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T04:54:56.933

当您插入或更新数据时，只需添加存储数据或记录状态的状态字段。

当您在查询用户中显示条件时，如`SELECT * FROM books where status='active'`.

这对你有用，试试吧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-29T10:39:21.383

这激活和停用帐户。create a status column in database table give type int and if u insert a database it automatically take 0 and when select table give condition where status="1" 1 means active and 0 is deactivate. 例如：select * from login where status='1'; [演示](http://www.crackerworld.in/2013/02/active-and-deactive-account-in-php.html)

# linux - 读取目录中的多个文件并与另一个文件进行比较

> ID：12311825
> 
> 赞同：1
> 
> 时间：2012-09-07T04:40:03.550
> 
> 标签：linux, perl, unix, operating-system

我有两个文件

```
File 1 in reading directory is of following format 

Read 1 A T
Read 3 T C
Read 5 G T
Read 7 A G
Read 10 A G
Read 12 C G

File 2 in directory contains

    Read 5 A G
    Read 6 T C
    Read 7 G A
    Read 8 G A
    Read 20 A T 
```

文件 2 包含

```
1
2
3
4
5
6
7 
```

我需要先读取文件 2 的位置，然后以水平方式从目录中打开的文件中打印出相应的值。如果该位置不匹配，则打印为“-”。上面的输出应该是

```
 1 2 3 4 5 6 7
Read T - C - T - G
Read - - - - G C A 
```

我需要对所有文件执行此操作，并在另一行中以上述格式打印。所以输出将只有一个文件，行数等于文件数。我可以轻松地在 perl 中做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:11:38.540

如果文件很小，您可以将它们读入内存：

```
#read input files
use IO::File;
my $file1_data;
open(my $file1_fh,"<","/path/file1.data") or die $!;
#read file1
while(my $line=<$file1_fh>){
  chomp($line);
  my ($read,$pos,$col1,$col2) = split(/ /,$line);
  $file1_data->{$pos} = [$col1,$col2];
}
#read file2
my $file2_data;
open(my $file2_fh,"<","/path/file2.data") or die $!;
while(my $line=<$file2_fh>){
  chomp($line);
  my ($read,$pos,$col1,$col2) = split(/ /,$line);
  $file2_data->{$pos} = [$col1,$col2];
}
#read pos file
my @positions;
while(my $pos=<$posfile_fh>){
  chomp($pos);  
  push(@positions,$pos)
}
foreach my $pos (@positions){
    print "$pos\t";
}
print "\n";
foreach my $pos (@positions){
    my $data = defined $file1_data->{$pos}->[0]?$file1_data->{$pos}->[0]:"-";
    print "$pos\t$data"
}
print "\n";
foreach my $pos (@positions){
    my $data = defined $file2_data->{$pos}->[0]?$file2_data->{$pos}->[0]:"-";
    print "$pos\t$data"
}
print "\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:50:22.130

据我所知，您仅使用第二个数据列。这是一个简单的 perl 程序，如果有任何问题，请随时提问。我使用了第三个输入文件，可以使用任意数量的文件。我将格式更改为`42`最后包含。

编码：

```
#!/usr/bin/env perl

use strict;
use warnings;
use autodie;

# try to open format file
my $ffn = shift @ARGV or die "you didn't provide a format file name!\n";
open my $ffh, '<', $ffn;

# read format file
my @format = <$ffh>;
close $ffh;
chomp for @format; # get rid of newlines

# prepare output
print '     ' . join(' ' => @format) . "\n";

# iterate over all .txt files in the data directory
foreach my $data_fn (<data/*.txt>) {

    # iterate over all lines of the data file
    open my $data_fh, '<', $data_fn;
    my %data = ();
    foreach my $line (<$data_fh>) {

        # parse input lines (only)
        next unless $line =~ /Read (\d+) ([ACGT]) ([ACGT])/;
        my ($pos, $first, $second) = ($1, $2, $3);

        # store data
        $data{$pos} = $second;
    }

    # print summary
    print 'Read ' . join(' ' => map {$data{$_} // '-'} @format) . "\n";
} 
```

输出：

```
$ perl bio.pl format.txt
     1 2 3 4 5 6 7 42
Read T - C - T - G -
Read - - - - G C A -
Read - C - T - - - A 
```

！:)

# jquery - jQuery动画第一次跳过

> ID：12311835
> 
> 赞同：1
> 
> 时间：2012-09-07T04:41:02.287
> 
> 标签：jquery, animation, hash, scroll, anchor

我有一个简单的脚本，可以在两个锚点之间上下滑动页面：

```
$(document).ready(function() {

    $('a.switch').each(function() {
        var self = this;
        if(self.hash) {
            $(self).click(function() {
                $('html, body').stop().animate({
                    scrollTop: $(self.hash).offset().top
                }, 2000);
            });
         }
    });

}); 
```

但是，打开页面后第一次调用这个函数，没有动画，只是瞬间跳转到第二个锚点。然后它恢复正常运行。

谁能解释发生了什么以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T05:48:43.727

我认为您想滚动页面加载时的第一个元素，`class name` `switch`并且还想在每个元素上添加点击事件，如果是这样，那么您可以试试这个

```
$(document).ready(function() {
    var els=$('a.switch');
    $('html, body').stop().animate({
        scrollTop: $(els[0].hash).offset().top // els[0]=the first element, you can use the id too
    }, 2000);

    els.on('click', function(e) { // I've used 'on' and didn't use 'each'
        var self = this;
        if(self.hash) {    
            $('html, body').stop().animate({
                scrollTop: $(self.hash).offset().top
            }, 2000);
        }
    });
});​ 
```

[**演示**](http://jsfiddle.net/Wja29/7/)。

# mongodb - 为什么此查询在 Amazon EC2 微实例中需要 539 秒（有时）

> ID：12311838
> 
> 赞同：0
> 
> 时间：2012-09-07T04:41:57.763
> 
> 标签：mongodb, amazon-ec2, windows-server-2008

我试过这个查询

```
db.tablebusiness.find({ "LongitudeLatitude" : { "$nearSphere" : [106.772835, -6.186753], "$maxDistance" : 0.053980478460939611 }, "Prominent" : { "$gte" : 15 }, "indexContents" : { "$all" : [/^warung/, /^nasi/] } }).skip(20).limit(20); 
```

这就是来自 Amazon EC2 instance micro 的日志所说的

```
Fri Sep 07 03:21:08 [clientcursormon] mem (MB) res:312 virt:12424 mapped:6094
Fri Sep 07 03:21:43 [conn52] query isikotacobacoba.tablebusiness query: { $query: { LongitudeLatitude: { $nearSphere: [ 106.772835, -6.186753 ], $maxDistance: 0.05398047846093961 }, Prominent: { $gte: 15 }, indexContents: { $all: [ /^warung/, /^nasi/ ] } }, $hint: { LongitudeLatitude: "2d", Prominent: -1, indexContents: 1 } } ntoreturn:20 ntoskip:20 nscanned:40 nreturned:20 reslen:1141 567133ms
Fri Sep 07 03:22:04 [DataFileSync] flushing mmap took 15ms  for 9 files 
```

如果我使用我自己的具有 8GB 内存的本地计算机，结果很快，即 2 秒。**但是，如果我不限制查询，结果仍然很慢**。例如：

```
db.tablebusiness.find({ "LongitudeLatitude" : { "$nearSphere" : [106.772835, -6.186753], "$maxDistance" : 0.053980478460939611 }, "Prominent" : { "$gte" : 15 }, "indexContents" : { "$all" : [/^warung/, /^nasi/] } }).limit(200); 
```

需要很长时间。现在，找到最接近的 200 点应该不难吧？

所以内存不可能是问题。如果 5 公里内只有 3600 个点，为什么要找到 200 个点需要很长时间。

这是大型 8GB i5 机器上的日志

```
Fri Sep 07 12:29:23 [conn5] command admin.$cmd command: { buildinfo: 1 } ntoreturn:1 reslen:340 0ms
Fri Sep 07 12:29:25 [conn4] query isikotacobacoba.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.772835, -6.186753 ], $maxDistance: 0.05398047846093961 }, Prominent: { $gte: 15 }, indexContents: { $all: [ /^warung/, /^nasi/ ] } } ntoreturn:100000 ntoskip:20 nscanned:262 nreturned:242 reslen:300329 501562ms
Fri Sep 07 12:29:34 [conn4] run command admin.$cmd { ping: 1 } 
```

这是典型数据的样本

```
{
  "_id" : "warung-nasi-nur-karomah__-6.19_106.78",
  "BuildingID" : null,
  "Title" : "Warung Nasi Nur Karomah",
  "InBuildingAddress" : null,
  "Building" : null,
  "Street" : "Jl. Arjuna Utara No.35",
  "Districts" : [],
  "City" : "Jakarta",
  "Country" : "Indonesia",
   "Checkin" : 0,
  "Note" : null,
  "PeopleCount" : 0,
  "Prominent" : 45.5,
  "CountViews" : 0,
  "StreetAdditional" : null,
  "LongitudeLatitude" : {
    "Longitude" : 106.775693893433,
    "Latitude" : -6.18759540055471
  },
  "Rating" : {
    "Stars" : 0.0,
    "Weight" : 0.0
  },
  "CurrentlyWorkedURL" : null,
  "Reviews" : [],
  "ZIP" : null,
  "Tags" : ["Restaurant"],
  "Phones" : ["081380087011"],
  "Website" : null,
  "Email" : null,
  "Price" : null,
  "openingHour" : null,
  "Promotions" : [],
  "SomethingWrong" : false,
  "BizMenus" : [],
  "Brochures" : [],
  "Aliases" : [],
  "indexContents" : ["restaura", "estauran", "staurant", "taurant", "aurant", "urant", "rant", "ant", "nt", "t", "warung", "arung", "rung", "ung", "ng", "g", "nasi", "asi", "si", "i", "nur", "ur", "r", "karomah", "aromah", "romah", "omah", "mah", "ah", "h"]
} 
```

这是我家用机器上相同查询的日志（不是 amazon ec2 instance micro）

```
Fri Sep 07 10:52:28 [conn1] query isikotacobacoba.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.772835, -6.186753 ], $maxDistance: 0.05398047846093961 }, Prominent: { $gte: 15 }, indexContents: { $all: [ /^warung/, /^nasi/ ] } } ntoreturn:50 nscanned:50 nreturned:50 reslen:62090 2048ms 
```

我了解 amazonec2 比我的家用电脑慢

指数是

```
 db.tablebusiness.getIndexes();
    [
            {
                    "v" : 1,
                    "key" : {
                            "_id" : 1
                    },
                    "ns" : "isikotacobacoba.tablebusiness",
                    "name" : "_id_"
            },
            {
                    "v" : 1,
                    "key" : {
                            "LongitudeLatitude" : "2d",
                            "Prominent" : -1,
                            "indexContents" : 1
                    },
                    "ns" : "isikotacobacoba.tablebusiness",
                    "name" : "LongLat_Prominent_indexContents",
                    "dropDups" : false,
                    "background" : false
            },
            {
                    "v" : 1,
                    "key" : {
                            "LongitudeLatitude" : "2d",
                            "Prominent" : -1
                    },
                    "ns" : "isikotacobacoba.tablebusiness",
                    "name" : "LongLat_Prominent",
                    "dropDups" : false,
                    "background" : false
            }
    ] 
```

如您所见，它是正确的索引

一个可能的问题是亚马逊微实例内存不足。

然而，近球体受到 0.053980478460939611 度（约 5 公里）的限制。即使没有索引，即使只有表扫描，它也不应该需要那么多内存。

真正的问题是什么？

这是mongodb的buildinfo

```
>  db.runCommand("buildInfo")
{
        "version" : "2.0.7",
        "gitVersion" : "875033920e8869d284f32119413543fa475227bf",
        "sysInfo" : "windows sys.getwindowsversion(major=6, minor=1, build=7601,
 platform=2, service_pack='Service Pack 1') BOOST_LIB_VERSION=1_42",
        "versionArray" : [
                2,
                0,
                7,
                0
        ],
        "bits" : 64,
        "debug" : false,
        "maxBsonObjectSize" : 16777216,
        "ok" : 1
}
> 
```

我做了一些进一步的测试：

**db.tablebusiness.find({ "LongitudeLatitude" : { "$nearSphere" : [106.772835, -6.186753], "$maxDistance" : 0.053980478460939611 } }).skip(20).limit(100000);** “仅”返回 3600 个文档。实际上它确实需要500秒。

即使mongodb不使用索引，扫描3600个文档，计算距离然后对它们进行排序，即使是微机也不应该花很长时间。

现在，如果我不使用 $nearsphere 而是使用 $near ，情况会更好，但仍然令人失望

```
Fri Sep 07 04:49:38 [conn61] query isikotacobacoba.tablebusiness query: { LongitudeLatitude: { $near: [ 106.772835, -6.186753 ], $maxDistance: 0.05398047846093961 }, Prominent: { $gte: 15.0 }, indexContents: { $all: [ /^warung/, /^nasi/ ] } } ntoreturn:20 ntoskip:20 nscanned:32 nreturned:12 reslen:14984 49636ms
Fri Sep 07 04:49:38 [conn61] run command admin.$cmd { replSetGetStatus: 1, forShell: 1 } 
```

来自 Amazon EC2 实例 Micro 的 explain()

```
{
        "cursor" : "GeoSearchCursor",
        "nscanned" : 40,
        "nscannedObjects" : 40,
        "n" : 20,
        "millis" : 349182,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "isMultiKey" : false,
        "indexOnly" : false,
        "indexBounds" : {

        }
} 
```

来自我的本地主机家庭计算机的 Explain() 具有相同的查询

```
{
        "cursor" : "GeoSearchCursor",
        "nscanned" : 40,
        "nscannedObjects" : 40,
        "n" : 20,
        "millis" : 4849,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "isMultiKey" : false,
        "indexOnly" : false,
        "indexBounds" : {

        }
} 
```

这是随机发生的。大多数时候，它的速度非常快。当它很慢时，它就像地狱一样慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T05:06:40.233

EC2 Micro 实例只有 640MB 的 RAM，没有本地存储。如果您有一个不适合内存的大型工作集，您将遇到许多页面错误，这将更加昂贵，因为需要通过网络调入数据。

为了测试这一点，您可以在执行查询时运行[mongostat](http://docs.mongodb.org/manual/reference/mongostat/)并检查是否存在许多页面错误。如果是这种情况，升级到具有更多 RAM 和本地存储的更大 EC2 实例可能会解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:22:23.993

我在这里问了类似的问题[为什么 $in 比 $all 快得多？](https://stackoverflow.com/questions/12364377/why-in-is-much-faster-than-all/12567803#12567803)

原来 mongodb 中存在一个影响 $all 的错误。这是主要问题。更改硬件会有所改善，但并没有完全不用 $all 那样麻烦。

# objective-c - 如何在 iOS 中使用 PKCS8 RSA DER 私钥？

> ID：12311840
> 
> 赞同：3
> 
> 时间：2012-09-07T04:42:00.853
> 
> 标签：objective-c, ios, rsa, commoncrypto

在运行时，我的 iOS 应用程序接收到一个带有公私 RSA 密钥对的文件，该文件由其他人的 Java 生成：

```
KeyPairGenerator keygenerator;
keygenerator = KeyPairGenerator.getInstance("RSA");
keygenerator.initialize(4096);

KeyPair keypair = keygenerator.generateKeyPair();
PrivateKey privateKey = keypair.getPrivate().getEncoded();
PublicKey publicKey = keypair.getPublic().getEncoded(); 
```

我已经使用[这种方法成功读取并使用了](http://blog.flirble.org/2011/01/05/rsa-public-key-openssl-ios/)*公钥*，该方法从密钥中删除了一些前导码。

我现在想使用*私钥*。同样的方法不起作用，我认为序言有所不同。该博客建议它正在导入 PKCS#1 PEM 密钥，但随后说它们是二进制的，所以我认为它们只是指 Base64 编码的 DER 密钥。我还发现我拥有的密钥可能是[PKCS#8](https://stackoverflow.com/questions/3660132/formatting-rsa-keys-for-openssl-in-java)编码的。

当然我可以使用

```
openssl pkcs8 -nocrypt -inform der < pk8.der > pvt.pem 
```

在示例私钥上，openssl 不会抱怨。

公钥是 PKCS#1 和私有 PKCS#8 是否有意义？

*但如果可能*的话，我真的很想使用 CommonCrypto 和安全框架，而不是链接到 OpenSSL 。在 Mac OS 上，[libsecurity](http://www.opensource.apple.com/source/libsecurity_apple_csp/libsecurity_apple_csp-36859/lib/pkcs8.cpp)中有读取 PKCS#8 的函数，但这还没有进入 iOS。老实说，我确实尝试阅读源代码，但我无法弄清楚他们实际剥离密钥的位置。

[TL;DR] 如何使用 CommonCrypto 或某些 C/C++/ObjC 从 DER 私钥中去除[版本和算法PKCS#8 字段，并获取明文密钥？](ftp://ftp.rsasecurity.com/pub/pkcs/pkcs-8/pkcs-8v1_2.asn)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T06:49:15.877

没有 OpenSSL，我无法解决问题。所以这是一个使用 OpenSSL 的解决*方案*。

假设你有一个名为 privateKey 的 NSData 和另一个你想要签名的名为 signableData 的 NSData。

```
#import <openssl/x509.h>
#import <openssl/pem.h>

NSURL *cacheDir = [[[NSFileManager defaultManager] URLsForDirectory:NSCachesDirectory inDomains:NSUserDomainMask] lastObject];
NSString *infile = [[cacheDir URLByAppendingPathComponent:@"privkey.der"] path];

NSError *error;
[privateKey writeToFile:infile options:NSDataWritingFileProtectionComplete error:&error];
if (error) {
    NSLog(@"%@", error);
} else {
    BIO *in = BIO_new_file([infile cStringUsingEncoding:NSUTF8StringEncoding], "rb");
    PKCS8_PRIV_KEY_INFO *p8inf = d2i_PKCS8_PRIV_KEY_INFO_bio(in, NULL);
    NSLog(@"%i", p8inf->broken);
    EVP_PKEY *pkey = EVP_PKCS82PKEY(p8inf);
    PKCS8_PRIV_KEY_INFO_free(p8inf);
    BIO_free(in);

    uint8_t * cipherBuffer = NULL;

    // Calculate the buffer sizes.
    unsigned int cipherBufferSize = RSA_size(pkey->pkey.rsa);
    unsigned int signatureLength;

    // Allocate some buffer space. I don't trust calloc.
    cipherBuffer = malloc(cipherBufferSize);
    memset((void *)cipherBuffer, 0x0, cipherBufferSize);

    unsigned char *openSSLHash = SHA1(signableData.bytes, signableData.length, NULL);
    int success = RSA_sign(NID_sha1, openSSLHash, 20, cipherBuffer, &signatureLength, pkey->pkey.rsa);
    if (success) NSLog(@"WIN");

    NSData *signed = [NSData dataWithBytes:(const void*)cipherBuffer length:signatureLength];    

    EVP_PKEY_free(pkey);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-14T13:28:47.943

您可以在此网页中查看 der 密钥在 ASN1 结构中的外观：[https ://lapo.it/asn1js/](https://lapo.it/asn1js/)

这是[SwCrypt](https://github.com/soyersoyer/SwCrypt/blob/master/SwCrypt/SwCrypt.swift#L140)库中的代码，它从私钥中剥离 PKCS8 标头。这是 Swift，但您可以轻松地将其重写为任何其他语言。

```
 static private func stripHeaderIfAny(keyData: NSData) throws -> NSData {
        var bytes = keyData.arrayOfBytes()

        var offset = 0
        guard bytes[offset] == 0x30 else {
            throw SwError.ASN1Parse
        }
        offset += 1

        if bytes[offset] > 0x80 {
            offset += Int(bytes[offset]) - 0x80
        }
        offset += 1

        guard bytes[offset] == 0x02 else {
            throw SwError.ASN1Parse
        }
        offset += 3

        //without PKCS8 header
        if bytes[offset] == 0x02 {
            return keyData
        }

        let OID: [UInt8] = [0x30, 0x0d, 0x06, 0x09, 0x2a, 0x86, 0x48, 0x86,
                            0xf7, 0x0d, 0x01, 0x01, 0x01, 0x05, 0x00]
        let slice: [UInt8] = Array(bytes[offset..<(offset + OID.count)])

        guard slice == OID else {
            throw SwError.ASN1Parse
        }

        offset += OID.count
        guard bytes[offset] == 0x04 else {
            throw SwError.ASN1Parse
        }

        offset += 1
        if bytes[offset] > 0x80 {
            offset += Int(bytes[offset]) - 0x80
        }
        offset += 1

        guard bytes[offset] == 0x30 else {
            throw SwError.ASN1Parse
        }

        return keyData.subdataWithRange(NSRange(location: offset, length: keyData.length - offset))
    } 
```

# c# - Android 默认和 Chrome 浏览器中的 ASP.Net 会话问题

> ID：12311843
> 
> 赞同：0
> 
> 时间：2012-09-07T04:42:15.720
> 
> 标签：c#, android, asp.net, asp.net-4.0, session-state

我正在开发一个 ASP.Net 4.0 网站。我在登录中使用了基本身份验证，登录后创建了一个新会话。

我在 Android 手机（甚至 ICS）中遇到了奇怪的问题。Android 的默认浏览器和 Chrome 不允许我登录。但是 Opera mini 允许登录。

找不到与此相关的任何答案。

[这](https://stackoverflow.com/questions/5960832/maintaining-session-in-android-application-stay-authenticated-on-the-server-si)是关于类似问题的讨论，但它在 Android 中处理。

但我需要在 ASP.Net 中处理。

# java - 仅从文本字段中获取特定信息

> ID：12311846
> 
> 赞同：0
> 
> 时间：2012-09-07T04:42:48.227
> 
> 标签：java, swing, date, jtextfield, simpledateformat

我想知道如何从 JTextField 中获取特定字符。例如，如果 JTextField 的日期为 20/12/2012，那么您如何仅读取字段中的“12”。

那么是否有可能，如果可以，使用多个 JTextField 会更容易吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T04:47:12.453

一种方法是读取全文，但`string`基于`"/"`结果数组中的索引值进行拆分并取 0。

（或者）

使用解析字符串`SimpleDateFormatter`并从中获取月份`Date`（假设输入的字符串始终是日期）

如果以上都不起作用，那么使用多个文本字段会更容易

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T04:50:57.407

[StringTokenizer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)可以为你分解你的字符串。 [如果您知道字段中的格式正确， SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)可以处理日期。然而，有多个日期字段是很常见的。您可能只需要不同的字段，具体取决于您对数据的整体使用以及用户与它的交互。

# php - 上传图片并显示

> ID：12311847
> 
> 赞同：0
> 
> 时间：2012-09-07T04:42:50.210
> 
> 标签：php, html

我有一个脚本来上传图像并显示它。当我选择图像并单击上传时，它不会更新当前图像，但如果我按 f5 它将更改当前图像......非常感谢您提前。我只是 php 的新手。

```
<br><br><a href=\"javascript:location.reload(true);\"><input type='submit' name=save value=save onClick='alert(\"Profile Updated!\")'></a><input type='hidden' name='id' value=$id>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:55:48.913

您的浏览器可能正在重用缓存的图像，解决此问题的最佳方法是在图像 url 的末尾添加一个唯一标签，例如

在 php 中，我通常会有某种帮手来执行此操作，例如（非常基本）：

**

```
function image_tag($url,$attrs){
   $id = abs((int)(microtime(true)*1000)) ); //bit overkill
   return '<img src="'.$url.'?'.$id.'" '.$attrs.' />';
}

echo image_tag('some_url.jpeg',' class="my_image_class" '); 
```

**

如果您使用 javascript 更新图像，请尝试执行以下操作：

```
**$('#some_img').attr('src',some_url+'?'+(+new Date()));** 
```

应该做的伎俩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T04:50:11.163

你能像这样显示图像吗？

如果是，那么您必须附加 time() 以便正确加载，例如显示图像，如 ">

如果您只是使用 AJAX 上传图像，则取回图像数据并填写到图像对象中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T05:01:37.990

在这里，您使用 profile.php 页面上传图像，因此之后您必须重定向该页面或重新加载。

例如上传图片后放代码`header('location:index.php?msg=imageuploaded');`

# dns - 在域名注册中添加连字符

> ID：12311852
> 
> 赞同：-1
> 
> 时间：2012-09-07T04:44:04.703
> 
> 标签：dns

我想为自己注册一个域名，但像往常一样无法获得我想要的名称。例如：11minutes.com 是我想要的。

但是我发现了一个非常相似的，中间有一个连字符。例如：11-minutes.com

购买这个域名有什么缺点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T04:55:07.777

不利的一面是，寻找 11 分钟版本的人可能会在浏览器地址栏中输入另一种变体并转到错误的站点。

另一个问题是，如果已经注册的版本是与您在同一企业中的商标，他们可能会认定您侵权并取消您的域名。

在大多数情况下，最好有一些不同的东西。

# sql - 合并和内连接的 DB2 性能

> ID：12311858
> 
> 赞同：0
> 
> 时间：2012-09-07T04:44:57.297
> 
> 标签：sql, db2

我有一个性能很差的查询（我继承的），我不太确定如何优化它......据我所知，它将第二列的值设置为第一列的值加上一个值另一个表，其中找到了关系。

```
update table1 set
col2 = col1 || coalesce (( 
    select table2.the_column_wanted from table2 where table2.fk = table1.pk and
    table2.flag = 'Y'))

where flag = 'Y' and pk in ( select distinct fk from table2 ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:38:28.803

确切的速度问题取决于您的桌子的特性，但总的来说，我会调查`MERGE`这类问题。像这样的东西：

```
MERGE INTO table1 USING table2
   ON table1.pk = table2.fk and 
      table1.flag = 'Y' and
      table2.flag = 'Y'
   WHEN MATCHED THEN UPDATE SET
      table1.col2 = table1.col1 || table2.the_column_wanted; 
```

所写的查询非常可疑。您可能应该仔细查看您“继承”的所有代码。

# virtual-machine - 类似于支持 java 7 的动态代码演化的工具

> ID：12311862
> 
> 赞同：5
> 
> 时间：2012-09-07T04:46:16.217
> 
> 标签：virtual-machine, java-7, dcevm

我一直在使用动态代码评估来动态加载我的 Jboss 服务器中更改的类，

我发现这个工具非常有用和有趣，但它有一个问题，它适用于 jdk 1.6，但是当我试图在我的项目中使用 java 7 时它失败了。

任何人都可以推荐类似类型的支持 java7 的工具吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-02T08:19:17.347

我建议使用... Java 7 的 Dynamic Code Evolution VM :) DCEVM 网站不是最新的，可供下载的版本不适用于最新版本的 Java 7。一段时间以来，[Mercurial 存储库](https://ssw.jku.at/hg/dcevm)包含更新的版本，并最终在提供 Windows 和 Linux 二进制文件的[Github上进行了分叉。](https://dcevm.github.io)在 Debian/Ubuntu 上，安装 openjdk-7-jre-dcevm 软件包后也可以使用 DCEVM。

# android - 增加菜单项的大小

> ID：12311865
> 
> 赞同：1
> 
> 时间：2012-09-07T04:46:30.660
> 
> 标签：android

我已经使用 xml 创建了菜单。我想更改菜单项的大小以及

背景颜色。是否可以在菜单中进行更改。请建议我，任何帮助

将是可观的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-07T04:51:40.977

你有没有[在选项菜单 Android 中检查这个自定义背景和文本颜色](http://www.techjini.com/blog/2011/04/19/customizing-background-and-text-color-in-options-menu-android/)

# c - 如何从另一个模块调用导出的内核模块函数？

> ID：12311867
> 
> 赞同：28
> 
> 时间：2012-09-07T04:46:46.183
> 
> 标签：c, module, kernel, symbol-table

我正在编写一个 API 作为内核模块，为设备驱动程序提供各种功能。**我在mycode.c**中写了三个函数。然后我构建并加载了模块，然后将**mycode.h**复制到**< kernel >/include/linux**中。在设备驱动程序中，我有一个**#include < linux/mycode.h >**并调用这三个函数。但是当我构建驱动程序模块时，我收到三个链接器警告，说这些**函数是 undefined**。

笔记：

*   这些函数在 mycode.h中声明为**extern**
*   使用mycode.c中的**EXPORT_SYMBOL(func_name)导出函数**
*   运行命令 nm mycode.ko 将所有三个函数显示为在符号表中可用（它们旁边的大写 T，表示符号在文本（代码）部分中找到）
*   加载模块后，命令**grep func_name /proc/kallsyms**显示所有三个函数都已加载

很明显，这些函数被正确导出，内核知道它们是什么以及它们在哪里。那么为什么司机看不到他们的定义呢？知道我错过了什么吗？

* * *

**编辑：我在这里找到了一些关于此的信息：http:** [//www.kernel.org/doc/Documentation/kbuild/modules.txt](http://www.kernel.org/doc/Documentation/kbuild/modules.txt)

> 有时，外部模块使用来自另一个外部模块的导出符号。kbuild 需要完全了解所有符号，以避免发出有关未定义符号的警告。针对这种情况存在三种解决方案。
> 
> 注意：建议使用顶级 kbuild 文件的方法，但在某些情况下可能不切实际。
> 
> 使用顶级 kbuild 文件 如果你有两个模块，foo.ko 和 bar.ko，其中 foo.ko 需要来自 bar.ko 的符号，你可以使用一个通用的顶级 kbuild 文件，这样两个模块在同一个编译建造。考虑以下目录布局：
> 
> ```
>  ./foo/ <= contains foo.ko
>   ./bar/ <= contains bar.ko 
> ```
> 
> 顶级 kbuild 文件将如下所示：
> 
> ```
>  #./Kbuild (or ./Makefile): 
>       obj-y := foo/ bar/ 
> ```
> 
> 并执行
> 
> ```
>  $ make -C $KDIR M=$PWD 
> ```
> 
> 然后将执行预期并编译两个模块，并充分了解任一模块的符号。
> 
> 使用额外的 Module.symvers 文件 构建外部模块时，会生成一个 Module.symvers 文件，其中包含所有未在内核中定义的导出符号。要从 bar.ko 访问符号，请将 Module.symvers 文件从 bar.ko 的编译复制到构建 foo.ko 的目录。在模块构建期间，kbuild 将读取外部模块目录中的 Module.symvers 文件，当构建完成时，会创建一个新的 Module.symvers 文件，其中包含所有已定义符号的总和，而不是内核的一部分。
> 
> 使用“make”变量 KBUILD_EXTRA_SYMBOLS 如果从另一个模块复制 Module.symvers 不切实际，您可以在构建文件中为 KBUILD_EXTRA_SYMBOLS 分配一个以空格分隔的文件列表。这些文件将在 modpost 的符号表初始化期间加载。

但是对于所有这三种解决方案，为了让任何驱动程序使用我的 API，它必须要么创建一个新的 Makefile 要么直接访问我的 Module.symvers 文件？这似乎有点不方便。我希望他们能够#include 我的头文件并且一切顺利。不存在其他替代方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T14:34:42.390

根据我的研究，似乎只有这三种方法可以处理这种情况，而且我已经让它们中的每一种都起作用了，所以我想我会从中挑选出我最喜欢的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-18T10:55:39.093

**最小的 QEMU + Buildroot 示例**

我已经在一个完全可重现的 QEMU + Buildroot 环境中测试了以下内容，所以也许拥有这个工作版本将帮助你找出你的代码有什么问题。

GitHub 上游以文件为中心：

*   [dep.c](https://github.com/cirosantilli/linux-kernel-module-cheat/blob/701230021d0a93169f348bf9ec3ef8bc1c2c8c3c/kernel_module/dep.c)
*   [dep2.c](https://github.com/cirosantilli/linux-kernel-module-cheat/blob/701230021d0a93169f348bf9ec3ef8bc1c2c8c3c/kernel_module/dep2.c)
*   [生成文件](https://github.com/cirosantilli/linux-kernel-module-cheat/blob/701230021d0a93169f348bf9ec3ef8bc1c2c8c3c/kernel_module/Makefile)

dep.c

```
#include <linux/delay.h> /* usleep_range */
#include <linux/kernel.h>
#include <linux/kthread.h>
#include <linux/module.h>

MODULE_LICENSE("GPL");

int lkmc_dep = 0;
EXPORT_SYMBOL(lkmc_dep);
static struct task_struct *kthread;

static int work_func(void *data)
{
    while (!kthread_should_stop()) {
        printk(KERN_INFO "%d\n", lkmc_dep);
        usleep_range(1000000, 1000001);
    }
    return 0;
}

static int myinit(void)
{
    kthread = kthread_create(work_func, NULL, "mykthread");
    wake_up_process(kthread);
    return 0;
}

static void myexit(void)
{
    kthread_stop(kthread);
}

module_init(myinit)
module_exit(myexit) 
```

dep2.c

```
#include <linux/delay.h> /* usleep_range */
#include <linux/kernel.h>
#include <linux/kthread.h>
#include <linux/module.h>

MODULE_LICENSE("GPL");

extern int lkmc_dep;
static struct task_struct *kthread;

static int work_func(void *data)
{
    while (!kthread_should_stop()) {
        usleep_range(1000000, 1000001);
        lkmc_dep++;
    }
    return 0;
}

static int myinit(void)
{
    kthread = kthread_create(work_func, NULL, "mykthread");
    wake_up_process(kthread);
    return 0;
}

static void myexit(void)
{
    kthread_stop(kthread);
}

module_init(myinit)
module_exit(myexit) 
```

现在你可以这样做：

```
insmod dep.ko
insmod dep2.ko 
```

使用 Buildroot 设置，事情已经`/lib/module/*/depmod`在使用依赖项配置 depmod，所以这足以加载两者：

```
modprobe dep 
```

此外，如果您使用 构建内核`CONFIG_KALLSYMS_ALL=y`，则可以通过以下方式看到导出的符号：

```
grep lkmc_dep /proc/kallsyms 
```

另请参阅：[kallsyms 是否具有内核函数的所有符号？](https://stackoverflow.com/questions/20196636/does-kallsyms-have-all-the-symbol-of-kernel-functions/44614878#44614878)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-25T22:29:24.140

OK：你有一个功能所在的模块和一个要导入它的地方，对吗？

你必须在函数所在的地方使用"EXPORT_SYMBOL("函数的名称") 例如foo。所以在"c"文件中定义函数"foo"并放入：EXPORT_SYMBOL(foo)

确保你在一个公共头文件中有“foo”的原型（你可以把它放在每个模块的不同位置，它会工作，但如果签名改变你会自找麻烦）。所以说： void foo(void *arg);

然后另一个想要它的模块只是调用“foo”，你很好。

另外：确保首先使用 foo 加载模块。如果您有交叉依赖项，例如 module2 需要来自 module1 的 foo ，而 module1 需要来自 module2 的 bar ，则您需要一个注册函数与另一个注册函数。如果你想知道，请单独问一个Q。

# algorithm - 有没有快速的矩阵求幂方法？

> ID：12311869
> 
> 赞同：24
> 
> 时间：2012-09-07T04:47:05.183
> 
> 标签：algorithm, linear-algebra, matrix-multiplication

有没有比简单的分治算法更快的矩阵求幂方法来计算 M ^n（其中 M 是矩阵，n 是整数）？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-07T05:04:05.633

您可以将矩阵分解为特征值和特征向量。然后你得到

```
M = V^-1 * D * V 
```

其中 V 是特征向量矩阵，D 是对角矩阵。要将其提高到 N 次方，您会得到如下信息：

```
M^n = (V^-1 * D * V) * (V^-1 * D * V) * ... * (V^-1 * D * V)
    = V^-1 * D^n * V 
```

因为所有 V 和 V^-1 项都取消了。

由于 D 是对角线，因此您只需将一堆（实数）数字提高到 n 次方，而不是完整矩阵。你可以在 n 的对数时间内做到这一点。

计算特征值和特征向量是 r^3（其中 r 是 M 的行数/列数）。根据 r 和 n 的相对大小，这可能会更快，也可能不会。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-07T12:05:08.783

使用欧拉快速幂算法非常简单。使用下一个算法。

```
#define SIZE 10

//It's simple E matrix
// 1 0 ... 0
// 0 1 ... 0
// ....
// 0 0 ... 1
void one(long a[SIZE][SIZE])
{
    for (int i = 0; i < SIZE; i++)
        for (int j = 0; j < SIZE; j++)
            a[i][j] = (i == j);
}

//Multiply matrix a to matrix b and print result into a
void mul(long a[SIZE][SIZE], long b[SIZE][SIZE])
{
    long res[SIZE][SIZE] = {{0}};

    for (int i = 0; i < SIZE; i++)
        for (int j = 0; j < SIZE; j++)
            for (int k = 0; k < SIZE; k++)
            {
                res[i][j] += a[i][k] * b[k][j];
            }

    for (int i = 0; i < SIZE; i++)
        for (int j = 0; j < SIZE; j++)
            a[i][j] = res[i][j];
}

//Caluclate a^n and print result into matrix res
void pow(long a[SIZE][SIZE], long n, long res[SIZE][SIZE])
{
    one(res);

    while (n > 0) {
        if (n % 2 == 0)
        {
            mul(a, a);
            n /= 2;
        }
        else {
            mul(res, a);
            n--;
        }
    }
} 
```

请在下面找到数字的等价物：

```
long power(long num, long pow)
{
    if (pow == 0) return 1;
    if (pow % 2 == 0)
        return power(num*num, pow / 2);
    else
        return power(num, pow - 1) * num;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T04:52:33.063

[通过平方](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)取幂经常用于获得矩阵的高次幂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T05:09:53.030

[我会推荐用于以矩阵形式](http://en.wikipedia.org/wiki/Fibonacci_number#Matrix_form)计算斐波那契数列的方法。AFAIK，它的效率是 O(log(n))。

# iphone - CAEmitterLayer - kCAEmitterLayerRectangle 渲染模式？

> ID：12311875
> 
> 赞同：0
> 
> 时间：2012-09-07T04:47:49.130
> 
> 标签：iphone, ios, core-animation, caemitterlayer

我想在矩形内制作粒子。

这段代码有什么问题？它仅从发射器位置发射，而不是从矩形中的随机位置发射。

```
fireEmitter = [CAEmitterLayer layer];
[self.view.layer fireEmitter];
fireEmitter.emitterPosition = self.view.center;
fireEmitter.emitterSize =CGSizeMake(100, 100);
fireEmitter.renderMode = kCAEmitterLayerRectangle;
fireEmitter.emitterCells = [NSArray arrayWithObjects:fire, nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T05:33:21.963

`kCAEmitterLayerRectangle`不是 的有效值[`renderMode`](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAEmitterLayer_class/Reference/Reference.html#//apple_ref/doc/constant_group/Emitter_Modes)。相反，您应该使用这些值之一

```
kCAEmitterLayerUnordered
kCAEmitterLayerOldestFirst
kCAEmitterLayerOldestLast
kCAEmitterLayerBackToFront
kCAEmitterLayerAdditive 
```

该`kCAEmitterLayerRectangle`值应设置为[`emitterShape`](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAEmitterLayer_class/Reference/Reference.html#//apple_ref/doc/constant_group/Emitter_Shape)默认为 `kCAEmitterLayerPoint`. 这就是为什么你只从一个点发射。有效的emitterShapes 是：

```
kCAEmitterLayerPoint
kCAEmitterLayerLine
kCAEmitterLayerRectangle
kCAEmitterLayerCuboid
kCAEmitterLayerCircle
kCAEmitterLayerSphere 
```

请参阅[文档](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAEmitterLayer_class/Reference/Reference.html#//apple_ref/doc/constant_group/Emitter_Shape)了解它们的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:48:32.660

正如大卫已经指出的那样，您使用的值对`renderMode`. 它用于`emitterShape`. 这可能是一个非常令人沮丧的错误，因为 Xcode 不会给您警告，因为它们属于同一类型 ( `NSString`)。[即使阅读了文档](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CAEmitterLayer_class/Reference/Reference.html)，这样的错误也很容易被忽略。

使用诸如[Particle Playground](https://apps.apple.com/us/app/particle-playground/id600661093)（用于 UIKit 发射器）或[Particle Designer](http://www.71squared.com/en/particledesigner)（用于 cocos2d 发射器）之类的工具会有很大帮助，因为它们只允许文档中指定的值。

它们都允许您在 Mac 上配置发射器层/单元。Particle Playground 将发射器导出为目标 c 类，以便在您的项目中轻松导入。粒子设计器以交换格式导出，可以轻松导入正确的 cocos2d 发射器类。

完全披露：我编写了 Particle Playground，我与 Particle Designer 没有任何关系（尽管我真的很喜欢、使用并推荐它用于 cocos2d 项目）。

# .net - 任务并行库文件句柄

> ID：12311883
> 
> 赞同：0
> 
> 时间：2012-09-07T04:48:38.163
> 
> 标签：.net, task-parallel-library

我正在使用并行任务读取一些文件。在此操作期间，如果我取消任务，则文件句柄不会关闭。任务已成功取消。看起来我需要做更多的事情来在取消期间关闭文件句柄，但无法弄清楚我需要做什么。我假设任务取消将处理所有对象，但事实并非如此。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T06:31:50.193

取消任务不会处理任何事情。我真的不知道您如何取消或启动您`Task`的 s 因为您没有显示任何代码，但推荐的方法是调用`Cancel()`task的方法`CancellationTokenSource`。当你的任务在做它应该做的事情时，它应该检查 tokens 属性`IsCancellationRequested`。[这篇文章](https://stackoverflow.com/questions/4783865/how-do-i-abort-cancel-tpl-tasks)很好地解释了这个过程。

清理工作完全取决于您。垃圾收集器将杀死普通对象，但您需要调用`Dispose`，`Close`或您正在使用的任何昂贵对象的等效项。

为此，您有多种选择，`Dispose`手动调用、使用`using`块或实现某种工作单元模式。

# hadoop - 从一台机器执行 copyFromLocal 命令到另一台机器

> ID：12311885
> 
> 赞同：1
> 
> 时间：2012-09-07T04:48:49.537
> 
> 标签：hadoop

我正在执行以下命令：

```
hadoop fs -copyFromLocal /tmp/temp/pattern_BS.conf hdfs://wihadoopn301p.prod.ch3.s.com:/user/hdfs/hadoop/qa2/BS/ 
```

在此我试图将本地驱动器上的文件夹复制到`pattern_BS.conf`位置。`/tmp/temp``hdfs://wihadoopn301p.prod.ch3.s.com:/user/hdfs/hadoop/qa2/BS/`

但它给出了以下错误：

```
copyFromLocal: For input string: ""
Usage: java FsShell [-copyFromLocal <localsrc> ... <dst>] 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:09:02.383

我认为您应该使用下面给出的命令，因为 copyFromLocal 期望第一个参数是本地文件，第二个参数是 hdfs 中的位置

hadoop fs -copyFromLocal /tmp/temp/pattern_BS.conf /user/hdfs/hadoop/qa2/BS/

# objective-c - NSString 替代 NSData 可能，有什么后果？

> ID：12311892
> 
> 赞同：0
> 
> 时间：2012-09-07T04:49:50.397
> 
> 标签：objective-c, ios

假设我正在存储一个 ASCII 流，比如`0x0a0b0c00`. 如果我将数据存储在一个`NSData`实例与一个实例中，会发生什么情况`NSString`？数据会被转换成其他东西吗？我有点困惑，因为它们都是保存完全相同的东西的缓冲区。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T05:09:04.410

NSData 顾名思义，是一个存储原始二进制数据的容器。NSData 不对二进制数据的格式做**任何假设**。它可以是文本、图像、音频等。

NSString将数据**解释**为具有给定编码的文本：可以是 ASCII、Unicode 等。在大多数情况下，NSString 会将字节复制到其内部数据结构以存储原始二进制文件。

如果不是文本，请使用 NSData。在代码中更清楚地了解正在管理的内容并避免与字符串编码作斗争。

# shorthand - 多个链接的简写？

> ID：12311894
> 
> 赞同：0
> 
> 时间：2012-09-07T04:49:58.490
> 
> 标签：shorthand

我有一个相当长的快速链接列表（大约 20 个），我将在我的主页上嵌入这些链接。不是将每个链接的完整网址添加到每个锚点，有没有办法添加每个链接的结尾。

例如，如果 URL 的链接是 [http://support.proboards.com/index.cgi?display&thread=423890](http://support.proboards.com/index.cgi?display&thread=423890) *，如您所见，我的论坛是 proboards 论坛，如果这对这里有任何帮助的话。*

*每个网址的位置都是本地的，* 而不是添加完整的网址，有没有办法使用类似的东西

`<a href = "&thread=423890">`
或者也许 `<a href = "this.thread=423890">`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T04:55:42.280

不是在纯 HTML 中，你会得到的最好的是`<a href="index.cgi?display&thread=423890">`，这是你应该已经使用的。当然，我假设 support.proboards.com 是您的网站。

如果你*真的*想要的话，你*可以*使用 JavaScript 并调用一个函数，但是 a）我想知道你真正从中获得了什么，b）这对关闭 JavaScript 的人不起作用（a la NoScript），c）我想知道如果谷歌能正确看到所有的链接。`openThread(423890)`

 *据推测，这些页面都是由服务器端脚本生成的，所以你应该只编码`index.cgi?display&thread=`一次......

如果你很难做一些更短的事情，我建议使用 URL 重写。`.../display/thread/423890`如果您已经来自 /display/thread/ 页面，则可以使用类似的 URL ，然后使用更短的内容。但这需要链接转到您可以控制的页面。*

# php - 将 HTML 属性从 onclick 事件传递给 jQuery 函数

> ID：12311897
> 
> 赞同：4
> 
> 时间：2012-09-07T04:50:08.320
> 
> 标签：php, jquery, attributes, onclick

我在将 html 元素之一传递给 jQuery 时遇到问题。我知道`attr()`我们可以访问属性。不过我觉得我做错了什么。

这是我的简单 jQuery 函数：

```
<script type="text/javascript">
    function test(value) {
        alert(value);
    }
</script> 
```

我有一个由 foreach 循环创建的动态列表框：

```
<select  multiple="multiple" name="factors1" id="main_factors" style="width: 200px; height: 200px;">

<?php foreach ($array as $option): ?>
    <option onclick="test(<script>this.attr('title').value</script>);"
            id="<?php echo $option[0]; ?>"
            title="<?php echo $option[2]; ?>" 
            value="<?php echo $option[0]; ?>">
        <?php echo $option[1]; ?>
    </option>
<?php endforeach ?>

</select> 
```

例如，当有人单击列表框中的项目时，我希望它的项目显示在我的消息框中。但是这段代码对我不起作用。

```
onclick="test(<script>this.attr('title').value</script>);" 
```

如何从 onclick 属性将标题属性值发送到我的函数？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T04:57:20.387

```
onclick="test(this)"

function test(value)
{
    alert($(value).attr('title'));
} 
```

[看演示](http://jsfiddle.net/FLMrp/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T04:58:33.380

试试这个代码。我认为您在代码中犯了错误。

```
<select  multiple="multiple" name="factors1" id="main_factors" style="width: 200px; height: 200px;" onchange="test(this.value);">

<?php foreach ($array as $option): ?>
<option id="<?php echo      $option[0]; ?>" title="<?php echo $option[2]; ?>" 
value="<?php  echo $option[0]; ?>"><?php echo $option[1]; ?></option>
<?php endforeach ?>

</select> 
```

在你的 jQuery 中：

```
<script type="text/javascript">
    function test(value)
       {
        alert(value);
       }
    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T05:03:47.227

您应该需要在元素上使用`onchange`事件。`select`

```
​&lt;select onchange="test(this.value)"> 
```

**JavaScript：**

```
function test(value) {
    alert(value)        
}​ 
```

[**看演示**](http://jsfiddle.net/akhurshid/5EPUz/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T06:21:24.010

由于您已经导入并正在使用 jQuery，因此最好将事件处理程序与 html 元素分开，作为一种设计与功能的分离：

`onclick`从您的 php中完全删除：

```
<select  multiple="multiple" name="factors1" id="main_factors" style="width: 200px; height: 200px;">
<?php foreach ($array as $option): ?>
<option id="<?php echo $option[0]; ?>" title="<?php echo $option[2]; ?>" 
value="<?php  echo $option[0]; ?>"><?php echo $option[1]; ?></option>
<?php endforeach ?>
</select> 
```

`change`并从 javascript中将函数绑定到事件：

```
$(document).ready(function() {
    $('#main_factors').change( function() {
        test( $(this).val() );
        // you can also do:
        // test( this.value );
    });
});

function test(value)
{
    alert(value);
} 
```

# jquery - 停止 jQuery.transition

> ID：12311900
> 
> 赞同：1
> 
> 时间：2012-09-07T04:50:50.593
> 
> 标签：jquery

[这个库](http://ricostacruz.com/jquery.transit/)创建了一些不错的平滑过渡，但有时我需要提前停止动画。通常，我会使用 . `.stop(true)`，但该方法似乎不适用于`jQuery.transition`. 还有其他方法吗？

* * *

编辑：我可能疯了。它现在*似乎*正在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T04:53:57.890

试试：[http ://api.jquery.com/clearQueue/](http://api.jquery.com/clearQueue/)

```
 var myDiv = $("div");
  myDiv.clearQueue(); 
```

> 这种方式类似于.stop(true)。然而，虽然 .stop() 方法仅用于动画，但 .clearQueue() 也可用于删除已使用 .queue() 方法添加到通用 jQuery 队列的任何函数。

# ruby-on-rails-3 - rails 3 - form_for 带括号的第一个参数字符串

> ID：12311901
> 
> 赞同：1
> 
> 时间：2012-09-07T04:50:51.117
> 
> 标签：ruby-on-rails-3, form-for, actionview

`ActionView::Base`实例方法`form_for`可以接受一个字符串作为它的第一个参数。有时您想在一个编辑表单中一次更新多个对象。因此，您可以将字符串作为第一个参数传递`form_for`给与对象名称连接的一组方括号（例如`person[]`）。然后，您可以遍历人员对象数组并调用其`FormBuilder`上的实例方法，例如`text_field`，传递与人员对象关联的属性。这很好，可以理解。

但是，我正在查看源代码，我遇到了这个：

```
if @object_name.to_s.match(/\[\]$/)
  if object ||= @template.instance_variable_get("@#{Regexp.last_match.pre_match}") and object.respond_to?(:to_param)
    @auto_index = object.to_param
  else
    raise ArgumentError, "object[] naming but object param and @object var don't exist or don't respond to to_param: #{object.inspect}"
  end
end 
```

`@object_name`是传递给 的构造函数的参数`FormBuilder`，它指的是传递给 的第一个参数`form_for`，例如`user[]`. 在这里，我们检查字符串是否包含方括号，如果包含，我们检查模板`ActionView::Base`以查看它是否包含`@user`实例变量（`Regexp.last_match.pre_match`返回`user`，然后我们只需插入`@`以构建实例变量）。请记住，实例变量是从控制器复制到视图层的，因此如果我们在控制器中定义了它，它将在`ActionView`. 因此，假设因为我们处于编辑表单中，所以我们确实有一个`@user`存在的对象。在这里，我们调用它的`to_param`方法，它将`id`记录的作为字符串返回（假设`to_param`没有被覆盖）并将其分配给`@auto_index`实例变量。

这是我的问题。假设它`@user`确实存在并且具有`1`分配给的 id `@auto_index`。但是如果我们正在检查一个带有方括号的字符串`user[]`，显然我们期待一个`id`s 数组，那么为什么它只检查一个对象并将其分配给自动索引，而不是抓取用户对象的集合并分配它们的所有 id自动索引？

请参阅第 1197 行：

[https://github.com/rails/rails/blob/master/actionpack/lib/action_view/helpers/form_helper.rb](https://github.com/rails/rails/blob/master/actionpack/lib/action_view/helpers/form_helper.rb)

# git - git push 失败：无法锁定现有信息/参考

> ID：12311905
> 
> 赞同：0
> 
> 时间：2012-09-07T04:52:00.333
> 
> 标签：git, https, git-push

当我尝试推送到我的 git repo（在 HTTPS 服务器上）时，我收到以下错误：

```
error: cannot lock existing info/refs
fatal: git-http-push failed 
```

我不知道这是否相关，但我不小心做了一个

```
git add .git 
```

它似乎没有做任何事情，所以我认为 git 足够聪明，可以忽略我。

为什么 git 无法推送，我该如何解决？

拉动工作正常。

**额外信息**：我有另一个本地克隆，我仍然可以从中推送到中央仓库。我认为这表明我对我的 .git 目录做了一些事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T05:07:08.177

这似乎解决了它：

1.  将更改推送到另一个本地克隆（DVCS 之美），
2.  然后推到中央，
3.  然后在原始克隆中，从中央拉
4.  并再次推动。

我不知道为什么，但它现在有效。

# jquery - $.ajax 响应中的 .find()

> ID：12311906
> 
> 赞同：1
> 
> 时间：2012-09-07T04:52:05.457
> 
> 标签：jquery, html, ajax

我只是在做一个简单的 ajax 请求来获取文件的内容，但是当我尝试获取实际内容时，`<body>`它总是什么都不返回。

```
jQuery.ajax(location).done(function(response) {
    // RETURNS []
    console.log(jQuery(response).find('body'));

    // <body class="html ...">
    // RETURNS []
    console.log(jQuery(response).find('.html'));

    // When I try to get any other div it just works
    // RETURNS THE DIV
    console.log(jQuery(response).find('#header'));
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:03:22.493

*jQuery(response)*去掉了**html**、**head**和**body**标签

您需要将您的正文内容包装在一个额外的 div 中并查找它。

编辑：

jQuery( *string* ) 解析字符串以检查它是选择器还是 html 片段。如果它是一个 html 片段，则该字符串被注入到一个*不*支持**html**、**head**和**body**标签的空 div 中，因此它们被*剥离*。

# c# - 如何使用 silverlight 签署数据库注册表

> ID：12311908
> 
> 赞同：1
> 
> 时间：2012-09-07T04:52:11.593
> 
> 标签：c#, silverlight, digital-signature, xml-dsig

我在 Silverlight 客户端中有我的密钥对，我想签署一个数据库注册表。这可能吗？我将生成什么样的 XML？分离的，包围的，包围的？

我尝试了一个在 Internet 上找到的示例，但它使用 System.Cryptography 命名空间来签名和创建 XMLDSig，但命名空间在 Silvelight 中无效。我不想使用 Chilkat 或 Blackbox 等其他库。

提前致谢。

# android - 如何使用指南针标题更新列表视图，如 android 中的谷歌位置应用程序

> ID：12311912
> 
> 赞同：1
> 
> 时间：2012-09-07T04:52:55.650
> 
> 标签：android, geolocation, heading

我试图在列表视图上显示一个指向目标位置的箭头，我通过计算当前和目标之间的方位来做到这一点，但是当用户旋转他的设备以及用户位置发生变化时，我需要更新箭头，谁能帮忙我这样做。谢谢...

# android - 片段未正确实例化

> ID：12311913
> 
> 赞同：0
> 
> 时间：2012-09-07T04:52:57.650
> 
> 标签：android, android-layout

我在使用支持库实现在我的程序中实例化片段时遇到问题。以下是我正在尝试执行的任务的简要描述以及我尚未取得成果的一些尝试：

我的应用程序的 UI 可能会根据用户偏好进行更改。为了做到这一点，我为每个不同的布局使用一个片段，并根据用户的说明在给定时间替换 UI 中的活动片段。以下是我尝试（但失败）的一些方法：

*   我尝试在我的活动中将片段添加为非静态内部类。只要用户不旋转设备，这种方法就有效。用户旋转设备后，应用程序立即崩溃（对于 Portrait -> Landscape rotation**和**`Landscape -> Portrait rotation)`. ：

***   将 Fragment 实现为静态内部类。当 Fragment 启动时，它会扩展其布局，然后在稍后的 Activity 控制流中，我可以对 Fragment 的子视图进行处理（特别是向按钮添加侦听器）。不幸的是，这不起作用，因为我无法使用`[frag_name].getView().findViewById()`. 关于在非静态上下文中引用静态对象的一些事情。我再次检查了 SO，这导致我：

    *   将 Fragment 实现为与 Activity 完全不同的类。这似乎是 developer.android.com 上的开发文档推荐的内容。这样做后，一切似乎都可以正常编译，但是当我尝试引用 Fragment 的子视图时（再次使用`[frag_name].getView().findViewById())`，我得到一个**NullPointerException**。当我在我的代码中添加 System.out.println() 语句以找出确切的内容时正在发生，我发现片段中 onCreateView 内的打印语句永远不会被触发，这意味着 onCreateView 永远不会被触发。** 

 **所以现在，我被困住了。我究竟做错了什么？这一点的精确实现并不像从经验中学习一些东西那么重要，因此我可以在 Android 开发方面做得更好，所以如果单独的类比静态类更好，反之亦然，我真的不在乎我使用哪个。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T07:58:59.690

弄清楚了。事实证明，为了做我想做的事，我必须将 Activity 注册为每个片段的侦听器，并在两者之间来回传递“准备启用按钮”消息。对于使用此问题进行进一步研究的任何人，有关如何执行此操作的指南位于 Android 开发人员指南中，此处为：http: [//developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)**

# php - Facebook 授权循环/验证验证码错误

> ID：12311917
> 
> 赞同：0
> 
> 时间：2012-09-07T04:53:13.813
> 
> 标签：php, facebook, facebook-php-sdk, facebook-opengraph

我有以下代码可以使用 Facebook 登录：

```
// Include Facebook SDK

$this->facebook = new Facebook(array(
    'appId'  => 'APP ID',
    'secret' => 'APP SECRET',
    'cookie' => true
));

$uid = $this->facebook->getUser();
if($uid) {
    try {
        echo 'Done!';
    } catch (FacebookApiException $e) {
        echo $e;
        error_log($e);
    }
} else {
    $loginUrl = $this->facebook->getLoginUrl(array(
        'redirect_uri' => 'http://ogabrielsantos.com.br/dev/index.php?route=account/connect/facebook',
        'scope' => 'user_birthday'
    ));

    echo('<script>top.location.href = "' . $loginUrl . '";</script>');
} 
```

**更新 1**

我可以授权应用程序，但是，授权后，我无法获取登录用户，永远重定向到

```
http://ogabrielsantos.com.br/dev/index.php?route=account%2Fconnect%2Ffacebook&state=RANDOM STATE&code=RANDOM CODE#_=_ 
```

**我努力了：**

*   将APP放入服务器；
*   验证 APP 设置。一切都是正确的；
*   验证设置和代码中的 url 是否相同。一切正常；
*   我的网址写得正确：`http://ogabrielsantos.com.br/dev/index.php?route=account/connect/facebook`;
*   重置应用程序秘密。

没有任何效果。

您可以检查会发生什么：

`http://ogabrielsantos.com.br/dev/index.php?route=account/connect/facebook`

Facebook 要求您授权该应用程序获取您的网站，这是一个安全的信息。

**更新 2**

以下代码：

```
$this->facebook = new Facebook(array(
    'appId'  => $this->connect->config->get('facebook_api_key'),
    'secret' => $this->connect->config->get('facebook_app_secret'),
    'cookie' => true
));

$uid = $this->facebook->getUser();

echo'<pre>';
print_r($this->facebook);
echo'</pre>';
exit; 
```

返回：

```
Facebook Object
(
    [sharedSessionID:protected] => 
    [appId:protected] => APP ID
    [appSecret:protected] => APP SECRET
    [user:protected] => 0
    [signedRequest:protected] => 
    [state:protected] => 
    [accessToken:protected] => APP ID|APP SECRET
    [fileUploadSupport:protected] => 
    [trustForwarded:protected] => 
) 
```

我认为这`accessToken`是错误的，用管道分隔符返回我的`APP ID`和。`SECRET`

**更新 3：**

现在，我验证了代码，但是，总是得到`Fatal error: Uncaught OAuthException: Error validating verification code`

```
if(isset($_GET['code'])) {
    $api = $this->facebook->api('/oauth/access_token', array(
        'client_id' => APP ID,
        'redirect_uri' => 'http://ogabrielsantos.com.br/dev/index.php?route=account/connect/facebook',
        'client_secret' => APP SECRET,
        'code' => $_GET['code']
    ));

    echo'<pre>';
    var_dump($api);
    print_r($this->facebook->getUser());
    echo'</pre>';
    exit;
} 
```

*我已经阅读了一些问题，这些问题相似但无能为力。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-19T09:03:53.073

Facebook 分享和 Facebook 登录功能是完全独立的，每个都需要自己的应用程序。

您是否在要登录的页面中使用 facebook 共享？

参考：[http ://www.ning.com/help/?p=8523](http://www.ning.com/help/?p=8523)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:36:08.577

你在本地工作吗？如果是的话，这可能就是原因。如果没有，请在 developers.facebook.com/apps/APP_ID 中检查您的应用设置 1\. 您必须将代码中编写的 url 与应用设置中的 URL 进行比较。**2\. 另一个原因可能是您应用程序设置中的 url 没有正确编写，我记得必须在Page Tab settings**中我的 url 末尾添加 index.php 。为我工作 3\. 另一种选择是获取新的 APP_SECRET 并更新您的代码 这些选项来自我的个人经验，您的问题也可能是其他问题，但您不会失去任何尝试

# math - 包含至少 3 个连续元素的 {1,2,3,...,N} 的子集数

> ID：12311918
> 
> 赞同：3
> 
> 时间：2012-09-07T04:53:13.537
> 
> 标签：math, combinatorics

假设我们有一个这样的集合，`{1,2,3}`那么只有一种方法可以选择 3 个连续的数字......它是集合 {1,2,3}......

对于一组 {1,2,3,4}，我们有 3 种方式：`123` `234` `1234`

（从技术上讲，这些是无序的数字集，但连续编写它们会有所帮助）

*   f(5) ; {1,2,3,4,5} -> 8 种方式：`123` `1234` `1235` `12345` `234` `2345` `345` `1345`
*   f(6) ; {1,2,3,4,5,6} -> 20 种方式：...
*   f(7) ; {1,2,3,4,5,6,7} -> 47 种方式：...

因此，对于给定的 N，我可以通过应用蛮力得到答案，并计算所有具有 3 个或更多连续数字的子集。

在这里，我只是想找出一种模式，一种获得给定 N 的所有此类子集数量的技术。

问题被进一步推广到......在一组大小为 N 中发现 m 个连续数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T06:39:29.457

此问题与“在某处某处连续至少三个连续`1`s 的 N 位二进制数的数量”之间存在双射（如果排除在子集中，则作为数字的双射为 0，如果包含在子集中，则为 1） .

这是一个已知问题，应该是足够的信息来谷歌搜索结果，如果你搜索`number of n-digit binary strings with m consecutive 1s`，第二次点击是[查找所有 n 位二进制数，其中 r 个相邻数字为 1](https://stackoverflow.com/questions/10510060/finding-all-n-digit-binary-numbers-with-r-adjacent-digits-as-1)

或者，您可以将其查找为[http://oeis.org/search?q=0%2C0%2C1%2C3%2C8%2C20%2C47](http://oeis.org/search?q=0%2C0%2C1%2C3%2C8%2C20%2C47)（基于您对前几个术语所做的暴力破解） - 结果在 的显式公式中`2^n - tribonacci(n+3)`，请参阅[此处](http://mathworld.wolfram.com/TribonacciNumber.html)以获取 tribonacci 数的显式公式。它还给出了递归关系。给出的类比是“在公平硬币的 n 次翻转中获得至少 1 次 3 正面的概率（在 2^n 中）”

我只能假设一般问题的答案是 2^n - F [m] (n+m)，其中 F [m]是第 m^个 [n 步斐波那契数](http://mathworld.wolfram.com/Fibonaccin-StepNumber.html)（*编辑：[似乎确实如此](http://oeis.org/search?q=%09+a%28n%29+is+the+number+of+n-tosses+having+a+run+of+or+more+heads+for+a+fair+coin)*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T05:00:55.933

这对我来说听起来像是家庭作业，所以我会让你开始。FoOne 的方法是考虑运行的最低和最高成员 L 和 H。如果设置大小为 N，并且您的最小运行长度为 M，那么对于 L 的每个可能位置 P，您可以计算出有多少个位置H 有....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T05:03:37.517

不知道你的意思是不是连续的。如果不是，那么对于 {1, 2, 3, 4} 有 4 种可能性： {1, 2, 3} {2, 3, 4} {1, 3, 4} {1, 2, 3, 4}

我认为你可以用 N!/3! 计算解决方案！其中N！= N*(N-1) *(N-2)* ...*1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T05:09:07.333

使用一些 python 代码，我们可以调查这个：

```
y = set()

def cons(li, num):
    if len(li) < num:
        return
    if len(li) == num:
        y.add(tuple([i for i in li]))
    else:
        y.add(tuple([i for i in li]))
        cons(li[1:], num)
        cons(li[:-1], num) 
```

这个解决方案会很慢（实际上它的复杂性是指数级的），但是尝试一些小的列表大小，我认为你应该能够掌握这种模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T06:47:39.713

## 快速回答：

```
Sequences(n) = (n-1)*(n-2) / 2 
```

## 长答案：

你可以通过归纳来做到这一点。首先，我要重新陈述问题，因为您的问题陈述不够清楚。

*   规则 1：对于所有连续数字 1..n 的集合，其中 n 为 2 或更大

*   规则 2：计算连续数 m..m+q 的子集 S(n)，其中 q 为 2 或更多

## S(n=3)

通过检查，我们发现只有一个 - 123

## S(n=4)

通过检查，我们发现 3！- 123 234 和 1234

请注意，S(4) 包含 S(3)，加上两个新的……都包括新的数字 4……嗯。

## S(n=5)

通过检查，我们发现 ... S(n=4) 以及 345 2345 和 12345。总共 3+3=6。

我认为这里形成了一种模式。让我们定义一个新的函数 T。

*   规则 3：S(n) = S(n-1) + T(n) ... 对于某个 T。

我们知道 S(n) 包含数字 n，并且现在应该已经发现 S(n) 还包含（作为子组件）所有长度为 3 到 n 的序列，其中包括数字 n。我们知道它们不能在 S(n-1) 中，所以它们必须在 T(n) 中。

*   规则 4：T(n) 包含所有以 n 结尾且长度为 3 到 n 的序列。

## S(n)中有多少个序列？

让我们回顾一下 S(3) S(4) 和 S(5)，并合并 T(n)：

*   S(3) = S(3)
*   S(4) = S(3) + T(4)
*   S(5) = S(4) + T(5) = S(3) + T(4) + T(5)

让我们概括一下：

*   对于从 4 到 n 的所有 f，S(n) = S(3) + T(f)。

那么给定的 T 中有多少个呢？

回顾规则 5 - 它描述了多少个序列？

对于 T(4)，它描述了所有以 4 结尾的序列 3 和更长的序列。（即 234）

对于 T(5)，它描述了所有以 5 结尾的序列 3 和更长的序列。（即 345 2345 = 2）

```
T count Examples
4 2     1234 234
5 3     12345 2345 345
6 4     123456 23456 3456 456 
```

看起来非常像 T(n) 只是 n-2 ！

所以

```
S(6) = T(6) + T(5) + T(4) + S(3)
  10 = 4    + 3    + 2    + 1 
```

S(7) = 15 = 5 + 4 + 3 + 2 + 1 S(8) = 21 = 6 + 5 + 4 + 3 + 2 + 1

## 把它变成一个公式

2 * S(8) 是多少？

42 = 6 + 5 + 4 + 3 + 2 + 1 + 1 + 2 + 3 + 4 + 5 + 6

将每对最大和最小数字相加：

42 = 7 + 7 + 7 + 7 + 7 + 7

42 = 7 * 6

但这是 2 * S(8)，所以

S(8) = 42/2 = 21 = 7 * 6 / 2

这概括了：

```
S(n) = (n-1)*(n-2) / 2 
```

让我们检查一下这是否有效：

```
S(3) = 2*1/2 = 1
S(4) = 3*2/2 = 3
S(5) = 4*3/2 = 6
S(6) = 5*4/2 = 10 
```

我很满意。

# jquery - 如何通过 ajax 调用向 perl 发送 .txt 文件？

> ID：12311919
> 
> 赞同：0
> 
> 时间：2012-09-07T04:53:14.203
> 
> 标签：jquery

我有包含 lonlat 点列表的文本文件。我想通过 ajax call 将此发送到 perlscript。怎么做 ？我的代码是

```
$.ajax({type:"POST",
        url:"softTouchurl",
        type:"Text",
        data:{file:'pointsArray.txt',action:'showPoints'},
        success:function(response){
          if(response.success) {
            alert("success");
          }
        }
      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:56:56.947

您需要将您的 perl 脚本编写为 CGI 脚本，该脚本在服务器上运行并位于您将其发送到的 URI（此处为“softTouchurl”）。

这里的 AJAX 没有什么特别之处——您将 POST 数据发送到 CGI 脚本。

# java - 在 column(quantity) 中，我也有一些 double 和 N/A 类型的值。如何使用比较器对两者进行排序？

> ID：12311924
> 
> 赞同：0
> 
> 时间：2012-09-07T04:54:22.680
> 
> 标签：java

在列（数量）中，我也有一些 double 和 N/A 类型的值。

在我的比较器类比较方法中，这是下面提到的编码

```
 if(double1 == double2) {
        return 0;
    }

    // We know that both aren't null, so if only long 2 is null, 1 > 2
    if(double2 == null) {
        return 1;
    }

    // We know that both aren't null, so if only long 1 is null, 1 < 2
    if(double1 == null) {
        return -1;
    }

    // Nulls are handled, use the native compare
    return double1.compareTo(double2); 
```

double1 和 double2 是 Double 类型。

它给出 Exception: java.lang.NumberFormatException: For input string: "N/A" 。

请给我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T05:05:47.243

这是我的猜测（如果没有看到您如何使用这些 Doubles，我真的不能说）您正在寻找一个实际上并不存在的值，以及一个可能存在的值。

为此，我会说你这样构建你`Double`的[`Double.NaN`](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#NaN)：

```
Double double1 = new Double(Double.NaN); 
```

我不确定是否为排序操作定义了 NaN - 它没有复杂的顺序，因为它不是一个数字。您可能希望使用辅助结构（例如 a `List<Double>`）首先梳理`Double`不是数字的 s，然后将它们放在首位。然后，您可以对剩余`Double`的 s 进行排序。

# php - 生成体重和身高数组 PHP

> ID：12311925
> 
> 赞同：1
> 
> 时间：2012-09-07T04:54:26.573
> 
> 标签：php

如何创建一个计算的 php 函数，然后生成一个数组，该数组代表英制及其等效公制测量值（对于人类）对于任何给定范围（例如 4 英尺到 7 英尺）？

例如：

```
Array
(
    [1] => 4'8"(142cm)
    [2] => 4'9"(144.5cm)
    [3] => 4'10"(147cm)
) 
```

...等等。重量（磅/公斤）的相同示例也是如此。如果有人可以让我在这方面领先一步，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T05:19:49.550

这可能会为您指明正确的方向.. 尚未测试，但应该足以让您入门。非常简单的概念。我让你从英尺+英寸的弦开始 - 现在你应该能够弄清楚如何在那里获得米。

```
// $startHeight and $endHeight are in inches

function createRange($startHeight,$endHeight){

// calculate the difference in inches between the heights
$difference = $endHeight - $startHeight;

// create an array to put the results in
$resultsArray; 

//create a loop with iterations = $difference

for($i=0;$i<$difference;$i++)
{
    // create the current height based on the iteration
    $currentHeight = $startHeight + $i;

    // convert the $currentHeight to feet+inches
    // first find the remainder, which will be the inches
    $remainder = ($currentHeight % 12);
    $numberOfFeet = ($currentHeight - $remainder)/12;

    // build the feet string
    $feetString = $numberOfFeet.'&apos;'.$remainder.'&quot;';

    // now build the meter string using a similar method as above
    // and append it to $feetString, using a conversion factor

    // add the string to the array
    $resultsArray[] = $feetString;

}

// return the array
return $resultsArray;

} 
```

# delphi - 如何翻译（国际化、本地化）应用程序？

> ID：12311926
> 
> 赞同：8
> 
> 时间：2012-09-07T04:54:29.770
> 
> 标签：delphi, localization, internationalization

我需要在delphi 上翻译一个应用程序。现在俄语界面中的所有字符串。有哪些工具可以快速查找、解析字符串常量的所有内容？

人们如何翻译大型应用程序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T06:52:11.930

GetText 应该可以，在[http://dxgettext.po.dk/documentation/how-to搜索“extract”](http://dxgettext.po.dk/documentation/how-to)

* * *

如果您只需要翻译 GUI 和源中的*资源*字符串，并且不需要翻译 Pascal 源中的内联字符串常量，那么您可以尝试 Delphi 内置方法。然而论坛说 ITE 有问题。但至少那是官方的德尔福方式。

*   [http://edn.embarcadero.com/article/32974](http://edn.embarcadero.com/article/32974)
*   [http://docwiki.embarcadero.com/RADStudio/en/Creating_Resource_DLLs](http://docwiki.embarcadero.com/RADStudio/en/Creating_Resource_DLLs)

[如http://www.gunsmoker.ru/2010/06/delphi-ite-integrated-translation.html](http://www.gunsmoker.ru/2010/06/delphi-ite-integrated-translation.html)的源表中所示，需要使用 ITM 手动准备翻译源

* * *

我记得我为 JediVCL 团队翻译了北极星的文本——所以他们做了一些提取。但我认为他们只是将所有字符 > #127 提取到一个文本文件中 - 没有结构，有常量和注释，全部放在一起。尽管如此，还是有一些组件，尽管我怀疑它是否可以按照您需要的方式使用：[http ://wiki.delphi-jedi.org/wiki/JVCL_Help:TJvTranslator](http://wiki.delphi-jedi.org/wiki/JVCL_Help:TJvTranslator)

* * *

还有商业工具。但我不知道他们的功能是否会帮助您完成初始提取和翻译任务。当您需要将大型应用程序翻译成多种语言时，它们可能会有很大帮助，但当您需要进行一次性转换时则不会。但也许我错了，如果您愿意，请查看他们的试用版。根据评论，这些套房被认为是最好的商业套房之一：

*   TsiLang 套件[http://www.tsilang.com/?siteid2=7](http://www.tsilang.com/?siteid2=7)
*   Korzh 本地化器[http://devtools.korzh.com/localization-delphi/](http://devtools.korzh.com/localization-delphi/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T09:23:49.250

首先，我建议将所有可本地化的字符串常量移动到其单元文件中的资源字符串部分。IE

```
raise Exception.Create('Error: что-то пошло не так (in Russian language)'); 
```

将转换为

```
resourcestring
  rsSomeErrorMessage = 'Error: что-то пошло не так (in Russian language)';
...
raise Exception.Create(rsSomeErrorMessage); 
```

[更多关于资源字符串。](https://stackoverflow.com/questions/4292611/is-there-some-advantage-in-use-resourcestring-instead-of-a-const-string)

这个过程可以通过使用相应的[Delphi IDE 重构命令](http://docwiki.embarcadero.com/RADStudio/en/Extracting_Resource_String)或使用第三方实用程序（如[ModelMaker Tools](http://www.modelmakertools.com/articles/hard-coded-strings.html) ）来加速。

然后，您可以使用任何可用的本地化工具来翻译甚至国际化您的程序。我推荐[我的 Delphi localizer](https://sites.google.com/site/kryvich/localizer) - 它是免费的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T07:17:02.090

基本上，你有两种方法

1.  基于资源的本地化工具（Delphi ITE、Multilizer、ecc.）
2.  基于数据库的本地化工具（GetText、TsiLang、ecc.）

前者利用 Windows 资源支持，当应用程序启动时，资源加载可以重定向到存储在 DLL 中的不同资源。优点是可以本地化整个表单，包括图像、颜色、控件大小等，而不仅仅是字符串。此外，无需更改代码。缺点是最终用户本地化通常是不可能的，并且在不重新启动应用程序的情况下更改语言可能会比较棘手。Microsoft 应用程序，包括 Windows 本身，都使用这种技术。它将与任何将字符串正确存储到资源和 dfms 中的 Delphi 库一起使用。

后者将字符串存储在外部“数据库”中（甚至可以是文本文件......）。优点通常是用户可以添加/修改翻译，并且更容易即时切换语言。缺点是这种技术更具侵入性（它必须挂钩字符串加载/显示）并且可能需要更改代码，工具通常仅限于字符串本地化并且不提供更广泛的控制（图像，大小等），并且可能不会使用无法正确挂钩的未知控件/库。通常跨平台应用程序使用这种技术，因为并非所有操作系统都支持类似 Windows 的资源。

您应该选择最适合您和您的应用的技术。此外，一些工具简化了与外部翻译的协作，而另一些则没有。我更喜欢基于资源的方法，因为它不需要更改代码，也不会将我绑定到给定的库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T06:59:57.817

我们正在使用 dxgettext（用于 Delphi 和 C++ Builder 的 GNUGettext）和 Gorm（来自同一作者）。请注意，大多数工具都要求您使用英语作为主要语言并仅从该语言进行翻译。dxgettext 允许其他语言，但肯定会有未知的问题。准备好将大型应用程序国际化将比您当前想象的要多。

# tridion - 如何将包组件 XML 作为 TBB 输出

> ID：12311927
> 
> 赞同：3
> 
> 时间：2012-09-07T04:54:45.810
> 
> 标签：tridion, tridion-2011

我正在尝试将默认的包组件 XML 作为 TBB 输出。我正在使用以下代码：

```
 public void Transform(Engine engine, Package package)
    {

        XmlDocument packagebasexml = new XmlDocument();
        packagebasexml.LoadXml(package.GetByName("Component"));         

        package.PushItem(Package.OutputName, package.CreateXmlDocumentItem(ContentType.Xml,packagebasexml));

     } 
```

但我无法得到，请提供任何建议/更改。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T09:07:52.257

以下 .Net TBB 应将组件包项 XML 复制到模板输出：

```
using System.Xml;
using Tridion.ContentManager.Templating;
using Tridion.ContentManager.Templating.Assembly;

namespace SDLTridion.Templating
{
    [TcmTemplateTitle("Get Component Input as Output")]
    class GetComponentInputAsOutput: ITemplate
    {
        public void Transform(Engine engine, Package package)
        {
            Item componentItem = package.GetByName(Package.ComponentName);
            XmlDocument componentItemXml = componentItem.GetAsXmlDocument();
            Item componentItemXmlAsString = package.CreateStringItem(ContentType.Text, componentItemXml.OuterXml);
            package.PushItem(Package.OutputName, componentItemXmlAsString);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T06:31:38.137

您是否尝试使用**.Content**属性。我也可以知道你想通过将 XML 推送到包来实现什么。

```
public void Transform(Engine engine, Package package)
{

    XmlDocument packagebasexml = new XmlDocument();
    packagebasexml.LoadXml(package.GetByName("Component").Content.OuterXml);         

    package.PushItem(Package.OutputName, package.CreateXmlDocumentItem(ContentType.Xml,packagebasexml));

 } 
```

另一种获取完整xml的方法

```
Item m_XmlInput = m_Package.GetByName(package.GetByName("Component"));
XmlTextReader input = new XmlTextReader(new StringReader(m_XmlInput.GetAsString())); 
```

# canvas - 在 HTML5 画布上扭曲文本的库，类似于 DOM 上的 csswarp

> ID：12311928
> 
> 赞同：2
> 
> 时间：2012-09-07T04:54:49.127
> 
> 标签：canvas, warp

我想围绕 Bezeir 曲线和圆在 HTML Canvas 上扭曲文本。CSSWarp 库在 DOM 上使用 CSS3 来做到这一点。我正在寻找一个在 HTML 画布上执行相同操作的库。我用谷歌搜索是徒劳的。有人遇到过这样的图书馆吗？或者是否有人能够在 HTML5 画布上围绕贝塞尔曲线/圆成功地扭曲文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:08:38.730

我真的不知道在 HTML5 中是否做过类似的事情，但是在 Flash 中进行了大量的实验。你应该查看这个博客：[http](http://algorithmist.wordpress.com/) ://algorithmist.wordpress.com/ 。它完全致力于更复杂的样条曲线探索。另一个很棒的资源是这个站点：[http](http://www.tinaja.com/cubic01.shtml) ://www.tinaja.com/cubic01.shtml ，其中包含大量与该主题相关的示例和精彩文章。这是解释将文本包装到更复杂的样条背后的概念的论文：[http ://www.tinaja.com/glib/nonlingr.pdf](http://www.tinaja.com/glib/nonlingr.pdf)

作为旁注，我可以提名两个伟大而复杂的库，它们只对 SVG 产生预期的效果：[3d](https://github.com/mbostock/d3)和[PaperJS](http://paperjs.org/examples/)。

# php - 数组内数组（输入多个表单数据并选择）

> ID：12311934
> 
> 赞同：1
> 
> 时间：2012-09-07T04:55:16.940
> 
> 标签：php, html

我的代码是

```
<tr>
<td><input type="text" name="batch_code[]"/></td>
<td><input type="text" name="description[]"/></td>
<td><input type="text" size="12" name="qty[]"/></td>
<td>
<select id="asset_id" class="asset_id" name="asset_id[][]" multiple="multiple">
<option class="dropdownlist">Asset Id 1</option> 
<option class="dropdownlist">Asset Id 2</option> 
<option class="dropdownlist">Asset Id 3</option>
</select>
</td>
</tr>

<tr>
<td><input type="text" name="batch_code[]"/></td>
<td><input type="text" name="description[]"/></td>
<td><input type="text" size="12" name="qty[]"/></td>
<td>
<select id="asset_id" class="asset_id" name="asset_id[][]" multiple="multiple">
<option class="dropdownlist">Asset Id 1</option> 
<option class="dropdownlist">Asset Id 2</option> 
<option class="dropdownlist">Asset Id 3</option>
</select>
</td>
</tr> 
```

我想在数组中获取数组。但是如果我得到这个asset_id的print_r()。结果是 Array ( [0] => Array ( [0] => Asset Id 1 )

```
[1] => Array
    (
        [0] => Asset Id 2
    )

[2] => Array
    (
        [0] => Asset Id 1
    )

[3] => Array
    (
        [0] => Asset Id 3
    ) 
```

)

但我想要什么

```
Array
(
    [0] => Array
        (
            [0] => Asset Id 1
            [1] => Asset Id 2
        )

    [1] => Array
        (
            [0] => Asset Id 1
            [1] => Asset Id 3

        )
) 
```

我使用一个方括号“name="asset_id[]"" 运行此代码，但结果是
Array (

```
[0] => Asset Id 1
[1] => Asset Id 2
[2] => Asset Id 1
[3] => Asset Id 3 
```

)

请帮我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T05:07:18.870

试试这个：

```
<tr>
<td><input type="text" name="batch_code[]"/></td>
<td><input type="text" name="description[]"/></td>
<td><input type="text" size="12" name="qty[]"/></td>
<td>
<select id="asset_id" class="asset_id" name="asset_id[0][]" multiple="multiple">
<option class="dropdownlist">Asset Id 1</option> 
<option class="dropdownlist">Asset Id 2</option> 
<option class="dropdownlist">Asset Id 3</option>
</select>
</td>
</tr>

<tr>
<td><input type="text" name="batch_code[]"/></td>
<td><input type="text" name="description[]"/></td>
<td><input type="text" size="12" name="qty[]"/></td>
<td>
<select id="asset_id" class="asset_id" name="asset_id[1][]" multiple="multiple">
<option class="dropdownlist">Asset Id 1</option> 
<option class="dropdownlist">Asset Id 2</option> 
<option class="dropdownlist">Asset Id 3</option>
</select>
</td>
</tr> 
```

**更新：** 出于好奇，我尝试了这个，结果符合要求：

```
 ["asset_id"]=>
  array(2) {
    [0]=>
    array(2) {
      [0]=>
      string(10) "Asset Id 1"
      [1]=>
      string(10) "Asset Id 2"
    }
    [1]=>
    array(2) {
      [0]=>
      string(10) "Asset Id 1"
      [1]=>
      string(10) "Asset Id 3"
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T05:03:12.467

```
name="assed_id[1][]" 
```

这会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T05:12:38.927

为什么使用二维数组。使用asset_id[] 而不是asset_id[][]

正确的代码

```
<tr>
<td><input type="text" name="batch_code[]"/></td>
<td><input type="text" name="description[]"/></td>
<td><input type="text" size="12" name="qty[]"/></td>
<td>
<select id="asset_id" class="asset_id" name="asset_id[]" multiple="multiple">
<option class="dropdownlist">Asset Id 1</option> 
<option class="dropdownlist">Asset Id 2</option> 
<option class="dropdownlist">Asset Id 3</option>
</select>
</td>
</tr>

<tr>
<td><input type="text" name="batch_code[]"/></td>
<td><input type="text" name="description[]"/></td>
<td><input type="text" size="12" name="qty[]"/></td>
<td>
<select id="asset_id" class="asset_id" name="asset_id[]" multiple="multiple">
<option class="dropdownlist">Asset Id 1</option> 
<option class="dropdownlist">Asset Id 2</option> 
<option class="dropdownlist">Asset Id 3</option>
</select>
</td>
</tr> 
```

# clearcase-ucm - 如何使用 C# 在 Clearcase 中签出先前修订节点的文件夹

> ID：12311936
> 
> 赞同：3
> 
> 时间：2012-09-07T04:55:34.903
> 
> 标签：clearcase-ucm

我在 ClearCase 中有一个文件夹，其中有两个 Revision : `Rev.1`& `Rev.2`。

我想使用 C# 签出修订版 1 的文件夹。我正在使用 ClearCasedll 来签出文件。
但它总是只检查最新的修订文件夹（意思是`Rev.2`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T05:28:59.753

您必须指定要检出的修订的**[完整扩展路径名。](https://stackoverflow.com/questions/987427/why-cant-perl-find-my-file-that-is-in-clearcase/988904#988904)**
另请参阅“[在 ClearCase 中，如何从命令行以静态视图查看文件的旧版本？](https://stackoverflow.com/questions/176858/in-clearcase-how-can-i-view-old-version-of-a-file-in-a-static-view-from-the-co/177350#177350) ”以获取使用扩展路径名选择先前版本的实际示例。

在您的情况下，它可能不仅仅是一个文件，而是一个文件夹内容，所以我建议首先使用正确的配置规范设置一个（动态：它更快）视图，选择正确的版本，`-mkbranch`并按顺序设置规则在自己的分支中准备结帐（然后尝试您的 C# 结帐）。

但是使用 UCM，如果您正确配置了 Stream（即配置为选择要检出的正确版本），则无需指定自己的配置规范。

检出是在视图的上下文中完成的，UCM 视图是附加到流的：这意味着您将始终获得在以该流命名的分支上创建的最新版本。

但是，如果您基于之前的基线 ( )创建*子流*`Rev.1`，那么您可以在附加到该子流的新视图中签出正确的版本。

# wcf - 如何使用 wsHttpBinding 连接到 WCF 服务

> ID：12311941
> 
> 赞同：1
> 
> 时间：2012-09-07T04:56:10.007
> 
> 标签：wcf, wshttpbinding, wcf-wshttpbinding

我已经托管了一个 WCF 服务 wsHttpBinding。然后我创建了一个 Windows 窗体应用程序来作为客户端应用程序访问 WCF 服务。客户端应用程序可以在本地机器中调用 WCF 服务，因为凭据由默认定义如下。

```
<transport clientCredentialType="Windows" proxyCredentialType="None"
                    realm="" />
                <message clientCredentialType="Windows" negotiateServiceCredential="true"
                    algorithmSuite="Default" /> 
```

但是当我尝试在同一网络上的不同 PC 上运行相同的应用程序时，会出现身份验证失败，因为它使用 WINDOWS 凭据类型。那么如何通过网络或互联网使用 wsHttpBinding 对其他客户端 PC 进行身份验证？我是否必须使用证书或自定义安全令牌以及如何使用？

这是我的 WCF 服务的 web.config

```
 <configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service name="MyWCFService.CenService">
        <endpoint address="" binding="wsHttpBinding" contract="MyWCFService.ICenService"/>
      </service>
      <!--<service name="CenService.MyService">
        <endpoint address="" binding="wsHttpBinding" contract="MyWCFService.IMyService"/>
      </service>-->
     </services>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:13:19.573

您需要将服务端点身份添加到服务配置中：

```
<endpoint address="" binding="wsHttpBinding" contract="MyWCFService.ICenService">
    <identity>
        <dns value="(server name)" />
    </identity>
</endpoint> 
```

# c# - 将子行显示为列

> ID：12311950
> 
> 赞同：0
> 
> 时间：2012-09-07T04:57:20.963
> 
> 标签：c#, join, datagridview

自从我对关系数据库做任何认真的工作以来已经很长时间了，尽管在过去的两个小时里搜索了互联网并做出了最好的猜测，但我还是无法计算出必要的 SQL 查询表达式。

我有三个相关的表： Players - 包含球员列表 Coaches - 包含教练列表 Evaluations - 将每个教练对每个球员的评价存储为一个数字。

因此，第三个表中的每条记录都包含一个包含 PlayerID、CoachID 和评分的字段。

如果我有 10 名球员和 3 名教练，那么表 3 中应该有 30 条记录。

为了填充这些表，我想显示教练姓名（从教练表中提取）并将它们显示为**DataGridView**中的列，每个球员都有一个行，这样当你在教练下的球员行中输入一个值时列中，获取的值与适当的球员和教练 ID 一起存储在表 3 中。

我知道我今年以前在 Microsoft Access 中做过类似的事情，但我不知道如何在我的**Dataset**中构建 Query以便将其绑定到**DataGridView**。

我尝试使用以下 SQL 查询，但它不允许我编辑 Coach1 和 Coach2 列中的值。我怀疑这是因为我在 PlayerList 和 Evaluations 之间有一对多的关系，在 Coaches 和 Evaluations 之间有一对多的关系：

```
SELECT        PlayerList.Number, PlayerList.Name, PlayerList.Year, PlayerList.Height, PlayerList.Notes, PlayerList.AverageSkill, AVG(Evaluations.Skill) AS CoachSkill, 
                         'SELECT Skill FROM Evaluations 
WHERE (PlayerID = PlayerList.Number) AND (CoachID = 1)' AS Coach1, 
                         'SELECT Skill FROM Evaluations 
WHERE (PlayerID = PlayerList.Number) AND (CoachID = 2)' AS Coach2
FROM            Evaluations RIGHT OUTER JOIN
                         PlayerList ON Evaluations.PlayerID = PlayerList.Number
GROUP BY PlayerList.Number, PlayerList.Name, PlayerList.Year, PlayerList.Height, PlayerList.Notes, PlayerList.AverageSkill 
```

任何帮助，将不胜感激。

应用程序详细信息：我正在使用带有 SQL-Server-CE 数据库的 Visual Studio Express 中的 C#。

多读一点让我相信我想要的是 SQL-Server-CE 不支持的 PIVOT 函数。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:24:27.137

这与嵌套网格有关，作为分层数据

通过这个链接详细解释如何在像你这样的场景中使用 gridview/datgrids。

[http://msdn.microsoft.com/en-us/magazine/cc164077.aspx](http://msdn.microsoft.com/en-us/magazine/cc164077.aspx)

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T05:33:11.010

您可以创建新的 DataRows 并动态添加列。然后将所有创建的行添加到 DataGridView。

# ruby-on-rails-3 - Mizuno 服务器在启动时抛出 ClassNotFoundException: Jruby-opensslService

> ID：12311951
> 
> 赞同：0
> 
> 时间：2012-09-07T04:57:22.570
> 
> 标签：ruby-on-rails-3, jruby

我正在将 Ruby on Rails 3.2.8 应用程序从 MRI 1.9.3 移植到 JRuby 1.6.7

Rails 应用程序本身是 JRuby 友好的，我确实必须跳过一些障碍才能让 twitter-bootstrap 与 JRuby 一起工作。我所有的测试都通过了，应用程序将在*Webrick*下运行（通过`bundle exec rails server`）。

当我尝试在[mizuno](https://github.com/matadon/mizuno)下运行时，我收到了这个奇怪的错误：

```
bundle exec mizuno -d
java.lang.ClassNotFoundException: Jruby-opensslService
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at org.jruby.util.JRubyClassLoader.findClass(JRubyClassLoader.java:86)
<a few thousands more lines> 
```

（如果您认为 Java 不好，JRuby 真的知道如何吐出一些堆栈。）

我相信你的想法和我一样，但 Gemfile 确实包含*jruby-openssl*：

```
 bundle list | grep openssl
   * jruby-openssl (0.7.7) 
```

我的 JRuby 运行时，没有使用 JRUBY_OPTS：

```
jruby -v
jruby 1.6.7.2 (ruby-1.9.2-p312) (2012-05-01 26e08ba) (OpenJDK 64-Bit Server VM 1.7.0_03) [linux-amd64-java] 
```

有智慧珠的人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:11:33.187

我已经能够使用 rackup 让 mizuno 工作：

```
bundle exec rackup -s mizuno 
```

# sql - 如何在选择查询中替换特定的字符串模式

> ID：12311952
> 
> 赞同：0
> 
> 时间：2012-09-07T04:57:22.210
> 
> 标签：sql, sql-server-2008, select, replace

我在表 xyz 上有名为“问题”的字段，其中包含如下值

“这幅画挂在墙上`<img alt="" src="../Images/29/29/jpg>`好吗，请提供意见。”

当我在这个表上触发选择查询时，结果应该是这样的

“这幅画挂在墙上`[Question_Image],`好吗？请提供意见。”

意味着我想用`[Question_Image]`选择查询中的文本替换 img 标签

预先感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T05:13:17.063

`[Question_Image]`将该占位符存储在数据库中而不是`<img>`标签中不是更好的主意吗？也许您应该在将其插入数据库**之前**`<img alt="" src="../Images/29/29/jpg">`替换为？`[Question_Image]`

 **无论如何 - 看看[http://msdn.microsoft.com/en-us/library/ms186862.aspx](http://msdn.microsoft.com/en-us/library/ms186862.aspx)**

# c - open() 调用成功，即使没有权限

> ID：12311953
> 
> 赞同：1
> 
> 时间：2012-09-07T04:57:29.960
> 
> 标签：c, unix

我有一个名为 test 的文件，没有 rwx 权限（我已使用 chmod 删除了所有权限）

[root@dev]# ls -l test ----------。1 根 21 Sep 7 22:22 测试

Q1）我正在尝试运行以下代码来检查文件是否可以打开。返回给 fd 的值为正。fd 不应该是-1。?

```
 fd = open(fname, O_RDONLY);
    if (fd == -1) {
        /* Print error message */
        return (-1);
    }
    close(fd); 
```

Q2）我什至可以对文件进行分类。我 cat 文件时不应该有错误。[root@dev]# cat test 这是一个测试文件。[root@dev]#

注意：我使用的是 root 帐户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T04:58:08.087

简短的回答：root 可以做任何事情。

更长的答案：通常，要以给定模式打开文件，POSIX 要求基于您的 uid 和 gid 的权限允许您请求的访问类型，*或者您具有“适当的权限”*，这是一个由实现定义的短语. 在大多数现实世界的实现中，满足“适当特权”的一种条件是 root 用户（uid 0）。

# css - 放大或缩小时页面结构发生变化

> ID：12311954
> 
> 赞同：0
> 
> 时间：2012-09-07T04:58:02.273
> 
> 标签：css, html

我在我的 sample.html 文件中创建了以下示例代码 -

```
<div Class="Frame" Style="left:20.1637500000001pt; top:730.2pt; width:348.1125pt; height:70.8pt; position:absolute; background-color:transparent;">
          <p Style="text-align:justify; text-align-last:left">
            <span Style="height:9.384765625pt; width:348.1125pt;" class="ln">
              <span Style="font-size:10pt; font-family:F0; letter-spacing:0em; color:rgb(0,0,0)">Lendellaborum ipsum quiae quaeculpa voleseque elluptat. Latur moluptatiunt eicilit et ut aut quis</span>
            </span>
          </p>
</div> 
```

当我在浏览器中打开它然后放大或缩小时；最后几句话中的一些被移到下一行。

有谁知道如何避免这种情况？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:03:12.263

根据不应该包装的 HTML 的哪一部分（我在下面的示例中猜测`<span>`使用`ln`类），使用 CSS`white-space`属性应该可以解决问题。

## 例子

```
span.ln{
    white-space: nowrap;
} 
```

# canvas - 在 Canvas J2ME 中插入带有仪表的表单

> ID：12311965
> 
> 赞同：1
> 
> 时间：2012-09-07T04:59:14.247
> 
> 标签：canvas, java-me, midp, lcdui, gauge

我想知道是否有可能以某种方式在画布上显示仪表？我想用微调器制作自定义警报。

但我想将表单的高度降低到屏幕大小的 1/4。谁能告诉我它是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:05:30.827

如果你想要像画布中的微调器之类的东西，你需要使用图形基元自己绘制它，并使用[`Display.callSerially()`](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Display.html#callSerially%28java.lang.Runnable%29).

您可以将微调器的每一帧都包含为图像，而不是自己绘制。您仍然需要以某种方式为它们设置动画。`GIF`或者，如果您的设备支持，您可以使用动画s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T21:07:38.600

MIDP 2 API 无法实现这一点。

[表单类](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Form.html "API 文档")根本没有允许应用程序开发人员指定其大小的方法。

这就是高级 MIDP UI 对象（如 Form、Alert、Gauge 等）通常采用的方式。您编写一些代码并指定所需的一般行为并得到它，但“作为交换”MIDP 允许设备制造商决定较低级别详细信息（如表格大小或仪表外观）并以他们想要的任何方式显示它们。

* * *

由于您希望仪表看起来像您在[特定诺基亚设备](https://stackoverflow.com/a/12270773/839601 "如您先前的问题所示")上看到的那样，您最好知道在其他设备上，此仪表可能看起来完全不同。警报和表格也可以。

如果你真的想在不同的设备上保证 UI 元素的这种外观，你将不得不使用[Canvas](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Canvas.html "API 文档")和其他类型的低级图形 API——但这需要更多的编码和更复杂的应用程序设计，包括线程、动画，适当缩放到设备屏幕尺寸等。在深入研究之前我会三思而后行。

# templates - ModX：将同上与模板变量一起使用

> ID：12311968
> 
> 赞同：0
> 
> 时间：2012-09-07T04:59:29.987
> 
> 标签：templates, modx, modx-evolution, ditto

我很难用 Ditto 在一个页面上显示一些资源。我似乎无法让电视与我的内容一起显示。

以下是我的说明：

*   我的 Ditto 呼叫有一个页面：

    `[!Ditto? &parents='134' &orderBy='createdon ASC' &tpl='temp'!]`

*   我有一个名为 setup 的简单块`temp`：

    `<div id="content"> [*articlename*] [+content+] </div>`

*   我有一个模板，电视`articlename`分配给父 134 下的所有资源。

内容显示很好，但电视都没有。谁能指出我正确的方向？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T05:31:21.713

我认为问题出在你的语法上。您需要在电视的块中使用占位符标签：

试试这个：

```
<div id="content"> [+articlename+] [+content+] </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T05:27:35.870

我找到了答案：您应该`[+articlename+]`用于“块电视”而不是`[*articlename*]`. 这与 getResources 不同。

# java - 拥有树集而不是手动排序集的好处

> ID：12311969
> 
> 赞同：1
> 
> 时间：2012-09-07T04:59:31.120
> 
> 标签：java, set, treeset

在集合中，我们可以根据我们的要求对集合或地图进行排序。Treeset 或 TreeMap 也提供排序集合。当我们需要排序集合时，使用树集有什么好处吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T10:25:36.870

我之前的发帖人没有提到一个重要的标准：如果你的集合中的元素在插入*后*经常改变它们的状态，即你需要对同一个集合重新排序几次，可能 a`TreeSet`或`TreeMap`不理想，因为元素只在插入期间排序，以后再也不。`TreeSet`即，如果您更改/中元素的排序键`TreeMap`，它将不会自动重新排序。您需要在更新之前从集合中删除元素，并在更新后重新添加它，以确保将其插入到正确的位置。您可以使用我的[UpdateableTreeSet](https://stackoverflow.com/a/11169301/1082681)来帮助您保持`TreeSet`排序。

如上所述，您可以得出结论，在这种情况下，未排序的集合加上`Collections.sort()`按需使用可能是更简单的方法。哪种方式总体上更快取决于您的情况。我想这`UpdateableTreeSet`应该可以帮助您将现有集合的排序限制在您真正更改排序键的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T06:48:54.537

**树集**

在需要时进行排序总是有益的。

*   log(n) 基本操作的时间成本（添加、删除和包含）
*   TreeSet 有几个方便的方法来处理有序集，如 first()、last()、headSet() 和 tailSet() 等
*   如果您不提供自己的比较器，则 TreeSet 中的项目将根据其自然顺序自动排序。

另请阅读 TreeSet 文档。[树集](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T05:02:01.143

最大的不同是

**`TreeSet`始终保持数据排序，并且您通过手动排序维护的集合可能不会始终排序。**

`TreeSet`如果您不想一直对集合进行排序，建议您这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T05:08:44.823

除了其他人所说的之外，TreeSet 还有一些很酷的功能，比如快速获取子集的能力。

除此之外，这是您需要多久对事物进行分类的问题。如果您要创建 100 个集合，并且只需要对其中的 1 或 2 个进行排序，那么在插入期间排序的开销可能不值得。但是，如果您要对集合进行一次排序，那么树集将是您的选择。

# iphone - 更改 UIButton 文本的颜色和对齐方式

> ID：12311976
> 
> 赞同：1
> 
> 时间：2012-09-07T05:00:51.593
> 
> 标签：iphone, ios, ipad, uibutton

我正在创建`UIButton`一个`UITableView`：

```
UIButton *aboutButton=[UIButton buttonWithType:UIButtonTypeRoundedRect];
[aboutButton setTitle:@"ABOUT" forState:UIControlStateNormal];
[aboutButton addTarget:self action:@selector(aboutButtonClicked) forControlEvents: UIControlEventTouchUpInside];
aboutButton.frame=CGRectMake(20, 375, 200, 35);
[tableView addSubView aboutButton]; 
```

按钮工作正常.........但按钮文本为蓝色且居中对齐。我想更改文本颜色和对齐方式 - 我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T05:08:54.947

设置按钮标题颜色和对齐方式...

```
[aboutButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];

[aboutButton.titleLabel setTextAlignment:UITextAlignmentCenter]; 
```

或者

```
aboutButton.titleLabel.textAlignment = UITextAlignmentCenter; 
```

或者

```
[aboutButton setContentHorizontalAlignment:UIControlContentHorizontalAlignmentRight]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T05:11:04.197

```
[aboutButton setTitleColor:[UIColor redColor] forState:UIControlStateNormal]
[aboutButton setContentHorizontalAlignment:UIControlContentHorizontalAlignmentLeft]; 
```

在 SO 中已被多次询问

[按钮对齐问题](https://stackoverflow.com/questions/2765024/how-to-set-the-title-as-left-alignment-in-the-uibutton)

[另一个按钮对齐问题](https://stackoverflow.com/questions/5712937/how-to-make-uibuttons-text-alignment-center)

[按钮标题颜色问题](https://stackoverflow.com/questions/6703699/uibutton-title-text-color)

[另一个按钮标题颜色问题](https://stackoverflow.com/questions/2474289/how-can-i-change-uibutton-title-color)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T05:04:37.443

您`-[myButton setTitleColor:forState:]`用于设置标题的颜色。对齐方式可以改变`[myButton setContentHorizontalAlignment:UIControlContentHorizontalAlignmentRight]`

# c# - 具有多个用户和单个 SQL 数据库的 Windows 应用程序

> ID：12311980
> 
> 赞同：0
> 
> 时间：2012-09-07T05:00:59.017
> 
> 标签：c#, sql, winforms, largenumber

我正在创建一个 Windows 应用程序，许多用户说它在 2000 年左右被使用。我对这类大容量数据库访问项目比较陌生。有多个用户同时访问数据库的可能性。您能否通过解释我在开发解决方案时需要考虑的各个步骤来指导我？

谢谢，

阿尼什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T05:38:57.683

对于窗口应用程序，您应该考虑**构建管理**，即当您发布新版本的窗口应用程序时，所有旧版本都应该停止工作。这可以在应用程序启动时通过检查存储在数据库或 dll 中的应用程序版本来完成。

[http://en.wikipedia.org/wiki/Software_versioning](http://en.wikipedia.org/wiki/Software_versioning)

另一件事，你应该寻找[**Timestamp**](http://msdn.microsoft.com/en-us/library/ms182776%28v=sql.90%29.aspx)。当您有 2000 个用户时，我特别重视它。

[http://www.sqlteam.com/article/timestamps-vs-datetime-data-types](http://www.sqlteam.com/article/timestamps-vs-datetime-data-types)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T05:14:24.200

在其他想法之间，您可以考虑在所有 SQL 查询中添加 (NoLock) 以防止用户锁定表。还有一些好的索引和备份/维护计划。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T05:22:23.423

按照下面的链接，它给出了使用共享数据库的最佳实践和重新污染

[http://www.oncenter.com/support/faq/Reference/Best_Practices_and_Recommendations.html](http://www.oncenter.com/support/faq/Reference/Best_Practices_and_Recommendations.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T05:38:05.367

我同意 Manish 的观点，坚持最佳实践是关键。这是一个很好的链接，它提供了一些需要避免的常见错误：

[要避免的常见设计错误](http://www.simple-talk.com/sql/database-administration/ten-common-database-design-mistakes/)

一些关键的考虑。

1.  正常化
2.  尽可能使用整数键值（为了性能）
3.  不要让连接打开的时间超过需要的时间。打开、执行、关闭

每个打开的数据库连接都会占用服务器上的资源。如果连接保持打开状态，则有 2000 个用户，您的服务器将受到巨大的性能影响。

# textmate2 - 用于 nil nilClass (NoMethodError) 的 textmate 未定义方法“+”

> ID：12311983
> 
> 赞同：2
> 
> 时间：2012-09-07T05:01:41.943
> 
> 标签：textmate2

有人可以帮我找出为什么 textmate 不

使用 ^+shift+O 打开终端。

当我这样做时，tm只是弹出一个窗口说

运行“打开终端”失败。

打开终端：2：nil 的未定义方法“+”：NilClass（NoMethodError）

然后我单击编辑命令按钮，转到打开终端 shell 脚本并找出以下代码：

需要 ENV['TM_SUPPORT_PATH'] + '/lib/escape.rb'

包含运算符 +。

我想这就是问题所在，但不知道如何解决。

谢谢您的帮助 ！！

# ios - 代表来电后致电

> ID：12311984
> 
> 赞同：0
> 
> 时间：2012-09-07T05:01:44.370
> 
> 标签：ios, avplayer

我正在开发音乐播放器应用程序。播放歌曲时，如果接到电话，播放器会暂停播放。调用后，应用程序将自动进入前台，播放器处于暂停状态。我想知道在接听电话和结束通话期间被叫到的代表，以便让玩家继续玩。例如，当按下主页按钮时`applicationDidEnterBackground`将触发，当再次启动应用程序时`applicationWillEnterForeground`将触发。同样明智的是，当用户点击“结束通话”按钮时（在 AppdDelegate.m 中）调用的代表是什么。我正在使用 AVPlayer 播放音频。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T05:37:29.400

您的问题非常含糊，但如果您正在使用`AVAudioPlayer`，您可以使用以下委托方法在中断的开始和结束时暂停/播放音乐（如电话）。

```
- (void)audioPlayerBeginInterruption:(AVAudioPlayer *)player
{
    [player pause];
}

- (void)audioPlayerEndInterruption:(AVAudioPlayer *)player
{
    [player prepareToPlay];
    [player play];
} 
```

# java - 在 playframework 应用程序中查找 IP 地址

> ID：12311988
> 
> 赞同：0
> 
> 时间：2012-09-07T05:02:11.937
> 
> 标签：java, playframework, location, playframework-2.0, ip-address

> **可能重复：**
> [如何在 PlayFramework2 中获取用户的 IP？](https://stackoverflow.com/questions/11207654/how-can-you-get-a-users-ip-in-playframework2)

我有一个播放框架应用程序，用户在其中输入表单提交它，并`routes`已设置为通过`index.scala.html`文件显示帖子。

如何获取用户的 IP 地址？我想用他的位置标记那个帖子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T08:27:45.167

在控制器中：

```
request.remoteAddress; 
```

在控制器之外：

```
Http.Request.current.get().remoteAddress; 
```

# c++ - 如何找出我的代码的哪一部分减慢了我的 C++ 程序

> ID：12311991
> 
> 赞同：2
> 
> 时间：2012-09-07T05:02:26.913
> 
> 标签：c++, windows, performance, algorithm, visual-studio-2012

我写了我的程序的 2 个版本，这是 C++ 中的进化算法。第一个版本是程序化的，运行良好且速度非常快。第二个版本完全是OOP，程序找到结果，但是非常非常慢（比第一个版本慢10倍）。有没有办法测量循环内代码段的时间或类似的东西？任何建议或想法都会有所帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T05:05:07.000

使用分析器。哪个最好取决于平台/运行环境；例如，使用 g++，您可以使用 gprof，或者如果您不想重新编译，您可以使用 oprofile，假设是 Linux。在 Solaris 上，您可以使用 dtrace。在其他平台（例如 Windows 或 Mac）上，将您平台的标签添加到问题中...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T05:17:26.733

您需要一个[分析器](http://en.wikipedia.org/wiki/Profiling_(computer_programming))来查找程序中与性能相关的问题。

[根据 Visual Studio 版本，你在 Visual Studio 中具有不同级别的分析支持。](http://www.microsoft.com/visualstudio/11/en-us/products/compare)如果您有幸使用了 Visual Studio Ultimate 或 Premium 版，[那么您将拥有非常好的内置分析支持。](http://msdn.microsoft.com/en-us/library/z9z62c29)

如果您使用的是 Visual Studio Express 或 Visual Studio Professional，遗憾的是，Visual Studio 中没有内置分析支持，但您可以使用[此链接上的示例信息，](http://www.codeproject.com/Articles/144643/Profiling-of-C-Applications-in-Visual-Studio-for-F)无论如何，如何使用这些版本免费手动进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T05:05:16.927

使用分析器。例如，如果您使用 gcc 进行编译，请查找 gprof。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T05:35:12.973

对于您的特殊情况，我建议下载并使用此工具： http: [//www.codersnotes.com/sleepy/](http://www.codersnotes.com/sleepy/)

这是一个非常简单（但高效）的采样分析器。只需在 Visual Studio 中使用 Ctrl+F5（发布）启动您的应用程序，运行此程序（非常困），双击您的 exe 名称，等待，您将看到带有函数名称的详细报告。

对于下一个级别，如果需要，请使用 VTune。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T06:09:55.123

您可以`\callcap`在 VS 中使用编译器标志。你可以在[这里](http://msdn.microsoft.com/en-us/library/ms254291%28v=vs.80%29.aspx)阅读。

`.cpp`基本上你可以只为你想分析的文件添加这个标志，定义进入/退出函数，重建你的应用程序，然后运行它。我建议你将你正在尝试分析（并且怀疑速度很慢）的代码拆分为函数，然后你可以看到哪一段代码需要更多的时间来执行。

与已经可用的分析器相比，它需要做更多的工作，但值得一试。

# ruby - 在 Rails 中上传和解析文本文档

> ID：12311992
> 
> 赞同：0
> 
> 时间：2012-09-07T05:02:29.083
> 
> 标签：ruby, ruby-on-rails-3, file-upload

在我的应用程序中，用户必须上传一个文本文档，然后由接收控制器操作解析其内容。我已成功上传文档，但我无法阅读其内容。

关于这个问题有几个线程。我已经或多或少地尝试了这些线程上推荐的所有内容，但我仍然无法解决问题。

这是我的代码：

```
file_data = params[:file]

contents = ""

if file_data.respond_to?(:read)
  contents = file_data.read
else
  if file_data.respond_to?(:path)
    File.open(file_data, 'r').each_line do |line|
      elts = line.split
      #
      #
    end
  end
end 
```

所以这是我的问题：file_data 没有“respond_to”？:read 或 :path。根据该主题的其他一些线程，如果上传的文件小于某个大小，则将其解释为字符串并响应 :read。否则，它应该响应 :path。但在我的代码中，它都不响应。

如果我尝试取出 if 语句并立即尝试 File.open(file_data, 'r')，我会收到一条错误消息，指出找不到文件。

有人可以帮我找出问题所在吗？

PS，我真的很抱歉这是一个多余的问题，但我发现其他线程没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:38:35.093

首先，`file_data`通过添加`file_data.inspect`. 这可能是您意想不到的事情，尤其是如果表单设置不正确（即`:multipart => true`）。

Rails 应该将上传的文件包含在提供统一接口的特殊对象中，这样简单的事情应该可以工作：

```
file_data.read.each_line do |line|
  elts = line.split
  #
  #
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T05:09:46.837

你真的在存储文件吗？因为如果你不是，当然是找不到的。

# xml - 是否可以在 xml 类型列 sql server 2008 中插入 xml 片段

> ID：12311993
> 
> 赞同：1
> 
> 时间：2012-09-07T05:02:45.553
> 
> 标签：xml, insert, typed

在创建具有 XML 类型列的表时，我指的是复杂的 XML 模式集合。当我指定 XML 模式时，我没有指定 DOCUMENT 或 CONTENT 选项，假设默认值为 CONTENT。

我能够插入具有顶级节点的 xml 数据，但无法插入其他 xml 片段。

请参阅下面提到的 xml 片段和架构

```
INSERT INTO [testdb].[dbo].[dummy6]
           ([ItemData])
     VALUES
           ('
  <shipto xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="shipto.xsd">
    <name>Ola Nordmann</name>
    <address>Langgt 23</address>
    <city>4000 Stavanger</city>
    <country>Norway</country>
  </shipto>'); 
```

```
DROP XML SCHEMA COLLECTION shipOrderCollection
CREATE XML SCHEMA COLLECTION shipOrderCollection AS 
'
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

<xs:element name="shiporder">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="orderperson" type="xs:string"/>
      <xs:element name="shipto">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="name" type="xs:string"/>
            <xs:element name="address" type="xs:string"/>
            <xs:element name="city" type="xs:string"/>
            <xs:element name="country" type="xs:string"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="item" maxOccurs="unbounded">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="title" type="xs:string"/>
            <xs:element name="note" type="xs:string" minOccurs="0"/>
            <xs:element name="quantity" type="xs:positiveInteger"/>
            <xs:element name="price" type="xs:decimal"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="orderid" type="xs:string" use="required"/>
  </xs:complexType>
</xs:element> 
```

' ; 去

# api - 如何将信息从 cli 或服务器传递到 fastcgi (php-fpm) 并再次返回？

> ID：12311994
> 
> 赞同：0
> 
> 时间：2012-09-07T05:02:52.233
> 
> 标签：api, webserver, cgi, fastcgi, php

我正在尝试编写一个网络服务器。我不想为 php 编写模块，所以我想我会像 nginx 和 apache 一样将信息传递给 php-fpm。我做了一些研究，并设置了原型，但无法让它工作。

我已经在端口 9999 上设置了一个 php 服务，它将在每次连接时打印_r($GLOBALS)。我已经设置 nginx 将 php 请求传递给 127.0.0.1:9999。请求正在传递，但只有 argc (1) 和 argv（php 服务的路径）和 $_SERVER 变量被填充。$_SERVER 变量有很多关于 php 进程正在运行的当前环境的信息，但我没有看到任何关于连接用户或他们的请求的信息 - 没有 REMOTE_ADDR，没有 QUERY_STRING，什么都没有......

我无法找到有关如何将这些信息从 cli 或原型服务器传递到 fastcgi php 进程的文档。我找到了一些旧 CGI 变量的列表，但没有关于如何传递它们的信息，或者它们中的任何一个是否已经过时使用 fastcgi。

所以，我再次问你如何将信息从你的服务器原型或 cli 传递到 php-fpm 或 fastcgi 进程——或者，我在哪里可以找到关于这个主题的正确、清晰和明确的文档？（不，RFC 不是答案）。我已经阅读了 fastcgi.com 和维基百科以及许多其他搜索结果......

=== 更新 ===

我已经设法通过 php 中的原型启动并运行一个有效的 fastcgi“服务”。它监听 9999，解析来自 cli 甚至来自 nginx 的二进制 fcgi 请求，它格式化二进制 fcgi 响应，通过网络将其发送回，cli 显示它很好，nginx 甚至将解码的 fcgi 响应返回给浏览器就像大自然的意图。

现在，当我尝试以另一种方式做事时——编写我的原型服务器，它形成一个二进制 fcgi 数据包并将其发送到 PHP-FPM，我什么也没得到——在 cli 或错误日志中没有错误输出（我可以永远不要让 php-fpm 以任何方式写入错误日志 [-_-])。那么，为什么 php-fpm 不给我某种响应，无论是错误文本，还是二进制网络数据包，或任何东西？？？

所以，我可以将数据从 cli 发送到 fastcgi，但我无法取回任何东西，除非它是我自己的 fastcgi 进程（不，我没有接管 php-fpm 的端口 - 我在 9999 上，它是9000）。

==============

TIA \m/(>_<)\m/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:56:33.563

知道了。

服务器以网络数据包的形式将信息传递给fastcgi进程。很像 dns 数据包，您必须使用您的语言相应的二进制字符操作函数来制定数据包，包括它的标头和有效负载信息，然后通过管道/网络将其发送到 fastcgi 服务器，然后它将解析二进制数据包成回应。有趣的东西 - 可以有更好的记录，咳咳：-\

哦，如果你在 php 中创建一个监听器原型，你不能通过任何 php vars 访问这个数据包，你实际上必须读取你正在监听的连接（因为它是一个二进制网络数据包而不是纯文本“发布”数据发送）。

我已经设法通过 php 中的原型启动并运行一个有效的 fastcgi“服务”。它监听 9999，解析来自 cli 甚至来自 nginx 的二进制 fcgi 请求，它格式化二进制 fcgi 响应，通过网络将其发送回，cli 显示它很好，nginx 甚至将解码的 fcgi 响应返回给浏览器就像大自然的意图。

# facebook - c#在facebook上发布照片而不使用c#sdk

> ID：12311999
> 
> 赞同：0
> 
> 时间：2012-09-07T05:03:27.280
> 
> 标签：facebook, url, facebook-graph-api, post, photo

请在 C# 中为我提供一段简单的代码，以便在 facebook 上发布照片，而无需使用非常著名的 facebook sdk for c#，据我所知，有两种发布照片的方法，

方法一：

下面的 fb 文档显示了一种使用提供的 url 发布图像的方法，

[https://developers.facebook.com/blog/post/526/?ref=nf](https://developers.facebook.com/blog/post/526/?ref=nf)

当然我试过了，它似乎不接受我的图片网址，当我尝试在 facebook API explorer 上使用 post 方法调试并输入如下参数时，

SomeAlbumID/photos?=access_token=MyTOKEN&url=http%3a%2f%2fcutree.com%2fcutreefbapp%2fimg1.bmp&message=Family+Tree

它返回一个异常说

```
{
  "error": {
    "message": "http\u00253a\u00252f\u00252fcutree.com\u00252fcutreefbapp\u00252fimg1.bmp is an internal url, but this is an external request.", 
    "type": "CurlUrlInvalidException"
  }
} 
```

“内部 url，但这是一个外部请求。” 我不确定这意味着什么，因为我使用的域与在我的 fbapp 上注册的域相同，并且还从服务器本身发出请求。

我读过一些 fb 只接受来自几台服务器的图像的地方，任何人都可以帮助我。

方法二：

这是一种方法，其中以字节为单位的图像数据附加到 Post 正文中，因为 fb 说“要发布照片，请发出带有照片文件附件作为 multipart/form-data 的 POST 请求。”

但是每个人都使用 c# 的 fb sdk 来做到这一点，任何人都可以为这个问题提供简单的 http post 方法。

我尝试使用以下方法流式传输图像数据

```
public MyFacebookClass FBPost(string URI, string Parameters)
{
    System.Net.WebRequest req = System.Net.WebRequest.Create("https://graph.facebook.com/" + URI);
    req.ContentType = "application/x-www-form-urlencoded";
    req.Method = "POST";
    byte[] bytes = BmpToBytes_Serialization(new Bitmap("C:\\Users\\atul\\cutreefbapp\\DefaultThumb.bmp"));
    req.ContentLength = bytes.Length;
    System.IO.Stream os = req.GetRequestStream();
    os.Write(bytes, 0, bytes.Length); 
    os.Close();
    System.Net.WebResponse resp = req.GetResponse();
    if (resp == null) return null;
    System.IO.StreamReader sr = new System.IO.StreamReader(resp.GetResponseStream());
    return new System.Web.Script.Serialization.JavaScriptSerializer().Deserialize<MyFacebookClass>(sr.ReadToEnd().Trim());

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T16:14:03.283

通过给出参数来发布照片`url`绝对有效。如果它不适合你，那么你做错了什么。

（我刚刚在 Graph API Explorer 上使用您的图片的 URL 进行了尝试，它按我的预期工作。）

> 当我尝试使用 post 方法在 facebook API explorer 上调试并输入如下参数时，
> 
> SomeAlbumID/photos?=access_token=MyTOKEN&url=http%3a%2f%2fcutree.com%2fcutreefbapp%2fimg1.bmp&message=Family+Tree

如果那是您尝试发帖的*实际*`=`地址，那么介于`photos?`和之间`access_token`显然是错误的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-07T05:16:47.583

您遇到的问题是您的代码不正确。为了将照片发布到 Facebook，您需要使用多部分表单数据发布。我没有使用 C# SDK，但我确信它会在提交图像之前在内部构建一个多部分表单帖子。

您将不得不执行与[此处发布](http://www.briangrinstead.com/blog/multipart-form-post-in-c)的内容类似的操作。我正要从我的应用程序中发布我的代码，该代码完全适用于 Facebook，但它有点长。