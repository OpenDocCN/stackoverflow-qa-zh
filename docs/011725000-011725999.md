# StackOverflow 问答 11725000-11725999

# google-docs - Google Apps Domains：驱动器迁移器

> ID：11725001
> 
> 赞同：3
> 
> 时间：2012-07-30T15:52:01.053
> 
> 标签：google-docs, google-apps, google-drive-api

是否可以构建跨域驱动器迁移器？

DocsList API 很棒，但它不支持文件。Google Drive SDK 现在可以处理文件，但不会返回隐私许可电子邮件： [这里](https://developers.google.com/drive/v2/reference/permissions#resource)：我们可以阅读：

> value string 实体的电子邮件地址或域名。这未在响应中填充。您可以使用别名 me 作为此属性的值来引用当前授权用户。

我们有许多客户（Google Apps For Business）必须迁移他们自己的帐户（电子邮件和驱动器文件）或更改应用程序的主域，这对于企业环境来说并不那么容易。

我也将使用驱动 SDK，但我必须正确“映射”共享文件，并且我需要权限电子邮件（例如之前的 ACLFeed）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:19:30.540

使用 DocumentList API 获取您的 ACL 提要，然后使用 Drive API 进行迁移。

id 是相同的，除了根文件夹。但是可以使用`root`两个 API 中的别名访问根文件夹

# ruby-on-rails - Rails 3：如何配置 Zencoder 以使用 Amazon S3？

> ID：11725002
> 
> 赞同：2
> 
> 时间：2012-07-30T15:52:01.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, amazon-s3, zencoder

我正在按照本教程将 Zencoder 集成到我的 Rails 3 应用程序中：http: [//www.nickdesteffen.com/blog/video-encoding-with-uploadify-carrierwave-and-zencoder](http://www.nickdesteffen.com/blog/video-encoding-with-uploadify-carrierwave-and-zencoder)

本教程使用 Rackspace 进行存储，但我想修改代码以便可以使用 Amazon S3 进行存储。我用我的 Amazon S3 信息替换了所有 Rackspace 信息，但是每当我尝试在表单中上传视频时，我都会收到以下 HTTP 错误：“您尝试上传的文件出错。请验证它是正确的类型。”

我需要在这里修复什么才能完成这项工作？

**载波.rb**

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',
    :aws_access_key_id      => 'xxx',
    :aws_secret_access_key  => 'xxx',
  }
  config.fog_directory  = 'mybucket'
  config.fog_public     = true
  config.fog_attributes = {'Cache-Control' => 'max-age=315576000'}
end 
```

**video_uploader.rb**

```
class VideoUploader < CarrierWave::Uploader::Base
  include Rails.application.routes.url_helpers

  Rails.application.routes.default_url_options = ActionMailer::Base.default_url_options

  after :store, :zencode

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  def extension_white_list
    %w(mov avi mp4 mkv wmv mpg)
  end

  def filename
    "video.mp4" if original_filename
  end

  private 

  def zencode(args)
    zencoder_response = Zencoder::Job.create({:input => 's3://mybucket/key.mp4',
                      :outputs => [{:label => 'vp8 for the web',
                                    :url => 's3://mybucket/key_output.webm'}]})

    zencoder_response.body["outputs"].each do |output|
      if output["label"] == "web"
        @model.zencoder_output_id = output["id"]
        @model.processed = false
        @model.save(:validate => false)
      end
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:37:11.563

我一直在研究同样的问题。

使用 Fog 作为我的凭据，我创建了我的网址，如下所示：

```
bucket = AttachmentUploader.fog_directory
input = "s3://#{bucket}/#{self.path}"
base_url = "s3://#{bucket}/#{store_dir}" 
```

看看我的要点了解更多细节：[https ://gist.github.com/4002368](https://gist.github.com/4002368)

**不要忘记允许 Zencoder 通过安全策略访问您的存储桶：[https ://app.zencoder.com/docs/guides/getting-started/working-with-s3](https://app.zencoder.com/docs/guides/getting-started/working-with-s3)**

# c# - RavenDB：Raven.Abstractions.Exceptions.ConcurrencyException：具有键的文档：'cache-fncwr10b' 当前在另一个事务中创建

> ID：11725010
> 
> 赞同：3
> 
> 时间：2012-07-30T15:52:16.850
> 
> 标签：c#, nservicebus, ravendb

**问题上下文：** 有一段代码试图在 NServiceBus 消息处理程序中向 RavenDB 添加新文档。

**编码：**

```
partial void HandleImplementation(SomeMessage message)
{
    PutDataIntoCache(message.CacheKey, message.Document);
}

void PutDataIntoCache(string key, Document document)
{
    using (var documentStore = new DocumentStore { Url = "http://localhost:8084" })
    {
            documentStore.Initialize();
            using (IDocumentSession session = documentStore.OpenSession())
            {
                using (var tx = new TransactionScope())
                {
                    session.Store(document, key);
                    session.SaveChanges();
                    tx.Complete();
                }
        }
    }
} 
```

**错误**

```
I'm getting the following error:
Raven.Abstractions.Exceptions.ConcurrencyException: A document with key: 'cache-fncwr10b' is currently created in another transaction
   at Raven.Client.Connection.ServerClient.DirectBatch(IEnumerable`1 commandDatas, String operationUrl) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Connection\ServerClient.cs:line 863
   at Raven.Client.Connection.ServerClient.<>c__DisplayClass56.<Batch>b__55(String u) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Connection\ServerClient.cs:line 837
   at Raven.Client.Connection.ServerClient.TryOperation[T](Func`2 operation, String operationUrl, Boolean avoidThrowing, T& result) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Connection\ServerClient.cs:line 222
   at Raven.Client.Connection.ServerClient.ExecuteWithReplication[T](String method, Func`2 operation) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Connection\ServerClient.cs:line 192
   at Raven.Client.Connection.ServerClient.Batch(IEnumerable`1 commandDatas) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Connection\ServerClient.cs:line 837
   at Raven.Client.Document.DocumentSession.SaveChanges() in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\DocumentSession.cs:line 441
   at CacheWarmer.Listener.Caching.UpdateCacheEntryProcessor.PutDataIntoCache(String key, ConfgDataModel confgDataModel) in UpdateCacheEntryProcessor.cs 
```

**问题** 有没有人遇到过这个？你是怎么解决的？这可能是什么原因造成的？

任何有用的意见或提示将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:37:59.613

另外，不要`DocumentStore`在每次通话时都创建一个新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:23:34.067

当您尝试从 2 个不同的 raven 客户端修改同一个文档时，或者当您在应用程序重新启动时将 resourceManagerId 设置为不同的值时，通常会发生此错误。我没有看到您在提供的代码中设置 ResourceManagerId，因此这可能是第一个问题。

如果您要从同一台机器上的多个客户端（在您的情况下为 NServiceBus 端点）修改相同的 raven 数据库，那么您需要为每个客户端（DocumentStore）指定一个 resourceManagerId。您可以在连接字符串中或通过在 DocumentStore 上设置 ResourceManagerId 属性来指定它。此 ID 在重新启动时应该是唯一且持久的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T04:52:11.353

如果你正确使用 NSB，你可以从你的尖峰代码中删除几乎所有的东西，并且只`session.Store()`在你注入的文档会话中写入。但是你需要为此连接一个`IManageUnitOfWork`。如果您有启用 DTC 的事务端点，则 TransactionScope 将已从 NSB 打开。

# asp.net - 使用 HTML 标签格式化 XML Feed 中的 Title 元素

> ID：11725012
> 
> 赞同：0
> 
> 时间：2012-07-30T15:52:25.633
> 
> 标签：asp.net, feed, syndicationfeed

我正在使用 ASP.Net 的内置类为网站创建 XML 提要。这是我的代码，

```
SyndicationFeed myFeed = new SyndicationFeed();
myFeed.Title = TextSyndicationContent.CreatePlaintextContent
("XYZ  - In the first line &lt;br/&gt; in the second line"); 
```

渲染时，它按原样显示 -

```
XYZ  - In the first line &lt;br/&gt; in the second line 
```

而我想要它

```
XYZ  - In the first line 
in the second line 
```

我看到该行为仅适用于 myFeed.Title，而在 myFeed.Description 中，我可以使用任何 HTML 标记。

有什么方法可以让 HTML 标签与 Titles 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:00:54.230

请改用[SyndicationContent.CreateHtmlContent 方法](http://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationcontent.createhtmlcontent%28v=vs.100%29)。SyndicationContent.CreatePlaintextContent 总是对文本进行转义以使其按字面呈现。

# php - 如何在 PHPSpec 中使用 ThrowException 匹配器？

> ID：11725013
> 
> 赞同：0
> 
> 时间：2012-07-30T15:52:35.880
> 
> 标签：php, tdd, bdd, phpspec

我在使用 ExceptionMatcher 时遇到问题...我的示例规范：

```
class DescribeBall extends \PHPSpec\Context {

private $_ball = null;

function before() {
    $this->_ball = $this->spec(new Ball);
}

function itShouldHaveStatusRolledOnRoll() {
        $this->_ball->roll();
        $this->_ball->getStatus()->should->be('Rolled');
}

function itShouldThrowException() {
    $this->_ball->getException()->should->throwException('Exception','Error');
}
} 
```

我的示例类

```
class Ball {
    private $status = null;

    public function roll() {
        $this->status = 'Rolled';
    }

    public function getStatus() {
        return $this->status;
    }

    public function getException() {
        throw new Exception('Error');
    }

} 
```

有人成功使用了这个匹配器吗？

```
$this->_ball->getException()->should->throwException('Exception','Error'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T08:39:30.380

感谢我的同事：

“我上次查看它时，它使用了闭包（除非 Marcello 同时更改它）它应该仍然像这样工作”：

```
function itShouldThrowException() { 
    $ball = $this->_ball;
    $this->spec(function() use ($ball) {
            $ball->getException();
        })->should->throwException('Exception','Error');
} 
```

# silverlight - 在 DataTemplate 中操作值转换器

> ID：11725014
> 
> 赞同：1
> 
> 时间：2012-07-30T15:52:46.577
> 
> 标签：silverlight, ivalueconverter, valueconverter, template-control

我有一组用于自定义控件的数据模板。它运作良好，但我希望能够将它绑定到数据并根据集合的最小值/最大值缩放值。我创建了以下值转换器：

```
 public class ScaleValueConverter : IValueConverter
{
    /// <summary>
    /// The property to use the value of
    /// </summary>
    public string ValueProperty { get; set; }

    /// <summary>
    /// The minimum value to be scaled against. Will become 0%
    /// </summary>
    public int MinValue { get; set; }

    /// <summary>
    /// The maximum value to be scaled against. Will become 100%.
    /// </summary>
    public int MaxValue { get; set; }

    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var type = value.GetType();
        var property = type.GetProperty(ValueProperty);

        if (property == null)
            return 0;

        var result = System.Convert.ToDecimal(property.GetValue(value, null));

        //TODO: Scale stuff

        return result + 100;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

目的是拥有一个通用值转换器，并简单地将绑定源对象提供给 XAML 中的值转换器，并让它解决问题。

但是，我不确定如何执行此操作，因为我无法访问从模板控件创建的值转换器。

我正在寻找大致如下工作的东西：

```
 public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();

        //Get Value Converters
        var topScaleValueConverter = GetTemplateChild("TopScaleValueConverter");
        var bottomScaleValueConverter = GetTemplateChild("BottomScaleValueConverter");

        //Setup value converter Min / Max / ValueProperty here
    } 
```

理想情况下，它们将成为我模板的一部分，我可以将它们提取为部分，但这似乎不起作用。

谁能指出我让这种行为发挥作用的正确方向？

问候

特里斯坦

编辑：我想能够依赖注入它们会很好。有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:16:03.760

从 DependDencyObject 派生 ScaleValueConverter 并将您的属性实现为依赖属性。

```
 public class ScaleValueConverter : DependencyObject, IValueConverter
    {

        public double MinValue
        {
            get { return (double)GetValue(MinValueProperty); }
            set { SetValue(MinValueProperty, value); }
        }

        public static readonly DependencyProperty MinValueProperty =
            DependencyProperty.Register("MinValue", typeof(double), typeof(ScaleValueConverter), new PropertyMetadata(0.0d));

        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            double result = double.Parse(value.ToString())

            if (result < MinValue)
            {
                result = MinValue;
            }

          return result;
        }
    } 
```

然后，您将能够通过 VM 将数据“注入”到您的属性中。

```
<ns:ScaleValueConverter x:Key="scaleValue" MinValue="{Binding MinValue,Source={StaticResource MyModelSource}" /> 
```

简而言之，将您的转换器与任何其他依赖对象一样对待并像往常一样绑定。

# c++ - 为什么要声明一个虚拟析构函数 C++？

> ID：11725016
> 
> 赞同：0
> 
> 时间：2012-07-30T15:52:51.733
> 
> 标签：c++

> **可能重复：**
> [为什么要在 C++ 中为抽象类声明虚拟析构函数？](https://stackoverflow.com/questions/270917/why-should-i-declare-a-virtual-destructor-for-an-abstract-class-in-c)

我在这里继承了一些我试图理解的代码，头文件是：

```
class RemoteNotify : public virtual ServiceObject, public virtual RemoteMsg{
      RemoveNotify();
      virtual ~RemoveNotify();
      /* more code down here */
} 
```

我想知道为什么有人会声明一个`virtual`析构函数？

# java - 高档 2D 低分辨率图像

> ID：11725017
> 
> 赞同：0
> 
> 时间：2012-07-30T15:52:51.837
> 
> 标签：java, swing, jframe, image-resizing

我正在使用带有 XBR4x 算法的程序[ImageResizer将旧 2D 游戏中的 .gif 图像从 32x32 升级到 48x48。](https://code.google.com/p/2dimagefilter/)

具体流程：

1.  手动将所有图像重命名为 .jpeg，因为程序不会打开 .gif
2.  调整图像大小，程序将它们保存为 .bmp
3.  再次手动将图像重命名为 .gif。

问题：

在 Paint 中查看图像时，它们看起来非常好，当在我的 RGB BufferedImage 中绘制时，它们突然都有一个不是背景颜色的白色/灰色 ~1px 边框，图像直接相邻放置。因为我有这些图像的完整马赛克，所以白色边框是不行的。

图像 32x32：![在此处输入图像描述](../Images/870377927bb36e916f4e641ef675bc8e.png)

放大后的图像 48x48：![在此处输入图像描述](../Images/3049e7a3895c4089bd618fbcdee33ca6.png)

其中 4 张带有白色边框的地球图像的游戏截图：![在此处输入图像描述](../Images/f8af93fdb34d572efb9fc79494a7d0e6.png)

问题：

这些边界是如何产生的？如果无法回答这个问题，是否有更可靠的方法来提升低分辨率游戏图像，使其看起来不那么像素化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:00:08.347

我认为这是图像调整大小算法的产物，例如，如果您在 XnView 中查看它们，则在合并之前，边框实际上是可见的，在放大的图像中。解决此问题的最佳方法是使用另一种工具来调整图像大小，该工具允许用户控制此类边界效果，但如果您必须使用此工具，您仍然可以通过构建 3x3 网格来解决该问题原始图像（将是 96x96），将其缩放到 144x144，然后切出中心的 48x48 块。这将消除边界效应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T03:44:21.083

边框是由上述工具执行的缩放过程的结果。考虑这个演示，它显示了基于问题的缩放图像和使用[Image.getScaledInstance()](http://docs.oracle.com/javase/6/docs/api/java/awt/Image.html#getScaledInstance%28int,%20int,%20int%29)创建的缩放图像的图块。

请注意，如果您选择保留自己的缩放方法，请查看[Image.getScaledInstance() 的风险以](http://today.java.net/pub/a/today/2007/04/03/perils-of-image-getscaledinstance.html)获得更优化的解决方案。

![在此处输入图像描述](../Images/006c1dfbf745720c5244c13f41534cac.png)

```
import java.awt.Graphics;
import java.awt.GraphicsEnvironment;
import java.awt.Image;
import java.awt.Transparency;
import java.awt.image.BufferedImage;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

public class TestImageScale {

    public static void main(String[] args) {
        try {
            BufferedImage original = ImageIO.read(new URL(
                    "http://i.stack.imgur.com/rY2i8.gif"));
            Image scaled = original.getScaledInstance(48, 48,
                    Image.SCALE_AREA_AVERAGING);
            BufferedImage scaledOP = ImageIO.read(new URL(
                    "http://i.stack.imgur.com/Argxi.png"));

            BufferedImage tilesOP = buildTiles(scaledOP, 3, 3);
            BufferedImage tiles = buildTiles(scaled, 3, 3);

            JPanel panel = new JPanel();
            panel.add(new JLabel(new ImageIcon(tilesOP)));
            panel.add(new JLabel(new ImageIcon(tiles)));

            JOptionPane.showMessageDialog(null, panel,
                    "Tiles: OP vs getScaledInstance",
                    JOptionPane.INFORMATION_MESSAGE);
        } catch (Exception e) {
            JOptionPane.showMessageDialog(null, e.getMessage(), "Failure",
                    JOptionPane.ERROR_MESSAGE);
            e.printStackTrace();
        }
    }

    static BufferedImage buildTiles(Image tile, int rows, int columns) {

        int width = tile.getWidth(null);
        int height = tile.getHeight(null);

        BufferedImage dest = GraphicsEnvironment
                .getLocalGraphicsEnvironment()
                .getDefaultScreenDevice()
                .getDefaultConfiguration()
                .createCompatibleImage(width * rows, height * columns,
                        Transparency.TRANSLUCENT);
        Graphics g = dest.getGraphics();
        for (int row = 0; row < rows; row++) {
            for (int col = 0; col < columns; col++) {
                g.drawImage(tile, row * width, col * width, null);
            }
        }

        g.dispose();

        return dest;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:01:14.700

只是一个疯狂的猜测：原始图像是否有一个 Alpha 通道（或者你在调整大小时隐式创建一个）？当使用 alpha 调整图像大小时，缩放过程可能会假设图像外部的区域是透明的，并且边框像素也可能变得部分透明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T22:39:54.937

我给工具的开发者 Hawkynt 发了电子邮件，似乎错误不在工具中，而是在 Microsoft 的实现中，他修复了它（实际上像 Multiple Image Resizer .NET 这样更大的工具也有问题）。这是他对他的计划所说的：

“当您手动输入宽度和/或高度时，图像会通过所选算法调整大小，一切正常。

之后我使用了来自 GDI+ 的 resample 命令，它实现了 Microsoft 版本的双三次调整大小算法。这个实现是有缺陷的，所以它会在 300 像素以下的图像的左侧和上部生成一个像素。

我通过简单地将调整大小的图像比想要的大一个像素并将其向左并向上移动一个像素来修复它，因此白色边框不再可见，并且目标图像具有他预期的尺寸。”

# c# - System.ComponentModel.DataAnnotations MaxLength 未显示

> ID：11725020
> 
> 赞同：6
> 
> 时间：2012-07-30T15:53:09.033
> 
> 标签：c#, asp.net, asp.net-mvc-3, data-annotations

我创建了一个单独的类库来保存我的所有模型对象。这是因为有两个站点，但需要相同的模型对象和随附的验证。我认为我可以将代码添加到库中，而不是在两个地方复制和粘贴代码。除了 MaxLength，一切看起来都很棒，当我添加 System.ComponentModel.DataAnnotations 时它不会出现

是的，我添加了一个参考，但似乎没有什么能像在 Web 解决方案中那样工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T15:57:00.597

尝试使用`[StringLength(40, ErrorMessage = "Name cannot be longer than 40 characters.")]`，因为此属性也会生成客户端不显眼的 JS 验证规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T16:03:58.710

请尝试使用 StringLength。StringLength 用于模型验证，而 MaxLength 用于实体框架决定在数据库中创建字符串字段的大小。

# jquery - 将 URL 中的 ?= 字符串更改为主题标签

> ID：11725022
> 
> 赞同：-3
> 
> 时间：2012-07-30T15:53:26.343
> 
> 标签：jquery

我正在寻找与 URL 中的 ?= 匹配的片段并将其替换为 #。

例如：

[http://www.example.com?=100](http://www.example.com?=100)

会成为：

[http://www.example.com#100](http://www.example.com#100)

编辑：- 感谢您的帮助，正在寻找替换 ?= 与 # 并使用：-

```
 var getURL = window.location.href
  var changeURL = getURL.replace("?=", "#");
  window.location.replace(changeURL); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T15:55:37.523

为什么需要使用 jQuery？

```
"http://www.example.com?=100".replace("?=", "#")
//result: http://www.example.com#100 
```

# .htaccess - .htaccess 中的重写规则：子域到静态链接

> ID：11725025
> 
> 赞同：1
> 
> 时间：2012-07-30T15:53:32.823
> 
> 标签：.htaccess, drupal, url-rewriting, subdomain

我想重写

subdomain.domain.com

到一个静态链接，比如

www.domain.com/pageId5。

域是相同的，我在 .htaccess 中尝试了很多东西，但没有任何效果。我也没有发现对搜索功能有帮助，请帮助！

我正在使用 Drupal，所以没有我可以指向的目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:09:06.070

尝试将其放入文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^subdomain.domain.com$ [NC]
RewriteRule ^$ http://www.domain.com/pageId5 [R=301,L] 
```

# workflow - 如何将复杂的工作流程拆分为子任务模板？

> ID：11725026
> 
> 赞同：3
> 
> 时间：2012-07-30T15:53:32.130
> 
> 标签：workflow, project-management, jira, jira-plugin

我们公司正在迁移到 Jira 进行所有项目管理和问题解决

我们有一些我正在尝试为其构建模板的主要用途。一个是发现并修复的典型问题，可以通过基本上包含的 jira 工作流程轻松处理一个问题。

一个更复杂的方法是遵循瀑布式工作流程，其中收集了包括估计在内的需求。然后开发开始，并行测试脚本被制作。开发完成后，项目经过测试并移交给客户。最后，一旦全部测试完毕，我们就会发布更改并重新测试。总的来说，我在 5 个子任务中构建了 30 个不同的步骤（但是这一切都只是在 Visio 中绘制出来，实际上还没有在 jira 中）。

我希望跨子任务的拆分可以完成两件事。首先是我们要跟踪开闭时间和工作量（所需的工作时间和天数）。我们应该将工作流程拆分给多个人，这样开发人员就可以工作，而测试人员可以制定他们的测试计划。这可以节省几天时间，但不会破坏交易。

所以我希望有几个问题可以帮助实现这一点，虽然我对 Jira 的各种附加组件很陌生，但我不知道我们是否会得到我们想要的一切。

1，是否有构建子任务模板的插件，因为每个子任务都需要自己的工作流程。目前 Jira 的规则是根据项目+问题类型分配工作流。所以我相信我可以通过创建许多问题类型来为每个子任务分配适当的工作流程，例如为名为 Analysis 的子任务创建“Custom-Dev-Analsys”

2，是否有可能只有 1 个或几个子任务是“当前”的？当问题开始时，第一个子任务应该是唯一的工作，只有一个步骤分配给某人。签核后应该有 2 个子任务，开发一个和构建测试脚本。但是从一开始就不应该开始所有5个子任务，但似乎这就是Jira会做的事情。我已经查看了附加组件“结构”，虽然它具有无限的层次结构，但我认为它不会让子任务按顺序打开。可能有一种简单的方法可以使工作流打开下一个任务（我对工作流非常陌生，并在弄乱我们的网站之前尝试尽可能多地学习）

3，如果有人能想出一些不同的方式来做我需要的事情，我会全力以赴。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:29:06.660

我不知道有任何插件可以满足所有要求，但我不得不处理类似的问题，并设法使用[Jira Scripting Suite](https://marketplace.atlassian.com/16346)解决了其中大部分问题，但它确实需要一些开发（使用 python）。

[将创建或关闭新问题或新子任务](https://stackoverflow.com/questions/10875414/create-jira-sub-tasks-automatically-when-issue-created/10877552#10877552)的工作流转换添加到您的工作流程中很容易。我使用它来创建子任务，只需在问题屏幕之一中填写一些必填字段。创建子任务后，只有自动化脚本可以关闭问题，这可以通过关闭所有子任务来完成。

如果这种解决方案适合您，我将很乐意为您提供任何进一步的咨询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:58:07.997

JIRA 不支持嵌套工作流，但要记住的一件有用的事情是，如果您更改 JIRA 问题的问题类型，它可以有不同的工作流。所以一个问题可以从 TEST-123 开始，这是一个要求。然后在它到达其工作流程的末尾后，它可以被移动为任务问题类型。子任务应该和以前一样。

# c# - 匹配数据表的列

> ID：11725028
> 
> 赞同：0
> 
> 时间：2012-07-30T15:53:37.623
> 
> 标签：c#, datatable

我有两个具有相同列但名称不同的 excel 文件。

我必须从源中找到列名，并为目标找到相同的列名。名称可以不同。我必须比较这些值以找出匹配的列名。

例如，一张 excel 表可能有

```
Order ID   Quantity   Units
---------  -------   --------
1022         7          55 
```

另一个可以有

```
Order ID   Qty         Unt
--------   --------   --------
1022         7          55 
```

所以通过比较数据，我知道 Qty 和 Quantity 相同，Unit 和 Unt。

我使用数据适配器并通过阅读 excel 表来填写两个数据表。我想知道如何匹配两列，因为它们的 ID 相同（订单 ID），并通过使用两个数据表比较值。

```
 string _basePath = @"C:\Users\Dev\Documents\Visual Studio 2010\Projects\Excel2\Excel2\";
    string _targetConnStr = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + _basePath + "Target.xlsx" + ";Extended Properties=Excel 12.0;";
    string _sourceConnStr = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + _basePath + "Source.xlsx" + ";Extended Properties=Excel 12.0;";

    var adapter = new OleDbDataAdapter("SELECT * FROM [Target$]", _targetConnStr);
    var ds = new DataSet();
    adapter.Fill(ds, "targetTable");
    DataTable _targetDataTable = ds.Tables["targetTable"];

    adapter = new OleDbDataAdapter("SELECT * FROM [4028001$]", _sourceConnStr);
    ds = new DataSet();
    adapter.Fill(ds, "sourceTable");
    DataTable _sourceDateTable = ds.Tables["sourceTable"];

        foreach (DataRow row in _targetDataTable.Rows) // Loop over the rows.
        {
            foreach (var item in row.ItemArray) // Loop over the items.
            {
               Console.WriteLine(item);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:15:22.260

如果您知道文件 1 使用字段 a、b、c 并且文件 2 使用字段名称 x、y、z，那么您可以在 select 语句中使用字段名称别名。

例如：

```
SELECT OrderID as "Order ID", Quantity as "Quantity", Units as "Units" FROM [Target$] 
```

和

```
SELECT OrderID as "Order ID", Qty as "Quantity", as Unt "Units" FROM [4028001$] 
```

然后可以使用相同的列名（“订单 ID”、“数量”和“单位”）引用两个结果集

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:18:55.537

您可以使用列索引，即： _targetDataTable.Columns[0] 和 _sourceDateTable.Columns[0] _targetDataTable.Columns[1] 和 _sourceDateTable.Columns[1] 1 作为数量或数量的第二列等等

# jquery - jqgrid过滤奇怪的行为

> ID：11725029
> 
> 赞同：0
> 
> 时间：2012-07-30T15:53:44.637
> 
> 标签：jquery, jqgrid, filtering

查看用于 jqgrid 过滤的[Oleg 解决方案](https://stackoverflow.com/questions/5749723/jqgrid-filtering-records)，我编写了一个代码来过滤我的 jqgrid。不同的是有3个不同的研究领域，但只有一个按钮来执行全局搜索。它工作得很好，但是即使第一次搜索正确执行，第二次搜索执行了 2 次，第三次搜索执行了 4 次，第四次搜索了 8 次等等，如果我进行大量搜索会导致几个问题。这是代码：

```
var grid= $("#mygrid");

function executeSearchInSoftgrid() {    
$("#executeSearch").click(function() {
    f = {groupOp:"AND",rules:[]};
    var searchFiler = $("#filterField1").val(), f;
    var searchFiler2 = $("#filterField2").val(), f;
    var searchFiler3 = $("#filterField3").val(), f;
    if (searchFiler.length === 0) {
        grid[0].p.search = false;
        $.extend(grid[0].p.postData,{filters:""});
    }
    if (searchFiler2.length === 0) {
        grid[0].p.search = false;
        $.extend(grid[0].p.postData,{filters:""});
    }
    if (searchFiler3.length === 0) {
        grid[0].p.search = false;
        $.extend(grid[0].p.postData,{filters:""});
    }

    f.rules.push({field:"field1",op:"cn",data:searchFiler});
    f.rules.push({field:"field2",op:"cn",data:searchFiler2});
    f.rules.push({field:"field3",op:"cn",data:searchFiler3});
    grid[0].p.search = true;
    $.extend(grid[0].p.postData,{filters:JSON.stringify(f)});
    grid.trigger("reloadGrid",[{page:1,current:true}]);
    alert("searching");
}); 
```

}

无论我在哪里调用函数（loadcomplete、gridcomplete、readyfunction），行为都是一样的。有任何想法吗？？？谢谢

**编辑**

这是我调用函数的地方，它终于起作用了：

```
var initialize = true;
$("#mygrid")
        .jqGrid({
            gridComplete:function () {
                if(initialize == true) {
                executeSearchInSoftgrid();
                initialize = false;
                //....
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:18:52.590

我想您的代码中的问题是您将其放置`$("#executeSearch").click`在`executeSearchInSoftgrid`您可能会多次调用的函数内部。编码

```
$("#executeSearch").click(function() {...}); 
```

只不过是注册事件处理程序（函数`function() {...}`），如果用户单击具有`id="executeSearch"`. 您可以为事件注册 *多个*事件句柄`click`。在这种情况下，所有回调都将按照注册的顺序调用。

所以**你应该只注册一次回调函数**。如果您需要独立于用户交互的事件处理程序调用，您可以使用`$("#executeSearch").triggerHandler('click')`（参见[此处](http://api.jquery.com/triggerHandler/)）或仅使用`$("#executeSearch").click();`.

# ios - 方法中两个参数的区别 - (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event

> ID：11725031
> 
> 赞同：0
> 
> 时间：2012-07-30T15:54:17.367
> 
> 标签：ios, objective-c, parameters, touches

当我试图弄清楚如何处理 iOS 中的触摸时，我看到一些代码使用第一个参数“touches”，一些使用第二个参数“[event allTouches]”。所以无论如何，他们之间有什么区别。什么情况用第一种，什么情况用第二种。谢谢！这里有更多细节：

```
// used the first parameter
- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    NSUInteger touchCount = [touches count];
    NSUInteger tapCount = [[touches anyObject] tapCount];
    methodStatus.text = @"touchesEnded";
    touchStatus.text = [NSString stringWithFormat:@"%d touches", touchCount];
    tapStatus.text = [NSString stringWithFormat:
   @"%d taps", tapCount];
}

// used the second parameter
-(void) touchesBegan: (NSSet *) touches withEvent: (UIEvent *) event {

    NSSet *allTouches = [event allTouches];
    //...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:08:34.167

UIEvent 具有称为时间戳的属性以及触摸。除此之外，我相信两者都是一样的。

# android - DatePicker 不工作，IllegalArgumentException

> ID：11725039
> 
> 赞同：1
> 
> 时间：2012-07-30T15:54:46.480
> 
> 标签：android, android-datepicker

我正在使用 API 级别 10，我不想仅使用支持库来实现 DatePicker，因此我使用以下方法来创建日期对话框。我以前使用过一个 DatePicker，它工作得很好。我只是看不出这里有什么问题。

我有两个日期对话框来选择各个 OnClickListeners 调用的日期。有人可以帮忙吗？谢谢你。

// 这是在 onCreate

```
 ImageView fromCalendar = (ImageView) findViewById(R.id.from_calendar);
ImageView toCalendar = (ImageView) findViewById(R.id.to_calendar);

fromCalendar.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        showDialog(FROM_DATE_DIALOG);

    }
});

toCalendar.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        showDialog(TO_DATE_DIALOG);

    }
});

 private DatePickerDialog.OnDateSetListener toDateSetListener = new DatePickerDialog.OnDateSetListener() {
    public void onDateSet(DatePicker view, int year, int monthOfYear,
            int dayOfMonth) {

        mYear = year;
        mMonth = monthOfYear;
        mDay = dayOfMonth;
        Log.e("mYear", "" + year + " mMonth:" + mMonth + " mDay" + mDay);
        String date = updateDisplay(true);

        toDate.setText(date);
    }
}; 
```

//在onCreate之外

```
private DatePickerDialog.OnDateSetListener fromDateSetListener = new DatePickerDialog.OnDateSetListener() {
    public void onDateSet(DatePicker view, int year, int monthOfYear,
            int dayOfMonth) {

        mYear = year;
        mMonth = monthOfYear;
        mDay = dayOfMonth;
        Log.e("mYear", "" + year + " mMonth:" + mMonth + " mDay" + mDay);
        String date = updateDisplay(true);

        fromDate.setText(date);
    }
};

protected Dialog onCreateDialog(int id) {
    switch(id) {

    case FROM_DATE_DIALOG:
        Log.e("onCreateDialog::mYear", "" + mYear + " mMonth:" + mMonth
                + " mDay" + mDay);
        return new DatePickerDialog(this, fromDateSetListener, mYear, mMonth,
                mDay);

    case TO_DATE_DIALOG:
        Log.e("onCreateDialog::mYear", "" + mYear + " mMonth:" + mMonth
                + " mDay" + mDay);
        return new DatePickerDialog(this, toDateSetListener, mYear, mMonth,
                mDay);
    }
    return null; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:02:26.563

对不起，这是重复的！

[java.lang.IllegalArgumentException: 当前应该 >= start 和 <= end](https://stackoverflow.com/questions/7753309/java-lang-illegalargumentexception-current-should-be-start-and-end)

我只需要初始化 mYear、mMonth 和 mDay。

# c# - 以编程方式加载或排除 system.webServer 模块

> ID：11725044
> 
> 赞同：1
> 
> 时间：2012-07-30T15:55:11.050
> 
> 标签：c#, asp.net, module

我开发了一个使用第三方 DLL 的网站。

此 DLL 声明了一个名为 AgeGatewayModule 的 IHttpModule 类。

我无权访问 DLL 的源代码。

在我的 web.config 中，我在配置属性中声明了一个 configSection 和提要：

```
<configSections>
<section name="AgeGatewayConfiguration" type="ExternalCompany.AgeGateway.SDK.AgeGatewayConfiguration" />
</configSections>

<AgeGatewayConfiguration
  AgeGatewayUrl="~/Age-Gateway/"
  AccessDeniedUrl="~/Access-Denied/"
  CountryServiceUrl="http://External-Company.svc/v1/" 
LocationServiceUrl="http://External-Company.svc/v1/" 
LdaServiceUrl="http://External-Company.svc/v1/" 
WhiteListingUserAgentsServiceUrl="http://External-Company.svc/v1/UserAgents/" 
WhiteListingReferrersServiceUrl="http://External-Company.svc/v1/Referrers/" 
TokenRealm="http://External-Company.com" 
TokenUserId="xxxx" 
TokenPassword="xxxxxx" 
TokenServiceNamespace="xxxxx" 
TokenAcsHostUrl="accesscontrol.windows.net" 
AllowedGreyCountriesToGlobal="AL" /> 
```

最后，模块被添加如下：

```
 <system.webServer>
<modules runAllManagedModulesForAllRequests="true">
  <add name="AgeGatewayModule" type="ExternalCompany.AgeGateway.SDK.AgeGatewayModule, Heineken.AgeGateway.SDK" preCondition="" />
</modules>
<validation validateIntegratedModeConfiguration="false" /> 
```

我遇到的问题是：

每次用户第一次访问该网站时 - 该用户都会被重定向到年龄网关页面。

但我希望如果管理员出现并请求某个 URL，例如：

```
 http://my-website/admin/ 
```

他们将免于填写年龄网关表格。即重定向不会发生。

在 web.config 中添加的 AgeGatewayModule 在幕后进行所有检查并在必要时重定向到 age-gateway url。

所以我希望能够说类似的话：

```
if(url != "http://my-website/admin/" || CurrentLoggedInUser != admin)
{
//load the AgeGatewayModule only now)
} 
```

这可能吗？

# c# - WPF UserControl 预配置

> ID：11725045
> 
> 赞同：3
> 
> 时间：2012-07-30T15:55:18.083
> 
> 标签：c#, wpf, xaml, dependency-properties

我正在设计一个用户控件，我想让它的行为可配置 - 但只有一次，当它被创建时。我以后不需要它来适应，因为我事先知道特定窗口将使用特定配置来使用它。

考虑这个简单的标记：

```
<MyControl SomeProperty="True" SomeOtherProperty="12345" /> 
```

`SomeProperty`并且`SomeOtherProperty`是在我的代码隐藏中声明的 DependencyProperties。

`InitializeComponent()`问题是：在调用之前，控件在其构造函数中对其输入数据进行了一些预处理。在那个阶段，我无权访问`SomeProperty`或`SomeOtherProperty`由用户定义 - 他们仍然具有默认值。

之后，如果在 XAML 中设置了这些属性，则会在构造函数*之后*为它们分配值。我可以通过引入 a 来响应它们，`PropertyChangedCallback`并在每个属性更新后再次执行计算。

这是次优的，因为我只想传递**一次**值并确保控件的初始化逻辑也只运行一次 - 已经使用正确的设置。s的解决方案`PropertyChangedCallback`要求我使这个控件更复杂，即在控件的整个生命周期内对这些依赖属性的*任何*更改做出响应。这比我需要的要多得多——如果我的属性是只读的并且在控件创建时只设置一次就可以了。

如何在保持 XAML 标记干净的同时做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:00:42.073

必须构造您的控件以便 WPF 设置属性 - 没有办法将构造“延迟”到设置属性之后。

与其将初始化逻辑放在构造函数中，不如尝试将其放在其他地方，例如订阅[Loaded 事件](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.loaded)并在那里初始化。这将在设置属性后发生。

# objective-c - 用于 zip 文件和 iCloud 数据备份的 Md5

> ID：11725047
> 
> 赞同：0
> 
> 时间：2012-07-30T15:55:25.183
> 
> 标签：objective-c, ios, icloud

我在一个 iOS 应用程序中调用一个 Web 服务，它返回一个 URL 来下载一本书的 zip 文件及其 MD5 校验和。我想通过计算文件的 MD5 校验和进行比较来检查文件的完整性。

1.  我该如何计算呢？该文件是一个 .zip 文件，它存储在`Documents`.
2.  第二个问题是：我想防止文件，例如书籍，htmpl 文件，被备份到 iCloud 和 iTunes，我看到 iOS 5.1 及更高版本有解决方案，但我想把我的应用程序给用户使用 iOS 5.0。有解决方案吗？我可以把下载的书放到 Cashes 里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:09:01.437

MD5 在 iPhone 上可用，可以作为扩展添加， `NSString`如下`NSData`所示。您也可以在 OSX 中使用相同的方法。

[Objective C 中的 MD5 算法](https://stackoverflow.com/questions/1524604/md5-algorithm-in-objective-c)

# java - 使用绝对路径时无法从 cmd 找到或加载主类

> ID：11725048
> 
> 赞同：2
> 
> 时间：2012-07-30T15:55:25.790
> 
> 标签：java, path, cmd, classpath

我无法使用绝对路径从命令提示符运行我的 Java 类。

在 cmd 中，当我 CD 到`C:\Automation\XML_wrapper\bin`并键入`java wrapper`它时，它可以工作。

当我输入`C:\`并输入`C:\program files\java\jdk.xxx\bin\java C:\Automation\XML_wrapper\bin\wrapper`时，它不起作用。

我尝试了 java 命令的变体，包括引号和`.exe`.

我还尝试了 java 类的变体，包括最后添加`-cp C:\Automation\XML_Wrapper\bin`和包含`.class`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:06:57.570

您需要将*类名*传递给`java`- 而不是*文件名*。您可能还需要提供一个类*路径*来说明在哪里可以找到文件：

```
java -cp C:\Automation\XML_wrapper\bin wrapper 
```

该`-cp`参数只是告诉 JVM 从哪里加载类 - 它可以是一系列目录和/或 jar 文件。该`wrapper`部分是类的名称，更常见的是`com.acme.SomeApplication`- 那是包中的`SomeApplication`类`com.acme`。（just 的类名`wrapper`会破坏 Java 命名约定。这不是非法的，只是非常规。）

# user-agent - URL 用户代理？

> ID：11725053
> 
> 赞同：0
> 
> 时间：2012-07-30T15:55:33.247
> 
> 标签：user-agent

有一个 URL，不幸的是我看不到任何内容，一个优化的 PHP 文件这个 URL，内容要使用用户代理隐藏。

我如何知道 User-Agent 使用的这个 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:00:48.953

您无法从 URL 接收用户代理信息。您只能通过服务器端检查从标头中检索它。

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

# tomcat - grails 应用程序无法在 Tomcat7 中启动 - 无法从日志中获取任何有用信息？

> ID：11725057
> 
> 赞同：0
> 
> 时间：2012-07-30T15:55:49.817
> 
> 标签：tomcat, grails, logging

我将一个 grails 2 应用程序部署到一个 tomcat7 中，它就是无法启动。我尝试了很多方法来从 catalina.out 或我的应用程序日志中获取任何信息，但我得到的只是

```
Jul 30, 2012 5:47:40 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.28
Jul 30, 2012 5:47:40 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor /etc/tomcat7/Catalina/localhost/manager.xml
Jul 30, 2012 5:47:41 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor /etc/tomcat7/Catalina/localhost/host-manager.xml
Jul 30, 2012 5:47:41 PM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive /var/lib/tomcat7/webapps/ROOT.war
Jul 30, 2012 5:47:41 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
Jul 30, 2012 5:47:49 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
Jul 30, 2012 5:47:49 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [] startup failed due to previous errors
Jul 30, 2012 5:47:49 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-127.0.0.1-8081"]
Jul 30, 2012 5:47:49 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 8372 ms 
```

我已经将 logging.properties 放入 /var/lib/tomcat/webapps/myApp/WEB-INF/classes 包含

```
org.apache.catalina.core.ContainerBase.[Catalina].level = INFO
org.apache.catalina.core.ContainerBase.[Catalina].handlers = java.util.logging.ConsoleHandler 
```

但这也没有给我更多信息。

此外，我将 grails 应用程序的日志级别更改为调试，但也没有出现错误。目前我不知道如何从 tomcat 或应用程序中获取任何有用的信息，帮助我找到错误:(

干杯，

莫里茨

*更新：*

对于我尝试运行的环境，我的 Config.groovy 看起来像这样：

```
staging {
    def logDirectory = "/var/log/myApp"

    log4j = {
        appenders {
            rollingFile name: 'stacktrace', file: "${logDirectory}/stacktrace.log".toString(), maxFileSize: '10MB'
            rollingFile name: 'myLog', file: "${logDirectory}/myApp_debug.log".toString(), maxFileSize: '10MB'
        }

        root {
            // change the root logger to myLog file
            debug 'myLog'
        }

        debug  'grails.app'
        debug  'org.codehaus.groovy.grails.commons' // Core artifact information such as class loading etc.
        debug  'org.codehaus.groovy.grails.web' //Grails web request processing
        debug  'org.codehaus.groovy.grails.web.mapping' // URL mapping debugging
        debug  'org.codehaus.groovy.grails.plugins' //  Log plugin activity
        warn  'grails.spring' // See what Spring beans Grails and plugins are defining
        debug  'org.springframework' // See what Spring is doing
        debug  'org.hibernate' // See what Hibernate is doing
        debug  'org.codehaus.groovy.grails.web.servlet'  //  controllers
        debug  'org.codehaus.groovy.grails.web.pages' //  GSP
        info  'org.apache.catalina' // tomcat

        // set level for my messages; this uses the root logger (and thus the tomcatLog file)
        debug 'myApp_debug.log'
    }

    grails.serverURL = "someUrl"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:24:20.907

查看所有日志文件 - catalina.out 很少有真正的问题。logs/localhost.2012-07-30.log 和 stacktrace.log 是你最好的选择。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-30T17:45:08.987

好吧，我终于找到了这个错误。不过，我找不到任何方法在日志中获取警告或错误。无论如何，我的错误在于我的应用程序的可搜索配置。

# php - CakePHP：可以使用 ACL 拒绝编辑模型中的特定字段吗？

> ID：11725058
> 
> 赞同：0
> 
> 时间：2012-07-30T15:55:57.397
> 
> 标签：php, cakephp, acl

我一直在阅读 CakePHP 的 ACL 组件。我知道它可以授予或拒绝某些操作，但我可以使用它来授予或拒绝对模型中特定字段的编辑吗？例如，假设我有一个带有 Posts 模型的博客应用程序和一个名为 Edit 的操作。我希望一位用户能够更改 Post.content，但不能更改 Post.is_published。此用户不应看到 is_published HTML 输入。这可以通过 ACL 完成还是我需要自己实现？任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:00:36.870

简单地说，ACL 是访问控制器和操作的访问控制列表，它与模型没有任何直接关系。您所要求的可能通过控制器方法 -actions- 间接完成！

# jquery - 函数名中使用的变量

> ID：11725061
> 
> 赞同：2
> 
> 时间：2012-07-30T15:56:06.153
> 
> 标签：jquery

我正在制作一个辅助函数，其中包括添加或删除一个类。该函数需要能够做到这一点，因为创建两个函数似乎没有任何意义，唯一的区别是一个添加一个类，另一个删除它。所以：

```
function kalf_addRow( type, action ) {
    found = $("."+type).not(".row-vis").first();
    found.slideDown();
    $(found).[INSERT 'action' IN HERE]Class("row-vis");     
} 
```

我会将“添加”或“删除”作为“操作”参数传递，然后需要将其插入显示的位置。我也需要为 slideDown 做类似的事情，但这基本上是同样的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:58:08.850

正如 asawyer 所说，您可以使用`toggleClass`.

```
$(found).toggleClass("row-vis", action == 'add'); 
```

或者另一种方法是使用`if`. 或者你可以这样做

```
$(found)[action + 'Class']("row-vis"); 
```

# opencl - OpenCL 中的最小/最大浮点或双精度常量

> ID：11725064
> 
> 赞同：4
> 
> 时间：2012-07-30T15:56:09.333
> 
> 标签：opencl

我需要 OpenCL 内核程序中涉及计算日志概率的最小/最大浮点数。我查看了 OpenCL 参考手册，但找不到这样的常量。

在 Java 中，它相当于 Double.MAX_VALUE;

在 C 中它位于 float.h

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T16:11:29.290

它们被称为 FLT_MAX / FLT_MIN 和 DBL_MAX / DBL_MIN。请参阅OpenCL 1.2 规范中的[宏和限制](http://www.khronos.org/registry/cl/sdk/1.2/docs/man/xhtml/macroLimits.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:59:13.717

一个明显的解决方案是只使用 1E+37。但是最好知道 OpenCL 是否已经定义了这样的常量。

# c++ - 让 OpenAL 在 C++ 中工作

> ID：11725066
> 
> 赞同：1
> 
> 时间：2012-07-30T15:56:10.337
> 
> 标签：c++, windows, openal

嘿伙计们，我在尝试让 openAL 在我的 c++ 程序中工作时遇到了麻烦。我已经安装了[oalinst](http://connect.creativelabs.com/openal/Downloads/Forms/AllItems.aspx)和[ALUT](http://connect.creativelabs.com/openal/Downloads/Forms/AllItems.aspx?RootFolder=/openal/Downloads/ALUT&FolderCTID=&View=%7B6A9700C6-7248-4CD2-83F5-268F2C176072%7D)（Windows 二进制），但是当我尝试编译/运行我的程序（使用 Qt Creator）时，我收到以下错误：

```
C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\al\alut.h:5: error: C1083: Cannot open include file: 'alc.h': No such file or directory 
```

我在我的 main.cpp 文件中包含“al/alut.h”，它尝试包含“alc.h”和“al.h”

我试图在我的整个计算机中搜索这两个头文件，但都找不到它们（搜索从“C：\”开始，所以我知道它必须查看我的整个系统）。我使用的是 Windows 7 家庭高级版 32 位。

是否有其他人在安装程序或二进制文件未安装/随附这些文件时遇到问题？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:25:41.777

如果我没错的话。alc.h 和其他文件捆绑在 OpenAl SDK 中（您需要将其添加到项目的包含和库路径中）。

[http://connect.creativelabs.com/developer/Wiki/OpenAL%20SDK%20for%20Windows.aspx](http://connect.creativelabs.com/developer/Wiki/OpenAL%20SDK%20for%20Windows.aspx)

注意：现在，由于某种原因，我无法从该来源下载它。

# asp.net - ASP.NET :HyperLinkColumn - 'HyperLinkColumn' 不是已知元素。如果网站中存在编译错误，则可能会发生这种情况

> ID：11725069
> 
> 赞同：0
> 
> 时间：2012-07-30T15:56:15.520
> 
> 标签：asp.net

我收到以下错误：元素“HyperLinkColumn”不是已知元素。如果网站中存在编译错误，就会发生这种情况。

在我之前的 GridView 中：

```
 <asp:BoundField DataField="ProID" HeaderStyle-BackColor="#0066cc" 
     HeaderStyle-Font-Size="7pt" HeaderStyle-HorizontalAlign="center" 
     HeaderText="ProID" ItemStyle-HorizontalAlign="center" /> 
```

我将其替换为：

```
 <asp:HyperLinkColumn DataNavigateUrlField="ProID" 
      DataNavigateUrlFormatString="pro.aspx?pro={0}" 
      DataTextField="ProID" HeaderText="ProID" SortExpression="ProID">
      <HeaderStyle HorizontalAlign="Left" />
      <ItemStyle HorizontalAlign="Left" />
      </asp:HyperLinkColumn> 
```

不知道为什么它给我这个信息。我的目标只是将该列变成一个超链接，这样我就可以让用户访问指定的页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:31:50.993

1：您可以使用超链接字段：

```
 <asp:HyperLinkField DataNavigateUrlFields="ProID"
   DataNavigateUrlFormatString="http://www.google.com/id={0}" DataTextField="ProID"
   HeaderText="ProID" /> 
```

2：您可以使用navigateUrl：

```
 <asp:TemplateField>
    <ItemTemplate>
      <asp:HyperLink runat="server" ID="btnGo" Text='<%# Eval("ProID") %>' NavigateUrl='<%# "pro.aspx?pro" + Eval("ProID") %>' />
    </ItemTemplate>
  </asp:TemplateField> 
```

# java - 如何反序列化从服务器接收到的客户端异常

> ID：11725073
> 
> 赞同：2
> 
> 时间：2012-07-30T15:56:25.700
> 
> 标签：java, json, cxf, jax-rs, deserialization

我有一个客户端 (JVM1) 以 RESTful 方式与服务器 (JVM2) 交谈。我正在使用 JSON 作为有效负载机制。

当服务器抛出异常时，我可以将其序列化为 JSON 格式并通过网络发送。在客户端，我收到响应并查看 JSON 格式的内容。

问题是我无法识别正在抛出的特定类型的异常。

给定 JSON 格式的某些异常的序列化版本（可能是 NullPointerException、IllegalStateException，甚至是检查异常），我如何在客户端构造相同类型的对象。

如果需要，我可以添加任何包装类并在客户端和服务器之间共享它。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:35:35.770

通常，在客户端反序列化任意异常是一个坏主意。例如，服务器可以抛出一个 SQLException 的子类，该子类恰好特定于正在使用的 jdkc 驱动程序 impl。客户端很可能在其类路径中*没有*jdbc 驱动程序，因此任何反序列化异常的尝试都会导致某种疯狂的类加载异常。最好的办法是将异常转换为像“ServerException”这样的通用类，并将相关细节作为该类的字符串成员（例如原始异常名称、消息、堆栈跟踪等）。

# c# - 以编程方式检查字段是否隐藏/可见 Infopath C#

> ID：11725076
> 
> 赞同：1
> 
> 时间：2012-07-30T15:56:32.533
> 
> 标签：c#, infopath, infopath2010

我想知道是否有办法使用 InfoPath 2010 中的 C# 代码文件检查字段的可见性？我只需要评估未隐藏且找不到代码端方法来帮助我的字段。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:18:12.800

有，但不是你描述的方式。看看在 InfoPath 中隐藏您的字段的操作（条件格式） - 例如：MyValue 字段在其值超过 9000 时被隐藏；因此，在您的代码中，您只需检查该值是否超过 9000（隐藏）或不（显示）。

解决此问题的更好方法是为每个字段创建触发器。MyValue 字段仅存储值，不会触发任何条件格式，从而提高了代码和 InfoPath 表单的隔离度。触发字段（即 MyValueTrigger）具有实际的公式作为它的默认值（即 MyValue > 9000），一旦公式计算它返回 0 或 1（如果你愿意，可以是 TRUE 或 FALSE），然后你可以进行检查触发字段。

# web-services - Restful API - 处理大量数据

> ID：11725078
> 
> 赞同：34
> 
> 时间：2012-07-30T15:56:43.200
> 
> 标签：web-services, api, rest

我已经编写了自己的 Restful API，并且想知道处理从 API 返回的大量记录的最佳方法。

例如，如果我使用此`GET`方法`myapi.co.uk/messages/`将带回所有消息记录的 XML，在某些情况下可能是 1000 条。这使得使用 API 非常缓慢。

任何人都可以建议处理这个问题的最佳方法吗？批量返回结果并在请求中指定批量大小是否标准？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-30T16:07:29.100

您可以更改 API 以包含其他参数，以限制应用程序返回的数据范围。

例如，您可以添加`limit`和`offset`参数来获取一小部分。这就是根据 REST 进行分页的方式。像这样的请求将导致从消息集合中获取 10 个资源，从 21 日到 30 日。通过这种方式，您可以请求庞大数据集的特定部分：

```
myapi.co.uk/messages?limit=10&offset=20 
```

另一种减少有效负载的方法是只请求资源表示的某些部分。以下是 Facebook 的做法：

```
/joe.smith/friends?fields=id,name,picture 
```

请记住，在使用这两种方法中的任何一种时，您都必须为客户端提供一种发现每种资源的方法。您不能假设他们只会查看参数并开始更改它们以搜索数据。这将违反 REST 范式。为他们提供必要的超链接以避免它。

我强烈建议您观看[apigee](http://apigee.com/)[关于 RESTful API 设计](http://blog.apigee.com/detail/restful_api_design/)的演示文稿（截屏视频称为“Teach a Dog to REST”）。那里讨论了解决日常问题的良好做法和巧妙的想法。

编辑：自从我发布此答案以来，该视频已多次更新，您可以查看[2013 年 1 月的第 3 版](https://blog.apigee.com/detail/api_design_third_edition_video_slides)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-11-01T13:58:35.060

通常有不同的方法可以提高 API 性能，包括大型 API。这些主题中的每一个都可以深入探讨。

*   减小分页大小
*   使用超媒体组织
*   模式过滤正是用户所需要的
*   使用首选标头定义特定响应
*   使用缓存做出响应
*   通过压缩提高效率
*   用分块响应分解事情
*   切换到提供更多流式响应
*   与 HTTP/2 一起前进

资料来源：[https ://apievangelist.com/2018/04/20/delivering-large-api-responses-as-efficiently-as-possible/](https://apievangelist.com/2018/04/20/delivering-large-api-responses-as-efficiently-as-possible/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-30T20:21:11.530

如果您使用的是.net core，您必须尝试这个神奇的包

```
Microsoft.AspNetCore.ResponseCompression 
```

`configureservices`然后在启动文件中使用这一行

> services.AddResponseCompression();

然后在`configure`功能

> app.UseResponseCompression();

# javascript - 是否可以检测链接是否已被 JavaScript 禁用？

> ID：11725081
> 
> 赞同：0
> 
> 时间：2012-07-30T15:56:48.070
> 
> 标签：javascript, jquery, jquery-selectors

我熟悉将 .preventDefault() （并返回 false）添加到链接以阻止链接通过，但有谁知道检查链接是否已设置为 preventDefault （和/或返回 false）的方法?

mockJS 中的示例：

```
$('a').not().preventDefault().click(function() {
  //report that the link has been clicked
} 
```

注意：我不知道是否/可以添加什么脚本来阻止链接遵循其默认行为。

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:00:37.100

一种选择是将另一个类应用于您拥有的每种类型的“链接”（轮播、选项卡、href 等），然后将跟踪的点击处理程序更改为`$('linkClass').click(function() {.....});`

编辑：我的意思不是说你应该只使用一个额外的类，但也许在这里使用类作为你的链接的标志作为跟踪它们的一种方式对你来说是最好的。如果没有看到你的整个代码，我真的无法根据你的需要定制它，所以我为你保留了它的通用性。

编辑2：我只是想更好地澄清这个想法。

你要做的是为你的链接设置一个选择器（这个选择器可能需要观察几个不同的 ID、类等才能做到这一点）。向该选择器添加一个单击事件处理程序，然后每次单击其中一个链接时，您将以类的形式添加跟踪标志，以方便您的跟踪代码。

例子：

```
var $links = $(...[selector stuff]...);
$links.click(function() {
    var $this = $(this);
    $this.addClass("clicked");
    ...do clicked stuff...
    $this.addClass("isActive");
    ...do active stuff...
    $this.removeClass("isActive").addClass("visited");
    ...do visited stuff...
}); 
```

通过使用此技术，您还可以稍后检查并查看哪些链接已被单击，以防您的部分或全部跟踪方法在单击事件处理程序之外运行。

这种技术的另一个优点是在添加和删除类方面的开销很小。许多人对开销如此之小感到惊讶，因为当他们想到类时，他们会本能地想到样式。但是，类是元素最有用的属性之一，只要您不添加或删除样式，您的开销就会非常小（使用类作为标志也是 .NET 开发的一种非常常见的做法）。

# unix - 如何将文件 scp 到 Unix 主机，以便文件轮询服务在复制完成之前看不到它？

> ID：11725084
> 
> 赞同：2
> 
> 时间：2012-07-30T15:56:57.663
> 
> 标签：unix, scp

我正在尝试使用 scp 将文件传输到远程 Unix 服务器。在该服务器上，有一个服务轮询目标目录以检测传入文件以进行处理。我想确保轮询服务在复制完成之前不会提取新文件。有没有办法做到这一点？

我的文件传输过程是一个嵌入在较大 Java 程序中的简单 scp 命令。理想情况下，*不*涉及更改 Jana 的解决方案将是最好的（出于涉及更改控制流程的原因）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:59:48.850

*   您可以将文件 scp 到不同的 (/tmp) 目录，并在传输完成后通过 ssh 移动文件。不同的目录需要与最终目标目录位于同一分区，否则将进行复制操作，您将面临类似的问题。目标机器上的另一个服务可以执行此移动操作。

*   您可以将文件复制为隐藏（文件名前缀为`.`）并复制，然后移动

*   如果您可以修改轮询服务，则可以检查活动的 scp 进程并忽略匹配 scp 参数的文件。

*   `lsof +d $directory`您可以在轮询服务器中检查打开的文件并忽略它们

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T03:19:36.230

[`rsync`](http://www.freebsd.org/cgi/man.cgi?query=rsync&manpath=FreeBSD+9.0-RELEASE+and+Ports)我建议使用而不是复制文件`scp`。 `rsync`已经将新文件复制到临时文件名，并且还具有许多其他有用的文件同步功能。

```
$ rsync -a source/path/ remotehost:/target/path/ 
```

当然，如果您愿意，也可以逐个文件复制。

如果`rsync`的临时文件名足以避免被轮询服务获取，那么您只需将`scp`命令替换为充当 包装器的 shell 脚本`rsync`，从而无需更改 Java 程序。

您需要知道 Java 程序用于调用`scp`命令的精确格式，以确保您提供的选项`rsync`符合您的预期。

您还需要弄清楚您的 Java 程序如何调用`scp`. 如果它通过完整路径名 (ie `/usr/bin/scp`) 这样做，那么此解决方案可能会使您的系统上依赖 scp 的其他事情处于危险之中（例如，您希望 scp 像通常那样而不是作为包装器来运行）。更改软件包安装的二进制文件`/usr/bin/scp`也可能会“破坏”您的软件包注册，从而难以安装未来的安全更新，因为二进制文件已更改为 shell 脚本。当然，您所做的任何更改都可能存在安全隐患。

总而言之，我怀疑您最好更改您的 Java 程序以使其精确地执行您想要的操作，即使那是启动一个 shell 脚本来处理您希望将来能够更改的自动化方面，而无需修改你的 Java。

祝你好运！

# php - 使用 php 提交表单并使用 ajax 向用户提供响应

> ID：11725086
> 
> 赞同：-4
> 
> 时间：2012-07-30T15:57:02.920
> 
> 标签：php, javascript, jquery, ajax

我正在创建一个网站，我想知道如何允许 ajax 提交表单数据而不是 html 操作。我编写了一个 php 脚本，它可能会回显几个结果之一，并基于该回显，让 ajax 提醒 php 脚本执行了哪些操作。

例如，如果 php echo == 1，则 alert("Your account has been created"); 如果 echo 为 == 2，则 alert("一个帐户已注册到该电子邮件地址"); 等等等等

我通过查看示例获得了一些有限的 ajax 经验，并创建了一个可能不正确的非常基本的函数。只是想知道 ajax 专家是否可以为我填写详细信息，以便我可以使用此功能。它是这样的：

```
$("#createaccount").submit(function(){
    $.ajax({
    type: POST,
    url: "createaccount2.php",
    data: 
    success: function(server_response){
        if(server_response == 0){
            alert();
        }
        else if(server_response == 1){
            alert();
        }
        else if(server_response == 2){
            alert();
        }
        else if(server_response == 3){
            alert();
        }

    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:12:15.730

我不确定您到底需要什么，但我看到“数据：”是空的，您可以使用[序列化](http://api.jquery.com/serialize/)将表单中的所有输入数据发布到您的 php，如下所示：

这是一个测试表格：

```
<form id="createaccount">
<input type="text" name="a" id="a">
<input type="submit" value="Submit">
</form> 
```

这是您的 javascript 部分：

```
$("#createaccount").submit(function(){
    $.ajax({
    type: POST,
    url: "createaccount2.php",
    data: $("#createaccount").serialize(),
    success: function(server_response){
        if(server_response == 0){
            alert('HELLO');
        }
        else if(server_response == 1){
            alert('WORLD');
        }
        else if(server_response == 2){
            alert('AAAA');
        }
        else if(server_response == 3){
            alert('zzZzZzZ');
        }

    });
}); 
```

然后在您的 php 中，您可以通过 $_POST 变量访问数据：

```
<?php

$a=$_POST['a'];
if($a=='hello'){
    echo "0";
}elseif($a=='world'){
    echo "1";
}else{
    echo "2";
}

?> 
```

如果输入“hello”并提交给php，它会回显“0”并显示“HELLO”
（ps：未测试！）

# java - Android, Mediaplayer mp3, 令人不安的声音

> ID：11725087
> 
> 赞同：0
> 
> 时间：2012-07-30T15:57:13.077
> 
> 标签：java, android, audio, mp3, media-player

我正在播放来自本地源的 mp3 文件`MediaPlayer`。歌曲播放完毕，但也能听到奇怪的“刮擦”声。每首歌都在发生这种情况。同样在片刻之后（取决于歌曲）播放器停止播放，这需要 5 秒到 2 分钟。

`Error: /MediaPlayer(957): Error (1,-2147483648)`

我在谷歌搜索了很多..没有解决方案。任何的想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:44:41.513

如果歌曲在任何其他媒体播放器中没有出现故障，则考虑使用 mpg123 重新编码。它可能来自编码问题，而不是您的 android 编程。

# c# - 使用 TeamCity 选择预处理器定义的最佳方法？

> ID：11725089
> 
> 赞同：1
> 
> 时间：2012-07-30T15:57:17.340
> 
> 标签：c#, deployment, teamcity

我希望能够选择与我的 TeamCity 构建一起使用的“条件编译符号”。我们有一些可以启用客户特定的功能。大多数人是否只配置了单独的构建——每种可能的组合一个？还是在 TeamCity 中有什么方法可以设置这些小动物的小复选框列表？我看到如何使用他们的参数对话框来做到这一点，但这似乎容易出错，并且不适合任意数量的这些条件项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:17:15.523

如果您只想偶尔运行具有不同设置的构建，并且只想为单个参数设置一些预定义值，那么您可以定义使用[类型化参数](http://confluence.jetbrains.net/display/TCD7/Typed+Parameters)的集合。

除了在项目级别或在构建配置模板中定义参数之外，没有办法（目前）在不同的 TeamCity 构建配置之间轻松共享该定义。

# .net - Selenium Web 驱动程序在第一次测试运行后失败并且发生 TestFixtureTearDown

> ID：11725096
> 
> 赞同：5
> 
> 时间：2012-07-30T15:58:00.667
> 
> 标签：.net, selenium, nunit, selenium-webdriver

我有多个功能测试编写为 NUnit 测试，它们彼此独立，并且在我一次运行它们时工作正常。但是，如果我选择所有测试并立即运行它们，我的网络驱动程序变量在执行第一个测试后就会崩溃。如果我采用 TestFixtureTearDown 方法，所有测试都会运行，但我最终会得到很多打开的浏览器。我已经尝试在 TearDown 中使用 Quit() 和 Close() 方法。如何编写一个 TearDown 方法，在每次测试运行后关闭浏览器但不会使整个测试崩溃？我迫切需要你的帮助，所以请提出任何可能有用的建议，我愿意尝试。这是我在测试运行后得到的错误。

```
AFT.AministratorPageTest("firefox").SuperAdminAssignsPermissionsOfAdmin-catalyst:
  OpenQA.Selenium.WebDriverException : Unexpected error. System.Net.WebException: Unable to connect to the remote server ---> System.Net.Sockets.SocketException: No connection could be made because the target machine actively refused it 127.0.0.1:7055
at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, Exception& exception)
--- End of inner exception stack trace ---
at System.Net.HttpWebRequest.GetRequestStream(TransportContext& context)
at System.Net.HttpWebRequest.GetRequestStream()
at OpenQA.Selenium.Remote.HttpCommandExecutor.Execute(Command commandToExecute)
at OpenQA.Selenium.Firefox.Internal.ExtensionConnection.Execute(Command commandToExecute)
at OpenQA.Selenium.Remote.RemoteWebDriver.Execute(String driverCommandToExecute, Dictionary`2 parameters)
TearDown : System.InvalidOperationException : No process is associated with this object. 
```

这是我的抽象类，我的所有其他测试都继承自

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using NUnit.Framework;

using OpenQA.Selenium;
using OpenQA.Selenium.Firefox;
using OpenQA.Selenium.IE;
using OpenQA.Selenium.Support;

namespace BusinessLayer
{
    [TestFixture("ie")]
    [TestFixture("firefox")]
     public abstract class BaseTest 
    {
        public IWebDriver browser { get; set; }
        public String driverName;

        /// <summary>
        /// Required No Argument Constructor
        /// </summary>
        public BaseTest()
        { }

        /// <summary>
        /// Constructor to allow for TestFixture parameterization
        /// </summary>
        /// <param name="name"></param>
        public BaseTest(string name)
        { 
            this.driverName = name; 
        }

        /// <summary>
        /// Loads Browser into the TestFixture
        /// </summary>
        [TestFixtureSetUp]
        public void CreateDriver()
        {
            if (driverName != null)
            {
                this.browser = (IWebDriver)Browser.GetBrowser(driverName);
            }
            else
            {
                throw new Exception("DriverName cannot be null");
            }
        }

        /// <summary>
        /// Insures browser is destroyed at conclusion of test
        /// </summary>
        [TestFixtureTearDown]
        public void FlushBrowser()
        {
            browser.Quit();
            browser = null;
        }
    }
} 
```

这是我的测试之一

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using OpenQA.Selenium;
using NUnit.Framework;
using BusinessLayer;
using BusinessLayer.Pages;
using System.Threading;

namespace Pegged_AFT
{
    class ScreeningProcessTests : BaseTest
    {
        public ScreeningProcessTests()
            : base()
        { }

        public ScreeningProcessTests(string name)
            : base(name)
        { }

       [Test]
        public void TestHappyPathToRegistration()
        {
            User user = new User().GetCandidate();

            Components components = new Components(
                    browser: Browser.GetBrowser(driverName),
                    client: new Client("test"),
                    user: user,
                    credentials: new Credentials(user.emailAddress, user.password)
                    );

            AddUserPage addUser = new AddUserPage(components);
            addUser.AddUser(user);

            Screening screening = new Screening(components);
            screening.Registration();

            screening.InitPage(new TestPage(components));
            Assert.AreEqual(screening.testPage.TryToFindElement(By.Id("ctl00_ContentPlaceHolder1_lblSectionName")).Text, "Candidate Registration");

        }
} 
```

如果有人想知道哪些组件只是我创建的一个类，用于处理我的 Web 应用程序运行所需的所有用户和 Web 驱动程序变量。每次创建页面对象时都会实例化它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T18:24:34.153

我终于弄清楚了我的问题。我设置浏览器驱动程序的方法“Browser.GetBrowser(driverName)”（我没有使用过）没有创建浏览器的新实例。相反，它重用了最初创建的浏览器。因此，使用浏览器后的崩溃并在第一次测试中被撕毁。让 Browser.GetBrowser(driverName) 方法在 NUnit 测试的 SetUp 方法中创建 IWebDriver 的新实例将解决问题。

# javascript - 在javascript中的现有变量名中添加变量

> ID：11725099
> 
> 赞同：-2
> 
> 时间：2012-07-30T15:58:07.630
> 
> 标签：javascript

一开始我声明一个像这样的变量：

```
var content = "likes";

var main_likes_data = true; 
```

后来我想将变量更改为false，但我需要添加一个新变量，如下所示：

```
main_" + content + "_data = false; 
```

但这不起作用！

有人可以告诉我更改变量的正确语法吗？

谢谢你！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T16:01:43.793

你需要一个关联数组。

```
var content = "likes";
var main_data = {
   likes: true,
   somethingelse: false,
   xyz: false
};

main_data[content] = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:03:00.113

这是非常糟糕的编程习惯，但您可以使用 eval：

```
eval("main_" + content + "_data = false"); 
```

我个人不会使用`eval`自己，但其他人会。引用 John Resig 的话：

> “绝大多数 [eval] 被大多数 JavaScript 程序员轻描淡写、误用和彻底谴责，但通过查看一些最好的编码人员的工作，你可以看到，如果使用得当，[它] 可以创建一些很棒的代码片段否则这是不可能的”</p>

John Resig，在[JavaScript Ninja 的秘密中](http://docs.google.com/viewer?a=v&q=cache:OZgEGrXotyQJ:www.manning-source.com/books/resig/resig_meapch1.pdf%20resig%20overwhelmingly%20trivialized%20eval&hl=en&gl=us&pid=bl&srcid=ADGEEShR4HHvCRg6bsSdgOYZHLrBPKAEsecgd1dEzJQwvl6KRUnbTjEGLBB4Ym3g7cjI4Zz2xnFfNrYE3cM2imPHJjIvURxl97okzb3pnPhgeaA5FM2_dZxk3WItS70RSCjI59pAeUus&sig=AHIEtbSLhP0EQn81ozLtugYYr6OaNlKWlQ)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:01:31.747

```
window["main_" + content + "_data"] = true; 
```

这作为

a) 默认情况下，在没有定义范围的情况下创建的变量的范围是`window`对象
b) 您可以在 javascript 中使用方括号表示法与点表示法互换。方括号表示法接受一个字符串。可以使用变量连接字符串。

现场示例：http: [//jsfiddle.net/bX5Zy/](http://jsfiddle.net/bX5Zy/)

# django - Django：如何在模板中获取下拉菜单的选定文本？

> ID：11725104
> 
> 赞同：2
> 
> 时间：2012-07-30T15:58:22.780
> 
> 标签：django

在模板中，我正确显示了整个 DropDown，如下所示：

```
{{form.deal_type}} 
```

但是，如果我只想显示所选下拉列表的文本怎么办？

这显示我只是一个外键。

```
{{form.deal_type.value}} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T16:10:35.120

我不知道你为什么要这样做，但试试这个。

### 循环：

```
{% for value, text in form.deal_type.field.choices %}
    {{ value }}: {{ text }}
    {% if value == form.deal_type.value %}
        <strong>{{ text }}</strong> <!-- THIS IS THE SELECTED ONE... -->
    {% endif %}
{% endfor %} 
```

### 编辑：

我的意思是上面的代码作为说明，而不是你应该逐字使用它。这段代码将更像你想要的。

```
{{ form.deal_type.label_tag }}
{% for value, text in form.deal_type.field.choices %}
    {% if value == form.deal_type.value %}
        {{ text }}
        <input type="hidden" name="deal_type" value="{{ value }}" />
    {% endif %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:32:37.450

我有一个类似的问题。为了解决它，我只是直接从视图将值传递给模板。因此，在您看来，您可能有一些阻碍

```
data = {'form' :form,}    
return render_to_response('destination.html', data, context_instance = RequestContext) 
```

在数据中，您正在传递包含 deal_type 的表单。将变量 deal_type 设置为等于 Object.deal_type.display_value 的数据添加到

```
data = {'form' :form,} 
if Object.deal_type: data['deal_type'] = Object.deal_type.display_value   
return render_to_response('destination.html', data, context_instance = RequestContext) 
```

然后在您的模板上，您可以使用

```
{% if condition_to_show_just_text %}
    {{deal_type}} {{form.deal_type.as_hidden}}
{% else %}
    {{form.deal_type}}
{% endif %} 
```

在这种情况下它可能是微不足道的，但在我看来，如果列表很长，在模板上使用 for 循环进行迭代会比直接从对象中提取效率低

# asynchronous - 使用 Sinatra 和 EventMachine 对同一长时间运行的操作进行多个 http 请求

> ID：11725105
> 
> 赞同：2
> 
> 时间：2012-07-30T15:58:25.313
> 
> 标签：asynchronous, concurrency, sinatra, httprequest, eventmachine

我正在尝试了解如何将事件 Web 服务器与异步 sinatra 和 EventMachine 结合使用。

在下面的代码中，“/”上的每个请求都会向 google 生成一个新的异步 http 请求。是否有一个优雅的解决方案来检测请求已经在进行中并等待其执行？

如果我在“/”上有 100 个并发请求，这将向 google 后端生成 100 个请求。最好有一种方法来检测已经存在正在进行的后端请求并等待其执行。

感谢你的回答。

```
require 'sinatra'
require 'json'
require 'eventmachine'
require 'em-http-request'
require 'sinatra/async'

Sinatra.register Sinatra::Async

def get_data
  puts "Start request"
  http = EventMachine::HttpRequest.new("http://www.google.com").get
  http.callback { 
    puts "Request completed"
    yield http.response
  }
end

aget '/' do
  get_data {|data| body data}
end 
```

**更新**

我实际上发现您可以向同一个 http 请求添加多个回调。所以，很容易实现：

```
class Request
  def get_data
    if !@http || @http.response_header.status != 0
      #puts "Creating new request"
      @http = EventMachine::HttpRequest.new("http://www.bbc.com").get
    end
    #puts "Adding callback"
    @http.callback do 
      #puts "Request completed"
      yield @http.response
    end
  end
end

$req = Request.new

aget '/' do
  $req.get_data {|data| body data}
end 
```

这会产生非常高的每秒请求数。凉爽的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T01:51:10.737

您根本不必使用 sinatra/async 来使其事件化，只需使用事件化服务器（Thin、Rainbows！、Goliath）运行它。

看看[em-synchrony](https://github.com/igrigorik/em-synchrony)的例子，在不引入意大利面条回调代码的情况下发出多个并行请求：

```
require "em-synchrony"
require "em-synchrony/em-http"

EventMachine.synchrony do
  multi = EventMachine::Synchrony::Multi.new
  multi.add :a, EventMachine::HttpRequest.new("http://www.postrank.com").aget
  multi.add :b, EventMachine::HttpRequest.new("http://www.postrank.com").apost
  res = multi.perform

  p "Look ma, no callbacks, and parallel HTTP requests!"
  p res

  EventMachine.stop
end 
```

是的，您可以在您的 Sinatra 操作中运行它。

还可以看看[Faraday](https://github.com/technoweenie/faraday/)，特别是 EM 适配器。

# javascript - 在javascript函数中间暂停

> ID：11725108
> 
> 赞同：0
> 
> 时间：2012-07-30T15:58:41.813
> 
> 标签：javascript, jquery, post

我试图在函数中间暂停给定的时间（5 秒）

这是我尝试过的，但它不起作用

```
(function MessagesAjax() {
    $.post('/api/messages/get', function(data) {
        for (var i = 0; i < data.length; i++) {
            $.jGrowl(data[i].Body.toString().substring(0, 150), { header: 'New Message', sticky: true, });
            markDisplayed(data[i].Id);
        }
        setTimeout(MessagesAjax, 5000);
    });
})();

function markDisplayed(id) {
    setTimeout(5000);             //want it to pause here
    $.post("/api/messages/markdisplayed" + id);
    console.log("Marking displayed");
} 
```

我只需要它暂停，因此在将帖子发送回服务器之前会有延迟

我几乎可以肯定 setTimeout 不是我想要的，但我不确定还能使用什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T16:01:39.863

将标记显示更改为：

```
function markDisplayed(id) {
    setTimeout(function() {
        $.post("/api/messages/markdisplayed" + id);
        console.log("Marking displayed");
    }, 5000);
}​ 
```

这将导致函数在执行其中的内容之前等待五秒钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:02:54.823

更换

```
function markDisplayed(id) {
    setTimeout(5000);             //want it to pause here
    $.post("/api/messages/markdisplayed" + id);
    console.log("Marking displayed");
} 
```

和

```
function markDisplayed(id) {
    setTimeout(function(){
      $.post("/api/messages/markdisplayed" + id);
      console.log("Marking displayed");
      },5000);             //want it to pause here
} 
```

可能对你有用。

# python - 生成 RSS 提要...django/python

> ID：11725114
> 
> 赞同：-2
> 
> 时间：2012-07-30T15:59:08.317
> 
> 标签：python, django, rss

我没有使用常规模型，所以不能使用 Django 的联合框架。因此，我确实使用了名为 feedgenerator 的低级联合实用程序来生成 RSS 提要，如下所示。

```
feed = feedgenerator.Rss201rev2Feed(title=_("Feed by %s") % user.username,
        link="http://%s" % DOMAIN_NAME,
        description=_("RSS Feed provided by something.com"),
        language=user.language, 
        author_name=user.full_name, 
        feed_url="something")

    for note in ObjectModel.published_objects.filter(user=user):
        feed.add_item(title=note.title,
            link="",
            pubDate=note.created,
            description=note.note)
    response = HttpResponse(feed.writeString('UTF-8'), mimetype='application/rss+xml')
    return response 
```

但是，我找不到如何将其作为响应类型返回的好例子。

```
response = HttpResponse(feed.writeString('UTF-8'), mimetype='application/rss+xml') 
```

显然，上面的代码似乎不正确，因为浏览器无法识别为 RSS 提要。有人可以告诉我应该怎么做才能解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:08:48.637

这工作正常。可以被浏览器识别。

# python - Python中来自Chi sq检验统计的P值

> ID：11725115
> 
> 赞同：47
> 
> 时间：2012-07-30T15:59:09.767
> 
> 标签：python, statistics, scipy, chi-squared

我已经计算了一个测试统计量，该统计量分布为一个自由度为 1 的卡方，并且想找出使用​​ python 对应的 P 值。

我是 python 和数学/统计新手，所以我想我想要的是 SciPy 中 chi2 分布的概率密度函数。但是，当我这样使用它时：

```
from scipy import stats
stats.chi2.pdf(3.84 , 1)
0.029846 
```

然而，一些谷歌搜索和一些懂数学但不懂python的同事说它应该是0.05。

有任何想法吗？干杯，戴维

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-30T19:14:30.527

在这里快速复习：

概率密度函数：将其视为一个点值；给定点的概率有多密集？

累积分布函数：这是函数到给定点的概率质量；分布的百分比在这一点的一侧？

在您的情况下，您选择了 PDF，并得到了正确答案。如果您尝试 1 - CDF：

```
>>> 1 - stats.chi2.cdf(3.84, 1)
0.050043521248705147 
```

[PDF](http://en.wikipedia.org/wiki/Probability_density_function) [CDF](http://en.wikipedia.org/wiki/Cumulative_distribution_function)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-11-23T17:25:02.260

要计算给定卡方和的零假设概率和自由度，您还可以调用`chisqprob`：

```
>>> from scipy.stats import chisqprob
>>> chisqprob(3.84, 1)
0.050043521248705189 
```

* * *

**注意：**

> [chisqprob](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.chisqprob.html)已弃用！stats.chisqprob 在 scipy 0.17.0 中已弃用；改用[stats.distributions.chi2.sf](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.chi2.html) _

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-05-22T16:15:33.940

更新：如前所述， scipy 0.17.0 及更高版本不推荐使用 chisqprob() 。现在可以通过 scipy.stats.distributions.chi2.sf() 获得高精度卡方值，例如：

```
>>>from scipy.stats.distributions import chi2
>>>chi2.sf(3.84,1)
0.050043521248705189
>>>chi2.sf(1424,1)
1.2799986253099803e-311 
```

* * *

虽然 stats.chisqprob() 和 1-stats.chi2.cdf() 对于小的卡方值看起来相当，但对于大的卡方值，前者更可取。后者无法提供小于机器 epsilon 的 p 值，并且会给出接近机器 epsilon 的非常不准确的答案。如其他人所示，使用两种方法可得出较小卡方值的可比较值：

```
>>>from scipy.stats import chisqprob, chi2
>>>chisqprob(3.84,1)
0.050043521248705189
>>>1 - chi2.cdf(3.84,1)
0.050043521248705147 
```

使用 1-chi2.cdf() 在这里分解：

```
>>>1 - chi2.cdf(67,1)
2.2204460492503131e-16
>>>1 - chi2.cdf(68,1)
1.1102230246251565e-16
>>>1 - chi2.cdf(69,1)
1.1102230246251565e-16
>>>1 - chi2.cdf(70,1)
0.0 
```

而 chisqprob() 为您提供更大范围的卡方值的准确结果，产生的 p 值几乎与大于零的最小浮点数一样小，直到它太下溢：

```
>>>chisqprob(67,1)
2.7150713219425247e-16
>>>chisqprob(68,1)
1.6349553217245471e-16
>>>chisqprob(69,1)
9.8463440314253303e-17    
>>>chisqprob(70,1)
5.9304458500824782e-17
>>>chisqprob(500,1)
9.505397766554137e-111
>>>chisqprob(1000,1)
1.7958327848007363e-219
>>>chisqprob(1424,1)
1.2799986253099803e-311
>>>chisqprob(1425,1)
0.0 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-30T19:19:13.027

你的意思是：

```
>>> 1 - stats.chi2.cdf(3.84, 1)
0.050043521248705147 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-01-23T16:03:20.027

其他一些解决方案已被弃用。使用`scipy.stats.chi2`生存功能。这与`1 - cdf(chi_statistic, df)`

例子：

```
from scipy.stats import chi2
p_value = chi2.sf(chi_statistic, df) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-10-11T20:01:01.730

如果您想了解数学，样本的 p 值 x（固定）为

P[P(X) <= P(x)] = P[m(X) >= m(x)] = 1 - G(m(x)^2)

在哪里，

*   P 是具有已知协方差 (cov) 和均值的（例如 k 变量）正态分布的概率，
*   X 是来自该正态分布的随机变量，
*   m(x) 是马氏距离 = sqrt( < cov^{-1} (x-mean), x-mean >。请注意，在 1-d 中，这只是 z-score 的绝对值。
*   G 是 w/k 自由度的 chi^2 分布的 CDF。

因此，如果您要计算固定观测值 x 的 p 值，则计算 m(x)（广义 z 分数）和 1-G(m(x)^2)。

例如，众所周知，如果 x 是从单变量 (k = 1) 正态分布中采样的，并且 z 分数 = 2（与平均值相差 2 个标准差），那么 p 值约为 0.046（参见 a z 分数表）

```
In [7]: from scipy.stats import chi2

In [8]: k = 1

In [9]: z = 2

In [10]: 1-chi2.cdf(z**2, k)
Out[10]: 0.045500263896358528 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-08-19T06:24:06.497

对于超高精度，当 scipy's`chi2.sf()`不够时，请拿出大枪：

```
>>> import numpy as np
>>> from rpy2.robjects import r
>>> np.exp(np.longdouble(r.pchisq(19000, 2, lower_tail=False, log_p=True)[0]))
1.5937563168532229629e-4126 
```

*由另一个用户（WestCoastProjects）更新* 当使用来自 OP 的值时，我们得到：

```
np.exp(np.longdouble(r.pchisq(3.84,1, lower_tail=False, log_p=True)[0]))
Out[5]: 0.050043521248705198928 
```

所以这就是你要找的*0.05 。*

# ios - 使用精灵来提高非游戏应用程序中静态视网膜图形的可管理性是否明智？

> ID：11725116
> 
> 赞同：0
> 
> 时间：2012-07-30T15:59:10.833
> 
> 标签：ios, user-interface, graphics, workflow, sprite

随着我的应用程序的 UI 变得越来越复杂，我发现为按钮之类的东西导出所有图形很乏味。例如使用切换按钮：向上、向下、禁用、打开、关闭 * 5 个按钮 * 2 用于视网膜 = 50 个需要导出的图形！像在 CSS 中那样做一个精灵表是一种可行的策略吗？如果是这样，您能否向我指出关于如何处理加载和显示适当小节的一两个片段的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:25:11.377

您可以使用精灵表，这里有一种方法： [http ://www.danielsefton.com/2012/07/texture-atlases-for-uikit-with-texturepacker/](http://www.danielsefton.com/2012/07/texture-atlases-for-uikit-with-texturepacker/)

作为精灵表的替代品，PaintCode 是 Mac App Store 中的绝佳选择。它使更新图形变得非常容易，只需复制和粘贴代码。不幸的是，它的价格相对较高。

如果您需要创建 Paint Code 无法处理的图像，请考虑使用 Mac 应用程序自动复制和调整图稿的大小，这样您只需创建一次。Mac App Store 上有几个。有些是免费的，有些是付费的。但是，如果您想要高质量的调整大小，最好使用您制作艺术作品的工具进行缩小尺寸（例如 PhotoShop）。

# pdf - 用于索引 PDF 文件的语义标记

> ID：11725118
> 
> 赞同：5
> 
> 时间：2012-07-30T15:59:18.330
> 
> 标签：pdf, indexing, semantic-web, schema.org

索引 PDF 文件的正确方法是什么？我想在其中添加语义信息，并帮助搜索引擎更准确、更精确地呈现文件（特定图像、PDF 文件中的文本）。我正在考虑使用引擎已经理解的本体，例如[Schema.org](http://schema.org/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T00:02:20.617

如何使用 schema.org 从这样的网页链接到 PDF 文件：

```
<div itemscope itemtype="http://schema.org/Article">
  <img itemprop="thumbnailUrl" src="http://www.example.com/how_to_build_a_web_app.jpg"/>
  <a itemprop="url" href="http://www.example.com/how_to_build_a_web_app.pdf">
    <span itemprop="name">How to Build a Web App</span></a>
  by <span itemprop="author">John Smith</span>
  <div itemprop="description">This short e-book explains what a web application 
  is and how to build one.</div>
</div> 
```

这使您可以将标题、图像和文本描述与 PDF 中的文章相关联。

# c++ - luabind 没有对指针 mingw 进行更改

> ID：11725121
> 
> 赞同：0
> 
> 时间：2012-07-30T15:59:27.880
> 
> 标签：c++, mingw, shared-ptr, luabind

我已经修复了我在[这个问题](https://stackoverflow.com/questions/11597522/linking-errors-with-lua-luabind-mingw)中遇到的链接器错误，但现在我遇到了另一个问题。我通过调用`createObject()`lua 来创建我的对象，并为一个新对象创建一个 boost::shared_ptr，将它添加到一个列表中，然后返回它。

在带有 mingw 的 Windows 上，当我在 lua 中进行更改时，这些更改不会应用于 C++ 对象。我的代码不会有问题，因为我在 Linux 上构建了相同的东西并且它运行良好。

```
ObjectPtr createObject(PlayerPtr player){
    ObjectPtr obj(new Object(player));
    window->world.objects.push_back(obj);
    return obj;
}

bool setup(lua_State* luastate, Window* caller){
    open(luastate);

    // initialize some other classes here.

    class_<Player, PlayerPtr> Player("Player");
    Player.def_readwrite("playerColor", &Player::playerColor);
    Player.def_readwrite("displayName", &Player::displayName);

    class_<Object, ObjectPtr> Object("WorldObject");
    Object.def_readwrite("health", &Object::health);
    Object.def_readwrite("maxHealth", &Object::maxHealth);
    Object.def_readwrite("mesh", &Object::mesh);
    Object.def_readwrite("location", &Object::location);
    Object.property("player", &Object::getPlayer, &Object::setPlayer);
    Object.def("setOnDeath", &Object::setOnDeath);

    module(luastate)[
        vec3,
        color,
        Player,
        WorldObject,
        def("isWindowOpen", &isWindowOpen),
        def("loadMesh", &MeshManager::LoadMesh),
        def("createObject", &createObject),
        def("createPlayer", &createPlayer),
        ];

    window = caller;
} 
```

`ObjectPtr`和`PlayerPtr`是 Object 和 Player 的 boost::shared_ptr，`window`是一个静态的 Window 指针，和`createPlayer()`不`createObject()`带任何参数使用`Player`代替`Object`.

在 lua 中：

```
red = createPlayer()
red.playerColor = Color(255,0,0)
red.displayName = "Red"

obj = createObject(red)
obj.location = vec3(10,10,0)

print(obj.player.displayName) 
```

导致“红色”被放入控制台。但在 C++ 中，该值只是“”。

我对其进行了调试，并且确实在 C++ 中创建了对象并将其添加到列表中，但是没有进行任何更改，因为所有变量都处于默认状态。

我认为这是 luabind 和 mingw 的问题，或者只是构建有问题，

我从默认构建设置中改变的唯一事情是我*需要*做两件事才能让它编译：我在 jamfile 中设置 LUA_PATH 指向 lua 所在的目录（而不是从环境变量中获取它）和我变了

```
#elif BOOST_PP_ITERATION_FLAGS() == 1 
```

至

```
#else
#if BOOST_PP_ITERATION_FLAGS() == 1 
```

因为mingw出于某种原因不喜欢`(`...（是的，我确实在正确的位置添加了#endif）

更新：我也尝试过使用 msvc10，但仍然存在同样的问题。我还尝试针对我的 Linux 上相同版本的 boost 构建它。但无济于事。

# cross-platform - 错误：无法加载 PhotonLicensing.dll

> ID：11725130
> 
> 赞同：0
> 
> 时间：2012-07-30T15:59:56.363
> 
> 标签：cross-platform, multiplayer, socketserver

日志文件指出我的 Photon 许可证已过期或无法加载 PhotonLicensing.dll。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:20:41.293

从 Photon 3 开始，如果您免费使用 Photon，则不需要 .license 文件。只需从升级等中删除您仍然可能在文件夹中找到的任何旧 .license 文件：

```
..\deploy\bin_Win32
..\deploy\bin_Win32_xp
..\deploy\bin_Win64
..\deploy\bin_Win64_xp 
```

如果您获得了许可证，只需将 .license 文件复制到上述文件夹中（取决于您使用的环境）。

但是有一种极端情况：当您使用 Windows Explorer 内置解包工具解包 SDK 时，您的文件可能会被阻止，因为它们被标记为“互联网下载”。

解决问题的方法有：

1.  您使用 7zip 或 winrar 等其他工具解压缩。
2.  或者在使用 Explorer 内置的 zip 功能解压缩之前取消阻止 zip 文件 - 右键单击​​“不信任”的 zip 文件选择“属性”并单击取消阻止。

# ios - Google plus sdk 链接器错误 ios

> ID：11725131
> 
> 赞同：0
> 
> 时间：2012-07-30T15:59:58.753
> 
> 标签：ios, xcode, linker-errors, google-plus

我正在使用 google plus share sdk 发布到 google plus。但它给了我以下链接器错误：

```
Undefined symbols for architecture armv7:
  "_kGTMOAuth2WebViewFailed", referenced from:
      -[GTMOAuth2ViewControllerTouch webView:didFailLoadWithError:] in GTMOAuth2ViewControllerTouch.o
  "_kGTMOAuth2WebViewKey", referenced from:
      -[GTMOAuth2ViewControllerTouch notifyWithName:webView:kind:] in GTMOAuth2ViewControllerTouch.o
  "_kGTMHTTPFetcherStatusDomain", referenced from:
      -[GTLService objectFetcher:finishedWithData:error:] in GTLService.o
      -[GTMHTTPFetcher connection:didReceiveData:] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher connectionDidFinishLoading:] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher isRetryError:] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher shouldRetryNowForStatus:error:] in GTMHTTPFetcher.o
      -[GTMOAuth2Authentication beginTokenFetchWithDelegate:didFinishSelector:] in GTMOAuth2Authentication.o
      -[GTMOAuth2SignIn handleCallbackReached] in GTMOAuth2SignIn.o
      ...
  "_kGTMHTTPFetcherErrorChallengeKey", referenced from:
      -[GTMHTTPFetcher connection:didReceiveAuthenticationChallenge:] in GTMHTTPFetcher.o
  "_kGTMOAuth2FetchTypeUserInfo", referenced from:
      -[GTMOAuth2SignIn fetchGoogleUserInfo] in GTMOAuth2SignIn.o
  "_kGTMHTTPFetcherStartedNotification", referenced from:
      -[GTMHTTPFetcher beginFetchMayDelay:mayAuthorize:] in GTMHTTPFetcher.o
  "_kGTMHTTPFetcherRetryDelayStoppedNotification", referenced from:
      -[GTMHTTPFetcher destroyRetryTimer] in GTMHTTPFetcher.o
  "_kGTMHTTPFetcherErrorDomain", referenced from:
      -[GTMHTTPFetcher failToBeginFetchWithError:] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher backgroundFetchExpired] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher connection:didReceiveAuthenticationChallenge:] in GTMHTTPFetcher.o
  "_kGTMOAuth2FetchTypeRefresh", referenced from:
      -[GTMOAuth2Authentication beginTokenFetchWithDelegate:didFinishSelector:] in GTMOAuth2Authentication.o
  "_kGTMOAuth2RefreshTokenChanged", referenced from:
      -[GTMOAuth2Authentication setKeysForResponseDictionary:] in GTMOAuth2Authentication.o
  "_kGTMOAuth2UserSignedIn", referenced from:
      -[GTMOAuth2SignIn handleCallbackReached] in GTMOAuth2SignIn.o
  "_kGTMOAuth2FetchTypeToken", referenced from: 
```

请帮我。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:38:10.053

您需要将`libGooglePlusUniversal.a`开源“Google Toolbox for Mac 文件”链接到您的项目中。

这可以通过`Project > Add to project`将文件直接按下或拖动到您的 XCode 项目中来完成。

# c++ - Objective-C++ C++ 对象析构函数

> ID：11725133
> 
> 赞同：5
> 
> 时间：2012-07-30T16:00:02.683
> 
> 标签：c++, objective-c, objective-c++

我有一个 Objective-C 类，其中一个变量是 C++ 对象（我的大部分代码都是 C++，但我需要一些 ObjC 类来与 iOS 库集成）。Objective-C++ 是否保证在 Objective-C 对象被销毁时，C++ 对象会被正确销毁？

一些示例代码：

```
class MyCppClass {
    // ...
};

@interface MyObjCClass : NSObject {
    MyCppClass myCppObject; // is it ok to do it?
}

// ...

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T16:02:54.103

是的。调用该`-dealloc`方法后，会调用一个隐藏的`.cxx_destruct`方法。此方法调用具有析构函数的所有实例变量的所有析构函数。

# php - 来自几个类的 Symfony2 模板变量

> ID：11725134
> 
> 赞同：0
> 
> 时间：2012-07-30T16:00:02.853
> 
> 标签：php, events, symfony, listener

我需要从两个地方将变量传递给模板：

1.  普通控制器的方法，例如：

    ```
    class ProductsController extends Controller
    {
        /**
         * Products
         * @Route("", name="products")
         * @Template
         */
        public function productsAction()
        {
            return array('var1' => 'sth', 'var2' => 'etc);
        } 
    ```

2.  引导控制器（由**kernel.controller**事件触发的侦听器）

    ```
    class BeforeControllerListener
    {
        public function onKernelController(FilterControllerEvent $event)
        {
            // @some_vars
        } 
    ```

如何`@some_vars`从侦听器注入模板？两种方法中的变量都不是静态的，因此全局变量不是答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:06:46.737

在你`onKernelController()`做的：

```
$event->getRequest()->attributes->add(array('someVar' => 'someValue')); 
```

在你`productsAction()`做的：

```
$request->attributes->get('someVar'); 
```

干杯；）

# django - 在 reverse_set 长度上过滤模型

> ID：11725135
> 
> 赞同：5
> 
> 时间：2012-07-30T16:00:20.110
> 
> 标签：django, django-models, django-orm

考虑这些伪类：

```
class Foo(models.Model):
    pass

class Bar(models.Model):
    foo = models.ForeignKey(Foo) 
```

我想通过 Foo 的管理器有效地过滤，以获得一个 QuerySet，它只保存 Foo 对象，至少有 2 个 Bar 对象指向它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T16:33:36.007

使用[聚合](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)`Count`：_

```
from django.db.models import Count

Foo.objects.annotate(bar_count=Count('bar')).filter(bar_count__gte=2) 
```

# opencv - 运行 make CentOS 时出现 OpenCV 错误

> ID：11725136
> 
> 赞同：4
> 
> 时间：2012-07-30T16:00:26.867
> 
> 标签：opencv, makefile, cmake, centos, centos5

我正在尝试在 CentOS 5.8 上安装 OpenCV 2.4.2，但出现以下错误

```
[ 34%] Built target opencv_test_highgui
[ 34%] Building CXX object modules/features2d/CMakeFiles/opencv_features2d.dir/src/freak.cpp.o
/home/jtrinidad/Downloads/OpenCV-2.4.2/modules/core/include/opencv2/core/core.hpp:1286: warning: ‘class cv::_InputArray’ has virtual functions but non-virtual destructor
/home/jtrinidad/Downloads/OpenCV-2.4.2/modules/core/include/opencv2/core/core.hpp:1365: warning: ‘class cv::_OutputArray’ has virtual functions but non-virtual destructor
/home/jtrinidad/Downloads/OpenCV-2.4.2/modules/features2d/src/freak.cpp: In member function ‘virtual void cv::FREAK::computeImpl(const cv::Mat&, std::vector<cv::KeyPoint, std::allocator<cv::KeyPoint> >&, cv::Mat&) const’:
/home/jtrinidad/Downloads/OpenCV-2.4.2/modules/features2d/src/freak.cpp:367: error: shift must be an immediate
make[2]: *** [modules/features2d/CMakeFiles/opencv_features2d.dir/src/freak.cpp.o] Error 1
make[1]: *** [modules/features2d/CMakeFiles/opencv_features2d.dir/all] Error 2
make: *** [all] Error 2 
```

我在 cmake 上运行了以下命令

```
 cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D BUILD_EXAMPLES=OFF WITH_CUDA=OFF .. 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:19:42.017

问题已解决。

我将以下补丁应用于 ~/Downloads/OpenCV-2.4.2/modules/features2d/src/freak.cpp

```
diff -crB OpenCV-2.4.2.orig/modules/features2d/src/freak.cpp OpenCV-2.4.2/modules/features2d/src/freak.cpp
*** OpenCV-2.4.2.orig/modules/features2d/src/freak.cpp  2012-07-25 09:54:50.000000000 -0400
--- OpenCV-2.4.2/modules/features2d/src/freak.cpp   2012-07-24 10:34:57.000000000 -0400
***************
*** 364,370 ****
        __m128i workReg = _mm_min_epu8(operand1, operand2); // emulated "not less than" for 8-bit UNSIGNED integers
        workReg = _mm_cmpeq_epi8(workReg, operand2);        // emulated "not less than" for 8-bit UNSIGNED integers

!                     workReg = _mm_and_si128(_mm_srli_epi16(binMask, m), workReg); // merge the last 16 bits with the 128bits std::vector until full
        result128 = _mm_or_si128(result128, workReg);
        }
        (*ptr) = result128;
--- 364,404 ----
        __m128i workReg = _mm_min_epu8(operand1, operand2); // emulated "not less than" for 8-bit UNSIGNED integers
        workReg = _mm_cmpeq_epi8(workReg, operand2);        // emulated "not less than" for 8-bit UNSIGNED integers

!                     // merge the last 16 bits with the 128bits std::vector until full
!                     __m128i shiftedMask;
!           switch(m) {
!               case 8:
!               shiftedMask = _mm_srli_epi16(binMask, 8);
!               break;
!               case 7:
!               shiftedMask = _mm_srli_epi16(binMask, 7);
!               break;
!               case 6:
!               shiftedMask = _mm_srli_epi16(binMask, 6);
!               break;
!               case 5:
!               shiftedMask = _mm_srli_epi16(binMask, 5);
!               break;
!               case 4:
!               shiftedMask = _mm_srli_epi16(binMask, 4);
!               break;
!               case 3:
!               shiftedMask = _mm_srli_epi16(binMask, 3);
!               break;
!               case 2:
!               shiftedMask = _mm_srli_epi16(binMask, 2);
!               break;
!               case 1:
!               shiftedMask = _mm_srli_epi16(binMask, 1);
!               break;
!               case 0:
!               shiftedMask = _mm_srli_epi16(binMask, 0);
!               break;
!           default:
!               throw "shifting less than 0";
!                     }
!                     workReg = _mm_and_si128(shiftedMask, workReg); 
! 
        result128 = _mm_or_si128(result128, workReg);
        }
        (*ptr) = result128; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T09:38:47.553

这个完整的补丁文件：[http ://code.opencv.org/projects/opencv/repository/revisions/65f85856306575e4d71164c8212e84d26424cf0f](http://code.opencv.org/projects/opencv/repository/revisions/65f85856306575e4d71164c8212e84d26424cf0f)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T04:58:30.167

在尝试使用补丁后，我求助于手动编译freak.cpp。我的安装说明可以在这里找到：[http ://www.megalinux.net/compiling-opencv-2-4-on-rhelcentos-5/](http://www.megalinux.net/compiling-opencv-2-4-on-rhelcentos-5/)

# uitableview - UITableView reloadRowsAtIndexPaths 隐藏行

> ID：11725137
> 
> 赞同：7
> 
> 时间：2012-07-30T16:00:33.107
> 
> 标签：uitableview, ios5

我将 UITableView 与静态单元格一起使用。如果我使用`reloadData`，则一切正常。

如果我尝试`reloadRowsAtIndexPaths`它会隐藏行。如果我向上拖动 tableView（当单元格更新时），则会出现行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-10T07:37:57.320

如果您的表格单元格是静态的（即，您正在使用相同的单元格对象来替换当前显示的单元格对象），那么您看到的是过渡动画的产物。

这样想吧。假设您设置了 UITableViewAnimationOptionFade。当要替换单元格时，要替换的单元格（在这种情况下是完全相同的对象）添加了淡入动画。然后，被替换的单元格（同样，它都是同一个对象）添加了一个淡出动画。最后，单元格实际上在那里，但它是不可见的，因为淡出动画使该单元格对象不可见。

在非静态表格视图中，替换单元格是与要替换的单元格不同的对象，这不是问题，因为动画被添加到两个不同的对象。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-29T18:34:54.830

我有同样的问题，这似乎是一个错误。我进行了一些实验，当我将动画选项设置为`UITableViewRowAnimationNone`. 当您将该选项设置为 时，还会发生一些其他有趣的事情`UITableViewRowAnimationTop`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-10T23:44:18.180

我通过删除动画解决了这个问题

```
tableView.reloadRows(at: [yourIndexPath], with: UITableView.RowAnimation.none) 
```

希望这对任何搜索此内容的人有所帮助。

# java - 一遍又一遍地运行代码

> ID：11725141
> 
> 赞同：0
> 
> 时间：2012-07-30T16:00:45.127
> 
> 标签：java, android

在我的应用程序中，我在 a 中显示了一个时钟`TextView`，并且我想实时更新它。我试着像这样运行它：

```
public void clock() {
    while(clock_on == true) {
        executeClock();
    }
}

public void executeClock() {
    TextView timeTv = (TextView) findViewById(R.id.time);
    long currentTime=System.currentTimeMillis();
    Calendar cal=Calendar.getInstance();
    cal.setTimeInMillis(currentTime);
    String showTime=String.format("%1$tI:%1$tM %1$Tp",cal);
    timeTv.setText(showTime);
} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T16:03:54.837

请试试：

```
private Handler handler = new Handler();
runnable.run();

private Runnable runnable = new Runnable() 
{

public void run() 
{
     //
     // Do the stuff
     //
     if(clock_on == true) {

             executeClock();

     }

     handler.postDelayed(this, 1000);
}
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T16:05:06.923

使用处理程序：

```
private Handler handler = new Handler() {

    @Override
    public void handleMessage(android.os.Message msg) {
            TextView timeTv = (TextView) findViewById(R.id.time);
            long currentTime=System.currentTimeMillis();
            Calendar cal=Calendar.getInstance();
            cal.setTimeInMillis(currentTime);
            String showTime=String.format("%1$tI:%1$tM %1$Tp",cal);
            timeTv.setText(showTime);

            handler.sendEmptyMessageDelayed(0, 1000);
    }
}; 
```

# php - PHP日期：遇到格式不正确的数值

> ID：11725164
> 
> 赞同：2
> 
> 时间：2012-07-30T16:01:43.433
> 
> 标签：php, sql-server

我正在尝试将 PHP 表单中的日期存储到 MS SQL 数据库中，并且真的很挣扎。日期是字符串格式，并且是 'DD/MM/YYYY' 格式，所以我尝试使用 strtotime() 来转换它，但我只是从中得到 1970-01-01 01:00:00 。

我试过的代码如下：

```
$requested = $_REQUEST["TextboxRequiredBy"];
var_dump($requested);
echo "<br/>";
$daterequested = date("Y-m-d H:i:s", strtotime($requested));
echo $requested . " becomes " . $daterequested . "<br/>";
mssql_bind($stmt, "@Parameter", $daterequested, SQLFLT8, false); 
```

我在屏幕上看到的是：

```
string(10) "31/07/2012" 
31/07/2012 becomes 1970-01-01 01:00:00

Warning: mssql_bind(): Unable to set parameter in xxx.php on line 110 
Warning: mssql_execute(): message: Procedure or function 'SPNAME' expects 
parameter '@Parameter', which was not supplied. (severity 16) in xxx.php 
```

我四处搜索，似乎找不到成功转换字符串的方法。我在另一个运行日期比较的页面上使用了以下内容，但这会返回一个错误，即 date_format() 期望参数 1 为 DateTime，给定布尔值：

```
$datefrom = date_create($requested);
$daterequestedfrom = date_format($datefrom,'Y-m-d H:i:s'); 
```

谁能建议我如何成功地将字符串转换为日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:04:17.993

出于某种原因，PHP 不喜欢 strtotime 中的斜线。将它们转换为点，脚本应该可以工作。

```
$requested = str_replace('/', '.', $_REQUEST["TextboxRequiredBy"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:07:35.303

该日期格式不是默认格式。您可能想查看 date_create_from_format 函数。这将允许您指定您尝试输入的时间字符串的格式。

[链接到 PHP 文档](http://www.php.net/manual/en/datetime.createfromformat.php)

# php - 在mysql选择查询中忽略#,\,/,大写,$

> ID：11725165
> 
> 赞同：2
> 
> 时间：2012-07-30T16:01:56.303
> 
> 标签：php, mysql, select

我在下拉列表中填充所有用户名。我想忽略包含任何这些`#`, `\`, `/`, `uppercase`,的用户名`$`。我正在执行此查询，但它仍然显示带有 的记录`\`，例如 ad\name。

```
select account_name from dba_account where CAST(account_name  AS BINARY) RLIKE '[a-z]' 
and account_name not like '%#%' and account_name not like '%$%' and account_name not like 
'%/%' limit 50; 
```

有什么建议么？？？？

谢谢你...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:04:36.180

```
SELECT
  account_name 
FROM
  dba_account 
WHERE 
  CAST(account_name  AS BINARY) RLIKE '[a-z]' 
  AND account_name NOT RLIKE '[#$\\\\/]'
LIMIT 50; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:03:43.837

您的查询

```
select account_name from dba_account where CAST(account_name  AS BINARY) RLIKE '[a-z]' and account_name not like '%#%' and account_name not like '%$%' and account_name not like '%/%' limit 50; 
```

不包含排除反斜杠的逻辑。

# actionscript-3 - 将符号从加载的 swf 动态链接到自定义类

> ID：11725168
> 
> 赞同：1
> 
> 时间：2012-07-30T16:02:02.470
> 
> 标签：actionscript-3, class, flash, external, symbols

我有一个项目，我将带有资产符号 (assets.swf) 的外部文件加载到主 swf 中，然后在需要时将符号添加到显示中。我希望与每个符号关联的类在运行时链接到文档类中的自定义类。我真的很想避免通过符号属性在资产 fla 中定义自定义类。

在 AS2 中，这可以通过 Object.registerClass 实现，如下所示：

```
Object.registerClass("assetID",AssetClass);
this.attachMovie("assetID", "asset_mc", 0); 
```

因此，该符号独立于它在运行时链接到的类。

在 AS3 中，我看到了对 registerClassAlias 的引用，但在线可用的可靠文档很少。

有谁知道用 registerClassAlias 或任何其他方式做我想做的事情的方法？

谢谢！！！马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:21:45.390

首先，您需要加载资产符号并保留对加载器的引用。

```
assetsLoader.load(new URLRequest("assets.swf")); 
```

加载完成后，您可以在加载的 SWF 中检索资源`ApplicationDomain`。

```
var assetClass:Class = assetsLoader.contentLoaderInfo.applicationDomain.getDefinition("MyAssetClass") as Class;
var asset:* = new assetClass(); 
```

**注意：** `MyAssetClass`应该在里面定义`assets.swf`！

如果您想了解更多信息，[可以阅读这篇文章](http://taskinoor.wordpress.com/2011/02/06/as3-load-assets-dynamically-for-better-performance-2/)。

# c# - 来自字符串的英语词典单词匹配

> ID：11725169
> 
> 赞同：5
> 
> 时间：2012-07-30T16:02:04.280
> 
> 标签：c#, .net, linq

我试图解决一个问题，即从字典文件中识别英语单词到给定字符串的最佳匹配。

例如（“lines”是字典单词列表）：

```
string testStr = "cakeday";

for (int x= 0; x<= testStr.Length; x++)
{
  string test = testStr.Substring(x);

   if (test.Length > 0)
   {
      string test2 = testStr.Remove(counter);
      int count = (from w in lines where w.Equals(test) || w.Equals(test2) select w).Count();
      Console.WriteLine("Test: {0} / {1} : {2}", test, test2, count);
    }
} 
```

给出输出：

```
Test: cakeday /   : 0
Test: akeday / c  : 1
Test: keday / ca  : 0
Test: eday / cak  : 0
Test: day / cake  : 2
Test: ay / caked  : 1
Test: y / cakeda  : 1 
```

显然“day / cake”最适合该字符串，但是如果我要在字符串中引入第三个单词，例如“cakedaynow”，它就不会那么好用。

我知道这个例子是原始的，它更像是一个概念证明，并且想知道是否有人对这种类型的字符串分析有任何经验？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:09:11.640

你会想要研究适合你想要做的事情的算法类。从Wikipedia 上的[近似字符串匹配](http://en.wikipedia.org/wiki/Approximate_string_matching)开始。

此外，这是一个用 C# 编写的 Levenshtein Edit Distance 实现，可以帮助您入门：

```
using System;

namespace StringMatching
{
    /// <summary>
    /// A class to extend the string type with a method to get Levenshtein Edit Distance.
    /// </summary>
    public static class LevenshteinDistanceStringExtension
    {
        /// <summary>
        /// Get the Levenshtein Edit Distance.
        /// </summary>
        /// <param name="strA">The current string.</param>
        /// <param name="strB">The string to determine the distance from.</param>
        /// <returns>The Levenshtein Edit Distance.</returns>
        public static int GetLevenshteinDistance(this string strA, string strB)
        {
            if (string.IsNullOrEmpty(strA) && string.IsNullOrEmpty(strB))
                return 0;

            if (string.IsNullOrEmpty(strA))
                return strB.Length;

            if (string.IsNullOrEmpty(strB))
                return strA.Length;

            int[,] deltas; // matrix
            int lengthA;
            int lengthB;
            int indexA;
            int indexB;
            char charA;
            char charB;
            int cost; // cost

            // Step 1
            lengthA = strA.Length;
            lengthB = strB.Length;

            deltas = new int[lengthA + 1, lengthB + 1];

            // Step 2
            for (indexA = 0; indexA <= lengthA; indexA++)
            {
                deltas[indexA, 0] = indexA;
            }

            for (indexB = 0; indexB <= lengthB; indexB++)
            {
                deltas[0, indexB] = indexB;
            }

            // Step 3
            for (indexA = 1; indexA <= lengthA; indexA++)
            {
                charA = strA[indexA - 1];

                // Step 4
                for (indexB = 1; indexB <= lengthB; indexB++)
                {
                    charB = strB[indexB - 1];

                    // Step 5
                    if (charA == charB)
                    {
                        cost = 0;
                    }
                    else
                    {
                        cost = 1;
                    }

                    // Step 6
                    deltas[indexA, indexB] = Math.Min(deltas[indexA - 1, indexB] + 1, Math.Min(deltas[indexA, indexB - 1] + 1, deltas[indexA - 1, indexB - 1] + cost));
                }
            }

            // Step 7
            return deltas[lengthA, lengthB];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:39:38.360

*为什么不：*

检查*搜索词*中的所有字符串，从当前搜索位置提取到字符串的所有可能长度，并提取所有发现的词。例如：

```
var list = new List<string>{"the", "me", "cat", "at", "theme"};
const string testStr = "themecat";
var words = new List<string>();
var len = testStr.Length;
for (int x = 0; x < len; x++)
{
    for(int i = (len - 1); i > x; i--)
    {
        string test = testStr.Substring(x, i - x + 1);
        if (list.Contains(test) && !words.Contains(test))
        {
            words.Add(test);
        }
    }
}

words.ForEach(n=> Console.WriteLine("{0}, ",n));//spit out current values 
```

**输出：**

> 主题，我，猫，在

## 编辑

**Live Scenario 1：** 例如，假设您想始终在杂乱的句子中*选择*最长的单词，您可以从前向前阅读，从而减少阅读的文本量，直到读完为止。使用字典更容易，通过存储发现单词的索引，我们可以快速检查我们是否存储了一个包含*我们之前正在评估的另一个单词*的单词。

**例子：**

```
var list = new List<string>{"the", "me", "cat", "at", "theme", "crying", "them"};
const string testStr = "themecatcryingthem";
var words = new Dictionary<int, string>();
var len = testStr.Length;
for (int x = 0; x < len; x++)
{
    int n = len > 28 ? 28 : len;//assuming 28 is the maximum length of an english word
    for(int i = (n - 1); i > x; i--)
    {
        string test = testStr.Substring(x, i - x + 1);
        if (list.Contains(test))
        {
            if (!words.ContainsValue(test))
            {
                bool found = false;//to check if there's a shorter item starting from same index
                var key = testStr.IndexOf(test, x, len - x);
                foreach (var w in words)
                {
                    if (w.Value.Contains(test) && w.Key != key && key == (w.Key + w.Value.Length - test.Length))
                    {
                        found = true;
                    }
                }
                if (!found && !words.ContainsKey(key)) words.Add(key, test);
            }
        }
    }
}

words.Values.ToList().ForEach(n=> Console.WriteLine("{0}, ",n));//spit out current values 
```

**输出：**

> 主题，猫，哭，他们

# c# - StreamSocketListener 访问被拒绝

> ID：11725170
> 
> 赞同：4
> 
> 时间：2012-07-30T16:02:05.850
> 
> 标签：c#, .net, sockets, microsoft-metro

我想要做的是创建一个 SocketStreamListener 并连接到它（在本地主机上）。然后连接到它并向它发送消息。非常简单的东西，这一切都[在官方演示中](http://code.msdn.microsoft.com/windowsapps/StreamSocket-Sample-8c573931)完成，但我想理解它并在我自己的应用程序中使用这个逻辑。

**问题**

我创建了一个**新的 Windows Metro C# 应用程序项目**，并使用以下代码在我的 MainPage 上创建侦听器：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    StreamSocketListener listener = new StreamSocketListener();
    greetingOutput.Text = "Hello, " + nameInput.Text + "!";
} 
```

但我收到此错误：

> HelloWorld.exe 中出现“System.UnauthorizedAccessException”类型的异常，但未在用户代码中处理
> 
> WinRT 信息：至少需要 InternetClientServer 或 PrivateNetworkClientServer 功能之一来侦听或接收流量
> 
> 附加信息：访问被拒绝。
> 
> 如果有这个异常的处理程序，程序可以安全地继续。

不过，相同的代码在官方演示中也有效。

我错过了什么？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T16:08:22.723

您需要根据需要将应用程序配置为需要一项或两项必要功能：

1.  互联网客户端服务器

    > 您的 Internet 连接，包括来自 Internet 的未经请求的传入连接 - 该应用程序可以通过防火墙将信息发送到您的计算机或从您的计算机发送信息。如果声明了此功能，则无需声明 internetClient。

2.  私有网络客户端服务器

    > 家庭或工作网络——该应用程序可以向您的计算机和同一网络上的其他计算机发送信息或从您的计算机和其他计算机发送信息。

（来自[http://msdn.microsoft.com/en-us/library/windows/apps/br211423.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211423.aspx)上的文档）

有关功能如何工作的更多信息，另请参阅本文：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx)

> 互联网和公共网络
> 
> internetClient 功能提供通过防火墙对 Internet 和公共网络的出站访问。几乎所有 Web 应用程序都使用此功能。internetClientServer 功能提供通过防火墙对 Internet 和公共网络的入站和出站访问。
> 
> 家庭和工作网络
> 
> privateNetworkClientServer 功能提供通过防火墙对家庭和工作网络的入站和出站访问。此功能通常用于跨局域网 (LAN) 进行通信的游戏，以及跨各种本地设备共享数据的应用程序。如果您的应用指定了musicLibrary、picturesLibrary 或videoLibrary，则无需使用此功能来访问家庭组中的相应库。

您需要在包清单中声明您的应用需要（因此可以访问）哪些功能。这是有关如何执行此操作的分步指南：http: [//msdn.microsoft.com/en-us/library/windows/apps/br211477.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211477.aspx)

您可以使用 Visual Studio 中的清单设计器来编辑这些功能。只需在名为的解决方案中找到并打开该文件，`package.appxmanifest`Manifest Designer 就会打开。

![应用清单设计器](../Images/203507211bed31b046f880e296bce85b.png)

选择功能选项卡和您的应用所需的网络相关功能，您应该一切顺利。

链接到有关 App Manifest Designer 的文档：http: [//msdn.microsoft.com/en-us/library/windows/apps/br230259 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br230259(v=vs.110).aspx)

关于最后一段

> 如果有这个异常的处理程序，程序可以安全地继续。

它只是说您可以使用`StreamSocketListener`try-catch 块包装您的代码。如果您想在应用程序中优雅地处理缺失的功能，这是一件好事：

```
private void Button_Click(object sender, RoutedEventArgs e)
{ 
    try 
    {
         StreamSocketListener listener = new StreamSocketListener();
         greetingOutput.Text = "Hello, " + nameInput.Text + "!";
    } 
    catch(UnauthorizedAccessException exc) 
    {
         // Act on the missing capability. Log it and/or warn the user.
    }
} 
```

# java - Java中非线性方程的最大化

> ID：11725175
> 
> 赞同：1
> 
> 时间：2012-07-30T16:02:33.927
> 
> 标签：java, math, mathematical-optimization, scientific-computing, nonlinear-functions

我想确定某个函数（类似于下一个函数）最大化的 x 值： ![在此处输入图像描述](../Images/9b54762b702275b737b5b7567580e23b.png)

很明显，当 x = 0 时达到 A 的最大值，然后 A = 200。

我如何在 Java 中解决这个问题？

更新：很抱歉从一开始就没有说清楚。x 是一个 int，但是当 x 不是下一个示例中的上限时，我也需要一种方法来找到最大值： ![在此处输入图像描述](../Images/8f3ccfac9597f20656e9dac4f7903f62.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:33:14.383

floor 函数有一个线性上限和一个下限`x-1 < floor(x) < x`，这应该可以确定曲线的一般形状。然后可以找到下限的最大值（这是一个线性函数）并枚举其值`x`落在上限`A`可能达到下限最大值的区域，即上限超过下限的区域下限的最小值。如果所讨论的这个区域是有限的，那么可以找到`x`最大化 的。`A`如果不是，则表明该函数是循环的，因此您必须确定其周期并找到该周期的最大值。

在该示例中，下限为`(x + 100) / 1000 - 1 + 3 * (x / 1000 - 1) + 200 - x`，等于`(196100 - 996 * x) / 1000`，上限为`(x + 100) / 1000 + 3 * (x / 1000) + 200 - x`或`(200100 - 996 * x) / 1000`。下界显然达到了最大值`196100 / 1000`at `x == 0`，因此我们只需要检查上界较高的那些 x 的值，`(200100 - 996 * x) / 1000 > 196100 / 1000`可以减少到`x < 4.02`，因此只需检查`x`0 到 4 的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:07:44.460

好吧，`floor((x+100)/1000)`两者`floor(x/1000)`都`0`在给定的范围内。这使得这个例子非常简单。

ps我不认为Java与这个问题有任何关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T16:11:07.010

**编辑**：没有看到`x`必须是整数。

如果有人有一个变量不必是整数的函数，他们可以使用以下内容：

要近似最大值，您可以查看[Nelder-Mead 方法](http://en.wikipedia.org/wiki/Nelder%E2%80%93Mead_method)。它容易受到局部最大值的影响，并且需要平滑函数。它在[Flanagan 的 Java Scientific Library](http://www.ee.ucl.ac.uk/~mflanaga/java/Maximisation.html)中实现。基本上你必须扩展`MaximizationFunction`和实现这个功能

```
public double function(double[] param) 
```

其中包含您上面的功能。此方法在给定参数的情况下评估您的函数`param`（在您的情况下为一个值：）`x`并返回函数值。

然后你可以像这样使用整个程序：

```
//Create instance of Maximisation
Maximization max = new Maximization();

// Create instace of class holding function to be maximised
YourFunction funct = new YourFunction();

// initial estimates (your initial x)
double[] start = {30.0};

// initial step sizes (take a good guess)
double[] step = new double[start.length];
Arrays.fill(step, 100);

// convergence tolerance
double ftol = 0.0001;

// maximal number of iterations
int maxIter = 5000;

// Nelder and Mead maximisation procedure
max.nelderMead(funct, start, step, ftol, maxIter);

// result of maximization
double result = max.getMaximum() 
```

由于您的变量有限制，您应该通过`addConstraint`.`Maximization`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T16:08:23.293

这是一个大纲，因为这是家庭作业

```
public int myMax(int x){ // assuming x is an integer
  // implement the math function as a Java function 
  // Java has a floor function
}

public int findMaxOverRange(int low, int hi) {
    int highestSoFar = 0;
    for (int x = low; x <= hi; x++) {
       // invoke your function, getting the result.  If the result is higher
       // than highestSoFar, reset highestSoFar to the value.
    }
} 
```

地板[功能](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#floor%28double%29)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-30T16:08:45.830

在java中，你基本上研究了数学优化的整个领域并在java中实现了一些算法（就像在任何其他语言中一样）。
Java 没有任何如此具体的数学工具。您可以搜索库。

# php - 如何将 PostgreSQL 数据加载到 HTML/JS

> ID：11725176
> 
> 赞同：1
> 
> 时间：2012-07-30T16:02:36.240
> 
> 标签：php, javascript, postgresql

我在服务器端有一个 Postgresql 数据库。我想在其上加载数据以显示在 HTML 网页上。我将如何才能在 javascript 中访问这些数据？那里有教程吗？这似乎是一件很常见的事情，但到目前为止我似乎无法找到如何去做。我确实发现了一些关于使用 php 和 node.js 来执行此操作的 stackoverflow 问题，但我似乎无法使其正常工作。php 似乎是最简单的方法，我从另一个问题中复制了一些代码，但它似乎不起作用。

```
 var patientData = [];
    var patient_id = 8;

    <?php
            $connection = pg_connect("connectstuff");

            if(!$connection)
            {
                    pg_close($connection);
            }

            $result = pg_query($connection, "query");
            if (!$result) 
            {
                    exit;
            }

            $row = pg_fetch_row($result, 0);

            echo "patientdata = $row;";
            echo "alert('asdf')";
    ?> 
```

警报甚至没有显示，所以我认为 php 代码甚至没有运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:23:22.597

我建议您使用 PHP 来查询数据库，构建本地数组或数据结构并将其转换为 JSON，然后返回到 Javascript 文件。查看[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)以了解 PHP / JSON 处理。我假设您的 Javascript 正在尝试通过 AJAX 请求访问数据，但您没有提供足够的设置细节来确定？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:24:48.270

检查生成页面的来源，并确保`$row`您输出的值是实际语法上有效的 javascript。例如，如果它是一个表示一行数据的数组，php 将实际输出`Array`，而不是该行的某个值。

除此之外，当使用 PHP 动态构建 javascript 时，您应该始终使用 json_encode() 来确保您插入到 javascript 中的 PHP 变量作为有效的 javascript 出来。插入数据中最轻微的语法错误都会杀死整个 JS 代码块，你最终会回到现在的位置 - 一个功能失调的页面，不知道它为什么会死：

```
patientdata = <?php echo json_encode($row) ?>; 
```

将 100% 保证您插入到 JS 代码中的任何内容都不会导致解析器错误。数据是否真正适用于您的代码是另一回事，但至少脚本不会在解析阶段被杀死。

# maven - Maven 从最终 WAR 中排除文件

> ID：11725177
> 
> 赞同：3
> 
> 时间：2012-07-30T16:02:37.817
> 
> 标签：maven, war

我正在使用 Maven 3 打包 WAR 文件，但我无法弄清楚如何`src/main/webapp`从生成的最终 WAR 中排除文件。其中一个目录`src/main/webapp`是 git 子模块，我想在该 git 子模块表单中排除 README、docs/ 等文件，以进入我的最终 WAR。

我最初的尝试是使用`maven-antrun-plugin`删除文件。`prepare-package`我尝试了and中的删除操作`package`，但都没有成功。执行删除`package`从 my 中删除了文件`target/<projname>/...`，但最终的 WAR 仍然包含这些文件。运行 maven with`-debug`显示生成 WAR 文件*后文件被删除。*就好像我想在 和 之间进行`prepare-package`删除`package`。

我接下来的尝试是尝试指定要从 WAR 中排除的文件（下面链接的一些解决方案），但似乎没有任何效果。`src/main/resources`我可能没有正确指定不需要的文件的路径，我想知道这是否与我不需要的文件不在`src/main/webapp`.

我尝试了很多解决方案，但似乎没有任何效果。每次我尝试新`mvn clean`的东西时，我都会删除`target`目录。最终生成的 WAR 文件始终包含不需要的文件。

我觉得我的问题的答案存在于我遇到的 SO 和谷歌搜索中，但我尝试过的任何事情都没有完全符合我的需要。以下是我尝试过的一些解决方案。

*   [从 Maven 构建中排除文件](https://stackoverflow.com/questions/5222539/exclude-file-from-maven-build)
*   [在 Maven 中如何从生成的 jar 中排除资源？](https://stackoverflow.com/questions/4113697/in-maven-how-to-exclude-resources-from-the-generated-jar)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T16:12:40.827

由于文件在`webapp`文件夹内，我猜这`maven-war-plugin`是最好的开始点。带有 excludes 的资源过滤指向`src/main/resources`并且不知道该`webapp`文件夹。

所以[http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html](http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html)

有一个参数：：`warSourceExcludes`http: [//maven.apache.org/plugins/maven-war-plugin/war-mojo.html#warSourceExcludes](http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html#warSourceExcludes)

这应该允许过滤自述文件等。

# c++ - 如何获取仅包含另一个向量的最后 n 个元素的向量？

> ID：11725179
> 
> 赞同：19
> 
> 时间：2012-07-30T16:02:43.450
> 
> 标签：c++

我有一个`std::vector`，我想要一个单独`std::vector`的，只包含原始向量的最后 n 个元素。除了在整个向量上循环插入一个接一个之外，还有更清洁的方法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-30T16:05:13.183

```
int n = 5;
std::vector<int> x = ...;
std::vector<int> y(x.end() - n, x.end()) 
```

当然，如果 x.size() < n 这将崩溃并烧毁

稍微详细一点，`std::vector`（像大多数标准库容器一样）有一个构造函数，它接受一对迭代器。它用从第一个迭代器到第二个迭代器的所有项目填充向量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:07:33.877

您可以`copyVector`直接使用两个迭代器构造函数进行构造：

```
std::vector<int> original = ...;
std::vector<int>::iterator start = std::next(original.begin(), M);
std::vector<int> copyVector(start, original.end()); 
```

或使用`std::vector`'s [assign](http://en.cppreference.com/w/cpp/container/vector/assign)方法：

```
std::vector<int>::iterator start = std::next(original.begin(), M);
std::vector<int> copyVector = ... ;
...
copyVector.assign(start, original.end()); 
```

其中`M`从`original.size()`和计算`n`。

# php - PDO 我什么时候需要参数化我的查询？

> ID：11725183
> 
> 赞同：-1
> 
> 时间：2012-07-30T16:02:54.857
> 
> 标签：php, pdo, prepared-statement, sql-injection

所以我正在使用 PDO 来尝试防止 SQL 注入。

我的问题是我应该在使用之前检查/验证我的数据库信息吗？

例如：

```
$stmt = $pdo -> prepare(SELECT userID FROM user, comment WHERE userNumber ='1' AND user.userName = comment.UserName"); 
```

我认为我有的选择是：

1）我在将所有输入插入数据库之前验证所有输入，因此我不必检查 user.userName 是否是可以注入代码的字符串。

2) 我应该参数化从数据库中获取的数据。还不确定，但类似：

```
$stmt->bindValue(':comment.UserName', comment.UserName, PDO::PARAM_STR); 
```

3) 验证并仍然参数化。

*即时查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:05:53.160

规则很简单：**始终**参数化您的查询。即使这些查询从未在网页上使用并且面对恶意用户群，任何**时候**您在查询字符串中使用外部数据，即使是来自数据库的数据，您**仍然**可以注入自己。

唯一的例外是参数查询不起作用的时候，例如任意长度的`WHERE IN (...)`值列表、动态表/字段名称（这通常是个坏主意）。在这些有限的情况下，您自己构建查询，但必须采取适当的注入攻击缓解程序。

# indexing - cgi-bin 403 在 apache2 上被禁止

> ID：11725186
> 
> 赞同：3
> 
> 时间：2012-07-30T16:03:07.007
> 
> 标签：indexing, cgi-bin

我正在尝试加载 cgi-bin，但我不断收到 403 权限错误。当我尝试加载 cgi-bin/index.pl 时，找不到 404 页面。项目权限使用 chmod -R 755 设置。

服务器正在使用 php5-cgi 运行 debian squeeze、apache2。

这是 /etc/apache2/sites-enabled/000-default：

```
DocumentRoot /var/www/
    <Directory />
            Options FollowSymLinks
            AllowOverride None
    </Directory>
    <Directory /var/www/>
            Options +Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory>

    Alias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
            AllowOverride None
            Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
            Order allow,deny
            Allow from all
    </Directory> 
```

错误日志：

```
[Mon Jul 30 09:39:30 2012] [notice] Apache/2.2.16 (Debian) PHP/5.3.3-7+squeeze13 with Suhosin-Patch configured -- resuming normal operations
[Mon Jul 30 09:50:44 2012] [error] Directory index forbidden by Options directive: /usr/lib/cgi-bin/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-26T14:24:09.197

（在评论或编辑中回答了问题。请参阅[没有答案的问题，但在评论中解决了问题（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 已解决：将 000-default 的底部更改为：

```
ScriptAlias /cgi-bin/ /var/www/cgi-bin/
<Directory "/var/www/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
</Directory> 
```

> 然后安装了一些缺少的 perl 模块并且它工作了。能够打开浏览器到`/localhost/cgi-bin/index.pl`.

# c# - 如何使用 HtmlAgilityPack 获取这两个内容？

> ID：11725190
> 
> 赞同：0
> 
> 时间：2012-07-30T16:03:26.880
> 
> 标签：c#, html, html-agility-pack

html代码：

```
<div>
    <div>Name</div>
    Date
</div> 
```

如何使用 HtmlAgilityPack 获取`Name`和`Date`值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:10:08.050

```
HtmlDocument doc = new HtmlDocument();
 doc.Load("file.htm");
 foreach(HtmlNode div in doc.DocumentElement.SelectNodes("//div"])
 {
    string parent = div.InnerText; //this will give you Name
    foreach (HtmlNode child in div.ChildNodes)
    {
     string childDiv = child.InnerText; //this will give you the child
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:15:38.947

```
var doc = new HtmlDocument();
doc.LoadHtml("<div><div>Name</div>Date</div>");
var nodes = doc.DocumentNode
    .DescendantNodes()
    .Where(n => n.NodeType == HtmlNodeType.Text);
foreach (var node in nodes)
{
    var value = node.InnerText;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:22:15.780

硬编码：

```
HtmlDocument doc = new HtmlDocument();
doc.LoadHtml("<div><div>Name</div>Date</div>");
                Console.WriteLine(((HtmlTextNode)doc.DocumentNode.ChildNodes[0].ChildNodes[0]).Text);
Console.WriteLine(((HtmlTextNode)doc.DocumentNode.ChildNodes[1]).Text); 
```

如果您要查找的是所有文本节点（如 Kevin Babcock 的回答！）。您必须记住 Xml（以及 HtmlAgility）中的文本是节点。

# c# - 在 WPF 中切换到调度程序线程

> ID：11725191
> 
> 赞同：3
> 
> 时间：2012-07-30T16:03:32.997
> 
> 标签：c#, wpf, multithreading

[这是对这个问题](https://stackoverflow.com/questions/11703807/calling-method-indefinitely)的跟进。

我必须从不同的线程更新 ObservableCollection。我尝试使用以下代码：

```
 Thread t = new Thread(  ()=>
         {
             while(true)
             {

                 if (ErrorDetection.ErrorDetectionIO.doErrorDetection() == 1)
                 {
                     dataLine = ErrorDetection.ErrorDetectionIO.getDataLine();

                     if (mainWindow != null)
                     {
                         ISynchronizeInvoke target = mainWindow; // mainWindow needs to be an WindowsForm?
                         target.Invoke(
                            (Action)(() =>
                             {
                                mainWindow.setNewDataLine(dataLine);
                             }
                             ), null);
                     }

                 }
             }

         }  );

         t.IsBackground = true;
         t.Start(); 
```

ErrorDetectionIO.doErrorDetection() 位于 c++/cli .dll 中并调用本机 c 代码。

setNewDataLine 在 mainWindow 上，并在 Observable 集合中添加了一个 Line。

如果从不同的线程调用它会导致异常：“这种类型的 CollectionView 不支持从与 Dispatcher 线程不同的线程对其 SourceCollection 的更改。”

问题是 ISynchronize Invoke 似乎不适用于 wpf？Threres 编译器错误消息 mainWindow 无法转换为 ISynchronizeInvoke。

如果我使用 ISynchronizeInvoke target = mainWindow 作为 ISynchronizeInvoke; 它可以编译但目标为空；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:09:27.957

您可以只使用`mainWindow.Dispatcher.Invoke`而不是尝试强制转换为`ISynchronizeInvoke`. [Dispatcher.Invoke](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.invoke.aspx)将为 WPF 提供正确的封送处理。

[请注意，.NET 4.5 通过设置BindingOperations.EnableCollectionSynchronization](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingoperations.enablecollectionsynchronization%28v=vs.110%29.aspx)添加了 WPF 自动处理此问题的能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:06:15.570

您应该查看许多[ThreadSafeObservableCollection](http://www.codeproject.com/Articles/37312/ThreadSafeObservableCollection)实现中的一些。这些将很好地解决从后台线程更新 ObservableCollection 的问题！

# python - python中使用线程或asycore的群聊应用程序

> ID：11725192
> 
> 赞同：2
> 
> 时间：2012-07-30T16:03:35.777
> 
> 标签：python, multithreading, sockets, asynchronous

我正在开发一个群聊应用程序来学习如何使用套接字、线程（也许）和 asycore 模块（也许）。我的想法是有一个客户端-服务器架构，这样当客户端连接到服务器时，服务器会向客户端发送其他连接列表（其他客户端“用户名”、IP 地址），然后一个人可以连接到一个或多个一个人，服务器将在客户端之间建立 P2P 连接。我有套接字部分工作，但服务器一次只能处理一个客户端连接。
处理多个连接的最佳、最常见、实用的方法是什么？每当我有新的连接进入服务器时，我是否创建一个新的进程/线程，然后将不同的客户端连接连接在一起，或者使用我理解的 asycore 模块，它使服务器将相同的数据发送到多个套接字（连接），我只需要规范数据的去向。

任何帮助/想法/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:29:00.493

对于群聊应用程序，一般方法是：

服务器端（接受过程）：

*   创建套接字，将其绑定到一个众所周知的端口（并在适当的接口上）并监听
*   虽然（app_running）
    *   Client_socket = 接受（使用 serverSocket）
    *   产生一个新线程并将这个套接字传递给线程。该线程处理刚刚连接的客户端。
    *   继续，让服务器可以继续接受更多的连接。

服务器端客户端管理线程：

*   而 app_running：
    *   读取传入的消息，并存储到队列或其他东西。
    *   继续

服务器端（群聊处理）：

*   对于所有连接的客户端：
    *   检查他们的队列。如果存在任何消息，请将其发送给所有连接的客户端（包括发送此消息的客户端 - 用作 ACK 类）

客户端：

*   创建一个套接字
*   通过 IP 地址和端口连接到服务器
*   发送/接收。

以上可以有很多改进。就像服务器可以轮询套接字或在一组套接字上使用“选择”操作一样。从某种意义上说，这将使其高效，因为当有很多连接的客户端时，为每个连接的客户端拥有一个单独的线程将是过量的。（考虑每个线程约 1MB 的堆栈）。

PS：我还没有真正使用过`asyncore`模块。但我只是*猜测*，当您有大量连接的客户端并且处理量非常少时，您会注意到一些性能改进。

# python - 启用 HTML 报告时禁用对 STDOUT 的鼻子覆盖率报告？

> ID：11725193
> 
> 赞同：11
> 
> 时间：2012-07-30T16:03:40.690
> 
> 标签：python, nose, nosetests, coverage.py

我正在使用带有[覆盖插件的](http://nose.readthedocs.org/en/latest/plugins/cover.html)[鼻子](https://github.com/nose-devs/nose)（通过[django-nose](https://github.com/jbalogh/django-nose)）来检查我的 Django 项目的测试覆盖率。

我已将鼻子配置为在每次测试运行时生成 HTML 覆盖率报告：

```
NOSE_ARGS = [                                                                   
    '--with-coverage',                                                            
    '--cover-package=foot',                                                       
    '--cover-html',                                                               
    '--cover-html-dir=cover',
] 
```

现在，我想禁用每次测试运行后显示的纯文本覆盖率报告；HTML 功能更强大，而且格式错误的长表格让人很难看到实际的测试输出。似乎也`nosetests`没有`coverage`这样的选择，或者我只是找不到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-18T15:24:50.770

（取自[这个相关问题](https://stackoverflow.com/questions/5065455/how-to-disable-nose-tests-coverage-report?lq=1)）

您可以安装`nose-cov`：

```
pip install nose-cov 
```

它可以更好地控制报告选项。然后，更改`--with-coverage`为`--with-cover`，*例如*

```
NOSE_ARGS = [
 '--with-cov',
 '--cov-report', 'html',
] 
```

它将导出到 HTML 但抑制控制台输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:03:40.690

一个快速而肮脏的解决方法是注释掉生成未格式化的覆盖率报告的行`nose/plugins/cover.py`：

```
def report(self, stream):
    ....
    log.debug("Coverage report will cover modules: %s", modules)
    #self.coverInstance.report(modules, file=stream) 
```

# android - 如何通过保持纵横比填充 ImageView 中的图像？

> ID：11725196
> 
> 赞同：0
> 
> 时间：2012-07-30T16:03:47.227
> 
> 标签：android, user-interface

我看到了很多关于同一主题的问题，并尝试使用

```
android:adjustViewBounds="true"
android:scaleType="fitCenter" 
```

我的图像仍然按原样显示。如果我改变

> android:scaleType="fitCenter"

工作 `fitXY`正常。但根据文件，这个不保持纵横比。那么我怎样才能更改代码以按预期工作？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <LinearLayout
        android:id="@+id/card"
        android:layout_marginTop="25dp"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/card" >

        <ImageView
            android:id="@+id/idImage"
            android:layout_width="fill_parent"
            android:layout_height="110dp"
            android:layout_margin="10dp"
            android:adjustViewBounds="true"
            android:scaleType="fitCenter"
            android:src="@drawable/783454" />

    </LinearLayout>

</LinearLayout> 
```

![在此处输入图像描述][1] ![在此处输入图像描述][2] 我在哪里缺少这个概念？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:32:02.883

请看这段代码，这就是我如何缩放位图以正确适应屏幕。也许它会有所帮助，并为您提供有关您的任务的想法。

```
private void loadImage() {
    ImageView imageView = (ImageView)findViewById(R.id.imageView);

    Bitmap imageBitmap = ... load original image bitmap;  

    Bitmap scaledBitmap = imageBitmap; 

    // Scaling

    int imgSrcHeight = imageBitmap.getHeight();
    int imgSrcWidth = imageBitmap.getWidth();

    int scaledHeight = 0;
    int scaledWidth = 0;

    int ctnrHeight = imageView.getMeasuredHeight();
    int ctnrWidth = imageView.getMeasuredWidth();

    int mHeight = imgSrcHeight - ctnrHeight;
    int mWidth = imgSrcWidth - ctnrWidth;

    if(mHeight > 0 && mWidth > 0)
    {
        if(mHeight > mWidth)
        {
            // scale to fit height
            if(mHeight > 0)
            {
                scaledHeight = ctnrHeight;

                // if height < 0 it means it's already inside of content
                int coefOverhight = (ctnrHeight * 100)/imgSrcHeight;
                scaledWidth = (int)(imgSrcWidth * ((coefOverhight)/100.0)); 
            }
        }
        else
        {
            // scale to fit width
            if(mWidth > 0)
            {
                scaledWidth = ctnrWidth;
                int coefOverwidth = (ctnrWidth * 100)/imgSrcWidth;
                scaledHeight = (int)(imgSrcHeight * ((coefOverwidth)/100.0));
            }
        }
    }
    else
    {
        scaledHeight = imgSrcHeight;
        scaledWidth = imgSrcWidth;
    }

    scaledBitmap = Bitmap.createScaledBitmap(imageBitmap, scaledWidth, scaledHeight, true);

    imageView.setImageBitmap(scaledBitmap); 
```

}

# terminal - 终端有更好的拆分功能吗？

> ID：11725201
> 
> 赞同：0
> 
> 时间：2012-07-30T16:04:10.207
> 
> 标签：terminal, split

我正在尝试将一个非常大的 CSV 文件拆分为更小的更易于管理的文件。我已经尝试过`split`，但它似乎最高为[676 个文件](http://pic.dhe.ibm.com/infocenter/aix/v7r1/index.jsp?topic=/com.ibm.aix.cmds/doc/aixcmds5/split.htm)。

我拥有的 CSV 文件超过 80mb，我想将其拆分为 50 行文件。

**请注意**，*更好*的意思是使用编号结构而不是`split`' az 排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:21:50.097

`split`是正确的工具，问题是后缀只有 2 long `26^2 = 676`，如果你让它更长，你应该没问题：

```
split -a LEN file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:11:33.500

使用“cat”对每一行进行编号，并将输出通过管道传递到“grep”，并使用参数仅打印 n 行

# php - 混合多维数组的元素

> ID：11725202
> 
> 赞同：0
> 
> 时间：2012-07-30T16:04:12.643
> 
> 标签：php, arrays

我的数组包含 2 个或更多数组（多维）

```
array (
    array(
        'apple',
        'banans',
        'orange'
    ), 
    array(
        'green',
        'black',
        'yellow'
    ), array(
        'tasty'
    )
) 
```

我需要获得成对的单词-实际上数组可以包含 x 个数组

输出：

1.  苹果绿好吃
2.  苹果黑好吃
3.  苹果黄好吃
4.  香蕉 绿色 好吃
5.  ...

代码看起来像这样：

```
 foreach ($x as $k0 => $value0) {
        foreach ($x[$k0] AS $k1 => $value1) {
            foreach ($x[$k0 + 1] AS $k2 => $value2) {
                foreach ($x[$k0 + 2] AS $k3 => $value3) {
                    echo $m++ . '. ' . $value1 . ' ' . $value2 . ' ' . $value3;
                    echo '<br/>';
                }
            }
        }
    } 
```

并将输出：

1.  苹果绿好吃
2.  苹果黑好吃
3.  苹果黄好吃
4.  香蕉 绿色 好吃
5.  香蕉 黑色 好吃
6.  香蕉 黄色 好吃
7.  橙绿色好吃
8.  橙色 黑色 好吃
9.  橙黄色好吃

但也许我们有更好的解决方案。事实上，数组可以包含 2、3、4 个带有单词列表的数组！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:05:36.540

这将处理您想做的事情：

[http://docstore.mik.ua/orelly/webprog/pcook/ch04_26.htm](http://docstore.mik.ua/orelly/webprog/pcook/ch04_26.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:09:29.277

这可能是您正在寻找的[array_walk_recursive()](http://php.net/manual/en/function.array-walk-recursive.php)

# ruby-on-rails - 如何卸载 /usr/lib 中的 openssl？

> ID：11725203
> 
> 赞同：1
> 
> 时间：2012-07-30T16:04:15.727
> 
> 标签：ruby-on-rails, ruby, openssl, pg

安装 pg gem 后，当我尝试在本地计算机上启动服务器时出现此错误：

```
/Users/foo/.rvm/gems/ree-1.8.7-2011.12/gems/pg-0.14.0/lib/pg_ext.bundle: dlopen(/Users/foo/.rvm/gems/ree-1.8.7-2011.12/gems/pg-0.14.0/lib/pg_ext.bundle, 9): Library not loaded: @loader_path/../lib/libssl.dylib (LoadError)
Referenced from: /usr/lib/libpq.5.dylib
Reason: Incompatible library version: libpq.5.dylib requires version 1.0.0 or later, but libssl.dylib provides version 0.9.8 - /Users/foo/.rvm/gems/ree-1.8.7-2011.12/gems/pg-0.14.0/lib/pg_ext.bundle 
```

我通过 macports 在我的机器上安装了最新版本的 openssl，但似乎 gem 正在查看我出于某种原因安装在 /usr/lib 中的旧版本（可能与混乱的 @loader_path 有关？）。

“openssl 版本”给了我“OpenSSL 1.0.1c 2012 年 5 月 10 日”

和 'which openssl' 给了我 '/opt/local/bin/openssl' 正如我所料

非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T01:08:42.097

更新到 Mountain Lion 后，我刚刚遇到了这个问题。在检查我有正确的 OpenSSL 版本后，我做了以下事情。

```
$ ls /Library/PostgreSQL/9.1/lib/libssl* 
```

提供以下内容：

```
/Library/PostgreSQL/9.1/lib/libssl.1.0.0.dylib
/Library/PostgreSQL/9.1/lib/libssl.dylib
/Library/PostgreSQL/9.1/lib/libssl.a 
```

我这样复制文件：

```
$ sudo cp /Library/PostgreSQL/9.1/lib/libssl.1.0.0.dylib /usr/lib/ 
```

然后链接：

```
$ cd /usr/lib
$ ln -sf libssl.1.0.0.dylib libssl.dylib 
```

之后，我`rails s`再次尝试，同样的错误出现在不同的文件中，所以我重复了这个过程（`libcrypto`）：

```
 requires version 1.0.0 or later, but libcrypto.0.9.8.dylib 
 provides version 0.9.8 
```

所以：

```
$ sudo cp /Library/PostgreSQL/9.1/lib/libcrypto.1.0.0.dylib /usr/lib/
$ cd /usr/lib
$ ln -sf libcrypto.1.0.0.dylib libcrypto.dylib 
```

请参阅此问题的答案以供参考： [python pip install psycopg2 install error](https://stackoverflow.com/questions/11538249/python-pip-install-psycopg2-install-error)

# jsf-2 - PrimeFaces DataTable：（多）选择不适用于仅提供空值的动态构建表

> ID：11725207
> 
> 赞同：0
> 
> 时间：2012-07-30T16:04:20.877
> 
> 标签：jsf-2, primefaces

我正在使用多行选择以使用户能够删除选择记录。根据 PDF 文档和 ShowCase Labs，我必须像这样使用翻译成 Java 的代码：

```
final DataTable = new DataTable();
...
// (1)
dataTable.setSelectionMode("multiple");
// (2)
dataTable.setValueExpression("selection", createValueExpression(DbeBean.class, "selection", Object[].class));
// (3)
dataTable.setValueExpression("rowKey", createValueExpression("#{" + VARIABLE + ".indexKey}", Object.class));
...
final ClientBehaviorHolder dataTableAsHolder = dataTable;
...
// (4)
dataTableAsHolder.addClientBehavior("rowSelect", createAjaxBehavior(createMethodExpression(metaData.controllerBeanType, "onRowSelect", void.class, new Class<?>[] {SelectEvent.class}))); 
```

1.  多重 - 这条线具有多重选择，在前端视觉效果很好。
2.  selection - 被调用时，#{dbeBean.selection} 确实被绑定并且`public void setSelection(T[] selection)`仅被调用。
3.  rowKey - 被调用，工作正常，`getIndexKey()`被调用并返回必要的结果。
4.  rowSelect - 此事件处理程序也被调用，`DbeBean.onRowSelect(SelectEvent e)`.

我也使用惰性数据模型（我真的不相信这可能是原因，但谁知道呢？顺便说一句，它返回`List<T>`虽然 setSelection() 需要`T[]`- 为什么会这样？）：

```
public abstract class AbstractLazyDataSource<T extends IIndexable<K>, K> extends LazyDataModel<T> { 
... 
@Override
public final List<T> load(int first, int pageSize, String sortField, SortOrder sortOrder, Map<String, String> filters) {
    ...
    final IResultContainer<T> resultContainer = getData(querySpecifier);
    final List<T> data = resultContainer.getData();
    setRowCount(resultContainer.getTotalEntitiesCount());
    return getPage(data, first, pageSize);
}   
... 
@Override
public final K getRowKey(T object) {
    return object.getIndexKey(); // T instanceof IIndexable<K>, have to return a unique ID
}
... 
```

但是，处理程序不会像预期的那样工作。请帮助我理解为什么 (2) `DbeBean.setSelection(T[] selection)`& (4)分别`DbeBean.onRowSelect(SelectEvent e)`只得到**空**值：`T[] selection = null`和`SelectEvent: e.getObject = null`。我究竟做错了什么？

提前致谢。

*   PrimeFaces 3.2
*   莫哈拉 2.1.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:46:19.333

我已经开始工作了：我只是`rowKey`在动态创建（DataTable）期间删除了该属性，并在惰性数据模型中`p:dataTable`简单地重载。`getRowData`现在它起作用了。

# asp.net - Asp.net jquery ajax request.cookies 跨域

> ID：11725211
> 
> 赞同：1
> 
> 时间：2012-07-30T16:04:38.380
> 
> 标签：asp.net, ajax, xmlhttprequest, cross-domain, jsonp

由于跨域问题，我决定尝试一种新的解决方法来检测我的两个域之间的会话。我认为这个过程会起作用，因为我没有尝试设置任何 cookie，它在 chrome 和 firefox 中运行良好，但在 IE9 中却不行。

我已经在调试模式下逐步完成，我请求的 aspx 页面无法访问它自己的 Request.Cookies，而当我使用 chrome 时它会这样做。

过程是：

在 domain1（一个 asp.net mvc 应用程序）上，用户登录。作为该登录过程的一部分，在该域上设置了一个 cookie。如果我随后在此服务器上点击测试页面，我可以看到 cookie 已设置。

在 domain2（一个 asp.net webforms 应用程序）上，我向 domain1 上的测试页面发出 jQuery.ajax 请求，该请求旨在检查 cookie 并返回加密字符串。

在通过 ajax 调用此请求期间单步执行对 domain2 的请求时，我可以看到 request.cookies 集合未填充。令人沮丧的是，User.Identity.IsAuthenticated 是真的，但我无法访问我设置的 cookie。

这只是整个跨域安全性的另一个例子吗？对我来说，似乎甚至使用 jsonp 和所有其他各种 hheaders 等进行 ajax 调用，在这种情况下也无济于事，因为它似乎不止于此？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:36:55.943

看来您的假设是正确的。如果 JQuery 连接到的域与页面所在的域不同，则 JQuery 默认不会发送 cookie。

您可以尝试使用 JQuery API 中的 xhrFields 来执行跨域调用。

```
$.ajax({
url: a_cross_domain_url,
xhrFields: {
   withCredentials: true
}
}); 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

希望有帮助！

# jquery - 按键事件触发与焦点窗口无关 [jQuery]

> ID：11725212
> 
> 赞同：-2
> 
> 时间：2012-07-30T16:04:45.613
> 
> 标签：jquery, events, hotkeys

我想在有人按下 ctrl+c 时运行一个函数，无论他是在阅读 Wikipedia 文章并尝试复制文本时还是在从地址栏中复制 URL 时执行此操作。

另外，如果可能的话，您能否告诉我在触发事件时如何将选定的文本传递给函数。

万分感谢！

PS我希望可以使用jQuery以及它的插件来做所有事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:32:01.490

一般来说，这不可能使用 jQuery，甚至是在您的浏览器中运行的 JavaScript。如果您可以从某个随机网页访问用户计算机上的任意事件，则会破坏浏览器的安全模型。

要选择文本，请参阅[在元素中选择文本（类似于用鼠标突出显示）](https://stackoverflow.com/questions/985272/jquery-selecting-text-in-an-element-akin-to-highlighting-with-your-mouse)

# cocoa - 读取一个非常大的文件

> ID：11725217
> 
> 赞同：2
> 
> 时间：2012-07-30T16:05:02.233
> 
> 标签：cocoa

我正在开发一个读取巨大文本文件（最大可达 5gb）的应用程序。目前，我正在使用 fscanf 读取文件，因为我发现它是迄今为止最快的。但是，读取整个文件仍然需要相当长的时间。

有没有更快的方法从文件中读取数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:31:39.353

首先，您应该强烈避免将 5GB 文件作为单个步骤读入内存。仅内存影响就应该使您远离这种方法。相反，您应该尝试采用另一种方法，例如：

*   在读取数据时处理数据并丢弃数据
*   在工作之前将文件转换为 Core Data 模型
*   将文件转换为固定长度的记录格式，以便您可以进行随机访问
*   修改文件格式以减少冗余
*   索引文件，以便您可以进行随机访问
*   将数据分成单独的文件
*   内存映射文件使用`NSFileWrapper`（远非灵丹妙药，但可以与上述结合使用；`NSFileWrapper`自动进行内存映射）

您应该从获取性能基线开始：

```
time cat thebigfile.dat > /dev/null 
```

很难想象读取文件的速度比这快得多，所以这就是你的地板。

您绝对应该在 Instruments 中进行一些性能分析，并确保问题出在读取而不是处理上。特别是，内存分配可能比您预期的要昂贵，尤其是在多线程应用程序中。

研究完上述内容后，您仍然需要真正快速管理磁盘数据，请查看[dispatch_io](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)和[dispatch_data](http://www.mikeash.com/pyblog/friday-qa-2011-10-14-whats-new-in-gcd.html)。这是一个非常棒的高速数据管理工具。但在担心这种优化之前先改进你的基本算法几乎总是更好的。

# facebook - Facebook OAuth 对话框错误

> ID：11725222
> 
> 赞同：0
> 
> 时间：2012-07-30T16:05:13.857
> 
> 标签：facebook

我使用 OAuth 对话框来请求额外的权限。当我第一次在具有权限的 Dilog 页面上单击“取消”按钮时，我根据我的“redirect_uri”成功重定向到。之后，如果我再次尝试请求许可并再次单击“取消”按钮，我将被重定向到 facebook.com/home 页面，而不是我的“redirect_uri”。是 Facebook 错误还是我的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:19:04.663

这是正常行为。如果您的用户一直按*取消*，Facebook 会认为她很困惑并且对应用程序没有兴趣。

# ios - 使用 SpeakHere 示例中的 AudioQueue 和 AQRecorder 录制声音

> ID：11725226
> 
> 赞同：2
> 
> 时间：2012-07-30T16:05:16.853
> 
> 标签：ios, recording, audioqueue

我可以同时运行 2 个 AQRecorder 吗？我想将录音保存到两个文件中，并且我想同时运行两个 AudioQueueRef，可以吗？

谢谢

# php - Opencart 扩展状态和位置设置在哪里？

> ID：11725230
> 
> 赞同：0
> 
> 时间：2012-07-30T16:05:26.837
> 
> 标签：php, opencart

关于打开购物车的快速问题，扩展状态和位置设置在哪里？我可以在代码中看到

```
$postion = $this->config->get($extension . '_position'); 
```

并且

```
'status'      => $this->config->get($extension . '_status') 
```

但是我看不到这些是在哪里定义的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:55:30.027

首先，查看您的扩展文件（例如“payment/free_checkout.php”）并搜索类似的内容

```
$this->model_setting_setting->editSetting( 'free_checkout', $this->request->post); 
```

这是存储到数据库中的设置（如果需要，您可以更深入地设置模型）

之后，打开 admin/index.php 并查看第 38 - 48 行。可以看到，系统从数据库中获取数据并将数据存储到配置对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T17:56:07.307

在 Opencart 中，职位由模块使用。它们在 admin unders extensions/modules 中设置。当您单击保存时 - 它会将它们保存到 modulename_module 下的数据库表 oc_settings

当 Opencart 启动时 - 在 INDEX.php 中有这段代码

```
// Settings
$query = $db->query("SELECT * FROM " . DB_PREFIX . "setting WHERE store_id = '0' OR store_id = '" . (int)$config->get('config_store_id') . "' ORDER BY store_id ASC");

foreach ($query->rows as $setting) {
    if (!$setting['serialized']) {
        $config->set($setting['key'], $setting['value']);
    } else {
        $config->set($setting['key'], unserialize($setting['value']));
    }
} 
```

它创建配置 - 当前商店 ID 的所有设置的大量数组。

之后位置控制器（column_left.php、column_right.php、content_top.php 和 content_bottom.php）遍历表 oc_extension 中的扩展并找到所有需要显示的模块。

然后它通过这个庞大的数组 CONFIG 并收集这些模块的设置 - 这一切都存储在数组 $module_data

然后控制器使用这些设置基本上启动应该显示的模块的每个控制器。它在 foreach 循环中为每个模块传递控制器路由和 $settings，结果得到模块的渲染。

您可以在 php 文件中的任何位置访问配置 - 它可以是另一个控制器、模型甚至 tpl 文件。

```
$this->config->get(...) 
```

如果您愿意 - 您可以直接转到数据库 oc_settings 并使用这些函数从那里获取数据

```
$this->load->model('setting/setting'); // remeber to always load the model.
$this->model_setting_setting->editSetting( 'free_checkout', $this->request->post); 
```

希望这可以帮助。

您也可以使用此模块为您的 opencart 超级简单的 [额外职位无限增加职位数量](http://www.opencart.com/index.php?route=extension/extension/info&token=extension_id=14467)

# html - KendoUI 表 + AngularJS

> ID：11725233
> 
> 赞同：9
> 
> 时间：2012-07-30T16:05:43.263
> 
> 标签：html, angularjs, data-binding, kendo-ui, html-table

我正在尝试实现一个通用表格小部件（使用 KendoUI），并使用 AngularJS 完成数据绑定。表格小部件在 HTML 文件中看起来像这样（这里的小提琴：http: [//jsfiddle.net/mihaichiritescu/ULN36/35/](http://jsfiddle.net/mihaichiritescu/ULN36/35/)）：

```
<div ng:controller="Tester">
    <gridview>
        <div data-ng-repeat="man in people">
            <gridviewcolumn datasource="name" man="man"></gridviewcolumn>
            <gridviewcolumn datasource="age" man="man"></gridviewcolumn>               
        </div>            
    </gridview>
</div> 
```

基本上，该表将有一个 ng-repeat，它将在对象列表中重复，并且对于每个对象，使用“gridviewcolumn”，我将在每一行下添加单元格。这样，我试图复制 KendoUI 表的结构，如下所示：

```
​​&lt;div id="grid">
<div class="k-grid-header"></div>
<div class="k-grid-content">
    <table>
        <colgroup></colgroup>
        <tbody>
            <tr>
                <td></td>
                <td></td>                
            </tr>          
        </tbody>
    </table>
</div>
<div class="k-pager-wrap k-grid-pager"></div>
<div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

因此，使用 ng-repeat，对于每个对象，我将动态添加一个新行，对于每一列，我将在最后添加的行上添加一个新单元格。不幸的是，我无法以正确复制 KendoUI 网格视图的内部结构的方式操作 ng-repeat 指令。我最终得到一个内部表结构，如下所示：

```
​&lt;div id="grid">
<div data-ng-repeat="man in people" class="ng-scope">
    <div datamember="name" man="man" class="ng-binding">name1</div>
    <div datamember="age" man="man" class="ng-binding">21</div>
</div>
<div data-ng-repeat="man in people" class="ng-scope">
    <div datamember="name" man="man" class="ng-binding">name2</div>
    <div datamember="age" man="man" class="ng-binding">25</div>
</div>
<div class="k-grid-header"></div>
<div class="k-grid-content">
    <table>
        <colgroup></colgroup>
        <tbody>
            <tr>
                <td></td>
                <td></td>                
            </tr>          
        </tbody>
    </table>
</div>
<div class="k-pager-wrap k-grid-pager"></div>
<div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

我想以某种方式将 ng-repeat 指令的内容放在表格的主体中，而不是在表格上方。有谁知道如何做到这一点？
我可以使用 jquery 将内容放入单元格中，但我仍然必须从表格主体上方删除/隐藏 ng-repeat 指令及其内容，如果没有一些丑陋的黑客，我不知道该怎么做。
另外，我不一定绑定到 KendoUI gridview，但它看起来比其他的更好看，并且它可能具有与其他 table 小部件相似的内部结构，所以我也会遇到其他小部件的相同问题。
你们对如何使用 AngularJS 实现通用表有一些想法/建议吗？我确实搜索了一些使用 AngularJS 完成的表格，但我没有找到具有良好功能和外观的东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T22:06:37.233

我创建了两个小提琴，它们将展示你想要实现的目标是如何完成的。第一个小提琴使用（[http://jsfiddle.net/ganarajpr/FUv9e/2/）kendoui](http://jsfiddle.net/ganarajpr/FUv9e/2/)的网格......所以它的样式和显示是完整的。唯一需要注意的是，如果模型发生变化，它不会更新。这是因为 kendoui 先获取数据，然后根据一开始提供的模型生成所有 UI 元素。

另一种方法是使用 Kendo 的 UI (css) 并省略生成网格的代码。

[http://jsfiddle.net/ganarajpr/6kdvC/1/](http://jsfiddle.net/ganarajpr/6kdvC/1/)

我相信这更接近你正在寻找的东西。它还演示了在表格中使用 ng-repeat。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-24T01:49:41.890

在 html5 中使用 contenteditable 将很容易为您提供帮助。

# java - Scala 演员效率低下的问题

> ID：11725237
> 
> 赞同：6
> 
> 时间：2012-07-30T16:05:55.883
> 
> 标签：java, scala, jvm, actor

首先让我说我是 Scala 新手；但是，我发现基于 Actor 的并发模型很有趣，因此我尝试将它用于一个相对简单的应用程序。我遇到的问题是，虽然我能够让应用程序工作，但结果远低于基于 Java 的等效解决方案的效率（在实时、CPU 时间和内存使用方面）使用从 ArrayBlockingQueue 中提取消息的线程。我想了解为什么。我怀疑这可能是我缺乏 Scala 知识，并且我导致了所有的低效率，但是在多次尝试重新设计应用程序但没有成功之后，我决定向社区寻求帮助。

我的问题是：我有一个 gzip 压缩文件，其中包含以下格式的多行：

SomeID comma_separated_list_of_values

例如：

1234 12,45,82

我想解析每一行并获得逗号分隔列表中每个值出现次数的总计数。

该文件可能非常大（压缩了几 GB），但每个文件的唯一值数量非常少（最多 500 个）。我认为这将是一个尝试编写基于 Actor 的并发 Scala 应用程序的好机会。我的解决方案涉及创建解析器 Actor 池的主驱动程序。然后，主驱动程序从标准输入读取行，将行传递给解析行并保持值的本地计数的 Actor。当主驱动程序读完最后一行时，它会向每个参与者传递一条消息，指示所有行都已读完。当参与者收到“完成”消息时，他们将他们的计数传递给一个聚合器，该聚合器将所有参与者的计数相加。汇总所有解析器的计数后，主驱动程序会打印出统计信息。

问题：我遇到的主要问题是这个应用程序的低效率令人难以置信。它比使用线程和 ArrayBlockingQueue 的“等效”Java 应用程序使用更多的 CPU 和更多的内存。为了正确看待这一点，以下是我为一个 1000 万行测试输入文件收集的一些统计数据：

Scala 1 Actor（解析器）：

```
 real    9m22.297s
    user    235m31.070s
    sys     21m51.420s 
```

Java 1 线程（解析器）：

```
 real    1m48.275s
    user    1m58.630s
    sys     0m33.540s 
```

Scala 5 演员：

```
 real    2m25.267s
    user    63m0.730s
    sys     3m17.950s 
```

Java 5 线程：

```
 real    0m24.961s
    user    1m52.650s
    sys     0m20.920s 
```

此外，top 报告说 Scala 应用程序的常驻内存大小大约是 10 倍。所以我们在这里谈论的是更多数量级的 CPU 和内存，而性能却要差几个数量级，我只是无法弄清楚是什么原因造成的。是 GC 问题，还是我以某种方式创建的对象副本比我意识到的要多得多？

可能重要或不重要的其他细节：

*   Scala 应用程序由 Java 类包装，因此我可以提供一个自包含的可执行 JAR 文件（我可能想要运行此应用程序的每台机器上都没有 Scala jar）。
*   应用程序被调用如下： gunzip -c gzFilename | java -jar StatParser.jar

这是代码：

主驱动：

```
import scala.actors.Actor._
import scala.collection.{ immutable, mutable }
import scala.io.Source

class StatCollector (numParsers : Int ) {
    private val parsers = new mutable.ArrayBuffer[StatParser]()
    private val aggregator = new StatAggregator()

    def generateParsers {
        for ( i <- 1 to numParsers ) {
            val parser = new StatParser( i, aggregator )
            parser.start
            parsers += parser
        }
    }

    def readStdin {
        var nextParserIdx = 0
        var lineNo = 1
        for ( line <- Source.stdin.getLines() ) {
            parsers( nextParserIdx ) ! line
            nextParserIdx += 1
            if ( nextParserIdx >= numParsers ) {
                nextParserIdx = 0
            }
            lineNo += 1
        }
    }

    def informParsers {
        for ( parser <- parsers ) {
            parser ! true
        }
    }

    def printCounts {
        val countMap = aggregator.getCounts()
        println( "ID,Count" )
        /*
        for ( key <- countMap.keySet ) {
            println( key + "," + countMap.getOrElse( key, 0 ) )
            //println( "Campaign '" + key + "': " + countMap.getOrElse( key, 0 ) )
        }
        */
        countMap.toList.sorted foreach {
            case (key, value) =>
                println( key + "," + value )
        }
    }

    def processFromStdIn {
        aggregator.start

        generateParsers

        readStdin
        process
    }

    def process {

        informParsers

        var completedParserCount = aggregator.getNumParsersAggregated
        while ( completedParserCount < numParsers ) {
            Thread.sleep( 250 )
            completedParserCount = aggregator.getNumParsersAggregated
        }

        printCounts
    }
} 
```

解析器演员：

```
import scala.actors.Actor
import collection.mutable.HashMap
import scala.util.matching

class StatParser( val id: Int, val aggregator: StatAggregator ) extends Actor {

    private var countMap = new HashMap[String, Int]()
    private val sep1 = "\t"
    private val sep2 = ","

    def getCounts(): HashMap[String, Int] = {
        return countMap
    }

    def act() {
        loop {
            react {
                case line: String =>
                    {
                        val idx = line.indexOf( sep1 )
                        var currentCount = 0
                        if ( idx > 0 ) {
                            val tokens = line.substring( idx + 1 ).split( sep2 )
                            for ( token <- tokens ) {
                                if ( !token.equals( "" ) ) {
                                    currentCount = countMap.getOrElse( token, 0 )
                                    countMap( token ) = ( 1 + currentCount )
                                }
                            }

                        }
                    }
                case doneProcessing: Boolean =>
                    {
                        if ( doneProcessing ) {
                            // Send my stats to Aggregator
                            aggregator ! this
                        }
                    }
            }
        }
    }
} 
```

聚合器演员：

```
import scala.actors.Actor
import collection.mutable.HashMap

class StatAggregator extends Actor {
    private var countMap = new HashMap[String, Int]()
    private var parsersAggregated = 0

    def act() {
        loop {
            react {
                case parser: StatParser =>
                    {
                        val cm = parser.getCounts()
                        for ( key <- cm.keySet ) {
                            val currentCount = countMap.getOrElse( key, 0 )
                            val incAmt = cm.getOrElse( key, 0 )
                            countMap( key ) = ( currentCount + incAmt )
                        }
                        parsersAggregated += 1
                    }
            }
        }
    }

    def getNumParsersAggregated: Int = {
        return parsersAggregated
    }

    def getCounts(): HashMap[String, Int] = {
        return countMap
    }
} 
```

在理解这里发生的事情方面可以提供的任何帮助将不胜感激。

提前致谢！

- - 编辑 - -

由于很多人回复并要求提供 Java 代码，因此这是我创建的简单 Java 应用程序，用于比较目的。我意识到这不是很好的 Java 代码，但是当我看到 Scala 应用程序的性能时，我只是快速地写了一些东西来看看基于 Java 线程的实现将如何作为基线执行：

解析线程：

```
import java.util.Hashtable;
import java.util.Map;
import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.TimeUnit;

public class JStatParser extends Thread
{
    private ArrayBlockingQueue<String> queue;
    private Map<String, Integer> countMap;
    private boolean done;

    public JStatParser( ArrayBlockingQueue<String> q )
    {
        super( );
        queue = q;
        countMap = new Hashtable<String, Integer>( );
        done = false;
    }

    public Map<String, Integer> getCountMap( )
    {
        return countMap;
    }

    public void alldone( )
    {
        done = true;
    }

    @Override
    public void run( )
    {
        String line = null;
        while( !done || queue.size( ) > 0 )
        {
            try
            {
                // line = queue.take( );
                line = queue.poll( 100, TimeUnit.MILLISECONDS );
                if( line != null )
                {
                    int idx = line.indexOf( "\t" ) + 1;
                    for( String token : line.substring( idx ).split( "," ) )
                    {
                        if( !token.equals( "" ) )
                        {
                            if( countMap.containsKey( token ) )
                            {
                                Integer currentCount = countMap.get( token );
                                currentCount++;
                                countMap.put( token, currentCount );
                            }
                            else
                            {
                                countMap.put( token, new Integer( 1 ) );
                            }
                        }
                    }
                }
            }
            catch( InterruptedException e )
            {
                // TODO Auto-generated catch block
                System.err.println( "Failed to get something off the queue: "
                        + e.getMessage( ) );
                e.printStackTrace( );
            }
        }
    }
} 
```

司机：

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Hashtable;
import java.util.List;
import java.util.Map;
import java.util.TreeSet;
import java.util.concurrent.ArrayBlockingQueue;

public class JPS
{
    public static void main( String[] args )
    {
        if( args.length <= 0 || args.length > 2 || args[0].equals( "-?" ) )
        {
            System.err.println( "Usage: JPS [filename]" );
            System.exit( -1 );
        }

        int numParsers = Integer.parseInt( args[0] );
        ArrayBlockingQueue<String> q = new ArrayBlockingQueue<String>( 1000 );
        List<JStatParser> parsers = new ArrayList<JStatParser>( );

        BufferedReader reader = null;

        try
        {
            if( args.length == 2 )
            {
                reader = new BufferedReader( new FileReader( args[1] ) );
            }
            else
            {
                reader = new BufferedReader( new InputStreamReader( System.in ) );
            }

            for( int i = 0; i < numParsers; i++ )
            {
                JStatParser parser = new JStatParser( q );
                parser.start( );
                parsers.add( parser );
            }

            String line = null;
            while( (line = reader.readLine( )) != null )
            {
                try
                {
                    q.put( line );
                }
                catch( InterruptedException e )
                {
                    // TODO Auto-generated catch block
                    System.err.println( "Failed to add line to q: "
                            + e.getMessage( ) );
                    e.printStackTrace( );
                }
            }

            // At this point, we've put everything on the queue, now we just
            // need to wait for it to be processed.
            while( q.size( ) > 0 )
            {
                try
                {
                    Thread.sleep( 250 );
                }
                catch( InterruptedException e )
                {
                }
            }

            Map<String,Integer> countMap = new Hashtable<String,Integer>( );
            for( JStatParser jsp : parsers )
            {
                jsp.alldone( );
                Map<String,Integer> cm = jsp.getCountMap( );
                for( String key : cm.keySet( ) )
                {
                    if( countMap.containsKey( key ))
                    {
                        Integer currentCount = countMap.get(  key );
                        currentCount += cm.get( key );
                        countMap.put( key, currentCount );
                    }
                    else
                    {
                        countMap.put(  key, cm.get( key ) );
                    }
                }
            }

            System.out.println( "ID,Count" );
            for( String key : new TreeSet<String>(countMap.keySet( ))  )
            {
                System.out.println( key + "," + countMap.get( key ) );
            }

            for( JStatParser parser : parsers )
            {
                try
                {
                    parser.join( 100 );
                }
                catch( InterruptedException e )
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

            System.exit(  0  );
        }
        catch( IOException e )
        {
            System.err.println( "Caught exception: " + e.getMessage( ) );
            e.printStackTrace( );
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T17:25:31.080

我不确定这对演员来说是一个很好的测试用例。一方面，演员之间几乎没有互动。这是一个简单的 map/reduce，它需要并行性，而不是并发性。

演员的开销也很重，我不知道实际分配了多少线程。根据您拥有的处理器数量，您可能拥有比 Java 程序更少的线程——这似乎是这种情况，因为加速是 4 倍而不是 5 倍。

你编写演员的方式是针对*闲置*演员进行优化的，这种情况下你有成百上千的演员，但在任何时候只有少数人在做实际工作。如果你用`while`/`receive`而不是`loop`/来写演员`react`，他们会表现得更好。

现在，actor 可以很容易地将应用程序分发到多台计算机上，除了您违反了actor 的原则之一：您正在调用actor 对象上的方法。你永远不应该对演员这样做，事实上，Akka 阻止你这样做。这样做的一种更类似于演员的方式是，聚合器向每个演员询问他们的密钥集，计算他们的联合，然后对于每个密钥，要求所有演员发送他们对该密钥的计数。

但是，我不确定演员开销是否就是您所看到的。您没有提供有关 Java 实现的信息，但我敢说您使用可变映射，甚至可能使用单个并发可变映射 - 与您在 Scala 中所做的完全不同的实现。

也没有关于如何读取文件（如此大的文件可能存在缓冲问题）或如何在 Java 中解析的信息。由于大部分工作是读取和解析文件，而不是计算令牌，因此实现中的差异可以轻松克服任何其他问题。

最后，关于常驻内存大小，Scala 有一个 9 MB 的库（除了 JVM 带来的），这可能就是您所看到的。当然，如果您在 Java 中使用单个并发映射，而在 Scala 中使用 6 个不可变映射，那肯定会对内存使用模式产生很大影响。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T17:35:01.203

[Scala 演员](https://github.com/plokhotnyuk/actors/blob/scala-2.10/out1.txt#L152)最后几天让位[Akka 演员](https://github.com/plokhotnyuk/actors/blob/scala-2.10/out1.txt#L62)......还有更多即将到来 - Viktor 正在进一步努力使最后成为最好的：[https ://twitter.com/viktorklang/status/229694698397257728](https://twitter.com/viktorklang/status/229694698397257728)

BTW：开源是强大的力量！这一天应该是所有基于 JVM 的社区的节日：

[http://www.marketwire.com/press-release/azul-systems-announces-new-initiative-support-open-source-community-with-free-zing-jvm-1684899.htm](http://www.marketwire.com/press-release/azul-systems-announces-new-initiative-support-open-source-community-with-free-zing-jvm-1684899.htm)

# r - 在 R 中正确构建函数

> ID：11725238
> 
> 赞同：0
> 
> 时间：2012-07-30T16:05:59.783
> 
> 标签：r, function

我正在编写我的第一个函数（包括任何其他编程语言），我对`if`,`else`和`ifelse`. 我搜索了很多例子，但没有一个对我来说很清楚。

情况 - 我正在尝试根据客户成为客户的时间来衡量客户，然后将其转化为一个因素。

```
#Sample Data
clientID <- round(runif(2,min=2000, max=3000),0)
MonthsSinceSignUp <- round(runif(20,min=1, max=60),0)
df <- data.frame(cbind(clientID,MonthsSinceSignUp)) 
```

对于给定的客户，我想确定他们是否已经这样做了不到一年，超过一年，但不到 2 年，等等。

这是我第一次破解函数：

```
ClientAgeRange <- function(MonthsSinceSignUp) {
  if (MonthsSinceSignUp < 13) {ClientAgeRange <- '1 year'}
} else {
  if (MonthsSinceSignUp > 13 & MonthsSinceSignUps < 25) {ClientAgeRange <- '2 years'}
} else {ClientAgeRage <- '3+ years'} 
```

我不断收到的错误是： `Error: unexpected '}' in "}"`，这表明我缺少或有一个额外的右括号。但是，尽管我遇到了麻烦，但我找不到它。但是 - 我认为总的来说，我没有将正确的结构应用于函数。我正在尝试制作一个`if this, then set this variable as that`. 如何正确构建此功能？

最后 - 如果我想将函数的输出添加到`dataframe`，这样做是`apply`正确的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T16:25:29.110

分两部分回答：

1.  一个提示
2.  一个修复

# 小费：

我的第一个提示是使用进行括号匹配的代码编辑器。例如，在`Notepad++`你得到这个：

*PS。我不推荐`Notepad++`- 改用 Rstudio - 我只是`Notepad++`因为花哨（因此很容易发现）颜色而使用*

![在此处输入图像描述](../Images/ea33ae34ede4fe8dff6dc3c46e0165fa.png)

请注意，突出显示的大括号（红色）与函数中间的大括号匹配。这表明您的 first 末尾有多余的大括号`if`。所以，先解决这个问题：

![在此处输入图像描述](../Images/20512e1cca0edaa7514801ff1da6792e.png)

好的，现在没有匹配的大括号（没有突出显示的红色），因此您需要在函数末尾添加缺少的大括号：

![在此处输入图像描述](../Images/cda4bfde10163d6b3767cec715443e23.png)

* * *

# 修复：

但是，如果您使用`cut`，您可以大大简化您的功能，它旨在进行这种类型的分析：

```
ClientAgeRange <- function(x) {
  cut(x, breaks=c(0, 13, 25, Inf), labels=c("1 year", "2 years", "3+ years"))
} 
```

试试你的代码：

```
ClientAgeRange(df$MonthsSinceSignUp)
 [1] 2 years  1 year   3+ years 2 years  3+ years 3+ years 2 years  2 years  3+ years 3+ years 1 year  
[12] 3+ years 2 years  3+ years 3+ years 3+ years 3+ years 3+ years 3+ years 3+ years
Levels: 1 year 2 years 3+ years 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T16:15:24.547

```
if (MonthsSinceSignUp < 13) {ClientAgeRange <- '1 year'}
} 
```

你有一个额外的 } 这里。

作为一般规则，采用约定来格式化代码是一个好主意。我强烈推荐的一个约定是始终将“块”的主体（这里我使用块作为“{} 内的东西”的通用术语，包括函数主体、if 语句和循环）放在自己的行上， 如下：

```
ClientAgeRange <- function(MonthsSinceSignUp) {
  if (MonthsSinceSignUp < 13) {
    ClientAgeRange <- '1 year'
  } else if (MonthsSinceSignUp > 13 & MonthsSinceSignUps < 25) {
    ClientAgeRange <- '2 years'
  } else {
    ClientAgeRage <- '3+ years'
  }
} 
```

看看这如何让一切变得更清晰？

* * *

至于你的第二个问题，一个没有副作用的函数接受输入、执行操作并返回输出。您现在没有任何返回值，从您的命名约定来看，您似乎有点困惑。

试试这个：

```
ClientAgeRange <- function(MonthsSinceSignUp) {
  if (MonthsSinceSignUp < 13) {
    result <- '1 year'
  } else if (MonthsSinceSignUp > 13 & MonthsSinceSignUps < 25) {
    result <- '2 years'
  } else {
    result <- '3+ years'
  }
  return(result)
} 
```

在 R中`return(`是可选的，但它会帮助你更清楚地思考函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T16:16:24.553

尝试以下操作（请注意，我曾经`else if`使它更简单）：

```
ClientAgeRange <- function(MonthsSinceSignUp) {
  if (MonthsSinceSignUp < 13) {
      ClientAgeRange <- '1 year'
  } else if (MonthsSinceSignUp > 13 & MonthsSinceSignUp < 25) {
      ClientAgeRange <- '2 years'
  } else {ClientAgeRage <- '3+ years'}
} 
```

然后，您可以将其添加到您的数据框中，如下所示：

```
df$ClientAgeRange <- sapply(MonthsSinceSignUp, ClientAgeRange) 
```

正如您所说， apply （我在这种情况下使用了 sapply ；例如，您可以在几个地方阅读有关不同应用功能的[信息](https://stackoverflow.com/questions/3505701/r-grouping-functions-sapply-vs-lapply-vs-apply-vs-tapply-vs-by-vs-aggrega)）是正确的方法。这是因为我们不能简单地将整个向量传递给函数；它需要单个元素进行必要的比较。

# c# - 删除字符串末尾的系列的所有实例

> ID：11725243
> 
> 赞同：3
> 
> 时间：2012-07-30T16:06:21.940
> 
> 标签：c#, regex, string, trim

假设我们有一个返回字符数组定义的程序 - 所以我们可以将它复制粘贴到其他 C# 代码中。一种可能的结果是以下字符串：

```
// Current output:
return "CharArray = { {}, {123}, {}, {3 3}, {111}, {}, {}" + "};"; 
```

现在我们想消除CharArray*末尾*多余的空行，同时在开头或中间保留任何空行：

```
// Desired output:
"CharArray = { {}, {123}, {}, {3 3}, {111}" + "};"; 
```

（由于间距的原因，数据之前或之间的任何空行都是必要的，但最后的空白对我们的代码没有任何用处。）

由于在操作之后才添加最后的括号和分号，因此似乎最简单的方法是从字符串中删除**“，{}”的所有尾随实例。**我目前的解决方案是一个非常开箱即用的替换和修剪组合......

```
// Red-Green solution:
return output.Replace(", {}", "!").TrimEnd('!').Replace("!", ", {}") + "};"; 
```

...它肯定会返回正确的结果，但是冗长，使读者感到困惑，并且很可能使您在第一次阅读时感到畏缩。

此外，我通常用于此类问题的 Regex.Replace 仅删除一个空行（因为字符串末尾仅存在一个），我宁愿不必通过循环提供它：

```
// Sub-par solution: (birdie solution?)
 return Regex.Replace(testString, ", {}$", "") + "};"; 
```

* * *

我怎样才能最好地从字符串*的末尾删除**一系列字符*的所有实例？我更喜欢既可读又不会太慢或对机器造成负担的结果。（据用户目前所知，在他们按下按钮后立即返回。）

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:11:16.903

您可以使用正则表达式：

```
return "\n" + Regex.Replace(testString, "(, {})+$", "") + "};"; 
```

这也将替换多次出现的搜索字符串

运算符`+`表示：前面的表达式出现一次或多次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:26:55.160

试试这个：

```
 string TrimEndMultiple(string str, string end)
    {
        int lenend = end.Length;

        int start = str.Length - lenend;

        while (String.CompareOrdinal(str, start, end, 0, lenend) == 0)
        {
            start -= lenend;
        }

        // Addendum:
        return str.Substring(0, start + lenend);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T17:36:28.357

我试了一下，TrimEndMultiple 快了 20 倍：

```
 [MethodImplAttribute(MethodImplOptions.NoInlining)] 
    static string TrimEndMutiple(string str, string end)
    {
        int lenend = end.Length;

        int start = str.Length - lenend;

        while (String.CompareOrdinal(str, start, end, 0, lenend) == 0)
        {
            start -= lenend;
        }

        return str.Substring(0, start + lenend);
    } 

    static void Main(string[] args)
    {
        string s = "CharArray = { {}, {123}, {}, {3 3}, {111}, {}, {}";

        Regex reg = new Regex("(, {})+$", RegexOptions.Compiled);

        string s1 = reg.Replace(s, "");
        string s2 = TrimEndMutiple(s, ", {}");

        Stopwatch watch = new Stopwatch();

        int count = 1000 * 100;

        watch.Start();

        for (int i = 0; i < count; i++)
        {
            s1 = reg.Replace(s, "");
        }

        watch.Stop();

        Console.WriteLine("{0} {1,9:N3} ms", s1, watch.ElapsedTicks * 1000.0 / Stopwatch.Frequency);

        watch.Restart();

        for (int i = 0; i < count; i++)
        {
            s2 = TrimEndMutiple(s, ", {}"); 
        }

        watch.Stop();

        Console.WriteLine("{0} {1,9:N3} ms", s2, watch.ElapsedTicks * 1000.0 / Stopwatch.Frequency);
    } 
```

结果：

```
CharArray = { {}, {123}, {}, {3 3}, {111}   298.014 ms
CharArray = { {}, {123}, {}, {3 3}, {111}    15.495 ms 
```*

# json - wcf json 响应数组/列表

> ID：11725244
> 
> 赞同：1
> 
> 时间：2012-07-30T16:06:23.043
> 
> 标签：json, wcf

我正在开发一个 wcf-webservice。消费者可以在 atom-response 和 json-response 之间进行选择。

我的 OperationContract 如下所示：

```
[OperationContract]
    [WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json, UriTemplate = "json/json")]
    Result GetData(); 
```

Result-Type 包含一些字符串和一组条目。

```
 [DataContract]
public class Result
{
    [DataMember]
    public string baseUrl;
    [DataMember]
    public string url;
    [DataMember]
    public string title;
    [DataMember]
    public int totalResults;
    [DataMember]
    public JsonEntries[] resources;
} 
```

我也将 JsonEntries 标记为 DataContract：

```
 [DataContract]
public class JsonEntries
{
    [DataMember]
    public string updated;
    [DataMember]
    public string key;
    [DataMember]
    public string title;
    [DataMember]
    public Salary salarie;
} 
```

但是，当我尝试运行它时，我收到错误，即无法调用元数据。当我删除`[DataMember]`数组前面的时，我没有收到错误，但我的响应不包含数组。我已经在各种示例中看到它像这样工作。那我做错了什么？

提前致谢。

罗比德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T22:21:28.123

应该可以，这是我的代码示例

数据合同

```
[DataContract]
public class Result
{
    [DataMember]
    public int totalResults;
    [DataMember]
    public JsonEntries[] resources;
}

[DataContract]
public class JsonEntries
{
    [DataMember]
    public string title;
} 
```

运营合同

```
[OperationContract]
[WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json, UriTemplate = "getdata")]
Result GetData();

    public Result GetData()
    {
        var jsonEntries = new List<JsonEntries>
            {
                new JsonEntries {title = "1"},
                new JsonEntries {title = "2"},
                new JsonEntries {title = "3"}
            }.ToArray();
        return new Result
        {
            resources = jsonEntries,
            totalResults = 1
        };
    } 
```

我接电话

```
 private Bag<T> GetData<T>(string uri)
    {
        try
        {
            var request = (HttpWebRequest) WebRequest.Create(uri);
            request.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate;
            request.Headers[HttpRequestHeader.Authorization] = _authorizationData;
            var response = (HttpWebResponse) request.GetResponse();
            Stream stream = response.GetResponseStream();
            var localStream = new MemoryStream();
            CopyStream(stream, localStream);
            stream.Close();
            var result = JsonContractExtensions.Create<T>(localStream);
            return new Bag<T>(result);
        }
        catch (WebException ex)
        {
            _log.Debug(ex);
            return Bag<T>.Empty;
        }
        catch (Exception ex)
        {
            _log.Debug(ex);
            return Bag<T>.Empty;
        }
    } 
```

# java - 突然无法从eclipse导出到war文件

> ID：11725249
> 
> 赞同：1
> 
> 时间：2012-07-30T16:06:43.467
> 
> 标签：java, eclipse, servlets

我整个早上都在研究这个 Servlet 项目，现在突然我无法让 eclipse 将项目导出到 war 文件。我尝试重新启动 eclipse 并清理项目，但我得到了相同的结果。有任何想法吗？

```
org.eclipse.core.runtime.CoreException: Extended Operation failure: 
org.eclipse.jst.j2ee.internal.web.archive.operations.WebComponentExportOperation
    at org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWizard.performFinish(DataModelWizard.java:182)
    at org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:742)
    at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:373)
    at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:618)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:227)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3682)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3293)
    at org.eclipse.jface.window.Window.runEventLoop(Window.java:820)
    at org.eclipse.jface.window.Window.open(Window.java:796)
    at org.eclipse.ui.actions.ExportResourcesAction.run(ExportResourcesAction.java:180)
    at org.eclipse.ui.actions.BaseSelectionListenerAction.runWithEvent(BaseSelectionListenerAction.java:168)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:546)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:490)
    at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:402)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3682)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3293)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2389)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2353)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2219)
    at org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:106)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:169)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:508)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:447)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1173)
org.eclipse.core.runtime.CoreException[0]: org.eclipse.core.commands.ExecutionException: Error exportingWar File
    at org.eclipse.jst.j2ee.internal.archive.operations.J2EEArtifactExportOperation.execute(J2EEArtifactExportOperation.java:103)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl$1.run(DataModelPausibleOperationImpl.java:376)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1797)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(DataModelPausibleOperationImpl.java:401)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(DataModelPausibleOperationImpl.java:352)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.doExecute(DataModelPausibleOperationImpl.java:242)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.executeImpl(DataModelPausibleOperationImpl.java:214)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.cacheThreadAndContinue(DataModelPausibleOperationImpl.java:89)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.execute(DataModelPausibleOperationImpl.java:202)
    at org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWizard$1$CatchThrowableRunnableWithProgress.run(DataModelWizard.java:211)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)
Caused by: org.eclipse.jst.j2ee.commonarchivecore.internal.exception.SaveFailureException: IWAE0017E Unable to replace original archive: C:\Users\mark\uploads\myfirstjsp.war
    at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ArchiveImpl.cleanupAfterTempSave(ArchiveImpl.java:322)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ArchiveImpl.saveAsNoReopen(ArchiveImpl.java:1182)
    at org.eclipse.jst.j2ee.internal.web.archive.operations.WebComponentExportOperation.export(WebComponentExportOperation.java:54)
    at org.eclipse.jst.j2ee.internal.archive.operations.J2EEArtifactExportOperation.execute(J2EEArtifactExportOperation.java:95)
    ... 10 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:32:16.077

好吧，我想我应该已经阅读了整个错误，因为它确实说问题是它无法写入文件。有趣的部分是导致文件被锁定的原因。Firefox 已打开该文件，因此 Eclipse 无法写入该文件。我不知道为什么 firefox 会打开文件，尽管我正在使用它来将 war 文件上传到服务器。

# php - PHP preg_replace：有条件地插入空格

> ID：11725257
> 
> 赞同：-1
> 
> 时间：2012-07-30T16:07:11.493
> 
> 标签：php, regex

在 PHP 中，我想在每个之后插入一个空格，`<`但前提是已经没有空格。

我试过：

```
preg_replace('/<\S/', '< ', $data); 
```

这适用于一个单一的`<`但如果我有`<<`它不再工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T16:17:19.620

正如@Summoner 指出的那样，您当前的正则表达式将a 后面的字符*替换*`<`为空格而不是*插入*空格。好吧，这两个问题（替换和代码不能在类似的东西上运行`<<`）都可以用一个解决方案来解决：[lookaheads](http://www.regular-expressions.info/lookaround.html)。试试这个代码：

```
preg_replace('/<(?!\s)/', '< ', $data); 
```

# jax-rs - jaxrs 使用不同的 bean 配置多个 jaxrs:server 标签

> ID：11725259
> 
> 赞同：1
> 
> 时间：2012-07-30T16:07:21.377
> 
> 标签：jax-rs

此问题与 JAX-RS 配置有关。

我为单个类配置了 JAX-RS。配置工作正常。

```
@Path(/bean1/)
@Produces("application/xml")
public class class1 {
    @POST
    @Consumes(MediaType.APPLICATION_XML)
    @Produces(MediaType.APPLICATION_XML)
    @Path(/m1)
    public String method1(JAXBElement<String> request) {
    }

    @POST
    @Consumes(MediaType.APPLICATION_XML)
    @Produces(MediaType.APPLICATION_XML)
    @Path(/m2)
    public String method2(JAXBElement<String> request) {
    }
} 
```

下面是 jaxrs:server 标签

```
<jaxrs:server id="bean1" address="/">
    <jaxrs:serviceBeans>
    <ref bean="class1" />
    </jaxrs:serviceBeans>
    <jaxrs:extensionMappings>
    <entry key="xml" value="application/xml" />
    </jaxrs:extensionMappings>
</jaxrs:server> 
```

我可以通过 Apache Jersey 客户端调用 URL“/bean1/m1”

* * *

现在，我想用 JAX-RS 配置另一个类。因此，我添加了如下配置

```
@Path(/bean2/)
@Produces("application/xml")
public class class2 {
    @POST
    @Consumes(MediaType.APPLICATION_XML)
    @Produces(MediaType.APPLICATION_XML)
    @Path(/m3)
    public String method3(JAXBElement<String> request) {
    }
} 
```

我添加了另一个 jaxrs:server 标签和指定的地址。有效配置是

```
<jaxrs:server id="bean1" address="/bean1">
    <jaxrs:serviceBeans>
    <ref bean="class1" />
    </jaxrs:serviceBeans>
    <jaxrs:extensionMappings>
    <entry key="xml" value="application/xml" />
    </jaxrs:extensionMappings>
</jaxrs:server>
<jaxrs:server id="bean2" address="/bean2">
    <jaxrs:serviceBeans>
    <ref bean="class2" />
    </jaxrs:serviceBeans>
    <jaxrs:extensionMappings>
    <entry key="xml" value="application/xml" />
    </jaxrs:extensionMappings>
</jaxrs:server> 
```

我再次尝试使用 URL“/bean1/m1”调用 Web 服务。

但是，我收到一个错误没有找到匹配请求路径 /m1 的根资源。

请求帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T22:02:33.393

查看您的配置，您现在有一个映射到：

```
/bean1/bean1/m1

/bean2/bean2/m3 
```

你可能想做这样的事情：

```
<jaxrs:server id="server" address="/">
  <jaxrs:serviceBeans>
    <ref bean="class1" />
    <ref bean="class2" />
  </jaxrs:serviceBeans>
  <jaxrs:extensionMappings>
    <entry key="xml" value="application/xml" />
  </jaxrs:extensionMappings>
</jaxrs:server> 
```

如果需要，您可以为同一服务器定义 2 个 servicebean。那应该给你你想要的。

# mysql - 从多个表中获取带时间戳的计数

> ID：11725262
> 
> 赞同：0
> 
> 时间：2012-07-30T16:07:30.200
> 
> 标签：mysql, join, count, timestamp

我有一个节点表：

```
nid type  created   status
2   blog  134292319 1
3   forum 134292536 1
4   blog  135921392 0 
```

为了绘制随时间变化的已发布 (status=1) 节点的数量，我执行以下查询：

```
SELECT created, type
FROM node WHERE status = 1
ORDER BY created 
```

然后，我在 PHP 中浏览这个数据集，将其分成带有时间戳的组，每个组都有一个节点计数。结果被缓存，因此执行缓慢不是问题。

我还有一张评论表：

```
nid timestamp status
2   134292363 1
3   134293234 1 
```

我想将*论坛*评论计数合并到节点计数图中。

要获得评论计数，我会运行以下查询：

```
SELECT timestamp
FROM comments
INNER JOIN node ON comments.nid = node.nid
WHERE
  node.type = 'forum'
  AND comments.status = 1
ORDER BY timestamp 
```

我需要以某种方式将这两个查询结合起来，最终得到（对于给出的示例）：

```
created   type
134292319 blog
134292536 forum
134293234 forum_comment 
```

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:59:47.093

这将为您提供示例输出，但根据您对问题的描述，我不确定它是否正是您正在寻找的内容。

```
SELECT created, type FROM
(
   SELECT created, type
   FROM node WHERE status = 1

   UNION ALL

   SELECT timestamp as created, 'forum_comment' as type
   FROM comments
   INNER JOIN node ON comments.nid = node.nid
   WHERE node.type = 'forum'
     AND comments.status = 1
) AS U
ORDER BY U.created 
```

# java - 将参数从 Java Applet 传递到 Javascript

> ID：11725266
> 
> 赞同：1
> 
> 时间：2012-07-30T16:07:35.373
> 
> 标签：java, classpath

我正在使用 JSObject 将值从我的 Applet 传递给 Javascript 函数，但是当我编译 java applet 时，出现错误

```
error: package netscape.javacript does not exist
import netscape.javascript.JSObject; 
```

发生这种情况是因为在我的类路径中我没有传递他的 .jar 文件的路径

如何在我的类路径中传递 2 个 jar 文件？我需要 grfingerjava.jar 和另一个。我怎样才能做到这一点 ？

```
javac -source 1.4 -target 1.4 -nowarn -classpath "C:\Program Files\Griaule\Fingerprint SDK 2009\bin\grfingerjava.jar" src\com\griaule\fingerprintsdk\appletsample\*.java -d "%INSTALLDIR%" 
```

# c# - 这是 MVC 反模式吗？

> ID：11725269
> 
> 赞同：3
> 
> 时间：2012-07-30T16:07:49.190
> 
> 标签：c#, asp.net-mvc-3, design-patterns, response, dto

我对任何类型的 .NET Web 开发都很陌生（到目前为止，我主要使用 Winforms 和服务。）我已经开始与其他两个开发人员一起开发现有的 MVC3 项目。我在概念上熟悉 MVC，并试图了解它在这个项目中的使用方式。

我们有一个 AccountDto 类来表示 Accounts。每个Entity都有一个Response类被另一个类继承，即AccountResponse：

```
public class Response
{
    [DataMember]
    public bool IsSuccess{get;set;}

    [DataMember]
    public string DisplayMessage { get; set; }

    [DataMember]
    public string DetailedMessage { get; set; }

    [DataMember]
    public ErrorType ErrorType { get; set; }

    public Response(){
        this.IsSuccess=true;
        this.ErrorType = ErrorType.None;
    }
}

public partial class AccountResponse : Response
{
    [DataMember]
    public IList<AccountDto> AccountList { get; set; }
} 
```

有一个 AccountService 将向控制器返回一个 AccountResponse，其中包含 AccountDto 对象的列表：

```
public AccountResponse GetAccountByAccountId(Int64 accountId)
{
    _logger.Info("Executing GetAccountByAccountId()");
    AccountResponse response = new AccountResponse();

    try
    {
        Account item = AccountPersistence.GetAccountByAccountId(accountId);
        AccountDto dto = Mapper.Map<AccountDto>(item);

        response.AccountList = new List<AccountDto>() { dto };
        response.IsSuccess = true;
    }
    catch (Exception ex)
    {
        response.IsSuccess = false;
        response.ErrorType = ErrorType.GeneralFault;
        response.DetailedMessage = ex.ExceptionMessageBuilder();
        response.DisplayMessage = "System Failure: Failed to get Account by AccountId";
        _logger.Error(ex);
    }
    return response;
} 
```

有人告诉我 Response 的实现是为了能够处理成功/失败消息。因此，在控制器中，有如下代码（如果发生故障，不会发生任何特殊情况）：

```
public ActionResult ToBeCalled(int id)
{
    AccountDto dto = null;
    var response = _accountService.GetAccountByAccountId(Convert.ToInt64(id));
    if (response.IsSuccess)
    {
        dto = response.AccountList[0];
        return View(dto);
    }
    return View(dto);
} 
```

尽管我不确定将在哪里使用成功/错误消息，但这对我来说很有意义。但是，他们现在想从在视图中使用 DTO 切换到使用响应，因此必须在视图中处理成功/失败：

```
public ActionResult ToBeCalled(int id)
{
    var response = _accountService.GetAccountByAccountId(Convert.ToInt64(id));
    return View(response);
} 
```

这对我来说似乎是 - 而不是针对作为模型的 DTO 进行编码，我必须为每个页面执行以下操作：

```
@{
    if (Model.IsSuccess)
    {
        var account = Model.AccountList.FirstOrDefault();

        if (account != null)
        {
            @Html.HiddenFor(x => account.AccountNumber)
        }
} 
```

控制器的 ActionResult / HttpPost 方法还必须从这些 Response 对象中解析 DTO。这对我来说似乎是一种反模式。这样的做法正常吗？

抱歉，如果这太长了，如果它属于 Code Review 或其他站点，请迁移。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T17:44:38.040

我同意你的观点，这将是一种反模式。视图应该是非常无知的，尤其是像这样的逻辑。

如果成功和失败之间的区别只是 UI 的一小部分，我可以理解为什么这很诱人，但想象一下，如果这种情况发生了变化。视图几乎没有能力（没有不必要的部分嵌套）切换到完全不同的视图。它*无法*发出重定向或其他错误代码。如果您决定更改您的 UI，您可能需要返回并再次重写您的控制器。

如果将逻辑移动到视图背后的原因是`response.IsSuccess`从 Controller 中删除逻辑（老实说，这对我来说似乎很好；它与经典几乎相同），您可以考虑另一种方法：将您的类`Model.IsValid`重构为`Response`继承自`ActionResult`。然后你可以将该逻辑移动到`ExecuteResult()`方法中，它将与你的控制器分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:51:44.157

只需使用 coalesce 运算符，您就可以摆脱一大堆杂乱无章的东西（比如那个奇怪的 Response 基类（如果它继续存在，则应该标记为抽象））并避免空值检查。

```
public ActionResult ToBeCalled(int id)
{
    var response = _accountService.GetAccountByAccountId(id) ??
        new AccountResponse();
    return View(response);
} 
```

更好的是，将该逻辑迁移到您的服务类中，以便它保证对象的返回（当没有支持实体时，存储库这样做不一定有意义，但它适用于服务）。

无论哪种方式，您都不需要在视图中包含难看的空检查或 if/else 逻辑。将尽可能多的逻辑移到可以测试的地方，你会更快乐。

# position - Surface 2.0 ScatterViewItem.Center 加载项目并检查项目是否在同一位置

> ID：11725270
> 
> 赞同：0
> 
> 时间：2012-07-30T16:07:49.637
> 
> 标签：position, pixelsense, scatterview

我有一个问题：

我捕获`ScatterViewItems`:`Center.X`和`Center.Y`的位置`Orientation`。

例如：

*   项目1：X：595,037655575406 Y：322,207060644012 方向：0,660569393375486

*   项目2：X：606,055258773819 Y：327,601041845081 方向：180,591312945756

如果我通过代码加载项目，则位置不一样（它似乎移动了几个像素）。

下一个问题是：我想检查两个项目是否完全相同。

如果为 true，则引发事件并锁定项目。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:18:56.720

回读时使用 ActualCenter 属性和 ActualOrientation 属性。

中心搬家了？检查 ScatterView 相同位置的边距？

```
Vector v = item1.ActualCenter - item2.ActualCenter;
if (v.Length < 10) //within 10 pixel distance
{
      //Raise your event
      item1.CanMove = item2.CanMove = item2.CanRotate = item2.CanRotate = false;
} 
```

# javascript - Javascript文件阅读器

> ID：11725272
> 
> 赞同：3
> 
> 时间：2012-07-30T16:07:52.993
> 
> 标签：javascript, filereader

我可能只是不了解文件阅读器 api，但是

当我尝试运行时：

```
for (var i = 0, f1, f2; f1 = files[sorted_index[i]], f2 = files[sorted_index[i+1]]; i=i+2) {
    var file_one;
    var file_two;

    if(f1.size < f2.size){
        file_one = f1;
        file_two = f2;
    } else {
        file_one = f2;
        file_two = f1;
    }

    var file_one_contents;
    var file_two_contents;

  var reader = new FileReader();
  reader.readAsText(file_one);
  reader.onload = readSuccess;

  function readSuccess(evt){
    file_one_contents = evt.target.result;
  }
  var reader = new FileReader();
    reader.readAsText(file_two);
    reader.onload = readSuccess2;

  function readSuccess2(evt2){
    file_two_contents = evt2.target.result;
  }

    console.log(file_one_contents);
    console.log(file_two_contents); 
```

控制台日志仅包含*undefined*。脚本的目标是读取两个 CSV，并从这对文件中获取数据并进行一些计算。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T16:08:59.143

API 是**异步**的。操作完成时会调用“成功”函数，这不会立即生效。

将您的`console.log()`调用移至处理函数**内部。**

*编辑*——如果你需要等到两个文件都准备好后才开始做，你可以这样做：

```
 var countdown = 2;

  var reader = new FileReader();
  reader.readAsText(file_one);
  reader.onload = readSuccess;

  function readSuccess(evt){
    file_one_contents = evt.target.result;
    countdown--;
    if (countdown === 0) go();
  }
  var reader = new FileReader();
    reader.readAsText(file_two);
    reader.onload = readSuccess2;

  function readSuccess2(evt2){
    file_two_contents = evt2.target.result;
    countdown--;
    if (countdown === 0) go();
  } 
```

当然，还有更复杂的方法可以做到这一点，但这个简单的技巧只是等到计数器为零后再调用“go()”，它表示处理文件的函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T16:25:56.923

我有一个类似的问题，它通过使用“.onloadend”而不是“onload”解决了文件读取等待。在下面的代码中，x 绑定到一个“div”元素

```
reader.onloadend = function (evt) {
    x.innerHTML = evt.target.result;
} 
```

使用“onload”，这一切都是未定义的。

# php - 在搜索引擎中使用多个表？

> ID：11725273
> 
> 赞同：0
> 
> 时间：2012-07-30T16:07:54.373
> 
> 标签：php, mysql, database

为了清理和整理我的代码，我想添加多个带有字段的表：

```
id 
title 
description
keywords
link 
```

但我也希望它们在部分中，所以在 MySql 中我想要不同的表格，例如：“新闻”、“社交网络”和“购物”，但我怎样才能得到呢？这是我的代码：

```
<?php
 if( count($terms) == 0){ // If no terms entered, stop.
echo "No Search Terms Entered.";
}else{      
// connect
    $connect = mysql_connect("XXX", "XXX", "YYY") or die('Couldn\'t connect to MySQL Server: ' . mysql_error());
    mysql_select_db("theqlickcom_774575_db1", $connect ) or die('Couldn\'t Select the database: ' . mysql_error( $connect ));

/* Query Statement Building - Terms together */
$query = " SELECT * FROM scan WHERE "; 

$terms = array_map('mysql_real_escape_string', $terms);
$i = 0; 
foreach ($terms as $each) {
      if ($i++ !== 0){
            $query .= " AND ";
      }
      $query .= "keywords LIKE '%{$each}%'";
}

$query = mysql_query($query) or die('MySQL Query Error: ' . mysql_error( $connect ));
$numrows = mysql_num_rows($query);
if ($numrows > 0) {

      while ($row = mysql_fetch_assoc($query)) {
            $id = $row['id'];
            $title = $row['title'];
            $description = $row['description'];
            $keywords = $row['keywords'];
            $link = $row['link'];

        echo '<h2><a class="ok" href="' . $link . '">' . $title . '</a></h2>' . PHP_EOL;
                    echo '<p class="kk">' . $description . '<br><br><span class="keywords">' . PHP_EOL;            
                    echo '<p><a class="okay" href="' . $link . '">' . $link . '<br><br><span class="keywords">' . PHP_EOL;
                      }
} else {
    /* Query Statement Building - Terms Separate */
    $query = " SELECT * FROM scan WHERE "; 

    $terms = array_map('mysql_real_escape_string', $terms);
    $i = 0; 
    foreach ($terms as $each) {
          if ($i++ !== 0){
                $query .= " OR ";
          }
          $query .= "keywords LIKE '%{$each}%'";
    }

    $query = mysql_query($query) or die('MySQL Query Error: ' . mysql_error( $connect ));
    $numrows = mysql_num_rows($query);
    if ($numrows > 0) {

          while ($row = mysql_fetch_assoc($query)) {
                $id = $row['id'];
                $title = $row['title'];
                $description = $row['description'];
                $keywords = $row['keywords'];
                $link = $row['link'];

                echo '<h2><a class="ok" href="' . $link . '">' . $title . '</a></h2>' . PHP_EOL;
                echo '<p class="kk">' . $description . '<br><br><span class="keywords">' . PHP_EOL;            
                echo '<p><a class="okay" href="' . $link . '">' . $link . '<br><br><span class="keywords">' . PHP_EOL;
                  }

    } else {
          echo "No results found for \"<b>{$k}</b>\""; 
    }
}
//disconnect
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:44:18.190

如果您必须用一个查询搜索多个表

[1.](http://php.net/manual/en/mysqli.multi-query.php)使用mysqli

2.在查询中使用UNION ALL

1.  连接表

2.  使用mysql程序

# matlab - 计算一个矩阵，将一个四边形转换为二维中的另一个四边形

> ID：11725274
> 
> 赞同：6
> 
> 时间：2012-07-30T16:07:57.067
> 
> 标签：matlab, computer-vision, robotics, numerical-methods, projective-geometry

在下图中，目标是计算单应矩阵 H，它将点 a1 a2 a3 a4 转换为对应的 b1 b2 b3 b4。那是：

```
[b1 b2 b3 b4] = H * [a1 a2 a3 a4] 
```

您建议哪种方法是计算 H(3x3) 的最佳方法。a1...b4 是在齐次坐标系中表示的 2D 点（即 [a1_x a1_y 1]', ...）。 **编辑**：对于这些类型的问题，我们使用 SVD，所以我想看看如何在 Matlab 中简单地完成。

**编辑**：

这是我**最初**尝试在 Maltlab 中使用 svd (H=Q/P) 解决它的方法。考虑给定示例的以下代码

```
px=[0 1 1 0];  % a square
py=[1 1 0 0];

qx=[18 18 80 80];    % a random quadrangle
qy=[-20 20 60 -60];
if (DEBUG)
  fill(px,py,'r');
  fill(qx,qy,'r');
end

Q=[qx;qy;ones(size(qx))];
P=[px;py;ones(size(px))];
H=Q/P;
H*P-Q
answer:
   -0.0000         0         0         0         0
  -20.0000   20.0000  -20.0000   20.0000    0.0000
   -0.0000         0         0         0   -0.0000 
```

我期望答案是一个**空矩阵**，但它不是！...这就是我在 StackOverflow 中问这个问题的原因。现在，我们都知道这是一个**射影变换**，显然不是欧几里得。但是，很高兴知道在一般情况下是否可以仅使用 4 个点来计算此类矩阵。

![矩阵计算](../Images/08636c85f42ae7462df99905597a3558.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:24:16.663

您可以尝试`cp2tform`从控制点对推断空间变换的函数。由于在您的情况下没有保留并行，因此您应该将 设置`transformtype`为“投影”。更多信息在[这里](http://www.mathworks.com/help/toolbox/images/ref/cp2tform.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:40:34.017

为此，您可以使用[DLT 算法。](http://en.wikipedia.org/wiki/Direct_linear_transformation)[在Peter Kovesi 的主页](http://www.csse.uwa.edu.au/~pk/research/matlabfns/)中有 MATLAB 例程可用于执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T23:42:50.813

使用您发布的数据：

```
P = [px(:) py(:)];
Q = [qx(:) qy(:)]; 
```

计算转换：

```
H = Q/P; 
```

应用转换：

```
Q2 = H*P; 
```

比较结果：

```
err = Q2-Q 
```

输出：

```
err =
   7.1054e-15   7.1054e-15
  -3.5527e-15  -3.5527e-15
  -1.4211e-14  -2.1316e-14
   1.4211e-14   1.4211e-14 
```

对于所有意图和目的而言，这都是零。

* * *

## 编辑：

因此，正如您在评论中指出的那样，上述方法不会计算 3x3 单应矩阵。它只是用提供的点数一样多的方程求解方程组：

```
H * A = B   -->   H = B*inv(A)   -->   H = B/A (mrdivide) 
```

否则，MATLAB 在图像处理工具箱中有 CP2TFORM 函数。这是一个应用于所示图像的示例：

```
%# read illustration image
img = imread('http://i.stack.imgur.com/ZvaZK.png');
img = imcomplement(im2bw(img));

%# split into two equal-sized images
imgs{1} = img(:,fix(1:end/2));
imgs{2} = img(:,fix(end/2:end-1));

%# extract the four corner points A and B from both images
C = cell(1,2);
for i=1:2
    %# some processing
    I = imfill(imgs{i}, 'holes');
    I = bwareaopen(imclearborder(I),200);
    I = imfilter(im2double(I), fspecial('gaussian'));

    %# find 4 corners
    C{i} = corner(I, 4);

    %# sort corners in a consistent way (counter-clockwise)
    idx = convhull(C{i}(:,1), C{i}(:,2));
    C{i} = C{i}(idx(1:end-1),:);
end

%# show the two images with the detected corners
figure
for i=1:2
    subplot(1,2,i), imshow(imgs{i})
    line(C{i}(:,1), C{i}(:,2), 'Color','r', 'Marker','*', 'LineStyle','none')
    text(C{i}(:,1), C{i}(:,2), num2str((1:4)'), 'Color','r', ...
        'FontSize',18, 'Horiz','left', 'Vert','bottom')
end 
```

检测到角点后，现在我们可以获得空间变换：

```
%# two sets of points
[A,B] = deal(C{:});

%# infer projective transformation using CP2TFORM
T = cp2tform(A, B, 'projective');

%# 3x3 Homography matrix
H = T.tdata.T;
Hinv = T.tdata.Tinv;

%# align points in A into B
X = tformfwd(T, A(:,1), A(:,2));

%# show result of transformation
line(X([1:end 1],1), X([1:end 1],2), 'Color','g', 'LineWidth',2) 
```

结果：

```
>> H = T.tdata.T
H =
      0.74311    -0.055998    0.0062438
      0.44989      -1.0567   -0.0035331
      -293.31       62.704      -1.1742

>> Hinv = T.tdata.Tinv
Hinv =
       -1.924     -0.42859   -0.0089411
      -2.0585      -1.2615   -0.0071501
       370.68       39.695            1 
```

![截屏](../Images/5b569470c83d9f97e64994f8403f5659.png)

我们可以自己确认计算：

```
%# points must be in Homogenous coordinates (x,y,w)
>> Z = [A ones(size(A,1),1)] * H;
>> Z = bsxfun(@rdivide, Z, Z(:,end))   %# divide by w
Z =
          152           57            1
          219          191            1
           62          240            1
           92          109            1 
```

映射到 B 中的点：

```
%# maximum error
>> max(max( abs(Z(:,1:2)-B) ))
ans =
   8.5265e-14 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T19:00:09.587

将所有坐标组合成**列**向量。在二维情况下，它们是：`ax`, `ay`, `bx`, `by`;

定义：

```
A = [ax, ay];
B = [bx, by];
input = [ones(size(A, 1), 1), A]; 
```

计算变换矩阵：

```
H = input \ B; 
```

如果您需要将其应用于新的观察`A_new`：

```
input_new = [ones(size(A_new, 1), 1), A_new];
B_new = input_new * H; 
```

编辑：您也可以`H`通过以下方式计算：`H = inv(input' * input) * input' * B;`但`\`如果安全的话。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T20:29:46.690

[我在回答](https://stackoverflow.com/a/1689899/71131)另一个 SO 问题（包括 MATLAB 解决方案）时讨论了一个相关问题。在链接问题中，输出四边形是一个矩形，但我的回答处理了一般问题。

# c# - 发送图像字节

> ID：11725276
> 
> 赞同：0
> 
> 时间：2012-07-30T16:08:09.697
> 
> 标签：c#, image, sockets

我制作了这段代码来截取屏幕截图-将其转换为字节-将其发送给我的客户，但是当客户收到它时，它变成了一半。

这是代码，它将屏幕截图转换为字节，然后将其发送到我的客户端代码：

```
 public void SendImage()
        {
            int ScreenWidth = Screen.GetBounds(new Point(0, 0)).Width;
            int ScreenHeight = Screen.GetBounds(new Point(0, 0)).Height;
            Bitmap bmpScreenShot = new Bitmap(ScreenWidth, ScreenHeight);

            Graphics gfx = Graphics.FromImage((Image)bmpScreenShot);
            gfx.CopyFromScreen(0, 0, 0, 0, new Size(ScreenWidth, ScreenHeight));
            bmpScreenShot.Save(Application.StartupPath + "/ScreenShot.jpg", ImageFormat.Jpeg);
            byte[] image = new byte[10000*10000*10];
            bmpScreenShot = ResizeBitmap(bmpScreenShot, 300, 300);
            image = ImageToByte(bmpScreenShot);

            sck.Send(image, 0, image.Length, 0);

        } 
```

这是接收代码

```
public void ReceiveImage()
    {

        if (sck.Connected)
        {

            {
                NetworkStream stream = new NetworkStream(sck);
                byte[] data = new byte[10000 * 10000 * 3];
                string receive = string.Empty;
                Int32 bytes = stream.Read(data, 0, data.Length);
                pictureBox1.Image = byteArrayToImage(data);

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:12:03.590

您正在发送 1000 * 1000 * 10 字节并且您正在接收 1000 * 1000 * 3 字节。

还要确保您从流中读取，只要有更多。

一种更安全的方法是首先发送数组的大小。

因此，在将图像转换为 JPG 后，获取字节数，以 4 个字节发送该数量，读取这 4 个字节，准备一个该大小的缓冲区并读取流。

**更多提示**

```
image = ImageToByte(bmpScreenShot);

// get the encoded image size in bytes
int numberOfBytes = image.Length;

// put the size into an array
byte[] numberOfBytesArray = BitConverter.GetBytes(numberOfBytes);

// send the image size to the server
sck.Send(numberOfBytesArray, 0, numberOfBytesArray.Length, 0);

// send the image to the server
sck.Send(image, 0, numberOfBytes, 0); 
```

服务器

```
NetworkStream stream = new NetworkStream(sck);
byte[] data = new byte[4];

// read the size
stream.Read(data, 0, data.Length);
int size = BitConverter.ToInt32(data);

// prepare buffer
data = new byte[size];

// load image
stream.Read(data, 0, data.Length); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T16:13:22.327

首先，这段代码被破坏了：

```
byte[] data = new byte[10000 * 10000 * 3];
Int32 bytes = stream.Read(data, 0, data.Length); 
```

您*假设*您将在一次调用中收到数据`Read`。你不能假设——它是一个*流*协议。您应该循环直到`Read`返回 0... 或在数据前面加上您发送的“消息”的长度。

此外，尚不清楚做什么`ResizeBitmap`或`ImageToByte`做什么，但是当您真的不知道需要多少字节时必须预先分配一个数组很奇怪......

# fdt - 在 AIR 项目中仅编译 .SWF（模块 .SWF）

> ID：11725277
> 
> 赞同：0
> 
> 时间：2012-07-30T16:08:12.107
> 
> 标签：fdt

即使在 AIR 模式下也能够编译 SWF 文件会很酷。

我在 AIR 应用程序上有 SWF 模块，我想在必要时加载/卸载。他们的代码与全球 AIR 应用程序在同一个项目中。似乎我别无选择，只能使用 ant 或创建一个新的（flash）项目来编译那些 SWF，如果即使在 AIR 模式下我也可以编译 SWF，子任务的链式任务就可以完成这项工作。

最后一个选项，为每个模块构建一个 AIR 应用程序，只保留 SWF 文件......不是最好的。

还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:08:12.107

两种方式：

1.  参考项目
2.  创建不启动 .SWF 的属性配置文件和启动器

## 参考项目

创建引用项目并将其用作生成模块的基础是首选方式。有些人只使用一个引用的项目来创建模块，有些人为每个模块使用一个独特的项目。[然后，您可以使用Ant 脚本](http://ant.apache.org/manual/Tasks/copy.html)将 .SWF 移动到您的基础项目中。

![在此处输入图像描述](../Images/2222d951440671e15456ca3b6d602086.png)

## 属性配置文件并且不使用 ADL 启动

由于 AIR 工作流会创建一个 .SWF，因此只需执行此操作并创建不同的配置文件，不要使用 ADL 启动生成的 .SWF。要测试 .SWF，您可以使用[ANT 脚本](http://fdt.powerflasher.com/docs/FDT_Ant_Tasks#fdt.extSWFViewer.startSWF)对其进行测试。

![在此处输入图像描述](../Images/e1e3d0f9b42b9745e39fafd87b0f5cab.png) ![在此处输入图像描述](../Images/41d7f9e6bcc63320f0b61de56c8f1420.png)

# java - 将递归方法更改为迭代

> ID：11725280
> 
> 赞同：0
> 
> 时间：2012-07-30T16:08:18.630
> 
> 标签：java, recursion

我有递归功能，效果很好。问题是当行数很大时它会给出stackoverflow错误。我想把它放在迭代中，可能使用 for 循环。需要一些帮助。

```
private TreeSet validate(int curLine, TreeSet errorSet) {
    int increment = 0;
    int nextLine = 0;

    if (curLine == lines.length || errorSet.size() != 0) {
        return errorSet;
    } else {
        String line = lines[curLine];

        //validation starts.  After validation, line is incremented as per the requirements

        increment = 1 //As per requirement. Depends on validation results of the line

        if (increment > 0) {
            try{
                Thread.currentThread().sleep(100);  
            }catch(Exception ex){
                System.out.println(ex); 
            }
            nextLine = (curLine + increment);
            validate(nextLine, errorSet);
        }
    }

    return errorSet;
} 
```

海报对方法的描述：

该方法确实验证了文本行，如果该行有效，这些行具有必须跳过多少行的说明。因此，如果该行有效，则将使用增量跳过许多行。如果该行无效，增量将为 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:21:23.923

我不确定为什么这首先是递归的。这非常适合使用 FOR 循环。使用类似这样的东西：

```
private TreeSet validate(int curLine, TreeSet errorSet) { 
   int increment = 0;

   if (errorSet.size() != 0)
      return errorSet;

   for (int curLine = 0; curLine < lines.Length; curLine += increment)
   {
      // put your processing logic in here

      // set the proper increment here.
   }
} 
```

如果增量始终为 1，那么您可以只使用`curr++`而不是`curLine += increment`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:22:24.317

```
for(String line : lines) {
  // validate line here

  if(!errorSet.isEmpty()) {
    break;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T17:01:36.553

您的问题的解决方案可能是简单的 for 循环或 while，并带有停止条件的逻辑表达式。通常，当我们必须遍历 Iterable 或数组的所有元素时，我们使用 for 循环。如果我们不知道要执行多少个循环，我们会使用 while 循环。for 循环优于 while 的优点是，我们免费拥有局部变量，因此我们不能在循环之外使用它们，因此我们减少了出现一些错误的可能性。

你的问题是你必须在两个条件下打破程序：

1.  当 errorSet 不为空时。
2.  当行数组不再有项目时。

作为矛盾，我们可以说你的程序应该继续：

1.  直到errorSet为空，
2.  直到行号小于存储它们的数组大小。

这为我们提供了简单的表达方式

1.  `errorSet.isEmpty()`
2.  `lineNumber < lines.length()`

我们可以使用逻辑运算符将它们组合起来，`&&`并在 for 循环中用作停止规则。

```
for(int lineNumber= 0; errorSet.isEmpty() && lineNumber< lines.length(); lineNumber++)  {

   //code to operate

} 
```

笔记：

逻辑表达式通常使用 operator `&&`，以确保对逻辑表达式的每个部分进行评估。另一种方法是`&`，如果为 false，则不要操作更长时间并返回 false。我们可能很想对这个表达式使用这个运算符，但我会是个坏主意。因为当我们遍历所有行时不会生成错误代码`IndexOutOfBoundException`，如果我们切换位置，那么我们将不会进行任何优化，因为第一个表达式将被评估相同的次数。

# mysql - MySQL守护进程问题

> ID：11725281
> 
> 赞同：0
> 
> 时间：2012-07-30T16:08:20.003
> 
> 标签：mysql, database, daemon, dedicated-server

我的 MySQL 守护进程似乎有问题，并且忽略了全局可写配置文件：S

这是我以用户 mysql 运行 mysqld 时的输出：

```
bash-4.2$ mysqld
Warning: World-writable config file '/etc/mysql/my.cnf' is ignored
120730 17:57:34 [Note] Plugin 'FEDERATED' is disabled.
120730 17:57:34 InnoDB: The InnoDB memory heap is disabled
120730 17:57:34 InnoDB: Mutexes and rw_locks use GCC atomic builtins
120730 17:57:34 InnoDB: Compressed tables use zlib 1.2.5
120730 17:57:34 InnoDB: Using Linux native AIO
120730 17:57:34 InnoDB: Initializing buffer pool, size = 128.0M
120730 17:57:34 InnoDB: Completed initialization of buffer pool
InnoDB: Unable to lock ./ibdata1, error: 11 
```

这是我的“my.cnf”文件内容：

```
[client]
port            = 3306
socket          = /var/run/mysqld/mysqld.sock

[mysqld_safe]
socket          = /var/run/mysqld/mysqld.sock

[mysqld]

user        = mysql
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysqld.sock
port            = 3306
basedir         = /usr
datadir         = /var/mysql
tmpdir          = /tmp

key_buffer              = 16M
thread_stack            = 128K
thread_cache_size   = 8
#max_connections        = 100
#table_cache            = 64
#thread_concurrency     = 10
query_cache_limit   = 1M
query_cache_size        = 1024M
sort_buffer=512M
thread_concurrency=32
query_cache_type=2
tmp_table_size=1G

#log            = /var/log/mysql/mysql.log
#log_slow_queries   = /var/log/mysql/mysql-slow.log
#long_query_time = 2
#log-queries-not-using-indexes
#server-id              = 1
#log_bin                        = /var/log/mysql/mysql-bin.log
expire_logs_days        = 10
max_binlog_size         = 100M
#binlog_do_db           = include_database_name
#binlog_ignore_db   = include_database_name
#skip-innodb
# chroot = /var/lib/mysql/
[mysqldump]
quick
quote-names
max_allowed_packet  = 16M

[mysql]
#no-auto-rehash # faster start of mysql but no tab completition

[isamchk]
key_buffer              = 16M 
```

真的不知道去哪里，有人知道如何用 mysqld 输出详细错误吗？或者更好的如何解决这个问题？有任何想法吗？多谢你们 ：）

好的，全局可写配置文件已解决，我现在需要帮助解决这些错误：

```
bash-4.2$ mysqld
120730 18:18:23 [Warning] Can't create test file /var/mysql/ks23085.lower-test
120730 18:18:23 [Warning] Can't create test file /var/mysql/ks23085.lower-test
120730 18:18:23 [Note] Plugin 'FEDERATED' is disabled.
mysqld: Table 'mysql.plugin' doesn't exist
120730 18:18:23 [ERROR] Can't open the mysql.plugin table. Please run mysql_upgrade to create it.
120730 18:18:23 InnoDB: The InnoDB memory heap is disabled
120730 18:18:23 InnoDB: Mutexes and rw_locks use GCC atomic builtins
120730 18:18:23 InnoDB: Compressed tables use zlib 1.2.5
120730 18:18:23 InnoDB: Using Linux native AIO
120730 18:18:23 InnoDB: Initializing buffer pool, size = 128.0M
120730 18:18:24 InnoDB: Completed initialization of buffer pool
120730 18:18:24  InnoDB: Operating system error number 13 in a file operation.
InnoDB: The error means mysqld does not have the access rights to
InnoDB: the directory.
InnoDB: File name ./ibdata1
InnoDB: File operation call: 'create'.
InnoDB: Cannot continue operation. 
```

我不知道这是否与目录未被正确允许或其他原因有关，还是与上次相同的问题？:S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:11:33.487

my.cnf 不应是全局可写（即 **6 或 **7）权限。

这是一个安全漏洞。MySQL 将忽略具有此权限设置的文件。

# windows - 删除多个 zip 中超过这么多天的文件

> ID：11725284
> 
> 赞同：0
> 
> 时间：2012-07-30T16:08:26.870
> 
> 标签：windows, iis, powershell

帮助！

我需要扫描一个包含 200gb 压缩 .log 日志文件的文件夹，并删除所有超过 584 天的文件。

我找到了这个，并在那里留下了回复，但如果有人能在此期间提供帮助，那么谢谢

[http://social.technet.microsoft.com/Forums/en/ITCG/thread/793118fb-8345-4711-9710-9c3e485e6d89?prof=required](http://social.technet.microsoft.com/Forums/en/ITCG/thread/793118fb-8345-4711-9710-9c3e485e6d89?prof=required)

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:31:56.783

使用 SevenZipSharp。首先备份任何重要数据:)

确保阅读并更改任何没有意义的路径等。

```
[Reflection.Assembly]::LoadFile("c:\lib\SevenZipSharp.dll")
[SevenZip.SevenZipExtractor]::SetLibraryPath("c:\lib\7z.dll")
$zipFiles = Get-ChildItem D:\zips\ -Filter "*.zip"
$oldDate = (get-date).AddDays(-584)

$zipFiles | % {
    $compressor = [SevenZip.SevenZipCompressor]("C:\")
    $compressor.ArchiveFormat = "zip"
    $extractor = [SevenZip.SevenZipExtractor]($_.FullName)
    $object = New-Object 'system.collections.generic.dictionary[int,string]'
    $extractor.ArchiveFileData | %{
        if ($_.LastWriteTime -lt $oldDate){
            #null index deletes the file
            $object.add($_.Index,"")
        }
        else {
            $object.add($_.Index,$_.FileName)
        }
    }
    $compressor.ModifyArchive($_.FullName,$object)
} 
```

# c++ - 如何将具有点的向量更改为具有其值的向量

> ID：11725285
> 
> 赞同：0
> 
> 时间：2012-07-30T16:08:37.193
> 
> 标签：c++, vector

我只有一个这样的向量

```
vector<User*> users; 
```

我知道这不是一种好的编程风格......

现在我有一个功能

```
vector<User> getAllUser(void)
{
} 
```

我试过的是

```
vector<User> getAllUser(void)
{
    vector<User> result;
    for (vector<User*>::iterator it = users.begin(); it != users.end(); it++)
    {
        result.push_back(**it);
    }
    return result;
} 
```

但它没有用。

有人可以帮助我吗？非常感谢。我只是 STL 的初学者

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:13:50.833

您的代码应该可以工作，但是您打错了：

```
result.push_bach(**it); 
```

`push_bach`不是 的声明函数`std::vector`，所以我假设这就是错误所在。我建议您使用一个不错的编译器，它应该立即向您指出此错误，而无需通过 stackoverflow。

要修复，请使用正确的方法名称，`push_back`而不是：

```
result.push_back(**it); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:22:49.560

如果你必须使用指针，`std::shared_ptr<User>`在你想使用的地方使用 nice `User*`，并且不要混合和匹配堆和堆栈分配的对象。

如果您真的不需要在任何地方使用指针，请确保`User`具有复制构造函数定义（例如，`User::User(const User& rhs) { /* ... */ }`）

# django - 包含 JS 脚本中的 Django 模板替换

> ID：11725288
> 
> 赞同：0
> 
> 时间：2012-07-30T16:08:46.663
> 
> 标签：django, templates

我为我的 Django 项目编写了一个 javascript 小部件，它包含在我的模板顶部。

```
<script src="{{ STATIC_URL }}/js/widget.js"></script> 
```

小部件需要加载自己的样式表，但由于它实际上不是 Django 模板，所以它不知道静态根在哪里。它是否需要找到相对于自身的 .css，或者 Django 有没有办法告诉它`{{ STATIC_URL }}`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:42:57.293

您可以在 Javascript 中使用相对 URL，这可能更可取，或者您可以定义一个全局变量：

```
<script>var static_url = '{{ STATIC_URL }}';</script>
<script src="{{ STATIC_URL }}/js/widget.js"></script> 
```

然后，您可以`static_url`在 JS 代码中的任何位置使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:37:10.257

我将在您的 settings.py 文件中创建 STATIC_URL 变量，使其在您的整个站点上都可以访问。

```
STATIC_URL = 'https://your.js.server' 
```

# c - 如何让 gcc 警告未知功能？

> ID：11725293
> 
> 赞同：5
> 
> 时间：2012-07-30T16:08:54.000
> 
> 标签：c, linux, gcc

考虑这段代码：

```
int function()
{
  int a = 1 ;
  int b = helper(&a);
  return b ;
}

int main()
{
  function();
  return 0 ;
} 
```

尽管没有声明名为“helper”的函数，但此代码片段使用 gcc 可以毫无问题地编译为目标代码。我知道链接器应该捕捉到这一点，但是我看到了一些模糊的[错误](https://stackoverflow.com/questions/11687508/why-does-c-tolerate-missing-function-declarations/11687573)，一旦包含正确的标头（包含函数声明），这些错误就会解决，尽管链接器和编译器没有产生任何错误。

有许多 gcc 警告似乎相关但实际上并没有达到我想要的效果：-Wmissing-prototypes、-Wmissing-declarations 和 -Wstrict-prototypes。不幸的是，这些警告仅限于在**定义**全局函数时缺少原型，我对在**引用**全局函数时有关缺少原型的警告感兴趣。

有人可以提出替代方案吗？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T16:13:26.467

你想要`-Wimplicit-function-declaration`警告。

就个人而言，我更喜欢使用`-Wall -Wextra`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T16:11:28.440

用于`-Wl,--no-undefined`确保强制`undefined function`错误。

# windows - 可以无缝调用 Windows EXE 的 Bash 脚本，而无需在每个文件名参数上调用 cygpath

> ID：11725306
> 
> 赞同：0
> 
> 时间：2012-07-30T16:09:33.153
> 
> 标签：windows, command-line, cygwin

我有几个程序不是在 Cygwin 上本地安装，而是使用 cygstart + cygpath 来无缝利用这些程序的 Windows 安装。

示例：Gedit、Subversion 1.6.1 等。

我们当然会直接使用 Cygwin 安装程序来安装这些……但是，我们有一些讨厌的要求：

1) 自定义前缀位置，例如 Cygport for GEdit 将安装它`/usr/bin/gedit.exe`而不是`/common/web/bin/gedit.exe`我们需要的位置。

2) 我们需要一个不易从任何 cygwin 存储库访问的版本。

因此，我安装了产品的 Windows 安装程序版本，然后创建了一个透明调用 Windows 程序的 bash 脚本。示例：`/common/web/bin/gedit`是一个 bash 脚本，它将调用`c:\apps\gedit\gedit.exe`

问题是，您不能只`cygpath -w`在每个参数上运行。您必须能够**仅解析文件名参数。**这基本上需要进入每个项目的源代码，找到`int main(int argc, char** argv)`然后逆向工程如何解析每个文件名。

有没有人这样做过？我很想看到一些例子，说明你是如何使用 bash 脚本或 C++ 程序做到这一点的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:28:13.047

经过一点点的实验，我发现这是一个自创的问题。

我的问题是我试图用我自己的 .sh 文件包装 Windows 本机代码。然后，它并没有让 Cygwin 自动将路径转换为写入平台。

对于 svn 1.6.1，这是我为解决此问题所做的：

1.  svn 安装在`c:\apps\svn\1.6.1\`
2.  跑`ln -s /cygdrive/c/apps/svn/1.6.1/bin/svn.exe /common/web/bin/svn.exe`
3.  对所有 SVN exe 重复步骤 2。
4.  此时，`/common/web/bin/svn.exe`它就像是 Cygwin 的一部分一样工作！惊人！

# python - 将数据插入到 pyqt Qtablewidget

> ID：11725309
> 
> 赞同：0
> 
> 时间：2012-07-30T16:09:45.510
> 
> 标签：python, pyqt

我将 mysql 数据插入到 pyqt Qtablewidget 但是当我将数据传递给一个变量时，数据只打印到表中的一个单元格中。有什么建议么？

我的代码：

```
import sys
import MySQLdb as mdb
from PyQt4.QtGui import *
db = mdb.connect('server','user','password','db')

model = db.cursor()
model.execute("""SELECT ip
                    FROM table""")
rows_pong = (model.fetchall())
data = "\n".join(item[0] for item in rows_pong)
print data

lista = [data]
listb = ['ba', 'bb', 'bc']
mystruct = {'A':lista, 'B':listb}

class MyTable(QTableWidget):
    def __init__(self, thestruct, *args): 
        QTableWidget.__init__(self, *args)
        self.data = thestruct
        self.setHorizontalHeaderLabels(['IP Address', 'Username'])
        self.setmydata()

    def setmydata(self):
        for n, key in enumerate(self.data):
            for m, item in enumerate(self.data[key]):
                newitem = QTableWidgetItem(item)
                self.setItem(m, n, newitem)

def main(args):
    app = QApplication(args)
    table = MyTable(mystruct, 100, 3)
    table.show()
    sys.exit(app.exec_())

if __name__=="__main__":
    main(sys.argv) 
```

样本数据（变量中的项目）：

```
10.10.0.171:139

10.10.0.171:139

127.0.0.1:3306

127.0.0.1:20128

127.0.0.1:20129

127.0.0.1:20130

127.0.0.1:20130

127.0.0.1:20131

127.0.0.1:20131

127.0.0.1:61335

127.0.0.1:61561

127.0.0.1:61562

127.0.0.1:61942

127.0.0.1:61943

127.0.0.1:62291

127.0.0.1:62292

127.0.0.1:63093

127.0.0.1:63094 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:16:58.773

它对我来说按预期工作。不确定它是否是预期的，但`lista`由一个项目组成，因为您将查询结果连接到一个字符串中。如果您希望每个 IP 显示在新行中， 请尝试替换`data = "\n".join(item[0] for item in rows_pong)`并`data = [item[0] for item in rows_pong]`更改`lista = [data]`为。`lista = data`

# android - 泰米尔语 unicode 字体文本在 android 中打乱/损坏

> ID：11725310
> 
> 赞同：1
> 
> 时间：2012-07-30T16:09:47.107
> 
> 标签：android, unicode, fonts, tamil

我需要在 android 中使用 unicode 字体而不是`bamini`. 我不想使用脚本来转换和从`bamini`unicode。

```
Typeface fontface2 = Typeface.createFromAsset(this.getAssets(), "fonts/Lohit-Tamil-Classical.ttf");
playBtn.setTypeface(fontface2);
//playBtn.setText(UnicodeUtil.unicode2tsc(getContext().getString(R.string.QUIZ)));
playBtn.setText(Html.fromHtml(getContext().getString(R.string.QUIZ))); 
```

它渲染`tamil`但字符被打乱了。请帮忙修复。

谢谢

马希尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:55:19.463

如果手机不支持 Unicode Tamil（在 ICS aka 4.0 之前），那么您将无法显示 Unicode 脚本。基本上使用 Jelly Bean，Android 没有适当的泰米尔语渲染支持（尽管它首先在 4.0 中提供）。所以基本上不管你使用什么 Unicode 字体，Android OS 都不知道如何塑造和显示它。

这就是为什么人们使用 TypeFace 和非 unicode 字体，例如 Bamini 和 Mylai（TSCII 字体）。

在这里阅读我[详尽的答案和解决方案](https://stackoverflow.com/questions/15267292/tamil-font-in-android/15496145#15496145)

# opencv - OpenCV 视频帧元数据读写

> ID：11725319
> 
> 赞同：1
> 
> 时间：2012-07-30T16:10:29.457
> 
> 标签：opencv, metadata, video-processing

我想以一种计算机可以轻松读取的方式在视频的每一帧中编码日期/时间戳。在我的系统上，帧速率是可变的，因此计算帧数似乎不是一个好的解决方案。我让它在框架上以人类可读的形式（文本）显示日期和时间，但是将其读回计算机似乎并不像我想的那么简单。录制的视频很大（10 GB）并且很长，因此编写文本文件似乎也很麻烦，除了要跟踪一个文件之外。有没有办法在视频中存储逐帧信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:32:02.257

有几种方法可以做到这一点。

1.  如果您的压缩不是很强，您可以在图像的顶部或底部行中编码时间戳。这些可能不包含太多有价值的信息。您可以添加某种形式的纠错（例如 CRC）来纠正压缩器造成的任何损坏。
2.  一个更通用的解决方案（我过去使用过）是让视频文件（例如 AVI）包含另一个单独的文本流。除了 AVI 之外，大多数格式都支持多个流，因为它们用于立体声音频流、子等。这里的缺点是没有很多工具可以让你编写这些流，你必须自己实现（使用相关的 API）为您想要支持的每种视频格式。在某种程度上，这类似于在视频旁边保留一个文本文件，只是此文件内容在同一个视频文件中作为单独的流进行多路复用。

# f# - F# 中的类型提供程序和静态参数

> ID：11725326
> 
> 赞同：3
> 
> 时间：2012-07-30T16:10:40.787
> 
> 标签：f#, literals, type-providers

我有一个库 Library_1，它可以正确编译并定义提供的类型：

```
type modelforexcel =  FSharpx.ExcelFile<@"template.xls", "Brokernet", true> 
```

**当我将此库包含在另一个项目 Library_2 中时，编译器抱怨它在新**Library_2 项目的根目录中找不到任何“Brokernet.template.xls” 。

```
Error   4   'C:\Library_2\template.xls' could not be found. Check the spelling of the file name, and verify that the file location is correct. 
```

我希望类型引用原始的“Brokernet.template.xls”，所以我试图提供它的完整路径，但是

```
type modelforexcel =  
   FSharpx.ExcelFile<__SOURCE_DIRECTORY__+@"Brokernet.template.xls", "Brokernet", true> 
```

不起作用，因为我猜它不是文字（？）但是“显然”定义这个文字也不起作用

```
[<Literal>]
let a = __SOURCE_DIRECTORY__+@"Brokernet.template.xls" 
```

有没有办法定义这样的“动态文字”？

**编辑**

有趣的是，如果我在第一个库的模块中定义我的类型

```
module Load =
   [<Literal>]
   let a = @"Brokernet.template.xls"
   type modelforexcel =  FSharpx.ExcelFile< a , "Brokernet", true> 
```

然后在第二个库中使用第一个库时不会“重新生成”该类型，并且类型提供程序不会抱怨该文件不存在第二个库的根目录。

这为 F# 的编译模型提供了深刻的见解，这可能是大师们最好揭示的。作为一个粗鲁的人，我只想说“代码在模块中”

*PS：我想那是另一个问题，可以通过适当的分阶段编译来解决。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T19:16:28.607

如评论中所示，使用相对路径例如`@"..\Library_1\Brokernet.template.xls"`解决了该问题。

# android - 如何使在不同活动中创建的媒体播放器中的音乐静音？

> ID：11725327
> 
> 赞同：0
> 
> 时间：2012-07-30T16:10:40.803
> 
> 标签：android, android-mediaplayer

我有两个活动，一个最初加载的“Main.java”我有几个创建的媒体播放器，它们控制背景音乐和配音。

第二个活动是“Settings.java”，可通过设置 cog 图标访问，我想在其中使用 On/Off 切换开关来允许用户将两个不同的 mediaPlayer 静音。

问题是，当我尝试在第二个活动中访问 mediaPlayer 名称时，它无法找到它，因为它位于不同的活动中。我知道这是一个相当简单的问题，但这是我的第一个应用程序和第一个 Java 项目。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:13:16.803

您可以保存首选项，例如`'isPlayerOn'`在您的`SettingsActivity`，然后在您`PlayerActivity`的`onResume`. 您可以制作`SettingsActivity extend PreferenceActivity`，这样您就不会在其中编写额外的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:16:55.317

您可以在设置页面上使用它

```
 public void onClick(View v) {

            boolean alertWarning = ((ToggleButton) v).isChecked();

            if (alertWarning) {
                // unMute();
                AudioManager am = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
                am.setStreamMute(AudioManager.STREAM_MUSIC, false);

            } else {
                // mute();
                AudioManager am = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
                am.setStreamMute(AudioManager.STREAM_MUSIC, true);
            } 
```

# java - 从 Class 对象访问静态变量

> ID：11725328
> 
> 赞同：0
> 
> 时间：2012-07-30T16:10:45.510
> 
> 标签：java, arrays, class, casting, subclass

我目前有一个 Class 类型的数组，它只包含 BuildingComplex 类型的子类。它基本上包含允许为我正在创建的游戏构建的所有不同类。

```
private static Class[] AVAILABLE = new Class[]{
   LumberCamp.class, Farm.class, Storehouse.class, Port.class, Barracks.class, Edifice.class
}; 
```

当我想从其中一个类（由于从 BuildingComplex 继承而具有此静态变量的所有类）访问静态变量时，我无法确定如何让 AVAILABLE[i] 访问静态变量，因为我找不到任何可以转换 Class 的资源到特定的班级。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:26:48.437

不确定我是否完全理解你的问题，但你在寻找这样的东西吗？

```
@SuppressWarnings("unchecked")
private static Class<? extends BuildingComplex>[] AVAILABLE = new Class<? extends BuildingComplex>[]{
   LumberCamp.class, Farm.class, Storehouse.class, Port.class, Barracks.class, Edifice.class
}; 
```

# java - 使用 Axis 1.4 部署 Web 服务时如何/在哪里调用 init() 方法？

> ID：11725329
> 
> 赞同：0
> 
> 时间：2012-07-30T16:10:47.260
> 
> 标签：java, web-services, tomcat, init, axis

我在 Tomcat 6 中使用 Axis 1.4 来部署我的 Web 服务。我有这样的课：

```
class helloService{
  ArrayList<String> arr = new ArrayList<String>
  /*Some declarations*/
  public void init(){
     helloService hs= new helloService();
     //File reads,variable initialization and all the init processes
  }

  public void add(int x, int y)
  { return x+y; }
  public void subtract(int x,int y)
  {return x-y;  }
} 
```

我想为客户提供`add()`和`subtract()`，但是要使用这两种方法（请考虑存在一些操作而不是加减法，这是一个示例），需要先调用`init()`方法。

部署 Web 服务时如何调用`init()`方法，因为没有服务器类来调用`init()`与 RPC/RMI 不同的方法？

# python - python：如何检测我的线程何时成为孤儿？

> ID：11725340
> 
> 赞同：6
> 
> 时间：2012-07-30T16:11:33.347
> 
> 标签：python, multithreading, orphan

我有一个使用线程的程序。当我的程序关闭时，我的线程仍在运行，这很正常。我想知道我的线程如何检测到主程序已终止；仅由其本身。我该怎么做？

我的线程处于无限循环并处理队列中的许多对象。我不能将我的线程定义为守护进程，否则我可能会在主程序结束时丢失一些数据。我不希望我的主程序在关闭时设置一个布尔值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T16:37:40.530

如果您可以获得主线程的句柄，则可以调用`is_alive()`它。

或者，您可以调用`threading.enumerate()`以获取所有当前活动线程的列表，并检查主线程是否在其中。

或者，即使那是不可能的，那么您也许可以检查子线程是否是唯一剩余的非守护线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:31:45.817

如果你的经理跟踪有多少打开的线程，然后孩子们在输入饥饿时自杀，这会起作用吗？因此，父级将开始将数据推送到队列中，而工作人员将使用队列中的数据。如果一个工作人员在特定的超时时间内没有在队列中发现任何东西，它就会杀死自己。然后，主线程将跟踪有多少工作人员正在运行，并在活动工作人员的数量低于给定阈值时定期启动新工作人员。

# jquery - 无法让 .next() 工作

> ID：11725342
> 
> 赞同：1
> 
> 时间：2012-07-30T16:11:47.053
> 
> 标签：jquery

我正在尝试添加一个类，以便跨度文本在悬停时显示，但仅适用于该特定图像，而不是一次所有图像。

我可以让它一次将类添加到所有跨度，但是当我尝试将其限制为仅悬停的跨度时，什么也没有发生。问题似乎出在我添加 .next('span') 时 - 尽管我不知道为什么。

谁能告诉我我在这里做错了什么？

```
 $('.scroller-image').hover(function() {

         $(this).next('span').addClass('hover');
         }, function() {
         $(this).next('span').removeClass('hover');

    }); 
```

这是标记：

```
<div class="scroller-image">
    <span>image title</span>
    <img src="#" alt="#" />
</div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T16:12:58.340

[next()](http://api.jquery.com/next/)选择下一个兄弟元素 - 而不是子元素。你想要的是这个 [children()](http://api.jquery.com/children/)

```
$(this).children('span')// <-- this find direct children spans 
```

或[查找（）](http://api.jquery.com/find/)

```
$(this).find('span')  //<-- this finds all descendent spans 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T16:13:21.903

`.next()`找到兄弟姐妹，而不是孩子。尝试`$(this).children('span')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T16:13:46.420

[`.toggleClass()`](http://api.jquery.com/toggleClass/)您可以使用并通过提供`this`选择器的上下文来稍微缩短代码。像这样：

```
$('.scroller-image').hover(function(e) {
    $('span', this).toggleClass('hover', e.type === "mouseenter");
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T16:18:15.317

你不需要 JavaScript。CSS 可以做到这一点：

```
.scroller-image:hover span {
    /* the styles from your .hover class */
} 
```

**现场演示：http:** [//jsfiddle.net/VbZ2G/](http://jsfiddle.net/VbZ2G/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T16:14:30.360

您是否尝试将“悬停”类添加到作为悬停 div 的子项的跨度？我`.next()`想去兄弟姐妹，为什么不试试

```
.children('span') 
```

# python - 在 Python 中实现位交换 hack

> ID：11725343
> 
> 赞同：2
> 
> 时间：2012-07-30T16:11:49.597
> 
> 标签：python, bit-manipulation

给定一个`b`8 位字节，以下公式返回`b`“交换”的位（交换 0 和 7，交换 1 和 6，等等）：

```
(b * 0x0202020202 & 0x010884422010) % 1023 
```

当我有一个实现这个hack的函数时，即

```
def reverseBits(b):
    return (b * 0x0202020202 & 0x010884422010) % 1023 
```

然后我得到一个溢出：

> 溢出错误：无法将“长”放入索引大小的整数中

如何在 Python 中实现位交换 hack？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:24:25.273

这似乎按您的预期工作：

```
def sb(b):
    return (b * 0x0202020202 & 0x010884422010) % 1023

def harness(i):
    print '{:4}: {} -> {}'.format(i,bin(i)[2:].zfill(8),bin(sb(i))[2:].zfill(8))    

for i in range(256):
    harness(i) 
```

印刷：

```
 0: 00000000 -> 00000000
   1: 00000001 -> 10000000
   2: 00000010 -> 01000000
   3: 00000011 -> 11000000
   4: 00000100 -> 00100000
   5: 00000101 -> 10100000
   6: 00000110 -> 01100000
   ...
 248: 11111000 -> 00011111
 249: 11111001 -> 10011111
 250: 11111010 -> 01011111
 251: 11111011 -> 11011111
 252: 11111100 -> 00111111
 253: 11111101 -> 10111111
 254: 11111110 -> 01111111
 255: 11111111 -> 11111111 
```

该算法（和其他算法）可在[此处](http://graphics.stanford.edu/~seander/bithacks.html#BitReverseObvious)找到。如前所述，此方法仅适用于 BYTE，因此您需要使用另一种方法来获取更大的位模式。

**编辑**

顺便说一句：您可以使用字符串操作来进行位反转，而不必担心溢出或数学问题以及更大的位域：

```
>>> w=32
>>> s=bin(1234567)[2:].zfill(w)
>>> rb=s[::-1]
>>> s
'00000000000100101101011010000111'
>>> rb
'11100001011010110100100000000000' 
```

然后以这种方式转换回int：

```
int(rb,2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:51:54.250

在您的情况下，问题似乎是 b 是一个字符的字符串而不仅仅是一个数字，并且通过乘法您创建了一个非常大的数组。我建议您使用 struct.unpack() 输入数据（我猜它来自一个文件），或者使用 ord() 和 chr() ，如下例所示。

当然不是最快的解决方案，但据我所知它有效。

```
def rev(x):
    return chr((ord(x) * 0x0202020202  & 0x010884422010) % 1023)

if __name__ == "__main__":
    with open("reverse_testfile", "wb") as o:
        with open("testfile", "rb") as f:
            o.write(''.join(map(rev, f.read()))) 
```

# c# - 处置使用它的 StreamReader 时，不处置 MemoryStream 有副作用吗？

> ID：11725345
> 
> 赞同：0
> 
> 时间：2012-07-30T16:11:58.350
> 
> 标签：c#, idisposable, memorystream

给定以下代码片段：

```
try
{
    var myTxt = "";
    var serializer = new DataContractSerializer(myObject.GetType());
    var memoryStream = new MemoryStream()

    serializer.WriteObject(memoryStream, myObject);
    memoryStream.Position = 0;

    using (var reader = new StreamReader(memoryStream))
    {
        myTxt = reader.ReadToEnd();
    }
    .
    .
    .
}
catch (IOException ioEx)
{
     //log or whatever...        
     throw;
} 
```

通常我会在我的内存流周围有一个 using 语句，但据我了解，处理 StreamReader 将关闭内存流。

所以问题是，上面的内容真的有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:16:57.270

你可以简化你的代码，因为我没有看到写作、倒带和阅读的意义：

```
var serializer = new DataContractSerializer(facets.GetType());
using (var stream = new MemoryStream())
{
    serializer.WriteObject(stream, facets);
    string xml = Encoding.UTF8.GetString(stream.ToArray());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:17:01.903

使用任何一个都是一个好习惯

```
using (var stream = new MemoryStream(...))
using (var reader = new StreamReader(stream))
{
    myTxt = reader.ReadToEnd();
} 
```

这里流和阅读器都将由运行时处理

或`Close()`手动读取器（写入器）和流

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T16:17:54.863

为了测试你的场景，我添加了

```
memoryStream.Seek(0, SeekOrigin.Begin); 
```

到最后并收到一个`System.ObjectDisposedException`，您的代码似乎有效。

当然`vcsjones`的评论也是有效的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T16:26:08.903

我认为这很好，因为`MemoryStream`无论如何都不持有非托管资源，但如果你想更加安全，你可以这样做：

```
var memoryStream = new MemoryStream()
StreamReader reader = null;
try{
    serializer.WriteObject(memoryStream, myObject);

    memoryStream.Position = 0;
    reader = new StreamReader(memoryStream)
    //...
}
finally
{
    if(reader != null)
        reader.Dispose();
    else
        memoryStream.Dispose();
} 
```

# magento - Magento 目录价格规则不适用于所有产品 (1.5.0.1)

> ID：11725350
> 
> 赞同：1
> 
> 时间：2012-07-30T16:12:15.950
> 
> 标签：magento, catalog, promotions, magento-rules

我有一个 Magento 1.5.0.1 站点，最近遇到了一个到目前为止我似乎无法解决的问题。我过去创建了许多目录价格规则，它们运行良好。

我正在使用条件“是其中一个”并且我正在选择一堆 SKU。当我保存规则并检查选定的 SKU 时，由于某种原因已取消选择其中的一些 - 它似乎完全随机。（见下图）

所有的 SKU 几乎都是相同的，没有什么可以区分那些已经工作的和没有工作的。没有应用其他规则，与库存水平没有相关性。我此刻不知所措！

如果有人遇到过类似的问题或知道此版本中的错误，请告诉我。我会很感激任何帮助！

![在此处输入图像描述](../Images/880998c030baeeaae3ec433953555e60.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:42:18.487

我弄清楚了这个问题的原因。50% 是错误，50% 是我们的错。

在一些 SKU（突出显示的）的末尾有一个空格，即使该空格包含在应用规则的逗号分隔字符串中，也不算在内。

所以这个故事的寓意是检查您的 SKU 数据绝对没有空间以确保它与目录促销一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-02T18:29:28.447

此外，您可以使用此方法将规则应用于任何产品。

```
$product = Mage::getModel('catalog/product') -> load($productId);

$rules = Mage::getModel('catalogrule/rule')->getCollection()->addFieldToFilter('is_active', 1);

foreach ($rules as $rule) {
      $rule->applyAllRulesToProduct($product);
}

echo "Applied rules to " . $productId; 
```

# jquery - 出现在内容宽度之外的 jQuery 导航栏

> ID：11725351
> 
> 赞同：0
> 
> 时间：2012-07-30T16:12:21.787
> 
> 标签：jquery, jquery-mobile, ibm-mobilefirst

我有一个非常烦人的问题，即持久的 jQuery 导航栏出现在内容宽度之外，比页面上的其他内容宽得多，这是我在预览 HTML 时看到的：

![在此处输入图像描述](../Images/0e071a391bc20533e174b09b44a4cf6b.png)

`<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0" />`在它中使用`<head>`它应该将内容宽度设置为设备宽度，它具有标题和文本元素，但不适用于导航栏。

这是我上面的完整 HTML 文件：

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>My Page</title> 
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0" />
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/SmartConf.css" />
    <link rel="stylesheet" href="css/jquery.mobile-1.1.1.min.css" />
</head> 
<body onload="WL.Client.init({})" id="content"> 

    <div data-role="page">

        <div data-role="header">
            <h1>Home</h1>
        </div><!-- /header -->

        <div data-role="content">
        <p>Home</p> 
        </div><!-- /content -->

        <div data-role="footer" data-id="foo1" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="home.html">Home</a></li>
                    <li><a href="tweets.html">Tweets</a></li>

                </ul>
            </div><!-- /navbar -->
        </div><!-- /footer -->

    </div><!-- /page -->

    <script src="js/SmartConf.js"></script>
    <script src="js/messages.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/jquery/jquery.mobile-1.1.1.js"></script>
</body>
</html> 
```

有没有办法将导航栏挤到主内容窗口中？

谢谢

**编辑**：

如果我`id="content"`从`body`标签中删除，那么宽度会正确调整，但是这样做我会在 Worklight 启动中遇到各种失败，因为它引用了“内容”ID 标签，因此我认为 body 和 div 都存在冲突正在争夺`content`...的ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:09:16.023

删除这两行：

```
<link rel="stylesheet" href="css/reset.css" />
<link rel="stylesheet" href="css/SmartConf.css" /> 
```

# php - phpunit 停止然后重新启动并终止剩余的测试

> ID：11725352
> 
> 赞同：0
> 
> 时间：2012-07-30T16:12:31.577
> 
> 标签：php, phpunit

将我的 ubuntu 升级到 12.04 后，我的 phpunit 开始出现奇怪的行为。我不知道它是否相关，但我认为值得一提。无论如何，问题如下：

在执行测试期间，phpunit 在某个时间点（我会说在第 50 次测试左右）停止大约 10 秒，然后重新启动并完成所有测试。否则它工作得很好，只是我在运行测试时浪费了很多时间。正如你可以想象的那样，我真的不喜欢这样，因为测试应该运行得非常快，不是吗？

知道它会导致什么吗？

# transactions - SSIS 包中的事务传播

> ID：11725353
> 
> 赞同：0
> 
> 时间：2012-07-30T16:12:31.690
> 
> 标签：transactions, ssis

以下是 SSIS 包中控制流执行的任务列表

1.  使用“执行 SQL 任务”从表中删除数据
2.  从 txt 文件中读取数据并使用“数据流任务”将数据加载到表中
3.  使用“执行 SQL 任务”从表中删除一些行（基于业务逻辑）
4.  使用“执行 SQL 任务”更新表中的某些行（基于业务逻辑）

我的疑问是，如果第4步出现错误，SSIS会自动回滚到第1步之前的状态吗？

任何人都可以帮助我朝着正确的方向前进吗？任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:00:04.193

一般来说，每个任务都是原子的。任务 4 将或不会完成，不会发生半途而废。如果您需要包作为一个整体成功/失败，那么您将需要对其进行配置。

最简单的选择是使用包的内置事务选项。这使用 Microsoft 分布式事务协调器 (MSDTC) 来处理跨各种服务器的事务。在您的程序包中，右键单击控制流的背景并将 TransactionOption 从更改`Supported`为`Required`More details about how all that works over on [How do I run multiple data flow tasks in parallel in the same transaction?](https://stackoverflow.com/questions/10369943/how-do-i-run-multiple-data-flow-tasks-in-parallel-within-the-same-transaction/10374998#10374998)

如果 MSDTC 出于某种原因对您不起作用，那么您需要将连接管理器设置为 RetainSameConnection 并将开始 tran/commit/rollback 逻辑添加到您的包中请参阅[SSIS：默认日志记录 OnError 不适](https://stackoverflow.com/questions/11454062/ssis-default-logging-onerror-dont-work-with-retainsameconnection/11458177#11458177)用于RetainSameConnection一个示例，但*仅*当所有任务都在同一个数据库中执行时才有效。

如果 MSDTC 不起作用并且您将修改多个数据库中的数据，那么您将需要编写自己的“回滚”脚本并让它们在 OnError/OnTaskFailed 事件或控制流中的错误分支中触发。当您发布更新和删除时，这将需要在您能够撤消这些操作之前实施变更数据捕获机制。

# android - Android SpinnerActivityTest 出现奇怪的 NullPointerException

> ID：11725367
> 
> 赞同：1
> 
> 时间：2012-07-30T16:13:29.620
> 
> 标签：android, junit, android-testing

我最近在 androids 开发者网站上使用 Activity Testing Tutorial。按照添加 UI 测试的分步指南 - 1\. 您将获得以下代码片段：

```
 package com.android.example.spinner.test;

import android.test.ActivityInstrumentationTestCase2;
import android.widget.Spinner;
import android.widget.SpinnerAdapter;

import com.android.example.spinner.SpinnerActivity;

public class SpinnerActivityTest extends
        ActivityInstrumentationTestCase2<SpinnerActivity> {

    private SpinnerActivity mActivity;
    private Spinner mSpinner;
    private SpinnerAdapter mPlanetData;
    public static final int ADAPTER_COUNT = 9;
    public static final int INITIAL_POSITION = 0;

    public SpinnerActivityTest() {
        super("com.android.example.spinner", SpinnerActivity.class);
    }

    @Override
    protected void setUp() throws Exception {
        super.setUp();
        setActivityInitialTouchMode(false);
        mActivity = getActivity();
        mSpinner = (Spinner) mActivity
                .findViewById(com.android.example.spinner.R.id.Spinner01);
        mPlanetData = mSpinner.getAdapter();

    }

    public void testPreConditions() {
        assertTrue(mSpinner.getOnItemSelectedListener() != null);
        assertTrue(mPlanetData != null);
        assertEquals(mPlanetData.getCount(), ADAPTER_COUNT);
    }

    public void testSpinnerUI() {
        System.out.println("testSpinnerUI(): mSpinner = " + mSpinner);

        mActivity.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                System.out.println("run(): mSpinner = " + mSpinner);
                mSpinner.requestFocus();
                mSpinner.setSelection(INITIAL_POSITION);
            }
        });
    }
} 
```

怎么会这样？

我已经弄清楚了一些事实：

1.  调试 TestApplication 时不会发生（即使没有断点）
2.  当您发送 UI 线程休眠几毫秒时，它不会发生
3.  当您直接在 mActivity.runOnUiThread() 之前记录 mSpinner 时，它永远不会为空（即使您得到 NullPointerException），但确实是当您将它记录在 Runnable 中时。

//编辑：添加 System.outs + stacktrace：

```
07-30 19:20:08.001: INFO/ActivityManager(1362): Displayed com.android.example.spinner/.SpinnerActivity: +118ms
07-30 19:20:08.011: INFO/System.out(3180): testSpinnerUI(): mSpinner = android.widget.Spinner@40525150
07-30 19:20:08.071: DEBUG/dalvikvm(3180): GC_EXPLICIT freed 45K, 49% free 2754K/5379K, external 0K/0K, paused 44ms
07-30 19:20:08.071: INFO/System.out(3180): run(): mSpinner = null
07-30 19:20:08.081: DEBUG/AndroidRuntime(3180): Shutting down VM
07-30 19:20:08.081: WARN/dalvikvm(3180): threadid=1: thread exiting with uncaught exception (group=0x4001d5a0)
07-30 19:20:08.081: ERROR/AndroidRuntime(3180): FATAL EXCEPTION: main
07-30 19:20:08.081: ERROR/AndroidRuntime(3180): java.lang.NullPointerException
07-30 19:20:08.081: ERROR/AndroidRuntime(3180):     at com.android.example.spinner.test.SpinnerActivityTest$1.run(SpinnerActivityTest.java:46)
07-30 19:20:08.081: ERROR/AndroidRuntime(3180):     at android.os.Handler.handleCallback(Handler.java:587)
07-30 19:20:08.081: ERROR/AndroidRuntime(3180):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-30 19:20:08.081: ERROR/AndroidRuntime(3180):     at android.os.Looper.loop(Looper.java:143)
07-30 19:20:08.081: ERROR/AndroidRuntime(3180):     at android.app.ActivityThread.main(ActivityThread.java:4196)
07-30 19:20:08.081: ERROR/AndroidRuntime(3180):     at java.lang.reflect.Method.invokeNative(Native Method)
07-30 19:20:08.081: ERROR/AndroidRuntime(3180):     at java.lang.reflect.Method.invoke(Method.java:507)
07-30 19:20:08.081: ERROR/AndroidRuntime(3180):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-30 19:20:08.081: ERROR/AndroidRuntime(3180):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-30 19:20:08.081: ERROR/AndroidRuntime(3180):     at dalvik.system.NativeStart.main(Native Method)
07-30 19:20:08.121: DEBUG/dalvikvm(3180): GC_EXPLICIT freed 18K, 49% free 2756K/5379K, external 0K/0K, paused 43ms
07-30 19:20:08.131: WARN/ActivityManager(1362): Error in app com.android.example.spinner running instrumentation ComponentInfo{com.android.example.spinner.test/android.test.InstrumentationTestRunner}:
07-30 19:20:08.131: WARN/ActivityManager(1362):   java.lang.NullPointerException
07-30 19:20:08.131: WARN/ActivityManager(1362):   java.lang.NullPointerException 
```

# iphone - iOS 5 中的样式：UINavigationController *除非*在 PopOver

> ID：11725369
> 
> 赞同：4
> 
> 时间：2012-07-30T16:13:43.007
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我正在使用自定义图像设置 UINavigationController 的样式，但是，这在 Popover 中看起来很糟糕，有没有办法仅对不在弹出框中的导航控制器执行此**操作**？

我目前在我的`AppDelegate.m`：

```
- (void)applyCustomStyling{
    [[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"TitleBar.png"] forBarMetrics:UIBarMetricsDefault];
    [[UIToolbar appearance] setBackgroundImage:[UIImage imageNamed:@"TitleBar.png"] forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault];
} 
```

因此，如果您不相信它看起来很糟糕：

[http://i.minus.com/joDeixTP7XLpl.png](http://i.minus.com/joDeixTP7XLpl.png)

应该是这样的（UIPopover-default）：

[http://i.minus.com/i97ORJTj5pjZK.png](http://i.minus.com/i97ORJTj5pjZK.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T17:51:43.327

您可以使用`appearanceWhenContainedIn`[1](http://developer.apple.com/library/ios/documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html#//apple_ref/occ/intfcm/UIAppearance/appearanceWhenContainedIn:)根据控制器层次结构对外观进行更精细的控制：

```
[[UINavigationBar appearanceWhenContainedIn:[UIPopoverController class], nil]
                         setBackgroundImage:nil 
                              forBarMetrics:UIBarMetricsDefault]; 
```

# facebook - 无需用户登录即可获取访问令牌

> ID：11725374
> 
> 赞同：1
> 
> 时间：2012-07-30T16:13:54.767
> 
> 标签：facebook, facebook-graph-api, oauth, publishing

使用 Facebook 提供的访问令牌，当用户首先登录我们的应用程序时，我们通过将访问令牌保存在 DB 中来进行离线墙发布。但是现在如果用户更改他/她的密码，访问令牌就会过期。因此，除非用户登录我们的应用程序，否则我们无法获取访问令牌。

请帮助获取有效的访问令牌以进行墙发布，而无需用户登录我们的应用程序。

谢谢森希尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:46:17.633

> 请帮助获取有效的访问令牌以进行墙发布，而无需用户登录我们的应用程序。

这是不可能的。在您可以代表用户执行任何操作之前，*需要*用户交互。

该系统*旨在*以这种方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:07:35.440

[这](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)`PHP`是来自 Facebook 开发者博客的示例代码。实施起来应该很简单。

但是请记住，该`offline_access`权限已被弃用，并将在 2012 年 10 月[删除](https://developers.facebook.com/roadmap/#october-2012)。

# mysql - 如何查询所有具有共享模式的记录

> ID：11725378
> 
> 赞同：0
> 
> 时间：2012-07-30T16:14:07.913
> 
> 标签：mysql

我有一列包含网址。一些（但不是全部）网址共享同一个域。例如：aaa.yahoo.com、bbb.yahoo.com、ccc.yahoo.com。这些 url 存储在一个唯一的字段中。此外，同一个表有一个自增主键。

我需要做的和需要帮助的是：查询所有共享相同域名的url。请注意，我没有可以在查询中输入的确切域名，数据库中有很多可用的共享域名，我想全部查询。

**编辑：** 这是我尝试过的命令，但完全不确定，因为我在 SQL 方面没有太多经验：

```
SELECT domainname FROM DB.TABLE
WHERE SUBSTRING(domainname, LOCATE('.', domainname))
IN(
    SELECT   domainname
    FROM     DB.TABLE
    GROUP BY SUBSTRING(domainname, LOCATE('.', doaminname)) 
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:46:04.727

如果我没有理解错...

```
SELECT
    COUNT(`domainname`) AS 'occ'
    ,SUBSTRING(`domainname`,LOCATE('.',`domainname`)+1) AS 'domain'
FROM `the_table`
GROUP BY SUBSTRING(`domainname`,LOCATE('.',`domainname`)+1)
HAVING `occ`>1
ORDER BY `occ` DESC,`domain` ASC 
```

该`HAVING...`行将过滤掉表中仅出现 1 次的域。

* * *

## 编辑：

代表您的评论发言...因为您无法知道以下示例中的域（除非您根据大量国家代码、域扩展名等测试值）

*   域名.co.uk
*   子域.domain.co

您无法以编程方式检测到这些。如果您打算依靠扩展名或国家/地区扩展名，那也行不通。您可以做的是进行智能分类并通过您的眼睛挑选那些，除非您采用上述解决方案。

所以，例如，

```
SELECT
    `id`
    ,`d` AS 'domain'
    ,IF(CHAR_LENGTH(`d`)-CHAR_LENGTH(REPLACE(`d`,'.',''))=2,
        SUBSTRING_INDEX(`d`,'.',1),'') AS 'f1'
    ,SUBSTRING_INDEX(SUBSTRING_INDEX(`d`,'.',-2),'.',1) AS 'f2'
    ,SUBSTRING_INDEX(`d`,'.',-1) AS 'f3'
FROM (
    SELECT
        `id`
        ,IF(CHAR_LENGTH(`domainname`)-CHAR_LENGTH(REPLACE(`domainname`,'.',''))>2,
            SUBSTRING_INDEX(`domainname`,'.',-3),`domainname`) AS 'd'
    FROM `the_table`
    GROUP BY `d`
) t
ORDER BY `f3`,`f2`,`f1` 
```

可能会帮助你看到它。请注意，您不能将结果分组`f2`，`f3`因为您可能有

*   示例1.yahoo.com
*   example2.yahoo.com

但你可能也有

*   雅虎网
*   google.com.br

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:20:42.460

使用 LIKE 操作数。就像是：

```
SELECT domainname from DB.TABLE where domainname LIKE '%.yahoo.com'; 
```

它将返回 yahoo.com 的所有子域。'%' 是多个字符的通配符，使用下划线 '_' 表示单个字符。

# mysql - 使用长字符串作为唯一表 ID（或不使用）？

> ID：11725380
> 
> 赞同：1
> 
> 时间：2012-07-30T16:14:22.997
> 
> 标签：mysql, database, unique

我知道这已经讨论过很多次了，我希望能针对我的具体情况得到建议。

我在一个社交网站上工作，理论上应该可以在 mysql 数据库中记录数十亿张照片。

我想知道将记录的唯一 BIGINT id 替换为像“oij43oj54oi52j43i”这样的字符串 id 是否是个好主意。

优点是：

1.  我可以将照片记录插入到分布在多个服务器上的多个数据库中，这与 BIGINT id 不同，您需要在插入时等待并从 mysql 获取下一个行号。

2.  如果是 /avatars/oij43oj54oi52j43i.jpg，则不太可能允许用户通过输入像 /avatars/120.jpg 这样的整数来随机访问图像。我知道第二部分也可以通过 URL 重写来完成，但会使用一些 CPU/内存。

其他表（如“photo_comments”）在引用照片时也可以使用相同的字符串 id，例如 photo_comment_photo_id='oij43oj54oi52j43i';

考虑到这些，使用字符串 ID 是不是一个坏主意？特别是对于我提到的第一个优势，这是一个有效的观点/优势/实践吗？

谢谢你。

编辑：确保字符串是唯一的可以通过将用户 ID 附加到字符串来完成，并且可能使用使用时间戳微秒的php [uniqid() 。](http://php.net/manual/en/function.uniqid.php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:54:50.273

如果你正在构建这样的东西，你应该从 Instagram 获取一个页面并使用 UUID 而不是顺序 ID。这些有很多优点，但最大的一个是它们是可扩展的和可分片的。

大多数语言都有一个简单的 UUID 库，甚至 MySQL 也有一个 UUID 生成器，可以作为最后的手段。

Instagram 的版本不是纯粹的 UUID，而是一个 64 位版本的足够类似的东西。

基本上你应该[在 Instagram 阅读这篇关于分片和 ID 的文章以](http://instagram-engineering.tumblr.com/post/10853187575/sharding-ids-at-instagram)获取灵感。

# c# - 是否可以将类型列表添加到通用接口？

> ID：11725381
> 
> 赞同：3
> 
> 时间：2012-07-30T16:14:24.430
> 
> 标签：c#

我想创建一个界面，例如...

```
interface IRepository<params T>
{
    T GetAll();
}

class PersonRepository : IRepository<Employees,Students>
{
    Employees GetAll();
    Students GetAll();
} 
```

很清楚，我知道具体的实现是不可能的，但是有没有办法采用多实体存储库并创建一些超级基础接口？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T16:29:15.420

这是可能的：

```
namespace ConsoleApplication12
{
    public class Employee
    {
        public string EmpName { get; set; }

        public override string ToString()
        {
            return this.EmpName;
        }
    }

    public class Student
    {
        public string StudName { get; set; }

        public override string ToString()
        {
            return this.StudName;
        }
    }

    public class Other
    {
        public int TestField { get; set; }

        public override string ToString()
        {
            return this.TestField.ToString();
        }
    }

    public interface IRepository<T>
    {
        List<T> GetAll();
    }

    public class PersonRepository : IRepository<Employee>, IRepository<Student>, IRepository<Other>
    {
        List<Student> IRepository<Student>.GetAll()
        {
            return new List<Student> { new Student { StudName = "test2" } };
        }

        List<Other> IRepository<Other>.GetAll()
        {
            return new List<Other> { new Other { TestField = 42 } };
        }

        List<Employee> IRepository<Employee>.GetAll()
        {
            return new List<Employee> { new Employee { EmpName = "test1" } };
        }
    }

    public class Program
    {
        private static void Main(string[] args)
        {
            PersonRepository d = new PersonRepository();

            // Returns "test1"
            Console.WriteLine(((IRepository<Employee>)d).GetAll()[0]);

            // Returns "test2"
            Console.WriteLine(((IRepository<Student>)d).GetAll()[0]);

            // Returns 42
            Console.WriteLine(((IRepository<Other>)d).GetAll()[0]);

            Console.ReadLine();
        }
    }
} 
```

如您所见，您必须显式转换您的类，以便您的应用程序知道`GetAll()`要调用哪个方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:50:47.673

这对我来说听起来像是一种有缺陷的设计方法，并且是不可能的，因为方法不能仅因返回类型而异，并且该语言不支持这种方式的类型参数列表。

您可以实现一个通用基类并将它们存储在基类的列表中 ( `List<Person> personRepository;`)。然后使用 Linq 扩展来获取给定类型的成员很简单，即`List<Students> = personRepository.OfType<Student>().ToList();`.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-30T16:19:39.423

不，一点也不，但你可以这样做：

```
// base interface for entity types
interface IEntity 
{
}

class Employees : IEntity
{
}

class Students : IEntity
{
}

interface IRepository<T1, T2> where T1:IEntity where T2:IEntity
{
    T1 GetAll();
    T2 GetAll();
}

class PersonRepository : IRepository<Employees,Students>
{
    Employees GetAll();
    Students GetAll();
} 
```

不幸的是，类型参数的数量不能动态变化。

或者，您可以这样做：

```
// base interface for entity types
interface IEntity 
{
}

class Employees : IEntity
{
}

class Students : IEntity
{
}

interface IRepository 
{
    RegisterEntities(IEnumerable<IEntity> entities);

    IEnumerable<IEntity> GetAll();
}

class PersonRepository : IRepository
{
    IEnumerable<IEntity> GetAll() 
    {
       // Todo
    }
    } 
```

这意味着您可以将员工和学生添加到同一个存储库，因为它们共享一个基本界面。稍后您可以提取它们并将常用字段放在 IEntity 上（例如姓名、年龄）以便于​​访问。

# css - 如何修复背景图像以使其在缩小时不会减少？

> ID：11725384
> 
> 赞同：2
> 
> 时间：2012-07-30T16:14:34.183
> 
> 标签：css, background, fixed

[我想要一个像这样](http://www.ghmhotels.com/en/ghm/home/#home)的固定背景图像。

这可以在不使用任何 jQuery 插件的情况下仅使用 css 制作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:16:41.240

CSS3方式：（ie9+等）

```
html { 
  background: url(images/bg.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

jQuery插件跨浏览器方式： [http ://bavotasan.com/2011/full-sizebackground-image-jquery-plugin/](http://bavotasan.com/2011/full-sizebackground-image-jquery-plugin/)

# javascript - Web 表单提交将我的浏览器定向到错误的页面

> ID：11725386
> 
> 赞同：2
> 
> 时间：2012-07-30T16:14:45.837
> 
> 标签：javascript, html, forms, sugarcrm

我有一个将输入发送到 SugarCRM 数据库的 Web 表单。为了让表单在 DotNetNuke 上正常工作，我不得不删除标签并使用 javascript 作为提交按钮。

提交按钮如下所示：

```
<input title="Send Form" onclick="this.form.method='POST'; this.form.action='http://mplexuscrm.com/sugarcrm/index.php?entryPoint=WebToLeadCapture';submit_form();" type="Submit" /> 
```

点击提交按钮时，表单输入正确进入数据库；但是，浏览器被重定向到 SugarCRM 的管理面板，而不是返回到我这样定义的页面：

```
<input id="redirect_url" type="hidden" name="redirect_url" value="http://mplexus.com/DICOMExtender/FreeTrialDICOMeXtender.aspx"> 
```

很感谢任何形式的帮助！谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:17:21.510

让管理面板使用从表单中检索到的值将您重定向到您喜欢的值。

# facebook - Twitter/Facebook/LinkedIn 按钮未显示

> ID：11725390
> 
> 赞同：2
> 
> 时间：2012-07-30T16:14:50.457
> 
> 标签：facebook, wordpress, twitter, linkedin

我的任务是重建一个 WordPress 网站……我对 PHP 很满意，但 WordPress 似乎有一些惊喜，但我正在学习。

但是，我正在开发的网站希望我将他们的社交媒体按钮从侧边栏的底部移到顶部，并希望这些按钮更实用……目前，他们只链接到他们的个人资料。

我继续抓住官方推特按钮，以及脸书和链接...我抓住了每个网站的两个主要按钮（喜欢和分享）。

将所有这些按钮放到适当的位置后......它们都没有出现。我不时出现*其中一些，但似乎是零星的和不可预测的；*其中，最糟糕的似乎是LinkedIn。

下面列出了代码，目前托管在 techbuildersgroup.com/GO/GO.html 上，供那些希望在实时环境中查看代码的人使用。（请，我知道它的丑陋，它的测试版......是的，它是一张桌子，但 WP 不喜欢和我的 css 玩得很好......它会变得更好）。

在这一点上，我什至不确定是什么导致这些没有出现，它们似乎通常是 iframe，当我为它们获取链接时，它们直接在浏览器中打开得很好，但是当嵌入到页面中时它们会失败。 ..这可能是WordPress问题吗？有什么办法吗？其他人以前见过这种情况吗？

提前感谢任何能够帮助解决此问题的人......这让我发疯了。

```
<!-- Social Media Buttons -->

<table style="border:0px;margin:0px;padding:0px;" cellpadding=0 cellspacing=0>
    <tr style="padding:0px;margin:0px">
        <td  style="width:150px;border:0px;padding:0px;margin:0px;">
            <h3>Follow Us!</h3>
        </td>
        <td  style="width:120px;border:0px;padding:0px;margin:0px;">
            <h3><span style="text-align:right">Share Us!</span></h3>
        </td>
    </tr>
</table>
<!-- Twitter -->
<table style="border:0px;margin:0px;padding:0px;" cellpadding=0 cellspacing=0>
    <tr>
        <td style="width:150px;border:0px;padding:0px;margin:0px;">
            <iframe allowtransparency="true" frameborder="0" scrolling="no"
  src="http://platform.twitter.com/widgets/follow_button.html?screen_name=gonetworkstl&show_screen_name=false"
  style="width:150px; height:20px;display:inline;padding:0px;margin:0px;">
                    </iframe>
        </td>
        <td style="width:120px;border:0px;padding:0px;margin:0px;stackoverflow.com09<iframe allowtransparency="true" frameborder="0" scrolling="no"
        src="http://platform.twitter.com/widgets/tweet_button.html?url=http://gonetworkstl.com"
        style="width:130px; height:20px;padding:0px;margin:0px;"></iframe>
        </td>
    </tr>
</table>
<!-- FaceBook -->
<table style="border:0px;margin:0px;padding:0px;" cellpadding=0 cellspacing=0>
    <tr>
        <td style="width:150px;border:0px;padding:0px;margin:0px;">
            <iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fgonetworkstl.com&amp;send=false&amp;layout=button_count&amp;width=150&amp;show_faces=true&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:150px; height:20px;display:inline;padding:0px;margin:0px;" allowTransparency="true"></iframe>
        </td>
        <td style="width:120px;border:0px;padding:0px;margin:0px;">
            <a name="fb_share"></a> 
                    <script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" 
        type="text/javascript">
                    </script>
        </td>
    </tr>
</table>
<!-- LinkedIn -->
<table style="border:0px;margin:0px;padding:0px;" cellpadding=0 cellspacing=0>
    <tr>
        <td style="width:150px;border:0px;">
            <script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
            <script type="IN/FollowCompany" data-id="2229259" data-counter="right"></script>
        </td>
        <td style="width:120px;border:0px;">
            <script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
            <script type="IN/Share" data-url="http://gonetworkstl.com" data-counter="right"></script>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T15:43:50.110

试试这段代码，你可以在 CSS 样式表中使用 DIV 来设置它们的样式。

用您的**网址**替换**XYZ**

 **```
<head>
<!-- Twitter -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

<!-- Facebook-->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=187567691292898";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<!-- Linkedin -->    
<script src="//platform.linkedin.com/in.js" type="text/javascript"></script>

</head>

<body>
<div id="facebook">
    <div class="fb-like" data-href="XYZ" data-send="false" data-layout="button_count" data-width="70" data-show-faces="false"></div>
</div>

<div id="linkedin">
    <script type="IN/Share" data-url="XYZ" data-counter="right"></script>
</div>

<div id="twitter">
    <a href="https://twitter.com/share" class="twitter-share-button" data-url="XYZ" data-lang="en" data-dnt="true">Tweet</a>
</div>
</body> 
```**

# css - 带有条件 CSS 文件的 Rails 资产管道

> ID：11725391
> 
> 赞同：3
> 
> 时间：2012-07-30T16:14:53.620
> 
> 标签：css, ruby-on-rails-3, asset-pipeline

我有一个基于 Rails 3.0 的应用程序。这是一个预测应用程序，我需要在不同的传播上使用不同的 CSS 规则集，因为我使用具有不同规则的相同选择器。

以前在 rails 3.0 中，我有一个很好的解决方案。

1.  我的数据库中有一个列，其中包含 CSS 文件的名称（不带扩展名）。

2.  我收集了这样的数据：

    ```
    @spread = Spread.find_by_id(params[:spread_id])
    @css_to_use = @spread.css_to_use 
    ```

3.  在我的 application.html.erb 中放置一个条件行：

    ```
    <%= stylesheet_link_tag @css_to_use unless @css_to_use.blank? %> 
    ```

到目前为止，这运作良好。我正在为 Rails 3.2 开发这个应用程序，并且由于资产管道，这种魔力消失了。

我发现了这个： [Using Rails 3.1 assets pipeline to conditionally use certain css](https://stackoverflow.com/questions/7134034/using-rails-3-1-assets-pipeline-to-conditionally-use-certain-css)，但这是一个有点迟钝的解决方案（现在正是我想要的）。

这个问题有什么好的解决方法吗？您是否知道一种不仅可以加载指定文件而且具有依赖关系的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:30:30.857

我有一个具有类似要求的项目，我使用链接答案中显示的技术：

```
# app/views/layouts/application.html.haml
= stylesheet_link_tag "application", "labels/#{Whitelabel[:label_id]}"

# config/application.rb
# Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
config.assets.precompile += %w( active_admin.js active_admin.css labels/* ) 
```

这包括一个额外的样式表，它不包含在 application.rb

看看完整的源代码：[https ://github.com/phoet/on_ruby/](https://github.com/phoet/on_ruby/)

# objective-c - 为 iOS 编写格式化输出

> ID：11725393
> 
> 赞同：0
> 
> 时间：2012-07-30T16:15:03.977
> 
> 标签：objective-c, ios

根据 vswprintf 的文档：此函数使用指向参数列表的指针写入格式化输出。

有谁知道可以达到类似效果的原生 iOS API 的功能？

或者，你会怎么做？

我知道 NSString Initwithformat 可以模拟 sprint，但是模拟 vswprintf 甚至 vsprintf 的功能是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:57:19.127

`NSString`相当于`vsprintf`is ，`initWithString:arguments:`像这样：

```
// format has type NSString *
// ap has type va_list
NSString *formattedString = [[NSString alloc] initWithFormat:format arguments:ap]; 
```

没有单独的宽字符版本`NSString`。Every`NSString`存储 Unicode 字符，而不是字节。如果您有一个 UTF-16 字符数组，您可以使用`+[NSString stringWithCharacters:length:]`它来将其转换为`NSString`.

`NSString`认为`%s`格式字符串表示一个单字节字符代码数组，以零字节结尾。

`NSString`认为`%S`格式字符串是一个两字节字符代码的数组，以两个零字节结尾。

在 iOS 上，a`wchar_t`是 4 个字节。我认为不`NSString`支持. [本文档](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265-SW1)没有提到使用带有格式的修饰符。我查看[了](http://opensource.apple.com/source/CF/CF-635/CFString.c)[案例，](http://opensource.apple.com/source/CF/CF-635/CFString.c)我认为它不支持.`%ls``wchar_t``l``s`[`CFFormatCharsType``__CFStringAppendFormatCore`](http://opensource.apple.com/source/CF/CF-635/CFString.c)`%ls`

如果您有一个 数组`wchar_t`，并且它包含 UTF-32 字符代码，则可以创建一个`NSString`包含相同字符的数组，如下所示：

```
wchar_t *wchars = ...;
unsigned int wcharCount = ...; // number of characters pointed to by wchars

NSString *string = [[NSString alloc] initWithBytes:(const void *)wchars
    length:wcharCount * sizeof *wchars
    encoding:NSUTF32StringEncoding]; 
```

如果您只想使用`vswprintf`，则可以；iOS 支持它。你需要`#include <wchar.h>`得到它的声明。

# java - 二维码显示为空白

> ID：11725396
> 
> 赞同：1
> 
> 时间：2012-07-30T16:15:06.670
> 
> 标签：java, blackberry, qr-code, zxing

使用以下代码，黑莓屏幕中的二维码显示为空白，我不知道我错过了什么。它显示了一个正确居中的正方形，但正方形本身是白色的，里面没有二维码。任何帮助表示赞赏。谢谢。

```
public QRCodeScreen(String qrCode) {
    this.qrCode = "Test String";
    qrImage = new BitmapField(new Bitmap(QRCODE_WIDTH, QRCODE_WIDTH),FIELD_HCENTER);
    qrImage.setBorder(BorderFactory.createBevelBorder(new XYEdges(2, 2, 2, 2)));

    Hashtable hintMap = new Hashtable();
    hintMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.L);
    try {
        MultiFormatWriter barcodeWriter = new MultiFormatWriter();
        ByteMatrix byteMatrix = barcodeWriter.encode(this.qrCode, BarcodeFormat.QR_CODE, QRCODE_WIDTH, QRCODE_WIDTH,hintMap);

        Bitmap bitmap = BarcodeBitmap.createBitmap(byteMatrix, 256);

        qrImage.setBitmap(bitmap);
    }
    catch (Exception e) {

    }

    add(qrImage);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T01:48:59.773

查看[BlackBerry 在线文档中的此示例](http://supportforums.blackberry.com/t5/Java-Development/How-to-use-the-Barcode-API/ta-p/574569)

如果您只是修改它以适应上面的代码，您会得到：

```
public class QRCodeScreen extends MainScreen {

   private String qrCode;
   private static final int QRCODE_WIDTH = 100;
   private BitmapField qrImage;

   public QRCodeScreen(String qrCode) { 
      this.qrCode = "Test String"; 
      qrImage = new BitmapField(new Bitmap(QRCODE_WIDTH, QRCODE_WIDTH),FIELD_HCENTER); 
      qrImage.setBorder(BorderFactory.createBevelBorder(new XYEdges(2, 2, 2, 2))); 

      try { 
         QRCode code = new QRCode();
         Encoder.encode(qrCode, ErrorCorrectionLevel.L, code);
         ByteMatrix barcode = code.getMatrix();
         Bitmap bitmap = BarcodeBitmap.createBitmap(barcode, QRCODE_WIDTH);
         qrImage.setBitmap(bitmap);         
      } 
      catch (Exception e) { 
         e.printStackTrace();
      } 

      add(qrImage); 
   } 
} 
```

这对我有用，在 6.0 9800 模拟器上（运行您的原始代码会产生您所描述的空白图像）。

# c - 使用“if”时重新启动 C 中的程序

> ID：11725397
> 
> 赞同：4
> 
> 时间：2012-07-30T16:15:13.707
> 
> 标签：c, restart

我继续学习C编程，今天遇到了一个问题。在我的程序中，用户必须输入一个以分钟为单位的时间值，我的程序将计算它的秒数（实际上非​​常简单）。但我想定一个规则，那个时间不能是负数。所以我使用了这段代码：

```
 if(a<=0)
    {
        printf("Time cannot be equal to, or smaller than zero, so the program will now terminate\n");
        exit(EXIT_FAILURE);
    } 
```

但是现在，我不想终止我的程序，我希望它返回到用户必须输入值时的状态。

我在终止我的程序时遇到了问题，但是一些搜索帮助了我，但是我没有得到任何搜索如何重新启动我的程序的结果。

这是我的程序的文本（我在 Linux 上工作）：

```
#include<stdio.h>
#include<stdlib.h>
main()
{
    float a;
    printf("\E[36m");
    printf("This program will convert minutes to seconds");
    getchar();
    printf("Now enter your time in minutes(e.g. 5):");
    scanf("%f", &a);
    printf("As soon as you will press the Enter button you`ll get your time in seconds\n");
    getchar();
    getchar();

    if(a<=0)
    {
        printf("Time cannot be equal to, or smaller than zero, so the program will now terminate\n");
        printf("\E[0m");
        exit(EXIT_FAILURE);
    }
    else
    {
        float b;
        b=a*60;
        printf("\E[36m");
        printf("The result is %f seconds\n", b);
        printf("Press Enter to finish\n");
        getchar();
    }
    printf("\E[0m");
} 
```

PS我不知道如何正确命名这个函数，所以我称之为restart，也许它有不同的名字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T16:40:24.783

已发布的两种解决方案都有效，但我个人更喜欢这种方法：

```
// ...
printf("Now enter your time in minutes(e.g. 5):");
scanf("%f", &a);

while(a <= 0){
   printf("Time cannot be equal to, or smaller than zero, please enter again: ");
   scanf("%f", &a);
} 
```

我认为它更清楚，它提供了一个错误消息和一个相互独立的常规消息的机会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:16:24.097

您可以简单地使用`do ... while`循环（包括您的程序源代码）。

```
do {
    /* Get user input. */
} while (a <= 0); 
```

或者该`goto`语句也用于模拟循环（不鼓励初学者）。

```
 start:
    /* Get user input. */
    if (a <= 0)
        goto start; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:25:57.477

你可以试试 if-else 在哪里：

```
do
{
/* get user input*/
if (a > 0)
    {
     /* ... */
    }
else
   printf ("Time cannot be negative, please re-enter") 
}while(<condition>); 
```

*条件可能是直到您想继续。

# google-apps-script - 使用应用脚本将输入从 Google Storage 中的 .csv 文件传递 到 Prediction API

> ID：11725400
> 
> 赞同：0
> 
> 时间：2012-07-30T16:15:22.703
> 
> 标签：google-apps-script, google-prediction

如何使用应用脚本从 Google Storage 中的 .csv 文件传递​​输入，以便我可以使用 Prediction API 进行批量预测（>10,000）？我使用 Google APIs Explorer 创建并训练了我的预测模型。这个想法

1.  将输入 .csv 文件上传到 Google 存储。它包含许多输入行 - 我希望对每一行进行一个预测。
2.  打开一个谷歌电子表格，它将存储我们的预测。
3.  从 Google Storage 加载 .csv 文件。获取一行并将其设置为 csv 实例。来电预测。
4.  将预测存储在电子表格的第一列中。将输入行中的选择性列（特征）写入电子表格，为预测值提供一些上下文。
5.  循环遍历 .csv 文件中的所有行并对每一行进行预测。

如何在 Google App Script 中执行第 2 步？应用程序脚本中是否存在用于操作 .csv 文件的库？

[该文档在这方面相当粗略](https://developers.google.com/apps-script/service_prediction)，但产品很有趣，我希望能提供更多示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:57:20.190

Google 电子表格能够[导入 CSV 文件](http://support.google.com/docs/bin/answer.py?hl=en&answer=40608)。这意味着您可以将 CSV 文件导入电子表格，然后从脚本打开此电子表格并根据需要操作数据。如果您以编程方式上传 CSV 文件，则可以不将 CSV 文件作为文件上传，而是使用[Google 电子表格数据 API将数据直接上传到电子表格](https://developers.google.com/google-apps/spreadsheets/)

# entity-framework - 实体框架在两个类之间创建链接，而在域模型中没有未使用的重复

> ID：11725403
> 
> 赞同：0
> 
> 时间：2012-07-30T16:15:31.707
> 
> 标签：entity-framework

我一直在尝试创建多对多关系，而不必使用实体框架（MVC4 和 EF5RC）将未使用的属性放在我的视图模型中。

我有一`User`堂课：

```
public class User
{
    public Guid Id { get; set; }
    public string[] Roles { get; set; }
    public string Name { get; set; }
 } 
```

还有一个`Role`类：

```
public class Role
{
    public Role()
    {
        Users = new List<User>();
    }

    public int Id { get; protected set; }

    public string Name { get; set; }
    public string Description { get; set; }

    public IList<User> Users { get; set; }       
} 
```

我想要实现的是拥有一个属于某些角色的用户（此时角色的字符串名称），它们可以是多个角色。每个角色可以有多个用户。

我不想将用户列表放入角色中并将角色列表放入用户中，以便实体框架满意并保存它。

我一直在尝试使用 modelBuilder 的东西，（遵循一些例子，例如[在 Entity Framework Code First 中为分层数据定义关系](https://stackoverflow.com/questions/7935100/define-relationships-for-hierarchical-data-in-entity-framework-code-first)）。没有喜悦。

我想避免额外属性的原因是拥有空列表感觉不对，或者更糟糕的角色列表然后列出其他用户。我希望我的域模型是干净的，而不必弯腰使用存储库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T23:13:17.980

*如果您选择使用 Entity Framework，除了以 Entity Framework 满意*的方式使用之外，别无选择。但为什么这应该是一个重点？我认为首先你应该关注一个简​​单有效的域模型：它强制执行业务规则并与 EF 顺利协作。

其次，有选择：我要暴露什么？您可以将涉及 EF（上下文 + 实体）的所有内容保留在包含授权逻辑的程序集中。因此，您不公开实体类，而是公开专用类（如果您愿意，可以使用 DTO）。你`User`可能是这样一个类，因为它不会暴露其他用户的角色。显然，它不是 EF 容易填充的类。

您的程序集应该有一个外观或服务类，它公开一些方法，这些方法仅提供客户端代码所需的数据和活动，仅此而已。在内部，它在实体类和 DTO 之间进行映射。

最近，我一直在研究一个授权库，我大致遵循了这些原则，当然，与您的模型存在一些差异。

# ios - 在 iOS AppStore 中查询应用信息？

> ID：11725404
> 
> 赞同：1
> 
> 时间：2012-07-30T16:15:35.230
> 
> 标签：ios, app-store

我想在另一个 iOS 应用程序中列出 iOS 应用程序。然后列表中的各个项目链接回每个应用程序的 AppStore。那里没问题。

我还希望能够通过使用 App ID 查询 AppStore 来获取特定于应用程序的信息——应用程序名称、描述、应用程序图标的 URL。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T16:20:27.293

使用 JSON 响应：

```
http://itunes.apple.com/lookup?id= 
```

这是文档： http: [//www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html#lookup](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html#lookup)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-23T04:51:37.193

如果您只是想为特定开发人员显示应用程序，那么`SKStoreProductViewController`可能无需进行任何解析就可以做到这一点。

如何：[https ://www.cocoanetics.com/2015/03/implementing-an-in-app-app-store/](https://www.cocoanetics.com/2015/03/implementing-an-in-app-app-store/)

# c# - 当这些状态是内部属性时，如何使用单元测试创 建测试状态？

> ID：11725406
> 
> 赞同：1
> 
> 时间：2012-07-30T16:15:43.933
> 
> 标签：c#, .net, unit-testing

我有一个单独的类库，用于所有单元测试（使用 nunit）。在测试项目中，我有一个帮助类为我创建测试对象。在设置这些对象时，我需要设置一些我标记为内部的值。我这样做的原因是因为这些对象实际上是工作流程的一部分，所以我只能通过实际执行工作流程来实现这些属性状态，这会扼杀单元测试的想法。

例如，我首先测试的方法。它检查是否获得了某个批准，如果是，则将其移动到链中的下一步（或者更确切地说，它检查是否收到了下一个批准，依此类推）。如果没有，它会将其重新分配给需要批准的人。

所以我要做的是创建一个处于此过程某个阶段的测试票。例如，第一个测试运行第一个批准者未批准的方法，并检查以确保它被重新分配给该人。下一个测试将在批准者批准的地方运行它，并确保它沿着树向下移动。

我明显面临的问题是测试类位于不同的命名空间中，因此我无法访问内部属性。我不确定是否有解决此问题的方法，或者我是否缺少其他一些支持我进入这个角落的基本原理（设计气味？）。我意识到您通常只想为公共 api 编写测试，但我的部分测试要求我对私有字段进行一些设置。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:21:55.020

您可以使用[InternalsVisibleTo](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)属性来指定您的 UnitTest 程序集可以访问该类的内部属性。

这将您的测试和“真实”组装紧密结合，但这应该让您工作。

# facebook - 获取不重复的 Facebook 帖子和状态

> ID：11725407
> 
> 赞同：0
> 
> 时间：2012-07-30T16:15:54.917
> 
> 标签：facebook, status, posts

我正在尝试编写一个服务器端应用程序，从 Facebook 上的业务页面读取帖子和状态。当我请求时`/posts`，我得到许多重复的状态，好像对状态的每次编辑都可以使用不同的 id。作为一种解决方案，我想我会忽略 中的状态`/posts`，并合并中的状态`/statuses`。但`/statuses`需要用户授权令牌，而不仅仅是应用令牌，此时提示用户是不可接受的。

1.  为什么两个端点的授权不同？这是一个公开可见的业务页面，为什么我需要一个用户令牌来阅读状态，而不是阅读帖子？

2.  有没有办法从 /posts 页面获取不重复的状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T22:24:42.863

“重复”状态实际上不是。 `/posts`不仅显示您发布到自己页面的内容，还显示其他人的页面。在这种情况下，“重复”实际上是发布到其他人时间线的状态，因为他们被标记在状态中。

我没有在graph api中找到一个指标来区分这些状态，只是我自己页面上的状态有一个`message`属性，而别人页面上的状态有一个`story`属性。这似乎是一个非常细微的区别，但它确实有效。

# javascript - Extjs 4 扩展表单

> ID：11725408
> 
> 赞同：1
> 
> 时间：2012-07-30T16:15:56.420
> 
> 标签：javascript, extjs, extjs4

嗨，我正在尝试扩展表单，我可以使用像这样的 commonItems 这样的辅助属性来扩展项目。

```
Ext.define('PC.view.FormEvento', {
        extend:'Ext.form.Panel',
        id:'FormEvento',
        url:'controller/action',
        bodyPadding:10,
        commonItems:[
            {
                xtype:'hiddenfield',
                name:'id',
                value:0
            },
]}); 
```

..我像这样与扩展项目的形式相结合

```
Ext.define('PC.view.FormEventoExtended', {
    extend:'PC.view.FormEvento',
    id:'FormEventoExtended',
    title:'Evento Extended',

    initComponent:function () {
        var me = this;

        Ext.applyIf(me, {
            items:me.commonItems.concat(
                [
                    {
                        xtype:'textfield',
                        fieldLabel:'personal1',
                        name:'personal1'
                    },
                    {
                        xtype:'textfield',
                        fieldLabel:'personal2',
                        name:'personal2'
                    }
                ])
        });
        me.callParent(arguments);
    }
}); 
```

我将基本形式的 commonItems 连接到扩展形式的个人项目。在 Ext 4 中是否有一种可以原生的形式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-29T12:06:04.903

I don't know any native way of doing this, but I prefer a "best practice" of putting in a method *buildItems* in every class extending Component, which returns an array with items:

```
Ext.define('PC.view.FormEvento', {
    extend: 'Ext.form.Panel',
    id: 'FormEvento',
    url: 'controller/action',
    bodyPadding: 10,

    initComponent: function () {
        this.items = buildItems();

        this.callParent(arguments);
    },

    buildItems: function () {
        return [
            {
                xtype: 'hiddenfield',
                name: 'id',
                value:0
            },
        ];
    }
]}); 
```

When you extend from this class, changing the items becomes a simple as overwriting the buildItems method, calling the parent and adding or inserting additional items:

```
Ext.define('PC.view.FormEventoExtended', {
    extend: 'PC.view.FormEvento',
    id: 'FormEventoExtended',
    title: 'Evento Extended',

    buildItems: function () {
        var items = this.callParent(arguments);

        return Ext.Array.push(items, [
            {
                xtype:'textfield',
                fieldLabel:'personal1',
                name:'personal1'
            },
            {
                xtype:'textfield',
                fieldLabel:'personal2',
                name:'personal2'
            }
        ]);
    }
}); 
```

When the number of items grows, it makes sense to create additional methods, e.g. *buildFieldsetAddressItems*. This comes with the benefit that your list of items stays more readable, imho.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T16:36:56.183

您可以在`PC.view.FormEvento`构造函数中简单地编写如下内容：

```
initComponent: function() {
   var me = this;

   me.items.push({
      xtype:'hiddenfield',
      name:'id',
      value:0
   });
   me.callParent(arguments);
} 
```

当这个构造函数被调用时，对象已经在子对象中配置了项目。

# c# - 如何使用放大 API 在 WPF 中创建放大镜组件

> ID：11725412
> 
> 赞同：2
> 
> 时间：2012-07-30T16:16:06.403
> 
> 标签：c#, wpf, windows, winapi, magnification

我想创建一个托管放大镜的 WPF 组件，所以我从[http://msdn.microsoft.com/en-us/library/ms742522.aspx开始](http://msdn.microsoft.com/en-us/library/ms742522.aspx)

这是一些代码[http://pastebin.com/tRFYJ1be](http://pastebin.com/tRFYJ1be)

现在我收到错误消息：返回托管的子窗口句柄时 BuildWindowCore 失败。

我该如何解决这个问题。如果有更好的解决方案我在这里:)

谢谢你

# c++ - 初始化向量成员变量的正确方法

> ID：11725413
> 
> 赞同：59
> 
> 时间：2012-07-30T16:16:07.350
> 
> 标签：c++

```
// Method One
class ClassName
{
public:
    ClassName() : m_vecInts() {}

private:
    std::vector<int> m_vecInts;
}

// Method Two
class ClassName
{
public:
    ClassName() {} // do nothing

private:
    std::vector<int> m_vecInts;
} 
```

Question> 初始化类的vector成员变量的正确方法是什么？我们是否必须初始化它？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-30T16:19:46.747

请参阅[http://en.cppreference.com/w/cpp/language/default_initialization](http://en.cppreference.com/w/cpp/language/default_initialization)

> 默认初始化在三种情况下执行：
> 
> 1.  当声明具有自动存储持续时间的变量时没有初始化器
> 2.  当具有动态存储持续时间的对象由没有初始化程序的 new 表达式创建时
> 3.  当构造函数初始值设定项列表中未提及基类**或非静态数据成员并且调用该构造函数时**。
> 
> 默认初始化的效果是：
> 
> *   如果 T 是**类类型，则调用默认构造函数为新对象提供初始值**。
> *   如果 T 是数组类型，则数组的每个元素都是默认初始化的。
> *   否则，什么都不做。

由于`std::vector`是类类型，因此调用其默认构造函数。所以不需要手动初始化。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-07-30T16:18:27.190

这取决于。如果你想要一个大小为 0 的向量，那么你不需要做任何事情。如果你想要一个大小为 42s 的 N 向量填充，那么使用构造函数初始化列表：

```
ClassName() : m_vecInts(N, 42) {} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-09-16T17:37:23.307

从 C++11 开始，您还可以直接在类声明中使用非静态成员的[列表初始化：](https://en.cppreference.com/w/cpp/language/list_initialization)

```
class ClassName
{
public:
    ClassName() {}

private:
    std::vector<int> m_vecInts {1, 2, 3}; // or = {1, 2, 3}
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-30T16:18:22.293

您不必显式初始化它，它将在您创建类的实例时创建。

# c++ - Delphi 和 C/C++ DLL

> ID：11725414
> 
> 赞同：0
> 
> 时间：2012-07-30T16:16:07.903
> 
> 标签：c++, c, delphi, memory-management, dll

我有一个使用 BTMemoryModule 并从 DLL 导入/调用函数的 delphi 应用程序。DLL 是用 C/C++ 编写的。

delphi 应用程序将原始 pwidechar（4 字节数组或宽字符数组）发送到函数。

我没有 C/C++ 伪代码，但它看起来像这样：

```
type
 TMyFunc = function ( p  : pointer ): pointer; stdcall;

procedure anynamehere();
var
 Addr     : TMyFunc;
 MyString : WideString;
begin
 [...]
  Addr := BTMemoryGetProcAddress('mydll.dll', 'ExportedFunc');
  MyString := 'TEST';
 [...]
 ExportedFunc (pwidechar(MyString));
 MessageBoxW (0, pwidechar(MyString), '', 0);
end; 
```

DLL 现在应该具有指向 MyString var 的原始指针。delphiapp 中的过程保持活动状态（直到 dll ExportedFunc 完成）。因此，MyString var 在过程结束后不会被释放。我现在的问题是：是否可以在 DLL 中更改 MyString 的值？（技术上可能......）但是如何？该字符串以空结尾，因此用户知道指针长度有多长。但是如果 C++ DLL 改变了值，用户是不是也分配了新的空间什么的？或者这会自动发生吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:39:32.323

如果需要，欢迎 DLL 更改指向的内存，它也不需要知道 的地址`MyString`。它只需要知道*存储在 中* `MyString`的地址，这正是您已经传递给它的地址。由于该函数接收一个指向以空值结尾的数组的指针`WideChar`，因此该函数应声明如下：

```
void* __stdcall ExportedFunc(wchar_t* arg); 
```

它可以用 找出缓冲区的长度[`wcslen`](http://msdn.microsoft.com/en-us/library/78zh94ax.aspx)，然后以通常的方式修改缓冲区的内容。例如：

```
{
  size_t const len = wcslen(arg);
  for (size_t i = 0; i < len; ++i)
    if (arg[i] == 'a')
      arg[i] = 'e';
  return 0;
} 
```

如果你愿意，你可以让它返回一些其他的指针值，但是由于调用者忽略它，在这种情况下它并不重要。

当调用者为 分配值时`MyString`，操作系统会代表程序通过 自动分配空间[`SysAllocString`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221458.aspx)。然后调用者将该缓冲区传递给 DLL，DLL 可以对其进行修改。调用者之后不需要对缓冲区做任何特殊的事情。`SysFreeString`当调用函数结束并`MyString`超出范围时， Delphi 会自动调用。

您还可以删除`PWideChar`类型转换并声明函数以`WideString`在 Delphi中接收 a，`BSTR`在 C++ 中接收 a。除了使用[`SysStringLen`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221240.aspx)代替`wcslen`. 您可以`MyString`直接传递给函数：

```
ExportedFunc(MyString); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T16:37:09.017

C++ 代码可以更改传入的 pwidechar 数组的内容，但它无法更改 delphi 所理解的字符串的长度，因为 C++ 代码本身不理解 delphi 样式的字符串。它接收的只是一个`wchar *`参数。

如果您想对字符串进行重大更改，例如使其更长，那么您需要通过使用在调用者中分配至少尽可能多的空间`SetLength(MyString, size)`，然后在返回时检查长度，然后再调用`SetLength(MyString, retSize)`字符串使其成为返回的大小。

同样，对于缓冲区溢出等通常的警告。

我注意到该函数返回一个指针；如果 C++ 代码使用 分配内存`new()`，那么您将无法从 Delphi 代码管理此内存，因为两个内存分配系统不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T16:37:15.163

DLL 被传递一个指向缓冲区的指针。DLL 完全有可能修改该缓冲区。DLL 可以修改您的代码传递给它的 4 个宽字符中的任何一个。它还可以修改第五个字符，即空终止符。

但是，DLL 无法创建新缓冲区并让调用代码看到该新缓冲区。

# php - AngularJS：从 firebug 和用户会话中隐藏 ajax 数据

> ID：11725416
> 
> 赞同：3
> 
> 时间：2012-07-30T16:16:10.800
> 
> 标签：php, mysql, angularjs

我正在使用 AngularJS 创建一个站点，该站点将允许用户在站点上创建帐户并无缝登录，而无需重新加载页面。要创建这样的站点，我使用 AngularJS 路由加载不同的部分，并使用 $http 通过 xhr 访问 php 脚本。正如已经提到的，我使用 php 进行服务器端脚本，我使用 mysql 来存储我的数据。

我的问题是没有页面重新加载通过 $http 服务提交到服务器的数据将显示在 firebug（或等效工具）的网络选项卡中。这意味着密码等私人数据可以通过这些工具暴露，直到页面关闭。现在我想找到一种方法来阻止用户在任何工具中查看这些数据。我可以加密数据客户端。问题在于脚本仍然暴露在外。有没有其他人认为这是一个问题并找到任何解决方法？

我需要考虑的另一件事是以角度存储用户会话的最佳方式是什么？最好使用 php 的会话并使用 $http 或使用 cookie 获取它的状态？同样，这两种方法都存在与安全相关的问题。对于 cookie，我需要加密内容并使用会话变量通过 ajax 来回传递数据，它可以使用 firebug 访问所有内容。所以我再次想知道人们对此的看法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:27:49.587

对于密码可见性问题，您可以执行密码散列客户端。javascript 代码是可见的，是的，但这不会造成问题。散列函数是单向的，因此无法根据散列结果检索您的密码。javascript 可以对 salt 进行硬编码，因为它不是秘密（[https://stackoverflow.com/a/536756](https://stackoverflow.com/a/536756)）。

或者，您可以在将其与数据库值进行比较之前在服务器端实现第二个哈希。但这仅在您存在导致密码值读取的漏洞但同一漏洞不允许数据库更新的情况下提供保护。

对于其他数据，您可以考虑 diffie-hellman 密钥交换。

为确保客户端执行的 javascript 确实是您提供的脚本，您需要 https。它还可以保护您的频道，但不会影响您的浏览器或萤火虫（[这是正确的吗？萤火虫应该看到受 SSL 保护的 AJAX 吗？](https://stackoverflow.com/q/3507903)）。

我正在用 angularjs 和 php 实现类似的东西，但决定不使用客户端散列或 diffie-hellman 密钥交换。您要保护自己免受的情况很难实现。入侵者需要在您登录之前和之后访问您的浏览器。

# php - 基于 SUM 的 mysql 选择

> ID：11725420
> 
> 赞同：2
> 
> 时间：2012-07-30T16:16:30.570
> 
> 标签：php, mysql

我需要做一个 mysql 查询，但我不知道该怎么做。

`$x`我想通过将 2 个表字段加在一起（在划分它们之后）来选择大于 php 值的行。

伪代码：

```
 SELECT * FROM table WHERE (field_a/50 + field_b/20)  > $x 
```

这`$x`是一个php值，它只是我需要的总和。

有人有提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:20:15.710

这几乎是您编写的伪代码：

```
$x = 100; // example
$x = mysql_real_escape_string($x); // "securing" the value.

$sql = "SELECT * FROM table WHERE (field_a/50 + field_b/20)  > '$x'";

$result = mysql_query($sql); 
```

使用参数更优雅，但你明白了。这样，如果 SQL 查询`$x`为空或有任何非预期值，您就可以弄乱 SQL 查询。`mysql_real_escape_string`我处理了这个问题，在查询中使用它之前转义了值。

**编辑**

使用 MySQLi 的相同示例：

```
$stmt = $mysqli->prepare("SELECT * FROM table WHERE (field_a/50 + field_b/20) > ?");

// "i' is a format string, each "i" means integer
$stmt->bind_param("i", $x); // use "d" instead of "i" for double

$stmt->execute();
$stmt->bind_result($col1, $col2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:18:57.580

这几乎就是你要做的事情。除了在构建查询字符串之前确保 $x 是正确的数字之外，您已经掌握了它。

一个小建议 - 如果您经常执行此类查询，您可能需要考虑将这些`field_a/field_b`内容的值缓存在单独的字段中。这是一种轻微的非规范化，但它允许对该字段进行索引并可能提高性能。现在，您正在对派生/计算值执行 where，这使得无法使用索引。

# c# - c# NET 3.5 中的应用程序/解决方案，但需要参考 NET 4.0

> ID：11725424
> 
> 赞同：1
> 
> 时间：2012-07-30T16:16:42.957
> 
> 标签：c#, .net, .net-3.5

我有 NET 3.5 的 ac# 应用程序/解决方案（只有少数类和文件）。所以在目标框架下你会看到 3.5。

但是 1 个参考 (System.Xaml) 来自 NET 4.0。

而且我不允许将整个解决方案切换到 NET 4.0。如何在针对 3.5 的解决方案中使用 System.Xaml (4.0)？

编辑：是否可以在 1 个解决方案中包含 2 个项目，其中一个针对 NET 3.5，另一个针对 4.0。关键是在 3.5 项目中“启动”了一些其他应用程序，它只接受 3.5

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T16:17:22.937

你不能。它在较新的 CLR 上运行。

# php - 仅限管理员的导航小部件

> ID：11725427
> 
> 赞同：1
> 
> 时间：2012-07-30T16:17:01.767
> 
> 标签：php, html, css

我正在尝试为我的网站创建一个仅限管理员使用的小导航面板，该面板仅在管理员登录时才可见。我的所有会话逻辑工作正常，我只是不确定一件事。

将导航面板 HTML 代码始终放在源代码中是否更标准的做法，但只是根据用户是否以管理员身份登录使用 PHP 更改显示属性？所以像

```
<head>
<?php 
   if($_SESSION['loggedin']) { 
     echo "<style>#adminPanel { display:block; }</style>";
   }
?>
</head> 
```

在拥有原始 CSS 的同时`display:none;`？

或者

如果用户登录，让 PHP 回显完整的 adminPanel HTML？像：

```
<?php
  if($_SESSION['loggedin'])
  {
     ?>

        //HTML for adminPanel goes here

     <?php
  }
?> 
```

我基本上想知道什么方法是标准的，或者它们是否同样可以接受？谢谢

我不确定这个问题是否被认为是主观的，如果是的话，很抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T16:19:35.477

用户可以在第一种方法中即时编辑 CSS 并公开您的管理面板。因此，第二个更可取，因为您不会输出任何您不希望用户看到的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T16:20:28.767

如果某些东西应该对未经授权的人不可见，那么首先不要将其发送给客户。这可能是默默无闻的安全，但为什么要吹嘘有一个管理面板并准确说出它在哪里呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T16:29:33.067

我可能正在睡觉，但两者不是在做完全相同的事情，但第一个示例只是简单地回显 HTML 标记？

要回答您的问题：

我通常包装所有应该具有某种形式的访问权限的元素，就像您在示例 #2 中所做的那样。使它更容易阅读，并且当您不可避免地错过其中一个引号时可以避免头疼。

您还可以制作一个简单的“如果登录则包含”，例如：

```
<?php
    if($_SESSION['loggedin']{

    include('/path/to/adminpanel.php');
}
?> 
```

Wich 是我的一般方法，因为它更加简化了更新和更改。这也意味着您想要包含的特定于管理面板的 JS 对标准用户是不可见的，因为这将在“adminpanel.php”中请求

# java - 使用 Google App Engine 在服务器端读取 ID3 标签

> ID：11725429
> 
> 赞同：2
> 
> 时间：2012-07-30T16:17:09.883
> 
> 标签：java, google-app-engine, gwt, mp3, id3

我一直在寻找几个星期来找到一个解决方案，该解决方案允许我从已上传到 Google App Engine 的 mp3 文件中读取 id3 标签。上传的文件存储在 Blobstore 中，我正在使用 Java 进行编码。

我想请求帮助完成两项任务：

1.  我想访问可以从最流行的音频文件格式中读取 id3 信息的库或方法。我已经尝试了一些可以做到这一点的库，但它们都需要访问 GAE 不支持的 java.io.File。因此，必须从内存或其他 GAE 支持的访问方法中读取帧/标签。
2.  我想知道如何从 doPost 方法中获取字节，而不是再次访问 blobstore。

以下是我希望完成的代码：

```
protected void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {

    Map<String, List<BlobKey>> blobs = blobstoreService.getUploads(req);
    List<BlobKey> blobKeys = blobs.get("aud-file");

    BlobKey fileKey = blobKeys.get(0);
    BlobInfo info = blobInfoFactory.loadBlobInfo(fileKey);
    String filename = info.getFilename();
    long size = info.getSize();
    Date created = info.getCreation();
    String key = info.getBlobKey().getKeyString();

    // TODO: Get mp3 file that was just uploaded and retrieve ID3 tag 
    //       info.

    SimpleDateFormat formatter = new SimpleDateFormat();
    formatter.applyPattern("yyyy-MM-dd'T'HH:mm:ss.SSSZ");
    StringBuilder builder = new StringBuilder();
    builder.append("<?xml version=\"1.0\" ?>");
    builder.append("<file name=\"" + filename + "\" ");
    builder.append("size=\"" + Long.toString(size) + "\" ");
    builder.append("created=\"" 
            + formatter.format(created).toString() + "\" ");
    builder.append("key=\"" + key + "\">");

    // TODO: append Title, Artist, and Duration of audio file for 
    //       response to client side code

    builder.append("</file>");

    resp.setStatus(HttpServletResponse.SC_OK);
    resp.setContentType("text/html;charset=\"utf-8\"");
    PrintWriter writer = resp.getWriter();
    writer.write(builder.toString());
    writer.flush();
    writer.close();
} 
```

上面的代码正在运行，对于任何想要从上传的文件中检索信息的人来说，这似乎是一个很好的模式。（如果在 Eclipse 中进行本地测试，请确保将您的 bindAddress 标志设置为本地机器名称，并将该名称作为主机添加到 GWT 开发人员插件选项中。）提前感谢您对此请求的任何帮助。

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:54:27.657

您可以尝试使用[Jaudiotagger](http://www.jthink.net/jaudiotagger/)。唯一的问题是它需要一个可读的`java.io.File`.

要完成这项工作，您可以尝试使用[`File`wrapper for GAE](http://code.google.com/p/appengine-java-io/source/browse/trunk/src/com/vobject/appengine/java/io/File.java?r=12)。一个使用它的例子是[here](http://code.google.com/p/project-nivt-mediavault/source/browse/tags/release_1.3.2/src/file/management/EditMP3MetadataServlet.java?r=457)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:35:56.623

Using GAE for storage of any kind of larger files is not such a good idea. According to this [wiki article](http://en.wikipedia.org/wiki/Google_App_Engine) there are hard limits to request/response times and also for the amount of data that can be transferred:

*   Response must return within 60 seconds (assuming you have a large file and slow connection this could be a problem)
*   request can be max 1MB large (not shure of this)
*   response can be max 32 MB large
*   also I think there is a 1MB limit of entry in blob store (so even if you manage to get the file there, you would have to split the file into multiple entries)

i think it would be good if you just make a few tests before doing some real work there.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:30:49.453

使用 blobstore 和 createUploadUrl 上传文件后，数据已经在 blobstore 中，您**只能**使用 blobstore API 访问它。

# wordpress - WordPress - 插件

> ID：11725441
> 
> 赞同：0
> 
> 时间：2012-07-30T16:17:59.633
> 
> 标签：wordpress

我对wordpress相当陌生，但我正在尝试修改模板，基本上如果您访问该网站，您会看到菜单下方有一个图片框新闻（黑色，灰色图像和文本）现在基本上我想替换那个带有 nivo 滑块的盒子。我已经在网站上安装了简单的 nivo 滑块插件。但是，模板没有我想要更改的区域的小部件区域，我不知道如何将一个换成另一个。

```
 http://79.170.40.241/shaddersafrica.com/ 
```

在 index.php 主页面上，这段代码控制图片框中的新闻。

```
<?php include( TEMPLATEPATH . '/includes/latest-post.php' ); ?> 
```

现在我尝试用 simple-nivo-slider 插件的链接替换它，就像这样

```
<?php include( TEMPLATEPATH . '../../plugins/simple-nivo-slider/simple-nico-slider.php' ); ?> 
```

但是，当我这样做时，什么都没有显示。

谢谢

李

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T04:58:59.920

我选择简单的方式来添加[WordPress 幻灯片插件](http://www.cincopa.com/media-platform/wordpress-plugin/slideshow)或视频插件。在小部件区域中搜索 cincopa 插件。您可以使用简码轻松嵌入任何类型的媒体插件。您也可以在 Cincopa 中存储图像和视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T22:02:16.613

该插件应该带有一个简码，您可以通过主 wordpress WYSIYYG 编辑器简单地输入该简码。

# jquery - Fancybox 2 标题中的链接

> ID：11725443
> 
> 赞同：2
> 
> 时间：2012-07-30T16:18:06.757
> 
> 标签：jquery, fancybox, fancybox-2

我正在使用 Fancybox 2 生成画廊。除了文字之外，如有必要，我还想在照片的标题中添加链接。

这是我想在标题中包含链接的页面：http: [//catjohnson.co.uk/weddings](http://catjohnson.co.uk/weddings)

通过简单地在其中添加一个 html 链接（按照这个答案：[在 Prettyphoto.js 或 Fancybox...如何在标题中添加链接](https://stackoverflow.com/questions/4876640/in-prettyphoto-js-or-fancybox-how-to-add-a-link-within-the-caption)）它会破坏画廊中的照片。

我试过关注这个[http://jsfiddle.net/FWTZA/](http://jsfiddle.net/FWTZA/)虽然它有效，但我失去了我的风格。

我似乎无法让我的样式与 js fiddle 代码集成......这是我现在正在做的事情，它正在工作：

```
$(document).ready(function() {
    $(".fancybox").fancybox({
        openEffect  : 'fade',
        closeEffect : 'fade',
        nextEffect  : 'fade',
        prevEffect  : 'fade',
            helpers : {
                title : {
                    type : 'inside'
                },
                overlay : {
                    css : {
                        'background-color' : '#eee'
                    }
                }
            }
    });
}); 
```

我希望这是有道理的！

谢谢参观！

马丁:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T17:54:44.177

对于这个 html

```
<a class="fancybox" data-title-id="title-1" href="http://fancyapps.com/fancybox/demo/1_b.jpg"><img src="http://fancyapps.com/fancybox/demo/1_s.jpg" alt=""/></a>
<div id="title-1" class="hidden">
    This is 1st title. <a href="http://google.com">Some link</a>
</div>

<a class="fancybox" data-title-id="title-2" href="http://fancyapps.com/fancybox/demo/2_b.jpg"><img src="http://fancyapps.com/fancybox/demo/2_s.jpg" alt=""/></a>

<div id="title-2" class="hidden">
    This is <b>2nd title</b>. <a href="http://google.com">Some link</a>
</div>​ 
```

...设置 helpers 选项，不要忘记用逗号分隔每个选项，例如：

```
$(".fancybox")
    .attr('rel', 'gallery')
    .fancybox({
        openEffect  : 'fade',
        closeEffect : 'fade',
        nextEffect  : 'fade',
        prevEffect  : 'fade',
        helpers : {
                title : {
                    type : 'inside'
                },
                overlay : {
                    css : {
                        'background-color' : '#eee'
                    }
                }
            },
        beforeLoad: function() {
            var el, id = $(this.element).data('title-id');
            if (id) {
                el = $('#' + id);

                if (el.length) {
                    this.title = el.html();
                }
            }
        }
    });​ 
```

工作示例：http: [//jsfiddle.net/FWTZA/372](http://jsfiddle.net/FWTZA/372)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-20T05:51:56.567

以下是我们的做法，将所有图片和网址从数据库中提取出来：

```
$(document).ready(function() {              
 $.fancybox(
  [ 
   { href : '/images/gallery_pic.php?id=229', title: 'Sample image one', rel : 'fancybox-thumb', class : 'fancybox-thumb'},
   { href : '/images/gallery_pic.php?id=167', title: ' Sample image two <a href="http://www.address" target="_blank">See site</a>', rel : 'fancybox-thumb', class : 'fancybox-thumb'}
  ],
  {
   type : 'image',
   autoScale : true,
   prevEffect : 'none',
   nextEffect : 'none',
   helpers : {
    title   : {
        type: 'inside',
        position: 'top'
    },

   } // closes helpers
  }               
 );
}); 
```

# session - Tomcat 管理器和“空”会话

> ID：11725446
> 
> 赞同：4
> 
> 时间：2012-07-30T16:18:23.737
> 
> 标签：session, tomcat7

我们正在尝试解决一些性能问题，我们的 Tomcat 服务器刚刚停止响应传入的请求。我们注意到的一件事是，当您打开 Tomcat 管理器并查看我们的 web 应用程序的会话时，有很多“空白会话”。我的意思是没有“使用时间”和“创建时间”/“上次访问时间”匹配的会话。然后，当单击会话 ID 时，只有一个名为“tasks”的属性具有 {} 的值。我不知道是什么在创造这些，但我知道它们有很多。我只是好奇是否有人以前见过这个，并且可能知道是什么原因造成的。

运行 Tomcat 7.0.29。

感谢您的时间。

# c# - Code First 中外键的级联删除

> ID：11725448
> 
> 赞同：5
> 
> 时间：2012-07-30T16:18:29.057
> 
> 标签：c#, entity-framework

我无法让级联删除正常工作。这是我的外键表：

```
public class CoverageLevel
{
    public int Id { get; set; }
    public virtual MedicalPlan MedicalPlan { get; set; }  //foreign key
    public virtual VisionPlan VisionPlan { get; set; }    //foreign key
    public virtual DentalPlan DentalPlan { get; set; }    //foreign key
} 
```

我尝试了三种不同的方法。当我不使用任何流畅的 API 时，它会适当地设置表和外键，但级联删除不起作用。当我使用此代码时：

```
modelBuilder.Entity<MedicalPlan>().HasMany(t => t.CoverageLevels).WithOptional.WillCascadeOnDelete(); 
```

它创建了第二列，所以我有一个完全为空`MedicalPlan_Id`的，然后是一个`MedicalPlan_Id1`它填充的。当我使用这个时：

```
modelBuilder.Entity<MedicalPlan>().HasMany(t => t.CoverageLevels).WithOptional().HasForeignKey(d => d.MedicalPlan).WillCascadeOnDelete(); 
```

创建数据库时出现错误。如何正确设置级联删除？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T20:51:47.670

```
modelBuilder.Entity<MedicalPlan>()
    .HasMany(m => m.CoverageLevels)
    .WithOptional(c => c.MedicalPlan)
    .WillCascadeOnDelete(); 
```

...应该是正确的映射。如果您在`Withoptional(...)`EF 中省略 lambda 表达式，则假定实体`MedicalPlan.CoverageLevels`中没有反向导航属性并且属于另一个关系，这就是第二个外键的原因。`CoverageLevel``CoverageLevel.MedicalPlan`

# c# - 在数据库中保存日期

> ID：11725453
> 
> 赞同：1
> 
> 时间：2012-07-30T16:18:51.403
> 
> 标签：c#, asp.net, sql, calendar

是否有任何简单的想法来创建日历，使用户能够选择一个日期并将其保存在数据库中？

我正在创建一个系统，在线汽车租赁。到目前为止，一切看起来都不错，但我在执行预订日期时遇到了困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:20:28.410

为什么不使用标准 ms sql 类型`datetime`？

对于 html 中的日历控件，您可以使用 jQuery UI datePicker - jqueryui.com/demos/datepicker/

Winforms 和 WPF 在标准库中有这样的控制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:31:43.487

.NET 框架为此目的包含一个日历控件。它是一个组合文本框和基于 Javascript 的日历。（我用的是4.0框架，标准工具箱里有日历控件）

您应该能够根据数据库中的内容存储和设置值。

如果要实现 AJAX 控件工具包，还有一个启用 Ajax 的日历控件。

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)

# c# - Microsoft.VisualBasic.Device.Network.Upload 是如何工作的？

> ID：11725455
> 
> 赞同：0
> 
> 时间：2012-07-30T16:18:55.750
> 
> 标签：c#, php, .net

我正在用 C# 编写一个 DLL，并且正在引用这个 VB 程序集。梳理互联网后，我找不到此功能在服务器端的工作原理。您将如何编写 PHP 脚本来接收此函数上传的文件？它是 $_POST 它还是 $_FILE 它？

编辑：我听从了 Adnan 的建议并使用了 var_dumped $_POST、$_FILE、$_REQUEST 和 php://input。都想不出什么有用的东西。即使有一个空白文件，名称也不会出现。

这是该函数的 DLL 代码。我有一个以相同方式工作的下载功能。

```
public object UploadFile(string ToPath, string FromPath)
    {
        try
        {
            MyProject.Computer.Network.UploadFile(FromPath, ToPath);
        }
        catch (Exception exception1)
        {
            ProjectData.SetProjectError(exception1);
            ProjectData.ClearProjectError();
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:29:13.707

Network.Uploadfile 在内部使用[WebClient.UploadFileAsync](http://msdn.microsoft.com/en-us/library/system.net.webclient.uploadfileasync.aspx)和 POST 请求（除非您指定 ftp 服务器作为目标地址）。看起来更深入一点（使用 ILSpy），它似乎创建了一个完整的“multipart/form-data”-request（即，就像您将文件上传放在 html 表单中一样）所以它应该在 $_FILE 中可用（不是它是 $_FILES？）。

# c# - 为什么使用 MessageQueue 来存储异常消息？

> ID：11725457
> 
> 赞同：0
> 
> 时间：2012-07-30T16:18:59.820
> 
> 标签：c#, .net, error-handling, msmq

使用消息队列存储错误对 webapp 开发人员有什么好处？

我们有一些遗留代码允许我们的用户将错误从他们的 web 应用程序记录到消息队列。webapp 可以存在于集群上，因此可能需要一些中心位置来记录错误。我们还提供文件记录器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:29:34.680

主要好处包括：

1.  该应用程序不必处理实际的日志记录机制，从而摆脱了瓶颈。
2.  由于它驻留在集群上，所有实例都可以报告它们的错误，并且一个聚合服务可以管理处理它们。
3.  如果在处理错误期间发生错误，因为它在队列中，最好准备好保持该实例并重试直到满足任何算法 - 但它没有保持任何东西，因为队列只是堆积等待另一个接收消息。
4.  如有必要，您可以建立多个错误处理服务以从共享队列中读取来处理负载。

可能还有更多，这只是我的想法。

# ruby-on-rails - Hartl Rails 教程，第 8.3 章，Cucumber 有 0 个场景 0 个步骤

> ID：11725458
> 
> 赞同：2
> 
> 时间：2012-07-30T16:19:00.387
> 
> 标签：ruby-on-rails, cucumber

我正在学习 Hartl 的 Rails 教程 (http://ruby.railstutorial.org/chapters/sign-in-sign-out#sec:cucumber)。

我完成了第 9 章，然后决定回去做第 8.3 章中可选的 Cucumber 部分。

我在 Gemfile 中添加了 cucumber-rails 和 database_cleaner：

```
group :test do
    gem 'capybara', '1.1.2'
    gem 'rb-fsevent', '0.4.3.1', :require =     false
    gem 'growl', '1.0.3'
    gem 'factory_girl_rails', '1.4.0'
    gem 'cucumber-rails', '1.2.1', require: false
    gem 'database_cleaner', '0.7.0'
end 
```

在终端中，我运行了以下命令：

```
bundle install
rails generate cucumber:install 
```

一切似乎都安装得很好。然后我将文件“signing_in.feature”添加到“features/”目录中。

```
Feature: Signing in

    Scenario: Unsuccessful signin
        Given a user visits the signin page
        When he submits invalid signin information
        Then he should see an error message

    Scenario: Successful signin
        Given a user visits the signin page
            And the user has an account
            And the user submits valid signin information
        Then he should see his profile page
            And he should see a signout link 
```

然后我运行了这个：

```
bundle exec cucumber features/ 
```

这是终端的结果：

```
Using the default profile...
Feature: Signing in

0 scenarios
0 steps
0m0.000s 
```

我想我预计会有 2 个场景和 2 个失败。有没有我遗漏的步骤？我在第 9 章中添加的任何内容会干扰这一点吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:39:24.457

我可能没有保存其中一个文件。我回去保存了它，它现在按预期工作。

这里没什么好看的，离开。:)

# php - PHP Scrape 文章摘录，如可读性

> ID：11725460
> 
> 赞同：6
> 
> 时间：2012-07-30T16:19:18.333
> 
> 标签：php, web-scraping

我已经看到[了这个问题](https://stackoverflow.com/questions/3450764/php-extract-article-excerpt-from-a-page)，但它并不能真正满足我正在寻找的东西。该问题的答案是：从元描述标签中提取，第二个是为您已经拥有正文的文章生成摘录。

我想要做的实际上是获取*文章*的前几句话，就像 Readability 一样。什么不是最好的方法？HTML解析？这是我目前正在使用的，但这不是很可靠。

```
function guessExcerpt($url) {
    $html = file_get_contents_curl($url);

    $doc = new DOMDocument();
    @$doc->loadHTML($html);

    $metas = $doc->getElementsByTagName('meta');

    for ($i = 0; $i < $metas->length; $i++)
    {
        $meta = $metas->item($i);
        if($meta->getAttribute('name') == 'description')
            $description = $meta->getAttribute('content');

    }

    return $description;
}

function file_get_contents_curl($url) {
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_TIMEOUT, 5);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

    $data = curl_exec($ch);
    curl_close($ch);

    return $data;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-23T04:11:28.203

这是 PHP 中可读性的一个端口：[https](https://github.com/andreskrey/readability.php) ://github.com/andreskrey/readability.php 。就试一试吧。提取结果将类似于 Readability（因为它实现了 Readability 的算法）。

```
require 'lib/Readability.inc.php';

$html = file_get_contents_curl($url);

$Readability     = new Readability($html, $html_input_charset); // default charset is utf-8
$ReadabilityData = $Readability->getContent();

$title   = $ReadabilityData['title'];
$content = $ReadabilityData['content']; 
```

然后你可以使用一些句子`$content`作为摘录。

# symfony - 添加自定义按钮以编辑奏鸣曲管理包的页面

> ID：11725476
> 
> 赞同：8
> 
> 时间：2012-07-30T16:20:03.463
> 
> 标签：symfony, sonata-admin

如您所知，奏鸣曲管理包在编辑页面中带有三个按钮，分别是“添加新、更新和删除”。我可以用这个删除删除按钮：

```
protected function configureRoutes(RouteCollection $collection)
{
    $collection
        ->remove('delete')
    ;

} 
```

但我还想在 UserAdmin 的编辑中添加“向用户发送消息”按钮。我怎样才能做到这一点？我在奏鸣曲文档中找不到任何关于此的文档。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-25T14:20:35.003

如果文件在其他命名空间中，您应该提示参数，并且 add() 方法应该可以工作，但是您必须覆盖 Sonata 的 CRUD 模板才能显示其他按钮/链接。
此外，您可以定义将被调用的控制器和操作。

例如：
src/Acme/DemoBundle/Admin/EntityAdmin.php：

```
protected function configureRoutes(\Sonata\AdminBundle\Route\RouteCollection $collection)
{
    $collection
        ->add('dummy',
            'dummy/{id}',
            array('_controller' => 'AcmeDemoBundle:Default:dummy'),
            array('id' => '\d+')
        )
    ;
} 
```

src/Acme/HelloBundle/Controller/DefaultController.php：

```
/**
    @Route("/dummy/{id}", name="dummy",
        requirements={"id" = "\d+"}
    )
    @Template("AcmeDemoBundle:Default:dummy.html.twig")
*/
public function dummyAction($id)
{
    return(array(
        'id' => $id
    ));
} 
```

应用程序/资源/SonataAdminBundle/views/CRUD/base_edit_form.html.twig：

```
{% block form %}
    ...
    {% else %}
        ...
        {% block formactions %}
            ...
            {% else %}
                ...
                {% if admin.id(object) %}
                    ...
                    {% if admin.hasroute('dummy') %}
                        <a class="btn" target="_blank" href="{{ admin.generateObjectUrl('dummy', object) }}">{% trans from 'SonataAdminBundle' %}link_dummy{% endtrans %}</a>
                    {% endif %}
                    ... 
```

# .net - 域实体对象的 Fluent-NHibernate ICompositeUserType

> ID：11725478
> 
> 赞同：0
> 
> 时间：2012-07-30T16:20:06.617
> 
> 标签：.net, nhibernate, fluent-nhibernate

我有以下域实体对象：

```
public class Report
{
    public virtual int Id { get; set; }
    public virtual int Score { get; set; }
    public virtual EntityType Type { get; set; }
    public virtual Object Entity { get; set; }
}

public class Category 
{ 
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
}

public class Topic
{ 
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
} 
```

Report.Entity 可以是类别或主题。类型由 Report.Type 指示。EntityType 是一个枚举。目标是能够使用 fluent-nhibernate 保存报告类。我相信我可以使用 ICompositeUserType 来完成此操作，这将为我提供以下信息：

```
public class Report
{
    public virtual int Id { get; set; }
    public virtual int Score { get; set; }
    public virtual EntityCompositeUserType Entity { get; set; }
    public virtual EntityType Type { get; set; }
} 
```

我的问题是：是否可以让 EntityCompositeUserType 类中的 NullSafeGet 方法返回域实体对象（类别或主题）？我见过的所有 ICompositeUserType 示例都从当前表中的列（在我的例子中，从报告表中的列）创建一个新对象。我看到有人提到使用多个表中的列，但没有看到它的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:36:43.667

我会建议

```
public class Report
{
    public virtual int Id { get; set; }
    public virtual int Score { get; set; }
    public virtual Entity Entity { get; set; }
}

public class Category : Entity
{ 
    public virtual string Name { get; set; }
}

public class Topic : Entity
{ 
    public virtual string Name { get; set; }
}

public class Entity
{ 
    public virtual int Id { get; set; }
}

public ReportMap()
{
    ReferenceAny(x => x.Entity)...
        .EntityIdentifierColumn("entirtyid")
        .EntityTypeColumn("entitytype")
        .IdentityType<int>()
        .MetaType<string>()
        .AddMetaValue<Category>("category")
        .AddMetaValue<Topic>("topic");
} 
```

# r - 在 R 中，如何动态使用 update()？

> ID：11725479
> 
> 赞同：1
> 
> 时间：2012-07-30T16:20:12.287
> 
> 标签：r, lm

在 RI 中，经常需要循环遍历`lm`类型对象列表（例如`glm`, `lme`, `clm`）并使用新公式或其他参数更新它们。我这样做`lapply()`是因为它以相同的列表格式返回它们，名称完整，所以我可以继续这个过程。

有时我传递的论点是动态的，并且因每个模型而异。例如，

```
lapply(names(mylist) function(ii) {
  jj<-myotherlist[[ii]]; 
  update(mylist[[ii]],.~.+jj)
}) 
```

where`jj`是添加到列表中每个模型的术语，并在每个模型的基础上在其他列表中定义。

假设特定模型的预期结果公式应该是`y~a+b+c`. 取而代之的是，结果对象内的调用`lm`对象包含`y~a+b+jj`. 因此，在某些情况下，生成的`lm`对象行为正常，但每当需要评估公式时，它就会出错，因为`jj`它早已不复存在。是否有一种推荐的方法可以在将对象`update()`写入其输出时强制扩展其参数中的所有变量，`call`或者强制使用该`call`对象的函数在对象的内部上下文而不是全局上下文中评估调用`lm`，以便在至少我可以将新变量填充到样式对象通常包含的`model`对象中吗`data`？`lm`

而且，如果使用动态变量更新的部分*是*数据参数怎么办？例如：

```
data=cbind(sharedByAllModels,y=kk) 
```

... where`kk`是当前模型所独有的（可能是 sharedByAllModels 数据框中某些列的某种聚合）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:16:45.620

回答您的主要问题，您可以使用`bquote()`来控制更新公式对象的哪些部分（即 中的那些部分`.()`）得到评估。

```
mylist <- list(y ~ a + b, y ~ A + B)
myotherlist <- list("c", "C")

lapply(1:2, function(ii) {
    jj <- as.name(myotherlist[[ii]])
    update(mylist[[ii]], bquote(. ~ . + .(jj)))})
# [[1]]
# y ~ a + b + c
# 
# [[2]]
# y ~ A + B + C 
```

或者，`substitute()`以类似的方式使用：

```
lapply(1:2, function(ii) {
      jj <- as.name(myotherlist[[ii]])
      update(mylist[[ii]], substitute(. ~ . + jj))
      })
# [[1]]
# y ~ a + b + c
# 
# [[2]]
# y ~ A + B + C 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:13:56.847

Use `do.call`，它在执行前评估它的参数。请参阅[使用粘贴公式创建的 lme 拟合上的 anova 测试失败](https://stackoverflow.com/q/7666807/210673)。

# google-plus-one - 关于片段的图像未显示为 google plus 按钮

> ID：11725488
> 
> 赞同：1
> 
> 时间：2012-07-30T16:20:40.757
> 
> 标签：google-plus-one

我正在尝试确定为什么要用于 google plus 按钮片段的图像。我正在使用开放图形元标记来提供图像的 url。我还将图像当前设置为 120x120。我唯一不确定的是它是 .png 图像，而不是 .jpg 或 .gif。我在谷歌论坛或开发人员信息上找不到任何 .png 不起作用的东西，但我不知道问题出在哪里。我知道按钮的片段正在从打开的图形标记中获取标题和描述的信息，但无论它忽略图像，只是使用来自网站的随机图像。

**更新，我能够确定我的问题，打开的图元标记格式不正确，我需要有元属性并且我有元名称，以防有人想知道**

# android - 片段兼容性 onActivityResult() 不工作

> ID：11725490
> 
> 赞同：6
> 
> 时间：2012-07-30T16:20:52.743
> 
> 标签：android, android-manifest

我一直在开发一个利用 android 可比性库 (android-support-v4) 的 android 应用程序。在 SDK 20 之前，我能够使用`uses-sdk`清单中的以下条目来编译我的应用程序。

```
<uses-sdk android:minSdkVersion="7" /> 
```

我所有为结果开始活动的片段都正确收到了结果。

一天（在我更新到 SDK 20 之前）我正在修复 lint 问题，并`android:targetSdkVersion`根据 lint 标志的请求添加到清单中，我很快意识到我的所有片段都没有收到它们的 onActivityResilt() 调用。

现在，自从我更新到 SDK 20.0.1 后，我不得不在清单中使用`android:targetSdkVersion`in`uses-sdk`条目；否则永远不会生成 R.java。

这是我当前的`uses-sdk`清单条目

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="16" /> 
```

目前由于这个奇怪的错误，我的应用程序目前仍然被破坏。我已经尝试将我的兼容库更新为最新版本 r9。

我还仔细检查了我`startActivityForResult()`在片段中的所有调用。他们都通过片段的方法使用正确的调用。

**IE**

```
 this.startActivityForResult(intent, requestCode); 
```

**不是**

```
 this.getActivity().startActivityForResult(intent, requestCode); 
```

我目前的开发环境：

```
Android SDK 20.0.1
Android SDK Platform Tools 13
ADT 20.0.2 
```

任何帮助将不胜感激，因为这个错误目前是阻止我进行最终 beta 测试的砖墙。

**编辑**

这是我的输出`ant debug`

> $ ant debug Buildfile: /home/ricky/Development/workspace/location_ringer/LocationRinger/build.xml
> 
> -设置模式检查：
> 
> -设置调试文件：
> 
> -check-env: [checkenv] Android SDK 工具修订版 20.0.1 [checkenv] 安装在 /app/android-sdk-linux_86
> 
> -setup：[echo] 项目名称：ListActivity [gettype] 项目类型：应用程序
> 
> -设置调试模式：
> 
> -调试混淆检查：
> 
> -build-setup: [echo] Resolving Build Target for ListActivity... [gettarget] Project Target: Google APIs [gettarget] Vendor: Google Inc. [gettarget] Platform Version: 4.1 [gettarget] API level:
> 16 [echo] - --------- [echo] 如果需要，创建输出目录... [echo] ---------- [echo] Resolving Dependencies for ListActivity... [dependency] 库依赖：[依赖项] [依赖项] ------------------ [依赖项] 有序库：[依赖项] [依赖项] --------------- --- [dependency] API<=15：将 annotations.jar 添加到类路径。[echo] ---------- [echo] 使用“调试”构建库...
> 
> 节点：
> 
> -设置模式检查：
> 
> -设置调试文件：
> 
> -check-env: [checkenv] Android SDK 工具修订版 20.0.1 [checkenv] 安装在 /app/android-sdk-linux_86
> 
> -setup：[echo] 项目名称：LocationLib [gettype] 项目类型：Android 库
> 
> -设置调试模式：
> 
> -调试混淆检查：
> 
> -build-setup: [echo] Resolving Build Target for LocationLib... [gettarget] Project Target: Google APIs [gettarget] Vendor: Google Inc. [gettarget] Platform Version: 4.1 [gettarget] API level:
> 16 [echo] - --------- [echo] 如果需要，创建输出目录... [echo] ---------- [echo] 解析 LocationLib 的依赖项... [dependency] 库依赖项：[ dependency] No Libraries [dependency] [dependency] ------------------ [dependency] API<=15：将 annotations.jar 添加到类路径。
> 
> -预构建：
> 
> -code-gen: [mergemanifest] AndroidManifest 文件没有变化。[echo] 处理aidl 文件... [aidl] 没有要编译的AIDL 文件。[echo] ---------- [echo] 处理 RenderScript 文件... [renderscript] 没有要编译的 RenderScript 文件。[echo] ---------- [echo] 处理资源... [aapt] 没有更改的资源。R.java 和 Manifest.java 保持不变。[echo] ---------- [echo] 处理 BuildConfig 类... [buildconfig] 不需要生成新的 BuildConfig。
> 
> -预编译：
> 
> -compile: [echo] 创建库输出 jar 文件...
> 
> -编译后：
> 
> - 混淆：
> 
> -dex: [echo] 库项目：不转换字节码...
> 
> -crunch：[crunch] 在源目录中处理 PNG 文件：/home/ricky/Development/workspace/location_library/LocationLib/res
> [crunch] 到目标目录：/home/ricky/Development/workspace/location_library/LocationLib/bin/res [crunch] 压缩 0 个 PNG 文件以更新缓存
> 
> -package-resources: [echo] 库项目：不打包资源...
> 
> -package: [echo] 库项目：不打包apk...
> 
> -后包装：
> 
> -do-debug: [echo] 库项目：不要创建 apk... [propertyfile] 更新属性文件：/home/ricky/Development/workspace/location_library/LocationLib/bin/build.prop [propertyfile] 更新属性文件： /home/ricky/Development/workspace/location_library/LocationLib/bin/build.prop [propertyfile] 更新属性文件：/home/ricky/Development/workspace/location_library/LocationLib/bin/build.prop [propertyfile] 更新属性文件： /home/ricky/Development/workspace/location_library/LocationLib/bin/build.prop
> 
> -构建后：
> 
> 调试：
> 
> 节点：
> 
> -设置模式检查：
> 
> -设置调试文件：
> 
> -check-env: [checkenv] Android SDK 工具修订版 20.0.1 [checkenv] 安装在 /app/android-sdk-linux_86
> 
> -setup：[echo] 项目名称：ExceptionHandlerLib [gettype] 项目类型：Android 库
> 
> -设置调试模式：
> 
> -调试混淆检查：
> 
> -build-setup: [echo] Resolving Build Target for ExceptionHandlerLib... [gettarget] Project Target: Android 4.1 [gettarget] API level:
> 16 [echo] ---------- [echo] 创建输出目录如果需要... [echo] ---------- [echo] 解析 ExceptionHandlerLib 的依赖项... [dependency] 库依赖项：[dependency] 没有库 [dependency] [dependency] ----- ------------- [dependency] API<=15：将 annotations.jar 添加到类路径。
> 
> -预构建：
> 
> -code-gen: [mergemanifest] AndroidManifest 文件没有变化。[echo] 处理aidl 文件... [aidl] 没有要编译的AIDL 文件。[echo] ---------- [echo] 处理 RenderScript 文件... [renderscript] 没有要编译的 RenderScript 文件。[echo] ---------- [echo] 处理资源... [aapt] 没有更改的资源。R.java 和 Manifest.java 保持不变。[echo] ---------- [echo] 处理 BuildConfig 类... [buildconfig] 不需要生成新的 BuildConfig。
> 
> -预编译：
> 
> -compile: [echo] 创建库输出 jar 文件...
> 
> -编译后：
> 
> - 混淆：
> 
> -dex: [echo] 库项目：不转换字节码...
> 
> -crunch：[crunch] 在源目录中处理 PNG 文件：/home/ricky/Development/workspace/exception_handler_library/ExceptionHandlerLib/res [crunch] 到目标目录：/home/ricky/Development/workspace/exception_handler_library/ExceptionHandlerLib/bin/res [crunch] 压缩 0 个 PNG 文件以更新缓存
> 
> -package-resources: [echo] 库项目：不打包资源...
> 
> -package: [echo] 库项目：不打包apk...
> 
> -后包装：
> 
> -do-debug: [echo] 库项目：不要创建 apk... [propertyfile] 更新属性文件：/home/ricky/Development/workspace/exception_handler_library/ExceptionHandlerLib/bin/build.prop [propertyfile] 更新属性文件： /home/ricky/Development/workspace/exception_handler_library/ExceptionHandlerLib/bin/build.prop [propertyfile] 更新属性文件：/home/ricky/Development/workspace/exception_handler_library/ExceptionHandlerLib/bin/build.prop [propertyfile] 更新属性文件： /home/ricky/Development/workspace/exception_handler_library/ExceptionHandlerLib/bin/build.prop
> 
> -构建后：
> 
> 调试：
> 
> -预构建：
> 
> -code-gen: [mergemanifest] 将 AndroidManifest 文件合并为一个。[mergemanifest] 合并来自项目和 2 个库的清单。[mergemanifest] 警告：[AndroidManifest.xml:3, AndroidManifest.xml:3] 主清单有但库使用 targetSdkVersion='16' [mergemanifest] 注意：主清单缺少声明，默认值为 minSdkVersion 或 1。[mergemanifest ] 警告：[AndroidManifest.xml:3, AndroidManifest.xml:13] 主清单有但库使用 targetSdkVersion='16' [mergemanifest] 注意：主清单缺少声明，默认值为 minSdkVersion 或 1。
> 
> 构建失败 /app/android-sdk-linux_86/tools/ant/build.xml:616: null
> 
> 总时间：2秒

**编辑**

我查看`/app/android-sdk-linux_86/tools/ant/build.xml:616`并发现以下行抛出了 null`enabled="${manifestmerger.enabled}">`

这是整个街区

我将尝试禁用清单合并选项，看看会发生什么

**编辑**

从 project.properties 中删除 manifestmerger.enabled=true 似乎解决了我的问题。该项目现在可以编译并完美运行。我想我应该将此错误报告给 android 团队。我的清单有以下条目

```
<uses-sdk android:minSdkVersion="7"  /> 
```

但是，如果我将 targetSdkVersion 提高到 7 以上，仍然不会调用 onActivityResult()，所以这并不能真正解决根本问题，但我的项目现在可以正常工作

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-28T02:01:00.417

在片段中（**错误**的 startActivityForResult）

```
getActivty().startActivityForResult(intent, requestCode); 
// Cannot receive in fragment 
```

在片段中（**正确**的 startActivityForResult）

```
startActivityForResult(intent, requestCode); 
// use Fragment.startActivityForRusult()
// not Activity.startActivityForRusult() 
```

活动中

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
} 
```

在片段中

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // Do Action
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T21:14:35.413

这里有几个建议：

*   如果您只是希望`android:targetSdkVersion`清单中没有，您应该能够在 Eclipse的**Project Explorer中右键单击您的项目，然后选择****Android Tools** > **Clear Lint Markers**。

*   检查以确保您的所有`Fragment`和 -`Activity`派生类都从兼容性库 ( `android.support.v4.app.Fragment`and `android.support.v4.app.FragmentActivity`) 中扩展了正确的类，并且没有一个意外地扩展了框架中的类 ( `android.app.Fragment`and `android.app.Activity`)。

此外，如果您将您的项目设置为 16 以外的任何值，我发现您的项目无法编译，这很奇怪`targetSdkVersion`。问题/控制台/Lint 窗口中是否指出了任何特定问题？还请检查您是否有其他目标可用和/或选择为项目构建目标（右键单击项目，**属性**> **Android**）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T02:58:13.643

兼容性包中有一个错误（请参阅[this](http://comments.gmane.org/gmane.comp.handhelds.android.devel/148859)和[this](http://blog.tgrigsby.com/2012/04/18/android-fragment-frustration.aspx)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T16:02:26.900

下载最新的 ADT 后，请确保您还用这个覆盖了项目中的支持​​ jar：

`android-sdk\extras\android\support\v4\android-support-v4.jar`

在运行最新的 ADT 时，您可能会使用旧的 jar。

否则，如果父 Activity 没有调用，我只希望您的 Fragments**不会**收到他们的 onActivityResult() 调用`super.onActivityResult(requestCode, resultCode, data);`

**编辑**

明确添加这是我的项目所必需的：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    Fragment fragment = getSupportFragmentManager().findFragmentById(R.id.dualPane);
    fragment.onActivityResult(requestCode, resultCode, data);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T15:22:30.483

从 project.properties 中删除 manifestmerger.enabled=true 似乎解决了我的问题。该项目现在可以编译并完美运行。我想我应该将此错误报告给 android 团队。我的清单有以下条目

```
<uses-sdk android:minSdkVersion="7"  /> 
```

但是，如果我将 targetSdkVersion 提高到 7 以上，仍然不会调用 onActivityResult()，所以这并不能真正解决根本问题，但我的项目现在可以正常工作

# ruby-on-rails - 无法在 Rails 中使用 Paperclip-FFMPEG gem 上传/转换视频

> ID：11725491
> 
> 赞同：2
> 
> 时间：2012-07-30T16:21:05.283
> 
> 标签：ruby-on-rails, ruby, ffmpeg, paperclip

**已修复：**这是由于我没有发现的相关 lib 文件中的拼写错误！有关详细信息，请参阅[此问题。](https://github.com/owahab/paperclip-ffmpeg/issues/6)

* * *

我仍然是一个 Ruby on Rails 新手（运行 Rails 3.2.6 和 Ruby 1.9.3p194），但我发现使用回形针-ffmpeg gem 转换视频文件非常困难。无论我做什么，尝试上传视频后，页面上都会显示一条错误消息：

**“无法加载此类文件：/[...我的信息...]/lib/paperclip_processors/ffmpeg.rb”**

我目前正在尝试使用 .mov 文件进行测试。

我正在尝试按照[gem 的 github 页面上的说明进行操作](https://github.com/owahab/paperclip-ffmpeg)，但没有取得多大成功。

首先，我使用的是 Mac（Snow Leopard）并安装了 ffmpeg（运行`which ffmpeg`告诉我它在`/user/local/bin/ffmpeg`）

在我的应用程序中，我在 gemfile 中添加了以下几行：

```
gem 'paperclip'
gem 'paperclip-ffmpeg' 
```

我还`Paperclip.options[:command_path] = "/usr/local/bin/"`按照说明添加到 config/environments/development.rb ：

```
Myapp::Application.configure do

...

Paperclip.options[:command_path] = "/usr/local/bin/"
end 
```

（说明还建议“在您的环境配置文件中，让 Paperclip 知道通过将该目录添加到其路径来查看那里”，但我不知道这意味着什么 - 也许这是问题所在？）。

我的班级结构如下：

```
class Myvideo > ActiveRecord::Base

  attr_accessible :description, :title, :video

  has_attached_file :video, :styles => { 
      :medium => { :geometry => "640x480", :format => 'flv' }
    }, :processors => [:ffmpeg]

end 
```

我的理解是上面的代码将上传的电影从 .mov （或其他）转换为 .flv 格式。

但是，只要用户单击“上传”按钮，就会出现我上面描述的错误（在视频似乎正在上传时保存几秒钟）。

请注意，我可以通过标准 Paperclip gem 上传视频，*而无需毫无问题地进行*转换。因此，此代码有效（即视频已上传但未发生转换）：

```
attr_accessible :description, :title, :video

  has_attached_file :video 
```

有什么想法我可能会出错吗？谢谢！

* * *

编辑 - 似乎出现了原始错误消息（“无法加载此类文件......”），因为我没有在`/lib`目录中包含来自 Github 的相关 ffmpeg.rb 文件。感谢@wehal3001 指出这一点！

但是，虽然我现在在我的应用程序中有此文件，但在尝试上传视频时仍然出现以下错误：

**未初始化的常量 Paperclip::Ffmpeg::PaperclipError ... lib/paperclip_processors/ffmpeg.rb:123:in `rescue in make' lib/paperclip_processors/ffmpeg.rb:120:in`make' app/controllers/videos_controller.rb:43:in `new' app/controllers/videos_controller.rb:43:in`create'**

任何帮助将非常感激！

# perl - Asterisk::AMI 出现致命错误

> ID：11725493
> 
> 赞同：0
> 
> 时间：2012-07-30T16:21:14.250
> 
> 标签：perl, asteriskami

我正在尝试使用 Asterisk::AMI 包，但一个简单的例子不起作用

```
#!/usr/bin/perl -w
# ami_test.pl

use strict;
use diagnostics;
use Asterisk::AMI;

// use default 127.0.0.1 5038
my $astman = Asterisk::AMI->new(
    Username => 'manager',
    Secret => 'secret'
);

die "Unable to connect to Asterisk" unless ($astman);

my $response = $astman->({
    Action => 'Command',
    Command => 'sip show peers'
});

print $response->{'Response'}; 
```

总是我得到一个错误：

```
Not a CODE reference at ami_test.pl line 17 (#1)
    (F) Perl was trying to evaluate a reference to a code value (that is, a
    subroutine), but found a reference to something else instead.  You can
    use the ref() function to find out what kind of ref it really was.  See
    also perlref.

Uncaught exception from user code:
        Not a CODE reference at ami_test.pl line 17.
 at ami_test.pl line 17 
```

* * *

## 编辑

文档看错了，我试过了

```
my $response = $astman->action({
    Action => 'Command',
    Command => 'sip show peers'
}); 
```

并且工作正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:37:15.393

的文档[`Asterisk::AMI`](https://metacpan.org/module/Asterisk%3a%3aAMI)是错误的。你应该写

```
my $response = $astman->action({
    Action => 'Command',
    Command => 'sip show peers'
}); 
```

这相当于

```
my $action = $astman->send_action({
    Action => 'Command',
    Command => 'sip show peers'
});

my $response = $astman->get_response($action); 
```

默认情况下，操作没有超时。要为所有操作指定默认超时，请创建您的 AMI 对象，例如

```
my $astman = Asterisk::AMI->new(
    Username => 'manager',
    Secret => 'secret',
    Timeout => 10
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T18:56:56.110

你有阿斯特曼。如果你这样做：

```
$astman->({ Action => 'Ping' }, \&actioncb); 
```

您正在将参数传递给对象。

您应该将参数传递给方法，例如：

```
my $action = $astman->send_action({ Action => 'Ping' }, \&actioncb); 
```

Perl 文档很好。[Asterisk::AMI](http://search.cpan.org/perldoc?Asterisk%3A%3AAMI)的 CPAN 网站有一个小错误（至少在 0.2.8 版本中）。

# javascript - 动画 Jquery 弹出菜单

> ID：11725494
> 
> 赞同：0
> 
> 时间：2012-07-30T16:21:18.797
> 
> 标签：javascript, jquery

当用户单击链接时，我想让我的 JQuery 菜单有一个简单的动画。我有一个箭头指向点击的链接，但是我希望箭头在点击之间产生动画。如果用户单击链接 1，则箭头向右滑动，如果用户单击链接 2，则箭头向左滑动。我知道我可以使用“.animate”。但我无法让它发挥作用。

HTML/CSS

```
<!doctype html>

<html>
<head>
<title>Demo</title>

<meta http-equiv="X-UA-Compatible" content="chrome-1">
<meta name="viewport" content="width=1240">

<style type="text/css">
 #flyout
{   margin: 0;
    padding: 0}

    #flyout li
    {   float: left;
        list-style: none;
        font: 12px Tahoma, Arial}

    #flyout li a
    {   display: block;
        background: #20548E;
        padding: 5px 12px;
        text-decoration: none;
        border-right: 1px solid white;
        width: 80px;
        color: #EAFFED;
        white-space: nowrap}

    #flyout li a:hover
    {   background: #1A4473}

        #flyout li ul
        {   margin: 0;
            padding: 0;
            position: absolute;
            left: 8px;
            display: none;
            padding-top: 10px;
            border-top: 1px solid white}

        #flyout li ul li
        {   float: none;
            display: inline;}

        #flyout li ul li a
        {   width: auto;
            background: #9F1B1B;
            width: 400px;}

        #flyout li ul li a:hover
        {   background: #7F1616}
</style>
</head>
<body>
<img class="arrow" src="img/arr.png" alt="arrow" style="position:absolute; top:32px; display:none;">
<ul id="flyout">
    <li class="me a"><a href="#">Link 1</a>
        <ul class="ul_a">
            <li><a href="#">Sub A</a></li>
            <li><a href="#">Sub B</a></li>
            <li><a href="#">Sub C</a></li>
        </ul>
    </li>
    <li class="me b"><a href="#">Link 2</a>
        <ul class="ul_b">
            <li><a href="#">Sub D</a></li>
            <li><a href="#">Sub E</a></li>
            <li><a href="#">Sub F</a></li>
        </ul>
    </li>
</ul> 
```

jQuery

```
(function(){  

var closetimer = 0;
var menuitem = 0;
var arrow = $('.arrow');

function animate_right () {
   var ele = $('.a'); 
   var pos = ele.offset(); 
   var left = pos.left;
   var total = left+48;
   arrow.show().css('left', total);
}

function animate_left () {
   var ele = $('.b'); 
   var pos = ele.offset(); 
   var left = pos.left;
   var total = left+48;
   arrow.show().css('left', total);
}

function arrow_hide () {
   arrow.hide()
}

function flyout_open(event)
{
   flyout_close();
   var submenu = $(this).find('ul');
   menuitem = submenu.fadeIn(200);  
    if(submenu.hasClass('ul_a')){
        animate_right();

        return false;

    } else if (submenu.hasClass('ul_b')) {
        animate_left();

        return false;
    }

    return true;
}

function flyout_close()
{  arrow_hide(); if(menuitem) menuitem.fadeOut(200);}

$(document).ready(function()
{  $('#flyout li').bind('click', flyout_open);
});

(document).onclick = flyout_close;

})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:37:21.997

您可能希望将`#flyout`位置更改为相对：

```
#flyout{
    position : relative;
} 
```

# xpages - 在浏览器中的 xpage 之外在 notes 客户端中创建一个新的日历条目

> ID：11725496
> 
> 赞同：0
> 
> 时间：2012-07-30T16:21:29.190
> 
> 标签：xpages

“我不”喜欢自己的方式“......但目前我没有其他机会解决这个任务：因此我正在寻找一种在用户的便笺客户端中创建新日历条目（约会）的方法，从用户在其浏览器中打开的 xpage 中的按钮。

我用“notes://server/mailpath/Appointment?CreateDocument”之类的东西试过了，但这只会在他的笔记客户端中打开他的mailDB，而不是创建一个新的约会。

感谢您的帮助-Uwe

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:05:27.690

此代码片段正是这样做的： http://openntf.org/XSnippets.nsf/snippet.xsp?id= [create-calendar-entry-with-ssjs](http://openntf.org/XSnippets.nsf/snippet.xsp?id=create-calendar-entry-with-ssjs)

# php - PHP array_dif() on 2 Arrays of Arrays

> ID：11725504
> 
> 赞同：0
> 
> 时间：2012-07-30T16:22:09.447
> 
> 标签：php, arrays, object, array-difference

我有两个数组数组，其中包含一个国家名称和一个相应的分析指标。我需要减去它们（基于第一个子数组值，即国家）以返回仅在第一个而不是在第二个中找到的国家的第三个数组。示例输入和输出：

**第一个数组：**

```
Array
(
    [0] => Array
        (
            [0] => Afghanistan
            [1] => 1
        )

    [1] => Array
        (
            [0] => Albania
            [1] => 1
        )
) 
```

**第二个数组：**

```
Array
(
    [0] => Array // not found in 1st array by country name
        (
            [0] => Australia
            [1] => 2
        )

    [1] => Array
        (
            [0] => Albania
            [1] => 2
        )
) 
```

**预期输出**

```
Array
(
    [0] => Array
        (
            [0] => Australia
            [1] => 2
        )
) 
```

`array_dif();`尽管我的数据集中有很多，但没有返回任何差异。我该如何创建这个减去的第三个数组（在 PHP 中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:59:35.073

试试这个

```
$array1=array('0'=>Array('0' => 'Afghanistan','1' => '1'),
        '1'=>Array('0' => 'Albania','1' => '1')     );
$array2 = Array('0' => Array ('0' => 'Australia','1' => '2'),
    '1' => Array('0' => 'Albania','1' => '2'));
$finalArray = diffArray($array1,$array2); //returns your expected result

function diffArray($array1,$array2){    
    $newarray = array();
    foreach ($array2 as $tmp){
        $duplicate = false;
        foreach($array1 as $tmp1){
            if ($tmp[0] == $tmp1[0]){
                $duplicate=true;
            } 
        }
        if(!$duplicate)
        $newarray[] = $tmp;
    }
    return $newarray;
} 
```

# php - php - htaccess 阻止除根文件之外的 php 文件

> ID：11725505
> 
> 赞同：0
> 
> 时间：2012-07-30T16:22:11.577
> 
> 标签：php, .htaccess

我有以下 htaccess 代码以阻止所有 .php 文件。

```
RewriteCond %{THE_REQUEST} ^[A-Z]+\ /[^?\ ]*\.php[/?\ ]
RewriteRule .*\.php$ 404.php [L] 
```

但是我如何只能阻止不在根目录中的文件。

例子

```
mywebsite/index.php    -  don't want to block
mywebsite/go/go.php    -  want to block
mywebsite/en/en.php    -  want to block 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:28:22.667

不确定这不是循环的方式，但您想更改匹配的正则表达式以在路径中包含至少 1 个深度：

```
RewriteCond %{THE_REQUEST} ^[A-Z]+\ /[^?\ ]*\.php[/?\ ]
RewriteRule ^[^/]+/.*\.php$ 404.php [L] 
```

另请参阅 Marc B 的评论。

# c# - 找不到编译动态表达式所需的一种或多种类型。您是否缺少对 Microsoft.CSharp.dll 和 System.Core.dll 的引用？

> ID：11725514
> 
> 赞同：291
> 
> 时间：2012-07-30T16:22:48.857
> 
> 标签：c#, .net

我正在尝试在 Microsoft Visual C# 2010 中编译此代码

```
using System;
using System.Globalization;

class main
{
    static void Main()
    {

        dynamic d;
        d = "dyna";
        Console.WriteLine(d);    
    }
} 
```

但我收到这两个错误

*错误 1 ​​未定义或导入预定义类型“Microsoft.CSharp.RuntimeBinder.Binder”*

*错误 2 找不到编译动态表达式所需的一种或多种类型。您是否缺少对 Microsoft.CSharp.dll 和 System.Core.dll 的引用？*

我读了另[一篇文章](https://stackoverflow.com/questions/7115055/why-am-i-getting-one-or-more-types-required-to-compile-a-dynamic-expression-can)，但我是 C# 的新手，我不明白真正的问题是什么。特别是这些所谓的`.config`文件是什么以及在哪里..

* * *

## 回答 #1

> 赞同：593
> 
> 时间：2012-07-30T16:26:25.370

在您的解决方案资源管理器窗口中，右键单击引用，选择添加引用，转到 .NET 选项卡，找到并添加 Microsoft.CSharp。

或者，添加[Microsoft.CSharp](https://www.nuget.org/packages/Microsoft.CSharp/) NuGet 包。

```
Install-Package Microsoft.CSharp 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-30T16:26:34.160

确保您的项目面向 .NET Framework 4.0。Visual Studio 2010 也支持 .NET 3.5 框架目标，但 .NET 3.5 不支持该`dynamic`关键字。

您可以在项目属性中调整框架版本。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/bb398202.aspx](http://msdn.microsoft.com/en-us/library/bb398202.aspx)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-10-22T15:42:08.887

我遇到了同样的问题，除了删除和添加引用没有修复错误，所以我将 .Net 版本从 更改`4.5`为`4.5.1`.

为此，请转到您的`web.config`文件并更改以下行

```
<compilation debug="true" targetFramework="4.5" />
<httpRuntime targetFramework="4.5" /> 
```

对此

```
<compilation debug="true" targetFramework="4.5.1" />
<httpRuntime targetFramework="4.5.1" /> 
```

并重建。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-04-29T13:15:42.717

ViewBag 下的红线让我头疼了 3 个月）。只需从项目中删除 Microsoft.CSharp 引用，然后再次添加它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-21T06:32:20.893

我遇到了同样的问题，并通过从项目中删除“Microsoft.CSharp”引用来解决它，然后再次添加它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-08T08:45:01.657

对我来说，删除并重新添加对 Microsoft.CSharp 的引用暂时解决了问题，直到编辑了受影响的文件。关闭 Visual Studio 并重新打开项目可以更长期地修复它，因此如果在已引用 Microsoft.CSharp 时发生这种情况，这是一个选项。

也许第一步重新启动 IDE 似乎微不足道，但这里提醒像我这样不认为这是第一件事的人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-07T00:25:44.367

这些都不适合我。

我的类库肯定都引用了 System.Core 和 Microsoft.CSharp。Web 应用程序是 4.0，由于支持问题无法升级到 4.5。

[我在使用Razor Engine](https://github.com/Antaris/RazorEngine)编译剃须刀模板时遇到错误，并且只是间歇性地遇到它，例如在重新启动 Web 应用程序之后。

对我有用的解决方案是手动加载程序集，然后重新尝试相同的操作......

```
 bool retry = true;
        while (retry)
        {
            try
            {
                string textTemplate = File.ReadAllText(templatePath);
                Razor.CompileWithAnonymous(textTemplate, templateFileName);
                retry = false;
            }
            catch (TemplateCompilationException ex)
            {
                LogTemplateException(templatePath, ex);
                retry = false;

                if (ex.Errors.Any(e  => e.ErrorNumber == "CS1969"))
                {
                    try
                    {
                        _logger.InfoFormat("Attempting to manually load the Microsoft.CSharp.RuntimeBinder.Binder");
                        Assembly csharp = Assembly.Load("Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a");
                        Type type = csharp.GetType("Microsoft.CSharp.RuntimeBinder.Binder");
                        retry = true;
                    }
                    catch(Exception exLoad)
                    {
                        _logger.Error("Failed to manually load runtime binder", exLoad);
                    }
                }

                if (!retry)
                    throw;
            }
        } 
```

希望这可以帮助其他人。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-06-23T12:58:55.037

如果错过，Microsoft.CSharp.dll 可能会出现此错误。检查您的项目参考。

# java - com.itextpdf:book:war:5.3.1-SNAPSHOT：无法解析以下工件：

> ID：11725515
> 
> 赞同：0
> 
> 时间：2012-07-30T16:22:50.057
> 
> 标签：java, maven

当我尝试构建我的 api 时，我在这个演示项目[http://itextpdf.com/download.php上工作，我有这个错误消息（依赖项）。](http://itextpdf.com/download.php)

```
Failed to execute goal on project book: Could not resolve dependencies for project   
com.itextpdf:book:war:5.3.1-SNAPSHOT: 
The following artifacts could not be resolved: 
com.itextpdf:itextpdf:jar:5.3.1-SNAPSHOT, 
com.itextpdf:itext-xtra:jar:5.3.1-SNAPSHOT, 
com.itextpdf:itext-pdfa:jar:5.3.1-SNAPSHOT, 
itext-pdfa:com.itextpdf:jar:5.3.1-SNAPSHOT: 
Could not find artifact com.itextpdf:itextpdf:jar:5.3.1-SNAPSHOT -> [Help 1]

To see the full stack trace of the errors, re-run Maven with the -e switch.
Re-run Maven using the -X switch to enable full debug logging.

For more information about the errors and possible solutions, please read the following articles:
[Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:22:51.533

由于这是 SNAPSHOT 版本，因此*可能无法*下载。您可以使用maven Central 提供的[5.3.0 版本。](http://search.maven.org/#search%7Cgav%7C1%7Cg%3a%22com.itextpdf%22%20AND%20a%3a%22itextpdf%22)

# r - 包含微秒时与“POSIXlt”表示的歧义

> ID：11725517
> 
> 赞同：1
> 
> 时间：2012-07-30T16:23:04.377
> 
> 标签：r, datetime, posixct

我对类中微秒/毫秒的表示/存储的模棱两可感到困惑`POSIXlt`：

**打印`POSIXlt`对象显示不同的微/毫秒数字作为相应属性的查询（最后一位不同）**

也许这很有道理，但我觉得有点奇怪。有人可以向我解释一下吗？

微秒

```
# Change digits for seconds >> microseconds
opts <- options(digits.secs=6)
x <- "2012-07-30 12:10:09.123123"

posix <- as.POSIXlt(x, tz="Europe/Berlin")

> posix
[1] "2012-07-30 12:10:09.123122 Europe/Berlin"

> posix$sec
[1] 9.123123 
```

毫秒

```
posix$sec <- round(posix$sec, 3)

> posix
[1] "2012-07-30 12:10:09.122 Europe/Berlin"

> posix$sec
[1] 9.123

# Undo option change
options(opts) 
```

此外，这并没有真正增加清晰度（至少对我来说;-)）

```
opts <- options(digits.secs=6)
x <- "2012-07-30 12:10:09.123123"
posix <- as.POSIXlt(x, tz="Europe/Berlin")

> posix
[1] "2012-07-30 12:10:09.123122 Europe/Berlin"
> posix$sec
[1] 9.123123 
```

手动操作“sec”属性时，结果似乎有所不同；我仍然没有真正看到这里的系统性，但是添加一个额外的数字 - 最好是`5`Aaaron 指出的 - 似乎得到了预期的结果：

```
# Workaround: extra digit
posix$sec <- posix$sec+0.0000005
> posix
[1] "2012-07-30 12:10:09.123123 Europe/Berlin"

posix$sec <- 9.123122
> posix
[1] "2012-07-30 12:10:09.123122 Europe/Berlin"
posix$sec <- posix$sec+0.0000005
> posix
[1] "2012-07-30 12:10:09.123122 Europe/Berlin"

posix$sec <- 9.123124
> posix
[1] "2012-07-30 12:10:09.123124 Europe/Berlin"
posix$sec <- posix$sec+0.0000005
> posix 
[1] "2012-07-30 12:10:09.123124 Europe/Berlin"

posix$sec <- 9.123125
> posix
[1] "2012-07-30 12:10:09.123124 Europe/Berlin"
posix$sec <- posix$sec+0.0000005
> posix
[1] "2012-07-30 12:10:09.123125 Europe/Berlin"

posix$sec <- 9.123126
> posix
[1] "2012-07-30 12:10:09.123125 Europe/Berlin"
posix$sec <- posix$sec+0.0000005
> posix
[1] "2012-07-30 12:10:09.123126 Europe/Berlin"

options(opts) 
```

会话信息

```
R version 2.14.1 (2011-12-22)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=German_Germany.1252  LC_CTYPE=German_Germany.1252   
[3] LC_MONETARY=German_Germany.1252 LC_NUMERIC=C                   
[5] LC_TIME=German_Germany.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base 
```

**编辑 2012-07-31**

感谢 Aaron，我想我找到了一种解决方法，只需添加一个额外的数字，该数字在内部用于四舍五入到左边的下一个数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:11:10.607

这是因为 R 向下取整以显示时间（就像秒表一样）。所以在打印整个时间对象时，它会向下取整。但是当只打印它的一部分时，它不再是一个时间对象，所以标准的四舍五入适用。

浮点表示使这一点更加明显，就好像一个数字表示为 0.39999999999（或任何二进制等价物），即使在浮点容差范围内，它也将显示为 0.3，它等于 0.4。

要获得通常的舍入行为，请在显示前添加 0.0005（以获得小数点后三位）。

有关更多详细信息，请参阅[R 如何使用小数秒格式化 POSIXct](https://stackoverflow.com/q/7726034/210673)。

# python - PyCharm 显示有效代码的未解决引用错误

> ID：11725519
> 
> 赞同：322
> 
> 时间：2012-07-30T16:23:10.307
> 
> 标签：python, pycharm

我正在使用 PyCharm 来处理一个项目。该项目已打开并配置了解释器，并且可以成功运行。远程解释器路径已正确映射。这似乎是正确的配置，但 PyCharm 使用“未解决的引用”错误突出显示我的有效代码，即使对于内置 Python 函数也是如此。为什么这些似乎没有被检测到，即使代码运行？有什么方法可以让 PyC​​harm 正确识别这些？

* * *

*这个问题的具体实例与远程解释器有关，但问题也出现在本地解释器上。*

* * *

## 回答 #1

> 赞同：487
> 
> 时间：2012-08-02T08:12:08.597

文件 | 使缓存无效...并重新启动 PyCharm 会有所帮助。

* * *

## 回答 #2

> 赞同：148
> 
> 时间：2013-11-16T18:50:34.453

德米特里的回应对我不起作用。

我通过转到项目解释器，选择“路径”选项卡，然后点击该子菜单中的刷新按钮来开始我的工作。它自动填充了一种叫做“python-skeletons”的东西。

**编辑**：使用 PyCharm 3.4.1 的屏幕截图（隐藏得很好）

![在此处输入图像描述](../Images/03eae03bb5bb4cb9dc01b96a0947c93a.png)

* * *

## 回答 #3

> 赞同：82
> 
> 时间：2016-03-09T16:16:11.270

有很多解决方案，有些比其他的更方便，但它们并不总是有效。

以下是您可以尝试的所有方法，从“快速”到“烦人”：

*   执行`File`->`Invalidate Caches / Restart`并重新启动 PyCharm。
    *   您也可以在以下任何一种方法之后执行此操作，以确保这一点。
*   首先，检查您正在运行的解释器：`Run`-> `Edit Configurations`-> `Configuration`-> `Python Interpreter`。
*   刷新解释器的路径：
    *   `File`->`Settings`
    *   `Project: [name]`-> `Project Interpreter`-> '项目解释器'：齿轮图标 ->`More...`
    *   单击“显示路径”按钮（底部）
    *   单击“刷新”按钮（底部）
*   删除解释器并再次添加：
    *   `File`->`Settings`
    *   `Project: [name]`-> `Project Interpreter`-> '项目解释器'：齿轮图标 ->`More...`
    *   单击“删除”按钮
    *   单击“添加”按钮并重新添加您的解释器
*   删除您的项目首选项
    *   删除项目的`.idea`文件夹
    *   关闭并重新打开 PyCharm
    *   从头开始打开您的项目
*   删除您的 PyCharm 用户首选项（但先备份它们）。
    *   `~/.PyCharm50`在 Mac 上
    *   `%homepath%/.PyCharm50`在 Windows 上
*   切换到另一个口译员，然后再回到您想要的口译员。
*   创建一个新的虚拟环境，并切换到该环境的解释器。
*   在项目文件夹之外的*新位置*创建一个新的虚拟环境，然后切换到该环境的解释器。
*   完全切换到另一个口译员；不要切换回来。

如果您使用的是 Docker，请注意：

*   确保您使用的是`pip3`not `pip`，尤其是远程 docker 和 docker-compose 解释器。
*   避免影响`PYTHONPATH`。更多信息：[https](https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000058690-Module-not-found-in-PyCharm-but-externally-in-Python) ://intellij-support.jetbrains.com/hc/en-us/community/posts/115000058690-Module-not-found-in-PyCharm-but-externally-in-Python 。

如果上述方法对您不起作用，但您确实找到了另一个技巧，请发表评论。

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2015-02-24T12:37:49.410

就我而言，它是目录结构。我的项目如下所示：

```
+---dir_A
    +---dir_B
        +app
        |
        \-run.py 
```

所以右键单击 dir_b > “将目录标记为” > “项目根目录”

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2019-06-12T05:30:37.297

您必须将根目录标记为：（ `SOURCE ROOT`红色），并将您的应用程序 标记为：（`EXCLUDED ROOT`蓝色）。

然后未解析的引用将消失。如果您使用 PyChram pro，它会自动为您执行此操作。

[![在此处输入图像描述](../Images/407605d9bfaf9a49681ce55ae79fe7e6.png)](https://i.stack.imgur.com/iwtxJ.png)

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2014-03-21T15:51:41.863

当无效缓存或刷新路径不起作用时，我发现自己删除并重新添加远程解释器以解决此问题。

我使用 vagrant，并且每隔一段时间，如果我在我的多虚拟机设置中添加一个新的虚拟机，转发的端口就会改变，当 PyCharm 尝试使用错误的端口进行 SSH 时，这似乎会让 PyC​​harm 感到困惑。更改端口似乎对损坏的引用没有帮助。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2015-04-16T03:51:15.710

如果其他解决方案都不适合您，请尝试（备份）并删除您的 ~/.PyCharm40 文件夹，然后重新打开 PyCharm。这也会扼杀你所有的偏好。

在 Mac 上，您要删除 ~/Library/Caches/Pycharm40 和 ~/Library/Preferences/PyCharm40。

在 Windows 上：C:\Users\$USER.PyCharm40。

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2015-05-11T09:27:56.040

按照以下步骤使用 PyCharm 4.0.6 (OSX 10.10.3) 进行测试：

1.  单击 PyCharm 菜单。
2.  选择项目解释器。
3.  选择齿轮图标。
4.  选择更多按钮。
5.  选择您所在的项目解释器。
6.  选择目录树按钮。
7.  选择重新加载路径列表。

问题解决了！

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2015-01-14T07:07:29.403

很抱歉提出这个问题，但是我有一个重要的更新要做。

如果您使用的是除此之外的任何其他版本，您可能还希望将项目解释器恢复为 Python 2.7.6 在其他建议都没有解决我的问题之后，这在我的 PyCharm 4.04 专业版的 Ubuntu 安装上对我有用。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2019-12-26T13:25:34.823

**以更简单的动作**为我工作：

```
 File > Settings > Project > Project Interpreter 
> Select "No interpreter" in the "Project interpreter" list 
> Apply > Set your python interpreter again > Click Apply 
```

利润 - Pycharm 正在更新骨架，一切都很好。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2015-12-28T22:25:46.197

您可以尝试关闭 Pycharm，`.idea`从项目中删除该文件夹，然后再次启动 Pycharm 并重新创建项目。这对我有用，而使缓存无效却没有。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2018-12-18T12:14:38.047

如果您只想忽略一些“未解决的引用”错误，您还可以通过将其放在您的类/方法/函数前面来明确告诉它 PyCharm：

```
# noinspection PyUnresolvedReferences 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2016-04-12T23:10:19.497

在提出的解决方案都不适合我之后，我终于得到了这个工作。我正在玩一个 django rest 框架项目，并且正在使用我设置的 virtualenv。我可以通过将根文件夹标记为源根来修复 Pycharm，但是 django 的服务器会抛出解析异常。因此，当另一个不工作时，一个会起作用，反之亦然。

最终，我只需要将子文件夹标记为 pycharm 中的源根目录。所以我的结构是这样的

```
-playground
     -env
     -playground 
```

第二个游乐场文件夹是我必须将其标记为源根目录的文件夹，以使所有内容都能按预期工作。这对我的方案没有任何问题，因此这是一个可行的解决方案。

只是想我会分享以防其他人可以使用它。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2016-05-14T19:47:39.890

这也可能是python版本问题。我必须选择合适的才能让它发挥作用。 [![在此处输入图像描述](../Images/28353f59d8b302cc249868f27902ddfa.png)](https://i.stack.imgur.com/Z5bjt.png)

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2019-07-30T19:59:48.373

没有一个答案解决了我的问题。

它对我来说是切换环境并回到相同的环境。`File->Settings->Project interpreter`

我正在使用 conda 环境。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-04-01T10:25:26.783

我关闭了所有其他项目并在 Pycharm 中单独运行我需要的项目。我从 pycharm 创建了一个单独的 virtualenv，并使用 pip 在其中添加了所有必需的模块。我在项目的解释器中添加了这个虚拟环境。这解决了我的问题。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-10-12T09:02:48.983

哎呀，真是一场噩梦，我融合了不同的 StackOVerflow 答案：

1.  切换到本地解释器 /usr/bin/pythonX.X 并应用
2.  查看类似上述答案的路径
3.  寻找骷髅路径。我的是（/home/tim/Desktop/pycharm-community-2016.2.3/helpers/python-skeletons）
4.  如果没有自动显示，切换回 virt 解释器并手动添加骨架路径。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-03-22T12:46:12.487

以上解决方案都不适合我！
如果您为项目使用虚拟环境，请确保将`python.exe`虚拟环境目录中的文件应用为项目的解释器，`(Alt + Ctrl + Shift + S)` 这为我解决了这个问题。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2017-12-21T13:20:10.513

在我的情况下，由于 python 代码的一个非常特殊的情况而出现了检查错误。包含两个 numpy 函数和两个列表访问的 min 函数使我的代码检查出现这种错误。

在以下示例中删除 'd=0' 行会按预期提供未解决的引用错误，但读取不会使代码检查器的错误消失。之后我仍然可以毫无问题地执行代码。

```
import numpy as np
def strange(S, T, U, V):
    d = 0
    print min(np.abs(S[d]), np.abs(T[d]), U[d], V[d]) 
```

清除缓存和重新加载路径列表不起作用。仅使用以下示例补丁之一更改代码才有效：

*   “最小”参数的另一种排序：示意性 SUTV，但不是 STUV 或 TSUV
*   使用方法而不是函数： S[d].abs() 而不是 np.abs(S[d])
*   使用内置 abs() 函数
*   将数字添加到选择的参数：U[d] + 0。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2020-03-19T12:48:21.580

我的问题是*PyCharm*没有解决*Flask-WTF*。我尝试重新安装，然后安装或使*缓存无效并重新启动*PyCharm，但它仍然无法正常工作。

 **然后我想出了这个解决方案，它非常适合我。

1.  通过*Ctrl+Alt+S* (Windows)打开**Project Interpreter**，然后单击**Install (+)** a new package。

 ***[![在此处输入图像描述](../Images/9f6b6d5600658aef559eeabdf78edab1.png)](https://i.stack.imgur.com/myuCX.png)

2.  键入 PyCharm 无法解析的包，然后单击**Install Package**。然后单击**确定**。

[![在此处输入图像描述](../Images/f45f0cc164e988e389a7f682c7ddac48.png)](https://i.stack.imgur.com/XD071.png)

现在，您将看到您的库已解决。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2020-07-26T11:05:16.927

在 Windows 10 10.0 上的 PyCharm 2020.1.4（社区版）中。在 PyCharm 中的设置下：文件 > 设置 > 项目结构我在项目结构中进行了两项更改：标记为源的主文件夹和 odoo 文件夹，其中包含我排除的所有应用程序屏幕截图显示了我所做的。之后我重新启动了 PyCharm：文件 > 使缓存无效/重新启动...

未解决的引用错误已删除 [![项目结构](../Images/7750f2ba810ccad06a3b3d3c8d65a6c3.png)](https://i.stack.imgur.com/KuXC9.png)

[![未解决的参考错误](../Images/b805a52a61e08362003b4286fbcae495.png)](https://i.stack.imgur.com/JePjc.png)

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2021-03-19T02:18:16.820

按照其他答案的建议使缓存无效对我不起作用。我发现我的问题是 PyCharm 将 Python 包的 init.py 文件标记为文本，因此未将它们包括在分析中，这意味着 python 解析无法正常工作。

我的解决方案是：

打开 PyCharm 设置 Navigate to Editor -> File Types Find Python and add `__init__.py`to the list of python files **or** Find Text and delete `__init__.py`from the list of text files

[![在此处输入图像描述](../Images/c16acd20ab8f4c86b8a397bd308a30d1.png)](https://i.stack.imgur.com/386GQ.png)

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-09-03T12:28:03.680

如果您使用`vagrant`的错误可能是由错误的python解释器引起的。在`vagrant`我们正在使用的我们中，`pyenv`所以我不得不将`Python Interpreter path`路径`/usr/bin/python`从`/home/vagrant/.pyenv/versions/vagrant/bin/python` [![在此处输入图像描述](../Images/7d921cd2f7b20fdae5154faf42c9c329.png)](https://i.stack.imgur.com/EN9U2.png)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-03-07T22:45:29.170

我有一个项目，其中一个文件在`src/`同一目录中导入另一个文件。要让 PyC​​harm 识别，我必须转到文件 > 设置 > 项目 > 项目结构 > 选择`src`文件夹并单击“标记为：来源”

来自[https://www.jetbrains.com/help/pycharm/configuring-folders-within-a-content-root.html](https://www.jetbrains.com/help/pycharm/configuring-folders-within-a-content-root.html)

> *源根*包含实际的源文件和资源。PyCharm 使用源根作为解析导入的起点

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-12-15T05:41:11.310

我不得不去 File->Invalidate Caches/Restart，重新启动 Ubuntu 18.04 LTS，然后在它清除之前再次打开 Pycharm 和 File->Invalidate Caches/Restart。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-01-11T12:04:29.300

对我来说，它有帮助：更新您的主目录“将目录标记为”->“源根目录”

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-03-02T00:36:58.530

@kelorek 为我工作，但在此之前，在 interpereter 路径中我必须添加一些路径。让我们说

```
from geometry_msgs.msg import Twist 
```

下划线为错误，然后在 python 的远程机器中运行：

```
help("geometry_msgs") 
```

最后会有路径让我们说：

```
/opt/ros/foxy/lib/python3.8/site-packages/geometry_msgs/__init__.py 
```

所以你的解释器pycharm路径添加

```
/opt/ros/foxy/lib/python3.8/site-packages 
```

希望它会帮助你，它会帮助我:)

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2021-05-05T08:19:11.983

我有同样的症状。在我的例子中，问题的根源是我在自定义属性中设置了idea.max.intellisense.filesize=50。我可以通过将其设置为 100 来解决它。

帮助->编辑自定义属性

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2018-02-26T09:54:09.357

你在使用虚拟环境吗？

如果是这样，您需要通知 PyCharm 所需的 python.exe 位置的每次更改（对于 PyCharm 来说，仅仅 ./activate 是不够的）

确保 Pycharm 指向正确的解释器和包：文件 -> 设置 -> 项目 -> 项目解释器。单击齿轮并选择 virtualenv 的 Scripts 文件夹下的 python.exe

[![在此处输入图像描述](../Images/9cd0598355e0777033a9f5fa6352198a.png)](https://i.stack.imgur.com/weN2m.png)*****

# iphone - 我们可以更改 iOS 应用程序进行升级吗？

> ID：11725521
> 
> 赞同：1
> 
> 时间：2012-07-30T16:23:13.683
> 
> 标签：iphone, ios, app-store

我们有一个客户，他已经在应用商店中有一个应用（比如说 A）。客户现在想在应用商店中使用我们的应用（比如说 B）。他不希望已经在使用当前应用程序 (A) 的用户去单独安装我们的应用程序 (B)。他想要的是用户通过他的应用程序（A）获得更新消息。如果用户同意，那么我们的应用程序（B）可以在用户端替换旧的。

上述场景在现在的 App Store 中可以处理吗？

如果是，我应该如何开始？

欢迎任何参考资料或任何文件。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:28:02.053

据我所知，这是不可能的，如果 Apple 员工会帮助您，也许可以保存（但我怀疑他们会 - 您可以尝试[致电 Apple Developer Support](https://developer.apple.com/contact/phone.php/)）。捆绑包标识符与开发者帐户相关联，并且只有在捆绑包标识符可以以某种方式转移到您公司的开发者帐户时才能替换应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:28:12.053

您不能将捆绑 ID 为 com.foo（例如）的应用 A 切换为捆绑 ID 为 com.baz 的应用 B。您只能将应用更新到具有相同捆绑 ID 的新版本。

您*可以*在更新中更改图标、标题和描述。但我怀疑苹果不会喜欢你在更新中将应用 A 换成完全不同的应用 B。我希望他们拒绝这个。

除了为您想要做的事情对应用程序 A 进行标准的 App Store 更新之外，没有其他机制。例如，您不能自己处理“获取更新消息并同意”部分。

希望有帮助！

# r - 更改默认库

> ID：11725526
> 
> 赞同：1
> 
> 时间：2012-07-30T16:23:39.940
> 
> 标签：r, knitr

有没有办法更改 Knitr 中的默认库？我收到此错误：

```
Loading required package: knitr
Warning message:
In library(package, lib.loc = lib.loc, character.only = TRUE, logical.return = TRUE,  :
  there is no package called 'knitr'
Error: could not find function "knit"
Execution halted 
```

我使用 RStudio 并在 rstudio 的支持上阅读了有关此问题的主题，但我仍然遇到同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:35:54.547

好的，我知道我应该怎么做。在 R/etc 中创建文件 Renviron.site 并包含行 R_LIBS=C:/Program Files/RStudio/R/library。效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:28:37.197

什么操作系统？

你知道`Rprofile`和`Rprofile.site`吗？

你读过`help(Startup)`吗？

为什么您的 R 安装目录与 RStudio 使用的不同？

# c++ - 使用 waveInOpen 保存波形文件

> ID：11725528
> 
> 赞同：6
> 
> 时间：2012-07-30T16:23:47.030
> 
> 标签：c++, winapi, audio, wav

我正在尝试使用 waveInOpen 和 co 将声音录制到 .wave 文件中（[请参见此处](http://msdn.microsoft.com/en-us/library/ms713735%28VS.85%29.aspx)）

这是我记录到缓冲区的代码，它似乎有效：

```
#include <Windows.h>
#include <MMSystem.h>
#include <iostream>

using namespace std;

int main(){

    HWAVEIN microHandle;
    WAVEHDR waveHeader;

    const int NUMPTS = 22050 * 10;   // 10 seconds
    int sampleRate = 22050;
    short int waveIn[NUMPTS];   // 'short int' is a 16-bit type; I request 16-bit samples below
                                // for 8-bit capture, you'd use 'unsigned char' or 'BYTE' 8-bit types

    MMRESULT result = 0;

    WAVEFORMATEX format;
    format.wFormatTag=WAVE_FORMAT_PCM;      // simple, uncompressed format
    format.wBitsPerSample=8;                //  16 for high quality, 8 for telephone-grade
    format.nChannels=1;                     //  1=mono, 2=stereo
    format.nSamplesPerSec=sampleRate;       //  22050
    format.nAvgBytesPerSec=format.nSamplesPerSec*format.nChannels*format.wBitsPerSample/8;
                                            // = nSamplesPerSec * n.Channels * wBitsPerSample/8
    format.nBlockAlign=format.nChannels*format.wBitsPerSample/8;                    
                                            // = n.Channels * wBitsPerSample/8
    format.cbSize=0;

    result = waveInOpen(&microHandle, WAVE_MAPPER, &format, 0L, 0L, WAVE_FORMAT_DIRECT);

    if (result)
    {
        cout << "Fail step 1" << endl;
        cout << result << endl;
        Sleep(10000);
        return 0; 
    }

    // Set up and prepare header for input
    waveHeader.lpData = (LPSTR)waveIn;
    waveHeader.dwBufferLength = NUMPTS*2;
    waveHeader.dwBytesRecorded=0;
    waveHeader.dwUser = 0L;
    waveHeader.dwFlags = 0L;
    waveHeader.dwLoops = 0L;
    waveInPrepareHeader(microHandle, &waveHeader, sizeof(WAVEHDR));

    // Insert a wave input buffer
    result = waveInAddBuffer(microHandle, &waveHeader, sizeof(WAVEHDR));

    if (result)
    {
        cout << "Fail step 2" << endl;
        cout << result << endl;
        Sleep(10000);
        return 0;
    }

    result = waveInStart(microHandle);

    if (result)
    {
        cout << "Fail step 3" << endl;
        cout << result << endl;
        Sleep(10000);
        return 0;
    }

     // Wait until finished recording
     do {} while (waveInUnprepareHeader(microHandle, &waveHeader, sizeof(WAVEHDR))==WAVERR_STILLPLAYING);

     waveInClose(microHandle);

    return 0;
} 
```

但我没有找到任何关于如何将其保存在磁盘上的功能或解释

我应该保存 WAVEFORMATEX 结构吗？还是有其他东西要添加到波形文件头？

唯一的事情是我只能使用 Windows 库，我不必安装任何其他库

谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-20T10:00:26.683

`.WAV`文件不仅包含原始数据，还包含格式和额外数据，并且通常具有[RIFF 结构](http://en.wikipedia.org/wiki/Resource_Interchange_File_Format)。

MSDN 解释了写入文件，例如：[Writing to a WAV File](http://msdn.microsoft.com/en-us/library/windows/desktop/ee419050%28v=vs.85%29.aspx)。

此外，当前的 Windows SDK`\Samples\multimedia\directshow\dmo\dmodemo\dsutil.*`文件具有类似`CWaveFile`类的实现。

# google-visualization - 谷歌图表 - Y 轴值和实际值不匹配

> ID：11725532
> 
> 赞同：0
> 
> 时间：2012-07-30T16:24:06.700
> 
> 标签：google-visualization

正如您从链接中看到的那样，最大值约为 250，而应该是 999（请参阅下面的数据）。为什么会这样，我该怎么办？

[http://chart.apis.google.com/chart?chxt=y&chd=e:AMAPAWAqAgGfPnPnLS&chxr=0,0,1000](http://chart.apis.google.com/chart?chxt=y&chd=e:AMAPAWAqAgGfPnPnLS&chxr=0,0,1000) ,200&chco=76a4fb&chs=600x300&cht=lc&chtt=Some+graph&chls=1.0

```
import GChartWrapper as C

def makeGraph(maxY, stepY):
    data = [12,15,22,42,32,415,999,999,722]
    G = C.Line(data, encoding='extended')
    G.color('76A4FB')
    G.line(1)
    G.axes('y')
    G.axes.range(0,0,maxY,stepY)
    G.size(600,300)
    G.title("Some graph")
    return G

g = makeGraph(1000,200)

print ""

print g

print "" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:25:09.810

这与我遇到的问题有点不同，但这可能会有所帮助。在谷歌图表 api 中，您必须将轴范围参数发送到

`&chds=a`

您的问题可能有一个等价物。

# git - 进行远程拉动后，我可以在 git 中进行差异化吗？

> ID：11725539
> 
> 赞同：0
> 
> 时间：2012-07-30T16:24:29.993
> 
> 标签：git, github

我有两个回购：`repo`和`repo-develop`

`repo`用于生产，并且有一个可以进行推拉的小团队

`repo-develop`用于沙盒，任何人都可以推或拉。

我们想要它，这样在没有来自生产存储库的人员审查的情况下，任何提交都无法`repo-develop`完成`repo`。

它曾经是一个有两个分支的存储库，但这意味着如果人们在他们的沙箱中积极开发，他们需要从他们的 fork 中为他们想要进入每个人的本地沙箱的每个提交发出拉取请求，然后再投入生产。

从我的新设备`repo`中，我添加了一个遥控器到`repo-develop`. 如果我从那里手动拉然后执行`git status`它说`Your branch is ahead of 'origin/master' by 1 commit.`此时我无法区分代码库（但如果我推送它肯定会在 github 上更改）

有没有办法做到这一点？据我所知，我可能从一开始就做一些疯狂的事情，并且希望有一个解决方案可以实现我的两个目标：

1.  允许所有开发人员不断推送到无法投入生产的分支
2.  在提交到生产分支/存储库之前进行一层代码审查

在同一用户中在 github 上分叉本来是理想的，但据我所知，它只能让我分叉给不同的用户。

**更新**

我意识到远程拉取是带来提交而不是文件。有办法解决吗？

我真的更愿意为组织/回购开发做一个组织/回购的分支，但找不到方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:36:31.373

用于`git fetch`仅下载更改。
该命令`git pull`是`git fetch`和的组合`git merge`。请查看[git pull 的文档](http://www.kernel.org/pub/software/scm/git/docs/git-pull.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:12:26.590

所以我将两个存储库都下载到了我的本地机器上。我更新了`develop`一个以获取所有开发人员的更改。然后，我在计算机上使用 diff 工具来比较两个存储库。如果一切看起来都不错，我会执行 git pull 遥控器并将其推送到原点。

这使得 10 多个开发人员无法在没有先审查的情况下将代码投入生产。

# php - 简单的PHP问题，我确定

> ID：11725540
> 
> 赞同：0
> 
> 时间：2012-07-30T16:24:30.697
> 
> 标签：php, mysql, apache, ubuntu

我刚刚设置了一个新的 Ubuntu 12.04 LTS 64 位服务器，选择了它附带的任何 Apache 软件包。我试图在我的浏览器中打开这个 index.html 文件：

```
<html><body><h1>Testing Database</h1>

<?php

$con=mysql_connect("localhost","****","****");
if(!$con) {die('Could not connect: ' . mysql_error());

mysql_select_db("Test", $con);
$result=mysql_query("SELECT * FROM main");
while($row=mysql_fetch_array($result))
{
   echo $row['id'] . " " . $row['name'];
   echo "<br />";
}

mysql_close($con);
?>

</body></html> 
```

我在 MySQL 中创建了一个数据库和表。我制作了一个运行良好的 phpinfo.php 文件（包含`<?php phpinfo(); ?>`）。但是由于某种原因，Internet Explorer 只显示标题 [Testing Database]，而 Chrome 只显示标题，加上：

```
"; } mysql_close($con); ?> 
```

我在这里学习教程，我的设置有问题吗？我觉得我在这一小段代码中缺少某种括号，但找不到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T16:29:06.860

索引.html？

`.html`页面不会解析为 PHP，您需要`.php`扩展，或者使用一些 htaccess 来强制它通过 PHP 解析器。

除此之外，您的文件中存在语法错误，请更改为：

```
<html><body><h1>Testing Database</h1>

<?php

$con=mysql_connect("localhost","****","****");
if(!$con) die('Could not connect: ' . mysql_error());

mysql_select_db("Test", $con);
$result=mysql_query("SELECT * FROM main");
while($row=mysql_fetch_array($result))
{
   echo $row['id'] . " " . $row['name'];
   echo "<br />";
}

mysql_close($con);
?>

</body></html> 
```

`{`注意从这一行中删除：

```
if(!$con) { die('Could not connect: ' . mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:27:05.167

线

```
if(!$con) {die('Could not connect: ' . mysql_error()); 
```

缺少一个结束 '}'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:27:35.693

您`}`在以下行的末尾缺少 a：

```
if(!$con) {die('Could not connect: ' . mysql_error());} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-30T16:27:22.567

您没有安装 PHP，或者您没有调用 PHP 的服务器。

您看到您所看到的内容的原因是因为从`<?php`到到的所有内容都`<br />`被视为一个大的无效 HTML 标记。

# maven - 将 JNI 添加到多模块项目中的一些并非所有模块

> ID：11725543
> 
> 赞同：1
> 
> 时间：2012-07-30T16:24:45.097
> 
> 标签：maven, multi-module

我的多模块项目包含 10 个模块，其中 3 个需要 3rdparty jni。这三个必须解包 jni 工件并将其位置添加到 LD_LIBRARY_PATH 以进行测试。

处理这种情况的优雅 Maven 方式是什么？

*   添加依赖，通过maven-dependency-plugin执行surefire属性解包到三个模块（违反dont-repeat-yourself原则，不会扩展）。
*   在中央 pom 中为这些步骤使用配置文件并使用 needsFooJni 属性激活它（配置文件不是每个模块，应该用于平台或其他构建范围的需求）
*   使用由顶级 pom 中的属性控制的执行（似乎有点脆弱）。

那么，处理这种情况的优雅 Maven 方法是什么，所以我的本机依赖项用于测试阶段。

谢谢

彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:42:39.910

我建议将结构创建/修改为如下所示：

```
 root (pom.xml)
  +--- mod1 (pom.xml)
  +--- mod2 (pom.xml)
  .
  .
  +--- mod7 (pom.xml)
  +--- modX (pom.xml)
         +--- mod-jndi1 (pom.xml)
         +--- mod-jndi2 (pom.xml)
         +--- mod-jndi3 (pom.xml) 
```

在根目录（pom.xml）中，您可以为整个项目（dependencyManagement、pluginManagement）等定义公共事物。

在 modX (pom.xml) 中，您可以定义特殊的依赖项、仅用于 mod-jndi1...3 模块的 pluginManagmenet 部分以及您已经提到的 surefire 测试的配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:09:56.240

如何定义父 pom 部分内的依赖项`<dependencyManagement>`和插件，`<pluginManagement>`并仅在需要它的三个模块中使用它们？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T14:02:50.660

我选择了这个解决方案：

*   为默认 JNI 位置添加顶级属性。在下面的示例中，我还为需要特定结构来定位其他资源的 JNI 添加了一个“特殊”案例。`${project.basedir}/target/extracted ${project.basedir}/target/cache/special ${extractedJniCache}${path.separator}${specialExceptionLibrayCache}'

*   添加属性以控制提取

    `<skipSpecialJNIExtraction>true<skipSpecialJNIExtraction> <skipFooBarJNIExtraction>true<skipFooBarJNIExtraction>`

*   定义由跳过属性控制的依赖项提取执行（默认为跳过，单个模块可以覆盖

*   在我的surefire配置中定义路径和ld库路径 `<environmentVariables> <PATH>${env.PATH}${path.separator}${ldLibraryAddon}</PATH> <LD_LIBRARY_PATH>${ldLibraryAddon}</LD_LIBRARY_PATH>` `

默认情况下，所有测试都将 JNI 的目录添加到 PATH/LD_LIBRARY_PATH 以执行测试。仅当模块覆盖跳过属性时，这些目录才会存在。

它不像我想要的那样优雅，但它集中在主 pom 上，将复杂性集中在一个地方，并保持模块 pom 小。

# c++ - 受限数据类型属性冲突 - 带有 Access 数据库的 ODBC

> ID：11725544
> 
> 赞同：0
> 
> 时间：2012-07-30T16:24:45.477
> 
> 标签：c++, ms-access, mfc, odbc

我正在尝试使用 MFC 将数据添加到我的 Access 数据库中。我有两个表，在第一个表中添加一条记录后，我检索 id 并更新第二个表。第一次通过时一切正常。但是对于第二条记录表 1 rs.Update() 会引发异常 - 受限数据类型属性违规。我对两条记录使用相同的数据。表 1 的 ID 是自动生成的。

```
function AddData(){

rs.Open(CRecordset::snapshot, _T("SELECT * FROM Table1"));

for ( each of the objects ) 
{
    db.BeginTrans();
    rs.AddNew();  // Parent table

    m_xx = xx; 
    .......
    .....

   rs.Update(); 

   db.CommitTrans();

   id = GetParentId();  // Get Id of added record

   // Update the second table with id.
   UpdateSecondTable ( id ) ; 

 }
 rs.close(); 

}

int GetParentId(){

 rs.Open(CRecordset::forwardOnly, _T("SELECT @@Identity FROM Table1"));
 int id = rs.GetFieldValue(); 
 return id; 
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:26:42.457

`@@identity`在 Access 中效果不佳。您必须使用完全相同的连接来检索插入的 ID。

解决此问题的快速技巧如下所示：`select max(ID) from table1`

但是，这在多用户环境中**并不安全。**

# php - Python中面向原型的功能？

> ID：11725546
> 
> 赞同：2
> 
> 时间：2012-07-30T16:24:48.590
> 
> 标签：php, python, prototype-oriented

我已经编写了一个 PHP 应用程序，并且遇到了一个无法用 PHP 很好地解决的问题。所以我正在考虑将它移植到 Ruby 或 Python——我以前从未使用过的两种语言。据我所知，这个问题可以在 Ruby 中解决，我现在的问题是我是否也可以在 Python 中解决它：

应用程序的核心有一个我想扩展的 A 类。有一个扩展 E1 通过方法 doFoo 扩展 A 和一个扩展 E2 通过方法 doBar 扩展 A。现在我想同时使用这两个扩展，而不必更改 A、E1 或 E2 的代码。在 PHP 中，这可以通过编写第三个扩展 E3 来存档，该扩展提供了一个扩展 A 的类 B，并将 E1 和 E2 与特征或其他一些肮脏的技巧混合在一起。但我希望能够拥有核心，拥有这两个扩展并在配置中拥有信息：“使用扩展 E1 和 E2”，而不需要任何更多的类将所有东西放在一起（并且不使用 __call() ）。

在 Python 中以任何方式都可能吗？我真的不需要可以在运行时更改的原型。A 的每个实例都应该有 doFoo 和 doBar。

**编辑：**整个事情应该在没有扩展的情况下工作，只有 E1（没有 E2），只有 E2（没有 E1）和两个扩展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:45:41.833

正如mailson 建议的那样，多重继承是要走的路。一个简单的

```
class E(A, E1, E2):
    ... 
```

应该做你需要的。

编辑：要动态进行，您可以使用类型：

```
E = type("E", (A, E1, E2), {}) 
```

EDIT2：Dougal 打败了我：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:07:02.393

您可以执行建议的多重继承，而无需像这样进行硬编码：

```
mixins = (E1, E2)
E = type('E', (A,) + mixins, {}) 
```

这就像在做

```
class E(A, E1, E2):
    pass 
```

但允许您动态指定 mixins。

# android - 我需要使用 UNITY 的 Android 和 IOS 应用程序设置保存图片的路径

> ID：11725548
> 
> 赞同：5
> 
> 时间：2012-07-30T16:24:49.887
> 
> 标签：android, path, screenshot, unity3d, image

我的实际代码：

```
function Update() { 
    if(Input.GetMouseButtonDown(0)) {
       Debug.Log("foto");
       Application.CaptureScreenshot(Application.dataPath + "Screenshot.png");
    }
} 
```

我需要此功能的每张照片的输出路径。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:10:55.933

您可以将文件保存到[Application.persistentDataPath](http://docs.unity3d.com/Documentation/ScriptReference/Application-persistentDataPath.html)。`Application.dataPath`Unity 应用程序在 Android 或 iOS 设备上没有写入权限。

另外，不要忘记用正斜杠连接路径和文件夹名称：

```
Application.CaptureScreenshot(Application.persistentDataPath + "/Screenshot.png"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:39:43.270

```
static function CaptureScreen(){
var filename;
var name :String = GuiScript.stringToEdit;
var allowedScreenshots:int=1000;
for(var i = 0; i <= allowedScreenshots; i++)
    {

        if(Application.platform == RuntimePlatform.Android){
            filename = "/mnt/sdcard/Android/data/com.xxxx.Test01/files/" + name + i + ".png";
        } else {            
            filename =  name + i + ".png";
        }
        if(!System.IO.File.Exists(filename))
        {
            Application.CaptureScreenshot(name + i + ".png" );
            print("ScreenDUMP made!");
            print(i);
            print(name);

            return;
        }
        else
        {
            print("filename already exists");
            print(i);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T04:44:41.213

`Application.persistentDataPath`of unity 总是指向文件文件夹 in`IOS`和 to `/mnt/android/data/application-bundle-identifier/`for `android`。

如果您不提供`Application.CaptureScreenshot`put 的路径，而只提供屏幕截图的名称，它将自动保存在`IOS`尚未测试的 Documents 文件夹中`android`。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T18:23:08.760

使用 Unity3D 保存某种屏幕截图至少有[3 种方法](http://ralphbarbagallo.com/2012/04/09/3-ways-to-capture-a-screenshot-in-unity3d/)[**`Application.CaptureScreenshot`**](http://unity3d.com/support/documentation/ScriptReference/Application.CaptureScreenshot.html)：[**`Texture2D.ReadPixels`**](http://unity3d.com/support/documentation/ScriptReference/Texture2D.ReadPixels.html)和[**`RenderTexture`**](http://unity3d.com/support/documentation/ScriptReference/RenderTexture.html).

我只知道第一个：`Application.CaptureScreenshot`。这肯定是最简单的一个。它不采用路径，它会保存到`Application.persistentDataPath`or `Application.dataPath + "/../"`，具体取决于您的平台。不幸的是，目前无法确定或仅通过代码知道 - 它只是以这种方式破坏。此外，它很慢，可能需要几秒钟的时间来处理。它作为一个单独的进程运行，因此您应该有一个更新或协程等待文件被创建，然后再将其用于任何事情。

如果您想选择将文件保存在哪里，您需要执行以下操作：

```
bool creatingFile = false;
string fileName = "Screenshot.png"
function Update() { 
    if(Input.GetMouseButtonDown(0)) {
        Application.CaptureScreenshot(fileName);
        creatingFile = true;
    }
    if (creatingFile) {
        string origin = System.IO.Path.Combine(Application.persistentDataPath, fileName);
        string destination = "/sdcard/ScreenCapture/" + fileName; // could be anything
        if (System.IO.File.Exists(origin)) {
            System.IO.File.Move(origin, destination);
            creatingFile = false;
        }
    }
} 
```

# oracle - root 权限可以破坏 SQLDriverConnect（作为普通用户工作）吗？

> ID：11725551
> 
> 赞同：0
> 
> 时间：2012-07-30T16:25:13.513
> 
> 标签：oracle, odbc, unixodbc

我在 linux (unixODBC) 下通过 Oracle ODBC 驱动程序得到一个奇怪的行为。

我有一个连接到数据库的程序，当由非特权用户调用时，它按预期工作，而如果使用 root 权限调用（使用 sudo 和 su 测试）挂在 SQLDriverConnect 调用中，然后在几分钟后死亡（返回代码 1）没有错误消息或任何东西。

我正在使用系统 DSN 和完全相同的配置（唯一的区别是 root 权限），为了让事情更有趣，我还使用相同的代码连接到 postgreSQL 数据库，没有任何问题，无论是非特权用户还是 root 用户（因此它似乎不是 unixODBC 问题）。

知道它是否真的是 Oracle 驱动程序问题的原因或提示其解决方法？

Oracle驱动版本：oracle-instantclient11.2-odbc-11.2.0.1.0-1.x86_64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:21:53.760

好吧，回答我自己的问题，

答案是否定的，root 权限不是问题的原因：环境变量是。

切换到 root 用户不会保留 ORACLE_HOME 环境变量；设置它可以使驱动程序正常工作。

总之，尽管在 odbc 配置中有驱动程序本身的完整路径，但 Oracle 驱动程序仍然需要该环境变量才能正常工作。此外，它没有给出失败原因的任何提示。

要点：如果您的 Oracle 有问题（从服务器本身到最远程的组件），首先要做的是仔细检查环境。

# android - Android：滚动视图拉伸背景图像

> ID：11725552
> 
> 赞同：5
> 
> 时间：2012-07-30T16:25:17.123
> 
> 标签：android, android-layout

所以我试图让我的活动可滚动，当我把我的 relativelayout 放在滚动视图中时，会发生这种情况：

![在此处输入图像描述](../Images/e4e4fe4073d619de41a1a1bb2886b38f.png)

这是上面屏幕截图的代码：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/background"
        android:orientation="vertical"
        android:paddingLeft="60dp"
        android:paddingTop="53dp" >

        <ImageView
            android:id="@+id/gearImage"
            android:layout_width="35dp"
            android:layout_height="35dp"
            android:layout_marginTop="70dp"
            android:clickable="true"
            android:contentDescription="@string/gearDescription_string"
            android:src="@drawable/gear" />
    </RelativeLayout>

</ScrollView> 
```

如果我取出滚动视图，结果是正确的，但当然没有我想要的滚动功能：

![在此处输入图像描述](../Images/8011fdbee83b7fd4abb9099ec33b93f3.png)

现在，有什么办法可以让它看起来像这样：

![在此处输入图像描述](../Images/36163df718f2fea6378dc8f5b6a917b0.png)

这样我仍然可以滚动，但如果它们到达我拥有的背景图像的底部，它只是白色（很难说，因为网页的背景是白色的，但我在第二张图像的底部添加了一个白色矩形显示我的意思）。无论如何，他们没有理由触底。

当然，如果您对如何在不拉伸背景图像的情况下实现滚动视图有任何其他建议，我会很高兴听到这些建议。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T16:43:56.660

退房[`android:fillViewport`](http://developer.android.com/reference/android/widget/ScrollView.html#attr_android:fillViewport)。根据文档，这`defines whether the scrollview should stretch its content to fill the viewport`. 将此行代码添加到您的`ScrollView`：

```
android:fillViewport="true" 
```

希望这可以帮助。

## 编辑：

尝试以下操作：

1.  在`ScrollView`片场`android:layout_height="fill_parent"`
2.  在`RelativeLayout`片场`android:layout_height="wrap_content"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T08:59:28.503

我有同样的问题，这对我有用：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/rel"  
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scroll" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:background="@drawable/login_background"
    android:fillViewport="true"
    >

 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
   android:orientation="vertical"
  > 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T16:45:18.703

而不是设置背景将`RelativeLayout`其设置为您的`ScrollView`. 因此，您只需将此属性从`<RelativeLayout>`标记移动到`<ScrollView>`标记：

```
android:background="@drawable/background" 
```

这将消除正在发生的拉伸，并且背景不会随着`RelativeLayout`. 但这不会产生在未缩放背景下方显示白色背景的效果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T03:18:42.360

它不起作用的原因是我的图像在像素方面太大了。我猜滚动视图被迫将图像保持在其原始大小，所以它所做的就是这样。它使长度成为原始图像的全长，因为我的滚动视图是垂直的，并沿宽度挤压它，因为我没有滚动视图左右移动。

简单的解决方法是使图像更小。它可以在正常布局内正确调整大小，但不能在滚动视图内调整大小，这真是太奇怪了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-07T07:19:25.653

这为我解决了这个问题

将此行添加到清单文件中的相应活动

```
android:windowSoftInputMode="adjustResize" 
```

# ios - 我在哪里可以找到 iOS Obj-C 代码来扫描并连接到 wifi（私有 API）

> ID：11725553
> 
> 赞同：7
> 
> 时间：2012-07-30T16:25:18.737
> 
> 标签：ios, wifi, iphone-privateapi

我需要一个扫描并连接到 wifi 的示例 obj-c 代码。私有 API 没问题，我不会将应用程序发布到 appStore。我在 cydia 中找到了一个名为“WiFiFoFum”的应用程序，它可以扫描和连接，不幸的是我找不到该应用程序的源代码。有人知道我在哪里可以找到该代码吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T00:59:30.623

在这里找到答案：[http ://code.google.com/p/iphone-wireless/issues/detail?id=20](http://code.google.com/p/iphone-wireless/issues/detail?id=20)

它在我的 iPhone 4 v5.1.1 上运行良好。我能够扫描并连接到网络。你可以在这里下载项目[https://github.com/devinshively/wifiAssociate](https://github.com/devinshively/wifiAssociate)

这是一个引文：

*Apple80211Associate 仍在工作（至少在 3.1.2 上）。在 iPhone OS 2 和 3 之间，框架已更改名称，因此您应该按以下方式绑定您的函数：*

```
void *airportHandle;
int     (*Apple80211Open)(void *);
int     (*Apple80211BindToInterface)(void *, NSString *);
int     (*Apple80211Close)(void *);
int     (*Apple80211Info)(void *, NSDictionary**);
int     (*Apple80211Associate)(void *, NSDictionary*, void *);
int     (*Apple80211Scan)(void *, NSArray **, void *);

libHandle       = dlopen("/System/Library/SystemConfiguration/WiFiManager.bundle/WiFiManager", RTLD_LAZY);
Apple80211Open                          = dlsym(libHandle, "Apple80211Open");
Apple80211BindToInterface       = dlsym(libHandle, "Apple80211BindToInterface");
Apple80211Scan                          = dlsym(libHandle, "Apple80211Scan");
Apple80211Close                         = dlsym(libHandle, "Apple80211Close");
Apple80211Info                          = dlsym(libHandle, "Apple80211GetInfoCopy");
Apple80211Associate                     = dlsym(libHandle, "Apple80211Associate"); 
```

*从 v2 到 v3 最显着的变化是 SCAN_RSSI_THRESHOLD 参数（用于扫描功能）。它曾经取一个正数，远离它应该是的物理 dB
，现在它取信号的 dB。如果你使用它，你可以将它设置为 -100：这是一个代码片段（从我的代码中挑选的樱桃，所以未经测试）：*

```
void *airportHandle;

NSArray *keys = [NSArray arrayWithObjects:@"SCAN_RSSI_THRESHOLD", @"SSID_STR", nil];
NSArray *objects = [NSArray arrayWithObjects:[NSNumber numberWithInt:-100], ssid, nil];

NSDictionary *params = [NSDictionary dictionaryWithObjects:objects forKeys:keys];
NSArray *found;

int openResult = Apple80211Open(&airportHandle);
NSLog(@"Openning wifi interface %@", (openResult == 0?@"succeeded":@"failed"));

int bindResult = Apple80211BindToInterface(airportHandle, @IF_NAME);

int scanResult = Apple80211Scan(airportHandle, &found, params);

NSDictionary *network;

// get the first network found
network = [found objectAtIndex:0];
int associateResult = Apple80211Associate(airportHandle, network,NULL);

Apple80211Close(airportHandle); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:33:24.757

Objective-C 是编译好的，所以你不能像脚本语言那样只获取程序的源代码。您可以查看“WiFiFoFum”是否开源，您可能可以从作者的 github 下载源代码。否则，您可以查看目录中的私有框架并使用[class-dump-z](http://code.google.com/p/networkpx/downloads/detail?name=class-dump-z)`/System/Library/PrivateFrameworks`从它们中转储头文件，如下所示

```
$ class-dump-z -H <private framework> 
```

当然没有尖括号。

编辑：

刚查了一下，好像不是开源的。

# xml - 如何计算 XSLT 中的动态 xml 节点？

> ID：11725558
> 
> 赞同：0
> 
> 时间：2012-07-30T16:25:34.207
> 
> 标签：xml, dynamic, count, nodes

我有一种情况，我想根据每个节点顶部设置的条件计算返回的标签数量。

我有近 20 个标志，如下例所示。我们不知道这些标志中有多少是真的。如果 Flag 为 TRUE，则将返回自定义文本。我想知道返回的标志数。我尝试了很多使用变量的方法，但都没有成功。

```
<!--CPSOR ALERT FLAG-->
<xsl:if test="Person/PersonInfo/CPSORFlag ='true'">                    
  <scope:PersonAlert>
    <!--PersonAlerts.PersonAlertText-->
    <scope:AlertText>                        
      <xsl:text>CONV PER/SOFF</xsl:text>
    </scope:AlertText>
  </scope:PersonAlert>
</xsl:if>
<!--CERTASADULT ALERT FLAG-->
<xsl:if test="Person/PersonInfo/CertAsAdultFlag ='true'">
   <scope:PersonAlert>
    <!--PersonAlerts.PersonAlertText-->
    <scope:AlertText>
      <xsl:text>CERT ADULT</xsl:text>
    </scope:AlertText>
  </scope:PersonAlert>
</xsl:if>
<!--DECEASED ALERT FLAG-->
<xsl:if test="Person/PersonInfo/DeceasedFlag ='true'">
  <scope:PersonAlert>
    <!--PersonAlerts.PersonAlertText-->
    <scope:AlertText>
      <xsl:text>DECEASED</xsl:text>
    </scope:AlertText>
  </scope:PersonAlert>
</xsl:if> 
```

这是示例 XML

![在此处输入图像描述](../Images/a02ccc1a18bba48bce4ca4dcefbaf248.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T22:39:39.763

一般问题的经典示例：您想从相同的输入数据计算两个不同的结果。有几种方法。

(a) 咬紧牙关，对输入进行两次处理。这是 james31rock 选择的 solytion。

(b) 与 (a) 相同，但尝试识别您多次计算的表达式，并将这些表达式的结果放入变量中，以避免重复计算。

(c) 将第一次计算的结果放入一个变量中，对该变量的结果进行第二次计算。

我想我会倾向于按照（b）的方式做一些事情。这是 XSLT 2.0 - 如果你付给我很多钱，我只做 XSLT 1.0。另外，我假设`Person/PersonInfo/CPSORFlag`每个表达式都选择一个节点。

```
<xsl:variable name="flags" select="Person/PersonInfo/(CPSORFlag, CertAsAdultFlag, DeceasedFlag, ....)"/>

<xsl:variable name="count" select="count($flags[.='true'])"/>

<xsl:apply-templates select="$flags[. = 'true']"/> 
```

然后

```
<xsl:template match="Person/PersonInfo/*" priority="5">
   <scope:PersonAlert>
    <!--PersonAlerts.PersonAlertText-->
    <scope:AlertText>
      <xsl:next-match/>
    </scope:AlertText>
  </scope:PersonAlert>
</xsl:template>

<xsl:template match="CPSORFlag" priority="4">CONV PER/SOFF</xsl:template>
<xsl:template match="CertAsAdultFlag" priority="4">CERT ADULT</xsl:template>
<xsl:template match="DeceasedFlag" priority="4">DECEASED</xsl:template>

etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:58:53.677

假设您的 XML 是这样的：

```
<root>
  <Person>
    <PersonInfo>
      <CPSORFlag>true</CPSORFlag>
    </PersonInfo>
  </Person>
  <Person>
    <PersonInfo>
      <ConditonalReleaseFlag>true</ConditonalReleaseFlag>
    </PersonInfo>
  </Person>
  <Person>
    <PersonInfo>
      <MissingFlag>true</MissingFlag>
    </PersonInfo>
  </Person>
</root> 
```

使用 count() 函数

```
<NumberOfFlags>
<xsl:value-of select="count(//Person/PersonInfo[CPSORFlag[.='true'] or CPSORFlag[.='true']])"/>
</NumberOfFlags> 
```

或者

```
<NumberOfFlags>
<xsl:value-of select="count(//Person/PersonInfo[CPSORFlag='true' or CPSORFlag='true'])"/>
</NumberOfFlags> 
```

在上面显示的过滤器中添加所有不同类型的标志

[CPSORFlag='true' 或等...]

这是一个经过验证的示例

![标志数量](../Images/effafd2e655de31113f99acc3e3d26d2.png)

**编辑**

鉴于您新粘贴的 XML，此模板应该可以解决问题

**XML**

```
 <Person>
    <PersonInfo>
      <CPSORFlag>true</CPSORFlag>
       <MissingFlag>true</MissingFlag>
       <ConditonalReleaseFlag>true</ConditonalReleaseFlag>
    </PersonInfo>
  </Person> 
```

**样式表**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:java="http://xml.apache.org/xslt/java" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" exclude-result-prefixes="java" version="1.0">
  <xsl:output media-type="text/xml" method="xml"/>
  <!-- Filters refdoc based on condition and  data  -->
  <xsl:template match="/">
    <xsl:apply-templates select="//PersonInfo"/>
  </xsl:template>

  <xsl:template match="PersonInfo">
    <NumberOfFlags>
         <xsl:value-of select="count(CPSORFlag[.='true']|MissingFlag[.='true']|ConditonalReleaseFlag[.='true'])"/>
     </NumberOfFlags>
  </xsl:template>
</xsl:stylesheet> 
```

只需要使用 | 添加一个新标志 计数函数内的符号

CPSORFlag[.='true'] | MissingFlag[.='true']

# git - 使用现有更改创建新分支

> ID：11725559
> 
> 赞同：5
> 
> 时间：2012-07-30T16:25:36.333
> 
> 标签：git

我已经克隆了存储库的主分支并进行了一些更改。如何使用这些更改创建分支？我不想推动他们中的任何一个掌握。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-30T16:45:53.620

如果您还没有提交：

```
$ git checkout -b <new_branch_name>   # create (and checkout) the new branch
$ git commit -a                       # commit to the new branch 
```

如果您已经提交（`master`包含您的更改）：

```
$ git branch <new_branch_name>     # create the new branch
$ git reset --hard HEAD^           # rewind master

$ git checkout <new_branch_name>   # switch to the new branch 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:28:22.890

备查。通常，在进行任何更改之前，您会分支。但供以后参考

```
git stash save
git stash branch <branchname> 
```

# google-app-engine - 仅选择每个 url 的最新帖子

> ID：11725562
> 
> 赞同：0
> 
> 时间：2012-07-30T16:25:42.507
> 
> 标签：google-app-engine, google-cloud-datastore, python-2.7, gql

我在 GAE 上有一个应用程序，可让用户将\编辑帖子添加到任意路径（如 wiki）。我将所有帖子存储在一个表中。该表的结构如下：

```
class WikiPosts(db.Model):
    path = db.StringProperty(required = True)
    content = db.TextProperty(required = True)
    date_created = db.DateTimeProperty(auto_now_add = True) 
```

在主页上，我想显示每个路径的最新帖子。

我的问题类似于这个问题（[在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/sql-select-first-row-in-each-a-group-by-group)）但答案涉及使用在 GAE 中不可能的连接。

我可以有一个专门的字段来跟踪每个 url 的最新帖子，但是否可以使用 gql 查询来做到这一点？

到目前为止，我正在使用这个查询，它返回按创建时间排序的所有 wiki 帖子的所有版本。

```
db.GqlQuery("SELECT * FROM WikiPosts ORDER BY date_created DESC limit=10") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:11:51.900

由于您没有唯一的路径列表，并且由于 GAE 不支持 SQL 的等效项`SELECT DISTINCT`（请参见[此处](https://stackoverflow.com/questions/239258/python-distinct-on-gquery-result-set-gql-gae)、[此处](https://stackoverflow.com/questions/1183102/how-to-get-the-distinct-value-of-one-of-my-models-in-google-app-engine)和[此处](https://stackoverflow.com/questions/5566908/calculating-unique-elements-from-huge-list-in-google-app-engine)），因此您必须

1.  每次显示主页时生成该列表（不推荐超过几百个帖子），或者
2.  创建另一个表/模型以跟踪添加新帖子时的唯一路径（然后将此新表与 Shay 的答案结合使用），或
3.  正如您所说，跟踪每个路径的最新帖子。

我认为选项 3 是您最好的选择，因为（就像 GAE 的情况一样），您将准确地放入数据存储区（即，使写入更复杂以支持快速读取。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:26:28.617

您可以致电：

```
def get_latest_posts(amount=10):
  return db.GqlQuery("SELECT * FROM WikiPosts where path =:1 ORDER BY date_created DESC limit=:2", path, amount) 
```

这将为每个路径返回最新帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:01:08.403

有很多与为每次页面访问进行查询相关的问题。当然，您可能有更多的实例，并且必须与支持查询的索引的最终一致性抗衡。既然您的页面只是前十名，为什么不简单地使用 memcache 对象来管理它呢？如果找不到该对象，则执行查询并写入丢失的 memcache 对象。发布列表更新将在实体 put() 之前写入/重写 memcache - 这可能是延迟函数（任务队列）的良好候选者。

# ruby-on-rails - 如何在 Rails 中创建哈希 URL？

> ID：11725563
> 
> 赞同：2
> 
> 时间：2012-07-30T16:25:45.460
> 
> 标签：ruby-on-rails, controller, routes

我有一个产品控制器，它允许我以通常的 rails 方式访问 show 方法

```
product GET    /products/:id(.:format)                 products#show 
```

现在，我希望每个产品都有一个唯一的哈希 url，可以在根路径下访问，例如 mydomain.com/24fe3455g

最好的方法是什么？

最佳菲利普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:30:16.677

您可以`md5`在数据库中为每一行存储一个 - 例如计算这个 md5 `id+timestamp`（作为连接字符串），然后让您的路线如下：

```
product GET    /products/:hash(.:format)                 products#show 
```

您还可以使用[`UUID`](http://en.wikipedia.org/wiki/Universally_unique_identifier)生成唯一 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:38:00.013

首先，您需要在`routes.rb`. 由于它有点“失败”，您通常会将其放在路线的尽头。查看指南以了解如何定义它： http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

如果您想在整个应用程序中始终使用这种哈希样式的 url 而不是 id，您还可以在模型中实现`to_param`和`self.from_param`方法：http: [//apidock.com/rails/ActiveRecord/Base/to_param](http://apidock.com/rails/ActiveRecord/Base/to_param)

如果你喜欢一些工具支持，你也可以使用像 friendly_id 这样的 gem：[http ://rubydoc.info/github/norman/friendly_id/master/file/Guide.rdoc](http://rubydoc.info/github/norman/friendly_id/master/file/Guide.rdoc)

# c++ - 为什么这个微不足道的程序编译后会这么大？

> ID：11725567
> 
> 赞同：11
> 
> 时间：2012-07-30T16:25:58.123
> 
> 标签：c++, ubuntu, compilation

我创建了一个包含以下行的文件：

```
int main() { return 0; } 
```

编译后，我惊讶地发现这个简单程序的二进制文件是 8328 字节！这里发生了什么，二进制文件在这 8328 个字节中做了什么？当然，这个程序可以用几行汇编来表达。

注意：我用以下行编译了这个：

```
g++ main.cpp 
```

我的 g++ 版本是`g++ (Ubuntu/Linaro 4.6.1-9ubuntu3) 4.6.1`

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-30T16:33:57.940

该二进制文件中有很多内容：

*   使二进制自描述的标头（尝试`file`在其上运行）
*   符号表，该`strip`工具将为您删除（或链接`gcc -s`）
*   您从不使用的共享库的名称和位置（其中五个在我的盒子里；试试`ldd`和`strings`工具）
*   加载这些库并设置`argc`和`argv`然后调用的启动代码`main`
*   `main`将' 的返回值返回给操作系统的关闭代码。

对于喜剧效果，请尝试静态链接该程序，其中您的二进制文件将包含通常动态链接到 DLL 的函数。*（但是，此选项将简化部署）*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T16:35:19.530

对生成的文件进行二进制转储并检查出来！

它主要是空的空间。二进制文件中的数据被组织成页面（通常大小为 4096 或 8192 字节）。这样就可以有效地对页面进行[内存映射](http://en.wikipedia.org/wiki/Memory_map)。通常，第一页包含有关如何加载二进制文件的说明 - 代码位于文件中的此位置并被映射到此位置，对于数据等也是如此。第二页可能是您的代码，第三页将包含符号和调试信息。每个页面可能大部分是空的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T16:43:30.157

不要打扰。

试着做一个不那么琐碎的程序，你会发现大小并没有那么不同，直到你的代码开始变成数百千字节。

**简而言之：**标准库的一部分构成了 OS 模块之间的“基础结构”和管理程序启动和终止的 C++ 语义（所有初始化和销毁​​全局变量、标准输入和输出等）

**另外：**将 C++ 符号映射到内存地址的所有内容（如果您不需要删除它 - 尝试`-O3` `-s`并消除`-g`选项），以便调试器可以在整个执行过程中显示正确的源代码引用。

**另外：**由于内存的布局方式，二进制文件通常由固定大小的块组成。您的程序甚至可能更短，但必须至少存在一个代码段、一个数据段初始化器和一个共享段（用于常量值）。

# sql - Postgresql - 将列类型从 oid 更改为具有数据保留的 bytea

> ID：11725568
> 
> 赞同：3
> 
> 时间：2012-07-30T16:25:58.223
> 
> 标签：sql, hibernate, postgresql, lob

现在我正在开发使用 hibernate + postgresql 来持久化数据的应用程序。我们需要存储一些可序列化的HashMap，所以为此使用了LOB(oid)。但是由于 postgresql 中 oid 删除的一些问题，我们决定将这些数据存储为 bytea 而不是 oid。所以问题是，在保留旧数据的情况下，将列类型从 oid 更改为 bytea 的最佳方法是什么？如果有人可以为这种数据转换提供工作脚本/解决方案，那就太好了。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-02-27T11:00:43.197

我遇到过同样的问题。所以我用四个请求来创建缓冲列

```
ALTER TABLE attachment add column content_bytea bytea
UPDATE attachment SET content_bytea = lo_get(content)
ALTER TABLE attachment drop column content
ALTER TABLE attachment rename column content_bytea to content 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T09:15:34.660

lobs 可能是可序列化哈希映射的错误解决方案，除非您需要使用偏移量进行搜索。拜茶更干净。问题是您可能需要一些停机时间来切换。

我可能会做的是创建一个新列并复制数据，然后取消链接，然后删除旧列。然后运行适当的真空作业。

# javascript - 正则表达式到具有精确字符的单词

> ID：11725569
> 
> 赞同：0
> 
> 时间：2012-07-30T16:26:04.607
> 
> 标签：javascript, regex, pattern-matching

我需要一个 javascript 正则表达式来获取所有以 ! 然后是任意数量的字母数字，例如，如果我有类似的文本

```
!google I don't like you I prefer !bi3g or !yahoo 
```

我需要一个正则返回（“！google”，“！bi3g”，“！yahoo ” `/\![a-z0-9 &-_] /gi`）`\n`，因此将其应用于上一个文本不会返回“！雅虎”

我知道 using`\b\b`将返回所有单词，包括后面的`\n`单词和文本中的最后一个单词，任何人都可以帮助我如何设置正则表达式以返回**所有单词**，包括后面的`\n`单词和文本中的最后一个单词 using `\b\b`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:29:05.383

```
var str = "!google I don't like you I prefer !bi3g or !yahoo",
    words = str.match(/![^\s]+/g); //["!google", "!bi3g", "!yahoo"]; 
```

还要删除`!`您可以运行的标志

```
words = words.map(function(val) { return val.substr(1); }); 
```

（注意，`map()`这是 ECMAScript 版本 5 的一项功能；如果您需要对 IE <= 8 的支持，还有其他方法可以删除`!`.

# graph - Highcharts - 指定堆叠时间序列的顺序

> ID：11725570
> 
> 赞同：5
> 
> 时间：2012-07-30T16:26:05.503
> 
> 标签：graph, highcharts, time-series

有没有办法在 Highcharts 中指定时间序列的堆叠顺序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T12:26:01.867

我发现的唯一方法是在系列进入时对其进行排序。因此，如果我有系列 A、B 和 C 并且我希望它被排序，`B, C, A`那么我会按`B, C, A`顺序添加系列，使得系列 [0] = B, series[1] = C, and series[2] = A. 这绝对是一个杂牌，因为最好只签署一个堆叠索引而不是诉诸系列导入顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-11T17:14:32.530

您可以为您的系列分配一个索引，然后执行 series.update() 来更新索引。见下文 -

```
$(function() {
   var chart = Highcharts.chart('container', {
      chart: {
        type: 'column'
      },
   plotOptions: {
      series: {
        stacking: 'normal'
      }
   },
   series: [{
      data: [1, 2, 3, 4, 5, 4],
      index: 1
   }, {
      data: [6, 4, 5, 6, 7, 4],
      index: 2,
      id: 's2'
   }]
 });

 $('#button').click(function() {
    chart.get('s2').update({index: 0});
  });
}); 
```

# c++ - 如何在结果列表的开头插入生成的列表？

> ID：11725572
> 
> 赞同：1
> 
> 时间：2012-07-30T16:26:09.130
> 
> 标签：c++, stl

我有一个类似的列表，`list<T> result;`并且在 for 循环中，我在每次传递中生成另一个列表，例如

```
 list<T> result;
    for(int i=0;i<10;i++){
       list<T> temp=generated_list();
        // here I want to add at the beginning of the result list values from temp list
    } 
```

如何在结果列表的开头插入生成的列表？有没有比循环或通过连接创建新然后将结果设置为结果列表更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T16:28:17.210

`std::list<T>::splice`成员函数是做你想做的最有效的方法

```
list<T> result;
    for(int i=0;i<10;i++){
       list<T> temp=generated_list();
        result.splice(result.begin(), temp);
    } 
```

# python - 什么是对存储在大型文本文件中的数据进行过滤、排序和分组的好方法

> ID：11725573
> 
> 赞同：1
> 
> 时间：2012-07-30T16:26:11.757
> 
> 标签：python, database, numpy

在蒙特卡罗模拟中，我将每次运行的摘要存储在数据文件中，其中每一列包含一个参数或一个结果值。所以我最终得到了一个大型数据文件，其中存储了多达 40 列数据，其中许多行与其他行没有任何关系。

比如说，这个文件看起来像这样：

```
#param1    param2    result1    result2
1.0        1.0       3.14       6.28
1.0        2.0       6.28       12.56
...
2.0        1.0       1.14       2.28
2.0        2.0       2.28       4.56 
```

由于我经常想研究其中一个结果对其中一个参数的依赖性，因此我都需要按第二个参数分组并按第一个参数排序。另外，我可能想根据任何参数过滤掉行。

我开始为此编写自己的课程，但这似乎比人们想象的要难。现在我的问题是：是否有任何图书馆已经这样做了？或者，由于我熟悉 SQL，是否很难为 SQLAlchemy 编写一个 SQL 后端，让我可以对我的数据进行简单的 SQL 查询？据我所知，这将提供我需要的一切。

* * *

根据 cravoori 的回答（或者至少是他/她发布的链接中的那个），这里有一个很好的简短解决方案来解决我的问题：

```
#!/usr/bin/python2

import numpy as np
import sqlite3 as sql

# number of columns to read in
COLUMNS = 31

# read the file. My columns are always 18chars long. the first line are the names
data = np.genfromtxt('compare.dat',dtype=None,delimiter=18, autostrip=True,
                     names=True, usecols=range(COLUMNS), comments=None)

# connect to the database in memory
con = sql.connect(":memory:")

# create the table 'data' according to the column names
con.execute("create table data({0})".format(",".join(data.dtype.names)))

# insert the data into the table
con.executemany("insert into data values (%s)" % ",".join(['?']*COLUMNS),
                data.tolist())

# make some query and create a numpy array from the result
res = np.array(con.execute("select DOS_Exponent,Temperature,Mobility from data ORDER \
    BY DOS_Exponent,Temperature ASC").fetchall())

print res 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:20:07.217

看到数据是分隔的，一种选择是通过 csv 模块将文件导入内存中的 SQLite 数据库，示例链接如下。Sqlite 支持大多数 SQL 子句

[将数据导入 SQLite 数据库](https://stackoverflow.com/questions/2854560/any-other-way-to-import-data-fileslike-csv-in-python-sqlite3-module-not-ins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:02:11.077

假设只需要简单的计算，代码内方法可能类似于以下几行：

```
file = open('list_filter_data.txt', mode='r')
lines = file.read().splitlines()
row_sets = [[float(c) for c in line.split()] for line in lines[1:]] # read and split the lines in the columns

# get only rows whose param1 = 1.0
subset = [row for row in row_sets if row[0] == 1.0]
print subset
# get only rows whose param1 = 2.0
subset = [row for row in row_sets if row[0] == 2.0]
print subset
# average result1 where param2 = 2.0
avg = sum([row[2] for row in row_sets if row[1] == 2.0]) / len([row[2] for row in row_sets if row[1] == 2.0])
print avg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:26:36.237

如果您的文件大小约为几 MB，您可以轻松地在内存中读取此文件并使用其他答案解决。

如果文件大小为几百 MB 或几 GB，则最好使用此处描述的延迟加载方法 -[在 Python 中读取大文件的延迟方法？](https://stackoverflow.com/questions/519633/lazy-method-for-reading-big-file-in-python)

如果您打算进行的计算可以按行完成，那么这些小块应该足以让您做任何您需要的事情。

否则，只需为您的参数和结果创建一个包含 C1、C2、..CN 列的 SQL 表，假设参数和结果之间都是一对一的关系。只需使用 python 数据库访问 apis 编写 SQL 语句并分析您需要的任何内容。

另一方面，Excel 电子表格也可能解决您的问题

# c# - 将数据发送到服务器 URL 并读回响应

> ID：11725574
> 
> 赞同：0
> 
> 时间：2012-07-30T16:26:18.160
> 
> 标签：c#

我有一个程序，我有一个充满原始数据的文本文件，我想将其发送到服务器。我有服务器的 URL，以及一个我需要发送的所有响应的数组。我想发送响应，然后将服务器接收到的内容回显到文本框中，以仔细检查发送的内容是否正确。谁能帮助我指出如何解决我的问题的正确方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:28:30.173

```
var wc = new WebClient();
var result = wc.UploadString(uri, data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:30:47.323

Wolfgang 的回答看起来很简单，我很尴尬地发布到[TCP Client Connection](https://stackoverflow.com/questions/1256822/tcp-client-connection)的链接，但如果你想看看很难做到这一点，那就是这样。

# ruby-on-rails - 安装 ffi (1.1.2) 时出错，Bundler 无法继续

> ID：11725577
> 
> 赞同：6
> 
> 时间：2012-07-30T16:26:25.277
> 
> 标签：ruby-on-rails, gem, ffi, osx-mountain-lion

在 Rails 3.0 项目中运行 OSX Mountain Lion。

在 Rails 项目中尝试使用捆绑程序更新我的 gem 时，出现以下错误：

```
An error occured while installing ffi (1.1.2), and Bundler cannot continue.
Make sure that `gem install ffi -v '1.1.2'` succeeds before bundling.

ERROR:  Error installing ffi:
    ERROR: Failed to build gem native extension.

        /Users/victorstan/.rvm/rubies/ruby-1.9.2-p320/bin/ruby extconf.rb
checking for ffi.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

...

You have to install development tools first. 
```

我安装了 XCode 以及命令行工具。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-31T13:22:04.243

你应该使用：

```
sudo ln -s /usr/bin/gcc /usr/bin/gcc-4.2 
```

另请参阅在 Mountain Lion和[https://gist.github.com/1860511](https://gist.github.com/1860511)[上安装 ImageMagick 和 rmagick 的问题](https://stackoverflow.com/questions/11676844/issue-with-installing-imagemagick-and-rmagick-on-mountain-lion)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T21:35:02.303

如果您为 Xcode 重新安装命令行工具，它应该可以正常工作。这是执行此操作的链接： [https ://developer.apple.com/downloads/index.action?=Command%20Line%20Tools%20%28OS%20X%20Mountain%20Lion%29](https://developer.apple.com/downloads/index.action?=Command%20Line%20Tools%20%28OS%20X%20Mountain%20Lion%29)

# git - GIT：查找并合并分支之间的常见文件差异

> ID：11725579
> 
> 赞同：1
> 
> 时间：2012-07-30T16:26:32.960
> 
> 标签：git, merge, diff

我有两个分支，一个是主分支，另一个是开发分支。

我想看看这两个分支之间的差异，但只有它们共有的文件和那些公共文件之外的文件，只有在开发分支中已更改的文件。

这篇[文章](https://stackoverflow.com/questions/822811/differences-in-git-branches)让我走到了那里，虽然它似乎也向我展示了添加到 master 没有的 dev 分支的新文件。

一旦我知道了已更改的公共文件，然后我想将公共文件中的这些更改从 dev 分支合并回 master 分支。

这样做的原因是我对 dev 分支中的代码进行了一些小的更改，这些更改应该在单独的分支中进行并合并回 master。

谢谢你的帮助。

# tfs - 特定更改所需的 TFS 分支策略建议

> ID：11725580
> 
> 赞同：0
> 
> 时间：2012-07-30T16:26:33.873
> 
> 标签：tfs

为我们的开发工作中出现的情况寻找一些分支策略。我们正在使用 TFS 2010 并使用具有三个分支的基本两个分支分支方案：Dev、Main（这是其他两个分支的稳定主分支）和 Release。目前 Main 和 Release 是相同的，并且在 Dev 分支中正在进行很多更改。

当我们开始最新的开发项目时，假设我们将遵循我们的常规做法，并将在 Dev 分支中完成的所有事情都带到一个点，然后开始发布过程。好吧，像往常一样，事情发生了变化，现在我们希望只完成在 Dev 分支中完成的一些工作（大约 20% 的更改），并希望对其进行发布。

我们希望推广的大多数更改都是独立的，但有一些文件需要检查并仅保留我们关心的发布功能。

那么，考虑到我们当前的两个分支策略，我们如何协调最初应该按照基于多特征的分支策略的方式构建的东西？

这是我们第一个使用 TFS 的大型项目，不幸的是，我们没有通过让变更集包含多个功能的东西，而不是使用标签等来练习良好的源代码管理。

在我看来，最坏的情况是从 Main 创建一个新分支，称为 Feature1，然后必须手动将更改从 Dev 分支复制到 Feature1 分支。这是唯一的方法还是有更有效的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:15:52.953

是的，我认为您需要创建一个新分支。但我不会称它为 Feature1。我会开始使用 Release 分支。

从 Main 创建一个 Release 分支。然后合并（不手动复制）您计划包含在 Dev 版本中的所有内容。如果主分支没有更改，则合并不应导致任何冲突。现在您可以在 Release 分支中开始稳定工作。

可以在 Dev 中继续工作，当版本准备好时，您可以合并从 Release 到 Dev 的所有修复以及对 Main 的所有更改。

由于您今天不使用标签，我认为您应该锁定 Release 分支。对于下一个版本，您创建一个新的 Release 分支。（确保在开始之前为所有发布分支考虑一个好的命名约定）然后你总是能够回到每个发布。

# java - ViewGroup.LayoutParams Java android 点表示法

> ID：11725586
> 
> 赞同：0
> 
> 时间：2012-07-30T16:26:50.343
> 
> 标签：java, android

我不明白这个符号`VieuwGroup.LayoutParams` 这是一个扩展的子类`Object`......我知道有可能做`class.field`或`class.method` 但这看起来像`class.class`？这是某种内部阶级吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:31:14.413

像 ViewGroup.LayoutParams 这样的类称为嵌套类。

它们通常是静态的，如下所示：

```
class MainClass{
    public static class NestedClass{
    }
}; 
```

您还可以阅读这些链接以获取更多信息，或在 Google 中搜索“Java 嵌套类”

[http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html) http://www.oursland.net/tutorials/java/innerclasses/

# scala - scala：完成演员的循环

> ID：11725587
> 
> 赞同：2
> 
> 时间：2012-07-30T16:26:51.180
> 
> 标签：scala

假设我有两种类型的演员：`Master`和`Slave`

我将新的工作分配给奴隶，等待他们的回应并处理回应。`Master`一旦所有的奴隶都完成了，我应该如何完成循环？

例如：

```
class Slave extends Actor {                                                  
  def act() {                                                                
    loop { react {                                                           
      ...                                                                    
      sender ! FinishedAll // send mesage to the master                      
      ...                                                                    
    } }                                                                      
  }                                                                          
}                                                                            

class Master extends Actor {                                                 
  loop { react {                                                           
    ...                                                                        
    case FinishedAll => exit // grrr!
    ...                                                                        
} 
```

我从 Scala 和 Actors 开始，所以答案可能很简单:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T16:42:12.917

```
class Master extends Actor {
  def act() {
    var finished = false
    loopWhile( !finished ) { react {
      ...
      case FinishedAll => finished = true
      ...
    }}
  }
} 
```

当然，如果要等几个奴隶，就需要倒数未完成的奴隶的数量，以确定何时完成主角。

# java - 单击 jqgrid 上的一行时显示 jqgrid

> ID：11725589
> 
> 赞同：0
> 
> 时间：2012-07-30T16:27:00.237
> 
> 标签：java, jquery-plugins, jqgrid

此页面必须用 JSP 和 java 编写

当我单击 jqgrid 上的一行时，我想显示一个 jqgrid。两个想法，

在第一页中，我必须在 jqgrid 中显示一个列表，并且当用户单击网格上的一行时

1）页面应该褪色，并且必须弹出另一个网格，以显示另一个网格上的详细信息。单击取消时，必须关闭弹出网格并且必须可见背景网格。2) 另一个 jqgrid 应该显示在实际 jqgrid 的顶部，就在单击的行的正下方。就像右键单击 jqgrid 行时的上下文菜单一样。

请指导我。我是 jquery 和 jqgrid 的新手，很难做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:06:59.067

所以这就是它的工作方式......

onSelectRow：函数（id）{

var data=jQuery("#gridFirstGrid").jqGrid('getRowData',id); //假设您在第一个网格中有姓名和公司

变量名称=数据。名称；var公司=数据。公司；

//还有另一种方法（getCell）也可以根据id直接获取Name和Company

jQuery("#gridFirstGrid").fadeOut("slow")。

在此处使用您要选择的数据加载第二个网格...假设您想从基于名称或公司的数据库中获取一些数据，从这里发送一个 ajax 请求并以 json 格式返回数据并将其绑定到第二个网格与您在第一个网格中所做的相同。在第二个网格中实现一个自定义按钮，然后单击按钮（取消）淡出第二个网格并淡入第一个网格。

要知道如何发送 ajax 请求检查这个链接[OnClickButton function parameter for MultiSelect jqgrid MVC3](https://stackoverflow.com/questions/11658625/onclickbutton-function-parameter-for-multiselect-jqgrid-mvc3/11662959#11662959)，以及如何添加自定义按钮检查这个[http://trirand.net/examples/grid/selection/selectedrow_client/default.aspx](http://trirand.net/examples/grid/selection/selectedrow_client/default.aspx) 它在外面网格，但你也可以使用它

# jquery - 如何使用 dataType: 'jsonp' 但在 Accept 标头中仍然有 application/json？

> ID：11725591
> 
> 赞同：4
> 
> 时间：2012-07-30T16:27:00.103
> 
> 标签：jquery, json, http, jsonp

我想访问另一个域上的 REST 服务。如果，在 JQuery 中，我指定：

```
dataType: 'json' 
```

正如预期的那样，它失败了，因为对于跨域调用，必须改用 JSONP。

当我将其更改为：

```
dataType: 'jsonp' 
```

预计它可以工作，但由于服务器期望JSONP 请求发送`application/json`or `application/xml`or`text/html`等​​而不是，因此失败。`*/*`

有没有办法强制 JQuery 在执行 JSON 请求时放入`application/json`请求`Accept`标头？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T16:30:42.060

AFAIK jQuery 的 JSONP 实现使用`<script>`注入到 DOM 中的标签（因此仅限于 GET 动词），您无法控制其`Accept`请求内容类型标头。这个标签`src`的`script`只是简单地指向远程域 url。浏览器只是简单地获取发送常规 GET 请求的底层端点。

因此，如果您希望能够为跨域调用设置请求标头，则必须在您的域上设置一个服务器端脚本，将调用委托给远程域（并设置相应的标头），然后将 AJAX 请求发送到你的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:32:18.517

我想你会想尝试这些方面的东西：

```
$.ajax({
    headers: { 
        Accept : "application/json; charset=utf-8",
        "Content-Type": "text/plain; charset=utf-8"
    }
    dataType: 'jsonp',
    success : function(response) {
        ...
    }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:37:35.533

这可能不适合您的用例，但是当我不得不做跨域 AJAX 时，我通常会在我的域中添加一个额外的资源，然后调用外部资源（通过 cURL 或其他）并返回值到调用客户端。本质上，您正在为 AJAX 调用构建代理。这肯定会增加开销，但您可以通过为此类调用添加缓存层来缓解这种情况。

# javascript - html 导航器“用户拒绝地理位置”

> ID：11725594
> 
> 赞同：19
> 
> 时间：2012-07-30T16:27:15.977
> 
> 标签：javascript, html, geolocation, navigator

我在使用 window.navigator 时遇到问题，每当我将以下代码作为本地 html 文件运行时，我都会收到错误代码 1“用户拒绝地理位置”：

```
navigator.geolocation.getCurrentPosition(function(position) {
        console.log(position);
    }, function(positionError) {
        console.log(positionError);
    }); 
```

输出来自错误函数， positionError 包含：

```
code: 1
message: "User denied Geolocation" 
```

如果包含的 html 是从某个服务器提供的，则不会发生这种情况。

这是预期的吗？有没有办法从本地 html 使用导航器？我正在尝试编写一些移动应用程序，但也尽可能避免使用网络。

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-30T17:12:56.710

如果您使用的是 chrome，请查看以下答案：

[Chrome 中的 HTML 5 地理位置提示](https://stackoverflow.com/questions/5423938/html-5-geo-location-prompt-in-chrome)

看来这是`file`协议的安全限制。看起来您需要从服务器本地托管它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-08-18T15:36:16.540

对我有用的一个简单响应是简单地将我的网址从

```
localhost 
```

至

```
127.0.0.1 
```

Chrome 让我确认我想分享我的位置设置，但我离开了！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-06-28T05:58:07.360

只需点击网址左侧的小“i”符号：-（请参阅下图）

[![信息符号图](../Images/a66464fc35c18d37caa13c116dbc25df.png)](https://i.stack.imgur.com/9dKY6.png)

然后检查该位置是否为“块”。将其更改为“允许”，然后重新加载页面。

希望这可以帮助。

# magento - 将产品数据从 opencart 迁移到 magento

> ID：11725597
> 
> 赞同：7
> 
> 时间：2012-07-30T16:27:25.953
> 
> 标签：magento, opencart, data-migration, database-migration

我有一个基于 opencart 的购物车网站..

现在我想把它转换成一个magento网站..

我已经完成了全新的 magento 安装。现在我需要将数据从我的 opencart 数据库迁移到新的 magento 数据库

那么谁能给我表名并告诉我应该做些什么才能成功迁移？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T17:19:04.893

## 首先

评估您要导入 Magento 的内容。问题回答得越清楚，就越容易评估您的选择。

基本上，这些选项包括通过内置导入（**内置方式**）导入数据、通过自定义脚本导入数据（**脚本方式**）、通过普通 SQL 导入数据（**糟糕、糟糕的 SQL 方式**）和通过外部模块导入（**模块方式**）。

* * *

## 内置方式

首先，您可以通过后端导入 csv 数据，如果您可以将基于 opencart 的产品/客户以 CSV 格式导入，然后可以在后端重新导入 - 请参见[此处](http://www.magentocommerce.com/wiki/3_-_store_setup_and_management/import_export/export_tool)或[此处](http://www.siteground.com/tutorials/magento/import-products.htm)（仅产品）。

该解决方案取决于您如何从打开的购物车中导出数据，坦率地说，我不是专家。只要您可以导出到 XLS、CSV 或类似文件，您应该没问题。

## 脚本方式

如果你不能这样做，我建议使用 Magento 自己的模型编写一个导入脚本。一个非常基本的片段可以帮助您入门：

```
<?php
//place this file in the Magento root, e.g. ./import.php, "." being you Magento root
//load the magento app with the admin store 
require_once('app/Mage.php');
Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);

//data import, I assume you can write some sort of input for this $data like reading a zip file or some other format, i here, I assume, this $data array holds arrays of products ($new_product) containing information on a product from open cart
$data = ...

// loop over the data and create the Magento models, these can include products, customers, etc. - for simplicity this is done for products, but can be done for every other data object in magento
foreach ($data as $new_product) {
    //load an empty Magento product model
    $product = Mage::getModel('catalog/product');

    //set the attributes you want
    $product->setData('sku', $new_product['sku']);
    $product->setData('name', $new_product['name']);

    .
    .
    . 
    //save it
    try {
        $product->save();
    }
    catch(Exception $e) {
        Mage::logException($e);
        continue;
    }
} 
```

这是一个使用 的示例`Mage_Catalog_Model_Product`，其他数据类型可能是`Mage_Sales_Model_Order`订单或`Mage_Customer_Model_Customer`客户。我可以从内存中回忆一些 Magento 风格的数据对象实例化调用的代码：

*   `Mage_Catalog_Model_Product` 可以实例化为`Mage::getModel('catalog/product')`
*   `Mage_Catalog_Model_Category` 可以实例化为`Mage::getModel('catalog/category')`
*   `Mage_Customer_Model_Customer`可以实例化为`Mage::getModel('customer/customer')`
*   `Mage_Sales_Model_Order` 可以实例化为`Mage::getModel('sales/order')`

这些调用可以在相应的核心模块中查找——有时它们会因不同的 Magento 版本而异。

您可以通过查看`./app/code/core/Mage/`和浏览模块的`Model`文件夹来找到它们，您可以在基于文件夹的命名约定中找到上述类，例如`Mage_Catalog_Model_Product`映射到`./app/code/core/Mage/Catalog/Model/Product.php`.

一个模型通常有一个 init 方法调用`_construct`（它**不是**PHP 的`__construct`！），它定义了一个模型可以通过 via 实例化的字符串`Mage::getModel()`。

可以在[此处](http://www.fontis.com.au/blog/magento/creating-magento-products-script)找到有关导入产品的更完整说明。Magento 中数据对象的风格几乎总是保持不变。

这是一个比较冗长的选项，但您可以了解 Magento 的大量内部数据处理。此外，您不一定需要知道后台的数据表*。*

Magento 知识库中也有很多关于该主题的帮助。同样，如果您想学习 Magento，这是一个很好的开始方式。

## SQL方式

您还可以执行普通 SQL 来填充 Magento 的表。

不要那样做。您会发现自己为每个其他 Magento 版本编写 SQL，如果您通过脚本编写，请通过 Magento 提供的框架编写。

## 模块方式

过去我们使用一些模块来导入大量数据，因为我上面展示的脚本方法对于大量数据不是很有效。我不确定其中一些是否得到积极维护，但在[Magento Connect](http://www.magentocommerce.com/magento-connect/)中四处逛逛是个好主意。根据您使用的内容，这些模块可能对您不是免费的。

## 最后的想法。

我真的建议您构建一个自定义脚本，因为它是学习 Magento 的好方法。如果你不关心编程，你应该看看内置的导入器。

如果还有其他问题，请走开:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-07T23:13:21.237

请参阅我的教程，该教程解释了如何使用 magento 脚本导入产品和类别。

[http://www.pearlbells.co.uk/import-products-magento-script/](http://www.pearlbells.co.uk/import-products-magento-script/)

一步一步解释

1.  导入属性选项
2.  导入类别 magento
3.  读取 CSV 数据
4.  导入简单产品
5.  导入可配置产品
6.  导入产品图片
7.  添加相关产品
8.  进口等级价格

# html - 将 MVC 项目创建的页面转换为 HTML

> ID：11725603
> 
> 赞同：0
> 
> 时间：2012-07-30T16:27:44.823
> 
> 标签：html, asp.net-mvc, visual-studio

我有一个使用 Visual Stuido 创建网站的设计师。他说这对他来说更容易：模板和所有。

该项目的结果是 3 个简单的 HTML 页面，它们必须与它们的图像、脚本和样式表一起放在服务器上。

现在我必须获取每个页面，保存浏览器显示的源代码，保存所有资产（图像、JS 和 CSS）。然后，在将所有内容上传到服务器之前，我必须确保这些资产的链接是正确的。这是很多手工工作，出错的可能性很大。

我真的不想为此创建一个单独的应用程序实例。它是云中的另一个应用程序，仅针对 3 个 HTML 页面进行维护。

有没有一种简单的方法可以从 MVC 项目中呈现 HTML？

# intellij-idea - IntelliJ IDEA 和其他 Jetbrains IDE 中的“省电模式”是什么？

> ID：11725605
> 
> 赞同：184
> 
> 时间：2012-07-30T16:27:46.077
> 
> 标签：intellij-idea

我看到没有现成的谷歌搜索结果可以回答这个问题。它是什么，它的用途是什么？

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2012-07-30T16:29:34.323

这是一个设置，可阻止 IDE 在您键入时在后台自动执行所有耗电代码检查。

您应该会发现，打开 powersave 后，语法错误仍会突出显示，但不确定的代码结构（例如缺少文档块、条件语句中的赋值等）不会（假设您启用了这些检查）。这意味着您可以在使用笔记本电脑时节省电池电量，并选择仅偶尔运行检查，方法是关闭省电模式一两分钟，或`Code->Inspect code...`查看需要注意的事项。

看看`Settings->Inspections`你是否可以在没有特定检查的情况下生活，这取决于你使用的语言。`Code->Run inspection by name...`如果您喜欢使用需要的特定功能，您可以选择按需单独运行它们。更多信息[在这里](http://blog.jetbrains.com/ruby/2010/08/rubymine-2-5-eap-96-886-powersave-mode/)。

当然，这也适用于 RubyMine、PHPStorm、PyCharm、WebStorm 和 AppCode。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2015-05-21T21:44:34.177

IntelliJ 省电模式由![赫克托](../Images/722864b5ceddcb6c8c0ad9b615c0049f.png)底部状态栏上的 Hector 图标指示。如果 IntelliJ 在省电模式下运行，Hector 图标将变淡![赫克托关闭](../Images/87ef92f3e5d401fdb6c482f31f37b02b.png)。

在省电模式下，不执行代码检查。单击赫克托图标以切换省电模式。 [https://www.jetbrains.com/idea/help/status-bar.html](https://www.jetbrains.com/idea/help/status-bar.html)

# mysql - 在添加到数据库之前更改表单输入以添加标签

> ID：11725608
> 
> 赞同：-1
> 
> 时间：2012-07-30T16:27:56.047
> 
> 标签：mysql, html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:54:06.330

`website = "<a href=\"" . $_POST['website'] . "\">The Site</a>";`

应该为您工作或

`website = "<a href=\"" . $_POST['website'] . "\">" . $_POST['website'] . "</a>";`

如果您希望用户的输入同时作为文本和 href 部分。

# powershell - Powershell 调用命令删除项目远程服务器

> ID：11725610
> 
> 赞同：7
> 
> 时间：2012-07-30T16:28:03.273
> 
> 标签：powershell

我想删除远程服务器特定文件夹上的文件。我在 Powershell 中执行以下操作：

```
Invoke-Command -Computer 'compname1' -ScriptBlock {Remove-Item -$args -force } -ArgumentList 'c:\BizTalkDeployment' 
```

我收到以下错误：

```
Cannot find drive. A drive with the name '-c' does not exist. 
```

c:\BizTalkDeployment 是服务器 compname1 上的正确路径。

谁能解释我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T16:45:22.340

删除 $args 前面的 - 并重新运行脚本。您甚至可以尝试将脚本块更改为：

```
Remove-Item -Path $args[0] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T17:15:40.353

您还可以使用 UNC 路径删除该文件夹：

```
Remove-Item \\compname1\c$\BizTalkDeployment -force 
```

# asp.net-mvc-3 - 网络服务器上的 mvc3 错误，只能得到通用响应

> ID：11725611
> 
> 赞同：0
> 
> 时间：2012-07-30T16:28:03.567
> 
> 标签：asp.net-mvc-3, custom-error-pages

编辑：显示了我的确切 web.config 代码。

我有一个 MVC3 项目在我的盒子上运行良好，但是当我将它上传到 Web 服务器时，它会在某个页面上出现错误。我试图确定确切的错误，但它一直重定向到“错误/显示错误”操作。我尝试将 web.config 文件修改为 showcustomerrors=false，但它仍然会重定向。 **我真的需要查看实际错误才能解决问题。**

在firebug中，它显示该错误是500内部服务器错误。我无法得到比这更详细的了。

此外，如果我从本地机器运行页面，但使用远程数据库，我不会收到错误消息。这让我觉得它与目录权限有关。

这是我的 web.config 部分：

```
<compilation debug="true" targetFramework="4.0"> 
```

这是我的 web.debug.config 部分：

```
<customErrors  mode="Off"> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:35:36.823

在 web.config 中关闭`customErrors`，您将能够看到错误是什么。然后修复它。打开自定义错误

```
<customErrors defaultRedirect="Error.aspx" mode="Off"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:38:32.357

以下是自定义错误的选项：

```
<customErrors defaultRedirect="url"
          mode="On|Off|RemoteOnly">
      <error. . ./>
</customErrors> 
```

我认为您的问题是您使用的是“假”而不是“关闭”。

祝你好运，希望这对你有用。

参考：[CustomErrors 部分的 MSDN 链接](http://msdn.microsoft.com/en-us/library/h0hfz6fc.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:40:29.153

看看这些改变是否会有所帮助。

```
<configuration>
    <system.webServer>
        <httpErrors errorMode="Detailed" />
    </system.webServer>
    <system.web>
        <customErrors mode="Off"/>
        <compilation debug="true"/>
    </system.web>
</configuration> 
```

如果没有，请确保正确安装了 AspNet。 `C:\Windows\Microsoft.Net\Framework..\v.....\aspnet_regiis.exe -i`

编辑：您可以尝试在 Global.asax.cs 中使用以下方法记录异常消息

```
protected void Application_Error(object sender, EventArgs e) {
    var exception = Server.GetLastError();
    // Log the exception
} 
```

编辑：

好吧，这将是很多工作，但我建议您将 Elmah 添加到您的项目中以记录未处理的异常。[请参阅登录 MVC 第 1 部分 - Elmah](http://dotnetdarren.wordpress.com/2010/07/27/logging-on-mvc-part-1/)的第一步

Elmah 可在 NuGet 库上找到。

# oracle11g - PostgreSQL：CITEXT 类型的最大列长度是多少

> ID：11725612
> 
> 赞同：4
> 
> 时间：2012-07-30T16:28:04.133
> 
> 标签：oracle11g, postgresql-9.1

我正在将我的 PostgreSQL9.1 模式迁移到 Oracle11g。我在网上找不到 CITEXT 类型列的最大列长度是多少。使用 VARCHAR2 类型时，我应该为 Oracle 设置什么大小。

**注意：**我知道 CITEXT 提供不区分大小写的比较，但是，我对此并不关心。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T18:18:01.503

根据[citext](http://www.postgresql.org/docs/current/interactive/citext.html)文档`citext`，它只是一个不区分大小写的`text`. `text`本身的长度是无限的（嗯，实际上是 1G）。因此，您不能假设任何有意义的上限。您必须向应用程序开发人员询问每列的实际限制。

# ldap - 将 WSO2 身份服务器与 OpenLDAP 一起使用

> ID：11725614
> 
> 赞同：0
> 
> 时间：2012-07-30T16:28:07.957
> 
> 标签：ldap, wso2, openldap, wso2is

在按照以下步骤尝试将 WSO2 Identity Server 与 OpenLDAP 一起使用时： [http ://wso2.org/project/solutions/identity/3.2.3/docs/user-core/admin_guide.html#LDAP](http://wso2.org/project/solutions/identity/3.2.3/docs/user-core/admin_guide.html#LDAP)

我在尝试进行身份验证时收到此消息：

```
TID: [0] [WSO2 Identity Server] [2012-07-30 13:30:34,088]  WARN {org.wso2.carbon.core.services.authentication.AuthenticationAdmin} -  None active tenant trying to sign in.example.com {org.wso2.carbon.core.services.authentication.AuthenticationAdmin}
TID: [0] [WSO2 Identity Server] [2012-07-30 13:30:34,088] ERROR {org.wso2.carbon.core.services.authentication.AuthenticationAdmin} -  Your account is not active. Please activate your account first. {org.wso2.carbon.core.services.authentication.AuthenticationAdmin}
org.wso2.carbon.core.common.AuthenticationException: Your account is not active. Please activate your account first.
    at org.wso2.carbon.core.services.authentication.AuthenticationAdmin.login(AuthenticationAdmin.java:79)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:212)
    at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:117)
    at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
    at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
    at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
    at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
    at org.wso2.carbon.core.transports.CarbonServlet.doPost(CarbonServlet.java:199)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154)
    at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
    at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
TID: [] [WSO2 Identity Server] [2012-07-30 13:30:34,100] ERROR {org.wso2.carbon.authenticator.proxy.AuthenticationAdminClient} -  Error occurred while logging in {org.wso2.carbon.authenticator.proxy.AuthenticationAdminClient}
org.apache.axis2.AxisFault: Your account is not active. Please activate your account first.
    at org.apache.axis2.util.Utils.getInboundFaultFromMessageContext(Utils.java:531)
    at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:375)
    at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)
    at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
    at org.wso2.carbon.authenticator.stub.AuthenticationAdminStub.login(AuthenticationAdminStub.java:659)
    at org.wso2.carbon.authenticator.proxy.AuthenticationAdminClient.login(AuthenticationAdminClient.java:64)
    at org.wso2.carbon.ui.DefaultCarbonAuthenticator.authenticate(DefaultCarbonAuthenticator.java:142)
    at org.wso2.carbon.ui.DefaultCarbonAuthenticator.authenticate(DefaultCarbonAuthenticator.java:85)
    at org.wso2.carbon.ui.CarbonSecuredHttpContext.handleSecurity(CarbonSecuredHttpContext.java:387)
    at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:86)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154)
    at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
    at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
TID: [] [WSO2 Identity Server] [2012-07-30 13:30:34,105] ERROR {org.wso2.carbon.ui.CarbonSecuredHttpContext} -  error occurred while login {org.wso2.carbon.ui.CarbonSecuredHttpContext}
org.wso2.carbon.core.common.AuthenticationException: Exception occured
    at org.wso2.carbon.ui.DefaultCarbonAuthenticator.authenticate(DefaultCarbonAuthenticator.java:87)
    at org.wso2.carbon.ui.CarbonSecuredHttpContext.handleSecurity(CarbonSecuredHttpContext.java:387)
    at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:86)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154)
    at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
    at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.axis2.AxisFault: Exception occured
    at org.wso2.carbon.ui.DefaultCarbonAuthenticator.authenticate(DefaultCarbonAuthenticator.java:150)
    at org.wso2.carbon.ui.DefaultCarbonAuthenticator.authenticate(DefaultCarbonAuthenticator.java:85)
    ... 25 more
Caused by: org.wso2.carbon.core.common.AuthenticationException: org.apache.axis2.AxisFault: Your account is not active. Please activate your account first.
    at org.wso2.carbon.authenticator.proxy.AuthenticationAdminClient.login(AuthenticationAdminClient.java:70)
    at org.wso2.carbon.ui.DefaultCarbonAuthenticator.authenticate(DefaultCarbonAuthenticator.java:142)
    ... 26 more
Caused by: org.apache.axis2.AxisFault: Your account is not active. Please activate your account first.
    at org.apache.axis2.util.Utils.getInboundFaultFromMessageContext(Utils.java:531)
    at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:375)
    at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)
    at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
    at org.wso2.carbon.authenticator.stub.AuthenticationAdminStub.login(AuthenticationAdminStub.java:659)
    at org.wso2.carbon.authenticator.proxy.AuthenticationAdminClient.login(AuthenticationAdminClient.java:64)
    ... 27 more 
```

我的 user-mgt.xml 是：

```
<UserManager>
    <Realm>
        <Configuration>
                <AdminRole>admin</AdminRole>
                <AdminUser>
                     <UserName>admin@example.com</UserName>
                     <Password>admin</Password>
                </AdminUser>
            <EveryOneRoleName>everyone</EveryOneRoleName> <!-- By default users in this role sees the registry root -->
            <ReadOnly>true</ReadOnly>
            <MaxUserNameListLength>500</MaxUserNameListLength>
            <Property name="url">jdbc:h2:repository/database/WSO2CARBON_DB</Property>
            <Property name="userName">wso2carbon</Property>
            <Property name="password">wso2carbon</Property>
            <Property name="driverName">org.h2.Driver</Property>
            <Property name="maxActive">50</Property>
            <Property name="maxWait">60000</Property>
            <Property name="minIdle">5</Property>
    </Configuration>
    <UserStoreManager class="org.wso2.carbon.user.core.ldap.LDAPUserStoreManager">
            <Property name="ReadOnly">true</Property>
            <Property name="MaxUserNameListLength">100</Property>
            <Property name="ConnectionURL">ldap://192.168.81.128:389</Property>
            <Property name="ConnectionName">uid=admin@example.com,ou=users,dc=maxcrc,dc=com</Property>
            <Property name="ConnectionPassword">admin</Property>
            <Property name="UserSearchBase">ou=users,dc=maxcrc,dc=com</Property>
            <Property name="UserNameListFilter">(objectClass=person)</Property>
            <Property name="UserNameAttribute">uid</Property>
            <Property name="ReadLDAPGroups">false</Property>
            <Property name="GroupSearchBase">ou=system,dc=maxcrc,dc=com</Property>
            <Property name="GroupSearchFilter">(objectClass=groupOfNames)</Property>
            <Property name="GroupNameAttribute">cn</Property>
            <Property name="MembershipAttribute">member</Property>
    </UserStoreManager>
    <AuthorizationManager class="org.wso2.carbon.user.core.authorization.JDBCAuthorizationManager"></AuthorizationManager>
    </Realm>
</UserManager> 
```

您能否就错误可能在哪里提出任何建议？

我的 OpenLDAP 安装中唯一的用户是 admin@example.com，密码为 admin

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:25:59.543

由于您尝试以只读模式连接到 OpenLDAP，因此请使用 LDAPUserStoreManager 而不是 ApacheDSUserStoreManager。当您进行配置时，不要注释掉或删除配置元素，因为这会导致 NULL POINTER EXCEPTIONS。

# c# - 为什么 Process.WaitForExit 会阻塞，即使我将它放在单独的线程中？

> ID：11725618
> 
> 赞同：2
> 
> 时间：2012-07-30T16:28:16.547
> 
> 标签：c#, winforms, multithreading, process

C# 3.5 Winforms 应用程序。

我有一个计时器，它在单独的线程上每 30 秒触发一次（它所做的只是将一串文本写入 VS 输出窗口）。

我还有另一个线程等待某个进程在启动时结束。例如 winword.exe。

在那个线程中我有这个代码：

```
p.WaitForExit(); 
```

它会坐在那里等待`winword.exe`退出。这很好用。

然而，当它坐在那里等待`winword.exe`退出时，一个完全独立的线程（将文本发送到输出窗口）上的 30 秒计时器永远不会运行。

如果我等待 3 分钟（所以此时另一个计时器应该运行 6 次，但在等待时它不会`WaitForExit()`），然后我退出`winword.exe`；突然间，我的另一个计时器开始一次运行 6 次。就像有一个计时器事件的积压，突然.Net想要同时运行它。

`p.WaitForExit()`即使我从应用程序中的单独线程（不是主 UI 线程）执行它，为什么似乎会阻止我的整个应用程序？

编辑：是的，它在一个单独的线程中。这是我用来启动它的代码：

```
 try
        {
            Thread t = new Thread(ProcessCheck); // Kick off a new thread
            t.Start();

            ConfigLogger.Instance.LogInfo("++ ProcessCheck thread started @ " + DateTime.Now);
        }
        catch (Exception ipwse)
        {
            ConfigLogger.Instance.LogInfo(ipwse.Message + " " + ipwse.StackTrace);
        } 
```

这是我拥有的 ProcessCheck() 方法：

```
foreach (Process p in System.Diagnostics.Process.GetProcessesByName("winword"))
{
    this.Invoke(new MethodInvoker(delegate()
    {                                                                                 
        try
        {
            p.WaitForExit();
        }
        catch (Exception)
        {

        }
    }));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T16:51:16.973

`this.Invoke`，如果从 WinForms 表单完成，将阻塞 UI 线程，直到进程退出。如果 Timer 是 System.Windows.Forms.Timer，则在 UI 线程上引发 Tick 事件。如果 UI 线程被阻塞，这将解释为什么 Tick 事件永远不会引发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:45:45.517

我不确定，因为以下程序表明只要您正确执行线程，您正在做的事情就可以工作。

```
static void Main(string[] args)
{
    BackgroundWorker shortThread = new BackgroundWorker(), waitThread = new BackgroundWorker();

    shortThread.WorkerSupportsCancellation = true;
    shortThread.DoWork += (s, e) =>
        {
            while (true)
            {
                if (shortThread.CancellationPending)
                {
                    break;
                }

                Console.WriteLine("Hello World...");
                Thread.Sleep(2000);
            }
        };

    waitThread.WorkerSupportsCancellation = true;
    waitThread.DoWork += (s, e) => { Process.Start("winword.exe").WaitForExit(); };

    shortThread.RunWorkerAsync();
    waitThread.RunWorkerAsync();

    Console.ReadLine();

    shortThread.CancelAsync();
    waitThread.CancelAsync();
} 
```

因此，在我看来，您是`WaitForExit()`在主线程而不是单独的线程上发出。

# c# - 已经执行的事件何时处理？

> ID：11725622
> 
> 赞同：0
> 
> 时间：2012-07-30T16:28:27.227
> 
> 标签：c#, .net, multithreading

为了设置舞台，我有一个名为的自定义类`Scheduler`，它包含多个`Task`对象（这也是一个自定义类）。每个任务都有一个`BackgroundWorker`对象来运行长时间运行的工作。我目前正在做一些测试，让这些任务中的许多任务快速执行并同时被处理。

在我的`Task`对象中，我在处理程序中引发了一个自定义事件 ( `TaskCompletedEvent`)，`TaskWorkerCompleted`以提醒调度程序任务已完成。调度程序对每个任务的`TaskCompletedEvent`.

我想知道的是，如果我当前在`Scheduler` `TaskCompletedEvent`处理程序中执行代码并且另一个事件结束，会发生什么？两者都将在 UI 线程上，那么当前事件处理程序中的一个是否在另一个继续之前完成？当两个事件同时完成并需要处理时，我对会发生什么感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:33:27.853

不，事件本身不知道 UI 线程。因此，事件将在触发它们的同一线程中调度（这很可能在后台工作线程中，对吗？）

如果您的两个事件都在 UI 线程中触发，则这不能同时发生（毕竟，UI 线程正在执行一个或另一个事件触发代码），因此第二个事件可能会在第一个事件完成时触发发射和调度。

如果您想将`Scheduler`事件编组到 UI 线程，那是一个稍微不同的故事。您需要在 UI 线程上执行的代码实际上将被发布到该线程的一种事件队列中，并且无论哪个事件触发代码恰好是第一个，都会首先执行。

# ruby-on-rails - Hirb - “Too many fields..” 仅在从 irbrc 加载时（不是直接在控制台中）

> ID：11725624
> 
> 赞同：5
> 
> 时间：2012-07-30T16:28:30.933
> 
> 标签：ruby-on-rails, ruby, hirb

我正在尝试在我的控制台中设置 Hirb。

当我输入：

```
require 'hirb'
Hirb.enable 
```

我的（相当大的）表打印得很好（缩短了列名）。但是，我想在加载时自动加载这个（和其他宝石）`rails c`，所以我编辑了我的`.irbc`

```
 if Rails.env
    require 'rubygems'
    require 'hirb'
    Hirb.enable

    require 'wirble'
    Wirble.init
    Wirble.colorize

    require 'awesome_print'
  end 
```

从控制台（Account.all）运行相同的命令时，我得到错误：

```
Too many fields for the current width. Configure your width and/or fields to avoid this error. Defaulting to a vertical table 
```

任何想法为什么？我真的很喜欢 Hirb，但是每次加载控制台时都懒得手动包含它

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T09:06:50.213

我设法解决了这个问题。当我跑的时候结果是：

```
Hirb::View.width 
```

在控制台中（从 加载 Hirb 之后`.irbrc`），我看到它比预期的要小 - 所以看起来 Hirb 似乎没有正确检测到我的控制台大小。

我更改了我的`.irbrc`文件以显式传递这些值：

```
require 'hirb'
Hirb.enable({:width => 155, :height => 500}) 
```

一切都按预期工作

# java - Swing 覆盖对象的paintComponent

> ID：11725625
> 
> 赞同：4
> 
> 时间：2012-07-30T16:28:32.477
> 
> 标签：java, swing, paintcomponent

如果我有一个`JPanel`无法修改的对象，有没有办法可以在`paintComponent`不使用注入的情况下修改它的方法？

我正在考虑的一种方法是获取`JPanel`'`Graphics`对象，将其传递给`paintComponent()`，对此对象执行操作`Graphics`，最后在我的自定义中绘制它`JPanel`。`JPanel`问题在于，每次调用 original 时我都需要能够做到这一点`paintComponent()`。

我不需要替换paintComponent() 中的内容，我只需要添加它。

例如：

```
JFrame frame = null;
for (Frame f : JFrame.getFrames()) {
  if (((JFrame) f).getTitle().equals("Title")) {
    JPanel panel = null;
    // ... Cycle through all components and get the one that's a JPanel

    // I want to use ColorConvertOp to make panel greyscale
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T17:46:58.787

一种方法是使用[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)来包装现有的类。然后，您的装饰器可以实现 paintComponent 以首先委托给原始组件，然后在其上绘制。对于这种方法，您需要实际控制组件的创建，或者您需要在创建组件层次结构后替换它们（使用父容器的 getComponents() 查找要更改的组件）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T17:24:04.927

我认为一种可能性是使用 a[`GlassPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)并将其准确定位在您的上方`JPanel`（如果面板更改其位置，则可以使用侦听器让它跟随面板）。然后你可以简单地在玻璃板上画你的东西，它就会被覆盖。

当然这不是很优雅......但我看不出有任何可能在`paintComponents`不注入的情况下改变已经存在的实例的行为。（证明我错了，这个世界的 Java 极客！：P）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-30T19:20:30.577

我想这将完成@Durandal 的回答：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.GridBagLayout;
import java.awt.color.ColorSpace;
import java.awt.image.BufferedImage;
import java.awt.image.ColorConvertOp;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TestPanels {

    private static final boolean GRAY_SCALE = true;

    protected void initUI() {
        final JFrame frame = new JFrame(TestPanels.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel unmodifiablePanel = new JPanel(new GridBagLayout());
        JLabel label = new JLabel("Some unmodifiable test label");
        unmodifiablePanel.add(label);
        unmodifiablePanel.setBackground(Color.GREEN);
        JPanel wrappingPanel = new JPanel(new BorderLayout()) {
            private ColorConvertOp op = new ColorConvertOp(ColorSpace.getInstance(ColorSpace.CS_GRAY), null);
            private BufferedImage image;

            @Override
            public void paint(Graphics g) {
                if (!GRAY_SCALE) {
                    super.paint(g);
                    return;
                }
                BufferedImage bi = getImage();
                if (bi != null) {
                    Graphics big = bi.createGraphics();
                    super.paint(big);
                    big.dispose();
                    bi = op.filter(bi, null);
                    g.drawImage(bi, 0, 0, null);
                }
            }

            protected BufferedImage getImage() {
                if (image == null) {
                    if (getWidth() > 0 && getHeight() > 0) {
                        image = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_RGB);
                    }
                } else if (image.getWidth() != getWidth() || image.getHeight() != image.getHeight()) {
                    image = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_RGB);
                }
                return image;
            }

        };
        wrappingPanel.add(unmodifiablePanel);

        frame.add(wrappingPanel);
        frame.setSize(200, 200);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestPanels().initUI();
            }
        });
    }
} 
```

您可以将 GRAY_SCALE 标志设置为 false，以查看它如何正常呈现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T17:14:34.113

如果你有能力修改你的类的构造，你可以扩展那个类，然后调用`super.paintComponent(g)`你的扩展类。例子：

```
public class NewPanel extends OldPanel{

    public void paintComponent(Graphics g){
        super.paintComponent(g);
        // Insert additional painting here
    }
} 
```

在这种情况下，您将需要一个新类来构建现有类的绘画。

它的作用是执行在父类的绘画中所做的一切，并为您提供更多选择（这似乎是您正在寻找的）。

**编辑**
但...鉴于您无权访问此内容，您的选择会受到更多限制。如果面板使用空布局管理器，您可以添加一个在父级上绘制的子 jpanel（布局管理器会限制子级可以绘制的区域数量）。这是一个长镜头。

您也可以使用反射来处理您拥有的唯一选项（除了字节码注入）。这似乎与字节码注入一样丑陋 - 这是您想要做的事情的一个不错的概述： [Java反射：如何在运行时覆盖或生成方法？](https://stackoverflow.com/questions/1054777/java-reflection-how-do-i-override-or-generate-methods-at-runtime)

我个人的偏好是反编译类，按照你想要的方式修改它，重新编译它并插入回原来的jar中。这可能会使一些警告、许可证无效并给您带来其他麻烦……但至少它是可维护的。

# jquery - jQuery draggable + droppable - 将拖动的项目物理移动到放置的容器中

> ID：11725629
> 
> 赞同：8
> 
> 时间：2012-07-30T16:28:44.500
> 
> 标签：jquery, jquery-ui

我需要能够获取一个设置为可拖动的元素并将该元素物理移动到容器中，而不是像当前功能那样仅仅覆盖它。

例如：

```
 <div class="container"></div>
 <div class="image">
    <img class="thumb" src="images/Koala.jpg" alt="" />
 </div>

 $(function () {
    $(".image").draggable();
    $(".container").droppable({
        drop: function (event, ui) {
            alert('dropped!');
        }
    });
 }); 
```

因此，在图像被拖放到“容器”div 之后，我需要将实际的 html 元素移到那里。

因此，在事件发生后，如果我使用 Chrome 的开发工具查看源代码，我会看到：

```
 <div class="container">
    <div class="image">
        <img class="thumb" src="images/Koala.jpg" alt="" />
    </div>
 </div> 
```

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T16:57:08.147

这应该将拖动的元素移动到 dom 树中的 droppable。

```
drop: function (event, ui) {
    $(this).append(ui.draggable);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T16:56:59.457

在drop函数`$(this)`中，droppable是否接受draggable，所以只需使用`.append()`将draggable添加到droppable：http: [//jsfiddle.net/saluce/P6TjC/](http://jsfiddle.net/saluce/P6TjC/)

```
$(function () {
    $(".image").draggable({helper: 'original'});
    $(".container").droppable({
        drop: function (event, ui) {
            $(this).append(ui.draggable.css({position: 'static'}));
            alert('dropped!');
        }
    });
 });​ 
```

# javascript - 如何使 div 水平滑入？

> ID：11725631
> 
> 赞同：3
> 
> 时间：2012-07-30T16:28:54.120
> 
> 标签：javascript, jquery, animation, hover, effects

我目前有一个 div 出现在悬停上，但它只是弹出而不是滑入：

```
#home-heroImage{
  padding: 0px;
  margin: 0px auto;
  width:980px;
  height: 525px;
  position: relative;
  z-index: 1;
  background-color: #fcba2e;
}

#home-hero-pop{
  background-color: #ffffff;
  opacity:0.8;
  -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";
  filter: alpha(opacity=80);
  font: 16px Helvetica,Arial,sans-serif;
  font-weight: bold;
  color: #6d6e70;
  text-align: left;
  padding: 10px;
  position: absolute;
  right: 0px;
  top: 0px;
  height: 505px;
  width: 460px;
  z-index: 2;
} 
```

[小提琴](http://jsfiddle.net/Adk8r/4/)。

在浏览了 SO 上的帖子后，我发现了这个示例，如果我可以让它从右侧而不是底部滑入，这将起作用。我对 JavaScript 或 jQuery 了解不多，因此我尝试对此代码进行的修改并没有产生预期的效果：

```
$(document).ready(function(){
    $('.up-down').mouseover(function(){
        $('.default').stop().animate({
            height: 0    
        }, 200);                        
    }).mouseout(function(){
        $('.default').stop().animate({
            height: 200 
        }, 200)    
    })

}); 
```

[小提琴](http://jsfiddle.net/jPneT/1/)。

我已经尝试在线阅读几篇 JavaScript 文章，但现在它们已经超出了我的想象。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T16:35:44.913

根据您提供的示例，它是从右侧滑入的……这是您所追求的吗？[http://jsfiddle.net/jPneT/208/](http://jsfiddle.net/jPneT/208/)

**编辑 2017**

> 太多的 jQuery

你是对的，这是一个 CSS 替代品

```
.left-right {
    overflow:hidden;
    height:200px;
    width:200px;
    position:relative;
    background-color:#333;
}
.slider {
    width:200px;
    height:200px;
    position:absolute;
    top:0;
    right:-200px;
    background-color:#000;
    color:#fff;
    transition:0.4s ease;
}

.left-right:hover .slider {
  right:0;
}
```

```
<div class="left-right">
  <div class="slider">Welcome !</div>
</div>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T16:48:21.233

我的回答**不使用 JavaScript**。CSS 可以自动为您处理这个问题。

这是一个指向您的代码分支的链接作为一个工作示例：http: [//jsfiddle.net/g105b/Adk8r/11/](http://jsfiddle.net/g105b/Adk8r/11/)

您的示例只有一点点变化。不是隐藏元素并使用属性显示它，而是使用（其中 480 是累积宽度）`display`将元素放置在屏幕外，并在鼠标悬停时将其移动到。`right: -480px``right: 0`

使用 CSS 过渡提供动画，现在支持非常好：http: [//www.caniuse.com/#search=transition](http://www.caniuse.com/#search=transition)

此技术允许**所有浏览器返回 IE6**查看和使用您的网站，但使用旧浏览器的用户不会获得增强的体验。除非您**需要**动画 - 例如，它是动画的一项功能 - 我建议使用 CSS 过渡来确保您的网站不会过时并使用网络标准。

*弃用浏览器的用户应该得到弃用的体验。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T16:36:30.970

小提琴：http: [//jsfiddle.net/BramVanroy/Adk8r/10/](http://jsfiddle.net/BramVanroy/Adk8r/10/)

如前所述：请学会编写合乎逻辑且正确的 HTML。您的标记**无效**且**不合逻辑**。你应该完善你的 HTML 和 CSS，*然后*学习 JavaScript 和 jQuery，而不是试图一次掌握所有东西。这段代码让人眼花缭乱。

出了什么问题：

*   尽量避免使用大量的内联样式和 JavaScript。
*   您使用一个可以使用标题标签 ( `<h1>Welcome</h1>`) 并通过 CSS 设置样式的跨度。
*   `<br />`您在使用段落的地方使用换行符：

    `<p>This div appears on hover but I would like to slide in from the right instead of just appearing.</p>`

*   您的代码中没有结构。这不是创建一个工作网站所必需的，但是给子元素两个或四个空格的缩进是一个很好的做法。这样，您自己就很清楚哪个元素是哪个子元素或父元素。您的 CSS 规则也是如此：最好先放置选择器，然后放置规则（缩进），如下所示：

    ```
    h1 {
        font-weight: bold;
        font-size: 160%;
    } 
    ```

*   你有一个结束`</a>`标签，但没有开始`<a>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T16:42:07.247

使用 css3 有一个非常简单的方法。而不是经历 javascript 的麻烦尝试在 CSS 中使用类似的东西：

```
div.move {
  height: 200px;
  width: 200px;
  background:#0000FF;
  color:#FFFFFF;
  padding:10px;
}

/*on mouse hover*/
div.move:hover {
  /*General*/
  transform:translate(200px,100px);
  /*Firefox*/
  -moz-transform:translate(200px,200px);
  /*Microsoft Internet Explorer*/
  -ms-transform:translate(200px,100px);
  /*Chrome, Safari*/
  -webkit-transform:translate(200px,100px);
  /*Opera*/
  -o-transform:translate(200px,100px);
} 
```

在 HTML 中：

```
<div class="move">Anything is here moves!</div> 
```

平移也适用于 x/y 轴。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T16:48:08.190

这很简单。您只需要 HTML、CSS 和 jQuery。

1.  做一个坚实的div。
2.  使父 div 隐藏`overflow:hidden`CSS 中的溢出（）。
3.  分配一个`margin-left`100%（或某个长度）的 div，由于边距而隐藏了所需的 div。
4.  执行 jquery`animate()`函数以降低`margin-left`到 0 或 0%。
5.  您还可以通过以毫秒（毫秒）为单位给出时间或一些表达式来设置动画的`slow`速度`fast`

# android - Android应用程序中的进度条闪烁

> ID：11725632
> 
> 赞同：0
> 
> 时间：2012-07-30T16:28:59.807
> 
> 标签：android, multithreading, progress-bar, progress, seekbar

我正在尝试制作流媒体音乐播放器，但在尝试实现的 SeekBar 时遇到了一些问题。目前，它在播放的第一首歌曲上正确运行。我可以正确搜索，它会在另一个线程中自我更新。我遇到的问题是，当一首新歌开始时，SeekBar 从最后一首歌曲的持续时间闪烁到当前歌曲的当前进度。任何帮助，将不胜感激。

SeekBar 声明

```
 progress = (SeekBar) findViewById(R.id.seekBar1);
    progress.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            if(fromUser) {
                media.seekTo(progress);
            }
            else {                  
            }               
        }

        public void onStartTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

    }); 
```

SeekBar 在单独的线程中更新

```
int current = 0;
    int total = media.getDuration();
    progress.setMax(total);
    progress.setIndeterminate(false);

    while(media!=null && current < total){
        try {
            Thread.sleep(1000); 
            current = media.getCurrentPosition();
            progress.setProgress(current);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:55:50.247

您不应该`View`直接从单独的`Thread`. 使用`View.post`或`runOnUiThread`来更新`View`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:53:06.167

您开始进行进度更新的线程似乎永远不会终止，这意味着即使在歌曲结束后它也会每秒更新一次进度。

`current < total`很可能是这里的罪魁祸首。据我记得，当前位置不会（或至少不能保证）一直计数到总长度，因此您的循环永远不会终止，您应该向您添加一个[OnCompletionListener](https://developer.android.com/reference/android/media/MediaPlayer.OnCompletionListener.html)`MediaPlayer`以便在歌曲结束时获得可靠的通知.

# c# - 数据表作为 ReportViewer 中的数据源

> ID：11725634
> 
> 赞同：1
> 
> 时间：2012-07-30T16:29:03.973
> 
> 标签：c#, .net, datatable, reportviewer

我希望reportviewer 控件中的表格组件用数据表中的数据填充。换句话说，我想使用数据表作为reportviewer 控件的源。我尝试创建数据集，添加了数据表，其中包含我的数据表在编程填写后将具有的确切列。然后我使用了以下代码：

```
 DataTable dt = new DataTable();
 dt.TableName = "DataTable1";
 conn.Open();
 adapter.Fill(dt);
 ReportViewer1.ProcessingMode=ProcessingMode.Local;
 ReportDataSource source = new ReportDataSource("SampleDs", dt);
 ReportViewer1.LocalReport.DataSources.Clear();
 ReportViewer1.LocalReport.DataSources.Add(source);
 ReportViewer1.DataBind();
 ReportViewer1.LocalReport.Refresh(); 
```

但是，这是行不通的。我得到的唯一消息是：

> 报告处理过程中发生错误。样品 D。

谁能告诉我如何解决问题或指出创建此类报告的完整过程的参考文献，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:39:05.440

您为[ReportDataSource](http://msdn.microsoft.com/en-us/library/ms251736.aspx)对象的构造函数使用的重载需要在第一个参数中使用数据源的名称。你没有提供这个，你需要 DataTable 名称。

将您的代码更新为此，您应该可以：

```
ReportDataSource source = new ReportDataSource("DataTable1", dt); 
```

# objective-c - 更改 self.view 的类类型

> ID：11725640
> 
> 赞同：0
> 
> 时间：2012-07-30T16:29:29.603
> 
> 标签：objective-c, ios, uiscrollview

我现在有一个几乎完全完成的应用程序进行测试 - 只剩下一些错误修复。不幸的是，客户决定他们希望应用程序的整个主页都位于滚动视图内（以便底部的表格有更多空间）。我已经设置了所有内容，我真的不想移动所有内容并更改引用。有没有一种简单的方法可以将主视图的类更改为滚动视图？我已经尝试在 IB 中更改类并在`init`方法中设置类类型。如果没有，我可能会将视图的顶部放入一个 nib 文件并将其作为自定义单元格加载。

**-编辑-**我最终改变了 IB 中的类类型，然后做

```
[(UIScrollView *) self.view setScrollEnabled:YES];
[(UIScrollView *) self.view setContentSize:CGSizeMake(0,2000)]; 
```

在`viewDidLoad`. 感谢您的帮助，希望我能接受您所有的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:35:24.007

当您提到 时`[self view]`，我将假设您的意思是在视图控制器中。视图控制器的视图可以是派生自 UIView 的任何视图。因此，滚动视图是完全可以接受的。

```
I don't really want to move everything and change references. 
```

你要搬什么？为什么你必须改变参考？您唯一需要做的就是向您的视图控制器添加一个滚动视图，将视图控制器视图设置为它，并将当前视图作为子视图添加到新的滚动视图中。无需更改任何引用，无需移动任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:07:07.923

请参阅视图控制器文档中的[loadView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)方法。

这是一个简单的（未经测试！）示例

```
- (void)loadView {
   UIScrollView *scrollView = [[UIScrollView alloc] init] autorelease];

   //Set the properties of scrollview appropriately....

   self.view = scrollView;
 } 
```

现在您的视图控制器的根视图将是一个滚动视图。

*注意* - 如文档所述，如果您使用界面构建器来初始化您的视图/视图控制器，请不要这样做。从你的描述中我无法判断是否是这种情况。如果是，您应该能够在界面生成器中更改视图类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T17:19:39.673

您需要设置滚动视图的`contentSize`属性。

由于您使用的是 IB，因此最简单的方法是将所有 UI 元素放入一个视图中，然后将此单个视图添加到您的滚动视图中。在该`viewDidLoad`方法中，将滚动视图的内容大小设置为与包含所有 UI 的视图大小相同。

顺便说一句，有比沿着视图层次结构更简单的方法来引用视图，就像您似乎正在做的那样。`viewcontroller.view.something.tableview`. 从 IB 中的视图控制器添加与表视图的连接，该表视图在视图层次结构中的位置无关紧要。`viewcontroller.tableview`无论您如何重新排列您的笔尖，您都可以从.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-25T08:46:46.110

我认为你必须使用正确类型的指针。Google 地图的示例：假设您将基本视图的类更改为`GMSMapView`.

**MapViewController.h**

```
@property GMSMapView *mapView; 
```

**MapViewController.m**

```
-(void)awakeFromNib{
    [super awakeFromNib];
    self.mapView = (GMSMapView*)self.view;
    // ... etc.
} 
```

# python - 用python生成pdf

> ID：11725645
> 
> 赞同：6
> 
> 时间：2012-07-30T16:29:35.163
> 
> 标签：python, pdf, latex

我正在尝试开发一个小脚本来生成一个完整的新pdf，主要是文本和表格，作为结果文件。我正在寻找最好的方法来做到这一点。

我读过reportlab，这似乎很不错。据我所知，它只有一个缺点。没有商业版的模板很难写，而且代码似乎很难维护。

所以我搜索了一个更充分的方法，找到了xhtml2pdf，但是这个软件很老，不能生成超过两页或更多的表格。

我想到的最后一个解决方案是使用模板框架生成一个 tex-File，然后将 pdftex 作为子进程调用。

我会实现最后一个，然后看看 LateX。你会这样做吗，你有更好的想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T16:31:40.303

我建议使用 LaTeX 方法。它是跨平台的，支持多种不同的语言并且易于维护。另外，它是非商业的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T16:33:01.457

[Pisa](http://xhtml2pdf.appspot.com/static/pisa-en.html)是一个 Html/CSS 到 PDF 的转换器。它是使用 python 从头开始​​开发 Pdf 的好工具。

如果您只需要将 Pdf 页面附加在一起，或者通过 Pdf 数据进行搜索，那么我建议[您使用 pyPdf](http://pybrary.net/pyPdf/)，它是免费的，并且有很好的文档记录且易于使用。你可以[在这里下载](http://pybrary.net/pyPdf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:34:55.133

您可以查看[http://pypi.python.org/pypi/z3c.rml/](http://pypi.python.org/pypi/z3c.rml/)包作为 Reportlab 的 RML 的实现。

“最好的方式”是什么意思？你有什么要求？一些 PDF 要求可以通过“便宜”的开源生成器来完成，或者您最终可能会使用一些商业 PDF 转换器。更高的质量意味着更高的价格。

# .net - 将 https 动态添加到 url

> ID：11725649
> 
> 赞同：-1
> 
> 时间：2012-07-30T16:29:48.263
> 
> 标签：.net, c#-4.0, https, ssl-certificate

我想动态地将 https 设置为我的网址。我只想在我的登录名和购物篮 aspx 文件上使用 https。这是我的代码：

在 html 文件中：

```
 <span runat="server" id="spnGiris"><a href="<%#GetDomain(true)%>/Login.aspx">Personel
                Girişi&nbsp;&nbsp;</a></span>
<a href="<%#GetDomain(false)%>/Default.aspx?q=e">Çıkış</a></span> 
```

在服务器端：

```
 public string GetDomain(bool https)
    {
        string protocol = https ? "https" : "http";
        string s = Request.Url.Host.ToLower();
        if (s.Equals("localhost"))
            return protocol + "://localhost:14553";
        return protocol + "://" + ConfigurationManager.AppSettings["domainName"];
    } 
```

我在 GetDomain 上设置了断点，并且 https 在 login.aspx 中始终为假。但在篮子.aspx 中一切正常。你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:09:08.717

我用 <%=GetDomain(true)%> 更改了 <%#GetDomain(true)%> 并解决了。

# emacs - emacs shift 箭头选择仅选择第一个字符/行

> ID：11725652
> 
> 赞同：1
> 
> 时间：2012-07-30T16:29:56.830
> 
> 标签：emacs, elisp

这个问题与我之前的问题有关：[emacs 中的Shift arrow selection](https://stackoverflow.com/q/11721224/658346)
已解决，但仅部分解决。
现在我有另一个问题：
当我按下 shift-right 2 次时 - 只有最后一个选择会出现。所以。它没有被扩展（因为它应该根据我的成就）但总是被覆盖......

fe 我只有 1 个单词“窗口”。我的光标在位置 0。我只想复制“wi”。我按了 2 次右移。但只选择了“i”。
我该如何解决这个问题？

```
den@playground:~/.emacs.den$ cat -v
^[[1;2C^[[1;2C

M-x version
GNU Emacs 23.2.1 (i486-pc-linux-gnu, GTK+ Version 2.20.0) of 2010-12-11 on raven, modified by Debian 
```

我正在通过屏幕在远程机器上运行我的 emacs

```
den@playground:~/.emacs.den$ echo $TERM
screen 
```

无屏幕

```
den@playground:~$ echo $TERM
xterm 
```

行为与屏幕下相同。

据我了解这个问题。每次右键单击后，Emacs 都会覆盖选择而不是扩展它...

所以。没有屏幕也没有我的脚本（emacs -q）。
右移，左移，下移 - 工作。升班——什么都不做。所以。按升档后光标不移动。shift-home, shift-end 也在工作。shift-pgdown, shift-pgup - 没有。

有屏幕但没有我的脚本（emacs -q）。
没有什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:49:26.937

为什么要按 Shift-right 2 次，而不是按 'w'`C-SPACE``Right``Right`

这将选择`wi`. 现在您按`M-w`，然后复制它。

可能我理解错了这个问题？

# php - 子目录的 URL 未正确重写

> ID：11725653
> 
> 赞同：0
> 
> 时间：2012-07-30T16:30:04.687
> 
> 标签：php, mysql, .htaccess

我正在使用此代码进行 url 重写它不做的是如果有目录我想这样去[它](http://sample.com/folder/Dashboard) 去 profile.php 任何想法如何在子目录中隐藏扩展 php

```
 Options +FollowSymlinks
  RewriteEngine on
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME}\.php -f
  RewriteRule ^([^/]+)$ $1.php
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule (.*) profile.php?username=$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:34:28.767

试试这个

```
RewriteRule ^(([^/]+/)*[^.]+)$ /$1.php [L] 
```

# verilog - verilog 中的除法

> ID：11725657
> 
> 赞同：17
> 
> 时间：2012-07-30T16:30:21.657
> 
> 标签：verilog

我正在自学verilog。我正在阅读的书在介绍章节中指出，要执行除法，我们使用“/”运算符或“%”运算符。在后面的章节中说除法对于verilog来说太复杂并且无法合成，因此为了执行除法它引入了一个很长的算法。

所以我很困惑，verilog不能处理简单的划分吗？/ 运算符没用吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-30T17:10:06.673

这完全取决于您正在编写什么类型的代码。

如果您正在编写您打算合成的代码，您打算进入 FPGA 或 ASIC，那么您可能不想使用除法或模运算符。当您将任何算术运算符放在 RTL 中时，合成器会实例化一个电路来完成这项工作；`+`&的加法器`-`；的乘数`*`。当您写作时，`/`您要求的是分压电路，但分压电路是一件非常复杂的事情。它通常需要多个时钟周期，并且可能使用查找表。它需要很多综合工具来推断你在编写时想要什么`a / b`。

（显然除以 2 的幂很简单，但通常你会使用移位运算符）

如果您正在编写不想被综合的代码，例如测试台的一部分，那么您可以随意使用除法。

因此，要回答您的问题，`/`运营商并非毫无用处，但您必须清楚自己在何处以及为何使用它。也是如此`*`，但程度较轻。乘法器非常昂贵，但大多数合成器都能够推断出它们。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-10-21T12:24:18.620

你必须考虑硬件。

当您编写 a <= b/c 时，您是在对综合工具说“我想要一个可以在每个时钟周期提供结果并且没有中间管道寄存器的除法器”。

如果您计算出创建它所需的逻辑电路，它会非常复杂，尤其是对于更高的位数。通常 FPGA 没有用于划分的专用硬件块，因此必须使用通用逻辑资源来实现。它可能既大（很多 lut）又慢（低 fmax）。

无论如何，一些合成器可能会实现它（从快速搜索看来 quartus 会实现），其他合成器不会打扰，因为他们认为它在实践中不是很有用。

如果您除以一个常数并且可以接受近似结果，那么您可以使用乘数进行技巧。取你想要除以的倒数，乘以 2 的幂，然后四舍五入到最接近的整数。

然后在您的verilog中，您可以通过乘法来实现近似除法（这在现代FPGA上并不太昂贵），然后是移位（在硬件中移位固定位数基本上是免费的）。确保为中间结果留出足够的位。

如果您需要一个准确的答案，或者如果您需要除以不是预定义常量的东西，您将不得不决定您想要什么样的除法器。如果您的吞吐量很低，那么您可以使用基于状态机的方法，该方法每 n 个时钟周期进行一次除法。如果您的吞吐量很高并且您可以负担得起设备面积，那么每个时钟周期进行除法的流水线方法（但需要多个周期才能使结果流过）可能更合适。

通常，工具供应商会为这类东西提供预制块（Altera 称它们为宏功能）。这些的优点是工具供应商可能会为设备仔细优化它们。不利的一面是它们会带来供应商锁定，如果您想转移到不同的设备供应商，您很可能必须换出块，而您与之交换的块可能具有不同的特征。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-30T18:38:11.670

> 所以我很困惑。Verilog 不能处理简单的除法吗？/ 运算符没用吗？

verilog 综合规范（IEEE 1364.1）实际上表明应该支持所有具有整数操作数的算术运算符，但没有人遵循这个规范。一些综合工具可以进行整数除法，但其他工具会拒绝它（我认为 XST 仍然可以），因为组合除法通常非常低效。多周期实现是常态，但不能从“/”合成。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-30T16:36:59.613

除法和模数从来都不是“简单的”。如果可以，请避免使用它们，例如通过位掩码或移位操作。特别是变量除数在硬件中实现起来非常复杂。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-31T10:13:41.120

“Verilog 语言”可以很好地处理除法和模数 - 当您使用计算机模拟您的代码时，您可以完全访问它的所有功能。

当您将代码合成到特定芯片时，存在一些限制。这些限制往往是基于工具供应商认为什么是“明智的”，而不是什么是可行的。

在过去，除 2 的幂以外的任何除法对硅来说都是不明智的，因为它占用了大量空间并且运行速度非常慢。目前，一些合成器会为您创建“除以常数”电路。

将来，我认为没有理由合成器不应该为您创建一个分频器（或使用一个潜在的未来架构的 DSP 块中的一个）。会与否还有待观察，但见证乘数的进步（从“只有二的幂”到“一个输入常数”再到“完全实现”短短几年）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-30T11:13:46.897

1.  仅包括除以 2 的电路：只需移动位 :)
2.  除了 2 .... 看到你应该始终认为在电路级别 verilog 不是 C 或 C++
3.  / 和 % 是不可合成的，或者如果它变成（在新版本中）我相信你应该保留自己的除法电路，这是因为它们提供的 ip 将是通用的（很可能它们会使浮动不固定）
4.  我敢打赌你已经阅读了 morris mano 计算机架构书，在最后几章中，整个流程与算法一起给出，通过它跟随它并制作你自己的
5.  现在看看您的作品是否仅用于逻辑验证并且不需要实际电路，请务必选择 / 和 % 。没问题，它可以用于模拟

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-15T02:08:08.167

在 verilog 中可以使用 '/' 进行除法。但它不是一个可综合的算子。使用“*”进行乘法也是如此。在 verliog 中有某些算法可以执行这些操作，如果代码需要可合成，则使用它们。IE。如果您需要等效的硬件。

我不知道任何除法算法，但对于乘法，我使用了布斯算法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-14T06:25:27.520

如果您想要可合成的代码，您可以使用 Divison_IP 或者您可以使用右移运算符进行某些除法，例如 64/8=8 相同的 64>>3 = 8。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-22T07:05:27.540

除法在硬件上并不简单，因为人们花了很多时间在一个高效快速的乘法器上。但是，您可以通过在硬件中右移一位来轻松除以 2。

* * *

## 回答 #10

> 赞同：-10
> 
> 时间：2012-12-18T11:12:55.893

使用`result <= a/b`并完美运行。

请记住，使用`<=`运算符时，会立即计算答案，但答案会在下一个时钟上升沿输入到“结果”寄存器中。

如果您不想等到下一个时钟上升沿使用`result = a/b.`

请记住，任何算术运算电路都需要一些时间来完成运算，并且在此期间电路会生成随机数（位）。

就像当 A-10 疣猪攻击机攻击坦克时，它会发射大量子弹。这就是除法器电路在除法时的作用方式，它会吐出随机位。几纳秒后，它将完成除法并返回稳定的良好结果。

这就是为什么我们要等到“结果”寄存器的下一个时钟周期。我们试图保护它免受随机垃圾号码的影响。

除法是最复杂的运算，所以计算会有延迟。对于 16 位除法，结果将在大约 6 纳秒内计算出来。

# image-processing - mogrify 在 jpg 图像的左侧和右侧添加 100px？

> ID：11725658
> 
> 赞同：1
> 
> 时间：2012-07-30T16:30:22.887
> 
> 标签：image-processing, imagemagick, mogrify

我有一个 100 像素 x 100 像素的 jpg 图像。我想使用 bash 中的 mogrify 命令在图像的左侧和右侧添加 100px 的空白。生成的图像应该有 300 像素的宽度和 100 像素的高度。图像将水平居中。

我试过`mogrify -crop +200+0 image.jpg`了，但是从图像的左侧切断了 200 像素。我试过`mogrify -crop -200+0 image.jpg`了，但是从图像的右侧切断了 200 像素。我无法理解 imagemagick 的文档。通过查看示例代码，我学得最好。

将实现我的目标的命令行语句是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:04:12.463

我想到了

```
mogrify -extent 300x100 -gravity Center image.jpg 
```

# javascript - 将 hashmap 从 javascript 传递给 servlet

> ID：11725661
> 
> 赞同：2
> 
> 时间：2012-07-30T16:30:37.853
> 
> 标签：javascript, jquery, hashmap

我在这个问题中使用公认的解决方案创建了一个简单的哈希图： [如何使用 JavaScript/JQuery 创建一个简单的地图](https://stackoverflow.com/questions/4246980/how-to-create-a-simple-map-using-javascript-jquery)

但是，我需要将此 var 发送到 servlet 并将它们检索到 Java 上`HashMap`。我怎么做。

键是字符串，值是数组，例如：

```
`[1,'apple,orange, banana'],[2,'apple,peach, banana']` ... 
```

我需要键 1,2 和加载到 Java 的数组`HashMap`。

我尝试使用 jquery 发布它。selectedrows 是我的地图

```
$.post(url, { id: selectedrows }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:41:04.280

我创建了一个 JSON 字符串，然后通过 ajax 帖子将其发送到 servlet 并在那里构建 HashMap。

# excel - 将出现“n”次的 a 的第一个实例复制到新工作簿

> ID：11725669
> 
> 赞同：0
> 
> 时间：2012-07-30T16:31:01.223
> 
> 标签：excel, vba, copying

首先非常感谢您提供这样一个网站，这对像我这样开始使用 VBA 的人非常有帮助。我正在尝试将我所做的手动工作自动化，这确实是一项耗时的工作。请帮助我。请求。如下：

```
X       Y
----    ---
2134    100
2134    200
2134    300
3456    400
3241    500
2516    600
2516    700 
```

我有一张上面有“X”和“Y”列的表格。这是我的源表，我有数千个这样的值，并且每天（动态）添加行。我想要 a 中的输出表，`new workbook>>new sheet`它应该具有如下输出：

```
X1      Y1
----    ---
2134    100
3456    400
3241    500
2516    600 
```

即，列“X”和“Y”的第一个实例。请帮助我获得一个 VBA 来自动执行此操作。我每天要花费 4 个小时来完成这项工作，因为我需要手动更新 1000 条数据。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:52:36.277

```
Sub Firsts()
    Dim dict As Object, k
    Dim c As Range, tmp
    Dim sht As Worksheet

    Set dict = CreateObject("scripting.dictionary")

    For Each c In ActiveSheet.Range("A1:A10000").Cells
        tmp = c.Value
        If Len(tmp) = 0 Then Exit For
        If Not dict.exists(tmp) Then dict.Add tmp, c.Offset(0, 1).Value
    Next c

    DumpDict Workbooks.Add().Sheets(1).Range("A1"), dict

End Sub

Sub DumpDict(rng As Range, dict As Object)
Dim k, r As Long
    r = 0
    For Each k In dict.keys
        rng.Cells(1).Offset(r, 0).Resize(1, 2).Value = Array(k, dict(k))
        r = r + 1
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:38:00.897

另一种选择是从“数据”选项卡中选择“**高级过滤器**”，并提供以下选项。

![在此处输入图像描述](../Images/32b28e730e953aaf12e995fb577fdb23.png)

现在您可以将结果复制并粘贴到新工作表并清除过滤器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:01:56.470

我相信这会让你得到你想要的：

```
Sub copyOver()
    Dim count As Integer
    count = Application.WorksheetFunction.CountA(Range("A:A"))
    Dim rowCount As Integer
    rowCount = 1
    Dim i As Integer
    i = 2
    Do While i <= count
        Dim str As String
        str = Range("A" & i)
        Dim find As String
        On Error GoTo copy:
        find = Application.WorksheetFunction.VLookup(str, Range("A1:A" & (i - 1)), 1, False)
        i = i + 1
    Loop
    Exit Sub
copy:
    If (Range("A" & i) = "") Then
        Resume Next
    End If
    Call copier(Range("A" & i), Range("B" & i), rowCount)
    rowCount = rowCount + 1
    Resume Next
End Sub

Sub copier(str1 As String, str2 As String, rowCount As Integer)
    Worksheets("Sheet2").Range("A" & rowCount) = str1
    Worksheets("Sheet2").Range("B" & rowCount) = str2
End Sub 
```

只需确保您的数据位于 A 列和 B 列中并从第 1 行下方开始。希望这会有所帮助！

# facebook - 如何获取多语言 Facebook 页面的所有页面帖子？

> ID：11725674
> 
> 赞同：1
> 
> 时间：2012-07-30T16:31:24.897
> 
> 标签：facebook, facebook-graph-api, stream, locale, feed

使用 FB API，我只能检索我注册的国家/地区（法国）的流，即使它们不是法语，我也想获得所有帖子。

例如： http: [//www.facebook.com/Nina](http://www.facebook.com/Nina)

我试图放置一个“语言环境”参数，但它并没有改变任何东西。

有任何想法吗？

# google-apps-script - 在多个 *.gs 文件中组织电子表格代码 - 甚至可能吗？

> ID：11725675
> 
> 赞同：19
> 
> 时间：2012-07-30T16:31:32.783
> 
> 标签：google-apps-script

我正在尝试在几个脚本文件中组织电子表格的代码。在脚本编辑器中，我可以创建任意数量的 *.gs 文件，但我不知道如何访问将在另一个脚本中定义的代码。

我想要实现的简单示例：

代码.gs：

```
function onEdit(){
   myFunctionFromLibrary_gs();
} 
```

图书馆.gs：

```
function myFunctionFromLibrary_gs(){
   Browser.msgBox("hi there");
} 
```

onEdit() 显然是由触发器调用的。如果不进行修改，这将导致运行时错误，说明

> myFunctionFromLibrary_gs TypeError: 不是函数，它是未定义的。

那么我怎样才能使这项工作，或者目前不支持呢？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2016-10-05T18:37:26.690

是的，这是可能的。

> 8.  **您不限于单个服务器 Code.gs 文件。**您可以将服务器代码分布在多个文件中，以便于开发。***所有服务器文件都加载到同一个全局命名空间***中，所以当你想提供安全封装时，请使用 JavaScript 类。

参考：[Google 文档 - 功能和限制](https://developers.google.com/apps-script/import-export#features_and_limitations)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-30T16:46:11.577

我不知道`_gs`后缀对 Google 意味着什么，但没有它（见下面的代码），代码就可以工作。

文件 1.gs：

```
function onEdit(){
   myFunctionFromLibrary();
} 
```

文件2.gs

```
function myFunctionFromLibrary(){
   Browser.msgBox("hi there");
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-19T20:09:05.223

我知道这是一个老问题，但我发现它正在寻找类似的任务，并且在我的同一次搜索中碰巧找到了答案。[来自https://developers.google.com/apps-script/guide_libraries#writingLibrary](https://developers.google.com/apps-script/guide_libraries#writingLibrary)的文档：

> 如果您希望脚本的一个或多个方法对您的库用户不可见（也不可用），您可以使用下划线结束该方法的名称。例如，myPrivateMethod_()。

虽然您的函数不以下划线结尾，但它可能在其他地方具有特殊含义，或者 _gs 后缀也可能具有特殊含义（特别是给定相同的文件名后缀）。

# javascript - 使用jquery将垂直导航更改为水平导航

> ID：11725680
> 
> 赞同：1
> 
> 时间：2012-07-30T16:31:44.213
> 
> 标签：javascript, jquery, css

基本上，我有一个无序列表作为我在按部分排序的单页网站上的导航。这些部分或面板是浏览器窗口的全宽和全高。

在第一个面板中，这个列表是垂直的，但是当用户向下滚动页面到第二部分（即浏览器窗口顶部的第二个面板）时，我想更改它的样式，以便它固定到顶部浏览器窗口，变成水平导航而不是垂直导航。如果可能的话，我不想复制列表。

我不擅长 jQuery，也不知道从哪里开始。任何帮助都会很棒。

这是我当前的代码，它获取浏览器窗口的宽度和高度并显示全屏 div：

```
function fitElements(){
var height=$(window).height();
var width=$(window).width();
$('.panel').css('height',height);
$('.panel').css('width',width)
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:57:26.483

这是一个非常简单的例子：

[**演示**](http://jsfiddle.net/tgLek/)

**html**：

```
<ul id="nav">
<li><a href="#" id="linkOne">One</a></li>
<li><a href="#" id="linkTwo">Two</a></li>
<li><a href="#" id="linkThree">Three</a></li>
</ul>

<div id="divOne" class="panel">    
</div>
<div id="divTwo" class="panel">    
</div>
<div id="divThree" class="panel">    
</div> 
```

**CSS**：

```
#nav {
 position:fixed;
 top:0;
 left:10px;     
}

#nav.horizontal li {
  float:left;
}

#divOne {
 background-color:#cef;   
}
#divTwo{
 background-color:#efc;   
}
#divThree{
 background-color:#fce;   
} 
```

​js **/jQuery** :

```
$("div.panel").css({
    height: $(window).height(),
    width: $(window).width()
});

$(window).scroll(function() {
    ($("#divTwo").offset().top <= window.pageYOffset) ? $("#nav").addClass("horizontal") : $("#nav").removeClass("horizontal");
});

$("#linkOne").click(function(e){
   $('html, body').animate({
        scrollTop: $("#divOne").offset().top
    });
    $("#nav").removeClass("horizontal");
    e.preventDefault();
});

$("#linkTwo").click(function(e){
   $('html, body').animate({
        scrollTop: $("#divTwo").offset().top
    });
    $("#nav").addClass("horizontal");
    e.preventDefault();
});

$("#linkThree").click(function(e){
   $('html, body').animate({
        scrollTop: $("#divThree").offset().top
    });
    $("#nav").addClass("horizontal");
    e.preventDefault();
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:43:25.270

好的，只要我对您的理解正确（请参阅我的评论以寻求澄清），您的目标是确保您的网站访问者即使向下滚动页面也能看到您的导航窗格。我会提醒您不要将导航栏更改为在页面上到达某个点后水平显示，因为它看起来很不稳定，尤其是在较慢的浏览器中，除非（有时即使）您提供更多代码（对于新手）平滑过渡。

我建议你看看几天前的[这个问题。](https://stackoverflow.com/questions/11705855/floating-div-content-that-tracks-along-a-parent-divs-height/11705971)我为他正在寻找的效果创建了一个演示，它与您正在寻找的效果非常相似，并将其托管在我的开发站点上。看一看，如果它是您喜欢的东西，如果是并且您在实施时遇到困难，请告诉我，我将非常乐意为您提供帮助。

# jquery - 有序列表中的 getElementById

> ID：11725682
> 
> 赞同：1
> 
> 时间：2012-07-30T16:31:52.500
> 
> 标签：jquery, getelementbyid

我在 html 中有这个：

```
<ul class="ei-slider-arrows">
  <li id="arrowLeft" ><img src='images/close.png'/></li>
  <li id="arrowRight" ><img src='images/close.png'/></li>
</ul> 
```

我正在尝试在我的两个 li“箭头”上添加点击功能，但我无法选择它们。我试过这个：

```
this.$arrows     = this.$el.find('ul.ei-slider-arrows');
this.$arrowLR    = this.$arrows.children('li');
this.$arrowRight = this.$arrowLR.getElementById("arrowRight"); 
```

我可以添加一个功能，`this.$arrowLR`但我无法选择`arrowRight`。在这里我尝试了`getElementById`，但我也尝试了`get(0)`and `get(1)`。

任何人都知道为什么它不起作用？

如果我这样做`console.log(this.$arrowRight)`，它只会在两种情况下（和）都显示`[]`在控制台中。`get()``getElementById("arrowRight")`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:34:22.433

如果您想通过 id 获取它们，请使用以下代码段：

```
var arrowsBoth = $('#arrowLeft, #arrowRight'); 
```

或者，如果您想单独访问它们：

```
var arrowLeft = $('#arrowLeft');
var arrowRight = $('#arrowLeft'); 
```

你也可以像这样得到它们（另外，这可能会返回比期望更多的元素）：

```
var arrows = $('ul.ei-slider-arrows li'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T16:38:08.997

只需按 ID 选择元素并将事件处理程序绑定到它

使用 jQuery

```
$('#arrowLeft').click(function(){

})

$('#arrowRight').click(function(){

}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:34:17.393

我会去：

```
$("#leftArrow").click(hazaa());
$("#rightArrow").click(hazaa());

function hazaa(){ } 
```

如果您想做一些**稍微**不同的事情，您也可以传递一个参数，具体取决于单击的箭头。

```
$("#leftArrow").click(hazaa("left"));
$("#rightArrow").click(hazaa("right"));

function hazaa(direction){ alert(direction); } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T16:38:31.010

`$("#arrowRight")`并且`$("#arrowLeft")`在 jquery 中应该得到左右箭头。然后，您可以使用`on()`、`delegate()`或`click()`来分配处理程序。您也可以只做`document.getElementById("arrowLeft")`或`document.getElementById("arrowRight")`做同样的选择。上述问题之一是，`this.$arrowLR.getElementById("arrowRight");`您试图在包含 dom 元素列表的 jquery 对象上使用 javascript 函数。

# ruby-on-rails - RoR ActiveRecord/ActiveRelation 错误：未定义的方法 + 用于 nilClass

> ID：11725686
> 
> 赞同：0
> 
> 时间：2012-07-30T16:32:14.880
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

老实说，我比以往任何时候都更迷失过。最近，我一直在尝试摆脱 5 年以上的 PHP 开发并尝试 Ruby/Rails。我选择了使用 Rails 进行敏捷 Web 开发，并且一直在关注它。我携带的不同版本包括 Mac OS X Snow Leopard（最初已迁移到 Mountain Lion）和 Ruby/Rails 1.8.7/3.2.6。

将数量添加到购物车时，我的代码如下所示：cart.rb (model)

```
class Cart < ActiveRecord::Base
  has_many :line_items, :dependent => :destroy

  def add_product(product_id)
    current_item = line_items.find_by_product_id(product_id)
    if current_item
      current_item.quantity += 1
    else
      current_item = line_items.build(:product_id => product_id)
    end
    current_item
  end
end 
```

我在 line_item.rb 模型和 line_items_controller.rb 中有 attr_accessible :quantity 我正在调用@line_item = current_cart.add_product(product.id)。代码在您第一次将产品添加到购物车时运行良好，但 Rails 第二次给我错误：

```
undefined method `+' for nil:NilClass 
```

并指出问题中的明显线（加号上方）。有什么建议么？谢谢。

编辑：如果有人也可以在评论中推荐这是学习 Rails 的最佳途径，或者我应该拿起另一本书或使用另一个网站/等，因为这不是第一次代码出错了这本书。

编辑 2：摘录 line_items_controller.rb（第 40-56 行）

```
def create
  @cart = current_cart
  product = Product.find(params[:product_id])
  @line_items = @cart.add_product(product.id) #product.id, product didn't work.

  respond_to do |format|
    if @line_item.save
      format.html { redirect_to @line_item.cart, :notice => 'Line item was successfully created.' }
      format.json { render :json => @line_item, :status => :created, :location => @line_item }
    else
      format.html { render :action => "new" }
      format.json { render :json => @line_item.errors, :status => :unprocessable_entity }
    end
  end
end 
```

此外，由于代码适用于一个项目，而不是同一项目的连续添加，我认为它与 .save 无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:39:14.367

你确定数量不是零。

尝试

```
if current_item && current_item.quantity.present? 
```

代替

```
if current_item 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T16:45:08.510

永远不要将`attr_accessor`（不要与`attr_accessible`）与由数据库列支持的属性一起使用：您正在将活动记录生成的访问器（它会返回列值，可能默认值为 1）替换为使用一个实例变量。该实例变量未设置，因此返回 nil

使用 Rails 进行敏捷 Web 开发的早期版本很好（我曾经拥有第一版），但我会确保您拥有最新版本 - 我认为它们现在已经排在第 4 或第 5 位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:36:16.163

错误的意思是你的`current_item`对象是`nil`. 您的`find_by_product_id`查询没有找到任何具有您作为参数传递的 id 的对象。
尝试检查控制器传递给模型的 id。

# javascript - 如何在 Node.js 中获得微时间？

> ID：11725691
> 
> 赞同：112
> 
> 时间：2012-07-30T16:32:24.460
> 
> 标签：javascript, node.js, v8

如何在 Node.js 中获得最准确的时间戳？

ps 我的 Node.js 版本是 0.8.X，[node-microtime 扩展](https://github.com/wadey/node-microtime)对我不起作用（安装时崩溃）

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2013-08-12T22:05:21.707

在 Node.js 中，“高分辨率时间”通过[`process.hrtime`](https://nodejs.org/api/process.html#process_process_hrtime_time). 它返回一个数组，其中第一个元素以秒为单位，第二个元素为剩余的纳秒。

要以微秒为单位获取当前时间，请执行以下操作：

```
var hrTime = process.hrtime()
console.log(hrTime[0] * 1000000 + hrTime[1] / 1000) 
```

（感谢[itaifrenkel](https://stackoverflow.com/users/985297/itaifrenkel)指出上述转换中的错误。）

在现代浏览器中，具有微秒精度的时间以`performance.now`. 有关文档，请参阅[https://developer.mozilla.org/en-US/docs/Web/API/Performance/now](https://developer.mozilla.org/en-US/docs/Web/API/Performance/now)。

我已经为 Node.js 实现了这个函数，基于`process.hrtime`，如果您只想计算程序中两点之间的时间差，则相对难以使用。请参阅[http://npmjs.org/package/performance-now](http://npmjs.org/package/performance-now)。根据规范，此函数以毫秒为单位报告时间，但它是一个具有亚毫秒精度的浮点数。

在此模块的 2.0 版中，报告的毫秒数是相对于节点进程的启动时间 ( `Date.now() - (process.uptime() * 1000)`)。如果您想要类似于 的时间戳，则需要将其添加到结果中`Date.now()`。另请注意，您应该重新计算`Date.now() - (process.uptime() * 1000)`。两者都非常不可靠，无法进行精确测量`Date.now`。`process.uptime`

要以微秒为单位获取当前时间，您可以使用类似这样的方法。

```
var loadTimeInMS = Date.now()
var performanceNow = require("performance-now")
console.log((loadTimeInMS + performanceNow()) * 1000) 
```

另请参阅：[JavaScript 是否提供高分辨率计时器？](https://stackoverflow.com/questions/6875625/does-javascript-provide-a-high-resolution-timer?lq=1)

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2012-07-30T16:34:15.870

`new Date().getTime()`? 这会为您提供以毫秒为单位的时间戳，这是 JS 将为您提供的最准确的时间戳。

更新：正如 vaughan 所说，`process.hrtime()`它在 Node.js 中可用 - 它的分辨率是纳秒级，因此它要高得多。`[seconds, nanoseconds]`此函数返回一个包含当前实时高分辨率值的数组，但请注意，它[与任何特定的时钟无关](https://nodejs.org/api/process.html#process_process_hrtime_time)，这意味着两个连续值的*差异*告诉您经过了多少时间，但单个值告诉您没有任何意义。

另请注意，从 Node v10 开始，`process.hrtime()`已被标记为“legacy”，您应该`process.hrtime.bigint()`改用它，它会产生单个 BigInt 数字而不是数组。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-08-12T13:38:40.303

```
now('milli'); //  120335360.999686
now('micro') ; // 120335360966.583
now('nano') ; //  120335360904333 
```

已知的`now`是：

```
const now = (unit) => {

  const hrTime = process.hrtime();

  switch (unit) {

    case 'milli':
      return hrTime[0] * 1000 + hrTime[1] / 1000000;

    case 'micro':
      return hrTime[0] * 1000000 + hrTime[1] / 1000;

    case 'nano':
    default:
      return hrTime[0] * 1000000000 + hrTime[1];
  }

}; 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2019-02-03T22:19:41.457

从[`BigInt`](https://developers.google.com/web/updates/2018/05/bigint)Node.js 10.7.0 开始支持数据类型。（*另见[博文公告](https://v8.dev/blog/bigint)*）。对于这些受支持的 Node.js 版本，该[`process.hrtime([time])`](https://nodejs.org/api/process.html#process_process_hrtime_time)方法现在被视为“旧版”，由该[`process.hrtime.bigint()`](https://nodejs.org/api/process.html#process_process_hrtime_bigint)方法取代。

> 返回当前高分辨率实时的方法`bigint`版本。`process.hrtime()``bigint`

```
const start = process.hrtime.bigint();
// 191051479007711n

setTimeout(() => {
  const end = process.hrtime.bigint();
  // 191052633396993n

  console.log(`Benchmark took ${end - start} nanoseconds`);
  // Benchmark took 1154389282 nanoseconds
}, 1000); 
```

* * *

**tl;博士**

*   Node.js 10.7.0+ - 使用`process.hrtime.bigint()`
*   否则 - 使用`process.hrtime()`

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-09-29T16:40:27.343

还有[https://github.com/wadey/node-microtime](https://github.com/wadey/node-microtime)：

```
> var microtime = require('microtime')
> microtime.now()
1297448895297028 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-08-12T19:23:53.950

**Node.js 纳米计时器**

`process.hrtime`我在函数调用之上为 node.js 编写了一个包装库/对象。它具有有用的功能，例如定时同步和异步任务，以秒，毫秒，微甚至纳米指定，并遵循内置javascript计时器的语法以便熟悉。

Timer 对象也是离散的，因此您可以拥有任意数量的对象，每个对象都有自己的`setTimeout`或`setInterval`正在运行的进程。

它被称为[纳米计时器](https://github.com/Krb686/nanotimer)。看看这个！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-10-30T11:38:27.587

要使用比 更高的精度`Date.now()`，但浮点精度以毫秒为单位：

```
function getTimeMSFloat() {
    var hrtime = process.hrtime();
    return ( hrtime[0] * 1000000 + hrtime[1] / 1000 ) / 1000;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-07-11T21:00:30.960

`hrtime`在一行中获取单个数字：

```
const begin = process.hrtime();
// ... Do the thing you want to measure
const nanoSeconds = process.hrtime(begin).reduce((sec, nano) => sec * 1e9 + nano) 
```

`Array.reduce`，当给定一个参数时，将使用数组的第一个元素作为初始`accumulator`值。可以将`0`其用作初始值，这也可以，但是为什么要使用额外的`* 0`.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-04-14T15:29:45.570

我对这个解决方案并不感到骄傲，但您可以通过这种方式获得***以微秒或纳秒***为单位的时间戳：

```
const microsecond = () => Number(Date.now() + String(process.hrtime()[1]).slice(3,6))
const nanosecond = () => Number(Date.now() + String(process.hrtime()[1]).slice(3))

// usage
microsecond() // return 1586878008997591
nanosecond()  // return 1586878009000645600

// Benchmark with 100 000 iterations
// Date.now: 7.758ms
// microsecond: 33.382ms
// nanosecond: 31.252ms 
```

***我知道：***

*   此解决方案***仅适用于 node.js***，
*   这比大约慢***3 到 10 倍***`Date.now()`
*   奇怪的是，它似乎非常准确，hrTime 似乎完全遵循 js 时间戳记。
*   您可以替换`Date.now()`为`Number(new Date())`以毫秒为单位获取时间戳

***编辑：***

这是一个使用逗号的微秒解决方案，但是，数字版本将由 javascript 本机四舍五入。所以如果你每次都想要相同的格式，你应该使用它的字符串版本。

```
const microsecondWithCommaString = () => (Date.now() + '.' + String(process.hrtime()[1]).slice(3,7))
const microsecondWithComma = () => Number(Date.now() + '.' + String(process.hrtime()[1]).slice(3,7))

microsecondWithCommaString() // return "1586883629984.8997"
microsecondWithComma() // return 1586883629985.966 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-11-07T08:15:42.933

您还可以使用在 NodeJS 和浏览器中都可以使用的性能 API：

```
var start = performance.timing ?
    performance.timing.navigationStart :
    performance.timeOrigin;

var time = (performance.now() + start) * 1000; 
```

性能 API 以浮点数存储值，分数为微秒。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-11-28T04:56:31.470

重写以帮助快速理解：

```
const hrtime = process.hrtime();     // [0] is seconds, [1] is nanoseconds

let nanoSeconds = (hrtime[0] * 1e9) + hrtime[1];    // 1 second is 1e9 nano seconds
console.log('nanoSeconds:  ' + nanoSeconds);
//nanoSeconds:  97760957504895

let microSeconds = parseInt(((hrtime[0] * 1e6) + (hrtime[1]) * 1e-3));
console.log('microSeconds: ' + microSeconds);
//microSeconds: 97760957504

let milliSeconds = parseInt(((hrtime[0] * 1e3) + (hrtime[1]) * 1e-6));
console.log('milliSeconds: ' + milliSeconds);
//milliSeconds: 97760957 
```

来源：[https ://nodejs.org/api/process.html#process_process_hrtime_time](https://nodejs.org/api/process.html#process_process_hrtime_time)

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-09-10T23:22:26.860

有一些 npm 包绑定到系统 gettimeofday() 函数，该函数在 Linux 上返回一个微秒精度的时间戳。搜索 npm `gettimeofday`。调用 C 比调用 C 更快`process.hrtime()`

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2020-05-04T04:55:21.603

process.hrtime() 没有给出当前的 ts。

这应该有效。

```
 const loadNs       = process.hrtime(),
        loadMs       = new Date().getTime(),
        diffNs       = process.hrtime(loadNs),
        microSeconds = (loadMs * 1e6) + (diffNs[0] * 1e9) + diffNs[1]

  console.log(microSeconds / 1e3) 
```

* * *

## 回答 #14

> 赞同：-10
> 
> 时间：2018-02-27T16:34:52.323

更好的？

```
Number(process.hrtime().join('')) 
```

# jsf - Primefaces 数据表行选择

> ID：11725695
> 
> 赞同：0
> 
> 时间：2012-07-30T16:32:31.970
> 
> 标签：jsf, jsf-2, primefaces

Edit2 - 我在帖子末尾添加了 faces-config.xml。

我在使用 Primefaces 数据表行选择时遇到问题。我希望能够选择一行并将数据移动到我可以操作的对象中。我正在使用基于 primefaces 展示示例的模型，但它不起作用。坦率地说，我对出了什么问题已经没有想法了。下面是我的 xhtml 和 managedbean。

```
<html xmlns="http://www.w3c.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui" >
<h:head>

</h:head>
<h:body>
<center>
<h:form id="form">

<p:dataTable id="personTable" var="client" value="#{tableBean.persons}" rowKey="#{client.name}"
             selection="#{tableBean.person}" selectionMode="single">

    <f:facet name="header">
        Click "View" button after selecting a row to see details
    </f:facet>

    <p:column headerText="Name">
        #{client.name}
    </p:column>

    <p:column headerText="Address">
        #{client.address}
    </p:column>

    <p:column headerText="Phone" >
        #{client.phone}
    </p:column>
</p:dataTable>

<h:panelGrid id="display" columns="2" cellpadding="4">

        <h:outputText value="Name:" />
        <h:outputText value="#{tableBean.person.name}" />

        <h:outputText value="Address:" />
        <h:outputText value="#{tableBean.person.address}" />

        <h:outputText value="Phone:" />
        <h:outputText value="#{tableBean.person.phone}" />

</h:panelGrid>

</h:form>

</center>
</h:body>
</html> 
```

这里的托管 Bean：

```
package com.dave.test;

import java.util.ArrayList;
import java.util.List;

public class TableBean {

private List<Person> persons = null;
private Person person;

public TableBean() {
    persons = new ArrayList<Person>();
    persons.add(new Person("Jimmy", "18 Maple", "337-278-1019"));
    persons.add(new Person("Sally", "47 Oak", "787-509-3819"));
    persons.add(new Person("Roger", "754 Fifth Ave.", "926-420-8219"));
    persons.add(new Person("Mimi", "891 2nd St.", "713-371-8632"));

}

public List<Person> getPersons() {
    return persons;
}

public void setPersons(List<Person> persons) {
    this.persons = persons;
}

public Person getPerson() {
    return person;
}

public void setPerson(Person person) {
    this.person = person;
}

} 
```

谢谢，戴夫

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config version="2.0" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"         
 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-    
 facesconfig_2_0.xsd">
 <managed-bean>
   <managed-bean-name>tableBean</managed-bean-name>
   <managed-bean-class>com.dave.test.TableBean</managed-bean-class>
   <managed-bean-scope>request</managed-bean-scope>
 </managed-bean>
</faces-config> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:41:53.370

我假设当您单击该行时，没有数据。那是因为您使用的是请求范围的 bean。这意味着当您加载页面时，会填充 bean。页面加载后，bean就消失了。

我建议将您的范围更改为 ViewScope 以查看是否有帮助。

此外，如果您使用的是 jsf 2.0，则可以使用注释而不是 faces-config.xml 文件。您的支持者将如下所示：

```
package com.dave.test;

import java.util.ArrayList;
import java.util.List;

public class TableBean {

private List<Person> persons = null;
private Person person;

@ManagedBean
@ViewScoped
public TableBean() {
    persons = new ArrayList<Person>();
    persons.add(new Person("Jimmy", "18 Maple", "337-278-1019"));
    persons.add(new Person("Sally", "47 Oak", "787-509-3819"));
    persons.add(new Person("Roger", "754 Fifth Ave.", "926-420-8219"));
    persons.add(new Person("Mimi", "891 2nd St.", "713-371-8632"));

}

public List<Person> getPersons() {
    return persons;
}

public void setPersons(List<Person> persons) {
    this.persons = persons;
}

public Person getPerson() {
    return person;
}

public void setPerson(Person person) {
    this.person = person;
}

} 
```

现在您可以从 faces-config.xml 中删除您的托管 bean 内容。

**编辑** 我刚刚意识到您没有 ajax 事件来处理行选择。如果您正在查看 primefaces 即时行选择，您需要注意它们`<p:ajax event="rowSelect" ..../>`与支持 bean 中的方法一起使用来处理此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T02:00:52.600

lo único que debes hacer es al bean TableBean.java quitarle(borrar) el @SessionScoped ya la clase Car.java quitarle @ManagedBean(name = "car") , @SessionScoped 实现可序列化。esta clase es una simple clase no tiene porque ser un managebean unicamente son datos。

翻译：

All you have to do is to take TableBean.java bean (delete) the @SessionScoped and take Car.java class @ManagedBean (name = "car"), @SessionScoped, implements Serializable. This class is a simple class need not be a managebean only are data.

# excel - Excel将行转换为带有组的列

> ID：11725698
> 
> 赞同：1
> 
> 时间：2012-07-30T16:33:04.710
> 
> 标签：excel, pivot-table, transpose

假设我在 excel 中的列设置如下：

```
名称 ABCD  
乔治 10 5 4 6
```

我希望它改为这样：

```
名称 类别 金额  
乔治 A 10  
乔治 B 5  
乔治 C 4  
乔治 D 6
```

是否有一种简单的方法可以使用转置或数据透视表进行复制和粘贴，还是必须使用 VBA 来完成？我一直在尝试只用 VBA 来做，但我还没有走得很远。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-08T21:14:09.027

一个真正的答案而不是一个链接怎么样？

1.  突出显示要旋转的两行。
2.  复制
3.  查找空行
4.  `Paste Special`->`Transpose`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T17:26:35.497

根据评论，您可以点击该链接。描述 Excel 2010 类似步骤的相关 SO 答案是[如何将行转换为基于重复列的数据？](https://stackoverflow.com/questions/11674964/how-can-i-transform-rows-into-repeated-column-based-data/11676403#11676403).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-01T08:55:01.643

如果您想在源数据和目标数据之间保持“动态”链接，那么每当源数据发生变化时，目标也会自动进行，您需要公式。在这种情况下，您可以使用[Excel 中的第 7 项：在列/行/矩阵之间转换数据的公式](https://stackoverflow.com/questions/20800820/excel-formulas-for-converting-data-among-column-row-matrix/20800915#20800915)：

要`matrix_data3`转置`matrix_data2`，只需使用`matrix_data2_top_left`and `matrix_data3_top_left`, 和公式

```
=OFFSET(matrix_data2_top_left,COLUMN()-COLUMN(matrix_data3_top_left),ROW()-ROW(matrix_data3_top_left)) 
```

并复制到合适的目标范围。

请注意，`matrix_data2_top_left`和分别是源区域和目标区域左上角单元格的`matrix_data3_top_left`方便[Excel 区域名称](https://support.office.com/en-us/article/Define-and-use-names-in-formulas-4d0f13ac-53b7-422e-afd2-abd7ff379c64)`$B$1`，它们可以在公式中替换为它们的绝对引用（例如和`$B$6`）。此外，`matrix_data2`and`matrix_data3`是 Excel 范围名称，但此处不需要这些范围（作为名称或绝对引用）。

# php - 我可以通过 google PHP API 发出 API 请求吗

> ID：11725699
> 
> 赞同：-1
> 
> 时间：2012-07-30T16:33:10.153
> 
> 标签：php, api, rest, oauth

我说的是这个：[http ://code.google.com/p/google-api-php-client/](http://code.google.com/p/google-api-php-client/)

是否可以使用该 API 库中的方法来发送 Oauth GET/POST 请求一般...

我一直在扫描源代码，我似乎找不到任何这样的方法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:38:44.480

你想和什么联系？Adsense/Analytics/Gmail 还是什么？这些代码所做的只是为您提供一个 Oauth 密钥，所有 GET/POST 请求都由您尝试连接的谷歌应用程序分隔。文档可以在[这里找到](http://code.google.com/p/google-api-php-client/wiki/Samples)

# matlab - 如何在 matlab 2012a 中对 3 类分类任务应用反向传播？

> ID：11725705
> 
> 赞同：0
> 
> 时间：2012-07-30T16:33:37.813
> 
> 标签：matlab, machine-learning, neural-network

我想使用具有反向传播算法的多层神经网络来解决 3 个类的分类问题。我正在使用matlab 2012a。我在使用 newff 功能时遇到了麻烦。我想建立一个具有一个隐藏层的网络，输出层将有 3 个神经元，每个类一个。请举个例子告诉我。

这是我的代码

```
clc

%parameters
nodesInHL=7;
nodesInOutput=3;
iteration=1000;
HLtranfer='tansig';
outputTranser='tansig';
trainFunc='traingd';
learnRate=0.05;
performanceFunc='mse';

%rand('seed',0);
%randn('seed',0);
rng('shuffle');

net=newff(trainX,trainY,[nodesInHL],{HLtranfer,outputTranser},trainFunc,'learngd',performanceFunc);
net=init(net);

%setting parameters
net.trainParam.epochs=iteration;
net.trainParam.lr=learnRate;

%training
[net,tr]=train(net,trainX,trainY); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:40:14.337

该`newff`功能已过时。推荐的功能是`feedforwardnet`，或者在您的情况下（分类），使用`patternnet`。

您还可以使用 的 GUI `nprtool`，它提供了一个类似向导的工具，可指导您逐步构建网络。它甚至允许在实验结束时生成代码。

这是一个例子：

```
%# load sample dataset
%#   simpleclassInputs: 2x1000 matrix (1000 points of 2-dimensions)
%#   simpleclassTargets: 4x1000 matrix (4 possible classes)
load simpleclass_dataset

%# create ANN of one hidden layer with 7 nodes
net = patternnet(7);

%# set params
net.trainFcn = 'traingd';            %# training function
net.trainParam.epochs = 1000;        %# max number of iterations
net.trainParam.lr = 0.05;            %# learning rate
net.performFcn = 'mse';              %# mean-squared error function
net.divideFcn = 'dividerand';        %# how to divide data
net.divideParam.trainRatio = 70/100; %# training set
net.divideParam.valRatio = 15/100;   %# validation set
net.divideParam.testRatio = 15/100;  %# testing set

%# training
net = init(net);
[net,tr] = train(net, simpleclassInputs, simpleclassTargets);

%# testing
y_hat = net(simpleclassInputs);
perf = perform(net, simpleclassTargets, y_hat);
err = gsubtract(simpleclassTargets, y_hat);

view(net) 
```

注意NN会自动设置输出层的节点数（根据目标类矩阵大小）

![截屏](../Images/6ca433fcee1391afba161ce51f5a460f.png)

# java - Java 绿色线程通过 JNI 使用 UNIX ucontext 库。可能吗？

> ID：11725706
> 
> 赞同：1
> 
> 时间：2012-07-30T16:33:47.347
> 
> 标签：java, java-native-interface, green-threads

我正在使用 ucontext 开发一个基于绿色（合作）量子线程的简单的教育示例。但我面临着问题。下面提供的示例非常容易理解，我将感谢您为我提供的任何帮助：

`TestApp.java`：

```
public class TestApp extends UThreadApp {
    public static void umain() {
        System.out.println("umain");
    }
} 
```

`UThreadApp.java`：

```
import java.io.*;

public class UThreadApp {
    public static void main(String[] args) {    
        long kernel = newContext();
        long umain = newUThread("TestApp", "umain");
        swap(kernel, umain);
        System.out.println("main");
    }

    native static long newContext();
    native static void swap(long oldc, long newc);
    native static long newUThread(String className, String method);

    static {
        System.loadLibrary("uthread");
    }
} 
```

`UThreadApp.c`：

```
#include <stdlib.h>
#include <ucontext.h>

#include "UThreadApp.h"

typedef struct {
    ucontext_t context;
    unsigned char stack[SIGSTKSZ];
} *Context;

ucontext_t *kernelContext;

/*
 * Class:     UThreadApp
 * Method:    newContext
 * Signature: ()J
 */
JNIEXPORT jlong JNICALL Java_UThreadApp_newContext
  (JNIEnv *env, jclass cls) {
    kernelContext = malloc(sizeof(ucontext_t));
    if (kernelContext == NULL)
        RTError("newContext: malloc: couldn't allocate memory for kernelContext");
    return (jlong) kernelContext;
}

/*
 * Class:     UThreadApp
 * Method:    swap
 * Signature: (JJ)V
 */
JNIEXPORT void JNICALL Java_UThreadApp_swap
  (JNIEnv *env, jclass cls, jlong oldc, jlong newc) {
    if (swapcontext((ucontext_t *)oldc, (ucontext_t *)newc) == -1)
        SysError("swap: swapcontext: couldn't switch context");
}

static JavaVM *jvm = NULL;

static void callback(jclass cls, jmethodID mid) {
    if (jvm == NULL)
        return;

    JNIEnv *env = NULL;
    jint res;
    res = (*jvm)->AttachCurrentThread(jvm, (void **)&env, NULL);
    if (res < 0)
        RTError("Attach VM Thread failed");

    /* JVM segfaults here */
    (*env)->CallStaticVoidMethod(env, cls, mid);
    //printf("umain\n");

    (*jvm)->DetachCurrentThread(jvm);
}

typedef void (*uthread_func)();

/*
 * Class:     UThreadApp
 * Method:    newUThread
 * Signature: (Ljava/lang/String;Ljava/lang/String;)J
 */
JNIEXPORT jlong JNICALL Java_UThreadApp_newUThread
  (JNIEnv *env, jclass cls, jstring className, jstring method) {

    /* find the current jvm */
    (*env)->GetJavaVM(env, &jvm);

    Context ctx = malloc(sizeof(*ctx));
    if (getcontext((ucontext_t *)ctx) == -1)
        RTError("newUThread: getcontext");
    sigdelset(&ctx->context.uc_sigmask, SIGALRM);
    ctx->context.uc_link = kernelContext;
    ctx->context.uc_stack.ss_sp = ctx->stack;
    ctx->context.uc_stack.ss_size = SIGSTKSZ;

    const char *str;
    str = (*env)->GetStringUTFChars(env, className, NULL);
    if (str == NULL)
        RTError("newUThread: className: GetStringUTFChars");
    jclass kls = (*env)->FindClass(env, str);
    if (kls == NULL)
        RTError("newUThread: FindClass: class not found");
    (*env)->ReleaseStringUTFChars(env, className, str);

    str = (*env)->GetStringUTFChars(env, method, NULL);
    if (str == NULL)
        RTError("newUThread: method: GetStringUTFChars");
    jmethodID mid = (*env)->GetStaticMethodID(env, kls, str, "()V");
    if (mid == NULL) {
        RTError("newUThread: GetStaticMethodID: method not found");
    }
    (*env)->ReleaseStringUTFChars(env, method, str);

    /* make global references */
    jclass gkls = (*env)->NewGlobalRef(env, kls);
    jmethodID gmid = (*env)->NewGlobalRef(env, mid);

    makecontext((ucontext_t *)ctx, (uthread_func)callback, 2, gkls, gmid);

    return (jlong) ctx;
} 
```

代码创建`kernel`和`main`上下文并准备`umain`方法作为新的用户线程。`swap`切换上下文，保存内核并运行 main。示例应打印：

**主**

接下来

**主要的**

但是在执行 Java 回调时会出现段错误`(*env)->CallStaticVoidMethod(env, cls, mid)`。这种代码很容易用 C 语言编写，但我在尝试用 Java 开发它时遇到了一些微妙的问题。

Apache`javaflow`不是一个选项，因为我发现开发具有时间量子的调度程序非常困难（使用 SIGALRM）。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:18:21.073

您不应该尝试创建`jmethodID`一个全局参考。它是一个方法 ID，而不是参考。编译器应该抱怨这一点。尝试将方法 id 全局保存在您的模块中。

# c# - 如何制作瓷砖线？

> ID：11725707
> 
> 赞同：1
> 
> 时间：2012-07-30T16:33:49.437
> 
> 标签：c#, java, drawing, 2d

例如，我有 2 个瓷砖。这是矩阵：

```
0,0,0,0,2
0,0,0,0,0
1,0,0,0,0 
```

如何自动从 1 到点 2 画一条线？

最终结果将是这样的：

```
0,0,0,1,2
0,1,1,0,0
1,0,0,0,0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:35:36.770

使用[Bresenham 的线算法](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)

# regex - Node.js 和 Mongoose 正则表达式查询多个字段

> ID：11725708
> 
> 赞同：42
> 
> 时间：2012-07-30T16:33:52.620
> 
> 标签：regex, node.js, mongodb, express, mongoose

我想使用相同的正则表达式查询多个字段。在此查询中，我想接受单个文本输入并检查 firstName 和 lastName 字段的结果。我可以使用 mongoose 文档中的正则表达式函数很好地查询单个字段，但是“或”子句的语法给我带来了麻烦。

```
var re = new RegExp(req.params.search, 'i');

app.User.find().or([{ 'firstName': { $regex: re }}, { 'lastName': { $regex: re }}]).sort('title', 1).exec(function(err, users) {
    res.json(JSON.stringify(users));
}); 
```

（我在 node.js 0.6.12 上运行 mongoose 2.7.1）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-30T16:55:18.017

上面的代码适用于多个字段的查询。原来我有一些不好的数据。

# actionscript-3 - 为什么 Flex SolidColorStroke 表现得那么奇怪？

> ID：11725711
> 
> 赞同：1
> 
> 时间：2012-07-30T16:34:01.457
> 
> 标签：actionscript-3, apache-flex, actionscript, air, adobe

我必须解决一个关于 flex 框架的 SolidColorStroke 的问题。场景很简单，我们有一个可见的对象，我们希望它周围有一个边框。[我构建了一个绘制Rect](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/primitives/Rect.html)的图形组件。该 Rect 定义如下

```
object; // the object which should get the border, defined somewhere outside, 
        // just fyi

var borderThickness:Number = 10;    
rect.x = object.x - borderThickness;
rect.y = object.y - borderThickness;
rect.width = object.width + (borderThickness * 2);
rect.height = object.height + (borderThickness * 2);
rectStroke.weight = borderThickness;

//the MXML code
<s:Rect id="rect">
  <s:stroke>
    <s:SolidColorStroke id="rectStroke" />
  </s:stroke>
</s:Rect> 
```

我认为它应该是这样的（只是为了说明，而不是它应该是什么的确切图像，这个插图中的边框正好在对象周围）

![在此处输入图像描述](../Images/bf75b367e9dfaa7a6ddbee1aa36ffcf2.png)

但我错了，因为边框确实覆盖了右侧和底部对象的某些部分。我的下一个想法是，边框的笔画不会在组件内部增长，而是在边框的每一侧等分。我的意思是，当它在组件内部生长并将其放置在 x = 0, y = 0 的位置时，在我的边框左侧示例中，宽度将从 0 到 10。边框越厚得到，它越长到里面，直到只有一个大矩形。

当我说它在边框的每个部分平均增长时，我的意思是如果你将矩形放在 x = 0，y = 0 并且你的边框是 10px 厚，边框的左侧从 -5 变为 5。我希望我的意思很清楚。

所以，正如我之前所说，我认为边框对笔画的两个部分都是一样的。所以我将宽度和高度的计算更改为：

```
rect.width = object.width + borderThickness;
rect.height = object.height + borderThickness; 
```

现在对象的宽度和高度只是增加了borderThickness（每边的一半borderThickness）。我认为现在边框应该完全适合对象（正如我对我的第一个版本所期望的那样......）。

它看起来比第一个版本更好，但仍然覆盖了对象右侧和左侧的一些部分。

经过很长时间思考为什么它不能像我预期的那样工作后，我找到了一个适合我的解决方案。似乎笔画在两侧没有增长到相等的部分，似乎向内增长了 75%，向外增长了 25%。下图显示了我的意思。 ![在此处输入图像描述](../Images/daa75521a04da58451aefcc50c73d4bf.png)

边框内的黄线显示实际边框（当笔划为 1px 时）。您可以看到它现在正好位于笔划的中间，但 75% 来自内部，25% 来自外部。

我的问题是，有人遇到过类似的行为吗？有谁知道为什么会这样。我使用正确吗？或者我做错了什么？

Adobe 的文档并没有真正告诉您 SolidColorStroke 以这种方式工作。如果您需要更多代码，请告诉我。

亲切的问候
马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:52:00.660

```
<s:Group width="250" height="250" x="50" y="50">
    <!--Normally borders grows inside so for ex: top should be equal to -weight of the stroke -->
    <s:Rect top="-10" left="-10" right="-10" bottom="-10">
        <s:stroke>
            <s:SolidColorStroke weight="10" color="0x00FF00"/>
        </s:stroke>
    </s:Rect>

    <s:Rect top="0" left="0" right="0" bottom="0">
        <s:stroke>
            <s:SolidColorStroke weight="1"/>
        </s:stroke>
    </s:Rect>
</s:Group> 
```

作为方法：

```
 private function drawSimpleBorders(obj:UIComponent, tickness:Number = 5):void
        {
            var gr:Graphics = obj.graphics;

            gr.lineStyle(tickness,0,alpha);

            var k:Number = tickness/2;

            gr.drawRect(-k,-k, obj.width+tickness, obj.height+tickness);
        } 
```

我试过了，没有问题，只需发送目标，你就会得到边界。

# .htaccess - .htaccess 规则覆盖友好的 url 行为

> ID：11725712
> 
> 赞同：0
> 
> 时间：2012-07-30T16:34:09.923
> 
> 标签：.htaccess

我正在使用一个名为 Vivvo 的 CMS，vivvo 带有一个默认的 .htaccess 文件，其中包含以下规则：

```
RewriteEngine On

RewriteRule ^sitemap\.xml$ index.php [L]
RewriteRule ^(.*)(\.html|\.htm)$ index.php [L]
RewriteRule ^(.*)(\.rss|\.atom|\.txt)$ index.php [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/?$ index.php [L] 
```

我的 webroot 中有一个文件夹`book/`，我需要从外部访问它。但是，每当我输入 www.mydomain.com/book vivvo 时都会将我发送到自定义的 404 错误页面。

我可以使用什么规则，以使 Web 服务器忽略“RewriteCond”并使用户转到正确的目录？

我试过这个没有成功：

```
 RewriteRule book/ book/index.php [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:43:16.443

试试这个：

```
RewriteEngine on

RewriteCond %{REQUEST_URI} "/book/"
RewriteRule (.*) $1 [L]
# the rest of your rules... 
```

# php - 需要 Yii 用户管理模块 YUM 上的个人资料照片大小调整器 /clipper

> ID：11725722
> 
> 赞同：0
> 
> 时间：2012-07-30T16:34:30.220
> 
> 标签：php, yii, photo, yum

我正在使用 Yii 用户管理模块，但是我在用户上传个人资料头像时遇到了困难，在限制检查照片的大小时，我想给用户更多选项来将他上传的图片剪辑到我设置的大小（最大宽度：200 像素，最大高度：200 像素），有没有人知道一个很好的工具来使用它

# c++ - 如何在 Visual Studio 的 MFC 中的 ListControl 中显示选定的文件名？

> ID：11725728
> 
> 赞同：1
> 
> 时间：2012-07-30T16:34:56.930
> 
> 标签：c++, visual-studio-2010, mfc

我使用列表控件创建了一个网格函数。列表中有两列。数据和名称。

用户应该选择一个文件；文件内的数据应显示在第一列“DATA”中，文件名应显示在第二列“NAME”中。我已经编写了代码，但列表中没有出现任何内容

```
CFileFind finder;
bool bFound;
CString filename = "C:\\ Location\\*.txt";
bFound = finder.FindFile(filename);

if(bFound) 
{

   while(bFound) 
   {
        bFound = finder.FindNextFile();
        if(bFound)
        {
            m_List.AddString(finder.GetFileName()); //This is where the actual data is added 
        }
   }
   CStdioFile files;
   CFileException exp;
   CString strLine;  

   if (files.Open(filename, CFile::modeRead, &exp))
   {
      while(files.ReadString(strLine)){}
   }
}
void CuserspecificationDlg::InsertItems()
{
       HWND hWnd = ::GetDlgItem(m_hWnd, IDC_LIST1);
       // Set the LVCOLUMN structure with the required 
       // column information
         ..
         .. 
         SetCell(hWnd,out,1,1);   // where out is the Cstring variable for edit control  
} 
```

可能是什么错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:43:56.553

[请在此处](http://www.codeproject.com/Articles/796/Using-the-CListBox-control)查看有关如何使用列表框的教程。您可以定义一个类型为 CListBox 的成员变量，该变量通过控件向导映射到您的列表框。

# android - 防止按返回按钮取消操作模式

> ID：11725729
> 
> 赞同：17
> 
> 时间：2012-07-30T16:35:01.270
> 
> 标签：android, android-actionbar

通过调用启动的动作模式`getActivity().startActionMode(calback);`在按下返回按钮后自动取消。有可能避免这种行为吗？在动作模式下的某些情况下按下后退按钮后，我需要执行另一项操作。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-02T13:02:21.200

这是一个有趣的问题。当 ActionMode 处于活动状态时，后退键事件在内部被消耗。该事件**不会**传播到任何一个`onBackPressed()`或`onKeyUp(int keyCode, KeyEvent event)`回调。

幸运的是，你可以使用`dispatchKeyEvent(KeyEvent event)`which 仍然被调用。

```
@Override
public boolean dispatchKeyEvent(KeyEvent event) {
    if(mActionModeIsActive) {
        if (event.getKeyCode() == KeyEvent.KEYCODE_BACK && event.getAction() == KeyEvent.ACTION_UP) {
           // handle your back button code here
           return true; // consumes the back key event - ActionMode is not finished
        }
    }
    return super.dispatchKeyEvent(event);
} 
```

您可能想知道如果您在 ActionMode 中有一个子菜单并使用返回键将其关闭，会出现什么行为。在这种情况下`dispatchKeyEvent()`不会调用，因此您可以安全地使用代码。

上面的代码也适用于 ActionBarSherlock。我发现的唯一问题是在 Android 3.1 设备上使用本机 ActionMode 时，在这种情况下`dispatchKeyEvent()`不会调用。使用 ActionBarSherlock 的 ActionMode 来解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-14T04:25:42.907

建议的解决方案对我不起作用。所以我决定`back`手动创建事件。我在我的片段中需要这个事件，所以我创建`BaseFragment`了我所有的片段都会扩展。

```
public abstract class BaseFragment extends Fragment {

    private ActionModeState actionModeState = ActionModeState.ITEM_NOT_CLICKED;

    protected enum ActionModeState {
        ITEM_NOT_CLICKED, ITEM_CLICKED
    }

    protected void onActionItemClicked() {
        actionModeState = ActionModeState.ITEM_CLICKED;
    }

    protected void onDestroyActionMode() {
        if (actionModeState == ActionModeState.ITEM_NOT_CLICKED) {
            onActionModeBackPressed();
        } else {
            // reset state
            actionModeState = ActionModeState.ITEM_NOT_CLICKED;
        }
    }

    protected void onActionModeBackPressed() { }

} 
```

主要片段

```
public class YourMainFragment extends BaseMapFragment {

    @Override
    public void onActionModeBackPressed() {
        // you code for action mode back button
    }

    private ActionMode.Callback actionModeCallback = new ActionMode.Callback() {

        @Override
        public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
            YourMainFragment.this.onActionItemClicked();
            ....
        }

        @Override
        public void onDestroyActionMode(ActionMode mode) {
            YourMainFragment.this.onDestroyActionMode();
            ...
        }
    }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-04T16:09:08.227

创建您自己的 Window.Callback 并在将事件传递给 AppCompatDelegateImplBase 之前拦截它。

```
@Override
    public boolean onCreateActionMode(ActionMode mode, Menu menu) {
        //default delegate
        final Window window = getActivity().getWindow();
        mWindowCallbackDelegate = new WindowCallbackDelegate(window.getCallback(), this);
        window.setCallback(mWindowCallbackDelegate);
        return true;
    } 
```

在您自己的委托中：

```
@Override
public boolean dispatchKeyEvent(KeyEvent event) {
    return myWindowDelegate.dispatchKeyEvent(event) || mOriginalWindowCallback.dispatchKeyEvent(event);
} 
```

当您销毁操作模式时，恢复对先前委托的引用

```
 @Override
        public void onDestroyActionMode(ActionMode mode) {
        Window.Callback originalWindowCallback = mWindowCallbackDelegate.getOriginalWindowCallback();
        if (originalWindowCallback != null) {
            getActivity().getWindow().setCallback(originalWindowCallback);
        }} 
```

您拥有代表签名：

`public class WindowCallbackDelegate implements Window.Callback {...}`

# c++ - QMetaType 是否与模板化类型一起使用

> ID：11725730
> 
> 赞同：1
> 
> 时间：2012-07-30T16:35:05.020
> 
> 标签：c++, qt

我`typedef ProxyTray<QImage, ImageCaptureService> TrayType;`在我的课上（这*是**QObject*但`ProxyTray`不是QObject）。我在 Signal, Slots 中使用该类型作为参数类型。

 *`qRegisterMetaType`接受这种类型吗？我将如何为参数化类型建模字符串类型名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-14T21:45:12.290

您可以使用以下方式声明模板化元类型：

```
Q_DECLARE_METATYPE_TEMPLATE_1ARG(TemplatedClass)
Q_DECLARE_METATYPE_TEMPLATE_2ARG(TemplatedClass) 
```

例如

```
template<class T>
class Foo { 

};
Q_DECLARE_METATYPE_TEMPLATE_1ARG(Foo) 
```

允许将`Foo<int>`, `Foo<QString>`, etc... 传递给信号和插槽。

```
template<class T, class U>
class Foo { 

};
Q_DECLARE_METATYPE_TEMPLATE_2ARG(Foo) 
```

允许通过`Foo<int, double>`, `Foo<bool, bool>`, 等等...

但是有两个警告：

*   这不是官方 Qt API 的一部分，可能会在某个时候消失。
*   模板类型必须自己注册使用`Q_DECLARE_METATYPE`:也`Foo<Bar>`需要`Bar`注册为元类型（从 Qt 5.6 开始）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T17:47:08.007

是的，模板类型可以在 Qt 信号/槽中使用。由于您已经有一个`typedef`类型，您可以简单地使用`Q_DECLARE_METATYPE`以下示例：

```
#include <QtCore>

template <typename T>
struct Proxy
{
    T data;
};
typedef Proxy<QImage> TrayType;
Q_DECLARE_METATYPE(TrayType)

class Donor : public QObject
{
    Q_OBJECT
public:
    Donor()
    {
        m_proxy.data = QImage(10, 20, QImage::Format_Mono);
    }

    void test()
    {
        emit produce(m_proxy);
    }

signals:
    void produce(const TrayType& proxy);

private:
    TrayType m_proxy;
};

class Acceptor : public QObject
{
    Q_OBJECT
public slots:
    void consume(const TrayType& proxy)
    {
        qDebug() << "The mage size is" << proxy.data.size();
    }
};

int main(int argc, char* argv[])
{
    QCoreApplication app(argc, argv);

    QScopedPointer<Donor> donor(new Donor);
    QScopedPointer<Acceptor> acceptor(new Acceptor);
    QObject::connect(donor.data(), SIGNAL(produce(TrayType)),
                     acceptor.data(), SLOT(consume(TrayType)));

    // Test the signal-slot connection.
    donor->test();
    return app.exec();
} 
```*

# javascript - 我的菜单栏隐藏在 PasteBin 的 javascript 下

> ID：11725732
> 
> 赞同：2
> 
> 时间：2012-07-30T16:35:19.123
> 
> 标签：javascript, css, overlapping

请帮助我正确构建我的菜单栏。我正在 Adob​​e Dreamweaver 中制作导航面板 (Spry MenuBar)。Dreamweaver 提供的代码在我的网站上运行良好，但是当子菜单向下打开时，它隐藏在 PasteBin 的 JavaScript 下，我看不到子菜单项...

我的 MenuBar 的 CSS 代码打开了 - [Pastbin](http://pastebin.com/d3PEn2E9)

我的 MenuBar 的 JAVAScript 代码开启 - [Pastbin](http://pastebin.com/kP4pciSU)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:40:24.557

大多数情况下，这应该与您的 CSS 有关。
将子菜单的 z-index css 属性设置为更高的值。
应该这样做。
如果这不能解决问题，请将菜单的 html、css 和 javascript 粘贴到[http://jsfiddle.net/](http://jsfiddle.net/)

# javascript - Visualstudio 2008 中的拼写检查

> ID：11725734
> 
> 赞同：1
> 
> 时间：2012-07-30T16:35:21.167
> 
> 标签：javascript, asp.net, visual-studio-2008

我在互联网上经历了几件事，但我无法弄清楚 Visual Studio 2008 是否支持拼写检查选项，就像 Visual Studio 2010 确实在工具箱中有拼写检查按钮选项...如果可以有人建议我有一种方法可以使它可用于电子邮件消息（我想在发送电子邮件之前对电子邮件使用拼写检查选项）....Service Pack 2 有什么关系.....

以下是在我的应用程序中发送电子邮件的代码，我需要对邮件正文进行拼写检查，因为这是我们输入文本的唯一地方

```
private void setEmailValues()
    {
        var eml = new EmailInformation
        {
            SendTo = this.ctlDocDelivery.EmailAddresses,
            SendCc = this.ctlDocDelivery.CC,
            SendBcc = this.ctlDocDelivery.BCC,
            Subject = this.ctlDocDelivery.Subject,
            Body = this.ctlDocDelivery.MessageBody,
            SendAsAttachment = (this.ctlDocDelivery.SendAs == DocumentDeliveryControl.SendAsSelections.ATTACHMENT),
            DoNotSend = !this.ctlDocDelivery.ShowEmailPanel
        };

        // Mark as do not send if we're not showing the email panel:
        this.setApproverSecondApproverValues();

        Session[AppConstants.SK_EMAILINFORMATION] = eml;
    }

    private void setApproverSecondApproverValues()
    {
        var acct = (Account) Session[AppConstants.SK_ACTION_ACCOUNT];

        if (ctlDocDelivery.ShowApprovalPanel)
        {
            acct.CurrentRisk.ApprovedById = ctlDocDelivery.ApprovalUnderwriterId;
            acct.CurrentRisk.ApprovedDate = ctlDocDelivery.ApprovalDate;
        }

        if (!this.ctlDocDelivery.ShowSecondApprovalPanel)
            return;

        acct.CurrentRisk.SecondApprovedById = this.ctlDocDelivery.SecondApprovalUnderwriterId;
        acct.CurrentRisk.SecondApprovedDate = this.ctlDocDelivery.SecondApprovalDate;
    }

    private void cleanUpCachedEntities()
    {
        var formSessionKeys = (ArrayList) Session[AppConstants.SK_FORM_SESSION_KEYS];

        foreach (string sessionKey in formSessionKeys)
            Session.Remove(sessionKey);
    }

    private void generatePageScripts()
    {
        if (Page.ClientScript.IsClientScriptBlockRegistered(this.GetType(), "DocumentDelivery"))
            return;

        var sb = new StringBuilder(2048);

        sb.AppendFormat("function {0}_OnClick() {{" + Environment.NewLine, this.ctlDocDelivery.ChkBoxAllReviewsCompletedClientID);
        sb.AppendLine("    var chkBox = document.getElementById('" + this.ctlDocDelivery.ChkBoxAllReviewsCompletedClientID + "');");
        sb.AppendLine("    var btnSendForReview = ig_getWebControlById('" + this.btnSendforReview.ClientID + "');");
        sb.AppendLine("    var btnRelease = ig_getWebControlById('" + this.btnRelease.ClientID + "');");
        sb.AppendLine("    var gbBxDlvryInfo = document.getElementById('" + this.ctlDocDelivery.gbBoxDeliveryInfoClientID + "');");

        sb.AppendLine("    var txtToBox = document.getElementById('" + this.ctlDocDelivery.txtToClientId + "');");
        sb.AppendLine("    var txtCCBox = document.getElementById('" + this.ctlDocDelivery.txtCCClientId + "');");
        sb.AppendLine("    var txtBCCBox = document.getElementById('" + this.ctlDocDelivery.txtBCCClientId + "');");
        sb.AppendLine("    var txtSubBox = document.getElementById('" + this.ctlDocDelivery.txtSubClientId + "');");
        sb.AppendLine("    var txtBodyBox = document.getElementById('" + this.ctlDocDelivery.txtMsgBodyClientId + "');");

        sb.AppendLine("    if (txtToBox !== null) txtToBox.disabled = !chkBox.checked;");
        sb.AppendLine("    if (txtCCBox !== null) txtCCBox.disabled = !chkBox.checked;");
        sb.AppendLine("    if (txtBCCBox !== null) txtBCCBox.disabled = !chkBox.checked;");
        sb.AppendLine("    if (txtSubBox !== null) txtSubBox.disabled = !chkBox.checked;");
        sb.AppendLine("    if (txtBodyBox !== null) txtBodyBox.disabled = !chkBox.checked;");

        sb.AppendLine("    btnSendForReview.setEnabled(!chkBox.checked);");
        sb.AppendLine("    var elemBtnSendForRev = btnSendForReview.getElement();");
        sb.AppendLine("    btnRelease.setEnabled(chkBox.checked);");
        sb.AppendLine("    var elemBtnRel = btnRelease.getElement();");
        sb.AppendLine("");
        sb.AppendLine("    if(btnSendForReview.getEnabled())");
        sb.AppendLine("      elemBtnSendForRev.style.cursor = 'hand';");
        sb.AppendLine("    else");
        sb.AppendLine("      elemBtnSendForRev.style.cursor = 'auto';");
        sb.AppendLine("");
        sb.AppendLine("    var lblNotificationMessage = document.getElementById('" + this.ctlDocDelivery.lblNotificationMessageClientId + "');");
        sb.AppendLine("    var tblNotificationMessage = document.getElementById('" + this.ctlDocDelivery.tblNotificationMessageClientId + "');");
        sb.AppendLine("    if(btnRelease.getEnabled())");
        sb.AppendLine("    {");

        var acct = (Account) this.Session[AppConstants.SK_ACTION_ACCOUNT];
        var displayNotificationMessage = acct.CurrentRisk
                                             .ValidationResults
                                             .Cast<ValidationResult>()
                                             .Any(validationResult => validationResult.ValidationTypeId == (int) EnumValidationType.NOTIFICATION);

        if (displayNotificationMessage)
            sb.AppendLine("             tblNotificationMessage.style.visibility = 'visible';");

        sb.AppendLine("         elemBtnRel.style.cursor = 'hand';");
        sb.AppendLine("    }");
        sb.AppendLine("    else");
        sb.AppendLine("    {");
        sb.AppendLine("         tblNotificationMessage.style.visibility = 'hidden';");
        sb.AppendLine("         elemBtnRel.style.cursor = 'auto';");
        sb.AppendLine("    }");
        sb.AppendLine("");
        sb.AppendLine("    if(gbBxDlvryInfo !== null) gbBxDlvryInfo.disabled = !chkBox.checked;");
        sb.AppendLine("}");

        var chkAllReviewsCompleted = this.Page.FindControl(this.ctlDocDelivery.ChkBoxAllReviewsCompletedUniqueID) as CheckBox;
        chkAllReviewsCompleted.Attributes["onclick"] = this.ctlDocDelivery.ChkBoxAllReviewsCompletedClientID + "_OnClick();";

        this.Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "DocumentDelivery", sb.ToString(), true);
    }
    #endregion
} 
```

# jpa - 使用 JPA 的数据库爬虫

> ID：11725735
> 
> 赞同：2
> 
> 时间：2012-07-30T16:35:21.717
> 
> 标签：jpa, orm, openjpa

我们有构建数据库爬虫的需求。应用程序解析 tnsnames，连接到每个数据库并检索一些信息，如版本、帐户等。我们正在尝试在应用程序的其他部分使用 JPA，并将这些数据持久保存到应用程序的数据库中。

到目前为止，我只看到以编程方式为每个数据库创建一个 EntityManagerFactory。还有其他选择吗？

我们正在使用 Spring，在这种情况下 Spring 有什么好处吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:19:20.777

JPA 显然不是这项工作的正确工具。JPA 允许创建映射众所周知的数据库模式的功能实体。您的工具对它会找到的模式和表一无所知。可能有 0 个表或 5000 个表，名称完全未知。

你需要一个低级的 API 来做你想做的事，比如 JDBC。

不过，您可以使用 JPA 将抓取结果存储在单个模式中。

# mysql - MySQL 守护进程拒绝以“无法启动服务器：绑定 TCP/IP 端口：地址已在使用”开始（不是）。

> ID：11725737
> 
> 赞同：6
> 
> 时间：2012-07-30T16:35:28.977
> 
> 标签：mysql, database, daemon, dedicated-server

好的，伙计们，我已经准备好彻底放弃这件事了，但我想我快到了，只是最后一个错误，服务器启动正常，但是它说 TCP/IP 端口上的绑定已经在使用 :S 这不是真的，因为 mysql 没有运行 :(

错误：

```
bash-4.2$ mysqld
120730 18:31:05 [Note] Plugin 'FEDERATED' is disabled.
120730 18:31:05 InnoDB: The InnoDB memory heap is disabled
120730 18:31:05 InnoDB: Mutexes and rw_locks use GCC atomic builtins
120730 18:31:05 InnoDB: Compressed tables use zlib 1.2.5
120730 18:31:05 InnoDB: Using Linux native AIO
120730 18:31:05 InnoDB: Initializing buffer pool, size = 128.0M
120730 18:31:05 InnoDB: Completed initialization of buffer pool
120730 18:31:06 InnoDB: highest supported file format is Barracuda.
120730 18:31:06  InnoDB: Waiting for the background threads to start
120730 18:31:07 InnoDB: 1.1.8 started; log sequence number 2929794
120730 18:31:07 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
120730 18:31:07 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
120730 18:31:07 [Note] Server socket created on IP: '0.0.0.0'.
120730 18:31:07 [ERROR] Can't start server: Bind on TCP/IP port: Address already in use
120730 18:31:07 [ERROR] Do you already have another mysqld server running on port: 3306 ?
120730 18:31:07 [ERROR] Aborting

120730 18:31:07  InnoDB: Starting shutdown...
120730 18:31:08  InnoDB: Shutdown completed; log sequence number 2929794
120730 18:31:08 [Note] mysqld: Shutdown complete 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T10:13:15.070

使用`lsof -i TCP:3306`或`netstat -lp | grep 3306`找出已经在端口 3306 上监听的内容 - 一定有东西在监听它。

您可以考虑在不同的端口上盯着服务器（编辑 my.cnf 并在那里更改默认端口）。

您可能需要以 root 身份运行它，即`sudo lsof -i TCP:3306`

# asp.net - asp.net - 将列更改为超链接列

> ID：11725744
> 
> 赞同：0
> 
> 时间：2012-07-30T16:35:46.253
> 
> 标签：asp.net

我有以下专栏：

```
 <asp:BoundField DataField="ProID" HeaderStyle-BackColor="#0066cc"  
    HeaderStyle-Font-Size="7pt" HeaderStyle-HorizontalAlign="center"  
    HeaderText="ProID" ItemStyle-HorizontalAlign="center" /> 
```

如何将其变成超链接列？

我尝试了以下方法：

```
 <asp:HyperLinkColumn DataNavigateUrlField="ProID"  
    DataNavigateUrlFormatString="pro.aspx?pro={0}"  
    DataTextField="ProID" HeaderText="ProID" SortExpression="ProID"> 
    <HeaderStyle HorizontalAlign="Left" /> 
    <ItemStyle HorizontalAlign="Left" /> 
    </asp:HyperLinkColumn> 
```

不知道为什么它给我这个信息。我的目标只是将该列变成一个超链接，这样我就可以让用户访问指定的页面。

但获取 HyperLinkColumn' 不是已知元素。如果网站中存在编译错误，则可能会发生这种情况

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:40:03.700

采用 `HyperLinkField`

```
<asp:HyperLinkField DataTextField="ProID" DataNavigateUrlFields="ProID" 
        DataNavigateUrlFormatString="pro.aspx?pro={0}" Text="ProID" /> 
```

# php - 为用户存储复选框值和输出结果

> ID：11725745
> 
> 赞同：1
> 
> 时间：2012-07-30T16:35:58.680
> 
> 标签：php, mysql, checkbox

我有一个复选框，我希望能够拥有它，以便它控制变量构造，0 表示无构造，1 表示构造。并输出任何当前值，以便用户可以查看是否检查了构造。我意识到复选框不会发布“未选中”的值，我已经尝试了很多事情。我不确定我的逻辑在哪里有缺陷。

```
<input name="construction" type="checkbox" id="construction" onChange="this.form.submit();" <?php if ($row_config['construction'] == 1) { echo ' checked'; } else { echo ' unchecked'; } ?>>

<?php
if ($_POST) {
    // 0 = off
    // 1 = on
    $constr = (isset($_POST['construction']) && $_POST['construction'] == "on") ? 1 : 0; 
    mysql_query("UPDATE config SET construction = '$constr'") or die(mysql_error());
    redirect('index.php');
}
?> 
```

我认为问题出在将数据输出给用户的某个地方。

固定版本，谢谢大家！

```
<?php
require('framework/ui_framework.php');
page_protect();

$config = mysql_query("SELECT construction FROM config") or die(mysql_error());
$row_config = mysql_fetch_assoc($config);

$isChecked = false;
$constr = 0;
if(isset($_POST['construction'])){
    if($_POST['construction']) {
        $isChecked = true;
        $constr = 1;
        mysql_query("UPDATE config SET construction = '".$constr."'") or die(mysql_error());
    }
} else {
    $isChecked = false;
    $constr = 0;
    mysql_query("UPDATE config SET construction = '".$constr."'") or die(mysql_error());
}
?>

<input name="construction" type="checkbox" id="construction" onChange="this.form.submit();" <?php if($isChecked) echo "checked='checked'"; ?> value="on"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:39:33.727

你从来没有为你的复选框设置值，所以你的逻辑`(isset($_POST['construction']) && $_POST['construction'] == "on")`在检查时会失败`$_POST['construction'] == "on"`

如果只是查看复选框是否被选中的问题，只需使用`isset()`，不要担心检查值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T16:39:42.257

你实际上并没有给你的复选框一个值。`value="on"`从下面的 PHP 来看，您的复选框的属性列表中似乎缺少您。此外，`else echo 'unchecked'`复选框中的设置是不必要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T17:17:08.200

尝试这个

你必须使用 isset($varname) 检查变量

```
<?php
  $isChecked = false;
  $constr = 0;
  if(isset($_POST['construction'])){
    if($_POST['construction'] == 'on'){
      $isChecked = true;
      $constr = 1;
    }      
    mysql_query("UPDATE config SET contruction = '$constr'") or die(mysql_error());

  }

?>

<!doctype html>

<html>
  <head>

  </head>

  <body>
    <form action='test3.php' method='POST'>
      <input name="construction" type="checkbox" id="construction" onChange="this.form.submit()" <?php if($isChecked) echo "checked='checked'"; ?> />
      <?php

      ?>
    </form>     
  </body>
</html> 
```

# objective-c - 用 Objective C 在大文件中查找和替换，计算替换的次数

> ID：11725749
> 
> 赞同：0
> 
> 时间：2012-07-30T16:36:21.090
> 
> 标签：objective-c, regex, xcode, macos

我需要使用目标 C 在文件中执行查找和替换（使用正则表达式）。

我目前的解决方案是这样的：

```
NSString *string = [NSString stringWithContentsOfFile:sourceFile encoding:NSStringEncodingConversionAllowLossy error:nil];
NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:[toFind stringValue] options:NSRegularExpressionCaseInsensitive error:&error];

NSString *modifiedString = [regex stringByReplacingMatchesInString:string options:0 range:NSMakeRange(0, [string length]) withTemplate:[toReplace stringValue]];
[modifiedString writeToFile:sourceFile atomically:YES] 
```

这个解决方案有两个问题：

1 - 我无法替换出现的次数

2 - 我认为在加载近 300MB 的文件时这并不是很快，因为我将整个文件作为字符串加载到内存中。

我怎样才能获得替换的数量，并优化我的解决方案，即使是大文件也能获得良好的性能？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:52:01.043

`numberOfMatchesInString`在替换匹配项之前调用将让您知道某个事件将被替换多少次。与其将整个文件加载到内存中，不如逐个进行并保留一个计数器，将结果添加`numberOfMatchesInString`到其中。

# bash - 为什么 for 循环中的 BASH 命令不起作用

> ID：11725750
> 
> 赞同：0
> 
> 时间：2012-07-30T16:36:20.890
> 
> 标签：bash, for-loop

我有一个简单的代码是：

```
#!/bin/bash
#LaTex code generator for figures.
ls *.pdf > pdfs.file
ls *.ps > ps.file

pwd=$(pwd)

for i in {1..2}
do
# var=$(awk 'NR==$i' 'pdfs.file')
 echo $pwd
 echo $pwd > testfile
done 
```

为什么 for 循环中的命令不起作用？$pwd 没有回显，也没有创建测试文件。

我在终端中尝试了这些没有 for 循环的命令，它们工作正常。

我的 bash 文件由`chmod +x bashfile.sh`

我想做的是：

*   查找 pdfs 或 eps 文件并使用它们的文件名填充 pdfs.file 和 eps.file。
*   逐行遍历并获取这些文件名并附加到 $pwd。
*   然后将 $pwd$var 附加到 Latex 中的 include graphics 命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:00:18.650

我不确定你做错了什么，但这对我来说很好：

```
for i in {1..2}; do
    echo $PWD
    echo $PWD > /tmp/testfile
done

echo "File contents: $(cat /tmp/testfile)" 
```

这成功返回以下内容：

> /tmp
> /tmp
> 文件内容：/tmp

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:18:18.853

您是否使用 Windows 编辑器编写了 bash 文件？也许您对线路终结器有疑问。试试`dos2unix bashfile.sh`。

# c++ - 使用控件/工具箱项或任何其他方式添加子菜单？

> ID：11725751
> 
> 赞同：1
> 
> 时间：2012-07-30T16:36:20.963
> 
> 标签：c++, visual-studio-2010

我有一个包含 4 个菜单项的菜单。第 4 个菜单项将有多达 3 个子菜单项。

我在 VS2010 工作。我正在寻找将子菜单添加到 VS 2010 中已经存在的菜单中。有没有办法可以使用控件/工具箱项或 VS 中的任何其他替代方法来做到这一点？

# c# - ASPxGridView、ITemplate 和 Eval

> ID：11725752
> 
> 赞同：1
> 
> 时间：2012-07-30T16:36:28.350
> 
> 标签：c#, asp.net, devexpress, itemplate

如何在**c#**中为 AXPxGridViewDataTextColumn 创建一个模板而不使用任何标记并使用 Eval 来显示 DataItem 值？

- 我遇到的问题是字符串 "<%#Eval("dataTableField1")%>" 显示在每一行的 GridView 中，而不是适当的值。

这是我尝试的一个例子：

```
 public override void DataBind()
    {
        ...
        GridViewDataTextColumn myCol = new GridViewDataTextColumn();
        myCol.Caption = "col1";
        myCol.FieldName = "dataTableField1";
        myCol.DataItemTemplate = new ColumnDataItemTemplate();
        theGridView.Columns.Clear();
        theGridView.Columns.Add(myCol);
        theGridView.DataSource = AdjustDataSource();
        theGridView.DataBind();
        ...
    }

    public class ColumnDataItemTemplate : ITemplate
    {
        public void InstantiateIn(Control container)
        {
            GridViewDataItemTemplateContainer Container = (container as GridViewDataItemTemplateContainer);
            LiteralControl lit = new LiteralControl("<div id=\"hr\" style=\"height:100%\"><%#Eval(\"dataTableField1\")%></div>");
            Container.Controls.Add(lit);
        }
    } 
```

这是我想对从此[链接](http://www.devexpress.com/Support/Center/p/Q273639.aspx)获取的行高进行的操作的示例：

```
<dx:GridViewDataTextColumn FieldName="Description" VisibleIndex="3">
    <DataItemTemplate>
        <div id="hr" style="height:100%">
            <%#Eval("Description")%>
        </div>
    </DataItemTemplate>
</dx:GridViewDataTextColumn> 
```

此[文档链接](http://help.devexpress.com/#AspNet/DevExpressWebASPxGridViewGridViewTemplates_DataRowtopic)显示了在标记中使用模板的类似示例，但我想在后面的代码中执行此操作。

这是创建模板的[链接](http://msdn.microsoft.com/en-us/library/y0h809ak%28VS.71%29.aspx)。

提前致谢，

索恩海

**编辑：** 通过将模板分配移动到 CustomColumnDisplayText 事件，我能够正确显示第一个元素，但 ASPxGridView 中显示的所有其他元素都显示 Eval 字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:57:24.523

我有 2 个其他解决方案，但我删除了它们，因为我认为这是最好的（如果有任何其他建议/改进，我将不胜感激）：

```
 public override void DataBind()
        {
             ...
             GridViewDataTextColumn myCol = new GridViewDataTextColumn();
             myCol.Caption = "col1";
             myCol.FieldName = "dataTableField1";
             myCol.DataItemTemplate = new ColumnDataItemTemplate();
             theGridView.Columns.Clear();
             theGridView.Columns.Add(myCol);
             theGridView.DataSource = AdjustDataSource();
             theGridView.DataBind();
             ...
        }

        public class ColumnDataItemTemplate : ITemplate
        {
            public void InstantiateIn(Control container)
            {
                GridViewDataItemTemplateContainer Container = (container as GridViewDataItemTemplateContainer);
                LiteralControl lit = new LiteralControl("<div id='hr' style='height:100%; font-size:x-large;'>" + DataBinder.Eval(Container.DataItem, Container.Column.FieldName) + "</div>");
                Container.Controls.Add(lit);
            }
        } 
```

在此[链接](http://help.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_CustomColumnDisplayTexttopic)上，我找到了不使用该事件的原因：“不应为模板列处理 CustomColumnDisplayText 事件。”

此[链接](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewGridViewDataColumn_DataItemTemplatetopic)有助于 DataBinder.Eval 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:59:31.950

这是一个示例，但我的是与数据库绑定的，我通常使用 EditTemplte

```
</EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="BSA" SortExpression="BSA">
                <ItemTemplate>
                    <asp:Label ID="lblBSA" runat="server" Text='<%# Bind("BSA") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate> 
```

# css - Tumblr 主题 css 拼图

> ID：11725753
> 
> 赞同：0
> 
> 时间：2012-07-30T16:36:29.283
> 
> 标签：css, tumblr

首先，让我为缺乏 SSCCE 道歉。我在这方面真的没有足够的专业知识来弄清楚什么是相关的，什么是不相关的。

简而言之，问题在于在运行相同分辨率 (1366x768) 的两台不同计算机上，我女朋友的 tumblr 主题的顶部边框（内容周围）在一个或另一个屏幕上偏离了大约 1-3 个像素。我们已经尝试使用像素、百分比和 em 测量，但无济于事。一个系统在 Ubuntu 11.10 上运行 chromium，另一个在 Windows 7 上运行 Chrome。目前，错误的是 Windows 7 系统。

这是我屏幕上的样子：

![错位示例](../Images/21be4f51199299048b8fa1fc564ae85b.png)

希望它应该是什么样子很明显。

这是重要的片段：

```
#header {
width: 650px;
height: 10px;
background: url('http://24.media.tumblr.com/tumblr_m7nz4c8UrU1rnrxu1o1_1280.png') no-repeat;
margin-left: 34.40em;
margin-top: 30px;
} 
```

我想特别注意margin-left 规则，因为如果更改，该规则会影响边框的对齐方式。

最后，这是一个指向整个页面、标记和所有内容的 pastebin 链接，以防有其他相关内容：http: [//pastebin.com/MfxYgv0C](http://pastebin.com/MfxYgv0C)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:52:09.300

尝试对标题和内容使用包装器 div，并将左边距设置为包装器。

# java - 更改我的位置 IP

> ID：11725757
> 
> 赞同：-1
> 
> 时间：2012-07-30T16:36:42.033
> 
> 标签：java

java中是否有任何实用程序或类可以更改我的机器IP地址。就像我坐在加利福尼亚并向用户展示我实际上坐在伦敦一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:40:09.697

**1.**首先这个问题有`nothing to do with Java.`

**2.**其次，这种技术被称为`IP spoofing`。

**3.**另一种技术是`IP hopping.`

**请参阅 Cisco 的此链接**：

[http://www.cisco.com/web/about/ac123/ac147/archived_issues/ipj_10-4/104_ip-spoofing.html](http://www.cisco.com/web/about/ac123/ac147/archived_issues/ipj_10-4/104_ip-spoofing.html)

# javascript - jQuery 脚本将我带到页面顶部。如何修改这个？

> ID：11725759
> 
> 赞同：0
> 
> 时间：2012-07-30T16:36:45.787
> 
> 标签：javascript, jquery, html

如何修改此代码，以便当我单击它时，它不会将我带到页面顶部？

```
<script>
    $(document).ready(function () {
        $(".cont").click(function () {
            $("#feed").load('footer.php');
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:39:00.233

您需要监听事件并阻止其默认操作。

```
$(document).ready(function () {
    $(".cont").click(function (e) {
        e.preventDefault();
        $("#feed").load('footer.php');
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T16:39:26.920

通过添加`return false`或`e.preventDefault()`

```
<script>
    $(document).ready(function () {
        $(".cont").click(function (e) {
            e.preventDefault();
            $("#feed").load('footer.php');
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:40:44.457

您与我们共享的代码不会将您带到页面顶部。

你可能还有这样的东西：

```
<a href="#" class="cont"> 
```

这会将您带到页面顶部，因为这是 URI`#`指向的位置。

有[一个更明智的 URI](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)。可能：

```
<a href="footer.php" class="cont"> 
```

然后停止脚本中的默认行为：

```
 $(".cont").click(function (e) {
        $("#feed").load(this.href);
        e.preventDefault();
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T16:43:47.480

利用：

```
$(document).ready(function () {
    $(".cont").click(function (e) {
        e.preventDefault();
        $("#feed").load('footer.php');
    });
}); 
```

或者`href`写一些类似的东西`javascript:void(0);`

# javascript - 编辑特定的内联 's via javaScript

[问问题](https://stackoverflow.com/questions/ask)问问题 2012-07-30T16:36:51.323537 次This question shows research effort; it is useful and clear1This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

I have:

```
<style id=inlinestyle>
 .container {
 height: 0;
 }
 .container li {
 height: 10px;
 }
 .container li a {
 color: pink;
 }
</style> 
```

I would like to be able to target and edit `.container li a' without losing the other styles i have.

```
 $('#inlinestyle').html('#poop { color: red }'); 
```

This won't work as i will lose everything in there.

Worth mentioning that i'll have an infinity amount of elements being created so inline styles aren't an option.

[javascript](/tags/javascript "show questions tagged 'javascript'")[jquery](/tags/jquery "show questions tagged 'jquery'")[html](/tags/html "show questions tagged 'html'")[css](/tags/css "show questions tagged 'css'")4

## 7 回答 7

This answer is useful7

wouldn't it just be better to target the element you want to modify ?

```
$('#poop').css('color','red'); 
```

And if you'd like to add more than one property to the css of that precise element just do:

```
$('#poop').css({
 'color' : 'red',
 'font-size' : '16px',
 ......
}); 
```

于 2012-07-30T16:39:28.330 回答This answer is useful2

```
$('#inlinestyle').append('.container li a { /* css here */}'); 
```

于 2012-07-30T16:39:10.837 回答This answer is useful1

```
$('.container li a').css("color", "blue"); 
```

于 2012-07-30T16:43:23.713 回答This answer is useful0

Try something like `$('#inlinestyle').append(' #poop { color: red; }');` or `$('#poop').css('color', 'red');`

于 2012-07-30T16:40:03.707 回答This answer is useful0

```
$('#inlinestyle').append('#poop { color: red }'); 
```

于 2012-07-30T16:40:10.157 回答This answer is useful0

You shouldn't edit your original CSS via JS, but add the desired rules the element which is to get styled:

```
/* What about: */
$( '.container li a' ).css( 'property', 'value' );
/* or */
$( '.container li a' ).css( {
 'property1': 'value1',
 'property2': 'value2'
} ); 
```

于 2012-07-30T16:40:22.853 回答This answer is useful0

This should be more or less what you're looking for: [http://jsfiddle.net/ZH9JW/2/](http://jsfiddle.net/ZH9JW/2/)

The problem with this is that it's a very rigid regular expression; one space more or less, or no newline characters and the regular expression will fail. You can solve this ofcourse, but then you're starting to build a CSS parser. I recommend against using my solution.

Maybe this is something you could use? It's probably faster than `$("#poop").css("color", "red");` if you're creating so many elements, but a bit of a hack:

```
var newStyle = $("<style/>").html(".container li a { color: red }");
$("body").append(newStyle); 
```

This `style` element should by the way ideally be in the DOM after your original `style` element, or have more specific CSS.

于 2012-08-02T11:04:59.403 回答

#### Related

[1](/questions/15656088 "Question score (upvotes - downvotes)")[c++ - openGL中具有大存储空间的文本文件](/questions/15656088)[2](/questions/15656089 "Question score (upvotes - downvotes)")[c# - 从文本文件中读取一行并返回](/questions/15656089)[1](/questions/15656090 "Question score (upvotes - downvotes)")[jquery - 使用 Ajax 获取网站的一部分并实现它](/questions/15656090)[1](/questions/15656093 "Question score (upvotes - downvotes)")[c# - 对多个字段的 solr 查询不起作用](/questions/15656093)[2](/questions/15656097 "Question score (upvotes - downvotes)")[node.js - q.js：我可以停止一个函数的执行，直到一个promise被实现？](/questions/15656097)[1](/questions/15656106 "Question score (upvotes - downvotes)")[powershell - 重新启动 PC 并使用自定义消息写入事件日志](/questions/15656106)[0](/questions/15656111 "Question score (upvotes - downvotes)")[sql - 选择所有字段以及 LINQ VB.NET 中的一些新字段](/questions/15656111)[1](/questions/15656112 "Question score (upvotes - downvotes)")[c# - 如何仅根据位置获取推文？](/questions/15656112)[1](/questions/15656113 "Question score (upvotes - downvotes)")[android - 动画方法 applyTransformation 在我单击任何布局之前不会触发](/questions/15656113)[3](/questions/15656117 "Question score (upvotes - downvotes)")[sql - 如何使用 SQL Server 对分隔字符串中的数字求和](/questions/15656117)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：11725760
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# visual-studio-2010 - 从全屏调试应用程序切换到 Visual Studio

> ID：11725773
> 
> 赞同：1
> 
> 时间：2012-07-30T16:37:25.070
> 
> 标签：visual-studio-2010

我调试了一些始终处于全屏模式的应用程序。

因此，当发生一些错误时，我必须切换到 Visual Studio。但是我不能或者我希望我不知道如何正确地做到这一点，因为如果我使用鼠标/键，我不能通过众所周知的经典方式来做到这一点，但有时它会发生。

我的问题是当应用程序处于全屏模式时由于调试错误而停止时，如何从调试的应用程序切换到 Visual Studio？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:56:15.573

很多令人沮丧的时间花在`Alt+Tab`桌面上，打开任务管理器，强制关闭正在运行的应用程序。我说“不断地”，因为有时它不起作用。

我的建议：在窗口模式下使用正确分辨率的窗口进行调试配置。仅全屏运行发布配置。您应该有任何异常的致命错误关闭程序。您会在“崩溃到桌面”的视频游戏中注意到这一点。

# perl - 无法将方法 next_sibling 或 next_elt 与使用 XML::Twig 的 twig_handlers 一起使用

> ID：11725775
> 
> 赞同：1
> 
> 时间：2012-07-30T16:37:31.373
> 
> 标签：perl, xml-parsing, xml-twig

我还是新手[`XML::Twig`](https://metacpan.org/module/XML%3a%3aTwig)。

从主程序中我寻找具有属性的元素`@method="create"`

在子例程`player`中，我想找到*下一个*带有属性的元素/兄弟`@method="modify"`。

这两种方法都在子程序`player`中失败并出现错误`Can't call method "gi" on an undefined value`

```
my $modif1=$valeur->next_sibling('[@method="modify"]')

my $modif2=$valeur->next_elt('[@method="modify"]')->parent 
```

input.xwo 示例：

```
<top id="World">

  <middle id="France" method="create">
  </middle>

  <middle id="Germany" method="modify">
  </middle>

</top> 
```

我的简单代码：

```
#!/bin/perl -w
use warnings;
use XML::Twig;

my $twig= new XML::Twig( 
  twig_handlers => {
    '[@method="create"]' => \&player
  } 
);                    

$twig->parsefile("input.xwo");
$twig->purge;  

sub player { 

  my ($twig, $valeur) = @_;                     

  my $modif1 = $valeur->next_sibling('[@method="modify"]');
  my $modif2 = $valeur->next_elt('[@method="modify"]')->parent;
  print "\nnextELT=" . $modif->gi . "\n";
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T17:05:10.067

请*始终* `use strict`在程序的顶部，并`my`在第一个使用点使用声明变量。两者`use warnings`和`-w`命令行选项都没有意义。第一个是优选的。

当`<middle method="create">`调用元素的树枝处理程序时，您需要的兄弟姐妹`<middle method="modify">`尚未处理。找不到它，因为它还没有在`XML::Twig`解析树中。

*您必须读取整个 XML 结构并在之后对其进行处理，或者为包含*`create`和元素的元素编写一个处理程序`modify`。

该程序执行后者。

```
use strict;
use warnings;

use XML::Twig;

my $twig= XML::Twig->new(
  twig_handlers => {
    top => \&player
  } 
);                    

$twig->parsefile('input.xwo');
$twig->purge;  

sub player { 

  my ($twig, $valeur) = @_;                   

  my $create = $valeur->first_child('[@method="create"]');
  return unless $create;

  my $modify = $create->next_sibling('[@method="modify"]');
  return unless $modify;

  printf "\nnextELT = %s\n", $modify->gi;

  $twig->purge;
} 
```

* * *

**更新**

此替代方法读取整个 XML 树，然后从中提取数据。它首先在树中查找属性等于的*所有*元素，然后查找每个元素的以下具有属性的兄弟。`method``'create'``method``'modify'`

```
use strict;
use warnings;

use XML::Twig;

my $twig= XML::Twig->new;

$twig->parsefile('input.xwo');

my @creates = $twig->get_xpath('//*[@method="create"]');

foreach my $create (@creates) {
  my $modify = $create->next_sibling('[@method="modify"]');
  next unless $modify;
  printf "\nnextELT = %s\n", $modify->gi;
} 
```

# authentication - 避免虚假服务器响应

> ID：11725782
> 
> 赞同：0
> 
> 时间：2012-07-30T16:38:07.337
> 
> 标签：authentication, client, communication

在接下来的几行中，我将解释我担心的技巧，并解释我的确切问题

**技巧：** 过去我曾经使用虚假服务器响应来破解程序

1.  将程序（客户端）的连接循环回我的计算机
2.  嗅探真实服务器的登录成功包
3.  创建一个伪造的服务器（监听器），它监听来自客户端的连接并发回伪造的响应（我嗅探到的）

但是自从他们改变了一些东西以来并没有很多时间，我的把戏不再奏效了

（每次我尝试发送一些嗅探的登录数据包时，客户端都会崩溃并且不再接受虚假的服务器响应）

* * *

**问题：** 现在我正在创建自己的客户端服务器通信，我想防止我的客户端被虚假的服务器响应技巧所愚弄（任何人都可以使用任何用户名和密码登录）并提供来自窃听者的最佳安全性

（如何确保此数据包来自我的服务器，而不是来自其他仅发送嗅探登录成功数据包以欺骗我的客户端并登录的假服务器）（以另一种方式如何防止客户端被欺骗但假服务器（模拟器））

**注意：**我的意思是防止不要让它 100% 安全，因为一切都可以被破解，但要避免这种破坏整个项目的愚蠢事情

* * *

我希望我没有偏离重点，但我只是想清楚地解释每一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:56:01.933

如果我了解您的目的，那么使用 TLS 是一种方便的方式，可以让您确信客户端正在连接到正确的一方。

通过根据本地根受信任证书或对等受信任证书验证服务器的证书，您可以验证服务器的证书是由“受信任的”第三方颁发的，并且连接的主机名是预期的一方。如果此类验证失败，您可以阻止与服务器的通信。

当然，这仅在客户端没有完全被入侵时才有用。

以下内容可能会对您有所帮助：

[了解身份验证](http://www.geocerts.com/ssl/understanding_authentication)
[传输层安全性](http://en.wikipedia.org/wiki/Transport_Layer_Security)

如果设置正确，SSL 可以确保客户端连接到正确的服务器。它与用于确保您将登录信息提交到 stackoverflow 或 gmail 或大多数其他网站的技术相同。服务器将其证书发送给客户端。客户端将获取该证书并使用一些数学魔法来确保它是由机器受信任存储中的一个证书颁发的。嵌入在该证书中的是主机名。如果主机名与客户端连接的内容匹配，并且证书是由受信任存储中的证书颁发的，则将建立连接。由于您信任受信任存储中的实体以知道他们向谁颁发证书，因此无法伪造服务器证书。但是，如果客户端运行的机器完全受到攻击，他们可以将自己的受信任证书安装到受信任的存储中，从而允许他们假装是从受感染机器连接的客户端的服务器。在这种情况下反编译源代码将不允许攻击者伪装成服务器。您利用 SSL 的最简单方法是让您的服务器作为 Web 服务运行。我确信那里可能也有实现 TLS 的库。

# facebook - Facebook 页面标签内容宽度设置为 810px，水平和垂直裁剪

> ID：11725785
> 
> 赞同：0
> 
> 时间：2012-07-30T16:38:10.923
> 
> 标签：facebook, width, facebook-canvas

我正在尝试使用自定义应用程序创建 Facebook 页面选项卡，但我无法弄清楚如何正确设置宽度。内容为 810 像素，页面选项卡宽度设置为宽（810 像素），我尝试将画布宽度/高度设置为固定和流动，这两种设置似乎都没有改变：

[http://i.stack.imgur.com/ROi0P.png](http://i.stack.imgur.com/ROi0P.png)

但是我在页面选项卡上遇到了水平滚动条：

[https://www.facebook.com/NTCLA/app_270240146413176](https://www.facebook.com/NTCLA/app_270240146413176)

我怎样才能摆脱滚动条？

*****更新*****

经过一番摸索，我找到了答案。这是给任何有同样问题的人！

[http://www.hyperarts.com/blog/facebook-iframe-apps-getting-rid-of-scrollbars/](http://www.hyperarts.com/blog/facebook-iframe-apps-getting-rid-of-scrollbars/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:12:27.433

为了节省一些可能仍然有问题的窥视时间，在超艺术代码之后，我能够通过将溢出 css 添加到 html 和 body 来杀死右侧的垂直条。

# java - 如何在我的代码中实现线程安全

> ID：11725794
> 
> 赞同：0
> 
> 时间：2012-07-30T16:39:09.183
> 
> 标签：java, concurrency, thread-safety

假设我有一个带有单个成员***消息***（字符串）的类**Base 。**另一个类**BaseHandler**扩展了这个**Base**类。在这个处理程序中，我有一个***print***方法，它为基数设置一个值并打印它。在打印调用结束时，我将消息设置为空。当我创建 50000 个线程并运行处理程序的打印方法时，我偶尔会收到空指针异常。

 ******问题：
为什么在显式赋值时会抛出空指针异常？
在这种情况下，每个线程将如何实例化 Base？
解决方案会将 Base.message 标记为 volatile 并删除空分配吗？（换句话说，如何在***Base.message上实现线程安全***

请看下面的代码：

```
public class Base {
     public String message;
 }

public class BaseHandler extends Base{

    protected static final Object lock = new Object();

    public void printMessage( ){

        synchronized ( lock ) { //This block is thread safe
            System.out.println( message.toUpperCase( ) );
            message = null;
        }
    }

}

public class Test {   
    public static void main(String[] args){       
        final BaseHandler handler = new BaseHandler();
        for (int i = 0; i < 50000; i++) {
            Runnable task = new Runnable(){
                @Override 
                public void run( ) {
                    handler.message = "Hello world! ";
                    handler.printMessage( );
                }                
            };
            Thread worker = new Thread(task);
            worker.setName(String.valueOf(i));
            worker.start();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T16:43:41.340

> 为什么在显式赋值时会抛出空指针异常？

想象以下执行：

*   线程1：`handler.message = "Hello world! ";`
*   线程2：`handler.message = "Hello world! ";`
*   Thread1：获取锁，打印并将消息设置为 null
*   thread2：获取锁，尝试打印但`message.toUpperCase()`抛出 NPE。

您的问题是下面的 2 行不是原子的：

```
handler.message = "Hello world! ";
handler.printMessage(); 
```

**解决方案**

有几种选择，具体取决于您要实现的目标：

*   您可以将这 2 行放在一个`synchronized(lock)`块中，以使 2 个调用原子
*   您可以将参数传递给 printMessage 方法：`printMessage(message)`，删除共享变量问题
*   您可以在每次调用时创建一个类的实例，同时消除共享变量问题
*   ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T16:45:31.967

这是你的问题：

```
handler.message = "Hello world! ";
handler.printMessage( ); 
```

这两个操作不是原子的，只是原子`printMessage()`的。所以这是偶尔发生的事情：

1.  线程 A 修改`message`字段
2.  线程 B 也启动并修改它
3.  线程B继续运行，调用`printMessage()`
4.  `printMessage()`在线程 B 中完成并清理`message`字段
5.  线程 A 恢复并调用`printMessage()`. 灾难发生

如果您希望您的代码是线程安全的，那么这两个操作需要是原子的。很难给出建议，因为您的代码中还有其他几个问题：公共可变字段、可见性问题、锁定是不必要的静态......

如果您可以修改此伪代码，我会简单地`message`作为`printMessage()`（听起来很合理）的参数传递，而忘记线程安全和多线程。该代码将是安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T16:47:28.463

您正在锁定读取，但您需要在更新值时锁定。您的锁需要包含两者以实现线程安全：即锁定这些。

```
handler.message = "Hello world! ";
handler.printMessage( ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T16:48:35.260

消息的**设置在您的代码中不是线程安全的......**

```
public class MyClass implements Runnable{

BaseHandler handler = new BaseHandler();

public synchronized void go(){

          for (int i = 0; i < 50000; i++) {

                    handler.message = "Hello world! ";
                    handler.printMessage( );
                }                

   }

} 
```

**现在让您按原样使用 Base 和 BaseHandler ... 对 Test 类进行少量更改**

```
public class Test {   
    public static void main(String[] args){       

            Thread worker = new Thread(MyClass);
            worker.setName(String.valueOf(i));
            worker.start();
        }
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T16:50:38.220

您需要确保共享可变对象上的读取和写入操作的线程安全。在您的情况下，您正在执行不安全的写入。此外，读取和写入需要共享同一个锁。

```
public synchronized void setMessage(String msg) {
        this.message = msg;
    }

    public synchronized String getMessage() {
        return message;
    }
} 
```

请注意，这里我隐式使用对象实例作为锁。使用不同的对象作为同一个可变对象的锁是一个常见的错误。

然后，您的 BaseHandler 类将如下所示：

```
public class BaseHandler extends Base {

    public synchronized void printMessage( ) {
        if (getMessage()!=null) {
            System.out.println( getMessage().toUpperCase( ) );
            setMessage(null);
        }
    }
} 
```

这两种方法使您的 Base-BaseHandler 类层次结构对任何客户端都是线程安全的。这意味着使用您的对象的客户端不需要使用同步。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-31T00:10:05.250

如果您只是将状态作为参数在堆栈上传递，您正在使用脆弱的扩展和共享的可变状态来实现更简单的操作。让 printMessage 将消息作为参数，你就解决了所有这些问题。

```
public void printMessage(final String message){
    System.out.println( message.toUpperCase( ) );
} 
```

现在您只需要处理*实际*传递了 null 的情况。******

# mysql - mysql获取总和的行数

> ID：11725811
> 
> 赞同：0
> 
> 时间：2012-07-30T16:39:53.643
> 
> 标签：mysql, sum

尝试选择您自己以外的部落中玩家得分的总和，以确定您的部落排名。

它返回的行数（大于您的部落分数）是您的部落位置。如果它返回 3 行，那么您的氏族排在第四位。

我的 sql（不起作用）：

```
SELECT sum(score) as sum_score
FROM players WHERE sum_score  > " .$our_clan_score . " 
AND clan !=0 AND clan != $our clan 
GROUP BY clan 
```

# `players`桌子

```
id    name    score    clan
------------------------------
4     Bill    455      2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:45:33.903

可能是（无法检查）

```
SELECT sum(score) as sum_score
FROM players WHERE  clan !=0 AND clan !=  ".$our_clan."  
GROUP BY clan
HAVING sum_score  > " .$our_clan_score . " 
```

# perl - 在 Perl 中按值比较数组的两个哈希值

> ID：11725816
> 
> 赞同：0
> 
> 时间：2012-07-30T16:40:07.373
> 
> 标签：perl

我对 Perl 很陌生，需要快速完成一项任务。任何帮助表示赞赏！

我有两个数组散列如下：

```
Hash 1
-------
w: ['A','B','C']
e: ['P','Q','R']

Hash 2
-------
w:['A','B','C']
e:['P','Q','O']
r:['S','T'] 
```

语境：

1.  我想找到相同键的值的差异（例如，对于相同的键'e'，哈希 1 没有来自哈希 2 的值'O'。

2.  找出键的不同。（例如，哈希 1 中不存在“r”。

我将一些代码放在一起，但它会从两个哈希中检查完整行的确切值。例如，如果我在哈希 1 中有 'A'、'B'、'C' 用于键 w 和 'B'、'C'、'A' 在哈希 2 中用于相同的键，如果标记差异。我想按价值比较价值-

以下代码比较了两个哈希 os 数组。因此，从上面的示例中，哈希 1 中的 A、B、C 不等于哈希 2 中的 B、A、C。但是我想检查单个项目的存在，比如 A，而不用担心顺序。

```
for ( keys %hash2 ) 
{     
    unless ( exists $hash1{$_} ) # Checks for mismatches in keys
    {         
        print "$_: Key mismatch $_ received \n"; 
        next;     
    }      

    if ( $hash2{$_} eq $hash1{$_} ) #Compares two lines exactly         
    {        
        print "$_: No mismatch \n";  
    }     
    else 
    {       
        print "$_: Value mismatch for key $_ \n";  #Difference in Value
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:58:20.293

如果您不关心订单，只需比较有序的值集：

你的代码：

```
if ( $hash2{$_} eq $hash1{$_} ) #Compares two lines exactly 
```

应该：

```
if (     join(",", sort @{ $hash1{$_}})
      eq join(",", sort @{ $hash2{$_}}) ) #Compares two lines exactly 
```

* * *

另一方面，如果要比较数组的成员资格，只需将数组转换为 hashref：

```
foreach my $key2 ( keys %hash2 ) {
    unless ( exists $hash1{$key2} ) { print ""; next; };

    my %subhash1 = map { ( $_ => 1 ) } @{ $hash1{$key} };
    my %subhash2 = map { ( $_ => 1 ) } @{ $hash2{$key} };

    # Compare 2 subhashes same way you are comparing parent hashes in inner loop

    foreach my $subkey2 ( keys %subhash2 ) {
        # Check for exists
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:06:35.730

如果数组的成员不重复，您可以使用与哈希键完全相同的算法来查找差异。因此，您可以将其设为子例程：

```
#!/usr/bin/perl
use warnings;
use strict;

my %h1 = (
          w => ['A','B','C'],
          e => ['P','Q','R'],
          q => [],
         );
my %h2 = (
          w => ['A','B','C'],
          e => ['P','Q','O'],
          r => ['S','T'],
         );

my @diff = list_diff(keys %h1, keys %h2);
print "Difference in keys: ", @diff, "\n" if @diff;

KEY:
foreach my $key (keys %h1) {
    next KEY unless exists $h2{$key};
    my @diff = list_diff(@{ $h1{$key} },@{ $h2{$key} });
    print "Difference at key $key: ", @diff, "\n" if @diff;
}

sub list_diff {
    my %keys;
    $keys{$_}++ for @_;
    return grep 2 != $keys{$_}, keys %keys;
} 
```

# c# - 从 Visual Studio 以用户身份调试以管理员身份运行

> ID：11725824
> 
> 赞同：3
> 
> 时间：2012-07-30T16:40:32.620
> 
> 标签：c#, visual-studio-2008, visual-studio-debugging

我必须以管理员身份运行 Visual Studios 2008 来编译我正在处理的遗留代码。但是，发现了一个问题，当应用程序在没有管理员权限的情况下运行时，偶尔会导致发生错误。

我想知道在管理员下运行 Visual Studios 时是否有办法以用户权限调试程序？这将使我能够追踪并修复错误。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T16:43:04.360

在 Visual Studio 之外启动程序（双击它），并确保它是为使用正确符号进行调试而构建的。以管理员身份打开 Visual Studio 和您的解决方案，然后在菜单栏中选择“调试”和“附加到进程”。

在显示的进程列表中找到您的进程，选择它并附加。

# android - ArrayList 转换为 ArrayAdapter

> ID：11725825
> 
> 赞同：1
> 
> 时间：2012-07-30T16:40:34.630
> 
> 标签：android, arrays, listview

我正在尝试将 arraylist 方法放入 arrayadapter，但我无法这样做。我正进入（状态`The constructor ArrayAdapter<String>(new Runnable(){}, int, ArrayList<RetrieveInternet>) is undefined`

阵列适配器

```
 ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, getPackages()); 
```

数组列表方法：

```
private ArrayList<RetrieveInternet> getPackages() {
    ArrayList<RetrieveInternet> apps = getPermissions(true); /* false = no system packages */
    final int max = apps.size();
    for (int i=0; i<max; i++) {
        apps.get(i);
        Log.e("TAG", apps.get(i).toString());
    }
    return apps;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:04:26.990

构造函数的第一个参数不`ArrayAdapter`应该是。您可能正在从一些内部设置您的适配器，因此您不能使用引用，因为它指向该实例。你应该改变这一行：`Context``Runnable``Runnable``this``Runnable`

```
ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, getPackages()); 
```

进入这个：

```
ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(YourActivity.this, android.R.layout.simple_list_item_1, getPackages()); 
```

主要区别在于第一个参数 -`YourActivity.this`它是对您设置适配器的活动的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:04:18.180

`Runnable`显然，您是在(in方法)中创建适配器`run()`，这就是为什么`this`指的是`Runnable`，而不是`Context`. 尝试使用`YourActivity.this`而不是`this`.

# c++ - 使自动隐藏的任务栏在窗口最大化而不取消隐藏

> ID：11725827
> 
> 赞同：2
> 
> 时间：2012-07-30T16:40:43.133
> 
> 标签：c++, visual-studio-2010, visual-studio, visual-c++, mfc

我正在尝试解决 MFC 功能包中的此错误：[Windows 7 任务栏不会在向导构建的 MFC 应用程序最大化时自动取消隐藏](https://connect.microsoft.com/VisualStudio/feedback/details/585121/windows-7-taskbar-wont-auto-unhide-when-wizard-built-mfc-app-is-maximized)。

问题：

当应用程序最大化并且用户在他们的任务栏上自动隐藏时，窗口会覆盖“隐藏”的任务栏（它应该仍然可见，但只有 1 个像素高）。当隐藏的任务栏像这样隐藏时，用户无法通过将鼠标移动到屏幕底部来取消隐藏它。

要进入任务栏，用户必须按 windows 键或 Alt-Tab。

我试过的：

*   测试窗口是否在窗口焦点上最大化并在任务栏上调用 ShowWindow/BringWindowToFront。这使任务栏可见，但自动打开它，就像将鼠标移到它上面一样。我只想以“隐藏”状态（1 像素高）显示任务栏。
*   调整窗口大小以在屏幕底部留下一行像素 - 这不适用于最大化的窗口。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-07T01:22:40.920

Windows 7 的烦人功能是在任务栏上全屏运行每个无字幕窗口……Windows 7 实际上是通过重置 TOPMOST 标志来实现的。所以我们需要重新设置它。这也是任务栏属性不再具有始终位于顶部复选框的原因。

```
void CMainFrame::OnSysCommand(UINT nID, LPARAM lParam)
{
  // TODO: Add your message handler code here and/or call default
  CWnd::OnSysCommand(nID, lParam);

  // Windows7 bug fix
  if (nID == SC_MAXIMIZE)
  {
    HWND hTaskbar = ::FindWindowW(L"Shell_TrayWnd", NULL);
    ::SetWindowPos(hTaskbar, HWND_TOPMOST, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE | SWP_NOACTIVATE );
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:57:00.350

1.  认为，如果您处理`WM_GETMINMAXINFO`. 补丁`ptMaxSize`/`ptMaxPosition`在“DefWindowProc”之后。
2.  你试过了`SetWindowPos (hTaskbar, *YourHwnd*, 0,0,0,0, SWP_NOMOVE|SWP_NOSIZE)`吗？

# javascript - Backbone.js 应用程序使用 CommonJS 结构与 node.js 和客户端一起工作

> ID：11725834
> 
> 赞同：3
> 
> 时间：2012-07-30T16:41:09.667
> 
> 标签：javascript, node.js, backbone.js, requirejs, commonjs

我正在研究一种使用允许需要 Javascript 模块的 CommonJS 结构由 BackboneJS 应用程序编写的方法。然后，此应用程序可以使用节点在客户端或服务器端工作。

我已经研究了[requirejs](http://requirejs.org/)和其他类似的选项，但是您必须以特定的方式编写应用程序，在我看来这看起来真的很糟糕。

我还查看了[browserify](https://github.com/substack/node-browserify)和[webmake](https://github.com/medikoo/modules-webmake)，它们获取您的代码和所需的任何模块，并将它们组合成一个带有缺失 (require) 方法的单个 js 文件。都是一个聪明的主意，但是让客户端的代码有点混乱。

有没有这样的东西可以通过以commonJS格式编写的代码，编译与浏览器兼容的所有必需模块并吐出一个可以在浏览器中使用而不必担心的Javascript文件（或多个）关于缺少 require 方法？更好的是为骨干应用量身定制的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T13:11:09.397

在浏览器中使用 CommonJS 结构化模块有多种选择：

1.  RequireJS 2.0.2 支持配置选项`cjsTranslate`。在您的 r.js 优化器配置中将此设置为`cjsTranslate: true`将使用样板包装任何包含的看起来是 CommonJS 格式的模块`define`。[在此处](https://github.com/jrburke/r.js/blob/master/build/example.build.js#L412)查看详细信息。
2.  [Cajon](https://github.com/requirejs/cajon)是建立在 RequireJS 之上的新模块加载器，它支持 CommonJS 格式的模块（也是由 RequireJS 作者@jrburke 编写的）。
3.  [Volo](https://github.com/volojs/volo)依赖管理工具（同样由 @jrburke 提供）能够包含 cjs 模块并将其转换为 amd 模块。这对您来说可能不是一个很好的选择，但为了完整起见值得包括在内。
4.  您可以编写一个服务器组件，自动将您的代码包装在 AMD`define`样板文件中。我相信这是他们在[SoundCloud](http://soundcloud.com/)采用的方法- 请参阅[此博客文章](http://backstage.soundcloud.com/2012/06/building-the-next-soundcloud/)。

**2014 年 8 月 29 日编辑：**可以说，这里的当前最佳实践是[Browserify](http://backstage.soundcloud.com/2012/06/building-the-next-soundcloud/) ，它带有生成的源映射，以便于客户端调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:30:39.290

我不清楚为什么像 webmake 这样的东西不能解决你的问题。

1.  它不需要您以任何与服务器端模块不同的方式编写客户端模块。

2.  你提出了 webmake/browerify 对 js 的影响。好吧，你猜怎么着。RequireJS/Curl 做同样的事情。是的，我知道，不一定，但在大约 2012 年的*任何*实际生产情况下，您将拥有某种工具来组合您的 js 并在通过网络发送之前将其缩小。

3.  @rharper 当前接受的答案中的前三点基本上列出了 AMD 加载程序空间中的替代方案。AMD 作为一个概念肯定与 Common JS 非常不同，并且解决了一个非常有效的问题，而该问题却没有引起 CJS 规范编写者的注意。但这是对未来的一个有效关注，因为目前的脚本大小与图像等相比相形见绌。当脚本大小成为一个值得注意的性能问题时，我们可能会拥有 ECMA Harmony 模块，它应该具有本机浏览器支持. （即使在今天，也没有什么能阻止您手动将模块拆分为逻辑组并要求在需要时加载每个组合组。只是不需要经常这样做）。

4.  webmake 是@rharper 列出的第四个替代方案的（某种）实现。我提倡 webmake 而不是 browserify，因为 webmake 在其授权中声明它只应该做一件事 - 在您编写了一堆模块并通过`require("foo")`and`exports.bar = ...`机制声明了它们的依赖关系之后，您运行一个指定初始 javascript 文件的命令，并且它吐出一个 js 文件，其中包含所有可传递发现的依赖项。在我使用它的有限经验中，它做得很好。以最小的开销 - 仅添加 75 奇数行非缩小代码作为序言。

5.  如果在开发过程中有额外的构建步骤会导致摩擦，您也可以动态地重新生成组合的 js 并通过 node.js 服务器（几行代码）提供它。webmake 还支持源映射，因此在 webkit 浏览器中调试也可以。

6.  请记住，我建议使用 webmake，因为经过大量搜索，这是我遇到的最简单的解决方案。但这并不意味着它对你有用。在这个领域有这么多替代品的原因是因为每个人都有自己的一套花里胡哨，其中一些可能对您的用例至关重要。但一般原则适用于大多数优秀的 javascript 加载器：

    *   无论您使用 AMD 还是 CJS，都不需要编写 AMD 样板。@rharper 列出了一些支持自动执行此操作的 AMD 替代方案。

    *   您应该有两条不同的生产和开发路径。从今天开始，生产 javascript 应该被缩小/组合。开发 javascript 不应该，也不需要在保存（在编辑器中）/重新加载（页面）/调试（在浏览器中）循环中添加额外的步骤。

# opencv - 使用 STM32F407VGT6 ARM M4 平台的 Opencv 库

> ID：11725835
> 
> 赞同：0
> 
> 时间：2012-07-30T16:41:11.720
> 
> 标签：opencv, arm, robotics, robot, cortex-m3

我想在 STM32F407VGT6 ARM M4 微控制器中实现 opencv 库。这可能吗？如果不能，请告诉我哪些平台最适合使用 opencv 库？

我正在开发一个箭头检测机器人，我计划包括图像处理算法来检测箭头。所以我需要一个合适的平台来实现这个场景。我买了一个STM32F407VGT6 ARM M4微控制器。这个微控制器适合我的要求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-22T05:13:00.110

我不是专家，但经过大量谷歌搜索后，我知道在 MCU 上移植 OpenCV 非常困难。这有很多限制。由于以下原因，不建议在 MCU 上移植 OpenCV。

*   处理速度
*   有限的内存
*   OpenCV 使用了大量的浮点运算，处理在 MCU 中非常流畅
*   DMA
*   内存泄漏
*   与 raspberry PI、beaglebone Black 等上的移植相比，移植需要付出很多努力。

另一个可用的选项是现成的“OpenMV”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:45:36.070

我见过很多人实现针对 ARM 处理器的 opencv 库。Opencv 有很多 FP 操作，而带有专用 FPU 的 ARM 处理器将为您提供更好的性能。您的主板带有 Cortex M4，它具有硬件 FPU，支持 SIMD 操作并支持 CMSIS 库。所以它会起作用。但是，如果性能至关重要，则以 ARM A 系列为目标会更好。

# internationalization - 所需布局上块的具体5语言特定内容

> ID：11725836
> 
> 赞同：0
> 
> 时间：2012-07-30T16:41:18.203
> 
> 标签：internationalization, concrete5

我需要能够将现有布局的区域变成特定于语言的块。

在我的布局的页脚中有一些图像/链接，我希望能够对其进行编辑，例如网站的德文版，但不能用于英文版。

每次我想为德语版网站创建新页面时，我如何无需手动修改和/或链接此内容来完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:07:00.087

我不太了解以多种语言管理网站...但我对 C5 中如何处理它的模糊理解是，您为每种语言创建了网站的不同部分（而不是让一个页面提供其多个版本）内容）。有一个免费插件可以通过这种方式管理您的网站：http: [//www.concrete5.org/marketplace/addons/internationalization/](http://www.concrete5.org/marketplace/addons/internationalization/)

我认为他们对此的理论是，大多数现实世界的网站最终需要在每种语言的基础上进行更多的更改，而不是“这里只是一个链接，那里只是一个词”，而且在许多情况下，它最终变得更简单、更容易拥有每个单独的页面。当然，这确实带来了必须管理 2 倍或 3 倍的内容的问题，而实际上不同语言的内容*是*相同的——但我认为这是我上面链接到的国际化插件有助于解决的问题（它允许您复制页面或网站的整个部分从一个地方到另一个地方，并跟踪哪些版本实际上是相同的，并使它们保持同步，与不同的页面等等）。

# android - 如何在按钮上设置倒计时？

> ID：11725838
> 
> 赞同：1
> 
> 时间：2012-07-30T16:41:38.150
> 
> 标签：android, android-layout, android-intent, android-widget

我有一个`Button`，按下后，应该开始倒计时，并在按钮上显示倒计时。

我该如何进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:45:47.613

以下代码将非常简单地实现您的要求。现在这非常非常简单。您将需要实施`onFinish()`并可能实施`onTick()`更多。但这是轻松完成您想要的最少的代码。

您想要做的是使用[`CountDownTimer`](http://developer.android.com/reference/android/os/CountDownTimer.html)android api 提供的。

```
private long countDown = 3000;

private long interval = 1000;

private CountDownTimer countDownTimer;

    this.countDownTimer = new CountDownTimer(this.countDown, this.interval) {

        @Override
        public void onTick(long millisUntilFinished) {
            colorButton.setText(Long.toString(millisUntilFinished/1000));
        }

        @Override
        public void onFinish() {
            // TODO Auto-generated method stub

        }
    };

    this.colorButton.setText(Long.toString(this.countDown/1000));
    this.colorButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            countDownTimer.start();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T17:24:39.073

试试这个

```
public class CountDown extends Activity implements OnClickListener {

    Button btn;
    int i=0, second = 3;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btn = (Button)findViewById(R.id.btn);
        btn.setOnClickListener( this );
    }

    @Override
    public void onClick(View v) {
        new Thread( new Runnable() {
                public void run() {
                    while( i != second ) {
                        try {
                            handle.sendMessage( handle.obtainMessage());
                            Thread.sleep(1000);
                        } catch( Throwable t) {

                        }   
                    }
                }  

                Handler handle = new Handler() {
                    public void handleMessage( Message msg) {
                        btn.setText( ""+ second );
                        second--;
                    }           
                };
        }).start();   

    }
} 
```

# ant - Ant：在 tar 任务中有一个条件

> ID：11725839
> 
> 赞同：0
> 
> 时间：2012-07-30T16:41:41.637
> 
> 标签：ant, if-statement, task, conditional-statements, tar

有没有办法对 tar 任务设置条件，以便仅在满足条件时才包含某些文件？我希望始终包含一些文件，而仅在条件为真时才包含一些文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:16:23.690

您可以使用条件目标来包装`<tar>`任务。

```
<target name="tar1" if="condition1">
  <tar>
    <tarfileset dir="${dir}">
      <include name="**/*.alwaysIncluded" />
      <include name="**/*.conditionallyIncluded" />
    </tarfileset>
  </tar>
</target>

<target name="tar2" unless="condition1">
  <tar>
    <tarfileset dir="${dir}">
      <include name="**/*.alwaysIncluded" />
    </tarfileset>    
  </tar>
</target> 
```

# python - 关于处理重音的python字符串编码问题

> ID：11725840
> 
> 赞同：0
> 
> 时间：2012-07-30T16:41:47.347
> 
> 标签：python, encoding

我有 python 脚本，它打印一个`value`编码不正确的字符串。我尝试设置一个`s`与 the 相同的字符串`value`，它打印得很好。我也打印了他们的类型，他们都是`strings`. 这是代码的样子：

```
s = "\xC3\xBA"
print s
print type(s)

print value
print type(value) 
```

这是输出：

```
ú
<type 'str'>
\xC3\xAD
<type 'str'> 
```

值输出应该是`ú`而不是`\xC3\xAD`. `s`当我设置字符串时怎么会`\xC3\xAD`正确打印？！有人有想法吗？

是这样设置的`value`：

```
apps = data.split('-') 
for app in apps:
    app_data = app.split('\n')
    app_new = {}
    for app_field in app_data:
        key_value = app_field.split(':')
        if len(key_value) == 2:
            key = key_value[0].lstrip().rstrip().lower()
            value = key_value[1].lstrip().rstrip() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:44:36.093

我猜你的反斜杠也以某种方式被逃脱了：

```
In [1]: value = "\\xC3\\xBA"

In [2]: print value
\xC3\xBA

In [3]: type(value)
Out[3]: <type 'str'> 
```

# jquery - 防止页面重新加载时的 jQuery 动画

> ID：11725841
> 
> 赞同：-1
> 
> 时间：2012-07-30T16:41:51.873
> 
> 标签：jquery, asp.net, css, session-state

在显示基本信息之前，我制作了一个可爱的效果，即我被缩放并翻译到页面的一角。现在，我刚刚意识到用户每次重新加载页面时都会被迫看到它。

我想知道我如何才能只在上次重新启动浏览器后的第一次访问时运行动画，即如果用户来自我自己的域之外的其他域。

如果这太复杂了，我想运行一次动画，然后以某种方式通知浏览器不再运行它。或者至少不是，比如说，有一天。

由于我不会出于某种不合逻辑但不可避免的原因使用 cookie，因此我将尝试应用会话状态。因此，我对代码进行了以下更改。

配置：

```
<sessionState mode="InProc"></sessionState> 
```

JS：

```
$(document).ready(function () {
var execute = 0; // 0 - no animation, 1 - full length animation
$("div.mainInfo img")
  .delay(400 * execute)
  .fadeIn(1000 * execute);
  ...
} 
```

页面加载：

```
Session["hazaa"] = "shazoo";
if(IsPostBack)
{
  if(Session["hazaa"] == "shazoo";
    DoTheCoolStuffToAffectJQueryOnTheClient(0);
} 
```

所以，如果 hazaa 确实是 shazoo，我想更改 jQuery 执行标志，但是......确切地说，我该怎么做？！无论如何，这个标志让我很烦，因为每次我上传作品时，我都忘记打开它，所以**每次都是**静态零。所以，如果为了允许*DoTheCoolStuffToAffectJQueryOnTheClient(0)*调用工作而必须这样做，我不会哭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:53:21.713

您可以使用会话或本地存储来完成您想要完成的任务。

[https://developer.mozilla.org/en/DOM/Storage](https://developer.mozilla.org/en/DOM/Storage)

会话存储只会持续到浏览器重新启动，并且本地存储会持续到客户端清除它

使用你所要做的就是在动画上完整存储一个值，即。

```
sessionStorage.setItem("animeRan", 'yes'); 
```

然后在您的其他页面上的任何位置，只要它们在同一个域中，您就可以使用它访问它

```
sessionStorage.getItem("animeRan"); 
```

并随时使用删除它

```
sessionStorage.removeItem("animeRan"); 
```

这是一个您可以检查浏览器兼容性/支持的网站以及有关网络存储的更多信息

[http://caniuse.com/#feat=namevalue-storage](http://caniuse.com/#feat=namevalue-storage)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:47:37.427

作为[wirey](https://stackoverflow.com/users/1385672/wirey)在他的[回答](https://stackoverflow.com/a/11726035/261564)中所说的补充。如果您不确定它的实际使用方式，这里是一个代码示例。

您将使用[`sessionStorage`](http://dev.w3.org/html5/webstorage/#the-sessionstorage-attribute)如下：

```
$(document).ready(function () {
  if (sessionStorage.getItem("animationDone") !== null) {
    $("div.mainInfo img")
      .delay(400 * execute)
      .fadeIn(1000 * execute);
      ...
      sessionStorage.setItem("animationDone", "done");
   }
} 
```

这是保存到浏览器中的[`sessionStorage`](http://dev.w3.org/html5/webstorage/#the-sessionstorage-attribute)，与服务器端无关。

如果您确实需要自己删除它`sessionStorage.removeItem("animationDone");`

[`sessionStorage`](http://dev.w3.org/html5/webstorage/#the-sessionstorage-attribute)浏览器会话结束时将过期。例如：关闭浏览器等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:44:00.303

当第一个动画完成时，您可以创建一个 cookie。然后，您在每次页面加载时读取该 cookie，以查看动画是否最近运行过。一个小缺点是不接受 cookie 的用户仍然每次都会看到它，但我相信他们很少。

对于 jQuery，有一些[插件](https://github.com/carhartl/jquery-cookie)可以让您更轻松地管理 cookie。

使用上面的插件，我会说你的代码是这样的：

```
$(function () {
   if (!$.cookie("animationRun")) {
      $("#some-selector").animate(... , function () {
         // Let the cookie expire after one day
         $.cookie("animationRun", true, { expires: 1 });
      });
   }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T16:44:10.797

您应该设置一个 cookie 并在播放动画之前检查该 cookie 是否存在。

这里的一个缺点是，不接受您的 cookie 的用户仍将始终看到动画。

# cocoa - Xcode 4.4 与 admod

> ID：11725842
> 
> 赞同：1
> 
> 时间：2012-07-30T16:41:54.937
> 
> 标签：cocoa, ios5, admob, xcode4.4

我想在我的 ios 应用程序中添加 admob。

我已按照该教程进行操作：

[https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals?hl=en#ios](https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals?hl=en#ios)

但即使使用示例项目或使用该代码在我的 ios 项目中添加源代码，我也有一个错误：

***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[GADBannerView private]：无法识别的选择器发送到实例 0x1727d0”

使用该源代码：

视图控制器.h

```
#import <UIKit/UIKit.h>
#import "GADBannerView.h"

@interface ViewController : UIViewController{
    GADBannerView *bannerView_;
}

@end 
```

和

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Create a view of the standard size at the bottom of the screen.
    bannerView_ = [[GADBannerView alloc]
                   initWithFrame:CGRectMake(0.0,
                                            self.view.frame.size.height -
                                            GAD_SIZE_320x50.height,
                                            GAD_SIZE_320x50.width,
                                            GAD_SIZE_320x50.height)];

    // Specify the ad's "unit identifier." This is your AdMob Publisher ID.
    bannerView_.adUnitID = @"MYID";

    // Let the runtime know which UIViewController to restore after taking
    // the user wherever the ad goes and add it to the view hierarchy.
    bannerView_.rootViewController = self;
    [self.view addSubview:bannerView_];

    // Initiate a generic request to load it with an ad.
    [bannerView_ loadRequest:[GADRequest request]];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:28:07.410

我遇到了一个微笑的问题。我通过使用`-all_load`链接器标志修复了它。

这是你需要的。

[https://developers.google.com/mobile-ads-sdk/docs/#incorporating](https://developers.google.com/mobile-ads-sdk/docs/#incorporating)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:27:32.773

如果您已经添加`-all_load`并且仍然无法正常工作：

1.  关闭 XCode 确保正确关闭它。
2.  重新打开 XCode。
3.  清理项目。
4.  建造。

祝你好运 ：）

# javascript - 禁用div时td中的文本框失去价值

> ID：11725843
> 
> 赞同：0
> 
> 时间：2012-07-30T16:41:57.967
> 
> 标签：javascript, asp.net

我有一个 JavaScript 函数 DisableDuedate() 根据登录用户禁用 td 标签。td 标记包含在 Page_load（页面后面的 vb 代码）上填充的文本框。在 HTML 页面中调用 DisableDueDate() 函数

```
<body onload='scrollBar(null,null,"red");' onload='DisableDueDate();'> 
```

该函数在head标签中定义

```
<script type="text/javascript" language="javascript">

            function DisableDueDate()
            {
                var udisable = '<%=dueDateDisabled %>';
                                                        if (udisable == "true")
                    document.getElementById("divduedate").setAttribute('disabled',true);
                else
                    document.getElementById("divduedate").setAttribute('disabled',false);

            }
    </script> 
```

这工作正常，但是当 div 标签被禁用时，td 标签中的文本框的值显示为 0。当封闭的 div 标签被禁用时，如何保留文本框的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:46:25.447

您可能希望将文本框的值保存在 html 属性标记中`<div data-value="put it here">`，或者`$.data()`如果您使用的是 jQuery。

然后只需在启用它时，检查数据值是否存在，如果存在，请将其放入文本框值中。够简单！

# c++ - “int”的问题

> ID：11725844
> 
> 赞同：2
> 
> 时间：2012-07-30T16:42:01.150
> 
> 标签：c++, arrays, multidimensional-array, user-input

我是编程新手，所以我想编写一个代码，让我输入一个二维数组（或者在我的情况下是一个矩阵）并在之后打印它。

```
#include <iostream>
using namespace std;

void printArray( const int *array, int count ) 
    { 
       for ( int i = 0; i < count; i++ ) 
          cout << array[ i ] << " "; 

       cout << endl; 
    }

int main () {
int n;
cout<<"Please enter the length of your matrix : "<<endl;
cin>>n;
int * y=new int [n];
for (int w = 0; w <= n-1; w++ ) {

    y[w] = new int [n];
    cout<<"Insert the elements ";

            for (int z = 0; z <= n-1; z++)
            {
                cin >>y [w][z];
            }   
}

printArray(y, n);

} 
```

但是，我收到诸如“从'int *'到'int'的无效转换”和“数组下标的无效类型int [int]”之类的错误。你能检查我的代码并指出我的缺陷吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T16:45:44.470

您声明`y`为`int*`仅是一维的。您需要声明它`y`是`int**`二维的。

您的代码无法编译的原因是因为`int* y`指向*单个*内存块（即整数数组，换句话说，是一堆`int`s.）。`y[w]`是`int`该数组中的其中一个，因此`y[w] = new int[n]`无法编译，因为您试图将 an 分配`int*`给 an `int`。

**更改`y`为可以指向 s 数组的`int**`方法。由于每个都可以指向 的数组，因此您将拥有一个二维数组。`y``int*``int*``int`**

10x10 矩阵的示例代码`int**`：

```
int** iShouldUseStdVector = new int*[10]; // allocate 10 int* <--
for (int i = 0; i < 10; i++)
{
    iShouldUseStdVector[i] = new int[10]; // allocate 10 int <--
    for (int k = 0; k < 10; k++)
    {
        iShouldUseStdVector[i][k] = k;
    }
} 
```

10x10 矩阵的示例代码`std::vector`：

```
std::vector<std::vector<int>> thisIsEasy;
for (int i = 0; i < 10; i++)
{
    thisIsEasy.push_back(std::vector<int>());
    for (int k = 0; k < 10; k++)
    {
        thisIsEasy[i].push_back(k);
    }
} 
```

* * *

我建议`std::vector<std::vector<int>> y;`改用它，因为它可以方便地为您处理内存，因为您想添加更多元素并在内存被破坏时释放内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:46:49.517

> int * y=new int [n];

那是一个长度数组`n`。你需要的是：

```
int **y = new int*[n];
for (int i=0; i<n; i++)
    y[i] = new int[n];

....

//delete[] y[i] in a loop
delete[] y; 
```

既然您使用的是 C++，为什么不：

```
#include <vector>

...
std::vector<std::vector<int> > matrix; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:50:58.657

1）您要声明`y`为指向以下数组的指针`int`：

```
int ** y = new int* [n]; 
```

2）在`printArray`你处理一个矩阵，而不是一个数组。要访问矩阵的成员，请使用两个嵌套`for`循环，如下所示：

```
for (int i = 0; i < nLines; i++) {
    for (int j = 0; i < nColumns; j++) {
        std::cout << matrix[i][j] << std::endl;
    }
} 
```

3）您需要传递一个指向数组的`int`指针，而不是指向`int`方法的指针`printArray`。

```
void printArray( const int **array, int count ) 
```

* * *

在此处找到具有上述修复程序的工作代码：http: [//ideone.com/2h9dR](http://ideone.com/2h9dR)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T17:25:39.840

首先，阅读其他答案，然后再阅读一本好的 C++ 书籍中的指针章节。现在，除非您需要极高的速度，否则请使用`vector`. 使用 C++11（较新的 C++ 标准），它非常好读，所以我先发布：`vector``double`

```
#include <iostream>
#include <vector>

void printArray( std::vector< std::vector<double> > & v ) {
   for ( const auto & row : v ){
      for ( const auto & value : row ){
        std::cout << value << " ";
      }
      std::cout << std::endl;
   }
}

int main () {
   int n;
   std::cout<<"Please enter the length of your matrix : "<<std::endl;
   std::cin>>n;
   std::vector<std::vector<double>> y(n,std::vector<double>(n,0));
   for ( auto & row : y ){
      std::cout<<"Insert the elements of row :";
      for ( auto & value : row ){
        std::cin >> value;
      }   
   }
   printArray(y);   
} 
```

对于较旧的 C++，它是这样的：

```
void printArray( std::vector< std::vector<double> > & v ) {
   for ( std::vector<std::vector<double> >::const_iterator it = v.begin(); it != v.end();it++){
      for ( std::vector<double>::const_iterator it2 = it->begin(); it2!= it->end();it2++) {
     std::cout << (*it2) << " ";
      }
      std::cout << std::endl;
   }
}

int main () {
   int n;
   std::cout<<"Please enter the length of your matrix : "<<std::endl;
   std::cin>>n;
   std::vector<std::vector<double> > y(n,std::vector<double>(n,0));
   for ( std::vector<std::vector<double> >::iterator it = y.begin(); it!= y.end();it++){
      std::cout<<"Insert the elements of row :";
      for ( std::vector<double>::iterator it2 = it->begin(); it2!= it->end();it2++) {
     std::cin >> (*it2);
      }   
   }
   printArray(y);   
} 
```

请注意，这`y(n,std::vector<double>(n,0))`意味着制作`n`向量，每个向量都有`n`零。您还可以使用 use`y[1][2]`来获取和设置值。如果您使用 y.at(1).at(2) 代替，您会得到适当的检查，以便在读取或写入越界时获得异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T16:45:33.487

`int * y=new int [n];`是指向动态分配的`int`值数组的指针；

`y[w] = new int [n];`尝试将指针分配给数组的元素。

作为一项学习练习，使用原始数组是一个好主意。一旦你知道如何使用它们，你就会知道足以停止使用它们（非常）并使用自动存储类型，如`std::vector`.

# fdt - 在 Windows 和 Java JRE 问题上安装 FDT

> ID：11725845
> 
> 赞同：0
> 
> 时间：2012-07-30T16:42:04.050
> 
> 标签：fdt

我使用 FlashBuilder 已经有一段时间了，但我最近发现了一些有趣的文章，声称 FDT 很不错。我正在尝试评估它，但我在任何地方都找不到 Windows 安装程序。我正在尝试使用单机版。我下载了 zip 文件，但没有看到安装程序。该 exe 不起作用，说 JRE 不存在，即使我已经安装/更新了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:42:04.050

在 Windows 上，没有 FDT 的安装程序 - 只是一个包含 FDT 的 .zip 文件。

被告知您没有可用/未安装的 Java 是一个问题。

试试这个： [http ://www.java.com/en/download/installed.jsp?detect=jre&try=1](http://www.java.com/en/download/installed.jsp?detect=jre&try=1)

下面是 FDT 解压后的样子：

![在此处输入图像描述](../Images/6b9eaea95bd05ae9c79a06ee4b148a01.png)

# objective-c - 如何在 cocos2d 和 iOS 中使用 plist 文件？

> ID：11725849
> 
> 赞同：0
> 
> 时间：2012-07-30T16:42:21.730
> 
> 标签：objective-c, ios, cocos2d-iphone

我有一个游戏，基本上是突破克隆。我厌倦了以编程方式制作关卡，所以我得到了这个编辑器 = Scenedesigner，它可以让你在屏幕上放置精灵、节点等。

问题 - 我如何在我的游戏中加载该 .plist 文件并让我的游戏理解它？

例如，我为我的精灵使用复合对象 - 例如 ball 属于包含 ccsprite 作为属性的 Ball 类，这将如何工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:50:20.500

不确定您是如何创建 plist 的，但这篇关于使用**NSDictionary**的帖子应该可以回答您的问题：[https ://stackoverflow.com/a/1760384/388412](https://stackoverflow.com/a/1760384/388412)

...对于**NSArray**基本相同，两个类都可以存储对象并读取和写入文件/URL（因此读取和写入 plists）。

因此，您可能应该从字典或数组开始，然后将其写入文件以创建 plist。相反，根据您的特定 plist 的格式，可能会导致问题。

至于更复杂的序列化，您应该查看**NSCoding**协议。有了它，您可以序列化和反序列化整个对象树（使用**NSArchiver**和**NSUNarchiver**）。不过，不要单独使用 NSArchiver/NSUnarchiver，最好让你的类 NSCoding 兼容。

如果您的情况不太复杂，我建议从 NSDictionary / NSArray 序列化开始，因为它更容易处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:48:21.030

您可以根据 plist 的内容使用`dictionaryWithContentsOfFile`方法`NSDictionary`和
`arrayWithContentsOfFile`方法`NSArray`将您的 plist 转换为数组或字典。

# jquery - 在 Yii Markitup 小部件中加载图像

> ID：11725852
> 
> 赞同：1
> 
> 时间：2012-07-30T16:42:29.697
> 
> 标签：jquery, yii, markitup

我正在尝试在 Yii EMarkitupWidget 中加载图像。所以我打开模式窗口`multipart/form-data` `form`，上传图像，并尝试使用图像 url 从控制器获取回调。之后，我需要将上传的图片网址粘贴到标记窗口中。

我该怎么做？我正在尝试这个：

```
set.js: {name:'Picture', key:'P', call: 'markitupimageupload'}, 
```

此函数打开模态窗口：

```
function markitupimageupload(){
    $('#mymodal').dialog('open');
} 
```

带有表单的模态窗口：

```
<?php $this->beginWidget('zii.widgets.jui.CJuiDialog', array(
    'id'=>'mymodal',
    'options'=>array(
        'title'=>'Image Upload',
        'width'=>400,
        'height'=>200,
        'autoOpen'=>false,
        'resizable'=>false,
        'modal'=>true,
        'closeOnEscape' => true,
    ),
)); ?>
<?php $model=new ImageForm();
    $this->renderPartial('application.views.site.image',array('model'=>$model));
?>
<?php $this->endWidget('zii.widgets.jui.CJuiDialog'); ?> 
```

形式：

```
class ImageForm extends CFormModel {
public $image;
// другие свойства

public function rules(){
    return array(
        // устанавливаем правила для файла, позволяющие загружать
        // только картинки!
        array('image', 'file', 'types'=>'jpg, gif, png'),
    );
}
} 
```

表单视图：

```
<div class="form">
    <?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'image-upload-form',
    'action'=>array('/image/uploadnew'),
    'enableClientValidation'=>true,
    'clientOptions'=>array(
        'validateOnSubmit'=>true,
    ),
    'htmlOptions'=>array('enctype'=>'multipart/form-data'),
)); ?>

    <?php echo CHtml::errorSummary($model); ?>

    <div class="row">
        <?php echo $form->labelEx($model,'image'); ?>
        <?php echo CHtml::activeFileField($model,'image'); ?>
        <?php echo CHtml::error($model,'image'); ?>
    </div>

    <div class="row buttons">
        <?php echo CHtml::ajaxSubmitButton('Upload','/websnippets/image/uploadnew',
        array('type' => 'POST',
            'success' => 'function(){ $("#mymodal").dialog("close");}',));
        //echo CHtml::submitButton('Upload');
        ?>
    </div>

    <?php $this->endWidget(); ?>
</div><!-- form --> 
```

问题：然后我使用 CHtml::submitButton('Upload') ，文件上传正常。但我需要获取文件名 url。然后我使用 CHtml::ajaxSubmitButton，我可以接受 Json 响应，但文件没有加载。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:51:04.307

有一个[jQuery 表单插件](http://jquery.malsup.com/form/)可以让您通过 AJAX 提交表单，即使您在其中有文件也是如此。它非常易于使用且功能强大。您可以将表单提交给一个操作，该操作返回一个带有文件名的 JSON 编码对象，然后使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T22:48:50.177

在您的 actionUploadnew 控制器中返回文件名 - 例如：

```
echo CJSON::encode(array('filepath'=>$filepath)); 
```

在您的回调 javascript 中，您可以像这样访问它：

```
'success' => 'function(data){ console.log(data.filepath); }' 
```

# node.js - 如何编写一个只会捕获动作的快速路由中间件？

> ID：11725854
> 
> 赞同：2
> 
> 时间：2012-07-30T16:42:30.970
> 
> 标签：node.js, express, connect

我正在使用以下中间件：

```
 app.use(function(req,res,next){
     console.log(req.url)
     next()
  }); 
```

但它会捕获每个请求，包括图像/css/js 等...

如果我只想捕捉动作，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:29:22.867

您可以将“静态处理程序”中间件放在此中间件之前，如果请求与静态中间件路由匹配，则它根本不应该到达您的中间件。

所以试试：

```
app.use(express.static(__dirname + '/public'));
app.use(function(req,res,next){
  console.log(req.url)
  next()
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T14:02:57.983

关于 express 和 connect 中间件的详细说明检查这个 url [http://www.hacksparrow.com/how-to-write-middleware-for-connect-express-js.html](http://www.hacksparrow.com/how-to-write-midddleware-for-connect-express-js.html)

# ios - GKSession：发送字符串数组

> ID：11725856
> 
> 赞同：1
> 
> 时间：2012-07-30T16:42:36.633
> 
> 标签：ios, nsstring, bluetooth, nsdata, gksession

我希望会话中的一个对等方将一组字符串发送到另一个连接的对等方。有没有办法将这样的数组转换为 NSData 或者我需要一个接一个地发送字符串？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:48:12.533

一个对象`NSArray`是`NSString`一个属性列表。您可以将其转换为`NSData`这样的：

```
NSError *error;
NSData *data = [NSPropertyListSerialization dataWithPropertyList:myArray
    format:NSPropertyListBinaryFormat_v1_0
    options:0
    error:&error]; 
```

您可以将数据转换回属性列表，如下所示：

```
NSError *error;
NSArray *myArray = [NSPropertyListSerialization propertyListWithData:data
    options:NSPropertyListImmutable
    format:NULL
    error:&error]; 
```

# c# - 如何检查常量中是否存在字符串

> ID：11725857
> 
> 赞同：1
> 
> 时间：2012-07-30T16:42:47.460
> 
> 标签：c#, .net

请不要告诉我改用枚举。如何检查“testStr”是否在结构“供应商”中？

```
public struct Supplier {
    public const string
        NA = "N/A",
        companyA = "companyA",
        companyB = "companyB";
}

string testStr = "companyA"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T16:51:50.560

这可以通过反射来实现：

```
void Main()
{
  // make sure that we only take public static const
  string phrase = "companyA";
  var fields = typeof(Supplier).GetFields(BindingFlags.Static | BindingFlags.Public).Where(i => i.IsLiteral);
  foreach (FieldInfo field in fields)
  {
    string val = field.GetRawConstantValue().ToString();
    string msg = string.Format("is '{0}' equal to '{1}' => {2}", val, phrase, val == phrase);
    Console.WriteLine(msg);
  }
}

// Define other methods and classes here
public struct Supplier {
    public const string
        NA = "N/A",
        companyA = "companyA",
        companyB = "companyB";
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T16:53:12.717

这应该这样做

```
 string toSearch = "companyA";
            var hasField = typeof(Supplier).GetFields(BindingFlags.Public | BindingFlags.Static).
                Select(x => x.GetRawConstantValue().ToString()).Contains(toSearch); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T16:49:02.293

您可以构造一个数组，并使用 LINQ 来搜索它：

```
if (new[] {Supplier.NA, Supplier.companyA, Supplier.companyB}.Contains(testStr)) {
    ...
} 
```

顺便说一句，我假设您意识到`struct Supplier`定义的方式是非常非正统的（这是最礼貌的说法），因为它没有字段，只有常量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T16:56:17.970

您需要使用反射来检索结构的成员名称。这很容易：

```
using System.Reflextion;

static void Main()
{
    if (MemberExists(typeof(Supplier), testStr))
        Console.WriteLine(testStr + " exists in Supplier");
    else
        Console.WriteLine(testStr + " does not exists in Supplier");
}

public bool MemberExists(Type structure, string name)
{
    foreach(MemberInfo member in structure.GetMembers())
        if (member.Name == name) return true;
    return false;
} 
```

希望这会对您有所帮助，正如您从不同的答案中看到的那样，反射中有很多可用的选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-25T08:39:41.160

尽管这本身并不能回答您的问题，但我从与您的想法相似的想法开始，但将其转移到了其他东西。反射比你可能想要的要慢（至少对我来说），所以我没有使用反射来解决我的问题，而是将原始结构恢复为字符串列表（如果值的数量是恒定的，则为字符串数组）并使用包含扩展方法。

它是一个简单的单列。它简化了您的搜索代码，同时不会增加您的内存消耗，也不会增加您的复杂性（根据我的计算，它比使用反射更快）。

所以基本上你的枚举将有一个三个字符串的数组。您需要记住哪个是数组中的哪个，然后只需调用`Array.Contains`方法来检查您拥有的字符串是否存在于该数组中

# android - Android Jelly Bean OS 上的推送通知

> ID：11725867
> 
> 赞同：4
> 
> 时间：2012-07-30T16:43:20.297
> 
> 标签：android, android-notifications, android-4.2-jelly-bean

我们注意到 Jelly Bean OS 在“应用信息”部分下有一个“显示通知”设置。

我们一直在为我们的应用程序实施推送通知，我们会在用户首次启动应用程序时询问他们是否允许推送通知。
由于在 Jelly Bean (JB) 之前的版本中没有可用的全局通知设置，因此我们在应用程序的设置菜单中设置了通知开/关切换。但是，由于 JB 设备在应用程序之外有一个用户可以切换的通知设置，现在我们需要跟踪 2 个切换（一个在应用程序外部，一个在应用程序内部）。

对于 JB 设备上的通知，推荐的最佳做法是什么？是否有我们可以使用的 API，以便我们知道用户是否在我们的应用程序之外启用了“通知”？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:53:31.300

我建议编写一个简单的测试用例来验证它。创建一个尝试启动通知的应用程序，运行它，验证您是否收到通知。关闭通知，取消选中您的测试应用的“显示通知”，然后再次运行它。我倾向于相信 NotificationManager 如果用户关闭了您的应用程序的通知，则会忽略您显示通知的请求。您*可能*无需在应用程序中执行任何操作即可支持新的操作系统功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:57:34.313

我不是 100% 确定，但我认为您不必跟踪这两个切换。我会假设 System -> Apps 区域中的那个会覆盖你所做的任何事情。所以：

您的应用程序开启，系统应用程序开启 - 通知开启！

您的应用程序打开，系统应用程序关闭 - 通知关闭！

您的应用程序关闭，系统应用程序开启 - 通知关闭！

# azure - 来自 webrole 的 Azure 工作人员内部端点

> ID：11725870
> 
> 赞同：0
> 
> 时间：2012-07-30T16:43:21.980
> 
> 标签：azure, zeromq

我创建了一个具有两个角色的托管服务——一个网络角色和一个工作角色。我想使用 ZeroMQ 在内部角色之间进行通信（我计划创建一堆这样的托管服务，每个服务处理的数据略有不同）。我想知道如何从 web 角色中找出工作角色的内部 IP 地址，反之亦然，以便我可以在 ZMQ 的 connect() 中使用它们。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:48:15.463

是的，这是可能的。您可以通过 RoleEnvironment 访问您的角色，然后您可以访问您的实例、您的端点，...

```
foreach (var role in RoleEnvironment.Roles)
{
    // Access role.Key to identify the role.

    foreach (var instance in role.Value.Instances)
    {
        // Access instance.Id to identify the instance.

        foreach (var endpoint in instance.InstanceEndpoints)
        {
            // Access endpoint.Key to identify the endpoint.

            System.Net.IPAddress ip = endpoint.Value.IPEndpoint.Address;
            int port = endpoint.Value.IPEndpoint.Port;
        }
    }
} 
```

# windows-7-x64 - 强制漫游配置文件缓存

> ID：11725876
> 
> 赞同：1
> 
> 时间：2012-07-30T16:43:43.400
> 
> 标签：windows-7-x64, group-policy, roaming-profile

我在公共图书馆场景中，并使用通过组策略锁定的漫游强制配置文件。如果我没有在计算机策略中设置“删除漫游配置文件的缓存副本”，我应用的其他策略将无法正常工作（我可以访问我不应该能够访问的内容）。如果我确实将该设置设置为“启用”，则一切正常。

我希望能够缓存配置文件，因此它们可能不会在每次重新启动时下载，但这对我来说是一个挂断。

当我运行 RSOP 或 GPresult 时，似乎一切都在应用，所以我不知道为什么这不起作用，但我对缓存配置文件并不十分熟悉，并且希望有任何建议。

有问题的客户端是 Windows 7 64 位，我的 DC 是 Windows 2003。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:46:32.147

每次都会从服务器下载强制配置文件，无论本地机器上是否有缓存副本，缓存副本仅在网络不可用时允许登录。

我只会启用该策略。

来源：[http ://www.sepago.de/helge/2010/01/24/are-mandatory-user-profiles-deleted-at-logoff-or-cached/](http://www.sepago.de/helge/2010/01/24/are-mandatory-user-profiles-deleted-at-logoff-or-cached/)

# sql - 数据库关系多对多3方式混淆

> ID：11725878
> 
> 赞同：1
> 
> 时间：2012-07-30T16:43:47.873
> 
> 标签：sql, sql-server, database, sql-server-2008, relational-database

我有一个简单的数据库，我想创建一个预订和调度系统。为了达到我的目标，它是开放的，所以如果需要的话，不用担心改变设计。

以下是 ERD：

![在此处输入图像描述](../Images/c4d375857ca7e4c39b86b25922c2b09f.png)

问题如下： 我有成员可以在特定时间（预订期）预订特定地点（可预订区域） 当前的关系集允许许多成员在许多地方多次预订，并且这些可能重叠。即它允许双重预订或人们同时预订两个地方（即一次在两个地方）。

我的问题是，如何修改此数据库的设计以严格允许以下情况：会员只能预订一个地方，但可以多次预订（即 9-9:30、9:30-10、10-10:30等）。有效地允许会员预订一个地点和时间。一经预订，其他会员不得预订同一地点和时间。他们可以预订同一个地方但在不同的时间，或者在同一时间但不同的地方但不能同时预订。

我需要改变什么才能做到这一点。我宁愿只在关系中这样做，因为这很明显，但是，作为最后的手段，如果没有办法使用关系来做到这一点，我会求助于触发器，但我不想使用它们，因为它们不是和 erd 一样明显。

提前感谢您的帮助。

编辑 1：触发器和检查约束确实可以作为答案，我绝不会说这不是规范或不正确。如果这是我能做到的唯一方法，那么我将不得不这样做。但是，我之所以这样问，是因为我希望让其他程序员尽可能清楚地看到这种情况，所以这就是为什么我正在寻找一种通过关系来实现它的方法。但是，我确实接受这可能是不可能的。我只是不确定，所以这个问题。

编辑 2：我知道我说过我想在不使用约束或触发器的情况下这样做，但似乎如果不采取会使事情过于复杂的极端措施，就不可能做到这一点。但是，我确实喜欢过于复杂的答案，因为它显示了一些关于关系的真正好的想法。感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:15:25.143

**原始回复**

如果我理解正确，以下场景显示了允许和不允许的示例。

```
Member            Book Time              Book Place
-----------------------------------------------------
John              0900-1000              Room 1
John              1000-1100              Room 1
John              1100-1200              Room 1
John              0900-1000              Room 2        <--- not allowed, member double booked
Jane              0900-1000              Room 1        <--- not allowed, room double booked 
```

所以，你想要强制的是两个不同组的唯一性。一组是会员和预订时间，另一组是预订时间和预订地点。

您可以在这些列上创建两个唯一键，`Bookings`以强制任何组都不能重复。也就是说，具有重复 Book Time 的 Member 不能重复，因为它会违反唯一约束，并且具有重复 Book Places 的 Book Time 不能重复，原因相同。

编辑：我看到你在这种情况下完全反对约束，所以我的回答可能毫无意义。

EDIT2：我的解决方案假设您建立一个代理键作为`Bookings`表的主键。很抱歉没有提到这一点。

**替代选项**

这是我想到的一个古怪的想法。您可以维护 6 个表。

```
Member
BookTime
BookPlace
Member_BookTime
BookPlace_BookTime
Member_BookTime_BookTime_BookPlace 
```

好吧，在你注销我之前，听我说完！您的图表有 4/6 的这些表。我提议拆分成员、BookTimes 和 BookPlaces 之间的关系。

下面有一个代理主键和一个复合唯一键，以保证一次没有成员被重复预订。

```
Member_BookTime
---------------
ID (PK)
Member_ID (CUK)
BookTime_ID (CUK) 
```

并且下面有一个代理主键和一个复合唯一键，以保证一次没有房间被重复预订。

```
BookPlace_BookTime_ID
------------------
ID (PK)
BookPlace_ID (CUK)
BookTime_ID (CUK) 
```

并且下面有一个复合主键和成员的预订时间和房间的预订时间之间的关系，以最终将成员与特定时间的房间联系起来。

```
Member_BookTime_BookTime_BookPlace
----------------------------------
Member_BookTime_ID (CPK)
BookPlace_BookTime_ID (CPK) 
```

这有什么意义吗？在上述模式中，会员不能重复预订，房间不能重复预订。我意识到这可能是“过度规范化”，但它使关系更加清晰。

建议的约束并不是真正“隐藏”的，因为它们显示在用于定义表的 SQL 中。我了解您希望从 ERD 中显示有关数据约束的所有内容，但有时约束过于复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:32:34.253

如果您只想支持 30 或 15 分钟的间隔，我们可以执行以下操作。

周期表如下所示：

```
 ID     StartPeriod End Period
   1      0:00        0:15
   2      0:15        0:30 
   3      0:30        0:45 
   4      0:45        1:00 
   5      1:00        1:15 
```

*等等

因此，如果您希望会员 1 在 2012 年 7 月 30 日午夜至凌晨 12:30 预订区域 1，预订描述为“睡眠”，记录将如下所示

```
 BookingInfo
    Id    Description
    1     "Sleep"

    Bookings
    Id     MemberId PeriodID BookingInfoId BookableAreaId Day
    1      1        1        1             1              7/30/2012
    2      1        2        1             1              7/30/2012 
```

然后，您可以在 Bookings 上放置两个唯一索引，其中一个为 MemberId,Day,PeriodId（这将防止它们被安排在同一天的同一时间）

一个用于 BookableAreaId、Day、PeriodId（这将防止某人在同一天以相同的 15 分钟间隔重复预订同一区域）

您还可以删除 Id 字段作为 Bookings 表上的主键，并将其中一个唯一索引替换为这些字段上的主键。

抱歉格式模糊，我是这个网站的新手。由于我无法发布图片，因此将 ERD 作为链接附加（直到我获得足够的代表）

[ERD](http://i.stack.imgur.com/Ltd2l.jpg)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T17:37:10.387

我会像这样更改您的数据模型：

BookingPeriods 将包含一个时间段列表。例如。您可以在早上和下午预订，这将使 StartTime 上午 9 点和 EndTime 下午 1 点。或者以一个小时为单位，这意味着记录上午 9 点到 10 点、上午 10 点到 11 点等。

```
Create table BookingPeriods (
    id int primary key
  , StartTime Time
  , EndTime Time
  , Description varchar(max)
) 
```

BookingAvailability 将是时间段和日期之间的简单映射。所以你有一个每个日期的列表，其中可能有哪些时间段

```
Create table BookingAvailability(
    id int primary key
  , Day Date
  , PeriodId int references BookingPeriods(id)
    constraint uq_bookingAvailability unique (Day, PeriodId)
) 
```

BookableAreas 只是成为物理位置的列表。

```
Create table BookableAreas(
    id int primary key
  , Name varchar(100)
  , ActivityTypeId int
  , Description varchar(max)
) 
```

成员保持不变

```
Create table Members(
    id int primary key
  , FirstName varchar(100)
  , ...
 ) 
```

然后预订就变成了所有东西都汇集在一起​​的桌子。您每个可用性记录和区域的唯一记录。memberid 只是记录的一些辅助信息。

```
Create table Bookings(
    id int primary key
  , AvailabilityId int references BookingAvailability(id)
  , AreaId int references BookableAreas(id)
  , MemberId int references Members(id)
    constraint uq_Bookings unique (AvailabilityId, AreaId)
) 
```

该数据模型将按如下方式使用：

确保永远不要在此处的时隙中注册“重叠”。例如，如果您想要更细粒度的细节，您需要每小时创建一条记录。

```
INSERT INTO BookingPeriods (id, StartTime, EndTime, Description)
VALUES (1, '9:00 AM', '12:00 AM', 'Morning'), 
       (2, '1:00 PM', '4:00 PM', 'Afternoon') 
```

这是您可以预订的可能时间段列表。（例如周末的日期不包括在内）

```
INSERT INTO BookingAvailability(id, [Day], PeriodId)
VALUES (1, '20120801', 1),
       (2, '20120801', 2),
       (3, '20120801', 1),
       (4, '20120801', 2),
       (5, '20120801', 1),
       (6, '20120801', 2)

INSERT INTO BookableAreas (id, Name, ActivityTypeId, Description)
VALUES (1, 'Ground Floor', 1, 'The ground floor room'),
       (2, 'East Wing Room', 1, 'The east wing room on the first floor'),
       (3, 'West Wing Room', 1, 'The west wing room on the first floor')

INSERT INTO Members(id, FirstName)
VALUES (1, 'Barak'),
       (2, 'Tony'),
       (3, 'George') 
```

在这里，我们尝试创建实际的预订。

```
INSERT INTO Bookings(id, AvailabilityId, AreaId, MemberId)
VALUES (1, 3, 1, 1) -- Barak books the ground floor on 20120801 in the morning

INSERT INTO Bookings(id, AvailabilityId, AreaId, MemberId)
VALUES (2, 3, 1, 2)  -- Tony books the ground floor on 20120801 in the morning --> error

INSERT INTO Bookings(id, AvailabilityId, AreaId, MemberId)
VALUES (2, 4, 1, 2)  -- Tony books the ground floor on 20120801 in the afternoon --> ok 
```

# c++ - lambda 作为静态成员

> ID：11725881
> 
> 赞同：28
> 
> 时间：2012-07-30T16:43:56.047
> 
> 标签：c++, lambda, c++11, language-lawyer, constexpr

我正在尝试使用 lambda 作为静态成员，如下所示：

```
struct A
{
    static constexpr auto F = [](){};
};

int main()
{
    A::F();
    return 0;
} 
```

这甚至是正确的 C++11 代码吗？在铿锵声中，我收到此错误：

```
error: constexpr variable 'F' must be initialized by a constant
      expression
    static constexpr auto F = [](){};
                              ^~~~~~ 
```

在 clang 中，lambda 似乎不被视为常量表达式。它是否正确？也许他们还没有在 clang 中完全实现 lambdas，因为 gcc 4.7 似乎允许它作为 a `constexpr`，但它给出了另一个错误：

```
error: ‘constexpr const<lambda()> A::F’, declared using local type ‘const<lambda()>’, is used but never defined 
```

我不确定，我明白这意味着什么。它似乎正确地推断出 lambda 的类型，但它只声明它而不定义它。我将如何定义它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-31T06:06:17.277

此代码格式错误。变量需要`constexpr`由常量表达式初始化，并`[expr.const]p2`表示：

> *条件表达式*是*核心常量表达式*，除非它涉及以下之一作为潜在评估的子表达式 [...]：
> 
> *   一个*lambda 表达式*

因此，GCC 接受此代码是不正确的。

这是给类一个 lambda 类型的静态数据成员的一种方法：

```
auto a = []{};
struct S {
  static decltype(a) b;
};
decltype(a) S::b = a; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-27T18:00:37.090

只要 lambda 不捕获任何内容，您就可以在 clang 3.4 中使其工作。这个想法直接来自[Pythy](http://pfultz2.github.io/Pythy/)。

```
#include <type_traits>
#include <iostream>
template<typename T>
auto address(T&& t) -> typename std:: remove_reference<T> :: type *
{
        return &t;
}

struct A
{
        static constexpr auto * F = false ? address(

                [](int x){ std:: cout << "It worked. x = " << x << std:: endl;

                }
        ) : nullptr; // a nullptr, but at least its *type* is useful
};

int main()
{
    (*A::F)(1337); // dereferencing a null. Doesn't look good
    return 0;
} 
```

这里有两个可能引起争议的地方。首先，事实上`A::F`是`constexpr`，但它的定义中有一个 lambda。

那应该是不可能的吧？不，三元表达式`b ? v1 : v2`可以是 a`constexpr`而不需要所有三个`b`, `v1`,`v2`都是`constexpr`。仅与其余两个之一一起就足够`b`了*（*`constexpr`取决于是还是。这里是，这将选择 的最后部分，即。*`b``true``false``b``false``?:``nullptr`*

 *换句话说`false ? a_non_constexpr_func() : a_constexpr_func()`是一个`constexpr`。无论如何，这似乎是clang中的解释。我希望这是标准中的内容。如果不是，我不会说clang“不应该接受这个”。这似乎是对规则的有效放宽。a 的未评估部分`?:`是未评估的，因此它`constexpr`应该无关紧要。

无论如何，假设这没问题，这给了我们`nullptr`正确类型的 a，即指向 lambda 的指针的类型。第二个有争议的`(*A::F)(1337);`地方是我们取消引用空指针的地方。但是上面链接的[页面](http://pfultz2.github.io/Pythy/)认为这不是问题：

> 看来我们正在取消对空指针的引用。请记住，在 C++ 中取消引用空指针时，当存在左值到右值的转换时会发生未定义的行为。但是，由于非捕获 lambda 闭包几乎总是作为没有成员的对象来实现的，因此永远不会发生未定义的行为，因为它不会访问其任何成员。非捕获 lambda 闭包极不可能以另一种方式实现，因为它必须可转换为函数指针。但是库确实静态地断言闭包对象是空的，以避免任何可能的未定义行为。*

# c - div() 库函数的用途是什么？

> ID：11725884
> 
> 赞同：8
> 
> 时间：2012-07-30T16:43:58.970
> 
> 标签：c, division, standard-library

当 C 有`/`运算符将两个数字相除时，具有[`div()`库函数](http://en.cppreference.com/w/c/numeric/math/div)的目的是什么？

`/`有没有不能用但能用的场景`div()`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-30T16:51:42.907

来自 C99 基本原理文档：

> （7.20.6.2 div、ldiv 和 lldiv 函数）因为 C89 在涉及负操作数时具有实现定义的有符号整数除法语义，所以发明了 div 和 ldiv 以及 C99 中的 lldiv，以便为有符号整数提供明确指定的语义整数除法和余数运算。语义被采用与 Fortran 中的相同。由于这些函数同时返回商和余数，因此它们还可以作为一种有效建模底层硬件的便捷方法，将计算这两个结果作为同一操作的一部分。[...] 现在 C99 要求除法运算符具有类似的语义，新程序使用 div、ldiv 或 lldiv 的主要原因是同时获得商和余数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-11-10T03:09:00.663

引自[C 编程：现代方法，第 2 版](http://knking.com/books/c2/)，第 26 章，问答部分。

> **问：为什么存在 div 和 ldiv 函数？我们不能只使用 / 和 % 运算符吗？**
> 
> A：`div`and 和 and不太`ldiv`一样。回想一下第 4.1 节，在 C89 中将和应用于负操作数不会给出可 **移植的结果。**如果or是负数， 的值 是向上还是向下舍入是**实现定义**的，就像 的符号一样 。另一方面， 由and计算的答案**不依赖于 implementation**。商向零舍入；余数根据公式计算，其中是原数，是商，是除数，`/``%``/``%`**`i``j``i / j`**`i % j``div``ldiv`**`n = q x d + r``n``q``d``r`是余数。这里有一些例子：******
> 
>  ******```
>  n      |  d     |  q     |  r
> --------|--------|--------|--------
>  7      |  3     |  2     |  1
> -7      |  3     | -2     | -1
>  7      | -3     | -2     |  1
> -7      | -3     |  2     | -1 
> ```
> 
> 在 C99 中，`/`and`%`运算符**保证**`div`产生与and相同的结果 `ldiv`。
> 
> 效率是存在的另一个`div`原因`ldiv`。许多机器都有一个可以计算商和余数的指令，因此调用`div` or`ldiv`可能比单独使用and运算符**更快**。`/``%`******

 ***** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T16:45:42.730

`div_t`是一个结构，它包含一个商成员*和*一个余数成员。例如 ：

```
typedef struct {
    int quot;
    int rem;
} div_t; 
```

`div`函数使用`/`和操作符的一些简单实现`%`。你也可以看到[这个话题](https://stackoverflow.com/questions/6718217/is-div-function-useful-stdlib-h)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T16:47:45.667

`div()`返回`result`除法的**和**`remainder`。因此，您不必使用`%`运算符来查找`remainder`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T17:13:09.293

正如其他人所提到的，`div()`会给你商和余数。这是因为大多数 C 运行时使用的（软件）整数除法算法同时计算两者。

如果目标计算机没有硬件分隔器，则`/` 操作员通常会被调用，`div()`而其余的则被丢弃。运算符也会发生同样的事情，`%` 只是它是被抛出的商。所以如果你正在做这样的事情：

```
quot = a / b;
rem = a % b; 
```

您调用了两次除法例程（如果您的计算机不在硬件中执行，除法会非常慢）。所以使用 `div()`两者都更快。

（当然，它的可读性也较差，您是否真正获得任何性能优势取决于您的特定平台和编译器。只有`div()`在确定它是性能瓶颈时才应该切换到它。记住 Knuth 所说的过早优化。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-02T17:00:07.177

**太慢了，却又是多余的。** 至少 glibc 文档说明了使用 gcc 的情况。我尝试 div 重新实现现有的 itoa() 函数（整数到 ascii），期望 gcc 有内置实现这样一个微不足道的事情，但 gcc 没有它。

```
char *p = buf;
div_t d = {.quot = n};

while (1)
    d = div (d.quot, 10) ,
    *p++ = '0' + d.rem   ; 
```

上面的代码比使用单独的运算符慢 5..7 倍：

```
char *p = buf;

while (1)
    *p++ = '0' + n % 10,
    n /= 10; 
```****

# android - Android WebView 有时会显示浏览器选择屏幕

> ID：11725886
> 
> 赞同：1
> 
> 时间：2012-07-30T16:43:59.873
> 
> 标签：android, webview, android-webview

在创建我的活动时，我正在触发一个加载处理程序（同时显示一个微调器），除此之外，在该处理程序代码中，我在三个私有 WebView 对象上调用 loadURL。

这样做的目的是预先缓存这些网页，然后每个网页都依赖于按钮触摸事件来显示。实际加载和显示工作正常，除了有时（还看不到模式）我（或我的测试人员）无缘无故地获得浏览器选择屏幕（例如 Chrome / Firefox）。

所以我的第一个问题是什么会导致这种情况，以及如何防止它发生？

否则，您将如何执行以下操作：

1.  预缓存三个网页的结果（简单的 HTML、没有图像的表格等）。
2.  依赖于按钮触摸显示网页的结果在屏幕上的布局（每次相同的布局，所以当按钮 2 被触摸时，它对应的网页会替换前一个）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:41:15.667

从不喜欢回答我自己的问题，但因为唯一的答案与问题无关。

似乎问题是由重定向引起的，正在加载的网页实际上并没有重定向它，但是服务器正在执行来自子域的内部重定向。我用下面的代码解决了这个问题。

```
this.wvBasic.setWebViewClient(new WebViewClient() {
    private String pendingUrl;

    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        if (pendingUrl == null) {
            pendingUrl = url;
        }
    }

    @Override
    public void onPageFinished(WebView view, String url) {
        if (!url.equals(pendingUrl)) {
            Log.d(TAG, "Detected HTTP redirect " + pendingUrl + "->" + url);
            pendingUrl = null;
        }
    }
});
this.wvBasic.getSettings().setJavaScriptEnabled(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:55:34.787

这是完全正常的行为。您创建一个`intent`，并且操作系统正在搜索一个具有适当`intent-filter`处理它的活动`startActivity(intent)`。由于有更多应用程序可以处理您的意图（在您的情况下是更多浏览器），因此操作系统为您提供了从这些活动中进行选择的可能性。

现在，我检查了[这个](https://stackoverflow.com/questions/3955786/how-to-exclude-my-own-activity-from-activity-startactivityintent-chooser)线程，它似乎是您正在寻找的信息。根据[文档](http://developer.android.com/reference/android/content/pm/PackageManager.html#queryIntentActivityOptions%28android.content.ComponentName,%20android.content.Intent[],%20android.content.Intent,%20int%29)，可以`retrieve a set of activities that should be presented to the user as similar options`。如果您能够过滤这些活动，以便您的应用使用**内置浏览器**（保证安装在所有设备上），那么您就可以开始了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-27T13:00:54.010

一个简单的解决方案是：

```
// Force links and redirects to open in the WebView instead of in a browser
mWebView.setWebViewClient(new WebViewClient()); 
```

来源：[https ://developer.chrome.com/multidevice/webview/gettingstarted](https://developer.chrome.com/multidevice/webview/gettingstarted)

# sql - sql 聚合重复数据并在末尾追加附加数据

> ID：11725888
> 
> 赞同：1
> 
> 时间：2012-07-30T16:44:02.643
> 
> 标签：sql, sql-server

我将数据存储在如下格式的表格中。Heading1、heading2 等是列名。如您所见，我有重复的数据 abcd，然后是两个不同的值。我想查询这个，以便我可以得到第二个提到的输出。例如，heading1,2,3,4 中的前四行相同，因此输出必须为 abcd 1 1 2 2 3 4 4 5，我的意思是我只是将所有重复数据分组并将不同的数据添加到一行中。这可能吗？

原始数据

```
heading1 | heading2 | heading3 | heading4 | heading5 | heading6         
----------------------------------------------------------------------------------------
a | b | c | d | 1 | 1 |         
a | b | c | d | 2 | 2 |         
a | b | c | d | 3 | 4 |         
a | b | c | d | 4 | 5 |         
a | b | d | c | 5 | 5 | 
```

需要输出

```
heading1 | heading2 | heading3 | heading4 | heading5 | heading6 | | |   
----------------------------------------------------------------------------------------    
a | b | c | d | 1 | 1 | 2 | 2 | 3| 4 |  5 

a | b | d | c | 5 | 5 | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:25:29.497

基于[这篇](http://blog.shlomoid.com/2008/11/emulating-mysqls-groupconcat-function.html)文章：

```
DECLARE @TABLE TABLE
(
    heading1 NVARCHAR(1)
    , heading2 NVARCHAR(1)
    , heading3 NVARCHAR(1)
    , heading4 NVARCHAR(1)
    , heading5 NVARCHAR(1)
    , heading6 NVARCHAR(1)
)

INSERT INTO @TABLE
          SELECT 'a', 'b', 'c', 'd', '1', '1'
UNION ALL SELECT 'a', 'b', 'c', 'd', '2', '2'
UNION ALL SELECT 'a', 'b', 'c', 'd', '3', '4'
UNION ALL SELECT 'a', 'b', 'c', 'd', '4', '5'
UNION ALL SELECT 'a', 'b', 'd', 'c', '5', '5'

DECLARE @CONCAT VARCHAR(500)

SELECT heading1, heading2, heading3, heading4
    , cols5and6
FROM @TABLE a
CROSS APPLY
(
    SELECT heading5 + ' | ' + heading6 + ' | '
    FROM @TABLE b
    WHERE a.heading1 = b.heading1
        AND a.heading2 = b.heading2
        AND a.heading3 = b.heading3
        AND a.heading4 = b.heading4
    FOR XML PATH('')
) d (cols5and6)
GROUP BY heading1, heading2, heading3, heading4, cols5and6 
```

输出：

```
heading1    heading2    heading3    heading4    cols5and6
a   b   c   d   1 | 1 | 2 | 2 | 3 | 4 | 4 | 5 | 
a   b   d   c   5 | 5 | 
```

# python - 将 numpy 行组合到一个数组中

> ID：11725891
> 
> 赞同：0
> 
> 时间：2012-07-30T16:44:16.990
> 
> 标签：python, numpy

我有一个 while 语句在 numpy 中生成一个数组

```
while(i<int(sp)): 
   body=(np.bincount(un[i].ravel().astype('int'), weights=step_periods[i].ravel())) 
   print(body) 
   i=i+1 
```

每次迭代都会产生一个数组，如下所示：

```
1st    [  0\.   0\.   0\.  30.]

2nd    [  0\.   0\.  21\.  18\.  15.]

3rd    [  0\.  24\.  27\.   0\.   3.] 
```

我的第一个问题是，如果第一个数组的最后一个值是“0”，它将把它排除在数组之外。有没有办法将其转换为：

```
[  0\.   0\.   0\.  30.] 
```

至：

```
[  0\.   0\.   0\.  30\.  0.] 
```

从那里我想简单地将每个数组附加到一个主数组，以便最终输出类似于：

```
 [[  0\.   0\.   0\.  30\.  0.0],

    [  0\.   0\.  21\.  18\.  15.],

   [  0\.  24\.  27\.   0\.   3.]] 
```

我研究了 appending 和 vstack，但无法让它在“while”语句中工作，或者可能是因为省略了结尾的“0”，它们的大小不一样！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:21:25.953

一种解决方案——如果你可以保证的长度`body`总是小于（或等于）5，你可以预先分配数组：

```
import numpy as np
my_array = np.zeros((int(sp)-i,5),dtype=int)
for ii in range(i,int(sp)):
    body=(np.bincount(un[i].ravel().astype('int'), weights=step_periods[i].ravel())) 
    my_array[ii,:len(body)]=body 
```

您甚至可以添加一个检查以查看 body 是否太宽并创建一个新数组，将旧部分分配给它......但是在那时，也许需要一个堆叠操作。

# java - 在我的地址前添加“Http://”

> ID：11725896
> 
> 赞同：4
> 
> 时间：2012-07-30T16:44:36.810
> 
> 标签：java

我正在从源中提取地址，但某些提取物在地址前面没有 http://，我如何检查地址是否有 http://，如果他们没有，我如何添加 http:// 前面？:O

得到这个错误，我猜是由于 http://infront 的“缺乏”

```
java.net.MalformedURLException: no protocol: www.speedtest.net
at java.net.URL.<init>(URL.java:583)
at java.net.URL.<init>(URL.java:480)
at java.net.URL.<init>(URL.java:429)
at a.PageRead.r(PageRead.java:29)
at a.ThreadDownloaderWriter.run(ThreadDownloaderWriter.java:35)
at java.lang.Thread.run(Thread.java:722)

 public StringBuilder readPage() {
        try {

            URL url = new URL(this.strURL);
            System.out.println(this.strURL);
            BufferedReader reader = new BufferedReader(new InputStreamReader(url.openStream()));
            String line;
            StringBuilder sb = new StringBuilder();
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            reader.close();

            return sb;
        } catch (MalformedURLException e) {
            e.printStackTrace();
            return new StringBuilder("");
        } catch (IOException e) {
            e.printStackTrace();
            return new StringBuilder("");
        }
    } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-30T16:47:32.090

您的问题的字面答案如下所示：

```
String url = ... ; // Whatever
if (!url.startsWith("http://")) {
    url = "http://" + url;
} 
```

但这仍然不是一个很好的解决方案。例如，`https`URLS 呢？ftp 甚至文件系统 URL ( `file://`) 怎么样。然后你可能想考虑区分大小写之类的事情（“ `http://`”！=“ `HTTP://`”！=“ `HttP://`”即使实际上它们都表示相同的东西并且会被Java的`URL`类接受）。

您可以尝试更加小心：

```
if (!url.toLowerCase().matches("^\\w+://.*")) {
    url = "http://" + url;
} 
```

这会将 URL 字符串的开头与后跟冒号 ( `:`) 和两个斜线 ( `//`) 的任何“单词字符”匹配，然后将其默认为`http://`如果 URL 的协议部分丢失。这将涵盖比原始（字面）答案更多的案例。

最终，如果有人给你一个没有协议部分的 URL，它就是一个无效的 URL。

你应该考虑买一本关于 Java 编程的书，因为这些都是基本的逻辑/Java API 问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-30T16:46:59.017

`startsWith()`您可以使用以下方法检查地址是否以“http://”开头：

```
url.startsWith("http://"); 
```

`true`如果是这种情况，它会返回。

您可能是正确的，缺少“http://”是问题所在。该[文档](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html)似乎表明该协议（此处为http）是强制性的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T16:47:34.663

好吧，根据我在调用之前所说的堆栈跟踪`new URL(your_url)`，检查是否`your_url`以**http://**、**https://**、**ftp://**或您认为需要检查的任何其他协议开头：

```
if(!your_url.startsWith("http://")) 
```

如果缺少，**请**在`your_url`.

```
your_url = "http://" + your_url; 
```

* * *

> 你认为这个错误是由 http:// 引起的吗？——</p>

是的，在您的堆栈跟踪中：

```
java.net.MalformedURLException: no protocol: www.speedtest.net 
```

你有一个 url`www.speedtest.net`并且它必须是`http://www.speedtest.net`. 该错误是由缺少协议引起的。或者，它不必是`http://`，只是一个有效的协议，如`https://`,`file://`等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T16:48:17.787

```
String url = "www.speedtest.net"
if (!url.toLowerCase().startsWith("http://")) url = "http://" + url 
```

然而，这并不适用于所有情况，因为某些网站可能有 https:// 或其他协议。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-24T09:33:43.347

当前投票最高的答案包含不正确的正则表达式。下面的解决方案将匹配任何协议，大写或小写：

```
if (!url.matches("^\\w+?://.*")) {
  url = "http://" + url;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T16:59:29.180

```
String s = "www.google.com";

Pattern p = Pattern.compile("http://");

Matcher m = p.matcher(s);

if (m.lookingAt()){

  System.out.println("Its already there");

}
else{

       String ss = "http://"+s;

       System.out.println(ss);

 } 
```

# haskell - 有没有结合范畴论/抽象代数和计算复杂度的理论？

> ID：11725899
> 
> 赞同：17
> 
> 时间：2012-07-30T16:44:42.470
> 
> 标签：haskell, complexity-theory, category-theory, abstract-algebra

范畴论和抽象代数处理函数与其他函数结合的方式。复杂性理论处理一个函数的计算难度。对我来说很奇怪，我还没有看到有人将这些研究领域结合起来，因为它们看起来很自然。有没有人这样做过？

* * *

作为一个激励性的例子，让我们看一下幺半群。众所周知，如果一个运算是一个幺半群，那么我们可以并行化这个运算。

例如在 Haskell 中，我们可以简单地定义加法是整数上的幺半群，如下所示：

```
instance Monoid Int where
    mempty = 0
    mappend = (+) 
```

现在，如果我们想计算 0 到 999 的总和，我们可以按顺序执行，如下所示：

```
foldl1' (+) [0..999] 
```

或者我们可以并行进行

```
mconcat [0..999] -- for simplicity of the code, I'm ignoring that this doesn't *actually* run in parallel 
```

但是并行化这个幺半群才有意义，因为 mappend 在恒定时间内运行。如果不是这样呢？例如，列表是一个幺半群，其中 mappend 不会运行不固定的时间（或空间！）。我猜这就是为什么 Haskell 中没有默认的并行 mconcat 函数的原因。最好的实现取决于幺半群的复杂性。

* * *

似乎应该有一种方便的方式来描述这两个幺半群之间的差异。然后，我们应该能够用这些差异注释我们的代码，并让程序根据幺半群的复杂性自动选择要使用的最佳算法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T09:09:25.510

我并不声称自己是这些主题的专家，但我也许可以对这个想法有所了解。

让我们首先考虑范畴论。范畴论是对数学结构的高水平研究。范畴的概念很笼统，许多数学对象构成范畴。范畴论最初被认为是极其纯粹和抽象的，但由于这些东西经常出现在数学中，结果证明它在计算机科学[甚至量子力学](http://en.wikipedia.org/wiki/Categorical_quantum_mechanics)等应用学科中有很多用途。Monads 被证明在推理函数程序的语义方面非常有用，这些语义通常用指称表示（因此不强制任何类型的计算顺序，只是结果）。由此也意识到monad也是一个非常好的*设计模式*用于编写函数式程序，它的实用性导致它在 Haskell 的设计中非常突出（即 do 表示法等）。Functors、Applicatives、Monoids，都在后来作为对象不如 monads 强大，但因此也更具应用性（不是双关语！）。

然而，范畴论以更一般的方式研究这类结构，事实证明这与数学（和物理等）的许多领域相关。作为非专家，目前尚不清楚这有多少与复杂性理论有关，但让我们试一试。

复杂性理论关注计算的*可行性*。图灵和其他人已经表明，有些函数通常是不可计算的（例如停机问题、忙碌的海狸问题等），但原则上特定计算有多*容易的问题通常是一个更难的问题。*您可能知道，算法（可以表示为图灵机）可以根据其渐近运行时间归类为复杂性类。已经确定了许多复杂性类别（请参阅[The Complexity Zoo](https://complexityzoo.uwaterloo.ca/Complexity_Zoo)），但对这些类别的结构知之甚少。著名的[P = NP](http://en.wikipedia.org/wiki/P_versus_NP_problem)问题显示了推理复杂性是多么困难。

从对复杂性类的性质以及证明它们之间关系的难度的直觉来看，我认为在复杂性类中建立类别会很棘手。显然图灵机的集合形成了一个范畴，但是 O(n) 中的机器集合呢？还是 P 中的机器集？对于复杂性专家来说，这可能是一个很好的研究方向，但也可能不是！就个人而言，我不能说没有更多的工作。

现在让我们考虑您在 Monoid 和并行化策略中的复杂性示例。如果第二部分看起来与第一部分关系不大，那是因为我认为这些是非常不同的概念。首先是类别和复杂性的数学，其次是某些设计模式中并行化算法的细节。

如果我们知道某个类型是 Monoid，我们可以推断使用它的复杂性是什么？这是来自的类定义`Data.Monoid`

```
class Monoid a where
    mempty  :: a
    mappend :: a -> a -> a
    mconcat :: [a] -> a
    mconcat = foldr mappend mempty 
```

当然，我们不能说复杂性，因为我们所知道的只是类型，正如您所猜测的那样。`mconcat`文档对Data.Monoid中的默认实现有这样的说法：

```
 -- ^ Fold a list using the monoid.
    -- For most types, the default definition for 'mconcat' will be
    -- used, but the function is included in the class definition so
    -- that an optimized version can be provided for specific types. 
```

我要说明的一点是，这`mconcat`不一定能从其他操作的复杂性中概括出来。在许多情况下，很难证明不存在某些更快的算法。`mconcat`在这种情况下可以手动实现。

您还提到自动定义并行策略。Haskell 当然允许定义各种不同的策略，其中许多有用的策略已经在`Control.Parallel.Strategies`. 例如， parList 将策略并行应用于列表的每个元素：

```
parList :: Strategy a -> Strategy [a]
parList strat []     = ()
parList strat (x:xs) = strat x `par` (parList strat xs) 
```

由此可以定义一个并行映射函数。

```
parMap :: Strategy b -> (a -> b) -> [a] -> [b]
parMap strat f xs = map f xs `using` parList strat

using :: a -> Strategy a -> a
using x s = s x `seq` x 
```

请注意，这允许分离实现和并行化。我不认为这种概念可以很容易地自动化，尤其是仅从描述单个算法复杂性的注释中。

综上所述，范畴论有可能成为未来复杂性研究的有用工具。但是我不认为这可能会导致并行化策略的自动生成。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-06T22:41:52.140

从表面上看，复杂性理论家已经做了范畴论式的事情，他们只是用他们自己的语言来表达它。例如，复杂性类别 NP 是一个类别，其中对象是 NP 语言，态射是多项式时间约简。那么一个完全问题就是这个范畴的一个初始对象，所有的NP完全问题都是同构的。正如维克的回答那样，将图灵机视为对象并不是很合理。这主要是因为图灵机是多么的复杂（它们是许多不同模型的图灵机，对于相同的问题具有完全不同的时间和空间复杂性）。但是范畴论的论文思想，即范畴的主要兴趣在于态射，告诉我们态射应该是算法。

另一种观点是层次结构。复杂性类构成了一个包含在内的poset类别，并且有一些很好的限制对象，如P、PSPACE、NC、AC等。

当然，范畴论如何帮助我们证明复杂性理论中的定理，以及通过范畴论解决问题是否比解决原始问题更容易，目前还不清楚。例如，我认为从复杂性类的复杂性类别到组类别的非平凡函子的存在是一个非常具有变革性的结果。它将有可能分离复杂性类别，这在该领域中当然是非常困难的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T18:07:59.973

快速谷歌搜索显示一篇论文：

[重新审视安全递归：降低复杂性的分类语义和类型系统](http://projects.wizardlike.ca/attachments/18/FICS2010.pdf)

我还记得 Japaridze 关于多项式时间算术的作品，请参阅[http://arxiv.org/abs/0902.2969](http://arxiv.org/abs/0902.2969)

我认为您可以从那里开始并参考参考资料。

# r - 从因子生成二分变量

> ID：11725901
> 
> 赞同：0
> 
> 时间：2012-07-30T16:44:46.740
> 
> 标签：r, dataframe, r-factor

我有一个数据框，其中包含一个因素，例如：

```
> var1 <- gl(10, 2, labels=letters[1:10])
> var2 <- c(1:20)
> data <- data.frame(var1=var1,var2=var2)
> data
   var1 var2
1     a    1
2     a    2
3     b    3
4     b    4
5     c    5
6     c    6
7     d    7
...
20    j   20 
```

我正在尝试为特定值生成一个定义为 1 和 0 的二分变量`var1`。但是，当我输入以下代码时：

```
> data <- data.frame(var1=var1,var2=var2)
> data$var3 <- c(1[which(var1=="a" | var1=="b" | var1=="c" | var1=="d" | 
var1=="e")], 0[which(var1=="f" | var1=="g" | var1=="h" | var1=="i" | var1=="j")]) 
```

我得到以下信息：

```
> data$var3
 [1]  1 NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA 
```

第一项更改为 1，但其余变为 NA。我怎样才能得到我想要的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T18:32:25.993

我不确定我什至理解您期望您的代码如何运行，但您似乎只想为来自 var1 的值创建一个 1 的向量，这些值是 a、b、c、d 或 e，以及 0对于其余的。如果是这种情况，那么只需使用`%in%`，它将创建一个逻辑向量，并将其包装起来`as.numeric`以将其转换为 1 和 0。

例子：

```
data$var3 <- as.numeric(data$var1 %in% c("a", "b", "c", "d", "e"))
## Or, shorter:
## data$var3 <- as.numeric(data$var1 %in% letters[1:5]) 
```

* * *

```
> head(data, 3)
  var1 var2 var3
1    a    1    1
2    a    2    1
3    b    3    1
> tail(data, 3)
   var1 var2 var3
18    i   18    0
19    j   19    0
20    j   20    0 
```

# c# - 本地和实时服务器之间的返回路径不同

> ID：11725904
> 
> 赞同：0
> 
> 时间：2012-07-30T16:45:05.963
> 
> 标签：c#, asp.net-mvc-3, iis-7, asp.net-mvc-routing

我正在使用这样的方法来获取我的应用程序的 URL 路径：

```
string strPathAndQuery = HttpContext.Request.Url.PathAndQuery;
string strUrl = HttpContext.Request.Url.AbsoluteUri.Replace(strPathAndQuery, "/"); 
```

这应该是指向当前 URL 的路径。

问题是，我的实时服务器将应用程序作为 IIS 服务器内的应用程序（文件夹）运行。因此，在测试 a 时，我得到一个 URL，例如：

```
http://localhost/Survey/Create 
```

我得到了：

```
http://testurl.com/Survey/Create 
```

当我需要实时服务器时：

```
http://testurl.com/SurveyApp/Survey/Create 
```

SurveyApp 是在 IIS 中存储应用程序的文件夹。有没有一种方法可以获取控制器所在位置的 URL，而不管物理位置如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:55:50.957

出于这个原因，MVC 有方法，例如 Url.Content。当您使用“~/Survey/Query”之类的应用程序目录相对路径时，这些将解析当前 url。您还可以使用 Html.ActionLink 或 Url.Action 之类的方法来获取特定操作方法的 url。这些将根据您的正确路径进行调整。

您能否更具体地说明您为什么要尝试获取路径？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:49:27.387

您是否尝试在相对 URI 前添加 ~ 符号。例如，要链接`/Survey/Query`使用`~/Survey/Query`

编辑：

怎么样`HttpContext.Current.Request.ApplicationPath`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:15:57.973

Url.Content 是您想要的。就像是：

```
string url = Url.Content("Query", "Survey"); 
```

第一个参数是动作，第二个是控制器。 [http://msdn.microsoft.com/en-us/library/dd492758](http://msdn.microsoft.com/en-us/library/dd492758)

您还可以使用很多重载。

# python - 创建列表的字典

> ID：11725905
> 
> 赞同：2
> 
> 时间：2012-07-30T16:45:06.790
> 
> 标签：python, python-2.6

希望我在标题中已经解释得足够好，但这是我所拥有的：

输入数据：

```
Mushroom Kingdom, Mario

Hyrule, Link

Mushroom Kingdom, Bowser

Zebes, Samus

Zebes, Metroid 
```

我想运行这样的东西，

```
# The next three lines establish that I'll be reading proc as a file
import subprocess
cmd = 'external command that returns the above data'
proc = subprocess.Popen(cmd, stdout=subprocess.PIPE)

homeworlds = {}

while True:
  line = proc.stdout.readline().split(',')
  if line:
    # If line isn't empty
    homeword = line[0]
    person = line[1]

    homeworlds[homeword] = list.append[person] # Good logic? Bad syntax?

  else:
   break 
```

目标是我将能够调用：

```
print homeworlds['Mushroom Kingdom'] 
```

并返回列表

```
Mario, Bowser 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:51:01.193

在这里使用 a 更容易[`defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)。此外，您当前正在调用`split()`没有任何参数。你真正想做的是在`,`. 所以你应该打电话`split(',')`。

所以你的代码应该看起来像这样：

```
homeworlds = collections.defaultdict(list)
while True:
  line = proc.stdout.readline().split(',')
  if line:
    # If line isn't empty
    homeworld = line[0].strip()
    person = line[1].strip()

    homeworlds[homeworld].append(person)

  else:
    break 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T16:48:31.807

```
 if not homeword in homeworlds:
    homeworlds[homeword] = list()
 homeworlds[homeword].append(person) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T16:51:47.570

利用`defaultdict`

```
from collections import defaultdict
homeworlds = defaultdict(list)

homeworlds[homeword].append(person) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T16:59:49.883

这是一个一致而优雅的解决方案（部分灵感来自其他答案）：

```
#!/bin/env python
from collections import defaultdict

lines = """Mushroom Kingdom, Mario

Hyrule, Link

Mushroom Kingdom, Bowser

Zebes, Samus

Zebes, Metroid
"""

homeworlds = defaultdict(list)

for line in lines.splitlines():
    if line and ',' in line:
        key, value = line.split(',')
        homeworlds[key].append(value.trim())

print(homeworlds) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T17:07:42.843

```
Python 2.7.3rc2 (default, Apr 22 2012, 22:30:17) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> input_data = [('Mushroom Kingdom', 'Mario'),
...  ('Hyrule', 'Link'),
...  ('Mushroom Kingdom', 'Bowser'),
...  ('Zebes', 'Samus'),
...  ('Zebes', 'Metroid')]
>>> homeworlds = {}
>>> for homeword,person in input_data:
...   homeworlds.setdefault(homeword, []).append(person)
... 
>>> homeworlds
{'Hyrule': ['Link'], 'Zebes': ['Samus', 'Metroid'], 'Mushroom Kingdom': ['Mario', 'Bowser']}
>>> print(homeworlds['Mushroom Kingdom'])
['Mario', 'Bowser']
>>> print("{0}".format(', '.join(homeworlds['Mushroom Kingdom'])))
Mario, Bowser 
```

在您的情况下，换入 for 循环： 'input_data' for 'line'

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T16:49:54.117

尝试这个：

```
if homeword not in homeworlds:
    homeworlds[homeword] = []
homeworlds[homeword].append(person) 
```

这将检查是否有`homeword`in的条目`homeworld`。如果没有，它会在那里添加一个列表。然后我们确定我们有一个列表，`homeworld[homeword]`所以我们可以调用`.append(person)`它。

# web - 我应该使用哪个 WebCL 原型？

> ID：11725908
> 
> 赞同：2
> 
> 时间：2012-07-30T16:45:18.260
> 
> 标签：web, opencl, gpgpu

我正在考虑在 WebCL 上做一些实验。我擅长 GPU 上的 OpenCL/CUDA。总体而言，体验有何不同？我应该使用哪种实现方式？[三星](http://code.google.com/p/webcl/)或[诺基亚](http://webcl.nokiaresearch.com/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:37:52.107

还有第三个 WebCL 原型 [https://github.com/Motorola-Mobility/node-webcl](https://github.com/Motorola-Mobility/node-webcl)

我不得不降低浏览器的速度来运行诺基亚 WebCL。但我能够写一些复杂的例子。我看到的问题是初始化 GPU 所花费的时间约为 45 毫秒，而编译内核所花费的时间约为 145 毫秒。在 ~200 毫秒内，我可以在 Javscript 中完成 ~2M FLOPS，那么 WebCL 什么时候能超过 JS ......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T10:18:48.013

您可以找到诺基亚原型的大量更新示例： [https ://github.com/jmietola/webcl-firefox-examples](https://github.com/jmietola/webcl-firefox-examples)

诺基亚的原型也是最新的。所以当前版本适用于 FireFox25。

# text - 确定正文是否包含有效单词或只是“胡言乱语”

> ID：11725914
> 
> 赞同：3
> 
> 时间：2012-07-30T16:45:39.093
> 
> 标签：text, word, statistics

我对识别任何给定的文本正文是否包含有效的、实际的单词或只是乱码的想法感兴趣。

我立即遇到的问题是它需要与语言无关，因为我们处理的数据是高度国际化的。这意味着要么是一种统计方法，要么是一种非常大的多语言哈希表方法。

多语言哈希表看起来很简单，但很笨重，而且可能很慢。（或者至少是速度和准确性之间的折衷。）

但是，在这种情况下，我并没有真正对我有用的统计方法的背景，并且非常感谢任何人的经验或意见或任何其他建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:53:03.437

您可以使用[ngram](https://en.wikipedia.org/wiki/N-gram)分析将您的文本与示例文本进行比较。这可以在字符或单词上。

Google 的[NGram Viewer](http://books.google.com/ngrams/)可以帮助可视化我的意思。例如，如果我搜索“黑线鳕冰箱”，则不会出现任何事件（例如，这是乱码），而“堆栈溢出”则表明一旦计算机搜索，事件就会变得突出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:53:23.107

您知道或可以确定文档的语言吗？我不认为为单一语言加载字典并计算有效单词的百分比会非常缓慢或占用大量内存。

它需要有多准确？

# php - 检测字符串是否包含至少 2 个字母（形成任何语言）和至少 2 个单词

> ID：11725927
> 
> 赞同：3
> 
> 时间：2012-07-30T16:46:10.047
> 
> 标签：php, regex, utf-8, multibyte

我想做一个函数来检测/验证一个字符串至少有 2 个单词，并且每个单词至少有 2 个字母（除了两个字母，它可以包含任何其他字符 {没有数字}，但我没有关心哪个和多少）。

现在，我不确定是否应该为此使用正则表达式，或者我可以通过其他方式来做到这一点。

如果我需要为它制作正则表达式，我也不知道该怎么做，因为我需要检查所有可用的字母。

这是我现在得到的正则表达式`[A-Za-z]{2,}(\s[A-Za-z]{2,})`，它至少验证每个单词中的 2 个单词和 2 个字母。

**编辑**：重新思考后，我决定支持大多数语言，因为 kr-jp-cn 语言的工作方式与其他语言不同。我的主要规则不会让 kr-jp-cn 字母算作字母，而是算作字符。

**编辑2：**

这是我根据@message 答案使用的功能。

```
function validateName($name)
{
    if (strcspn($name, '0123456789') == strlen($name)) //return the part of the string that dont contain numbers and check if equal to it length - if it equal than there are no digits - 80% faster than regex.
    {
        $parts = array_filter(explode(' ',$name)); //should be faster than regex which replace multiple spaces by single one and then explodes.
        $partsCount = count($parts);
        if ($partsCount >= 2)
        {
            $counter = 0;
            foreach ($parts as $part)
            {
                preg_match_all('/\pL/u', $part, $matches);

                if (count($matches[0]) >= 2)
                {
                    $counter++;
                }
            }
        }

        if ($counter == $partsCount)
        {
            return 'matches';
        }
    }

    return 'doesnt match';
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:54:31.853

使用[Unicode 字符属性](https://en.wikipedia.org/wiki/Unicode_character_property)。

`\p{L}`或`\p{Letter}`匹配任何语言的具有 Letter 属性的代码点。[关于 Unicode 字符属性的 php.net 文档](http://php.net/manual/en/regexp.reference.unicode.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T16:58:42.463

我也会使用正则表达式

```
preg_match('/\w{2,}\s+\w{2,}/u', 'word слово'); 
```

`\w{2,}`匹配单词字符 2 个或更多。 `\s+`匹配和使用`/u` [unicode 修饰符之间的所有空格](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)

编辑：

我认为这样的解决方案会有所帮助，但你需要更复杂的东西，比如

```
$text = preg_replace('/\s+/', ' ', 'word w.s');

$parts = explode(' ', $text, 2);
if (count($parts) < 2) {
    throw new \RuntimeException('Should have more than two words');
}

foreach ($parts as $part) {

    preg_match_all('/\w/u', $part, $matches);

    if (count($matches[0]) < 2) {
        throw new \RuntimeException('Should have more than two letters in word');
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:57:58.387

如果您之后尝试使用字符串中的这些单词，则正则表达式不是要走的路。正则表达式不是解析器。我能看到的最好的方法是结合[explode()](http://php.net/manual/en/function.explode.php)和[ctype_alpha()](http://php.net/manual/en/function.ctype-alpha.php)。类似的东西

```
$prepstring = $string;

//Remove all spaces from the original string and check that everything is a char
if(ctype_alpha(str_replace(array(' '), '', $prepstring))){

  //If everything is a char explode your string into an array
  explode($string);

  if(isset($string[1])){
    //Everything checks out, do something here.
  }

} 
```

# css - 如何为模态框设置链接样式（prettyPhoto）

> ID：11725929
> 
> 赞同：1
> 
> 时间：2012-07-30T16:46:12.840
> 
> 标签：css, css-selectors, prettyphoto

我正在尝试对打开模式框的文本链接使用标准 CSS 样式...特别是漂亮的照片。我希望链接颜色在单击后更改为 a:visited 颜色。它不起作用，链接保持相同的颜色。这是我的CSS：

```
a:link {color: #117D9A;}
a:visited {color: #555555;text-decoration: none;}
a:hover {text-decoration: underline;}
a:active {color: #bfbfbf;} 
```

有什么我做错了吗？

谢谢！

# python - 如何将命令行输入到fabfile？

> ID：11725933
> 
> 赞同：2
> 
> 时间：2012-07-30T16:46:48.283
> 
> 标签：python, fabric

我想提供一些输入（结构文件的初始配置），例如：

```
fab deploy MyProject 
```

其中 MyProject 是我要输入的字符串。有可能这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T17:34:43.207

您必须这样指定`"MyProject"`：

```
fab deploy:MyProject 
```

你的功能（在你的`fabfile.py`）将是这样的：

```
def deploy(project):
    ... 
```

哪里`project`等于`"MyProject"`。

（[更多信息](http://fabric.readthedocs.org/en/latest/usage/fab.html#per-task-arguments)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T14:30:15.857

在您的 fabfile 中：

```
# fabfile.py
# ...
if not hasattr(env, 'my_setting'):
    env.my_setting = 'default'
# ... 
```

运行 fab 脚本：

```
fab --set=my_setting=my_value task 
```

更多信息：

```
fab --help 
```

# iphone - AfNetworking Upload 仅通过 3G 停止并最终超时

> ID：11725934
> 
> 赞同：1
> 
> 时间：2012-07-30T16:46:52.550
> 
> 标签：iphone, ios, upload, 3g, afnetworking

我正在尝试将大文件从 iOS 上传到服务器

我的代码启动 webservce 并在上传 ~180000 字节后挂起、等待并最终超时。

正如代码当前所在的那样。（我已经改变了很多试图排除故障）

```
AFHTTPClient *uploadClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:k_WebService_Root]];

NSMutableDictionary *parameters = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"secret"                  , @"Token",
                                   nil];
NSDictionary *requestObject = [NSDictionary dictionaryWithObject:parameters forKey:@"request"];
NSString *endpoint = [self makeEndpointWithService:k_ServiceEndpoint_Message andAction:k_WebService_Message_Upload];

NSMutableURLRequest *request = [uploadClient multipartFormRequestWithMethod:@"POST" path:endpoint parameters:requestObject constructingBodyWithBlock:^(id<AFMultipartFormData> formData) {
    NSData *data = [NSData dataWithContentsOfFile: videoFile.path];
    [formData appendPartWithFileData:data name:@"file" fileName:@"message.mov" mimeType:@"video/quicktime"];
}];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

[operation setUploadProgressBlock:^(NSInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);
}];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSLog(@"Success");
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Fail\n%@", error);
}];

[operation start]; 
```

输出总是这样

```
2012-07-30 12:42:20.747 BMP[3290:3503] 已发送 32768 个字节，共 2316966 个字节
2012-07-30 12:42:20.754 BMP[3290:3503] 已发送 65536 个字节，共 2316966 个字节
2012-07-30 12:42:20.760 BMP[3290:3503] 已发送 98304 个字节，共 2316966 个字节
2012-07-30 12:42:20.765 BMP[3290:3503] 已发送 131072 个字节，共 2316966 个字节
2012-07-30 12:42:21.113 BMP[3290:3503] 已发送 133452 个字节，共 2316966 个字节
2012-07-30 12:42:21.351 BMP[3290:3503] 发送 136148 个字节，共 2316966 个字节
2012-07-30 12:42:21.610 BMP[3290:3503] 发送 138844 个字节，共 2316966 个字节
2012-07-30 12:42:21.940 BMP[3290:3503] 已发送 141540 个字节，共 2316966 个字节
2012-07-30 12:42:22.030 BMP[3290:3503] 发送 144236 个字节，共 2316966 个字节
2012-07-30 12:42:22.120 BMP[3290:3503] 发送 146932 个字节，共 2316966 个字节
2012-07-30 12:42:22.142 BMP[3290:3503] 已发送 149628 个字节，共 2316966 个字节
2012-07-30 12:42:22.170 BMP[3290:3503] 发送 152324 个字节，共 2316966 个字节
2012-07-30 12:42:22.209 BMP[3290:3503] 发送 155020 个 2316966 字节
2012-07-30 12:42:22.240 BMP[3290:3503] 已发送 157716 个字节，共 2316966 个字节
2012-07-30 12:42:22.488 BMP[3290:3503] 已发送 160412 个字节，共 2316966 个字节
2012-07-30 12:42:22.668 BMP[3290:3503] 已发送 163108 个字节，共 2316966 个字节
2012-07-30 12:42:22.900 BMP[3290:3503] 已发送 163840 个字节，共 2316966 个字节
2012-07-30 12:42:23.003 BMP[3290:3503] 已发送 167152 个字节，共 2316966 个字节
2012-07-30 12:42:23.141 BMP[3290:3503] 发送 171196 个字节，共 2316966 个字节
2012-07-30 12:42:23.181 BMP[3290:3503] 已发送 173892 个字节，共 2316966 个字节
2012-07-30 12:42:23.211 BMP[3290:3503] 发送 176588 个字节，共 2316966 个字节
2012-07-30 12:42:23.251 BMP[3290:3503] 已发送 179284 个字节，共 2316966 个字节
2012-07-30 12:42:23.303 BMP[3290:3503] 发送 181980 个字节，共 2316966 个字节
2012-07-30 12:42:23.353 BMP[3290:3503] 已发送 184676 个字节，共 2316966 个字节
2012-07-30 12:42:23.416 BMP[3290:3503] 已发送 187372 个字节，共 2316966 个字节

```

然后几分钟后，我从 AFNetworking 获得超时

有任何想法吗？

更新 ::: 显然它只发生在通过 3G 上传时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:58:31.750

这似乎更像是服务器端问题。您是否检查过服务器是否正确接收数据？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:59:56.203

事实证明，iOS 限制上传超过 3G。我在 Apple 的任何地方都找不到此文档。

然而，亚马逊已经为 s# 框架解决了这个问题[http://aws.amazon.com/articles/0006282245644577](http://aws.amazon.com/articles/0006282245644577) AFNetworking 有一个开发分支正在开发它（2012 年 7 月 31 日）[https://github.com/AFNetworking/AFNetworking/pull /418](https://github.com/AFNetworking/AFNetworking/pull/418)

ASIHTTPRequest 虽然过时处理它，是我唯一的希望[http://allseeing-i.com/ASIHTTPRequest/How-to-use#throttling_bandwidth](http://allseeing-i.com/ASIHTTPRequest/How-to-use#throttling_bandwidth)

祝以后遇到这种情况的人好运。

# java - 我的包结构正确吗？

> ID：11725938
> 
> 赞同：0
> 
> 时间：2012-07-30T16:47:07.020
> 
> 标签：java, package

包的层次结构应该是什么？

```
com.xyz.DAO
   IDAO          (interface) 
   IPersonDAO     (interface) 
   IDepartmentDAO  (interface) 

com.xyx.DAO.impl
   PersonDAO extends GenericDAO implements IPersonDAO
   DepartmentDAO extends GenericDAO implements DepartmentDAO
   GenericDAO implements IDAO   (abstract class)
   DAOFactory 
```

这个包结构合适吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:52:51.720

我实际上反对*层驱动的打包*，但我建议*使用功能驱动的*方法：

```
com.xyz
   IDAO          (interface) 
   GenericDAO implemts IDAO   (abstract class)
   DAOFactory 
com.xyz.person
   IPersonDAO     (interface) 
   PersonDAO extends GenericDAO implements IPersonDAO
com.xyx.department
   IDepartmentDAO  (interface) 
   DepartmentDAO extends GenericDAO implemts DepartmentDAO 
```

原因是：您更经常希望将与*人员*功能相关的所有类放在一个地方。您并不经常需要所有 DAO 类。

[![UML](../Images/f6a20e234164fdb22f0099991c757938.png)](https://i.stack.imgur.com/iNhdk.png)
[（来源：[yuml.me](https://yuml.me/eea37fef)）]

# c# - 检查 Linq 结果的值

> ID：11725939
> 
> 赞同：0
> 
> 时间：2012-07-30T16:47:12.047
> 
> 标签：c#, linq

如何检查特定字符串值的 LINQ 查询结果？

我有以下 linq 查询：

```
IEnumerable<DataRow> rows = searchParamsTable.AsEnumerable()
                                        .Where(r => r.Field<String>("TABLE") == tableNumbers[i].ToString()
                                        && r.Field<String>("FIELD ") == fieldName[i]); 
```

我想看看该查询的结果是否包含一个字符串（以文本框的形式传递）“wildcardSearchString”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:51:53.903

尝试使用此代码

```
 DataRow[] array = rows.ToArray();

   array.Contains(yourIndex, yourTextBox.Text); 
```

添加此扩展程序

```
 public static bool Contains(this DataRow[] dataRows, string value, int index)
   {
     foreach(var row in dataRows)
     {
        if(row[index].ToString().Contains(value))
        {
             return true;
        }
     } 
     return false;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:54:39.590

```
Boolean found = false;
foreach(Datarow d in rows)
{
    foreach(object o in d.ItemArray)
    {
        if(o.ToString().Contains("test")
        {
            found=true;
            break;
        }
    }
} 
```

你的意思是这样的吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T21:15:36.357

```
var searchRows = 
        rows.Where(tr => tr.ItemArray
            .Any(ti => ti.ToString().IndexOf("wildcardSearchString", StringComparison.CurrentCultureIgnoreCase) > 0)) 
```

这将遍历返回的每一行，并查看“wildcardSearchString”是否在行项目字符串表示中（忽略大小写）。但问题是，这不会为您提供通配符搜索支持，因此您必须自己解决这个问题。您可以尝试使用 Regex，这需要稍作修改：

```
string searchPattern = "some*string".Replace("*", ".*");
var searchRows = 
        rows.Where(tr => tr.ItemArray
            .Any(ti => Regex.IsMatch(ti.ToString(), searchPattern))) 
```

Hope that helps. Just be warned that if they decide to try supplying a Regex pattern than this might really mess up whatever they were searching for, so you just need to be careful of input.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T21:01:10.773

I don't know if you're aware of the built-in search capabilities of a `DataTable`? You could use its [Select](http://msdn.microsoft.com/en-us/library/det4aw50.aspx) method:

```
DataRow[] rows = searchParamsTable
    .Select("TABLE = 'Table1' AND FIELD like '%wildcardSearchString%'"); 
```

Linq is OK but not always required :).

# php - cURL 通过命令行工作，但不能在 PHP Curl 中工作

> ID：11725942
> 
> 赞同：3
> 
> 时间：2012-07-30T16:47:18.767
> 
> 标签：php, curl, xml-rpc

以下命令在命令行中完美运行：

```
c:\>curl -v -H "Content-Type: text/xml" -d "<?xml version='1.0' encoding='utf-8'?><methodCall><methodName>create_account</methodName><params><param><value><struct><member><name>user</name><value><string>test</string></value></member><member><name>server</name><value><string>chat3.activengage.com</string></value></member><member><name>password</name><value><string>test</string></value></member></struct></value></param></params></methodCall>" http://localhost:4561
* About to connect() to localhost port 4561 (#0)
*   Trying 127.0.0.1...
* connected
* Connected to localhost (127.0.0.1) port 4561 (#0)
> POST / HTTP/1.1
> User-Agent: curl/7.26.0
> Host: localhost:4561
> Accept: */*
> Content-Type: text/xml
> Content-Length: 428
>
* upload completely sent off: 428 out of 428 bytes
< HTTP/1.1 200 OK
< Content-Length: 113
< Server: Erlang/Process-One
< Connection: close
<
<?xml version="1.0"?><methodResponse><params><param><value><int>0</int></value><
/param></params></methodResponse>* Closing connection #0 
```

在 PHP 中使用下面的代码：

```
public /*string*/ function registerUser(/*string*/$user,/*string*/$pass){
        $xml = "<?xml version='1.0' encoding='utf-8'?><methodCall><methodName>create_account</methodName><params><param><value><struct><member><name>user</name><value><string>test2</string></value></member><member><name>server</name><value><string>chat3.activengage.com</string></value></member><member><name>password</name><value><string>test</string></value></member></struct></value></param></params></methodCall>";
        $handle = curl_init();
        curl_setopt($handle, CURLOPT_URL, 'http://127.0.0.1:4561');
        curl_setopt($handle, CURLOPT_VERBOSE, 1);
            curl_setopt($handle, CURLOPT_HTTPHEADER, array('Content-Type: text/xml'));
        curl_setopt($handle, CURLOPT_POST, 1);
        curl_setopt($handle, CURLOPT_RETURNTRANSFER, 1);
            curl_setopt($handle, CURLOPT_POSTFIELDS, $xml);
        $content = curl_exec($handle);
        echo $xml;
        $httpCode = curl_getinfo($handle, CURLINFO_HTTP_CODE);
        print_r($httpCode);
        print_r($content);
        if(curl_errno($handle))
        {
         echo 'error:' . curl_error($handle);
        }
        curl_close($handle);
} 
```

结果是 HTTP 状态代码 400。我做错了什么吗？

**更新 - CURLINFO_HEADER_OUT 的结果**

```
string(99) "POST / HTTP/1.1
Host: localhost:4561
Accept: */*
Content-Type: text/xml
Content-Length: 400

" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-08T10:17:53.447

在我破坏了我的 etc/resolv.conf 文件后，从基于浏览器的 PHP 脚本运行 curl 请求失败。

我在参观后发现了这一点

[php5-curl 错误：无法解析主机](https://groups.google.com/forum/#!msg/lucky.openbsd.misc/yiooMaId4-c/SPUd75RzL3kJ)

修复resolve.conf文件后如下：（注意：192.168.1.1是我的路由器地址）

```
# Generated by NetworkManager
nameserver 192.168.1.1 
```

卷曲的行为符合预期。

我希望它可以帮助你

# c# - c# 正则表达式匹配和替换使用函数

> ID：11725943
> 
> 赞同：1
> 
> 时间：2012-07-30T16:47:26.053
> 
> 标签：c#, regex

```
/// <summary>
/// Given HTML overlay for an image in the store, render it.
/// [p:n] renders as price for item ID n
/// </summary>
/// <returns>Rendered result</returns>
public static string RenderHTMLOverlay(string overlayHTML, int currencyID)
{
    const string pattern = "\\[p\\:(\\b\\d+\\b)\\]";
    overlayHTML = Regex.Replace(overlayHTML, pattern, FormatCurrency(GetItemPriceOnDate(DateTime.Now, currencyID, int.Parse("$1"))));

    return overlayHTML;
} 
```

这不起作用，因为`$1`不能作为参数正确传递给`int.Parse`.

```
Exception Details: System.FormatException: Input string was not in a correct format. 
```

有谁知道我可以如何解决这个限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:55:26.487

如果参数是字符串，则只能使用该`$1`表示法`replacement`，因此您最终将`$1`作为文字字符串传递给该`int.Parse`方法。

相反，使用[`(String, String, MatchEvaluator)`](http://msdn.microsoft.com/en-us/library/ht1sxswy.aspx)带有匿名方法的重载：

```
Regex.Replace(overlayHTML, pattern, 
match => FormatCurrency(GetItemPriceOnDate(DateTime.Now, currencyID, int.Parse(match.Groups[1].Value)))
) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T17:02:39.587

我不完全确定我理解你，所以如果我离开了，请耐心等待。

```
 Console.WriteLine(int.Parse("$1"));  //throws exception Input string was not in a correct format.

 Console.WriteLine(int.Parse("$1".Replace("$", "")));  //Result: 1 
```

如果 Store.CommonFunctions.GetItemPriceOnDate 返回一个字符串，你应该很高兴。

# macos - 无法在 Mountain Lion 中安装 MacPorts

> ID：11725948
> 
> 赞同：5
> 
> 时间：2012-07-30T16:47:38.193
> 
> 标签：macos, macports, osx-mountain-lion

我下载了 MacPorts-2.1.2-10.8-MountainLion.pkg，但安装停止在“运行包脚本”...“剩余安装时间”总是“不到一分钟”...有什么问题？？ ?

# c - GetExitCodeProcess() 在进程尚未完成时返回 1

> ID：11725958
> 
> 赞同：3
> 
> 时间：2012-07-30T16:48:05.163
> 
> 标签：c, windows, api

如果我为它创建一个进程和两个管道集，并且该进程在某个时间需要一些用户输入，则`GetExitCodeProcess()`来自 Windows C API 的总是返回`1`。作为示例，您可以使用 Windows`time`命令，这将返回：

```
The current time is: ...
Enter the new time: 
```

然后立即退出，无需等待输入。

我不希望这个过程在它真正完成之前完成，所以我可以通过管道输入它。我该如何解决这个问题。

我已经建立了这个循环（我仍然希望能够确定处理何时完成）：

```
for (;;)
{
    /* Pipe input and output */
    if (GetExitCodeProcess(...) != STILL_ACTIVE) break;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-30T16:52:30.047

`GetExitCodeProcess`不*返回* `STILL_ACTIVE`；`STILL_ACTIVE`是通过`lpExitCode`out 参数返回的退出代码。您需要测试返回的退出代码：

```
DWORD exitCode = 0;
if (GetExitCodeProcess(handle, &exitCode) == FALSE)
{
    // Handle GetExitCodeProcess failure
}

if (exitCode != STILL_ACTIVE)
{
    break;
} 
```

# ajax - $.ajax() 在 Firefox 中不起作用

> ID：11725961
> 
> 赞同：0
> 
> 时间：2012-07-30T16:48:14.883
> 
> 标签：ajax, firefox, google-chrome, jquery

我的 jQuery .ajax() 调用在 firefox 中不起作用，但在 Chrome 中起作用。这是ajax调用：

```
$.ajax({
        url: '/forms/remove_photo/' + temp,
        complete: function() {
            $('#photo').remove();
        }
    }); 
```

但是，在 firefox '/forms/remove_photo/' （这是一个 php 函数）中没有被调用，但完整的函数仍在执行。firebug 中没有出现 parseErrors 或语法错误。在 chrome 中，该函数被调用并成功运行。

有没有人遇到过这个问题？任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:50:59.190

使用`success`代替`complete`：

```
$.ajax({
  url: '/forms/remove_photo/' + temp,

  success: function (data) {
    $('#photo').remove();
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:52:14.183

```
$.ajax({
    cache: 'false', // just to clear your cache
    url: '/forms/remove_photo/' + temp,
    success: function() {  // this may be more appropriate
        $('#photo').remove();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:53:00.090

我`$.ajax`在 firefox 中遇到了麻烦，但它在 chrome 中就像一个魅力，发生了什么，因为 chrome 处理 javascript 和 ajax 更快，firefox 似乎被抛在后面，让你摸不着头脑，你能做的就是使用[Deferreds](http://api.jquery.com/category/deferred-object/)那样您可以通过更多控制来处理 ajax，这是一个示例：

```
$.ajax({
    url: '/forms/remove_photo/' + temp        
}).done(function(){
    $('#photo').remove();
}); 
```

我建议您对 Deferreds 对象进行一些研究，因为它会对您有很大帮助

# r - 重塑数据框 --- 将行更改为列

> ID：11725964
> 
> 赞同：5
> 
> 时间：2012-07-30T16:48:17.880
> 
> 标签：r, reshape

假设我们有一个看起来像的数据框

```
set.seed(7302012)

county         <- rep(letters[1:4], each=2)
state          <- rep(LETTERS[1], times=8)
industry       <- rep(c("construction", "manufacturing"), 4)
employment     <- round(rnorm(8, 100, 50), 0)
establishments <- round(rnorm(8, 20, 5), 0)

data <- data.frame(state, county, industry, employment, establishments)

  state county      industry employment establishments
1     A      a  construction        146             19
2     A      a manufacturing        110             20
3     A      b  construction        121             10
4     A      b manufacturing         90             27
5     A      c  construction        197             18
6     A      c manufacturing         73             29
7     A      d  construction         98             30
8     A      d manufacturing        102             19 
```

我们想重新调整它，使每一行代表一个（州和）县，而不是一个县工业，具有列`construction.employment`、`construction.establishments`和类似的制造版本。什么是有效的方法来做到这一点？

一种方法是子集

```
construction <- data[data$industry == "construction", ]
names(construction)[4:5] <- c("construction.employment", "construction.establishments") 
```

同样对于制造业，然后进行合并。如果只有两个行业，这还不错，但想象一下有 14 个；这个过程会变得乏味（尽管通过`for`在 的级别上使用循环来减少这种情况`industry`）。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T16:59:17.200

如果我正确理解您的问题，这可以在基本 R 重塑中完成：

```
reshape(data, direction="wide", idvar=c("state", "county"), timevar="industry")
#   state county employment.construction establishments.construction
# 1     A      a                     146                          19
# 3     A      b                     121                          10
# 5     A      c                     197                          18
# 7     A      d                      98                          30
#   employment.manufacturing establishments.manufacturing
# 1                      110                           20
# 3                       90                           27
# 5                       73                           29
# 7                      102                           19 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T17:03:14.373

还使用 reshape 包：

```
library(reshape) 
m <- reshape::melt(data) 
cast(m, state + county~...) 
```

产量：

```
> cast(m, state + county~...) 
  state county construction_employment construction_establishments manufacturing_employment manufacturing_establishments
1     A      a                     146                          19                      110                           20
2     A      b                     121                          10                       90                           27
3     A      c                     197                          18                       73                           29
4     A      d                      98                          30                      102                           19 
```

我个人使用基础 reshape，所以我可能应该使用 reshape2 (Wickham) 来展示它，但忘记了有一个 reshape2 包。稍微不一样：

```
library(reshape2) 
m <- reshape2::melt(data) 
dcast(m, state + county~...) 
```

# java - 在我的网络应用程序中创建一个只有我可以访问的网页

> ID：11725969
> 
> 赞同：0
> 
> 时间：2012-07-30T16:48:25.710
> 
> 标签：java, jakarta-ee, admin, security

在我的网络应用程序中，我想创建一个只有我可以访问的网页。通过该页面，我想将照片和其他数据上传到我的网络应用程序/网站。我应该怎么做才能让一个特定的网页只有我可以访问？

我认为的一种方法是通过另一个需要密码身份验证的网页到达该网页*（我将上传的页面） 。*但这是唯一的方法吗？它是一个好方法吗？如果我选择此方法，身份验证将通过 servlet 进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:50:14.367

如果您可以对其进行密码保护，那么您将只有可以访问该页面的人，

为了阻止攻击，您还可以使该页面成为孤立页面并将其放在某个奇怪的路径上，这样只有您知道该页面的路径

放置`Filter`特定于该页面以检查经过身份验证的会话

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:50:44.853

哈希+盐您的客户名称或一些唯一的长数字。在服务器端检查它。

让您的应用程序成为您的密码和凭据。

# oracle - 带连接的 Oracle 更新

> ID：11725972
> 
> 赞同：0
> 
> 时间：2012-07-30T16:48:33.673
> 
> 标签：oracle, sql-update

我正在尝试将几个 MS Access 查询转换为 Oracle。以下是来自 MS Access 的查询之一。

```
    更新 [结果] 内部联接 [主]
      开（[结果].[LAST_NAME] = [MASTER].[LAST_NAME]）
      和（[结果].[FIRST_NAME] = [MASTER].[FIRST_NAME]）
      AND ([RESULT].[DOCUMENT_NUMBER] = [MASTER].[DOCUMENT_NUMBER])
      AND ([RESULT].[BATCH_ID] = [MASTER].[LEAD_ID])
    SET [MASTER].[CLOSURE_REASON] = "因姓名和证件号码匹配而关闭",
        [MASTER].[RESULT_ID] = [RESULT].[ID],
        [MASTER].[RESULT_PID] = [RESULT].[PID]
    WHERE (([MASTER].[CLOSURE_REASON] 为空)
      AND ([MASTER].[REC_CODE] = "A1")
      和（[结果].[EVENT_DATE] = [MASTER].[EVENT_DATE]）
      AND ([RESULT].[EVENT_TYPE] = "打开")
      AND（[MASTER].[DOCUMENT_NUMBER] 不为空）
      AND ([MASTER].[DOCUMENT_NUMBER)] "null"));

```

首先我收到 ORA-01779: cannot modify a column which maps to an non-key-preserved table 错误。我遵循了您网站上的不同示例（包括 MERGE）并修改了我的原始查询。现在，我收到 ORA-30926：无法在源表中获得一组稳定的行错误。

大多数示例仅显示表之间的一个连接，但我必须根据我的要求进行更多连接。

将此查询转换为 Oracle 的任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:00:44.267

我相信这应该是等价的。

```
UPDATE master m
   SET closure_reason = 'Closed For Name and Document Number Match',
       (result_id, result_pid) = (SELECT r.id, r.pid
                                    FROM result r
                                   WHERE m.last_name       = r.last_name
                                     AND m.first_name      = r.first_name
                                     AND m.lead_id         = r.batch_id
                                     AND m.document_number = r.document_number
                                     AND m.event_date      = r.event_date
                                     AND r.event_type      = 'Open')
 WHERE m.closure_reason IS NULL
   AND m.rec_code = 'A1'
   AND m.document_number IS NOT NULL
   AND m.document_number != 'null'
   AND EXISTS( SELECT 1
                 FROM result r
                WHERE m.last_name       = r.last_name
                  AND m.first_name      = r.first_name
                  AND m.lead_id         = r.batch_id
                  AND m.document_number = r.document_number
                  AND m.event_date      = r.event_date
                  AND r.event_type      = 'Open' ) 
```

然而，显然，这没有经过测试。如果您可以发布 DDL 来创建表格，DML 来插入几行并显示预期结果，那么我们可以测试我们的代码，并且可能会给您更准确的答案。

# php - mongodb查询返回简单数组

> ID：11725976
> 
> 赞同：1
> 
> 时间：2012-07-30T16:48:54.073
> 
> 标签：php, mongodb, symfony, doctrine

如何让 mongodb 在一个简单的数组中返回结果？

前任：

我的第一个查询：

```
$user_ids = $dm->createQueryBuilder('AcmeBundle:Users')
->hydrate(false)
->select('_id')
->getQuery()
->execute(); 
```

我的第二个查询：

```
$no_credit = $dm->getRepository('AcmeBundle:Places')
->createQueryBuilder('places')
->distinct('_id')
->field('visited.users')
->in($user_ids)
->getQuery()
->count(); 
```

当第一个查询不返回 MongoID 对象数组时，我该如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:36:13.103

我必须承认我不是 symfony，但我相信它会返回 MongoCursor 的实现，因此获取光标对象并执行 iteratortoarray 或类似的操作会以一种骇人听闻的方式解决问题。

# javascript - asp下拉列表中onchange事件的Javascript

> ID：11725982
> 
> 赞同：0
> 
> 时间：2012-07-30T16:49:30.890
> 
> 标签：javascript, asp.net, ajax, drop-down-menu, onchange

我正在寻找用于 javascript 的示例代码，以检查该项目是否在下拉列表中被选中。然后让它可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:06:39.257

我会做：（用jquery）：

```
 $(function () {
        $("#<%= AspControlName.ClientID %>").change(function () {
            if ($(this).val() == "TheValueYouWant") {
                $("#WhatToShowID").show();
            } else {
                $("#WhatToHideID").hide();
            }
        });
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:57:38.800

如果您想在代码中使用 C# 执行此操作，您可以执行以下操作：

示例 HTML：

```
<asp:DropDownList ID="DropDownList1" autopostback="true" runat="server">            </asp:DropDownList> 
```

C# 代码

```
protected void DropDownList1_SelectedIndexChanged(object sender, System.EventArgs e)
{
    //Make sure everything is hidden
    item_1_extra_stuff.Visible = false;
    item_2_extra_stuff.Visible = false;

    switch (DropDownList1.Text) {
        case "Item 1":
            item_1_extra_stuff.Visible = true;
            break;
        case "Item 2":
            item_2_extra_stuff.Visible = true;
            break;
    }

} 
```

回发允许下拉列表触发该事件，然后 case 语句只检查当前输入并运行显示/隐藏所需的内容。

# stored-procedures - Informix 存储过程

> ID：11725985
> 
> 赞同：1
> 
> 时间：2012-07-30T16:49:48.720
> 
> 标签：stored-procedures, informix

在 Informix 中创建存储过程时，即使相关表不存在也不会抛出错误。

我猜报告级别相当高，所以我该如何更改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:05:44.713

这就是 Informix 设计的工作方式。

如果在您运行该过程时，该表仍然不存在，那么您将获得或多或少适当的运行时错误。但是，在创建过程时表不存在这一事实是故意不被视为错误的。该表可能在使用该过程时创建。

我知道没有任何设置可以改变这种行为。

# asp.net-mvc-4 - 使用 MVC 4 RC 为 Web API 实现 ValidatingAntiForgeryToken 属性的问题

> ID：11725988
> 
> 赞同：21
> 
> 时间：2012-07-30T16:49:54.697
> 
> 标签：asp.net-mvc-4, asp.net-web-api, antiforgerytoken

我正在发出基于 JSON 的 AJAX 请求，对于 MVC 控制器，我非常感谢 Phil Haack 的[用 AJAX 防止 CSRF](http://haacked.com/archive/2011/10/10/preventing-csrf-with-ajax.aspx)以及 Johan Driessen[为 MVC 4 RC 更新的 Anti-XSRF](http://johan.driessen.se/posts/Updated-Anti-XSRF-Validation-for-ASP.NET-MVC-4-RC)。但是，当我将以 API 为中心的控制器转换为 Web API 时，我遇到了两种方法之间的功能明显不同并且我无法转换 CSRF 代码的问题。

ScottS最近提出了一个类似的[问题](https://stackoverflow.com/questions/11476883/web-api-and-validateantiforgerytoken)，由 Darin Dimitrov[回答。](https://stackoverflow.com/a/11483099/609290)Darin 的解决方案包括实现一个调用 AntiForgery.Validate 的授权过滤器。不幸的是，这段代码对我不起作用（见下一段）而且——老实说——对我来说太先进了。

据我了解，Phil 的解决方案在没有表单元素的情况下发出 JSON 请求时克服了 MVC AntiForgery 的问题；表单元素由 AntiForgery.Validate 方法假定/预期。我*相信*这可能就是我对达林的解决方案也有问题的原因。我收到一个 HttpAntiForgeryException “所需的防伪表单字段 '__RequestVerificationToken' 不存在”。我确定令牌正在被发布（尽管根据 Phil Haack 的解决方案在标题中）。这是客户通话的快照：

```
$token = $('input[name=""__RequestVerificationToken""]').val();
$.ajax({
    url:/api/states",
    type: "POST",
    dataType: "json",
    contentType: "application/json: charset=utf-8",
    headers: { __RequestVerificationToken: $token }
}).done(function (json) {
    ...
}); 
```

我尝试通过将 Johan 的解决方案与 Darin 的解决方案混合在一起来进行破解，并且能够让事情正常运行，但我正在引入 HttpContext.Current，不确定这是否合适/安全以及为什么我不能使用提供的 HttpActionContext。

这是我不雅的混搭。变化是 try 块中的 2 行：

```
public Task<HttpResponseMessage> ExecuteAuthorizationFilterAsync(HttpActionContext actionContext, CancellationToken cancellationToken, Func<Task<HttpResponseMessage>> continuation)
{
    try
    {
        var cookie = HttpContext.Current.Request.Cookies[AntiForgeryConfig.CookieName];
        AntiForgery.Validate(cookie != null ? cookie.Value : null, HttpContext.Current.Request.Headers["__RequestVerificationToken"]);
    }
    catch
    {
        actionContext.Response = new HttpResponseMessage
        {
            StatusCode = HttpStatusCode.Forbidden,
            RequestMessage = actionContext.ControllerContext.Request
        };
        return FromResult(actionContext.Response);
    }
    return continuation();
} 
```

我的问题是：

*   我认为达​​林的解决方案假设存在表单元素是否正确？
*   将 Darin 的 Web API 过滤器与 Johan 的 MVC 4 RC 代码混搭的优雅方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-30T17:32:10.277

您可以尝试从标题中读取：

```
var headers = actionContext.Request.Headers;
var cookie = headers
    .GetCookies()
    .Select(c => c[AntiForgeryConfig.CookieName])
    .FirstOrDefault();
var rvt = headers.GetValues("__RequestVerificationToken").FirstOrDefault();
AntiForgery.Validate(cookie != null ? cookie.Value : null, rvt); 
```

注意：`GetCookies`是一个扩展方法，存在于`HttpRequestHeadersExtensions`属于`System.Net.Http.Formatting.dll`. 它很可能存在于`C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 4\Assemblies\System.Net.Http.Formatting.dll`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-18T20:07:11.430

只是想补充一点，这种方法也适用于我（.ajax 将 JSON 发布到 Web API 端点），尽管我通过继承 ActionFilterAttribute 并覆盖 OnActionExecuting 方法对其进行了一些简化。

```
public class ValidateJsonAntiForgeryTokenAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        try
        {
            var cookieName = AntiForgeryConfig.CookieName;
            var headers = actionContext.Request.Headers;
            var cookie = headers
                .GetCookies()
                .Select(c => c[AntiForgeryConfig.CookieName])
                .FirstOrDefault();
            var rvt = headers.GetValues("__RequestVerificationToken").FirstOrDefault();
            AntiForgery.Validate(cookie != null ? cookie.Value : null, rvt);
        }
        catch
        {               
            actionContext.Response = actionContext.Request.CreateErrorResponse(HttpStatusCode.Forbidden, "Unauthorized request.");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-15T22:22:40.187

使用 Darin 的答案的扩展方法，并检查标题是否存在。检查意味着生成的错误消息更能说明问题所在（“所需的防伪表单字段“__RequestVerificationToken”不存在。”）与“未找到给定的标头”。

```
public static bool IsHeaderAntiForgeryTokenValid(this HttpRequestMessage request)
{
    try
    {
        HttpRequestHeaders headers = request.Headers;
        CookieState cookie = headers
                .GetCookies()
                .Select(c => c[AntiForgeryConfig.CookieName])
                .FirstOrDefault();

        var rvt = string.Empty;
        if (headers.Any(x => x.Key == AntiForgeryConfig.CookieName))
            rvt = headers.GetValues(AntiForgeryConfig.CookieName).FirstOrDefault();

        AntiForgery.Validate(cookie != null ? cookie.Value : null, rvt);
    }
    catch (Exception ex)
    {
        LogHelper.LogError(ex);
        return false;
    }

    return true;
} 
```

ApiController 用法：

```
public IHttpActionResult Get()
{
    if (Request.IsHeaderAntiForgeryTokenValid())
        return Ok();
    else
        return BadRequest();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-05T13:53:06.150

使用 AuthorizeAttribute 的实现：

```
using System;
using System.Linq;
using System.Net.Http;
using System.Web;
using System.Web.Helpers;
using System.Web.Http;
using System.Web.Http.Controllers;

  [AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
  public class ApiValidateAntiForgeryToken : AuthorizeAttribute {
    public const string HeaderName = "X-RequestVerificationToken";

    private static string CookieName => AntiForgeryConfig.CookieName;

    public static string GenerateAntiForgeryTokenForHeader(HttpContext httpContext) {
      if (httpContext == null) {
        throw new ArgumentNullException(nameof(httpContext));
      }

      // check that if the cookie is set to require ssl then we must be using it
      if (AntiForgeryConfig.RequireSsl && !httpContext.Request.IsSecureConnection) {
        throw new InvalidOperationException("Cannot generate an Anti Forgery Token for a non secure context");
      }

      // try to find the old cookie token
      string oldCookieToken = null;
      try {
        var token = httpContext.Request.Cookies[CookieName];
        if (!string.IsNullOrEmpty(token?.Value)) {
          oldCookieToken = token.Value;
        }
      }
      catch {
        // do nothing
      }

      string cookieToken, formToken;
      AntiForgery.GetTokens(oldCookieToken, out cookieToken, out formToken);

      // set the cookie on the response if we got a new one
      if (cookieToken != null) {
        var cookie = new HttpCookie(CookieName, cookieToken) {
          HttpOnly = true,
        };
        // note: don't set it directly since the default value is automatically populated from the <httpCookies> config element
        if (AntiForgeryConfig.RequireSsl) {
          cookie.Secure = AntiForgeryConfig.RequireSsl;
        }
        httpContext.Response.Cookies.Set(cookie);
      }

      return formToken;
    }

    protected override bool IsAuthorized(HttpActionContext actionContext) {
      if (HttpContext.Current == null) {
        // we need a context to be able to use AntiForgery
        return false;
      }

      var headers = actionContext.Request.Headers;
      var cookies = headers.GetCookies();

      // check that if the cookie is set to require ssl then we must honor it
      if (AntiForgeryConfig.RequireSsl && !HttpContext.Current.Request.IsSecureConnection) {
        return false;
      }

      try {
        string cookieToken = cookies.Select(c => c[CookieName]).FirstOrDefault()?.Value?.Trim(); // this throws if the cookie does not exist
        string formToken = headers.GetValues(HeaderName).FirstOrDefault()?.Trim();

        if (string.IsNullOrEmpty(cookieToken) || string.IsNullOrEmpty(formToken)) {
          return false;
        }

        AntiForgery.Validate(cookieToken, formToken);
        return base.IsAuthorized(actionContext);
      }
      catch {
        return false;
      }
    }
  } 
```

然后用 [ApiValidateAntiForgeryToken] 装饰你的控制器或方法

并将其添加到 razor 文件以生成您的 javascript 令牌：

```
<script>
var antiForgeryToken = '@ApiValidateAntiForgeryToken.GenerateAntiForgeryTokenForHeader(HttpContext.Current)';
// your code here that uses such token, basically setting it as a 'X-RequestVerificationToken' header for any AJAX calls
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-21T00:38:42.637

如果它对任何人有帮助，在 .net 核心中，标头的默认值实际上只是“RequestVerificationToken”，没有“__”。因此，如果您将标题的键更改为该键，它将起作用。

如果您愿意，还可以覆盖标题名称：

`services.AddAntiforgery(o => o.HeaderName = "__RequestVerificationToken")`

# c - openCV在C中获取子图像

> ID：11725990
> 
> 赞同：1
> 
> 时间：2012-07-30T16:49:58.040
> 
> 标签：c, image, opencv

我在 C 语言中使用 OpenCV 进行图像处理。如果文档中回答了这个问题，请原谅我，但我发现 OpenCV 文档的格式非常糟糕且难以阅读。

我有一个`CvMat*`从图像文件中提取的图像，如下所示：

```
CvMat* mat = cvLoadImageM((char*) filename, CV_LOAD_IMAGE_COLOR); 
```

我需要做的是通过裁剪某个有界区域来获得它的子图像。一个逻辑命令可能是：

```
CvMat* subMat = cvGetSubImage(mat, minx, maxx, miny, maxy); 
```

其中`minx`, `maxx`, `miny`, 和`maxy`定义裁剪区域的边界。有没有内置的方法可以轻松做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T16:56:25.550

看看[http://nashruddin.com/OpenCV_Region_of_Interest_(ROI)/](http://nashruddin.com/OpenCV_Region_of_Interest_(ROI)/)

本教程对感兴趣区域执行以下操作：

```
cvSetImageROI(img1, cvRect(10, 15, 150, 250));
IplImage *img2 = cvCreateImage(cvGetSize(img1),
                           img1->depth,
                           img1->nChannels);
cvCopy(img1, img2, NULL);
cvResetImageROI(img1); 
```

OpenCV 内置了设置您关心的区域并将该区域从图像中复制出来的功能，就像您想要实现的那样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-25T12:00:01.000

如果您想要 src 图像的亚像素精确矩形部分，请使用 cvGetRectSubPix 或 cv::getRectSubPix（这会创建所有数据的单独副本，这不是 ROI！）

例子：

```
cv::Size size(dst_width,dst_height);
cv::Point2f center(src_centerx,src_center_y);
cv::Mat dst;
cv::getRectSubPix(src,size, center,dst,CV_8U); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T16:55:41.667

通常这是通过裁剪`ROI`（感兴趣的区域）来完成的。这篇[博文](https://web.archive.org/web/20110427104424/http://nashruddin.com/OpenCV_Region_of_Interest_%28ROI%29)详细介绍了裁剪：

```
/* load image */
IplImage *img1 = cvLoadImage("elvita.jpg", 1);

/* sets the Region of Interest
   Note that the rectangle area has to be __INSIDE__ the image */
cvSetImageROI(img1, cvRect(10, 15, 150, 250));

/* create destination image
   Note that cvGetSize will return the width and the height of ROI */
IplImage *img2 = cvCreateImage(cvGetSize(img1),
                               img1->depth,
                               img1->nChannels);

/* copy subimage */
cvCopy(img1, img2, NULL);

/* always reset the Region of Interest */
cvResetImageROI(img1); 
```

要在`IplImage`(legacy OpenCV) 和`cvMat`(OpenCV 2.x) 之间进行转换，只需使用`cvMat`构造函数或查看[此问题](https://stackoverflow.com/questions/4664187/converting-cvmat-to-iplimage)以获取更多方法。

# ssl - 使用自签名证书时是否可以防止中间人攻击？

> ID：11725991
> 
> 赞同：11
> 
> 时间：2012-07-30T16:50:01.393
> 
> 标签：ssl, https, openssl, ssl-certificate, public-key-encryption

我不确定之前是否有人问过类似的问题（我找不到任何问题），但是是否可以保护客户端/服务器免受中间人攻击？

我正在编写一个客户端应用程序来与服务器通信。通信将基于 SSLv3。我对服务器的自签名证书没问题，但担心其他人以相同的服务器名称生成相同的自签名证书并假装是它。我的客户端应用程序使用 OpenSSL 库。[客户端和服务器是基于节俭的，如果有任何区别的话]。我可以在保持对自签名证书的支持的同时避免此类攻击吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-30T17:10:43.740

是的。

简而言之，只有当客户端事先不知道证书，因此无法验证服务器是否就是它所说的那个人时，自签名证书才比 CA 证书更不安全。

如果您将自签名证书添加到客户端并且*不接受任何其他证书*，那么您实际上与拥有证书颁发机构签名的证书一样安全（或者，有人可能会说，甚至更安全）。

在有或没有证书授权的情况下保持 SSL 安全的重要部分是：

*   服务器私钥（在 CA 的情况下，是其所有根的私钥）是保密的。
*   客户端知道服务器证书（或其 CA 根）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T17:09:28.663

您可以对服务器的证书进行硬编码，并将其与您收到的证书进行比较。

或者更好的是，创建一个由 CA 签名的 CA 证书和服务器证书。让 CA 信任客户端（再次通过在您的应用程序中对其进行硬编码）并使用 CA 证书验证收到的服务器证书。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T17:09:15.960

如果您可以很好地保护您的私钥，假设用户实际查看证书，中间人将无法伪装成您。自签名的问题在于，如果您希望用户将异常添加到他们的浏览器，或者只是忽略警告，那么您将面临中间人攻击，因为其他任何人都可以创建自己的证书。

当然，“足够好地保护您的私钥”并非易事。当您为“威瑞信”证书付费时，您并没有为他们创建证书的软件付费 - 您正在为他们保护存储私钥的建筑物的安全部队付费。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-15T05:45:25.440

这很容易！不！仅此而已，您就可以防止来自知名机构颁发的证书的中间人攻击。>:)

# .net - 让 Mono.NET 在 ubuntu 10.04 SERVER 上运行

> ID：11725993
> 
> 赞同：0
> 
> 时间：2012-07-30T16:50:10.500
> 
> 标签：.net, mono, ubuntu-10.04

对于我的初学者问题，我很抱歉，但事实上......我是初学者。

所以让我解释一下我已经做了什么以及我想获得什么。

我在 C# .NET 中开发了一个 WebService，我想让它在 Ubuntu 10.04 SERVER 上运行

*   我已经用 apt-get install mono-complete 安装了“mono-complete”
*   我已经在我的 var/www/.../ws 上“发布”了我的 WebService 以使其可以从网络上访问
*   我试过用它，但它不起作用....

例如，请参阅我所拥有的：www.romain-richard.com/WS/

如果您单击 Default.aspx 或其他页面，它不会运行该页面，而只是显示它

所以肯定我做错了什么！我的项目没有正确生成吗？单声道在工作之前需要任何配置吗？

感谢您的帮助，请随时向我询问更多信息！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:35:08.357

Ubuntu 10.04 已经很老了，它必须包含一个很旧的 Mono 版本。

另一方面，Ubuntu 12.04 是新的，它是 LTS，它包含一个更新版本的 Mono。

首先，我会升级操作系统。您可能遇到了一个已在上一个版本中修复的 Mono 错误。

如果升级你的操作系统后，你仍然有同样的问题，那么花更多的时间去挖掘是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:24:30.783

对于初学者来说这并不容易，我不确定这是多么最新，但试试这个：

[http://www.mono-project.com/Mod_mono](http://www.mono-project.com/Mod_mono)

# android - 如何为android添加一个角度开关并在其开启和关闭状态期间设置不同的颜色？

> ID：11725997
> 
> 赞同：0
> 
> 时间：2012-07-30T16:50:26.723
> 
> 标签：android, android-widget, android-custom-view

我的客户要求开关看起来像有角度的开关。请参阅随附的 jpeg。

![在此处输入图像描述](../Images/71d66f81eef57e948c2b6bf36856db9d.png)

当用户关闭开关时，颜色变为棕色？所以以下是我的问题

如何实现角度开关？如何为开/关行为实现不同的颜色？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:52:44.777

你需要一个选择器。在选择器中，您可以定义哪些可绘制对象用于不同的状态。

抱歉，我没有任何示例 atm，但一个简单的搜索就找到了这个[Android 选择器和文本颜色](https://stackoverflow.com/questions/1219312/android-selector-text-color)

编辑：开关本身看起来像一个 ToggleButton [http://developer.android.com/reference/android/widget/ToggleButton.html](http://developer.android.com/reference/android/widget/ToggleButton.html)但我不知道该告诉你如何让它看起来像那样......

不过，android 设置有这些按钮，只是灰色而不是蓝色。也许你可以从那里挖点东西？