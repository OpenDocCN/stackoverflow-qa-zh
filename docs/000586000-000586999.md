# StackOverflow 问答 000586000-000586999

# java - 如何让我的线程不相互阻塞？

> ID：586000
> 
> 赞同：1
> 
> 时间：2009-02-25T13:30:36.370
> 
> 标签：java, multithreading, synchronization

我有 2 个线程，一个在邮箱中轮询消息然后休眠`while (!quit)`，另一个应该在用户输入时更改`quit`标志`'Q'`。似乎扫描线程会阻止另一个线程执行，直到有一些输入（通常是 2 行）。我尝试更改线程的优先级和它们的启动顺序，但无济于事。

```
class quitThread extends Thread {
  public void run() {
    char c;
    Scanner scanner = new Scanner(System.in);
    do {
      c = scanner.nextLine().toUpperCase().charAt(0);
    } while (c != 'Q');
    quit = true;
  }
}

class recieveThread extends Thread {
  public void run() {
    System.out.println("thread started");
    while (!quit) {
      try {
        MailHandler handler = new MailHandler();                
        handler.recieve();
        System.out.println("Sleeping");
        sleep(_sleepinterval);
      } catch (Exception e) {
        e.printStackTrace();
      }
    }
  }
} 
```

我知道我必须担心互斥和同步，但我希望线程至少在我开始担心它之前工作。编辑：这就是我开始线程的方式：

```
void go() throws Exception{
    char c;
    System.out.println("S or R");
    Scanner s = new Scanner(System.in);
    c = s.nextLine().toUpperCase().charAt(0);
    MailHandler handler = new MailHandler();                
    QuitThread q = new QuitThread();
    q.setPriority(java.lang.Thread.MIN_PRIORITY);
            RecieveThread rc = new RecieveThread();
        rc.setPriority(java.lang.Thread.MAX_PRIORITY);

    switch (c){
    case 'S':

        handler.send("blah@blah.net", "hello there");
        break;
    case 'R':
        rc.start();
        q.start();
        break;
    default :
        break;      

    }

} 
```

注意：优先级最初并不存在，这是我刚刚尝试过的，但没有任何区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-25T15:57:22.880

两个不同类的两个不同实例如何共享`quit`变量？尝试使用在两个线程之间共享的 AtomicBoolean。

另外，你怎么知道扫描线程阻塞了另一个？从您的代码中，我看不到他们共享除`quit`变量之外的任何资源。

也许您看到“线程已启动”消息，然后您暂时看不到“睡眠”消息，因为 receiveThread 卡在 handler.receive() 方法中......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-25T17:51:35.807

看起来它与[错误 4206767有关](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4206767)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-25T13:45:48.487

如您所见，如果没有同步，它们将无法工作，因此请先修复它。

# opengl - 如何将纹理索引为来自着色器的离散查找表？

> ID：586007
> 
> 赞同：1
> 
> 时间：2009-02-25T13:33:30.013
> 
> 标签：opengl, textures, shader, glsl, gpgpu

我正在用 GLSL 编写着色器，我需要向它传递一定数量的信息。传递此信息的唯一实用方法是使用一维纹理。
我正在创建纹理和设置`GL_TEXTURE_MIN_FILTER`，现在我`GL_TEXTURE_MAG_FILTER`需要`GL_NEAREST`
从着色器访问纹理，以便能够准确地索引我放入其中的每个数字 3 值向量。
有什么可靠的方法可以轻松做到这一点？
我正在寻找的是一个公式，它采用数组的大小和我想要的索引，并给我 [0,1] 中的数字，它对应于我想要的纹素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-25T16:57:52.207

```
idx/(size-1) 
```

也许？只需确保 idx 和 size 首先是浮点数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-25T17:44:00.737

刚刚发现 OpenGL 3.0 通过引入`texelFetch()`扩展也提供的功能使这种需求过时`GL_EXT_gpu_shader4`

# c++ - 模板类的继承问题

> ID：586009
> 
> 赞同：3
> 
> 时间：2009-02-25T13:33:47.907
> 
> 标签：c++, inheritance, templates

我在编写的一些代码中遇到了一个非常奇怪的错误。代码背后的基本思想可以在以下示例中简化：

```
 template <class f, class g> class Ptr;

template <class a, class b, class c = Ptr<a,b> >
class Base
{
public:
    Base(){};
};

template <class d, class e>
class Derived : public Base <d,e>
{
public:
    Derived(){};
};

template <class f, class g>
class Ptr
{
public:
    Ptr(){};
    Ptr(Base<f,g,Ptr<f,g> >* a){};
};

typedef Derived<double,double> DDerived;

int main()
{
    Base<int,int> b = Base<int,int>();
    Derived<double,double> d = Derived<double,double>();
    DDerived dd = DDerived();
    Ptr<double,double> p(&dd);
    return 1;
} 
```

基本思想是将指针替换为 Ptr 类（这最终将在 MPI 设置中使用，因此标准指针实际上是无用的）。指针被设计为“指向”基类，因此可以指向任何继承的类（如示例中所示）。

任何人都可以想到任何原因，这在非平凡的情况下可能不起作用（但对象架构保持相同的情况）*。*

主要情况下发生的错误如下：

```
 void function()
{
  vector nVector(1);  // cut down for simplicity
  nVector[0].SetId(1); // To ensure the node is instantiated correctly
  Ptr temp(&nVector[1]);
}; 
```

此代码在编译时产生（略微扩展的版本）错误，`MPICXX:`
没有匹配的函数调用`Ptr&lt;double, double>::Ptr(Derived&lt;double, double>*)`
候选是。. . （为简单起见，删除了一些）
`Ptr&lt;f, g>::Ptr(Base&lt;f, g, Ptr&lt;f, g> >*) [with f = double, g = double]`

干杯，埃德

已编辑（更好地详细说明错误，在编译器上添加了信息）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-27T17:09:58.463

不幸的是，我有点愚蠢，忘记将我的 Ptr 类放在与 Base 和 Derived 类相同的命名空间中。

我想，这就是它不起作用的原因！=]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-25T13:48:35.220

好吧，这个呢：

```
class BasePtr
{
public:
    virtual void* obj() = 0;
};

template <class T>
class Ptr :: public BasePtr
{
public:
    Ptr() : ptr(0) {};
    Ptr(T* a) : ptr(a) {};
    virtual T* obj() { return ptr; }
protected:
    T* ptr;
}; 
```

在 Base 类中使用 BasePtr，但在 Base 需要使用时传递正确的模板对象。

```
template <class a, class b >
class Base
{
public:
    Base(){};
    void set_ptr( BasePtr* );
};

DDerived dd = DDerived();
Ptr<double,double> p(&dd);
dd.set_ptr( p ); 
```

我仍然不太了解您的问题，但希望对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-25T13:50:22.500

尝试使用模板模板参数而不是默认值。

```
template <class a, class b, template <class aa, class bb> class c = Ptr >
class Base
{
typedef Ptr<a, b> pointer;
public:
    Base(){};
}; 
```

# jquery - 使用 JQuery 禁用链接

> ID：586024
> 
> 赞同：5
> 
> 时间：2009-02-25T13:37:22.530
> 
> 标签：jquery, asp.net-mvc

我有以下代码，它的功能类似于注释链接在 Stackoverflow 上的工作方式...单击时会触发 ActionResult 并填充 div

```
 $(function() {
        $("a[id ^='doneLink-']").live('click', function(event) {
            match = this.id.match(/doneLink-(\d+)/);
            container = $("div#doneContainer-" + match[1])
            container.toggle();

            if (container.is(":visible")) {
                container.load($(this).attr("href"));
            } else {
                container.html("Loading...");
            }
            event.preventDefault();
        });
    }); 
```

我希望能够做一件事来更改他们单击的链接文本以说出“隐藏”之类的内容，并禁用此链接所在的小菜单中的其他链接。

**编辑：** 这个函数的源代码看起来像这样

```
<div id="dc_lifelistmenu"style="float:left;padding-bottom:5px;font-size:10pt;width:400px;">
    <a href="/entries/addentry/86">Add Entry</a> | 
    <a href="/goals/adddaimoku/86" id="daimokuLink-2">Log Daimoku</a> | 
    <a href="/goals/done/86" id="doneLink-2">Mark Completed</a> |
    <a href="/goals/remove/86">Remove</a>
</div><br />
<div id='daimokuContainer-2' style="display:none;">  Loading...</div>
<div id='doneContainer-2' style="display:none;">  Loading...</div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2010-01-09T15:24:20.430

如果要删除链接而不是禁用它：

```
jQuery('#path .to .your a').each(function(){
    var $t = jQuery(this);
    $t.after($t.text());
    $t.remove();
}); 
```

**笔记：**

*   您还可以使用 function(k,v) 来获取迭代器和元素，而无需使用 'this'*   如果您使用默认命名空间，请随意将 jQuery 替换为 $*   var $t = jQuery(this) 是一个缓存函数，它引用元素并帮助清理代码*   在实际上是 jQuery 项目的变量前面加上 $ 是一个很好的做法，以帮助它们在代码中直观地分开。它还可以帮助您认识到您可以在它们上调用方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-25T13:43:25.183

要修改函数内的链接文本，只需使用：

```
this.text('New Text!'); 
```

要禁用其他文本，我们必须查看页面的来源。我不确定您所说的“其他链接”是什么意思...

更新：根据您的编辑，我猜您想要什么：

```
$(function() {
        $("a[id ^='doneLink-']").live('click', function(event) {
            match = this.id.match(/doneLink-(\d+)/);
            container = $("div#doneContainer-" + match[1])
            container.toggle();

            if (container.is(":visible")) {
                container.load($(this).attr("href"));
            } else {
                container.html("Loading...");
            }
            event.preventDefault();
            // added
            this.text('Hide');
            // disable others manually, repeat and adjust for each link
            $("#daimokuLink-" + match[1]).toggle();
            // or in one shot, all but the one I clicked
            $("#dc_lifelistmenu:not(#doneContainer-" + match[1] + ")").toggle(); 
        });
    }); 
```

更新2：看到你的评论。要禁用链接而不是隐藏它，然后`onclick`通过覆盖它而不是使用`toggle()`.

```
$("#daimokuLink-" + match[1]).click(function() { return false; }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-25T14:06:12.883

有几种方法可以解决这个问题，可能最简单的方法是： $('a').filter('not:#doneLink').hide(); 隐藏所有不是您在上面指定的链接。

查看此页面以获取有关 jQuery 选择器的更多信息：

[http://docs.jquery.com/Selectors](http://docs.jquery.com/Selectors)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-07-01T20:58:15.110

禁用锚的最简单方法是使用 disabled-attribute，但问题是给定属性仅受 IE 支持。例如，它在 FireFox 中不起作用。如果您希望您的代码在不同的浏览器中工作，您可以尝试将 href 和 onclick 属性的值保存到其他自定义属性中，然后设置`href="#"`和`onclick="return false;"`. 启用后，您应该恢复保存的 href 和 onclick 值。对于视觉效果，您可以使用应用特殊的 css 类。我在我的博客中描述了这种方法 -[禁用超链接](http://dotnetfollower.com/wordpress/2011/07/jquery-disable-hyperlink/)

# statistics - 混淆矩阵的信息标准

> ID：586025
> 
> 赞同：0
> 
> 时间：2009-02-25T13:37:46.820
> 
> 标签：statistics, modeling, entropy

[可以使用Akaike 信息准则 (AIC)](http://en.wikipedia.org/wiki/Akaike_information_criterion)来衡量统计模型的拟合优度，该准则说明了拟合优度和用于模型创建的参数数量。*AIC 涉及计算该模型 ( L* )的似然函数的最大值。给定分类模型的预测结果，如何计算*L*，表示为混淆矩阵？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-25T21:44:45.700

无法从混淆矩阵计算 AIC，因为它不包含任何有关可能性的信息。根据您使用的模型，可能可以计算似然性或准似然性，从而计算 AIC 或 QIC。

您正在处理的分类问题是什么，您的模型是什么？

在分类上下文中，通常使用其他度量来进行 GoF 测试。我建议阅读 Hastie、Tibshirani 和 Friedman 的 The Elements of Statistical Learning，以便对这种方法有一个很好的概述。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T13:09:40.450

[Kononenko 和 Bratko的基于信息的分类器性能评估标准](http://www.springerlink.com/content/j21p620rw33xw773/)正是我想要的：

> 分类准确度通常用作分类性能的衡量标准。然而，已知该措施有几个缺陷。一个公平的评估标准应该排除类概率的影响，这可能使完全不知情的分类器能够轻易地实现高分类精度。本文提出了一种评估分类器答案信息分数的方法。它排除了先验概率的影响，处理各种类型的不完美或概率答案，还可用于比较不同领域的性能。

# mysql - 相当于在 SQL 中使用 &&

> ID：586026
> 
> 赞同：0
> 
> 时间：2009-02-25T13:38:55.040
> 
> 标签：mysql

我的数据库中有两个表（比如说 t1 和 t2），每个表中都有一个 BIT 类型的字段（我们称之为 field1），我想要做的是使用 && 布尔运算符获得相同的功能（就像在 C、C#、Java .. 等中一样），或者换句话说，我想这样做：

select t1.field1 && t2.field1 from t1, t2 where .. （如果 field1 在其中一个表中为假，它应该返回假，要返回真，它必须在两个表中都为真）

我知道它可以用一个用例（或 MySQL 中的 IF() ）来完成，但我很想知道是否还有其他方法......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-25T13:40:53.973

```
SELECT t1.field & t2.field 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-25T13:43:30.427

```
SELECT t1.field1 && t2.field1 FROM t1, t2 WHERE t1.field1 = 1 AND t2.field2 = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-25T14:12:46.563

[`AND`并且`&&`](http://dev.mysql.com/doc/refman/5.1/en/logical-operators.html#operator_and)是等价的。因此，您可以使用“<code>t1.field1 && t2.field1”或“<code>t1.field1 AND t2.field1”：

```
SELECT t1.field1 && t2.field1
FROM …

SELECT t1.field1 AND t2.field1
FROM … 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-25T13:44:03.873

没有标准的 SQL 方法可以做到这一点 - 任何此类机制都是 DBMS 特定的。

# php - mssql_query 重音

> ID：586031
> 
> 赞同：1
> 
> 时间：2009-02-25T13:41:14.440
> 
> 标签：php, sql-server

我在 PHP 中遇到了这个 mssql_query 的问题：

```
$query = 'SELECT Ville FROM tblLstManufacturiers where province = "Québec"'; 
```

结果是空的，因为我有魁北克口音

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:54:10.897

你可以试试：

```
Select Ville
From tblLstManufacturiers
where province like '%Québec%' 
```

如果它是一个普通的文本字段，这应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-25T13:43:22.237

```
SELECT Ville
FROM tblLstManufacturiers
WHERE province = N'Québec' COLLATE Latin1_General_CS_AI 
```

# vb.net - Winforms 和 VB.net 不了解基础知识

> ID：586037
> 
> 赞同：0
> 
> 时间：2009-02-25T13:43:54.917
> 
> 标签：vb.net, winforms

一个人可以使用 Visual Studio（Winforms 的东西）在 VB.net 中学习编程，而永远不会了解控制台“hello world”的外观或如何在代码中更改程序的哪一部分在执行时开始（以及其他类似的基本内容） ) 并且仍然是一个成功的 VB.net 程序员？还是有路障等着被击中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-25T13:46:58.093

成功的？大概。

好的？不。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-25T13:48:10.227

我相信你*可以*，但我认为这不是一个好主意。您可能会通过反复试验来获得核心思想 - 但您最终可能会产生很多误解，并且您可能会在反复试验阶段浪费大量时间。

我会彻底推荐首先学习核心概念。除此之外，UI 开发也充满了它自己的小弱点——如果你不知道开始的核心内容，你将不知道你是否遇到了 UI 陷阱，或者你的核心知识是否缺乏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-25T13:55:12.473

取决于您使用这些程序做什么。如果您只是编写一些小工具供自己使用，那么可能没有什么坏处。对于爱好项目，您可以随心所欲地了解。但是，如果您将编程作为一份工作，您应该更好地掌握正在发生的事情。您可能暂时可以伪装自己的方式，但最终有人会要求您做一些本应简单的事情，但由于您对编程的了解有限，这是完全不可能的。然后你就会知道为什么你必须知道基础知识。

话虽如此，在现实世界中，有很多程序员拥有同样水平的知识，他们确实有工作。就个人而言，我认为这是一个坏主意，但你不能与市场争论。如果这些人有工作，那么这种类型的程序员一定有真正的市场需求。有点符合 Welbog 所说的。你可以成功，因为你可以保住一份工作。但是你仍然不会是一个好的程序员。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-25T13:59:57.297

这取决于你所说的成功是什么意思。

完全可以编写一个体面的 winforms 应用程序，而无需编写控制台应用程序，也无需更改默认的起始表单。

When it comes to crafting well written applications in a professional way, you're likely to find requirements that mean using a boot strapper (which will control the initial flow) so at that point you'll definitely need to do some research.

# java - 你把字典数据放在哪里？

> ID：586042
> 
> 赞同：4
> 
> 时间：2009-02-25T13:47:52.663
> 
> 标签：java, dictionary, enums

假设我的应用程序中有一组国家/地区。我希望这些数据会发生变化，但不会经常发生。换句话说，我不会将此集合视为操作数据（例如，我不会为 Country 提供 CRUD 操作）。

那就是说我必须将这些数据存储在某个地方。我看到了两种方法：

*   数据库驱动。创建并填充 Country 表。提供某种 DAO 来访问它（findById() ？）。这样，客户端代码必须知道一个国家的 ID（也可以是名称或 ISO 代码）。在应用程序方面，我将有一个 Country 类。

*   应用驱动。创建一个枚举，我可以在其中列出我的系统已知的所有国家。它也将存储在 DB 中，但不同之处在于现在客户端代码不必具有查找方法（findById、findByName 等）和硬编码 Id、名称或 ISO 代码。它将直接引用特定国家。

出于几个原因，我倾向于第二种解决方案。你怎么做到这一点？

将其称为“字典数据”是否正确？

附录：这里的主要问题之一是，如果我有一个像**findByName("Czechoslovakia")**这样的查找方法，那么在 1992 年之后这将不会返回任何内容。我不知道客户端代码会如何对它做出反应（毕竟它总是希望返回 Country，因为它是一个字典数据）。**如果我有类似findById(ID_CZ)**的东西，情况会变得更糟。很难找到所有这些依赖项。

如果我将 Country.Czechoslovakia 从我的枚举中删除，我将强迫自己处理对捷克斯洛伐克的任何依赖。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-25T14:00:44.877

在我处理过的一些应用程序中，数据库中有一个包含所有此类数据的“枚举”表。它只包含两列：EnumName 和 Value，并且会像这样填充：

*   “国家”、“德国”
*   “国家”、“英国”
*   “国家”、“美国”
*   “水果”、“苹果”
*   “水果”、“香蕉”
*   “水果”、“橙子”

然后在应用程序执行开始时将其读入并缓存。优点是我们没有为每种不同的枚举类型使用数十个数据库表；如果我们需要改变数据，我们不需要重新编译任何东西。

这可以很容易地扩展到包括额外的列，例如指定默认排序顺序或替代 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-25T13:54:03.317

如果它不会经常更改并且您可以负担得起将应用程序关闭以应用更新，那么我会将其放在 Java 枚举中并为 编写我自己的方法`findById()`，`findByName()`依此类推。

好处：

*   快速 - 对不变数据（或缓存要求）没有数据库访问；
*   简单的;
*   与重构工具配合得很好。

缺点：

*   需要关闭应用程序才能更新。

如果将数据放在自己的 jarfile 中，更新就像更新 jar 并重新启动应用程序一样简单。

可以通过消费者存储枚举本身的值，或者通过引用不太可能因国家/地区而改变的 ISO 代码来消除硬编码问题……

如果您担心使该枚举与数据库“同步”，请编写一个集成测试来准确检查并定期运行它（例如：在您的 CI 机器上）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-25T13:54:37.357

就个人而言，我一直采用数据库方法，主要是因为我已经在数据库中存储了其他信息，因此编写另一个 DAO 很容易。

但是另一种方法可能是将其存储在 jar 的属性文件中？我从来没有在 Java 中这样做过，但它似乎在 iPhone 开发中很常见（我目前正在学习的东西）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-25T13:55:47.713

我可能会在我的 jar 中嵌入一个文本文件。我会在启动时（或首次使用时）将其加载到内存中。那时：

*   很容易改变（即使是没有编程知识的人）
*   即使没有完全重新部署也很容易更新 -*只需将文本文件*放在类路径的某个位置
*   无需访问数据库

编辑：好的，如果您需要从代码中引用特定国家/地区的数据，那么：

*   使用枚举方法，这*总是*意味着重新部署
*   使用上述方法，但保留国家 ID 的枚举，然后进行单元测试以确保每个 ID 都映射到文本文件中。这意味着您可以在不重新部署的情况下更改其余数据，并且非技术人员仍然可以更新数据而不会到处看到可怕的代码。

归根结底，这是一个权衡利弊的案例——如果上述优势与您无关（例如，手头总会有一个编码器，并且部署不是问题），那么枚举是有意义的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-25T14:06:48.000

这对您没有帮助，但这取决于...

- 你打算对那些国家做什么？

您会将它们存储在数据库中的其他表中吗/如果添加新国家/地区，现有数据会发生什么/其他应用程序会访问这些数据吗？

- 你打算把这些国家的名字翻译成几种语言吗？

- 您的应用程序的业务逻辑是否取决于所选国家/地区？- 你需要乡村课程吗？

ETC...

如果没有更多信息，我将从几个国家的枚举开始，并根据我的需要进行重构......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-25T14:24:02.310

使用数据库表的优点之一是您可以放入[外键](http://en.wikipedia.org/wiki/Foreign_key)约束。这样您的[引用完整性](http://en.wikipedia.org/wiki/Referential_integrity)将始终保持不变。无需像 DanVinton 为枚举建议的那样运行集成测试[，](https://stackoverflow.com/questions/586042/where-do-you-put-your-dictionary-data/586061#586061)它永远不会不同步。

我也不会尝试像 saw-lau[建议](https://stackoverflow.com/questions/586042/where-do-you-put-your-dictionary-data/586084#586084)的那样制作一个通用枚举表，主要是因为你失去了干净的外键约束，这是首先将它们放在数据库中的主要优势（最好将它们粘贴在文本中文件）。数据库擅长处理大量表。如果您想以某种方式区分它们，请在表名前加上“ENUM_”。

该应用程序始终可以将它们作为启动时间或由重新加载事件触发时加载到地图中。

编辑：来自评论，“*当然我会在我的数据库中使用外键约束。但它可以在应用程序端使用或不使用枚举来完成*”

啊，我在阅读您问题中的第二个要点时错过了这一点。但是我仍然说最好将它们加载到地图中，主要基于[DRY](http://en.wikipedia.org/wiki/DRY)。否则，当需要维护它的人添加一个新国家/地区时，他们肯定会在一个地方更新而不是另一个，并且一直摸不着头脑，直到他们发现他们需要在两个不同的地方更新它。[过早优化](http://en.wikipedia.org/wiki/Premature_optimization#When_to_optimize)的一个案例。恕我直言，以较少可维护的代码为代价，性能优势将是最小的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-25T14:11:18.067

我会开始做最简单的事情 - 枚举。当谈到国家/地区的变化几乎与我的代码一样频繁时，我会将表设为外部，以便无需重建即可对其进行更新。但是请注意，当您将其设为外部时，您会添加一整罐 UI、测试和文档蠕虫。

# c# - 在 nhibernate 中具有未知列的表上的 CRUD

> ID：586044
> 
> 赞同：0
> 
> 时间：2009-02-25T13:48:10.850
> 
> 标签：c#, fluent-nhibernate

例子：

```
public class ContactMap : ClassMap<Contact>
{
    public ContactMap()
    {
        WithTable("ida_contact");
        Id(x => x.ID, "ida_contact_id").WithUnsavedValue(0).GeneratedBy.UuidHex("");
        Map(x => x.FirstName);
        Map(x => x.Surname);
        Map(x => x.Address1, "dm_address_1");
        Map(x => x.Address2, "dm_address_2");
        Map(x => x.Address3, "dm_address_3");
        Map(x => x.Postcode, "dm_postcode");
        Map(x => x.City, "dm_city");
        Map(x => x.CountryCode, "dm_countrycode");
        Map(x => x.PhoneMobile, "phone_mobile");
        Map(x => x.PhoneHome, "phone_home");
        Map(x => x.Email);
        Map(x => x.DOB);
        Map(x => x.SMSAccept, "sms_accept");
        Map(x => x.EmailAccept, "email_accept");
        Map(x => x.UserName);
        Map(x => x.Password);
    }
} 
```

这个类映射是限制性的，因为在我的其他一些项目中，表格看起来完全不同。

我倾向于做的是映射一个字典，其中字典中的每个元素都代表表中的一列，这样在数据库中添加列时它将是 100% 动态的，我只需要更新映射文件如果我正在集成与不同的系统，则使用哪个表。这还需要一个包含元数据的表来提供类型和验证信息以满足我的域的要求。

有没有办法在 fluent-nhibernate 中进行这种映射？某种形式的

```
public class ContactMap : ClassMap<IDictionary<string, object>>
{
     WithTable("Current_contactTable");
} 
```

我确实认为该解决方案闻起来有点难闻，因此，如果有人有更强类型的解决方案或指向某个 id 的链接，我很乐意听到它；）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-28T08:05:06.987

我不认为有，你应该创建一个新的映射。

> 这个类映射是限制性的，因为在我的其他一些项目中，表格看起来完全不同。

嗯，这是另一个项目，另一个映射。fluentNH 的重点是创建一种编写映射文件的强类型方式——就是这样。

你的字典不会有任何改进，难道你也必须重写字典中的数据吗？（或者也许我误解了一些东西。）

# algorithm - 如何选择向量中的一组数字

> ID：586047
> 
> 赞同：4
> 
> 时间：2009-02-25T13:49:17.743
> 
> 标签：algorithm, math

我有一个具有一些测量特征概率的应用程序。我想从向量中选择 n 个最佳特征。我有一个实数向量。向量被归一化，所有数字的总和为 1（它是某些特征的概率）。

我想选择一组小于 N（假设大约 8）个最大数字的 n 组。数字必须紧密无间隙，并且它们也应该有很大的总和（剩余数字的总和应该低几倍）。

任何想法如何做到这一点？

我尝试使用 80% 的分位数（但它对相对较大的间隙不敏感，例如 [0.2, 0.2, 0.01, 0.01, 0.001, 0.001 ... len ~ 100] ），我尝试了两个连续数字之间的一些阈值，但是没有什么工作太好。

目前我有一些部分解决方案，但我只是想知道是否有一些我忽略的简单解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-25T14:10:49.127

约翰的回答很好。你也可以试试

*   对概率进行排序
*   找到连续概率之间的最大差距
*   从那里开始工作

从那里开始，它开始听起来像是一个模式识别问题。
我最喜欢的方法是 markov-chain-monte-carlo(MCMC)。

编辑：既然你澄清了你的问题，我的第一个想法是，因为你只有 8 个可能的答案，根据它包含的概率以及它是否在间隙中分裂，为每个答案制定一个分数，并做出启发式判断.

进一步编辑：这听起来有点像逻辑回归。您想找到一个有效地将您的集合划分为成员和非成员的 P 值。对于给定的 P 值，您可以计算集成的对数似然，并选择使该值最大化的 P。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-25T14:02:30.070

听起来您想选择 n 个最大的概率，但数字 n 是灵活的。如果 n 是固定的，比如 n=10，您可以对向量进行排序并取出前 10 个项目。但是从您的示例看来，如果数据中存在自然中断，您可能希望使用较小的 n 值。也许您想从最大概率开始，然后沿着列表选择项目，直到您选择的概率总和超过某个阈值。

也许你有一个隐含的优化问题，你想最大化一些概率，并对大 n 进行一些惩罚。试着用这种方式陈述你的问题。您可能会找到自己的答案，或者您可以在此处重新表述您的问题，以帮助其他人为您提供更好的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-25T17:38:54.323

我不确定这是否是您想要的，但似乎您想要执行以下操作。

让我们假设概率是`x_1,...,x_N`递增的。然后你应该尝试找到`1<= i < j <= N`这样的功能

```
f(i,j)  =  (x_i + x_(i+1) + ... + x_j)/(x_j - x_i) 
```

被最大化。这可以在二次时间中天真地完成。

# ajax - 用于在上一页导航的 AJAX 网页

> ID：586053
> 
> 赞同：0
> 
> 时间：2009-02-25T13:51:56.880
> 
> 标签：ajax

数据在`gridview`启用 AJAX 的网页上随分页一起显示。`gridView`包含包含链接按钮的项目模板。`itemCommand`发生事件时，页面重定向以在新页面中显示数据。按下浏览器上的`Back`按钮时，不会加载页面的先前状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-25T14:02:21.270

也许设置一个cookie并在初始化gridview时使用它来获取正确的页面。或者修改 URL 末尾的哈希（例如，将“#page2”添加到地址栏并在初始化时重新读取）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-25T14:02:34.530

看看[这个来自google的js东西](http://code.google.com/p/reallysimplehistory/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-02-25T13:58:48.953

使用[Google Web Toolkit](http://code.google.com/webtoolkit/)，它允许状态被添加书签并且不受后退/前进按钮的影响。

否则，您的选择是：

*   告诉用户不要按后退按钮。
*   将状态放在 url 中，例如`mypage.asp#page_123`并使用它来确定页面加载时 javascript 中的状态。

# hibernate - HQL以预定义的顺序查找对象的起始索引？

> ID：586065
> 
> 赞同：0
> 
> 时间：2009-02-25T13:55:04.440
> 
> 标签：hibernate, jpa, hql

使用 HQL，我想搜索排序对象的起始索引。

例如，如果我有以下持久类：

```
<class name="Word">

    <id name="id" type="int">
        <meta attribute="scope-set">protected</meta>
        <generator class="native"/>
    </id>

    <many-to-one name="sentence" class="Sentence"/>

    <property name="word" type="string"/>

    <property name="num" type="integer"/>

</class> 
```

```
<class name="Sentence">

    <id name="id" type="int">
        <meta attribute="scope-set">protected</meta>
        <generator class="native"/>
    </id>

    <set name="words" lazy="true">
        <one-to-many class="Word"/>
    </set>

</class> 
```

我将以下单词持久化到一个句子对象中：

```
WORD   NUM
---------- 
the    0 
cow    1 
jumped 2 
over   3 
the    4 
moon   5 
but    6 
the    7 
cow    8 
forgot 9 
her    10  
bell   11 
```

我想搜索“the cow”，然后返回 0 和 7。搜索“the cow jumped”只会返回 0。

我目前的方法是迭代搜索——查询第一个单词的索引，然后使用该索引查看以下单词的索引是否是我想要的。这是一种好方法还是有办法*在一个*查询中完成所有操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-25T14:16:45.073

这种方法没有错。迭代查询有时是不可避免的。

有返回行号的数据库，您可以使用它来构建复杂的查询。我不认为hibernate对此有支持。（我知道 oracle，postgre >= 8.4）很可能性能会比执行两个查询更差。

只要确保您不会遇到无休止的查询，或者查询的数量会随着输入的大小或现有数据的大小线性增长。

# symbian - 是否可以使用 Visual Studio 为索尼爱立信手机（symbian）编程？

> ID：586070
> 
> 赞同：1
> 
> 时间：2009-02-25T13:55:55.263
> 
> 标签：symbian, smartphone

这个问题只是出于好奇，我拥有一个 P1i，玩它会很好:)

一些文档的链接会很好:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-25T13:58:02.480

它不受官方支持，但显然你可以让它工作：

[http://www3.symbian.com/faq.nsf/7b5405edb1250e7c802569ee005d054e/30398b3e9500a24d80256c7f00693a91?OpenDocument](http://www3.symbian.com/faq.nsf/7b5405edb1250e7c802569ee005d054e/30398b3e9500a24d80256c7f00693a91?OpenDocument)

另外，如果你用谷歌搜索的话，还有一些第三方解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-25T14:08:48.273

不要忘记 VS 也支持基于 makefile 的项目，因此只要有基于 CLI 的编译器，您几乎可以开发任何东西。有时，如果幸运的话，Intellisense 可以拾取标题并进行自动完成。

编辑：要在 VS2K5 中执行此操作，请执行以下操作：

选择 File->New->Project... 在对话框中，选择左侧树形视图的 Visual C++ 分支下的 General 类型。右侧列表应该有一个“Makefile 项目”。突出显示，选择一个项目名称，然后确定。您现在得到一个向导，允许您设置构建命令行（什么版本的 make 等等）。

您必须使用源文件手动创建和更新 makefile，但其他一切都像原生 VS 项目一样工作（F7 构建等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-25T14:20:08.170

是的，您可以 - 使用旧版本 (VC++.NET 2003) 和 Carbide.vs

# java - HQL 中的 between 是否严格比较？

> ID：586077
> 
> 赞同：39
> 
> 时间：2009-02-25T13:58:02.433
> 
> 标签：java, hibernate, jpa, hql

如果我用 HQL 写

```
A between 5 and 10 
```

是否相当于

```
A >= 5 and A <= 10 
```

或者

```
A > 5 and A < 10 
```

或其他4种组合？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2009-02-25T17:31:30.050

我在 Hibernate 文档中没有找到任何行为规范，但是`between`HQL 中的运算符被翻译为`between`SQL 中的运算符，这是包容性的。

所以`between`在 HQL 中也是包容的，即

```
A between 5 and 10 
```

相当于

```
A >= 5 and A <= 10 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-26T07:28:57.603

显然，对此存在一些混淆。自然语言会暗示它是排他性的，但事实并非如此。实际上它的 A >= 5 和 A<=10。由于已经给出了相互矛盾的答案（并且已删除），因此需要进一步澄清：（来自[http://www.techonthenet.com/sql/between.php](http://www.techonthenet.com/sql/between.php)）

```
Example #1 - Numbers

The following is an SQL statement that uses the BETWEEN function:

SELECT *
FROM suppliers
WHERE supplier_id between 5000 AND 5010;

This would return all rows where the supplier_id is between 5000 and 5010, inclusive. It is equivalent to the following SQL statement:

SELECT *
FROM suppliers
WHERE supplier_id >= 5000
AND supplier_id <= 5010; 
```

# oop - 一个类什么时候应该使用自己的getter/setter而不是直接访问成员？

> ID：586087
> 
> 赞同：13
> 
> 时间：2009-02-25T14:01:43.080
> 
> 标签：oop, encapsulation

在 Eclipse 中生成 setter 和 getter 时，选项之一是在类中使用 getter 和 setter，而不是直接访问类成员。这种级别的类内部封装是有用的，还是将一个好主意走得太远了？

**DUPE**：[您应该使用类内部的访问器属性，还是只使用类外部的访问器属性？](https://stackoverflow.com/questions/476021/should-you-use-accessor-properties-from-within-the-class-or-just-from-outside-of)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-25T14:07:14.643

我认为，如果您希望发生潜在的副作用 - 验证、日志记录等，这是一个好主意。（在 C# 中，我希望能够声明一个变量和属性，并说对变量的*唯一*访问是通过财产。）

有时您可能会发现您需要直接精确地设置变量，因为您*不*想要副作用。例如，您可能需要一起设置两个变量，并且“之前”和“之后”状态都有效，但单独设置任一属性会使验证失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-25T14:08:19.430

如果您允许派生类重新定义您的 getter，它会很有用。因此，即使在类内部使用 getter 也会使您的设计保持可扩展性。

在我看来，这是需要在编码指南中定义的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-25T16:38:40.427

简短的回答是“这取决于”:)

Eric Lippert 有一篇关于[Automatic vs. Explicit properties](http://blogs.msdn.com/ericlippert/archive/2009/01/14/automatic-vs-explicit-properties.aspx)的优秀文章处理了这个问题，尽管角度略有不同。

本质上，您需要问的问题是：

> “从类内部，访问这个......属性的所需语义与从外部访问该属性的所需语义不同吗？”

如果语义相同，你的类应该使用它自己的属性。如果语义不同，您的类将需要直接操作支持字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-25T14:08:39.693

例如，当您有 setter 执行额外操作（例如设置脏标志或通知观察者）时，它很有用。

对于吸气剂，您可以在更改表示时计算一个值，而不是访问一个字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-25T14:08:52.580

我发现我有时会这样做 - 特别是当我需要或强烈预期我会需要一些登录时，获取或设置（以及围绕它们的验证）成员。

我发现在这些情况下，拥有私有/内部属性确实有帮助。

但我当然不会为任何成员这样做。

最新的 .NET/VS 在这里真的很有帮助，因为您可以这样声明一个属性：

```
public string SomeProperty
{
get;
set;
} 
```

它有效地创建了幕后的memebr。我知道这对您没有帮助，但我认为这可能会引起您的兴趣:-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-25T16:30:40.413

如果您希望此成员可以通过 Winform 或 WPF 进行数据绑定，我相信您需要将其声明为属性。我大约 95% 的肯定数据绑定需要一个属性（getter/setting 语法）。我有一个小型 wpf 解决方案来演示这一点，但我看不到在此处附加它的方法。

这是代码：（使用 VS 2008 SP1 构建，针对 .net 3.5 - 我使用了 WPF 项目）。WPF 项目中有 2 个项目，主窗口 (window1) 和我们正在测试的对象 (DataObject) 窗口上有一个标签，该标签数据绑定到数据对象实例中的 Name 属性。如果将 Name 属性转换为字段（删除 getter/setter），数据绑定将停止工作。

Window1.xaml：

```
<Window x:Class="WpfDatabinding.Window1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="Window1" Height="300" Width="300">
<Grid>
    <Label Name ="Label1" Height="28" Margin="12,24,37,0" VerticalAlignment="Top" Content="{Binding Name}"></Label>
</Grid> 
```

Window1.xaml.cs

```
using System;
using System.Windows;

namespace WpfDatabinding
{
    /// <summary>
    /// Interaction logic for Window1.xaml
    /// </summary>
    public partial class Window1 : Window
    {
        private DataObject ADataObject;

        public Window1()
        {
            InitializeComponent();
            this.ADataObject = new DataObject();
            this.ADataObject.Name = "Hello!";
            this.DataContext = this.ADataObject;
        }
    }
}

namespace WpfDatabinding
{
    /// <summary>
    /// Interaction logic for Window1.xaml
    /// </summary>
    public partial class Window1 : Window
    {
        private DataObject ADataObject;

        public Window1()
        {
            InitializeComponent();
            this.ADataObject = new DataObject();
            this.ADataObject.Name = "Hello!";
            this.DataContext = this.ADataObject;
        }
    }
} 
```

数据对象.cs：

```
namespace WpfDatabinding
{
    public class DataObject
    {
        // convert this to a field, and databinding will stop working
        public string Name
        {
            get;
            set;
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-12T17:36:48.217

当您需要扩展类的 getter/setter 行为时，封装字段（getter/setter 而不是直接成员访问）很有用。然而在继承中，如果它的子类不应该知道它的私有内容，那么保留你的类的内部在概念上是很有趣的。因此，有时该字段对于类的实现来说是私有的，因此即使是子类也不知道它。

# oracle - Oracle：to_char(number) 的模式以添加额外的 ascii 字符？

> ID：586088
> 
> 赞同：4
> 
> 时间：2009-02-25T14:02:04.797
> 
> 标签：oracle, formatting, numbers, ascii, oracle-apex

使用 Oracle to_char(number) 函数，是否可以将 ascii 字符附加到返回的字符串？

具体来说，我需要在返回的字符串中添加一个百分比字符。

"select to_char(89.2244, '999G999G999G999G990D00') from dual" --> 返回 "89.22"。我需要一个返回“89.22%”的格式模式。

我通过 Application Express 中的报告来使用它，所以不能简单地将“%”连接到查询中，我需要将它放在数字格式中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-25T14:07:08.623

所以你不能用 CONCAT 包装 to_char 吗？

```
select concat(to_char(89.2244, '999G999G999G999G990D00'),'%') from dual 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-25T14:14:06.703

您不能以数字格式正确执行此操作。

如果您能够`NLS_CURRENCY`为您的会话进行更改，您可以执行以下操作：

```
SELECT  TO_CHAR(1.2, '999G999G999G999G990D00L' /*, 'NLS_CURRENCY=%' */)
FROM    dual

--- 
1,20% 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-25T14:15:43.187

快速而肮脏的方式：

选择 to_char(89.2244, '999G999G999G999G990D00L', 'NLS_CURRENCY=''%''') 从双;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-12T18:37:31.443

```
SYS @ orant11g >select to_char(89.2244, '999G999G999G999G990D00')||'%' from dual; 
```

> ```
> TO_CHAR(89.2244,'999G999
> ------------------------
>               89.22% 
> ```

只需使用 || bar 而不是 concat 函数。

# c# - 将 Linq 中的可为空类型与 Sql 进行比较

> ID：586097
> 
> 赞同：43
> 
> 时间：2009-02-25T14:05:05.133
> 
> 标签：c#, linq-to-sql, nullable

我有一个具有 Nullable ParentId 字段的 Category 实体。当执行下面的方法并且 categoryId 为 null 时，结果似乎为 null 但是有些类别的 ParentId 值为 null。

这里有什么问题，我错过了什么？

```
public IEnumerable<ICategory> GetSubCategories(long? categoryId)
{
    var subCategories = this.Repository.Categories.Where(c => c.ParentId == categoryId)
        .ToList().Cast<ICategory>();

    return subCategories;
} 
```

顺便说一句，当我将条件更改为 (c.ParentId == null) 时，结果似乎正常。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2010-10-23T19:42:52.950

另一种方式：

```
Where object.Equals(c.ParentId, categoryId) 
```

或者

```
Where (categoryId == null ? c.ParentId == null : c.ParentId == categoryId) 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-02-25T14:08:47.463

首先要做的是记录日志，看看生成了什么 TSQL；例如：

```
ctx.Log = Console.Out; 
```

LINQ-to-SQL 似乎有点不一致地处理空值（取决于文字与值）：

```
using(var ctx = new DataClasses2DataContext())
{
    ctx.Log = Console.Out;
    int? mgr = (int?)null; // redundant int? for comparison...
    // 23 rows:
    var bosses1 = ctx.Employees.Where(x => x.ReportsTo == (int?)null).ToList();
    // 0 rows:
    var bosses2 = ctx.Employees.Where(x => x.ReportsTo == mgr).ToList();
} 
```

所以我只能建议使用带有空值的顶级表单！

IE

```
Expression<Func<Category,bool>> predicate;
if(categoryId == null) {
    predicate = c=>c.ParentId == null;
} else {
    predicate = c=>c.ParentId == categoryId;
}
var subCategories = this.Repository.Categories
           .Where(predicate).ToList().Cast<ICategory>(); 
```

* * *

更新 - 我使用自定义使其“正常”工作`Expression`：

```
 static void Main()
    {
        ShowEmps(29); // 4 rows
        ShowEmps(null); // 23 rows
    }
    static void ShowEmps(int? manager)
    {
        using (var ctx = new DataClasses2DataContext())
        {
            ctx.Log = Console.Out;
            var emps = ctx.Employees.Where(x => x.ReportsTo, manager).ToList();
            Console.WriteLine(emps.Count);
        }
    }
    static IQueryable<T> Where<T, TValue>(
        this IQueryable<T> source,
        Expression<Func<T, TValue?>> selector,
        TValue? value) where TValue : struct
    {
        var param = Expression.Parameter(typeof (T), "x");
        var member = Expression.Invoke(selector, param);
        var body = Expression.Equal(
                member, Expression.Constant(value, typeof (TValue?)));
        var lambda = Expression.Lambda<Func<T,bool>>(body, param);
        return source.Where(lambda);
    } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-25T14:08:57.090

我的猜测是，这是由于 DBMS 的一个相当普遍的属性——仅仅因为两件事都是空的，并不意味着它们是相等的。

为了详细说明，请尝试执行以下两个查询：

```
SELECT * FROM TABLE WHERE field = NULL

SELECT * FROM TABLE WHERE field IS NULL 
```

“IS NULL”构造的原因是在 DBMS 世界中，NULL != NULL 因为 NULL 的含义是值未定义。由于 NULL 表示未定义，因此您不能说两个空值相等，因为根据定义，您不知道它们是什么。

当您明确检查“field == NULL”时，LINQ 可能会将其转换为“field IS NULL”。但是当您使用变量时，我猜 LINQ 不会自动进行这种转换。

这是[一个 MSDN 论坛帖子](http://social.msdn.microsoft.com/forums/en-US/linqprojectgeneral/thread/d00f5611-4fce-4da4-8f79-802336fdfe1a/)，其中包含有关此问题的更多信息。

看起来一个好的“作弊”是将您的 lambda 更改为如下所示：

```
c => c.ParentId.Equals(categoryId) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-14T13:42:41.667

您需要使用运算符 Equals：

```
 var subCategories = this.Repository.Categories.Where(c => c.ParentId.Equals(categoryId))
        .ToList().Cast<ICategory>(); 
```

**Equals** fot 可空类型在以下情况下返回**true**：

*   HasValue 属性为 false，另一个参数为 null。也就是说，根据定义，两个空值相等。
*   HasValue 属性为 true，并且 Value 属性返回的值等于另一个参数。

并在以下情况下返回**false**：

*   当前 Nullable 结构的 HasValue 属性为 true，另一个参数为 null。
*   当前 Nullable 结构的 HasValue 属性为 false，其他参数不为 null。
*   当前 Nullable 结构的 HasValue 属性为 true，并且 Value 属性返回的值不等于其他参数。

更多信息在这里[Nullable<.T>.Equals 方法](http://msdn.microsoft.com/en-us/library/c7b1e4z6.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-25T15:04:07.457

像这样更简单的东西呢？

```
public IEnumerable<ICategory> GetSubCategories(long? categoryId)
{
    var subCategories = this.Repository.Categories.Where(c => (!categoryId.HasValue && c.ParentId == null) || c.ParentId == categoryId)
        .ToList().Cast<ICategory>();

    return subCategories;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-16T11:27:30.120

或者你可以简单地使用它。它还将转换为更好的 sql 查询

```
Where((!categoryId.hasValue && !c.ParentId.HasValue) || c.ParentId == categoryId) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-30T20:22:41.053

Linq to Entities 支持 Null Coelescing (??) 所以只需将 null 即时转换为默认值。

```
Where(c => c.ParentId == categoryId ?? 0) 
```

# build-automation - IIS 站点和 nant/nantcontrib？

> ID：586098
> 
> 赞同：4
> 
> 时间：2009-02-25T14:05:17.770
> 
> 标签：build-automation, nant, nantcontrib

是否可以使用 NAnt 管理 IIS Web 应用程序？比如停止还是启动呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-25T14:38:17.737

Nant 有 servicecontroller 任务，您可以使用它停止/启动 Web 服务器或整个 IIS，我通常使用它来停止/启动 Web 服务器。

```
<servicecontroller action="Stop" service="w3svc" 
   timeout="10000" verbose="true" /> 
```

[可在http://nant.sourceforge.net/release/latest/help/tasks/servicecontroller.html](http://nant.sourceforge.net/release/latest/help/tasks/servicecontroller.html)获得文档

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-25T14:16:21.500

也许你可以使用[exec](http://nant.sourceforge.net/release/latest/help/tasks/exec.html)任务来执行

```
iisreset -stop
iisreset -start 
```

**编辑：**这个[VBS](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/9ea4de7a-591a-48a6-84d8-0145fc594139.mspx?mfr=true)可能有助于在 IIS 下停止/启动 WebApplications

这是在 IIS 上停止具有 nant 任务的网站的公认解决方案：

```
<target name="stopSite"> 
  <exec program="cscript.exe"> 
    <arg value="C:\windows\system32\iisweb.vbs" /> 
    <arg value="/stop" /> 
    <arg value="test" /> 
  </exec> 
</target> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-12-27T17:09:46.810

如果您喜欢单独使用 Powershell 或通过 Nant 调用 powershell 脚本，这很容易。

```
IIS:\>Stop-WebAppPool -Name "DefaultAppPool"
IIS:\>Start-WebAppPool -Name "DefaultAppPool" 
```

您可以在此处下载管理单元 [http://www.iis.net/download/PowerShell](http://www.iis.net/download/PowerShell)

关于其使用的一些注意事项： [http ://technet.microsoft.com/en-us/library/ee790599.aspx](http://technet.microsoft.com/en-us/library/ee790599.aspx)

您还可以启动/停止单个网站。

# open-source - 您如何掌握 Microsoft 的公开信息？

> ID：586102
> 
> 赞同：1
> 
> 时间：2009-02-25T14:06:47.203
> 
> 标签：open-source

微软正在拆除墙壁和障碍。他们的产品和项目开发过程变得越来越透明。他们到处都在写博客，并且每时每刻都在发布开源代码项目。虽然这一切都很棒，但它可能是压倒性的！

像[Scott Hanselman](http://www.hanselman.com/blog/)这样的人正在尽最大努力跟上所有信息并澄清事情。仍然几乎不可能全面了解微软的发展方向以及哪些项目将持续更长时间。项目在 beta 阶段徘徊（由“谷歌方法”提供），信息在博客、[Codeplex](http://www.codeplex.com/)和其他地方传播。在所有新事物中，我们可怜的开发人员需要生产东西并选择要使用的项目。

我想知道**你**是如何处理这一切的？我自己的好信息来源是：

*   值得信赖的[MSDN](http://msdn.microsoft.com)
*   [Scott Hanselman](http://www.hanselman.com/blog/)（博客和播客）
*   其他各种博主，例如[Glenn Block](http://blogs.msdn.com/gblock/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-25T14:16:06.650

就个人而言，我不关心它。如果我的一个朋友认为某件事很重要或很酷，他们会链接我。除此之外，我没有时间担心微软这个月/周/天在做什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-25T14:18:00.577

我使用[微软社区](http://www.microsoftcommunities.com/)。它们都列在[http://www.microsoftcommunities.com/](http://www.microsoftcommunities.com/)上。[球体](http://orbs.microsoftcommunities.com/)和[自动收](http://ticker.microsoftcommunities.com/)报机很酷，但我从来没有打开过很长时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-25T14:29:27.820

[第 9 频道](http://channel9.msdn.com/)通常对他们所做的几乎所有事情都喋喋不休。他们开始做更多的播客、截屏和采访。

[第 10 频道](http://on10.net/)有更多的宣传片和视频，但我发现它很好地补充了第 9 频道。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-25T14:13:22.150

我总是查看每件新事物，并试图弄清楚这是否是*真正*的新事物和有用的事物，或者它是否是新的、闪亮的包装中的旧事物。

就我个人而言，我喜欢选择一件事并花上一段时间来学习它，从而让我在工作中更有效率。如果你试图“从消防水龙带里喝水”，你会保留很少，最终只会感到不知所措。

在 Microsoft 最近发布的所有内容中，我发现只有两个相关且真正具有开创性：WCF 和 LINQ。我花了很多时间学习这些技术，因为我相信它们是最相关和最有用的。

现在这一切对你来说可能都不是真的——诀窍是弄清楚什么与你和你的目标相关，然后专注于这些事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-25T14:42:16.183

我在[weblogs.asp.net](http://weblogs.asp.net/) [主提要](http://weblogs.asp.net/MainFeed.aspx)上获得了很多运气。它是网站上所有博客的集合，包括[Scott Guthrie](http://weblogs.asp.net/scottgu/)和其他 Microsoft 内部人员，以及许多非 Microsoft 人员，他们是相当认真的技术博客作者。

主题绝对不仅限于 ASP.NET，还全面涵盖了 .NET 开发和 Microsoft 技术。

你可以浏览博客文章的标题，主题会跳出来，指出微软领域的“热门”和新事物。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-03T20:54:21.153

[DotNet](http://www.dotnetrocks.com/ "点网摇滚") Rocks播客很好。不一定纯粹是面向 MS 的。

# c# - 我如何从课堂返回列表

> ID：586116
> 
> 赞同：-2
> 
> 时间：2009-02-25T14:09:46.633
> 
> 标签：c#, .net, generics

```
 class Program
    {
        static void Main(string[] args)
        {
            mylist myitems1 = new mylist("Yusuf","Karatoprak");
            SelectedItemsList slist = new SelectedItemsList();
            slist.Items.Add(myitems1);
            foreach( object o in slist.Items)
            Console.Write(o.ToString()+"\n");
            Console.ReadKey();
        }
    } 
```

```
 public class mylist
    {
        private string Ad;
        private string SoyAd;
        public mylist(string ad, string soyad)
        {
            Ad = ad;
            SoyAd = soyad;
        }
```

```
 public override string ToString()
        {
            return "Ad:" + this.Ad;
        }
    }
    public class SelectedItemsList
    {
        public List Items; `public SelectedItemsList()
    {
        Items = new List<mylist>();

    }
}</code></pre>` 

我想返回一个数组列表或列表形式 mylist 类，但如何？返回 this.Ad，也返回 this.SoayAd 蚀刻。请看 ToString() 程序：它是返回 Ad，但我想同时返回 Ad 和 SoyAd。列表中不仅有广告，还有广告、大豆广告。

            回答 #1

赞同：6

时间：2009-02-25T14:14:50.757

你的问题很不清楚，但如果你的意思是你希望 mylist 有一个返回包含 Ad 和 SoyAd 的列表的方法，那么就这样做：

```
// This could be a property
public IList<string> GetAds()
{
    List<string> ret = new List<string>();
    ret.Add(Ad);
    ret.Add(SoyAd);
    return ret;
} 
```

如果可以`IEnumerable<string>`使用，可以使用迭代器块：

```
// This could be a property
public IEnumerable<string> GetAds()
{
    yield return Ad;
    yield return SoyAd;
} 
```

            回答 #2

赞同：2

时间：2009-02-25T14:14:58.277

要返回 ArrayList 或 List，只需使用“public List someFunction()”或“public ArrayList someFunction()”。如果这不是您想要的，请重新表述您的问题。

            回答 #3

赞同：1

时间：2009-02-25T14:18:41.963

仅返回列表`ad`或`soyad`保持独立列表，在添加时填写

        c - long long 常量的后缀是什么

ID：586118

赞同：4

时间：2009-02-25T14:10:22.063

标签：c, constants

如果我想在 C 代码中使用类似下面的内容：

```
if(num < 0x100000000LL) 
```

我希望比较发生在 long long 常量上，但后缀 LL 在 MSVC6.0 中不起作用，但在 MS Visual Studio 2005 中起作用。

我怎样才能让它在 MSVC 6.0 中工作？

-阿吉特

            回答 #1

赞同：1

时间：2009-02-25T14:18:50.920

AFAIK，在 MSVC 6.0 中不支持 long long。

例如，看看这个[讨论线程](http://coding.derkeiler.com/Archive/C_CPP/comp.lang.c/2004-03/2726.html)。也许， __int64 可以代替。无论如何，我不知道要使用哪个其他后缀。

编辑： __int64 似乎工作和支持功能，似乎根本不需要后缀。看看[这里](http://www.codeguru.com/forum/archive/index.php/t-292527.html)，例如。本页末尾还有一些解决方法。

            回答 #2

赞同：1

时间：2009-02-25T14:43:44.323

该`long long`类型已在 1999 年 ISO C 标准中标准化，预计今年或明年将在 C++ 中标准化（只要标准最终确定）。像所有这些标准功能一样，有早期采用者和晚期采用者。语言标准委员会通常不愿意包含以前没有尝试过的东西。

Visual C 6.0 于 1998 年发布，因此早于其中包含的任何标准`long long`。  

            回答 #3

赞同：0

时间：2009-02-25T14:20:27.187

我没有要检查的 VC 6.0 的副本，但 i64 可以工作吗？（例如`12i64`）

        iphone - 如何限制 iPhone 上文本字段中文本/数字的长度？

ID：586119

赞同：1

时间：2009-02-25T14:10:27.053

标签：iphone, textbox, user-input

我想限制文本字段的长度，以便用户知道他可以输入多少个字符。但我在 iPhone 上找不到文本字段的此类属性。任何想法如何做到这一点？

以及当达到最大长度时如何从一个文本字段切换到另一个？（让用户轻松输入）

            回答 #1

赞同：1

时间：2009-02-25T14:43:21.547

您可以查看 UITextFieldDelegate 协议，特别是 textField:shouldChangeCharactersInRange:replacementString:。您可以检查您的文本字段是否已达到其最大大小，如果是，则通过发送 becomeFirstResponder 移动到下一个适当的文本字段：

        php - 使用 .htaccess (PHP) 即时创建子域

ID：586129

赞同：125

时间：2009-02-25T14:13:20.010

标签：php, .htaccess, dns, virtualhost, subdomain

我正在寻找一个系统，在注册时将在我的网站上为用户帐户区域创建一个子域。

例如 johndoe.website.com

我认为这与 .htaccess 文件有关，并可能重定向到网站上的另一个位置？我其实不知道。但任何让我开始的信息将不胜感激。

创建一个注册区不是问题——我已经做过很多次了。我只是不确定从哪里开始子域。

            回答 #1

赞同：126

时间：2009-02-25T14:21:06.967

快速概述

1.  您需要在您的 DNS 服务器 *.website.com 上创建一个通配符域
2.  然后在您的虚拟主机容器中，您还需要指定通配符 *.website.com - 这是在文档中完成[`ServerAlias` ^的](http://httpd.apache.org/docs/current/mod/core.html#serveralias)
3.  然后在PHP中提取并验证子域并显示相应的数据

长版

1.创建通配符DNS条目

在您的 DNS 设置中，您需要创建一个[通配符域条目](http://en.wikipedia.org/wiki/Wildcard_DNS_record)，例如`*.example.org`. 通配符条目如下所示：

```
*.example.org.   3600  A  127.0.0.1 
```

2.在vhost中包含通配符

接下来在 Apache 配置中，您需要设置一个在[`ServerAlias` ^(DOCs)](http://httpd.apache.org/docs/current/mod/core.html#serveralias)指令中指定通配符的 vhost 容器。一个示例虚拟主机容器：

```
<VirtualHost *:80>
  ServerName server.example.org
  ServerAlias *.example.org
  UseCanonicalName Off
</VirtualHost> 
```

3\. 在 PHP 中找出您所在的子域

`$_SERVER`然后在您的 PHP 脚本中，您可以通过查看超级全局变量来找出域。下面是一个在 PHP 中抓取子域的例子：

```
preg_match('/([^.]+)\.example\.org/', $_SERVER['SERVER_NAME'], $matches);
if(isset($matches[1])) {
    $subdomain = $matches[1];
} 
```

我在这里使用了正则表达式来允许人们通过 www.subdomain.example.org 或 subdomain.example.org 访问您的网站。

如果您从未预料到必须处理 www. （或其他子域）然后你可以简单地使用这样的子字符串：

```
$subdomain = substr(
                 $_SERVER['SERVER_NAME'], 0,
                 strpos($_SERVER['SERVER_NAME'], '.')
             ); 
```

海量虚拟主机

大规模虚拟主机与上述方案略有不同，因为您通常会使用它来托管许多不同的网站，而不是像问题提出的那样尝试使用它来为应用程序提供动力。

我之前在[我的博客上的一篇文章](http://blog.simonholywell.com/post/1516566788/team-development-server)中记录了我的基于 mod_rewrite 的大规模虚拟主机环境，你可以看看这是否是你希望采取的路线。当然，还有[相应的 Apache 手册页](http://httpd.apache.org/docs/current/rewrite/vhosts.html#simple.rewrite)。

Apache 还有一种处理海量虚拟主机的内部方法，它的灵活性比我使用的 mod_rewrite 方法稍差。这一切都在 Apache[动态配置的大规模虚拟主机手册页](http://httpd.apache.org/docs/current/vhosts/mass.html#simple)中进行了描述。

            回答 #2

赞同：13

时间：2009-02-25T14:18:16.397

您可以首先允许每个子域，然后检查子域是否有效。例如：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^[^.]+\.example\.com$
RewriteRule !^index\.php$ index.php [L] 
```

在内部，`index.php`您可以使用以下方法提取子域：

```
if (preg_match('/^([^.]+)\.example\.com$/', $_SERVER['HTTP_HOST'], $match)) {
    var_dump($match[1]);
} 
```

但这一切都要求您的网络服务器接受每个子域名。

            回答 #3

赞同：7

时间：2009-02-25T14:38:43.053

除了设置 DNS 通配符之外，您可能还想看看[Dynamic Mass Virtual Hosting for Apache](http://httpd.apache.org/docs/1.3/vhosts/mass.html)这是我过去解决这个问题的方法

            回答 #4

赞同：6

时间：2009-02-25T15:55:47.987

最简单的方法是将所有子域（使用通配符 *）重定向到您的 /wwwroot。然后使用以下代码将 .htaccess 放入此文件夹：

```
RewriteCond %{ENV:REDIRECT_SUBDOMAIN} ="" 
RewriteCond %{HTTP_HOST} ^([a-z0-9][-a-z0-9]+)\.domain\.com\.?(:80)?$ [NC] 
RewriteCond %{DOCUMENT_ROOT}/%1 -d 
RewriteRule ^(.*) %1/$1 [E=SUBDOMAIN:%1,L] 
RewriteRule ^ - [E=SUBDOMAIN:%{ENV:REDIRECT_SUBDOMAIN},L] 
```

这将通过子域 (foldername.domain.com) 实现 /wwwroot 文件夹的每个子文件夹。

几年前在
[http://www.webmasterworld.com/apache/3163397.htm上发现的](http://www.webmasterworld.com/apache/3163397.htm)

            回答 #5

赞同：6

时间：2013-02-13T01:55:50.403

我发现用 PHP 做起来更容易。实际上是在 cPanel 中创建一个子域，并在所需的域名下创建您的文件夹。正如您将在 cPanel 中手动完成的那样，但所有这些都是通过一个简单的 PHP 函数在几毫秒内完成的。无需点击 :)

```
function create_subdomain($subDomain,$cPanelUser,$cPanelPass,$rootDomain) {

    //  $buildRequest = "/frontend/x3/subdomain/doadddomain.html?rootdomain=" . $rootDomain . "&domain=" . $subDomain;

    $buildRequest = "/frontend/x3/subdomain/doadddomain.html?rootdomain=" . $rootDomain . "&domain=" . $subDomain . "&dir=public_html/subdomains/" . $subDomain;

    $openSocket = fsockopen('localhost',2082);
    if(!$openSocket) {
        return "Socket error";
        exit();
    }

    $authString = $cPanelUser . ":" . $cPanelPass;
    $authPass = base64_encode($authString);
    $buildHeaders  = "GET " . $buildRequest ."\r\n";
    $buildHeaders .= "HTTP/1.0\r\n";
    $buildHeaders .= "Host:localhost\r\n";
    $buildHeaders .= "Authorization: Basic " . $authPass . "\r\n";
    $buildHeaders .= "\r\n";

    fputs($openSocket, $buildHeaders);
        while(!feof($openSocket)) {
           fgets($openSocket,128);
        }
    fclose($openSocket);

    $newDomain = "http://" . $subDomain . "." . $rootDomain . "/";

   //  return "Created subdomain $newDomain";

} 
```

*   查看更多信息：http: [//vikku.info/programming/php/create-subdomain-dynamically-in-php-code-to-create-subdomains-in-server-using-php.htm#sthash.HV4D2Uig.dpuf](http://vikku.info/programming/php/create-subdomain-dynamically-in-php-code-to-create-subdomains-in-server-using-php.htm#sthash.HV4D2Uig.dpuf)

            回答 #6

赞同：4

时间：2009-02-25T14:17:23.807

这与.htaccess 无关。您需要为子域设置 DNS 记录和虚拟主机。

            回答 #7

赞同：4

时间：2009-04-14T11:20:22.320

[Mod_vhost_alias](http://httpd.apache.org/docs/2.2/mod/mod_vhost_alias.html)是执行此操作的正确模块。

只需一行，您就可以告诉 Apache 使用目录散列等方法查看正确的位置。例如，以下行：

```
VirtualDocumentRoot /http/users/%3.1/%3.2/%3 
```

当请求 subdomain.yourdomain.com 时，会告诉 Apache 将文档根设置为 /http/users/s/u/subdomain

            回答 #8

赞同：0

时间：2009-02-25T15:13:18.010

我认为带有 Apache 的动态海量虚拟主机的通配符 DNS 也是一个合理的解决方案。虽然，我从未尝试过。

如果您需要扩展到多台服务器或其他解决方案不适合您，我建议使用数据库驱动的 DNS 服务器。我过去曾成功使用[过 MyDNS](http://mydns.bboy.net/)。由于它使用 MySQL（或 PostgreSQL），因此您可以使用 PHP 或其他任何方式即时更新您的 DNS。该代码看起来好像已经有一段时间没有更新了，但它是 DNS，因此并不完全是最先进的。

            回答 #9

赞同：0

时间：2017-06-02T10:22:38.433

通配符子域创建方法

首先，您必须使用服务器 DNS 编辑器创建 DNS 设置。

1.  在服务器 IP 地址中使用主机通配符`A`在 DNS 设置中创建记录。`*`

    `*  1400  IN  A  ip_address`

2.  使用主机或服务器 IP 地址`A`在 DNS 设置中再次创建记录。tld 表示顶级域或.com、.org 等域的扩展......`@``domain_name.tld`

    `@  1400  IN  A  ip_address`
           或者
     `domain_name.tld  1400  IN  A  ip_address`

3.  创建`CNAME`记录，如：

    `www  1400  IN  A  domainname.tld`

4.  `*`使用通配符创建子域，例如`*.domain.tld`
5.  在您的子域目录中创建 htaccess`*.domain.tld`并输入以下代码：

    ```
    Options +FollowSymLinks 
    RewriteEngine On 
    RewriteBase /
    RewriteRule ^([aA-zZ0-9]+)$ index.php?data=$1
    RewriteCond %{HTTP_HOST} ^([aA-zZ0-9]+)\.([aA-zZ0-9-]+)\.([aA-zZ]+)
    RewriteRule ([aA-zZ0-9]+) index.php?data=%1 
    ```

    测试您的第一个通配符子域，例如`example.domainname.tld`

如果您不想使用 htaccess 将数据作为参数传递，您也可以使用以下编码获取数据：

```
define("SUBDOMAIN_PARENT","domainname.tld");   
class getData
    {
         function __construct()
        {
            $this->data="";
            $http_host=$_SERVER['HTTP_HOST'];
         $subdom_data= str_replace(SUBDOMAIN_PARENT,"",$http_host);
         $expl_subdom_data=explode(".",$subdom_data);
      $expl_subdom_data=array_filter($expl_subdom_data);

            if($expl_subdom_data!=NULL)
            {
           $this->data=end($expl_subdom_data);
            }
       }
    }
$GLOBALS['get_data']=new getData(); 
```

并在任何地方使用您的全局变量，例如`global $get_data`.

```
echo $get_data->data; //example 
```

（注意：此类主要用于从`http_host`. 获取确切的子域名，因为在您的子域之前组合的一些额外名称也适用于`www.example.domainname.tld`. 此返回`$_GET['data']='wwww'`所以我的建议是使用`$_SERVER['http_host']`for 获取确切的值，而不是`$_SERVER['query_string']`使用您的索引页）

6.加速这个通配符子域的执行，在 TTL - DNS SETTINGS 中使用 N 秒。

7.在给定的 ttl 时间（600 - 10 分钟）后检查子域，例如 =>`http://abc.domain.tld`

（注意：通配符子域不会覆盖现有的子域。因为您现有的子域始终是第一优先级）

        javascript - DOM initMouseEvent 客户端X，客户端Y

ID：586137

赞同：2

时间：2009-02-25T14:15:01.520

标签：javascript, events, dom

如何在仅传递 X、Y 坐标的 DIV 上模拟 onclick 事件？？？

如果我试图让dispatchEvent函数显然想要在其上引发事件的对象......但是在事件创建中传递坐标是什么意思？？？？

谢谢

            回答 #1

赞同：8

时间：2009-02-25T18:12:12.450

clientX 和 clientY 参数是**相对于处理事件的元素**的位置，因此您需要知道单击事件将要到达的元素。

如果要根据窗口坐标模拟对未知元素的单击，则需要在该位置找到该元素。在 IE 和 Firefox 3 中，您可以使用`document.elementFromPoint(x, y)`. 我不知道在其他浏览器中有什么方法，除了循环浏览页面中的元素，查看它们的位置/大小以确定坐标处的内容。

您的代码看起来像这样：

```
function simulateClick(x, y) {
    var el = getElementFromPoint(x, y);

    var evt = document.createEvent("MouseEvents");
    evt.initMouseEvent("click", true, true, window,
        1, 0, 0,
        calculateClientX(el, x), calculateClientY(el, y),
        false, false, false, false, 0, null);

    el.dispatchEvent(evt);
} 
```

`getElementFromPoint`将使用`document.elementFromPoint`或迭代所有元素。`calculateClientX/Y`将计算相对于元素的点击坐标。

        c# - App.config 和 ConfigurationManager

ID：586140

赞同：3

时间：2009-02-25T14:15:58.880

标签：c#, app-config, configurationmanager

如果我调用 OpenMappedExeConfiguration() 方法并指定一个配置文件（filemap）作为参数，这是否意味着 ConfigurationManager 将从那时起使用新指定的配置文件并忽略 app.config？

我知道 ConfigurationManager 默认会查找 app.config，但是因为 OpenMappedExeConfiguration() 方法返回一个 Configuration 对象，所以它几乎就好像返回的实例只适用于指定的配置文件，但我不是 100% 确定。

            回答 #1

赞同：2

时间：2009-02-25T14:27:44.750

据我记得它只会打开配置并返回`Configuration`对象，它不会更改默认值。

            回答 #2

赞同：0

时间：2012-06-11T09:37:06.380

使用它作为参数来调用当前配置打开 AppDomain.CurrentDomain.SetupInformation.ConfigurationFile 也可以在消息框中使用它来显示正在使用的配置文件

        java - 为什么我的 Swing 应用程序窗口在应用程序退出时间歇性地不关闭？

ID：586152

赞同：1

时间：2009-02-25T14:18:26.847

标签：java, swing, netbeans, ubuntu-8.10

为什么在带有 Sun JDK 6 的 Ubuntu 8.10 上使用 Netbeans 6.5 时我的 Swing 应用程序没有关闭。甚至从 Netbeans 网站下载的 Netbeans 教程也是如此。当我关闭应用程序时，我留下了一个死窗。然后我必须手动终止该进程。它来来去去，但我无法弄清楚是什么触发了这种行为。

我还使用 openjdk (6b12-0ubuntu6.1) 和 sun-java (6-10-0ubuntu2) 从命令行终端运行我的应用程序，但仍然没有运气。我注意到在尝试关闭它后通过 netbeans 运行它时，netbeans 仍然显示应用程序正在运行，并且在手动终止进程后，我的 netbeans 日志打印“Java 结果：137”  

更新 - 3 月 4 日：我还尝试升级到 Sun JDK 6u12 和 Netbeans 6.7m2。但仍然没有运气。

更新 - 3 月 4 日：好的，经过进一步测试，我发现这种行为在我将 JPA 添加到我的应用程序后立即开始。这就解释了为什么 netbeans 网站上的 JPA 教程示例也这样做。我曾尝试编写一个 ExitListener 来首先关闭 EntityManager 但还没有运气。如果我从表单面板中删除 EntityManager、Query 和 List，应用程序将再次正确关闭。

            回答 #1

赞同：1

时间：2009-02-25T16:13:32.280

确保调用 setDefaultCLoseOperation(JFrame.EXIT_ON_CLOSE);

            回答 #2

赞同：0

时间：2009-02-25T17:24:12.033

您使用的是 Java 6 的哪个次要版本？我认为我正在更新 10，并且在 Ubuntu 8.10 上遇到了很多问题，升级到 .12 帮助很大。

            回答 #3

赞同：0

时间：2009-05-04T08:03:30.067

这是由使用“系统默认值”或“GTKLookAndFeel”外观引起的。我切换到“NimbusLookAndFeel”，问题就消失了。

我已经尝试了所有建议，包括 Netbeans 6.7 和 Java 6.12。

尚不清楚为什么会在 Ubuntu 8.10 上发生这种情况。

        external - 以下声明/关键字背后的解释是什么？

ID：586159

赞同：0

时间：2009-02-25T14:20:42.880

标签：external, linkage

我想知道以下声明的作用。我在 MSVisual Studio 编译代码上的 C 代码中看到了它们。

extern "C" __declspec(dllexport)

extern "C" __declspec(dllimport)

我知道它们用于声明函数的外部链接（函数在不同的源文件中定义。但想详细了解它是如何工作的。

-阿吉特

            回答 #1

赞同：3

时间：2009-02-25T15:03:12.263

该`extern "C"`部分告诉 C++ 编译器，被声明的项目应该使用 C 链接，这意味着名称不会被破坏（或将以与 C 编译器相同的方式被破坏）。这使得它可以从 C 代码和大多数其他语言链接到该项目，因为 C 链接通常是平台上使用的标准。

和项是非标准属性，它告诉编译器该项应该从 DLL 导出（或导入）`__declspec(dllexport)`。MS 编译器和可能针对 Windows 的其他编译器支持`__declspec(dllimport)`该属性。`__declspec()`我不确定GCC是否这样做。可以使用`__declspec()`（至少在 MSVC 中）指定的其他存储类属性包括`uuid()`、`naked`和`deprecated`其他为编译器提供有关如何编译对象或函数的信息的属性。

            回答 #2

赞同：1

时间：2009-02-25T14:25:53.663

dllexport 告诉编译器生成一个[.lib 文件](http://en.wikipedia.org/wiki/Dynamic_link_library#Import_libraries)。dllimport 告诉编译器在 .lib 文件中查找函数声明（其定义将在 dll 中）。

            回答 #3

赞同：1

时间：2009-02-25T14:26:19.387

这意味着它后面的函数/类在 DLL 边界上是可见和可访问的，因此您可以链接它们并从其他代码调用它们

        javascript - 无法在 extJS 窗口上设置高度

ID：586161

赞同：1

时间：2009-02-25T14:21:41.753

标签：javascript, extjs

无论我使用什么高度参数，我的窗口都会保持大约 250 像素的稳定高度。当我通过 600 来显示时，console.log 语句输出 600，例如`getIFrameWindow().show({height: 600})`，所以我知道我的高度参数正在被正确传递和接收，但是我的窗口没有以正确的高度呈现。

```
getIframeWindow : function () {
    return {
        show :function(args) {
            args=args||{};
            win = new Ext.Window({ 
                width    :args.width||200,
                height   :args.height||200,
                items    :[{
                    border      : false,
                    xtype       : 'iframepanel',
                    defaultSrc  : args.src||'_blank.htm'
                }]
            });
            console.log(win.height);
            win.show();
        }, 
```

            回答 #1

赞同：1

时间：2009-02-27T09:52:02.760

试试这个 ：

```
 width    :args.width * 1.0 ||200,
            height   :args.height * 1.0 ||200, 
```

args.width 和 args.height 将变成数字

        ruby - 使用 www::mechanize 时的 Iconv::IllegalSequence

ID：586163

赞同：2

时间：2009-02-25T14:22:24.437

标签：ruby, screen-scraping, iconv, mechanize-ruby

我正在尝试做一些网络抓取，但 WWW:Mechanize gem 似乎不喜欢编码和崩溃。

发布请求导致 302 重定向（随后是机械化，到目前为止一切都很好），结果页面似乎崩溃了。我用谷歌搜索了很多，但到目前为止还没有出现如何解决这个问题。大家有什么想法吗？

**代码：**

```
require 'rubygems'
require 'mechanize'

agent = WWW::Mechanize.new

agent.user_agent_alias = 'Mac Safari'
answer = agent.post('https://www.budget.de/de/reservierung/privatkunden/step1/schnellbuchung',
{"Country" => "Deutschland",
"Abholstation" => "Aalen",
"Abgabestation" => "Aalen",
"Abholdatum" => "26.02.2009",
"Abholzeit_stunde" => "13",
"Abholzeit_minute" => "30",
"Abgabedatum" => "28.02.2009",
"Abgabezeit_stunde" => "13",
"Abgabezeit_minute" => "30",
"CountryID" => "DE",
"AbholstationID"=>"AA1",
"AbgabestationID"=>"AA1"
}
)
puts answer.body 
```

**错误：**

```
D:/Ruby/lib/ruby/gems/1.8/gems/mechanize-0.9.1/lib/www/mechanize/util.rb:29:in `iconv': "\204nderungen vorbe"... (Iconv::IllegalSequence)
from D:/Ruby/lib/ruby/gems/1.8/gems/mechanize-0.9.1/lib/www/mechanize/util.rb:29:in `to_native_charset'
from D:/Ruby/lib/ruby/gems/1.8/gems/mechanize-0.9.1/lib/www/mechanize/chain/response_header_handler.rb:29:in `handle'
from D:/Ruby/lib/ruby/gems/1.8/gems/mechanize-0.9.1/lib/www/mechanize/chain.rb:30:in `pass'
from D:/Ruby/lib/ruby/gems/1.8/gems/mechanize-0.9.1/lib/www/mechanize/chain/handler.rb:6:in `handle'
from D:/Ruby/lib/ruby/gems/1.8/gems/mechanize-0.9.1/lib/www/mechanize/chain/response_body_parser.rb:35:in `handle'
from D:/Ruby/lib/ruby/gems/1.8/gems/mechanize-0.9.1/lib/www/mechanize/chain.rb:30:in `pass'
from D:/Ruby/lib/ruby/gems/1.8/gems/mechanize-0.9.1/lib/www/mechanize/chain/handler.rb:6:in `handle'
from D:/Ruby/lib/ruby/gems/1.8/gems/mechanize-0.9.1/lib/www/mechanize/chain/pre_connect_hook.rb:14:in `handle'
from D:/Ruby/lib/ruby/gems/1.8/gems/mechanize-0.9.1/lib/www/mechanize/chain.rb:25:in `handle'
from D:/Ruby/lib/ruby/gems/1.8/gems/mechanize-0.9.1/lib/www/mechanize.rb:494:in `fetch_page'
from D:/Ruby/lib/ruby/gems/1.8/gems/mechanize-0.9.1/lib/www/mechanize.rb:545:in `fetch_page'
from D:/Ruby/lib/ruby/gems/1.8/gems/mechanize-0.9.1/lib/www/mechanize.rb:403:in `post_form'
from D:/Ruby/lib/ruby/gems/1.8/gems/mechanize-0.9.1/lib/www/mechanize.rb:322:in `post'
from test.rb:7 
```

            回答 #1

赞同：3

时间：2009-02-25T15:12:55.517

该页面肯定是 UTF-8，但是 Mechanize 使用 NKF（一个核心 Ruby 库）来猜测编码，并且由于某种原因它作为 Shift JIS 出现。解决此问题的最快方法是覆盖 Mechanize 的编码映射，这样当它尝试使用 Iconv 将正文转换为 UTF-8 时，它也会将源编码作为 UTF-8 传递。你可以这样做：

```
WWW::Mechanize::Util::CODE_DIC[:SJIS] = "UTF-8" 
```

`require`将其放置在 Mechanize 库所在的行之后。您可能希望在找到问题的根本原因并在必要时提交补丁后立即重新设置该值，甚至更好。

注意：我解决这个问题的方法是使用回溯调试 Mechanize 库。问题所在的`to_native_charset`方法调用。`detect_charset`

            回答 #2

赞同：0

时间：2013-02-04T15:42:45.453

在我的情况下， a`Mechanize::File`是由根本不使用编码的 get 方法返回的。

我可以通过手动转换来修复它`Iconv`，但这只有在你已经知道编码的情况下才有效。

```
result = @agent.get uri
# Mechanize::File instead of Mechanize::Page is returned 
# so we have to convert manually
result = Iconv.conv("utf-8", "iso-8859-1", result.body) 
```

        .net - .NET：点击后退按钮会弄乱我的事件处理程序

ID：586170

赞同：0

时间：2009-02-25T14:25:20.967

标签：.net, asp.net, event-handling, request

大家好。我有一个列出一堆用户帐户的 ASP.NET 页面。

如果我单击一个用户，则会触发一个名为 LinkChosen 的事件，该事件会打开该用户的帐户视图页面。

我还可以搜索用户，从而缩小列表范围。此事件称为 btnSearch_click

如果我点击一个用户，LinkChosen() 会被调用，我会被带到一个新页面。如果我点击后退按钮并尝试进行搜索，而不是触发 btnSearch_click()，它仍会触发 LinkChosen() 事件并将我带到我在推回之前查看的帐户。在单击帐户之前进行搜索可以正常工作。

我正在使用 C# 和 ASP.NET，这个错误出现在 IE 中，但不是 Firefox。

有没有人有任何想法？

谢谢。

**澄清编辑：** “显示单个帐户”操作是一个超链接，而不是一个按钮。:)

            回答 #1

赞同：1

时间：2009-02-25T15:04:41.683

搜索时是否按“Enter 键”。如果是这样，页面中的第一个按钮通常是在 Enter 按键上提交的按钮。

您可以在页面或面板上设置 DefaultButton。

因此，如果您需要两个按钮来响应页面各自部分的 Enter 按下，请将它们都包装在自己的 asp:Panel 中并设置 DefaultButton。

            回答 #2

赞同：0

时间：2009-02-25T15:01:04.997

嗯……这听起来太奇怪了，不可能是真的……

如果在代码隐藏中，我会检查事件处理程序是如何连接的（代码前端或代码隐藏），您确定它们是否正确绑定。

您是否尝试过清除浏览器缓存？可能是后退按钮让您回到旧版本的页面？

只是一个想法..您可以使用普通的旧 asp:hyperlink 或 href="" 将您带到显示单个帐户的页面吗？IE 有 ShowAccount.aspx（或任何你叫它的东西）接受一个查询参数，告诉它要显示哪个帐户？（而不是使用 postback/response.redirect）将您带到页面？我发现直接在 URL 上提供资源使整体开发更容易。（尽管这与您的特定错误无关）

            回答 #3

赞同：0

时间：2009-02-25T17:25:08.943

我通常看到的是浏览器在回击后强制你刷新页面。因此，要实际执行任何操作，您需要重新发布页面，从而重新发送点击。您可以使用普通的 asp:hyperlink，而不是 asp:linkbutton。您将保存回发，并完全避免该问题。

        terminology - 什么是健康套房？

ID：586174

赞同：5

时间：2009-02-25T14:26:28.013

标签：terminology, definition

我读了一篇关于 Test Driven Datamigration（[德语，PDF](http://www.zuehlke.com/fileadmin/pdf/fachartikel/132_os_map_test_datenmigration.pdf)）的文章，他们提到了 Sanity Suite。它没有得到很好的解释，也没有定义。

有定义还是海绵词？

            回答 #1

赞同：10

时间：2009-02-25T14:29:43.327

这是一小部分单元测试或集成测试，只是为了检查系统是否正常工作。
当您没有时间使用完整套件时，从较大的自动化测试套件中提取这样的套件以进行快速测试会很有用。
在实践中，健全套件通常是开发的全部，尽管总比没有好。

        extjs - Extjs 历史类和 iframe

ID：586175

赞同：0

时间：2009-02-25T14:27:37.060

标签：extjs, cross-browser, browser-history

以 Extjs 框架中的示例历史示例为例。它在 Safari 中运行良好。现在将以下行添加到 history.html 页面

```
<iframe src='http://google.com'></iframe> 
```

现在在 Mac Safari 中测试相同的示例。它只是行不通。这个问题有什么解决办法吗？

            回答 #1

赞同：0

时间：2009-05-15T20:51:31.067

我有一个类似的问题。出于某种原因，我的后退按钮没有控制隐藏的 iframe。它正在更新 IE 中的主 URL。

        windows - 运行 memcached 的平台

ID：586177

赞同：5

时间：2009-02-25T14:28:05.593

标签：windows, linux, macos, caching, memcached

有什么特别的理由推荐在 Linux 服务器上运行 memcached 吗？在 Windows Server 机器上运行它真的有那么糟糕吗？OS X 服务器盒子怎么样？

我阅读的最大原因是关于 TCO。换句话说，对于我们运行 memcached 的每个 Windows 机器，我们必须购买 Windows Server 的副本，并且这些成本加起来。问题是我们有几台服务器具有较旧的处理器但有很多 RAM - 非常适合 memcached 使用。所有这些机器上都已经安装了 Windows Server 2003，因此安装 Linux 并没有真正节省多少。使用 Linux 还有其他令人信服的理由吗？

            回答 #1

赞同：4

时间：2009-02-25T19:09:34.153

这个问题真的是“Linux作为服务器平台有什么优势”我会给出几个标准答案：

*   更容易远程管理（不需要 RDP 等）一切都可以通过 CLI 编写或完成。
*   像 Ubuntu LTS（长期支持）版本这样的发行版保证多年的安全更新，软件成本为零。可以通过命令行轻松安装更新，通常不需要重新启动。
*   更高的性能。Linux 通常被认为可以在给定的硬件上提供“物超所值”。这通常是由于资源需求较低。
*   降低资源需求。Linux 在 256MB 或更少的 RAM 以及非常小的 CPU 上运行得非常好
*   可用软件和实用程序的广度。
*   免费。（如啤酒）
*   免费。（与自由一样）这意味着您可以查看、更改和归档针对您正在运行的代码的错误，并直接与开发人员交谈。  

请记住，TCO 包括您（管理员）维护机器所花费的时间。Linux 的 TCO 较低，因为它更易于维护，而且您可以将时间花在管理服务器之外的其他事情上……

            回答 #2

赞同：3

时间：2009-02-25T15:21:51.657

几乎所有的常见问题解答和 HOWTO 都是从 Linux 的角度编写的。Memcache 最初是为 Linux 创建的，端口是后来出现的。有到 Windows 的端口，但它还没有在官方的 memcache 发行版中。Windows 上的 Memcache 仍然是*游击队*风格。例如，x64 Windows 没有内存缓存。

从服务器上 MacOS X 上的 memcache 开始：利基的利基。

            回答 #3

赞同：1

时间：2009-02-25T14:57:00.123

在 Windows 中运行它似乎没有任何技术缺点。主要是成本问题。如果许可证只是闲置而未使用，则可能根本没有缺点。我确实记得旧 Windows API 中存在内存泄漏的问题，尤其是 TCP 的东西——但大概这些东西在现代 Windows 中都是固定的。

            回答 #4

赞同：1

时间：2009-02-26T11:03:00.133

如果您正在部署 memcached，您可能拥有相当重要的基础架构（已经部署了很多很多机器）。即使您将新机器专用于 memcached，您也需要在它们上运行一些其他软件来进行系统管理、监控、硬件支持等。您的团队可能会为您的基础架构定制该软件。

因此，您的操作系统平台选择将取决于您的运营团队和硬件供应商将支持在生产中使用的内容。

一些 Windows 许可证的成本可能相当不重要，而且您可能已经批量订阅 - 事实上，订购的服务器可能已经带有 Windows 许可证。

话虽如此，如果您正在运行 memcached，您肯定会想要一个 64 位操作系统 - 使用 32 位操作系统并不聪明，这意味着您的大部分 RAM 都无法使用（您将被限制在 3G 左右，具体取决于在操作系统上）。

我假设如果您正在部署 memcached，那么您将在具有大量 ram 的硬件上执行此操作 - 毕竟，否则这毫无意义。

        c# - 防止 DataGridView 中的双重事件

ID：586179

赞同：1

时间：2009-02-25T14:28:14.297

标签：c#, datagridview

我有一个不知道如何解决的问题。我有一个 DataGridView ( `EditMode = EditProgrammatically`)。这个网格有一个复选框列和一个或多个文本框列。功能如下（或至少应该是）：

*   当您单击复选框时，应切换复选框
*   When a row (or many rows) are selected, and you press space, the checkboxes should be toggled.

我有这两个事件处理程序：

```
private void grid_CellClick(object sender, DataGridViewCellEventArgs e)
{
  if (e.RowIndex >= 0 && e.ColumnIndex == useColumn.Index)
  {
    if (ModifierKeys != Keys.Shift && ModifierKeys != Keys.Control)
    {
      ToggleRows(grid.SelectedRows);
    }
  }
}

private void RowSelectorForm_KeyDown(object sender, KeyEventArgs e)
{
  if (grid.Focused && e.KeyCode == Keys.Space)
  {
    ToggleRows(grid.SelectedRows);
    e.Handled = true;  // Not sure if this is needed or even does anything
    e.SuppressKeyPress = true;  // Or this for that matter...
  }
} 
```

这几乎可以工作。问题是当您按下空格并且复选框单元格处于活动状态时。当文本框单元格处于活动状态时，它会按应有的方式工作。问题是当您按下空格并且复选框单元格处于活动状态时，这两个事件都会被触发。这意味着它首先选择然后取消选择（或相反）。所以复选框最终就像它们一样。我怎样才能防止这种情况？

我曾考虑过使用标志，但不确定我可以把它放在哪里，因为我真的不知道它是双重事件还是只是用户使用空间然后用鼠标单击。所以我认为这不能真正使用。我应该使用不同的事件吗？有没有办法查看单元格是被鼠标点击还是被空格点击？有没有办法在按下空格时禁用自动复选框切换？我能做些什么？

**注意**： RowSelectorForm_KeyDown 而不仅仅是 grid_KeyDown 的原因是我试图使用 KeyPreview ，然后如果它是空格并且网格被聚焦，则抑制按键。但是那个 SuppressKeyPress 似乎根本没有做任何事情=/也许我只是误解了它......

            回答 #1

赞同：0

时间：2009-06-13T14:23:26.920

I used the following and it seemed to work well:

```
private Keys _ClickSource = 0;

private void dgv_CellClick(object sender, System.Windows.Forms.DataGridViewCellEventArgs e)
{
    if (_ClickSource == 0 || _ClickSource != Keys.Space)
    {
        dgv.Rows[e.RowIndex].Cells[e.ColumnIndex].Value = ! (System.Convert.ToBoolean(dgv.Rows[e.RowIndex].Cells[e.ColumnIndex].Value));
    }

    _ClickSource = null;
}

private void dgv_KeyDown(object sender, System.Windows.Forms.KeyEventArgs e)
{
    _ClickSource = e.KeyCode;
} 
```

            回答 #2

赞同：0

时间：2009-02-27T14:30:36.630

好吧，我不想这样做，但我现在已经用计时器修复了它......但如果有人知道如何正确地做到这一点，请告诉我！

当前解决方案：

```
private DateTime lastClick = DateTime.MinValue; 
```

在这两种情况下：

```
if (DateTime.Now - lastClick > TimeSpan.FromMilliseconds(400))
{
  lastClick = DateTime.Now;
  ToggleRows(grid.SelectedRows);
} 
```

            回答 #3

赞同：0

时间：2009-02-27T14:43:06.973

自从我使用 C# 以来已经有一段时间了，但我假设您可以在 RowSelectorForm_KeyDown 中调用 ToggleGrid 之前断开 grid_CellClick 事件处理程序。

调用后，您可以重新连接事件处理程序。

此外，可能有一些方法可以从一开始就阻止事件被触发。在某些 API 中，专门提供了某些不会触发任何事件的方法。

            回答 #4

赞同：0

时间：2009-03-28T15:44:52.683

令人沮丧的问题是：

1.  .Handled 不会阻止复选框更改
2.  .SuppressKeyPress 不会阻止复选框更改
3.  如果您双击复选框，第一次单击会触发 Click() 事件（切换复选框），第二次单击会触发 DoubleClick() 事件（再次切换复选框）。

但是，KeyDown 事件在任何网格事件之前触发。也许设置一个标志来指示空格键被按下，或者如果该行已经被选中，重置复选框的值。

        linux - 从命令行发现 linux 磁盘配置

ID：586180

赞同：1

时间：2009-02-25T14:28:29.960

标签：linux, command-line, hard-drive

如何发现远程计算机是否配置了硬件或软件 RAID？我所知道的是我目前有 256GB，我需要订购更多空间，但在此之前我需要知道驱动器是如何配置的。

*df*将驱动器列为：  

```
/dev/sdb1 287826944 273086548 119644 100% /mnt/db
```

和*hdparm*：

```
/dev/sdb：  
  HDIO_GET_MULTCOUNT 失败：参数无效  
  只读 = 0（关闭）  
  预读 = 256（开）  
  几何 = 36404/255/63，扇区 = 299439751168，开始 = 0  
```

我还应该跑什么，我应该寻找什么？

            回答 #1

赞同：2

时间：2009-02-25T14:37:48.953

软件 RAID 不会是 /dev/sdb - dev/md0。也不是 LVM。

所以它要么是真正的硬件 RAID，要么是原始磁盘。

`lspci`可能会显示您和 RAID 控制器已插入。

`dmesg | grep sdb`可能会告诉您有关磁盘的更多信息。

`sdparm /dev/sdb`可能会告诉你一些事情？特别是如果它真的是一个 SCSI 磁盘。

            回答 #2

赞同：2

时间：2009-02-25T15:05:12.523

要检查软件 RAID：

```
cat /proc/mdstat 
```

在我的盒子上，这显示：

```
    个性：[raid1]
    md0 : 活动 raid1 sda1[0] sdb1[1]
          96256 块 [2/2] [UU]

    md1 : 活动 raid1 sda2[0] sdb2[1]
          488287552 块 [2/2] [UU]

    未使用的设备：<无>

```

您可以获得所有软件 RAID 阵列的名称、每个 RAID 级别、属于每个 RAID 阵列的分区以及阵列的状态。

            回答 #3

赞同：0

时间：2009-02-25T14:43:35.943

dmesg 可能会有所帮助。

在我们确实有软件突袭的系统上，我们会看到如下内容：

SCSI 设备 sda：143374744 个 512 字节 hdwr 扇区 (73408 MB)

sda：写保护关闭

sda：模式感知：ab 00 10 08

SCSI设备sda：写缓存：启用，读缓存：启用，支持DPO和FUA

SCSI 设备 sda：143374744 个 512 字节 hdwr 扇区 (73408 MB)

sda：写保护关闭

sda：模式感知：ab 00 10 08

SCSI设备sda：写缓存：启用，读缓存：启用，支持DPO和FUA

sda: sda1 sda2

sd 0:0:0:0: 附加的 scsi 磁盘 sda

SCSI 设备 sdb：143374744 个 512 字节 hdwr 扇区 (73408 MB)

sdb：写保护关闭

sdb：模式感知：ab 00 10 08

SCSI设备sdb：写缓存：启用，读缓存：启用，支持DPO和FUA

SCSI 设备 sdb：143374744 个 512 字节 hdwr 扇区 (73408 MB)

sdb：写保护关闭

sdb：模式感知：ab 00 10 08

SCSI设备sdb：写缓存：启用，读缓存：启用，支持DPO和FUA

sdb：sdb1 sdb2

sd 0:0:1:0: 附加的 scsi 磁盘 sdb

稍后我们会看到：

md：md0 停止。

md：绑定

md：绑定

md：raid0 人格注册为 0 级

md0：将 max_sectors 设置为 512，段边界设置为 131071

raid0：查看 sda2

raid0：比较 sda2(63296000) 和 sda2(63296000)

突袭0：结束

raid0: ==> 唯一

raid0：1 个区域

raid0：查看 sdb2

raid0：比较 sdb2(63296000) 和 sda2(63296000)

raid0：等于

raid0：最终 1 个区域

raid0：完成。

raid0：md_size 为 126592000 个块。

raid0 : conf->hash_spacing 是 126592000 块。

raid0：nb_zone 为 1。

raid0 : 为散列分配 4 个字节。

一个 df 显示：

Filesystem Size Used Avail Use% Mounted on /dev/sda1 7.8G 3.3G 4.2G 45% /

tmpfs 2.0G 0 2.0G 0% /dev/shm

/dev/md0 117G 77G 35G 69% /scratch

因此，部分 sda 和所有 sdb 已绑定为一个 raid 卷。

您拥有的可能是一个磁盘，也可能是硬件突袭。dmesg 应该会给你一些线索。

它总是有可能是一个看起来像单个 sata（或 scsi）驱动器的硬件 raid 控制器。也就是说，我们的系统带有光纤通道RAID阵列，Linux只能看到一个设备，您可以通过直接连接到光纤RAID阵列来控制RAID部分和磁盘分配。

            回答 #4

赞同：0

时间：2009-02-25T14:51:32.307

您可以尝试`mount -v`，也可以查看`/sys/`或`/dev/`寻找提示。`dmesg`可能会显示有关使用的驱动程序的信息，并且`lspci`可能会列出任何附加的硬件 RAID 卡，但通常没有通用的方法可以用来找出确切的硬件和驱动程序设置。

            回答 #5

赞同：0

时间：2009-02-25T15:06:58.370

您可以尝试使用[mdadm并](http://en.wikipedia.org/wiki/Mdadm)[在此处](http://gd.tuwien.ac.at/linuxcommand.org/man_pages/mdadm8.html)进行更多说明。如果“mount”命令没有显示 /dev/md*，很可能您没有使用（或查看）软件 raid。

这实际上是一个系统管理，而不是与编程相关的问题，我会这样标记它。

        javascript - 如何将项目插入到特定索引处的数组中（JavaScript）

ID：586182

赞同：3705

时间：2009-02-25T14:29:30.877

标签：javascript, jquery, arrays

我正在寻找一种 JavaScript 数组插入方法，其样式为：

```
arr.insert(index, item) 
```

最好在 jQuery 中，但此时任何 JavaScript 实现都可以。

            回答 #1

赞同：5992

时间：2009-02-25T14:32:56.157

您想要本**[`splice`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice)**机数组对象上的函数。
`arr.splice(index, 0, item);`将插入`item`到`arr`指定的位置`index`（先删除`0`项目，也就是说，它只是一个插入）。
在此示例中，我们将创建一个数组并将一个元素添加到索引 2 中：

```
var arr = [];
arr[0] = "Jani";
arr[1] = "Hege";
arr[2] = "Stale";
arr[3] = "Kai Jim";
arr[4] = "Borge";

console.log(arr.join()); // Jani,Hege,Stale,Kai Jim,Borge
arr.splice(2, 0, "Lene");
console.log(arr.join()); // Jani,Hege,Lene,Stale,Kai Jim,Borge
```

            回答 #2

赞同：361

时间：2012-10-03T14:26:54.020

您可以`Array.insert`通过执行以下操作来实现该方法：

```
Array.prototype.insert = function ( index, item ) {
    this.splice( index, 0, item );
}; 
```

然后你可以像这样使用它：

```
var arr = [ 'A', 'B', 'D', 'E' ];
arr.insert(2, 'C');

// => arr == [ 'A', 'B', 'C', 'D', 'E' ] 
```

            回答 #3

赞同：217

时间：2016-07-04T09:18:02.510

除了拼接之外，您可以使用这种不会改变原始数组的方法，但它会创建一个包含添加项的新数组。您通常应该尽可能避免突变。我在这里使用[ES6](https://en.wikipedia.org/wiki/ECMAScript#6th_Edition_%E2%80%93_ECMAScript_2015)扩展运算符。

```
const items = [1, 2, 3, 4, 5]

const insert = (arr, index, newItem) => [
  // part of the array before the specified index
  ...arr.slice(0, index),
  // inserted item
  newItem,
  // part of the array after the specified index
  ...arr.slice(index)
]

const result = insert(items, 1, 10)

console.log(result)
// [1, 10, 2, 3, 4, 5]
```

这可用于通过稍微调整函数以将 rest 运算符用于新项目来添加多个项目，并将其传播到返回的结果中：

```
const items = [1, 2, 3, 4, 5]

const insert = (arr, index, ...newItems) => [
  // part of the array before the specified index
  ...arr.slice(0, index),
  // inserted items
  ...newItems,
  // part of the array after the specified index
  ...arr.slice(index)
]

const result = insert(items, 1, 10, 20)

console.log(result)
// [1, 10, 20, 2, 3, 4, 5]
```

            回答 #4

赞同：85

时间：2013-03-25T17:45:30.980

自定义数组`insert`方法

*1.具有多个参数和链接支持*

```
/* Syntax:
   array.insert(index, value1, value2, ..., valueN) */

Array.prototype.insert = function(index) {
    this.splice.apply(this, [index, 0].concat(
        Array.prototype.slice.call(arguments, 1)));
    return this;
}; 
```

它可以插入多个元素（与本机[`splice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)一样）并支持链接：

```
["a", "b", "c", "d"].insert(2, "X", "Y", "Z").slice(1, 6);
// ["b", "X", "Y", "Z", "c"] 
```

*2.具有数组类型参数合并和链接支持*

```
/* Syntax:
   array.insert(index, value1, value2, ..., valueN) */

Array.prototype.insert = function(index) {
    index = Math.min(index, this.length);
    arguments.length > 1
        && this.splice.apply(this, [index, 0].concat([].pop.call(arguments)))
        && this.insert.apply(this, arguments);
    return this;
}; 
```

它可以将参数中的数组与给定数组合并，还支持链接：

```
["a", "b", "c", "d"].insert(2, "V", ["W", "X", "Y"], "Z").join("-");
// "a-b-V-W-X-Y-Z-c-d" 
```

**演示：http: ** [//jsfiddle.net/UPphH/](http://jsfiddle.net/UPphH/)

            回答 #5

赞同：52

时间：2012-08-30T04:37:13.890

如果您想一次将多个元素插入一个数组，请查看这个 Stack Overflow 答案：[A better way to splice an array into an array in javascript](https://stackoverflow.com/questions/1348178/a-better-way-to-splice-an-arrray-into-an-array-in-javascript)
这里还有一些函数来说明这两个例子：

```
function insertAt(array, index) {
    var arrayToInsert = Array.prototype.splice.apply(arguments, [2]);
    return insertArrayAt(array, index, arrayToInsert);
}

function insertArrayAt(array, index, arrayToInsert) {
    Array.prototype.splice.apply(array, [index, 0].concat(arrayToInsert));
    return array;
} 
```

最后这里是一个 jsFiddle，所以你可以自己看看：http: [//jsfiddle.net/luisperezphd/Wc8aS/](http://jsfiddle.net/luisperezphd/Wc8aS/)
这就是您使用这些功能的方式：

```
// if you want to insert specific values whether constants or variables:
insertAt(arr, 1, "x", "y", "z");

// OR if you have an array:
var arrToInsert = ["x", "y", "z"];
insertArrayAt(arr, 1, arrToInsert); 
```

            回答 #6

赞同：35

时间：2016-05-13T23:22:14.467

为了正确的函数式编程和链接的目的，一个发明`Array.prototype.insert()`是必不可少的。实际上，`splice`如果它返回的是变异数组而不是一个完全没有意义的空数组，它可能是完美的。所以这里是：

```
Array.prototype.insert = function(i,...rest){
  this.splice(i,0,...rest)
  return this
}

var a = [3,4,8,9];
document.write("<pre>" + JSON.stringify(a.insert(2,5,6,7)) + "</pre>");
```

好吧，好吧，上面的那个`Array.prototype.splice()`改变了原始数组，有些人可能会抱怨“你不应该修改不属于你的东西”，这也可能是正确的。所以为了公益，我想再给一个`Array.prototype.insert()`不变异原数组的。来了；

```
Array.prototype.insert = function(i,...rest){
  return this.slice(0,i).concat(rest,this.slice(i));
}

var a = [3,4,8,9],
    b = a.insert(2,5,6,7);
console.log(JSON.stringify(a));
console.log(JSON.stringify(b));
```

            回答 #7

赞同：31

时间：2017-12-25T13:04:02.557

在这种情况下，我建议使用纯**JavaScript 。**JavaScript 中也没有任何插入方法，但我们有一个方法是**内置的 Array**方法，它可以为您完成这项工作。这叫**拼接**...
让我们看看什么是**splice()** ...

splice() 方法通过删除现有元素和/或添加新元素来更改数组的内容。

好的，假设我们在下面有这个数组：

```
const arr = [1, 2, 3, 4, 5]; 
```

我们可以这样删除`3`：

```
arr.splice(arr.indexOf(3), 1); 
```

它将返回 3，但如果我们现在检查 arr，我们有：

```
[1, 2, 4, 5] 
```

到目前为止，一切都很好，但是我们如何使用拼接将新元素添加到数组中？
让我们把3放回arr中......

```
arr.splice(2, 0, 3); 
```

让我们看看我们做了什么...
我们再次使用**splice**，但是这次对于第二个参数，我们传递**0**，这意味着我们不想删除任何项目，但同时，我们添加了第三个参数，即 3 将添加到第二个索引处...
您应该知道我们可以同时**删除**和**添加**。例如，现在我们可以这样做：

```
arr.splice(2, 2, 3); 
```

这将删除索引 2 处的**两个项目**。然后在索引 2 处添加**3**，结果将是：

```
[1, 2, 3, 5]; 
```

这显示了*拼接*中的每个项目是如何工作的：

array.splice(开始, deleteCount, item1, item2, item3 ...)

            回答 #8

赞同：30

时间：2020-04-24T11:07:48.797

解决方案与性能
今天（2020.04.24）我为大小阵列选择的解决方案进行测试。我在 Chrome 81.0、Safari 13.1 和 Firefox 75.0上的[macOS v10.13.6 (High Sierra) 上对它们进行了测试。](https://en.wikipedia.org/wiki/MacOS_High_Sierra)
结论
适用于所有浏览器

*   令人惊讶的是，对于小型阵列，基于`slice`和`reduce`(D,E,F) 的非就地解决方案通常比就地解决方案快 10 倍至 100 倍
*   对于大型阵列，基于（AI、BI 和 CI）的就地解决方案`splice`最快（有时约为 100 倍 - 但取决于阵列大小）
*   对于小型阵列，BI 解决方案最慢
*   对于大阵列，E 解决方案最慢

[![在此处输入图像描述](https://i.stack.imgur.com/gZjhH.png)](https://i.stack.imgur.com/gZjhH.png)
细节
测试分为两组：就地解决方案（AI、BI 和 CI）和非就地解决方案（D、E 和 F），并针对两种情况进行：

*   测试一个有 10 个元素的数组 - 你可以在[这里运行它](https://jsbench.me/bhk9e06ktc/1)
*   测试一个包含 1,000,000 个元素的数组 - 你可以在[这里运行它](https://jsbench.me/20k9e0au9q/1)

测试代码显示在以下代码段中：
[jsfiddle](https://jsfiddle.net/Lamik/b14wkntp/)

```
function AI(arr, i, el) {
  arr.splice(i, 0, el);
  return arr;
}

function BI(arr, i, el) {
  Array.prototype.splice.apply(arr, [i, 0, el]);
  return arr;
}

function CI(arr, i, el) {
  Array.prototype.splice.call(arr, i, 0, el);
  return arr;
}

function D(arr, i, el) {
  return arr.slice(0, i).concat(el, arr.slice(i));
}

function E(arr, i, el) {
  return [...arr.slice(0, i), el, ...arr.slice(i)]
}

function F(arr, i, el) {
  return arr.reduce((s, a, j)=> (j-i ? s.push(a) : s.push(el, a), s), []);
}

// -------------
// TEST
// -------------

let arr = ["a", "b", "c", "d", "e", "f"];

let log = (n, f) => {
  let a = f([...arr], 3, "NEW");
  console.log(`${n}: [${a}]`);
};

log('AI', AI);
log('BI', BI);
log('CI', CI);
log('D', D);
log('E', E);
log('F', F);
```

```
This snippet only presents tested code (it not perform tests)
```

Google Chrome 上的小数组的示例结果如下：
[![在此处输入图像描述](https://i.stack.imgur.com/cS1YZ.png)](https://i.stack.imgur.com/cS1YZ.png)

            回答 #9

赞同：20

时间：2018-06-28T19:13:24.400

**在特定索引处附加单个元素**

```
// Append at a specific position (here at index 1)
arrName.splice(1, 0,'newName1');
// 1: index number, 0: number of element to remove, newName1: new element

// Append at a specific position (here at index 3)
arrName[3] = 'newName1'; 
```

**在特定索引处附加多个元素**

```
// Append from index number 1
arrName.splice(1, 0, 'newElemenet1', 'newElemenet2', 'newElemenet3');
// 1: index number from where append start,
// 0: number of element to remove,
//newElemenet1,2,3: new elements 
```

            回答 #10

赞同：20

时间：2019-08-28T09:28:22.587

**这里有两种方法：**

```
const array = [ 'My', 'name', 'Hamza' ];

array.splice(2, 0, 'is');

console.log("Method 1: ", array.join(" "));
```

**或者**

```
Array.prototype.insert = function ( index, item ) {
    this.splice( index, 0, item );
};

const array = [ 'My', 'name', 'Hamza' ];
array.insert(2, 'is');

console.log("Method 2 : ", array.join(" "));
```

            回答 #11

赞同：15

时间：2019-12-23T19:37:29.963

[`Array#splice()`](https://masteringjs.io/tutorials/fundamentals/array-splice)是要走的路，除非你真的想避免改变数组。给定 2 个数组`arr1`和，以下是在第一个元素之后`arr2`插入 的内容的方法：`arr2``arr1`

```
const arr1 = ['a', 'd', 'e'];
const arr2 = ['b', 'c'];

arr1.splice(1, 0, ...arr2); // arr1 now contains ['a', 'b', 'c', 'd', 'e']

console.log(arr1)
```

如果您担心数组的变异（例如，如果使用 Immutable.js），您可以改用，不要与.[`slice()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice)混淆。`splice()``'p'`

```
const arr3 = [...arr1.slice(0, 1), ...arr2, ...arr1.slice(1)]; 
```

            回答 #12

赞同：13

时间：2017-04-05T17:06:58.027

另一种可能的解决方案，使用`Array.reduce`.

```
const arr = ["apple", "orange", "raspberry"];
const arr2 = [1, 2, 4];

const insert = (arr, item, index) =>
  arr.reduce(function(s, a, i) {
    i === index ? s.push(item, a) : s.push(a);
    return s;
  }, []);

console.log(insert(arr, "banana", 1));
console.log(insert(arr2, 3, 2))
```

            回答 #13

赞同：10

时间：2021-12-18T17:11:14.977

使用`Array.prototype.splice()`是实现此要求的简单方法

```
const numbers = ['one', 'two', 'four', 'five']
numbers.splice(2, 0, 'three');

console.log(numbers)
```

阅读更多关于`Array.prototype.splice()` [这里](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice)

            回答 #14

赞同：9

时间：2015-12-04T18:36:05.293

即使已经回答了这个问题，我还是添加了这个注释作为替代方法。
我想将**已知数量**的项目放入一个数组中的特定位置，因为它们来自一个“关联数组”（即一个对象），根据定义，它不能保证按排序顺序。我希望得到的数组是一个对象数组，但对象在数组中的顺序是特定的，因为数组保证了它们的顺序。所以我做了这个。
首先是源对象，一个从 PostgreSQL 检索的[JSONB](https://stackoverflow.com/questions/22654170/explanation-of-jsonb-introduced-by-postgresql)字符串。我想让它按每个子对象中的“顺序”属性排序。

```
var jsonb_str = '{"one": {"abbr": "", "order": 3}, "two": {"abbr": "", "order": 4}, "three": {"abbr": "", "order": 5}, "initialize": {"abbr": "init", "order": 1}, "start": {"abbr": "", "order": 2}}';

var jsonb_obj = JSON.parse(jsonb_str); 
```

由于对象中的节点数是已知的，我首先创建一个指定长度的数组：

```
var obj_length = Object.keys(jsonb_obj).length;
var sorted_array = new Array(obj_length); 
```

然后迭代对象，将新创建的临时对象放入数组中所需的位置，而不会真正发生任何“排序”。

```
for (var key of Object.keys(jsonb_obj)) {
  var tobj = {};
  tobj[key] = jsonb_obj[key].abbr;

  var position = jsonb_obj[key].order - 1;
  sorted_array[position] = tobj;
}

console.dir(sorted_array); 
```

            回答 #15

赞同：8

时间：2020-09-12T06:37:33.920

不可变插入
[`splice`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice)如果您需要就地插入数组，使用该方法肯定是最好的答案。
但是，如果您正在寻找一个不可变函数，它返回一个新的更新数组，而不是在插入时改变原始数组，您可以使用以下函数。

```
function insert(array, index) {
  const items = Array.prototype.slice.call(arguments, 2);

  return [].concat(array.slice(0, index), items, array.slice(index));
}

const list = ['one', 'two', 'three'];

const list1 = insert(list, 0, 'zero'); // Insert single item
const list2 = insert(list, 3, 'four', 'five', 'six'); // Insert multiple

console.log('Original list: ', list);
console.log('Inserted list1: ', list1);
console.log('Inserted list2: ', list2);
```

**注意：**这是[ES6](https://en.wikipedia.org/wiki/ECMAScript#6th_Edition_%E2%80%93_ECMAScript_2015)之前的方式，因此它适用于较旧和较新的浏览器。
如果您使用的是 ES6，那么您也可以尝试使用[其他参数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters)；看到[这个答案](https://stackoverflow.com/questions/586182/how-to-insert-an-item-into-an-array-at-a-specific-index-javascript/586189#answer-38181008)。

            回答 #16

赞同：7

时间：2018-12-06T04:26:43.127

任何对此仍有疑问并尝试过先前答案中的所有选项但从未得到过的人。我正在分享我的解决方案，这是考虑到您不想明确声明对象与数组的属性。

```
function isIdentical(left, right){
    return JSON.stringify(left) === JSON.stringify(right);
}

function contains(array, obj){
    let count = 0;
    array.map((cur) => {
        if(this.isIdentical(cur, obj)) 
            count++;
    });
    return count > 0;
} 
```

这是迭代引用数组并将其与您要检查的对象进行比较，将它们都转换为字符串，然后在匹配时进行迭代的组合。然后你就可以数数了。这可以改进，但这是我解决的地方。

            回答 #17

赞同：7

时间：2019-01-12T17:04:37.690

*取reduce*方法的利润如下：

```
function insert(arr, val, index) {
    return index >= arr.length
        ? arr.concat(val)
        : arr.reduce((prev, x, i) => prev.concat(i === index ? [val, x] : x), []);
} 
```

因此，通过这种方式，我们可以返回一个新数组（将是一种很酷的功能方式 - 比使用*push*或*splice*更好），其中元素插入在索引处，如果索引大于数组的长度，它将被插入在末尾。

            回答 #18

赞同：6

时间：2017-03-08T06:35:23.607

我试过了，它工作正常！

```
var initialArr = ["India","China","Japan","USA"];
initialArr.splice(index, 0, item); 
```

索引是您要插入或删除元素的位置。
0，即第二个参数，定义要从索引中移除的元素个数。
`item`包含要在数组中创建的新条目。它可以是一个或多个。

```
initialArr.splice(2, 0, "Nigeria");
initialArr.splice(2, 0, "Australia","UK"); 
```

            回答 #19

赞同：5

时间：2019-02-16T22:48:43.283

这是我在我的一个应用程序中使用的一个工作函数。
这将检查项目是否存在：

```
let ifExist = (item, strings = [ '' ], position = 0) => {
     // Output into an array with an empty string. Important just in case their isn't any item.
    let output = [ '' ];
    // Check to see if the item that will be positioned exist.
    if (item) {
        // Output should be equal to an array of strings.
        output = strings;
       // Use splice() in order to break the array.
       // Use positional parameters to state where to put the item
       // and 0 is to not replace an index. Item is the actual item we are placing at the prescribed position.
        output.splice(position, 0, item);
    }
    // Empty string is so we do not concatenate with comma or anything else.
    return output.join("");
}; 
```

然后我称之为下面。

```
ifExist("friends", [ ' ( ', ' )' ], 1)}  // Output: ( friends )
ifExist("friends", [ ' - '], 1)}  // Output:  - friends
ifExist("friends", [ ':'], 0)}  // Output:   friends: 
```

            回答 #20

赞同：5

时间：2019-07-18T17:38:06.770

我不得不同意 Redu 的回答，因为 splice() 肯定有一些令人困惑的界面。cdbajorin 给出的响应“它只在第二个参数为 0 时返回一个空数组。如果它大于 0，它返回从数组中删除的项目”，虽然准确，但证明了这一点。
该功能的目的是拼接，或者如 Jakob Keller 之前所说，“加入或连接，也可以改变。
您现在正在更改一个已建立的数组，这将涉及添加或删除元素......”鉴于此，被删除的元素（如果有的话）的返回值充其量是尴尬的。我 100% 同意这一点方法可能更适合链接，如果它返回了看起来很自然的东西，一个添加了拼接元素的新数组。然后你可以做类似 ["19", "17"].splice(1,0,"18" ).join("...") 或任何你喜欢的返回数组。
它返回已删除的内容的事实只是恕我直言。如果该方法的目的是“切出一组元素”并且这是它的唯一意图，也许。似乎如果我不知道我已经剪掉了什么，我可能没有理由剪掉这些元素，不是吗？
如果它的行为类似于 concat()、map()、reduce()、slice() 等，其中一个新数组是由现有数组创建的，而不是对现有数组进行变异，那会更好。这些都是可链接的，这*是*一个重要问题。链式数组操作相当普遍。
似乎语言需要朝着一个或另一个方向发展，并尽可能地坚持下去。JavaScript 是函数式的且声明性较少，这似乎是对规范的奇怪偏离。

            回答 #21

赞同：5

时间：2020-10-08T22:26:39.107

我喜欢一点安全，我用这个：

```
 Array.prototype.Insert = function (item, before) {
        if (!item) return;
        if (before == null || before < 0 || before > this.length - 1) {
            this.push(item);
            return;
        }
        this.splice(before, 0,item );
    }

   var t = ["a","b"]

   t.Insert("v",1)

    console.log(t )
```

            回答 #22

赞同：3

时间：2022-01-06T09:46:18.010

该`splice()`方法在添加元素时通常会接收三个参数：

1.  要添加项目的数组的**索引。**
2.  **要删除的项目数**，在本例中为`0`。
3.  **要添加**的元素。**** ```
let array = ['item 1', 'item 2', 'item 3']
let insertAtIndex = 0
let itemsToRemove = 0

array.splice(insertAtIndex, itemsToRemove, 'insert this string on index 0')

console.log(array)
```

* * *

## 回答 #23

> 赞同：1
> 
>             
> 
> 时间：2021-12-13T10:39:13.567

这是现代（Typescript 功能）方式：

```
export const insertItemInList = <T>(
  arr: T[],
  index: number,
  newItem: T
): T[] => [...arr.slice(0, index), newItem, ...arr.slice(index)] 
```

* * *

## 回答 #24

> 赞同：1
> 
>             
> 
> 时间：2022-01-14T01:42:20.823

我这样做：

```
const insert = (what, where, index) => 
  ([...where.slice(0, index), what , ...where.slice(index, where.length)]); 
```

```
const insert = (what, where, index) =>
  ([...where.slice(0, index), what , ...where.slice(index, where.length)]);

const list = [1, 2, 3, 4, 5, 6];
const newList = insert('a', list, 2);

console.log(newList.indexOf('a') === 2);
```

# java - 在哪里可以找到所有 HQL 关键字的列表？

> ID：586185
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2009-02-25T14:30:47.410
> 
>         
> 
> 标签：java, hibernate, jpa, hql, keyword

在哪里可以找到所有 HQL 关键字的列表？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-02-25T15:01:24.013

在完整的 Hibernate 源代码下载中有一个`grammar\hql.g`文件，它是[ANTLR](http://www.antlr.org/)语言定义。[您可以在此处](https://raw.githubusercontent.com/hibernate/hibernate-orm/master/hibernate-core/src/main/antlr/hql.g)从官方 GitHub 源存储库查看此文件的最新版本。

在该`tokens`部分中，您将找到所有标记，包括关键字（它们是定义为字符串的标记，例如`ALL="all"`）。

* * *

## 回答 #2

> 赞同：-1
> 
>             
> 
> 时间：2009-02-25T14:37:34.227

试试[这个](http://www.hibernate.org/hib_docs/v3/api/org/hibernate/hql/antlr/HqlTokenTypes.html)......不确定它是完整的还是准确的，但它可能是，因为它是 HQL 令牌的列表。

* * *

## 回答 #3

> 赞同：-1
> 
>             
> 
> 时间：2009-02-26T01:50:09.837

这是 Hibernate 2 的 BNF，我不确定这是否与上述 hql.g 文件的格式相同：

[http://www.hibernate.org/89.html](http://www.hibernate.org/89.html)

# erlang - Erlang 准备好用于商业应用了吗？

> ID：586191
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-02-25T14:33:25.143
> 
>         
> 
> 标签：erlang

我真的很想知道 Erlang 对以下内容的支持。

1.  支持 Windows COM。COM 支持本身涵盖了有关访问 Access、Excel 和 Word 文档的所有要求。既读又写。

2.  PDF 生成和打印。如果可以在 Windows 打印机服务器上完成，便笺打印很容易。许多打印机除了 Windows 之外没有任何驱动程序。

3.  还有一个很好的数据库支持，它不会使任何任务比在 SQL 服务器上做更难。Erlang Mnesia 没问题，因为在 Mnesia 上执行起来没有什么比在任何 SQL 服务器上更难的了。

我计划移植的业务应用程序将基于 Web。如果我以后能把它移植到 GUI 上会很好，但我想，对于 Erlang 来说，这样的要求可能太多了。我同意。

编辑：我想补充一点，对 MS-Office 的支持并不是什么大不了的事。一种语言只需要支持 COM。整个微软世界就在您的门前。甚至 Perl/PHP/Python/Ruby 也支持 COM。尽管这些语言都不是为 Windows 世界而生的。

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-02-25T15:00:59.973

即使我是 Erlang/OTP 的忠实粉丝，目前正在用 Erlang 开发我的应用程序服务器 ( [http://code.google.com/p/tideland-eas/](http://code.google.com/p/tideland-eas/) )，我认为这不是适合您的工具。Erlang 在并发、分布和可靠性领域非常出色。但是您需要与 Microsoft 世界进行严格的整合。所以也许你应该看看 F#，至少在这里得到一种 Erlang 的感觉。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-03-05T10:30:01.777

1.  如果你想要 COM 支持，你最好使用对微软更友好的语言

2.  相同

3.  相同，但 erlang 具有 ODBC 接口，允许您使用“普通”SQL 服务器。我知道它可以mysql，不确定mssql

无论如何，您应该考虑一些由 erlang 系统管理的帮助应用程序，例如“print_pdf.exe”、“change_word.exe”，但不是一个可以做所有事情的 erlang 应用程序。请阅读有关 C 节点和[Erlang 常见问题的](http://erlang.org/faq/faq.html)问题“Erlang 特别适合什么样的应用程序？”

--对不起我的英语）

# c# - 使用 LINQ 替换循环是否明智？

> ID：586193
> 
>         
> 
> 赞同：8
> 
>         
> 
> 时间：2009-02-25T14:35:05.793
> 
>         
> 
> 标签：c#, .net, linq, extension-methods

现在我们有了 LINQ 的强大功能，我想知道哪种语法更可取。例如，我找到了以下方法（只是认为这是一个很好的例子）：

```
foreach (FixtureImageServicesData image in _fixture.Images)
{
    if (image.Filename != _selectedFixtureImage.Filename && image.IsPrimary)
    {
        image.IsPrimary = false;
        image.IsChanged = true;
    }
} 
```

如果我们将其转换为 LINQ 方法，它看起来像这样（未经测试）：

```
_fixture.Images.Where(x => x.Filename != _selectedFixtureImage.Filename && x.IsPrimary).ForEach(x => { x.IsPrimary = false; x.IsChanged = true; }); 
```

您更愿意看到和维护哪个？这是疯子还是天才？

* * *

## 回答 #1

> 赞同：22
> 
>             
> 
> 时间：2009-02-25T14:38:52.120

使用`ForEach`扩展方法是可以的，但有一种中间方法：

```
// Rename 'query' to something meaningful :)
var query = _fixture.Images
                    .Where(image => _selectedFixtureImage.Filename 
                                    && image.IsPrimary);

foreach (FixtureImageServicesData image in query)
{
    image.IsPrimary = false;
    image.IsChanged = true;
} 
```

如果您*确实*使用了一种`ForEach`方法，我肯定会将其格式化为多行：

```
_fixture.Images
    .Where(image => _selectedFixtureImage.Filename && image.IsPrimary)
    .ForEach(image => { image.IsPrimary = false; image.IsChanged = true;}); 
```

（减少缩进以避免缠绕......）

或者：

```
_fixture.Images
        .Where(image => _selectedFixtureImage.Filename && image.IsPrimary)
        .ForEach(image => { image.IsPrimary = false; 
                            image.IsChanged = true; }); 
```

您甚至可能希望将“制作非主要”位提取到一个单独的方法中，此时您将拥有：

```
_fixture.Images
        .Where(image => _selectedFixtureImage.Filename && image.IsPrimary)
        .ForEach(MakeNonPrimary); 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T15:05:18.950

这让我想起了“我应该使用 Regex 还是标准字符串函数”或“我应该使用 XSLT/XPATH 来转换 XML 还是使用 SelectSingleNode()”。

第一个选项（即 Regex/XSLT/Linq）通常被任何花了一些时间学习它的人认为更优雅、更强大。  

而对于其他所有人来说，与第二个选项（即字符串函数、SelectSingleNode()、简单的 foreach 循环）相比，它的可读性较差且更复杂。

过去，我被指责在我的设计中使用 Regex 和 XSLT/XPATH 使事情变得过于复杂。  

Just recently I was accused of being "scared of change" by preferring simple foreach (and even for) loops in many situations over Linq Where, Foreach etc.

I soon realised that the people in both cases who said this were the sort who feel that there is "the one way" to do everything.  

Whereas I've always found it's much smarter to consider each situation on its merits and choose the right tool for the job.  I just ignore them and continue with my approach ;)

For that situation you describe, the first option is more preferable to me.  However I probably would use the Linq approach if my team were all competent in Linq, and we had coding guidelines to avoid big one-liners (by splitting it them up)

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T14:38:59.357

任何降低垂直或水平复杂性的东西对我来说都是一个加分项。此外，Linq 更能描述您要完成的工作。

# svn - 哪些文件应该添加到 svn 存储库中？

> ID：586194
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-02-25T14:35:26.230
> 
>         
> 
> 标签：svn

我正在做一个个人项目，虽然我有一个 wiki，但我想将不同的文档文件添加到 svn 存储库。此类文件包括 XML（由 monodoc 生成）以及 UML 图（由 dia 生成）。

在这个好主意中，我听到/阅读了关于不向 svn 存储库添加二进制数据并尝试只保留代码的评论，对吗？？？

* * *

## 回答 #1

> 赞同：16
> 
>             
> 
> 时间：2009-02-25T14:39:28.047

这不是关于二进制与文本的关系，而是关于它是否生成。如果您生成这些东西，为什么不将生成的源连同用于生成的工具一起添加到 SVN 而不是生成的文件本身呢？然后，再加上良好的构建脚本（也在 SVN 中），您可以随时重新生成它们。否则，您将面临生成的文件与源文件不同步的风险，或者人们将生成的文件视为“主文件”并将其更改混淆地覆盖。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-02-25T14:38:02.277

我会将所有文档、库和其他任何东西添加到存储库中。基本上任何与项目相关的东西，因为每个人都可以访问它并且也将拥有最新版本。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T14:39:36.547

我认为保留任何无法从 SVN 中的源文件重新生成的文件是完全可以的。这包括 dia/xml 文档和图像。

当然，最好尽可能将它们存储为文本 - 因此，CSV 电子表格比 Excel 文件更好。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T14:42:12.750

除了最终产品的版本之外，我不倾向于将很多二进制文件放入颠覆中。通常，如果我可以即时生成一些东西，我不会打扰，除非生成它们需要太长时间，然后我就把它们粘在那里。

也就是说，如果它能让我的生活更轻松，我宁愿将最新文档的副本（无论我是否可以轻松区分它们）放入 svn。当老板或客户说“您有 10 月份的 xyz 文档吗？”时，能够将您的手放在某物的副本（无论是最新版本还是以前版本）上总是很好的。  

至于你的特殊需求，嗯..只有你知道，但磁盘空间很便宜，如果有它们的价值，我会这样做。

只是我的两分钱。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T14:39:14.350

Subversion 可以很好地处理二进制文件：

[http://subversion.tigris.org/faq.html#binary-files](http://subversion.tigris.org/faq.html#binary-files)

因此，如果将这些文件放在源代码树中是有意义的，我会说签入。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T14:39:53.583

添加与项目有关的所有内容。添加二进制文件（例如库）没有问题，**但是**：避免添加重复的数据，例如从源代码编译的文件。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T14:41:04.110

svn 处理二进制文件就好了，但我不会添加构建文件，只添加源。如果您的文档是从其他文件生成的，请不要签入，让其他开发人员自己构建它。只有当文件很难构建时，我才会将它们检入 Subversion。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T14:45:30.387

我个人的规则是不要添加可以从其他东西生成的东西。很好的例子是可以从代码注释中生成的文档文件。

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T14:50:17.660

如果您有一个可以以巧妙的方式合并和区分的文档系统，我认为文档的“源”应该在树中。即 .tex 文件，而不是 .pdf。

如果您分支需要编辑代码和文档的版本，则该文档更改也将在 SVN 中。当您发布时，您从代码和文档源中的文档构建二进制文件。

如果你从分支中反向移植东西，你也可以反向移植其相应的文档。

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:02:47.007

我将我创建并可能更改的数据放入 SVN。例如，我将源代码、解决方案和制作文件以及文档放在 SVN 中。我尽量避免添加生成的文件，例如从其他格式、二进制文件和第三方库生成的 PDF。我不生成和更改的内容（例如来自其他供应商的手册）最终位于共享文件夹中。这与其他人所说的完全一致。

但是，当我 (1) 发布并需要保留确切发布的文件或 (2) 文件难以构建并且我不希望其他开发人员处理构建时，我确实添加了生成的文件和二进制文件过程。我有时会为了方便而添加第三方库，这样新开发人员就不必查找、下载和安装它们——这对我很有帮助，因为我的许多开发机器都没有连接到 Internet。

# asp.net - .NET 应用程序失败 - 通过回收应用程序池解决

> ID：586195
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-25T14:36:03.530
> 
>         
> 
> 标签：asp.net, iis, application-pool

我正在查看一个 .NET ASP 应用程序（从支持方面 - 我没有对其进行编程）。

它间歇性挂起 - 网页无法打开。回收应用程序池可以修复它。

我可以在事件查看器中看到条目说明

> 进程服务器应用程序池“wsfrappPool”在关闭期间超出了时间限制。来自 W3SVC 的进程 ID 是“9396”。

我也能看到

> 为应用程序池“AeXRSVaultPool”提供服务的进程 ID 为“6804”的工作进程已请求回收，因为该工作进程已达到其允许的处理时间限制。

我正在寻找有关如何追踪导致挂起并防止其再次发生的建议。我可以使用性能计数器来跟踪它吗？这些事件查看器条目是否相关？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-02-25T14:42:24.683

检查 IIS 日志以查看应用程序崩溃之前的最后几个请求。这可能会提示您哪些页面可能导致问题。

我在使用 .net 1.* 时遇到了很多这样的问题，这主要是由于内存不足或工作进程膨胀到超过 1GB 的内存。（有很多大文件上传，一些显式的 GC.Collect() 调用有所帮助 - 不好，但需要修复）自 2.0 以来，我没有遇到过这种问题（大文件和所有，没有 GC.Collects） .  

*   页面托管在哪个版本的 .NET 中？

*   同一个应用程序池中托管了多少其他网站？

事件查看器事件可能描述了您回收池的操作。

# vb6 - Visual Basic 6 尝试完成其他应用程序安装

> ID：586199
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-25T14:37:40.547
> 
>         
> 
> 标签：vb6, installation, startup

Visual Basic 6 有时会在启动时尝试安装或完成其他应用程序的安装。为什么？

多年来我已经多次看到这种情况，这很烦人。最近，我在 VM 上安装了 Business Objects，只是 SDK，以及 3.5 的所有服务包，当我第一次进入 VB6 时，它显示 Windows Installer，“准备安装...”。CPU 固定为 100%。然后它会询问 Visual Studio 2003 Disk 1 在哪里。我可以取消，这需要 2-3 次才能开始工作。当我打开另一个 VB6 时，整个过程将重新开始。

以前发生过这种情况，我认为是因为 MS Office XP 和 Office 2003 已更新。

有谁知道发生了什么以及如何解决它？

更新：使用资源管理器搜索会导致一个类似的框打开，只是它想安装一个 MS Office 2003 组件，看到唯一添加的一点是 BO SDK，这真的有点神秘。

像这样的小事使我成为LUV Windows。

更新：它试图从 Visual Studio 2003 的光盘 1 安装一些东西。“安装我”COM 对象的列表将保存在哪里？在注册表中？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T15:40:31.347

发生这种情况时，我只是卸载并重新安装 VB6。您可以在事件查看器 (eventvwr.exe) 的应用程序日志中查看实际导致问题的原因。MSI 安装程序应该在其中放置一些消息。但我已经很久没有看到这个了。您确实为 VB6 安装了 Service Pack 6，对吗？

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T18:02:44.577

通常，发生的情况是有一个使用“首次使用时安装”选项注册的 COM 组件。在当时的应用程序上，应用程序启动并检查是否存在必要的 COM 组件。如果是，那就太好了。否则，COM 应该安装该组件。但是，如果您收到此错误，这通常意味着安装由于某种原因而失败。我建议您查看名为 Process Monitor 的程序（请参阅 sysinternals.com，现在是 Microsoft 的一部分）并查看它正在尝试加载哪个 COM 组件。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-03-10T14:26:58.653

应用程序事件日志中有两条错误消息。

```
Detection of product '{20610409-CA18-41A6-9E21-A93AE82EE7C5}', feature   'Visual_Studio.NET_Professional' failed during request for component '{DD68FEE8-C369-11D1-A173-00A0C90AB50F}' 
```

和

```
Detection of product '{20610409-CA18-41A6-9E21-A93AE82EE7C5}', feature 'Visual_Studio.NET_Professional', component '{66CD2C91-2A15-4DA4-BBD2-5EC1075F3C0E}' failed.  The resource 'HKEY_CLASSES_ROOT\.pip\' does not exist. 
```

我添加了值为 PIPFile 的 .pip 注册表项。安装消息消失了。这可能不适用于这样的每个问题。感谢上帝，我不必重新安装 VS6。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-04-19T12:32:09.373

我想我知道发生了什么，它与影响 VB6 加载方式的 Microsoft Office 2003 的问题有关。我已经删除了我的 Office 2003 和访客什么，我能够加载 vb6。我希望这可以帮助你。

# maven - 使用 Maven 复制文件的最佳实践

> ID：586202
> 
>         
> 
> 赞同：206
> 
>         
> 
> 时间：2009-02-25T14:38:00.700
> 
>         
> 
> 标签：maven, maven-2, build-process, release-management

我有配置文件和各种文档，我想使用 Maven2 从开发环境复制到 dev-server 目录。奇怪的是，Maven 似乎不擅长这项任务。

一些选项：

*   在 Maven 中简单使用*复制任务*

> ```
> <copy file="src/main/resources/config.properties" tofile="${project.server.config}/config.properties"/> 
> ```

*   使用 Ant 插件从 Ant 执行*复制*。

    *   构造一个*zip*类型的工件，以及通常是*jar*类型的 POM 的“主”工件，然后将该工件从存储库*解压缩*到目标目录中。

    *   *maven-resources*插件，如下所述。

    *   Maven Assembly 插件——但这似乎需要大量手动定义，当我想简单而“传统地”做事时。

    *   [这个页面](http://maven-plugins.sourceforge.net/cgi-bin/wiki?PluginTutorial)甚至展示了如何构建一个插件来进行复制！

    *   *maven-upload*插件，如下所述。

    *   *maven-dependency-plugin*和*copy*，如下所述。

所有这些似乎都是不必要的临时性：Maven 应该擅长于完成这些标准任务而无需大惊小怪。

有什么建议吗？

* * *

## 回答 #1

> 赞同：141
> 
>             
> 
> 时间：2009-08-10T11:26:02.483

```
<build>
    <plugins>
        ...
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-resources-plugin</artifactId>
            <version>2.3</version>
        </plugin>
    </plugins>
    <resources>
        <resource>
            <directory>src/main/java</directory>
            <includes>
                <include> **/*.properties</include>
            </includes>
        </resource>
    </resources>
    ...
</build> 
```

* * *

## 回答 #2

> 赞同：128
> 
>             
> 
> 时间：2009-03-29T05:51:02.977

不要回避 Antrun 插件。只是因为有些人倾向于认为 Ant 和 Maven 是对立的，但事实并非如此。如果您需要执行一些不可避免的一次性定制，请使用复制任务：

```
<project>
  [...]
  <build>
    <plugins>
      [...]
      <plugin>
        <artifactId>maven-antrun-plugin</artifactId>
        <executions>
          <execution>
            <phase>deploy</phase>
            <configuration>
              <target>

                <!--
                  Place any Ant task here. You can add anything
                  you can add between <target> and </target> in a
                  build.xml.
                -->

              </target>
            </configuration>
            <goals>
              <goal>run</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
  [...]
</project> 
```

在回答这个问题时，我专注于你所问的细节。如何复制文件？这个问题和变量名让我想到了一个更大的问题，比如：“有没有更好的方法来处理服务器配置？” 使用 Maven 作为构建系统来生成可部署的工件，然后在单独的模块中或完全在其他地方执行这些自定义。如果您共享更多的构建环境，可能会有更好的方法 - 有插件来配置许多服务器。你能附加一个在服务器根目录中解压的程序集吗？你用的是什么服务器？

同样，我确信有更好的方法。

* * *

## 回答 #3

> 赞同：54
> 
>             
> 
> 时间：2015-08-18T19:52:55.360

为了复制文件使用：

```
 <plugin>
            <artifactId>maven-resources-plugin</artifactId>
            <version>3.1.0</version>
            <executions>
                <execution>
                    <id>copy-resource-one</id>
                    <phase>install</phase>
                    <goals>
                        <goal>copy-resources</goal>
                    </goals>

                    <configuration>
                        <outputDirectory>${basedir}/destination-folder</outputDirectory>
                        <resources>
                            <resource>
                                <directory>/source-folder</directory>
                                <includes>
                                    <include>file.jar</include>
                                </includes>
                            </resource>
                        </resources>
                    </configuration>
                </execution>
           </executions>
        </plugin> 
```

为了复制带有子文件夹的文件夹，请使用下一个配置：

```
 <configuration>
              <outputDirectory>${basedir}/target-folder</outputDirectory>
              <resources>          
                <resource>
                  <directory>/source-folder</directory>
                  <filtering>true</filtering>
                </resource>
              </resources>              
            </configuration> 
```

* * *

## 回答 #4

> 赞同：23
> 
>             
> 
> 时间：2016-04-19T01:07:13.210

对于简单的复制任务，我可以推荐[copy-rename-maven-plugin](https://coderplus.github.io/copy-rename-maven-plugin/)。它简单易用：

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>com.coderplus.maven.plugins</groupId>
        <artifactId>copy-rename-maven-plugin</artifactId>
        <version>1.0</version>
        <executions>
          <execution>
            <id>copy-file</id>
            <phase>generate-sources</phase>
            <goals>
              <goal>copy</goal>
            </goals>
            <configuration>
              <sourceFile>src/someDirectory/test.environment.properties</sourceFile>
              <destinationFile>target/someDir/environment.properties</destinationFile>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

如果您想复制多个文件，请将`<sourceFile>...</destinationFile>`部分替换为

```
<fileSets>
  <fileSet>
    <sourceFile>src/someDirectory/test.environment.properties</sourceFile>
    <destinationFile>target/someDir/environment.properties</destinationFile>
  </fileSet>
  <fileSet>
    <sourceFile>src/someDirectory/test.logback.xml</sourceFile>
    <destinationFile>target/someDir/logback.xml</destinationFile>
  </fileSet>                
</fileSets> 
```

此外，如果需要，您可以在多个阶段指定多个执行，第二个目标是“重命名”，它只是按照它所说的去做，而其余的配置保持不变。有关更多使用示例，请参阅[Usage-Page](https://coderplus.github.io/copy-rename-maven-plugin/usage.html)。

**注意**：这个插件只能复制文件，不能复制目录。（感谢 @james.garriss 发现此限制。）

* * *

## 回答 #5

> 赞同：21
> 
>             
> 
> 时间：2011-11-18T10:59:06.950

maven 依赖插件为我节省了很多时间来处理 ant 任务：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <executions>
        <execution>
            <id>install-jar</id>
            <phase>install</phase>
            <goals>
                <goal>copy</goal>
            </goals>
            <configuration>
                <artifactItems>
                    <artifactItem>
                        <groupId>...</groupId>
                        <artifactId>...</artifactId>
                        <version>...</version>
                    </artifactItem>
                </artifactItems>
                <outputDirectory>...</outputDirectory>
                <stripVersion>true</stripVersion>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

[dependency:copy](http://maven.apache.org/plugins/maven-dependency-plugin/copy-mojo.html)是 documentend，并且有更多有用的目标，例如 unpack。

* * *

## 回答 #6

> 赞同：7
> 
>             
> 
> 时间：2009-04-23T14:04:41.863

上面的 ant 解决方案最容易配置，但我很幸运地使用了 Atlassian 的 maven-upload-plugin。我找不到好的文档，这是我的使用方法：

```
<build>
  <plugin>
    <groupId>com.atlassian.maven.plugins</groupId>
    <artifactId>maven-upload-plugin</artifactId>
    <version>1.1</version>
    <configuration>
       <resourceSrc>
             ${project.build.directory}/${project.build.finalName}.${project.packaging}
       </resourceSrc>
       <resourceDest>${jboss.deployDir}</resourceDest>
       <serverId>${jboss.host}</serverId>
       <url>${jboss.deployUrl}</url>
     </configuration>
  </plugin>
</build> 
```

上面引用的“${jboss.host}”等变量在我的 ~/.m2/settings.xml 中定义，并使用 maven 配置文件激活。此解决方案不受 JBoss 限制，这正是我命名变量的名称。我有一个用于开发、测试和实时的配置文件。因此，要将我的耳朵上传到测试环境中的 jboss 实例，我将执行：

```
mvn upload:upload -P test 
```

这是来自 settings.xml 的片段：

```
<server>
  <id>localhost</id>
  <username>username</username>
  <password>{Pz+6YRsDJ8dUJD7XE8=} an encrypted password. Supported since maven 2.1</password>
</server>
...
<profiles>
  <profile>
    <id>dev</id>
    <properties>
      <jboss.host>localhost</jboss.host> 
      <jboss.deployDir>/opt/jboss/server/default/deploy/</jboss.deployDir>
      <jboss.deployUrl>scp://root@localhost</jboss.deployUrl>
    </properties>
  </profile>
  <profile>
    <id>test</id>
    <properties>
       <jboss.host>testserver</jboss.host>
       ... 
```

注意：有这个插件的 Atlassian maven repo 在这里：[https ://maven.atlassian.com/public/](https://maven.atlassian.com/public/)

我建议下载源代码并查看里面的文档以查看插件提供的所有功能。

`

* * *

## 回答 #7

> 赞同：6
> 
>             
> 
> 时间：2009-03-06T11:28:30.347

好吧，maven 不应该擅长做细粒度的任务，它不是像 bash 或 ant 这样的脚本语言，它是一种声明性的语言——你说——我需要一场战争，或者一个耳朵，你明白了。但是，如果您需要自定义战争或耳朵的内部外观，您就有问题了。它不像蚂蚁那样是程序性的，而是声明性的。这在开始时有一些优点，最后可能会有很多缺点。

我猜最初的概念是拥有优秀的插件，“只是工作”，但如果你做非标准的东西，现实就不同了。

但是，如果您在 pom 和少量自定义插件上投入足够的精力，您将获得一个更好的构建环境，例如使用 ant （当然取决于您的项目，但对于更大的项目来说越来越真实）。

* * *

## 回答 #8

> 赞同：4
> 
>             
> 
> 时间：2013-03-29T16:04:51.100

我在[copy-maven-plugin](http://evgeny-goldin.com/wiki/Copy-maven-plugin)方面有很好的经验。与 maven-resources-plugin 相比，它具有更方便和简洁的语法。

* * *

## 回答 #9

> 赞同：4
> 
>             
> 
> 时间：2017-02-26T12:38:43.160

复制任意文件的通用方法是利用[Maven Wagon](https://maven.apache.org/wagon/)传输抽象。`file`它可以通过、`HTTP`、或`FTP`等协议处理各种目的地。`SCP``WebDAV`

有一些插件提供了通过使用`Wagon`. 最值得注意的是：

*   ### 开箱即用的[Maven 部署插件](https://maven.apache.org/plugins/maven-deploy-plugin/)

    有[`deploy-file`](https://maven.apache.org/plugins/maven-deploy-plugin/deploy-file-mojo.html)目标。它非常不灵活，但可以完成工作：

    ```
    mvn deploy:deploy-file -Dfile=/path/to/your/file.ext -DgroupId=foo 
    -DartifactId=bar -Dversion=1.0 -Durl=<url> -DgeneratePom=false 
    ```

    使用的显着缺点`Maven Deploy Plugin`是它被指定用于 Maven 存储库。它采用特定的结构和元数据。您可以看到该文件被放置在下面`foo/bar/1.0/file-1.0.ext`并创建了校验和文件。没有办法解决这个问题。

*   ### [Wagon Maven 插件](http://www.mojohaus.org/wagon-maven-plugin/)

    使用[`upload-single`目标](http://www.mojohaus.org/wagon-maven-plugin/upload-single-mojo.html)：

    ```
    mvn org.codehaus.mojo:wagon-maven-plugin:upload-single
    -Dwagon.fromFile=/path/to/your/file.ext -Dwagon.url=<url> 
    ```

    复制的使用`Wagon Maven Plugin`很简单，似乎是最通用的。

在上面的例子`<url>`中可以是任何支持的协议。请参阅现有[Wagon 供应商](https://maven.apache.org/wagon/wagon-providers/)列表。例如

*   在本地复制文件：`file:///copy/to`

*   将文件复制到正在运行的远程主机`SSH`：`scp://host:22/copy/to`

上面的示例在命令行中传递插件参数。或者，插件可以直接在`POM`. 然后调用将简单地像`mvn deploy:deploy-file@configured-execution-id`. 或者它可以绑定到特定的构建阶段。

请注意，对于喜欢`SCP`工作的协议，您需要在您的`POM`:

```
<build>
  [...]
  <extensions>
    <extension>
      <groupId>org.apache.maven.wagon</groupId>
      <artifactId>wagon-ssh</artifactId>
      <version>2.12</version>
    </extension>
  </extensions> 
```

如果您要复制到的目标需要身份验证，则可以通过[`Server`settings](https://maven.apache.org/settings.html#Servers)提供凭据。`repositoryId`/`serverId`传递给插件必须与设置中定义的服务器匹配。

* * *

## 回答 #10

> 赞同：3
> 
>             
> 
> 时间：2009-02-25T17:11:32.470

我只能假设您的 ${project.server.config} 属性是自定义定义的并且在标准目录布局之外。  

如果是这样，那么我会使用复制任务。

* * *

## 回答 #11

> 赞同：2
> 
>             
> 
> 时间：2009-03-31T17:07:41.133

另一种方法是使用程序集插件将这些东西捆绑到一个工件中。然后您可以使用依赖插件将这些文件解压缩到您想要的位置。依赖插件中也有复制目标来复制工件。

* * *

## 回答 #12

> 赞同：1
> 
>             
> 
> 时间：2010-10-12T09:02:25.990

我能够为这个答案拼凑出许多不同的来源：

```
...
<repository>
    <id>atlassian</id>
    <name>Atlassian Repo</name>
    <url>https://maven.atlassian.com/content/repositories/atlassian-public</url>
</repository>
...
<dependency>
    <groupId>com.atlassian.maven.plugins</groupId>
    <artifactId>maven-upload-plugin</artifactId>
    <version>1.1</version>
</dependency>
...
<plugin>
    <groupId>com.atlassian.maven.plugins</groupId>
    <artifactId>maven-upload-plugin</artifactId>
    <version>1.1</version>
    <configuration>
        <serverId>jira-repo</serverId>
        <resourceSrc>
            ${project.build.directory}/${project.build.finalName}.${project.packaging}
        </resourceSrc>
        <resourceDest>opt/jira/webapps</resourceDest> <!-- note: no leading slash -->
        <url>scp://root@jira</url>
    </configuration>
</plugin>
... 
```

来自`~/.m2/settings.xml`：

```
...
<servers>
  <server>
    <id>jira-repo</id>
    <username>myusername</username>
    <password>mypassword</password>
  </server>
</servers>
... 
```

然后运行命令：（-X 用于调试）

`mvn -X upload:upload`

* * *

## 回答 #13

> 赞同：0
> 
>             
> 
> 时间：2021-02-02T12:05:30.013

如果有人想完全控制源路径和目标路径的路径，那么使用`maven-antrun-plugin`'s`copy`任务是最好的选择。这种方法将允许您在系统上的任何路径之间进行复制，而不管相关路径是否在`mvn`项目中。我有一种情况，我不得不做一些不寻常的事情，比如将生成的源文件从`target`目录复制回`src`目录以进行进一步处理。在我的情况下，这是唯一没有大惊小怪的选择。示例代码片段来自`pom.xml`：

```
<plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-antrun-plugin</artifactId>
        <version>1.8</version>
        <executions>
            <execution>
                <phase>process-resources</phase>
                <configuration>
                <tasks>
                    <copy file="${basedir}/target/myome/minifyJsSrcDir/myome.min.js" todir="${basedir}/src/main/webapp/app/minifyJsSrcDir"/>
                </tasks>
                </configuration>
                <goals>
                <goal>run</goal>
                </goals>
            </execution>
        </executions>
</plugin> 
```

* * *

## 回答 #14

> 赞同：-1
> 
>             
> 
> 时间：2009-08-13T10:53:25.523

总结上面的一些很好的答案：**Maven**旨在构建模块并将结果复制到 Maven 存储库。任何将模块复制到部署/安装程序输入目录都必须在 Maven 核心功能的上下文之外完成，例如使用 Ant/Maven**复制**命令。

# c# - 从 log4net 转发到 NLog

> ID：586207
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2009-02-25T14:38:31.230
> 
>         
> 
> 标签：c#, .net, logging, log4net, nlog

在我当前的项目中，我使用了两个库，其中一个使用 log4net，另一个使用 NLog 进行日志记录。我个人更喜欢 NLog，所以它也用于我的应用程序。

我对 log4net 了解不多，所以我想知道以编程方式将所有消息从 log4net 转发到 NLog 的最佳方法是什么。

[NLog 论坛上](http://nlog-project.org/forum#nabble-td1685351)有一篇关于 log4net 转发器的帖子，但看起来以前没有人这样做过。

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-02-25T14:43:16.117

创建一个自定义 log4net Appender，将消息记录到 nlog 记录器。如果您只想将日志信息传递给 nlog，而不是用 nlog 替换所有出现的 log4net 日志记录，这可能至少是解决方案。

看[这里](http://logging.apache.org/log4net/release/faq.html)，[这里](http://karlagius.com/2008/01/02/writing-a-custom-appender-for-log4net/)和[这里](http://blog.joachim.at/?p=31)

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T14:44:43.773

基本上你需要一个 log4net *appender* ( `log4net.Appender.IAppender`)，它将所有`DoAppend`调用委托给 NLogs'`Logger`或`Target`.

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2011-06-29T07:38:45.040

我今晚正在尝试这样做。我看到 Commons.Logging 说它在日志库之间具有双向事件路由。

1.  使用 NuGet 添加 Common.Logging.log4net 和 Common.Logging.NLog （将通过包依​​赖获取 log4net 和 NLog）

2.  添加下面的配置。

3.  在`Main()`使用初始化 log4net`log4net.Config.XmlConfigurator.Configure();` 

```
<configuration>
  <configSections>
    <section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog" />
    <sectionGroup name="common">
      <section name="logging" type="Common.Logging.ConfigurationSectionHandler, Common.Logging" />
    </sectionGroup>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net" />
  </configSections>
  <nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <targets async="true">
      <target name="file" xsi:type="File" fileName="d:\logs\app1\logging.txt"/>
      <target name="console" xsi:type="ColoredConsole" />
    </targets>
    <rules>
      <logger name="*" writeTo="file"/>
      <logger name="*" writeTo="console"/>
    </rules>
  </nlog>
  <common>
    <logging>
      <factoryAdapter type="Common.Logging.NLog.NLogLoggerFactoryAdapter, Common.Logging.NLog">
        <arg key="configType" value="INLINE" />
      </factoryAdapter>
    </logging>
  </common>
  <log4net>
    <!-- Commons.Logging will bridge the log4net messages to NLog, required to see TopShelf log messages -->
    <appender name="CommonLoggingAppender" type="Common.Logging.Log4Net.CommonLoggingAppender, Common.Logging.Log4Net">
      <layout type="log4net.Layout.PatternLayout, log4net">
        <param name="ConversionPattern" value="%level - %class.%method: %message" />
      </layout>
    </appender>
    <root>
      <level value="ALL" />
      <appender-ref ref="CommonLoggingAppender" />
    </root>
  </log4net>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="NLog" publicKeyToken="5120e14c03d0593c" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

参考：[Common.Logging 桥接日志系统](http://netcommon.sourceforge.net/docs/2.0.0/reference/html/ch01.html#d4e362)

> 对 Entlib 3.1、EntLib 4.1、log4net 1.2.9、log4net 1.2.10 和 NLog 日志记录的完全双向事件路由支持

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2018-07-30T10:55:42.367

只需使用[log4net.NLogAppender](https://github.com/lanwin/log4net.NLogAppender)

Nuget 链接：[https ://www.nuget.org/packages/log4net.NLogAppender/](https://www.nuget.org/packages/log4net.NLogAppender/)

Nuget安装：`Install-Package log4net.NLogAppender`

# scripting - 停机问题和后台编译？

> ID：586213
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-25T14:38:59.637
> 
>         
> 
> 标签：scripting, autocomplete, compilation, halting-problem

我试图弄清楚如何为 Lua 编写自动完成算法，但是由于与许多脚本语言一样，它缺少静态类型系统，我认为我需要后台编译，但是在后台编译期间很容易遇到停止问题，所以我想知道以前是否有人解决过这种事情，解决编译和停止的标准策略是什么？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T15:52:05.390

基于静态文本分析的自动完成听起来比试图在后台编译更合理。大多数提供自动完成功能的文本编辑器都使用这种方法，尽管它并不准确。

为此，您可以解析文档以查找名称并记录它们所属的范围。随着该点在文档中移动，您的自动完成功能会记录它当前所在的范围，并提供该点应该可用的名称。

由于默认情况下 LUA 是全局范围，如果您的程序员没有使用“local”关键字来缩小范围，您最终可能会得到一个相当污染的命名空间。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T16:04:07.937

你可以

*   实际执行代码，看看某个特定变量代表什么类型的对象，如果耗时过长则中途截断执行

*   猜猜如果 Lua 有类型，实际变量会有什么类型。这意味着您必须创建一个类型系统，这是一项不平凡的任务（您必须具有足够的限制性以允许对对象模型进行推理，并且足够允许足够多的 Lua 程序实际上符合您的模型）。然而，所有闪亮的新 javascript 引擎都试图这样做，AFAIK，所以你可以在那里寻找指针。

*   只是从语法猜测。例如，emacs 补全，它只查找相同的前缀，在其他 IDE 通常失败的情况下（C++ 模板）就像魅力一样

# java - log4j 额外的日志记录参数

> ID：586218
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-25T14:39:40.633
> 
>         
> 
> 标签：java, logging, log4j

我正在开发一个（内部）库，我想强制使用此库的开发人员在记录错误或致命级别消息时包含文本 ID。在不修改 log4j 的情况下，我们要强制执行的内容类似于：

*logger.error("E1234: 发生错误");*

如果没有或只对 log4j 进行少量扩展，我们可以在夜间构建期间扫描源代码以验证是否包含文本 ID，或者实现在运行时验证它的 log4j 附加程序。

然而，我们想要的是在错误方法中添加一个额外的参数。例如：

*logger.error("E1234", "发生错误");*

这可以通过为 log4j Logger 类实现一些外观类来处理。

有没有其他人有类似的问题？你的解决方案是什么？现在，我们更喜欢第一个代码示例。将来我们可能会实现代码分析器以在夜间构建期间执行（或者是否有人知道一些现有的代码分析器可以配置为从 error() 方法调用中检测丢失的文本 ID？）

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-02-25T14:48:12.890

避免使用这样的复合键：“E1234：发生错误”

我会用

```
public enum Error {
 E1234("E1234", "An error has occured"),
 E1245("E1235", "Other error has occured"),
 private final String code;
 private final String description;
 Error(code, description) {
   this.code;
   this.description = description
 }
 @Override
 public String toString() {
   return this.code + ": " + this.description;
 }
} 
```

然后，您可以使用接受错误的方法创建自己的接口：

```
public interface MyLogger {
 void error(Error);
 void info(Error);
 void warn(Error);
 void debug(Error);
} 
```

然后实现它并委托给 log4j 真正的日志记录作业。这将帮助您的开发人员避免问题。

# binding - JAXB：匿名简单类型作为枚举？

> ID：586224
> 
>         
> 
> 赞同：11
> 
>         
> 
> 时间：2009-02-25T14:41:51.097
> 
>         
> 
> 标签：binding, xsd, jaxb

当通过 XJC 编译器从 XSD 生成 Java 时，对于具有匿名 simpleTypes 的元素，我总是得到 java.lang.String 类型，如下所示：

```
 <xsd:element name="Product">
    <xsd:simpleType>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="Product1"/>
            <xsd:enumeration value="Product2"/>
            <xsd:enumeration value="Product3"/>
        </xsd:restriction>
    </xsd:simpleType>
</xsd:element> 
```

当然，我想要一个枚举。有没有办法欺骗 XJC 生成和使用一个？

我们正在使用 JAXB 2.1.3。注意：在您问之前，不，我无法更改架构并使其适应 XJC 的错误。

* * *

## 回答 #1

> 赞同：16
> 
>             
> 
> 时间：2009-03-20T15:44:26.557

您必须放入您的 XJC 文件：

```
<jxb:bindings node="//xsd:element[@name='Product']/xsd:simpleType">
    <jxb:typesafeEnumClass name="ProductType" />
</jxb:bindings> 
```

或者

```
<jxb:bindings node="//xsd:element[@name='Produkt']">
    <jxb:bindings node="./xsd:simpleType">
        <jxb:typesafeEnumClass name="ProduktType" />
    </jxb:bindings>
</jxb:bindings> 
```

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2010-01-27T19:18:53.743

这是我如何实现它的示例。为了完整起见，我将添加整个 xjb，因为我承认查看现有示例我仍然觉得它有点令人困惑。

这是 .xjb 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<jaxb:bindings xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
               xmlns:xs="http://www.w3.org/2001/XMLSchema"
               jaxb:version="1.0">
   <jaxb:bindings schemaLocation="search-constraints.xsd" 
    node="/xs:schema">

     <jaxb:bindings node="//xs:simpleType[@name='booleanStringType']">
      <jaxb:typesafeEnumClass name="BooleanStringType" />
  </jaxb:bindings>

   </jaxb:bindings>
</jaxb:bindings> 
```

在这里，绑定指的是在我的 search-constraints.xsd 中在根级别声明的简单类型。这是该文件的摘录：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" 
 targetNamespace="http://www.example.com" 
 xmlns:tns="http://www.example.com" 
 elementFormDefault="qualified"
 xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
    jaxb:version="1.0">

...

<xs:simpleType name="booleanStringType">
    <xs:restriction base="xs:string">
        <xs:enumeration value="true" />
        <xs:enumeration value="false" />
    </xs:restriction>
</xs:simpleType> 
```

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T14:58:53.817

我有一个非常相似的问题，我在 JAXB 邮件列表上询问并得到了[这个相当有用的回复](https://java.net/projects/jaxb/lists/users/archive/2009-02/message/17)（虽然还没有时间尝试）

编辑：如果您正在谈论*自动生成*枚举类，而不仅仅是自动映射到您自己编写的枚举类，我认为您可以编写一个 java 类来解析模式文件并为此自动生成 java 代码枚举。（然后在调用 xjc 时运行该 java 类）

# delphi - 我在哪里可以找到 TBitBtn 的 *新 * 外观字形？

> ID：586226
> 
>         
> 
> 赞同：9
> 
>         
> 
> 时间：2009-02-25T14:42:04.623
> 
>         
> 
> 标签：delphi

我正在使用 Delphi 2007，我正在寻找一些更新的字形添加到我的 TBitBtns。老实说，在字形方面，我更喜欢看起来更像[Tango Desktop](http://tango.freedesktop.org/Tango_Desktop_Project)或 KDE4 的东西。

如果我找不到其他任何东西，我将使用 Tango 图标，并将它们转换为 *.pcx 或 *.bmp。

但是，我很好奇是否有人知道一些已经包含此功能的组件。

提前致谢。

编辑：首先，我正在寻找要添加到按钮的字形（特别是 TBitBtn）。

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-02-25T15:08:13.857

看看[famfamfam.com](http://famfamfam.com/lab/icons/)。这些集合很好，但其中一些是 PNG 格式的，所以你仍然需要转换图像。

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-02-25T15:02:33.607

[D2006 及更高版本包括一些位于 C:\Program Files\Common Files\CodeGear Shared\Images 或任何您的路径的新图标，但您可以从glyFX](http://www.glyfx.com)和[Glyfz](http://www.glyfz.com)获得包含更好图标和不同大小的完整列表 

* * *

## 回答 #3

> 赞同：4
> 
>             
> 
> 时间：2009-02-25T17:09:45.797

你的硬盘上有一组相当不错的组件：

C:\Program Files\Common Files\CodeGear Shared\Images\GlyFX

* * *

## 回答 #4

> 赞同：3
> 
>             
> 
> 时间：2009-02-25T15:47:46.180

我们最近从[Icon Experience](http://www.iconexperience.com/)购买了完整的图标集，用于我们所有的应用程序。在此之前，我花了很多时间寻找好看的免费图标包，但没有找到。Icon Experience 带有一个方便的搜索程序和一个编辑器，因此您可以轻松修改所有图标（添加小的添加/删除/搜索覆盖等）。

对我们来说，这是一笔巨大的投资（379 美元），但我不知道你的预算。

顺便说一句，所有图标都采用 png/ico/bmp 格式和转换实用程序。

* * *

## 回答 #5

> 赞同：3
> 
>             
> 
> 时间：2009-02-25T16:06:16.010

您可以在以下位置找到更多免费图标，有多种格式和尺寸：

*   [http://www.iconlet.com/](http://www.iconlet.com/)

*   [http://www.iconfinder.net/](http://www.iconfinder.net/)

*   [http://www.iconlook.com/](http://www.iconlook.com/)

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2013-04-10T22:56:11.240

我使用[Axialis Icon Workshop](http://www.axialis.com/iconworkshop/)和它的一些图标包。这是一个免费试用的商业程序，它有插件图标包，可以单独购买。

对于商业用途，具有免版税的再分发权，我发现它是一种有效的专业解决方案。如果您正在进行休闲的个人发展，那么您接受的免费网站对我来说看起来不错。

自 2009 年以来 Delphi 版本附带的 Glyfx 图标也比旧的 Delphi 5 时代位图更好，但对大多数人来说还不够，因此我的建议是。

* * *

## 回答 #7

> 赞同：2
> 
>             
> 
> 时间：2013-04-11T10:19:07.503

[http://p.yusukekamiyamane.com/](http://p.yusukekamiyamane.com/)上的3,570 个 16x16 图标通过署名免费使用，或购买许可证。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2013-04-11T14:14:50.430

我过去从 www.icons-icons.com 获得了图标的许可。它们好看又实惠。
[http://www.icons-icons.com/index.php](http://www.icons-icons.com/index.php)

# asp.net-2.0 - 用户创建的验证器不会在“复杂”用户控件上调用客户端验证 Javascript

> ID：586229
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-25T14:42:20.503
> 
>         
> 
> 标签：asp.net-2.0, client-side, validation

我创建了一个用户控件（来自 System.Web.UI.UserControl），并为用户控件创建了自己的验证器（来自 System.Web.UI.WebControls.BaseValidator）。一切正常，直到我尝试让用户控件进行客户端验证。

在尝试调试此问题时，我已将“验证控制”设置为文本框而不是自定义用户控件，并且客户端脚本工作正常！在我看来，我创建的复合用户控件存在问题。有没有人遇到过这个问题？有没有其他人看到客户端验证在自定义用户控件上失败？

一些额外的信息：

复合控件是一个下拉列表和“加载器图像”，因为它是一个启用 ajax 的下拉列表（使用 ICallbackEventHandler）。我知道客户端 javascript 正在写入页面，并在验证器函数中放置了一个 alert('random message') 作为第一行，仅在验证文本框时出现（即在验证时不显示我的自定义控件）

语言：C# (ASP.NET 2.0) 和 jQuery 1.2.6

在 aspx 文件中：

```
<rms:UserDDL ID="ddlUserTypes" runat="server" PreLoad="true" />
<rms:DDLValidator 
        ID="userTypesVal"
        ControlToValidate="ddlUserTypes"
        ErrorMessage="You have not selected a UserType"
        runat="server"
        Text="You have not selected a UserType"
        Display="Dynamic"
        EnableClientScript="true" /> 
```

在验证器代码后面

```
protected string ScriptBlock
        {
            get
            {
                string nl = System.Environment.NewLine;
                return
                    "<script type=\"text/javascript\">" + nl +
                    "   function " + ScriptBlockFunctionName + "(ctrl)" + nl +
                    "   {" + nl +
                    "       alert('Random message'); " + nl +
                    "       var selVal = $('#' + ctrl.controltovalidate).val(); " + nl +

                    "       alert(selVal);" + nl +
                    "      if (selVal === '-1') return false;  " + nl +
                    "      return false;  " + nl +
                    "   }" + nl +
                    "</script>";
            }
        }

    protected override void OnPreRender(EventArgs e)
    {
        if (this.DetermineRenderUplevel() && this.EnableClientScript)
        {
            Page.ClientScript.RegisterExpandoAttribute(this.ClientID, "evaluationfunction", this.ScriptBlockFunctionName);
            Page.ClientScript.RegisterClientScriptBlock(GetType(), this.ScriptBlockKey, this.ScriptBlock);
        }

        base.OnPreRender(e);
    } 
```

我知道我的 ControlPropertiesValid() 和 EvaluateIsValid() 工作正常。

我很感激在这个问题上的任何帮助。

诺埃尔。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:16:22.183

尝试使用 CustomValidator 而不是 BaseValidator：

[http://msdn.microsoft.com/en-us/library/9eee01cx(VS.71).aspx](http://msdn.microsoft.com/en-us/library/9eee01cx(VS.71).aspx)

并设置 ClientValidationFunction 以确保调用您的 JS：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.clientvalidationfunction.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.clientvalidationfunction.aspx)

# string - 如何使用 XSLT 将字符串转换为大写或小写？

> ID：586231
> 
>         
> 
> 赞同：124
> 
>         
> 
> 时间：2009-02-25T14:43:02.327
> 
>         
> 
> 标签：string, xpath, xslt, case-conversion

如何在 XSL 中进行大小写转换？

```
<xsl:variable name="upper">UPPER CASE</xsl:variable>
<xsl:variable name="lower" select="???"/> 
```

* * *

## 回答 #1

> 赞同：204
> 
>             
> 
> 时间：2009-02-25T14:51:49.670

在 XSLT 1.0 中，`upper-case()`和`lower-case()`函数不可用。如果您使用的是 1.0 样式表，则大小写转换的常用方法是`translate()`：

```
<xsl:variable name="lowercase" select="'abcdefghijklmnopqrstuvwxyz'" />
<xsl:variable name="uppercase" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'" />

<xsl:template match="/">
  <xsl:value-of select="translate(doc, $lowercase, $uppercase)" />
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：47
> 
>             
> 
> 时间：2009-02-25T14:49:43.590

XSLT 2.0 具有`upper-case()`和`lower-case()`功能。对于 XSLT 1.0，您可以使用`translate()`：

```
<xsl:value-of select="translate("xslt", "abcdefghijklmnopqrstuvwxyz", "ABCDEFGHIJKLMNOPQRSTUVWXYZ")" /> 
```

* * *

## 回答 #3

> 赞同：9
> 
>             
> 
> 时间：2013-12-30T11:36:03.903

.NET XSLT 实现允许在样式表中编写自定义托管函数。对于小写（），它可以是：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:utils="urn:myExtension" exclude-result-prefixes="msxsl">

  <xsl:output method="xml" indent="yes"/>

  <msxsl:script implements-prefix="utils" language="C#">
    <![CDATA[
      public string ToLower(string stringValue)
      {
        string result = String.Empty;

        if(!String.IsNullOrEmpty(stringValue))
        {
          result = stringValue.ToLower(); 
        }

        return result;
      }
    ]]>
  </msxsl:script>

  <!-- using of our custom function -->
  <lowercaseValue>
    <xsl:value-of select="utils:ToLower($myParam)"/>
  </lowercaseValue> 
```

假设这可能很慢，但仍然可以接受。

不要忘记为转换启用嵌入式脚本支持：

```
// Create the XsltSettings object with script enabled.
XsltSettings xsltSettings = new XsltSettings(false, true);

XslCompiledTransform xslt = new XslCompiledTransform();

// Load stylesheet
xslt.Load(xsltPath, xsltSettings, new XmlUrlResolver()); 
```

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2014-03-05T20:01:03.547

```
<xsl:variable name="upper">UPPER CASE</xsl:variable>
<xsl:variable name="lower" select="translate($upper,'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz')"/>
<xsl:value-of select ="$lower"/>

//displays UPPER CASE as upper case 
```

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2016-02-26T15:03:38.127

对于 ANSI 字符编码：

```
 translate(//variable, 'ABCDEFGHIJKLMNOPQRSTUVWXYZÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝÞŸŽŠŒ', 'abcdefghijklmnopqrstuvwxyzàáâãäåæçèéêëìíîïðñòóôõöøùúûüýþÿžšœ') 
```

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T14:46:50.897

大写（字符串）和小写（字符串）

# .net - 关于 WPF 中的 3D 效果

> ID：586232
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-25T14:43:08.583
> 
>         
> 
> 标签：.net, wpf, windows, 3d

我正在开发 WPF SW，如果我们在 XAML 文件中进行，我发现 3D 效果非常慢，我想知道是否有一本介绍如何在 WPF 中进行 3D 效果的书？预先感谢。

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-02-25T14:50:23.447

我有两本关于 3D 的 WPF 书籍 - 一本是 Charles Petzolds “Windows 的 3D 编程”，它提供了很好的主题介绍，并且非常实用。第二个是 Jack Xu 的 Practical WPF Graphics Programming，它确实更深入一些，但似乎遵循了几段文本的模式，然后是 3 页代码/XAML，然后是一两张图片。

尽管给出了一般性提示，但我不记得它们都深入介绍过性能。出于兴趣，您的网格有多大？

一般来说，WPF 的 3D 非常适合增强 2D 应用程序，但它并不是真正为全 3D 高性能图形设计的。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T15:01:04.310

我现在正在阅读Jack Xu 的[Practical WPF Graphics Programming](https://rads.stackoverflow.com/amzn/click/com/0979372518)。它有 6 个（共 14 个）关于 3D 的章节。从简单的转换到自定义 3D 形状。它还有关于物理、游戏和图表的章节。

如果您想了解更多关于 WPF 中的 3D 的信息，我可以推荐这本书。

# c# - WCF 中的调用是否同步？

> ID：586235
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-25T14:43:33.747
> 
>         
> 
> 标签：c#, wcf, observer-pattern

我正在使用 WCF 编写一个应用程序，其中客户端订阅服务器，然后将更新推送回客户端。

订阅者使用在服务器上调用 Subscribe() 方法的 DuplexPipeChannel 订阅服务器。

服务器维护一个订阅者列表<>，当有数据要推送给订阅者时，它调用 PushData() 方法。

我的意图是遍历订阅者列表，依次调用每个订阅者的 push 方法。

我想知道的是：在我的订阅服务器上调用 push 方法是否阻塞？连接失败或连接到其中一个订阅者的延迟是否会导致其余的推送调用延迟（或更糟的是失败）？

如果这是一个明显的问题，我很抱歉，但到目前为止，我主要是一个 .Net 2.0 的人，所以我对 WCF 知之甚少。

我的 WCF 代码松散地基于[本教程](http://www.switchonthecode.com/tutorials/wcf-tutorial-events-and-callbacks)。

**另一个问题**
假设它是同步的，我最好生成一个新线程来处理客户端请求，还是为每个“推送服务器端”生成一个新线程更好？

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-02-25T14:48:00.240

WCF 调用默认情况下是同步的，尽管它们可以配置为异步的。请参阅下面的 Jarrett 的回答。看看[这里](http://msdn.microsoft.com/en-us/library/ms734701.aspx)。您发送的每条消息都会收到一个结果，无论您是否真的在期待数据。

该调用将根据您的服务器的功能而阻塞。如果服务器上的 PushData 实际上遍历订阅者列表并向每个订阅者发送一条消息，它会。如果 PushData 仅插入数据而另一个线程处理将数据发送给订阅者，则它只会在您的服务器插入数据并返回时阻塞。

希望这可以帮助。

编辑：关于生成线程客户端与服务器端。服务器端。如果一个客户端调用需要一段时间，那就是一段时间，但如果需要很长时间，因为服务器实际上是在同一个调用中向其他客户端发送调用，那么就有问题了。我实际上不会每次都真正产生一个新线程。只需在您的服务器端创建一个[生产者/消费者](http://en.wikipedia.org/wiki/Producer-consumer_problem)模式，这样每当数据项排队时，消费者就会选择它。地狱，你甚至可以有多个消费者。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-02-25T15:13:04.393

如果您右键单击服务参考，您可以选择创建异步调用。（设置对话框上有一个复选框。）我通常创建异步方法，然后监听结果。虽然需要做更多的工作，但我可以使用异步服务操作编写响应速度更快的应用程序。

# open-source - Crystal Reports 是否有任何开源替代品？

> ID：586239
> 
>         
> 
> 赞同：49
> 
>         
> 
> 时间：2009-02-25T14:43:45.727
> 
>         
> 
> 标签：open-source, crystal-reports

Crystal Reports 是否有任何开源替代品？

* * *

## 回答 #1

> 赞同：8
> 
>             
> 
> 时间：2009-02-25T14:56:41.733

[JasperReports](http://community.jaspersoft.com/project/jasperreports-library)如果您正在编写 Java。

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-05-09T04:47:06.087

java标准答案通常是：

*   JasperReports：http: [//jasperforge.org](http://jasperforge.org)

*   iReport：http: [//ireport.sourceforge.net](http://ireport.sourceforge.net)

*   [打开报告： http](http://oreports.com/) ://oreports.com/

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2009-03-11T00:46:18.040

报告管理器已经存在了好几年。它是用 Delphi 编写的（至少最初是这样的），并且具有可以在 Delphi 中使用的组件，但可以通过几乎任何语言的 ActiveX 或 dll 使用。现在也有一个本机 .NET 库。有一个漂亮的报告服务网络服务器，你也可以设置。设计器 gui 看起来和感觉有点粗糙，但它可以工作。
[http://reportman.sourceforge.net/](http://reportman.sourceforge.net/)

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T14:48:42.767

[BIRT](http://www.eclipse.org/birt/phoenix/)工作得很好。

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2010-08-19T07:31:35.490

**[i-net Clear Reports](http://www.inetsoftware.de/products/crystal-clear)**怎么样（以前是 i-net Crystal-Clear）。

虽然不是免费的，但您也应该考虑这种低成本、非免费、非开源的报告解决方案，它可以与 Crystal Reports 完全竞争 - 并且是基于 Java 的。

我认为它比“免费”更具成本效益。一家小公司可能必须仔细考虑免费的东西，但随后必须投资人力以了解一切如何运作等等。大公司肯定会订阅昂贵的高级支持服务。[请参阅这篇文章以供参考](http://www.inetsoftware.de/support/news/why-i-net-crystal-clear-costs-less-than-open-source)

[i-net Clear Reports](http://www.inetsoftware.de/products/crystal-clear)的价格非常低，免费提供强大的支持，通过年度订阅获得更好的高级支持。

*披露：是的，我为建立这个的公司工作，所以我有偏见。但老实说，我相信我刚刚写的。*

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2012-04-11T14:57:44.440

到目前为止，根据我的研究，JasperSoft 已经成为有前途的开源报告工具……事实上，我目前正在从事一个大型项目，其中我已经开始使用 JasperReports/iReports 转换和构建报告……   

每个报告工具都有自己的学习曲线。Jasper 的支持小组以及我迄今为止得到的响应质量都很好。

归根结底，这一切都归结为您的企业/组织需要什么。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2013-08-31T06:14:53.933

您可以使用碧玉报告。

iReport 是一个非常有效的开发jasper 报表的工具。

它支持水晶报表提供的几乎所有功能，如格式化、分组、创建图表等。

参考教程链接：

[http://www.opentaps.org/docs/index.php/Tutorial_iReports](http://www.opentaps.org/docs/index.php/Tutorial_iReports)

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T14:50:58.797

[iReport](http://ireport.sourceforge.net/cap3.html)

# c# - 如何通过 DataRow 循环检索一组相关列，即（参数名称、参数类型和参数值）？

> ID：586244
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-25T14:46:23.880
> 
>         
> 
> 标签：c#, ado.net, datarow

我正在开发一个通用报告工具，其中每个报告都由数据库中报告表中的一行表示。

报表行结构：

```
ReportID          ReportFileName  
RepParam1Name     RepParam1Type      RepParam1Value 
RepParam2Name     RepParam2Type      RepParam2Value   ... RepParam10 
```

那么，我需要检索报告参数（名称、类型和值）并循环它们以将它们传递给报告吗？

仅供参考：参数类型：日期或字符串。我正在使用嵌入 VS.NET 2005 的 CrystalReport 设计器。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-02-26T17:43:51.667

好的，所以虽然我不知道你到底要去什么，但我只是给你一个我做了什么的例子，你可以接受也可以离开。

给你一些细节。这是连接到 Access 数据库的示例，但与其他类型数据库的连接在连接字符串中是相似的。查找连接字符串以获取正确的语法。

我还有一个名为 currentDataSet 的强类型 DataSet 和一个定义的表，该表的名称和结构与数据库类型相同。还有其他方法可以做到这一点，但我就是这样做的：

```
string conString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + sourceString;
string strSql1 = "SELECT * FROM ReportTable";
OleDbConnection con = new OleDbConnection(conString);
con.Open();
OleDbDataAdapter dAdapter = new OleDbDataAdapter();
dAdapter.SelectCommand = new OleDbCommand(strSql1, con);
dAdapter.Fill(currentDataSet, "ReportTable");
con.Close(); 
```

从那里您可以操作数据集中的数据。这里又是一个例子：

```
int reportTableCount = currentDataSet.ReportTable.Count();
int reportTableCounter = 0;

while (reportTableCounter < reportTableCount)
{
   if (currentDataSet.ReportTable[reportTableCounter].RepParam1Value == "Bad data")
   {
       currentDataSet.ReportTable[reportTableCounter].RepParam1Value = "Good data";
   }
    reportTableCounter = reportTableCounter + 1;
} 
```

从这一点开始，您现在可以使用以下代码更新数据库中的数据：

```
con.Open();
dAdapter.SelectCommand = new OleDbCommand(strSql1, con);
OleDbCommandBuilder objCommandBuilder = new OleDbCommandBuilder(dAdapter);
dAdapter.Update(currentDataSet, "ReportTable");
con.Close(); 
```

就像我说的，如果这些都对你没有帮助，请随意忽略它，你不会伤​​害我的感情 :)

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-09-24T21:36:11.337

当您说循环 a`DataRow`时，您的意思是：

```
DataRow drMyrow = MyTables.Rows[0];

foreach (DataColumn dc in drMyRow)
{
   //do something with the column
} 
```

# java - 用java一次读一页pdf上传流

> ID：586257
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-25T14:49:08.223
> 
>         
> 
> 标签：java, pdf, inputstream, pdfbox

我正在尝试在 j2ee 应用程序中阅读 pdf 文档。

对于网络应用程序，我必须将 pdf 文档存储在磁盘上。为了方便搜索，我想对文档中的文本进行反向索引；如果是 OCR。

使用 PDFbox 库，可以创建一个包含整个 pdf 文件的 pdfDocument 对象。但是，为了保留内存并提高整体性能，我宁愿将文档作为流处理，并一次将一页读入缓冲区。

我想知道是否可以逐页读取包含pdf的文件流，甚至一次读取一行。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-03-02T20:39:15.597

对于给定的通用 pdf 文档，至少使用 PDFBox，您无法知道一页的结束位置和另一页的开始位置。

如果您关心资源的使用，我建议您将 pdf 文档解析为 COSDocument，使用 .getObjects() 从 COSDocument 中提取解析的对象，这将为您提供 java.util.List。这应该很容易适应您拥有的任何稀缺资源。

请注意，您可以通过 PDFBox API 轻松地将已解析的 pdf 文档转换为 Lucene 索引。

此外，在进入优化领域之前，请确保您确实需要它们。PDFBox 能够毫不费力地在内存中表示相当大的 PDF 文档。

要从 InputStream 解析 PDF 文档，请查看[COSDocument](http://pdfbox.apache.org/docs/1.8.4/javadocs/org/apache/pdfbox/cos/COSDocument.html)类

要编写 lucene 索引，请查看[LucenePDFDocument](http://mvnrepository.com/artifact/org.apache.pdfbox/pdfbox-lucene)类

对于 COSDocuments 的内存表示，请查看[FDFDocument](http://pdfbox.apache.org/docs/1.8.4/javadocs/org/apache/pdfbox/pdmodel/fdf/FDFDocument.html)

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2017-07-17T06:59:52.740

在 2.0.* 版本中，像这样打开 PDF：

```
PDDocument doc = PDDocument.load(file, MemoryUsageSetting.setupTempFileOnly()); 
```

这会将缓冲内存使用设置为仅使用没有大小限制的临时文件（无主内存）。

[这是在这里](https://stackoverflow.com/questions/11301818/pdfbox-working-with-very-large-pdfs)回答的。

* * *

## 回答 #3

> 赞同：-1
> 
>             
> 
> 时间：2010-08-19T14:12:23.817

查看[PDF Renderer](https://pdf-renderer.dev.java.net/) Java 库。我自己试过了，它似乎比 PDFBox 快得多。但是，我还没有尝试获取 OCR 文本。

这是从上面的链接复制的示例，该示例显示了如何将 PDF 页面绘制到图像中：

```
 File file = new File("test.pdf");
    RandomAccessFile raf = new RandomAccessFile(file, "r");
    FileChannel channel = raf.getChannel();
    ByteBuffer buf = channel.map(FileChannel.MapMode.READ_ONLY, 0, channel.size());
    PDFFile pdffile = new PDFFile(buf);

    // draw the first page to an image
    PDFPage page = pdffile.getPage(0);

    //get the width and height for the doc at the default zoom 
    Rectangle rect = new Rectangle(0,0,
            (int)page.getBBox().getWidth(),
            (int)page.getBBox().getHeight());

    //generate the image
    Image img = page.getImage(
            rect.width, rect.height, //width & height
            rect, // clip rect
            null, // null for the ImageObserver
            true, // fill background with white
            true  // block until drawing is done
            ); 
```

* * *

## 回答 #4

> 赞同：-2
> 
>             
> 
> 时间：2009-02-25T14:55:36.290

我想您可以逐字节地阅读文件以查找分页符。由于可能存在 PDF 格式问题，逐行比较困难。

# iis - Elevate impersonated credentials to app pool credentials in IIS

> ID：586258
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-02-25T14:49:18.507
> 
>         
> 
> 标签：iis, impersonation, credentials

I am using impersonation in an application in IIS. I need to write a file to the file system, but don't want to use the impersonated user's credentials in this one case. I need to use the credentials of the app pool.

How do I temporarially elevate a worker process' credentials from impersonated credentials to the app pool's credentials?

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-02-25T20:56:43.037

Found the answer after much Googling.

```
using System.Security.Principal;
WindowsImpersonationContext ctx = 
      WindowsIdentity.Impersonate(System.IntPtr.Zero);
//do stuff in app pool's security context
ctx.Undo(); 
```

[http://www.mindsharpblogs.com/todd/archive/2005/05/03/467.aspx](http://www.mindsharpblogs.com/todd/archive/2005/05/03/467.aspx)

# linq-to-xml - XML、LINQ 解析

> ID：586262
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-25T14:50:09.097
> 
>         
> 
> 标签：linq-to-xml

我正在使用 LINQ 修改我的 XML：

```
Dim feedXML As XDocument = XDocument.Parse(m_xmld.OuterXml.ToString())
Dim SortedFields = From field In feedXML.Descendants("fields")
Dim sFieldList = From field In SortedFields.Descendants("field") Order By
                 Integer.Parse(field.@position) 
```

我正在尝试按升序对我的“字段”进行排序。现在我的问题是我希望已排序的字段替换 XML 中未排序的字段列表，以便我可以进一步使用已排序的 XML。

排序后如何检索 XML？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T14:53:20.587

没有“排序后的 XML”的真正概念。如果您*只有*字段元素，则相对容易 - 但如果您有：

```
 <field position="2" />
 <non-field />
 <field position="1" />
 <non-field />
 <field position="0" /> 
```

那么之后的结果应该是什么？

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-10-30T08:44:55.553

我`ReplaceNodes`最后用了这个：

```
x.ReplaceNodes(
    from el in x.Elements()
    orderby (int)el.Element("Index")
    select el                               
); 
```

# php - 当由于备份 exec 已经存在 php 时，在服务器 (iis6) 上安装 php

> ID：586281
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-25T14:53:26.967
> 
>         
> 
> 标签：php, iis-6, windows-server-2003, backupexec

我需要在已经安装了 php 5.2.0.0 的 Windows 2003 服务器上安装或使用 php，因为（我认为）设置 symantec 备份执行程序。我不想干扰备份 exec 的 php.ini 设置——我宁愿能够控制我自己的 php 配置。

搜索php显示php.exe等php文件当前安装在c:\program files\symantec\backup exec\

我几乎可以肯定，将当前版本的 php 5.2.8 安装到 c:\php 在某种程度上会是灾难性的或灾难性的。  

服务器属性 > 环境变量中没有 PHPRC 条目，我很确定 php.exe 位置不包含在 PATH 变量中。...除非实际安装位​​置不同于 c:\program files\symantec\backup exec\ 目录。

关于如何进行的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-02-27T15:51:24.237

> 我几乎可以肯定，将当前版本的 php 5.2.8 安装到 c:\php 在某种程度上会是灾难性的或灾难性的。

是什么让你这么说:) 我在同一台机器上并排运行了不同的 PHP 版本，没有遇到麻烦。

AFAIK Symantec 安装不应与您自己的安装冲突，单独的 php.ini 文件也不应相互冲突。

[回复评论]

首先要注意的是，我没有使用 Backup Exec 或它使用 PHP 的经验。我猜它会将它用于自己的内部内容，并且不会在操作系统上传播。通过在文件系统上搜索 php.ini 和 php DLL 进行测试。我敢打赌，这一切都是自给自足的。PHP 搜索配置文件，如下所述：[PHP Site](http://uk3.php.net/manual/en/configuration.file.php)。正如您所注意到的，BE 没有设置 PHPRC 变量。检查它也没有使用那些注册表项。另一方面，BE 是否已经在 IIS 上安装了管理站点？如果是这样，请检查 IIS Web 服务扩展以确保它尚未注册 PHP ISAPI dll 或 PHP CGI exe。如果不是，我认为您应该可以接受新安装。

为了安全起见，请按照此处的说明进行手动 PHP 安装：[PHP 站点](http://uk3.php.net/manual/en/install.windows.manual.php)。这样，您就可以确切地知道您安装了什么，并且可以在它们引起问题时轻松地再次删除这些文件。我无法想象这里会出现需要您重新安装 BE 的问题。

# visual-studio - 可以从 Visual Studio 打印 4-Up？

> ID：586283
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-25T14:54:05.013
> 
>         
> 
> 标签：visual-studio, printing, add-in

我没有在谷歌上搜索这个问题，所以如果这是一个“谷歌是你的朋友（GIYF）”的问题，我提前道歉。  

我总是双面打印源代码以节省纸张。是否有 VS (2003) 的插件，它允许您在纸张的一侧打印两页，以便我可以在一张纸上打印 4 页？我认为这称为 4-Up 打印。我几乎可以肯定，如果我将打印输出到一个文件然后使用外部实用程序，我可以做到这一点，但我希望能够在 VS 中完成这一切。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-02-25T14:56:24.010

这通常是打印机驱动程序的功能。我在佳能打印机上使用它来打印小册子等。

如果您具有双面打印和多页打印功能，它将位于“打印”对话框的打印机属性中。

要打印页面的两面（双面打印），您需要在打印机上使用双面打印附件或执行旧的偶数/奇数页两次打印。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T15:00:42.130

正如[spoulson](https://stackoverflow.com/users/3347/spoulson)所说，它是打印机的功能，

1.  转到文件->打印

2.  点击“属性...” 按钮

3.  找到一个名为“每张纸页数”的选项（在我当前选择的打印机上，它位于“完成”选项卡上。

4.  将其设置为所需的页数

希望这可以帮助

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T15:04:16.660

如果您想要比打印机驱动程序提供的更多控制，请查看[FinePrint](http://www.fineprint.com/products/fineprint/index.html)。

它作为虚拟打印机工作，可以对打印作业进行各种布局操作。它甚至可以将多个打印作业合二为一。

# java - 用埃拉托色尼筛法寻找素数（原文：有没有更好的方法来准备这个数组？）

> ID：586284
> 
>         
> 
> 赞同：22
> 
>         
> 
> 时间：2009-02-25T14:54:13.983
> 
>         
> 
> 标签：java, arrays, primes, sieve-of-eratosthenes

**注意：**下面的版本 2 使用 Eratosthenes 筛。有几个答案对我最初提出的问题有所帮助。我选择了埃拉托色尼筛法，实施了它，并适当地改变了问题的标题和标签。感谢所有帮助过的人！

## 介绍

我写了这个花哨的小方法，它生成一个包含小于指定上限的素数的 int 数组。它工作得很好，但我有一个担心。

## 方法

```
private static int [] generatePrimes(int max) {
    int [] temp = new int [max];
    temp [0] = 2;
    int index = 1;
    int prime = 1;
    boolean isPrime = false;
    while((prime += 2) <= max) {
        isPrime = true;
        for(int i = 0; i < index; i++) {
            if(prime % temp [i] == 0) {
                isPrime = false;
                break;
            }
        }
        if(isPrime) {
            temp [index++] = prime;
        }
    }
    int [] primes = new int [index];
    while(--index >= 0) {
        primes [index] = temp [index];
    }
    return primes;
} 
```

## 我的顾虑

我担心的是我创建的数组对于该方法将返回的最终元素数量来说太大了。问题是我不知道正确猜测小于指定数字的素数数量的好方法。

## 重点

这就是程序使用数组的方式。这是我想要改进的地方。

1.  我创建了一个足够大的临时数组，可以容纳每个小于限制的数字。

2.  我生成质数，同时计算我生成了多少。

3.  我制作了一个新的数组，它的维数正确，可以只保存素数。

4.  我将每个素数从巨大的数组复制到正确维度的数组中。

5.  我返回仅包含我生成的素数的正确维度的数组。

## 问题

1.  `temp[]`我可以将具有非零元素的整个块（一次）复制
    到`primes[]`
    而不必遍历两个数组并一个一个地复制元素吗？

2.  是否有任何数据结构的行为类似于可以随着元素的添加而增长的基元数组，而不是在实例化时需要维度？与使用基元数组相比，性能损失是多少？

* * *

版本 2（感谢[Jon Skeet](https://stackoverflow.com/users/22656/jon-skeet)）：

```
private static int [] generatePrimes(int max) {
    int [] temp = new int [max];
    temp [0] = 2;
    int index = 1;
    int prime = 1;
    boolean isPrime = false;
    while((prime += 2) <= max) {
        isPrime = true;
        for(int i = 0; i < index; i++) {
            if(prime % temp [i] == 0) {
                isPrime = false;
                break;
            }
        }
        if(isPrime) {
            temp [index++] = prime;
        }
    }
    return Arrays.copyOfRange(temp, 0, index);
} 
```

* * *

版本 3（感谢[Paul Tomblin](https://stackoverflow.com/users/3333/paul-tomblin)）使用[Erastosthenes 筛法](http://en.wikipedia.org/wiki/Sieve%5Fof%5FErastosthenes)：

```
private static int [] generatePrimes(int max) {
    boolean[] isComposite = new boolean[max + 1];
    for (int i = 2; i * i <= max; i++) {
        if (!isComposite [i]) {
            for (int j = i; i * j <= max; j++) {
                isComposite [i*j] = true;
            }
        }
    }
    int numPrimes = 0;
    for (int i = 2; i <= max; i++) {
        if (!isComposite [i]) numPrimes++;
    }
    int [] primes = new int [numPrimes];
    int index = 0;
    for (int i = 2; i <= max; i++) {
        if (!isComposite [i]) primes [index++] = i;
    }
    return primes;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
>             
> 
> 时间：2009-02-25T14:57:58.907

您通过将数组的每个元素与每个可能的因素进行比较来找到素数的方法非常低效。您可以通过一次对整个阵列进行[埃拉托色尼筛法](http://en.wikipedia.org/wiki/Sieve_of_Erastosthenes)来极大地改进它。除了进行更少的比较之外，它还使用加法而不是除法。分工比较慢。

* * *

## 回答 #2

> 赞同：10
> 
>             
> 
> 时间：2009-02-26T02:22:31.147

### `ArrayList<>`埃拉托色尼筛

```
// Return primes less than limit
static ArrayList<Integer> generatePrimes(int limit) {
    final int numPrimes = countPrimesUpperBound(limit);
    ArrayList<Integer> primes = new ArrayList<Integer>(numPrimes);
    boolean [] isComposite    = new boolean [limit];   // all false
    final int sqrtLimit       = (int)Math.sqrt(limit); // floor
    for (int i = 2; i <= sqrtLimit; i++) {
        if (!isComposite [i]) {
            primes.add(i);
            for (int j = i*i; j < limit; j += i) // `j+=i` can overflow
                isComposite [j] = true;
        }
    }
    for (int i = sqrtLimit + 1; i < limit; i++)
        if (!isComposite [i])
            primes.add(i);
    return primes;
} 
```

小于或等于素数上限的公式`max`（参见[wolfram.com](http://mathworld.wolfram.com/PrimeCountingFunction.html)）：

```
static int countPrimesUpperBound(int max) {
    return max > 1 ? (int)(1.25506 * max / Math.log((double)max)) : 0;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
>             
> 
> 时间：2009-02-25T14:58:52.100

创建一个`ArrayList<Integer>`，然后`int[]`在最后转换为一个。

周围有各种第 3 方`IntList`（等）类，但除非你*真的*担心拳击几个整数的命中，否则我不会担心。

不过，您可以使用它`Arrays.copyOf`来创建新数组。您可能还想在每次需要时通过将大小翻倍来调整大小，然后在最后进行修剪。那基本上是在模仿这种`ArrayList`行为。

* * *

## 回答 #4

> 赞同：7
> 
>             
> 
> 时间：2013-12-22T13:57:48.740

使用埃拉托色尼筛法的算法

```
public static List<Integer> findPrimes(int limit) {

    List<Integer> list = new ArrayList<>();

    boolean [] isComposite = new boolean [limit + 1]; // limit + 1 because we won't use '0'th index of the array
    isComposite[1] = true;

    // Mark all composite numbers
    for (int i = 2; i <= limit; i++) {
        if (!isComposite[i]) {
            // 'i' is a prime number
            list.add(i);
            int multiple = 2;
            while (i * multiple <= limit) {
                isComposite [i * multiple] = true;
                multiple++;
            }
        }
    }

    return list;
} 
```

描述上述算法的图像（灰色单元格表示素数。由于我们最初将所有数字视为素数，因此整个网格最初是灰色的。）

![在此处输入图像描述](https://i.stack.imgur.com/4updn.gif)    

图片来源：[维基媒体](http://upload.wikimedia.org/wikipedia/commons/b/b9/Sieve_of_Eratosthenes_animation.gif)

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T14:58:38.827

最简单的解决方案是返回[Collections Framework](http://java.sun.com/docs/books/tutorial/collections/index.html)的一些成员而不是数组。

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T15:00:54.983

您使用的是 Java 1.5 吗？为什么不退货`List<Integer>`和使用`ArrayList<Integer>`？如果您确实需要返回一个`int[]`，您可以通过`int[]`在处理结束时将 List 转换为来实现。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T15:06:22.910

正如 Paul Tomblin 所指出的，有更好的算法。

但是保持你所拥有的，并假设每个结果的对象太大：

您只会追加到数组中。因此，请使用相对较小的 int[] 数组。当它完全使用时，将其附加到列表并创建一个替换。最后将其复制到正确大小的数组中。

或者，猜测 int[] 数组的大小。如果它太小，用一个大小比当前数组大小大一点的 int[] 替换。这样做的性能开销将与大小成正比。（这在最近的 stackoverflow 播客中进行了简要讨论。）

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T15:13:05.953

现在你已经有了一个基本的筛子，注意内循环只需要 continue until `temp[i]*temp[i] > prime`。

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2015-03-01T12:16:32.630

我有一个非常有效的实现：

1.  我们不保留偶数，因此将内存使用量减半。

2.  我们使用`BitSet`，每个数字只需要一位。

3.  我们估计了区间上素数的上限，因此我们可以`initialCapacity`适当地设置数组的 。

4.  我们不在循环中执行任何类型的除法。

这是代码：

```
public ArrayList<Integer> sieve(int n) {
    int upperBound = (int) (1.25506 * n / Math.log(n));
    ArrayList<Integer> result = new ArrayList<Integer>(upperBound);
    if (n >= 2)
        result.add(2);

    int size = (n - 1) / 2;
    BitSet bs = new BitSet(size);

    int i = 0;
    while (i < size) {
        int p = 3 + 2 * i;
        result.add(p);

        for (int j = i + p; j < size; j += p)
            bs.set(j);

        i = bs.nextClearBit(i + 1);
    }

    return result;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:00:20.240

重构你的代码。丢弃临时数组，而是编写仅对整数进行素数测试的函数。它会相当快，因为​​您只使用本机类型。然后，例如，您可以循环并构建一个素数整数列表，然后最终将其转换为要返回的数组。

* * *

## 回答 #11

> 赞同：0
> 
>             
> 
> 时间：2017-08-15T14:40:54.967

不确定这是否适合您的情况，但您可以看看我的方法。我用[的是埃拉托色尼筛](http://www.javawithus.com/programs/sieve-of-eratosthenes)。

```
 public static List<Integer> sieves(int n) {
        Map<Integer,Boolean> numbers = new LinkedHashMap<>();

        List<Integer> primes = new ArrayList<>();

        //First generate a list of integers from 2 to 30
        for(int i=2; i<n;i++){
            numbers.put(i,true);
        }

        for(int i : numbers.keySet()){
            /**
             * The first number in the list is 2; cross out every 2nd number in the list after 2 by 
             * counting up from 2 in increments of 2 (these will be all the multiples of 2 in the list):
             * 
             * The next number in the list after 2 is 3; cross out every 3rd number in the list after 3 by 
             * counting up from 3 in increments of 3 (these will be all the multiples of 3 in the list):
             * The next number not yet crossed out in the list after 5 is 7; the next step would be to cross out every
             * 7th number in the list after 7, but they are all already crossed out at this point,
             * as these numbers (14, 21, 28) are also multiples of smaller primes because 7 × 7 is greater than 30\. 
             * The numbers not crossed out at this point in the list are all the prime numbers below 30:
             */
            if(numbers.get(i)){
                for(int j = i+i; j<n; j+=i) {
                    numbers.put(j,false);
                }
            }
        }

        for(int i : numbers.keySet()){
            for(int j = i+i; j<n && numbers.get(i); j+=i) {
                numbers.put(j,false);
            }
        }

        for(int i : numbers.keySet()){
           if(numbers.get(i)) {
               primes.add(i);
           }
        }
        return primes;
    } 
```

为维基百科中说明的每个步骤添加了注释

* * *

## 回答 #12

> 赞同：0
> 
>             
> 
> 时间：2018-02-24T10:14:41.387

我已经使用 HashMap 并发现它非常简单

```
import java.util.HashMap;
import java.util.Map;

/*Using Algorithms such as sieve of Eratosthanas */

public class PrimeNumber {

    public static void main(String[] args) {

        int prime = 15;
        HashMap<Integer, Integer> hashMap = new HashMap<Integer, Integer>();

        hashMap.put(0, 0);
        hashMap.put(1, 0);
        for (int i = 2; i <= prime; i++) {

            hashMap.put(i, 1);// Assuming all numbers are prime
        }

        printPrimeNumberEratoshanas(hashMap, prime);

    }

    private static void printPrimeNumberEratoshanas(HashMap<Integer, Integer> hashMap, int prime) {

        System.out.println("Printing prime numbers upto" + prime + ".....");
        for (Map.Entry<Integer, Integer> entry : hashMap.entrySet()) {
            if (entry.getValue().equals(1)) {
                System.out.println(entry.getKey());
                for (int j = entry.getKey(); j < prime; j++) {
                    for (int k = j; k * j <= prime; k++) {
                        hashMap.put(j * k, 0);
                    }
                }

            }
        }

    }

} 
```

觉得这个很有效

* * *

## 回答 #13

> 赞同：0
> 
>             
> 
> 时间：2019-04-22T21:01:43.897

```
public static void primes(int n) {
        boolean[] lista = new boolean[n+1];
        for (int i=2;i<lista.length;i++) {
            if (lista[i]==false) {
                System.out.print(i + " ");
            }
            for (int j=i+i;j<lista.length;j+=i) {
                lista[j]=true;
            }
        }
    } 
```

# ie-developer-tools - Internet Explorer 8 - 开发人员工具和框架集

> ID：586285
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-25T14:54:45.340
> 
>         
> 
> 标签：ie-developer-tools

MS***不能***削弱 IE 工具栏。我一定做错了什么。

如何使用 IE8 开发者工具浏览框架集网站的 DOM/CSS/JS？

* * *

我开发了一个网站，它使用框架集来实现类似 AJAX 的效果（它早于 AJAX！） -

现在它在IE8中开发了一个小css故障，但我无法通过IE8开发工具进行调查......

我最初使用 IE 开发人员工具栏来构建网站 - 现在我感到失望。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:04:15.520

按 F12 调出 IE8 中内置的 MS 版本的 FireBug。（菜单：工具 | 开发人员工具。）

# asp.net - 为什么我无法访问 jQuery 返回的对象的任何属性？

> ID：586288
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-25T14:55:20.987
> 
>         
> 
> 标签：asp.net, jquery

我有以下 javascript：

```
$(document).ready(function() {
    $('#<%= DropDownList1.ClientID %>').change(function() {
        $('#<%= TextBox1.ClientID %>').disabled = $('#<%= DropDownList1.ClientID %>').selectedIndex != 1;
    });
}); 
```

当我更改下拉列表的索引时，没有任何反应。我试图用以下代码替换代码：

```
$(document).ready(function() {
    $('#<%= DropDownList1.ClientID %>').change(function() {
        alert($('#<%= DropDownList1.ClientID %>').id);                    
    });
}); 
```

这会生成一个提示“未定义”的警报。如果我删除 .id 部分，我会收到一条警报，上面写着 [object Object]，所以我猜它有什么东西。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-02-25T15:07:15.687

在 jQuery 中要实现的一个关键是 $(selector) 返回的是一个 jQuery 对象，而不是 DOM 对象。如果要从 jQuery 对象中获取选择框的值，可以使用 val() 函数，如下所示：

```
$("#element").val(); 
```

如果你想从 jQuery 对象中访问 dom 元素，那也很容易。您可以使用以下内容：

```
$("#element")[0]; // equivalent to $("#element").get(0) 
```

那应该可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T15:27:54.637

```
$(document).ready(function()
{
    $('#<%= DropDownList1.ClientID %>').change(function()
    {
        // replace 'your value' with the value of dropdown selectedIndex 1
        if ($('#<%= DropDownList1.ClientID %>').val() == 'your value')
            $('#<%= TextBox1.ClientID %>').removeAttr('disabled');
        else
            $('#<%= TextBox1.ClientID %>').attr('disabled', 'disabled');
    });
}); 
```

# c++ - 我想隐藏从 system() 发出的系统命令

> ID：586290
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-02-25T14:55:36.900
> 
>         
> 
> 标签：c++, system

用 c++ 编写程序，我想从 system() 函数发出系统命令，但我不希望用户在可执行窗口中看到命令（因为命令包含密码）。我需要将用户目录中的文件复制到服务器上，而不允许用户访问服务器或显示密码。认为拥有执行此操作的 .exe 是最简单的方法。

前任：

system("FILETRANSFER_SW.exe -pw helloWORLD11!@ C:/temp.txt F:/tempfolder/")

但可执行窗口显示此命令，因此无法达到隐藏密码的目的。

我尝试在程序开头发出 system("@echo OFF") 但这不会抑制以下命令，它们仍然显示在可执行窗口中。

有什么建议么？

谢谢...

* * *

## 回答 #1

> 赞同：8
> 
>             
> 
> 时间：2009-02-25T15:01:52.873

在大多数操作系统中，运行进程的命令行被视为公共信息。

因此，在命令行上传递密码是一个非常糟糕的主意。

这个问题有两种常见的解决方法，这两种方法都需要被调用的可执行文件的支持：

*   而不是在命令行上传递用户名/密码，而是传递包含用户名/密码的文件的名称

*   从被调用的可执行文件中重新设置正在运行的进程的命令行。

第一个解决方案简单且普遍可行，第二个解决方案有竞争条件并且更难实现，因为没有跨平台的方法来做到这一点（在某些操作系统上，更改 argv 会有所帮助）。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T15:08:13.467

我从您的命令行假设您使用的是 Windows。如果它不需要可移植，我建议您使用[CreateProcess()](http://msdn.microsoft.com/en-us/library/ms682425.aspx) API 而不是调用 system()。

CreateProcess() API 可以使用命令行，您可以设置 STARTUP_INFORMATION 参数来隐藏新的进程窗口 (wShowWindow = SW_HIDE)。

命令行将对临时用户隐藏，但正如其他人指出的那样，检索起来并不难。由于您正在创建一个新进程，我建议将敏感数据写入该进程的标准输入。这样，该过程就可以读取它并正常进行。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T23:59:52.177

Another solution is to send the password between your programs, encrypted with something like 3DES, or AES.

You could use a [pipe](http://msdn.microsoft.com/en-us/library/aa365590(VS.85).aspx) to comunicate between both programs, and don't use the command line at all.

But any of this schemes is not really secure they can be circumvent rather easily. If you want more security you should use some kind of challenge-response protocol with the server.

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:11:46.627

使用 CreateProcess() API 将对用户隐藏敏感数据，但高级用户可以使用免费实用程序轻松获取与进程关联的命令行，例如 Process Explorer

# linq-to-sql - 为什么我的 SubmitChanges() 不能在 LINQ-to-SQL 中工作？

> ID：586291
> 
>         
> 
> 赞同：8
> 
>         
> 
> 时间：2009-02-25T14:55:57.960
> 
>         
> 
> 标签：linq-to-sql

我在我的 WPF 应用程序中创建了一个 .MDF 数据库。

然后我生成了 LINQ-to-SQL 类并使用 LINQ 获得了所有客户。

然后我遍历他们并更改他们的每个姓氏。

但是，当我调用 SubmitChanges 时，**数据库保持不变**。

我认为这是 SubmitChanges() 的目的，将更改提交到数据库？

我错过了什么，如何将更改“提交”回我的数据库？

```
public Window1()
{
    InitializeComponent();

    Main2DataContext _db = new Main2DataContext();
    var customers = from c in _db.Customers
                    select c;

    foreach (var customer in customers)
    {
        customer.LastName = "CHANGED lastname"; //ListBox shows changes 
    }

    _db.SubmitChanges(); //does NOT save to database (???)

} 
```

* * *

## 回答 #1

> 赞同：15
> 
>             
> 
> 时间：2009-02-25T15:01:12.813

我想我知道问题是什么。您使用的是本地 .mdf 文件吗？如果是这种情况，请检查您的 bin/debug 文件夹。我敢打赌，您那里有一个包含更改的数据库。我认为您的项目中有一个 .mdf 文件，每次构建时都会将其复制到 bin/debug 文件夹中。因此，更改将保存到副本中，并且您没有看到它反映在直接驻留在项目中的副本中。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T15:14:20.147

确保您的 _db 在检索和更改之间的任何时候都没有重置为新的上下文，如果很好，那就是问题所在。您还可以通过执行来简化数据源的分配`TheListBox.ItemsSource = _db.Customers;`。我在当前代码中有很多地方都在做你所描述的事情，并且这些变化传播得很好。另一个建议，在您的上下文中设置日志记录（将 设置`_db.Log`为某个编写器，我通常使用 ，`Console.Out`以便在调试时观察输出窗口中的更改），这样您就可以看到调用时实际发生的更改`SubmitChanges()`。

# c - 使用 Win32 API 的平滑动画 - 无需控制消息泵

> ID：586292
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-25T14:56:08.177
> 
>         
> 
> 标签：c, winapi, graphics, animation

我目前正在尝试以外部插件的形式将我的一些动画绘制代码集成到第三方应用程序中。

这个基于 OpenGL 的实时 3d 动画代码，应该尽可能快地渲染，通常每秒 60 帧。

在我的基础应用程序中，我是世界之王，我控制应用程序消息泵，以便尽可能进行绘制。像那样 ：

```
for (;;)
{
  if (PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))
  {
    do
    {
      if (msg.message == WM_QUIT) break;
      TranslateMessage(&msg);
      DispatchMessage(&msg);
    } 
    while (PeekMessage(&msg, NULL, 0, 0, PM_REMOVE));
  }

  draw();
} 
```

现在我不再是世界上的王者，我必须很好地处理应用程序消息，以便它保持响应。据我所知，由于我是一个插件，我无法劫持整个应用程序消息泵；所以我尝试了各种方法，在`WM_PAINT`消息处理程序中进行绘图：

*   使用`WM_TIMER`，不起作用：我事先不知道我需要哪个时间步长（通常不固定）以及时间不准确。
    *   一旦我完成绘图就调用`InvalidateRect`，不起作用：完全阻止应用程序的其余部分响应并进行自己的刷新。
    *   创建一个“工作者”线程，其唯一工作是将用户消息发布到插件窗口。此消息在绘图完成后立即发布（由事件发出信号）。反过来，用户消息处理程序会调用`InvalidateRect`（参见[此处](http://www.medsch.wisc.edu/~milenkvc/pdf/thread2.htm "那里")）。

    到目前为止，我的最后一次尝试是更好的，有时工作正常。

    ```
    DWORD WINAPI PaintCommandThreadProc(LPVOID lpParameter)
    {
      Plugin* plugin = static_cast<Plugin*>(lpParameter);
      HANDLE updateEvent = plugin->updateEvent();

      while (updateEvent == plugin->updateEvent())
      {
        ::WaitForSingleObject(updateEvent, 100);
        ::Sleep(0);
        if (updateEvent == plugin->updateEvent())
        {
          ::PostMessage(plugin->hwnd(), WM_USER+0x10, 0, 0);
        }
      }
      return 0;
    }

    ...

    LRESULT CALLBACK PluginWinProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam)
    {
      bool processDefault = true;
      LRESULT result = 0;

      Plugin* plugin = reinterpret_cast<Plugin*>( GetWindowLong(hWnd, GWL_USERDATA) );

      switch (msg) {
        ...
        case WM_GL_MESSAGE:
          {
            ::InvalidateRect( hWnd, NULL, FALSE );
            processDefault = false;
            result = TRUE;
          }
          break;

        case WM_PAINT:
          {
            draw(hWnd);
            ::SetEvent( plugin->updateEvent() );
            processDefault = false;
            result = TRUE;
          }
          break;
        ...
      }

      if (processDefault && plugin && plugin->m_wndOldProc)
        result = ::CallWindowProc(plugin->m_wndOldProc, hWnd, msg, wParam, lParam);

      return result;
    } 
    ```

    在某些情况下，主机应用程序似乎仍然会丢失消息。问题的主要特征是我必须按“Alt”键才能显示模式对话框；而且我必须移动鼠标以给主机应用程序一些处理时间！......

    对于这种尽可能经常的动画重绘问题是否有任何“行业标准”解决方案？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T15:45:15.377

每个线程都有自己的消息队列，发送到窗口的消息到达创建窗口的线程的队列中。如果您自己创建插件窗口，您可以在单独的线程中创建它，这样您就可以完全控制它的消息泵。

另一种解决方案（恕我直言更好）是仅在单独的线程中进行 OpenGL 渲染。所有 OpenGL 调用必须发生在创建 OpenGL 上下文的线程中。但是，您可以在一个线程（您的应用程序主线程）中创建一个窗口，但在另一个线程中创建 OpenGL 上下文。这样，原始应用程序消息泵保持不变，并且在您的渲染线程中，您可以永远循环进行渲染（调用 SwapBuffers 到 vsync）。

第二种解决方案的主要问题是插件 WindowProc 和渲染循环之间的通信必须考虑线程（即在访问共享内存时使用锁）。然而，由于消息泵与渲染是分开的，它可以是同时的，并且您的消息处理尽可能地响应。

# wcf - 我可以在 IIS7 站点的根“/”应用程序中使用 NetMsmqBinding 托管 WCF 服务吗？

> ID：586294
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-02-25T14:56:25.103
> 
>         
> 
> 标签：wcf, iis, iis-7, msmq, was

我使用 NetMsmqBinding 创建了一个 WCF 服务，并使用 Windows 激活服务 (WAS) 在 IIS7 中托管它。  

**当前（完美运行）：**

托管在 IIS 中：`http://localhost/MyService/MyService.svc`

使用服务端点地址：`http://localhost/private/MyService/MyService.svc`

以及对应的队列：`.\private$\MyService/MyService.svc`

**期望（什么都不做，甚至没有错误消息）：**

托管在 IIS 中：`http://localhost/MyService.svc`

使用服务端点地址：`http://localhost/private/MyService.svc`

以及对应的队列：`.\private$\MyService.svc`

当我使用 MyService IIS 应用程序时，一切正常。但是当我尝试使用根“/”应用程序而不是“MyService”应用程序来托管服务时，相同的设置（代码、IIS 安全性、队列安全性等）没有任何作用。我在事件日志中没有收到任何错误。传入的消息只是坐在队列中。

IIS7 站点的根应用程序是否支持托管 WAS 激活的服务？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-03-19T19:35:11.440

我发现了一个错误，即在根目录中托管 WCF 服务（在电话上花费大量时间与 MSFT 支持），因此将它们托管在应用程序中。

例如，我在 IIS7 中托管了一个 netMsmqBinding 服务，它针对 WAS 进行了配置，并且托管在默认站点中：

[http://mymachine/msmqtest/service.svc](http://mymachine/msmqtest/service.svc)

需要调用 MSMQ 的队列名称：

“msmqtest/service.svc”

并且配置中的端点需要是：

net.msmq://mymachine/private/msmqtest/service.svc

此外，请确保您在配置中使用机器名称，而不是主机头名称或其他名称。MSMQ 在计算机之间工作，非常重要。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-03-05T22:57:06.630

Hosting of WAS Activated Services do work rooted.  I'm not 100% sure about the netMsmqBinding.  the end point would need to be [http://localhost/service.svc](http://localhost/service.svc) not /private though.

# wcf - 来自实体框架的 WCF 合同？

> ID：586297
> 
>         
> 
> 赞同：10
> 
>         
> 
> 时间：2009-02-25T14:56:43.120
> 
>         
> 
> 标签：wcf, entity-framework

在这个问题上，我一直想出很多死胡同。据称，.NET 3.5 SP1 支持 WCF 合同中的 ADO.NET Entity Framework 实体。但是当我寻找关于它的可靠信息时，我并没有得到很多答案。我在 MSDN 线程上找到了这个片段。有人对这个有经验么？[DataContract] 发生了什么？这就是它的全部吗？为什么这方面的资料这么少？

这是来自微软的 Tim Mallalieu 的回答。

默认情况下，在实体框架中生成的实体类型是数据协定。如果我要在实体设计器中创建一个简单的模型，如下所示： 购物车实体类型默认是 DataContract，所有属性都注释为数据成员。然后我们可以在 WCF 服务中使用它，如下所示：

```
[ServiceContract]

public interface IService1

{
    [OperationContract]
    Cart[] AllCarts();
}

public class Service1 : IService1

{
    public Cart[] AllCarts() 

    {
        using (MSPetShop4Entities context = new MSPetShop4Entities())

        {
            var carts = from c in context.Carts select c;
            return carts.ToArray();
        }
    }
} 
```

由于实体是 DataContract，您现在可以根据需要滚动您的服务并通过网络发送这些服务。

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-02-25T15:20:34.360

我建议您不要直接返回实体。不幸的是，Microsoft 选择将特定于实现的数据作为实体的 DataContract 的一部分。这不会与其他平台互操作，并且即使在 .NET 版本之间也可能无法互操作。

相反，我建议您遵循数据传输对象模式，只返回作为实体中数据副本的 POCO 类，没有任何行为。您可以返回此类类的列表以表示表格等。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-02-25T18:25:32.387

“共享接口而不是类型”的原则假设您不拥有线路的两端和/或您正在编写面向公众的 Web 服务。WCF 可以在绝对**不是**这种情况的情况下使用（并且被使用）。许多企业 n 层体系结构都有一个 WCF 前端的应用程序层，以促进负载平衡等。在这些情况下，共享类型是完全有效的，事实上，这是需要的。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T18:29:55.353

您可以使用简单的方法并使用[ADO.NET 数据服务](http://codebetter.com/blogs/david.hayden/archive/2008/01/08/getting-started-with-ado-net-data-services.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-02-26T02:16:10.227

回应评论的更多细节：

EF 生成的类有几个问题。我现在正在查看带有 SalesOrderHeader 和 SalesOrderDetail 的 AdventureWorks 示例。SalesOrderDetail 实体同时具有“SalesOrderHeader”和“SalesOrderHeaderReference”属性，均标记为 DataMembers。这看起来像一个错误，因为“SalesOrderHeader”属性也被标记为 [XmlIgnore] 和 [SoapIgnore]。

另外，首先考虑是否要将链接序列化回父 SalesOrderHeader。此外，究竟应该序列化什么？SOAP 不支持以可互操作的方式引用。

最后，实体的基类也是数据契约。*然而，它们与您返回的数据*无关——它们纯粹是一个实现工件。

简而言之，微软搞砸了这一点。他们没有考虑清楚。

关于生成 DTO 类的方法，我建议研究各种代码生成工具，例如 CodeSmith。您可以自己编写代码来执行此操作；我在以前的职位上也是这样做的。生成 DTO 的好处是您还可以生成与 DTO 相互转换的方法。

至于开销，与通过网络发送数据所需的时间相比，在内存中移动一些数据的开销是微不足道的！

# php - 如何使用 PHP 替换 PDF 文档中的出站链接 URL

> ID：586300
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-25T14:57:30.187
> 
>         
> 
> 标签：php, pdf

我有一个带有一些外部链接的 PDF 文档。

我想解析文档，替换链接的目的地，然后关闭（并提供）PDF文档，全部使用PHP

我知道我可以使用 PDFLib 做到这一点，但我不想承担这笔费用。

我可以使用 FPDF 或 DomPDF 重新编写文档，但其中一些 PDF 非常复杂，因此这将是一项重大的时间投资。

当然必须有一种方法可以使用原生 PHP 直接对 PDF 文档执行此操作？

TIA

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T16:05:16.310

我认为 PHP 没有文本/超链接更改器类。最接近的产品，比如[pdftk](http://www.accesspdf.com/pdftk/)，只做更高级的事情，比如合并、拆分和应用水印。

更改 pdf 比生成它要困难得多，因此您需要使用像[Nitro PDF](http://www.nitropdf.com/professional/edit-pdf.htm)（未经测试）这样的 pdf 编辑器，或者为什么不使用 Acrobat/Illustrator/InDesign。

如果您必须使用 PHP，使用免费类之一重新生成 PDF:s 似乎是您的最佳选择。我非常喜欢 FPDF，它得到了我的推荐。如果您决定使用它，也请查看[FPDI](http://www.setasign.de/products/pdf-php-solutions/fpdi/)，它可以使用现有的 PDF 文件作为模板，也许它会对您有所帮助。祝你好运！

# asp.net - 标签文本属性和实体

> ID：586304
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-25T14:58:10.793
> 
>         
> 
> 标签：asp.net

以下asp标签无法在浏览器中显示，有人可以告诉我我做错了什么。我希望看到价值`<abc>`，但我什么也没得到。

```
<asp:Label ID="Label1" runat="server" Text="&lt;abc&gt;"></asp:Label> 
```

顺便说一句，我意识到我可以通过以下方式完成同样的事情：

```
<asp:label id="Message1" runat="server"> &lt;abc&gt; </asp:Label> 
```

但这并不是我真正想要的，我想知道的是是否**`"&lt;abc&gt;"`**允许在 asp 元素的属性值中使用字符串。换句话说，这是一个 ASP.Net 错误还是这种行为是设计使然，如果是设计使然，那么这种设计的原因是什么？

非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-02-25T15:05:56.953

信不信由你，但您可以包含实体而不转义它们，因此：

```
<asp:Label runat="server" ID="myLabel" Text="<abc>" /> 
```

这将呈现一个 <abc> 标签。

**编辑：**好的，抱歉，您当然要显示括号，而不是制作标签。在 Text 属性中使用实体引用将给出相同的结果 - （不可见） <abc> 标签 - 因为它们在标签在服务器端解析。你必须做的是：

```
<asp:Label runat="server" ID="myLabel" Text="&amp;lt;abc&amp;gt;" /> 
```

这将给出预期的结果 - **&** 实体引用将向客户端呈现一个＆符号。其次是**lt;** ，结果是正确的客户端实体引用 ( **<** )。这将呈现为**<**。

明确回答您的问题：是的，在 ASP.NET 属性中使用实体引用（显然）是可以的，因为它是一种 XML 格式。这并不是微软真正的“决定”（当然也不是错误）——我只是 XML。

诀窍在于何时解析实体引用（当在服务器上解析标签时），以及生成的文本是什么，这就是将发送给客户端的内容。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:09:48.283

是的，当然是允许的。标签控件的目的是向客户端显示文本和标记。我认为它真的很有用。注入代码是你的责任。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:22:42.340

asp.net aspx 解析器将取消转义“<” 和“>” 到“<”和“>”。它将生成类似以下方法的内容：

```
[DebuggerNonUserCode]
private Label __BuildControlLabel1()
{
  Label __ctrl = new Label();
  base.Label1 = __ctrl;
  __ctrl.ApplyStyleSheetSkin(this);
  __ctrl.ID = "Label1";
  __ctrl.Text = "<abc>";
  return __ctrl;
} 
```

如果您想将它写在文本属性中，您可以像“&lt;”一样进行双重转义，但就像您提到的那样，将它写在开始和结束标签之间可能更容易。

```
<asp:Label ...>&lt;abc&gt;</asp:Label>. 
```

# jquery - 如何触发 JQuery 中的更改？

> ID：586313
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-25T14:59:52.037
> 
>         
> 
> 标签：jquery

我是 JQuery 的新手，所以这可能是一个非常愚蠢的问题。

我使用 JQuery 使表格中的元素可拖动。我问[了一个](https://stackoverflow.com/questions/552951/how-can-i-make-my-jquery-draggable-droppable-code-faster)关于如何让它更快的问题，到目前为止我得到的最好的回应是禁用所有单元格的 droppable，并且只有在拖动某些东西时才启用它们。

实际上，对我来说，这很有意义，因为我只想能够将一个单元格拖到同一行中的另一个单元格上。所以我只需要将 droppable 应用于同一行中的单元格。所以，我这样做：

```
$(document).ready
(
  function()
  {
    $('.draggable_div').draggable
    (
      {
        addClasses: false,
        scroll: false,
        axis: 'x',
        start: function(event, ui)
        {
          $(this).css('background-color','#ddddff');
          var $cells = $(this).parent().parent().children();
          $cells.addClass("droppable_td");
        }
      }
    );

... 
```

Firebug 告诉我，我已成功将“draggable_td”类添加到右行的单元格中。但是我该如何触发改变呢？我现在设置代码的方式，droppable 是这样附加的：

```
 $('.droppable_td').droppable
  (
    {
      addClasses: false,
      over: function(event, ui)
      {
        $(this).css('background-color', '#ccffcc');
      },
      out: function(event, ui)
      {
        $(this).css('background-color', null);
      },
      drop: function(event, ui)
      {

etc... 
```

我知道代码可以工作，因为如果我将该类放在 HTML 中适当的 < td> 元素中，它就可以正常工作（只是非常缓慢）。

换句话说：如果我从一开始就让所有单元格都可以删除，那么它就可以工作。如何动态更改单元格以使其因事件而可丢弃？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T15:02:39.860

设置哪些单元格在您的可拖动的开始事件中是可放置的。

```
start: function(event, ui)
{
  $(this).css('background-color','#ddddff');
  var $cells = $(this).parent().parent().children();
  $cells.addClass("droppable_td");
  $cells.droppable({...});
} 
```

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T15:11:39.747

我认为当您调用 droppable() 时，您使单元格可放置，因此您需要在拖动处理程序函数中调用 droppable。

例如

```
 start: function(event, ui)
    {
      $(this).css('background-color','#ddddff');
      var $cells = $(this).parent().parent().children();
      $cells.addClass("droppable_td");
      $('.droppable_td').droppable
      (
        {
          addClasses: false,
          over: function(event, ui)
         {
           $(this).css('background-color', '#ccffcc'); 
```

等等

不过，我建议将所有这些都变成一个函数。

# asp.net - ASP.NET 1.1 Web 服务和 jQuery

> ID：586327
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-02-25T15:01:54.433
> 
>         
> 
> 标签：asp.net, jquery, web-services

我一直在寻找使用 jQuery 调用 1.1 Web 服务的示例。我想调用一个网络服务并向它传递一些参数。

有人可以指出我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T15:14:03.017

如果没有关于 Web 服务的更多详细信息，一般的答案是“[使用 AJAX 调用](http://docs.jquery.com/Ajax/jQuery.ajax#options)”。下面的示例以 JSON 格式发送数据，并取回 JSON 数据。

```
$.ajax({
  type: "POST",
  url: "theWebServiceURL",
  data: {'key1':'value1','key2':'value2'},
  dataType: /* depends on the return of the web service */,
  success: function(data) { /* do stuff here */ };
}); 
```

如果您需要发送数据，有时在发送数据时会有一些特殊性。

更新：鉴于约翰桑德的帖子，我想我会扩展最后一句话。ASP.NET v1.1 接受（默认情况下）HTTP GET、HTTP POST 或 HTTP SOAP。设置一个特定的 Web 服务接受什么基本上决定了整个 AJAX 请求必须如何发送到 Web 服务。使用 jQuery，您主要是去 HTTP GET 或 HTTP POST。（除非您喜欢并设置`processData: false`。然后您创建并发送您的 SOAP 格式（XML）数据并将 content-type 设置为`text/xml`，但我从未这样做过，所以我不确定细节。）

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2010-03-05T15:26:15.817

只是跟进这一点，以防其他人将来需要它。我能够通过使用 ajax 方法和 POST 来调用 1.1 Web 服务：

```
$.ajax({
type: "POST",
url: 'PathToYourService.asmx/FunctionName',
data: 'foo1=value1&foo2=value&foo3=value',
dataType: "xml",
success: function(xml) {
    //do something with your data
} 
```

});

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:17:31.730

我不相信 .NET 1.1 Web 服务支持 JSON。那是 2002 年或 2003 年左右的东西。您必须使用 SOAP，或者升级，最好升级到 .NET 3.5 SP1（当前版本）。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:21:01.253

这是一个可靠的集合，可以帮助您入门：

*   具体的 ASP 示例，请参见[使用 jQuery 直接调用 ASP.NET AJAX 页面方法](http://encosia.com/2008/05/29/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

*   有关可以进行调用的各种方式的详细信息，请查看[jQuery AJAX 文档](http://docs.jquery.com/Ajax)。

*   要监控您的呼叫和响应，请考虑使用类似[Firebug for Firefox](http://www.getfirebug.com/)

您还想查看[3 个在使用 jQuery 和 ASP.NET AJAX 时要避免的错误](http://encosia.com/2008/06/05/3-mistakes-to-avoid-when-using-jquery-with-aspnet-ajax/)

祝你好运！米

# .net - .Net MDI 表单中的 ArrangeIcons 有什么用

> ID：586336
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-25T15:03:22.480
> 
>         
> 
> 标签：.net, winforms, mdi

MdiLayout 枚举有一个名为 ArrangeIcons 的值。如果这被发送到 MDI 父窗体的 LayoutMdi 方法，则“所有 MDI 子图标都排列在 MDI 父窗体的客户区域内。”

当我尝试将示例 MDI 表单放在一起并将此值传递给 LayoutMdi 时，似乎没有发生任何事情。

什么是 MDI 子图标以及 ArrangeIcons 的值是什么？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T15:12:42.223

当子窗口在父窗体中最小化时，您会看到 MDI 子图标...获得类似于 Windows 3.x 的最小化方法，图标出现在父窗体区域的底部。

# c++ - 您最喜欢处理跨平台开发的方式是什么？

> ID：586349
> 
>         
> 
> 赞同：10
> 
>         
> 
> 时间：2009-02-25T15:06:23.177
> 
>         
> 
> 标签：c++, c, cross-platform

我目前正在研究跨平台应用程序，只是好奇其他人如何解决以下问题：

*   字节序

*   浮点支持（一些系统在软件中模拟，非常慢）

*   I/O 系统（即显示、声音、文件访问、网络等）

*   当然，过多的编译器差异

显然，这是针对像 c/c++ 这样的语言，它们不会抽象出大部分这些东西（不像 java 或 c#，它们在很多系统上不受支持）。

如果你好奇的话，我正在开发的系统是 Nintendo DS、Wii、PS3、XBox360 和 PC。

* * *

*编辑*

这里有很多非常好的答案，从如何自己处理差异到图书馆建议（甚至只是放弃和使用葡萄酒的建议）。我实际上并不是在寻找解决方案（已经有一个），但只是好奇其他人如何解决这种情况，因为看到其他人如何思考/编码总是很好的，这样你就可以继续发展和成长。

这是我解决问题的方法（如果您没有从上面的系统列表中猜到，我正在开发控制台/Windows 游戏）。请记住，我工作的系统通常没有为它们编写的跨平台库（Sony 实际上建议您从头开始编写自己的渲染引擎并只使用他们的 OpenGL 实现，这并不完全遵循无论如何，标准，作为参考）。

**Endianess**

我们所有的资产都可以为每个系统定制。我们所有的原始数据（纹理除外）都存储在 XML 中，我们在构建项目时将其转换为系统特定的二进制格式。鉴于我们是如何为游戏机开发的，我们不需要担心数据在不同字节序格式的平台之间传输（只有 PC 允许用户这样做，因此它也与其他系统隔离） .

**浮点支持**

大多数现代系统都可以很好地处理浮点值，但 Nintendo DS（和 GBA，但如今对我们来说几乎是一个死平台）是个例外。我们通过 2 个不同的类来处理这个问题。第一个是“定点”类（模板化，可以指定要使用的整数类型以及十进制值的位数），它实现所有算术运算符（处理位移）并自动进行类型转换。第二个是“浮点”类，它基本上只是对浮点数的一个包装，唯一的区别是它还实现了移位运算符。通过实现移位运算符，我们可以在 DS 上使用移位进行快速乘法/除法，然后无缝过渡到使用浮点数更好的平台（如 XBox360）。

**I/O 系统**

这对我们来说可能是最棘手的问题，因为每个系统都有自己的控制器输入、图形方法（XBox360 使用 DirectX9 的变体，PS3 有 OpenGL，或者你可以从头开始编写自己的，DS 和 Wii 有他们自己的专有系统），声音和网络（实际上只有 DS 在协议上有很大不同，但它们都有自己的服务器系统，你必须使用）。  

我们最终解决这个问题的方法是简单地为每个系统编写相当高级的包装器（例如用于图形的网格、用于控制器的键映射系统等）并让所有系统使用相同的头文件进行访问。然后只需为每个平台编写特定的 cpp 文件（从而形成“引擎”）。

**编译器差异**

这是一件不容易解决的事情，当我们遇到编译器问题时，我们通常会在本地 wiki 上记录信息（这样其他人就可以看到要注意的内容和解决方法）如果可能的话，编写一个宏来为我们处理这种情况。虽然它不是最优雅的解决方案，但它可以工作并且看到一些编译器在某些地方是如何简单地损坏的，更优雅的解决方案往往会破坏编译器。（我只希望所有编译器都实现了微软的“#pragma once”命令，这比将所有内容都包装在#ifdef 中容易得多）

* * *

## 回答 #1

> 赞同：8
> 
>             
> 
> 时间：2009-02-25T15:15:48.973

这种复杂性的很大一部分通常由您正在使用的第三方库（最着名的）解决。很少有人从头开始写所有东西......

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2009-02-25T17:39:29.063

对于从文件加载的数据中的字节序问题，在文件头中嵌入一个值，例如 0x12345678。

加载数据的对象，查看这个值，如果它匹配它的值的内部表示，那么文件包含本机字节序值。从那里开始负载很简单。  

如果值不匹配，那么它是一个外部字节序，所以加载器需要在存储它们之前翻转这些值。

* * *

## 回答 #3

> 赞同：4
> 
>             
> 
> 时间：2009-02-25T15:15:50.237

我通常将系统特定的调用封装在一个类中。如果您决定将应用程序移植到新平台，您只需移植一个文件...

* * *

## 回答 #4

> 赞同：3
> 
>             
> 
> 时间：2009-02-25T16:36:48.230

我通常使用多平台库，如 boost 或 Qt，它们解决了我处理平台特定代码的 95% 的问题（我承认我处理的唯一平台是 win-xp 和 linux）。对于剩下的 5%，我通常将平台特定代码封装在一个或多个类中，使用工厂模式或通用编程来减少 #ifdef/#endif 部分

* * *

## 回答 #5

> 赞同：3
> 
>             
> 
> 时间：2009-02-25T17:56:06.153

我认为其他答案在解决除字节序之外的所有问题方面做得很好，所以我将对此添加一些内容......这应该只是您与外界的接口的问题。您所有的内部数据处理都应该以本机字节顺序完成。通过 TCP/IP（或任何其他套接字协议）进行通信时，您应该始终使用一些函数将值与网络字节顺序进行转换。IIRC，功能是`htons()`和`htonl()`，（主机到网络短，主机到网络长）和它们的逆，我不记得了......也许像`ntohl()`，等等？  

您应该与具有错误字节顺序的数据交互的唯一其他地方是从本地硬盘驱动器读取文件，因此让您的文件加载器和写入器使用类似的功能（也许您甚至可以使用网络功能）。

通过使用这些库提供的函数来始终处理字节序（即使在您从未打算移植的代码中也使用它们，除非您有令人信服的理由不这样做——稍后当您决定移植时它会变得更容易），您可以在任何平台上运行代码，它都会“正常工作”，无论本机字节序如何。

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T15:29:10.670

通常，这种可移植性问题留给检测特定系统的构建系统（在我的情况下为 autotools 或 cmake）。最后，我从这个构建系统中得到一个 config.h，然后我只需要使用在这个头文件中定义的常量（使用 IF DEFINED）。

例如这里是一个 config.h ：

```
/* Define to 1 if you have the <math.h> header file. */
#define HAVE_MATH_H

/* Define to 1 if you have the <sys/time.h> header file. */
#define HAVE_SYS_TIME_H

/* Define to 1 if you have the <errno.h> header file. */
#define HAVE_ERRNO_H

/* Define to 1 if you have the <time.h> header file. */
#define HAVE_TIME_H 
```

然后代码将如下所示（例如 time.h）：

```
#ifdef (HAVE_TIME_H)
//you can use some function from time.h
#else
//find another solution :)
#endif 
```

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T16:40:18.003

对于数据格式 - 对所有内容都使用纯文本。对于编译器差异，请注意 C++ 标准并使用编译器开关，例如 g++ -pedantic，它会警告您存在可移植性问题。

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T16:53:45.430

这取决于你正在做的事情。几乎总是正确选择的一件事是将基本内容移植到任何目标平台，然后使用通用 API 处理它。

例如，我做了很多数值计算编码，一些平台有很多损坏/非标准代码：解决它的方法是重新实现这些函数，然后在代码中的任何地方使用这些新函数（对于那些工作，新函数只是调用旧函数）。

但这仅适用于低级别的东西。对于 GUI、高级 IO，几乎每次都使用已经存在的库绝对是更好的选择。

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T20:39:06.247

对于没有原生浮点支持的平台，我们使用了一些自己的定点类型和一些 typedef。像这样：

```
// native floating points
typedef float Real; 
```

或对于固定点，例如：

```
typedef FixedPoint_16_16 Real; 
```

然后数学函数可能看起来像这样：

```
Real OurMath::ourSin(const Real& value); 
```

实际的实现当然可能是：

```
float OurMath::ourSin(const float& value)
{
  return sin(value);
}
// for fixed points something more or less trickery stuff 
```

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:28:25.883

对于像使用不同函数或类的字节顺序这样的事情来说，开销有点小。尝试使用预处理器，例如：

```
#ifdef INTEL_LINUX:
   code here
#endif

#ifdef SOLARIS_POWERPC
   code here
#endif 
```

# c# - 带有聚合的 Linq 查询

> ID：586352
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-02-25T15:07:57.353
> 
>         
> 
> 标签：c#, linq, linq-to-objects

我想编写一个优雅的 linq 查询来处理以下 SAMPLE 对象模型：

```
 class Category
    {
        public string Name { get; set; }        
        public IList<Product> Products { get; set;}        
    }

    class Product
    {
        public string Title { get; set; }
        public IList<Photo> Photos { get; set; }
    }

    class Photo
    {
        public int Id { get; set; }
    } 
```

我构建了以下查询来获取照片 ID：

```
 var query = from category in Factory.GetCategories()
                where category.Name == "Cameras"
                select (from product in category.Products
                        where product.Title == "Sony"
                        select (from photo in product.Photos
                                select photo.Id)
                               );

    var v = query.ToList(); 
```

目前查询没有正确投影，我必须向每个子选择添加一个 FirstOrDefault() ！：

```
var query = from category in Factory.GetCategories()
                where category.Name == "Cameras"
                select (from product in category.Products
                        where product.Title == "Sony"
                        select (from photo in product.Photos
                                select photo.Id).FirstOrDefault()
                               ).FirstOrDefault();

var v = query.ToList(); 
```

有一个更好的方法吗？忽略我们不处理数据库并且PK/FK 不在游戏中的事实。

当我可以在 linq 查询中做同样的事情时，我真的想避免编写一个大的 for 循环：

```
foreach (var category in Factory.GetCategories())
            {
                if (category.Name == "Camera")
                {
                    foreach (var product in category.Products)
                    {
                        if (product.Title == "Sony")
                        {
                            foreach (var photo in product.Photos)
                            {
                                //get data
                                int id = photo.Id;
                            }
                        }
                    }
                }                
            } 
```

实际的实现比这个简单的对象模型更复杂。我想从这个简单的示例中获得基本思想，因此我将其应用于我的真实对象模型。

干杯!

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-02-25T15:12:35.580

你只想要扁平的ID吗？

```
 var query = from category in Factory.GetCategories()
                    where category.Name == "Cameras"
                    from product in category.Products
                    where product.Title == "Sony"
                    from photo in product.Photos
                    select photo.Id; 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T15:13:19.993

嗯，是的 - 你必须添加一个 FirstOrDefault 因为没有像“那个”照片 ID 这样的东西。每个相机可能有很多照片 - 你想要哪张？

如果您只关心第一张照片，那很好 - 尽管多个“来自”子句会让您的生活更轻松：

```
var query = from category in Factory.GetCategories()
            where category.Name == "Cameras"
            from product in category.Products
            where product.Title == "Sony"
            select product.Photos.Select(photo => photo.Id)
                                 .FirstOrDefault(); 
```

请注意，对于没有照片的产品，这将返回 0。那是你要的吗？

如果您能更清楚地了解您的要求，我们将更有能力为您提供帮助。

编辑：如果您只想要*任何*索尼相机的第一个 ID，请使用：

```
var query = from category in Factory.GetCategories()
            where category.Name == "Cameras"
            from product in category.Products
            where product.Title == "Sony"
            from photo in product.Photos
            select photo.Id;
var firstId = query.FirstOrDefault(); 
```

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T16:14:08.690

与其他所有人的答案相同，但使用扩展方法调用而不是查询理解。  `SelectMany`允许您“解包”子集合并在该级别继续查询。

```
var query = Factory.GetCategories()
  .Where(category => category.Name == "Cameras")
  .SelectMany(category => category.Products)
  .Where(product => product.Title == "Sony")
  .SelectMany(product => product.Photos)
  .Select(photo => photo.Id); 
```

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:20:24.077

```
 var ids = from category in Factory.Categories
                  where category.Name == "Cameras"
                  from product in category.Products
                  where product.Title == "Sony"
                  from photo in product.Photos
                  select photo.Id; 
```

返回所有照片的id，没有照片时可枚举为空。如果你想要第一个，或者默认为 0 ：

```
var result = ids.FirstOrDefault(); 
```

# vim - Vim for Word（或类似的东西）

> ID：586355
> 
>         
> 
> 赞同：35
> 
>         
> 
> 时间：2009-02-25T15:08:44.417
> 
>         
> 
> 标签：vim, editor

是否有任何具有 Vi(m) 键绑定的富文本编辑器？具体来说，像 Word 这样的东西，我可以在其中编写带有颜色、标题等的文档。但是使用 Vi(m) 绑定来移动和组合？

* * *

## 回答 #1

> 赞同：29
> 
>             
> 
> 时间：2009-02-25T15:19:11.490

因此，如果您必须使用 MS Word 并想要 vim 键绑定，则有一个[add on](http://www.viemu.com/viemu-vi-vim-word-outlook.html)，但如果您没有绑定，我会定义。去 LaTeX + [vim 乳胶套件。](http://vim-latex.sourceforge.net/)

* * *

## 回答 #2

> 赞同：14
> 
>             
> 
> 时间：2009-02-25T15:12:38.620

你熟悉[乳胶](http://www.latex-project.org/intro.html)吗？

简单地说，它允许您使用标签或命令以纯文本格式格式化您的文档。

然后，您将文档“编译”成最终格式 .pdf、.ps 等。

前任：

```
 \documentclass{article}
   \title{Cartesian closed categories and the price of eggs}
   \author{Jane Doe}
   \date{September 1994}
   \begin{document}
       \maketitle
         Hello world!
   \end{document} 
```

这将允许您在 vim 中编写，但仍然可以为您的文档获得专业的非纯文本输出。

* * *

## 回答 #3

> 赞同：6
> 
>             
> 
> 时间：2015-09-16T11:08:59.877

如果你喜欢 Markdown 或 Latex，你可以使用免费的开源 Rstudio 编辑器，并启用 VIM 模式。导出为 Word、PDF 或 HTML 等。

下载工作室：

[https://www.rstudio.com/products/RStudio/#Desktop](https://www.rstudio.com/products/RStudio/#Desktop)

阅读有关降价的信息：  

[http://rmarkdown.rstudio.com/](http://rmarkdown.rstudio.com/)

* * *

## 回答 #4

> 赞同：5
> 
>             
> 
> 时间：2009-02-25T16:03:03.303

如果您想使用 vim 进行文本编辑，但又想拥有不同颜色的文本、加粗等……您可以使用[Txtfmt](http://www.vim.org/scripts/script.php?script_id=2208)插件。它使您能够通过使用特殊字符来稍微“美化”纯文本文件。它们看起来很漂亮，如果您习惯使用 vim，它会派上用场，例如，为您的程序编写文档，稍后您只需输入文字，进行一两次调整，然后发货。

* * *

## 回答 #5

> 赞同：4
> 
>             
> 
> 时间：2009-12-10T13:29:45.197

Txtfmt 插件绝对提供您正在寻找的功能。这有点像在 Vim 中具有纯文本的“富文本”功能。

[Txtfmt（Vim 荧光笔）](http://www.vim.org/scripts/script.php?script_id=2208)

[截图](http://txtfmt.webs.com)

最新版本支持8种可配置的前景色和背景色，以及粗体、下划线、斜体等的所有组合...方便直观的映射，不需要您记住任何内容：例如，“粗体下划线”可以用诸如*bu*或*ub*之类的字符串指定。正在开发的版本甚至支持可视化地图，这将允许您选择一些文本并说（例如）“将此文本设为红色，粗斜体”，并让插件自动处理插入/删除适当的标记。（但是，即使使用非可视映射，它也非常简单和直观。）

尽管该插件是高度可配置的，但默认设置适合大多数用户，作者非常乐意回答任何设置或使用问题...

* * *

## 回答 #6

> 赞同：4
> 
>             
> 
> 时间：2017-10-06T19:27:13.407

如果您想（或必须）继续使用 Word 并且不想花 100 美元购买 ViEmu 许可证，您可以尝试使用[此 AutoHotKey 脚本](https://github.com/rcmdnk/vim_ahk)来提供一些基本的类似 vi 的功能。链接的 repo 还提供了一个独立的 exe，可以在不使用 AutoHotKey 的情况下获得相同的结果。

完全放弃这个词有很多很好的理由，但有时这不是一个选择:(

* * *

## 回答 #7

> 赞同：3
> 
>             
> 
> 时间：2009-03-04T21:47:00.190

There's a way of configuring [Abiword](http://www.abisource.com/) to use [vi key bindings](http://www.abisource.com/wiki/FaqEditorBindings)

* * *

## 回答 #8

> 赞同：3
> 
>             
> 
> 时间：2018-12-18T18:36:51.337

您可以使用您选择的文本编辑器和 vim 键（vim、emacs、sublime、atom、vscode 等）并在 markdown 中编写文档。[然后使用名为pandoc](https://pandoc.org)的开源工具将其翻译成您想要的几乎任何其他标记语言。可以将您的文档编译为富文本格式，包括 MS Word 甚至 MS Powerpoint。您可以使用模板来定制您的输出。

Pandoc 拥有大量文档并使用更丰富的标记语法，允许您对文本执行几乎任何您想做的事情。社区正在积极开发它。几乎所有主要的文本编辑器都有一些 pandoc 插件。

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2019-05-01T15:55:34.297

您可以使用[GlobalVim](https://www.microsoft.com/store/apps/9PDQ9H0CVLMS)。它可以在大多数编辑区域模拟 vim 模式和命令。

# c# - 如何让用户下载一个xml文件

> ID：586356
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-02-25T15:08:45.730
> 
>         
> 
> 标签：c#, asp.net, xml, http-headers

我想要做的是用户在网格上选择一些字段，并根据这些数据在 Web 服务器上创建一个 xml 文件，然后我希望用户像下载任何文件一样下载它。但问题是，我不能使用这段代码：

```
Response.ContentType = "APPLICATION/OCTET-STREAM";

        // initialize the http content-disposition header to
        // indicate a file attachment with the default filename
        // "myFile.txt"
        System.String disHeader = "Attachment; Filename=\"" + fileName +
           "\"";
        Response.AppendHeader("Content-Disposition", disHeader);
        FileInfo downloadFile = new FileInfo(fileFullName);
        if (downloadFile.Exists)
        {
            Response.WriteFile(downloadFile.FullName);
            HttpContext.Current.ApplicationInstance.CompleteRequest();
        } 
```

因为我需要让用户下载 3 个文件，所以标题不能携带它，所以我要获取文件名并打开一个弹出窗口，用链接按钮列出文件名，然后用户可以下载它。

对于每个文件，我在运行时创建一个链接按钮并添加以下代码：

```
lnkProblem.Text = "Problemler dosyası";
    lnkProblem.Visible = true;
    lnkProblem.Command += new CommandEventHandler(lnkUser_Command);
    lnkProblem.CommandName = Request.QueryString["fileNameProblems"];
    lnkProblem.CommandArgument = Request.QueryString["fileNameProblems"]; 
```

然后使用此功能使其由用户下载：

```
void lnkUser_Command(object sender, CommandEventArgs e)
{
    Response.ContentType = "APPLICATION/XML";

    System.String disHeader = "Attachment; Filename=\"" + e.CommandArgument.ToString() +
       "\"";
    Response.AppendHeader("Content-Disposition", disHeader);
    FileInfo downloadFile = new FileInfo(Server.MapPath(".") + "\\xmls\\" + e.CommandArgument.ToString());
    if (downloadFile.Exists)
    {
        Response.WriteFile(Server.MapPath(".") + "\\xmls\\" + e.CommandArgument.ToString());
        HttpContext.Current.ApplicationInstance.CompleteRequest();
    }
    HttpContext.Current.ApplicationInstance.CompleteRequest();
} 
```

应用程序创建了 xml 文件，但它的某处，应用程序将 html 标签放在该 xml 文件中，所以我无法打开文件，有没有办法这样做？也许还有其他例子......

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-02-25T15:26:20.053

向客户端发送文件的干净方式是使用 TransmitFile 方法，如下所示：

```
FileInfo file = new FileInfo(filePath); // full file path on disk
Response.ClearContent(); // neded to clear previous (if any) written content
Response.AddHeader("Content-Disposition", 
    "attachment; filename=" + file.Name);
Response.AddHeader("Content-Length", file.Length.ToString());
Response.ContentType = "text/xml"; //RFC 3023
Response.TransmitFile(file.FullName);
Response.End(); 
```

对于多个文件，常见的解决方案是将所有文件打包到一个 zip 文件中并发送（在这种情况下，mime 类型为 application/zip）。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T15:14:28.600

创建一个单独`IHttpHandler`的文件，该文件仅提供您希望用户下载的文件，并`Redirect`提供给`lnkUser_Command`.

# javascript - YUI 编辑器：如何粘贴为纯文本？

> ID：586361
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-25T15:10:08.097
> 
>         
> 
> 标签：javascript, ruby-on-rails, yui, richtextbox, richtextediting

[我使用YUI_Editor 插件](http://github.com/larsklevan/yui_editor/tree/master)在 Rails 应用程序中实现了 Yahoo 富文本编辑器（[YUI 编辑器](http://developer.yahoo.com/yui/editor/)） 。

如果我将 PDF 中的文本复制/粘贴到 YUI-Editor-enhanced-TextArea ( *YEETA* :)) 中，它不仅会复制文本，还会复制文本的格式。

如何配置 YUI 编辑器以在插入之前删除粘贴到*YEETA中的所有文本格式？*

即使您没有使用 Rails 和/或使用 YUI_Editor 插件，我也对您的回答很感兴趣。给我一个提示，我会想办法用我的设置解决这个问题。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-12T06:20:38.163

我已经为 YUI 编辑器编写了一个扩展来处理这个问题，你可以在这里下载它：

[http://antscode.blogspot.com/2009/05/strip-formatting-on-paste-using-yui.html](http://antscode.blogspot.com/2009/05/strip-formatting-on-paste-using-yui.html)

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-03-10T12:34:11.200

据我所知，YUI 编辑器中没有这样的功能。[最后，我按照这个问题](https://stackoverflow.com/questions/611843/yui-editor-getting-rid-of-html-tags-in-content)的描述解析了提交时的编辑器内容。

# compiler-construction - Erlang 编译器是如何实现模式匹配的？

> ID：586362
> 
>         
> 
> 赞同：34
> 
>         
> 
> 时间：2009-02-25T15:10:33.180
> 
>         
> 
> 标签：compiler-construction, erlang, pattern-matching

我想知道通常如何实现模式匹配。例如，在 Erlang 中，您认为它是在字节码级别实现的（它有一个字节码以便它有效地完成）还是由编译器生成为一系列指令（一系列字节码）？

这是一个非常有用的东西，我只需要将它放入我正在构建的玩具语言中。

* * *

## 回答 #1

> 赞同：35
> 
>             
> 
> 时间：2009-03-13T14:11:19.013

[Simon Peyton Jones](https://www.microsoft.com/en-us/research/uploads/prod/1987/01/slpj-book-1987.pdf)在“函数式编程语言的实现”中对编译模式匹配进行了很好的描述。这本书有点旧，但非常好。除其他外，它还包含对编译列表推导的描述。

Erlang 编译器使用书中的这两种算法。

* * *

## 回答 #2

> 赞同：20
> 
>             
> 
> 时间：2009-02-25T16:27:23.573

你可以看看如果编译一些代码会发生什么

```
-module(match).
-export([match/1]).
match(X) -> {a,Y} = X. 
```

当你想看看看起来像[核心](http://www.it.uu.se/research/group/hipe/cerl/)

```
> c(match, to_core). 
```

或者

```
$ erlc +to_core match.erl 
```

结果是

```
module 'match' ['match'/1,
                'module_info'/0,
                'module_info'/1]
    attributes []
'match'/1 =
    %% Line 3
    fun (_cor0) ->
        case _cor0 of
          <{'a',Y}> when 'true' ->
              _cor0
          ( <_cor1> when 'true' ->
                primop 'match_fail'
                    ({'badmatch',_cor1})
            -| ['compiler_generated'] )
        end
'module_info'/0 =
    fun () ->
        call 'erlang':'get_module_info'
            ('match')
'module_info'/1 =
    fun (_cor0) ->
        call 'erlang':'get_module_info'
            ('match', _cor0) 
```

如果您想查看梁的 asm 代码，您可以这样做

```
> c(match, 'S'). 
```

或者

```
$ erlc -S match.erl 
```

和结果

```
{module, match}.  %% version = 0

{exports, [{match,1},{module_info,0},{module_info,1}]}.

{attributes, []}.

{labels, 8}.

{function, match, 1, 2}.
  {label,1}.
    {func_info,{atom,match},{atom,match},1}.
  {label,2}.
    {test,is_tuple,{f,3},[{x,0}]}.
    {test,test_arity,{f,3},[{x,0},2]}.
    {get_tuple_element,{x,0},0,{x,1}}.
    {test,is_eq_exact,{f,3},[{x,1},{atom,a}]}.
    return.
  {label,3}.
    {badmatch,{x,0}}.

{function, module_info, 0, 5}.
  {label,4}.
    {func_info,{atom,match},{atom,module_info},0}.
  {label,5}.
    {move,{atom,match},{x,0}}.
    {call_ext_only,1,{extfunc,erlang,get_module_info,1}}.

{function, module_info, 1, 7}.
  {label,6}.
    {func_info,{atom,match},{atom,module_info},1}.
  {label,7}.
    {move,{x,0},{x,1}}.
    {move,{atom,match},{x,0}}.
    {call_ext_only,2,{extfunc,erlang,get_module_info,2}}. 
```

如您所见`{test,is_tuple,...`，`{test,test_arity,...`和是指示如何在光束中执行此匹配`{get_tuple_element,...`并将`{test,is_eq_exact,...`其直接转换为光束的字节码。

Erlang 编译器是在 Erlang 本身中实现的，您可以在[compile](http://www.erlang.org/doc/man/compile.html)模块的源代码中查看编译的每个阶段，并在依赖模块中查看详细信息。

* * *

## 回答 #3

> 赞同：14
> 
>             
> 
> 时间：2009-02-26T03:39:21.977

如果你想构建自己的模式匹配器[，Scott 和 Ramsey](http://www.cs.tufts.edu/~nr/pubs/match-abstract.html)的[一篇论文以及 Luc Maranget](http://pauillac.inria.fr/~maranget/papers/ml05e-maranget.pdf)的一篇论文都描述了如何将模式编译为高效的决策树（也称为嵌套 switch 语句）。

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T16:23:10.870

我可以建议的最好的事情是编译一些测试函数并查看生成的代码。

```
erlc -S test.erl 
```

生成具有相当可读性的 test.S。

为了回答这个问题，模式匹配是通过更原始的操作以一种有效的方式建立起来的。这是匹配 {X, [H|T]} 的函数子句的部分代码。

```
{test,is_tuple,{f,1},[{x,0}]}.
{test,test_arity,{f,1},[{x,0},2]}.
{get_tuple_element,{x,0},0,{x,1}}.
{get_tuple_element,{x,0},1,{x,2}}.
{test,is_nonempty_list,{f,4},[{x,2}]}. 
```

# java - 为什么是 super.super.method(); 在 Java 中不允许？

> ID：586363
> 
>         
> 
> 赞同：403
> 
>         
> 
> 时间：2009-02-25T15:10:38.487
> 
>         
> 
> 标签：java, superclass

我读[了这个问题](https://stackoverflow.com/questions/580984/how-do-you-get-the-object-reference-of-an-object-in-java-when-tostring-and-hash)，并认为如果有人可以写，这很容易解决（并不是说没有它就无法解决）：

```
@Override
public String toString() {
    return super.super.toString();
} 
```

我不确定它在很多情况下是否有用，但我想知道*为什么*它没有用，以及其他语言中是否存在类似的东西。

你们有什么感想？

**编辑：**
澄清一下：是的，我知道，这在 Java 中是不可能的，我并没有真正想念它。这不是我期望的工作，并且很惊讶得到编译器错误。我只是有这个想法，并喜欢讨论它。

* * *

## 回答 #1

> 赞同：525
> 
>             
> 
> 时间：2009-02-25T15:15:40.750

它违反了封装。您不应该能够绕过父类的行为。有时能够绕过您*自己的*类的行为（尤其是在同一方法中）而不是您父母的行为是有意义的。例如，假设我们有一个基础“项目集合”，一个表示“红色项目集合”的子类和一个表示“大红色项目集合”的子类。拥有以下内容是有意义的：

```
public class Items
{
    public void add(Item item) { ... }
}

public class RedItems extends Items
{
    @Override
    public void add(Item item)
    {
        if (!item.isRed())
        {
            throw new NotRedItemException();
        }
        super.add(item);
    }
}

public class BigRedItems extends RedItems
{
    @Override
    public void add(Item item)
    {
        if (!item.isBig())
        {
            throw new NotBigItemException();
        }
        super.add(item);
    }
} 
```

没关系 - RedItems 始终可以确信它包含的项目都是红色的。现在假设我们*能够*调用 super.super.add()：

```
public class NaughtyItems extends RedItems
{
    @Override
    public void add(Item item)
    {
        // I don't care if it's red or not. Take that, RedItems!
        super.super.add(item);
    }
} 
```

现在我们可以添加任何我们喜欢的东西，并且不变量 in`RedItems`被破坏了。

那有意义吗？

* * *

## 回答 #2

> 赞同：86
> 
>             
> 
> 时间：2009-02-25T15:50:32.290

我认为 Jon Skeet 有正确的答案。我只想补充一点，您*可以*通过强制转换从超类的超类中访问阴影变量`this`：

```
interface I { int x = 0; }
class T1 implements I { int x = 1; }
class T2 extends T1 { int x = 2; }
class T3 extends T2 {
        int x = 3;
        void test() {
                System.out.println("x=\t\t"          + x);
                System.out.println("super.x=\t\t"    + super.x);
                System.out.println("((T2)this).x=\t" + ((T2)this).x);
                System.out.println("((T1)this).x=\t" + ((T1)this).x);
                System.out.println("((I)this).x=\t"  + ((I)this).x);
        }
}

class Test {
        public static void main(String[] args) {
                new T3().test();
        }
} 
```

产生输出：

```
x= 3
超级.x = 2
((T2)this).x=2
((T1)这个).x= 1
((I)this).x=0

```

（来自[JLS](https://docs.oracle.com/javase/specs/jls/se10/html/jls-15.html#jls-15.11.2)的示例）

但是，这不适用于方法调用，因为方法调用是根据对象的运行时类型确定的。

* * *

## 回答 #3

> 赞同：46
> 
>             
> 
> 时间：2010-04-22T15:54:45.193

我认为以下代码允许在大多数情况下使用 super.super...super.method() 。（即使这样做很丑陋）

简而言之

1.  创建祖先类型的临时实例

2.  将字段的值从*原始*对象复制到临时对象

3.  在临时对象上调用目标方法

4.  将修改后的值复制回原始对象

用法 ：

```
public class A {
   public void doThat() { ... }
}

public class B extends A {
   public void doThat() { /* don't call super.doThat() */ }
}

public class C extends B {
   public void doThat() {
      Magic.exec(A.class, this, "doThat");
   }
}

public class Magic {
    public static <Type, ChieldType extends Type> void exec(Class<Type> oneSuperType, ChieldType instance,
            String methodOfParentToExec) {
        try {
            Type type = oneSuperType.newInstance();
            shareVars(oneSuperType, instance, type);
            oneSuperType.getMethod(methodOfParentToExec).invoke(type);
            shareVars(oneSuperType, type, instance);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
    private static <Type, SourceType extends Type, TargetType extends Type> void shareVars(Class<Type> clazz,
            SourceType source, TargetType target) throws IllegalArgumentException, IllegalAccessException {
        Class<?> loop = clazz;
        do {
            for (Field f : loop.getDeclaredFields()) {
                if (!f.isAccessible()) {
                    f.setAccessible(true);
                }
                f.set(target, f.get(source));
            }
            loop = loop.getSuperclass();
        } while (loop != Object.class);
    }
} 
```

* * *

## 回答 #4

> 赞同：12
> 
>             
> 
> 时间：2009-02-25T15:50:03.930

我没有足够的声誉发表评论，所以我会将其添加到其他答案中。

Jon Skeet 的回答非常出色，举了一个漂亮的例子。Matt B 有一点：不是所有的超类都有超类。如果您调用没有超级的超级的超级，您的代码将会中断。

面向对象的编程（Java 就是）都是关于对象的，而不是函数。如果您想要面向任务的编程，请选择 C++ 或其他东西。如果您的对象不适合它的超类，那么您需要将它添加到“祖父类”，创建一个新类，或者找到另一个适合它的超类。

就个人而言，我发现这种限制是 Java 的最大优势之一。与我使用的其他语言相比，代码有些僵化，但我总是知道会发生什么。这有助于实现 Java 的“简单而熟悉”的目标。在我看来，调用 super.super 并不简单也不熟悉。也许开发人员也有同感？

* * *

## 回答 #5

> 赞同：7
> 
>             
> 
> 时间：2010-05-07T14:24:56.613

这样做有一些很好的理由。您可能有一个子类，它的方法实现不正确，但父方法实现正确。因为它属于第三方库，您可能无法/不愿意更改源。在这种情况下，您要创建一个子类，但要重写一个方法来调用 super.super 方法。

正如其他一些海报所示，可以通过反射来做到这一点，但应该可以做类似的事情

(SuperSuperClass this).theMethod();

我现在正在处理这个问题 - 快速解决方法是将超类方法复制并粘贴到子类方法中:)

* * *

## 回答 #6

> 赞同：6
> 
>             
> 
> 时间：2009-02-25T15:34:04.293

除了其他人提出的非常好的观点之外，我认为还有另一个原因：如果超类没有超类怎么办？

由于每个类都自然地扩展（至少）`Object`，`super.whatever()`因此将始终引用超类中的方法。但是，如果您的课程只扩展了怎么办`Object`——那会`super.super`指什么？应该如何处理这种行为 - 编译器错误、NullPointer 等？

我认为不允许这样做的主要原因是它违反了封装，但这也可能是一个小原因。

* * *

## 回答 #7

> 赞同：4
> 
>             
> 
> 时间：2009-02-25T15:14:41.067

我认为，如果您覆盖一个方法并想要它的所有超类版本（例如 for `equals`），那么您实际上总是希望首先调用直接超类版本，如果需要，它会依次调用它的超类版本.

我认为调用某个方法的任意超类版本几乎没有意义（如果有的话。我想不出它确实如此）。我不知道这在Java中是否可行。它可以在 C++ 中完成：

```
this->ReallyTheBase::foo(); 
```

* * *

## 回答 #8

> 赞同：3
> 
>             
> 
> 时间：2009-02-25T15:16:12.903

猜测一下，因为它不经常使用。我可以看到使用它的唯一原因是如果您的直接父母已经覆盖了某些功能并且您正在尝试将其恢复为原始功能。

在我看来，这违反了面向对象的原则，因为班级的直接父母应该比祖父母与您的班级更密切相关。

* * *

## 回答 #9

> 赞同：3
> 
>             
> 
> 时间：2011-11-16T11:00:30.757

当您无法更改基类的代码时，调用 super.super.method() 是有意义的。当您扩展现有库时，通常会发生这种情况。

首先问问自己，为什么要扩展该课程？如果答案是“因为我无法更改它”，那么您可以在您的应用程序中创建确切的包和类，并重写顽皮的方法或创建委托：

```
package com.company.application;

public class OneYouWantExtend extends OneThatContainsDesiredMethod {

    // one way is to rewrite method() to call super.method() only or 
    // to doStuff() and then call super.method()

    public void method() {
        if (isDoStuff()) {
            // do stuff
        }
        super.method();
    }

    protected abstract boolean isDoStuff();

    // second way is to define methodDelegate() that will call hidden super.method()

    public void methodDelegate() {
        super.method();
    }
    ...
}

public class OneThatContainsDesiredMethod {

    public void method() {...}
    ...
} 
```

例如，你可以在你的应用程序中创建*org.springframework.test.context.junit4.SpringJUnit4ClassRunner*类，这样这个类应该在真正的 jar 之前加载。然后重写方法或构造函数。

**注意：**这是绝对的 hack，强烈不建议使用，但它可以工作！由于类加载器可能存在问题，因此使用这种方法很危险。每次更新包含被覆盖类的库时，这也可能会导致问题。

* * *

## 回答 #10

> 赞同：3
> 
>             
> 
> 时间：2013-09-04T06:18:10.383

@Jon Skeet 很好的解释。IMO，如果有人想调用 super.super 方法，那么必须要忽略直接父母的行为，但要访问祖父母的行为。这可以通过instance Of来实现。如下代码

```
public class A {
    protected void printClass() {
        System.out.println("In A Class");
    }
}

public class B extends A {

    @Override
    protected void printClass() {
        if (!(this instanceof C)) {
            System.out.println("In B Class");
        }
        super.printClass();
    }
}

public class C extends B {
    @Override
    protected void printClass() {
        System.out.println("In C Class");
        super.printClass();
    }
} 
```

这是驱动程序类，

```
public class Driver {
    public static void main(String[] args) {
        C c = new C();
        c.printClass();
    }
} 
```

输出将是

```
In C Class
In A Class 
```

在这种情况下，B 类 printClass 行为将被忽略。我不确定这是实现 super.super 的理想做法还是好的做法，但它仍然有效。

* * *

## 回答 #11

> 赞同：3
> 
>             
> 
> 时间：2018-08-15T16:48:28.210

看看[这个](https://gist.github.com/nallar/2ac088d93fb411bd7240c9dd6c7cdc7f)Github 项目，尤其是 objectHandle 变量。这个项目展示了如何在孙子上实际准确地调用祖父母方法。

以防万一链接被破坏，这里是代码：

```
import lombok.val;
import org.junit.Assert;
import org.junit.Test;

import java.lang.invoke.*;

/*
Your scientists were so preoccupied with whether or not they could, they didn’t stop to think if they should.
Please don't actually do this... :P
*/
public class ImplLookupTest {
    private MethodHandles.Lookup getImplLookup() throws NoSuchFieldException, IllegalAccessException {
        val field = MethodHandles.Lookup.class.getDeclaredField("IMPL_LOOKUP");
        field.setAccessible(true);
        return (MethodHandles.Lookup) field.get(null);
    }

    @Test
    public void test() throws Throwable {
        val lookup = getImplLookup();
        val baseHandle = lookup.findSpecial(Base.class, "toString",
            MethodType.methodType(String.class),
            Sub.class);
        val objectHandle = lookup.findSpecial(Object.class, "toString",
            MethodType.methodType(String.class),
            // Must use Base.class here for this reference to call Object's toString
            Base.class);
        val sub = new Sub();
        Assert.assertEquals("Sub", sub.toString());
        Assert.assertEquals("Base", baseHandle.invoke(sub));
        Assert.assertEquals(toString(sub), objectHandle.invoke(sub));
    }

    private static String toString(Object o) {
        return o.getClass().getName() + "@" + Integer.toHexString(o.hashCode());
    }

    public class Sub extends Base {
        @Override
        public String toString() {
            return "Sub";
        }
    }

    public class Base {
        @Override
        public String toString() {
            return "Base";
        }
    }
} 
```

快乐编码！！！！

* * *

## 回答 #12

> 赞同：2
> 
>             
> 
> 时间：2013-10-29T10:28:18.377

如果可能的话，我会将 super.super 方法体放在另一个方法中

```
class SuperSuperClass {
    public String toString() {
        return DescribeMe();
    }

    protected String DescribeMe() {
        return "I am super super";
    }
}

class SuperClass extends SuperSuperClass {
    public String toString() {
        return "I am super";
    }
}

class ChildClass extends SuperClass {
    public String toString() {
        return DescribeMe();
    }
} 
```

或者如果你不能改变超超类，你可以试试这个：

```
class SuperSuperClass {
    public String toString() {
        return "I am super super";
    }
}

class SuperClass extends SuperSuperClass {
    public String toString() {
        return DescribeMe(super.toString());
    }

    protected String DescribeMe(string fromSuper) {
        return "I am super";
    }
}

class ChildClass extends SuperClass {
    protected String DescribeMe(string fromSuper) {
        return fromSuper;
    }
} 
```

在这两种情况下，

```
new ChildClass().toString(); 
```

结果“我超级超级”

* * *

## 回答 #13

> 赞同：1
> 
>             
> 
> 时间：2009-07-02T20:22:11.997

似乎至少可以使用反射获得超类的超类的类，尽管不一定是它的实例；如果这可能有用，请考虑[http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Class.html#getSuperclass()上的 Javadoc](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Class.html#getSuperclass())

* * *

## 回答 #14

> 赞同：1
> 
>             
> 
> 时间：2011-07-20T11:48:36.283

```
public class A {

     @Override
     public String toString() {
          return "A";
     }

}

public class B extends A {

     @Override
     public String toString() {
          return "B";
     }

}

public class C extends B {

     @Override
     public String toString() {
          return "C";
     }

}

public class D extends C {

     @Override
     public String toString() {
          String result = "";
          try {
                result = this.getClass().getSuperclass().getSuperclass().getSuperclass().newInstance().toString();
          } catch (InstantiationException ex) {
                Logger.getLogger(D.class.getName()).log(Level.SEVERE, null, ex);
          } catch (IllegalAccessException ex) {
                Logger.getLogger(D.class.getName()).log(Level.SEVERE, null, ex);
          }
          return result;
     }

}

public class Main {

     public static void main(String... args) {
          D d = new D();
          System.out.println(d);

     }
} 
```

运行：A BUILD SUCCESSFUL（总时间：0 秒）

* * *

## 回答 #15

> 赞同：1
> 
>             
> 
> 时间：2013-02-26T19:26:09.373

当体系结构要在代表多个派生类实现的通用 CustomBaseClass 中构建通用功能时，我遇到过类似的情况。但是，我们需要规避特定派生类的特定方法的通用逻辑。在这种情况下，我们必须使用 super.super.methodX 实现。

我们通过在 CustomBaseClass 中引入一个布尔成员来实现这一点，该成员可用于有选择地推迟自定义实现并在需要时屈服于默认框架实现。

```
 ...
        FrameworkBaseClass (....) extends...
        {
           methodA(...){...}
           methodB(...){...}
        ...
           methodX(...)
        ...
           methodN(...){...}

        }
        /* CustomBaseClass overrides default framework functionality for benefit of several derived classes.*/
        CustomBaseClass(...) extends FrameworkBaseClass 
        {
        private boolean skipMethodX=false; 
        /* implement accessors isSkipMethodX() and setSkipMethodX(boolean)*/

           methodA(...){...}
           methodB(...){...}
        ...
           methodN(...){...}

           methodX(...){
                  if (isSkipMethodX()) {
                       setSKipMethodX(false);
                       super.methodX(...);
                       return;
                       }
                   ... //common method logic
            }
        }

        DerivedClass1(...) extends CustomBaseClass
        DerivedClass2(...) extends CustomBaseClass 
        ...
        DerivedClassN(...) extends CustomBaseClass...

        DerivedClassX(...) extends CustomBaseClass...
        {
           methodX(...){
                  super.setSKipMethodX(true);
                  super.methodX(...);
                       }
        } 
```

但是，如果在框架和应用程序中遵循良好的架构原则，我们可以通过使用 hasA 方法而不是 isA 方法轻松避免这种情况。但在任何时候，期望设计良好的架构都不是很实际，因此需要摆脱坚实的设计原则并引入这样的技巧。只是我的2美分...

* * *

## 回答 #16

> 赞同：0
> 
>             
> 
> 时间：2011-03-27T18:35:12.873

`super.super.sayYourName()`IMO，这是一种在 Java中实现行为的干净方法。

```
public class GrandMa {  
    public void sayYourName(){  
        System.out.println("Grandma Fedora");  
    }  
}  

public class Mama extends GrandMa {  
    public void sayYourName(boolean lie){  
        if(lie){   
            super.sayYourName();  
        }else {  
            System.out.println("Mama Stephanida");  
        }  
    }  
}  

public class Daughter extends Mama {  
    public void sayYourName(boolean lie){  
        if(lie){   
            super.sayYourName(lie);  
        }else {  
            System.out.println("Little girl Masha");  
        }  
    }  
}  

public class TestDaughter {
    public static void main(String[] args){
        Daughter d = new Daughter();

        System.out.print("Request to lie: d.sayYourName(true) returns ");
        d.sayYourName(true);
        System.out.print("Request not to lie: d.sayYourName(false) returns ");
        d.sayYourName(false);
    }
} 
```

输出：

`Request to lie: d.sayYourName(true) returns Grandma Fedora`

`Request not to lie: d.sayYourName(false) returns Little girl Masha`

* * *

## 回答 #17

> 赞同：0
> 
>             
> 
> 时间：2014-04-09T07:55:15.097

我认为这是一个破坏继承协议的问题。

通过扩展一个类，你服从/同意它的行为，特性

当调用时`super.super.method()`，你想打破你自己的服从协议。

*你只是不能从超级类中挑选*。

但是，当您觉得需要调用时，可能会发生这种情况`super.super.method()`——通常是在您的代码或您继承的代码中的糟糕设计标志！

如果*super*和*super super*类无法重构（一些遗留代码），那么选择组合而不是继承。

封装破坏是当您通过破坏封装的代码来*@Override*某些方法时。设计为不被覆盖的方法被标记为
 *final*。

* * *

## 回答 #18

> 赞同：0
> 
>             
> 
> 时间：2015-02-16T12:08:56.273

这很容易做到。例如：

B的C子类和A的B子类。例如，这三个都有方法methodName()。

```
public abstract class A {

    public void methodName() {
        System.out.println("Class A");
    }

}

public class B extends A {

    public void methodName() {
        super.methodName();
        System.out.println("Class B");
    }

    // Will call the super methodName
    public void hackSuper() {
        super.methodName();
    }

}

public class C extends B {

    public static void main(String[] args) {
        A a = new C();
        a.methodName();
    }

    @Override
    public void methodName() {
        /*super.methodName();*/
        hackSuper();
        System.out.println("Class C");
    }

} 
```

运行 C 类输出将是：A 类 C 类

而不是输出：Class A Class B Class C

* * *

## 回答 #19

> 赞同：0
> 
>             
> 
> 时间：2017-08-07T19:56:51.843

在 C# 中，您可以像这样调用任何祖先的方法：

```
public class A
    internal virtual void foo()
...
public class B : A
    public new void foo()
...
public class C : B
    public new void foo() {
       (this as A).foo();
    } 
```

您也可以在 Delphi 中执行此操作：

```
type
   A=class
      procedure foo;
      ...
   B=class(A)
     procedure foo; override;
     ...
   C=class(B)
     procedure foo; override;
     ...
A(objC).foo(); 
```

但是在 Java 中，您只能通过一些工具来实现这种专注。一种可能的方法是：

```
class A {               
   int y=10;            

   void foo(Class X) throws Exception {  
      if(X!=A.class)
         throw new Exception("Incorrect parameter of "+this.getClass().getName()+".foo("+X.getName()+")");
      y++;
      System.out.printf("A.foo(%s): y=%d\n",X.getName(),y);
   }
   void foo() throws Exception { 
      System.out.printf("A.foo()\n");
      this.foo(this.getClass()); 
   }
}

class B extends A {     
   int y=20;            

   @Override
   void foo(Class X) throws Exception { 
      if(X==B.class) { 
         y++; 
         System.out.printf("B.foo(%s): y=%d\n",X.getName(),y);
      } else { 
         System.out.printf("B.foo(%s) calls B.super.foo(%s)\n",X.getName(),X.getName());
         super.foo(X);
      } 
   }
}

class C extends B {     
   int y=30;            

   @Override
   void foo(Class X) throws Exception { 
      if(X==C.class) { 
         y++; 
         System.out.printf("C.foo(%s): y=%d\n",X.getName(),y);
      } else { 
         System.out.printf("C.foo(%s) calls C.super.foo(%s)\n",X.getName(),X.getName());
         super.foo(X);
      } 
   }

   void DoIt() {
      try {
         System.out.printf("DoIt: foo():\n");
         foo();         
         Show();

         System.out.printf("DoIt: foo(B):\n");
         foo(B.class);  
         Show();

         System.out.printf("DoIt: foo(A):\n");
         foo(A.class);  
         Show();
      } catch(Exception e) {
         //...
      }
   }

   void Show() {
      System.out.printf("Show: A.y=%d, B.y=%d, C.y=%d\n\n", ((A)this).y, ((B)this).y, ((C)this).y);
   }
} 
```

objC.DoIt() 结果输出：

```
DoIt: foo():
A.foo()
C.foo(C): y=31
Show: A.y=10, B.y=20, C.y=31

DoIt: foo(B):
C.foo(B) calls C.super.foo(B)
B.foo(B): y=21
Show: A.y=10, B.y=21, C.y=31

DoIt: foo(A):
C.foo(A) calls C.super.foo(A)
B.foo(A) calls B.super.foo(A)
A.foo(A): y=11
Show: A.y=11, B.y=21, C.y=31 
```

* * *

## 回答 #20

> 赞同：-1
> 
>             
> 
> 时间：2011-06-04T19:03:35.913

如果您认为您将需要超类，您可以在该类的变量中引用它。例如：

```
public class Foo
{
  public int getNumber()
  {
    return 0;
  }
}

public class SuperFoo extends Foo
{
  public static Foo superClass = new Foo();
  public int getNumber()
  {
    return 1;
  }
}

public class UltraFoo extends Foo
{
  public static void main(String[] args)
  {
    System.out.println(new UltraFoo.getNumber());
    System.out.println(new SuperFoo().getNumber());
    System.out.println(new SuperFoo().superClass.getNumber());
  }
  public int getNumber()
  {
    return 2;
  }
} 
```

应该打印出来：

```
2
1
0 
```

* * *

## 回答 #21

> 赞同：-1
> 
>             
> 
> 时间：2015-04-17T05:34:34.383

```
public class SubSubClass extends SubClass {

    @Override
    public void print() {
        super.superPrint();
    }

    public static void main(String[] args) {
        new SubSubClass().print();
    }
}

class SuperClass {

    public void print() {
        System.out.println("Printed in the GrandDad");
    }
}

class SubClass extends SuperClass {

    public void superPrint() {
        super.print();
    }
} 
```

输出：在 GrandDad 中打印

* * *

## 回答 #22

> 赞同：-1
> 
>             
> 
> 时间：2018-10-23T03:04:19.013

关键字 super 只是调用超类中方法的一种方式。在 Java 教程中：[https ://docs.oracle.com/javase/tutorial/java/IandI/super.html](https://docs.oracle.com/javase/tutorial/java/IandI/super.html)

## 如果您的方法覆盖了它的超类的方法之一，您可以通过使用关键字 super 来调用被覆盖的方法。

不要相信是超级对象的引用！！！不，它只是调用超类中方法的关键字。

这是一个例子：

```
class Animal {
    public void doSth() {
        System.out.println(this);   // It's a Cat! Not an animal!
        System.out.println("Animal do sth.");
    }
}

class Cat extends Animal {
    public void doSth() {
        System.out.println(this);
        System.out.println("Cat do sth.");
        super.doSth();
    }
} 
```

当你调用时，类`cat.doSth()`中的方法将打印出来，它是一只猫。`doSth()``Animal``this`

# objective-c - 如何在 Objective-C 中反转 NSArray？

> ID：586370
> 
>         
> 
> 赞同：363
> 
>         
> 
> 时间：2009-02-25T15:12:35.453
> 
>         
> 
> 标签：objective-c, nsarray

我需要扭转我的`NSArray`.

举个例子：

`[1,2,3,4,5]`必须变成：`[5,4,3,2,1]`

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1310
> 
>             
> 
> 时间：2009-02-25T15:42:40.827

如果您利用 on 的内置`reverseObjectEnumerator`方法`NSArray`和 的`allObjects`方法，则有一个更简单的解决方案`NSEnumerator`：

```
NSArray* reversedArray = [[startArray reverseObjectEnumerator] allObjects]; 
```

[`allObjects`被记录](https://developer.apple.com/documentation/foundation/nsenumerator/1417755-allobjects?language=objc)为返回一个数组，其中包含尚未遍历的对象`nextObject`，按顺序：

> 该数组**按枚举顺序**包含枚举器的所有剩余对象。

* * *

## 回答 #2

> 赞同：306
> 
>             
> 
> 时间：2009-02-25T15:30:56.220

要获得数组的反向副本，请查看[danielpunkass 使用的解决](https://stackoverflow.com/a/586529/24587)方案`reverseObjectEnumerator`。

要反转可变数组，您可以在代码中添加以下类别：

```
@implementation NSMutableArray (Reverse)

- (void)reverse {
    if ([self count] <= 1)
        return;
    NSUInteger i = 0;
    NSUInteger j = [self count] - 1;
    while (i < j) {
        [self exchangeObjectAtIndex:i
                  withObjectAtIndex:j];

        i++;
        j--;
    }
}

@end 
```

* * *

## 回答 #3

> 赞同：50
> 
>             
> 
> 时间：2014-04-01T13:03:57.993

**一些基准**

***1\. reverseObjectEnumerator allObjects***

这是最快的方法：

```
NSArray *anArray = @[@"aa", @"ab", @"ac", @"ad", @"ae", @"af", @"ag",
        @"ah", @"ai", @"aj", @"ak", @"al", @"am", @"an", @"ao", @"ap", @"aq", @"ar", @"as", @"at",
        @"au", @"av", @"aw", @"ax", @"ay", @"az", @"ba", @"bb", @"bc", @"bd", @"bf", @"bg", @"bh",
        @"bi", @"bj", @"bk", @"bl", @"bm", @"bn", @"bo", @"bp", @"bq", @"br", @"bs", @"bt", @"bu",
        @"bv", @"bw", @"bx", @"by", @"bz", @"ca", @"cb", @"cc", @"cd", @"ce", @"cf", @"cg", @"ch",
        @"ci", @"cj", @"ck", @"cl", @"cm", @"cn", @"co", @"cp", @"cq", @"cr", @"cs", @"ct", @"cu",
        @"cv", @"cw", @"cx", @"cy", @"cz"];

NSDate *methodStart = [NSDate date];

NSArray *reversed = [[anArray reverseObjectEnumerator] allObjects];

NSDate *methodFinish = [NSDate date];
NSTimeInterval executionTime = [methodFinish timeIntervalSinceDate:methodStart];
NSLog(@"executionTime = %f", executionTime); 
```

结果：`executionTime = 0.000026`

***2\. 遍历一个 reverseObjectEnumerator***

这慢了 1.5 倍到 2.5 倍：

```
NSDate *methodStart = [NSDate date];
NSMutableArray *array = [NSMutableArray arrayWithCapacity:[anArray count]];
NSEnumerator *enumerator = [anArray reverseObjectEnumerator];
for (id element in enumerator) {
    [array addObject:element];
}
NSDate *methodFinish = [NSDate date];
NSTimeInterval executionTime = [methodFinish timeIntervalSinceDate:methodStart];
NSLog(@"executionTime = %f", executionTime); 
```

结果：`executionTime = 0.000071`

***3\. sortedArrayUsingComparator***

这慢了 30 倍到 40 倍（这并不奇怪）：

```
NSDate *methodStart = [NSDate date];
NSArray *reversed = [anArray sortedArrayUsingComparator: ^(id obj1, id obj2) {
    return [anArray indexOfObject:obj1] < [anArray indexOfObject:obj2] ? NSOrderedDescending : NSOrderedAscending;
}];

NSDate *methodFinish = [NSDate date];
NSTimeInterval executionTime = [methodFinish timeIntervalSinceDate:methodStart];
NSLog(@"executionTime = %f", executionTime); 
```

结果：`executionTime = 0.001100`

`[[anArray reverseObjectEnumerator] allObjects]`在速度和易用性方面，明显的赢家也是如此。

* * *

## 回答 #4

> 赞同：23
> 
>             
> 
> 时间：2009-02-25T15:29:29.907

DasBoot 的方法是正确的，但他的代码中存在一些错误。这是一个完全通用的代码片段，它将反转任何 NSMutableArray：

```
/* Algorithm: swap the object N elements from the top with the object N 
 * elements from the bottom. Integer division will wrap down, leaving 
 * the middle element untouched if count is odd.
 */
for(int i = 0; i < [array count] / 2; i++) {
    int j = [array count] - i - 1;

    [array exchangeObjectAtIndex:i withObjectAtIndex:j];
} 
```

您可以将其包装在 C 函数中，或者为了获得奖励积分，使用类别将其添加到 NSMutableArray。（在这种情况下，'array' 将变为 'self'。）如果需要，您还可以通过`[array count]`在循环之前分配给变量并使用该变量来优化它。

如果您只有一个常规的 NSArray，则无法将其反转，因为 NSArray 无法修改。但是您可以制作反向副本：

```
NSMutableArray * copy = [NSMutableArray arrayWithCapacity:[array count]];

for(int i = 0; i < [array count]; i++) {
    [copy addObject:[array objectAtIndex:[array count] - i - 1]];
} 
```

或者使用这个小技巧在一行中完成：

```
NSArray * copy = [[array reverseObjectEnumerator] allObjects]; 
```

如果您只想向后循环数组，您可以使用`for`/`in`循环`[array reverseObjectEnumerator]`，但使用它可能更有效`-enumerateObjectsWithOptions:usingBlock:`：

```
[array enumerateObjectsWithOptions:NSEnumerationReverse
                        usingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    // This is your loop body. Use the object in obj here. 
    // If you need the index, it's in idx.
    // (This is the best feature of this method, IMHO.)
    // Instead of using 'continue', use 'return'.
    // Instead of using 'break', set '*stop = YES' and then 'return'.
    // Making the surrounding method/block return is tricky and probably
    // requires a '__block' variable.
    // (This is the worst feature of this method, IMHO.)
}]; 
```

（**注**：在 2014 年进行了大量更新，增加了五年的 Foundation 经验，一个或两个新的 Objective-C 特性，以及来自评论的一些提示。）

* * *

## 回答 #5

> 赞同：8
> 
>             
> 
> 时间：2011-03-23T03:11:45.763

在查看了上面其他人的答案并[在此处找到 Matt Gallagher 的讨论之后](http://cocoawithlove.com/2008/05/fast-enumeration-clarifications.html)

我提出这个：

```
NSMutableArray * reverseArray = [NSMutableArray arrayWithCapacity:[myArray count]]; 

for (id element in [myArray reverseObjectEnumerator]) {
    [reverseArray addObject:element];
} 
```

正如马特所说：

> 在上述情况下，您可能想知道 -[NSArray reverseObjectEnumerator] 是否会在循环的每次迭代中运行 - 可能会减慢代码速度。<...>

不久之后，他这样回答：

> <...> "collection" 表达式仅在 for 循环开始时计算一次。这是最好的情况，因为您可以安全地将昂贵的函数放在“集合”表达式中，而不会影响循环的每次迭代性能。

* * *

## 回答 #6

> 赞同：8
> 
>             
> 
> 时间：2011-05-12T12:05:53.740

Georg Schölly 的分类非常好。但是，对于 NSMutableArray，使用 NSUIntegers 作为索引会在数组为空时导致崩溃。正确的代码是：

```
@implementation NSMutableArray (Reverse)

- (void)reverse {
    NSInteger i = 0;
    NSInteger j = [self count] - 1;
    while (i < j) {
        [self exchangeObjectAtIndex:i
                  withObjectAtIndex:j];

        i++;
        j--;
    }
}

@end 
```

* * *

## 回答 #7

> 赞同：8
> 
>             
> 
> 时间：2015-05-10T02:11:31.543

## 反向枚举数组的最有效方法：

使用`enumerateObjectsWithOptions:NSEnumerationReverse usingBlock`. 使用上述@JohannesFahrenkrug 的基准测试，完成速度比以下速度快 8 倍`[[array reverseObjectEnumerator] allObjects];`：

```
NSDate *methodStart = [NSDate date];

[anArray enumerateObjectsWithOptions:NSEnumerationReverse usingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    //
}];

NSDate *methodFinish = [NSDate date];
NSTimeInterval executionTime = [methodFinish timeIntervalSinceDate:methodStart];
NSLog(@"executionTime = %f", executionTime); 
```

* * *

## 回答 #8

> 赞同：7
> 
>             
> 
> 时间：2014-01-21T14:36:37.337

```
NSMutableArray *objMyObject = [NSMutableArray arrayWithArray:[self reverseArray:objArrayToBeReversed]];

// Function reverseArray 
-(NSArray *) reverseArray : (NSArray *) myArray {   
    return [[myArray reverseObjectEnumerator] allObjects];
} 
```

* * *

## 回答 #9

> 赞同：3
> 
>             
> 
> 时间：2015-03-25T20:15:52.970

反转数组并循环遍历它：

```
[[[startArray reverseObjectEnumerator] allObjects] enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    ...
}]; 
```

* * *

## 回答 #10

> 赞同：2
> 
>             
> 
> 时间：2016-04-17T19:45:40.143

要更新这一点，在 Swift 中可以通过以下方式轻松完成：

```
array.reverse() 
```

* * *

## 回答 #11

> 赞同：1
> 
>             
> 
> 时间：2013-10-14T01:45:59.023

至于我，您是否首先考虑过数组是如何填充的？我正在将许多对象添加到数组中，并决定在开头插入每个对象，将任何现有对象向上推。在这种情况下，需要一个可变数组。

```
NSMutableArray *myMutableArray = [[NSMutableArray alloc] initWithCapacity:1];
[myMutableArray insertObject:aNewObject atIndex:0]; 
```

* * *

## 回答 #12

> 赞同：1
> 
>             
> 
> 时间：2015-01-23T10:24:12.047

或 Scala 方式：

```
-(NSArray *)reverse
{
    if ( self.count < 2 )
        return self;
    else
        return [[self.tail reverse] concat:[NSArray arrayWithObject:self.head]];
}

-(id)head
{
    return self.firstObject;
}

-(NSArray *)tail
{
    if ( self.count > 1 )
        return [self subarrayWithRange:NSMakeRange(1, self.count - 1)];
    else
        return @[];
} 
```

* * *

## 回答 #13

> 赞同：1
> 
>             
> 
> 时间：2017-12-09T20:17:39.143

有一种简单的方法可以做到这一点。

```
 NSArray *myArray = @[@"5",@"4",@"3",@"2",@"1"];
    NSMutableArray *myNewArray = [[NSMutableArray alloc] init]; //this object is going to be your new array with inverse order.
    for(int i=0; i<[myNewArray count]; i++){
        [myNewArray insertObject:[myNewArray objectAtIndex:i] atIndex:0];
    }
    //other way to do it
    for(NSString *eachValue in myArray){
        [myNewArray insertObject:eachValue atIndex:0];
    }

    //in both cases your new array will look like this
    NSLog(@"myNewArray: %@", myNewArray);
    //[@"1",@"2",@"3",@"4",@"5"] 
```

我希望这有帮助。

* * *

## 回答 #14

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:16:28.800

我不知道任何内置方法。但是，手工编码并不太难。假设您正在处理的数组元素是整数类型的 NSNumber 对象，并且“arr”是您要反转的 NSMutableArray。

```
int n = [arr count];
for (int i=0; i<n/2; ++i) {
  id c  = [[arr objectAtIndex:i] retain];
  [arr replaceObjectAtIndex:i withObject:[arr objectAtIndex:n-i-1]];
  [arr replaceObjectAtIndex:n-i-1 withObject:c];
} 
```

由于您从 NSArray 开始，因此您必须首先使用原始 NSArray ('origArray') 的内容创建可变数组。

```
NSMutableArray * arr = [[NSMutableArray alloc] init];
[arr setArray:origArray]; 
```

编辑：修复了循环计数中的 n -> n/2 并将 NSNumber 更改为更通用的 id，这是由于 Brent 回答中的建议。

* * *

## 回答 #15

> 赞同：0
> 
>             
> 
> 时间：2013-06-06T13:04:45.800

试试这个：

```
for (int i = 0; i < [arr count]; i++)
{
    NSString *str1 = [arr objectAtIndex:[arr count]-1];
    [arr insertObject:str1 atIndex:i];
    [arr removeObjectAtIndex:[arr count]-1];
} 
```

* * *

## 回答 #16

> 赞同：0
> 
>             
> 
> 时间：2013-12-16T23:06:35.743

如果您只想反向迭代，请尝试以下操作：

```
// iterate backwards
nextIndex = (currentIndex == 0) ? [myArray count] - 1 : (currentIndex - 1) % [myArray count]; 
```

您可以执行一次 [myArrayCount] 并将其保存到局部变量中（我认为它很昂贵），但我也猜测编译器几乎会使用上面编写的代码做同样的事情。

* * *

## 回答 #17

> 赞同：0
> 
>             
> 
> 时间：2017-05-30T18:04:26.820

斯威夫特 3 语法：

```
let reversedArray = array.reversed() 
```

* * *

## 回答 #18

> 赞同：0
> 
>             
> 
> 时间：2018-07-14T19:00:36.247

这是一个很好的宏，适用于 NSMutableArray*或*NSArray：

```
#define reverseArray(__theArray) {\
    if ([__theArray isKindOfClass:[NSMutableArray class]]) {\
        if ([(NSMutableArray *)__theArray count] > 1) {\
            NSUInteger i = 0;\
            NSUInteger j = [(NSMutableArray *)__theArray count]-1;\
            while (i < j) {\
                [(NSMutableArray *)__theArray exchangeObjectAtIndex:i\
                                                withObjectAtIndex:j];\
                i++;\
                j--;\
            }\
        }\
    } else if ([__theArray isKindOfClass:[NSArray class]]) {\
        __theArray = [[NSArray alloc] initWithArray:[[(NSArray *)__theArray reverseObjectEnumerator] allObjects]];\
    }\
} 
```

* * *

要使用只需调用：`reverseArray(myArray);`

# c# - 使用 MSChart 的堆积图

> ID：586375
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-25T15:13:01.427
> 
>         
> 
> 标签：c#, asp.net, charts, mschart

我正在尝试使用相对较新的[Microsoft Chart Controls](http://code.msdn.microsoft.com/mschart)创建堆叠图表。我确信我遗漏了一些明显的东西，但一点帮助会有很长的路要走。下面的代码创建一个包含两列的图表。我希望柱子彼此堆叠。此外，我希望将两者的总数显示在图表上。任何帮助将非常感激。

```
Series activeSeries = new Series("Active");
activeSeries.ChartType = SeriesChartType.StackedColumn;
activeSeries.BorderWidth = 3;
activeSeries.ShadowOffset = 2;

activeSeries.Points.AddY(3000);
LaptopChart.Series.Add(activeSeries);

Series inactiveSeries = new Series("Inactive");
inactiveSeries.ChartType = SeriesChartType.StackedColumn;
inactiveSeries.BorderWidth = 3;
inactiveSeries.ShadowOffset = 2;

activeSeries.Points.AddY(987);
LaptopChart.Series.Add(inactiveSeries); 
```

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T16:40:14.463

创建第二个系列时骨骼头部移动我将非活动点添加到活动系列中。有时，无论您多久浏览一次自己的代码，都需要第二双眼睛才能找到东西。很抱歉浪费任何人的时间看这个。第二次引用 activeSeries.Points.AddY(987); 应该是 inactiveSeries.Points.AddY(987);

# sql - MySQL 不使用带有 WHERE IN 子句的索引？

> ID：586381
> 
>         
> 
> 赞同：62
> 
>         
> 
> 时间：2009-02-25T15:14:02.457
> 
>         
> 
> 标签：sql, mysql, ruby-on-rails, database, optimization

我正在尝试优化我的 Rails 应用程序中的一些数据库查询，我有几个让我难过。他们都在使用`IN`in`WHERE`子句，并且都在进行全表扫描，即使适当的索引似乎已经到位。

例如：

```
SELECT `user_metrics`.* FROM `user_metrics` WHERE (`user_metrics`.user_id IN (N,N,N,N,N,N,N,N,N,N,N,N)) 
```

执行全表扫描并`EXPLAIN`说：

```
select_type: simple
type: all
extra: using where
possible_keys: index_user_metrics_on_user_id  (which is an index on the user_id column)
key: (none)
key_length: (none)
ref: (none)
rows: 208 
```

使用语句时是否不使用索引`IN`或者我需要做一些不同的事情？这里的查询是由 Rails 生成的，所以我可以重新审视我的关系是如何定义的，但我想我应该先从数据库级别的潜在修复开始。

* * *

## 回答 #1

> 赞同：49
> 
>             
> 
> 时间：2009-02-25T16:52:34.403

请参阅[MySQL 如何使用索引](http://dev.mysql.com/doc/refman/5.1/en/mysql-indexes.html)。

还要验证在向表中添加额外的 2000 左右行后MySQL 是否仍执行[全表扫描](https://dev.mysql.com/doc/refman/8.0/en/table-scan-avoidance.html)`user_metrics`。在小表中，按索引访问实际上比表扫描更昂贵（I/O 方面），MySQL 的优化器可能会考虑到这一点。

*与我之前的帖子相反*，事实证明 MySQL 也在[使用基于成本的优化器](http://forge.mysql.com/wiki/MySQL_Internals_Optimizer)，这是一个非常好的消息 - 也就是说，只要您`ANALYZE`认为数据库中的数据量*代表*未来的日常使用。

在处理基于成本的优化器（Oracle、Postgres 等）时，您需要确保定期[`ANALYZE`](http://dev.mysql.com/doc/refman/5.1/en/analyze-table.html)在各种表上运行，因为它们的大小增加了 10-15% 以上。（默认情况下，Postgres 会自动为您执行此操作，而其他 RDBMS 会将此责任留给 DBA，即您。）通过统计分析，`ANALYZE`将帮助优化器更好地了解多少 I/O（以及其他相关资源）在各种候选执行计划之间进行选择时，将涉及例如排序所需的 CPU）。运行失败`ANALYZE`可能会导致非常糟糕的，有时甚至是灾难性的计划决策（例如，毫秒查询有时会因为s上的*错误嵌套循环*`JOIN`而花费数小时。）

如果运行后性能仍然不令人满意[，](http://bugs.mysql.com/bug.php?id=28612)那么您`ANALYZE`通常可以通过使用提示来解决该问题，`FORCE INDEX`例如使用 Rails 的）。`nested_set`

现在，**由于您在 Rails 应用程序**`ActiveRecord`中，因此发出带有提示的自定义查询而不是继续使用- 生成的查询将很麻烦（并且破坏了 的目的） `ActiveRecord`。

我曾提到，在我们的 Rails 应用程序中，切换到 Postgres 后，*所有* `SELECT`查询都下降到 100 毫秒以下，而`ActiveRecord`MySQL 5.1 生成的一些复杂连接有时会花费 15 秒或更长时间，因为带有内表扫描的嵌套循环，即使在索引时可用。没有优化器是完美的，您应该了解这些选项。除了查询计划优化之外，需要注意的其他潜在性能问题是锁定。不过，这超出了您的问题范围。

* * *

## 回答 #2

> 赞同：16
> 
>             
> 
> 时间：2009-02-25T15:22:34.837

尝试强制这个索引：

```
SELECT `user_metrics`.*
FROM `user_metrics` FORCE INDEX (index_user_metrics_on_user_id)
WHERE (`user_metrics`.user_id IN (N,N,N,N,N,N,N,N,N,N,N,N)) 
```

我刚刚检查过，它确实在完全相同的查询上使用了索引：

```
EXPLAIN EXTENDED
SELECT * FROM tests WHERE (test IN ('test 1', 'test 2', 'test 3', 'test 4', 'test 5', 'test 6', 'test 7', 'test 8', 'test 9'))

1, 'SIMPLE', 'tests', 'range', 'ix_test', 'ix_test', '602', '', 9, 100.00, 'Using where' 
```

* * *

## 回答 #3

> 赞同：8
> 
>             
> 
> 时间：2009-02-26T00:56:07.970

有时 MySQL 不使用索引，即使索引可用。发生这种情况的一种情况是优化器估计使用索引将需要 MySQL 访问表中很大比例的行。（在这种情况下，表扫描可能会快得多，因为它需要的搜索次数更少。）

多少百分比的行匹配您的 IN 子句？

* * *

## 回答 #4

> 赞同：7
> 
>             
> 
> 时间：2016-12-03T19:37:11.853

我知道我参加聚会要迟到了。但希望我可以帮助其他有类似问题的人。

最近，我遇到了同样的问题。然后我决定使用 self-join-thing 来解决我的问题。问题不在于 MySQL。问题是我们。子查询的返回类型与我们的表不同。所以我们必须将子查询的类型转换为选择列的类型。下面是示例代码：

```
select `user_metrics`.* 
from `user_metrics` um 
join (select `user_metrics`.`user_id` in (N, N, N, N) ) as temp 
on um.`user_id` = temp.`user_id` 
```

或者我自己的代码：

旧：（不使用索引：~4s）

```
SELECT 
    `jxm_character`.*
FROM
    jxm_character
WHERE
    information_date IN (SELECT DISTINCT
            (information_date)
        FROM
            jxm_character
        WHERE
            information_date >= DATE_SUB('2016-12-2', INTERVAL 7 DAY))
        AND `jxm_character`.`ranking_type` = 1
        AND `jxm_character`.`character_id` = 3146089; 
```

新：（使用指数：~0.02s）

```
SELECT 
    *
FROM
    jxm_character jc
        JOIN
    (SELECT DISTINCT
        (information_date)
    FROM
        jxm_character
    WHERE
        information_date >= DATE_SUB('2016-12-2', INTERVAL 7 DAY)) AS temp 
        ON jc.information_date = STR_TO_DATE(temp.information_date, '%Y-%m-%d')
        AND jc.ranking_type = 1
        AND jc.character_id = 3146089; 
```

jxm_字符：

*   记录：~3.5M

*   PK: jxm_character(information_date,ranking_type,character_id)

`SHOW VARIABLES LIKE '%version%';`

```
'protocol_version', '10'
'version', '5.1.69-log'
'version_comment', 'Source distribution' 
```

最后注意事项：确保您了解 MySQL 索引最左侧规则。

P/s：对不起我的英语不好。我发布我的代码（当然是生产）以清除我的解决方案：D。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:19:33.533

如果删除 where 子句周围的多余括号，它会变得更好吗？

尽管可能只是因为您只有 200 左右的行，但它决定表扫描会更快。尝试使用包含更多记录的表。

# c# - 带有 ASP.NET 的 C# 灯箱效果/控件

> ID：586387
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-25T15:14:34.140
> 
>         
> 
> 标签：c#, asp.net, lightbox, thickbox, imagebutton

更新：关于ThickBox，我找到了支持按钮的版本，但是当我尝试使用控件并在设计模式下添加它们时，我收到一条消息“操作无法完成”。不知道还能做什么:(知道我为什么收到这条消息吗？

* * *

我已经找到了 Ajax Control Toolkit，但由于某种原因无法安装它（使用 Visual Studio 2008）。我还找到[了ThickBox](http://www.dotnet6.com/files/folders/controls/entry1107.aspx)，但我不知道如何通过单击C# Imagebutton 控件来触发灯箱效果弹出窗口。它需要触发一个 ASP .NET 页面。

还有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T15:29:34.850

我可以建议不要使用 AjaxControlToolKit。这是供客户端下载的大量代码。尝试看看 jQuery 和插件（例如 jqModal）

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:22:38.253

Ajax Control Toolkit 已经内置在 Visual Studio 2008 / Framework 3.5 中，该工具包适用于 Studio 2005 用户。

看一下thickbox，但它最初是为Framework 2.0 w\ Toolkit 发布的，虽然AJAX 的东西是内置的，但偶尔会出现一些兼容性问题。

[编辑]实际上我看到他们为 Studio 2008/.NET 3.5 明确下载了 AJAX 工具包，另外..你看过控制包附带的示例“Test2”站点吗？您必须将要单击的图像设置为 dotnet6:ThickBoxImage 的，查看示例，在解决方案转换完成后，它在 Visual Studio 2008 中运行良好。是的，jQuery 和它的朋友值得研究。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:24:59.573

你试过 jQuery 的[SimpleModal](http://www.ericmmartin.com/projects/simplemodal/)插件吗？

它很容易使用。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:28:32.793

我们在我们的项目中使用 jqmodal，它很棒

回复：崩溃的工具箱，这可能是你的问题吗？[http://social.msdn.microsoft.com/forums/en-US/vs2008sp1beta/thread/60a4b642-9495-43ec-bf3b-88526b601c99/](http://social.msdn.microsoft.com/forums/en-US/vs2008sp1beta/thread/60a4b642-9495-43ec-bf3b-88526b601c99/)

在这里找到对我有用的解决方案：
 [http ://www.tech-archive.net/Archive/VisualStudio/microsoft.public.vsnet.ide/2008-03/msg00083.html](http://www.tech-archive.net/Archive/VisualStudio/microsoft.public.vsnet.ide/2008-03/msg00083.html)

# vb.net - 自定义泛型集合中的索引超出范围异常

> ID：586389
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-25T15:14:44.280
> 
>         
> 
> 标签：vb.net

我写了一个导入 System.Collections.ObjectModel 的类。对于收藏的管理，我写过：

```
Default Public ReadOnly Property Item(ByVal vntIndexKey As Integer) As ItemType
    Get
        Return CType(mCol.Item(vntIndexKey), ItemType)
    End Get
End Property 
```

然后当我调试时，我被告知：

“索引超出范围。必须是非负数且小于集合的大小。”

“ItemType”始终是一个对象，在调试过程中，我可以看到 vntIndexKey=1。

有人能告诉我为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-02-25T15:17:21.637

您的代码在语法上没有任何问题。看来问题是您正在尝试访问集合中不存在的元素。基础集合类说元素“1”超出了集合的范围。只有 0-(collection.Count-1) 是有效索引。

集合中有多少项目？  

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:19:54.033

当时收藏品有多少？请务必检查索引是否大于或等于下限且小于或等于上限。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:30:14.087

很有可能您的收藏中没有任何内容

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T15:33:01.653

[您可以试验3.5 SP1](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=361539)中出现的错误：

# visual-studio - 我可以为 Visual Studio 项模板的时间戳等自定义参数生成值吗？

> ID：586400
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-25T15:16:12.263
> 
>         
> 
> 标签：visual-studio, templates

我想将当前时间戳作为 Visual Studio 项目模板的一部分（用户创建文件时的时间戳）。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-02-25T15:49:48.267

这真的很简单。您可以使用几个内置的替换参数。对于时间戳，在模板中包含**$time$ 。**它将替换为**DD/MM/YYYY HH:MM:SS**格式的当前日期和时间。

查看这个出色的指南：[为您的开发团队创建可重用的项目和项目模板](http://msdn.microsoft.com/en-us/magazine/cc188697.aspx)

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T15:33:59.630

通过实现向导，您可以在展开模板时执行代码。该向导不需要用户界面，但可以填充名称/值对的字典。然后可以将这些值替换到模板中。

在 Visual Studio SDK 文档中查找名为“如何：将向导与项目模板一起使用”的主题。我相信您也可以在项目模板中使用向导。

此外，请查看 Guidance Automation Toolkit，它提供了一种创建向导的声明方式，以及许多其他功能。

# java - Java处理大文件有哪些小技巧

> ID：586409
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-25T15:17:40.870
> 
>         
> 
> 标签：java, nio, large-files

我需要对 Java 中的大文件执行简单的 grep 和其他操作。我对 Java NIO 实用程序不太熟悉，但我假设这是我需要使用的。你有什么资源或有用的提示来读/写大文件。另外，我正在开发一个 SWT 应用程序，需要在 GUI 的文本区域内显示部分数据。  

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-02-25T15:39:25.607

`java.io.RandomAccessFile`使用 long 作为文件指针偏移量，所以应该能够应付。但是，您应该一次读取一个块，否则开销会很高。`FileInputStream`工作原理类似。

Java NIO 应该不会太难。你不需要弄乱`Selector`s 或类似的东西。事实上，在 JDK7 之前你不能选择 with files。但是，请避免映射文件。没有取消映射，因此如果您尝试大量执行此操作，您将在 32 位系统上耗尽地址空间，或者遇到其他问题（NIO 确实尝试调用 GC，但这有点 hack）。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T16:43:39.057

如果您所做的只是一次读取整个文件的一个块，没有特殊处理，那么 nio`java.io.RandomAccessFile`可能是矫枉过正。一次只读取和处理文件的内容。确保使用`BufferedInputStream`或`BufferedReader`。

如果你必须阅读整个文件来做你正在做的事情，而你一次只阅读一个文件，那么你从 nio 中获得的好处很少。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T16:32:47.943

也许有点跑题了：看看 apache 的[VFS](http://commons.apache.org/vfs/)。从应用程序的角度来看，它最初是一个库，用于将 ftp-http-file-whatever 系统隐藏在文件系统外观后面。我在这里提到它是因为我在使用这个库访问大文件（通过 ftp）以进行搜索、阅读、复制等（在这种情况下大意味着 > 15MB）方面有积极的经验。

# c++ - 使用 std::cout 的表格布局

> ID：586410
> 
>         
> 
> 赞同：12
> 
>         
> 
> 时间：2009-02-25T15:18:24.723
> 
>         
> 
> 标签：c++, formatting, stream, iostream

如何在 C++ 流中格式化我的输出以打印固定宽度的左对齐表格？就像是

```
printf("%-14.3f%-14.3f\n", 12345.12345, 12345.12345); 
```

生产

```
12345.123     12345.123 
```

* * *

## 回答 #1

> 赞同：17
> 
>             
> 
> 时间：2009-02-25T15:24:39.637

包括标准标题[`<iomanip>`](http://www.cplusplus.com/query/search.cgi?q=iomanip)并发疯。具体来说，`setw`操纵器设置输出宽度。`setfill`设置填充字符。

* * *

## 回答 #2

> 赞同：15
> 
>             
> 
> 时间：2009-02-25T15:23:37.033

```
std::cout << std::setiosflags(std::ios::fixed)
          << std::setprecision(3)
          << std::setw(18)
          << std::left
          << 12345.123; 
```

* * *

## 回答 #3

> 赞同：11
> 
>             
> 
> 时间：2009-02-25T15:26:04.283

您还可以考虑以下之一提供的更友好的功能：

*   [Boost.Format](http://www.boost.org/doc/libs/1_38_0/libs/format/index.html)（功能强大，但非常繁重，比其他提到的更多时间和内存分配）

*   [Loki.SafeFormat](http://loki-lib.sourceforge.net/index.php?n=Idioms.Printf)

*   [FastFormat](http://www.fastformat.org/)（相对较新，但速度极快的库，与其他库不同，也是类型安全的）

凭记忆写，但应该是这样的：

```
// Dumb streams:
printf("%-14.3f%-14.3f\n", 12345.12345, 12345.12345);

// For IOStreams you've got example in the other answers

// Boost Format supports various flavours of formatting, for example:
std::cout << boost::format("%-14.3f%-14.3f\n") % a % b;
std::cout << boost::format("%1$-14.3f%2$-14.3f\n") % a % b;
// To gain somewhat on the performance you can store the formatters:
const boost::format foo("%1$-14.3f%2$-14.3f\n");
std::cout << boost::format(foo) % a % b;

// For the Loki::Printf it's also similar:
Loki::Printf("%-14.3f%-14.3f\n")(a)(b);

// And finally FastFormat.Format (don't know the syntax for decimal places)
fastformat::fmtln(std::cout, "{0,14,,<}{1,14,,>}", a, b); 
```

此外，如果您打算坚持使用这些格式库中的任何一个，请彻底检查它们在可表达性、可移植性（和其他库依赖性）、效率、国际化支持、类型安全等方面的局限性。

* * *

## 回答 #4

> 赞同：5
> 
>             
> 
> 时间：2009-02-25T15:25:02.477

您想使用流操纵器：

[http://www.deitel.com/articles/cplusplus_tutorials/20060218/index.html](http://www.deitel.com/articles/cplusplus_tutorials/20060218/index.html)

# pdf - 有没有免费的方法将 RTF 转换为 PDF？

> ID：586411
> 
>         
> 
> 赞同：21
> 
>         
> 
> 时间：2009-02-25T15:18:44.347
> 
>         
> 
> 标签：pdf, rtf

如何以编程方式将[RTF](http://en.wikipedia.org/wiki/Rich_Text_Format)文档转换为[PDF](http://en.wikipedia.org/wiki/Portable_Document_Format)？

* * *

## 回答 #1

> 赞同：17
> 
>             
> 
> 时间：2009-02-25T15:47:12.313

[OpenOffice.org](http://www.openoffice.org/)可以在服务器模式下运行（即没有任何 GUI），可以读取 RTF 文件并可以输出 PDF 文件。

* * *

## 回答 #2

> 赞同：14
> 
>             
> 
> 时间：2009-02-25T16:25:52.860

您有**多种选择，**具体取决于：

*   您的应用程序将在哪个平台上运行

*   您的应用程序将是服务器应用程序（例如，您设置一次然后运行的 Web 服务），还是广泛可用的桌面应用程序（例如，必须易于许多人下载和安装的应用程序）

*   您是否愿意投入很少或更多的编程工作来使解决方案发挥作用

*   您是否灵活地使用您将使用的编程语言

以下是一些选项：

1.  [PDFCreator](http://sourceforge.net/projects/pdfcreator/) + [COM](http://en.wikipedia.org/wiki/Component_Object_Model)

    *   仅限 Windows

    *   适用于桌面和服务器应用程序

    *   中等编程工作量

    *   任何可以让你说 COM 的语言

2.  [OpenOffice](http://www.openoffice.org/)（+ [JODConverter](http://www.artofsolving.com/opensource/jodconverter) - 可选）

    *   跨平台（Windows、Linux 等）

    *   适用于服务器应用程序，因为 OpenOffice 是 100MB+ 下载

    *   低编程工作量

    *   Java（如果使用 JODConverter），或任何可以与[OpenOffice 的 UNO交互的语言](http://wiki.services.openoffice.org/wiki/Uno)

3.  [IText](http://www.lowagie.com/iText/) + [Apache POI](http://poi.apache.org/)

    *   跨平台（Windows、Linux 等）

    *   适用于桌面和服务器应用程序

    *   高编程工作量

    *   爪哇

* * *

**编辑**

这是一篇[较旧的帖子](https://stackoverflow.com/questions/437394/java-library-for-converting-word-documents-to-pdfs-or-images)，与您的问题有一些共同点。

* * *

**编辑 2**

我从您的评论中看到您在 Linux 上并且对 C++ 或 Java 开放。  **绝对使用选项2。**

*   `JODConverter`(Java)：该库负责以无头模式生成并代表您与它`OpenOffice`交谈。`Uno`您提供`JODConverter`输入和输出文件名以及输入和输出类型（例如 rtf 和 pdf），当它返回给您时，输出文件就准备好了。

*   C++：您可以在无头模式下 fork+exec 一个（或多个，用于负载平衡）OpenOffice 实例（soffice 将侦听套接字上的 UNO 请求，例如端口 8100。）在您的应用程序中使用[Uno/CPP](http://wiki.services.openoffice.org/wiki/Uno/Cpp)来指示 OpenOffice 执行转换同样的方式`JODConverter`（参见`JODConverter`源代码以了解如何执行此操作。）

> `/opt/openoffice.org3/program/soffice.bin \`
> 
>   `-accept=socket,host=127.0.0.1,port=8100;urp; \`
> 
>   `-headless -nocrashreport -nodefault \`
> 
>   `-nolockcheck -nologo -norestore`

*我成功地使用`JODConverter`Java 应用程序将杂项文档类型（一些从模板动态生成的文档）转换为`pdf`.*

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2013-11-08T13:26:22.973

在这里聚会晚了四年，但我在我的 Web 应用程序中使用了[Ted 。](http://www.nllgg.nl/ted/)我以编程方式生成 RTF，然后使用`rtf2pdf.sh`包中包含的脚本生成 PDF。我之前尝试过 OOo 和 unoconv，但 Ted 在我的应用程序中被证明更快、更可靠。

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T15:21:16.040

使用 PDFCreator，一款免费的 pdf 打印机。只需打印为pdf。您可以通过 COM 控制它。示例代码位于安装目录的 COM 文件夹中。

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T15:33:07.200

[PDFCreator for windows](http://sourceforge.net/projects/pdfcreator/)是最简单的单个文档。

还可以通过将大量文档转换为 XML 并使用 XSLT 和 XSL-FO 来自动为大量文档创建 PDF。有[很多关于这个的教程](http://cocoon.apache.org/2.1/howto/howto-html-pdf-publishing.html)。

对于特定语言，例如 python，存在用于输出到 PDF 的库相当简单。

与其他更简单的解决方案相比，XML 的唯一优势是可扩展性。您还可以通过编程方式以 RTF、HTML、TXT 或几乎任何其他文本格式输出您的文档。

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2014-04-04T09:59:20.547

LibreOffice 可以通过命令行将 RTF 文档转换为 PDF。

[**以下**](http://www.tecmint.com/install-libreoffice-on-rhel-entos-6-3-5-8-and-fedora-17-16/)是在 CentOS 上安装它的说明。

这是从 PHP 代码启动转换的示例：

```
<?php shell_exec('libreoffice4.2 --headless --invisible --norestore --convert-to pdf test.rtf'); ?> 
```

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T23:26:29.493

[普里莫PDF](http://www.primopdf.com/)。它充当虚拟打印机，因此您只需打印到它，然后弹出一个 PDF。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-03-25T13:25:26.427

看[PDF打印机](http://www.pdfsvg.com)

# java - 为什么 SWT Composite 有时需要调用 resize() 才能正确布局？

> ID：586414
> 
>         
> 
> 赞同：21
> 
>         
> 
> 时间：2009-02-25T15:19:26.047
> 
>         
> 
> 标签：java, swt

有时我们会遇到一个绝对拒绝正确布局的 SWT 组合。当我们在组合上调用 dispose，然后用另一个替换它时，我们经常会遇到这种情况；虽然它似乎并不严格限于这种情况。

当我们遇到这个问题时，大约 50% 的情况下，我们可以在`pack()`有`layout()`问题的组合上跟注，一切都会好起来的。但是，大约 50% 的时间，我们必须这样做：

```
Point p = c.getSize();
c.setSize(p.x+1, p.y+1);
c.setSize(p); 
```

几乎所有布局管理器等组合都会发生这种情况。

我希望我有一个漂亮、简单、可重现的案例，但我没有。我希望有人会认识到这个问题并说：“嗯，呃，你错过了 xyz ......”

* * *

## 回答 #1

> 赞同：31
> 
>             
> 
> 时间：2009-02-25T15:48:27.973

在我看来，**布局的缓存已过时，需要刷新**。

SWT 中的布局支持缓存，并且通常会缓存控件的首选大小，或者他们喜欢缓存的任何内容：

```
public abstract class Layout {
    protected abstract Point computeSize (Composite composite, int wHint, int hHint, boolean flushCache);
    protected boolean flushCache (Control control) {...}
    protected abstract void layout (Composite composite, boolean flushCache);
} 
```

我对 SWT 编程（前 Swing 程序员）相对较新，但遇到了布局未正确更新的类似情况。我通常能够使用*其他*布局方法来解决它们，这些方法也会导致布局刷新其缓存：

```
layout(boolean changed)

layout(boolean changed, boolean allChildren) 
```

* * *

## 回答 #2

> 赞同：21
> 
>             
> 
> 时间：2009-03-26T16:45:34.740

同时，在运行时更改或调整控制层次结构的某些部分时，我了解了更多关于 SWT 的缺点。`ScrolledComposite`当s 和`ExpandBar`s 应该调整其最小或首选的内容大小时，也需要显式更新。

我写了一个小助手方法，它可以重新验证已更改控件的控件层次结构的布局：

```
public static void revalidateLayout (Control control) {

    Control c = control;
    do {
        if (c instanceof ExpandBar) {
            ExpandBar expandBar = (ExpandBar) c;
            for (ExpandItem expandItem : expandBar.getItems()) {
                expandItem
                    .setHeight(expandItem.getControl().computeSize(expandBar.getSize().x, SWT.DEFAULT, true).y);
            }
        }
        c = c.getParent();

    } while (c != null && c.getParent() != null && !(c instanceof ScrolledComposite));

    if (c instanceof ScrolledComposite) {
        ScrolledComposite scrolledComposite = (ScrolledComposite) c;
        if (scrolledComposite.getExpandHorizontal() || scrolledComposite.getExpandVertical()) {
            scrolledComposite
                .setMinSize(scrolledComposite.getContent().computeSize(SWT.DEFAULT, SWT.DEFAULT, true));
        } else {
            scrolledComposite.getContent().pack(true);
        }
    }
    if (c instanceof Composite) {
        Composite composite = (Composite) c;
        composite.layout(true, true);
    }
} 
```

* * *

## 回答 #3

> 赞同：16
> 
>             
> 
> 时间：2009-02-25T15:59:15.687

复合材料的布局负责布置该复合材料的子项。因此，如果复合体的大小没有改变，但子项的相对位置和大小需要更新，`layout()`则调用复合体。但是，如果需要更新组合本身的大小或位置，则必须调用`layout()`其父组合（依此类推，直到到达外壳）。

经验法则：如果您添加或删除了控件，或者以其他方式完成了需要重新布局的操作，请沿着小部件层次结构向上走，直到找到带有滚动条的组合并调用`layout()`它。停止在带有滚动条的组合上的原因是它的大小不会随着变化而改变——它的滚动条会“吸收”它。

请注意，如果需要布局的更改不是新子代或已移除子代，则应`Composite.changed(new Control[] {changedControl})`在调用布局之前调用。

* * *

## 回答 #4

> 赞同：4
> 
>             
> 
> 时间：2015-10-12T09:31:26.323

我刚刚意识到 Composite.changed(Control[] children)。几年前我读过一篇广泛的文章：

[http://www.eclipse.org/articles/article.php?file=Article-Understanding-Layouts/index.html](http://www.eclipse.org/articles/article.php?file=Article-Understanding-Layouts/index.html)

本文还提到调用 Composite.layout(boolean changed, boolean all) 来更新布局：“调用 layout() 与调用 layout(true) 相同，后者告诉 ColumnLayout 在设置子元素的边界之前刷新其缓存。” 这都是正确的，从那以后我一直在做的事情。但这不是人们想要的，因为当您想要更新布局时，它基本上会破坏布局缓存的好处，因为一个或几个控件已经改变了需求。

想象一下，您在 GridLayout 中有一堆 StyledText 小部件，您需要更改其中一个的大小。在 StyledText 上调用 computeSize() 非常昂贵。而不是这个：

错误的：

```
parent.layout(true); 
```

...它对所有孩子调用 computeSize()，即使他们的要求没有改变。你应该做这个：

对：

```
parent.changed(new Control[] { theChangedChild }); 
```

然后要么

```
rootComposite.layout(false, true); 
```

或者

```
parent.layout(false); 
```

不是很直观。layout() 的参数命名不当。与其称它为“已更改”，不如将其称为“ignoreCache”之类的。直观的事情是在发生变化时传递“true”。相反，您需要传递“false”，但在执行之前使用 changed() 使已更改控件的缓存无效...

请注意，调用 changed() 还将递归地使仅父控件的缓存在其自己的父控件中无效，这完全有意义。因此，当您调用 layout() 时，您应该在根组合（通常是 Shell）上调用它，并且 all=true，除非您知道更改控件的父级的大小将或不能响应更改。

# iphone - 在大尺寸自定义视图中快速绘图

> ID：586417
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-25T15:19:44.673
> 
>         
> 
> 标签：iphone, cocoa-touch, opengl-es, uiscrollview

我正在为 iPhone 开发钢琴应用程序。我想开发可平滑滚动的键盘（如 Music Sampler）。

我在 UIScrollView 中放置了一个自定义视图（1440px x 120px）。我想使用 OpenGL，因为 Quartz 太慢了。但我无法在 1440 像素中制作 OpenGL 视图。

有什么想法可以制作一个更快、更大尺寸的自定义视图吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T18:52:24.100

为此使用 OpenGL 将是矫枉过正和一个坏主意。您将浪费大量时间来设置 UIView 中已经为您提供的东西，例如触摸处理。

我见过有两种在 iPhone 上布置非标准键盘的方法。首先是创建一个静态 UIImageView ，其中包含整个键盘的表示，在此视图中捕获触摸事件，并将这些触摸事件的位置与键盘上预呈现的键的位置相匹配。如果用户按下您的一个虚拟键，您会覆盖某种图像，显示该键向您弹出，然后您处理按键。我相信这是许多计算器应用程序采用的方法。

另一种方法是将每个键设置为单独的 UIView，将它们布置在更大的超级视图中，并让每个键处理它们的触摸事件。这就是我在[此处显示的界面中](http://www.sunsetlakesoftware.com/sites/default/files/PiCubedBeta72.png)所做的。下部菜单由两个子菜单组成，在子菜单中，每个菜单按钮都是单独的 UIView。它们的内容（边框、光泽和文本）是通过 Quartz 渲染的，但渲染只发生一次。因为这些视图是有图层支持的，所以它们会缓存绘制的内容，并且动画和滚动非常流畅。触摸事件触发每个菜单项的操作。请注意，菜单的上半部分包含在 UIScrollView 中，因此您可以滚动查看更多选项。

我个人的建议是使用后一种方法，因为在启动时动态绘制钢琴键可以让你尝试不同的键大小和形状，而不必每次都重做你的艺术。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-02-27T00:24:01.983

的任何实例的`UIView`最大尺寸为 1024x1024。不管是不是OpenGL。您可以拥有比这更大的可滚动区域，但您必须从多个平铺视图构建它。

# c# - 开始中级 C# 课程，重点关注 UML... 您的最佳技巧或经验建议？

> ID：586422
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-02-25T15:20:33.813
> 
>         
> 
> 标签：c#

我正在通过 Kaplan 在线学校开始我的第二堂 C# 编程课程。我与教授和在线课程的互动有限，但与实际学校中的互动完全不同。我即将阅读 Richard Wiener 的“使用 C#.NET 进行现代软件开发”。看起来这本书非常关注 UML（我什至现在都不知道那是什么！）

您体验过 Csharpers.... 在我经历这些以了解现代软件工程师如何在课堂外工作时要记住的任何提示？

当我开始理解 UML 和中级 C# 编程时，有什么要分享的观点吗？

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-02-25T15:24:42.320

有些公司会到处使用 UML。有些人无处使用它。我自己不是一个大粉丝 - 我更喜欢临时图表和大量其他交流（图表上的注释，实际*谈话*等）。

ad-hoc 方法的好处是你可以让它尽可能模糊，或者让它变得非常详细。它的坏处是你不能从它生成任何代码——但我从来没有真正喜欢从 UML 生成代码。（其他人发誓，请注意。）

你当然*不需要*知道 UML 来学习 C#。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-02-25T15:49:48.220

UML 将非常接近让我深入了解复杂的编程世界的事物列表的末尾。在尝试设计某些东西时，我发现它非常分散注意力，并且对于真实的系统描述来说太耗时了。我一直认为这很重要，并尝试从 UML 图开始我的项目，但它并不值得。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-03-15T15:09:09.053

您正在从事的项目越大，您就越需要一种语言来交流，项目团队的所有成员都知道 - 一种像 UML 这样的通用语言！但是您无需开始使用 UML 学习 C#。

# javascript - Javascript编码问题

> ID：586430
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-02-25T15:22:05.230
> 
>         
> 
> 标签：javascript, html, encoding

我们有一个外部 .js 文件，我们希望将其包含在许多不同的页面中。该文件包含用于在客户端对表格进行排序的代码，并使用脚本中的 ▲ 和 ▼ 字符来指示对哪一列以及在哪个方向进行排序。

该脚本最初是为 ASP.Net 页面编写的，用于将一些排序工作从服务器卸载到客户端（在启用 javascript 时防止排序回发）。在这种情况下，编码几乎总是 UTF-8，并且在这种情况下效果很好。  

但是，我们也有许多旧的 Classic ASP 页面，我们希望在其中包含该脚本。对于这些页面，编码更像是一个大杂烩，这取决于谁在何时编写页面以及他们使用什么工具（记事本、vs6、vs2005、其他 html 助手）。页面中通常没有指定编码，因此由浏览器来选择，但我可以看到它确实没有硬性规则。

问题是，如果使用不同的（非 UTF8）编码，▼ 和 ▲ 字符将无法正确显示。我尝试使用 html 实体，但无法让它们从 javascript 中正常工作。

如何使脚本针对各种可能的编码进行调整，以便始终正确显示“特殊”字符？是否有我可以使用的不同字符，或者我错过了使 html 实体从 javascript 工作的技巧？

这是使用字符的片段：

```
// get sort direction, arrow
var dir = 1;
if (self.innerHTML.indexOf(" ▲") > -1)           
     dir = -1;
var arrow = (dir == 1)?" ▲":" ▼"; 

// SORT   -- function that actually sorts- not relevant to the question
if  (!SimpleTableSort(t.id, self.cellIndex, dir, sortType)) return;

//remove all arrows
for (var c = 0,cl=t.rows[0].cells.length;c<cl;c+=1)
{
    var cell = t.rows[0].cells[c];
    cell.innerHTML = cell.innerHTML.replace(" ▲", "").replace(" ▼", "");
}

// set new arrow
self.innerHTML += arrow; 
```

出于好奇，我最终使用接受的答案的代码点是 \u25B4 和 \u25BC。

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-02-25T15:31:14.987

JavaScript 文件的编码取决于嵌入它的 HTML 页面的编码。如果您有一个 UTF-8 JavaScript 文件和一个 ISO-8859-1 HTML 页面，则 JavaScript 被解释为 ISO-8859-1。

如果您从外部文件加载 JavaScript，您可以指定 JavaScript 的编码：

```
<script type="text/javascript" charset="UTF-8" src="externalJS.js"></script> 
```

无论如何，最好的选择是以一种编码保存与 webproject 相关的所有文件，推荐使用 UTF-8。

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-02-25T15:28:07.600

您想要 Javascript Unicode 转义，即“\uxxxx”，其中“xxxx”是字符的 Unicode 代码点。我相信“\u25B2”和“\u25BC”是你需要的两个。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:58:04.363

我投了两个票。我认为这两个答案放在一起将是你最好的选择。

您可能需要编写两次脚本，将一部分用于 UTF-8，另一部分用于非 UTF-8。这更麻烦，而且可能不会一直有效，仍然。

有人需要为您的开发人员制定标准。如果你们都使用至少相同的编码进行编写，那么将来你们自己的事情会容易得多。

# linq - 转换为 Lambda 表达式

> ID：586431
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-25T15:22:12.887
> 
>         
> 
> 标签：linq

我有以下表达

```
 var q = from c in D1 
                join dp in
                    (from e in E1
                     group e by e.ID into g
                     select new { ID = g.Key, Cnt = g.Count() })
                on c.ID
                equals dp.ID 
                into dpp from v in dpp.DefaultIfEmpty() 
                select new { c.ID, Cnt= v.Cnt ?? 0 }; 
```

如何将其转换为 Lambda 表达式？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T16:03:53.053

这是一种方法。这种符合上述情况。

```
var subquery = E1
  .GroupBy(e => e.Id)
  .Select(g => new { ID = g.Key, Cnt = g.Count()});
  //.ToList();

var q = D1
  .GroupJoin(
    subquery,
    c => c.ID,
    dp => dp.ID,
    (c, g) => new {ID = c.ID, Cnt=g.Any() ? g.First().Cnt : 0 }
  ) 
```

重构后，我想出了这个：

```
var q = D1
  .GroupJoin(
    E1,
    d => d.ID,
    e => e.ID,
    (d, g) => new {ID = d.ID, Cnt = g.Count()}
  ); 
```

作为比较，查询理解形式为：

```
var q = from d in D1
  join e in E1 on d.ID equals e.ID into g
  select new {ID = d.ID, Cnt = g.Count()}; 
```

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T15:25:21.460

为什么要转换它？

对于像这样的复杂查询，您在此处使用的查询语法总是更清晰。

# c# - Double.TryParse 或 Convert.ToDouble - 哪个更快更安全？

> ID：586436
> 
>         
> 
> 赞同：80
> 
>         
> 
> 时间：2009-02-25T15:23:35.007
> 
>         
> 
> 标签：c#, .net, parsing, double

我的应用程序使用 VSTO 读取 Excel 文件并将读取的数据添加到`StringDictionary`. 它只添加带有几位数字的数据（1000 1000,2 1000,34 - 逗号是俄罗斯标准中的分隔符）。

检查当前字符串是否是适当的数字更好？

```
object data, string key; // data had read

try
{
  Convert.ToDouble(regionData, CultureInfo.CurrentCulture);
  dic.Add(key, regionData.ToString());
}
catch (InvalidCastException)
{
  // is not a number
} 
```

或者

```
double d;
string str = data.ToString();
if (Double.TryParse(str, out d)) // if done, then is a number
{
  dic.Add(key, str);
} 
```

由于以下解析算法问题，我必须使用`StringDictionary`而不是。`Dictionary<string, double>`

我的问题：哪种方式更快？哪个更安全？

`Convert.ToDouble(object)`打电话还是更好`Convert.ToDouble(string)`？

* * *

## 回答 #1

> 赞同：133
> 
>             
> 
> 时间：2009-02-25T15:44:38.187

我在发布模式下做了一个快速的非科学测试。我在两种方法中都使用了两个输入：“2.34523”和“badinput”，并迭代了 1,000,000 次。

有效输入：

```
Double.TryParse = 646ms
Convert.ToDouble = 662 ms 
```

正如预期的那样，没有太大的不同。对于所有意图和目的，对于有效输入，这些都是相同的。

输入无效：

```
Double.TryParse = 612ms
Convert.ToDouble = .. 
```

嗯..它运行了很长时间。我使用 1,000 次迭代重新运行了整个过程`Convert.ToDouble`，输入错误则耗时 8.3 秒。平均下来，需要2个多小时。我不在乎测试有多基本，在输入无效`Convert.ToDouble`的情况下，异常引发会破坏你的表现。

所以，这是另一个投票支持`TryParse`它的一些数字。

* * *

## 回答 #2

> 赞同：46
> 
>             
> 
> 时间：2009-02-25T15:29:11.140

首先，我会使用`double.Parse`而不是`Convert.ToDouble`首先使用。

至于您是否应该使用`Parse`or `TryParse`: 如果输入数据错误，您是否可以继续，或者这是一个非常特殊的情况？如果它异常，请使用`Parse`并在输入错误时让它炸毁。如果这是预期的并且可以干净地处理，请使用`TryParse`.

* * *

## 回答 #3

> 赞同：8
> 
>             
> 
> 时间：2009-02-25T15:26:10.210

.NET Framework 设计指南建议使用 Try 方法。避免异常通常是个好主意。

`Convert.ToDouble(object)`会做`((IConvertible) object).ToDouble(null);`

哪个会打电话`Convert.ToDouble(string, null)`

所以调用字符串版本会更快。

但是，字符串版本只是这样做：

```
if (value == null)
{
    return 0.0;
}
return double.Parse(value, NumberStyles.Float | NumberStyles.AllowThousands, provider); 
```

所以直接做会更快`double.Parse`。

* * *

## 回答 #4

> 赞同：7
> 
>             
> 
> 时间：2009-02-25T15:26:59.477

如果您不打算处理异常，请使用 TryParse。TryParse 更快，因为它不必处理整个异常堆栈跟踪。

* * *

## 回答 #5

> 赞同：7
> 
>             
> 
> 时间：2009-02-25T15:27:19.880

我通常会尽量避免使用`Convert`该类（意思是：我不使用它），因为我发现它非常令人困惑：代码对这里到底发生了什么提供了太少的提示，因为`Convert`允许使用相同的代码发生许多语义上非常不同的转换. 这使得程序员很难控制到底发生了什么。

因此，我的建议是永远不要使用这个类。这也不是必需的（除了数字的二进制格式，因为`ToString`数字类的常规方法没有提供适当的方法来执行此操作）。

* * *

## 回答 #6

> 赞同：7
> 
>             
> 
> 时间：2011-12-19T15:11:27.187

除非您 100% 确定您的输入（这种情况很少见），否则您应该使用 Double.TryParse。

```
Convert.ToDouble will throw an exception on non-numbers
Double.Parse will throw an exception on non-numbers or null
Double.TryParse will return false or 0 on any of the above without generating an exception. 
```

当您抛出异常时，解析的速度变得次要，因为没有比异常慢多少。

* * *

## 回答 #7

> 赞同：4
> 
>             
> 
> 时间：2015-09-14T20:49:43.197

很多人讨厌 Convert 类在这里......只是为了平衡一点，Convert 有一个优势 - 如果你拿到一个对象，

```
Convert.ToDouble(o); 
```

如果 o 已经是 Double （或 int 或任何易于转换的对象），则可以轻松返回该值。

如果您已经将 Double.Parse 或 Double.TryParse 放在字符串中，那么使用它会很棒，但是

```
Double.Parse(o.ToString()); 
```

必须首先解析字符串，这取决于您的输入，这可能会更昂贵*。*

* * *

## 回答 #8

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T15:26:58.273

Double.TryParse IMO。

你更容易处理，你会知道错误发生在哪里。

然后，如果它返回 false（即无法转换），您可以按照您认为合适的方式处理它。

* * *

## 回答 #9

> 赞同：2
> 
>             
> 
> 时间：2009-02-25T15:28:35.540

我一直更喜欢使用这些`TryParse()`方法，因为它会吐出转换成功或失败，而不必担心异常。

* * *

## 回答 #10

> 赞同：2
> 
>             
> 
> 时间：2018-12-04T00:01:55.373

这是一个有趣的老问题。我正在添加一个答案，因为没有人注意到原始问题的一些事情。

哪个更快：Convert.ToDouble 或 Double.TryParse？哪个更安全：Convert.ToDouble 还是 Double.TryParse？

我将详细回答这两个问题（稍后我会更新答案），但首先：

为了安全起见，*每个*程序员在这个问题中都错过了一行（强调我的）：

> 它仅添加带有几位数字的数据（1000 1000,2 1000,34 -**逗号是俄罗斯标准中的分隔符**）。

后跟此代码示例：

```
Convert.ToDouble(regionData, CultureInfo.CurrentCulture); 
```

这里有趣的是，如果电子表格是俄罗斯数字格式，但 Excel 没有正确键入单元格字段，那么对来自 Excel 的值的正确解释是什么？

这是关于速度的两个例子的另一个有趣的事情：

```
catch (InvalidCastException)
{
    // is not a number
} 
```

这可能会生成如下所示的 MSIL：

```
catch [mscorlib]System.InvalidCastException 
{
  IL_0023:  stloc.0
  IL_0024:  nop
  IL_0025:  ldloc.0
  IL_0026:  nop
  IL_002b:  nop
  IL_002c:  nop
  IL_002d:  leave.s    IL_002f
}  // end handler
IL_002f: nop
IL_0030: return 
```

从这个意义上说，我们可能可以比较每个程序执行的 MSIL 指令的总数 - 稍后我会更新这篇文章。

我相信代码应该是正确的、清晰的和快速的……*按这个顺序！*

* * *

## 回答 #11

> 赞同：1
> 
>             
> 
> 时间：2009-02-25T15:29:16.537

就个人而言，我发现该`TryParse`方法更易于阅读，您实际想要使用的方法取决于您的用例：如果可以在本地处理错误，您期待错误并且 bool from`TryParse`是好的，否则您可能只想让例外飞。

我希望`TryParse`它也更快，因为它避免了异常处理的开销。但是使用基准工具，例如[Jon Skeet 的 MiniBench](http://msmvps.com/blogs/jon_skeet/archive/2009/02/02/benchmarking-designing-an-api-with-unusual-goals.aspx)来比较各种可能性。

# asp.net - 如何在 Search Server 2008 Express 中设置搜索 Web 服务的访问权限？

> ID：586442
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-25T15:25:00.713
> 
>         
> 
> 标签：asp.net, web-services, authorization, search-engine

我在 Windows 2003 服务器上安装了 Microsoft Search Server 2008 Express，并创建了一个搜索内容源（我们的公司网站）进行测试。我可以从搜索中心很好地搜索这个来源。

从 ASP.NET Web 应用程序中，我尝试查询所提供的 Web 服务，如此处[所述](http://labs.episerver.com/en/Blogs/Ted-Nyberg/Dates/2009/1/Using-EPiServer-and-Microsoft-Search-Server-2008/)

我在 web.config 中使用模拟设置来指定运行请求的用户帐户，但我不知道如何在搜索服务器中设置该用户以允许其进行查询。

```
<authentication mode="Windows"/>
<identity impersonate="true" userName="MyDomain\MyUser" password="myPassword" /> 
```

如果我使用自己的网络凭据，则会返回结果，因为我在 Search Server 实例中设置了完全控制权限，但是当我为此使用备用域帐户 (MyDomain\QueryUser) 时，我收到此错误：

> System.Web.Services.Protocols.SoapException：服务器无法处理请求。---> 试图执行未经授权的操作。

我已在 Search Server > Site Settings > Permissions > Add Users 中将用户添加到服务器，并为帐户提供了完全控制权，但它仍然无法使用 web 服务。我想念的地方有设置吗？

**编辑

好的，我已经尝试了 Gordon 的建议，并使用 Sharepoint 应用程序使用的凭据使错误消失。此外，将第二个域用户添加到服务器上的本地管理员组会使错误消失。

这些更改授予 Web 服务的权限是什么？我是否必须求助于使用这些变通办法，或者我可以在某处的 Sharepoint 中为我的域用户授予适当的权限？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-10-07T13:17:03.823

访问MOSS的Search webservice的关键是

1) 正确验证 2) 强制 MOSS Web 服务使用该身份

对于第一部分，检查是否为您的网络凭据正确分配了所有属性，我通常提供这些：

```
NetworkCredential credentials = new NetworkCredential(userName, password, domain);
service.PreAuthenticate = true;
service.Url = your_ws_fullurl;
service.UseDefaultCredentials = false;
service.useDefaultCredentialsSetExplicitly = true;
service.Credentials = credentials; 
```

对于第二部分，一个解决方案是删除 IUSR（IIS 匿名用户）使用 IIS 访问 /_vti_bin/Search.asmx 文件的权限（进入 /_vti_bin/ 文件夹，右键单击文件安全属性），这样 MOSS将检索凭据缓存中提供的凭据，并且您不会收到“未经授权的操作”消息

# sql-server - 有什么好的空间数据库教程吗？

> ID：586444
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-02-25T15:25:08.823
> 
>         
> 
> 标签：sql-server, database, oracle, spatial, postgis

我希望探索 PostGIS 或 SQL Server 2008 的空间功能。也许 Oracle 也是如此。

我想知道是否有任何好的教程特别探索这些数据库的空间功能或一般这种类型的功能。

有人知道吗？书籍推荐也可以。

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-02-25T15:29:01.203

我在这里写了一篇关于 SQL Server 地理数据类型的小博文：[SQL Server 2008 Proximity Search With The Geography Data Type](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/sql-server-2008-proximity-search-with-th)

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-02-25T15:34:42.157

这不是一个教程，而是对各种产品的一个很好的比较，看看它们是如何相互叠加的：
[空间数据库交叉比较](http://www.bostongis.com/PrinterFriendly.aspx?content_name=sqlserver2008_postgis_mysql_compare)

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2010-03-11T08:15:30.223

8 部分对 SQL Server 2008 Spatial 的精彩介绍。投影、地理/几何、空间 SQL 函数等。

[http://www.jasonfollas.com/blog/archive/2008/03/14/sql-server-2008-spatial-data-part-1.aspx](http://www.jasonfollas.com/blog/archive/2008/03/14/sql-server-2008-spatial-data-part-1.aspx)

这里有一些额外的链接和 SQL 示例 - [http://geographika.co.uk/sql-server-spatial-sql](http://geographika.co.uk/sql-server-spatial-sql)

* * *

## 回答 #4

> 赞同：3
> 
>             
> 
> 时间：2011-01-27T19:40:37.093

试试[http://www.bostongis.com/](http://www.bostongis.com/)

他们主要涵盖 Postgres/PostGIS，尽管他们也谈论 SQL Server。有一些很好的例子。

PostGIS 手册也非常好，尤其是第 4 章和第 6 章，尽管它们都值得一读。

[http://www.postgis.org/docs/ch04.html](http://www.postgis.org/docs/ch04.html)

再次使用 PostGIS，但这本书在空间 sql 的覆盖范围内确实非常全面，并且许多查询将移植到其他数据库，尤其是 Oracle——因为 Postgres 开发人员已尽可能与 Oracle 语法兼容。它从基础开始，但后面的一些示例确实非常高级。

[http://www.manning.com/obe/](http://www.manning.com/obe/)

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:36:24.977

您可能对[ESRI 的 ArcSDE 教程](http://www.esri.com/news/arcuser/0799/arcsde.html)感兴趣。

**编辑：**对不起......我刚刚阅读了问题的详细信息。这并不能真正满足您的特定需求。但是，对于正在寻找使用 ESRI 产品的 SDE 教程的人来说，他们可能会发现这很有用。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2014-05-30T16:10:35.297

虽然它没有专门针对 SQL Server 2008，但 Boundless 有一个关于 PostGIS的非常好的[教程。](http://workshops.boundlessgeo.com/postgis-intro/)我没有使用他们的 OpenGeo Suite 来跟进，而是将示例改编为我使用的 PostgreSQL。最后，我从本教程和 PostGIS 用户手册中学到了很多东西。

# wpf - 修改 ObservableCollection
在运行时声明为资源

> ID：586448
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-25T15:25:54.953
> 
>         
> 
> 标签：wpf, observablecollection

我有一堆从数据库填充的 ObservableCollections。很有可能在应用程序的生命周期中这些集合会增长，我需要它们每 30 秒左右更新一次。

我将集合声明为 App.xaml 中合并字典中的资源。我可以使用 Application.FindResource() 方法很好地获取这些集合，但是当我再次调用 FindResource 时，我对结果集合所做的任何更改都不会反映出来。也许我天真地认为会是这样。

我是对还是错？

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T15:46:49.600

知道了！

可以通过 Application.Current.Resources[key] 设置资源值。

所以在我的例子中，如果有人遇到这个问题，我会做类似的事情。

```
MyObservableCollection coll1 = Application.FindResource("resourceName") as MyObservableCollection
foreach(Item i in coll1)
{
    if(somecondition){i.someProperty == someValue;}
}
//coll2 does NOT reflect the above change!!!
MyObservableCollection coll2 = Application.FindResource("resourceName") as MyObservableCollection;
Application.Current.Resources["resourceName"] = coll1;
//coll3 DOES reflect the above change
MyObservableCollection coll3 = Application.FindResource("resourceName") as MyObservableCollection 
```

# asp.net - System.web.ui.page 的替代品

> ID：586453
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-02-25T15:26:13.113
> 
>         
> 
> 标签：asp.net, page-lifecycle

我有一个 ASP.Net 应用程序，通过使用分析器我注意到在我的页面运行之前发生了大量的处理。在我的应用程序中，我们没有使用 viewstate、asp.Net 会话，而且我们可能不需要使用 asp.net 页面生命周期所带来的大部分开销。是否有其他一些我可以轻松继承的类将删除所有 Asp.Net 内容，让我自己处理写入页面？  

我听说 ASP.Net MVC 可以大大减少页面加载，仅仅是因为它不使用旧的 asp.net 生命周期，并且以不同的方式处理页面。有没有一种简单的方法，也许只是让我的网页继承一些其他类来利用这样的东西。如果可能的话，我想要一个适用于 ASP.Net 2.0 的解决方案。

* * *

## 回答 #1

> 赞同：9
> 
>             
> 
> 时间：2009-02-25T16:26:24.170

我发现的大多数文章都在谈论使用 Page 作为基类并在此基础上实现功能，看起来您需要创建自己的 MyPage 类来实现 IHttpHandler

来自 MSDN 文章

```
 using System.Web;

namespace HandlerExample
{
   public class MyHttpHandler : IHttpHandler
   {
      // Override the ProcessRequest method.
      public void ProcessRequest(HttpContext context)
      {
         context.Response.Write("This is an HttpHandler Test.");

         context.Response.Write("Your Browser:");
         context.Response.Write("Type: " + context.Request.Browser.Type + "");
         context.Response.Write("Version: " + context.Request.Browser.Version);
      }

```
 // Override the IsReusable property.
  public bool IsReusable
  {
     get { return true; }
  } 
```

}
} 同样，来自文章：要使用此处理程序，请在 Web.config 文件中包含以下行。

```
 <configuration>
   <system.web>
      <httpHandlers>
         <add verb="*" path="handler.aspx" type="HandlerExample.MyHttpHandler,HandlerTest"/>
      </httpHandlers>
   </system.web>
</configuration> 
```

 我会看一下 System.web.ui.page 的源代码，看看它对您的指导作用。我的猜测是，它主要只是以正确的顺序调用 asp.net 页面生命周期中的不同方法。您可以通过从 ProcessRequest 方法调用您自己的 page_load 来做类似的事情。这将路由到您实现 MyPage 的类的个人实现。

我以前从未想过做这样的事情，这听起来不错，因为我真的不使用任何臃肿的网络表单功能。MVC 可能会使整个练习变得徒劳，但它看起来确实很简洁。

# 我的快速示例

**新基地：**

```
 using System.Web;
namespace HandlerExample
{
    // Replacement System.Web.UI.Page class
    public abstract class MyHttpHandler : IHttpHandler
    {
        // Override the ProcessRequest method.
        public void ProcessRequest(HttpContext context)
        {
            // Call any lifecycle methods that you feel like
            this.MyPageStart(context);
            this.MyPageEnd(context);
        }

```
 // Override the IsReusable property.
    public bool IsReusable
    {
        get { return true; }
    }

    // define any lifecycle methods that you feel like
    public abstract void MyPageStart(HttpContext context);
    public abstract void MyPageEnd(HttpContext context);

} 
``` **页面实现：**

```
 ```
// Individual implementation, akin to Form1 / Page1
public class MyIndividualAspPage : MyHttpHandler
{

    public override void MyPageStart(HttpContext context)
    {
        // stuff here, gets called auto-magically
    }

    public override void MyPageEnd(HttpContext context)
    {
        // stuff here, gets called auto-magically
    }
} 
```

} 
```

            回答 #2

赞同：3

时间：2009-02-25T15:34:57.803

如果您不需要所有这些“asp.net 东西”，您可能希望实现一个自定义 IHttpHandler。Afaik，除了 Page 类之外，没有其他标准的 IHttpHandler 可以重用。

            回答 #3

赞同：0

时间：2009-02-25T17:41:46.577

为此，您应该首先查看 System.Web.UI.PageHandlerFactory 类和相应的 System.Web.IHttpHandlerFactory 接口。

从那里您可能会看到 System.Web.IHttpHandler 接口和 System.Web.UI.Page 类。

基本上，您将编写自己的 IHttpHandlerFactory 来生成处理页面请求的 IHttpHandler。

        performance - 测量 Apache 性能

ID：586456

赞同：1

时间：2009-02-25T15:26:53.813

标签：performance, apache

随着我们的服务器越来越忙，我对监控随着时间的推移发生的事情越来越感兴趣，我们有一些我们的主机提供了一些糟糕的图表，这些图表显示了 CPU 使用率和内存随着时间的推移，但并没有真正告诉我太多。

有哪些高性能工具可用于准确监控 Apache？

            回答 #1

赞同：1

时间：2009-02-25T15:38:15.300

您可以设置 rrd 来存储数据并根据您发送的数据创建图表。我建议从 apache 日志和 ps 命令中解析数据。

您还可以使用 cacti 包创建 rrd 的接口。

        javascript - JQuery：在追加时获取一个孩子

ID：586463

赞同：1

时间：2009-02-25T15:27:46.540

标签：javascript, jquery

我在处理 json 请求时将 p 标签附加到 div 并会根据请求中的内容对其进行样式设置。

```
$(document).ready(function() {
    function populatePage() {
        var numberOfEntries = 0;
        var total = 0;
        var retrieveVal = "http://www.reddit.com/" + $("#addressBox").val() + ".json";
        $("#redditbox").children().remove();
        $.getJSON(retrieveVal, function (json) {
            $.each(json.data.children, function () {
                title = this.data.title;
                url = this.data.url;
                ups = this.data.ups;
                downs = this.data.downs;
                total += (ups - downs);
                numberOfEntries += 1;
                $("#redditbox").append("<p>" + ups + ":" + downs + " <a href=\"" + url + "\">" + title + "</a><p>");
                $("#redditbox :last-child").css('font-size', ups%20); //This is the line in question
            });
            $("#titlebox h1").append(total/numberOfEntries);
        });
    }

    populatePage()

    $(".button").click(function() {
        populatePage();
    });
}); 
```

不幸的是，事情并没有按计划进行。有问题的行的样式适用于 div 的每个孩子，而不仅仅是当时碰巧附加的那个，所以它们最终都具有相同的大小，而不是取决于它们的数量。

当它们附加到 div 时，如何将样式应用于 p 标签？

编辑：感谢 Fortes 和 Veggerby 都工作，但我最终选择了 Fortes，因为我做到了。

            回答 #1

赞同：6

时间：2009-02-25T17:48:21.757

您可以使用 JQuery`appendTo`代替`append`. 对于您的示例：

```
$("<p>" + ups + ":" + downs + " <a href=\"" + url + "\">" + title + "</a><p>")
     .css('font-size', ups%20)
     .appendTo('#redditbox'); 
```

以下是 appendTo 的文档：http: [//docs.jquery.com/Manipulation/appendTo](http://docs.jquery.com/Manipulation/appendTo)

            回答 #2

赞同：1

时间：2009-02-25T15:31:07.577

代替：

```
$("#redditbox").append("<p>" + ups + ":" + downs + " <a href=\"" + url + "\">" + title + "</a><p>"); 
```

和

```
var p = $("<p>" + ups + ":" + downs + " <a href=\"" + url + "\">" + title + "</a><p>");
$("p", p).css('font-size', ups%20)
$("#redditbox").append(p); 
```

或许可以进一步浓缩。

编辑：

浓缩如：

```
$("#redditbox").append(
   $("<p></p>").css('font-size', ups%20).append(ups + ":" + downs + " <a href=\"" + url + "\">" + title + "</a>")
); 
```

            回答 #3

赞同：0

时间：2009-02-25T15:38:13.503

某些浏览器/版本不支持 :last-child CSS 选择器。在这种情况下，他们通常会忽略它并返回与选择器其余部分匹配的所有元素。这可能就是您所看到的。

像往常一样[IE 就是这样一种浏览器](http://msdn.microsoft.com/en-us/library/cc351024(VS.85).aspx_)。

veggerby 的方法应该可以帮助您解决使用 :last-child 的需要。

        java - 条形图的 BIRT 格式图例

ID：586478

赞同：3

时间：2009-02-25T15:29:39.343

标签：java, eclipse, reporting, report, birt

我有一个小问题，我设计的 BIRT 报告使用了条形图。现在我想增加彩色框和图例中的文本之间的空间。那可能吗？（我使用的是 BIRT 2.1.3）

[http://www.fotos-hochladen.net/barchartproblemhng05e76.png](http://www.fotos-hochladen.net/barchartproblemhng05e76.png)

编辑：我忘了提到我正在使用 BIRT 2.1.3 和 RCP Designer。

            回答 #1

赞同：0

时间：2011-12-02T03:29:38.030

看起来这不可能。您可以增加图表和图例框之间的间距，但没有选项可以增加框和文本之间的间距。

也许您可以在将数据传递给 BIRT 时尝试在系列名称上附加一些空格（是的，这听起来确实是一个糟糕的解决方法）。

        c# - 有没有一种快速的方法来获得鼠标下的控件？

ID：586479

赞同：13

时间：2009-02-25T15:29:43.977

标签：c#, .net, winforms

我需要在另一个控件的事件中找到鼠标下的控件。我可以从使用开始`GetTopLevel`并向下迭代`GetChildAtPoint`，但是有更快的方法吗？

            回答 #1

赞同：19

时间：2009-02-25T17:59:09.530

这段代码没有多大意义，但它确实避免了遍历 Controls 集合：

```
[System.Runtime.InteropServices.DllImport("user32.dll")]
private static extern IntPtr WindowFromPoint(Point pnt);

private void Form1_MouseMove(object sender, MouseEventArgs e) {
  IntPtr hWnd = WindowFromPoint(Control.MousePosition);
  if (hWnd != IntPtr.Zero) {
    Control ctl = Control.FromHandle(hWnd);
    if (ctl != null) label1.Text = ctl.Name;
  }
}

private void button1_Click(object sender, EventArgs e) {
  // Need to capture to see mouse move messages...
  this.Capture = true;
} 
```

            回答 #2

赞同：2

时间：2009-02-25T17:37:08.743

未经测试并且在我脑海中浮现（也许很慢......）：

```
Control GetControlUnderMouse() {
    foreach ( Control c in this.Controls ) {
        if ( c.Bounds.Contains(this.PointToClient(MousePosition)) ) {
             return c;
         }
    }
} 
```

或者喜欢 LINQ：

```
return Controls.Where(c => c.Bounds.Contains(PointToClient(MousePosition))).FirstOrDefault(); 
```

不过，我不确定这有多可靠。

        apache-flex - 如何通过单击取消选择 flex 数据网格行？

ID：586481

赞同：1

时间：2009-02-25T15:30:25.817

标签：apache-flex, datagrid, flex3

我有一个简单的问题，似乎没有简单的解决方案。我有一个数据网格，如果单击并已选择行，则应取消选择行。怎么做？

我正在查看不同的“项目”事件，但是在调度它们时已经选择了该行，因此无法判断它是否已经被选择。

有人可以帮我解决一个我可能错过的非常简单的事情吗？

            回答 #1

赞同：2

时间：2009-02-25T19:39:29.587

试试这个 ：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application
    xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute">

    <mx:Array id="arr1">
        <mx:Object label="One fish" />
        <mx:Object label="Two fish" />
        <mx:Object label="Tree fish" />
        <mx:Object label="Four fish" />
    </mx:Array>

    <mx:DataGrid id="dataGrid2"
                    click="test(event)"
                    dataProvider="{arr1}"
                    draggableColumns="false"
                    width="100%"
                    height="100%" >
                    <mx:columns>
            <mx:DataGridColumn dataField="label" width="50" />
        </mx:columns>
    </mx:DataGrid>

    <mx:Script>
        <![CDATA[

            private var lastIndex :Number = -1;
            private function test(evt:MouseEvent):void
            {
                if(dataGrid2.selectedIndex == lastIndex)
                    dataGrid2.selectedIndex = -1;

                lastIndex = dataGrid2.selectedIndex;
            }

        ]]>
    </mx:Script>

</mx:Application> 
```

        delphi - 有没有办法在 delphi 中禁用 TOpenDialog 的提示？

ID：586482

赞同：1

时间：2009-02-25T15:30:36.520

标签：delphi, hint, topendialog

我有一个`TOpenDialog`在运行时创建的组件，我想禁用在使用时弹出文件的提示。除了创建对象、执行对象并提取文件名，然后释放实例之外，我还没有为此编写任何 exrta 代码。

我可以做我想做的事吗？如果是这样，我该怎么做？

            回答 #1

赞同：2

时间：2009-02-25T21:05:10.630

我用谷歌搜索“opendialog crash tooltip”，第一次点击给了我[这个](http://groups.google.com/group/comp.lang.pascal.delphi.components.usage/browse_thread/thread/207388c2527abf40)。他们的问题（也可能是你的）的解决方案是：

[...]

您只需将此修改添加到应用程序的第一种形式：

```
uses ActiveX;

initialization
  OleInitialize(nil);

finalization
  OleUninitialize 
end. 
```

            回答 #2

赞同：1

时间：2009-02-25T19:11:53.990

由于这是一个 Windows 通用对话框，您可能必须跳入并连接到 dialogproc 并手动尝试处理工具提示消息。您可以从这里开始了解如何自定义常用对话框；[http://msdn.microsoft.com/en-us/library/ms646951.aspx](http://msdn.microsoft.com/en-us/library/ms646951.aspx)。您还可以查看创建自己的 TOpenDialog 后代并重写受 WndProc 保护的方法以访问对话消息和通知。我怀疑您还需要做一些更深入的挂钩并开始处理 explorer shell。该对话框中的文件列表实际上是 Windows 资源管理器外壳的一个实例。

另一个问题是你试图通过向用户隐藏这些信息来完成什么？也许还有其他解决方案可以解决您正在尝试做的事情，而不是禁用某些内在功能？

        php - 生成代码的 PHP 类图

ID：586484

赞同：2

时间：2009-02-25T15:31:03.477

标签：php, class-diagram

我正在寻找具有以下功能的应用程序：

*   创建类图
*   生成您刚刚绘制的结构的代码

PHP 中的类结构。

提前非常感谢，如果我的写作不是那么好，我很抱歉英语不是我的语言。

            回答 #1

赞同：2

时间：2009-02-25T15:43:50.417

[ArgoUML](http://argouml.tigris.org/)是一个免费的 UML 建模器，支持 PHP5 代码生成。

            回答 #2

赞同：1

时间：2009-02-25T15:35:32.030

Enterprise Architect 每 12 个月收费 135.00 美元 + 45.00 美元（美元）

我认为他们提供 12 个月的免费试用。

它支持 C++、Java、VB.NET、C#、**PHP**、Delphi 和 Visual Basic 代码生成

            回答 #3

赞同：0

时间：2013-12-29T05:33:48.273

我最喜欢的工具之一是 PHPStorm。它不是免费的，但值得。

[https://www.jetbrains.com/phpstorm/webhelp/working-with-diagrams.html](https://www.jetbrains.com/phpstorm/webhelp/working-with-diagrams.html)

这些人也有两个应用程序，他们不是免费的，但似乎他们做你想做的事：

[http://www.athtek.com/download.html#programming](http://www.athtek.com/download.html#programming)

这是一个与 ArgoUML 相关的开放项目：

[http://www.ohloh.net/p/codetodiagram](http://www.ohloh.net/p/codetodiagram) 

        html - HTML“容器”标签 - 正确使用？

ID：586487

赞同：7

时间：2009-02-25T15:31:25.220

标签：html, tags, containers

一段时间以来，我一直在制作网站，但从未真正看到有关正确使用容器标签的讨论。我在收藏标签中看到了许多不同类型的内容，但通常页面创建者似乎只是选择了他们喜欢的风格并坚持下去。

在我看来，主要的差异是

```
<p>
<div> 
```

但我也想关于

```
<span> 
```

以及我可能忘记的任何其他人。

            回答 #1

赞同：13

时间：2009-02-25T15:47:09.443

最初创建 HTML 是为了将文档的内容放入某种计算机可以理解的结构中。考虑到这一点，`p`如果要将页面内容转换为打印文档，则该标签应该包含任何结构为段落的内容。和元素保留为通用容器，以促进相关元素的格式化和分组，以提供额外的结构级别，可能与文本文档中的页面相关`div`。`span`

在某些情况下，`p`标签*应该*包含其他元素，例如锚点 ( `a`)、图像 ( `img`) 和其他内联元素，因为它们直接与段落其余部分的内容相关，并且以这种方式对它们进行分组是有意义的，或者该段其余部分的文字提供了更深入的描述。  

然而，如果没有对这些元素的额外描述，那么将它们简单地放在一个段落中作为一个方便的容器是没有意义的；a`div`会更合适。一般来说，一个段落应该包含一段文本和任何直接相关或描述的元素。段落中没有其他任何意义。

**更新**：HTML5 还添加了许多其他语义“容器”元素，包括`article`、`nav`、`header`、`section`和`aside`.

            回答 #2

赞同：7

时间：2009-02-25T15:37:00.653

我认为，标签的含义是这样的：

```
<p>Paragraph, usually just text</p>

<div>A block, containing anything</div>

<span>Just a simple non-blocking wrapper</span> 
```

            回答 #3

赞同：4

时间：2009-02-26T00:44:48.310

这三个（和许多其他）标签之间的区别在于它们的语义含义。HTML 标准包括具有特定语义含义的标签（`<p>`用于段落、`<em>`用于强调文本等）和*没有*语义含义的标签。

后者是`<div>`和`<span>`，用于识别需要识别的块级或内联级内容（例如使用 a`class=`或`id=`属性），但不存在语义特定标签。例如，可以写`<p>Hi, my name is <span class="name">John Doe</span>.</p>`——表明它是一个段落（浏览器已经知道如何处理它）并且它的那部分内容是一个名称（这对浏览器绝对**没有任何意义**，除非 CSS 或 JavaScript 使用它）。

因此，这些标签在向 HTML 文档添加不符合标准提供的语义标签的附加信息（参见[hCard 规范](http://microformats.org/wiki/hcard)中的一个很好的例子）和应用视觉 (CSS) 或功能 (JavaScript)方面都*非常*有用结构到文档而不改变其语义。

            回答 #4

赞同：2

时间：2009-02-25T15:35:57.973

我认为页面创建者应该使用语义标记，这意味着他们创建的标记应该传达意义（而不是表示）。`<div>`并且`<p>`有不同的含义。前者用于定义 HTML 页面的一个分区（或部分），后者用于定义一段文本。

            回答 #5

赞同：2

时间：2009-02-25T23:03:44.353

`<p>`是一个块级元素，应该包含一个段落，由文本、修改该文本的内联元素（`<p>`、`<a>`、`<abbr>`等）和图像组成。

`<div>`是用于划分页面的块级元素，几乎总是与 CSS 样式结合使用。

`<span>`...好吧，老实说，我不经常使用这个标签。它是一个内联元素，当我想将样式应用于文本的一部分时，我通常会使用它，而这些文本不会从使用更有意义的东西（如`<strong>`and`<em>`标签）中受益。

            回答 #6

赞同：1

时间：2009-02-26T00:05:33.287

我被认为是“webdeveloppement的豆腐” `<span>`，`<div>`因为它没有真正的味道，但你几乎可以用它做任何事情。

(X)HTML 标签定义了它们周围的文本是什么。是和地址，是链接，是段落，等等...

`<div>`并且`<span>`是访问您通常无法访问的站点的简单方法。就像当你试图调整 | 象征。我发现的最快的方法是在它周围放置一个跨度，给它一个类，然后实现 CSS。

在我看来，这就是他们的好处。我很想听听我在这里写的更多甚至更正的内容。

            回答 #7

赞同：0

时间：2013-04-15T14:52:19.470

听起来您需要阅读[HTML 规范](http://www.w3.org/html/wg/drafts/html/master/single-page.html)

[`p`元素](http://www.w3.org/html/wg/drafts/html/master/single-page.html#the-p-element)：[_](http://www.w3.org/html/wg/drafts/html/master/single-page.html#the-p-element)

该`p`元素代表一个段落。

[`div`元素](http://www.w3.org/html/wg/drafts/html/master/single-page.html#the-div-element)：[_](http://www.w3.org/html/wg/drafts/html/master/single-page.html#the-div-element)

该`div`元素根本没有特殊含义。它代表它的孩子。它可以与`class`、`lang`和`title`属性一起使用，以标记一组连续元素共有的语义。

[`span`元素](http://www.w3.org/html/wg/drafts/html/master/single-page.html#the-span-element)：[_](http://www.w3.org/html/wg/drafts/html/master/single-page.html#the-span-element)

`span`元素本身没有任何意义，但与全局属性（例如 、 或 ）一起使用时会`class`很有`lang`用`dir`。它代表它的孩子。

`div`and之间的主要区别在于`span`span 是[`flow content`](http://www.w3.org/html/wg/drafts/html/master/single-page.html#flow-content-1), [`phrasing content`](http://www.w3.org/html/wg/drafts/html/master/single-page.html#phrasing-content-1), and [`palpable content`](http://www.w3.org/html/wg/drafts/html/master/single-page.html#palpable-content-0)，而 div 只是[`flow content`](http://www.w3.org/html/wg/drafts/html/master/single-page.html#flow-content-1)and [`palpable content`](http://www.w3.org/html/wg/drafts/html/master/single-page.html#palpable-content-0)。

本质上，这归结为：

`div`元素是块级元素，通常只能放置在其他块级元素中，而`span`元素是内联元素，并且可以放置在大多数其他元素中。

[HTML 规范定义了哪些元素可以作为每个元素的后代](http://www.w3.org/html/wg/drafts/html/master/single-page.html#element-dfn-content-model)。

        ruby-on-rails - 如何在 Rails 中跟踪在线用户？

ID：586499

赞同：6

时间：2009-02-25T15:35:00.627

标签：ruby-on-rails, session, tracking, auditing

这对我来说一直是个问题，因为 rails 没有像 java 框架那样的会话跟踪机制，你使用什么方法来跟踪当前登录你网站的人？我使用一种简单的方法，每次用户单击站点上的某个位置时，将 last_visited 字段设置为当前时间，然后检查在（比如说）过去 10 分钟内更新了该字段的用户。除了这个，还有什么方法？

            回答 #1

赞同：5

时间：2009-02-25T17:50:36.090

如果您将`active_record_store`用于您的会话，您可以尝试以下操作：

```
sessions = CGI::Session::ActiveRecordStore::Session.find(:all, :conditions => ["updated_at >= ?", 15.minutes.ago], :order => "created_at ASC")
sessions.each do |session|
  if session.data[:user]
    online_users << User.find(session.data[:user])
  end
end 
```

        asp.net-membership - ASP.NET Membership/Roles/FormsAuth - 我如何以超级用户身份登录？

ID：586500

赞同：0

时间：2009-02-25T15:35:05.383

标签：asp.net-membership

我正在开发一个使用带有表单身份验证的 ASP.NET 2.0 成员资格和角色提供程序的 Web 应用程序。系统中有各种角色。我需要一个用户角色，它本质上是一个超级用户，可以作为任何用户帐户“登录”（实际上是模拟用户）。

有谁知道这是否可以使用提供者？有任何想法吗？

我正在考虑的一种方法是注销超级用户并以所需用户身份登录

```
FormsAuthentication.SetAuthCookie(username, false); 
```

并在他们的 Session 中添加一个变量以将他们标记为超级用户。我认为这会起作用，但我只是想知道是否有更聪明的方法可以在不直接使用 Session 对象的情况下做到这一点？

            回答 #1

赞同：0

时间：2009-02-25T15:44:42.040

为什么你没有可以做任何事情的超级用户角色？然后用户可以只是该角色的一部分。

如果您真正需要的是管理员冒充他人的能力，我不知道附加标志是什么？如果它标记当前登录的用户赋予他超能力，则同样可以通过设置角色来实现。但是，如果您只需要冒充其他人（例如，这是帮助台，您需要看到与最终用户看到的完全相同的内容） - 我只会正常检查凭据，然后检查超级用户是否正在登录以及谁他们想要模仿，并基于此将登录用户身份验证为他愿意模仿的用户。

我希望我写的有意义...

            回答 #2

赞同：0

时间：2009-02-25T17:12:53.637

Asp.net 方法不支持该概念，因此您尝试寻找替代方法是正确的。您可以做的是将 IsSuperUser 信息添加到身份验证票证 UserData 属性。

            回答 #3

赞同：0

时间：2013-03-28T11:11:34.013

这就是我要做的。对不起，没有图形，在 ipad 上在床上...

1) 使用基于声明的架构。它易于实施，请参阅我的项目。

2）本质上模拟的用户将在声明主体对象上拥有第二个身份，但会有不同的领域（领域可能是错误的词，您用来创建身份的字符串）

3）您可以构建模拟用户的身份并手动构建他们的声明......他们应该立即写入令牌。我会看一个通用的 Claims Transformer 类来做到这一点。

4) 您可能需要根据假冒身份的存在来调整网站的行为方式，但这就是有趣的部分。

工作 WIF 实现
[https://github.com/wcpro/scaffr-generated](https://github.com/wcpro/scaffr-generated)

        unicode - 完整的等宽Unicode字体？

ID：586503

赞同：145

时间：2009-02-25T15:35:36.430

标签：unicode, fonts, text-editor

我正在寻找一种好的编程字体，它可以让我在 Unicode 中添加注释和字符串文字，通常是日语和中文以及一些拉丁语和西里尔语。

到目前为止，情况似乎是“完整的、等宽的、免费的、选择 2”，而谷歌在这方面让我失望了（也许是因为没有好的东西？）。

我发现最好的是 Arial Unicode，但它不是等宽字符，这对我和我使用的编辑器来说是个大麻烦。当我编写 Python 代码时，更不用说 Python 缩进了。

（链接，欢迎编辑）

            回答 #1

赞同：72

时间：2009-02-25T15:58:45.343

Unicode 很大。真的很大。你简直不会相信它有多么巨大，令人难以置信。我的意思是，您可能认为代码页与 ü 相距甚远，但这对于 Unicode 来说只是小菜一碟。

我真的怀疑世界上是否有任何字体（等宽或不等宽）具有“完整”Unicode。您可以做的最好的事情是找到一些等宽字体，它们一起覆盖您感兴趣的空间，并确保您的编辑器设置为可以使用它们。

            回答 #2

赞同：49

时间：2009-02-25T15:46:09.540

我发现最好的是[DejaVu Sans Mono](http://dejavu-fonts.org/wiki/index.php?title=Main_Page)，它是[Bitstream 的 Vera Sans Mono](http://www.gnome.org/fonts/#Final_Bitstream_Vera_Fonts)的 Unicode 扩展。

我不确定是否有任何“完整”的字体，所以我认为你必须处理拼凑的字体。

            回答 #3

赞同：33

时间：2010-03-20T00:05:00.227

[GNU Unifont](http://unifoundry.com/unifont.html)是等宽位图字体，完全覆盖了 Unicode 5.1 中定义的基本多语言平面。它也有 True Type 格式。

            回答 #4

赞同：15

时间：2009-02-25T15:39:34.250

[康索拉斯](http://en.wikipedia.org/wiki/Consolas)怎么样？现在应该躺在大多数窗户盒子上。

如果没有，可以在这里下载：

[http://www.microsoft.com/down...lang=en](http://www.microsoft.com/down...lang=en)

不过，如果没有启用 ClearType，它看起来确实很丑。

            回答 #5

赞同：5

时间：2009-04-08T09:48:16.173

在 Consolas 之前，我一直使用[Andale Mono](http://en.wikipedia.org/wiki/Andale_Mono)作为我的程序员字体。可以免费[下载](http://web.nickshanks.com/typography/corefonts)。

            回答 #6

赞同：5

时间：2009-11-04T04:10:11.793

我正在尝试为自己回答这个问题，以便在 Eclipse 编辑器中使用。

[MS ゴシック（MS Gothic）](http://www.microsoft.com/typography/fonts/font.aspx?FMID=1269)是我目前正在尝试的，这对于我正在处理的日本角色来说似乎相当不错。自 2000 年起包含在 Windows 中。

            回答 #7

赞同：3

时间：2011-09-25T03:44:20.773

一种可以从 Unicode 联盟`CodeCharts.pdf`通过 FontForge 字体提取发布的内容构建。然而：

1.  法律问题将是一个严肃的考虑。
2.  提取的字体不会将它们的字符与 unicode 代码点对齐，而是将它们有时按顺序放置在不同的点上，有时会随意放置。重新映射它们是一件苦差事（但比从头开始创建字体要容易几个数量级）。
3.  字符组合等逻辑很复杂（我个人更喜欢一种愚蠢的未组合字体，每个代码点有一个视觉位置，并像在代码页上一样显示它们）。

            回答 #8

赞同：2

时间：2011-02-25T19:52:58.807

GNU Unifont 确实有完整的 Unicode BMP。不幸的是，UTF8 映射有大约 16 倍的字符，包括一些 CJK 扩展。我的建议是下载 Unifont 并手动添加所需的其他字符或从其他字体复制它们。

            回答 #9

赞同：-2

时间：2009-02-25T16:02:44.383

实际上，当我必须阅读等宽字体时，我发现它们很麻烦，所以我使用 Tahoma 甚至 Georgia 作为我的源代码。我有一个非常冗长的编码风格（一个 type 的实例`AstractModemConnector`被命名`abstractModemConnector`），所以我的源代码看起来几乎像英语，并且使用比例字体完全可读。

        backup - 什么是备份（也许同步）你的开发机器的好方法？

ID：586511

赞同：4

时间：2009-02-25T15:38:16.610

标签：backup

对于与我正在从事的项目（源代码、文档等）相关的任何事情，我都广泛使用源代码控制，而且我从来没有以这种方式丢失过任何东西。

然而，我的开发机器上发生了两到三起崩溃（在过去 4 年中蔓延），这迫使我重新安装系统并重新配置我的应用程序（eclipse、vim、Firefox 等）。重新安装后的几个星期，我错过了一个或另一个小应用程序，一些 PHP 或 Python 模块不存在，诸如此类。

虽然这不是致命的，但它非常烦人并且会占用时间。因为它看起来很罕见，所以我并没有为实际的解决方案而烦恼，但与此同时，我已经形成了一种心态，我不想再发生这样的事情了。

那么，对于开发机器来说，什么是好的备份解决方案呢？我读过[这个非常相似的问题](https://stackoverflow.com/questions/344281/can-anyone-recommend-a-good-backup-system-for-a-developer)，但是那个人真的想要与我不同的东西。

我想要的是在架子上放置备用硬盘，并将崩溃后的恢复时间缩短到一个小时或更短。

考虑到这一点，我认为可能还有一种方法可以使用备份机制来保持两个或多个开发工作站同步，这样我就可以随时在不同的 PC 上继续工作。

**编辑**：我应该提到

*   我正在运行 Linux
*   我想要增量备份，这样经常做（每天一次或两次）很便宜

RAID 很好，但我大部分时间都在笔记本电脑上，那里没有第二个 hd，没有 E-SATA，我不确定 RAID 到 USB 驱动器：这真的有用吗？

我见过系统管理员使用 rsync，有人有这方面的经验吗？

            回答 #1

赞同：3

时间：2009-02-25T15:45:02.537

安装和配置完所有内容后，您可以创建工作站的映像。然后当您的计算机崩溃时，您可以恢复图像。

这样做的一个（大）缺点是，自创建映像以来，您将不会进行任何更新或更改。

            回答 #2

赞同：3

时间：2009-02-25T16:23:17.907

我会按照您喜欢的方式设置机器，然后对其进行成像。然后，你可以设置 rsync（甚至 SVN）来备份你的 homedir nightly/etc。  

然后，当您的计算机死机时，您可以重新映像，然后重新部署您的主目录。唯一的问题是升级/新软件，但完全解决这个问题的唯一方法是对驱动器进行完整的夜间备份。

谢谢，这听起来是个好建议。我认为应该可以定期更新映像（以获取软件更新/安装），但可能不会那么频繁。例如。我可以在 VM 中启动映像并执行全局包更新或其他操作。

饭能

            回答 #3

赞同：1

时间：2009-02-25T15:44:37.263

[Cobian Backup](http://cobiansoft.com/cobianbackup.htm)是一个可靠的 Windows 备份系统，可以将计划备份到外部驱动器。

            回答 #4

赞同：1

时间：2009-02-25T15:44:43.397

您可以创建一个硬盘驱动器映像。从备份映像还原会将所有内容还原到您拍摄映像时的确切状态。或者您可以创建一个安装程序来安装几乎所有需要的东西。

            回答 #5

赞同：1

时间：2009-02-25T16:23:04.223

由于您表达了对 rsync 的兴趣，这里有一篇文章介绍了如何通过 rsync 为 Debian Linux 制作可引导的备份映像：

[http://www.debian-administration.org/articles/575](http://www.debian-administration.org/articles/575)

Rsync 对于本地和网络同步来说是快速和容易的，并且本质上是增量的。

            回答 #6

赞同：0

时间：2009-02-25T15:42:38.080

您可以为此使用 RAID-1。它是同步类型，而不是备份类型。

            回答 #7

赞同：0

时间：2009-02-25T15:52:50.053

我使用 RAID 镜像和外部硬盘驱动器一起使用 Vista 的系统备份实用程序来备份整个机器。这样我可以轻松修复硬盘故障，但如果我的系统损坏，我可以从 E-SATA 驱动器（我只连接它以进行备份）进行恢复。

完全披露：我从来不需要恢复备份，所以它有点像你车里的安全气囊；希望它在您需要时起作用，但无法确定。此外，备份过程是手动的（可以自动进行），所以我只和上次备份一样安全。

            回答 #8

赞同：0

时间：2009-02-25T16:15:58.890

您可以使用 linux 的“dd”命令行实用程序来克隆硬盘。只需从 linux cd 启动，克隆或恢复您的驱动器并重新启动。它也适用于 Windows/Mac 驱动器。

这会将第一个硬盘的分区 1 (/dev/sda) 克隆到第二个硬盘的分区 1 (/dev/sdb)

```
dd if=/dev/sda1 of=/dev/sdb1 
```

这会将第一个硬盘驱动器的分区 1 克隆到第二个驱动器上的 FILE。

```
dd if=/dev/sda1 of=/media/drive2/backup/2009-02-25.iso 
```

只需交换 if= 和 of= 的值即可恢复驱动器。

如果您从 Ubuntu live CD 启动，它将自动挂载您的 USB 驱动器，从而可以轻松地使用外部驱动器执行备份/恢复。

**注意：**在运行上述命令之前验证您的驱动器的身份。如果您不小心，很容易覆盖错误的驱动器。

            回答 #9

赞同：0

时间：2009-02-25T16:35:58.763

猜猜这不是您正在寻找的，但我只是记录了我在机器上安装和配置的所有内容。[Google Docs](http://docs.google.com)让我可以在任何地方执行此操作，并在机器崩溃时保持文档完整。

一份好的分步文档通常会将恢复时间缩短到一天左右

            回答 #10

赞同：0

时间：2009-02-25T16:58:38.007

如果您使用 Mac，只需插入外部硬盘驱动器，Time Machine 就会完成剩下的工作，按照您设置的时间表创建您机器的完整映像。当我更换 MacBook Pro 中的硬盘驱动器时，我从 Time Machine 图像恢复，它就像一个魅力。

我公司的几个人使用的另一种选择是将他们的开发环境放在大型 Linux 服务器上。他们只是使用本地机器运行 NX 客户端来访问远程桌面（NX比 VNC*快得多*）——这具有性能快速、在服务器上自动备份文件以及他们正在开发的事实在我们的客户使用的相同硬件上。

            回答 #11

赞同：0

时间：2009-02-26T05:51:44.233

无论您使用哪种解决方案，进行辅助备份总是一个好主意。辅助备份应该在场外，并包括您的基本工作（源代码、重要文档）。万一您的主站点发生了什么事（办公室发生火灾，有人闯入并窃取了您的所有硬件等），您最终仍然可以恢复。

有许多在线备份解决方案。您可以在可靠的提供商（例如 Amazon S3）处获得远程存储，并每天同步您的工作。解决方案取决于您可以获得的访问类型，但 rsync 可能是您将使用的工具。

        jquery - 使用 Django/Python 将批量 .csv 数据上传到 webapp 的好方法是什么？

ID：586517

赞同：2

时间：2009-02-25T15:39:46.823

标签：jquery, python, django, django-models, csv

我有一个非常基本的 CSV 文件上传模块，可以将我的用户数据批量上传到我的网站。我使用在 crontab 上运行的 python 脚本在后端处理 CSV 文件，然后通过电子邮件向用户发送批量上传的结果。这个过程在操作上可以正常工作，但我的问题是 csv 文件的格式。  

关于如何接受不同格式的 csv 文件，是否有好的工具甚至是基本规则？用户可能有不同的数据列顺序，列标题的名称略有不同（我希望电子邮件列标题为“电子邮件”，但它可能会显示“主要电子邮件”、“电子邮件地址”），或者缺少其他数据列。任何非常宽松且用户友好的 CSV 上传功能的好例子？

另外，我如何告诉用户导出为 CSV 数据？我正在导入通讯录信息，所以这些数据通常来自 Outlook、Thunderbird、其他有通讯录的软件包。我应该接受其他流行的数据格式吗？

            回答 #1

赞同：4

时间：2009-02-25T15:50:32.697

我会查看 Python 的内置 csv 模块。坦率地说，第一行的 .replace() 应该涵盖您的同义词问题，如果您使用的是[csv.DictReader](http://docs.python.org/library/csv.html#csv.DictReader)，您应该能够非常轻松地处理缺失的列：

```
my_dict_reader = csv.DictReader(somecsvfile)
for row in my_dict_reader:
    SomeDBModel.address2=row.get('address2', None) 
```

假设您想为缺失的字段存储一个 None 值。

            回答 #2

赞同：3

时间：2009-02-25T15:54:06.040

您应该强制将第一行作为标题，让用户将他们的标题与您在下一页上的字段名称相匹配，并记住该映射以备将来转储。

每当我进行 CSV 导入时，数据确实来自 Excel 电子表格。我已经能够通过使用[pyexcelerator](http://sourceforge.net/projects/pyexcelerator)直接导入来节省时间`.xls`。My `.csv`or `.xls`code 是一个生成器，它产生`{'field_name':'data', ...}`可以分配给模型对象的字典。

如果您正在处理地址数据，您应该接受[vCard](http://en.wikipedia.org/wiki/VCard)。

            回答 #3

赞同：1

时间：2009-02-25T15:50:13.740

上传后，我将在您的脚本中处理随机列标题映射。很难制作一个“包罗万象”来处理用户可能输入的任何内容。我会让它随着你的发展而发展，并根据你的用户上传的内容慢慢建立一个一对一的关系列表。

或者！

检查列标题并确保其格式正确，如果不正确，请告知他们如何修复它。

“主电子邮件”无法识别，我们的架构是“电子邮件”、“地址”、“电话”等。

您也可以接受 XML，这将允许您创建他们必须遵守的自己的模式。看看[这个教程](http://www.xfront.com/files/tutorials.html)。

            回答 #4

赞同：1

时间：2009-02-25T15:59:24.903

看看这个项目：[django-batchimport](http://code.google.com/p/django-batchimport/)

这对你来说可能有点矫枉过正，但它仍然可以为你提供一些改进自己代码的好主意。

编辑：另外，请忽略它仅使用 xlrd 来导入 Excel。基本概念是相同的，只是您将使用 csv 模块而不是 xlrd。

            回答 #5

赞同：1

时间：2009-02-25T16:15:08.627

如果您将 excel 表格复制到剪贴板，然后将结果粘贴到记事本中，您会注意到它是制表符分隔的。我曾经使用它通过将编辑器中的数据复制粘贴到 html 页面上的 textarea 来从大多数表格编辑器进行批量导入。

您可以使用 textarea 的背景作为列数的提示，并将您的标题放在顶部，建议用户的顺序。

Javascript 将处理粘贴的数据并通过简单的预验证立即将它们显示给用户，从而可以轻松修复错误和重新粘贴。

然后单击导入按钮，再次验证数据并显示导入结果。不幸的是，我从来没有听到任何关于它是否易于使用的反馈。

无论如何，在实施批量导入时，我仍然将其视为一种选择。

            回答 #6

赞同：1

时间：2009-02-25T22:29:30.397

查看标准库中的`csv`模块。它包含流行 CSV 方言的预设，例如 Excel 生成的一种。

阅读器类支持字段映射，如果文件包含列标题，则它不依赖于列顺序。对于更复杂的逻辑，例如查找字段的多个替代名称，您需要编写自己的实现。

        sql-server-2005 - 如何将多行中的所有值合并到一行中？

ID：586519

赞同：0

时间：2009-02-25T15:40:37.167

标签：sql-server-2005, tsql

可以说我有查询：

```
SELECT Foo FROM Bar 
```

哪个返回

**富**

A 

B 

C

我到底是什么：

**Foo**

A,B,C

因此，所有行中的所有值都已折叠成一行（逗号是可选的）。

有没有办法使用 select 语句来执行此操作，因为我不想使用游标？

            回答 #1

赞同：2

时间：2009-02-25T15:46:48.740

```
DECLARE @foos VARCHAR(4000)

SELECT @foos = COALESCE(@foos + ',', '') + Foo FROM Bar

SELECT @foos AS Foo 
```

            回答 #2

赞同：1

时间：2009-02-25T15:58:59.163

```
SELECT
    (   
    SELECT
      CASE
        WHEN ROW_NUMBER() OVER(ORDER BY bar) = 1 THEN ''
        ELSE ', '
      END + CAST(bar AS VARCHAR)
    FROM foo
    ORDER BY bar
    FOR XML PATH('')
    ) 
```

            回答 #3

赞同：0

时间：2009-02-25T15:48:17.770

罗斯，  

这应该让你开始。

```
 DECLARE @r VARCHAR(8000)
  SELECT @r = (SELECT DISTINCT Foo + ', ' FROM Bar FOR XML PATH(''))
  IF @r IS NOT NULL AND @r <> '' SET @r = SUBSTRING(@r, 1, LEN(@r)-1)
  SELECT @r 
```

            回答 #4

赞同：0

时间：2009-02-25T15:53:12.003

尝试以下

```
declare @joined varchar(max)
set @joined = ''

select  @joined = @joined + IsNull(Foo + ',', '')
from    Bar (nolock)

--; Drop last "," if necessary
set @joined = substring(@joined, 1, len(@joined) - (case when len(@joined) > 0 then 1 else 0 end))
select  @joined as foo 
```

            回答 #5

赞同：0

时间：2009-02-25T16:05:36.963

```
 select max(a),max(b),max(c) from
 (
      select 'a' as a,null as b,null as c
      union
      select null,'b',null
      union
      select null,null,'c'
 ) as x 
```

        sql - SQL 分组依据

ID：586522

赞同：4

时间：2009-02-25T15:41:29.160

标签：sql, group-by

如果我有一组记录

```
name    amount    Code
Dave    2         1234
Dave    3         1234
Daves   4         1234 
```

我希望它根据代码和名称进行分组，但最后一行的名称有错字，所以这不会分组。  

将这些分组为：

`Dave/Daves  9   1234`

            回答 #1

赞同：6

时间：2009-02-25T15:46:26.793

作为一般规则，如果数据错误，您应该修复数据。

但是，如果您无论如何都想做报告，您可以提出另一个分组条件，例如 LEFT(Name, 4) 将对名称的前 4 个字符执行分组。

您可能还想将 CASE 语句视为一种方法（CASE WHEN name = 'Daves' THEN 'Dave' ELSE name），但我真的不喜欢这种方法，尤其是如果您打算将它用于其他任何事情时一次性报告。

            回答 #2

赞同：5

时间：2009-02-25T15:45:52.877

如果这是一种解决方法，请尝试

```
SELECT cname, SUM(amount)
FROM (
  SELECT CASE WHEN NAME = 'Daves' THEN 'Dave' ELSE name END AS cname, amount
  FROM mytable
)
GROUP BY cname 
```

这个 if 当然将只处理这个确切的情况。

            回答 #3

赞同：1

时间：2009-02-25T15:45:42.037

修正错字？否则按名称分组将创建一个新组。

修复数据应该是您的首要任务，而不是试图设计“解决”它的方法。

还应该注意的是，如果您的数据中有这个拼写错误，那么您很可能拥有（或在未来某个时间点）甚至更多不适合您的代码的混乱数据，这将迫使您当您应该专注于数据的清洁度时，发明越来越多的“变通办法”来处理它。

            回答 #4

赞同：1

时间：2009-02-25T16:01:09.363

对于 MySQL：

```
select
  group_concat(distinct name separator '/'),
  sum(amount),
  code
from
  T
group by
  code 
```

对于 MSSQL 2005+，group_concat() 可以实现为 .NET 自定义聚合。

            回答 #5

赞同：1

时间：2009-02-25T16:09:06.927

如果 name 字段被假设为一个键，那么假设必须是 Dave 和 Daves 是两个不同的项目，因此应该进行不同的分组。但是，如果这是一个错字，那么正如其他人所建议的那样，修复数据。

如果是这样，对自由格式输入的文本字段进行分组，总是会出现问题。数据输入永远不会是 100%。

对我来说，如果代码是关键字段并将名称完全排除在分组之外，那么单独对代码进行分组更有意义。

        php - preg_match_all

ID：586523

赞同：0

时间：2009-02-25T15:41:31.453

标签：php, preg-match-all

有人可以向我解释一下吗，我不熟悉 preg_match_all 过滤器，此代码工作正常，但如果纬度和经度之一为负数，它不会返回负值。

```
if ( preg_match_all( "#<td>\s+-?(\d+\.\d+)\s+</td>#", $output, $coords ) ) {
    list( $lat, $long ) = $coords[1];
    echo "Latitude: $lat\nLongitude: $long\n";
} 
```

输出：（
    `Latitude: 30.6963 Longitude: 71.6207`  经度缺少'-'）

            回答 #1

赞同：3

时间：2009-02-25T15:44:13.507

变量的值`coords`取决于括号内的代码匹配的内容。`-?`在括号内移动可选的减号 ( ) 应该可以解决问题：

```
if ( preg_match_all( "#<td>\s+(-?\d+\.\d+)\s+</td>#", $output, $coords ) ) { 
```

php 中 preg 的详细信息[见](http://php.net/preg_match_all)官方[文档](http://php.net/manual/en/regexp.reference.php)，.`preg_match_all`

            回答 #2

赞同：1

时间：2009-02-25T15:45:38.277

您的符号不在括号中。$coords[1] 包含与 ( 和 ) 之间的部分匹配的正则表达式部分。但是，+- 在括号之前，因此它们不是匹配和返回的内容的一部分。

            回答 #3

赞同：0

时间：2019-01-24T16:00:59.160

如果你不喜欢`preg_match()`API，你可以使用[T-Regx 工具](https://t-regx.com)——它真的很酷

```
$p = "<td>\s+(-?\d+\.\d+)\s+</td>"; // no delimiters :)

pattern($p)->match($output)->forEach(function (Match $match) {
    $match->text();

    // or
    $match->group(1)->text();
    // or check if it's matched
    $match->group(1)->matched();
}); 
```

        c# - WPF 中的列表框滚动条自定义

ID：586525

赞同：2

时间：2009-02-25T15:42:04.773

标签：c#, wpf

我正在制作一个用于触摸屏的应用程序。其中一个表单显示了一个激活了滚动条的列表框，通过用手指触摸屏幕来使用它有点棘手。

我试图制作一种在滚动条内制作更大按钮的样式，但我无法将其应用于列表框。

是否可以在列表框内的滚动条中制作一种样式以制作更大的按钮？

谢谢

            回答 #1

赞同：2

时间：2009-02-25T16:00:51.237

如果您使用的是 Blend，那么您需要：

```
1\. Right click your ListView
2\. Select "Edit Control Parts --> Edit a copy"
3\. Now right click the ScrollViewer in "Objects and Timeline"
4\. Select "Edit Control Parts --> Edit a copy" again
5\. Now you're editing a template for the ScrollViewer and you can play
   with the size of the VerticalScrollBar 
```

如果您不使用 Blend，那么您只是为 ListView 创建一个模板，该模板引用了 ScrollViewer 的新模板。

        sql - 数据库属性“镜像”页面

ID：586526

赞同：4

时间：2009-02-25T15:42:12.777

标签：sql, sql-server, sql-server-2005

我的 SQL Server 2005 生产服务器上的一个数据库出现问题。

已经为镜像设置了许多数据库，但是当我右键单击并转到 SSMS 中的属性时，在一个特定的数据库上没有可用的“镜像”属性页。

我已经完成了正常的任务，例如设置完全恢复模式、运行数据库的完全备份和备份日志。

我看不出这是一个特定于服务器的问题，因为其他数据库正在愉快地镜像。

我环顾四周，我看不到我缺少一个设置，任何帮助将不胜感激。

谢谢。

编辑：这与 Mirror Database 无关，我无法指定 Mirror Database ，原则上我看不到“镜像”页面。

编辑：我已经设法使用 t-sql 命令设置镜像。但是我仍然无法看到“镜像页面”。

更新：这也适用于事务日志传送选项。我可以在 SQL 中成功设置它，但不能通过 SSMS。

            回答 #1

赞同：1

时间：2009-02-25T17:45:30.093

检查这些项目：

2\. 镜像数据库必须从主体服务器的完整备份中创建，并且应该以“Restore with Norecovery”模式进行恢复。随后恢复主数据库的事务日志备份，使镜像和主数据库的日志序列号彼此同步。

  3\. 镜像数据库必须与主体数据库同名。

  ... 8 . DB Mirroring 在 Enterprise、Developer 和 Standard Edition 中可用，但是，请参阅 Microsoft 网站以获取比较表，因为 Standard Edition 中不提供某些功能。SQL Server Workgroup 和 Express Edition 只能用作见证服务器。

  [Microsoft SQL Server 2005 中的数据库镜像](http://aspalliance.com/1388_Database_Mirroring_in_Microsoft_SQL_Server_2005.2)

使用 sp_dbmmonitorresults 进行测试监视[(Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms366320.aspx)

            回答 #2

赞同：0

时间：2009-04-14T12:45:23.550

我没有答案，但我昨天遇到了同样的症状，我记得你的问题，哈哈哈。我的问题是我使用向导设置了数据库镜像，但是其中一个系统的防火墙阻止了镜像端口。向导设置一直到启用数据库镜像的最后部分，然后出错 - 但此时已经设置了镜像。镜像效果很好，但是数据库元数据中的某些内容设置不正确。即使我删除了防火墙，SSMS 的某些部分也表现得好像没有为该特定数据库设置镜像，即使它是。

然后我为镜像设置了额外的数据库（关闭了防火墙），它们工作得很好。我的解决方案是删除该数据库上的镜像，然后再次添加它，它工作正常。不过，听起来这对你不起作用。

            回答 #3

赞同：0

时间：2009-12-04T16:11:53.293

我最终不得不为我所面临的问题拨打 Microsoft 支持电话。无论如何，经过一段时间和多次支持会议后，他们发现有问题的数据库在 sys.databases 中的 ID 为 4。ID 1-4 通常是为系统数据库保留的，如果数据库具有这些 ID 中的任何一个，则不会显示 T-log 或 Mirroring 属性。所以不知何故，我们的数据库得到了 ID 3，现在我最好继续分离并重新连接一些数据库以重新分配 ID。

        javascript - 点击事件在 Firefox 中不起作用

ID：586527

赞同：0

时间：2009-02-25T15:42:22.857

标签：javascript, jquery, html, events

我正在使用 jquery 点击功能：

**按钮代码**

```
<input type="button" id="myButtton"> 
```

**jQuery代码**

```
$(document).ready(function () {
    $("#myButtton").click(function () {
        alert("Mybutton");
    });
}); 
```

此代码在 Internet Explorer 中有效，但在 Firefox 中无效。

我究竟做错了什么？

            回答 #1

赞同：4

时间：2009-02-25T16:21:13.790

在代码中：

```
$(document).ready(function(){ 
    $("#myButtton").click(function(){
        alert("Mybutton");
    }); 
```

我相信它缺少另一个右括号：

```
$(document).ready(function(){ 
    $("#myButtton").click(function(){
        alert("Mybutton");
    });
}); 
```

            回答 #2

赞同：0

时间：2009-02-25T15:45:06.547

您确定该元素具有**id 属性**吗？或者它是否只有一个值为“myButton”的名称属性。为了跨浏览器工作，id 属性是强制性的，而 name 是可选的（仅 IE 和 Opera AFAIK）。

**注意**：我的回答可能看起来很白痴，但不是原始发布者在问题中添加了代码示例（查看编辑历史记录）。

            回答 #3

赞同：0

时间：2009-02-25T16:09:14.337

我最好的猜测是您有其他`input`具有相同ID的人？尝试改用类，或者改用 jQuery 的 CSS 选择器`$('input[type=button]')`。

如果您还没有这样做，我还建议您安装 FireFox 的 FireBug 插件（[http://www.getfirebug.com/](http://www.getfirebug.com/)）。它将帮助您调试这样的 JavaScript 问题，以及更多。

        c# - 如何在 C# 中使用“使用”而不出现“InvalidOperationException”？

ID：586530

赞同：1

时间：2009-02-25T15:42:49.157

标签：c#, .net, debugging, tcpclient

我正在尝试替换以下可以正常工作的代码

```
TcpClient oC = new TcpClient(ip, port);
oC = new TcpClient(ip, port);
StreamReader messageReader;

try {
   messageReader = new StreamReader(oC.GetStream(), Encoding.ASCII);
   reply = messageReader.ReadLine();
} 
```

和

```
try {
   using (messageReader = new StreamReader(oC.GetStream(), Encoding.ASCII))
   {
       reply = messageReader.ReadLine();
   }
} 
```

但我得到一个`InvalidOperationException`说法

在未连接的套接字上不允许该操作。

有什么问题，我该如何解决？

**更多：**我在这段代码之前有 oc.Connect，所以我已连接，当它想第一次使用时工作正常，只有在那之后我才得到那个异常，我玩了一下它，现在我得到：

无法访问已释放的对象。\r\n对象名称: 'System.Net.Sockets.Socket'。

            回答 #1

赞同：12

时间：2009-02-25T15:45:29.540

在创建 StreamReader 之前尝试调用 oc.Connect。在连接套接字之前，没有任何内容可以实际读取，因此会出现异常。

            回答 #2

赞同：4

时间：2009-02-25T18:58:52.307

只是重申我对 Jareds 答案的评论。

阿里评论：

在此之前我有 oc.Connect，它第一次工作正常，但第二次发生，我也得到“无法访问已处置的对象。\r\n对象名称：'System.Net.Sockets.Socket'。” – 阿里（13 分钟前）

我评论说：

“那是因为 StreamReader 获得了流的所有权，并关闭并处置了您启动它的 Stream。在这种情况下，是 TcpClient 的 NetworkStream。这里不需要处置 StreamReader”

            回答 #3

赞同：2

时间：2014-08-13T17:08:51.093

所以使用[正确的构造函数](http://msdn.microsoft.com/en-us/library/gg712952%28v=vs.110%29.aspx)。

```
using (messageReader = 
        new StreamReader(oC.GetStream(), Encoding.ASCII, false, 4096, true))
{
   reply = messageReader.ReadLine();
} 
```

注意最后一个参数并阅读[文档](http://msdn.microsoft.com/en-us/library/gg712952%28v=vs.110%29.aspx)`leaveOpen:`中的含义。

但是，IIRC， StreamReader 缓冲流中的内容（默认情况下，读取 4096 字节），因此当您处理 StreamReader 时，您可能会惊讶地发现流的位置已经超出了您的数据末尾使用 StreamReader 读取。允许 StreamReader 取得所有权通常总是一个好主意。在读取所有数据之前，您不能让它保持打开状态吗？

            回答 #4

赞同：1

时间：2009-02-25T15:47:10.190

听贾里德，你的实际异常，使用与它无关，你的尝试可以掩盖错误并隐藏真正的问题。真正的错误是您在尝试读取之前从未真正连接过您的套接字。

编辑：

听起来正在发生的是，您连接一次，然后连接被切断或对象失去作用域。在这种情况下，您需要做的可能是捕获断开连接并重新创建最初用于连接到服务器的套接字。一旦处理了该套接字，您就不能再次使用相同的引用，您必须实例化一个新的引用并使用它。  

您是否有一个更完整的示例可以发布来显示您的连接范围与使用情况，以便我们可以准确地看到 GC 拾取底层套接字的位置？

            回答 #5

赞同：1

时间：2009-02-25T15:48:15.167

此外，您将 messageReader 声明为 StreamWriter。它不应该是 StreamReader 吗？

```
StreamWriter messageReader; 
```

[由 OP 修复]

另一个提示，最好在 using 语句中实例化一个对象，而不是将其传入。它可能不是您的异常的实际原因，而是[来自 MSDN](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)：

您可以实例化资源对象，然后将变量传递给 using 语句，但这不是最佳实践。在这种情况下，对象在控制离开 using 块后仍保留在范围内，即使它可能不再有权访问其非托管资源。换句话说，它将不再被完全初始化。如果您尝试在 using 块之外使用该对象，则可能会引发异常。出于这个原因，通常最好在 using 语句中实例化对象并将其范围限制在 using 块中。

            回答 #6

赞同：-3

时间：2009-02-25T15:47:35.870

我认为您不允许先定义 StreamWriter，然后将其与“使用”一起使用。

试试这个：

```
TcpClient oC = new TcpClient(ip, port);
oC = new TcpClient(ip, port);

try {
   using (StreamWriter messageReader = new StreamReader(oC.GetStream(), Encoding.ASCII))
   {
       reply = messageReader.ReadLine();
   }
} 
```

        xml - 带有命名空间的 XML 元素

ID：586535

赞同：0

时间：2009-02-25T15:44:19.950

标签：xml, nhibernate, linq-to-xml

我们开始使用 nhibernate 并设置了一个 Session Manager 来创建一个新的 SessionFactory。我需要在应用程序第一次启动时修改一些信息。

我使用 XDocument 打开配置文件（不是 app.config）。

```
<settings>
  <hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
    <reflection-optimizer use="false"/>
    <session-factory>
       <property name="x">SomeValue</property>
    </session-factory>
  </hibernate-configuration>
</settings>

XDocument xdoc = XDocument.Load(<file>);
var x = xdoc.Root.Element("hibernate-configuration"); 
```

x 为空，除非我删除 xmlns。我错过了什么？

            回答 #1

赞同：3

时间：2009-02-25T15:52:23.113

看起来您是通过 null 命名空间中的本地名称而不是您在此处添加的新命名空间来调用该元素：

```
<hibernate-configuration xmlns="urn:nhibernate-configuration-2.2"> 
```

试试这个：

```
xdoc.Root.Element(XName.Get("hibernate-configuration", "urn:nhibernate-configuration-2.2")) 
```

            回答 #2

赞同：1

时间：2009-02-25T15:49:29.267

您需要使用 XName.Get 传递此名称空间 URI，否则您将只能在默认的空名称空间中获得 <hibernate-configuration> 元素的匹配项。

```
var x = xdoc.Root.Element (
  XName.Get ( "hibernate-configuration", "urn:nhibernate-configuration-2.2" ) ); 
```

        asp.net - 从应用程序内监视 ASP.NET 应用程序内存

ID：586544

赞同：6

时间：2009-02-25T15:45:06.233

标签：asp.net, memory

我正在寻找一种方法让应用程序本身监控它正在使用的内存量，这样我就可以每隔一小时左右将其记录在一个日志文件中，并密切关注应用程序的使用情况。

它全部托管，因此我们可以对系统进行更改以查看正在发生的事情，因此解决方案必须来自应用程序代码。

我们将来可能会使用内存信息来影响缓存策略。

            回答 #1

赞同：5

时间：2009-02-25T16:07:11.360

嗯，你需要多详细的信息？如果您只想要内存使用情况，您可以询问 GC。它知道。;)

```
long bytes = GC.GetTotalMemory(false); // use 'false' to not wait for next collect 
```

变量 'bytes' 将包含托管内存中当前分配的字节数。我不确定托管内存是否需要整个进程或只是 AppDomain。您必须通过在一个进程中运行多个 AppDomain 来测试这一点，并查看是否跨 AppDomain 测量托管内存分配。如果他们不这样做，那么您可以使用它来测量 ASP.NET 应用程序中的总内存使用情况。

如果您想要更具体的信息，可以使用 CLR 的诊断 API 来进行交互。还有很多内存分析器，但我不能说它们是否可以在 ASP.NET 应用程序中工作。

            回答 #2

赞同：1

时间：2009-02-25T17:31:44.747

作为替代方案，如果您需要更详细的信息，可以使用 System.Diagnostics.PerformanceCounter 类读取性能计数器。以下是您可以插入的一些计数器：

请求总字节数

请求总字节数

请求等待时间

请求执行

请求/秒

错误总数

        c# - 如何在 C# 中阻止键盘和鼠标输入？

ID：586547

赞同：13

时间：2009-02-25T15:45:15.283

标签：c#, windows, keyboard, mouse

我正在寻找一些可以阻止键盘和鼠标输入的代码（最好是 C#）。

            回答 #1

赞同：23

时间：2009-02-25T15:55:13.900

扩展 Josh 的（正确）答案。这是该方法的 PInvoke 签名。  

```
public partial class NativeMethods {

    /// Return Type: BOOL->int
    ///fBlockIt: BOOL->int
    [System.Runtime.InteropServices.DllImportAttribute("user32.dll", EntryPoint="BlockInput")]
    [return: System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.Bool)]
public static extern  bool BlockInput([System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.Bool)] bool fBlockIt) ;

}

public static void BlockInput(TimeSpan span) {
  try { 
    NativeMethods.BlockInput(true);
    Thread.Sleep(span);
  } finally {
    NativeMethods.BlockInput(false);
  }
} 
```

**编辑**

添加了一些代码来演示如何阻止间隔

            回答 #2

赞同：7

时间：2009-02-25T15:49:16.317

查看[BlockInput](http://msdn2.microsoft.com/en-us/library/ms646290.aspx) Win32 函数

听起来像是一些有趣的测试:)

            回答 #3

赞同：0

时间：2021-05-06T23:14:23.863

```
using System.Runtime.InteropServices;
public partial class NativeMethods
{        
    [DllImport("user32.dll", EntryPoint = "BlockInput")]
    [return: MarshalAs(UnmanagedType.Bool)]
    internal static extern bool BlockInput([MarshalAs(UnmanagedType.Bool)] bool fBlockIt);
} 
```

`internal`不是`public`。所以不属于CA1401
公共类型中的公共或受保护方法具有[System.Runtime.InteropServices.DllImportAttribute](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2015/code-quality/ca1401-p-invokes-should-not-be-visible?view=vs-2015&redirectedfrom=MSDN)属性

        .net - 如何检测 Windows 窗体中的无效数据绑定

ID：586553

赞同：1

时间：2009-02-25T15:46:05.390

标签：.net, winforms, data-binding

Visual Studio (2005 Professional)，Windows Forms 应用程序：我有一个包含 8 个选项卡的表单，每个选项卡都包含几十个控件。它们中的每一个都绑定到类型化数据集的一个元素。这很好，除了数据绑定错误只能在运行时发现并且通常是*静默*的。

典型案例：我必须重命名数据集表中的一列，我忘记更新链接到该列的一个控件的数据绑定信息...

你知道一种方法：

*   检测表单中未绑定的控件？
*   检测绑定到无效（不存在）数据的控件？

            回答 #1

赞同：2

时间：2009-02-25T15:51:06.110

您可以使用单元测试。在其中一项测试中，您将创建表单实例，设置一些示例数据，然后迭代所有控件并检查数据绑定。如果绑定到数据，尝试读/写值。如果你得到异常，你知道哪里有错误。

        jquery - jQuery UI 中类似手风琴的单元素扩展组件

ID：586558

赞同：1

时间：2009-02-25T15:47:04.420

标签：jquery, accordion, expander

我需要在 jQuery UI 中实现一个展开/折叠框。折叠时，只会显示框标题。展开时，会显示标题+内容。

我需要做的是非常接近带有 alwaysOpen=false 的 jQuery UI 单元素手风琴（相同的属性在文档中称为“可折叠”，但在 jQuery 1.3.2 和 jQuery UI 1.6rc6 的实践中，它似乎总是打开） ：

```
$('.myAccordion').accordion({
    header: 'h3'
    , alwaysOpen: false
}); 
```

有一个问题：**我需要展开/折叠仅在单击左侧的三角形时发生，而不是在单击整个标题时发生。**

另一个要求是我想使用 jQuery UI 默认 UI 样式而不是实现我自己的样式表，以便我可以在需要时使用 themeRoller 滚动新样式。jQuery UI 中的手风琴样式（包括标题中的箭头）非常适合此目的。

现在，我有两个选择：

1) 配置 Accordion 小部件，以便只有三角形响应展开/折叠事件。我需要基本上忽略标题其余部分的点击。

2）实现我自己的小部件，使用手风琴样式作为基础。

我宁愿做 1)，但我很难弄清楚如何只让箭头响应点击事件。

那么，至于实际的问题，您将如何做到这一点？

            回答 #1

赞同：1

时间：2012-11-03T12:29:03.270

我是这样做的：

```
$('.accordion').accordion({
  header: '.accordion-header',
  collapsible: true
}); 
```

            回答 #2

赞同：0

时间：2009-02-25T22:04:42.983

好的，事实证明，使用手风琴小部件本身很容易做到这一点。只需这样设置手风琴：

```
$('.myAccordion').accordion({
    header: 'h3'
    , alwaysOpen: false
    , event: 'click'
});

$('.myAccordion h3 a').click(function() {
    return false;
}) 
```

虽然由于点击目标区域太小，这是不好的可用性实践，但它回答了我发布的问题。

        latex - 使 LaTeX 中的代码看起来 *nice*

ID：586572

赞同：137

时间：2009-02-25T15:49:17.317

标签：latex, listings

我目前正在写一份项目报告，为了解释我使用过的有点疯狂且不直观的代码，我需要在其中放入大量简短的示例代码摘录。

我如何将代码放入 LaTeX 中：

*   看起来不错
*   如果行太长（列表 lstlisting 或逐字），则不会离开页面的一侧
*   最好与文本的其余部分内联

已编辑（我想我会添加设置，这样人们就不必自己尝试找出它们（取自维基书籍（链接进一步向下）并为美观而编辑））

不错的设置：

```
\usepackage{color}
\usepackage{listings}
\lstset{ %
language=C++,                % choose the language of the code
basicstyle=\footnotesize,       % the size of the fonts that are used for the code
numbers=left,                   % where to put the line-numbers
numberstyle=\footnotesize,      % the size of the fonts that are used for the line-numbers
stepnumber=1,                   % the step between two line-numbers. If it is 1 each line will be numbered
numbersep=5pt,                  % how far the line-numbers are from the code
backgroundcolor=\color{white},  % choose the background color. You must add \usepackage{color}
showspaces=false,               % show spaces adding particular underscores
showstringspaces=false,         % underline spaces within strings
showtabs=false,                 % show tabs within strings adding particular underscores
frame=single,           % adds a frame around the code
tabsize=2,          % sets default tabsize to 2 spaces
captionpos=b,           % sets the caption-position to bottom
breaklines=true,        % sets automatic line breaking
breakatwhitespace=false,    % sets if automatic breaks should only happen at whitespace
escapeinside={\%*}{*)}          % if you want to add a comment within your code
}

\begin{lstlisting}
!!code!!
\end{lstlisting} 
```

这些设置的示例：

![](https://i.stack.imgur.com/VqQPo.png)

            回答 #1

赞同：42

时间：2009-02-25T15:51:45.530

[列表](http://www.ctan.org/tex-archive/macros/latex/contrib/listings/)包非常好并且非常灵活（例如，注释和代码的大小不同）。

            回答 #2

赞同：18

时间：2009-02-25T17:25:34.340

事实证明，`lstlisting`它能够很好地格式化代码，但需要进行大量调整。

[Wikibooks](http://en.wikibooks.org/wiki/LaTeX/Packages/Listings)有一个很好的例子来说明你可以调整的参数。

            回答 #3

赞同：2

时间：2009-02-25T15:54:07.633

对于简单的文档，我有时会逐字使用，但对于大块代码来说，列出是很好的。

        tfs - 在 Team Foundation Server 2008 中使用区域和迭代

ID：586574

赞同：10

时间：2009-02-25T15:49:37.300

标签：tfs, tfs-workitem

如果您使用的是 TFS 2005 或 2008，您如何使用迭代和区域？

您是否为正在构建的应用程序的特定部分创建区域？

这是一篇关于区域以及 TeamSystem 团队如何使用它们的有趣文章：

[http://blogs.msdn.com/ericlee/archive/2006/08/09/when-to-use-team-projects.aspx](http://blogs.msdn.com/ericlee/archive/2006/08/09/when-to-use-team-projects.aspx)

但是，我对迭代更加好奇，如果你能给我一些具体的例子，我将不胜感激。

您是基于里程碑还是基于某些功能创建迭代？

完成 v1 后会发生什么，如何管理 v2 或对 v1 的更新？

我们正在使用 MSF Agile 模板。

            回答 #1

赞同：8

时间：2009-02-25T15:59:20.710

我们使用区域来表示产品线。

由于我们使用 SCRUM，因此 TFS 中的迭代用于定义我们的发布周期，以及这些发布周期中的 sprint。

积压项目分配给发布周期，工作项目分配给 eash sprint 以确保完成这些积压项目。

发布后，在处理下一个版本的同时将 bug 修复/更新添加到 backlog 是非常好的。

![在此处输入图像描述](https://i.stack.imgur.com/S8x76.jpg)

            回答 #2

赞同：8

时间：2009-02-27T17:30:30.537

迭代和区域路径是您想要的。它是您如何在空间和时间上描述您的项目的方式。一个简单的例子如下：

区域路径（空间） - 可用于描述系统/项目的各个部分。假设您为 GUI 应用程序创建了一个 TeamProject，某些区域将描述其模块（数据输入、报告、GUI、打印等......）

迭代路径（时间） - 描述项目的版本控制或发布周期。在我工作的公司使用发布版本作为他们的迭代（主要、次要、构建、修订）。它有助于跟踪工作项以标记预期完成的迭代。我们有一个静态的 TBD 迭代，它是所有创建的工作项的默认值。管理层稍后将决定将这些工作项定位到何处并分配或关闭它们。

            回答 #3

赞同：2

时间：2009-02-25T16:10:58.810

我假设您正在使用迭代作为 MSF 敏捷或其他类型的敏捷方法的一部分。如果是这样，一般来说，您会计算出您的团队在接下来的 n 周内可以完成多少工作。一般来说，我们使用了 3 周，但您的迭代长度可能会有所不同。

您如何确定迭代的项目通常基于优先级，这应该基于市场/业务影响（项目的热度）和实施的难易程度。影响分数是较重的权重，但您应该在分数中考虑易于实施，因为您可能有一些“物有所值”的项目。

敏捷的规则是放弃无法完成的功能。您永远不要延长迭代日期。

这应该回答里程碑与功能的问题。两者都不是。您按时间进行迭代。现在是盒装时间。通过这种方式，您可以计算出您的团队对下一次迭代调整的乐观程度，以获得更准确的估计。如果您基于功能进行迭代，您将始终错过日期。里程碑也是如此。

注意：如果你说的是瀑布，规则可以基于里程碑和功能，但对于敏捷，时间为王。

现在到领域：这个更主观。划分区域的一种方法是将用例分组。我喜欢这种方法。但是，当涉及到用户界面时，您还可以为特定表单创建区域等。

        excel - 更改 .Interior.ColorIndex 无效

ID：586584

赞同：1

时间：2009-02-25T15:51:22.007

标签：excel, vba, excel-2003

在 Excel 2003 中，当我将 Series.Interior.ColorIndex 更改为我需要的值时，它不起作用。只有当我第一次手动更改颜色然后运行宏时它才有效果。显然这会触发一些更新机制。有人对此有解释吗？有没有办法在图表中以某种方式触发它？...即确保颜色更改生效。

此外，当我单步执行代码并查看 ColorIndex 时，即使分配了值，它也不会改变。这是 Excel 中的众多错误之一吗？

代码如下所示：

```
Sub DoStuff()
    Dim j As Long
    For j = 1 To ActiveChart.SeriesCollection.Count
        With ActiveChart.SeriesCollection(j)
           Select Case ActiveChart.SeriesCollection(j).Name
               Case "Milk"
                  .Interior.ColorIndex = 4
               Case "Cookies"
                  .Interior.ColorIndex = 28
               Case "Honey"
                  .Interior.ColorIndex = 26
            End Select
        End With
    Next j
End Sub 
```

编辑：我正在使用条形图。

            回答 #1

赞同：1

时间：2009-02-25T16:40:16.787

尝试设置边框。

```
.Interior.ColorIndex = 4
.Border.ColorIndex = 4
.Border.Weight = xlMedium 
```

            回答 #2

赞同：1

时间：2009-02-25T16:40:29.393

**编辑：**回应对原始问题的评论和编辑：

我列出了一个示例 Excel 文件，并且我能够让您的代码正常工作。这是我的数据的布局方式：

```
 |    A    |  B  |  C  |  D  |
--------------------------------
 1 | Milk    |  3  |  1  |  4  |
 2 | Cookies |  1  |  5  |  9  |
 3 | Honey   |  2  |  6  |  5  | 
```

条形图看起来像这样：

```
 ._.
                          |C|
               ._.._.     |C|._.
 ._.   ._.     |C||H|  ._.|C||H|
 |M|._.|H|  ._.|C||H|  |M||C||H|
 |M||C||H|  |M||C||H|  |M||C||H|
---------------------------------
     1          2          3 
```

上图中所有标有“M”的条都属于“牛奶”系列，所有标有“C”的条都属于“饼干”系列，所有标有“H”的条都属于“蜜”系列。

当我在此图表上运行您的代码时，条形颜色按预期更改。你能告诉我我的设置和你的设置有什么不同吗？我会试着弄清楚，但我需要更多信息:)

            回答 #3

赞同：0

时间：2009-08-12T04:24:13.813

可能是 Excel 中的一个错误，您使用的是哪个版本的 Excel？确保您对其进行服务包/修补，然后再次尝试重现该问题。

            回答 #4

赞同：0

时间：2009-10-14T18:17:41.323

我有同样的问题，使用 excel 2007 和 2003。

But i fixed it by opening the workbook in 2003, then formatting the data series by right-clicking (etc) and setting it's fill color to Automatic. then when i ran my macro, the colorindex setting part would take hold.

        iphone - 查找谁对对象有保留计数

ID：586586

赞同：5

时间：2009-02-25T15:51:23.957

标签：iphone, objective-c, cocoa, cocoa-touch

我有一个 UIViewController 在我实例化它时它的 retainCount 为 3。这让我觉得非常不正确。找出谁将retainCount 增加到3 的最佳方法是什么？我想实例化对象应该给出指针 1，然后我想也许将它推到 UINavigationController 的堆栈上可能会增加一个（虽然不确定？），但第三个.. 是一个谜。

            回答 #1

赞同：43

时间：2009-02-25T16:26:22.297

亚当是对的，你不应该过度关注保留计数。

但是，如果您有合理的需要解决这样的谜题，那么一个好的技术是对受影响的类进行子类化，这样您就可以将覆盖添加到内存管理方法中。

例如，在 UIViewController 的子类中，您可以实现：

```
- (id) retain
{
    // Break here to see who is retaining me.
    return [super retain];
} 
```

            回答 #2

赞同：20

时间：2009-02-25T15:55:19.033

永远不要直接依赖保留计数。发生的事情是，在初始化过程中，一些代码已经`retain`ed 和`autorelease`d 对象。因为你不知道一个对象被 d 了多少次`autorelease`，所以你实际上不知道*真正的*保留计数是多少。

保留计数应*仅用*作调试辅助，*而不*应用作程序控制流。

只要您遵循[Cocoa 内存管理编程指南中](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)列出的所有规则，您就不会遇到问题。

            回答 #3

赞同：8

时间：2009-02-25T16:23:31.243

找出谁将retainCount 增加到3 的最佳方法是什么？

那是从错误的角度解决问题。这*会使*您感到困惑，并*会*导致您误入歧途（并且可能正好过去）实际问题，而实际上确实存在问题。

最好考虑*谁拥有*该对象。您是否打算将对象保留为您自己的属性之一的值？如果是这样，那么您就是它的所有者之一。如果不是，那么你不是。如果您将对象传递给另一个对象以存储在它的一个属性中，那么另一个对象也是所有者。

这些所有权只是关系，因此很容易将它们直接记在脑海中。

*   “这是我的一个控制器。它拥有我的模型的根对象和一个或多个视图[控制器]。”</li>
    *   “这是一种观点。它拥有我模型的某些部分。”</li>
    *   “这是我模型的一部分。它只拥有原始对象。”</li>
    *   “这是我模型的另一部分。它拥有一些原始对象和其他一些模型。”</li>

如果你牢牢掌握了你的所有权，那么你*不能*写一个内存泄漏，除非忘记一个`release`或`autorelease`消息（这可能发生在任何人身上），你几乎肯定不会写一个循环保留（两个对象相互保留），除非你知道并带有大量评论和#warnings。

如果您还没有计算出您的所有权，那么您可能已经编写了一个或多个您不知道的内存泄漏或循环保留。

编辑：为了回答实际问题，找出保留对象以及可能随后自动释放对象的最佳方法是**使用 Instruments 的 Allocations instrument**。有了它，您可以查看任何对象的历史记录，以查看其地址的每次分配、保留、自动释放、释放和释放。

            回答 #4

赞同：1

时间：2009-02-26T02:35:53.440

这不是一个 100% 的解决方案，但 LLVM Clang 静态分析器可以在跟踪不正确的手动内存管理使用方面提供很大帮助。在静态分析器和 MallocDebug 之间，您可以快速成为跟踪内存管理问题的专家。顺便说一句，尽管 Instruments 是新的热点，但我发现 MallocDebug 更可靠。

您可以在此处找到 LLVM Clang 静态分析器：[LLVM/Clang 静态分析器](http://clang.llvm.org/StaticAnalysis.html "LLVM/Clang 静态分析器")

        svn - Subversion：如何对存储库进行核攻击？

ID：586590

赞同：4

时间：2009-02-25T15:51:45.767

标签：svn, version-control, repository

有没有办法**完全**清除 Subversion 存储库，使用户无法访问旧版本？

PS：我在存储库机器上具有 root 访问权限。

            回答 #1

赞同：4

时间：2009-02-25T16:07:34.137

只需删除存储库的根文件夹，但保存其中的`conf/`文件夹。然后，使用 新建一个存储库`svnadmin create`，并覆盖其上的旧配置文件夹。

编辑（为了完整性）：正如 Tunnuz 和 Jim T 所指出的，`hooks/`如果文件夹包含自定义脚本，您可能还需要保存文件夹的内容。

            回答 #2

赞同：2

时间：2009-02-25T16:10:03.990

不是真的，如果你想保留配置，将存储库目录的所有内容移动到一个安全的地方，然后使用 svnadmin 创建一个新的空白存储库，然后将你的 conf 和 hook 目录复制回来，以便用户和自动化脚本被替换。

然后，您的存储库将是空白的，从修订版 1 重新开始。

            回答 #3

赞同：1

时间：2009-02-25T15:53:10.083

删除硬盘上的文件夹？Subversion 存储库存储在文件夹中......或者，您可以更改配置以拒绝所有人的所有访问权限（该方法将根据授权的配置方式而有所不同）。

            回答 #4

赞同：0

时间：2009-02-25T16:04:00.587

1.）手动删除文件夹（每个存储库都有自己的文件夹）

2.) 或使用[svnadmin](http://svnbook.red-bean.com/en/1.1/re31.html)命令 (svnadmin dump)。

        java - JPA 为 postgres 保留关键字

ID：586592

赞同：1

时间：2009-02-25T15:52:14.720

标签：java, hibernate, jpa, jakarta-ee, jboss

我正在将 JPA 与 postgres DBMS 一起使用，并且我正在尝试创建一个映射到“用户”表的新实体。

这是一个非常常见的问题，因为 User 是 Postgres 中的保留字。我的问题是，我如何“转义”保留关键字或设置 JPA 来转义它？

我试过 @Table(name = "\"user\"") 没有运气：

2009-02-25 15:43:14,218 错误 [org.hibernate.tool.hbm2ddl.SchemaUpdate] 不成功：创建表“用户”_Module（users_login varchar（100）不为空，modules_id int8 不为空）

            回答 #1

赞同：4

时间：2009-02-25T15:55:15.133

采用：

```
@Table(name = "`user`") 
```

它有效......

        php - 我应该如何集成两个 PHP 应用程序 - 通过通用代码、REST、RPC？

ID：586595

赞同：1

时间：2009-02-25T15:52:28.337

标签：php, web-applications

我从事两个相关的 Web 应用程序，它们是用 PHP 开发的，它们是独立启动的。随着时间的推移，出于商业原因，我们已经开始更紧密地集成它们的功能。为此，我们在单独的 SVN 存储库中为通用代码设置了一个目录，以便在单独部署每个应用程序时可以部署此代码的不同版本。任一应用程序存储库中的文本文件指示应部署公共代码的哪个修订版。

到目前为止，如果运行良好，但出现了一些问题和考虑：

*   任何一个应用程序在这个通用接口中使用的所有代码都需要对两个应用程序都是“可见的”。例如，如果应用程序#1 中的一个项目是通过应用程序#2 保存的，那么所有的支持代码、ORM 类、支持类等都需要在公共区域中。

*   如果应用程序#1 正在对应用程序#2 的代码进行方法调用，那么它会绕过应用程序#2 的所有启动代码——身份验证、框架等。这可能会导致不希望的结果和意外的依赖关系。

在这一点上，我们更愿意将应用程序分开。

这两个应用程序相互通信的最佳方式是什么？我们可以使用 http 通信来确保可靠的接口，并且每个应用程序都通过它自己的应用程序进程来处理进程。我们担心 http 会产生开销，但更松散耦合的系统的权衡可能会超过这个问题。

目前，这两个应用程序都在同一组服务器上运行，并且如前所述，几乎完全使用 PHP。

**编辑：**通信将是私有的并在应用程序内进行身份验证，这意味着没有公共 API 的计划。

            回答 #1

赞同：3

时间：2009-02-25T16:42:31.090

这是你正在做的权衡；共享代码库 - 所有人都认为 - 更简单，更有效。至少在短期内。

xml-rpc 或普通的基于 http 的 api 可以很好地工作，并且有利于分离职责，因为您可以获得明确的边界。为了完整起见，SOAP 也是一种选择，但除非被迫，否则我不会选择它。

            回答 #2

赞同：1

时间：2009-02-25T16:26:03.453

在我看来，使用基于 HTTP 的 API。我以前不得不用一组应用程序来处理这个问题，而通用代码最终又回来咬我。如果可以的话，现在将它们解耦。缓存数据的良好实现，使用 pub/sub 而不是持续轮询等应该将开销保持在最低限度。

            回答 #3

赞同：1

时间：2009-02-25T16:34:37.457

这取决于您是否要将您的应用程序与其他一些应用程序集成。如果是，那么我宁愿使用 SOAP 架构，这样您就可以为下一个应用程序提供更好的界面，也许是其他一些编程语言。

        c++ - Win XP x64 上的段错误，在 XP x32 上不会发生 - strncpy 问题？怎么修？

ID：586597

赞同：0

时间：2009-02-25T15:52:56.463

标签：c++, visual-c++, 64-bit, windows-xp, sbml

我对使用 C++ 非常缺乏经验，但我正在尝试在 64 位 XP 平台上为 matlab编译[SBML 工具箱的 2.0.2 版。](http://sbml.org/Software/SBMLToolbox)SBML 工具箱依赖于[Xerces](http://xerces.apache.org/xerces-c/) 2.8 和[libsbml](http://sbml.org/Software/libSBML) 2.3.5。

我已经能够在 32 位机器上构建和编译工具箱，并且在我测试它时它可以工作。但是，在 64 位机器上重建它（这是一个巨大的 PITA！）后，当我尝试用它读取长 .xml 文件时出现分段错误。

我怀疑这个问题是由[指针地址问题](http://www.viva64.com/content/articles/64-bit-development/?f=20_issues_of_porting_C++_code_on_the_64-bit_platform.html&lang=en&content=64-bit-development#IDACBBTD)引起的。

分段错误的堆栈跟踪开始于：

```
[0] 000000003CB3856E libsbml.dll+165230 (StringBuffer_append+000030)
[6] 000000003CB1BFAF libsbml.dll+049071 (EventAssignment_createWith+001631)
[12]000000003CB1C1D7 libsbml.dll+049623（SBML_formulaToString+000039）
[18] 000000003CB2C154 libsbml.dll+115028 (

```

所以我正在查看 libsbml 代码中的 StringBuffer_append 函数：

```
LIBSBML_EXTERN
void
StringBuffer_append (StringBuffer_t *sb, const char *s)
{
  unsigned long len = strlen(s);

  StringBuffer_ensureCapacity(sb, len);

  strncpy(sb->buffer + sb->length, s, len + 1);
  sb->length += len;
} 
```

确保容量看起来像这样：

```
LIBSBML_EXTERN
void
StringBuffer_ensureCapacity (StringBuffer_t *sb, unsigned long n)
{
  unsigned long wanted = sb->length + n;
  unsigned long c;

  if (wanted > sb->capacity)
  {
    /**
     * Double the total new capacity (c) until it is greater-than wanted.
     * Grow StringBuffer by this amount minus the current capacity.
     */
    for (c = 2 * sb->capacity; c < wanted; c *= 2) ;
    StringBuffer_grow(sb, c - sb->capacity);
  }                   
} 
```

和 StringBuffer_grow 看起来像这样：

```
LIBSBML_EXTERN
void
StringBuffer_grow (StringBuffer_t *sb, unsigned long n)
{
  sb->capacity += n;
  sb->buffer    = (char *) safe_realloc(sb->buffer, sb->capacity + 1);
} 
```

有没有可能

```
strncpy(sb->buffer + sb->length, s, len + 1); 
```

在 StringBuffer_append 是我的段错误的来源？

如果是这样，有人可以建议修复吗？我真的不懂 C++，而且对指针和内存寻址特别困惑，所以我可能不知道你在说什么——我需要一些帮助。

此外，我将构建过程的详细信息放在[此处](http://benheavner.com/systemsbio/index.php?title=COBRA_on_Matlab_64)，以防其他人正在尝试使用 Microsoft Visual C++ Express Edition 为 64 位系统编译 C++。

提前致谢！

-本

            回答 #1

赞同：1

时间：2009-02-25T16:22:19.843

尝试打印或使用调试器来查看您为某些中间变量获得的值。在 StringBuffer_append() O/P len 中，在 StringBuffer_ensureCapacity() 中观察循环之前和循环中的 sb->capacity 和 c。看看这些值是否有意义。  

访问超出字符串末尾的数据可能会导致分段错误。  

它在 32 位机器而不是 64 位操作系统上工作的奇怪事实也是一个线索。两台机器的物理和页面文件内存大小是否相同？此外，在 64 位机器中，内核空间可能比 32 位机器大，并且占用了 32 位操作系统的用户部分内存空间中的一些可用内存空间。对于 XML，整个文档必须适合内存。如果这是问题，可能有一些开关可以设置大小。仅当您使用非常大的字符串时，机器的差异才是问题的原因。如果字符串不是很大，则可能是库或实用程序方法在 64 位环境中无法正常工作的问题。

此外，如果您没有其他尝试，请使用简单/小型 xml 文件开始。

你在哪里初始化 sb->length。您的问题可能出在 strncpy() 中，尽管我不知道为什么 32 位 -> 64 位 O/S 更改很重要。最好的办法是查看中间值，然后你的问题就会很明显。

            回答 #2

赞同：1

时间：2011-06-25T16:53:07.097

作为 libsbml 的开发人员之一，我偶然发现了这一点。这对您来说仍然是个问题吗？同时我们发布了 libsbml 5，有 64 位和 32 位的版本，测试也做了很多改进，请看：

[http://sf.net/projects/sbml/files/libsbml](http://sf.net/projects/sbml/files/libsbml)

            回答 #3

赞同：0

时间：2009-02-25T18:06:29.250

StringBuffer 定义如下：

```
/**
 * Creates a new StringBuffer and returns a pointer to it.
 */
LIBSBML_EXTERN
StringBuffer_t *
StringBuffer_create (unsigned long capacity)
{
  StringBuffer_t *sb;

  sb           = (StringBuffer_t *) safe_malloc(sizeof(StringBuffer_t));
  sb->buffer   = (char *)           safe_malloc(capacity + 1);
  sb->capacity = capacity;

  StringBuffer_reset(sb);

  return sb;
} 
```

更多的堆栈跟踪是：

```
[  0] 000000003CB3856E              libsbml.dll+165230 (StringBuffer_append+000030)
[  6] 000000003CB1BFAF              libsbml.dll+049071 (EventAssignment_createWith+001631)
[ 12] 000000003CB1C1D7              libsbml.dll+049623 (SBML_formulaToString+000039)
[ 18] 000000003CB2C154              libsbml.dll+115028 (Rule::setFormulaFromMath+000036)
[ 20] 0000000001751913              libmx.dll+137491 (mxCheckMN_700+000723)
[ 25] 000000003CB1E7B2              libsbml.dll+059314 (KineticLaw_getFormula+000018)
[ 37] 0000000035727749              TranslateSBML.mexw64+030537 (mexFunction+009353) 
```

            回答 #4

赞同：0

时间：2009-02-26T18:25:56.027

为了回应 bk1e 对该问题的评论 - 不幸的是，我需要 2.0.2 版才能与 COBRA 工具箱一起使用，它不适用于较新的版本 3。所以，我现在坚持使用这个旧版本。

我也在尝试调试时遇到了一些问题 - 我正在构建一个 .dll，因此除了重新编译 xerces 以确保它在 MSVC++ 中具有相同的调试设置之外，我还需要附加到 Matlab 进程来进行调试- 对于我在这种环境中的有限经验来说，这是一个相当大的飞跃，而且我还没有深入研究它。

我曾希望缓冲区分配或扩展存在一些明显的语法问题。不过，看起来我还要忍受几天的痛苦。

            回答 #5

赞同：0

时间：2009-02-26T04:26:19.523

让我们假设 safe_malloc 和 safe_realloc 做一些明智的事情，比如当它们无法获得请求的内存时中止程序。这样您的程序就不会继续使用无效指针执行。

现在让我们看看与所需容量相比，StringBuffer_ensureCapacity 将缓冲区增长到多大。这不是一个错误的错误。这是一个二分之一的错误。

你的程序是如何在 x32 中工作的，我猜不出来。

            回答 #6

赞同：0

时间：2009-02-26T03:48:52.733

似乎它是否在任何 StringBuffer_* 函数中，那将在堆栈跟踪中。我不同意 _ensureCapacity 和 _grow 的实现方式。这些函数都不会检查 realloc 是否有效。realloc 失败肯定会导致段错误。我会在 _ensureCapacity 之后插入一个空检查。使用 _ensureCapacity 和 _grow 的方式，似乎可能会出现一个错误。如果您在 Windows 上运行，则 64 位和 32 位系统可能具有不同的页面保护机制，从而导致其失败。（在页面保护较弱的系统上，您经常会遇到 malloc'ed 内存中的一个错误。）

            回答 #7

赞同：0

时间：2009-02-25T16:07:42.467

问题可能几乎是任何事情。诚然，它*可能*是 strncpy 做了坏事，但最有可能的是，它只是传递了一个错误的指针。这可能来自任何地方。段错误（或 Windows 中的访问冲突）仅仅意味着应用程序试图读取或写入它没有访问权限的地址。所以真正的问题是，这个地址是从哪里来的？试图跟随指针的函数可能没问题。但是它从其他地方传递了一个错误的指针。大概。

不幸的是，在最好的情况下，调试 C 代码并非易事。如果代码不是您自己的，那并不容易。:)

            回答 #8

赞同：0

时间：2011-03-10T19:24:03.397

`unsigned long`不是用于 Windows 中 64 位计算机上的大小的安全类型。与 Linux 不同，Windows`long`在 32 位和 64 位架构上都定义为 32 位。因此，如果要附加到的缓冲区的大小超过 4 GB（或者如果您尝试附加长度大于 4GB 的字符串），则需要将`unsigned long`类型声明更改为`size_t`（在 64 位架构上为 64 位，在所有操作系统中）。

但是，如果您只读取 1.5 MB 的文件，我看不出您如何让 StringBuffer 的大小超过 4 GB，所以这可能是一条死胡同。

        c# - 从主窗体中的事件处理程序打开新窗体挂起应用程序

ID：586603

赞同：0

时间：2009-02-25T15:54:28.160

标签：c#, winforms

我正在尝试从 C# 程序的主窗体中的事件处理程序中打开一个新窗体。事件处理程序被正确调用并打开新表单，但新表单被冻结，甚至最初都没有填充。

我可以在主窗体上创建一个按钮，并在单击按钮后创建新窗体，但是从事件处理程序完成时它无法正常工作。

事件处理程序不需要知道在它创建的表单上所做的任何事情的结果——它只需要创建它并让开。

我需要做什么？新表单需要独立于主表单运行。

这是我定义事件处理程序的地方：

```
ibclient.RealTimeBar += new EventHandler<RealTimeBarEventArgs>(ibclient_RealTimeBar); 
```

这是事件处理程序代码：

```
void ibclient_RealTimeBar(object sender, RealTimeBarEventArgs e)
{
    FancyForm a_fancy_form = new FancyForm();
    a_fancy_form.Show();
} 
```

通过单击按钮创建新表单可以正常工作：

```
private void button7_Click(object sender, EventArgs e)
{
    FancyForm a_fancy_form = new FancyForm();
    a_fancy_form.Show();
} 
```

            回答 #1

赞同：2

时间：2009-02-25T15:56:17.893

你可以发布事件处理程序代码吗？..事件是在一个单独的线程中引发的，然后是主用户界面吗？

编辑：

不确定实时栏的作用，但尝试检查表单上的 invokerequired 以便您可以在与主 UI 相同的线程上创建辅助表单。

```
void ibclient_RealTimeBar(object sender, RealTimeBarEventArgs e)
{
    if(this.InvokeRequired)
    {
        this.Invoke(((Action)() => ShowFancyForm()));
    }

    ShowFancyForm();
}

FancyForm a_fancy_form;
private void ShowFancyForm()
{
    if(null != a_fancy_form)return;

    a_fancy_form = new FancyForm();
    a_fancy_form.Show();
} 
```

当然，这使用了一些肮脏的快捷方式并假设为 3.5，但您可以根据需要进行修改。

此外，我将 FancyForm 声明移到了方法范围之外。再次根据您的需要进行调整。

            回答 #2

赞同：2

时间：2009-04-21T01:26:54.883

我遇到了完全相同的问题，我使用了 Quintin 的代码，现在它工作正常......

为了使用框架 2.0，我进行了一些更改，这就是我所做的：首先，我创建了一个委托，指向打开表单的方法：

```
public delegate void pantallazo();
pantallazo obj=new pantallazo(this.ShowFancyForm); 
```

打开表单的方法与 Quintin 提供的方法相同：

```
smatiCliente a_fancy_form;   //smatiCliente  is the name of my new form class...
    private void ShowFancyForm()
    {
        if (null != a_fancy_form) return;
        a_fancy_form = new smatiCliente();
        this.Hide();
        a_fancy_form.Show();
    } 
```

在我的程序的事件处理程序中，y 做了一些简单的更改：

```
 if(this.InvokeRequired)
                    {
                        this.Invoke(obj);
                    }
                    ShowFancyForm(); 
```

就是这样，它现在很好用。Invoke 方法执行适当的委托，因此现在在主 UI 下创建了表单。

希望它有效，非常感谢 Quintin！

            回答 #3

赞同：0

时间：2009-02-25T15:56:51.697

您知道事件处理程序中正在运行哪个线程吗？我相信它可能必须是主要的 GUI 线程才能工作。

        ruby-on-rails - 如何在 Rails 1.2.3 中使复选框默认为“选中”？

ID：586604

赞同：41

时间：2009-02-25T15:55:01.123

标签：ruby-on-rails, ruby

如何使复选框在最初显示时默认为“选中”？

我还没有找到一种“Rails”方法来做到这一点（有效），所以我用 JavaScript 做到了。在 Rails 中是否有正确的方法来做到这一点？我正在使用 Rails 1.2.3。

            回答 #1

赞同：50

时间：2011-12-11T19:54:23.417

**导轨 3.x**

```
= form_for(@user) do |f|
  = f.check_box :subscribe, {checked: true, ...} 
```

这会将检查状态设置为 true，并且应该可以正常工作。注意 ruby​​ 1.9.x 的哈希语法，对于 ruby​​ 1.8.x 使用哈希标签格式 {:checked => true, ...}

            回答 #2

赞同：43

时间：2009-02-25T16:17:32.270

如果您在`check_box`表单的上下文中使用，则复选框将显示该字段具有的任何值。

```
@user = Person.find(:first)
@user.active = true
check_box 'user', 'active'  #=> will be checked by default 
```

如果您使用`check_box_tag`，则第三个参数是初始状态（[`check_box_tag`doc](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-check_box_tag "文档")）：

```
check_box_tag "active", 1, true 
```

            回答 #3

赞同：6

时间：2010-12-01T00:07:41.420

在控制器的新操作中，尝试：

```
@user = User.new(:male => true) 
```

其中 :male 是您要在`/users/new`页面上默认检查的属性。这会将`:male`属性传递给值为 的视图`true`，从而生成一个复选框。

            回答 #4

赞同：6

时间：2016-11-04T23:50:05.567

**简单的**

```
<%= f.check_box :subscribe, checked: "checked" %> 
```

            回答 #5

赞同：5

时间：2016-05-16T00:38:33.617

我很震惊，没有一个答案能 100% 解决问题。

由于所有建议的解决方案都会`checked`在编辑表单上给出结果，即使用户未选中该复选框。

`<%= f.check_box :subscribe, checked: @event.new_record? || f.object.subscribe? %>`

适用于 rails 4 +，未在下面测试。

            回答 #6

赞同：0

时间：2011-04-17T12:48:03.120

**这适用于 Rails 2.3.x 和 Rails 3.0.x！**

在控制器中执行新操作时，复选框设置为 true。

```
# in the controller
def new
  @user = Person.find(:first)
  @user.active = true
end 
```

在表单中：复选框在创建时被选中（通过调用 new），但如果验证失败，则复选框保持设置为用户发布的值。

```
# in the view
<%= form_for ..... |f| %>
  ...
  <%= f.check_box :active %>
  ...
<% end %> 
```

另一种方法，**但不是很好**（如果您想更改必须进行新迁移的逻辑）是在给定模型和属性的迁移中设置*:default => 1*。

```
class CreatePeople < ActiveRecord::Migration
  def self.up
    create_table :people do |t|
      ...
      t.boolean    :active,             :null => false,
                                        :default => 1
      t.timestamps
    end
  end

  def self.down
    drop_table :people
  end
end 
```

            回答 #7

赞同：0

时间：2014-05-23T05:21:37.770

我就是这样做的。

添加值为 0 ABOVE ABOVE 的隐藏字段 check_box_tag

```
<%= hidden_field_tag :subscribe, '0' %>
<%= check_box_tag :subscribe, '1', params[:subscribe] != '0' %> 
```

在服务器上检查`!= '0'`

```
subscribe = params[:subscribe] != '0' 
```

        sql - 查找 T-SQL 以返回这些值

ID：586605

赞同：1

时间：2009-02-25T15:55:08.737

标签：sql, sql-server, tsql, join

我正在尝试编写一个存储过程，它将根据以下规则为每条记录返回两个计算值，但我还没有弄清楚如何构造 SQL 来实现它。我正在使用 SQL Server 2008。

首先，相关表和与问题相关的字段。

生产运行

```
 RunID (key, and RunID is given to the stored proc as its parameter)
 ContainerName
 ProductName
 TemplateID 
```

模板测量

```
 MeasurementTypeID
 TemplateID 
```

简单边界

```
 MeasurementTypeID
 TemplateID
 UpperBound
 LowerBound 
```

容器边界

```
 MeasurementTypeID
 TemplateID
 UpperBound
 LowerBound
 ContainerName 
```

产品边界

```
 MeasurementTypeID
 TemplateID
 UpperBound
 LowerBound
 ProductName 
```

这就是我想要回报的。我想为每个具有匹配 TemplateID 的 TemplateMeasurements 记录与具有提供的 runID 的 ProductionRuns 记录返回计算的上限和下限值。

计算的上限和下限基本上得到了作为简单、容器和产品边界的结果可以获得的最严格的边界，如果它们符合条件的话。

如果存在具有正确 MeasurementTypeID 和 TemplateID 的 SimpleBounds 记录，则该记录将成为特定 MeasurementTypeID 和 TemplateMeasurements 记录的限定边界之一。

要使 ContainerBound 记录符合条件，TemplateID 和 MeasurementTypeID 必须匹配，而且 ContainerName 必须与 ProductionRuns 记录中 ContainerName 的值匹配。对于 ProductBounds 也是如此，但对于 ProductName。

对于特定的MeasurementTypeID，取所有限定范围，并找到最小的Upper Bound，这将是要返回的计算的Upper Bound。找到限定符的最大下限，这将是返回的下限。

但是，我不知道如何组合 SQL 来执行此操作。

此外，如果三个绑定表中没有一个符合特定 MeasurementTypeID 的条件，则可以返回 null。

我的想法是某种左外连接，但我不确定如何将其扩展到三个结果中可能都为 null 的表。

谢谢您的帮助。

            回答 #1

赞同：1

时间：2009-02-25T16:40:51.420

我现在没有时间测试这个，但希望这会让你非常接近：

```
SELECT
     PR.RunID,
     PR.TemplateID,
     CASE
          WHEN MAX(SB.LowerBound) > MAX(CB.LowerBound) AND
                      MAX(SB.LowerBound) > MAX(PB.LowerBound) THEN MAX(SB.LowerBound)
          WHEN MAX(CB.LowerBound) > MAX(PB.LowerBound) THEN MAX(CB.LowerBound)
          ELSE MAX(PB.LowerBound)
     END AS LowerBound,
     CASE
          WHEN MIN(SB.UpperBound) < MIN(CB. UpperBound) AND
                      MIN(SB. UpperBound) < MIN(PB. UpperBound) THEN MIN(SB. UpperBound)
          WHEN MIN(CB. UpperBound) < MIN(PB. UpperBound) THEN MIN(CB. UpperBound)
          ELSE MIN(PB. UpperBound)
     END
FROM
     ProductionRuns PR
INNER JOIN TemplateMeasurements TM ON
      TM.TemplateID = PR.TemplateID
LEFT OUTER JOIN SimpleBounds SB ON
     SB.TemplateID = PR.TemplateID AND
     SB.MeasurementTypeID = TM.MeasurementTypeID
LEFT OUTER JOIN ContainerBounds CB ON
     CB.TemplateID = PR.TemplateID AND
     CB.MeasurementTypeID = TM.MeasurementTypeID AND
     CB.ContainerName = PR.ContainerName
LEFT OUTER JOIN ProductBounds PB ON
     PB.TemplateID = PR.TemplateID AND
     PB.MeasurementTypeID = TM.MeasurementTypeID AND
     PB.ProductName = PR.ProductName
GROUP BY
     PR.RunID,
     PR.TemplateID 
```

            回答 #2

赞同：1

时间：2009-02-25T16:53:43.200

不要从 Tom H. 的回答中拿走，但您也可以考虑使用联合而不是连接来解决这个问题，以帮助拆分不同的上/下规则。这取决于您认为查询将来需要如何更改（如果有的话）。

查询最终看起来更干净，尤其是在没有所有 CASE 规则的情况下，但在 TemplateMeasurement 行不存在的情况下它可能没有那么有用。

```
SELECT RunID, TemplateID, MIN(UpperBound), MAX(LowerBound)
FROM

  (SELECT PR.RunID, SB.TemplateID, SB.UpperBound, SB.LowerBound
  FROM SimpleBounds SB
  INNER JOIN TemplateMeasurements TM
      ON  SB.TemplateID = TM.TemplateID
      AND SB.MeasurementTypeID = TM.MeasurementTypeID
  INNER JOIN ProductionRuns PR
      ON  TM.TemplateID = PR.TemplateID)

UNION

  (SELECT PR.RunID, CB.TemplateID, CB.UpperBound, CB.LowerBound
  FROM ContainerBounds CB
  INNER JOIN TemplateMeasurements TM
      ON  CB.TemplateID = TM.TemplateID
      AND CB.MeasurementTypeID = TM.MeasurementTypeID
  INNER JOIN ProductionRuns PR
      ON  TM.TemplateID = PR.TemplateID
      AND CB.ContainerName = PR.ContainerName)

UNION

  (SELECT PR.RunID, PB.TemplateID, PB.UpperBound, PB.LowerBound
  FROM ProductBounds PB
  INNER JOIN TemplateMeasurements TM
      ON  PB.TemplateID = TM.TemplateID
      AND PB.MeasurementTypeID = TM.MeasurementTypeID
  INNER JOIN ProductionRuns PR
      ON  TM.TemplateID = PR.TemplateID
      AND PB.ProductName = PR.ProductName)

GROUP BY RunID, TemplateID 
```

            回答 #3

赞同：1

时间：2009-02-25T17:15:03.147

您已经得到了其他应该有效的答案，但在我看来，这种类型的 UNIONed 内部查询可以导致将水平层次结构折叠成垂直层次结构的最简洁、最可维护的方式，这基本上是您的问题：

```
SELECT MIN(iq.upperbound), MAX(iq.lowerbound)
FROM TemplateMeasurements tm
    INNER JOIN ProductionRuns pr ON tm.TemplateID = pr.TemplateID
    LEFT JOIN
    (
    SELECT sb.UpperBound, sb.LowerBound, sb.MeasurementTypeID, '' as Name, 'sb' as Type, sb.TemplateID
    FROM SimpleBounds sb 
    UNION ALL
    SELECT cb.UpperBound, cb.LowerBound, cb.MeasurementTypeID, cb.ContainerName as Name, 'cb' as Type, cb.TemplateID
    FROM ContainerBounds cb 
    UNION ALL
    SELECT pb.UpperBound, pb.LowerBound, pb.MeasurementTypeID, pb.ProductName as Name, 'pb' as Type, pb.TemplateID
    FROM ProductBounds pb 
    ) iq ON iq.MeasurementTypeID = tm.MeasurementTypeID 
        AND iq.TemplateID = tm.TemplateID 
        AND iq.Name = 
            CASE iq.Type 
             WHEN 'sb' THEN iq.Name 
             WHEN 'cb' THEN pr.ContainerName 
             WHEN 'pb' THEN pr.ProductName 
            END
    WHERE pr.RunID = @runid
    GROUP BY tm.TemplateID, tm.MeasurementTypeID 
```

            回答 #4

赞同：0

时间：2009-02-26T15:26:58.843

感谢您带领我朝着正确的方向前进。在我把它调整得恰到好处之前，我不得不摆弄这个问题一段时间，但现在它工作得很好。

我的最终代码和结果：

```
 ALTER PROCEDURE [dbo].[GetBounds]
 @runID int
 AS
 BEGIN
    SET NOCOUNT ON;
    DECLARE @templateID int
    SET @templateID = (SELECT TOP(1) TemplateID 
    FROM ProductionRuns WHERE RunID = @runID);

    SELECT TM.MeasurementTypeID,

    CASE 
    WHEN MIN(SB.UpperBound) < MIN(PB.UpperBound) 
    AND MIN(SB.UpperBound) < MIN(CB.UpperBound) THEN MIN(SB.UpperBound)
    WHEN MIN(PB.UpperBound) < MIN(SB.UpperBound) 
    AND MIN(PB.UpperBound) < MIN(CB.UpperBound) THEN MIN(PB.UpperBound)
    WHEN MIN(CB.UpperBound) < MIN(SB.UpperBound) 
    AND MIN(CB.UpperBound) < MIN(PB.UpperBound) THEN MIN(CB.UpperBound)
    ELSE MIN(SB.UpperBound) 
    END AS 'UpperBound',

    CASE
    WHEN MAX(SB.LowerBound) > MAX(PB.LowerBound) 
    AND MAX(SB.LowerBound) > MAX(CB.LowerBound) THEN MAX(SB.LowerBound)
    WHEN MAX(PB.LowerBound) > MAX(SB.LowerBound) 
    AND MAX(PB.LowerBound) > MAX(CB.LowerBound) THEN MAX(PB.LowerBound)
    WHEN MAX(CB.LowerBound) > MAX(SB.LowerBound) 
    AND MAX(CB.LowerBound) > MAX(PB.LowerBound) THEN MAX(CB.LowerBound)
    ELSE MAX(SB.LowerBound)
    END AS 'LowerBound'

    FROM
    ProductionRuns PR
    INNER JOIN TemplateMeasurements TM ON
    TM.TemplateID = PR.TemplateID
    LEFT OUTER JOIN SimpleBounds SB ON
    SB.TemplateID = PR.TemplateID AND
    SB.MeasurementTypeID = TM.MeasurementTypeID
    LEFT OUTER JOIN ContainerBounds CB ON
    CB.TemplateID = PR.TemplateID AND
    CB.MeasurementTypeID = TM.MeasurementTypeID AND
    CB.ContainerName = PR.ContainerName
    LEFT OUTER JOIN ProductBounds PB ON
    PB.TemplateID = PR.TemplateID AND
    PB.MeasurementTypeID = TM.MeasurementTypeID AND
    PB.ProductName = PR.ProductName 

    WHERE TM.TemplateID = @templateID

    GROUP BY
    TM.MeasurementTypeID
 END 
```

特定案例的部分结果，RunID = 3249 (TemplateID = 2)

```
MeasurementTypeID   UpperBound  LowerBound
2   NULL    NULL
11  4   2.5
18  30  1
20  40  10
33  99  0
36  200 140
42  120 32
... 
```

        c++ - 使用 SSE 指令

ID：586609

赞同：29

时间：2009-02-25T15:55:23.433

标签：c++, optimization, assembly, processor, sse

我有一个用 C++ 编写的循环，它为一个大整数数组的每个元素执行。在循环内部，我屏蔽了整数的一些位，然后找到最小值和最大值。我听说如果我对这些操作使用 SSE 指令，与使用按位 AND 和 if-else 条件编写的正常循环相比，它将运行得更快。我的问题是我应该去找这些 SSE 说明吗？另外，如果我的代码在不同的处理器上运行会发生什么？它还能工作还是这些指令是特定于处理器的？

            回答 #1

赞同：25

时间：2009-02-25T16:09:32.587

1.  SSE 指令是特定于处理器的。您可以在 wikipedia 上查找哪个处理器支持哪个 SSE 版本。
2.  SSE 代码是否会更快取决于许多因素：首先当然是问题是内存限制还是 CPU 限制。如果内存总线是瓶颈，SSE 将无济于事。尝试简化您的整数计算，如果这使代码更快，它可能受 CPU 限制，并且您很有可能加快它的速度。
3.  请注意，编写 SIMD 代码比编​​写 C++ 代码困难得多，并且生成的代码更难更改。始终保持 C++ 代码是最新的，您会希望它作为注释并检查您的汇编代码的正确性。
4.  考虑使用像 IPP 这样的库，它实现了针对各种处理器优化的常见低级 SIMD 操作。

            回答 #2

赞同：16

时间：2009-02-25T16:24:23.673

SIMD（其中 SSE 就是一个例子）允许您对多个数据块执行相同的操作。因此，使用 SSE 作为整数运算的直接替代品不会有任何优势，只有当您可以同时对多个数据项进行运算时，您才会获得优势。这涉及加载一些在内存中连续的数据值，进行所需的处理，然后单步执行数组中的下一组值。

问题：

1 如果代码路径依赖于正在处理的数据，SIMD 将变得更加难以实现。例如：

```
a = array [index];
a &= mask;
a >>= shift;
if (a < somevalue)
{
  a += 2;
  array [index] = a;
}
++index; 
```

不像 SIMD 那样容易做到：

```
a1 = array [index] a2 = array [index+1] a3 = array [index+2] a4 = array [index+3]
a1 &= mask         a2 &= mask           a3 &= mask           a4 &= mask
a1 >>= shift       a2 >>= shift         a3 >>= shift         a4 >>= shift
if (a1<somevalue)  if (a2<somevalue)    if (a3<somevalue)    if (a4<somevalue)
  // help! can't conditionally perform this on each column, all columns must do the same thing
index += 4 
```

2 如果数据不是连续的，那么将数据加载到 SIMD 指令中很麻烦

3 代码是特定于处理器的。SSE 仅在 IA32 (Intel/AMD) 上，并非所有 IA32 cpu 都支持 SSE。

您需要分析算法和数据以查看它是否可以进行 SSE，这需要了解 SSE 的工作原理。英特尔网站上有大量文档。

            回答 #3

赞同：11

时间：2009-02-26T16:19:09.153

这类问题是一个很好的低级分析器必不可少的完美示例。（类似于 VTune）它可以让您更清楚地了解热点所在的位置。

我的猜测是，根据您的描述，您的热点可能是由于使用 if/else 进行最小/最大计算而导致的分支预测失败。因此，使用 SIMD 内在函数应该允许您使用 min/max 指令，但是，可能值得尝试使用无分支的 min/max 计算来代替。这可能会以更少的痛苦实现大部分收益。

像这样的东西：

```
inline int 
minimum(int a, int b)
{
  int mask = (a - b) >> 31;
  return ((a & mask) | (b & ~mask));
} 
```

            回答 #4

赞同：6

时间：2009-02-25T16:15:15.333

如果您使用 SSE 指令，您显然受限于支持这些指令的处理器。这意味着 x86，可以追溯到 Pentium 2 左右（不记得它们是什么时候引入的，但那是很久以前的事了）

SSE2，据我所知，它是提供整数运算的，是最近的（Pentium 3？虽然第一代 AMD Athlon 处理器不支持它们）

在任何情况下，您都有两种使用这些说明的选项。要么在汇编中编写整个代码块（可能是个坏主意。这使得编译器几乎不可能优化你的代码，而且人类很难编写高效的汇编器）。

或者，使用编译器提供的内在函数（如果有记忆，它们通常在 xmmintrin.h 中定义）

但同样，性能可能不会提高。SSE 代码对其处理的数据提出了额外的要求。主要要记住的是，数据必须在 128 位边界上对齐。加载到同一个寄存器中的值之间也应该很少或没有依赖关系（一个 128 位 SSE 寄存器可以保存 4 个整数。将第一个和第二个加在一起不是最佳的。但是将所有四个整数添加到相应的 4 个整数另一个寄存器会很快）

使用包含所有低级 SSE 摆弄的库可能很诱人，但这也可能会破坏任何潜在的性能优势。

我不知道 SSE 的整数运算支持有多好，所以这也可能是限制性能的一个因素。SSE 主要针对加速浮点运算。

            回答 #5

赞同：4

时间：2009-02-25T16:19:03.000

如果您打算使用 Microsoft Visual C++，您应该阅读以下内容：

[http://www.codeproject.com/KB/recipes/sseintro.aspx](http://www.codeproject.com/KB/recipes/sseintro.aspx)

            回答 #6

赞同：3

时间：2009-02-25T16:16:19.047

我们已经实现了一些图像处理代码，类似于您所描述的，但在 SSE 中的字节数组上。与 C 代码相比，加速是相当可观的，这取决于确切的算法，超过 4 倍，即使对于英特尔编译器也是如此。但是，正如您已经提到的，您有以下缺点：

*   可移植性。该代码将在每个类似 Intel 的 CPU 上运行，AMD 也是如此，但不能在其他 CPU 上运行。这对我们来说不是问题，因为我们控制目标硬件。切换编译器甚至切换到 64 位操作系统也可能是个问题。

*   你的学习曲线很陡峭，但我发现在你掌握了原理之后，编写新算法并没有那么难。

*   可维护性。大多数 C 或 C++ 程序员不了解汇编/SSE。

我对您的建议是，只有在您确实需要性能改进，并且在英特尔 IPP 之类的库中找不到解决您的问题的函数，并且您可以忍受可移植性问题时，才去尝试它。

            回答 #7

赞同：3

时间：2010-07-10T22:11:28.070

从我的经验中我可以看出，SSE 比纯 c 版本的代码（不使用内联汇编，不使用内在函数）带来了巨大的（4 倍或更高）加速，但如果编译器可以，手动优化的汇编器可以击败编译器生成的汇编。 t 弄清楚程序员的意图（相信我，编译器不会涵盖所有可能的代码组合，而且他们永远不会）。哦，编译器不能每次都以最快的速度对其运行的数据进行布局。但是你需要很多经验来加速英特尔编译器（如果可能的话）。

            回答 #8

赞同：2

时间：2009-02-25T16:12:09.197

SSE 指令最初只在 Intel 芯片上，但最近（因为 Athlon？）AMD 也支持它们，所以如果你针对 SSE 指令集编写代码，你应该可以移植到大多数 x86 procs。

话虽如此，除非您已经熟悉 x86 上的汇编器，否则可能不值得您花时间学习 SSE 编码 - 一个更简单的选择可能是检查您的编译器文档并查看是否有允许编译器自动生成 SSE 代码的选项为你。一些编译器以这种方式很好地向量化循环。（听到 Intel 编译器在这方面做得很好，您可能并不感到惊讶 :)

            回答 #9

赞同：2

时间：2009-02-27T08:44:16.027

编写代码，帮助编译器理解你在做什么。GCC 将理解和优化 SSE 代码，例如：

```
typedef union Vector4f
{
        // Easy constructor, defaulted to black/0 vector
    Vector4f(float a = 0, float b = 0, float c = 0, float d = 1.0f):
        X(a), Y(b), Z(c), W(d) { }

        // Cast operator, for []
    inline operator float* ()
    { 
        return (float*)this;
    }

        // Const ast operator, for const []
    inline operator const float* () const
    { 
        return (const float*)this;
    }

    // ---------------------------------------- //

    inline Vector4f operator += (const Vector4f &v)
    {
        for(int i=0; i<4; ++i)
            (*this)[i] += v[i];

        return *this;
    }

    inline Vector4f operator += (float t)
    {
        for(int i=0; i<4; ++i)
            (*this)[i] += t;

        return *this;
    }

        // Vertex / Vector 
        // Lower case xyzw components
    struct {
        float x, y, z;
        float w;
    };

        // Upper case XYZW components
    struct {
        float X, Y, Z;
        float W;
    };
}; 
```

只是不要忘记在您的构建参数上有 -msse -msse2 ！

            回答 #10

赞同：1

时间：2009-02-25T16:31:16.980

尽管 SSE 确实是特定于某些处理器的（SSE 可能相对安全，SSE2 在我的经验中要少得多），但您可以在运行时检测 CPU，并根据目标 CPU 动态加载代码。

            回答 #11

赞同：1

时间：2009-02-26T08:43:04.367

SIMD 内在函数（例如 SSE2）可以加快这类事情的速度，但需要专业知识才能正确使用。它们对对齐和流水线延迟非常敏感；粗心的使用会使性能比没有它们时更差。通过简单地使用缓存预取来确保您的所有 int 都及时处于 L1 中，以便您对它们进行操作，您将获得更容易和更直接的加速。

除非您的函数需要每秒超过 100,000,000 个整数的吞吐量，否则 SIMD 对您来说可能不值得麻烦。

            回答 #12

赞同：1

时间：2009-02-26T11:49:12.610

只是简单地补充一下之前所说的关于不同 CPU 上可用的不同 SSE 版本的内容：这可以通过查看 CPUID 指令返回的相应功能标志来检查（有关详细信息，请参见例如 Intel 的文档）。

            回答 #13

赞同：1

时间：2009-02-26T12:01:51.643

看看C/C++的*内联汇编器，这里有一篇*[DDJ 文章](http://www.ddj.com/cpp/184401967)。除非您 100% 确定您的程序将在兼容的平台上运行，否则您应该遵循许多人在此处给出的建议。

            回答 #14

赞同：1

时间：2011-11-29T20:07:09.597

我同意以前的海报。好处可能很大，但要获得它可能需要大量工作。有关这些说明的英特尔文档超过 4K 页。您可能想查看来自 Ocali Inc. 的免费 EasySSE（内部函数 + 示例的 c++ 包装器库）。

我认为我与这个 EasySSE 的关系很明确。

            回答 #15

赞同：0

时间：2009-02-25T18:01:38.027

我不建议您自己这样做，除非您非常精通组装。[正如Skizz](https://stackoverflow.com/questions/586609/using-sse-instructions/586730#586730)所指出的，使用 SSE 很可能需要对数据进行仔细的重组，而其好处往往充其量是值得怀疑的。

编写非常小的循环并保持数据非常紧密地组织并且只依赖编译器为您执行此操作可能会更好。英特尔 C 编译器和 GCC（从 4.1 开始）都可以自动矢量化您的代码，并且可能会比您做得更好。（只需将 -ftree-vectorize 添加到您的 CXXFLAGS 中。）

**编辑**：我应该提到的另一件事是，一些编译器支持*程序集内在函数*，IMO 可能比 asm() 或 __asm{} 语法更容易使用。

        asp.net - 动态添加文本框

ID：586616

赞同：0

时间：2009-02-25T15:57:47.857

标签：asp.net, javascript

在我的 aspx 页面中，当用户单击位置“LinkBut​​ton”时，应在页面中动态添加一个新文本框。用户最多可以添加 10 个文本框。此外，用户可以从这个页面 A 导航到另一个页面 B。当他回到页面 A 时，他的所有文本框都应该被保留。如何实现此功能？

谢谢。

            回答 #1

赞同：2

时间：2009-02-25T16:35:36.423

我会创建一个带有占位符对象的用户控件，然后编写如下内容：

```
if(NumberOfTextBoxes <= 10)
{
    TextBox tb = new TextBox();
    Placeholder1.Controls.Add(tb);
    NumberOfTextBoxes++;
} 
```

作为参考，我建议：

*   [如何：以编程方式将控件添加到 ASP.NET 网页](http://msdn.microsoft.com/en-us/library/kyt0fzt1(VS.80).aspx)
*   [PlaceHolder 类](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.placeholder.aspx)（备注部分有很多类似上面的 HowTo）

            回答 #2

赞同：0

时间：2009-02-25T16:00:50.470

您需要在用户会话中保留有关要显示多少个文本框（可能还有它们的内容）的信息。在页面的 Init (?) 处理程序中，您每次都需要添加文本框。

        javascript - javascript 2.0

ID：586625

赞同：2

时间：2009-02-25T16:00:21.720

标签：javascript

我花了很多时间来学习如何在 Javascript 中实现 OOP，就像 1999 年的 ECMA 262 一样：现在我想知道是否有人认为新的 JS 2.0 很快就会到来，而我正在无用地学习，因为有了这个新版本将以经典方式（Java 等）实现的 OOP 将成为接口、泛型和其他经典语言的特性......

所以我必须停下来等待...........?????

谢谢

            回答 #1

赞同：3

时间：2009-02-25T16:12:50.160

Javascript 是一种动态类型的脚本语言，它使用基于原型的继承。  

正是这些属性将其与 Java、C# 区分开来，并使其特别适用于 Web 开发。为什么有人想要或需要把它变成另一个 Java 或 C#，他们已经很好地完成了这项工作。

所以不，现在学习 Javascript 是非常值得的。更深入地学习 Javascript 实际上帮助我更好地理解了一般的动态语言（来自 C#、C++），甚至还有一些[功能方面](https://stackoverflow.com/questions/145053/javascript-as-a-functional-language)需要掌握。

            回答 #2

赞同：2

时间：2009-02-25T16:04:19.697

JavaScript 2 已经死了。将会有 ECMAScript 3.1，它主要包含说明、安全增强和库更新，以及 ECMAScript Harmony，它是 ECMAScript 4（又名 JavaScript 2）的替代品。不过，为 ES4 计划的许多事情不再在 Harmony 的讨论中。

            回答 #3

赞同：2

时间：2009-02-25T17:05:48.007

我强烈建议您按原样学习 JavaScript。无论发生什么变化，您迟早仍会被迫处理历史用法，如果您是 Web 开发人员，可能经常会遇到这种情况。我还推荐 Crockford 的[JavaScript: The Good Parts](https://rads.stackoverflow.com/amzn/click/com/0596517742)，因为它涵盖了所有的继承模式，并去掉了你不应该使用的坏东西。

            回答 #4

赞同：1

时间：2009-02-25T16:03:37.483

我认为当前 Javascript 版本中有足够的现有代码，即使今天发布了一些新的 JS 版本，仍然值得学习当前版本的工作原理。

            回答 #5

赞同：1

时间：2009-02-25T16:22:00.920

您仍然应该了解 OOP 在当前版本的 JavaScript (ECMAScript) 中是如何工作的。ECMAScript 3.1 引入了一大堆静态对象函数，包括继承。

实际上，您已经可以在当前的 JavaScript 中实现 Object.create() 函数（Douglas Crockford 的代码）：

```
if (typeof Object.create !== 'function') {
    Object.create = function (o) {
        function F() {}
        F.prototype = o;
        return new F();
    };
}

// you can now do this
newObject = Object.create(oldObject); 
```

不过请注意，您不需要一直使用 OOP。如果 OOP 有意义，则使用它，否则不要使用。

            回答 #6

赞同：1

时间：2009-02-25T17:07:54.943

就像 Christoph 说的，JS2.0 已经死了。就像 Herms 所说，那里有足够多的代码，绝对值得学习当前版本。JavaScript 是一种非常容易学习、快速学习任何语言的 OOP 基础知识的方法。你学习不是无用的，我为你的学习鼓掌！我会建议你继续前进。

            回答 #7

赞同：0

时间：2009-02-25T16:05:40.630

由于重量级人物都以类似的方式进行 OOP（Java、.Net、Python），我猜想所做的任何事情都会遵循这些类似的方法。由于使用这些语言做了很多工作，因此需要进行大量培训来巩固集体意识中的这些过程，在这一点上似乎没有太多需要改变的事情。

        c# - urlrewriting.net 不接受阿拉伯语查询字符串

ID：586626

赞同：2

时间：2009-02-25T16:00:26.807

标签：c#, asp.net, arabic

我快疯了，我已经尝试了一切，urlencode，html 编码，但是 urlrewriting.net 正在将阿拉伯语查询字符串读取为?? 人物

非常感谢帮助

            回答 #1

赞同：3

时间：2009-02-27T09:42:20.550

如果您安装了 .NET 3.5 SP1，我建议您切换到`System.Web.Routing`UrlRewriting.net 库而不是。我最近从 UrlRewriting.net 切换到`System.Web.Routing`我自己，并且路由经过深思熟虑并且与 ASP.NET 管道更好地集成。

如果你有机会转行，我会推荐它。如果没有，请发布您的 UrlRewriting.net 配置文件，以便我们可以调整显然不起作用的正则表达式。请发布一些也不起作用的 URI 示例。

此外，该部分中定义的值是什么`web.config`：

```
<system.web>
  <globalization requestEncoding="utf-8"
                 responseEncoding="utf-8"
                 fileEncoding="utf-8" />
</system.web> 
```

像上面的例子一样，使用 UTF-8。还要确保在 URI 中将字符编码为 UTF-8。

            回答 #2

赞同：1

时间：2009-06-11T14:29:48.063

当您在“经典模式”下运行 IIS 7 应用程序时会发生什么（可能需要安装才能成为可用选项）？

            回答 #3

赞同：1

时间：2009-06-13T06:31:33.950

经过长时间乏味的试验，我建议任何在集成模式下使用 IIS 7 重写 URL 的人，不要再浪费时间了，要么使用 MVC 路由，要么忘记 URL 中的阿拉伯字符串

            回答 #4

赞同：1

时间：2009-06-29T17:26:09.813

试试这个，它更快..而且没有问题。

"~/News/2008/10/10/newsid/تجربة.aspx" 其中newsid是您文章的ID。

从数据库中获取你的标题：'select * from news where id =' & newsid 比：“select * from news where title='”& title &“'”快得多

            回答 #5

赞同：0

时间：2009-03-05T01:09:41.980

看来我已经通过确保两个页面（包含链接的页面和解析查询字符串的页面都具有 UTF-8 编码）来解决问题

但现在我遇到了另一个问题 Firefox 正在正确显示超链接和地址栏中的链接，但在 IE6 和 Ie 7 中是这样的

```
mysite/News/2008/10/10/%D8%AA%D8%AC%D8%B1%D8%A8%D8%A9.aspx 
```

即使 IE 6 和 7 可以很好地解析链接，但这很难看，请问有什么解决方案？

            回答 #6

赞同：0

时间：2009-03-15T19:59:55.377

**更新**：你不会相信的，我发现问题很奇怪，它是 IIS 7 集成模式，尝试从 Visual Studio 开发服务器启动你的页面，Unicode 字符将被解析得很好，但如果你启动来自 IIS 7 的页面它会给你 ???? 人物。

希望一些身体会在这里遮住一些光

        xml - 使用 XSL 提取 XML 文件的子集

ID：586631

赞同：11

时间：2009-02-25T16:01:18.503

标签：xml, xslt

我有这个 XML 文件：

```
<Response>
    <errorCode>error Code</errorCode>
    <errorMessage>msg</errorMessage>
    <ResponseParameters>
        <className>
            <attribute1>a</attribute1>
            <attribute2>b</attribute2>
        </className>
    </ResponseParameters>
</Response> 
```

我希望输出是：

```
<className>
    <attribute1>a</attribute1>
    <attribute2>b</attribute2>
</className> 
```

我当前的 XSL 文件还包括我不想要的“ResponseParameters”标签。

**编辑：注意节点类名是动态的。我不知道在运行时这个名字是什么。**

```
<?xml version="1.0"?>

<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">

    <xsl:output indent="yes" />

    <xsl:template match="/">
        <xsl:copy-of select="//ResponseParameters">
        </xsl:copy-of>
    </xsl:template>
</xsl:stylesheet> 
```

            回答 #1

赞同：16

时间：2009-02-27T15:33:16.887

**使用**：

```
<xsl:copy-of select="/Response/ResponseParameters/node()"/> 
```

**`"//"`缩写非常昂贵**（导致要扫描完整的 XML 文档），**应该****避免使用**。

            回答 #2

赞同：2

时间：2009-02-25T16:13:37.257

```
<xsl:copy-of select="Response/ResponseParameters//*"/> 
```

            回答 #3

赞同：1

时间：2009-02-25T16:13:25.527

一种方法是将包含节点名称的参数传递给 XSLT，并使用通过 name() 函数传入的参数来匹配动态节点。

编辑：

但是在这种简单的情况下，建议 ResponseParameters//* 或 ResponseParameters/* 的其他答案中的任何一个都是更简单的解决方案。

        php - jQuery：自动刷新一个`
`

ID：586633

赞同：1

时间：2009-02-25T16:02:08.097

标签：php, jquery, codeigniter

我无法`<div>`使用 jQuery 自动更新它。它本质上是一个聊天功能，每两秒刷新一次页面。我已经尝试了几种变体，但都没有运气，所以完全改写它是非常受欢迎的。

**jQuery代码**：

```
function updateChat() {
    $.get("chat_data.php", function(data) {
        $("div#chattable").html(data);
    });

    window.setTimeout("updateChat();", 2000);
}

$(document).ready(function() {
    updateChat();
}); 
```

这是`<div>`代码，它从`chat_data.php`. 这应该是更新：

```
<div id="chattable">
    <?php include("js/chat_data.php"); ?>
</div> 
```

**聊天数据.php**：

```
<?php foreach($query->result() as $row):
    echo "<div class='chatrow'>";
    echo "<div class='chattime'>".date("[M.d] g:ia",strtotime($row->time))."</div>";
    echo "<div class='chatnamematch'>[".$row->name."]</div>";
    echo "<div class='chatbody'>".$row->body."</div>";
    echo "</div>";
endforeach; ?> 
```

            回答 #1

赞同：2

时间：2009-02-25T16:11:32.893

一切看起来都应该有效。$.get 中的 URL 是否需要是“js/chat_data.php”而不是“chat_data.php”？

此外，我会将 php 包含在 div 之外，因为无论如何它都会通过 AJAX 加载。

            回答 #2

赞同：2

时间：2009-02-25T16:20:32.500

您得到的错误`Call to a member function result() on a non-object in /var/www/js/chat_data.php on line 1`意味着变量`$query`设置不正确。您说您使用的是 CodeIgniter，是这样，该文件`ajax_data.php`位于哪个文件夹中？应用程序/控制器？

            回答 #3

赞同：1

时间：2009-02-25T16:20:14.793

一些想法和一个替代代码示例。很难说你的问题出在哪里，所以这些只是一些想法。

*   您可以将等待移至您的 PHP，而不是使用 javascript 计时器重新执行

*   尝试使用更简单的 jQuery.load() 方法。

    ```
    function updateChat() {

     $("#chattable").load("chat_data.php", function() { updateChat(); });

    } 
    ```

在 PHP 方面，

```
 sleep(2); // sleep for two seconds before returning output 
```

效果类似，但简化了一点。在返回输出之前不会调用 updateChat() 函数。

嗯，只是一个想法。不确定它是否是正确的解决方案，但它可以帮助您隔离问题（取出 js 计时器变量）。

        c++ - 缩小向量

ID：586634

赞同：7

时间：2009-02-25T16:02:44.303

标签：c++, stl, vector

我的地形引擎有问题（使用 DirectX）。

我正在使用向量来保存细节块的顶点。当块的细节增加时，向量也会增加。

但是，当块减少其细节时，向量的大小不会缩小。

所以，我的问题是：有没有办法缩小向量的大小？我确实试过这个：

```
vertexvector.reserve(16); 
```

            回答 #1

赞同：27

时间：2009-02-25T16:12:52.143

如果从向量中弹出元素，它不会释放内存（因为这会使迭代器无效到容器元素中）。您可以将矢量复制到新矢量，然后将其与原始矢量交换。这样就不会浪费空间。交换具有恒定的时间复杂度，因为交换不能使交换向量元素的迭代器无效：因此它必须只交换内部缓冲区指针。

```
vector<vertex>(a).swap(a); 
```

它被称为“Shrink-to-fit”成语。顺便说一句，下一个 C++ 版本包括一个用于 std::vector 的“shrink_to_fit()”成员函数。

            回答 #2

赞同：8

时间：2009-02-25T16:11:30.570

通常的技巧是用一个空向量交换：

```
vector<vertex>(vertexvector.begin(), vertexvector.end()).swap(vertexvector); 
```

            回答 #3

赞同：6

时间：2009-02-25T16:16:40.667

减少向量大小时保留的内存不会减少，因为它通常对性能更好。缩小向量保留的内存量与将向量的大小增加到超过保留大小一样昂贵，因为它需要：

1.  向分配器请求一个新的、更小的内存位置，
2.  从旧位置复制内容，然后
3.  告诉分配器释放旧的内存位置。

在某些情况下，分配器可以就地调整分配的大小，但这绝不是保证。

如果您对所需的大小进行了非常大的更改，并且您*知道*您不希望该向量再次扩展（局部性原则建议您这样做，但当然也有例外），那么您可以使用 litb 的建议交换操作以显式缩小向量：

```
vector<vertex>(a).swap(a); 
```

            回答 #4

赞同：1

时间：2014-10-23T20:20:49.103

有一个成员函数，shrink_to_fit。它比大多数其他方法更有效，因为它只会在需要时分配新内存和复制。此处讨论了详细信息，
 [shrink_to_fit 是否是将 `std::vector` 的容量减小到其大小的正确方法？](https://stackoverflow.com/questions/23502291/is-shrink-to-fit-the-proper-way-of-reducing-the-capacity-a-stdvector-to-its) 

如果你不介意 libc 分配函数 realloc 效率更高，它不会在收缩时复制数据，只需将多余的内存标记为空闲，如果你增加内存并且在它标记需要后有空闲内存使用的内存，也不复制。不过要小心，您正在从 C++ stl 模板迁移到 C void 指针，并且需要了解指针和内存管理的工作原理，现在许多人不赞成它作为错误和内存泄漏的来源。

        tsql - TSQL 如何在用户定义的函数中输出 PRINT？

ID：586642

赞同：76

时间：2009-02-25T16:04:00.433

标签：tsql, user-defined-functions

基本上我想`PRINT`在用户定义的函数中使用语句来帮助我的调试。

但是我收到以下错误；

在函数内的“打印”中无效使用副作用或时间相关的运算符。

这不能做吗？

无论如何帮助我的用户定义函数调试？

            回答 #1

赞同：55

时间：2013-02-07T14:06:44.907

提示：产生错误。

```
declare @Day int, @Config_Node varchar(50)

    set @Config_Node = 'value to trace'

    set @Day = @Config_Node 
```

您将收到此消息：

*将 varchar 值“要跟踪的值”转换为数据类型 int 时转换失败。*

            回答 #2

赞同：40

时间：2009-02-25T16:07:29.270

不，对不起。SQL Server 中的用户定义函数非常有限，因为它们需要确定性。据我所知，没有办法绕过它。

您是否尝试过使用 Visual Studio 调试 SQL 代码？

            回答 #3

赞同：31

时间：2009-10-03T19:42:11.470

我通过暂时将我的函数重写为这样的东西来解决这个问题：

```
IF OBJECT_ID ('[dbo].[fx_dosomething]', 'TF') IS NOT NULL
  drop function [dbo].[fx_dosomething];
GO

create FUNCTION dbo.fx_dosomething ( @x numeric )
returns @t table (debug varchar(100), x2 numeric)
as
begin
 declare @debug varchar(100)
 set @debug = 'printme';

 declare @x2 numeric
 set @x2 = 0.123456;

 insert into @t values (@debug, @x2)
 return 
end
go

select * from fx_dosomething(0.1) 
```

            回答 #4

赞同：27

时间：2009-02-25T16:09:50.510

过去，我倾向于分两个阶段处理我的功能。第一阶段是将它们视为相当正常的 SQL 查询，并确保我从中得到正确的结果。在我确信它按预期执行后，我会将其转换为 UDF。

            回答 #5

赞同：12

时间：2014-10-07T14:38:18.117

使用扩展过程 xp_cmdshell 运行 shell 命令。我用它将输出打印到文件：

```
exec xp_cmdshell 'echo "mytextoutput" >> c:\debuginfo.txt' 
```

如果文件 debuginfo.txt 不存在，这将创建它。然后它将文本“mytextoutput”（不带引号）添加到文件中。对该函数的任何调用都将写入额外的一行。

您可能需要先启用此 db-server 属性（默认 = 禁用），但我意识到这可能不符合生产环境中 dba 的喜好。

            回答 #6

赞同：4

时间：2009-02-25T16:08:08.783

你不能。

`function`您可以从 a调用 a`stored procedure`并调试 a `stored procedure`（这将进入`function`）

            回答 #7

赞同：0

时间：2012-11-09T11:23:47.170

您可以尝试返回要检查的变量。例如我有这个功能：

```
--Contencates seperate date and time strings and converts to a datetime. Date should be in format 25.03.2012\. Time as 9:18:25.
ALTER FUNCTION [dbo].[ufn_GetDateTime] (@date nvarchar(11), @time nvarchar(11))
RETURNS datetime
AS
BEGIN

        --select dbo.ufn_GetDateTime('25.03.2012.', '9:18:25')

    declare @datetime datetime

    declare @day_part nvarchar(3)
    declare @month_part nvarchar(3)
    declare @year_part nvarchar(5)

    declare @point_ix int

    set @point_ix = charindex('.', @date)
    set @day_part = substring(@date, 0, @point_ix)

    set @date = substring(@date, @point_ix, len(@date) - @point_ix)
    set @point_ix = charindex('.', @date)

    set @month_part = substring(@date, 0, @point_ix)

    set @date = substring(@date, @point_ix, len(@date) - @point_ix)
    set @point_ix = charindex('.', @date)

    set @year_part = substring(@date, 0, @point_ix)

    set @datetime = @month_part + @day_part  + @year_part + ' ' + @time

    return @datetime
END 
```

当我运行它时.. 我得到：Msg 241, Level 16, State 1, Line 1 从字符串转换日期和/或时间时转换失败。

啊！！

那么，我该怎么办？

```
ALTER FUNCTION [dbo].[ufn_GetDateTime] (@date nvarchar(11), @time nvarchar(11))
RETURNS nvarchar(22)
AS
BEGIN

        --select dbo.ufn_GetDateTime('25.03.2012.', '9:18:25')

    declare @day_part nvarchar(3)
    declare @point_ix int

    set @point_ix = charindex('.', @date)
    set @day_part = substring(@date, 0, @point_ix)

    return @day_part
END 
```

我得到'25'。所以，我差了一个，所以我换成..

```
set @day_part = substring(@date, 0, @point_ix + 1) 
```

瞧！现在它可以工作了:)

            回答 #8

赞同：0

时间：2021-05-12T04:33:32.660

在我看来，每当我想打印或调试一个函数时。我将复制它的内容以作为普通 SQL 脚本运行。例如
我的功能：

```
create or alter function func_do_something_with_string(@input nvarchar(max)) returns nvarchar(max)
as begin
   -- some function logic content
   declare @result nvarchar(max)
   set @result = substring(@input , 1, 10)
   -- or do something else

   return @result
end 
```

然后我只是复制并运行这个函数来调试

```
 declare @input nvarchar(max) = 'Some string'      

    -- some function logic content
    declare @result nvarchar(max)
    set @result = substring(@input , 1, 10)
    -- this line is added to check while debugging
    print @result 

    -- or do something else
    -- print the final result
    print @result 
```

        oop - 是否存在确定方法或字段是否属于类的启发式方法？

ID：586653

赞同：5

时间：2009-02-25T16:06:09.430

标签：oop, class-design

我可以执行一个好的经验法则或测试来确定一个方法或字段是否属于一个类？如何识别成员何时不属于？

我发现我在面向对象设计中最大的绊脚石是试图弄清楚什么去哪里。答案似乎太多了：“它可以在这里*或*那里。”

这是我正在努力解决的事情类型的一个简单示例：

```
Public Class ITDepartment

    Private _sysadmins As List(Of Employee)
    Private _developers As List(Of Employee)

    // properties, public stuff...

    Private Sub AddSkillToGroup(ByVal emps As List(Of Employee), ByVal skill As Skill)
        For Each e As Employee In emps
            e.AddSkill(skill)
        Next
    End Sub

End Class 
```

`ITDepartment`对象管理 2 组……但它`Employees`应该知道`Employees`有技能吗？应该`AddSkillToGroup`重新定位这样的方法吗？

**编辑：**

到目前为止，似乎一致认为 IT 部门不应该了解员工的技能。我将扮演恶魔的拥护者，以说明我的困惑在哪里起作用。  

ITDepartment 由两个 Employee 集合组成。它不应该能够委托给那些收集项目吗？AddSkill 方法仍然属于 Employee 类。IT 部门只是指示其员工组为其每个成员添加一项技能。

            回答 #1

赞同：4

时间：2009-02-25T16:22:06.333

在这一点上，我倾向于制作`List(Of Employee)`自己的类，以便它可以拥有自己的方法 AddSkill()。

我猜你是通过代码气味来决定的。特别是过长的参数列表；到达其他物体内部。您也可以尝试一下，看看您是否可以将更多内容设为私有。

寻找在一个类中形成一个连贯子组的方法或方法和成员的集合——它们已经成熟，可以重新定位到自己的类中。

            回答 #2

赞同：3

时间：2009-02-25T16:09:03.307

查看[SOLID](http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod)原则。这些将为您提供有关方法所属位置的指导。

**编辑**

“[ITDepartment] 不应该能够委托给那些收集项目吗？”

“[是否] ITDepartment 类可以通过它所组成的 List(Of Employee) 来“通过”并委托给 Employee 类（就像它在上面调用 e.AddSkill 时所做的那样）。“

是的。

委托是面向对象编程的工作方式。您将详细信息委托给单一责任类。您委托实现，因此您可以依赖抽象而不是实现。

顺便说一句，`AddSkillToGroup`是私人的，这令人困惑。它不会隐藏任何可能更改的实现细节。这没有理由保密。[private 经常被过度使用和不当使用。非常非常少应该是私有的；并且仅在绝对必要时才应将其声明为私有。]

由于实现已委托给 Employee，`AddSkillToGroup`因此不是此类的实现细节。

        asp.net - 如何将 trace.axd 导出到文件

ID：586655

赞同：3

时间：2009-02-25T16:06:28.930

标签：asp.net, vb.net, trace

这可能有一个简单的答案，但我还没有找到一个。我想知道是否有一个简单的解决方案可以将 trace.axd 的页面级跟踪结果导出到某种日志文件。

谢谢

            回答 #1

赞同：4

时间：2009-02-25T16:15:32.637

<trace> 元素具有**writeToDiagnosticsTrace**选项，使您能够使用跟踪侦听器捕获跟踪事件。

我们已经这样做了，但效果不佳。由于 ASP.NET 中不完整的跟踪支持，我们只能将跟踪事件消息放入文件中 - 没有时间戳，没有经过的时间 - 没有什么真正有用的。

            回答 #2

赞同：3

时间：2009-02-25T16:09:18.140

看看这里它可能会带你到你想要的东西：

[http://www.15seconds.com/issue/020910.htm](http://www.15seconds.com/issue/020910.htm)

        .net - 有时加载 GIF 冻结

ID：586659

赞同：1

时间：2009-02-25T16:07:32.263

标签：.net, vb.net, gdi+, gif

我正在尝试在 Windows 窗体顶部使用加载叠加层，它在带有加载 GIF 的 Windows 窗体顶部添加 50% 的不透明层，同时它在后台线程中执行它需要执行的操作。叠加层是我在 onPaint 事件中绘制的窗口窗体。

加载覆盖在多个不同的表单加载上工作正常，但在 30 秒上传过程中被召唤以确保耐心时无法正常工作（将 Word 文档打印为 PDF，然后将该 PDF 上传到 SQL Server）。此上传从表单中收集一些数据，将其放入对象中，然后完全在后台线程上运行。加载覆盖将出现，显示加载 GIF 的第一帧，然后冻结。onPaint 被触发并且图像框架正在更新，但它不可见

构造函数将表单设置为 UserPainted：

```
Sub New()
    InitializeComponent()
    SetStyle(ControlStyles.UserPaint Or ControlStyles.Opaque, True) 
End Sub 
```

然后，在 Form.Shown 事件中调用 ImageAnimator.Animate 方法：

```
Private Sub LoadingOverlay_Shown(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Shown
    If Not currentlyAnimating Then
        ImageAnimator.Animate(animatedImage, AddressOf Me.OnFrameChanged)
        currentlyAnimating = True
    End If
End Sub 
```

onFrameChanged 事件处理程序只是使表单无效：

```
Private Sub OnFrameChanged(ByVal sender As Object, ByVal e As System.EventArgs)
    'Force a call to onPaint
    Me.Invalidate()
End Sub 
```

然后 onPaint 被覆盖并绘制：

```
Protected Overrides Sub OnPaint(ByVal e As PaintEventArgs)
    MyBase.OnPaint(e)

    'Get the next frame ready for rendering
    ImageAnimator.UpdateFrames()

    'Draw the next frame in the animation.
    e.Graphics.DrawImage(Me.animatedImage, GetCenter(Me.animatedImage.Size))
    TextRenderer.DrawText(e.Graphics, strStatus, Me.Font, GetTextLocation(Me.animatedImage.Size), Color.White, Color.Black)

End Sub 
```

最后，在 Form Closing 事件中调用 ImageAnimator.StopAnimate 方法：

```
Private Sub LoadingOverlay_FormClosed(ByVal sender As Object, ByVal e As System.Windows.Forms.FormClosedEventArgs) Handles Me.FormClosed
    If currentlyAnimating Then
        ImageAnimator.StopAnimate(animatedImage, AddressOf Me.OnFrameChanged)
        currentlyAnimating = False
    End If
End Sub 
```

以下是调用和关闭加载叠加层的方式：

```
Private Sub ShowLoadingOverlay()
    If Not blnLoadingOverlayVisible Then

        Me.Enabled = False

        patience = New LoadingOverlay()
        patience.Location = Point.Add(parent.PointToScreen(Me.Location), New Size(0, parent.ToolStrip.Height + parent.MenuStrip.Height))
        patience.Size = Me.Size
        patience.Show()
        patience.BringToFront()

        blnLoadingOverlayVisible = True

    End If
End Sub

Private Sub HideLoadingOverlay()
    If blnLoadingOverlayVisible Then
        'Close loading overlay'
        patience.Close()
        patience.Dispose()
        patience = Nothing
        Me.Enabled = True
        blnLoadingOverlayVisible = False
    End If
End Sub 
```

            回答 #1

赞同：1

时间：2009-02-25T19:15:20.190

“一些COM”是相关的。你会遇到 COM 的公寓线程规则。必须在 STA 线程上创建像 Word 这样的 COM 对象。您的主 UI 线程符合条件，它从 Main() 开始，并且具有 [STAThread] 属性。您在另一个线程上进行的任何方法调用都会由 COM 自动封送到 STA 线程。涂胶你的动画。

这不容易解决。您还需要一个必须是 STA 线程的后台线程，请使用 Thread.SetApartmentState()。并泵出一个消息循环，使用 Application.Run()。让您的代码开始并退出循环很尴尬，请尝试使用覆盖 SetVisibleCore() 的表单，这样您就可以避免使其可见。

            回答 #2

赞同：0

时间：2009-02-25T16:41:54.913

最初，一切都发生在一个后台线程中。总共运行 3 种方法。当我将上传线程（大约 1/2 的工作）移动到另一个后台线程时，一切都“正常”（不完美，GIF 在开始时仍然会跳动一点）。

移到第二个后台线程的上传方法根本不与 GUI 线程交互，它只是做一些 COM（字）和 SQL 的东西。长话短说，它正在工作，但我仍然不知道为什么。任何见解将不胜感激！

        c# - 按下按钮后从表单视图中的下拉列表中获取所选项目、值或索引

ID：586680

赞同：1

时间：2009-02-25T16:12:11.770

标签：c#, asp.net

我有一个带有插入模板的表单视图。在此模板中有一个下拉列表，其中包含我希望用户能够从中选择的一些项目。在下拉列表旁边有一个按钮，我使用该按钮将下拉列表中的选定项目添加到也存在于插入模板中的 gridview 中。

我的问题是，当我单击按钮从下拉列表中添加所选项目时，下拉列表中的所选项目、索引或值不可用。我正在使用 OnClick 事件处理程序从按钮单击中捕获事件，但我怀疑此处正在进行某种模板刷新，我不明白，因为按钮事件处理程序似乎无法访问任何内容。我不相信回发正在发生，因为我为我的按钮禁用了 CausesValidation 属性。

            回答 #1

赞同：2

时间：2009-02-25T16:27:39.220

似乎您也在回发上绑定您的 DDL。如果 ddl 数据不是硬编码的，并且您在 Page_Load 中调用了 ddl 数据绑定函数，则需要像这样调用该函数以确保它不会在回发时绑定：

```
if(!IsPostBack)
{
    BindDDL();
} 
```

否则，我们需要更多信息来帮助您，请发布您的代码。

            回答 #2

赞同：0

时间：2009-02-25T16:19:55.527

如果您单击附加了 OnClick 事件的 asp:Button，则无论 CausesValidation 是否为真，您都将回发到服务器。

您是否将数据绑定到 DropDownList？如果是这样并且您在回发时重新绑定它，那么您将没有您期望的选定项目。

你能把代码贴在这里吗？

            回答 #3

赞同：0

时间：2009-02-25T16:34:45.787

我必须查看代码，但听起来您在拉取所选项目之前要重新绑定。检查这一点的一种方法是添加一个监视，然后确保您在各种 ASP.NET 事件中编码，然后监视。

如果没有看到您在代码中所做的事情，我无法判断这是拖放异常还是您编写的代码。但是您描述的症状符合 Page_Load 场景中的典型绑定，这就是 jmein 的目标。

            回答 #4

赞同：0

时间：2009-03-12T17:20:16.303

所以事实证明这都是我的错。我拥有的 formview 控件包含在未启用视图状态的面板中。这阻止了下拉列表记住我选择的项目。

感谢大家的意见和建议。

        windows-mobile - 如何检测 Windows Mobile 上的挂起？

ID：586683

赞同：1

时间：2009-02-25T16:13:17.320

标签：windows-mobile, windows-ce, suspend

我们在 Windows Mobile 上看到我们的应用程序偶尔会丢失一些数据，并且我们怀疑在设备挂起时某些缓冲数据没有被刷新到磁盘。我们想在设备即将挂起时手动将数据刷新到磁盘。在 Windows 上，我们通过捕获`WM_POWERBROADCAST`消息来做到这一点，但此消息在 Windows Mobile 上不可用。[我在留言板上](http://www.eggheadcafe.com/conversation.aspx?messageid=29469311&threadid=29469302)找到了一个两年前的报价，上面写着：

您需要意识到您*不*保证会在您再次醒来之前*收到暂停通知。也就是说，在设备重新唤醒之前，您可能不会收到通知。一般来说，你不应该因为这个限制而试图对暂停做出反应（无论如何，你可以做什么来响应事件的限制）。

对于所有设备，这（仍然）是正确的吗？我们有办法做到这一点吗？

            回答 #1

赞同：3

时间：2009-02-25T18:28:46.433

据我所知，您是正确的，您无法检测到设备何时进入挂起模式，只有当它使用[CeRunAppAtEvent](http://msdn.microsoft.com/en-us/library/aa932775.aspx) API 出来时。

解决此问题的更好方法是尝试防止设备在代码的关键部分附近挂起。

根据应用程序的运行方式，有两种方法可以做到这一点。如果它作为用户交互的一部分运行，您需要调用一些 API 以确保设备永远不会进入挂起模式。

您需要安排以下代码至少每 10 秒运行一次。

```
 ::SystemIdleTimerReset ();
    ::SHIdleTimerReset();
    ::keybd_event(VK_LBUTTON, 0, KEYEVENTF_SILENT, 0);
    ::keybd_event(VK_LBUTTON, 0, KEYEVENTF_KEYUP | KEYEVENTF_SILENT, 0); 
```

如果您的应用程序作为后台应用程序运行，那么您需要将代码放在无人看管的电源模式块周围，同时执行上述代码。有关无人值守电源模式的更多详细信息，请参阅我的[答案](https://stackoverflow.com/questions/246407/disable-sleep-mode-in-windows-mobile-6)。

            回答 #2

赞同：2

时间：2009-02-25T18:23:37.460

引用（听起来非常非常熟悉）仍然是正确的。唯一保证能够在挂起之前完成其工作的组件是驱动程序，它们也有很多限制。

挂起背后的一般想法是对应用程序透明，而在此之前通常不是一个好主意。

            回答 #3

赞同：0

时间：2009-02-25T17:41:36.780

您是否尝试过使用 OpenNETCF 中公开的事件？我主要是 WinCE 开发人员，但我发现令人难以置信的是，任何人都会发布一个不能可靠地通知您电源状态更改的平台，因为这是桌面设备和移动设备之间最重要的区别之一。

            回答 #4

赞同：0

时间：2009-03-06T14:29:37.790

根据[http://social.msdn.microsoft.com/Forums/en-US/windowsmobiledev/thread/229dd6a2-f231-4aeb-ad90-c6995ba155cf/](http://social.msdn.microsoft.com/Forums/en-US/windowsmobiledev/thread/229dd6a2-f231-4aeb-ad90-c6995ba155cf/)除了 Windows Mobile 上的 POWER_STATE_SUSPEND 之外，还有另一个电源状态 POWER_STATE_UNATTENDED。

如果 WM 设备被挂起，您首先获得 POWER_STATE_UNATTENDED，然后是 POWER_STATE_SUSPEND。

使用 ::RequestPowerNotifications() API 和过滤 PBT_TRANSITION 可以处理到 POWER_STATE_SUSPEND 和 POWER_STATE_UNATTENDED 的转换。

处理 POWER_STATE_SUSPEND 的问题在于它通常在设备恢复后由您的代码处理。我在网上找到了一个建议，即为调用 ::ReadMsgQueue(..., INFINITE,...) 并进行处理的线程使用实时优先级。

为此，我们需要使用特定于 CE 的 ::CeSetThreadPriority()，因为它允许设置实时优先级。我无耻地使用0优先级。

一般来说，这种方式我能够可靠地处理 POWER_STATE_UNATTENDED 而不是那么可靠 POWER_STATE_SUSPEND 因为我的操作相当耗时（约 2 秒）。

对于我的任务处理 POWER_STATE_UNATTENDED 是我真正需要处理的。

            回答 #5

赞同：0

时间：2009-05-27T19:54:32.747

也许这个 SO 问题的答案会有所帮助：[如何在被挂起的情况下在 Windows Mobile 上运行代码？](https://stackoverflow.com/questions/336771/how-can-i-run-code-on-windows-mobile-while-being-suspended)

        .net - 工控机故障排除

ID：586692

赞同：1

时间：2009-02-25T16:14:41.310

标签：.net, windows, debugging, ipc

排除 IPC 故障的最佳方法是什么？

是否有任何工具/技巧来确定问题（无需请求源代码）？

我有两个第三方组件。IPC 服务器配置和客户端配置似乎正确。然而，这两个组件不想通信。一个组件抛出一个空对象异常，我认为这是由于远程配置中的一些问题造成的......

            回答 #1

赞同：0

时间：2009-02-26T01:36:51.333

如果您有来自已安装组件的 PDB 文件，请尝试使用[ADPLUS](http://blogs.msdn.com/johan/archive/2007/01/11/how-to-install-windbg-and-get-your-first-memory-dump.aspx)获取 DUMP 。

[DebugDiag 1.1 或 Windbg，我应该使用哪一个？以及如何收集内存转储](http://blogs.msdn.com/tess/archive/2008/05/21/debugdiag-1-1-or-windbg-which-one-should-i-use-and-how-do-i-gather-memory-dumps.aspx)

用于查找内存泄漏的其他信息：

[逆向工程和调试博客](http://blogs.msdn.com/ntdebugging/archive/2008/09/25/some-of-our-favorite-debugging-related-links.aspx)

[捕获转储的所有方法...](http://blogs.msdn.com/pfedev/archive/2008/09/26/all-the-ways-to-capture-a-dump.aspx)

[解决软件问题：科学方法](http://blogs.msdn.com/debuggingtoolbox/archive/2008/07/03/troubleshooting-software-problems-a-scientific-approach.aspx)

[两分钟练习：使用图像文件执行选项配置调试器](http://blogs.technet.com/askperf/archive/2008/12/12/two-minute-drill-configuring-a-debugger-using-image-file-execution-options.aspx)

[幻灯片和关于使用 Windbg 后台工具调试 .NET 问题的 TechED 演示资源](http://blogs.msdn.com/tess/archive/2008/11/21/slides-and-resources-for-teched-presentations-about-debugging-net-issues-with-windbg.aspx)

[：ExcpHook 异常监视器](http://gynvael.coldwind.pl/?id=148&lang=en)

        c# - 在列表框项目之间绘制自定义元素

ID：586697

赞同：2

时间：2009-02-25T16:15:49.123

标签：c#, wpf, xaml, listbox, datatemplate

我想在列表框的项目之间绘制自定义元素（例如一个空的正方形>，以指示用户可以在其他项目之间从另一个列表框中插入/删除项目。

我怎样才能做到这一点？我对此有一些相当老套的解决方案，但我希望有一种更简单的方法来做到这一点。

其中一个想法是为列表框中的奇数和偶数索引项使用不同的 DataTemplates。

            回答 #1

赞同：1

时间：2009-02-25T16:19:29.257

可以在[这里](http://www.zagstudio.com/blog/488#.VjNk-X6rRph)看到一个非常优雅的解决方案。

（如果链接过时了，因为它已经过时了，谷歌搜索“bea stollnitz 拖放列表框”可能会让你找到正确的页面，如果它存在的话。）

        apache-flex - FireFox Flex 布局/渲染问题

ID：586699

赞同：1

时间：2009-02-25T16:16:13.337

标签：apache-flex, firefox, layout, flash

Flex 应用程序设置为 900 像素宽度。

对象标签设置为 900 像素宽度。

Firefox 正在以请求大小的 110% 呈现对象。所以在对象的右侧大小上有一个空白的垂直列。（如果我也设置固定高度，它会这样做）

如果我将对象标签中的宽度设置为 810，那么它们就会匹配，但这对我来说太难用了。

这是对象标签。

```
 <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"  width="100%" height="100%" id="FlashID" title="userlist">
            <param name="movie" value="swf/userlist.swf" />
            <param name="quality" value="high" />
            <param name="wmode" value="opaque" />
            <param name="swfversion" value="9.0.45.0" />
            <!-- This param tag prompts users with Flash Player 6.0 r65 and higher to download the latest version of Flash Player. Delete it if you don’t want users to see the prompt. -->
            <param name="expressinstall" value="Scripts/expressInstall.swf" />
            <!-- Next object tag is for non-IE browsers. So hide it from IE using IECC. -->
            <!--[if !IE]>-->
            <object type="application/x-shockwave-flash" data="swf/userlist.swf" width="100%" height="100%" >
              <!--<![endif]-->
              <param name="quality" value="high" />
              <param name="wmode" value="opaque" />
              <param name="swfversion" value="9.0.45.0" />
              <param name="expressinstall" value="Scripts/expressInstall.swf" />
              <!-- The browser displays the following alternative content for users with Flash Player 6.0 and older. -->
              <div>
                <h4>Content on this page requires a newer version of Adobe Flash Player.</h4>
                <p><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" /></a></p>
              </div>
              <!--[if !IE]>-->
            </object>
            <!--<![endif]-->
          </object> 
```

            回答 #1

赞同：2

时间：2009-02-25T16:57:46.573

我认为这是因为外部`<object>`标签在 FF 中没有做任何有用的事情。您可以通过省略它进行测试来轻松验证该理论。如果我是正确的，我建议您使用[SWFObject](http://code.google.com/p/swfobject/)来呈现嵌入代码。或者，您可以添加一些 CSS 技巧来隐藏 FF 中的边框。

            回答 #2

赞同：0

时间：2009-02-25T18:36:15.260

代码中的注释说明了为什么需要外部对象标记。它适用于 Internet Explorer。

        ruby - 使用基本路径过滤器在 Webby 中重写 URL？

ID：586703

赞同：0

时间：2009-02-25T16:16:51.243

标签：ruby, rake, webby

Basepath过滤器重写？
我正在尝试使用 webby 中的基本路径过滤器来重写我项目中的所有 URL。
关于[Webby的基本](http://webby.rubyforge.org/)[路径过滤器](http://webby.rubyforge.org/user-manual/#h3_6)的文档对此有点“轻”，只是没有足够的内容，我可以理解如何使用它。
如果我找到了解决方案，但是我计划为该项目**贡献**一些文档。
我也明白，为了让它工作，我应该拥有它重写的 URL 的所有路径，以“/”开头。
我试过像这样将过滤器应用到我的 default.txt 模板......

```
---
extension: html
filter:    erb
       basepath
--- 
```

** - 布局顶部/default.txt**
然后我运行命令：

```
leeand00@someHost: webby rebuild BASE='http://www.yahoo.com/bob/' 
```

** - 从项目的根目录运行命令**
但我得到的只是一个错误......

```
** Invoke rebuild (first_time)
** Invoke configure_basepath (first_time)
** Execute configure_basepath
** Execute rebuild
webby aborted!
syntax error on line 4, col 0: `---'
/usr/lib/ruby/1.8/yaml.rb:133:in `load'
/usr/lib/ruby/1.8/yaml.rb:133:in `load'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/resources/meta_file.rb:164:in `meta_data'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/resources/meta_file.rb:51:in `meta_data'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/resources/meta_file.rb:51:in `open'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/resources/meta_file.rb:51:in `meta_data'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/resources/layout.rb:19:in `initialize'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/resources.rb:41:in `new'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/resources.rb:41:in `new'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/builder.rb:167:in `load_files'
/usr/lib/ruby/1.8/find.rb:39:in `find'
/usr/lib/ruby/1.8/find.rb:38:in `catch'
/usr/lib/ruby/1.8/find.rb:38:in `find'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/builder.rb:164:in `load_files'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/builder.rb:134:in `run'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/builder.rb:23:in `run'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/tasks/build.rake:13
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:615:in `call'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:615:in `execute'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:612:in `each'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:612:in `execute'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:578:in `invoke_with_call_chain'
/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:571:in `invoke_with_call_chain'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:564:in `invoke'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:2019:in `invoke_task'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:1997:in `top_level'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:1997:in `each'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:1997:in `top_level'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/apps/main.rb:232:in `standard_exception_handling'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:1991:in `top_level'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/apps/main.rb:115:in `rake'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/apps/main.rb:33:in `run'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/apps/main.rb:12:in `run'
/var/lib/gems/1.8/gems/webby-0.9.3/bin/webby:39
/var/lib/gems/1.8/bin/webby:19:in `load'
/var/lib/gems/1.8/bin/webby:19
leeand00@U101:~/J62$ webby --trace rebuild BASE='http://www.yahoo.com/bob/'
** Invoke rebuild (first_time)
** Invoke configure_basepath (first_time)
** Execute configure_basepath
** Execute rebuild
webby aborted!
syntax error on line 4, col 0: `---'
/usr/lib/ruby/1.8/yaml.rb:133:in `load'
/usr/lib/ruby/1.8/yaml.rb:133:in `load'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/resources/meta_file.rb:164:in `meta_data'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/resources/meta_file.rb:51:in `meta_data'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/resources/meta_file.rb:51:in `open'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/resources/meta_file.rb:51:in `meta_data'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/resources/layout.rb:19:in `initialize'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/resources.rb:41:in `new'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/resources.rb:41:in `new'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/builder.rb:167:in `load_files'
/usr/lib/ruby/1.8/find.rb:39:in `find'
/usr/lib/ruby/1.8/find.rb:38:in `catch'
/usr/lib/ruby/1.8/find.rb:38:in `find'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/builder.rb:164:in `load_files'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/builder.rb:134:in `run'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/builder.rb:23:in `run'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/tasks/build.rake:13
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:615:in `call'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:615:in `execute'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:612:in `each'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:612:in `execute'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:578:in `invoke_with_call_chain'
/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:571:in `invoke_with_call_chain'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:564:in `invoke'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:2019:in `invoke_task'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:1997:in `top_level'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:1997:in `each'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:1997:in `top_level'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/apps/main.rb:232:in `standard_exception_handling'
/var/lib/gems/1.8/gems/rake-0.8.3/lib/rake.rb:1991:in `top_level'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/apps/main.rb:115:in `rake'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/apps/main.rb:33:in `run'
/var/lib/gems/1.8/gems/webby-0.9.3/lib/webby/apps/main.rb:12:in `run'
/var/lib/gems/1.8/gems/webby-0.9.3/bin/webby:39
/var/lib/gems/1.8/bin/webby:19:in `load'
/var/lib/gems/1.8/bin/webby:19 
```

            回答 #1

赞同：1

时间：2009-02-25T18:22:09.460

尝试更改您的过滤器部分，使其使用有效的 webby 语法。它应该如下所示：

```
---
extension: html
filter:
  - erb
  - basepath
--- 
```

            回答 #2

赞同：1

时间：2009-04-03T18:19:50.073

我确认答案是正确的。我想解释一下为什么，这是因为页面的元数据在 yaml 中（[http://en.wikipedia.org/wiki/YAML#Lists](http://en.wikipedia.org/wiki/YAML#Lists)）

        c# - 从 IE 中的 HtmlElement 的 Dom 中获取 IHTMLStyle3

ID：586704

赞同：3

时间：2009-02-25T16:16:58.637

标签：c#, webbrowser-control

我在表单上有一个 System.Windows.Form.WebBrowser 控件。我将该浏览器对象导航到一个 url。

页面加载完成后，我想分析加载页面的各个方面。

特别是我有兴趣查看 IHTMLStyle3 界面上的属性“writingMode”。

就像是：

```
public void MyMethod(HtmlElement element)
    {
        IHTMLElement2 element2 = element.DomElement as IHTMLElement2;
        IHTMLStyle3 style3 = element2.currentStyle as IHTMLStyle3;

        string writingMode = style3.writingMode;
    ... 
```

问题是，style3 的值为空。我认为这意味着 IHTMLElement2.currentStyle 不支持 IHTMLStyle3。

我也尝试过投射 IHTMLELement.style。但是，虽然它确实很高兴地转换为 IHTMLStyle3，但它似乎不包含样式，因为它已应用于 Html 元素。

            回答 #1

赞同：1

时间：2009-02-25T18:42:18.773

查看文档，我相信您需要获取该[`IHTMLElement2.currentStyle`](http://msdn.microsoft.com/en-us/library/aa703980(VS.85).aspx)属性，因为常规`style`属性只是内联样式。这种差异在以下注释中指出[`IHTMLElement2.currentStyle`](http://msdn.microsoft.com/en-us/library/aa703980(VS.85).aspx)：

当对象的样式未内联设置时，由 IHTMLStyle 和 IHTMLCurrentStyle 接口的属性返回的值不同。例如，如果网页的作者仅通过链接或嵌入样式表将段落的颜色属性设置为红色，而不是内联，则 IHTMLCurrentStyle::color 属性返回值 red，而 IHTMLStyle::get_color属性不返回值。但是，如果作者指定内联颜色属性的值，如下例所示，则 IHTMLCurrentStyle::color 和 IHTMLStyle::get_color 属性都返回值 red。

[`currentStyle`](http://msdn.microsoft.com/en-us/library/aa703980(VS.85).aspx)提供了一个[`IHTMLCurrentStyle`](http://msdn.microsoft.com/en-us/library/aa704104(VS.85).aspx)接口，在查询时[`IHTMLCurrentStyle2`](http://msdn.microsoft.com/en-us/library/aa752724(VS.85).aspx)会根据需要提供给您[`writingMode`](http://msdn.microsoft.com/en-us/library/aa704098(VS.85).aspx)。

        javascript - 对太宽的下拉菜单项的建议？

ID：586718

赞同：8

时间：2009-02-25T16:22:12.777

标签：javascript, html

当下拉菜单面对的文本太宽以至于无法扩展菜单的宽度以适应时，我有哪些选择？即它破坏了页面布局，或者如果调整下拉菜单以适应长项目，它看起来太难看了。

截断？截断加上完整的悬停文本？不允许这么长的项目？

有人遇到过任何优雅的解决方案吗？

谢谢。

            回答 #1

赞同：7

时间：2010-07-27T00:24:14.690

我意识到我对这个问题已经很晚了，但我一直在寻找答案，我可能已经找到了一个相当优雅的解决方案。

看看这里：

*   [http://www.getharvest.com/blog/2009/12/dropdown-problems-on-internet-explorer/](http://www.getharvest.com/blog/2009/12/dropdown-problems-on-internet-explorer/)
*   [http://www.dougboude.com/blog/1/2008/05/Viewing-Option-Text-in-IE7-thats-Wider-than-the-Select-List.cfm](http://www.dougboude.com/blog/1/2008/05/Viewing-Option-Text-in-IE7-thats-Wider-than-the-Select-List.cfm)

在推荐基于第二个链接的解决方案之前，第一个链接讨论了几个解决方案。

这个想法是，在单击时，您可以更改`<select>`标签的宽度，使其足够大以显示选项的全文。通过将`<select>`标签保留在 div 中并将溢出设置为“隐藏”，它不会与页面的其余部分发生冲突。

试试看 - 这是一个很好的解决方案。

            回答 #2

赞同：3

时间：2009-02-25T16:28:10.000

使用工具提示截断将是我的选择....

上次我必须这样做时，我使用了一个 Telerik 控件，它的 UI 非常丰富。

            回答 #3

赞同：2

时间：2009-02-25T17:28:18.997

我同意 GordonB 关于截断选项的观点。过长的选项可能难以阅读，而且正如您所提到的，它看起来很糟糕。  

但是，如果您的下拉列表是从用户输入中填充的，我会限制长度。可以用 15 个单词说的话应该用 5 个单词说……如果不能，那么下拉菜单可能不是您的最佳选择。

例如，如果您的选项是研究论文的标题及其作者，您可能可以将它们缩写为几个关键词（“String Theory and You [Brown 2008]”）。另一方面，如果选项本身仅相差几个词并且如果它们被截断就失去意义（例如“花生酱和葡萄果冻三明治配胡萝卜条和豆浆”和“花生酱和波森莓果冻”等选项列表加胡萝卜条和 2% 牛奶的沙子”）也许你会更好地按顺序显示所有选项，并酌情附上复选框或单选按钮。

（如果您使用的是 ASP.NET，基本上我说的是使用中继器而不是 DropDownList）

第二种方法还可能允许您在下拉列表中合并其他无法合并的元素。看看[这个亚马逊搜索结果页面](http://www.amazon.com/s/ref=nb_ss_gw?url=search-alias%3Dstripbooks&field-keywords=bacon&x=0&y=0)的想法。

            回答 #4

赞同：2

时间：2009-02-25T17:40:42.727

[用CSS 属性`max-width`](http://www.w3.org/TR/CSS21/visudet.html#propdef-max-width)给元素一个最大宽度。

            回答 #5

赞同：1

时间：2009-02-25T16:30:32.770

大多数浏览器以全宽显示选项，而不管下拉菜单的实际宽度如何，而 IE 将它们裁剪为选择框的宽度。所以问题实际上是特定于浏览器的。

我已经在下拉列表中使用绝对定位制作了一个解决方案，这样我就可以在 IE 中悬停时扩展它的宽度而不会破坏我的布局。有点hacky，但这是一种选择。

            回答 #6

赞同：0

时间：2009-02-25T16:27:50.500

我一直在使用使用 <div> 而不是 <select> 实现的商业 ASP.NET 控件。通过这种方式，我们可以在其上放置多行元素，根据需要设置样式并执行其他操作。

            回答 #7

赞同：0

时间：2009-02-25T17:29:29.620

取决于你说的范围有多广，上下文是什么。这通常归结为设计问题而不是编码问题。如果文本真的很长，您将遇到可用性问题，因为在下拉列表中阅读长文本很困难。我的选择是：

如果下拉列表真的很窄并且最长的项目不是很长（例如 3-4 个单词），请更改设计以适应它。

如果文本真的很长（例如句子），那么尽可能截断它。有时文本不适合这一点（例如，您最终可能会得到多个具有相同文本的项目）。您不能真正将工具提示放在选择列表项上。  

如果文本很长且无法截断，您可能需要考虑使用不同的 UI 选项。

            回答 #8

赞同：0

时间：2014-03-07T05:56:40.387

为什么不创建一个基于冗长字段的计算字段。仅将其创建为前 50 个（比如说）字符。

=左（[标题]，50）

然后在下拉列表中引用该字段。

        c++ - 哪种方法最适合从光驱快速读取文件？

ID：586727

赞同：4

时间：2009-02-25T16:24:03.973

标签：c++, c, file, optical-drive

从硬盘读取文件时，mmap 通常被认为是快速将数据放入内存的好方法。使用光驱时，访问需要更多时间，并且您需要担心更高的延迟。您使用什么方法/抽象来隐藏/消除尽可能多的延迟和/或光驱的整体加载时间？

            回答 #1

赞同：1

时间：2009-02-25T16:49:27.420

通过从几个文件（最好是一个）顺序读取大量数据来最小化或消除搜索。

            回答 #2

赞同：1

时间：2009-02-25T16:52:07.057

首先您必须记住，现代光驱读取顺序数据的速度非常快，但查找数据的速度仍然比 HD 慢很多。因此，如果您必须在一个大文件中搜索很多内容（例如，在 500+ MB 文件中随机跳转），首先将整个 500 MB 复制到 HD（到一个临时文件中）实际上可能会更快，这将在顺序，快速读取，对临时文件执行操作（速度快得多，因为 HD 上的访问时间要快得多）并在完成后再次删除文件。

以上同样适用于小文件和许多小文件。处理几个大文件比处理许多小文件要快得多，因为每次你从一个小文件切换到另一个文件时，巨大的搜索时间会让你再次头疼。这就是为什么许多在光学媒体上发布的游戏将游戏数据打包在巨大的存档文件中（例如，一个级别的所有纹理都在一个大文件中，而不是每个纹理只有一个小文件），因此请尝试在大文件中保持数据结构良好您可以尽可能按顺序阅读。

高清缓存本身就是一种很好的技术。我记得有一个游戏，虽然我忘记了标题，它总是将你环境的 3D 数据保持在 HD 上。当您在世界各地移动时，它不断地将数据从 DVD 复制到 HD。因此，周围的 3D 景观总是可以在 HD 上快速访问，但不会复制整个 DVD，只有大约 200-300 MB 临时缓存在 HD 上以节省 HD 空间。唯一令人讨厌的是，您在玩游戏时经常有 DVD 访问“噪音”，但大部分时间整个过程只发生在 CPU 空闲时间，所以它并没有真正影响游戏。只有当您在同一方向上持续快速奔跑时，DVD 驱动器才可能出现回落，并且游戏突然停止并显示加载指示器几秒钟。但是我玩这个游戏已经好几天了，可能在一周内看到这个加载指示器三次。如果您移动缓慢或不经常向同一方向移动，则永远不会有加载指示器。

            回答 #3

赞同：1

时间：2009-02-25T16:53:41.047

您无法使用真正的抽象。光驱具有非常特殊的特性，必须针对这些特性进行优化以获得最佳性能。

一些技巧：

光驱的最大杀手是寻道时间。在可能的情况下，确保您正在阅读的所有文件在光盘上都是连续的，并且尽可能紧密地打包。如果你必须寻求，那么就向一个方向寻求，并且尽可能不频繁地寻求。

异步读取还可以大幅提升性能。如果您需要加载和处理文件 A、B 和 C，那么在处理 A 之前，您应该开始读取文件 B，而在处理 B 时，您应该读取文件 C，依此类推。

一般来说，你可以一次读取的数据越多越好，例如避免大量的小读取（）。在读取大量数据时，您只能获得光盘的理论吞吐量。一些操作系统的/驱动程序将通过缓存扇区将读取大量小文件的损失降到最低，有些则不会。

对仅缓存部分 TOC 的某些文件系统/操作系统进行大量存在（文件名）检查也可能是有害的。

在我们的应用程序中，我们通常将文件打包成一个或多个“集总”文件，并根据它们的访问顺序对它们进行排序。一些文件（和目录）在被解压到内存中之前会被完整地压缩和读取。如果您有一个包含大量小文件（例如 XML 或脚本）的目录，这将是一个胜利。

基本上有很多基准测试和调整:)

            回答 #4

赞同：0

时间：2009-02-25T16:45:39.753

慢车会变慢。对不起。但是，光驱硬件通常会进行优化以进行顺序读取，因此如果您可以让您的代码以这种方式工作，您可能会看到一些改进。`mmap()`我怀疑您会看到, `fread()`, et al之间的顺序访问有很大区别。如果您的操作系统尚未为您执行此操作，您还可以将读取缓冲区大小调整为驱动器块大小的倍数。与硬盘驱动器相比，光驱的块大小可能更大，如果您的缓冲区不够大，您就要付出代价。

            回答 #5

赞同：0

时间：2009-02-25T17:51:57.223

我不确定在您阅读它时您可以做很多事情。您可以查看创建文件 API——您可以向 Windows 传递一些提示，告诉它您正在为顺序或随机访问打开文件。这应该允许 Windows 优化用于文件的缓存策略。  

您可以调整读取文件时咬掉的“块”，以使它们更大或更小。如果您读取的块是磁盘上分配单元大小的倍数，您可能会得到轻微的改进。

硬件和媒体可以发挥作用。假设您有一个读取速度为 16 倍的 DVD 驱动器。它将需要额定为 16 倍或更高的媒体，并且某些驱动器不适用于某些媒体品牌。因此，即使媒体符合评级，您也可能不会以最大速度阅读。（通常对光驱进行良好的硬件审查会包括这样的细节）。

光盘上文件的布局可能很重要。一下子就烧完了？它是否只是作为磁盘安装（如数据包模式 R/W？）。我没有这方面的经验，但鉴于光驱上的寻道时间较长，碎片文件可能比现代硬盘产生更大的影响。

        asp.net - 在 Web.config 帮助中定义 tagPrefixes

ID：586731

赞同：5

时间：2009-02-25T16:24:33.270

标签：asp.net, web-config

我在让我的 aspx 页面识别我的 tagPrefixes 时遇到了一些麻烦。

我已经定义了标准的 ASP...

```
<add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
<add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/> 
```

然后我在下面定义了我的自定义控件，但我认为我没有正确定义它们，因为有时页面在当前上下文中看不到任何控件，而有时它们像冠军一样工作......

```
<add tagPrefix="mri" namespace="Mri.Controls" assembly="Mri.Controls"/>
<add tagPrefix="mri" namespace="Mri.Controls.Inputs" assembly="Mri.Controls"/>
<add tagPrefix="mri" namespace="Mri.Controls.Inputs.DropDowns" assembly="Mri.Controls"/>
<add tagPrefix="mri" namespace="Mri.Controls.Inputs.Search" assembly="Mri.Controls"/> 
```

我有一个命名空间“Mri.Controls”，在该命名空间内我有几个子文件夹，“Inputs”->“DropDowns”等...

我究竟做错了什么？目前，常规 ASP 控件给我一个错误：名称“blahBlah”在当前上下文中不存在。

            回答 #1

赞同：3

时间：2009-02-25T16:27:52.467

子文件夹可能会也可能不会成为命名空间的一部分。默认情况下，Visual Studio 在创建新类时确实包含它们，但可以在类中删除。如果您将控件移动到子文件夹，则文件夹的名称可能不是命名空间的一部分。

此外，请确保您在 Visual Studio 中引用您的控件程序集或项目。

            回答 #2

赞同：1

时间：2009-02-25T16:34:41.170

您是否还需要 tagName 属性，例如

```
<add tagPrefix="mri" tagName="Search" namespace="Mri.Controls.Inputs.Search" assembly="Mri.Controls"/>

<mri:Search ID="Search" runat="server"/> 
```

        c++ - 将 C 类型字符串数组中的元素作为 BSTR 传递给 COM 对象？（在 C++ 中）

ID：586734

赞同：2

时间：2009-02-25T16:25:54.263

标签：c++, c, com, bstr

我正在编写一个由外部程序调用的 C++ DLL。

1.) 我将一个字符串数组（作为 char *var）作为该程序的参数。

2.) 我想遍历这个数组并在字符串数组的每个元素上调用一个 COM 函数。COM 函数必须采用 BSTR：

```
DLL_EXPORT(void) runUnitModel(char *rateMaterialTypeNames) {

    HRESULT hr = CoInitialize(NULL);

    // Create the interface pointer.
    IUnitModelPtr pIUnit(__uuidof(BlastFurnaceUnitModel));

    pIUnit->initialiseUnitModel();

    int i;
    for(i=0; i < sizeOfPortRatesArray; i++)
            pIUnit->createPort(SysAllocString(BSTR((const char *)rateMaterialTypeNames[i]))); 
```

我认为它的 SysAllocString(BSTR((const char *)rateMaterialTypeNames[i])) 位给我带来了问题。程序运行时出现访问冲突。

这是在 i 处访问 rateMaterialTypeName 值的正确方法吗？请注意，我期望像“IronOre”这样的值作为 i 的值，而不是单个字符。  

            回答 #1

赞同：5

时间：2009-02-25T16:52:01.097

如果您使用的是 Microsoft的**ATL**，则可以使用[CComBSTR](http://msdn.microsoft.com/en-us/library/zh7x9w3f(VS.80).aspx)类。它将接受一个 char* 并从中创建一个 BSTR，此外，您无需担心删除 BSTR，所有这些都发生在 CComBSTR 的 dtor 中。

另外，请参阅[Matthew Xaviers](https://stackoverflow.com/questions/586734/pass-an-element-from-c-type-string-array-to-a-com-object-as-bstr-in-c/586787#586787)的回答，您似乎没有将字符串数组正确传递给该函数。

希望这可以帮助

            回答 #2

赞同：4

时间：2009-02-25T16:38:32.643

因为保存 C 字符串的变量只是指向第一个元素（char*）的指针，所以为了传递 C 字符串数组，函数的参数应该是 char**：

```
DLL_EXPORT(void) runUnitModel(char **rateMaterialTypeNames) 
```

这样，当您评估 rateMaterialTypeNames[i] 时，结果将是一个 char*，这是您需要传递给 SysAllocString() 的参数类型。

添加注释：您还需要在某些时候将字符串转换为宽字符，正如 Tommy Hui 的回答所指出的那样。

            回答 #3

赞同：3

时间：2009-02-25T16:38:29.117

如果函数 rateMaterialTypeNames 的参数是字符串，则

rateMaterialTypeNames[i]

是一个字符而不是一个字符串。您应该只使用参数名称本身。

此外，演员阵容一般都很糟糕。转换为 BSTR 是一个很大的标志。SysAllocString 的参数类型是

常量 OLECHAR*

对于 32 位编译器，它是一个宽字符。所以这肯定会失败，因为实际参数是 char*。

代码需要的是窄字符串到宽字符串的转换。

```
const OLECHAR* pOleChar = A2COLE( *pChar );
BSTR str = SysAllocString( pOleChar );
// do something with the 'str'
SysFreeString( str ); // need to cleanup the allocated BSTR 
```

        emacs - 如何检查 Emacs 中是否存在当前缓冲区？

ID：586735

赞同：48

时间：2009-02-25T16:26:03.280

标签：emacs, elisp

我想编写一个函数，如果给定的缓冲区名称已经存在，它会采取行动。例如：

```
(if (buffer-exists "my-buffer-name")
    ; do something
 ) 
```

elisp 是否有一个函数可以检查缓冲区是否存在，类似于我制作的“缓冲区存在”函数的功能？

谢谢

            回答 #1

赞同：66

时间：2009-02-25T16:30:07.123

从[文档](http://www.gnu.org/software/emacs/manual/html_node/elisp/Buffers.html)中：

```
（获取缓冲区名称）

返回名为 name 的缓冲区（字符串）。
如果没有名为 name 的实时缓冲区，则返回 nil。
name 也可以是一个缓冲区；如果是这样，则该值是该缓冲区。

（获取缓冲区创建名称）

返回名为 name 的缓冲区，或者创建这样的缓冲区并返回它。
如果没有名为 name 的活动缓冲区，则会创建一个新缓冲区。
如果名称以空格开头，则新缓冲区不保留撤消信息。
如果 name 是缓冲区而不是字符串，则它是返回的值。
该值永远不会为零。

```

            回答 #2

赞同：8

时间：2014-04-29T12:47:46.130

这就是我所做的：

```
(when (get-buffer "*scratch*")
  (kill-buffer "*scratch*")) 
```

这将检查缓冲区划痕。如果有这种事，杀了它。如果没有，什么也不做。

            回答 #3

赞同：6

时间：2015-08-11T09:55:00.753

不确定这个谓词出现的版本，但现在 Emacs 有`buffer-live-p`：

```
buffer-live-p is a built-in function in `buffer.c'.

(buffer-live-p OBJECT)

Return non-nil if OBJECT is a buffer which has not been killed.
Value is nil if OBJECT is not a buffer or if it has been killed. 
```

            回答 #4

赞同：5

时间：2010-01-12T17:35:19.773

如果您想如上所述定义您的假设函数，则可以：

```
(defun buffer-exists (bufname)   (not (eq nil (get-buffer bufname)))) 
```

我使用它在启动时自动关闭`*scratch*`缓冲区，因此我不必在缓冲区列表中循环通过它，如下所示：

```
(defun buffer-exists (bufname) (not (eq nil (get-buffer bufname))))
(if (buffer-exists "*scratch*")  (kill-buffer "*scratch*")) 
```

        path - 如何避免在 ksh 中重复路径变量

ID：586741

赞同：2

时间：2009-02-25T16:27:02.687

标签：path, ksh

与[如何避免在 csh 中复制路径变量](https://stackoverflow.com/questions/135754/how-to-keep-from-duplicating-path-variable-in-csh)类似的问题。但我不使用 csh。

```
PATH=${SOMETHING}:${PATH} 
```

如何从 PATH 中删除重复项。

            回答 #1

赞同：3

时间：2009-02-25T16:28:14.197

我使用这个oneliner，但这取决于gawk。

```
PATH=$(echo $PATH|tr ":" "\n"|gawk '!($0 in a) { a[$0];print}'|paste -sd: - ) 
```

        wpf - 使用 System.Linq.IGrouping 对 WPF ListView 进行排序

ID：586752

赞同：3

时间：2009-02-25T16:29:56.390

标签：wpf, sorting, listview

实际上，我在对普通 ListView.ItemsSource 进行排序时没有遇到问题，当我将 IGrouping 列表作为 ItemSource 或 SelectedItems 时，我的问题实际上出现了，我使用以下代码段：

```
 private void Sort(string sortBy, ListSortDirection direction)
    {
        lastDirection = direction;
        ICollectionView dataView = CollectionViewSource.GetDefaultView(this.ItemsSource);

        dataView.SortDescriptions.Clear();
        SortDescription sd = new SortDescription(sortBy, direction);
        dataView.SortDescriptions.Add(sd);
        dataView.Refresh();
    } 
```

当 sortBy = 某个 ListView 列时，方向 = 升序、降序（取决于最后的排序）

那么如何设置 ItemSource 如下： IList when T = myClass

提前致谢！

更新 ：

修改了上面的片段：

```
private void Sort(string sortBy, ListSortDirection direction)
{
    lastDirection = direction;
    ICollectionView dataView;
    if (this.Name.Equals("dlstPlantillas"))
    {
        List<Plantilla> newItemSource = new List<Plantilla>();
        var source = this.ItemsSource;

        foreach (var group in source)
        {
            System.Linq.IGrouping<string, Plantilla> groupCast = group as System.Linq.IGrouping<string, Plantilla>;
            if (null == groupCast) return;
            foreach (Plantilla item in groupCast)
            {
                newItemSource.Add(item);
            }
        }
         dataView = CollectionViewSource.GetDefaultView(newItemSource);
    }
    else
    {
        dataView = CollectionViewSource.GetDefaultView(this.ItemsSource);
    }          

    dataView.SortDescriptions.Clear();
    SortDescription sd = new SortDescription(sortBy, direction);
    dataView.SortDescriptions.Add(sd);
    dataView.Refresh();
} 
```

实际上我得到了这个堆栈：

```
System.ObjectDisposedException was unhandled by user code 
   Message = "Unable to access the deleted object. \ R \ nNombre object: 'It has a DataContext accessed after Dispose..'" 
   Source = "System.Data.Linq" 
   ObjectName = "It has been a DataContext accessed after Dispose." 
   Stacktrace: 
        in System.Data.Linq.DataQuery `1.System.Collections.IEnumerable.GetEnumerator () 
        in SRIMedico.com.SortableListView.Sort (String Sort, ListSortDirection direction) in D: \ cs_InformeMedico \ app \ SortableListView.cs: line 219 
        in SRIMedico.com.SortableListView.GridViewColumnHeaderClickedHandler (Object sender, RoutedEventArgs e) in D: \ cs_InformeMedico \ app \ SortableListView.cs: line 163 
        in System.Windows.RoutedEventHandlerInfo.InvokeHandler (Object target, RoutedEventArgs routedEventArgs) 
        in System.Windows.EventRoute.InvokeHandlersImpl (Object source, RoutedEventArgs args, Boolean reRaised) 
        in System.Windows.UIElement.RaiseEventImpl (DependencyObject sender, RoutedEventArgs args) 
        in System.Windows.UIElement.RaiseEvent (RoutedEventArgs e) 
        in System.Windows.Controls.Primitives.ButtonBase.OnClick () 
        in System.Windows.Controls.GridViewColumnHeader.ClickImplement () 
        in System.Windows.Controls.GridViewColumnHeader.OnClick () 
        in System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp (MouseButtonEventArgs e) 
        in System.Windows.Controls.GridViewColumnHeader.OnMouseLeftButtonUp (MouseButtonEventArgs e) 
        in System.Windows.UIElement.OnMouseLeftButtonUpThunk (Object sender, MouseButtonEventArgs e) 
        in System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler (Delegate genericHandler, Object genericTarget) 
        in System.Windows.RoutedEventArgs.InvokeHandler (Delegate handler, Object target) 
        in System.Windows.RoutedEventHandlerInfo.InvokeHandler (Object target, RoutedEventArgs routedEventArgs) 
        in System.Windows.EventRoute.InvokeHandlersImpl (Object source, RoutedEventArgs args, Boolean reRaised) 
        in System.Windows.UIElement.ReRaiseEventAs (DependencyObject sender, RoutedEventArgs args, RoutedEvent newEvent) 
        in System.Windows.UIElement.CrackMouseButtonEventAndReRaiseEvent (DependencyObject sender, MouseButtonEventArgs e) 
        in System.Windows.UIElement.OnMouseUpThunk (Object sender, MouseButtonEventArgs e) 
        in System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler (Delegate genericHandler, Object genericTarget) 
        in System.Windows.RoutedEventArgs.InvokeHandler (Delegate handler, Object target) 
        in System.Windows.RoutedEventHandlerInfo.InvokeHandler (Object target, RoutedEventArgs routedEventArgs) 
        in System.Windows.EventRoute.InvokeHandlersImpl (Object source, RoutedEventArgs args, Boolean reRaised) 
        in System.Windows.UIElement.RaiseEventImpl (DependencyObject sender, RoutedEventArgs args) 
        in System.Windows.UIElement.RaiseEvent (RoutedEventArgs args, Boolean trusted) 
        in System.Windows.Input.InputManager.ProcessStagingArea () 
        in System.Windows.Input.InputManager.ProcessInput (InputEventArgs input) 
        in System.Windows.Input.InputProviderSite.ReportInput (InputReport inputReport) 
        in System.Windows.Interop.HwndMouseInputProvider.ReportInput (IntPtr hwnd, InputMode mode, Int32 timestamp, RawMouseActions actions, Int32 x, Int32 and Int32 wheel) 
        in System.Windows.Interop.HwndMouseInputProvider.FilterMessage (IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean & handled) 
        in System.Windows.Interop.HwndSource.InputFilterMessage (IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean & handled) 
        in MS.Win32.HwndWrapper.WndProc (IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean & handled) 
        in MS.Win32.HwndSubclass.DispatcherCallbackOperation (Object o) 
        in System.Windows.Threading.ExceptionWrapper.InternalRealCall (Delegate callback, Object args, Boolean isSingleParameter) 
        in System.Windows.Threading.ExceptionWrapper.TryCatchWhen (Object source, Delegate callback, Object args, Boolean isSingleParameter, Delegate catchHandler) 
        in System.Windows.Threading.Dispatcher.WrappedInvoke (Delegate callback, Object args, Boolean isSingleParameter, Delegate catchHandler) 
        in System.Windows.Threading.Dispatcher.InvokeImpl (DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Boolean isSingleParameter) 
        in System.Windows.Threading.Dispatcher.Invoke (DispatcherPriority priority, Delegate method, Object arg) 
        in MS.Win32.HwndSubclass.SubclassWndProc (IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam) 
        in MS.Win32.UnsafeNativeMethods.DispatchMessage (MSG & msg) 
        in System.Windows.Threading.Dispatcher.PushFrameImpl (DispatcherFrame frame) 
        in System.Windows.Threading.Dispatcher.PushFrame (DispatcherFrame frame) 
        in System.Windows.Window.ShowHelper (Object booleanBox) 
        in System.Windows.Window.Show () 
        in System.Windows.Window.ShowDialog () 
   InnerException: 
```

***有这么难吗？:S***

            回答 #1

赞同：2

时间：2009-03-23T13:16:30.973

查看堆栈跟踪表明您正在使用 LINQ-to-SQL 查询作为列表框的数据源。看来您随后处置了在其上进行查询的 DataContext。当您在 DataView 上执行 Refresh() 时，它试图重新运行查询，但由于 DataContext 已释放而失败。

我怀疑您需要做的是将查询结果捕获到列表中，然后再将其绑定到 ItemsControl。您可以使用 ToList() 扩展方法来执行此操作。

        asp.net - 如何从用户控件处理页面事件？(VB.net)

ID：586755

赞同：4

时间：2009-02-25T16:30:38.793

标签：asp.net, vb.net, events, user-controls, page-lifecycle

我想在我的用户控件生命周期的“预加载”阶段执行一些代码。但是 preload 事件仅在 Page 对象上可用。所以，我在我的用户控件中添加了以下方法：

```
Private Sub Page_PreLoad(ByVal sender As Object, ByVal e As System.EventArgs) Handles Page.PreLoad 
```

但是，我知道会出现编译错误：“Handles 子句需要在包含类型或其基类型之一中定义的 WithEvents 变量”

由于 Page 属性是从 UserControl 继承的，我看不出这是如何轻松完成的。

任何帮助都感激不尽！

            回答 #1

赞同：5

时间：2009-02-25T16:59:10.643

~~我很抱歉给出了一个 C# 示例，但我不记得如何在 VB 中做到这一点......~~

无论如何，在您的 UserControl 的 Init 中，您可以显式地将 Page_PreLoad 方法指定为 UserControl 的 Page 属性的 PreLoad 事件的处理程序，而不是在方法声明中使用“Handles”语法。您的示例正在尝试将事件处理程序分配给 UserControl 对象上的事件，以处理 UserControl 对象未引发的事件。正如您所指出的，UserControl 不继承自 Page，这是 PreLoad 事件所在的位置。然而，UserControl 确实包含一个 Page 对象作为其属性之一，这反过来又将 PreLoad 作为一个事件公开，您可以为其分配一个处理程序。无论如何，这会编译并接近您正在寻找的内容（使用 C 风格的注释来保留 WMD 语法突出显示）。

```
Protected Overrides Sub OnInit(ByVal e As System.EventArgs)
    // this assigns Page_PreLoad as the event handler 
    // for the PreLoad event of the Control's Page property
    AddHandler Me.Page.PreLoad, AddressOf Page_PreLoad
    MyBase.OnInit(e)
End Sub

Private Sub Page_PreLoad(ByVal sender As Object, ByVal e As System.EventArgs)
    // do something here
End Sub 
```

I'm not sure if that serves your purpose--as Stephen Wrighton indicated above, there may be a better way with one of the different events in the page lifecycle. However, building on what he said, this should work because the control's OnInit is called in which the event handler assignment is made, then the Page's OnLoad event is raised and then the event handler within the control is executed.

            回答 #2

赞同：2

时间：2009-02-25T16:40:32.467

除非您选择 Jason 的选项，否则您要么被困在 INIT 事件（在加载 Viewstate 之前）或 PAGE LOAD 事件中执行操作。

我的问题是：有什么理由必须在 PreLoad 而不是 Load 事件中执行该操作？  

请记住，Preload 真正做的唯一事情是将 Viewstate 和 PostBack 数据加载到各种控件中（[有关生命周期的更多信息](http://msdn.microsoft.com/en-us/library/ms178472.aspx)）。

LOAD 事件将在任何控制事件（例如按钮单击）之前发生，因此您可能会很好地在那里执行您的操作。唯一的原因是，如果您不希望 PostBack 或 Viewstate 数据干扰您的流程（无论出于何种原因），那么在这种情况下，您可以利用 INIT 事件。

            回答 #3

赞同：0

时间：2009-02-25T16:33:02.470

为什么不创建一个方法来执行任何需要完成的预加载，并让您的页面调用该方法？

        iphone - Instruments：检查内存泄漏查询

ID：586759

赞同：1

时间：2009-02-25T16:31:05.827

标签：iphone, cocoa, cocoa-touch, memory-leaks

我很好奇，当有人继续执行他们的代码以使用 Instruments 进行泄漏检查时——手动点击应用程序的所有部分以确保在相应区域发生内存泄漏是否谨慎？例如，我相信我的应用程序中有一些内存泄漏，位于 UINavigationController 树的深处。我是否继续运行应用程序检查泄漏，同时在 iPhone 上手动向下钻取以获取应用程序的该部分？Instruments 是否足够聪明，可以自己找到它？正确的方法是什么？

感谢您的任何见解！

            回答 #1

赞同：5

时间：2009-02-25T16:42:58.200

不，Instruments 只是监视代码的内存分配，它不会“去”任何地方，除非你的应用程序去那里。实际上，泄漏只不过是一块内存，不再存在引用；因此它不能再被释放，因为如果你甚至不能再引用它，你将如何释放它？

不过，仪器不会以这种方式发现所有内存泄漏。如果您保留对内存的引用，只是永远不要使用它们来释放内存，I​​nstruments 不会将此视为泄漏，因为它无法预见您将来是否会释放它。由于您仍然可以释放它，因此它不被视为泄漏。因此，如果您遇到内存问题，不仅要查找泄漏，还要监控您的应用程序在一段时间内“收集”了多少内存，这可能是有益的。如果即使它不应该永久上升，您可能仍然有泄漏，只是没有丢失对内存的引用。

            回答 #2

赞同：1

时间：2009-02-25T16:46:00.533

通常，我会专注于怀疑导致泄漏的模块，然后再扩大范围。虽然我没有在 Mac 上使用 Instruments，但我使用 Purify 和本地 Windows 堆工具在 Windows 程序中进行内存泄漏跟踪。

在您确定了主要泄漏的来源之后，使用不同的测试输入运行程序并通常检查程序是否存在其他泄漏从来都不是一个坏主意。即使是特定数据集的小泄漏也可能导致更大的泄漏。

        php - 在 PHP 中使 file_get_contents() 会话感知

ID：586765

赞同：3

时间：2009-02-25T16:34:04.150

标签：php, session, curl, file-get-contents

序言：我的应用程序启用了 mod_rewrite，并且我有 index.php 页面，该页面基于 Request_URI 下载各种页面并将它们打印为页面内容。

问题：File() 或 File_get_contents() 函数非常适合下载我的其他应用程序页面。但是，一旦我尝试使用它来***下载启用会话的页面***，我就会开始遇到问题。

主要问题是，当我尝试从我下载的页面将现有会话 ID 传递给 url 时，例如

```
 $url = "http://localhost/EmplDir/AdminMenu.php";
  return implode('',file($url. "&" . session_name() . "=". session_id())); 
```

我的页面从不加载（或 file() 从不加载内容）。我怀疑我应该在这里使用 curl 函数，但它有太多选择。我建议使用哪个**curl 选项**使可下载页面了解当前的 PHP 会话会有所帮助。

PS 以上似乎适用于 Windows 和 Linux。

            回答 #1

赞同：3

时间：2009-02-25T16:37:04.190

您没有使用 ? 将查询字符串与 URL 的其余部分分开。

尝试

```
return file_get_contents($url. "?" . session_name() . "=". session_id()); 
```

您还需要确保服务器不使用[session.use-only-cookies](http://us.php.net/manual/en/session.configuration.php#ini.session.use-only-cookies)配置设置。

脚本没有理由不看到查询字符串并对其采取行动，您可以通过编写一个仅执行 var_dump($_GET) 的脚本并如上所述请求它来说服自己。如果您在输出中看到查询参数，那么您只需要调试您的脚本以查看为什么在给定会话 ID 的情况下它的行为不符合预期。

*注意：我假设您希望从与您的应用程序相同的域中请求文件，否则将会话 ID 用于远程站点并没有多大意义*。

            回答 #2

赞同：2

时间：2009-02-25T18:04:17.240

如果你的脚本没有改变任何[超全局变量](http://docs.php.net/manual/en/language.variables.superglobals.php)，你可以只包括它：

```
ob_start();
include $_SERVER['DOCUMENT_ROOT'].'/EmplDir/AdminMenu.php';
return ob_get_clean(); 
```

            回答 #3

赞同：0

时间：2009-02-25T17:13:46.147

`session_name`并`session_id`为您提供当前的脚本会话；不是删除服务器。你需要使用能理解http的东西。Curl 可以，或者您可以使用类似[SimpleBrowser](http://www.lastcraft.com/browser_documentation.php)的东西，它完全模拟了浏览器。

        mysql - 有没有一种方法可以使用一个选择来计算 MySQL 中的时间差

ID：586773

赞同：1

时间：2009-02-25T16:35:19.873

标签：mysql

我有一个包含以下内容的表格：

```
name    type
id    : INT
date1 : DATETIME
date2 : DATETIME 
```

我需要计算 date2 和 date1 之间的差异。

这可以使用 MySQL 中的[TIMEDIFF](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_timediff)函数。

但是，有没有办法使用一个选择而不是使用 2 个辅助选择来获得 TIMEDIFF(date2,date1) 的结果：

```
select TIMEDIFF( (select date2 from example_table where id=1) , (select date1 from example_table where id=1) ); 
```

            回答 #1

赞同：4

时间：2009-02-25T16:37:31.757

```
select TIMEDIFF( date2 ,date1) from example_table where id=1; 
```

        ruby-on-rails - Rails：单击下拉选项时提交（通过 AJAX）

ID：586774

赞同：12

时间：2009-02-25T16:35:24.850

标签：ruby-on-rails, ajax, ajax-forms, remote-forms

选择下拉框的选项时，自动提交 AJAX 表单的最简单和最优雅的方法是什么？我正在创建一个管理页面，管理员可以在其中修改用户权限（其中“权限”存储为整数），我希望“权限”字段是一个下拉框，当管理员自动提交和更新点击他希望用户拥有的选项。

这是我目前正在查看的精简版。我需要知道将其转换为单击选项时自动提交的远程表单的最佳方法。

随意指出任何不切实际的建议或其他任何东西......我对 Rails 比较陌生，只是达到了可以编写代码而无需经常参考他人工作的地步。

```
<!-- This is the "index" view, by the way. -->
<% for membership in @story.memberships %>
  <% form_for membership do |f| %>
    <%= f.select :permissions, [['none', 0], ['admin', 9]] %>
  <% end %>
<% end %> 
```

            回答 #1

赞同：15

时间：2009-02-26T04:18:10.887

有几种方法可以处理这个问题。当然，观察字段方法是一种，但您也可以使用简单的 javascript 或 remote_function 来做到这一点：

这是简单的JS方法：

```
<% remote_form_for membership do |f| %>
    <%= f.select :permissions, [['none', 0], ['admin', 9]], {}, :onchange => 'this.form.submit()' %>
<% end %> 
```

另一种方式是这样的，并且会避开表单构建器（这可能有几个语法错误）：

```
<%= select_tag(:permissions, [['none', 0], ['admin', 9]], {:onchange => "#{remote_function(:url  => permissions_path(:story_id => story,
             :with => "'permission='+value")}"}) 
```

我个人更喜欢前者。

            回答 #2

赞同：4

时间：2009-02-25T19:52:00.400

三步！

1.  做你`form_for`的[`remote_form_for`](http://api.rubyonrails.com/classes/ActionView/Helpers/PrototypeHelper.html#M001617)；加个身份证！
2.  [`observe_field`](http://api.rubyonrails.com/classes/ActionView/Helpers/PrototypeHelper.html#M001622)在你之后添加一个`select`
3.  配置您`observe_field`提交表单

最后一点看起来像：

```
<%= observe_field "id_of_select", :function => "$('form_id').submit();" %> 
```

            回答 #3

赞同：4

时间：2011-06-03T19:13:09.587

在 Rails 3 中：

```
<%= form_for(membership, :remote => true) do |f| %>`
  <%= f.select :permissions, [['none', 0], ['admin', 9]], {}, :onchange => 'this.form.submit();' %>
<% end %> 
```

请注意，它`this.form.submit();`不是 onsubmit。并且不要忘记 Javascript 分号。

            回答 #4

赞同：3

时间：2009-02-28T00:41:36.787

了解如何在没有 Rails 的情况下使用您选择的框架来完成它。使用 Rails 标记执行 AJAX 可以快速完成任务，但是当您需要更改有关标记执行方式的特定内容时可能会受到很大限制。

阅读有关 web 标准以及如何在这些网站上编写不显眼的 javascript：http:
 [//ajaxian.com/](http://ajaxian.com/) 
[http://www.alistapart.com/](http://www.alistapart.com/)

通过学习如何在没有 Rails 的情况下执行 AJAX，您将能够创建更灵活、更令人惊叹的 UI。  

            回答 #5

赞同：1

时间：2017-01-24T05:13:49.000

我正在使用 Rails 5，我也面临类似的情况，但在我的情况下，@scott 给出的答案没有`AJAX`按预期提交表单，尽管我`remote: true`在表单中添加了选项（表单中没有`submit`按钮） .

如果有人也面临类似的问题，请尝试像这样更改 JS 代码-

```
<% form_for membership remote: true, id: '#member_form' do |f| %>
  <%= f.select :permissions, [['none', 0], ['admin', 9]], onchange: '$("#member_form").trigger("submit");' %>
<% end %> 
```

希望这可以帮助..

        sql - PostgreSQL - 获取列的最大值的行

ID：586781

赞同：126

时间：2009-02-25T16:37:23.673

标签：sql, postgresql, query-optimization, cbo, cost-based-optimizer

我正在处理一个 Postgres 表（称为“lives”），其中包含带有 time_stamp、usr_id、transaction_id 和 live_remaining 列的记录。我需要一个查询，该查询将为我提供每个 usr_id 的最新 lives_remaining 总数

1.  有多个用户（不同的 usr_id）

2.  time_stamp 不是唯一标识符：有时用户事件（在表中逐行）会以相同的 time_stamp 发生。

3.  trans_id 仅在非常小的时间范围内是唯一的：随着时间的推移它会重复

4.  剩余寿命（对于给定用户）可以随时间增加和减少

例子：

```
time_stamp|lives_remaining|usr_id|trans_id
-----------------------------------------
  07:00 | 1 | 1 | 1    
  09:00 | 4 | 2 | 2    
  10:00 | 2 | 3 | 3    
  10:00 | 1 | 2 | 4    
  11:00 | 4 | 1 | 5    
  11:00 | 3 | 1 | 6    
  13:00 | 3 | 3 | 1    

```

因为我需要使用每个给定 usr_id 的最新数据访问行的其他列，所以我需要一个查询，它会给出如下结果：

```
time_stamp|lives_remaining|usr_id|trans_id
-----------------------------------------
  11:00 | 3 | 1 | 6    
  10:00 | 1 | 2 | 4    
  13:00 | 3 | 3 | 1    

```

如前所述，每个 usr_id 都可能获得或失去生命，有时这些带时间戳的事件发生得如此接近以至于它们具有相同的时间戳！因此，此查询将不起作用：

```
SELECT b.time_stamp,b.lives_remaining,b.usr_id,b.trans_id FROM 
      (SELECT usr_id, max(time_stamp) AS max_timestamp 
       FROM lives GROUP BY usr_id ORDER BY usr_id) a 
JOIN lives b ON a.max_timestamp = b.time_stamp 
```

相反，我需要同时使用 time_stamp（第一）和 trans_id（第二）来识别正确的行。然后，我还需要将该信息从子查询传递到主查询，主查询将为相应行的其他列提供数据。这是我已经开始工作的黑客查询：

```
SELECT b.time_stamp,b.lives_remaining,b.usr_id,b.trans_id FROM 
      (SELECT usr_id, max(time_stamp || '*' || trans_id) 
       AS max_timestamp_transid
       FROM lives GROUP BY usr_id ORDER BY usr_id) a 
JOIN lives b ON a.max_timestamp_transid = b.time_stamp || '*' || b.trans_id 
ORDER BY b.usr_id 
```

好的，所以这行得通，但我不喜欢它。它需要一个查询中的一个查询，一个自连接，在我看来，通过抓取 MAX 发现具有最大时间戳和 trans_id 的行可以更简单。表“lives”有数千万行要解析，所以我希望这个查询尽可能快速和高效。我尤其是 RDBM 和 Postgres 的新手，所以我知道我需要有效地使用正确的索引。我对如何优化有点迷茫。

[我在这里](https://stackoverflow.com/questions/121387/sql-fetch-the-row-which-has-the-max-value-for-a-column)找到了类似的讨论。我可以执行某种与 Oracle 分析功能等效的 Postgres 类型吗？

任何有关访问聚合函数（如 MAX）使用的相关列信息、创建索引和创建更好的查询的建议将不胜感激！

PS您可以使用以下内容创建我的示例案例：

```
create TABLE lives (time_stamp timestamp, lives_remaining integer, 
                    usr_id integer, trans_id integer);
insert into lives values ('2000-01-01 07:00', 1, 1, 1);
insert into lives values ('2000-01-01 09:00', 4, 2, 2);
insert into lives values ('2000-01-01 10:00', 2, 3, 3);
insert into lives values ('2000-01-01 10:00', 1, 2, 4);
insert into lives values ('2000-01-01 11:00', 4, 1, 5);
insert into lives values ('2000-01-01 11:00', 3, 1, 6);
insert into lives values ('2000-01-01 13:00', 3, 3, 1); 
```

            回答 #1

赞同：128

时间：2015-06-11T08:40:41.567

我会提出一个基于`DISTINCT ON`（参见[文档](http://www.postgresql.org/docs/9.3/static/sql-select.html#SQL-DISTINCT)）的干净版本：

```
SELECT DISTINCT ON (usr_id)
    time_stamp,
    lives_remaining,
    usr_id,
    trans_id
FROM lives
ORDER BY usr_id, time_stamp DESC, trans_id DESC; 
```

            回答 #2

赞同：113

时间：2009-02-26T01:19:08.867

在有 158k 伪随机行的表上（usr_id 均匀分布在 0 和 10k 之间，`trans_id`均匀分布在 0 和 30 之间），

*通过查询成本，下面，我指的是 Postgres 基于成本的优化器的成本估算（使用 Postgres 的默认`xxx_cost`值），它是对所需 I/O 和 CPU 资源的加权函数估算；您可以通过启动 PgAdminIII 并在“查询/解释选项”设置为“分析”的查询上运行“查询/解释 (F7)”来获得此信息*

*   Quassnoy 的查询的成本估计为 745k (!)，并在 1.3 秒内完成（给定 ( `usr_id`, `trans_id`, `time_stamp`) 上的复合索引）
*   Bill 的查询的成本估计为 93k，并在 2.9 秒内完成（给定 ( `usr_id`, `trans_id`) 上的复合索引）
*   **下面的查询 #1**的成本估计为 16k，并在 800 毫秒内完成（给定 ( `usr_id`, `trans_id`, `time_stamp`) 上的复合索引）
*   **下面的查询 #2**的成本估计为 14k，并在 800 毫秒内完成（给定 ( `usr_id`, `EXTRACT(EPOCH FROM time_stamp)`, `trans_id`) 上的复合函数索引）

    *   这是 Postgres 特有的

*   **下面的查询 #3** (Postgres 8.4+) 的成本估算和完成时间与查询 #2 相当（或更好）（给定 ( `usr_id`, `time_stamp`, `trans_id`) 上的复合索引）；它的优点是`lives`只扫描一次表，如果您临时增加（如果需要）[work_mem](http://www.postgresql.org/docs/current/static/runtime-config-resource.html#GUC-WORK-MEM)以适应内存中的排序，它将是迄今为止所有查询中最快的。

以上所有时间都包括检索完整的 10k 行结果集。

您的目标是最小成本估算*和*最小查询执行时间，重点是估算成本。查询执行可能很大程度上取决于运行时条件（例如，相关行是否已经完全缓存在内存中），而成本估计则不然。另一方面，请记住，成本估算正是一个估算。

最佳查询执行时间是在无负载的专用数据库上运行时获得的（例如，在开发 PC 上使用 pgAdminIII）。查询时间将根据实际机器负载/数据访问分布在生产中有所不同。当一个查询看起来比另一个查询稍快（<20%）但成本高*得多*时，选择执行时间更长但成本更低的查询通常会更明智。

如果您希望在运行查询时生产机器上不会有内存竞争（例如，RDBMS 缓存和文件系统缓存不会被并发查询和/或文件系统活动破坏），那么您获得的查询时间在独立模式下（例如开发 PC 上的 pgAdminIII）模式将具有代表性。如果生产系统存在争用，查询时间将与估计的成本比率成比例下降，因为成本较低的查询不那么依赖缓存*，而*成本较高的查询将一遍又一遍地重新访问相同的数据（触发在没有稳定缓存的情况下额外的 I/O），例如：

```
 cost | time (dedicated machine) |     time (under load) |
-------------------+--------------------------+-----------------------+
some query A:   5k | (all data cached)  900ms | (less i/o)     1000ms |
some query B:  50k | (all data cached)  900ms | (lots of i/o) 10000ms | 
```

**不要忘记`ANALYZE lives`在创建必要的索引后运行一次。**

**查询 #1**

```
-- incrementally narrow down the result set via inner joins
--  the CBO may elect to perform one full index scan combined
--  with cascading index lookups, or as hash aggregates terminated
--  by one nested index lookup into lives - on my machine
--  the latter query plan was selected given my memory settings and
--  histogram
SELECT
  l1.*
 FROM
  lives AS l1
 INNER JOIN (
    SELECT
      usr_id,
      MAX(time_stamp) AS time_stamp_max
     FROM
      lives
     GROUP BY
      usr_id
  ) AS l2
 ON
  l1.usr_id     = l2.usr_id AND
  l1.time_stamp = l2.time_stamp_max
 INNER JOIN (
    SELECT
      usr_id,
      time_stamp,
      MAX(trans_id) AS trans_max
     FROM
      lives
     GROUP BY
      usr_id, time_stamp
  ) AS l3
 ON
  l1.usr_id     = l3.usr_id AND
  l1.time_stamp = l3.time_stamp AND
  l1.trans_id   = l3.trans_max 
```

**查询 #2**

```
-- cheat to obtain a max of the (time_stamp, trans_id) tuple in one pass
-- this results in a single table scan and one nested index lookup into lives,
--  by far the least I/O intensive operation even in case of great scarcity
--  of memory (least reliant on cache for the best performance)
SELECT
  l1.*
 FROM
  lives AS l1
 INNER JOIN (
   SELECT
     usr_id,
     MAX(ARRAY[EXTRACT(EPOCH FROM time_stamp),trans_id])
       AS compound_time_stamp
    FROM
     lives
    GROUP BY
     usr_id
  ) AS l2
ON
  l1.usr_id = l2.usr_id AND
  EXTRACT(EPOCH FROM l1.time_stamp) = l2.compound_time_stamp[1] AND
  l1.trans_id = l2.compound_time_stamp[2] 
```

**2013/01/29 更新**

最后，从 8.4 版开始，Postgres 支持[窗口函数](http://www.postgresql.org/docs/8.4/static/functions-window.html#FUNCTIONS-WINDOW-TABLE)，这意味着您可以编写如下简单高效的东西：

**查询 #3**

```
-- use Window Functions
-- performs a SINGLE scan of the table
SELECT DISTINCT ON (usr_id)
  last_value(time_stamp) OVER wnd,
  last_value(lives_remaining) OVER wnd,
  usr_id,
  last_value(trans_id) OVER wnd
 FROM lives
 WINDOW wnd AS (
   PARTITION BY usr_id ORDER BY time_stamp, trans_id
   ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING
 ); 
```

            回答 #3

赞同：10

时间：2009-02-25T18:26:32.650

这是另一种方法，恰好不使用相关子查询或 GROUP BY。我不是 PostgreSQL 性能调优方面的专家，所以我建议你试试这个和其他人给出的解决方案，看看哪个更适合你。

```
SELECT l1.*
FROM lives l1 LEFT OUTER JOIN lives l2
  ON (l1.usr_id = l2.usr_id AND (l1.time_stamp < l2.time_stamp 
   OR (l1.time_stamp = l2.time_stamp AND l1.trans_id < l2.trans_id)))
WHERE l2.usr_id IS NULL
ORDER BY l1.usr_id; 
```

我假设它`trans_id`至少在任何给定的值上都是唯一的`time_stamp`。

            回答 #4

赞同：7

时间：2010-06-15T06:46:22.403

我喜欢您提到的另一页上[迈克伍德豪斯的回答风格。](https://stackoverflow.com/questions/121387/sql-fetch-the-row-which-has-the-max-value-for-a-column/123511#123511)当被最大化的东西只是一个列时，它特别简洁，在这种情况下，子查询可以只使用其他列`MAX(some_col)`，`GROUP BY`但是在你的情况下，你有一个两部分的数量要最大化，你仍然可以通过使用来做到这一点`ORDER BY`加上`LIMIT 1`代替（正如Quassnoi所做的那样）：

```
SELECT * 
FROM lives outer
WHERE (usr_id, time_stamp, trans_id) IN (
    SELECT usr_id, time_stamp, trans_id
    FROM lives sq
    WHERE sq.usr_id = outer.usr_id
    ORDER BY trans_id, time_stamp
    LIMIT 1
) 
```

我发现使用 row-constructor 语法`WHERE (a, b, c) IN (subquery)`很好，因为它减少了所需的废话量。

            回答 #5

赞同：6

时间：2018-06-28T07:38:30.727

Postgressql 9.5 中有一个名为 DISTINCT ON 的新选项

```
SELECT DISTINCT ON (location) location, time, report
    FROM weather_reports
    ORDER BY location, time DESC; 
```

它消除了重复的行，只留下 ORDER BY 子句定义的第一行。

见官方[文档](https://www.postgresql.org/docs/9.5/static/sql-select.html#SQL-DISTINCT) 

            回答 #6

赞同：4

时间：2013-01-18T00:04:58.977

实际上，这个问题有一个 hacky 解决方案。假设您要选择一个区域中每个森林中最大的树。

```
SELECT (array_agg(tree.id ORDER BY tree_size.size)))[1]
FROM tree JOIN forest ON (tree.forest = forest.id)
GROUP BY forest.id 
```

当您按森林对树木进行分组时，将会有一个未排序的树木列表，您需要找到最大的树木。您应该做的第一件事是按行的大小对行进行排序，然后选择列表中的第一个。它可能看起来效率低下，但如果您有数百万行，它将比包含`JOIN`'s 和`WHERE`条件的解决方案快得多。

顺便说一句，请注意`ORDER_BY`for`array_agg`是在 Postgresql 9.0 中引入的

            回答 #7

赞同：1

时间：2009-02-25T17:01:15.817

```
SELECT  l.*
FROM    (
        SELECT DISTINCT usr_id
        FROM   lives
        ) lo, lives l
WHERE   l.ctid = (
        SELECT ctid
        FROM   lives li
        WHERE  li.usr_id = lo.usr_id
        ORDER BY
          time_stamp DESC, trans_id DESC
        LIMIT 1
        ) 
```

在上创建索引`(usr_id, time_stamp, trans_id)`将大大改进此查询。

`PRIMARY KEY`你应该总是，总是在你的桌子上有某种东西。

            回答 #8

赞同：1

时间：2019-12-12T05:40:01.070

你可以用窗口函数来做

```
SELECT t.*
FROM
    (SELECT
        *,
        ROW_NUMBER() OVER(PARTITION BY usr_id ORDER BY time_stamp DESC) as r
    FROM lives) as t
WHERE t.r = 1 
```

            回答 #9

赞同：0

时间：2009-02-26T01:48:25.020

我认为您在这里遇到了一个主要问题：没有单调递增的“计数器”来保证给定行发生的时间晚于另一行。举个例子：

```
timestamp   lives_remaining   user_id   trans_id
10:00       4                 3         5
10:00       5                 3         6
10:00       3                 3         1
10:00       2                 3         2 
```

您无法从该数据中确定哪个是最新条目。是第二个还是最后一个？没有排序或 ma​​x() 函数可以应用于任何这些数据来给你正确的答案。

增加时间戳的分辨率将是一个巨大的帮助。由于数据库引擎对请求进行序列化，因此通过足够的分辨率，您可以保证没有两个时间戳相同。

或者，使用在很长一段时间内都不会翻转的 trans_id。拥有翻转的 trans_id 意味着您无法判断（对于相同的时间戳） trans_id 6 是否比 trans_id 1 更新，除非您进行一些复杂的数学运算。

        sharepoint - 日期时间十六进制格式

ID：586784

赞同：4

时间：2009-02-25T16:38:05.233

标签：sharepoint, datetime

转换 SPListItem 的日期时，我得到一个十六进制字符串。

例如。“0x01c9d2be|0x809a8800”

[这个问题回答了它。](https://stackoverflow.com/questions/521078/splistitem-properties-datetime-fields-are-in-weird-hex-format) 

但是，转换它的正确方法是什么， DateTime 对象的格式是什么？如果我想设置日期时间怎么办？我是否必须将其转换为十六进制格式并将其分配为十六进制字符串？

必须有一种更好更理想的方法来提取修改 DateTime 对象。

有任何想法吗？

谢谢。

            回答 #1

赞同：3

时间：2009-02-26T15:38:40.967

我能够提取日期和时间。没关系。

因此，当您修改 ListItem 的 DateTime 时，只需将其指定为 DateTime 格式，它就会正确解释它；无需生成它返回的十六进制。

            回答 #2

赞同：2

时间：2009-02-26T08:57:34.583

.NET 中的 DateTime 值也可以表示为 64 位值。SharePoint 列表项上的 DateTime 字段上的奇怪字符串格式是这种 64 位值编码为两个 32 位十六进制值的变体。我没有找到来自 Microsoft 的关于这种格式的文档。但通过反复试验，我发现了以下转换方法：

```
string[] words = strVal.Split('|');
int high = int.Parse(words[0].Substring(2), System.Globalization.NumberStyles.HexNumber);
uint low = uint.Parse(words[1].Substring(2), System.Globalization.NumberStyles.HexNumber);
long ticks = high;
ticks = ticks << 32;
ticks += low;
DateTime t = new DateTime(ticks);
t = t.AddYears(1600); 
```

其中 t 保存结果。

            回答 #3

赞同：1

时间：2013-05-20T12:22:59.403

可以在这里找到另一个解决方案。它与 Office 2007 如何存储日期有关
[。SPListItem.Properties DateTime 字段采用奇怪的十六进制格式](https://stackoverflow.com/questions/521078/splistitem-properties-datetime-fields-are-in-weird-hex-format)

        websphere - RAD 7.5.1 中的 WAS7 系统属性

ID：586785

赞同：5

时间：2009-02-25T16:38:09.133

标签：websphere, rad

我在 WSAD 5.1.2 中有一个旧项目，其 WAS4 服务器配置位于 .wsi 文件中。如果我双击它，我会得到服务器配置编辑器，并且在环境选项卡上有一个系统属性部分，其中包含一些名称-值对。

现在我在 RAD 7.5.1 中打开了同一个项目。我可以在哪里为 RAD 7.5.1 中的服务器输入相同的名称-值对？如果我双击我的服务器，则没有“环境选项卡”，只有“概述”选项卡。

            回答 #1

赞同：9

时间：2009-03-02T08:34:26.040

我终于在管理网络界面中找到了正确的方法......

应用程序服务器 > myServer > 进程定义 > Java 虚拟机 > 自定义属性

            回答 #2

赞同：1

时间：2014-04-23T19:33:28.513

在 RAD 7.5.4 中，JVM 名称值对存储在服务器 --> 应用程序服务器 --> java 和进程管理 --> 进程定义 --> java 虚拟机 --> 自定义属性中

在这里，您可以使用 System get properties 函数创建一个可供 Java 代码使用的新名称值对。

            回答 #3

赞同：0

时间：2009-02-26T06:58:09.470

显然，IBM 从 RAD/RSA6 开始推出真正的应用程序服务器，而不是 WSAD 附带的测试服务器。因此，要配置应用服务器，只需像往常一样使用 Web 管理界面。

感谢 Jeanne Boyarsky 在[The Java Ranch](http://www.javaranch.com/ "爪哇牧场")论坛上的回答。

我要移植的旧应用程序需要 JVM 集的系统属性中的一些属性，以便可以使用 System.getProperty(...) 检索它们，我发现了一种使其工作的肮脏方式。所以，在我找到正确的方法之前，如果有正确的方法，我想出了这个技巧：

在应用服务器的配置文件目录中执行一些“查找”和“grep”后，我找到了一个名为：
`runtimes\base_v7\profiles\<profilename>\config\cells\<cellname>\nodes\<nodename>\servers\<servername>\server.xml`

server.xml 的底部有一个`<jvmEntries xmi:id="JavaVirtualMachine_....`标签。

在其中，您可以在格式上添加系统属性标签：
`<systemProperties xmi:id="someId" name="name of your property" value="the value" required="false"/>`

任何知道如何以正确的方式做到这一点并且已经读到这里的人现在一定要哭了...... :) 但是，它似乎可以工作......

        asp.net - 消除临时 ASP.Net 文件

ID：586790

赞同：9

时间：2009-02-25T16:39:41.033

标签：asp.net, temporary-files

如何防止 ASP.NET 创建过多的临时文件？我的网站创建了千兆字节的临时文件，并且溢出了服务器上的主分区。我该如何防止这种情况发生？

            回答 #1

赞同：7

时间：2009-02-26T22:08:39.767

这些临时文件在哪里生成？

如果它位于“Temporary ASP.NET Files”文件夹中，则它是您的应用程序重新编译的结果。查看[MSDN](http://msdn.microsoft.com/en-us/library/ms366723.aspx)以获取有关动态编译的更多信息。一种可能的解决方案是[重新定位](http://blog.cwa.me.uk/2007/10/15/relocating-temporary-aspnet-files/)临时目录。

您可以尝试[预编译](http://msdn.microsoft.com/en-us/library/ms227976.aspx)您的网站以避免生成临时文件。

            回答 #2

赞同：6

时间：2009-02-25T16:42:03.117

在任务计划程序中设置一个任务来清理临时文件。我不知道为什么操作系统（或这些文件的创建者）没有这样做。

        c++ - 计算从客户端发送到服务器的数据包数量？

ID：586799

赞同：1

时间：2009-02-25T16:41:24.447

标签：c++, winapi, sockets, winsock, winsockets

所以我几乎完成了一项涉及 Win32 编程和套接字的任务，但我必须生成和分析一些有关传输的统计信息。我唯一遇到的问题是如何计算从客户端发送到服务器的数据包数量。

发送的数据可以是可变长度的，所以我不能只将接收到的总字节数除以#define'd 值。

我们必须使用异步调用来做所有事情，所以我一直在尝试用我为服务器套接字获得的每条 FD_READ 消息增加一个计数器。但是，因为我必须能够接受可能很大的文件大小，所以我必须使用大约 64k 的缓冲区大小调用 recv/recvfrom。如果我发送一个小数据包（az），则没有问题。但是，如果我发送 1024 个字符的字符串 10 倍，服务器会报告收到 2 或 3 个数据包，但就发送/接收的字节而言，数据丢失率为 0%。

知道如何获取数据包的数量吗？

提前致谢 ：）

            回答 #1

赞同：1

时间：2009-02-25T20:06:23.907

这真的归结为你所说的“数据包”。

您可能知道，当通过网络发送 TCP/UDP 消息时，发送的数据会被“包装”或附加在相应的 TCP/UDP 标头中。然后将其“包装”在 IP 标头中，该标头又“包装”在以太网帧中。如果你使用像 Wireshark 这样的嗅探包，你可以看到这个突破。

重点是这个。当我听到“数据包”这个词时，我会想到 IP 级别的数据。IP 数据是真正在线上打包的，因此在谈论 IP 时，数据包计数是有意义的。但是，如果您使用常规套接字来发送和接收数据，那么 IP 标头以及 TCP/UDP 标头将被剥离，也就是说，您不会从套接字中获取此信息。如果没有这些信息，就不可能确定传输的“数据包”（再次，我认为是 IP）的数量。

您可以通过添加您自己的带有长度和计数器的标题来执行其他人的建议。此信息将帮助您准确地确定接收缓冲区的大小，但它不会帮助您确定数据包的数量（同样，IP...），尤其是在您使用 TCP 时。

如果您想准确确定使用 Winsock 套接字的数据包数量，我建议按照[此处](http://www.codeproject.com/KB/IP/sniffer.aspx)的建议创建一个“原始”套接字。此套接字将收集本地 NIC 看到的所有 IP 流量。使用 IP 和 TCP/UDP 标头根据您的客户端和服务器套接字（即 IP 地址和端口号）过滤数据。这将准确了解实际使用了多少 IP 数据包来传输数据。

            回答 #2

赞同：0

时间：2009-02-25T17:46:22.527

不是对您的问题的直接回答，而是对不同解决方案的建议。   

如果您在要传输的数据前面发送一个长度描述符怎么办？这样您就可以在客户端上分配正确的缓冲区大小（不要太多，也不要太少），并检查传输结束时是否有任何损失。

使用 TCP，您应该完全没有问题，因为协议本身处理无错误传输，否则您应该得到一个有意义的错误。

也许使用 UDP，您还可以将传输拆分为具有适当序列 ID 的固定大小的块。在对它们进行排序之前，您必须累积所有传入的包（UDP 不保证接收顺序）并将数据粘贴在一起。

另一方面，如果真的有必要支持 UDP，你应该考虑一下，因为如果你想获得该协议的错误安全，那么会有相当多的手动开销......（有关问题列表，请参阅[关于 TCP 的维基百科文章](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#Data_transfer)绕过）

            回答 #3

赞同：0

时间：2009-02-25T18:35:37.213

您的数据包是否具有固定的标头，或者您是否可以定义自己的标头。如果您可以自己定义，请在标头中包含一个数据包计数器以及长度。您必须在计数器中保留一个计算翻转的运行总数，但这将确保您计算发送的数据包，而不是接收的数据包。对于一个简单的分配，您可能不会遇到丢失（显然是使用 UDP），但如果是这样，数据包计数器将确保您的统计信息准确地反映发送的消息。

        diagram - .net 或 php 是否有开源径向图类？

ID：586804

赞同：0

时间：2009-02-25T16:42:54.783

标签：diagram, radial

我找不到任何会生成径向图的库。我说的是 .net 或 php，但它可能是 jQuery，我从 Web 服务中提取数据。我还不知道如何实现它。我只是在寻找一个径向图开源项目。我已经搜索并找不到任何东西。

我知道思维导图，但看不到如何在构建应用程序时使用它。

感谢您的任何帮助。

            回答 #1

赞同：0

时间：2009-02-25T16:52:06.307

[pChart](http://pchart.sourceforge.net/index.php)是一个很棒的 php 图表/charp/pie 等图形类。（不太确定径向图）

你也可以使用[php-gnuplot](http://php-gnuplot.sourceforge.net/)，一个非常强大的绘图软件。

        visual-studio-2008 - 如何使用 Visual Studio 2008 Profiler Tool(s) 分析一个库解决方案？

ID：586813

赞同：3

时间：2009-02-25T16:45:59.550

标签：visual-studio-2008, profiler

我已经阅读并练习了[MSDN 的 Profiler Tutorial](http://msdn.microsoft.com/en-us/library/ms182398.aspx)。但我找不到分析库解决方案的方法（库禁用了“使用分析启动”按钮）。

1.  到目前为止，我能想到的唯一解决方案是创建一个仅用于分析目的的可执行项目。
2.  **我已经使用 Visual Studio Team System 的测试框架为我的库编写了单元测试，所以我想我可以将它们用于配置文件，就像 Rick Minerich 对 NUnit 所做的那样。**

谁能指出我正确的方向？

            回答 #1

赞同：4

时间：2009-03-03T17:27:21.990

可以使用您的测试进行分析。您只需在启动测试的任何地方运行探查器，并将您的要探查的程序集指定为探查器目标。但是，如果不确切知道您用于测试和分析的基础架构，则几乎不可能为您指明解决方案。

因为我使用的是 NUnit，所以我将使用它作为示例。您可以创建一个测试类别并将其称为配置文件测试。然后，您可以使用 /include 命令行选项从探查器运行 nunit.exe 来指定这些测试：

```
nunit-console myassembly.dll /include:Profile 
```

您可以使用分析-> 性能向导来执行此操作。dll 路径将是您的程序集，而可执行路径将是上面提到的 nunit-console 命令行。

我还知道[ReSharper 为 Visual Studio 添加了扩展来为您执行此操作](http://www.jetbrains.com/resharper/features/unit_testing.html)。有了它，您只需右键单击一个测试并选择“Profile TESTNAME”。虽然确实要花钱，但我认为您可以查看评估版本。

另外，请注意，请务必使用 Release 库进行概要分析。发布和调试通常有很多不同的性能配置文件。

            回答 #2

赞同：0

时间：2009-03-03T17:03:32.890

分析是一种运行时技术，所以如果我理解得很好，你必须*运行*你的软件，这样你才能*运行时*分析它。

您也不能正常运行库，最简单的选择是运行测试或创建使用该库的简单 exe。您可以仅检测 dll，以便仅在您想要的位置进行分析。

            回答 #3

赞同：0

时间：2009-03-03T17:07:49.010

这没有多大意义。Visual Studio 探查器不会对您的代码执行静态分析来报告它的速度。它允许您运行它，并检测代码或对运行的代码进行采样，以估计每个代码部分需要多长时间。

鉴于此，您将如何描述您的图书馆？Visual Studio 如何知道您的测试，以及您想要运行哪些测试以进行分析？

回答：你制作一个可执行文件并调用这些测试，它就是这样知道的。

            回答 #4

赞同：0

时间：2009-03-06T13:23:48.400

默认情况下，所有项目都必须进行程序测试。这是练习代码更容易的模式。现在您应该考虑涵盖所有条目的可能性。他还将使用覆盖工具。

            回答 #5

赞同：0

时间：2010-01-07T23:18:41.230

实际上，您可以将任何可执行文件添加到目标列表（右键单击目标）。

Program.cs 的文本非常简单：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Reflection;

namespace ConsoleTest
{
    class Program
    {
        static void Main(string[] args)
        {
            YourDllLibrary.Tests.TestClass t = new YourDllLibrary.Tests.TestClass();
            t.Init();
            MethodInfo[] m = t.GetType().GetMethods();
            for (int i = 0; i < m.Length; i++)
            {
                MethodInfo mi = m[i];

                if (mi.DeclaringType.Name != t.GetType().Name )
                    continue;

                if(Attribute.GetCustomAttribute(mi, 
                    typeof(Microsoft.VisualStudio.TestTools.UnitTesting.TestMethodAttribute)) == null)
                    continue;

                try
                {
                    Console.Write(mi.Name + " - ");
                    mi.Invoke(t, null);
                    Console.WriteLine("passed");
                }
                catch
                {
                    Console.WriteLine("failed");
                }
            }
        }

    }
} 
```

        css - 已选择 GWT StackPanel

ID：586817

赞同：1

时间：2009-02-25T16:48:09.437

标签：css, gwt

我似乎无法设置所选堆栈面板的 CSS，而不会被未选择的 CSS 覆盖。如果我不选择未选择的，选定的堆栈面板将正确覆盖，但如果我定义自己的，则不会。这是一个错误，还是一些“按预期工作”的东西？

在这里我设置了我的 CSS：

```
.gwt-StackPanel .gwt-StackPanelItem-selected {
        background: url('images/toggle-o.gif');

}

.gwt-StackPanel .gwt-StackPanelItem {
        font-weight: bold;
        font-size: 8pt;
        width: 400px;
        /*background: url('images/toggle-c.gif');*/
        background-color: #EEE;
        background-position: top right;
        background-repeat: no-repeat;

} 
```

不幸的是，我选择的面板不知何故被第一个面板的 CSS 覆盖。有什么帮助吗？这是一个错误吗？如果我不理`.gwt-StackPanel .gwt-StackPanelItem`会它，它会使用 GWT css，然后会正确继承我选择的 CSS，但仅此而已。

            回答 #1

赞同：1

时间：2009-02-25T18:10:58.147

我的问题是 CSS 的顺序。它们的权重相同，因此最后一个优先。颠倒顺序，问题解决。

        c# - 当逻辑需要 C# 和 Javascript 实现时如何保持 DRY？

ID：586818

赞同：5

时间：2009-02-25T16:48:34.227

标签：c#, javascript, dry

我目前正在使用 ASP.NT MVC RC1 来实现一个基本的时间表应用程序。我想遵循 DRY 原则，但在一种特殊情况下很难做到：

我的一个观点，实际上是部分观点，有许多文本框，代表在特定任务上花费的小时数，一周中每天一个文本框。当我最初加载页面时，我希望视图中有一个文本框来显示所有这些小时的总数。此外，我希望在更改文本框中的值时更新该总数。对文本框的更新不会导致完整的回发，只会导致对结果不做任何事情的 AJAX 回发（回发会更新 DB 上的值，但返回的 ActionResult 是 EmptyResult，因为我不需要在用户界面）。

目前，我让控制器创建一个视图，该视图填充了该视图的“总计”，因此添加所有值的逻辑位于 C# 控制器中。在 UI 方面，我有更新 UI 级别总数的 javascript。但这不好，因为如果我改变计算总数的逻辑，我必须在两个地方改变它！啊！不干燥！

那么，我该怎么做呢？到目前为止，我唯一的答案是废弃计算 UI 上总数的 javascript 代码，而是让 AJAX 回发返回该视图的新“总数”。

还有其他方法吗？

            回答 #1

赞同：3

时间：2009-02-25T19:56:29.670

您可以尝试[Nikhil Kothari 的 Script# 项目](http://projects.nikhilk.net/ScriptSharp/)。它是一个交叉编译器，可将 C# 编译并转换为独立于浏览器的 javascript，让您共享逻辑。它被微软内部的许多团体正是为了这个目的而使用的。

更多，来自网站：

Script# 为 Ajax 和 JavaScript 开发带来了生产力。Script# 是一个免费工具，使开发人员能够编写 C# 源代码，然后将其编译为适用于所有现代浏览器的常规脚本，并在此过程中利用现有 .NET 工具以及 Visual Studio IDE 的生产力和功能. Script# 为您提供了一种开发方法和方法，为您的 Ajax 应用程序、组件和框架带来了软件工程、长期可维护性和可扩展的开发方法。

Script# 被 Microsoft 内部的开发人员广泛使用，以在 Windows Live、Office 中构建 Ajax 体验（仅举几例），以及包括 Facebook 在内的外部开发人员和公司。如果您正在构建基于 Ajax 的 RIA 应用程序，那么您应该立即尝试 Script#，看看它是否有助于改进您自己的 Ajax 开发！

            回答 #2

赞同：1

时间：2009-02-25T17:01:57.937

在最严格的意义上，在 C# 和 Javascript 中计算总时间的逻辑并不是 DRY，这是真的。人们可能会因为它们是在两个不同环境中运行的两种不同语言这一事实​​而分心，但归根结底，如果您更改其中一种，则必须同时更改两者。

我认为这是形式和功能之间的权衡。拥有 javascript 有多重要？如果 AJAX 调用太慢（一种真正的可能性），那么这可能是时候意识到 DRY 原则是指导原则，而不是法律。

            回答 #3

赞同：0

时间：2009-02-25T16:59:30.767

如果您希望代码在服务器和客户端上都执行，您可以使用/编写表达式树到 JavaScript 编译器。

在服务器端，您评估表达式并将翻译成 JavaScript 的相同表达式发送到客户端。

        c# - 如何检测协议缓冲区消息何时被完全接收？

ID：586819

赞同：7

时间：2009-02-25T16:48:34.723

标签：c#, networking, sockets, protocol-buffers

[这是我的另一个问题](https://stackoverflow.com/questions/582550/c-begin-endreceive-how-do-i-read-large-data)的一个分支。如果您愿意，请阅读它，但这不是必需的。

基本上，我意识到，为了在大型消息上有效地使用 C# 的 BeginReceive()，我需要 (a) 先读取数据包长度，然后准确读取那么多字节，或者 (b) 使用数据包结尾分隔符。我的问题是，这些中的任何一个都存在于协议缓冲区中吗？我还没有使用它们，但是查看文档似乎没有长度标题或分隔符。

如果没有，我该怎么办？我应该只构建消息然后使用长度标头/EOP 分隔符为其添加前缀/后缀吗？

            回答 #1

赞同：15

时间：2009-02-25T17:33:21.620

您需要在协议中包含大小或结束标记。基于流的套接字 (TCP/IP) 除了支持任意分解成单独数据包的不确定八位位组流（并且数据包在传输过程中也可能溢出）外，没有内置任何内容。

一个简单的方法是让每个“消息”都有一个固定大小的标头，包括协议版本和有效负载大小以及任何其他固定数据。然后是消息内容（有效载荷）。

可选地，可以添加带有校验和甚至加密签名的消息页脚（固定大小）（取决于您的可靠性/安全性要求）。

知道有效负载大小可以让您继续读取足够用于其余消息的字节数（如果读取完成时较少，则对剩余字节进行另一次读取，直到收到整个消息）。

有一个结束消息指示器也可以，但是您需要定义如何处理包含相同八位字节序列的消息...

            回答 #2

赞同：6

时间：2009-03-26T08:33:29.677

Apologies for arriving late at the party. I am the author of protobuf-net, one of the C# implementations. For network usage, you should consider the "[De]SerializeWithLengthPrefix" methods - that way, it will automatically handle the lengths for you. There are examples in the source.

I won't go into huge detail on an old post, but if you want to know more, add a comment and I'll get back to you.

            回答 #3

赞同：3

时间：2009-03-01T06:04:23.350

I agree with Matt that a header is better than a footer for Protocol Buffers, for the primary reason that as PB is a binary protocol it's problematic to come up with a footer that would not also be a valid message sequence. A lot of footer-based protocols (typically EOL ones) work because the message content is in a defined range (typically 0x20 - 0x7F ASCII).

A useful approach is to have your lowest level code just read buffers off of the socket and present them up to a framing layer that assembles complete messages and remembers partial ones (I present an async approach to this (using the CCR) [here](http://iodyner.spaces.live.com/blog/cns!7B505254340D5E9A!180.entry), albeit for a line protocol).

For consistency, you could always define your message as a PB message with three fields: a fixed-int as the length, an enum as the type, and a byte sequence that contains the actual data. This keeps your entire network protocol transparent. 

            回答 #4

赞同：1

时间：2009-03-01T05:32:43.567

TCP/IP 以及 UDP 数据包包含一些对其大小的参考。[IP 报头](http://en.wikipedia.org/wiki/IPv4)包含一个 16 位字段，用于指定 IP 报头*和*数据的长度（以字节为单位）。[TCP 标头](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)包含一个 4 位字段，以 32 位字指定 TCP 标头的大小。[UDP 标头](http://en.wikipedia.org/wiki/User_Datagram_Protocol)包含一个 16 位字段，用于指定 UDP 标头*和*数据的长度（以字节为单位）。

事情就是这样。

Using the standard run-of-the-mill sockets in Windows, whether you're using the System.Net.Sockets namespace in C# or the native Winsock stuff in Win32, you never see the IP/TCP/UDP headers.  These headers are stripped off so that what you get when you read the socket is the actual payload, i.e., the data that was sent.

The typical pattern from everything I've ever seen and done using sockets is that you define an application-level header that precedes the data you want to send.  At a minimum, this header should include the size of the data to follow.  This will allow you to read each "message" in its entirety without having to guess as to its size.  You can get as fancy as you want with it, e.g., sync patterns, CRCs, version, type of message, etc., but the size of the "message" is all you **really** need.

And for what it's worth, I would suggest using a header instead of an end-of-packet delimiter.  I'm not sure if there is a signficant disadvantage to the EOP delimiter, but the header is the approach used by most IP protocols I've seen.  In addition, it just seems more intuitive to me to process a message from the beginning rather than wait for some pattern to appear in my stream to indicate that my message is complete.

EDIT:  I have only just become aware of the Google Protocol Buffers project.  From what I can tell, it is a binary serialization/de-serialization scheme for WCF (I'm sure that's a gross oversimplification).  If you are using WCF, you don't have to worry about the size of the messages being sent because the WCF plumbing takes care of this behind the scenes, which is probably why you haven't found anything related to message length in the Protocol Buffers documentation.  However, in the case of sockets, knowing the size will help out tremendously as discussed above.  My guess is that you will serialize your data using the Protocol Buffers and then tack on whatever application header you come up with before sending it.  On the receive side, you'll pull off the header and then de-serialize the remainder of the message.

        c# - 如何从方法调用中替换 linq 对象

ID：586821

赞同：0

时间：2009-02-25T16:48:51.667

标签：c#, .net, linq-to-sql

`Save()`我有一个 linq 对象，当某些方面发生更改并调用该方法时，我想“退休” 。数据库通过设置一个 Terminated 列来做到这一点，该列在设置时会导致该对象在后续查询中被忽略。我想透明地做到这一点，例如：

```
DataContext db = new DataContext();
Foo bar = (from a in db.table
           where a.pk == somevalue
           select a).Single();

bar.Price += 2;
Console.WriteLine(bar.pk);
bar.Save();
Console.WriteLine(bar.pk); 
```

第二个`WriteLine()`应该是与第一个不同的键，因为在保存过程中我创建了一个重复的对象并用它替换了 bar 。基本上在我要设置的保存方法中`this = newObj;`。我想要的是可能的还是我以错误的方式去做？

            回答 #1

赞同：1

时间：2009-02-25T17:05:48.707

如果引用是通过引用传递的，您可以更改引用（或更准确地说是保存它们的变量）：

```
class Foo {
  ...
  public static void Save(ref Foo obj)
  {
    var newObj = obj._save() //your implementation
    obj = newObj;
  }
} 
```

没有其他方法可以更改引用。原因是，对象不知道它们在哪里被引用。Foo 对象不知道对它的任何引用。

如果您想要代码中概述的确切行为，实现此目的的唯一方法是更改​​ Foo 实例的*内容*，即用更新的值覆盖每个字段。

希望这可以帮助。

            回答 #2

赞同：0

时间：2009-02-25T17:44:58.800

另一种方法是从 Save() 方法返回新对象；如果 Save() 方法不是对象的一部分，这可能更有意义。例如：

```
var dataPersister = new DataPersister();
var obj = dataPersister.Load(somevalue);
obj.Price += 2;
var newObj = dataPersister.Save(obj); 
```

在这些调用之后，obj 仍将指向原始对象，newObj 将是保存后的结果。

        java - 为什么我的 Log4j 日志文件时间戳乱序，我该如何解决？

ID：586824

赞同：6

时间：2009-02-25T16:49:37.577

标签：java, log4j

我的`log4j.xml`包含：

```
<appender class="org.jboss.logging.appender.RollingFileAppender" name="rm">
  ...
  </layout> 
```

我的日志文件显示了乱序的时间戳。我们可以根据时间戳显示吗？

```
2009-02-19 14:47:01,288 调试 [com.catalystwms.core.persistence.TransactionContext]  
2009-02-19 14:54:27,429 信息 [com.catalystwms.tms.services.background.purge.PurgeManager]  
2009-02-19 14:47:01,288 调试 [com.catalystwms.core.services.ServiceLocator]
```

请帮我。

谢谢，

            回答 #1

赞同：5

时间：2009-02-25T17:11:55.307

两个日志语句是否发生在不同的线程上。

**（线程 1）** 2009-02-19 14:54:27,429 信息 [com.catalystwms.tms.services.background.purge.PurgeManager] 

**（线程 2）** 2009-02-19 14:47:01,288 调试 [com.catalystwms。 core.services.ServiceLocator

我相信日志语句 time 准确地给出了事件发生的时间，但只是因为线程 2 正在等待获取锁而被乱序写入。我相信将您的附加程序包装在 org.apache.log4j.AsyncAppender 应该可以解决问题。  

            回答 #2

赞同：2

时间：2009-02-25T17:49:28.713

日期格式旨在允许基于简单字符的排序对其进行正确排序。

```
sort server.log | more 
```

编辑：这对于在现有日志文件上使用很有用（不适用于配置 log4j）。

            回答 #3

赞同：1

时间：2009-02-25T18:45:45.537

您有两个不同的进程使用滚动附加程序记录到同一个日志文件。Log4j 不允许这样做。过去，我通过在日志文件中添加服务器名称来在集群 Web 应用程序中解决此问题：`appname-server1.log`并将`appname-server2.log`每个服务器配置为写入自己的日志。   

这对于跟踪特定于一台机器配置与另一台机器配置的错误也很有用。

如果您有两个不同的应用程序通过根据正在执行的应用程序命名文件来写入同一个日志文件，上述所有方法也适用。

            回答 #4

赞同：0

时间：2009-02-25T19:05:25.347

回应@andy：（

**线程 1）** 2009-02-19 14:54:27,429 INFO [com.catalystwms.tms.services.background.purge.PurgeManager] 

**（线程 2）** 2009-02-19 14:47:01,288调试 [com.catalystwms.core.services.ServiceLocator

我认为可能发生的是线程 2 在尝试写入时在 14:47:01,288 创建了一个 logRecord，它需要为 Logger 的附加程序列表获取锁，但是另一个线程有锁并且正忙于执行 IO 所以线程2等。线程 1 在 14:54:27,429 创建 logRecord，它尝试获取相同的锁并等待。当锁被释放时，操作系统将它交给线程 1 并打印。  

如果这是真的，另一个大问题是性能问题。代码路径可能会阻塞记录 IO。

            回答 #5

赞同：-1

时间：2009-02-25T18:22:27.963

在写入日志之前，您可能无法修复它。您可以尝试修改 log4J 以在每次写入后调用 .flush() ，但这会使您的代码变慢很多，@Chris Nava 的解决方案更合适。

        javascript - 在 Javascript 中使用画布创建图像

ID：586825

赞同：4

时间：2009-02-25T16:49:43.957

标签：javascript, canvas

我似乎遇到了一条错误消息，表明我很难调试。我想要做的是
用画布动态创建一个图像，比如这个（ [http://www.webreference.com/programming/javascript/mk/column3/creating/cp_mini_gradient_details.png ）。](http://www.webreference.com/programming/javascript/mk/column3/creating/cp_mini_gradient_details.png)

我收到的错误消息是：

```
[Exception... "An invalid or illegal string was specified" code: "12" nsresult: "0x8053000c (NS_ERROR_DOM_SYNTAX_ERR)"] 
```

我用谷歌搜索，似乎有很多原因导致此错误消息，但我似乎找不到任何与画布相关的具体内容。

这是我的代码：

```
var newCanvas = document.createElement('canvas');
newCanvas.height="30";
newCanvas.width="113";
document.body.appendChild(newCanvas);

var context = newCanvas.getContext('2d');

context.fillStyle = '#FFFFFF';  
context.fillRect(0, 0, 113, 15);
context.fillStyle = '#000000';  
context.fillRect(0, 15, 113, 30);

var numCanH = Number(newCanvas.height);
var numCanW = Number(newCanvas.width);
var imgd;
if (context.createImageData) {
    console.log('context.createImageData');
    imgd = context.createImageData(numCanW, numCanH);
} 
else if (context.getImageData) {
    console.log('context.getImageData');
    imgd = context.getImageData(0, 0, numCanW, numCanH);
} 
else {
    console.log('else');
    imgd = {'width' : numCanW, 'height' : numCanH, 'data' : new Array(numCanW*numCanH*4)};
}  
var pix = imgd.data;
var ndv = numCanW/6;

for (var i = 0; i <= numCanH; i++) {

    var a=1-Math.abs(2*i-numCanH)/numCanH;

    for (var j = 0; j < numCanW; j+=4) {

        var bitUp = Math.ceil((255/130)*j);
        var bitDown = 255-bitUp;

        if(j<(ndv)){    //Red to Yellow - (rgb) 255,0,0 to 255,255,0
            pix[j] = 255; // red channel
            pix[j+1] = bitUp; // green channel
            pix[j+2] = 0; // blue channel 
        }    
        else if(j>(ndv) && j<(ndv)*2){  //Yellow to Green - (rgb) 255,255,0 to 0,255,0
            pix[j] = 255; // red channel
            pix[j+1] = bitDown; // green channel
            pix[j+2] = 0; // blue channel 
        }  
        else if(j>(ndv)*2 && j<(ndv)*3){    //Green to Cyan - (rgb) 0,255,0 to 0,255,255
            pix[j] = 0; // red channel
            pix[j+1] = 255; // green channel
            pix[j+2] = bitUp; // blue channel 
        }  
        else if(j>(ndv)*3 && j<(ndv)*4){    //Cyan to Blue - (rgb) 0,255,255 to 0,0,255
            pix[j] = 0; // red channel
            pix[j+1] = bitDown; // green channel
            pix[j+2] = 255; // blue channel 
        }  
        else if(j>(ndv)*4 && j<(ndv)*5){    //Blue to Magenta - (rgb) 0,0,255 to 255,0,255
            pix[j] = bitUp; // red channel
            pix[j+1] = 0; // green channel
            pix[j+2] = 255; // blue channel 
        }  
        else if(j>(ndv)*5 && j<(ndv)*6){    //Magenta to Red - (rgb) 255,0,255 to 255,0,0
            pix[j] = 255; // red channel
            pix[j+1] = 0; // green channel
            pix[j+2] = bitDown; // blue channel 
        }             

        pix[j+3] = a; // alpha channel+

        console.log('bitUp  '+bitUp);
        console.log(typeof bitUp);
        console.log('bitDown  '+bitDown);
        console.log(typeof bitDown);
        console.log('a  '+j);
        console.log(typeof a);
        console.log('j  '+j);
        console.log(typeof j);
        console.log('i  '+i);
        console.log(typeof i);
        console.log(imgd);
        console.log('before context.putImageData');
        context.putImageData(imgd, j,i);
        console.log('after context.putImageData');      
    }
} 
```

奇怪的是，错误只发生在循环的第二次迭代期间。

            回答 #1

赞同：3

时间：2009-02-25T17:09:13.130

您的 putImageData 调用正在尝试将您创建为画布宽度和高度的整个 imgd 绘制到左上角位于 (j,i) 的画布中。这在 lop 的第一次迭代后失败，因为 imgd 的底部/右侧离开了画布的底部/右侧。

在外循环之外调用 putImageData 并使其始终在 (0,0) 处绘制。此外，在计算您正在设置的像素的数组索引时，不要忘记添加 i*numCanW*4; 请注意，您的内部循环需要从 0 到 iCanW*4 而不是 0 到 iCanW，因为您正在对颜色分量进行交互，而不是像素。

        winapi - IMAGE_FILE_LARGE_ADDRESS_AWARE 和 3GB 操作系统切换

ID：586826

赞同：17

时间：2009-02-25T16:50:35.860

标签：winapi, memory

如果 Windows 应用程序`IMAGE_FILE_LARGE_ADDRESS_AWARE`在映像头中有设置（通过 /LARGEADDRESSAWARE 编译器标志），这通常是为了允许 32 位应用程序使用超过 2GB 的内存（只有在 32 位操作系统设置boot.ini 中的 3GB 开关）。有关详细信息，请参阅[MSDN 文章 /3GB](http://msdn.microsoft.com/en-us/library/ff556232.aspx)。

我的问题是，如果您在没有设置 3GB 开关的系统上运行此应用程序会发生什么。它只是被忽略了吗？或者应用程序会尝试使用 3GB 堆并出现内存不足错误，因为用户空间只有 2GB 可用？

我一直听说 LARGEADDRESSAWARE 开关对于 2GB 用户空间系统被忽略，但找不到任何官方 Microsoft 文档。

提前致谢。

            回答 #1

赞同：21

时间：2009-02-25T17:43:48.943

基本上`IMAGE_FILE_LARGE_ADDRESS_AWARE`告诉系统，“我知道设置高位的地址不是负数，并且可以处理它们”。如果系统准备提供 2GB 以上的用户模式地址，那么它会提供。如果系统不准备提供这些地址（即，没有 /3GB 设置的 32 位 Windows 操作系统），则该进程无论如何都无法获取这些地址 - 但不会造成任何伤害。

另请注意，如果图像`IMAGE_FILE_LARGE_ADDRESS_AWARE`设置了位，它将在 Win64 系统上访问超过 2GB 的地址空间，这些系统不支持（或不需要）/3GB 开关。32 位应用程序将获得接近 4GB 的地址空间，而 64 位应用程序将获得巨大的地址空间 - 7TB 到 8TB，具体取决于平台（64 位版本默认设置该位）。

[http://msdn.microsoft.com/en-us/library/aa366778.aspx#memory_limits](http://msdn.microsoft.com/en-us/library/aa366778.aspx#memory_limits)

            回答 #2

赞同：10

时间：2009-02-25T17:15:27.467

如果您可以调用它，则忽略该开关。这一次，微软实际上设法想出了一个描述性的名称。

旗帜的意思正是它所说的。此图像文件*知道*存在大地址。也就是说，如果在 2GB 边界之上给它一个指针，它就不会崩溃。

就这样。操作系统不必以任何方式特殊对待进程。它只是表明*如果*操作系统能够提供超过 2GB 的内存，则该进程可以处理它而不会崩溃。你可以制作一个简单的 hello world 应用程序，它永远不会使用超过 1.5MB 的空间，并且仍然设置了这个标志。这并不意味着“我想使用 3GB 内存”，而是意味着“当我请求内存时，我不在乎它是高于还是低于 2GB 边界”。

因此，由于标志不需要操作系统做任何特别的事情，如果操作系统没有什么特别的事情可以做，它就不会做任何特别的事情。

        c# - 如何从创建 WCF 服务对象的代码中获取对它的引用？

ID：586827

赞同：3

时间：2009-02-25T16:50:45.983

标签：c#, wcf

我正在修改[本教程中的代码](http://www.switchonthecode.com/tutorials/wcf-tutorial-events-and-callbacks)以构建一些基本的订阅推送 wcf 客户端/服务器类，但我刚刚遇到了一些障碍。

本教程中的服务器类是使用以下代码创建的：

```
class Program
  {
    static void Main(string[] args)
    {
      using (ServiceHost host = new ServiceHost(
        typeof(StringReverser),
        new Uri[]{
          new Uri("net.pipe://localhost")
        }))
      {

        host.AddServiceEndpoint(typeof(IStringReverser),
          new NetNamedPipeBinding(),
          "PipeReverse");

        host.Open();

        Console.WriteLine("Service is available. " +
          "Press <ENTER> to exit.");
        Console.ReadLine();

        host.Close();
      }
    }
  } 
```

我假设发布了**StringReverser**的一个实例，我的问题是我需要对该实例的引用，以便我可以在其上调用一个方法将数据推送回客户端。

在本教程中，服务器只是使用回调方法回复客户端，而不是将对客户端的引用存储在订阅者列表中。当我需要将数据推送回客户端时，我需要一个对 Service 对象的引用，以便我可以实际使用回调。

有没有办法使用 WCF 发布服务，让您可以引用服务对象？或者我可以从**主机**对象中获取对服务对象的引用吗？

任何帮助，将不胜感激...

            回答 #1

赞同：2

时间：2009-02-25T17:33:03.510

您可以在 StringReverser 类中使用单例模式并将其实例传递给 ServiceHost 构造函数：  

```
ServiceHost host = new ServiceHost(
  StringReverser.Instance,
  new Uri[]{new Uri("net.pipe://localhost")}
); 
```

            回答 #2

赞同：2

时间：2014-08-19T17:37:10.713

我同意 Julien 的回答是正确的方法，但它是不完整的（至少对于 .NET 4.5）。传入服务实例后，必须将实例上下文模式设置`ServiceHost`为 Single。如果不这样做，`ServiceHost` `Open()`则在调用该方法时会出现错误。

设置上下文模式的方法一点也不明显。这是我的一个程序的片段，取自不同的 SO 答案：

```
var baseAddress = new Uri("http://localhost:15003/MockGateway");

using (var host = new ServiceHost(new MockGatewayService(), baseAddress))
{
    // Since we are passing an instance of the service into ServiceHost (rather 
    // than passing in the type) we have to set the context mode to single.
    var behavior = host.Description.Behaviors.Find<ServiceBehaviorAttribute>();
    behavior.InstanceContextMode = InstanceContextMode.Single;

    // Continue to use the service here.  If you ever need to get a reference
    // to the service object you can do so with...
    MockGatewayService myService = host.SingletonInstance as MockGatewayService;

    // ...
} 
```

            回答 #3

赞同：0

时间：2009-02-25T17:12:57.473

在您的服务合同中，您可以致电

OperationContext.Current.GetCallbackChannel());

在服务连接后调用的任何方法中，然后将其传递出服务合同。我通常有一个 join 方法，我可以在其中获取客户端的 guid 并在那里获取回调。这比看起来更难。您要么需要一个单例/全局变量来将其取出（简单），要么您需要制作它以便 WCF 可以使用参数化构造函数（困难）。对于后者，更正确的做法是，您需要推出自己的实现 IInstanceProvider 和 IEndPointBehavior 的类，并将您的行为添加到您感兴趣的端点。这具有允许您使用具有不同端点的不同构造函数的额外好处无需重新定义您的合同。不幸的是，没有类型安全的方法可以做到这一点，因为您将不得不使用反射。抱歉，我无法提供样本，但我拥有的一切都是专有的。

        c# - 更改 DataGridView 单元格中按钮的颜色

ID：586829

赞同：13

时间：2009-02-25T16:51:32.127

标签：c#, .net, winforms, .net-2.0

我有一个大的 DataGridView 控件，它有几个单元格，其中大部分都包含一个按钮。如何更改这些按钮的颜色？

这会更改按钮的“轮廓”，但不会更改按钮本身。

```
row.Cells[2].Style.BackColor = System.Drawing.Color.Red; 
```

这似乎并没有改变任何可见的东西：

```
row.Cells[2].Style.ForeColor = System.Drawing.Color.Red; 
```

如果无法更改背景，是否可以更改按钮上的字体？

使用 .NET 2.0。

            回答 #1

赞同：30

时间：2010-05-07T21:38:07.413

我错过了戴夫关于托马斯回答的注释，所以我只是发布了一个简单的解决方案。

**将 Button 列的FlatStyle**属性更新为 Popup，然后通过更新背景色和前景色，您可以更改按钮的外观。

```
DataGridViewButtonColumn c = (DataGridViewButtonColumn)myGrid.Columns["colFollowUp"];
c.FlatStyle = FlatStyle.Popup;
c.DefaultCellStyle.ForeColor = Color.Navy;
c.DefaultCellStyle.BackColor = Color.Yellow; 
```

            回答 #2

赞同：13

时间：2009-02-25T19:06:26.687

根据[MSDN：](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewbuttoncell(VS.80).aspx)

启用视觉样式后，按钮列中的按钮使用 ButtonRenderer 绘制，通过 DefaultCellStyle 等属性指定的单元格样式无效。

因此，您有两种选择之一。在您的 Program.cs 中，您可以删除此行：

```
Application.EnableVisualStyles(); 
```

这将使它工作，但使其他一切看起来像废话。您的另一种选择（您不会喜欢这个选择）是从**DataGridViewButtonCell**继承并覆盖 Paint() 方法。然后，您可以使用**ButtonRenderer**类上名为**DrawButton**的静态方法来自己绘制按钮。这意味着要弄清楚单元格当前处于哪种状态（单击、悬停等）并绘制角落和边框等......你明白了，这是可行的，但非常痛苦。

但是，如果您愿意，这里只是一些示例代码可以帮助您入门：

```
 //Custom ButtonCell
 public class MyButtonCell : DataGridViewButtonCell
    {
        protected override void Paint(Graphics graphics, Rectangle clipBounds, Rectangle cellBounds, int rowIndex, DataGridViewElementStates elementState, object value, object formattedValue, string errorText, DataGridViewCellStyle cellStyle, DataGridViewAdvancedBorderStyle advancedBorderStyle, DataGridViewPaintParts paintParts)
        {
            ButtonRenderer.DrawButton(graphics, cellBounds, formattedValue.ToString(), new Font("Comic Sans MS", 9.0f, FontStyle.Bold), true, System.Windows.Forms.VisualStyles.PushButtonState.Default);
        }
    } 
```

然后这里是一个测试DataGridView：

```
DataGridViewButtonColumn c = new DataGridViewButtonColumn();
            c.CellTemplate = new MyButtonColumn();
            this.dataGridView1.Columns.Add(c);
            this.dataGridView1.Rows.Add("Click Me"); 
```

这个示例所做的只是绘制一个字体为“Comic Sans MS”的按钮。它不考虑按钮的状态，正如您在运行应用程序时所看到的那样。

祝你好运！！

            回答 #3

赞同：3

时间：2013-08-02T18:24:56.660

DataGridView 中的默认按钮是使用 ButtonRenderer 绘制的，因此很难覆盖。如果我是你，我只需将按钮 FlatStyle 设置为“Popup”。

```
DataGridViewButtonCell buttonCell = (DataGridViewButtonCell)dataGridMappings.Rows[0].Cells[0];
buttonCell.FlatStyle = FlatStyle.Popup;
buttonCell.Style.BackColor = System.Drawing.Color.Red; 
```

            回答 #4

赞同：1

时间：2009-02-25T17:19:54.463

如果这些单元格包含一个按钮，我很确定您必须访问该按钮的属性 BackColor。IE。获取单元格的值将其转换为按钮并设置它的属性。

            回答 #5

赞同：0

时间：2009-02-25T18:26:18.297

我认为您访问它是错误的：

```
row.Cells[2].Style.BackColor = System.Drawing.Color.Red; 
```

你说更新按钮的“轮廓”，但它实际上是在更新按钮后面的单元格。

像这样的东西应该工作：

```
row.Cells[2].ButtonName.Style.BackColor = System.Drawing.Color.Red; 
```

            回答 #6

赞同：0

时间：2011-04-25T05:25:14.773

`DataGridViewButtonCell`使用自定义方法派生您自己的类绝对足够了`Paint`，而无需删除`EnableVisualStyles()`.

            回答 #7

赞同：0

时间：2019-05-21T00:08:43.753

将单元格 FlatStyle 更改为以下内容：

```
DataGridViewButtonCell buttonCell = (DataGridViewButtonCell)dataGridMappings.Rows[0].Cells[0];
buttonCell.FlatStyle = FlatStyle.Flat;
buttonCell.Style.BackColor = System.Drawing.Color.Red; 
```

它会起作用的。

            回答 #8

赞同：0

时间：2020-07-21T10:16:11.723

我有同样的问题。
你所要做的就是

1.  设置 DataGridView 的 ButtonColumn 的以下属性：

    `FlatStyle = PopUp`

2.  设置单元格的颜色：

    `row.Cells[2].Style.BackColor = System.Drawing.Color.Red;`

        java - Java 无缘无故地锁定文件

ID：586830

赞同：12

时间：2009-02-25T16:51:52.407

标签：java, file, locking

尽管在 finally 子句中关闭了流，但在使用 Java 时，我似乎经常遇到清理问题。File.delete() 无法删除文件，Windows 资源管理器也失败。运行 System.gc() 有时会有所帮助，但终止 VM 会有所帮助，这不是一种选择。

有没有人有我可以尝试的其他想法？我在 Windows XP 上使用 Java 1.6。

更新：删除了 FLAC 代码示例，如果我将其隔离，代码就可以工作。

更新：更多信息，这发生在 Apache Tomcat 中，Commons FileUpload 用于上传文件，可能是罪魁祸首，我也使用 Runtime.exec() 在单独的进程中执行 LAME 来对文件进行编码，但这似乎不太可能造成这种情况，因为 ProcessExplorer 清楚地表明 java.exe 在文件上具有 RW 锁，并且 LAME 可以正常终止。

更新：我正在假设缺少 close() 或 close() 不会在我的代码或外部库中的某处被调用。我就是找不到！

            回答 #1

赞同：6

时间：2009-02-25T19:20:57.340

您发布的代码看起来不错 - 它不应该导致您描述的问题。我知道您只发布了您拥有的一段代码 - 您可以尝试仅将这部分提取到一个单独的程序中，运行它并查看问题是否仍然存在？我的猜测是代码中还有其他地方可以`new FileInputStream(path);`正确关闭流，也不能正确关闭流。当您尝试删除文件时，您可能只是在此处看到结果。

            回答 #2

赞同：3

时间：2009-02-25T17:22:36.280

我假设您正在使用[jFlac](http://jflac.sourceforge.net/)。我下载了 jFlac 1.3 并在从互联网现场音乐档案中新下载的 flac 上尝试了您的示例代码。对我来说，它奏效了。我什至使用[ProcessExplorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)对其进行了监视，并看到文件句柄被打开然后释放。你的测试代码真的和你给我们的一样简单，还是你的代码的简化版本？对我来说，一旦 close() 被调用，句柄就被释放，文件随后被成功删除。

尝试将无限循环更改为：

```
File toDelete = new File(path);
if (!toDelete.delete()) {
  System.out.println("Could not delete " + path);
  System.out.println("Does it exist? " + toDelete.exists());
} 
```

或者，如果您想继续循环，则在尝试删除文件之间放置 1 秒睡眠。我在 WinXP Pro 上用 JDK6 试过这个。

`close()`如果关闭引发异常，请不要忘记在您的和记录错误周围放置一个 try/catch 。

            回答 #3

赞同：0

时间：2009-02-25T17:17:33.377

确保您在 finally 块中而不是在 try 块中进行近距离通话。如果因为方法抛出异常而没有 try/finally，则添加 try/finally 并将 close 放在那里。

查看 Windows 任务管理器。对于进程，添加“句柄”列（在“视图”菜单下）。观察手柄是否不断上升而不会掉落。

使用分析器查看您周围是否有您认为不应该拥有的 Stream/Reader/Writer 对象。

编辑：

感谢您发布代码...关闭查看。有一件事 - 你的 close 方法不能保证执行 - 第一个 close 可能会抛出，然后第二个不会运行。

编辑2：

最终 WavWriter wavWriter = new WavWriter(os); LACDecoder 解码器 = 新的 FLACDecoder(is);

上面两行可能会导致 strams 被保存在实例变量中。作为一个测试，看看您是否可以在调用 decoder.decode() 之后将流引用设置为 null（也许创建一个 decoder.cleanup() 方法）。看看是否坚持关闭的流会导致问题。

另外，您是否对传递给上述构造函数的流进行任何包装？如果是这样，您可能必须通过包装器关闭流。

            回答 #4

赞同：0

时间：2009-02-25T18:15:39.493

这不是一个空的while循环吗？

你有：

```
try
{
...code
}
finally
{
}
while (something); 
```

在那里放一些空格，你实际上有：

```
try
{
...code
}
finally
{
}

while (something)
   ; 
```

您的 while 循环与您的 try/finally 无关。如果您的原始 try 语句失败并且未创建文件，则该 while 循环将永远不会完成，因为 try/finally 永远不会第二次执行。

您是否打算将其设为 do{ all your code } while （您的 while 语句）？因为那不是你所拥有的。

编辑澄清：我的建议是更改您的 while 循环以获取有关它为什么无法删除的更多信息：

```
while (!file.delete())
{
    if (!file.exists())
        break; // the file doesn't even exist, of course delete will fail

    if (!file.canRead())
        break; // the file isn't readable, delete will fail

    if (!file.canWrite())
        break; // the file isn't writable, delete will fail
} 
```

因为如果删除失败一次，它只会一遍又一遍地失败，当然它会挂在那里。您没有在循环中更改文件的状态。

现在您已经添加了其他信息，例如 Tomcat 等，这是权限问题吗？您是否正在尝试写入用户 tomcat 正在运行的文件（没有人？） vm 无法创建？或者删除tomcat进程无法删除的文件？

如果进程资源管理器/等说 java 锁定了文件，那么某些东西仍然有一个打开的流使用它。有人可能没有在写入文件的任何流上正确调用 close() ？

            回答 #5

赞同：0

时间：2009-02-25T19:09:54.307

您的代码示例肯定可以工作。事实上，我用 jflac 1.3 在 Java 1.6/Vista 上运行了它，源文件被删除，没有任何循环。

我猜你的情况是另一个进程保持文件打开，可能是桌面搜索索引器或防病毒软件。您可以通过[procexp](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx "procexp")来查找实际持有文件的进程。

            回答 #6

赞同：0

时间：2009-03-01T16:44:47.633

如果您没有线索和想法：在 cygwin 中，cd 到您的 javaroot 并运行类似：

```
find . -name '*.java' -print0 | xargs -0 grep "new.*new.*putStream" 
```

它可能会提供一些嫌疑人...

            回答 #7

赞同：0

时间：2009-04-30T15:42:30.060

由于您使用的是 Tomcat，所以要尝试另一件事 - 在您的上下文描述符（通常是 Tomcat/conf/Catalina/localhost/your-context.xml）中，您可以设置 
`antiResourceLocking=true`，它旨在“避免 Windows 上的资源锁定”。默认情况下（如果您未指定）为 false。值得一试。

        cocoa - Cocoa 反馈框架

ID：586835

赞同：4

时间：2009-02-25T16:52:45.760

标签：cocoa, frameworks, feedback

我`FeedbackReporter.framework`从[vafer.org](http://vafer.org/projects/feedbackreporter/)尝试过，但它不想工作。:-/

那么对于优秀的 Cocoa 反馈框架有什么建议吗？

            回答 #1

赞同：2

时间：2009-02-25T17:05:15.357

试试 Jon Rentzsch 的这个：

[http://github.com/rentzsch/jrfeedbackprovider/tree](http://github.com/rentzsch/jrfeedbackprovider/tree)

这是一个好的开始。

            回答 #2

赞同：2

时间：2009-05-24T12:47:31.817

[在http://code.google.com/p/appcaster/](http://code.google.com/p/appcaster/)也有 OpenFeedback 。这还包括 Appcaster，您会发现它很有用。我个人最终选择了 JRFeedback。

            回答 #3

赞同：1

时间：2009-02-25T18:31:16.100

[UKCrashReporter](http://zathras.de/angelweb/blog-ukcrashreporter-oh-three.htm)处理检测和提交崩溃日志（例如在应用程序启动时）并从应用程序内提交反馈。我对此非常满意。

            回答 #4

赞同：1

时间：2009-02-27T06:14:56.760

我从来没有使用过它，但很明显，[Feedback Reporter](http://vafer.org/projects/feedbackreporter/)的作者会监控 Stack Overflow，如果您费心解释您的问题，他会尽力提供帮助。

        vb6 - 是否可以将巡航控制与 VB6 一起使用？

ID：586836

赞同：5

时间：2009-02-25T16:53:12.543

标签：vb6, continuous-integration, cruisecontrol

我正在开发一个visual basic 6项目，我想使用一个持续集成软件......有谁知道是否可以将Cruise Control与VB6一起使用？如果没有...是否有其他软件可以完成这项工作？

谢谢 ！

            回答 #1

赞同：7

时间：2009-02-25T16:59:12.560

当然，您可以将 CruiseControl 与 VB6 一起使用。您只需要一个 ANT 构建文件来构建您的 VB6 项目。假设 vb6.exe 在路径上，包含以下内容的目标（针对您的特定文件名和目录进行了更改）应该可以工作。

```
<exec dir="ApplicationDir" executable="vb6.exe" failonerror="true">
  <arg line="ProjectFile.vbp /MAKE /OUT build.log"/>
</exec> 
```

            回答 #2

赞同：2

时间：2009-02-25T16:57:37.760

我看不出有什么理由你不能。CC.Net 实际上并没有编译任何东西。它只是启动构建过程的引擎。如果您可以通过命令行构建，那么您可以通过 CC.Net 构建它。

您可能希望查看 Nant 来进行源代码检索和编译器的执行。

            回答 #3

赞同：1

时间：2009-02-25T18:10:50.767

[视觉生成专业版](http://www.kinook.com/VisBuildPro)。与 VB6 以及现代技术一起工作得很好（在那个设计中）。了解如何以及何时正确构建 ActiveX 控件，这样您就不会遇到 ActiveX dll 地狱（管理项目和二进制兼容性）。如果您正在使用您自己构建的许多控件进行大规模 VB 开发，那么绝对物有所值。

            回答 #4

赞同：0

时间：2009-02-25T16:55:36.550

试试 Jetbrains 的 Teamcity。与 sourcesafe 等微软技术配合使用效果更好。不确定vb6，但您始终可以使用包装脚本。

        css - 实现“明信片大小”网页的最佳方式

ID：586840

赞同：2

时间：2009-02-25T16:53:55.007

标签：css

如果我想创建一个包含明信片大小的内容的网页，我将如何将其定位在屏幕上？

横向不是问题（边距自动）；但是，垂直居中是一个问题。  

使容器垂直居中的最佳方法是什么？Javascript？我是否应该尝试将其垂直居中，或者您通常更喜欢从顶部附近开始的页面？

谢谢！

            回答 #1

赞同：5

时间：2009-02-25T17:06:04.697

你可以用 CSS 做到这一点。使用 50% left 和 top 将容器 DIV 居中。然后只需将您包含的明信片宽度和高度的 50% 向后偏移。

```
<div id="postcard_container">
    <div id="postcard">
    Postcard here
    </div>
</div>

#postcard_container {
    position:absolute;
    display:block;
    width:1px;
    height:1px;
    left:50%;
    top:50%;
}
#postcard {
    position:absolute;
    width:800px;
    height:600px;
    left:-400px;
    top:-300px;
} 
```

            回答 #2

赞同：0

时间：2009-02-25T18:45:27.783

我想我会放弃并走桌子路线；它似乎可以跨浏览器正确呈现：

```
<head>
    <title></title>
    <style type="text/css">
#content {
    text-align: left;
    padding: 5px;
    width: 800px;
    height: 600px;
}
</style>
</head>
<body>
    <table style="width: 100%; height: 100%">
        <tr valign="middle">
            <td align="center">
                <div id="content">
                    Postcard here
                </div>
            </td>
        </tr>
    </table>
</body> 
```

        sql - 部分导入Sql server 2005 数据库用于本地开发

ID：586843

赞同：0

时间：2009-02-25T16:54:18.050

标签：sql, sql-server-2005, backup-strategies

所以在工作中，我的团队正在使用中央 SQL Server 2005 数据库服务器进行集成测试，我想转移到我的本地数据库上进行测试。唯一的问题是中央数据库超过 10 Gb。

我有兴趣为每个表导入数据对象和行，以确保我可以启动并运行。你们能告诉我如何做到这一点吗？

我有 VS 2008 Professional 和 SQL Server management studio express。我需要 VS 2008 数据库版吗？

谢谢-维努

编辑：我将尝试登录中央数据库服务器并查看主机是否有更好的工具。谢谢kpollock，我没想到。

            回答 #1

赞同：1

时间：2009-02-25T17:36:54.640

[2005](http://www.microsoft.com/sql/prodinfo/features/compare-features.mspx?PHPSESSID=0324345d45ef1bf1f764044e03584cd0)和[2008](http://www.microsoft.com/sqlserver/2008/en/us/editions.aspx) Express 版本都有 4 GB 的限制。

您是否考虑过在中央服务器上制作数据库副本并处理它（只需将其恢复到具有其他名称的新数据库中）？

另请参见[SQL Server 中的 BACKUP 和 RESTORE -- 完整备份](http://www.sqlteam.com/article/backup-and-restore-in-sql-server-full-backups)

            回答 #2

赞同：0

时间：2009-02-25T17:29:44.610

对我来说，这看起来像是一份 SSIS 工作——我认为 Express 版本的 Management Studio 没有。

或者，您可以在 C# 中调用源数据库上的 Stored procs 来提取数据，如果那是您的技能所在的话。（这就是我的做法，因为我认为它更易于理解——但这只是我的看法）。

如果数据库是实时的并且新数据一直在进来，那么您可能只能设置架构和参考数据，然后使用复制来获取新数据（如果您认为这将为您提供一个有代表性的样本）。

您必须根据对模式的理解对样本提取进行编码 - 即确保您获得完整的链接记录集（例如订单的详细记录和所有查找，例如客户、地址等）。

        asp.net - 外部 JavaScript 文件优于内联 JavaScript 的缺点

ID：586846

赞同：8

时间：2009-02-25T16:54:43.460

标签：asp.net, javascript

与将 JS 作为 ASPX 页面的一部分相比，使用外部 JS 文件有哪些缺点？

我需要做出架构决定，并从同事那里听说外部 JS 有时表现不佳。

            回答 #1

赞同：10

时间：2009-02-25T16:58:36.493

我知道的唯一缺点是需要额外的 HTTP 请求。一旦 Javascript 被两个页面使用或者页面被同一个用户重新加载，这个缺点就会消失。

            回答 #2

赞同：6

时间：2009-02-25T17:00:15.180

一个缺点是浏览器无法缓存页面中的 JS。如果您在外部引用它，浏览器将缓存该文件，并且不会在您每次点击页面时重新下载它。嵌入它只会增加每个页面的文件大小。

可维护性也是需要牢记的。如果是普通的 JS，当您需要更新 X 个 HTML 文件的脚本块而不是一个 JS 文件时，进行更改会更加痛苦。

就我个人而言，我从未遇到过外部文件与嵌入式文件的问题。我在 HTML 本身中有 JS 的唯一一次是当我有一些东西要绑定到专门为该页面加载的文档时。

            回答 #3

赞同：3

时间：2009-02-25T17:06:33.637

**如果处理不当，缓存**既是优点，也可能是缺点。  

**专业人士**是显而易见的，因为它会在第一个页面加载后的每个页面加载时改善页面加载。

**缺点**是当您发布新代码时，它可能仍会被用户的浏览器缓存，因此他们可能无法获得更新。这可以通过更改 js 文件的名称轻松解决。我们使用文件的时间戳自动对我们的 js 进行版本控制，然后通过我们的 Web 服务器（mod_rewrite，Apache）上的配置确保它指向 Web 请求中的创建文件。

            回答 #4

赞同：2

时间：2009-02-25T16:58:09.820

让他们定义“玩得好”。除了更好的逻辑组织外，外部 js 文件在已经缓存时不必传输。

在进行生产/暂存构建时，我们使用[YUI 压缩器自动缩小外部脚本并将其合并为一个。](http://developer.yahoo.com/yui/compressor/)

            回答 #5

赞同：1

时间：2009-02-25T17:01:35.270

我知道的唯一缺点是必须向服务器发出另一个请求才能检索外部 JS 文件。正如我之前所说，您可以使用 YUI 压缩器之类的工具来最大程度地减少这种影响。

然而，优点是您可以将所有 JS 代码保存在单独的更易于维护的格式中。  

            回答 #6

赞同：1

时间：2009-02-25T17:03:16.217

外部 javascript 的另一个巨大优势是能够使用[Jslint](http://www.jslint.com/)检查您的语法。再加上缩小、组合和缓存外部脚本的能力，使得内部 javascript 似乎是一个糟糕的选择。

        asp.net - 在 asp.net 2.0 中创建嵌套复选框

ID：586861

赞同：1

时间：2009-02-25T16:58:29.083

标签：asp.net, nested, nested-checkboxes

在 ASP.net 中创建嵌套复选框列表的最佳方法是什么？

我应该使用数据网格吗？我应该使用启用复选框的树视图吗？

我在数据表中有我需要的数据，并希望遍历它以创建一个复选框列表，其中每个父复选框都有一个嵌套的 chechboxlist。

干杯!

            回答 #1

赞同：3

时间：2009-02-25T17:30:39.273

我从来都不是网格的粉丝，相反，我使用转发器/列表视图，并且对于每一行我都有一个负责显示行数据的 UserControl，以及用于子数据的更多转发器。

小例子：

```
<asp:repeater id... runat...>
    <itemtemplate>
        <uc1:MyRowControl id... runat... OnSomeEvent='MyRowHandler' Model='<%# (MySubData)Container.DataItem %>'
    </itemtemplate>
</asp:repeater> 
```

内部等等。当您这样做时，事件很容易处理。

            回答 #2

赞同：2

时间：2009-02-25T17:22:06.593

Telerik RadAjax 控制套件有一个可以执行此操作的树视图

[树视图复选框支持演示](http://demos.telerik.com/aspnet-ajax/treeview/examples/functionality/checkboxes/defaultcs.aspx)

您可以绑定到分层数据源或 xml 文档，创建自己的模板等。

            回答 #3

赞同：0

时间：2009-02-25T17:10:59.803

我会为此使用 Treeview，但 ASP.NET 2.0 Treeview 控件没有模板化节点。如果要使用 Treeview，它必须是支持模板的第三方控件。

您还可以使用 CSS 定位或表格“滚动您自己的”用户控件（或复合控件，如果您有野心的话）。更多的工作，但免费。

            回答 #4

赞同：0

时间：2009-02-25T17:18:57.677

这实际上取决于您的数据需求、数据库架构和 UI 技术。

对于网站，我在使用分层“路径”创建的嵌套 UL/LI 标签方面取得了很大成功；这允许我通过查找子列表来隐藏/检查/等父项下的所有复选框。

我使用 Itzak Ben-Gan 的“路径”技术；他在他的网站 www.sql.co.il 上有很多与 MS SQL Server 相关的东西，并且在[www.sqlmag.com上](http://www.sql.co.il/)[还有](http://www.sqlmag.com/Articles/ArticleID/8826/8826.html)一篇文章“维护层次结构” ，带有[可下载的代码](http://www.windowsitpro.com/Files/09/8826/8826.zip)。

HTH。

        java - 我该如何为此编写 HQL 查询？

ID：586871

赞同：0

时间：2009-02-25T16:59:23.530

标签：java, hibernate, hql

我想要一个 HQL 查询，它返回包含在给定日期之前创建的给定用户的所有组。不知何故，我无法正确处理。

```
public class Group
{
    @ManyToMany
    Set<User> users;
    Date created;
}

public class User
{
...
} 
```

            回答 #1

赞同：0

时间：2009-02-26T20:19:20.700

II-Bhima 的回答基本上是正确的——这里有一个小修复：

```
select g from Group as g
inner join g.users as user
where g.created < :createdDate
and user = :user 
```

您需要它以便返回 Groups 而不是 Object[] 与 Group-User 2-tuples。

        entity-framework - 实体框架映射

ID：586873

赞同：3

时间：2009-02-25T16:59:51.437

标签：entity-framework, .net-3.5

有没有人为实体框架的“真实”映射场景提供一个很好的示例。不是那种简单的表<->实体之一;-)

            回答 #1

赞同：5

时间：2009-02-26T13:32:43.440

您应该查看 MSDN 上的[定义高级数据模型](http://msdn.microsoft.com/en-us/library/bb738640.aspx)文章，它包含以下主题：

*   [使用存储过程定义模型](http://msdn.microsoft.com/en-us/library/bb896279.aspx) 
*   [使用修改存储过程定义模型](http://msdn.microsoft.com/en-us/library/cc716731.aspx) 
*   [定义具有复杂类型的模型](http://msdn.microsoft.com/en-us/library/bb738613.aspx) 
*   [使用 Table-per-Type 继承定义模型](http://msdn.microsoft.com/en-us/library/bb738685.aspx) 
*   [使用 Table-per-Hierarchy 继承定义模型](http://msdn.microsoft.com/en-us/library/bb738443.aspx) 
*   [定义每个类型具有多个实体集的模型](http://msdn.microsoft.com/en-us/library/bb738537.aspx) 
*   [定义单个实体映射到两个表的模型](http://msdn.microsoft.com/en-us/library/bb896233.aspx)
*   [在存储模型中定义具有水平分区的模型](http://msdn.microsoft.com/en-us/library/cc853328.aspx)

        networking - 端口号和协议号有什么区别？

ID：586882

赞同：25

时间：2009-02-25T17:02:08.873

标签：networking, terminology

端口号和协议号有什么区别？

            回答 #1

赞同：68

时间：2009-02-25T17:11:10.303

您可以将**端口**视为电话分机，计算机的 IP 地址就像它的电话号码。您可以拨打该号码（IP 地址）与计算机对话，然后拨打分机（端口）与特定应用程序对话。应用程序需要侦听端口才能进行通信。

**协议**只是对话两端的两个应用程序同意使用的语言。如果您的应用程序正在向我的应用程序发送字节流，我的应用程序需要知道如何解释这些字节。

            回答 #2

赞同：33

时间：2009-02-25T17:06:56.460

协议=如何通信，端口=在哪里通信

            回答 #3

赞同：20

时间：2009-02-25T17:05:39.253

协议是关于如何解释数据以及如何响应消息的协议。它们通常指定消息格式和合法消息。协议示例包括：

*   [TCP/IP](http://en.wikipedia.org/wiki/TCP/IP)
*   [HTTP](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)
*   [SSH](http://en.wikipedia.org/wiki/Secure_Shell)

端口是 TCP 和 UDP 中套接字端点的一部分。它们允许操作系统区分主机上的哪个 TCP 或 UDP 服务应该接收传入的消息。

通常会出现混淆，因为保留了许多端口（例如端口 80），并且通常由期望特定协议（端口 80 的情况下为 HTTP）的服务器监听。虽然通常预计发送到端口 80 的消息是 HTTP 消息，但没有什么可以阻止非 HTTP 服务器侦听端口 80 或 HTTP 服务器侦听备用端口（例如 8080 或 8088）。

            回答 #4

赞同：8

时间：2009-02-25T17:09:55.437

港口=船舶进入的地方

协议=货物如何装载到船上

            回答 #5

赞同：2

时间：2009-02-25T22:59:13.727

端口 = 耳朵、嘴巴、眼球，触摸

  协议 = 英语、西班牙语、手语、盲文

            回答 #6

赞同：2

时间：2009-02-25T17:26:07.223

每个人都是对的：我最喜欢的比喻是其中一艘船。港口：装载货物的地方，协议：如何装载/卸载货物。

这篇维基百科文章可能会对您有所帮助。

[http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers](http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers)

            回答 #7

赞同：1

时间：2009-02-25T17:09:55.670

在 IP 术语中，*协议号*是分配给 IP 中承载的第 4 层协议的值，例如，6 代表 TCP，17 代表 UDP，这`/etc/protocols`在大多数 UNIX 系统的文件中经常可以找到。

在 UDP 和 TCP 报头中使用*端口号*来表示在这些协议中承载的不同更高级别的协议，例如 25 用于 SMTP，80 用于 HTTP，等等`/etc/services`。

            回答 #8

赞同：1

时间：2009-02-25T17:10:09.650

协议是关于两个设备应如何以它们都可以理解的方式交换数据的规范。端口是一种编号的“标签”，可帮助计算机决定谁应该接收传入的数据。

许多协议都有一个默认运行的端口。这使得发现它们或配置使用它们的应用程序变得更加容易。但这不是硬性规定。只要与他们联系的任何人都知道更改，他们就可以随时在不同的端口上收听。

            回答 #9

赞同：1

时间：2010-08-26T09:41:45.253

在简单端口中表示您与谁通信。& 协议表示如何通信或通信方式。

            回答 #10

赞同：0

时间：2009-02-25T17:08:27.093

端口只是您为通信选择的通道，协议决定了通信的完成方式。某个协议通常使用特定的端口，例如 HTTP 使用端口 80，FTP 使用端口 21。

        asp.net - StringLengthValidator - 本地化不起作用

ID：586884

赞同：2

时间：2009-02-25T17:02:22.943

标签：asp.net, enterprise-library

我正在使用 StringLengthValidators 验证对我的 ASP.NET 应用程序的输入，并使用 ValidationSummary 控件来显示错误消息。为了本地化应用程序，StringLengthValidators 设置了 MessageTemplateResourceName 和 MessageTemplateResourceType 属性。

验证器第一次运行时，它会根据当前的文化设置选择正确的错误消息。如果我在运行应用程序时更改语言设置，下次验证器运行时，ValidationSummary 仍会显示旧文化的错误消息。所有其他控件的文本正在正确更新。

有什么想法吗，伙计们？

    iphone - 关于内存管理的 iPhone 问题

ID：586885

赞同：1

时间：2009-02-25T17:02:27.250

标签：iphone, objective-c, cocoa, cocoa-touch

这是一个假设的吸气剂：

```
- (DetailViewController *)detailController
{

    if (detailController == nil) {
        DetailViewController *controller = [[DetailViewController alloc] initWithNibName:@"Detail" bundle:nil];
        self.detailController = controller;
        [controller release];
    }

    return detailController;
 } 
```

然后调用它的代码看起来像这样：

```
- (void)loadControllerOrSomething 
{
   DetailViewcontroller *controller =  self.detailController;
   [navigationController doSomethingWith:controller];
} 
```

我关于内存管理的问题如下。如果我让 *controller 超出范围，在 loadControllerOrSomething 中，我会泄漏内存吗？使用navigationController 后我应该做一个控制器= nil 吗？

            回答 #1

赞同：3

时间：2009-02-25T17:12:40.127

不，你不会泄露任何东西。

在返回之前没有向控制器添加额外的保留，接收时也没有添加保留。如果你需要保证它存在于你的函数范围之外，你应该在它上面调用retain，并在完成后释放。

这通常是 Cocoa 中内存管理的工作方式。当函数返回对象时，您没有所有权。除非您调用“保留”，否则它将在其自然生命周期结束时被删除，这可能是下一帧、下一分钟等。

名称包含“alloc”或“copy”并返回新对象的函数除外。您有责任在不再需要它们时调用 release。

        sharepoint - 批准文档时处理事件

ID：586886

赞同：2

时间：2009-02-25T17:02:27.407

标签：sharepoint, event-handling

在 SharePoint 中，

使用事件接收器，我们如何知道用户何时批准了文档库中的文档？

我认为应该在 ItemAdded 或 ItemAdding 事件中捕获它。

有任何想法吗？

谢谢。

            回答 #1

赞同：5

时间：2009-02-25T18:11:23.170

ItemUpdated 是要使用的事件接收器，除非您想“覆盖”批准（并且可能保持项目未批准） - 在这种情况下，您应该使用 ItemUpdating。

要检查该项目是否被批准，您可以尝试以下代码：

```
public override void ItemUpdated(SPItemEventProperties properties)
{
   if (properties.ListItem["Approval Status"] == "Approved")
   //Do Something
} 
```

希望能帮助到你

        fluent-nhibernate - 使用 Fluent NHibernate AutoMapping 进行级联保存

ID：586888

赞同：21

时间：2009-02-25T17:02:51.740

标签：fluent-nhibernate, automapping

如何使用带有 Fluent NHibernate 的 AutoMap 持久性模型“打开”级联保存？

如：

我救了人，胳膊也应该救了。目前我得到

*“对象引用了一个未保存的瞬态实例 - 在刷新之前保存瞬态实例”*

```
public class Person : DomainEntity
{
  public virtual Arm LeftArm { get; set; }
}

public class Arm : DomainEntity
{
  public virtual int Size { get; set; }
} 
```

**我找到[了一篇关于这个主题的文章](http://blog.jagregory.com/2009/01/11/fluent-nhibernate-auto-mapping-entity-conventions/)，但它似乎已经过时了。**

            回答 #1

赞同：13

时间：2009-03-19T21:04:41.460

这适用于新的配置位。有关详细信息，请参阅[http://fluentnhibernate.wikia.com/wiki/Converting_to_new_style_conventions](http://fluentnhibernate.wikia.com/wiki/Converting_to_new_style_conventions)

```
//hanging off of AutoPersistenceModel    
.ConventionDiscovery.AddFromAssemblyOf<CascadeAll>()

public class CascadeAll : IHasOneConvention, IHasManyConvention, IReferenceConvention
{
    public bool Accept( IOneToOnePart target )
    {
        return true;
    }

    public void Apply( IOneToOnePart target )
    {
        target.Cascade.All();
    }

    public bool Accept( IOneToManyPart target )
    {
        return true;
    }

    public void Apply( IOneToManyPart target )
    {
        target.Cascade.All();
    }

    public bool Accept( IManyToOnePart target )
    {
        return true;
    }

    public void Apply( IManyToOnePart target )
    {
        target.Cascade.All();
    }
} 
```

            回答 #2

赞同：13

时间：2010-03-15T14:26:59.397

更新为与当前版本一起使用：

```
public class CascadeAll : IHasOneConvention, IHasManyConvention, IReferenceConvention
{
    public void Apply(IOneToOneInstance instance)
    {
        instance.Cascade.All();
    }

    public void Apply(IOneToManyCollectionInstance instance)
    {
        instance.Cascade.All();
    }

    public void Apply(IManyToOneInstance instance)
    {
        instance.Cascade.All();
    }
} 
```

            回答 #3

赞同：4

时间：2011-11-03T22:15:09.817

我发现对整个项目执行此操作的最简单方法是使用**DefaultCascade**：

```
.Conventions.Add( DefaultCascade.All() ); 
```

转到wiki 上的[“最简单的约定”](https://github.com/jagregory/fluent-nhibernate/wiki/Conventions)部分，查看此内容以及其他列表。          

以下是来自 Wiki 的列表：

```
Table.Is(x => x.EntityType.Name + "Table")
PrimaryKey.Name.Is(x => "ID")
AutoImport.Never()
DefaultAccess.Field()
DefaultCascade.All()
DefaultLazy.Always()
DynamicInsert.AlwaysTrue()
DynamicUpdate.AlwaysTrue()
OptimisticLock.Is(x => x.Dirty())
Cache.Is(x => x.AsReadOnly())
ForeignKey.EndsWith("ID") 
```

一个警告 - Wiki 中的某些方法名称可能是错误的。我用我可以验证的内容（即 DefaultCascade 和 DefaultLazy）编辑了 Wiki，但不能保证其余部分。但是，如果需要，您应该能够使用 Intellisense 找出正确的名称。

            回答 #4

赞同：3

时间：2010-02-11T17:54:47.903

约定方法签名已更改。对于完全符合此问题要求的新答案，请参阅[此问题](https://stackoverflow.com/questions/2242902/cascade-saves-with-fluent-nhibernate-automapping-old-anwser-still-valid)。

            回答 #5

赞同：1

时间：2009-02-26T17:37:58.683

您还可以将级联设为所有类型的默认约定。例如（使用您链接到的文章作为起点）：

```
autoMappings.WithConvention(c =>  
  {  
    // our conventions
    c.OneToOneConvention = o => o.Cascade.All();
    c.OneToManyConvention = o => o.Cascade.All();
    c.ManyToOneConvention = o => o.Cascade.All();
  }); 
```

        asp.net - VS Builtin Web 服务器将图像作为八位字节流发送

ID：586900

赞同：0

时间：2009-02-25T17:06:28.770

标签：asp.net, javascript, visual-studio, http-headers, vs-devserver

我正在使用 Visual Studio 2008 开发 Web 服务器调试一个包含大量 javascript 和图像的 ASP.NET 网站。

许多脚本之一尝试动态创建`<img>`标签并为其提供适当的`src`属性。但是，没有加载任何图像，而是在 Firefox、IE 和 Opera 中显示替代文本。

进一步挖掘，我复制了一个图像链接，然后将其粘贴到 Firefox 的地址栏中，这就是实时标题窗口中出现的内容：

```
GET /images/nav/zoomin.png HTTP/1.1
Host: localhost:7777
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.0.6) Gecko/2009011913 Firefox/3.0.6 (.NET CLR 3.5.30729)
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip,deflate
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
Keep-Alive: 300
Connection: keep-alive

HTTP/1.x 200 OK
Server: ASP.NET Development Server/9.0.0.0
Date: Wed, 25 Feb 2009 16:59:23 GMT
X-AspNet-Version: 2.0.50727
Cache-Control: private
Content-Type: application/octet-stream
Content-Length: 292
Connection: Close 
```

有问题的部分是`Content-Type`标题，它以某种方式设置为“应用程序/八位字节流”，强制下载操作，而不是在`<img>`标签内正常显示。

我很确定问题不是 javascript，因为它是从另一个运行良好的应用程序逐字复制的代码。

我相信我可能在某处错误配置了某些东西。但我可能是错的，所以这里是创建 HTML 标签的代码：

```
var zin = document.createElement("img");
zin = $Img.Png(zin, Settings.ImageHost + "zoomin.png");
zin.style.top = (this.y + zoomPaddingY) + "px";
zin.style.left = (this.x + zoomPaddingX) + "px";
zin.style.position = "absolute";
$Img.Swap(zin, Settings.ImageHost + "zoomin.png", Settings.ImageHost + "zoomin_active.png");
zin.alt = zin.title = "zoom in";
zin.style.cursor = this.hand;
$Evt.addListener(zin, "click", this.zoomIn, this, true);

// long long scroll ...

controlDiv.appendChild(zin); 
```

该`$Img.Png`部件适用于其他 PNG 图像，因此它不应该是问题的根源。

我做错了什么？！？

谢谢你的帮助！

这里已经是午夜了……我还在开发这个小应用程序……

            回答 #1

赞同：1

时间：2009-02-25T17:24:15.467

您是否使用渲染图像的 GenericHandler？

这样做似乎是一个简单的选择。

例如。

```
public class RenderImage : IHttpHandler, IReadOnlySessionState
{
  public void ProcessRequest(HttpContext context)
  {
     context.Response.ContentType = "image/png";
     context.Response.Clear();

    // TODO: Write image data
    Bitmap bitmap = ...

    bitmap.Save(Response.OutputStream,ImageFormat.Png);

    context.Response.End();
  }

  public bool IsReusable { get { return false; } }
} 
```

        .net-3.5 - DotNetNuke 模块中的 CascadingDropDown => [方法错误 500]

ID：586918

赞同：0

时间：2009-02-25T17:10:11.443

标签：.net-3.5, ajaxcontroltoolkit, dotnetnuke, cascadingdropdown

我正在创建一个 DotNetNuke 4.x 模块，并且在我的模块中需要一个 AJAX CascadingDropDown。我将其定义如下...

```
<asp:UpdatePanel runat="server" ID="CascadingDropDowns">
    <ContentTemplate>
        <asp:DropDownList runat="server" ID="SelectGroupDropDownList">
        </asp:DropDownList>
        <ajax:CascadingDropDown runat="server" ID="SelectGroupDropDownListExtender" Category="Group" 
            TargetControlID="SelectGroupDropDownList" PromptText="Select a Group" ServiceMethod="GetGroups">
        </ajax:CascadingDropDown>
        <!-- more dropdowns & cascadingdropdown extenders here --> 
```

像这样在 ascx 的代码隐藏中定义的页面方法...

```
[WebService]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[ScriptService()]
public partial class EligibilityView : PortalModuleBase
{
    [WebMethod]
    [ScriptMethod]
    public CascadingDropDownNameValue[] GetGroups(string knownCategoryValues, string category)
    {
        var results = new List<CascadingDropDownNameValue>();

        // code here to fill the list with values...

        return results.ToArray();

    } 
```

当我运行该页面时，我得到一个“[方法错误 500]” - 并且无法弄清楚我做错了什么。我认为问题在于页面找不到 webmethod，因为它是在 ASCX 控件中定义的，而不是页面本身。我确实需要以这种方式定义它——而不是创建一个 ASMX 服务——因为这将被编译为 DotNetNuke 的模块，我想在模块中保持简单。

任何建议将不胜感激。

            回答 #1

赞同：4

时间：2009-02-25T17:57:19.473

我认为在 ASCX 中不会有一种简单的方法可以访问该 Web 服务方法。在这种情况下，“简单”可能意味着向模块添加一个 ASMX。

您是否有理由认为添加 ASMX 会成为问题？

将另一个文件添加到模块包应该涉及与添加控件本身相同的过程。在清单中，您只需要在文件部分中指定它，然后确保它最终出现在包中。您还可以使用包中的资源 zip 文件并指定该 zip，确保您的 .ascx 和 .asmx 文件（以及任何其他内容文件）在其中。

        php - 在 PHP 中解析

ID：586919

赞同：0

时间：2009-02-25T17:10:28.977

标签：php, parsing

我有`$result`包含这个的变量

```
Country: USA City: NY Latitude: 32.2667 Longitude: 71.9167 
```

我如何解析它，以便我可以得到这样的输出：

```
Country=USA&City=NY&Latitude=32.2667&Longitude=71.9167 
```

            回答 #1

赞同：3

时间：2009-02-25T17:12:30.907

快速破解

```
str_replace(array(': ', ' '), array('=', '&'), $string); 
```

            回答 #2

赞同：2

时间：2009-02-25T17:12:28.100

```
str_replace(' ', '&', str_replace(': ', '=', $string)); 
```

它可以按您的意愿工作。

            回答 #3

赞同：2

时间：2009-02-25T18:35:06.480

如果在某些时候您需要对数据进行一些验证，则 str_replace 方法可能会停止为您工作（尽管它是解决问题的最简单方法）。然后，您会希望以更智能但更复杂的方式提取数据：

```
$string = "Country: USA City: NY Latitude: 32.2667 Longitude: 71.9167";
$matches = Array();
$has_match = preg_match('/Country: (\w+) City: (\w+) Latitude: ([0-9.]+) Longitude: ([0-9.]+)/',$string,$matches);
if ($has_match) {
    list($country,$city,$lat,$long) = array_slice($matches,1);
}
else {
    print "no matches";
} 
```

现在您可以做任何您想做的事情，以确保 $country、$city、$lat 和 $long 值是正常的，然后将它们加入到查询字符串中：

```
$query_string = "Country=$country&City=$city&Latitude=$lat&Longitude=$long" 
```

            回答 #4

赞同：0

时间：2013-08-12T07:38:03.427

第二个答案中的正则表达式是可以的，但它需要一些小的更正。

preg_match('/^Country=(\w+)&City=(\w+)&Latitude=([0-9.]+)&Longitude=([0-9.]+)/',$string,$matches);

        c - 我应该如何打印 off_t 和 size_t 等类型？

ID：586928

赞同：157

时间：2009-02-25T17:11:47.197

标签：c, portability, format-specifiers

我正在尝试打印`off_t`和`size_t`. `printf()` *什么是可移植*的正确占位符？

或者是否有完全不同的方式来打印这些变量？

            回答 #1

赞同：121

时间：2009-02-25T17:38:34.323

您可以使用`z`for size_t 和`t`for ptrdiff_t 像

```
printf("%zu %td", size, ptrdiff); 
```

但是我的手册页说一些较旧的库使用了不同的字符，`z`并且不鼓励使用它。不过，它是标准化的（按照 C99 标准）。对于那些`intmax_t`等等`int8_t`，`stdint.h`您可以使用宏，就像另一个答案所说：

```
printf("value: %" PRId32, some_int32_t);
printf("value: %" PRIu16, some_uint16_t); 
```

它们列在`inttypes.h`.

就个人而言，我只会将值转换为`unsigned long`或`long`喜欢另一个答案推荐的值。如果您使用 C99，那么您可以（当然也应该）分别转换为`unsigned long long`or`long long`和使用`%llu`or`%lld`格式。

            回答 #2

赞同：117

时间：2011-03-09T20:44:52.897

打印`off_t`：

```
printf("%jd\n", (intmax_t)x); 
```

打印`size_t`：

```
printf("%zu\n", x); 
```

打印`ssize_t`：

```
printf("%zd\n", x); 
```

请参阅 C99 标准中的 7.19.6.1/7，或更方便的格式化代码的 POSIX 文档：

[http://pubs.opengroup.org/onlinepubs/009695399/functions/fprintf.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/fprintf.html)

如果您的实现不支持这些格式代码（例如，因为您在 C89 上），那么您会遇到一些问题，因为 AFAIK 在 C89 中没有具有格式代码的整数类型，并且保证一样大作为这些类型。所以你需要做一些特定于实现的事情。

例如，如果您的编译器具有`long long`并且您的标准库支持`%lld`，您可以自信地期望它将代替`intmax_t`. 但如果没有，您将不得不回退到`long`，这在其他一些实现中会失败，因为它太小了。

            回答 #3

赞同：5

时间：2014-03-20T15:39:47.287

对于微软来说，答案是不同的。VS2013 在很大程度上符合 C99，但“不支持 hh、j、z 和 t 长度前缀。” 对于 size_t “即 32 位平台上的无符号 __int32，64 位平台上的无符号 __int64”使用前缀 I（大写眼睛）和类型说明符 o、u、x 或 X。  [请参阅 VS2013 大小规范](http://msdn.microsoft.com/en-us/library/tcxf1dw6.aspx)

至于off_t，在VC\include\sys\types.h中定义为long。

            回答 #4

赞同：3

时间：2009-02-25T17:20:32.247

你用的是哪个版本的C？

在 C90 中，标准做法是酌情转换为有符号或无符号长，并相应地打印。我见过 size_t 的 %z，但是 Harbison 和 Steele 没有在 printf() 下提到它，而且无论如何这对 ptrdiff_t 或其他什么都没有帮助。

在 C99 中，各种 _t 类型都有自己的 printf 宏，所以`"Size is " FOO " bytes."`  我不知道细节，但这是相当大的数字格式包含文件的一部分。

            回答 #5

赞同：3

时间：2009-02-25T17:39:57.050

您需要使用 inttypes.h 中的格式化宏。

请参阅此问题：   [size_t 类型变量的跨平台格式字符串？](https://stackoverflow.com/questions/174612/cross-platform-format-string-for-variables-of-type-sizet)

            回答 #6

赞同：1

时间：2009-02-25T17:37:30.380

查看`man 3 printf`Linux、OS X 和 OpenBSD 都显示了对`%z`for`size_t`和`%t`for `ptrdiff_t`(for C99) 的支持，但没有一个提到`off_t`. 野外的建议通常会提供 的`%u`转换`off_t`，据我所知，这是“足够正确的”（两者在 64 位和 32 位系统之间变化相同）`unsigned int`。`off_t`

            回答 #7

赞同：1

时间：2021-07-30T21:16:44.860

如果您使用 C11 或 C18，则可以使用`_Generic`.

```
#include <stdio.h>
#include <sys/types.h>

    #define TYPE_FORMAT(variable) _Generic \
      (                                    \
        (variable)                         \
        , unsigned char       : "%hhu"     \
        , unsigned short      : "%hu"      \
        , unsigned int        : "%u"       \
        , unsigned long       : "%lu"      \
        , unsigned long long  : "%llu"     \
        , signed   char       : "%hhi"     \
        , signed   short      : "%hi"      \
        , signed   int        : "%i"       \
        , signed   long       : "%li"      \
        , signed   long long  : "%lli"     \
      )

int main(void)
  {
    off_t a=3321;
    printf(TYPE_FORMAT(a), a);
  } 
```

但是，有一个主要缺点：您不能以这种方式组合字符串。这意味着：
`printf("Foo: " TYPE_FORMAT(a), a);`
将不起作用，这使得它在许多情况下无用。是的，您可以在运行时组合字符串，但这很烦人。

            回答 #8

赞同：-3

时间：2016-10-14T08:30:13.080

我至少看过这篇文章两次，因为接受的答案对我来说很难记住（我很少使用`z`or`j`标志，它们似乎与[平台无关](https://stackoverflow.com/questions/15610053/correct-printf-format-specifier-for-size-t-zu-or-iu)）。

该[标准](https://stackoverflow.com/a/2550799/1691873)从未明确说明 的确切数据长度`size_t`，因此我建议您首先检查`size_t`平台上的长度，然后选择其中一个：

```
if sizeof(size_t) == 4 use PRIu32
if sizeof(size_t) == 8 use PRIu64 
```

我建议使用`stdint`类型而不是原始数据类型来保持一致性。

            回答 #9

赞同：-4

时间：2009-02-25T17:20:50.497

我记得，唯一可移植的方法是将结果转换为“unsigned long int”并使用`%lu`.

```
printf("sizeof(int) = %lu", (unsigned long) sizeof(int)); 
```

            回答 #10

赞同：-9

时间：2010-03-26T11:19:10.307

对 off_t 使用“%zo”。（八进制）或十进制的“%zu”。

        iphone - iPhone SDK：UIWebView 阻止图像加载/下载

ID：586930

赞同：6

时间：2009-02-25T17:12:03.297

标签：iphone, objective-c, xcode

如何在 Xcode 中使用 UIWebView 以便在加载页面时不下载图像（以加快加载页面）？

            回答 #1

赞同：4

时间：2009-05-08T16:01:21.637

`UIWebView`是 WebKit full 的一个苍白、可怜的小影子，`WebView`这很容易。`-webView:shouldStartLoadWithRequest:navigationType:`只被调用导航。它不会像`WebPolicyDelegate`在 mac 上那样被每个请求调用。有了`UIWebView`，我将如何解决这个问题：

实施`-webView:shouldStartLoadWithRequest:navigationType:`并将其设置为始终返回`NO`。但是您也会接受请求并生成一个`NSURLConnection`. 完成`NSURLConnection`获取数据后，您将在其中查找任何 IMG 标记并将它们修改为您想要的任何占位符。然后您将生成的字符串加载到`UIWebView`using 中`-loadHTMLString:baseURL:`。

当然，在 iPhone 上解析 HTML 并不是一件容易的事，Javascript 加载器会给你带来麻烦，所以这不是一个完美的答案，但它是我所知道的最好的答案。

            回答 #2

赞同：1

时间：2009-12-17T12:55:56.770

扩展 Rob 的答案。我注意到当 loadHTMLString:baseURL: 并且总是返回 NO 时，webView:shouldStartLoadWithRequest:navigationType: 只是不断被调用。（我怀疑 loadHTMLString 调用了另一个 shouldStartLoadWithRequest）。

所以我必须做的是在返回 YES/NO 之间交替，我使用 NSScanner 解析 HTML 并将 src="http://..." 更改为 src=""

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    if (pageHasNoImages==YES)
    {
        pageHasNoImages=FALSE;
        return YES;     
    }
    NSString* newHtml;
    NSString* oldHtml;
    NSData *urlData;
    NSURLResponse *response;
    NSError *error;
    urlData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
    oldHtml=[[NSString alloc] initWithData:urlData encoding:NSUTF8StringEncoding];

    newHtml=[self.detail scannerReplaceImg:oldHtml]; // my own function to parse HTML
    newHtml=[self.detail scannerReplaceAds:newHtml]; // my own function to parse HTML
    if (newHtml==nil) 
    {
        NSLog(@"newHtml is nil");
        newHtml=oldHtml;
    }
    [oldHtml release];

    pageHasNoImages=TRUE;
    [web loadHTMLString:newHtml baseURL:request.URL];

    return NO;
} 
```

            回答 #3

赞同：0

时间：2009-02-25T18:14:40.883

成为 UIWebView 的代理，然后拦截调用：

```
– webView:shouldStartLoadWithRequest:navigationType: 
```

检查文档中 navigationType 的值。我相信你会得到最好的`NO`回报`navigationType == UIWebViewNavigationTypeOther`。

            回答 #4

赞同：0

时间：2009-12-11T13:26:55.540

这实际上会导致页面加载速度更快吗？听起来图像仍在下载中，但我们只是没有将它们提供给 UIWebView。

还是 shouldStartLoadWithRequest 只是先加载 HTML 文本？

        javascript - jQuery change() 开启和 firefox 我有一个下拉菜单，它在更改时触发 ajax 调用： $('.travel-to').change(function(){ $.ajax({ type: "GET", url: "/inc/rates/ rate-viewer.php"，数据："shtech=y&c_name="+escape($(this).val())，成功：function(html){ $(".rates-viewer").html(html); $("

ID：586936

赞同：19

时间：2009-02-25T17:12:55.087

标签：javascript, jquery, firefox, drop-down-menu

            回答 #1

赞同：26

时间：2009-02-25T17:23:42.520

您实际上是在利用 IE 中的一个错误。Firefox 正确支持 onChange，因为它不应该在浏览器失去选择字段的焦点之前触发。（事实上​​，我昨天[回答了一个](https://stackoverflow.com/questions/580281/redirect-automatically-when-selecting-an-item-from-a-select-drop-down-list/580317#580317)关于这个问题的问题。）将 onChange 与 select 一起使用实际上有点危险，特别是因为只有键盘的用户无法跳过某些选项。（最重要的是，鼠标滚轮*似乎*由多个答案旋转，但它实际上会为它在 IE 上经过的每个条目触发 onChange。）

如果您真的希望在有人向上或向下按下时触发事件，我会挂接到 onKeyPress 或 onKeyDown 事件，以便在按下“向上”或“向下”键时触发。

            回答 #2

赞同：8

时间：2014-02-25T12:41:38.413

更好的选择是`.on()`将函数绑定为多个事件

```
$("#member").on("change keyup", function(){
    -----
}); 
```

            回答 #3

赞同：2

时间：2009-02-25T17:46:44.180

也许不使用 change() 事件，而是使用 blur() 事件并检查值是否更改？

仅供参考，我没有对此进行测试，只是我的一个想法。而且我不确定这是否是预期的效果，因为它会在失去焦点时触发，但我建议这样做是为了在不同的浏览器中保持效果一致。

```
var currentValue;

$('.travel-to').blur(function(){
    var val = $(this).val();
    if (currentValue != val) {
        currentValue = val;
        $.ajax({
            type: "GET",
            url: "/inc/rates/rates-viewer.php",
            data: "shtech=y&c_name="+escape(currentValue),
            success: function(html){
                $(".rates-viewer").html(html);
                $(".rates-viewer tr.numbers td").css({ opacity: 0 }).fadeTo("slow",1);
            }
        });
    }
}); 
```

            回答 #4

赞同：1

时间：2012-07-02T16:00:06.380

我刚刚在 Firefox 中经历了一些奇怪的行为，它使用户能够打开选择下拉菜单，使用箭头导航，然后用户可以单击另一个元素而不是跳出或单击一侧，这将导致更改选择值而无需触发`change`事件。

要解决此问题，您可以在触发（请还建议其他事件？）事件`change`时`keyup`触发并且 select 具有与前一个不同的值。

```
var selectRegistry = {},
    $selects = $('select');

$selects.bind('change', function() {
    var $this = $(this);
    selectRegistry[$this.attr('id')] = $this.val();
});

$selects.bind('keyup scroll select', function() {
    var $this = $(this);
    if ($this.val()!=selectRegistry[$this.attr('id')])
    {
        $this.trigger('change');
    }
}); 
```

`.live()`如果您将在网页运行时动态创建选择元素，则可以使用函数。

            回答 #5

赞同：0

时间：2012-09-06T14:33:10.953

我使用 jquery [focusout让它工作](http://api.jquery.com/focusout/)

[http://api.jquery.com/focusout/](http://api.jquery.com/focusout/)

        ssl - 应用程序中的 SSL 链接策略

ID：586942

赞同：1

时间：2009-02-25T17:14:30.747

标签：ssl, https

在给定的应用程序中，当某些页面需要安全而其他页面不需要时，我很想听听其他人会做什么。取消任何需要单独域/子域的解决方案。在这种情况下，所有调用，无论是安全的还是不安全的，都将链接到同一个域。我看到几个选项：

1.  笨手笨脚的，只是确保一切接近。
2.  一种 URI 重写解决方案，可确保通过 https 协议访问需要安全的页面，并且要么忽略其他页面，要么强制这些页面使用标准 http
3.  一种以应用程序为中心的方法，其中每个链接负责了解它是否指向并应用正确的协议。在此解决方案中，所有链接都必须是完全合格的。
4.  以应用程序为中心的方法的自由放任版本，其中指向安全页面的链接是完全合格的，而指向其他页面的链接则不是。在这种情况下，对于未明确处理的页面，该协议将被继承，并且可以通过 https 访问无关紧要的页面。

我不时使用其中的几个，但它们都有缺点。在这种情况下，其他人都在做什么？还有其他我没有考虑过的路径吗？

**更新：**

vartec 下面的回答让我意识到我遗漏了一条关键信息。在我的网络配置中，所有 SSL 处理都在负载均衡器级别处理。然后，LB 通过端口 80 与 Web 服务器集群通信。因此，应用程序本身不知道流量是否安全到达。他们所看到的只是一个端口 80 连接。

谢谢。

            回答 #1

赞同：0

时间：2009-02-25T17:25:00.033

我混合使用了#4 和#2：当我需要切换协议时，尽量指定绝对 URL，并实现服务器端重定向以捕获我没有使用绝对 URL 的任何链接（或者如果有人访问该 URL直接，而不是通过链接）。

在我看来，一件重要的事情是安全访问需要安全访问的页面（表单提交等），为此我使用 Apache 的`SSLRequireSSL`指令。它使我自己很容易验证某些页面将永远不会被访问，除非通过 SSL。

            回答 #2

赞同：0

时间：2009-02-25T17:25:31.360

我支持笨拙的确保一切安全的方法，但是后来您通过（在我看来很奇怪）排除了域/子域解决方案，将我的真正解决方案从桌面上取消了。保护站点的错误远比一些处理开销更危险。

我们有我们的主站点，它是不安全的（但主要是营销），然后我们有一个不同的子域的应用程序站点。简单、容易和有效。为什么要取消这个选项？

            回答 #3

赞同：0

时间：2009-02-25T17:27:46.860

以应用程序为中心的方法，每个页面的控制器都知道它是否必须是安全的。如果它需要安全，但通过不安全的 http 访问，则重定向到 https，并传递所有参数。

        c# - BinarySearch 没有预期结果

ID：586960

赞同：3

时间：2009-02-25T17:20:16.753

标签：c#, .net, binary-search

我已经使用 xpath 从 xml 文件填充了日期的排序列表（以 dd/mm/yyyy 格式存储为字符串）。

但是，当查询列表以查看列表中是否存在日期时，我总是得到否定的结果（即不存在），即使我已经硬编码查询字符串以匹配列表中的日期。

但是，在对包含查询字符串的索引进行字符串比较时，我得到 0 表示字符串是相同的。

什么会导致这种奇怪的行为？

按照这里的要求是代码

假期由以下人员组成：

```
while (iter.MoveNext())
{
    XPathNavigator nav2 = iter.Current;
    XPathNodeIterator iter2 = nav2.SelectDescendants("date", "", false);
    while (iter2.MoveNext())
    {
        date = iter2.Current.ToString();
        holidays.Add(date);
    }
}

return holidays; 
```

搜索是：

```
holidays = list.getHolidays();
if(holidays.BinarySearch(DateTime.Now.ToShortDateString()) > 0) 
```

返回以下 XML：

```
<date>01/01/2009</date>
<date>25/02/2009</date>
<date>10/04/2009</date>
<date>13/04/2009</date>
<date>04/05/2009</date>
<date>25/05/2009</date>
<date>31/08/2009</date>
<date>25/12/2009</date>
<date>28/12/2009</date> 
```

            回答 #1

赞同：10

时间：2009-02-25T17:24:44.480

我相信这与字符串的格式有关。您的列表按日、月、年排序，这是不正确的。

你需要像这样格式化你的字符串：

年年/月/日

然后对列表进行排序，您的搜索应该会起作用。

如果这些是日期（如 中[`DateTime`](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)），那么列表会正确排序，但由于它们是字符串，并且您的格式不支持基于字符串的自然属性进行排序，所以您的排序顺序全都搞砸了。

        asp.net - 明确指定程序集？

ID：586963

赞同：2

时间：2009-02-25T17:21:04.740

标签：asp.net, assemblies, explicit

对于来自供应商的一些软件，我收到了这个模棱两可的参考错误。问题是，我需要在我的项目中保留这两个 DLL，因为它的各个部分都使用两者的代码。所以...我需要知道显式指定程序集的语法。换句话说，我想完全按照错误消息告诉我的去做——但我在任何地方都找不到它的语法。很多人都有这个问题，谷歌搜索出现了很多“关闭 VS 并重新打开项目”或“你需要更新”的解决方案——但我不是在寻找那个——我只是想明确指定要使用的程序集在这个文件中。我真的很讨厌必须修复供应商代码。为什么这个语法没有在 MSDN 的任何地方列出？如果你有链接，请发布它，我想我以前见过它，但我现在找不到它。

```
<%@ Control Language="vb" AutoEventWireup="false" Codebehind="Settings.ascx.vb" 
Inherits="TIMSSCMS.DNN.Modules.CustomerDemographics.Settings" %> 
```

'TIMSSCMS.DNN.Modules.CustomerDemographics.Settings' 类型不明确：它可能来自程序集 'c:\inetpub\wwwroot\EbusMain\bin\AWWA.DNN.Modules.CustomerDemographics.DLL' 或程序集 'c:\ inetpub\wwwroot\EbusMain\bin\Personify.DNN.Modules.CustomerDemographics.DLL'。请在类型名称中明确指定程序集。

            回答 #1

赞同：1

时间：2009-02-25T18:15:49.117

你的意思是这样吗？

```
TIMSSCMS.DNN.Modules.CustomerDemographics.Settings, TIMSSCMS.DNN, Version=x.x.x.x, Culture=neutral, ( PublicKeyToken=...) 
```

            回答 #2

赞同：0

时间：2009-02-25T18:06:42.027

如果供应商 DLL 是强命名的，只需对“继承”值使用完全限定的程序集名称，包括 PublicKeyToken。见[MSDN](http://msdn.microsoft.com/en-us/library/k8xx4k69(VS.80).aspx)

        sql-server-2005 - 一个简单的 MDX 问题

ID：586966

赞同：1

时间：2009-02-25T17:22:23.270

标签：sql-server-2005, olap, mdx

我是 MDX 的新手，我知道这一定是一个简单的问题，但我一直无法找到答案。

我正在模拟一个有问题和答案的问卷。我想要实现的是找出对问题给出具体答案的人数。例如，20-25 岁之间的男性人数

当我单独针对问题运行下面的查询时，将返回正确的结果

```
SELECT
      [Measures].[Fact Demographics Count] ON Columns
FROM
      [Dsv All]            
WHERE
      [Answer].[Dim Answer].&[1] 
```

`[Measures].[Fact Demographics Count]`是主键列的计数

`[Answer].[Dim Answer].&[1]`是男性答案的关键

男性人数的结果 = 150 20-25 之间的人数的结果 = 12

但是当我在下面运行下一个查询时，而不是获取年龄在 20-25 岁之间的男性人数。我得到男性人数和 20-25 岁之间人数的总和。

```
SELECT 
      [Measures].[Fact Demographics Count] ON Columns
FROM
      [Dsv All]            
WHERE
      {[Answer].[Dim Answer].&[1],[Answer].[Dim Answer].&[9]} 
```

结果 = 162

事实表的结构是

FactDemographicsKey,

RespodentKey,

问题键，

答案键

任何帮助将不胜感激

谢谢

            回答 #1

赞同：1

时间：2009-02-25T17:37:23.530

看看 MDX 函数 FILTER - 这可能会给你你需要的东西。结合过滤器和成员属性来过滤 ID 可能会做到这一点。您遇到了问题，因为您尝试做的事情有点违背 OLAP 多维数据集的结构（根据我的经验），因为 Age 和 Gender 都是同一维度的成员（Answers），这意味着它们每个都有自己的单元格进行聚合，但与 Age 和 Gender 各自在自己的维度上不同，它们不会相互聚合，除非加在一起。在 OLAP 多维数据集中，每个维度的每个成员与每个其他维度的每个成员的每个组合都会获得一个“单元格”，其中包含对该组合唯一的每个度量值的值 - 这就是您想要的，

如果可能的话，我建议将单独的答案分解成单独的维度，即 Age 和 Gender 都有自己的维度和自己的成员，那么你想做的事情自然会从你的立方体中流出。否则，恐怕您将有大量的 MDX 小提琴工作要做。（不过，我不是 MDX 专家，所以我可能完全不了解这个，但这是我的理解）

另外，一定要阅读前面提到的书，MDX 解决方案，除非这是您认为需要编写的唯一 MDX 查询。MDX 和多维分析与 SQL 完全不同，对 OLAP 数据库的结构和 MDX 的一般结构的深刻理解是绝对必要的，这本书非常非常好地让你在那个部门中达到了你需要的位置*。*

            回答 #2

赞同：0

时间：2009-02-25T17:56:22.143

当试图找出 where-criteria 或 slice 的问题时，我发现将要切片的项目分解为维度而不是度量很有帮助。

```
select
      [Measures].[Fact Demographics Count] on Columns
from  [Dsv All]            
where
{
    [Answer].[Dim Answer].&[1],
    [Dim Age Band].[20-25]
} 
```

尽管那时您并没有真正使用 MDX 的强大功能 - 您只获得了一个值。

```
select
      [Dim Answer].Members on Columns,
      [Dim Age Band].Members on Rows
from  [Dsv All] 
where ( [Measures].[Fact Demographics Count] ) 
```

会给你一个数据透视表（或交叉表），按年龄带（在行上）分解性别（在列上）。

顺便说一句 - 如果您正在学习 MDX 这本书：[MDX Solutions](https://rads.stackoverflow.com/amzn/click/com/0471748080)无疑是我发现的最佳起点。

            回答 #3

赞同：0

时间：2009-02-26T16:48:16.917

首先感谢大家的回复。这是一个有趣的问题，对于任何刚接触 MDX 并来自 SQL 的人来说，这是一个很容易掉入的陷阱。

因此，对于那些感兴趣的人，这里是该解决方案的简要概述。  

我有 3 张桌子

1.  factDemographics：保存受访者及其答案（谁回答了什么）

2.  dimAnswer: 答案

3.  dimRespondent：受访者

在多维数据集的数据源视图中，我使用命名查询将 factDemographics 复制了 5 次，并将这些命名为 fact1、fact2、...、fact5。（这将创建 5 个度量值组）

使用 VS Studio 的创建多维数据集向导，我设置了以下事实表

1.  fact1, fact2, ... 作为事实表
2.  dimRespondent 一个事实表。我使用此表来获取受访者的数量。
3.  删除了原来的 factDemographics 表。

创建多维数据集后，我将 dimAnswer 维度复制了 5 次，将它们命名为 filter1、filter2、...

最后在 Cube Structure 的 Dimension Usage 选项卡中，我将它们链接在一起，如下所示

filter1 多对多 dimRespondent   

filter2 多对多 dimRespondent   

filter3 多对多 dimRespondent   

filter4 多对多 dimRespondent   

filter5 多对多 dimRespondent

filter1 正则关系 fact1

filter2 正则关系 fact2

filter3 正则关系 fact3

filter4 正则关系 fact4

filter5 正则关系 fact5

现在，这使我能够将我在原始帖子中使用的查询重写为

```
SELECT
    [Measures].[Dim Respondent Count] On 0
FROM
    [DemographicsCube]
WHERE
    (
        [Filter1].[Answer].&[Male],
        [Filter2].[Answer].&[20-25]
    ) 
```

我的查询现在最多可以过滤 5 个问题。

虽然这可行，但我确信有一个更优雅的解决方案。如果有人知道那是什么，我很想听听。

谢谢

            回答 #4

赞同：-1

时间：2009-02-25T17:31:37.710

如果您使用的是 MSSQL，您可以使用“WITH ROLLUP”来获取一些额外的行，这些行将包含您想要的信息。此外，您没有使用您需要的“GROUP BY”。

使用 GROUP BY 将集合分成组，然后使用聚合函数来获取您的计数和其他统计信息。

例子：

```
select AGE, GENDER, count(1)
from MY_TABLE
group by AGE, GENDER
with rollup 
```

这将为您提供每个年龄组中表格中每个性别的人数，“汇总”将为您提供表格中的总人数，每个年龄组中的人数，无论性别如何，以及人数每个性别不分年龄。就像是

```
AGE GENDER COUNT
--- ------ -----
 20      M  1245
 21      M  1012
 20      F   942
 21      F   838
         M  2257
         F  1780
 20         2187
 21         1850
            4037 
```

        c# - 如何获得一个轴的多维长度

ID：586972

赞同：2

时间：2009-02-25T17:24:21.957

标签：c#, arrays

我有一个数组，例如

```
 string[,] SSISVariableNameValue = new string[,] 
            {
            {"DestinationConfigDB","dest db"},
            {"DestinationServer","dest server"},
            {"SourceConfigDB","source db"},
            {"SourceServer","source server"},
            {"SSISConfigFilter","filter"}
            }; 
```

.length 属性列为 10。我怎样才能得到这个数组的“x”轴……除了除以 2？

            回答 #1

赞同：11

时间：2009-02-25T17:35:54.953

数组有一个 Rank 属性来告诉你维数和一个 GetLength(int d) 函数来给你一个特定维度的大小。d = 0 .. Rank-1

所以你要`SSISVariableNameValue.GetLength(0);`

        internationalization - I18N 安全是什么意思？

ID：586973

赞同：66

时间：2009-02-25T17:24:34.483

标签：internationalization, terminology

我在一些代码中遇到了一条评论，提到所述代码是“I18N 安全”的。

这是指什么？

            回答 #1

赞同：86

时间：2009-02-25T17:32:10.627

I +（大约 18 个字符）+ N = InternationalizationN

I18N 安全意味着在设计和开发过程中采取了有助于稍后进行本地化 (L10N) 的步骤。

            回答 #2

赞同：13

时间：2009-02-25T17:33:02.543

这通常是指为 I18N 准备的代码或构造 - 即常见的 I18N 技术很容易支持。例如，以下内容已准备就绪：

```
printf(loadResourceString("Result is %s"), result); 
```

而以下不是：

```
printf("Result is " + result); 
```

因为不同语言的词序可能不同。Unicode 支持、国际日期时间格式等也符合条件。

**编辑：**添加 loadResourceString 以使示例接近现实生活。

            回答 #3

赞同：10

时间：2009-02-25T17:31:48.397

i18n 表示**国际**化n => i ( **18 个字母**) n。标记为 i18n 安全的代码将是正确处理非 ASCII 字符数据（例如 Unicode）的代码。

            回答 #4

赞同：7

时间：2009-02-25T17:31:01.283

国际化。它的派生是“字母I，十八个字母，字母N”。

            回答 #5

赞同：5

时间：2009-02-25T17:26:10.407

I18N 代表国际化。

            回答 #6

赞同：4

时间：2018-11-23T17:12:39.683

[![在此处输入图像描述](https://i.stack.imgur.com/xYlMn.png)](https://i.stack.imgur.com/xYlMn.png)

它是国际化的代名词。  

与 Acronym 不同，numeronym 是一个基于数字的词（例如 411 = information，k9 = canine）；

在代码中，这通常是一个文件夹标题，它通常指的是可以在国际环境中工作的代码——具有不同的语言环境、键盘、字符集等......”

在此处阅读更多信息：[http ://www.i18nguy.com/origini18n.html](http://www.i18nguy.com/origini18n.html)

            回答 #7

赞同：3

时间：2009-02-25T17:35:13.020

i18n 是“国际化”的简写。这是在 DEC 创造的，实际上使用小写的*i*和*n*。

作为旁注： L10n 代表“本地化”，并使用大写*L*将其与小写*i*区分开来。

            回答 #8

赞同：1

时间：2009-02-25T17:32:33.230

如果没有任何其他信息，我猜这意味着代码将文本处理为 UTF8 并且可以识别区域设置。有关更多信息，请参阅[此 Wikipedia 文章](http://en.wikipedia.org/wiki/I18N)。

你能更具体一点吗？

            回答 #9

赞同：1

时间：2009-02-25T17:35:10.010

I18N 代表[国际](http://en.wikipedia.org/wiki/I18N)化。

简而言之：I18N 安全代码意味着它使用某种查找表来查找 UI 上的文本。为此，您必须支持非 ASCII 编码。这似乎很容易，但有一些[陷阱](http://www.codinghorror.com/blog/archives/001075.html)。

            回答 #10

赞同：1

时间：2009-02-26T02:32:56.707

i18n-safe 是一个模糊的概念。它通常指的是可以在国际环境中工作的代码——具有不同的语言环境、键盘、字符集等。真正的 i18n 安全代码很难编写。

这意味着代码不能依赖：

sizeof (char) == 1

因为该字符可能是 UTF-32 4 字节字符，也可能是 UTF-16 2 字节字符，并且占用多个字节。

这意味着代码不能依赖等于字符串中字节数的字符串长度。这意味着代码不能依赖于指示空终止符的字符串中的零字节。这意味着代码不能简单地假设文本文件、字符串和输入的 ASCII 编码。

            回答 #11

赞同：1

时间：2017-06-20T03:55:31.093

“I18N 安全”编码是指不引入 I18N 错误的代码。I18N 是国际化的一个数字名称，其中 I 和 N 之间有 18 个字符。

与 i18n 相关的问题有多种类别，例如： 文化格式：日期时间格式（英国的 DD/MM/YY 和美国的 MM/DD/YY）、数字格式、时区、测量单位因文化而异。数据必须被接受、处理并以适合正确文化/地区的正确格式显示。国际字符支持：应正确接受、处理和显示来自所有不同语言的所有字符。可本地化：可翻译的字符串不应该是硬编码。它们应该在资源文件中外部化。

“I18N Safe”编码意味着上述问题都不是由代码编写方式引入的。

            回答 #12

赞同：0

时间：2010-12-29T23:36:18.090

i18n 处理 - 将硬编码的字符串从代码中移出（并非所有都应该这样做），以便它们可以被本地化/翻译（本地化 == L10n），正如其他人所指出的那样，并且还处理 - 区域设置敏感方法，例如——处理文本处理的方法（日语文本中有多少单词是很明显的：），不同语言/书写系统中的排序/排序，——处理日期/时间（最简单的例子是显示 am/pm美国，例如法国的 24 小时制，针对特定国家/地区使用更复杂的日历），--处理阿拉伯语或希伯来语（UI、文本等的方向），-- 编码正如其他人指出的那样-数据库问题是一个比较全面的角度。仅仅处理“字符串外部化”是远远不够的。

一些（软件）语言在帮助开发人员编写 i18n 代码（意味着将在不同语言环境中运行的代码）方面比其他语言更好，但这仍然是软件工程的责任。

        c# - Google Gears SQL Lite DB 和 C#

ID：586974

赞同：2

时间：2009-02-25T17:24:41.127

标签：c#, google-gears

在幕后，Google Gears 使用 SQL Lite 作为其数据存储。有没有人使用 C# 成功连接到 Google Gears SQL Lite DB？

谢谢

            回答 #1

赞同：0

时间：2009-03-01T10:18:11.430

//嗨，试试这个：

```
//Courtesy of http://www.codoxide.com/post/My-Favorite-Database-Wrapper-for-C.aspx
using System;
using System.Collections.Generic;
using System.Text;
using System.Data;
using System.Data.Common;

namespace GenApp.Core.Providers.nsDb
{
    //comm -- / <summary>
    //comm -- / Abstract base class for encapsulating provider independant database interactin logic. 
    //comm -- / </summary>
    //comm -- / <typeparam name="CONNECTION_TYPE"><see cref="DbConnection"/> derived Connection type.</typeparam>
    //comm -- / <typeparam name="COMMAND_TYPE"><see cref="DbCommand"/> derived Command type.</typeparam>
    //comm -- / <typeparam name="ADAPTER_TYPE"><see cref="DbDataAdapater"/> derived Data Adapter type.</typeparam>
    public abstract 
        class AbstractDatabase<CONNECTION_TYPE, COMMAND_TYPE, ADAPTER_TYPE> : IDisposable
        where CONNECTION_TYPE : DbConnection, new()
        where COMMAND_TYPE : DbCommand
        where ADAPTER_TYPE : DbDataAdapter, new()
    {
        #region : Connection :

        //comm -- / <summary>Gets the Connection object associated with the current instance.</summary>
        public DbConnection Connection
        {
            get
            {
                if (internal_currentConnection == null)
                {
                    internal_currentConnection = new CONNECTION_TYPE();
                                        // - Enable to measure the connection timeGenApp.Core.Providers.nsDbMeta.DbDebugger.WriteIf ( ref userObj , "GetConnectionString START" );
                    internal_currentConnection.ConnectionString = GetConnectionString();
                                        // - Enable to measure the connection timeGenApp.Core.Providers.nsDbMeta.DbDebugger.WriteIf ( ref userObj , "GetConnectionString END" );
                }
                return internal_currentConnection;
            }
        }
        private DbConnection internal_currentConnection;

        //comm -- / <summary>When overridden in derived classes returns the connection string for the database.</summary>
        //comm -- / <returns>The connection string for the database.</returns>
        protected abstract string GetConnectionString();

        #endregion

        #region : Commands :

        //comm -- / <summary>Gets a DbCommand object with the specified <see cref="DbCommand.CommandText"/>.</summary>
        //comm -- / <param name="sqlString">The SQL string.</param>
        //comm -- / <returns>A DbCommand object with the specified <see cref="DbCommand.CommandText"/>.</returns>
        public DbCommand GetSqlStringCommand(string sqlString)
        {
            if (this.Connection.State != ConnectionState.Open)
                this.Connection.Open();

            DbCommand cmd  = this.Connection.CreateCommand();
            cmd.CommandType = CommandType.Text;
            cmd.CommandText = sqlString;
            return cmd;
        }

        //comm -- / <summary>Gets a DbCommand object with the specified <see cref="DbCommand.CommandText"/>.</summary>
        //comm -- / <param name="sqlStringFormat">The SQL string format.</param>
        //comm -- / <param name="args">The format arguments.</param>
        //comm -- / <returns>A DbCommand object with the specified <see cref="DbCommand.CommandText"/>.</returns>
        public DbCommand GetSqlStringCommand(string sqlStringFormat, params object[] args)
        {
            return GetSqlStringCommand(string.Format(sqlStringFormat, args));
        }

        //comm -- / <summary>Gets a DbCommand object for the specified Stored Procedure.</summary>
        //comm -- / <param name="storedProcName">The name of the stored procedure.</param>
        //comm -- / <returns>A DbCommand object for the specified Stored Procedure.</returns>
        public DbCommand GetStoredProcedureCommand(string storedProcName)
        {
            if (this.Connection.State != ConnectionState.Open)
                this.Connection.Open();

            DbCommand cmd    = this.Connection.CreateCommand();
            cmd.CommandType   = CommandType.StoredProcedure;
            cmd.CommandText   = storedProcName;
            return cmd;
        }

        #region : Parameters :

        //comm -- / <summary>Adds an input parameter to the given <see cref="DbCommand"/>.</summary>
        //comm -- / <param name="cmd">The command object the parameter should be added to.</param>
        //comm -- / <param name="paramName">The identifier of the parameter.</param>
        //comm -- / <param name="paramType">The type of the parameter.</param>
        //comm -- / <param name="value">The value of the parameter.</param>
        //comm -- / <returns>The <see cref="DbParameter"/> that was created.</returns>
        public DbParameter AddInParam(DbCommand cmd, string paramName, DbType paramType, object value)
        {
            DbParameter param       = cmd.CreateParameter();
            param.DbType            = paramType;
            param.ParameterName     = paramName;
            param.Value             = value;
            param.Direction         = ParameterDirection.Input;
            cmd.Parameters.Add( param );
            return param;
                } //eof method AddInParam

        //comm -- / <summary>Adds an input parameter to the given <see cref="DbCommand"/>.</summary>
        //comm -- / <param name="cmd">The command object the parameter should be added to.</param>
        //comm -- / <param name="paramName">The identifier of the parameter.</param>
        //comm -- / <param name="paramType">The type of the parameter.</param>
        //comm -- / <param name="size">The maximum size in bytes, of the data table column to be affected.</param>
        //comm -- / <param name="value">The value of the parameter.</param>
        //comm -- / <returns>The <see cref="DbParameter"/> that was created.</returns>
        public DbParameter AddInParam(DbCommand cmd, string paramName, DbType paramType, int size, object value)
        {
            DbParameter param       = cmd.CreateParameter();
            param.DbType            = paramType;
            param.ParameterName     = paramName;
            param.Size              = size;
            param.Value             = value;
            param.Direction         = ParameterDirection.Input;
            //debugGenApp.Core.Providers.nsDbMeta.DbDebugger.WriteIf ( ref userObj , "Adding IN param " + value.ToString ( ) );
            cmd.Parameters.Add(param);
            return param;
        }

        public DbParameter AddInOutParam ( DbCommand cmd, string paramName, DbType paramType, int size, object value )
            {
            DbParameter param = cmd.CreateParameter ( );
            param.DbType = paramType;
            param.ParameterName = paramName;
            param.Size = size;
            param.Value = value;
            param.Direction = ParameterDirection.Output;
            cmd.Parameters.Add ( param );
            //debug if needed here 
            return param;
            }

        public DbParameter AddInOutParam ( DbCommand cmd, string paramName, DbType paramType, object value )
            {
            DbParameter param = cmd.CreateParameter ( );
            param.DbType = paramType;
            param.ParameterName = paramName;
            param.Value = value;
            param.Direction = ParameterDirection.Output;
            cmd.Parameters.Add ( param );
            return param;
            }

        #endregion

        #region : Executes :

        //comm -- / <summary>Executes the specified command against the current connection.</summary>
        //comm -- / <param name="cmd">The command to be executed.</param>
        //comm -- / <returns>Result returned by the database engine.</returns>
        public int ExecuteNonQuery(DbCommand cmd)
        {
            if (this.Connection.State != ConnectionState.Open)
                this.Connection.Open();

            return cmd.ExecuteNonQuery();
        }

        //comm -- / <summary>Executes the specified command against the current connection.</summary>
        //comm -- / <param name="cmd">The command to be executed.</param>
        //comm -- / <param name="txn">The database transaction inside which the command should be executed.</param>
        //comm -- / <returns>Result returned by the database engine.</returns>
        public int ExecuteNonQuery(DbCommand cmd, DbTransaction txn)
        {
            if (this.Connection.State != ConnectionState.Open)
                this.Connection.Open();

            cmd.Transaction = txn;
            return cmd.ExecuteNonQuery();
        }

        //comm -- / <summary>Executes the specified command against the current connection.</summary>
        //comm -- / <param name="cmd">The command to be executed.</param>
        //comm -- / <returns>Result returned by the database engine.</returns>
        public DbDataReader ExecuteReader(DbCommand cmd)
        {
            if (this.Connection.State != ConnectionState.Open)
                this.Connection.Open();

            return cmd.ExecuteReader();
        }

        //comm -- / <summary>Executes the specified command against the current connection.</summary>
        //comm -- / <param name="cmd">The command to be executed.</param>
        //comm -- / <param name="behavior">One of the <see cref="System.Data.CommandBehavior"/> values.</param>
        //comm -- / <returns>Result returned by the database engine.</returns>
        public DbDataReader ExecuteReader(DbCommand cmd ,  CommandBehavior behavior )
        {
            if (this.Connection.State != ConnectionState.Open)
                this.Connection.Open();

            return cmd.ExecuteReader(behavior);
        }

        //comm -- / <summary>Executes the specified command against the current connection.</summary>
        //comm -- / <param name="cmd">The command to be executed.</param>
        //comm -- / <returns>Result returned by the database engine.</returns>
        public T ExecuteScalar<T>(DbCommand cmd, T defaultValue)
        {
            if (this.Connection.State != ConnectionState.Open)
                this.Connection.Open();

            object retVal = cmd.ExecuteScalar();
            if (null == retVal || DBNull.Value == retVal)
                return defaultValue;
            else
                return (T)retVal;
        }

        //comm -- / <summary>Executes the specified command against the current connection.</summary>
        //comm -- / <param name="cmd">The command to be executed.</param>
        //comm -- / <returns>Result returned by the database engine.</returns>
        public DataSet ExecuteDataSet(DbCommand cmd)
        {
            ADAPTER_TYPE adapter  = new ADAPTER_TYPE();
            adapter.SelectCommand = (COMMAND_TYPE)cmd;

            DataSet retVal = new DataSet();
            adapter.Fill(retVal);
            return retVal;
        }

        ////comm -- / <summary>Executes the specified command against the current connection.</summary>
        ////comm -- / <param name="cmd">The command to be executed.</param>
        ////comm -- / <returns>Result returned by the database engine.</returns>
        //public DataSet ExecuteDataSet(DbCommand cmd )
        //{
        //  ADAPTER_TYPE adapter = new ADAPTER_TYPE();
        //  adapter.SelectCommand = (COMMAND_TYPE)cmd;
        //  //cmd.CommandTimeout = 3600
        //  DataSet retVal = new DataSet();
        //  adapter.Fill(retVal);
        //  return retVal;
        //}

        #endregion

        #endregion

        //comm -- / <summary>Begins a transaction.</summary>
        //comm -- / <returns>Created transaction.</returns>
        public DbTransaction BeginTransaction()
        {
            if (this.Connection.State != ConnectionState.Open)
                this.Connection.Open();
            return Connection.BeginTransaction();
        }

        #region : Construction / Destruction :

        //comm -- / <summary>Disposes the resources associated with the current database connection.</summary>
        ~AbstractDatabase()
        {
            Dispose();
        }

        #region IDisposable Members

        //comm -- / <summary>Disposes the resources associated with the current database connection.</summary>
        public void Dispose()
        {
            if (null != internal_currentConnection)
            {
                internal_currentConnection.Dispose();
                internal_currentConnection = null;
            }
        }

        #endregion

        #endregion

    } //eof public abstract class AbstractDatabase
} //eof namespace Providers.nsDb 

using System;
using System.Collections.Generic;
using System.Text;
using System.Data.SqlClient;

namespace GenApp.Core.Providers.nsDb
{
    public class Database : AbstractDatabase<SqlConnection, SqlCommand, SqlDataAdapter>
    {

                    private string _ConnectionString;
                    public string ConnectionString
                    {
                        get { return _ConnectionString; }
                        set { _ConnectionString = value; }
                    } //eof property FieldName 

                    public Database ( string connectionStr )
                    {
            //debugGenApp.Core.Providers.nsDbMeta.DbDebugger.WriteIf(ref userObj , " CHECK --- nsDb.Database using the following connection string " + connectionStr);
                        this.ConnectionString = connectionStr; 
                    } //eof constructor 

            protected override string GetConnectionString ( )
            {

                //GenApp.Core.Providers.nsDbMeta.DbDebugger.WriteIf ( ref userObj , "In GetConnectionString the ConnectionString is " + this.ConnectionString );
                //GenApp.Core.Providers.nsDbMeta.DbDebugger.WriteIf ( ref userObj , "The comming fromURL IS " + commingFromURL );
                return this._ConnectionString;
            } //eof protected override string GetConnectionString()

    } //eof class 
} //eof namespace Providers.nsDb 
```

            回答 #2

赞同：0

时间：2009-03-01T10:20:49.210

//所以会像这样使用它：//

public bool RunProcGetDs (ref string msg, string domainName, string procedureName, ref DataSet ds) {

```
 #region Action
        try
        {
            using (Database db = new Database ( _ConnectionString ))
            {
                DbCommand cmd = db.GetStoredProcedureCommand ( procedureName );
                db.AddInParam ( cmd, "@domain_user", DbType.String, (object)domainName );

                GenApp.Core.Providers.nsDbMeta.DbDebugger.WriteIf ( ref userObj , "METHOD START --- MetaDbControl.cs RunProcGetDs + \n" );

                ds = db.ExecuteDataSet ( cmd );
                Utils.Debugger.DebugDataSet("from RunProcGetDs ", ref ds);

                //debug msg = "Select the values for your reports";
                return true;
            } //eof using
        } //eof try
        #endregion Action

        #region CatchExceptionsAdv4
        catch (NullReferenceException nre)
        {
            System.Diagnostics.StackTrace st = new System.Diagnostics.StackTrace ();
            string methodName = st.GetFrame ( 1 ).GetMethod ().Name;
            string className = st.GetFrame ( 1 ).GetFileName ();
            int lineNumber = st.GetFrame ( 1 ).GetFileLineNumber ();

            string encryptedErrorCode = String.Empty;
            encryptedErrorCode += "className - " + className + " methodName ";
            encryptedErrorCode += methodName + " lineNumber " + lineNumber.ToString ();
            encryptedErrorCode += userObj.DomainName;

            if (System.Convert.ToInt16 ( BL.Conf.Instance.Vars["EncryptErrorMessages"] ) == 1)
                encryptedErrorCode = Utils.DataEncryption.EncryptString ( encryptedErrorCode, userObj.DomainName );

            userObj.Mc.Msg = "An error in the application occurred. Report the following error code " + encryptedErrorCode;
            userObj.Mc.ClassName += className + " ; " ;
            userObj.Mc.MethodName += methodName + " ; " ;
            userObj.Mc.DebugMsg += nre.Message;

            if (DbDebugger.DebugAppError ( ref userObj ) == false)
            {
                userObj.Mc.Msg = "Failed to debug application error at " + methodName; 
```

GenApp.Core.Providers.nsDbMeta.DbDebugger.WriteIf (userObj.Mc.Msg); } 返回假；} //eof 捕获

```
 catch (System.InvalidOperationException ioe) //comm -- occurs when no result set was found !!!
        {
            System.Diagnostics.StackTrace st = new System.Diagnostics.StackTrace ();
            string methodName = st.GetFrame ( 1 ).GetMethod ().Name;
            string className = st.GetFrame ( 1 ).GetFileName ();
            int lineNumber = st.GetFrame ( 1 ).GetFileLineNumber ();

            string encryptedErrorCode = String.Empty;
            encryptedErrorCode += "className - " + className + " methodName ";
            encryptedErrorCode += methodName + " lineNumber " + lineNumber.ToString ();
            encryptedErrorCode += userObj.DomainName;

            if (System.Convert.ToInt16 ( BL.Conf.Instance.Vars["EncryptErrorMessages"] ) == 1)
                encryptedErrorCode = Utils.DataEncryption.EncryptString ( encryptedErrorCode, userObj.DomainName );

            userObj.Mc.Msg = "An error in the application occurred. Report the following error code " + encryptedErrorCode;
            userObj.Mc.ClassName += className + " ; " ;
            userObj.Mc.MethodName += methodName + " ; " ;
            userObj.Mc.DebugMsg += ioe.Message;

            if (DbDebugger.DebugAppError ( ref userObj ) == false)
            {
                userObj.Mc.Msg = "Failed to debug application error at " + methodName; 
```

GenApp.Core.Providers.nsDbMeta.DbDebugger.WriteIf (userObj.Mc.Msg); } 返回假；} //eof 捕获 (System.InvalidOperationException)

```
 catch (System.IndexOutOfRangeException ioore) //comm -- occurs when no result set was found !!!
        {
            System.Diagnostics.StackTrace st = new System.Diagnostics.StackTrace ();
            string methodName = st.GetFrame ( 1 ).GetMethod ().Name;
            string className = st.GetFrame ( 1 ).GetFileName ();
            int lineNumber = st.GetFrame ( 1 ).GetFileLineNumber ();

            string encryptedErrorCode = String.Empty;
            encryptedErrorCode += "className - " + className + " methodName ";
            encryptedErrorCode += methodName + " lineNumber " + lineNumber.ToString ();
            encryptedErrorCode += userObj.DomainName;

            if (System.Convert.ToInt16 ( BL.Conf.Instance.Vars["EncryptErrorMessages"] ) == 1)
                encryptedErrorCode = Utils.DataEncryption.EncryptString ( encryptedErrorCode, userObj.DomainName );

            userObj.Mc.Msg = "An error in the application occurred. Report the following error code " + encryptedErrorCode;
            userObj.Mc.ClassName += className + " ; " ;
            userObj.Mc.MethodName += methodName + " ; " ;
            userObj.Mc.DebugMsg += ioore.Message;

            if (DbDebugger.DebugAppError ( ref userObj ) == false)
            {
                userObj.Mc.Msg = "Failed to debug application error at " + methodName; 
```

GenApp.Core.Providers.nsDbMeta.DbDebugger.WriteIf (userObj.Mc.Msg); } 返回假；} //eof 捕获 (System.IndexOutOfRangeException)

```
 catch (System.Data.SqlClient.SqlException sqle)
        {
            System.Diagnostics.StackTrace st = new System.Diagnostics.StackTrace ();
            string methodName = st.GetFrame ( 1 ).GetMethod ().Name;
            string className = st.GetFrame ( 1 ).GetFileName ();
            int lineNumber = st.GetFrame ( 1 ).GetFileLineNumber ();

            string encryptedErrorCode = String.Empty;
            encryptedErrorCode += "className - " + className + " methodName ";
            encryptedErrorCode += methodName + " lineNumber " + lineNumber.ToString ();
            encryptedErrorCode += userObj.DomainName;

            if (System.Convert.ToInt16 ( BL.Conf.Instance.Vars["EncryptErrorMessages"] ) == 1)
                encryptedErrorCode = Utils.DataEncryption.EncryptString ( encryptedErrorCode, userObj.DomainName );

            userObj.Mc.Msg = "An error in the application occurred. Report the following error code " + encryptedErrorCode;
            userObj.Mc.ClassName += className + " ; " ;
            userObj.Mc.MethodName += methodName + " ; " ;
            userObj.Mc.DebugMsg += sqle.Message;

            if (DbDebugger.DebugAppError ( ref userObj ) == false)
            {
                userObj.Mc.Msg = "Failed to debug application error at " + methodName; 
```

GenApp.Core.Providers.nsDbMeta.DbDebugger.WriteIf (userObj.Mc.Msg); } 返回假；} //eof 捕获

```
 catch (System.FormatException fe)
        {
            System.Diagnostics.StackTrace st = new System.Diagnostics.StackTrace ();
            string methodName = st.GetFrame ( 1 ).GetMethod ().Name;
            string className = st.GetFrame ( 1 ).GetFileName ();
            int lineNumber = st.GetFrame ( 1 ).GetFileLineNumber ();

            string encryptedErrorCode = String.Empty;
            encryptedErrorCode += "className - " + className + " methodName ";
            encryptedErrorCode += methodName + " lineNumber " + lineNumber.ToString ();
            encryptedErrorCode += userObj.DomainName;

            if (System.Convert.ToInt16 ( BL.Conf.Instance.Vars["EncryptErrorMessages"] ) == 1)
                encryptedErrorCode = Utils.DataEncryption.EncryptString ( encryptedErrorCode, userObj.DomainName );

            userObj.Mc.Msg = "An error in the application occurred. Report the following error code " + encryptedErrorCode;
            userObj.Mc.ClassName += className + " ; " ;
            userObj.Mc.MethodName += methodName + " ; " ;
            userObj.Mc.DebugMsg += fe.Message;

            if (DbDebugger.DebugAppError ( ref userObj ) == false)
            {
                userObj.Mc.Msg = "Failed to debug application error at " + methodName; 
```

GenApp.Core.Providers.nsDbMeta.DbDebugger.WriteIf (userObj.Mc.Msg); } 返回假；} //eof 捕获

```
 catch (Exception ex)
        {
            System.Diagnostics.StackTrace st = new System.Diagnostics.StackTrace ();
            string methodName = st.GetFrame ( 1 ).GetMethod ().Name;
            string className = st.GetFrame ( 1 ).GetFileName ();
            int lineNumber = st.GetFrame ( 1 ).GetFileLineNumber ();

            string encryptedErrorCode = String.Empty;
            encryptedErrorCode += "className - " + className + " methodName ";
            encryptedErrorCode += methodName + " lineNumber " + lineNumber.ToString ();
            encryptedErrorCode += userObj.DomainName;

            if (System.Convert.ToInt16 ( BL.Conf.Instance.Vars["EncryptErrorMessages"] ) == 1)
                encryptedErrorCode = Utils.DataEncryption.EncryptString ( encryptedErrorCode, userObj.DomainName );

            userObj.Mc.Msg = "An error in the application occurred. Report the following error code " + encryptedErrorCode;
            userObj.Mc.ClassName += className + " ; " ;
            userObj.Mc.MethodName += methodName + " ; " ;
            userObj.Mc.DebugMsg += ex.Message;

            if (DbDebugger.DebugAppError ( ref userObj ) == false)
            {
                userObj.Mc.Msg = "Failed to debug application error at " + methodName; 
```

GenApp.Core.Providers.nsDbMeta.DbDebugger.WriteIf (userObj.Mc.Msg); } 返回假；} //eof catch #endregion CatchExceptionsAdv4

```
 } //eof method 
```

            回答 #3

赞同：0

时间：2009-03-10T13:22:19.760

看看我最喜欢的[SQLite ADO.NET Wrapper](http://sqlite.phxsoftware.com/)，我个人在很多项目中都使用了它。我想，Google Gears 使用的是默认 SQLite 数据库，并在代码中进行了一些修改，以防止 ATTACH 和#PRAGMA 使用。但是数据格式应该是相同的，因此您应该能够使用此包装器访问它。

最好的问候，马丁

        internet-explorer - 在 Mac OS X 上测试 IE6

ID：586980

赞同：10

时间：2009-02-25T17:25:35.353

标签：internet-explorer

我希望能够在 Mac OS X 上全面测试我的网页的兼容性。我已经安装了 Parallels 桌面。它工作正常，但它使用了很多资源......

所以我希望能够测试 OS X 中的所有内容。事实上，我正在寻找适用于 Mac 的 Explorer 6。

周围有什么建议吗？

            回答 #1

赞同：9

时间：2009-02-25T17:30:26.807

IE 6 从未为 Mac 编写。  

您可以尝试使用 VMWare Fusion 而不是 Parallels；您可能会在资源使用方面获得更好的结果。

正如其他海报所指出的，另一种解决方案是通过 Wine 在 OS X 上运行 IE。但是，Wine 上的 IE 6 并不能保证与通过 VM（VMWare 或 Parallels）在 Windows 上运行它相同。Wine Apps DB 列出了 IE 6 的 Wine 兼容性青铜级别（最低级别）。这可能不是您希望在 IE 平台上验证应用程序的方式。

            回答 #2

赞同：4

时间：2010-03-21T17:53:42.993

另一种选择是使用 BrowserShots (browsershots.org) 之类的工具。我发现它非常适合基本的兼容性测试。你不需要在你的机器上安装任何东西，你可以在等待下载屏幕截图的同时继续做其他事情。

缺点是您不能将其用于完整的 Web 应用程序测试，但从您最初的问题来看，我认为您不需要它。

            回答 #3

赞同：3

时间：2009-09-11T15:50:40.327

我将 VirtualBox 与有效的 MS vhd 图像一起使用。这是迄今为止我用过的最好的解决方案。按照[此截屏视频](http://www.10voltmedia.com/blog/2008/12/screencast-install-internet-explorer-on-osx-using-virtualbox/)正确启动和运行。

            回答 #4

赞同：3

时间：2011-04-29T22:43:36.793

IE Mac PRO 可能会对您有所帮助，请参阅[http://www.ie-mac.com/](http://www.ie-mac.com/)。它允许您使用您要求的 Internet Explorer 6，以及 Mac 上的 7、8 和 9，无需虚拟机或使用大量资源。但它需要互联网连接，因为它是通过 RDP 提供的 IE。

            回答 #5

赞同：2

时间：2011-04-14T20:46:23.433

[Adobe Browser Lab](https://browserlab.adobe.com/)可让您在各种浏览器和不同平台上测试您的设计。浏览器实验室返回您的网站在所选浏览器中的外观图像。

            回答 #6

赞同：1

时间：2009-02-27T23:17:04.947

即net render 0.9，firefox插件...在远程计算机上制作页面，并以图像的形式向您展示它的外观...我现在的#1解决方案

            回答 #7

赞同：1

时间：2009-09-11T15:40:03.877

我尝试在 virtualbox 下使用 microsoft vhd 映像，但它要我注册，而注册系统声称它的 windows id 错误或其他东西。如果你想试试，你可以从这里下载 vhd：

[http://www.microsoft.com/downloads/details.aspx?FamilyId=21EABB90-958F-4B64-B5F1-73D0A413C8EF&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyId=21EABB90-958F-4B64-B5F1-73D0A413C8EF&displaylang=en)

和来自 www.virtualbox.org 的虚拟盒子。

它会加载并运行未修改的 vhd，但在第一次重新启动时会遇到问题。

            回答 #8

赞同：1

时间：2010-03-21T17:36:00.823

远程桌面连接可能是一种轻松的方式，它不需要运行虚拟机，但需要额外的电脑。

            回答 #9

赞同：0

时间：2009-02-25T17:30:47.603

[http://www.tatanka.com.br/ies4linux/news/49](http://www.tatanka.com.br/ies4linux/news/49) 
“完整的 Mac OS X 支持”

            回答 #10

赞同：0

时间：2009-09-11T15:36:37.987

我发现 crossover mac [http://www.codeweavers.com/products/cxmac/](http://www.codeweavers.com/products/cxmac/)非常易于使用，而且他们有 30 天的免费试用期。

        delegates - 将委托与消息一起使用

ID：586990

赞同：0

时间：2009-02-25T17:28:54.753

标签：delegates, messages, max, minimum

我正在学习代表，并认为我可能已经找到了一个用途。基本上我所拥有的是一系列字符串属性，它们具有最小值和最大值，如下所示：

```
string weightInvalid(min as int32, max as int32) 
```

有几条这样的消息，所有消息都具有唯一的消息，但都共享相同的最小值和最大值签名。我认为可以在这里使用委托，但我将如何去做呢？它真的会帮助我查看一些代码，这样我就可以掌握这个委托的东西。

            回答 #1

赞同：0

时间：2009-02-25T17:37:04.513

在 C# 上：

```
delegate string weightInvalid(int min, int max);

string MyWeightInvalid(int min, int max)
{
    return "";
}

string SomeMethod()
{

    weightInvalid myFunc = new weightInvalid(MyWeightInvalid);
    return myFunc(0, 1);
} 
```

            回答 #2

赞同：0

时间：2009-02-25T17:42:17.683

下面是一个简单的控制台应用程序示例，可能会有所帮助...

```
public delegate string foo(int min, int max);

    class Program
    {
        static void Main(string[] args)
        {
            CallFoo(foo1);
            CallFoo(foo2);
            CallFoo(foo3);

            Console.WriteLine("Press ENTER to exit...");
            Console.ReadLine();
        }

        private static void CallFoo(foo foo)
        {
            Console.WriteLine(foo(1, 2));
        }

        private static string foo1(int min, int max)
        {
            return "foo1";
        }

        private static string foo2(int min, int max)
        {
            return "foo2";
        }

        private static string foo3(int min, int max)
        {
            return "foo3";
        } 
```

``` 
``` 
```