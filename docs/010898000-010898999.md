# StackOverflow 问答 10898000-10898999

# objective-c - 向伊斯兰日历添加年份组件失败

> ID：10898002
> 
> 赞同：9
> 
> 时间：2012-06-05T13:14:21.730
> 
> 标签：objective-c, ios, nscalendar, nsdatecomponents

下面的代码显示了问题：从 1435 年的第一天提前一整年不会导致 1436 年的第一天。

任何想法我错过了什么？

```
NSDateComponents *components = [[NSDateComponents alloc] init];
[components setDay:1];
[components setMonth:1];
[components setYear:1435];

NSCalendar *islamic = [[NSCalendar alloc] initWithCalendarIdentifier:NSIslamicCalendar];
NSDate *date = [islamic dateFromComponents:components];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setCalendar:islamic];
[dateFormatter setTimeStyle:NSDateFormatterNoStyle];
[dateFormatter setDateStyle:NSDateFormatterMediumStyle];

NSLog(@"%@", [dateFormatter stringFromDate:date]);  // -> 01.01.1435

NSDateComponents *offsetComponents = [[NSDateComponents alloc] init];
[offsetComponents setYear:1];

NSDate *dateWithOffset = [islamic dateByAddingComponents:offsetComponents toDate:date options:0];

NSLog(@"%@", [dateFormatter stringFromDate:dateWithOffset]); 
// -> 30.12.1435 ... WHY NOT 01.01.1436 ???? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T14:49:14.290

我的怀疑是因为夏季/冬季（夏令时）的差异。嗯。1, 1435 落在 2013 年 11 月 5 日，而 Muh. 1, 1436 落在 2014 年 10 月 25 日。第一个日期是在冬季，第二个是在夏季。

您创建的第一个 NSDate 正好是 2013 年 11 月 5 日 00:00（午夜）。“dateByAddingComponents:”通过将组件转换为秒，并将其添加到第一个日期来工作。在这种情况下，结果是 2014 年 10 月 24 日 23:00，因为是夏令时。

这也意味着由于时区之间的夏令时差异，世界各地不同人的结果可能会有所不同。

您可以通过将第一个日期设置为中午而不是午夜来防止该问题（这在使用纯日期时通常是一个好主意）：

```
NSDateComponents *components = [[NSDateComponents alloc] init];
[components setDay:1];
[components setMonth:1];
[components setYear:1435];
[components setHour:12]; 
```

现在，这是否是“dateByAddingComponents”的正确行为是另一个问题。

# ruby-on-rails - rails app 奇怪的错误，没有跟踪，没有日志输出帮助请认真发出“！！处理请求时出现意外错误：

> ID：10898004
> 
> 赞同：4
> 
> 时间：2012-06-05T13:14:29.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

突然之间，即使在更换我的应用程序后，我也会收到如下错误：

```
!! Unexpected error while processing request: undefined method `show' for "/":String 
```

我已经用几个小时前的备份替换了我的代码，当我通过打开浏览器并单击真实页面来构建新功能时，我不断测试我的应用程序，备份中的旧代码完美运行，但现在我无法让我的应用程序运行不再工作

帮助！任何更高级的 ruby​​ on rails 编码器可以帮助我解决这个问题？谢谢

rails/server 的完整输出而不是日志！

```
 /Users/jordan/.rvm/rubies/ruby-1.9.3-p194/bin/ruby -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) /Users/jordan/apps/books/script/rails server -b 0.0.0.0 -p 3000 -e development
=> Booting Thin
=> Rails 3.2.3 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
>> Thin web server (v1.3.1 codename Triple Espresso)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:3000, CTRL+C to stop
!! Unexpected error while processing request: undefined method `show' for "/":String
!! Unexpected error while processing request: undefined method `show' for "/":String
!! Unexpected error while processing request: undefined method `show' for "/":String
!! Unexpected error while processing request: undefined method `show' for "/":String
!! Unexpected error while processing request: undefined method `show' for "/profiles":String
!! Unexpected error while processing request: undefined method `show' for "/about":String 
```

**尝试过的事情**

*   清理路由文件
*   重启机器
*   从宝石集中移除所有宝石并干净安装
*   在 Rails 应用程序上测试了另一个 ruby​​，效果很好

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T12:29:42.767

**解决方案和经验教训**

我有一个用于记录资产的自定义初始化程序，这个在升级到最新的 ruby​​ on rails 版本时搞砸了。如果您遇到这种奇怪的行为，请务必在应用程序代码之前检查 /config/ 和初始化程序；p

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-29T22:22:26.050

我知道这是一个旧答案，但我最近遇到了类似的错误消息。

通过从版本 1.5 -> 1.6.1 升级，我能够从 Thin 获得清晰的堆栈跟踪，它在中间件级别提供了更完整的问题日志记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:37:04.583

如果您可以重现错误，您知道请求是由哪个操作处理的，您应该从该控制器方法开始，然后从那里逐行执行。

# c++ - std::vector 的 std::vector 邻接

> ID：10898007
> 
> 赞同：29
> 
> 时间：2012-06-05T13:14:52.320
> 
> 标签：c++, vector, stdvector

我知道在`std::vector<T>`内部将它的数据连续存储（除非它是`std::vector<bool>`）在旧`C++03`标准和新标准中`C++11`。

处理这个问题并引用标准的很好的stackoverflow问题：[answer](https://stackoverflow.com/a/849190/884412)，[answer](https://stackoverflow.com/a/247764/884412)。

嵌套向量中的数据`std::vector <std::vector <T> >`呢？它是如何存储的？

如果每个内部向量都需要连续存储其数据，那么`&v[n] == &v[0] + n for all 0 <= n < v.size()`.

用稍微不同的话来说，是否可以像访问一维向量一样“简单地”顺序访问存储在这种嵌套结构中*的所有元素（通过指针或类似方法）？*

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-05T13:19:48.780

不。 a 的元素`vector`存储在动态分配的内存块中；否则，容量`vector`无法增加。该`vector`对象仅包含指向该块的指针。

元素按顺序存储的要求仅适用于元素本身，而不适用于这些元素的任何动态分配的成员。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-05T13:21:10.717

回答你的最后一个问题：不。向量向量的元素不是连续存储的。

考虑以下代码：

```
std::vector<std::vector<int> > vv;
.... fill in v[0], v[1], v[2], etc
std::vector <int> & v = vv[1];
v.push_back (23); 
```

如果它们都连续存储，那么这将导致 vv[2]、vv[3] 等中的每个元素移动。这怎么可能工作，因为你只是影响一个单一的向量'v'？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-05T13:20:56.793

`std::vector< std::vector<T> >`是对象的向量，它们存储在连续的内存块中。不过，这些对象也是向量的事实是无关紧要的。

尽管向量的元素存储在连续的内存块中，但元素所在的内存并不是向量对象本身的一部分。

***“是否可以像访问一维向量一样“简单地”并按顺序（通过指针或类似方法）访问存储在这种嵌套结构中的所有元素？***
要访问 的元素`std::vector`，最好使用`operator[]`or`at()`方法，而不是检索第一个元素的地址并使用指针运算。对于表示为向量的向量的多维数组，我建议您`operator[]`使用易于使用且易于阅读的`myVector[i][j]`. 也值得一看[vector::at 与 vector::operator[]](https://stackoverflow.com/q/9376049/1168156) :)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-26T14:00:55.233

> 是否可以像访问一维向量一样“简单地”并按顺序（通过指针或类似方法）访问存储在这种嵌套结构中的所有元素？

是的，*如果*：

*   您只需要在向量向量的末尾添加东西，并且

*   您愿意用自定义数据结构替换向量构造的向量

然后你可以做的是将所有这些子向量连接到一个连续的缓冲区中，另一个索引缓冲区用于通过顶级条目索引访问它。

有关此问题的更多讨论，请参阅[我的文章](http://upcoder.com/2/efficient-vectors-of-vectors/)，以及示例“折叠向量向量”类实现。

# ios - 使用 OpenAL，我们如何播放 iPod 库歌曲？

> ID：10898010
> 
> 赞同：1
> 
> 时间：2012-06-05T13:15:11.337
> 
> 标签：ios

使用 OpenAL，如果我们将 iPod 库歌曲 URL 路径发送到 OpenAL，我们如何在 iOS 上播放 iPod 库歌曲？

# php - 如何获得喜欢 Facebook 页面的 Facebook 用户

> ID：10898015
> 
> 赞同：0
> 
> 时间：2012-06-05T13:15:20.890
> 
> 标签：php, facebook

我有一个 facebook 页面和它的 pageid。在我的基于 php 的网站中，我有一个与该 facebook 页面相关的点赞按钮插件。像按钮工作正常。

但我想获得喜欢特定页面的用户或他们的 Facebook 用户 ID。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:28:53.020

在您到 facebook 网站的链接中，应该有一个“show_faces”，将其设置为 true，它将显示所有喜欢您页面的人（或至少与您分配给 facebook 的区域一样多的人)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:28:57.737

无法获得喜欢您页面的 facebook 用户 id 列表。这是关于用户隐私的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:31:58.643

如果你是页面管理员，你可以去`https://www.facebook.com/browse/?type=page_fans&page_id=PAGEID`查看最近的 500 个列表。目前没有已知的 API 功能可以做到这一点。

# algorithm - 密码学：虚拟财产所有权的数字签名？

> ID：10898017
> 
> 赞同：3
> 
> 时间：2012-06-05T13:15:26.487
> 
> 标签：algorithm, encryption, cryptography, digital-signature

假设我们有一个多用户系统，其中：

*   中央机构 (C) 可以创建并发行虚拟商品 (Zk) 给它自己的所有权。
*   商品（Zk）的所有者（Xi）可以将所有权转让给另一个用户（Xj）。
*   用户 (Xi) 可以声称拥有一个商品 (Zk)，这应该是可验证的。

例如：

1.  C 创建两个虚拟物品 Z1 和 Z2。（并且从未创建过 Z3）
2.  C 将 Z1 的所有权转让给用户 X1
3.  X1 将 Z1 的所有权转让给 X2

以下声明应测试为真：

*   X2声称拥有Z1
*   C声称拥有Z2

以下声明应测试为假：

*   X2 声称拥有 Z2（不是所有者）
*   X2声称拥有Z3（不存在）
*   X1 声称拥有 Z1（前所有者）

以下是问题：

*   这种系统的架构草图是什么？
*   我们使用哪些加密方法（数字签名、pki 等？）以及以何种方式使用？
*   创建了哪些密钥以及将它们提供给谁？
*   C 使用什么算法来创建一个好的 Zk？
*   Xi 和 Xj 用于转移所有权的算法是什么？
*   Xi 使用什么算法来生成拥有 Zk 的声明？
*   Xi 使用什么算法来验证 Xj 拥有 Zk 的声明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:57:41.010

数字签名用于验证发件人生成的消息确实是由该发件人生成的。在这种情况下，您可以使用数字签名来验证产品的生成者确实是中央机构。在这种情况下，产品将始终具有 CA 使用那里的私钥生成的数字签名，然后任何人都可以使用 CA 的公钥进行验证。

移情，这就是它变得困难的地方。哪一方将进行验证。它将成为 CA，还是只是为了让第 2 方在购买该物品之前知道第 1 方是真正的（和合法的）所有者，或者两者兼而有之？

好的，根据您的评论。我认为答案是始终让 CA 参与其中。在这种情况下，您基本上可以始终通过所有者系统上的 AES 等对称算法对虚拟物品进行加密，直到使用时为止。解密虚拟物品的密钥永远不会（长期）存储在所有者系统上，而是在请求时由 CA 传递。现在 CA 可以保存当前有效用户的密钥。这些密钥是如何存储或计算的，我稍后会谈到。

对于用户 Xj 验证项目 Z1 确实属于用户 Xi，这可以像 CA 签署由所有者的用户 ID 和项目的加密副本组成的消息与 CA 私钥一样简单。由于用户名包含在消息中，当用户 Xj 使用 CA 的公钥验证签名时，用户 Xj 知道它是有效的并且归用户 Xi 所有。

设置密钥：CA 显然应该有一个非对称密钥对（私有和公共）。每个用户还应该有一个非对称密钥对。CA 将与其用户共享其公钥，每个用户将与 CA 共享他/她的公钥（这可以是某种形式的帐户设置的一部分）。用户现在将通过加密唯一用户 ID 来登录 CA，该唯一用户 ID 使用用户的私钥加密和签名，并将公钥附加到消息中。CA 使用提供的公钥解密（所有这些都可以在 SSL 设置中处理，或者本质上是第二层加密以帮助更好地保护唯一 ID）。当购买发生时，CA 可以通过执行用户唯一 ID、虚拟物品的序列号和 CA' 的 HASH 来创建一个密钥。s PRIVATE 密钥用作对称算法的输入密钥。CA 现在使用这个新计算的密钥加密项目，并使用他们的 (CA) 私有非对称密钥对其进行签名。新加密的项目现在被发送到用户的系统。CA 不必存储密钥，因为他们知道如何计算它，CA 的私钥仍然受到保护，因为您正在获取它的 HASH 以及其他内容，并且该项目现在为每个用户唯一加密。

现在要解密有效项目，用户已经登录，并且 CA 已经知道这是该项目的有效所有者，因此可以计算密钥并将其 SSL 传递给用户以进行实时解密。但是，此密钥永远不会存储在机器上。

现在，如果不拥有该项目的用户尝试使用有效用户项目的副本，则会发生以下两种情况之一，非所有者用户将登录并计算该项目的错误密钥，因此该项目将不正确地解密，CA 可以执行自动识别用户实际上并不拥有该项目并从那里锁定所有帐户的项目，让有效用户的帐户知道有人试图使用那里的项目，等等......

转移：有效用户将登录并声明他们想要将项目转移给另一个用户。此时，该项目与所有者 1 解除关联，并重新与所有者 2 关联。由于 CA 拥有所有密钥生成，因此所有者 1 将不再能够解密其项目。事实上，在转移点，软件可以简单地删除所有者 1 本地系统上的副本。

对不起，这是冗长的，但这些类型的问题通常是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:21:38.057

这个问题有点出自经典的密码学原语。正如另一个答案所详细提到的，您需要使用公钥加密。以下是我能想到的程序：

商品的所有权，比如商品ID和用户公钥的绑定，需要权威CA追踪，确保所有商品都是唯一拥有的。

*   如果商品最初是由用户创建的，用户需要将其公钥和商品 ID 提交给 CA 进行背书。（如果商品本身是不可变的，我们可以使用制图哈希值作为商品ID，强制商品和商品ID唯一绑定。否则，我们需要引入额外的方案来跟踪商品和商品ID之间的绑定，我们不再讨论这里）
*   我们必须依靠 CA 来证明所有权。用户向 CA 发布公钥和商品 ID 元组，CA 返回 true 或 false。
*   为了转移所有权，所有者在货物 ID、他的公钥和新所有者的公钥上生成一个签名给 CA。CA 检查并更新其数据库，可能还会通知新所有者。
*   为了尽量减少 CA 参与所有权证明，一种解决方案是让 CA 发出定时的“所有权票据”——货物 id、所有者公钥和无效日期的签名，这样 CA 就不必参与每个所有权验证过程。货主在票到期前更新票。此外，货物只有在超过无效日期后才能转让。

The major role of CA is to guarantee no two users can claim a same goods, which I'll call it "double-claiming". It is very difficult to get rid of "double-claiming" vulnerability in a decentralized manner. There is a very interesting project named [bitcoin](http://bitcoin.org/) that tries to address the very similar question. It provides a novel solution to go away with CA. The [design paper](http://bitcoin.org/bitcoin.pdf) covers the essential idea, if you are interested.

# ios - 用于与 iPhone 设备进行 SSL 握手的 MDM 服务器证书

> ID：10898018
> 
> 赞同：2
> 
> 时间：2012-06-05T13:15:26.563
> 
> 标签：ios, x509certificate, mdm

我正在尝试在 iPhone 设备和我的 MDM 服务器之间执行 SSL 握手。我使用了 iPhone 配置实用程序 (iPCU) 并配置了 SCEP 和 MDM。SCEP 工作正常，设备收到 CA 颁发的证书。

在MDM Payload中，我使用了主题中APNS证书的主题，并输入了1234端口的服务器IP。作为身份，我使用了SCEP证书的身份。

iPhone 生成密钥并成功注册，但是当它尝试通过联系 MDM 服务器安装配置文件时，我在 IPCU 控制台中收到此错误： **https://[IP here]:1234 的服务器证书无效**

在我使用 C#.NET 编程的 MDM 服务器应用程序中，它抱怨**AuthenticationException：SSPI 已失败，因为上下文已过期且无法再使用。**所以我的问题是，我的 MDM 服务器上应该有什么证书 - 是从 iOS 配置门户收到的 MDM 证书、客户的 Apple 推送证书还是 SCEP 服务器的证书？

如果有人可以回答这个问题，我将非常感激，因为我已经花了几个小时但我无法弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T22:28:53.017

当 iOS 设备向您的 MDM 服务注册时，它需要知道它正在与正确的服务器通信。您的 MDM 服务器的 SSL 证书可以帮助它做到这一点。此证书与其他 Web 服务证书一样，其 CN（通用名称）将使用 iOS 设备用于注册 MDM 服务的 URL 中的名称。例如，如果 MDM 注册 URL 是`https://mymdmservice.mydomain.com`CN，则`mymdmservice.mydomain.com`.

MDM 服务的证书签名链需要被移动设备识别。特别是，您可以使用由通常的注册商之一（例如 Verisign 或 Comodo）颁发的任何证书。

您*可以*使用自签名证书，但必须将其添加到设备的受信任根证书存储中（请参阅[http://fixmyitsystem.com/2012/01/install-corporate-pki-root-ca-on-ios .html](http://fixmyitsystem.com/2012/01/install-corporate-pki-root-ca-on-ios.html)）。

# jquery - slideUp 后的 jquery 回调

> ID：10898020
> 
> 赞同：16
> 
> 时间：2012-06-05T13:15:29.360
> 
> 标签：jquery

我有这个代码：

```
$('.SomeDiv').slideUp(400);
setTimeout(function () { SomeFunction(); }, 400); 
```

如何重写它并删除它`setTimeout`，使其`SomeFunction`成为`slideUp`.

谢谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-05T13:16:33.623

方法[`slideUp()`](http://api.jquery.com/slideUp/)有`callback`论据。因此，您可以通过以下方式轻松完成：

```
$(".SomeDiv").slideUp(400, function() {
    // Animation complete.
    SomeFunction();
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-04T14:53:42.780

事实上，你可以简单地使用：

```
$(".SomeDiv").slideUp(400, CallBackFunction);
```

# operating-system - 计数信号量和二进制信号量的区别

> ID：10898022
> 
> 赞同：30
> 
> 时间：2012-06-05T13:15:34.373
> 
> 标签：operating-system, semaphore

计数和二进制信号量有什么区别。

我在某处看到的是，两者都可以控制 N 个请求资源的进程。两者都采取和自由状态。

二进制信号量和计数信号量可以保护多少资源是否有任何限制？

两者都只允许一个进程一次使用一个资源......

还有其他区别吗？上述属性是否正确？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-05T13:43:29.860

Actually, both types are used to synchronize access to a shared resource, whether the entity which is trying to access is a process or even a thread.

The difference is as follows:

Binary semaphores are binary, they can have two values only; one to represent that a process/thread is in the critical section(code that access the shared resource) and others should wait, the other indicating the critical section is free.

On the other hand, counting semaphores take more than two values, they can have any value you want. The max value X they take allows X process/threads to access the shared resource simultaneously.

For further information, take a look at this link.
[http://www.chibios.org/dokuwiki/doku.php?id=chibios:articles:semaphores_mutexes](http://www.chibios.org/dokuwiki/doku.php?id=chibios:articles:semaphores_mutexes)

**EDIT**
The max value that a counting semaphore can take is the the number of processes you want to allow into the critical section at the same time.
Again, you might have a case where you want exclusion over a certain resource, yet you know this resource can be accessed by a max number of processes (say X), so you set a counting semaphore with the value X.

This would allow the X processes to access that resource at the same time; yet the process X+1 would have to wait till one of the processes in the critical section gets out.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-22T20:13:45.163

构建并发程序有两个基本概念——同步和互斥。我们将看到这两种类型的锁（信号量更普遍地是一种锁定机制）如何帮助我们实现同步和互斥。

信号量有两部分：一个计数器和一个等待访问特定资源的任务列表。一个信号量执行两个操作：等待（P）[这就像获取一个锁]，和释放（V）[类似于释放一个锁]——这是唯一可以对信号量执行的两个操作。在二进制信号量中，计数器在逻辑上介于 0 和 1 之间。您可以将其视为类似于具有两个值的锁：打开/关闭。计数信号量有多个计数值。

重要的是要了解信号量计数器跟踪不必阻塞的任务的数量，即它们可以取得进展。任务阻塞，仅当计数器为零时才将自己添加到信号量列表中。因此，如果一个任务无法进行，它会被添加到 P() 例程中的列表中，并使用 V() 例程“释放”。

现在，很明显可以看到二进制信号量如何用于解决同步和互斥问题——它们本质上是锁。

前任。同步：

```
thread A{
semaphore &s; //locks/semaphores are passed by reference! think about why this is so.
A(semaphore &s): s(s){} //constructor
foo(){
...
s.P();
;// some block of code B2
...
}

//thread B{
semaphore &s;
B(semaphore &s): s(s){} //constructor
foo(){
...
...
// some block of code B1
s.V();
..
}

main(){
semaphore s(0); // we start the semaphore at 0 (closed)
A a(s);
B b(s);
} 
```

在上面的例子中，B2 只能在 B1 执行*完毕*后执行。假设线程 A 首先执行 - 到达 sem.P()，然后等待，因为计数器为 0（关闭）。线程 B 出现，完成 B1，然后释放线程 A - 然后完成 B2。这样我们就实现了同步。

现在让我们看一下二进制信号量的互斥：

```
thread mutual_ex{
semaphore &s;
mutual_ex(semaphore &s): s(s){} //constructor
foo(){
...
s.P();
//critical section
s.V();
...
...
s.P();
//critical section
s.V();
...

}

main(){
semaphore s(1);
mutual_ex m1(s);
mutual_ex m2(s);
} 
```

互斥也很简单——m1和m2不能同时进入临界区。因此，每个线程都使用相同的信号量为其两个关键部分提供互斥。现在，是否有可能拥有更大的并发性？取决于关键部分。（想想还有什么方法可以使用信号量来实现互斥......*提示*：我一定只需要使用*一个*信号量吗？）

计数信号量：具有多个值的信号量。让我们看看这意味着什么——一个具有*多个值*的锁？如此开放，封闭，然后......嗯。多级锁在互斥或同步中有什么用？

让我们采取两者中更容易的一点：

使用计数信号量进行同步：假设您有 3 个任务 - #1 和 2 您希望在 3 之后执行。您将如何设计同步？

```
thread t1{
...
s.P();
//block of code B1

thread t2{
...
s.P();
//block of code B2

thread t3{
...
//block of code B3
s.V();
s.V();
} 
```

因此，如果您的信号量开始关闭，请确保 t1 和 t2 阻塞，被添加到信号量列表中。然后出现所有重要的 t3，完成其业务并释放 t1 和 t2。他们以什么顺序被释放？取决于信号量列表的实现。可以是 FIFO，可以基于某些特定的优先级等。（*注意*：如果您希望 t1 和 t2 按特定顺序执行，并且您不知道信号量的实现，请考虑如何安排您的 P 和 V；s）

（*找出*：如果 V 的数量大于 P 的数量会发生什么？）

使用计数信号量的互斥：我希望您为此构建自己的伪代码（*让您更好地理解事物！*） - 但基本概念是：counter = N 的计数信号量允许 N 个任务自由进入临界区. 这意味着您有 N 个任务（或线程，如果您愿意）进入临界区，但第 N+1 个任务被阻塞（进入我们最喜欢的阻塞任务列表），并且只有当某人 V 是信号量时才允许通过至少一次。所以信号量计数器，而不是在 0 和 1 之间摆动，现在在 0 和 N 之间移动，允许 N 个任务自由进出，没有人阻塞！

现在，你为什么需要这么奇怪的锁？互斥的全部意义不在于不允许多个人访问资源吗？思考。（*提示*...您的计算机中并不总是只有*一个*驱动器，是吗...？）

想一想：只有一个计数信号量就可以实现互斥吗？如果您有 10 个资源实例，并且有 10 个线程进入（通过计数信号量）并尝试使用第一个实例怎么办？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-25T06:54:27.240

The most basic difference between counting and binary semaphore is that:

1.  **Binary semaphore** cannot handle Bounded wait as its just a variable that hold binary value. **Counting semaphore** It can handle bounded wait as it has converted a variable into a structure with a Queue.
2.  Strcuture implementation **Binary semaphore**: int s;

    **Counting Semaphore**: Struct S { int s; Queue q; }

Using the counting semaphore now process once gained the CS(Critical Section) now has to wait for the other to get the CS, so not a single process strave. Each process get a chance for CS.

# php - 两个表单 HTML，仅验证提交的表单

> ID：10898030
> 
> 赞同：0
> 
> 时间：2012-06-05T13:16:28.117
> 
> 标签：php, jquery, html, forms, validation

我在一个页面上有两个表格。一个只是它所在特定页面的表单，另一个是每个页面上的侧面表单。我已经得到了一个验证器来格式化错误缠身的字段；它在不完整的字段周围显示红色框。这适用于第一个表单，但是如果您提交第二个表单，它仍将仅格式化第一个表单。我已经取出了第一个表单的代码，第二个表单完美运行。我的问题是如何让验证器只检查并提交被点击的表单？我做了一个简短的测试页来说明这个问题。

```
<!DOCTYPE >
<head>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery.validate.js"></script>
<script type="text/javascript" src="js/jquery.maskedinput.js"></script>
<script type="text/javascript" src="js/mktSignup.js"></script>
<link rel="stylesheet" type="text/css" media="screen" href="css/css.css">
</head>
<body>
<!-- When you submit this form the appropriate red boxes are shown around the errored fields-->
<form id="requestAppointment" method="post" type="actionForm"  action="." name="requestFreeConsultation">
    <label for="name">Your Name</label><br>
    <input type="text" class="stdFormFieldSml defaultInvalid" value="First Name" name="firstName" id="firstName" onclick="if(this.value=='First Name')this.value='';" />
    <input type="submit" name="firstForm" value="Submit" />
</form>
<!-- This form when you hit submit causes red boxes around the previous form's incomplete fields-->
<form name="freeConsultationWidget" action="thank-you.php" method="post">
    <label for="nameMini">Your Name</label><br>
    <input type="text" class="stdFormFieldSml defaultInvalid" value="First Name" name="firstNameMini" id="firstNameMini" onclick="if(this.value=='First Name')this.value='';" />
    <input type="image" name="secondForm" value="submit1"/>
</form>
</body>
</html> 
```

正如每个人都建议的那样，我将发布 js 文件。（我没有发布标准的 jquery 验证文件。）

```
 $(document).ready(function(){

    jQuery.validator.addMethod("password", function( value, element ) {
        var result = this.optional(element) || value.length >= 6 && /\d/.test(value) && /[a-z]/i.test(value);
        if (!result) {
            element.value = "";
            var validator = this;
            setTimeout(function() {
                validator.blockFocusCleanup = true;
                element.focus();
                validator.blockFocusCleanup = false;
            }, 1);
        }
        return result;
    }, "Your password must be at least 6 characters long and contain at least one number and one character.");

    // a custom method making the default value for companyurl ("http://") invalid, without displaying the "invalid url" message
    jQuery.validator.addMethod("defaultInvalid", function(value, element) {
        return value != element.defaultValue;
    }, "");

    jQuery.validator.addMethod("billingRequired", function(value, element) {
        if ($("#bill_to_co").is(":checked"))
            return $(element).parents(".subTable").length;
        return !this.optional(element);
    }, "");

    jQuery.validator.messages.required = "";
    $("form").validate({
        invalidHandler: function(e, validator) {
            var errors = validator.numberOfInvalids();
            if (errors) {
                var message = errors == 1
                    ? 'You missed 1 field. It has been highlighted below'
                    : 'You missed ' + errors + ' fields.  They have been highlighted below';
                $("div.error span").html(message);
                $("div.error").show();
            } else {
                $("div.error").hide();
            }
        },
        onkeyup: false,
        submitHandler: function() {
            $("div.error").hide();
            alert("submit! use link below to go to the other step");
        },
        messages: {
            password2: {
                required: " ",
                equalTo: "Please enter the same password as above"  
            },
            email: {
                required: " ",
                email: "Please enter a valid email address, example: you@yourdomain.com",
                remote: jQuery.validator.format("{0} is already taken, please enter a different address.")  
            }
        },
        debug:true
    });

  $("input.home").mask("(999) 999-9999");
  $("input.zipcode").mask("99999");
  $("input.ssNumber").mask("999-999-9999");

/*  
  var creditcard = $("ssNumber").mask("999-999-9999 9999");

  $("#cc_type").change(
    function() {
      switch ($(this).val()){
        case 'amex':
          creditcard.unmask().mask("9999 999999 99999");
          break;
        default:
          creditcard.unmask().mask("9999 9999 9999 9999");
          break;
      }
    }
  );
*/

/*
  // toggle optional billing address
  var subTableDiv = $("div.subTableDiv");
  var toggleCheck = $("input.toggleCheck");
  toggleCheck.is(":checked")
    ? subTableDiv.hide()
    : subTableDiv.show();
  $("input.toggleCheck").click(function() {
      if (this.checked == true) {
        subTableDiv.slideUp("medium");
        $("form").valid();
      } else {
        subTableDiv.slideDown("medium");
      }
  });
*/

});

$.fn.hoverClass = function(classname) {
    return this.hover(function() {
        $(this).addClass(classname);
    }, function() {
        $(this).removeClass(classname);
    });
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:33:01.593

如果您使用的是 jquery，您可以在脚本部分尝试此操作

```
$('form[name="requestAppointment"]').submit(function(){
   alert('From requestAppointment submited');// Test purpose
   // your logic
});

$('form[name="freeConsultationWidget"]').submit(function(){
   alert('From freeConsultationWidget submited');// Test purpose
   // your logic
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:25:34.550

似乎您的验证器脚本选择了页面的第一个表单，类似这样

```
 //javascript code 
 var Form = document.forms[1]; , 

 // you need to select second form, using

 var Form2 = document.forms[2]; , 
```

# xml - 如何使用 XPath 获取节点值/innerHTML？

> ID：10898035
> 
> 赞同：37
> 
> 时间：2012-06-05T13:16:41.853
> 
> 标签：xml, parsing, xpath, html-parsing

我有一个 XPath 可以选择我想要的类：`//div[@class='myclass']`. 但它返回给我整个 div （`<div class='myclass'>`还有，但我想只返回这个标签的内容而不返回标签本身。我该怎么做？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-05T14:08:39.247

```
node() = innerXml

text() = innerText 
```

两者都是数组，`text()[1]`第一个子文本节点也是如此......

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-06-05T14:48:34.500

使用 xpath，您将得到返回的东西是路径中最后一个不是条件的东西。那是什么意思？好吧，条件是`[]`'s 之间的东西（但你已经知道了）和你的读起来像*pathElement[**有一个 'class' 属性，值为 'my class'** ]*。pathElement 直接出现在`[`.

's then之外的所有东西`[]`都是路径，所以在`//a/b/c[@blah='bleh']/d` *a*，*b*，*c*和*d*都是路径元素，*blah*是属性，*bleh*是文字值。如果此路径匹配，它将返回一个*d*，即最后一个非条件事物。

您的特定路径返回一个（系列）*div*，这是您的 xpath 路径中的最后一件事。因此，此返回值包括顶级节点，在您的情况下为*div*，以及它（它们）下面的所有（它们的）子节点。节点可以是元素或文本（或注释、处理指令……）。

在一个节点下面可以有多个文本节点，因此数组 pOcHa 谈论。`x/text()`返回作为 x 的直接子节点的所有文本，`x/node()`返回所有子节点，*包括*文本。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-10-06T19:42:44.453

[***旧的常见问题的新答案：***]

对于这个 XML

```
<div class="myclass">content</div> 
```

您可以使用 XPath 通过`content`以下两种方式之一进行选择：

1.  **文本节点选择**

    这个 XPath，

    ```
    //div[@class='myclass']/text() 
    ```

    `div`将根据要求选择目标元素 的文本节点子节点`content`。

2.  **元素的字符串值**

    这个 XPath，

    ```
    string(//div[@class='myclass']) 
    ```

    将再次按要求返回目标元素 的[字符串值。](https://www.w3.org/TR/1999/REC-xpath-19991116/#dt-string-value)`div``content`

    更多信息：这是解释元素***字符串值***[的注释：](http://www.w3.org/TR/xpath/#element-nodes)

     *> 元素节点的 字符串[值](https://www.w3.org/TR/1999/REC-xpath-19991116/#dt-string-value)是该元素节点的所有文本节点[后代的](http://www.w3.org/TR/xpath/#dt-descendants)[字符串值](https://www.w3.org/TR/1999/REC-xpath-19991116/#dt-string-value)s按文档顺序串联。* 

 ** * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-11-14T11:49:12.940

你可以试试

```
//div[@class='myclass']/child::* 
```

`child::*`选择上下文节点的所有子元素[查看详细信息](http://www.w3.org/TR/xpath/)*

# excel - Excel中的自定义数字格式

> ID：10898038
> 
> 赞同：3
> 
> 时间：2012-06-05T13:17:00.527
> 
> 标签：excel, formats

不确定是否可能，自己无法弄清楚任何事情，所以在这里尝试。

我想在一个单元格中输入 4 个数字，但它们的格式如下：

```
1012 -> 1 / 0 / 1 / 2 
```

我知道我可以通过将其键入另一个单元格并从中读取第 n 个值来做到这一点，但我想避免这种情况，因为它会让输入数据的人感到困惑。

可能的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:32:14.960

如果总是有 4 位数字，那么您可以使用这样的自定义格式

`0"/"0"/"0"/"0`

要应用它，请选择单元格范围，然后右键单击 > 单元格格式 > 数字 > 自定义，然后在提供的框中键入以上内容 > 确定

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T13:34:25.810

执行单元格格式>数字>自定义并输入：

```
0" / "0" / "0" / "0 
```

![在此处输入图像描述](../Images/7a4f8ebd91339f3d8b2a1850ce6252d0.png)

# html - 哪个更好：BASE HREF 或 / 信号？

> ID：10898043
> 
> 赞同：-1
> 
> 时间：2012-06-05T13:17:26.297
> 
> 标签：html, hyperlink

我正在创建大型网站，有 URL 重写。所以这个 www.mysite.com/home 是有效的。如果我在“www.mysite.com/users/thisuser”上，则无法加载图像/css。现在引用“design/base.css”或“design/h.gif”。我听说使用这种形式“ `/`design/h.gif”可能会有所帮助，但设置 BASE HREF 也可以。我应该使用哪一个？反正我做的方法好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:38:04.297

样式表 url 应该以`/`

所有图像路径都应相对于样式表进行设置，例如`../`或`./`

# c# - 用一些颜色或标签注释代码

> ID：10898045
> 
> 赞同：2
> 
> 时间：2012-06-05T13:17:28.517
> 
> 标签：c#, visual-studio

我想知道 Visual Studio 2010 或 2012 是否有任何附加组件或插件可以让我用特殊颜色为某些代码行着色以进行注释或向其他人解释，可能在某些行上放置一些标签或标记一些带有特殊花哨文字的线条

我知道我可以为行添加书签并放置断点，但这不是我想要的，我想知道是否有更花哨的东西可以用来做更多的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:28:43.290

您可以使用[TFS 等源代码控制工具来注释](http://msdn.microsoft.com/en-us/library/bb385979.aspx)各个行。

[用于代码的StickNotes](http://stickynotes4code.com/)也是另一种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:31:00.757

我可以在 Visual Studio 中找到注释的最佳解决方案是[http://stickynotes4code.com/](http://stickynotes4code.com/)

希望这可以帮助，

# doctrine - 学说查询错误报告

> ID：10898046
> 
> 赞同：0
> 
> 时间：2012-06-05T13:17:32.367
> 
> 标签：doctrine

我想知道是否可以输出一个教义错误，相当于：

> 死（mysql_error（））；

我之所以问，是因为表单脚本没有保存数据，但也没有返回错误。而且我不知道 Doctrine 在“幕后”做什么。

非常感谢J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:52:03.893

```
class FileSqlLogger implements Doctrine\DBAL\Logging\SQLLogger {

    private $log_dir = '/var/www/logs/Doctrine/queries';

    public function startQuery($sql, array $params = null, array $types = null)
    {
        $now = new DateTime;
        $file_name = "{$this->log_dir}/{$now->format('d-m-Y')}.log";

        if (is_writable($this->log_dir))
        {
            file_put_contents($file_name, "{$now->format('H:i:s')}: Executing query '{$sql}' with parameters " . implode(', ', $params));
        }
        else
        {
            die('Error: Unable to write to the Doctrine log file!');
        }
    }

} 
```

我还没有测试过，我不知道它是否会起作用，但我认为它应该可以帮助你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T07:22:27.963

记录教义错误。

也许[这篇文章](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/configuration.html#sql-logger-optional)可以提供帮助。

# linqpad - LINQPad 找不到实体框架 4.3：无法加载文件或程序集实体框架

> ID：10898047
> 
> 赞同：3
> 
> 时间：2012-06-05T13:17:34.447
> 
> 标签：linqpad, entity-framework-4.3, assembly-resolution

我正在尝试将 LINQPad 与使用 Entity Framework 4.3 的 MVC3 项目一起使用。在 LINQPad 中，我创建一个新连接，如下所示：添加连接 -> 使用类型化数据上下文 -> EF DBContext POCO 将其指向我的程序集，提供完整的类型名，参考 web.config。然后尝试测试并查看此错误： ![LINQPad 缺少实体框架字](../Images/6cdd185a25f63674143089b7ae981145.png)

我已经通过 nuget 安装了 EF，因此 GAC 中没有引用它。（我试过了，我做不到，不认为 EF 是 GAC'able，但我在这里可能是错的）。我已将 EntityFramework.dll 复制到与 LINQPad 相同的文件夹中 - 不走运。然后将此添加到 linqpad.exe.config

```
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="EntityFramework" publicKeyToken="b77a5c561934e089" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-4.3.1.0" newVersion="4.3.1.0" />
  </dependentAssembly>
</assemblyBinding> 
```

但没有运气。继续遇到同样的问题。我已经看过[这篇文章](https://stackoverflow.com/questions/8012431/linqpad-4-unable-to-find-entityframework)并且一直[在这里](http://forums.oreilly.com/topic/52061-problems-with-linqpad-and-ef42-codefirst/)- 没有运气。

还有其他想法吗？？

ps 我使用的是 EF 4.3、LINQPad 4.42.01。刚刚尝试了最新的 LINQPad Beta 和同样的问题。

更新：据乔说，这个问题在 4.42.5 中得到修复，目前在 Beta 版中可用：www.linqpad.net/beta.aspx。确实尝试过，它确实是固定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:03:50.773

这是一个已知问题，尽管我无法修复它，因为我无法重现它。

解决方法在这里：http: [//forum.linqpad.net/discussion/21/does-linqpad-support-ef-4-3-1-now#latest](http://forum.linqpad.net/discussion/21/does-linqpad-support-ef-4-3-1-now#latest)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T20:11:09.087

我在使用带有 |DataDirectory| 的 LocalDb 连接时遇到了这个问题 别名。通过遵循 Joe 的建议来修复，只使用连接字符串创建一个单独的 web.config，但也给它一个绝对路径。

# css - CSS - 如何为输入添加不透明边框？

> ID：10898048
> 
> 赞同：-1
> 
> 时间：2012-06-05T13:17:44.537
> 
> 标签：css

我想为输入制作一个不透明的边框（透明边框），但我希望它也适用于 IE7+

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:27:32.263

为了在边界上设置不透明度，您需要使用 RGBA 配色方案，否则整个元素将采用不透明度设置。

```
border-color:rgba(255,0,0,.1) 
```

IE7 不支持 RGBA 配色方案，IE8 也不支持。您必须为这些浏览器设置实线边框，或者尝试使用[CSS3PIE](http://css3pie.com/)生成 polyfill。

见：[http ://caniuse.com/#feat=css-opacity](http://caniuse.com/#feat=css-opacity)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:38:40.143

另一种方式，使用[CSS3 边框图像](http://www.css3.info/preview/border-image/)：

`border-image: url(border.png) 27 27 27 27 round round;`

在这种情况下，使用具有不透明度的“png 24 位”是您的解决方案。

# java - JTable在绘制期间抛出IndexOutOfBoundsException

> ID：10898054
> 
> 赞同：0
> 
> 时间：2012-06-05T13:17:54.553
> 
> 标签：java, swing, jtable, defaulttablemodel, indexoutofboundsexception

嗨，我正在构建一个应用程序，使用 a`JTable`来显示数据库中的数据，并且在绘画过程中我不断地得到一个`IndexOutOfBoundException`from 。`tableModel.getValueAt(row,col)`我调试了代码，似乎数据没有保存到`DefaultTableModels`数据向量中。

这是我的代码...

```
 public class TableFrame extends JFrame{
        public static void main(String[] args){
            TableFrame frame = new TableFrame();

        }

        private TablePanel tablePanel;
        public TableFrame(){
            super();
            setSize(new Dimension(500,500));
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            tablePanel = new TablePanel();
            add(tablePanel);

            updateLabels();
            setVisible(true);
        }

        public void updateLabels() {
            setTitle("Main Frame");

            tablePanel.updateLabels();
        }

        private static class TablePanel extends JPanel{

            private DefaultTableModel tableModel;
            private DefaultTableColumnModel colModel;
            private JTable table;

            private JPanel buttonPanel;
            private JButton refreshButton;

            public TablePanel(){
                setLayout(new BorderLayout());

        buttonPanel = new JPanel(new FlowLayout());
        refreshButton = new JButton();
        refreshButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent arg0) {
                refreshData();
            }
        });
        buttonPanel.add(refreshButton);
        add(buttonPanel,BorderLayout.NORTH);

        //TODO:Set the column renderers and editors
        colModel = new DefaultTableColumnModel();
        colModel.addColumn(new TableColumn(0,75));
        colModel.addColumn(new TableColumn(0,75));
        colModel.addColumn(new TableColumn(0,75));
        colModel.addColumn(new TableColumn(0,75));
        colModel.addColumn(new TableColumn(0,75));
        colModel.addColumn(new TableColumn(0,75));
        colModel.addColumn(new TableColumn(0,75));
        colModel.addColumn(new TableColumn(0,75));
        colModel.addColumn(new TableColumn(0,75));
        colModel.addColumn(new TableColumn(0,75));
        colModel.addColumn(new TableColumn(0,75));

        tableModel = new DefaultTableModel();

        table = new JTable(tableModel,colModel);

        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane,BorderLayout.CENTER);

        updateLabels();
    }

    //This is going to query data from a database and populate the table
    //problem occurs during painting
    public void refreshData(){
        Random rand = new Random();

        for(int i=0;i<1000;i++){
            Vector<Object> fields = new Vector<Object>();
            for(int j=1;j<=11;j++){
                fields.add(rand.nextInt());
            }
            tableModel.addRow(fields);
        }
    }

    public void updateLabels() {
        colModel.getColumn(0).setHeaderValue("Col 1");
        colModel.getColumn(1).setHeaderValue("Col 2");
        colModel.getColumn(2).setHeaderValue("Col 3");
        colModel.getColumn(3).setHeaderValue("Col 4");
        colModel.getColumn(4).setHeaderValue("Col 5");
        colModel.getColumn(5).setHeaderValue("Col 6");
        colModel.getColumn(6).setHeaderValue("Col 7");
        colModel.getColumn(7).setHeaderValue("Col 8");
        colModel.getColumn(8).setHeaderValue("Col 9");
        colModel.getColumn(9).setHeaderValue("Col 10");
        colModel.getColumn(10).setHeaderValue("Col 11");

                refreshButton.setText("Refresh");

                repaint();
            }
        }
    } 
```

这是例外...

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 0 >= 0
at java.util.Vector.elementAt(Vector.java:447)
at TableFrame$TablePanel.refreshData(TableFrame.java:108)
at TableFrame$TablePanel$1.actionPerformed(TableFrame.java:64)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2012)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2335)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:404)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6268)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
at java.awt.Component.processEvent(Component.java:6033)
at java.awt.Container.processEvent(Container.java:2045)
at java.awt.Component.dispatchEventImpl(Component.java:4629)
at java.awt.Container.dispatchEventImpl(Container.java:2103)
at java.awt.Component.dispatchEvent(Component.java:4455)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4633)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4297)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4227)
at java.awt.Container.dispatchEventImpl(Container.java:2089)
at java.awt.Window.dispatchEventImpl(Window.java:2517)
at java.awt.Component.dispatchEvent(Component.java:4455)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:649)
at java.awt.EventQueue.access$000(EventQueue.java:96)
at java.awt.EventQueue$1.run(EventQueue.java:608)
at java.awt.EventQueue$1.run(EventQueue.java:606)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:116)
at java.awt.EventQueue$2.run(EventQueue.java:622)
at java.awt.EventQueue$2.run(EventQueue.java:620)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:619)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:275)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:200)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:190)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:185)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:177)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:138) 
```

我调试了代码并添加了对`tableModel.getDataVector().getElementAt(0).getElementAt(0)`and的调用`tableModel.getRowCount()`。`getRowCount()`返回`1000`但`getElementAt()`导致`IndexOutOfBounds`异常，就像在 awt 事件队列中一样。我认为我所做的应该有效，但显然我缺少一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T00:23:21.943

`TableModel`不引用 来获取列`ColumnModel`数，因此必须使用`tableModel.setColumnCount()`. 否则，将`defaultTableModel`证明数据的合理性并将行截断为 检索到的数字`getColumnCount()`。

# java - 如何在 Spring MVC 中查找所有控制器？

> ID：10898056
> 
> 赞同：14
> 
> 时间：2012-06-05T13:17:57.033
> 
> 标签：java, spring, spring-mvc, controller

为了提供一些运行时生成的 API 文档，我想遍历所有 Spring MVC 控制器。所有控制器都使用 Spring @Controller 注释进行注释。目前我这样做：

```
for (final Object bean: this.context.getBeansWithAnnotation(
        Controller.class).values())
{
    ...Generate controller documentation for the bean...
} 
```

但是这段代码的第一次调用非常**慢**。我想知道 Spring 是否会遍历类路径中的**所有**类，而不仅仅是检查定义的 bean。运行上述代码时，控制器已经加载，日志显示所有控制器及其请求映射，因此 Spring MVC 必须已经知道它们，并且必须有更快的方法来获取它们的列表。但是怎么做？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-05T14:22:31.043

我喜欢@Japs 建议的方法，但也想推荐一种替代方法。这是基于您观察到 Spring 已经扫描了类路径，并且配置了控制器和请求映射方法，此映射在`handlerMapping`组件中维护。如果您使用的是 Spring 3.1，则此`handlerMapping`组件是 RequestMappingHandlerMapping 的一个实例，您可以查询它以找到 handlerMappedMethods 和相关的控制器，沿着这些线（如果您使用的是旧版本的 Spring，您应该能够使用类似的方法):

```
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping;

@Controller
public class EndpointDocController {
 private final RequestMappingHandlerMapping handlerMapping;

 @Autowired
 public EndpointDocController(RequestMappingHandlerMapping handlerMapping) {
  this.handlerMapping = handlerMapping;
 }

 @RequestMapping(value="/endpointdoc", method=RequestMethod.GET)
 public void show(Model model) {
  model.addAttribute("handlerMethods", this.handlerMapping.getHandlerMethods());
 } 
} 
```

我已在此网址[http://biju-allandsundry.blogspot.com/2012/03/endpoint-documentation-controller-for.html上提供了更多详细信息](http://biju-allandsundry.blogspot.com/2012/03/endpoint-documentation-controller-for.html)

这是基于 Spring Source 的 Rossen Stoyanchev 对 Spring 3.1 的介绍。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-05T13:23:02.913

几个月前我也遇到过这样的要求，我使用以下代码片段实现了它。

```
ClassPathScanningCandidateComponentProvider scanner = new ClassPathScanningCandidateComponentProvider(false);
        scanner.addIncludeFilter(new AnnotationTypeFilter(Controller.class));
        for (BeanDefinition beanDefinition : scanner.findCandidateComponents("com.xxx.yyy.controllers")){
            System.out.println(beanDefinition.getBeanClassName());
        } 
```

你也可以用你的控制器做这样的事情。

更新了代码片段。删除了不必要的代码，只显示控制器的类名以便更好地理解。希望这对您有所帮助。干杯。

# c++ - 如何在 C++ 中编写多播委托

> ID：10898060
> 
> 赞同：0
> 
> 时间：2012-06-05T13:18:25.073
> 
> 标签：c++, mfc

我需要在单击一次按钮时一起调用几个按钮单击事件。我怎么写？我可以在这里使用多播委托概念吗？

我的场景：

我有一个名为 XYZ 的按钮。单击此按钮后，我为我的应用程序的其他按钮编写的事件处理程序必须被一一调用。

谁能帮我解决这个问题？
我浏览了这个链接： http: [//www.codeproject.com/Articles/1077/Delegates-in-managed-C](http://www.codeproject.com/Articles/1077/Delegates-in-managed-C) 但它对我不起作用:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:37:57.833

如果您*仅限*于使用 Microsoft Visual C++ [`__event`](http://msdn.microsoft.com/en-us/library/cb1dzt8t.aspx)，则它与托管世界中的非常相似[`event`](http://msdn.microsoft.com/en-us/library/4b612y2s.aspx)。

首先声明要在方法前面添加*事件*`__event`的方法：

```
__event void OnButtonClicked(...); 
```

然后装饰包含该方法的类：

```
[event_source(native)]
class MyEventGenerator
{
public:
    __event void OnButtonClicked(const void* pSender, const void* pArguments);
}; 
```

要引发事件，您只需调用函数（前置`__raise`关键字是可选的，但它会在您引发事件的代码中明确）。请注意，您甚至可以从类外部引发事件，因为它是一个简单的方法调用。

您将用于处理事件的类必须装饰有：

```
[event_receiver(native)]
class CMyEventReceiver
{
public:
    void OnButtonClicked(const void* pSender, const void* pArguments);
}; 
```

要附加一个你没有*糖*的事件，`+=`所以你必须在`CMyEventReceiver`课堂上写这样的东西：

```
 __hook(&CMyEventGenerator::OnButtonClicked, pEventGenerator,
    &CMyEventReceiver::OnButtonClicked); 
```

请注意，要分离事件处理程序，您必须使用`__unhook`关键字。

# xml-parsing - 如何使用 sax 解析器检索 xml 数据

> ID：10898062
> 
> 赞同：-1
> 
> 时间：2012-06-05T13:18:32.707
> 
> 标签：xml-parsing

我有纯 xml 文件，它没有任何命名空间。我想读取xml文件并放入bean。我无法逐行读取 xml 数据。所以请帮助我使用 sax 解析器读取 xml。

问候纳尔西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:30:44.587

> “所以请帮助我使用 sax 解析器读取 xml。”

好的，你有什么问题？你试过看例子吗？

您正在使用 SAX Java 实现吗？C++？?

Sax Parser 是一个基于事件的 XML 解析实用程序。SAX 的基本目的之一是它对内存很轻，一旦文件被读取，整个文档就不会存储在内存中。

> “我无法逐行读取 xml 数据。”

逐行是什么意思？如果您想“逐行”读取文件，您可以简单地使用常规文件输入流。SAX 在文件解析期间发生某些事件时提供通知（即开始阅读文档、开始阅读元素、结束元素等）

[http://en.wikipedia.org/wiki/Simple_API_for_XML](http://en.wikipedia.org/wiki/Simple_API_for_XML)

# vhdl - 金属探测器的VHDL代码

> ID：10898064
> 
> 赞同：0
> 
> 时间：2012-06-05T13:18:43.400
> 
> 标签：vhdl

我目前正在研究金属探测器，但不知道如何在我的 VHDL 代码中实现它。

```
ENTITY sensor IS

   port ( metaldetector : in std_logic;
          metal         : out std_logic;
        );
END ENTITY sensor; 
```

只要传感器附近没有任何金属，“金属探测器”就会获得 6.1kHz 频率的脉冲。因此，只要“金属探测器”不断收到脉冲，输出端口“金属”就应该是“0”。

当缺少一个脉冲（或多个脉冲）时，“金属”应变为“1”，直到下一个脉冲。

编写一个可以做到这一点的代码应该不难，但我就是想不通。任何帮助真的很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T15:09:34.213

我们设法在其他学生的帮助下解决了这个问题，并进行了很多尝试。我将在这里发布我们的解决方案，希望它对其他人有用。:)

```
LIBRARY IEEE;
USE IEEE.std_logic_1164.ALL;
USE IEEE.numeric_std.ALL;

ENTITY sensor IS
     port ( metaldetector : in std_logic;
            clk : in std_logic;
            metal : out std_logic
          );
END ENTITY sensor;

ARCHITECTURE sensorbehav OF sensor IS   
    signal new_count, count: unsigned(20 downto 0);

    begin

    process (clk, metaldetector)
    begin
        if (rising_edge (clk)) then
            if (metaldetector = '1') then
                count <= (others => '0');
            else 
                count <= new_count;
      end if;
    end if;
end process;

process (count)
    begin
        new_count <= count + 1;
end process;

process (count)
    begin
    if (count > 9000) then
        metal <= '1';
    else
        metal <= '0';
    end if;
end process;
END ARCHITECTURE; 
```

# java - 验证 Java 中调用的 Ibatis 程序

> ID：10898065
> 
> 赞同：1
> 
> 时间：2012-06-05T13:18:43.703
> 
> 标签：java, ibatis, legacy-code

我正在研究遗留代码，它的 ibatis 映射文件中有许多已失效的数据库调用。我希望将 ibatis 映射连接回 java 类文件——或者更准确地找到 java 没有调用哪些映射。

目的是从映射文件中删除调用和从数据库中删除过程。

现在除了解析映射文件，获取每个过程的 java id，然后在 java 类文件中搜索它可能被调用的位置之外，我看不到其他方法。

以前有人必须这样做吗？或者有人能找到解决这个问题的更好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:34:59.273

您可以执行以下操作：

编写一个小的 java 程序：

1.  搜索所有`iBatis`配置文件
2.  获取所有 id 并将它们保存在文件（或集合中）
3.  搜索持久性级别中的所有 .java 文件（以持久性级别包名称开头）
4.  每当它发现任何持久性类中使用的 id 时都会将其删除（从集合/文件中）
5.  最后，它将打印出（到文件中）所有未找到的 id 及其配置文件名

编写这样的程序非常容易，最多只需要 15 分钟，而且可以节省很多时间。

# netbeans - 如何获取 Netbeans 7 的最新更新

> ID：10898070
> 
> 赞同：6
> 
> 时间：2012-06-05T13:19:02.290
> 
> 标签：netbeans, netbeans-7

我目前使用 Netbeans 7.0.1。从关于页面：产品版本：NetBeans IDE 7.0.1（内部版本 201107282000）。我在代理后面的 Ubuntu 下使用 Netbeans。

我在 Netbeans 网站上看到有一个新版本 7.1.2 可用[http://netbeans.org/downloads/index.html](http://netbeans.org/downloads/index.html)。

当我检查更新时，我看到：您的 IDE 是最新的！没有可用的更新。

问题是什么 ？我应该从网站下载 netbeans 并重新安装？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T05:45:14.810

在 Netbeans 7.0.1 中并不是一个简单的“更新”，这是一个新版本。“更新”旨在仅更新当前版本。此外，“检查更新”按钮效果很好 - 它显示更新和新版本。您可以下载并安装 NB7.1.2 并导入所有 NB7.0.1 首选项。

# javascript - jQuery $.get 不适用于 Phonegap 或 Mobile Safari 中的“本地”文件

> ID：10898071
> 
> 赞同：1
> 
> 时间：2012-06-05T13:19:03.053
> 
> 标签：javascript, jquery, cordova, mobile-safari

我有一个模板系统，我试图与我的 Phonegap 应用程序一起使用，它利用 jQuery 和 $.get() 函数。

`$.get('templates/' + name + '.html', someFunctionHere(){});`

当我在 localhost 上将应用程序作为服务器运行并通过 Chrome 或 Safari 查看它时，模板系统运行良好。
当我在 iOS 模拟器上通过 Phonegap 运行应用程序时，它不起作用。没有文件返回并且“someFunctionHere()”没有运行。
重要提示：当我在 iOS 模拟器下使用 Mobile Safari 查看我的本地主机提供的页面时，它也不起作用。

对我来说，这听起来像是 Mobile Safari 和 Phonegap 使用的 WebKit 浏览器不允许访问本地文件？这感觉完全不正确，但这就是它的外观。

有没有人遇到过这个问题，或者知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:27:05.477

我认为 safari 不支持默认开启的异步调用，您需要关闭异步模式才能使其在 safari 中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:28:58.193

可能与：http: [//developer.mozilla.org/en/http_access_control](http://developer.mozilla.org/en/http_access_control)

而不是使用 localhost 从 file:// 协议访问文件，它应该可以工作，它是 Safari / Mobile Safari 中的跨域限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:08:57.123

您是否尝试将 $.get 的类型参数设置为“文本”？这对我有用。如果你不 $.get 会尝试猜测它，在我的情况下它猜错了。

# sql - 减去/比较 SQL 数据库中的两个表行

> ID：10898080
> 
> 赞同：0
> 
> 时间：2012-06-05T13:19:33.933
> 
> 标签：sql, database

这是我的问题：
我有一个“机器”表，列的行看起来像这样，但更长：

> Microsoft 应用程序错误报告
> 
> Microsoft 应用程序错误报告
> 
> Microsoft Office Professional Plus 2010
> 
> Microsoft Office OneNote MUI（英语）2010
> Microsoft Office InfoPath MUI（英语）2010
> 
> Microsoft Office Access MUI（英语）2010
> 
> Microsoft Office Shared Setup Metadata MUI（英语）2010
> 
> Microsoft Office Excel MUI（英语）2010
> 
> Microsoft Office Shared 64-bit Setup Metadata MUI（英语）2010

我有一个“例外”表，有一列像这样的行：

> Microsoft Office OneNote MUI（英语）2010
> 
> Microsoft Office InfoPath MUI（英语）2010

我想做的是只取第一个表中存在的文本（而不是第二个表中的文本）并将其放入第三个表中。

对不起，如果我不清楚，我的英语已经尽力了。提前谢谢。

编辑：这是我的行的样子。[点击](http://www.noelshack.com/2012-23-1338902815-osef.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:27:23.810

假设您想要机器中的行（没有例外中的行），您可以像这样选择它们：

```
select *
from Machines
where columnName not in (select columnName from Exceptions) 
```

然后，您可以像这样使用 insert into 插入它们（假设 Machines 和 newTable 具有相同的列）：

```
insert into newTableName
select *
from Machines
where columnName not in (select columnName from Exceptions) 
```

如果它们有不同的列，您可以选择它们..

* * *

由于它们都在同一列和同一行中，因此您需要使用`like`来检查它们是否存在，如果存在则`replace`删除所需的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:30:18.207

我想你想要的是：

```
select m.line
from (select distinct line
      from Machines m
     ) left outer join
     Exceptions e
     on m.line = e.line
where e.line is NULL 
```

我将您的问题解释为 Machines 有很多行，其中包含一行文本。您希望机器中的不同行不在异常中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:00:29.700

我知道我的问题很老，但是由于我重做了整个程序，我找到了另一个答案，所以如果它可以帮助某人：

```
for (i = 0; i < SplitMachine.Length; i++)
            {
                for (j = 0; j < SplitExceptions.Length; j++)
                {
                    if (string.Compare(SplitMachine[i],SplitExceptions[j]) == 0)
                    {
                        ListMachines.RemoveAt(i);
                    }
                }
            } 
```

SplitMachine 是我的软件的字符串数组，StringExceptions 是我不想显示的软件的字符串数组，所以如果我的 SplitMachine 中的字符串与 SplitExceptions 中的字符串匹配，我会删除 SplitMachine 中的相关字符串。

我希望这很清楚并且可以帮助某人。

# c# - 运行时编译生成无法删除的文件

> ID：10898081
> 
> 赞同：0
> 
> 时间：2012-06-05T13:19:36.987
> 
> 标签：c#, runtime-compilation

我有这个控制台类型的东西，它接受一行 C# 代码，将它包装在一些周围的代码中并将它编译成一个程序集。然后，我从该程序集中调用该方法，输出结果，就是这样。

问题是，程序集需要有一个名称，以便我可以将其设置为朋友程序集，以便它可以访问非公共类。我将其命名为“控制台”。

一切都按预期工作，但问题是我无法在一个脚本完成后运行第二个脚本，因为名为“console”的文件已经存在于目录中并且不能被覆盖。

我已经尝试处理所有具有 Dispose 方法的东西。我尝试使用 File.Delete 手动删除文件。没有任何帮助。

所以这是我正在使用的代码。我希望有一个人可以帮助我。

```
CSharpCodeProvider provider = new CSharpCodeProvider();
var param = new CompilerParameters();
param.GenerateInMemory = false;
param.GenerateExecutable = false;
param.OutputAssembly = "console";
param.ReferencedAssemblies.Add("System.dll");
param.ReferencedAssemblies.Add("System.Core.dll");
param.ReferencedAssemblies.Add(Assembly.GetExecutingAssembly().Location);
var results = provider.CompileAssemblyFromSource(param,
@"
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace FireflyGL
{
class DebugConsole
{
    static void Run(StringWriter writer)
    {
        var stdOut = Console.Out;
        Console.SetOut(writer);
        " + input.Text + @"
        Console.SetOut(stdOut);
    }
}
}");
            if (results.Errors.HasErrors)
            {
                for (int i = 0; i < results.Errors.Count; ++i)
                {
                    PushText(results.Errors[i].ErrorText);
                }
            }
            else
            {
                try
                {
                    var writter = new StringWriter();
                    results.CompiledAssembly.GetType("FireflyGL.DebugConsole").GetMethod("Run", BindingFlags.Static | BindingFlags.NonPublic).Invoke(null, new object[] { writter });
                    PushText(writter.ToString());
                    history.Add(input.Text);
                    currentHistory = history.Count;
                    input.Text = "";
                    writter.Dispose();
                }
                catch (Exception)
                {

                }
            }
            provider.Dispose();
            File.Delete(results.CompiledAssembly.Location); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:21:21.987

您必须卸载程序集才能删除所有引用。不幸的是，你不能这样做。但是，您可以卸载一个[`AppDomain`](http://msdn.microsoft.com/en-us/library/system.appdomain.aspx)并且如果您在其中引用您的程序集`AppDomain`，它也将被卸载。

如果您不关心创建内存泄漏，您也可以为您的程序集创建唯一名称（`console1`等`console2`）...

# php - php 多个站点到一个具有相对子域的站点

> ID：10898082
> 
> 赞同：0
> 
> 时间：2012-06-05T13:19:40.610
> 
> 标签：php, redirect, alias, subdomain

我正在寻找一些我以前没有处理过的问题的建议，并且似乎对建议非常模糊，不幸的是，我能找到的大多数信息都与 Wordpress 相关

我的问题与将多个站点合并为一个具有相关子域的问题有关。我有一个网站，为了匿名，我会打电话给 www.abc.com 我也有 www.abc.co.uk 和 www.abc.ie

我想要做的是让这三个网站都指向 www.abc.com 的 url 结构像

www.abc.com/region1
www.abc.com/region2
www.abc.com/region3

问题是我没有关于从哪里开始做这样的事情的经验。我知道我可以在指向区域的 httpdocs 下创建 3 个子目录，但我想做的是指向一组文件并将变量存储在 $_SESSION 中以确定用户想要哪个区域。然后我想做的是将 .ie 和 .co.uk 重定向到 .com，并在 .com/ 之后提供相关区域信息

从我收集到的关于子目录的阅读中，我会在谷歌上创建大量单独的内容，而我想要将这些网站合并为一个的主要原因是为了提升我的谷歌排名

如果有人可以向我提供任何建议或指向我一篇解释这如何可能的文章，我将非常感激

非常感谢

巴里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:26:03.383

这样做的起点是您的 DNS 设置。所有域都必须路由到同一台服务器。

之后，您使用

*   httpd.conf：/etc/apache2/
*   虚拟主机：/etc/apache2/sites-available/yoursite-name
*   .htaccess

Httpd.conf 或 vhosts 具有以下格式：

```
<VirtualHost *:80>
    ServerName x.com
    ServerAlias www.x.com
    DocumentRoot /var/www/region1
</VirtualHost> 
```

而且它们不是动态可配置的。这意味着您必须编写/更改 vhosts 文件，然后重新启动 apache2 以重新加载这些配置指令。

如果您在共享主机中，则有一些选项，例如**addon domain**和**parked domain**。

插件允许您指定一个目录（在您的 public_html 中）您希望该域的代码所在的位置。

停放的域与您的默认域重叠，您需要 .htaccess 将域 x.com 的所有流量重定向到域 y.com。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:48:14.933

听起来更像是服务器安装问题，而不是 PHP 问题。您的服务器使用什么网络服务器？

**冗长，无聊，描述性的答案**

你必须明白：

**(1) 子文件夹**

```
www.abc.com/uk [/index.html]
www.abc.com/ireland [/index.html]
www.abc.com/australia [/index.html] 
```

**(2) 概念相关的网站**

```
www.abc.co.uk [/index.html]
www.abc.co.ie [/index.html]
www.abc.co.au [/index.html] 
```

**(3) 子网站**

```
uk.abc.co [/index.html]
ireland.abc.co [/index.html]
australia.abc.co [/index.html] 
```

**(4) 并且，重定向**

(4.1) 重定向到子文件夹

```
www.abc.co.uk [/index.html] => www.abc.com/uk [/index.html]
www.abc.co.ie [/index.html] => www.abc.com/ireland [/index.html]
www.abc.co.au [/index.html] => www.abc.com/australia [/index.html] 
```

(4.2) 重定向到子网站

```
www.abc.co.uk [/index.html] => england.www.abc.com [/index.html]
www.abc.co.ie [/index.html] => ireland.www.abc.com [/index.html]
www.abc.co.au [/index.html] => australia.www.abc.com [/index.html] 
```

所有这些看起来都相似，但实际上，它们是不同的东西，不同的解决方案，可以解决同一个问题？

重定向 (4.1) & (4.2) 可以用作 (2) & (3) 的技巧。

**快速回答**

这里有一个学习过程。我强烈建议，如果可以的话，一步一步地这样做。特别是，因为您还负责编程：

(1) 我建议从一个域开始，使用子文件夹，每个子文件夹都有一个起始页，作为单独的东西。

(2) 稍后，您可能想购买单独的附加域。

如果您有自己的 Web 服务器，则必须将其配置为将域重定向到每个文件夹。因此，当用户在浏览器中写入本地化域时，服务器会将他重定向到子文件夹。

如果您正在使用或计划使用网络托管服务提供商，其中一些服务允许您仅出售域名，并将域名重定向到其他域名，或在其配置页面中带有子文件夹的域名。

(3) 避免子网站。需要在您的 Web 服务器或 PHP 网站中进行更多配置。而且，对于您的情况，子文件夹似乎是一个更好的选择。

**额外的**

您的问题可能会在网络应用论坛中得到最好的回答：

[https://webapps.stackexchange.com/](https://webapps.stackexchange.com/)

或服务器论坛：

[https://serverfault.com/](https://serverfault.com/)

干杯。

# c# - MVC 中的模态编辑

> ID：10898086
> 
> 赞同：2
> 
> 时间：2012-06-05T13:19:52.180
> 
> 标签：c#, ajax, asp.net-mvc, devexpress, modal-dialog

我一直在寻找一种**使用模式弹出窗口更新数据的方法。** 现在我正在使用 devexpress，因为我们已经在使用其他 devexpress 控件（但如果 jquery 库更容易，这可能会改变！！）

我**坚持验证方面**。坦率地说，对于我想要实现的目标，整个过程似乎相当困难。

无论如何，让我描述一下我目前制定的过程：

-索引页面包含可以更新**的不同元素的概述。**使用 HtmlExtension，我能够创建一个 devexpress 弹出窗口，它会在您打开弹出窗口时加载编辑页面。=> **@Html.PopupControl().WithText("Edit").PopupGoesTo(Url.Action("EditPopup"等)**

- 编辑页面 - 只是部分视图 - 工作得很好。我创建了一个小测试页面，其中包含 1 个文本框，它采用十进制。

我想使用 ajax 提交表单（因为坦率地说，如果我做一个完整的回帖，我不知道如何显示验证，因为我需要能够创建弹出窗口并将数据绑定到它并触发验证错误）。

```
 <script type="text/javascript">
    function EndPopUpUpdate(message) {
        if (message.url) {
            window.locatin.href = url;
        }
        $("#submitButtonPopUp, #loadingPopUp").toggle();
    }

    function BeginPopUpUpdate() {
        $("#submitButtonPopUp, #loadingPopUp").toggle();
    }
</script>

using (Ajax.BeginForm("Edit", "xxx", new AjaxOptions {  UpdateTargetId = "PopUpDiv", HttpMethod = "Post", OnBegin = "BeginPopUpUpdate", OnComplete = "EndPopUpUpdate"}, new { id = "PopUpForm" }))
    {
        <div id="PopUpDiv">
            @Html.Partial("EditPopup", new xxxViewModel())
        </div>
    } 
```

当我通过手动重新挂钩 jquery 事件回发时，我能够实现验证（因为这些事件不会被挂钩，因为页面是动态加载的）

```
function ReconnectValidation() {
    $("#PopUpForm").ready(function () {
        $.validator.unobtrusive.parse("#PopUpForm");
    });

    $("#submitButton").click(function (e) {
        var form = $("#PopUpForm");
        if (!form.valid()) {
            e.preventDefault();
        }
    });
} 
```

所以这处理了我的客户端验证，这很有效。

现在，我的实际问题！服务器端验证。

```
[HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult Edit([ModelBinder(typeof(CommandModelBinder))] UpdateCommand command)
    {
        if (!ModelState.IsValid)
        {
            //using the command pattern
            var handlerResult = HandlerLocator.GetQueryHandler<IGetOverviewHandler>().Execute(..);
            return PartialView("EditPopUp", handlerResult.ViewModel);
        }

        HandlerLocator.GetCommandHandler<UpdateCommand>().Handle(command);
        var returnLink = Url.Action("Index", new {..});
        return Json(new { url = returnLink }, JsonRequestBehavior.AllowGet);
    } 
```

我编写了一个 CustomModelBinder，它只在我的命令对象（如果你愿意的话，我的返回模型）中查找属性，并在 formcollection 中查找是否可以找到具有相同名称的匹配对象。然后它会尝试转换它，如果失败，它会将 ModelError 绑定到我的 ModelState。

所以，现在我们有一个有效或无效的 ModelState。如果它有效，我想重定向到索引（这样我的概述可以更新）。我读过我应该在客户端处理这个问题，因为 ajax.BeginForm 将用结果替换“PopUpDiv”-div（它只是在我的页面中创建相同的页面）。

这是 onComplete 事件：

```
function EndPopUpUpdate(message) {
            if (message.url) {
                window.locatin.href = url;
            }
            $("#submitButtonPopUp, #loadingPopUp").toggle();
        } 
```

**问题是，我没有收到 json 消息，但收到了 PartialView。**这意味着我无法访问 message.url..因为这不是我收到的：/

所以这是问题1

如果对象无效，我想返回带有模型的部分视图并向用户提供错误。**当我返回部分视图时，它只是替换当前视图，但不显示任何验证错误**..

那是第2个问题:)

此外，如果您知道解决此问题的更好方法，请不要犹豫做出回应（因为这种方法看起来确实令人费解-或应该做-）

很抱歉这篇冗长的帖子，但我希望一切都清楚。

感谢您的帮助和时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T16:46:47.320

我之前使用过 jQuery UI () 中的对话框插件，我发现它效果很好。我通常会在弹出窗口中的 iframe 中打开链接，这避免了您描述的问题，因为页面是动态加载的，因此 jQuery 验证事件没有连接 - 客户端和服务器端验证都应该正常工作，就在这个 iframe 中。

这种技术的好处是您可以在索引页面中正常生成操作链接，只需向它们添加一类弹出窗口，例如

```
@Html.ActionLink("Edit", "Edit", new { id = Model.Id }, new { @class = "popup" }) 
```

然后，您可以使用 jQuery 在 iframe 对话框中打开这些链接，例如：

```
$("a.popup").click(function(e) {
    e.preventDefault();
    $("<iframe />").attr("src", $(this).attr("href") + "?popup=true").dialog({ show: "fadeIn", modal: true, width: 300, height: 300});
}); 
```

这基本上会查找弹出链接，取消默认行为（页面导航）并在弹出窗口中的 iframe 中打开该 URL，添加查询字符串以识别页面在弹出窗口中。这个查询字符串的原因和知道它的弹出允许您在视图中加载不同的布局页面，可能通过操作过滤器，例如：

```
public class Popup : ActionFilterAttribute
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        if (filterContext.Result != null
            && filterContext.Result is ViewResult
            && filterContext.RequestContext.HttpContext.Request["popup"] == "true")
            (filterContext.Result as ViewResult).MasterName = "~/Views/Shared/_PopupLayout.cshtml";
    }
} 
```

这意味着您可以轻松地将此属性应用于您希望应用操作方法的类。此方法还意味着，如果您将来改变对实现的想法（即删除弹出窗口），那么您可以轻松删除取消点击的 jQuery，您的应用程序将继续作为具有单独页面的普通 MVC 应用程序运行，并且所有导航/验证等将“正常工作”。

我希望一切都有意义并有所帮助。

# android - 如何仅将字符串添加到默认值文件夹？

> ID：10898092
> 
> 赞同：2
> 
> 时间：2012-06-05T13:20:25.520
> 
> 标签：android, android-resources, android-lint

我有一个`res/values`包含文件的文件夹`strings.xml`和一个`res/values-XX`包含文件的文件夹（对于我支持`strings.xml`的每种语言）。`XX`目前，我所有的`strings.xml`文件都包含相同的字符串（相同的字符串名称，不同的字符串值）。有没有一种方法可以将字符串添加到`res/values/strings.xml`文件中，而不必将其添加到我的所有`res/values-XX/strings.xml`文件中，这样无论手机的语言设置如何，应用程序都会使用这个默认字符串？目前，编译器中止并抱怨该字符串尚未针对我支持的每种语言进行翻译。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-05T13:28:02.823

“编译器”不会“中止”，因为您有一个未翻译的字符串。您可能会遇到 lint 错误，但是`ant clean debug`,`ant clean release`和它们的 Eclipse 等效项可以正常工作。确保您使用的是当前版本的 SDK 工具（如果您使用的是 Eclipse，则使用 ADT 插件）。

要消除 lint 错误，请`<resources>`让出现未翻译字符串的元素如下所示：

```
<resources xmlns:tools="http://schemas.android.com/tools" tools:ignore="MissingTranslation"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:31:54.873

`res`文件夹包含只能读取的数据。有关更多信息，请参阅[提供资源](http://developer.android.com/guide/topics/resources/providing-resources.html)和[访问资源](http://developer.android.com/guide/topics/resources/accessing-resources.html)的 Android 开发者文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-11T15:36:35.813

**Lint**错误和警告会阻止编译器编译，但您始终可以清除它们并编译。您还可以指示**Lint**忽略所有丢失的翻译。

您可以使用*Lint 警告*视图来指示**Lint**忽略某些范围（特定字符串、文件或整个项目）内的某些错误或警告。所有这些说明将自动放入`lint.xml`您的项目中。

Android 建议在文件中放置不可翻译的字符串`donottranslate.xml`。**Lint**将*始终*忽略它没有翻译。

您还可以使用任何其他名称创建另一个 XML 文件，并简单地添加一条指令让**Lint**忽略此文件中的字符串没有翻译。

请记住，您不仅限于一个`strings.xml`文件。这只是标准的初学者练习，但如果您有**很多**字符串，您可以将它们组织成多个 XML 文件。

# iphone - 将文件提取到从 iPhone 中的任何应用程序下载的应用程序中

> ID：10898095
> 
> 赞同：-1
> 
> 时间：2012-06-05T13:20:35.520
> 
> 标签：iphone, ios, ipad

在将从其他应用程序下载的文件提取到我的应用程序中时，我遇到了一个问题。有没有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:22:26.430

**我非常怀疑您实际上可以在没有越狱设备**的情况下访问其他人的应用程序数据（从互联网下载）：

> 出于安全原因，iOS 在安装时将每个应用程序（包括其首选项和数据）放置在沙箱中。沙盒是一组细粒度的控件，用于限制应用程序对文件、首选项、网络资源、硬件等的访问。作为沙盒过程的一部分，系统将每个应用程序安装在其自己的沙盒目录中，该目录充当应用程序及其数据的主目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:35:01.407

是的，您无法访问其他应用程序的文件。但是在 iOS 5 中有一个名为 iCloud 的新功能，我认为您可以使用它。

# jakarta-ee - OpenEJB - 为 JUnit 配置数据源

> ID：10898096
> 
> 赞同：4
> 
> 时间：2012-06-05T13:20:41.970
> 
> 标签：jakarta-ee, persistence, openejb

我在为 OpenEJB 3.1.3 正确配置数据源时遇到问题。我尝试配置与 postgres db 的连接，但是当我调试测试时，我得到了默认的 hsql 连接参数。

这是我的测试课：

```
@RunWith(ApplicationComposer.class)
public class OpenEJBTest {
    @EJB
    Files fb;

    @Test
    public void testSth() {
        List<UploadSession> uploadNotFinishedSessions = fb.getUploadNotFinishedSessions();
    }

    @Module
    public EjbJar beans() {
        EjbJar ejbJar = new EjbJar("beans");
        ejbJar.addEnterpriseBean(new StatelessBean(FilesBean.class));
        ejbJar.addEnterpriseBean(new StatelessBean(FilesUtilBean.class));
        ejbJar.addEnterpriseBean(new StatelessBean(ServerFilesBean.class));
        ejbJar.addEnterpriseBean(new StatelessBean(UserUtilBean.class));
        return ejbJar;
    }

    @Module
    public PersistenceUnit persistence() {
        PersistenceUnit unit = new PersistenceUnit("postgresPU", HibernatePersistence.class.getName());
        String simpleXml = SimpleXmlUtil.toSimpleXml(unit);
        System.out.println(simpleXml);
        unit.setJtaDataSource("PostgresDS");
        unit.setNonJtaDataSource("PostgresDSUnmanaged");
        return unit;
    }
} 
```

我尝试过了：

1.  将 jndi.properties 添加到类路径：

> ```
> postgresPU=new://Resource?type=DataSource
> postgresPU.JdbcDriver=org.postgresql.Driver
> postgresPU.JdbcUrl=jdbc:postgresql:/localhost:5433/pdb
> postgresPU.JtaManaged=true
> postgresPU.DefaultAutoCommit=false
> postgresPU.UserName=... 
> ```

1.  通过 openejb.xml 配置数据源（位于类路径中）

> ```
> <Resource id="PostgresDS" type="DataSource">
>   JdbcDriver  org.postgresql.Driver
>   JdbcUrl   jdbc:postgresql://localhost:5433/pdb
>   UserName   user
>   Password  pass
>   JtaManaged true
> </Resource>
> 
>  <Resource id="PostgresDSUnmanaged" type="DataSource">
>      JdbcDriver  org.postgresql.Driver
>     JdbcUrl     jdbc:postgresql://localhost:5433/pdb
>      UserName    user
>     Password    pass
>   JtaManaged  false
>  </Resource> 
> ```

但它都不起作用 - 根本没有配置数据源，数据源的默认版本仍然存在。由于默认的 hsql 连接，我得到以下错误：

```
WARN - SQL Error: -22, SQLState: S0002
ERROR - Table not found in statement [select top ? user0_.id as col_0_0_ from tusers user0_ where user0_.login=?] 
```

我可能做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T23:05:52.997

`ApplicationComposer`不使用 JNDI 引导容器，因此`jndi.properties`永远不会看到该文件。

你可以做的是使用`org.apache.openejb.junit.Configuration`方法上的注释让它返回你想用来配置测试的属性。

```
@Configuration
public Properties properties() {
   //...
} 
```

我将重命名`jndi.properties`为其他名称，以免造成混淆，然后您可以使用这样的代码在类路径中找到它。

```
 final URL url = this.getClass().getResource("/config.properties");
   final Properties props = new Properties();
   final InputStream in = url.openStream();
   try {
       props.load(in);
   } finally {
       close(in);
   } 
```

# ssl - Maven 发布插件 SSL 错误

> ID：10898097
> 
> 赞同：1
> 
> 时间：2012-06-05T13:20:45.717
> 
> 标签：ssl, maven-release-plugin

今天我和我的同事花了一些时间研究 Maven 发布插件的问题。

一位新员工试图`release:perform`在他以前从未部署到的 svn 存储库上运行。该命令将挂起不成功，工件将永远不会被部署；显示的错误是：

```
[INFO] Error validating server certificate for 'https://forge.onehippo.org:443':
[INFO]  - The certificate is not issued by a trusted authority. Use the
[INFO]    fingerprint to validate the certificate manually!
[INFO]  - The certificate hostname does not match.
[INFO] Certificate information:
[INFO]  - Subject: CN=*.onehippo.org, OU=Domain Control Validated, O=*.onehippo.org
[INFO]  - Valid: from Mon Aug 01 15:57:43 CEST 2011 until Thu Aug 02 21:19:06 CEST 2012
[INFO]  - Issuer: SERIALNUMBER=07969287, CN=Go Daddy Secure Certification Authority, OU=http://certificates.godaddy.com/repository, O="GoDaddy.com, Inc.", L=Scottsdale, ST=Arizona, C=US
[INFO]  - Fingerprint: cb:6c:4e:0e:4a:fa:63:3d:f9:e1:ef:c1:e6:81:b5:bc:7a:4e:dd:f8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:20:46.030

经过多次尝试和高级开发人员的一些建议，我们通过将标签的新副本检出到临时文件夹并`mvn deploy`从那里运行来解决了这个问题。

这让我们可以选择回答用户输入提示并接受证书，如果 deploy 通过发布插件运行，这是不可能的。如您所见，问题在于 Java 默认 SSL 实现不识别通配符证书，因此无法验证（完全）匹配的主机名。

由于这个问题很少发生，如果发生了，只有当用户开始使用特定的存储库时，它是一个容易被遗忘的问题。

# facebook-like - 可从多个 URL 访问的页面上的 Facebook 赞按钮

> ID：10898101
> 
> 赞同：1
> 
> 时间：2012-06-05T13:20:46.533
> 
> 标签：facebook-like, multiple-domains

我有一个可以从多个域访问的网站，例如`mydomain.com`, `mydomain.net`,`mydomain.org`等，而且我正在使用重写来创建搜索引擎友好的 url，就像 url 中`/news/12345-news-alias`唯一重要的是项目 ID。因此，如果您打开`mydomain.com/news/12345`，您将获得与打开时相同的页面`mydomain.org/news/12345-news-alias`。

我在我的页面中插入了 facebook、twitter 和 Google+ 类似的图标，问题是当你打开`mydomain.com/news/12345`它时显示 260 个喜欢，如果你通过这个地址打开同一页面：`mydomain.org/news/12345-news-alias`它显示 0 个喜欢。

我该怎么做才能让 facebook 明白这些页面是一样的？

# command - 如何在cmd中执行隐藏命令并退出

> ID：10898105
> 
> 赞同：-1
> 
> 时间：2012-06-05T13:21:07.690
> 
> 标签：command, command-prompt, windows-console

我有这条线：

```
C:\Windows\system32\cmd.exe start /minimized /wait cmd.exe /c picture.jpg 
```

我在快捷方式的目标字段中使用这条线。

当我运行它时，它会打开最小化的 cmd 和图片。我需要的是在打开图片后关闭该 cmd，或者在隐藏模式下运行 cmd。

任何人都可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:29:32.193

我不确定这是否适用于您的场景。对此有两种可能的锻炼方式。

1）使用批处理脚本，在最后一行，只需添加`exit`到脚本中。将其另存为`something.bat`并在需要时运行它。这将执行脚本，最后，cmd 将退出。

2) 或者，您可能希望以隐藏模式（未最小化）运行 cmd。为此，请创建一个批处理作业。然后使用这个特定的 exe 压缩器 - 'iExpress' 打包这个批处理文件。（在运行框下键入 iexpress）这有一个以隐藏模式运行脚本的选项。他们将在后台运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:32:00.463

为什么需要cmd打开图片？

就这样做

```
rundll "C:\Program Files\Windows Photo Viewer\PhotoViewer.dll" "image.png" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T13:29:49.783

不是吗

```
C:\Windows\System32\cmd.exe /c start picture.jpg 
```

做你需要的？

为什么不直接将快捷方式指向

```
picture.jpg 
```

?

# java - Java 中的 ContainerSelectionDialog

> ID：10898114
> 
> 赞同：1
> 
> 时间：2012-06-05T13:21:25.020
> 
> 标签：java, eclipse, plugins

我开发了我的第一个插件 - 2 个问题：

1.  我在我的 Eclipse 插件中使用 ContainerSelectionDialog 对话框，让我的用户可以选择项目。但它向我显示了项目和其中的文件夹，我只想向用户显示项目而没有选项来扩展项目并选择文件夹，我该怎么做？

2.  当用户选择我的向导（new->other->myWizard）时，我想知道它选择了 packageexplorer 中的哪个项目（就像你在新类中知道选择了哪个项目一样）

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T21:52:19.787

您可以使用 a`org.eclipse.ui.dialogs.ElementListSelectionDialog`并调用`setElements()`它。您传递给的数据`setElements()`应该是一个`IProject`实例数组；获得它的一种方法是通过`org.eclipse.core.resources.ResourcesPlugin.getWorkspace().getRoot().getProjects()`

*注意 A：* `IWorkspaceRoot.getProjects()`将返回所有项目，包括已关闭的项目，因此根据您的需要，您可能希望在将该列表传递给对话框之前对其进行过滤（查看`IProject.isAccessible()`）

*注B：*您可以使用`org.eclipse.ui.model.WorkbenchLabelProvider.getDecoratingWorkbenchLabelProvider()`对话框的labelProvider。

# java - 制作包含字节数组的自定义 Parcelable

> ID：10898116
> 
> 赞同：4
> 
> 时间：2012-06-05T13:21:31.847
> 
> 标签：java, android, bytearray

我正在尝试创建一个包含字节数组的 Parcelable 类。我一直在尝试各种各样的事情，但如果我想把包裹放在我的意图中，它似乎仍然失败。

```
public class Car implements Parcelable{

private String numberPlate;
private String objectId;
private byte[] photo;
private String type;
private ParseGeoPoint location;
private ParseUser owner;
private String brand;
private double pricePerHour;
private double pricePerKm;
public static final String TYPES[] = {"Cabrio", "Van", "SUV", "Station", "Sedan", "City", "Different"};

public Car(String numberPlate, byte[] bs, String type, ParseGeoPoint location, String brand) {

    this.numberPlate = numberPlate;
    this.photo = bs;
    this.type = type;
    this.brand = brand;
    this.setLocation(location);
    this.owner = ParseUser.getCurrentUser();
}

public Car(Parcel in){
    readFromParcel(in);
}

 public static final Parcelable.Creator CREATOR = new Parcelable.Creator() {
        public Car createFromParcel(Parcel in) {
            return new Car(in);
        }

        public Car[] newArray(int size) {
            return new Car[size];
        }
    };

public int describeContents() {
    // TODO Auto-generated method stub
    return 0;
}

public void writeToParcel(Parcel dest, int flags) {
    dest.writeString(type);
    dest.writeString(numberPlate);
    dest.writeString(brand);
    dest.writeDouble(pricePerHour);
    dest.writeDouble(pricePerKm);
    dest.writeString(objectId);
    dest.writeByteArray(photo);

}

public void readFromParcel(Parcel in){
    this.type = in.readString();
    this.numberPlate = in.readString();
    this.brand = in.readString();
    this.pricePerHour = in.readDouble();
    this.pricePerKm = in.readDouble();
    this.objectId = in.readString();
    byte[] ba = in.createByteArray();
    in.unmarshall(ba, 0, ba.length);
    this.photo = ba;

} 
```

如果我不包含字节数组，它工作正常..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-05T13:44:14.560

你为什么用`createByteArray`？？我以应该可以工作的方式修改了您的代码...

```
public void writeToParcel(Parcel dest, int flags) {
    dest.writeString(type);
    dest.writeString(numberPlate);
    dest.writeString(brand);
    dest.writeDouble(pricePerHour);
    dest.writeDouble(pricePerKm);
    dest.writeString(objectId);
    dest.writeInt(photo.length());
    dest.writeByteArray(photo);
}

public void readFromParcel(Parcel in){
    this.type = in.readString();
    this.numberPlate = in.readString();
    this.brand = in.readString();
    this.pricePerHour = in.readDouble();
    this.pricePerKm = in.readDouble();
    this.objectId = in.readString();
    this.photo = new byte[in.readInt()];
    in.readByteArray(this.photo);
} 
```

# android - 显示（动态创建的）微调器

> ID：10898118
> 
> 赞同：0
> 
> 时间：2012-06-05T13:21:36.067
> 
> 标签：android, spinner, show

我有一个微调器：

```
 Spinner country_list=new Spinner(this);
     ArrayAdapter<String> adapter= new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, countries);
     adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
     country_list.setAdapter(adapter); 
```

现在我想将其显示为弹出窗口供用户选择。我需要使用 AlertDialog 还是有更简单的方法？

**/编辑：** 实际上，我想要的不是 Spinner。当用户单击按钮然后他或她可以选择一个国家/地区时，我想获取国家/地区列表。所以基本上他是 Spinner 的“第二部分”——列表显示在弹出窗口中。我应该使用 ListView 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:05:17.797

我需要的是

```
country_list.performClick() 
```

通过单击按钮显示微调器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:26:41.823

> 现在我想将其显示为弹出窗口供用户选择。我需要使用 AlertDialog 还是有更简单的方法？

-spinner 已经显示为弹出窗口，您无需使用 alertDialog 即可获得选定的值。

> [见这个例子](http://samir-mangroliya.blogspot.in/p/android-spinner-tutorial.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T13:30:27.080

如果您希望微调器本身出现在弹出窗口中，则必须使用对话框。

```
LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    Dialog d = new Dialog(this);
    d.requestWindowFeature(Window.FEATURE_NO_TITLE);
    d.addContentView(country_list, params);
    d.show(); 
```

# fullscreen - 即使在 xml 中的固定值之后 VideoView 全屏（Android 2.2）

> ID：10898120
> 
> 赞同：0
> 
> 时间：2012-06-05T13:21:39.553
> 
> 标签：fullscreen, android-videoview, android-2.2-froyo

我面临一个奇怪的情况，其中我放入 XML 布局的 VideoView 具有固定的宽度/高度，但是当在运行 2.2 屏幕分辨率（460*800）的 Android 平板电脑上运行时，视频总是全屏显示，并且相同 XML 的其他视图与视频重叠。

我不希望视频全屏显示，我希望它具有固定的宽度/高度！

以下是 XML 布局，欢迎提供任何帮助。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ImageView
    android:id="@+id/imgRight"
    android:layout_width="267px"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true" />

<ImageView
    android:id="@+id/imgBottom"
    android:layout_width="533px"
    android:layout_height="153px"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_toLeftOf="@+id/imgRight" />

<VideoView
    android:id="@+id/videoView"
    android:layout_width="533px"
    android:layout_height="307px"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
     />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:35:31.863

后来我意识到Android 2.2只能全屏播放视频..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:20:50.853

请参阅 [链接](http://developer.android.com/guide/appendix/media-formats.html) 支持的视频编码参数示例。

```
 SD (Low quality)SD (High quality)  HD (Not available on all devices)

Video resolution    176 x 144 px    480 x 360 px    1280 x 720 px 
```

视频分辨率 较低质量 = 176 x 144 像素 较高质量 = 480 x 360 像素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:10:45.700

您可以使用相对布局包装 videoview。将固定 px 值设置为相对布局并使用 fill_parent 更改视频视图尺寸：

```
<RelativeLayout
    android:layout_width="533px"
    android:layout_height="153px" 
    android:layout_alignParentTop="true"
    android:layout_alignParentLeft="true">

    <VideoView
        android:id="@+id/videoView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
         />
</RelativeLayout> 
```

# objective-c - 具有不同引脚颜色的地图视图注释

> ID：10898122
> 
> 赞同：5
> 
> 时间：2012-06-05T13:21:43.057
> 
> 标签：objective-c, ios, annotations, mapkit

我有一个包含 200 多个对象的数组，我正在尝试对每个对象执行一个循环。

每个对象都有一个是/否字段，我想根据该是/否值显示不同的颜色标记。

从我所看到的情况来看，我的循环首先遍历每个对象，然后在每个对象的末尾添加所有注释。

由于当所有注释都添加到我的地图时，我在循环中通过数组对 yes no 值执行检查，所以当它为所有人绘制时，它将使用数组中最后一个对象的 yes/no 值。

我怎样才能拥有它，以便标记将根据每个单独元素的是/否值而有所不同？

我的代码是

```
for (i = 0; i < [appDelegate.itemArray count]; i++) {
        item_details *tempObj = [appDelegate.itemArray objectAtIndex:i];
        location.latitude = [tempObj.lat floatValue];
        location.longitude = [tempObj.lon floatValue];
        current_yesno = tempObj.yesno;
        MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc]initWithTitle:tempObj.name andCoordinate:location];
        [self.mapView addAnnotation:newAnnotation];
        [newAnnotation release];            
            } 
```

我的注释代码如下

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation{

    MKPinAnnotationView *annView=[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"currentloc"];

if(current_yesno == YES){
    annView.pinColor = MKPinAnnotationColorGreen;
}
else
{
    annView.pinColor = MKPinAnnotationColorRed;
}
    annView.animatesDrop=NO;
    annView.canShowCallout = YES;
    annView.calloutOffset = CGPointMake(-5, 5);
    return annView;

} 
```

并`current_yesno`在我的 .h 文件中声明。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T15:31:55.337

`viewForAnnotation`委托方法不一定在您完成后立即调用，`addAnnotation`也可以在地图视图需要获取注释视图的其他时间调用（而您的代码正在做一些完全不同的事情）。

因此，您不能依赖 ivar 的值与该委托方法之外的某些代码同步。

相反，将`yesno`属性添加到您的自定义`MapViewAnnotation`类中，在创建注释时设置它，然后`viewForAnnotation`通过`annotation`参数访问其值（即，地图视图为您提供了对它想要查看的确切注释对象的引用）。

例子：

```
MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc] init...
newAnnotation.yesno = tempObj.yesno;  // <-- set property in annotation
[self.mapView addAnnotation:newAnnotation]; 
```

然后在`viewForAnnotation`：

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation
{
    if (![annotation isKindOfClass:[MapViewAnnotation class]])
    {
        // Return nil (default view) if annotation is 
        // anything but your custom class.
        return nil;
    }

    static NSString *reuseId = @"currentloc";

    MKPinAnnotationView *annView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:reuseId];
    if (annView == nil)
    {
        annView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:reuseId];        
        annView.animatesDrop = NO;
        annView.canShowCallout = YES;
        annView.calloutOffset = CGPointMake(-5, 5);
    }
    else
    {
        annView.annotation = annotation;
    }

    MapViewAnnotation *mvAnn = (MapViewAnnotation *)annotation;
    if (mvAnn.yesno)
    {
        annView.pinColor = MKPinAnnotationColorGreen;
    }
    else
    {
        annView.pinColor = MKPinAnnotationColorRed;
    }

    return annView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-02T06:18:29.410

```
MKPinAnnotationView *pin = (MKPinAnnotationView *) [self.mapView dequeueReusableAnnotationViewWithIdentifier: @"id"];
if (pin == nil)
{
    pin = [[MKPinAnnotationView alloc] initWithAnnotation: annotation reuseIdentifier: @"id"] ;
}
else
{
    pin.annotation = annotation;
}

pin.pinTintColor=[UIColor blueColor];
pin.canShowCallout = true; 
```

# grails - GORM/Grails :: 可以根据模型中列表的内容进行查询吗？

> ID：10898130
> 
> 赞同：1
> 
> 时间：2012-06-05T13:22:10.143
> 
> 标签：grails, groovy, grails-orm

假设如下：

```
class Thing {

    String name
    List<String> tags

    static constraints = {
        name(nullable: false)
        tags(nullable: false)
    }

} 
```

我想知道是否有可能，使用 GORM，根据它们各自列表中的值运行域实例的查询

例如：是否有动态 GORM 查找器来查询诸如“查找所有具有标签“视频”的事物”或“查找所有名称 =“Product1”且具有标签“图像”的事物

只是想知道使用 Grails&Gorm 是否有一种简洁的方法来执行此操作，而不是检索事物列表并遍历它，找到具有适当标签的事物并将它们添加到结果列表中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:16:33.770

一种方法（尽管不一定是最有效的！）是返回整个`Thing`s列表，`Thing.list()`然后使用`findAll`.

`List results = Thing.list().findAll{it.tags.contains("Image")}`

`Thing`您的s 列表和关联`Tag`的 s 可能有多大？

# css - :first-child 伪选择器不针对元素

> ID：10898135
> 
> 赞同：0
> 
> 时间：2012-06-05T13:22:36.570
> 
> 标签：css, css-selectors

我无法理解为什么这个第一个孩子选择器不起作用。

我创建了一个 jsFiddle 来显示我的代码：http: [//jsfiddle.net/wDTvV/](http://jsfiddle.net/wDTvV/)

基本上以下 CSS 规则不起作用：

```
.form-item-products:first-child {
  display: none;
 } 
```

有谁知道为什么？我是否搞砸了使用伪选择器的语法？

多谢你们，

瑞克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:23:58.077

`:first-child`只能匹配其父元素的第一个子元素。
在您的示例中，这是`#product-guide-wrapper`.

与 jQuery 不同，CSS 没有`:first`选择器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T13:24:51.307

第一个孩子不是 a `.form-item-products`，而是`#product-guide-wrapper`，因此您的选择器将不匹配。

正如 SLaks 所提到的，`:first`CSS 中没有像 jQuery 那样的选择器。但是，鉴于您的结构，您应该可以使用它`#product-guide-wrapper + .form-item-products`。

# javascript - 将 div 类作为参数传递给 javascript 函数

> ID：10898150
> 
> 赞同：0
> 
> 时间：2012-06-05T13:23:58.457
> 
> 标签：javascript, function, html, arguments

抱歉，只是一个简单的问题。我刚开始用 javascript 编写代码，我想知道是否有办法执行以下操作。我想将 div 类的名称作为参数传递给 javascript 函数。是否可以将 div 的名称作为字符串传递，然后将该字符串用作 javascript 函数中的 div 类，还是有其他方法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:27:05.267

在不知道您要对课程做什么的情况下，我猜您想将其添加到某个 div 中。

HTML：

```
<div id="myDiv"></div> 
```

JS：

```
var someFunc = function (classToAdd, id) {
    // do awesome stuff
    document.getElementById(id).className = classToAdd;
};

someFunc('someClass', 'myDiv'); 
```

# linux - 在日期范围内创建的所有文件中进行 Grep

> ID：10898154
> 
> 赞同：35
> 
> 时间：2012-06-05T13:24:07.883
> 
> 标签：linux, ubuntu, find, grep, date-range

我在 Ubuntu 操作系统上。我想在 2012 年 5 月 28 日到 2012 年 5 月 30 日的日期范围内创建的所有日志文件中 grep 一个单词（比如 XYZ）。

我怎么做？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-05T13:49:09.327

这与 Banthar 的解决方案略有不同，但它适用于`find`不支持的版本，`-newermt`并展示了如何使用该`xargs`命令，这是一个非常有用的工具。

您可以使用该`find`命令来定位“特定年龄”的文件。这将找到 5 到 10 天前修改过的所有文件：

```
 find /directory -type f -mtime -10 -mtime +5 
```

然后在这些文件中搜索字符串：

```
 find /directory -type f -mtime -10 -mtime +5 -print0 |
   xargs -0 grep -l expression 
```

您也可以使用该`-exec`开关，但我发现`xargs`它更具可读性（而且它通常也会表现得更好，但在这种情况下可能不是）。

（请注意，该`-0`标志用于让此命令对带有嵌入空格的文件进行操作，例如`this is my filename`.）

**更新评论中的问题**

当您向 提供多个表达式时`find`，它们会被“与”在一起。例如，如果您要求：

```
find . -name foo -size +10k 
```

...`find`只会返回 (a) 命名`foo` *和*(b) 大于 10 KB 的文件。同样，如果您指定：

```
find . -mtime -10 -mtime +5 
```

...`find`只会返回 (a) 比 10 天前新*和*(b) 比 5 天前旧的文件。

例如，在我的系统上，它目前是：

```
$ date
Fri Aug 19 12:55:21 EDT 2016 
```

我有以下文件：

```
$ ls -l
total 0
-rw-rw-r--. 1 lars lars 0 Aug 15 00:00 file1
-rw-rw-r--. 1 lars lars 0 Aug 10 00:00 file2
-rw-rw-r--. 1 lars lars 0 Aug  5 00:00 file3 
```

如果我要求“超过 5 天前修改的文件（`-mtime +5`），我会得到：

```
$ find . -mtime +5
./file3
./file2 
```

但是，如果我要求“修改时间超过 5 天但不到 10 天的文件”（`-mtime +5 -mtime -10`），我得到：

```
$ find . -mtime +5 -mtime -10
./file2 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-05T13:45:48.617

结合 grep 与[find](http://linux.die.net/man/1/find)：

```
find -newermt "28 May 2012" -not -newermt "30 May 2012" -exec grep XYZ \{\} \; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-05T13:50:13.883

`find`似乎没有选项可以指定时间戳比较的特定日期（至少我笔记本电脑上的版本没有 - 可能有其他版本和/或其他类似执行的工具），所以你必须使用天数。因此，截至 2012 年 6 月 5 日，您希望查找 9 天以上但 6 天以上的文件：

```
find . -type f -ctime -9 -ctime +6 -print0 | xargs -0 grep XYZ 
```

# c# - 在 ASP.NET 会话之外使用 HttpApplicationState

> ID：10898157
> 
> 赞同：2
> 
> 时间：2012-06-05T13:24:34.397
> 
> 标签：c#, asp.net

我有以下问题。我正在尝试在应用程序中使用用 ASP.NET 编写的 Web 服务作为中间层，存储在 WCF 服务层中。因此，我正在实例化一些 WebService 类，并像普通 C# 方法一样调用 Web 方法。不幸的是，其中一些正在使用 asp.net 特定的解决方案，例如使用 HttpContext 和 Application 对象（类型为**HttpApplicationState**）。我正在尝试在 web 服务调用之前将项目添加到此集合中，但没有任何反应！**使用Add 方法**后项目不存在。没有例外，没有。我认为 HttpApplicationState 类的实现内部有一些功能，在某些情况下会阻止此操作，但我在反射器中检查了代码，一切都应该没问题......我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:28:02.463

不肯定我了解您的应用程序结构，但听起来您想在打开 asp.net 兼容性的情况下运行 wcf 以允许 HttpContext？

[http://msdn.microsoft.com/en-us/library/aa702682.aspx](http://msdn.microsoft.com/en-us/library/aa702682.aspx)

# ios - 删除 CouchDB 中的多个文档

> ID：10898158
> 
> 赞同：5
> 
> 时间：2012-06-05T13:24:39.720
> 
> 标签：ios, couchdb, couchcocoa

在使用 CouchCocoa 框架时，我有一个关于 CouchDB 的“最佳实践”问题（实际上我正在使用 TouchDB 一个 CouchDB 端口到 iOS）。

我需要删除通过查询获得的一堆文档。我知道 3 种方法可以做到这一点：

1) 将所有文档放入一个 NSArray，然后使用 [CouchDatabase deleteDocuments:]

2）foreach查询行调用delete方法，如：for (CouchQueryRow* row in query.rows) [row.document DELETE];

3) 创建一个发出 _id、_rev 属性并添加 _deleted 属性的查询，然后使用批量更新，例如：[couchDatabase putChanges:]

在性能方面更好的是什么？有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:10:23.423

在 HTTP API 级别，实现此目的的最快方法是运行单个批处理请求，该请求提供要删除的所有文档的`_id`当前和当前。`_rev`

你的工作是确保 CouchCocoa 确实做到了这一点——我知道 CouchCocoa 会尝试缓存`_rev`它读取的文档，所以如果你要删除刚刚读取的文档，就`[CouchDatabase deleteDocuments:]`足够了，否则你必须先做`[CouchDatabase getDocumentsWithIDs:]`。

**如果您的文档非常大**`_rev`，使用视图而不是批量获取可能会更好。这迫使您使用`[CouchDatabase putChanges:]`执行批量删除。我不知道文档大小阈值在哪里，因此您必须对此进行基准测试。

当然，您还需要决定发生冲突时会发生什么。

# java - 更改从 servlet 类返回的 div 类位置

> ID：10898165
> 
> 赞同：1
> 
> 时间：2012-06-05T13:25:10.097
> 
> 标签：java, javascript, servlets, html

我有一个包含多个 div 元素的 HTML 文件。在第二个 div 元素中，我有一个注册表单，提交请求时转到 servlet 类并将值存储在数据库中并返回 HTML 文件。但是第一个 div 元素是打开的，我想在从 servlet 类成功返回后从打开的第二个 div 元素注册。

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:25:57.517

[只需让 JSP 在JSTL](https://stackoverflow.com/tags/jstl/info)的帮助下相应地生成 HTML 。您只需在必要时将 HTML 文件转换为 JSP 文件，方法是将扩展名更改`.html`为扩展名，或者在 .xml 文件中`.jsp`添加 JSP servlet 映射`*.html`。`web.xml`

JSP/JSTL 代码看起来像这样

```
<c:if test="${success}">
    <div>This will be displayed only when ${success} evaluates true.</div>
</c:if> 
```

在 servlet 中

```
if (success) {
    request.setAttribute("success", true);
} 
```

请注意，这是一个相当基本的示例。如果您的 servlet 碰巧已经设置了一些指示成功提交的请求或会话属性，例如将注册和登录的用户置于会话范围内

```
session.setAttribute("user", user); 
```

那么您可以在 JSTL 中执行条件检查，如下所示：

```
<c:if test="${not empty user}">
    <div>This will be displayed only when ${user} is present in the scope.</div>
</c:if> 
```

顺便说一句，如果您有多个条件，您也可以使用 a`<c:choose>`代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:26:51.993

```
document.getElementById('div1').style.display='none';
document.getElementById('div2').style.display='block'; 
```

# performance - 一个目录中的最大文件数？

> ID：10898166
> 
> 赞同：1
> 
> 时间：2012-06-05T13:25:12.183
> 
> 标签：performance, file, filesystems, operating-system

一个目录（在任何主机中）中的文件数量是否有任何限制？
如果我有一个包含 30k（命名为 1 到 3ok）文件的目录，而另一个只有 10 个文件的目录在获取特定文件的性能上是否存在重大差异？
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:29:53.697

这取决于您的文件系统类型。这个问题的答案将在您当前的文件系统类型规范中找到。

Archlinux Wiki[性能优化页面](https://wiki.archlinux.org/index.php/Maximizing_Performance)

> 概括：

*   XFS：大文件性能卓越。小文件速度低。/home 的不错选择。-Reiserfs：小文件的出色性能。/var 的一个不错的选择。
*   Ext3：性能一般，可靠。
*   Ext4：整体性能出色，可靠，sqlite 和其他一些数据库存在性能问题。
*   JFS：整体性能好，CPU占用率极低，掉电后恢复速度极快。
*   Btrfs：可能是最好的整体性能（压缩）和许多功能。仍在大力开发和完全支持，但被认为是不稳定的。除非您知道自己在做什么并为潜在的数据丢失做好准备，否则不要使用此文件系统。

[fsck 时间与 Inode 计数](http://upload.wikimedia.org/wikipedia/commons/6/63/E2fsck-uninit.svg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T13:34:21.493

我会说最大文件数是特定于操作系统和特定于文件系统的。但是在访问文件时，在一个目录中拥有大量 ob 文件会极大地影响您的性能。

我无法为您提供任何特定 os/fs 的任何数字，但如果您遇到性能问题，也许可以提供解决方案：

在 mediawiki 软件（即运行 wikipedia 的软件）中，他们使用子目录来解决该问题。这是他们存储媒体文件的方式：

1.  md5-hash 文件名
2.  将 md5hash 的第一个数字作为文件 dir 的子目录
3.  将 md5hash 的前 2 位数字作为该子目录的子目录的名称
4.  将文件存储在那里

这样他们就可以仅通过名称找到文件，但不需要依赖一个好的 os/fs 来获取大量文件。结果是这样的：

`http://upload.wikimedia.org/wikipedia/commons/7/74/Flag_of_Hamburg.svg`是路径`Flag_of_Hamburg.svg`

# iphone - 在 UIImageView 动画持续一段时间后访问事件

> ID：10898168
> 
> 赞同：0
> 
> 时间：2012-06-05T13:25:13.927
> 
> 标签：iphone, uiimageview, uiimage

`UIImageView`我希望在动画持续一段时间后调用方法。

就像我有 400 的 NSArray用于20 秒`UIImage`的动画。`animationDuration`我希望在 10 秒后触发事件……那我该怎么做呢？

任何可观的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:31:27.397

您是否尝试过类似的方法：

```
- (void)performSelector:(SEL)aSelector withObject:(id)anArgument afterDelay:(NSTimeInterval)delay; 
```

请尝试更具体，但我想这应该是诀窍

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:31:58.437

或者将它们分成两部分第 1 部分方法（）第 2 部分

# asp.net-mvc-3 - 如何根据不同于 UI 文化的标准实现自定义资源提供程序？

> ID：10898169
> 
> 赞同：1
> 
> 时间：2012-06-05T13:25:26.233
> 
> 标签：asp.net-mvc-3, resources

我正在开发 .NET 4.0 MVC3 Web 应用程序。该应用程序全部为英文，并允许用户填写有关不同地区的信息。为简单起见，假设我们有两个区域：*美国*和*西欧*。

现在在视图中，我提供了一个字符串，假设为*Project opening*，但如果用户在*美国*地区工作，我希望它阅读*项目启动*。

当我想到这个功能时，我会立即想到不同区域的资源文件，但独立于 UI 文化。

有没有人有一个食谱如何实现我想要的？

如果将来我可以让它读取例如`ExtendedDisplayAttribute(string displayName, int regionId)`放置在我的 ViewModel 的属性上，那也会很好。

**编辑**

我已经处于可以在应该返回该区域的字符串的助手中访问区域信息的阶段。现在我的资源文件有问题。我想用故障转移机制创建多个资源文件。我预计会有一些开箱即用的东西，但是 ResourceManager 不能用于读取 resx 文件。

有没有什么技术可以让我在没有一些无意义的 resgen.exe 的情况下从特定资源文件中读取值？

我也不想用`System.Resources.ResXResourceReader`，因为它属于`System.Windows.Forms.dll`而且这是一个Web app。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:26:06.170

以防万一有人想在将来做同样的事情。这篇文章真的很有帮助： http: [//www.jelovic.com/articles/resources_in_visual_studio.htm](http://www.jelovic.com/articles/resources_in_visual_studio.htm)

我使用的一段代码（VB）是：

```
<Extension()>
Public Function Resource(Of TModel)(ByVal htmlHelper As HtmlHelper(Of TModel), resourceKey As String) As MvcHtmlString
    Dim regionLocator As IRegionLocator = DependencyResolver.Current.GetService(GetType(IRegionLocator))

    Dim resources = New List(Of String)
    If Not String.IsNullOrEmpty(regionLocator.RegionName) Then
        resources.Add(String.Format("Website.Resources.{0}", regionLocator.RegionName))
    End If
    resources.Add("Website.Resources")

    Dim value = String.Empty
    For Each r In resources
        Dim rManager = New System.Resources.ResourceManager(r, System.Reflection.Assembly.GetExecutingAssembly())
        rManager.IgnoreCase = True

        Try
            value = rManager.GetString(resourceKey)
            If Not String.IsNullOrEmpty(value) Then
                Exit For
            End If
        Catch

        End Try
    Next

    Return New MvcHtmlString(value)
End Function 
```

# perl - 4store 安装：4store-v1.1.2-1.x86_64 需要 perl(Net::HTTP)

> ID：10898170
> 
> 赞同：0
> 
> 时间：2012-06-05T13:25:27.643
> 
> 标签：perl, 4store

我只是按照[http://4store.org/trac/wiki/Download](http://4store.org/trac/wiki/Download)的说明进行操作：

```
rpm -Uvh http://4store.org/download/linux/centos5/4store-v1.1.2-1.x86_64.rpm http://4store.org/download/linux/centos5/rasqal-0.9.24-1.x86_64.rpm http://4store.org/download/linux/centos5/raptor2-2.0.0-0.x86_64.rpm http://4store.org/download/linux/centos5/mpfr-2.4.1-1.x86_64.rpm http://4store.org/download/linux/centos5/gmp-4.3.1-5.x86_64.rpm 
```

在 CentOS 5.6 上安装 4store 时出现错误：

```
perl(Net::HTTP) is needed by 4store-v1.1.2-1.x86_64
perl(URI::Escape) is needed by 4store-v1.1.2-1.x86_64 
```

但我已经安装了这些模块：

```
cpan Net::HTTP
cpan URI::Escape 
```

我用以下方法对其进行了测试：

```
perl -MNet::HTTP -e ';' 
```

但我仍然有这些错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:57:22.290

CPAN 客户端不会在 RPM 数据库中注册模块，因此这无助于满足依赖性。

`perl-Net-HTTP`并且`perl-URI-Escape`没有为 CentOS 5.6 正式打包：http: [//vault.centos.org/5.6/os/x86_64/CentOS/](http://vault.centos.org/5.6/os/x86_64/CentOS/)

*   查找提供它们的第 3 方存储库。
*   尝试使用 强制安装`--nodeps`。
*   你也可以贿赂[Dave Cross](https://stackoverflow.com/users/7231/dave-cross)从 CentOS 6 反向移植他维护的软件包：[http ://rpm.mag-sol.com/Centos/6/x86_64/](http://rpm.mag-sol.com/Centos/6/x86_64/)
*   学习包装并自己构建它们。

# java - 合并两个音频文件

> ID：10898174
> 
> 赞同：1
> 
> 时间：2012-06-05T13:25:48.253
> 
> 标签：java, android, audio

我是java的新手。我试图一个一个地播放它们，但我得到一个错误。如何将两个音频文件合并为一个？请帮帮我。如果用户键入不同的文本，它应该播放不同的声音。我知道声音开始之间应该有一些停顿，但我该怎么做。我也可以组合每个字母的所有声音，然后播放整个声音吗？

```
setContentView(R.layout.main);
    Button bStart = (Button) findViewById(R.id.bStart);
    final EditText etStart = (EditText) findViewById(R.id.etStart);
    final EditText etFinish = (EditText) findViewById(R.id.etFinish);
    final char[] arr = etStart.getText().toString().toCharArray();
    final MediaPlayer as = MediaPlayer.create(R2d2Activity.this, R.raw.as);
    final MediaPlayer bs = MediaPlayer.create(R2d2Activity.this, R.raw.bs);
    final SoundPool sp;
    final int a;
    sp = new SoundPool(2, AudioManager.STREAM_MUSIC, 0);
    a = sp.load(this, R.raw.as, 1);
    bStart.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            for (int i=0; i<1; i++){
                String value = etStart.getText().toString();
                String first = value.substring(i, i + 1);
                if(first.contentEquals("a")){
                sp.play(a, 100, 100, 0, 0, 1);
                }if(first.contentEquals("b")){
                sp.play(b, 100, 100, 0, 0, 1);
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:17:26.737

根据您的评论，我认为您应该阅读 SoundPool 文档：

[http://developer.android.com/reference/android/media/SoundPool.html](http://developer.android.com/reference/android/media/SoundPool.html)

```
final void pause(int streamID); // Pause a playback stream. 
```

它应该可以帮助你。

* * *

**编辑**：如果你想强制你的程序暂停所有声音，那么你可以将你的声音播放分离到一个独立的线程。只是在一段时间内休眠你的线程。

# scheme - 列出方案中所有用户定义的变量

> ID：10898180
> 
> 赞同：7
> 
> 时间：2012-06-05T13:26:00.730
> 
> 标签：scheme, racket

在 python 中我可以使用[dir()](http://docs.python.org/release/1.5.1p1/tut/dir.html)而在球拍（5.2）中我可以

```
 (require xrepl)
 ,apropos 
```

获取所有已定义变量的列表。在所有方案中都有什么可移植的方法来做同样的事情？完成后，如何过滤掉所有系统和模块变量？变量的完整列表在球拍中相当令人生畏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T13:56:29.420

要获取 Racket 中特定模块导出的名称，请使用[module->exports](http://docs.racket-lang.org/reference/Module_Names_and_Loading.html?q=module#%28def._%28%28quote._~23~25kernel%29._module-~3eexports%29%29)。对于其他实现，您需要在文档中查找。

```
> (module->exports 'racket/list)
'((0
   (add-between ()) (append* ())    (append-map ())
   (argmax ())      (argmin ())     (cons? ()) (count ())
   (drop ())        (drop-right ()) (eighth ()) (empty ())
   (empty? ())      (fifth ())      (filter-map ())
   (filter-not ())  (first ())      (flatten ())
   (fourth ())      (last ())       (last-pair ())
   (make-list ())   (ninth ())      (partition ())
   (range ())       (rest ())       (second ())
   (seventh ())     (shuffle ())    (sixth ())
   (split-at ())    (split-at-right ()) (take ())
   (take-right ())  (tenth ()) (third ())))
'((0 (remove-duplicates ()))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T12:15:00.083

好吧，这里是如何在[guile](http://www.gnu.org/software/guile/) (v. >= 2.0) 中做到这一点：

```
scheme@(guile-user)> ,binding
%module-public-interface #<variable 9e55e98 value: #<interface (guile-user) 9df6678>>

scheme@(guile-user)> (define foo 'bar)

scheme@(guile-user)> ,binding
foo                     #<variable a06fe28 value: bar>
%module-public-interface #<variable 9e55e98 value: #<interface (guile-user) 9df6678>> 
```

您可以更改上下文以获取某些模块导出的绑定：

```
scheme@(guile-user)> (use-modules (srfi srfi-1))
scheme@(guile-user)> ,module (srfi srfi-1)
scheme@(srfi srfi-1)> ,binding
reduce-right            #<variable 9ead2d0 value: #<procedure reduce-right (f ridentity lst)>>
delete                  #<variable 9eb7aa8 value: #<procedure delete (_ _ #:optional _)>>
lset-xor!               #<variable 9eb7c90 value: #<procedure lset-xor! (= . rest)>>
take!                   #<variable 9ead640 value: #<procedure take! (lst i)>>
... 
```

# node.js - 如何向 node.js 服务器发送消息？

> ID：10898185
> 
> 赞同：1
> 
> 时间：2012-06-05T13:26:09.883
> 
> 标签：node.js

我如何向 Node.js 发送命令

我有一个 jquery / javascript 页面，它在按键 W、A、S 或 D 上检测，然后触发一个事件来更改画布。

下一步是使用（我认为）Websockets 在 Node.js 服务器上触发一个事件。

我发现的大多数教程都与向客户端发送数据相反。

有没有人有关于我将如何做到这一点的教程？

谢谢 - 瑞安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:09:51.627

使用网络套接字，教程在这里[http://socket.io/](http://socket.io/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:42:20.680

您可以通过对 Node.js 的正常 ajax 调用来做到这一点。如果您想要更花哨的东西，请查看 socket.io。

# objective-c - 如何在没有实例的情况下获取 Class 对象？

> ID：10898186
> 
> 赞同：2
> 
> 时间：2012-06-05T13:26:18.113
> 
> 标签：objective-c, ios, oop, nsobject, foundation

有没有办法得到以下结果：

```
 NSObject *a = [[NSObject alloc] init];
    [a class]; 
```

没有实例化？我希望将**Class**对象作为参数传递给函数，然后检查它。像这样：

```
 - (void) pushControllerOfClass: (Class) aClass
    {
        if([aClass isSubclassOfClass: *what should I write here?*]) {
        ...
        }
    } 
```

直觉上，我试着写

```
 if([aClass isSubclassOfClass: UIViewController]) { 
```

但它不起作用。感谢未来的回应。

**更新：** 这样的函数在 ObjectiveC 中被认为是坏的吗？我重构了 Nahavandipoor 的书*iOS 5 Programming Cookbook*中的代码。就像这样：

```
- (void) pushSecondController{
    SecondViewController *secondController = [[SecondViewController alloc]
                                             initWithNibName:nil 
                                             bundle:NULL];
    [self.navigationController pushViewController:secondController animated:YES];
} 
```

对我来说，这是一种不好的功能：它没有在应该参数化的时候进行参数化。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T13:27:57.020

尝试：

```
 if([aClass isSubclassOfClass:[UIViewController class]]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T16:23:45.983

在回答您的问题时，您不需要对象的实例来获取其类。您可以直接从类中获取它，例如：

```
[NSString class];
[YourClass class]; 
```

但是，如果您想要的只是一个可以推送您给它的任何视图控制器的方法，那么您可以使用 UIViewController 作为参数类型：

```
- (void)pushAnyViewController:(UIViewController *)viewController
{
    [self.navigationController pushViewController:viewController animated:YES];
} 
```

这将获取作为 UIViewController 子类的任何视图控制器并将其推送到导航堆栈上。

如果您真的希望该方法也可以处理分配，您可以执行以下操作：

```
- (void)pushViewControllerClass:(Class)viewControllerClass
{
    if ([viewControllerClass isSubclassOfClass:[UIViewController class]])
    {
        id viewController = [[viewControllerClass alloc] initWithNibName:nil bundle:nil];
        [self.navigationController pushViewController:viewController animated:YES];
    }
} 
```

并这样称呼它：

```
Class viewControllerClass = [MyViewController class];
[self pushViewControllerClass:viewControllerClass]; 
```

如果您使用的是笔尖，请确保笔尖的名称与类相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T13:29:10.687

您可以编写`[UIViewController class]`以获取类对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T13:29:45.443

大多数类上应该有一个类方法来获取该类。

如果您发现自己经常这样做，也许重新审视您的设计？

# java - java CMS包括以下功能

> ID：10898187
> 
> 赞同：0
> 
> 时间：2012-06-05T13:26:19.317
> 
> 标签：java, content-management-system

我们正在寻找具有以下功能的 CMS。

*   基于 java 来简化我们的门户集成
*   浏览器内的所见即所得编辑器
*   支柱“内部”
*   集成后无需发布源代码

我们想知道这里的社区会推荐什么。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:38:27.050

露天怎么样？[http://alfresco.com/](http://alfresco.com/) 我过去曾使用过它，一旦正确安装就可以很好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:45:24.400

查看[Liferay](http://liferay.com)。基于 Java，但它不仅仅是 CMS。这是一个门户。

# android - 按下图库幻灯片时如何禁用看起来“按下”的按钮？

> ID：10898191
> 
> 赞同：0
> 
> 时间：2012-06-05T13:26:45.953
> 
> 标签：android, gallery

我有一个画廊。每张幻灯片里面都有一个按钮。

我有一个自定义布局，我正在给幻灯片充气。

在按钮上附加了一个点击监听器，效果很好，图库也可以正常滚动。

但是当我按下按钮外的画廊时，按钮也被按下并变成蓝色。这不会触发按钮的 onClickListener。但它使按钮看起来像是被按下了，我不希望那样。

尝试将画廊的所有侦听器设置为空实现，但没有效果......

提前致谢。

编辑：将一个空的单击侦听器附加到自定义布局，现在按钮不再变为蓝色，但画廊不会滚动，因为事件已被消耗。看看能做些什么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:06:55.533

找到了解决方法。这很可怕，但它有效。

首先，画廊的代码负责我的问题的部分是这样的：

```
public boolean onDown(MotionEvent e) {

    // Kill any existing fling/scroll
    mFlingRunnable.stop(false);

    // Get the item's view that was touched
    mDownTouchPosition = pointToPosition((int) e.getX(), (int) e.getY());

    if (mDownTouchPosition >= 0) {
        mDownTouchView = getChildAt(mDownTouchPosition - mFirstPosition);
        mDownTouchView.setPressed(true);
    }

    // Reset the multiple-scroll tracking state
    mIsFirstScroll = true;

    // Must return true to get matching events for this down event.
    return true;
} 
```

更确切地说，这一行：

```
mDownTouchView.setPressed(true); 
```

在这里，我的幻灯片的布局被按下，LinearLayout 的 setPressed 的默认行为是将其分派给所有孩子，因此所有孩子都被按下。

首先，我尝试创建 Gallery 的子类并覆盖 onDown。如果我只是返回 false 而没有其他任何内容，它会起作用，但是幻灯片会在触摸时出现跳到下一张幻灯片的奇怪行为。那是因为这条线：

```
 mFlingRunnable.stop(false); 
```

哪个没有被执行。由于这个变量是私有的并且与 Gallery 类中的所有其他内容相关，我没有找到从子类中使用它的方法。我也尝试复制所有画廊代码，但它也没有工作，因为它使用了很多只有包访问权限的东西......等等。

所以我创建了一个LinearLayout的子类，它覆盖了onSetPressed：

```
public class LinearLayoutOnSetPressedDoNothing extends LinearLayout {

public LinearLayoutOnSetPressedDoNothing(Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
public void setPressed(boolean pressed) {
}
} 
```

并在我的布局中使用它而不是 LinearLayout：

```
<?xml version="1.0" encoding="utf-8"?>
<com.test.LinearLayoutOnPressDoNothing
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
 >

    <!-- content -->
</com.test.LinearLayoutOnPressDoNothing> 
```

好吧，这行得通。

# javascript - 使用 d3 堆栈布局，按点而不是按层组织数据

> ID：10898193
> 
> 赞同：3
> 
> 时间：2012-06-05T13:26:54.163
> 
> 标签：javascript, json, d3.js

我正在尝试按照[堆叠条示例](http://mbostock.github.com/d3/ex/stack.html)的方式实现一些目标，不同之处在于我的背景数据的组织方式。

布局假定数据是按层组织的。

有没有人尝试使用布局来代替按数据点组织的数据？

例如

```
 //completely random example, but I hope you can get the gist. 
    [{
    id: 1,
    name: 'foo'
    layers: {
        a: 10,
        b: 13,
        c: 12
      }
 }, {
   id: 2,
   name: 'bar',
   layers: {
       a: 8,
       b: 5,
       c: 14
     }
 }] 
```

除了完全重新映射以使数据按层排列（我可能必须为相当大的数据集执行此操作，这就是我要问的原因）之外，有没有人从这样呈现的数据中创建堆叠布局？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T20:17:20.747

您始终可以回避本机 d3 堆栈布局辅助函数并自己根据数据计算 rect 位置 - 这是一个堆叠条的基本示例，其数据类似于您的：http: [//jsfiddle.net/tyR2S/7/](http://jsfiddle.net/tyR2S/7/)

您仍然需要对数据进行一些转换，因此尝试转换为 d3.stack 采用的层输入可能仍然值得，但我提出这个以防万一。

![没有堆叠布局的堆叠条示例](../Images/6469cba9c81d987c35cbdcc0f5b4e632.png)

# facebook - 有没有办法从 https://graph.facebook.com/me./locations 获取状态消息和图像？

> ID：10898194
> 
> 赞同：0
> 
> 时间：2012-06-05T13:26:56.030
> 
> 标签：facebook, facebook-graph-api, location

[https://graph.facebook.com/me/locations](https://graph.facebook.com/me/locations)返回用户所在位置的所有帖子。但是，它不像我/帖子那样包含消息文本或图像。有没有办法在我/位置获取这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:47:50.453

使用 FQL[`location_post`](https://developers.facebook.com/docs/reference/fql/location_post/)表怎么样？

不确定您到底想提取什么，但这就是您使用位置提取状态的方式：

```
SELECT status_id, message FROM status WHERE status_id IN (SELECT id FROM location_post WHERE author_uid=me() OR USER_ID IN tagged_uids) 
```

换成`USER_ID`你的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:02:31.653

我最终只是使用我/帖子并寻找有位置的人。它返回所有图像和消息。

# sql - ORA-00923: 在预期的地方找不到 FROM 关键字

> ID：10898195
> 
> 赞同：1
> 
> 时间：2012-06-05T13:26:56.233
> 
> 标签：sql, oracle, toad

我有下面的代码，我收到错误： ORA-00923: FROM 关键字在第四次选择 ( *** )的**预期位置未找到。**有谁知道为什么？

 *我搜索了其他帖子并没有找到我的解决方案。

```
select plan_date as Week,
      plan_date+7 as "Week + 7",
      plan_date+14 as "Week + 14",
      plan_tower, 
      plan_rice_type, 
      plan_hours/100 as Plan_Count,

      (select count(*)
       from smart_rice_cooker rc
       where rc.tower = p.plan_tower and
             rc.rice_type = p.plan_rice_type and
             rc.status <> 'Cancelled' and
             rc.actual_fd_date between p.plan_start_date and p.plan_end_date
      ) as Delivered_FD_Count,

      (select count(*)
       from smart_rice_cooker rc
       where rc.tower = p.plan_tower and
             rc.rice_type = p.plan_rice_type and
             rc.status <> 'Cancelled' and
             rc.actual_fd_date is null and
             rc.target_fd_date between p.plan_start_date and p.plan_end_date
       ) as Target_FD_Count

       ***(select count(*)
       from smart_rice_cooker rc
       where rc.tower = p.plan_tower and
             rc.rice_type = p.plan_rice_type and
             rc.status <> 'Cancelled' and
             rc.actual_td_date between p.plan_start_date+7 and p.plan_end_date+7
      ) as Delivered_TD_Count,

      (select count(*)
       from smart_rice_cooker rc
       where rc.tower = p.plan_tower and
             rc.rice_type = p.plan_rice_type and
             rc.status <> 'Cancelled' and
             rc.actual_rt_date between p.plan_start_date+14 and p.plan_end_date+14
      ) as RT_Delivered_Count,

      (select count(*)
       from smart_rice_cooker rc
       where rc.tower = p.plan_tower and
             rc.rice_type = p.plan_rice_type and
             rc.status <> 'Cancelled' and
             rc.actual_rt_date is null and
             rc.target_rt_date between p.plan_start_date+14 and p.plan_end_date+14
       ) as RT_Target_Count

from smart_plan p
order by plan_tower, plan_rice_type, plan_date 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T13:31:46.460

后面没有逗号`as Target_FD_Count`。您需要在此处添加逗号。

```
(select count(*)
   from smart_rice_cooker rc
   where rc.tower = p.plan_tower and
         rc.rice_type = p.plan_rice_type and
         rc.status <> 'Cancelled' and
         rc.actual_fd_date is null and
         rc.target_fd_date between p.plan_start_date and p.plan_end_date
   ) as Target_FD_Count, -- <-- Comma here

   (select count(*)
   from smart_rice_cooker rc
   where rc.tower = p.plan_tower and
         rc.rice_type = p.plan_rice_type and
         rc.status <> 'Cancelled' and
         rc.actual_td_date between p.plan_start_date+7 and p.plan_end_date+7
  ) as Delivered_TD_Count, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:32:26.567

您在别名 Target_FD_Count 后缺少逗号。通常，当您发现此错误时，请检查您选择的逗号。*

# python - python float 到 int 的转换

> ID：10898215
> 
> 赞同：7
> 
> 时间：2012-06-05T13:28:13.277
> 
> 标签：python, floating-point

我有一个真正让我发疯的问题。通常这样做`int(20.0)`会导致`20`. 到现在为止还挺好。但：

```
levels = [int(gex_dict[i]) for i in sorted(gex_dict.keys())] 
```

while`gex_dict[i]`返回一个浮点数，例如`20.0`，结果为：

```
"invalid literal for int() with base 10: '20.0'" 
```

我离咀嚼键盘的最后一块只有一步之遥。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-05T13:31:06.863

`'20.0'`是一个字符串，而不是一个`float`；您可以通过错误消息中的单引号来判断。您可以`int`通过首先用 解析它`float`，然后用 截断它来摆脱它`int`：

```
>>> int(float('20.0'))
20 
```

（尽管您可能希望在字典中存储浮点数而不是字符串，因为这似乎是您所期望的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T13:31:23.143

看起来该值是一个字符串，而不是一个浮点数。所以你需要`int(float(gex_dict[i]))`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T13:32:35.607

看起来问题在于它`gex_dict[i]`实际上返回了 float 的字符串表示形式`'20.0'`。尽管 int() 能够将浮点数转换为 int，并将整数的字符串表示形式转换为 int。它不具备将浮点数的字符串表示形式转换为 int 的能力。

int 的文档可以在这里找到：http: [//docs.python.org/library/functions.html#int](http://docs.python.org/library/functions.html#int)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T13:32:15.867

问题是您有一个字符串而不是浮点数，请将此视为比较：

```
>>> int(20.0)
20
>>> int('20.0')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid literal for int() with base 10: '20.0' 
```

您可以通过先转换为 float 然后再转换为 int 来解决此问题：

```
>>> int(float('20.0'))
20 
```

所以在你的情况下：

```
levels = [int(float(gex_dict[i])) for i in sorted(gex_dict.keys())] 
```

# django - 在 apache 上设置 django (mod_wsgi, virtualenv)

> ID：10898216
> 
> 赞同：3
> 
> 时间：2012-06-05T13:28:16.940
> 
> 标签：django, apache, mod-wsgi, virtualenv

我是第一次将我的 django 网站投入生产，所以请原谅我的无知。

我正在尝试将我的 django 网站放在 apache 上。我已经阅读了有关 mod_wsgi 的文档，并尝试了那个简单的 Hello world，所以它配置好了。我遇到的问题似乎与使用 virtualenvs 有关。我想正确设置包括 virtualenvs 和所有内容，以便为将来的站点做好准备。

到现在的问题。

我在 apache 日志中遇到的错误是：

```
No module named django.core.handlers.wsgi 
```

所以它似乎没有正确读取我的 virtualenvs。

这是我的 wsgi 脚本：

```
import os
import sys
import site
site.addsitedir('/home/user/.virtualenvs/myapp/lib/python2.7/site-packages')

path = '/home/user/django/myapp/myapp'
if path not in sys.path:
    sys.path.append(path)

sys.stdout = sys.stderr
print sys.path

os.environ['DJANGO_SETTINGS_MODULE'] = 'myapp.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

这是来自 apache 的错误日志。我打印了 sys.path，这样你就可以看到它的样子。

```
[Tue Jun 05 14:54:07 2012] [error] ['/usr/lib/python27.zip', '/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', '/usr/lib/python2.7/site-packages', '/usr/lib/python2.7/site-packages/PIL', '/usr/lib/python2.7/site-packages/setuptools-0.6c11.egg-info', '/home/user/.virtualenvs/myapp/lib/python2.7/site-packages', '/home/user/django/myapp/myapp']
[Tue Jun 05 14:54:07 2012] [error] [client 127.0.0.1] mod_wsgi (pid=1039): Target WSGI script '/srv/http/wsgi_scripts/myapp.wsgi' cannot be loaded as Python module.
[Tue Jun 05 14:54:07 2012] [error] [client 127.0.0.1] mod_wsgi (pid=1039): Exception occurred processing WSGI script '/srv/http/wsgi_scripts/myapp.wsgi'.
[Tue Jun 05 14:54:07 2012] [error] [client 127.0.0.1] Traceback (most recent call last):
[Tue Jun 05 14:54:07 2012] [error] [client 127.0.0.1]   File "/srv/http/wsgi_scripts/myapp.wsgi", line 17, in <module>
[Tue Jun 05 14:54:07 2012] [error] [client 127.0.0.1]     import django.core.handlers.wsgi
[Tue Jun 05 14:54:07 2012] [error] [client 127.0.0.1] ImportError: No module named django.core.handlers.wsgi 
```

如果您有任何建议或已经遇到类似问题，请提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:39:50.250

您还没有将实际的 virtualenv site-packages 目录添加到组合中。尝试：

```
import site
site.addsitedir('/path/to/your/virtualenv/lib/python2.X/site-packages')
# Where `X` is the specific version 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T08:42:39.537

对于任何可能与我有类似问题的人。您需要检查存储 virtualenv 的目录的整个路径权限。

我检查了主目录并更改了权限，但忘记将权限更改为我的用户目录并修复了问题。

希望这可以帮助。

# actionscript-3 - AIR Mobile 嵌入式字体

> ID：10898217
> 
> 赞同：2
> 
> 时间：2012-06-05T13:28:17.100
> 
> 标签：actionscript-3, air

我正在尝试更改 AIR 移动应用程序中文本字段的默认字体。
我首先使用这一行嵌入字体：

```
[Embed(source='C:/WINDOWS/Fonts/ARIAL.TTF', fontName="_Arial", mimeType="application/x-font-truetype")] 
```

之后，我`TextFormat`用这种字体创建一个：`style.font = "_Arial";`并将其设置为文本字段：`tf.setTextFormat(style);`

可悲的是，字体没有改变。
任何人都知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:40:37.383

你需要使用：

```
tf.defaultTextFormat = style; 
```

`defaultTextFormat`和之间有区别`setTextFormat`

[设置文本格式](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#setTextFormat%28%29)

[默认文本格式](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#defaultTextFormat)

**更新：**

不知道为什么这不起作用你有什么，但我设法让它工作，只需用这个替换字体嵌入行：

```
[Embed(systemFont="Arial", fontName="_Arial", mimeType="application/x-font-truetype", embedAsCFF="false")] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:30:01.117

您是否设置了 textfield.embedfont = true。?

# django - 为什么 django 为表单字段调用 __init__() 两次

> ID：10898218
> 
> 赞同：2
> 
> 时间：2012-06-05T13:28:22.023
> 
> 标签：django, django-forms

我正在尝试在表单中使用[django-simple-autocomplete](https://github.com/praekelt/django-simple-autocomplete)。但是，当我向 中添加调试打印时`simple_autocomplete.widgets`，我看到每个表单字段的widget*被*`__init__()`调用了两次，第一次使用表单规范中提供的参数，*第二*次没有**任何**参数，这显然会破坏所有参数。

我必须通过执行以下操作来解决此问题：

```
class MyForm(forms.Form):
    def __init__(self,*args, **kwargs):
        super(MyForm, self).__init__(*args, **kwargs)
        self.fields['foo'] = AutoCompleteWidget(url="/json_url")

    foo = forms.ModelChoiceField(
        widget=None,
        ....
        ) 
```

为什么会这样？

**编辑/澄清**：

*   如果我**没有**上述解决方法，而是在 foo 定义中只有 widget=MyWidget() ，就会发生这种情况。
*   它是被调用两次的**小部件。**`__init__()`
*   @zubair89 - 我确实有`def __init__()`- 这就是我实际上发现它被调用两次的方式！

# java - java.lang.NullPointerException with context.getSharedPreferences(STORAGE_NAME, 0)

> ID：10898221
> 
> 赞同：1
> 
> 时间：2012-06-05T13:28:33.387
> 
> 标签：java, android, sharedpreferences

我创建了一个使用`SharedPreferences`. 在我的`Activity`，我试图添加一个项目并得到以下错误......

```
06-05 17:01:53.950: E/AndroidRuntime(3488): FATAL EXCEPTION: main
06-05 17:01:53.950: E/AndroidRuntime(3488): java.lang.NullPointerException
06-05 17:01:53.950: E/AndroidRuntime(3488):     at com.xcxcxc.helpers.Prefs.init(Prefs.java:16)
06-05 17:01:53.950: E/AndroidRuntime(3488):     at com.xcxcxc.helpers.Prefs.addStringProperty(Prefs.java:30)
06-05 17:01:53.950: E/AndroidRuntime(3488):     at com.xcxcxc.usersadapter.SplashActivity$1.callback(SplashActivity.java:78)
06-05 17:01:53.950: E/AndroidRuntime(3488):     at com.xcxcxc.usersadapter.SplashActivity$1.callback(SplashActivity.java:1) 
```

这是我处理`SharedPreferences`...的代码

```
import android.content.Context;
import android.content.SharedPreferences;

public class Prefs {

    public static final String STORAGE_NAME = "ApplicationPrefs";

    private static SharedPreferences settings = null;
    private static SharedPreferences.Editor editor = null;
    private static Context context = null;

    public static void init(Context cntxt) {
        context = cntxt;
    }

    private static void init() {
        settings = context.getSharedPreferences(STORAGE_NAME, 0);
        editor = settings.edit();
    }

    /* String values */
    public static void addStringProperty(String name, String value) {
        if (settings == null || editor == null) {
            init();
        }
        editor.putString(name, value);
        editor.commit();
    }

    public static String getStringProperty(String name) {
        if (settings == null || editor == null) {
            init();
        }
        return settings.getString(name, null);
    }
} 
```

这是我在我的`Activity`...中调用的代码

```
Prefs.addStringProperty("client_id", "1JDkv9sdfj8sf63rjs"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:32:18.800

看起来上下文为空。在 addStringProperty(..) 之前设置上下文

```
Prefs.init(getApplicationContext());
Prefs.addStringProperty("client_id", "1JDkv9sdfj8sf63rjs"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:32:36.283

`context`似乎是**null**。试着打电话

```
public static void init(Context cntxt) 
```

第一的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T13:32:36.403

```
settings = context.getSharedPreferences(STORAGE_NAME, 0); 
```

此语句必须导致 NPE。
你如何以及在哪里调用`init(Context cntxt)`方法。

除非上下文对象被初始化，否则你会得到一个`NPE`. 先修好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T13:32:36.897

`context`可能是空的，这就是为什么你得到空指针异常：

```
private static void init() {
    settings = context.getSharedPreferences(STORAGE_NAME, 0);
    editor = settings.edit();
} 
```

先调用`public static void init(Context cntxt)`或处理空值：

```
private static void init() {
    if(context != null){
       settings = context.getSharedPreferences(STORAGE_NAME, 0);
       editor = settings.edit();
    }
} 
```

# python - 通过卷积掩码进行梯度计算

> ID：10898229
> 
> 赞同：2
> 
> 时间：2012-06-05T13:28:58.737
> 
> 标签：python, gradient, mask, convolution

我需要计算一个矩阵的梯度`(3,3)`，比如说`a=array([[1,4,2],[6,2,4],[7,5,1]])`。

我只是使用：

```
from numpy import *
dx,dy = gradient(a)
>>> dx
   array([[ 5\. , -2\. ,  2\. ],
   [ 3\. ,  0.5, -0.5],
   [ 1\. ,  3\. , -3\. ]])
>>> dy
array([[ 3\. ,  0.5, -2\. ],
   [-4\. , -1\. ,  2\. ],
   [-2\. , -3\. , -4\. ]]) 
```

我知道计算矩阵梯度的一种方法是通过对每个方向的掩码进行卷积，但结果不同

```
from scipy import ndimage
mx=array([[-1,0,1],[-1,0,1],[-1,0,1]])
my=array([[-1,-1,-1],[0,0,0],[1,1,1]])
cx=ndimage.convolve(a,mx)
cy=ndimage.convolve(a,my)
>>> cx
array([[-2,  0,  2],
   [ 3,  7,  4],
   [ 8, 14,  6]])
>>> cy
array([[ -8,  -5,  -2],
   [-13,  -6,   1],
   [ -5,  -1,   3]]) 
```

错误在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T13:33:09.267

对于这么小 (3x3) 的图像，除了中心像素之外的所有图像都将受到边界条件的影响，从而使结果变得毫无意义。

但无论如何，快速浏览一下[文档`numpy.gradient`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.gradient.html)就会发现：

> 梯度是使用内部的中心差和边界处的一阶差来计算的。

换句话说，它没有在整个图像中使用固定的卷积核。听起来它只是`(array(i+1,j) - array(i-1,j)) / 2`针对内部点和`(array(i,j) - array(i-1,j)`边界点。

# iphone - 如何隐藏 ios 4.3 的 UITabBar 选择指示器而不是 5+？

> ID：10898237
> 
> 赞同：3
> 
> 时间：2012-06-05T13:29:25.390
> 
> 标签：iphone, ios, ipad

如何隐藏 ios 4.3 的 UITabBar 选择指示器而不是 5+

我需要在ios 4.3 中隐藏UITabBar 控制器的选择指示器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T23:52:07.253

试试这个代码：

```
// iOS 5.0+
[self.tabBar setSelectionIndicatorImage:[[[UIImage alloc] init]autorelease]];

// for earlier versions

- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController {
    [self customizeTabBar];
}

- (void)customizeTabBar {
    NSString *imageName = [NSString stringWithFormat:@"tabBackground%i.png", tabBarCtrl.selectedIndex + 1];

    for(UIView *view in tabBarCtrl.tabBar.subviews) {  
         if([view isKindOfClass:[UIImageView class]]) {  
              [view removeFromSuperview];  
         }  
    }  
    UIImageView *background = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:imageName]] autorelease];
    [tabBarCtrl.tabBar insertSubview:background atIndex:0]; 
    [tabBarCtrl.tabBar bringSubviewToFront:background];
    //if needed, here must be adding UILabels with titles, I didn't need it.
} 
```

希望能帮助到你！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:59:57.863

这是不可能的，但你可以试试这个技巧。

在控制器上（添加到 TabBarController 项的控制器） tabBarItem enable 设置为 false

```
[controller.tabBarItem setEnabled:NO]; 
```

当 TabBarController 出现时，您可以在 tabBarItem 上添加按钮，在这种情况下按钮添加到中心（TabbarItem 为 5）

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    UIImage *buttonImage = [UIImage imageNamed:@"1.png"]
    UIImage *highlightImage = [UIImage imageNamed:@"1_selected.png"]

    UIButton* button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.autoresizingMask = UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleTopMargin;
    button.frame = CGRectMake(0.0, 0.0, buttonImage.size.width, buttonImage.size.height);
    [button setBackgroundImage:buttonImage forState:UIControlStateNormal];
    [button setBackgroundImage:highlightImage forState:UIControlStateHighlighted];
    [button addTarget:self action:@selector(centerCliked:) forControlEvents:UIControlEventTouchUpInside];

    CGFloat heightDifference = buttonImage.size.height - self.tabBar.frame.size.height;
    if (heightDifference < 0)
        button.center = self.tabBar.center;
    else
    {
        CGPoint center = self.tabBar.center;
        center.y = center.y - heightDifference/2.0 + 2;
        button.center = center;
    }
    [self.view addSubview:button];
}

- (IBAction)centerClicked:(id)sender {
     [self setSelectedIndex:2];
} 
```

# arrays - perl比较数组元素和分组

> ID：10898238
> 
> 赞同：5
> 
> 时间：2012-06-05T13:29:26.827
> 
> 标签：arrays, perl, compare

我带着另一个问题回来了。我有一个数据列表：

```
1 L DIELTQSPE H EVQLQESDAELVKPGASVKISCKASGYTFTDHE
2 L DIVLTQSPRVT H EVQLQQSGAELVKPGASIKDTY
3 A ALQLTQSPSSLSAS B RITLKESGPPLVKPTCS C ELDKWAN
4 A ALQLTQSPSSLSAS B RITLKESGPPLVKPTCS C ELDKWAG
5 A ALQLTQSPSSLSAS B RITLKESGPPLVKPTCS C LELDKWASL
6 L DIQMTQIPSSLSASLSIC H EVQLQQSGVEVKMSCKASGYTFTS
7 L SYELTQPPSVSVSPGSIT H QVQLVQSAKGSGYSFS P YNKRKAFYTTKNIIG
8 L SYELTQPPSVSVSPGRIT H EVQLVQSGAASGYSFS P NNTRKAFYATGDIIG
9 A MPIMGSSVAVLAIL B DIVMTQSPTVTI C EVQLQQSGRGP
10 A MPIMGSSVVLAIL B DIVMTQSPTVTI C EVQLQQSGRGP
11 L DVVMTQTPLQ H EVKLDESVTVTSSTWPSQSITCNVAHPASSTKVDKKIE
12 A DIVMTQSPDAQYYSTPYSFGQGTKLEIKR 
```

我想比较每行的第 3 个元素 && 第 5 个元素，如果它们具有相同的第 3 个 && 第 5 个元素，则将它们分组。例如，使用上面的数据，结果将是：

```
3: 3 A ALQLTQSPSSLSAS B RITLKESGPPLVKPTCS C ELDKWAN
   4 A ALQLTQSPSSLSAS B RITLKESGPPLVKPTCS C ELDKWAG
   5 A ALQLTQSPSSLSAS B RITLKESGPPLVKPTCS C LELDKWASL
9: 9 A MPIMGSSVAVLAIL B DIVMTQSPTVTI C EVQLQQSGRGP
   10 A MPIMGSSVVLAIL B DIVMTQSPTVTI C EVQLQQSGRGP 
```

仅供参考，在实际数据中，第 3、5、7 个元素很长。我已经把它们剪下来看看整体。

这就是我所做的，我知道这很笨拙，但是作为初学者，我正在尽力而为。问题是它只显示第一组“相同”组。你能告诉我哪里出了问题和/或其他漂亮的方法来解决这个问题吗？

```
my $file = <>;
open(IN, $file)|| die "no $file: $!\n";
my @arr;
while (my $line=<IN>){
        push @arr, [split (/\s+/, $line)] ;
}
close IN;

my (@temp1, @temp2,%hash1);
for (my $i=0;$i<=$#arr ;$i++) {
    push @temp1, [$arr[$i][2], $arr[$i][4]]; 
    for (my $j=$i+1;$j<=$#arr ;$j++) {
        push @temp2, [$arr[$j][2], $arr[$j][4]];
        if (($temp1[$i][0] eq $temp2[$j][0])&& ($temp1[$i][1] eq $temp2[$j][1])) {
            push @{$hash1{$arr[$i][0]}}, $arr[$i], $arr[$j];
        }
    }
}
print Dumper \%hash1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:50:09.207

你似乎把它复杂化了一点，但这对于初学者来说很常见。更多地考虑如何手动执行此操作：

*   看每一行。
*   查看第三个和第五个字段是否与上一行相同。
*   如果是这样，请打印它们。

循环和所有这些都是完全不必要的：

```
#!/usr/bin/env perl

use strict;
use warnings;

my ($previous_row, $third, $fifth) = ('') x 3;

while (<DATA>) {
  my @fields = split;
  if ($fields[2] eq $third && $fields[4] eq $fifth) {
    print $previous_row if $previous_row;
    print "\t$_";
    $previous_row = '';
  } else {
    $previous_row = $fields[0] . "\t" . $_;
    $third = $fields[2];
    $fifth = $fields[4];
  }
}

__DATA__
1 L DIELTQSPE H EVQLQESDAELVKPGASVKISCKASGYTFTDHE
2 L DIVLTQSPRVT H EVQLQQSGAELVKPGASIKDTY
3 A ALQLTQSPSSLSAS B RITLKESGPPLVKPTCS C ELDKWAN
4 A ALQLTQSPSSLSAS B RITLKESGPPLVKPTCS C ELDKWAG
5 A ALQLTQSPSSLSAS B RITLKESGPPLVKPTCS C LELDKWASL
6 L DIQMTQIPSSLSASLSIC H EVQLQQSGVEVKMSCKASGYTFTS
7 L SYELTQPPSVSVSPGSIT H QVQLVQSAKGSGYSFS P YNKRKAFYTTKNIIG
8 L SYELTQPPSVSVSPGRIT H EVQLVQSGAASGYSFS P NNTRKAFYATGDIIG
9 A MPIMGSSVAVLAIL B DIVMTQSPTVTI C EVQLQQSGRGP
10 A MPIMGSSVAVLAIL B DIVMTQSPTVTI C EVQLQQSGRGP
11 L DVVMTQTPLQ H EVKLDESVTVTSSTWPSQSITCNVAHPASSTKVDKKIE
12 A DIVMTQSPDAQYYSTPYSFGQGTKLEIKR 
```

（请注意，我稍微更改了第 10 行，使其第三个字段与第 9 行匹配，以便在输出中获得指定的相同组。）

**编辑：**一行代码因复制/粘贴错误而重复。

**编辑2：**作为对评论的回应，这是第二个版本，它不假定应该分组的行是连续的：

```
#!/usr/bin/env perl

use strict;
use warnings;

my @lines;
while (<DATA>) {
  push @lines, [ $_, split ];
}

# Sort @lines based on third and fifth fields (alphabetically), then on
# first field/line number (numerically) when third and fifth fields match
@lines = sort { 
  $a->[3] cmp $b->[3] || $a->[5] cmp $b->[5] || $a->[1] <=> $b->[1] 
} @lines;

my ($previous_row, $third, $fifth) = ('') x 3;
for (@lines) {
  if ($_->[3] eq $third && $_->[5] eq $fifth) {
    print $previous_row if $previous_row;
    print "\t$_->[0]";
    $previous_row = '';
  } else {
    $previous_row = $_->[1] . "\t" . $_->[0];
    $third = $_->[3];
    $fifth = $_->[5];
  }
}

__DATA__
1 L DIELTQSPE H EVQLQESDAELVKPGASVKISCKASGYTFTDHE
3 A ALQLTQSPSSLSAS B RITLKESGPPLVKPTCS C ELDKWAN
2 L DIVLTQSPRVT H EVQLQQSGAELVKPGASIKDTY
5 A ALQLTQSPSSLSAS B RITLKESGPPLVKPTCS C LELDKWASL
7 L SYELTQPPSVSVSPGSIT H QVQLVQSAKGSGYSFS P YNKRKAFYTTKNIIG
6 L DIQMTQIPSSLSASLSIC H EVQLQQSGVEVKMSCKASGYTFTS
9 A MPIMGSSVAVLAIL B DIVMTQSPTVTI C EVQLQQSGRGP
8 L SYELTQPPSVSVSPGRIT H EVQLVQSGAASGYSFS P NNTRKAFYATGDIIG
11 L DVVMTQTPLQ H EVKLDESVTVTSSTWPSQSITCNVAHPASSTKVDKKIE
10 A MPIMGSSVAVLAIL B DIVMTQSPTVTI C EVQLQQSGRGP
12 A DIVMTQSPDAQYYSTPYSFGQGTKLEIKR
4 A ALQLTQSPSSLSAS B RITLKESGPPLVKPTCS C ELDKWAG 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:53:32.710

略有不同的做法：

```
#!/usr/bin/perl

use strict;
use warnings;

my %lines; # hash with 3rd and 5th elements as key
my %first_line_per_group; # stores in which line a group appeared first

while(my $line = <>) {
    # remove line break
    chomp $line;

    # retrieve elements form line
    my @elements = split /\s+/, $line;

    # ignore invalid lines
    next if @elements < 5;

    # build key from elements 3 and 5 (array 0-based!)
    my $key = $elements[2] . " " . $elements[4];

    if(! $lines{key}) {
        $first_line_per_group{$key} = $elements[0];
    }

    push @{ $lines{$key} }, $line;
}

# output
for my $key (keys %lines) {
    print $first_line_per_group{$key} . ":\n";

    print "    $_\n" for @{ $lines{$key} };
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T13:45:38.227

例子：

```
use strict;
use warnings;

{ ... }

open my $fh, '<', $file or die "can't open $file: $!";

my %hash;

# read and save it
while(my $line = <$fh>){
    my @line = split /\s+/, $line;
    my $key = $line[2] . ' ' . $line[4];

    $hash{$key} ||= [];
    push @{$hash{$key}}, $line; 
}

# remove single elements
for my $key (keys %hash){
    delete $hash{$key} if @{$hash{$key}} < 2;
}

print Dumper \%hash; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T13:44:52.793

Your approach shows a pretty solid grasp of Perl idiom and has merit, but still is not how I would do it.

I think that you will have an easier time with this if you structure your data slightly differently: Let `%hash1` be something like

```
(
    'ALQLTQSPSSLSAS' => {
        'RITLKESGPPLVKPTCS' => [3, 4, 5],
        'ABCXYZ' => [93, 95, 96],
    },
    'MPIMGSSVAVLAIL' => {
        'DIVMTQSPTVTI' => [9, 10],
    },
) 
```

where I have added a datum `ABCXYZ` which is not in your example to show the data structure in its fullness.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T14:09:29.320

您应该使用 open() 的 3 参数形式，并且可以简化数据的读取：

```
open my $fh, '<', $file
    or die "Cannot open '$file': $!\n";

chomp(my @rows = <$fh>);
@rows = map {[split]} @rows;

close $fh; 
```

要对行进行分组，您可以使用将第 3 个和第 5 个字段连接为键的散列。编辑：您必须添加一个分隔字符以消除“如果不同的行产生相同的连接”（Qtax）的无效结果。附加数据，例如单个数据行的数量，可以存储为散列值。这里存储了行的字段：

```
my %groups;
for (@rows) {
    push @{ $groups{$_->[2] . ' ' . $_->[4]} }, $_
        if @$_ >= 4;
} 
```

对单个元素进行排序：

```
@{ $groups{$_} } < 2 && delete $groups{$_}
    for keys %groups; 
```

问候，马蒂亚斯

# android - 未选择任何内容的微调器

> ID：10898242
> 
> 赞同：2
> 
> 时间：2012-06-05T13:29:40.610
> 
> 标签：android, spinner

我尝试制作一个微调器，它在第一次使用时会在其折叠状态下显示类似“*请选择...* ”的文本，当它显示下拉状态时，它会显示所有项目，但没有选择任何内容。我尝试了不同的方法：

1.  使用带有额外“*请选择...* ”项的列表，并尝试在第一个下拉列表中将其从列表中删除（问题是微调器第一次下拉时没有通知）

2.  尝试通过覆盖 getDropDownView 来隐藏下拉视图中的第一项。但是当我将位置 0 的视图高度设置为 0 像素时，微调器会在其视图末尾留下一些额外的空间，看起来视图的大小是在调用 getDropDownView 之前计算的。

还有其他想法吗？谢谢你！

# binding - 如何在 MonoTouch Binding Project 中添加 libsqlite3.0.dylib？

> ID：10898244
> 
> 赞同：3
> 
> 时间：2012-06-05T13:29:44.007
> 
> 标签：binding, xamarin.ios, dylib

我想将[Aviary SDK](http://www.aviary.com/ios) Objective-C 库集成到 Monotouch 项目中。我为此使用“Monotouch Binding Project”模板。所以我创建了 API 定义文件并定义了 LinkWith 属性。

```
[assembly: LinkWith ("libAviarySDK.a", LinkTarget = LinkTarget.ArmV6 | LinkTarget.ArmV7 | LinkTarget.Simulator, ForceLoad = true, IsCxx = true, Frameworks="CoreGraphics QuartzCore Accelerate StoreKit CoreData", LinkerFlags="-ObjC -all_load -fobjc-arc")] 
```

它需要以下库：

*   基础框架
*   UIKit.framework
*   CoreGraphics.framework
*   QuartzCore.framework
*   加速框架
*   StoreKit.framework
*   libz.1.2.5.dylib
*   ***libsqlite3.0.dylib***
*   CoreData.framework

除了 libsqlite3.0.dylib 之外，所有这些框架都可以毫无问题地链接

但是，我遇到的问题是该库依赖于**libsqlite3.0.dylib**，我不知道如何将这些框架包含在我的 MonoTouch 应用程序中。

结果 - 编译器返回以下错误：

> /Developer/MonoTouch/SDKs/MonoTouch.iphonesimulator.sdk/usr/lib -u _catch_exception_raise -force_load /var/folders/2n/ql7wkht57cg8wfgzz0cr9trm0000gn/T/tmp31d0b99b.tmp/libAviarySDK.a -ObjC -all_load -fobjc-arc
> 
> 架构 i386 的未定义符号：
> 
> “_sqlite3_open”，引用自：-[AFLocalyticsDatabase init] in libAviarySDK.a(AFLocalyticsDatabase.o)
> 
> “_sqlite3_busy_timeout”，引用自：-[AFLocalyticsDatabase init] in libAviarySDK.a(AFLocalyticsDatabase.o)
> 
> “_sqlite3_exec”，引用自：-[AFLocalyticsDatabase beginTransaction:] in libAviarySDK.a(AFLocalyticsDatabase.o)
> 
> ****和许多其他相同的参考文献****
> 
> ld：未找到架构 i386 的符号 collect2：ld 返回 1 退出状态
> 
> mtouch 以代码 1 退出

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T15:02:27.707

尝试添加`-lsqlite3.0`到您`LinkerFlags`的绑定以指示（本机）链接器加载 SQLite 库（和符号）。

```
[assembly: LinkWith ("your_lib.a", LinkTarget.ArmV7, ForceLoad = true, LinkerFlags="-lsqlite3.0")] 
```

# iphone - iOS 应用路径中的长 ID 是什么？

> ID：10898249
> 
> 赞同：0
> 
> 时间：2012-06-05T13:29:55.537
> 
> 标签：iphone, ios, jailbreak

在我越狱的 iOS 设备上，我可以看到所有 App Store 应用程序都位于以`/private/var/mobile/Applications/`长标识符命名的单独目录中（例如`2075E7C0-D2EF-5A4F-B356-3EECDC9F7B38`）。除了防止同名应用程序之间发生冲突之外，这是否有其他目的？为什么存储的 Cydia 应用程序`/private/var/stash/Applications/`的路径中没有这样的 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:52:29.367

该标识符是在安装时随机生成的，它是沙盒要求之一。

# cuda - 在 CUSP 或 cuSPARSE 中读取 mxArray

> ID：10898255
> 
> 赞同：1
> 
> 时间：2012-06-05T13:30:18.270
> 
> 标签：cuda, device, cusp-library

我正在尝试将 mxArray 从 matlab 读取到我定制的 .cu 文件中。我有两个稀疏矩阵要操作。我如何在尖点稀疏矩阵中读取它们，比如 A 和 B（或在 cuSPARSE 矩阵中），以便我可以执行操作并将它们返回给 matlab。我可以想出的一个想法是将 mxArrays 写入 .mtx 文件，然后从中读取。但同样，还有其他选择吗？

此外，我正在尝试使用其网站上发布的示例来了解各种 CUSP 机制。但是每次我尝试编译和运行示例时，都会出现以下错误。

```
terminate called after throwing an instance of
'thrust::system::detail::bad_alloc'
  what():  N6thrust6system6detail9bad_allocE: CUDA driver version is
insufficient for CUDA runtime version
Abort 
```

这是我正在使用的机器上安装的东西。

```
CUDA   v4.2
Thrust v1.6
Cusp   v0.3 
```

我在我的机器上使用带有 Linux x86_64 的 GTX 480。奇怪的是，设备查询的代码也返回了这个输出。

```
CUDA Device Query...
There are 0 CUDA devices.

Press any key to exit... 
```

我更新了我的驱动程序和 SDK 几天。不知道出了什么问题。

我知道，我在一个问题上问了很多问题，但是我在很长一段时间内都面临着这个问题，升级和降级驱动程序似乎并没有解决。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T19:24:16.163

This error is most revealing, "CUDA driver version is insufficient for CUDA runtime version". You definitely need to update your driver.

I use CUSPARSE/CUSP through Jacket's Sparse Linear Algebra library. It's been good, but I wish there were more sparse features available in CUSPARSE/CUSP. I hear Jacket is going to get CULA Sparse into it soon, so that'll be nice.

# android - 无法显示来自 url 的图像

> ID：10898257
> 
> 赞同：0
> 
> 时间：2012-06-05T13:30:29.260
> 
> 标签：android

我对编程很陌生，我唯一的经验是一些非常轻量级的 C# 和 javascript。

我想制作一个简单的 android 应用程序，它只显示一张图片和一些来自网络的数据，但是我在显示一张图片时遇到了麻烦（还没有尝试过其他任何东西）。我已经在 SO 和网络上搜索了代码示例，但无法让它们工作。

这是我的 AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="my.test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />
    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".TestActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

和我的 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

</LinearLayout> 
```

和我唯一的活动

```
package my.test;

import java.io.InputStream;
import java.net.URL;

import android.app.Activity;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.widget.ImageView;

public class TestActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ImageView imgView =(ImageView)findViewById(R.id.imageView1);
    Drawable drawable = LoadImageFromWebOperations("http://www.androidpeople.com/wp-content/uploads/2010/03/android.png");
    imgView.setImageDrawable(drawable);
    }
    private Drawable LoadImageFromWebOperations(String url)
    {
        try
        {
            InputStream is = (InputStream) new URL(url).getContent();
            Drawable d = Drawable.createFromStream(is, "src name");
            return d;
        }catch (Exception e) {
            System.out.println("Exc="+e);
            return null;
        }
    }

} 
```

我已经尝试过使用 AVD 和我的手机的其他示例，结果相同：空白屏幕。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:38:05.970

```
public Bitmap FetchImage(URL url) {
    try {
        URLConnection conn = url.openConnection();
        conn.connect();
        final BufferedInputStream bis = new BufferedInputStream(conn.getInputStream());
        final Bitmap bm = BitmapFactory.decodeStream(bis);
        bis.close();
        return bm;
    } catch (IOException e) {}
    return null;
} 
```

现在您只需要使用 ImageView 中的 setImageBitmap 方法来显示图像。确保在 AsyncTask 中执行下载部分。

**下面的片段会帮助你**

**下载Helper.java**

```
public interface DownloadHelper
{
    public void OnSucess(Bitmap bitmap);
    public void OnFailure(String response);
} 
```

**MainActivity.java**

```
public class GalleryExample extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);

        DownloadHelper downloadHelper = new DownloadHelper()
        {
            @Override
            public void OnSucess(Bitmap bitmap)
            {
                ImageView imageView=(ImageView)findViewById(R.id.imageView);
                imageView.setImageBitmap(bitmap);
            }

            @Override
            public void OnFailure(String response)
            {
                Toast.makeText(context, response, Toast.LENGTH_LONG).show();
            }
        };
        new MyTask(this,downloadHelper).execute("image url");
    } 
```

**我的任务.java**

```
public class DownloadTask extends AsyncTask<String, Integer, Object>
{
    private Context context;
    private DownloadHelper downloadHelper;
    private ProgressDialog dialog;

    public DownloadTask(Context context,DownloadHelper downloadHelper)
    {
        this.context = context;

    }

    @Override
    protected void onPreExecute()
    {
        dialog = new ProgressDialog(context);
        dialog.setTitle("Please Wait");
        dialog.setMessage("Fetching Data!!");
        dialog.setCancelable(false);
        dialog.show();
        super.onPreExecute();
    }

    @Override
    protected Object doInBackground(String... params)
    {
        URL aURL = new URL(myRemoteImages[position]);
        URLConnection conn = aURL.openConnection();
        conn.connect();
        InputStream is = conn.getInputStream();

        BufferedInputStream bis = new BufferedInputStream(is);
        /* Decode url-data to a bitmap. */
        Bitmap bm = BitmapFactory.decodeStream(bis);
        bis.close();
        is.close();
        return bm;
    }

    @Override
    protected void onPostExecute(Object result)
    {
        dialog.dismiss();
        if (result != null)
        {
            downloadHelper.OnSucess((Bitmap)result);
        } 
        else
        {
            downloadHelper.OnFailure("Error in Downloading Data!!");
        }
        super.onPostExecute(result);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:50:13.903

给予许可

```
 <uses-permission android:name = "android.permission.INTERNET"/> 
```

在您的清单中并检查您的手机是否已连接到网络。你的代码适合我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T13:36:33.660

可以尝试

```
imgView.setImageURI(Uri.parse("http://www.androidpeople.com/wp-content/uploads/2010/03/android.png")); 
```

或者如果你需要 drwaable

[http://www.dreamincode.net/code/snippet4724.htm](http://www.dreamincode.net/code/snippet4724.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T16:15:14.783

在尝试了所有我可以谷歌和想到的东西之后，我决定尝试使用 android 版本 2.1 来编写代码，而不是最新的，你知道这一切都神奇地起作用。我已经成功地尝试了我的问题中的示例以及成功的答案中的一两个示例。感谢所有帮助和SO。

虽然如果有人可以分享为什么在我为 2.1 而不是 4.0.3 构建时看似有效的代码有效的想法，我会很高兴。顺便说一句，在我运行 4.0.3 的手机上进行了测试

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-05T13:33:31.393

像这样使用 WebView 而不是 ImageView：

```
html = "<html><img src=\"" + imageUrl
                        + "\"></html>";
final WebView webView = (WebView) view
                    .findViewById(R.id.yourWebView);
wvImageView.getSettings().setJavaScriptEnabled(true);
wvImageView.loadDataWithBaseURL("", html, "text/html", "utf-8", "");
This should display your image on WebView. If you want to provide zooming facility, try this:

webView.getSettings().setSupportZoom(true);
webView.getSettings().setBuiltInZoomControls(true); 
```

这应该可以解决您的问题:)

# c++ - OpenCV 上的简单 SIFT 检测器 ISSUE

> ID：10898258
> 
> 赞同：2
> 
> 时间：2012-06-05T13:30:34.657
> 
> 标签：c++, opencv, sift

我正在实现这个简单的示例只是为了熟悉 OpenCv 和 SIFT。

```
1  #include <opencv2/core/core.hpp>
2  #include <opencv2/features2d/features2d.hpp>
3  #include <opencv2/highgui/highgui.hpp>
4
5  using namespace std;
6 
7  int main(int argc, char** argv) {
8
9     const cv::Mat input = cv::imread("/tmp/image.jpg", 0); //Load as grayscale
10
11    cv::SiftFeatureDetector detector;
12    std::vector<cv::KeyPoint> keypoints;
13    detector.detect(input, keypoints);
14
15    // Add results to image and save.
16    cv::Mat output;
17    cv::drawKeypoints(input, keypoints, output);
18    cv::imwrite("/tmp/SIFT_RESULT.jpg", output);
19
20    return 0;
21
22 } 
```

我期待它非常简单，但它引发了以下错误：

*   `undefined reference to 'cv::SIFT::CommonParams::CommonParams()'`在第 11 行
*   `undefined reference to 'cv::FeatureDetector::detect(cv::Mat const&, std::vector<cv::KeyPoint, std::allocator<cv::KeyPoint> >&, cv::Mat const&) const'`在第 13 行
*   `undefined reference to 'cv::drawKeypoints(cv::Mat const&, std::vector<cv::KeyPoint, std::allocator<cv::KeyPoint> > const&, cv::Mat&, cv::Scalar_<double> const&, int)'`在第 17 行

你能告诉我出了什么问题吗？这是代码中的问题，还是我遗漏了一些`headers`？

* * *

**完整的构建输出：**

```
make all 
Building file: ../main.cpp
Invoking: GCC C++ Compiler
g++ -I/usr/local/include/opencv -I/usr/include/c++/4.5.2 -O0 -g3 -Wall -c -fmessage-length=0 -std=c++0x -MMD -MP -MF"main.d" -MT"main.d" -o "main.o" "../main.cpp"
Finished building: ../main.cpp

Building target: BioInfo
Invoking: GCC C++ Linker
g++ -L/usr/local/lib -o "BioInfo"  ./imageProcessingClass.o ./main.o   -lopencv_core -lopencv_highgui
./main.o: In function `main':
/.../Debug/../main.cpp:38: undefined reference to `cv::SIFT::CommonParams::CommonParams()'
/.../Debug/../main.cpp:38: undefined reference to `cv::SIFT::DetectorParams::DetectorParams()'
/.../Debug/../main.cpp:38: undefined reference to `cv::SiftFeatureDetector::SiftFeatureDetector(cv::SIFT::DetectorParams const&, cv::SIFT::CommonParams const&)'
/.../Debug/../main.cpp:40: undefined reference to `cv::FeatureDetector::detect(cv::Mat const&, std::vector<cv::KeyPoint, std::allocator<cv::KeyPoint> >&, cv::Mat const&) const'
/.../Debug/../main.cpp:44: undefined reference to `cv::drawKeypoints(cv::Mat const&, std::vector<cv::KeyPoint, std::allocator<cv::KeyPoint> > const&, cv::Mat&, cv::Scalar_<double> const&, int)'
./main.o: In function `~SiftFeatureDetector':
/usr/local/include/opencv2/features2d/features2d.hpp:1502: undefined reference to `vtable for cv::SiftFeatureDetector'
/usr/local/include/opencv2/features2d/features2d.hpp:1502: undefined reference to `cv::FeatureDetector::~FeatureDetector()'
collect2: ld returned 1 exit status
make: *** [BioInfo] Error 1

Build Finished 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T13:57:51.140

您似乎忘记了与 OpenCV 库的链接。还请记住，如果您要链接到 OpenCV 2.4，则需要为 SIFT 链接一个名为 opencv_nonfree 的“非自由”算法的新库。

# facebook - 在 OAuth 2.0 DNOA 版本中何时调用“TokenManager.StoreNewRequestToken”

> ID：10898262
> 
> 赞同：1
> 
> 时间：2012-06-05T13:30:57.387
> 
> 标签：facebook, dotnetopenauth, facebook-access-token

关键是，我有一个应用程序（我觉得有一半人已经知道这一点）从 Twitter（OAuth 1.0a）和 Facebook（OAuth 2.0 'ish）读取信息。

在 Twitter 版本中，我使用旧的 WebConsumer 类。它有一个 PrepareRequestUserAuthentication 函数，该函数还调用存储令牌的 ITokenManager.StoreNewRequestToken 函数。

我的问题是这在 WebserverClient 中是如何工作的，它的功能看起来都很相似，但似乎并没有以相同的方式运行。

```
 if (Application is FacebookApplication)
        {  // We need WebServerClient instead of WebConsumer so we can use OAuth 2.0
            client = new FacebookClient(this)
            {
                ClientIdentifier = Application.ConsumerKey,
                ClientSecret = Application.ConsumerSecret,
            };
            IAuthorizationState authorization = client.ProcessUserAuthorization();
            if (authorization == null)
            {
                client.RequestUserAuthorization(null, null, callback);
            }
        }
        else
        {   // Here we do need WebConsumer
            WebConsumer consumer = Application.GetConsumer(this) as WebConsumer;
            UserAuthorizationRequest authorizationRequest = consumer.PrepareRequestUserAuthorization(callback, requestParameters, redirectParameters);
            consumer.Channel.Send(authorizationRequest);
        } 
```

目前我有一个 FacebookApplication 类和一个 TwitterApplication 类。两者都继承自 OAuthWebApplication ，其中包含具有 GetConsumer(IConsumerTokenManager tm) 函数以返回 OAuth 1.0 进程的 WebConsumer。我认为我还需要`WebServerClient`为 OAuth 2.0 流程添加 OAuth 2.0 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:38:12.530

从来没有，因为 DotNetOpenAuth 中的 OAuth 2 客户端类甚至不使用令牌管理器。

OAuth 1 需要令牌管理器，因为客户端必须跟踪请求访问和接收访问的中间状态。但在 OAuth 2 中，客户端更简单，因为没有要存储的请求令牌——只有最终的访问令牌。

# python - 不能腌制 : 属性查找 __builtin__.function 失败

> ID：10898268
> 
> 赞同：14
> 
> 时间：2012-06-05T13:31:11.253
> 
> 标签：python, django, pickle

我在我的 Django 应用程序中收到了这个错误，但是，它每天只发生一次或更少，并且证明非常难以调试。

```
Environment:

Request Method: POST

Django Version: 1.3.1
Python Version: 2.6.6
Installed Applications:
['django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'fimedlabs',
 'data',
 'djcelery']
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'fimedlabs.auth.userMiddleWare')

Traceback:
File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/base.py" in get_response
  178\.                 response = middleware_method(request, response)
File "/usr/local/lib/python2.6/dist-packages/django/contrib/sessions/middleware.py" in process_response
  36\.                 request.session.save()
File "/usr/local/lib/python2.6/dist-packages/django/contrib/sessions/backends/db.py" in save
  57\.             session_data = self.encode(self._get_session(no_load=must_create)),
File "/usr/local/lib/python2.6/dist-packages/django/contrib/sessions/backends/base.py" in encode
  93\.         pickled = pickle.dumps(session_dict, pickle.HIGHEST_PROTOCOL)

Exception Type: PicklingError at /
Exception Value: Can't pickle <type 'function'>: attribute lookup __builtin__.function failed 
```

我已经尝试过这个问题的答案：

[如何判断哪个对象属性泡菜失败？](https://stackoverflow.com/questions/569754/how-to-tell-for-which-object-attribute-pickle-fails)

通过将 self 添加到实际错误中，以查看是否会在 Django 错误中打印任何内容，但无济于事。

我在哪里可以打印出导致此错误问题的对象，以便它出现在 Django 错误页面中？

谢谢！〜马特

编辑：我存储在缓存中的唯一对象是带有代码的用户对象：

```
class user(object):
username = str()
userid = uuid.UUID(int=0)

client = models.Client()
clientid = uuid.UUID(int=0)
clientname = ''

data = models.User()
accesslevel = models.AccessLevel()

active = False
client_active = False
isFimed = False
isFimedAdmin = False
isClientAdmin = False
isFimedManager = False
mysettingsform = None
viewingas = False

menu = []

_exists = False
_authenticated = False

def __str__(self):
    return str(self.__dict__.copy())

def __getstate__(self):
    return self.__dict__.copy()

def __setstate__(self, dict):
    self.__dict__ = dict

def __init__(self, username=None):
    if username:
        self.initialize(username)

def initialize(self, username):
    self.username = username
    model = models.User.objects.filter(username=username).all()
    if len(model) == 1:
        model = model[0]
        self.data = model
        self._exists = True
        self.userid = self.data.id
        self.active = self.data.active
        self.isFimed = self.data.isFimed()
        self.isFimedAdmin = self.data.isFimedAdmin()
        self.isClientAdmin = self.data.isClientAdmin()
        self.isFimedManager = self.data.isFimedManager()
        self.mysettingsform = UserFormSelf(initial={"id":model.id, "username":model.username, "name":model.name, "email":model.email, "phone":model.phone})

        self.accesslevel = models.AccessLevel.objects.filter(id=self.data.accesslevel_id)[:1][0].level
        cli = self.data.client
        self.client = cli
        self.clientid = cli.id
        self.clientname = cli.name
        if cli.active:
            self.client_active = True

        model.lastlogin = datetime.datetime.now()
        model.save()

        self.menu = getMenu(self.data)
    else:
        self._exists = False

def authenticate(self, password):
    self._authenticated = False
    if (self.active == False or self.client_active == False):
        return False
    if self._exists:
        import hashlib
        hash = hashlib.md5('%s%s' % (str(password), self.data.pwsalt)).hexdigest()
        if hash == self.data.pwhash:
            self._authenticated = True
            return True
    return False

def updateUser(self):
    self.initialize(models.User.objects.filter(id=self.userid).get().username)

def mkContext(self):
    c = Context()
    c['menu'] = self.menu
    c['user'] = self
    c['language'] = language
    c['colors'] = colors
    c["isFimed"] = self.isFimed
    c["isFimedAdmin"] = self.isFimedAdmin
    c["isClientAdmin"] = self.isClientAdmin
    c["isFimedManager"] = self.isFimedManager
    c["mysettingsform"] = self.mysettingsform
    return c 
```

编辑： Werkzeug 之后的 WSGI 文件：

```
import django.core.handlers.wsgi
djangoapplication = django.core.handlers.wsgi.WSGIHandler()
def application(environ, start_response):
    if 'SCRIPT_NAME' in environ:
        del environ['SCRIPT_NAME']
    return djangoapplication(environ, start_response)
# The following lines enable the werkzeug debugger
import django.views.debug
def null_technical_500_response(request, exc_type, exc_value, tb):
    raise exc_type, exc_value, tb
django.views.debug.technical_500_response = null_technical_500_response
from werkzeug.debug import DebuggedApplication
application = DebuggedApplication(application, evalex=True) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-21T19:43:49.687

In my case (not Django related) this exception was thrown by `multiprocessing.Pool.map` when a lambda was passed as the target function. Creating a named function and passing the needed context data structures via the `initargs` parameter (rather than via the closure) solved the issue.

To summarize, the *bad* use-case that triggered the exception was:

```
import multiprocessing as mp
context = some_object
pool = mp.Pool()
worker_func = lambda x: work(x, context)
results = pool.map(worker_func, data_list) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T12:54:41.937

> 我在哪里可以打印出导致此错误问题的对象，以便它出现在 Django 错误页面中？

简短的回答 - 没有重新编译`cPickle`，你不能。

更长的答案：这是引发异常的一段代码：

```
root $ grep -Hra "attribute lookup" /usr/lib64/ 2>/dev/null | grep -a failed
/usr/lib64/python2.7/lib-dynload/cPickle.so:H�H���P0H�5zM H�=1��M��H��H�ZM �����H�=�1�H���M��H��H��M �����H�4M H�5~H���H���������H�M H�5tH���H���������H��L H�5�H���qH�����d���H�M H�5NH���SH�����F���H�dM H�5bH���5H�����(���H�=X1��O��H�HC H�5I H�=U1�A��H��L �vH��H��I�������H���RK��H�=.H����J��H�5$H��H��H�D$�G��H�D$H��tH�H��H��H��gH�DL�ttH�qH�5nH�=kH��1��XK��H�5bH��H��I����F��H�5\L��H���F��H��tH�EH��H��H�E��M�������I�$H��H��I�$�t���I�DL���P0�d���f�H�EH��H��H�E�F���H�H���P0�7���@H�|$H��P0�����H�H���P0�����H�H���P0�k�����UH��SH�H�H: H���tH�;: H���H�H���u�H�[�Ð�H��M��H��attribute deletion is not supportedunsupported pickle protocol: %dargument must have 'read' and 'readline' attributespickle protocol %d asked for; the highest available protocol is %dargument must have 'write' attributeGlobal and instance pickles are not supported.Attempt to getvalue() a non-list-based picklerUnexpected data in internal listBINSTRING pickle has negative byte countno int where int expected in memoCan't pickle %s: import of module %s failedCan't pickle %s: attribute lookup %s.%s failedCan't pickle %s: it's not the same object as %s.%sCan't pickle %s: extension code %s isn't an integerCan't pickle %s: extension code %ld is out of rangecould not convert string to intLONG pickle has negative byte countcould not convert string to floatBINUNICODE pickle has negative byte countunregistered extension code %ld_inverted_registry[%ld] isn't a 2-tuple of stringsA load persistent id instruction was encountered, 
```

如果你看的足够近，有一块说

```
Can't pickle %s: attribute lookup %s.%s failed 
```

`static int save_global(Picklerobject *self, PyObject *args, PyObject *name)`现在，如果你下载 Python 源代码，你可以很容易地在以下函数中找到负责引发异常的代码`./Modules/cPickle.c`：

```
klass = PyObject_GetAttrString(mod, name_str);
if (klass == NULL) {
    cPickle_ErrFormat(PicklingError,
                      "Can't pickle %s: attribute lookup %s.%s "
                      "failed",
                      "OSS", args, module, global_name);
    goto finally;
} 
```

因此，调试此错误的最佳方法是对字符串进行不同的格式化（可能提供`PyString_AS_STRING((PyStringObject *)name)`、重新编译和安装修改后的 Python.

是的，我知道这太糟糕了。我自己也遇到了同样的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T07:59:22.480

如果您正在存储用户对象，您可能会受到此错误的影响： [https ://code.djangoproject.com/ticket/16563](https://code.djangoproject.com/ticket/16563)

也就是说，您最好的选择是在 /usr/local/lib/python2.6/dist-packages/django/contrib/sessions/backends/base.py 的第 93 行修改 Django 源代码，其中您的异常发生。

只需记录 session_dict。在大多数情况下，很明显哪里出了问题。（确实，如果您的回溯显示 Local Vars，那么您已经有了这个）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T17:57:04.700

使用类似`django-extensions`安装 werkzeug 调试器的东西。您将能够与每个堆栈帧进行交互。此时，您可以尝试腌制会话字典中的所有键和值。

# gwt - 什么是判断用户在浏览时是否停留在同一个域中的有效方法（使用 Firefox 扩展程序）？

> ID：10898272
> 
> 赞同：0
> 
> 时间：2012-06-05T13:31:33.040
> 
> 标签：gwt, firefox-addon

在浏览网站时，比如 www.example.com，用户可能会输入一些子域，比如 www.sub.example.com

但基本网络域保持不变。

在我的 Firefox 扩展中，我需要开发一个*“会话”* ，它会保持活动状态，直到用户保持在同一个域上。

一个简单的解决方案是首先从 url 中提取域。然后用“.”分割字符串 作为令牌。因此，我们得到了第二种情况的 sub 和 example 以及第二种情况的 example。然后我可以比较两者。如果任何一个相等，我推断域是相同的。

尽管这可能有效，但这似乎更像是一种黑客行为，并且可能容易出现误报/误报。

是否有针对同一问题的更有效/更清洁的解决方案？

**信息**：我正在使用 GWT 构建扩展

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T18:47:27.363

您应该使用[nsIEffectiveTLDService](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIEffectiveTLDService)，它会`sub.example.co.uk`正确处理类似的事情。您可以将`nsIURI`实例传递给`nsIEffectiveTLDService.getBaseDomain()`，`aAdditionalParts`参数应为零。因为`http://sub.example.co.uk/foo`你会`example.co.uk`回来 - 实际的“域”部分。然后，您可以简单地比较两个 URL 的域名。

# google-maps - 谷歌地图 v3 ImageMapType 防止包装

> ID：10898279
> 
> 赞同：3
> 
> 时间：2012-06-05T13:32:00.493
> 
> 标签：google-maps, scroll

我正在尝试复制在以下位置看到的行为：

[http://forevermore.net/articles/photo-zoom/](http://forevermore.net/articles/photo-zoom/)

它允许平移和缩放照片，但它将平移限制在照片的范围内。

上面的示例使用 google maps v2 代码。

看来我必须执行以下操作：

```
google.maps.event.addListener(map, 'dragend', function() 
{
    //Get bounds and not allow dragging

}); 
```

（如此处所示：[如何限制 Google maps API V3 中的平移？](https://stackoverflow.com/questions/3125065/how-do-i-limit-panning-in-google-maps-api-v3)）

我的问题是：

*   将被平移/缩放的图像大小是动态的，我想要一个通用的解决方案（如果可能的话）

如果不可能有一个通用的解决方案，我如何确定图像的正确 LatLon 边界？

这是我到目前为止所拥有的：

```
var customTypeOptions = {
  getTileUrl: function(coord, zoom) {
        return "img/earth_tiles/tile-" + zoom + "-" + coord.x + "-" + coord.y + ".jpg";
  },
  tileSize: new google.maps.Size(256, 256),
  maxZoom: 6,
  minZoom: 0,
  name: "Custom Map Type"
};

var customMapType = new google.maps.ImageMapType(customTypeOptions);

jQuery(document).ready(function(){
  var myLatlng = new google.maps.LatLng(0, 0);
  var myOptions = {
    center: myLatlng,
    zoom: 3,
     disableDefaultUI: true,
     zoomControl: true
  };

  var map = new google.maps.Map(document.getElementById("map"), myOptions);
    map.mapTypes.set('custom', customMapType);
    map.setMapTypeId('custom');
}); 
```

它工作正常，它只允许用户在照片之外滚动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T03:38:41.673

老实说，我不认为使用谷歌地图真的是正确的方法。是的，您可能可以破解它来工作，但这并不是图书馆的真正目的。（关于使用锤子将圆形螺钉装入三角形孔的事情。）

此外，您还要遵守 Google 的[限制性条款](https://developers.google.com/maps/terms#section_9_1)（您的网站**必须**是公开的）和他们的新[定价](https://developers.google.com/maps/faq#usage_pricing)，这意味着每天超过[25,000](https://developers.google.com/maps/faq#usagelimits)次浏览量将花费您 — 而且*您甚至没有使用地图*。

相反，为什么不使用为非常大的图像平铺缩放而设计的库呢？ [PanoJS3](http://www.dimin.net/software/panojs/)似乎符合要求。

> PanoJS3 - 一个交互式 JavaScript 小部件，用于平移和缩放从较小图块动态拼接在一起的全景图像。此小部件可用于查看比浏览器视口中的可用空间大得多的图像。示例包括全景图、地图或高分辨率文档扫描。
> 
> PanoJS3 支持大多数流行平台上的原生导航：
> 
> *   PC（使用鼠标滚动缩放，与谷歌地图相同）
> *   Mac（使用鼠标滚动或触摸面板进行 2D 平移）
> *   带有触摸界面的移动设备：iOS 和 Android（支持捏合缩放和平移手势）
> *   手机和平板电脑（根据屏幕尺寸缩放控件）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T02:11:28.010

我被 JSFiddle 删除我的演示烧伤了，所以我重新设计了解决方案，并在下面发布了带有 SO 内置预览的演示。但是 JSFiddle 可以说编辑起来更方便，所以我也在那里添加了代码。[JSFiddle 中的演示](https://jsfiddle.net/utm3pnow/)

原始解决方案将图像的坐标分配为 +/-50 度，但我无法重现这种行为。这个新代码使用 +/-85 度。纬度和 +/-180 经度，默认墨卡托投影。

我还没有彻底测试过新的解决方案，所以请谨慎使用。我发现一个特别讨厌的错误是使用`setCenter()`边界检查导致堆栈溢出。通过将其替换为`panTo()`. 我的主要观察是：

1.  首先，解决方案是hacky。随着纬度的增加，它在屏幕上占据的空间也会增加。我所做的是在移动地图时重新计算地图边界限制之间的像素中点，而不是使用几何转换。为了使这个 hack 工作，可接受的边界由地图的 div 的高度决定。

2.  另一方面，经度表现正常。经度的诀窍在于它会重复，因此出现在此限制处的标记和其他项目将被复制。我认为解决这个问题的方法是将经度坐标转换为远离该边界（如在将经度转换为 +/- 50 度的原始解决方案中）。不幸的是，我现在无法重现这种坐标变换。

```
"use strict";

// observations
//
// map does wrap around at longitudes +/-180; however, tile display can be
// manipulated to only show up once.
//
// markers placed around longiudes +/-180 will show up twice. Not sure how to
// prevent this.

var divHeight = document.getElementById("map-canvas").clientHeight;

var TILE_SIZE = 256;

var map;
var allowedBounds;

var bounds;
var sw;
var ne;
var width;
var height;

// https://developers.google.com/maps/documentation/javascript/examples/map-coordinates

function degreesToRadians(deg) {
  return deg * (Math.PI / 180);
}

function radiansToDegrees(rad) {
  return rad / (Math.PI / 180);
}

function bound(value, opt_min, opt_max) {
  if (opt_min != null) value = Math.max(value, opt_min);
  if (opt_max != null) value = Math.min(value, opt_max);
  return value;
}

function fromLatLngToPoint(latLng, map) {
  var point = new google.maps.Point(0, 0);
  var origin = new google.maps.Point(TILE_SIZE/2, TILE_SIZE/2);

  var pixelsPerLonDegree_ = TILE_SIZE / 360;
  var pixelsPerLonRadian_ = TILE_SIZE / (2 * Math.PI);

  point.x = origin.x + latLng.lng() * pixelsPerLonDegree_;

  // Truncating to 0.9999 effectively limits latitude to 89.189\. This is
  // about a third of a tile past the edge of the world tile.
  var siny = bound(Math.sin(degreesToRadians(latLng.lat())), -0.9999,
                   0.9999);
  point.y = origin.y + 0.5 * Math.log((1 + siny) / (1 - siny)) *
    -pixelsPerLonRadian_;
  return point;
}

function fromPointToLatLng(point) {
  // value from 0 to 256
  var pixelOrigin_ = new google.maps.Point(TILE_SIZE / 2,
                                           TILE_SIZE / 2);
  var origin = new google.maps.Point(TILE_SIZE/2, TILE_SIZE/2);

  var pixelsPerLonDegree_ = TILE_SIZE / 360;
  var pixelsPerLonRadian_ = TILE_SIZE / (2 * Math.PI);

  var origin = pixelOrigin_;
  var lng = (point.x - origin.x) / pixelsPerLonDegree_;
  var latRadians = (point.y - origin.y) / -pixelsPerLonRadian_;
  var lat = radiansToDegrees(2 * Math.atan(Math.exp(latRadians)) -
                             Math.PI / 2);
  return new google.maps.LatLng(lat, lng);
};

function midpointLat() {
  var tileFactor = 1 << map.getZoom();
  var midpointFromTop = divHeight / tileFactor / 2;
  return fromPointToLatLng(new google.maps.Point(0, midpointFromTop)).lat();
}

function addMarker(lat, lng) {
  new google.maps.Marker({
    position: new google.maps.LatLng(lat, lng),
  }).setMap(map);
}

function addIcon(lat, lng, url) {
  new google.maps.Marker({
    position: new google.maps.LatLng(lat, lng),
    icon: url,
  }).setMap(map);
}

function updateEdge() {
  bounds = map.getBounds();

  sw = bounds.getSouthWest();
  ne = bounds.getNorthEast();

  var swLng = sw.lng();
  var swLat = sw.lat();

  var neLng = ne.lng();
  var neLat = ne.lat();

  if (swLng > neLng) {
    swLng -= 360;
  } 
  width = neLng - swLng;

  var left = Math.min(-180+(width/2),-0.000001);
  var right = Math.max(180-(width/2),0.000001);

  var divCenterLat = fromPointToLatLng(new google.maps.Point(0, divHeight)).lat();
  var currentZoom = map.getZoom();

  var top = midpointLat();
  var bottom = -midpointLat();

  allowedBounds = new google.maps.LatLngBounds(
    new google.maps.LatLng(bottom,left),
    new google.maps.LatLng(top,right));

}

function boxIn() {
  if (allowedBounds.contains(map.getCenter())) {
    return;
  } else {
    var mapCenter = map.getCenter();
    var X = mapCenter.lng();
    var Y = mapCenter.lat();

    var AmaxX = allowedBounds.getNorthEast().lng();
    var AmaxY = allowedBounds.getNorthEast().lat();
    var AminX = allowedBounds.getSouthWest().lng();
    var AminY = allowedBounds.getSouthWest().lat();

    if (X < AminX) {
      X = AminX;
    }
    if (X > AmaxX) {
      X = AmaxX;
    }
    if (Y < AminY) {
      Y = AminY;
    }
    if (Y > AmaxY) {
      Y = AmaxY;
    }

    map.panTo(new google.maps.LatLng(Y, X));
  }
}

var moonTypeOptions = {
  getTileUrl: function(coord, zoom) {
    var normalizedCoord = getNormalizedCoord(coord, zoom);
    if (!normalizedCoord) {
      return null;
    }
    var bound = Math.pow(2, zoom);
    return 'http://mw1.google.com/mw-planetary/lunar/lunarmaps_v1/clem_bw' +

    '/' + zoom + '/' + normalizedCoord.x + '/' +  
      (bound - normalizedCoord.y - 1) + '.jpg';
  },
  tileSize: new google.maps.Size(256, 256),
  maxZoom: 9,
  minZoom: 0,
  radius: 100,
  name: 'Moon'
};

var moonMapType = new google.maps.ImageMapType(moonTypeOptions);

// Normalizes the coords that tiles repeat across the x axis (horizontally)
// like the standard Google map tiles.
function getNormalizedCoord(coord, zoom) {
  var y = coord.y;
  var x = coord.x;

  // tile range in one direction range is dependent on zoom level
  // 0 = 1 tile, 1 = 2 tiles, 2 = 4 tiles, 3 = 8 tiles, etc
  var tileRange = 1 << zoom;

  // don't repeat across y-axis (vertically)
  if (y < 0 || y >= tileRange) {
    return null;
  }

  if (x < 0 || x >= tileRange) {
    // ORIGINAL LINE to repeat across x-axis
    // x = (x % tileRange + tileRange) % tileRange;

    // in reality, do not want repeated tiles
    return null;
  }

  return {
    x: x,
    y: y
  };
}

function initialize() {
  var myLatlng = new google.maps.LatLng(0, 0);
  var mapOptions = {
    center: myLatlng,
    zoom: 1,
    // streetViewControl: false,
    disableDefaultUI: true,
  };

  map = new google.maps.Map(document.getElementById('map-canvas'),
                            mapOptions);
  map.mapTypes.set('moon', moonMapType);
  map.setMapTypeId('moon');

  google.maps.event.addListener(map, 'tilesloaded', function() {
    updateEdge();
  });

  google.maps.event.addListener(map, 'zoom_changed', function() {
    updateEdge();
    boxIn();
  });

  google.maps.event.addListener(map, 'center_changed', function() {
    boxIn();
  });

  google.maps.event.addListener(map, 'click', function(e) {
    console.log("map clicked at: " + e.latLng.lat() + "," + e.latLng.lng());
  });

  updateEdge();

  addIcon(0, 0, "http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=O|00FF00|000000");

  addIcon(85.1, 179, "http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=TR|00FF00|000000");

  addIcon(-85.1, -179, "http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=BL|00FF00|000000");

  addIcon(20.1, 9, "http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=2|00FF00|000000");
  addIcon(40.1, 9, "http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=4|00FF00|000000");
  addIcon(60.1, 9, "http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=6|00FF00|000000");
  addIcon(80.1, 9, "http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=8|00FF00|000000");
  addIcon(85.1, 9, "http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=8|00FF00|000000");
  addIcon(-85.1, 9, "http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=8|00FF00|000000");

  addIcon(60.1, -179, "http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=Y|00FF00|000000");
}

google.maps.event.addDomListener(window, 'load', initialize);
```

```
<!DOCTYPE html>
<html>
  <head>
    <title>Image map types</title>
    <style>
      html, body, #map-canvas {
      height: 450px;
      width: 450px;
        margin: 0px;
        padding: 0px;
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
  </head>
  <body>
    <div id="map-canvas"></div>

    <script src="moon.js"></script>
  </body>
</html>
```

2012 年原始解决方案：

我结合了forevermore坐标系和[月球表面](https://google-developers.appspot.com/maps/documentation/javascript/examples/maptype-image)[文档的](https://developers.google.com/maps/documentation/javascript/maptypes#ImageMapTypes)ImageMapTypes示例

最初，演示从缩放 0 开始，以了解整个图像。放大后，平移将被限制为一个长宽比由 (W)idth 和 (H)eight 文本框定义的矩形。对于这个演示，只有这个比例`W/H`，或`H/W`很重要。

我假设您的图像将与上述两个相似，适合 256x256 瓷砖，并且图像周围有一个“黑色边框”。此外，图像在较长维度上一直延伸到瓷砖的边缘。如果不是（但至少图像居中），可视区域可以在`latbound`和`lngbound`变量中修改，对应`(-50,50) x (-50,50)`于forevermore中定义的坐标网格。

在演示中，当放大且 W > H 时，纵横比水平较长：月球表面的整个宽度围绕中心可见，顶部/底部水平条将被遮挡。也就是说，整幅图像顶部和底部的暗坑在放大到 0 以上时将无法到达。用黑色边框可视化实际图像，一些“黑色区域”可能仍会在放大 1 时显示，其面积减小随着缩放级别的增加。

当放大且 H > W 时，可达区域垂直延伸。可以到达整个表面中心正上方和下方的黑暗陨石坑，但不能到达左/右区域。`updateEdge`在这个演示中，通过读取文本框来改变纵横比；点击设置电话`updateEdge`。

代码中的大部分工作是防止移动到所需的显示区域之外。在我测试时，forevermore 方法和“我如何限制平移”都跳动或导致错误，所以我想出了一个修改版本的[范围限制](http://econym.org.uk/gmap/range.htm)，它通过测量屏幕宽度和高度来考虑当前缩放级别：

```
 function updateEdge() {
    imageWidth = parseInt(document.getElementById("imgWidth").value);
    imageHeight = parseInt(document.getElementById("imgHeight").value);
    if(imageWidth > imageHeight) {
      widthPercent = 100;
      heightPercent = imageHeight / imageWidth * 100;
    }
    else {
      heightPercent = 100;
      widthPercent = imageWidth / imageHeight * 100;
    }

    latbound = heightPercent/2.0;
    lngbound = widthPercent/2.0;

    var bounds = map.getBounds();
    var sw = bounds.getSouthWest();
    var ne = bounds.getNorthEast();
    var width = ne.lng() - sw.lng();
    var height = ne.lat() - sw.lat();

    var bottom = Math.min(-latbound+(height/2),-0.000001);
    var left = Math.min(-lngbound+(width/2),-0.000001);
    var top = Math.max(latbound-(height/2),0.000001);
    var right = Math.max(lngbound-(width/2),0.000001);

    allowedBounds = new google.maps.LatLngBounds(
      new google.maps.LatLng(bottom,left),
      new google.maps.LatLng(top,right));
  }

google.maps.event.addListener(map, 'tilesloaded', function() {
    updateEdge();
});
google.maps.event.addListener(map, 'zoom_changed', function() {
    updateEdge();
    boxIn();
});

google.maps.event.addListener(map, 'center_changed', function() {
    boxIn();
});

function boxIn() {
    if (allowedBounds.contains(map.getCenter())) {
        return;
    }
    else {
        var mapCenter = map.getCenter();
        var X = mapCenter.lng();
        var Y = mapCenter.lat();

        var AmaxX = allowedBounds.getNorthEast().lng();
        var AmaxY = allowedBounds.getNorthEast().lat();
        var AminX = allowedBounds.getSouthWest().lng();
        var AminY = allowedBounds.getSouthWest().lat();

        if (X < AminX) {
            X = AminX;
        }
        if (X > AmaxX) {
            X = AmaxX;
        }
        if (Y < AminY) {
            Y = AminY;
        }
        if (Y > AmaxY) {
            Y = AmaxY;
        }

        map.setCenter(new google.maps.LatLng(Y, X));
    }
} 
```

投影和瓦片获取代码与其源代码没有显着变化。

# c++ - foo2.cpp:9: 错误: '(' 标记之前的预期主表达式

> ID：10898287
> 
> 赞同：1
> 
> 时间：2012-06-05T13:32:12.113
> 
> 标签：c++

这个文件有什么错误？我得到：

```
foo2.cpp:9: 错误: '(' 标记之前的预期主表达式
foo2.cpp:9：错误：“int”之前的预期主表达式
foo2.cpp:9: 错误: 预期 ';' '{' 标记之前

```

```
int main(void)
{
  class X {
    int i;
  public:
    X(int ii = 0);
  };

  X::X(int ii) { i = ii; }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T13:33:53.523

首先，我可以问一下，**为什么**？

其次，您不能在方法内提供实现（包括`main`）。如果必须这样做，请保持实现内联：

```
int main()
{
  class X {
    int i;
  public:
    X(int ii = 0){ i = ii; }
  };
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:46:05.680

您不能在 C++ 中嵌套函数。要修改您的程序，您有两种选择。您可以将您的类定义移到 之外`main`，或者您可以将您的方法定义放在类中：

第一种选择：

```
class X {
  int i;
public:
  X(int ii = 0);
};

X::X(int ii) { i = ii; }

int main(void)
{
  return 0;
} 
```

第二种选择：

```
int main(void)
{
  class X {
    int i;
  public:
    X(int ii = 0) { i = ii; }
  };

  return 0;
} 
```

# node.js - 两个 websocket 覆盖会话值

> ID：10898296
> 
> 赞同：0
> 
> 时间：2012-06-05T13:32:29.820
> 
> 标签：node.js, socket.io, express

我制作了两个监听端口 1234 和 5678 的 Web 应用程序。（我使用的是 Express js）

我在登录时存储了一些会话值。假设我在第一个应用程序（端口 1234）上登录时在会话中存储了一些字符串（如：“person1”），然后在第二个应用程序（在端口 5678）上登录时，我在会话中存储了一些字符串（如：“person2”）。当person2当时登录第二个应用程序时，它会破坏第一个应用程序的会话（！！？）然后如果我刷新页面，它会由于会话破坏而注销。

服务器端连接（第一个侦听端口 1234 的应用程序）

```
var express = require('express'),
    sio = require('socket.io');

app = express.createServer();

app.configure('development', function(){
app.use(express.bodyParser());
app.use(express.cookieParser());
app.use(express.session({secret: "hello1"}));
    app.use(express.static(__dirname + '/'));
    app.set('views', __dirname + '/views');
    app.use(express.errorHandler({dumpExceptions: true, showStack: true}));
    app.use(app.router);
});

app.listen(1234);
app.get('/login', function (req, res) {
    req.session.uName = req.body.uName;
    .
    .
    .
    .
    .
});
var io = sio.listen(app); 
```

服务器端连接（侦听端口 5678 的第二个应用程序）

```
app.get('/login', function (req, res) {
    req.session.uName = req.body.uName;
    .
    .
    .
    .
    .
});
app.listen(5678);
var io = sio.listen(app); 
```

==================================================== ========================

客户端连接（第一个应用程序 [1234]）

```
<script type="text/javascript" src="/socket.io/socket.io.js" ></script>
<script>
      var socket = io.connect("http://"+mylocalip+":1234");
</script> 
```

客户端连接（第二个应用程序 [5678]）

```
<script type="text/javascript" src="/socket.io/socket.io.js" ></script>
<script>
      var socket = io.connect("http://"+mylocalip+":5678");
</script> 
```

请帮我 ...

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T05:24:20.767

您的两个应用程序都使用 Express（以及 Connect）的 MemoryStore 来存储会话数据。每个应用程序都创建自己的 MemoryStore 对象，因此都不知道对方的会话数据。

要么使用其他一些会话存储方法（例如 redis），要么定义您自己的存储方法（参见[Connect 的文档](http://www.senchalabs.org/connect/session.html)）以使用两个应用程序之间共享的对象（假设它们都是同一个 node.js 进程的一部分）。

# c - Kiss_fftr 的 KissFFT 输出

> ID：10898307
> 
> 赞同：1
> 
> 时间：2012-06-05T13:33:01.277
> 
> 标签：c, audio, filter, fft, kissfft

我正在通过包含 320 个样本的数据包中的套接字连接接收 PCM 数据。声音的采样率为每秒 8000 个样本。我正在做这样的事情：

```
int size = 160 * 2;//160;
int isinverse = 1;
kiss_fft_scalar zero;
memset(&zero,0,sizeof(zero));
kiss_fft_cpx fft_in[size];
kiss_fft_cpx fft_out[size];
kiss_fft_cpx fft_reconstructed[size];

kiss_fftr_cfg fft = kiss_fftr_alloc(size*2 ,0 ,0,0);
kiss_fftr_cfg ifft = kiss_fftr_alloc(size*2,isinverse,0,0);

for (int i = 0; i < size; i++) {
    fft_in[i].r = zero;
    fft_in[i].i = zero;
    fft_out[i].r = zero;
    fft_out[i].i = zero;
    fft_reconstructed[i].r = zero;
    fft_reconstructed[i].i = zero;
}

// got my data through socket connection

for (int i = 0; i < size; i++) {
     // samples are type of short
     fft_in[i].r = samples[i];
     fft_in[i].i = zero;
     fft_out[i].r = zero;
     fft_out[i].i = zero;
 }

 kiss_fftr(fft, (kiss_fft_scalar*) fft_in, fft_out);
 kiss_fftri(ifft, fft_out, (kiss_fft_scalar*)fft_reconstructed);

 // lets normalize samples
 for (int i = 0; i < size; i++) {
     short* samples = (short*) bufTmp1;
     samples[i] = rint(fft_reconstructed[i].r/(size*2));
 } 
```

之后我填充 OpenAL 缓冲区并播放它们。一切正常，但我想对 和 之间的音频进行一些`kiss_fftr`过滤`kiss_fftri`。我认为的起点是将声音从时域转换为频域，但我真的不明白我从`kiss_fftr`函数接收到什么样的数据。每个复数中存储了哪些信息，它的实部和虚部可以告诉我有关频率的信息。而且我不知道哪些频率被覆盖（什么频率跨度）`fft_out`- 哪些索引对应于哪些频率。

我是信号处理和傅里叶变换主题的新手。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-27T09:25:04.447

I will try to answer your questions directly.

```
// a) the real and imaginary components of the output need to be combined to calculate the amplitude at each frequency. 

float ar,ai,scaling; 

scaling=1.0/(float)size;

// then for each output [i] from the FFT...

ar = fft_out[i].r; 
ai = fft_out[i].i; 
amplitude[i] = 2.0 * sqrtf( ar*ar + ai*ai ) * scaling ;

// b) which index refers to which frequency? This can be calculated as follows. Only the first half of the FFT results are needed (assuming your 8KHz sampling rate) 

for(i=1;i<(size/2);i++) freq = (float)i / (1/8000) / (float)size ; 

// c)  phase (range +/- PI) for each frequency is calculated like this: 

phase[i] = phase = atan2(fft_out[i].i / fft_out[i].r); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T12:47:03.660

在双脚进入 C 实现之前，请熟悉数字滤波器，尤其是[FIR 滤波器](http://en.wikipedia.org/wiki/Finite_impulse_response)。

您可以使用诸如[GNU Octave 的](http://www.gnu.org/software/octave)信号工具箱之类的东西来设计 FIR 滤波器。查看命令 fir1（最简单的）、firls 或 remez。或者，您可以通过网页设计 FIR 滤波器。在网上快速搜索“online fir filter design”发现[了这个](http://t-filter.appspot.com/fir/index.html)（我没用过，但它似乎使用了 remez 或 firpm 命令中使用的等波纹设计）

尝试首先使用直接卷积（没有 FFT）来实现您的过滤器，看看速度是否可以接受——这是一条更简单的路径。如果您需要基于 FFT 的方法，kissfft/tools/kiss_fastfir.c 文件中有一个重叠保存的示例实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T15:23:02.867

您可能想要研究的是使用重叠添加或重叠保存算法的 FFT 快速卷积。您需要将每个 FFT 的长度扩展为所需滤波器的脉冲长度。这是因为 (1) FFT/IFFT 卷积是圆形的，并且 (2) FFT 阵列结果中的每个索引对应于几乎所有频率（Sinc 形响应），而不仅仅是一个（即使大部分接近一个），所以任何一个bin 修改将在整个频率响应中泄漏（某些精确的周期性频率除外）。

# php - 如何用一个 XPath 获取两个字段？

> ID：10898312
> 
> 赞同：0
> 
> 时间：2012-06-05T13:33:17.680
> 
> 标签：php, parsing, xpath, xml-parsing

我有一个 XPath，它可以获取我想要阅读的 div。如何使用一个 XPath 读取 div 的类和名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:47:09.507

```
<?php 
        $xmlDoc = new DOMDocument(); 
        $xmlDoc->load( '<<your file>>>' ); 
    //$xmlDoc->loadHTML($sourceString); //-> if its a string you have
        $xpath = new DOMXpath($doc);
        $elements = $xpath->query("Your XPath");

        //if you are sure there is only one div, for the Xpath, you can use a index 0 in the next statement, else uou have to itereate it in a loop

    $node = $elements->item(0);

    $attrib1 = $node->attributes->getNamedItem("<attribute_name1>");
    $attrib2 = $node->attributes->getNamedItem("<attribute_name2>");
    $attrib3 = $node->attributes->getNamedItem("<attribute_name3>");
    ....

        ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T18:46:02.683

此代码选择具有属性名称和类的所有 div。请参阅下文以了解如何从所选节点中选择信息。

```
<?php

    $xmlstring = '<root>' .
        '<div name="value1" class="value2" myarg="value3"></div>' .
        '<div name="value4"></div>' .
    '</root>';
    $xml = simplexml_load_string($xmlstring);

    // Select all div's that have attributes name and class
    $xpath = "//div[@name and @class]"; 
    var_dump($result = $xml->xpath($xpath));

    /* Outputs:
        array(1) {
          [0]=>
          object(SimpleXMLElement)#3 (1) {
            ["@attributes"]=>
            array(3) {
              ["name"]=>
              string(6) "value1"
              ["class"]=>
              string(6) "value2"
              ["myarg"]=>
              string(6) "value3"
            }
          }
        }   
    */

    // note that only one iteration is performed
    // as the second div does not have an attribut
    // called 'class'.
    foreach($result as $element)
    {
        echo $element['name'];   // value1
        echo $element['class'];  // value2
    } 

    // or, if only one div is present in the document:
    echo $result[0]['name'];     // value1
    echo $result[0]['class'];    // value2  

?> 
```

# android - Galaxy Tab 10.1 有模拟器吗？

> ID：10898315
> 
> 赞同：4
> 
> 时间：2012-06-05T13:33:33.003
> 
> 标签：android, android-emulator, galaxy, galaxy-tab

公平警告：我完全是 android 开发的菜鸟

我有一个 Galaxy Tab 10.1，想知道它是否存在 Android 模拟器（附加组件）？使用第三方网站[http://innovator.samsungmobile.com/android/repository/repository.xml](http://innovator.samsungmobile.com/android/repository/repository.xml)我得到了一个“Galaxy TAB”插件，但它适用于 Android 2.2（API 级别 8）。

这是 Galaxy TAB 唯一的模拟器插件吗？Galaxy 10.1 运行的是 Android 3.1，并且我相信它具有不同的外形，所以似乎需要一个模拟器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:35:42.597

您可以在 AVD（Android 虚拟设备）管理器中创建一个与 Galaxy Tab 10.1 匹配的模拟器。

# mysql - 按sql中的选定记录排序

> ID：10898317
> 
> 赞同：4
> 
> 时间：2012-06-05T13:33:38.607
> 
> 标签：mysql, sql

我有一张像

```
city | pincode

abcd | 123456
xyz  | 326545
asd  | 625844
city | 999999 
```

我希望结果与选定的`pincode`第一个排序

如果我选择`pincode`的是`625844`哪个城市，`asd`则必须先显示

期望的输出：

```
 city | pincode

    asd  | 625844  <<-- this is selected pincode must be first
    abcd | 123456
    xyz  | 326545
    city | 999999 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:36:29.567

```
ORDER BY
        (pincode = @mypincode) DESC,
        pincode 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T13:37:51.597

```
select * from tbl 
order by (case when pincode = '625844' then 0 else 1 end), pincode 
```

或者如果选择的密码作为参数@pincode 传入，这应该可以工作

```
select * from tbl 
order by (case when pincode = @pincode then 0 else 1 end), pincode 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T13:36:19.163

```
( select * from pincodes where pincode = ? )
union all
( select * from pincodes where pincode !=? order by pincode asc ) 
```

在查询中使用所需`pincode`的值作为搜索参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T13:38:47.337

```
....
ORDER BY (case when pincode = @pincode then 0 else 1 end), pincode asc 
```

[http://dev.mysql.com/doc/refman/5.1/en/case-statement.html](http://dev.mysql.com/doc/refman/5.1/en/case-statement.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T13:35:47.013

为所有邮政编码分配权重，并首先为您想要的邮政编码分配最小权重。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T13:35:47.093

您需要以下 order by 语句：

```
order by (case when pincode in (<selected pin codes>) then -1
               else pincode
           end) 
```

我假设 pincode 是一个正数，并选择 -1 所以它首先出现。

# python - 如何执行以特定代码行开头的 python 文件？

> ID：10898319
> 
> 赞同：1
> 
> 时间：2012-06-05T13:33:47.680
> 
> 标签：python, execute, shellexecute

我在 python 中运行了一个模拟，但是到了一半我得到了一个错误。我已经修复了错误。现在我想执行同一个文件，但从错误行开始。我怎样才能做到这一点？Execfile，据我看来并没有这样做......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T13:36:04.140

你没有。

最简单的解决方案是注释掉所有中间行，或者将它们放在一个`if False:`块中。

您也可以简单地将代码的适当部分保存到一个新文件中并运行它。

在大多数编辑器中，这些操作中的任何一个都应该是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:02:42.963

把这条线放在一个类中，然后调用那个类。这就是我要做的，而不是注释掉这些行。

# c# - Properties.Settings 不会被保存

> ID：10898322
> 
> 赞同：4
> 
> 时间：2012-06-05T13:34:10.687
> 
> 标签：c#, application-settings

我正在尝试保存两个用户值（SliderWidth 和 SliderHeight）。我想使用 Visual Studio 选项设置来做到这一点。

![Visual Studio 选项设置](../Images/8cd6cf471b1885ed7f5b35bb92d242c5.png)

当我用这段代码调试它时：

```
 public void Test(int value)
    {
        Properties.Settings settings = Properties.Settings.Default;
        settings.SliderWidth = value;
        settings.Save();
    } 
```

值不会改变（程序结束后）。

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:51:26.320

它绝对有效。试试这个：

```
public void Test(int value)
{
    Properties.Settings settings = Properties.Settings.Default;

    MessageBox.Show("Last SliderWidth = " + settings.SliderWidth.ToString());

    settings.SliderWidth = value;
    settings.Save();
} 
```

但是保存的值不会反映在您在屏幕截图中显示的设计器窗口中。这些是初始默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-21T18:46:15.710

如果您的 AssemblyInfo.cs 在 Assembly 版本中有 * ，则它每次都会重置此文件。尝试对最后一个数字进行硬编码。清理并重建所有内容，它应该可以正常工作。

# ios - 带有移动应用和网络应用的服务的架构是什么，比如 Instagram 刚开始的时候？

> ID：10898323
> 
> 赞同：0
> 
> 时间：2012-06-05T13:34:11.963
> 
> 标签：ios, mobile, architecture, instagram

如果你正在构建一个像 Instagram 这样的服务，当你需要 -a web app -android app -ios app 你如何为此架构提供足够的灵活性来添加另一个移动系统并保持代码尽可能 DRY？你有关于它的书推荐吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:45:59.007

为了让服务器支持广泛的客户端平台，我会让所有客户端应用程序使用相同的协议与服务器通信，这样客户端运行的平台对服务器来说并不重要。在理想情况下，这将允许在不更改服务器端任何内容的情况下添加新平台

XmlHttpRequest 是一个很好的共同点。

# c# - 部署现有 ActiveX 控件的新版本

> ID：10898324
> 
> 赞同：1
> 
> 时间：2012-06-05T13:34:12.143
> 
> 标签：c#, visual-studio-2010, activex, asp.net-4.0

我正在为 IE7+ 编写基于 .NET 4.0 的 ActiveX 控件。我必须管理一个带有读键器设备的接口。我遵循了一些关于“如何做”的精彩教程和文章，目前运行良好。

当我想部署另一个版本的控件时，我的问题就开始了。

我正在使用带有设置部署项目的 VS2010 和 .CAB 的 cabarc。1.0.0.0 版本运行良好。目前我想让 1.0.2.0 版本正常工作，它的工作做得很好，但 IE 总是提示安装。一次又一次。

我做了什么：

1：将 AssemblyInfoVersion.cs 更改为版本 1.0.2.0

2：根据版本更改.inf文件为1.0.2.0

3：将.msi版本更改为1.0.2

我将 HTML 页面中的 OBJECT 标记更改为 #version=1,0,2,0

到目前为止一切顺利。它已安装！在“卸载程序”下可以看到，控件的版本是1,0,2！很好，但 IE 仍然希望我每次打开页面时都下载并安装它。

我看到一个与 Excel 连接的线程：[如何在自动化服务器列表中安装并注册用 VB.NET 编写的 COM Server for Excel？](https://stackoverflow.com/questions/1506858/how-to-get-com-server-for-excel-written-in-vb-net-installed-and-registered-in-au)

我得到了关于我应该在注册表中更改某些内容的有用信息。我在那里做了一些搜索，我的 classId 在： HKLM\SOFTWARE\Wow6432Node\Classes\CLSID{GUID}

我在这里有以下子项： InstalledVersion 已实施类别 InprocServer32 ProgId

我很高兴，因为我看到 InstalledVersion 部分的版本仍然是 1,0,1,0。我将其更改为 1,0,2,0 并且......它没有工作。我浏览了注册表，现在到处都是 InstalledVersion 1,0,2,0。.dll 版本为 1,0,2,0。安装的控件的版本是1,0,2。在 InprocServer32 下，我拥有所有三个 1,0,0,0 ；1,0,1,0; 1,0,2,0 版本。当然，在 HTML 代码中版本也是 1,0,2,0。

*（我的机器是64位Win7、IE9）*

有人可以帮忙吗，我错过了什么？

**整个场景的其他问题：**在第一次安装版本增加后，我的开发机器正在重新启动，没有任何问题。你知道什么样的设置可以使这种行为？

**更新：**

问题解决了。因为这个，我有点失明或有点累。但这个问题对未来可能很重要：

首先是关于问题的摘要：部署新版本（在客户端上安装良好）后，IE 总是提示安装该版本。

问题来源在注册表中。您应该在 InstalledVersion(Default) 注册表项中有正确的版本号。

我在这里遇到了一个非常特殊的情况（我还不知道原因），但是我在 SubKey InstalledVersion 下有两个带有 (Default) 的条目。第一个是空的，第二个包含正确的值。我无法删除第一个，但只能删除第二个。在我更改了第一个（默认）之后，一切正常！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:34:29.987

根据[微软文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372024%28v=vs.85%29.aspx)：

> **/promptrestart**
> 重启前提示选项。显示需要重新启动才能完成安装的消息，并询问用户是否现在重新启动系统。此选项不能与 /quiet 选项一起使用。

您可以使用**/qn /norestart**或仅使用**/promptrestart**。在我的情况下，只需要重新启动 IE，而不是整个操作系统。因此，我使用**/qn /norestart**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:46:52.643

自动重启的第二个问题也解决了。

此线程有帮助：[具有静默或被动模式的 MSI 安装程序有时会自动重新启动计算机而不提示用户](https://stackoverflow.com/questions/7831011/msi-installer-with-silent-or-passive-mode-will-automatically-restart-computer-wi)

必须在通话结束时添加`/qn /norestart`or ，因为没有此标志，Windows 会自动重新启动而不会产生疑问。`/promptrestart``msiexec`

如果有人有类似的问题，那么这是我的解决方案：

```
[RunSetup]
run="""msiexec.exe""" /i """%EXTRACT_DIR%\KeyReaderEngineInstaller.msi""" /qn /promptrestart 
```

# android - 如何使用 Android 应用程序捕获 http 请求

> ID：10898329
> 
> 赞同：2
> 
> 时间：2012-06-05T13:34:33.123
> 
> 标签：android

我正在开发一个 android 应用程序，它将跟踪我手机的所有 http 和 https 请求并显示该请求作为结果。

所以请任何人建议我如何使用android应用程序来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:15:42.050

有趣的是，我在阅读您的问题之前几分钟就遇到了这个问题。他们正在谈论一个做同样事情的应用程序。从[这篇文章](http://www.expertsguys.com/post/Why-does-my-flashlight-app-need-GPS-permisions.aspx)的文字中，我可以假设这是一个不小的壮举。他们采取了建立一个虚拟环境来捕获所有http请求的方法。这需要root你的手机。我希望如果你想检查一个特定的应用程序，你可以在模拟器中加载应用程序并记录模拟器的请求。

# php - 多维比较两个数组

> ID：10898330
> 
> 赞同：0
> 
> 时间：2012-06-05T13:34:35.690
> 
> 标签：php

我有两个数组

```
$array1 = array(0=>array('mac'=>'mac0','geo'=>'geo0'),1=>array('mac'=>'mac1','geo'=>'geo1'),
2=>array('mac'=>'mac2','geo'=>'geo2')...);

$array2 = array(0=>array('id'=>'id0','gname'=>'gname0'),1=>array('id'=>'id1','gname'=>'gname1'),
2=>array('id'=>'id2','gname'=>'gname2')...); 
```

我想比较第一个数组值 mac 和第二个数组值 gname 的两个数组

如果 geo 的值在 gname 的值中可用，则 update else do note update else do

不更新

例如，如果数组的值在 array2 中的任何数组中可用，则 UPDATE

否则不更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:17:53.073

这里写了代码：

```
 $array1 = array(0=>array('mac'=>'mac0','geo'=>'geo0'),1=>array('mac'=>'mac1','geo'=>'geo1'),
2=>array('mac'=>'mac2','geo'=>'geo2'));

$array2 = array(0=>array('id'=>'id0','gname'=>'gname0'),1=>array('id'=>'id1','gname'=>'gname1'),
2=>array('id'=>'id2','gname'=>'gname2'));

function gluearray($ar1, $ar2) {
    foreach($ar2 as $key=>$value) {
        if(isset($ar1[$key])) {
            if(is_array($ar1[$key])) {
                $ar1[$key] = gluearray($ar1[$key], $value);
            } else {
                if($ar1[$key]!==$value) {
                    $ar1[$key] = $value;
                }
            }
        } else {
            $ar1[$key] = $value;
        }
    }
    return $ar1;
}
print_r(gluearray($array1, $array2)); 
```

结果：

数组 ( [0] => 数组 ( [mac] => mac0 [geo] => geo0 [id] => id0 [gname] => gname0 ) [1] => 数组 ( [mac] => mac1 [geo] => geo1 [id] => id1 [gname] => gname1 ) [2] => 数组 ( [mac] => mac2 [geo] => geo2 [id] => id2 [gname] => gname2 )

# javascript - 使用“Booklet”插件的Javascript垂直翻转书

> ID：10898337
> 
> 赞同：0
> 
> 时间：2012-06-05T13:35:08.807
> 
> 标签：javascript, jquery, flip

我一直在成功地使用这个 jQuery 插件来水平翻转页面： [http ://builtbywill.com/code/booklet/](http://builtbywill.com/code/booklet/)

我什至可以将它用于不太传统的格式，如三折文件夹等。

但我被困在如何为例如日历做垂直翻转版本。

有谁知道如何做到这一点？

想到 CSS3 旋转，但我需要 IE7 支持

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:38:37.820

JQuery Flip 怎么样 [http://lab.smashup.it/flip/](http://lab.smashup.it/flip/)

# c# - C# string.replace 删除非法字符

> ID：10898338
> 
> 赞同：13
> 
> 时间：2012-06-05T13:35:13.967
> 
> 标签：c#, string

我正在开发一个程序，该程序可以读取文件并根据其列的标题保存其中的一部分。其中一些标题的文件名包含非法字符，因此我编写了这段代码来处理这些问题。

```
string headerfile = saveDir + "\\" + tVS.Nodes[r].Text.Replace("\"", "").Replace
              ("/","").Replace(":"," -").Replace(">","(Greater Than)") + ".csv"; 
```

在我没有 4 的情况下有更好的方法`.Replace()`吗？还是有某种我不知道的内置非法字符去除器？

谢谢！

**编辑：**它不需要用任何特定的字符替换字符。一个空格就足够了。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-05T13:40:52.047

正则表达式通常是一个很好的方法，但当你用不同的东西替换每个字符时就不行了。您可能会考虑将它们全部替换为相同的东西，并且只使用`System.IO.Path.GetInvalidFileNameChars()`.

```
string filename = tVS.Nodes[r].Text;

foreach(char c in System.IO.Path.GetInvalidFileNameChars()) {
    filename = filename.Replace(c, '_');
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-05T13:39:49.067

`System.IO.Path.[GetInvalidFileNameChars()](http://msdn.microsoft.com/en-us/library/system.io.path.getinvalidfilenamechars.aspx)`有所有无效字符。

这是一个示例方法：

```
public static string SanitizeFileName(string fileName, char replacementChar = '_')
{
    var blackList = new HashSet<char>(System.IO.Path.GetInvalidFileNameChars());
    var output = fileName.ToCharArray();
    for (int i = 0, ln = output.Length; i < ln; i++)
    {
        if (blackList.Contains(output[i]))
        {
            output[i] = replacementChar;
        }
    }
    return new String(output);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T13:38:20.357

看看 Regex.Replace[在这里](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace%28v=vs.100%29.aspx)，当涉及到单独剥离字符时，它会做你想做的一切。选择性地替换其他字符串可能更棘手。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-05T13:41:30.773

```
string charsToRemove = @"\/:";TODO complete this list

string filename;

string pattern = string.format("[{0}]", Regex.Escape(charsToRemove));
Regex.Replace(filename, pattern, ""); 
```

如果您只想删除非法字符，而不是用其他东西替换它们，您可以使用它。

# .net - 在嵌套命名空间中本地化表单突然生成运行时异常

> ID：10898339
> 
> 赞同：0
> 
> 时间：2012-06-05T13:35:17.170
> 
> 标签：.net, visual-c++

在我将其本地化之前，表单运行良好 - 然后它生成运行时异常并且找不到资源。

命名空间从根目录额外嵌套一层。

```
namespace MyApp
{
  namespace NextLevel
  {

    <MyForm class>

  }
} 
```

而MyApp 也对应Assembly 名称。

删除 NextLevel 所以只有 MyApp::MyForm 并且它像以前一样工作。

删除本地化，无论是否嵌套，它都可以正常工作。

如果有任何重要性，这是 C++/CLI 和 dll 程序集。

我尝试了 resx 文件 - 在资源名称模板之间添加 .NextLevel，但结果是相同的。

我的核心资源是中性的（嵌入的），然后是英文的（变成卫星的）。

有任何想法吗？

资源如何在内部命名以供资源管理器找到它们？

非常感谢。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T03:50:17.797

解决了 - 这就是我所做的。

在一个sideproject中，我遇到了完全相同的问题/结果，添加了一个嵌套的命名空间级别。我在 resx 文件中添加了像“.NesxtLevel”这样的额外级别以正确命名资源。

我在链接器输入中添加了重命名的资源文件作为嵌入式托管资源。

这很有效——但我觉得——为什么我必须在此处手动输入每个资源文件。

我查看了构建日志，发现 /out 仍然引用为 /ASSEMBLYRESOURCE：资源文件与 resx 文件的 basename 和 rootnamespace 相同，而不是其中包含额外命名空间的逻辑名称。

我手动删除了与 resx 文件具有相同基本名称的旧资源文件。

这解决了它。我也可以删除我在链接器选项中添加的嵌入式资源。

一直认为项目的重建也会删除旧的资源文件，但显然不是。因此，似乎当 VS 创建命令行时，如果存在以 roonamespace+resx-filename 作为逻辑名称的资源文件 - 它会选择那个 - 而不是由资源编译器设置创建的那个。

这是VS 2005，因此与MS谈论它是没有用的。很高兴它解决了。

# asp.net - 如何使用对象列表声明 servicestack RestService？

> ID：10898340
> 
> 赞同：1
> 
> 时间：2012-06-05T13:35:25.147
> 
> 标签：asp.net, .net, servicestack

我需要将多个对象从我的应用程序传递到使用 servicestack 的其余服务。我需要做这样的事情

```
EventLogService : RestServiceBase<List<EventLogData>> 
```

它没有给出任何构建错误。但是操作的名称被列为“List`1”而不是给定的名称。
我有这行代码来声明 AppHost()

```
public AppHost() : base("Rest WCF", typeof(EventLogService).Assembly) { } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:00:32.013

您的 AppHost 用于注册您的**所有**服务，而不仅仅是其中一项。ServiceStack 将扫描并**注册**Assembly 中定义的所有服务： `typeof(EventLogService).Assembly`. 同样，“Rest WCF”名称不是指单个 Web 服务，而是指所有这些服务，并在自动生成的元数据页面上使用。

您的每项服务都**应该**有一个 Request DTO，因此如果您想传入 a `List<EventLogData>`，您可以这样做：

```
 public class EventLogs : List<EventLogData> {} 
```

或者

```
 public class EventLogs {
     public List<EventLogData> Items { get; set; }
 } 
```

# soap - 在 Joomla 中安装 PHP-soap 客户端

> ID：10898341
> 
> 赞同：0
> 
> 时间：2012-06-05T13:35:29.020
> 
> 标签：soap, joomla1.5

在 Joomla 中安装 Php-soap 客户端的过程是什么。我没有找到任何关于 php-soap 客户端的包。

当我运行我的示例时，它会抛出错误消息：致命错误：在 /hermes/bosweb/web088/b886/ywh.brett/stratalliance/components/com_jumi/jumi.php(25) 中找不到类“SoapClient”：eval() 'd 在第 3 行编码

请有人帮助我，如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:46:30.717

如果您不在自己的托管主机上，您可能没有在您的 php 安装中启用soap，您可能不走运，请联系您的托管服务提供商并询问他们是否可以为您启用它

# c# - 使用实体框架执行自定义 sql？

> ID：10898344
> 
> 赞同：10
> 
> 时间：2012-06-05T13:35:32.937
> 
> 标签：c#, entity-framework, entity-framework-4, ado.net

我需要执行一个自定义查询，它将保存在数据库中的某个位置，我需要它返回一个数据表或数据集并将其绑定到一个网格视图，该网格视图将自动生成列为真。

我所有的数据访问层都可以与实体框架完美配合，但对于某些特定场景，我需要这样做，我想知道是否应该将 ado.net 与实体框架结合起来，或者 EF 是否可以以某种方式做到这一点

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-16T16:42:02.697

对于***实体框架 5***使用

> context.Database.SqlQuery

* * *

对于***实体框架 4***，使用以下代码

> context.ExecuteStoreQuery

* * *

```
 public string BuyerSequenceNumberMax(int buyerId)
    {
        string sequenceMaxQuery = "SELECT TOP(1) btitosal.BuyerSequenceNumber FROM BuyerTakenItemToSale btitosal " +
                                  "WHERE btitosal.BuyerID =  " + buyerId +
                                  "ORDER BY  CONVERT(INT,SUBSTRING(btitosal.BuyerSequenceNumber,7, LEN(btitosal.BuyerSequenceNumber))) DESC";

        var sequenceQueryResult = context.Database.SqlQuery<string>(sequenceMaxQuery).FirstOrDefault();

        string buyerSequenceNumber = string.Empty;

        if (sequenceQueryResult != null)
        {
            buyerSequenceNumber = sequenceQueryResult.ToString();
        }

        return buyerSequenceNumber;
    } 
```

对于返回列表，请使用以下代码

```
 public List<PanelSerialList> PanelSerialByLocationAndStock(string locationCode, byte storeLocation, string itemCategory, string itemCapacity, byte agreementType, string packageCode)
 {
       string panelSerialByLocationAndStockQuery = "SELECT isws.ItemSerialNo,  im.ItemModel " +
        "FROM Inv_ItemMaster im   " +
        "INNER JOIN  " +
        "Inv_ItemStockWithSerialNoByLocation isws  " +
        "   ON im.ItemCode = isws.ItemCode   " +
        "       WHERE isws.LocationCode = '" + locationCode + "' AND  " +
        "   isws.StoreLocation = " + storeLocation + " AND  " +
        "   isws.IsAvailableInStore = 1 AND " +
        "   im.ItemCapacity = '" + itemCapacity + "' AND " +
        "   isws.ItemSerialNo NOT IN ( " +
        "           Select sp.PanelSerialNo From Special_SpecialPackagePriceForResale sp  " +
        "           Where sp.PackageCode = '" + packageCode + "' )";

    context.Database.SqlQuery<PanelSerialList>(panelSerialByLocationAndStockQuery).ToList();

} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-05-17T09:56:15.367

这是另一个维度和更简单的方法。使用您的实体框架上下文获取 SQL 连接：

```
var connection = (System.Data.SqlClient.SqlConnection) _db.Database.Connection;

if (connection != null && connection.State == ConnectionState.Closed)
{
    connection.Open();
}

var dt = new DataTable();

using (var com = new System.Data.SqlClient.SqlDataAdapter("Select * from Table", connection))
{
    com.Fill(dt);
} 
```

我们可以使用`DataAdapter`EF 连接或任何其他经典方法来执行查询。

当我们动态地做某事并且我们不能映射到实体时，这将非常有用。例如，我们可以在 DataTable 中获取内容。

上述语法适用于*EF 5.0*。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-05T13:39:37.077

如果您的目标是返回 ADO.NET 结构（DataTable 或 DataSet），那么只需使用经典的 ADO.NET。您会发现这比尝试将数据绑定到实体集然后自己填充 DataTable 或 DataSet 更容易。

但是，如果您真的有兴趣通过 EntityFramework 运行自定义查询，请查看[ExecuteQuery](http://msdn.microsoft.com/en-us/library/bb361109.aspx)。它允许您执行 SQL 查询并将结果映射回模型中的实体。然后，您可以练习获取 IEnumerable 结果并将其映射到 DataTable 或 DataSet。因此，我最初的回答是“只需使用良好的老式 ADO.NET 方法即可。”

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-30T09:17:11.700

我使用 EF6，有一天我需要一种方法来执行动态 SQL 字符串并获取 DataTable。首先，我只是投身`DbContext.Database.Connection`并`SqlConnection`完成了整个工作。它适用于测试，但应用程序被破坏了，因为我们使用的 Glimpse 注入了`DbConnection`with type的自我实现`Glimpse.Ado.AlternateType.GlimpseDbConnection`。我需要独立于 DbConnection 的方法。最后我得到以下代码：

```
public class SqlDataProvider : ISqlDataProvider
{
    private readonly DbContext _context;

    public SqlDataProvider(DbContext context)
    {
        _context = context;
    }

    public DataTable GetDataTable(string sqlQuery)
    {
        try
        {
            DbProviderFactory factory = DbProviderFactories.GetFactory(_context.Database.Connection);

            using (var cmd = factory.CreateCommand())
            {
                cmd.CommandText = sqlQuery;
                cmd.CommandType = CommandType.Text;
                cmd.Connection = _context.Database.Connection;
                using (var adapter = factory.CreateDataAdapter())
                {
                    adapter.SelectCommand = cmd;

                    var tb = new DataTable();
                    adapter.Fill(tb);
                    return tb;
                }
            }
       }
        catch (Exception ex)
        {
            throw new SqlExecutionException(string.Format("Error occurred during SQL query execution {0}", sqlQuery), ex);
        }
    } 
```

这适用于任何情况：用于测试 where `DbContext.Database.Connection`is`SqlConnection`和 for`Glimpse.Ado.AlternateType.GlimpseDbConnection`

# c# - 当我最小化我的应用程序时，我的所有图纸都消失了

> ID：10898351
> 
> 赞同：3
> 
> 时间：2012-06-05T13:36:00.333
> 
> 标签：c#, .net, winforms, graphics

我正在构建一个显示炮弹轨迹的 C# 应用程序。但是当我把它最小化时，当我把它拉回来时，我画到一个图片框的轨迹就消失了。有没有简单的方法来阻止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:42:16.153

我在鼠标事件中打赌你的画。使用 onpaint 事件，你应该很高兴。

编辑：

这是一个使用 onpaint() 事件的不错的绘图教程：

[http://www.geekpedia.com/tutorial50_Drawing-with-Csharp.html](http://www.geekpedia.com/tutorial50_Drawing-with-Csharp.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:50:24.683

当窗口恢复时，它需要重新绘制表单。如果您没有将绘图作为绘制事件的一部分，则不会重绘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:57:55.317

这个问题与这个问题非常相似

[将图形内容保存到文件](https://stackoverflow.com/questions/10737859/saving-a-graphics-content-to-a-file/10738741#10738741)

正如其他人已经说过的那样，问题是当您绘制到图形对象上时，没有任何保留。它被称为持久图形。有时你想要这种行为，但往往不是。

您应该在位图上进行绘图，然后将位图复制到您的图片框。图像。其他答案中所述的另一个选项是在 OnPaint 方法中执行您的绘图例程。

在上面阅读我的答案。标题具有误导性，他认为他必须保存到文件中才能获得持久性，但我们向他展示了其他情况。

**编辑**这是来自上述链接的重要代码

```
Bitmap buffer; 
public Form1()
{
    InitializeComponent();
    panel1.BorderStyle = BorderStyle.FixedSingle;
    buffer = new Bitmap(panel1.Width,panel1.Height);
    //Make sure you resize your buffer whenever the panel1 resizes.
}

private void button1_Click(object sender, EventArgs e)
{
    using (Graphics g = Graphics.FromImage(buffer))
    {
        g.DrawRectangle(Pens.Red, 100, 100,100,100);
    }
    panel1.BackgroundImage = buffer;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-04T13:41:04.437

我遇到了同样的问题，只是在事件更改后使用了 mainp.refresh()

mainp 是我在其中绘制所有图形的面板

# c# - 添加 DLL 作为对我的 SharpSSH C# 项目的引用

> ID：10898352
> 
> 赞同：0
> 
> 时间：2012-06-05T13:36:01.843
> 
> 标签：c#, visual-studio, .net-assembly, sharpssh

我已经[从链接](http://sourceforge.net/projects/sharpssh/files/SharpSSH/1.1.1.13/SharpSSH-1.1.1.13.bin.zip/download)`SharpSSH`下载了二进制文件。当我提取它时，我发现了 3 个文件（还有一个文件）。`.DLL``EXE`

1.) DiffieHellman.dll 2.) Org.Mentalis.Security.dll 3.) Tamir.SharpSSH.dll

我需要将这些添加`Referece`到项目中。我需要知道我需要将这些`.DLL`文件中的哪一个添加`Reference`到项目中。

你也可以让我知道我应该如何添加`References`到我的 C# 项目中。

注意：我想做的是通过连接从`FTP`站点上传、下载文件。`SFTP`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:39:42.577

如果您想为您的项目添加引用，请右键单击并选择`Add Reference`并导航到相应的 dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T15:02:18.310

我知道这是一个相当古老的问题，但我们仍然使用 SharpSSH 库，您需要参考的唯一 dll 是`Tamir.SharpSSH.dll`，其他 2 个 dll 将自动包含在内。

# ip - 如何在 tcpdump 中只转储传出的 IP 数据包？

> ID：10898358
> 
> 赞同：4
> 
> 时间：2012-06-05T13:36:18.847
> 
> 标签：ip, packet, packet-capture, tcpdump, arp

我正在倾倒传出的流量。我只想要发往我的局域网之外的 TCP 和 UDP 数据包，没有别的。我刚刚将以下过滤器与 tcpdump 一起使用：

```
ip and (tcp or udp) and (not icmp) and src host myIPAddr and not dst net myNet/myNetBits and not ip broadcast 
```

但我捕获了以下数据包：

```
###[ Ethernet ]###
  dst       = ff:ff:ff:ff:ff:ff
  src       = 00:1e:4a:e0:9e:00
  type      = 0x806
###[ ARP ]###
     hwtype    = 0x1
     ptype     = 0x800
     hwlen     = 6
     plen      = 4
     op        = who-has
     hwsrc     = 00:1e:4a:e0:9e:00
     psrc      = X.X.X.X
     hwdst     = 00:00:00:00:00:00
     pdst      = Y.Y.Y.Y
###[ Padding ]###
        load      = '\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00' 
```

这里发生了什么？我以为我只是在转储*IP*数据包。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-03-04T23:10:09.323

将主机上的过滤设置为源：

```
tcpdump src <YOUR_IP> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:06:36.857

通过查看您的转储，您收到了 IP 协议类型的**ARP数据包（即****ptype = 0x800**）。您还应该过滤掉 ARP 数据包`and (not arp)`，这应该会清理您的转储。我认为，如果您查看 tcpdump 代码，您会发现它还保留这些特定 ARP 数据包的原因（但由于 IP 使用这些数据包进行网络解析，我猜这些 ARP 数据包被 tcpdump 视为 IP 的一部分）。

亲切的问候，
博

# mysql - 想进一步过滤掉下面的mysql结果集

> ID：10898364
> 
> 赞同：0
> 
> 时间：2012-06-05T13:36:36.633
> 
> 标签：mysql, sql, filter, resultset

我得到如下记录：provider_id location_id | 服务标识

21 | 42 | 387

32 | 42 | 387

23 | 42 | 397

45 | 42 | 397

25 | 42 | 700

25 | 53 | 397

27 | 53 | 700

我想进一步过滤掉它，如下所示。我查询了 service_id 387,397 和 700 并据此获取记录。

但我希望每个位置的所有三个 service_id 387、397 和 700 都必须存在。现在我正在获取具有 1 或 2 个 service_id 的位置。我想过滤掉这些记录。这样我将获得支持搜索所针对的所有三种服务的所有位置。

还记录有多个提供者在（相同或不同的）服务位置工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:44:36.507

The following query does what I think you want:

```
select location, count(distinct serviceid) as numserviceids
from t
where serviceid in (387, 397, 700)
having count(distinct serviceid) = 3 
```

It selects the service ids you are looking for. It then groups them by location, counting the number of service ids at each location, and returning only the ones that have all three.

# javascript - jQuery each() 和 load() 排序

> ID：10898365
> 
> 赞同：2
> 
> 时间：2012-06-05T13:36:44.310
> 
> 标签：javascript, jquery, load, indexing, each

我有一个脚本，它遍历一系列代表图像的 JSON 对象，循环加载图像，一旦加载，它就会将其附加到我的网站/应用程序上的元素。

图像在 JSON 中的顺序是正确的，但是它们以不同的顺序出现，具体取决于加载速度最快的图像，因为它们首先附加。我想确保无论图像加载的顺序如何，它们**始终**处于正确的顺序（循环表示的顺序）。

我希望最终得到的方法允许我在加载图像之前访问包装锚的样式以显示加载图标。

这是我正在谈论的脚本的一部分：

```
$.each(project.images, function (index, image){

var image_src = '<?= IMAGE_PATH ?>library/preview/'+ image.file_name;
var image_markup = $('<img class="new-image" />').attr('src', image_src)
                                                     .load(function(){

    if (this.complete) 
    { 
        var anchor_markup = $('<a href="javascript:void(0)" class="image-anchor" data-image-index="'+ index +'" id="image-index-'+ index +'">');
        $(anchor_markup).append(image_markup);
        globals.markup.image_slider.append(anchor_markup);
        $('.new-image').fadeIn(200).removeClass("new-image");
    }
});
}); 
```

该示例也可以在[http://www.staging.codebycoady.com/work看到](http://www.staging.codebycoady.com/work)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T13:44:41.623

If you want them in the correct order just append them without waiting for them to load, hide them and then in the onload callback toggle them visible.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:45:52.300

如果您希望图像以正确的顺序出现，那么您应该侦听图像的加载事件，一旦加载图像，您就标记它（在某些数组/对象中）它已加载。然后显示所有标记为从头开始加载的图像（即，当加载了 1、2、3 而未加载 4 时，则在 1、2、3 上设置显示块，即使刚刚加载了 5）。

# sql - SQL加入4个表问题

> ID：10898366
> 
> 赞同：0
> 
> 时间：2012-06-05T13:36:52.313
> 
> 标签：sql, join, db2

我有四张桌子：

T1

```
ID   ID1   TITLE
1    100   TITLE1
2    100   TITLE2
3    100   TITLE3 
```

T2

```
ID  TEXT
1   LONG1
2   LONG2 
```

T3

```
ID1  ID2
100  200 
```

T4

```
 ID4  ID2   SUBJECT
   1    200    A
   2    200    B
   3    200    C
   4    200    D
   5    200    E 
```

我想要以这种结果格式输出：

```
TITLE    TEXT   SUBJECT

TITLE1   LONG1    A
TITLE2   LONG2    B
TITLE3   null     C
null     null     D
null     null     E 
```

所以我做了这个查询，但它给我的结果比它应该的要多得多。在示例标题上显示的次数不仅仅是一次等等。

```
SELECT 
    t1.title,
    t2.text,
    t4.subject
FROM t1
    LEFT OUTER JOIN t2 ON t1.id=t2.id
    INNER JOIN t3      ON t1.id1=t3.id1
    LEFT OUTER JOIN t4 ON t4.id2=t3.id2
WHERE 
    t1.id1=100 
```

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T00:47:29.287

免责声明：我不使用 DB2。在浏览了一些文档之后，我发现 DB2 支持[row_number()](http://www.ibm.com/developerworks/data/library/techarticle/dm-0401kuznetsov/index.html)和[full external join](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2z10.doc.intro%2Fsrc%2Ftpc%2Fdb2z_fullouterjoin.htm)，但我可能很容易出错。

要摆脱 n:m 关系，必须建立额外的密钥。在这种情况下，简单的解决方案是将行号添加到 t1 和 t4 中的每条记录，并将其用作连接条件。Row_number 就是这样做的，它为由 定义的数据组`partition by`按升序生成数字`order by`。

由于 t1 和 t4 的记录数存在差异，并且不知道哪一个总是有更多的记录，所以我使用完全外连接来连接它们。

可以看到[测试（Sql Server 版本）@Sql Fiddle](http://sqlfiddle.com/#!3/b5aa4/1)。

```
select t1_rn.title,
       t2.[text],
       t4_rn.subject
from
(
  select t1.id,
         t1.title,
         t1.id1,
         t3.id2,
         row_number() over(partition by t1.id1
                           order by id) rn
    from t1
   inner join t3
      on t1.id1 = t3.id1
) t1_rn
full outer join
(
  select t4.subject,
         t3.id1,
         t4.id2,
         row_number() over(partition by t4.id2 
                           order by id4) rn
    from t4
   inner join t3
      on t4.id2 = t3.id2
) t4_rn
  on t1_rn.id1 = t4_rn.id1
 and t1_rn.id2 = t4_rn.id2
 and t1_rn.rn = t4_rn.rn
left join t2
  on t1_rn.id = t2.id 
```

这种工作绝对应该在应用程序的演示端完成，但我相信您使用的软件需要已经准备好的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:54:37.120

尝试这个 ：

```
select t1.title,t2.text,t4.subject
from t4 
left join t3
on t4.id2=t3.id2
left join t1 
on t1.id1=t3.id1
left join t2
on t1.id=t2.id
where t1.id=100 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:02:44.933

外连接保证复制行，而不是只匹配您需要的行。你可能想看看这个：http: [//blog.sqlauthority.com/2009/04/13/sql-server-introduction-to-joins-basic-of-joins/](http://blog.sqlauthority.com/2009/04/13/sql-server-introduction-to-joins-basic-of-joins/)

了解连接类型是什么，以及如何使用它们。

您正在寻找包含相关文本和标题的主题列表，但这可能不是唯一的；每个标题存在多个 null。您希望从表 4 中驱动连接，并获得一个主题列表，以及每个主题的相关标题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T14:26:21.533

查看您的输出，您似乎希望显示所有主题。了解这一点后，您应该首先在此表上构建所有内容。

```
SELECT columns
FROM T4 
```

接下来建立你的内部连接。

```
SELECT columns
FROM T4 subjectTable
    INNER JOIN T3 mapTable
    ON mapTable.ID2 = subjectTable.ID2 
```

如果对它们感到满意，请使用外部连接添加可选列。

```
SELECT columns
FROM T4 subjectTable
    INNER JOIN T3 mapTable
    ON mapTable.ID2 = subjectTable.ID2
    LEFT OUTER JOIN T2 textTable
    ON textTable.ID = subjectTable.ID4
    LEFT OUTER JOIN T1 titleTable
    ON titleTable.ID1 = mapTable.ID1
WHERE
    subjectTable.ID = 100; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T13:57:20.237

你应该改变你的桌子。您的最后一次连接对您的输出执行此操作 - 只需分析您的查询。对于 T1 的每条记录，您都有 T4 的每条记录。

# wcf - 从 IIS 7.5 访问时服务超时

> ID：10898368
> 
> 赞同：1
> 
> 时间：2012-06-05T13:36:57.837
> 
> 标签：wcf, exception-handling, timeout, iis-7.5, nettcpbinding

配置：Windows Server 2008 R2 企业版、IIS 7.5

网站正在访问部署在不同服务器（即 Windows Server 2003）上的服务

我可以从本地机器访问服务；我在 Win 7 Box 的机器上托管在 IIS 7.5 中的网站。这工作得很好。

错误：

```
[SocketException (0x2746): An existing connection was forcibly closed by the remote host]
   System.ServiceModel.Channels.SocketConnection.ReadCore(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout, Boolean closing) +276

[CommunicationException: The socket connection was aborted. This could be caused by an error processing your message or a receive timeout being exceeded by the remote host, or an underlying network resource issue. Local socket timeout was '00:10:00'.]
   System.ServiceModel.Channels.SocketConnection.ReadCore(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout, Boolean closing) +16433296
   System.ServiceModel.Channels.SocketConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout) +132
   System.ServiceModel.Channels.ConnectionStream.Read(Byte[] buffer, Int32 offset, Int32 count) +66
   System.Net.FixedSizeReader.ReadPacket(Byte[] buffer, Int32 offset, Int32 count) +60
   System.Net.Security.NegotiateStream.StartFrameHeader(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest) +64
   System.Net.Security.NegotiateStream.StartReading(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest) +54
   System.Net.Security.NegotiateStream.ProcessRead(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest) +379

[IOException: The read operation failed, see inner exception.]
   System.Net.Security.NegotiateStream.ProcessRead(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest) +659
   System.Net.Security.NegotiateStream.Read(Byte[] buffer, Int32 offset, Int32 count) +170
   System.ServiceModel.Channels.StreamConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout) +187

[CommunicationException: The socket connection was aborted. This could be caused by an error processing your message or a receive timeout being exceeded by the remote host, or an underlying network resource issue. Local socket timeout was '00:10:00'.]
   System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) +4727747
   System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) +1725
   AB.RAPPublisher.InterfaceExt.IRAPPublisher.GetDashboardMessages(String messageType, DateTime businessDate) +0
   AB.RAPPublisher.Client.RAPPublisherClient.GetDashboardMessages(String messageType, DateTime businessDate) +235 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:46:39.220

您是否安装了非 HTTP 激活、Net.Tcp 侦听器和 Windows 进程激活服务正在运行？

# postgresql - 使用 EclipseLink 在 Postgres 枚举上映射 Java 枚举

> ID：10898369
> 
> 赞同：3
> 
> 时间：2012-06-05T13:37:05.437
> 
> 标签：postgresql, jpa, eclipselink

我正在使用 JPA（EclipseLink 实现）进行第一次尝试，感觉非常困难：

在 PostgreSQL 中，我有以下数据库模式

```
CREATE TYPE mood AS ENUM ( 'sad', 'happy', 'enthusiastic' );

CREATE TABLE person (
  pk      BIGINT   PRIMARY KEY,
  name    VARCHAR  NOT NULL,
  mood    mood     NOT NULL
);

CREATE SEQUENCE person_pk_seq INCREMENT BY 100 MINVALUE 100; 
```

效果很好，正如这个插入显示`INSERT INTO PERSON (PK, mood, name) VALUES (3, 'happy', 'Joe')`的那样（将 pk 作为字符串提交没有区别。）

在 JPA 方面，我编写了以下类：

```
package testdb;
import java.io.Serializable;
import javax.persistence.*;
import org.eclipse.persistence.annotations.*;

@Entity
public class Person implements Serializable {
  private static final long serialVersionUID = 1L;

  public enum Mood {
    sad, happy, enthusiastic;
  }

  @Id
  @SequenceGenerator(
    name="PERSON_PK_GENERATOR",
    sequenceName="PERSON_PK_SEQ",
    allocationSize = 100
  )
  @GeneratedValue(
    strategy=GenerationType.SEQUENCE,
    generator="PERSON_PK_GENERATOR"
  )
  public Long pk;

  @Enumerated( EnumType.STRING )
  @Column( name = "mood" )
  @ObjectTypeConverter( name = "moodConverter", objectType = Mood.class,
    dataType = String.class, conversionValues = {
      @ConversionValue( objectValue = "sad", dataValue = "sad" ),
      @ConversionValue( objectValue = "happy", dataValue = "happy" ),
      @ConversionValue( objectValue = "enthusiastic", dataValue = "enthusiastic" )
  })
  @Convert( "moodConverter" )
  public Mood mood;

  @Column( name = "name" )
  public String name;

  public static void main(String[] args) {
    EntityManagerFactory factory = Persistence.createEntityManagerFactory("TestDb.jpa.tests" );
    EntityManager em = factory.createEntityManager();

    em.getTransaction().begin();
    Person p = new Person();
    em.persist( p );
    System.out.println(p.pk);
    p.name = "Joe";
    p.mood = Mood.enthusiastic;
    em.getTransaction().commit();

    Query q = em.createQuery( "select p from Person p" );
    Person x = (Person)q.getResultList().get(0);
    System.out.println( x.pk + " :: " +x.mood );

    em.close();
  }
} 
```

但是，这个例子不起作用，我不知道问题是什么：

```
[EL Warning]: 2012-06-05 15:28:20.646--UnitOfWork(845463623)--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.BatchUpdateException: Batch-Eintrag 0 INSERT INTO PERSON (PK, mood, name) VALUES ('801', 'enthusiastic', 'Joe') wurde abgebrochen.  Rufen Sie 'getNextException' auf, um die Ursache zu erfahren.
Error Code: 0
Call: INSERT INTO PERSON (PK, mood, name) VALUES (?, ?, ?)
    bind => [3 parameters bound] 
```

当我将表的列类型更改`person`为`varchar`并删除注释时`@Convert`，`@ObjectTypeConverter`一切都按预期工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T16:56:11.227

为什么使用 a `@ObjectTypeConverter`，您可以使用 eclipse 链接将 Enumerations 映射到开箱即用，如下[所示](http://wiki.eclipse.org/Introduction_to_EclipseLink_JPA_%28ELUG%29#.40Enumerated)。`@Enumerated`是 JSR-220 的一部分，而它是[EclipseLink JPA Extensions](http://wiki.eclipse.org/Using_EclipseLink_JPA_Extensions_%28ELUG%29#How_to_Use_the_.40ObjectTypeConverter_Annotation)`@ObjectTypeConverter`的专有扩展。

```
@Enumerated(EnumType.STRING)
@Column(name = "mood")
private Mood mood; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:52:12.177

尝试删除 @Enumerated( EnumType.STRING )，因为它可能会覆盖转换器设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:06:16.763

What is the mood type? This is not a standard JDBC type, so this is the reason for your error.

How does Postgres require this type to be bound through JDBC? It seems odd it does not auto convert varchar values. I did a little looking, and it seems to return this type as PGObject, so you will need to own custom Converter that converts between your Java enum, and a Postgres enum. You will also need to set the jdbcType on the DatabaseField in your converters init method to OTHER.

Please log a bug on EclipseLink to have support added to the Postgres platform for this type.

I think disabling parameter binding would also work.

# android - Android：启动画面和网页视图

> ID：10898375
> 
> 赞同：1
> 
> 时间：2012-06-05T13:37:57.587
> 
> 标签：android, multithreading, webview, screen, splash-screen

我已经尝试了几天来获得在加载 web 视图时显示启动屏幕的解决方案。

我环顾四周，有几种方法： - 制作活动只是为了显示启动屏幕，等待几秒钟，然后启动 webview 活动 -> 这不是解决方案，因为在启动屏幕关闭后再次完成所有加载

*   第二种方法是这样的：

    ```
     myWebView = (WebView) findViewById(R.id.webview);
    myWebView.getSettings().setJavaScriptEnabled(true);
    myWebView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY); 
    myWebView.setWebViewClient(new WebViewClient() {
       public void onPageFinished(WebView view, String url) {
           findViewById(R.id.webview).setVisibility(View.VISIBLE);

           //hide loading image
           findViewById(R.id.imageView1).setVisibility(View.GONE);
           //show webview
          }
        }); 
    ```

    这可行，但在转换到 webview 时再次出现轻微的白屏。而且您也无法控制启动画面的时间。

*   第三种解决方案是我想做的，但是（即使经过几天的搜索和尝试）也不知道如何 -> 在一个线程中显示启动画面，在另一个线程中为 webview 准备所有内容，然后简单地切换到 webview .

我的问题是，谁能告诉我从第三种解决方案开始的地方？

*   我想尝试这样的[事情](https://stackoverflow.com/questions/6592091/android-preload-a-url-into-webview-while-splashscreen-is-showing)！但我不知道如何将 webview 传递给另一个活动，从我读到的内容来看，这甚至不是一个好主意。

任何建议，想法，指针？有没有办法显示启动画面，在另一个线程中准备（膨胀）webview，然后在加载 url（以及其他所有内容）完成后切换到它？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:42:18.020

尝试在 Webview 上使用 WebChromeClient。在 WebChromeClient 中，您有一个 onProgressChange 方法。

当 onProgressChange 告诉您页面已完成加载时，您可以消失启动屏幕。

编辑：例如，您可以使用 HttpGet 在线程中调用您的 Url 并检索响应。当您得到响应时，您可以使用 loadData(...) 方法加载 webview。

# java - 在没有 SpringDM 的 OSGi 应用程序中使用 Spring Security

> ID：10898377
> 
> 赞同：0
> 
> 时间：2012-06-05T13:38:00.657
> 
> 标签：java, spring-security, osgi, spring-dm

大约有半天的时间，我试图找到一种方法将我在 SpringSecurity 上的实现迁移到 OSGi(equinox) 包的上下文***而不切换到 SpringDM***。

**目前我们有两个项目：**

**1.**我有一个基于一些xml配置文件**的Spring Security的实现来处理认证和授权。**
**2.**另一方面，我们有一个庞大的**OGSi 捆绑项目**结构，其中包含大约 200 个捆绑包，需要与安全捆绑包（如上所述的那个）集成

*作为创建mySpringBasedSecurityBundle* 的第一步，我需要在加载 mySecurityBundle 后运行此方法以访问位于以下位置的安全配置 xml 文件：**com/myComp/backend/appsecurity/spring/resources/Spring-Context.xml** ，它为我准备了*Spring-DataSource。 xml*和*Spring-Security.xml*如下：

```
 private void loadApplicationContext()
    {
        SecurityContextHolder.setStrategyName(SecurityContextHolder.MODE_GLOBAL);
        new ThreadLocal<Object>();
        setApplicationContext(new ClassPathXmlApplicationContext(SPRING_CONTEXT_ADDRESS));
    } 
```

**但不幸的是，发生了这个异常：**

```
org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from class path resource [com/myComp/backend/appsecurity/spring/resources/Spring-Context.xml]; nested exception is java.io.FileNotFoundException: class path resource [com/myComp/backend/appsecurity/spring/resources/Spring-Context.xml] cannot be opened because it does not exist
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:341)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:212)
at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:126)
at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:92)
at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
at com.myComp.backend.appsecurity.spring.appSecurityManager.loadApplicationContext(appSecurityManager.java:233)
at com.myComp.backend.appsecurity.spring.appSecurityManager.internalInitialize(appSecurityManager.java:106)
at com.myComp.BaseModuleManager.initialize(BaseModuleManager.java:511)
at com.myComp.BaseModuleManager.initialize(BaseModuleManager.java:1)
at com.myComp.backend.BaseBackendManager.initializeSubBackendManagers(BaseBackendManager.java:643)
at com.myComp.backend.BaseBackendManager.prepareSubBackendManagers(BaseBackendManager.java:885)
at com.myComp.backend.BackendManager.internalStart(BackendManager.java:127)
at com.myComp.BaseModuleManager.start(BaseModuleManager.java:574)
at com.myComp.BaseModuleManager.start(BaseModuleManager.java:1)
at com.myComp.application.BaseApplicationStub.startBackendManager(BaseApplicationStub.java:2407)
at com.myComp.Application.frameworkEvent(Application.java:72)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:874)
at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)Caused by: java.io.FileNotFoundException: class path resource [com/myComp/backend/appsecurity/spring/resources/Spring-Context.xml] cannot be opened because it does not exist
at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:158)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:328)
.. 26 more 
```

尽管我在网上搜索，对于这个问题的唯一建议是在 SpringDM 上的应用程序，**但我们的 ProjectManager 切换到 SpringDM 是不可接受的，**老实说我对 SpringDM 不了解。

**请您使用 Spring Core 功能帮助我解决此问题。**

非常感谢
Moein

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:51:22.410

您实际上并不需要 Spring DM。它只是在 OSGi 和 Spring 之间提供了一座桥梁，并提供了一些细节，例如在 OSGi 环境中正确加载所有上下文文件。您也可以自己执行此操作，但您必须补偿类加载问题，这是您遇到的问题。

试试这个来解决你的类加载问题。

```
ApplicationContext ctx = new ClassPathXmlApplicationContext(myCtxPath)
{
    protected void initBeanDefinitionReader(XmlBeanDefinitionReader reader)
    {
        super.initBeanDefinitionReader(reader);
        reader.setValidationMode(XmlBeanDefinitionReader.VALIDATION_NONE);
        reader.setBeanClassLoader(getClassLoader());
    }
} 
```

顺便说一句，您方法的第二行毫无用处。

# java - 如何访问 JSP 中 servlet 设置的请求属性？

> ID：10898393
> 
> 赞同：26
> 
> 时间：2012-06-05T13:39:00.477
> 
> 标签：java, jsp, servlets, el

我正在尝试检索由 JSP 页面中的 servlet 设置的属性值，但我只能通过`${param}`. 我不确定我能做些什么不同的事情。也许它很简单，但我还无法管理它。

```
public void execute(HttpServletRequest request, HttpServletResponse response) {

    //there's no "setParameter" method for the "request" object
    request.setAttribute("attrib", "attribValue");

    RequestDispatcher rd = request.getRequestDispatcher("/Test.jsp");
    rd.forward(request,response);
} 
```

在 JSP 中，我一直在尝试检索“attribValue”，但没有成功：

```
<body>
    <!-- Is there another tag instead of "param"??? -->
    <p>Test attribute value: ${param.attrib}
</body> 
```

如果我通过所有进程（调用页面、servlet 和目标页面）传递一个参数，它的效果非常好。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-05T14:13:48.880

它已经在默认的 EL 范围内可用，所以只需

```
${attrib} 
```

应该做。

如果您想明确指定范围（EL 将依次搜索页面、请求、会话和应用程序范围，以查找与属性名称匹配的第一个非空属性值），那么您需要通过范围映射来引用它，这是`${requestScope}`针对请求范围的

```
${requestScope.attrib} 
```

*这仅在您可能*在页面范围内具有完全相同名称的属性时才有用，否则会获得优先权（但这种情况通常表明设计不佳）。

### 也可以看看：

*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)
*   [Java EE 6 教程 - 表达式语言](http://docs.oracle.com/javaee/6/tutorial/doc/gjddd.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-01-28T03:29:59.203

`EL`也许语法和语法之间的比较`scriptlet`会帮助您理解这个概念。

*   `param`就好像`request.getParameter()`
*   `requestScope`就好像`request.getAttribute()`

你需要`request attribute`从`request parameter`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T13:56:07.753

您是否尝试过使用表达式标签？

```
<%= request.getAttribute("attrib") %> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-09T14:32:52.680

如果范围是请求类型，我们使用 in request 设置属性并使用in jsp**`request.setAttribute(key,value)`**检索。**`${requestScope.key}`**

# data-structures - 动态大小的堆插入在技术上是 O(n) 吗？

> ID：10898394
> 
> 赞同：0
> 
> 时间：2012-06-05T13:39:02.757
> 
> 标签：data-structures, heap

将一个元素插入堆涉及将其附加到数组的末尾，然后向上传播，直到它在“正确的位置”并满足堆属性，其操作是 O(logn)。

但是，例如，在 C 中，`realloc`为了调整新元素的数组大小而调用可能（并且可能会）导致必须将整个数组复制到内存中的另一个位置，最好是 O(n)最坏的情况，对吧？

C（或任何语言）中的堆是否通常以固定的、预先分配的大小完成，或者复制操作是否无关紧要，足以使动态大小的堆成为可行的选择（例如，二进制堆以保持快速可搜索的项目列表）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:50:51.643

一个典型的方案是在空间用完时将尺寸加倍。这种翻倍——以及随之而来的复制——确实需要 O(n) 时间。

但是，请注意，您不必经常执行此加倍操作。如果将所有在堆上执行的不涉及加倍的操作的所有加倍的总成本平均起来，那么成本确实是无关紧要的。（这种平均称为[摊销分析](http://en.wikipedia.org/wiki/Amortized_analysis)。）

# java - 根据今天的日期获取记录

> ID：10898396
> 
> 赞同：0
> 
> 时间：2012-06-05T13:39:05.750
> 
> 标签：java, jakarta-ee, jpa

我希望为我的应用程序生成报告，这样的报告需要显示今天给出的订单列表。为此，我在我的 ejb 中有以下方法，它什么都不返回（调试并发现）：

```
public Collection<OrderStock> getOrderReport(String userName) {
   String strQuery = null;
    strQuery = "Select o from OrderStock o where o.userName.userName = :userName and o.orderDateTime = :orderDateTime";

     Collection<OrderStock> c = em.createQuery(strQuery).setParameter("userName",userName).setParameter("orderDateTime", new Date(),TemporalType.DATE).getResultList();

   return c;
} 
```

我该如何解决？为什么什么都不返回？

**编辑：** 我使用mysql作为orderDateTime的后端数据类型是DateTime，例如orderDateTime中的os数据：2012-06-05 00:12:32 2012-06-05 11:34:42 2012-04-05 12:32:45

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:03:00.573

您有一个`DateTime`专栏，并且正在寻找某个日期的帖子。我怀疑这个日期时间列包含自纪元以来的秒数或毫秒数。您无法将时间与日期进行比较，因此您必须将日期转换为时间。实际上有两次描述了这一天。

```
SELECT o 
FROM OrderStock o 
WHERE 
    o.userName.userName = :userName 
    AND (
        o.orderDateTime >= FirstSecondOfTheDay
        OR o.orderDateTime <= LastSecondOfTheDay
    ) 
```

根据您的数据库系统，您可以使用数据库计算这些秒数（或毫秒，我不知道您的表），或者在 java 中计算

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:18:24.617

在 MySQL 上试试这个：

```
strQuery = "Select o from OrderStock o where o.user.userName = :userName and date(o.orderDateTime) = :orderDateTime";

Date today = DateUtils.truncate(new Date(), Calendar.DATE);

Collection<OrderStock> c = em.createQuery(strQuery).setParameter("userName",userName).setParameter("orderDateTime", today ,TemporalType.DATE).getResultList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:12:55.900

你不能这么简单地使用 Date() 。数据库中保存的日期肯定会有不同的格式。所以最好的办法是首先研究用于持久化数据的方法，然后使用相同的方法取回数据。

该方法可以通过Oracle 函数、java 方法。您需要对此进行进一步调查。

# android - 安卓运行错误

> ID：10898398
> 
> 赞同：1
> 
> 时间：2012-06-05T13:39:11.493
> 
> 标签：android, android-x86

我一直面临一个真正奇怪的问题。我已经安装和使用了很多次android，甚至现在在我的桌面上使用它。但是当我尝试在我的笔记本电脑上安装它时出现了问题。一切都安装得很好，但是当我安装 ADT 然后重新启动 eclipse 时会发生这个错误，它会说类似 adb 错误。

> DeviceMonitor]连接尝试：1
> DeviceMonitor]连接尝试：2
> ...
> DeviceMonitor]连接尝试：600

我正在使用 windows 7 64x 和 eclipse indigo（我也尝试过其他版本）并且我的网卡是杀手级无线 n 系列。以前有人遇到过这种问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:47:35.350

这是因为 Win7 更喜欢为 localhost 返回 IPV6 地址。解决方案是强制 Eclipse IDE 使用 IPV4。在这里查看如何做到这一点： [https ://stackoverflow.com/a/11327411/1363296](https://stackoverflow.com/a/11327411/1363296)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:51:09.130

**您的 ADB 必须重新启动，在命令提示符下使用以下命令重新启动 adb 服务器**

```
adb stop-server
adb start-serevr 
```

它将解决您的问题。

# qt - 在 qt StyleSheets 中使用变量

> ID：10898399
> 
> 赞同：17
> 
> 时间：2012-06-05T13:39:14.777
> 
> 标签：qt, qtstylesheets

是否有可能在 .qss 文件中为 hex/rgb 数字提供变量名称。呃

```
myColor = #FFCC08
QPushButton { background-color: myColor;} 
```

这样我就可以在样式表的顶部定义变量，并在需要的地方使用变量名，而不是使用十六进制代码。此外，如果我需要更改颜色，那么我必须在一个地方进行更改，它将通过文件反映出来。

我也搜索了[Saas](http://en.wikipedia.org/wiki/Sass_%28stylesheet_language%29)，但不知道如何在qt中使用它。

谢谢 ：）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-14T11:19:39.980

你可以很容易地构建自己的小 Sass：

1.创建一个包含变量定义的文本文件。使用这样的简单格式：

```
@myColor  = #FFDDEE
@myColor2 = #112233 
@myWidth  = 20px 
```

2.在qss文件中使用变量名：

```
QPushButton { 
    background-color: @myColor; 
    min-width: @myWidth;
} 
```

3.打开这两个文件，并且对于定义文件中的每个变量，使用定义文件中的值（字符串）更改其在 qss 文件中的出现。这是一个简单的字符串替换。

4.在应用程序中应用预处理的qss。

这是最简单的解决方案。您可以在应用程序外部更改定义文件和 qss 文件并应用它而无需重新编译代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T14:13:35.683

使用纯 Qt 样式表根本不可能完成您想要完成的工作。

您可以通过在 C++ 代码中修改和重新加载样式表来实现类似的效果，例如：

```
QString myColor = "#FFCC08";
QString styleSheet = "QPushButton { background-color: %1;}";
...
myWidget->setStyleSheet( styleSheet.arg(myColor) ); 
```

不幸的是，这有几个缺点（无法在设计器中预览、更改代码而不是样式表），但它与您使用 Qt 实现的目标差不多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-21T21:16:27.157

实现此目的的另一种方法是使用动态属性。这将使您可以轻松地将多个属性分配给一个对象或一组对象，有点像将一个 CSS 类分配给一个对象。 [https://wiki.qt.io/Dynamic_Properties_and_Stylesheets](https://wiki.qt.io/Dynamic_Properties_and_Stylesheets)

例如，在您的 UI 文件中，您可以添加一个值为“myStyle1”的字符串动态属性“colorStyle”。

[![在此处输入图像描述](../Images/9fdc608aae2edc165bb68d6c9b91454a.png)](https://i.stack.imgur.com/BlCw5.png)

您的样式表如下所示：

```
QPushButton[colorStyle='myStyle1'] {
    background-color: #FFCC08;
    ... any other style changes...
} 
```

如果您全局设置它，您分配的任何 QPushButton 'myStyle1' 都将遵循样式表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-19T09:21:25.757

这是使用[sass](http://sass-lang.com/guide)的解决方案。首先，安装 python 绑定：

```
pip install sass 
```

然后，使用它：

```
import sys
import sass
app = QApplication(sys.argv)

# Create your sass style sheet (you can also write this in a file and load the file)
style = '''
$bg-dark: #292929;

QPushButton {
color: red;
background-color: $bg-dark;
}
'''.encode('utf-8')

# Compile Sass to CSS
style = sass.compile_string(style).decode()

# And set it to your app
app.setStyleSheet(style) 
```

# java - 文件报告为丢失，但不是

> ID：10898400
> 
> 赞同：3
> 
> 时间：2012-06-05T13:39:20.253
> 
> 标签：java, struts, tomcat7

我正在使用其他人编写的 struts 开发一个 java web 应用程序，并且我收到有关某些文件中缺少的导入的错误，因此我查看了项目文件夹并在 jsp 文件中找到了该文件，这看起来很奇怪。因此，我将文件复制到相关包中，错误就消失了。当我再次在 Tomcat 上运行该程序时，我收到了这个错误：

```
org.apache.jasper.JasperException: /index.jsp(3,55) File "/WEB-INF/struts-html.tld" not found
        org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:41)
        org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:407)
        org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:132)
        org.apache.jasper.compiler.TagLibraryInfoImpl.<init>(TagLibraryInfoImpl.java:166)
        org.apache.jasper.compiler.Parser.parseTaglibDirective(Parser.java:410)
        org.apache.jasper.compiler.Parser.parseDirective(Parser.java:475)
        org.apache.jasper.compiler.Parser.parseElements(Parser.java:1425)
        org.apache.jasper.compiler.Parser.parse(Parser.java:138)
        org.apache.jasper.compiler.ParserController.doParse(ParserController.java:239)
        org.apache.jasper.compiler.ParserController.parse(ParserController.java:102)
        org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:197)
        org.apache.jasper.compiler.Compiler.compile(Compiler.java:372)
        org.apache.jasper.compiler.Compiler.compile(Compiler.java:352)
        org.apache.jasper.compiler.Compiler.compile(Compiler.java:339)
        org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:594)
        org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:344)
        org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

“/WEB-INF/struts-html.tld”仍然存在并且没有被更改或移动。我决定删除我移动的文件，因为没有它程序仍然可以工作，但我仍然收到错误，我不确定如何解决这个问题。

编辑：

所以我决定刷新网页，出现了一个不同的错误：

```
org.apache.jasper.JasperException: java.lang.ClassNotFoundException: org.apache.jsp.index_jsp
        org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:168)
        org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:356)
        org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause 

java.lang.ClassNotFoundException: org.apache.jsp.index_jsp
        java.net.URLClassLoader$1.run(Unknown Source)
        java.security.AccessController.doPrivileged(Native Method)
        java.net.URLClassLoader.findClass(Unknown Source)
        org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:132)
        org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:63)
        org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:162)
        org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:356)
        org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:57:39.447

（`tld`标签库）文件及其位置在`web.xml`文件中指定。
如果您需要 new `tlds`，`jsp`使用这些文件的文件`tlds`将首先在 中`web.xml`查找文件的信息和位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-11T11:27:23.720

在您的 web.xml 中，您需要在欢迎页面定义之后放置 taglib 定义。它对我有用。

# objective-c - 如何重置C数组，使所有元素都为0

> ID：10898401
> 
> 赞同：7
> 
> 时间：2012-06-05T13:39:21.023
> 
> 标签：objective-c, c

如果我有`int someArray[100]`包含各种元素中的项目，我怎样才能将它们全部重置为 0？

基本问题，我知道，但我通常使用 Objective-C 数组，但为此我只是存储一些数字，并希望“老派”地处理它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-05T13:43:30.953

You need to set each element to the value you want:

```
for (int i = 0; i < 100; ++i)
    SomeArray[i] = 0; 
```

For the specific case of integers and the value 0, you can also make use of the fact that their bitwise representation is known (all bits are 0), and so you can use `memset`:

```
memset(SomeArray, 0, sizeof(SomeArray)); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-05T13:43:09.180

您可以使用[memset](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man3/memset.3.html)：

```
memset(someArray, 0, sizeof(someArray)); 
```

# updatepanel - 带有用于分页的 ajax 更新面板的中继器控件

> ID：10898402
> 
> 赞同：0
> 
> 时间：2012-06-05T13:39:21.923
> 
> 标签：updatepanel, paging

我已经更改了我的代码。我添加了更新面板和链接按钮

标记

```
 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                                    <ContentTemplate>
                                        <asp:LinkButton ID="btnPrev" runat="server" OnClick="btnPrev_Click">PrevButton</asp:LinkButton>
                                       <asp:TextBox id="txtHidden" style="width: 28px" value="1" runat="server" />
                                        <asp:LinkButton ID="btnNext" runat="server" OnClick="btnNext_Click">NextButton</asp:LinkButton>
                                        <asp:Repeater ID="Repeater1" runat="server" >
                                            <ItemTemplate>
                                                <div class="latnewstitle">
                                                    Date:</div>
                                                <%#DataBinder.Eval(Container.DataItem, "date")%><br />
                                                <div class="latnewstitle">
                                                    title:</div>
                                                <div class="latnewscontent">
                                                    <%#DataBinder.Eval(Container.DataItem, "title")%></div>
                                                <asp:HyperLink ID="lnkDetails" runat="server" NavigateUrl='<%# Eval("item_ID", "~/Details.aspx?ID={0}") %>'>See Details</asp:HyperLink>

                                                <br />
                                                <br />
                                                <hr width="100px" />
                                                <br />
                                            </ItemTemplate>
                                        </asp:Repeater>
                                        </div>

                                    </ContentTemplate>
                                </asp:UpdatePanel> 
```

我的代码在后面

```
 Public Property PgNum() As Integer
    Get
        If ViewState("PgNum") IsNot Nothing Then
            Return Convert.ToInt32(ViewState("PgNum"))
        Else
            Return 0
        End If
    End Get
    Set(value As Integer)
        ViewState("PgNum") = value

    End Set
End Property

Protected Sub Page_Load(sender As Object, e As EventArgs)
    If Not Page.IsPostBack Then
        bindrepeater()
    End If
End Sub 
```

我添加了 bindrepeater 子以便将数据绑定到转发器

```
 Protected Sub bindrepeater()

        Dim strsql As String = "SELECT  * FROM news ORDER BY news.item_ID DESC"
        Dim sqlconn As New SqlConnection

        sqlconn.ConnectionString = ConfigurationManager.ConnectionStrings("mycon").ToString 
        sqlconn.Open()
        Dim cmd As New SqlCommand(strsql, sqlconn) 

    Dim da As New SqlDataAdapter(cmd)
    Dim ds As New DataSet
    da.Fill(ds)
    cnt = ds.Tables(0).Rows.Count
    'Dim table As New DataTable()
    'da.Fill(table)

    Dim pds As New PagedDataSource()
    pds.DataSource = ds.Tables(0).DefaultView
    pds.AllowPaging = True
    pds.PageSize = 5
    pds.CurrentPageIndex = PgNum

    txtHidden.Text = PgNum
    Dim vcnt As Integer = cnt / pds.PageSize
    If PgNum < 1 Then
        btnPrev.Visible = False
    ElseIf PgNum > 0 Then
        btnPrev.Visible = True
    End If
     If PgNum = vcnt Then
        btnNext.Visible = False
    ElseIf PgNum < vcnt Then
        btnNext.Visible = True
    End If

    Repeater1.DataSource = pds
    Repeater1.DataBind()

    sqlconn.Close()
End Sub 
```

'我的分页按钮

```
Protected Sub btnNext_Click(sender As Object, e As System.EventArgs) Handles btnNext.Click
    PgNum += 1
    bindrepeater()
End Sub

Protected Sub btnPrev_Click(sender As Object, e As System.EventArgs) Handles btnPrev.Click
    PgNum -= 1
    bindrepeater()
End Sub

Protected Sub Page_Init(sender As Object, e As System.EventArgs) Handles Me.Init
    bindrepeater()
End Sub 
```

我的问题是我的下一个按钮总是+2，上一个按钮总是-2。

谢谢

# maven - 从 maven 运行 java 服务器

> ID：10898404
> 
> 赞同：9
> 
> 时间：2012-06-05T13:39:27.043
> 
> 标签：maven

我需要从 Maven 运行服务器（在 Java 类中实现），但是如果我使用 exec:java 目标，它将阻止 maven，并且不会传递到连接到服务器的下一个阶段。

有什么方法可以异步运行 exec:java 任务，而不会中断 maven 执行？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T14:25:51.357

您可以使用 exec-maven-plugin 运行 shell 脚本，该脚本将启动您的进程并从中分离（让进程在后台运行）。像这样的东西：

```
<plugin> 
    <groupId>org.codehaus.mojo</groupId> 
    <artifactId>exec-maven-plugin</artifactId> 
    <executions> 
      <execution> 
        <id>start-server</id> 
        <phase>pre-integration-test</phase> 
        <goals> 
          <goal>exec</goal> 
        </goals> 
        <configuration> 
          <executable>src/test/scripts/run.sh</executable> 
          <arguments> 
            <argument>{server.home}/bin/server</argument> 
          </arguments> 
        </configuration> 
      </execution> 
    </executions> 
  </plugin> 
```

run.sh 可能是这样的（对于 U*nix 平台）：

```
#! /bin/sh
$* > /dev/null 2>&1 &
exit 0 
```

这应该够了吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T18:31:46.167

It looks like you can do this with the antrun plugin:

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-antrun-plugin</artifactId>
            <version>1.3</version>
            <configuration>
                <tasks>
                    <java fork="true" spawn="true" classpathref="maven.runtime.classpath" className="fully.qualified.package.App"/>
                </tasks>
            </configuration>
        </plugin> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-22T11:58:14.943

如果您正在运行此服务器类以在 Maven POM 中运行进一步的集成测试步骤，那么实际上最好考虑使用持续集成工具，例如[Jenkins](https://jenkins.io/)，它有很多[插件](https://wiki.jenkins-ci.org/display/JENKINS/Plugins/)可以让您运行自己的类、启动和停止服务器、部署应用程序和许多其他可能性，而且它是免费的。

# c - c语言中指向struct的指针

> ID：10898408
> 
> 赞同：0
> 
> 时间：2012-06-05T13:39:37.693
> 
> 标签：c, pointers, dynamic, struct

我在 c 中的结构有问题。

我有两个结构

```
typedef struct
{
    char isim[256];
    int deger;
    struct ekstra *sonra;
}ekstra;

typedef struct
{
    char *name;
    int val;
    struct ekstra *next;
}node;

/*and main is*/

int main()
{
    int i;
    node dizi[12];

    for(i=0;i<12;i++)
    {
        dizi[i].name = malloc("asdasd"*sizeof(int));
        strcpy (dizi[i].name,"asdasd");
        /*and trouble starts here*/
        **dizi[i].next = malloc(sizeof(ekstra));
        printf("%s",dizi[i].next->isim);**
    } 
} 
```

错误是

> 错误：取消引用指向不完整类型的指针

我怎样才能占有一席之地`dizi[i].next`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T13:44:41.237

`struct ekstra` is not the same as `ekstra`.

Your first struct typedef should be declared as follows:

```
typedef struct ekstra
{
    char isim[256];
    int deger;
    struct ekstra *sonra;
}ekstra; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:14:42.623

> typedef 结构... ekstra;

这意味着：“创建一个名为 ekstra 的类型”。从现在开始，这种类型可以用作任何变量类型（int、char 等）。

> 结构 ekstra *next;

这意味着：在我的程序中某处有某种类型的结构，我不知道它包含什么，但我想指向该类型的元素。这就是*不完全类型*的意思。

要解决您的问题，只需将此行替换为`ekstra *next;`.

* * *

更多与问题没有直接关系的评论：

> dizi[i].name = malloc("asdasd"*sizeof(int));

这是纯粹的废话代码。它的意思是：“在我的程序的ROM部分创建一个常量字符串文字。在这个常量字符串文字中，存储字母“asdasd”和一个空终止字符。然后取这个ROM内存位置的*地址*，这完全不相关我的应用程序，将其转换为整数，以便我得到一个 32 位的无意义数字。然后将这个无意义的数字乘以一个 int 的大小，这对任何人都没有任何意义。然后取这个完全无意义的结果并分配一个基于此的随机动态内存量。然后观察程序崩溃。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-05T13:49:48.297

我不明白代码行之类的

```
malloc("asdasd"*sizeof(int)); 
```

但是，我认为你的问题应该像这样解决

```
dizi[i].next = (ekstra *)malloc(sizeof(ekstra)); 
```

你结构定义应该喜欢

```
typedef struct node{
    int a;
    int b;
    struct node *next;
}node; 
```

# asp.net-mvc-3 - MemoryCache 对象和负载均衡

> ID：10898412
> 
> 赞同：5
> 
> 时间：2012-06-05T13:39:53.970
> 
> 标签：asp.net-mvc-3, iis-7.5, appfabric

我正在使用 ASP .NET MVC 3 编写一个 Web 应用程序。我想使用 MemoryCache 对象，但我担心它会导致负载平衡 Web 服务器出现问题。当我用谷歌搜索时，看起来这个问题已经在服务器上解决了，即使用 AppFabric。如果一家公司有负载平衡的服务器，是否需要确保他们运行 AppFabric 或类似的东西？或者作为开发人员我有什么可以或应该做的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T15:39:51.163

首先，对于 ASP.NET，您应该查看[ASP.NET 缓存](http://msdn.microsoft.com/en-us/library/d59zceh7)而不是 MemoryCache。MemoryCache 是在 .NET 4.0 中引入的通用缓存 API，用于在非 Web 应用程序中提供等效的 ASP.NET 缓存。

您正确地说 AppFabric 解决了多个服务器拥有自己的缓存数据实例的问题，因为它提供了一个可从所有 Web 服务器访问的逻辑缓存。在你将它作为解决问题的方法之前，有几件事需要考虑：

*   它不作为 Windows Server 的一部分提供 - 正如您所说，如果您想使用它，您可以将它安装在您的服务器上。当 AppFabric 发布时，有人建议它将作为下一个 Windows Server 版本的一部分发布，但我还没有看到任何关于 Windows Server 2012 的信息证实了这一点。

*   您需要额外的服务器，或者至少建议您拥有它们。Microsoft 对 AppFabric 的建议是在专用服务器上运行它。这意味着虽然 AppFabric 本身是免费下载的，但您可能会产生额外的 Windows Server 许可费用。说到那个...

*   您可能需要企业版许可证。如果您想使用 AppFabric 的高可用性功能，您只能使用运行企业版的服务器来执行此操作，这是比标准版更昂贵的许可证。

*   毕竟你可能不需要它。其中一些将取决于您的应用程序以及您为什么要使用共享缓存层。如果您担心多台服务器上的缓存可能与数据库（或实际上彼此）不同步，那么明智地使用[SqlCacheDependency](http://msdn.microsoft.com/en-us/library/system.web.caching.sqlcachedependency.aspx)对象*可能*会让您解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-14T21:50:00.823

这篇 CodeProject 文章[Implementing Local MemoryCache Invalidation with Redis](http://www.codeproject.com/Articles/704387/Implementing-Local-MemoryCache-Invalidation-with-R)提出了一种处理您描述的场景的方法。

您没有提到您正在使用的负载平衡的味道：“粘性”或“无状态”。到目前为止，最简单的解决方案是使用粘性会话。

如果你想使用本地内存缓存和无状态负载平衡，你可能会遇到跨服务器失效消息延迟到达的竞争条件。如果您使用 ASP.Net MVC 中常见的 Post-Redirect-Get 模式，这可能会特别成问题。这可以通过使用 cookie 来补充缓存失效广播来克服。我在[这里的一篇博文](http://www.violetdata.com/conflicts-in-distributed-cache-invalidation-stateless-load-balancing-and-post-redirect-get)中详细说明了这一点。

# jsf - 为什么有时会调用多个 JSF 生命周期？

> ID：10898413
> 
> 赞同：0
> 
> 时间：2012-06-05T13:39:57.627
> 
> 标签：jsf, facelets, lifecycle

我将一个简单的 jsf 生命周期监听器连接到我的 webbapp：

```
public class LifeCycleListener implements PhaseListener 
{

@Override
public PhaseId getPhaseId() {
    return PhaseId.ANY_PHASE;
}

@Override
public void beforePhase(PhaseEvent event) {
    System.out.println("START PHASE " + event.getPhaseId());
}

@Override
public void afterPhase(PhaseEvent event) {
    System.out.println("END PHASE " + event.getPhaseId());
}

} 
```

在其中一页上，我有这样的东西：

```
<h:form>
  <h:commandLink id="avdertAddedToMainPage" action="#{topView.showMainPage}">
      Main Page
  </h:commandLink>
</h:form> 
```

其中 topView 是在 faces-config 中配置为请求范围的简单 bean：

```
public class TopView {

public TopView() {
}

public String showAddAdvert()
{
    return "addAdvert";
}

public String showMainPage()
{
    return "itemList";
}

} 
```

让我感到奇怪的是，如果我点击上面的链接，一切似乎都可以正常工作，但根据 LiceCycleListener 的输出，每个阶段在页面加载之前运行了 2 次（昨天我数了 4 次，但这是因为线程问题）向上。这是正常行为吗？如果这表明我的代码中存在某种错误，我应该在哪里寻找它？

我在 Glassfish 3.0.1 上使用 Mojarra 2.0.2

这是我今天尝试的输出。生命周期只有两轮，但昨天我有 4 轮。当我查看昨天的日志时，我发现我有多个线程，所以我猜这与在服务器运行时修改我的应用程序有关。但我仍然不知道 2 轮生命周期是否是一件好事。另请注意，关于设置字符编码的警告很少，但我不知道这是否重要。

```
FINE: [Web-Security] Policy Context ID was: Powypadkowe/Powypadkowe
FINE: [Web-Security] hasUserDataPermission perm: (javax.security.jacc.WebUserDataPermission /faces/AdvertAddedCl.xhtml POST)
FINE: [Web-Security] hasUserDataPermission isGranted: true
FINE: [Web-Security] Policy Context ID was: Powypadkowe/Powypadkowe
FINE: [Web-Security] hasResource isGranted: true
FINE: [Web-Security] hasResource perm: (javax.security.jacc.WebResourcePermission /faces/AdvertAddedCl.xhtml POST)
WARNING: PWC4011: Unable to set request character encoding to UTF-8 from context /powypadkowe, because request parameters have already been read, or ServletRequest.getReader() has already been called
WARNING: PWC4011: Unable to set request character encoding to UTF-8 from context /powypadkowe, because request parameters have already been read, or ServletRequest.getReader() has already been called
INFO: START PHASE RESTORE_VIEW 1
INFO: END PHASE RESTORE_VIEW 1
INFO: START PHASE APPLY_REQUEST_VALUES 2
INFO: END PHASE APPLY_REQUEST_VALUES 2
INFO: START PHASE PROCESS_VALIDATIONS 3
INFO: END PHASE PROCESS_VALIDATIONS 3
INFO: START PHASE UPDATE_MODEL_VALUES 4
INFO: END PHASE UPDATE_MODEL_VALUES 4
INFO: START PHASE INVOKE_APPLICATION 5
INFO: END PHASE INVOKE_APPLICATION 5
INFO: START PHASE RENDER_RESPONSE 6
INFO: ------- some hibernate sql selects -------
INFO: END PHASE RENDER_RESPONSE 6
FINE: SecurityContext: setCurrentSecurityContext method called
FINE: [Web-Security] Policy Context ID was: Powypadkowe/Powypadkowe
FINE: [Web-Security] hasUserDataPermission perm: (javax.security.jacc.WebUserDataPermission /faces/photos/nowy17@mail.pl/Atojest/item_1/1m.jpg GET)
FINE: [Web-Security] hasUserDataPermission isGranted: true
FINE: [Web-Security] Policy Context ID was: Powypadkowe/Powypadkowe
FINE: [Web-Security] hasResource isGranted: true
FINE: [Web-Security] hasResource perm: (javax.security.jacc.WebResourcePermission /faces/photos/nowy17@mail.pl/Atojest/item_1/1m.jpg GET)
WARNING: PWC4011: Unable to set request character encoding to UTF-8 from context /powypadkowe, because request parameters have already been read, or ServletRequest.getReader() has already been called
WARNING: PWC4011: Unable to set request character encoding to UTF-8 from context /powypadkowe, because request parameters have already been read, or ServletRequest.getReader() has already been called
INFO: START PHASE RESTORE_VIEW 1
INFO: END PHASE RESTORE_VIEW 1
INFO: START PHASE APPLY_REQUEST_VALUES 2
INFO: END PHASE APPLY_REQUEST_VALUES 2
INFO: START PHASE PROCESS_VALIDATIONS 3
INFO: END PHASE PROCESS_VALIDATIONS 3
INFO: START PHASE UPDATE_MODEL_VALUES 4
INFO: END PHASE UPDATE_MODEL_VALUES 4
INFO: START PHASE INVOKE_APPLICATION 5
INFO: END PHASE INVOKE_APPLICATION 5
INFO: START PHASE RENDER_RESPONSE 6
INFO: END PHASE RENDER_RESPONSE 6
FINE: SecurityContext: setCurrentSecurityContext method called 
```

还有昨天的日志片段：

```
[#|2012-06-04T22:05:49.158+0200|INFO|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=30;_ThreadName=Thread-1;|END PHASE UPDATE_MODEL_VALUES 4|#]

[#|2012-06-04T22:05:49.158+0200|INFO|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=33;_ThreadName=Thread-1;|START PHASE RESTORE_VIEW 1|#]

[#|2012-06-04T22:05:49.161+0200|INFO|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=31;_ThreadName=Thread-1;|START PHASE RENDER_RESPONSE 6|#]

[#|2012-06-04T22:05:49.162+0200|INFO|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=33;_ThreadName=Thread-1;|END PHASE RESTORE_VIEW 1|#]

[#|2012-06-04T22:05:49.163+0200|INFO|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=33;_ThreadName=Thread-1;|START PHASE APPLY_REQUEST_VALUES 2|#]

[#|2012-06-04T22:05:49.261+0200|INFO|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=32;_ThreadName=Thread-1;|START PHASE APPLY_REQUEST_VALUES 2|#]

[#|2012-06-04T22:05:49.261+0200|INFO|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=33;_ThreadName=Thread-1;|END PHASE APPLY_REQUEST_VALUES 2|#] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:37:25.147

我不知道它是否*应该*这样工作，但它与我对实际发生的情况的观察相符。

# android - 如何将 Hashmap 与适配器一起使用

> ID：10898415
> 
> 赞同：0
> 
> 时间：2012-06-05T13:40:01.143
> 
> 标签：android, listview, drawable

您好，我正在解析一些 json 上的 android 并且我已经能够将 json 解析的数据放入一个列表视图中。但是在我的列表视图中，我也有一些图标，我想根据解析的数据设置状态（我有一些定义它们的状态的键，1 表示启用，0 表示禁用）。我似乎无法将其放在 HashMap 上，有人有任何提示/信息吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:44:30.987

```
HashMap<String,Boolean> map = new HashMap<String,Boolean>();

Collection c = map.values();

Iterator itr = c.iterator();

while(itr.hasNext())
     System.out.println(itr.next());
} 
```

# c# - 单元测试枚举转换器的最佳实践

> ID：10898416
> 
> 赞同：0
> 
> 时间：2012-06-05T13:40:05.543
> 
> 标签：c#, unit-testing, tdd

对这类方法进行单元测试的最佳实践是什么？

```
public VerificationResultCode Translate(int value)
    {
        VerificationResultCode result;

        if (Enum.IsDefined(typeof(VerificationResultCode), (int)value))
            result = (VerificationResultCode)((int)value);
        else
            throw new UnknownResultReturnFromGatewayException();

        return result;
    } 
```

VerificationResultCode 是 Enum 类型，如：

```
public enum VerificationResultCode 
{
        BankingNetworkError = 100,
        NotEqual =101,
        InputFormatError = 102,
        MerchantAuthenticationFailed = 103,

...
} 
```

我们应该为每个 Enum 成员编写一个测试方法，还是只编写**一个**包含大量断言的测试方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:08:42.970

代码几乎太琐碎，无法进行单元测试。您应该对依赖于`VerificationResultCode`也将测试`Translate`功能的行为进行单元测试。一个更大的问题是为什么你需要一个公共翻译函数而不是将它封装在对象中？

# java - 我可以确保我的 Spring ApplicationListener 之一最后执行吗？

> ID：10898417
> 
> 赞同：22
> 
> 时间：2012-06-05T13:40:10.740
> 
> 标签：java, spring, dependency-injection, event-handling

我有几个服务正在侦听 Spring 事件以更改我的底层数据模型。这些都是通过实施来工作的`ApplicationListener<Foo>`。一旦所有`Foo`侦听器都修改了底层数据模型，我的用户界面需要刷新以反映更改（想想`fireTableDataChanged()`）。

有什么方法可以确保特定的侦听`Foo`器始终是最后一个？或者有什么方法可以在所有其他侦听器完成后调用函数？如果这很重要，我正在使用基于注释的布线和 Java 配置。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-05T18:59:12.857

您实现的所有 bean`ApplicationListener`也应该实现[`Ordered`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/core/Ordered.html)并提供合理的订单价值。值越低，你的监听器就会越早被调用：

```
class FirstListener implements ApplicationListener<Foo>, Ordered {
    public int getOrder() {
        return 10;
    }
    //...
}

class SecondListener implements ApplicationListener<Foo>, Ordered {
    public int getOrder() {
        return 20;
    }
    //...
}

class LastListener implements ApplicationListener<Foo>, Ordered {
    public int getOrder() {
        return LOWEST_PRECEDENCE;
    }
    //...
} 
```

此外，您可以实施[`PriorityOrdered`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/core/PriorityOrdered.html)以确保始终首先调用您的一个侦听器。

# c# - 从给定日期获取日期时间

> ID：10898418
> 
> 赞同：1
> 
> 时间：2012-06-05T13:40:16.637
> 
> 标签：c#, asp.net

用户只需输入星期几。例如用户输入星期五。我需要找到给定日期的确切日期，格式如下`dd.MM.yyyy`。但我不知道我是怎么做到的。
例子：

```
label1 - Friday (entered by user)
label2 - 08.06.2012 (found by system) 
```

`label1`只是一个字符串（只是星期五）。它来自 webservice 作为字符串变量。我需要找到日期并与今天进行比较，如果它不等于或小于今天，我给出即将到来的星期五的日期，否则我给出下一周星期五的日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:57:13.673

*“如果它不等于或小于今天，我给出确切的日期，否则我给出下周的日期。”*

假设这意味着您总是返回给定星期几的未来下一个日期，唯一的例外是**今天**是给定的星期几。

```
public static DateTime getNextWeekDaysDate(String englWeekDate)
{
    var desired = (DayOfWeek)Enum.Parse(typeof(DayOfWeek), englWeekDate);
    var current = DateTime.Today.DayOfWeek;
    int c = (int)current;
    int d = (int)desired;
    int n = (7 - c + d);

    return DateTime.Today.AddDays((n >= 7) ? n % 7 : n);
} 
```

让我们测试一下：

```
DateTime Monday   = getNextWeekDaysDate("Monday");    // 2012-06-11
DateTime Tuesday  = getNextWeekDaysDate("Tuesday");   // 2012-06-05  <-- !!! today
DateTime Wednesday= getNextWeekDaysDate("Wednesday"); // 2012-06-06
DateTime Thursday = getNextWeekDaysDate("Thursday");  // 2012-06-07
DateTime Friday   = getNextWeekDaysDate("Friday");    // 2012-06-08 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:47:21.810

1.  创建天数（即星期一 - 0、星期二 - 1 等）；
2.  获取 DateTime.Now DayOfWeek 并以某种方式将其转换为您的枚举值。
3.  计算 Now.DayOfWeek 和用户星期几之间的差异；
4.  使用 DateTime.AddDays(difference).DayofTheWeek;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T13:47:36.433

使用 DateTime.now 获取当前时间
当前日期是 DateTime.Now.DayOfWeek
然后获取用户输入的星期几
然后您的结果是 DateTime.now.AddDays(NowDayOfWeek - UserDayOfWeek)。

# symfony - get('security.context')->isGranted 在功能测试中

> ID：10898419
> 
> 赞同：3
> 
> 时间：2012-06-05T13:40:22.347
> 
> 标签：symfony, phpunit, functional-testing

我想对服务 Symfony2 进行一项功能测试。这个想法是先调用控制器，然后再用函数加载服务。功能是这个：

```
function save($title,$description,$setId,$html,$validate,$articles){
    $articles = explode(',', $articles);

    if (false === $this->container->get('security.context')->isGranted('ROLE_USER')) {
        throw new \Exception("Not allowed");
    }else{
        $profileId  = $this->container->get('security.context')->getToken()->getUser()->getId();
        $userName   = $this->container->get('security.context')->getToken()->getUser()->getUserName();
    }
} 
```

现在我的测试代码是：

```
 $client = static::createClient();

    $crawler = $client->request('GET','/sets/save',
            array(
                    "title"=>"rtyui",
                    "description"=>"aksdjhashdkjahskjdh",
                    "set_id"=>"",
                    "html"=>"",
                    "validate"=>1,
                    "articels"=>"3,4"
                )
        ); 
```

但是我有这些行已经不起作用了：

```
if (false === $this->container->get('security.context')->isGranted('ROLE_USER')) {
        throw new \Exception("Not allowed"); 
```

现在，问题是，我如何进行验证过程？我尝试按照文档所示执行此验证过程：

```
$client = static::createClient(array(), array(
    'PHP_AUTH_USER' => 'username',
    'PHP_AUTH_PW'   => 'pa$$word',
)); 
```

但我得到了同样的错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T07:46:17.257

您也可以通过安全令牌登录用户：

```
$client = static::createClient();
$container = $client->getContainer();
$container->get('security.context')->setToken(
    new UsernamePasswordToken(
        $user, null, 'main', $user->getRoles()
    )
); 
```

在哪里：

1.  `$user`- 具有角色的用户实体实例`ROLE_USER`，
2.  `main`- 您的安全提供商名称

# jcl - 在 JCL 中查找 PS/PDS 是否处于迁移状态

> ID：10898420
> 
> 赞同：0
> 
> 时间：2012-06-05T13:40:27.703
> 
> 标签：jcl

有什么方法可以在 JCL 中找到文件是否处于迁移状态？我需要根据文件的位置在我的 jcl 中添加条件，例如我们如何引用创建、引用、到期日期..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:06:18.483

JCL does not have the ability to query attributes; it is merely a method of referencing where data is, or specifying criteria for creating data.

If you need this type of information, it sounds like you need a REXX procedure. REXX is the primary scripting language for IBM mainframe operating systems. (There are implementations for the LUW world.) In REXX, you have access to several items which can help you:

*   IGGCSI00, the Catalog Interface - this is an interface to most of the data returned by the IDCAMS LISTCAT command.
*   The SYSDSN() function, which is a quick way of determining whether or not a data set exists (along with a few extra status values)
*   The LISTDSI() function, which once you validate with SYSDSN(), retrieves many different pieces of information about a data set. Most of what you are looking for is there.

IGGCSI00 is documented in the *DFSMS Managing Catalogs* book, in the chapter called "Catalog Search Interface User's Guide". The other two are documented in the "TSO/E REXX Reference."

# java - 通过 Twitter OAuth 登录不记得授权

> ID：10898422
> 
> 赞同：4
> 
> 时间：2012-06-05T13:40:47.787
> 
> 标签：java, oauth, twitter-oauth, spring-social

我正在编写一个 Web 应用程序，并且刚刚实现了用户可以使用 spring-social-(core/twitter) 通过 Twitter 登录。

然而，Twitter 的行为很奇怪。在初始身份验证/授权之后，每次我将用户发送到 Twitter 进行身份验证时，Twitter 都会提示再次授权我的应用程序。我查看了连接的 Twitter 个人资料。我的应用程序在那里并正确授权（在我的情况下是读取访问权限）。

我没有请求额外权限的情况。我的应用程序需要的只是读取权限（授权对话框确认了这一点）。

我正在使用`OAuth1Operations`（由返回`TwitterConnectionFactory`）来进行 OAuth 舞蹈并将生成的连接保存在数据库中。我的前端是用 Wicket 1.5 编写的。

当我想通过 Twitter 登录时，我可以通过一次又一次地重新授权我的应用程序来解决此问题，但这很麻烦。有人知道我在这里缺少什么吗？

这是我的代码：

```
TwitterConnectionFactory connectionFactory = (TwitterConnectionFactory) connectionFactoryLocator.getConnectionFactory(Twitter.class);
String callbackUrl = [...];

if (pageParameters.get("oauth_token").isNull() || pageParameters.get("oauth_verifier").isNull()) {
    MultiValueMap<String, String> params = new LinkedMultiValueMap<String, String>();
    params.add("x_auth_access_type", "read");
    OAuthToken token = connectionFactory.getOAuthOperations().fetchRequestToken(callbackUrl, params);

    String url = connectionFactory.getOAuthOperations().buildAuthorizeUrl(token.getValue(), OAuth1Parameters.NONE);

    getSession().setAttribute("twitter_token", token);
    setResponsePage(new RedirectPage(url));
} else {
    String token = pageParameters.get("oauth_token").toString();
    String verifier = pageParameters.get("oauth_verifier").toString();

    OAuthToken previousToken = (OAuthToken) getSession().getAttribute("twitter_token");

    if (previousToken.getValue().equals(token)) {
        AuthorizedRequestToken authorizedRequestToken = new AuthorizedRequestToken(previousToken, verifier);

        OAuthToken accessToken = connectionFactory.getOAuthOperations().exchangeForAccessToken(authorizedRequestToken, null);
        Connection<Twitter> connection = connectionFactory.createConnection(accessToken);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:59:35.673

我找到了解决方案！这里也有详细说明：[简单的 Twitter Oauth 授权，每次都要求提供凭据](https://stackoverflow.com/questions/7578881/simple-twitter-oauth-authorization-asking-for-credentials-every-time)

问题是我每次都特别要求 Twitter 授权我的应用程序。更换：

```
String url = connectionFactory.getOAuthOperations().buildAuthorizeUrl(token.getValue(), OAuth1Parameters.NONE); 
```

和

```
String url = connectionFactory.getOAuthOperations().buildAuthenticateUrl(token.getValue(), OAuth1Parameters.NONE); 
```

解决问题！如果应用程序尚未获得授权，调用 URL 进行身份验证只会请求授权。

# wpf - 在后面的代码中访问 DataTemplate 中的另一个控件

> ID：10898429
> 
> 赞同：0
> 
> 时间：2012-06-05T13:41:01.817
> 
> 标签：wpf, datatemplate

我有一个包含多个控件的 DataTemplate。其中一个控件是一个按钮，需要访问数据模板中的其他控件

```
<DataTemplate>
    <StackPanel>
        <ComboBox x:Name="optionsCombo" >
            <ComboBoxItem Content="Option1" />
            <ComboBoxItem Content="Option2" />
            <ComboBoxItem Content="Option3" />
        </ComboBox>
        <Button Name="DoSomethingButton" Margin="10" Click="DoSomethingButton_Click">Do Something</Button>
    </StackPanel>
</DataTemplate> 
```

在按钮单击事件背后的代码中，如果我尝试按名称访问 ComboBox，如下所示：

```
private void DoSomethingButton_Click(object sender, RoutedEventArgs e)
{
    ComboBoxItem myItem = (ComboBoxItem)optionsCombo.SelectedItem;
} 
```

我收到错误消息：“当前上下文中不存在名称‘optionsCombo’”

那么，如何从按钮单击事件访问 DataTemplate 中的其他控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:55:17.433

您不能那样访问它，因为没有为 DataTemplates 生成代码，即*optionsCombo* ComboBox 在编译时并不真正存在，因此会出现错误。要在后面的代码中操作它，您需要使用 VisualTreeHelper，它在网上有很好的描述。只需获取发件人的父面板，然后按名称找到您的 ComboBox，然后将其转换为正确的类型。你有它！

# file-management - SHFileOperation 替换文件对话框

> ID：10898431
> 
> 赞同：1
> 
> 时间：2012-06-05T13:41:12.313
> 
> 标签：file-management, shfileoperation

目前，SHFileOperation 有一些确认文件替换对话框，询问用户是否要替换文件。我发现这些很有用，但我希望能够修改它们发生的场景。相反，我想先将文件内容与`bool compareFile()`我编写的函数进行比较。然后，如果文件相同，则不会出现文件替换对话框。假设，我已经有一个工作`compareFile()`功能，有没有办法让我做到这一点？感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:36:27.840

您可以使用此接口向 shell 注册回调。

[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776048%28v=vs.85%29.aspx)

[例子](http://www.codeproject.com/Articles/7309/ICopyHook-implementation)

# html - 圆角导航栏

> ID：10898433
> 
> 赞同：2
> 
> 时间：2012-06-05T13:41:22.017
> 
> 标签：html, css

嗨，当我写作时，我在导航栏上圆角时遇到了麻烦 - `border-radius: 15px;` 它环绕了所有角落，`<a>`但我只想圆形，`<li>`所以只有整个工具栏的边距。

这是一个[小提琴](http://jsfiddle.net/HYhBe/14/)。

谢谢

**编辑**

只希望 home 和 contact 被四舍五入

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T13:55:40.253

这也有效：

```
ul#list-nav li {
   border:2px solid blue;
   float:left;
   overflow:hidden;
}

li.first{
   border-top-left-radius:15px;
   border-bottom-left-radius:15px;
}
li.last{
    border-top-right-radius:15px;
   border-bottom-right-radius:15px;
} 
```

[这是**更新**的小提琴](http://jsfiddle.net/HYhBe/31/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T14:05:10.043

圆角第一个和最后一个 li 元素。尝试

```
:first-child and :last-child selectors 
```

查看**现场演示**：http: [//jsfiddle.net/HYhBe/33/](http://jsfiddle.net/HYhBe/33/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T14:01:28.013

添加两个新类；一个圆左角和一个圆右角，并将它们分别应用于第一个和最后一个元素。

[小提琴](http://jsfiddle.net/QFZwq/)

```
.round_left {
    border-radius: 15px 0 0 15px;   
}

.round_right {
    border-radius: 0 15px 15px 0;   
} 
```

```
<ul id="list-nav">
    <li><a href="#" class="round_left">HOME</a></li>
    <li><a href="#">SERVICES</a></li>
    <li><a href="#">GALLERY</a></li>
    <li><a href="#">THE WAY WE WORK</a></li>
    <li><a href="#" class="round_right">CONTACT</a></li>
</ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T13:47:01.283

链接更新 - [http://jsfiddle.net/HYhBe/24/](http://jsfiddle.net/HYhBe/24/)

ul#list-nav li -> 浮动：左 & 溢出：隐藏；

您可以删除显示内联。li 是块级元素。

```
ul#list-nav li {
   border-radius: 15px; 
   float:left;
   overflow:hidden;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T14:00:06.187

-- 对于更新的问题 --

从 'ul#list-nav li a' 中删除边框半径属性并添加到您的 CSS 文件中：

```
ul#list-nav li:first-child a{ border-radius: 15px 0 0 15px;} 
ul#list-nav li:last-child a{ border-radius: 0 15px 15px 0;} 
```

# excel - POI 3.6 的下拉列表

> ID：10898435
> 
> 赞同：0
> 
> 时间：2012-06-05T13:41:31.220
> 
> 标签：excel, drop-down-menu, apache-poi

您能否建议我如何在 Excel 工作表列中使用 POI 3.6 创建下拉列表？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T09:57:54.040

尝试这个，

```
{
   CellRangeAddressList addressList = 
   new CellRangeAddressList(1,10,columnIndexFromHeaderList,columnIndexFromHeaderList);
   DVConstraint dvConstraint = 
   DVConstraint.createExplicitListConstraint(stringArray);
   dataValidation = new HSSFDataValidation(addressList,dvConstraint);                      
   dataValidation.setSuppressDropDownArrow(false);
   sheet.addValidationData(dataValidation );
} 
```

# javascript - 带有句柄的jQuery div旋转

> ID：10898436
> 
> 赞同：-1
> 
> 时间：2012-06-05T13:41:33.390
> 
> 标签：javascript, jquery

我想旋转 div，但是用 a `handle ( button on its top-right corner )`，我试过但我没有成功，所以如果有任何插件可以为我完成这项工作，请告诉我？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:52:00.677

您可能可以在这里找到解决方案： [jQuery - CSS - Rotate Div by drag mouse event](https://stackoverflow.com/q/3438568/982112) 这是一个类似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:51:54.280

使用下一个/上一个演示中的下一个按钮查看[jQuery Cycle 插件](http://jquery.malsup.com/cycle/)，特别是[中间演示（第 2 部分） ：](http://jquery.malsup.com/cycle/int2.html)

**HTML**

```
<div id="divWrapper">
    <a href="#" id="handle">Rotate</a>

    <div id="divRotate">
        <div>This is content One...</div>
        <div>This is content Two...</div>
        <div>This is content Three...</div>
        <div>This is content Four...</div>
    </div>
</div>​ 
```

**JS**

```
$('#divRotate').cycle({ 
    fx:     'fade', 
    speed:  'fast', 
    timeout: 0, 
    next:   '#handle'
});​ 
```

**[在这里演示](http://jsfiddle.net/U7Scj/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T13:53:22.680

如果它不必是 jquery，你可以使用 CSS3。

我用 CSS3 旋转制作了一个小示例脚本。

```
<style>
.divClass:hover {
    -webkit-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
}
.divClass {
    -webkit-transition: all 0.6s ease-in-out;
    -moz-transition: all 0.6s ease-in-out;
    -o-transition: all 0.6s ease-in-out;
    -ms-transition: all 0.6s ease-in-out;
    width: 200px;
    height: 200px;
    background-color:orange;
}

</style>

<div class="divClass">
    <button style="float: right">42</button>
</div> 
```

你可以把它放在一个 html 文件中，看看它是否是你想要的。

我实际上不知道它是否被所有主要浏览器支持，我只是在 Chrome 中测试了它。

# javascript - 链接标签调用js函数不起作用

> ID：10898438
> 
> 赞同：0
> 
> 时间：2012-06-05T13:41:47.057
> 
> 标签：javascript, jquery, hyperlink, tags

我有一个带有经典菜单的静态站点，例如：主页、服务、联系方式等链接。 **我正在尝试做的是减小网站的大小。** 因此，我试图只保留一个页面，然后（当点击发生时）动态更改内容，而不是使用多个页面作为链接（如 home.html、services.html）。

html代码（示例）：

```
<a href="javascript:this.location.reload()" onClick="ContactClick();">contact</a>
<h1>old text</h1> 
```

js代码：

```
function ContactClick() {
    $('h1').html('new text to change, but it doesnt work, yay!');   
} 
```

有趣的事情发生了。如果我点击链接，“旧文本”确实会变成“新文本”，但仅持续 1 秒！然后，它立即变回“旧文本”！

我试过这样调用：`<a href="javascript:ContactClick();">`它工作得很好，但是当点击事件发生时我仍然需要刷新页面（我在网站上有一些变色的东西，哈哈）。

1.  有没有另一种方法来减少网站的大小，或者我的想法很好？ **或者**
2.  是否有包括刷新站点和从链接调用 js 结点的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T13:44:20.520

Perhaps you shouldn't be reloading the page in your `href`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:09:05.590

您不需要减小站点的大小。仅包含文本的静态页面很小，即使在第一次加载时也只需几分之一秒。之后，它们将在缓存中并立即加载。

另一方面，如果将所有文本放在一个页面中，再加上一些 javascript 代码，结果不会比静态页面小而是*大。*

此外，您应该记住，javascript 并不总是有效。例如，许多人出于安全原因或避免刺激性广告禁用 javascript。因此，导航永远不应该依赖于javascript。至少，在禁用 javascript 的情况下，您应该有适用于静态页面的 noscript 部分。（但这会使页面更大。）

# java - java中的泛型二叉搜索树

> ID：10898448
> 
> 赞同：1
> 
> 时间：2012-06-05T13:43:04.763
> 
> 标签：java, generics, binary-search-tree

我想实现一个通用类型的二叉搜索树。声明如下：

```
public BTNode<T> {}

public class BinaryTree<T extends Comparable<T>> {}

public class BinarySearchTree <T extends Comparable<T>> extends BinaryTree<T> {} 
```

现在我编写了一个名为 Entry 的类，并希望将此类的实例存储在 BinarySearchTree 中。

```
public class Entry implements Comparable{
private String firstName, lastName, address, phoneNumber;

public Entry(String fName, String lName, String address, String phoneNum) {
    this.firstName = fName;
    this.lastName = lName;
    this.address = address;
    this.phoneNumber = phoneNum;
}

public int compareTo(Object arg0) {
    // TODO Auto-generated method stub
    return 0;
}
} 
```

但是当我声明时`BinarySearchTree<Entry> bst`，总是有一个编译错误说：

> “绑定不匹配：Entry 类型不是 BinarySearchTree 类型的有界参数 > 的有效替代品”

我对 Java 中的泛型类型还是很陌生。有人可以帮我解决问题吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T13:47:51.357

您的`Entry`类需要实现`Comparable<Entry>`而不是 raw `Comparable`，因为 raw`Comparable`不匹配`Comparable<T>`。

```
public class Entry implements Comparable<Entry> { ... } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T13:48:12.620

实现您的 Entry 类`Comparable<Entry>`，使其符合 BinaryTree 的约定。

合同说*“扩展（或实现）类型 Comparable<T> 的所有类型 T”*。在您将“T”替换为“Entry”时，您会看到这是必需的：`Entry extends Comparable<Entry>`

# jquery - 遇到对象的“属性‘getItem’# is not a function" in DataTables in Chrome The DataTables search is not working in Chrome. My code works fine in Firefox. I checked the Chrome console: Uncaught TypeError: Property 'getItem' of o 问问题 问问题 2012-06-05T13:43:05.070 321 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. The DataTables search is not working in Chrome. My code works fine in Firefox. I checked the Chrome console: Uncaught TypeError: Property 'getItem' of object # is not a function This is my code: html: " . $post['title'] . "

## by: " . $post['username'] . "

" . str_replace("\r\n", "", nl2br(htmlspecialchars($post['body']))) . "'";?> This is the jQuery: $(document).ready( function () { $('#announcement').dataTable(); $('#user').dataTable(); $('#school').dataTable(); } ); You can use memset: memset(someArray, 0, sizeof(someArray)); jqueryhtmlgoogle-chromedatatables 4 0 回答 0 Related 1 jquery-ui - jQuery UI 对话框 - 无法在对话框内容中插入表格 1 mysql - SQL 查询与连接计数多个结果每条记录按计数排序 1 ios - 从 iOS 中的日期删除时区偏移 1 php - 动态 PHP 正则表达式 1 windows-mobile - 如何删除 Windows Mobile 6.5 上多余的开始菜单图标？ 1 c# - 在控制台应用程序中将 HTML 标记传递到 RazorEngine 2 mysql - MySQL 查询检查用户评估 2 javascript - 通过操作 URL 设置单选按钮值 3 node.js - Node.js mongodb 设置默认安全变量 2 iphone - 我们如何才能解除我们不再使用它的视图？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10898449
> 
> 赞同：2
> 
> 时间：
> 
> 标签：jquery, html, google-chrome, datatables

The DataTables search is not working in Chrome. My code works fine in Firefox.

I checked the Chrome console: `Uncaught TypeError: Property 'getItem' of object #<Object> is not a function`

This is my code:

html:

```
<table class="table-announcement" id="announcement">
<thead>
    <tr>
        <th class="header">Announcement</th>
        <th class="header">Date</th>
        <th class="header">Posted by</th>
    </tr>
</thead>
<tbody>
<?php foreach ($announcement as $post): ?>
    <?php $msg = "'<h1>" . $post['title'] . "</h1><h2>by: " . $post['username'] . "</h2><br/>" . str_replace("\r\n", "", nl2br(htmlspecialchars($post['body']))) . "'";?>
     <tr>
         <td><a href="javascript:;" class="prompt" onclick="$.prompt(<?php echo $msg;?>)"><?php echo $post['title'];?></a></td>
         <td><?php echo $post['date'];?></td>
         <td><?php echo $post['username'];?></td>
     </tr>
<?php endforeach;?>
</tbody> 
```

This is the jQuery:

```
$(document).ready( function () {
    $('#announcement').dataTable();
    $('#user').dataTable();
    $('#school').dataTable();
} ); 
```

| Announcement | Date | Posted by |
| --- | --- | --- |
| [](javascript:;) |  |  |

# event-handling - Register events

> ID：10898453
> 
> 赞同：0
> 
> 时间：2012-06-05T13:43:16.387
> 
> 标签：event-handling, revit, revit-api

I'm trying to register the DialogBoxShowing event of the UIControlledApplication. But I cannot use the OnStartup / OnShutdown implementation of the IExternalApplication interface. The best I could come up with is...

```
 public delegate void Handeler(object sender, DialogBoxShowingEventArgs e);

    public void RegesterDialogEvent(UIControlledApplication uicApp)
    {
        UIAppEventHandlers1 uaeh1 = new UIAppEventHandlers1();
        Handeler hdlr = new Handeler(UIAppEventHandlers1.UIAppEvent_DialogBoxShowing_Handler);

        uicApp.DialogBoxShowing += hdlr;

    } 
```

But i'm getting the "Cannot implicitly convert type 'TaskDialogEvent_01.Form1.Handeler' to 'System.EventHandler Autodesk.Revit.UI.Events.DialogBoxShowingEventArgs> " error. My 'UIAppEventHandlers1' method has the same signature as the Handler. What am I doing wrong and can anyone provide an example? Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:36:00.370

您可能想要使用您创建的 uaeh1 实例：

```
UIAppEventHandlers1 uaeh1 = new UIAppEventHandlers1();
uicApp.DialogBoxShowing += uaeh1.UIAppEvent_DialogBoxShowing_Handler; 
```

这仍然很奇怪，因为您刚刚新建了该对象。

你说你不能像下面这样在应用类中注册/注销？

```
public Result OnStartup(UIControlledApplication app)
{
    app.DialogBoxShowing += OnDialogBoxShowing;
    return Result.Succeeded;
}

public Result OnShutdown(UIControlledApplication app)
{
    app.DialogBoxShowing -= OnDialogBoxShowing;
    return Result.Succeeded;
}

void OnDialogBoxShowing(object sender, DialogBoxShowingEventArgs args)
{
} 
```

根据我的经验，使用 DialogBoxShowing 事件处理对话框并不是最好的方法。我建议研究更新的故障处理 API。

# android - Different interface for incoming calls

> ID：10898455
> 
> 赞同：1
> 
> 时间：2012-06-05T13:43:25.937
> 
> 标签：android, user-interface, phone-call

I want to know if its possible to have a different UI for incoming calls. Is it possible to launch an activity with two buttons, ACCEPT and REJECT (similar to Android UI), when my app detects an incoming call and when user press accept or reject have the functionality as android call accept and reject. I want only the UI to be changed. Is it possible?

# ruby - How do I match a UTF-8 encoded hashtag with embedded punctuation characters?

> ID：10898456
> 
> 赞同：-1
> 
> 时间：2012-06-05T13:43:27.600
> 
> 标签：ruby, regex, hashtag

I want to extract #hashtags from a string, also those that have special characters such as `#1+1`.

Currently I'm using:

```
@hashtags ||= string.scan(/#\w+/) 
```

But it doesn't work with those special characters. Also, I want it to be UTF-8 compatible.

How do I do this?

EDIT:
If the last character is a special character it should be removed, such as `#hashtag,` `#hashtag.` `#hashtag!` `#hashtag?` etc...

Also, the hash sign at the beginning should be removed.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:03:55.050

### 解决方案

你可能想要这样的东西：

```
'#hash+tag'.encode('UTF-8').scan /\b(?<=#)[^#[:punct:]]+\b/
=> ["hash+tag"] 
```

请注意，开始时需要零宽度断言以避免将井号捕获为匹配的一部分。

### 参考

*   [字符串#编码](http://ruby-doc.org/core-1.9.3/String.html#method-i-encode)
*   [Ruby 的 POSIX 字符类](http://www.ruby-doc.org/core-1.9.3/Regexp.html#label-Character+Classes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:54:22.203

这个怎么样：

```
@hashtags ||=string.match(/(#[[:alpha:]]+)|#[\d\+-]+\d+/).to_s[1..-1] 
```

照顾 #alphabets 或 #2323+2323 #2323-2323 #2323+65656-67676

还删除开头的#

或者，如果您希望它以数组形式出现：

```
 @hashtags ||=string.scan(/#[[:alpha:]]+|#[\d\+-]+\d+/).collect{|x| x[1..-1]} 
```

哇，这花了这么长时间，但我仍然不明白为什么能`scan(/#[[:alpha:]]+|#[\d\+-]+\d+/)`工作，但不能`scan(/(#[[:alpha:]]+)|#[\d\+-]+\d+/)`在我的电脑上工作。不同之处在于`()`第二次扫描语句。当我使用 with`match`方法时，这没有任何效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:52:07.143

这应该有效：

```
@hashtags = str.scan(/#([[:graph:]]*[[:alnum:]])/).flatten 
```

或者，如果您不希望主题标签以特殊字符开头：

```
@hashtags = str.scan(/#((?:[[:alnum:]][[:graph:]]*)?[[:alnum:]])/).flatten 
```

# terminal - 当我使用“tail –f catalina.out”时，终端变得无响应

> ID：10898460
> 
> 赞同：0
> 
> 时间：2012-06-05T13:43:38.273
> 
> 标签：terminal

设置：Mac OSX 10.6.8，终端 2.1.2 (273.1)

输入某些命令后，我的终端有时会变得无响应。一个例子是当我在 catalina.out 文件上加上一个尾巴，尽管它也发生在其他时间。

我放尾巴时采取的步骤的一个例子。

我去启动文件夹

```
cd /Applications/Tomcat/apache-tomcat-6.0.16/bin 
```

输入启动命令

```
sh startup.sh 
```

转到我的日志文件夹

```
cd /Applications/Tomcat/apache-tomcat-6.0.16/logs 
```

并在 catalina.out 文件上加上尾巴

```
tail -f catalina.out 
```

这一切正常，终端窗口显示正在使用的进程。但是，如果我尝试在终端中输入其他内容，它会变得无响应。如果我按向上或向下箭头来获取列表，那么我得到的所有命令都是向上的“^[[A”和向下的“^[[B”。

当我输入 eg`"cd .."`并按回车时，什么也没有发生

为什么终端变得没有响应，我怎样才能让它执行我的命令？目前，每次发生这种情况时，我都必须非常终端，这有点烦人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:48:32.027

不要使用 tail -f

相反，当你想运行它而不是

```
sh startup.sh 
```

跑：

```
sh catalina.sh run 
```

它会将所有内容记录到窗口中。

或者您可以打开另一个终端并从那里执行您的 tail -f 操作！

# c# - 如何从文件路径加载新的应用程序域？

> ID：10898461
> 
> 赞同：1
> 
> 时间：2012-06-05T13:43:39.240
> 
> 标签：c#, asp.net, .net, reflection

我很抱歉这是加载 dll 的经典问题。但我无法解决这个基本问题：我有一个插件文件路径，我想将这些程序集加载到新域中，但我不能这样做。首先; 这是一个网络应用程序，我的代码如下：感谢您的帮助：

```
 foreach (var filePath in arryFiles)
                {
                    Assembly asm = Assembly.LoadFile(filePath.ToString());
                    AppDomainSetup domainSetup = new AppDomainSetup();
                    domainSetup.ApplicationBase = AppDomain.CurrentDomain.BaseDirectory;
                    domainSetup.DisallowBindingRedirects = false;
                    domainSetup.DisallowCodeDownload = true;
                    domainSetup.LoaderOptimization = LoaderOptimization.SingleDomain;
                    domainSetup.ConfigurationFile = AppDomain.CurrentDomain.SetupInformation.ConfigurationFile;
                    ApplicationHost = AppDomain.CreateDomain("Ops.Mgr.Service", null, domainSetup);
                    // how to load into domain my assembly...

                } 
```

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:23:24.700

您想将程序集加载到相同的应用程序域还是不同的应用程序域？
这是在不同的应用程序域中加载程序集的解决方案：将[DLL 加载到单独的应用程序域中](https://stackoverflow.com/questions/88717/loading-dlls-into-a-separate-appdomain)

在同一个应用程序域中加载程序集：[我可以在运行时加载 .NET 程序集并实例化只知道名称的类型吗？](https://stackoverflow.com/questions/465488/can-i-load-a-net-assembly-at-runtime-and-instantiate-a-type-knowing-only-the-na)

# ant - XJC: migrating ant task from JAXB to JDK 1.6

> ID：10898463
> 
> 赞同：5
> 
> 时间：2012-06-05T13:44:10.533
> 
> 标签：ant, jaxb, tostring, jdk1.6, xjc

We have migrated to Java 1.6 and as part of the there is a re-write of the ant tasks that used the older xjc ant task to use the executable: xjc.exe provided in Java 1.6

We also need to retain older ant task parameters like using commons-lang plugin to generate toString() methods in the generated value objects.

Earlier:

```
<target name="generate_vos" description="Compile all Java source files">
    <echo message="Compiling the schema..." />
    <taskdef name="xjc" classname="com.sun.tools.xjc.XJCTask">
        <classpath refid="ERPSimulator.classpath"/>
    </taskdef>
    <delete dir="${jaxb.src}" />
    <mkdir dir="${jaxb.src}" />
    <xjc schema="${jaxb.schema}/SOAPClientObjects.xsd" package="xxx.jaxb.vo" destdir="${jaxb.src}">
        <arg value="-Xcommons-lang" />
        <arg value="-Xcommons-lang:ToStringStyle=SIMPLE_STYLE" />
        <produces dir="${jaxb.src}" includes="**/*.java" />
    </xjc>
</target> 
```

Now:

```
 <target name="generate_vos" description="Compile all Java source files">       
        <delete dir="${jaxb.src}" />
        <mkdir dir="${jaxb.src}" />
        <echo message="Compiling the schema..." />
         <exec executable="xjc">
             <arg value="-extension"/>
             <arg value="-d"/>
             <arg value="${jaxb.src}"/>
             <arg value="-p"/>
             <arg value="xxxx.jaxb.vo"/>
             <arg value="${jaxb.schema}/SOAPClientObjects.xsd"/>        
             <arg value="-Xcommons-lang"/>
             <arg value="-Xcommons-lang:ToStringStyle=SIMPLE_STYLE" />
         </exec>
</target> 
```

However, running the new task results in errors as the -Xcommons* plugins are not carried forward in this version. I have explicitly set the plugin jar files for the commons-lang toString plugin in the path too with no luck.

Any idea how to make XJC.exe generate the toString() method for the resultant Objects?

Thanks!

# javascript - 在 JS 中遇到全局变量的问题

> ID：10898464
> 
> 赞同：1
> 
> 时间：2012-06-05T13:44:12.490
> 
> 标签：javascript, variables, global-variables

以下代码用于跟踪用户位置，

```
var curr_loc; //global varible
function displayLocation(loc) {
    currLat = loc.coords.latitude;
    currLon = loc.coords.longitude;
    curr_loc = currLat + "," + currLon;
    alert(curr_loc); //Displaying latitude and longitude values 
}

function foo() {
    navigator.geolocation.getCurrentPosition(displayLocation);
    alert(curr_loc); //undefined
}
foo(); 
```

如何在 foo 方法中访问位置值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:48:43.997

`navigator.geolocation.getCurrentPosition(displayLocation)`在位置建立*之前*返回，并且`displayLocation`会在将来某个位置可用时调用。`curr_loc`返回后一段时间未定义`navigator.geolocation.getCurrentPosition()`，因为`displayLocation`尚未调用。

# javascript - Javascript 数组、对象、日期未定义

> ID：10898487
> 
> 赞同：2
> 
> 时间：2012-06-05T13:45:24.733
> 
> 标签：javascript, internet-explorer-9

有史以来最奇怪的情况，但我已经在三台 PC 上重现了它。只发生在 Internet Explorer 9（不是 8，只有 9）中。

它发生在我朋友的网站上，这不是插件，但这里是网址：[IE bug with javascript](http://www.kennisateliers.be/nl/programma_%28custom%29/2012/kennisateliers_gaat_weer_vreemd-32.html "带有 javascript 的 IE 错误")

当您单击其中一个链接时会发生魔术错误，例如“Nog fiscaal interessant ...”

这将打开一个弹出窗口，其中包含一个包含电影播放器​​的 iframe。电影框架在 IE9 中抱怨“未定义对象”、“未定义数组”、“未定义日期”。

会发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T09:04:28.757

最后通过动态加载 iframe 来解决。

[在http://code.google.com/p/simplemodal/issues/detail?id=73](http://code.google.com/p/simplemodal/issues/detail?id=73)上找到了解决方案

在此处复制/粘贴以供将来参考：

> 我认为这个问题更多地与 IE9 如何处理 iframe 以及随后在其中加载 javascript 相关......我的解决方法是仅设置 iframe src 'onShow' 回调函数，并且不知何故我停止了这些对象未定义的错误。希望这可以帮助。
> 
> 函数 onShow(){ jQuery("iframe").attr("src", "/goto/site"); }

另一个可能包含更多信息的链接：http: [//msdn.microsoft.com/en-us/library/gg622929%28v=VS.85%29.aspx ?ppud=4](http://msdn.microsoft.com/en-us/library/gg622929%28v=VS.85%29.aspx?ppud=4)

实现的解决方案是在弹出窗口完全呈现后加载 iframe src，而不是先加载 iframe 然后显示弹出窗口。

感谢所有调查人员！

# python - GAE 的 webapp2_extra.i18n 无法在 MacOSX 上导入 babel

> ID：10898491
> 
> 赞同：2
> 
> 时间：2012-06-05T13:45:45.467
> 
> 标签：python, google-app-engine, webapp2

我按照教程在我的 GAE 项目中启用 i18n 功能：

[http://webapp-improved.appspot.com/tutorials/i18n.html](http://webapp-improved.appspot.com/tutorials/i18n.html)

但是，在我 easy_install babel 之后，由于以下错误，我无法访问我的 GAE：

```
File "/Users/myname/Developer/GAE/project/webapp2_extras/i18n.py", line 16, in <module>
    import babel
ImportError: No module named babel 
```

我试图在我的命令行中加载它：

```
 $ python2.7
Python 2.7.1 (r271:86832, Jul 31 2011, 19:30:53) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import babel
>>> 
```

它工作正常！

我怀疑问题是GAE无法加载库，但我不知道如何解决。

请帮忙，谢谢！

我的工作环境是 MaxOSX Lion，Python2.7，GAE 1.6.6。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:22:20.453

[文档](http://webapp-improved.appspot.com/tutorials/i18n.html)状态_

> 对于 App Engine，下载 babel 和 pytz 并将这些库添加到您的应用目录。

这意味着您必须将它们复制到 app 目录，而不是 easy_install，因为 SDK 具有模拟生产环境的导入限制。

# asp.net - 有条件地在 HTML 元素上设置 Disabled 和 Checked 属性

> ID：10898493
> 
> 赞同：2
> 
> 时间：2012-06-05T13:45:48.867
> 
> 标签：asp.net, html

我在 asp GridView 的模板字段中有一个按钮和一个复选框。我希望根据数据字段到期有条件地设置按钮的禁用属性和复选框的选中属性。如果 Expiration 等于 Permanent，则应禁用该按钮并选中该复选框。如果不是，则启用该按钮且未选中复选框。我试过了：

```
<input type="button" id="expiration" disabled='<%# (string)Eval("Expiration") == "Permanant" ? "disabled" : "enabled" %>' value='<%# Eval("Expiration") %>'/>
<input type="checkbox" id="permanent" checked= '<%# (string)Eval("Expiration") == "Permanant" ? "checked" : "unchecked" %>'/> 
```

但似乎只列出 disabled 和 checked 属性会导致所有按钮被禁用并选中所有复选框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T13:48:22.573

`disabled`并且`checked`是布尔属性。他们**只**接受值`disabled`和`checked`分别。

如果您不希望默认选中/禁用该控件，则*根本不要包含该属性*。

由于它们是布尔属性，您可以省略除值之外的所有内容。

```
<input type="button" 
       id="expiration" 
       <%# (string)Eval("Expiration") == "Permanant" ? "disabled" : "" %> 
       value='<%# Eval("Expiration") %>'>
<input type="checkbox" 
       id="permanent" 
       <%# (string)Eval("Expiration") == "Permanant" ? "checked" : "" %>> 
```

不过，您的复选框应该有一个明确的值，请参阅 DTD 中的注释：

```
 value       CDATA          #IMPLIED  -- Specify for radio buttons and checkboxes -- 
```

# asp.net-mvc - 实现普通用户/通行证、Twitter 和 Facebook 身份验证

> ID：10898494
> 
> 赞同：1
> 
> 时间：2012-06-05T13:45:51.440
> 
> 标签：asp.net-mvc, facebook, authentication, twitter, login

我创建了一个面向公众的网站，允许您使用用户名/密码、Twitter 或 Facebook 登录。

首次使用 Twitter 登录时（例如），在我的数据库中创建了一个用户，其昵称与 Twitter 屏幕名称匹配。我希望这个昵称**始终**是独一无二的。

问题是在某些情况下，具有该昵称的用户已经存在，因此无法添加该用户。我不确定这个问题的公认方法，到目前为止我能看到的唯一解决方案是要求用户覆盖他们的昵称，但这似乎不太优雅。

昵称需要唯一的原因不是代码问题，而是界面问题，例如有论坛，我希望每个用户都由他们的昵称唯一标识。

有没有其他人可以建议处理这个问题的方法？

* * *

编辑：应一些回复的要求，我将澄清一个例子：

假设我有一个名为 Joe Bloggs 的用户，他是我网站上的成员。他不是 Twitter 或 Facebook 的成员。他在我网站上的昵称是 JoeBloggs。

然后，另一个 Joe Bloggs 出现了，他想用他的 Twitter 帐户登录。他的 Twitter 名称是 JoeBloggs，因此当他使用 Twitter 登录时，我的系统会尝试自动将他的昵称设置为 JoeBloggs。但是，这个昵称已经存在。在这样的昵称重叠的情况下，正常或最佳做法是什么？我唯一能想到的就是提示用户指定一个不同且唯一的昵称（仅用于在我的网站上显示）。

我问的原因是，对于允许您通过 Facebook、Twitter、Yahoo 登录的网站来说，这一定是一个常见问题——从所述网站返回的名称一定有重叠，所以我想知道正常的流程是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:46:59.437

也许您可以尝试更改数据库本身 - 获取像“nickOrigin”这样的字段，允许存在像“[yourSite]”、“twitter”等值，并且仅在没有具有相同 nick 和 nickOrigin 的条目存在时才允许新条目. 执行查询以修改现有用户的 nickOrigin 为 [yourSite]，并且事情应该是向后兼容的，或者至少我是这样想象的 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:08:36.663

您能否使用 Twitter API 确认他们确实是他们所说的 Twitter ID，如果没有 Twitter 帐户，允许他们通过其他方式进行身份验证（Google+、Facebook、LinkedIn、旧式用户名和密码）？允许用户使用他们不拥有的 Twitter ID 登录似乎是在要求一个受伤的世界。

# jquery - 在外部服务器中访问 JSON

> ID：10898496
> 
> 赞同：1
> 
> 时间：2012-06-05T13:45:52.747
> 
> 标签：jquery, json

我有外部 json URL。

[http://kun6858.iptime.org:8080/apps/list/?app_mb_no=9](http://kun6858.iptime.org:8080/apps/list/?app_mb_no=9)

我用 jquery $.getJSON(..) 访问这个 json

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<script>
$.getJSON(
    "http://kun6858.iptime.org:8080/apps/list/?jsoncallback=?",
    {
        app_mb_no : 9
    },
    function(data) {
        console.log(data);
    }
);
</script>
</body>
</html> 
```

但我无法使用上述源访问 JSON。

我不知道如何访问外部服务器的 json。我的来源有问题吗？还是 JSON？

* * *

供您参考，这是屏幕截图..

![在此处输入图像描述](../Images/8b396ff481c1afd8127ba25edd2d9809.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:56:07.310

三点：

1.  `app_mb_no`在你的 ajax 调用中不需要值？例如`app_mb_no : 9`
2.  您可以使用`.ajax`等价物： `$.ajax({ url: url, dataType: 'json', data: data, success: callback });`
3.  您是否在 Web 服务器下运行过代码？你需要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:49:03.307

您需要使用 JSONP 进行跨域访问。因此，您必须修改您的 AJAX 调用。

这种情况的一个很好的解释是在这里：

[http://www.jquery4u.com/json/jsonp-examples/](http://www.jquery4u.com/json/jsonp-examples/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:53:18.563

我不知道它是如何工作的，但这解决了我的问题。

在 ServletResponse 中添加这个

```
 response.setHeader("Access-Control-Allow-Origin", "*");
    response.setContentType("Content-Type:application/json;charset=UTF-8"); 
```

和 HTML

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<script>
var url = "http://localhost:8080/apps/list/?app_mb_no=9";

if ($.browser.msie && window.XDomainRequest) {
    // Use Microsoft XDR
    var xdr = new XDomainRequest();
    xdr.open("get", url);
    xdr.onload = function () {
    var JSON = $.parseJSON(xdr.responseText);
    if (JSON == null || typeof (JSON) == 'undefined')
    {
        JSON = $.parseJSON(data.firstChild.textContent);
    }
    processData(JSON);
    };
    xdr.send();
} else {
          $.ajax({
          type: 'GET',
          url: url,
          processData: true,
          data: {},
          dataType: "json",
          success: function (data) { processData(data); }
          });
}

function processData(data) {
    console.log(data);  
}
</script>
</body>
</html> 
```

如果有人知道更好的方法请教我！！谢谢

# internet-explorer - 将 IE (createPopup) 弹出窗口的背景设置为透明

> ID：10898499
> 
> 赞同：1
> 
> 时间：2012-06-05T13:45:56.323
> 
> 标签：internet-explorer, popup, transparency

我正在使用 IE 的专有**window.createPopup**函数创建一个弹出窗口，虽然弹出窗口看起来很好并显示了我分配给它的内容，但我不知道如何让背景透明。

有谁知道该怎么做？我用谷歌搜索了它，发现我显然应该将身体的**.style.backgroundColor**设置为“**透明**”，但它不起作用。这是我目前正在测试的内容，弹出窗口显示为 300x100 的白色框，看不到任何黄色背景（弹出窗口不透明）。

```
<!doctype html>
<html>
<body bgcolor="yellow">
<script>
var str = '<h1>HELLO WORLD</h1>';
var popupObj = window.createPopup();
if(popupObj) {
    popupObj.document.body.style.border = "1px purple solid";
    popupObj.document.body.style.backgroundColor = "transparent";
    popupObj.document.body.innerHTML = str;
    popupObj.show(10,20,300,100,document.body);
}
</script>
</body>
</html> 
```

我知道它不是跨浏览器兼容的，它不一定是，它是一个基于 ActiveX 的项目。我在 IE9 中进行测试，但我已经在 IE9 的“IE8 模式”中尝试过，它也是“IE7 模式”。结果相同。

# jquery - 如何取消绑定单击已绑定的 div 上的双击事件？

> ID：10898504
> 
> 赞同：0
> 
> 时间：2012-06-05T13:46:27.800
> 
> 标签：jquery

```
 $('#id').bind("dblclick", function (event)
    {
    event.preventDefault();
    });
    $('#id').unbind("click");
    $('#id').bind("click", function ()
    {
    #mycode
    }); 
```

这里调用了双击和单击。我怎样才能一次调用单个事件？

# ios - 如何用格式替换字符串中的空格

> ID：10898509
> 
> 赞同：0
> 
> 时间：2012-06-05T13:46:37.147
> 
> 标签：ios, xcode, string, replace, space

> **可能重复：**
> [如何在 Xcode 中用 + 替换空格](https://stackoverflow.com/questions/7284380/how-do-i-replace-spaces-with-s-in-xcode)

在这个字符串中，我需要替换空格：

```
controller.body = [NSString stringWithFormat:@"http://maps.google.com/maps?q=%@@%@,%@", pinTitle.text, newlatLabel.text, newlogLabel.text]; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-05T13:49:43.263

像：

```
NSString *finalString = [controller.body stringByReplacingOccurrencesOfString:@" " withString: @"+"]; 
```

* * *

```
controller.body = [NSString stringWithFormat:@"http://maps.google.com/maps?q=%@@%@,%@", pinTitle.text, newlatLabel.text, newlogLabel.text];

NSString *finalString = [controller.body stringByReplacingOccurrencesOfString:@" " withString: @"+"];

controller.body = finalString; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:50:58.860

认为你正在寻找这个：

```
 NSString *finalString = [controller.body stringByReplacingOccurrencesOfString:@" " withString:@"+"]; 
```

# assembly - push in 16bit 的用法 - tasm

> ID：10898510
> 
> 赞同：0
> 
> 时间：2012-06-05T13:46:38.040
> 
> 标签：assembly, stack, push, 16-bit, tasm

```
.data    
    SUM DW 250h
.text
     push SUM
     call func
     ....
 func:
      mov bp, sp
      mov ax, [bp + 2]
      inc ax
      mov [bp + 2], ax
      ..... 
```

当我使用 push 指令时，我是推送 SUM 的引用还是值？调用 func 后 SUM 会发生变化吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:47:58.123

您可能想要取消引用您传递给函数的地址

```
.data    
    SUM DW 250h
.text
     push [SUM]
     call func
     ....
 func:
     mov bp, sp
     mov bx, [bp + 2]
     mov ax,[bx]
     inc ax
     mov [bx],ax
     mov [bp + 2], ax
     ..... 
```

这看起来真的很迂回，我确信有更简单的方法，但我没有方便的 tasm 机器。额外的回旋处，因为你不能使用 [ax] :(

# actionscript-3 - Flash Actionscript 3 中的音乐重叠

> ID：10898514
> 
> 赞同：0
> 
> 时间：2012-06-05T13:46:58.523
> 
> 标签：actionscript-3, flash, flash-cs5

我是 AS3 的新手，我正在构建一个完整的 flash 网站，我尝试在其中包含背景音乐和播放、暂停和停止按钮（播放和暂停是同一个按钮）。问题是音乐播放器在页面加载时自动播放，当我点击我网站的 HOME 按钮时，音乐再次播放并与首先播放的音乐重叠，所以我该怎么办..提前谢谢

```
stop();

function goHome (e:MouseEvent):void{
gotoAndStop("HOME");
}
home_btn.addEventListener(MouseEvent.CLICK, goHome);

function goAbout (e:MouseEvent):void{
gotoAndStop("COMPANY");
}
company_btn.addEventListener(MouseEvent.CLICK, goAbout);

function goTestimony (e:MouseEvent):void{
gotoAndStop("TESTIMONY");
}
news_btn.addEventListener(MouseEvent.CLICK, goTestimony);

function goProduct (e:MouseEvent):void{
gotoAndStop("PRODUCT");
}
product_btn.addEventListener(MouseEvent.CLICK, goProduct);

function goContact (e:MouseEvent):void{
gotoAndStop("CONTACT");
}
contacts_btn.addEventListener(MouseEvent.CLICK, goContact);

//imports the necessary as events
import flash.events.Event
import flash.events.MouseEvent;

var isPlaying:Boolean = new Boolean();
var pausePosition:Number = new Number();

//Create an instance of the Sound class
var soundClip:Sound = new Sound();
//Create a new SoundChannel Object
var sndChannel:SoundChannel = new SoundChannel();

//Load sound using URLRequest
soundClip.load(new URLRequest("thousandyears.mp3"));

//Create an event listener that wll update once sound has finished loading
soundClip.addEventListener(Event.COMPLETE, onComplete, false, 0, true);

controller.addEventListener(MouseEvent.MOUSE_DOWN, btnPressController, false, 0, true);
stop_btn.addEventListener(MouseEvent.MOUSE_DOWN, btnPressStop, false, 0, true);

function onComplete(evt:Event):void {
    //Play loaded sound
    sndChannel = soundClip.play();
    isPlaying = true;
}

function btnPressController(evt:MouseEvent):void
{
    switch(isPlaying)
    {
        case true:
            controller.gotoAndStop(2);
            pausePosition = sndChannel.position; 
            sndChannel.stop();
            isPlaying = false;
        break;
        case false:
            controller.gotoAndStop(1);
            sndChannel = soundClip.play(pausePosition);
            isPlaying = true;
        break;
    }
}

function btnPressStop(evt:MouseEvent):void
{
    pausePosition = 0;
    sndChannel.stop();
    controller.gotoAndStop(2);
    isPlaying = false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:58:46.817

此代码在第 1 帧中吗？第 1 帧是否标记为“HOME”？

如果是这样，我会在时间线的开头添加一个新帧（新帧 1）并将代码移入其中。这样，代码仍然在第 1 帧中，“HOME”帧将在第 2 帧中，依此类推。

您需要稍微更新您的代码：

替换`stop()`为`gotoAndStop('HOME');`

# android - 暂停时调用 MediaPlayer onCompletionListener

> ID：10898517
> 
> 赞同：0
> 
> 时间：2012-06-05T13:47:09.190
> 
> 标签：android, media-player

由于某种原因，我的媒体播放器在暂停时完成。现在我看到另一篇文章说它是异步的和 300 毫秒的差异，我理解。但我的主要问题是我的视频还剩 20 秒，而暂停时它会在 20 秒用完后结束。这是我可能搞砸的相关代码：

```
 private void initPlayer()
{
    try {
        if(videoFile != null)
        {

            afd = getAssets().openFd(videoFile);

            instructionVideoPlayer = new MediaPlayer();

            instructionVideoPlayer.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getDeclaredLength());

            instructionVideoPlayer.setDisplay(holder);

            instructionVideoPlayer.prepare();
            Log.i("Instruction Video", "videoPrepared");
            instructionVideoPlayer.setOnCompletionListener(instructionVideoComplete);
            instructionVideoPlayer.setOnPreparedListener(this);
        }

    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        Log.i(this.toString(), "IOEXception");
        e.printStackTrace();
        //initPlayer();
    } catch (Exception e)
    {
        Log.i("InitPlayer", e.getClass().toString());
        e.printStackTrace();
    }

    restoreOverlayState();
} 
```

听众：

```
 MediaPlayer.OnCompletionListener instructionVideoComplete = new MediaPlayer.OnCompletionListener() {

    public void onCompletion(MediaPlayer arg0) {
        Log.i("onCompletion", "called");
        if(!videoFile.contentEquals(LangSelect.INSTRUCTION_05))
        {
            Intent returnIntent = new Intent();
            returnIntent.putExtra(LangSelect.ACTION, LangSelect.GO_VIDEO_NEXT);
            setResult(RESULT_OK, returnIntent);
            continuePlaying = true;
            toFinish();

        }
        else
            toFinish();
    }
};

public void onPrepared(MediaPlayer mediaPlayer) 
{
    playVideo();
} 
```

播放和暂停功能

```
 private void playVideo()
{
    instructionVideoPlayer.seekTo(pausedAt);
    instructionVideoPlayer.start();
    restoreOverlayState();
}
private void pauseVideo()
{
    pausedAt = instructionVideoPlayer.getCurrentPosition();
    instructionVideoPlayer.pause();
}

private void restoreOverlayState()
{
    prefs = getSharedPreferences(SAVE_PREFS, Context.MODE_PRIVATE);

    if(prefs.getBoolean(IS_PAUSED, false))
    {
        pauseOverlay.setVisibility(View.VISIBLE);
        pauseVideo();
    }
    else
    {
        pauseOverlay.setVisibility(View.GONE);
    }
} 
```

编辑：这只发生在我正在测试的手机之一的 Nexus S (2.3.3) 上。另一个 Galaxy S(Froyo) 没有这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:35:21.730

我弄清楚我做错了什么。正在调用 OnCompletionListener。问题是我正在运行 2 个媒体播放器并意外地为它们设置了相同的 onCompletionlistener，因为我两次调用 initPlayer。一次在 surfaceCreated 中，然后在 onResume() 结束时再次。要么 Galaxy S 搞砸了，要么它有奇怪的错误检查，因为这个问题没有出现在那里。

# c# - Microsoft Unity LoadConfiguration 性能 ASP.NET 问题

> ID：10898524
> 
> 赞同：0
> 
> 时间：2012-06-05T13:47:35.617
> 
> 标签：c#, .net, dependency-injection, unity-container, ioc-container

我们正在使用带有 XML 文件配置的 Microsoft Unity。我们有一个单独的 Unity.config 文件（指向我们的 Web.Config）。我们静态地“缓存”容器。容器在 Application_Start 上初始化。

问题是第一次调用 LoadConfiguration 时，它非常慢，大约 10-15 秒。我们已经注册了大约 200 种类型。在生产中（一次）问题不大，但在开发过程中这是相当大的开销。

有同样问题的人吗？

谢谢

# c# - 如何在 Visual Web Developer 中显示趋势线

> ID：10898525
> 
> 赞同：2
> 
> 时间：2012-06-05T13:47:36.443
> 
> 标签：c#, charts, visual-web-developer, trendline

我刚刚开始使用 Microsoft Visual Web Developer 2010 Express。我已经看到了显示趋势线的图表示例，但我自己找不到任何方法来做到这一点。我正在使用 C#。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:17:41.243

如果您正在寻求一种为 Web 或 Windows 窗体应用程序动态创建交互式图表的方法，那么最快的入门方法可能是查看 mschart：

[http://archive.msdn.microsoft.com/mschart](http://archive.msdn.microsoft.com/mschart)

Microsoft 有一个您在 Visual Studio 中构建的可下载项目，以指导您了解如何使用图表控件。太棒了，所以我希望这就是你想要的！

这是下载页面，您可以在其中获取 web 或 winforms 的项目文件：

[http://archive.msdn.microsoft.com/mschart/Release/ProjectReleases.aspx](http://archive.msdn.microsoft.com/mschart/Release/ProjectReleases.aspx)

# makefile - 我怎么知道提供了什么 -j 选项

> ID：10898528
> 
> 赞同：4
> 
> 时间：2012-06-05T13:47:46.310
> 
> 标签：makefile, gnu-make

在[Racket](http://racket-lang.org)的构建系统中，我们有一个构建步骤，它调用一个可以同时运行多个并行任务的程序。由于这是从 调用的`make`，因此最好尊重最初调用 的`-j`选项。`make`

但是，据我所知，没有办法`-j`从内部获取选项的值`Makefile`，甚至无法作为`make`调用程序中的环境变量。

有没有办法获得这个值，或者`make`调用的命令行，或者类似的东西，会有相关的信息？让它只在 GNU make 中工作是可以的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-29T15:25:26.277

最后`make 4.2.1`他们做`MAKEFLAGS`对了。也就是说，您可以在 Makefile 中有一个目标

```
opts:
    @echo $(MAKEFLAGS) 
```

并让它告诉你`-j`参数权的值。

```
$ make -j10 opts
-j10 --jobserver-auth=3,4 
```

（在`make 4.1`它仍然被打破）。不用说，`echo` 您可以调用一个脚本来正确解析`MAKEFLAGS`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T01:17:57.410

注意：此答案涉及`make`版本 3.82 及更早版本。有关 4.2 版的更好答案，请参阅 Dima Pasechnik 的答案。

* * *

您无法分辨出提供了什么 -j 选项。根据以下引用，无法从 make 或其子流程以常规方式访问有关作业数量的信息：

> 顶级 make 及其所有子 make 进程使用管道相互通信，以确保在所有 make 中启动的作业不超过 N 个。

（取自 make 3.82 源代码树中名为 NEWS 的文件）

顶层 make 进程充当作业服务器，通过管道将令牌分发给子 make 进程。您的目标似乎是进行自己的并行处理，并且仍然遵守提供给`make`. 为了实现这一点，您必须以某种方式通过该管道将自己插入到通信中。但是，这是一个未命名的管道，据我所知，您自己的进程无法加入作业服务器机制。

顺便说一句，您提到的“标志的预处理版本”包含`--jobserver-fds=3,4`用于在 make 进程之间传达有关管道端点信息的表达式。这暴露了引擎盖下发生的一些事情......

# .net - 使用通用域模型的 DAL 架构

> ID：10898536
> 
> 赞同：3
> 
> 时间：2012-06-05T13:48:06.753
> 
> 标签：.net, data-access-layer

目前我面临的问题是，我尝试为我的 .NET 应用程序设计一个 DAL，该应用程序稍后将使用某种 NoSQL 数据库。
我现在评估的 NoSQL 数据库有时在用作主键的类型上有所不同。例如，MongoDB 使用专有的`ObjectID`，而 RavenDB 使用通用的`string`. 所以我的问题是，我如何设计这样一个可以处理不同类型的域模型 id 的 DAL。

我的第一种方法是制作通用领域模型。这看起来像这样：

```
// Domain Model
public class Filter<TId> {
  public TId Id { get; set; }
  // ...
}

// DAO-interface
public interface IFilterDao<TId> {
  bool Persist(Filter<TId>);
  // ...
}

// This is where the problems begin
public static class DAOFactory {
  public static IFilterDAO<T> GetFilterDAO<T>() {
    // Implementation of IFilterDAO<T> can't be instantiated because types must be known at compile time
  }
} 
```

DAO-Factory方法中的注释已经描述了问题：我不能`T`在运行时定义，因为对应的代码是在编译时生成的。

我的第二种和第三种方法是将 定义`Id`为`object`or 或`dynamic`。RavenDB 无法使用`object`，因为它需要一个字符串。使用`dynamic`我无法将 lambdas 传递给 RavenDB API（发生编译器错误“表达式树可能不包含动态操作”）。构建表达式树而不是使用 lambda 确实是最后的出路，因为它更耗时。

所以我完全被困住了，我希望有人能帮助我。提前致谢。

更新：我终于可以使用 RavenDB 了`object`，但这并不是一个令人满意的解决方案`object`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T05:21:23.167

如果您在编译时知道类型，则可以在静态类中解决问题，对吗？这意味着，每个底层数据库都需要一个 DaoFactory 实现。

答案是你不应该使用[工厂模式](http://www.oodesign.com/factory-pattern.html)——相反，你应该使用[抽象工厂模式](http://www.oodesign.com/abstract-factory-pattern.html)。

```
public class Filter<TId> { 
  public TId Id { get; set; } 
} 

public interface IFilterDao<TId> { 
  bool Persist(Filter<TId>); 
} 

// Note: Can't be static since polymorphism requires an instance!
public abstract class DaoFactory<TId> {
  public abstract IFilterDao<TId> GetFilterDao<TId>();
}

public sealed class MongoDBDaoFactory : DaoFactory<ObjectID> {
  public override IFilterDao<ObjectID> GetFilterDao<ObjectID>() { /* ... */ }
}

public sealed class RavenDBDaoFactory : DaoFactory<String> {
  public override IFilterDao<String> GetFilterDao<String>() { /* ... */ }
} 
```

我不得不做类似的事情并尝试使用[依赖注入模式](http://martinfowler.com/articles/injection.html)来选择在运行时使用的适当实现，但由于泛型问题，这实际上很难做到。 *抽象工厂*是去这里的最佳方式。

# java - Amazon SNS -> SQS 消息正文

> ID：10898538
> 
> 赞同：11
> 
> 时间：2012-06-05T13:48:10.643
> 
> 标签：java, amazon-web-services, amazon-sqs, amazon-sns

我正在从 SNS 主题向 SQS 发送消息。当我在客户端检查 SQS 消息的正文时，整个消息元数据都在 SQS 正文中发送。

IE 如果我从主题发送消息“Hello World”，我的客户端正在接收：

```
 BenFlowers {
  "Type" : "Notification",
  "MessageId" : "84102bd5-8890-4ed5-aeba-c15fafc926dc",
  "TopicArn" : "arn:aws:sns:eu-west-1:534706846367:HelloWorld",
  "Message" : "hello World",
  "Timestamp" : "2012-06-05T13:44:22.360Z",
  "SignatureVersion" : "1",
  "Signature" : "Qzh0qXhijBKylaFwc9PGE+lQQDwHGWkIzCW2Ld1eVrxNfSem4yyBTgouqGX26V0m1qhFD4RQcBzE3oNqx5jFhJfV4hN45FNcsFVnmfLPGNUTmJWblSk8f6znWgTy8UtK9xrTeNYzK59k3VJ4WTJ5kCEj+2vH7sBV15fAXeCAtdQ=",
  "SigningCertURL" : "https://sns.eu-west-1.amazonaws.com/SimpleNotificationService-f3ecfb7224c7233fe7bb5f59f96de52f.pem",
  "UnsubscribeURL" : "https://sns.eu-west-1.amazonaws.com/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:eu-west-1:534706846367:HelloWorld:8a3acde2-cb0b-4a56-9b9c-b75ed7307556"
} 
```

这有点烦人，因为我不得不在另一端拆分消息正文。速度在这个应用程序中非常重要，所以我想消除它。有没有办法只从 SNS 发送消息而忽略其余的元数据？

谢谢，本

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-23T06:46:25.677

SNS 最近推出了一项功能，允许您在 SNS 主题上设置“原始消息传递”。

[http://docs.aws.amazon.com/sns/latest/dg/large-payload-raw-message.html](http://docs.aws.amazon.com/sns/latest/dg/large-payload-raw-message.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:43:36.593

SNS 将消息大小限制为 8KB，因此无法使用此服务解决此问题。

您可以直接将消息发送到 SQS 队列，其中限制为 64KB。

如果您的问题是您放入队列的消息的接收速度，您可以使用 SNS 通知客户端是时候向 SQS 发出请求以接收消息了。

# android - 点击时的多个 AlertDialogs

> ID：10898541
> 
> 赞同：0
> 
> 时间：2012-06-05T13:48:16.540
> 
> 标签：android, android-alertdialog

现在在我的点击事件中，我注意到有时在我的调试器上同时出现多个对话框时，它会稍微滞后 onClick。

> 我们将如何修复它，所以有办法让它只显示 1 AlertDialog？

代码：相当标准。

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setMessage("Go to the next screen?")
       .setCancelable(false)
       .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {
                Intent i = new Intent(class1.this, class2.class);
startActivity(i);
           }
       })
       .setNegativeButton("No", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {
                dialog.cancel();
           }
       });
AlertDialog alert = builder.create() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:55:08.837

使用`isShowing()`方法可以检查警报对话框是否显示..

和 onClick 事件每次单击时都会创建新对话框，因此请检查对话框是否不为空，如果不为空则创建对话框，然后检查`.isShowing()`

所以，

```
AlertDialog alert=null;//declare as a global ..mind that not in your onClick method

if(null=alert){ 
alert = new AlertDialog.Builder(this).create();
}

if(!alert.isShowing()){
   //do stuff here is dialog is showing here...
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:56:30.830

```
 public void onClick(View v) {                  
         send();
         alertdialog();
         alertdialog1();
        }

   //first
      void alertdialog(){    

     AlertDialog.Builder builder = new AlertDialog.Builder(this);
   builder.setMessage("Go to the next screen?")
          .setCancelable(false)
          .setPositiveButton("ok", new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog, int id) {
                  dialog.cancel();
              }
          });
          /*.setNegativeButton("No", new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog, int id) {
                   dialog.cancel();
              }
          });*/
   AlertDialog alert = builder.create();
   alert.show();
   }  
    //////sexcond
      void alertdialog1(){    

     AlertDialog.Builder builder = new AlertDialog.Builder(this);
   builder.setMessage("Go to the next screen?")
          .setCancelable(false)
          .setPositiveButton("ok", new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog, int id) {
                  dialog.cancel();
              }
          });
          /*.setNegativeButton("No", new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog, int id) {
                   dialog.cancel();
              }
          });*/
   AlertDialog alert = builder.create();
   alert.show();
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T13:57:38.213

嗯，试试这样：

```
private AlertDialog mDialog;

public void fillDialog(){
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage("Go to the next screen?")
   .setCancelable(false)
   .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
       public void onClick(DialogInterface dialog, int id) {
            Intent i = new Intent(class1.this, class2.class);
            startActivity(i);
       }
   })
   .setNegativeButton("No", new DialogInterface.OnClickListener() {
       public void onClick(DialogInterface dialog, int id) {
            dialog.cancel();
       }
   });
    mDialog = builder.create()
}

public void showDialog(){
     if (mDialog == null) createDialog();
     if (mDialog.isShowing()) return;
     mDialog.show();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T13:58:59.313

如果您快速单击该按钮。它会将所有单击排队并一一处理。但你想要的是在第一次点击后忽略其余的点击。

```
boolean isClickable = true;

        btn.setOnClickListener(new OnClickListener()
        {
            public void onClick(View v)
            {
                if (isClickable)
                {
                    AlertDialog.Builder builder = new AlertDialog.Builder(this);
                    builder.setMessage("Go to the next screen?")
                            .setCancelable(false)
                            .setPositiveButton("Yes",
                                    new DialogInterface.OnClickListener()
                                    {
                                        public void onClick(
                                                DialogInterface dialog, int id)
                                        {
                                            Intent i = new Intent(class1.this,
                                                    class2.class);
                                            startActivity(i);
                                        }
                                    })
                            .setNegativeButton("No",
                                    new DialogInterface.OnClickListener()
                                    {
                                        public void onClick(
                                                DialogInterface dialog, int id)
                                        {
                                            dialog.cancel();
                                        }
                                    });
                    AlertDialog alert = builder.create();

                }
                isClickable = false;
            }
        }); 
```

# intervals - MS Chart.NET - 如何在自动模式下控制轴间隔？

> ID：10898542
> 
> 赞同：1
> 
> 时间：2012-06-05T13:48:17.900
> 
> 标签：intervals, mschart

这可能以前曾被问过，但我无法找到令人满意的答案。我在 ASP.NET 页面上使用 MS Chart .Net (3.5) 控件。我想将 AxisX 和 AxisY 保持在自动模式 - 当间隔很大并且轴标签类似于“0,5,10,15..”或“0,100,200,300..”时，这很好。但是当最小值和最大值之间的差异很小时 - 自动模式切换到分数，例如“0、0.5、1、1.5 ..”等。

我的问题是：如何在自动模式下保持间隔，但将最小“滴答”设为 1？

谢谢！

# mysql - 从本地计算机远程访问数据库？

> ID：10898543
> 
> 赞同：2
> 
> 时间：2012-06-05T13:48:19.317
> 
> 标签：mysql, database, cpanel, remote-server

我正在创建一个程序，它需要我从本地计算机访问我的在线 MySQL 数据库。

在我的 cpanel 中有一个部分显示“远程数据库访问主机”在这种情况下我会添加本地计算机 IP 地址吗？如果每次都是同一台计算机，这会在多年的时间里保持不变吗？

![在此处输入图像描述](../Images/c3a34cbb9f160744b37b3249add36aff.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:06:08.967

如果您尝试从“本地”计算机访问它，即 Intranet 上的另一台计算机，请找到该计算机的 Intranet ip。通常它将是 192.168.1.101 或 101 可能是 102、103、104 等。因此，如果您的路由器将 IP 分配给 192.168.1.* 域，您可以将 192.168.1.% 添加到该列表以及您身上的所有计算机Intranet 将能够访问 MySQL 数据库。

注意：某些路由器可能需要添加 192.168.10.% 或 10.0.0.%，这取决于您的路由器如何分配内部 IP。

如果您使用的是 Windows，您可以打开命令提示符（转到运行->“cmd”）并输入“ipconfig”

使用默认网关中的前三个数字，并将最后一个数字替换为 % 符号。 ![示例 ipconfig 运行](../Images/ab60bafe2ce5aec23bcf09db3bd42cab.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:05:18.857

可能是您必须获取的 IP 地址。我们两者都使用，比如 167.155.126.86 或 mysql.ourdomain.com （当我们在主要站点正在维护时滚动到我们的故障安全站点时，它可以工作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:07:14.983

> 如果每次都是同一台计算机，这会在多年的时间里保持不变吗？

这不取决于计算机，取决于IP地址。如果您没有静态 IP 地址，您可能会在接下来的 24 小时内遇到麻烦（ISP 往往会在 24 小时内这样做）。
您可能想查看类似于[DynDNS](http://dyn.com/dns/)、[No-IP](http://www.no-ip.com/)、[FreeDNS](http://freedns.afraid.org/)或类似的服务。
我刚刚意识到 DynDNS 可悲不再是免费的......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T12:10:12.447

进入远程数据库主机。`%.%` 在主机输入框中输入值并添加。现在，该连接将可用于从任何站点和 localhost 进行连接。

# ruby-on-rails - Rails CanCan Simple_form 关联问题

> ID：10898545
> 
> 赞同：1
> 
> 时间：2012-06-05T13:48:25.293
> 
> 标签：ruby-on-rails, cancan, simple-form

为什么不能阻止dept_tech 角色在dept_tech 角色无权访问的部门中创建用户？

我使用 cancan 进行自动化，使用 simple_form 进行视图。我有一个用户模型和一个部门模型。

```
class User < ActiveRecord::Base
  belongs_to :department
  ...
end

class Department < ActiveRecord::Base
  has_many :departments
  ...
end 
```

我也有能力模型

```
class Ability
  include CanCan::Ability

  def initialize(user)
    Rails.logger.debug {" >>>>>>> user id: #{user.id} ......
    if user.role? :admin
     ...
    elseif user.role? :dept_tech
      Rails.logger.debug {" >>>>>>> role 6 ......
      can :manage, User, :department_id => user.department_id
      can :read, Department, :id => user.department_id
      Rails.logger.debug {" >>>>>>> user.department: #{user.department_id}}
    end
  end
 end 
```

和用户控制器：

```
load_and_authorize_resource
...
def new

  respond_to do |format|
    Rails.logger.debug {" >>>> here"}
    format.html # new.html.erb
  end
  Rails.logger.debug {" >>>> there"}
end
... 
```

还有一个

```
load_and_authorize_resource 
```

在部门控制器。

和一个使用 simple_form 的 _form 视图助手

```
<% simple_form_for @user, :html => {class => 'form-horizontal' } do |f| %>
  <%= f.input :email %>
  Rails.logger.debug {" >>>> view"}
  <%= f.association :department %>
  ....
<% end %> 
```

这很好用，dept_tech 只能为部门做索引和显示操作。它也适用于索引，为用户显示操作。但是，当对用户执行新操作时，部门的 collection_select 会显示所有部门，而不仅仅是 dept_tech 的部门。

想法是 dept_tech 只能创建（管理）他自己部门的用户。

这是日志，显示在没有选择部门的位置时使用了 select，并且在视图中完成。

```
Started GET "/users/new" for 127.0.0.1 at 2012-06-05 13:57:58 +0200
[2012-06-05 13:57:58 +0200] Processing by UsersController#new as HTML
[2012-06-05 13:57:58 +0200]   User Load (0.9ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
[2012-06-05 13:57:58 +0200]  >>>> User id: 2, User role: ["dept_tech"], roles_mask: 64
[2012-06-05 13:57:58 +0200]  >>>> Role 6
[2012-06-05 13:57:58 +0200]  >>>> user.department: 2
[2012-06-05 13:57:58 +0200]  >>>> here
[2012-06-05 13:57:58 +0200]  >>>> view
[2012-06-05 13:57:58 +0200]   Department Load (0.9ms)  SELECT "departments".* FROM "departments" 
[2012-06-05 13:57:58 +0200]   Rendered users/_form.html.erb (45.7ms)
[2012-06-05 13:57:58 +0200]   Rendered users/new.html.erb within layouts/application (46.5ms)
[2012-06-05 13:57:58 +0200]  >>>> there
[2012-06-05 13:57:58 +0200] Completed 200 OK in 63ms (Views: 56.4ms | ActiveRecord: 1.8ms) 
```

日志显示在视图中调用 SQL 也就不足为奇了。这是一个 simple_form 问题吗？怎么解决？

# android - 以编程方式在 UI 中的 ScrollView Horizo ntal Android

> ID：10898551
> 
> 赞同：0
> 
> 时间：2012-06-05T13:48:55.430
> 
> 标签：android, android-layout, user-interface

我正在以编程方式在android中显示，我需要水平和垂直滚动视图。一直在垂直工作，但仍然没有水平工作。

这里的代码：

```
 ScrollView sv = new ScrollView(this);
    LinearLayout linearLayout = new LinearLayout(this);
    ViewGroup.LayoutParams params = new ViewGroup.LayoutParams(FILL_PARENT, WRAP_CONTENT);
    linearLayout.setLayoutParams(params);
    linearLayout.setOrientation(VERTICAL); 

    linearLayout.addView(tableLayout(count));
    linearLayout.addView(submitButton());
    sv.addView(linearLayout);
    setContentView(sv); 
```

请帮助我使它水平工作。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:53:18.843

如果您想要水平滚动，请尝试[Horizo ​​ntalScrollView。](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)但是，您不能同时进行水平和垂直操作，在这种情况下，您可能必须编写自定义视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:56:00.337

```
HorizontalScrollView sv = new HorizontalScrollView(this);
LinearLayout linearLayout = new LinearLayout(this);
ViewGroup.LayoutParams params = new ViewGroup.LayoutParams( LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT);
linearLayout.setLayoutParams(params);
linearLayout.setOrientation(LinearLayout.HORIZONTAL); 
```

# rss - 如何从 Feedburner 迁移到 MailChimp？

> ID：10898554
> 
> 赞同：0
> 
> 时间：2012-06-05T13:49:08.610
> 
> 标签：rss, mailchimp, feedburner

我想将我的电子邮件订阅者从 Feedburner 迁移到 MailChimp，但找不到任何相关指南。

有什么方法可以将现有订阅者迁移到 MailChimp，而不需要他们重新验证他们的电子邮件地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:10:06.273

如果您可以从 Feedburner 以 CSV/Excel 格式导出列表，则可以使用 Mailchimp 导入列表。订阅者不必重新验证他们的电子邮件地址。这篇文章会有所帮助。 [http://blog.mailchimp.com/feedburner-rss-to-email-hack/](http://blog.mailchimp.com/feedburner-rss-to-email-hack/)

# c# - 手动输入日期或时间时 C# 运行时 DateTimePicker 验证错误？

> ID：10898558
> 
> 赞同：0
> 
> 时间：2012-06-05T13:49:25.607
> 
> 标签：c#, datetimepicker

我有一个针对 .NET 3.5 的 C# WinForms 项目，带有两个 DataGridView。Win 7 64 位上的 Visual Studio 2010 Pro。

我正在使用在运行时创建的两个 DateTimePicker 控件（一个用于时间，一个用于日期），它们浮动在 gridview 中相应的 DateTime 单元格的顶部。选择器仅在时间或日期单元格获得焦点时显示。

系统时间格式为 24 小时制。

```
private DateTimePicker timePicker;

timePicker = new DateTimePicker();
timePicker.Format = DateTimePickerFormat.Custom;
timePicker.CustomFormat = "HH:mm";
timePicker.MaxDate = new DateTime(9998, 12, 31);
timePicker.MinDate = new DateTime(1753, 01, 01);
timePicker.ShowUpDown = true;
timePicker.Width = 60;
timePicker.Hide();
timePicker.ValueChanged += new EventHandler(timePicker_ValueChanged);
timePicker.KeyPress += new KeyPressEventHandler(timePicker_KeyPress);
timePicker.LostFocus += new EventHandler(timePicker_LostFocus);
dgTxSummary.Controls.Add(timePicker);

void timePicker_ValueChanged(object sender, EventArgs e)
{
   // dgTxSummary is the DataGridView containing the dates and times
   dgTxSummary.CurrentCell.Value = timePicker.Value;            
}

void timePicker_LostFocus(object sender, EventArgs e)
{
   timePicker.Hide();
}

// Used for debugging; shows a message in a text field when 10, 20 etc
// where entered
void timePicker_KeyPress(object sender, KeyPressEventArgs e)
{
   if (Char.IsDigit(prevChar) && e.KeyChar == '0')
   {
      string correctHour = prevChar.ToString() + '0';
      Message = "Should have been " + correctHour;
   }

   prevChar = e.KeyChar;
} 
```

单击时间单元格时，将显示时间选择器

```
private void ShowTimePicker(Point cellPos, DateTime dt)
{
  timePicker.Location = cellPos;
  timePicker.Value = dt;
  timePicker.Show();
  timePicker.Focus();
} 
```

仅当满足 2 个条件时才会出现此问题：

1) 选择器获得焦点后第一次输入数字
2) 手动输入以 0* 结尾的有效数字（键盘）

*0、10 或 20 在小时槽中，0、10、...、50 在分钟槽中

使用 updown 按钮可以正常工作。

结果是，~~首先显示上一个时间或日期，并且上下按钮消失~~，控件（时间选择器）要么隐藏要么关闭，并且 datagridview 中的底层单元格具有焦点并处于与前一个时间或日期的编辑模式。在单元格内部或外部单击时，如果输入 10，则会显示 01。

我在同一个表单上创建了一个设计时 datetimepicker，它工作正常。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:18:20.253

我终于在代码中找到了罪魁祸首：

```
dgTxSummary.Controls.Add(timePicker); 
```

似乎 DateTimePicker 需要添加到**表单**中，而不是**DataGridView**中。

将代码更改为`this.Controls.Add(timePicker);`并使用`datePicker.BringToFront();`in 后`ShowTimePicker(...)`（以避免控件隐藏在 DataGridView 后面），一切都很好:-)

FWIW 我使用以下代码将 DateTimePicker 放在相应单元格的顶部（代码去除了错误处理、空值检查等）：

```
private void dgTxSummary_CellMouseClick(object sender, DataGridViewCellMouseEventArgs e)
{
    Rectangle cellRect = dgTxSummary.GetCellDisplayRectangle(e.ColumnIndex, e.RowIndex, false);
    Point dgPos = dgTxSummary.Location;
    Point cellPos = new Point(dgPos.X + cellRect.X, dgPos.Y + cellRect.Y);

    DateTime dt = DateTime.Parse(row.Cells[e.ColumnIndex].FormattedValue.ToString());

    ShowDatePicker(cellPos, dt);
} 
```

# c# - 如何将焦点设置到另一个窗口？

> ID：10898560
> 
> 赞同：14
> 
> 时间：2012-06-05T13:49:30.797
> 
> 标签：c#, winforms

我遇到了一个失去焦点的程序的问题。这不是我的程序。如何编写第二个程序以每 1-2 秒将焦点设置到该窗口？有可能这样做吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-05T13:55:08.027

如果您想关注其他程序/进程，可以使用以下 Win32 API 调用。

```
[DllImport("user32.dll")]
static extern bool SetForegroundWindow (IntPtr hWnd);

private void BringToFront(Process pTemp)
{
    SetForegroundWindow(pTemp.MainWindowHandle);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-24T06:53:38.577

使用 spy++ 或其他 ui 工具查找您要聚焦的窗口的类名，例如：focusWindowClassName。然后添加以下函数：

```
[DllImport("USER32.DLL")]
public static extern bool SetForegroundWindow(IntPtr hWnd);

[System.Runtime.InteropServices.DllImport("User32.dll")]
 public static extern bool ShowWindow(IntPtr handle, int nCmdShow);

[DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Auto)]
public static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

//Then:
// [Edit] Changed IntPrt to IntPtr
IntPtr hWnd = FindWindow("focusWindowClassName", null); // this gives you the handle of the window you need.

// then use this handle to bring the window to focus or forground(I guessed you wanted this).

// sometimes the window may be minimized and the setforground function cannot bring it to focus so:

/*use this ShowWindow(IntPtr handle, int nCmdShow);
*there are various values of nCmdShow 3, 5 ,9\. What 9 does is: 
*Activates and displays the window. If the window is minimized or maximized, *the system restores it to its original size and position. An application *should specify this flag when restoring a minimized window */

ShowWindow(hWnd, 9); 
//The bring the application to focus
SetForegroundWindow(hWnd);

// you wanted to bring the application to focus every 2 or few second
// call other window as done above and recall this window again. 
```

# browserid - 开发模式的受众不匹配

> ID：10898562
> 
> 赞同：2
> 
> 时间：2012-06-05T13:49:36.800
> 
> 标签：browserid

目前正在尝试开发基于browserid的登录/注册系统。

我有一台本地 IP 为 192.168.0.106 并且在“http://localhost”上运行的服务器

从服务器计算机上的浏览器通过发送与观众的验证时，该过程完美运行：“localhost”

问题是当我尝试从同一本地网络上的另一台机器上识别时，该地址不是本地主机，而是类似 192.168.0.101 ：验证过程返回“受众不匹配”失败，因为客户端连接到 192.168.0.106（服务器的本地地址）而不是 localhost

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:48:33.847

验证者的受众匹配检查是为了确保您获得的断言是新鲜的，并且没有从其他站点获得。

在“生产”中，您通常会知道客户端将连接到您的站点的地址，并将其硬编码到您对验证者的调用中。

在开发中，我使用了 2 个选项： 1\. 从我正在测试的客户端添加到 /etc/hosts 文件的显式映射，因此所有客户端都使用相同的地址 2\. 使用“主机”标头中的值作为受众价值（这可能完全不安全，具体取决于您使用的中间件/中介，因此只能在开发中完成）

# websphere - 关注来自 websphere 应用服务器的 trust.p12 和 key.p12

> ID：10898566
> 
> 赞同：1
> 
> 时间：2012-06-05T13:49:53.343
> 
> 标签：websphere

我可以看到 trust.p12 和 key.p12 在路径 $PROFILE_HOME/etc 和 $PROFILE_HOME/config/cells/cellname/ 下都存在

那么这两个路径下的文件有什么区别？

我可以在 $PROFILE_HOME/config/cells/cellname 下看到 websphere 默认 ssl 设置引用 trust.p12 和 key.p12，是否有任何其他配置引用 $PROFILE_HOME/etc 下的文件？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T13:55:31.570

这些密钥库 (/etc) 由从此配置文件启动的客户端（例如 wsadmin）使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:06:13.640

trust.p12 是信任库：您信任的其他站点的证书。key.p12 是密钥库：您自己的 SSL 证书。

# performance - 内存缓存在 NFS 上？

> ID：10898567
> 
> 赞同：1
> 
> 时间：2012-06-05T13:49:55.713
> 
> 标签：performance, udp, memcached, nfs

我一直在研究如何调整环境的性能，并设置了许多参数来提高 NFS 性能，从设置挂载选项等简单的事情到设置 sysctl 参数等高级设置，甚至考虑在 NIC 上启用巨型帧和防火墙。

我在同一台服务器上运行 NFS 和 memcached，我觉得我可以通过消除 memcached 网络开销来提高性能。

首先是一些环境信息：

dsr 设置中的 4 个负载平衡 Web 服务器，连接到 ASA 5510。主/主复制中的 2 个 mysql 服务器。1 个运行 memcached 和 nfs 的应用程序/文件服务器。

添加额外的服务器不在讨论范围内。

Web 服务器通过导出的 NFS 安装来提供其内容。Web 服务器上的 NFS 挂载设置为使用 udp 而不是 tcp。

Web 服务器在 apache/php 之前运行 varnish，varnish 设置为仅通过单独的子域提供图像、css 和 javascript。

大多数情况下，网站在 5 秒内加载，但偶尔，即使在流量较低的晚上，我们也会看到加载时间更长。有时长达 10 秒。当然这还不错，但我们没有理由不能看到更好的性能。所有文件都通过 NFS 提供。顺便说一句，我最近获得了这个客户，在他们原来的技术转换职位之后。

由于服务器现在针对 NFS 连接进行了优化，我认为我可以/应该做的是将 memcached 设置为在 unix 套接字模式下运行，这会禁用其网络功能，然后将 unix 套接字放在导出的文件系统上。这样，Web 服务器仍然可以连接到 memcached，但它会消除一些开销，因为我有 NFS 挂载运行 udp 而不是 tcp。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:54:13.950

文件系统上的 unix 套接字文件只是两个进程连接到同一个套接字的*句柄*；所有的通信都是本地的，将它放在 NFS 上（如果可能的话）将无法实现跨机器的通信。此外，即使 NFS 有一些机制，它也可能比直接使用 memcache 更糟糕。

# html - 里面没有正确显示

> ID：10898575
> 
> 赞同：0
> 
> 时间：2012-06-05T13:50:37.587
> 
> 标签：html

谁能告诉我为什么我的内部行没有进入 td.

```
<tr id="group_1_id">
    <th>Group 1</th>
    <td>
        <tr id="1"><td>1</td><td>One</td><td><input type="text" name="one" value="one"/></td></tr>
        <tr id="2"><td>2</td><td>Two</td><td><input type="text" name="two" value="two"/></td></tr>
        <tr id="3"><td>3</td><td>Three</td><td><input type="text" name="three" value="three"/></td></tr>
    </td>
</tr> 
```

3 个表行位于父 tr 之外。尽管它们是在我父母 tr 的 td 中定义的。

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T13:57:58.393

我会说你的 HTML 不正确。如果你想要一个标题部分，那么使用`<thead>` or`<tbody>`元素，而不是`<th>`. 我相信您的问题源于您使用`<th>`而不是`<thead>`.

您可能需要使用验证器来检查您的 HTML 是否正确。例如，将您的页面上传到[http://validator.w3.org](http://validator.w3.org)，并更正它显示的错误。

还要检查规范（例如在[www.whatwg.org](http://www.whatwg.org/specs/web-apps/current-work/multipage/tabular-data.html#the-table-element)上），因为我想您想在表中创建多个标题部分。一个表可能有不超过一个`<thead>`、不超过一个`<tfoot>`和任意数量的`<tbody>`元素。

哦，你刚刚重新编辑了问题，但问题是一样的:)

`<tr>`元素不能放在`<td>`或`<th>`内。解析该代码时，会自动创建一个嵌套表，因此真正的 HTML 如下所示：

```
<tr id="group_1_id">
  <th>Group 1</th>
  <td>
    <table>
      <tbody>
        <tr id="1"><td>1</td><td>One</td><td><input type="text" name="one" value="one"/></td></tr>
        <tr id="2"><td>2</td><td>Two</td><td><input type="text" name="two" value="two"/></td></tr>
        <tr id="3"><td>3</td><td>Three</td><td><input type="text" name="three" value="three"/></td></tr>
      </tbody>
    </table>
  </td>
</tr> 
```

# json - grails 将集合呈现为单个 json 对象

> ID：10898576
> 
> 赞同：4
> 
> 时间：2012-06-05T13:50:47.470
> 
> 标签：json, grails

例如我有下一个域类

```
User{
   String name
} 
```

我也有这个类的 2 个对象

```
new User(name: "John").save()
new User(name: "Alex").save() 
```

应该如何在 UserController 中查看“列表”操作以像这样以 JSON 格式表示 User.list()

```
{1: "John", 2: "Alex"} 
```

让我说得更准确一些。我想要这样的东西：

```
UserController{
   def list = {
    render(contentType: "text/json") {
        User.list().each {user->
            user.id = user.name
        }
    }
} 
```

但遗憾的是，这行不通。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T18:14:22.250

试试数组结构，

```
def list = {
    render(contentType: "text/json") {
        results = array {
            User.list().each {user->
                result "${user.id}" : "${user.name}"
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T15:10:17.090

我找不到 JSONBuilder API 的解决方案。因此，我在 org.codehaus.jackson 的帮助下制定了我的解决方案。

```
response.setContentType("text/json")
JsonGenerator g = jsonFactory.createJsonGenerator(response.getOutputStream())
g.writeStartObject()
for (user in users) {
    g.writeStringField(user.id.toString(), user.name)
}
g.writeEndObject()
g.close() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T14:42:30.087

当我想在 grails 中将某些内容编码为 JSON 时，我将所有内容都放在地图中：

```
render ['1':john.name, '2':alex.name] as JSON 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-22T09:56:18.363

从@aldrin 回答开始，需要对 GRAILS3 json 渲染进行更正，因为`array`指令不再起作用（并且更正确的是“应用程序”而不是“文本”），所以解决方案必须是

```
def list = {
def ulist = User.list()
render(contentType: "application/json") {
    results(ulist) { user ->
                 userid  user.id
                 username  user.name
    }
}
} 
```

# asp.net-mvc-3 - Css 表单不适合页面

> ID：10898580
> 
> 赞同：-1
> 
> 时间：2012-06-05T13:50:58.157
> 
> 标签：asp.net-mvc-3, html, css

在我的所有页面中，我的内容都适合正文：![在此处输入图像描述](../Images/a56bca16c16c368135d3104b534afd98.png)

但是在我有表单的地方，它们会越过页脚，而正文不会调整大小： ![在此处输入图像描述](../Images/74ac5f3fcc302429a2f257f6fae4ba78.png)

问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:57:34.497

您的表单可能包含很多浮动元素，因此您可能希望将其添加到`<form>`CSS 中：

```
form {
    ...

    overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:54:09.677

这周我也经历过类似的事情。尝试使用

```
<div style="clear:both"/> 
```

将您的内容封装在您的页面中。

```
<div id="mainDiv">
content 
 <div style="clear:both"/>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T05:40:27.557

问题显然在于表单中的浮动元素。您可以使用 Nicolas Gallagher 的 micro clearfix 修复它，目前是该问题的“最佳实践”

[http://nicolasgallagher.com/micro-clearfix-hack/](http://nicolasgallagher.com/micro-clearfix-hack/)

不要使用溢出：隐藏；因为如果您希望任何元素溢出表单，它可能会给您带来麻烦。（例如选择）。此外，表格对于布局来说不是一个好主意，并且不需要清除空 div。

# objective-c - 释放 UIViewController 子类实际上并没有释放内存

> ID：10898584
> 
> 赞同：0
> 
> 时间：2012-06-05T13:51:10.730
> 
> 标签：objective-c, ios, xcode, ipad, memory-management

我有一个由&组成的`UINavigationController`对象（名为） ，我的iPad 应用程序首先加载一个子类（名为`LoginNav``ViewController1``ViewController2``UISplitViewController``mainSplitViewController``LoginNav``didFinishLaunchingWithOptions`

`[self.mainSplitViewController presentModalViewController:LoginNav animated:YES];`）。

显示`ViewController1`后，我`UIButton`在其中点击 a 以 push `ViewController2`，当我完成工作时，`ViewController2`我在其中点击 a`UIButton`以调用`[self.navigationController dismissModalViewControllerAnimated:YES];`以关闭`LoginNav`其两个视图控制器并显示`mainSplitViewController's`内容。

`dealloc`在两个`ViewController1`& `ViewController2`with`NSLog`语句中都有一个方法，一旦被`loginNav`解雇，`NSLogs`永远不会被解雇，但在两者都被解雇后做`[self.navigationController.viewControllers objectAtIndex:0] release];`& 。`[self.navigationController.viewControllers objectAtIndex:1] release];``[self.navigationController dismissModalViewControllerAnimated:YES];``NSLogs`

我把上面的两个release语句注释掉了，然后我启动了`Allocations`instrument，然后再次启动app，push`ViewController2`然后`loginNav`按上面描述的dismiss了，看一下`Live Bytes`（All Allocations value）列就`6.9 MB`在dismiss之后`loginNav`，然后我做了这一步再次，但在这种情况下，使用两个发布语句，我在列上得到了一个`6.9 MB`值。`Live Bytes`

两个问题：

1）为什么&的`dealloc`方法在持有它们的导航控制器被解雇后永远不会被解雇？并且执行上述两个发布声明来发布这些视图控制器是否正确？`ViewController1``ViewController2``LoginNav`

2）为什么释放`ViewController1`&`ViewController2`不释放内存？

ps 没有单个变量（或者在两个&`IBOutlet)`中都保存在内存中，所有内容都在它们两个中释放。`ViewController1``ViewController2`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:49:34.487

如果不查看所有代码，这些类型的问题几乎是不可能解决的。当您手动管理内存时，您可能会在多个方面出错。例如以下代码将泄漏：

```
- (void)didSelectSomethingInViewControllerOne
{
    ViewController2 *vc2 = [[ViewController2 alloc] init];
    [self.navigationController pushViewController:vc2 animated:YES];
} 
```

在这种情况下，您已经分配了对象，因此拥有它的所有权。然后导航控制器获得它的所有权。当您从导航堆栈中弹出控制器时，导航控制器会放弃它的所有权，但您从未这样做过，因此它的保留计数仍然为 1，并且不会被释放。

稍后在您的代码中放弃控制器的所有权（例如在关闭模式视图之后）是一个坏主意。当您的版本无处不在时，很难分析所有权。一旦导航控制器拥有所有权，您就可以释放您分配的对象，因为您将来不打算使用它：

```
- (void)didSelectSomethingInViewControllerOne
{
    ViewController2 *vc2 = [[ViewController2 alloc] init];
    [self.navigationController pushViewController:vc2 animated:YES];
    [vc2 release];
} 
```

上述情况可能与您的问题无关。您的问题可能存在于许多不同的领域。这就是解决内存管理问题很困难的原因。没有看到源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:40:01.647

您可能遇到的另一件事是 LoginNav 中的保留属性（例如委托）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:31:13.513

考虑将您的项目转换为 ARC：

[http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

# java - 我的用户界面代码应该放在哪里？

> ID：10898587
> 
> 赞同：2
> 
> 时间：2012-06-05T13:51:28.853
> 
> 标签：java, user-interface

我的用户界面应该位于一个简单的 CRUD 应用程序（使用 Java）中的什么位置。
在我的应用程序中，我有一个主类和另一个类，它处理与数据库有关的所有事情，例如从中获取信息或向其添加新信息。

将 UI 元素保留在主类中并离开数据库类是否更明智，将用户输入向前推进，例如在数据库类中添加一个新元素，如下所示：

```
public static void main(String[] args) {
   Scanner scan = new Scanner(system.in);

   System.out.println("Give me your name:");
   String name = scan.nextLine();

   DatabaseHandler db = new DatabaseHandler();
   db.addNameToDatabase(name);  
} 
```

或者输入提示是否应该存在于 中`DatabaseHandler`，所以在主类中只显示方法调用，如下所示：

```
public static void main(String[] args) {
  DatabaseHandler db = new DatabaseHandler(); 
  db.addNameToDatabase(); //user interface now inside addNameToDatabase method  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:16:41.910

始终在开发过程中，记住 -[`high cohesion`](http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29)和[`low coupling`](http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29). 对于您的特定问题，请以这种方式思考-无论哪种方法，您都有`high cohesion`吗？不。为什么`database`类应该处理用户输入？为什么该`main`方法应该处理用户输入？不，理想情况下，您的两种方式都是错误的。

但我们很少遇到理想的情况。您的 IO 应由另一个类处理，您的数据库应由另一个类处理，您的 UI 也应如此。在这些类中，每个方法都应该有一个特定的任务。例如，在您的 IO 类中使用 getter 和 setter 来获取和设置变量。每种方法都在做它应该做的事情，以确保高凝聚力。通过这种方式，您最终也确保了低耦合，因为您的模块不会相互依赖。你可能会想 - 哦，好吧，我可以在一节课上写完所有这些并完成它，但请记住，这种方法有很多优势。在必须由其他人维护代码的情况下，他们会通过类和方法的名称知道在哪里寻找问题。在您必须在多年后查看自己的代码的情况下，

请记住 - 高内聚和低耦合 FTW！

理想情况下 - 你的 main 应该只是你程序的起点，而不是别的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:17:20.240

这实际上取决于您的程序的大小。如果您的程序很小且易于在一个文件中阅读，那么就让它如此吧。随着程序变得越来越大，有必要将其分解为清晰。（如果它真的比直接的程序编码方式小，可能是一个类中最好的。）
如果你把它分开，那么主类应该是 UI 和数据部分的驱动程序，它们应该是不同的模块。您可能想查看不同的模式，例如 MVC 或 MVP，了解如何拆分它。
如您所见，没有一种方法适合所有人。由于布线的原因，分解成组件/模块/包的大型程序更难掌握，但让团队更容易工作。

# c++ - 转换 std::vector > 将二维数组表示为 cv::Mat

> ID：10898591
> 
> 赞同：7
> 
> 时间：2012-06-05T13:51:52.617
> 
> 标签：c++, opencv, image-processing, vector, stdvector

`std::vector`将嵌套的`std::vector`s转换为 s 的最优雅和最有效的方法是`cv::Mat`什么？嵌套结构包含一个数组，即所有内部`std::vector`s 具有相同的大小并表示矩阵行。我不介意将数据从一个复制到另一个。

我知道一个单一的，非嵌套`std::vector`的很容易，有一个构造函数：

```
std::vector <double> myvec;
cv::Mat mymat;

// fill myvec
bool copy = true;

myMat = cv::Mat(myvec, copy); 
```

那么嵌套向量呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T18:25:30.447

我的变体（需要 OpenCV 2.4）：

```
int size = 5;
vector<vector<double> > w(size);
for(int i = 0; i < size; ++i)
{
    w[i].resize(size);
    for(int j = 0; j < size; ++j)
        w[i][j] = (i+1) * 10 + j;
}

Mat m(size, size, CV_64F);
for(int i = 0; i < w.size(); ++i)
    m.row(i) = Mat(w[i]).t();

cout << m << endl; 
```

输出：

```
[10, 11, 12, 13, 14;
  20, 21, 22, 23, 24;
  30, 31, 32, 33, 34;
  40, 41, 42, 43, 44;
  50, 51, 52, 53, 54] 
```

解释`m.row(i) = Mat(w[i]).t()`：

*   `m.row(i)`设置 ROI，它指向原始矩阵
*   `Mat(w[i])`包装矢量而不复制数据
*   `.t()`创建“矩阵表达式” - 不执行数据复制
*   `=`计算矩阵表达式，但因为向量被包装到 ( `size`x 1) 连续矩阵中，它在没有真正转置的情况下通过一次调用来计算`memcpy`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T14:01:08.857

这是一种方法：

```
std::vector<double> row1;
row1.push_back(1.0); row1.push_back(2.0); row1.push_back(3.0);

std::vector<double> row2;
row2.push_back(4.0); row2.push_back(5.0); row2.push_back(6.0);

std::vector<std::vector<double> > vector_of_rows;
vector_of_rows.push_back(row1);
vector_of_rows.push_back(row2);

// make sure the size of of row1 and row2 are the same, else you'll have serious problems!
cv::Mat my_mat(vector_of_rows.size(), row1.size(), CV_64F);

for (size_t i = 0; i < vector_of_rows.size(); i++)
{   
    for (size_t j = 0; j < row1.size(); j++)
    {   
        my_mat.at<double>(i,j) = vector_of_rows[i][j];
    }   
}   

std::cout << my_mat << std::endl; 
```

输出：

```
[1, 2, 3;
  4, 5, 6] 
```

我尝试了另一种方法，使用的构造函数`Mat`和`push_back()`方法，但没有成功，也许你可以弄清楚。祝你好运！

# asp.net-mvc-3 - ASP.NET MVC3 通过 Ajax 链接在主视图和搜索视图之间传递数据

> ID：10898595
> 
> 赞同：0
> 
> 时间：2012-06-05T13:52:09.843
> 
> 标签：asp.net-mvc-3

我刚刚开始学习 ASP.NET MVC3。

我有以下情况。在特定模型的创建视图中，用户可以通过单击链接（使用 Html.ActionLink 帮助程序呈现）来查找代码/描述。查找值是从数据库中的查找表中检索的，并显示在单独的视图中。这两个视图由两个不同的控制器处理。当用户在后一个​​视图中选择一个查找值时，该值（代码+描述）应该被复制回创建视图。

如何在两个视图之间传递数据？由于 Http 请求的无状态特性，这不可能吗？

我尝试使用 Ajax 链接，但没有成功。

代码片段创建视图：

```
<fieldset>
    <legend>Z-Info</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.ZZL_U_CODE)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.ZZL_U_CODE)
        @Html.ValidationMessageFor(model => model.ZZL_U_CODE)
    </div>

    <div class="editor-label">
        @Ajax.ActionLink("Land code test", "Index", "Domein", new {name = "lan" }, 
            new AjaxOptions {
                HttpMethod = "Get",
                Url = Url.Action("Index", "Domein", new {name = "lan" }), 
                OnBegin = "OnBegin",
                OnSuccess = "InsertCodeNaam",
                OnFailure = "OnFailure",
                OnComplete = "OnComplete"
            })
    </div> 
```

当用户选择代码/描述时，将`Select`调用以下操作返回`Json`数据。

选择动作：

```
public class DomeinController : Controller
{
    private ZZLEntities db = new ZZLEntities();

    //
    // GET: /Domein/

    public ViewResult Index(string name)
    {
        DomeinViewModel model = DomeinRepositry.GetAll(name);
        return View(model);
    }

     GET: /Domein/Select/5

    public JsonResult Select(int id, string naam)
    {
        return Json(new DomCodeNaam { codeValue = id, naamValue = naam }, JsonRequestBehavior.AllowGet);
    } 
```

还有其他可能的解决方案吗？可以选择部分视图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:54:09.833

那么你有两个选择：

1.  只需回发查找值，然后在内部重定向到第一个（“创建”）视图，但这次传递（内部）用户选择的值，以便可以使用所选值呈现视图。也许不花哨但很容易实现。但是，您将丢失用户已经输入第一个表单的数据，除非您也发布它或者您将其设为两步过程。
2.  如果您想使用 Ajax，您需要在客户端的第一个“创建”视图中更新表单的适当部分，具体取决于用户的操作（即他们选择了哪些查找值）。

但是，我对您所说的“单独视图”的确切含义有些困惑

# android - 如何使用 res 文件夹的 drawable-hdpi、drawable-mdpi、drawable-ldpi 中存在的图像？

> ID：10898598
> 
> 赞同：2
> 
> 时间：2012-06-05T13:52:13.880
> 
> 标签：android, cordova

我能够将不同分辨率的图像保存在 res 文件夹的 drawable-hdpi、drawable-mdpi、drawable-ldpi 中，但不知道如何从 assets/www 文件夹中访问图像。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:57:11.203

你需要做更多的事情来处理多分辨率。只需通过 id 获取图像，系统将根据当前分辨率自动拍照。

[http://developer.android.com/guide/practices/screens_support.html#range](http://developer.android.com/guide/practices/screens_support.html#range)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:54:48.100

您可以通过（无论 dpi 大小）获取图像 id：

```
R.drawable.your_image 
```

因此，使用 id 你可以做你需要的一切（使用搜索）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-20T18:17:36.200

您不需要 AssetManager。你可以做

```
BitmapFactory.decodeFile("file:///android_asset/www/bullet.jpg") 
```

尽管将图像存储在资产中并不是最好的方法。您将无法利用 Android 资源管理系统。因此，除非您有令人信服的理由这样做，否则我建议您看看使用 res 文件夹和资源系统。

更新：说明 BitmapFactory 具有通过 decodeFile 方法解码文件的方法。这是第一点。Android 允许您通过 file:///android_asset/{path} 路径访问资产文件夹中的文件。在您的情况下，/image/Malay/bullet.jpg 中的图像是资产文件夹，可以通过`file:///android_asset/www/bullet.jpg`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T14:00:17.717

如果您想使用该路径，请尝试以下操作：

```
private void showImage() {
    String uri = "drawable/icon";

    // int imageResource = R.drawable.icon;
    int imageResource = getResources().getIdentifier(uri, null, getPackageName());

    ImageView imageView = (ImageView) findViewById(R.id.myImageView);
    Drawable image = getResources().getDrawable(imageResource);
    imageView.setImageDrawable(image);
} 
```

但建议使用`R`参考：

```
int imageResource = R.drawable.icon; 

Drawable image = getResources().getDrawable(imageResource); 
```

[资源](https://stackoverflow.com/questions/2349652/android-open-resource-from-drawable-string)

`drawable-hdpi drawable-mdpi,drawable-ldpi`只是不同的文件夹，根据屏幕分辨率在图像质量之间产生差异。这个想法是将相同的图像放在具有不同分辨率的不同文件夹中......

# ruby-on-rails-3 - 如何在两个模型之间设置多个别名连接？

> ID：10898602
> 
> 赞同：2
> 
> 时间：2012-06-05T13:52:28.917
> 
> 标签：ruby-on-rails-3, activerecord

在 Rails 3.2 应用程序中，我需要在相同的两个模型之间设置两个关联。

例如

```
class User
  has_many :events
  has_many :attendances
  has_many :attended_events, through: :attendances
end

class Event
  belongs_to :event_organizer, class_name: "User"
  has_many :attendances
  has_many :attendees, through: :attendances, class_name: "User"
end

class Attendance
  belongs_to :attended_event, class_name: "Event"
  belongs_to :attendee, class_name: "User"
end 
```

这是我第一次尝试使用别名类名，但我无法让它工作。我不确定问题是否在于我如何定义关联或其他地方。

我的关联看起来不错吗？我是否忽略了使其正常工作所需的一些东西？

我遇到的问题是在出勤模型中没有设置用户 ID。这可能是一个愚蠢的问题，但考虑到我上面的关联，字段名称应该是：user_id 还是：event_organizer_id？

非常感谢您对此的任何建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:11:37.970

在 User 和 Event 中指定的 foreign_key

```
class User
  has_many :events

  has_many :attendances, foreign_key: :attendee_id
  has_many :attended_events, through: :attendances
end

class Event
  belongs_to :event_organizer, class_name: "User" 
  # here it should be event_organizer_id

  has_many :attendances, foreign_key: :attended_event_id
  has_many :attendees, through: :attendances
end

class Attendance
  belongs_to :attended_event, class_name: "Event" 
  # this should have attended_event_id

  belongs_to :attendee, class_name: "User"        
  # this should have attendee_id because of 1st param to belongs_to here is "attendee"
  # and same should be added as foreign_key in User model
  # same follows for Event too
end 
```

# c++ - 如何从函数中正确输出 TCHAR？

> ID：10898603
> 
> 赞同：0
> 
> 时间：2012-06-05T13:52:29.003
> 
> 标签：c++, tchar

这段代码：

```
#include <tchar.h>

TCHAR example_function() {
  TCHAR example_tchar[10];
  return example_tchar;
}

int main() { } 
```

给出错误：

```
In function 'TCHAR example_function()':
error: invalid conversion from 'TCHAR* {aka char*}' to 'TCHAR {aka char}' [-fpermissive]
warning: address of local variable 'example_tchar' returned [enabled by default] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T13:53:52.840

你的变量`example_tchar`不是一个`TCHAR`，而是一个数组。

**你到底想达到什么目的？**

如果你想返回一个`TCHAR`：

```
TCHAR example_function() {
  TCHAR example_tchar[10];
  return example_tchar[0];
}
//or simply
TCHAR example_function() {
  TCHAR example_tchar = _T('');
  return example_tchar;
} 
```

如果你想返回一个数组，或者更确切地说是一个指针，你必须动态分配内存以防止未定义的行为：

```
TCHAR* example_function() {
  TCHAR* example_tchar = new TCHAR[10];
  return example_tchar;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:57:32.793

如果你想返回一个使用更复杂的*字符串*，例如（或使用指针，或者只是添加 set作为返回参数）。只是一个定义，它根据构建选项在 char 和 wchar_t 之间进行选择。`TCHARs``std::basic_string<TCHAR>``TCHAR[10]``TCHAR`

# magento - 如何获取属于magento中属性组的所有属性

> ID：10898607
> 
> 赞同：2
> 
> 时间：2012-06-05T13:52:35.723
> 
> 标签：magento, magento-1.6

我有一个属性组，我想获取属于特定属性组的属性列表。有没有办法获取属性组下的所有属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T11:27:49.157

适用于法师 1.7.0.0：

```
function printGroupAttributes($groupId) {
    $attributesCollection = Mage::getResourceModel('catalog/product_attribute_collection');
        $attributesCollection->setAttributeGroupFilter($groupId);
        foreach ($attributesCollection as $attribute) {
           echo $attribute->getAttributeCode()."<br/>"; // I launch it from browser
        }
}
$attributeGroupId = 534; // Fill with yours
printGroupAttributes($attributeGroupId); 
```

资源：`Mage_Catalog_Model_Product_Attribute_Group->hasConfigurableAttributes()`

# jsp - Play Framework 1.2.4：路由jsp文件

> ID：10898610
> 
> 赞同：0
> 
> 时间：2012-06-05T13:52:53.123
> 
> 标签：jsp, redirect, playframework, migration, routes

我正在将旧版应用程序迁移到 Play 框架上，我想知道是否可以将旧版 *.jsp 路由重定向到框架。前任：

```
# Old home
/home.jsp              MainController.home
# New home
/home                  MainController.home

# Old random page
/foo/bar.jsp           FooController.bar
# new random page
/random/bar            FooController.bar 
```

当我在 localhost 上进行测试时，这可以正常工作，但是当我部署到我的 Tomcat 服务器时会出现 404 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:25:50.467

查看 Play 生成的 web.xml。

您应该看到一条线，如下所示

```
<servlet-mapping>
    <servlet-name>play</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

`servlet-mapping`尝试在标签内添加以下行。

```
<url-pattern>*.jsp</url-pattern> 
```

# actionscript-3 - AS3：将精灵保存到文件并读回？

> ID：10898611
> 
> 赞同：1
> 
> 时间：2012-06-05T13:53:00.810
> 
> 标签：actionscript-3, file, serialization, sprite, displayobject

我正在使用 Actionscript 3，我需要能够将矢量图形精灵写入文件，然后再将其加载回来。通常我只是在一个 ByteArray 中序列化它，但显然你不能序列化一个精灵。但它只是数据，所以必须有某种方式在文件中表示它。我用谷歌搜索，直到我的手指酸痛，但我似乎无法找到任何东西。有谁知道如何做到这一点？谢谢！

# c# - 映射中的投射类型，FluentNhibernate

> ID：10898613
> 
> 赞同：0
> 
> 时间：2012-06-05T13:53:09.460
> 
> 标签：c#, asp.net, asp.net-mvc-3, fluent-nhibernate, mapping

我有这张表，其中几列设置为我不想要的类型。例如.. 一个名为 createDate 的列设置为 nvarchar(50).. 默认情况下将被视为字符串.. 但我不希望它被映射为字符串，我希望它被映射为日期时间对象。那么在映射过程中，我将如何将字符串转换为 DateTime 对象。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:01:55.680

基本上，您的映射类不知道 DataBase 类型。您可以使用 DateTime 属性设计您的模型，并将它们映射到类型错误的列，希望在给定当前格式的情况下转换将起作用。我还应该查看是否可以传递一个 FormatString 来解析，如果我尝试这个但没有成功。

```
public class Appointment
{
    public DateTime Start { get; set; }
    public DateTime End { get; set; }
}

public class AppointmentMap : ClassMap<Appointment>
{
    public AppointmentMap()
    {
        Map(x => x.Start, "StartDateStringColumn");
        Map(x => x.End, "EndDateStringColumn");
    }
} 
```

# django - Django i18n setlang 视图给出错误 404

> ID：10898614
> 
> 赞同：3
> 
> 时间：2012-06-05T13:53:10.490
> 
> 标签：django, localization, internationalization, translation

我正在尝试使用内置的 i18n 翻译 django 应用程序。我已经`.po/.mo`根据教程标记了要翻译和创建的文本并编译了语言文件（），并且没有错误。我还在`USE_I18N`设置文件中将设置文件更改为 true，并按照教程的说明将以下行添加到 urls.py 中：

```
(r'^i18n/', include('django.conf.urls.i18n')), 
```

按照教程的说明，我还在 settings.py 中定义了允许的语言列表。

然后我创建了一个新的页面 html 模板并复制了教程为语言选择页面提供的代码：

> ```
> <form action="/i18n/setlang/" method="post">
>  {% csrf_token %}
>  <input name="next" type="hidden" value="{{ redirect_to }}" />
>  <select name="language">
>   {% get_language_info_list for LANGUAGES as languages %}
>   {% for language in languages %}
>    <option value="{{ language.code }}">{{ language.name_local }} ({{ language.code }})</option>
>   {% endfor %}
>  </select>
>  <input type="submit" value="Go" />
> </form> 
> ```

该页面也可以完美运行，但是当我单击“开始”时，它告诉我加载页面时出错：

```
Failed to load resource:http://localhost:8000/i18n/setlang/ 
the server responded with a status of 404 (NOT FOUND) 
```

我尝试通过用链接替换变量来更改重定向，但这给了我相同的结果。我尝试更改表单操作路径和 urls.py，以防有一些双重命名，这给了我同样的错误。

我一直在阅读教程和自述文件，以及一些 i18n 文件，似乎找不到它不起作用的原因，我真的很感激答案。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:43:06.457

您确定您使用了正确的 urls.py，即项目根目录中的那个，而不是子目录中的那个吗？

如果将其更改为：

```
from django.http import HttpResponse
...
(r'^i18n/', lambda x: HttpResponse("Test")), 
```

以后可以去`http://localhost:8000/i18n/`吗？

# iphone - 如何从应用程序的一个角落拉出视图？

> ID：10898615
> 
> 赞同：0
> 
> 时间：2012-06-05T13:53:15.723
> 
> 标签：iphone, objective-c, uiview

我想创建可以从一个角落拉出以全屏显示的视图（例如可以从顶部拉出的 iphone 状态栏）。你能给我一个想法如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:57:44.690

1.  在屏幕一角放置一个小视图作为手柄。
2.  `UIPanGestureRecognizer`向该视图添加一个。
3.  当手势识别器的动作方法被调用时，根据用户手指的移动移动你想要呈现的句柄和视图。
4.  当手势结束时（因为用户已经将手指从屏幕上移开），确定移动是否足够大以引入新视图（例如，如果用户将视图拖动到屏幕的 30% 以上，则移动将其移入，否则将其移出）。
5.  将视图动画到其最终位置。

# git - Git push origin master得到'origin'似乎不是git存储库

> ID：10898617
> 
> 赞同：2
> 
> 时间：2012-06-05T13:53:21.520
> 
> 标签：git, version-control

我做了什么：

```
git init 
git remote add master www.xyz.org/git/arkad

fatal: 'origin' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

我可以通过 http 访问远程 git。

如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T13:55:40.297

您添加了一个名为“master”的遥控器，而不是“origin”。在您的情况下，您需要执行以下操作：

```
git push master master 
```

您可能想阅读[git remote](http://www.kernel.org/pub/software/scm/git/docs/v1.5.6/git-remote.html)的手册页，现在您可能想将远程重命名为`origin`：

```
git remote rename master origin 
```

此外，您似乎没有指定用于与遥控器交谈的协议：它可能是`ssh://`or 或`git://`. 鉴于您的远程配置存在两个问题，您可能需要执行以下操作来更正您的配置：

```
git remote rm master
git remote add origin ssh://www.xyz.org/git/arkad 
```

注意：这假设您需要通过 ssh 协议与服务器通信，如上所述，您也可能需要使用 git 协议。

更多有用的帮助也可以在[github.com](https://help.github.com/categories/18/articles)上的优秀人员的帮助下找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:59:35.873

您必须推送到正确的远程服务器。看看这里：

```
git remote -v 
```

例如我自己的个人回购给了我：

```
% git remote -v
origin  git@github.com:farslan/farslan.github.com.git (fetch)
origin  git@github.com:farslan/farslan.github.com.git (push) 
```

因此我可以使用：

```
git remote origin master 
```

# php - 在同一个谷歌地图上加载 MySQL 标记和地理编码

> ID：10898619
> 
> 赞同：0
> 
> 时间：2012-06-05T13:53:23.193
> 
> 标签：php, google-maps-api-3, google-maps-markers, geocode

我想知道是否有人可以帮助我。

我已经整理了[这个](http://www.mapmyfinds.co.uk/development/test.php)页面，它允许用户通过地图点击或手动输入地址来对地址进行地理编码，这可以按预期工作。[此代码是对此处](http://rjshade.com/2012/03/27/Google-Maps-autocomplete-with-jQuery-UI/)找到的教程的轻微改编。

除了上述功能之外，我现在要做的是添加代码，该代码放置一个带有已经保存在 MySQL 数据库中的坐标的标记。

这是我为尝试实现这一目标而编写的代码：

```
<script type="text/javascript">

         var icon = new google.maps.MarkerImage("images/location-marker-2.png")
         new google.maps.Point(16, 32);
         var center = null;
         var map = null;
         var bounds = new google.maps.LatLngBounds();
         function addMarker(lat, lng, info) {
         var pt = new google.maps.LatLng(lat, lng);
         bounds.extend(pt);
         var marker = new google.maps.Marker({
         position: pt,
         icon: icon,
         map: map
         });
         }
         function initMap() {
         map = new google.maps.Map(document.getElementById("gmaps-canvas"), {
         center: new google.maps.LatLng(0, 0),
         zoom: 6,
         scrollwheel: true,     
         draggable: true, 
         mapTypeId: google.maps.MapTypeId.SATELLITE
         });
            <?php

                    include("admin/link.php");
                    include("admin/opendb.php");

                    $query = mysql_query("SELECT * FROM `detectinglocations` WHERE `locationid` = '$lid'");
                    while ($row = mysql_fetch_array($query)){
                        $locationname=$row['locationname'];
                        $osgb36lat=$row['osgb36lat'];
                        $osgb36lon=$row['osgb36lon'];
                        echo ("addMarker($osgb36lat, $osgb36lon,'<b>$locationname</b><br/>');\n");
                    }
                         mysql_close($connect);
             ?>

                     center = bounds.getCenter();
                     map.fitBounds(bounds);
                 }
</script> 
```

我遇到的问题是我可以使`geocode`功能正常工作，但是当我尝试添加标记时，没有任何反应，也没有收到任何错误`Chrome`.

作为 POST 的补充，我在下面添加了 Geocode JS 文件：

```
var geocoder;
var map;
var marker;

// initialise the google maps objects, and add listeners
function gmaps_init(){

  // center of the universe
  var latlng = new google.maps.LatLng(54.312195845815246, -4.45948481875007);

  var options = {
     zoom: 6,
    center: latlng, 
    scrollwheel: true,     
    draggable: true, 
    mapTypeId: google.maps.MapTypeId.SATELLITE
  };

  // create our map object
  map = new google.maps.Map(document.getElementById("gmaps-canvas"), options);

  // the geocoder object allows us to do latlng lookup based on address
  geocoder = new google.maps.Geocoder();

  // the marker shows us the position of the latest address
  marker = new google.maps.Marker({
    map: map,
    draggable: true
  });

  // event triggered when marker is dragged and dropped
  google.maps.event.addListener(marker, 'dragend', function() {
    geocode_lookup( 'latLng', marker.getPosition() );
    var point = marker.getPosition();
    map.panTo(point);
    document.getElementById('osgb36lat').value = marker.position.lat();
    document.getElementById('osgb36lon').value = marker.position.lng();
  });

  // event triggered when map is clicked
  google.maps.event.addListener(map, 'click', function(event) {
    marker.setPosition(event.latLng)
    geocode_lookup( 'latLng', event.latLng  );
document.getElementById('osgb36lat').value = marker.position.lat();
  document.getElementById('osgb36lon').value = marker.position.lng();
  });
}

// move the marker to a new position, and center the map on it
function update_map( geometry ) {
  map.fitBounds( geometry.viewport )
  marker.setPosition( geometry.location )
  document.getElementById('osgb36lat').value = marker.position.lat();
  document.getElementById('osgb36lon').value = marker.position.lng();

}

// fill in the UI elements with new position data
function update_ui( address, latLng ) {
  $('#gmaps-input-address').autocomplete("close");
  $('#gmaps-input-address').val(address);
  $('#gmaps-output-latitude').html(latLng.lat());
  $('#gmaps-output-longitude').html(latLng.lng());
}

// Query the Google geocode object
//
// type: 'address' for search by address
//       'latLng'  for search by latLng (reverse lookup)
//
// value: search query
//
// update: should we update the map (center map and position marker)?
function geocode_lookup( type, value, update ) {
  // default value: update = false
  update = typeof update !== 'undefined' ? update : false;

  request = {};
  request[type] = value;

  geocoder.geocode(request, function(results, status) {
    $('#gmaps-error').html('');
    if (status == google.maps.GeocoderStatus.OK) {
      // Google geocoding has succeeded!
      if (results[0]) {
        // Always update the UI elements with new location data
        update_ui( results[0].formatted_address,
                   results[0].geometry.location )
 document.getElementById('osgb36lat').value = marker.position.lat();
  document.getElementById('osgb36lon').value = marker.position.lng();
        // Only update the map (position marker and center map) if requested
        if( update ) { update_map( results[0].geometry ) }
      } else {
        // Geocoder status ok but no results!?
        $('#gmaps-error').html("Sorry, something went wrong. Try again!");
      }
    } else {
      // Google Geocoding has failed. Two common reasons:
      //   * Address not recognised (e.g. search for 'zxxzcxczxcx')
      //   * Location doesn't map to address (e.g. click in middle of Atlantic)

      if( type == 'address' ) {
        // User has typed in an address which we can't geocode to a location
        $('#gmaps-error').html("Sorry! We couldn't find " + value + ". Try a different search term, or click the map." );
      } else {
        // User has clicked or dragged marker to somewhere that Google can't do a reverse lookup for
        // In this case we display a warning, clear the address box, but fill in LatLng
        $('#gmaps-error').html("Woah... that's pretty remote! You're going to have to manually enter a place name." );
        update_ui('', value)
      }
    };
  });
};

// initialise the jqueryUI autocomplete element
function autocomplete_init() {
  $("#gmaps-input-address").autocomplete({

    // source is the list of input options shown in the autocomplete dropdown.
    // see documentation: http://jqueryui.com/demos/autocomplete/
    source: function(request,response) {

      // the geocode method takes an address or LatLng to search for
      // and a callback function which should process the results into
      // a format accepted by jqueryUI autocomplete
      geocoder.geocode( {'address': request.term }, function(results, status) {
        response($.map(results, function(item) {
          return {
            label: item.formatted_address, // appears in dropdown box
            value: item.formatted_address, // inserted into input element when selected
            geocode: item                  // all geocode data: used in select callback event
          }
        }));
      })
    },

    // event triggered when drop-down option selected
    select: function(event,ui){
      update_ui(  ui.item.value, ui.item.geocode.geometry.location )
      update_map( ui.item.geocode.geometry )
    }
  });

  // triggered when user presses a key in the address box
  $("#gmaps-input-address").bind('keydown', function(event) {
    if(event.keyCode == 13) {
      geocode_lookup( 'address', $('#gmaps-input-address').val(), true );

      // ensures dropdown disappears when enter is pressed
      $('#gmaps-input-address').autocomplete("disable")
    } else {
      // re-enable if previously disabled above
      $('#gmaps-input-address').autocomplete("enable")
    }
  });
}; // autocomplete_init

$(document).ready(function() { 
  if( $('#gmaps-canvas').length  ) {
    gmaps_init();
    autocomplete_init();
  }; 
}); 
```

我已经为此工作了一段时间，但我似乎无法弄清楚我哪里出错了。

我将非常感激，我想知道是否有人可以看看这个并让我知道我哪里出错了。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:43:32.803

根据我的评论，您的 PHP 代码返回错误：

```
<b>Warning</b>:  include(admin/link.php) [<a href='function.include'>function.include</a>]: failed to open stream: No such file or directory in <b>/homepages/2/d333603417/htdocs/development/test.php</b> on line <b>44</b><br />
<br />
<b>Warning</b>:  include() [<a href='function.include'>function.include</a>]: Failed opening 'admin/link.php' for inclusion (include_path='.:/usr/lib/php5') in <b>/homepages/2/d333603417/htdocs/development/test.php</b> on line <b>44</b><br />
<br />
<b>Warning</b>:  include(admin/opendb.php) [<a href='function.include'>function.include</a>]: failed to open stream: No such file or directory in <b>/homepages/2/d333603417/htdocs/development/test.php</b> on line <b>45</b><br />
<br />
<b>Warning</b>:  include() [<a href='function.include'>function.include</a>]: Failed opening 'admin/opendb.php' for inclusion (include_path='.:/usr/lib/php5') in <b>/homepages/2/d333603417/htdocs/development/test.php</b> on line <b>45</b><br />
<br />
<b>Warning</b>:  mysql_query() [<a href='function.mysql-query'>function.mysql-query</a>]: Can't connect to local MySQL server through socket '/tmp/mysqld.sock' (2) in <b>/homepages/2/d333603417/htdocs/development/test.php</b> on line <b>47</b><br />
<br />
<b>Warning</b>:  mysql_query() [<a href='function.mysql-query'>function.mysql-query</a>]: A link to the server could not be established in <b>/homepages/2/d333603417/htdocs/development/test.php</b> on line <b>47</b><br />
<br />
<b>Warning</b>:  mysql_fetch_array(): supplied argument is not a valid MySQL result resource in <b>/homepages/2/d333603417/htdocs/development/test.php</b> on line <b>48</b><br />
<br />
<b>Warning</b>:  mysql_close(): supplied argument is not a valid MySQL-Link resource in <b>/homepages/2/d333603417/htdocs/development/test.php</b> on line <b>54</b><br /> 
```

这就是为什么您无法从 MySQL 获取数据的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T13:19:06.210

在花费大量时间搜索网络和重写现有代码之后，我找到了解决问题的方法。

标记和地理编码功能的加载来自[此](http://www.1stwebdesigner.com/tutorials/interactive-travel-map-google-maps-api/)站点。经过一段时间的重写以满足我的需要，我已经能够创建一个具有所需功能的页面。亲切的问候

# android - android中的基本Web服务调用

> ID：10898620
> 
> 赞同：0
> 
> 时间：2012-06-05T13:53:23.813
> 
> 标签：android, web-services

我需要一个关于如何在 android 中进行基本 Web 服务调用的教程。我目前使用 ksoap，但是当我拨打电话时出现错误，我需要知道服务器的响应是什么。ksoap 不会给我该信息，因为它会解析我收到错误的 api 中的响应。

我对所有这些网络服务都是新手，所以请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:05:38.373

好吧，这取决于您要使用什么来开发它

一个很好的使用 PHP 的教程，MySQL 在[这里](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)

我知道您目前正在使用 KSOAP，但这里有一个[很好的教程](http://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html)，它使用了 KSOAP，并进行了详细的解释。

# awk - awk 拆分 var 两次

> ID：10898624
> 
> 赞同：1
> 
> 时间：2012-06-05T13:53:40.840
> 
> 标签：awk, split

我想用 awk 将一个 var 拆分两次，这就是我到目前为止所得到的。

```
awk -v p=1,3,8,25-27,4-16 '{split(p,t,",");for (i in t) if(t[i] ~ /-/) split(t[i],t1,"-") {print "-dFirstPage=" t1[1] ,"-dFirstPage=" t1[2]} ELSE {print "-dFirstPage=" t[i] ,"-dFirstPage=" t[i]}}' >outfile 
```

输出应为

```
-dFirstPage=1 -dLastPage=1
-dFirstPage=3 -dLastPage=3
-dFirstPage=8 -dLastPage=8
-dFirstPage=25 -dLastPage=27
-dFirstPage=4 -dLastPage=16 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:06:17.923

在`bash`：

```
#!/bin/bash

vars=1,3,8,25-27,4-16

for pages in `echo $vars | tr ',' '\n'`; do
    if [[ -n $( echo $pages | grep --only-matching "-" ) ]]; then
        firstPage=`echo ${pages%%-*}`
        lastPage=`echo ${pages##*-}`
    else
        firstPage=$pages
        lastPage=$pages
    fi
    echo "-dFirstPage=${firstPage} -dLastPage=${lastPage}"
done 
```

输出：

```
-dFirstPage=1 -dLastPage=1
-dFirstPage=3 -dLastPage=3
-dFirstPage=8 -dLastPage=8
-dFirstPage=25 -dLastPage=27
-dFirstPage=4 -dLastPage=16 
```

* * *

应用一些@shellter 的建议：

```
#!/bin/bash

vars=1,3,8,25-27,4-16
for pages in `echo $vars | tr ',' '\n'`; do
    case $pages in
        *-* )
            firstPage=${pages%%-*}
            lastPage=${pages##*-}
            ;;
        * )
            firstPage=$pages
            lastPage=$pages
            ;;
    esac
    echo "-dFirstPage=${firstPage} -dLastPage=${lastPage}"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:43:41.997

您可以将 的值`p`作为输入传递给 awk 吗？在这种情况下，我会这样做：

```
$ echo 1,3,8,25-27,4-16 | awk -F- -v RS=, '{printf "-dFirstPage=%s -dLastPage=%s\n", $1, $2?$2:$1}'
-dFirstPage=1 -dLastPage=1
-dFirstPage=3 -dLastPage=3
-dFirstPage=8 -dLastPage=8
-dFirstPage=25 -dLastPage=27
-dFirstPage=4 -dLastPage=16 
```

这是如何工作的：

*   我定义逗号将是记录分隔符 ( `-v RS=,`)，连字符将是字段分隔符 ( `-F-`)。所以，输入

    ```
    1,3,8,25-27,4-16 
    ```

    将大致相当于

    ```
    1
    3
    8
    25 27
    4 16 
    ```

*   然后，我使用[`printf`](http://www.staff.science.uu.nl/~oostr102/docs/nawk/nawk_32.html#SEC35)：

    ```
    '{printf "-dFirstPage=%s -dLastPage=%s\n", $1, $2?$2:$1}' 
    ```

    第一个参数是第一列。在第二个参数中，我询问第二列是否`$2`存在；如果是，那么参数的值为`$2`; 如果否，则值为第一列`$1`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T16:44:11.237

你***非常***接近：

```
awk -v p=1,3,8,25-27,4-16 'BEGIN {split(p,t,",");for (i in t) if(t[i] ~ /-/) {split(t[i],t1,"-"); print "-dFirstPage=" t1[1] ,"-dFirstPage=" t1[2]} else {print "-dFirstPage=" t[i] ,"-dFirstPage=" t[i]}}' >outfile 
```

*   使用`BEGIN`子句
*   将“其他”更改为`else`
*   将大括号从第一个之前移动`print`到之前，`split`并在它所在的位置放置一个分号

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T14:00:49.373

你离得很近，（但我不确定这个解决方案是否真的能满足你的最终要求）。

```
 awk -v p=1,3,8,25-27,4-16 '
 END{
        split(p,t,",");
  for (i in t) {
    if(t[i] ~ /-/) {
        split(t[i],t1,"-");
      print "-dFirstPage=" t1[1] ,"-dFirstPage=" t1[2]
    }
    else {
      print "-dFirstPage=" t[i] ,"-dFirstPage=" t[i]
    }
  }
}' /dev/null > outfile 
```

**针对 windows 和更通用的解决方案进行了修订**

```
 echo "1,3,8,25-27,4-16" \
 | awk '
 {
   split($0,t,",");
   for (i in t) {
     if(t[i] ~ /-/) {
        split(t[i],t1,"-");
        print "-dFirstPage=" t1[1] ,"-dFirstPage=" t1[2]
     }
     else {
       print "-dFirstPage=" t[i] ,"-dFirstPage=" t[i]
     }
   }
 }' > outfile 
```

如果需要澄清，请随时编辑您的问题。

我希望这有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-09T15:11:14.910

你所需要的只是：**for、echo、if**

如果你必须做数千次，速度会快很多倍

```
vars=1,3,8,25-27,4-16
f='-dfirstpage='
l='-dlastpage='

for pages in ${vars//,/ }; do
   if [[ -n ${pages//[[:digit:]]/} ]]; then
      echo "${f}${pages%%-*} ${l}${pages##*-}"
   else
      echo "${f}${pages} ${l}${pages}"
   fi
done 
```

输出

```
-dFirstPage=1 -dLastPage=1
-dFirstPage=3 -dLastPage=3
-dFirstPage=8 -dLastPage=8
-dFirstPage=25 -dLastPage=27
-dFirstPage=4 -dLastPage=16 
```

# algorithm - 算法找到一个数字，其中 4 和 7 的乘积在给定范围内最大

> ID：10898626
> 
> 赞同：3
> 
> 时间：2012-06-05T13:53:48.447
> 
> 标签：algorithm

我陷入了一个给出下限`L`和上限的问题`U`。
现在假设在整数`X`数字 4 出现`A`次数和数字 7 出现`B`次数的十进制表示中。
问题是找出`X`哪个具有最大值`A*B`for `L<=X<=U`。
有没有有效的算法来解决它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T12:22:09.550

如果我正确理解了这个问题，以下应该可以工作：

*   假设所有数字都具有相同的位数（例如，如果**L**的位数少于**U**，我们可以只用 0 填充开头）。
*   让**Z** = **U** - **L**。
*   现在我们从第一个（/最高/最左边）数字到最后一个数字。如果我们正在查看第**i**个数字，则令**L** (i)、**U** (i)、**Z** (i) 和**X** (i) 为对应的数字。
    *   对于所有为 0 的前导**Z** (i)，我们设置**X** (i) = **L** (i)（我们别无选择）。
    *   对于第一个非 0 **Z (i) 检查：区间 [** **L** (i), **U** (i)-1]中是否有 4 或 7 ？如果是，则令**X** (i) 为 4 或 7，否则令**X** (i) = **U** (i)-1。
    *   **现在用 4s 和 7s 填充X**的其余部分，这样如果您到目前为止分配了更多的 7s，则选择 4s，反之亦然。

* * *

也许一个例子可以帮助理解这一点：

给定**U** = 5000 和**L** = 4900。

现在**Z** = 0100。

从我们设定的算法

*   **X** (1) = **L** (1) = 4（我们别无选择）
*   **X** (2) = **U** (2)-1 = 9 （**Z**中的第一个非 0 数字）
*   **X** (3) = 7（我们已经有了 4）
*   **X** (4) = 4（可任意选择）

导致**X** = 4974，目标为 2*1=2

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T14:08:42.587

看来您已经考虑好了算法。只需将其分解并解决每个部分。我通常会写一些像你在那里所做的评论，然后将它们分解，直到它们达到合理的大小以编写代码。

当你让它工作时，如果需要，你可以优化它。

# spring - 在骆驼路线中使用 OSGi 服务

> ID：10898627
> 
> 赞同：3
> 
> 时间：2012-06-05T13:53:50.843
> 
> 标签：spring, maven-2, osgi, apache-camel

我正在阅读《行动中的骆驼》一书，但无法在骆驼路线中使用 OSGi 服务制定示例（第 4.3.4 节 OsgiServiceRegistry）。这是我的 bean（公开为 OSGi 服务

```
public class HelloBean {
public String hello(String name){
    System.out.println(" Invoking Hello method ");
    return "Hello " + name;

 }
} 
```

这是将上述 bean 公开为服务的 spring XML 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:osgi="http://www.springframework.org/schema/osgi"
xsi:schemaLocation="
   http://www.springframework.org/schema/beans
   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://camel.apache.org/schema/spring
   http://camel.apache.org/schema/spring/camel-spring.xsd
   http://www.springframework.org/schema/osgi
   http://www.springframework.org/schema/osgi/spring-osgi.xsd">

<bean id="helloBean" class="camelinaction.testbeans.HelloBean" />

<osgi:service id="helloService" interface="camelinaction.testbeans.HelloBean" ref="helloBean" />

<camelContext xmlns="http://camel.apache.org/schema/spring">
    <route>
        <from uri="direct:start" />
        <bean ref="helloService" method="hello" />
    </route>
</camelContext>

</beans> 
```

当我执行 maven 目标“camel:run”时，出现以下异常：

```
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'helloService': Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: required property 'bundleContext' has not been set 
```

请让我知道如何设置 bundleContext。我使用 eclipse Equinox 作为 OSGi 容器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:27:34.093

`camel:run`只需使用项目中的 Spring Camel 配置运行一个精简的非 OSGi 运行时。您收到的消息来自 SpringDM（实例化 的东西`<osgi:service id="helloService"...>`）无法定位 OSGi 环境。要使其工作，您需要将代码安装在支持容器中 - 例如 Servicemix 的 Karaf。

如果您希望看到 OSGi 与 Camel 一起工作，请查看[https://github.com/FuseByExample/smx-bootstraps](https://github.com/FuseByExample/smx-bootstraps)上的 Servicemix Bootstraps 项目- 那里有关于安装和调整代码的完整文档。您将感兴趣的捆绑包有`smx-ponger`和`smx-ponger-service`，它们分别演示了 OSGi 服务的使用和提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T03:01:06.677

过去我遇到过这样的情况，我的骆驼路线中有 OSGi 依赖组件，我想通过 Eclipse 之类的 IDE 运行/调试。

如果您希望在开发时进行调试，您可以部署到 ServiceMix 并远程调试：

[http://servicemix.apache.org/developers/remote-debugging-servicemix-in-eclipse.html](http://servicemix.apache.org/developers/remote-debugging-servicemix-in-eclipse.html)

Camel 2.10 可能会通过 OSGi 蓝图支持您的场景：

[http://camel.apache.org/camel-run-maven-goal.html](http://camel.apache.org/camel-run-maven-goal.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-14T13:30:31.913

Spring OSGI 扩展很好，但是正如您所见，当您从相同的 spring 上下文实现和声明 bean 时测试服务接口有点乱伦。您当然可以有 bean 引用 helloBean，但这违背了目的。

我不确定 spring-osgi 扩展行为，但至少对于与 pojosr 非常相似的骆驼蓝图，相同的测试可以使用修改后的 helloService 元素。

```
<to uri="bean:camelinaction.testbeans.HelloBean" method="hello" /> 
```

请注意一个不寻常的事实，即在 bean id 通常引用 bean id 的地方，您现在使用的是完全限定接口。

当然，这有一些不幸的局限性。如果只有一个服务实例实现所需的接口，它工作正常，但没有明显的方法（对我来说）如何应用过滤器。在这种情况下，一种替代方法是实际使用 CamelContext 的 bundleContext 属性并使用编程 API。但是，我们当然希望避免这种情况，而支持声明性方法。

# javascript - GWO 测试：多个测试页面在预览中不起作用

> ID：10898630
> 
> 赞同：0
> 
> 时间：2012-06-05T13:54:00.890
> 
> 标签：javascript, testing, google-website-optimizer

所以这是我第一次进行多页多变量测试，但被告知一切都可以在我的代码中正常工作。谷歌验证了我的代码，它已经准备好上线，但是在预览测试时，它只在我说测试正在运行的页面上显示变体 1，它从未出现在代码所在的其他页面上。此外，我在链接上使用 onclick 函数来触发目标，而不是转换页面。我使用 GWO 的代码来执行此操作，并且在本地测试时它似乎启动得很好。包含测试的所有页面都包含相同的测试文件。

测试设置如下： - 原始：电子商务网站内的多个产品类别页面。- 变体 1：这些类别现在在左侧导航中显示横幅广告。如果有人点击横幅，它会作为转换发送出去，然后将他们带到场外。

预览仅显示第一个类别按预期工作，但在其他类别中它根本不显示。我很想定义测试在哪些页面上以及 GWO 可以期望在哪些页面上进行转换，但 GWO 只需要 1 页。

那么我做错了什么？为了使这个多页测试工作，我缺少什么？非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:20:26.230

在查看了使用多个页面的同事所做的其他测试后，预览行为以相同的方式工作。所以我打开了测试并对其进行了监控——它按计划工作。我认为 GWO 中的预览现在在执行多个页面时会变得混乱，因为它只允许一个测试和一个转换页面。我希望通过新的实验，这会有所改善。

# c-preprocessor - 简单的元组操作

> ID：10898633
> 
> 赞同：1
> 
> 时间：2012-06-05T13:54:12.083
> 
> 标签：c-preprocessor

假设我有一个元组：

```
#define T (a, b) 
```

如何在不使用任何外部库的情况下提取 gcc 中元组的第一个和第二个元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:01:43.057

我找到了一种方法。我不确定这是否适用于 gcc。

```
#define first_(x, y) x
#define first(t) first_ t

#define second_(x, y) y
#define second(t) second_ t

#define T (a, b)

first(T) // expands to a
second(T) // expands to b 
```

# php - JQuery $.post 从来没有成功过，为什么？

> ID：10898634
> 
> 赞同：0
> 
> 时间：2012-06-05T13:54:14.860
> 
> 标签：php, javascript, jquery

我在这方面做了很多不同的尝试，所以我的错误一定很明显，我对 JQuery 的了解不是很好，但我什至直接从互联网上尝试过示例，但我似乎无法得到它，我想要的只是要做的是将变量“myLatlng”传递给 PHP 文件并在回调时回显 PHP 文件的结果，当前 PHP 文件包括：

```
$data=$_POST['coord'];
echo $data; 
```

JavaScript 是：

```
$.post("/includes/eventgrab.php", { "coord": myLatlng },
    function(data) {
        alert("Data Loaded: " + data);
    }, "text"
); 
```

我用过萤火虫，而 myLatlng 确实有一个值。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:59:17.143

假设您`eventgrab.php`在正确的位置（使用 firebug 来查看它是否很好地调用该页面）并且您在`myLatlng`变量中有正确的值，则下面的内容应该可以正常工作。

```
$.post("/includes/eventgrab.php", { coord: myLatlng }, function(data) {
        alert("Data Loaded: " + data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:02:58.440

```
//PHP
$data=$_POST['coord'];
echo json_encode(array('data'=>$data);)//echo as json_encode

//JS
var mylatlng = $(".mylatlang").val();
$.ajax({
type:'post',      
url:'/includes/eventgrab.php',
data:'coord='+mylatlng,
dataType:'json',
success:function(data){
alert('data loaded'+data.data)
}
}); 
```

# android - 将 FFmpeg 帧转换为 OpenGL ES 纹理

> ID：10898635
> 
> 赞同：1
> 
> 时间：2012-06-05T13:54:19.853
> 
> 标签：android, ffmpeg, textures

我正在尝试将使用 FFmpeg 的视频转换为 jni 中的 OpenGL ES 纹理，但我得到的只是黑色纹理。我已经用 输出了 OpenGL `glGetError()`，但没有错误。

这是我的代码：

```
void* pixels;
int err;
int i;
int frameFinished = 0;
AVPacket packet;
static struct SwsContext *img_convert_ctx;
static struct SwsContext *scale_context = NULL;
int64_t seek_target;

 int target_width = 320;
 int target_height = 240;
 GLenum error = GL_NO_ERROR;
 sws_freeContext(img_convert_ctx);  

i = 0;
while((i==0) && (av_read_frame(pFormatCtx, &packet)>=0)) {
        if(packet.stream_index==videoStream) {
        avcodec_decode_video2(pCodecCtx, pFrame, &frameFinished, &packet);

        if(frameFinished) {
            LOGI("packet pts %llu", packet.pts);
            img_convert_ctx = sws_getContext(pCodecCtx->width, pCodecCtx->height, 
                   pCodecCtx->pix_fmt, 
                   target_width, target_height, PIX_FMT_RGB24, SWS_BICUBIC, 
                   NULL, NULL, NULL);
            if(img_convert_ctx == NULL) {
                LOGE("could not initialize conversion context\n");
                return;
            }
                sws_scale(img_convert_ctx, (const uint8_t* const*)pFrame->data, pFrame->linesize, 0, pCodecCtx->height, pFrameRGB->data, pFrameRGB->linesize);
                LOGI("sws_scale");

                videoTextures = new Texture*[1];
                videoTextures[0]->mWidth = 256; //(unsigned)pCodecCtx->width;
                videoTextures[0]->mHeight = 256; //(unsigned)pCodecCtx->height;
                videoTextures[0]->mData = pFrameRGB->data[0];

                glPixelStorei(GL_UNPACK_ALIGNMENT, 1);

                glGenTextures(1, &(videoTextures[0]->mTextureID));
                glBindTexture(GL_TEXTURE_2D, videoTextures[0]->mTextureID);
                glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR); 
                glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

                if(0 == got_texture)
                {
                    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, videoTextures[0]->mWidth, videoTextures[0]->mHeight, 0, GL_RGBA, GL_UNSIGNED_BYTE, (GLvoid *)videoTextures[0]->mData);

                    glTexSubImage2D(GL_TEXTURE_2D, 0, 0,0, videoTextures[0]->mWidth, videoTextures[0]->mHeight, GL_RGBA, GL_UNSIGNED_BYTE, (GLvoid *)videoTextures[0]->mData);
                }else
                {
                    glTexSubImage2D(GL_TEXTURE_2D, 0, 0,0, videoTextures[0]->mWidth, videoTextures[0]->mHeight, GL_RGBA, GL_UNSIGNED_BYTE, (GLvoid *)videoTextures[0]->mData);

                }

                i = 1;
                error = glGetError();
                if( error != GL_NO_ERROR ) {
                    LOGE("couldn't create texture!!");
                       switch (error) {
                        case GL_INVALID_ENUM:
                        LOGE("GL Error: Enum argument is out of range");
                        break;
                        case GL_INVALID_VALUE:
                            LOGE("GL Error: Numeric value is out of range");
                        break;
                        case GL_INVALID_OPERATION:
                            LOGE("GL Error: Operation illegal in current state");
                        break;
                        case GL_OUT_OF_MEMORY:
                            LOGE("GL Error: Not enough memory to execute command");
                        break;
                        default:
                            break;
                       }
                }
        }
    }
    av_free_packet(&packet);
} 
```

我已经成功将pFrameRGB改成java位图，但是我只想在c代码中改成纹理。

**Edit1** 我已经输出了Texture ID，它是0；纹理 ID 可以为零吗？我更改了我的代码，但它始终为零。

**Edit2Texture** 显示，但它是一团糟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:59:37.337

不习惯GLES，而是GL。在那里 320, 240 不是 512,256 的 2 次幂。否则，您需要使用纹理矩形扩展，其 texcoords 不是从 0-1 而是从 0-w/h。至于上传纹理数据，第一次需要使用 glTexImage(...) （即使数据为 0），然后 glTexSubImage 就足够了，我认为第一个初始化大小等，第二个只是发送肉。

关于 ffmpeg 的使用，可能是版本问题，但 img_context 更接近重命名为 sws_getContext，并且只初始化一次，如果 cpu 使用是一个问题，请使用 SWS_LINEAR 而不是 SWS_CUBIC，我也假设 pFrameRGB 已正确 avcodec_alloc_frame()'ed，如果您将使用 GL_RGBA 您应该使用 PIX_FMT_RGBA，PIX_FMT_RGB24 将用于 GL_RGB 纹理管道，最后您缺少数据包堆栈，因此您可以提前阅读以保持良好的同步显示，而不是迟到。

我已经阅读了一些关于解包对齐的评论，我不需要它（并且看到它在该领域的成功）来实现一个 ffmpeg 到 OpenGL/OpenAL 媒体库（http://code.google.com/p /openmedialibrary），很好地，音频位也已被提取到 ffmpeg 到 OpenAL 加载程序（http://code.google.com/p/openalextensions）。有一些不错的功能，目前我正在尝试使用纹理压缩，看看它是否可以表现得更好。考虑一下教程，甚至准备使用 gpl 代码。

希望对 ffmpeg 对 OpenGL/AL 集成的晦涩（缺乏）艺术给予一些启示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:23:40.080

在传递给解码器之前，尝试将 16 个零字节附加到每个数据包。

*来自avcodec.h*的一些评论：

```
 /*
 * @warning The input buffer must be FF_INPUT_BUFFER_PADDING_SIZE larger than
 * the actual read bytes because some optimized bitstream readers read 32 or 64
 * bits at once and could read over the end.
 * @warning The end of the input buffer buf should be set to 0 to ensure that
 * no overreading happens for damaged MPEG streams.
  */ 
```

# html - 使用 javascript 启用 HTML5 AppCache？

> ID：10898638
> 
> 赞同：0
> 
> 时间：2012-06-05T13:54:30.697
> 
> 标签：html

```
<html manifest="example.appcache"> 
```

您可以使用 javascript添加**manifest="example.appcache"部分吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-20T00:35:45.310

不，您不能，因为 html 文件已经发送到服务器，因此对 manifest 属性的进一步更改不会使浏览器对其做出反应。我试过了：

```
document.documentElement.manifest = "site.manifest"; 
```

并在有和没有互联网的情况下加载页面，在第二种情况下，它显然会说“连接错误”

# jquery - 设置选定值 jQuery 下拉列表

> ID：10898644
> 
> 赞同：4
> 
> 时间：2012-06-05T13:54:55.750
> 
> 标签：jquery, select, set, selected

我正在尝试使用 jquery 在下拉列表中设置选定的值，我有这个：

```
 $('.option_vehiculo', '#form_login').each(function() 
{
    if (this.id == tipo_vehiculo_def)
    {
         this.value = "option";
    };  
}); 
```

`.option_vehiculo`是我为所有下拉列表提供的课程，以便我可以快速找到它们。

我遍历我所有的表单下拉列表，直到找到我想要修改的那个。找到我想要更改的选择工作正常，但我无法设置选定的值，我尝试了这个，因为我正在使用我的输入字段：

```
this.value = "option"; 
```

其中 option 是我的下拉列表中的一个选项，但我从中得到的只是没有选定值的下拉列表，它只是出现在里面没有文本，并且可以选择我的可用选项之一。

如何设置 jQuery 下拉列表的选定值？

* * *

**尝试：**我试过这个，但我没有得到任何结果，我不确定是否可以将它与“this”变量一起用作我要修改的对象：

```
this.val("option"); 
```

试过这个：

```
$('#tipo_vehiculo_1000').val("4");
var test = $('#tipo_vehiculo_1000').val(); 
```

按 id 选择我的下拉列表并尝试更改我选择的选项并稍后输出它，它一直给我默认值“0”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T13:58:34.003

无需遍历所有这些，您只需在 jQuery 选择器中使用您的 id 值

```
 $('#'+tipo_vehiculo_def).val('option') 
```

这假设您在选择中有一个带有 value="option" 的选项标签。还假设由于 ID 在页面中必须是唯一的，因此您没有重复任何 ID

# macros - [MoinMoin Wiki] 在最近更改页面中仅显示特定页面

> ID：10898645
> 
> 赞同：0
> 
> 时间：2012-06-05T13:54:59.083
> 
> 标签：macros, wiki, moinmoin

如何限制 MoinMoin 中的“ *RecentChanges* ”页面仅列出特定页面。由于我有一个巨大的 Wiki 站点，并且页面以分层方式组织，因此我想让*最近*更改页面根据不同的分层页面路径仅显示有限的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:03:09.323

moin 1.x 无法做到这一点。

甚至有一点原因（这可能不适用于您的情况，但适用于一般情况）：

Wiki 依赖于所谓的软安全性：人们通过RecentChanges 看到更改并将查看它们，恢复他们看到的任何不良更改（例如垃圾邮件、恶意编辑、出错的东西、人们在错误的地方玩耍等）。

如果你减少他们看到的内容，软安全性就会降低，因为每个人都只是在看自己的东西。

# time - 如何使用模型和 ebean 设置类型“时间”？

> ID：10898650
> 
> 赞同：1
> 
> 时间：2012-06-05T13:55:08.460
> 
> 标签：time, ebean

我只想为我的模型使用时间来定义事件发生的时间，但我发现的唯一方法是这样做：

```
@Temporal(TemporalType.TIME)
public Date end; 
```

但我想在我的数据库中有一个 TIME 类型，这正是我正在寻找的。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:46:31.837

您可以使用`java.sql.Time`，但要小心-它具有除 MySQL TIME 列类型之外的其他定义-它仅在范围内运行`00:00:00`- `23:59:59`（尽管 MySQL 允许您存储间隔-/+ 838 小时）

模型：

```
public Time end; 
```

设置：

```
event.end = Time.valueOf("12:15:00"); 
```

无论如何，将时间/间隔存储为字符串或整数（分钟）可能更安全？

# python - Python Challenge Lvl 3 解释（警告剧透！）

> ID：10898651
> 
> 赞同：1
> 
> 时间：2012-06-05T13:55:08.573
> 
> 标签：python, regex

我正在做 Python 挑战，虽然我想出了一个谜题的答案，但我以一种 hacky、不是很好的方式完成了它。在推进时，我能够看到解决方案：

```
string1 = open('text.txt').read()
print ''.join(re.findall('[^A-Z][A-Z]{3}([a-z])[A-Z]{3}[^A-Z]', string1)) 
```

我把这个搞砸了一段时间，在这里删除一个插入符号，看看会发生什么，在那里改变一个支撑组。但是，我只是无法理解为什么会这样。谁能用通俗易懂的方式解释一下？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:06:25.873

`([a-z])`捕获一个小写字母。

`[A-Z]{3}`匹配 3 个大写字母（两边）。

`[^A-Z]`确保没有第 4 个大写字母（*“正好三个”*）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T14:07:25.107

[^AZ] 不是大写字母的字符

[AZ]{3} 三个大写字母

([az]) 匹配的小写字母

重复前两个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T14:09:46.907

我将模式编译为详细以包含内联注释：

```
pat = re.compile('''
    [^A-Z]    # any character except a capital letter
    [A-Z]{3}  # three capital letters
    (         # the beginning of a capturing group
    [a-z]     # one lowercase letter 
    )         # the end of the group
    [A-Z]{3}  # three capital letters
    [^A-Z]    # any character except a capital letter
    ''', re.VERBOSE) 
```

演示：

```
>>> re.findall(pat, 'AAAAaBBBbBBBBzzZZZxXXXyYYYYwWWWvABCn')
['x', 'v'] 
```

# date - PL/SQL 在嵌套表中查找值

> ID：10898654
> 
> 赞同：0
> 
> 时间：2012-06-05T13:55:17.593
> 
> 标签：date, plsql, average, nested-table

你好我有问题不知道有没有人可以帮忙。我已经创建了嵌套表并在表中插入了值。

```
CREATE OR REPLACE TYPE tt_hours AS OBJECT(hours INTEGER, data NUMBER);
/
CREATE OR REPLACE TYPE tt_day AS VARRAY(7) OF tt_hours;
/
CREATE TABLE NEM_RM16
(
  DAY                 DATE,
  VALUE_hours         tt_day
 );
INSERT INTO NEM_RM16
   (day, value_hours)
 VALUES
   (TO_DATE('01/06/2012 22:00:34'), 
     tt_DAY(         
       tt_hours(1,0.025727),         
       tt_hours(2,0.012047),         
       tt_hours(3,0.012857),         
       tt_hours(4,0.012107),         
       tt_hours(5,0.012849),         
       tt_hours(6,0.01215),         
       tt_hours(7,0.0129))); 
```

因此将在 new_table 中插入 30 行，每行代表本月（六月）的一个月中的 1 天。以上是第一行的示例，其中 day = 01/06/2012 具有 8 小时的数据。

我如何编写一个程序来查找所有特定日期的所有平均小时数，例如表中所有星期一的所有第一小时的平均值（天哪，我希望我说得通）。

结果应该是 7 行（一周 7 天）

```
tt_hours (1, average over the month)
tt_hours (2, average over the month)
.......... 
```

第二张表：

```
 CREATE TABLE old_table ( tDAY DATE, VALUE_thours tt_day ); 
```

我尝试使用以下内容插入。将结果插入旧表但不起作用。

```
insert into old_table (day, value_hours) values 
   (SELECT to_char(DAY, 'Day'), 
   hours, AVG(data) FROM NEM_RM16 n, TABLE(n.value_hours) v
   GROUP BY to_char(DAY, 'Day'), hours); 
```

例如，在运行您的 select 语句后，old_table 在星期五应该有以下数据。小时和日期在嵌套表中，tdate 是 DATE 类型。如您所见，结果是您的 select 语句生成的，但被插入到同一个结构化表中。

```
 tdate         HOURS        data 
  ----------- ---------- ----------
  Friday               1   0,025727
  Friday               2   0,012047
  Friday               3   0,012857
  Friday               4   0,012107
  Friday               5   0,012849
  Friday               6    0,01215
  Friday               7     0,0129 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:16:27.833

您可以使用横向连接从嵌套表中检索值：

```
SQL> select n.day, v.hours, v.data from NEM_RM16 n, table(n.value_hours) v;

DAY              HOURS       DATA
----------- ---------- ----------
01/06/2012           1   0,025727
01/06/2012           2   0,012047
01/06/2012           3   0,012857
01/06/2012           4   0,012107
01/06/2012           5   0,012849
01/06/2012           6    0,01215
01/06/2012           7     0,0129 
```

我不确定我是否真的正确理解了您的问题，但是从上面的查询中您可以运行任何聚合，例如：

```
SQL> SELECT to_char(DAY, 'Day') day_of_week, hours, AVG(data) avg_data
  2    FROM NEM_RM16 n, TABLE(n.value_hours) v
  3   GROUP BY to_char(DAY, 'Day'), hours;

DAY_OF_WEEK      HOURS   AVG_DATA
----------- ---------- ----------
Friday               1   0,025727
Friday               2   0,012047
Friday               3   0,012857
Friday               4   0,012107
Friday               5   0,012849
Friday               6    0,01215
Friday               7     0,0129 
```

如果要重建嵌套表，请使用[COLLECT ，例如：](https://stackoverflow.com/a/10516724/119634)

```
SELECT day_of_week, CAST(COLLECT(tt_hours(hours, avg_data)) AS tt_day)
  FROM (SELECT to_char(DAY, 'Day') day_of_week, hours, AVG(data) avg_data
          FROM NEM_RM16 n, TABLE(n.value_hours) v
         GROUP BY to_char(DAY, 'Day'), hours)
 GROUP BY day_of_week 
```

# python - extracting the output using python

> ID：10898655
> 
> 赞同：-3
> 
> 时间：2012-06-05T13:55:18.897
> 
> 标签：python

How do i extract the required data from the output and save it to a variable

**this is my program:**

```
import commands

cmd = curl -v -k -H "Content-Type: application/json" -X GET -u hitman:hitman <https://test.com:8181/v1/config/sipregistrar

result = commands.getoutput(cmd)
print result 
```

now run the programm :

python test25.py

**output :**

```
About to connect() to test.com port 8181 (#0)
Trying test.com...   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
Dload  Upload   Total   Spent    Left  Speed
0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0connected
Connected to 50.50.50.201 (50.50.50.201) port 8181 (#0)
successfully set certificate verify locations:
HTTP/1.1 200 OK
Date: Tue, 05 Jun 2012 18:27:11 GMT
Server: Jetty(6.1.22)
Content-Type: application/json;charset=UTF-8
Expires: Thu, 01 Jan 1970 00:00:00 GMT
Set-Cookie: JSESSIONID=12buplms5odzt;Path=/config
Transfer-Encoding: chunked
Closing connection #0
 SSLv3, TLS alert, Client hello (1):
} [data not shown]
{"sip_domains":{"prefix":[{"name":""}],"domain":[{"name":"k200.com"},{"name":"zinga.com"},{"name":"rambo.com"}]},"sip_security":{"level":2},"sip_trusted_hosts":{"host":[]},"sip_proxy_mode":{"handle_requests":1}} 
```

from this output , the params i require :

> {"sip_domains":{"prefix":[{"name":""}],"domain":[{"name":"k200.com"},{"name":"zinga.com"},{"name":"rambo.com"}]},"sip_security":{"level":2},"sip_trusted_hosts":{"host":[]},"sip_proxy_mode":{"handle_requests":1}}

How do i extract the above and save it to a variable ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:04:44.553

If you just need a string of those params and all your output always follows that pattern and nothing in your [data not shown] sabotages this, you could try ...

```
params = results[results.find('{"'):] 
```

That takes the portion of results that starts at {"sip_domains" If you end up having another {" before hand, though, this will break.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:30:45.073

I have cleaned this up, removed `eval`, and converted the result using JSON, to make it safe:

```
import json
from pprint import pprint

output = '''[data extract]Set-Cookie: JSESSIONID=12buplms5odzt;Path=/config
Transfer-Encoding: chunked
Closing connection #0
 SSLv3, TLS alert, Client hello (1):
} [data not shown]
{"sip_domains":{"prefix":[{"name":""}],"domain":[{"name":"k200.com"},{"name":"zinga.com"},{"name":"rambo.com"}]},"sip_security":{"level":2},"sip_trusted_hosts":{"host":[]},"sip_proxy_mode":{"handle_requests":1}}'''

output = json.loads( output.split("\n")[-1] )

pprint( output ) 
```

The variable `output` now contains this dictionary:

```
{'sip_domains': {'domain': [{'name': 'k200.com'},
                            {'name': 'zinga.com'},
                            {'name': 'rambo.com'}],
                 'prefix': [{'name': ''}]},
 'sip_proxy_mode': {'handle_requests': 1},
 'sip_security': {'level': 2},
 'sip_trusted_hosts': {'host': []}} 
```

This is simply an alternative, and @jcfollower has a +1 from me for a succinct and effective solution.

# iphone - NSFetchedResultsController sectionIndexTitles 错误不是英文字母

> ID：10898661
> 
> 赞同：3
> 
> 时间：2012-06-05T13:55:40.757
> 
> 标签：iphone, ios, uitableview, core-data, nsfetchedresultscontroller

我有俄语名字的艺术家数据库。
以下方法显示正确的俄语字母

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];
    return [sectionInfo name];
} 
```

但是当我想显示索引线时：

```
- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {
    return [self.fetchedResultsController sectionIndexTitles];
} 
```

节字母是这样的“？” 如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T14:42:32.060

需要子类 NSFetchedResultsController 来覆盖`- (NSString *)sectionIndexTitleForSectionName:(NSString *)sectionName { //or get substring return sectionName; }`

# iphone - Viewcontroller 的视图框架不准确

> ID：10898662
> 
> 赞同：0
> 
> 时间：2012-06-05T13:55:40.913
> 
> 标签：iphone, objective-c, ios, uiviewcontroller

我正在使用两种方法来放置我的视图控制器

方法 1：使用 UIViewController 并推送视图控制器，如下所示`[self.navigationController pushViewController:myViewController animated:YES];`

方法2：使用 UIViewcontroller 然后我正在使用

```
[self presentModalViewController:myViewController animated:YES]; 
```

虽然我正在使用 Approach1 “myViewController” 视图大小，如预期的那样，纵向是 768 * 1024，横向是 1024 * 768。但是 Approach2 没有像第一个 Approach 那样提供预期的大小，对于它给我的两个方向768*1024

问题：第二种方法的问题是什么？有没有办法解决这个问题。

在项目中，我只能使用第二种方法。但我需要得到正确的尺寸。给我一些建议。

我的 Viewcotrollers 层次结构：

1）我的项目基于 UITabBarViewController 并且仅限于纵向。

2）一个UITabBarButton加载另一个ViewController（BookBagViewController *bookBagViewController = [[BookBagViewController alloc] init]; theNavigationController = [[UINavigationController alloc] initWithRootViewController:bookBagViewController];）

3）BookBagViewController 也限制为纵向。

4）BookBagViewController 包含一个按钮，一旦我点击它，下面的代码将被执行

```
MyViecontroller *viewer = [[MyViecontroller alloc] initWithNibName:@"MyViecontroller" bundle:nil];
[self presentModalViewController:viewer animated:YES]; 
```

5）MyViecontroller 按预期支持所有方向，但在打印（调试）时未提供准确的帧大小。

6）返回我使用下面的行

```
[self dismissModalViewControllerAnimated:YES]; 
```

有关我提供上述步骤的更多信息。请接受它，即使它很长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:04:57.330

**第一种方法：**

您正在推动`UIViewController`a 的内部`UINavigationController`。除了你的大小`UIView`（这是你的根） ，`UIViewController`你还需要记住.`UINavigationBar``UINavigationController`

**第二种方法：**

您正在`UIViewController`屏幕上展示您的完整尺寸（您没有将它放在任何东西中）。

至于您的问题，尺寸实际上并未根据方向更新，这有点奇怪。你能显示你在哪里打印这些值吗？

# testunit - Guard/Spork/Testunit 的调试器不稳定

> ID：10898664
> 
> 赞同：1
> 
> 时间：2012-06-05T13:55:47.127
> 
> 标签：testunit, spork, guard, ruby-debug

我正在使用 ruby​​ 1.9.2p318、rails 3.1.3 和以下 gem：

```
gem 'debugger'
gem 'spork', '~> 0.9.0.rc'
gem 'spork-testunit'
gem 'guard-spork' 
```

当我在终端中使用 spork 并运行包含“调试器”行的测试时，一切正常，我可以在启动 spork 的同一选项卡中访问调试器提示。

但是，当我使用 spork 启动时`bundle exec guard`，调试器不稳定。就像没有可用的内存一样。该窗口有时对键盘没有响应，并且不会响应粘贴。我的保护文件包括以下 spork：

```
guard 'spork',  :test_unit_env => { 'RAILS_ENV' => 'test' }, 
    :cucumber_env => { 'RAILS_ENV' => 'test' }, 
    :rspec_env => { 'RAILS_ENV' => 'test' } do
  watch('config/application.rb')
  watch('config/environment.rb')
  watch(%r{^config/environments/.+\.rb$})
  watch(%r{^config/initializers/.+\.rb$})
  watch('Gemfile')
  watch('Gemfile.lock')
  watch('spec/spec_helper.rb') { :rspec }
  watch('test/test_helper.rb') { :test_unit }
  watch(%r{features/support/}) { :cucumber }
end 
```

有没有人有同样的经历或知道如何解决这个问题？谢谢！

# javascript - 使用javascript突出显示文本

> ID：10898666
> 
> 赞同：0
> 
> 时间：2012-06-05T13:55:54.350
> 
> 标签：javascript, jquery, highlighting

我正在尝试使用 javascript 使用文本突出显示选项。我知道如何找到字符串的起始位置，但如何使它突出显示。我的代码看起来像

```
<div id="entity">health insurance</div>
<div id="article">This kind of insurance is meant to supplement health insurance for cancer-care costs. But generally you're better off putting your money toward comprehensive health policies. </div> 
```

和我用过的javascript

```
$(document).ready(function()
{
var test=document.getElementById('article').innerHTML;
var variable=document.getElementById('entity').innerHTML;
alert(test.search(new RegExp(variable, "i")));
}); 
```

这将提醒字符串的起始位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:20:48.303

HTML：

```
<div id="entity">health insurance</div>
<div id="article">This kind of insurance is meant to supplement health insurance for cancer-care costs. But generally you're better off putting your money toward comprehensive health policies. </div>​ 
```

CSS：

```
.highlight {
  background-color: yellow
} 
```

Javascript：

```
$(document).ready(function () {​
  var $test = $('#article');
  var entityText = $('#entity').html();
  var highlight = '<span class="highlight">' + entityText + '</span>';
  $test.html($test.html().replace(entityText, highlight));
} 
```

演示：http: [//jsfiddle.net/ezhPQ/2/](http://jsfiddle.net/ehzPQ/2/)

因此，我只是将第一次出现的“实体”字符串替换为包含在跨度类中的相同字符串。

我理解你的问题了吗？

**- - - - - - - - - - - -更新 - - - - - - - - - - - - -**

如果要突出显示所有出现的修改，请使用正则表达式：

更新的 Javascript：

```
$(document).ready(function () {
  var $test = $('#article');
  var entityText = $('#entity').html();
  var entityRegularExpression = new RegExp("\\b" + entityText + "\\b", "gi");
  var highlight = '<span class="highlight">' + entityText + '</span>';
  $test.html($test.html().replace(entityRegularExpression, highlight))
} 
```

并更新了演示：http: [//jsfiddle.net/ehzPQ/3/](http://jsfiddle.net/ehzPQ/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:01:26.967

只需替换`yourDesireString`为`<span class='highlight'>yourDesireString</span>`.

```
span.highlight {
     background-color: yellow;
} 
```

# opengl-es-2.0 - 如何知道何时在 GPU 内存上分配了数据

> ID：10898678
> 
> 赞同：0
> 
> 时间：2012-06-05T13:56:50.103
> 
> 标签：opengl-es-2.0, gpu, webgl, three.js

如何确定是否在 three.js 上的 GPU 内存上分配了缓冲区？

我第一次调用 renderer.render() 时，它渲染的网格没有纹理（看起来是黑色的），这让我认为调用函数时纹理在 GPU 内存上还不可用。5-10 次调用后，纹理出现在屏幕上。

为什么这很重要？我只是在视图需要更新时触发渲染功能。如果加载了新模型，渲染函数应该等到所有数据都可用于渲染。

如何确保所有数据都准备好在 GPU 上使用？

伪代码：

```
textures = LoadTextures()
material = CreateMaterial(textures)
geometry = loader.load( "path/to/file" )

if( materialLoaded && geometryLoaded ) {
    needsUpdate = true
}

if( needsUpdate ) {
    renderer.render()
    needsUpdate = false
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:57:34.463

这似乎是一个问题，因为在渲染之前图像没有完全加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:53:08.807

**调用 image.onload 时**，GPU 上的纹理可用。我在那里放了一个标志来确定给定的图像（作为纹理加载）是否已加载。

```
LITEV.Texture = function( src )
{
    [...]
    this.loaded = false;
}

LITEV.Texture.prototype =
{
    load : function( path, callback, callbackError )
    {
        image.onload = function () 
        {
            [...]
            texture.needsUpdate = true; 
            if ( callback ) 
            {
                callback( this ); 
            }
            this.loaded = true;
            [...]
        }
    },
    [...]
} 
```

# wpf - 为什么动画在鼠标按下时开始？

> ID：10898679
> 
> 赞同：1
> 
> 时间：2012-06-05T13:56:51.190
> 
> 标签：wpf, animation, styles

我有一个由图像组成的堆栈面板：

```
<StackPanel Height="115" Name="stackPanel1" Orientation="Horizontal" Margin="0">
    <!-- *******************Stackpanel resources****************************-->
    <StackPanel.Resources>
        <Style TargetType="{x:Type Image}">
            <Style.Resources>
                <Storyboard x:Key="Storyboard1">
                    <DoubleAnimationUsingKeyFrames 
                        Storyboard.TargetProperty="(FrameworkElement.Width)">
                        <EasingDoubleKeyFrame KeyTime="0:0:0.9" Value="100">
                            <EasingDoubleKeyFrame.EasingFunction>
                                <BackEase EasingMode="EaseOut" />
                            </EasingDoubleKeyFrame.EasingFunction>
                        </EasingDoubleKeyFrame>
                    </DoubleAnimationUsingKeyFrames>
                    <ThicknessAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Margin)">
                        <EasingThicknessKeyFrame KeyTime="0:0:0.9" Value="0" />
                    </ThicknessAnimationUsingKeyFrames>
                </Storyboard>
                <Storyboard x:Key="Storyboard2">
                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Width)">
                        <EasingDoubleKeyFrame KeyTime="0:0:0.9" Value="50">
                            <EasingDoubleKeyFrame.EasingFunction>
                                <BackEase EasingMode="EaseOut" />
                            </EasingDoubleKeyFrame.EasingFunction>
                        </EasingDoubleKeyFrame>
                    </DoubleAnimationUsingKeyFrames>
                    <ThicknessAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Margin)">
                        <EasingThicknessKeyFrame KeyTime="0:0:0.9" Value="5" />
                    </ThicknessAnimationUsingKeyFrames>
                </Storyboard>
            </Style.Resources>

            <Setter Property="Width" Value="60"></Setter>
            <Setter Property="Stretch" Value="Uniform"></Setter>

            <Style.Triggers>
                <EventTrigger RoutedEvent="Mouse.MouseEnter">
                    <BeginStoryboard Storyboard="{StaticResource Storyboard1}" />
                </EventTrigger>
                <EventTrigger RoutedEvent="Mouse.MouseLeave">
                    <BeginStoryboard Storyboard="{StaticResource Storyboard2}" />
                </EventTrigger>
            </Style.Triggers>
        </Style>
    </StackPanel.Resources>
    <!-- *****************************************************************-->

    <!-- ***************** Stackpanel content: ************************** -->

    <Button Command="{Binding AddItemCommand}" Style="{StaticResource TransparentButton}">
        <Image Name="imgAdd" Source="/WpfApp1;component/Add1.png"  />
    </Button>

    <Image Name="imgImport" Source="/WpfApp1;component/png-symbol.png" />
    <!-- ********************************************************** -->       

</StackPanel> 
```

如您所见，堆栈面板的资源包含 2 个故事板。当鼠标进入图像时启动。另一个在鼠标离开图像时播放。

如果您注意到堆栈面板的孩子是：

```
<Button Command="{Binding AddItemCommand}" Style="{StaticResource TransparentButton}">
    <Image Name="imgAdd" Source="/WpfApp1;component/Add1.png"  />
</Button>

<Image Name="imgImport" Source="/WpfApp1;component/png-symbol.png" /> 
```

请注意，一个图像被包裹在一个按钮内，而另一个则不是。

**所以我的问题是：**为什么当我将鼠标按住第一个孩子（按钮）时，storyboard2 会播放？我只希望 storyboard2 在鼠标离开控件时启动，而不是在我按住鼠标时启动。第二个孩子（图像）没有得到那种行为，而是按照我期望的方式行事。

如果您需要在这里包装图像的按钮的样式，它是：

```
<UserControl.Resources>

    <Style TargetType="Button" x:Key="TransparentButton">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Background="Transparent">
                        <ContentPresenter/>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</UserControl.Resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:43:16.843

通过添加事件处理程序来防止事件通过隧道来解决它：

`PreviewMouseDown="Button_PreviewMouseDown"`

然后设置`event.handled=true`

**换句话说，有：**

**XAML：**

```
<Button Command="{Binding AddItemCommand}" 
        PreviewMouseDown="Button_PreviewMouseDown" 
        Style="{StaticResource TransparentButton}">
    <Image Name="imgAdd" Source="/WpfApp1;component/Add1.png"  />
</Button> 
```

**代码背后：**

```
 private void Button_PreviewMouseDown(object sender, MouseButtonEventArgs e)
    {
        e.Handled = true; // privent event from tunneling

        // then execute the command that was associated with the button
        ((Button)sender).Command.Execute(sender);

    } 
```

# android - 从 tabhostView 中的 asynctask 启动新活动

> ID：10898680
> 
> 赞同：0
> 
> 时间：2012-06-05T13:57:04.637
> 
> 标签：android, android-asynctask, android-activity, android-tabhost

我的代码有问题：

我正在开发一个需要您登录的应用程序。该应用程序由一个加载屏幕和一个带有 4 个选项卡的 tabView 组成。最后一个选项卡是一项可让您登录的活动。我在这里设置了 EditText 视图和一个登录按钮。

到目前为止，登录活动已完成，代码如下：

```
package com.appsoweb.kvodeventer;

import org.json.JSONObject;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class KVOMeldingen extends Activity {

       public static final JSONObject jsonResult = null;
       Button bLogin, bCreateAccount, bResetPassword;
       EditText etUsername, etPassword;
       static String Username;
       static String Password;

       public void onCreate(Bundle savedInstanceState) {
             super.onCreate(savedInstanceState);
             setContentView(R.layout.meldingen);
             final EditText etUsername = (EditText) findViewById(R.id.etUsername);
             final EditText etPassword = (EditText) findViewById(R.id.etPassword);
             Button bLogin = (Button) findViewById(R.id.bLogin);
             Button bCreateAccount = (Button) findViewById(R.id.bCreateAccount);
             Button bResetPassword = (Button) findViewById(R.id.bResetPassword);

             bLogin.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                           if (etUsername.length() <= 0) {
                                  etUsername.setError("Veld mag niet leeg zijn");
                           } else if (etPassword.length() <= 0) {
                                  etPassword.setError("Veld mag niet leeg zijn");
                           } else {
                                  Username = etUsername.getText().toString();
                                  Password = etPassword.getText().toString();
                           }
                           LoginTask NDLT = new LoginTask();
                           NDLT.execute();
                    }
             });

             bCreateAccount.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View arg0) {
                           // Doe iets hier.......

                    }

             });

             bResetPassword.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                           // Doe iets hier........

                    }

             });

       }

       public static String getUsername() {
             return Username;
       }

       public static String getPassword() {
             return Password;
       }

       class LoginTask extends AsyncTask<Void, Void, JSONObject> {
             ProgressDialog waitingDialog;

             @Override
             protected void onPreExecute() {
                    waitingDialog = new ProgressDialog(KVOMeldingen.this);
                    waitingDialog.setMessage("Laden...");
                    waitingDialog.show();
                    super.onPreExecute();
             }

             @Override
             protected JSONObject doInBackground(Void... params) {

                    JSONObject json = JsonFunctionLogin
                                  .getJsonLoginResult("http://api.crossalertdeventer.nl/login.json");
                    return json;

             }

             @Override
             protected void onPostExecute(JSONObject json) {
                    super.onPostExecute(json);
                    if (waitingDialog.isShowing()) {
                           waitingDialog.dismiss();
                           Log.d("iets gebeurt", "gedaan");
                    }
                    try {

                           String LoginResult = json.getString("login");
                           String UserIdResult = json.getString("user_id");
                           Log.d("LoginResult", LoginResult);
                           Log.d("LoginUserId", UserIdResult);
                           json = null;
                           if (LoginResult == "succes"){
                                  // Open activity for listview.
                           } else {
                                  // Don't show items and give error message.
                           }

                    } catch (Exception e) {
                           Log.e("KVOMeldingen", "error" + e.getMessage());

                    }

             }
       }

} 
```

您可以看到身份验证发生在后台。

现在您在 postExecute 方法上看到 If 语句块：如果用户成功登录，我想打开一个活动，该活动从 Web 加载 json 并将其放入列表项中。

现在我不知道该怎么做。因为如果我使用一个意图，新的 listActivity 会打开，但不在我的开始 Activity 的 TabView 中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:36:38.627

我做了类似的事情，所以试试这个。将活动传递给 AsyncTask 类并将其保存为成员变量。在 onPostExecute() 方法中，从您的主活动中调用一个方法以打开一个新活动或显示错误消息。它对我有用！;-)

一些代码：

```
public LoginTask(Activity parentActivity) {
        mParentActivity = parentActivity;
    }

@Override
protected void onPostExecute(JSONObject json) {
    ...
    if (LoginResult == "succes"){
        mParentActivity.openNewActivity(json);
    } else {
        mParentActivity.showErrorMessage("ERROR");
    }
    ...
} 
```

# jquery - 将 jquery 自定义小部件与主干.js 视图一起使用

> ID：10898681
> 
> 赞同：0
> 
> 时间：2012-06-05T13:57:06.157
> 
> 标签：jquery, backbone.js, backbone-views, jquery-widgets

我有一个自定义 jQuery 小部件，该小部件从我的应用程序中调用，该应用程序使用 MVC 的主干.js。如何在我的自定义 jQuery 小部件中使用主干事件模式？

```
function( $ ) {
  $.widget( "medex.chooser", {
  ...
  _create: function() {
      // Would I create a new backbone view here???
  }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:29:07.827

我认为您需要定义一个自定义视图，然后由您的自定义小部件调用。

在您的应用初始化代码中，例如：

```
APP = {};          // your app's global object
APP.Views = {};

APP.Views.WidgetView = Backbone.View.extend(
{
    events: {
        "click .grid1" : "onGrid1Click"
    },

    initialize: function() {
        // code here
    },

    onGrid1Click : function(evt) {
        // code here
    }
}); 
```

然后这将是您的小部件的构造函数代码：

```
function Widget(element) {
   this.view = new APP.Views.WidgetView({ el: element });
} 
```

此代码可能并不完全有效，但应该让您了解您正在寻找的结构。让我知道这是否适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T17:16:52.997

如果您仍在寻找答案，您可以将小部件转换为视图。从 Widget 转换为 View 的基本规则如下：

*   _create 变为初始化
*   this.element 变成 this.$el
*   刷新变成渲染
*   破坏变成移除
*   $('.someDiv').myWidget() 变为 new MyView({ el: $('.someDiv') });
*   选项必须成为构造函数参数，但可以通过几种不同的方式处理

# php - PyroCMS 导航栏中的第三级导航

> ID：10898686
> 
> 赞同：4
> 
> 时间：2012-06-05T13:57:12.643
> 
> 标签：php, pyrocms, pyrocms-lex

我在 PyroCMS 中制作第三级导航栏时遇到了一些麻烦，我没有两个级别可以正常工作，但由于某种原因，它不会让我浏览 {{ navigation }} 数组两次。

这是我目前拥有的：

```
 {{ navigation:links group="header" }}
            {{ if children }}
            <li class="dropdown">
                <a href="{{url}}" class="dropdown-toggle" data-toggle="dropdown">{{ title }} <b class="caret"></b></a>
                <ul class="dropdown-menu">
                {{ children }}
                    {{ if children }}
                        <li class="divider"></li>

                        <li class="nav-header">{{ title }}</li>

                        {{ children }}
                            <li><a href="{{url}}">{{ title }}</a></li>
                        {{ /children }}                            

                    {{ else }}
                        <li><a href="{{url}}">{{ title }}</a></li>
                    {{ endif }}
                {{ /children }}
                </ul>
            </li>
            {{ else }}
                <li {{ if class == 'current' or class == 'first current' or class == 'last current' }}class="active"{{ endif }} ><a href="{{url}}">{{ title }}</a></li>
            {{ endif }}
        {{ /navigation:links }} 
```

我猜“孩子”不能循环两次，如果是这样，正确的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:20:20.610

一段时间后，我发现您可以使用以下 lex 标签：

```
{{ *recursive children* }} 
```

但是您不能使用此标签自定义外观。而且您不能在子循环中使用子视图。

# c# - 为什么我不能将某些数据类型（如字符串）显式转换为 int、byte、float 等？C＃

> ID：10898693
> 
> 赞同：0
> 
> 时间：2012-06-05T13:57:30.820
> 
> 标签：c#, casting

我知道在允许投射`string`到.`bool``(int)MyString` `(short)MyBool``int``short`

不幸的是，我找不到解释，为什么。所以我在这里问。

为什么不允许显式转换某些数据类型（我不是在问如何将字符串转换为其他类型或类似的东西）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T14:01:50.050

请参阅：[强制转换和类型转换（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173105.aspx)

> 显式转换（强制转换）：显式转换需要强制转换运算符。当转换中可能会丢失信息，或者由于其他原因转换可能不成功时，需要进行强制转换。典型示例包括将数值转换为精度较低或范围较小的类型，以及将基类实例转换为派生类。

来自：[显式转换](http://msdn.microsoft.com/en-us/library/8s682k58%28v=vs.80%29.aspx)

> 一些编译器需要显式转换来支持缩小转换。它是一种特定于语言的转换方式。在某些语言中，例如 C# 和 C++，显式转换是使用强制转换来执行的。当您使用定义要执行的转换类型的数据类型为转换添加前缀时，就会发生强制转换。在 Visual Basic 中，CType 函数用于允许隐式不允许的数据类型的显式转换。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T14:04:46.117

这是语言设计者为强制程序员选择如何进行转换而做出的决定。

将此字符串视为 int: `"4.99999999999999999999999999999999999999999999999999999999"`。Int32 的答案应该是什么？`4`还是`5`？

考虑这个字符串到日期的转换：`"5/8/12"`. 在美国，这将是`May 8th`，而在英国，它将是`August 5th`。

*   [隐式转换](http://msdn.microsoft.com/en-us/library/ms173105.aspx)存在于不会损失精度的地方。

*   在安全转换（没有误解数据的风险）的情况下存在[显式转换，但可能会丢失一些精确信息。](http://msdn.microsoft.com/en-us/library/ms173105.aspx)

*   其余情况存在转换，例如字符串到 int、bool、日期等。

# ruby-on-rails - Rails 和 Bluepill，如何监控子进程

> ID：10898698
> 
> 赞同：2
> 
> 时间：2012-06-05T13:57:40.900
> 
> 标签：ruby-on-rails, ruby, delayed-job

我有 bluepill 设置来生成和监控 delay_job 进程。我目前有 bluepill 监控 CPU 使用情况。我排队到延迟作业工作者的作业是用于使用 ffmpeg 从视频创建缩略图。

我希望 bluepill 不仅可以监控延迟的工作人员，还可以监控它的子进程。我不认为这是默认行为，我知道使用 process.monitor_children。排队进入延迟作业的 rails 方法使用 system() 命令调用 ffmpeg。延迟的工作可以监控吗？

# php - 如何删除一个键并从 PHP 数组中返回值？

> ID：10898699
> 
> 赞同：16
> 
> 时间：2012-06-05T13:57:41.063
> 
> 标签：php, arrays

使用 PHP 时，我发现自己经常编写这样的代码：

```
$target = $_SESSION[AFTER_LOGIN_TARGET];
unset($_SESSION[AFTER_LOGIN_TARGET]);
return $target; 
```

在 Python 中，有一种`dict.pop`方法可以让我在一个语句中执行类似的操作，而无需临时变量：

```
return session.pop(AFTER_LOGIN_TARGET) 
```

PHP中是否有类似的功能或技巧？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T14:04:42.727

我没有看到内置函数，但您可以轻松创建自己的函数。

```
/**
 * Removes an item from the array and returns its value.
 *
 * @param array $arr The input array
 * @param $key The key pointing to the desired value
 * @return The value mapped to $key or null if none
 */
function array_remove(array &$arr, $key) {
    if (array_key_exists($key, $arr)) {
        $val = $arr[$key];
        unset($arr[$key]);

        return $val;
    }

    return null;
} 
```

您可以将它与任何数组一起使用，例如`$_SESSION`：

```
return array_remove($_SESSION, 'AFTER_LOGIN_TARGET'); 
```

**短而甜**

在 PHP 7+ 中，您可以使用[null 合并运算符](https://www.php.net/manual/en/migration70.new-features.php#migration70.new-features.null-coalesce-op)来大大缩短此功能。你甚至不需要`isset()`！

```
function array_remove(array &$arr, $key) {
    $val = $arr[$key] ?? null;
    unset($arr[$key]);
    return $val;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:02:54.273

为什么要使用辅助函数？像这样的东西：

```
function getAndRemoveFromSession ($varName) {
    $var = $_SESSION[$varName];
    unset($_SESSION[$varName]);

    return $var;
} 
```

所以如果你打电话

```
$myVar = getAndRemoveFromSession ("AFTER_LOGIN_TARGET"); 
```

你有你要求的（试一试，我没有多次使用 php :-]）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-31T03:15:53.483

我认为您正在寻找的是 array_slice()

```
$target = array_slice(
    $_SESSION, 
    array_search('AFTER_LOGIN_TARGET', $_SESSION),
    1
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-23T15:41:44.467

[这个答案](https://stackoverflow.com/a/10898827/1000608)的变体，使用空合并。

```
function array_remove(array &$arr, $key) {
    $value = $arr[$key] ?? null;
    unset($arr[$key]);
    return $value;
} 
```

# nhibernate - 如何从 nHibernate 条件查询中删除/撤消 .SetMaxResults(n) / .SetFirstResult(n)？

> ID：10898701
> 
> 赞同：2
> 
> 时间：2012-06-05T13:57:46.303
> 
> 标签：nhibernate

有没有办法从已经构建的 DetachedCriteria 中删除/撤消 .SetMaxResults() / .SetFirstResults() ？

不改变原来的 DetachedCriteria 就可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T13:57:46.583

是的，您可以通过将其值设置为“-1”来删除/撤消它，nHibernate 内部使用静态值 NHibernate.Engine.RowSelection.NoValue

```
criteria.SetMaxResults(NHibernate.Engine.RowSelection.NoValue);
criteria.SetFirstResult(NHibernate.Engine.RowSelection.NoValue); 
```

如果要保留原始 DetachedCriteria，则需要在更改 .SetMaxResults / .SetFirstResult 之前创建一个克隆

```
 DetachedCriteria clonedCriteria = NHibernate.CriteriaTransformer.Clone(originalCriteria)
                 .SetMaxResults(NHibernate.Engine.RowSelection.NoValue)
                 .SetFirstResult(NHibernate.Engine.RowSelection.NoValue); 
```

# jquery - Jquery 在可拖动的 div 中写入

> ID：10898705
> 
> 赞同：0
> 
> 时间：2012-06-05T13:57:55.647
> 
> 标签：jquery, jquery-ui

我正在使用 Jquery UI 库。我想在单击时提供在可拖动 div 内写入文本的功能。我希望当用户单击 div 时，应该出现光标并且用户可以在其中写入文本。

请使用工作代码示例建议解决方案。

这是示例代码：-

```
<script>
      $(function() { 
             $( "#dv1" ).draggable();    
         });
</script>

<div id="dv1">
<p>Drag me around</p>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:36:50.227

我进一步构建了 Jesse 的解决方案，当 textarea 失去焦点时，将 textarea 换回一个段落。这确保您可以`div`在编辑其内容后拖动。

看看[小提琴](http://jsfiddle.net/MattiasBuelens/aW8ZY/)！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:13:31.283

您可以在可拖动容器中添加一个 textarea 并在单击时显示它：

[http://jsfiddle.net/GwTt3/](http://jsfiddle.net/GwTt3/)

```
<div id="dv1">
    <p>Drag me around<textarea></textarea></p>
</div>​

​#dv1 p textarea{
 display: none;   
}​

$("#dv1").draggable(); 
$('p').on('click', function(){
   $(this).find('textarea').show(); 
}); 
```

​另一种选择是动态添加文本区域：

[http://jsfiddle.net/ZrHHb/](http://jsfiddle.net/ZrHHb/)

```
$( "#dv1" ).draggable();

$('p').on('click', function(e) {
   var replace = $(this);    
   var ele = $('<textarea>')
       .val(replace.text())
       .insertAfter(replace);

   replace.hide();    
}); 
```

​</p>

# sql - 如果 object_id 不为空，则创建/更改过程然后丢弃？

> ID：10898710
> 
> 赞同：2
> 
> 时间：2012-06-05T13:58:09.067
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

我希望该过程首先检查临时表是否已经存在。如果是，则删除表格并继续选择表格。但我得到了这个错误：

```
'CREATE/ALTER PROCEDURE' must be the first statement in a query batch. 
```

我的代码如下所示：

```
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[GetData]
    @Param_Id int
AS
BEGIN

If OBJECT_ID('temp_table') is not null
drop table temp_table

select data_info into temp_table
from data_info_table1

END 
```

但我不断收到同样的错误。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T12:18:23.217

GO 命令表示一批 T-SQL 语句的结束。GO 命令之后的任何语句都表示新一批查询或 T-SQL 语句的开始。因此，我建议您删除开头的 GO 命令并保留 CREATE 语句之前的命令，因此现在它成为后续查询批处理中的第一个语句。

该声明将如下所示

```
SET ANSI_NULLS ON

SET QUOTED_IDENTIFIER ON

GO
CREATE PROCEDURE [dbo].[GetData] @Param_Id int
AS
BEGIN

If OBJECT_ID('temp_table') IS NOT NULL DROP table temp_table

SELECT data_info INTO temp_table FROM data_info_table1

END
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:18:09.677

你想让程序去 ansi Nulls 吗？尝试在程序内部设置您的 Set Ansi Null On。

此外，如果您手动执行此操作，您可以首先通过仅选择该代码并运行它来更改选项，然后仅选择存储过程并单独运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T21:30:39.057

尝试将 GO 放在 DROP TABLE 之后。我发现 IF OBJECT_ID( **) IS NOT NULL DROP TABLE ** 本身并不总是有效，但在它之后使用 GO 似乎是可靠的： IF OBJECT_ID(** ) IS NOT NULL DROP TABLE ** GO

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-03T21:20:40.700

您不想因为您在数据库中使用永久结构而造成 2 个不同的用户丢失他们的数据的可能性，对吗？如果您创建静态表会发生什么。然后它实际上非常简单。如果您使用会话临时表（名称看起来像 #temp_table），则需要在 tempdb 数据库中查找这些内容，如下所示：

```
IF OBJECT_ID('tempdb..#temp_table') IS NOT NULL 
```

这样做只是一种预防措施，因为名称以 # 开头的表会在查询完成后被删除，并且这些表是特定于查询的，这意味着它不会干扰其他用户或请求的并行连接。你的整个脚本应该是这样的：

```
GO
If OBJECT_ID('GetData') is not null
      drop PROCEDURE GetData
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[GetData]
    @Param_Id int
AS
BEGIN

   If OBJECT_ID('tempdb..#temp_table') is not null
        drop table #temp_table

   select data_info into #temp_table
   from data_info_table1

    -- do what ever you need to do here with you data and spit it out to user.
END
GO 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T15:53:02.297

当脚本如下所示时，我收到相同的错误消息。这意味着`GO`缺少声明。

```
if Exists(select object_id from sys.objects where name = 'GetData' and type = 'p')
Begin
    Drop Proc GetData
End
GO --Missing part
CREATE PROCEDURE [dbo].[GetData]
@Param_Id int
AS
BEGIN
    If OBJECT_ID('temp_table') is not null
       drop table temp_table

    select data_info into temp_table from data_info_table1
END 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-15T15:07:09.387

存在编译器错误。如果你真的想创建这个过程并且表 temp_table 是真正的 tamp 表，你可以在创建过程之前尝试删除它。像这样：

```
If OBJECT_ID('temp_table') is not null
drop table temp_table
go

create PROCEDURE [dbo].[GetData]
    @Param_Id int
AS
BEGIN

If OBJECT_ID('temp_table') is not null
drop table temp_table

select data_info into temp_table
from data_info_table1

END 
```

或者真的使用像#table、##table 或@table 这样的临时表

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-05T14:05:57.187

如果你用这个改变你的存储过程怎么办？：

```
CREATE PROCEDURE [dbo].[GetData]
    @Param_Id int
AS
BEGIN

If EXISTS(SELECT * FROM sys.tables WHERE name = 'temp_table')
BEGIN
    drop table temp_table
END

DECLARE @SQL VARCHAR(1000)
SET @SQL = '
select data_info into temp_table
from data_info_table1'

EXEC(@SQL)

END 
```

# delphi - 使用 shellexecute 的“printto”的参数是什么？

> ID：10898712
> 
> 赞同：6
> 
> 时间：2012-06-05T13:58:09.563
> 
> 标签：delphi, winapi, printing, shellexecute

我正在使用 Delphi 的 winapi ShellExecute 尝试打印到用户选择的打印机而不是默认打印机。我正在尝试使用 printto 动词找出命令的语法。

如果我想将 manual.pdf 打印到 IP 地址为 192.168.1.49 的 HP Laser Jet 4，示例 shell 执行语句会是什么样子？

（这只是一个例子，但如果你能帮助我，我可以从那里拿走）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:12:48.067

您需要在 arguments 参数中传递打印机的网络网络地址。

```
ShellExecute(
  WindowHandle,
  'printto',
  PChar(DocumentName),
  PChar(PrinterNetworkAddress),
  nil,
  SW_HIDE
); 
```

# sql - Reporting Services：将过程用作数据集？

> ID：10898715
> 
> 赞同：5
> 
> 时间：2012-06-05T13:58:17.407
> 
> 标签：sql, sql-server, sql-server-2008, reporting-services, reporting

我从 Reporting Services 开始。我正在运行 SQL 2008 R2 Standard。Reporting Services 在同一台服务器上启动并运行。

`int`我创建了一个以一个为参数的存储过程。在 SQL Server 中，我以用户“A”的身份运行它没有问题。

我创建了一个到 SQL 的共享连接（使用 sql 用户 A），并且我正在创建一个嵌入式数据集。当我单击“存储过程”单选按钮时，我必须填写一些信息。我设置了有权连接到 Reporting Services 的 windows 用户。

在此之后，我有一个存储过程列表，但不是我创建的那个：![存储过程列表](../Images/0d58837aaa3576403ee21b5d8a5b1854.png)

但是我已经为用户 A 设置了所有权限： ![测试程序主题使用](../Images/d7a6cd2c2c405bd73d52116cd2fffb29.png)

我错过了什么？

我在创建项目之前创建了存储过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T18:24:05.260

听起来像是权限问题。检查您在 DataSource（而不是 DataSet）中使用的凭据 - 它需要是“UserA”，或者您需要为 DataSource 登录分配权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T07:19:05.047

我最后通过指定自己的过程名称结束了它的工作，它只是无法在列表中显示它们。

# ios - 由于 NSUnknownKeyException，无法从 RestKit 存储核心数据

> ID：10898716
> 
> 赞同：1
> 
> 时间：2012-06-05T13:58:21.147
> 
> 标签：ios, core-data, restkit

我有一个返回数据的网络服务：

```
{"facebook_friends":[{"name":"Jennifer","id":"38493"},{"name":"Sarah","id":"363"}, 
```

这是我的代码：

```
RKManagedObjectStore* objectStore = [RKManagedObjectStore objectStoreWithStoreFilename:@"MyApp.sqlite"];
RKObjectManager* objectManager = [RKObjectManager objectManagerWithBaseURLString:@"http://192.168.85.128"];
objectManager.objectStore = objectStore;

RKManagedObjectMapping *friendMapping = [RKManagedObjectMapping mappingForClass:[Friend class] inManagedObjectStore:objectStore];
[friendMapping mapKeyPath:@"id" toAttribute:@"facebook_id"];
[friendMapping mapKeyPath:@"name" toAttribute:@"name"];
friendMapping.primaryKeyAttribute = @"facebook_id";

[[RKObjectManager sharedManager].mappingProvider setMapping:friendMapping forKeyPath:@"facebook_friends"];

[objectManager loadObjectsAtResourcePath:@"/sharing/friends_facebook.json" delegate:self]; 
```

但我收到此错误：

```
2012-06-05 09:53:14.098 promobust[10071:1520b] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<NSManagedObject 0x6d153b0> setValue:forUndefinedKey:]: the entity Friend is not key value coding-compliant for the key "facebook_id".' 
```

鉴于每个实体都有一个 id 属性，我不明白有什么问题 - 任何人都看到我做错了什么？

更新：朋友班：

```
@interface Friend : NSManagedObject
    @property (nonatomic, retain) NSNumber* facebook_id;
    @property (nonatomic, retain) NSString* name;

- (BOOL)validateName:(id *)ioValue error:(NSError **)outError;

@end

@implementation Friend
    // We use @dynamic for the properties in Core Data
    @dynamic facebook_id;
    @dynamic name;

- (BOOL)validateName:(id *)ioValue error:(NSError **)outError {
    NSLog(@"Validating Friend");
    return YES;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:22:02.763

如果我没有从我的应用程序中删除 CoreData 模型，那将会有所帮助！

它仍然无法正常工作，但出现了不同的错误 - 我将关闭此问题。

# mysql - 带有mysql JOIN的多个表

> ID：10898717
> 
> 赞同：1
> 
> 时间：2012-06-05T13:58:22.113
> 
> 标签：mysql

因此，我想了解用户在特定课程中进行测验所花费的时间。

这是我当前的代码。

```
$study_time = "SELECT SUM(time) as study_time FROM user_quizzes
                        JOIN course_topic_badges ON course_topic_badges.id = user_quizzes.badge_id
                        JOIN course_topics ON course_topic_badges.topic_id = course_topics.id
                        JOIN courses ON course_topics.course_id = courses.id
                        WHERE user_id = ".$user_id." AND courses.id = ".$subject; 
```

获得我需要的东西感觉就像一个可怕的查询。有没有更好的方法来构建我的数据库，或者运行这个不会那么史诗般的查询？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:04:42.897

在开头使用“解释”语句检查您的查询。如果设置了所有连接/关系并且索引不是 Null，则无需更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:04:51.067

这并不可怕，但您可以通过添加别名来稍微压缩它：

```
$study_time = "SELECT SUM(time) as study_time FROM user_quizzes uq
    JOIN course_topic_badges ctb ON ctb.id = uq.badge_id
    JOIN course_topics ct ON ctb.topic_id = ct.id
    JOIN courses c ON ct.course_id = c.id
    WHERE user_id = ".$user_id." AND c.id = ".$subject; 
```

# scala - 如何在 playframework 2 Async 块（scala）中处理异常

> ID：10898719
> 
> 赞同：10
> 
> 时间：2012-06-05T13:58:30.057
> 
> 标签：scala, exception-handling, validation, playframework-2.0

我的控制器操作代码如下所示：

```
 def addIngredient() = Action { implicit request =>
    val boundForm = ingredientForm.bindFromRequest
    boundForm.fold(
      formWithErrors => BadRequest(views.html.Admin.index(formWithErrors)),
      value => {
        Async {
          val created = Service.addIngredient(value.name, value.description)
          created map { ingredient =>
            Redirect(routes.Admin.index()).flashing("success" -> "Ingredient '%s' added".format(ingredient.name))
          }

          // TODO on exception do the following
          // BadRequest(views.html.Admin.index(boundForm.copy(errors = Seq(FormError("", ex.getMessage())))))
        }
      })
  } 
```

我的 Service.addIngredient(...) 返回一个 Promise[Ingredient] 但也可以抛出一个自定义 ValidationException。当抛出此异常时，我想返回注释代码。

目前页面呈现为 500 并且在我的日志中：

> 播放 - 等待承诺，但出现错误：名称为“测试”的成分已存在。services.ValidationException：名称为“test”的成分已存在。

两个问题：

*   从我的服务中返回此异常是一个坏主意，是否有更好/更多的 scala 方法来处理这种情况？
*   我如何捕捉异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:31:19.907

我想说一种纯粹的功能方式是使用一种可以保持有效和错误状态的类型。

为此，您可以使用[验证](http://scalaz.googlecode.com/svn/continuous/latest/browse.sxr/scalaz/Validation.odscala.html)表单 scalaz

但是，如果不需要更多来自 scalaz 的内容（您将 ^^），您可以使用一个非常简单的东西，使用 a`Promise[Either[String, Ingredient]]`作为结果及其`fold`在 Async 块中的方法。也就是说，`map`在兑现承诺时和兑现的东西上转换价值`fold`。

好点 => 没有例外 => 每件事都是输入检查:-)

**编辑**

它可能需要更多信息，这里有两个选项：try catch，感谢@kheraud）和 Either。没放`Validation`，有需要的问我。对象应用扩展控制器{

```
 def index = Action {
    Ok(views.html.index("Your new application is ready."))
  }

  //Using Try Catch
  //  What was missing was the wrapping of the BadRequest into a Promise since the Async
  //    is requiring such result. That's done using Promise.pure
  def test1 = Async {
    try {
      val created = Promise.pure(new {val name:String = "myname"})
      created map { stuff =>
        Redirect(routes.Application.index()).flashing("success" -> "Stuff '%s' show".format(stuff.name))
      }
    } catch {
      case _ => {
        Promise.pure(Redirect(routes.Application.index()).flashing("error" -> "an error occurred man"))
      }
    }
  }

  //Using Either (kind of Validation)
  //  on the Left side => a success value with a name
  val success = Left(new {val name:String = "myname"})
  //  on the Right side the exception message (could be an Exception instance however => to keep the stack)
  val fail = Right("Bang bang!")

  // How to use that
  //   I simulate your service using Promise.pure that wraps the Either result
  //    so the return type of service should be Promise[Either[{val name:String}, String]] in this exemple
  //   Then while mapping (that is create a Promise around the convert content), we folds to create the right Result (Redirect in this case).
  // the good point => completely compiled time checked ! and no wrapping with pure for the error case.
  def test2(trySuccess:Boolean) = Async {
      val created = Promise.pure(if (trySuccess) success else fail)
      created map { stuff /* the either */ =>
        stuff.fold(
          /*success case*/s => Redirect(routes.Application.index()).flashing("success" -> "Stuff '%s' show".format(s.name)),
          /*the error case*/f => Redirect(routes.Application.index()).flashing("error" -> f)
        )

      }

  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:48:11.120

您不能在 Async 块中捕获异常吗？

```
Async {
    try {
        val created = Service.addIngredient(value.name, value.description)
        created map { ingredient =>
            Redirect(routes.Admin.index()).flashing("success" -> "Ingredient '%s' added".format(ingredient.name))
        }
     } catch {
         case _ => {
             Promise.pure(Redirect(routes.Admin.index()).flashing("error" -> "Error while addin ingrdient"))
         }
     }
} 
```

# android - 解析复杂响应，即响应在 Android 中来自 SOAP 的另一个数组中包含一个数组

> ID：10898723
> 
> 赞同：1
> 
> 时间：2012-06-05T13:58:43.437
> 
> 标签：android, soap, ksoap2, android-ksoap2, ksoap

我正在尝试通过以下代码解析 Android 中的 SOAP：

```
private final String NAMESPACE = "http://tempuri.org/";
    private final String URL = "";
    private final String SOAP_ACTION = "http://tempuri.org/GetSeatLayout";
    private final String METHOD_NAME = "GetSeatLayout";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.main);

        ArrayList<Object>  strAreaCategoryCode = new ArrayList<Object>(); 
        ArrayList<Object>  intAreaNumber = new ArrayList<Object>(); 
        ArrayList<Object>  strClass = new ArrayList<Object>(); 
        ArrayList<Object>  objArrseatInfo = new ArrayList<Object>(); 
        ArrayList<Object>  intExceptioncode = new ArrayList<Object>(); 
        ArrayList<Object>  ScreenId = new ArrayList<Object>(); 
        ArrayList<Object>  StatusId = new ArrayList<Object>(); 
        ArrayList<Object>  TicketRate = new ArrayList<Object>(); 
        ArrayList<Object>  Charge = new ArrayList<Object>(); 
        ArrayList<Object>  OtherCharge = new ArrayList<Object>(); 
        ArrayList<Object>  TotalCharge = new ArrayList<Object>(); 

        ArrayList<Object>  strRow = new ArrayList<Object>(); 
        ArrayList<Object>  intSeat = new ArrayList<Object>(); 
        ArrayList<Object>  intSeatID = new ArrayList<Object>(); 
        ArrayList<Object>  rowseatStatus = new ArrayList<Object>(); 
        ArrayList<Object>  hasCurrentOrder = new ArrayList<Object>(); 

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
        Log.e("","request"+request);

        String strCinemaCode ="0002";
        long lngSessionId=103286;
        String strShowClass = "EXECUTIVE";
        long lngNoOfTickets = 1;
        int intBookId = 0;
        long UniqueReqI = 0;
        String SeatSelected = ",O_14";
        int intAggregatorID = 1; //1-fame / 2-Inox
        String strCTransId  = "20002070519";

        PropertyInfo strCinemaCode1 =new PropertyInfo();
        strCinemaCode1.setName("strCinemaCode");
        strCinemaCode1.setValue(strCinemaCode);
        strCinemaCode1.setType(String.class);
        request.addProperty(strCinemaCode1);

        PropertyInfo lngSessionId1 =new PropertyInfo();
        lngSessionId1.setName("lngSessionId");
        lngSessionId1.setValue(lngSessionId);
        //lngSessionId1.setType(long.class);
        request.addProperty(lngSessionId1);

        PropertyInfo strShowClass1 =new PropertyInfo();
        strShowClass1.setName("strShowClass");
        strShowClass1.setValue(strShowClass);
        strShowClass1.setType(String.class);
        request.addProperty(strShowClass1);

        PropertyInfo lngNoOfTickets1 =new PropertyInfo();
        lngNoOfTickets1.setName("lngNoOfTickets");
        lngNoOfTickets1.setValue(lngNoOfTickets);
        //lngNoOfTickets1.setType(long.class);
        request.addProperty(lngNoOfTickets1);

        PropertyInfo intBookId1 =new PropertyInfo();
        intBookId1.setName("intBookId");
        intBookId1.setValue(intBookId);
        intBookId1.setType(Integer.class);
        request.addProperty(intBookId1);

        PropertyInfo UniqueReqI1 =new PropertyInfo();
        UniqueReqI1.setName("UniqueReqI");
        UniqueReqI1.setValue(UniqueReqI);
       // UniqueReqI1.setType(long.class);
        request.addProperty(UniqueReqI1);

        PropertyInfo SeatSelected1 =new PropertyInfo();
        SeatSelected1.setName("SeatSelected");
        SeatSelected1.setValue(SeatSelected);
        SeatSelected1.setType(String.class);
        request.addProperty(strCinemaCode1);

        PropertyInfo intAggregatorID1 =new PropertyInfo();
        intAggregatorID1.setName("intAggregatorID");
        intAggregatorID1.setValue(intAggregatorID);
        intAggregatorID1.setType(Integer.class);
        request.addProperty(intAggregatorID1);

        PropertyInfo strCTransId1 =new PropertyInfo();
        strCTransId1.setName("strCTransId");
        strCTransId1.setValue(strCTransId);
        strCTransId1.setType(String.class);
        request.addProperty(strCTransId1);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        try {
            androidHttpTransport.call(SOAP_ACTION, envelope);
            //SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
            SoapObject response = (SoapObject)envelope.getResponse();

            Log.e("","response:"+response.toString());

            String []categories = new String [response.getPropertyCount()];
            for (int i = 0; i < categories.length; i++) {
                SoapObject pii = (SoapObject)response.getProperty(i);

                strAreaCategoryCode.add(pii.getProperty(0));
                Log.e(""," strAreaCategoryCode= "+ strAreaCategoryCode.get(i));

                intAreaNumber.add(pii.getProperty(1));
                Log.e(""," intAreaNumber= "+ intAreaNumber.get(i));

                strClass.add(pii.getProperty(2));
                Log.e(""," strClass= "+ strClass.get(i));

                objArrseatInfo.add(pii.getProperty(3));
                Log.e(""," objArrseatInfo= "+ objArrseatInfo.get(i));

                intExceptioncode.add(pii.getProperty(4));
                Log.e("","intExceptioncode= "+ intExceptioncode.get(i));

                ScreenId.add(pii.getProperty(5));
                Log.e("","ScreenId= "+ ScreenId.get(i));

                StatusId.add(pii.getProperty(6));
                Log.e(""," StatusId= "+ StatusId.get(i));

                TicketRate.add(pii.getProperty(7));
                Log.e(""," TicketRate= "+ TicketRate.get(i));

                Charge.add(pii.getProperty(8));
                Log.e(""," Charge= "+ Charge.get(i));

                OtherCharge.add(pii.getProperty(9));
                Log.e(""," OtherCharge= "+ OtherCharge.get(i));

                TotalCharge.add(pii.getProperty(10));
                Log.e(""," CinemaCode= "+ TotalCharge.get(i));

            }
        } catch (Exception e) {
            Log.e("","Error In some connection");
           String response =  e.toString();
           Log.e("",""+response);
        }
    }
} 
```

通过使用上面的代码，我在日志表中得到以下响应

```
06-05 18:56:22.937: E/(1689):  strAreaCategoryCode= 0000000007
06-05 18:56:22.937: E/(1689):  intAreaNumber= 1
06-05 18:56:22.947: E/(1689):  strClass= SILVER
06-05 18:56:23.027: E/(1689):  objArrseatInfo= anyType{seatInfo=anyType{strRow=A; intRowID=1; intSeat=3; intSeatID=3; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=4; intSeatID=4; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=5; intSeatID=5; rowseatStatus=Available; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=6; intSeatID=6; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=7; intSeatID=7; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=8; intSeatID=8; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=9; intSeatID=9; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=10; intSeatID=10; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=11; intSeatID=11; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=12; intSeatID=12; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=13; intSeatID=13; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=14; intSeatID=14; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=15; intSeatID=15; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=16; intSeatID=16; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=17; intSeatID=17; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=18; intSeatID=18; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=19; intSeatID=19; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=20; intSeatID=20; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=21; intSeatID=21; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=22; intSeatID=22; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=23; intSeatID=23; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=24; intSeatID=24; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=25; intSeatID=25; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=26; intSeatID=26; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=27; intSeatID=27; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=28; intSeatID=28; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=29; intSeatID=29; rowseatStatus=Available; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=30; intSeatID=30; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=31; intSeatID=31; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=32; intSeatID=32; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=A; intRowID=1; intSeat=33; intSeatID=33; rowseatStatus=Sold; hasCurrentOrder=false; }; }
06-05 18:56:23.027: E/(1689): intExceptioncode= 0
06-05 18:56:23.038: E/(1689): ScreenId= 0
06-05 18:56:23.038: E/(1689):  StatusId= 0
06-05 18:56:23.038: E/(1689):  TicketRate= 0
06-05 18:56:23.038: E/(1689):  Charge= 0
06-05 18:56:23.057: E/(1689):  OtherCharge= 0
06-05 18:56:23.077: E/(1689):  CinemaCode= 0

06-05 18:56:23.077: E/(1689):  strAreaCategoryCode= 0000000007
06-05 18:56:23.088: E/(1689):  intAreaNumber= 1
06-05 18:56:23.088: E/(1689):  strClass= SILVER
06-05 18:56:23.227: E/(1689):  objArrseatInfo= anyType{seatInfo=anyType{strRow=B; intSeat=0; intSeatID=0; rowseatStatus=Available; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=4; intSeatID=4; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=5; intSeatID=5; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=6; intSeatID=6; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=7; intSeatID=7; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=8; intSeatID=8; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intSeat=0; intSeatID=0; rowseatStatus=Available; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intSeat=0; intSeatID=0; rowseatStatus=Available; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=11; intSeatID=11; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=12; intSeatID=12; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=13; intSeatID=13; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=14; intSeatID=14; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=15; intSeatID=15; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=16; intSeatID=16; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=17; intSeatID=17; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=18; intSeatID=18; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=19; intSeatID=19; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=20; intSeatID=20; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=21; intSeatID=21; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=22; intSeatID=22; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=23; intSeatID=23; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=24; intSeatID=24; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=25; intSeatID=25; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intSeat=0; intSeatID=0; rowseatStatus=Available; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intSeat=0; intSeatID=0; rowseatStatus=Available; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=28; intSeatID=28; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=29; intSeatID=29; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=30; intSeatID=30; rowseatStatus=Available; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=31; intSeatID=31; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intRowID=2; intSeat=32; intSeatID=32; rowseatStatus=Sold; hasCurrentOrder=false; }; seatInfo=anyType{strRow=B; intSeat=0; intSeatID=0; rowseatStatus=Available; hasCurrentOrder=false; }; }
06-05 18:56:23.237: E/(1689): intExceptioncode= 0
06-05 18:56:23.249: E/(1689): ScreenId= 0
06-05 18:56:23.249: E/(1689):  StatusId= 0
06-05 18:56:23.258: E/(1689):  TicketRate= 0
06-05 18:56:23.258: E/(1689):  Charge= 0
06-05 18:56:23.278: E/(1689):  OtherCharge= 0
06-05 18:56:23.278: E/(1689):  CinemaCode= 0
06-05 18:56:23.318: E/(1689):  strAreaCategoryCode= 0000000007
06-05 18:56:23.318: E/(1689):  intAreaNumber= 1
06-05 18:56:23.327: E/(1689):  strClass= SILVER 
```

等等..

现在查看响应变量 objArrseatInfo 也是一个数组，其中包含许多变量。

我试图将这些变量放入另一个变量但没有用。我怎样才能得到那些类似于主数组的变量？

例如

```
variable strAreaCategoryCode is getting value of pii.getProperty(0)
same way strRow should get the value of strRow from objArrseatInfo= anyType{seatInfo=anyType{strRow=B; intSeat=0; intSeatID=0; rowseatStatus=Available; hasCurrentOrder=false; }; 
```

我是 KSoap 库的新手，尝试后我无法解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:01:55.270

您可以使用此代码将所有 seatInfo 对象保存到`ArrayList`.

首先添加pojo，如下所示：

```
public class SeatInfo {
    private String strRow;
    private int intRowId;
    private int intSeat;
    private int intSeatId;
    private String rowseatStatus;
    private boolean hasCurrentOrder;

    public String getStrRow() {
        return strRow;
    }
    public void setStrRow(String strRow) {
        this.strRow = strRow;
    }
    public int getIntRowId() {
        return intRowId;
    }
    public void setIntRowId(int intRowId) {
        this.intRowId = intRowId;
    }
    public int getIntSeat() {
        return intSeat;
    }
    public void setIntSeat(int intSeat) {
        this.intSeat = intSeat;
    }
    public int getIntSeatId() {
        return intSeatId;
    }
    public void setIntSeatId(int intSeatId) {
        this.intSeatId = intSeatId;
    }
    public String getRowseatStatus() {
        return rowseatStatus;
    }
    public void setRowseatStatus(String rowseatStatus) {
        this.rowseatStatus = rowseatStatus;
    }
    public boolean isHasCurrentOrder() {
        return hasCurrentOrder;
    }
    public void setHasCurrentOrder(boolean hasCurrentOrder) {
        this.hasCurrentOrder = hasCurrentOrder;
    }
    @Override
    public String toString() {
        return "SeatInfo [strRow=" + strRow + ", intRowId=" + intRowId
                + ", intSeat=" + intSeat + ", intSeatId=" + intSeatId
                + ", rowseatStatus=" + rowseatStatus + ", hasCurrentOrder="
                + hasCurrentOrder + "]";
    }
} 
```

并解析：

```
/** ... */

            /** All the SeatInfo objects */
            SoapObject soapSeatInfo = (SoapObject) pii.getProperty(3);

            /** SeatInfo objects count */
            int seatInfoCount = soapSeatInfo.getPropertyCount();

            /** List to hold all the SeatInfo objects after parsing */
            List<SeatInfo> listSeatInfo = new ArrayList<SeatInfo>();

            for (int j = 0; j < seatInfoCount; j++) {
                /** Temp SeatInfo soap object */
                SoapObject soChild = (SoapObject) soapSeatInfo.getProperty(j);

                /** Temp SeatInfo object */
                SeatInfo si = new SeatInfo();

                /** Setting emp SeatInfo objects all properties */
                si.setStrRow(soChild.getPropertyAsString("strRow"));
                si.setIntRowId(Integer.parseInt(soChild.getPropertyAsString("strRow")));
                si.setIntSeat(Integer.parseInt(soChild.getPropertyAsString("strRow")));
                si.setIntSeatId(Integer.parseInt(soChild.getPropertyAsString("strRow")));
                si.setRowseatStatus(soChild.getPropertyAsString("strRow"));
                si.setHasCurrentOrder(Boolean.parseBoolean(soChild.getPropertyAsString("strRow")));

                /** Add temp object to the list */
                listSeatInfo.add(si);
            }
            /** ... */ 
```

现在您有了一个包含所有`SeatInfo`对象的列表，名为**listSeatInfo**。而且您的每个 objArrseatInfo 肥皂对象如下所示（可能更容易理解）

```
objArrseatInfo= anyType{
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=3; intSeatID=3; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=4; intSeatID=4; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=5; intSeatID=5; rowseatStatus=Available; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=6; intSeatID=6; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=7; intSeatID=7; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=8; intSeatID=8; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=9; intSeatID=9; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=10; intSeatID=10; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=11; intSeatID=11; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=12; intSeatID=12; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=13; intSeatID=13; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=14; intSeatID=14; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=15; intSeatID=15; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=16; intSeatID=16; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=17; intSeatID=17; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=18; intSeatID=18; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=19; intSeatID=19; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=20; intSeatID=20; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=21; intSeatID=21; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=22; intSeatID=22; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=23; intSeatID=23; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=24; intSeatID=24; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=25; intSeatID=25; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=26; intSeatID=26; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=27; intSeatID=27; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=28; intSeatID=28; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=29; intSeatID=29; rowseatStatus=Available; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=30; intSeatID=30; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=31; intSeatID=31; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=32; intSeatID=32; rowseatStatus=Sold; hasCurrentOrder=false;
  };
  seatInfo=anyType{
    strRow=A; intRowID=1; intSeat=33; intSeatID=33; rowseatStatus=Sold; hasCurrentOrder=false;
  };
} 
```

# ms-access - MS Access 中的乘法运算

> ID：10898730
> 
> 赞同：2
> 
> 时间：2012-06-05T13:59:07.680
> 
> 标签：ms-access, vba, ms-access-2003

我希望能够将从两列中取出的两个数字相乘并将其显示在第三列中。

我有两列，用户在其中输入数字，第三列在用户点击输入时自动将数字相乘。

但是我有 100 个这样的文本框，我不想为每一个都编写代码。

有没有办法像在 excel 中一样执行此操作？用excel做起来真的很简单。

这是我必须为每个文本框编写的内容：

```
Private Sub Text03_GotFocus()
Text05.Value = Val(Text03.Value) * Val(Text04.Value) * 12
End Sub

Private Sub Text03_LostFocus()
Text05.Value = Val(Text03.Value) * Val(Text04.Value) * 12
End Sub

Private Sub Text04_GotFocus()
Text05.Value = Val(Text03.Value) * Val(Text04.Value) * 12
End Sub

Private Sub Text04_LostFocus()
Text05.Value = Val(Text03.Value) * Val(Text04.Value) * (12)
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:44:43.587

如果我正确理解您的情况，在设计视图中打开表单会更简单，然后打开`Text05`文本框的属性表并将其用作`Control Source`属性（在`Data`属性表的选项卡上）：

```
= Val([Text03]) * Val([Text04]) * 12 
```

那么你不应该需要 VBA 代码来获得/失去焦点事件。每当值或更改时， Access 都会*自动*更新。`Text05``Text03``Text04`

# hibernate - Hiberante 3.0 内连接两个不同实体的外键

> ID：10898734
> 
> 赞同：1
> 
> 时间：2012-06-05T13:59:31.657
> 
> 标签：hibernate

我对此很陌生。请帮我。

我的列表控制器如下所示： `@RequestMapping(value="/possalesList.htm",method=RequestMethod.GET) public String PosSalesList(@ModelAttribute("possales")PSales sales,@RequestParam(value = "salesItemID", required = false)Integer salesItemID,ModelMap model) { List<POSSalesItem> posSalesItemList = posSalesDao.listSalesItem(); model.addAttribute("possalesList", posSalesItemList);
return "possalesList"; }`

我的 hibernateDaoimpl 看起来像这样： `@SuppressWarnings("unchecked") @Transactional(readOnly=true) public List<POSSalesItem> listSalesItem() { return (List<POSSalesItem>)getHibernateTemplate().find("select POSSales.posSalesId , POSSalesItem.itemName from POSSales inner join POSSalesItem on POSSales.posSalesId=POSSalesItem.posSalesId"); }`

我的内部连接如下所示： `select POSSales.posSalesId , POSSalesItem.itemName from POSSales inner join POSSalesItem on POSSales.posSalesId=POSSalesItem.posSalesId`

外键在mysql中创建成功。

我正在做的是列出 POSSales 表中的 posSalesId 和 POSSalesItem 中的其他列。为此，我编写了这个连接查询，但它显示了一些错误。

我想在 posSalesId 列上进行内部连接，但出现以下错误：

org.springframework.orm.hibernate3.HibernateQueryException：意外令牌：在第 1 行附近，第 111 列 [select POSSales.posSalesId ，POSSalesItem.itemName from com.jewellery.entity.POSSales 内部连接 ​​POSSalesItem on POSSales.posSalesId=POSSalesItem.posSalesId]；嵌套异常是 org.hibernate.hql.ast.QuerySyntaxException：意外令牌：在第 1 行附近，第 111 列 [select POSSales.posSalesId ，POSSalesItem.itemName from com.jewellery.entity.POSSales 内部连接 ​​POSSalesItem on POSSales.posSalesId=POSSalesItem。 posSalesId] org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:660) org.springframework.orm.hibernate3.HibernateAccessor.convertHibernateAccessException(HibernateAccessor.java:412) org.springframework.orm.hibernate3.HibernateTemplate.doExecute(休眠模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:18:18.183

您的 HQL 语法`inner join POSSalesItem on POSSales.posSalesId=POSSalesItem.posSalesId`格式错误。

正确的语法是（没有`select`必要）

```
from POSSales s inner join s.POSSalesItemList 
```

您必须在映射（或注释）中实现的连接条件，您可以在其中告诉 POSSalesItemList 的成员是哪个类以及键列（连接列）是什么。为此，请查看 hibernate 文档，[与 annotations 的一对多关联](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#d0e2177)。

# c# - 参数化 SQL 查询

> ID：10898737
> 
> 赞同：4
> 
> 时间：2012-06-05T13:59:41.227
> 
> 标签：c#, .net, sql, tsql, ado.net

许多关于 C# 中的 SQL 参数的帖子，但我仍然缺少一些东西。我没有收到错误消息，但没有插入数据。什么不见​​了？我有名为 fname、lname、address、city、state 和 zip 的文本框。

```
 private void enter_button_Click(object sender, EventArgs e)
 {
    string first, last, addy, city1, stat, zippy;
    first = fname.Text; 
    SqlParameter firstparam;
    firstparam = new SqlParameter();
    firstparam.ParameterName = "@first";
    firstparam.Value = first;
    last = lname.Text;
    SqlParameter lastparam;
    lastparam = new SqlParameter();
    lastparam.ParameterName = "@last";
    lastparam.Value = last;
    addy = address.Text;
    SqlParameter addressparam;
    addressparam = new SqlParameter();
    addressparam.ParameterName = "@addy";
    addressparam.Value = addy;
    city1 = city.Text;
    SqlParameter cityparam;
    cityparam = new SqlParameter();
    cityparam.ParameterName = "@city1";
    cityparam.Value = city1;
    stat = state.Text;
    SqlParameter stateparam;
    stateparam = new SqlParameter();
    stateparam.ParameterName = "@stat";
    stateparam.Value = stat;
    zippy = zip.Text;
    SqlParameter zipparam;
    zipparam = new SqlParameter();
    zipparam.ParameterName = "@zippy";
    zipparam.Value = zippy;

    try
    {
        Validate(fname);
        Validate(lname);
        Validate(city);
        Validate(state);
    }
    catch (Exception ex)
    {
        throw new Exception(ex.ToString(), ex);
    }

    try
    {
        exValidate(address);
    }
    catch (Exception ex1)
    {
        throw new Exception(ex1.ToString(), ex1);
    }

    try
    {
        numValidate(zip);
    }
    catch (Exception ex2)
    {
        throw new Exception(ex2.ToString(), ex2);
    }

    string connection = "Data Source=TX-MANAGER;Initial Catalog=Contacts;Integrated Security=True";
    var sqlstring = string.Format("INSERT INTO Contacts ([First] ,[Last] ,[Address] ,[City] ,[State],[ZIP]) VALUES {0}, {1}, {2}, {3}, {4}, {5})", @first, @last, @addy, @city1, @stat, @zippy);
    SqlConnection conn = new SqlConnection(connection);
    SqlCommand comm = new SqlCommand();
    comm.CommandText = sqlstring;
    try
    {
        conn.Open();
        //SqlTransaction trans = conn.BeginTransaction();
        //comm.Transaction = trans;
        comm.Parameters.Add("@first", SqlDbType.Text);
        comm.Parameters.Add("@last", SqlDbType.Text);
        comm.Parameters.Add("@addy", SqlDbType.Text);
        comm.Parameters.Add("@city1", SqlDbType.Text);
        comm.Parameters.Add("@stat", SqlDbType.Text);
        comm.Parameters.Add("@zippy", SqlDbType.SmallInt);
    }
    catch (Exception commex)
    {
        throw new Exception(commex.ToString(), commex);
    }
    conn.Close();
} 
```

所以我改变了这个，仍然没有任何反应。

```
 string connection = "Data Source=TX-MANAGER;Initial Catalog=Contacts;Integrated Security=True";
        var sqlstring = string.Format("INSERT INTO Contacts ([First] ,[Last] ,[Address] ,[City] ,[State],[ZIP]) VALUES {0}, {1}, {2}, {3}, {4}, {5})", @first, @last, @addy, @city1, @stat, @zippy);
        SqlConnection conn = new SqlConnection(connection);
        SqlCommand comm = conn.CreateCommand();
        comm.CommandText = sqlstring;
        try
        {
            conn.Open();
            //SqlTransaction trans = conn.BeginTransaction();
            //comm.Transaction = trans;
            comm.Parameters.AddWithValue("@first", first);
            comm.Parameters.AddWithValue("@last", last);
            comm.Parameters.AddWithValue("@addy", addy);
            comm.Parameters.AddWithValue("@city1", city1);
            comm.Parameters.AddWithValue("@stat", stat);
            comm.Parameters.AddWithValue("@zippy", zippy);
            comm.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T14:02:15.953

你忘了执行命令；）

编辑：您也没有使用在方法开始时创建的参数。

```
 ...
    try
    {
        conn.Open();
        //SqlTransaction trans = conn.BeginTransaction();
        //comm.Transaction = trans;
        comm.Parameters.Add(firstparam);
        comm.Parameters.Add(lastparam);
        comm.Parameters.Add(addressparam);
        comm.Parameters.Add(cityparam);
        comm.Parameters.Add(stateparam);
        comm.Parameters.Add(zipparam);

        // This is what you forgot:
        comm.ExecuteNonQuery();
    }
    ... 
```

顺便说一句，不要做这样的事情：

```
 catch (Exception ex1)
    {
        throw new Exception(ex1.ToString(), ex1);
    } 
```

它没用，它只是增加了一个新级别的异常，而没有添加任何有用的东西。只需让异常在堆栈中冒泡，直到它到达一个实际有用的 catch 块。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T14:27:24.710

提供的示例中的关键问题是：

*   的定义`sqlstring`应该有字符串中的参数定义
*   通过创建新的错误对象引发错误时正在重置调用堆栈
*   和对象未正确开始处理（例如，`SqlConnection`调用不是异常处理程序部分的一部分。`SqlCommand``conn.Close()``Finally`
*   的`Value`未`SqlParameters`设置
*   对象上的`Execute`xx 方法`SqlCommand`未开始调用
*   字符串值存储在一个`varchar`类型中，而不是`Text`. Text 是已弃用的用于存储 blob 的 SQL Server 数据类型。

我将重构代码如下：

```
 private void enter_button_Click(object sender, EventArgs e)
     {
        var first = fname.Text; 
        var last = lname.Text;
        var addy = address.Text;
        var city1 = city.Text;
        var stat = state.Text;
        var zippy = zip.Text;

        Validate(fname);
        Validate(lname);
        Validate(city);
        Validate(state);
        exValidate(address);
        numValidate(zip);

        using (var conn = new SqlConnection("Data Source=TX-MANAGER;Initial Catalog=Contacts;Integrated Security=True"))
        using (var cmd = new SqlCommand(@"INSERT INTO Contacts ([First], [Last], [Address], [City], [State], [ZIP]) VALUES (@first, @last, @addy, @city1, @stat, @zippy)", conn))
        {
            cmd.Parameters.AddRange(
                new[]
                    {
                        new SqlParameter(@"first", SqlDbType.VarChar).Value = first,
                        new SqlParameter(@"last", SqlDbType.VarChar).Value = last,
                        new SqlParameter(@"addy", SqlDbType.VarChar).Value = addy,
                        new SqlParameter(@"city1", SqlDbType.VarChar).Value = city1,
                        new SqlParameter(@"state", SqlDbType.VarChar).Value = stat,
                        new SqlParameter(@"zippy", SqlDbType.SmallInt).Value = zippy
                    });
            conn.Open();
            cmd.ExecuteNonQuery();
        }
    } 
```

*注意：我更喜欢提供参数的数据类型，因为当没有提供类型时，SqlCE 并不总是能正常工作。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-05T14:06:21.410

这会更短：

```
using (SqlConnection connection = new SqlConnection(connectionString))
using (SqlCommand command = connection.CreateCommand())
{
    command.CommandText = "INSERT INTO Contacts ([First], [Last], [Address], [City], [State], [ZIP]) VALUES (@first, @last, @address, @city, @state, @zip)";

    command.Parameters.AddWithValue("@first", first);
    // or
    // command.Parameters.Add("@first", SqlDbType.Type).Value = first;
    // ...

    connection.Open();
    command.ExecuteNonQuery();
} 
```

* * *

但首先这是你错过的：

```
comm.Parameters.Add(firstparam);
// instead of
// comm.Parameters.Add("@first", SqlDbType.Text); 
```

和

```
command.ExecuteNonQuery(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-05T14:08:15.020

首先你没有执行命令，你需要调用`comm.ExecuteNonQuery();`，其次你的 SQL 字符串是错误的。这一行：

```
var sqlstring = string.Format("INSERT INTO Contacts ([First] ,[Last] ,[Address] ,[City],
[State],[ZIP]) VALUES {0}, {1}, {2}, {3}, {4}, {5})", @first, @last, @addy, @city1, 
@stat, @zippy) 
```

只能是：

```
var sqlstring = "INSERT INTO Contacts ([First] ,[Last] ,[Address] ,[City] ,[State],[ZIP]) 
                 VALUES (@first, @last, @addy, @city1, @stat, @zippy)"; 
```

第三，您实际上并没有将参数添加到命令中。您可以像这样创建一个参数：

```
SqlParameter zipparam;
zipparam = new SqlParameter();
zipparam.ParameterName = "@zippy";
zipparam.Value = zippy; 
```

但是您要添加以下内容：

```
comm.Parameters.Add("@zippy", SqlDbType.SmallInt); 
```

没有参考`zipparam`。这意味着该值`zippy`从未实际添加到命令中。您可以使用以下命令在一行中完成所有操作：

```
comm.Parameters.Add(new SqlParameter(@Zippy, SqlDbType.SmallInt)).Value = zippy; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-05T14:05:24.250

有很多方法可以解决它。其中一种方法是将 try 块中的行替换为：

```
comm.Parameters.AddWithValue("@first", first);
comm.Parameters.AddWithValue("@last", last);
comm.Parameters.AddWithValue("@addy", addy);
comm.Parameters.AddWithValue("@city1", city1);
comm.Parameters.AddWithValue("@stat", stat);
comm.Parameters.AddWithValue("@zippy", zippy); 
```

如果这样做，则不需要所有**SqlParameter**初始化

你显然需要执行命令：

```
comm.ExecuteNonQuery(); 
```

# facebook - Facebook Graph API Wall Feed 未返回所有图像

> ID：10898739
> 
> 赞同：1
> 
> 时间：2012-06-05T13:59:45.890
> 
> 标签：facebook, api, facebook-graph-api, facebook-wall

我正在尝试针对特定的墙提要发出请求，以将任何用户发布的所有（公共）图像拉到墙上。我的请求似乎返回了任何用户发布的任何帖子，但只返回了用户上传的照片，并传入了身份验证令牌。是否可以获得墙上所有公开照片的请求？

# jquery - 带有子菜单项的侧边栏菜单

> ID：10898745
> 
> 赞同：0
> 
> 时间：2012-06-05T14:00:17.483
> 
> 标签：jquery, html, css

我正在尝试为我的网站创建一个带有类别的侧边栏，因此当用户将鼠标悬停在侧边栏上的某个项目上时，会在右侧打开一个额外的子菜单，甚至可能是一个子子菜单。[在http://www.ebay.com](http://www.ebay.com)的左上角可以找到我正在尝试创建的一个完美的工作示例。

我的问题是，创建此菜单的最佳方法是什么？jQuery？仅 CSS/HTML？我应该使用 UL + LI 元素来创建菜单还是只使用下面的 div？我正在考虑在初始 div 中有一个隐藏的子菜单 div，我会使用 JQuery 在悬停时“显示”，这是一个很好的解决方案吗？

我很感激任何关于这样做的好方法的建议或建议。

```
<div id="container">
        <div class="menu-item">Cars > (Ford, Chevy, VW)</div>
        <div class="menu-item">Food > (Fruits, Burgers, Veggies)</div>
        <div class="menu-item">Sports > (Soccer, Football, Basketball)</div>
        <div class="menu-item">Movies > (Action, Comedy, Horror) </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:03:52.363

据我所知，这只能用 CSS 来完成。标记应如下所示：

```
<ul>
    <li>Cars
         <ul>
             <li>Ford</li>
             <li>Chevy</li>
             <li>VW</li>
         </ul>    
    </li>
    <li>Food
         <ul>
             <li>Fruits</li>
             <li>Burgers</li>
             <li>Veggies</li>
         </ul>    
    </li>
</ul> 
```

您可以在此处找到示例 CSS：[http ://www.cssdrive.com/index.php/examples/exampleitem/css_drop_down_menu/](http://www.cssdrive.com/index.php/examples/exampleitem/css_drop_down_menu/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:04:03.197

当有预先存在的插件时，为什么要重新发明轮子。

你应该看看超级鱼。具体查看他们的[垂直菜单演示](http://users.tpg.com.au/j_birch/plugins/superfish/#sample3)。

# objective-c - 如何在os x应用程序中实现zxing来获取或读取二维码数据？

> ID：10898749
> 
> 赞同：0
> 
> 时间：2012-06-05T14:00:25.500
> 
> 标签：objective-c, macos, qr-code, zxing

我正在寻找一个能够从文件（jpeg、bmp 等）或相机（内部和外部）读取二维码并将该信息作为 NSString 输出的类。

我尝试使用 ZXing 附带的 Objective-C OSX 项目，但我无法让它与我自己的项目配合得很好。

有人在这方面取得过成功吗？或建议我使用其他选项来阅读任何网络服务等二维码。请帮助我克服这个问题。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:07:13.933

ZXing 附带了一个示例项目，展示了它在 IOS 中的工作方式。这是一个很好的例子，所以我们。

我在自己的一个项目中使用了 ZXing 项目，效果很好。花了一些谷歌搜索来删除所有的编译错误，但它都在那里。

1.  创建一个 ZXingWidgetController 对象并给它一个委托。
2.  代表应实施

    `- (void)zxingController:(ZXingWidgetController*)controller didScanResult:(NSString *)result`

    `- (void)zxingControllerDidCancel:(ZXingWidgetController*)controller`

3.  介绍 ZXing 控制器。取消或扫描时，将调用 ZXing 委托方法。确保在两个委托方法中都关闭 zxingController。

4.  在 zxingController:didScaneResult: 结果将包含您感兴趣的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:10:22.640

使用[ZBar](http://zbar.sourceforge.net/iphone/sdkdoc/install.html)代替它更容易安装并且具有更多低级功能，因此您可以根据需要自定义您的应用程序。

# file - 这种文件锁定机制会起作用还是会成为竞争条件？

> ID：10898752
> 
> 赞同：0
> 
> 时间：2012-06-05T14:00:39.723
> 
> 标签：file, console, locking

我有一个运行不同命令的控制台程序。我希望能够并行运行程序的多个实例，但是，我想防止特定命令被并行处理。

我想到了一个简单的文件锁定系统。

给定命令“foo”不允许并行运行，这行得通吗？

1.  在运行 foo 之前检查文件 .lock_foo_* 是否存在（如果存在，则中止）
2.  如果没有，创建文件 .lock_foo_GUID
3.  检查 .lock_foo_GUID 是否存在以及是否不存在其他 .lock_foo_* 文件

如果有另一个 .lock_foo_* 文件，这意味着另一个实例同时创建了一个，我们中止并删除我们的锁定文件。

我想知道是否有任何竞争条件，这是否是处理它的正确方法？

**更新**

我认为它实际上比最初预期的要容易（至少在 Windows 上）。我认为 thb 的回答让我走上了正确的道路。

我认为这样的事情应该有效

```
public bool CreateLock(string fileName){
     try{
         File.Open(string.Format(".lock_{0}",fileName), FileMode.Create, FileAccess.ReadWrite, FileShare.None);
      }
      catch (Exception exception){
           return false;
      }
      return true;
} 
```

操作系统将确保仅在文件尚不存在时才创建该文件，否则将引发异常。所以这个方法应该是安全的。不幸的是，这在 UNIX 上不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:05:29.880

你的逻辑看起来很不错。但是，如果您对它感兴趣，那么已经存在不止一个命令行实用程序可以执行您想要的操作，例如`lockfile`和`flock`.

试试`man 1 lockfile`。我怀疑该联机帮助页会简洁地回答您的问题。

另一方面，如果您需要或更喜欢自己实现此功能，那么您建议的方法几乎是正确的，但必须偶尔地、非常偶尔地失败。这令人沮丧，但这是您尝试做的事情所固有的。原因是在 (1) 检查另一个进程是否锁定了资源和 (2) 锁定资源之间插入了一个短暂的时间间隔。如果*在这个短暂的时间间隔内，*另一个进程应该锁定资源，会发生什么？

需要的是一个*原子操作，*它以某种方式将检查和锁定作为一个单一的、不间断的步骤。幸运的是，现代 CPU 提供了这样的原子操作，并且现代操作系统内核公开了它们，因此您确实可以可靠地执行您想要的操作。

如果您对此感兴趣，那么您可以查阅 Microsoft 的[LockFile](http://msdn.microsoft.com/en-us/library/aa365202.aspx)和[LockFileEx](http://msdn.microsoft.com/en-us/library/aa365203.aspx)开发文档。

# web-config - 通过 IIS Express 和网站项目使用自定义域

> ID：10898757
> 
> 赞同：2
> 
> 时间：2012-06-05T14:01:04.970
> 
> 标签：web-config, asp.net-4.0

我发现这个很棒的线程[Using Custom Domains With IIS Express](https://stackoverflow.com/questions/4709014/using-custom-domains-with-iis-express)关于如何配置 Web 应用程序项目以使用自定义域（如 example.com 而不是 localhost:1234）。但是我如何为网站项目做到这一点？

我不知道如何设置“覆盖 Applicationroot URL”。我将起始 URL 设置为[http://example.com:1234](http://example.com:1234)，但仍然收到 HTTP 错误 400。请求主机名无效。

# iphone - 不同的行为发展生产

> ID：10898760
> 
> 赞同：0
> 
> 时间：2012-06-05T14:01:12.217
> 
> 标签：iphone, ios

我遇到了一个奇怪的问题。我正在开发一个 iOS (iPhone) 应用程序，并且正在使用 hockey 应用程序对其进行测试。我在开发和生产之间经历了不同的行为。在一些马戏团（其中一些是可重现的，其他的不是）应用程序在生产中运行时崩溃，当我在我的测试设备上使用 Xcode 安装相同的应用程序时，我没有遇到同样的问题。

所有这些崩溃都是：

```
Exception Type:  SIGSEGV
Exception Codes: SEGV_ACCERR at 0xb
Crashed Thread:  0 
```

我假设这是内存管理错误（即使我使用 ARC，我也可能做错了什么），但问题是：为什么应用程序在两种环境中的行为不同？如何在我的本地设备上重现这些问题？

# jquery - 在 iPhone 上将某些链接保持在独立模式

> ID：10898766
> 
> 赞同：0
> 
> 时间：2012-06-05T14:01:31.303
> 
> 标签：jquery, iphone, iphone-standalone-web-app

我发现这个[要点](https://gist.github.com/1042026)确实可以防止网页链接超出 iPhone 上的“独立模式”，但我想在某些带有类的链接上禁用此功能。

每当模态出现时，此功能就会中断它并快速打开模态，然后重定向到`href`.

编码：

```
 if(("standalone" in window.navigator) && window.navigator.standalone) {
      var noddy, remotes = false;
      document.addEventListener('click', function(event) {
        noddy = event.target;
        while(noddy.nodeName !== "A" && noddy.nodeName !== "HTML") {
              noddy = noddy.parentNode;
          }
        if('href' in noddy && noddy.href.indexOf('http') !== -1 && (noddy.href.indexOf(document.location.host) !== -1 || remotes)) {
          event.preventDefault();
          document.location.href = noddy.href;
        }
      }, false);
    } 
```

如何修改它以将其包含`a`在类中，例如`open, modal`不应该使用上述功能而只保持模式打开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:06:36.263

试试这个。

```
if(("standalone" in window.navigator) && window.navigator.standalone) {
  var noddy, remotes = false;
  document.addEventListener('click', function(event) {
    noddy = event.target;
    var className = noddy.className;
    if(noddy.nodeName === "A" 
        && (className.indexOf('open') != -1 || className.indexOf('modal') != -1)){
         return;//Just return without doing anything
    }

    while(noddy.nodeName !== "A" && noddy.nodeName !== "HTML") {
          noddy = noddy.parentNode;
      }
    if('href' in noddy && noddy.href.indexOf('http') !== -1 && (noddy.href.indexOf(document.location.host) !== -1 || remotes)) {
      event.preventDefault();
      document.location.href = noddy.href;
    }
  }, false);
} 
```

附带说明一下，如果您`jQuery`在页面或应用程序中使用，那么您的代码可以通过使用 jQuery 内置 api 大大减少。

# r - 使用 auto.arima：OCSBtest(x, m) 中的错误：下标越界

> ID：10898770
> 
> 赞同：4
> 
> 时间：2012-06-05T14:01:43.627
> 
> 标签：r

我在大量时间序列上使用一个大（isplit）循环来测试 ARIMA 模型。为此，我正在使用包中的`auto.arima`功能`forecast`。

为此，我创建了一个函数，用于遍历所有时间序列，同时跟踪进度并存储拟合模型和统计数据（例如准确性和模型参数）。现在我正在处理`auto.arima`函数生成的错误。更准确地说；由 OCSB 季节性测试引起。

我将此函数用于“每月”时间序列以及“每周”时间序列。对于每月时间序列 a 没有问题（几乎 50000，包括很多“零”值）。对于每周时间序列，我遇到了问题。但我无法找到错误的真正原因。

我试图重新创建错误。我认为它与许多 0（或相同）值与 52 频率周期相结合有关。但我仍然不能把矛头指向问题所在。

请参阅下面的示例。一些信息：时间序列集是每周值（频率 = 52），从 2010 年第 1 周开始。长度为 122 个样本（直到 2012 年第 18 周）。因此我测试了 122 的长度，我可以为此生成错误。我仍然认为这与频率和“运行相同的值”有关......

对于某些错误会产生，对于某些不会。

例1【随机数，长度=122】>没问题：

```
ts_element <- ts(sample(0:30, 122, replace=TRUE), frequency = 52, start = c(2010, 1))
fit <- auto.arima(ts_element, trace=FALSE, seasonal.test="ocsb", allowdrift=TRUE, stepwise=TRUE) 
```

示例 2 [只有 0 个值，长度 = 122] > OCSB 测试错误（通常我会假设一个不同的错误...参见示例 3）：

```
ts_element <- ts(sample(0:0, 122, replace=TRUE), frequency = 52, start = c(2010, 1))
fit <- auto.arima(ts_element, trace=FALSE, seasonal.test="ocsb", allowdrift=TRUE, stepwise=TRUE)
Error in OCSBtest(x, m) : subscript out of bounds 
```

示例 3 [只有 0 个值，长度 = 100] > '零/相等值' 错误，我假设这个，这个例子不是问题，但要指出长度是相关的（与示例 2 比较）：

```
ts_element <- ts(sample(0:0, 100, replace=TRUE), frequency = 52, start = c(2010, 1))
fit <- auto.arima(ts_element, trace=FALSE, seasonal.test="ocsb", allowdrift=TRUE, stepwise=TRUE)
Error in if (PVAL == min(tablep)) warning("p-value smaller than printed p-value") else warning("p-value greater     than printed p-value") : 
  missing value where TRUE/FALSE needed 
```

示例 4 [与 ex.3 几乎相同，但有一个非 0 值，长度 = 100] > 没有问题了：

```
ts_element[30] <- 1
fit <- auto.arima(ts_element, trace=FALSE, seasonal.test="ocsb", allowdrift=TRUE, stepwise=TRUE) 
```

示例 5 [与 ex.4 几乎相同，但长度=122] > OCSB 测试错误：

```
ts_element <- ts(sample(0:0, 122, replace=TRUE), frequency = 52, start = c(2010, 1))
ts_element[30] <- 1
fit <- auto.arima(ts_element, trace=FALSE, seasonal.test="ocsb", allowdrift=TRUE, stepwise=TRUE)
Error in OCSBtest(x, m) : subscript out of bounds 
```

示例 6 [随机 1 和 0，长度=122] > 没问题：

```
ts_element <- ts(sample(0:1, 122, replace=TRUE), frequency = 52, start = c(2010, 1))
fit <- auto.arima(ts_element, trace=FALSE, seasonal.test="ocsb", allowdrift=TRUE, stepwise=TRUE) 
```

例 7【随机数，长度小于 50】> 没问题：

```
ts_element <- ts(sample(1:34, 50, replace=TRUE), frequency = 52, start = c(2010, 1))
fit <- auto.arima(ts_element, trace=FALSE, seasonal.test="ocsb", allowdrift=TRUE, stepwise=TRUE) 
```

有谁知道 OCSB 越界错误的原因是什么？如何识别？

主要问题是，每当我在本文开头描述的函数中出现此错误时，该函数不会输出我收集的所有信息。因此，等待的时间是徒劳的。因此，如果无法找到根本原因，我还可以通过一些代码来处理错误以“忽略”它们（跳过该时间序列）并走得更远。或者忽略，但仍然输出当时收集到的信息。

有怎样的解决方法？

注意：零错误不是问题。我在我的功能中介绍了这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T22:14:51.553

很好的问题，并且解释得很好。您在提交之前清楚地考虑了这一点。

您的示例中的问题是由于处理充满零的时间序列的许多问题（在我看来是错误）。

通常，您应该使用该`debug`命令来单步执行您的代码。例如，尝试调试为 运行的五个主要函数`auto.arima`：

```
debug(auto.arima)
debug(nsdiffs)
debug(forecast:::OCSBtest)
debug(lm)
debug(lm.fit) 
```

（用于`Q`退出和`undebug`停止调试函数）然后尝试运行**示例 2中的代码**

```
ts_element <- ts(sample(0:0, 122, replace=TRUE), frequency = 52, start = c(2010, 1))
fit <- auto.arima(ts_element, trace=FALSE, seasonal.test="ocsb", allowdrift=TRUE, stepwise=TRUE) 
```

经过大量的压力`Enter`，你最终会到达 R 失败的地步。在这种情况下，这是`lm.fit`. 如果所有系数都为零，那么由于某种原因，它将它们转换为`NA`. 当`OCSBtest`函数试图提取系数时，它发现矩阵是空的，并告诉你它不是一个合适的索引。

我会告诉你向 R-bugs 报告这个...但是当涉及到`base`. 他们可能会告诉您这是“用户错误”，并且您不应该将回归模型拟合为全零（叹气）。

**示例 3**的第一个问题似乎是`nsdiffs`页面中未记录的功能，该功能描述了该 `forecast::OCSBtest`功能。看起来您的时间序列必须大于周期的 2 倍 + 5，否则将不会运行季节性差异。在**示例 2**中这是正确的，但在**示例 3**中则不然。实际上，函数中代码的第一部分是：

```
if (length(time.series) < (2 * period + 5)) {
    return(0)
} 
```

阅读页面中列出的两个 Osborn 参考资料`nsdiffs`，也许它在某处提到它。让作者`forecast`知道是个好主意，这样他们就可以将其包含在文档中的某个地方。甚至可能会发出警告，并可以选择将其关闭。

**示例 3与****示例 2**有不同的错误，因为**示例 3**立即退出`nsdiffs`函数，然后在`ndiff`执行差分的函数中继续失败。`ndiff`似乎有一个错误，如果平方差之和为零（因为系列为零），则会导致除以零错误。下面是`ndiff`函数中的相关代码：

```
s2 <- .C("R_pp_sum", as.vector(e, mode = "double"), as.integer(n), as.integer(l), s2 = as.double(s2), PACKAGE = "tseries")$s2
STAT <- eta/s2 # Becomes NaN
PVAL <- approx(table, tablep, STAT, rule = 2)$y # Also NaN
if (is.na(approx(table, tablep, STAT, rule = 1)$y)) if (PVAL == 
min(tablep)) warning("p-value smaller than printed p-value") else warning("p-value greater than printed p-value") # Bombs 
```

**示例 4**成功，因为`s2`从不为零。一个简单的解决方法是`s2`在除法之前检查是否为零。

**示例 5**失败的原因与**示例 2**大致相同。它进入`nsdiff`函数是因为它的长度大于`2*period+5`，然后失败，因为`lm.fit`当它们全为零时不返回系数。

**示例 6**成功，因为`lm.fit`现在将正确返回系数，因为它们并非全为零，因为您的时间序列混合了 1 和 0。

**示例 7**成功，因为`nsdiff`没有运行（因为序列太小）并且`ndiff`不再导致除以零，因为平方差之和不会为零。

总之，您的示例显示了两个错误。一个在`ndiff`时间序列始终为零时，另一个在`lm.fit`协变量都为零时的函数中。此外，应该更新文档以告诉您，如果时间序列的长度小于您使用 'ocsb' 选项`nsdiff`的长度，它将不会运行（但也许这在参考文献中有记录）。`2*period+5`

# java - Android java.lang.IllegalArgumentException：视图未附加到窗口管理器

> ID：10898771
> 
> 赞同：3
> 
> 时间：2012-06-05T14:01:47.760
> 
> 标签：java, android, android-view, illegalargumentexception

我的代码中出现以下异常...

```
IllegalArgumentException: View not attached to window manager
at android.view.WindowManagerImpl.findViewLocked(WindowManagerImpl.java:355)
at android.view.WindowManagerImpl.removeView(WindowManagerImpl.java:200)
at android.view.Window$LocalWindowManager.removeView(Window.java:432)
at android.app.Dialog.dismissDialog(Dialog.java:280)
at android.app.Dialog.access$000(Dialog.java:73)
at android.app.Dialog$1.run(Dialog.java:113)
at android.app.Dialog.dismiss(Dialog.java:270)
at com.myapp.code.SearchWord$1.handleMessage(SearchWord.java:718)  <--
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3906)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:840)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:598) 
```

我真的不明白为什么会发生这个错误。它会导致设备上的强制关闭问题。关于如何解决这个问题的任何线索？谢谢

这是我的代码...

```
public class SearchWord extends Activity {
/** Called when the activity is first created. */

private ProgressDialog progressDialog;
        ...
    }

    public void callDialog(){

    this.progressDialog = ProgressDialog.show(SearchWord.this,null, "Loading. Please wait..", true);

    new Thread(new Runnable(){
        public void run(){
            try{
                Thread.sleep(9000);
            }
            catch (Exception e){
                e.printStackTrace();
            }
            if(copyFlag){

            }
                            else{
                getData();
            }
            SearchWord.this.handler.sendEmptyMessage(0);
        }

    }).start();
}

    Handler handler = new Handler(){
    public void handleMessage(Message msg){
        progressDialog.dismiss();           <-- line 718
        SetData();
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:06:29.433

我已经修改了您的代码。请看下面的代码片段。

```
public void callDialog(){

            ProgressDialog progressDialog = new ProgressDialog(this);
            progressDialog.setTitle("Loading. Please wait..");
            progressDialog.setCancelable(false);
            progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
                progressDialog.show();

            new Thread(new Runnable(){
                public void run(){
                    try{
                        Thread.sleep(9000);
                    }
                    catch (Exception e){
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    if(copyFlag){
                    }else{
                        getData();
                    }
                    SearchWord.this.handler.sendEmptyMessage(0);
                }

            }).start();
        }
          // omitted

            Handler handler = new Handler(){
            @Override
            public void handleMessage(Message msg){
                progressDialog.dismiss();        
                SetData();
            }
        }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T08:55:44.997

当我从 onPostExecute 方法关闭对话框并完成活动时，有时我也会收到此错误。我想有时活动会在对话框成功关闭之前完成。

试试下面的代码，它会帮助你。

```
try{

pd.dismiss();
// Then assign progress Dialog to null
pd = null;

}
catch(Exception e)
{
   e.printStackTrace();
} 
```

# c# - Json.NET Windows Store App 认证崩溃

> ID：10898774
> 
> 赞同：2
> 
> 时间：2012-06-05T14:01:57.660
> 
> 标签：c#, windows-runtime, windows-store-apps, json.net

这可能不是 100% 与 Json.NET 相关，但因为它是崩溃的组件......

在 Windows 应用程序证书工具包的第二次测试之前，序列化工作得很好。从这个应用程序启动开始，它会引发以下异常：

```
System.EntryPointNotFoundException Entry point was not found.
at Newtonsoft.Json.Utilities.ReflectionUtils.GetFieldsAndProperties(Type type, BindingFlags bindingAttr) in \Newtonsoft.Json\Utilities\ReflectionUtils.cs:line 661
at Newtonsoft.Json.Serialization.DefaultContractResolver.GetSerializableMembers(Type objectType) in \Newtonsoft.Json\Serialization\DefaultContractResolver.cs:line 267
at Newtonsoft.Json.Serialization.DefaultContractResolver.CreateProperties(Type type, MemberSerialization memberSerialization) in \Newtonsoft.Json\Serialization\DefaultContractResolver.cs:line 845
at Newtonsoft.Json.Serialization.DefaultContractResolver.CreateObjectContract(Type objectType) in \Newtonsoft.Json\Serialization\DefaultContractResolver.cs:line 349
at Newtonsoft.Json.Serialization.DefaultContractResolver.CreateContract(Type objectType) in \Newtonsoft.Json\Serialization\DefaultContractResolver.cs:line 734
at Newtonsoft.Json.Serialization.DefaultContractResolver.ResolveContract(Type type) in \Newtonsoft.Json\Serialization\DefaultContractResolver.cs:line 232
at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.GetContractSafe(Object value) in \Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs:line 77
at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value) in \Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs:line 58
at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value) in \Newtonsoft.Json\JsonSerializer.cs:line 608
at Newtonsoft.Json.JsonConvert.SerializeObject(Object value, Formatting formatting, JsonSerializerSettings settings) in \Newtonsoft.Json\JsonConvert.cs:line 749 
```

代码看起来像这样......

```
var test = JsonConvert.SerializeObject(new { id = "a", test = "test" }); 
```

在应用程序上运行 WACK 后，我必须重新安装它才能使其再次工作。

有谁知道 WACK 如何运行该应用程序？我想它在每次启动时都会以某种方式模拟各种环境，但我不知道它是如何弄乱我的应用程序的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T03:30:36.123

该问题是由 Json.NET 在 GetFieldsAndProperties 中使用匿名类型引起的。在第三方 dll 中使用时，WinRT 必须存在错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:05:34.820

对不起，我的错。我确认它已在第 7 版中修复

我在 Connect 上打开了一个错误，因为这是在 Windows 8 Metro 上使用 grate JSNO.Net 的阻塞问题。

[https://connect.microsoft.com/VisualStudio/feedback/details/749011/ngen-failing-with-json-net-metro](https://connect.microsoft.com/VisualStudio/feedback/details/749011/ngen-failing-with-json-net-metro)

# c# - C#如何根据高于特定值的整数创建子数组或过滤数组？

> ID：10898775
> 
> 赞同：0
> 
> 时间：2012-06-05T14:01:58.450
> 
> 标签：c#, arrays, integer

我尝试结合多个其他问题/答案，但没有成功。

我有一个数组，其中包含从 0 到 10 的整数。现在我需要一个数组，其中只有大于 8 的整数。

如何过滤或创建仅包含这些整数的子数组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T14:03:52.217

听起来你想要 LINQ。例如：

```
int[] largeIntegers = allIntegers.Where(x => x > 8).ToArray(); 
```

但是，根据您需要做的事情，您可能并不*真的*需要这个`ToArray`电话。例如：

```
IEnumerable<int> largeIntegers = allIntegers.Where(x => x > 8);
foreach (int value in largeIntegers)
{
    ...
} 
```

虽然LINQ 的功能*远*不止过滤 - 我*强烈*建议您正确了解它 - 网上有大量关于它的材料。例如，我有一个[关于 LINQ to Objects 的完整博客系列](http://msmvps.com/blogs/jon_skeet/archive/tags/Edulinq/default.aspx)——但 LINQ 也不仅仅是进程内查询。

您可能还想阅读 Eric Lippert 的博客文章[“数组被认为有些有害”](http://blogs.msdn.com/b/ericlippert/archive/2008/09/22/arrays-considered-somewhat-harmful.aspx)，因为在许多情况下，您更喜欢其他集合而不是数组。

另一种选择是使用[`Array.FindAll`](http://msdn.microsoft.com/en-us/library/1kkxfxdd.aspx)：

```
int[] largeIntegers = Array.FindAll(allIntegers, x => x > 8); 
```

...但这确实将您与数组联系在一起。LINQ 更通用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T14:03:58.123

您可以使用[LINQ](http://msdn.microsoft.com/en-us/library/bb397926.aspx)过滤您的数组：

```
var filteredArray = existingArray.Where(x => x > 8).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:03:49.947

您可以使用[LinQ](http://msdn.microsoft.com/en-us/library/bb397926.aspx)：

```
(from num in array where num > 8 select num).ToArray(); 
```

您也可以尝试：

```
var filteredArray = yourArray.Where(c => c >8); 
```

# circular-dependency - 避免循环引用：如果我需要对象的方法，前向声明无效？

> ID：10898777
> 
> 赞同：0
> 
> 时间：2012-06-05T14:02:04.350
> 
> 标签：circular-dependency

我有一个大项目，我陷入了一个我不知道如何修复的循环引用。我已经阅读了前向声明，但如果我理解得很好，如果我使用前向声明，该对象的公共方法/数据不是公共的。

我知道解决这个问题的最好方法是从第一行代码开始设计程序，但有时你继承了一个带有这些问题的大代码，并在你发现自己陷入混乱的代码中添加一个简单的功能.

那么......有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:58:49.440

在 A 类使用 B 类但没有任何方法的情况下，A 类可以前向声明 B 类。如果 B 类使用 A 类，那么前向声明将删除一半的循环依赖，至少就编译器而言。

如果 A 需要更深入地了解 B 而不仅仅是其名称，您可以使用接口（抽象类）来反转从 A 到 Bie A 的依赖关系 A 使用新的 C（而不是 B），它至少导出 A 需要的接口， B 实现/扩展 C。

我已经看到这主要用于减少编译时间 - 这是你问的原因，还是更多地与“好”设计有关？

# vba - 从子目录中的excel文件中获取数据

> ID：10898782
> 
> 赞同：1
> 
> 时间：2012-06-05T14:02:16.017
> 
> 标签：vba, excel

我是 VBA 和一般编程的新手。这是我在这个板上的第一篇文章。我一直在修改我在互联网上找到的代码并且我有代码可以做我想做的事情，但是我想稍微修改它以加快这个过程。

我的代码从我存放在桌面“接收温度”文件夹中的 excel 文件中提取数据，并将数据放在工作簿“接收数据提取器”中。我每月从大约 1000 个文件中获取数据，这些文件存储在以与其关联的 PO 命名的子目录中（名称不同）。现在我必须遍历每个子目录并将 excel 文件移动到“接收温度”，然后宏才能工作。我想修改代码以对文件夹内子目录中包含的所有 excel 文件执行相同的操作，从而允许我将子文件夹复制到“接收临时”文件夹并运行宏，而不是打开每个子目录并抓取excel文件并手动移动它。同样，子目录具有不同的名称。

感谢您提供的任何帮助。

```
Sub ReadDataFromAllWorkbooksInFolder()
    Dim FolderName As String, wbName As String, r As Long
    Dim cValue As Variant, bValue As Variant, aValue As Variant
    Dim dValue As Variant, eValue As Variant, fValue As Variant
    Dim wbList() As String, wbCount As Integer, i As Integer

    FolderName = ThisWorkbook.Path & "\Receiving Temp\"

    ' create list of workbooks in foldername
    wbCount = 0
    wbName = Dir(FolderName & "\" & "*.xls")
    While wbName <> ""
        wbCount = wbCount + 1
        ReDim Preserve wbList(1 To wbCount)
        wbList(wbCount) = wbName
        wbName = Dir
    Wend
    If wbCount = 0 Then Exit Sub
    ' get values from each workbook
    r = 1

    For i = 1 To wbCount
        r = r + 1
        cValue = GetInfoFromClosedFile(FolderName, wbList(i), "Quality Rep.", "c9")
        bValue = GetInfoFromClosedFile(FolderName, wbList(i), "Quality Rep.", "o61")
        aValue = GetInfoFromClosedFile(FolderName, wbList(i), "Quality Rep.", "ae11")
        dValue = GetInfoFromClosedFile(FolderName, wbList(i), "Quality Rep.", "v9")
        eValue = GetInfoFromClosedFile(FolderName, wbList(i), "Quality Rep.", "af3")
        fValue = GetInfoFromClosedFile(FolderName, wbList(i), "Non Compliance", "a1")

         Sheets("Sheet1").Cells(r, 1).Value = cValue
         Sheets("Sheet1").Cells(r, 2).Value = bValue
         Sheets("Sheet1").Cells(r, 3).Value = aValue
         Sheets("Sheet1").Cells(r, 4).Value = dValue
         Sheets("Sheet1").Cells(r, 6).Value = eValue
         Sheets("Sheet1").Cells(r, 5).Value = fValue
     Next i
End Sub

Private Function GetInfoFromClosedFile(ByVal wbPath As String, _
wbName As String, wsName As String, cellRef As String) As Variant
    Dim arg As String

    GetInfoFromClosedFile = ""

    If Right(wbPath, 1) <> "\" Then wbPath = wbPath & "\"

    If Dir(wbPath & "\" & wbName) = "" Then Exit Function

    arg = "'" & wbPath & "[" & wbName & "]" & _
          wsName & "'!" & Range(cellRef).Address(True, True, xlR1C1)

    On Error Resume Next
    GetInfoFromClosedFile = ExecuteExcel4Macro(arg)
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T19:11:30.407

您正在创建的数组必须在`ProcessFiles`从[此处](http://www.vbaexpress.com/kb/getarticle.php?kb_id=245)获取的函数内部。一旦创建了数组，原始代码的其余部分几乎保持原样。我还必须对`GetInfoFromClosedFile`功能进行更改，因此当您复制时，请照原样复制下面给出的完整代码，不要更改任何内容。

```
Option Explicit

Dim wbList() As String
Dim wbCount As Long

Sub ReadDataFromAllWorkbooksInFolder()
    Dim FolderName As String
    Dim cValue As Variant, bValue As Variant, aValue As Variant
    Dim dValue As Variant, eValue As Variant, fValue As Variant
    Dim i As Long, r As Long

    FolderName = ThisWorkbook.Path & "\Receiving Temp"

    ProcessFiles FolderName, "*.xls"

    If wbCount = 0 Then Exit Sub

    r = 1

    For i = 1 To UBound(wbList)

        '~~> wbList(i) will give you something like
        '   C:\Receiving Temp\aaa.xls
        '   C:\Receiving Temp\FOLDER1\aaa.xls
        Debug.Print wbList(i)

        r = r + 1
        cValue = GetInfoFromClosedFile(wbList(i), "Quality Rep.", "c9")
        bValue = GetInfoFromClosedFile(wbList(i), "Quality Rep.", "o61")
        aValue = GetInfoFromClosedFile(wbList(i), "Quality Rep.", "ae11")
        dValue = GetInfoFromClosedFile(wbList(i), "Quality Rep.", "v9")
        eValue = GetInfoFromClosedFile(wbList(i), "Quality Rep.", "af3")
        fValue = GetInfoFromClosedFile(wbList(i), "Non Compliance", "a1")

        Sheets("Sheet1").Cells(r, 1).Value = cValue
        Sheets("Sheet1").Cells(r, 2).Value = bValue
        Sheets("Sheet1").Cells(r, 3).Value = aValue
        Sheets("Sheet1").Cells(r, 4).Value = dValue
        Sheets("Sheet1").Cells(r, 6).Value = eValue
        Sheets("Sheet1").Cells(r, 5).Value = fValue
     Next i
End Sub

'~~> This function was taken from
'~~> http://www.vbaexpress.com/kb/getarticle.php?kb_id=245
Sub ProcessFiles(strFolder As String, strFilePattern As String)
    Dim strFileName As String, strFolders() As String
    Dim i As Long, iFolderCount As Long

    '~~> Collect child folders
    strFileName = Dir$(strFolder & "\", vbDirectory)
    Do Until strFileName = ""
        If (GetAttr(strFolder & "\" & strFileName) And vbDirectory) = vbDirectory Then
            If Left$(strFileName, 1) <> "." Then
                ReDim Preserve strFolders(iFolderCount)
                strFolders(iFolderCount) = strFolder & "\" & strFileName
                iFolderCount = iFolderCount + 1
            End If
        End If
        strFileName = Dir$()
    Loop

    '~~> process files in current folder
    strFileName = Dir$(strFolder & "\" & strFilePattern)
    Do Until strFileName = ""
        wbCount = wbCount + 1
        ReDim Preserve wbList(1 To wbCount)
        wbList(wbCount) = strFolder & "\" & strFileName
        strFileName = Dir$()
    Loop

    '~~> Look through child folders
    For i = 0 To iFolderCount - 1
        ProcessFiles strFolders(i), strFilePattern
    Next i
End Sub

Private Function GetInfoFromClosedFile(ByVal wbFile As String, _
wsName As String, cellRef As String) As Variant
    Dim arg As String, wbPath As String, wbName As String

    GetInfoFromClosedFile = ""

    wbName = FunctionGetFileName(wbFile)
    wbPath = Replace(wbFile, "\" & wbName, "")

    arg = "'" & wbPath & "\[" & wbName & "]" & _
          wsName & "'!" & Range(cellRef).Address(True, True, xlR1C1)

    On Error Resume Next
    GetInfoFromClosedFile = ExecuteExcel4Macro(arg)
End Function

'~~> Function to get file name from the full path
'~~> Taken from http://www.ozgrid.com/VBA/GetExcelFileNameFromPath.htm
Function FunctionGetFileName(FullPath As String)
    Dim StrFind As String
    Dim i As Long

    Do Until Left(StrFind, 1) = "\"
        i = i + 1
        StrFind = Right(FullPath, i)
        If i = Len(FullPath) Then Exit Do
    Loop
    FunctionGetFileName = Right(StrFind, Len(StrFind) - 1)
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T02:13:41.263

谢谢你们两个！！一个简单的 Bing 搜索让我找到了这个有价值的代码集合，我能够在几分钟内适应和应用这些代码。优秀作品！

任何其他想要使用此代码的初学者（如我自己），请注意以下必要的更改：

```
ProcessFiles FolderName, "*.xls" 
```

对于 excel2010 文件，应更改为“*.xlsx”。

在行中：

```
cValue = GetInfoFromClosedFile(wbList(i), "Quality Rep.", "c9") 
```

在类似的行下方，“质量代表”。应更改为要从中获取数据的工作表名称。在行中：

```
 Sheets("Sheet1").Cells(r, 1).Value = cValue 
```

并在“Sheet1”下方更改为要放置数据的工作表名称。

除此之外，不需要进行任何更改。

# data-binding - knockout.js 数据绑定到下拉列表会覆盖原始值

> ID：10898783
> 
> 赞同：2
> 
> 时间：2012-06-05T14:02:26.103
> 
> 标签：data-binding, knockout.js, observable

我有一个函数可以将一个对象放入一个名为“detailedStudent”的可观察对象中，它将以模式显示学生的一些字段。这是问题所在：

1.  我从一个值为 false 的字段开始。（包括InStudentSiteResults）
2.  我在“detailedStudent”中设置了“学生”对象，该对象显示下拉列表（模拟模式弹出窗口）。
3.  该字段的值设置为 true，这是下拉列表中的第一个选项。

这是一个重现问题的 jsFiddle：http: [//jsfiddle.net/62fDB/16/](http://jsfiddle.net/62fDB/16/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:11:36.017

下拉选项值是字符串（不是布尔值）。像这样更新您的数据初始化

```
...
"IncludeInStudentSiteResults": "false",
... 
```

JSfiddle：http: [//jsfiddle.net/62fDB/22/](http://jsfiddle.net/62fDB/22/)

或使用以下帖子中的解决方案[Knockoutjs (version 2.1.0): bind boolean value to select box](https://stackoverflow.com/questions/10510683/knockoutjs-version-2-1-0-bind-boolean-value-to-select-box)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:44:44.173

这是你的版本：

```
function StudentViewModel() {
    var self = this;
    this.students = ko.observableArray([]);
    this.detailedStudent = ko.observable();

    this.clickMe = function(student) {
        alert(student.IncludeInStudentSiteResults());
        self.detailedStudent(student);
        alert(student.IncludeInStudentSiteResults());
    }
}​ 
```

尝试使用我的版本：

```
function StudentViewModel() {
    var self = this;
    this.students = ko.observableArray([]);
    this.detailedStudent = ko.observable();

    this.clickMe = function(student) {
        alert(student.IncludeInStudentSiteResults());
        self.detailedStudent(ko.observable(student));
        alert(student.IncludeInStudentSiteResults());
    }
}​ 
```

JSfiddle：http: [//jsfiddle.net/62fDB/23/](http://jsfiddle.net/62fDB/23/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:30:48.273

这是一个包含我的问题答案的小提琴。我不喜欢我必须编写自定义绑定，但替代方法是使用枚举而不是数据绑定到布尔值。

[http://jsfiddle.net/ekyDh/2/](http://jsfiddle.net/ekyDh/2/)

# mysql - 什么时候最好不要使用内连接？

> ID：10898784
> 
> 赞同：6
> 
> 时间：2012-06-05T14:02:36.483
> 
> 标签：mysql, sql-server, performance, optimization, jdbc

我有两张桌子：

```
table1 (id, name, connte)
table2 (id, name, connte) 
```

它们通过**table1.connte**和**table2.connte**连接。每个都包含 100 条记录。

现在，如果我想从 table1 中删除一条 id = 20 的记录及其在 table2 中的相应子项，最好执行以下操作：

```
 DELETE d1,d2 FROM table1 d1 INNER JOIN table2 d2 ON d1.connte= d2.connte WHERE d1.id = 20 
```

或以下内容：

```
 select connte from table1 where id = 20
  --Store connte in a variable say aabc--
  delete from table2 where connte = aabc   -> execute this first
  delete from table1 where id = 20    -> execute this second 
```

如果我要删除的记录只有一个父项和一个子项（此处为 table1.id =20），那么为整个表进行内部联接不是很昂贵吗？

我正在从 JAVA（所以 JDBC）运行此查询，那么对于上述条件，运行多个查询或内部联接是否更昂贵（性能方面）？

*注意：假设表没有参照完整性。所以，我没有使用级联删除。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T14:04:41.087

在一个查询中完成它可能会更快，而不是两个。您基本上是在尝试自己进行优化，而不是让 DBMS 来做，通常 DBMS 真的很擅长这类事情。

此外，您可能不必担心这么小的表的删除性能。100 x 100 行仍然非常小，因此您的 DBMS 应该能够毫无问题地处理这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T14:09:48.057

最好的方法是对 DBMS 中的两个查询运行解释计划，输出会为您提供 I/O 估计等信息。一般来说，任何时候您对 DBMS 中什么会更有效有疑问从角度来看，查看查询计划和成本估算是您最好的武器。

```
SET showplan on 
```

应该在 SQL 服务器中工作。这是[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms180765%28v=sql.105%29.aspx)，您可能需要稍微不同的语法，具体取决于您的 DBMS。I/O 成本估算可能是您最关心的。

对于 MySQL，看起来你可以使用

```
EXPLAIN SELECT * FROM some_table 
```

[这是](http://dev.mysql.com/doc/refman/5.0/en/using-explain.html)使用 Explain 分析查询的教程。

一般来说，Oleksi 是正确的。大多数优化器都非常擅长这种事情，手动创建临时表不会给你带来太多好处。很多时候优化器的查询计划将涉及创建一个临时表。

对于删除查询，要确保速度的一件重要事情是您的删除子句使用索引参数，因此不会导致全表扫描。Explain/Showplan 将告诉您查询正在执行哪种类型的扫描，以及它正在使用哪些索引。您通常希望避免全表扫描。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T14:42:52.390

在 Sql Server 中，您不能在一个删除语句中从两个表中删除（没有触发器或级联删除）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T15:26:21.087

为什么不考虑使用外键和级联删除？如果您正确设置表格，您只需删除父级，然后子级就会自动得到照顾。请参阅此链接[何时/为什么在 SQL Server 中使用级联？](https://stackoverflow.com/questions/59297/when-why-to-use-cascading-in-sql-server)

# c# - C# CRM SDK 身份验证

> ID：10898785
> 
> 赞同：0
> 
> 时间：2012-06-05T14:02:36.630
> 
> 标签：c#, authentication, sdk, connection, crm

我有服务器 URI、端口、用户名和密码。了解了所有这些内容后，我如何才能使用 Microsoft 自己的 SDK 简单地连接到 CRM 服务器？我正在使用 .NET Framework 4。

尽管我已经分析了他们庞大的 ServerConnection 类，但不幸的是，我没有找到那条简单地进行连接的特定线路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:34:05.787

MSDN 为通过早期和后期绑定执行 CRUD 操作提供了非常有用的示例：

[http://msdn.microsoft.com/en-us/library/gg328499.aspx](http://msdn.microsoft.com/en-us/library/gg328499.aspx)
- SDK 中 \SampleCode\CS\GeneralProgramming\EarlyBound\CRUDOperations.cs 下的早期绑定代码

[http://msdn.microsoft.com/en-us/library/gg309272.aspx](http://msdn.microsoft.com/en-us/library/gg309272.aspx)
- SDK 中 \SampleCode\CS\GeneralProgramming\LateBound\CRUDOperationsDE.cs 下的后期绑定代码

# javascript - 正确的javascript继承

> ID：10898786
> 
> 赞同：13
> 
> 时间：2012-06-05T14:02:36.687
> 
> 标签：javascript

我一直在阅读很多关于 javascript 中“继承”的文章。他们中的一些人使用`new`，而其他人则推荐`Object.Create`。我读得越多，我就越困惑，因为它似乎存在无穷无尽的变体来解决继承问题。

有人可以向我展示最接受的方式（或事实上的标准，如果有的话）？

（我想要一个`Model`可以扩展的基础对象`RestModel`或`LocalStorageModel`。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T14:14:18.280

JavaScript 是一种基于原型而非类的 OOP 语言。这是造成所有这些混乱的原因之一：许多开发人员使用 JS，因为它是基于类的。

因此，您可以看到很多库试图在 JS 中使用基于类的语言范式。

此外，JS 本身缺乏一些特性，这使得继承，也是基于原型的，很痛苦。例如，在`Object.create`没有办法从另一个对象创建对象之前（就像基于 OOP 原型的语言应该做的那样），而只能使用`function`as 构造函数。

出于这个原因，你可以看到很多库都在尝试“修复”该语言，每个库都以自己的方式。

所以，你的困惑是正常的。也就是说，“官方”的方式是使用`prototype`属性，`function`s作为构造函数，并`Object.create`从对象的实例中创建。但是，如上所述，在某些情况下代码很冗长或缺少功能，因此此过程通常以某种方式包装，然后就变成了个人喜好问题。

因为您在谈论模型，所以您可以查看[Backbone 的模型](http://backbonejs.org/#Model-extend)，看看这种方法是否适合您。

**更新**：举一些例子，我希望能帮助你澄清，这里使用的是老派继承方式`new`：

```
function Model() {
    this.foo = "foo";
    this.array = [];
}

Model.prototype.foo = "";
Model.prototype.array = null;
Model.prototype.doNothing = function() {};

function RestModel() {
    this.bar = "bar";
}

RestModel.prototype = new Model;
RestModel.prototype.bar = ""

var myModel = new RestModel(); 
```

现在，这里的问题：

1.  的构造函数`Model`被调用一次，只有当`RestModel.prototype`设置了。因此，`foo`每个`RestModel`实例的属性都是“foo”。
2.  不仅如此，*所有* `RestModel`实例都将在`this.array`属性中共享同一个数组的同一个实例。如果`Model`直接创建一个实例，则每个实例都有一个新的数组实例。
3.  `myModel.constructor`是`Model`而不是`RestModel`。那是因为我们`prototype`用一个新的 , 实例覆盖`Model`，它包含`constructor`等于`Model`。
4.  如果你想拥有一个`RestModel`对构造函数进行惰性调用的新实例，是不可能的。

我认为有一些要点，当然它们不是唯一的。那么，如何解决这些问题呢？正如我所说，很多人已经这样做了，他们创建库和框架也是为了限制冗长。但是，要有一个想法：

```
function Model() {
    this.foo = "foo";
    this.array = [];
}

Model.prototype.foo = "";
Model.prototype.array = null;
Model.prototype.doNothing = function() {};

function RestModel() {
    Model.call(this);

    this.bar = "bar";
}

RestModel.prototype = Object.create(Model.prototype);
RestModel.prototype.constructor = RestModel;
RestModel.prototype.bar = ""

var myModel = new RestModel();

// for lazy constructor call
var anotherModel = Object.create(RestModel.prototype);

RestModel.call(anotherModel); 
```

请注意，如果您不想使用`prototype`或`function`作为构造函数，`Object.create`您可以这样做：

```
var Model = {
    foo: "",
    array: null,
    doNothing: function() {}
}

var RestModel = Object.create(Model);

RestModel.bar = "";

var myModel = Object.create(RestModel);

// Assuming you have to set some default values
initialize(RestModel); 
```

或者：

```
var Model = {
    foo: "",
    array: null,
    doNothing: function() {},

    init : function () {
        this.foo = "foo";
        this.array = [];
    },
}

var RestModel = Object.create(Model);

RestModel.bar = "";
RestModel.init = function () {
    Model.init.call(this);

    this.bar = "bar";
}

var myModel = Object.create(RestModel);

myModel.init(); 
```

在这种情况下，您基本上模仿了构造函数。您也可以将 a 传递`descriptor`给`Object.create`（请参阅[文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create)），但它会变得更加冗长。大多数人使用某种`extend`函数或方法（正如您可能在 Backbone 示例中看到的那样）。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-05T14:06:08.587

简单：`Object.create`并非在所有环境中都支持，但可以用`new`. 除此之外，两者有不同的目标：[`Object.create`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create)只是创建一个继承自其他对象的对象，同时*还*调用构造函数。使用合适的。[`new`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/new)

 *在您的情况下，您似乎希望`RestModel.prototype`继承自`Model.prototype`. `Object.create`（或其垫片）是正确的方法，因为您不想 a）创建一个新实例（实例化 a `new Model`）和 b）不想调用 Model 构造函数：

```
RestModel.prototype = Object.create(Model.prototype); 
```

如果你想在 RestModels 上调用 Model 构造函数，那与原型无关。使用[`call()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)or [`apply()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)：

```
function RestModel() {
    Model.call(this); // apply Model's constructor on the new object
    ...
} 
```*

# android - 海绵城堡asn1漏洞

> ID：10898793
> 
> 赞同：0
> 
> 时间：2012-06-05T14:03:03.670
> 
> 标签：android, openssl

2012 年 4 月之前的 OpenSSL 版本存在一个称为 ASN1 BIO 漏洞的漏洞 ( [http://www.openssl.org/news/secadv_20120419.txt](http://www.openssl.org/news/secadv_20120419.txt) )。
我现在在 Android 上使用 Spongy Castle 来解决我们的安全需求，我想知道 Spongy Castle 是否（或曾经）也容易受到此攻击。

我对这个主题进行了谷歌搜索，但找不到任何关于它的信息。

这里有谁知道这是否会影响海绵城堡？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T02:44:18.880

Bouncy Castle 和扩展的 Spongy Castle 不使用任何 OpenSSL 代码进行 ASN.1 解析。所有代码都是用 Java 开发的，AFAIK 不借用 OpenSSL。所以，理论上，它不应该有同样的漏洞。特别是因为它与特定于 OpenSSL 的 API（BIO）相关。

# c# - 修改自定义查询以使用 gridview 进行分页

> ID：10898795
> 
> 赞同：0
> 
> 时间：2012-06-05T14:03:09.870
> 
> 标签：c#, sql, ado.net

我有以下代码对数据库执行自定义查询。查询定义存储在表中，但用户不会进入分页。

因为它可以返回 10,000 行或更多行，所以我需要通过修改查询来进行分页。

> QuerySql=“从请求库中选择 * currentstatus == 'Approved 1' and ammountwithvat>100000”

它返回 10,000 行。

我的代码：

```
 public DataTable GetGenericResults(string strsql)
            {
                using(var connection = (SqlConnection)_context.Database.Connection)
                {
                    var adapter = new SqlDataAdapter(strsql, connection);
                    var results = new DataSet();
                    adapter.Fill(results, "Results");
                    return results.Tables["Results"];
                }
            }

var datatable = RequestBaseBL.GetGenericResults(query.QuerySql);
                    if (datatable.Rows.Count > 0)
                    {
                        LblCount.Text = datatable.Rows.Count + " records";
                        PanelResults.Visible = true;
                        GrvCustomResults.Visible = true;
                        GrvCustomResults.DataSource = datatable;
                        GrvCustomResults.DataBind(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:18:30.547

我会在 CTE 中使用查询，就像这样

```
WITH MyPagedData as (
SELECT *,
ROW_NUMBER() OVER(ORDER BY IdentityCol DESC) as RowNum,
ROW_NUMBER() OVER(ORDER BY IdentityCol ASC) as InverseRowNum
FROM requestbases where currentstatus == 'Approved 1' and ammountwithvat > 100000
)

SELECT * from MyPagedData where RowNum between @StartIndex and @StartIndex + 20 
```

因此，这假设您能够编写一些代码，将 RowNumber 位插入到 select 语句的正确位置，并且您使用的是 MSSQL 2005。如果您没有标识列，您可能还需要调整 IdentityCol 位.

所以 StartIndex 是最后显示的数据项，20 是您想要在页面上显示的项目数量。项目总数为 RowNum 和 InverseRowNum -1 之和。

# nmake - 为什么 nmake 会忽略我的隐含规则？

> ID：10898797
> 
> 赞同：2
> 
> 时间：2012-06-05T14:03:15.877
> 
> 标签：nmake

我的构建过程需要一个小的 nmake makefile。文件类型为 TXT 和 PDF。因此，我在我的 makfile 中添加了一个推理规则。但是 nmake 完全忽略了它。怎么了？

```
Number=123
Targets=A-$(Number).pdf B-$(Number).pdf
Sources=$(Targets:pdf=txt)

.txt.pdf:
    copy $*.txt $*.pdf

all: test build

#this rule creates sample source files
setup:
    echo hungry > A-$(Number).txt
    echo thursty > B-$(Number).txt

#this rule checks the generated macros
test:
    @echo Sources: $(Sources)
    @echo Targets: $(Targets)
    dir /b $(Sources)

build: $(Targets) 
```

我用这个 nmake Makefile 得到的只是：

```
NMAKE : fatal error U1073: don't know how to make 'A-123.pdf' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T19:34:55.757

我认为要使“.txt.pdf：”被识别为隐式规则，两个扩展名都必须在后缀列表中。尝试添加

```
.SUFFIXES: .txt .pdf 
```

# c++ - 比较两个 std::list 列表并获取不同的对象

> ID：10898799
> 
> 赞同：3
> 
> 时间：2012-06-05T14:03:35.297
> 
> 标签：c++, compare, stdlist

是否有准备好的功能来获取两个`std::list`列表的差异？

例如我有`list1: obj1, obj2, obj3, obj4`和`list2: obj2, obj3, obj4, obj5`。

函数结果应该是`list1_unique: obj1`, `list1_and_list2: obj2, obj3, obj4`, `list2_unique: obj5`。

（编写自己的实现并不难，但我更喜欢标准函数）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T14:07:14.990

如果您的列表已排序（如您的示例所示），[`std::set_difference`](http://stdcxx.apache.org/doc/stdlibref/set-difference.html)请获取`list1_unique`和`list2_unique`，并[`std::set_intersection`](http://stdcxx.apache.org/doc/stdlibref/set-intersection.html)获取`list1_and_list2`。如果它们尚未排序，您可以使用`std::list::sort()`.

# c# - 结合两个 linq 表达式来注入导航属性

> ID：10898800
> 
> 赞同：5
> 
> 时间：2012-06-05T14:03:39.900
> 
> 标签：c#, linq, entity-framework, lambda, expression

我有一组相同的条件，这些条件直接应用于一个类或具有相同导航属性的其他类。

例如，我有家，我有代理，代理与家相关联。

所以我正在寻找代理名称为“a”的房屋，或者我正在寻找名称为“a”的代理，查询如下，

```
 Expression<<Func<Agent,bool>> ax = x=> x.Name == "a" ;

 Expression<Func<Home,bool>> hx = x=> x.Agent.Name == "a"; 
```

我有近 100 个针对 Agent 的搜索查询，我还必须将它们应用于 Home 可查询。我不介意再写一遍，但它很难维护，因为我们知道它们在开发过程中会经常变化。

我想做的是，我想像这样为 Home 查询编写表达式，

```
 Expression<Func<Home,bool>> hx = Combine( x=>x.Agent , x=>x.Name == "a"); 
```

结合将跟随的地方，

```
 Expression<Func<T,bool>> Combine<T,TNav>( 
     Expression<Func<T,TNav>> parent, 
     Expression<Func<TNav,bool>> nav){

     // combine above to form...

     (x=>x.Agent , x=>x.Name == "a") 
         => x => x.Agent.Name == "a"

     (x=>x.Agent, x=>x.Name.StartsWith("a") || x.Name.EndsWith("a"))
         => x=>x.Agent.Name.StartsWith("a") || x.Agent.Name.EndsWith("a")

     // look carefully, x gets replaced by x.Agent in every node..

     // I know very little about expression rewriting, so I need little help
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T14:27:00.903

是的，您确实需要访问者来替换部分原始表达式。你可以这样做：

```
Expression<Func<T,bool>> Combine<T,TNav>(Expression<Func<T,TNav>> parent, Expression<Func<TNav,bool>> nav)
{
     var param = Expression.Parameter(typeof(T), "x");
     var visitor = new ReplacementVisitor(parent.Parameters[0], param);
     var newParentBody = visitor.Visit(parent.Body);
     visitor = new ReplacementVisitor(nav.Parameters[0], newParentBody);
     var body = visitor.Visit(nav.Body);
     return Expression.Lambda<Func<T, bool>>(body, param);
}

public class ReplacementVisitor : System.Linq.Expressions.ExpressionVisitor
{
    private readonly Expression _oldExpr;
    private readonly Expression _newExpr;
    public ReplacementVisitor(Expression oldExpr, Expression newExpr)
    {
        _oldExpr = oldExpr;
        _newExpr = newExpr;
    }

    public override Expression Visit(Expression node)
    {
        if (node == _oldExpr)
            return _newExpr;
        return base.Visit(node);
    }

} 
```

示例用法：

```
Expression<Func<Foo, Bar>> expr1 = f => f.Bar;
Expression<Func<Bar, bool>> expr2 = b => b.Baz;
var expr = Combine(expr1, expr2); // f => f.Bar.Baz 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:15:32.550

看看我在 PredicateBuilder 上的观点，我认为它会对你有所帮助。如果没有，请详细说明您需要什么。 [Queryover 的动态 Where 条件](https://stackoverflow.com/questions/10897044/dynamic-where-condition-with-queryover/10897310#10897310)

# eclipse - Eclipse 3.7 换行 - 重新审视

> ID：10898801
> 
> 赞同：1
> 
> 时间：2012-06-05T14:03:40.680
> 
> 标签：eclipse, perl, line-breaks

我知道这已经在很多地方讨论过，但我想我根本不明白出了什么问题。

我正在使用 Perl 文件和 Perl Eclispe 扩展。

我所拥有的是这样的一行（愚蠢的例子）：

```
my $do += $do_b + $do_c + $do_d + $do_e + $do_f + $do_g + $do_h + $do_i + $do_b + $do_c + $do_d + $do_e + $do_f + $do_g + $do_h + $do_i + $do_b + $do_c + $do_d + $do_e + $do_f + $do_g + $do_h + $do_i; 
```

当我运行格式化程序时，我想保持这条线完好无损。我已经尝试了我能想到的一切，将换行设置为 500，关闭所有换行，在行前关闭可选的无格式化程序，然后再打开。但无论我做什么，Eclipse 都会打破界限……这真的很奇怪。我什至尝试`//`在最后添加 Java 注释，但没有运气。

为什么我不能 100% 禁用 Eclipse 中的换行符..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T18:53:18.533

请尝试此扩展程序，

[http://ahtik.com/blog/projects/eclipse-word-wrap/](http://ahtik.com/blog/projects/eclipse-word-wrap/)

不要相信 eclipse 设置，因为它会随着您更改编辑器而改变（java 接口到 perl 或 python 或 FB4Linux）

# sql - SQL 计数和楼层

> ID：10898802
> 
> 赞同：1
> 
> 时间：2012-06-05T14:03:43.190
> 
> 标签：sql, count, floor

因此，我正在尝试创建一个查询，该查询返回与多个帐户关联的帐号。

当我运行代码时

```
SELECT accountNumber
FROM tbl1
WHERE LabelId = 328 
```

我得到以下结果：

```
601209.1
601212.1
601216.1
624601.1
624601.2
624601.3
624601.4
624861.1
624861.2
624861.3
624861.4
624961.1
624961.2
624961.3
624961.4
624962.1
624962.2
624962.3
624962.4
624962.5
624963.1
624963.2
624963.3
624963.4
624963.5
624963.6
624963.7
624963.8
624963.9 
```

所以在这里我们可以看到，账号624601、624921、624861、624961、624962、624963都关联了不止一个账号。为了解决这个问题，我尝试了这个查询：

```
SELECT FLOOR(accountNumber) AS [Account Number]
FROM tbl1
WHERE LabelId = 328 
```

这部分完成了我需要它做的事情，它只向我显示帐号，我被卡住的地方是计算出现超过 2 次的帐户。

谢谢， F

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:07:30.770

您可以使用 Have (http://en.wikipedia.org/wiki/Having_(SQL))

```
SELECT FLOOR(accountNumber) AS [Account Number]
FROM tblClientAccount
WHERE PrivateLabelSeqId = 328
GROUP BY floor(accountNumber)
Having Count(0) > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:08:54.427

```
SELECT FLOOR(accountNumber) AS [Account Number]
FROM tblClientAccount
WHERE PrivateLabelSeqId = 328
GROUP BY FLOOR(accountNumber)
HAVING COUNT(FLOOR(accountNumber)) > 1 
```

# c++ - 允许 C++ 开发的工具，没有单独的 .h .cpp 文件

> ID：10898814
> 
> 赞同：0
> 
> 时间：2012-06-05T14:04:05.907
> 
> 标签：c++, linux, file-organization

我正在开发一些 c++ 代码，但是将代码分隔为 .h 和 .cpp 让我发疯，因为它减慢了重构速度。

有没有一种工具可以让人们处理单个文件。一个只隐藏真相的编辑器，或者一个接受单个文件并生成两个文件 .cpp 和 .h 的每个处理器

澄清：我希望每个编译单元有一个文件（如 Java、C♯、Eiffel）。我仍然必须在文件中包含#include 才能包含其他模块的标题。（但后来 Java 和 c♯ 有导入和使用）。

说明 2：

如果应该在一起的一切都在一起，事情就会变得更容易。即每个班级只有一个文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T14:13:15.853

有[lz](http://www.lazycplusplus.com/)。我还没有尝试过，但它似乎是你正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:40:00.353

无论您尝试使用什么工具来执行此操作，都只会隐藏一些复杂性或使您的代码与 C++ 不同，而这反过来又会使其他人更难阅读/维护。

我建议您只是学习并习惯该语言的编译模型，而不是与之抗争。决定标题和/或实现的内容不是自动化过程，而是*设计*和工具的一部分无法为您设计。任何这样做的自动化工具最终都会产生不太完美的结果，可能会更长的编译时间和/或将实现细节泄露给头文件的用户。

# java - 如何使用 to_char 函数按条件添加到条件顺序

> ID：10898815
> 
> 赞同：2
> 
> 时间：2012-06-05T14:04:13.057
> 
> 标签：java, hibernate, criteria

我的 Hibernate 项目中有一个 Criteria 对象，我想向它添加`order by`日期字段的条件

但我想用*dd/mm/yyyy*格式按此字段排序，并且在数据库中此字段以*dd/mm/yyyy hh:mm:ss*格式保存。

在 SQL 中，此代码如下所示：

```
order by to_char(date_field_name, 'dd/mm/yyyy') 
```

如何将此功能添加到`Criteria.addOrder`？

换句话说，我该如何编写以下内容？

```
Criteria.addOrder(to_char(date_field_name, 'dd/mm/yyyy')) 
```

如果我这样做，我会收到错误：`no field name in the table`

或者也许有人知道这个订单案例的其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:13:57.207

在您的标准中，在添加包含日期的参数（我们称之为“currentDate”）后，试试这个（升序）：

```
.addOrder(Order.asc("currentDate")) 
```

# ajax - 当 AjaxFileUpload 触发 UploadComplete 事件时访问其他控件值

> ID：10898816
> 
> 赞同：4
> 
> 时间：2012-06-05T14:04:13.753
> 
> 标签：ajax, file-upload, postback

我的理解是 AjaxFileUpload 对象使用 iframe 来上传文件。发生回发，但没有其他控件回发 - 至少在我看来是这样，因为我无法访问任何其他控件的数据。

该应用程序的目的是允许用户上传文件。然后它将修改该文件的内容并将结果保存到服务器。问题是它需要一些额外的信息来进行修改，因此需要用户在页面其他地方输入的信息。

我能想到的唯一解决方案是每次修改其他控件之一时进行回发，这会影响应用程序的响应能力。我一直在寻找另一种解决方案的几天。

有没有人有任何想法？当 AjaxFileUpload 控件执行回发时，最佳案例解决方案将允许我访问我需要的所有数据。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-03-14T00:20:13.407

你可以有一个 ajax 功能，它可以读取不时更改的外部数据，并更新显示的信息，类似于电子邮件警报，对不起我的英语。

# groovy - 如何将更改存储到 tornado.no/cms 中的页面？

> ID：10898817
> 
> 赞同：0
> 
> 时间：2012-06-05T14:04:16.140
> 
> 标签：groovy

在 tornado-cms 中页面的控制器中，我执行以下操作：

```
def res = Service.tornado.articles([ articleCategoryPath: "boker/ny"]);
Service.tornado.loadFullArticles(res);
res.sort { a,b -> 
  b.props.year <=> a.props.year 
}
tornado.small_articles = res; 
```

或者，更短：

```
tornado.small_articles = Service.tornado.articles([ 
  articleCategoryPath: "boker/ny", 
  full: true ])
.sort { a, b -> b.props.year <=> a.props.year }; 
```

`small_articles`这将使用特定文件夹“boker/ny”中的所有文章填充内容框，这些文章按 article prop 反向排序`year`。

它工作正常，但是否可以保存对内容框所做的更改，`tornado.small_articles`以便从 GUI 中也可以看到生成的文章列表？像`Service.tornado.saveChangesToPageContentBox(page, content_box_nr, tornado.small_articles);`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:08:30.087

首先删除当前绑定到 small_articles 框的文章，如下所示：

```
Integer containerId = <id-of-small-articles-container>;

Service.tornado.getPageBindings(page.id).each { binding ->
    if (binding.containerId == containerId)
        Service.tornado.deletePageBinding(binding);
} 
```

然后为您收集的文章添加新的绑定：

```
tornado.small_articles.each {
    Service.tornado.addPageBinding(new ArticlePageContainer(page.id, it.id, containerId));
} 
```

您不应该对给定页面的每个请求都执行此操作，而应在内容更改或其他一些不太频繁的标准时更新列表。

# javascript - JavaScript 通过单独的条件设置布尔值？

> ID：10898819
> 
> 赞同：0
> 
> 时间：2012-06-05T14:04:24.697
> 
> 标签：javascript, boolean

我需要设计一个具有 2 个条件 a 和 b 的全局布尔值，这样如果 A 为真，则布尔值为真，直到 b 为真，此时布尔值为假。换句话说，如果 A 变为假，则布尔值仍然为真。

我尝试了一个简单的全局变量，但是当 A 变为 false 时它变为 false。

最好是 JavaScript，但伪代码几乎同样有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:14:24.757

如果我正确理解您的问题，那么将这些案例与

```
var bool = (a != b);
/*
    (false != false) = false
    (true != false) = true
    (false != true) = true
    (true != true) = false
*/ 
```

通过您的更改，您可以创建一个全局变量`var aWasEverTrue = a;`，而不是`a`直接设置，而是使用诸如`setA(true)`.

```
var a = false;
var b = false;
var aWasEverTrue = a;
function setA(newAValue) {
    aWasEverTrue = true;
    a = newAValue;
}

// (aWasEverTrue != b) = false

setA(true);
// (aWasEverTrue != b) = true

b = true;
// (aWasEverTrue != b) = false

setA(false);
// (aWasEverTrue != b) = false (as aWasEverTrue is still true)

b = false
// (aWasEverTrue != b) = true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T14:10:13.383

这听起来像一个异或。IE

```
!A and !B == false
A and !B == true
!A and B == true
A and B == false 
```

不幸的是，JavaScript 没有逻辑 XOR 运算符，但是

如果（A？！B：B）{

在功能上是等效的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T14:10:43.433

Javascript老派方式：

```
function Enjoy() {
    this.a = true;
    this.b = true;
    this.bool = true;
}

Enjoy.prototype = {
    constructor: Enjoy,

    setA: function( val ) {
        this.a = val;
        if ( this.a === true && this.b === true ) this.bool = false;
        else if ( this.a === true && this.b === false ) this.bool = true;
    },

    setB: function( val ) {
        this.b = val;
        if ( this.a === true && this.b === true ) this.bool = true;
        else if ( this.a === true && this.b === false ) this.bool = false;
    },

    getBool: function() {
        return this.bool;
    }
};

var enjoy = new Enjoy();
enjoy.getBool(); // true
enjoy.setB( false );
enjoy.getBool(); // false 
```

如您所见，我们的想法是为您的布尔值`a`和`b`变量使用 getter/setter，您可以在其中执行所有逻辑。

顺便说一句，这个问题绝对是针对 StackOverflow 的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-05T18:25:27.657

你想要的是一个状态机

结果状态：

```
T (True)
F (False) 
```

过渡：

```
F -- a (true) --> T
F -- anything else --> F
T -- b (true) --> F
T -- anything else --> T 
```

可以用一系列`if`s来表达

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T20:42:39.277

基于如果 A 不为真，B 应该如何表现的一些假设：

```
function FlipFlop(){
    this.latch = false;
    this.value = false;
}

FlipFlop.prototype = {
    constructor: FlipFlop,

    setA: function( val ) {
        this.latch = this.latch || !!val;
        this.value = this.latch;
    },

    setB: function( val ) {
        if(this.latch && !!val) {
            this.latch = false;
        }
        this.value = !val;
    },

    getVal: function() {
        return this.value;
    }
} 
```

# c++ - 受信任站点区域的 SiteLock 实施

> ID：10898820
> 
> 赞同：1
> 
> 时间：2012-06-05T14:04:25.093
> 
> 标签：c++, security, internet-explorer, activex, trusted-sites

我已将 SiteLock 1.15 机制添加到我的 ActiveX - 我想限制从不在“受信任的站点区域”中的站点加载和运行 ActiveX。

我添加了以下地图：

```
const struct IObjectSafetySiteLock::SiteList MyClass::rgslTrustedSites[2] =
{
 { SiteList::Allow, L"http", SITELOCK_TRUSTED_ZONE },
 { SiteList::Allow, L"https", SITELOCK_TRUSTED_ZONE }
}; 
```

但是当我运行 SiteLock 1.15 SDK 提供的 sitelist.exe 时，

我越来越：

```
Version: 1.21
Features:  Uses IOleObject instead of IObjectWithSite
  Allow http://(All Sites in Intranet Zone)
  Allow https://(All Sites in Intranet Zone) 
```

我不应该得到“受信任站点区域中的所有站点吗？

谢谢

# wordpress - 解决 IIS7 上 WordPress 的权限问题

> ID：10898821
> 
> 赞同：1
> 
> 时间：2012-06-05T14:04:25.500
> 
> 标签：wordpress, iis-7

我在通过 WPI 安装的 Win2k8/IIS7（使用 httpcache、fastCgi 和 UrlRewriter 2.0）上运行 WordPress。一切似乎都运行良好（上传、通过 Live Writer 发布、评论、插件、漂亮的 URL）。

我正在尝试将 WordPress 更新到最新版本，但出现如下错误：

> 下载失败。文件流的目标目录不存在或不可写

这与我在尝试下载主题或更新插件时遇到的错误相同。

事件日志中没有错误，WordPress 并没有真正告诉我它正在寻找哪个目录、它认为它正在使用什么用户或它缺少什么权限。

我已经两次（和三次）检查了 IIS 应用程序池用户是否已明确设置，并且该目录具有该用户的修改权限，最后这些权限已被传播到子文件夹。

在 Google 博士的建议下，我还在配置文件中添加了以下设置：

```
/** Absolute path to the WordPress directory. */
if ( !defined('ABSPATH') )
    define('ABSPATH', dirname(__FILE__) . '/');

/** Sets up WordPress vars and included files. */
require_once(ABSPATH . 'wp-settings.php');

define('WP_TEMP_DIR', ABSPATH . 'wp-content/');
define('FS_METHOD', 'direct'); 
```

我是否缺少配置选项或设置？WordPress 是否需要牺牲一只小猫和/或一只阿尔及利亚八齿狗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T13:53:39.570

从[关于 IIS7 安装的 PHP 手册](http://php.net/manual/en/install.windows.iis7.php)（强调我的）：

> 模拟和文件系统访问
> 
> 建议在使用 IIS 时在 PHP 中启用 FastCGI 模拟。**这由*php.ini 文件中的 fastcgi.impersonate 指令*控制。启用模拟后，PHP 将代表已由*IIS 身份验证*确定的用户帐户执行所有文件系统操作。**这确保即使在不同的 IIS 网站之间共享相同的 PHP 进程，只要在每个网站上使用不同的用户帐户进行 IIS 身份验证，这些网站中的 PHP 脚本将无法访问彼此的文件。
> 
> 例如，IIS 7 在其默认配置中启用匿名身份验证，并使用内置用户帐户 IUSR 作为默认身份。**这意味着为了让 IIS 执行 PHP 脚本，必须授予 IUSR 帐户对这些脚本的读取权限。**如果 PHP 应用程序需要对某些文件执行写操作或将文件写入某些文件夹，那么 IUSR 帐户应该对这些文件具有写权限。

正如[“我应该通过 FastCGI 模拟 PHP 吗？”中所讨论的那样。关于 ServerFault](https://serverfault.com/questions/282806/should-i-impersonate-php-via-fastcgi)的问题，如果您授予匿名用户在您的服务器上的写访问权限，则会存在安全问题。例如，如果您还启用了 WebDAV 模块，任何人都可以使用此协议写入您的目录！

因此我的建议是：

1.  确保您的所有站点都分配了自己*独特的应用程序池。*
2.  在应用程序池的*处理模型*下的*高级设置*中，将内置帐户设置为.*`ApplicationPoolIdentity`*
**   使用禁用*php.ini*中的模拟`fastcgi.impersonate = 0`，以便 PHP在 IIS 中设置的*应用程序池标识下运行。**   [*使用自动生成的应用程序池用户帐户*](http://learn.iis.net/page.aspx/624/application-pool-identities/)（例如“IIS AppPool\MyAppPoolName”）设置文件夹的读/写权限。*

 *这样，确保所有 PHP 脚本在系统帐户下运行，绑定到站点的应用程序池（将其与其他站点隔离），并且不会通过模拟意外获得过于公开的访问权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:18:55.117

如果我错了，请纠正我，但我相信以下配置提供了相同的好处，并且还尊重 PHP 所需的 fastcgi.impersonate=1 设置。

步骤 1,2 和 4 相同 - 步骤 3 不同。

1.  确保每个站点都有自己的应用程序池（同上）
2.  在 Advanced Settings > Processing Model > Application Pool Identity 下（同上）
3.  IIS > 身份验证 > 匿名身份验证 > 应用程序池标识（不是 IUSR）
4.  使用 IIS AppPool\MyAppPoolName 设置读/写权限（同上）

我们不授予 IUSR 或 IIS_IUSRS 对 webroot 的访问权限。所有权限都分配给 IIS AppPool\MyAppPoolName*

# php - 使用随机名称将图像保存到数据库中

> ID：10898823
> 
> 赞同：1
> 
> 时间：2012-06-05T14:04:36.050
> 
> 标签：php, javascript, jquery, html, postgresql

大家早上好，我这几天一直在尝试解决这个问题，但我必须承认我对编程有点陌生。

实际上我正在制作一个新闻网站，并且对于新闻管理我有一个小问题，我想要那个，当我点击保存图片时，它会得到一个随机名称，而不是它从用户文件中获得的名称，例如：pic.jpg另存为 2613.jpg。

我试图这样做是为了防止如果有 2 张同名的图片用新的图片替换旧的，我尝试使用 javascript、php 但我无法解决我的问题，希望你们可以帮助我方式，我使用 javascript、php、postgresql、jquery 和 ajax 工作，如果您需要更多详细信息，请告诉我，并且再次希望我能从这个社区获得一些帮助。

```
function guardar(){
if($('#titl').val() == '' || $('#categ').val() == '' || $('#cont').val()==''){
            alert("Todos los campos deben contener datos!");
            return false;
        }

        $.ajax({
            url: "noticias_php.php",
            data:{
                n : rand(),
                "accion" : "guardar",
                ID     : $('#id').val(),
                Titulo : $('#titl').val(),
                Categorias : $('#categ').val(),
                Contenido : $('#cont').val(),
                fecha: $('#fecha').val(),
                imagen: $('#img_id').val()

            },
            success: function(datos){
                var respuesta = explode("-*", datos);

                        if (respuesta[0] == "SI"){
                            aviso(respuesta[1]);
                            limpiar();
                        }else if (respuesta[0] == "NO"){
                            aviso(respuesta[1]);
                        }else{
                            aviso(datos);
                        }
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:12:41.320

使用 UUID（与 GUID 非常相似）。[Postgres UUID](http://www.postgresql.org/docs/8.4/static/uuid-ossp.html)

你在哪个版本？如果在 9.1 上尝试只执行 CREATE EXTENSION "uuid-ossp";

您是在 Windows 上还是在某些 *niX 机器上？有关如何安装的详细信息，请参阅此链接，具体取决于您所在的位置。[安装 uuid-ossp 模块](https://stackoverflow.com/questions/4163029/generate-uuid-in-windows-postgresql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:14:15.860

您可能希望基于数据库来驱动它 - 从 ImageList 中选择 max(id)+1。这样您就可以保证唯一性，而不是具有随机值。您也可以使用 UUID，但它们将是更长的文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:22:46.123

您可以在这里做几件事——我建议在服务器级别使用 PHP 来做这些事情。您显示的代码似乎是客户端 JavaScript。

通常，您可以生成一个随机数或日期戳（这可能更有用）。然后将其替换或附加到文件名。根据您网站的使用情况，这两个都足够了。

PHP 随机数生成器 -`rand(0000, 9999)`

PHP 日期戳生成器（请注意，如果生成日期不包括：字符等，这些将破坏一些图像 url） -`date("YmdHis")`

我经常使用一些像这样的 php 来清理文件名

```
$file_name = str_replace(" ", "_", rand(0000, 9999)."_".eregi_replace("[[:space:]]+", " ", strtolower($_FILES['image']['name']))); 
```

这不仅会通过将 4 位随机数附加到文件名来使其唯一，而且还会将所有双空格、全部小写以及用下划线替换空格。它可能不是最干净的，但它可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T16:12:28.197

`md5(microtime(true));`- 这将是非常独特的。

您可以附加`user_id`或`rand(0,1000)`使其更加独特。

显然，替代方法是使用`tempnam`它将在 bash 环境中创建唯一的临时文件，您可以重复使用该文件。

# objective-c - 检测 iOS 应用程序中的私有 API

> ID：10898824
> 
> 赞同：0
> 
> 时间：2012-06-05T14:04:36.700
> 
> 标签：objective-c, ios, app-store, iphone-privateapi

我已经使用 AppScanner[检测私有 API](http://www.macworld.com/article/1154799/app_scanner.html) 但是，它将几乎所有函数签名检测为私有 API，可能性为 50%。 ![跑步的快照](../Images/070fe80fe9f09e4cd783ab2028f2a779.png)

这些是错误的警告吗？

我同意 _font 与内部 API 发生冲突，但为什么剩余的公共 API 会显示在列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:29:21.383

显然这个程序已经死了。检查网站

[http://www.chimpstudios.com/appscanner/index.html](http://www.chimpstudios.com/appscanner/index.html)

它可能在过去的某个时候确实运作良好。

# vb.net - 如何将重复列表转换为有计数的列表？

> ID：10898840
> 
> 赞同：0
> 
> 时间：2012-06-05T14:05:21.060
> 
> 标签：vb.net, list, count

我有一个列表（交易）：

```
Type | State  
----------------
boat | buy
boat | buy
boat | sell
car  | sell
car  | sell
car  | sell
plane| buy 
```

如何将其转换为列表（事务缩短）：

```
Type | State | Quantity  
-----------------------
boat | buy   | 2
boat | sell  | 1
car  | sell  | 3
plane| buy|  | 1 
```

优雅地。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:14:09.857

使用 LINQ 和[`Enumerable.GroupBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)：

```
Dim transactionGroups =
        From t In transactions
        Group t By Key = New With {
            .Type = t.Type,
            .State = t.State
        } Into Group
        Select New With {
            .Type = Key.Type,
            .State = Key.State,
            .Quantity = Group.Count()
        }

For Each tGroup In transactionGroups
    Dim type = tGroup.Type
    Dim state = tGroup.State
    Dim quantity = tGroup.Quantity  
Next 
```

# ios - 我们可以使用 iPod 前置或后置摄像头来停止使用亮度变化的事件吗？

> ID：10898841
> 
> 赞同：1
> 
> 时间：2012-06-05T14:05:23.067
> 
> 标签：ios, xcode

我从 ipod touch 4 开发了一个应用程序，但不幸的是它不占用接近传感器，但我想通过触发相机的亮度来启动和停止某个事件，这可以实现吗？如果是这样，它会消耗更多的CPU吗？还有我可以同时使用这两个相机吗？

# android - 如何通过电话号码获取联系人ID

> ID：10898842
> 
> 赞同：4
> 
> 时间：2012-06-05T14:05:23.527
> 
> 标签：android, contacts

我将手机的通话记录查询到 ListView 中。因此，当用户长按某个项目时，会出现一个对话框，其中包含“查看联系人”等选项。为了能够查看联系人，意图需要联系人 ID。我的问题是我并不总是能看到正确的联系人。我点击彼得，然后彼得的联系表出现了。我点击莎拉，杰森的联系表出现了。

我一定是错误地使用了这段代码。请帮忙。

```
ContentResolver contentResolver = getContentResolver();

Uri uri = Uri.withAppendedPath(ContactsContract.PhoneLookup.CONTENT_FILTER_URI, Uri.encode(phone));

Cursor cursor =  contentResolver.query(uri, new String[] {PhoneLookup.DISPLAY_NAME, PhoneLookup._ID}, null, null, null);

if(cursor!=null) {
      while(cursor.moveToNext())
      {
        String contactName = cursor.getString(cursor.getColumnIndexOrThrow(PhoneLookup.DISPLAY_NAME));
        contactid2 = cursor.getString(cursor.getColumnIndexOrThrow(PhoneLookup._ID));
        }
        cursor.close();
}

Intent intent_contacts = new Intent(Intent.ACTION_VIEW, Uri.parse("content://contacts/people/" + contactid2));
 startActivity(intent_contacts); 
```

也许我需要的不是PhoneLookup._ID，而是其他一些ID。

[我也在这里](https://stackoverflow.com/questions/3712112/search-contact-by-phone-number)尝试了 Felipe 的回答，同样的情况。

**编辑：**

*   在 HTC Desire HD (2.3.5) 上，我在 99% 的情况下都能找到正确的联系人。
*   在 ZTE Blade (2.2) 上，我在 60% 的情况下都能得到正确的接触。
*   在三星 Galaxy Ace (2.3.3) 上，我在 5% 的情况下获得了正确的联系人。

这到底是怎么回事？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T18:16:36.813

在深入研究主题后，我在 googlegroups 上找到了 sven 的帮助。问题是我使用了一个过时的意图。我阅读了开发者网站上的许多页面，我一定是不知何故错过了它。

我还发布了完整的代码。

```
contactid26 = null;

ContentResolver contentResolver = getContentResolver();

Uri uri = Uri.withAppendedPath(ContactsContract.PhoneLookup.CONTENT_FILTER_URI, Uri.encode(phonenumintolist));

Cursor cursor =  
contentResolver.query(
    uri, 
    new String[] {PhoneLookup.DISPLAY_NAME, PhoneLookup._ID}, 
    null, 
    null, 
    null);

    if(cursor!=null) {
        while(cursor.moveToNext()){
            String contactName = cursor.getString(cursor.getColumnIndexOrThrow(PhoneLookup.DISPLAY_NAME));
            contactid26 = cursor.getString(cursor.getColumnIndexOrThrow(PhoneLookup._ID));

        }
        cursor.close();
    }
    if (contactid26 == null) {
        Toast.makeText(DetailedCallHistory.this, "No contact found associated with this number", Toast.LENGTH_SHORT).show();
    }
    else {
        Intent intent_contacts = new Intent(Intent.ACTION_VIEW, Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_URI, String.valueOf(contactid26)));
        //Intent intent_contacts = new Intent(Intent.ACTION_VIEW, Uri.parse("content://contacts/people/" + contactid26));
        startActivity(intent_contacts);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T23:22:14.233

在这种情况下，我将向您展示如何获取 ID 以及您输入并想要搜索的任何联系人号码的姓名，例如，如果您输入号码并想要搜索其姓名和 ID，则使用这段代码，它是 100% 工作的，如果你想进一步修改，那么你可以告诉我

```
 Uri lookupUri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI,Uri.encode(phnno.getText().toString()));//phone no 
         String[] proj = new String[] 
           {///as we need only this colum from a table...
             Contacts.DISPLAY_NAME,
             Contacts._ID,
            };
         String id=null;
         String sortOrder1 = StructuredPostal.DISPLAY_NAME + " COLLATE LOCALIZED ASC";
         Cursor crsr = getContentResolver().query(lookupUri,proj, null, null, sortOrder1);
     while(crsr.moveToNext())
     {
         String name=crsr.getString(crsr.getColumnIndex(Contacts.DISPLAY_NAME));
          id = crsr.getString(crsr.getColumnIndex(Contacts._ID));
          Toast.makeText(this,"Name of this cntct is   : " +name +"\n id is : "+id ,Toast.LENGTH_SHORT).show();
     }
    crsr.close(); 
```

# python - 没有收到所有 ICMP 超时消息：为什么？

> ID：10898846
> 
> 赞同：6
> 
> 时间：2012-06-05T14:05:26.143
> 
> 标签：python, packet, icmp, scapy, ttl

我正在使用 Scapy 重放一些我更改 TTL 值的转储数据包。即使 TTL=1，我也得到了非常奇怪的结果。

当我彼此分开运行测试时间时，大约有 40% 到 95% 的数据包回复了 ICMP 超时消息。然后我可以递归地重放未应答的数据包，并且每次都或多或少地获得与以前相同百分比的已应答数据包。

这是为什么？

我一直在以 0.1 秒的间隔发送数据包。这应该没问题吧？我的超时值是10s，应该很保守。

这里有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T18:28:09.883

您所说的本质上是您只能在给定的时间内测试这么多无法访问的主机。一个可能的原因：许多路由器对 ICMP 消息进行速率限制。

`ping`在做其他事情之前，最好先测试主机是否成功；这样您就可以肯定地确认可达性。缺点是默认情况下 MS Windows 会阻止 ping。

如果你不能`ping`首先，那么你需要增加你的探测之间的时间，或者提高返回 ICMP 消息的路由器上的 ICMP 不可达率。

编辑：

根据评论，您似乎在`scapy`处理流量的能力上碰壁了。过去，我通过在后台发送`scapy`和生成以接收流量来提高吞吐量。`tcpdump`

# jquery - 使用带有 Masonry 回调的 Infinite Scroll 时遇到问题

> ID：10898850
> 
> 赞同：1
> 
> 时间：2012-06-05T14:05:38.607
> 
> 标签：jquery, wordpress, infinite-scroll

我正在尝试无限滚动以在 WordPress 安装中使用砌体，但遇到了一些问题。

因此，无限滚动有效，一旦到达导航 div，新帖子就会出现在现有帖子下。但是，我无法让砌体的回调正常工作。

这是我用来让 Masonry 运行的代码：

```
var $container = jQuery('.tt');

    $container.imagesLoaded(function(){
      $container.masonry({
        itemSelector: '.tt_post',
        columnWidth: 240,
        gutterWidth: 10
      });
    }); 
```

这就是我用作回调的内容：

```
function(newElements) {
        // hide new items while they are loading
        var $newElems = $(newElements).css({ opacity: 0 });
        // ensure that images load before adding to masonry layout
        $newElems.imagesLoaded(function(){
          // show elems now they're ready
          $newElems.animate({ opacity: 1 });
          $container.masonry( 'appended', $newElems, true );
        }); 
```

这可以在[http://youworkit.co.uk/home/](http://youworkit.co.uk/home/)看到。

抛出的 javascript 错误是函数（newElements）处的“函数语句需要名称”。[http://imgur.com/oAtJS](http://imgur.com/oAtJS) 我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T15:45:43.867

事实证明，这是由于过度热心的插件加载了额外的 jQuery 副本。由于它已被禁用，因此回调适用于以下代码：

```
// hide new items while they are loading
var $newElems = jQuery(newElements).css({ opacity: 0 });
// ensure that images load before adding to masonry layout
$newElems.imagesLoaded(function(){
// show elems now they're ready
$newElems.animate({ opacity: 1 });
$container.masonry( 'appended', $newElems, true );
}); 
```

希望这可以帮助某人。

# salesforce - 如何让我的客户门户自动调整其组件的大小？

> ID：10898856
> 
> 赞同：0
> 
> 时间：2012-06-05T14:06:03.053
> 
> 标签：salesforce, apex-code, visualforce

我有一些名为 Custom_News、Custom_Articles 和 CUstom_Cases 的 HTML 主页自定义组件。

这是他们的 HTML：

`<iframe src="/apex/NewsPage?id=a1TW0000000EJAL" frameborder="0" width="100%"></iframe>&nbsp;`

`<iframe src="/apex/Custom_Home" frameborder="0" width="100%"></iframe>&nbsp;`

`<iframe src="/apex/CasesPage" width="100%" frameborder="0"></iframe>&nbsp;`

这是我的客户门户主页布局的样子：

![在此处输入图像描述](../Images/35b2709a50614a931f554f39d6c26278.png)

这就是我登录到客户门户时自定义组件的样子：

![在此处输入图像描述](../Images/c62893de988a3878487c7251a33da53a.png)

如何摆脱滚动条？我希望客户门户自动调整组件的大小，以便所有组件都没有滚动条。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:40:39.763

您可以尝试使用 JavaScript 动态修改 iframe 的高度。这个[答案](https://stackoverflow.com/a/819455/549141)解释了如何做到这一点。

[这是使用提供](https://stackoverflow.com/a/819455/549141)的 JavaScript 的示例：

```
<script language="JavaScript">
<!--
function autoResize(id){
    var newheight;
    var newwidth;

    if(document.getElementById(id)){
        newheight = document.getElementById(id).contentWindow.document.body.scrollHeight;
        newwidth = document.getElementById(id).contentWindow.document.body.scrollWidth;
    }

    document.getElementById(id).height = (newheight) + "px";
    document.getElementById(id).width = (newwidth) + "px";
}
//-->
</script> 
```

`<iframe src="/apex/NewsPage?id=a1TW0000000EJAL" frameborder="0" width="100%" onLoad="autoResize('iframe1');"></iframe>&nbsp;`

`<iframe src="/apex/Custom_Home" frameborder="0" width="100%" onLoad="autoResize('iframe1');"></iframe>&nbsp;`

`<iframe src="/apex/CasesPage" width="100%" frameborder="0" onLoad="autoResize('iframe1');"></iframe>&nbsp;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:11:22.160

这就是我最终做的事情：

```
<script language="JavaScript">
    function resizeIframe(newHeight, id){    
        document.getElementById(id).style.height = parseInt(newHeight,10) + 'px';
}
</script>
<iframe id="iframe2" src="/apex/NewsPage?id=a1TW0000000EJAL" frameborder="0"  ="" onload="parent.resizeIframe(1.5*document.body.clientHeight,'iframe2');"  height="100%" width="100%"></iframe> 
```

# java - 正则表达式在字符串中查找键->值

> ID：10898858
> 
> 赞同：3
> 
> 时间：2012-06-05T14:06:05.660
> 
> 标签：java, regex, string

我有一个字符串，我需要获取键-> 值对的数组（2 - 暗淡）。

“匹配”是当两个单词之间有一个**->**，前后有mo空格->

例如输入字符串：

> skip_me key1->value1 key2->value2 skip_me_2 key3->value3 skip_me_3 skip_me -> 还有

结果应该是数组：
key1,value1
key2,value2
key3,value3

这是我的代码：

```
Pattern p = Pattern.compile( "\\s*([^(->)]+)->([^(->)]+)\\s*" );
Matcher m = p.matcher("skip_me key1->value1 key2->value2 skip_me_2 key3->value3 skip_me_3");
while( m.find() ) {
  System.out.println( "Key:" + m.group(1) + "Value:" + m.group(2) );
} 
```

我的正则表达式是错误的。请协助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:12:49.187

匹配单词字符（字母、数字和下划线`_`）...尽可能多

```
Pattern.compile( "(\w+)->(\w+)" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:12:29.713

尝试

```
Pattern p = Pattern.compile("([^\s]+?)->([^\s]+)"); 
```

（未在 Java 中测试）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:29:34.223

我想你可能会使用：

```
Pattern.compile( "\\s*(([^\\s]+)(?=->))->((?<=->)([^\\s]+))\\s*" ); 
```

它使用正向前瞻和正向后视来匹配前后的所有内容`->`。

未在 Java 中测试，仅在基于您的示例字符串的 Eclipse Regex Util 中测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T14:13:34.917

您的正则表达式的部分`[^(->)]*`绝对不是您想要的。它匹配一系列字符，不包含任何字符`(`、`-`和。`>``)`

# javascript - 在使用js关闭弹出窗口时隐藏jsp中的按钮？

> ID：10898862
> 
> 赞同：2
> 
> 时间：2012-06-05T14:06:10.463
> 
> 标签：javascript, jsp

在我点击按钮的 jsp 中，我显示了一个使用 javascript 的弹出窗口。弹出内容使用另一个 3rd 方站点显示。弹出窗口有一个关闭按钮，在关闭弹出窗口时，我需要在 jsp 中隐藏或不显示该按钮。我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:43:49.833

如果您可以控制弹出窗口的关闭代码，请在弹出窗口中尝试以下操作：

`window.opener.document.getElementById('myButton').style.visibility="hidden";`

如果你无法控制打开窗口的关闭代码，[有人](http://atashbahar.com/post/Detect-when-a-JavaScript-popup-window-gets-closed.aspx)想出了一个聪明的主意：

```
var win = window.open('http://www.google.com', 'google','width=800,height=600,status=0,toolbar=0');   
var timer = setInterval(function() {   
    if(win.closed) {  
        clearInterval(timer);  
        document.getElementById('myButton').style.visibility="hidden";
    }  
}, 1000); 
```

**更新：**对于 Internet Explorer，当从不同域加载页面到打开的窗口时，如果启用保护模式，它将返回 null 而不是对窗口的引用。看到这个[小提琴](http://jsfiddle.net/ujyB5/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:20:09.157

您可以使用`$(selector).hide();` 隐藏元素，以下是在外部单击时关闭弹出窗口的方法：

此外，您可以使用纯 javascript 并且：

```
document.getElementById('elementId').style.visibility = 'hidden'; 
```

单击要隐藏的元素外部：

```
$(document).click(function (event) {

    if (event.target.className != 'elementToOpen' &&
      $(event.target).parents().index($('#popupWrap')) == -1) {

        if ($('#popupWrap').is(':visible')) {
            $('#popupWrap').hide();

            // .hide() will give selected element css(display:'none')
        }
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:11:55.137

如果您也在使用 JQuery，您只需获取按钮的 id/class 并将以下内容添加到您的按钮调用的 js 函数中：

```
$("#yourID").hide();
$(".yourClass").hide(); 
```

# javascript - jQuery滚动页面，使光标停留在“逻辑中心”

> ID：10898864
> 
> 赞同：0
> 
> 时间：2012-06-05T14:06:15.847
> 
> 标签：javascript, jquery

我有一个巨大的 html 表单，有近 350 个控件，占用户屏幕高度的 5-6 倍。用户从页面的开头开始填写每个输入字段并继续。一旦屏幕底部附近的光标丰富，用户必须能够看到一些下一个输入字段，所以这里是问题：我想避免使用滚动条。我想设置一些“边距”（比如每页边 200 像素）

如果用户单击屏幕边缘附近的控件，则此机制也必须起作用

我正在寻找一个 jQuery 解决方案

玩弄 jQuery.ScrollTo，但不知道如何将我的逻辑嵌入到代码中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:11:58.917

像这样的东西应该工作......

[http://jsfiddle.net/q9QHQ/](http://jsfiddle.net/q9QHQ/)

```
$(document).ready(function() {

    $('input').focus(function() {

        if ($(this).offset().top > 100)
            $(window).scrollTop($(this).offset().top + 100);

    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T17:21:29.383

这应该这样做

[http://jsfiddle.net/JsWnk/](http://jsfiddle.net/JsWnk/)

```
$(document).ready(function() {

    $('input').focus(function() {

        var padding = 100; // Desired page "padding"

        var lbound = $(this).offset().top - $(window).height() + padding;
        var ubound = $(this).offset().top - padding;

        if ($(window).scrollTop() < lbound)
            $(window).scrollTop(lbound);
        else if ($(window).scrollTop() > ubound)
            $(window).scrollTop(ubound);

    });
});
​ 
```

# java - Android 更新 - 合并数据库内容？

> ID：10898866
> 
> 赞同：1
> 
> 时间：2012-06-05T14:06:20.740
> 
> 标签：java, android

如果我更新我的应用程序正在使用的数据库表怎么办，例如，如果我引入另一个类或更改现有的类。现在，当用户更新应用程序时，如何将应用程序的任何现有数据库内容合并到新的数据库定义中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:30:42.420

为此有一个抽象方法称为[onUpgradeDatabase()](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onUpgrade%28android.database.sqlite.SQLiteDatabase,%20int,%20int%29)。当 Android 认为您的数据库需要更新时，将调用此函数。这主要发生在您更改数据库版本号时。

在我最近的所有项目中，我都使用以下方法逐个版本升级用户手机上的数据库（即使从例如：版本 1 到版本 5，如果用户有一段时间没有更新应用程序）：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    updateDatabase(db, oldVersion + 1, newVersion);
}

private void updateDatabase(SQLiteDatabase db, int fromVersion, int toVersion) {
    Log.i("Updating database from version " + fromVersion + " to " + toVersion);

    for (int ver = fromVersion; ver <= toVersion; ver++) {
        switch (ver) {
            case 1:
                handleDatabaseVersion1(db);
                break;
            case 2:
                handleDatabaseVersion2(db);
                break;                  
        }
    }
}

private void handleDatabaseVersion1(SQLiteDatabase db) {
   // create initial tables and so on
}

private void handleDatabaseVersion2(SQLiteDatabase db) {
   // here we extend the Users table with another two columns
} 
```

如果您修改任何架构，包括新表、新列、修改的列类型以及任何您必须执行正确的 SQL 语句来更新所有内容而不删除所有用户的数据！假设您正在编写一个记事本应用程序，并且所有笔记都存储在数据库中。如果您修改 Notes 表，则不得删除用户的便笺，因此请小心处理这些数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:17:45.163

你将不得不使用[`onUpgradeDatabase`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onUpgrade%28android.database.sqlite.SQLiteDatabase,%20int,%20int%29)

在这种方法中，您可以更改表。

# python - 如何防止尝试捕获python中的所有可能行？

> ID：10898873
> 
> 赞同：22
> 
> 时间：2012-06-05T14:06:37.080
> 
> 标签：python, exception, exception-handling

我连续有很多行可能会引发异常，但无论如何，它仍然应该继续下一行。如何在不单独尝试捕获可能引发异常的每个语句的情况下做到这一点？

```
try:
    this_may_cause_an_exception()
    but_I_still_wanna_run_this()
    and_this()
    and_also_this()
except Exception, e:
    logging.exception('An error maybe occured in one of first occuring functions causing the others not to be executed. Locals: {locals}'.format(locals=locals())) 
```

让我们看看上面的代码，所有函数都可能抛出异常，但不管它是否抛出异常，它仍然应该执行下一个函数。有没有很好的方法呢？

我不想这样做：

```
try:
    this_may_cause_an_exception()
except:
    pass
try:
    but_I_still_wanna_run_this()
except:
    pass
try:
    and_this()
except:
    pass
try:
    and_also_this()
except:
    pass 
```

我认为只有当异常很严重时代码才应该在异常之后继续运行（计算机会烧毁或整个系统会搞砸，它应该停止整个程序，但是对于许多小事情也会抛出异常，例如连接失败等）我通常在异常处理方面没有任何问题，但在这种情况下，我使用的是第 3 方库，它很容易为小事情引发异常。

在查看 m4spy 的答案后，我认为不可能有一个装饰器，即使其中一个引发异常，它也会让函数中的每一行都执行。

像这样的东西会很酷：

```
def silent_log_exceptions(func):
    @wraps(func)
    def _wrapper(*args, **kwargs):
        try:
            func(*args, **kwargs)
        except Exception:
            logging.exception('...')
            some_special_python_keyword # which causes it to continue executing the next line
    return _wrapper 
```

或者是这样的：

```
def silent_log_exceptions(func):
    @wraps(func)
    def _wrapper(*args, **kwargs):
        for line in func(*args, **kwargs):
            try:
                exec line
            except Exception:
                logging.exception('...')
    return _wrapper

@silent_log_exceptions
def save_tweets():
    a = requests.get('http://twitter.com)
    x = parse(a)
    bla = x * x 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-05T14:09:51.947

```
for func in [this_may_cause_an_exception,
             but_I_still_wanna_run_this,
             and_this,
             and_also_this]:
    try:
        func()
    except:
        pass 
```

这里有两点需要注意：

*   您要执行的所有操作都必须由具有相同签名的可调用对象表示（在示例中，可调用对象不带参数）。如果它们还没有，请将它们包装在小函数、`lambda`表达式、可调用类等中。
*   裸`except`子句是个坏主意，但您可能已经知道这一点。

另一种更灵活的替代方法是使用高阶函数，例如

```
def logging_exceptions(f, *args, **kwargs):
    try:
        f(*args, **kwargs)
    except Exception as e:
        print("Houston, we have a problem: {0}".format(e)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T14:16:39.367

我遇到了类似的事情，并在[这里](https://stackoverflow.com/q/7271245/724357)问了一个关于 SO 的问题。接受的答案处理日志记录，并仅监视特定异常。我最终得到了一个修改后的版本：

```
class Suppressor:
    def __init__(self, exception_type, l=None):
        self._exception_type = exception_type
        self.logger = logging.getLogger('Suppressor')
        if l:
            self.l = l
        else:
            self.l = {}
    def __call__(self, expression):
        try:
            exec expression in self.l
        except self._exception_type as e:
            self.logger.debug('Suppressor: suppressed exception %s with content \'%s\'' % (type(self._exception_type), e)) 
```

可以这样使用：

```
s = Suppressor(yourError, locals()) 
s(cmdString) 
```

因此，您可以设置命令列表并`map`与抑制器一起使用以运行所有命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:34:14.607

您可以使用装饰器处理这样的任务：

```
import logging
from functools import wraps

def log_ex(func):
    @wraps(func)
    def _wrapper(*args, **kwargs):
        try:
            func(*args, **kwargs)
        except Exception:
            logging.exception('...')
    return _wrapper

@log_ex
def this_may_cause_an_exception():
    print 'this_may_cause_an_exception'
    raise RuntimeError()

@log_ex
def but_i_wanna_run_this():
    print 'but_i_wanna_run_this'

def test():
    this_may_cause_an_exception()
    but_i_wanna_run_this() 
```

调用测试函数将如下所示（这将表明两个函数都已执行）：

```
>>> test()
this_may_cause_an_exception
ERROR:root:...
Traceback (most recent call last):
  File "<stdin>", line 5, in _wrapper
  File "<stdin>", line 4, in my_func
RuntimeError
but_i_wanna_run_this 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-09T02:35:23.793

有时，当语言无法支持您表达想法的优雅方式时，因为语言开发在过去几十年中确实失败了，您只能依靠 Python 仍然是支持 exec 语句的动态语言这一事实​​，这使得以下情况成为可能：

```
code="""
for i in range(Square_Size):
    Square[i,i] @= 1
    Square[i+1,i] @= 2
    @dowhatever()
""" 
```

这个新的操作符使代码更加pythonic和优雅，因为您不需要指定额外的 if 语句来保证索引保持绑定或函数确实成功，这与我们想要表达的内容完全无关（它只是不应该stop) 在这里（注意：虽然可以通过基于列表类创建一个类来实现安全索引，但只要有 try catch 就可以使用此运算符），在 Lisp 中，以 Lisp 的方式定义它很容易，但它接缝不可能在 Python 中以优雅的方式定义它，但是，这里有一个小预解析器，它将使它成为可能： `exec "\n".join([o+"try: "+z.replace("@","")+"\n"+o+"except: pass" if "@" in z else z for z in code.split("\n") for o in ["".join([h for h in z if h==" "])]]) #new <- hackish operator which wraps try catch into line`

结果，假设 Square 是 4x4 并且只包含零：

```
[1 0 0 0]
[2 1 0 0]
[0 2 1 0]
[0 0 2 1] 
```

相关：Sage / Sagemath CAS 使用 preparse-function 在代码到达 Python 解释器之前对其进行转换。该功能的猴子补丁将是：

```
def new_preparse(code,*args, **kwargs):
    code="\n".join([o+"try: "+z.replace("@","")+"\n"+o+"except: pass" if "@" in z else z for z in code.split("\n") for o in ["".join([h for h in z if h==" "])]])
    return preparse(code)
sage.misc.preparser.preparse=new_preparse 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-09T14:24:39.067

除了提供的答案之外，我认为值得一提的是，`try-except`已经提出了单行声明 - 请参阅相关的[PEP 463](https://www.python.org/dev/peps/pep-0463/)以及不幸的拒绝通知：

```
""" I want to reject this PEP. I think the proposed syntax is acceptable given the
desired semantics, although it's still a bit jarring. It's probably no worse than the
colon used with lambda (which echoes the colon used in a def just like the colon here
echoes the one in a try/except) and definitely better than the alternatives listed.

But the thing I can't get behind are the motivation and rationale. I don't think that
e.g. dict.get() would be unnecessary once we have except expressions, and I disagree 
with the position that EAFP is better than LBYL, or "generally recommended" by Python. 
(Where do you get that? From the same sources that are so obsessed with DRY they'd rather
introduce a higher-order-function than repeat one line of code? :-)

This is probably the most you can get out of me as far as a pronouncement. Given that
the language summit is coming up I'd be happy to dive deeper in my reasons for rejecting
it there (if there's demand).

I do think that (apart from never explaining those dreadful acronyms :-) this was a 
well-written and well-researched PEP, and I think you've done a great job moderating the 
discussion, collecting objections, reviewing alternatives, and everything else that is 
required to turn a heated debate into a PEP. Well done Chris (and everyone who 
helped), and good luck with your next PEP! """ 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-05T14:12:36.923

```
try:
    this_may_cause_an_exception()
except:
    logging.exception('An error occured')
finally:
    but_I_still_wanna_run_this()
    and_this()
    and_also_this() 
```

您可以使用[finally](http://docs.python.org/tutorial/errors.html#defining-clean-up-actions)异常处理块。它实际上是为了清理代码。

编辑：我看到你说所有函数都可以抛出异常，在这种情况下，larsmans 的答案是我能想到的最干净的答案，可以为每个函数调用捕获异常。

# icons - 在 Sencha 的面板中添加图标

> ID：10898879
> 
> 赞同：0
> 
> 时间：2012-06-05T14:07:02.057
> 
> 标签：icons, extjs

我是新来的煎茶。我正在尝试向面板添加图标，但我的代码不起作用。

```
 Ext.define('components.ImagePanel', {
    extend: 'Ext.Panel',    
    initialize: function () {
        this.callParent(arguments);
        var image = {
            xtype: "image",
            src: 'icon.png',
            width:100,
            height:100
                }, 
            scope: this
        };
 this.add([image]);
}); 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:58:51.767

哇，甚至不知道有图像 xtype。

反正...

要使用 xtype，您需要使用`Ext.widget();`

所以你的代码应该是这样的：

```
Ext.define('components.ImagePanel', {
extend: 'Ext.Panel',    
initialize: function () {
    this.callParent(arguments);
    var image = Ext.widget('image',{
        xtype: "image",
        src: 'icon.png',
        width:100,
        height:100
    });
    this.add([image]);
};
}); 
```

# scheduled-tasks - 每周 6 天的任务计划程序

> ID：10898881
> 
> 赞同：7
> 
> 时间：2012-06-05T14:07:12.330
> 
> 标签：scheduled-tasks

我有一个备份，我每天晚上将其作为计划任务运行，然后在每个工作日早上检查后清除。

问题是我的服务器的内存几乎用完了（无法用我当前的主机升级，并且仍在研究其他主机），周末备份让我在周一早上没有内存。

有没有办法让 Windows 任务计划程序每周运行 6 天而不是 7 天？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-05T14:14:19.730

如果您选择每周，您可以选择您的任务应运行的日期。

# java - @AfterMethod 在 onConfigurationSuccess 方法中被调用两次。TestNG 中的错误？

> ID：10898893
> 
> 赞同：0
> 
> 时间：2012-06-05T14:07:54.677
> 
> 标签：java, testng

我有一个监听器类，它实现了 IResultListener。在那个类中，我实现了 onConfigurationSuccess 方法，在测试方法之后做一些事情。但是@AfterMethod注解的方法在同一个测试方法之后被调用了两次。我用控制台输出检查这个：

```
public void onConfigurationSuccess(ITestResult itr) {
    if (itr.getMethod().isAfterMethodConfiguration()) {
        System.out.println("Aftermethod: " + itr.getMethod().getMethodName());
        Object[] parameters = itr.getParameters();
        ITestResult originalResult = (ITestResult) parameters[0];
        System.out.println("Testmethod: " + originalResult.getMethod().getMethodName());
    }
} 
```

有没有人有同样的问题？我只有一个 @AfterMethod 方法，并且 testmethod 运行一次。这是testng中的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T08:02:55.493

我使用了 testng 6.3.1 版本，问题只出现在这里。在实际版本 6.5.2 中它工作正常。

# php - fread()：提供的参数不是有效的流资源

> ID：10898897
> 
> 赞同：2
> 
> 时间：2012-06-05T14:08:07.367
> 
> 标签：php, fopen, fread

这让我有点生气，以为可能是服务器配置问题，但我已经在不同的主机上尝试过，也遇到了同样的问题。

我已经缩小范围并创建了一个测试脚本来排除一切

```
<?php
$myFile = "test.txt";
$fh = fopen($myFile, 'r') || die("Couln't open file");
if ( $fh == true ) {
        echo "file handle valid<br>";
}
else {
        echo "file handle invalid<br>";
}
$theData = fread($fh, filesize($myFile)) || die("Couldn't read file");
echo $theData;
fclose($fh)|| die("Couldn't close file");
?> 
```

当 test.txt 丢失时，我正确地得到了 die 无法打开文件当 test.txt 在那里时，我得到了

**警告：fread()：提供的参数不是有效的流资源**

我已将 test.txt 设置为 777 以确保

我也写了这个只是为了仔细检查，效果很好

```
<?php
$data = file_get_contents('test.txt');
echo $data;
?> 
```

希望有人可以为我阐明这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:16:34.157

您被PHP 中的[运算符优先级所困扰。](http://www.php.net/manual/en/language.operators.precedence.php)`||`具有比 更高的优先级`=`，因此您实际上是将逻辑 OR 的结果分配给`$fh`. 切换到

```
$fh = fopen($myFile, 'r') or die("Couln't open file");
                          ^^--- lower precedence logical or 
```

会解决问题。

使用`or`，将 的返回值`fopen()`分配给`$fh`，然后`or die()`评估 ——如果 fopen() 返回文件句柄，则 or 将失败并且代码继续。如果 fopen 失败，则返回布尔值 false 并且 or die 开始。

使用`||`时，fopen 的值与 die 调用进行逻辑或运算，并且该或 (false) 的结果将分配给 $fh。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:10:50.680

```
$fh = fopen($myFile, 'r') || die("Couln't open file"); 
```

您正在为 分配一个布尔表达式`$fh`，在此过程中丢失了实际的文件句柄。尝试将上面的行更改为

```
($fh = fopen($myFile, 'r')) || die("Couln't open file"); 
```

# java - 标签库支持命名空间：http://java.sun.com/jsf/composite/mycomponents，但没有为名称定义标签：foo

> ID：10898906
> 
> 赞同：3
> 
> 时间：2012-06-05T14:08:47.573
> 
> 标签：java, jsf, jsf-2, composite-component, nested

我有一个名为的复合组件`<my:foo>`，我正在构建另一个名为`<my:bar>`. 但是当我尝试在 of 内部使用时`<my:foo>`，会引发以下异常：`<cc:implementation>``<my:bar>`

> `<my:foo>`标签库支持命名空间：http: [//java.sun.com/jsf/composite/mycomponents](http://java.sun.com/jsf/composite/mycomponents)，但没有为名称定义标签：foo

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:05:02.677

这是由 Mojarra 2.1.8 中引入的错误引起的，该错误在 2.1.9 中继续，并在 2.1.10 中修复。这个错误导致复合组件自己的 XML 命名空间不能在根 XML 元素中声明，例如 /// etc `<ui:component>`，如下所示：`<ui:composition>``<html>`

```
<ui:component 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:cc="http://java.sun.com/jsf/composite"
    xmlns:my="http://java.sun.com/jsf/composite/mycomponents"
>
    <cc:interface>
        ...
    </cc:interface>
    <cc:implementation>
        <my:foo />
    </cc:implementation>
</ui:component> 
```

当您尝试嵌套`<my:foo>`在`<cc:implementation>`.

> `<my:foo>`标签库支持命名空间：http: [//java.sun.com/jsf/composite/mycomponents](http://java.sun.com/jsf/composite/mycomponents)，但没有为名称定义标签：foo

当前的解决方法，除了降级到 2.1.7 并等待 2.1.10 发布之外，是将 XML 命名空间声明移动到`<cc:implementation>`.

```
<ui:component 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:cc="http://java.sun.com/jsf/composite"
>
    <cc:interface>
        ...
    </cc:interface>
    <cc:implementation xmlns:my="http://java.sun.com/jsf/composite/mycomponents">
        <my:foo />
    </cc:implementation>
</ui:component> 
```

### 也可以看看：

*   [莫哈拉问题 2392](http://java.net/jira/browse/JAVASERVERFACES-2392)
*   [莫哈拉问题 2437](http://java.net/jira/browse/JAVASERVERFACES-2437)

# android - 索尼智能手表 - 收到事件时调用智能手表上的应用程序

> ID：10898910
> 
> 赞同：3
> 
> 时间：2012-06-05T14:08:52.400
> 
> 标签：android, sony-smartwatch

我想编写一个应用程序来监控传入的短信，如果短信内容包含预定义的文本（例如“回家”），就会在手表上通知我。

我知道我可以使用通知 API 来添加事件。它会振动并在手表上显示一个小应用程序图标。如果我想使用控制API在手表收到短信时让LED闪烁并在手表上显示整个文本和图像，我该怎么办？

它与“呼叫处理”插件非常相似。索尼能否开源“来电处理”供参考？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:54:18.277

我认为你有两个选择。正如您所说，1）实现一个同时使用通知 API 和控制 API 的扩展。或者 2) 只是实现一个控制扩展。

对于 1)，您可以添加一个自定义操作，使用下面的 START_REQUEST 意图启动您的控件扩展。请参阅 SampleNotificationExtension 代码中的 doAction1 方法。这意味着将在手表上显示标准通知，然后如果用户单击自定义操作按钮，您将能够向用户呈现自定义视图。

对于 2)，将您的功能完全实现为控制扩展，并在您获得过滤器找到的 SMS 时请求启动它。缺点是您需要自己呈现 SMS 文本，在情况 1) 中由框架为您完成。

START_REQUEST-intent 示例：

```
Intent intent = new Intent(Control.Intents.CONTROL_START_REQUEST_INTENT);
intent.putExtra(Control.Intents.EXTRA_AEA_PACKAGE_NAME, "your.package.name");
intent.setPackage(hostAppPackageName);
sendBroadcast(intent, Registration.HOSTAPP_PERMISSION); 
```

# java - GSON：如何将字段移动到父对象

> ID：10898914
> 
> 赞同：8
> 
> 时间：2012-06-05T14:09:08.873
> 
> 标签：java, json, gson

我正在使用[Google GSON](http://code.google.com/p/google-gson/)将我的 Java 对象转换为 JSON。

目前我有以下结构：

```
"Step": {
  "start_name": "Start",
  "end_name": "End",
  "data": {
    "duration": {
      "value": 292,
      "text": "4 min."
    },
    "distance": {
       "value": 1009.0,
       "text": "1 km"
    },
    "location": {
       "lat": 59.0000,
       "lng": 9.0000,
       "alt": 0.0
    }
  }
} 
```

当前，`Duration`对象位于对象内部`Data`。我想跳过`Data`对象并将对象移动`Duration`到`Step`对象，如下所示：

```
"Step": {
  "start_name": "Start",
  "end_name": "End",
  "duration": {
    "value": 292,
    "text": "4 min."
  },
  "distance": {
     "value": 1009.0,
     "text": "1 km"
  },
  "location": {
     "lat": 59.0000,
     "lng": 9.0000,
     "alt": 0.0
  }
} 
```

我怎样才能使用 GSON 做到这一点？

编辑：我尝试使用 TypeAdapter 来修改 Step.class，但在 write-method 中，我无法将我的持续时间对象添加到 JsonWriter。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T15:12:35.460

您可以通过编写[，](http://sites.google.com/site/gson/gson-user-guide#TOC-Custom-Serialization-and-Deserialization)然后为.`Step``Duration``Data`

```
// registering your custom serializer:
GsonBuilder builder = new GsonBuilder ();
builder.registerTypeAdapter (Step.class, new StepSerializer ());
Gson gson = builder.create ();
// now use 'gson' to do all the work 
```

下面的自定义序列化程序的代码，我正在写下我的头顶。它错过了异常处理，并且可能无法编译，并且会减慢诸如`Gson`重复创建实例之类的事情。但它代表了您想要做*的事情：*

```
class StepSerializer implements JsonSerializer<Step>
{
  public JsonElement serialize (Step src,
                                Type typeOfSrc,
                                JsonSerializationContext context)
    {
      Gson gson = new Gson ();
      /* Whenever Step is serialized,
      serialize the contained Data correctly.  */
      JsonObject step = new JsonObject ();
      step.add ("start_name", gson.toJsonTree (src.start_name);
      step.add ("end_name",   gson.toJsonTree (src.end_name);

      /* Notice how I'm digging 2 levels deep into 'data.' but adding
      JSON elements 1 level deep into 'step' itself.  */
      step.add ("duration",   gson.toJsonTree (src.data.duration);
      step.add ("distance",   gson.toJsonTree (src.data.distance);
      step.add ("location",   gson.toJsonTree (src.data.location);

      return step;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-24T15:33:24.350

在这种情况下，我注册`TypeAdapter`了嵌套`data`字段。在适配器`data`的字段中添加到父对象。无需为封闭类创建适配器。

```
public class Step {
    private String startName;
    private endName;
    @JsonAdapter(JsonFlatMapAdapter.class)
    private Map<String, Object> data;
    ...
}

public class JsonFlatMapAdapter extends TypeAdapter<Map<String, Object>> {

    @Override
    public void write(JsonWriter out, Map<String, Object> value) throws IOException {
        out.nullValue();
        Gson gson = new Gson();
        value.forEach((k,v) -> {
            try {
                out.name(k).jsonValue(gson.toJson(v));
            } catch (IOException e) {
            }
        });
    }

    @Override
    public Map<String, Object> read(JsonReader in) throws IOException {
        return null;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:34:30.993

我认为在 gson 中没有漂亮的方法可以做到这一点。也许从初始 json 中获取 java 对象（映射），删除数据，放入持续时间并序列化为 json：

```
Map initial = gson.fromJson(initialJson);

// Replace data with duration in this map
Map converted = ...

String convertedJson = gson.toJson(converted); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-07T19:43:45.427

遇到同样的问题。@ArjunShunkar 的回答为我指明了正确的方向。我修复了它编写自定义序列化程序，但略有不同：

```
public class StepSerializer implements JsonSerializer<Step> {
    @Override
    public JsonElement serialize(Step src, Type typeOfSrc, JsonSerializationContext context) {
        JsonObject step = new JsonObject();
        step.add ("start_name", context.serialize(src.start_name);
        step.add ("end_name",   context.serialize(src.end_name);

        JsonObject data = context.serialize(src.data).getAsJsonObject();
        data.entrySet().forEach(entry -> {
            step.add(entry.getKey(), entry.getValue());
        });

        return step;
    }
} 
```

这可以进一步改进，“start_name”和“end_name”道具仍然是硬编码的。可以通过遍历根对象的 entrySet 并在其中排除“数据”来删除，只留下需要展开硬编码的元素。

# c# - 在库 SharePoint 2010 中添加文档的用户权限

> ID：10898917
> 
> 赞同：0
> 
> 时间：2012-06-05T14:09:27.843
> 
> 标签：c#, sharepoint-2010, rights, spgroup

我想检查，如果用户可以在文档库中添加文档，那么自定义操作是否已启用。我用 [了这篇文章](http://www.necronet.org/archive/2011/07/25/enable-or-disable-ribbon-custom-action-based-on-user-permissions.aspx)。

然后我遇到了以下问题：我不知道如何检查添加这个库的用户权限。

我尝试使用当前 web 的 SPGroup，但我需要知道组的名称，并且这些名称不是恒定的。我可以获取当前用户的角色，但是如何获取有关这组角色包含 SPRoleType.Contributor 类型角色的信息？

我将不胜感激任何尝试提供帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:03:36.943

是的，我找到了解决方案！

```
bool t = list.Permissions.DoesUserHavePermissions(SPRights.AddListItems) 
```

`true`如果用户可以将文档添加到库中，则返回！

# python - 如何设置 matplotlib 图形的边距？

> ID：10898919
> 
> 赞同：18
> 
> 时间：2012-06-05T14:09:37.953
> 
> 标签：python, matplotlib

我正在生成一个具有两个子图的屏幕图形：一个是图像，另一个是图形。数字周围的边距非常大。

如何调整数字周围的边距？

* * *

我搜索的大多数问题都涉及保存图像（bbox 似乎很完美），以及使用轴而不是子图进行绝对定位。

这是我用来生成图形的代码：

```
def __init__(self, parent):
    wx.Panel.__init__(self, parent)
    ...

    self.figure, (self.picture, self.intensity) = \
        plt.subplots(nrows=2, figsize=(12, 5))
    self.figure.set_dpi(80)
    #self.figure.subplots_adjust(left=0.1, right=0.9, top=0.9, bottom=0.1)
    #self.picture.imshow(np.random.uniform()) #size=(5, 50)))
    self.intensity.plot(np.random.random()) #size=641))

    self.intensity.autoscale(axis='x', tight=True) 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-07T07:03:37.273

看看[`plt.tight_layout()`](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.tight_layout)或[`plt.subplots_adjust()`](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.subplots_adjust)或`fig.savefig(bbox_inches='tight')`。

`subplots_adjust`您可以调整大多数参数，同时`tight_layout()`或多或少是`bbox_inches='tight'`半自动的。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-18T14:23:09.923

您还可以使用 plt.set()，其属性在调整绘图菜单中给出，例如 set(top=0.82) 等。

# visual-studio - 如何在 Visual Studio 2012 中为 Windows 8 Metro 应用程序获取 Intellisense

> ID：10898920
> 
> 赞同：1
> 
> 时间：2012-06-05T14:09:40.600
> 
> 标签：visual-studio, xaml, windows-8, microsoft-metro

在 Visual Studio 2012 中，Intellisense 不适用于 XAML 文件。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:39:28.923

这应该可以正常工作。它在 Release Preview 中对我来说很好用。您可以使用 Ctrl+Space 强制它弹出。如果这对你不起作用，你的环境就被破坏了。尝试修复或重新安装。

# php - 使用绝对路径显示图像

> ID：10898932
> 
> 赞同：1
> 
> 时间：2012-06-05T14:10:04.497
> 
> 标签：php, html

我在上传时使用uploadify将img上传到服务器，我保存了数据库的绝对路径，如下所示：

`/var/www/html/workbench/photogallery/uploads/logo2.jpg`

现在我想在浏览器中显示相同的以下方法不起作用

```
<div id="photos">
    <h3>Photo title</h3>
    <P class="like"><a href="#">Like</a> </P>
    <p class="date">date </p>
    <p class="pclear" />
    <div id="image">
      <img src="<?php echo $result_set['path']; ?>" />
    </div>
    <p class="about">about image goes here</p>
</div> 
```

上面的代码不起作用。当我手动编辑路径到 uploads/logo2.jpg 时，它工作得很好

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T14:13:28.037

您需要使用 url，而不是路径。

这：

```
/var/www/html/workbench/photogallery/uploads/logo2.jpg 
```

是物理路径，即在该服务器上找到图像的地址。您需要使用可供访问者使用的网址。我猜您有一个映射到该服务器的名称（例如 localhost 或 www.example.com）。

从结构上我猜你的网址会是这样的

```
http://www.example.com/photogallery/uploads/logo2.jpg 
```

其中**www.example.com**是您用于访问该应用程序的基本 URL

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T14:14:30.670

试试这个：

```
<img src="/photogallery/uploads/<?php echo basename($result_set['path']) ?>" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-20T09:12:24.563

试试这个，它对我有用，并保持图像的位置对浏览器隐藏。

```
<img src='fake.php' style='max-width:90px;'/> 
```

创建一个名为 fake.php 的文件，如下所示

```
<?php
$thePic = "/var/www/html/workbench/photogallery/uploads/logo2.jpg";
$image = imagecreatefromjpeg($thePic); 
// Output image and free up the memory 
header("Content-type: image/jpeg"); 
imagejpeg($image); 
imagedestroy($image); 
?> 
```

您可以调整 fake.php 文件中的代码以从发布的数据或数据库等中检索 $thePic 的位置。

# wpf - 带有文本锚定在按钮底部的 WPF 图像按钮

> ID：10898934
> 
> 赞同：2
> 
> 时间：2012-06-05T14:10:14.983
> 
> 标签：wpf

1.  无论图像纵横比如何，我都希望将文本锚定到按钮的最底部。
2.  我希望图像可以拉伸以适合按钮中的剩余空间。

此 xaml 确实让 Image 填充了剩余空间，但文本位于 Image 的正下方，而不是按钮的最底部。也许我需要使用 DockPanel 以外的东西，但我不确定该使用什么。如果有另一种可行的方法，则文本不需要位于标签中。

谢谢

```
<Button Height="150" Width="150">
    <DockPanel LastChildFill="True">
        <Label HorizontalContentAlignment="Center" DockPanel.Dock="Bottom">foo</Label>
        <Image Source="bar.png" />
    </DockPanel>
</Button> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:32:56.980

Button 元素不会自动允许其内容填充整个 Button 区域。为此，您必须将 Horizo​​ntalContentAlignment 和 VerticalContentAlignment 属性都设置为“Stretch”。

```
<Button Height="150" Width="150"
        HorizontalContentAlignment="Stretch"
        VerticalContentAlignment="Stretch">
    <DockPanel LastChildFill="True">
        <Label HorizontalContentAlignment="Center" DockPanel.Dock="Bottom">foo</Label>
        <Image Source="bar.png" />
    </DockPanel>
</Button> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T15:26:41.053

You most likely need to tell the `DockPanel` to expand to its `Height` to the parent container:

```
<Button x:Name="button" Height="150" Width="150">
  <DockPanel LastChildFill="True" Height="{Binding Height, ElementName=button}">
    <Image DockPanel.Dock="Top" Source="bar.png" />
    <Label DockPanel.Dock="Bottom" HorizontalContentAlignment="Center" 
            VerticalAlignment="Bottom">foo</Label>
  </DockPanel>
</Button> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T14:49:55.577

刚刚做了一个快速的实验

也许这有帮助？

```
<Grid>
   <Grid.RowDefinitions>
        <RowDefinition Height="64*"  />
         <RowDefinition Height="30"  />
   </Grid.RowDefinitions>
         <Image Source="bar.png" Stretch="UniformToFill"  Grid.Row="0" />
         <Label DockPanel.Dock="Bottom" Content="Foo" HorizontalAlignment="Center" Grid.Row="1" x:Name="Label1" VerticalAlignment="Bottom" ></Label>
</Grid> 
```

如果尝试调整行高。

# iphone - 如何检查 iPhone 的语言设置？

> ID：10898935
> 
> 赞同：2
> 
> 时间：2012-06-05T14:10:27.843
> 
> 标签：iphone, ios, cocos2d-iphone

我正在本地化我的应用程序，它是 cocos2d，因此没有 nib 文件，我正在本地化一个标签，这很好，但想检查设备语言以设置每种语言的确切字体和字体大小。简而言之，我想这样做：

```
If (device.language == en) {
Set font to "fontname" and "fontsize" to x;
} else {
set it to "another font name" and font size to y;
} 
```

如何检查设备语言/设置是否设置为准确的语言？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T14:16:22.233

您可以使用：

```
[[NSLocale preferredLanguages] objectAtIndex:0] 
```

这将返回一个语言标签，如“en”或“ja”。

# linq - Linq 搜索字符串单词分隔字符串

> ID：10898936
> 
> 赞同：0
> 
> 时间：2012-06-05T14:10:32.877
> 
> 标签：linq, search

我得到了一个字符串列表。我想在里面进行搜索并返回一个新列表。搜索值是一个字符串（句子）。每个单词都用空格分隔。

因此，我研究了一种方法来搜索包含句子中每个单词的每个字符串。

样本 ：

```
list = {"abcdef", "abc", "ab", "cd ab"}

search "ab" => return list with "abcdef", "abc", "ab", "cd ab"
search "abc" => return list with "abcdef", "abc"
search "ab cd" => return list with "abcdef","cd ab" 
```

它很简单，但我不知道如何在一个命令中使用 Linq。就像是

```
if l.contains(list) 
```

where contains 检查列表的每个元素。

这可能很简单，我只是问如何。或者也许是我没看过的另一个帖子的链接。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:12:57.103

```
if (list.Any(w => w.Contains(something)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:43:18.467

棘手的是您最后一个“ab cd”案例。

```
var list = new List<string> {"abcdef", "abc", "ab", "cd ab"};
var result = list.Where (w => "ab cd".Split().All (s => w.Contains(s))); 
```

[单击此处查看证明它涵盖了您概述的所有案例的证据。](http://ideone.com/3xjdx)

# php - 使用 php 和 html 将图像放在另一个图像之上

> ID：10898937
> 
> 赞同：-4
> 
> 时间：2012-06-05T14:10:40.027
> 
> 标签：php, html, css, magento

我有一个名为免费送货的自定义属性的 magento 商店现在这会在产品本身下方呈现一个免费送货图标

但我想通过在产品本身顶部放置一个新按钮来使其更具吸引力。

这是magento页面的php代码：

如何呈现页面的示例： [http ://www.theprinterdepo.com/lexmark-optra-t640-printer-20g0100](http://www.theprinterdepo.com/lexmark-optra-t640-printer-20g0100)

我需要修改gallery.phtml 中的代码，将图标放在产品的顶部，右上角。我会将图像修改为透明的。

这是gallery.phtml 文件：

```
<?php $_width=$this->getImageWidth() ?>
<div class="product-image-popup" style="width:<?php echo $_width; ?>px;">
    <p class="a-right"><a href="#" onclick="window.close(); return false;"><?php echo $this->__('Close Window') ?></a></p>
    <?php if($this->getPreviusImageUrl() || $this->getNextImageUrl()): ?>
        <div class="nav">
          <?php if($_prevUrl = $this->getPreviusImageUrl()): ?>
              <a href="<?php echo $_prevUrl ?>">&laquo; <?php echo $this->__('Prev') ?></a>
          <?php endif; ?>
          <?php if($_nextUrl = $this->getNextImageUrl()): ?>
              <a href="<?php echo $_nextUrl ?>"><?php echo $this->__('Next') ?> &raquo;</a>
          <?php endif; ?>
        </div>
    <?php endif; ?>
    <?php if($_imageTitle = $this->htmlEscape($this->getCurrentImage()->getLabel())): ?>
        <h1 class="image-label"><?php echo $_imageTitle ?></h1>
    <?php endif; ?>
    <img src="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'image', $this->getImageFile()); ?>"<?php if($_width): ?> width="<?php echo $_width ?>"<?php endif; ?> alt="<?php echo $this->htmlEscape($this->getCurrentImage()->getLabel()) ?>" title="<?php echo $this->htmlEscape($this->getCurrentImage()->getLabel()) ?>" id="product-gallery-image" class="image" />
    <?php if($this->getPreviusImageUrl() || $this->getNextImageUrl()): ?>
        <div class="nav">
          <?php if($_prevUrl = $this->getPreviusImageUrl()): ?>
              <a href="<?php echo $_prevUrl ?>">&laquo; <?php echo $this->__('Prev') ?></a>
          <?php endif; ?>
          <?php if($_nextUrl = $this->getNextImageUrl()): ?>
              <a href="<?php echo $_nextUrl ?>"><?php echo $this->__('Next') ?> &raquo;</a>
          <?php endif; ?>
        </div>
    <?php endif; ?>
    <p class="a-right"><a href="#" onclick="window.close(); return false;"><?php echo $this->__('Close Window') ?></a></p>
</div>
<script type="text/javascript">
//<![CDATA[
Event.observe(window, 'load', function(){
    var demensions = $('product-gallery-image').getDimensions();
    window.resizeTo(demensions.width+90, demensions.height+210);
});
//]]>
</script> 
```

这是 view.phtml

```
<?php $Deal = $_product->getResource()->getAttribute('deal')->getFrontend()->getValue($_product);?>
                                                <?php $onSale = $_product->getResource()->getAttribute('on_sale')->getFrontend()->getValue($_product);?>
                                                <?php $hotItem = $_product->getResource()->getAttribute('hot_item')->getFrontend()->getValue($_product);?>
                                                <?php $freeShip = $_product->getResource()->getAttribute('free_shipping')->getFrontend()->getValue($_product);?>
                                                <?php if($Deal == 'Yes'){ ?>
                                                    <img src="<?php echo $this->getSkinUrl('images/depot/icon-deal.gif') ?>" >
                                                <?php } ?>
                                                <?php if($onSale == 'Yes'){ ?>
                                                    <img src="<?php echo $this->getSkinUrl('images/depot/icon-sale.gif') ?>" >
                                                <?php } ?>
                                                <?php if($hotItem == 'Yes'){ ?>
                                                    <img src="<?php echo $this->getSkinUrl('images/depot/icon-hot.gif') ?>" >
                                                <?php } ?>
                                                <?php if($freeShip == 'Yes'){ ?>
                                                    <img src="<?php echo $this->getSkinUrl('images/depot/icon-freeship.gif') ?>" >
                                                <?php }?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:55:46.977

对 Magento 不太了解，但您所谈论的将需要 CSS 编码而不是真正的 PHP。理想情况下，您需要将两个图像输出到同一个容器 DIV。

然后将图像设置为 `position: absolute`，然后使用`zindex`将它们堆叠在一起。请注意，容器 div 要么需要，要么需要`position: absoloute`图像`position: relative`的定位才能正常工作。

有关更多信息，请参见此处 -[我们如何使用 css 样式重叠两个图像？](https://stackoverflow.com/questions/1782601/how-can-we-overlap-two-images-using-css-style)

# c# - 使用linq指定子查询的子查询的正确方法

> ID：10898942
> 
> 赞同：0
> 
> 时间：2012-06-05T14:10:55.250
> 
> 标签：c#, linq, entity-framework

```
results = (from r in results 
where r.Buildings.Any(x=>x.StructuralElements.Any(s=>s.VALUE == Model.Bedrooms.ToString() && s.CATEGORY=="RM"))
select r); 
```

我想我在这里缺少连接。但也许它们是隐含的？执行运行时间太长，我无法监视来评估生成的查询表达式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:43:04.210

此查询中最大的问题是：

```
--@p1 = Models.Bedrooms.ToString()
--@p2 = "RM"
SELECT * FROM Results r WHERE EXISTS
    (SELECT x.* FROM Results tr JOIN Buildings x ON tr.SomeID=x.SomeID WHERE tr.ID = r.ID AND EXISTS
        (SELECT s.* FROM StructuralElements s JOIN Buildings tx ON tx.OtherID = s.OtherID WHERE tx.ID=x.ID AND s.VALUE = @p1 AND s.Category = @p2)) 
```

你明白为什么这会很糟糕吗？对于每个结果，您都在运行一个子查询（它本身正在运行一个子查询）。由于这些嵌套的子查询，当您开始在根级别（结果和建筑物）添加内容时，时间/处理将呈指数增长。最好的办法是`r`在完成后使用连接并获得不同的值。SQL 会是这样的：

```
SELECT DISTINCT 
    r.* 
FROM
    Results r
    INNER JOIN Buildings x ON x.SomeID = r.SomeID
    INNER JOIN StructuralElements s ON s.OtherID = r.OtherID
WHERE
    s.VALUE = @p1 AND s.CATEGORY = @p2 
```

这将起作用的原因是，当您加入时，如果有多个要加入回来，它将复制原始行。下图显示

```
IDs
R     X     S
1     -     -
Join X
1     1     -
1     2     -
1     3     -
Join S
1     1     1
1     1     2
1     2     5
1     2     6 
```

假设`S=2`并`S=6`满足您的条件，那么它将返回（`R,X,S`形式）行`1,1,2`和`1,2,6`. 在这种情况下，仅获得 distinct`r`只会返回`R=1`，这就是您要完成的任务。使用 EF，关系已经存在，因此您不需要做任何额外的事情，只需引用您尝试过滤的列：

```
results =  (from r in results
            from x in r.Buildings
            from s in x.StructuralElements
            where s.VALUE == Model.Bedrooms.ToString() && s.CATEGORY=="RM"
            select r).Distinct(); 
```

这是在起作用的 SelectMany 运算符（它接受一个集合并将子集合扁平化为一个集合）。

# jquery - 管理具有多个元素的队列

> ID：10898946
> 
> 赞同：0
> 
> 时间：2012-06-05T14:11:32.693
> 
> 标签：jquery, queue

我需要一个事件来启动然后停止/清除多个元素的动画/动作队列。我根据这个[例子创建了这段](http://tobymackenzie.wordpress.com/2011/08/02/animation-queue-management-for-jquery/)[代码](http://jsfiddle.net/mzdoherty/bVuVs/1/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:39:03.470

这应该给你一个很好的起点：

**CSS**

```
div {
    width:40px;
    height:40px;
}

#one {
    background:green;
}

#two {
    background: red;
} 
```

**​HTML**

 **```
<button id="startQueue">Go</button>
<button id="clearQueue">Clear</button>

<div id="one" class="queueItem"></div>
<div id="two" class="queueItem"></div>​ 
```

**JS**

```
// Global Queue Array //
var queue = [];

// Start Queue //
$('#startQueue').bind('click', function(e){
    // Go through Each Element and Fade Out //
    $('.queueItem').each(function(i, $el){
        // Don't Delay First Element//
        if (i==0) {
            queue.push($(this).fadeOut(5000));
        } else {
            queue.push($(this).delay(5000*i).fadeOut(5000));
        }        
    });
});

// Stop / Clear Queue //
$('#clearQueue').bind('click', function(e){
    $.each(queue, function(i, $el){
        // Stop Animation and Reset Elements //
        $el.stop(true, true).css({
            display: 'block',
            opacity: '1'
        });

        // Clear Queue Array //
        queue = [];
    });
}); 
```

**[在这里演示](http://jsfiddle.net/D7jKJ/)**

祝你好运！**

# c - 为什么变量 time1 变为零？

> ID：10898949
> 
> 赞同：0
> 
> 时间：2012-06-05T14:11:35.170
> 
> 标签：c

当我遇到一些问题时，为什么`time1`变量变为零。在计算地板之后。

```
#include <stdio.h>
#include <stdlib.h>
#include <windows.h>
int main()
{
   int curfl = 0, destfl, floor;
   int time1, high, speed;
   high = 3;
   speed = 5;
   while(1)
   {
       printf("Currently the elevator is at floor number = %d\n", curfl);
       printf("Enter the floor number between 0-25 : ");
       scanf("%d", &destfl);
       if(destfl > curfl)

       {
               floor = destfl - curfl;
                /*****************************/
               time1 = (floor * (high / speed));  //variable become zero here
               /*****************************/
               printf("Elevator will take %d second to reach %d (st, nd, rd) floor \n", time1, destfl);
               while(curfl != destfl)
               {
               Sleep(1000 * 3 / 5);
               curfl++;
               printf("You are at floor number %d \n", curfl);
           }
           printf("Door opening \n");
           Sleep(10000);
           printf("Door Closed\n");
       }
       else if(destfl > curfl)
       {
           floor = curfl - destfl;
           time1 = (floor * (3 / 5));
           printf("Elevator will take %d second to reach %d (st, nd, rd) floor \n", time1, destfl);
           while(curfl != destfl)
           {
               Sleep(1000 * 3 / 5);
               curfl--;
               printf("You are at floor number %d \n", curfl);
           }
           printf("Door opening \n");
           Sleep(10000);
           printf("Door Closed\n");
       }
       else{
           printf("You are the same floor. Please getout from the elevator \n");
       }
}
   // printf("Hello world!\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:13:21.027

你正在做整数计算。切换到处理分数的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:14:47.267

您正在遇到整数除法。当您对整数进行算术运算时，结果也将是整数。所以在整数域中类似于 1 / 3 = 0。因此，当您这样做时`(high / speed)`，临时结果将是一个整数，如果答案是某个小数 < 1，则结果将被简单地截断为 0。

要解决此问题，您应该将代码更改为使用`float`or`double`代替`int`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:23:16.490

计算 time1 如下：

```
int curfl = 0, destfl, floor;
int high;
float speed, time1;
................................
time1 = (floor * (high / speed)); 
```

它看起来像是用于嵌入式设备。所以不知道它是如何支持浮点运算的。如果它不支持，则使用除法算法，声明如下类型：

```
struct myfloat{
   int precision;
   int exponent;
} 
```

然后编写一个除法函数，如：

```
struct myfloat * divide(int a, int b) /* gives result for a/b */ 
```

# xslt - 如何在 XSL 中用空格替换逗号

> ID：10898952
> 
> 赞同：1
> 
> 时间：2012-06-05T14:11:51.393
> 
> 标签：xslt

我需要在我的 XML 输出中用空格替换所有其他逗号。现在，我的纬度和经度如下所示：

```
-0.52437106918239,0.391509433962264,-0.533805031446541,0.430817610062893,0 
-0.547955974842767,0.427672955974843, 
```

我需要 XML 输出中的坐标如下所示：

```
-0.52437106918239 0.391509433962264, -0.533805031446541 0.430817610062893,0   
-0.547955974842767 0.427672955974843 
```

我如何使用 XSLT 来做到这一点？这是我的 xsl：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"    
xmlns:kml="http://www.opengis.net/kml/2.2">
<xsl:output method="text"/>

<xsl:template match="/">
<xsl:apply-templates select="kml:kml/kml:Document/kml:Placemark/kml:Polygon  
/kml:outerBoundaryIs/kml:LinearRing"/>
</xsl:template>

  <xsl:template match="kml:LinearRing">
"POLYGON((<xsl:value-of select="kml:coordinates"/>))"
 </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:27:08.057

在 XSLT 2.0 中，这将是微不足道的。您可以使用[replace()](http://www.w3.org/TR/xquery-operators/#func-replace)。

在 XSLT 1.0 中，您可以像这样使用模板。调用列表中需要每隔一个逗号替换的 convert-space 模板。

```
<xsl:template name="convert-space">
  <xsl:param name="text"/>
  <xsl:choose>
    <xsl:when test="contains($text,',')">
      <xsl:value-of select="substring-before($text,',')"/>
      <xsl:value-of select="' '"/>
      <xsl:call-template name="convert-comma">
        <xsl:with-param name="text" select="substring-after($text,',')"/>
      </xsl:call-template>
    </xsl:when>
    <xsl:otherwise>
      <xsl:value-of select="$text"/>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template>

<xsl:template name="convert-comma">
  <xsl:param name="text"/>
  <xsl:choose>
    <xsl:when test="contains($text,',')">
      <xsl:value-of select="substring-before($text,',')"/>
      <xsl:value-of select="','"/>
      <xsl:call-template name="convert-space">
        <xsl:with-param name="text" select="substring-after($text,',')"/>
      </xsl:call-template>
    </xsl:when>
    <xsl:otherwise>
      <xsl:value-of select="$text"/>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

# c# - Chrome显示逗号而不是小数点

> ID：10898957
> 
> 赞同：0
> 
> 时间：2012-06-05T14:12:08.703
> 
> 标签：c#, javascript, asp.net, html, google-chrome

我有一个 Web 应用程序（公司内部），它显示了一些带有十进制数字的表单字段。我已经开始用这些数据做一些 Javascript。然后我注意到 Chrome 向我显示了用逗号而不是小数点分隔的十进制数字。但例如 Internet Explorer 显示良好。当我查看我的 C# 代码时，我可以看到，这些数字是真正的小数，它们用小数点分隔。所以似乎代码很好。它必须是 HTML 渲染（语言设置）或 Chrome（我没有检查除 Chrome 和 IE 之外的其他浏览器）中的某些内容。

我以前从未见过这个，所以我应该在哪里搜索错误？（我不能给你看代码。我唯一能告诉你的是 IE 开发控制台显示 93.54 而 Chrome 开发控制台显示 93,54。两者都是同一个文本框的值）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:39:48.507

默认情况下，Asp.NET 通过来自浏览器的文化信息呈现 html。通过设置线程文化或覆盖页面方法，您可以使用静态文化信息进行渲染。

```
protected override void InitializeCulture()
{
    this.Culture = "en-US";
    this.UICulture = "en-US";
    base.InitializeCulture();
} 
```

# jquery - jquery mobile - 滑动停止功能

> ID：10898958
> 
> 赞同：2
> 
> 时间：2012-06-05T14:12:08.803
> 
> 标签：jquery, jquery-mobile, slide

当我停止滑动 Jquery Mobile Slide 时，我会运行一个函数。

我有这张幻灯片：

```
<div data-role="fieldcontain">
    <fieldset data-role="controlgroup" data-mini="true">
    <label for="slider2">
       Test
    </label>
             <input type="range" name="slider" id="testslider" value="0" min="-50" max="50" data-highlight="true" />
    </fieldset>
</div> 
```

这个Javascript：

```
$(function() {
    $( "#slider2" ).bind( "stop", function(event, ui) {
        alert("Stop");
    });      
}); 
```

但它不起作用！

释放鼠标（手指）时如何运行函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:52:27.753

正确的方法如下：

```
$("#slider2").on(
   'slidestop',
   function(event) {
      // Code goes here
   }
); 
```

# iis - 重定向到规范 URL 不起作用

> ID：10898964
> 
> 赞同：1
> 
> 时间：2012-06-05T14:12:40.240
> 
> 标签：iis, redirect, url-rewriting, web-config

我正在尝试为我的网站 (macton.com) 设置规范 URL，以便在开头添加 www。该站点使用 IIS 托管，我安装了 URL 重写器扩展。

这是我放在 web.config 文件中的代码。但是，它似乎什么也没做，因为它仍然是 macton.com。

```
<system.webServer>
    <rewrite>
        <rules>
            <rule name="Rewrite to www" stopProcessing="true">
                <match url=".*" />
                <conditions>
                    <add input="{HTTP_HOST}" pattern="^macton\.com$" />
                </conditions>

                <action type="Redirect" redirectType="Permanent" url="http://www.macton.com/{R:1}" />
            </rule>
        </rules>
    </rewrite>
</system.webServer> 
```

在此之后，我有一堆 <location> 带有重定向的标签可以正常工作。我尝试使用来自 macton.com → www.macton.com 的重定向，但这只会创建一个无限重定向循环（DUH！）

知道为什么这不起作用吗？我到处都说这是正确的代码！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:02:35.977

此链接可以提供帮助： [http ://www.awseibert.net/how-to/redirecting-canonical-names-in-iis-7](http://www.awseibert.net/how-to/redirecting-canonical-names-in-iis-7)

您是否也将 macton.com 添加到您网站的绑定中？

# oracle11g - 从 SQL Server 2 行“无法识别”转换为 Oracle sp

> ID：10898971
> 
> 赞同：0
> 
> 时间：2012-06-05T14:13:04.877
> 
> 标签：oracle11g

我正在使用 Oracle SQL Developer Scratch Editor 工具。有几个小错误，我不知道如何解决。

```
--SQLDEV:Following Line Not Recognized
WHILE @I <= @PAT_CNT

--SQLDEV:Following Line Not Recognized
BEGIN

SELECT PAT_NUMBER ,
       PATIENT_ID ,
       MRN ,
       LAST_NAME ,
       FIRST_NAME ,
       UNIT_CODE ,
       NURSING_UNIT ,
       SDT ,
       EDT ,
       SHIFT_CODE ,
       START_TIME ,
       END_TIME 

  INTO v_PAT_NUMBER,
       v_PATIENT_ID,
       v_MRN,
       v_LAST_NAME,
       v_FIRST_NAME,
       v_UNIT_CODE,
       v_NURSING_UNIT,
       v_SDT,
       v_EDT,
       v_SHIFT_CODE,
       v_START_TIME,
       v_END_TIME
  FROM tt_v_PATS 
 WHERE PKEY = v_I;

BEGIN
   v_L_CUR_DATE := TRUNC_DATE(v_P_START_DATE) ;
END;

--SQLDEV:Following Line Not Recognized
WHILE @L_CUR_DATE <= OPTC.TRUNC_DATE(@P_END_DATE)

--SQLDEV:Following Line Not Recognized
BEGIN 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:25:59.490

对我来说，你在这里试图做什么并不明显......

在 PL/SQL 中，变量在`DECLARE`匿名 PL/SQL 块的`IS/ AS`部分或命名的 PL/SQL 块（存储过程或存储函数）的部分中声明。在 PL/SQL 中，a`BEGIN`需要与 an 配对`END`——我在您的代码中看到一堆`BEGIN`没有关联的语句`END`。在 PL/SQL 中，您不使用`@`来引用变量。

像这样的东西在语法上是有效的，但是，它做你想做的事情并不明显。

```
DECLARE
  v_PAT_NUMBER     tt_v_PATS.PAT_NUMBER%type;
  v_PATIENT_ID     tt_v_PATS.PATIENT_ID%type;
  v_MRN            tt_v_PATS.MRN%type;
  v_LAST_NAME      tt_v_PATS.LAST_NAME%type;
  v_FIRST_NAME     tt_v_PATS.FIRST_NAME%type;
  v_UNIT_CODE      tt_v_PATS.UNIT_CODE%type;
  v_NURSING_UNIT   tt_v_PATS.NURSING_UNIT%type;
  v_SDT            tt_v_PATS.SDT%type;
  v_EDT            tt_v_PATS.EDT%type;
  v_SHIFT_CODE     tt_v_PATS.SHIFT_CODE%type;
  v_START_TIME     tt_v_PATS.START_TIME%type;
  v_END_TIME       tt_v_PATS.END_TIME%type;
  v_pat_cnt        integer := 100;
BEGIN                 
  FOR i IN 1 .. v_pat_cnt
  LOOP
    SELECT PAT_NUMBER ,   
           PATIENT_ID ,   
           MRN ,          
           LAST_NAME ,    
           FIRST_NAME ,   
           UNIT_CODE ,    
           NURSING_UNIT , 
           SDT ,          
           EDT ,          
           SHIFT_CODE ,   
           START_TIME ,   
           END_TIME                              
      INTO v_PAT_NUMBER,  
           v_PATIENT_ID,  
           v_MRN,         
           v_LAST_NAME,   
           v_FIRST_NAME,  
           v_UNIT_CODE,   
           v_NURSING_UNIT,
           v_SDT,         
           v_EDT,         
           v_SHIFT_CODE,  
           v_START_TIME,  
           v_END_TIME     
      FROM tt_v_PATS      
     WHERE PKEY = i;  
     <<do something with the local variables>>
  END LOOP;
END; 
```

当然，你也可以使用记录类型来简化你的代码

```
DECLARE
  v_PATS_REC       tt_v_PATS%rowype;
  v_pat_cnt        integer := 100;
BEGIN                 
  FOR i IN 1 .. v_pat_cnt
  LOOP
    SELECT *                             
      INTO v_PATS_REC   
      FROM tt_v_PATS      
     WHERE PKEY = i;  
     <<do something with the record>>
  END LOOP;
END; 
```

# facebook - 应用程序书签在左侧“应用程序”部分不可见

> ID：10898973
> 
> 赞同：2
> 
> 时间：2012-06-05T14:13:09.120
> 
> 标签：facebook, facebook-graph-api, bookmarks

我的启用了 Open Graph 的应用程序不会在 Facebook 主页的左侧（靠近“应用程序”部分）生成应用程序书签。

有问题的应用程序位于此处：

[http://apps.facebook.com/lrytaslt/](http://apps.facebook.com/lrytaslt/)

它是立陶宛语，但点击任何新闻链接都会要求您提供基本权限，一旦获得批准，将重定向到内部新闻页面。此时它应该作为书签添加到左侧。它不会发生。我什至看不到“更多”链接下的应用程序，但是该应用程序在“应用程序和游戏”链接下作为图标可见（无法“收藏”它以将其作为常规书签链接）。

这是预期的行为吗？Facebook 的新功能还是错误？有没有人遇到过类似的书签相关问题？

**编辑：**附上一个关于问题的小截图：

![应用书签问题](../Images/35b3e7d3de3998476efdac7828038d51.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:18:55.413

当我打开该应用程序时，它会自动重定向到其他地方，这可能就是没有书签的原因 -

根据文档，书签仅适用于 Canvas 应用程序 - 如果您需要书签，则不应重定向

用户持续使用您的画布应用几分钟后，书签会自动添加

# mysql - 应该如何存储新行和粗体/斜体字符？

> ID：10898974
> 
> 赞同：2
> 
> 时间：2012-06-05T14:13:14.880
> 
> 标签：mysql, html

我想在我的数据库中存储段落。这包括一些粗体和斜体字符。MySQL中是否有任何数据类型？或者，我应该将数据存储在 varchar 列中吗？

新行和粗体/斜体字符应该如何存储在 MySQL 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:18:10.140

您不能将 html 代码存储在 mysql 的 varchar/text 数据类型字段中，然后在不使用 htmlspecialchars() 的情况下直接回显它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:22:06.600

您可以根据需要使用以下数据类型之一。不要担心粗体或斜体。因为所有这些都是 html 中的字符格式。

```
TEXT        A string with a maximum length of 65535 characters.
BLOB        A string with a maximum length of 65535 characters.
MEDIUMTEXT  A string with a maximum length of 16777215 characters.
MEDIUMBLOB  A string with a maximum length of 16777215 characters.
LONGTEXT    A string with a maximum length of 4294967295 characters.
LONGBLOB    A string with a maximum length of 4294967295 characters. 
```

# java - JpcapWriter 导致应用程序崩溃

> ID：10898986
> 
> 赞同：0
> 
> 时间：2012-06-05T14:13:53.590
> 
> 标签：java, crash, jpcap

我正在开发一个相对简单的数据包捕获应用程序，并且正在使用 Jpcap 库。在我将保存功能添加到我的程序之前，一切都在工作。

**我的写功能**

```
public void write() {
    try {
        writer = JpcapWriter.openDumpFile(captor, fileName);
    } catch (IOException e) {e.printStackTrace();}
    for (Packet packet : this.packets) {
        writer.writePacket(packet);
    }
    writer.close();
} 
```

它正确地获取了捕获者和文件路径，成功地循环了所有数据包，但是当它尝试在代码块的末尾写入时，JVM 崩溃了。

我的问题是，为什么我的应用程序在尝试关闭 JpcapWriter 时会崩溃？

**更新**：我刚刚发现的奇怪的事情是它实际上是在写入文件。它只是在写入后崩溃。我在关闭后添加了一个打印语句，但它永远不会到达它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:17:41.643

我发现其他几个人和我有同样的问题。我不知道为什么，但删除关闭作家的电话解决了我的问题。该文件现在可以正确写入，并且没有问题。目前，我对它的工作感到满意，但我可能会在以后回到这个问题。

**更新：**事实证明，当调用停止捕获时文件关闭。当捕获线程关闭时，它会关闭捕获器，这反过来又会为我关闭编写器。本质上，我试图告诉它关闭编写器，因为编写器已经关闭，这导致 JVM 崩溃。

# c++ - 引用静态常量数据对象

> ID：10898987
> 
> 赞同：0
> 
> 时间：2012-06-05T14:14:04.137
> 
> 标签：c++

我有一组存储静态 const 数据成员的实用程序类。现在我需要在函数类中使用这些数据成员。我打算使用对静态 const 对象的引用（不想要指针），但不断收到下面的错误。您能否指出代码中的逻辑/技术错误？

```
#include <string>

class staticData
{
  public:
   static const int cs = 1;
   static const staticData data1;

  private:
   staticData(int id_): _id(id_)   //NOTE: Private constructer, static access only!!
   { }

   int _id;
};

const staticData staticData::data1(1001);

class testReference
{
  public:
    testReference(): _member(staticData::data1)
    {}

  private:
    staticData& _member;
}; 
```

**从“const staticData”类型的表达式中对“staticData”类型的引用进行无效初始化**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:15:45.607

您正在尝试`const`通过非常量引用来引用对象。

因此，可以通过引用修改原始对象，因为引用是非`const`的，因此您在将对象声明为时违反了约定`const`。

有2个选项：

*   `const`从_`static const staticData data1;`
*   做参考`const`：`const staticData& _member;`

编辑：

根据您的评论，您可以拥有：

```
class testReference
{
  public:
    testReference(): _member(&staticData::data1)
    {}

  private:
    staticData const * _member;
}; 
```

这样，您可以更改`_member`指向的内容（不能使用引用），但不能更改对象本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:16:09.697

`_member`是允许突变的参考。 `data1`是不可变的。提供只读对象的可写视图是不可能的。

# salesforce - 在视觉力中找到特定字符时放置分页符

> ID：10898993
> 
> 赞同：0
> 
> 时间：2012-06-05T14:14:21.447
> 
> 标签：salesforce, apex-code, visualforce, salesforce-service-cloud

在重复标签上，一个字段名称“insurance__c”正在填充一些描述。在这个领域的内容有项目符号。我想在子弹来临时分页。像这样：- （单个描述后的单个中断）
• 描述 1
• 描述 1
• 描述1

但这是作为 PDF 上的一个段落（没有中断）出现的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:21:37.033

你的意思是分页符还是换行符。

您通常可以使用`<div>`or`<br>`元素（用于换行符）和 CSS 来实现这一点。

```
<br clear="all" style="page-break-before:always" /> 
```

# javascript - Calling Facebook News feed (me/home) with until parameter, returns limit/2 each consecutive call

> ID：10898998
> 
> 赞同：0
> 
> 时间：2012-06-05T14:14:36.407
> 
> 标签：javascript, facebook-graph-api, pagination

Here is a slimmed down version of my code (without the initialization calls). Everything works perfectly, except that every consecutive call I make passing in an *until* value into *FB.api*, returns me limit/2\. I have tried waiting as much as 1 minute in between the calls, using different Facebook accounts but it does not help the matter.

I checked the *next* parameter in the returned object, and the URL simply adds the *until* parameter with the exact same number as my *dataUltimoPost*. When I call the URL, it too returns half the posts.

I found other posts with inconsistent returns [here](https://stackoverflow.com/questions/10553510/facebook-open-graph-api-weird-behavior-of-parameter-limit-while-getting-a-pagin) and [here](https://stackoverflow.com/questions/7020296/facebook-news-feed-not-giving-everything), but none address the paging aspect directly. Coincidentally, I came across [this post](https://stackoverflow.com/a/10359621/461958) which uses the same logic as my code to page posts. So I think I'm on the right track.

functions:

```
function getPost (success, append) {
    var params = { limit: 25, date_format: 'U' };
    if (append)
        params.until = dataUltimoPost;

    FB.api('/me/home', 'get', params, function (userData) {
        if (userData.data.length > 0)
            dataUltimoPost = userData.data[userData.data.length - 1].created_time - 1;
        success.call(this, userData.data, append);
    });
};

function fillPost(posts, append) {
    var postsHTML = '';
    append = append === true;

    alert('posts.length: ' + posts.length + ' - append: ' + append);
} 
```

calling the functions:

```
getPost(fillPost); //returns 25
getPost(fillPost, true); //returns 12
getPost(fillPost, true); //returns 1 or 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:53:28.533

Here's a blog post from Facebook themselves for the reason why you don't get back 25 results when asking for 25.

[http://developers.facebook.com/blog/post/478/](http://developers.facebook.com/blog/post/478/)

Here they've clearly admitted that their FQL filtering mechanism pre-limits the result set BEFORE applying filtering. Here's a visual on what's happening.

![enter image description here](../Images/2b0ddf2a61f70d4d04ee6f5d454394f5.png)

# asp.net - 报告服务：获取生成报告的 PDF

> ID：10898999
> 
> 赞同：8
> 
> 时间：2012-06-05T14:14:37.850
> 
> 标签：asp.net, reporting-services, reporting, ssrs-2008

我有一个报告服务服务器，它已经有一些正在运行的报告，我现在需要通过自定义网站（运行 asp.net MVC3）生成它们。

我需要将此报告作为流/字节检索以将其发送给用户。没有“报告查看器”左右。

我上次使用报告服务是使用 sql 2005，我们应该将一个不起眼的 asmx 文件作为参考。

现在情况如何，使用 sql server 报告 2008 R2、.Net4 和 Visual Studio 2010？我找不到解释整个事情的教程。

（实际上我找不到没有 sql 2008 r2 报告查看器的教程）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-05T15:57:25.833

[MSDN](http://msdn.microsoft.com/en-us/library/ms153697%28v=sql.105%29)提供了几种方法。我经常使用[URL 访问](http://msdn.microsoft.com/en-us/library/ms153563%28v=sql.105%29)来获取 ASP .NET 应用程序中的快速简单 PDF 按钮。

这是执行此操作的快速破解代码。可以清理它以使用集成身份验证，并且可以通过多种方式存储报告名称。（我从一些旧代码中剪切并粘贴了它，这些代码会将报告存储到数据库中，然后可以从数据库中返回它。

```
// First read in the report into memory.

string strReportUser = "RSUserName";
string strReportUserPW = "MySecretPassword";
string strReportUserDomain = "DomainName";

string sTargetURL = "http://SqlServer/ReportServer?" +
   "/MyReportFolder/Report1&rs:Command=Render&rs:format=PDF&ReportParam=" +
   ParamValue;

HttpWebRequest req =
      (HttpWebRequest)WebRequest.Create( sTargetURL );
req.PreAuthenticate = true;
req.Credentials = new System.Net.NetworkCredential(
    strReportUser,
    strReportUserPW,
    strReportUserDomain );

HttpWebResponse HttpWResp = (HttpWebResponse)req.GetResponse();

Stream fStream = HttpWResp.GetResponseStream();

//Now turn around and send this as the response..
byte[] fileBytes = ReadFully( fStream );
// Could save to a database or file here as well.

Response.Clear();
Response.ContentType = "application/pdf";
Response.AddHeader(
    "content-disposition",
    "attachment; filename=\"Report For " +
        ParamValue + ".pdf\"" );
Response.BinaryWrite( fileBytes );
Response.Flush();
HttpWResp.Close();
Response.End(); 
```

ReadFully 是

```
public static byte[] ReadFully( Stream input )
{
   using ( MemoryStream ms = new MemoryStream() )
   {
      input.CopyTo( ms );
      return ms.ToArray();
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T09:36:49.133

因为您有嵌套流，所以您可能希望在复制后关闭第一个流以避免关闭流错误。此外，如果您收到 401 Unauthorized，请尝试使用默认凭据。

```
 req.UseDefaultCredentials = true;
            req.PreAuthenticate = true;
            req.Credentials = CredentialCache.DefaultCredentials;

            HttpWebResponse HttpWResp = (HttpWebResponse)req.GetResponse();

            Stream fStream = HttpWResp.GetResponseStream();                

            //Now turn around and send this as the response..
            byte[] fileBytes = ReadFully(fStream);
            // Could save to a database or file here as well.
            HttpWResp.Close(); 
```