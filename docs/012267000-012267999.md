# StackOverflow 问答 12267000-12267999

# javascript - JS/jQuery 在悬停时更改图像

> ID：12267000
> 
> 赞同：2
> 
> 时间：2012-09-04T15:45:12.337
> 
> 标签：javascript, jquery, html, hover

我有一些下面显示的 HTML，它是在 ASP Classic 表单中动态生成的。

可以有任意数量的组/表（大小/颜色）和任意数量的行/选项。

每个组/表都有一个 img 标签，每个行/选项都有一个隐藏字段及其对应的图像 URL。

在每一行悬停时，我需要使用 JS 或 jQuery（在 ASP 经典中工作的东西）将该组图像的 src 属性更改为该行的图像 URL。

如果需要，可以更改 HTML 以使其正常工作。

谢谢你。

```
 <table>
    <tr>
        <td style="font-weight: 700" colspan="2">
            Color<input id="colorSortOrder" type="hidden" value="1" />
        </td>
    </tr>
    <tr>
        <td>
            <input id="radioRed" type="radio" name="Color" value="R-" />
            <label for="radioRed">
                Red</label>
            <input type="hidden" value="Image1.jpg" />
        </td>
        <td rowspan="3">
            <img />
        </td>
    </tr>
    <tr>
        <td>
            <input id="radioOrange" type="radio" name="Color" value="O-" />
            <label for="radioOrange">
                Orange</label>
            <input type="hidden" value="Image2.jpg" />
        </td>
    </tr>
    <tr>
        <td>
            <input id="radioBlue" type="radio" name="Color" value="B-" />
            <label for="radioBlue">
                Blue</label>
            <input type="hidden" value="Image3.jpg" />
        </td>
    </tr>
</table>
<table>
    <tr>
        <td style="font-weight: 700" colspan="2">
            Size<input id="sizeSortOrder" type="hidden" value="2" />
        </td>
    </tr>
    <tr>
        <td>
            <input id="radioLarge" type="radio" name="Color" value="LA-" />
            <label for="radioLarge">
                Large</label>
            <input type="hidden" value="Image4.jpg" />
        </td>
        <td rowspan="3">
            <img />
        </td>
    </tr>
    <tr>
        <td>
            <input id="radioMedium" type="radio" name="Color" value="ME-" />
            <label for="radioMedium">
                Medium</label>
            <input type="hidden" value="Image5.jpg" />
        </td>
    </tr>
    <tr>
        <td>
            <input id="radioSmall" type="radio" name="Color" value="SM-" />
            <label for="radioSmall">
                Small</label>
            <input type="hidden" value="Image6.jpg" />
        </td>
    </tr>
</table> 
```

...看起来像：

![在此处输入图像描述](../Images/38784372b961ffcb67c4e58976df438b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:24:35.483

我会稍微更改 HTML 以通过像这样为图像 src 添加数据属性来减少所需的 JavaScript 解析

[http://jsfiddle.net/muDJ9/](http://jsfiddle.net/muDJ9/)

并使用 JavaScript 替换，您可以编辑 alt 标签的扩展

编辑：这也是我刚刚对使用 console.time() 分析器提交的其他人进行测试时运行得最快的

最后：http: [//jsfiddle.net/FV9cw/](http://jsfiddle.net/FV9cw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:51:59.183

```
$("input[type='radio']").hover(function(){
var src = $(this).parent().find("input[type='hidden']").val();
$(this).parent().parent().parent().find("img").attr("src",src);
}); 
```

第 1 行检测悬停。第 2 行到 td 并查找 td 内的隐藏输入并取值 第 3 行向上 3 次 td > tr > table 并查找 img 并使用图像设置其属性 src。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T16:15:17.133

你可以这样做

**[现场演示](http://jsfiddle.net/rajaadil/pZZ82/2/)**

```
$('label[for]').closest('tr').mouseenter(function(){  
    $(this).siblings().find('img').hide();
    $(this).find('img').attr('src', $(this).find('input[type=hidden]').attr('value')).show(); 
}); 
```

# c# - 未定义的实体 XML 解析异常

> ID：12267003
> 
> 赞同：5
> 
> 时间：2012-09-04T15:45:18.857
> 
> 标签：c#, xml

我试图`non breaking space entity`在`<!doctype />`声明中定义。代码 ：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" [ <!ENTITY nbsp "&#x00A0;"> ] />

 <html xmlns="http://www.w3.org/1999/xhtml">
  .. .... 
```

但是当我从上面的文档中创建一个 XDocument 对象时，我还是遇到了一个异常

```
Undefined entity &nbsp. 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T15:49:41.050

您可以尝试使用此实体`&#160;`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T16:47:08.800

首先，外部和内部实体的组合`"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" [ <!ENTITY nbsp "&#x00A0;"> ]`是不必要的，因为`http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd`包含`www.w3.org/TR/xhtml1/DTD/xhtml-lat1.ent`哪些`<!ENTITY nbsp "&#160;">`与您的完全相同。

所以那一点应该是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

其次，默认情况下 XDocument 不验证 DTD。但是，您可以`Load`从`XmlValidatingReader`或`XmlTextReader`使用适当的设置

~~如果可能的话，~~[如果不可能，就让它成为可能！] 将 XmlReader 设置为使用 a 是个好主意`XmlPreloadedResolver`，因为有很多人在该 DTD 的 URI 和它包含的 .ent 文件上遇到了糟糕的 ol' W3C，而且他们'完全同意你使用它的本地副本（通过“完全可以”我的意思是如果每个人都停止对他们的服务器进行如此多的锤击，他们会非常高兴）。除了对他们有好处之外，它对你来说也会更快。

# ruby-on-rails - 如何在另一个未关联模型的属性上设置 default_scope 顺序

> ID：12267006
> 
> 赞同：0
> 
> 时间：2012-09-04T15:45:33.490
> 
> 标签：ruby-on-rails, sorting

我有一个 Search 资源，它根据[Railscast111](http://railscasts.com/episodes/111-advanced-search-form-revised)中所述的过滤器返回帖子，并具有以下代码：

```
def filter_posts
  posts = Post.order('created_at DESC')     
  posts = posts.where("name ilike ?", "%#{keywords}%")
  posts = posts.where(... #numerous other filters
  posts
end 
```

过滤器本身似乎工作正常。但是，内容并不总是按“created_at DESC”的顺序返回。如何对最终输出进行排序，使其始终按“created_at DESC”的顺序排列？目前，Post 和 Search 模型之间没有关联。我需要建造一个吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:05:38.837

您是否尝试将这两个条件链接在一起？

```
posts = Post.where("name like?", "%#{keywords}%").order('created_at DESC') 
```

根据您最终调用的过滤器数量，您需要使用更新的范围（基于您的过滤器）不断更新原始结果，因为每次使用它创建新范围的位置，而不是调整原始范围. 所以你似乎走在正确的道路上，因为你的原始代码就是这样做的，例如

```
posts = Post.where("filter1")
posts = posts.where("filter2") 
```

*在应用所有过滤器后*，您是否尝试过排序，所以像

```
posts = posts.order('created_at DESC') 
```

或者

```
posts = posts.sort_by &:created_at 
```

另外，我不确定您所说的搜索资源是什么意思，当（至少在这种情况下）看起来您可以将搜索逻辑保留在 Post 模型本身中。你能澄清一下，或者发布模型吗？

# javascript - 如何检测是否加载了 iframe？

> ID：12267010
> 
> 赞同：103
> 
> 时间：2012-09-04T15:45:41.977
> 
> 标签：javascript, jquery, html, iframe

我正在尝试检查用户单击按钮后是否已加载 iframe。

我有

```
$('#MainPopupIframe').load(function(){
    console.log('load the iframe')
    //the console won't show anything even if the iframe is loaded.
}) 
```

HTML

```
<button id='click'>click me</button>

//the iframe is created after the user clicks the button.
<iframe id='MainPopupIframe' src='http://...' />...</iframe> 
```

有什么建议么？

顺便说一句，我的 iframe 是动态创建的。它不会在初始页面加载时加载。

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2012-09-04T15:54:55.607

你可以试试这个（使用`jQuery`）

```
$(function(){
    $('#MainPopupIframe').load(function(){
        $(this).show();
        console.log('iframe loaded successfully')
    });

    $('#click').on('click', function(){
        $('#MainPopupIframe').attr('src', 'https://heera.it');    
    });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<button id='click'>click me</button>

<iframe style="display:none" id='MainPopupIframe' src='' /></iframe>
```

[**jsfiddle 演示**](http://jsfiddle.net/umYkV/)。

**更新：**使用普通`javascript`

```
window.onload = function(){
    var ifr = document.getElementById('MainPopupIframe');
    ifr.onload=function(){
        this.style.display='block';
        console.log('laod the iframe')
    };

    var btn = document.getElementById('click');    
    btn.onclick=function(){
        ifr.src='https://heera.it';    
    };
};
```

```
<button id='click'>click me</button>

<iframe style="display:none" id='MainPopupIframe' src='' /></iframe>
```

[**jsfiddle 演示**](http://jsfiddle.net/umYkV/1/)。

**更新：**你也可以试试这个（动态 iframe）

```
$(function(){
    $('#click').on('click', function(){
        var ifr = $('<iframe/>', {
            id:'MainPopupIframe',
            src:'https://heera.it',
            style:'display:none;width:320px;height:400px',
            load:function(){
                $(this).show();
                alert('iframe loaded !');
            }
        });
        $('body').append(ifr);    
    });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<button id='click'>click me</button><br />
```

[**jsfiddle 演示**](http://jsfiddle.net/heera/umYkV/121/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T15:57:13.150

我想像这样：

```
<html>
<head>
<script>
var frame_loaded = 0;
function setFrameLoaded()
{
   frame_loaded = 1;
   alert("Iframe is loaded");
}
$('#click').click(function(){
   if(frame_loaded == 1)
    console.log('iframe loaded')
   } else {
    console.log('iframe not loaded')
   }
})
</script>
</head>
<button id='click'>click me</button>

<iframe id='MainPopupIframe' onload='setFrameLoaded();' src='http://...' />...</iframe> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-07T22:34:54.147

您也可以尝试 onload 事件；

```
var createIframe = function (src) {
        var self = this;
        $('<iframe>', {
            src: src,
            id: 'iframeId',
            frameborder: 1,
            scrolling: 'no',
            onload: function () {
                self.isIframeLoaded = true;
                console.log('loaded!');
            }
        }).appendTo('#iframeContainer');

    }; 
```

# asp.net - 如何在 ASP.Net 3.5 中使标签、标题和字段标题内容可管理？

> ID：12267012
> 
> 赞同：4
> 
> 时间：2012-09-04T15:45:49.403
> 
> 标签：asp.net, content-management-system

我有一个开发需求，我需要在 ASP.Net 3.5 应用程序中管理所有内容。我们没有遵循 MVC 模型，尽管我们的应用程序基于 3 层。此外，我们也没有使用任何开源框架，例如 DNN。

我想知道我们如何在不使用任何框架的情况下专门使***Field Labels***、***Form*** Captions和***Field Headers内容可管理？***

我欢迎关于这个问题的所有技术和创新想法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:54:22.853

您是否考虑过使用资源文件并使用`meta:resourcekey`控件上的属性？

```
<asp:Label Runat="server" meta:resourcekey="MyLabel" /> 
```

并在资源文件中

```
MyLabel.Text = "My Label Text" 
```

此外，如果您想将信息存储在其他介质中，您可以创建自定义资源提供程序 ( [http://msdn.microsoft.com/en-us/library/aa905797.aspx](http://msdn.microsoft.com/en-us/library/aa905797.aspx) )

# c - 如何删除警告：从“int”转换为“char”可能会改变其值？

> ID：12267013
> 
> 赞同：2
> 
> 时间：2012-09-04T15:45:49.450
> 
> 标签：c, casting

我有一个 `char buf[3];`需要放置`buf[0] = ch`的`ch`数组： `int`. 但编译器给出以下警告：

> 从 'int' 转换为 'char' 可能会改变它的值

我该如何删除这个？我试过投，`unsigned char`但没有运气。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T15:47:21.757

使用显式强制转换：

```
buf[0] = (char)ch; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T15:49:39.323

一个 char 是一个字节长，而一个整数通常是 4 个字节（实现定义）。
如果您尝试将整数转换为 char，显然您会丢失前三个字节。

`buf[0]=(char)ch`如果您确定您的 int 不超过 1 个字节，您可以这样做。否则会丢失信息。

# ios - 从 Xcode 中的配置文件设置 UIPrerenderedIcon

> ID：12267021
> 
> 赞同：0
> 
> 时间：2012-09-04T15:46:53.407
> 
> 标签：ios, info-plist

似乎我无法`UIPrerenderedIcon`在我的 中设置`Info.plist`，因为[它从 iPhone OS 2.1 开始被忽略](http://developer.apple.com/library/ios/#qa/qa1614/_index.html)。您不能提供 的`String`值`YES`，这不再受支持。

有没有其他方法可以做到这一点而无需创建单独的 Info.plist（例如，使用预构建运行脚本）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:41:00.723

我想通了。您必须在“编译源”之前添加“运行脚本”构建阶段：

> #!/usr/bin/env sh
> 
> set -o errexit set -o nounset
> 
> /usr/libexec/PlistBuddy -c "设置 UIPrerenderedIcon ${YOUR_CONFIG_KEY}" "${PROJECT_DIR}/*-Info.plist"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T08:53:49.200

```
If you want to set value dynamically using command from shell script or terminal, you can do that as below:

/usr/libexec/PlistBuddy -c "Set :UIPrerenderedIcon YES" YOUR_PLIST_FILE_PATH

/usr/libexec/PlistBuddy -c "Set :CFBundleIcons:CFBundlePrimaryIcon:UIPrerenderedIcon YES" YOUR_PLIST_FILE_PATH 
```

# .net - lightswitch vs2012中的表单身份验证

> ID：12267029
> 
> 赞同：2
> 
> 时间：2012-09-04T15:47:11.050
> 
> 标签：.net, visual-studio-2012, visual-studio-lightswitch

我正在尝试在 lightswitch (vs2012) 中实现表单身份验证，但我无法显示登录页面。我不需要任何复杂的角色，我只是想设置一个可以访问整个应用程序的用户帐户。我使用了[Edu Lorenzo](http://edulorenzo.wordpress.com/2011/03/04/adding-forms-authentication-based-access-control-to-a-visual-studio-lightswitch-application/)提出的教程，但没有成功。有人有想法么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T01:41:36.407

在调试项目时，您不会看到登录表单。您只会在应用程序的**已发布版本中看到它。**

然后您可能会问的合乎逻辑的问题是“我如何调试我的权限？”。当您添加权限时，在该行的右侧是一个名为“Grant For Debug”的复选框。当您想模拟担任具有该权限的角色时，请勾选该框。为了模拟没有权限，你取消它。

但是您提到您想要一个“可以访问整个应用程序的单个用户”。但是既然你问的是登录表单，我只能假设你仍然希望他登录，所以不是每个人都可以访问应用程序，是吗？

如果您需要身份验证的唯一原因是只有*一个*用户可以登录，只需在已**发布的应用程序中将他添加到***管理*角色（以防他需要添加另一个*用户*或添加*角色*）。在您的代码中，您不会测试任何特定权限，因此这应该会给您想要的。

# objective-c - 如何发送 RS-422A 命令

> ID：12267038
> 
> 赞同：0
> 
> 时间：2012-09-04T15:47:29.277
> 
> 标签：objective-c, cocoa

我正在编写一个必须与 RS-422A（9pin）中的设备交互的应用程序我想知道我必须使用哪个类？

NSOutputStream 和 NSInputStream？还是 NSFileHandle？

首先要做的是“选择”哪个端口用于建立连接，然后发送字节命令。

如果有人能照亮我的路:-)

提前感谢阿诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:25:04.097

Mac OS X 上的串行端口编程应该与任何其他 UNIX 上的一样。例如，您可以查看本指南以获得一个想法：

*   [http://www.easysw.com/~mike/serial/serial.html#2_5_1](http://www.easysw.com/~mike/serial/serial.html#2_5_1)

# ektron - 订阅系统博客

> ID：12267040
> 
> 赞同：1
> 
> 时间：2012-09-04T15:47:32.380
> 
> 标签：ektron

我有一个带有系统博客的 8.0.2SP1 站点。客户想知道订阅按钮的作用，但我在文档中找不到描述。现在，当有人点击订阅时，他们可以选择所有帖子或所有评论——这部分是有道理的，但它似乎什么也没做。如果添加了新帖子，客户会收到一封电子邮件。我可以在文档中看到社区博客是如何工作的（默认情况下它会更新活动提要）。我可以在个人资料设置中找到您可以指定群组博客和同事博客的交付方式。但是系统博客没有设置。

Q：订阅系统博客有什么作用？

问：系统如何处理系统博客的通知是否有配置文件级别的设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:27:06.190

订阅博客会在发布新帖子时提醒某人。订阅特定帖子将允许用户在评论已发布时收到通知。这些设置假定您在 web.config 中设置了 smtp 服务器（中继）。在引擎盖下，您在常规文件夹下创建的博客或组/用户之间没有重大区别。要在根级博客上设置警报，您应该在博客的属性下看到“网络警报”选项卡

# iphone - iPhone/iPad 在尝试加载网站时显示“下载失败”

> ID：12267042
> 
> 赞同：0
> 
> 时间：2012-09-04T15:47:34.547
> 
> 标签：iphone, ios, codeigniter, web

我有一个奇怪的问题。每当我执行诸如登录之类的操作时，它都会创建会话，但随后会说“下载失败 Safari 无法下载此文件”并且不会重定向。如果我转到它应该将我重定向到的实际页面，我已登录。任何时候你做任何事情，如注销、上传内容等，都会发生同样的事情。

它只发生在 3G 上的 Safari 中的 iOS 设备上。Wifi 它工作得很好。iPhone 上的 Chrome 在 3G 上运行良好。显然它就像它试图下载一些东西，但我似乎无法弄清楚为什么会这样，或者为什么会这样。

当我登录到我的个人资料时会发生这种情况，但是如果该个人资料是公开的并且我只是直接进入该页面而不登录，则没有问题。说得通？.....

该站点是在 Codeigniter 中构建的。如果有人有任何想法，那就太好了！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:55:01.823

该问题与导致该问题的服务器配置有关。甚至以为我有 $config['compress_output'] = FALSE; 设置它仍在使用gzip。我们在服务器配置中关闭了它，它解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:06:23.090

设置您的设备以使用代理，例如[Charles](http://www.charlesproxy.com)。寻找成功的请求/响应和失败的请求/响应之间的区别。

# actionscript-3 - 带有蒙版或单独图像文件的 Spritesheet？

> ID：12267045
> 
> 赞同：0
> 
> 时间：2012-09-04T15:47:51.760
> 
> 标签：actionscript-3, flash-builder

我正在制作一个 2D 角色的动画，它可以行走、奔跑、跳跃、弯曲……

加载一个包含所有动画的大“spritesheet”并仅使用蒙版会更好，还是加载单独的文件（步行，跑步，...）会更好，因为您没有在如此大的图像上使用蒙版每一帧？

我没有在 Starling 之类的框架中使用 Stage3D 功能，因为我认为普通的 flash 显示 API 足够快，并且与相对较新的 GPU 框架相比，错误少得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:20:36.977

根据我的经验，“显示列表越简单，性能越好”的规则通常适用。这意味着您应该使用最具体的显示对象来完成这项工作（当形状足够时不要使用 Sprite，或者在有意义的情况下偏爱位图而不是矢量）。

最极端的版本是在舞台上只有一个 Bitmap 显示对象，并且每次想要更新屏幕时都使用 copyPixels 将所有游戏对象绘制到其中。copyPixel 调用中的源是什么并不重要，它可以是充当精灵表的大型 BitmapData 或代表动画中单个帧的小型 BitmapData 对象。这种方法非常快，您可以轻松地同时在屏幕上显示数百个对象。但是使用 copyPixels 意味着您无法缩放或旋转游戏对象，因此对于这些情况，您将不得不退回到速度慢得多的 draw() 方法。当然，这种单一的位图方法不适用于需要将鼠标事件附加到游戏中特定对象的游戏，但适用于射击游戏或平台游戏。

**为了回答您的问题**，我认为通过使用单个 Bitmap 显示对象来表示播放器和所有动画帧的 BitmapData 对象集合，您将获得更好的性能。然后您可以将 Bitmap 的 bitmapData 属性更改为您要显示的帧。您仍然可以加载一个大型 spritesheet png，然后在游戏初始化期间将其拆分为一系列 BitmapData 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:29:17.277

仅对字符进行 Blitting（使用`lock(),copyPixels(),unlock()`）效果很好。

```
private function updatePixels():void{
    //update sprite sheet copy position based on the frame placements ons prite sheet
    position.x = spriteSourceData[currentFrame].x + offset.x;
    position.y = spriteSourceData[currentFrame].y + offset.y; 
    //draw into the bitmap displayed
    displayData.lock();
    displayData.fillRect(displayData.rect, 0x00FFFFFF);//clear
    displayData.copyPixels(sourceData, spriteData[currentFrame], position);//copy new frame pixels
    displayData.unlock();
}
//a bit about vars:
position:Point
spriteSourceData:Vector.<Rectangle> - from parsed Texture Packer data
offset:Point - front view and side view animations weren't always centred, so an offset was needed
displayData:BitmapData - pluging into a Bitmap object displayed
sourceData:BitmapData - the large sprite sheet
currentFrame:int - image index on the sprite sheet 
```

我已经在一个较旧的项目中完成了这项工作，按照我从 Lee Brimelow 的教程系列[Sprite Sheets and Blitting](http://gotoandlearn.com/)（[第 1](http://gotoandlearn.com/play.php?id=140)部分、[第 2](http://gotoandlearn.com/play.php?id=141)部分、[第 3 部分](http://gotoandlearn.com/play.php?id=142)）中学到的内容，松散地编写了一个自定义类

![位图和精灵表](../Images/e14fea6c7d84fd5edb72d999c936575a.png)

简而言之，您将使用两个 BitmapData 对象：

1.  一个大的精灵表
2.  仅显示字符（最大字符边界框的大小）以将像素复制到的小图像

在我的项目中，我有一个带有正面和侧面动画的角色，对于侧面，我使用了一组动画并使用[Matrix](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Matrix.html)类相应地翻转（缩放和平移）侧面动画。我使用[TexturePacker](http://www.codeandweb.com/texturepacker)将图像序列导出为精灵表和帧数据以及 JSON 对象。现在有原生 JSON 支持，所以很方便。Texture Packer 不是免费的，但它确实物有所值（价格实惠，速度快，工作完美）。我还没有使用过 Flash CS6，但我想它也可以导入您的图像序列并导出具有新功能的 spritesheet。

# c++ - 当使用 NFS 和 NTP 不可用时，禁止生成时钟偏差警告

> ID：12267062
> 
> 赞同：-1
> 
> 时间：2012-09-04T15:48:36.560
> 
> 标签：c++, time, makefile

这个问题已经问了好几次了，但实际上都没有回答。

我正在使用 Putty 连接到大学的 Linux 机器。该服务器的时钟晚了 15 分钟。我的主目录是 NFS 挂载。

即使在多次请求之后，BOFH 也没有配置 NTP。

我可以使用触摸命令直到太阳变蓝；make 仍然会发出警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:20:56.483

我自己没用过，但是你检查过[http://nfstimesync.sourceforge.net/](http://nfstimesync.sourceforge.net/)项目吗？

# java - 在 java 中从 xml 字符串创建 org.w3c.dom.Document 时遇到问题

> ID：12267065
> 
> 赞同：1
> 
> 时间：2012-09-04T15:48:44.840
> 
> 标签：java, xml

我正在尝试从 xml 字符串创建一个 org.w3c.dom.Document 对象。我遵循了许多人在其他问题中的建议，但文件最终是空的。以下代码有什么问题？

```
DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
Document doc = docBuilder.parse(new InputSource(new StringReader(response.getResponseText()))); 
```

字符串中的 xml 文本如下所示（来自 response.getResponseText()）

```
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing">
<s:Header>
    <a:Action s:mustUnderstand="1">http://www.blah.com/ns/2006/05/01/webservices/123/TokenManagement_1/CreateServiceToken_1_Reply</a:Action>
    <CacheResponse xsi:type="DoNotStoreCacheResponse" xmlns="http://www.blah.com/ns/2008/03/01/webservices/123/Cache_1" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <Date>2012-09-04T15:35:06.8116593Z</Date>
        <DoNotStore />
    </CacheResponse>
    <a:RelatesTo>ba04425d-d93e-4a70-a134-ab8e29d5345c}</a:RelatesTo>
</s:Header>
<s:Body>
    <CreateServiceToken_Response_1 xmlns="http://www.blah.com/ns/2006/05/01/webservices/123/TokenManagement_1" xmlns:global="http://www.blah.com/ns/2006/05/01/webservices/123/Common_1">
        <Expiration>2012-09-04T17:04:19.1834228Z</Expiration>
        <global:Token>3DEC2723A01047D1590544CBA5BA1E30326535E609DC1E6FAC5C659BC3B8A693BB054834A58B235037ED830CD05784DB176A62309AEB4B608C6F0B5B3F13ADE0EC56BE9F822ACFA3B549D4427D89BF030BFF48BA671DCAEB49940EFEBDEBFB71</global:Token>
    </CreateServiceToken_Response_1>
</s:Body> 
```

谁能看到我的代码有什么问题？我最终只想在文档上运行几个 xpath 查询......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:04:45.857

我建议从设置开始`docFactory.setNamespaceAware(true);`，否则解析、构建的 DOM 和 XPath 实现将无法使用您发布的带有名称空间的 XML。

# select - abap中的动态渐进式选择

> ID：12267069
> 
> 赞同：-2
> 
> 时间：2012-09-04T15:49:02.383
> 
> 标签：select, dynamic, abap, progressive

我会在 Abap 中创建一个动态渐进式选择，在一个 db 表中。
Es：
（1）我的表有4个关键字段；
(2) 第一个选择是全部 4 个键；
(3) 如果我没有找到记录 -> 第二次选择前 3 个关键字段；
(4) 如果我没有找到记录 -> 第三次选择前 2 个关键字段；
(5) 如果我没有找到记录 -> 第四次选择只有第一个关键字段；
(6) 如果我没有找到记录 -> 引发错误。

我必须使用字段符号，但如何？你能帮我实现选择吗？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:13:19.313

一种天真的方法的伪代码：

```
SELECT INTO TABLE with all four fields.
IF sy-dbcnt = 0.
    SELECT INTO TABLE with three fields.
    IF sy-dbcnt = 0.
        SELECT INTO TABLE with two fields.
        IF sy-dbcnt = 0.
            SELECT INTO TABLE with one field.
            IF sy-dbcnt = 0.
                MESSAGE TYPE 'E'.
            ENDIF.
        ENDIF.
    ENDIF.
ENDIF.
LOOP AT table ASSIGNING <field_symbol>.
     "do something with the table line in the field symbol
ENDLOOP. 
```

# python - Google App Engine NDB 祖先查询不起作用

> ID：12267071
> 
> 赞同：4
> 
> 时间：2012-09-04T15:49:09.730
> 
> 标签：python, google-app-engine

我正在尝试执行以下查询：

```
query = Comment.query(ancestor = userKey, ndb.OR(Comment.modifiedDate > lastSyncDate, Comment.activityDate > lastSyncDate)) 
```

1 个等号 (=) 是[文档](https://developers.google.com/appengine/docs/python/ndb/queries#ancestor)所说的我们应该拥有它的方式，但是当我只有 1 个等号（构建错误）时，我的应用程序无法运行。如果我使用两个等号，例如`ancestor == userKey`，则应用程序运行，但我得到一个`NameError: global name 'ancestor' is not defined`. 是什么赋予了？

我还尝试了此查询的另一种变体，但出现了同样的问题：

```
query = Comment.query(ndb.AND(ancestor == userKey, ndb.OR(Comment.modifiedDate > lastSyncDate, Comment.activityDate > lastSyncDate))) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T15:52:37.993

您需要将`ancestor`关键字*放在*方法位置参数之后：

```
query = Comment.query(
    ndb.OR(Comment.modifiedDate > lastSyncDate, Comment.activityDate > lastSyncDate),
    ancestor=userKey) 
```

或者，`filters`显式使用关键字，或使用以下`.filter()`方法：

```
query = Comment.query(
    ancestor=userKey,
    filters=ndb.OR(Comment.modifiedDate > lastSyncDate, Comment.activityDate > lastSyncDate)) 
```

或者

```
query = Comment.query(ancestor=userKey).filter(ndb.OR(Comment.modifiedDate > lastSyncDate, Comment.activityDate > lastSyncDate)) 
```

# iphone - 如何确定按下按钮的行？

> ID：12267074
> 
> 赞同：1
> 
> 时间：2012-09-04T15:49:21.797
> 
> 标签：iphone, uitableview, uibutton, nsindexpath

我有我的自定义 uitableviewcell。它有uibutton，带有动作的uibutton。那么我如何知道按下 uibutton 的行的 indexPath 呢？

目标：每行上的 uibuttons 都有一个图像。因此，当用户点击按钮时，它会显示警报视图，如果答案是“是”，则 uibutton 的图像会发生变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T18:01:10.833

试试下面的代码片段：

在 cellForRowAtIndexPath 方法中。将 indexpath.row 设置为按钮标签

> [cellButton addTarget:self action:@selector(cellBottonClicked:) forControlEvents:UIControlEventTouchUpInside];
> cellButton.tag = indexPath.row;

```
-(IBAction) cellBottonClicked:(id)sender{
    NSInteger row = [sender tag];
    //you can get indexpath from row
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:row inSection:0]; 
    CustomTableViewCell *cell = (CustomTableViewCell *)[self.tableView  cellForRowAtIndexPath:indexPath];
    // from this cell you can fetch and change image of selected cell's button. 
} 
```

**[编辑：仅更改按钮的图像]**

如果您只需要在单击事件上更改按钮的图像。那么我认为，您不需要索引路径或单元格。

试试这个代码。希望它会有所帮助：

```
-(IBAction) cellBottonClicked:(id)sender{
   UIButton *btn = (UIButton *)sender;
   [btn setImage:yourImage forState:UIControlStateNormal];
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:55:21.183

您还应该能够通过以下方式获取 indexPath：

```
NSIndexPath *indexPathForButton = [self.tableView indexPathForSelectedRow]; 
```

**或**在您的 .h 文件中，添加：

```
@property (nonatomic, retain) NSIndexPath* indexPathForButton; 
```

并在使用时更改 indexPath。(self.indexPathForButton = indexPath;)

但是使用标签要舒服得多……</p>

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-04T15:50:54.517

您可以将当前单元格的行指定为 UIButton 的标记。在您的目标/操作上，您可以检查按钮的标签以找到按下它的行。

# android - 像微调器一样的图像按钮

> ID：12267076
> 
> 赞同：0
> 
> 时间：2012-09-04T15:49:30.757
> 
> 标签：android

我正在寻找一个像 XML 中的微调器一样的图像按钮。我已经找到了一些关于这方面的信息，但没有像我所追求的那样。因此，当我单击图像视图时，将出现一个微调器，其中包含一个可供选择的列表，如果可以通过，它将来自我的数据库。我发现什么都没做

[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/KeUxBt4SJLw](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/KeUxBt4SJLw)

我希望能够在我的活动中拥有 10 个图像按钮，每个按钮都有一个微调器。当用户从微调器列表中选择时，将出现一个对话框（希望在我可以先编写代码之后再尝试）。

任何帮助都会有所帮助，谢谢

```
 package com.spinn;

      import android.app.Activity;
      import android.os.Bundle;
      import android.widget.ArrayAdapter;
      import android.widget.Button;
      import android.widget.Spinner;

      public class MainActivity extends Activity {

      @Override
      public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);

      ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
      this, R.array.array_name, android.R.layout.simple_spinner_item );
      adapter.setDropDownViewResource(             
      android.R.layout.    simple_spinner_dropdown_item );

        Spinner s = (Spinner) findViewById( R.id.unique_id );
        s.setAdapter( adapter ); 
```

XML

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

<Button
    android:id="@+id/unique_id"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="30dp"
    android:background="@drawable/c3" />

  </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:30:50.713

为什么不使用微调器来设置图像按钮的背景？这应该可以解决问题...

# facebook - 将 Facebook 应用程序重定向到外部页面

> ID：12267079
> 
> 赞同：1
> 
> 时间：2012-09-04T15:49:34.340
> 
> 标签：facebook, redirect

在通过 Feed 对话框发布信息时，我在配置我的 Facebook 应用程序以使其按我想要的方式运行时遇到问题。我已经设置了一个应用程序并创建了一个链接，该链接可以在单击时正确发布我的内容，但我无法弄清楚如何在生成的帖子重定向中将链接指向我想要的位置。

例如，这是[通过 Instagram 发布的帖子](http://i.imgur.com/ndlh2.png)。

如果我单击“通过 Instagram”链接，我会收到[提示](http://i.imgur.com/qIJgf.png)或自动从目标 URL 重定向`http://www.facebook.com/apps/application.php?id=124024574287414`到`www.instagram.com`.

我已经看到其他帖子建议您可以使用来自 App Canvas 页面的 JavaScript 重定向来执行类似的操作，并且我已经获得了这样做的概念证明，但是因为我已经看到 Instagram 和其他应用程序似乎在 Facebook 内部执行此操作我相信可以做得更干净。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:26:05.723

该链接指向应用设置中定义的应用的画布 URL ( `apps.facebook.com/something`) 或网站 URL，无法再对其进行更精细的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:00:39.533

这似乎最容易做到这一点：[http ://woobox.com/statichtml](http://woobox.com/statichtml)

请参阅他们拥有的图像中的重定向单选按钮。

# scala - 使用scala下载图像文件

> ID：12267080
> 
> 赞同：5
> 
> 时间：2012-09-04T15:49:37.670
> 
> 标签：scala

我正在尝试下载 Latex 公式的图像文件。以下是我正在使用的代码

```
 var out: OutputStream = null;
    var in: InputStream = null;

    try {
      val url = new URL("http://latex.codecogs.com/png.download?$$I=\frac{dQ}{dt}$$")

      val connection = url.openConnection().asInstanceOf[HttpURLConnection]
      connection.setRequestMethod("GET")
      in = connection.getInputStream
      val localfile = "sample2.png"
      out = new BufferedOutputStream(new FileOutputStream(localfile))
      val byteArray = Stream.continually(in.read).takeWhile(-1 !=).map(_.toByte).toArray

      out.write(byteArray)
    } catch {
      case e: Exception => println(e.printStackTrace()) 
    } finally {
      out.close
      in.close
    } 
```

我可以下载但它没有下载完整的图像，预期的图像大小约为 517 字节，但它只下载 275 字节。它可能出了什么问题。附上不完整和完整的图像。请帮我。我已经使用相同的代码来下载超过 1MB 大小的文件，它可以正常工作。

![图像不完整](../Images/0783cbf27d01feff77d9159da082e996.png)

![预期图像](../Images/c568e3bce181fb4804aaa65ab53dd3eb.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T15:56:22.967

你传递了一个错误的字符串，它`"\f"`被解释为一个转义序列，并给你一个[“换页”](http://en.wikipedia.org/wiki/Page_break#Form_feed)字符。

更好的：

```
val url = new URL("http://latex.codecogs.com/png.download?$$I=\\frac{dQ}{dt}$$") 
```

或者

```
val url = new URL("""http://latex.codecogs.com/png.download?$$I=\frac{dQ}{dt}$$""") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-18T09:55:26.083

另一种选择是使用更简洁的系统命令

```
import sys.process._
import java.net.URL
import java.io.File

new URL("""http://latex.codecogs.com/png.download?$$I=\frac{dQ}{dt}$$""") #> new File("sample2.png") !! 
```

# forms - 带有 ajax submitHandler 的模态表单的 jquery 验证

> ID：12267087
> 
> 赞同：0
> 
> 时间：2012-09-04T15:49:54.970
> 
> 标签：forms, jquery, modal-dialog

我在模式中有一个表单，我试图在表单提交到 ajax db 等之前对其进行验证。

我正在尝试验证表单 $("#new_request_form").validate({ 在保存按钮上。如果它验证然后提交表单。

谁能告诉我我错过了什么？

提前致谢！

```
$(document).ready(dialogForms);
function dialogForms() {    
 $('a.menubutton').click(function() {
    var a = $(this);
    $.get(a.attr('href'),function(resp){
      var dialog = $('<div>').attr('id','formDialog').html($(resp).find('form:first').parent('div').html());
      $('body').append(dialog);
      dialog.find(':submit').hide();
      dialog.dialog({
        title: a.attr('title') ? a.attr('title') : '',
        modal: true,
        buttons: {
          'Save': function() {
                $("#new_request_form").validate({
                 submitHandler: function(form) {
                     submitFormWithAjax($(this).find('form'));
                    $(this).dialog('close');
                 }
                });

                },
          'Cancel': function() {$(this).dialog('close');}
        },
        close: function() {$(this).remove();},
        width: 600,
        height: 500,        
        show: "fade",
        hide: "fade"
      });

var $ac_start_date = '<?php echo $ac_end_date ?>',
    $ac_start_date_flip = '<?php echo $ac_end_date_flip ?>',
    $ac_start_parsed = Date.parse($ac_start_date),
    _today = new Date().getTime();

// For Opera and older winXP IE n such
if (isNaN($ac_start_parsed)) { 
    $ac_start_parsed  = Date.parse($ac_start_date_flip);
}

var _aDayinMS = 1000 * 60 * 60 * 24; 

// Calculate the difference in milliseconds
var difference_ms = Math.abs($ac_start_parsed - _today);

// Convert back to days and return
var DAY_DIFFERENCE = Math.round(difference_ms/_aDayinMS);       

// do initialization here
$("#startdate").datepicker({
            dateFormat: 'dd-mm-yy',
            changeMonth: true,
            changeYear: true,
            yearRange: '0:+100',
            minDate: '+1d',         
            maxDate: '+' + (DAY_DIFFERENCE + 1) + 'd'
});

// do initialization here
$("#enddate").datepicker({
            dateFormat: 'dd-mm-yy',
            changeMonth: true,
            changeYear: true,
            yearRange: '0:+100',
            minDate: '+1d',         
            maxDate: '+' + (DAY_DIFFERENCE + 1) + 'd'
});

}, 'html');
return false;
});
}

function submitFormWithAjax(form) {
  form = $(form);
  $.ajax({
    url: form.attr('action'),
    data: form.serialize(),
    type: (form.attr('method')),
    dataType: 'script',
    success: function(data){
    $(this).dialog('close');
    // Refresh table
   }
  });
  return false;
} 
```

**形式**

```
<?php
require_once("../config.php");
include_once("scripts/connection.php");
?>

<p class="validateTips">All form fields are required.</p>
<div>
<form id="new_request_form" action="insert_new_request.php" method="POST" class="new_request">
<fieldset>
   <legend><p class="subheadertext">Request Holiday</p></legend>

<table width="100%" border="0">

<?php
$username = $USER->firstname.' '.$USER->lastname;

$is_academic_result = mysql_query('SELECT * FROM holiday_entitlement_academic WHERE employee = \'' . $username . '\'');

if($is_academic = mysql_fetch_array($is_academic_result)) {
    switch($is_academic['units']) {
        case 'days':
                  echo'<tr>
                    <td width="150px" valign="middle"><label for="days">Days:</label></td>
                    <td valign="top">
                    <select id="days" name="days">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    </select>
                    </td>
                  </tr>
                    <tr>
                      <td width="150px" valign="middle"><label for="startdate">Start Date:</label></td>
                      <td valign="top"><input type="text" name="startdate" id="startdate" class="required" readonly="readonly"/></td>
                    </tr>';
            break;
        case 'hours':
                  echo'<tr>
                    <td width="150px" valign="middle"><label for="days">Hours:</label></td>
                    <td valign="top"><input type="text" name="hours" id="hours" class="required" /></td>
                  </tr>
                    <tr>
                      <td width="150px" valign="middle"><label for="startdate">Start Date:</label></td>
                      <td valign="top"><input type="text" name="startdate" id="startdate" class="required" readonly="readonly"/></td>
                    </tr>
                    <tr>
                      <td width="150px" valign="middle"><label for="startdate">End Date:</label></td>
                      <td valign="top"><input type="text" name="enddate" id="enddate" class="required" readonly="readonly"/></td>
                    </tr>';
            break;
        default:
            break;
}
} 

?>
  </table>

  <input type="hidden" id="acyear" name="acyear" value="<?php echo $academic_start_date; ?>"/>
  <input type="hidden" id="user" name="user" value="<?php echo $USER->id; ?>"/>
  <input type="hidden" id="employee" name="employee" value="<?php echo $USER->firstname.' '.$USER->lastname; ?>"/>
 </fieldset>
</form>
</div> 
```

**编辑 - 它的作用**

当您单击保存时，以下内容不会执行任何操作，模式会保持不变，即使您填写表单也不会执行任何操作：

```
 'Save': function() {
            $("#new_request_form").validate({
             submitHandler: function(form) {
                 submitFormWithAjax($(this).find('form'));
                $(this).dialog('close');
             }
            });

        }, 
```

使用以下表单提交并按预期工作，只是没有验证：

```
 'Save': function() {
                 submitFormWithAjax($(this).find('form'));
                $(this).dialog('close');

            }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:53:44.337

我猜在调用 submitHandler 函数时，您传递了错误的选择器。$(this) 代表表单本身，因此无需在其中查找表单。

所以替换此代码

```
submitFormWithAjax($(this).find('form')); 
```

和

```
submitFormWithAjax($(this)); 
```

或交替

```
submitFormWithAjax($("#new_request_form")); 
```

这将解决您的问题。

# html - 带有 css 的 html li 样式

> ID：12267089
> 
> 赞同：-2
> 
> 时间：2012-09-04T15:49:59.073
> 
> 标签：html, css, list, block

这是我的页面： [http ://bit.ly/Ti6Ptr](http://bit.ly/Ti6Ptr)

我会改变这个块样式 ![在此处输入图像描述](../Images/8e855002022dde175d457a0224052e5b.png)

到 ![在此处输入图像描述](../Images/25483e7622a98dc0f685a6e8df2f42c5.png)

我必须在我的css中做什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:52:17.640

最简单的方法是设置包含文本的 div 元素的大小。然后文本将在需要时自动流到下一行。

```
.imageText
{
    width:someWidth;
}

<img ... />
<div class="imageText">

</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:55:31.200

只需添加`width: 190px;`到您的 CSS 选择器`.liRecentPost a`

这就是它的样子

![在此处输入图像描述](../Images/6ec814efc1ca1679224f8a6ee3139140.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T15:55:00.770

没有 html 和 css 并不容易，但我认为在您的文本（“li”或“p”）中，您必须设置宽度和显示块并插入 div 以对齐所有图像示例：

```
<div class="block">
    <div class="firstCol">
    <img src="img/yourimage.jpg" />
    </div>
    <div class="secondCol">
    <p>some text</p>
    </div>
</div> 
```

css

```
.block{
   width:600px;
height:auto;
float:left;
}
    .firstCol{
    width:300px;
    height:auto;
    float:left;
    }
    .secondCol{
    width:300px;
    height:auto;
    float:left;
    }
    .text{
    width:300px;
    display:block
    } 
```

注意尺寸不真实只是一个例子

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T15:56:14.737

只需在你的 li 中添加一点 CSS

```
#recent_posts .ulRecentPost .liRecentPost  {width:200px; padding:5px;} 
```

# c# - MVVMlight 未在 Silverlight 5 中将 ViewModel 添加到 SimpleIoc

> ID：12267094
> 
> 赞同：0
> 
> 时间：2012-09-04T15:50:17.400
> 
> 标签：c#, silverlight, mvvm-light

我正在使用 MVVM light 构建 Silverlight 5 应用程序，并且正在尝试实现 Navigation。

在 Laurent 在 Mix 11 演讲期间构建的 Silverlight 4 示例（针对 SL4）中，他使用以下代码检查 SimpleIOC 容器是否包含适当的 ViewModel，如果不存在则创建一个。然后使用所述 ViewModel 调用导航服务。

```
if (!SimpleIoc.Default.Contains<NewsItemViewModel>(item.Link.ToString()))
{
    SimpleIoc.Default.Register(
    () => new NewsItemViewModel
    {
       Model = item
                },
       item.Link.ToString());
    }

        _navigationService.NavigateTo(
            new Uri(
                string.Format(ViewModelLocator.NewsItemUrl, item.Link),
                UriKind.Relative)); 
```

然后在 NewsItemView 的 OnNavigatedTo 方法中执行以下代码，该方法检查 NewsItemViewModel 是否存在（它应该存在，因为它刚刚创建），然后将其拉出容器。

```
if (DataContext == null)
{
    var url = e.Uri.ToString();
    var itemUrl = url.Substring(url.IndexOf("?") + 1);

    if (!SimpleIoc.Default.Contains<NewsItemViewModel>(itemUrl))
    {
        MessageBox.Show("Item not found");
        return;
    }

    var vm = SimpleIoc.Default.GetInstance<NewsItemViewModel>(itemUrl);
    DataContext = vm;
} 
```

当我尝试在 Silverlight 5 中做同样的事情时（几乎完全是项目的移植），我注意到 SimpleIoc.Default.Contains 方法不存在，但类似的 ContainsCreated(string key) 确实存在。

当我尝试使用这种新方法时，布尔检查总是返回 false，因此导航失败（我收到“未找到项目”消息框）。

下面是我如何重写违规行的示例

```
if (!SimpleIoc.Default.ContainsCreated<NewsItemViewModel>(itemUrl)) 
```

我在这里想念什么？任何帮助都会很棒！

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:56:08.780

怎么用

```
SimpleIoc.Default.IsRegistered<NewsItemViewModel>(itemUrl) 
```

我一直在使用 GetInstance(key) 如果尚未创建它，它会创建它，但它首先需要注册，上面将确认。

尽管您可能希望也可能不希望使用密钥 - 因为它会检查类型和组合键，但我认为只要

```
SimpleIoc.Default.IsRegistered<NewsItemViewModel>() 
```

返回 true，那么您应该可以使用 GetInstance 和密钥

# java - BlockingQueue 与信号量

> ID：12267096
> 
> 赞同：5
> 
> 时间：2012-09-04T15:50:20.803
> 
> 标签：java, multithreading, concurrency, semaphore, blockingqueue

如果我们要实现一个资源池，比如数据库连接池。您将使用哪个并发集合？`BlockingQueue`还是`Semaphore`？

因为`BlockingQueue`，就像生产者-消费者设计模式一样，生产者将所有连接放在队列中，消费者将从队列中获取下一个可用连接。

对于`Semaphore`，您将信号量指定为池大小，并获取许可，直到达到池大小并等待其中任何一个释放许可并将资源放回池中。

哪一个更简单更容易？什么情况下我们只能使用一种而不能使用另一种？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-04T15:52:38.073

BlockingQueue 更简单，因为它也会跟踪连接/资源。

例如

```
public abstract class ResourcePool<Resource> {
    private final BlockingQueue<Resource> free;

    protected ResourcePool(int freeLimit) {
        free = new ArrayBlockingQueue<>(freeLimit);
    }

    public Resource acquire() {
        Resource resource = free.poll();
        return resource == null ? create() : resource;
    }

    public void recycle(Resource resource) {
        if (!free.offer(resource))
            close(resource);
    }

    protected abstract Resource create();

    protected abstract void close(Resource resource);
} 
```

如您所见，BlockingQueue 有助于跟踪空闲资源并确保没有太多空闲资源。它是线程安全的，不需要显式锁定。

如果您使用信号量，您仍然需要将资源存储在集合中（使信号量变得多余；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:55:23.010

无论如何，许多阻塞队列都是用信号量实现的（也许是互斥体/futex/CS）。我经常使用阻塞队列来存储对象——一旦你有一个有效的阻塞队列，为什么还要为对象池使用其他任何东西呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T15:55:38.920

对于高级连接池，我可能都不会使用。正如@PeterLawrey 指出的那样，BlockingQueue 对于最初存在所有资源的简单池最有意义。但是，如果您想做更复杂的事情，比如按需创建资源，那么您很可能需要额外的并发构造。在这种情况下，您很可能最终会使用一个简单的同步块或 Lock。

# php - 多对一 - Symfony 不会生成正确的基于 ID 的关系

> ID：12267098
> 
> 赞同：0
> 
> 时间：2012-09-04T15:50:21.393
> 
> 标签：php, mysql, symfony1, doctrine-orm

`Tag`table 与 table 的关系`Category`为多对一（许多标签与一个类别相关，或者一个类别有许多标签）。

`Tag`我应该从 table到 table获得正常的多对一关系`Category`。它应该基于表中的 ID `Category`（名为`id_category`）。但是，相反，我得到...表格中的一`VARCHAR(255)`列`Tag`！

以下是来自 Tag 实体的部分代码：

```
/**
 * @ORM\Column(nullable=true)
 * @ORM\ManyToOne(targetEntity="Category")
 * @ORM\JoinColumn(name="id_category", referencedColumnName="id_category")
 */
protected $category; 
```

类别实体没有适当的相关“标签”列，因为它是单向关系。无论如何，这`id_category`是在实体中声明的方式`Category`（尽管我认为这并不重要）：

```
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id_category; 
```

我通过 Doctrine2 的命令得到的结果`update --dump-sql`如下：

```
ALTER TABLE Tag ADD category VARCHAR(255) DEFAULT NULL 
```

Doctrine 给了我`VARCHAR`，而不是`INTEGER`作为带有外键的 id。有谁知道为什么？
在这种情况下如何*告诉*Symfony 建立关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:57:15.323

不要使用@ORM\Column，只使用@ORM\ManyToOne：

```
/**
 * @ORM\ManyToOne(targetEntity="Category")
 * @ORM\JoinColumn(name="id_category", referencedColumnName="id_category", nullable=true)
 */
protected $category; 
```

# html - 如果 XSLT 中未勾选复选框，如何显示文本

> ID：12267099
> 
> 赞同：0
> 
> 时间：2012-09-04T15:50:28.870
> 
> 标签：html, xslt, checkbox, xslt-2.0, forms

如果未选中复选框（一旦我单击表单上的**提交**按钮），我正在尝试使用 XSLT 文件显示红色文本错误消息，这是我当前（我认为相关部分）在表单中的代码：

```
<div id="confcontent">
<xsl:apply-templates select="$model/validationMessages/allMessages" mode="validationMessageList" />
     <div class="formblock">
        <form action="{$model/@formAction}" method="post" onSubmit="return checkValidation();">
            <div class="fieldSet">
                <input type="checkbox" name="managerconfirmation" onclick="(input/@managerconfirmation" />
                <span>Random text next to checkbox is entered here</span><br />
            </div>

            <div class="fieldSet">
              <span>I want this message to show up in red if I do not click on the checkbox</span>
            </div>
           <div class="fieldSet">
              <input class="enterbtn" type="submit" value="Enter" />
              <div class="clearboth">&#160;</div>
           </div>
        </form>

     </div>
</div>
</xsl:template> 
```

我是否使用**xsl: if 测试**函数来测试复选框是否被勾选，如果是，我在这行代码中如何以及在何处执行此操作？非常感谢和感谢您的帮助，如果您理解我想说的话并且如果您能帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:15:42.603

您有 2 个选项，客户端或服务器端（或两者），但是您没有提供有关您在服务器端使用哪种语言以及它们如何联系在一起的任何信息。

因此，使用 Javascript 最快的方法是给**复选框**和**错误消息**一个`id`，然后引用 id 例如

```
function checkValidation()
{
   if(!document.getElementById('myCheckbox').checked)
   {
      document.getElementById('errorMessage').style.display = 'block';
      document.getElementById('errorMessage').style.color = '#CC0000';
      return false;
   }

   return true;
} 
```

对于更通用的解决方案，您可以遍历 dom 并通过类名来查找相关的**错误消息**div（如果需要），但它会更慢。

# android - 我可以使用 Corona sdk 制作非游戏应用程序吗？

> ID：12267102
> 
> 赞同：7
> 
> 时间：2012-09-04T15:50:36.000
> 
> 标签：android, ios, mobile, coronasdk

我可以使用 Corona [http://www.coronalabs.com/products/corona-sdk/](http://www.coronalabs.com/products/corona-sdk/)制作非游戏应用程序吗？我的意思是非游戏应用程序有很多按钮、表格、图表、报告、选择等等。

我需要它来创建跨平台的移动应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T15:59:27.980

使用 Corona SDK for Enterprise Applications 有一些限制。其中一些如下：

*   大多数知名的第三方库和框架都不能与 Corona SDK 一起使用。
*   底层操作系统提供的某些功能无法使用。
*   iOS 上可用的功能在 Android 上不可用。
*   第三方 SDK 总是落后于原生移动 SDK 引入的新功能

参考[这个](http://www.cutemachine.com/product-creation/learn-how-to-develop-apps-for-ios-and-android-with-corona-sdk/)

所以简而言之，您需要了解您的应用程序的完整规格，并研究是否可以使用 Corona SDK，然后开始您的项目

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-27T10:02:04.200

是的......你可以做到......它适用于所有类型的应用程序的好平台

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T15:54:00.853

从您指向的网站...

> Corona 以游戏创作而闻名，但对于其他应用程序类型（包括商业应用程序、实用程序应用程序、教育应用程序、电子书等）来说，它同样是一个强大的工具。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T23:58:02.740

Corona 和 Titanium 都是任何类型的实用程序或“非游戏”应用程序的绝佳选择。当然，每个人都有优点和缺点，这在很大程度上是见仁见智的问题。

也就是说，您可以在此处查看此页面：http: [//www.coronalabs.com/resources/case-studies/](http://www.coronalabs.com/resources/case-studies/)
- 在右侧，您将看到一堆在 Corona 中完成的应用程序，它们是实用程序/业务/非游戏应用。

有些确实非常令人印象深刻，有些非常成功，可能会帮助您下定决心。

# jquery-mobile - SSL中的jquery移动对话框

> ID：12267105
> 
> 赞同：0
> 
> 时间：2012-09-04T15:50:52.083
> 
> 标签：jquery-mobile, dialog

自从将我的 JQM 站点移动到我的实时服务器后，我遇到了一些问题！

我有一个对话框，使用我的测试站点上的下滑转换出现。当我移动到我的实时站点时，它就像一个没有过渡的外部页面一样加载。

原因是对话框的 URL。

如果我的 url 为[http://mysite.com/dialog.php](http://mysite.com/dialog.php)，它可以完美地与下滑过渡配合使用。

如果我的 url 为[https://mysite.com/dialog.php](https://mysite.com/dialog.php)它加载时没有转换。

看起来使用 https 而不是 http 会导致问题。

有人知道解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:17:47.053

Verify if your assets (js/css/images etc) are all served from secure url. There are browser policies that may restrict a secure url from loading non-secure assets.

# asp.net-mvc-3 - 是否可以设置 TextBoxFor 生成的输入类型

> ID：12267108
> 
> 赞同：26
> 
> 时间：2012-09-04T15:51:02.177
> 
> 标签：asp.net-mvc-3, html

我在表单中使用 ASP.NET MVC 3 TextBoxFor 并希望使用 type="email" 以便至少在某些移动设备上更轻松地输入，但找不到如何使用 TextBoxFor 进行设置。这不容易吗？

在视图中

```
@Html.LabelFor(m => m.Email)
@Html.TextBoxFor(m => m.Email) 
```

在模型中

```
[StringLength(50)]
public string Email { get; set; } 
```

（已经使用数据注释来保护 DB 中的大小约束）

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-04T15:57:33.517

尝试使用

```
@Html.TextBoxFor(m => m.Email, new { @type = "email" }) 
```

[http://msdn.microsoft.com/en-us/library/ee703538.aspx](http://msdn.microsoft.com/en-us/library/ee703538.aspx) (htmlAttributes)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-12T06:38:49.623

你用错了方法。

在视图中使用 EditorFor：

```
@Html.LabelFor(m => m.Email)
@Html.EditorFor(m => m.Email) 
```

在模型中，添加`[DataType( DataType.EmailAddress )]`Data Annotations 属性：

```
[DataType( DataType.EmailAddress )]
public string Email { get; set; } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T15:56:41.190

尝试添加`[DataType( DataType.EmailAddress )]`到电子邮件属性。

```
[DataType( DataType.EmailAddress )]
[StringLength(50)]
public string Email { get; set; } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T15:58:52.163

```
[StringLength(50)]
[DataType(DataType.EmailAddress, ErrorMessage = "Invalid Email Address")]
public string EmailAddress { get; set; } 
```

尝试添加这个。我认为它有效。

# jquery - 我的帖子页面翻了一番。导轨、ajax、jquery

> ID：12267109
> 
> 赞同：2
> 
> 时间：2012-09-04T15:51:08.403
> 
> 标签：jquery, ruby-on-rails, ajax

我在我的 Rails 博客中添加了 ajax。它只适用于一个帖子，但在我添加下一个之后发生了一些奇怪的事情。我在同一页面上获得了我的帖子的副本。

**Comments_controller.rb**

```
 class CommentsController < ApplicationController
    def create
        @posts = Post.all
        @post = Post.find(params[:post_id])
        @comment = @post.comments.create!(params[:comment])

        respond_to do |format|
            format.html {redirect_to @post}
            format.js
        end
    end

end 
```

# index.html.erb

```
<%= render 'post' %> 
```

**创建.js.erb**

```
 $('.post').html("<%= escape_javascript(render("posts/post")) %>") }); 
```

**_post.html.erb**

```
 <% @posts.each do |post| %>
        <div class="post">
            <p><strong> <%= post.title %> </strong>, posted <%= post.created_at.to_date %> </p> <br />
            <%= post.content %> <br />

            <%= simple_form_for [post, post.comments.build], :remote => true do |f| %>
                <%= f.input :content %>
                <%= f.button :submit %>
            <% end %>

            <%= render :partial => 'comment', :locals => {:post => post} %>
        </div>

    <% end %> 
```

**_comment.html.erb**

```
<div class = "comment">
  <ol>
    <% post.comments.each do |comment| %>
      <li> <%= comment.content %></li>
    <% end %>
  </ol>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:54:32.807

应

```
<% @posts.each do |post| %> 
```

在吗？如果您只是显示一页的帖子，您可以简单地使用`@post`. 如果不是这样，我误解了你的问题。

# sql - 如何构建这个 sql 查询

> ID：12267110
> 
> 赞同：-1
> 
> 时间：2012-09-04T15:51:09.040
> 
> 标签：sql, sql-server, sql-server-2005

我想在 sql 中查找从 25-08-2012 到 01-09-2012 的记录，我想按日期分组

这是我的查询

```
SELECT CONVERT(VARCHAR(10), date, 105) AS dt,
COUNT(id) AS cnt
FROM tablename
WHERE date BETWEEN CONVERT(DATETIME, '21-08-2012 00:00:00:000',103)
AND CONVERT(DATETIME, '01-09-2012 23:59:00:000' ,103)
GROUP BY CONVERT(VARCHAR(10), date, 105) 
```

我得到的结果是

```
dt                 cnt
01-09-2012         48
27-08-2012         1
28-08-2012         3
29-08-2012         11
30-08-2012         3 
```

但期待它

```
dt                 cnt
25-08-2012          0
26-08-2012          0
01-09-2012          48
27-08-2012          1
28-08-2012          3
29-08-2012         11
30-08-2012          3 
```

我如何修改上面的查询我也尝试过 CASE 但没有运气

非常感谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T16:15:00.617

结果中缺少这些日期的原因是表中没有它们的数据，但是，以下内容将确保您获得指定范围内的所有日期：

```
CREATE TABLE #tmp_dates ([date] datetime)  

DECLARE @dt_start datetime, @dt_end datetime, @dt_dif int  

SET @dt_start = CONVERT(DATETIME, '21-08-2012 00:00:00:000',103) 
SET @dt_end = CONVERT(DATETIME, '01-09-2012 23:59:00:000' ,103)  
SET @dt_dif = datediff(day,@dt_start,@dt_end)  

WHILE @dt_dif >= 0 BEGIN 
INSERT INTO #tmp_dates 
SELECT dateadd(day,@dt_dif,@dt_start) 
SET @dt_dif = @dt_dif - 1 
END  

SELECT CONVERT(VARCHAR(10), t2.[date], 101) AS dt,  COUNT(t1.id) AS cnt 
INTO #tmp_result 
FROM tablename t1  
RIGHT OUTER JOIN #tmp_dates t2  
ON CONVERT(VARCHAR(10), t1.[date], 101) = CONVERT(VARCHAR(10), t2.[date], 101) 
GROUP BY CONVERT(VARCHAR(10), t2.[date], 101)   
ORDER BY CONVERT(DATETIME,CONVERT(VARCHAR(10), t2.[date], 101)) ASC /* DESC */

SELECT convert(VARCHAR(10),CONVERT(DATETIME,dt),105) as dt,cnt FROM #tmp_result

DROP TABLE #tmp_dates 
DROP TABLE #tmp_result 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T15:59:03.740

不能直接修改您的查询以返回您想要的数据。要计算有问题的日期，目标表中必须有实际具有这些日期的记录；但是，在您的情况下，日期只是查询中的参数。因此，无法将它们合并到您的结果集中。

您必须创建一个辅助表，其中包含您需要数据的所有日期，然后将您的查询重新定义为从该日期表到目标表的左外连接。反过来，这将为您提供“日期”表中存在但目标表中不存在的日期的零计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T16:04:20.133

怎么用`IsNull()`？让我知道这个是否奏效。

```
SELECT CONVERT(VARCHAR(10), date, 105) AS dt,
ISNULL(COUNT(id),0) AS cnt
FROM tablename
WHERE date BETWEEN CONVERT(DATETIME, '21-08-2012 00:00:00:000',103)
AND CONVERT(DATETIME, '01-09-2012 23:59:00:000' ,103)
GROUP BY CONVERT(VARCHAR(10), date, 105) 
```

# python - Python 中 IF-ELSE 块的缩进

> ID：12267119
> 
> 赞同：4
> 
> 时间：2012-09-04T15:51:20.440
> 
> 标签：python, indentation

我是 Python 新手，我正在使用 Python进行[NLP 。](https://en.wikipedia.org/wiki/Natural_language_processing)我在 Python中编写*if-else块时出错。*当我当时只写一个*if*块时，它工作正常：

```
if xyzzy.endswith('l'):
    print xyzzy 
```

输入冒号 ( `:`) 后，我按下`Enter`它，它会自动将我带到正确的缩进。

但是当我在打印语句后按下键后尝试向它添加一个*else*块时`Enter`，它认为它只是一个*IF*块的语句，所以它给了我不正确的缩进，因为我想要一个*else*块，而当我试图写 else 阻止我自己时，它给了我这个错误。

```
else:
   ^ 
```

`IndentationError: unexpected indent`

写完print statement后我该怎么办？`Enter`显然不起作用，因为它正在将光标向前移动，而当我用来`space`指向正确的指针时，它给了我一个错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T15:52:42.677

从您的帖子中很难看出问题所在，但 an`if-else`的格式如下

```
 if someCondition:
     do_something       # could be a single statement, or a series of statements
 else:
     do_something_else  # could be a single statement, or a series of statements 
```

即，`else`需要*与*相应的`if`.

请参阅此[Python 文档/教程](http://docs.python.org/tutorial/controlflow.html)，`if`以及[其他教程](http://www.tutorialspoint.com/python/python_if_else.htm)。

有时，当您的编辑器为您自动缩进并且您也手动编辑时，事情可能会变得一团糟，因此您必须弄清楚您的编辑器如何处理缩进（例如，它总是使用`tabs`还是空格？，如果您点击返回等会发生什么）。

此外，请*注意混合制表符和空格*，这也会导致问题（很难发现，因为两者都是“不可见的”）

随着您更新的帖子：

```
 if xyzzy.endswith('l'):
       print xyzzy
   else:
       something_else 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T15:58:46.953

正确缩进并不是真正的 Python 问题，而是您用于源代码的编辑器的问题。

大多数了解 Python 的编辑器会在冒号后正确添加一级缩进（如您所见）。因为您可以在该代码块中包含任意数量的语句，所以编辑器无法知道何时“缩进” `else`.

在开始输入之前，您必须通过在该行上按退格键或`Shift`+来告诉编辑器将该行缩进。`Tab`

如果您在`else`编写其余代码之后插入该部分，请绝对确定您用于缩进的字符与`if`语句相同。如果`if`语句以空格缩进，请使用相同数量的空格`else`。如果`if`语句缩进有一个或多个制表符，请为该`else`语句使用相同数量的制表符。不要混合使用空格和制表符进行缩进。

不要仅仅因为这些行“看起来”就好像它们的缩进相同，就认为它们*的*缩进相同。一种可以使用空格，一种可以使用制表符（或某种组合）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T15:53:18.863

`else`应该`if`与它耦合的缩进级别相同：

```
if x:
    # Do something
else:
    # Do something else 
```

在你的情况下，

```
if xyzzy.endswith('l'):
    print xyzzy
else:
    # Something else 
```

即使您的编辑器为您自动缩进，您仍然应该取消缩进以使代码在语法上正确。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-16T14:25:54.597

> 当我使用空间来指向正确的指针时，它给了我一个错误

当然。使用空格永远不会造成“换行符”，通常这是 Unix 系统中的 \n 。如果您在不同的编辑器中打开 .py 文件（例如 Windows 中的记事本），您会看到 else 语句与 print 在同一行。

> `Enter`显然不起作用，因为它正在向前移动光标

*按正确的退格键次数以达到与IF*语句相同的缩进级别。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-18T14:14:10.467

我不完全同意接受的答案。是的，缩进在 Python 中非常重要，但是要声明`if-else`必须始终以这种格式显示，这有点过分了。

只要您不做任何需要在`if`,`elif`或`else`.

这里有些例子：

```
choice = 1
# if with one-liner
if choice == 1: print('This is choice 1')

# if-else with one-liners
if choice == 1: print('This is choice 1')
else: print('This is a choice other than 1')

# if-else if with one-liners
if choice == 1: print('This is choice 1')
elif choice == 2: print('This is choice 2')

# if-else if-else with one-liners
if choice == 1: print('This is choice 1')
elif choice == 2: print('This is choice 2')
else: print('This is a choice other than 1 and 2')

# Multiple simple statements on a single line have to be separated by a semicolumn (;) except for the last one on the line
if choice == 1: print('First statement'); print('Second statement'); print('Third statement') 
```

通常不建议在一行中打包太多语句，因为那样会失去 Python 的一大特点——代码的可读性。

另请注意，上述示例也可以轻松应用于`for`和`while`。`if`如果您使用**三元条件运算符**，您可以更进一步，对单行块进行一些疯狂的嵌套。

以下是操作员通常的样子：

```
flag = True
print('Flag is set to %s' % ('AWESOME' if True else 'BORING')) 
```

基本上，它创建了一个简单的`if-else`语句。如果您需要更多分支（但不是复杂的分支），您可以将它与您的单线之一嵌入。

我希望这能稍微澄清一下情况，什么是允许的，什么是不允许的。;)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-10T21:37:42.863

即使缩进看起来正确，我也一直收到此错误。

在[Notepad++](https://en.wikipedia.org/wiki/Notepad%2B%2B)中查看有一个选项可以查看空格和制表符。该错误是由混合空格和制表符以创建缩进引起的。在每一行中用空格替换制表符有助于消除错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-16T10:36:26.863

实际上，这是一个 Python [IDLE](https://en.wikipedia.org/wiki/IDLE) UI 问题：一旦你`Enter`在*if*块完成后点击，接下来的*else*语句已经与*if*语句一致。无需提供任何制表符或空格来进行缩进。下面是图片供参考。

[![在此处输入图像描述](../Images/a8e68af87db52360178bb5d25c952f16.png)](https://i.stack.imgur.com/wYxLq.png)

# javascript - 为什么我没有收到对 Comet 服务器流事件的实时响应？

> ID：12267120
> 
> 赞同：2
> 
> 时间：2012-09-04T15:51:23.253
> 
> 标签：javascript, ajax, html, comet

我有一个流式传输事件的 CGI 脚本：

```
#!/usr/bin/python
...
print 'Content-Type: text/event-stream\n'

while (True):
    delay()
    print 'event: item'
    print 'data: ' + get_random_event()
    print '' 
```

从命令行，它以随机间隔（每隔几秒）发送随机事件。

但是，我有以下 JavaScript：

```
var source = new EventSource('feed.cgi');

source.addEventListener('message', function(current_event)
    {
    alert(current_event.data);
    }, false); 
```

这从来没有让我警觉。Chrome JavaScript 控制台中没有错误，但到目前为止，我从未明显认识到监听服务器脚本的代码已收到事件。

你对我如何得到这些有什么建议吗？

- 编辑 -

我可能应该给出第一个 CGI 脚本来完成。FireFox 说“Firefox 无法在 http://[deleted]/feed.cgi 建立与服务器的连接。” 但是我可以正常执行位于同级目录中的 CGI 脚本，并且 Apache 最细粒度的目录设置仍然位于两者的父目录上，并且意味着允许具有 .cgi 扩展名的脚本作为 CGI 运行。并且脚本设置为模式 0755。

在行为增加后添加文件刷新似乎不会改变脚本的接收。

```
#!/usr/bin/python

import random
import sys
import time

timescale = 5

names = [
    'Adam',
    'Bob',
    'Carol',
    'David',
    'Eddie',
    'Frank',
    'George',
    'Harry',
    'Ike',
    'Jim',
    'Kenny',
    'Larry',
    'Mary',
    'Nancy',
    'Oliver',
    'Peter',
    'Quincy',
    'Roger',
    'Sam',
    'Thomas',
    'Uncle',
    'Vincent',
    'William',
    'Xavier',
    'Yogi',
    'Zachary',
    ]

notifications = [
    'applied for a position at ACME.',
    'went to an interview at ACME.',
    'accepted an offer from ACME.',
    ]

def delay():
    time.sleep((random.random() + random.random()) * timescale)

def get_random_event():
    result = '<div class="activity"><span class="name">'
    result += random.choice(names)
    result += '</span> '
    result += random.choice(notifications)
    result += '</div>'
    return result

print 'Content-Type: text/event-stream\n'

while (True):
    print 'event: item'
    print 'data: ' + get_random_event()
    print ''
    sys.stderr.flush()
    delay() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:11:39.547

从我们的代码和[W3chools Server Sent Event 文档](http://www.w3schools.com/html/html5_serversentevents.asp)开始，我构建了一个示例，该示例通过以下修改（使用 lighttpd）在 chomium 和 firefox 中成功运行：

1.  在打印末尾添加一个'\n'
2.  刷新标准输出而不是标准错误

所以时间应该是：

```
while (True):
    print 'event: item' + '\n'
    print 'data: ' + get_random_event() + '\n'
    print ''
    sys.stdout.flush()
    delay() 
```

# php - php 脚本正在解析来自 RTE (tt_news) 的内容，但内部链接未显示为说话 url

> ID：12267124
> 
> 赞同：2
> 
> 时间：2012-09-04T15:51:44.267
> 
> 标签：php, typo3, tt-news, realurl

我有一篇带有内部链接的新闻文章。在 RTE 中，我看到了类似的链接

[http://www.yourdomain.com/?id=3](http://www.yourdomain.com/?id=3)

在 html 文本模式下。问题是这个链接也出现在前端。RealURL 应该将此链接转换为类似

[http://www.yourdomain.com/products/](http://www.yourdomain.com/products/)

RTE的内容目前是这样解析的

```
$parseObj = t3lib_div::makeInstance('t3lib_parsehtml_proc'); 
$txt = $parseObj->TS_links_rte($result['bodytext']);
$txt = $parseObj->TS_transform_rte($txt); 
```

我读到我应该使用这样的东西

```
$pObj = t3lib_div::makeInstance('tslib_pibase');
$txt = $pObj->pi_RTEcssText($result['bodytext']); 
```

但我不知道如何访问此功能。我明白了

`Fatal error: Call to a member function parseFunc() on a non-object in /home/myuser/www/home/typo3/sysext/cms/tslib/class.tslib_pibase.php on line 1384`

这样做的正确方法是什么？如何访问该功能`pi_RTEcssText`？我必须使用类吗？没有课程还有其他方法吗？

# 编辑：

我用 TemplaVoila 创建了一个新模板并定义`lib.newscontent`为 TS 对象路径。

## TS 主模板

```
includeLibs.user_news = fileadmin/templates/php_scripts/news/class.news.php

lib.newscontent = USER_INT
lib.newscontent {
  userFunc = user_news->main
  userFunc.bodytext.parseFunc < lib.parseFunc_RTE
} 
```

## 类.news.php

```
<?

class user_news {

    var $cObj;

    private $conf;

    function main($content,$conf) {
        $this->conf = $conf; 
        $this->setPreferences();        
        $content .= $this->aktuelleNews();

        return $content;
    }

    private function aktuelleNews() {
        $res = $GLOBALS['TYPO3_DB']->exec_SELECTquery(
                '*',         // SELECT ...
                'tt_news',     // FROM ...
                'pid=22 AND deleted=0 AND hidden=0',    // WHERE...
                '',            // GROUP BY...
                'datetime DESC'    // ORDER BY...
        );

        $i = 1;
        $out_list = '<ul id="news">';
        while ($data = $GLOBALS['TYPO3_DB']->sql_fetch_assoc($res)) {
            $date = date("d.m.Y",$data['datetime']);
            $out_list .= '<li><a href="#section'.$i.'">'.$date.': '.$data['title'].'</a></li>';
            $out_detail.= $this->outputnewsdetail($data,$i);

            $i++;
        }
        $out_list .= '</ul>';
        return $out_list . $out_detail;
    }

    private function outputnewsdetail($result,$count){
        $this->cObj->start($result, 'tt_news');

        $bodytext = $this->cObj->stdWrap($result['bodytext'], $this->conf['bodytext']);
        $bodytext = $this->cObj->parseFunc($bodytext,$GLOBALS['TSFE']->tmpl->setup['lib.']['parseFunc_RTE.']);

        return $bodytext;

    }

    private function setPreferences() {

    }

}
?> 
```

## 本地配置文件

```
include(PATH_site.'fileadmin/templates/php_scripts/news/class.news.php'); 
```

## 剩下的问题

为什么 TS Main Template 中的渲染部分不起作用？我用了

```
$this->cObj->parseFunc($bodytext,$GLOBALS['TSFE']->tmpl->setup['lib.']['parseFunc_RTE.']); 
```

得到我的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:40:09.823

我会比较喜欢：

```
$txt = $this->cObj->stdWrap($result['bodytext'], $this->conf['bodytext.']); 
```

你需要在你的主要方法： $this->conf = $conf;

在您的 TypoScript 中，将 parseFunc 添加到正文中：

```
 plugin.tx_yourplugin_pi1 {
    bodytext.parseFunc < lib.parseFunc_RTE
 } 
```

主要思想是使用内容元素使用的常用 parseFunc。所以你有相同的渲染。另一个好处是，您的应用程序更加灵活。

就像旁注一样。值得为此制作一个 lokal cObj 并交出完整的数据。因此，您可以在 TypoScript 中使用所有字段。在您的情况下，Fe 字段 = 正文。

```
# create lokal cObj - do not override the original data!
$cObj = t3lib_div::makeInstance('tslib_cObj');
foreach ($row = ...) {
   # override data array with row. Every field in $row is now accesible via 
   # TypoScript field = fieldname
   $cObj->start($row, $tableName);
   $content .= $cObj->stdWrap($row['bodytext'], $this->conf['bodytext.']);
}

# TS Setup:
# in your case you could do somesthing like:
plugin.tx_yourplugin_pi1 {
    bodytext.parseFunc < lib.parseFunc_RTE
    bodytext.wrap = <div class="hide">|</div>
    bodytext.prepend = TEXT
    bodytext.prepend.field = bodytext
    bodytext.prepend.stripHtml = 1
    bodytext.prepend.crop = 30 | ... | 1
    bodytext.prepend.wrap = <span title="|" onclick="showBodytext()">info</span>
} 
```

如果您在用户函数中需要它，请尝试如下：

```
function user_yourfunction($content,$conf) {
    $result = *magic*
    $cObj = t3lib_div::makeInstance('tslib_cObj');
    $cObj->start($result, 'your table name');
    return $cObj->stdWrap($result['bodytext'], $conf['bodytext.']);
} 
```

在 TypoScript 中：

```
includeLibs.something = media/scripts/example_callfunction.php
page.10 = TEXT
page.10 {
   value = Hello World
   postUserFunc = user_yourfunction
   postUserFunc.bodytext.parseFunc < lib.parseFunc_RTE
} 
```

# java - 使用 XStream 重复元素反序列化

> ID：12267127
> 
> 赞同：1
> 
> 时间：2012-09-04T15:51:53.907
> 
> 标签：java, xml, deserialization, xstream

在向另一个进程发送消息时，我使用 XStream 1.4.3 在 Java 和 XML 文档之间移动。大多数一切都有效。但是，我似乎无法获得一份回复文档来正确反序列化。这是回复：

```
<AddToBatchResponse>
    <MerchantOrderNumber>1525675</MerchantOrderNumber>
    <MerchantOrderNumber>1525676</MerchantOrderNumber>
    <ResponseReasonCode>100</ResponseReasonCode>
    <AuthResponseType>S</AuthResponseType>
</AddToBatchResponse> 
```

当 XStream 到达第 2 个 MerchantOrderNumber 时，它会给出错误消息“重复字段 MerchantOrderNumber”。我尝试了不同的设计，但它就是行不通。这是相关的Java代码：

来自调用类的片段

```
xstream.alias("AddToBatchResponse", AddToBatchResponse.class);
xstream.alias("MerchantOrderNumber", OrderNumber.class);
xstream.addImplicitCollection(AddToBatchResponse.class, "orderNumbers");
response = (AddToBatchResponse)xstream.fromXML(responseXml); 
```

AddToBatchResponse.java（省略 getter 和 setter）

```
public class AddToBatchResponse {
protected List<OrderNumber> orderNumbers;
protected String ResponseReasonCode; 
protected String AuthResponseType;  
    ... 
```

订单号.java

```
public class OrderNumber {
protected String MerchantOrderNumber;
... 
```

有人可以告诉我我做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:36:34.803

好吧，没有答案 - 所以这就是我所做的：

我使用正则表达式 + 字符串操作来提取和处理代码中的额外元素。不优雅，不可取，但它有效。如果有人找到这个问题的答案，请分享。

# c# - 插入/提交新记录在插入模式下无法在详细信息视图上工作

> ID：12267129
> 
> 赞同：0
> 
> 时间：2012-09-04T15:52:01.390
> 
> 标签：c#, asp.net, insert, detailsview, insert-update

我有一个始终处于插入模式的详细信息视图。用户将始终只输入新记录，从不编辑或查看。我遇到的问题是当我按下插入按钮（在填写完字段后添加新记录）时没有任何反应。没有输入记录，页面显示没有变化。

由于回发和提交值的这些问题，我一直在研究这个细节视图并没有取得太大进展。任何帮助表示赞赏

```
protected void Page_Load(object sender, EventArgs e)
   {
   if (!IsPostBack)
    {
       DetailsView1.DataBind();
    }
   }

protected void DetailsView1_ItemInserted(object sender, DetailsViewInsertedEventArgs e)
   {
     ObjectDataSource1.DataBind();
     DetailsView1.DataBind();
     SqlDataSource1.DataBind();
   }

protected void DetailsView1_DataBound(object sender, EventArgs e)
   {
      TextBox employeeID = (TextBox)(DetailsView1.FindControl("TextBox17"));
      DropDownList approverID = (DropDownList)(DetailsView1.FindControl("DropDownList4"));

      if (DetailsView1.CurrentMode == DetailsViewMode.Insert)
      {
        var CurrUser = "";

        Account.Login uusr = new Account.Login();
        CurrUser = uusr.User.Identity.Name.ToString().ToUpper();

        employeeID.Text = CurrUser.Substring(3, 3);

        string supusrid = "";

        DataHandler.DataHandler Dt = new DataHandler.DataHandler();
        supusrid = Dt.SelectRequestApproverForm(supusrid);

        approverID.SelectedValue = supusrid;
      }
  }

 protected void DropDownList6_SelectedIndexChanged(object sender, EventArgs e)
   {
   }

protected void Button2_Click(object sender, EventArgs e)
   {
      DetailsView1.DataSource = null;
      DetailsView1.DataBind();
   }

protected void Button2_Click1(object sender, EventArgs e)
   {
      Button3.Visible = true;
   }

protected void Button3_Click(object sender, EventArgs e)
   {
      DetailsView1.Visible = true;
      DetailsView1.ChangeMode(DetailsViewMode.Insert);
      if (DetailsView1.CurrentMode.Equals(DetailsViewMode.Insert))
        {
          Button3.Visible = false;
          Button4.Visible = false;
          DetailsView2.Visible = true;
          DetailsView3.Visible = true;
        }
   }

protected void DropDownList5_SelectedIndexChanged1(object sender, EventArgs e)
   {
   }

protected void DropDownList6_DataBound(object sender, EventArgs e)
   {
   }

protected void DropDownList6_DataBound1(object sender, EventArgs e)
   {
     DropDownList lvreason = (DropDownList)(DetailsView1.FindControl("DropDownList5"));
     DropDownList lvtype = (DropDownList)(DetailsView1.FindControl("DropDownList6"));
     //null reference to the object
     if (!IsPostBack)
       {
         string selectedValue = lvtype.SelectedValue;
         if (selectedValue == "4 " || selectedValue == "1F")
         {
              SqlDataSource1.SelectParameters["LEAVECODE"].DefaultValue = selectedValue;
              DetailsView1.Fields[4].Visible = true;
              lvreason.Visible = true;
         }
         else
         {
              DetailsView1.Fields[4].Visible = false;
         }
         lvtype.Items.Add(new ListItem("EDUCATION LEAVE"));
         lvtype.Items.Add(new ListItem("EXCUSED LEAVE"));
         lvtype.Items.Add(new ListItem("FUNERAL LEAVE"));
         lvtype.Items.Add(new ListItem("JURY DUTY"));
         lvtype.Items.Add(new ListItem("ON THE JOB INJURY LEAVE"));
         lvtype.Items.Add(new ListItem("PERSONAL HOLIDAY"));
         lvtype.Items.Add(new ListItem("SICK LEAVE"));
         lvtype.Items.Add(new ListItem("VACATION LEAVE"));
      }
  }

protected void DetailsView1_ItemInserting(object sender, DetailsViewInsertEventArgs e)
  {
     DropDownList lvtype = (DropDownList)(DetailsView1.FindControl("DropDownList6"));
     DropDownList lvreason = (DropDownList)(DetailsView1.FindControl("DropDownList5"));
     if (lvtype.SelectedValue != "")
     {
       if (lvtype.SelectedValue == "3 ")
       {
         lvreason.Text.Equals("VACATION").ToString().Trim().ToUpper();
         lvtype.Text.Equals("VACATION").ToString().Trim().ToUpper();
         //DetailsView1.Fields[4].Visible;
        }
        else if (lvtype.SelectedValue == "1E")
        {
          lvreason.Text.Equals("EDUCATION LEAVE").ToString().Trim().ToUpper();
          lvtype.Text.Equals("EDUCATION LEAVE").ToString().Trim().ToUpper();
        }
        else if (lvtype.SelectedValue == "1N")
        {
          lvreason.Text.Equals("ON THE JOB INJURY LEAVE").ToString().Trim().ToUpper();
          lvtype.Text.Equals("ON THE JOB INJURY LEAVE").ToString().Trim().ToUpper();
        }
        else if (lvtype.SelectedValue == "1J")
        {
          lvreason.Text.Equals("JURY DUTY").ToString().Trim().ToUpper();
          lvtype.Text.Equals("JURY DUTY").ToString().Trim().ToUpper();
        }
        else if (lvtype.SelectedValue == "1X")
        {
          lvreason.Text.Equals("EXCUSED LEAVE").ToString().Trim().ToUpper();
          lvtype.Text.Equals("EXCUSED LEAVE").ToString().Trim().ToUpper();
        }
        else if (lvtype.SelectedValue == "1P")
        {
           lvreason.Text.Equals("PERSONAL HOLIDAY").ToString().Trim().ToUpper();
           lvtype.Text.Equals("PERSONAL HOLIDAY").ToString().Trim().ToUpper();
        }
     }
  } 
```

asp代码：

```
<td class="style2" colspan="2">
  <asp:DetailsView ID="DetailsView1" runat="server" 
  DataSourceID="ObjectDataSource1" DataKeyNames="requestid"
  Height="29px" Width="928px" AutoGenerateRows="False" CellPadding="4" ForeColor="#333333"
  GridLines="None" Style="margin-right: 0px; text-align: left; margin-top: 0px;" 
  ondatabound="DetailsView1_DataBound" 
  onitemcommand="DetailsView1_ItemCommand" 
  oniteminserting="DetailsView1_ItemInserting" >
     <Fields>
      <asp:TemplateField AccessibleHeaderText="Request ID" HeaderText="Leave Request ID" Visible="False">
        <EditItemTemplate>
        </EditItemTemplate>
        <InsertItemTemplate>
          <asp:Label ID="Label19" runat="server" Text='<%# Bind("requestid") %>'></asp:Label>
          <asp:TextBox ID="TextBox165" runat="server" Text='<%# bind("requestid") %>'></asp:TextBox>
        </InsertItemTemplate>
        <ItemTemplate>
           <asp:Label ID="Label1" runat="server" Text='<%# Bind("requestid") %>'></asp:Label>
        </ItemTemplate>
      </asp:TemplateField>
      <asp:TemplateField AccessibleHeaderText="Employee ID" HeaderText="Employee ID" >
        <EditItemTemplate>
        </EditItemTemplate>
        <InsertItemTemplate>
          <asp:Label ID="Label21" runat="server" Text='<%# bind("emppid") %>'></asp:Label>
          <asp:TextBox ID="TextBox17" runat="server" Text='<%# bind("emppid") %>'></asp:TextBox>
        </InsertItemTemplate>
        <ItemTemplate>
           <asp:Label ID="Label2" runat="server" Text='<%# bind("emppid") %>'></asp:Label>
        </ItemTemplate>
      </asp:TemplateField>
      <asp:TemplateField AccessibleHeaderText="Approver ID" HeaderText="Approver ID">
        <EditItemTemplate>
        </EditItemTemplate>
        <InsertItemTemplate>
          <asp:DropDownList ID="DropDownList4" runat="server" style="text-transform:uppercase;" DataSourceID="SqlDataSourceApprover"
           DataTextField="APPROVNAME" DataValueField="APPROVERID" SelectedValue='<%# Bind("approverid") %>'>
          </asp:DropDownList>
        </InsertItemTemplate>
        <ItemTemplate>
          <asp:Label ID="Label3" runat="server" Text='<%# Bind("approverid") %>'></asp:Label>
        </ItemTemplate>
      </asp:TemplateField>
      <asp:TemplateField HeaderText="Leave Type" SortExpression="reqleavecode">
        <EditItemTemplate>
        </EditItemTemplate>
        <InsertItemTemplate>
          <asp:DropDownList ID="DropDownList6" runat="server" Height="20px"
          onselectedindexchanged="DropDownList6_SelectedIndexChanged" Width="171px" 
          ondatabound="DropDownList6_DataBound" AutoPostBack="True" 
          SelectedIndex='<%# bind("reqleavecode") %>'>
           <asp:ListItem  Text="-- SELECT LEAVE --" Value ="-1" Selected="True"></asp:ListItem>
            <asp:ListItem Value="1E">EDUCATION LEAVE</asp:ListItem>
            <asp:ListItem Value="1X">EXCUSED LEAVE</asp:ListItem>
            <asp:ListItem Value="1F">FUNERAL LEAVE</asp:ListItem>
            <asp:ListItem Value="1J">JURY DUTY</asp:ListItem>
            <asp:ListItem Value="1N">ON THE JOB INJURY LEAVE</asp:ListItem>
            <asp:ListItem Value="1P">PERSONAL HOLIDAY</asp:ListItem>
            <asp:ListItem Value="4 ">SICK LEAVE</asp:ListItem>
            <asp:ListItem Value="3">VACATION</asp:ListItem>
          </asp:DropDownList>
          <asp:Label ID="Label26" runat="server" Text='<%# bind("reqleavecode") %>'></asp:Label>
        </InsertItemTemplate>
        <ItemTemplate>
          <asp:Label ID="Label9" runat="server" Text='<%# Bind("reqleavecode") %>'></asp:Label>
        </ItemTemplate>
      </asp:TemplateField>
      <asp:TemplateField AccessibleHeaderText="Leave Type" HeaderText="Leave Reason" Visible="False">
         <ItemTemplate>
          <asp:Label ID="Label4" runat="server" Text='<%# Bind("leavetype") %>'></asp:Label>
         </ItemTemplate>
         <EditItemTemplate>
         </EditItemTemplate>
         <InsertItemTemplate>
           <asp:DropDownList ID="DropDownList5" runat="server" AppendDataBoundItems="True" 
           AutoPostBack="True" DataSourceID="SqlDataSource1" DataTextField="REASON" 
           DataValueField="REASON" Height="19px" 
           onselectedindexchanged="DropDownList5_SelectedIndexChanged1" 
           SelectedValue='<%# Bind("leavetype") %>' Width="163px">
           </asp:DropDownList>
           <asp:RequiredFieldValidator ID="RequiredFieldValidator1Reason" runat="server" 
           ControlToValidate="DropDownList5" ErrorMessage="*Leave Reason Required" 
           ForeColor="Red"></asp:RequiredFieldValidator>
        </InsertItemTemplate>
      </asp:TemplateField>
      <asp:TemplateField AccessibleHeaderText="start date" HeaderText="Leave Date">
       <EditItemTemplate>     
       </EditItemTemplate>
       <InsertItemTemplate>
         <asp:TextBox ID="TextBox5" runat="server" Text='<%# Bind("lstdate",  "{0:MM/dd/yyyy}") %>' Height="21px"
         Width="67px"></asp:TextBox>
         <asp:CalendarExtender ID="TextBox5_CalendarExtender" runat="server" Enabled="True" TargetControlID="TextBox5">
         </asp:CalendarExtender>
         <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" 
         ControlToValidate="TextBox5" ErrorMessage="*Leave Date Required" 
         ForeColor="Red"></asp:RequiredFieldValidator>
         <asp:CompareValidator ID="CompareValidator18" runat="server" 
         ControlToCompare="TextBox7" ControlToValidate="TextBox5" 
         ErrorMessage="Leave date cannot be after start date" ForeColor="Red" 
         Operator="LessThanEqual" ToolTip="Must choose start date before end date"></asp:CompareValidator>
       </InsertItemTemplate>
       <ItemTemplate>
          <asp:Label ID="Label7" runat="server" Text='<%# Bind("lenddate") %>'></asp:Label>
       </ItemTemplate>
     </asp:TemplateField>
     <asp:TemplateField AccessibleHeaderText="lenddate" HeaderText="Return Date">
        <EditItemTemplate>
        </EditItemTemplate>
        <InsertItemTemplate>
          <asp:TextBox ID="TextBox7" runat="server" 
          Text='<%# Bind("lenddate",  "{0:MM/dd/yyyy}") %>' Height="21px"
          Width="67px"></asp:TextBox>
          <asp:CalendarExtender ID="TextBox7_CalendarExtender" runat="server" Enabled="True" TargetControlID="TextBox7">
          </asp:CalendarExtender>
          <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" 
          ControlToValidate="TextBox7" ErrorMessage="*Return Date Required" 
          ForeColor="Red"></asp:RequiredFieldValidator>
          <asp:CompareValidator ID="CompareValidator1" runat="server" 
          ControlToCompare="TextBox5" ControlToValidate="TextBox7" 
          ErrorMessage="Return date cannot be before start date" ForeColor="Red" 
          Operator="GreaterThanEqual"></asp:CompareValidator>
       </InsertItemTemplate>
       <ItemTemplate>
          <asp:Label ID="Label15" runat="server" Text='<%# Bind("lsttime") %>'></asp:Label>
       </ItemTemplate>
          </asp:TemplateField>
          <asp:TemplateField AccessibleHeaderText="Leave Time" HeaderText="Leave Time">
       <EditItemTemplate>
       </EditItemTemplate>
       <InsertItemTemplate>
          <asp:TextBox ID="TextBox15" runat="server" Text='<%# Bind("lsttime") %>' Width="85px"
          Height="22px" ToolTip="Type 'A' or 'P' to switch AM/PM"></asp:TextBox>
          <asp:MaskedEditExtender ID="TextBox15_MaskedEditExtender" runat="server" TargetControlID="TextBox15"
          Mask="99:99" MaskType="Time" AcceptAMPM="True" ErrorTooltipEnabled="True" 
          CultureAMPMPlaceholder="" CultureCurrencySymbolPlaceholder="" 
          CultureDateFormat="" CultureDatePlaceholder="" CultureDecimalPlaceholder="" 
          CultureThousandsPlaceholder="" CultureTimePlaceholder="" Enabled="True" />
          <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" 
          ControlToValidate="TextBox15" ErrorMessage="*Invalid Time" ForeColor="Red" 
          ValidationExpression="^((([0]?[1-9]|1[0-2])(:|\.)[0-5][0-9]((:|\.)[0-5][0-9])?( )?(AM|am|aM|Am|PM|pm|pM|Pm))|(([0]?[0-9]|1[0-9]|2[0-3])(:|\.)[0-5][0-9]((:|\.)[0-5][0-9])?))$"></asp:RegularExpressionValidator>
        </InsertItemTemplate>
        <ItemTemplate>
          <asp:Label ID="Label8" runat="server" Text='<%# Bind("lendtime") %>'></asp:Label>
        </ItemTemplate>
     </asp:TemplateField>
     <asp:TemplateField AccessibleHeaderText="Return Time" HeaderText="Return Time">
        <EditItemTemplate>
        </EditItemTemplate>
        <InsertItemTemplate>
          <asp:TextBox ID="TextBox8" runat="server" Text='<%# Bind("lsttime") %>' Width="85px"
          Height="22px" ToolTip="Type 'A' or 'P' to switch AM/PM"></asp:TextBox>
          <asp:MaskedEditExtender ID="TextBox8_MaskedEditExtender" runat="server" 
          AcceptAMPM="True" CultureAMPMPlaceholder="" CultureCurrencySymbolPlaceholder="" 
          CultureDateFormat="" CultureDatePlaceholder="" CultureDecimalPlaceholder="" 
          CultureThousandsPlaceholder="" CultureTimePlaceholder="" Enabled="True" 
          ErrorTooltipEnabled="True" Mask="99:99" MaskType="Time" 
          TargetControlID="TextBox8" />
          <asp:RegularExpressionValidator ID="RegularExpressionValidator10" 
          runat="server" ControlToValidate="TextBox8" ErrorMessage="*Invalid Time" 
          ForeColor="Red" ValidationExpression="^((([0]?[1-9]|1[0-2])(:|\.)[0-5][0-9]((:|\.)[0-5][0-9])?( )?(AM|am|aM|Am|PM|pm|pM|Pm))|(([0]?[0-9]|1[0-9]|2[0-3])(:|\.)[0-5][0-9]((:|\.)[0-5][0-9])?))$"></asp:RegularExpressionValidator>
       </InsertItemTemplate>
       <ItemTemplate>
          <asp:Label ID="Label10" runat="server" Text='<%# Bind("standby") %>'></asp:Label>
       </ItemTemplate>
         </asp:TemplateField>
         <asp:TemplateField AccessibleHeaderText="Standby" HeaderText="On Standby">
       <EditItemTemplate>
       </EditItemTemplate>
       <InsertItemTemplate>
         <asp:DropDownList ID="DropDownList1" runat="server" DataSourceID="SqlDataSource10"
         DataTextField="&quot;Y/N&quot;" DataValueField="&quot;Y/N&quot;" SelectedValue='<%# BIND("standby") %>'>
         </asp:DropDownList>
       </InsertItemTemplate>
       <ItemTemplate>
         <asp:Label ID="Label12" runat="server" Text='<%# Bind("rsndecline") %>'></asp:Label>
       </ItemTemplate>
         </asp:TemplateField>
         <asp:TemplateField AccessibleHeaderText="Reason Decline" 
         HeaderText="Request Decline Reason" InsertVisible="False">
      <EditItemTemplate>
      </EditItemTemplate>
      <InsertItemTemplate>
         <asp:TextBox ID="TextBox12" runat="server" Text='<%# Bind("rsndecline") %>' Visible="False"></asp:TextBox>
      </InsertItemTemplate>
      <ItemTemplate>
         <asp:Label ID="Label13" runat="server" Text='<%# Bind("status") %>'></asp:Label>
      </ItemTemplate>
     </asp:TemplateField>
     <asp:TemplateField AccessibleHeaderText="Status" HeaderText="Request Status" InsertVisible="False">
         <EditItemTemplate>
         </EditItemTemplate>
         <InsertItemTemplate>
            <asp:TextBox ID="TextBox13" runat="server" Text='<%# Bind("status") %>' Visible="False"></asp:TextBox>
         </InsertItemTemplate>
         <ItemTemplate>
            <asp:Label ID="Label14" runat="server" Text='<%# Bind("empremarks") %>'ToolTip="Additional information pertaining to leave request"></asp:Label>
         </ItemTemplate>
       </asp:TemplateField>
       <asp:TemplateField AccessibleHeaderText="empremarks" HeaderText="Leave Request Remarks">
         <EditItemTemplate>
         </EditItemTemplate>
         <InsertItemTemplate>
             <asp:TextBox ID="TextBox14" runat="server" style="text-transform:uppercase;" Text='<%# Bind("empremarks") %>' 
             TextMode="MultiLine" Height="47px" Width="452px" 
             ToolTip="Additional information pertaining to leave request."></asp:TextBox>
         </InsertItemTemplate>
         <ItemTemplate>
           <asp:Button ID="Button1" runat="server" CausesValidation="False" 
           CommandName="Edit" Height="21px" Text="Edit" Width="65px" />
           <asp:Button ID="Button2" runat="server" CausesValidation="False" 
            CommandName="New" Height="21px" Text="New" Width="65px" />
         </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField ShowHeader="False">
         <EditItemTemplate>
         </EditItemTemplate>
         <InsertItemTemplate>
             <asp:Button ID="Button1" runat="server" CommandName="Insert" Text="Submit Request" />
             <asp:Button ID="Button2" runat="server" CausesValidation="False" 
             CommandName="Cancel" Height="21px" onclick="Button2_Click1" Text="Cancel" />
         </InsertItemTemplate>
         <ItemTemplate>
             <asp:Label ID="Label5" runat="server" Text='<%# Bind("lstdate") %>'></asp:Label>
         </ItemTemplate>
             </asp:TemplateField>
       </Fields>
     </asp:DetailsView>
   </td>
 </tr>
                    <tr>
                        <td class="style2" colspan="2">
                            <asp:Button ID="Button3" runat="server" Height="21px"  onclick="Button3_Click" 
                                Text="With Pay Leave Request" />
                        &nbsp;&nbsp;
                            <asp:Button ID="Button4" runat="server" Height="21px"  onclick="Button4_Click" 
                                Text="Without Pay Leave Request" style="margin-left: 13px" Width="221px" />
                        </td>
                    </tr>
                </table>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:ConnectionStringEvent %>" 
            ProviderName="<%$ ConnectionStrings:ConnectionStringEvent.ProviderName %>" 
            SelectCommand="SELECT REASON, LEAVECODE FROM LEAVRSN">
            <SelectParameters>
                <asp:Parameter Name="LEAVECODE" Type="String" />
            </SelectParameters>
        </asp:SqlDataSource>

        <asp:SqlDataSource ID="SQLLEAVECODE" runat="server" 
           ConnectionString="<%$ ConnectionStrings:ConnectionStringEvent %>" 
           ProviderName="<%$ ConnectionStrings:ConnectionStringEvent.ProviderName %>"                
           SelectCommand="SELECT LEAVETYPE, LEAVECODE FROM LVTYPE ORDER BY LEAVECODE">
        </asp:SqlDataSource>

        <asp:SqlDataSource ID="SqlDataSourceApprover" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionStringEvent %>"
            ProviderName="<%$ ConnectionStrings:ConnectionStringEvent.ProviderName %>" 
            SelectCommand="SELECT APPROVERID, APPROVNAME FROM APPROVER ORDER BY APPROVERID">
        </asp:SqlDataSource>

        <asp:SqlDataSource ID="SqlDataSource10" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionStringEvent %>"
            ProviderName="<%$ ConnectionStrings:ConnectionStringEvent.ProviderName %>" 
            SelectCommand="SELECT * FROM YNSELECT ORDER BY ALPH"></asp:SqlDataSource>
        <asp:ObjectDataSource ID="ObjectDataSource1111" runat="server">

        </asp:ObjectDataSource>
                <br />
                <asp:Label ID="Label17" runat="server" ForeColor="#999999" 
                    Text="Exhibit B PP-8"></asp:Label>
                <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" DeleteMethod="DeleteRequestForm"
                    InsertMethod="InsertRequestForm" SelectMethod="SelectRequestEMPID" TypeName="DataHandler.DataHandler"  
                    UpdateMethod="UpdateRequestFormLastName" OldValuesParameterFormatString="original_{0}">
                    <DeleteParameters>
                        <asp:Parameter Name="requestid" Type="Int64" />
                    </DeleteParameters>
                    <InsertParameters>
                        <asp:Parameter Name="requestid" Type="Int64" />
                        <asp:Parameter Name="emppid" Type="Decimal" />
                        <asp:Parameter Name="leavetype" Type="String" />
                        <asp:Parameter Name="lstdate" Type="DateTime" />
                        <asp:Parameter Name="lenddate" Type="DateTime" />
                        <asp:Parameter Name="lsttime" Type="String" />
                        <asp:Parameter Name="lendtime" Type="String" />
                        <asp:Parameter Name="standby" Type="String" />
                        <asp:Parameter Name="status" Type="String" />
                        <asp:Parameter Name="rsndecline" Type="String" />
                        <asp:Parameter Name="empremarks" Type="String" />
                        <asp:Parameter Name="approverid" Type="String" />
                        <asp:Parameter Name="reqleavecode" Type="Int32" />
                    </InsertParameters>
                    <SelectParameters>
                       <%-- <asp:Parameter Name="emppid" Type="Decimal" />--%>
                       <asp:QueryStringParameter Name="emppid" QueryStringField="emppid" Type="Decimal" />
                    </SelectParameters>
                    <UpdateParameters>
                        <asp:Parameter Name="requestid" Type="Int64" />
                        <asp:Parameter Name="emppid" Type="Decimal" />
                        <asp:Parameter Name="leavetype" Type="String" />
                        <asp:Parameter Name="lstdate" Type="DateTime" />
                        <asp:Parameter Name="lenddate" Type="DateTime" />
                        <asp:Parameter Name="lsttime" Type="String" />
                        <asp:Parameter Name="lendtime" Type="String" />
                        <asp:Parameter Name="requesreason" Type="String" />
                        <asp:Parameter Name="standby" Type="String" />
                        <asp:Parameter Name="status" Type="String" />
                        <asp:Parameter Name="rsndecline" Type="String" />
                        <asp:Parameter Name="empremarks" Type="String" />
                        <asp:Parameter Name="approverid" Type="String" />
                        <asp:Parameter Name="LASTNAME" Type="String" />
                    </UpdateParameters>
                </asp:ObjectDataSource>
                            <asp:ObjectDataSource ID="ObjectDataSource2" runat="server" 
                                SelectMethod="SelectNameEmployeeForm" 
                                TypeName="DataHandler.DataHandler">
                                <SelectParameters>
                                    <asp:Parameter Name="empid" Type="Decimal" />
                                    <asp:Parameter Name="firstname" Type="String" />
                                    <asp:Parameter Name="lastname" Type="String" />
                                </SelectParameters>
                            </asp:ObjectDataSource>
                <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
                </asp:ToolkitScriptManager>
        <asp:Label ID="Label27" runat="server" ></asp:Label>
    </asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-17T13:19:19.290

protected void Page_Load(object sender, EventArgs e) {
if (!IsPostBack) { DetailsView1.DataBind(); } }

删除这个 DetailsView1.DataBind();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:00:43.020

我会尝试删除`DataBind()`您的`ItemInserted Event handler`. 我相信您只想查看`DataBind()`详细信息。

# ui-automation - 如何在 Sahi 中选择字体节点？

> ID：12267130
> 
> 赞同：1
> 
> 时间：2012-09-04T15:52:03.740
> 
> 标签：ui-automation, sahi

我正在使用 Sahi 在 IE8 中记录我的操作。我的页面包含此标记：

```
<td id="ButtonText" class="myClass">
    <font title="unique title" onclick="CallThis()">ButtonText</font>
</td> 
```

当我单击上面定义的按钮时，Sahi 记录：

```
_click(_cell("Button Text")); 
```

但是当我回放这个时，按钮没有被点击。然而，

```
_assertExists(_cell("Button Text")); 
```

返回真。

我在 concat.js 文件中添加了以下行，以尝试使其检测字体节点：

```
this.addAD({tag: "FONT", type: "null", event:"click", name: "_font", attributes: ["sahiText", "title|alt", "id", "index", "href", "className"], action: "_click", value: "sahiText"}); 
```

但这似乎没有任何效果（我已经重新启动了 Sahi）。我对正在测试的页面没有任何控制权，我不确定是选择了 td 节点还是 font 节点。

如何触发字体节点的 onclick 事件？

编辑：我已将 _font 添加到 sahi/config/normal_functions.txt

使用 IE 工具手动调整页面以使 onclick 甚至在 td 上也会导致记录相同的步骤，但它现在会播放它。

```
<td id="ButtonText" class="myClass" onclick="CallThis()">
    <font title="unique title">ButtonText</font>
</td> 
```

不幸的是，我无法对页面进行任何更改，我仍然需要播放字体节点上存在的 onclick 事件。

两个都

```
_font("ButtonText");
_font("unique title"); 
```

给

> [异常] [对象错误]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:45:17.017

该问题的解决方案是删除“null”周围的引号：

```
this.addAD({tag: "FONT", type: null, event:"click", name: "_font", attributes: ["sahiText", "title|alt", "id", "index", "href", "className"], action: "_click", value: "sahiText"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:39:54.727

在 sahi/config/normal_functions.txt 中添加 _font，重启 Sahi 并检查。

问候， 纳拉扬

# c++ - 模板成员默认初始化

> ID：12267136
> 
> 赞同：4
> 
> 时间：2012-09-04T15:52:24.173
> 
> 标签：c++, templates, initialization, default-value

假设我有以下模板

```
template <typename T>
class{
   T t;
}; 
```

现在，我想添加一个构造函数，用它的类型的默认值初始化 t。也就是说，对于数值类型，t 应该用 初始化`0`，对于指针，t 应该用 初始化`nullptr`。最后，可能还有其他类型，例如结构。在这里，一个好的初始化将是默认构造函数（无论如何都会调用它，所以我不必在这里做任何事情）。

总之，我正在寻找这样的东西：

```
template<typename T>
class X{
    T t;
    X() : t(default_value<T>::value);
} 
```

正如我想象的语法所指出的那样，我认为可以使用具有不同专业化的某种模板来承载默认值。但是如何处理结构和类呢？由于我已经指定`t(...)`，默认构造函数不再是一个选项。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T15:53:59.850

你可以做

```
X() : t() { } 
```

和/或 C++11 中的这个

```
X() : t { } { } // see Johannes Schaub's comments about this 
```

这会将初始化（或者它是默认初始化？）值初始化`t`为它的类型的默认值，无论是内置的 0，数组的一系列（值？默认）初始化，还是使用用户的默认构造函数-定义的类型。

# android - Android TimePicker 自定义分钟步长

> ID：12267137
> 
> 赞同：3
> 
> 时间：2012-09-04T15:52:25.363
> 
> 标签：android, android-ui

默认的 Android 时间选择器，每分钟步长为 1。我想将其更改为 5 分钟的步长。因此，通过单击“+”按钮，时间 09:20 变为 09:25。

有简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:57:28.390

您必须编写自己的 TimePicker。我不确定您是否可以扩展现有的 TimePicker 并自行处理按钮事件。以下是您问题的更详细答案：

[Android - TimePicker 分钟到 15](https://stackoverflow.com/questions/2580216/android-timepicker-minutes-to-15)

# jboss - 删除 Jboss 7 的登陆页面

> ID：12267139
> 
> 赞同：3
> 
> 时间：2012-09-04T15:52:32.240
> 
> 标签：jboss, jboss7.x

我已经在 jboss 7 中部署了我的应用程序。它位于 URL www.myappurl.com/appname/ 中。但是如果我访问 www.myappurl.com/index.html，我会看到 Jboss 的登录页面，上面写着“欢迎使用 JBoss AS 7”。

如何删除该页面？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T12:50:20.087

基本上，您必须将您正在使用的虚拟服务器的**enable-welcome-root属性设置为 false，并在****jboss-web.xml**中指定应用程序绑定到根 Web 上下文（“/”）。请参阅本[教程](http://www.mastertheboss.com/jboss-web-server/how-to-deploy-a-web-application-on-the-root-context-on-jboss-as-7)。
希望能帮助到你。弗朗切斯科

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:07:35.337

您必须部署一个**上下文路径**设置为**/的应用程序**

**更新**

在互联网上查看一些资源，例如这个[http://stephou.wordpress.com/2012/05/05/how-to-deploy-to-jboss-as7-default-root-context/](http://stephou.wordpress.com/2012/05/05/how-to-deploy-to-jboss-as7-default-root-context/)说你必须先修改你的standalone.xml 否则它会引发异常。

根据个人经验，我只是将我的 webapp 的上下文路径设置为 / (root)，它工作得很好

# javascript - 使用 HTML5 JS 框架进行本地存储？

> ID：12267145
> 
> 赞同：3
> 
> 时间：2012-09-04T15:52:49.977
> 
> 标签：javascript, html, local-storage

我想使用 HTML5 本地存储，并且一直在研究许多不同的 JS 框架，例如 Backbone、Batman、Underscore。有一大堆新的 JS 框架，我不确定要使用哪一个。

我需要做很多本地存储工作（CRUD），所以我更喜欢一个 JS 框架来为我处理活动记录、关系等。

此外，我想要构建的应用程序将有很多表单，并且严重依赖从 HTML5 表单和 JSON 对象捕获的输入。

因此，是否有一个很好的框架可以考虑到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:12:04.377

这取决于您希望构建什么。我对 ember.js 和 localStorage 的这个库很满意：[https](https://github.com/emberjs/data) ://github.com/emberjs/data 但我相信你可以找到与主干、脊椎、蝙蝠侠等类似的库/插件。

顺便说一句，如果您希望使用本地存储（以及稍后使用诸如 indexedDB 之类的异步工作），您可能需要检查[http://brian.io/lawnchair/](http://brian.io/lawnchair/)这是非常灵活的库，可以使用客户端存储选项。

# iphone - 在不使用 reloadData 的情况下实时调整 UITableViewCell 的大小？

> ID：12267146
> 
> 赞同：8
> 
> 时间：2012-09-04T15:52:58.900
> 
> 标签：iphone, uitableview, uitextview, resignfirstresponder

首先，如果答案已经存在，请原谅我（老实说，我一直在工作和寻找大约两个星期）。

而现在，情况：

我有 a`UITextView`作为 a 中 a 的子`UITableViewCell`视图`UITableView`。是第一`UITextView`响应者（当用户键入时）。

我设置了它（通过委托协议方法），以便在每个键入的字符之后，`rowHeight`重新计算单元格（正确并在 tableViews 的 rowHeight 委托协议中）。到目前为止一切都很好。

然后，我希望重新加载该单元格（或刷新，无论术语是什么）*，而无需*放弃其子视图`UITextView`，作为第一响应者。

围绕该问题的不令人满意的解决方案：

我可以使用然后`[tableView reloadData]`模拟*它*（这样用户甚至不会注意到 textView 已重新加载）并且 rowHeight 是完美的，但这给我带来了很多问题（尤其是确保光标确实每次用户键入字符时都不会跳到最后，*并且*由于 textView 辞职，自动更正会强制执行其建议）。`[textView becomeFirstResponder]`

 **有没有办法重绘或调整一个`UITableViewCell`（动态改变它的`rowHeight`）而不导致它的任何子视图作为第一响应者辞职？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-06T19:24:32.237

使用 tableView 的`[tableView beginUpdates]`and`[tableView endUpdates]`将解决这个问题。有关更多信息，请参阅[此答案](https://stackoverflow.com/a/2063776/442328)。**

# python - 代码风格 - 在其他函数中“隐藏”函数

> ID：12267149
> 
> 赞同：5
> 
> 时间：2012-09-04T15:53:06.690
> 
> 标签：python, coding-style, scoping

最近我一直在做这样的事情：

```
import Tkinter
class C(object):
    def __init__(self):
        self.root = Tkinter.Tk()
        def f():
            print 'hello'
        self.button = Tkinter.Button(master=self.root, command=f, text='say hello') 
```

而不是这样的：

```
import Tkinter
class C(object):
    def __init__(self):
        self.root = Tkinter.Tk()
        self.button = Tkinter.Button(master=self.root, command=self.f, text='say hello')
    def f(self):
        print 'hello' 
```

这个问题并不特定于 Tkinter，但它是一个很好的例子。该函数`f`仅用作按钮的回调，因此我选择在内部定义它`__init__`。这样，只有内部的代码`__init__`甚至知道`f`' 的存在——外部范围不会开始被名称弄得一团糟，用户也不需要关心大量设计为内部的方法。

我的问题是：这算是好的风格吗？我很担心，因为我有一个带有很多按钮的 GUI 类 -`__init__`开始看起来很长，有很多本地函数定义。我应该使用更合适的替代方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T15:54:25.777

在上下文中执行此类操作的典型方法`Tkinter`是使用`lambda`函数。

```
self.button = Tkinter.Button(master=self.root, 
                             command=lambda:sys.stdout.write("Hello!\n"),
                             text='say hello') 
```

本质上，这与您的第一个示例实际上是相同的，因此，如果您更喜欢第一种方式，那就去吧。我认为在这种情况下创建一个新方法通常不是惯用的（除非您实际上需要将实例传递给回调——在这种情况下，您*应该*采用第二种方式）。

这里有两件事需要担心。首先是可读性。如果`__init__`太杂乱而无法阅读，那么您就有问题了。您可以将这些函数移动到模块级别（以 an 为前缀`_`以防止它们在`from module import *`上下文中导入）并`lambda`在必要时将局部变量作为参数绑定到这些函数。

如果`__init__`没有变得混乱，那么请随意将功能放在那里。将函数放在那里确实意味着每次创建新实例时都会创建一个*新函数*`lambda`（与在 gui 中）。

第二件要担心的是命名空间混乱。但是，如果您的模块太大以至于将这些本地函数移动到模块级函数会产生命名空间问题，那么您的模块太大而无法开始。只要您在函数前加上下划线（请参阅上面的建议），在其他模块中导入此模块时也不应该有命名空间问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T15:59:10.140

在这种情况下，它是无害的。不过，总的来说，我会避免它有两个原因：

1）作为类成员的回调定义更具可读性（尤其是当您使用 pydoc 进行调查时）

2）在另一个内部创建函数会引入更多闭包（从调用上下文继承的变量）。

# javascript - js库支持各种数据结构？（就像java中的番石榴）

> ID：12267153
> 
> 赞同：3
> 
> 时间：2012-09-04T15:53:32.063
> 
> 标签：javascript, jquery, jquery-plugins, data-structures, guava

来自 Java，我真的很喜欢 Guava 提供的丰富数据结构集合所提供的灵活性。js 或 jquery 中是否有“类番石榴”库？

注意：我听说过闭包，它似乎有点沉重——还有更简单的吗？（或者关闭真的是我需要的吗？）

注意 2：“丰富的数据结构集合”是指排序的映射和集合、多映射（允许重复键）和多集合（允许具有多个条目的集合 - 看起来很奇怪但实际上非常有用！）等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T16:27:10.290

如果*JS 的“丰富的数据结构集合”是*`Array`指在​​ JavaScript和s 和 JavaScript 本身上操作的实用程序`Object`，那么我推荐[Underscore.js](http://underscorejs.org/)：

> Underscore 是一个用于 JavaScript 的实用工具带库，它提供了大量的函数式编程支持。(...) Underscore 提供了 60 多种函数，它们支持常见的功能怀疑：`map`, `select`, `invoke`— 以及更专业的帮助器：函数绑定、javascript 模板、深度相等测试等。它委托给内置函数（如果存在），因此现代浏览器将使用`forEach`、`map`、`reduce`、`filter`、`every`和 .`some``indexOf`

它还具有类似 Set 的函数，如`union`、`intersection`和`difference`、类型检查函数 isXXX （`isArray`等）、函数好东西以及更多你自己编写的东西，而无需这样的库。

Underscore 有干净的代码，经过良好测试并且现在[很流行](https://github.com/documentcloud/underscore/)，我每天在 JS 项目中使用它。

* * *

**问题编辑**后编辑：

我知道 Guava 有 multimaps、multiset 等，但它们都是 Java 设计的结果，很难在 JS 中编写这些集合的 1 对 1 实现。这是因为 Javascript**没有**：

*   静态类型，
*   Java 意义上的类，而是使用原型设计（参见[这个答案](https://stackoverflow.com/a/1249554/708434)），
*   接口（但另一方面具有作为一流对象的功能），
*   容易定义的对象相等（`var t1 = { test: 1 }, t2 = { test: 1 }; t1 === t2`is `false`）

所以很难编写通用的Set实现，更不用说Multiset或Multimap了。例如，有一些 Set 实现，例如[Closure 的 one](http://closure-library.googlecode.com/svn/docs/class_goog_structs_Set.html)或[this one](http://code.google.com/p/jshashtable/wiki/HashSet)，但它们并不完美 - 首先修改插入 Set 的元素（！），第二个不是主流，经过良好测试的项目（我个人从未使用过它所以不能多说）。

在 Javascript 中你只是做`var multimap = { key: [ 1, 2, 3.0 ], key2: [ 4, 'test', { bla: null }, 1 ] }`，因为语言设计你不能只是做`multimap.containsValue({ bla: null })`. 我提到 underscore.js 是因为它有 95% 的实用功能，你将永远使用 JS 集合，即数组和对象。如果您想要更多，只需使用[Closure 的 structs](http://closure-library.googlecode.com/svn/docs/namespace_goog_structs.html)，但库本身非常大。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-24T15:00:05.980

现在有一个更轻、更快的 Underscore.js 替代方案：Lo-Dash ( [http://lodash.com/](http://lodash.com/) )。

# visual-c++ - 转换为 COFF 期间失败：文件无效或损坏

> ID：12267158
> 
> 赞同：51
> 
> 时间：2012-09-04T15:53:43.463
> 
> 标签：visual-c++

当我尝试在 VS2010 中构建一个简单的程序时，编译成功但是当我尝试构建解决方案时它给了我这个错误：

```
LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-04-27T22:45:00.100

我有这个问题，我用[这个线程解决了它](https://stackoverflow.com/a/10890428/359170)

通过转到禁用增量链接

```
 Project Properties 
       -> Configuration Properties 
           -> Linker (General) 
              -> Enable Incremental Linking -> "No (/INCREMENTAL:NO)" 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2015-08-29T07:13:48.763

安装 dotnetframework4.5 后我遇到了这个问题。
打开路径如下：
*“C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin”*（在 64 位机器中）
或
*“C:\Program Files\Microsoft Visual Studio 10.0\VC\bin”*（在 32 位中machine)
在此路径中找到文件*cvtres.exe*并将其重命名为*cvtres1.exe*然后再次编译您的项目。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2012-12-08T21:20:32.360

此问题发生在 Visual Studio 2012 安装后。通过将 VS2010 中的 cvtres.exe 替换为 VS2012 中的 cvtres.exe 解决了该问题。

感谢“social.msdn”！

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-01-13T22:59:05.747

必须安装 VS 2010 SP1 才能让它再次为自己工作。蹩脚的微软。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-09-26T21:16:46.243

你也安装了 Visual Studio 2012 吗？如果是这样，2012 会影响您的 2010 IDE，可能是因为与 .NET 4.5 和 .NET 4.0 的兼容性问题。

请参阅[http://social.msdn.microsoft.com/Forums/da-DK/vssetup/thread/d10adba0-e082-494a-bb16-2bfc039faa80](http://social.msdn.microsoft.com/Forums/da-DK/vssetup/thread/d10adba0-e082-494a-bb16-2bfc039faa80)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-11-19T10:28:05.463

我正在使用 Visual Studio 2010。

当我安装 .NET 4.5 时，这发生在我身上。卸载 .NET 4.5 和安装 .NET 4.0 帮助了我，错误消息消失了。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-03-23T08:19:15.310

如果您也安装了 VS2012，旧的 cvtres 文件将不再工作。

> 尝试删除文件（我只是重命名）：
> C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\BIN\cvtres.exe

您还可以使用 /VERBOSE 链接器选项进行调试，以获取有关链接器错误的更多信息。在那里您应该会看到一条错误消息，表明对 cvtres 的调用失败。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-26T16:38:47.447

在我的情况下，这只是因为磁盘上没有足够的空间`cvtres.exe`来写入它必须写入的文件。

错误在此行之前

```
CVTRES : fatal error CVT1106: cannot write to file 
```

# external - NTFS/GPT 挂载以退出代码 13 退出

> ID：12267164
> 
> 赞同：6
> 
> 时间：2012-09-04T15:53:59.060
> 
> 标签：external, ntfs, mount, ubuntu-11.10, hdd

这是一个重复的帖子，因为我在 askubuntu.com 上没有得到任何帮助。

我有一个最近格式化为 NTFS 的 1TB 外置硬盘。直到现在，它一直安装在我的 Ubuntu 11.10 上。我没有进行任何更改来影响我的操作系统或我的 exhdd。

我得到的错误是：

```
Error mounting: mount exited with exit code 13: $MFTMirr does not match $MFT (record 0).
Failed to mount '/dev/sdb2': Input/output error
NTFS is either inconsistent, or there is a hardware fault, or it's a
SoftRAID/FakeRAID hardware. In the first case run chkdsk /f on Windows
then reboot into Windows twice. The usage of the /f parameter is very
important! If the device is a SoftRAID/FakeRAID then first activate
it and mount a different device under the /dev/mapper/ directory, (e.g.
/dev/mapper/nvidia_eahaabcc1). Please see the 'dmraid' documentation
for more details. 
```

我确实读过[**这个**](https://askubuntu.com/questions/19069/error-mounting-mount-exited-with-exit-code-13)和[**这个**](http://www.makeuseof.com/tag/fix-corrupted-windows-ntfs-filesystem-ubuntu/)。但两者都没有帮助。

我尝试安装`ntfsfix`，但不再存在这样的包。我从来没有在 Windows 机器上使用过这个硬盘。如果我需要使用另一台机器来解决这个问题，我可以使用 mac。

有什么建议吗？

这是我的 sudo fdisk -l 输出：GPT 到底是什么？我没有那样做。它曾经是NTFS。

```
Disk /dev/sda: 500.1 GB, 500107862016 bytes
255 heads, 63 sectors/track, 60801 cylinders, total 976773168 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x000586fb

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *        2148   961320312   480659082+  83  Linux
/dev/sda2       961320313   976773167     7726427+   5  Extended
/dev/sda5       961320314   976773167     7726427   83  Linux

WARNING: GPT (GUID Partition Table) detected on '/dev/sdb'! The util fdisk doesn't support GPT. Use GNU Parted.

Disk /dev/sdb: 1000.2 GB, 1000204886016 bytes
255 heads, 63 sectors/track, 121601 cylinders, total 1953525168 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0xcfd88605

   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1               1  1953525167   976762583+  ee  GPT 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-20T01:01:16.260

这是有效的：

1.  我首先需要得到`ntfs-3g`( `sudo apt-get install ntfs-3g`)
2.  运行`sudo fdisk -l`以找出挂载点的位置。我的是`/dev/sdb1`
3.  我跑了`ntfsfix -b /dev/sdb1`，这解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-13T13:58:31.993

> **挂载错误：挂载以退出代码 13 退出：$MFTMirr 与 $MFT (record 0) 不匹配**。挂载 '/dev/sda1' 失败：输入/输出错误
> NTFS 要么不一致，要么存在硬件故障，要么是 SoftRAID/FakeRAID 硬件。在第一种情况下，在 Windows 上运行*chkdsk /f*然后重新启动到 Windows**两次**。*/f*参数的用法很重要！如果设备是 SoftRAID/FakeRAID，则首先激活它并在 /dev/mapper/ 目录下挂载不同的设备（例如 /dev/mapper/nvidia_eahaabcc1）。
> 有关更多详细信息，请参阅“dmraid”文档。

**解决方案 ：-**

1.  须藤 fdisk -l

2.  sudo ntfsfix /dev/select_disk_name

3.  要查找磁盘名称：
    转到仪表板 -> 磁盘实用程序 -> 单击磁盘 -> 然后显示设备 /Dev/***

# database - 如何将一个数据库的一个表设计结构用于另一个数据库表结构

> ID：12267167
> 
> 赞同：0
> 
> 时间：2012-09-04T15:54:01.100
> 
> 标签：database, sql-server-2008

我有 2 个数据库调用 CUSTOMER_NEW 和 CUSTOMER_OLD。我想在 CUSTOMER_NEW 表中使用 cust_info 设计的表，而无需再次重新创建所有字段。除了编写在该新数据库中使用该表的代码之外，我还想通过任何方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:58:00.683

```
select * into customer_new.newtable from customer_old.originaltable 
```

# java - 试图测试队列持久性。消费者断点时无法发送消息

> ID：12267168
> 
> 赞同：4
> 
> 时间：2012-09-04T15:54:02.653
> 
> 标签：java, jms, activemq, spring-jms

我正在尝试测试 ActiveMQ 的队列持久性。

我有一个具有独特消费者的嵌入式 ActiveMQ 服务器。此嵌入式服务器从许多其他 JVM 应用程序接收 JMS 消息。

它工作正常，消费者应用程序接收通知。

所以我试图测试消息的持久性。我在消费者的 MessageListener 上放置了一个（远程）断点，以便我可以将许多消息排入队列并使 ActiveMQ 服务器崩溃。在服务器重新启动时，我希望所有排队的消息都能够被使用，而不是丢失。

然后我尝试了那个测试。我在第一条消息发送时进入了那个断点。但是对于我尝试发送的所有消息，我在生产者端得到以下堆栈跟踪：

```
Exception in thread "main" org.springframework.jms.UncategorizedJmsException: Uncategorized exception occured during JMS processing; nested exception is javax.jms.JMSException: Wire format negotiation timeout: peer did not send his wire format.
    at org.springframework.jms.support.JmsUtils.convertJmsAccessException(JmsUtils.java:316)
    at org.springframework.jms.support.JmsAccessor.convertJmsAccessException(JmsAccessor.java:168)
    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:469)
    at org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:534)
    at org.springframework.jms.core.JmsTemplate.convertAndSend(JmsTemplate.java:612)
    at org.springframework.jms.core.JmsTemplate.convertAndSend(JmsTemplate.java:604)
    at com.xxxxxxxxxxx.mobilepush.client.RealClientTest.main(RealClientTest.java:29)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: javax.jms.JMSException: Wire format negotiation timeout: peer did not send his wire format.
    at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:62)
    at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1380)
    at org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1466)
    at org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:308)
    at org.springframework.jms.support.JmsAccessor.createSession(JmsAccessor.java:196)
    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:457)
    ... 9 more
Caused by: java.io.IOException: Wire format negotiation timeout: peer did not send his wire format.
    at org.apache.activemq.transport.WireFormatNegotiator.oneway(WireFormatNegotiator.java:98)
    at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68)
    at org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81)
    at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:86)
    at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1351)
    ... 13 more 
```

我不明白为什么当我的消费者处于断点时我的生产者会被阻止。

我的经纪人 uri 是：`mobilepush.activemq.broker.transport.connector.uri=tcp://0.0.0.0:61616`

生产者通过 tcp 连接到代理。与代理共处一地的消费者通过`vm://localhost`.

* * *

我的配置很简单：

```
SERVER:

    <!--  lets create an embedded ActiveMQ Broker -->
    <amq:broker useJmx="false" persistent="true">
        <amq:transportConnectors>
            <amq:transportConnector uri="${mobilepush.activemq.broker.transport.connector.uri}" />
        </amq:transportConnectors>
        <amq:persistenceAdapter>
            <amq:kahaPersistenceAdapter directory="${mobilepush.activemq.broker.queue.persistence.directory}" maxDataFileLength="100 Mb"/>
        </amq:persistenceAdapter>
    </amq:broker> 
```

* * *

```
CONSUMER:
(management namespace and xebia class it only a JMX decorator)

<bean id="connectionFactory" class="fr.xebia.management.jms.SpringManagedConnectionFactory">
        <property name="connectionFactory">
            <bean class="org.apache.activemq.ActiveMQConnectionFactory" >
                <property name="brokerURL" value="${mobilepush.activemq.broker.uri}"/>
            </bean>
        </property>
    </bean>

    <bean id="pushConsumer" class="com.xxxxxxxxxxxxxxx.mobilepush.messaging.jms.PushConsumer">
        <property name="jmsPushMessageConverter" ref="jmsPushMessageConverter"/>
        <property name="pushDelegate" ref="directPushDelegate"/>
    </bean>

    <management:executor-service id="pushConsumerExecutor"
                                 pool-size="${mobilepush.consumer.thread.min}-${mobilepush.consumer.thread.max}" keep-alive="60" />

    <jms:listener-container
            task-executor="pushConsumerExecutor"
            connection-factory="connectionFactory"
            acknowledge="auto"
            container-class="fr.xebia.springframework.jms.ManagedDefaultMessageListenerContainer">
        <jms:listener destination="mobilepush.queue" ref="pushConsumer" method="onMessage" />
    </jms:listener-container> 
```

* * *

```
PRODUCER:

    <bean id="connectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory"  >
        <property name="brokerURL" value="${mobilepush.activemq.broker.uri}"/>
    </bean>

    <bean id="mobilePushJmsTemplate" class="org.springframework.jms.core.JmsTemplate">
        <property name="defaultDestination" ref="mobilePushQueue"/>
        <property name="messageConverter" ref="jmsPushMessageConverter"/>
        <property name="connectionFactory">
            <!-- lets wrap in a pool to avoid creating a connection per send -->
            <bean class="org.springframework.jms.connection.SingleConnectionFactory">
                <property name="targetConnectionFactory">
                    <ref local="connectionFactory" />
                </property>
            </bean>
        </property>
    </bean> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T09:26:52.590

我发现了问题！

我在嵌入式 ActiveMQ 使用者上放置的远程断点是一个默认断点，其中suspend-policy=all。

由于消费者和服务器在同一个 JVM 上运行，我还暂停了所有 ActiveMQ 服务器线程！

解决方案是使用断点suspend-policy=thread，这样只有消费者线程被挂起，服务器线程可以继续运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T22:16:18.620

在强制断开连接之前，activemq 代理将等待几秒钟让客户端发送有线格式。在您的连接 URL 上尝试添加以下参数以将该时间延长到允许您进行调试的时间：

```
tcp://localhost:61616?wireFormat.maxInactivityDurationInitalDelay=30000 
```

整数值是等待的毫秒数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T16:01:58.140

`"java.io.IOException: Wire format negotiation timeout: peer did not send his wire format"`似乎很清楚。您正在阻塞作为网络连接另一端的客户端线程。服务器在尝试与客户端交互时遇到网络超时。网络连接是一种很难通过任意挂起线程进行调试的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-09T08:07:10.200

我通过使用最新的 logback-core 和 logback-classic jar 文件（1.1.2）解决了这个问题

# java - java类在2-3分钟后连续调用rest api

> ID：12267171
> 
> 赞同：1
> 
> 时间：2012-09-04T15:54:26.473
> 
> 标签：java, multithreading

我有一个 servlet 类正在访问通过休息公开的 url。我必须以 2 -3 分钟的间隔连续调用它，并将响应保存在堆栈中。我认为，我必须借助线程机制来做到这一点。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:59:19.267

一种选择是使用 TimerTask: [Timer shedule](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html#schedule%28java.util.TimerTask,%20java.util.Date%29)

> TimerTask -- 可以由 Timer 安排一次或重复执行的任务

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:15:08.573

您可以使用**[计时器](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)**。只需扩展[TimerTask](http://docs.oracle.com/javase/6/docs/api/java/util/TimerTask.html)并将其传递给 Timer。如果您希望任务在应用程序启动时启动，您可以编写一个 ServletContextListener 来安排任务。

# jquery - jQuery - 用逗号包裹？

> ID：12267175
> 
> 赞同：2
> 
> 时间：2012-09-04T15:54:34.927
> 
> 标签：jquery

我正在使用以下 jQuery 将元素中的每个字母包装在一个跨度中：

```
$('.num .stat').children().andSelf().contents().each(function() {
  if(this.nodeType == 3) {
    var $this = $(this);
    $this.replaceWith($this.text().replace(/(\w)/g, '<span class="s-$&">$&</span>'));
  }    
}); 
```

我将使用它来包装数字。我遇到的问题是，当我的号码中有逗号（例如 23,000）时，逗号没有被换行。

知道如何将逗号包裹在 a 中`<span>`吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:56:20.527

逗号不在 的子集中`\w`。您可以使用`.`以匹配所有字符：

```
$this.text().replace(/(.)/g, '<span class="s-$&">$&</span>') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:57:05.720

\w 不包括逗号，试试这个： /([\w\,])/g

# javascript - .autocomplete 不是一个函数 MVC4

> ID：12267179
> 
> 赞同：0
> 
> 时间：2012-09-04T15:54:53.320
> 
> 标签：javascript, razor, asp.net-mvc-4

**_Layout.cshtml**

```
<script src = "@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
   <script src = "@Url.Content("~/Scripts/jquery-ui-1.8.23.custom.min.js")" type="text/javascript"></script>
   <link href="@Url.Content("~/Content/smoothness/jquery-ui-1.8.23.custom.css")" rel="stylesheet" type="text/css" /> 
```

**我的模型**

```
@using (Html.BeginForm()){<fieldset>
    <legend>Person Search</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Name)
    </div>
    <p>
         <input type="submit" value="Search" />
        @*@ko.Html.Button("Search", "SearchPerson", "Person")*@
    </p> 
```

}

**视图中的脚本**

```
 <script src = "@Url.Content("~/Scripts/jquery.autocomplete.js")" type="text/javascript"></script> 
```

```
 <script type="text/javascript">
 $(document).ready(function () {
     $("#Name").autocomplete('@Url.Action("PersonNameAutocomplete", "Person")', { minChars: 3 });
}); 
```

错误是 TypeError: $("#Name").autocomplete is not a function

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T21:13:12.163

我解决了错误并将脚本放在另一个区域，所以

```
 @section Scripts 
 {
     @Scripts.Render("~/bundles/jqueryval")
     <script src = "@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
     <script src = "@Url.Content("~/Scripts/jquery-ui-1.8.23.custom.min.js")" type="text/javascript"></script>
     <link href="@Url.Content("~/Content/smoothness/jquery-ui-1.8.23.custom.css")" rel="stylesheet" type="text/css" />
 } 
```

# .htaccess - 如何防止使用 .htaccess 大量下载某个文件

> ID：12267184
> 
> 赞同：0
> 
> 时间：2012-09-04T15:55:01.993
> 
> 标签：.htaccess, download, bots

我需要知道如何防止使用 .htaccess 重复文件下载，或者如果不是通过 .htaccess 而不是其他方法。

我维护的一个站点在单个 PDF 文件上的点击量超过 9,000 次，占该站点总带宽使用量的 80% 以上，我相信大部分点击量来自同一个 IP 地址。我已经禁止了IP，但这显然不是一个有效的解决方案，因为总是有代理，而且我只能在事后这样做。

所以我想做的是限制单个 IP 在给定时间段内尝试下载指定文件或文件类型的次数。这可以用.htaccess 来完成吗？如果没有，我还有什么其他选择？

编辑：我将请求重定向到服务器端脚本的建议，该脚本将通过数据库跟踪 IP 请求听起来是一个不错的选择。任何人都可以推荐现有的脚本或库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:59:43.610

如果您有一些服务器端代码流输出您的文件，您就有机会控制发送的内容。我不知道 .htaccess 解决方案（这并不意味着没有）。

我的背景是 Microsoft 产品，所以我会编写一些 ASP.NET 代码来接受文件名作为参数并返回结果。由于这将是我的代码，我可以轻松访问数据库以跟踪我正在服务的 IP、文件的发送频率等。

这可以使用任何服务器端技术（PHP 等）轻松完成。

# algorithm - 在对象树中计算最大重复子树

> ID：12267185
> 
> 赞同：1
> 
> 时间：2012-09-04T15:55:05.927
> 
> 标签：algorithm, search, tree, similarity

我正在尝试解决在对象树中找到最大重复子树的问题。

通过对象树，我的意思是一棵树，其中每个叶子和节点都有一个名称。每个叶子都有一个类型和一个与该叶子相关联的该类型的值。每个节点都有一组按一定顺序的叶子/节点。

给定一个我们知道的对象树，其中有一个重复的子树。

重复是指 2 个或更多子树，它们在所有方面（名称/类型/子元素的顺序）都相似，但叶子的值。子树之间不能共享节点/叶子。

问题是识别这些最大高度的子树。

我知道详尽的搜索可以解决问题。我宁愿寻找更有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:35:23.423

您可以实现 dfs 遍历，为每个节点生成一个哈希值。将这些值与节点高度一起存储在一个简单的数组中。子树候选者是重复值，只需检查候选者是否正常，因为两个不同的子树可能会产生相同的哈希值。
假设叶子和内部节点都是类型 Node 并且标准访问和遍历功能可用：

```
procedure dfs_update( node : Node, hashmap : Hashmap )
begin
  if is_leaf(node) then
    hashstring = concat("LEAF",'|',get_name_str(node),'|',get_type_str(node))
  else // node is an internal node
    hashstring = concat("NODE",'|',get_name_str(node))
    for each child in get_children_sorted(node)
      dfs_update(child,hashmap)
      hashstring = concat(hashstring,'|',get_hash_string(hashmap,child))
    end for
  end if
  // only a ref to node is added to the hashmap, we could also add
  // the node's height, hashstring, whatever could be useful and inapropriate
  // to keep in the Node ds
  add(hashmap, hash(hashstring),node)
end 
```

棘手的部分是在 a 之后`dfs_update`，我们必须通过降低高度来获取 hasmap 中的碰撞节点列表，并逐个检查它们是否真的*重复*。

# c# - 将文件从 UI 流式传输到数据库，而不会给服务器带来内存问题

> ID：12267193
> 
> 赞同：0
> 
> 时间：2012-09-04T15:55:30.833
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-3

我正在将文件上传到 SQL Server

1.  我正在从 UI 层流式传输文件。
2.  说到业务层，这里是实现。

    HttpWebRequest 请求 = WebRequest.Create(postUrl) as HttpWebRequest;

    流 requestStream = request.GetRequestStream();

    字节[]缓冲区=新字节[8 * 1024]；

    国际化;

    而 ((len = fileToUpload.File.Read(buffer, 0, buffer.Length)) >0)

    {

    requestStream.Write(buffer, 0, len);

    requestStream.Flush();

    }

    返回 request.GetResponse() 作为 HttpWebResponse；

我将输入流分块为 8KB 并将其发送到响应流。

我的问题是，如果业务层fileToUpload.File的长度为1 GB，那么它会物理存储在内存中并影响性能吗？

或者我应该以 8KB 的形式将文件从 UI 分块到内存，以便调用业务层函数 8000 次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:35:08.013

我在企业文档应用程序管理系统中遇到过类似的问题。我遇到了通过 Web 服务发送大文件（> 5 MB）的问题，因为编码使有效负载膨胀，导致服务器端消耗大量内存。

解决方案是将文件放在网络驱动器/共享/路径上，让服务器轮询并从网络路径中提取文件。当然，在我的情况下，该应用程序是一个 Intranet 应用程序，而不是 Internet

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:07:28.667

如果是我，我会进行多次调用，但是如今 8K 非常小，请尝试在兆字节范围内进行多次调用。

单个大型 POST 的问题在于，如果在上传过程中失败，您将不得不再次重新发送整个文件。通过多次调用，您实际上可以确认该块已上传，然后再继续下一个。

# git - Git 更新分支

> ID：12267194
> 
> 赞同：1
> 
> 时间：2012-09-04T15:55:36.980
> 
> 标签：git, merge

我有一个 git 工作流，它至少涉及两个分支，“master”和“staging”。当我对放入 master 的内容感到满意时，我想将其推送到临时服务器以供其他人查看，为此，我需要将“staging”分支与“master”同步“ 分支。

目前，我必须这样做：

```
git checkout staging
git merge master
git checkout master 
```

有什么方法可以让我在一个命令中将当前分支合并*到*暂存分支中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:12:12.833

如果合并失败，您可能想要处理冲突。因此，您需要在暂存分支中签出，否则冲突文件会在哪里？

您可以做的是为该进程创建一个 shell 别名：

```
alias updateStage="git checkout staging && git merge master && git checkout master" 
```

如果合并失败`git-merge`将返回`1`并且它不会尝试返回 master 结帐，让您可以自由地解决冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-12T12:58:21.260

如果您不关心当前的内容`staging`，只想**强制**它指向与 master 相同的提交：

```
git update-ref refs/heads/staging refs/heads/master 
```

[https://git-scm.com/docs/git-update-ref](https://git-scm.com/docs/git-update-ref)

# asp.net-mvc - 从 db knockoutjs + mv3 加载数据

> ID：12267197
> 
> 赞同：0
> 
> 时间：2012-09-04T15:55:40.037
> 
> 标签：asp.net-mvc, knockout.js

附加文件示例：http: [//jsfiddle.net/brux88/9fzG4/1/](http://jsfiddle.net/brux88/9fzG4/1/)

嗨，我开始在 asp.net mvc 项目中使用 knockoutjs。

我有一个看法：

```
 <button  data-bind='click: load'>Load</button>

<table>
            <thead>
                <tr>
                    <th>Cliente</th>
                    <th>Colli</th>
                    <th>Tara</th>
                    <th>Peso Tara</th>
                    <th> </th>
                </tr>
            </thead>
            <tbody data-bind='foreach: righe'>
                <tr>
                    <td>
                        <select  data-bind="
                           value: selectedCli,
                           options:  clienteList,
                           optionsText: function(item) { return item.Rscli + '-' + item.Codcli },
                           optionsCaption: '--Seleziona un Cliente--'"
                           style=" width: 150px">
                        </select>
                     </td>
                    <td >
                        <input data-bind='value: Ncolli' />
                    </td>

                    <td>
                        <select data-bind="value: selectedTara,
                                          options:  taraList,
                                          optionsText:  function(item) { return item.Destara  + 

'-' + item.Codtara},
                        optionsCaption: '--Seleziona un Cliente--'"

                                style=" width: 150px">
                        </select>
                    </td>
                    <td >
                        <input  data-bind="value: Ptara" />
                    </td>

                    <td>
                        <a href='#' data-bind='click: $parent.rimuoviRiga'>Elimina</a>
                    </td>
                </tr>
            </tbody>
        </table>
        <button   data-bind='click: aggiungiRiga'>Aggiungi</button>
        <button  data-bind='click: salva'>Salva</button>
        <button  data-bind='click: annulla'>Annulla</button>​ 
```

我的数据数据库结果：

```
[{"Codcli":4,"Rscli":"antonio","Codtart":"1002","Despar":"ciliegino","Ncolli":10,"Pcolli":100,"Codtara":"03","Destara":"","Ptara":82,"Pnetto":18,"Prezzo":1},{"Codcli":1,"Rscli":"bruno","Codtart":"1001","Despar":"pomodoro","Ncolli":10,"Pcolli":100,"Codtara":"03","Destara":"","Ptara":10,"Pnetto":90,"Prezzo":1}] 
```

我的视图模型淘汰赛：

```
 <script type="text/javascript">
  var listCli= [{Codcli: 1,Rscli: "Bruno"},{Codcli: 2,Rscli: "Pippo"},{Codcli: 3,Rscli: "Giacomo"}];
var listTa= [{Codtara: 01,Destara: "Plastica",Pertara:4},{Codtara: 02,Destara: "Legno",Pertara:6},{Codtara: 03,Destara: "Ploto",Pertara:8}];

var mydataserver = [{"Codcli":3,"Rscli":"Giacomo","Ncolli":10,"Codtara":"03","Destara":"Legno","Ptara":82},{"Codcli":1,"Rscli":"Bruno","Ncolli":10,"Codtara":"02","Destara":"Plastica","Ptara":10}];

 var RigaOrdine = function () {
     var self = this;
                self.selectedCli = ko.observable();
                self.clienteList = ko.observableArray(listCli);            
                self.Ncolli = ko.observable();
                self.selectedTara = ko.observable();
                self.taraList = ko.observableArray(listTa);
                self.Ptara = ko.observable();

                self.Ncolli.subscribe(function () {
                    self.Ptara(self.Ncolli() ? self.selectedTara().Pertara * self.Ncolli() : 0);
                });

                self.selectedTara.subscribe(function () {
                    self.Ptara(self.Ncolli() ? self.selectedTara().Pertara * self.Ncolli() : self.selectedTara().Pertara);
                });
            };

            var Ordine = function () {
                var self = this;
                self.righe = ko.observableArray([new RigaOrdine()]); // Put one line in by default

                // Operations
                self.aggiungiRiga = function () { 
                    self.righe.push(new RigaOrdine());
                        };
                self.rimuoviRiga = function (riga) { 
                    self.righe.remove(riga);
                        };

                self.salva = function() {
                 var righe = $.map(self.righe(), function (riga) {
                        return riga.selectedCli() ? {
                            Codcli: riga.selectedCli().Codcli,
                            Rscli: riga.selectedCli().Rscli,
                            Ncolli: riga.Ncolli(),
                            Codtara: riga.selectedTara().Codtara,
                            Ptara: riga.Ptara(),
                            } : undefined;
                    });
                    alert( ko.toJSON(righe));
                    //save to server
                   /* $.ajax({
                        url: "/echo/json/",
                        type: "POST",
                        data: ko.toJSON(righe),
                        dataType: "json",
                        contentType: "application/json; charset=utf-8",
                        success: function(data) {
                        }
                    });*/
                    self.righe([new RigaOrdine()]);
                };

                //load from server
                self.load = function() {
                    $.ajax({ url: '/echo/json/', 
                      accepts: "application/json", 

                      cache: false, 
                      statusCode: { 

                        200: function (data) {
                            alert(ko.toJSON(mydataserver));
                            //i do not know apply to viewmodel
                        }, 
                        401: function (jqXHR, textStatus, errorThrown) { 
                          alert('401: Unauthenticated'); 
                         // self.location = "../../Account/Login.html?returnURL=/Index.html"; 
                        } 
                      } 
                    }); 

                };
                self.annulla = function() {
                    self.righe([new RigaOrdine()]);
                };

            };
            var viewmodel = new Ordine();
           ko.applyBindings(viewmodel);

​

    </script> 
```

如果我想从数据库加载数据，我该怎么做？而有下拉列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:32:40.740

你的问题有点弱，所以我会给你一个更笼统的答案。

要回答有关如何从数据库加载数据的问题，看来您已经走上了正确的道路。通常您使用 AJAX 请求来执行数据的异步请求。为此，knockoutJS 提供了以下功能：

```
$.getJSON("/some/url", function(data) { 
    // Now use this data to update your view models, 
    // and Knockout will update your UI automatically
}) 
```

来源： http: [//knockoutjs.com/documentation/json-data.html](http://knockoutjs.com/documentation/json-data.html)

在提供的回调中，您将可以访问从服务器返回的数据。这取决于您的应用程序的逻辑您想要在这里做什么 - 对于某些应用程序，更新视图模型的状态以在视图中进行相应的更新可能是有意义的。

如果您的问题更具体，请详细说明。否则，我希望我能让你走上正轨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:57:59.760

如我所见..您可能需要一些好的练习来加载。我会和你分享我的。

好吧.. 将 Json 作为 JsonResult 返回。

```
 // POST: /Client/LoadClient
    [HttpPost]
    public JsonResult LoadClient(int? id)
    {
        if (id == null) return null;

        var client = _business.FindById((int) id);

        return Json(
            new
            {
                id = cliente.id,
                name = cliente.name,
                list = cliente.listOfSomething.Select(s => new {idItemFromList = s.idWhatever, nameItemFromList = s.nameWhatever})
            });

    } 
```

JS

```
viewmodel.Client.prototype.LoadClient= function (id) {
var self = this;

if (id == 0) {
    return null;
}

$.ajax({
    url: actionURL("LoadClient", "Client"),
    data: { id: parseInt(id) },
    dataType: "json",
    success: function (result) {
        if (result != null)
            self.Load(result);
    }
}); 
```

加载方法。

```
viewmodel.Client.prototype.Load = function (result) {
var self = this;

self.idClient(result.id);
self.nameCliente(result.name);
self.ListOfSomething(result.list);
}; 
```

和..

ko.applyBinding( *yourModel* );

如您所见，我正在使用*原型*，这也是一个好习惯。

# ms-access - 创建新记录后，我的表单无法在 Access 2010 中显示

> ID：12267198
> 
> 赞同：0
> 
> 时间：2012-09-04T15:55:44.210
> 
> 标签：ms-access, vba, ms-access-2010

堆栈溢出。我有一个困扰了太久的问题。目前，我有一个显示联盟数据的表单，带有一个显示“创建新联盟”的按钮。当我单击它时，它会显示一个弹出窗口，允许您输入名称，如下图所示。几乎一切正常，除了在创建新记录后我无法让它显示新记录。请参阅下面的代码-您会了解我正在尝试做什么。

顺便说一句，如果重要的话，“联盟名称”组合框允许您选择记录。我看不出它如何让我的更新失效，但我认为我应该包含这些信息。

这是表格：

![我的表格](../Images/cf2b9b4c61d9107b5859d2037157fc66.png)

这是代码：

![我的代码](../Images/a66c1ba073ec0fe06970d9ddc039beda.png)

有趣的是，StackOverflow 在进行编辑后似乎没有正确缩进代码——我能够通过一个新的测试帖子成功地做到这一点。那好吧。我也是这个菜鸟：

```
Private Sub CreateConsortiumButton_Click()
    If IsNull(Me.ConsortiumNameText) Or Me.ConsortiumNameText = "" Then ''insert better validation here
        MsgBox "Please enter a valid consortium name."
    Else
        '' Create a new Consortium record with the ConsortiumNameText field on the popup window
        Dim rst As DAO.Recordset
        Set rst = CurrentDb.OpenRecordset("Consortium")
        rst.AddNew
        rst("Consortium name").Value = Me.ConsortiumNameText
        ConsortiumID = rst("ConsortiumID").Value
        rst.Update
        '' Now, create a corresponding record in the ResearchContributions table
        Set rst = CurrentDb.OpenRecordset("ResearchContributions")
        rst.AddNew
        rst("ConsortiumID").Value = ConsortiumID
        rst.Update
        MsgBox "Consortium " & Me.ConsortiumNameText & " successfully created."
        '' Change the form's combo box to reflect the new record
        Forms!Main!NavigationSubform!ConsortiumNameCombobox = Me.ConsortiumNameText
        '' Close popup
        DoCmd.Close
        '' Attempt to set the record on the main form to the newly created one - NOT WORKING!
        DoCmd.OpenForm "Main", acNormal, , "[ConsortiumID] = " & ConsortiumID
    End If
End Sub 
```

我认为部分问题可能与我已将基于选项卡控件的“联盟表单”表单放入“主”表单这一事实有关。也许是因为我试图用某个 ConsortiumID 打开*Main*表单，所以 ConsortiumID 不适用于*Consortium Form*。似乎我无法将主人与其孩子联系起来，但过去没有必要这样做。如果这些概念听起来很模糊，请原谅我，因为这只是因为这些概念在我的脑海中还很模糊——这是我的第一个 Access 项目。有人有任何提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:09:52.653

好吧，我想我明白了。我添加了以下代码：

```
DoCmd.OpenForm "Main"
DoCmd.Requery
DoCmd.SearchForRecord , , acFirst, "[ConsortiumID] = " & ConsortiumID 
```

首先，打开表单，然后重新查询能够注册新项目在数据库中的事实，然后使用 SearchForRecord 打开它。尼托。谢谢大家。

# c++ - 字符串流到向量 抛出 std::bad_alloc

> ID：12267199
> 
> 赞同：-1
> 
> 时间：2012-09-04T15:55:51.800
> 
> 标签：c++, vector, stringstream

我正在对 Boost Property Tree 进行一些修改，并且遇到了[这个](https://stackoverflow.com/a/2861087/1062484)示例。我需要将最终结果转换为矢量，所以我只在后面添加了一行

```
write_json(ss, root); 
```

像这样：

```
std::vector<char> testVec(std::begin(ss.str()), std::end(ss.str())); 
```

我也试过这个：

```
std::string someString = ss.str()
char* someArray = (char*)someString.c_str();
std::vector<char> someVec(someArray, someArray+sizeof(someArray)); 
```

在这两种情况下，我都会收到此错误：

```
terminate called after throwing an instance of 'std::bad_alloc'
what():  std::bad_alloc 
```

任何提示我做错了什么？我认为这不是属性树的问题。这是字符串到向量转换的问题。我想这是有道理的，因为向量应该只是一维的，但我不知道如何将该字符串转换为向量并再次将其取回。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T15:59:42.740

这失败了：

```
std::vector<char> testVec(std::begin(ss.str()), std::end(ss.str())); 
```

因为`std::begin()`and`std::end()`没有与同一个`std::string`实例相关联。每次[`ss.str()`](http://en.cppreference.com/w/cpp/io/basic_ostringstream/str)返回一个新的实例，它不会返回一个到某个内部成员。`std::string``std::string&`

这是不正确的：

```
std::vector<char> someVec(someArray, someArray+sizeof(someArray)); 
```

因为`sizeof(someArray)`是`sizeof(char*)`。如果少于`sizeof(char*)`元素，`someArray`将尝试读取不应读取的内存。

一个可能的解决方案：

```
std::string someString = ss.str();
std::vector<char> someVec(someString.begin(), someString.end()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:03:37.297

`sizeof()`没有给你数组的长度，因为 c 字符串不知道它们的长度（以空结尾）。它只是为数组开头的指针提供内存位置的大小，这就是为什么如果你不小心，你可以使用 operator[] 引用字符串的结尾。

另一种解决方案是重载 sizeof 以遍历字符串，直到它到达空终止符，但这似乎是你可以用内置的东西做的事情，而无需经过额外的工作。

# bash - 在 bash 脚本中提取文件名的结尾

> ID：12267200
> 
> 赞同：0
> 
> 时间：2012-09-04T15:55:51.690
> 
> 标签：bash

在我的备份脚本中，我只想保留 7 天的备份（为此尝试使用 logrotate 并且效果很好，但是我遇到了 cron.daily 的时间问题以及它如何影响“dateext”）。我在使用参数扩展从文件名中提取日期时遇到问题。

以下是一些文件的一些示例

*   foo.bar.tar.gz-20120904
*   bar.baz.tar.gz-20120904
*   ...

这是我的 bash 脚本：

```
#!/bin/bash

path="/foo/"
today=$(date +%Y%m%d)
keepDays=7
keepSeconds=$(date -d "-$keepDays day" +%s)

for f in $path"*"; do
  fileSeconds=$(date -d ${f##*-} +%s)
  if [ $fileSeconds -lt $keepSeconds ]
    then
        rm $f
  fi
done 
```

这是我得到的错误：

```
date: extra operand `/foo/foo.bar.tar.gz-20120904' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T16:00:46.983

删除 周围的引号`*`，以防止 globbing：

```
for f in ${path}*; do 
```

（`{ }`这里没有严格要求，但更容易阅读）

不是问题的一部分，但 Bourne shell 语法`[ $fileSeconds -lt $keepSeconds ]`可以写成`(( $fileSeconds < $keepSeconds ))`可能更安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T17:25:27.537

正如[cdarke](https://stackoverflow.com/users/736308/cdarke)`*`所说，删除循环中的引号`for`：

```
for f in ${path}/*; do 
```

发生的情况是执行的 shell`date`获取 '/foo/*' 并将其扩展为文件名列表（多个），然后`${f##*-}`在列表的一部分上使用，并`date`使用多个名称和对象调用。

`bash -x your-script.sh`例如，如果您使用 运行，您会看到这一点。当一些神秘的事情发生时，第一步是确保你知道 shell 在做什么。在循环中添加`echo "$f"`or`echo $f`可以帮助您理解——尽管您会得到两个不同的答案。

# redirect - Drupal 7 一些不存在的 URL 没有重定向到 404？

> ID：12267203
> 
> 赞同：3
> 
> 时间：2012-09-04T15:56:03.843
> 
> 标签：redirect, drupal, drupal-path-aliases

在 Drupal 7 中，一些（不存在的）URL 没有重定向到 404 或它应该重定向到的任何错误页面。相反，它仍然显示其顶级父文件夹。例如像：

*   www.mywebsite.com/items/aaaaaaaaaaaaaa
*   www.mywebsite.com/items/bbbbbbbbbbbbbbbbbb

我在上面放置的每个 WRONG URL`/items/`都显示其父页面：
`www.mywebsite.com/items`而不是重定向到 404 ，**如果真的没有页面**
， 我不希望显示其父页面。

 **但奇怪的是，并非所有模式都发生这种情况。我的意思是，另一个不同的父母喜欢：

*   www.mywebsite.com/users/aaaaaaaaaaaaaa
*   www.mywebsite.com/users/bbbbbbbbbbbbbbbbbb

对于在此`/users/`父路径下输入的错误 url，它会正确地重定向到 404 页面。

请问是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T16:56:24.533

如果我正确理解你的问题，那根本不是问题。

那是因为你的/contributed/core 模块如何挂钩 Drupal 菜单系统。

如果一个菜单项（具体来说是菜单路由器项。想想像“admin/config/development/performance”这样的路径）没有“%”符号，菜单回调函数将被执行。例如，如果一个模块注册“items”路径 example.com/items 路径不会是 404，并且菜单项的相应菜单回调函数将被触发。如果给定，该回调函数可以使用更多 URL 部分（example.com/items/123）。

“节点”就是一个很好的例子。（但从技术上讲，它们是不同的菜单路由器项目）。打开 example.com/node 不会触发 404。

如果模块注册了 'items/%' ，那么 example.com/items 将触发 404。换句话说，需要第二个 URL 部分才能执行菜单回调函数。

如果您遇到的问题与自定义模块有关，请确保您注册了正确版本的路由器项目。如果需要第二个 URL 部分，请注册 items/%。[您可以通过调用drupal_not_found()](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_not_found/7)来执行 404 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:07:17.017

您是否使用该路径的[视图](http://drupal.org/project/views)( `/items`)？

Here is an issue for Views: [Prevent duplicate content (because Views returns 200 instead of ~~400~~ 404](http://drupal.org/node/1432230))

You could create a Contextual filter to prevent this.

merlinofchaos [wrote](http://drupal.org/node/1432230#comment-5573704):

> If you don't want this behavior, add the Global: NULL argument to Views and use the setting to validate that the argument is empty.

For Drupal 6, the module [Views 404](http://drupal.org/project/views404) might help.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T07:45:57.917

Look at this, really helpfull [http://peterpetrik.com/blog/2009/11/non-existent-urls-views-2](http://peterpetrik.com/blog/2009/11/non-existent-urls-views-2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T10:12:35.177

您可以将您的 drupal 安装配置为重定向到您创建的特定 404 页面。

转到`www.yoursite.com/admin/config/system/site-information`并输入您的 404 页面。**

# sql - 有没有更好的方法来编写这个 SQL？

> ID：12267208
> 
> 赞同：0
> 
> 时间：2012-09-04T15:56:20.327
> 
> 标签：sql, oracle, self-join

```
SELECT DISTINCT
     A.currency_code AS currency_code,
     NVL (B.Acct_ID, A.Acct_ID) SECND_Acct_ID,
     NVL (B.Type_currency_code, A.Type_currency_code) SECND_Type_currency_code,
     NVL (B.Seg_Type, A.Seg_Type) SECND_Seg_Type,
     NVL (B.B_Func_Code, A.B_Func_Code) SECND_B_Func_Code,
     A.Acct_ID AS PRIM_Acct_ID,
     A.Type_currency_code AS PRIM_Type_currency_code,
     A.Seg_Type AS PRIM_Seg_Type,
     A.B_Func_Code AS PRIM_B_FuncCode
FROM    (SELECT Acct_ID,
           Type_currency_code,
           Seg_Type,
           B_Func_Code,
           B_ID,
           B_NBR,
           currency_code
      FROM BAU
     WHERE P_A_IND IN ('Y')) A
LEFT OUTER JOIN
   (SELECT Acct_ID,
           Type_currency_code,
           Seg_Type,
           B_Func_Code,
           B_ID,
           B_NBR,
           currency_code
      FROM BAU
     WHERE P_A_IND IN ('N')) B
ON     A.B_NBR = B.B_NBR
   AND A.B_ID = B.B_ID
   AND A.currency_code = B.currency_code 
```

*   目的是识别同一张表上不同的主要和次要（PRIM_Acct_ID、PRIM_Type_currency_code、PRIM_Seg_Type、PRIM_B_FuncCode）列。
*   将 p_a_ind （主要指标）作为 Y 的那些是主要的，否则是次要的。
*   b_nbr、b_id 和 currency_code 是我进行自联接的主键。

*我想知道/看看是否有更好的方法来编写这个查询。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:04:06.687

您可以通过将条件从子查询分别移动到`where`or`on`子句来澄清查询：

```
SELECT  ...
FROM    BAU A
LEFT JOIN
        BAU B
ON      B.P_A_IND IN ('N')
        AND A.B_NBR = B.B_NBR
        AND A.B_ID = B.B_ID
        AND A.currency_code = B.currency_code
WHERE   A.P_A_IND IN ('Y') 
```

# ruby - 在 Sinatra 框架中使用 haml 模板

> ID：12267212
> 
> 赞同：0
> 
> 时间：2012-09-04T15:56:27.167
> 
> 标签：ruby, sinatra

如何使用 Sinatra 创建一个使用我准备好的`index.html.haml`模板的页面。

假设我有以下代码：

```
require 'sinatra'
require 'sass'
require 'haml'

get '/' do
  haml :index ???
end 
```

我的`index.html.haml`文件位于`/sinatraapp/haml/index.html.haml`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T16:04:35.513

您需要告诉`sinatra`您的视图所在的位置 -[请参阅此](http://www.sinatrarb.com/configuration.html#__view_template_directory)

```
require 'sinatra'
require 'sass'
require 'haml'

set :views, "path/to/your/haml/dir"

get '/' do
  haml :index
end 
```

# iis - 使用 ISAPI 和 IIS 从重定向响应的位置 URL 中删除特定查询字符串

> ID：12267213
> 
> 赞同：1
> 
> 时间：2012-09-04T15:56:28.150
> 
> 标签：iis, iis-7, httpmodule, isapi-rewrite

我有一些不希望在任何 301 重定向响应中发送的查询字符串键（“mobile”、“nomobile”等）。

例如，假设我有`/about-us`重定向到`/about`.

```
RewriteRule ^about-us$ /about [NC,L,R=301] 
```

默认情况下，重写规则将查询字符串保留在重定向 URL 中。因此，对于这样的传入 URL：

```
/about?mobile=true&xyz=1 
```

如果应用了重定向规则，我希望服务器响应一个位置 URL，该 URL 已从重定向 URL 中删除了移动查询字符串，但仍包含 xyz 查询字符串。所以我希望这个请求与这个目标网址一起返回：

```
/about?xyz=1 
```

我不希望`mobile, nomobile`从传入请求中删除 ( 等) 查询字符串。如果 Url 结果为 200，我希望底层 ASP.NET Web 应用程序能够看到`mobile`查询字符串。此查询字符串删除应该发生在重定向响应的 Location 标头（即目标 Url）上。

我有数以千计的 ISAPI RewriteRules，所以我不想将 a`RewriteCond`应用于每条规则。

是否有一个 ISAPI 规则或一个自定义模块我可以放置在某个地方以将此逻辑全局应用于 ISAPI 生成的重定向或来自 IIS 的任何重定向响应？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T01:21:03.027

使用IIS 中的[Url Rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)，您可以创建规则来修改出站响应标头。下面是从 Url Rewrite 工具生成的规则：

```
<system.webServer>
 <rewrite>
  <outboundRules>
    <clear />
    <rule name="Remove nomobile from location">
      <match serverVariable="RESPONSE_Location" pattern="^(.*)\?nomobile(.*)" />
      <conditions logicalGrouping="MatchAll" trackAllCaptures="true" />
      <action type="Rewrite" value="{R:1}?{R:2}" />
    </rule>  
    <rule name="Remove mobile=true from location">
      <match serverVariable="RESPONSE_Location" pattern="^(.*)\?mobile(.*)" />
      <conditions logicalGrouping="MatchAll" trackAllCaptures="true" />
      <action type="Rewrite" value="{R:1}?{R:2}" />
    </rule>  
    <rule name="Replace &amp;">
      <match serverVariable="RESPONSE_Location" pattern="^(.*)(\?&amp;)(.*)" />
      <conditions logicalGrouping="MatchAll" trackAllCaptures="true" />
      <action type="Rewrite" value="{R:1}?{R:3}" />
    </rule>
    <rule name="Remove empty ?" enabled="true">
      <match serverVariable="RESPONSE_Location" pattern="(.*)\?$" />
      <conditions logicalGrouping="MatchAll" trackAllCaptures="true" />
      <action type="Rewrite" value="{R:1}" />
    </rule>
  </outboundRules>
 </rewrite>
</system.webServer> 
```

# .net - JAX-WS IBM 客户端使用带有 Active Directory 身份验证 (NTLM) 的 .Net WS

> ID：12267218
> 
> 赞同：5
> 
> 时间：2012-09-04T15:56:59.140
> 
> 标签：.net, active-directory, websphere, jax-ws, ntlm

我想使用 IBM WebSphere 的 .Net WS。

我使用 JAX-WS IBM 实现创建了一个 WS 客户端，它在 IIS 上使用 .Net WS。客户端在 SUSE 上，并且通过 NTLM 和 Windows Server 2003 Active Directory 进行身份验证。

*   如果客户端在命令行中执行，则实现调用 java.net.Authenticator 以获取凭据并且请求成功。

*   如果客户端在 RAD 中执行，则不会调用 Authenticator 并且它会失败并返回 401。

*   如果客户端在 WebSphere 中执行，则不会调用 Authenticator，并且会失败并返回 401。

*   如果我直接创建一个指向 .Net WS URL 的 HttpConnection，则会调用 Authenticator 并且请求成功。

*   如果我使用 Axis2（直接，而不是 IBM Axis2 JAX-WS 实现）而不是 JAX-WS IBM 实现，我可以将 Authenticator 对象传递给 Axis2 客户端，并且请求成功。这仅适用于 Windows Server 2003 的 NTLM 协议。当我们迁移到 Windows Server 2008 时，身份验证协议是 NTLMv2（由于 NTLM 的安全问题，每个人都在迁移到 NTLMv2）并且请求失败，因为 HTTP 客户端 3 不支持 NTLMv2。 X 是 Axis2 的依赖项。在一段时间内，他们不会迁移。

如果我使用除 IBM 之外的其他 JAX-WS 实现，我会失去控制台管理和自动注释读取，以及失去来自 IBM 的支持。

**问题**

我不明白为什么在 RAD 内部它不起作用，是从命令行运行的同一个程序。

您如何使用特定凭据通过 NTLMv2 协议支持使 JAX-WS IBM 实现进行身份验证？（java.net.Authenticator 为您提供了这个，它应该被称为......它没有）

有什么方法可以让 IBM JAX-WS 实现使用另一个 HTTP 客户端而不是标准客户端？

甚至 IBM JVM 实现也提供 NTLM 身份验证（这就是命令行和直接 HttpConnection 执行工作的原因），所以我不明白他们为什么不将它用于 IBM WS 堆栈。

**加分**

有没有什么好的方法可以提供双向能力来使用 ActiveDirectory 身份验证来消费 WS？

**评论**

Spring WS 使用支持 NTLMv2 身份验证的 HttpClient 4.X，但我需要一个 JAX-WS 实现，它**应该**是 IBM 的。IBM JAX-WS 似乎只支持 Basic AUTH。我不明白 Microsoft WS 互操作对 IBM 来说是多么不重要。

**参考**

*身份验证器配置：*

[http://docs.oracle.com/javase/6/docs/api/java/net/Authenticator.html#setDefault%28java.net.Authenticator%29](http://docs.oracle.com/javase/6/docs/api/java/net/Authenticator.html#setDefault%28java.net.Authenticator%29)

[https://stackoverflow.com/a/5994706/14811](https://stackoverflow.com/a/5994706/14811)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:01:38.733

您正在从 NTLM (1994?) 迁移到 NTLMv2 (1999) 而不是基于 Kerberos 的技术（在 Windows 2000 中引入），因为 NTLMv2 更安全？？？

在与 Microsoft 的互操作方面，现代系统将在 JAX-WS 客户端和 .NET 服务之间使用 WS-Security Kerberos。这已经过测试。

您正在尝试做的事情（替换进程使用的 Authenticator）适用于独立的 Java 应用程序，但不适合 Java Enterprise 模型，其中 Java 进程托管多个“应用程序”，每个“应用程序”都有自己的“身份验证”要求，不要介意 WebSphere Server 进程之间的内部要求（App Server 到 App Server，Node Agent 到 App Server，App Server 到 LDAP，等等......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T15:02:01.217

最后，这就是我所做的。

我使用 RAD 插件创建 JAXB 对象以创建 JAX-WS 客户端。我使用生成的 DTO 作为传递给 Spring WS 库的消息。Spring WS 2.1 带有带来 NTLMv2 支持的 Http Client 4.2。

我创建了一个小库来简化这个过程，但过程的想法是：

1.  使用 RAD 生成 JAX-WS 客户端
2.  创建一个实现RAD生成的服务接口的类
3.  对于每个接口方法：
4.  3.1 将接口方法的参数注入到JAXB对象中
5.  3.2将此对象传递给`WebServiceTemplate`（Spring对象）Web服务调用。
6.  3.3 将调用响应转换为 JAXB 方法响应对象
7.  3.4 返回响应对象的内部值

因此，您最终要做的是重用 JAX-WS 客户端的对象生成，将服务方法的参数包装到 Spring WS 进行调用所需的对象中。

`NTCredentials`对于设置为`WebServiceTemplate`发件人的NTLM 身份验证。

**Axis2 1.7**将通过 HttpClient 4.2.X 的更新版本支持 NTLMv2，但还没有发布日期。

看：

*   `WebServiceTemplate`WS 调用

[http://static.springsource.org/spring-ws/sites/2.0/apidocs/org/springframework/ws/client/core/WebServiceTemplate.html#marshalSendAndReceive%28java.lang.Object%29](http://static.springsource.org/spring-ws/sites/2.0/apidocs/org/springframework/ws/client/core/WebServiceTemplate.html#marshalSendAndReceive%28java.lang.Object%29)

*   `WebServiceTemplate`发件人

[http://static.springsource.org/spring-ws/sites/2.0/apidocs/org/springframework/ws/client/support/WebServiceAccessor.html#getMessageSenders%28%29](http://static.springsource.org/spring-ws/sites/2.0/apidocs/org/springframework/ws/client/support/WebServiceAccessor.html#getMessageSenders%28%29)

*   `NTCredentials`

[http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/auth/NTCredentials.html](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/auth/NTCredentials.html)

* * *

**更新**：我测试了 Axis 1.7 并且 NTLM 身份验证运行良好。

# c# - 防止从 GAC 加载 dll

> ID：12267225
> 
> 赞同：2
> 
> 时间：2012-09-04T15:57:16.687
> 
> 标签：c#, asp.net, gac

我有一个没有 .cs 文件的 Aspx 页面。此页面正在使用我机器的 GAC 中已经存在的 dll 文件。我有这个 dll 的新版本，但我不想更改 GAC 中的任何内容。我可以让这个aspx页面从我的bin目录加载dll并覆盖GAC吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T16:00:14.673

是的。只需将新程序集放入应用程序二进制文件所在的文件夹并使用程序集重定向[程序集重定向](http://msdn.microsoft.com/en-us/library/7wd6ex19%28v=vs.71%29.aspx)

并确保您的程序集版本已更改。

# facebook - 为已登录的用户发布到 Facebook 提要

> ID：12267228
> 
> 赞同：0
> 
> 时间：2012-09-04T15:57:23.843
> 
> 标签：facebook, facebook-wall

我有一个在 SilverLight 中完成的 FaceBook 游戏。它从 SilverLight HTML 桥中调用 JavaScript。我不想要一个要求用户发表评论的 UI，我只希望他们从 SilverLight 应用程序传递的分数发布在他们的提要上。下面的代码什么都不做。它不会抛出异常，但什么也不做。

您可以通过我的方式发送任何帮助来解释如何解决这个问题，以便它在没有 UI 的情况下发布到用户提要，我们将不胜感激。

```
function PostToFeed(strCaption) 
{

    function callback(response) 
    {
    }

    var obj = 
    {
        method: 'stream.publish',
                    // was using method: 'feed',
        link: 'https://apps.facebook.com/blackjackguru/',
        picture: 'https://metamorphosisapps.com/blackjackguru/BlackjackIcon.gif',
        name: 'Blackjack Guru Accomplishment',
        caption: strCaption,
        message: 'I love this game!',
        description:  'Play blackjack with the best blackjack game on FaceBook.'
    };

    FB.ui(obj, callback);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:06:55.627

```
var obj = 
    {           
        link: 'https://apps.facebook.com/blackjackguru/',
        picture: 'https://metamorphosisapps.com/blackjackguru/BlackjackIcon.gif',
        name: 'Blackjack Guru Accomplishment',
        caption: strCaption,
        message: 'I love this game!',
        description:  'Play blackjack with the best blackjack game on FaceBook.'
    };

FB.api('/me/feed', 'post', obj , function(response) {
  if (!response || response.error) {
    alert('Error occured');
  } else {
    alert('Post ID: ' + response.id);
  }
}); 
```

你试过这个吗？这只是发布到用户提要，没有任何问题:)

# java - makePersistent 用于拥有的一对多 rs。在 JDO 中不能可靠地工作

> ID：12267231
> 
> 赞同：0
> 
> 时间：2012-09-04T15:57:32.367
> 
> 标签：java, google-app-engine, persistence, jdo, datanucleus

PersistenceManager 的 makePersistent 方法工作不可靠。一个相同的junit-test正在工作，过了一会儿又失败了？！我有一个包含其他对象集合的对象。这意味着 1-n 关系。我的问题是我的类的 junit-test 有时会失败，因为集合中的对象没有正确保存。我通常使用事务，但persistanceManager 是事务可选的

我尝试在每次 createObject 并提交后检查 objectState ...我发现成功提交后集合中的对象没有 systemId（应该自动生成）但处于空心/持久非事务状态。

这意味着有时它们是（如果它们被持久化）：

*注释 [systemId=Project(1)/Comment(6)，JDO-ObjectState=hollow/persistent-nontransactional]*

有时它们是（如果它们没有持久化并且父对象的 refach 包含一个空集合） *评论 [systemId=null, JDO-ObjectState=hollow/persistent-nontransactional]*

当然，如果所有存储的对象都有一个 systemId，我可以手动检查，但这种方法一点都不好。提交应该失败！

我不明白它有时有效，有时无效！这意味着我的代码不应该是错误的，这是一个错误......请帮助我

PS：如有必要，我可以发布一些代码！

```
@PersistenceCapable
public class Ble implements Serializable, JDOObject<Ble> {

/**
 * 
 */
private static final long serialVersionUID = 1L;

// NotNull
@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Key systemId;

// NotNull
@Persistent
private Key parentId;

// NotNull
@Persistent
@Extension(vendorName = "datanucleus", key = "gae.parent-pk", value = "true")
private Key projectId;

// NotNull
@Persistent
private String title;

@Persistent
private int position;

@Persistent
private boolean hasChildren;

@Persistent
private BleData requirementData;

@Persistent
private List<Comment> comments;

//getter/setter
} 
```

子对象

```
 @PersistenceCapable
public class Comment implements Serializable, JDOObject<Comment> {

/**
 * 
 */
private static final long serialVersionUID = 1L;

@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Key systemId;

@Persistent
private String text;

@Persistent
private long createdTimestamp;

//getter//Setter    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:59:50.757

解决方案是始终为每个事务使用新的 persistenceManager。永远不要重复使用一个下午！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:51:17.787

如果我尝试添加评论并且它不起作用，则日志

```
05.09.2012 15:02:06 org.datanucleus.jdo.metadata.JDOMetaDataManager$MetaDataRegisterClassListener registerClass
INFO: Listener found initialisation for persistable class com.Comment
05.09.2012 15:02:06 org.datanucleus.store.appengine.MetaDataValidator validate
INFO: Performing appengine-specific metadata validation for com.Comment
05.09.2012 15:02:06 org.datanucleus.store.appengine.MetaDataValidator validate
INFO: Finished performing appengine-specific metadata validation for com.Comment
Comment [systemId=null, text=testAddCommentToBle - comment , createdTimestamp=1346850126819, JDO-Status=hollow/persistent-nontransactional] 
```

如果我尝试添加评论并且它正在工作，则日志

```
05.09.2012 15:00:25 org.datanucleus.jdo.metadata.JDOMetaDataManager$MetaDataRegisterClassListener registerClass
INFO: Listener found initialisation for persistable class com.Comment
05.09.2012 15:00:26 org.datanucleus.store.appengine.MetaDataValidator validate
INFO: Performing appengine-specific metadata validation for com.Comment
05.09.2012 15:00:26 org.datanucleus.store.appengine.MetaDataValidator validate
INFO: Finished performing appengine-specific metadata validation for com.Comment
Comment [systemId=Project(1)/Comment(6), text=testAddCommentToBle - comment , createdTimestamp=1346850025996, JDO-Status=hollow/persistent-nontransactional] 
```

add 方法看起来像这样。

```
public Boolean addCommentToBle(Key systemKey, Comment comment)
        throws Exception {
    PersistenceManagerFactory PMF = PersistenceUtil.getPersistenceManagerFactory();
    PersistenceManager pm = PMF.getPersistenceManager();
    pm.currentTransaction().begin();
    Ble ble= pm.getObjectById(Ble.class, systemKey);
    System.out.println(ble);
    ble.getComments().add(comment);
    pm.makePersistent(ble);
    pm.currentTransaction().commit();
    return true;
} 
```

# spring - 尝试将休眠添加到spring项目时出错

> ID：12267234
> 
> 赞同：1
> 
> 时间：2012-09-04T15:57:38.333
> 
> 标签：spring, hibernate, maven, spring-mvc, pom.xml

我正在尝试将hibernate添加到我的spring项目中以实现数据库持久性，我已经下载了最新的稳定版本hibernate 4.1.6，并且正在使用spring 3.1。

但是，当我尝试运行我的项目时，我得到：

```
org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 
'org.springframework.validation.beanvalidation.LocalValidatorFactoryBean#0': 
Invocation of init method failed; nested exception is java.lang.ClassFormatError:   
Absent Code attribute in method that is not native or abstract in class file  
javax/validation/Validation 
```

到目前为止，我添加到项目中的外部 jar 是：

```
antlr-2.7.7.jar
dom4j-1.6.1.jar
hibernate-commons-annotations-4.0.1.Final.jar
hibernate-core-4.1.6.Final.jar
hibernte-jpa-2.0-api-1.0.1.Final.jar
javassist-3.15.0-GA.jar
jboss-logging-3.1.0.GA.jar
jboss-transaction-api_1.1_spec-1.0.0.Final.jar
hibernate-entitymanager-4.1.6.Final.jar
slf4j-api-1.6.1.jar 
```

我的 pom.xml 包含以下依赖项：

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-entitymanager</artifactId>
    <version>${hibernate.version}</version>
</dependency>

<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jstl</artifactId>
    <version>1.1.2</version>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib</artifactId>
    <version>2.2.2</version>
</dependency>
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jsp-api</artifactId>
    <version>2.0</version>
    <scope>provided</scope>
</dependency>

<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.5</version>
    <scope>compile</scope>
</dependency>
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>6.0</version>
</dependency>
<dependency>
    <groupId>taglibs</groupId>
    <artifactId>standard</artifactId>
    <scope>runtime</scope>
    <version>1.1.2</version>
</dependency>

<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <version>${spring.version}</version>
</dependency>

<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-webmvc</artifactId>
    <version>${spring.version}</version>
</dependency>

<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.10</version>
    <scope>test</scope>
</dependency>
</dependencies> 
```

感谢您的帮助，对我的问题应该进行的任何更改，请告诉我。

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:31:10.390

Maven 存储库中的依赖项似乎存在问题`javaee-api`，作为一种解决方案，您可以切换到替代方案

```
 <dependency>
       <groupId>org.apache.geronimo.specs</groupId>
       <artifactId>geronimo-ejb_3.1_spec</artifactId>
       <version>1.0</version>
       <scope>provided</scope>
   </dependency>
   <dependency>
       <groupId>org.apache.geronimo.specs</groupId>
       <artifactId>geronimo-jpa_2.0_spec</artifactId>
       <version>1.0</version>
       <scope>provided</scope>
   </dependency> 
```

致谢：[这里](http://www.adam-bien.com/roller/abien/entry/trouble_with_crippled_java_ee)讨论了这个解决方案。

另请参阅[Failed to load ApplicationContext with @ContextConfiguration(classes={ ... })](https://stackoverflow.com/questions/12261899/failed-to-load-applicationcontext-with-contextconfigurationclasses)和[JUnit 测试用例通过 eclipse 但因 maven build 失败](https://stackoverflow.com/questions/11863235/junit-testcase-passes-with-eclipse-but-fails-with-maven-build)

**更新**如果您的 pom.xml 中有 Hibernate 实体管理器和 Java EE 依赖项，则不明白为什么您下载了单独的 hibernate jar 文件（包括 JPA 2.0 实现）

# java - 检索字符串中的服务器响应代码

> ID：12267237
> 
> 赞同：0
> 
> 时间：2012-09-04T15:57:53.217
> 
> 标签：java, android, response

我正在尝试根据服务器的响应显示消息，但每次都以某种方式失败。当我通过提供静态值从不同的项目中分别运行 java 类的相同代码时，它运行正常并且我能够获得响应代码。请参考代码并帮助我纠正错误。

**MainActivity.java**

```
public class MainActivity extends Activity implements OnClickListener, 
Runnable {
Context context;
EditText editTextNum, editText, editUserName, editPassword;
Button btnsend;
ProgressDialog pd;
String gateway_name;
Thread t;
Spinner spinner1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_main);
    editUserName = (EditText) findViewById(R.id.edit_userName);
    editPassword = (EditText) findViewById(R.id.edit_password);
    editTextNum = (EditText) findViewById(R.id.edit_number);
    editText = (EditText) findViewById(R.id.edit_message);
    spinner1 = (Spinner) findViewById(R.id.SpinnerGateway);
    btnsend = (Button) findViewById(R.id.btnsend);
    btnsend.setOnClickListener(this);
}

/** Called when the user clicks the Send button */
public void sendMessage() {
    String usrname = editUserName.getText().toString();
    String usrPassword = editPassword.getText().toString();
    String number = editTextNum.getText().toString();
    String message = editText.getText().toString();
    gateway_name = String.valueOf(spinner1.getSelectedItem());
    String msgreciever = number;
    String testMessage = message;
    try {
        SmsSender.sendMessage(msgreciever, testMessage, usrname,
                usrPassword, gateway_name);
    } catch (Exception ex) {
        Toast.makeText(MainActivity.this, "SMS Sending Failed.",
                Toast.LENGTH_SHORT).show();
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
    case R.id.menu_settings:
        settingmenuClicked();
        return true;
    case R.id.menu_help:
        showHelp();
        return true;
    case R.id.menu_inbox:
        showInbox();
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}

public boolean isOnline() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        return true;
    }
    return false;
}

public boolean isValid() {
    if (editUserName.getText().length() == 10
            && editPassword.getText().length() != 0
            && editTextNum.getText().length() == 10
            && editText.getText().length() != 0) {
        return true;
    }
    return false;
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    if (v == btnsend) {
        if (!isOnline()) {
            Toast.makeText(MainActivity.this,
                    "No Internet Access..Cannot Send SMS",
                    Toast.LENGTH_SHORT).show();
        } else if (!isValid()) {
            Toast.makeText(MainActivity.this,
                    "All fields are required. Try Again.",
                    Toast.LENGTH_SHORT).show();
        } else {
            pd = ProgressDialog.show(MainActivity.this, "Free Sms",
                    "Sending SMS..Please Wait..!!", true);
            t = new Thread(this);
            t.start();
        }

    }
}

public void settingmenuClicked() {
    Toast.makeText(MainActivity.this, "Setting Menu Coming Soon",
            Toast.LENGTH_SHORT).show();
}

public void showHelp() {
    Toast.makeText(MainActivity.this, "Help Coming Soon",
            Toast.LENGTH_SHORT).show();
}

public void showInbox() {
    //Intent intent = new Intent(this, Inbox.class);
    //startActivity(intent);
}

public void run() {
    // TODO Auto-generated method stub
    sendMessage();
    mHandler.sendEmptyMessage(0);
}

public Handler mHandler = new Handler(Looper.getMainLooper()) {
    @Override
    public void handleMessage(Message msg) {
        // TODO Auto-generated method stub
        super.handleMessage(msg);
        pd.dismiss();
        String response = SmsSender.responsecode;
        if(response == "1"){
            Toast.makeText(MainActivity.this, "Message Sent Successfully",Toast.LENGTH_SHORT).show();
        } else if(response == "-1"){
            Toast.makeText(MainActivity.this, "Server Error",Toast.LENGTH_SHORT).show();
        } else if(response == "-2"){
            Toast.makeText(MainActivity.this, "Invalid Username",Toast.LENGTH_SHORT).show();
        } else if(response == "-3"){
            Toast.makeText(MainActivity.this, "Invalid Message Text",Toast.LENGTH_SHORT).show();
        } else if(response == "-4"){
            Toast.makeText(MainActivity.this, "Login Failed",Toast.LENGTH_SHORT).show();
        } else if(response == "-5"){
            Toast.makeText(MainActivity.this, "IP is blocked",Toast.LENGTH_SHORT).show();
        } else {
            Toast.makeText(MainActivity.this, "Unknown Error",Toast.LENGTH_SHORT).show();
        }
        //Toast.makeText(MainActivity.this, "Message Sent To Server",
            //  Toast.LENGTH_SHORT).show();
        editTextNum.setText("");
        editText.setText("");
        editTextNum.requestFocus();
    }
};
} 
```

**短信发送器.java**

```
public class SmsSender {

static final String _url = "http://ubaid.tk/sms/sms.aspx";
static final String charset = "UTF-8";
public static String responsecode = "0";

// to build the query string that will send the message
private static String buildRequestString(String targetPhoneNo,
        String message, String userName, String Password, String Gateway) throws UnsupportedEncodingException {
    String[] params = new String[5];
    params[0] = userName;
    params[1] = Password;
    params[2] = message;
    params[3] = targetPhoneNo;
    params[4] = Gateway;

    String query = String.format(
            "uid=%s&pwd=%s&msg=%s&phone=%s&provider=%s",
            URLEncoder.encode(params[0], charset),
            URLEncoder.encode(params[1], charset),
            URLEncoder.encode(params[2], charset),
            URLEncoder.encode(params[3], charset),
            URLEncoder.encode(params[4], charset));
    return query;

}

public static void sendMessage(String reciever, String message, String userName, String password, String Gateway)
        throws Exception {
    // To establish the connection and perform the post request
    URLConnection connection = new URL(_url + "?"
            + buildRequestString(reciever, message, userName, password, Gateway)).openConnection();
    connection.setRequestProperty("Accept-Charset", charset);
    // This automatically fires the request and we can use it to determine
    // the response status
    InputStream response = connection.getInputStream();
    BufferedReader br = new BufferedReader(new InputStreamReader(response));
    System.out.println(br.readLine());
    responsecode = br.readLine();

}

public static void main(String[] args) throws Exception {
    // To DO
    //String testPhoneNo = "9876543210";
    //String testMessage = "Sending Messages From java is not too hard";
    //sendMessage(testPhoneNo, testMessage);
}

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:18:15.797

[我认为您是示例](http://ubaid.tk/api-usage/)中过多复制和粘贴的受害者。我怀疑您正在收到回复（否则您会遇到异常）。然后，您只是[将其扔给 System.out.println()](https://stackoverflow.com/questions/2220547/why-doesnt-system-out-println-work-in-android)。然后当你去设置`responsecode` [readLine()](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html#readLine%28%29)时返回 null。

我试图为自己测试它，但我无法在印度以外的地方使用 API。

# javascript - 如何使复选框只读？没有禁用？

> ID：12267242
> 
> 赞同：59
> 
> 时间：2012-09-04T15:58:11.273
> 
> 标签：javascript, checkbox

我有一个表单，我必须将表单值发布到我的操作类。在这种形式中，我有一个需要只读的复选框。我尝试设置`disabled="true"`，但在发布到操作类时不起作用。

所以请指教？？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-09-04T16:01:08.747

没有属性可以使复选框只读。但是你可以试试这个技巧。

```
<input type="checkbox" onclick="return false" /> 
```

**[演示](http://jsfiddle.net/wfVFW/3/)**

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-09-04T16:05:20.710

```
<input type="checkbox" checked onclick="return false;" onkeydown="return false;"/> 
```

[http://jsfiddle.net/2srjc/](http://jsfiddle.net/2srjc/)

如果您担心 Tab 键的顺序，请仅在未按下 Tab 键时为 keydown 事件返回 false：

```
<input type="checkbox" checked onclick="return false;" onkeydown="e = e || window.event; if(e.keyCode !== 9) return false;"/> 
```

[http://jsfiddle.net/2srjc/149/](http://jsfiddle.net/2srjc/149/)

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2017-01-05T13:43:10.790

您可以通过 css 轻松完成此操作。 **HTML：**

```
<form id="aform" name="aform" method="POST">
    <input name="chkBox_1" type="checkbox" checked value="1" readonly />
    <br/>
    <input name="chkBox_2" type="checkbox" value="1" readonly />
    <br/>
    <input id="submitBttn" type="button" value="Submit">
</form> 
```

**CSS：**

```
input[type="checkbox"][readonly] {
  pointer-events: none;
} 
```

[演示](https://jsfiddle.net/s45tex41/)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-05-28T16:09:23.107

我个人喜欢这样做：

```
<input type="checkbox" name="option" value="1" disabled="disabled" />
<input type="hidden" name="option" value="1"> 
```

我认为这更好有两个原因：

1.  用户清楚地知道他不能编辑这个值
2.  提交表单时发送该值。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-09-04T16:01:14.440

您可以简单地添加`onclick="return false"`- 这将停止浏览器执行默认操作（复选框选中/未选中将不会更改）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-07-15T17:00:24.477

我使用 JQuery，所以我可以在复选框上使用 readonly 属性。

```
//This will make all read-only check boxes truly read-only
$('input[type="checkbox"][readonly]').on("click.readonly", function(event){event.preventDefault();}).css("opacity", "0.5"); 
```

如果您希望复选框再次可编辑，则需要对特定复选框执行以下操作。

```
$('specific checkbox').off('.readonly').removeAttr("readonly").css("opacity", "1") 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-06-08T10:17:53.923

制作一个没有名称和值的假复选框，强制隐藏字段中的值：

```
<input type="checkbox" disabled="disabled" checked="checked">
<input type="hidden" name="name" value="true"> 
```

注意：如果您在复选框中输入名称和值，无论如何它都会被具有相同名称的输入覆盖

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-05-14T10:24:37.503

## 如果您对以下内容说“不”：

1.  `disable=true`因为其他功能可能不起作用，例如表单发布。
2.  `onclick='return false'`因为其他事件可能仍然会触发更改，例如 keyup，keydown 焦点时。
3.  `e.preventDefault()`
4.  CSS：`pointer-events: none;`因为您可能希望在某些条件下允许更改。

然后在`change`您的只读复选框的情况下执行此操作：

```
$("#chkReadOnly").on("change", function () {
   // Enclose with 'if' statement if conditional.
   // Simply restore back the default value, i.e. true.
   $(this).prop("checked", true);
}); 
```

这将解决上述所有问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-10T23:05:33.983

以上都不适合我。这是我的 vanilla.js 解决方案：

```
(function() {
    function handleSubmit(event) {
        var form = event.target;
        var nodes = form.querySelectorAll("input[disabled]");
        for (var node of nodes) {
            node.disabled = false;
        }
    }

    function init() {
        var submit_form_tag = document.getElementById('new_whatever');
        submit_form_tag.addEventListener('submit', handleSubmit, true);
    }

    window.onload = init_beworst;

})(); 
```

请务必为表单 ID 提供适当的替换。

我的应用程序有一些上下文，其中一些框是预先选中的，而另一些框则限制了您可以检查的其他框的数量。当您达到该限制时，所有未选中的框都将被禁用，如果您取消选中一个，则所有未选中的框都会再次启用。当用户按下提交时，所有选中的框都会提交给用户，无论它们是否被预先选中。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-09T20:50:12.013

就我而言，我只需要在某些条件下使用它，并且可以在 HTML 中轻松完成：

```
<input type="checkbox" [style.pointer-events]="(condition == true) ? 'none' : 'auto'"> 
```

或者如果您一直需要这个：

```
<input type="checkbox" style="pointer-events: none;"> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-04-08T12:51:08.810

你不能直接做，但你可以用这种方式做，我试试，它对我很好，同时它很简单

HTML：

`<input type="checkbox" checked disabled="true" class="style" />`

CSS：

`.style{ opacity: 1; }`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-09-06T12:11:37.890

这是我针对 Sencha ExtJS 7.2+ 的解决方案（覆盖）（单个覆盖中的复选框和单选）

```
 Ext.define('MyApp.override.field.Checkbox', {
    override: 'Ext.field.Checkbox',

    /**
     * OVERRIDE: to allow updateReadOnly to work propperly
     * @param {boolean} newValue
     *
     * To ensure the disabled state stays active if the field is still readOnly
     * we re - set the disabled state
     */
    updateDisabled(newValue) {
        this.callParent(arguments);

        if (!newValue && this.getReadOnly()) {
            this.inputElement.dom.disabled = true;
        }
    },

    /**
     * OVERRIDE: readonly for radiogroups and checkboxgroup do not work as other fields
     *     https://stackoverflow.com/questions/1953017/why-cant-radio-buttons-be-readonly
     *
     * @param {boolean} newValue
     *
     *  - use disabled on the field
     */
    updateReadOnly(value) {
        this.callParent(arguments);

        if (!this.getDisabled()) {
            this.inputElement.dom.disabled = value;
        }
    }
}); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-02-11T20:57:08.140

摘自[https://stackoverflow.com/a/71086058/18183749](https://stackoverflow.com/a/71086058/18183749)

> 如果您不能使用“禁用”属性（因为它会删除 POST 时的值输入），并注意到 html 属性“只读”仅适用于 textarea 和一些输入（文本、密码、搜索，据我所知） )，最后，如果您不想费心复制所有带有隐藏输入的选择、**复选框**和收音机，您可能会发现以下函数或他喜欢的任何内部逻辑：

```
 addReadOnlyToFormElements = function (idElement) {

        // html readonly don't work on input of type checkbox and radio, neither on select. So, a safe trick is to disable the non-selected items
        $('#' + idElement + ' input[type="checkbox"]:not(:checked)').prop('disabled',true); 

        // and, on the selected ones, to deactivate mouse/keyboard events and mimic readonly appearance
        $('#' + idElement + ' input[type="checkbox"]:checked').prop('tabindex','-1').css('pointer-events','none').css('opacity','0.5');
    } 
```

没有什么比删除这些只读的更容易的了

```
removeReadOnlyFromFormElements = function (idElement) {

     // Remove the disabled attribut on non-selected
    $('#' + idElement + ' input[type="checkbox"]:not(:checked)').prop('disabled',false); 

    // Restore mouse/keyboard events and remove readonly appearance on selected ones
    $('#' + idElement + ' input[type="checkbox"]:checked').prop('tabindex','').css('pointer-events','').css('opacity','');
} 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2017-12-08T10:25:12.477

通过 CSS：

```
<label for="">
  <input type="checkbox" style="pointer-events: none; tabindex: -1;" checked> Label
</label> 
```

*IE<10 不支持指针事件*

[https://jsfiddle.net/fl4sh/3r0v8pug/2/](https://jsfiddle.net/fl4sh/3r0v8pug/2/)

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2015-11-25T09:03:19.413

```
document.getElementById("your checkbox id").disabled=true; 
```

# php - 如何编写这个包含等号的 PHP 字符串？

> ID：12267247
> 
> 赞同：2
> 
> 时间：2012-09-04T15:58:17.760
> 
> 标签：php, html, string, url

```
<?
$xm="1?x=1";
if($_GET["x"]=="1" || $_GET["x"]=='$xm'){ ?>
String Works
<? } ?> 
```

基本上，网址是：

```
http://site.com/shop/category/product?x=1?x=1 
```

提交表单时会发生这种情况。我无权将其更改为：

```
http://site.com/shop/category/product?x=1&x2=1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:04:57.427

将其更改为：

```
<?
$xm="1?x=1";
if($_GET["x"]=="1" || $_GET["x"]=="{$xm}"){ ?>
String Works
<? } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:05:29.737

如果 URL 看起来像`...product?x=1?x=1`，则`$_GET`数组将如下所示：

```
array(1) {
    ["x"] => string(5) "1?x=1"
} 
```

所以你的情况只需要看起来像：

```
if ($_GET["x"] == '1?x=1') 
```

您的问题只是您`$xm`用单引号引用变量，这实际上导致字符串“$xm”。

现在显然，这是一个相当损坏的 URL。如果您不知道其中会发生多少次`?x=1`，则很难与任何恒定的事物进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T16:04:35.650

您所拥有的应该可以工作，而更改`'$xm'`不会评估为`"1?x=1"`：

```
if (isset($_GET['x']) && ($_GET['x'] == 1 || $_GET['x'] == $xm)) {
    echo 'string works';
} 
```

如果参数总是数字，你也可以`$_GET['x']`在比较之前把它写成一个整数：

```
if (isset($_GET['x']) && $_GET['x'] == 1) {
    echo 'string works';
} 
```

这是有效的`'1?x=1' == 1`，但也`'1?x=2' == 1`......如果这不是所需的行为，请告诉我。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-04T16:01:49.253

每当你想建立链接时使用[http_build_query](http://php.net/manual/en/function.http-build-query.php)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-04T16:05:28.650

等号在 url 上下文中具有特殊含义。需要对它们进行编码以使用 urnencode() 或 rawurlencode() 或 base64 编码将它们视为文字值

# file - 使用 log4j 重新启动时，滚动文件会被删除

> ID：12267252
> 
> 赞同：2
> 
> 时间：2012-09-04T15:58:30.630
> 
> 标签：file, log4j, restart

我有一个使用 log4j 记录的网络应用程序。

这是配置：

```
log4j.logger.apppackage.app=INFO, app
log4j.appender.app=org.apache.log4j.DailyRollingFileAppender
log4j.appender.app.File=/usr/local/apache-tomcat-6.0.14-3/logs/app.log
log4j.appender.app.DatePattern='.'yyyy-MM-dd
log4j.appender.app.Append=true
log4j.appender.app.layout=org.apache.log4j.PatternLayout
log4j.appender.app.layout.ConversionPattern=%d [%C{1}-%t] %m%n 
```

使用此配置，app.log 文件将在午夜正确滚动。

今天我停止了应用程序，查看了文件，有 4 或 5 个滚动文件。

我重新启动了应用程序，所有滚动的文件都消失了！

我的印象是“ `Append=true`”设置是为了避免这种情况？

重新启动应用程序时如何保留滚动记录的文件？

# c# - 模板化控件中的按钮：事件未触发

> ID：12267254
> 
> 赞同：1
> 
> 时间：2012-09-04T15:58:32.490
> 
> 标签：c#, asp.net, event-handling

我有一个模板化控件，但在从其中触发事件时遇到问题。

我的实际控件模板比较多，稍微复杂一些，但是它的本质就是这么简单：

```
<MyControl>
    <SomeTemplate>
        <%# Container.Blabla %>
        <asp:Button runat="server" id="someButton" OnClick="ClickAction" />
    </SomeTemplate>
</MyControl> 
```

一切似乎都很好，但点击其中的按钮不会触发事件处理程序（它位于我的*页面*代码隐藏中）。我已经在我的控制之外（或在中继器内）测试了一个按钮，它工作得很好。

我想这归结为添加或数据绑定所有内容的顺序，但我看不出是什么。这是我控制的本质：

```
public class SomeControl : Control, INamingContainer
{
    [PersistenceMode(PersistenceMode.InnerProperty)]
    [TemplateContainer(typeof(SomeTemplateContainer))]
    public ITemplate SomeTemplate { get; set; }

    public override ControlCollection Controls
    {
        get
        {
            EnsureChildControls();
            return base.Controls;
        }
    }

    protected override void CreateChildControls()
    {
        if (ChildControlsCreated)
            return;
        base.Controls.Clear();

        // Creating template containers, instantiating in controls and adding controls
        DataBind(); 
        ChildControlsCreated = true;
    }

    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);

        // A bunch of stuff I know work since it operates independently of my button
    }

    // Some private utility methods        
} 
```

我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:27:23.893

您必须添加`someButton.Click`您`ItemCreated`的中继器事件

```
var button = (Button)e.Item.FindControl("someButton") ;
button.Click += ...... 
```

# android - 铃声响几秒钟然后停止

> ID：12267255
> 
> 赞同：0
> 
> 时间：2012-09-04T15:58:33.477
> 
> 标签：android

我有以下代码，可以为我的活动提供铃声。我需要这个铃声持续响铃 30 秒。从下面的代码可以看出，我使用定时器在第 30 秒停止此铃声。我遇到的问题是，它不是连续响 30 秒，而是响一次然后停止。有人可以指出解决方案，以便我可以连续播放 30 秒的铃声吗？

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);
    final Ringtone r = RingtoneManager.getRingtone(getApplicationContext(), notification);
    r.play();
    final Timer t = new Timer();
    t.schedule(new TimerTask() {
        public void run() {
            r.stop();
            t.cancel();
            finish();
        }
    }, 30000);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:05:45.807

可能是因为在 onCreate 之后 Ringtone 和 Timer 被删除了。

使铃声和计时器成为您活动的私人成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-11T14:39:21.723

请尝试以下代码。

```
private Uri notification;
private  final Ringtone r;
public void onCreate(Bundle savedInstanceState) {
             super.onCreate(savedInstanceState);
             setContentView(R.layout.main);
             playRing();

}//end of onCreate

private void playRing(){
    notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);
    r = RingtoneManager.getRingtone(getApplicationContext(), notification);
    r.play();
    final Timer t = new Timer();
    t.schedule(new TimerTask() {
        public void run() {
            r.stop();
            t.cancel();
            // I recommend not to put finish() in onCreate() method
            //finish();
        }
    }, 30000);
} 
```

# asp.net-mvc - 属性上的 ForeignKeyAttribute 无效

> ID：12267256
> 
> 赞同：1
> 
> 时间：2012-09-04T15:58:36.057
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, entity-framework

我已阅读[如何在 MVC3 中使用 Code First Entity Framework (4.1) 声明外键关系？](https://stackoverflow.com/questions/5542864/how-should-i-declare-foreign-key-relationships-using-code-first-entity-framework)但我无法得到任何结果。它有以下错误：

> 类型“MyBlog.Tbl_Footer_Item”的属性“Footer_Item_Header_ID”上的 ForeignKeyAttribute 无效。在依赖类型“MyBlog.Tbl_Footer_Item”上找不到导航属性“Tbl_Footer_Header”。Name 值应该是有效的导航属性名称。

在这条线上：

```
Dim footerNavElements = db.Tbl_Footer_Headers.Where(Function(i) i.Footer_Header_Order = 1).Single.Items 
```

这是我的父模型：

```
Imports System.Data.Entity
Imports System.ComponentModel.DataAnnotations

Public Class Tbl_Footer_Header

    <Key()> Public Property Footer_Header_ID() As Integer
    Public Property Footer_Header_Content() As String
    Public Property Footer_Header_Order() As Integer

    Public Overridable Property Items As ICollection(Of Tbl_Footer_Item)

End Class

Public Class FooterHeaderDbContext
    Inherits DbContext

    Public Property Tbl_Footer_Headers As DbSet(Of Tbl_Footer_Header)

End Class 
```

这是我的孩子模型：

```
Imports System.Data.Entity
Imports System.ComponentModel.DataAnnotations

Public Class Tbl_Footer_Item

    <Key()> Public Property Footer_Item_ID() As Integer
    <ForeignKey("Tbl_Footer_Header")>
    Public Property Footer_Item_Header_ID() As Integer
    Public Property Footer_Item_Content() As String
    Public Property Footer_Item_Link() As String
    Public Property Footer_Header_Order() As Integer

    Public Overridable Property Header As Tbl_Footer_Header

End Class

Public Class FooterItemDbContext
    Inherits DbContext

    Public Property Tbl_Footer_Items As DbSet(Of Tbl_Footer_Item)
    Public Property Tbl_Footer_Headers As DbSet(Of Tbl_Footer_Header)

End Class 
```

我该怎么做才能使操作产生没有错误的结果？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T16:14:01.650

您的外键注释应该是属性的名称，而不是类型。

您的导航属性是标题：

```
Public Overridable Property Header As Tbl_Footer_Header 
```

因此，您的注释应该引用该属性。将其更改为：

```
<ForeignKey("Header")>
Public Property Footer_Item_Header_ID() As Integer 
```

# linux - 在 Linux Redhat 服务器上编辑文本文件的脚本

> ID：12267257
> 
> 赞同：0
> 
> 时间：2012-09-04T15:58:36.750
> 
> 标签：linux, shell, scripting

我要完成的任务是编写一个脚本来访问 Red Hat 服务器，导航到某个目录，并将内容添加到文本文件中。我将如何完成这项任务？我使用什么脚本语言？等等

我在脚本语言方面没有任何经验，我只是 Java 应用程序和偶尔的 C# 方面的专家。

希望有人可以提供帮助。这对我来说非常有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:04:51.853

如果您只是想追加一行，您可以使用 SSH（用于连接）并像这样连接到文件的末尾：

```
echo "New line to text file" | ssh myserver.com 'cat >> /var/myfile.txt' 
```

如果您尝试更改内容，则需要先下载该文件，然后再通过诸如`sed`或之类的实用程序运行该文件`awk`，然后将其上传回服务器。`scp`可用于安全下载和上传文件，但此处描述`sed`或`awk`超出了简要回答的范围。

# windows - 使用 Innosetup 在我安装的软件上激活 UAC

> ID：12267264
> 
> 赞同：1
> 
> 时间：2012-09-04T15:58:54.977
> 
> 标签：windows, inno-setup, uac

我正在使用 inno setup 安装我的软件（myprog.exe），我想强制用户以管理员身份启动 myprog.exe，但我不知道！我的 exe 在图标上没有 uac 盾牌，它可以在没有“右键单击”-“以管理员身份运行”的情况下启动

我已经为安装程序设置了 PrivilegesRequired=admin 但我只是在安装阶段。

事实上，我想告诉 Windows “嘿，我的程序很危险，allays 要求以管理员身份运行它”

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T16:37:57.603

应用程序本身 (myprog.exe) 应使用清单构建，以指定它需要管理员权限。请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/bb756929.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756929.aspx)

因此，应用清单必须包含以下元素：

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false"/> 
```

# macos - 基于文档的应用程序中的 NSNotificationCenter

> ID：12267268
> 
> 赞同：3
> 
> 时间：2012-09-04T15:59:12.803
> 
> 标签：macos, cocoa, nsnotificationcenter, nsdocument

我`NSNotificationCenter`用来在基于文档的应用程序中发送自定义通知。

基于文档的应用程序可以有许多打开的文档。理想情况下，我希望文档及其子级仅接收在文档或其子级中创建的通知。换句话说，一个文档应该只接收同一个文档生成的通知。

起初我以为我可以使用`notificationSender`参数 of[`addObserver:selector:name:object:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsnotificationcenter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNotificationCenter/addObserver%3aselector%3aname%3aobject%3a)但后来我意识到我并不总是知道哪个对象会发送通知。

我是否必须检查我是否在每个自定义通知的正确文档中？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T18:46:45.760

我认为如果您将主文档`notificationSender`用作`addObserver:selector:name:object:`和`postNotificationName:object:`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-25T14:43:39.903

`NotificationCenter`您可以在您的类中定义 a`NSDocument`并使用它在文档中发布通知（Swift）：

```
class Document: NSDocument {

    let notificationCenter = NotificationCenter()

    // Other stuff
} 
```

并这样称呼它：

```
document.notificationCenter.post(name: yourNotificationIdentifier, object: nil) 
```

# json - Sencha Touch 2 动态物品数组

> ID：12267270
> 
> 赞同：1
> 
> 时间：2012-09-04T15:59:17.587
> 
> 标签：json, sencha-touch, sencha-touch-2

在以下示例中，我想将硬编码的项目数组替换为对 jsonstore 的调用，并使用动态读取的相同项目。我尝试通过 xtype 引用商店，但收到一个错误，即 Object 没有方法 'getItemId' - 请让我知道我做错了什么，非常感谢您的帮助

```
Ext.define("MyApp.view.Main", {
    extend: 'Ext.ux.slidenavigation.View',

    requires: [
        'Ext.Container',
        'Ext.MessageBox',
        'Ext.Panel',
        'Ext.Toolbar',
        'Ext.event.publisher.Dom'
    ],

    config: {
        fullscreen: true,
        slideSelector: 'x-toolbar',
        selectSlideDuration: 200,
        list: {
            maxDrag: 400,
            width: 200,
            items: [{
                xtype: 'toolbar',
                docked: 'top',
                ui: 'light',                    
                title: {
                    title: 'Navigation',
                    centered: false,
                    width: 200,
                    left: 0
                }
            }]
        },
        /***************************************************************/
        /* Want to replace this items array with dynamic call to store */
        /***************************************************************/
        items: [{
            title: 'Item 1',
            slideButton: {
                selector: 'toolbar'
            },
            items: [{
                xtype: 'toolbar',
                title: 'Item 1',
                docked: 'top'
            },{
                xtype: 'panel',
                html: '<img src="resources/images/guide.jpg" width="100%" />'
            }]
        },{
            title: 'Item 2',
            slideButton: {
                selector: 'toolbar'
            },
            items: [{
                xtype: 'toolbar',
                title: 'Item 2',
                docked: 'top'
            },{
                xtype: 'panel',
                html: '<img src="resources/images/guide.jpg" width="100%" />'
            }]
        }]
    } 
```

商店样品

```
Ext.define('MyApp.store.Navigation', {
    extend: 'Ext.data.Store',
    alias: 'widget.navstore',
    requires: [
        'MyApp.model.Navigation'
    ],

    config: {
        model: 'InspectionApp.model.Navigation',
        storeId: 'navStore',
        proxy: {
            type: 'ajax',
            url: '/path/to/navigation.json',
            reader: {
                type: 'json',
                rootProperty: 'items'
            }
        },
        grouper: {
            property: 'group',
            sortProperty: 'groupOrder'
        }
    }
}); 
```

json样本

```
[
    {
        "title": "Item 1",
        "slideButton": "{selector: 'toolbar'}",
        "items": "[{xtype: 'toolbar',title: 'Item 1',docked: 'top'},{xtype: 'panel',html: '<img src='resources/images/guide.jpg' width='100%' />'}]",
        "handler": ""
    },
    {
        "title": "Item 2",
        "slideButton": "{selector: 'toolbar'}",
        "items": "[{xtype: 'toolbar',title: 'Item 2',docked: 'top'},{xtype: 'panel',html: '<img src='resources/images/guide.jpg' width='100%' />'}]",
        "handler": ""
    }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:09:08.097

假设您的商店正在正确加载，您可以通过调用来获取对它的引用

`Ext.getStore('navStore')`

或通过将您的商店分配给一个变量：

```
var yourStore = Ext.define('MyApp.store.Navigation', {
    extend: 'Ext.data.Store',
    alias: 'widget.navstore',
    requires: [
        'MyApp.model.Navigation'
    ],

    config: {
        model: 'InspectionApp.model.Navigation',
        storeId: 'navStore',
        proxy: {
            type: 'ajax',
            url: '/path/to/navigation.json',
            reader: {
                type: 'json',
                rootProperty: 'items'
            }
        },
        grouper: {
            property: 'group',
            sortProperty: 'groupOrder'
        }
    }
}); 
```

要填充 items 对象，我会将其放入容器中：

```
{
    xtype: 'container',
    id: 'container_id',
} 
```

然后

```
for (var i = 0; Ext.getStore('navStore').getCount(); ++i){
    var record = Ext.getStore('navStore').getAt(i);
    var myComponent = Ext.create(...
      //make the component you want to add with the data from the record
    );
    Ext.ComponentQuery.query('#container_id')[0].add(myComponent);
} 
```

# ajax - Silverstripe - 通过包含 CSS/JS 的 ajax 加载页面

> ID：12267271
> 
> 赞同：1
> 
> 时间：2012-09-04T15:59:17.763
> 
> 标签：ajax, content-management-system, silverstripe

在 silverstripe 项目中，我正在通过 ajax 加载整个页面。因此，我在 Page-Contoller 中添加了以下功能：

```
public function ajax(){
    return $this->renderWith('MyTemplate');
} 
```

到目前为止，这工作正常，当我浏览到 mysite.com/mypage/ajax 时，我得到了我想要的页面。唯一的问题是模板“MyTemplate”中包含的 JS/CSS 文件：

```
<% require javascript(my.js) %>
<% require css(my.css) %> 
```

css/js 没有出现在源代码中——不知何故，它不包括在内，尽管它是模板“MyTemplate”的一部分。

那么有没有办法用 silverstripe 方法以一种很酷的方式添加 css/js？

我试过这个：

```
public function ajax(){
    Requirements::css("my.js");
    return $this->renderWith('ProjectPage');
} 
```

但到目前为止还没有成功。非常感谢，弗洛里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:19:54.790

您需要将以下 javascript 文件加载到您的站点中，具体取决于 silverstripe 版本：

SS3 - /framework/javascript/jquery-ondemand/jquery.ondemand.js

或者

SS2.4-/蓝宝石/javascript/core/jquery.ondemand.js

据我所理解; 当您发出 ajax 请求时，任何新的 css 或 javascript 要求都会添加到请求标头中。然后，当请求成功时，ondemand.js 会为您将这些脚本拉入文档中（如果它们尚不存在）。

# c++ - 无法从 'VP 转换参数 1 '到'副总裁 &' ，又一个 VS 错误

> ID：12267274
> 
> 赞同：2
> 
> 时间：2012-09-04T15:59:18.787
> 
> 标签：c++, visual-studio, templates

以下代码在 gcc 中没有问题。在 VS 2010 express 中它失败了

```
------ Build started: Project: helium, Configuration: Debug Win32 ------
  testvs.cpp
..\..\helium\src\legacy\testvs.cpp(21): error C2664: 'ulink' : cannot convert parameter 1 from 'VP<T>' to 'VP<T> &'
          with
          [
              T=F
          ]
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

对于任何 Visual Studio 版本都是一样的，还是仅限于 vs 2010 的问题？如果删除第二个 operator() 定义，问题就会消失

```
template<typename T> struct S{
    void operator()(T&){}
    void operator()(){}
};

  template <typename T,typename G=typename T::GP,void (S<T>::*f)(T&) =&S<T>::operator() > struct VP{
 void fa(){}
 };

template<typename T> void ulink( VP<T >& v){}

  struct F{
    typedef int GP;
  };

   void f(){

     VP<F> vps;
     ulink(vps);
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T16:23:17.467

感谢 Seth Carnegie 确认这是另一个 VS 未解决的错误。

可能的解决方法

1) 包含在另一个结构中

```
template<typename L> struct Con{
     L& l;
     Con(L& pl):l(pl){}
};

template<typename T> void ulink(const Con<VP<T > >& v){
v.l.fa();
} 
```

2）保持模板更通用

```
template<typename T> void gulink(T& v){
v.fa();
} 
```

# java - Struts2 自定义登录拦截器

> ID：12267276
> 
> 赞同：0
> 
> 时间：2012-09-04T15:59:32.227
> 
> 标签：java, jsp, jakarta-ee, struts2

有人可以解释一下如何编写一个自定义登录拦截器来检查用户名、密码并检查用户的有效日期是否大于当前日期。我是 java 编程和 struts 2 的新手...我真的很感激一步一步的信息。我通过手动 jdbc 连接获取用户名等信息...我为此设置了 jndi。这也需要有会话管理。

因此，逐步使用以下代码示例会很好，

1) dao 使用 jndi 从 DB 获取用户名等

2) 具有会话感知的登录操作

3) 拦截器

4) 登录.jsp

5) 拦截器的struts.xml定义

6) task.jsp 和 task2.jsp（只有在用户登录时才能看到的内部页面）

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T16:51:57.000

你在正确的轨道上。

有很多关于该主题的文章（谷歌搜索）。选择一个并尝试理解它。拦截器部分应如下所示：

```
public String intercept (ActionInvocation invocation) throws Exception {
    // Get the action context from the invocation so we can access the
    // HttpServletRequest and HttpSession objects.
    final ActionContext context = invocation.getInvocationContext ();
    HttpServletRequest request = (HttpServletRequest) context.get(HTTP_REQUEST);
    HttpSession session =  request.getSession (true);

    // Is there a "user" object stored in the user's HttpSession?
    Object user = session.getAttribute (USER_HANDLE);
    if (user == null) {
        // The user has not logged in yet.

        // Is the user attempting to log in right now?
        String loginAttempt = request.getParameter (LOGIN_ATTEMPT);
        if (! StringUtils.isBlank (loginAttempt) ) { // The user is attempting to log in.

            // Process the user's login attempt.
            if (processLoginAttempt (request, session) ) {
                // The login succeeded send them the login-success page.
                return "login-success";
            } else {
                // The login failed. Set an error if we can on the action.
                Object action = invocation.getAction ();
                if (action instanceof ValidationAware) {
                    ((ValidationAware) action).addActionError ("Username or password incorrect.");
                }
            }
        }

        // Either the login attempt failed or the user hasn't tried to login yet, 
        // and we need to send the login form.
        return "login";
    } else {
        return invocation.invoke ();
    }
} 
```

上面的代码示例是[本文](http://www.vitarara.org/cms/struts_2_cookbook/creating_a_login_interceptor)的一部分，您还可以在其中找到其他步骤。

我推荐的另一种方法是将 Spring Security 与 Struts 2 集成。这样您可以获得安全且经过验证的可配置安全堆栈。

# c# - Func<> 与委托和 lambda 表达式之间的区别

> ID：12267280
> 
> 赞同：11
> 
> 时间：2012-09-04T15:59:46.693
> 
> 标签：c#, delegates, lambda, func

在深入了解 C# 的更高级功能时，我遇到了一些代码，我并不完全知道它们之间的区别。关于这两行：

```
Func<string, int> giveLength = (text => text.Length); 
```

和

```
Func<string, int> giveLength = delegate(string text) { return text.Length; }; 
```

这可以以相同的方式使用：

```
Console.WriteLine(giveLength("A random string.")); 
```

所以基本上..这两行有什么区别？这些行是否编译为相同的 CIL？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-04T16:01:41.223

它们基本上是一样的。它们都是C# 规范术语中的*匿名函数*。

Lambda 表达式通常更简洁，也可以转换为[*表达式树*](http://msdn.microsoft.com/en-us/library/bb397951.aspx)，这对于进程外 LINQ 至关重要。

如果您不关心，匿名方法允许您删除参数列表。例如：

```
EventHandler handler = delegate { 
    Console.WriteLine("Sender and args don't matter");
}; 
```

鉴于后一点很少需要，匿名方法正在成为现代 C# 中的濒危物种。Lambda 表达式更为常见。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T16:01:15.807

> 所以基本上..这两行有什么区别？这些行是否编译为相同的 CIL？

写同一件事只有两种不同的方法。lambda 语法更新更简洁，但它们做同样的事情（在这种情况下）。

请注意，lambdas（`=>`语法）也可用于形成[表达式 Lambdas](http://msdn.microsoft.com/en-us/library/bb397687.aspx)，您可以在其中创建[表达式树](http://msdn.microsoft.com/en-us/library/bb397951.aspx)而不是委托。这很好，因为无论您使用的是 LINQ to Objects（基于 类似的委托`Func<T, TResult>`）还是 LINQ to Entities（使用`IQueryable<T>`和表达式树），您都可以使用相同的语法。

# c# - 在ubuntu上编译VS2010 c#解决方案（项目）

> ID：12267283
> 
> 赞同：3
> 
> 时间：2012-09-04T16:00:08.810
> 
> 标签：c#, visual-studio, ubuntu, mono

在 Ubuntu 上使用 Visual Studio 构建 ac# 解决方案的最佳方法是什么？有没有办法将 .sln 文件转换为 makefile？我应该使用单声道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:13:53.040

我要做的第一件事是[`Moma`](http://www.mono-project.com/MoMA)检查您的程序是否会按`Mono`原样运行。您还可以使用[`MonoDevelop`](http://monodevelop.com/)哪个可以使用 Visual Studio 项目。

来自他们的常见问题：*事实上，从 MonoDevelop 2.0 开始，默认的项目格式一直是 VS2008 风格的 MSBuild 项目，但也处理了 VS2005 和 VS2010 格式。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:03:37.100

C# 是一种 .NET 语言，.NET 是一种基于 Windows 的框架。[它已通过Mono Project](http://www.mono-project.com/Main_Page)移植到 Linux 操作系统（包括 Ubuntu）。所以是的，你需要使用 Mono。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T16:04:20.460

Mono 是我试过的最好的。它在[他们的主页](http://www.mono-project.com/Main_Page)上说它们彼此之间是二进制兼容的，所以如果它已经构建，你可以在 Mono 上运行它。无需重新编译。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T16:05:01.867

如果你想使用像 MsBuild 这样的进程，你最好的选择是使用 Mono。Mono 有类似的 xBuild。这个[SO question](https://stackoverflow.com/questions/54790/is-it-possible-to-build-msbuild-files-visual-studio-sln-from-the-command-line)有一些关于使用 Mono 的信息。

# jquery - 如何将类添加到 div

> ID：12267285
> 
> 赞同：0
> 
> 时间：2012-09-04T16:00:18.217
> 
> 标签：jquery, ruby-on-rails, twitter-bootstrap

我的布局中有这段代码来自[http://www.communityguides.eu/articles/18](http://www.communityguides.eu/articles/18)上的教程，其中包含有关如何将淡出添加到引导闪存消息的说明。

```
<% flash.each do |key, value| %>
    <div class="alert alert-block alert-<%= key == :notice ? "success" : key %>" data-dismiss="alert">
      <a class="close">×</a>
      <h4 class="alert-heading"><%= key.capitalize %>:</h4>
      <%= value %>
    </div>
<% end %> 
```

然后在一个咖啡脚本文件中，

```
$ ->
  $(".fadeout").delay(5000).fadeOut(1000); 
```

作者的说明说要添加“向 div 添加类淡出”，我已经尝试了我所知道的一切，但无法让它工作。有人可以告诉我在哪里添加 .fadeout 到布局？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:03:02.950

该元素需要具有该`.fadeout`选择器才能工作的类。

```
<% flash.each do |key, value| %>
    <div class="fadeout alert alert-block alert-<%= key == :notice ? "success" : key %>" data-dismiss="alert">
      <a class="close">×</a>
      <h4 class="alert-heading"><%= key.capitalize %>:</h4>
      <%= value %>
    </div>
<% end %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T16:03:05.110

好吧，我不是红宝石人

但是如果我没记错的话，你可以将类添加到 div 行

```
<div class="alert alert-block alert-... 
```

IE

```
<div class="fadeout alert alert-block alert- 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T16:10:40.230

他们的教程正在使用`twitter bootstraop 2.0.0`，他们声明`bootstrap`无法向模态添加效果。

在`bootstrap 2.1`中，它们包括向其模态的转换： [示例](http://twitter.github.com/bootstrap/javascript.html#modals)

在这种情况下，模态`div`可以包含类`fadeout`，或者您可以从站点下载`js`文件并包含类`bootstrap``fade`

如果您想知道如何通过 jQuery 将类添加到 div： [`addClass()`](http://api.jquery.com/addClass/)

# java - 在 Maven 的包生成过程中如何选择一个 /META-INF/context.xml？

> ID：12267288
> 
> 赞同：3
> 
> 时间：2012-09-04T16:00:38.030
> 
> 标签：java, maven

我有一个巨大的应用程序，在不同配置的不同环境中运行。所以我需要生成不同的包`/META-INF/context.xml`。

这是我的`META-INF/`文件夹：

```
META-INF/
  context.xml  
  context2.xml  
  context3.xml  
  context4.xml 
```

我已经尝试过**maven-antrun-plugin**，但它无法处理里面的文件`META-INF/`。

现在，我正在尝试**maven-war-plugin**，但它不会重命名或复制文件。它只添加或排除文件。所以我需要一些帮助。

我想生成一个战争包，只选择其中一个，重命名或覆盖原来的`context.xml`.

**注意：**我正在使用配置文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:36:30.867

首先，不要将输入文件放在 META-INF 中。将它们放在 maven 不知道的文件夹中。现在将属性设置为每个配置文件中的文件名

```
 <properties>
    <folder>path/to/context/files</folder>
  </properties>

<profile>
  <id>foo</id>
  <properties>
    <filename>context2.xml</filename>
  </properties>
</profile>
<!-- etc. --> 
```

现在使用 antrun 插件并定义一个 ant 属性：

```
<property name="maven.context.file" value="${folder}/${filename}"/> 
```

在调用 ant 目标之前，[如 antrun 使用页面所述](http://maven.apache.org/plugins/maven-antrun-plugin/usage.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:08:55.783

一种选择`<packagingExcludes>`是`<packagingIncludes>`在`maven-war-plugin`.

例如排除`context.xml`, 和`context1.xml`:

```
 <plugin>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.2</version>
        <configuration>
          <packagingExcludes>META-INF/context.xml,META-INF/context1.xml</packagingExcludes>
        </configuration>
  </plugin> 
```

您可以在包含和排除部分使用正则表达式来过滤掉各种文件。这个 maven [wiki](http://maven.apache.org/plugins/maven-war-plugin/examples/including-excluding-files-from-war.html)涵盖了有关此主题的更多示例和详细信息。

# javascript - 动态 CKEditor jQuery 更改事件

> ID：12267297
> 
> 赞同：1
> 
> 时间：2012-09-04T16:01:15.127
> 
> 标签：javascript, jquery, ckeditor

> **可能重复：**
> [如何检测 ckeditor 实例中的更改事件？](https://stackoverflow.com/questions/10391136/how-can-i-detect-on-change-event-in-ckeditor-instance)

我已经动态地生成了 CKEDITORS，就像我喜欢通过 jquery 使用按钮一样。我像这样生成它。Add 是按钮的 id，config 是数组。

```
$('#add').click(function(){

$('<div class = "editors name="dynamic[]"><div class="field" cols="20" id="'+id+'" name="dynamic[]"      rows="10"></div><div>').fadeIn('slow').appendTo('.inputs');

$('.field:last').ckeditor(config); 
```

'.field:last' 用于在已经创建的 editors 之后创建一个新的 ckeditor，每次点击按钮。

但是我如何使用这些编辑器附加更改功能或按键或按键功能。我已经在 javascript 中完成了它，我已经修复了静态编辑器。就像下面的代码一样。但是我怎么能在jquery中做到这一点。

通过 JavaScript 在 CKEditor 上运行时更改事件。

```
CKEDITOR.on('instanceCreated', function (e) {

e.editor.on('change', function (ev) {

   var temp = ev.editor.getData();
   alert(temp);

}); }); 
```

谢谢

# algorithm - 提取满足一定条件的点

> ID：12267302
> 
> 赞同：0
> 
> 时间：2012-09-04T16:01:51.117
> 
> 标签：algorithm, geometry, extract, point

我在一个平面上有一组点。它们形成某种形状。我需要从这个数组中提取点，这些点只形成这种形状的直线。

目前我有一个算法，但效果不是很好。我取前两点，画一条直线，然后检查以下点是否有一定的公差。但是有一个问题：形成直线的点并不是真的在直线上，而是有一些偏差。这个偏差是相当大的。如果在我的算法中我使偏差足够大以从直线部分获得点，那么其他点在稍微弯曲的部分上但偏差小于指定的点也被提取。

我正在寻找有关如何执行此类任务的一些想法。

这是图片：

![在此处输入图像描述](../Images/e31f5b6ae28ccc8b96eddce842064167.png)

圆圈中是我要提取的部分。红点是我可以用我的方法提取的部分。如果我增加公差，那么我也会错过直件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:39:31.563

首先，如果您已经有一些候选点子集并且想要检查它们是否位于一条直线上。使用[线性回归](http://en.wikipedia.org/wiki/Linear_regression)的形式来确定最佳拟合线，然后检查它的拟合程度，并基于此接受或拒绝该特定段是线性的假设。

最标准的方法之一是使用[最小二乘](http://en.wikipedia.org/wiki/Least_squares)法。

识别子集是一个不同的问题，最佳解决方案将在很大程度上取决于您拥有的数据类型和目标。我建议枚举所有段是一个很好的起点，如果数据量不是非常大，我认为这应该在不超过三次方时间内是可行的。

当然可以应用一些近似值，例如选择序列中的一个点并通过在任一侧迭代添加点来构建一个子集，只要该段在公差阈值内保持线性，而不是在段足够长时接受或拒绝它.

我在这里假设曲线可以通过坐标之一参数化。如果不是这种情况，例如如果曲线是闭合的，则可能需要额外的步骤来将曲线分成可参数化的段。

**编辑：如何检查一个段是直** 的 有很多选项。

**首先**，我希望对于一条直线，平均偏差与添加新点大致相同，然后您可以简单地在给定数据的基础上找到一个合理的阈值。

**第二种**选择是将子集进一步拆分为固定数量的部分（例如 2 个），为每个部分找到最佳拟合线，然后进行比较。在直线的情况下，应该预测大致相同的线，但对于曲线，它会有所不同。

**第三种**选择是执行非线性曲线拟合，例如拟合二次曲线并检查二次项的系数——如果直线是直的，它应该接近于零。

当然，在每种情况下，段大小和点与该段的偏差之间都有一个折衷。在极端情况下，要么存在一个具有巨大偏差的巨大线性段，要么存在一大堆 0 偏差的 2 点段。必须为给定的数据集选择偏差的实际阈值、正切曲线之间的差异或二次项的大小（取决于您喜欢的选项）以满足您的需求。看情节，我会说应该选择阈值以允许长度为 10 左右的段。

# c# - 将标准 C# 转换为符合 MonoTouch 的代码

> ID：12267306
> 
> 赞同：3
> 
> 时间：2012-09-04T16:02:13.763
> 
> 标签：c#, bitmap, xamarin.ios

我需要将以下方法从 C# 转换为符合 MonoTouch 的代码：

```
private WritableBitMap CreateBitMapWPF(RGBPaletteRecord rgbPalette, double dpi)
        {
            WritableBitMap bitmapImage = null;

            try
            {
                bitmapImage = new WritableBitMap(TileRecord.PixelWidth, TileRecord.PixelHight, dpi, dpi, PixelFormats.Rgb24, BitmapPalettes.Halftone256);
              //  int nStride = (bitmapImage.PixelWidth * bitmapImage.Format.BitsPerPixel + 7) / 8;
                int nStride = (bitmapImage.PixelWidth * bitmapImage.Format.BitsPerPixel  / 8);
                System.Windows.Int32Rect rect = new System.Windows.Int32Rect(0, 0, TileRecord.PixelWidth, TileRecord.PixelHight);

                byte[] data = GetBytes(rgbPalette);

                bitmapImage.WritePixels(rect, data, nStride, 0);
            }
            catch (Exception ex)
            {

            }

            //// temp write to file to test         
            //using (FileStream stream5 = new FileStream(@"C:\test.bmp", FileMode.Create))
            //{

            //    BitmapEncoder encoder5 = new BmpBitmapEncoder();
            //    encoder5.Frames.Add(BitmapFrame.Create(bitmapImage));
            //    encoder5.Save(stream5);
            //    stream5.Close();
            //}

            //
            return bitmapImage;

        } 
```

我不是要求某人进行实际转换，但我想知道在转换此代码时采取的最佳方法是什么？我应该专注于转换为使用 MonoTouch 库吗？标准系统库？任何建议将不胜感激。

非常感谢，

泰辛

**编辑;** 基本上这种转换的目的是我有这些 C# 类来执行一组与位图图像有关的功能，我正在使用 MonoTouch，因为我需要在 iPhone 应用程序中使用这些文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T17:35:24.480

> 转换此代码时最好的方法是什么？

这取决于您的目标和应用程序。如果您计划跨产品/版本共享代码，那么您最好有一个 API 来抽象平台细节并为每个平台单独代码。

> 我应该专注于转换为使用 MonoTouch 库吗？

iOS（或 MonoTouch）不支持 WPF API。因此，您最接近的*选择*是查看 MonoTouch 提供的 iOS API（即在查看 3rd 方库之前查看已经可用的内容）。

通过使用 iOS **CoreGraphics**（通常与旧`System.Drawing`模型非常相似），您会发现类似的功能。对于位图图像，您应该阅读该`CGImage`类型的文档。

*   [MonoTouch 的 CGImage 文档 (C#)](http://iosapi.xamarin.com/?link=T:MonoTouch.CoreGraphics.CGImage)
*   [Apple CGImage 文档](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGImage/Reference/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:45:59.690

你还应该看看这个项目：

[https://github.com/praeclarum/CrossGraphics](https://github.com/praeclarum/CrossGraphics)

由 Frank Krueger (gg!) 制作，它使您能够在平台之间共享相同的基本图形代码。它是一个抽象了每个平台的细节实现的 API。目前它似乎仅限于基本图形（如fillrect等......

# sql - Select 语句不会从字段中提取所有数据 - SQL Server 2008 R2

> ID：12267308
> 
> 赞同：0
> 
> 时间：2012-09-04T16:02:24.657
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2, coldfusion-9

我有这个查询来从我的数据库中获取结果。我的问题是`selectedanswer`select 语句的一部分并没有从中提取所有数据`r.textboxmulti`。

以下是我的查询。

```
 <cfquery name="fullResults" datasource="#variables.dsn#">
    select s.id, s.name surveyname, q.question, subq.answer subquestion, isnull(isnull(isnull(isnull(a.answer, **r.textboxmulti**),r.other),r.textbox),r.truefalse) as **selectedanswer**, a.*, r.*
    from results r
    join questions q on r.questionidfk = q.id
    left join answers subq on r.itemidfk = subq.id
    left join answers a on r.answeridfk = a.id
    join surveys s on q.surveyidfk = s.id
    where owneridfk = <cfqueryparam value="#arguments.ownerid#" cfsqltype="CF_SQL_VARCHAR" maxlength="35">
    order by s.id, owneridfk, q.rank, subq.rank desc
   </cfquery 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:52:21.893

尝试使用`COALESCE`而不是`ISNULL`. 这些导致不同的数据类型优先规则 - 我怀疑`a.answer`是`varchar(255)`. 显式转换第一个参数也无妨：

```
COALESCE(CONVERT(VARCHAR(MAX), a.answer),
  r.textboxmulti, r.other, r.textbox, r.truefalse) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:27:08.010

你能解释一下“所有数据”是什么意思吗？如果您的意思是它没有从 r.textboxmulti 提取某些行的数据，这意味着这些行的数据为空，并且该事实被您包裹的 isnulls 所掩盖（顺便说一下，您可以考虑使用合并而不是嵌套 isnull ....)

如果您的意思是它正在获取数据但保留了一些数据，那么一种可能性是它正在被截断。如果 SQL Server（或您正在查看它的下一个处理阶段......）将其视为太小而无法保存返回值的数据类型，则可能会发生这种情况，这有时可能是由于隐式类型转换而发生的。您可以通过显式转换为足够大的数据类型来解决这个问题。

最后一种罕见的可能性是 r.textboxmulti 包含一个 ascii 空字符。许多程序（包括 SQL Server 打印命令...）将其作为一个命令，以在之后停止显示该字符串中的任何内容。这种情况不常出现，但我自己也遇到过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T16:56:51.817

在 SQL Server 管理工作室中，有一个设置告诉它在网格或文本视图中为一列显示多少个字符。

如果您要在应用程序中使用数据；你在那里看到所有的数据吗？这肯定表明您使用 SSMS 中的默认设置仅显示 255 个字符。

# php - 实现 Zend Framework 2 自动加载器

> ID：12267309
> 
> 赞同：2
> 
> 时间：2012-09-04T16:02:26.280
> 
> 标签：php, zend-framework, zend-framework2, zend-autoloader

是否可以用 ZF2 Autoloader 替换 ZF1 Autoloader，因为它似乎可以显着提高性能？

我没有找到任何教程，也没有太多关于这方面的材料——我刚刚听说 ZF2 的 Autoloader 会快得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:59:01.600

您可以更新到 Zend Framework v1.12，它从 Zend Framework v2 向后移植了一些新的自动加载器功能，请参阅[http://devzone.zend.com/2554/zend-framework-1-12-0-stable-released/](http://devzone.zend.com/2554/zend-framework-1-12-0-stable-released/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:07:36.343

由于 ZF1 代码库用于`require_once`包含依赖项，因此 ZF1 自动加载器依赖于包含路径，这会导致性能不佳。

迁移到 ZF2 自动加载器（或[Composer](http://getcomposer.org/)的自动加载器）不会对性能产生重大影响。

# java - Java Swing BorderLayout 调整大小的困难

> ID：12267311
> 
> 赞同：5
> 
> 时间：2012-09-04T16:02:48.610
> 
> 标签：java, swing, layout, resize

我想让我的屏幕一分为二，所以我使用了带有东西部分的 BorderLayout。我在调整大小时遇到​​了问题，[在这里](http://www.leepoint.net/GUI/layouts/20borderlayout.html)我最终发现东西面板的宽度没有改变，北面板和南面板的高度没有改变，并且两者都在中心面板中发生了变化。

但是，我希望在调整大小时同时更改宽度和高度，并并排放置两个面板。我尝试了各种级别的嵌套来尝试让它工作，但我认为它不适用于 BorderLayout。

对于默认布局管理器来说，这似乎应该很容易，但也许我应该尝试不同的布局（例如 BoxLayout）来实现我想要的。

这里还有一些代码可以复制我正在谈论的问题（尝试调整窗口大小）：

```
import java.awt.BorderLayout;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Main extends JFrame {

    public static void main(String[] args) {
        JFrame window = new Main();
        window.setVisible(true);
    }

    public Main() {
        JButton east = new JButton("East");
        JButton west = new JButton("West");

        JPanel content = new JPanel();
        content.setLayout(new BorderLayout());

        content.add(east, BorderLayout.EAST);
        content.add(west, BorderLayout.WEST);

        setContentPane(content);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pack();
    }

} 
```

编辑：我不希望两边相等，大约 2:1 是我想要的比例。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T16:11:22.850

您可以在您的情况下使用的是[GridLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)，这里有两个`JButtons`将调整自己的大小作为`JFrame`调整大小。

```
import java.awt.GridLayout;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Main extends JFrame {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                JFrame window = new Main();
                window.setVisible(true);
            }
        });        
    }

    public Main() {
        JButton east = new JButton("East");
        JButton west = new JButton("West");

        JPanel content = new JPanel();
        content.setLayout(new GridLayout(1, 2));

        content.add(east);
        content.add(west);

        setContentPane(content);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pack();
    }

} 
```

此外，最好从 EDT - Event Dispatch Thread 运行与 GUI 相关的代码，而不是从主线程运行。请阅读[Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)中的并发，以获取有关该主题的更多信息。

**最新编辑：根据要求的评论**

使用 GridBagLayout 来指定你想要给出的尺寸

```
import java.awt.Color;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Main extends JFrame {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                JFrame window = new Main();
                window.setVisible(true);
            }
        });        
    }

    public Main() {
        JPanel east = new JPanel();
        east.setOpaque(true);
        east.setBackground(Color.WHITE);
        JPanel west = new JPanel();
        west.setOpaque(true);
        west.setBackground(Color.BLUE);

        JPanel content = new JPanel();
        content.setLayout(new GridBagLayout());

        GridBagConstraints gbc = new GridBagConstraints();
        gbc.anchor = GridBagConstraints.FIRST_LINE_START;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.weightx = 0.3;
        gbc.weighty = 1.0;
        gbc.gridx = 0;
        gbc.gridy = 0;

        content.add(east, gbc);
        gbc.weightx = 0.7;
        gbc.gridx = 1;
        content.add(west, gbc);

        setContentPane(content);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pack();
    }

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-04T16:19:32.087

你为什么不尝试`JSplitPane`：

```
import javax.swing.*;
import java.awt.*;

public class AppDemo {

    public static void main(String[] args) {

        SwingUtilities.invokeLater(() -> {
            JFrame frame = new JFrame();
            JButton eastButton = new JButton("East");
            JButton westButton = new JButton("West");
            JSplitPane splitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, eastButton, westButton);

            JPanel content = new JPanel();
            content.setLayout(new BorderLayout());
            content.add(splitPane, BorderLayout.CENTER);

            frame.setContentPane(content);
            frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
            frame.setPreferredSize(new Dimension(500, 400));
            frame.pack();
            frame.setVisible(true);
        });

    }
} 
```

你会得到这个：

![在此处输入图像描述](../Images/70989c940efe6c605e8b8f9f341a587c.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-11T12:25:47.880

如果你想保留你的 BorderLayout 你可以使用类似下面的对象：

```
public class ResizablePanel extends JPanel {

  public ResizablePanel(JComponent body) {

    setLayout(new BorderLayout());
    JButton resize = new JButton();
    resize.setPreferredSize(new Dimension(Integer.MAX_VALUE, 4));
    resize.addMouseMotionListener(new MouseAdapter() {
        public void mouseDragged(MouseEvent e) {
            Dimension preferredSize = ResizablePanel.this.getPreferredSize();
            ResizablePanel.this.setPreferredSize(new Dimension(preferredSize.width, preferredSize.height-e.getY()));
            ResizablePanel.this.revalidate();
        }
    });             
    add(resize, BorderLayout.PAGE_START);
    add(body, BorderLayout.CENTER);
  }
} 
```

现在用一个实例包裹你想要调整大小的部分`ResizablePanel`，你可以通过拖动细按钮来调整它的大小。

请注意，这是用于调整您放置在边框布局底部 (PAGE_END) 部分的面板**的高度**的代码，但更改它以调整宽度的大小应该相当简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-15T02:16:27.440

抱歉回复旧帖。我的解决方法是仍然使用 BorderLayout 但在调整组件大小后放入以下行

```
getLayout().layoutContainer(this); 
```

# drupal - 我想制作像drupal网站制作的图表

> ID：12267312
> 
> 赞同：1
> 
> 时间：2012-09-04T16:02:53.887
> 
> 标签：drupal, charts, drupal-7

我想制作图表，我尝试了 google chart api 模块、highchart 等，但似乎不够稳定。
我在问是否有一种方法或模块来制作图形和图表（例如 drupal 站点）并通过简单的方式生成一些报告。
谢谢 ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:07:48.143

您是指项目页面侧边栏中的新迷你图吗？例如[http://drupal.org/project/google_plusone](http://drupal.org/project/google_plusone)

它们是用库 flot 制作的：[http ://www.flotcharts.org/](http://www.flotcharts.org/)
[http://joeloughton.com/blog/web-applications/sparklines-using-flot/](http://joeloughton.com/blog/web-applications/sparklines-using-flot/)

统计图表也是用flot制作的。例如：
[http ://drupal.org/project/usage/google_plusone](http://drupal.org/project/usage/google_plusone)

如果你[谷歌“flot drupal.org”](https://www.google.com/search?&pws=0&q=flot%20drupal.org)，你会发现不同的模块（与视图集成等）和教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T15:35:22.107

请参阅[图表模块的比较以](https://www.drupal.org/node/2363985)获取（大量）可供选择的选项。2 个最常用（= 报告的安装）模块是[Chart](https://www.drupal.org/project/chart)模块或[Charts](https://www.drupal.org/project/charts)模块”。要让您使用任一模块，您可能需要查看[Chart](https://www.drupal.org/node/2370811)模块的（最近创建的）社区文档，或[图表](https://www.drupal.org/node/233753)模块。

还应考虑每个模块中相关图表库（引擎）附带的**许可证。**这是决定要选择的模块的（重要的？）选择标准之一。“可能的隐私问题”或“是否支持在 PDF 中保存图表”是另一个需要考虑的典型项目。

披露：我是上述比较和图表模块的作者，我希望这不会违反网站的[自我宣传政策](https://drupal.stackexchange.com/faq#promotion)。

# wpf - StackPanel 扩展父网格的外部大小

> ID：12267316
> 
> 赞同：2
> 
> 时间：2012-09-04T16:03:07.263
> 
> 标签：wpf

我对 WPF 很陌生，所以如果我遗漏了一些明显的东西，我深表歉意。我有这个模板绑定到 obs 中的项目。收藏。我试图让第二列，“测试测试......”部分具有可变宽度，填充父网格中的所有可用空间。

不过，我发现的是，我的代码会自动显示该“测试测试...”文本框的所有文本，而不是仅绑定到网格中的可用空间，而是创建您在下面看到的滚动条.

![在此处输入图像描述](../Images/512f75a90a161436d39d938525c88d95.png)

相反，我希望切断“测试测试”，以便其他所有内容都适合，以便不出现滚动条（当用户调整屏幕大小时，“测试测试......”文本框将自动调整大小以适应新空间）。有没有办法做到这一点？

我对该模板的代码如下：

```
 <DataTemplate x:Key="MainTemplate">
            <Grid Margin="4" ClipToBounds="True">
                <Grid.Resources>
                    <local:BooleanToHiddenVisibility x:Key="boolToVis"/>
                </Grid.Resources>
                <StackPanel Orientation="Vertical" ClipToBounds="True">
                    <Grid Width="Auto" >
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="25"/>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="60" />
                            <ColumnDefinition Width="40" />
                            <ColumnDefinition Width="60" />
                            <ColumnDefinition Width="40" />
                            <ColumnDefinition Width="60" />
                            <ColumnDefinition Width="40" />
                            <ColumnDefinition Width="40" />
                        </Grid.ColumnDefinitions>
                        <CheckBox Grid.Column="0" Name="checkViewTextBox"/>
                        <TextBlock Grid.Column="1" Text="{Binding OriginalQuote}" FontWeight="Bold" TextTrimming="WordEllipsis" FontStyle="Italic" ClipToBounds="True"/>

                        <TextBlock Margin="10,0,0,0" Grid.Column="2"  Text="plane :" FontWeight="SemiBold" Width="60"/>
                        <TextBlock Margin="5,0,0,0" Grid.Column="3" Text="{Binding Mid}" Width="40"/>

                        <TextBlock Margin="10,0,0,0" Grid.Column="4"  Text="data2 :" FontWeight="SemiBold" Width="60"/>
                        <TextBlock Margin="5,0,0,0" Grid.Column="5" Text="{Binding MidTwo}" Width="40"/>

                        <TextBlock Margin="10,0,0,0" Grid.Column="6"  Text="data3:" FontWeight="SemiBold" Width="60"/>
                        <TextBlock Margin="5,0,0,0" Grid.Column="7" Text="{Binding MidThree}" Width="40"/>

                        <Button Margin="10,0,0,0" Content="History" Grid.Column="8" Click="History_Click" Width="40"/>
                    </Grid>

                    <StackPanel Orientation="Horizontal" Visibility="{Binding Path=IsChecked, ElementName=checkViewTextBox, Converter={StaticResource boolToVis}}">
                        <StackPanel.Resources>
                            <Style BasedOn="{StaticResource tbstyle}" TargetType="{x:Type TextBlock}" />
                        </StackPanel.Resources>
<!--Other stuff thats working ok-->

                </StackPanel>
            </Grid>
        </DataTemplate> 
```

任何帮助深表感谢！

PS我一直在添加随机属性，希望一个能起作用，所以如果看起来我在那里有随机的东西，这可能就是为什么....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T16:39:13.987

好吧，不确定它是否会对您有所帮助，但有关 WPF 布局的一些话。

它有两个步骤：测量和排列。

在第一阶段，控件尝试计算其所需状态。StackPanel 询问它的孩子他们想要的大小。它不限制它们的大小。（绑定到 OriginalQoute 的 TextBlock 没有明确设置宽度！）

在第二阶段，安排控制。堆栈面板允许占据列的整个左侧空间，但它排列其子项，就好像它的大小是无限的，所以 TextBlock 完全显示文本。

问题是如何限制TextBlock的大小？

尝试绑定

```
<TextBlock Width="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=StackPanel}, Path=ActualWidth}"/> 
```

# c++ - 检索应用程序提供的所有 Python API 的列表

> ID：12267320
> 
> 赞同：1
> 
> 时间：2012-09-04T16:03:19.070
> 
> 标签：c++, python, c, api, python-3.x

我想检索应用程序提供给用户的所有 API 的列表。

该应用程序大部分是用 C/C++ 编写的。

我希望python有一个标准功能，我也试图在命名空间方面解决这个问题，因为我对所有关键字不感兴趣，而只对API提供的关键字感兴趣，但我根本不知道在功能方面从哪里开始，我不知道正在做与我想要实现的目标相关的功能。

该应用程序使用 Python 3.x 来提供 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:56:38.957

Python 没有将 API（或*接口*）作为语言原语的概念。一个模块或包会暴露它的一些成员（函数和变量）并隐藏其他的，所以如果你知道你感兴趣*的*模块，“暴露”在这个意义上是 AFAIK 最有意义的概念。

暴露的成员与运行时将导入的成员相同`from <module> import *`。您可能知道，以单个下划线开头或[以两个下划线开头](http://docs.python.org/reference/expressions.html#atom-identifiers)但*不*以两个结尾的成员名称并不意味着是 API 的一部分，也不会被导出；默认情况下，其他所有内容都将被公开，但模块可以通过列出应该在`__all__`变量中导出的内容来自定义其 API——请参阅[Importing * from a package](http://docs.python.org/tutorial/modules.html#importing-from-a-package)。

因此，要找到您正在寻找的 API，您必须首先知道您感兴趣的顶级模块。如果有问题的应用程序可以作为单个包提供给 python，请从它开始。如果它有一个`__all__`变量，它的内容就是包的 API。如果不是，请查看内容`dir(<package>)`并排除仅以下划线开头的任何内容，或者以两个下划线开头但不以两个结尾的内容。如果您正在查看一个大包，您会发现其中一些本身就是模块或包。以相同的方式递归地检查它们。

# ruby-on-rails - 如何用 Rails 邮件 gem 替换电子邮件中的附件？

> ID：12267323
> 
> 赞同：3
> 
> 时间：2012-09-04T16:03:34.423
> 
> 标签：ruby-on-rails, ruby, email

我的程序正在处理作为文件 (something.eml) 到达的电子邮件。在某些情况下，我需要修改附件然后重新保存文件。我一直使用[此处](https://github.com/mikel/mail)的说明作为我的代码的基础，但没有建议尝试完全按照我的意愿去做。我在下面的代码成功删除了原始附件，然后尝试添加一个新附件。

```
@email.without_attachments!
@email.add_file(amended_version) 
```

不幸的是，它在两个地方出错了。首先，它似乎删除了所有的 mime 部分，而不仅仅是附件。任何文本/纯文本部分也被丢弃。其次，如果我通过重新加载修改后的 .eml 文件进行测试，则附件不再被识别，尽管它在文件中。

我已经包含了一个[要点](https://gist.github.com/3622783)，其中包括我当前方法的原始文件和修改文件。

有一个更好的方法吗？也许一种直接替换附件而不是摆脱它并再次添加的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T08:16:00.457

我对邮件格式知之甚少，不知道为什么会这样，但确实如此。

我只从 without_attachments 中提取了我感兴趣的行[！](http://rdoc.info/github/mikel/mail/master/Mail/Message%3awithout_attachments!)方法，现在它似乎工作正常。消息的非附件部分保持完整，并且消息重新读取正常。代码现在读取....

```
@email.parts.delete_if { |p| p.attachment? }
@email.add_file(amended_version) 
```

# c# - 使用 List 的动画

> ID：12267324
> 
> 赞同：0
> 
> 时间：2012-09-04T16:03:35.463
> 
> 标签：c#, .net, animation

我怀疑我是否以正确的方式这样做。

我必须以大约 60fps 的速度播放动画。我正在使用 a`List<Image>`在初始化时加载所有帧。然后使用 a每**10 毫秒**`System.Timers.Timer`调用一次事件，这将更改.**`pictureBox`**

 **```
List<Image> imageList = new List<Image>();

private static Timer_Event(o, e)
{
    pictureBox.Image = imageList[i++];
} 
```

那么，我这样做对吗？有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:23:37.153

您所描述的似乎不太可能以稳健的方式工作。这是一个简短的摘要：

*   根据我的经验，计时器通常并不准确。由于计时器消息通过 Windows 消息泵，它们的移动速度只能与 Windows UI 处理消息的速度一样快。任何干扰消息的应用程序都会导致您的计时器结结巴巴，尽管仔细工作可以防止大部分情况发生。这里有一些关于计时器的经典讨论：[Winforms Timer for Dummies](https://stackoverflow.com/questions/1174733/winforms-timer-for-dummies)

*   一般来说，List 是一种非常低效的图像存储方式。对于每秒 60 帧的一秒动画，您必须在内存中保存 60 张图像并单独解压缩每张图像。

以下是一些可能的解决方案，以及它们带来的权衡：

**全动态视频**

如果您希望在表单上呈现全动态视频，您应该真正考虑使用`MediaElement`（对于 WPF 应用程序：[http](http://www.c-sharpcorner.com/uploadfile/dpatra/media-element-in-wpf/) ://www.c-sharpcorner.com/uploadfile/dpatra/media-element-in-wpf/ ）或`MediaPlayer`对象（对于 WinForms 应用程序：http: [//msdn.microsoft.com/en-us/library/bb383953](http://msdn.microsoft.com/en-us/library/bb383953(v=vs.90).aspx) (v=vs.90).aspx ）。

这将允许您播放包含极高质量图像、不同压缩的长视频，并可以任意开始或停止播放。但是，完整视频播放器的启动和内存使用要求不仅仅是在屏幕上显示单个图像。您会发现您的应用程序需要一些时间来初始化视频子系统，这可能很烦人。

**动画图像**

可以在 Windows 窗体或 WPF 中的图片框中显示动画图像。您只需生成动画图像 - 通常使用 GIF 动画文件。这对于大多数简单动画都可以顺利运行，并且可以从以下网站获得免费使用的动画 GIF：http: [//www.chimply.com/Generator](http://www.chimply.com/Generator)

以下是如何在表单上放置动画 GIF 的演练：http: [//trompelecode.com/2010/12/animated-progress-indicator-in-csharp-windows-forms/](http://trompelecode.com/2010/12/animated-progress-indicator-in-csharp-windows-forms/)

**精灵动画**

假设您需要准确地表示每个图像（如果您只是想看起来很吸引人，这不是必需的），并且您不想要视频系统的开销（如果您只是在玩，这没关系一两秒钟的动画）。然后你想要做的是创建一个单一的复合“精灵”图像。这减少了应用程序的内存开销需求并减少了解压缩文件的时间。

例如，这是一个为您生成 PNG 精灵的网站：[http ://wearekiss.com/spritepad](http://wearekiss.com/spritepad)

生成带有精灵的图像后，您可以将其放置在图片框中，并通过更改图片在图片框中的相对位置来为图像设置动画。以下是如何完成此操作的演练：[C#picturebox load image with a offset](https://stackoverflow.com/questions/7680313/c-sharp-picturebox-load-image-with-an-offset)

**概括**

无论您选择以何种方式显示动画图像，都会有一些取舍。我喜欢为自己选择最简单的解决方案——就我而言，我喜欢使用动画 GIF 图像。祝动画好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:34:37.290

您还可以使用[WPF将动画放在一起](http://msdn.microsoft.com/en-us/library/ms752312.aspx)或 Silverlight 将动画放在一起……如果您需要动画是交互式的或可编程控制的，这可能是可行的方法。

另一方面，如果动画内容是静态的，那么 AVI（或 MPEG 等）可能是您最好的选择。

您没有确切地说出您要完成的工作，所以我无法确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T16:21:07.987

**.avi 是另一种选择**，但是，如果你有一堆图像而不是使用线程/计时器显然似乎是前进的方向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T16:25:11.757

最简单的方法是在该图片框中使用动画 gif 并且不要弄乱计时器。**

# java - 如何在创建 jar 时缩短类名

> ID：12267327
> 
> 赞同：-3
> 
> 时间：2012-09-04T16:03:41.380
> 
> 标签：java

我正在创建 jar，它的包和类很少。但是当我尝试通过 zip 实用程序提取 jar 时，它会崩溃并给出错误文件名太长，是否可以在创建 jar 时缩短类名，所以我不需要手动重命名类名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:05:30.813

将其解压缩到 unix 中的根文件夹 (/) 或 Windows 中的 C:/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:10:31.950

正如已经发布的那样：将其解压缩到 unix 中的根文件夹 (/) 或 Windows 中的 C:/

这应该可行，因为问题可能是名称（包括要提取到的路径）太长，而不是 jar 本身中的名称。

# ravendb - 解决构造函数对 NancyFX 中使用的服务的依赖

> ID：12267328
> 
> 赞同：1
> 
> 时间：2012-09-04T16:03:43.433
> 
> 标签：ravendb, nancy, tinyioc

我有以下引导程序

```
public class NancyBootStrapper: DefaultNancyBootstrapper
{
    protected override void ConfigureRequestContainer(TinyIoC.TinyIoCContainer container, NancyContext context)
    {
        base.ConfigureRequestContainer(container, context);

        var ravenSession = container.Resolve< IRavenSessionProvider >().GetSession();
        container.Register( ravenSession );
    }
} 
```

当我的 Nancy 应用程序尝试使用以下构造函数实例化 BlogService 时

```
 public BlogService(IDocumentSession documentSession)
    {
        this.documentSession = documentSession;
    } 
```

应用程序爆炸说它无法解析文档会话，我还在我的测试方法中尝试了以下操作（删除构造函数注入）。

```
 public void BuildCategories()
    {
        var container = TinyIoCContainer.Current;
        documentSession = container.Resolve< IDocumentSession >();
        documentSession.Store(new Category{Title = "test"});
        documentSession.Store(new Category{Title = ".net"});

        documentSession.SaveChanges();
    } 
```

这也炸了，指出它无法解析documentSession。

现在这是我第一次使用 NancyFX 或 TinyIoC，所以我可能会做一些根本错误的事情，尽管我应该提到 documentSession 确实在 Nancy 模块中解析..

任何人都可以提供修复或一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T18:41:39.340

什么时候`BlogService`应该实例化？-我的猜测是应用程序一次，在这种情况下，我相信您在错误的引导程序方法中注册会话，并且应该在`ConfigureApplicationContainer`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T21:12:38.627

我一直在玩和挖掘 NancyFx 和 TinyIoC 代码库，并想出了如何解决这个问题......我不喜欢这个修复......但是干草它有效 :)

基本上，我在引导程序方法 configureRequestContainer 中创建了一个 RavenDB 文档会话，因为将请求用作工作范围单元是最佳实践。

不幸的是，在 configureApplicationContainer 中由 tinyIoC 自动连接的任何东西都没有使用 Nancy 请求使用的子容器执行任何构造函数注入（这包括标记为 MultiInstance 或 PerRequestSingleton 的那些。

为了解决这个问题，您需要在同一个子容器中重新注册依赖于您的每个请求组件的任何组件。

正如我所说，我不喜欢这个修复，但它最终是一个修复:)

# sql - 通过另一个表中的列更新一个表中的列

> ID：12267329
> 
> 赞同：4
> 
> 时间：2012-09-04T16:03:57.513
> 
> 标签：sql, oracle, oracle10g, sql-update, tablecolumn

我有 2 个表“A”和“B”。两者都有一个共同的列“名称”，并通过列“id”相互链接。表 A 中的“名称”列是空的，而表 B 中有数据。我的任务是将该列中的所有数据从表 B 填充到表 A 中，并带有相应的 id。

我正在使用以下查询：

```
UPDATE A
SET A.name = (SELECT B.name from B WHERE A.id = B.id)
WHERE EXISTS
(SELECT B.name from B) 
```

一旦我在 SQL 开发人员中运行查询，它就会冻结，我必须强制关闭它。谁能告诉我查询有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T16:06:22.560

试试这个：

```
UPDATE A
SET A.name = (SELECT B.name FROM B WHERE B.id = A.id AND B.name IS NOT NULL)
WHERE a.name IS NULL; 
```

由于您使用的是 Oracle，因此这里是[IS NOT NULL](http://www.techonthenet.com/oracle/isnotnull.php)的参考。

这是 SQL Fiddle，您可以使用它：[http ://sqlfiddle.com/#!4/a5ad0/3](http://sqlfiddle.com/#!4/a5ad0/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T12:55:20.760

从上面的对话中，我不确定您是否对数据进行了索引之外的任何更改，但您应该包含一个`WHERE EXISTS`如上所述的子句。完整的查询应如下所示：

```
UPDATE A
   SET A.name = ( SELECT B.name FROM B WHERE B.id = A.id )
 WHERE EXISTS ( SELECT 1 FROM B WHERE B.id = A.id ) 
```

原始查询中的`WHERE EXISTS`子句除了检查是否至少有一个 in 的非 NULL 值外，不会做任何`name`事情`B`。

# java - Java 和视频播放器

> ID：12267330
> 
> 赞同：2
> 
> 时间：2012-09-04T16:03:57.657
> 
> 标签：java

> **可能重复：**
> [在 Swing 应用程序中嵌入电影的任何简单（并且是最新的）Java 框架？](https://stackoverflow.com/questions/10440152/any-simple-and-up-to-date-java-frameworks-for-embedding-movies-within-a-swing)

我需要实现这种情况，在桌面上全屏，一些播放器播放视频，并且在某些时间段内，我的 java 程序必须在屏幕的某些部分显示一些文本，出现动画，然后再次隐藏。但是在所有的时间里，视频必须继续全屏播放。

你能给我什么建议？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:15:08.063

我自己没有尝试过，但我认为您可能会发现这很有用：http: [//lobobrowser.wordpress.com/2008/12/29/javafx-video-in-a-swing-application-technically-doable/](http://lobobrowser.wordpress.com/2008/12/29/javafx-video-in-a-swing-application-technically-doable/)

如果你不懂javaFX，可以试试[JMF](http://www.oracle.com/technetwork/java/javase/download-142937.html)，比较简单，不需要学习新的ttechnology。这是使用 JMF 播放视频的教程：http: [//www.deitel.com/articles/java_tutorials/20060422/PlayingVideowithJMF/](http://www.deitel.com/articles/java_tutorials/20060422/PlayingVideowithJMF/)。但据我所知，JMF 存在一些问题，oracle 没有计划在未来对其进行改进。

# git - 我在哪里可以找到从 git 命令到 hg 命令的翻译？

> ID：12267331
> 
> 赞同：1
> 
> 时间：2012-09-04T16:04:02.910
> 
> 标签：git, version-control, mercurial

> **可能重复：**
> [最常见 Mercurial 命令的 Git 等价物？](https://stackoverflow.com/questions/1450348/git-equivalents-of-most-common-mercurial-commands)
> [Git 和 Mercurial - 比较和对比](https://stackoverflow.com/questions/1598759/git-and-mercurial-compare-and-contrast)

有时程序员被迫学习很多工具，其中一些通常非常相似，那么如何利用一种工具的经验并减少开始使用新工具的痛苦？如果这些工具的操作之间有一些比较，那就太好了。

我用git很久了，从来没用过hg，听说hg和git很像，不知道有没有从git命令到hg命令的翻译？

例如 git clean 对应的 hg 命令是什么？

如果有这样的翻译，会让 git 用户更容易上手 hg。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:40:01.547

如果您只是在寻找从 git 命令到 mercurial 中的命令的映射，那么[这个命令等价表](http://mercurial-scm.org/wiki/GitConcepts#Command_equivalence_table)是一个很好的起点。

# ruby - Minitest 规范自定义匹配器

> ID：12267332
> 
> 赞同：7
> 
> 时间：2012-09-04T16:04:04.567
> 
> 标签：ruby, minitest

我的测试中有一行：

```
page.has_reply?("my reply").must_equal true 
```

为了使其更具可读性，我想使用自定义匹配器：

```
page.must_have_reply "my reply" 
```

根据[https://github.com/zenspider/minitest-matchers](https://github.com/zenspider/minitest-matchers)的文档，我希望我需要编写一个看起来像这样的匹配器：

```
def have_reply(text)
  subject.has_css?('.comment_body', :text => text)
end
MiniTest::Unit::TestCase.register_matcher :have_reply, :have_reply 
```

问题是我看不到如何获取对主题（即页面对象）的引用。文档说“注意主题必须是断言中的第一个参数”，但这并没有真正帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T16:32:07.537

有一个小例子，你可以创建一个类，它应该响应一组方法`matches?`, `failure_message_for_should`, `failure_message_for_should_not`。在`matches?`方法中，您可以获得对该主题的引用。

```
class MyMatcher
  def initialize(text)
    @text = text
  end

  def matches? subject
    subject =~ /^#{@text}.*/
  end

  def failure_message_for_should
    "expected to start with #{@text}"
  end

  def failure_message_for_should_not
    "expected not to start with #{@text}"
  end
end

def start_with(text)
  MyMatcher.new(text)
end
MiniTest::Unit::TestCase.register_matcher :start_with, :start_with

describe 'something' do
  it 'must start with...' do
    page = 'my reply'
    page.must_start_with 'my reply'
    page.must_start_with 'my '
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T23:43:31.130

有很多方法可以在这里得到你想要的。最简单的方法是完全不用断言、期望或匹配器，而只使用断言。所以，假设你已经`has_reply?`定义了方法，你可以使用这个：

```
assert page.has_reply?("my reply") 
```

但是，这并没有得到你`must_have_reply`所要求的语法。我怀疑你真的有`has_reply?`方法。那么，让我们开始吧。

您问“如何获取对主题（即页面对象）的引用”。在这种情况下，主题是`must_have_reply`定义方法的对象。因此，您应该使用`this`而不是`subject`. 但它并不像所有这些那么简单。`assert_equal`匹配器添加了我们在通常的断言 ( , `refute_equal`) 或期望 ( `must_be_equal`, )中没有的间接级别`wont_be_equal`。如果要编写 Matcher，则需要实现 Matcher API。

幸运的是，您不必真正实现 API。由于您似乎已经打算依赖 Cabybara 的`have_css`匹配器，我们可以简单地使用 Capybara 的 HaveSelector 类并让它实现适当的 API。我们只需要使用返回 HaveSelector 对象的方法创建自己的 Matchers 模块。

```
# Require Minitest Matchers to make this all work
require "minitest/matchers"
# Require Capybara's matchers so you can use them
require "capybara/rspec/matchers"

# Create your own matchers module
module YourApp
  module Matchers
    def have_reply text
      # Return a properly configured HaveSelector instance
      Capybara::RSpecMatchers::HaveSelector.new(:css, ".comment_body", :text => text)
    end

    # Register module using minitest-matcher syntax
    def self.included base
      instance_methods.each do |name|
        base.register_matcher name, name
      end
    end
  end
end 
```

然后，在您的`minitest_helper.rb`文件中，您可以包含您的 Matchers 模块，以便您可以使用它。（此代码将在所有测试中包含匹配器。）

```
class MiniTest::Rails::ActiveSupport::TestCase
  # Include your module in the test case
  include YourApp::Matchers
end 
```

Minitest Matchers 完成所有艰巨的任务。您现在可以将匹配器用作断言：

```
def test_using_an_assertion
  visit root_path
  assert_have_reply page, "my reply"
end 
```

或者，您可以使用匹配器作为期望：

```
it "is an expectation" do
  visit root_path
  page.must_have_reply "my reply"
end 
```

最后，您可以将其与主题一起使用：

```
describe "with a subject" do
  before  { visit root_path }
  subject { page }

  it { must have_reply("my reply") }
  must { have_reply "my reply" }
end 
```

**重要提示**：为此，您必须使用 'gem minitest-matchers', '>= 1.2.0' 因为 register_matcher 未在该 gem 的早期版本中定义。

# css - 在 navbar-inner 下创建一个 div 无缝延续其渐变

> ID：12267339
> 
> 赞同：0
> 
> 时间：2012-09-04T16:04:36.357
> 
> 标签：css, twitter-bootstrap

我正在使用引导程序开发一个网站，我的标题是一个 navbar-inner 类。

在某些页面中，我需要在 navbar-inner 下放置另一个不同类的 div，我希望它能够无缝地继续使用相同的渐变，以便用户感觉它是标题的延续。

可能我可以找到一种方法来计算 navbar-inner 的渐变，并从它的结束颜色开始制作另一个渐变，但这看起来不太好，因为导航栏和另一个 div 的高度都是动态变化的。

任何人都可以提出一种在动态数量的 div 元素中组合渐变样式的好方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:48:35.703

与@Ana 建议的一样，我认为最简单的方法是将它们包装在一个元素中。我不会将它们嵌套，而是将它们作为兄弟姐妹包装在父 div 中，这将具有所需的样式。这样，无论您是否在给定页面上包含第二个 div，渐变和高度都会自动调整。

# java - 在 Windows 7 上实例化和 OleControlSite 时抛出 NullPointerException

> ID：12267343
> 
> 赞同：0
> 
> 时间：2012-09-04T16:04:56.383
> 
> 标签：java, windows-7, swt, ole, win64

我`NullPointerException`在尝试从 SWT 打开 excel 时遇到问题。遗憾的是，我无法发布完整的堆栈跟踪和一些代码，因为它引用了我工作的公司。希望有人以前遇到过这个问题并且可能会认识到它。

这是我可以发布的堆栈跟踪的一部分

```
java.lang.NullPointerException
at org.eclipse.swt.ole.win32.OleControlSite.disconnectEventSinks(OleControlSite.java:468)
at org.eclipse.swt.ole.win32.OleControlSite.releaseObjectInterfaces(OleControlSite.java:774)
at org.eclipse.swt.ole.win32.OleClientSite.onDispose(OleClientSite.java:909)
at org.eclipse.swt.ole.win32.OleClientSite.access$1(OleClientSite.java:895)
at org.eclipse.swt.ole.win32.OleClientSite$1.handleEvent(OleClientSite.java:129) 
```

这是代码。当实例化一个新的 OleControlSite 时，在最后一行抛出异常。

```
OleFrame frame1 = new OleFrame(shell, SWT.NONE);
if (clientSite != null && !clientSite.isDisposed()){
    clientSite.dispose();
    clientSite = null;
}
OleAutomation doc;
try{
    clientSite = new OleControlSite(frame1, SWT.NONE, file); 
```

此代码适用于 Windows XP，但不适用于 Windows 7，它会抛出`NullPointerException`.

根据立方建议，我创建了一个自包含的示例，这里是代码。

```
package com.test;

import java.io.File;

import org.eclipse.swt.SWT;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.ole.win32.OLE;
import org.eclipse.swt.ole.win32.OleAutomation;
import org.eclipse.swt.ole.win32.OleControlSite;
import org.eclipse.swt.ole.win32.OleEvent;
import org.eclipse.swt.ole.win32.OleFrame;
import org.eclipse.swt.ole.win32.OleListener;
import org.eclipse.swt.ole.win32.Variant;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Button;

public class OpenExcelExampleWindow extends Shell {
    public final static int WorkbookBeforeClose    = 0x00000622;

    /**
     * Launch the application.
     * @param args
     */
    public static void main(String args[]) {
        try {
            Display display = Display.getDefault();
            OpenExcelExampleWindow shell = new OpenExcelExampleWindow(display);
            shell.open();
            shell.layout();
            while (!shell.isDisposed()) {
                if (!display.readAndDispatch()) {
                    display.sleep();
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the shell.
     * @param display
     */
    public OpenExcelExampleWindow(Display display) {
        super(display, SWT.SHELL_TRIM);

        Button btnOpenExcel = new Button(this, SWT.NONE);
        btnOpenExcel.setBounds(10, 10, 68, 23);
        btnOpenExcel.setText("open excel");

        btnOpenExcel.addSelectionListener(new SelectionAdapter() {

            @Override
            public void widgetSelected(SelectionEvent e) {
                onOpenExcelClicked();
            }

        });
        createContents();
    }

    protected void onOpenExcelClicked() {
        openExcel("testfile.xls",this);
    }

    /**
     * Create contents of the shell.
     */
    protected void createContents() {
        setText("SWT Application");
        setSize(450, 300);

    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }

    protected void openExcel(String fileName, Shell shell){
        OleControlSite clientSite = null;
        final File file = new File(fileName);
        if (file.exists()) {

            OleFrame frame1 = new OleFrame(shell, SWT.NONE);
            if (clientSite != null && !clientSite.isDisposed()){
                clientSite.dispose();
                clientSite = null;
            }

            clientSite = new OleControlSite(frame1, SWT.NONE, file);                        
            OleAutomation doc = new OleAutomation(clientSite);

            int [] dispInfo = doc.getIDsOfNames(new String[] {"Application"});
            Variant variant = doc.getProperty(dispInfo[0]);
            OleAutomation app = variant.getAutomation();
            variant.dispose();
            doc.dispose();
            doc = null;

            int result = clientSite.doVerb(OLE.OLEIVERB_OPEN);  
            if (result != OLE.S_OK){
                OLE.error(OLE.ERROR_CANNOT_OPEN_FILE, result);
            }

            //When user close workbook, dispose the clientSite.
            clientSite.addEventListener(app, "{00024413-0000-0000-C000-000000000046}",
                    WorkbookBeforeClose,new OleListener() {
                public void handleEvent(OleEvent event) {

                    OleControlSite oldControlSite = (OleControlSite)event.widget;
                    if ( !oldControlSite.isDisposed()){
                        //System.out.println("event in WorkbookBeforeClose");
                        oldControlSite.dispose();
                    }
                }
            });

        }
    }
} 
```

这是一个例外

```
java.lang.NullPointerException
at org.eclipse.swt.ole.win32.OleControlSite.disconnectEventSinks(OleControlSite.java:468)
at org.eclipse.swt.ole.win32.OleControlSite.releaseObjectInterfaces(OleControlSite.java:774)
at org.eclipse.swt.ole.win32.OleClientSite.onDispose(OleClientSite.java:909)
at org.eclipse.swt.ole.win32.OleClientSite.access$1(OleClientSite.java:895)
at org.eclipse.swt.ole.win32.OleClientSite$1.handleEvent(OleClientSite.java:129)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1058)
at org.eclipse.swt.widgets.Widget.release(Widget.java:808)
at org.eclipse.swt.widgets.Widget.dispose(Widget.java:446)
at org.eclipse.swt.ole.win32.OleClientSite.<init>(OleClientSite.java:194)
at org.eclipse.swt.ole.win32.OleControlSite.<init>(OleControlSite.java:96)
at com.test.OpenExcelExampleWindow.openExcel(OpenExcelExampleWindow.java:93)
at com.test.OpenExcelExampleWindow.onOpenExcelClicked(OpenExcelExampleWindow.java:65)
at com.test.OpenExcelExampleWindow$1.widgetSelected(OpenExcelExampleWindow.java:57)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
at com.test.OpenExcelExampleWindow.main(OpenExcelExampleWindow.java:33) 
```

* * *

***更新：***

我用 maven 创建了一个全新的项目，并为 eclipse sdk 4.2 添加了一个依赖项，这是我的 pom 文件，您可以看到只有一个依赖项。项目中的代码与上面的类相同。

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.test</groupId>
  <artifactId>excelopen</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>excelopen</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
<build>
<plugins>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.8</version>
            </plugin>
</plugins>
</build>
  <dependencies>
        <dependency>
            <groupId>org.eclipse.swt</groupId>
            <artifactId>swt-win32-x86_64</artifactId>
            <version>4.2_3.100.0.v4233d</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
  </dependencies>
</project> 
```

我注意到 OleControlSite 类的源代码从 3.8 sdk 到 4.2 sdk 是相同的，这使得我不太可能是 SDK 版本导致问题。

* * *

***更新：***

我下载了 SWT 源代码，并在此行的 OleClientSite 的第 392 行抛出了异常。

```
if (result != COM.S_OK) OLE.error(OLE.ERROR_CANNOT_CREATE_OBJECT, result) 
```

隐藏的例外是

```
org.eclipse.swt.SWTException: Failed to create Ole Client. result = -2147221164
at org.eclipse.swt.ole.win32.OLE.error(OLE.java:302)
at org.eclipse.swt.ole.win32.OleClientSite.OleCreate(OleClientSite.java:392)
at org.eclipse.swt.ole.win32.OleClientSite.<init>(OleClientSite.java:192)
at org.eclipse.swt.ole.win32.OleControlSite.<init>(OleControlSite.java:96)
at com.test.OpenExcelExampleWindow.openExcel(OpenExcelExampleWindow.java:93)
at com.test.OpenExcelExampleWindow.onOpenExcelClicked(OpenExcelExampleWindow.java:65)
at com.test.OpenExcelExampleWindow$1.widgetSelected(OpenExcelExampleWindow.java:57)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
at com.test.OpenExcelExampleWindow.main(OpenExcelExampleWindow.java:33) 
```

* * *

***更新 09/05 上午 9:35***

感谢 favonius 的信息，我能够找到更多信息。我发现this discussion about 32bit com's on a 64bit windows OS。这是讨论 64 位上的 32 位 com 的地方。 [http://www.eclipse.org/forums/index.php/mv/msg/264018/763345/](http://www.eclipse.org/forums/index.php/mv/msg/264018/763345/) 这可能是我的问题，因为我们正在运行 Office 2007，它只有 32 位，并且运行在 64 位操作系统上。我想检查注册表，但我不知道我应该查找什么键。有谁知道注册表项是什么？

* * *

***更新 09/05 上午 9:45***

以下是 favonius 提供的 TestCode 类的结果。

运行 1 并注释第 57 行

```
{00020820-0000-0000-C000-000000000046}
Excel.Sheet.8
org.eclipse.swt.SWTException: Failed to create Ole Client. result = -2147221164
    at org.eclipse.swt.ole.win32.OLE.error(OLE.java:302)
    at com.test.TestCode.check(TestCode.java:62)
    at com.test.TestCode.main(TestCode.java:23) 
```

运行 2 行 57 未注释

```
{00020820-0000-0000-C000-000000000046}
Excel.Sheet.8 
```

* * *

***更新 09/05 下午 1:51***

我们的应用程序输出一个 xls 文件供 excel 打开。我刚刚尝试读取 xlsx 文件，它可以工作。这是解决此特定应用程序问题的合理更改。它不应该打开 xls 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:03:51.000

### 剖析问题

根据您上次的更新，`where`您提到了异常的起源，问题出在以下几行。

```
int /*long*/[] ppv = new int /*long*/[1];
result = COM.CoCreateInstance(appClsid, 0, COM.CLSCTX_INPROC_HANDLER | COM.CLSCTX_INPROC_SERVER, COM.IIDIUnknown, ppv);
if (result != COM.S_OK) OLE.error(OLE.ERROR_CANNOT_CREATE_OBJECT, result); 
```

现在，上面代码中的第二行尝试创建与指定 CLSID 关联的类的单个未初始化对象。现在，在您的情况下，您直接提供 XLSX 文件路径，因此它使用[GetClassFile()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms693715%28v=vs.85%29.aspx)返回与指定文件名关联的 CLSID。现在如果它失败了，那么你应该在第**186**行得到异常`OleClientSite`。此外，您可以`program id`从否则会导致第**189**`file class id`行的异常中得到正确的结果。

 **### 检查错误代码

在您的堆栈跟踪中，您得到了一个错误代码`-2147221164`。现在来检查它的真正含义。启动 Visual Studio 并从菜单`Tools`->中选择`Error Lookup`。将错误代码放在那里，然后单击查找。它给...

![在此处输入图像描述](../Images/93c8d2726167654c5ec78be3e28a73a5.png)

现在的问题是，如果从第**189**行`class is not registered`获取 the 时，您是否应该遇到此问题。这让事情变得很奇怪。因此，在继续进行之前，请遵循**第二次检查**。`program id``class id`

 ****根据[CoCreateInstance](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686615%28v=vs.85%29.aspx)的 MSDN 条目，上述错误消息还可能意味着您在 CLSCTX 枚举中请求的服务器类型未注册，或者注册表中服务器类型的值已损坏。

### 第二次检查

作为第二次检查并确定真正的问题，只需尝试此[SWT Snippet](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet261.java)并更新您问题中的结果。

### 第三次检查

我写了这个简单的测试类。尝试运行它并发布控制台输出。此外，取消注释第**57 行**并再次运行并发布其输出。

**注意 -**您必须更改 File 构造函数参数。

```
import java.io.File;

import org.eclipse.swt.internal.ole.win32.COM;
import org.eclipse.swt.internal.ole.win32.GUID;
import org.eclipse.swt.internal.win32.OS;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.ole.win32.OLE;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

public class TestCode 
{
    public static void main(String[] args)
    {
        Display display = new Display();
        Shell shell = new Shell(display);

        shell.setText("Excel Example");
        shell.setLayout(new FillLayout());

        try{
            check(new File("output.xlsx"));
        }catch(Exception e){
            e.printStackTrace();
        }

        shell.open();

        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }

    static void check(File file)
    {
        GUID fileClsid = new GUID();
        char[] fileName = (file.getAbsolutePath()+"\0").toCharArray();
        int result = COM.GetClassFile(fileName, fileClsid);
        if (result != COM.S_OK) 
            OLE.error(OLE.ERROR_INVALID_CLASSID, result);

        System.out.println(fileClsid);

        String progID = getProgID(fileClsid); 
        if (progID == null) 
            OLE.error(OLE.ERROR_INVALID_CLASSID, result);

        System.out.println(progID);

        int [] ppv = new int[1];

        int server_type = COM.CLSCTX_INPROC_HANDLER | COM.CLSCTX_INPROC_SERVER;

        //server_type |= COM.CLSCTX_LOCAL_SERVER; 

        result = COM.CoCreateInstance(fileClsid, 0, server_type, COM.IIDIUnknown, ppv);
        if (result != COM.S_OK) 
            OLE.error(OLE.ERROR_CANNOT_CREATE_OBJECT, result);
    }

    static String getProgID(GUID clsid)
    {
        if (clsid != null)
        {
            int [] lplpszProgID = new int [1];
            if (COM.ProgIDFromCLSID(clsid, lplpszProgID) == COM.S_OK)
            {
                int  hMem = lplpszProgID[0];
                int length = OS.GlobalSize(hMem);
                int  ptr = OS.GlobalLock(hMem);
                char[] buffer = new char[length];
                COM.MoveMemory(buffer, ptr, length);
                OS.GlobalUnlock(hMem);
                OS.GlobalFree(hMem);

                String result = new String(buffer);
                int index = result.indexOf("\0");
                return result.substring(0, index);
            }
        }
        return null;
    }
} 
```******

# android - Android 应用内计费：如何从产品列表中删除已发布的项目？

> ID：12267345
> 
> 赞同：2
> 
> 时间：2012-09-04T16:04:57.903
> 
> 标签：android, in-app-billing, google-play

我上传了我的应用程序来测试应用内计费；具体来说，每月订阅。我只是出于测试目的随机选择了国家和价格，发布了订阅（但不是应用程序）并且一切正常。

我删除了apk并重新上传以从头开始并使用所有正确的值填写详细信息，但是我之前发布的带有错误值的订阅仍然存在！我没有看到删除选项。如何删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:05:09.023

我认为这样做的唯一方法是重命名包，然后上传重命名的 apk。

# android - Android：从服务中获取结果

> ID：12267349
> 
> 赞同：1
> 
> 时间：2012-09-04T16:05:17.770
> 
> 标签：android, service, return

我有 android 服务，我需要在它启动后返回一个结果。所以：

1）我启动服务

2）服务做某事

3) 服务返回结果

我想也许我可以使用单例类来获取结果。我创建了一个单例类，以使服务将结果保存在其中，然后通过活动从服务中获取结果。这是该类的代码：

```
public class Result {

    //SIGLETON DECLARATION

    private static Result mInstance = null;

    public static Result getInstance() { 
        if (mInstance == null) {
            mInstance = new Result();
        }
        return mInstance;
    }

    private Result() {
    }

    //CODE

    Object result;
    boolean resultIsSet = false;

    public void deletePreviousResult() {
        this.result = null;
        resultIsSet = false;
    }

    public void setResult(Object result) {
        Log.w("result", "setResult");
        this.result = result;
        resultIsSet = true;
    }

    public Object getResult() {
        Log.w("result", "getResult");
        while(resultIsSet == false) {}
        return this.result;
    } 
```

这是我用来获取结果的代码：

```
public int getInfo() {
    Result.getInstance().deletePreviousResult();
    //start the service and ask to save the result in singleton class
    Intent myIntent = new Intent(mInstanceContext, MediaPlayerService.class);
    myIntent.setAction("getInfo");
    mInstanceContext.startService(myIntent);
    //take the result
    return (Integer) Result.getInstance().getResult();
} 
```

在做什么`onStartCommand`是：

```
 Result.getInstance().setResult(mMediaPlayer.getCurrentPosition()); 
```

`mMediaPlayer`MediaPlayer 对象在哪里。

然而问题是 if`setResult`也应该被调用`onStartCommand`，它永远不会被调用！为什么？是我的方法不对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:58:50.940

您在以下代码中`getInfo()`：

```
mInstanceContext.startService(myIntent);
//take the result
return (Integer) Result.getInstance().getResult(); 
```

假定当您调用`startService()`该服务时，该服务已启动并被**同步**`onStartCommand()`调用，以便在下一条语句中您可以使用.**`Result.getInstance().getResult()`**

 **不幸的是，它不是那样工作的。调用`startService()`不像调用对象的方法。当您调用时`startService()`，您所做的是告诉 Android 您希望该服务**在下一个可用时刻**启动。由于`onStartCommand()`在你的服务中需要在主线程上调用，通常这意味着 Android 将启动你的服务并`onStartCommand()`在下次 Android 获得主线程的控制权时调用（即：当你所有的活动方法都返回时）。在任何情况下，您都无法确定何时启动该服务或何时`onStartCommand()`调用该服务。是**异步**调用，所以需要依赖**回调**机制。这意味着您需要编写某种回调方法，当服务完成工作并希望将结果返回给您时，它可以调用该方法。

有多种方法可以做到这一点。您可以让服务向您的活动发送 Intent。您可以让服务广播带有结果的 Intent。您可以绑定到服务并注册回调侦听器（请参阅绑定服务的开发人员文档）。可能还有其他方法。**

# html - 在标签中嵌入 XSL 代码

> ID：12267353
> 
> 赞同：0
> 
> 时间：2012-09-04T16:05:29.097
> 
> 标签：html, css, xml, xslt

所以我在节点@style 中保存了一些样式内容，我想调用它来形成`<span>`标签的样式属性。这也是不够的，所以我想将 附加为标签`margin-left:700px`的样式属性的一部分。`<span>`这是可行的吗？

顺便说一句，我无法编辑 xsl 正在调用的数据库，因为它是由客户端提供的

```
<span style="<xsl:copy-of select="Root/Node/MyFile/MyStyle/@style" margin-left:700px">
    <xsl:copy-of select="Root/Node/MyFile/MyCaption/Caption"/>
</span> 
```

顺便说一句，我尝试了上述方法，Altova 抱怨说`<`来自的字符在`<xsl...`语法上是出乎意料的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T16:16:22.497

您的报价可能搞砸了 XSLT，试试这个：

```
<span>
    <xsl:attribute name="style">
      <xsl:copy-of select="Root/Node/MyFile/MyStyle/@style" />
      <xsl:text> margin-left:700px</xsl:Text>
    </xsl:attribute>

    <xsl:copy-of select="Root/Node/MyFile/MyCaption/Caption"/>
</span> 
```

虽然我暂时无法测试...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:15:09.900

你不能这样嵌套，但你可以做类似的事情：

假设您有一个带有一些 CSS 的名为“style_var”的变量：

```
<xsl:variable name="style_var">color: blue;</xsl:variable> 
```

还有一个 HTML 元素 span：

```
<span>
   ...
</span> 
```

我相当肯定你可以做到这一点：

```
<span>
  <xsl:attribute name="style">
      <xsl:value-of select="$style_var" /> 
      <xsl:text>margin-left: 100px;</xsl:Text>
  </xsl:attribute>
</span> 
```

您可能可以将变量选择器换成上面使用的节点选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T16:50:53.477

在这种情况下，您可能想了解“属性值模板”。这允许您将代码直接“嵌入”到属性中。

```
 <span style="{Root/Node/MyFile/MyStyle/@style}" margin-left:700px">
     <xsl:value-of select="Root/Node/MyFile/MyCaption/Caption"/>
 </span> 
```

此处的大括号 { 和 } 表示属性值模板 (AVT)，并表示应执行大括号内的代码以获取值。

您需要确保您的 xpath 表达式 'Root/Node/MyFile/MyStyle/@style' 确实返回正确的值。

# objective-c - 带有自定义声音名称的 NSUserNotification

> ID：12267357
> 
> 赞同：10
> 
> 时间：2012-09-04T16:05:33.287
> 
> 标签：objective-c, macos, osx-mountain-lion, nsusernotification

有没有人设法使 NSUserNotification soundName 与自定义声音一起使用？我尝试使用 aif 和 caf 格式 44100KHz 16bit 2 秒的持续时间。通知会在适当的时间显示，并带有正确的标题和文本，但会播放默认声音而不是我的自定义声音。

声音文件已正确复制到应用程序包中。如果我尝试这个，声音就可以了：

```
NSSound* sound = [NSSound soundNamed:@"morse.aif"];
[sound play]; 
```

但是当我在通知中使用相同的声音时，会播放默认通知声音：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
    NSUserNotification* notification = [[NSUserNotification alloc]init];
    notification.title = @"Titolo";
    notification.deliveryDate = [NSDate dateWithTimeIntervalSinceNow:10];
    notification.soundName = @"morse.aif";
    [[NSUserNotificationCenter defaultUserNotificationCenter]scheduleNotification:notification];
} 
```

我尝试了有无扩展，但没有成功。

```
notification.soundName = @"morse.aif";
notification.soundName = @"morse2.caf";
notification.soundName = @"morse"; 
```

这些都不起作用。

我的应用程序没有签名也没有沙盒化，但我认为用户通知没有必要这样做，除了声音问题之外，通知工作得很好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-05T17:08:12.173

在我看来，这个问题是区分大小写的。使用`notification.soundName = @"Morse";`对我来说非常有效。正如您在[`NSSound`文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSSound_Class/Reference/Reference.html#jumpTo_4)中看到`soundNamed`的声音搜索文件夹按顺序排列：

```
~/Library/Sounds
/Library/Sounds
/Network/Library/Sounds
/System/Library/Sounds 
```

如果您查看最后一个，这可能是您试图从中提取的位置，因为它们是系统偏好设置中的声音，您可以看到它们的名称

![声音名称](../Images/a320c9b2579bf37d941fcf582fe4ed39.png)

因此，保留文件的大小写，并省略扩展名，它应该可以按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-23T02:56:57.947

如果您有多个版本的应用程序二进制通知中心可能正在为您的声音文件搜索错误的二进制文件。

如果您确保删除二进制文件的任何旧副本，它应该可以解决问题。

来自 Apple 开发论坛：[https ://devforums.apple.com/message/708511](https://devforums.apple.com/message/708511)

> 如果您有多个版本的应用程序二进制文件浮动，则可能会发生这种情况。NotificationCenter 只对其中一个进行罚款。如果是没有声音的那一个就不行了。

# scala - 将 http.port 添加到 application.conf

> ID：12267363
> 
> 赞同：2
> 
> 时间：2012-09-04T16:06:00.477
> 
> 标签：scala, playframework

我正在使用 play，我想在 application.conf 中指定端口，因为我要将它部署到云中。

我一直在阅读关于这个问题的帖子，但所有答案都是关于在输入 play start 时输入的。真的有办法将它添加到 application.conf 中吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:55:22.577

似乎没有办法做到这一点。

这就是 play 的 Netty Server 的初始化方式：

```
val server = new NettyServer(
    new StaticApplication(applicationPath),
    Option(System.getProperty("http.port")).map(Integer.parseInt(_)).getOrElse(9000),
    Option(System.getProperty("https.port")).map(Integer.parseInt(_)),
    Option(System.getProperty("http.address")).getOrElse("0.0.0.0")
  ) 
```

因此，如果未设置第一个属性，则使用系统属性或“9000”。

在我们的生产环境中，我们只是在 args " `-Dhttp.port=<port>`" 中传递它。

您的云有哪些复杂性？

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-09-05T06:10:28.830

也许我遗漏了一些东西，但您是否尝试在 application.conf 中指定**http.port=80**？

# python - 从 python 中的 win32com.client 类继承

> ID：12267366
> 
> 赞同：0
> 
> 时间：2012-09-04T16:06:05.157
> 
> 标签：python, inheritance, metaclass, win32com

我正在使用带有 win32com 模块的 python2.7 来访问 win32 COM 库。和：

```
import win32com.client
app = win32com.client.Dispatch('Word.Application') 
```

我得到了一个在 python 中运行良好的应用程序对象，尽管我只有后期绑定可用。

现在我想从这个类继承：

```
class icad(app):
    pass 
```

whicht 抛出以下异常：

```
TypeError: Error when calling the metaclass bases
__init__() takes at most 2 arguments (4 given) 
```

有没有办法在运行时从这些 COM 类继承？元类似乎是提示，但我不知道从哪里开始。

# ios5 - 在 iOS5 中更改图像大小

> ID：12267368
> 
> 赞同：0
> 
> 时间：2012-09-04T16:06:10.773
> 
> 标签：ios5, uiscrollview, uiimageview, uiimage

我在从 Web 服务调整图像大小时遇到​​问题（在下面的代码中，我试图将 400*266 降低到 300*200）。在详细视图控制器的 viewDidLoad 中，我添加了滚动视图和图像视图。然后我将图像添加到图像视图并更改图像视图框架的大小。结果是 300*100 图像。身高总是我想要的一半左右。但是，如果我在情节提要中手动更改尺寸（对于不同的图像尺寸没有用），它就像一个魅力。我错过了什么？

```
@interface DetailVIewController () <UIScrollViewDelegate>
@property (weak, nonatomic) IBOutlet UIScrollView *scrollView;
@property (weak, nonatomic) IBOutlet UIImageView *imageView;
....    

//adding image and resizing imageview's frame
UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:someURL]]];
imageView.image = image;
self.imageView.frame = CGRectMake(10, 20, 300, 200);
....

//further down the code (if it's an issue):
CGSize size = {screenWidth, screenHeight};
self.scrollView.delegate = self;
self.scrollView.contentSize = size; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:49:48.187

我终于解决了这个问题。我点击了*MainStoryboard.storyboard*并稍微摆弄了一下。当我取消选中*Resize View From NIB* ... vuola ... 图像尺寸完美：D

（点击故事板中的视图控制器 -> 属性检查器 -> 视图控制器 -> 布局 -> 从 NIB 调整视图大小）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:12:44.283

如果您有不同尺寸的图像，那么您需要查看比例而不是尺寸的概念。您在初始化时调整图像的比例，[看看这里](https://stackoverflow.com/a/3679267/442328)。然后，当您将图像设置为 imageView 调用`[imageView sizeToFit]`以使其完全适合图像大小时。

希望这可以帮助。

# apache-flex - 将 Flex 组件文本绑定到桌面应用程序的 xml 节点文本

> ID：12267371
> 
> 赞同：1
> 
> 时间：2012-09-04T16:06:18.197
> 
> 标签：apache-flex, air, flash-builder

我有一个带有三个选项卡的 tabNavigator，在 2 个选项卡页上，我有一个富文本控件 id =“characters”和 id =“worlds”，一个是 textarea 控件 id =“objects”。

如何将这些绑定到带有节点的 xml 文件

（根>

(characters> *** //richtext.text 中的文本 id = "characters" 保存时必须放在这里*** (characters>

(worlds> ***//来自richtext.text id = "worlds" 的文本必须保存到这里***(/worlds>

(objects> *** //textarea.text 中的文本 id = "objets" 必须保存到这里*** (/objects>

(/根>

（必须使用括号，否则他们不显示）

接着

当我打开保存的文件时，xml 节点中的文本必须写回 tabnavigator 中的三个组件。

请帮忙，我正在上一门课程，我的任务是编写一个桌面软件并将所有用户输入保存在 xml 中，我就是不明白。

感谢您的帮助和耐心

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:52:14.833

我认为您需要将 XML/Actionscript 对象序列化与保存应用程序/文档状态的任何事情分开。

为简单起见，您可以为三个视图创建一个演示模型，以绑定视图中的所有数据，如下所示：

演示模型.as

```
[Bindable]
public var characters:String;

[Bindable]
public var worlds:String;

[Bindable]
public var objects:String; 
```

一旦从用户输入中收集了所有数据，您就可以使用基于 Flex 的序列化库将值/复杂对象更改为 XML，或者简单地使用方法中的对象来手动构建 XML 文件。

# datetime - Python TimeDelta 将日期添加到提供的参数

> ID：12267374
> 
> 赞同：2
> 
> 时间：2012-09-04T16:06:28.977
> 
> 标签：datetime, python-2.7

不知道如何处理这个。

用户提供一个参数，即 program.exe '2001-08-12'

我需要在该参数中添加一天 - 这将代表程序另一部分的日期范围。我知道您可以从当天添加或减去，但是如何从用户提供的日期中添加或减去？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T16:15:15.773

```
import datetime
...
date=time.strptime(argv[1], "%y-%m-%d");
newdate=date + datetime.timedelta(days=1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T16:49:44.467

Arnauds 代码是有效的，看看如何使用它:) :-

```
>>> import datetime
>>> x=datetime.datetime.strptime('2001-08-12','%Y-%m-%d')
>>> newdate=x + datetime.timedelta(days=1)
>>> newdate
datetime.datetime(2001, 8, 13, 0, 0)
>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T16:15:56.087

好的，这就是我所拥有的：

```
import sys
from datetime import datetime
user_input = sys.argv[1]                # Get their date string

year_month_day = user_input.split('-')  # Split it into [year, month, day]

year = int(year_month_day[0])
month = int(year_month_day[1])
day = int(year_month_day[2])

date_plus_a_day = datetime(year, month, day+1) 
```

我知道这有点长，但我想确保每个步骤都清楚。如果你想要它更短，我会把它缩短给你。

# ms-access - 在删除触发器之前从表中删除记录

> ID：12267375
> 
> 赞同：0
> 
> 时间：2012-09-04T16:06:36.740
> 
> 标签：ms-access, ms-access-2010

我知道在 MSSQL 中，当您将触发器加载到表上时，您可以访问要操作的记录的“缓存表”（更新、插入、删除）。

是否有类似的机制可以从 Access 中使用？如果不是，如果我想从基表强制执行 1:1-M 到连接表，我该怎么做？

尝试使用他们的“哦，太有用了”的关系模式，但由于我找不到我设置和索引的 PK 的“唯一”索引，我不能使用 Enforce Integrity 的涓滴删除部分。有没有看到“很少”，这对我来说似乎很常见，“不确定”的关系状态。

# 设计

## 表1（基表）：

### 领域：

*   吉德
*   纳米
*   （更多领域）

### 索引：

*   gid + nm（唯一标识 - gid 不是自动编号）
*   吉德

## 表2（连接表）：

### 领域：

*   吉德
*   cid
*   （更多领域）

### 索引：

*   gid + cid（唯一标识）
*   吉德
*   cid

# 触发思路：

## 删除（BeforeDelete 触发器）

1.  如果（table1.gid 被删除）那么`Delete * From Table2 Where gid=delete.id`
    *   `delete`缓存表在哪里
2.  继续验证，直到所有表都已正确更新/删除基表中的 gid 条目

# 编辑 2012-09-04 @ 12:20pm

好的，这是我现在拥有的数据宏，它可能在语法上很草率，但到目前为止我从在线阅读中推断出的内容。使用这种格式时，有什么我应该注意或期望的吗？是的，`deletegroup`是在模块中发布的全局方法。

![删除数据之前-宏](../Images/5331e9e4b9fa1411bbe6ca2e278c94fb.png)

最终用户将使用运行时访问，运行时环境与完整版本是否应该以任何方式阻碍此触发器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:26:20.397

> 宏的下一步自然是为业务规则提供模型。数据宏允许开发人员将逻辑附加到记录/表事件（类似于 SQL 触发器）。这意味着您在一个地方编写逻辑，并且更新这些表的所有表单和代码都继承该逻辑。以下是您可能会在典型的捐赠管理数据库中找到的一些数据宏场景：

[Access 2010 数据宏（类似于触发器）](http://blogs.office.com/b/microsoft-access/archive/2009/08/13/access-2010-data-macros-similar-to-triggers.aspx)

或者，对于级联删除，考虑根据我对您之前帖子的评论设置关系：[在 Access 2007 中引用复合主键](https://stackoverflow.com/questions/11730619/reference-to-composite-primary-key-in-access-2007/11737106#11737106)

# android - 如何在布局中考虑 tabwidget 的高度？

> ID：12267377
> 
> 赞同：0
> 
> 时间：2012-09-04T16:06:57.687
> 
> 标签：android

我有两个使用选项卡切换的活动。我有一个问题，我的活动内容没有正确调整大小以考虑选项卡小部件的高度（因此活动内容显示在选项卡后面）。我在底部有标签。我试过玩标签布局等，但没有运气。

在设计布局（用于选项卡内容活动）时，有没有办法考虑 android 中的选项卡高度？我的猜测是，在将活动添加到选项卡主机后，我为活动设计布局的方式太高了。这在 iOS 上是可能的，但不知道如何在 android 上做到这一点。有任何想法吗？

```
 <?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_alignParentBottom="true"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">
        </TabWidget>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_above="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="match_parent">
        </FrameLayout>
    </RelativeLayout>

</TabHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:09:40.977

一个非常简单的解决方案是使用固定大小的标签，例如

```
 <TabWidget
        android:id="@android:id/tabs"
        android:layout_alignParentBottom="true"
        android:layout_width="match_parent"
        android:layout_height="64dp">
    </TabWidget> 
```

# asp.net - 如何使 Web 服务在 Internet 上可公开访问

> ID：12267378
> 
> 赞同：-2
> 
> 时间：2012-09-04T16:07:00.430
> 
> 标签：asp.net, web-services, iis-7, hosting

我终于完成了我的网络服务，我已经用本地主机和我的网络进行了测试，现在我想做的是发送我的网络服务以上传到互联网。

我使用 nodepad（而不是使用 Visual Studio）在 C#、asp.net 中编写了我的 Web 服务，我也使用 IIS 作为 localhost，所以我在虚拟目录中的文件是：

1.  基于 Web 的服务使用者：WebApp.aspx
2.  第一服务.asmx
3.  第一服务.cs
4.  第一服务.dll

现在在 localhost 中效果很好，但我不知道如何在互联网上发布。有人可以解释或发送指南，让我记住我没有使用 Visual Studio（并且不想，不要问为什么）。

我唯一知道的是我必须有一个使用 IIS 的服务器。这是真的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:14:27.553

是的，现在您需要为 IIS 托管帐户付费才能远程提供您的文件以供全世界查看。

例如： [http ://uk.godaddy.com/hosting/web-hosting.aspx](http://uk.godaddy.com/hosting/web-hosting.aspx)

他们可能会给您一个 FTP 帐户，您可以在其中上传文件和某种 Web 界面供您配置服务器。如果您与他们交谈，我相信他们可以引导您完成它。

祝你好运。

# ember.js - Ember.js 在点击时绑定类更改

> ID：12267381
> 
> 赞同：2
> 
> 时间：2012-09-04T16:07:15.300
> 
> 标签：ember.js

如何通过 ember.js 更改元素类点击，AKA：

```
<div class="row" {{bindAttr class="isEnabled:enabled:disabled"}}> 
```

看法：

```
SearchDropdown.SearchResultV = Ember.View.extend(Ember.Metamorph, {
    isEnabled: false,

    click: function(){
        window.alert(true);
        this.isEnabled = true;
    }
}); 
```

单击事件在窗口警报发生时起作用，我只是无法绑定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T15:52:02.913

该类已正确绑定，但该`isEnabled`属性只能通过`.set`调用来修改，例如，`this.set('isEnabled', true)`并且只能通过`this.get('isEnabled')`. 这是支持一流绑定和计算属性的 Ember 约定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T19:18:49.543

在您看来，您将绑定到一个类名。我的应用程序中有以下视图：

```
EurekaJ.TabItemView = Ember.View.extend(Ember.TargetActionSupport, {
    content: null,
    tagName: 'li',

    classNameBindings: "isSelected",

    isSelected: function() {
        return this.get('controller').get('selectedTab').get('tabId') == this.get('tab').get('tabId');
    }.property('controller.selectedTab'),

    click: function() {
        this.get('controller').set('selectedTab', this.get('tab'));
        if (this.get('tab').get('tabState')) {
            EurekaJ.router.transitionTo(this.get('tab').get('tabState'));
        }

    },

    template: Ember.Handlebars.compile('<div class="featureTabTop"></div>{{tab.tabName}}')
}); 
```

在这里，您已将您的 className 绑定到“isSelected”属性返回的任何内容。仅当视图的控制器选择的选项卡 ID 与此视图的选项卡 ID 相同时才适用。

当视图被选中时，代码将附加一个 CSS 类名“is-selected”。

如果你想在上下文中查看代码，代码在 GitHub 上：[https://github.com/joachimhs/EurekaJ/blob/netty-ember/EurekaJ.View/src/main/webapp/js/app/views。 js#L100](https://github.com/joachimhs/EurekaJ/blob/netty-ember/EurekaJ.View/src/main/webapp/js/app/views.js#L100)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T08:08:45.317

很好的答案，但是我走了另一条路：

```
SearchDropdown.SearchResultV = Ember.View.extend(Ember.Metamorph, {
    classNameBindings: ['isSelected'],
    click: function(){

        var content = this.get('content');
        SearchDropdown.SelectedSearchController.set('content', content);
        var loadcontent = this.get('content');
        loadcontent.set("searchRadius", $("select[name=radius]").val());

        SearchDropdown.LoadMap.load(content);

    },
    isSelected: function () {
        var selectedItem = SearchDropdown.SelectedSearchController.get('content'),
          content = this.get('content');
        if (content === selectedItem) {
          return true;
        }
      }.property('SearchDropdown.SelectedSearchController.content')
}); 
```

控制器：

```
SearchDropdown.SelectedSearchController = Ember.Object.create({
  content: null,

}); 
```

基本上将所选视图的数据存储在控制器中，

# java - 如何在 Spring WebFlow2 中检查日期格式

> ID：12267386
> 
> 赞同：0
> 
> 时间：2012-09-04T16:07:39.137
> 
> 标签：java, spring, spring-mvc, spring-webflow

如何在 Spring WebFlow2 中检查日期格式。

我正在尝试找到一些可与 Spring Webflow 一起使用的代码，以检查用户输入的日期是否有效。我认为这是一个简单的检查

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:08:47.933

在客户端和服务器端使用 JavaScript 正则表达式`java.text.DateFormat`：

```
DateFormat formatter = new SimpleDateFormat("yyyy-MMM-dd");
formatter.setLenient(false);
String dateAsString = request.getParameter("date");
Date date = formatter.parse(dateAsString); // throws an exception if the String is incorrectly formatted. 
```

# sublimetext2 - 如何让 HAML 注释在 Sublime text 2 中正常工作

> ID：12267389
> 
> 赞同：6
> 
> 时间：2012-09-04T16:07:52.993
> 
> 标签：sublimetext2

`-#`注释不应该是`/`因为我们不希望向用户显示此代码

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T16:17:44.993

找到了解决方案：

1) 安装 textmate 包 [https://github.com/phuibonhoa/handcrafted-haml-textmate-bundle](https://github.com/phuibonhoa/handcrafted-haml-textmate-bundle)

我认为这可以通过包管理器来完成，我刚刚使用

`git clone git://github.com/phuibonhoa/handcrafted-haml-textmate-bundle.git Haml.tmbundle`

在包文件夹中

2）删除文件夹中以开头的所有`Ruby Haml`文件`Packages/Rails`

3) 重启 sublime

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-09T20:13:06.627

您可以更改您的 RubyHaml 评论首选项。

`Preferences > Browse Package > Rails > Ruby Haml Comments.tmPreferences`并`TM_COMMENT_START`从`\`到编辑`-#`

不幸的是，这仅限于范围，`<string>text.haml</string>`并且不会始终使用 haml 注释/取消注释。

# java - KML 编组生成零长度文件

> ID：12267393
> 
> 赞同：1
> 
> 时间：2012-09-04T16:08:11.867
> 
> 标签：java, marshalling, kml, jak

在 Java 代码中，我生成了一个线程，它每秒从模拟器收集 DIS 数据包，并*尝试*格式化 KML 输出。在我的 Java 代码中，我正在创建一个带有样式、地标和多边形的文档。每秒一次，我可以看到“marshal”API 例程确实使用我的数据创建了一个 KML 文件。但是，有时它会*随机*创建一个完整的文件，有时它会创建一个*零长度*文件。即使我关闭了我的 DIS 数据包生成器，并让我的 Java 代码仍在运行，它仍然会继续*随机*创建一个完整的文件，有时还会创建一个*零长度的*文件。当我将计时器从每秒更改为每 10 秒时，行为每 10 秒发生一次。

我尝试将 marshal() 用于 File 对象和 OutputStream 对象；同样奇怪的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T01:45:17.927

这可能是由于并发访问。创建编组器是一项昂贵的操作，它需要时间，而且据我所知编组器不是线程安全的。我在 Restlet 中使用了 jaxb 连接器，并结合了 JAK，这是一个[很好的例子](https://github.com/restlet/restlet-framework-java/blob/master/modules/org.restlet.ext.jaxb/src/org/restlet/ext/jaxb/internal/Marshaller.java)，说明了如何创建编组器并以线程安全的方式缓存它们：

```
/** Use thread identity to preserve safety of access to marshalers. */
private final ThreadLocal<javax.xml.bind.Marshaller> marshaller = new ThreadLocal<javax.xml.bind.Marshaller>() { 
```

看看如何在同步方法中创建编组器，然后将其存储在 ThreadLocal 变量中。

# asp.net - “字符串”不包含“文本”的引用

> ID：12267396
> 
> 赞同：0
> 
> 时间：2012-09-04T16:08:23.447
> 
> 标签：asp.net

add 上的 .Text 给出了错误，我相信我有正确的程序集。

```
StringCollection sc = new StringCollection();

for (int i = 1; i <= 2; i++)
{
    //extract the TextBox values
    string txt1 = ((TextBox)Page.FindControl("TextBox1" + i.ToString())).Text;
    string txt2 = ((TextBox)Page.FindControl("TextBox2" + i.ToString())).Text;
    string txt3 = ((TextBox)Page.FindControl("TextBox3" + i.ToString())).Text;
    string txt4 = ((TextBox)Page.FindControl("TextBox4" + i.ToString())).Text;
    string txt5 = ((TextBox)Page.FindControl("TextBox5" + i.ToString())).Text;
    string txt6 = ((TextBox)Page.FindControl("TextBox6" + i.ToString())).Text;
    string txt7 = ((TextBox)Page.FindControl("TextBox7" + i.ToString())).Text;
    string txt8 = ((TextBox)Page.FindControl("TextBox8" + i.ToString())).Text;
    string txt9 = ((TextBox)Page.FindControl("TextBox9" + i.ToString())).Text;

    sc.Add(txt1.Text, txt2.Text, txt3.Text, txt4.Text, txt5.Text, txt6.Text, txt7.Text, txt8.Text, txt9.Text);
}

    InsertRecords(sc); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T16:11:14.077

您基本上是在调用`string.Text`，因为类型`txt1, txt2, etc`是字符串，因此出现错误。但请注意，您已经在调用`.Text`控件`TextField`，因此您可能打算做的是：

```
sc.AddRange(new string[]{txt1, txt2, txt3, ...}); 
```

# c++ - operator[] 歧义解析

> ID：12267397
> 
> 赞同：1
> 
> 时间：2012-09-04T16:08:32.930
> 
> 标签：c++, class, operator-overloading, ambiguity, containment

菜鸟在这里。以下是我在书籍示例中遇到的类定义的片段：

```
double& operator[](int i);
double operator[](int i) const; 
```

我的问题是：**为什么这不是模棱两可的？**编译项目文件时，编译器不会给出任何错误。此外，在下面（`valarray<double>`例如，想象 AnyClass 包含一个对象，我想直接访问它）：

```
AnyClass test;
cout << test[2] 
```

编译器使用哪个版本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T16:10:44.067

它不是模棱两可的，因为它`const`是签名的一部分，可用于重载解决方案。因此，如果您`operator[]`在非常量对象上使用，它会选择重载，`const`因为这是最具体的。如果你在 const 对象上使用它，它会选择重载，`const`因为这是唯一适用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:10:09.697

如果在`const`对象上调用，`const`将使用该版本，否则使用另一个。

这就是编译器解决歧义的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T16:10:47.597

```
AnyClass test;
const AnyClass const_test;
std::cout << test[2];       // calls operator[](int)
std::cout << const_test[2]; // calls operator[](int) const 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T16:16:58.723

要理解这一点，您通常只需要意识到`const`参数上的 a 足以消除调用的歧义：

```
#include <iostream>

void foo(char* ptr)
{
    std::cout << "mutable: " << ptr << std::endl;
}

void foo(const char* ptr)
{
    std::cout << "const: " << ptr << std::endl;
}

int main()
{
    const char* constHello = "hello";
    char mutableHello[] = "hello";
    foo(constHello);
    foo(mutableHello);
} 
```

这打印：

> 常量：你好
> 可变：你好

编译器将尽可能选择限制最少的重载。因此，如果您在过载`char*`时使用 a `char*`，它将选择它；但如果没有，编译器将决定将其强制转换为 a`const char*`是可行的转换（显然，反之亦然）。

现在，非常简单的事情是所有方法都传递一个`this`指针作为任何函数的第一个参数。为简单起见，隐藏此参数。`const`方法末尾的 限定参数`this`。因为，正如我们刚刚看到的，`const`指针上的 a 足以消除重载的歧义，这将有效地工作。

# oauth - OAuth2 将授权传递给另一个客户端

> ID：12267398
> 
> 赞同：2
> 
> 时间：2012-09-04T16:08:37.610
> 
> 标签：oauth, oauth-2.0

在实现 OAuth2 协议时，是否可以将授权传递给第二个客户端，类似于 CAS 中的代理身份验证？

用户通过客户端网站进行身份验证，该网站已被授予访问该用户帐户的授权，该网站将访问权限（传递令牌或其他任何内容）授予另一个客户端。那可能吗？我需要让用户单独授权吗？我可以将刷新令牌传递给小程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:12:06.987

从 OAuth 舞蹈返回的访问令牌有时称为“持有者令牌”，这掩盖了这样一个事实，即拥有它的任何人或任何人都被认为已通过身份验证并被授权访问资源。例如，您可以使用 JavaScript 流获取访问令牌并将其传递给服务器以发出请求。或相反亦然。访问令牌*是*访问。因此，通过这种方式，访问是可移植的。但是访问令牌通常会在一段时间后过期。

另一方面，刷新令牌不会过期，但通常与回调 URL 相关联。用刷新令牌交换访问令牌通常需要将回调请求发送到列入白名单的一组 URL。因此，您通常无法有效地传递刷新令牌。（注意：这并不意味着你不应该小心它，它本质上仍然是一个作用域密码，你*肯定*希望将其保密）。

# c# - 使用序列化维护对象关系映射

> ID：12267399
> 
> 赞同：2
> 
> 时间：2012-09-04T16:08:38.857
> 
> 标签：c#, wcf, entity-framework, serialization, orm

我试图找出一种方法来使我的一些数据库对象可序列化到 XML 文件和从 XML 文件序列化。

我正在为我的对象使用实体框架数据模型，并使用 WCF RIA 服务将它们提供给我的客户。我希望能够从数据库中获取给定对象并将其序列化为 XML 文件，反之亦然。

过去我试过这个，我遇到的问题如下：

*   如果我为每个对象实现 IXmlSerializable，那么在反序列化时，每个对象都不知道正在反序列化的其他对象。它处于一种泡沫中，无法将外键 ID 解析为对象引用。

*   对于上述问题，我找到的唯一解决方案是编写一个大的序列化和反序列化方法，其中父对象跟踪引用并根据需要分配它们。这感觉是一种非常糟糕的做法，因为我必须在对象更改时不断维护这个大方法，而不是每个对象负责自己的序列化。

*   相互嵌套对象的标准 XML 设计不适用于 ORM 模型。原因是某些对象可能有多个其他对象的引用并被多个其他对象使用，因此我无法将这些对象创建为父对象的子元素。

考虑以下 XML：

```
<User Name="John Smith">
    <FavoriteMovies>
        <Movie Name="The Big Lebowski" Year="1998" ... />
    </FavoriteMovies>
</User>

<User Name="Robert Jones">
   <FavoriteMovies>
       <Movie Name="The Big Lebowski" Year="1998" ... />
   </FavoriteMovies>
</User> 
```

显然我不应该有同一部电影的两个实例。相反，序列化应该是这样的：

```
<User Name="John Smith">
    <FavoriteMovies>
        <Id>5</Id>
    </FavoriteMovies>
</User>

<User Name="Robert Jones">
    <FavoriteMovies>
        <Id>5</Id>
    </FavoriteMovies>
</User>

<Movies>
    <Movie Id="5" Name="The Big Lebowski" Year="1998" ... />
</Movies> 
```

WCF 已经知道如何将我的对象序列化和反序列化为 SOAP/JSON/等。使用数据服务。这是我在序列化为 XML 文件时可以重复使用的东西吗？

我突然想到，依赖数据库外键 ID 可能行不通，因为在许多情况下，对象将具有默认 ID。WCF 设法序列化对象而不依赖于这些对象的设置，并且只有在将其保存到 SQL 数据库后才分配 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T15:10:53.240

我强烈推荐`Json.NET`序列化程序[http://json.codeplex.com/](http://json.codeplex.com/)而不是 DataContractSerializer，因为后者有点错误。例如，您还可以查看这个问题，以了解有关为什么`Json.Net`序列化程序更好的更多研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T23:46:24.967

不熟悉 EF 以及对象模型的工作原理，但对于大多数通过 WCF 成功序列化/反序列化的对象，您可以直接使用 DataContractSerializer。有关简单的演练，请参阅[本文](http://msdn.microsoft.com/en-us/library/ms731073.aspx)。

由于您不需要 XML 可互操作，因此您也可以使用该`preserveObjectReferences`设置来避免冗余数据。

# javascript - DatePicker 小部件的使用

> ID：12267400
> 
> 赞同：2
> 
> 时间：2012-09-04T16:08:39.993
> 
> 标签：javascript, jquery, html, calendar, widget

我正在尝试将这个日历小部件放在我的网站上（不是作为绑定到输入表单字段的日期选择器，而是作为小部件！）：[http](http://www.eyecon.ro/datepicker/) ://www.eyecon.ro/datepicker/ - 我已经添加了必要的文件链接标题，但小部件未显示 - 这里也是它的构造函数（来自标题）：

```
 <script>
        $('#date3').DatePicker({
        flat: true,
        date: ['2008-07-28','2008-07-31'],
        current: '2008-07-31',
        calendars: 3,
        mode: 'range',
        starts: 1
    });
  </script> 
```

和我在 html 中的 div：`<div id="date3"></div>` 我不知道这是否真的是使用这个小部件的好方法 - 请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:13:49.900

[在这里对我来说很好](http://jsfiddle.net/ZPwu8/)......然后我唯一添加的就是将`datepicker`初始化放在一个

```
$(document).ready(function() {
  //your code here
}); 
```

块以确保在调用 datepicker 之前[DOM 已准备好。](http://api.jquery.com/ready/)

注意 - 我添加了 JS 和 CSS 文件：

```
<script type='text/javascript' src="http://www.eyecon.ro/datepicker/js/datepicker.js"></script>
<link rel="stylesheet" type="text/css" ref="http://www.eyecon.ro/datepicker/css/datepicker.css"> 
```

# ruby-on-rails - ruby-on-rails 中的辅助列覆盖

> ID：12267401
> 
> 赞同：2
> 
> 时间：2012-09-04T16:08:40.987
> 
> 标签：ruby-on-rails, ruby, activescaffold

我有带有 activescaffold 的 ruby​​-on-rails 应用程序来构建基于数据库结构的 GUI。用户有角色，每个角色都是一组权限。每个权限都是控制器和用户被允许在此控制器中执行或不执行的操作的组合。

```
# DATABASE!
create_table :rights do |t|
  t.column :controller, :string, :limit => 32, :null => false
  t.column :action, :string, :limit => 32, :null => false
end

create_table :rights_roles, :id => false do |t|
  t.column :right_id,      :integer
  t.column :role_id,       :integer
end

create_table :roles do |t|
  t.column :name, :string, :limit => 32, :null => false
end

#MODELS!
class Role < ActiveRecord::Base
  has_and_belongs_to_many :rights

class Right < ActiveRecord::Base
  has_and_belongs_to_many :roles

# ROLE CONTROLLER!
class RoleController < ApplicationController
  active_scaffold :role do |config|
    config.columns = Array[:name, :rights]    
    config.columns[:rights].form_ui = :select 
```

我目前有以下不方便的角色编辑窗口（选项没有结构化。会有更多的动作，所以会很可怕）：

[http://postimage.org/image/4e8ukk2px/](http://postimage.org/image/4e8ukk2px/)

我想创建一个这样的辅助方法：

```
module RoleHelper
  def rights_form_column (record, input_name) 
    ...
  end
end 
```

这是定义为“权限”列指定输入法的表单所必需的。但是我不知道怎么写。理想的形式如下：

```
 administration
    action1(checkbox)
    action2(checkbox)
  configuration
    action1(checkbox)
    ... 
```

我知道 activescaffold 很旧，但我必须使用它...请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:21:55.267

最后我找到了解决方案。这对我有用=）

```
require 'set'

module RoleHelper
  def rights_form_column (record, input_name)
    selected_ids = [].to_set
    record.rights.each do |r|
      selected_ids.add(r.id)
    end

html = '<table style="margin-top:-25; margin-left:112">'
html << '<tr>'
html << '<td>'
html << '<ul style="list-style-type:none">'
Right.find(:all, :group => :controller).each do |right|
  unless Right::CONFIGURATION_CONTROLLERS.include?(right.controller) then
    html << '<li>'
    html << "<label>#{right.controller.titleize}:</label>"

    html << '<ul style="list-style-type:none">'
    Right.find(:all, :conditions => ["controller = ?", right.controller]).each do |r|
      html << '<li>'
      this_name = "#{input_name}[#{r.id}][id]"
      html << check_box_tag(this_name, r.id, selected_ids.include?(r.id))
      html << "<label for='#{this_name}'>"
      html << r.action.titleize
      html << '</label>'
      html << '</li>'
    end      
    html << '</ul>'
    html << '</li>'
  end
end

html << '<li>' # configuration section
html << "<label>Configuration:</label>"
html << '<ul style="list-style-type:none">'

Right.find(:all, :group => :controller).each do |right|
  if Right::CONFIGURATION_CONTROLLERS.include?(right.controller) then
    Right.find(:all, :conditions => ["controller = ?", right.controller]).each do |r|
      html << '<li>'
      this_name = "#{input_name}[#{r.id}][id]"
      html << check_box_tag(this_name, r.id, selected_ids.include?(r.id))
      html << "<label for='#{this_name}'>"
      html << r.controller.titleize + " edit"

  html << '</label>'
          html << '</li>'
        end      
      end
    end

html << '</ul>'
html << '</li>'
html << '</ul>'
html << '</td>'
html << '</tr>'
html << '</table>'
html
  end
end 
```

不知道为什么 StackOverflow 会选择如此奇怪的代码格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-19T12:06:17.687

如果您不需要任何特殊格式，我建议使用

```
config.columns[:your_column].form_ui = :select 
```

然后将其设为多个（检查文档）。然后使用 :update_config 方法更新配置，并为每个 current_user 应用新选项。

[https://github.com/activescaffold/active_scaffold/wiki/Per-Request-Configuration](https://github.com/activescaffold/active_scaffold/wiki/Per-Request-Configuration)

# vb.net - VB.net 如何为我自己的文件扩展名设置图标

> ID：12267410
> 
> 赞同：2
> 
> 时间：2012-09-04T16:09:26.413
> 
> 标签：vb.net, winforms

我想为所有带有扩展名的文件设置图标：“.fEx”，我还希望该文件将与我的应用程序一起打开，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:19:50.617

为此，您需要在 HKEY_CLASSES_ROOT 下为您的扩展创建一个 DefaultIcon 键，然后将值设置为 @="icon path"

这应该是您需要插入要使用的图标路径的位置。

> HKEY_CLASSES_ROOT\.fEx\DefaultIcon

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:13:31.620

这不是一个真正的 VB.NET 问题，但您可以通过在 VB.NET 中编码来实现您想要的。

基本上你必须设置所需的注册表值来关联文件类型并告诉它默认情况下哪个应用程序将打开它

看看[这篇代码项目文章](http://www.codeproject.com/Articles/18594/File-Association-in-VB-NET)——它解释了你应该知道的一切。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T16:12:51.507

本文是为 C# 编写的，但 VB.NET 已经足够接近，您应该能够编写几乎相同的代码来完成您想要的。 [C#：设置文件类型关联](http://mel-green.com/2009/04/c-set-file-type-association/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T16:13:16.533

您必须设置适当的注册表项。

*   [在 VB.NET 中设置文件关联](http://www.codeproject.com/Articles/18594/File-Association-in-VB-NET)

# javascript - JScript 错误：无法分配给函数结果

> ID：12267411
> 
> 赞同：2
> 
> 时间：2012-09-04T16:09:35.827
> 
> 标签：javascript, jquery, asp.net

在我的应用程序中，我试图根据条件隐藏表格。我正在使用简单的 javascript 函数来隐藏表格。

该功能在以下行失败

```
if ((image1.trim() = '') && (image2 != '1')) { 
```

给出错误

> “Microsoft JScript 运行时错误：无法分配给函数结果”。

这是代码。

html代码：

```
 <table id="tblImage" cellpadding="0" cellspacing="0" style="padding:2px 0px">
            <tr>                
                <td>
                    <div id="otherImages"></div>
                </td>
            </tr>
     </table> 
```

Javascript函数：

```
function DisplayTable() {
    var image1 = document.getElementById('ctl00_ContentPlaceHolder1_image1').value;
    var image2 = document.getElementById('ctl00_ContentPlaceHolder1_image2').value;
    if ((image1.trim() = '') && (image2 != '')) {
         jQuery('#tblImage').hide();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T16:11:02.740

您正在使用`=`，但您应该使用`==`：

```
if ((image1.trim() == '') && (image2 != '1')) { 
```

基本上`=`意味着赋值并且`==`意味着*等于*。这会产生错误，因为无法为函数赋值（这种情况发生在您试图为 赋值的地方`trim()`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T16:11:38.010

您在以下语句中使用`=`( *assignment* ) 而不是`==`( *equals* ) `if`，导致`assignment to a function`错误。请改用以下内容：

```
if ((image1.trim() == '') && (image2 != '')) {
     jQuery('#tblImage').hide();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T16:12:22.937

`if ((image1.trim() = '') && (image2 != '')) {`

应该

```
if ((image1.trim() == '') && (image2 != '')) {
              this__^ 
```

# r - 绘制数据时“强制引入的 NA”

> ID：12267414
> 
> 赞同：4
> 
> 时间：2012-09-04T16:09:39.640
> 
> 标签：r, graph, plot, lattice

我正在使用 R 中的 lattice 包在单个图表上绘制多个时间序列。每次尝试执行此操作时，我都会收到错误消息“强制引入的 NA”。我认为问题在于我在系列中缺少数据（即它们不是连续的，一些系列从较晚的日期开始，等等）。

具体来说：

```
1: In order(as.numeric(x)) : NAs introduced by coercion
2: In diff(as.numeric(x[ord])) : NAs introduced by coercion 
```

这是我的代码：

```
library("lattice")
df1 <- structure(list(STRING = c("1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
"1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
"1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
"1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
"1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
"1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
"1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
"1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
"1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC"
), time = c("2006-04-01", "2006-10-01", "2006-12-01", "2007-02-01", 
"2007-03-01", "2007-04-01", "2007-05-01", "2007-06-01", "2007-07-01", 
"2007-08-01", "2007-09-01", "2007-10-01", "2007-11-01", "2007-12-01", 
"2008-01-01", "2008-02-01", "2008-03-01", "2008-04-01", "2008-05-01", 
"2008-06-01", "2008-07-01", "2008-08-01", "2008-09-01", "2008-10-01", 
"2008-11-01", "2008-12-01", "2009-01-01", "2009-02-01", "2009-03-01", 
"2009-04-01", "2009-05-01", "2009-06-01", "2009-07-01", "2009-08-01", 
"2009-09-01", "2009-10-01", "2009-11-01", "2009-12-01", "2010-01-01", 
"2010-02-01", "2010-03-01", "2010-04-01", "2010-05-01"), ee_qty = c(NA, 
2302, 3434, 1800, 2766, 4408, 6314, 2860, 2476, 1572, 4950, 1812, 
14100, 7591, NA, NA, 11823, NA, NA, 11829, 3836, 5378, 4804, 
4356, 3655, 5955, 1345, 4717, 8854, 11494, 8260, 4330, 8210, 
5875, NA, 10955, 12018, 13052, 5332, 8831, 14260, 4998, NA), 
    ee_amt = c(NA, 33815.88, 60107.4, 66279.2, 66814.46, 129042.18, 
    151649.49, 58576.2, 61984.58, 61782, 102648.16, 67844.4, 
    362371.82, 159274.66, NA, NA, 285847.62, NA, NA, 258045.26, 
    82306.74, 119702.9, 113514.6, 118765.82, 86298.66, 155659.83, 
    40246.14, 134675.59, 236084.63, 256467.56, 210629.14, 99311.04, 
    173380.64, 131071.08, NA, 299148.999999999, 268373.8, 299873.68, 
    78714.6, 230198.46, 310660.74, 96227.82, NA), elite_qty = c(NA, 
    NA, NA, NA, NA, NA, NA, NA, NA, NA, 1281, 3037, 2141, 1764, 
    1661, 1838, 2780, 2627, 2498, 3137, 2238, 2470, 1107, 1886, 
    844, 798, NA, 1588, 1919, 2603, 2680, 2496, 2464, 3041, 3276, 
    5102, 5337, 4140, 5029, 4565, 5570, 6298, NA), elite_amt = c(NA, 
    NA, NA, NA, NA, NA, NA, NA, NA, NA, 34956.08, 48618.37, 58880.59, 
    49141.23, 49067.42, 40105.91, 89717.69, 78612.5, 40608.3599999999, 
    65893.38, 33706.66, 77191.76, 45096.9, 55742.83, 29993.7600000000, 
    27171.22, NA, 1427.23, 2466.64, 54500.19, 66476.09, 66041.74, 
    59235.3, 75234.11, 78109.54, 129537.51, 121485.25, 94928.86, 
    112024.69, 110419.7, 128789.94, 134046.79, NA), Sabry_Qty = c(596, 
    NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
    NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
    NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), Sabry_amt = c(17761.06, 
    NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
    NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
    NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), depo_qty = c(NA, 
    NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
    NA, 902, 319, 883, 597, 854, 710, 911, 573, 447, 857, 795, 
    997, 822, 640, 716, 708, 449, 535, 823, 916, 787, NA, NA, 
    NA, NA, NA), depo_amt = c(NA, NA, NA, NA, NA, NA, NA, NA, 
    NA, NA, NA, NA, NA, NA, NA, NA, NA, 31011.68, 13556.65, 32134.72, 
    23106.94, 36681.95, 30220.74, 38051.93, 24941.85, 19337.46, 
    31360.4, 30182.18, 41363.71, 34419.34, 25034.18, 29616, 27125.93, 
    18230.98, 21119.9100000000, 33614.83, 37555.37, 33671.35, 
    NA, NA, NA, NA, NA), tyc_qty = c(NA, NA, NA, NA, NA, NA, 
    NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
    NA, NA, NA, NA, NA, NA, 58, 116, 136, 167, 186, 139, 165, 
    169, 337, 219, 207, 210, 280, 366, 393, 216), tyc_amt = c(NA, 
    NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
    NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 3103.73, 7538.71, 
    7497.34, 14938.68, 12864.65, 10368.91, 12501.45, 12580.67, 
    28185.21, 17052.22, 15202.93, 16106.3, 19176.72, 24466.38, 
    26443.53, 15373.87), string2 = c("1A AUTO INC", "1A AUTO INC", 
    "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
    "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
    "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
    "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
    "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
    "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
    "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
    "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
    "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
    "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", "1A AUTO INC", 
    "1A AUTO INC")), .Names = c("STRING", "time", "ee_qty", "ee_amt", 
"elite_qty", "elite_amt", "Sabry_Qty", "Sabry_amt", "depo_qty", 
"depo_amt", "tyc_qty", "tyc_amt", "string2"), class = "data.frame", row.names = c(NA, 
43L))

graph1 <- xyplot(ee_amt + elite_amt + Sabry_amt + depo_amt + tyc_amt ~ time, data = df1, type = "1", auto.key = TRUE)
print(graph1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:30:21.937

我建议这个错误的这个错误的一部分是时间不是正确的`time`格式，即

```
is.character(df1$time) 
```

看

```
df1$random<-1:length(df1[[1]])
graph1 <- xyplot(ee_amt + elite_amt + Sabry_amt + depo_amt + tyc_amt ~ random, data = df1, type = "l", auto.key = TRUE) 
```

* * *

编辑：

或正如@plannapus 所建议的那样

```
df1$time <- as.Date(df1$time) 
```

# javascript - 新的 Firefox 和较差的 Jquery 性能

> ID：12267417
> 
> 赞同：0
> 
> 时间：2012-09-04T16:09:50.553
> 
> 标签：javascript, jquery

我不知道是否有人有这个问题：

升级到新版本的 Firefox (15.0) 后，我几乎所有的网页都出现了严重的 Jquery 性能问题（至少可以说我的幻灯片很不稳定）。我尝试重新安装浏览器，在安全模式下运行它我什至下载了 Firefox 16.0 beta，但问题仍然存在。在包括 IE8 在内的所有其他浏览器中，一切都很好，动画也很流畅。
***但如果我将 Firefox 降级到 1.13.1，一切运行正常。***

我的一些**幻灯片**表现不佳的网站：http:
[//www.homepagepays.robertpeic.com/index.html](http://www.homepagepays.robertpeic.com/index.html)
[http://robertpeic.com/newlife/](http://robertpeic.com/newlife/)
[http://wowslider.com/jquery-slider-noble-fade- demo.html](http://wowslider.com/jquery-slider-noble-fade-demo.html)（不是我的网站，但在我的 Firefox 15.0 平台上也有断断续续的幻灯片）

我的问题是：我做错了什么还是浏览器故障？
还有其他人有这个问题吗？
**如何在不降级 Firefox 的情况下解决这个问题？**
谢谢你们！！

# java - 障碍分解示例

> ID：12267418
> 
> 赞同：3
> 
> 时间：2012-09-04T16:09:52.980
> 
> 标签：java, multithreading, concurrency, cyclicbarrier

我正在阅读[Java Concurrency in Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601)一书，它说，

> `CyclicBarrier`允许固定数量的参与方在障碍点重复会合，并且在将问题分解为固定数量的独立子问题的并行迭代算法中很有用。

有人可以举例说明它如何将问题分解为多个独立的子问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T16:13:20.057

**您必须自己将问题分解为多个独立的子问题。**

障碍确保每一方在他们中的任何一方开始第二个子问题之前完成第一个子问题。这确保了在第二个子问题开始之前，来自第一个子问题的所有数据都可用。

CyclicBarrier 专门用于在每个步骤实际上相同的情况下一次又一次地需要相同的屏障。例如，在进行任何类型的多线程现实模拟时可能会发生这种情况，这种模拟是分步完成的。CyclicBarrier 将确保在所有线程开始下一步之前每个线程都已完成给定步骤。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T08:18:45.540

`CountDownLatch`和和之间还有另一个重要区别`CyclicBarrier`是：同步的线程`CountDownLatch`不能指示其他线程出现问题，因此其他线程可以选择继续中止整个协作操作。

如果某个`CycliBarrier`线程正在等待`await()`某个其他线程被中断或超时，那么`BrokenBarrierException`当前线程上将发生 a，表明其中一个协作线程出现问题。

`BrokenBarrierException`也将发生在您可以在 Javadoc on`await()`方法中找到的其他情况下。

开箱即用，`CountDownLatch`不提供此功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T16:13:31.977

**如果**您有一个可以分解为独立子问题的算法，
**那么**CyclicBarrier 对您的所有线程在计算结束时会面很有用，例如，合并它们的结果。

请注意，Java 7 中引入的[Fork/Join](http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html)框架使您能够执行类似的操作，而无需使用 CyclicBarrier。

# c# - ClosedXML：使用百分比、1 位小数和四舍五入？

> ID：12267421
> 
> 赞同：9
> 
> 时间：2012-09-04T16:10:00.360
> 
> 标签：c#, rounding, decimal, closedxml

我正在尝试使用 C# 并将`ClosedXML`数据输入到 Excel 工作表中。我已经找到了我正在寻找的大部分东西，但是我在`ClosedXML`处理小数位数以及四舍五入方面遇到了一些问题。

我目前正在使用`cell.Style.NumberFormat.NumberFormatId = 10;` 让单元格显示小数点后 2 位的百分比，但是我只想显示小数点后 1 位，而[wiki`ClosedXML`](http://closedxml.codeplex.com/wikipage?title=NumberFormatId%20Lookup%20Table)仅显示小数点后 0 或 2 位的百分比。

接下来当我不使用`ClosedXML`并直接添加数据时，Excel会将小数位向上四舍五入，但是当我使用`ClosedXML`输入数据时单元格不四舍五入，有没有办法强制`ClosedXML`为我四舍五入，还是我需要手动做吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T17:00:16.890

看起来您可能必须`NumberFormatId`根据此 SO 答案编写自己的自定义：[https](https://stackoverflow.com/a/7900397/541208) ://stackoverflow.com/a/7900397/541208 ，或者，在[`ClosedXML`文档](https://github.com/closedxml/closedxml/wiki/NumberFormatId-Lookup-Table)中，它说要添加一个新的`Style`：

```
var workbook = new XLWorkbook();
var ws = workbook.Worksheets.Add("Style NumberFormat");

var co = 2;
var ro = 1;

// Using a custom format
ws.Cell(++ro, co).Value = "123456.789";
ws.Cell(ro, co).Style.NumberFormat.Format = "$ #,##0.00";

ws.Cell(++ro, co).Value = "12.345";
ws.Cell(ro, co).Style.NumberFormat.Format = "0000";

// Using a OpenXML's predefined formats
ws.Cell(++ro, co).Value = "12.345";
ws.Cell(ro, co).Style.NumberFormat.NumberFormatId = 3;

ws.Column(co).AdjustToContents();

workbook.SaveAs("StylesNumberFormat.xlsx"); 
```

因此，您的自定义`NumberFormat`将类似于`0.0%`基于[此处列出的默认格式：](https://github.com/closedxml/closedxml/wiki/NumberFormatId-Lookup-Table)

```
ws.Cell(ro, co).Style.NumberFormat.Format = "0.0%"; 
```

# php - 使用 wp_update_post 在保存帖子上更新和添加标签帖子

> ID：12267422
> 
> 赞同：1
> 
> 时间：2012-09-04T16:10:01.810
> 
> 标签：php, wordpress, tags

我正在尝试构建一个函数来保存帖子 wp_update_post 以添加用逗号分隔的标签，如代码中

```
//Create the post array
$post = array(
'ID' => 5,
'tags_input' => 'foo,bar,baz');     

// Update the post
wp_update_post($post); 
```

该代码在我的 function.php 主题中运行良好，但是我想启动一个函数，使其仅在帖子或版本中运行，使用`add_filter ('wp_update_post','');`或创建新帖子`save_post('wp_update_post,'');`

我试着这样做

```
function add_tags($post) {
    global $post;
    $idpost = $post->ID;
    $tags = 'tag1, tag2, tag3, tag4';

    $post = array(
    'ID' => $idpost,
    'tags_input' => $tags);     

    wp_update_post($post);

    return $post;
}
add_filter( 'wp_update_post', 'add_tags');
save_post( 'wp_update_post', 'add_tags'); 
```

放入和不运行之间的无限循环

我做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T05:27:27.180

解决了：

```
function my_function(){
    if ( ! wp_is_post_revision( $post_id ) ){

        // unhook this function so it doesn't loop infinitely
        remove_action('save_post', 'my_function');

        // update the post, which calls save_post again
        $post = array(
                'ID' => 5,
                'tags_input' => 'foo,bar,baz');  
        wp_update_post( $post );

        // re-hook this function
        add_action('save_post', 'my_function');
    }
}
// hook the function
add_action('save_post', 'my_function'); 
```

# android - 将照片和坐标插入 SQLite DB 时出现 StackOverflowError

> ID：12267423
> 
> 赞同：0
> 
> 时间：2012-09-04T16:10:02.840
> 
> 标签：android, sqlite, stack-overflow

这是我第一次在 Android 环境中使用 SQLite。我试图在拍摄照片时将照片和用户的坐标插入`SQLite`数据库。

**昨晚（家用电脑）**当我试图将照片插入数据库时​​，它似乎工作得很好，没有例外，虽然我找不到平板电脑在哪里创建数据库，但我尝试`data`通过文件资源管理器查看文件夹在 Eclipse`DDMS`中，但那里什么都没有，使用我拥有的 Windows 文件资源管理器`Computer\SCH-I905\Tablet\Android\data`等`com.app`，但我的包不存在。

今天早上**（工作电脑）**我遇到了一个致命的`StackOverflowError`异常。我的代码有什么问题吗？我正在将图像转换为`byte[]`然后存储到数据库中，由于我阅读了一些针对s to 的建议`Blob`，我使用的是`byte[]`而不是将其转换为 String 。非常感谢任何帮助或建议，谢谢。`byte[]``String``Blob`

PS我的代码转换字符串中没有任何内容`toUpperCase()`

* * *

**背景：**

*   谷歌 API 12
*   在三星 Galaxy 10.1 4G LTE 平板电脑上进行测试
*   我正在两台不同的计算机（家庭和工作）上开发，目前我将文件复制到拇指驱动器，然后将它们加载到我的工作区并启动 Eclipse。由于签名冲突，我必须卸载该应用程序，然后通过 Eclipse 重新运行该应用程序。

* * *

**在这里，我将图像转换为** `byte[]` **然后发布到数据库：**

```
public Camera.PictureCallback jpegHandler = new Camera.PictureCallback(){

    public void onPictureTaken(byte[] jpeg, Camera camera ){
        // TODO Work on the image insertion into the database

        try {
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            image = BitmapFactory.decodeByteArray(jpeg, 0, jpeg.length);
            image.compress(Bitmap.CompressFormat.PNG, 100, bos);
            byte[] imageBlob = bos.toByteArray();

            UpdateGeoLocation updateGeo = new UpdateGeoLocation(getApplicationContext());

            double picLat = updateGeo.returnlocation.getLatitude();
            double picLng = updateGeo.returnlocation.getLongitude();

            Log.i("imageBlob", "" + imageBlob);
            Log.i("phoLat", "" + picLat);
            Log.i("phoLng", "" + picLng);

            dbControl.open();
            dbControl.addItem(imageBlob, picLat, picLng);
            dbControl.close();

            Log.i("InsertPhotoIntoDB", "WORKED!");
        } catch (SQLiteException e) {
            Log.e("InsertPhotoIntoDB", "FAILED: " + e.getMessage());
        } 
```

* * *

**这是我的一个片段** `DatabaseHelper.Java`

```
public class GlobalDBVars {
    public static final String DATABASE_NAME = "NST.db";
    public static final int DATABASE_VERSION = 2;
    public static final String TABLE_NAME = "photos_withCoordinates";

    public static final String KEY_ROWID = "_id";
    public static final String KEY_PHOTOS = "_photo";
    public static final String KEY_LAT = "_lat";
    public static final String KEY_LNG = "_lng";
}

private static final String DATABASE_CREATE = "CREATE TABLE IF NOT EXISTS " + 
    GlobalDBVars.TABLE_NAME + "(" + 
    GlobalDBVars.KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
    GlobalDBVars.KEY_PHOTOS + " BLOB NOT NULL, " + 
    GlobalDBVars.KEY_LAT + " REAL NOT NULL, " + 
    GlobalDBVars.KEY_LNG + " REAL NOT NULL);";

@Override
public void onCreate(SQLiteDatabase db) {
    try {
        db.execSQL(DATABASE_CREATE);
        onCreate(db);
        Log.i(TAG, "onCreate db: " + DATABASE_CREATE);
    } catch (SQLException e) {
        Log.e(TAG, "FAILED: " + e.getMessage());
    }
} 
```

* * *

**在其中插入语句** `DatabaseControl.Java`

```
public long addItem(byte[] photos, double _lat, double _lng) {
    ContentValues setUpVals = createContentValues(photos, _lat, _lng);

    return database.insert(GlobalDBVars.TABLE_NAME, null, setUpVals);
} 
```

* * *

**日志猫：**

```
09-04 10:08:48.160: I/imageBlob(21529): [B@40751c18
09-04 10:08:48.160: I/phoLat(21529): 37.3674153
09-04 10:08:48.160: I/phoLng(21529): -77.4001403
09-04 10:08:48.240: I/dalvikvm(21529): threadid=1: stack overflow on call to Ljava/util/Locale;.getLanguage:L
09-04 10:08:48.240: I/dalvikvm(21529):   method requires 8+20+0=28 bytes, fp is 0x58f53318 (24 left)
09-04 10:08:48.240: I/dalvikvm(21529):   expanding stack end (0x58f53300 to 0x58f53000)
09-04 10:08:48.240: I/dalvikvm(21529): Shrank stack (to 0x58f53300, curFrame is 0x58f56d8c)
09-04 10:08:48.240: D/AndroidRuntime(21529): Shutting down VM
09-04 10:08:48.240: W/dalvikvm(21529): threadid=1: thread exiting with uncaught exception (group=0x40105760)
09-04 10:08:48.270: D/dalvikvm(21529): GC_CONCURRENT freed 95K, 8% free 8606K/9287K, paused 2ms+2ms
09-04 10:08:48.310: E/AndroidRuntime(21529): FATAL EXCEPTION: main
09-04 10:08:48.310: E/AndroidRuntime(21529): java.lang.StackOverflowError
09-04 10:08:48.310: E/AndroidRuntime(21529):    at java.lang.CaseMapper.toUpperCase(CaseMapper.java:143)
09-04 10:08:48.310: E/AndroidRuntime(21529):    at java.lang.String.toUpperCase(String.java:1619)
09-04 10:08:48.310: E/AndroidRuntime(21529):    at android.database.DatabaseUtils.getSqlStatementType(DatabaseUtils.java:1245)
09-04 10:08:48.310: E/AndroidRuntime(21529):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:100)
09-04 10:08:48.310: E/AndroidRuntime(21529):    at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:59)
09-04 10:08:48.310: E/AndroidRuntime(21529):    at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:1931)
09-04 10:08:48.310: E/AndroidRuntime(21529):    at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1864)
09-04 10:08:48.310: E/AndroidRuntime(21529):    at sompackage.nst.DatabaseHelper.onCreate(DatabaseHelper.java:49) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:12:12.683

你在`onCreate()`递归调用

```
@Override
public void onCreate(SQLiteDatabase db) {
    try {
        db.execSQL(DATABASE_CREATE);
        **onCreate(db);**
...
} 
```

删除该`onCreate(db)`呼叫

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-07T02:56:07.673

循环调用 onCreate(db)。

```
@Override
public void onCreate(SQLiteDatabase db) {
try {
    onCreate(db);
} 
```

# sql - 可自定义的数据库名称和 TempDB

> ID：12267424
> 
> 赞同：0
> 
> 时间：2012-09-04T16:10:09.127
> 
> 标签：sql, sql-server, sql-server-2008

我有一块看起来有点像这样的 SQL

```
IF NOT EXISTS (SELECT * FROM sys.databases WHERE name = '{FOO}')
BEGIN
  EXECUTE ('CREATE DATABASE {FOO}')
  ALTER DATABASE {FOO} SET AUTO_CLOSE OFF
END 
```

`{FOO}`在运行时替换为用户可配置数据库的名称。逻辑是如果数据库已经存在，我不想创建它。

如果`{FOO}`是，`tempdb`那么当查询运行时我会失败

> 无法在数据库“tempdb”中设置选项“AUTO_CLOSE”。

我的问题是为什么我会失败？ `SELECT * FROM sys.databases WHERE name = 'tempdb'`返回零结果，所以我的整`BEGIN/END`对肯定不应该运行？事实上，如果我`print`在开始和结束之间放置一个语句，我看不到任何输出。

我的猜测是 SQL Server 正在对 SQL 进行某种 linting 以确保我不会乱用 tempdb？我已经通过使用解决了这个问题`EXECUTE`，但我有点困惑为什么我必须这样做！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T16:16:08.120

尝试确保两个命令是分开的并且在动态 SQL 中，然后解析器不会捕获对 tempdb 的更改：

```
EXEC sp_executesql N'CREATE DATABASE {FOO};';
EXEC sp_executesql N'ALTER DATABASE {FOO} SET AUTO_CLOSE OFF;'; 
```

这与您无法执行此操作的原因类似：

```
IF 1 = 1
BEGIN
  CREATE TABLE #t1(id INT);
END
ELSE
BEGIN
  CREATE TABLE #t1(x NVARCHAR(255));
END 
```

即使你我都知道只有一个#t1 代码路径可以到达，SQL Server 假定这两个路径都可以在运行时到达，因此在解析时会报错。

# chm - MS 帮助 - hhc 在构建 .chm 时编译 HTML 文件失败

> ID：12267428
> 
> 赞同：2
> 
> 时间：2012-09-04T16:10:26.000
> 
> 标签：chm

我正在使用 HTML Workshop 和 HHMod 将 WinHelp 转换为 html 帮助，但存在一些错误。有些文件已被丢弃，我猜是因为标题重复（尽管键不同）。但是对于这个问题：.hhp 需要一个默认文件，所以我通过复制现有（且有效的）.htm 文件创建了一个“html/empty.htm”。这是索引中只是要打开的书籍的项目的占位符。但是，在尝试构建 .chm 时，我得到：

```
HHC5003: Error: Compilation failed while compiling empty.htm 
```

其他 3000 多个文件编译得很好，但它们是由工具创建的。这是我手动创建的 .htm 文件：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>CIS Help</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<OBJECT TYPE="application/x-oleobject"
    CLASSID="clsid:1e2a7bd0-dab9-11d0-b93a-00c04fc99f9e">
    <PARAM NAME="Keyword" VALUE="CIS HELP">
</OBJECT>

<H1><CODE><A NAME="CIS HELP"></A>CIS Help</CODE></H1>

<pre><code>Press the "+" sign to expand the book.
</code></pre>
</BODY>
</HTML> 
```

以下是引用此 .htm 的 toc 文件 (.hhc) 中的片段：

```
<LI><OBJECT type="text/sitemap">
    <param name="Name" value="CIS HELP">
    <param name="Local" value="html/empty.htm">
    </OBJECT>

    <A HREF="html/empty.htm">CIS Help </A><BR> 
```

（目录继续在其下方定义许多 UL 层。）

这可能很明显，但我无法通过谷歌搜索任何关于如何为 .chm 创建有效的 .htm 文件的参考资料。请注意，虽然我不是编程新手，但我是 MS 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:12:55.027

对于遇到此问题的其他任何人：显然，绊脚石是将文件用作“默认文件” - HTML 帮助似乎自动使用列表中的第一个文件作为其默认文件，但如果您指定一个，它就会窒息。我可以找到的文档说，如果默认使用某个未知次数 x 并且 x 可能 == 256，就会发生这种情况。不幸的是，x 可能要小得多，因为我没有 256 个没有相关主题的项目.

# event-handling - 我可以对 VAST 视频事件使用哪种 HTTP 响应？

> ID：12267430
> 
> 赞同：1
> 
> 时间：2012-09-04T16:10:32.270
> 
> 标签：event-handling, html5-video

我正在实现一个事件处理程序来处理使用 IAB 标准化[视频广告服务模板投放](http://www.iab.net/media/file/VASTv3.0.pdf)的视频广告的事件回调。

我所能找到的记录这些事件的只是它们在 VAST 模板中配置为 URL。

我必须返回一些有效的 HTTP 响应，最简单的是没有内容的 200。我可以返回其他有效的成功响应吗？特别是，我可以返回 302 重定向并依赖重定向发生吗？

**编辑：**

例如，假设我在 VAST 代码中配置了以下事件：

```
<TrackingEvents>
  <Tracking event=”firstQuartile”&gt;
    <![CDATA[http://adserver.com/firstQuartile]>
  </Tracking>
</TrackingEvents> 
```

如果我在 adserver.com 上实现服务器，并响应对 /firstQuartile URI 主干的 HTTP 调用，我可以返回 302 重定向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-28T04:34:03.973

你应该只使用 200。理论上你可以发送任何响应代码，但标准不要求视频播放器对此做任何事情。从[VAST 3.0 规范](http://www.iab.net/media/file/VASTv3.0.pdf)中的相关部分（第 2.2.5 节，强调我的）：

> 视频播放器必须向跟踪元素中提供的 URI 发送请求；**但是，视频播放器不需要对返回的响应做任何事情**。响应只是为了确认一个事件并遵守 HTTP 协议。此响应通常是 200，响应正文中带有 1x1 像素图像（尽管响应可以是任何其他类型）。

如果您打算在多个服务器之间共享跟踪事件，则 VAST 规范提供了一种替代方法`<Tracking>`，即视频播放器必须同时请求多个相同类型的事件（第 2.3.1.8 节）：

> 使用多个相同类型的跟踪事件使广告服务器能够与其他广告服务系统（例如广告商使用的供应商广告服务器）共享印象跟踪信息。当提供多个相同类型的跟踪事件（即多个“开始”事件）时，视频播放器需要同时请求所有相同类型的事件或尽可能及时地请求所有事件。请求之间的任何重大延迟都可能导致广告服务系统之间的计数差异。

# c# - c#用linq只显示小数点后的数字

> ID：12267435
> 
> 赞同：4
> 
> 时间：2012-09-04T16:10:50.183
> 
> 标签：c#, sql, linq

我有一个成功执行的 linq 查询，返回的列之一是十进制类型，用于表示以英镑和便士为单位的价格（永远不会有任何负值）

我希望能够将英镑和便士剥离到我的投影的单独属性中，但是当使用诸如

```
var result= from j in context.Products

 select
   new{
     Price = t.Price,                                                     
     PricePounds = Math.Truncate(t.Price)
   }; 
```

我收到一个错误，即 Math.truncate 不受支持，因为它无法转换为存储表达式。如何从此查询中获取磅值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T16:12:18.170

如果之后您不需要在数据库中执行任何其他操作，最简单的方法就是执行截断客户端：

```
var query = context.Products
                   .AsEnumerable() // Everything from here is LINQ to Objects
                   .Select(p => new {
                               p.Price,
                               PricePounds = Math.Truncate(p.Price)
                           }); 
```

请注意，您可能还想强制转换为`int`-*这*可能已经在 EF 中得到支持。

编辑：如评论中所述，您可能希望先执行投影，例如

```
var query = context.Products
                   .Select(p => new { p.Price, p.SomethingElse })
                   .AsEnumerable() // Everything from here is LINQ to Objects
                   .Select(p => new {
                               p.Price,
                               PricePounds = Math.Truncate(p.Price),
                               p.SomethingElse
                           }); 
```

（`SomethingElse`例如，您感兴趣的另一处房产在哪里 - 我怀疑您*只*想要价格。）

当您只需要几个属性时，这将避免获取整个实体。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T16:20:42.537

你可以试试：

```
var result= from j in context.Products
select
  new {
       Price = t.Price,                                                     
       PricePounds = EntityFunctions.Truncate(t.Price, 0)
      }; 
```

情况是 Math.Truncate 不能被翻译成 EntityFunctions.Truncate 应该是的 SQL。

# ruby-on-rails - Ruby(on Rails) LINQ .Select 数据转换等效

> ID：12267436
> 
> 赞同：0
> 
> 时间：2012-09-04T16:10:49.977
> 
> 标签：ruby-on-rails, ruby, linq, equivalent

假设我在 C# 中有一个字符串数组，我可以使用以下 LINQ 语句将此字符串数组转换为整数数组：

```
(new[] {"1", "2", "3"}).Select(x => int.parse(x)) 
```

有与此等效的Ruby吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:04:26.847

更短的解决方案：

```
["1", "2", "3"].map(&:to_i) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:17:55.517

不太确定`Select`在 C# 中是什么意思，但是将字符串数组转换为整数数组非常简单：`["1", "2", "3"].map(&method(:Integer))`

# php - 无法为配置文件 Google 分析的 API V3 传递分段参数，获得 400 无效值

> ID：12267440
> 
> 赞同：3
> 
> 时间：2012-09-04T16:10:57.677
> 
> 标签：php, analytics, google-analytics-api

我正在使用带有 Google Anaytlics API v3 的 PHP 客户端库。到目前为止，我一直在钻探从配置文件中获取数据。我可以从个人资料中获取所有访问，但是当我决定使用细分来找出有多少推荐访问或付费搜索访问时，整个代码会因以下错误而中断。

未捕获的异常“apiServiceException”和消息“调用 GET 时出错” [https://www.googleapis.com/analytics/v3/data/ga?ids=ga%XXX&start-date=2012-02-01&end-date=2012-02-29&metrics =ga%3Avisits&segment=gaid%3A%3A10&key=XXXX](https://www.googleapis.com/analytics/v3/data/ga?ids=ga%XXX&start-date=2012-02-01&end-date=2012-02-29&metrics=ga%3Avisits&segment=gaid%3A%3A10&key=XXXX) : (400) 无效值'

这是导致问题的代码。我使用键和字符串值正确传递了可选的segments参数，但仍然出现错误

```
<?php
$data = $service -> data_ga -> get("ga:".$profile -> getId(), "2012-02-01", "2012-02-29", 'ga:visits', array("segment" => "gaid::10"));

?> 
```

如您所见，我已经删除了请求的部分内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T08:40:08.403

解决了它，以传递段并避免 400 错误。

而不是这个

```
 <?php
    $data = $service -> data_ga -> get("ga:".$profile -> getId(), "2012-02-01", "2012-02-29",      'ga:visits', array("segment" => "gaid::7"));

?> 
```

使用符号 - 在像这样的段 id 号之前

```
<?php
$data = $service -> data_ga -> get("ga:".$profile -> getId(), "2012-02-01", "2012-02-29", 'ga:visits', array("segment" => "gaid::-7"));

?> 
```

我不知道为什么会这样，我在这里的另一个论坛帖子上找到了解决方案

[https://groups.google.com/forum/#!searchin/google-analytics-data-export-api/segment](https://groups.google.com/forum/#!searchin/google-analytics-data-export-api/segment) $20v3/google-analytics-data-export-api/hfnaZSdR2FY/IKBUJdkFdUYJ

# regex - Python3中的正则表达式如何处理变音符号？

> ID：12267442
> 
> 赞同：1
> 
> 时间：2012-09-04T16:11:07.093
> 
> 标签：regex, unicode, python-3.x

我尝试使用模式 "(c,c,c)" 解析*Python3*和*re*模块字符串，其中 c 是要在 (a,b,ë,ɪ̈ ) 中选择的一个字符。我写了类似的东西：

```
src="(a,b,ɪ̈)"
pattern = "[abëɪ̈]"
for r in re.finditer( '\({0},{0},{0}\)'.format(pattern), src ):
    print( r.group() ) 
```

但是正则表达式不适用于 ɪ̈；Python 将 ɪ̈ 分析为由两个字符 (ɪ + diairesis) 组成，id est ɪ 加上一个变音符号：正则表达式不知道如何阅读“(a,b,ɪ̈)”。我对ë没有同样的问题；Python 将 ë 分析为一个字符，我的正则表达式能够读取“(a,b,ë)”，给出预期的答案。*由于 unicodedata.normalize('NFD', ...) 应用于src*和*pattern* ，我尝试使用规范化方法，但未成功。

我该如何解决这个问题？很高兴能帮助我！

PS：感谢*pythonm* ，我修正了一些错别字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T16:44:36.090

你可以`|`用来解决它：

```
#!/usr/bin/env python3
import re

print(re.findall(r'\({0},{0},{0}\)'.format("(?:[abë]|ɪ̈)"), "(a,b,ɪ̈)"))
# -> ['(a,b,ɪ̈)'] 
```

以上视为`ɪ̈`两个字符：

```
re.compile(r'[abë]|ɪ̈', re.DEBUG) 
```

输出：

```
branch 
  in 
    literal 97
    literal 98
    literal 235
or
  literal 618 
  literal 776 
```

# javascript - 尽管被用户触发，window.open 无法在 Internet Explorer 中工作

> ID：12267443
> 
> 赞同：0
> 
> 时间：2012-09-04T16:11:08.840
> 
> 标签：javascript, jquery, internet-explorer, browser, window

> **可能重复：**
> [ie8 var w= window.open() - “消息：无效参数。”](https://stackoverflow.com/questions/710756/ie8-var-w-window-open-message-invalid-argument)

看看这个页面：http: [//jsfiddle.net/S7Crc/](http://jsfiddle.net/S7Crc/)

请注意，尽管 window.open 是由用户触发的，但单击 click me 会在 Firefox 中正确打开一个窗口，但不能在 Internet Explorer 中打开...

如何让 Internet Explorer 正确执行 window.open 并使其与 Firefox 的行为相同？（请注意，我需要设置窗口的宽度和高度，因此简单的目标 _blank 或目标 _new 不是可行的选择）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:15:48.203

将第二个参数更改为`open()`，IE 中不允许使用连字符

第二个参数只使用字符[a-zA-Z]、数字和下划线

# python - 如何在 Linux 中将 MKL 库永久链接到 Numpy？

> ID：12267445
> 
> 赞同：3
> 
> 时间：2012-09-04T16:11:10.427
> 
> 标签：python, linux, numpy, shared-libraries, intel-mkl

我使用 Intel 的 MKL 库构建了 Numpy（对我来说这是一个艰难的过程，我花了一整天的时间！）。Numpy 需要使用 LD_LIBRARY_PATH 环境变量链接到 MKL 库，或者至少这是我这样做的方式......所以我在 .bashrc 中使用 export 来保存路径，当我启动新控制台并运行 python 时， Numpy 已正确加载库。

问题是它不适用于我使用 Pydev 开发程序的 Eclipse。我仍然可以在 Eclipse 的首选项中的某处添加 LD_LIBRARY_PATH，但是当我尝试安装 Scipy 时问题变得真实。Scipy 的安装脚本需要导入 Numpy，即使正确设置了 LD_LIBRARY_PATH，我仍然遇到无法导入的 MKL 库的错误：

```
$ sudo python setup.py install
Traceback (most recent call last):
  File "setup.py", line 208, in <module>
    setup_package()
  File "setup.py", line 145, in setup_package
    from numpy.distutils.core import setup
  File "/usr/local/lib/python2.7/dist-packages/numpy/__init__.py", line 137, in <module>
    import add_newdocs
  File "/usr/local/lib/python2.7/dist-packages/numpy/add_newdocs.py", line 9, in <module>
    from numpy.lib import add_newdoc
  File "/usr/local/lib/python2.7/dist-packages/numpy/lib/__init__.py", line 4, in <module>
    from type_check import *
  File "/usr/local/lib/python2.7/dist-packages/numpy/lib/type_check.py", line 8, in <module>
    import numpy.core.numeric as _nx
  File "/usr/local/lib/python2.7/dist-packages/numpy/core/__init__.py", line 5, in <module>
    import multiarray
ImportError: libimf.so: cannot open shared object file: No such file or directory 
```

libimf.so 是我必须链接的 MKL 共享库之一。除了直接修改`__init__.py`Numpy 的文件（我宁愿避免这样做，因为可能有更简洁的方法）之外，我不知道如何将 Numpy 永久链接到 MKL 库。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T17:11:06.960

感谢 Talonmies 的评论，我找到了做到这一点的方法！必须编辑文件`/etc/ld.so.conf`并添加库的路径。以下是我如何找到需要添加的路径（这是非常经验的......）：

每当我使用与无法导入的库相关的 Numpy 时遇到错误时，我都会以这种方式查找该库的路径：

`find /opt/intel -name library.so`

我得到例如路径： `/opt/intel/path/to/library.so`

我将此行添加到文件中`/etc/ld.so.conf`：

```
include /etc/ld.so.conf.d/*.conf

# Manually added lines
/opt/intel/path/to/library.so 
```

然后运行`ldconfig`以“链接”库！

干杯! 谢谢你Talonmies！

# javascript - 日期选择器无法使用 javascript 显示

> ID：12267451
> 
> 赞同：-1
> 
> 时间：2012-09-04T16:11:35.617
> 
> 标签：javascript, jquery, datepicker

为什么日期选择器不显示..我想要日期选择器以 2 形式显示，因为它有日期开始和日期结束..........感谢您的帮助......

```
<script type="text/javascript" src="jquery.1.4.2.js"></script>
<script type="text/javascript" src="jsDatePick.jquery.min.1.3.js"></script>
<script type="text/javascript">
window.onload = function(){
    new JsDatePick({
        useMode:2,
        target:"inputField",
        dateFormat:"%d-%M-%Y"
    });
};
</script>
<form action="index.php?page=form" method="post">
<table>
    <tr>
    <td>
        Date Start
    </td>
    <td>
        <input type="text" name="date1" id="inputField">
    </td>
    </tr>
    <tr>
    <td>
        Date Finish
    </td>
    <td>
        <input type="text" name="date2" id="inputField">
    </td>
    </tr>

  </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:35:09.520

```
<script type="text/javascript" src="jquery.1.4.2.js"></script>
<script type="text/javascript" src="jsDatePick.jquery.min.1.3.js"></script>
<script type="text/javascript">
window.onload = function(){
    new JsDatePick({
        useMode:2,
        target:"inputField",
        dateFormat:"%d-%M-%Y"
    });

    new JsDatePick({
        useMode:2,
        target:"inputField2",
        dateFormat:"%d-%M-%Y"
    });
};
</script>
<form action="index.php?page=form" method="post">
<table>
    <tr>
    <td>
        Date Start
    </td>
    <td>
        <input type="text" name="date1" id="inputField">
    </td>
    </tr>
    <tr>
    <td>
        Date Finish
    </td>
    <td>
        <input type="text" name="date2" id="inputField2">
    </td>
    </tr>

  </table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:53:28.957

ID 应该是唯一的，您应该为输入字段分配不同的 ID。还将您的代码包装在里面`$(document).ready( function()`；

```
$(document).ready( function(){
  new JsDatePick({
    useMode:2,
    target:"inputField",
    dateFormat:"%d-%M-%Y"
  });
  new JsDatePick({
    useMode:2,
    target:"inputField2",
    dateFormat:"%d-%M-%Y"
  });
}); 
```

*注意：我没有测试过这个。*

# c++ - 如何避免意外地按值而不是按引用获取数组元素？

> ID：12267453
> 
> 赞同：2
> 
> 时间：2012-09-04T16:11:36.890
> 
> 标签：c++, c++11, copy-constructor

假设我有一个 array `std::vector<Foo>`，我想遍历我所有的 foos 并像这样做一些事情：

```
for (auto foo : vecFoo)
    foo.x = 10; 
```

这最终什么都不做，因为它正在制作 vecFoo 内容的本地副本，而不是对其的引用。正确的循环如下：

```
for (auto& foo : vecFoo)
    foo.x = 10; 
```

这是我现在犯过几次的错误，所以我想找到一个解决方案，当我出错时会抓住我。我会对可以对结构执行的操作或可以打开的警告标志感到满意。我尝试将`Foo`' 的复制构造函数设为私有，但最终我无法执行`push_back`or `emplace_back`，这显然不是我想要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T16:27:47.317

根本问题的答案是*学习*。如果你再犯几次错误，你最终会从经验中学习。

至于您的特定情况的语言技巧，您可以完全控制存储在容器中的类型，您可以提供`nothrow`移动构造函数并禁用复制构造。这将需要使用`emplace_back`（或使用*移动语义*`push_back`）。

尽管如此，这只是在这种特殊情况下触发错误的一种方式，但是如果您存储的任何类型不是 100% 在您的控制之下（即不能禁用复制构造或添加移动构造，或者无法实现 nothrow 移动构造函数 -不能保证不会丢）那你就倒霉了，这就引出了第一句话：*learn to use references*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:59:08.327

> 我要求的是一种使该副本对我的班级无效的方法，这样就不会有机会犯这样的错误。

C++11 使您的类不可复制变得容易。只需删除复制构造函数/赋值运算符（假设您的编译器支持 C++11 功能）：

```
class SomeClass
{
public:
  SomeClass(const SomeClass &) = delete;
  SomeClass &operator=(const SomeClass &) = delete;

...
}; 
```

任何调用复制构造函数的尝试都会产生编译器错误。如果您使用尚不支持此语法的 Visual Studio，则必须为此使用标准 C++03 习惯用法。即，私下声明复制构造函数。

* * *

> 我不能再在向量中使用我的结构，因为它不能被复制到向量中。

你当然可以。您只是不能使用需要*复制*的功能。你必须用 and 替换你对and`push_back`的`insert`使用。`emplace_back``emplace`

请记住：如果您声明了复制构造函数和赋值运算符，即使只是删除它们，您也*必须*手动声明*移动*构造函数/赋值运算符。当然，您可以使用`= default`语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T16:17:12.600

> 这是我现在犯过几次的错误，所以我想找到一个解决方案，当我出错时会抓住我。

根据我的经验，最好的解决方案是训练自己始终将对象声明为`const`默认值。这使得尝试修改它们成为编译器检查错误。*一旦你这样做了*，当你忘记偏离它以使对象可写时，编译器将为你捕获这样的声明：

```
// This is what my hands write by default:
int const x = 42; 
```

我试着总是这样写。然后，每当我在代码中看到以下内容时：

```
int y =  42; 
```

我的想法试图弄清楚该变量是否实际上应该是可修改的。您可以将这种想法应用于您的循环示例，因为幸运的是，C++11 也允许这种用于 range-for 循环：

```
for (auto const i : vecFoo)
    i.foo = 10; // error 
```

当然，这仅在您训练自己自动完成`const`所有操作后才有效。

我同意这远非完美，需要大量练习。正如一些人反复指出的那样，最好的解决方案是 C++`const`默认考虑声明（实际上至少对于 lambda 捕获的值*是这种情况*），但那艘船已经航行了。

# ruby - 无法与 ruby 建立 https 连接

> ID：12267456
> 
> 赞同：4
> 
> 时间：2012-09-04T16:11:57.593
> 
> 标签：ruby, openssl, rvm, ruby-1.9.3, rbenv

我已经尝试了超过 5 种不同版本的 ruby​​，目前使用的是 1.9.2-p194。我收到此错误：

```
Connection reset by peer - SSL_connect (Errno::ECONNRESET) 
```

我已经重新编译，我尝试了 rvm、rbenv，甚至 apt-get ruby​​ ......这有效：

```
openssl ssl_client -connect google.com:443 
```

然而这并没有：

```
require "net/https"
require "uri"

uri = URI.parse("https://google.com/")
http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE

http.start do |agent|
  p agent.get(uri.path).read_body
end 
```

有人知道如何更好地调试吗？我正在使用 Ubuntu 12.04。在本地，这是可行的，我使用的是 Ubuntu 10.10。但是，openssl ssl_client 在两个操作系统上都可以工作，所以我只能假设这是一个红宝石问题。

编辑：

使用 rbenv 1.9.2-p320 让它工作，但相同的 ruby​​ 版本在 rvm 下不起作用。我会很感激任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:51:23.517

我想你必须在安装 OpenSSL 后重新安装（重新编译）Ruby：

```
rvm reinstall 1.9.3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:00:16.613

For the sake of those having the same issues. I found my problem was because i had ssl: true in config/ldap.yml (if you have that make sure your ldap server is ssl). If that helps you select this as the answer for those who come next.

# flash - away3d 带点光源的阴影

> ID：12267457
> 
> 赞同：1
> 
> 时间：2012-09-04T16:12:03.523
> 
> 标签：flash, actionscript, 3d, away3d

对于我的项目，我需要从点光源显示地面（平面）上物体的阴影。
物体可以非常靠近光源，我需要在远距离显示阴影。

为了计算来自 PointLight 的阴影，我使用`HardShadowMapMethod`.

我的问题是：

要么我设置小值的光衰减（或高值的ε），并且在地面上显示很多平行线（一种伪影？）

或者我设置了高值的光衰减，但物体和他的阴影之间有很大的阴影间隙。

我用黄金版。

使用参数光半径、光衰减、epsilon 和 dephtmapsize，不可能有没有间隙和没有平行线的阴影。

这种情况有解决办法吗？`HardShadowMapMethod`除了支持点光源还有其他方法吗？

这是一个屏幕截图：

![在此处输入图像描述](../Images/1fae3c66905de415c0a0f61fb88579b2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:54:36.377

试着玩

*   光照衰减值
*   影子ε
*   铸造物体尺寸

# java - 是否指定匿名类的数量从 1 开始？

> ID：12267459
> 
> 赞同：4
> 
> 时间：2012-09-04T16:12:04.443
> 
> 标签：java, class, specifications

[This answer](https://stackoverflow.com/a/1654928/160206) to another question建议，作为通过反射查找匿名类的一种解决方法，只需尝试所有名称，从开始`...$1`并计数直到找不到更多名称。这是否可以保证找到所有内部类，或者是否存在它们从 0 开始或某些数字被遗漏的情况（无论出于何种原因）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T16:20:07.157

[JLS 13.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-13.html#jls-13.1)规定：

> 类或接口必须以其二进制名称命名，必须满足以下约束：
> 
> *   顶级类型的二进制名称（第 7.6 节）是其规范名称（第 6.7 节）。
> *   [...]
> *   匿名类的二进制名称（第 15.9.5 节）由其直接封闭类型的二进制名称组成，后跟 $，后跟非空数字序列。

所以理论上，它不必从 1 开始，但它必须类似于`EnclosingClass$N`N 是一个数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T16:19:08.420

根据[这个答案](https://stackoverflow.com/questions/1075207/what-are-the-1-in-class-file)：

> 请注意，包含匿名内部类的文件的确切名称不是标准化的，并且可能会有所不同。但在实践中，除了这里描述的方案，我还没有看到任何其他方案。

所以我想没有这样的保证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T16:31:10.863

在这个指向 java.sun.com[教程](http://java.sun.com/developer/Books/certification/certbook.pdf)的链接中，它解释了来自第 243 页的匿名类以及遵循所描述的命名约定的示例输出。例如 *$1.class、*$2.class 等。在第 246 页的顶部它说：

> 运行时匿名类的名称也显示在程序输出中。它们也是用于指定它们各自的类文件的名称。匿名类毕竟不是那么匿名。

考虑到本教程在 Oracle 网站上，几乎可以肯定这是一个不会改变的约定。希望这可以帮助 ：）

# openssl - 无法使用 DES cbc 加密来加密数据包数据

> ID：12267466
> 
> 赞同：2
> 
> 时间：2012-09-04T16:12:23.303
> 
> 标签：openssl

我正在为我的小项目实施*Ipsec 管道*，我应该从 Ip 标头开始加密来自网络的传入数据包（IPSEC 的隧道模式）。

我的问题是，是否可以使用`DES_ncbc_encrypt()`api`openssl`一次性加密整个有效负载，或者我应该每次使用 64 位输入调用上述 api？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:30:17.607

for 的源代码`DES_ncbc_encrypt()`从您指定的长度向后循环，自己加密 8 个字节的块；它应该在一次调用中加密所有内容：

来自 OpenSSL 的 des 中的 ncbc_enc.c：

```
for (l-=8; l>=0; l-=8)
            {
            c2l(in,tin0);
            c2l(in,tin1);
            tin0^=tout0; tin[0]=tin0;
            tin1^=tout1; tin[1]=tin1;
            DES_encrypt1((DES_LONG *)tin,_schedule,DES_ENCRYPT);
            tout0=tin[0]; l2c(tout0,out);
            tout1=tin[1]; l2c(tout1,out);
            }
        if (l != -8)
            {
            c2ln(in,tin0,tin1,l+8);
            tin0^=tout0; tin[0]=tin0;
            tin1^=tout1; tin[1]=tin1;
            DES_encrypt1((DES_LONG *)tin,_schedule,DES_ENCRYPT);
            tout0=tin[0]; l2c(tout0,out);
            tout1=tin[1]; l2c(tout1,out);
            } 
```

你能显示一些代码吗？你遇到了什么错误？

大多数 OpenSSL 加密/解密功能都提倡使用更高级别的 EVP 例程——你试过吗？请参阅[此处的 EVP 文档](http://www.openssl.org/docs/crypto/evp.html#)。

# java - 谷歌应用引擎java的应用程序监控

> ID：12267469
> 
> 赞同：5
> 
> 时间：2012-09-04T16:12:28.063
> 
> 标签：java, google-app-engine, logging

在谷歌应用引擎上监控我的 java 应用的最佳方法是什么？我意识到记录了错误，我可以在管理控制台中检查它们，但我想更主动一点。我想在发生错误时立即得到通知。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T17:42:50.267

如果您对商业选择持开放态度，可以选择[Coalmine](https://getcoalmine.com)。该服务会自动捕获任何未捕获的异常，记录它们并通知您。这应该比简单地捕获异常并自己发送电子邮件要好，因为它们会收集有关请求的其他数据（例如环境设置、参数等）。为 GAE 设置它真的很容易。只需将 jar 添加到您的路径（或 maven dep），然后将 Web 过滤器添加到您的`web.xml`：

```
<filter>
    <filter-name>coalmine</filter-name>
    <filter-class>com.coalmine.connector.servlet.filter.GaeCoalmineFilter</filter-class>
    <init-param>
      <param-name>signature</param-name>
      <param-value>MY_COALMINE_SIGNATURE</param-value>
    </init-param>
</filter> 
```

它们还包括用于 JUL 或 Log4j 的适配器，以便`log.error(...)`自动向 Coalmine 报告。这是项目页面的链接，以获取更多说明和配置选项：[https ://github.com/coalmine/coalmine_java](https://github.com/coalmine/coalmine_java)

免责声明：我在煤矿工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:46:18.803

假设您能够在代码中捕获异常，我建议您可以使用电子邮件服务或 XMPP 服务立即通知您。

或者，您还可以查看[LogService API](https://developers.google.com/appengine/docs/java/logservice/overview)以编程方式访问您的日志，然后根据您正在查看的内容通知您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T21:10:53.883

如果您正在寻找针对特定应用程序监控 GAE 的性能，您可能需要查看[HawkEye](https://portal.appscale.com)。它是一个免费工具，可对在 Google App Engine 中运行的应用程序提供 API 级别的监控，并在延迟超过特定阈值时通知用户。

Google 的 Cloud Monitoring API 也很有用。

免责声明：我是 HawkEye 背后团队的一员。

# php - 使用 codeigniter 将数据添加到数据库

> ID：12267476
> 
> 赞同：2
> 
> 时间：2012-09-04T16:12:54.907
> 
> 标签：php, database, codeigniter, content-management-system, add

我目前正在尝试使用 codeigniter 将数据添加到数据库中。我已经使用 active 方法设置了一个注册页面，并尝试对添加新闻表单使用相同的方法，但没有成功。

当我单击提交时，它说找不到页面，并且 url 显示控制器功能名称。当我故意将任何字段留空时也是如此。我检查了我的数据库，没有添加任何记录，也没有 php 日志错误。

这是我的代码片段：

看法：

```
<?php echo form_open('add/add_article'); ?>
        <?php echo form_input('title', set_value('title', 'Title')); ?><br />
        <?php echo form_textarea('content', set_value('content', 'Content')); ?><br />
        <?php echo form_input('author', set_value('author', 'Author')); ?>
        <?php echo form_submit('submit', 'Add Article'); ?>
        <?php echo validation_errors('<p class="error">' );?>
  <?php echo form_close(); ?> 
```

控制器：

```
class Add extends CI_Controller {

    public function __construct() {
        parent::__construct();
    }

    public function index() {
        $this->load->view('admin/add');
}

    public function add_article() {
        $this->load->library('form_validation');

        $this->form_validation->set_rules('title', 'Title', 'trim|required');
        $this->form_validation->set_rules('content', 'Content', 'trim|required');
        $this->form_validation->set_rules('author', 'Author', 'trim|required');

        if($this->form_validation->run() == FALSE) {

        $this->index();

        }else{

            $this->load->model('news_model');
            if($query = $this->news_model->addArticle()) {
            $this->load->view('news');
            }else {
                $this->load->view('news');
        }
    }   
}
} 
```

模型：

```
public function __construct() {
    parent::__construct();
}

        function addArticle() {
    $data =array(
    'title' => $this->input->post('title'),
    'content' => $this->input->post('content'), 
    'author' => $this->input->post('author'),
    'username' => $this->input->post('username'));

    $insert = $this->db->insert('news', $data);
    return $insert;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T01:35:50.150

如果是服务器抛出未找到的页面，那几乎可以肯定是 URL 问题，而不是 CI/PHP 问题。

您的基本网址是否在配置文件中正确定义？您的`.htaccess`配置是否正确（旧配置可能会从 CI 路由/添加请求）？

尝试将以下操作添加到 Add 控制器，并直接导航到它`http://[base]/add/thetest`

```
public function thetest() {
echo 'Controller accessed';
die;
} 
```

如果它仍然说*找不到页面*，那不是您的代码，而是您的配置（服务器配置或 CI）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:52:27.420

而不是在您的模型中插入使用更新，例如：

```
$insert = $this->db->update('news', $data);
return $insert; 
```

而且我认为您在控制器中的这部分代码也是错误的（错误的 if 语句并且没有数据发送到模型）：

```
if($query = $this->news_model->addArticle()) {
            $this->load->view('news');
            }else {
                $this->load->view('news');
        } 
```

试试这个：

```
$data =array(
    'title' => $this->input->post('title'),
    'content' => $this->input->post('content'), 
    'author' => $this->input->post('author'),
    'username' => $this->input->post('username')
);

$query = $this->news_model->addArticle($data);
if($query) 
{
   // query ok
   $this->load->view('news');
}
else {
   // no query
   $this->load->view('news');
} 
```

# javascript - 与网络界面相比，Google 搜索 API 有时会返回第一个结果，有时会返回第二个结果

> ID：12267479
> 
> 赞同：6
> 
> 时间：2012-09-04T16:13:11.023
> 
> 标签：javascript, api, search

首先，这不是重复的：[为什么通过 google api 进行的 google 搜索会返回不同的结果到网页中的搜索？](https://stackoverflow.com/questions/654546/why-does-a-google-search-through-the-google-api-return-different-results-to-a-se)也没有我能够找到的任何其他“谷歌搜索 API 返回意外结果”问题。

我正在编写一个使用 Google websearch API 的小型 javascript 程序。我正在为我的购买地点页面创建自定义链接，这些链接应该将用户引导到我们经销商网站上的正确页面，以购买他们在单击“购买地点”时最后一次查看的产品。我使用**document.referrer**的 javascript 方法，然后解析 URL 以确定用户上次访问我网站上的哪个页面。

然后我创建一个适当的查询字符串，将站点限制为特定经销商，告诉谷歌只返回一个结果然后运行查询。然后，我使用 URL 将该特定 div href 中的 HTML 重写为第一个（也是唯一一个）搜索结果。我本质上是在模仿谷歌曾经拥有的“我感觉很幸运”按钮的功能，但是以这样一种方式构建查询，以便我得到我正在寻找的结果。

好的，既然您知道我在做什么以及为什么要这样做，那么事情就变得奇怪了：我得到的大多数结果都很完美。他们返回第一个搜索结果。其中一些（并且总是相同的）返回第二个搜索结果。

这是您可以自己复制并粘贴到[Code Playground](http://code.google.com/apis/ajax/playground/ "代码游乐场")中的代码，以查看我所指的问题：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>

    <title>Google AJAX Search API Sample</title>
    <script src="http://www.google.com/jsapi?key=AIzaSyA5m1Nc8ws2BbmPRwKu5gFradvD_hgq6G0" type="text/javascript"></script>
    <script type="text/javascript">
google.load('search', '1');   
var SearchVariables = [
      ["alto","altomusic.com","http://www.earthworksaudio.com/wp-content/uploads/2012/03/altomusic-button.png","wp-image-6343"],
      ["acme","www.acmelectronics.com","http://www.earthworksaudio.com/wp-content/uploads/2012/03/acme-button.png","wp-image-6344"],
      ["bhphoto","www.bhphotovideo.com","http://www.earthworksaudio.com/wp-content/uploads/2012/03/bh-button3.png","wp-image-6345"],
      ["frontend","www.frontendaudio.com","http://www.earthworksaudio.com/wp-content/uploads/2012/03/frontend-button.png","wp-image-6346"],
      ["fullcompass","www.fullcompass.com","http://www.earthworksaudio.com/wp-content/uploads/2012/03/fullcompass-button3.png","wp-image-6347"],
      ["performance","www.performanceaudio.com","http://www.earthworksaudio.com/wp-content/uploads/2012/03/performance-audio-button.png","wp-image-6348"],
      ["proaudio","www.proaudiosuperstore.com","http://www.earthworksaudio.com/wp-content/uploads/2012/03/ProAudioSolutions-button.png","wp-image-6349"],
      ["rmc","www.rmcaudiodirect.com","http://www.earthworksaudio.com/wp-content/uploads/2012/03/rmc-button1.png","wp-image-6350"],
      ["sweetwater","www.sweetwater.com","http://www.earthworksaudio.com/wp-content/uploads/2012/03/sweetwater-button3.png","wp-image-6351"],
      ["vintageking","www.vintageking.com","http://www.earthworksaudio.com/wp-content/uploads/2012/03/vintageking-button3.png","wp-image-6352"]
    ];  
var Search = new Array(SearchVariables.length);
function searchComplete() {

  for(var i = 0; i < Search.length; i++){
    if (Search[i].results && Search[i].results.length > 0) {
       var contentDiv = document.getElementById(Search[i].ed[0]);
       var curURL = Search[i].results[0].unescapedUrl;
       var newImage = ' <a href="'+curURL+'"><img class="alignleft size-full '+Search[i].ed[2]+'" title="'+Search[i].ed[0]+'" src="'+Search[i].ed[1]+'" alt=" " width="235" height="94" /></a>';
       contentDiv.innerHTML = newImage;
    }
  }     
} 
function parseURLString(inString)
{
    var OutString = 'earthworks';
        inString = inString.replace(/-/g,' ');
        inString = inString.replace('zdt','');
    var MicVsPre=['preamps','microphones'];
    var idx = [];
        for(var j=0;j<MicVsPre.length;j++)
        {
          if(inString.search(MicVsPre[j])>=0)
          {
            OutString = OutString+' '+MicVsPre[j];
                  for(var i=inString.length;i>0;i--)
                  {
                    if(inString[i]=='/')
                    {
                      idx.push(i);
                    }
                  }
            OutString = OutString+' '+inString.substring(idx[0],idx[1]+1);
          }
        }
return OutString;
}

function OnLoad() {
      var String_To_Parse = 'http://www.earthworksaudio.com/microphones/qtc-series-2/qtc40/';     
      var query = parseURLString(String_To_Parse);

       var testloc = document.getElementById('vardiv');
       testloc.innerHTML = query;

      for(var i = 0; i < SearchVariables.length; i++)
      {
        Search[i] = new google.search.WebSearch();
        Search[i].setNoHtmlGeneration();
        Search[i].setResultSetSize(1);
        Search[i].setUserDefinedLabel([SearchVariables[i][0],SearchVariables[i][2],SearchVariables[i][3]]);
        Search[i].setSiteRestriction(SearchVariables[i][1]);
        Search[i].setSearchCompleteCallback(this, searchComplete,null);
        Search[i].execute(query);
      }
}
google.setOnLoadCallback(OnLoad);

    </script>
  </head>
  <body style="font-family: Arial;border: 0 none;">
    <div id="vardiv">Testing</div>
    <div id='acme'></div>
    <div id='alto'></div>
    <div id='bhphoto'></div>
    <div id='fullcompass'></div>
    <div id='frontend'></div>
    <div id='performance'></div>
    <div id='proaudio'></div>
    <div id='rmc'></div>
    <div id='sweetwater'></div>
    <div id='vintageking'></div>
  </body>
</html>​ 
```

我已经包含了一个示例产品页面 URL，而不是实际使用**document.referrer**方法（因为显然你现在没有浏览我的网站）来演示发生了什么。我还在顶部创建了一个额外的 div 标签，它显示了正在执行的确切搜索。

如果您自己进行完全相同的搜索，请注意列表中的最后一个（复古王，或倒数第四个专业音频解决方案）如何拉下**第二个搜索结果的 URL。**然而，他们中的大多数正确地拉下了**FIRST**搜索结果（例如：sweetwater、b&h、full compass）。我在这些特定网站上进行的几乎每一次搜索都会发生这种情况。我知道这与我的浏览器以及我存储的设置无关，因为我已经在其他计算机上，在不同的浏览器等上尝试过这种隐身模式。有人知道这里发生了什么吗？为什么我总是不能从基于 Web 的 Google 搜索中获得第一个搜索结果作为返回的 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:04:05.127

我在做类似的事情时遇到了这个问题，根据我当时发现的（iirc）返回的结果取决于您传递给谷歌的语言参数和浏览器 ID 字符串。

请注意，这可能已经改变，这是一个很长的镜头，但值得检查。

编辑：

我刚刚看到你正在寻找某种答案的证据，所以你去： http: [//www.windmeadow.com/node/36](http://www.windmeadow.com/node/36) <--谷歌根据浏览器给出不同的搜索结果。 [http://productforums.google.com/forum/#!topic/webmasters/7K02-AUCTVM](http://productforums.google.com/forum/#!topic/webmasters/7K02-AUCTVM) <-- 不同语言的不同搜索结果

编辑2：

这是 Google AJAX API 中的一个已知错误：[http ://code.google.com/p/google-ajax-apis/issues/detail?id=43](http://code.google.com/p/google-ajax-apis/issues/detail?id=43)

# mongodb - MongoDb：有没有更好的方法将生产环境数据复制到测试环境

> ID：12267483
> 
> 赞同：0
> 
> 时间：2012-09-04T16:13:19.937
> 
> 标签：mongodb

现在我有两个分片：shard3(16g)，shard4(15g) 和三台机器：像这样部署：10.10.10.5:(mongoS,configureserver,shard3 primary,shard4 primary) 10.10.10.6:(mongoS,configureserver,shard3 secondary) ,shard4 secondary) 10.10.10.7:(mongoS,configureserver,shard3 arbitor,shard4 arbitor)

现在我想做一个性能测试（关于添加新分片），我知道我不能使用生产环境进行测试，因为这会影响生产性能，所以我想将所有数据复制到我测试的三台机器上： 20.20.20.5,20.20.20.6 和 20.20.20.7，我读了手册，但找不到更好的方法，所以亲爱的，请给我一个建议。

顺便问两个小问题：第一：和我的生产环境一样，如何将仲裁节点改为二级，即我想将10.10.10.7改为二级分片，因为我想10.7和10.6分担读取压力。第二：如何指示Mongos读取主节点但辅助节点，您知道mongoS在主节点上写入而在辅助节点上读取，但我想在主节点上读写以立即获取最新数据。谢谢提前杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:37:50.110

您应该查看以下文档：[http](http://www.mongodb.org/display/DOCS/Import+Export+Tools) ://www.mongodb.org/display/DOCS/Import+Export+Tools 。你可以使用 mongoexport 和 mongoimport 来做你想做的事情。或者你也可以使用 mongodump 和 mongorestore。这将允许您将数据备份和恢复到测试环境中。

第一个问题：您不能将仲裁器“转换”为辅助器。唯一真正做到这一点的方法是将一个新节点添加到副本集中，然后取下仲裁器，然后将其从副本集中删除。您可以在现有副本集节点上使用 rs.add() 将新的 mongod 添加到副本集。您按此顺序执行此操作以避免停机。如果您不介意停机时间，那么订单并不特别重要。可以在此处找到有关将节点添加到副本集的文档：[http ://www.mongodb.org/display/DOCS/Replica+Sets+-+Basics](http://www.mongodb.org/display/DOCS/Replica+Sets+-+Basics)

此外，如果您正在执行 readScaling 并使用 SlaveOK()，请务必记住，如果从主服务器到任一辅助服务器存在复制滞后，您就有可能读取过时的数据。如果这对您的应用程序来说是可以接受的，但重要的是您要意识到，如果您同时查询副本集中的两个节点，您可能会根据复制滞后为同一查询读取两个不同的值。

第二个问题：如果您只想从主服务器读取/写入，那么您不应该使用 SlaveOK 运行。SlaveOK 关闭是默认设置，但如果您已经打开它，只需再次调用它并传入 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:28:39.800

只要你有一个主要的和你的大部分副本集，副本集将是可写的。所以很自然，只要主节点没有过载并且您没有关闭 4 个节点中的 2 个，您就可以写入主节点。它只会复制到大多数启动的节点。

一般来说，我们尽量不鼓励偶数副本集，所以我会让仲裁器离线并坚持使用你的 3 个副本集。这是因为你真的没有从拥有仲裁者中赢得任何东西。如果 2 个节点以任何一种方式失败，您都没有多数，并且副本集将变为只读。如果一个节点出现故障，您仍然可以进行写入。仲裁器对偶数集没有任何帮助。

当您尝试执行这些仅转到一个辅助节点的查询时，新的辅助节点是否在数据方面都赶上了？如果它处于“恢复”状态，那么读取可能还没有到达它，因为它还没有复制所有数据。除此之外，还有一些方法可以指定阅读偏好。

关于所有不同的阅读偏好以及如何使用它们的文档可以在这里找到：http: [//docs.mongodb.org/manual/applications/replication/#read-preference](http://docs.mongodb.org/manual/applications/replication/#read-preference)

# linux - 使用 Find/Grep 在一天中的特定时间之间搜索文件

> ID：12267496
> 
> 赞同：2
> 
> 时间：2012-09-04T16:14:09.797
> 
> 标签：linux, unix, find, grep, cygwin

我可以使用以下命令搜索过去 10 天的日志文件：

```
find . -type f -mtime -10 |xargs grep -i -n 'exception' 2> /dev/null 
```

但我想进一步限制搜索文件中在*上午 6 点*到*下午 6 点*之间记录的行。我想知道如果这些行看起来像这样，我如何修改 grep 命令来过滤这些：

```
2012-09-04 03:50:41,658 [MainLogger: ] EXCEPTION  AppLog - some exception 1
2012-09-04 10:01:32,902 [MainLogger: ] EXCEPTION  AppLog - some exception 2
2012-09-04 15:39:51,901 [MainLogger: ] EXCEPTION  AppLog - some exception 3
2012-09-04 18:12:51,901 [MainLogger: ] EXCEPTION  AppLog - some exception 4 
```

在上述情况下，应返回第 2 行和第 3 行，因为它们介于*6am*和*6pm*之间。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:23:05.983

一种简单的**丑陋**方法可能是添加很多 grep，如下所示：

```
find . -type f -mtime -10 |xargs grep -i -n 'exception' | grep -v " 00" | grep -v " 01" | ... | grep -v " 18" | grep -v " 19" ... 2> /dev/null 
```

或更简洁地说：

```
find . -type f -mtime -10 |xargs grep -i -n 'exception' | grep -v -e " \(0[012345]\|18\|19\|2[0123]\)" 2> /dev/null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:22:37.907

你可以像这样破解它：

```
grep ' 0[6789]:\| 1[01234567]\| 18:00:00,000' 
```

但如果您需要更多时间处理，我建议切换到更强大的语言（例如 Perl 和[DateTime](http://p3rl.org/DateTime)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T17:55:28.943

在具有适当日期时间库的任何语言中，将所有日期转换为规范表示会使问题变得微不足道。默认的规范化是转换为自 1970 年 1 月 1 日午夜以来的秒数。然后只需查看输入行的规范数字是否大于开始时间且小于结束时间。

# php - PHP mySQL 准备语句错误

> ID：12267498
> 
> 赞同：1
> 
> 时间：2012-09-04T16:14:13.283
> 
> 标签：php, mysql, pdo, mysqli

> **可能重复：**
> [在非对象上调用成员函数 bind_param()](https://stackoverflow.com/questions/4488035/call-to-a-member-function-bind-param-on-a-non-object)

我收到以下错误：

```
Call to a member function bind_param() on a non-object 
```

这是准备好的声明：

```
include('/path/to/connection/variable.php'); 
```

该文件已被验证可以正常工作，它只是创建了一个 mysqli 类的实例，例如：

```
$mysqli = new mysqli("localhost", "user", "password", "db"); 
```

所以我知道这不是问题...

```
$stmt = $mysqli->prepare("INSERT INTO `users` VALUES (?,?,?,?,?,?,?)");
$stmt->bind_param("sssssss", $firstname, $lastname, $email, $subscribed, $signup_date, $unsubscribe_date, $signup_source);
$stmt->execute();
$stmt->close();
$mysqli->close(); 
```

变量类型如下：

```
$firstname = string
$lastname = string
$email = string
$subscribed = char (Y or N)
$signup_date = DATE - date('Y-m-d')
$unsubscribe_date = DATE - 0000-00-00 Entered Initially
$signup_source = string 
```

我试图找到所有常见的嫌疑人，检查连接，基本上我写了一个单独的 SELECT 语句并且它有效。“USERS”是一个有效的表。连接的权限是 root，所以这不是问题。我已经在“s”和“d”之间切换了日期的类型，甚至用虚拟变量尝试了一切——没有区别。

我希望这很简单——因为过去一个小时我一直在绞尽脑汁，我看不出上面的陈述有什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T16:16:58.327

这通常意味着您的`->prepare()`调用失败，并返回一个布尔值 FALSE 而不是语句对象。检查：

```
$stmt = $mysqli->prepare("INSERT INTO `users` VALUES (?,?,?,?,?,?,?)") or die($mysqli::error); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:23:19.973

针对您的问题，您可以执行以下操作：

```
 INSERT INTO tableName (column1, column2, column3,...) 
 VALUES (value1, value2, value3,...) 
```

# azure - 设置 Azure 以在自定义程序、任务和定价中同步联系人

> ID：12267506
> 
> 赞同：0
> 
> 时间：2012-09-04T16:14:48.000
> 
> 标签：azure

我们有自己的应用程序，将联系人存储在 SQL 数据库中。在云中启动和运行都涉及什么，以便应用程序的每个用户都可以拥有自己的私人联系人列表，这些联系人将与他的计算机和他的手机同步？

我试图了解 Azure 在这方面的成本，但我发现比具体场景更抽象的话题。

假设有 1,000 个用户，每个用户在他的通讯录中保存了 1,000 个联系人。没有用户可以看到任何其他用户设置的联系人。每当用户更改其联系信息时，都应进行同步。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:36:14.883

虽然 Windows Azure 云平台不打算与 Dropbox 等面向消费者的服务直接竞争，但它肯定是作为构建应用程序的平台而设计的。因此，您的特定用例对 Windows Azure 来说是一个很好的用例：创建一项服务以保持联系人同步、可跨多个用户扩展、可扩展其拥有的数据量等等。

使您的解决方案对多租户友好（根据@BrentDaCodeMonkey 的评论）是成本效益的关键。您的数据需求是 1K 用户 x 1K 联系人/用户 = 1M 联系人。如果每个联系人大约 1KB，那么我们谈论的是大约 1GB 的存储空间。

查看[定价计算器](http://www.windowsazure.com/pricing)，1GB 的 Windows Azure SQL 数据库实例的静态存储成本为每月 9.99 美元（如果增加到 2GB，则为 13.99 美元等 - 请参阅计算器以了解附加预测和当前定价） .

然后你有数据传输（带宽）费用。尽管由于定价计算器显示“每个计费月的前 5 GB 出站数据传输也是免费的”，但假设同步中的智能程度适中，您可能不会对当前用户产生任何费用。

这不包括您的申请费用。你的应用程序是什么，它是如何运行的，等等？假设有一个客户端组件，（通常）不能信任该组件具有数据库连接。因此，这将需要运行一个服务器端组件，该组件可以充当数据库的看门人。（通常，您也不要将数据库暴露给所有 IP 地址——这是通过服务器端组件传输数据的另一个动机。）该组件的运行也需要花钱。成本也在[定价计算器](http://www.windowsazure.com/pricing)中- 但如果您选择使用可以免费的 Windows Azure 网站。一个很好的方法可能是漂亮的 ASP.NET [Web API](http://www.asp.net/web-api)最近发布的堆栈。使用 Web API，您可以实现一个很好的 REST API，您的客户端应用程序可以安全地访问它。Windows Azure 网站可以托管 Web API 端点。也检查“保留实例”功能。

我会从 Windows Azure 网站开始，但随着我的服务变得越来越复杂/复杂，请查看 Windows Azure 云服务（作为构建服务器端组件的更先进的方法）。

# java - 在 Windows 的命令行上连接到套接字并发送数据

> ID：12267513
> 
> 赞同：1
> 
> 时间：2012-09-04T16:15:24.767
> 
> 标签：java, windows, flash, sockets, tcp

我想在命令行上连接到许多不同的套接字/webservices，并在标准输出/输入中来回发送数据。

到目前为止，我一直在使用各种不同的语言和方法来执行此操作：C# 中的 System.Net.Sockets、Flash 中的 flash.net.sockets 和 Java 中的 java.net.sockets，具体取决于套接字使用的协议和编写套接字的公司给出的客户端示例中使用的语言。我已经受够了从一种语言转移到另一种语言来做到这一点（在每种情况下都使用提供的客户端套接字示例），并且可能会将所有客户端都转移到 java.util 。

同时，我想要一种在 Windows 命令行上连接到套接字的方法，查看标准输出中返回的内容，在命令行（或非常非常简单的 GUI）上将文本发送到套接字并查看返回的内容背部。我不需要任何额外的功能，比如定期 ping 来保持套接字处于活动状态或其他任何东西。

我可以使用哪些工具在 Windows 上执行此操作？我已经尝试打开到套接字的 telnet 会话，即 push.domain.com 1234，并且还尝试使用 Putty 进行连接，但无济于事。

我正在尝试模拟 Flash 客户端连接到此套接字并发送和接收数据的方式：

```
theSocket.addEventListener(Event.CONNECT, connectHandler);  
theSocket.connect(theHost, thePort);
* * *
private function connectHandler(event:Event) : void
{ 
     if (theSocket.connected)
        {
            bytes = new ByteArray();
            bytes.writeByte(35);
            bytes.writeByte(1);
            bytes.writeByte(23);
            bytes.writeByte(7);
            bytes.writeUTFBytes(theTopic);
            bytes.writeByte(0);
            theSocket.writeBytes(bytes);
            theSocket.flush();
            theSocket.addEventListener(ProgressEvent.SOCKET_DATA, handshakeHandler);
             * * * 
private function handshakeHandler(event:ProgressEvent) : void
{
        var zero:int = 0;
        theSocket.removeEventListener(ProgressEvent.SOCKET_DATA, handshakeHandler);
        theConnectionTimer.stop();
        var bytes:* = new ByteArray();
        var counter:int = 0;
        theSocket.readUTFBytes(theSocket.bytesAvailable));

        var a:* = theSocket.readByte(); 
        var b:* = theSocket.readByte(); // the second byte should be 1????      
        var response:* = theSocket.readByte(); // this is the reponse identifier. . . ???
        theMessageSize = theSocket.readByte(); // is this byte the size??????

        switch(response)
        {
             case 100:
            {
                while ((zero = theSocket.readByte()) != 0)
                {
                   var temp = counter++;
                       bytes[temp] = _loc_5;
                };
                theClientID = bytes.toString();
                trace("The client ID is: " + theClientID); 
```

如何使用 Hercules（或任何其他工具）将字节值 35、1、23、7 和 0 以及变量 Topic 的值发送到套接字。理想情况下，我想与 Hercules 建立联系，发送这些字节和主题，然后返回包含代码中的 clientID 的内容。虽然，我不知道 hercules 是否会为我将响应中的字节呈现为文本。

我将不胜感激任何关于此的指示。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:37:11.893

我在[Hercules](http://www.hw-group.com/products/hercules/index_en.html)中思考并搜索我发现在[stackoverflow](https://stackoverflow.com/questions/515328/good-tool-for-testing-socket-connections)中已经有答案的网站。我认为它可以满足您的需要，甚至更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:44:08.770

嗯，我不确定我是否完全理解你的要求，但我不明白为什么 telnet 在这种情况下不能帮助你。

# jquery - 选择选项时添加新的下拉列表jQuery

> ID：12267514
> 
> 赞同：0
> 
> 时间：2012-09-04T16:15:30.823
> 
> 标签：jquery, html, select, dynamic, drop-down-menu

似乎没有多少人知道这个问题的答案：我稍微改写了一下，以便更容易理解我想要得到什么。请帮帮我。

```
 <select id="1">
  <option val="1"></option>
  <option val="2"></option>
 </select> 
```

when option with value = 2 is selected i want a new drop down box to appear like:

```
 <select id="2">
  <option val="1"></option>
  <option val="2"></option>
 </select> 
```

正如您所看到的， id 2 具有相同的选项，但每次用户选择不同的选项时，我只想要一个新的下拉框。我的 jquery 和 html 代码如下：

HTML：

```
<div id="campaigns">
    <div id="campaign_1">
        <label for="ddcampaign" style="margin-right: 10px;">Campaign:</label>     
        <?=showCampaignDropdown('campaign', false, false, true, false, 'All Campaigns')?>
    </div>
</div> 
```

showCampaignDropdown 所做的只是创建一个带有一堆选项的选择。

我的 Jquery 看起来像这样：

```
 $(function() {
    campaigncount = 1;
    $(document).on('change', '#campaign_' + campaigncount + ' select',  function() {
        var firstcampaign = parseInt($('#campaign_'+campaigncount+' select option:selected').val());
        //alert(campaigncount);
        campaigncount++;    
        //if value is > 0 add more campaigns to search
        if (firstcampaign > 0) {
            $(this).attr('disabled', true);
            $('#campaigns').append('<div id="campaign_'+campaigncount+'"><?=showCampaignDropdown('campaign', false, false, true, false, 'All Campaigns')?></div>');
        } else {
            $('#campaign_' + (campaigncount-1) + ' select').attr('disabled', false);
        }
    });
}); 
```

it works on first select, so when original campaign_1 select is selected adds new drop down, and disables the first, when second selected nothing happens. 请帮忙。下拉框必须相同，我不想修改他们的 ID。因为它是通过 PHP 生成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:06:46.617

您仅将更改事件附加到 #campaign_1 div。您应该这样做： `on('change', '#campaigns select' ...`现在位于活动 div 中的所有选择都将运行该处理程序。

# c# - Linq To Xml - ReplaceNodes 更新原始查询中找到的元素数量

> ID：12267515
> 
> 赞同：1
> 
> 时间：2012-09-04T16:15:30.913
> 
> 标签：c#, linq, linq-to-xml

我有一个 linq to xml 查询，它返回 2 个节点。我正在尝试遍历这些节点并替换它们的内容。但是，添加到 XDocument 的内容包含符合我的查询条件的节点。

```
 protected internal virtual void AddLinkDocument(XDocument content, TaskRequest request)
    {
        var links = content.Descendants("some.link").Where(tag => tag.Attribute("document-href") != null);

        foreach (XElement link in links) //first time through there are 2 links found
        {
             //do some stuff

            link.ReplaceNodes(inlineContent); // after content is added, "links" now in foreach now has many new links found
        }
    } 
```

为什么每次通过foreach动态更新集合“链接”？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:23:45.377

似乎这里有几个因素在起作用：

1.  按照您定义的方式`links`，每次迭代都会重新查询`foreach`.
2.  重新查询将搜索与查询匹配的*所有*后代（不仅仅是直接子代）。

我的猜测是迭代块添加了一些与查询匹配的新元素（即，包含“document-href”属性）。

所以，我建议尝试：

*   `ToArray()`在定义的末尾添加 a `links`；
*   或使用`Elements`而不是`Descendants`仅查询`content`.

# c# - 为没有描述 resx 的资源生成警告

> ID：12267516
> 
> 赞同：0
> 
> 时间：2012-09-04T16:15:38.463
> 
> 标签：c#, resharper, resx

我想知道有没有办法对 resx 文件中没有描述的资源进行编译器/resharper 警告？为了规范资源文档。

已编辑：我想在 IDE 中查看错误。

谢谢你！！！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-04T16:22:16.733

您可以编写自己的 msbuild[任务](http://msdn.microsoft.com/en-us/library/7z253716)，它将检查文件是否存在。

# jquery - 检索并显示（下载）有关 Ajax 成功事件的 csv 文件（函数返回的文件）

> ID：12267517
> 
> 赞同：0
> 
> 时间：2012-09-04T16:15:38.920
> 
> 标签：jquery, ajax, asp.net-mvc-3, file, csv

我正在尝试获取一个 .csv 文件，其中包含一些由 jlst 对象过滤的数据（其中包含一些下拉框的选定 ID）。这是ajax调用：

```
 $('#moduleCSVReport').click(function () {

        $('#progress').show();
        $.ajax({
            url: '/Reports/GetPageAccessLevelsCSV?obj=' + jlst,
            dataType: "json",
            type: "GET",
            success: function (data) {
                $('#progress').hide();
            }
        });
    }); 
```

这是功能：

```
 public ActionResult GetPageAccessLevelsCSV(string obj)
    {
        JavaScriptSerializer jss = new JavaScriptSerializer();
        ReportsSelectedItems cParams = jss.Deserialize<ReportsSelectedItems>(obj);

        var locationIdFilter = (cParams.LocationId != 0) ? cParams.LocationId : 0;
        var divisionIdFilter = (cParams.DivisionId != 0) ? cParams.DivisionId : 0;

        IList<UserProfile> userProfiles = new List<UserProfile>();
        userProfiles = Session.Query<UserProfile>().Where(n => n.Employee != null && ((n.Employee.Division.Id == cParams.DivisionId || cParams.DivisionId == 0) && (n.Employee.Location.Id == cParams.LocationId || cParams.LocationId == 0))).OrderBy(n => n.Employee.Name).ToList();

        MemoryStream output = new MemoryStream();
        StreamWriter writer = new StreamWriter(output, Encoding.UTF8);

        writer.Write("Name,");
        writer.Write("Team");

        foreach(UserProfile user in userProfiles)
        {
            writer.Write(user.Employee.Name);
            writer.Write(",");
            writer.Write(HasAccessToModule((int)ModuleEnum.Team, user.Id).ToString());
            writer.WriteLine();
        }

        writer.Flush();
        output.Position = 0;

        return File(output, "application/x-ms-excel", "test.csv");
    } 
```

我正在跟踪断点，文件似乎已成功生成。只是我在ajax调用中接收到文件后不知道如何显示。我认为必须有一种方法来处理文件（可能在成功事件中）。如果是这样，我该怎么做？谢谢。

# javascript - JavaScript：如何从复选框中删除“被按下”状态？

> ID：12267518
> 
> 赞同：6
> 
> 时间：2012-09-04T16:15:40.160
> 
> 标签：javascript, jquery, javascript-events

我正在覆盖`mousedown`复选框上的事件，以通过拖动其他复选框来启用选择。这涉及必须`event.preventDefault()`禁用默认文本选择行为。

一切正常，除了一个烦人的抽动，即复选框保持在“被按下”状态，直到我放开鼠标（如果不清楚，请尝试在复选框上按住鼠标以了解我的意思）。

如何将复选框的状态恢复为完全关闭或完全打开（不是“被按下”）？

编辑：这是我的代码的[jsfiddle](http://jsfiddle.net/qFDmz/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:44:55.950

您可以做的是通过[:active 伪类](https://developer.mozilla.org/en-US/docs/CSS/%3aactive)覆盖“复选框被按下”状态的一些 CSS 。

```
​input[type=checkbox]:active {
    outline: none;
    border: none;
    /* etc...*/
}​​​​​​ 
```

然而，这种方法只会让您为这种状态定义自己的规则，而不是告诉浏览器在其未触及状态下呈现默认系统复选框。这当然不是万无一失的，但在您的情况下可能会令人满意。

为了最大限度地控制外观，您需要实现自定义复选框组件或使用众多 UI 小部件库之一（如 Dojo、ExtJS、UniformJS 等）。这些自定义小部件基本上隐藏了真实的`<input type="checkbox" />`内容，为您提供了一个“假”元素进行交互（但它模仿了本机 UI 控件功能，只是它是完全可主题化的）。

# jquery - 使用 jquery 或 css 选择器更改 webkit css

> ID：12267521
> 
> 赞同：7
> 
> 时间：2012-09-04T16:15:47.700
> 
> 标签：jquery, css, webkit, css-selectors, pseudo-element

我可以使用 jquery 来控制[自定义 webkit 滚动条](http://css-tricks.com/custom-scrollbars-in-webkit/)的外观吗？我很好奇，因为我想更改`::-webkit-scrollbar-track-piece`鼠标悬停时的背景颜色`::-webkit-scrollbar-thumb`。也许有办法用 CSS 做到这一点。我对任何一种解决方案都持开放态度！谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T16:52:54.337

我认为没有**jQuery**方法可以做到这一点，但在原生 JavaScript 中，您可以直接在样式表对象上操作规则：

```
document.styleSheets[2].addRule("::-webkit-scrollbar", "width: 300px;"); 
```

这很好用。您还可以删除规则和更改规则： [http ://www.javascriptkit.com/domref/stylesheet.shtml](http://www.javascriptkit.com/domref/stylesheet.shtml)

您可以给您的`<style>`块 a`title`以便在`styleSheets`数组中找到它。就像是：

```
for(var i = 0; i < document.styleSheets.length; i++) {
    var sheet = document.styleSheets[i];
    if(sheet.title == 'scrollbar') {
        for(var j = 0; j < sheet.rules.length; j++) {
            var rule = sheet.rules[j];
            if(rule.cssText.match("webkit-scrollbar")) {
                rule.style.backgroundColor="yellow";
            }
        }
    }
} ​ 
```

[http://jsfiddle.net/nottrobin/hSEzY/1/](http://jsfiddle.net/nottrobin/hSEzY/1/)

# build - 如何在 Albacore 中针对多个 .NET 版本运行 msbuild 任务？

> ID：12267527
> 
> 赞同：1
> 
> 时间：2012-09-04T16:16:26.960
> 
> 标签：build, rake, albacore

我正在考虑使用 rake 和 albacore 来自动构建我创建的库。我想向使用 .NET 2.0、.NET 3.5、.NET 4.0 和 .NET 4.5 的用户提供该库。代码没有什么特别之处，它应该可以很好地移植。

我真正想要的是一个 rake 构建脚本，它将为每个平台构建程序集。研究看起来像是设置 ToolsVersion 的问题，但我无法让它发挥作用。

是否有任何最佳实践，如何做到这一点的例子？还是我需要不同的构建工具？

**更新：** 我只需在 shell 中提供命令行参数就可以让它工作，但仍然没有让它与 Albacore 一起工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T21:08:30.623

Albacore msbuild 任务和相关配置对象使用一些[巫术](https://github.com/Albacore/albacore/blob/dev/lib/albacore/config/msbuildconfig.rb#L25)来自动查找和设置默认的 MSBuild exe 版本。它基于通用命令行任务，所以它有一个`command`参数。

```
self.command = File.join(get_net_version(netversion), "MSBuild.exe") 
```

您可以手动设置命令选项并定义许多任务

```
task :build_all_versions => [ :build_net20, :build_net35, :build_net40 ]

msbuild :build_net20 do |msb|
  msb.command = 'C:/Windows/Microsoft.NET/Framework/v2.0.50727/msbuild.exe'
end

msbuild :build_net35 do |msb|
  msb.command = 'C:/Windows/Microsoft.NET/Framework/v3.5/msbuild.exe'
end

msbuild :build_net40 do |msb|
  msb.command = 'C:/Windows/Microsoft.NET/Framework/v4.0.30319/msbuild.exe'
end 
```

或者，您可以使用[内部 Albacore 模块/方法](https://github.com/Albacore/albacore/blob/dev/lib/albacore/config/netversion.rb)来获取`msbuild.exe`路径。它定义了一个私有模块方法，所以你必须这样`include`做。

```
include Configuration::NetVersion

msbuild :build_net20 do |msb|
  msb.command = File.join(get_net_version :net20, 'msbuild.exe')
  ...
end 
```

而且，此时，我将根据 .NET 版本符号数组动态定义任务。

```
net_versions = [ :net20, :net35, :net40 ]
build_tasks  = net_versions.map { |ver| "build_#{ver}" }

task :build_all => build_tasks

net_versions.zip(build_tasks) do |ver, task|
    msbuild task do |msb|
      msb.command = File.join(get_net_version ver, 'msbuild.exe')
      # all the other stuff
    end
end 
```

* * *

没有 .NET 3.0 工具，他们[显然](https://github.com/Albacore/albacore/issues/20)使用了 .NET 2.0 工具。

# php - 如果您切换网络，浏览器会话会继续吗？

> ID：12267530
> 
> 赞同：3
> 
> 时间：2012-09-04T16:16:28.530
> 
> 标签：php, flash, session, session-cookies, session-timeout

如果我有一个需要用户登录的应用程序。如果我在家中通过一个网络登录，然后去其他地方，比如街上的图书馆和切换网络，会话会继续吗？

在我的问题中，这是关于嵌入在请求 PHP 页面进行登录的 HTML 页面中的 Flash SWF。

此外，了解这种行为与 HTML 请求的相同之处也会很有帮助。我的意思是如果 Flash 使用浏览器发送请求，那么 SWF 应用程序和 HTML 应用程序的结果是否相同，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:25:17.197

大多数使用 Flash 的 Web 请求都是通过浏览器发出的，因此在发送 cookie 等方面遵循相同的规则（例外是旧的文件上传器，您必须将其硬编码到 URL 中）。

如果您的会话是通过标准 PHP 会话模块创建的，并且您启用了 cookie（即`session.use_cookies`ini 设置），浏览器将继续发送会话 cookie，直到您关闭它。

如果您实施了 IP 地址检查（您不应该这样做，但这是个人的事情），会话可能会根据您切换网络时很可能发生的 IP 更改而失效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:26:28.090

我认为所提出的问题过于简单化了。

浏览器唯一知道的“会话”是[会话 cookie](http://www.allaboutcookies.org/cookies/session-cookies-used-for.html)的概念。这是针对域存储的信息片段，当您**关闭浏览器**时，该域将失效。

PHP 会话是在会话 cookie 之上实现的，因此在您关闭浏览器之前，您处于同一个会话中，[即使您的 IP 地址发生了](https://stackoverflow.com/questions/2296571/php-session-cookies-fail-with-users-changing-ip) [变化](https://stackoverflow.com/questions/328/php-session-security)。

我不知道 Flash 是否有自己的会话概念。如果不是，那么您的会话是否过期取决于 Flash 应用程序的编码方式。

我希望这可以澄清事情。

# javascript - Visual Studio 2012：更改 javascript 注释样式

> ID：12267532
> 
> 赞同：4
> 
> 时间：2012-09-04T16:16:48.373
> 
> 标签：javascript, comments, visual-studio-2012, code-formatting, spaces

当我在 Visual Studio 中使用快捷方式或工具栏按钮注释掉 javascript 文件中的一行时，注释文本之前没有空格。

```
//the way comments are currently formatted 
```

我想在评论文本之前自动添加一个空格。

```
// the way I want it 
```

如何更改默认评论格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T16:37:16.390

我不认为你可以开箱即用地做到这一点。但是您显然可以为此创建一个视觉工作室扩展

# objective-c - 音频播放不工作 (AudioToolbox/AudioServices) - iPad 3

> ID：12267538
> 
> 赞同：2
> 
> 时间：2012-09-04T16:17:10.320
> 
> 标签：objective-c, audiotoolbox, ipad-3

我有一个简短的方法，它使用 AudioToolbox/AudioServices 库播放音频通知（为简洁起见，我删除了大部分功能代码）：

```
- (IBAction)thatWasEasy:(id)sender {

    NSBundle *mainBundle = [NSBundle mainBundle];
    NSString *filePath = [mainBundle pathForResource:@"easy" ofType:@"mp3"];
    NSURL *aFileURL = [NSURL fileURLWithPath:filePath isDirectory:NO];

    SystemSoundID soundID;
    AudioServicesCreateSystemSoundID((__bridge_retained CFURLRef)aFileURL, &soundID) ;
    AudioServicesPlaySystemSound(soundID);     
} 
```

音频在模拟器以及 iPad 1 和 iPad 2 设备上正常播放，但在 iPad 3（Verizon LTE 版本）上听不到声音。我已经彻底检查了设备的声音设置，并将音频文件类型转换为 wav 和 caf，行为没有差异。

关于更深入地解决此问题的任何建议？不幸的是，我没有另一台 iPad 3 可供比较。感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:22:45.680

弄清楚了。当您转到 [设置] 并在 [常规] 选项卡下选择 [声音] 时，您可以验证您的铃声和警报音量是否高于零，并且当移动滑块时，设备将在新设置的水平上响铃。此外，您会注意到您的所有特定音调都在下面的列表中启用。这就是检查设备设置时让我失望的原因。我启动了 YouTube 和其他应用程序，并且能够很好地播放声音。

直到我和另一个人（他更了解产品）交谈后我才意识到，还有另一种方法可以使系统声音静音。通过按圆形按钮两次，屏幕底部会显示一个图标栏。如果用手指向右拖动图标，则会显示扬声器图标。由于某种原因，这碰巧被静音了……大概是在我最近执行系统还原之后。点按它即可取消静音并让您重新开始工作。不知道为什么 Apple 会这样设计它，但如果它可以在设备设置下访问，它会很有帮助（并为我节省了几个小时的修补时间）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:25:05.430

我不认为您可以使用 AudioServicesPlaySystemSound [AudioServicesPlaySystemSound 苹果文档在设备上播放 mp3 文件](http://developer.apple.com/library/ios/documentation/AudioToolbox/Reference/SystemSoundServicesReference/Reference/reference.html#//apple_ref/c/func/AudioServicesPlaySystemSound)

```
-(void)playAif:(NSString *)filename {
//  NSLog(@"play: %@", filename);

SystemSoundID soundID;
NSString *path = [[NSBundle mainBundle]
                  pathForResource:filename ofType:@"aif"];    

if (path) { // test for path, to guard against crashes

    UInt32 sessionCategory = kAudioSessionCategory_AmbientSound;    // 1

    AudioSessionSetProperty (
                             kAudioSessionProperty_AudioCategory,                        // 2
                             sizeof (sessionCategory),                                   // 3
                             &sessionCategory                                            // 4
                             );

    AudioServicesCreateSystemSoundID((CFURLRef)[NSURL fileURLWithPath:path],&soundID);
    AudioServicesPlaySystemSound (soundID);

}
} 
```

# java - Java：从第二个派生类调用基方法类

> ID：12267542
> 
> 赞同：2
> 
> 时间：2012-09-04T16:17:25.957
> 
> 标签：java, class

这就是我想要做的：

```
class A {
    void myMethod() {
        // execute A
    }
}

class B extends A {
    void myMethod() {
        // execute B
    }
}

class C extends B {
    void myMethod() {
        // execute C
        // execute myMethod in A, without touching myMethod in B OR both
    }
} 
```

我想有条件地这样做，即有时调用`myMethod`inside `B`，有时不调用，但总是调用`myMethod`inside `A`。

通过调用我得到`super.myMethod()`了，但我只想要。那可能吗？我听说过“虚拟”的东西，但我不知道如何使用它们……但是。`C``myMethod``B``myMethod``A`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T16:26:49.117

不，在 Java 中这是不可能的。类`B`覆盖并因此对进一步派生类隐藏了`myMethod`in的实现。`A`允许`C`调用`myMethod`of`A`将违反此封装。`B.myMethod`考虑一个在内部调用之前执行一些更新的情况，`A.myMethod`这对于`B`. 如果没有这些更新，`B`可能会违反合同。因此，不应该调用`A.myMethod`派生类而不调用`B.myMethod`.

通常，如果你想做这样的事情，你的设计就有缺陷。

当然，您可以执行 Dave 在评论中建议的操作：您可以更改`B.myMethod`to call的实现`A.myMethod`。这没关系，因为`B`保留了对何时调用的控制权`A.myMethod`。因此，它可以注意不违反其合同。

另一个想法是将您想要的行为从`A`另一种方法中分解出来并调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:30:34.273

如果你需要这个，`A.myMethod()`可能做的太多了。尝试将其重构为具有访问级别的几个较小的方法`protected`。

这允许您从`B`和调用这些方法`C`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T17:11:22.667

虽然我同意大多数关于可能更改设计的答案，但要直接回答，您可以将变量布尔值传递给第一种方法。B 的方法中的全部逻辑应该取决于一个条件 if 语句，该条件语句取决于布尔值。确保在 if 语句之外调用 super.myMethod()。

像这样的东西：

```
void myMethod(boolean execB) {
// execute B
super.myMethod(execB);
    if(execB)
    {
        //B logic
    }
} 
```

然而，这在实践中并不是最好的，因为只有 B 的方法使用变量，因此重构设计可能是一个好的决定。

# python - 在 NLTK 中使用 babelize_shell() 进行机器翻译

> ID：12267544
> 
> 赞同：2
> 
> 时间：2012-09-04T16:17:28.957
> 
> 标签：python, nltk

嗨，我正在使用 NLTK 学习自然语言处理。我正在尝试实现本书的 babelize_shell() 示例。我正在做的是执行 babelize_shell()，然后我输入我的字符串，然后是书中所述的德语，然后是运行。

我得到的错误是：

```
Traceback (most recent call last):
  File "<pyshell#148>", line 1, in <module>
    babelize_shell()
  File "C:\Python27\lib\site-packages\nltk\misc\babelfish.py", line 175, in babelize_shell
    for count, new_phrase in enumerate(babelize(phrase, 'english', language)):
  File "C:\Python27\lib\site-packages\nltk\misc\babelfish.py", line 126, in babelize
    phrase = translate(phrase, next, flip[next])
  File "C:\Python27\lib\site-packages\nltk\misc\babelfish.py", line 106, in translate
    if not match: raise BabelfishChangedError("Can't recognize translated string.")
BabelfishChangedError: Can't recognize translated string. 
```

这是一个示例会话：

```
>>> babelize_shell()
NLTK Babelizer: type 'help' for a list of commands.
Babel> how long before the next flight to Alice Springs?
Babel> german
Babel> run
0> how long before the next flight to Alice Springs?
1> wie lang vor dem folgenden Flug zu Alice Springs?
2> how long before the following flight to Alice jump?
3> wie lang vor dem folgenden Flug zu Alice springen Sie?
4> how long before the following flight to Alice do you jump?
5> wie lang, bevor der folgende Flug zu Alice tun, Sie springen?
6> how long, before the following flight to Alice does, do you jump?
7> wie lang bevor der folgende Flug zu Alice tut, tun Sie springen?
8> how long before the following flight to Alice does, do you jump?
9> wie lang, bevor der folgende Flug zu Alice tut, tun Sie springen?
10> how long, before the following flight does to Alice, do do you jump?
11> wie lang bevor der folgende Flug zu Alice tut, Sie tun Sprung?
12> how long before the following flight does leap to Alice, does you? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T14:06:19.830

我现在也有同样的问题。

我发现了这个： http: [//nltk.googlecode.com/svn/trunk/doc/api/nltk.misc.babelfish-module.html](http://nltk.googlecode.com/svn/trunk/doc/api/nltk.misc.babelfish-module.html)

它说： BabelfishChangedError 当 babelfish.yahoo.com 更改其 HTML 布局的某些细节时抛出，并且 babelizer 不再以正确的形式提交数据，或者无法再解析结果。

我要看看有没有办法解决这个问题。

我现在提出的解决方案使用 Microsoft Translator Web 服务 (SOAP)。这不是一个简单的解决方案，但编码很有趣。

我按照[http://msdn.microsoft.com/en-us/library/hh454950](http://msdn.microsoft.com/en-us/library/hh454950)中的说明操作，然后修改了 nltk/misc/babelfish.py 中的 babelfish.py

1.  订阅 Azure 市场上的 Microsoft 翻译 API

订阅 Azure Marketplace 上的 Microsoft Translator API，我选择了免费订阅。

1.  注册您的应用程序 Azure DataMarket

要将您的应用程序注册到 Azure DataMarket，请使用步骤 1 中的 LiveID 凭据访问 datamarket.azure.com/developer/applications/，然后单击“注册”。写下您的客户端 ID 和客户端密码以备后用

1.  为 Python fedorahosted.org/suds/ 安装 suds

2.  修改 babelfish.py（使用你自己的 cliend_id 和 secret）：

//要添加的导入

```
from suds.client import Client
import httplib
import ast

...

#added function
def soaped_babelfish(TextToTranslate,codeLangFrom, codeLangTo):

    #Oauth credentials
    params = urllib.urlencode({'client_id': 'babelfish_soaped', 'client_secret': '1IkIG3j0ujiSMkTueCZ46iAY4fB1Nzr+rHBciHDCdxw=', 'scope': 'http://api.microsofttranslator.com', 'grant_type': 'client_credentials'})

    headers = {"Content-type": "application/x-www-form-urlencoded"}
    conn = httplib.HTTPSConnection("datamarket.accesscontrol.windows.net")
    conn.request("POST", "/v2/OAuth2-13/", params, headers)
    response = conn.getresponse()
    #print response.status, response.reason

    data = response.read()

    #obtain access_token
    respondeDict = ast.literal_eval(data)
    access_token = respondeDict['access_token']
    conn.close()

    #use the webservice with the accesstoken
    client = Client('http://api.microsofttranslator.com/V2/Soap.svc')

    result = client.service.Translate('Bearer'+' '+access_token,TextToTranslate,codeLangFrom, codeLangTo, 'text/plain','general')

    return result

...

#modified translate method
def translate(phrase, source, target):
    phrase = clean(phrase)
    try:
        source_code = __languages[source]
        target_code = __languages[target]
    except KeyError, lang:
        raise ValueError, "Language %s not available " % lang

    return clean(soaped_babelfish(phrase,source_code,target_code)) 
```

这就是 SOAPed 版本的全部内容！改天我会尝试一个仅基于 Web 的解决方案（类似于当前的 babelfish.py，但适应了变化）

# c# - 如何知道我当前的操作系统是否是 C# 中的 Windows Vista？

> ID：12267545
> 
> 赞同：3
> 
> 时间：2012-09-04T16:17:29.143
> 
> 标签：c#

我想知道我当前的操作系统版本是否属于 Windows Vista 类型（可能是 32 位或 64 位）。有没有办法以编程方式确定？我只需要知道它的Vista。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T16:18:41.337

您可以检查[Environment.OSVersion](http://msdn.microsoft.com/en-us/library/system.environment.osversion.aspx)以获取[操作系统](http://msdn.microsoft.com/en-us/library/system.operatingsystem.aspx)信息。

```
var version = Environment.OSVersion.Version;
bool isVista =  version.Major == 6 && version.Minor == 0; 
```

# ios - iOS 和 RESTful Web 服务加密

> ID：12267547
> 
> 赞同：0
> 
> 时间：2012-09-04T16:17:37.670
> 
> 标签：ios, encryption, gps, sha

所以情况如下：我有基于 GPS 的应用程序，其中有很多敏感数据发送到服务器 - GPS 坐标、用户通讯录电话号码等。所以我需要让它真正安全。

我决定用 HMAC+SHA256 加密发送到服务器的数据，在那里解密，加密响应，向客户端发送响应，然后在那里解密。

问题是 - 我的应用程序是否需要 CCATS 审查和批准，因为我没有使用带有 SSL 的 HHTPS 并且只发送使用 SHA256 编码的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:33:53.087

是的，它确实。理论上，任何使用加密的应用程序都需要 CCATS 审查。如果您直接向 Apple 询问，他们会回答（是的，我确实问过他们）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:46:03.460

不要重新发明轮子，使用 https - 真的。

您必须在您的网站上拥有一个“真实”证书，因为（上次我检查）iOS 内置的 https 仅适用于“真实”证书。请注意，这可能会花费您约 100 美元/年。

# java - 了解java平台独立性

> ID：12267551
> 
> 赞同：1
> 
> 时间：2012-09-04T16:18:03.507
> 
> 标签：java, linux, platform, platform-independent

我想测试一下java的平台独立性，所以我用java写了hello world程序，用windows的编译器编译，生成HelloWorld.class文件。然后我尝试在linux（ubuntu）中运行该文件。我最终出现错误。（JRE已经安装在linux中）

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: HelloWorld : Unsupported major.minor version 51.0
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)

Could not find the main class: HelloWorld. Program will exit. 
```

然后我使用 linux 编译器编译了相同的程序，并使用该 .class 文件检查它是否在 windows 中运行。它运行良好。

据我所知，由于字节码文件（.class）与平台无关，因此该程序应该可以完美运行。当我尝试在 linux 中运行该程序时出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T16:19:02.320

```
HelloWorld : Unsupported major.minor version 51.0 
```

说您的编译器版本与运行时 java 版本不同。

我的理解

> java平台独立性

您还需要在运行时机器上拥有与类文件编译器版本兼容（相同（或）更高）的 JVM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T16:20:21.757

您收到错误是因为您使用不同版本的 Java 编译了该类，并在 Linux 中在不同版本的 Java 中运行它

与用于编译的版本相比，Linux 中的 Java 很可能是旧版本。

**要尝试平台独立性，请在 Windows 上运行您在 Linux 上编译的 .class 文件**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T16:21:04.987

您在 Ubuntu 机器上安装的 JRE 版本早于编译您的文件的 JDK 版本。我相信特别`51.0`对应于 Java 7，因此您可能在 Ubuntu 上安装了版本 6。

*没错，所有机器*的字节码格式都是相同的。*但是，当然，在未来的版本*中，情况并非如此；随着新特性的引入，以前版本的 JVM 无法理解它们。v6 JVM 不理解 Java 7 中使用的字节码格式。

（顺便说一句，如果您以另一种方式执行此测试 - 在 Linux 中编译版本 6 字节码并在您的 Java 7 Windows VM 上运行该类，它会成功运行。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T16:49:24.280

让它跨版本工作都归结为使用编译器的[交叉编译选项](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html#crosscomp-options)。如果正确完成，代码可以在 Java 7 SDK 上编译并适合在 1.1 JRE 上运行（假设您可以找到一个）。

# c# - 将鼠标悬停在 ASP.NET 日历中的日期突出显示上

> ID：12267553
> 
> 赞同：0
> 
> 时间：2012-09-04T16:18:06.500
> 
> 标签：c#, asp.net, calendar, mouseover

我正在尝试将鼠标悬停在颜色更改功能上添加到 ASP.NET 中的默认日历。到目前为止，我已经尝试实现以下代码：

```
 Color col = new Color();
    col = Calendar1.DayStyle.BackColor;
    if (col != Color.Empty)
    {
        e.Cell.Attributes["onmouseover"] = "this.style.backgroundColor='pink';";
        e.Cell.Attributes["onmouseout"] = "this.style.backgroundColor='" + col + "';";
    }
    else
    {
        e.Cell.Attributes["onmouseover"] = "this.style.backgroundColor='pink';";
        e.Cell.Attributes["onmouseout"] = "this.style.backgroundColor='';";
    } 
```

如果我不点击日期，事情似乎工作正常。但是，当我单击日期并且日期背景变为灰色时，背景颜色变为粉红色，然后再次变为白色。这似乎是因为不知何故

```
 col = Calendar1.DayStyle.BackColor; 
```

没有选择正确的背景颜色？

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:55:58.880

为什么不以编程方式进行：

```
Color col = new Color();
col = (e.IsSelected) ? Calendar1.SelectedDayStyle.BackColor.ToString() : Calendar1.DayStyle.BackColor.ToString();

e.Cell.Attributes["onmouseover"] = "this.style.backgroundColor='pink';";
e.Cell.Attributes["onmouseout"] = "this.style.backgroundColor='" + col + "';"; 
```

您只需要确定当前日期是否被渲染；我不确定是否有 IsSelected 属性；如果没有，请将 e.IsSelected 替换为执行此操作的内容。

# django - 如何通过 django 过滤器获取相关模型的字段

> ID：12267559
> 
> 赞同：0
> 
> 时间：2012-09-04T16:18:21.090
> 
> 标签：django, django-models, django-views

所以这里是场景。我得到 user_id 并做一个名为生成的过滤器。我想按检查顺序显示 C 类的所有值。

这是我的models.py

```
class A(models.Model):
    tob = models.ForeignKey(B)

    def something(self, user):
        return A.objects.filter(to_b=user)

class B(models.Model):
    bid = models.AutoField(primary_key=True)
    name = models.CharField(max_length=50)

class C(models.Model):
    name = models.CharField(max_length=50)
    tobid = models.ForeignKey(B)
    check = models.datetimeField() 
```

这是我的views.py：

```
def generated(request,user_id):

    f= A()
    p = f.something(user_id) 
```

我可以执行一个 for 循环来获取 C 类的所有值。

我从 C 中获取价值的观点

```
 for des in p:
        des_list = des.tob.bid
        des_list_final = C.objects.filter(tobid = des_list) 
```

但是这里的问题是每次它从 B 中获取一个 id 并对 C 执行过滤。但这不会给我 C order by check 的值。知道如何克服这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:37:02.740

> 我想按检查顺序显示 C 类的所有值。

`C.objects.filter(tobid__id__in=[des.tob.bid.pk for des in p]).order_by('-check')`

如果要永久设置订单，请使用[`ordering`](https://docs.djangoproject.com/en/dev/ref/models/options/#django.db.models.Options.ordering)：

```
class C(models.Model):

   class Meta:
     ordering = ['-check'] 
```

# ruby-on-rails - 如何在不同的地方使用“git fetch”？

> ID：12267560
> 
> 赞同：1
> 
> 时间：2012-09-04T16:18:27.113
> 
> 标签：ruby-on-rails, git, github

我尝试在工作和家庭上使用 Git（例如项目名称 - “样本”）。我`add push -u origin master`用于在 github 上上传我的更改，然后我回到家并尝试使用命令更新我的项目，`git fetch`并在我的示例目录中获得了一个新的示例目录。当我尝试 smth like `cd .. && git fetch sample`- 我收到一个错误，即目录不为空。我如何每天更新我的工作和家庭项目？我是 git 新手，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:32:01.783

自从我谈到那个话题以来，我在不到一分钟的时间内看到了 3 次相同的答案，所以只是为了多样性：`merge`而且`pull`不是唯一的选择！

您还应该看看`git rebase`哪个有优势（恕我直言）让您的树更具可读性（因为更线性）。它还有一个非常有用的交互模式，每个 git 用户都应该知道如何使用。所以你不妨现在就开始研究它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:27:27.307

通常，在存储要保留在当前工作分支中的任何更改之后（在您的情况下） ， a`git fetch`和应该就足够了。`git pull``master`

`git fetch`如果您已经在 中时能够执行`sample`，并且导致另一个`sample`目录嵌套在当前目录中，则可能意味着您已将整个项目目录作为新的子目录签入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T16:26:33.587

你应该`git pull`改用。它执行 a`git fetch`后跟 a `git merge`。还要确保在调用 git 命令时位于正确的文件夹中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T16:41:59.480

> 我得到一个目录不为空的错误。

我无法理解那个错误，但让我傻傻地问，你是否在你的家用机器上克隆了你的项目并且你是`git fetch`从正确的目录中指挥的！？

我认为[gitref.org](http://gitref.org)将帮助您处理 git 中的基本任务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T16:27:30.550

你需要使用

```
git pull origin master 
```

# android - andengine中的单向墙

> ID：12267562
> 
> 赞同：1
> 
> 时间：2012-09-04T16:18:33.990
> 
> 标签：android, andengine, collision

我们如何在andengine中创建一种方式的墙壁，即当一个身体从上到下落在墙上时，身体应该与墙壁发生碰撞，而当从下到上时，它会忽略碰撞并允许身体穿过墙壁？我研究了以下教程[http://www.iforce2d.net/b2dtut/one-way-walls](http://www.iforce2d.net/b2dtut/one-way-walls)并尝试在 android 中实现此功能但无法正常工作。这是我到目前为止所做的：

```
public class JumpingBallActivity extends SimpleBaseGameActivity implements IOnSceneTouchListener, IAccelerationListener, ContactListener {

    private int CAMERA_WIDTH = 480;
    private int CAMERA_HEIGHT = 800;
    private BitmapTextureAtlas mBitmapTextureAtlas;
    private ITextureRegion smileyRegion;
    private Scene mScene;
    private Camera camera;
    private Sprite smileySprite;
    private Body smileyBody;
    private PhysicsWorld mPhysicsWorld;
    private Body slabWallBody;
    private FixtureDef FIXTURE_DEF = PhysicsFactory.createFixtureDef(0.6f, 0.0f, 0.0f);
    final FixtureDef wallFixtureDef = PhysicsFactory.createFixtureDef(1, 0.0f, 0.0f);

    @Override
    public EngineOptions onCreateEngineOptions() {
        // TODO Auto-generated method stub

        camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

        return new EngineOptions(true, ScreenOrientation.PORTRAIT_FIXED, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), camera);
    }

    @Override
    protected void onCreateResources() {
        // TODO Auto-generated method stub
        BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");

        mBitmapTextureAtlas = new BitmapTextureAtlas(this.getTextureManager(), 84, 84, TextureOptions.BILINEAR);
        smileyRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(mBitmapTextureAtlas, getAssets(), "smiley.png", 0, 0);
        mBitmapTextureAtlas.load();
        enableAccelerationSensor(this);

    }

    @Override
    protected Scene onCreateScene() {
        // TODO Auto-generated method stub
        this.mScene = new Scene();
        this.mScene.setBackground(new Background(0, 0, 0));
        this.mScene.setOnSceneTouchListener(this);
        this.mPhysicsWorld = new PhysicsWorld(new Vector2(0, 15), false);

        final VertexBufferObjectManager vertexBufferObjectManager = this.getVertexBufferObjectManager();
        Rectangle rect1 = new Rectangle((CAMERA_WIDTH/2) - 100, (CAMERA_HEIGHT/2) + 50, 200, 10, vertexBufferObjectManager);
        slabWallBody = PhysicsFactory.createBoxBody(this.mPhysicsWorld, rect1, BodyType.StaticBody, wallFixtureDef);
        slabWallBody.setUserData("slab");
        mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(rect1, slabWallBody, false, false));

        smileySprite = new Sprite(smileyRegion.getWidth(), smileyRegion.getHeight(), smileyRegion, vertexBufferObjectManager);
        smileyBody = PhysicsFactory.createCircleBody(mPhysicsWorld, smileySprite,  BodyType.DynamicBody, FIXTURE_DEF);
        smileyBody.setUserData("smiley");
        mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(smileySprite, smileyBody, true, false));

        final Rectangle ground = new Rectangle(0, CAMERA_HEIGHT - 2, CAMERA_WIDTH, 2, vertexBufferObjectManager);
        final Rectangle roof = new Rectangle(0, 0, CAMERA_WIDTH, 2, vertexBufferObjectManager);
        final Rectangle left = new Rectangle(0, 0, 2, CAMERA_HEIGHT, vertexBufferObjectManager);
        final Rectangle right = new Rectangle(CAMERA_WIDTH - 2, 0, 2, CAMERA_HEIGHT, vertexBufferObjectManager);

        PhysicsFactory.createBoxBody(this.mPhysicsWorld, ground, BodyType.StaticBody, wallFixtureDef).setUserData("wall");
        PhysicsFactory.createBoxBody(this.mPhysicsWorld, roof, BodyType.StaticBody, wallFixtureDef).setUserData("wall");
        PhysicsFactory.createBoxBody(this.mPhysicsWorld, left, BodyType.StaticBody, wallFixtureDef).setUserData("wall");
        PhysicsFactory.createBoxBody(this.mPhysicsWorld, right, BodyType.StaticBody, wallFixtureDef).setUserData("wall");

        mScene.attachChild(smileySprite);
        mScene.attachChild(rect1);
        mScene.attachChild(right);
        mScene.attachChild(left);
        mScene.attachChild(roof);
        mScene.attachChild(ground);

        this.mScene.registerUpdateHandler(this.mPhysicsWorld);
        mPhysicsWorld.setContactListener(this);
        mScene.setOnSceneTouchListener(this);
        return mScene;
    }

    @Override
    public boolean onSceneTouchEvent(Scene pScene, TouchEvent pSceneTouchEvent) {
        // TODO Auto-generated method stub
        smileyBody.setLinearVelocity(0, -15);
        return false;
    }

    @Override
    public void onAccelerationAccuracyChanged(AccelerationData pAccelerationData) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onAccelerationChanged(AccelerationData pAccelerationData) {
        // TODO Auto-generated method stub
        final Vector2 gravity = Vector2Pool.obtain(0, 15);
        this.mPhysicsWorld.setGravity(gravity);

        Vector2Pool.recycle(gravity);

        smileyBody.setLinearVelocity(pAccelerationData.getX() * 2, smileyBody.getLinearVelocity().y);
    }

    @Override
    public void beginContact(Contact contact) {
        // TODO Auto-generated method stub
//      Log.d("begin contact", "begin contact");
//      Log.d("begin contact", smileyBody.getLinearVelocity().toString() + "");

        Fixture fixtureA = contact.getFixtureA();
        Fixture fixtureB = contact.getFixtureB();

        Fixture platFormFixture = null;
        Fixture ballFixture = null;
        // also could not understand whats going on here in the code coming forward
        if(fixtureA.getBody().getUserData().equals("slab") && fixtureB.getBody().getUserData().equals("smiley")) {
            platFormFixture = fixtureA;
            ballFixture = fixtureB;

        }

        if(fixtureA.getBody().getUserData().equals("smiley") && fixtureB.getBody().getUserData().equals("slab")) {
            platFormFixture = fixtureB;
            ballFixture = fixtureA;
        }

        if(platFormFixture == null) {
            return;
        }

        Body platFormBody = platFormFixture.getBody();
        Body ballBody = ballFixture.getBody();

        int numPoints = contact.getWorldManifold().getNumberOfContactPoints();
        WorldManifold worldManiFold = contact.getWorldManifold();

        for(int i = 0; i < numPoints; i++) {
            Vector2 vector2 = ballBody.getLinearVelocityFromWorldPoint(worldManiFold.getPoints()[i]);
            Vector2 vector3 = platFormBody.getLinearVelocityFromWorldPoint(worldManiFold.getPoints()[i]);
            Vector2 vector4 = platFormBody.getLocalVector(vector2.sub(vector3));
            if(vector4.y < -1) {
//              Log.d("collision ignored", "collision ignored");
                return;
            }
            else if(vector4.y < 1) {
                Vector2 localPoint = platFormBody.getLocalPoint(worldManiFold.getPoints()[i]);
                Log.d("local y", localPoint.y + "");
                float f = 1.1f;
                if(localPoint.y > f - 0.05f) {
                    return;
                }
            }
        }

        contact.setEnabled(false);

    }

    @Override
    public void endContact(Contact contact) {
        // TODO Auto-generated method stub
        contact.setEnabled(true);
//      Log.d("end contact", "end contact");
//      Log.d("end contact", smileyBody.getLinearVelocity().toString());
    }

    Vector2 v;

    @Override
    public void preSolve(Contact contact, Manifold oldManifold) {
        // TODO Auto-generated method stub
//      Log.d("presolve", "presolve");
//      Log.d("presolve", smileyBody.getLinearVelocity().toString());

    }

    @Override
    public void postSolve(Contact contact, ContactImpulse impulse) {
        // TODO Auto-generated method stub
//      Log.d("postsolve", "postsolve");
//      Log.d("postsolve", smileyBody.getLinearVelocity().toString());
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T18:13:46.237

它之所以起作用，是因为：

*   `contact.setEnabled(false);`在`preSolve`功能和
*   `contact.setEnabled(true);` 在`endContact`函数中。

这是有效的，因为如果联系人被禁用，联系人的效果将不会传输到您所涉及的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:58:06.790

我已经实现了所需的功能并在此处给出了解决方案代码。我不知道它是如何工作的，但它现在正在工作。

```
public class JumpingBallActivity extends SimpleBaseGameActivity implements IOnSceneTouchListener, IAccelerationListener, ContactListener {

    private int CAMERA_WIDTH = 480;
    private int CAMERA_HEIGHT = 800;
    private BitmapTextureAtlas mBitmapTextureAtlas;
    private ITextureRegion smileyRegion;
    private Scene mScene;
    private Camera camera;
    private Sprite smileySprite;
    private Body smileyBody;
    private PhysicsWorld mPhysicsWorld;
    private Body slabWallBody;
    private FixtureDef FIXTURE_DEF = PhysicsFactory.createFixtureDef(0.6f, 0.0f, 0.0f);
    final FixtureDef wallFixtureDef = PhysicsFactory.createFixtureDef(1, 0.0f, 0.0f);

    @Override
    public EngineOptions onCreateEngineOptions() {
        // TODO Auto-generated method stub

        camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

        return new EngineOptions(true, ScreenOrientation.PORTRAIT_FIXED, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), camera);
    }

    @Override
    protected void onCreateResources() {
        // TODO Auto-generated method stub
        BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");

        mBitmapTextureAtlas = new BitmapTextureAtlas(this.getTextureManager(), 84, 84, TextureOptions.BILINEAR);
        smileyRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(mBitmapTextureAtlas, getAssets(), "smiley.png", 0, 0);
        mBitmapTextureAtlas.load();
        enableAccelerationSensor(this);

    }

    @Override
    protected Scene onCreateScene() {
        // TODO Auto-generated method stub
        this.mScene = new Scene();
        this.mScene.setBackground(new Background(0, 0, 0));
        this.mScene.setOnSceneTouchListener(this);
        this.mPhysicsWorld = new PhysicsWorld(new Vector2(0, 15), false);

        final VertexBufferObjectManager vertexBufferObjectManager = this.getVertexBufferObjectManager();
        Rectangle rect1 = new Rectangle((CAMERA_WIDTH/2) - 100, (CAMERA_HEIGHT/2) + 50, 200, 10, vertexBufferObjectManager);
        slabWallBody = PhysicsFactory.createBoxBody(this.mPhysicsWorld, rect1, BodyType.StaticBody, wallFixtureDef);
        slabWallBody.setUserData("slab");
        mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(rect1, slabWallBody, false, false));

        smileySprite = new Sprite(smileyRegion.getWidth(), smileyRegion.getHeight(), smileyRegion, vertexBufferObjectManager);
        smileyBody = PhysicsFactory.createCircleBody(mPhysicsWorld, smileySprite,  BodyType.DynamicBody, FIXTURE_DEF);
        smileyBody.setUserData("smiley");
        mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(smileySprite, smileyBody, true, false));

        final Rectangle ground = new Rectangle(0, CAMERA_HEIGHT - 2, CAMERA_WIDTH, 2, vertexBufferObjectManager);
        final Rectangle roof = new Rectangle(0, 0, CAMERA_WIDTH, 2, vertexBufferObjectManager);
        final Rectangle left = new Rectangle(0, 0, 2, CAMERA_HEIGHT, vertexBufferObjectManager);
        final Rectangle right = new Rectangle(CAMERA_WIDTH - 2, 0, 2, CAMERA_HEIGHT, vertexBufferObjectManager);

        PhysicsFactory.createBoxBody(this.mPhysicsWorld, ground, BodyType.StaticBody, wallFixtureDef).setUserData("wall");
        PhysicsFactory.createBoxBody(this.mPhysicsWorld, roof, BodyType.StaticBody, wallFixtureDef).setUserData("wall");
        PhysicsFactory.createBoxBody(this.mPhysicsWorld, left, BodyType.StaticBody, wallFixtureDef).setUserData("wall");
        PhysicsFactory.createBoxBody(this.mPhysicsWorld, right, BodyType.StaticBody, wallFixtureDef).setUserData("wall");

        mScene.attachChild(smileySprite);
        mScene.attachChild(rect1);
        mScene.attachChild(right);
        mScene.attachChild(left);
        mScene.attachChild(roof);
        mScene.attachChild(ground);

        this.mScene.registerUpdateHandler(this.mPhysicsWorld);
        mPhysicsWorld.setContactListener(this);
        mScene.setOnSceneTouchListener(this);
        return mScene;
    }

    @Override
    public boolean onSceneTouchEvent(Scene pScene, TouchEvent pSceneTouchEvent) {
        // TODO Auto-generated method stub
        smileyBody.setLinearVelocity(0, -15);
        return false;
    }

    @Override
    public void onAccelerationAccuracyChanged(AccelerationData pAccelerationData) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onAccelerationChanged(AccelerationData pAccelerationData) {
        // TODO Auto-generated method stub
        final Vector2 gravity = Vector2Pool.obtain(0, 15);
        this.mPhysicsWorld.setGravity(gravity);

        Vector2Pool.recycle(gravity);

        smileyBody.setLinearVelocity(pAccelerationData.getX() * 2, smileyBody.getLinearVelocity().y);
    }

    @Override
    public void beginContact(Contact contact) {
        // TODO Auto-generated method stub
//      Log.d("begin contact", "begin contact");
//      Log.d("begin contact", smileyBody.getLinearVelocity().toString() + "");

    }

    @Override
    public void endContact(Contact contact) {
        // TODO Auto-generated method stub
        contact.setEnabled(true);
//      Log.d("end contact", "end contact");
//      Log.d("end contact", smileyBody.getLinearVelocity().toString());
    }

    Vector2 v;

    @Override
    public void preSolve(Contact contact, Manifold oldManifold) {
        // TODO Auto-generated method stub
//      Log.d("presolve", "presolve");
//      Log.d("presolve", smileyBody.getLinearVelocity().toString());
        Fixture fixtureA = contact.getFixtureA();
        Fixture fixtureB = contact.getFixtureB();

        Fixture platFormFixture = null;
        Fixture ballFixture = null;

        if(fixtureA.getBody().getUserData().equals("slab") && fixtureB.getBody().getUserData().equals("smiley")) {
            platFormFixture = fixtureA;
            ballFixture = fixtureB;

        }

        if(fixtureA.getBody().getUserData().equals("smiley") && fixtureB.getBody().getUserData().equals("slab")) {
            platFormFixture = fixtureB;
            ballFixture = fixtureA;
        }

        if(platFormFixture == null) {
            return;
        }

        Body platFormBody = platFormFixture.getBody();
        Body ballBody = ballFixture.getBody();

        WorldManifold worldManiFold = contact.getWorldManifold();
        int numPoints = contact.getWorldManifold().getNumberOfContactPoints();
        for(int i = 0; i < numPoints; i++){
            Vector2 vector2 = ballBody.getLinearVelocityFromWorldPoint(worldManiFold.getPoints()[i]);
            if(vector2.y < 0) {
                contact.setEnabled(false);
            }
        }

//      WorldManifold worldManiFold = contact.getWorldManifold();
//      Vector2 normal = worldManiFold.getNormal();
//      
//      if(normal.y != -1) {
//          contact.setEnabled(false);
//      }
    }

    @Override
    public void postSolve(Contact contact, ContactImpulse impulse) {
        // TODO Auto-generated method stub
//      Log.d("postsolve", "postsolve");
//      Log.d("postsolve", smileyBody.getLinearVelocity().toString());
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T03:15:49.217

您可能会在这里得到错误的比较：

```
if(fixtureA.getBody().getUserData().equals("slab") && fixtureB.getBody().getUserData().equals("smiley")) {
            platFormFixture = fixtureA;
            ballFixture = fixtureB;

        }

        if(fixtureA.getBody().getUserData().equals("smiley") && fixtureB.getBody().getUserData().equals("slab")) {
            platFormFixture = fixtureB;
            ballFixture = fixtureA;
        } 
```

尝试这个：

```
 if(fixtureA == wallFixtureDef) {
        platFormFixture = fixtureA;
        ballFixture = fixtureB;

    }

    if(fixtureB ==wallFixtureDef ) {
        platFormFixture = fixtureB;
        ballFixture = fixtureA;
    } 
```

# javascript - HTML/JS/jQuery：点击 HTML 链接后插件不起作用

> ID：12267565
> 
> 赞同：1
> 
> 时间：2012-09-04T16:18:43.503
> 
> 标签：javascript, jquery

所以我使用了搜索框+Flickr API的组合，这样人们就可以搜索图片并获得结果。除此之外，我正在使用 Colorbox JS 插件，这样人们可以点击图片，图片将被放大并居中。

除此之外，我还有 3 个标记为“有趣、模因和可怕”的链接，方便人们查看这些类型的图片。这是它的HTML：

```
 <div class="tool">
        <a href="#" class="blackbar" id="funny">Funny</a>
        <a href="#" class="blackbar" id="scary">Scary</a>
        <a href="#" class="blackbar" id="memes">Memes</a>
    </div> <!-- tool --> 
```

我点击其中一个（例如有趣的），图片就会像他们应该的那样出来。我单击其中一张图片和彩盒作品。但是，我单击另一个（例如可怕）并没有那么多图片加载+彩盒停止工作。我注意到该 URL 有一个附加`#`的`<a href="#"`，我相信这可能是问题所在？有没有办法让href不影响我的JS？我试图将其留空，但它只会刷新页面。

这是我的 JS（不确定是否有必要展示，但以防万一）：

```
$('#funny').on('click',function(){
    $('.leftcolumn').html('');
    $.getJSON('http://api.flickr.com/services/rest/?format=json&method=flickr.photos.search&api_key=2fd41b49fedfd589dc265350521ab539&tags=funny&jsoncallback=?', function(data){
        $.each(data.photos.photo, function(i, value){
            content = '<a href="http://farm'+value.farm+'.staticflickr.com/'+value.server+'/'+value.id+'_'+value.secret+'.jpg" class="colorbox" rel="example1"><img src="http://farm'+value.farm+'.staticflickr.com/'+value.server+'/'+value.id+'_'+value.secret+'.jpg"></a>';
            $('.leftcolumn').append(content);
            $("a[rel='example1']").colorbox();
            if (i == 19) {
                return false;
            };
        })
    });
    getContent('funnytext.html');
    $('.blackbar').css({ "font-size": "1em"});
    $('#funny').animate({fontSize: "2em"});
});

$('#memes').on('click',function(){
    $('.leftcolumn').html('');
    $.getJSON('http://api.flickr.com/services/rest/?format=json&method=flickr.photos.search&api_key=2fd41b49fedfd589dc265350521ab539&tags=memes&jsoncallback=?', function(data){
        $.each(data.photos.photo, function(i, value){
            content = '<a href="http://farm'+value.farm+'.staticflickr.com/'+value.server+'/'+value.id+'_'+value.secret+'.jpg" class="fancybox" rel="example1"><img src="http://farm'+value.farm+'.staticflickr.com/'+value.server+'/'+value.id+'_'+value.secret+'.jpg"></a>';
            $('.leftcolumn').append(content);
            $("a[rel='example1']").colorbox();
            if (i == 19) {
                return false;
            };
        })
    });
    getContent('memetext.html');
    secondGetContent('memetext2.html');
    $('.blackbar').css({"font-size": "1em"});
    $('#memes').animate({fontSize: "2em"});
});

$('#scary').on('click',function(){
    $('.leftcolumn').html('');
    $.getJSON('http://api.flickr.com/services/rest/?format=json&method=flickr.photos.search&api_key=2fd41b49fedfd589dc265350521ab539&tags=scary&jsoncallback=?', function(data){
        $.each(data.photos.photo, function(i, value){
            content = '<a href="http://farm'+value.farm+'.staticflickr.com/'+value.server+'/'+value.id+'_'+value.secret+'.jpg" rel="example1"><img src="http://farm'+value.farm+'.staticflickr.com/'+value.server+'/'+value.id+'_'+value.secret+'.jpg"></a>';
            $('.leftcolumn').append(content);
            $("a[rel='example1']").colorbox();
            if (i == 19) {
                return false;
            };
        })
    });
    getContent('scarytext.html');
    $('.secondright').html('');
    $('.blackbar').css({"font-size": "1em"});
    $('#scary').animate({fontSize: "2em"});
}); 
```

顺便说一句，getContent 是一个 AJAX 函数，用于在页面右侧加载图片。

```
function getContent(filename) {
    $.ajax({
        url: filename,
        type: "GET",
        dataType: "html",
        beforeSend: function(){
            $('.rightcolumn').html('<img src="images/loading.gif">');
        },
        success: function (data, textStatus, xhr) {
            setTimeout(function (){
                $('.rightcolumn').html(data);
            }, 2000);
        },
        error: function(xhr, textStatus, errorThrown) {
            $('.rightcolumn').html(textStatus);
        }
    });
} 
```

我还尝试将`.colorbox()`方法放在全局空间中的 this 事件之外（尝试了 shadowbox、colorbox 和 fancybox），但它只会搞砸插件并使其出错。

# android - Android 上的 Mockito + Dexmaker

> ID：12267572
> 
> 赞同：37
> 
> 时间：2012-09-04T16:19:12.210
> 
> 标签：android, mockito, dexmaker

我正在尝试在我的 Android 项目中使用 Mockito。我找到了处理它的非常好的教程：http: [//www.paulbutcher.com/2012/05/mockito-on-android-step-by-step/](http://www.paulbutcher.com/2012/05/mockito-on-android-step-by-step/)

基本上它使用新版本的 Mockito + Dexmaker 并且一切都按预期工作。
但是，当我尝试模拟一些 Android 特定对象时，即：

```
Context context = mock(Context.class); 
```

我收到此异常：

```
java.lang.IllegalArgumentException: 
    dexcache == null (and no default could be found; 
    consider setting the 'dexmaker.dexcache' system property)
at com.google.dexmaker.DexMaker.generateAndLoad(DexMaker.java:359)
at com.google.dexmaker.stock.ProxyBuilder.buildProxyClass(ProxyBuilder.java:252)
at com.google.dexmaker.mockito.DexmakerMockMaker.createMock(DexmakerMockMaker.java:54)
at org.mockito.internal.util.MockUtil.createMock(MockUtil.java:26) 
```

知道如何解决吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-03-14T10:37:00.260

从@rjath 对@MrChaz 答案的评论来看，这对我来说效果更好：

```
System.setProperty(
    "dexmaker.dexcache",
    getInstrumentation().getTargetContext().getCacheDir().getPath()); 
```

我把它放在我的`setUp()`方法中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-01T17:27:16.717

我已经设法拼凑出一个似乎对我有用的修复程序。在清单中，我添加了读写外部存储。我添加`System.setProperty("dexmaker.dexcache", "/sdcard");`到测试中的测试。在模拟器图像中，我添加了一张 SD 卡。

我相信这是可行的，因为默认情况下 mockito 尝试使用应用程序缓存目录，但我从未运行过活动，所以我怀疑该目录从未由操作系统创建

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-05-23T08:54:08.617

因此，问题在于 Dexmaker 无法在 Android >= 4.3 上找到缓存路径，正如其他人所提到的以及[此 dexmaker 问题](http://code.google.com/p/dexmaker/issues/detail?id=2)中所述。

我在自定义检测测试运行器中而不是在每个测试（或它们的超类）中实现解决方法`setUp()`，因为它感觉不那么hacky（它实际上只在一个地方 - 而不是在每个子类中继承）并且更灵活。为了记录，这些是执行此操作的必要更改：

```
public class CustomInstrumentationTestRunner extends InstrumentationTestRunner {

    @Override public void onCreate (final Bundle arguments) {
        super.onCreate(arguments);

        // temporary workaround for an incompatibility in current dexmaker (1.1) implementation and Android >= 4.3
        // cf. https://code.google.com/p/dexmaker/issues/detail?id=2 for details
        System.setProperty("dexmaker.dexcache", getTargetContext().getCacheDir().toString());
    }
} 
```

并设置您的项目（或测试项目）以在`AndroidManifest.xml`使用 ant 构建时将此类用作其检测的测试运行器：

```
<instrumentation
    android:name="my.package.CustomInstrumentationTestRunner"
    android:targetPackage="my.target.package" /> 
```

或者`build.gradle`在使用 gradle 构建时：

```
android {
    defaultConfig {
        // ...
        testInstrumentationRunner 'my.package.CustomInstrumentationTestRunner'
    }
    // ...
} 
```

如果您有其他条目，您可以[在命令行](https://developer.android.com/reference/android/test/InstrumentationTestRunner.html)`instrumentation`中切换它们，也可以在 IDE 运行配置中选择一个。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-01T15:17:45.163

我在 Android 库项目中遇到了这个问题，但在应用程序项目中没有！如上所述设置系统属性“dexmaker.dexcache”解决了这个问题。我正在运行 Android 4.3 Nexus 4 设备，使用 19.0.3 工具构建，目标 api 19，我的依赖项：

```
androidTestCompile "org.mockito:mockito-core:1.9.5"
androidTestCompile "com.google.dexmaker:dexmaker:1.0"
androidTestCompile "com.google.dexmaker:dexmaker-mockito:1.0" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-24T23:26:07.400

看起来*dexmaker*项目已经从[Google Code](https://code.google.com/p/dexmaker/)转移到了[GitHub](https://github.com/crittercism/dexmaker)。

在[maven 中央存储库](https://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22com.google.dexmaker%22%20AND%20a%3A%22dexmaker%22)中有 1.1 和 1.2 版本，分别于 2014 年 3 月和 2014 年 12 月发布。

我已经验证了这个“dexcache == null”问题在 1.2 版中仍然存在 - 但仅在某些设备上。例如，装有 Android 5.0 的 Galaxy S5 存在问题，而装有 Android 4.4.2 的 Galaxy S4 则没有。

我克隆了 GitHub 存储库（[最后一次提交 2015 年 3 月 12 日 - ca74669](https://github.com/crittercism/dexmaker/commit/ca74669)），并在本地运行，问题已得到解决（历史记录中也有提交支持此问题）。所以一旦有 1.3 版本，希望这个问题永远消失！

其他任何想要运行 1.3-SNAPSHOT 的本地副本的人，我都是这样做的（在 Mac 上，但其他平台也应该可以工作，你需要*PATH*上的*mvn*、*adb*和*dx*）：

 *1.  `git clone`[https://github.com/crittercism/dexmaker.git](https://github.com/crittercism/dexmaker.git)
2.  `cd dexmaker`
3.  `mvn install -Dmaven.test.skip=true`
4.  `cp -R ~/.m2/repository/com/google/dexmaker $ANDROID_HOME/extras/android/m2repository/com/google`
5.  然后更改版本`app/build.gradle`：`androidTestCompile 'com.google.dexmaker:dexmaker:1.3-SNAPSHOT'`
    *   或者`pom.xml`如果使用 maven 构建，或者如果你使用 eclipse/ant`libs/dexmaker.jar`覆盖你`~/.m2/repository/com/google/dexmaker/dexmaker/1.3-SNAPSHOT/dexmaker-1.3-SNAPSHOT.jar`

此外，仅供参考，Google Code 上同一问题的[原始问题报告也是如此。](https://code.google.com/p/dexmaker/issues/detail?id=2)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-07T18:04:52.470

您可以将 mockito 核心添加为依赖项。然后，该错误将不会发生，您将不需要解决方法。

```
dependencies {
   ... 
   testCompile 'org.mockito:mockito-core:1.10.19'
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-16T10:10:33.290

我在对文件夹内的资源和文件夹进行操作时观察到了这个问题`test`。实际上只是重新启动 Android Studio 有帮助。简单，但有效。*

# jquery - 动态复选框不会取消选中工作

> ID：12267573
> 
> 赞同：0
> 
> 时间：2012-09-04T16:19:12.277
> 
> 标签：jquery, dynamic

嗨，我正在使用以下代码向表单动态添加复选框：

```
<table>
<tr>
    <?php foreach ($checks as $che) : ?>
        <td><?php echo $this->Form->checkbox($che, array('class' => $che, 'name' => $che)); ?></td>
    <?php endforeach; ?>
</tr> 
```

它工作正常，然后在 jquery 中尝试根据是否使用以下代码检查它来做某事：

```
$('.Variables:checkbox').live('click', (function()
{
    if($('.' +  this.name).prop("checked", true))
    {
        $("#accordion").find('h3').filter(':contains('+this.name+')').show();

    }
    else if($('.' +  this.name).prop("checked", false))
    {
        $("#accordion").find('h3').filter(':contains('+this.name+')').hide();
    }
})); 
```

我第一次单击复选框时它工作正常，并且出现 h3 标签，但是当我再次尝试单击它时，它并没有像应有的那样隐藏。

任何帮助都会很棒。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T08:30:16.720

我已经解决了，但感谢您的回复

```
$('.Variables:checkbox').on('click', (function()
{
    if($(this).prop("checked"))
    {
        $("#accordion").find('h3').filter(':contains('+this.name+')').show();  
    }
    else
    {
        $("#accordion").find('h3').filter(':contains('+this.name+')').hide();
    }
})); 
```

# heroku - 收到错误“您的 OpenSSL::SSL::SSLSocket 不支持 Excon nonblock”（Heroku）

> ID：12267574
> 
> 赞同：0
> 
> 时间：2012-09-04T16:19:25.703
> 
> 标签：heroku

尝试将我的应用推送到 Heroku 时，它挂起，我收到以下消息：

```
ssh: connect to host heroku.com port 22: Operation timed out 
```

运行时：

```
heroku status 
```

我收到错误消息：

```
Excon nonblock is not supported by your OpenSSL::SSL::SSLSocket 
```

有谁知道这意味着什么以及我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:36:38.410

我解决了这个问题。我的公司已经屏蔽了很多东西，所以它与此有关。当我尝试将手机用作 wifi 热点时，它运行良好，因此与我工作时的网络连接有关。

# jquery - 无法添加 div

> ID：12267576
> 
> 赞同：1
> 
> 时间：2012-09-04T16:19:41.133
> 
> 标签：jquery, html, line-breaks

我正在尝试使用 jQuery 在运行时添加多个 div。我想添加 3 个属于同一类的 div，然后附加换行符，这样当用户再次单击“添加框”按钮时，我可以在下一行显示另外 3 个 div。

这是相同的 jsFiddle：http: [//jsfiddle.net/WjFCf/3/](http://jsfiddle.net/WjFCf/3/)

正如您在 jsFiddle 中看到的那样，它几乎可以完成所有操作，但不会在第 3 个 div 之后添加换行符。因此，当用户再次单击该按钮时，它只会在同一行中添加更多 div。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:21:54.973

我想你想要`clear`它。

[http://jsfiddle.net/WjFCf/4/](http://jsfiddle.net/WjFCf/4/)

注意 CSS 的变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:22:22.487

正在添加您的换行符，问题`float: left`出在盒子上。如果你改变它，`display: inline-block`你会得到你正在寻找的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T16:22:24.023

如果您将盒子放入（足够）固定宽度的容器中，它将确保它们正确地分成三组。

就目前而言，如果窗口变得太小，“多余”的 div 将掉到下一行。

见[http://jsfiddle.net/alnitak/ZbPxG/](http://jsfiddle.net/alnitak/ZbPxG/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T16:23:03.627

您将让下一行框具有该`clear:both`属性，以便它们位于上方的浮动框下方。

[http://jsfiddle.net/WjFCf/5/](http://jsfiddle.net/WjFCf/5/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T16:33:15.480

当我将此代码添加到您的代码时，它运行良好：

```
#boxes{
   width: 600px;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T16:27:09.553

`<br>`不会自行有效地将 div 向下推。

使用[clear](http://www.w3schools.com/cssref/pr_class_clear.asp)属性会更有效。这告诉浏览器停止关注先前的向左（或向右）浮动，并开始一个新的浮动区域。

[jsfiddle](http://jsfiddle.net/wigster/CTF8E/)

# javascript - 使用更多属性更新模型（backbone.js）

> ID：12267578
> 
> 赞同：4
> 
> 时间：2012-09-04T16:19:47.737
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我有一个包含`productListView`图像列表的页面`productView`。`productListView`绑定到`productList`包含模型的集合`product`。单击图像时，会出现一个模式，`ModalView`其中包含有关单击其照片的产品的更多详细信息。

**问题：**为了尽量减少传输给用户的数据，`fetch`在页面`productListView`加载时只设置了产品的几个属性。单击其中的照片时，我应该如何`product`使用更多属性（如非常长的描述）更新模型`productListView`？

**模型**

```
Product = Backbone.Model.extend({
    url: '/api/product'  // Gets FULL details of product
}); 
```

**收藏**

```
ProductCollection = Backbone.Collection.extend({
    url: '/api/products'  // Gets MINIMAL details of product
}) 
```

**看法**

```
ProductListView = Backbone.View.extend({
    el: '#photo_list',

    initialize: function() {
        this.collection.bind('reset', this.render, this);
    },

    render: function() {
        this.collection.each(function(photo, index) {
            $(this.el).append(new ProductView({ model: photo }).render().el);
        }
        return this;
    },
});

ProductView = Backbone.View.extend({
    tagNAme: 'div',

    template: _.template( $('#tpl_ProductView').html() ),

    events: {
        'click .photo': 'showModal',
    },

    render: function() {
        $(this.el).html( this.template( this.model.toJSON() ) );
        return this;
    },

    // Creates the Modal View with FULL details of the product
    showModal: function() {
        modalView = new ModalView({ model: this.model });
    }
}); 
```

**模态视图**

```
ModalView = Backbone.View.extend({
    el: $('#modal'),

    template: _.template( $('#tpl_modal').html() ),

    initialize: function() {
        this.render();
    },

    render: function() {
        $(this.el).show().append( this.template( this.model.toJSON( this.model ) ) );
    },

}); 
```

* * *

## 更新

我收到错误消息`Uncaught TypeError: Object [object Window] has no method 'render'`。即使我使用`_.bindAll`的是绑定，为什么会这样`render`？我知道`var self=this`会起作用，但为什么不`_.bindAll`呢？

```
initialize: function() {
    _.bindAll(this, 'render');
    var self = this;
    // Update Model with Full details
    this.model.fetch({
        data: {post_id: this.model.get('id')},
        processData: true,
        success: function() {
            // The usual renders

            this.render();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:44:35.553

如果您的`Product.fetch`调用获得完整模型（具有扩展属性），则更`showModal`改为执行此操作，然后呈现：

```
showModal: function() {
    var modalView = new ModalView({ model: this.model }),
        p = this.model.fetch();
    p.done(modalView.render);
} 
```

和

```
ModalView = Backbone.View.extend({
    el: $('#modal'),

    template: _.template( $('#tpl_modal').html() ),

    render: function() {
        this.$el.show().append( this.template( this.model.toJSON() ) );
    },

}); 
```

如果 fetch 不能为您提供所有信息，则将 fetch 替换为 ajax 调用。

关于您的更新：`this`在`success`回调上下文中是`window`. 您想改用保存的`self`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T07:38:29.753

在此代码中，您应该使用`self.render();`而不是`this.render()`

```
initialize: function() {
  _.bindAll(this, 'render');
  var self = this;
  // Update Model with Full details

  this.model.fetch({
    data: {post_id: this.model.get('id')},
    processData: true,
    success: function() {
        // The usual renders
        self.render();
    }
}); 
```

# php - SQL：在更新期间获取列的值

> ID：12267594
> 
> 赞同：0
> 
> 时间：2012-09-04T16:21:06.453
> 
> 标签：php, mysql

使用 PHP 和 MySQL，我有一个如下所示的查询：

```
UPDATE mytable 
   SET status='$newstatus' 
 WHERE (col1='$col1[0]'AND col2='$col2[0]') 
   OR (col1='$col1[1]'AND col2='$col2[1]') 
   OR (...); 
```

我实际上需要在更新之前记录每一行的当前“状态”。在此之前我是否需要做一个单独的 SELECT ，或者我可以（应该/如何）结合这两个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:23:55.737

你不能从这个查询中得到它（你只能得到受影响的行数，但就是这样）。如果您需要，您应首先`SELECT`根据您的条件执行以下操作：

```
SELECT `id` FROM `mytable`
WHERE (`col1`='$col1[0]' AND `col2`='$col2[0]')
   OR (`col1`='$col1[1]' AND `col2`='$col2[1]')
   OR (...) 
```

然后`UPDATE`使用`WHERE`fetched `id`s。我不建议`UPDATE`您使用 current`WHERE`子句，因为同时（在您的`SELECT`和之间`UPDATE`）数据库内容可能会发生变化，因此您可能会更新您已`SELECT`编辑的不同行。或者使用表锁定（但我认为这里没有意义）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:33:12.780

Mysql中没有`OUTPUT`子句。您需要在更新之前读取状态或创建将值存储`OLD.status`在其他表中的触发器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T16:41:39.647

您不能有一个查询来更新行并在更新之前记录当前状态。

您最好有一个“日志表”，与您的“表”具有相同的架构加上一个**时间戳**，但它只会存储历史数据，即单个时间点的行状态，就像版本控制系统一样。

**例子：**

表**用户**：ID、用户名、电子邮件、电话

表**UserLog**：ID、用户名、电子邮件、电话、**时间戳**

因此，在更新表 User 上的行之前，您首先要执行 SELECT 和 INSERT，如下所示：

```
insert into UserLog
select Id, Username, Email, Telephone, Now()  from User where Id=$Id 
```

# c++ - Visual C++ 2010 中的预处理器指令缩进

> ID：12267601
> 
> 赞同：22
> 
> 时间：2012-09-04T16:21:22.333
> 
> 标签：c++, c-preprocessor, indentation, visual-c++-2010, preprocessor-directive

我经常发现自己在我想像其余代码一样缩进预处理器指令的情况下（例如，`#if`像 一样缩进`if`）。这[似乎是合法](https://stackoverflow.com/questions/789073/indenting-defines)的，这是[常识，有时它是一件好事](https://stackoverflow.com/questions/2975330/how-do-you-indent-preprocessor-statements)，但视觉并不容易。

有没有办法防止 Visual C++ 2010 编辑器在我每次无辜按下时将代码粘贴到左侧`#`？并且不使用自动缩进（CTRL + K，CTRL + F）破坏预处理器指令的缩进？或者更好的是，像处理其他一切一样处理预处理器指令？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-04T16:29:52.667

我的方法是保留`#`第一列并缩进后面的单词，如下所示：

```
#ifdef FIRST
#  include "first.h"
#else
#  include "second.h"
#endif 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-05-03T16:43:43.017

在某些时候，visualstudio（在 vs2015 中检查）获得了选项 > 文本编辑器 > c/c++ > 格式 > 缩进 > 预处理器指令的位置。选择“保留缩进”。该示例看起来与您想要的不完全一样，但它确实有效，请尝试一下。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-12T09:45:19.197

在 Visual Studio 2010 选项中（工具->选项）

转到文本编辑器 -> C/C++ -> 选项卡

在缩进下选择块而不是智能。

这将防止 # 键强制您进入行首，但是如果您使用 Ctrl+K Ctrl+F 它仍然会应用智能格式并删除标签。

编辑：这也将禁用其他地方的自动缩进/取消缩进。谨防。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-28T18:30:59.163

解决方法：当您第一次键入`#`并且 Visual Studio 删除您的缩进时，按`ctrl`+`z`撤消自动格式化。

# .net - 在 .NET 中获取 nlb clusternode HostPriority

> ID：12267604
> 
> 赞同：1
> 
> 时间：2012-09-04T16:21:33.617
> 
> 标签：.net, powershell, nlb

我正在尝试在.net中使用powershell获取nlb clusternode的HostPriority

```
using (RunspaceInvoke invoker = new RunspaceInvoke())
{
    invoker.Invoke("Import-Module NetworkLoadBalancingClusters");
    foreach (PSObject result in invoker.Invoke("Get-NlbClusterNode -NodeName $env:COMPUTERNAME"))
    Console.WriteLine(result.Members["HostID"].Value.ToString());
} 
```

这不返回任何内容。

我遍历返回的所有成员，`PSObject`与通过运行 powershell cmdlet 获得的任何内容相比，没有什么相同的。

我还尝试`Get_Item`了以下返回类型为`Microsoft.NetworkLoadBalancingClusters.PowerShell.Node`.

```
using (RunspaceInvoke invoker = new RunspaceInvoke())
{
    invoker.Invoke("Import-Module NetworkLoadBalancingClusters");
    foreach (PSObject result in invoker.Invoke("Get-NlbClusterNode -NodeName $env:COMPUTERNAME"))
    Console.WriteLine(result.Methods["get_item"].Invoke(0).GetType().ToString());
} 
```

但我不能真正转换到节点，因为我无法`Microsoft.NetworkLoadBalancingClusters.PowerShell.dll`在 powershell 目录中引用，可能是它是一个 64 位 dll。

有什么想法我应该从这里做什么？

# php - 从 php 中的 Unix 时间戳获取周数和年份

> ID：12267606
> 
> 赞同：2
> 
> 时间：2012-09-04T16:21:40.587
> 
> 标签：php

我正在尝试创建一个允许用户前进或后退一周的周历。到目前为止，我有这个...

```
<?
if(isset($_POST['add_week'])){
     $last_week_ts = strtotime($_POST['last_week']);
     $display_week_ts = $last_week_ts + (3600 * 24 * 7);
} else if (isset($_POST['back_week'])) {
     $last_week_ts = strtotime($_POST['last_week']);
     $display_week_ts = $last_week_ts - (3600 * 24 * 7);
} else {
    $display_week_ts = floor(time() / (3600 * 24)) * 3600 * 24;
}

    $week_start = date('d-m-Y', $display_week_ts);
    $week_number = date("W", strtotime( $display_week_ts));
    $year = date("Y", strtotime( $display_week_ts));

echo $week_start.' '.$week_number.' '.$year;
?>

<table name="week">
    <tr>
<?
for($day=1; $day<=7; $day++)
{
    echo '<td>';
    echo date('d-m-Y', strtotime($year."W".$week_number.$day))." | \n";
    echo '</td>';
}
?>
</tr>
<tr>
<form name="move_weeks" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<input type="hidden" name="last_week" value="<? echo $week_start; ?>" />
<td colspan="7"><input type="submit" name="back_week" value="back_week" /><input type="submit" name="add_week" value="add_week" />
</td>
</form>
</tr>
</table> 
```

后退和前进按钮工作得很好，代表一周中第一个日期的 $week_start 变量前进并按原样返回，但无论显示的日期如何 $week_number 和 $year 显示为 01 和 1970 或 36 和 1600 .

我知道这一定与我试图从 $display_week_ts 中提取它们的方式有关，但我不知道是什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T16:28:25.273

以下看起来格格不入：

```
$week_start = date('d-m-Y', $display_week_ts);
$week_number = date("W", strtotime( $display_week_ts));
$year = date("Y", strtotime( $display_week_ts)); 
```

查看您`$display_week_ts`在第一个语句中的使用方式，但对于其他（和类似的）语句，您将该时间戳包装在对`strtotime()`返回的调用中`false`。

最好只删除`strtotime()`并按原样使用变量：

```
$week_number = date("W", $display_week_ts);
$year = date("Y", $display_week_ts); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:31:06.743

好的，修好了，我需要从 $week_start 获取周数和年份

# javascript - 实时绑定提交不指向 Chrome 中的元素

> ID：12267611
> 
> 赞同：0
> 
> 时间：2012-09-04T16:22:01.430
> 
> 标签：javascript, jquery, submit, jquery-events

运行下面的代码，我希望看到相关的表格，所以我可以从中提取信息。相反，`this`指向文档。

我认为它与使用实时绑定有关，有解决方法吗？

```
 $('.form_one').add('.form_two').live('submit',function(e){
      e.preventDefault();
      console.log($(this));
    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:33:02.373

这是因为这是`live()`将事件处理程序委托给最高级别 DOM 元素的快捷方式`document`- 这就是为什么`this`指向范围的原因。

作为一种解决方法，您应该使用它`$(e.target)`来获取引发事件的元素。

此外，`live()`已弃用，您应该使用`delegate()`或者`on()`如果您使用的是 jQuery 1.7+。

[**示例小提琴**](http://jsfiddle.net/2QB9a/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:45:31.313

[http://jsfiddle.net/ZBaWd/](http://jsfiddle.net/ZBaWd/)将演示如何使用`on`处理程序。

```
<div id="container"></div>​

var cont = $("#container");

// Note that I'm attaching it to container and not the forms themselves. 
// Then, as an additional parameter, I provide the selector "form" so that
// `on` is only fired for "form" elements that "submit" and are children of "#container"
$("#container").on("submit", "form", function(e){
    e.preventDefault();
    console.log($(this));
});

$("<form>").addClass("form_one").append("<button type='submit'>Submit 1</button>").appendTo(cont);
$("<form>").addClass("form_two").append("<button type='submit'>Submit 2</button>").appendTo(cont); 
```

# c# - 带有时间戳的范围键。使用 DynamoDB 进行查询和分页

> ID：12267612
> 
> 赞同：3
> 
> 时间：2012-09-04T16:22:12.067
> 
> 标签：c#, amazon-web-services, amazon-dynamodb

我很困惑。我应该如何设计一个 DynamoDB 表以使用带分页的时间戳倒序有效地查询项目？

我知道我可以使用`ScanIndexForward`和查询它，`Limit`但`LastEvaluatedKey`指南说：“查询结果始终按范围键排序，基于 ASCII 字符代码值”

那么范围键应该包含什么？现在我正在使用 reverseTimestamp，但我不确定：

```
var request = new QueryRequest()
    .WithTableName("Output")
    .WithLimit(25)
    .WithScanIndexForward(false)
    .WithExclusiveStartKey(new Key { HashKeyElement = new AttributeValue {S = "1"}, 
     RangeKeyElement = new AttributeValue {S = lastKeyEvaluated} }) 
```

将返回表中的 25 个最新项目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:49:38.797

在 Python 的 DynamoDB-Mapper 中，我们将所有日期序列化为“W3C 日期/时间格式”又名“RFC 3339”。使用 UTF-8 文本排序时，它具有按正确顺序对时间进行排序的好特性。另一个副作用是将 tz 信息与时间戳一起存储。

# apache - Apache，FastCGI - 错误 503

> ID：12267618
> 
> 赞同：0
> 
> 时间：2012-09-04T16:22:42.837
> 
> 标签：apache, fastcgi, virtualhost, http-status-code-503, suexec

有人向我指出我的服务器不安全，因为任何人都可以通过 PHP 读取任何文件，即使它不在他的 DocumentRoot 中。

我决定重新配置整个 apache 和虚拟主机的所有配置文件，并安装了 Mod FastCGI，我设法让它运行得很好，我不再有权限问题了。

但似乎还有另一个问题。当我尝试加载超过 3 个站点（在不同的 VirtualHosts => 不同线程上的不同用户）时，页面加载了一段时间，然后在“错误 503：服务暂时不可用”时崩溃。

我尝试将 PHP_FCGI_CHILDREN var 从所有 VirtualHosts 的默认设置（0 到更高的数字）增加，但没有运气。正如我在一些教程中阅读的那样，我还尝试将 apache2.conf 中的 KeepAlive var 设置为 Off，但似乎没有任何帮助。

有谁知道如何解决这个问题？[我的 Apache error.log 和 suexec.log 是空的。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:20:17.920

找到了我自己的问题的答案。我忽略了更多设置。

```
FcgidMaxProcesses 15
FcgidFixPathinfo 1 
FcgidProcessLifeTime 0 
FcgidTimeScore 3 
FcgidZombieScanInterval 10
FcgidMaxRequestsPerProcess 0 
FcgidMaxRequestLen 33554432 
FcgidIOTimeout 60 
```

这些是我在 apache.conf 中的设置，一切都按预期工作。

# sql-server - 使用批量插入和查询优化表性能

> ID：12267619
> 
> 赞同：1
> 
> 时间：2012-09-04T16:22:46.857
> 
> 标签：sql-server, ado.net

我们有一个具有以下架构的表：

```
CREATE TABLE Measurement (
  HubId bigint NOT NULL
  ,DeviceId bigint NOT NULL
  ,Timestamp datetime NOT NULL
  ,Value bigint NOT NULL
) 
```

我们希望以每秒大约 100,000 条记录的速度将记录导入此表，这些记录将被拆分到多个并发连接中。我可以通过将表视为堆（即没有索引）并使用`SqlBulkCopy`. 每秒有 100,000 个独特的`HubId`和`DeviceId`与`Timestamp`递增的组合。`Value`是随时间累积的。

我们还需要每秒读取两个最近的（在这种情况下是最后一个和倒数第二个 - 插入总是按顺序排列）值`GROUP BY HubId, DeviceId`，但只针对生成的行的子集（用户感兴趣的行）最后两个值之间的实时差异。

此外，出于历史目的，我们需要将每 15 分钟一次的数据聚合成 15 分钟的切片。此数据基于前 15 分钟切片的最大值和当前 15 分钟切片的最大值进行聚合...这需要在整个数据集中发生，但可以拆分为多个连接以实现唯一性`HubId`和`DeviceId`组合。因为`Value`是累积的，所以这实际上是前一个和当前 15 分钟切片的最后一个值。

批量插入带有索引的表会导致升级为独占表锁。此外，如果不升级到独占表锁，我们似乎无法执行查询。

任何人都可以给我一些关于构建这个的最佳方式的指示吗？我正在用头撞墙，试图找出最好的方法......

谢谢，院长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:28:16.160

因此，在反复来回之后，我们稍微改变了我们的方法，以达到我们需要的吞吐量。事实证明，我们只关心它们存在的那一刻的 100,000 条记录/秒，它们用于更新一组不断滚动的聚合和实时值。

我们使用多个工作线程将 100,000 行批量插入到临时堆表中（因此使用 4 个工作线程，每个线程处理大约 25,000 行），然后将聚集索引应用于临时表。然后，我们将临时表中的数据直接合并到实时表和聚合表中，并删除临时表。在这里，我们使用 ROWLOCK 提示强制 SQL 采用 ROWLOCK 而不是 TABLOCK 或 PAGLOCK，这会导致工作线程之间的争用超出必要的程度。

此外，我们将内存中的数据结构更改为有损堆栈而不是队列。在我们的情况下，这是合适的，因为我们通常只关心最新的数据，并且可以删除较旧的数据。

我们将使用分区作为我们口袋里的王牌，但我们目前仅限于 SQL Server 标准版，因此我们现在无法将它部署到我们的开发机器之外。

干杯，院长

# c++ - QML：GridView 在 C++ 中更改其模型后不更新

> ID：12267620
> 
> 赞同：3
> 
> 时间：2012-09-04T16:23:02.587
> 
> 标签：c++, qt, qml

我的出发点是以下 QML 源，其​​中 GridView 显示 ListModel 并带有漂亮的项目交换动画：

```
import QtQuick 1.1
GridView {
    id: mainGrid
    width: 825; height: 400; cellWidth: 165; cellHeight: 95
    model: myModel
    delegate: myButton
    ListModel {
        id: myModel
        function createModel() {
            for (var i=1; i<=20; i++) {
                append({"display":i})
            }
        }
        function listItems() {
            console.log("LIST OF ITEMS")
            for (var i=0; i<=19; i++) {
                console.log("model["+i+"]="+get(i).display)
            }
        }
        function moveItem(inx1,inx2) {
            move(inx1,inx2,1)
        }
        Component.onCompleted: {
            createModel()
            listItems()
        }
    }
    Component {
        id: myButton
        Item {
            id: item
            width: 160; height: 90
            Rectangle {
                id: box
                parent: mainGrid
                x: item.x; y: item.y; width: item.width; height: item.height; border.width: 1
                Behavior on x {NumberAnimation { duration: 1000;} }
                Behavior on y {NumberAnimation { duration: 1000;} }
                Text {
                    anchors.centerIn: parent
                    text: display
                }
                MouseArea {
                    anchors.fill: parent
                    onClicked: {
                        mainGrid.model.moveItem(index,0)
                        mainGrid.model.listItems()
                    }
                }
            }
        }
    }
} 
```

我想使用从 QStandardItemModel 派生的 C++ 模型，而不是 QML ListModel：

```
#include <QStandardItemModel>
class MyTable : public QStandardItemModel
{
private:
    Q_OBJECT
    int table[20];
public:
    explicit MyTable(QObject *parent = 0) : QStandardItemModel(parent) {}
    Q_INVOKABLE void createModel();
    Q_INVOKABLE void moveItem(int inx1, int inx2);
}; 
```

该模型通过`qmlRegisterType<MyTable,1>("MyTable",1,0,"MyTable")`. 问题是，我没有得到很好的动画效果，而且我也不确定交换后模型是否正确更新。

相关的（有问题的）C++ 函数在这里：

```
void MyTable::createModel()
{
    for (unsigned int i=0; i<20; i++) {
        table[i]=i;
        QStandardItem* item = new QStandardItem(QString("%1").arg(table[i]));
        appendRow(item);
    }
}

void MyTable::moveItem(int inx1, int inx2) {
    //SOME MATH, IT WORKS
    int tmp = table[inx1];
    if (inx1<inx2) {
        for (int i=inx1; i<inx2; i++) table[i] = table[i+1];
        table[inx2] = tmp;
    } else if (inx2<inx1) {
        for (int i=inx1; i>inx2; i--) table[i] = table[i-1];
        table[inx2] = tmp;
    }
    //UPDATE MODEL - IS SOMETHING MISSING HERE?
    for (unsigned int i=0; i<20; i++) {
        QStandardItem* item = new QStandardItem(QString("%1").arg(table[i]));
        setItem(i,0,item);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T07:40:50.277

我找到了解决方案。这是工作代码（感谢 Borut123 的建议）。

```
class MyTable : public QStandardItemModel
{
private:
    Q_OBJECT
public:
    explicit MyTable(QObject *parent = 0) : QStandardItemModel(parent) {}
    Q_INVOKABLE void createModel();
    Q_INVOKABLE void moveItem(int inx1, int inx2);
    Q_INVOKABLE void listItems();
};

void MyTable::createModel()
{
    for (unsigned int i=0; i<20; i++) {
        QStandardItem* item = new QStandardItem(QString("%1").arg(i));
        appendRow(item);
    }
}

void MyTable::moveItem(int inx1, int inx2) {
    bool ok = false;
    if (inx1 < inx2) ok = beginMoveRows(QModelIndex(),inx1,inx1,QModelIndex(),inx2+1);
    if (inx1 > inx2) ok = beginMoveRows(QModelIndex(),inx1,inx1,QModelIndex(),inx2);
    if (!ok) return;
    QStandardItem* tmp1 = takeItem(inx1);
    if (inx1<inx2) {
        for (int i=inx1; i<inx2; i++) {
            QStandardItem* tmp2 = takeItem(i+1);
            setItem(i,tmp2);
        }
    } else if (inx2<inx1) {
        for (int i=inx1; i>inx2; i--) {
            QStandardItem* tmp2 = takeItem(i-1);
            setItem(i,tmp2);
        }
    }
    setItem(inx2,tmp1);
    endMoveRows();
}

void MyTable::listItems() {
    qDebug() << "LIST OF ITEMS";
    for (unsigned int i=0; i<20; i++) {
        qDebug() << QString("table[%1]=%2").arg(i).arg(item(i)->text()).toAscii().data();
    }
} 
```

# jquery - jQuery 循环遍历文章和延迟（）特定文章

> ID：12267625
> 
> 赞同：1
> 
> 时间：2012-09-04T16:23:10.170
> 
> 标签：jquery, delay

我有一个 jQuery 函数，它遍历一组`<article>`元素：

```
$("article:first").fadeTo(animationTime,1,function() {
    $(this).delay(2000).fadeTo(animationTime,0,function(){ // was 20000
        $(this).find('#delaythisarticle').delay(10000);
        $(this).insertAfter("article:last");
        $("article:last").hide();
        mainSlide(200);
    });
}) 
```

现在，我想要的是展示一篇比其他文章更长的文章。这篇文章有ID `#delaythisarticle`。我尝试了该`delay()`功能，但我知道当它不在 jQuery 队列中时它不起作用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:26:56.217

做一些类似使用三元运算符的事情。

使用相同的代码：

```
$("article:first").fadeTo(animationTime,1,function() {
    $(this).delay(2000).fadeTo(animationTime,0,function(){ // was 20000
        $(this).find('#delaythisarticle').delay(10000);
        $(this).insertAfter("article:last");
        $("article:last").hide();
        mainSlide(200);
    });
}) 
```

替换为`animationTime`：

```
.fadeTo(($(this).attr("id") == "delayThisArticle") ? 10000 : animationTime) 
```

尝试让我们知道它是否有效。:)

# tomcat - 在tomcat中更改webapp名称

> ID：12267626
> 
> 赞同：2
> 
> 时间：2012-09-04T16:23:14.847
> 
> 标签：tomcat, web-applications

我的网络应用程序名称是 tom..我的意思是 url 说..`http://localhost:8080/tom/index.do`

我需要将我的网址更改为`http://localhost:8080/dave/index.do`..

我到底需要在哪里进行更改才能实现这一目标..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T17:02:57.430

通常可以通过简单地重命名 Tomcat`webapps`目录下的“.war”文件来完成（例如，从“tom.war”到“dave.war”）。如果您没有看到 war 文件，而是看到一个展开的目录，您也可以重命名该目录。

这应该适用于不使用上下文配置文件的大多数基本设置。

# google-maps - 如何在 Google Maps v3 API 中禁用相交圆/多边形的 alpha 组合？

> ID：12267631
> 
> 赞同：8
> 
> 时间：2012-09-04T16:23:26.607
> 
> 标签：google-maps, google-maps-api-3

Google Maps v3 JS API 中是否有方法/配置属性来禁用/解决重叠圆圈的 alpha 组合？我目前正在从事一个项目，该项目最终可以在地图上绘制许多圆圈，其中一些区域是 >10 个圆圈的交集。即使不透明度非常低，这很快就会使那些相交区域的地图不可读。任何关于如何使交叉点与任何单个圆圈保持相同不透明度的建议将不胜感激 - 显然这是 API v2 中的默认行为（示例截图：http: [//img23.imageshack.us/i/screenshot20110504at655.png /](http://img23.imageshack.us/i/screenshot20110504at655.png/) )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:05:44.030

您需要将路径作为数组的数组组合成一个多边形。[**示例代码在这里**](http://code.google.com/p/gmaps-samples-v3/source/browse/trunk/poly/pentagon.html?r=40)，并在[**此处查看结果**](http://gmaps-samples-v3.googlecode.com/svn-history/r40/trunk/poly/pentagon.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T12:09:14.873

所以2年后，我遇到了同样的问题。这个解决方案有点骇人听闻。

在 javascript 中将所有圆圈的不透明度设置为 1。然后添加这个css：

```
#map-canvas > div:first-of-type > div:first-of-type > div:first-of-type > div:first-of-type > div:first-of-type > div:first-of-type > div:first-of-type  {
    opacity:0.3
} 
```

如果谷歌改变了圆圈层的位置，那么这将打破。
PS。我正在使用地图 API 的 v3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-15T23:13:00.977

根据 Daryls 的回答，您必须将其放入 html 标头的样式部分：

```
 .gm-style > div:nth-child(1) > div:nth-child(1) > div:nth-child(2){
  opacity: 0.1;
  } 
```

截至 2018 年 7 月，这对我有用

# jquery - jQuery文件下载插件

> ID：12267632
> 
> 赞同：2
> 
> 时间：2012-09-04T16:23:27.170
> 
> 标签：jquery, jquery-plugins, download

我从[这个站点](https://github.com/johnculviner/jquery.fileDownload/blob/master/src/Scripts/jquery.fileDownload.js)`<script type="text/javascript" src="/gestionRH/js/jquery/jqueryFileDownload.js"></script>`导入了这个插件的js文件，如下所示

```
$.fileDownload('mypath'); 
```

Firebug 向我显示了这个错误：`TypeError: $.fileDownload is not a function`

chrome显示：未捕获`TypeError: Object function (a,b){return new d.fn.init(a,b,g)} has no method 'fileDownload'`

这是整个代码

```
<%@ page language="java" import="java.util.*" pageEncoding="ISO-8859-1"%>

    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
    <html>
    <head>

     <script type="text/javascript"  src="/gestionRH/js/jquery/jquery13_min.js"></script>

    </head>
    <body>
    <input type="button" id="download" value="download">

    </body>
    <script type="text/javascript">
    $("#download").live("click",function(){
     $.fileDownload('C:\\Users\\free\\Desktop\\myworkspace\\gestionRH\\WebRoot\\fiches\\note.doc');
    });
    </script>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T08:37:07.437

对于那些将面临同样问题的人来说，问题是由于这个：路径不正确我必须从服务器下载所以路径是

```
 $.fileDownload('http://localhost:8080/path/to/file'); 
```

不是`$.fileDownload('C:\\Users\path\to\file');`

# javascript - 级联拆分多个分隔符？

> ID：12267640
> 
> 赞同：2
> 
> 时间：2012-09-04T16:24:26.687
> 
> 标签：javascript

我有这个代码：

```
"12:30-14:40".split("-") 
```

它的输出是：

```
["12:30", "14:40"] 
```

我需要有这样的数组：

```
[["12","30"],["14","40"]] 
```

如何在同一行上执行相当于*级联拆分的操作以获得第二个结果？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T16:27:01.497

您必须再次迭代生成的数组。在 ECMAScript5 环境（节点、现代浏览器）中，`.map`这很适用：

```
"12:30-14:40".split("-").map(function(item) {
    return item.split(':');
}); 
```

# c# - 在 WebClient 请求期间发生异常 c# wp7 Uri.length very long

> ID：12267643
> 
> 赞同：0
> 
> 时间：2012-09-04T16:24:35.047
> 
> 标签：c#, windows-phone-7, uri, webclient

问题是，如果我这样做`Webclient.DownloadStringAsync(Uri)`，而 Uri.length 很长，我会看到错误：`An exception occurred during a WebClient request`

Webclient 的 URI 是对链接长度的限制吗？如果链接很长怎么办？

```
WebClient queueItem_client = new WebClient();
queueItem_client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(queueItem_client_DownloadStringCompleted);
            queueItem_client.DownloadStringAsync(execUri);

void queueItem_client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{} 
```

链接长度为`execUri`2234 个字符。

![在此处输入图像描述](../Images/0980985b0ff57455cb1834798f4b9ea8.png)

如果`execUri`由大约 500 个字符组成，则正常响应。 ![在此处输入图像描述](../Images/80d59b8eb25f8ad3b17e73185475ea2e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T18:11:08.303

一些浏览器对 URI 实施了限制。请参阅[不同浏览器中 URL 的最大长度是多少？](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url). 如果可能的话，对于长 Uri（超过 2000 个字符），请考虑将此请求更改为 Post 而不是 GET 并将您的参数放入正文中。

# java - 重启应用程序hangman

> ID：12267645
> 
> 赞同：1
> 
> 时间：2012-09-04T16:24:46.513
> 
> 标签：java

我的刽子手应用程序中有一个重新启动按钮，但我不知道如何重新启动应用程序......有人可以通过给我正确的想法或指出正确的方向来帮助我吗？

```
public void actionPerformed(ActionEvent e){
    // Adds word to Words.txt
    if(e.getSource() == btnAddWord){
        try{
            FileWriter fw = new FileWriter("Words.txt", true);
            PrintWriter pw = new PrintWriter(fw, true);

            String word = JOptionPane.showInputDialog("Please enter a word: ");

            pw.println(word);
            pw.close();
        }
        catch(IOException ie){
            System.out.println("Error Thrown" + ie.getMessage());
        }
    }
    // Restarts game
    if(e.getSource() == btnRestart){

    }
    // brings up Help screen
    if(e.getSource() == btnHelp){
        String message = "The word to guess is represented by a row of dashes, giving the number of letters and category of the word."
               + "\nIf the guessing player suggests a letter which occurs in the word, the other player writes it in all its correct positions."
               + "\nIf the suggested letter does not occur in the word, the other player draws one element of the hangman diagram as a tally mark."
               + "\n"
               + "\nThe game is over when:"
               + "\nThe guessing player completes the word, or guesses the whole word correctly"
               + "\nThe other player completes the diagram";
       JOptionPane.showMessageDialog(null,message, "Help",JOptionPane.INFORMATION_MESSAGE);
    }
    //Exits application
    if(e.getSource() == btnExit){
        System.exit(0);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:27:52.580

快速而肮脏的方法是创建一个事件处理程序或方法，只需将所有相关变量重置为其初始值。

# php - PHPUnit：失败时跳过所有测试

> ID：12267646
> 
> 赞同：3
> 
> 时间：2012-09-04T16:24:46.467
> 
> 标签：php, phpunit

我的测试用例中的所有测试都取决于第一个测试通过。现在我知道我可以将 @depends 注释添加到其余的测试中，但是我正在寻找一种快捷方式来将注释添加到其他所有测试方法中。有没有办法告诉 PHPUnit，“如果这个测试失败，请跳过其余的测试”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T17:09:40.017

您可以将该特定测试添加到您的 setup() 方法中。这将使所有未通过此测试的测试都被跳过，例如

```
public function setup()
{
    $this->subjectUnderTest = new SubjectUnderTest;
    $this->assertPreconditionOrMarkTestSkipped();
}

public function assertPreconditionOrMarkTestSkipped()
{
    if ($someCondition === false) {
        $this->markTestSkipped('Precondition is not met');
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T18:51:48.857

与 Gordon 的回答类似，但没有将第一个测试移至`setUp`，类似的方法是在第一个测试中根据其成功/失败设置一个类级属性，并在`setUp`. 唯一的区别是第一个测试只执行一次，就像现在一样。

```
private static $firstPassed = null;

public function setup() {
    if (self::$firstPassed === false) {
        self::markTestSkipped();
    }
    else if (self::$firstPassed === null) {
        self::$firstPassed = false;
    }
}

public function testFirst() {
    ... the test ...
    self::$firstPassed = true;
} 
```

# javascript - 获取历史上最后 5 个网站的标题和 URL

> ID：12267651
> 
> 赞同：-3
> 
> 时间：2012-09-04T16:24:59.177
> 
> 标签：javascript, html

我希望包括一个小窗口，显示他们在我的网站上访问的最后 5 个页面。

首先，我希望它显示页面的标题和 URL，以便我可以将它们链接到它。如果我可以将这些过滤到一个单词或网站，那就太好了，因为我只想为我的网站服务。

**JavaScript**会对此有好处吗？它是否可以跨浏览器工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:35:46.090

如果您正在执行服务器端脚本，那么记录他们在您的网站上访问过的页面应该相当简单。可以使用 Javascript 和 cookie 来完成，但不一定非要那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:37:49.457

您只能向后看 1 页，即 document.referrer 但我不知道如何获得标题。

如果您正在监控自己的网站，您可以使用 localStorage 来存储最后 5 个页面，但如果您想监控其他网站，那么您不能在 Javascript 中执行此操作，如果您可以这样做，这将是一个隐私问题。

localStorage 是 HTML5，但它已经被主流浏览器支持。

# windows - 关于批处理文件（编程）

> ID：12267655
> 
> 赞同：-3
> 
> 时间：2012-09-04T16:25:06.253
> 
> 标签：windows, file, batch-file

我正在编写一个批处理文件，该文件逐个验证目录中的 .txt 文件，如果文件重复，则将此重复文件移动到另一个目录。谁能告诉我是否存在比这样做更快的方式？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:20:28.433

假设您的意思是要比较文本文件的内容，而不是名称：

```
@echo off
setlocal enabledelayedexpansion
for %%x in (*.txt) do for %%y in (*.txt) do (
  if "%%~x" neq "%%~y" (
    echo n | comp "%%~x" "%%~y"
    if !errorlecel!==0 (
      echo Duplicat found.
      set newDir=%%~nx_Duplicate
      if not exist "!newDir!" md "!newDir!"
      move "%%~y" "!newDir!"
    )
  )
) 
```

上面的代码将搜索每个文件的重复项并将它们放在一个名为 FILENAME_Duplicate 的目录中。因此，如果它比较`thisfile.txt`并`thatfile.txt`发现它们是重复的，它将移动`thatfile.txt`到一个名为`thisfile_Duplicate`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:55:23.000

Create checksums of all files with md5sum ([http://en.wikipedia.org/wiki/Md5sum](http://en.wikipedia.org/wiki/Md5sum)) and compare checksums instead of files. It'll be a lot faster.

# android - 带有 Viewpage 指示器的 Actionbarsherlock

> ID：12267660
> 
> 赞同：1
> 
> 时间：2012-09-04T16:25:30.020
> 
> 标签：android, themes, actionbarsherlock, viewpagerindicator

我有一个使用 Viewpagerindicator 的应用程序。我正在使用它的标签部分。我使用黑色背景和默认的蓝色指示器颜色。我想在我的应用程序中添加一个操作栏，所以我开始使用 Actionbarsherlock。为了让我的选项卡显示一个操作栏来显示我创建了我自己的它们，它在我的清单文件中调用。我创建的主题是这样的：

```
<?xml version="1.0" encoding="utf-8"?>

<resources xmlns:android="http://schemas.android.com/apk/res/android">
<!-- This is our main ActionBarSherlock theme -->
<style name="Theme.Styled" parent="Theme.Sherlock.Light.DarkActionBar">
</style>

<style name="Theme.VPI" parent="Theme.Styled">
      <item name="vpiTitlePageIndicatorStyle">@style/Widget.TitlePageIndicator</item>
      <item name="vpiTabPageIndicatorStyle">@style/Widget.TabPageIndicator</item>
      <item name="vpiTabTextStyle">@style/Widget.TabPageIndicator.Text</item>

</style>    

</resources> 
```

当我运行应用程序时，我的指示器颜色为蓝色，但整个应用程序的背景是白色的。

原来我是怎么里面的这段代码：

```
<style name="Theme.VPI" parent="Theme.Styled">
   <item name="vpiTabPageIndicatorStyle">@style/CustomTabPageIndicator</item>
</style> 
```

这给了我白色背景的红色指示器。我知道自定义选项卡是白色背景的红色，这就是我将其从 CustomTabPageIndicator 更改为 Widget.TabPageIndicator 的原因。但是，我仍然得到一个全白的背景。

我试图让我的布局在我的页面查看器中具有黑色背景，但是当我这样做时，我的按钮变得非常黑暗且不可读。

我的主要问题是找到可以更改 Viewpagerindicator 主题内部颜色的位置。

任何建议将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:11:07.567

> > 访问这个例子；[让 ActionBarSherlock 和 ViewPagerIndicator 玩得很好](http://droidista.blogspot.com/2012/08/making-actionbarsherlock-and.html)
> > 
> > 该示例中可能存在的错误；[Android - SupportMapFragment 与 GoogleMaps API 2.0 给出 IllegalArgumentException](https://stackoverflow.com/questions/14124354/android-supportmapfragment-with-google-map-api-2-0-giving-error/)
> > 
> > > > ### *祝你好运..！！*

# c# - 错误“未设置 ConnectAsUserName”但我什至没有使用该属性

> ID：12267667
> 
> 赞同：0
> 
> 时间：2012-09-04T16:26:04.750
> 
> 标签：c#, build-process, nant, smo

我在 [NAnt] 构建过程中使用 Microsoft.SqlServer.Smo.dll 版本 9.0.1399.0。我在 Windows Server 2008 R2 上运行。我同时连接到 Sql Server 2008 R2 (10.5) 和 Sql Server 2008 (10.0)。

我正在调整我们的一种项目类型的部署步骤，现在我所有部署 Sql 作业的构建（到 2008R2 10.5 服务器都抛出一个错误，提示“未设置 ConnectAsUserName”。

如果我指定凭据，则会收到错误消息“不支持此 Sql Server 版本 (10.5)”。

但是，如果我指定 Windows 身份验证，则会收到以下错误：“未设置 ConnectAsUserName”。

我不知道在哪里看，这是我正在使用的代码：

```
using System;
using System.Collections.Generic;
using Microsoft.SqlServer.Management.Smo;
using Microsoft.SqlServer.Management.Common;
using Microsoft.SqlServer.Management.Smo.Agent; 
```

...

```
public void Schedule(string sqlServer, string userName, string password)
{
    ServerConnection conn = new ServerConnection(sqlServer, userName, password);
    conn.LoginSecure = false;

    Server server = new Server(conn);
    Schedule(server);
}

public void Schedule(string sqlServer)
{
    ServerConnection conn = new ServerConnection(sqlServer);
    conn.ConnectAsUser = false;
    conn.LoginSecure = true;

    Server server = new Server(conn);
    Schedule(server);
}

public void Schedule(Server server)
{
    server.JobServer.Refresh();
    JobType.Refresh();

    foreach (JobType job in Items)
        job.Schedule(server);
} 
```

此外，这是错误的堆栈跟踪：

> 内部错误：未设置 Microsoft.SqlServer.Management.Common.PropertyNotSetException 属性 ConnectAsUserName。
> 
> 在 Microsoft.SqlServer.Management.Common.ConnectionManager.GetWindowsIdentityForConnection() 在 Microsoft.SqlServer.Management.Common.ConnectionManager.Connect() 在 Microsoft.SqlServer.Management.Common.ConnectionSettings.ThrowIfPropertyNotSet(String propertyName, String str, Boolean checkEmpty)
> 在 Microsoft.SqlServer.Management.Common.ConnectionManager.PoolConnect() 在 Microsoft.SqlServer.Management.Common.ConnectionManager.get_ServerVersion() 在 Microsoft.SqlServer.Management.Smo.ExecutionManager.GetServerVersion() 在 Microsoft.SqlServer.Management.Smo .SqlSmoObject.IsExpressSku()
> 在 Microsoft.SqlServer.Management.Smo.SqlSmoObject.CheckVersionNotExpress(String uft) 在 Microsoft.SqlServer.Management.Smo.Server.get_JobServer()
> 在 SqlSchedule.Jobs.Schedule(Server server) 在 SqlSchedule.Jobs.Schedule(String sqlServer) 在 NAnt.MVST.Tasks.ImportJobsTask.ExecuteTask(String xmlJobs) 在 NAnt.MVST.Tasks.ImportJobsTask.ExecuteTask() 在 NAnt.Core .Task.Execute() 在 NAnt.Core.TaskContainer.ExecuteChildTasks() 在 NAnt.Core.TaskContainer.ExecuteTask() 在 NAnt.Core.Task.Execute()
> 在 NAnt.Contrib.Tasks.TryCatchTask.ExecuteTask() 在 NAnt .Core.Task.Execute() 在 NAnt.Core.TaskContainer.ExecuteChildTasks() 在 NAnt.Core.Tasks.IfTask.ExecuteTask() 在 NAnt.Core.Task.Execute()
> 在 NAnt.Core.TaskContainer.ExecuteChildTasks()在 NAnt.Core.Tasks.IfTask.ExecuteTask() 在 NAnt.Core.Task.Execute()
> 在 NAnt.Core.TaskContainer.ExecuteChildTasks() 在 NAnt.Core.Tasks.IfTask.ExecuteTask() 在 NAnt.Core.Task.Execute()
> 在 NAnt.Core.Target.Execute() 在 NAnt.Core.Project.Execute (String targetName, Boolean forceDependencies) at NAnt.Core.Tasks.CallTask​​.ExecuteTask() at NAnt.Core.Task.Execute() at NAnt.Core.TaskContainer.ExecuteChildTasks() at NAnt.Core.Tasks.IfTask.ExecuteTask( ) 在 NAnt.Core.Task.Execute()
> 在 NAnt.Core.Target.Execute() 在 NAnt.Core.Project.Execute(String targetName, Boolean forceDependencies) 在 NAnt.Core.Tasks.CallTask​​.ExecuteTask() 在 NAnt .Core.Task.Execute() at NAnt.Core.Target.Execute() at NAnt.Core.Project.Execute(String targetName, Boolean forceDependencies) at NAnt.Core.Project.Execute() at NAnt.Core.Project。跑（）

此外，[MSDN 文档](http://technet.microsoft.com/en-us/library/microsoft.sqlserver.management.common.connectionsettings.connectasusername)指出，如果使用 Windows 身份验证，此属性将被忽略...

我在 stackoverflow 上找到[了这篇文章](https://stackoverflow.com/questions/1135636/how-to-connect-to-sqlserver2008-using-smo-any-workaround-has-to-be-done)，并且我已经完成了唯一答案中的所有内容（即使它不被接受）。有没有人有更多的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:22:38.030

起初，我完成了所有设置，就像[这篇文章](https://stackoverflow.com/questions/1135636/how-to-connect-to-sqlserver2008-using-smo-any-workaround-has-to-be-done)中的答案一样。但经过进一步调查，我发现我的一个程序集来自 90 文件夹而不是 100 文件夹。更改它解决了我的问题。

# bada - 了解三星应用商店的QA和发布流程

> ID：12267668
> 
> 赞同：1
> 
> 时间：2012-09-04T16:26:12.940
> 
> 标签：bada

我正在为 samsung bada 开发一个应用程序。参考帖子：[为自己的智能手机使用自行开发的 Bada 应用程序](https://stackoverflow.com/questions/11879508/using-self-developed-bada-application-for-own-smartphones)

它告诉： - 将应用程序上传到卖家网站；- 现在你可以下载了；

我在这里有两个问题：

1）从第二步到第三步需要多少时间？

2) 我可以避免在三星应用商店中发布我的应用吗？

我不希望任何人都可以下载它，但是重新生成清单不适合我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:48:19.023

1) APP上传认证后，一般需要5个工作日才能获批。一旦获得批准，它通常需要 1-2 个工作日才能出现在应用商店中供其他人下载。

2）正如您在上面提到的链接中提到的，您可以选择使用 TestKit 分发您的应用程序。这个过程是通过 Bada 开发者网站而不是卖家网站来管理的，所以如果你不希望它在应用商店中，你不应该上传到卖家网站。还有一个额外的选项可以让您的应用程序通过认证，当它准备好发布时，您可以请求在卖家网站中暂停应用程序，这样它就不会出现在应用程序商店中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:40:26.713

您无法提供安装应用程序的链接，您的客户应该在他的设备中安装测试套件应用程序，一旦安装了应用程序，它会为他的设备提供一个唯一的 ID，您必须在您的组件设置中添加此 ID bada 开发者账号，一旦添加，他会在他的应用程序列表中看到该应用程序，他无需通过三星应用程序就可以下载它，请参考下面的链接，它提供了所有详细信息:)

[http://developer.bada.com/article/Using-the-bada-Test-Kit](http://developer.bada.com/article/Using-the-bada-Test-Kit)

此致

# c - 在 Linux 中读取 USB 端口

> ID：12267674
> 
> 赞同：1
> 
> 时间：2012-09-04T16:26:45.917
> 
> 标签：c, linux, stream, usb, posix

我正在编写一个程序来从蓝牙 USB 加密狗读取数据。我使用的是 Linux，所以我怀疑可能有一个 POSIX 库可以从中读取，或者每个 USB 驱动器都有一个预定义的文件描述符。如何从 C 中的 USB 端口读取数据流？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:41:22.477

与随机 USB 设备交互的最常见方式是[libusb](https://libusb.info/)。这提供了对设备的低级访问，因此如果您想要更复杂的东西（例如，如果它是一个带有文件系统的实际 USB 驱动器），您可能希望使用设备的一些现有驱动程序而不是尝试交互直接用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:39:31.360

好的，给出上面的答案：几乎可以肯定，PS3 控制器是一个 HID 设备。您可以像与任何其他蓝牙 HID 设备一样配对它。配对后，它将自动显示为操纵杆（或鼠标或键盘，视情况而定），您无需任何软件。这个网站似乎有一个指南，但显然我没有测试过它：[http ://www.ydl.net/support/solutions/ydl_6.x/ps3_bluetooth_sixaxis.shtml](http://www.ydl.net/support/solutions/ydl_6.x/ps3_bluetooth_sixaxis.shtml)

# c# - 获取数组对象的类型

> ID：12267676
> 
> 赞同：1
> 
> 时间：2012-09-04T16:26:52.443
> 
> 标签：c#, system.reflection, system.array

> **可能重复：**
> [如何使用反射来确定数组的嵌套类型？](https://stackoverflow.com/questions/840878/how-do-i-use-reflection-to-determine-the-nested-type-of-an-array)

我有一个 A 类并试图在其中获取数组的基础类型。

```
Class A
{
   A1[] obja1;
   A2[] obja2;
   string x;
   int i;

} 
```

如何将 obj1 的底层对象类型作为 A1，将 obj2 的底层对象类型作为 A2？这是我拥有的代码的一部分：

```
 object AClass = myAssembly.CreateInstance("A");
    PropertyInfo[] pinfos = AClass.GetType().GetProperties();

    foreach(PropertyInfo pinfo in pinfos)
    {
       if(pinfo.PropertyType.IsArray)
       {
             //here get the the underlying property type so that I can do something as follows
             var arr = myAssembly.CreateInstance(typeof(A1), 100);
//need to get if the array is array of A1 or A2 but do not want to hardcode

        }
    }
Thanks for the help.. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:31:29.017

如果我的问题正确。您可以使用[Get Element Type](http://msdn.microsoft.com/en-us/library/system.type.getelementtype.aspx)来获取元素类型并将其与 required 进行比较。

或者

只需使用`typeof(A1[])`和`typeof(A2[])`

# zend-framework - 多数据库认证系统，我应该在哪里使用 Zend Framework 存储会话？

> ID：12267683
> 
> 赞同：0
> 
> 时间：2012-09-04T16:27:18.073
> 
> 标签：zend-framework, session, authentication, zend-auth

我正在使用 Zend 框架编写一个 ERM 应用程序，其中用户帐户在主要公司帐户下创建，使我能够根据公司支付的许可证限制公司的用户帐户数量。每个公司帐户在我的服务器上都有自己的数据库（与其他公司具有相同的结构）来存储与该公司相关的数据。每个公司数据库的名称与其他公司帐户信息和许可证密钥一起存储在我的“后端”数据库中。身份验证系统的工作原理如下：

1.  一个新用户（以前从未使用过该应用程序）登陆索引页面，并看到“公司帐号”的单个文本字段
2.  点击“提交”后，下一步是验证用户名和密码。当用户提交此表单时，所有三条信息（帐号、用户名和密码）都将发送到我的应用程序的身份验证处理程序。
3.  首先查询我存储公司帐户的“后端”数据库以查看用户输入的帐户是否存在。如果是，`company_db_name`则返回该列并建立连接，然后将其保存在`Zend_Registry`. 否则，认证失败。
4.  如果公司帐户确实存在，则返回的数据库将在其`users`表中查询指定的用户名和密码哈希，该哈希要么返回成功实例，要么返回`MyApp_Auth`凭据`false`不正确。

起初，我计划将用户会话数据存储在各个公司的数据库中，但是我在第一次登陆应用程序的索引页面时遇到了与该数据库没有连接的问题。我计划了一个解决方法，如下所示：

1.  将我的会话存储表从客户的数据库中移到我的“后端”数据库，该数据库在应用程序启动后立即建立连接。
2.  将“公司帐号”列添加到表中并索引该列。
3.  当用户登陆应用程序`index`页面时，可以在后端数据库中查询当前用户代理的`sessionid`. 如果找到，则返回所有必要的信息，即建立连接的公司数据库名称，以及用于建立模型的用户信息。

关于这种方法，我有几个问题：

**问题 1：将我的应用程序的每个用户的所有会话信息存储在单个后端数据库表中是否有任何风险？我在考虑成千上万的用户心态。**

**问题 2：我担心新用户可能会访问索引页面并且完全有可能（理解这是非常低的可能性，但仍有可能）与后端数据库中的现有会话具有相同的 session_id。这是一个有效的担忧吗？如果是，可以减轻吗？**

**问题 3：有没有更好的方法，或者您会推荐一种不同的方法来实现我所需的功能？**

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:45:39.460

回答你的3个问题：

**回答 1.**只要您在会话到期时将其删除，存储每个用户的会话信息就没有*风险。*这里的问题是“可扩展性”你使用什么方法？它的可扩展性是否足够？写/读速度是多少？MySQL 是“结构化”方法，就像 MSSQL。您需要什么处理时间？存储了多少信息？什么是建筑学。对您的客户来说是否足够可行？

**答案 2.**理想情况下 session_id 不会相同，因此您不必担心。

**答案 3.**您需要 NoSQL（不仅是 SQL，甚至更多）方法。[读这个](http://architects.dzone.com/articles/why-nosql-should-be-called-sql)

看看您的数据的海量，我强烈建议您选择[HBASE](http://hbase.apache.org/)（使用 Hadoop，易于多集群）或[CouchDB](http://couchdb.apache.org/)，或者如果您是 Amazon 粉丝[dynamoDB](http://aws.amazon.com/dynamodb/)。

问题？:)

编辑：刚刚意识到您正在使用 Zend Framework。在这种情况下，您也可以使用[MongoDB](http://www.mongodb.org/)并使用[Shanty Mongo](https://github.com/coen-hyde/Shanty-Mongo)库。

# c++ - OpenGL 库

> ID：12267684
> 
> 赞同：0
> 
> 时间：2012-09-04T16:27:20.740
> 
> 标签：c++, opengl

来自 OpenGL 维基：

“对于您熟悉的大多数库，您只需#include 一个头文件，确保将一个库链接到您的项目或 makefile，这一切都可以正常工作。OpenGL 不是这样工作的。”

我在 Windows 64 上工作，我需要 OpenGL 才能在 C++ 应用程序中使用它。我应该使用什么库？微软是否提供了它的实现（我使用 MinGW，我没有 MS Visual C++）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T16:30:39.500

您在机器上安装的 GPU 驱动程序附带的一个，Microsoft 还为 OpenGL 仿真提供了一个软件层，但它停留在 1.1 版，而且它真的很旧而且没用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T18:27:42.773

*我应该使用什么库？*

我建议使用[GLEW](http://glew.sourceforge.net/)来轻松访问 OpenGL 1.2 及更高版本的功能，使用[GLM](http://glm.g-truc.net/)进行数学，以及[这些图像加载库之一](http://www.opengl.org/wiki/Image_Libraries)。

*微软是否提供其实现（OpenGL）？*

Microsoft 为您提供了访问 OpenGL API 所需的头文件和库文件。但是，为了使用 1.2 及更高版本的 OpenGL 功能，您必须使用扩展。GLEW 隐含地为您执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T16:47:15.527

看看[glew](http://glew.sourceforge.net)。它加载所需的扩展和核心功能。

# eclipse-plugin - Eclipse 插件在 windows 上工作，但在 mac 上不工作

> ID：12267696
> 
> 赞同：0
> 
> 时间：2012-09-04T16:28:13.860
> 
> 标签：eclipse-plugin

我的插件存储为存档更新站点 (.zip)，并且在 Windows 上的 Indigo (3.7.1) 和 Juno (4.2) 中运行良好。但是，当尝试在 Mac OSX（在两台不同的机器上尝试）和新的 Juno 上运行它时，安装照常进行，插件似乎安装时没有错误，但插件功能均不可用（1 视图，主工具栏上的 2 个按钮）。

从终端启动 eclipse 只是给出警告`No binding table for org.eclipse.ui.contexts.dialog`，但经过一些研究，这似乎是 eclipse 4.2 的一个已知且无害的问题。

查看安装详细信息时，我的插件照常列出，只是缺少功能...

这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:49:44.593

为了弄清楚这一点，我在 Mac 上进行了一些调试，结果发现这是 JRE 版本的问题：我的插件要求 1.7，而 Mac 只安装了 1.6。但是仍然很奇怪 eclipse 在任何时候都没有对用户说一个字，即使它在`MANIFEST.MF`...

# asp.net-mvc - 混合 Razor 和 JavaScript

> ID：12267700
> 
> 赞同：1
> 
> 时间：2012-09-04T16:28:31.287
> 
> 标签：asp.net-mvc, razor

我正在尝试在 webgrid 中使用锚标记来调用 javascript 函数。我无法正确使用语法。这和我来的一样接近：

```
gridSpecs.Column(header: "", columnName: "", format: (item) => @:<a href="javascript:void(0);" onclick="DoSomeWork(@item.EquipmentId);">x</a>), 
```

但是，VS IDE 仍然抱怨缺少括号。我试过用`<text></text>`. 我也试过没有`a:`and 和`a:`（上面）。

我应该如何使用锚来调用我的 javascript 方法？

我什至尝试过 Html.ActionLink()，但这会调用服务器，我不想这样做：

```
@Html.ActionLink("x", null, new { id = item.Id }, new { onlick = "DoSomeWork();" }) 
```

如果有帮助，这里是整个 webgrid HTML：

```
<div class="webgrid-wrapper">
    <div id="grid">
        @gridSpecs.GetHtml(
            tableStyle: "webgrid",
            headerStyle: "webgrid-header",
            footerStyle: "webgrid-footer",
            alternatingRowStyle: "webgrid-alternating-rows",
            columns: gridSpecs.Columns(
                gridSpecs.Column(header: "", columnName: "", format: (item) => @:<a href="javascript:void(0);" onclick="DoSomeWork(@item.EquipmentId);">x</a>),
                gridSpecs.Column("Equipment.EquipmentId", "ID"),
                gridSpecs.Column("Equipment.Name", "Name"),
                gridSpecs.Column("Equipment.LegacyEquipmentId", "Legacy ID")))
    </div>
</div> 
```

**这是最终奏效的线路：**

（希望这有助于节省其他人两个小时......）

```
gridSpecs.Column(header: "", columnName: "",
    format: (spec) => MvcHtmlString.Create(string.Format("<a href='' onclick='DoSomeWork({0}); return false;'>x</a>", spec.Equipment.EquipmentId))), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:08:59.660

怀疑该行应该是：

```
gridSpecs.Column(header: "", columnName: "", format: (item) => string.Format("<a href=\"\" onclick=\"DoSomeWork({0}); return false;\">x</a>", item.EquipmentId)), 
```

您的方法不起作用，因为该行是 .net 代码，并且已经在剃刀上下文中。您只使用`@:`or`<text>`打破 Razor 上下文（即将该行的其余部分写到响应中），这在此处不合适。

很抱歉修改了您的逻辑，但我认为最好的做法是使用`string.Format`字符串插值，并避免在`href`属性中使用 javascript。

**更新 v2**（v1 不好 :)

我没有使用过 WebGrid，所以我没有意识到它会转义发送到`format`属性的 HTML。你可以试试这个：

```
gridSpecs.Column(header: "", columnName: "", format: (item) => MvcHtmlString.Create(string.Format("<a href=\"\" onclick=\"DoSomeWork({0}); return false;\">x</a>", item.EquipmentId))), 
```

# restkit - RestKit 不发送第二个请求

> ID：12267702
> 
> 赞同：0
> 
> 时间：2012-09-04T16:28:35.210
> 
> 标签：restkit

RestKit 不发送第二个请求我有一个简单的应用程序，有 1 个视图和 2 个按钮，当我第一次单击任何按钮时，按钮的标题是主机名（yandex.ru 和 localhost:3000），但如果我第二次单击任何它不发送它....我做错了什么？

下面是我的 ViewController 代码的一部分

```
- (IBAction)testRestkit:(UIButton *)sender
{
   RKClient *client =[RKClient clientWithBaseURLString:[NSString stringWithFormat:@"http://%@",sender.titleLabel.text]];
   client.cachePolicy = RKRequestCachePolicyNone;
   [client get:nil delegate:self];
}

- (void)requestWillPrepareForSend:(RKRequest *)request
 {
   NSLog(@"Preparing for request......");
 }

- (void)request:(RKRequest *)request didFailLoadWithError:(NSError *)error
{
   NSLog(@"%@",[error localizedDescription]);
}

- (void)request:(RKRequest *)request didLoadResponse:(RKResponse *)response
{
   if ([response isHTML]) {
     NSLog(@"Loaded html!");
   } else{
     NSLog(@"Loaded some response!"); 
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:49:25.417

我认为问题在于您第一次调用`clientWithBaseURLString:`时，`[RKClient sharedClient]`单例被初始化（并正确保留），因此后续调用确实有效。当您第二次调用代码时，便利构造函数返回一个自动释放的 RKClient 实例以及另一个基本 url。

在 RestKit 中处理多个基本 URL 的正确方法是管理两个单独的 RKClient 实例，例如

```
@property (nonatomic, retain) RKClient *localhostClient;
@property (nonatomic, retain) RKClient *remoteClient; 
```

并初始化它们，例如。在您的 init 方法中（或在您的方法中懒惰地）。

```
static NSString *kRemoteServerUrl = @"http://yandex.ru";
- (IBAction)testRestkit:(UIButton *)sender
{
   RKClient *client = nil;
   if ([sender.titleLabel.text isEqualToString:kRemoteServerUrl]) {
       if (!self.remoteClient) { 
          self.remoteClient = [RKClient clientWithBaseURLString:kRemoteServerUrl];
          client.cachePolicy = RKRequestCachePolicyNone;
       }
       [self.remoteClient get:nil delegate:self];
   } else if (.....)
....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:07:31.570

if i send request like code below . they works!!!! someone could explain difference between both methods???

```
- (IBAction)testRestkit:(UIButton *)sender 
{    
   NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://%@",sender.titleLabel.text]]; 
   RKRequest *theRequest = [[RKRequest alloc] initWithURL:url];
   theRequest.queue = [RKClient sharedClient].requestQueue;
   theRequest.delegate = self;
   [theRequest setMethod:RKRequestMethodGET];
   [theRequest send];
} 
```

# crystal-reports - 在 Crystal Reports 中比较记录

> ID：12267703
> 
> 赞同：0
> 
> 时间：2012-09-04T16:29:12.863
> 
> 标签：crystal-reports

因此，我想比较 Crystal Reports 中的一些记录，以解决我们系统中的错误导致的问题。

所以每隔一段时间，我们的系统就会向某人收取两次费用。我想找到所有这些订单/发货。一个订单可以有多个发货（如果我们有一件延期交货的商品，我们会在一次发货中将剩余的订单发货，然后在另一次发货中发货）。货件还有一个`charge_date`字段，即我们向客户收费时的日期时间戳。因此，如果我们将它分组到 Crystal 报表中，它将如下所示：

```
 Order Id: 234587
              Shipment Id: 121    charge_date: 8/29/2012 11:43:21
              Shipment Id: 524    charge_date: 9/1/2012 15:37:39 
```

货件按数字顺序创建。因此，如果我们发送一个货件，例如货件编号：345，那么我们发送的下一批货件，无论它属于哪个订单，都将是货件编号：346。

因此，当某人成为我们漏洞的受害者时，他们的货物将接踵而至，并且`charge_date`完全相同。像这样：

```
 Order Id: 69875
              Shipment Id: 594     charge_date: 9/2/2012 14:32:15
              Shipment Id: 595     charge_date: 9/2/2012 14:32:15 
```

我可以创建一个仅包含发货及其收费日期的列表（不按订单 ID 分组）并按升序对它们进行排序。但是我想要做的是遍历发货列表并将每个发货与上一个发货进行比较，看看`charge_date`它们是否相等，然后选择它们或标记它们或其他东西，以便我可以按公式对它们进行分组并照顾他们。

这在水晶中可能吗？我应该使用不同的程序吗？我意识到这可能不是最好的方法，所以我愿意接受建议。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:59:50.493

您可以为 orderID 和 chargeDate 创建组，然后禁止所有发货详细信息，除非 count(shipmentID) > 1？

您将在chargeDate 组页脚中显示货件详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:42:57.453

使用`Previous`功能：

```
// {@Is Error}
If Previous({table.chargeDate})={table.chargeDate}) Then
  true
Else
  false 
```

在此公式中插入一个组。

我无法对此进行测试，因为我不在我的工作计算机上。

# c# - 创建镜像有效应用程序的 Windows 控制台应用程序（恶意软件类）

> ID：12267711
> 
> 赞同：1
> 
> 时间：2012-09-04T16:29:57.853
> 
> 标签：c#, process, console

我正在教一堂课，并试图展示你不应该盲目地信任系统上的应用程序。

第一个演示是运行 netstat 并输出连接的套接字列表。我创建了另一个具有相同名称的应用程序，但它忽略了从显示器传递到 arg[0] 的 IP。控制台输出是一样的。目标是您可以拥有一个名为正确名称的文件，但不一定是合法的。（显然哈希不匹配）

下一个演示类似于任务列表，尽管我无法从 processes.GetProcesses 获取“会话名称”。如果我在演示机 (XP) 上运行 tasklist，我找不到与之关联的值。此外，是否有一种简单的方法来对列表进行排序，因为 tasklist 按 PID 排序。我是 C# 新手，所以请耐心等待。

谢谢！

```
Process[] procs = Process.GetProcesses();

foreach (Process proc in procs)
{
    Console.WriteLine(image.PadRight(17) + pid.PadLeft(5) + sname.PadRight(16) + mem.PadLeft(12));
} 
```

因此，目标是复制任务列表（基本功能）或另一个 Windows 命令行应用程序，以表明真正的恶意软件作者可以复制所有这些。

更新：所有学生都将在他们自己的 XP VM 上运行，所以我无法让他们真正连接到其他地方。在 XP 上也消除了 UAC 问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:27:09.807

您可以从 Process.Modules 列表（第一个元素）中获取图像名称，从 Process.Id 属性中获取 pid，以及从 Process.Working 集中获取内存；但是，您必须调用 WTSQuerySessionInformation 才能获取会话名称。例如：

```
foreach(Process p in Process.GetProcesses())
{
    IntPtr buffer;
    uint bytesReturned;
    WTSQuerySessionInformation(WTS_CURRENT_SERVER_HANDLE, (uint) p.SessionId, WTS_INFO_CLASS.WTSWinStationName, out buffer, out bytesReturned);
    var sessionName = Marshal.PtrToStringAnsi(buffer);
    WTSFreeMemory(buffer);
    string moduleName = p.ProcessName;
    try
    {
        moduleName = p.Modules[0].ModuleName;
    }
    catch(Exception ex)
    {
        ex = ex;
    }

    Console.WriteLine(String.Format("{0,-17} {1,5} {2,-16} {3,12} {4,12} K", moduleName, p.Id, sessionName, p.SessionId, (p.WorkingSet64 / 1024).ToString("n0")));
} 
```

假设在类中声明了以下内容：

```
enum WTS_INFO_CLASS
{
    WTSInitialProgram,
    WTSApplicationName,
    WTSWorkingDirectory,
    WTSOEMId,
    WTSSessionId,
    WTSUserName,
    WTSWinStationName,
    WTSDomainName,
    WTSConnectState,
    WTSClientBuildNumber,
    WTSClientName,
    WTSClientDirectory,
    WTSClientProductId,
    WTSClientHardwareId,
    WTSClientAddress,
    WTSClientDisplay,
    WTSClientProtocolType,
    WTSIdleTime,
    WTSLogonTime,
    WTSIncomingBytes,
    WTSOutgoingBytes,
    WTSIncomingFrames,
    WTSOutgoingFrames,
    WTSClientInfo,
    WTSSessionInfo
};

[DllImport("wtsapi32.dll", ExactSpelling = true, SetLastError = false)]
public static extern void WTSFreeMemory(IntPtr memory);
[DllImport("Wtsapi32.dll", SetLastError = true)]
static extern bool WTSQuerySessionInformation(
    IntPtr hServer,
    uint sessionId,
    WTS_INFO_CLASS wtsInfoClass,
    out IntPtr ppBuffer,
    out uint pBytesReturned
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:33:42.947

这是一种仅使用任何命令行应用程序并检查文本的方法（如果您愿意，可以对其进行修改）：

```
 var exeName = @"tasklist.exe";
    var arguments = "";

    var process = new Process
    {
        EnableRaisingEvents = true,
        StartInfo = new ProcessStartInfo(exeName)
        {
            Arguments = arguments,
            CreateNoWindow = true,
            UseShellExecute = false,
            WindowStyle = ProcessWindowStyle.Hidden,
            RedirectStandardError = true,
            RedirectStandardOutput = true,
        },
    };

    process.OutputDataReceived += 
       (sender, e) => Console.WriteLine("received output: {0}", e.Data);

    process.Start();
    process.BeginOutputReadLine();

    process.WaitForExit(); 
```

# javascript - 如何根据我选择的单选按钮选择列中的所有单元格（td 和 th）？

> ID：12267713
> 
> 赞同：0
> 
> 时间：2012-09-04T16:29:59.837
> 
> 标签：javascript, jquery, html-table, jquery-selectors

我在 HTML 中的一个例子：

```
<table id="testME">
   <tr>
      <td><input id="first" name="choices" type="radio" value="1"></td>
      <td><input id="second" name="choices" type="radio" value="2"></td>
      <td><input id="third" name="choices" type="radio" value="3"></td>
   </tr>
   <tr>
      <td><label for="first">My first selection</label></td>
      <td><label for="second">My second selection</label></td>
      <td><label for="third">My third selection</label></td>
   </tr>
   <tr>
      <td><input id="myWords" type="text" /></td>
      <td><select id="mySelects">
             <option value="30">Choice 1</option>
             <option value="31">Choice 2</option>
          </select>
      </td>
      <td><input id="multiOne" name="multiSelect" type="checkbox" value="one" />
          <label for="multiOne">One</label><br />
          <input id="multiTwo" name="multiSelect" type="checkbox" value="two" />
          <label for="multiTwo">Two</label><br />
          <input id="multiThree" name="multiSelect" type="checkbox" value="three" />
          <label for="multiThree">Three</label><br />
          <input id="multiFour" name="multiSelect" type="checkbox" value="four" />
          <label for="multiFour">Four</label><br />
      </td>
   </tr>
</table> 
```

我想要发生的是，当我单击单选按钮或其标签时，该列中的所有单元格（无论是 th 还是 td）都会以某种颜色突出显示。我想用 JQuery 来做这件事。

在发布这个问题之前我正在研究的内容：

```
<script>
function highlightSelection() {
        $('#testME > tr > td:nth-child(2)').css('background-color', 'gray');
    }
</script>
<input id="jquerytest" type="button" onclick="javascript:highlightSelection();" value="Change Color" />@:&nbsp; &nbsp; &nbsp; 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:33:47.227

像这样的东西：

```
$("table").on("click", "input", function() {
    var td = $(this).parent("td"),
        tdIndex = td.index();
    var tr = td.parent("tr"),
        trIndex = tr.index();

    $("table, table tr, table tr td").css("background", "none");

    $("td:eq(" + tdIndex + ")", "tr").css("background", "red");
    $("tr:eq(" + trIndex + ")").css("background", "blue");

});​ 
```

小提琴：http: [//jsfiddle.net/maniator/rZqdP/](http://jsfiddle.net/maniator/rZqdP/)

# c# - 在同一解决方案下从引用的项目中注册 ajaxtoolkit

> ID：12267716
> 
> 赞同：2
> 
> 时间：2012-09-04T16:30:15.757
> 
> 标签：c#, .net-assembly, solution

希望有人可以提供帮助。我们的情况是这样的：我们有一个包含多个项目的“主”解决方案。所有项目都是在 Visual Studio 2010 中使用 c# 在 4.0 框架下编写的。其中一个项目是扩展的用户控件对象。我们在解决方案中的每个其他项目中都使用这种扩展控制。我们这样做的方法是引用扩展的用户控件项目。现在我们的问题和问题的原因。

每个项目减去扩展的用户控件都使用 ajaxtoolkit。我们想从每个项目中删除所有单独的工具包文件，并且只将它放在扩展的用户控件项目中。你将如何实现这一目标？我一直卡在注册程序集上，但我可能会用它来找错树。

# ruby-on-rails - Rails 3 引擎应用程序控制器

> ID：12267717
> 
> 赞同：1
> 
> 时间：2012-09-04T16:30:16.600
> 
> 标签：ruby-on-rails, rails-engines

我有一个公开以下控制器的 Rails 引擎：

```
class ActsAsAssets::AssetsController < ApplicationController
.......... 
```

主应用程序使用设计进入ApplicationController。从我用来扩展引擎控制器的主应用程序中，通常如下所示：

```
class MainApplicationController < ActsAsAssets::AssetsController
....... 
```

我所关注的是 MainApplicationController 正在通过引擎扩展主应用程序 ApplicationController。请注意，引擎没有任何 ApplicationController 所以我期待 ActsAsAssets::AssetsController < ApplicationController 实际扩展使用引擎的 rails 应用程序的 ApplicationController。

看来我错了。

有什么建议吗？基本上我想要实现的是，我的主应用程序中的控制器扩展了一个 Rails 引擎控制器，该控制器扩展了主 ApplicationController 原因在引擎内部没有一个。

希望很清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T18:06:19.337

将声明更改为如下所示：

```
class ActsAsAssets::AssetsController < ::ApplicationController 
```

`ApplicationController`这指示控制器从主应用程序扩展非​​命名空间。

# networking - 从哪里开始 TCP 通信？

> ID：12267719
> 
> 赞同：0
> 
> 时间：2012-09-04T16:30:23.720
> 
> 标签：networking, tcp

我正准备尝试我的第一个涉及网络通信的项目。这只是一个以自学为目的的修补玩具应用程序 - 这里没有任何关键任务。我需要两个节点来相互通信。一个是 Android 平台，所以我将使用 Java。另一个节点是运行 Debian Linux 的 RaspberryPi。虽然我也可以在这方面使用 Java 并且可能只使用 RPC，但我想做的是开发我自己的与实现无关的 TCP/IP“协议”，以便两者进行通信，并让每个实现它但是可以工作最好的。我所说的“协议”的意思是我希望来回传递一组标准的消息，以及每个消息的一些值。例如：

```
"Protocol" Definition:
MESSAGE TYPE A (Float arg, Int arg)
MESSAGE TYPE B (Int arg)
MESSAGE TYPE C (Int arg, String arg, Int arg) 
```

一个示例“对话”：

```
Node 1                              Node 2
              A(5.4, 4)    --->
              B(6)         --->
        <---- C(3, 'Hello', 0xFF)
              B(5)         --->
        <---- A(43.0, 16) 
```

所以我的问题是：

（1）以上是否有意义？我需要澄清我的意图吗？提供更多信息？这是我第一次尝试在两个正在运行的程序之间进行网络通信，所以我的要求可能有点偏离基础。如果我以错误的方式处理这个问题，我很乐意提供更好的建议。

（2）我该怎么做？我是否只是将一个长字符串塞入 TCP 数据包中？有没有更好的办法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:36:13.340

你只需要用你想要的数据填充一个缓冲区，然后学习如何通过 TCP 套接字打开和发送数据。内核将处理如何安排有效负载以及如何控制 TCP 流。在服务器端，您必须学习如何侦听 TCP 套接字并读取传入数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T07:23:48.427

套接字编程是您应该搜索的词。

# asp.net - 如何从我的 URL 中删除 ASP.NET 会话 ID？

> ID：12267721
> 
> 赞同：6
> 
> 时间：2012-09-04T16:30:27.213
> 
> 标签：asp.net, url, cookies

如何从我的 URL 中删除标识符？

在这个示例 URL 中我只需要`index.aspx`，如何删除`(S(w0uz0245gtucb3am0k5w5g55))`？

> http://www.example.com/(S(w0uz0245gtucb3am0k5w5g55))/index.aspx

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T16:40:36.810

您的网络服务器正在重写您的 url 以包含会话状态，因为您已将站点配置为不使用 cookie。

如果您查看您网站的`web.config`文件，您可能会发现这一行：

```
<sessionState cookieless="true" /> 
```

如果您将值更改为“false”，如果将解决您的问题（或完全删除该行 - 默认值为 false）

可以在[此处](http://msdn.microsoft.com/en-us/library/aa479314.aspx)和[此处](http://msdn.microsoft.com/en-us/library/h6bb9cz9%28v=vs.71%29.aspx)找到有关此配置的更多信息。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-08-23T16:50:25.170

您可以将整个应用程序包装在 iFrame 中。没有人会看到长 URL。

# ruby-on-rails - 打印需要时间来启动

> ID：12267723
> 
> 赞同：0
> 
> 时间：2012-09-04T16:30:35.447
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-1.9.3

如何打印文件的所需时间，以便调试缓慢的应用程序启动时间。

我设想这样的事情：

```
$ rails s
$ app/models/user.rb took 300 milliseconds
$ ...
$ lib/connect.rb took 5000 milliseconds 
```

我是否必须覆盖`Kernel#require`，如果是这样，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:50:34.953

```
# ACK:
# modified from
# http://gist.github.com/264496 by github.com/eric
# http://gist.github.com/465293 by github.com/alexyoung

# USAGE:
# 1) > ruby -rrequire_tracking -e "require 'active_support'"
# 2) put in config/preinitializer.rb

# WHAT: Provides a simple overview of memory allocation occuring
# during a require.
#
# For a longer explanation, see post at:
# http://bitmonkey.net/post/308322913/tracking-initial-memory-usage-by-file-in-ruby
#
# NOTE: The numbers provided are of self + children, meaning the same will
# be attributed to multiple files at once.
#
# Also, memory that is no longer referenced (and would be freed) is
# still taken into account.
#
# It is intended to give a simple overview of allocations to track
# down gross offenders, not give an exact view of your memory usage.

require 'benchmark'

if GC.respond_to?(:enable_stats)
  module RequireTracking
    def require(*args)
      start_allocated_size = GC.allocated_size

      output = nil
      benchmark = Benchmark.realtime do #Benchmark.measure
        output = super
      end
      benchmark = (benchmark * 100000).to_i

      first_caller = caller[0][40..-1].split(':')[0]
      $my_require_stats << [args[0], benchmark, first_caller, (GC.allocated_size - start_allocated_size)]
    end #def
  end #module
else
  module RequireTracking
    def require(*args)
      output = nil
      benchmark = Benchmark.realtime do #Benchmark.measure
        output = super
      end
      benchmark = (benchmark * 1000_00).to_i

      first_caller = caller[0][40..-1].split(':')[0]
      $my_require_stats << [path, benchmark, first_caller, 'NA']
    end #def
  end #module
  puts "Warning: Not running with an interpreter with GC statistics"
end #if

module RequireTracking
  $my_require_stats ||= []
  $require_stats_top ||= 20

  def numeric_thousands_indicators(number)
    number.to_s.gsub(/(\d)(?=\d{3}+(?:\.|$))(\d{3}\..*)?/,'\1,\2')
  end

  def dump_require_benchmark_stats
    File.open('require_trace.log.csv', 'w') do |out|
      out << "\"path\",\"benchmark\",\"caller\",\"mem\"\n"
      $my_require_stats.each do |path, benchmark, caller, mem|
        out << "\"#{path}\",\"#{benchmark}\",\"#{caller}\",\"#{mem}\"\n"
      end
    end
  end

  def print_require_benchmark_stats_by_memory
    puts " %40s %5s %5s " % [ 'File', 'KB', 'NanoSec' ]
    puts " %40s %s" % [ '-------------', '--------' ]
    $my_require_stats.sort_by {|v| v[3] }.slice(0, $require_stats_top).each do |path, benchmark, caller, mem|
      puts "%40s %5s %5s " % [ path, numeric_thousands_indicators(mem / 1024), benchmark ]
    end
  end

  def print_require_benchmark_stats_by_time
    puts " %40s %5s %5s " % [ 'File', 'KB', 'NanoSec' ]
    puts " %40s %s" % [ '-------------', '--------' ]
    $my_require_stats.sort_by {|v| v[1] }.slice(0, $require_stats_top).each do |path, benchmark, caller, mem|
      puts "%40s %5s %5s " % [ path, numeric_thousands_indicators(mem / 1024), benchmark ]
    end
  end
end #module

Object.send(:include, RequireTracking)
Kernel.send(:include, RequireTracking)

if GC.respond_to?(:enable_stats)
  GC.enable_stats
  GC.clear_stats
end

at_exit do
  dump_require_benchmark_stats
  puts "Memory used by file:"
  print_require_benchmark_stats_by_memory
  puts "Time required by file:"
  print_require_benchmark_stats_by_time
end 
```

# c# - 绑定到用户属性时更新数据源

> ID：12267725
> 
> 赞同：0
> 
> 时间：2012-09-04T16:30:46.497
> 
> 标签：c#, winforms, data-binding, binding, user-controls

*C#，VS-2010，winforms*

通常，我想使用可绑定的 MyProperty 创建用户控件。但是我遇到了一些问题：当前行更改时数据行被修改。

您可以下载 C# 项目并自己尝试： [test_bind.zip](https://www.dropbox.com/sh/eu42liyc0t426ta/Kp51bGDiN2/test_bind.zip)

为了简单起见，我确实遵循了：

1.  使用

    *   dataGridView（设置为只读），
    *   文本框，
    *   一些带有一些表的类型化数据集
    *   绑定源
2.  将 bindingSource 绑定到表
3.  将 dgv 绑定到 bindingSource
4.  将 TextBox.Text 绑定到 bindingSource 到某个文本列（“名称”）
5.  在带有一些数据的表单加载填充表上。（如果您手动添加行，请不要忘记 AcceptChanges()）
6.  为表 xxx_ColumnChanging(...) 添加事件处理程序并在那里设置断点

所有标准步骤，没什么特别的

**跑**

正如预期的那样 - dgv 中的行，文本框中的当前名称，单击网格中的不同行......并且只有当我修改文本框中的文本时，我才会在断点处停止。

让我们修改程序，并将 textBox 绑定到不同的属性而不是 Text - 让我们说**Tag**。设置 DataSourceUpdateProperty“ **OnValidation** ”或“ **OnPropertyChanged** ”。

**跑**

现在当前行**被修改。！！！**

当我使用带有虚拟属性的 UserControl 而不是 textBox 时，也会发生同样的情况

**字符串 MyProperty { 设置；得到; }**

如何将用户控件中的自定义属性绑定到与**TextBox.Text 相同的行为？**

*注意：* 绑定属性本身不是问题。问题是：当我绑定到标准 TextBox.Text 属性时 - 一切都好文我绑定到任何其他属性（标签）或用户控件中的自定义属性 - 然后 DATASOURCE 总是为当前行修改

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:13:35.443

简短的回答是：

当绑定到简单属性时，声明为

```
[Bindable(true, BindingDirection.TwoWay)]           //  I need TwoWay    
public String MyProp {set;get;} 
```

然后数据源将根据当前位置变化进行更新。您可以将其视为错误或功能...

改变行为——我需要神奇的词。将控件中的事件声明为

```
 public event System.ComponentModel.PropertyChangedEventHandler MyPropChanged; 
```

这个名字很特别：***“YourPropertyName”+“Changed”* =YourPropertyNameChanged** 其他词不会变魔术。一旦事件声明 - 数据源不会像以前那样每次都更新......

现在我可以控制这个过程......

```
public void OnMyPropChanged(System.ComponentModel.PropertyChangedEventArgs e)
{
    Binding bb = this.DataBindings[0] as Binding;
    bb.WriteValue();
    if (MyPropChanged != null) MyPropChanged(this, e);
}

private void TxtChanged(object sender, EventArgs e)
{
    if (load) { return; }
    _my_prop = Txt.Text;   // ...
    OnValueTwoChanged(new PropertyChangedEventArgs("MyProp"));
} 
```

这是具有更多详细信息的示例项目，其中我使用字符串属性**ValueTwo**创建用户控件， 该控件使用一些自定义逻辑拆分为两个不同的 TextBox，并在用户更改文本时组合值和更新。

[test_bind_fixed.zip](https://www.dropbox.com/sh/eu42liyc0t426ta/ZMEsr_nhJA/test_bind_fixed.zip)

这是帮助我的文章 [http://support.microsoft.com/kb/327413](http://support.microsoft.com/kb/327413)

# java - Java：扫描仪未扫描完整行

> ID：12267727
> 
> 赞同：0
> 
> 时间：2012-09-04T16:30:54.623
> 
> 标签：java, java.util.scanner

我有以下文本文件（不是 java 文件）

```
/*START OF CHANGES TO CODE*/
public class method1 {

    public static int addTwoNumbers(int one, int two){
        return one+two;
    }

    public static void main (String[] args){
        int total = addTwoNumbers(1, 3);
        System.out.println(total);
    }
}
/*END OF CHANGES TO CODE*/ 
```

我正在尝试使用以下代码来读取文件

```
String editedSection = null;
boolean containSection = false;
Scanner in = new Scanner(new FileReader(directoryToAddFile));
while(in.hasNextLine()) {
    if(in.nextLine().contains("/*START OF CHANGES TO CODE*/")) {
        containSection = true;
        editedSection = in.nextLine().toString();
    } else if (containSection == true) {
        editedSection = editedSection+in.nextLine().toString();
    } else if (in.nextLine().contains("/*END OF CHANGES TO CODE*/")) {
        containSection = false;
        editedSection = in.nextLine().toString();
    }
    in.nextLine();
} 
```

所以基本上我想要它做的是读取一个文件直到它看到`/*START OF CHANGES TO CODE*/`，然后开始将它之后的每一行添加到一个字符串直到它到达`/*END OD CHANGES TO CODE*/`。但是当它读取行时，它会忽略一些行和其他部分。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T16:32:41.093

你在那个循环中调用`in.nextLine()` *了很多*次。`while`这听起来对我来说是一个非常糟糕的主意。每次迭代将执行多少次取决于它进入了哪些位......讨厌。

我建议你使用

```
while(in.hasNextLine()) {
    String line = in.nextLine();
    // Now use line for the whole of the loop body
} 
```

这样，您就不会为了检查目的而阅读它们而意外跳过行。

# php - 从 PHP 运行 Ant build.xml

> ID：12267730
> 
> 赞同：0
> 
> 时间：2012-09-04T16:31:06.490
> 
> 标签：php, ant, mediawiki

是否可以从 PHP 或网页运行 Ant 的 build.xml？
有时 BA 想要进行构建和部署，我想通过 MediaWiki 页面提供它。Mediawiki 在 Windows XAMPP 上运行。
是否有任何 MediaWiki 插件或任何更好的解决方案？
下线我也想传递一些 build.xml 变量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T16:40:32.980

PHP 的 shell_exec() 函数可用于在 shell 中调用命令。因此，您可以编写一个简单的 shell 脚本，cd 到正确的目录，设置任何环境变量并触发构建，然后从 PHP 调用它：

**do_build.sh**（位于/home/user/bin/do_build.sh）

```
cd /path/to/build/dir
# Set any environment variables here
export MYVAR=somevalue
ant build 
```

**myscript.php**（通过网页调用）

```
<?php
shell_exec("/home/user/bin/do_build.sh");
?> 
```

更新：既然你说你在 Windows 上，这里是 Windows 等效的，使用批处理文件：

**do_build.bat**（位于 C:\do_build.bat 中）

```
cd "C:\path\to\build\dir"
REM Set any environment variables here
set MYVAR=somevalue
ant build 
```

myscript.php（通过网页调用）

```
<?php
shell_exec("C:\\do_build.bat");
?> 
```

# javascript - 对 jQuery bxSlider 插件自动生成的第一个 li 元素应用左边框

> ID：12267731
> 
> 赞同：0
> 
> 时间：2012-09-04T16:31:07.993
> 
> 标签：javascript, jquery, css, bxslider

我正在寻找一种方法来在第一个上应用一个左边框`li` *，*它是由 jQuery bxSlider 插件生成的，它是“活动的”，即有一个`pager`. 这是 bxSlider 插件生成的输出：

```
<div class="bx-window" style="position:relative; overflow:hidden; width:969px;">
    <ul id="carousel_items" style="width: 999999px; position: relative; left: -323px;">
        <li style="width: 304px; float: left; list-style: none outside none; opacity: 1;">CONTENT IN HERE</li>
        <li class="pager" style="width: 304px; float: left; list-style: none outside none; opacity: 1;">CONTENT IN HERE</li>
        <!-- other LIs in here -->
    </ul>
</div> 
```

我不想在所有元素上应用 1px 左边框，因为这会导致连接元素的边框为 2 像素，因为我也有 1 像素的右边框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:37:43.253

```
#carousel_items.li:first-child { border-left:1px solid red; } 
```

# jquery - 使用 jquery 显示功能不会在 Firefox 中打开弹出窗口

> ID：12267734
> 
> 赞同：0
> 
> 时间：2012-09-04T16:31:14.620
> 
> 标签：jquery

下面的 open 函数采用一个 div 元素添加一个类“showModal”，然后显示弹出窗口。此代码在 chrome 和 IE 浏览器中运行良好，但在 Firefox 中，弹出窗口不会在页面加载时显示。但是当我在 open 函数中的行中添加断点时，弹出窗口会显示在 Firefox 中。jquery show 函数在 firefox 中是否存在一些已知问题

```
 Plugin.prototype = {

    open: function(element) {
            var $newEl = $(element).clone(true);
            var $contain = $mWrap.find('#SNIModal_Content').empty();
            $newEl = $newEl.appendTo($contain);
            $mWrap.addClass('showModal').show();
            return $newEl[0];
    }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T03:31:43.147

找出问题的原因，该元素具有样式显示：CSS 中没有，并且启用使用`show()`在 Firefox 中不起作用。修复方法是删除 CSS 上的 display:none 或使用`.css('display', 'block')`而不是`show()`.

# ruby - 在 ruby 脚本中使用 grep

> ID：12267739
> 
> 赞同：0
> 
> 时间：2012-09-04T16:31:29.237
> 
> 标签：ruby, bash, grep

我有一个简单的脚本，它可以抓取网页并将内容行放到屏幕上，然后我只需将其通过管道传输到 grep 以输出我想要的内容，然后将其传输到更少。

```
myscript.rb scrape-term | grep argument | less 
```

我将脚本更改为使用以下内容，而不是在命令行上使用额外的参数；

```
%x[ #{my-text-output} | grep argument | less ] 
```

但现在我得到了错误；

```
sh: 0: command not found 
```

我已经尝试过[这里](https://stackoverflow.com/questions/2232/calling-bash-commands-from-ruby)发现的其他变体，但没有任何效果！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:40:39.253

你需要做的是打开一个手柄`grep`，而不是把输出卡在那里。hack 解决方案是将您的输出转储到一个 Tempfile 中并从中读取，`grep`但实际上那是一团糟。

理想情况下，您所做的只是通过过滤发出与您的模式匹配的输出：

```
while (...)
  # ...

  if (output.match(/#{argument}/))
    puts argument
  end
end 
```

`less`然后，如果需要，可以将其引导至。

请记住，Ruby 内部还有一个`grep`用于数组中任何内容的方法。例如，如果您创建了一个数组`output`，其中包含以下行：

```
output.grep(/#{argument}/).each do |line|
  puts line
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-04T16:46:09.833

既然你无论如何都要在shell中运行它，因为有一个`less`命令，那么也许试试这个：

```
%x[ echo #{my-text-output} | grep argument | less ] 
```

您也可以尝试`echo -e`将显示`\n`为换行符等。

*（理想情况下，您的文本应该已经`\n`在每行的末尾有一个字符。）*

**编辑：**

忘`""`了变量。没有更多的`Unknown Command`错误，虽然`less`不想和我一起工作。我现在有这个 script.rb：

```
text = "foo
foobar
foobaraski
bar
barski"

a = %x[ echo "#{text}" | grep foo]

print a 
```

它给了我：

```
shell> ruby script.rb 
foo
foobar
foobaraski 
```

**编辑2：**

现在它起作用了：

```
text = "foo
foobar
foobaraski
bar
barski"
system "echo '#{text}' | grep foo | less" 
```

就像 bash 命令一样，用三行打开 less。

# java - 将 Richfaces 从 4.0.2 更新到 4.2.2 会破坏 Web 应用程序部署

> ID：12267740
> 
> 赞同：2
> 
> 时间：2012-09-04T16:31:30.430
> 
> 标签：java, jsf, richfaces, glassfish-3, netbeans-7

一个现有且正在运行的 Netbeans v7.0 项目将其 4 个 Richfaces jar 替换为较新的版本，之后该项目已成功清理和构建，glassfish 服务器已停止，Web 应用程序部署失败。以下是记录的错误亮点：

netbean“Glassfish Server 3.1”选项卡：

```
...
INFO: WELD-000900 ${parsedVersion (osgiVersion})
SEVERE: Exception while loading the app
SEVERE: Exception while shutting down application container
SEVERE: Exception while shutting down application container : java.lang.NullPointerException 
```

netbean 项目名称“(run-deploy)”选项卡：

```
...
Initializing...
deploy?DEFAULT=[path-to-project]/build/web&name=MisThirdPartyUpdate&force=true failed on Glasfish Server 3.1
 Error occurred during deployment: Exception while shutting down application container : java.lang.NullPointerException. Please see server.log for more details.
[path-to-project]/nbproject/build-impl.xml:782:
The module has not been deployed.
  at org.netbeans.modules.j2ee.deployment.devmodules.api.Deployment.deploy(Deployment.java:187)
  at org.netbeans.modules.j2ee.ant.Deploy.execution(Deploy.java:106)
  ...[14 more levels]
BUILD FAILED (total time: 23 seconds) 
```

server.log 文件：

```
...
SEVERE|glassfish3.1|javax.enterprise.system.core.com.sun.enterprise.v3.server|_ThreadID=36;_ThreadName=Thread-1;|Exception while loading the app[#]
SEVERE|glassfish3.1|javax.enterprise.system.tools.admon.org.glassfish.deployment.admin|_ThreadID=36;_ThreadName=Thread-1;|Exception while shutting down application container[#]
SEVERE|glassfish3.1|javax.enterprise.system.tools.admon.org.glassfish.deployment.admin|_ThreadID=36;_ThreadName=Thread-1;|Exception while shutting down application container : java.lang.NullPointerException[#] 
```

现在这是奇怪的部分，如果我替换 4 个richfaces jar 文件中的某个 1 个，项目部署和运行完美。也就是说，我用richfaces-core-impl-4.0.0.Final.jar替换了richfaces-core-impl-4.2.2.Final.jar，即我有3个来自4.2.2的jar和1个来自4.0.0的jar。正如我之前所说，如果我在构建路径中有所有 4 个 Richfaces 4.0.0 jar，该项目也将完美地部署和运行。

以下是无法部署时此项目构建路径中 jar 的详尽有序列表：

```
tomahawk-1.1.8.jar
annotations-4.2.1.Final.jar
log4j-1.2.17.jar
cssparser-0.9.5.jar
guava-11.0.2.jar
hibernate-validator-3.0.0.ga.jar
sac-1.3.jar
richfaces-components-api-4.2.2.Final.jar
richfaces-components-ui-4.2.2.Final.jar
richfaces-core-api-4.2.2.Final.jar
richfaces-core-impl-4.2.2.Final.jar
validation-api-1.0.0.GA.jar
primefaces-3.3.jar
hibernate3.jar
mail.jar
poi-3.2-FINAL-20081019.jar
poi-contrib-3.2-FINAL-20081019.jar
poi-scratchpad-3.2-FINAL-20081019.jar
iText-5.0.4.jar
resolver.jar
xbean.jar
xbean_xpath.jar
xmlbeans-qname.jar
xmlpublic.jar
dom4j-1.6.1.jar
commons-logging-1.1.1.jar
commons-collections-3.2.1.jar
antlr-2.7.6rc1.jar
commons-el-1.0.jar 
```

我正在使用 java 版本 1.6.0_33。

在没有堆栈跟踪的类似错误报告[“加载应用程序时出现异常”中](https://stackoverflow.com/questions/7195243/exception-while-loading-the-app-without-a-stack-trace)，我确保两个 beans.xml 文件的长度都为零。此外，根据这份报告以及[http://www.wobblycogs.co.uk/index.php/computing/jee/53-glassfish-31-exception-while-loading](http://www.wobblycogs.co.uk/index.php/computing/jee/53-glassfish-31-exception-while-loading)，我确保我所有的豆子都带有“@ SessionScope”实现了可序列化。

对我来说，它将与其中一个richfaces jar 的旧版本一起运行这一事实应该是一个很大的线索。

有人有想法么？？？

# bash - bash没有将当前日期添加到文件名

> ID：12267742
> 
> 赞同：1
> 
> 时间：2012-09-04T16:31:59.533
> 
> 标签：bash, scripting

我有一个 bash 脚本，它通过 crontab 每 10 分钟备份我的源代码。脚本一直工作到八月底。从 9 月 1 日起，它就没有工作了。这是脚本：

```
#!/bin/sh
date=`date +%e-%m-%y`
cd /home/neky/python
tar -zcf lex.tar.gz lex/
echo $date

mv lex.tar.gz lex-$date.tar.gz
mv lex-$date.tar.gz /home/neky/Dropbox/lex/lex-$date.tar.gz 
```

如果我手动执行它，它会打印当前日期`4-09-12`，并且这个错误`mv: target ‘4-09-12.tar.gz’ is not a directory`

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:37:17.077

当月份的日期是一位数时，您`date`包含一个空格（这也解释了为什么它只在新月份停止工作）。这导致您的命令被拆分，即

```
# this is what it you end up with
mv lex.tar.gz lex- 4-09-12.tar.gz 
```

使用`date +%d-%m-%y`instead 这会给你`04-09-12`（注意`%d`，而不是`%e`）。

* * *

如果您真的想要名称中的空格，则需要引用您的变量，即：

```
mv lex.tar.gz "lex-$date.tar.gz"
mv "lex-$date.tar.gz" /home/neky/Dropbox/lex/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:36:45.337

该字符`%`（您的日期格式的一部分）是 cron 脚本中的一个特殊字符，因此您需要对其进行转义。

# php - 与 jquery 滑块一起使用的 Onchange 事件

> ID：12267746
> 
> 赞同：2
> 
> 时间：2012-09-04T16:32:12.277
> 
> 标签：php, javascript, jquery, html

我正在使用一个 jquery 滑块插件，当它被操作时，它会将值写入 linux 文件。

Slider 控制一个文本输入框。该框是只读的，因此它总是模糊的。我无法理解的问题是为什么 onchange 命令不起作用。如果我删除输入命令上的只读属性，我会遇到同样的问题。

我知道我的 javascript 函数有效，因为我可以更改文本输入框的值并按回车键，它会更新。但是我需要它做的是在滑块改变它时更新数字，所以我不能使用 keyup 或 keydown 命令，因为滑块控制它，而不是用户的输入。

```
<script type="text/javascript">

$(document).ready(function() {

    $( "#LeftRecordSlider" ).slider({

        range: "min",

        orientation: "vertical",

        value: 50,

        min: 0,

        max: 100,

        slide: function( event, ui ) {

            $( "#LeftRecordAmount" ).val( ui.value );

        }

    });

    $( "#LeftRecordAmount" ).val( $( "#LeftRecordSlider" ).slider( "value" ) );

});

</script>

<script type="text/javascript">

    function ChangeVolume(volumetype,volumelevel)
        {
            var xmlhttp;
            if (window.XMLHttpRequest)
            {//IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            }
            else
            {//IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                document.getElementById("VolumeOutput").innerHTML=xmlhttp.responseText;
                }
            }
            xmlhttp.open("GET","ChangeVolume.php?volumetype="+volumetype+"&volumelevel="+volumelevel,true);
            xmlhttp.send();
        };

</script>

<label for="LeftRecordAmount">Left Record Volume:</label>

<input type="text" onchange="ChangeVolume('LeftRecord',this.value)" id="LeftRecordAmount" style="border:0; width:3em; color:#0080ff; font-weight:bold;" readonly/>

<div id="VolumeOutput"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:39:54.267

尝试显式调用事件或方法。遵循以下方法

```
$( "#LeftRecordSlider" ).slider({
    range: "min",
    orientation: "vertical",
    value: 50,
    min: 0,
    max: 100,
    slide: function(event, ui) {
        $("#LeftRecordAmount").val( ui.value );
    },
    stop : function(event, ui){
        eval($("#LeftRecordAmount").attr("onchange")); // first approach
        ChangeVolume('LeftRecord',ui.value) // second approach
    }

}); 
```

使用其中任何一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:58:24.160

神圣的空白蝙蝠侠希望您的代码实际上并不喜欢您不断增加的解析时间。另外我不明白为什么你不使用 jQuery 库中包含的 Ajax 方法，为什么在它已经支持回 IE6 时重新发明轮子。另一件事 Java 和 JavaScript 是两个完全不同的东西，请不要引用它们相同的东西。至于只读文本框，为什么不直接使用 disabled 属性，它的效果会更好。这也可能是一种更好的方法。

```
 var control = document.getElementById("LeftRecordAmount");
  control.addEventListener("change", function(){
      //do whatever here
  }
  //vanilla javascript runs faster than jQuery you can even test with console.time() profiler and        jsperf.com
  //inline handlers are also bad here's why 
```

[http://www.onlinetools.org/articles/unobtrusivejavascript/chapter4.html](http://www.onlinetools.org/articles/unobtrusivejavascript/chapter4.html)

# c# - SqlDataAdapter.Fill 命令使 SQL CPU 达到峰值

> ID：12267749
> 
> 赞同：2
> 
> 时间：2012-09-04T16:32:28.337
> 
> 标签：c#, database, sqldataadapter

我注意到一些将 SQL 数据导入 ac# 应用程序的特殊行为。我使用了数据集 xsd，但这开始超时。然后我改变了我的方法，因为我已经有一个类可以为我尝试过的其他操作生成并返回一个数据表。这也超时了。

我在 SSMS 中打开了活动监视器，以了解代码运行时 SQL 中发生了什么，并注意到无论我以哪种方式运行它，填充命令都会导致 SQL Sever 达到 100% CPU 的峰值并保持在那里直到命令取消。这是一台具有大量 240Ghz 处理器和 30GB RAM 的优质服务器。该查询不完全是 zippy，但在 SSMS 中在 3 秒内返回 100k 行。

这是我的数据集代码：

```
 public DataTable UKDataRefresh ()
    {
        UKREFRESH.UKNewContactsDataTable dt = 
            new UKREFRESH.UKNewContactsDataTable();
        UKREFRESHTableAdapters.UKNewContactsTableAdapter ta = 
            new UKREFRESHTableAdapters.UKNewContactsTableAdapter();

        ta.Connection.ConnectionString += ";Password = xxxxxx;";

        try
        {
        ta.Fill(dt, global::SilverPopTransfer.Properties.Settings.Default.UKDATELASTACTION);

        }
        catch (SqlException )
        {

            throw;
        }

        return dt;

    } 
```

这是我即时构建它的代码：

```
public DataTableOperations (string strconnection, string strSelect,string tablename)
{
        SqlConnection c = new SqlConnection(strconnection);
        connection = c;
        SqlDataAdapter da = new SqlDataAdapter(strSelect, connection);
        DataSet ds = new DataSet();
        //added this to see what would happen.
        da.SelectCommand.CommandTimeout = 0;
        connection.Open();
        da.Fill(ds, tablename);
        connection.Close();
        Datatable = ds.Tables[tablename];
        _disposed = false;
    } 
```

我正在寻找可能导致问题的线索，而不是完整的解决方案。
顺便说一句，我在发布之前在预先存在的控制台应用程序中运行了一个类似的功能，它连接并运行没有错误：查询几乎相同。

唯一的区别是，对于预先存在的应用程序，我使用集成安全性，但在这种情况下，我指定了用户和密码。我**已**确认登录凭据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:35:12.117

检查索引和`set nocount on`执行前。SSMS 性能并不是一个好的性能指标。它只获取部分数据并异步执行。尝试调用一小部分数据或运行查询而不填满表格。它可能是瓶颈。

如果您正在运行带有参数的选择，则 sql server 将使用`sp_execute`然后服务器编译它来执行它，从而创建 CPE 峰值。

# java - 以正确的方式重置定时任务

> ID：12267752
> 
> 赞同：0
> 
> 时间：2012-09-04T16:32:39.487
> 
> 标签：java

我有一个定时任务，由带有 startAtFixedInterval 的计时器启动，间隔很长。定时任务的工作是检查网站上的更改。

我想允许用户在间隔中间手动重新启动任务，以便在不等待间隔结束的情况下获得新的结果。我看不到任何 reset() 方法，所以我想我必须停止并重新启动任务，对吗？或者实际上有一种方法/最佳选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:46:50.183

在[java.util.Timer](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)类中有`cancel()`方法。它取消当前的定时器任务。当当前定时器任务被取消时，启动一个新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:53:49.043

您可以使用`ScheduledExecutorService`

```
public static void main(String[] args) throws InterruptedException {

    Runnable command = new Runnable() {

        @Override
        public void run() {
            System.out.println("I am done..");              
        }
    };

    ScheduledExecutorService executorService = Executors.newSingleThreadScheduledExecutor();
    executorService.scheduleAtFixedRate(command, 1000, 1000, TimeUnit.MILLISECONDS);

} 
```

# c# - 如何在asp.net c#中从浏览器中删除cookie，所以答案不起作用

> ID：12267758
> 
> 赞同：1
> 
> 时间：2012-09-04T16:33:12.677
> 
> 标签：c#, asp.net, cookies

当用户注销时，我正在尝试使用 C# 删除 cookie。此处列出的代码建议：[从浏览器中删除 cookie](https://stackoverflow.com/questions/2816452/remove-cookies-from-browser)不起作用。我绝望地把他们中的几个放在一起，他们没有工作。

```
if (Request.Cookies["loginidcookie"] != null)
{
    HttpCookie myCookie = new HttpCookie("loginidcookie");
    myCookie.Value = String.Empty;
    myCookie.Expires = DateTime.Now.AddDays(-1d);
    Response.Cookies.Add(myCookie);
    Response.Cookies.Remove("loginidcookie");
}
Response.Redirect("logout.aspx"); 
```

因此，我不仅用空字符串覆盖了 cookie 的值，而且将其设置为昨天过期并将其从 cookie 列表中删除。然而，当我运行这段代码然后点击后退按钮并重新加载时，cookie 仍然以其原始值存在。那么我该如何摆脱它呢？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T16:38:52.967

试试这个：

```
string cookieName = "loginidcookie";
if (Request.Cookies[cookieName ] != null)
{
    var myCookie = new HttpCookie(cookieName);
    myCookie.Expires = DateTime.Now.AddDays(-1d);
    Response.Cookies.Add(myCookie);
}
Response.Redirect("logout.aspx", false); 
```

注意（[从这里](http://msdn.microsoft.com/en-us/library/ms178195%28v=vs.100%29.aspx)）：

> 您不能直接删除用户计算机上的 cookie。但是，您可以通过将 cookie 的到期日期设置为过去的日期来指示用户的浏览器删除 cookie。下次用户向设置 cookie 的域或路径中的页面发出请求时，浏览器将确定 cookie 已过期并将其删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T16:37:41.997

您正在添加 Cookie，然后在发送响应之前将其从集合中删除，因此您实际上什么都不做。

```
HttpCookie myCookie = new HttpCookie("loginidcookie");
... and then below
Response.Cookies.Add(myCookie);
Response.Cookies.Remove("loginidcookie"); 
```

如果您将 cookie 更改为昨天过期，则您需要`leave`在集合中的 cookie 以便浏览器在看到 cookie 已更新为过去的过期日期时将其删除。换句话说，不要打电话`Response.Cookies.Remove("loginidcookie");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-19T20:42:14.620

尝试 RedFilter 的解决方案，但使用 Server.Transfer() 或 Server.TransferRequest() 而不是 Response.Redirect() 由于可能的错误，它似乎并不总是让这些 cookie 响应发生。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-08-15T21:17:42.020

关闭浏览器后是否检查 cookie？或者在同一个浏览器中重新加载页面？

如果您在同一个浏览器中打开该页面，您会看到 cookie 已过期，但如果您打开新浏览器并尝试再次访问该页面，您将无法获取 cookie。

# nsis - NSIS - 单选按钮，用于选择要安装的多个程序之一

> ID：12267759
> 
> 赞同：2
> 
> 时间：2012-09-04T16:33:13.780
> 
> 标签：nsis

我有 4 个程序，我想将它们打包到一个安装程序中，并允许用户选择他们想要安装的程序。

我以前从未使用过 NSIS，但有人建议我试一试，但是，我不知道从哪里开始。

基本上我只需要一个页面，要求用户选择一个单选按钮，然后单击下一步安装以下程序之一：

```
-- Install components --------------------

Select a program from the list below and
click Next to continue.

O Program 1
O Program 2
O Program 3
O Program 4

-------------------------------------------

Cancel                                 Next 
```

然后根据他们的选择启动 program1_setup.exe 或 program2_setup.exe 等。

由于我的 4 个程序中的每一个本身都是安装程序，因此我认为我不需要在 NSIS 中设置卸载脚本，因为这已经处理好了？

谢谢，格雷格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:15:53.533

此代码类似于[one-section.nsi](http://nsis.sourceforge.net/Examples/one-section.nsi)示例。

```
...

!include sections.nsh

Page components
Page instfiles

Section /o "Program 1" P1
File "/oname=$pluginsdir\Setup.exe" "myfiles\Setup1.exe"
SectionEnd

Section "Program 2" P2
File "/oname=$pluginsdir\Setup.exe" "myfiles\Setup2.exe"
SectionEnd

Section ; Hidden section that runs the show
DetailPrint "Installing selected application..."
SetDetailsPrint none
ExecWait '"$pluginsdir\Setup.exe"'
SetDetailsPrint lastused
SectionEnd

Function .onInit
Initpluginsdir ; Make sure $pluginsdir exists
StrCpy $1 ${P2} ;The default
FunctionEnd

Function .onSelChange
!insertmacro StartRadioButtons $1
    !insertmacro RadioButton ${P1}
    !insertmacro RadioButton ${P2}
!insertmacro EndRadioButtons
FunctionEnd 
```

如果需要，您可以使用该`CheckBitmap`属性来更改复选框图标...

# javascript - draggableCursor 不会更改为等待光标

> ID：12267763
> 
> 赞同：0
> 
> 时间：2012-09-04T16:33:21.837
> 
> 标签：javascript, google-maps-api-3, cursor

我正在尝试将可拖动光标更改为等待光标，但它永远不会改变。在用户单击标记或边界框后调用以下代码。当我单击一个对象时，光标会从张开的手变为闭合的手。一旦 URL 请求完成，手就会回到张开的手。在某些情况下，完成 URL 请求可能需要几秒钟。离开“map.setOptions({draggableCursor:'wait'});”没有区别 代码或注释掉。

我究竟做错了什么？

——杰夫

```
function httpRequest(url)
{
map.setOptions({draggableCursor:'wait'});
var pageRequest = false; //variable to hold ajax object
/*@cc_on
   @if (@_jscript_version >= 5)
      try {
      pageRequest = new ActiveXObject("Msxml2.XMLHTTP")
      }
      catch (e){
         try {
         pageRequest = new ActiveXObject("Microsoft.XMLHTTP")
         }
         catch (e2){
         pageRequest = false
         }
      }
   @end
@*/

if (!pageRequest && typeof XMLHttpRequest != 'undefined')
   {pageRequest = new XMLHttpRequest();}

if (pageRequest)
    {       
       pageRequest.open('GET', url, false); //get page synchronously
       pageRequest.send(null);
       openInfoWindow(pageRequest, 0);
    }
map.setOptions({draggableCursor:null});

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T00:46:35.763

问题是我在做一个同步获取，这基本上导致整个浏览器挂起等待响应。我将其更改为异步 ajax get，光标现在更改为等待光标，如我所料。

但是，在 ajax“成功”函数的第一行中，我将光标改回正常光标 abd，然后打开一个带有响应的 infoWindow。如果光标在 infoWindow 之外，它会继续显示等待光标，直到我移动它，此时它会恢复为正常光标。如果光标在 infoWindow 的位置内，它仍然是一个等待光标，直到我将它移到 infoWindow 之外。对此有什么想法吗？

——杰夫

# ios - iAd 横幅不工作

> ID：12267770
> 
> 赞同：10
> 
> 时间：2012-09-04T16:33:47.217
> 
> 标签：ios, iad, adbannerview

我试图在我的应用程序中获得横幅，但由于我添加了横幅，应用程序将无法启动。

我收到一条错误消息：

> 由于未捕获的异常“NSInvalidUnarchiveOperationException”而终止应用程序，原因：“无法实例化名为 ADBannerView 的类”

.h 文件中的代码：

```
#import <iAd/iAd.h>

@interface FirstViewController : UIViewController <ADBannerViewDelegate>
{
    ADBannerView *banner;  
}
@property (nonatomic,assign) BOOL bannerIsVisible;
@property (nonatomic,retain) IBOutlet ADBannerView *banner; 
```

.m 文件中的代码：

```
@synthesize banner, bannerIsVisible;

-(void)bannerViewDidLoad: (ADBannerView *)abanner
{
     if(!self.bannerIsVisible)
     {
         [UIView beginAnimations:@"animatedAdBannerOn" context:NULL];
         banner.frame=CGRectOffset(banner.frame, 0.0, 50.0);
         [UIView commitAnimations];
         self.bannerIsVisible=YES;
     }
}
-(void)bannerView:(ADBannerView *)aBanner
{
     if(!self.bannerIsVisible)
     {
         [UIView beginAnimations:@"animatedAdBannerOff" context:NULL];
          banner.frame=CGRectOffset(banner.frame, 0.0, -320.0);
         [UIView commitAnimations];
         self.bannerIsVisible=NO;
     }
} 
```

你觉得哪里不对？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-01T02:01:52.310

您必须将 iAd.framework 添加到您的项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T23:18:44.953

拿这个代码：

```
#import <iAd/iAd.h>

@interface ViewController : UIViewController <ADBannerViewDelegate> {
}
@end 
```

.m 文件：

```
@implementation ViewController

-(void)bannerViewDidLoadAd:(ADBannerView *)banner {
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1];
    [banner setAlpha:1];
    [UIView commitAnimations];
}

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error {
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1];
    [banner setAlpha:0];
    [UIView commitAnimations];
}
@end 
```

# python - 在子进程中使用 * 通配符的命令问题

> ID：12267774
> 
> 赞同：3
> 
> 时间：2012-09-04T16:34:09.170
> 
> 标签：python, copy, subprocess, cp, glob

我正在尝试使用子进程库和 Popen 方法将文件从一个位置复制到另一个位置。运行以下脚本时出现错误`cp: cannot stat /some/dev_path/*`。有人告诉我，`*`它没有扩展到文件名，这就是问题所在。同样在其他一些帖子中，人们建议使用 call 而不是 Popen，但据我所知 call 不会返回 stderr。

```
devPath = '/some/dev_path/'
productionPath = '/some/prod_path/'

p = subprocess.Popen(['cp', '-r', devPath + '*', productionPath], stdout = subprocess.PIPE, stderr = subprocess.PIPE)
pout, perr = p.communicate()

if perr != '':
    sys.exit('Error: ' + perr) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T16:36:20.090

扩展`*`(globbing) 是你的 shell 的一个功能，例如*bash 。*因此，您必须`shell=True`在`subprocess.Popen`调用中使用关键字参数。

但是，对于这种情况，我强烈建议改用[shutil.copytree](http://docs.python.org/library/shutil.html)。

*（首先，因为它更简单（参见[Zen of Python](http://www.python.org/dev/peps/pep-0020/)）并且不易出错。处理错误更加简洁，你会得到很好的异常，包括错误列表（对于像你这样的多文件操作），而你不需要不必处理生成子进程并与之通信。其次，如果您不需要，分叉子进程是不必要的资源浪费。其他问题包括引用/转义，如果您可能会在代码中引入安全漏洞未能正确清理用户输入。）*

例如：

```
from shutil import copytree
from shutil import Error

try:
   copytree('dir_a', 'dir_b')
except (Error, OSError), e:
    print "Attempt to copy failed: %s" % e 
```

此外，您不应通过将字符串连接在一起来构建文件系统路径，而应使用[os.path.join()](http://docs.python.org/library/os.path.html#os.path.join)。这将为当前操作系统使用正确的目录分隔符 ( `os.sep`)，并允许您轻松编写可移植代码。

例子：

```
>>> import os
>>> os.path.join('/usr/lib', 'python2.7')
'/usr/lib/python2.7' 
```

注意：`os.path.join`仍然只进行（智能）字符串操作 - 它不关心该路径是否可访问甚至是否存在。

# struts-1 - 如何防止在struts 1中重置表单值？

> ID：12267776
> 
> 赞同：1
> 
> 时间：2012-09-04T16:34:15.523
> 
> 标签：struts-1, struts-validation

我试图防止我在 jsp 页面上的选择框的值在 struts 1 中被重置。不一定是尚未提交捕获数据的新表单，但从存储对象填充的表单将其选择字段重置为默认值由于假设保留了这些值，因此对工作流程造成了不良影响。到目前为止，我在搜索中一无所获，希望得到指点/帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:11:53.757

找到了！！在 struts-config.xml 操作映射中将填充 JSP 的操作设置为会话范围解决了我的问题。

# database - Excel合并电子表格

> ID：12267778
> 
> 赞同：0
> 
> 时间：2012-09-04T16:34:39.410
> 
> 标签：database, excel

我想知道如何合并excel电子表格。我有 2 个带有 Ticker# 列的电子表格，我需要将工作表 2 中的所有列插入到 sheet1 中相应的 Ticket# 中。我不能只是复制和粘贴它们，因为顺序不同，而且并非所有 Ticket# 都存在于两张表中。

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:39:27.100

使用 vlookup（或 hlookup，如果您使用行而不是列）查找信息，如果您需要将其保存在一张纸中，您可以复制该纸并将其粘贴到新文件中并另存为。

如果您可以共享文件，我可以给您正确的功能。或者，如果你能给我两张表的数据样本。

# iphone - 最好使用全局或自定义命名的 GCD 队列？

> ID：12267779
> 
> 赞同：5
> 
> 时间：2012-09-04T16:34:49.950
> 
> 标签：iphone, objective-c, cocoa-touch, grand-central-dispatch

我的理解是`// 001`获得高优先级并发队列

```
// 001
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0); 
```

并`// 002`创建一个新的自定义串行队列

```
// 002
dispatch_queue_t queue = dispatch_queue_create("bgQueue", NULL); 
```

我的问题是，是否有可能其他进程（在 iPhone、其他应用程序等上）将在全局队列中排队，因此您可能需要等待（尽管短暂）才能执行。如果是这种情况，最好总是在您知道自己拥有唯一访问权限的地方创建自定义队列？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T16:49:25.653

*   `001` *获取*高优先级队列，而不是创建*它*。三个全局队列是为您的应用程序自动创建的；它们总是可用的。
*   这三个全局队列仅在您的应用程序中是全局的，就像全局变量是全局的一样。这些队列对于创建它们的每个应用程序仍然是私有的。
*   ~~私有队列和全局队列之间~~的主要区别在于私有队列~~是~~*顺序*的，而全局队列是*并发*的。两者的区别总结在[GCD 文档的表 3-1 中](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)。**编辑：**在 OS X v10.7 及更高版本中，私有队列现在也可以通过传递并发`DISPATCH_QUEUE_CONCURRENT`（感谢 Rob 的更正）。

# asp.net-mvc - 使用 IIS 作为本地 Web 服务器在我的 Visual Studio 中进行调试

> ID：12267780
> 
> 赞同：1
> 
> 时间：2012-09-04T16:34:56.360
> 
> 标签：asp.net-mvc, asp.net-mvc-3, visual-studio-2010, debugging, iis

我有一个 asp.net MVC 网站，它使用仅在 32 位或仅在 64 位（sql lite）中工作的 somme DLL。

由于我们的服务器以 64 位运行，我想以 64 位运行我的所有代码。问题是 Visual Studio 开发服务器在所有情况下都以 32 位运行。

所以我开始使用本地 IIS Web 服务器。

问题在于，对于 asp.net **MVC**网站，必须将网站置于 URL 的根目录。

所以我希望有类似“mywebsite.lo”（在我的主机文件中有一个条目）或“localhost:9999”作为项目 url。

但是，如果我尝试将其放入，当我创建虚拟目录时，会出现此错误： *无法创建虚拟目录。在本地计算机上找不到服务器“mywebsite.lo”。仅本地 IIS 服务器支持创建虚拟目录。*

因此，我创建了自己的网站，该网站具有响应“mywebsite.lo”的正确绑定。现在，如果我单击创建虚拟目录，我会收到一条成功消息。但是，当我运行网站时，我收到一条消息：*无法在 Web 服务器上开始调试。Web 服务器配置不正确。有关常见配置错误，请参阅帮助。在调试器之外运行网页可能会提供更多信息。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T07:14:37.000

我犯了一个错误：应用程序池位于 .Net 2.x 中：/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:53:39.693

为了使用本地 IIS 在 Visual Studio 中进行调试，Visual Studio 必须以管理员身份运行，你这样做吗？

# javascript - 通过单击设置 location.href 不起作用

> ID：12267783
> 
> 赞同：0
> 
> 时间：2012-09-04T16:35:06.983
> 
> 标签：javascript

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:40:45.483

在 window.location 之后更改 reutrn true 以返回 false；

```
$('.act-a').click(function(){
    if(parseInt($('.value').val())>0){
        //window.location.href = window.location.origin + $(this).attr('url') + '?r=' + parseInt($('.value').val());
        window.location.replace("www.google.com");
        return false;
    }
    return false;
}); 
```

在点击、提交等事件上返回 false 会阻止此类事件的默认行为。仅当您想运行一个函数然后让事件传播到其他常规侦听器时才使用 return true，例如跟随链接的 href、继续正常的表单提交等...这篇文章有助于事件冒泡基础知识：[http:// www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T16:42:11.907

`return true;`告诉浏览器执行链接的默认操作。因此，浏览器正在跟踪链接而不是运行`window.location`.

删除两个 return 语句，而是添加`e.preventDefault();`

```
$('.act-a').click(function(e){
    e.preventDefault();
    if(parseInt($('.value').val(), 10) > 0){
        window.location.href = window.location.origin + $(this).attr('url') + '?r=' + parseInt($('.value').val(), 10);
    }
}); 
```

PS您应该添加`,10`以`parseInt`确保该数字被解析为以10为底。

# internet-explorer - IE文档元素有符号，如何引用？

> ID：12267795
> 
> 赞同：0
> 
> 时间：2012-09-04T16:35:55.347
> 
> 标签：internet-explorer, vbscript

对您来说可能是一个简单的专家，我正在尝试使用 vbscript 进行屏幕抓取，但是我尝试将数据放入其中以便在此站点上运行表单的文档元素中包含符号，并且 VBscripting 在标识符上出错.. .

```
With IE.Document.aspnetForm
    .l00$_SUMMARY$txtIP.value = server_ip
    .submit
End With 
```

这是网页中该元素的视图源

```
<input name="ctl00$_SUMMARY$txtIP" type="text" id="ctl00_SUMMARY_txtIP" style="width:100px;" /> 
```

谢谢大家，

吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:11:43.117

这个演示 .HTA 展示了三种（二十九种）通往我宝宝门的方式：

```
<html>
 <head>
  <hta:application id="demo square brackets" scroll="No"></hta>
  <title>Demo</title>
  <script language = "VBScript"
          type     = "text/vbscript"
  >
  Sub onLoad()
    MsgBox "A " & document.all.[ctl00$_SUMMARY$txtIP].value
    MsgBox "B " & document.getElementById("ctl00$_SUMMARY$txtIP").value
    MsgBox "C " & document.getElementById("ctl00_SUMMARY_txtIP").value
  End Sub
  </script>
 </head>
 <body onload="onLoad">
  <input name="ctl00$_SUMMARY$txtIP" type="text" id="ctl00_SUMMARY_txtIP" value="my baby's door" />
 </body>
</html> 
```

[] 通常可以在 VBScript 中用于向引擎提供带有有趣字母或空格的标识符；getElementById 将 name 和 id 属性考虑在内。

# javascript - 如何在 $.toJSON 之前或期间排除对象的 id 属性

> ID：12267796
> 
> 赞同：0
> 
> 时间：2012-09-04T16:35:57.857
> 
> 标签：javascript, jquery, ember.js

我正在使用 django rest 框架应用程序为 ember-data 用户编写自定义 REST 适配器，并且需要构建一个 JSON 字符串来执行 POST/PUT。唯一的问题是我似乎无法在`$.toJSON`删除它之后链接另一个 jQuery 方法。

到目前为止，我有一个`ember.js`对象，我计划从中提取每个属性，除了我的 django 应用程序不希望它`id`与 HTTP POST 一起使用

我可以像这样得到一个合法的字符串

```
$.param(record.toJSON()); 
```

这导致以下结果

```
id=0&username=dat 
```

当我这样做时，我想要一种快速排除`id`toJSON 的方法（这是否存在而无需手动编写？）使用 jQuery 1.8+

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T00:49:50.123

原来这真的很简单

```
var json_data = record.toJSON();
delete json_data.id;
var data = $.param(json_data); 
```

现在代替

```
id=0&username=dat 
```

我现在得到

```
username=dat 
```

# asp.net-mvc - 找不到 JQuery UI 对话框

> ID：12267797
> 
> 赞同：0
> 
> 时间：2012-09-04T16:36:00.847
> 
> 标签：asp.net-mvc, jquery-ui

我正在尝试在本教程中实现弹出的联系我们对话框：http: [//www.matthidinger.com/archive/2011/02/22/Progressive-enhancement-tutorial-with-ASP-NET-MVC-3-和-jQuery.aspx](http://www.matthidinger.com/archive/2011/02/22/Progressive-enhancement-tutorial-with-ASP-NET-MVC-3-and-jQuery.aspx)

我有一个运行良好的解决方案的工作版本。

在尝试将其集成到我自己的解决方案中时，我遇到了问题。

我在我的脚本目录中创建了一个contactdialog.js 文件：

```
 /// <reference path="jquery-1.6.2.min.js"/>
/// <reference path="jquery-ui-1.8.11.js"/>
$.ajaxSetup({ cache: false });

$(document).ready(function () {
    $(".openDialog").live("click", function (e) {
        e.preventDefault();

        $("</div>")
        .addClass("dialog")
        .attr("id", $(this)
        .attr("data-dialog-id"))
        .appendTo("body")
        .dialog({
            title: $(this).attr("data-dialog-title"),
            close: function () { $(this).remove() },
            modal: true
        })
        .load(this.href);
    });

    $(".close").live("click", function (e) {
        e.preventDefault();
        $(this).closest(".dialog").dialog("close");
    });
}); 
```

然后在我看来，我接近顶部：

```
<script src="~/Scripts/jquery-1.6.2.min.js" type="text/javascript"></script>
<script src="~/Scripts/jquery.unobtrusive-ajax.js" type="text/javascript"></script>
<script src="~/Scripts/jquery-ui-1.8.11.js" type="text/javascript"></script>
<script src="~/Scripts/contactdialog.js" type="text/javascript"></script> 
```

再往下：

```
@Html.ActionLink("Contact Us", "ContactUs", "Home", null, new { @class = "openDialog", data_dialog_id = "emailDialog", data_dialog_title = "Contact Us"}) 
```

现在我的链接成功进入了 javascript 函数，并且似乎添加类 OK。但是，当它到达 .dialog 函数时，它会引发以下异常：“对象不支持属性或方法对话框”

这似乎表明 jquery-UI 尚未加载。
但是我不知道为什么？如果我在 Chrome 中加载页面并检查页面源，则 jquery-ui-1.8.11.js 的链接可以愉快地打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:05:07.457

我已更改为使用捆绑：

```
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jqueryui")        
@Scripts.Render("~/bundles/contact") 
```

由于目前完全超出我的原因，这已经让它进入​​了生活，现在正在呈现对话！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:28:12.447

一些提示：

jqueryUI 是否被另一个局部视图加载（这就是为什么您会在开发人员工具中看到它被加载）但是调用 .dialog 的 JS 正在以不同的局部视图呈现？

尝试将 jqueryUI 放在主/布局视图中？

# c# - 与 Viewmodel 的列表框数据绑定未显示 Windows Phone

> ID：12267798
> 
> 赞同：1
> 
> 时间：2012-09-04T16:36:02.780
> 
> 标签：c#, windows-phone-7, mvvm, windows-phone-7.1, windows-phone

我正在开发一个使用本地数据库和 MVVM 的 Windows Phone 应用程序。我的列表框没有显示它绑定到的 WeatherList。我在 App.xaml.cs 文件中将单个 WeatherItem 添加到本地数据库，并且已成功添加，但在运行应用程序时它未显示在列表框中。我真的很感激任何帮助。我有以下设置：

MainPage.xaml：

```
<phone:PhoneApplicationPage.Resources>
    <DataTemplate x:Key="ForecastListItemTemplate">
        <StackPanel Orientation="Horizontal" Margin="0, 400, 0, 0" Width="480" Height="100">
            <StackPanel Width="190" VerticalAlignment="Center">
                <TextBlock HorizontalAlignment="Center" Text="{Binding Path=DayOfWeek}" FontFamily="Segoe WP" FontWeight="ExtraBold" FontSize="36" Foreground="#545d61"></TextBlock>
                <TextBlock HorizontalAlignment="Center" Text="{Binding Path=ItemDay}" FontFamily="Segoe WP Light" FontSize="36" Foreground="#545d61"></TextBlock>
            </StackPanel>
            <Image Height="100" Width="100" Source="{Binding Path=ImageSource}"></Image>
            <StackPanel Width="190" VerticalAlignment="Center">
                <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                    <TextBlock Text="↑" FontFamily="Segoe WP" FontWeight="ExtraBold" FontSize="36" Foreground="#545d61"></TextBlock>
                    <TextBlock HorizontalAlignment="Center" Margin="4, 0, 4, 0" Text="{Binding Path=High}" FontFamily="Segoe WP" FontWeight="ExtraBold" FontSize="36" Foreground="#0da5d0"></TextBlock>
                    <TextBlock Text="↓" FontFamily="Segoe WP" FontWeight="ExtraBold" FontSize="36" Foreground="#545d61"></TextBlock>
                    <TextBlock HorizontalAlignment="Center" Margin="4, 0, 4, 0" Text="{Binding Path=Low}" FontFamily="Segoe WP" FontWeight="ExtraBold" FontSize="36" Foreground="#0da5d0"></TextBlock>
                </StackPanel>
                <TextBlock HorizontalAlignment="Center" Text="{Binding Path=Condition}" FontFamily="Segoe WP Light" FontSize="24" Foreground="#545d61"></TextBlock>
            </StackPanel>
        </StackPanel>
    </DataTemplate>
</phone:PhoneApplicationPage.Resources>

<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Background="#e1e4e4">

    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

<ListBox 
        x:Name="WeatherListBox" 
        ItemsSource="{Binding WeatherList}" 
        Margin="0, 400, 0, 96"
        Width="480"
        ItemTemplate="{StaticResource ForecastListItemTemplate}">
    </ListBox>
</Grid> 
```

WeatherViewModel.cs

```
public class WeatherViewModel : INotifyPropertyChanged
{
    // LINQ to SQL data context for the local database.
    private ToDoDataContext weatherDB;

    // Class constructor, create the data context object.
    public WeatherViewModel()
    {
        weatherDB = new ToDoDataContext();
    }

    // All to-do items.
    private ObservableCollection<WeatherItem> _weatherList;
    public ObservableCollection<WeatherItem> WeatherList
    {
        get { return _weatherList; }
        set
        {
            _weatherList = value;
            NotifyPropertyChanged("WeatherList");
        }
    }

    // Write changes in the data context to the database.
    public void SaveChangesToDB()
    {
        weatherDB.SubmitChanges();
    }

    // Query database and load the collections and list used by the pivot pages.
    public void LoadCollectionsFromDatabase()
    {
        // Specify the query for all to-do items in the database.
        var weatherItemsInDB = from WeatherItem weather in weatherDB.Forecasts
                               select weather;

        // Query the database and load all to-do items.
        WeatherList = new ObservableCollection<WeatherItem>(weatherItemsInDB);
    }

    // Add a to-do item to the database and collections.
    public void AddWeatherItem(WeatherItem newWeatherItem)
    {
        // Add a to-do item to the data context.
        weatherDB.Forecasts.InsertOnSubmit(newWeatherItem);

        // Save changes to the database.
        weatherDB.SubmitChanges();

        // Add a to-do item to the "all" observable collection.
        WeatherList.Add(newWeatherItem);

    }

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    // Used to notify Silverlight that a property has changed.
    private void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
    #endregion
} 
```

ToDoDataContext.cs

```
public class ToDoDataContext : DataContext
{

    // Pass the connection string to the base class.
    public ToDoDataContext()
        : base("Data Source=isostore:/AppDB.sdf")
    { }

    public ToDoCategory activeCategory;

    // Specify a table for the to-do items.
    public Table<ToDoItem> Items;

    // Specify a table for the categories.
    public Table<ToDoCategory> Categories;

    //Weather stuff
    public WeatherItem currentWeather;

    // Specify a table for the to-do items.
    public Table<WeatherItem> Forecasts;
}

  [Table]
public class WeatherItem : INotifyPropertyChanged, INotifyPropertyChanging
{

    // Define ID: private field, public property, and database column.
    private int _weatherItemId;

    [Column(IsPrimaryKey = true, IsDbGenerated = true, DbType = "INT NOT NULL Identity", CanBeNull = false, AutoSync = AutoSync.OnInsert)]
    public int WeatherItemId
    {
        get { return _weatherItemId; }
        set
        {
            if (_weatherItemId != value)
            {
                NotifyPropertyChanging("WeatherItemId");
                _weatherItemId = value;
                NotifyPropertyChanged("WeatherItemId");
            }
        }
    }

    // Define item name: private field, public property, and database column.
    private string _itemDay;

    [Column]
    public string ItemDay
    {
        get { return _itemDay; }
        set
        {
            if (_itemDay != value)
            {
                NotifyPropertyChanging("ItemDay");
                _itemDay = value;
                NotifyPropertyChanged("ItemDay");
            }
        }
    }

    private string _dayOfWeek;

    [Column]
    public string DayOfWeek
    {
        get { return _dayOfWeek; }
        set
        {
            if (_dayOfWeek != value)
            {
                NotifyPropertyChanging("DayOfWeek");
                _dayOfWeek = value;
                NotifyPropertyChanged("DayOfWeek");
            }
        }
    }

    // Define completion value: private field, public property, and database column.

    private string _high;

    [Column]
    public string High
    {
        get { return _high; }
        set
        {
            if (_high != value)
            {
                NotifyPropertyChanging("High");
                _high = value;
                NotifyPropertyChanged("High");
            }
        }
    }

    private string _low;

    [Column]
    public string Low
    {
        get { return _low; }
        set
        {
            if (_low != value)
            {
                NotifyPropertyChanging("Low");
                _low = value;
                NotifyPropertyChanged("Low");
            }
        }
    }

    private string _condition;

    [Column]
    public string Condition
    {
        get { return _condition; }
        set
        {
            if (_condition != value)
            {
                NotifyPropertyChanging("Condition");
                _condition = value;
                NotifyPropertyChanged("Condition");
            }
        }
    }

    private string _imageSource;
    [Column]
    public string ImageSource
    {
        get { return _imageSource; }
        set
        {
            if (_imageSource != value)
            {
                NotifyPropertyChanging("ImageSource");
                _imageSource = value;
                NotifyPropertyChanged("ImageSource");
            }
        }
    }

    // Version column aids update performance.
    [Column(IsVersion = true)]
    private Binary _version;

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    // Used to notify that a property changed
    private void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    #endregion

    #region INotifyPropertyChanging Members

    public event PropertyChangingEventHandler PropertyChanging;

    // Used to notify that a property is about to change
    private void NotifyPropertyChanging(string propertyName)
    {
        if (PropertyChanging != null)
        {
            PropertyChanging(this, new PropertyChangingEventArgs(propertyName));
        }
    }

    #endregion
} 
```

主页.xaml.cs

```
// Constructor
    public MainPage()
    {
        InitializeComponent();
        this.DataContext = App.WeatherViewModel;
    } 
```

应用程序.xaml.cs

```
public partial class App : Application
{
    private static ToDoViewModel viewModel;
    public static ToDoViewModel ViewModel
    {
        get { return viewModel; }
    }

    private static WeatherViewModel weatherViewModel;
    public static WeatherViewModel WeatherViewModel
    {
        get { return weatherViewModel; }
    }

    /// <summary>
    /// Provides easy access to the root frame of the Phone Application.
    /// </summary>
    /// <returns>The root frame of the Phone Application.</returns>
    public PhoneApplicationFrame RootFrame { get; private set; }

    /// <summary>
    /// Constructor for the Application object.
    /// </summary>
    public App()
    {
        // Global handler for uncaught exceptions. 
        UnhandledException += Application_UnhandledException;

        // Standard Silverlight initialization
        InitializeComponent();

        // Phone-specific initialization
        InitializePhoneApplication();

        // Show graphics profiling information while debugging.
        if (System.Diagnostics.Debugger.IsAttached)
        {
            // Display the current frame rate counters.
            Application.Current.Host.Settings.EnableFrameRateCounter = true;

            // Show the areas of the app that are being redrawn in each frame.
            //Application.Current.Host.Settings.EnableRedrawRegions = true;

            // Enable non-production analysis visualization mode, 
            // which shows areas of a page that are handed off to GPU with a colored overlay.
            //Application.Current.Host.Settings.EnableCacheVisualization = true;

            // Disable the application idle detection by setting the UserIdleDetectionMode property of the
            // application's PhoneApplicationService object to Disabled.
            // Caution:- Use this under debug mode only. Application that disables user idle detection will continue to run
            // and consume battery power when the user is not using the phone.
            PhoneApplicationService.Current.UserIdleDetectionMode = IdleDetectionMode.Disabled;
        }

        // Create the database if it does not exist.
        using (ToDoDataContext db = new ToDoDataContext())
        {
            if (db.DatabaseExists() == false)
            {
                // Create the local database.
                db.CreateDatabase();

                // Prepopulate the categories.
                db.Categories.InsertOnSubmit(new ToDoCategory { Name = "Home" });
                db.Categories.InsertOnSubmit(new ToDoCategory { Name = "Work" });
                db.Categories.InsertOnSubmit(new ToDoCategory { Name = "School" });

                db.Forecasts.InsertOnSubmit(new WeatherItem
                {
                    DayOfWeek = "Mon",
                    ItemDay = "Sept 4",
                    Condition = "Mostly Sunny",
                    High = "105",
                    Low = "88",
                    ImageSource = "images/Weather/45.png"
                });

                // Save categories to the database.
                db.SubmitChanges();
            }
        }

        // Create the ViewModel object.
        viewModel = new ToDoViewModel();
        weatherViewModel = new WeatherViewModel();

        // Query the local database and load observable collections.
        viewModel.LoadCollectionsFromDatabase();
        weatherViewModel.LoadCollectionsFromDatabase();

    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:08:56.890

您是否检查了输出窗口中的数据绑定错误？

而在主页面的ctor中，App.WeatherViewModel是否已经不为空了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:14:49.223

你加

```
WeatherListBox.DataContext = WeatherList; 
```

你修改绑定

```
ItemsSource="{Binding}" 
```

# c# - 从.net多次调用matlab

> ID：12267799
> 
> 赞同：0
> 
> 时间：2012-09-04T16:36:03.717
> 
> 标签：c#, .net, matlab

多次调用 matlab 似乎是不可能的：

```
[STAThread]
static void Main(string[] args)
{
    IList<DTO> LotsOfWork = new List<DTO>();
    // create some work
    for(int c = 0; c < 10; c++)
    {
    LotsOfWork.Add(new DTO(){ Id = c, Parameter1 = c, Parameter2 = c });
    }

    // deal with work
    foreach (DTO DTO in LotsOfWork)
    {
    MLApp.MLApp matlab = new MLApp.MLApp();
    object result;

    matlab.Execute("clear;");
    matlab.PutWorkspaceData("a", "base", DTO.Parameter1);
    matlab.PutWorkspaceData("b", "base", DTO.Parameter2);
    matlab.Execute("result = a + b;");
    matlab.GetWorkspaceData("result", "base", out result);
    }
}

public class DTO
{
    public int Id { get; set; }
    public double Parameter1 { get; set; }
    public double Parameter2 { get; set; }
    public string Result { get; set; }
} 
```

第二次循环迭代抛出异常：

```
at System.RuntimeType.ForwardCallToInvokeMember(String memberName, BindingFlags flags, Object target, Int32[] aWrapperTypes, MessageData& msgData)
at MLApp.DIMLApp.GetWorkspaceData(String Name, String Workspace, Object& pdata)
at Sandbox.Program.Main(String[] args) in C:\Bla\Program.cs:line 53
at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
at System.Threading.ThreadHelper.ThreadStart() 
```

我还想知道是否可以运行类似“线程”的东西（即为每个 DTO 对象生成一个线程）。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:42:17.100

解决方案。代替：

```
object result; 
```

和：

```
object result = null; 
```

这是 Mathworks 的回复：

此错误是由于 GetWorkspaceData 期望一个空的 VARIANT 作为输出参数，但在运行一次循环后，结果实际上变成了值为 0.0 的双精度值。因此，您需要将循环更改为：

```
foreach (DTO DTO in LotsOfWork)
{

    object result = null; //Initialize as null

    matlab.Execute("clear;");
    matlab.PutWorkspaceData("a", "base", DTO.Parameter1);
    matlab.PutWorkspaceData("b", "base", DTO.Parameter2);
    matlab.Execute("result = a + b;");
    matlab.GetWorkspaceData("result", "base", out result);
} 
```

# c# - C# - 拆分数组中每个值的字符串

> ID：12267814
> 
> 赞同：1
> 
> 时间：2012-09-04T16:36:57.107
> 
> 标签：c#, .net, arrays, split

```
foreach (set.row officeJoin in officeJoinMeta)
{
    foreach (set.somethingRow confRow in myData.something.Rows)
    {
        string dep = confRow["columnName"].ToString();
        depts.Add(dep);
    }
} 
```

我让这个 for 循环遍历一列，将列中的每个值添加到 dep，然后将所有这些存储在我在此方法顶部定义的 List < String > depts 中。

dep 中的某些值是单个字符串，例如“R”，但有些值需要在逗号“R,GL,BD”之后分隔。

我理解使用 .Split(",")，但是如何拆分字符串——如何获取数组中的每个值，用逗号拆分它们，然后将它们存储在另一个数组中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:40:47.620

根据您解释的内容编写：

```
 foreach (set.row officeJoin in officeJoinMeta)
        {
            foreach (set.somethingRow confRow in myData.something.Rows)
            {
                string dep = confRow["columnName"].ToString();
                depts.AddRange(dep.Split(','));
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:43:05.787

声明为

```
List<string[]> depts =  new List<string[]>() 
```

并添加为

```
depts.Add(dep.Split(',')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T17:31:34.137

```
List<string> depts=new List<dept>();

    var values=dept].Split(',');

    for(int index=0;index<values.length;index++)
    {
    depts.Add(values[index].ToString());    

    } 
```

# java-me - Java ME Runnable 对象虽然尚未创建实例但仍占用内存

> ID：12267822
> 
> 赞同：3
> 
> 时间：2012-09-04T16:37:31.847
> 
> 标签：java-me

我在 Java ME 中遇到了一个奇怪的内存问题。

这是我的代码的一部分：

```
int variable=1;

while (true) {
  if (variable==2) {
    display = Display.getDisplay(this);         
    MyCanvas mc = new MyCanvas(this);   // MyCanvas is a runnable object
    mcT = new Thread(mc);    // new thread for MyCanvas
    mc.repaint();
    display.setCurrent(mc);  
    mcT.start();  // run thread
    }

  if (variable==1) {
    // Do some other stuff
    }
  } 
```

问题是虽然仍然`variable`设置为`1`，所以它没有通过`if (variable==2)`条件程序消耗 300kB 的内存，而不是在条件后删除代码时`if (variable==2)`。

据我所知，代码应该被执行，并且只有在我将 variable 设置为 value 时才会创建对象`2`。但是当条件 "if (variable==2)" 之后的代码没有被执行时，它也会消耗内存。

为什么会这样？

# django - 使用 EC2 和 bitnami 的 Django 导入错误

> ID：12267827
> 
> 赞同：0
> 
> 时间：2012-09-04T16:37:48.147
> 
> 标签：django, amazon-ec2, bitnami

我正在尝试将我的 django 应用程序部署到亚马逊的 ec2。我在让我的站点包和中间件在 ec2 服务器上工作时遇到了一些麻烦。我正在为我的 AMI 使用 bitnami djangostack，但我很困惑在服务器上的哪个位置放置我的站点包（如向南注册等）以及在何处放置我的中间件（如分页）。

现在我正在运行服务器并收到以下错误：

```
Traceback (most recent call last):

  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/servers/basehttp.py", line 283, in run
    self.result = application(self.environ, self.start_response)

  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/contrib/staticfiles/handlers.py", line 68, in __call__
    return self.application(environ, start_response)

  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/handlers/wsgi.py", line 250, in __call__
    self.load_middleware()

  File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/handlers/base.py", line 47, in load_middleware
    raise exceptions.ImproperlyConfigured('Error importing middleware %s: "%s"' % (mw_module, e))

ImproperlyConfigured: Error importing middleware pagination.middleware: "No module named pagination.middleware" 
```

您可以在以下[链接中看到错误](http://ec2-67-202-59-6.compute-1.amazonaws.com:8000/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:58:13.420

`site-packages`不是您手动添加项目的地方。让 Python 的安装工具`pip`为`easy_install`您完成这项工作。

至于中间件，它可以放在您的`PYTHONPATH`. 放置它的最佳位置是在您的应用程序目录之一中的文件中（您看到的同一位置`models.py`）；通常这个文件被称为`middleware.py`

如果中间件是第三方应用程序的一部分；首先安装该应用程序。通常这是用`sudo easy_install package-name`. 用于`sudo`将其安装在全局 python`site-packages`目录中。

更好的方法是使用[虚拟环境](http://www.virtualenv.org/en/latest/index.html)。

# extjs - Extjs 4 - 面板与窗口

> ID：12267830
> 
> 赞同：4
> 
> 时间：2012-09-04T16:37:55.983
> 
> 标签：extjs, extjs4

Extjs 中的窗口和面板有什么区别？如果我使用窗口来显示和处理来自数据库的太多数据可以吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T16:54:01.533

> [Window](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.Window)是一个专门用作应用程序窗口的**[面板。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel)**默认情况下，窗口是浮动的、可调整大小和可拖动的。可以最大化窗口以填充视口，恢复到它们之前的大小，并且可以最小化。

因此，如果您不需要任何功能`window`- 使用面板。

# jdom - org.jdom.Document 无法解析。它是间接引用的形式，需要 .class 文件

> ID：12267833
> 
> 赞同：1
> 
> 时间：2012-09-04T16:38:01.797
> 
> 标签：jdom

我尝试使用 RSS 并收到以下错误：org.jdom.Document 无法解析。它是间接引用形式所需的 .class 文件。

我已经将 jdom jar 添加到我的构建路径并尝试了不同的版本，但没有任何效果。

我检查了 jdom jar，org.jdom.Document 不存在，但 jdom.src.org.jdom 存在。如果我将 jdom lib 的源代码提取到我的项目并将包名称更改为 org.jdom，它将解决错误。

但是，我只想使用 jar 文件，而不是实际来源。谁能帮我解决错误？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T03:30:29.497

在下载 JDOM 1.1.3 并将 build/jdom-1.1.3.jar 文件添加到 Eclipse 构建路径后，而不是 JDOM 2,x，它解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T23:30:44.703

我看到你“把它修好了”……但是，万一其他人遇到同样的问题……

我希望您有 jdom.zip 文件，而不是 jdom.jar 文件。jdom.zip 文件是分发包，在 jdom/build 目录中，您会找到实际的 jdom.jar 文件（或者，取决于版本， jdom-1.1.3.jar ）。

JDOM 2.x 具有不同的发布格式（带有几个 jar 的 zip 文件......）。

令人困惑，因此 2.x 中的不同发布格式

罗尔夫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-25T13:10:59.307

我遇到了同样的问题，发现我试图导入的 Document 或其他类在我的 jar 中的 jdom2 下发生了更改。即下载了jdom jars并添加到我的构建路径中。所以要导入我改为“import org.jdom2.Document”而不是“org.jdom.Document”。

检查 jar 包“jdom-2.0.6.jar”或特定版本中的类文件。

丹尼斯

# google-chrome - S3 CORS 不适用于 Chrome 中的 JQuery Ajax 请求

> ID：12267835
> 
> 赞同：5
> 
> 时间：2012-09-04T16:38:15.547
> 
> 标签：google-chrome, jquery, amazon-s3, amazon-web-services, cors

我有以下 S3 存储桶： http: [//my-bucket.s3-website-eu-west-1.amazonaws.com/](http://my-bucket.s3-website-eu-west-1.amazonaws.com/)

[根据http://docs.amazonwebservices.com/AmazonS3/latest/dev/cors.html](http://docs.amazonwebservices.com/AmazonS3/latest/dev/cors.html)，我添加了一个 CORS 配置：

```
<CORSConfiguration>
 <CORSRule>
<AllowedHeader>x-requested-with</AllowedHeader>
 <AllowedHeader>*</AllowedHeader>
   <AllowedOrigin>*</AllowedOrigin>
   <AllowedMethod>POST</AllowedMethod>
    </CORSRule>
 <CORSRule>
   <AllowedOrigin>http://*.test.com</AllowedOrigin>
   <AllowedMethod>POST</AllowedMethod>
 </CORSRule>
</CORSConfiguration> 
```

我使用 jquery 向我的存储桶发出 AJAX Post 请求（注意，来源是 jd.test.com:8000）：

```
$.ajax('http://my-bucket.s3-website-eu-west-1.amazonaws.com/', {
    type: "POST",
    data: $(":hidden", self).serializeArray(),
    files: $(":file", self),
    statusCode: {
      204: function(){
        //do something
      }
    }
}); 
```

提出请求后，我的 chrome 控制台抱怨：

```
XMLHttpRequest cannot load http://my-bucket.s3-website-eu-west-1.amazonaws.com/. Origin http://www.jd.test.com:8000 is not allowed by Access-Control-Allow-Origin. 
```

任何关于为什么没有发出 POST 请求的帮助将不胜感激。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:54:09.907

您的 CORSConfiguration 必须包含端口号，因为端口号是源的一部分，请参见例如[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T21:20:48.150

我刚刚写了一个简单的教程，它使用 Rails，但它可以很容易地被翻译成任何其他服务器框架。
上传由很棒的[jQuery 文件上传](http://blueimp.github.io/jQuery-File-Upload/)处理。并[使用 cors 直接上传到 s3](https://pjambet.github.io/blog/direct-upload-to-s3)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T10:52:21.217

我也将深入探讨这一点。您是否尝试将 AllowedMethod 更改为 PUT？文件上传是使用 PUT 而不是 POST 完成的。

- 编辑

傻我。我的 PUT 请求被禁止 403。POST 请求会给出 400 状态码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-24T16:21:40.220

我通过在 S3 存储桶上的 CORS 配置中将该`AllowedHeader`字段设置为来解决此问题。`*`

这是我完整的 CORS S3 配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>*</AllowedOrigin>
        <AllowedMethod>POST</AllowedMethod>
        <MaxAgeSeconds>3000</MaxAgeSeconds>
        <AllowedHeader>*</AllowedHeader>
    </CORSRule>
</CORSConfiguration> 
```

# checkstyle - 通过 Maven CLI 识别 CheckStyle 错误

> ID：12267837
> 
> 赞同：15
> 
> 时间：2012-09-04T16:38:22.833
> 
> 标签：checkstyle

我在命令行上通过**mvn**构建我的项目。

每当发生 checkStyle 错误时，我都会看到这种类型的输出：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-checkstyle-
plugin:2.4:checkstyle (default) on project myProject-server: 
An error has occurred in Checkstyle report generation. 
There are 2 checkstyle errors. -> [Help 1] 
```

如何找出导致这些 CheckStyle 失败的代码行？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-05T15:35:15.063

CheckStyle 将报告保存到`target/checkstyle-result.xml`（对于非模块化项目）。所以你可能会找到这个文件并检查它。

另一种情况是配置`maven-checkstyle-plugin`为向控制台显示所有此类警告/错误：

```
<consoleOutput>true</consoleOutput> 
```

# javascript - 动态虚拟目录和外部 javascript 链接

> ID：12267838
> 
> 赞同：0
> 
> 时间：2012-09-04T16:38:26.117
> 
> 标签：javascript, asp.net, html

嗨，我有一个快速的问题。

我有一个 home.aspx，在页眉的页面内我有一堆外部 javascript 文件的标签。我遇到的问题是每当有人添加目录时

```
http://localhost:444/differentnames/Home.aspx# 
```

然后 javascript 链接中断，无法找到。我试过 ../ 但即使这样似乎也不起作用。任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:17:37.970

尝试通过 Pae_Init 方法加载您的引用。

可以使用 Page.ClientScript.RegisterStartupScriptInclude() 方法来完成。

[http://msdn.microsoft.com/en-us/library/2552td66](http://msdn.microsoft.com/en-us/library/2552td66)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:11:24.380

像这样使用[ResolveClientUrl](http://msdn.microsoft.com/en-us/library/system.web.ui.control.resolveclienturl.aspx)：

```
<head runat="server" id="head1"> <!-- runat="server" is important -->
  <script src='<%=ResolveClientUrl("~/scripts/jquery-1.4.1.js") %>' /> 
```

`~`应用程序根目录在哪里。`ResolveClientUrl`无论页面的嵌套程度如何，都会适当地解决路径。

# javascript - 如何根据 x、y 和 z 在 3D 矩形中画线？

> ID：12267839
> 
> 赞同：1
> 
> 时间：2012-09-04T16:38:27.393
> 
> 标签：javascript, actionscript-3, 3d

![在此处输入图像描述](../Images/8b5cb9b89eb5a8a7bef381b4225a970b.png)

我想将图像中表示的 3D 点绘制为 3D 矩形。知道如何在 x、y 和 z 轴上表示这些

这里的投影类型是正交的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:43:02.517

好的。让我们看一个简单的例子，说明您要完成什么，以及为什么这是一个如此复杂的问题。

首先，让我们看一些投影函数。您需要一种数学方法来描述如何将 3D（或更高维）点转换为 2D 空间（您的显示器）或*投影*。

最容易理解的是一个非常简单的二元投影。就像是：

```
x' = x + z/2;
y' = y + z/4; 
```

这是什么意思？好吧，`x'`您是 x 坐标 2D*投影*吗：对于您在空间中*向后*移动的每个单位，*投影*都会将该点*向右*移动一半的单位。并`y'`代表您的 y 坐标的相同投影：对于您在空间中*向后移动的每个单位，该**投影*将将该点*向上*移动四分之一单位。

所以一个点将`[0,0,0]`被投影到一个 2d 点`[0,0]`。任意点将`[0,0,4]`投影到 的 2d 点`[2,1]`。

在 JavaScript 中实现，它看起来像这样：

```
// Dimetric projection functions
var dimetricTx = function(x,y,z) { return x + z/2; };
var dimetricTy = function(x,y,z) { return y + z/4; }; 
```

一旦你有了这些投影功能——或者从 3D 空间转换到 2D 空间的方法——你就可以使用它们来开始绘制你的图像。一个使用 js 画布的简单示例。首先，一些上下文的东西：

```
var c = document.getElementById("cnvs");
var ctx = c.getContext("2d"); 
```

现在，让我们做一个小帮手来绘制一个 3D 点：

```
 var drawPoint = (function(ctx,tx,ty, size) {
    return function(p) {
      size = size || 3;

      // Draw "point"
      ctx.save();
      ctx.fillStyle="#f00";
      ctx.translate(tx.apply(undefined, p), ty.apply(undefined,p));
      ctx.beginPath();
      ctx.arc(0,0,size,0,Math.PI*2);
      ctx.fill();
      ctx.restore();
    };
  })(ctx,dimetricTx,dimetricTy); 
```

这是一个非常简单的函数，我们将画布上下文注入为`ctx`，以及我们的`tx`and`ty`函数，在这种情况下，我们之前看到的 dimetric 函数。

现在是一个多边形抽屉：

```
 var drawPoly = (function(ctx,tx,ty) {
    return function() {
      var args = Array.prototype.slice.call(arguments, 0);

      // Begin the path
      ctx.beginPath();

      // Move to the first point
      var p = args.pop();
      if(p) {
        ctx.moveTo(tx.apply(undefined, p), ty.apply(undefined, p));
      }

      // Draw to the next point
      while((p = args.pop()) !== undefined) {
        ctx.lineTo(tx.apply(undefined, p), ty.apply(undefined, p));
      }

      ctx.closePath();
      ctx.stroke();

    };
  })(ctx, dimetricTx, dimetricTy); 
```

使用这两个函数，您可以有效地绘制您正在寻找的图形。例如：

```
// The array of points
var points = [
  // [x,y,z]
  [20,30,40],
  [100,70,110],
  [30,30,75]
];

(function(width, height, depth, points) {
  var c = document.getElementById("cnvs");
  var ctx = c.getContext("2d");

  // Set some context
  ctx.save();
  ctx.scale(1,-1);
  ctx.translate(0,-c.height);

  ctx.save();

  // Move our graph
  ctx.translate(100,20);  

  // Draw the "container"
  ctx.strokeStyle="#999";
  drawPoly([0,0,depth],[0,height,depth],[width,height,depth],[width,0,depth]);

  drawPoly([0,0,0],[0,0,depth],[0,height,depth],[0,height,0]);
  drawPoly([width,0,0],[width,0,depth],[width,height,depth],[width,height,0]);
  drawPoly([0,0,0],[0,height,0],[width,height,0],[width,0,0]);
  ctx.stroke();

  // Draw the points
  for(var i=0;i<points.length;i++) {
    drawPoint(points[i]);
  }

})(150,100,150,points); 
```

但是，您现在应该能够开始看到实际问题的一些复杂性出现了。即，您询问了旋转，在此示例中，我们使用了一个非常简单的投影（我们的二元投影），除了深度及其对 x,y 位置的影响之间的过度简化关系之外，它并没有太多作用。随着投影变得越来越复杂，您需要更多地了解您在 3D 空间中的关系/方向，以便创建合理的 2D 投影。

可以[在此处找到](http://jsbin.com/esutit/4/edit)上述代码的工作示例。该示例还包括等角投影函数，可以将其替换为二角投影函数，以查看它如何改变图形的外观。它还做了一些我在这里没有包含的不同的可视化内容，比如绘制“阴影”以帮助“可视化”实际方向——3D 到 2D 投影的限制。

这很复杂，即使是肤浅的讨论也超出了这个 stackoverflow 的范围。我建议您更多地阅读 3D 背后的数学知识，这里有大量资源，包括在线和印刷形式。一旦您对数学的基本原理有了更深入的了解，如果您有关于它的具体实现问题，请返回此处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T17:56:11.493

使用您所说的方法不可能做您想做的事情 - 这是因为一个盒子 - 在 3 维旋转时看起来不像您的图表。它也会根据您需要的投影类型而有所不同。但是，您可以开始使用[three.js](http://aerotwist.com/tutorials/getting-started-with-three-js/)，它是一个用于 Javascript 的 3D 绘图库。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T21:31:53.197

如何绘制 3D 矩形？发表于：平行四边形 | 更新日期：2012 年 9 月 14 日

绘制 3 - Dimensional Rectangle 意味着我们正在处理与 2 - D 图形不同的图形，后者需要 3 个轴来表示它们。那么，如何绘制 3D 矩形呢？

首先，首先在纸中间画两条线，一条竖线，一条横线，这样它们就代表了英文的“t”字母。这是我们需要绘制的临时使用，稍后将在 3-D 矩形构建完成后将其删除。接下来我们画一个正方形，其每边的尺寸为 1 英寸。正方形在几何上必须是完美的，以便在各个角形成的 90 度角在测量上是精确的。现在从正方形的右上角开始，我们绘制一条线段，该线段将在 45 度角的方向上拉伸到 2 英寸。同样，我们通过从正方形的左上角绘制另一个线段并以 45 度角将其拉伸到 2 英寸长来重复该过程。这两条线段被认为是相对于我们在开始时临时绘制的水平线的对角线。这些线也将彼此平行。接下来我们画一条连接这两条对角线端点的线。

接下来从 2 英寸对角线端点的最右侧开始，画一条 1 英寸的测量线，该线应该垂直于临时水平线。接下来，我们需要将正方形的左下角与我们在第 4 步中绘制的最后 1'' 线的端点连接起来，最后我们得到我们的 3-D 矩形。现在我们可以删除我们最初的“t”。这个 3D 矩形类似于长方体。

# php - 如果使用不同的模型，局部视图是否需要单独的控制器？

> ID：12267842
> 
> 赞同：0
> 
> 时间：2012-09-04T16:38:38.697
> 
> 标签：php, yii

我在我们的 Yii 框架站点中为一个页面创建了一系列的局部视图。每个局部视图都有自己的模型，因为它们调用主模型类的子部分。由于每个部分视图都有自己的模型，我是否需要为每个部分单独的控制器类？

我的用户控制器的 loadModel 部分如下：

```
public function loadModel($id,$model_name='Users')
{
    $model=Users::model()->findByPk($id);
    if($model===null)
        throw new CHttpException(404,'The requested page does not exist.');
    return $model;
} 
```

它是从用户控制器的这一部分调用的：

```
 public function actionProfile($id=''){        

        $user = Users::model()->find('username=:id', array
                (':id' => Yii::app()->user->id));           
        if(!$id){
            $id = $user->id;
            if(!$id)
            $this->redirect('login');
        }
        if( getUserSess('user_type') == 'Sitter') {
            $this->render('profile_detail', array('user_id' => $id ));
        } else {
            $this->render('petowner_profile_detail',array(
        'model'=>$this->loadModel($id),
    ));
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:01:50.550

我想我明白你想要做什么。我的回答是否定的，您不需要为每个局部视图单独的控制器操作。我将创建一个视图，然后调用所有部分视图。如果您使用 gii 创建您的 CRUD 功能，您将看到创建和编辑视图都调用表单的部分视图。你会做同样的事情，只在你的视图文件中调用多个局部视图。如果您需要不同的模型，只需确保您的控制器首先将它们传递给您的主视图文件，以便它可以将它们传递给局部视图。希望对您有所帮助。

如果没有关系，这里是代码：

```
$partialUser = new PartialUser::model->findByAttributes(array('uid'=>$id)); //IF NOT UID PUT WHATEVER YOU HAVE THE COLUMN NAME

            $this->render('petowner_profile_detail',array(
                'model'=>$this->loadModel($id),
                'partialUser' => $partialUser,
            )); 
```

如果你确实有一个关系设置，你可以很容易地做到这一点：

```
$current_user = $this->loadModel($id);
            $this->render('petowner_profile_detail',array(
                'model'=> $current_user,
                'partialUser' => $current_user->partialUser, //whatever you set the name of the relationship as in the model
            )); 
```

# javascript - 用线连接元素

> ID：12267846
> 
> 赞同：0
> 
> 时间：2012-09-04T16:38:59.133
> 
> 标签：javascript, css, lines

我正在尝试用水平白线连接 pin 元素和时间线元素。有谁知道如何使用 javascript 和 css 做到这一点？请参阅下面的参考链接。

提前致谢。

*   麦克风

[http://mikedemar.com/devresources/timeline/example.png](http://mikedemar.com/devresources/timeline/example.png)

[http://mikedemar.com/devresources/timeline/index.html](http://mikedemar.com/devresources/timeline/index.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:43:14.990

将标记放在带有 的容器中`overflow: hidden`，并使用伪元素绘制线条：

**HTML：**

```
<ul>
    <li class="handleicon"></li>
    <li class="handleicon"></li>
    <li class="handleicon"></li>
</ul> 
```

**CSS：**

```
ul {
    position: relative;
    overflow: hidden;
    height: 260px;
}

.handleicon {
    position: absolute;
    width: 33px;
    height: 50px;
    background: url(images/handlered.png);
}
.handleicon:before {
    content: '';
    width: 1px;
    height: 400px;
    background: #fff;
    position: absolute;
    top: 100%;
    left: 50%;
} 
```

这是小提琴：http: [//jsfiddle.net/AAPSg/](http://jsfiddle.net/AAPSg/)

# c++ - 使用 C++ AMP 时未命中 GPU 断点

> ID：12267847
> 
> 赞同：3
> 
> 时间：2012-09-04T16:39:01.247
> 
> 标签：c++, visual-c++, gpgpu, c++-amp

我已将调试器类型设置为`GPU only`并在 8 行`parallel_for_each`lambda 的每一行上设置断点，包括 line`parallel_for_each`语句，但它永远不会被命中。我在 Windows 8 Pro 上使用 Visual Studio 2012。

我需要采取什么步骤才能使断点工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T19:06:53.877

您的应用程序是否为 parallel_for_each 显式提供了加速器/加速器视图？如果是这样，您需要确保在调试时使用 REF 加速器，除非您的 GPU 驱动程序支持调试。

```
 accelerator defaultAcc (accelerator::default_accelerator);
    accelerator_view defaultView = defaultAcc.default_view;

#ifndef _DEBUG
    std::vector<accelerator> allAccelerators = accelerator::get_all();
    allAccelerators.erase(std::remove_if(allAccelerators.begin(), allAccelerators.end(), 
        [](const accelerator& acc){ return (acc.is_emulated) || 
                            (acc.device_path == accelerator::cpu_accelerator);} ),
                 allAccelerators.end());

    if (allAccelerators.size() > 0)
        defaultView = allAccelerators[0].default_view;
#endif 
```

# user-interface - 操作系统内的 GUI

> ID：12267848
> 
> 赞同：0
> 
> 时间：2012-09-04T16:39:06.553
> 
> 标签：user-interface, gtk, gnome, ui-thread

GUI 如何在操作系统中构建。让我们用两个例子，比如说 Ubuntu 中的 GTK+ 和 Java JFrame。我认为使用某种图形用户界面的操作系统必须提供一些系统调用才能显示窗口。因此，例如，如果我在一台机器上安装了一个版本的 Ubuntu，而无需下载任何软件，我应该能够进行系统调用来显示一个窗口。似乎情况并非如此。我必须安装和下载适用于 GTK+ 的 SDK，它允许我创建带有按钮等的窗口。那么我的问题是 Java，然后 Java 如何构建它的 JFrames？我知道有一个 Java 虚拟机运行在 Linux 系统之上，但是 Java 虚拟机是如何调用来实际显示窗口的呢？与 GUI 一起出现的是用户与之交互的事件。在 Java 级别，JVM 处理所有较低级别的调用，并且您会收到 OnClick() 事件等。JVM 是如何实际调用和处理这些调用的？与 GDK+ 一样吗？我知道这是一个广泛的问题，有许多不同的答案，但我们将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:49:07.913

我们以 Linux 为例。有几个层次：

*   内核 (Linux) 和操作系统 (GNU) - 知道如何使用硬件，包括图形。
*   窗口系统 (X) - 使用图形函数绘制窗口。
*   桌面（例如 Gnome） - 应用全局样式，例如窗口边框。
*   （通常）诸如 GTK 之类的工具包 - 了解小部件、如何绘制它们以及如何设置它们的样式。
*   你的申请。

在 Windows 上，内核、操作系统、窗口系统、桌面和小部件都捆绑在一起。在这种情况下，工具包可能不会绘制自己的小部件，而是直接从 Windows 中使用它们。

在任何情况下，该工具包都会将您的应用程序与特定于平台的细节隔离开来，并自动执行正确的操作。

# vba - Excel VBA - 使用 VBA 创建新的格式化工作簿

> ID：12267849
> 
> 赞同：2
> 
> 时间：2012-09-04T16:39:09.287
> 
> 标签：vba, excel

我正在尝试编写程序的最后一部分，我需要从 Access 文档中提取数据并将其打印到新的工作簿中。

首先，我将获取产品供应商的名称并创建一个包含每个供应商名称的工作表，然后我想遍历每张表并打印来自每个供应商的订购产品。

我真的很纠结如何打开一个新的工作簿并在我的信息中打印。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T17:33:01.733

由于我之前的答案已被删除（被认为“不足”），我必须提供一个更好的答案。

如果要将数据从 Access 输出到 Excel，则必须按照以下步骤操作：

1.  创建（或打开）新工作簿
2.  读取您的数据
3.  将数据写入工作簿
4.  格式化工作簿中的数据

我将重点放在数据输出上，将格式化省略（数据部分是复杂的......格式化很容易）

首先，您需要在 Access 文件中启用 Excel 对象：工具菜单 > 参考。找到*Microsoft Excel 12.0 对象库*并激活复选框。现在您可以使用完整的 Excel 库了 :-)

现在是处理数据的时候了。我假设您需要创建一个新工作簿：

```
public sub createExcelFile()
    dim XL as Excel.Application, WB as Excel.Workbook, WKS as Excel.Worksheet
    dim db as DAO.database, rec as DAO.recordset, f as DAO.field
    dim i as integer, j as integer

    ' Prepare your Excel stuff
    Set XL = new Excel.Application
    XL.Visible = True
    Set WB = XL.Workbooks.Add 
    WB.Activate
    Set WKS = WB.ActiveSheet ' Default: The first sheet in the newly created book

    ' Read your data here
    set db = currentdb()
    set rec = db.openrecordset("tblSampleData")

    ' A simple table that will show the data from rec
    ' i and j will be the coordiantes of the active cell in your worksheet
    with rec
        .movefirst

        ' The table headers
        i = 1
        j = 1
        for each f in .fields
            WKS.cells(i,j).value = f.name
            j = j + 1
        next f

        ' The table data
        do
            i = i+1
            j = 1
            for each f in .Fields
                WKS.cells(i,j).value = f.value
                j = j+1
            next f     
            .moveNext     
        loop until .EOF
    end with
end sub 
```

如果要格式化单元格，可以使用`WKS.cells(i,j)`（或`WKS.range(...)`）属性。

看看我之前留下的链接（Siddarth Rout 很乐意将其移至评论）。

我希望这可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:02:23.290

```
Option Compare Database
Public Function format(filepath, sheetname)

Set xls = CreateObject("EXCEL.APPLICATION")
xls.screenupdating = False
xls.displayalerts = False
xls.Visible = True
xls.workbooks.Open filepath
Set xlsdd = xls.ActiveWorkbook 
```

'删除标题

```
xls.Range("1:1").Select
xls.Selection.Delete Shift:=xlUp 
```

'添加一列

```
 xls.Columns("A:A").Select
   xls.Selection.Insert Shift:=xlToRight, CopyOrigin:=xlFormatFromLeftOrAbove

'adding 5 rows 
```

'ActiveWorkbook.Sheets("sheet1").Select

```
xls.Rows("1:5").Insert Shift:=xlDown 
```

'从access中取出行并放入excel

```
strsql = "select top 5 " & sheetname & ".* into top5_records from " & sheetname
DoCmd.RunSQL strsql
outputFileName = "C:\Users\hp\Desktop\top5_records.xls"
 DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel9, "top5_records",    outputFileName, True 
```

'然后打开那个excel并复制行

```
Set xls2 = CreateObject("EXCEL.APPLICATION")
xls2.screenupdating = False
xls2.displayalerts = False
xls2.Visible = True
xls2.workbooks.Open outputFileName
Set xlsdd2 = xls.ActiveWorkbook
 xls2.Rows("1:5").Select
 xls2.Selection.Copy
  xls.Cells(1, 1).Select
 xls.activesheet.Paste

     '  Dim currdb As DAO.Database
'  Dim rst As DAO.Recordset
'
'  Set currdb = CurrentDb
'  Set rst = currdb.OpenRecordset(strsql) '<<<Opens query recordset via DAO
'  rst.MoveLast
'  rowsToReturn = rst.RecordCount
'  Set rng = xls.Cells(1, 1)
'  'copy specified number of records to worksheet
'
'rng.CopyFromRecordset rst, rowsToReturn '<<<Gets all records in recordset 
```

'使第 6 行加粗

```
 xls.Rows("6:6").Select
  With xls.Selection.Font
  .Bold = True
  .Name = "Arial"
    .Size = 10
    .Strikethrough = False
    .Superscript = False
    .Subscript = False
    .OutlineFont = False
    .Shadow = False
End With 
```

'自动拟合数据

```
xls.Sheets(sheetname).Cells.Columns.autofit
xls.CutCopyMode = False
With xlsdd
.Save
.Close
End With
xls.Visible = False

Set xlsdd = Nothing
Set xls = Nothing

End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T18:06:13.220

你没有提供很多细节，所以我不能给你很多细节作为回报。但我会这样做：

1.  使用两张工作表手动创建新工作簿
2.  在一张纸上，添加一个外部数据表，该表返回供应商名称列表，例如 SELECT SupplierName FROM tblSuppliers WHERE Active=True; 或类似的东西。
3.  创建一个使用该查询表动态扩展的工作簿级别的命名范围
4.  在第二张表上，添加一个外部数据表，例如 SELECT * FROM Orders WHERE SupplierName=? （这将是一个参数查询）。在第 3 行启动该外部数据表
5.  我排，放了一个指向供应商列表的组合框。

现在 VBA 很简单

```
ThisWorkbook.RefreshAll 
```

您将拥有一张可以更改供应商的表格，而不是每个供应商一张。这是您需要的技能

*   创建外部数据表
*   创建参数查询（旧参考[http://www.dicks-clicks.com/excel/ExternalData6.htm](http://www.dicks-clicks.com/excel/ExternalData6.htm)）
*   创建动态扩展范围名称
*   添加指向不同工作表上的范围的组合框或数据验证
*   上面那个 SQL 显然是不对的，但是我假设你可以写出正确的 SQL 语句

您应该能够找到所有这些的详细信息，但如果没有，请发布另一个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T16:47:22.323

您可以将列/行宽度定义为静态像素量或自动调整，例如粗体是预定义的

例子

```
Selection.Font.Bold = True
```

您还可以制作模板电子表格，将内容复制到模板中并另存为。您的帖子并未说明实际需要进行多少格式化。

# javascript - 浏览完某个页面后，在重定向页面上有一个js模态弹窗

> ID：12267852
> 
> 赞同：0
> 
> 时间：2012-09-04T16:39:14.433
> 
> 标签：javascript, jquery, python, html

我不知道该怎么做。我想要的是在用户查看完某个页面后出现一个模式页面。

例如，如果用户在`payment.html`他们付费并被重定向到`feed.html`. 在`feed.html`页面上，我想要一个感谢模式弹出窗口。但只有在用户访问了支付页面之后。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T16:44:12.497

可能是这样的：

```
$(document).ready(function() { 
   var entryPage = "payment.html";
   var referrer =  document.referrer; 
   if (referrer.indexOf(entryPage) >= 0){
      // Code to show modal goes here
   }
}); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-04T16:45:50.450

您可以使用会话来跟踪页面访问。

如果您不想在每次他加载任何其他页面时显示。在包含的文件中放置代码

```
if(isset($_SESSION['visited']) && $_SESSION['visited'] = 1){
//show modal pop_up 
```

$_SESSION['已访问'] = '2'; }

# php - 自 php 5.4 以来，在 CakePHP 2.1 中找不到类“X”

> ID：12267856
> 
> 赞同：3
> 
> 时间：2012-09-04T16:39:26.763
> 
> 标签：php, cakephp

我已将我的机器从 PHP 5.3 更新到 PHP 5.4，而我的 CakePHP（2.1.1 版）应用程序不断收到以下错误：

> 致命错误：在线.../Behavior.php 中找不到类“字符串”...
> 
> 致命错误：在线.../Component.php 中找不到类“调试器”...

等等。

这些错误真的没有用，因为错误的 LINE 和 FILE 总是声明类声明的结束括号。

经过大量搜索，我设法通过添加适当的公共/私有函数声明和强参数类型来解决一些错误，AKA：

```
function beforeSave($Model) {}

//becomes
public function beforeSave(Model $Model){} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T16:39:26.763

迁移到 PHP5.4 后，你必须清理代码中的很多“坏习惯”。

**扩展方法中的强类型参数定义**

这意味着您必须在变量名之前编写该方法接收的对象的类。这只需要替换父类方法的方法，而不是所有方法。如果不确定，只需检查核心文件或 API 中父类中的方法声明即可。

```
// Behavior code
public function afterSave(Model $model, $created) //GOOD 
function aferSave($model) //NOT GOOD
// Component code
public function shutdown(Controller $Controller) // GOOD
function shutdown($Controller) // BAD 
```

**删除“调用时通过引用传递”**

我已经看到很多人通过引用在函数中传递 arround Controller 和 Model 对象：

```
function beforeSave(&$Model) 
```

这会引发错误并且是错误的。只需删除变量前的 & 符号。您不会破坏任何功能，因为对象已经在 PHP 中通过引用传递，并且据我所知，[这已在 PHP 5.4 中删除](http://www.php.net/manual/en/migration54.incompatible.php)。

**在扩展方法中声明所有方法参数**

如果覆盖父类的方法，则应在函数定义中声明所有函数参数。如果缺少参数，您将收到错误消息。

例子：

```
SomeBehavior extends ModelBehavior
public function afterSave(Model $Model){ } //WRONG, but works in 5.3
public function afterSave(Model $Model, $created){ } //RIGHT, works everwhere :) 
```

**添加 App::load() 以加载依赖项**

检查您的类是否真的可用总是好的，因此请仔细检查您是否在文件开头使用[App::load()加载了所有依赖的类。](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#App::load)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T10:15:18.283

另一种解决方案是将 Core.php 中的错误报告级别更改为：

```
Configure::write('Error', array(
    'handler' => 'ErrorHandler::handleError',
    'level' => E_ALL & ~E_DEPRECATED & ~E_STRICT,
    'trace' => true
)); 
```

请注意，这不是一个理想的解决方案，请修复您的代码！

# c++ - 什么时候对原始整数的右值引用是短命的或长命的？

> ID：12267860
> 
> 赞同：0
> 
> 时间：2012-09-04T16:39:37.137
> 
> 标签：c++, c++11, rvalue-reference

我已经使用 TDM-GCC 4.6.1 编译器对右值引用进行了一些实验，并做出了一些我无法用理论解释的有趣观察。我希望那里的专家能帮助我解释它们。

我有一个非常简单的程序，它不处理对象而是 int 原语，并且定义了 2 个函数：foo1（通过右值引用返回局部变量）和 foo2（通过值返回局部变量）

```
#include <iostream>

using namespace std;

int &&foo1();
int foo2();

int main()
{

int&& variable1 = foo1();
//cout << "My name is softwarelover." << endl;
cout << "variable1 is: " << variable1 << endl; // Prints 5.
cout << "variable1 is: " << variable1 << endl; // Prints 0.

int&& variable2 = foo2();
cout << "variable2 is: " << variable2 << endl; // Prints 5.
cout << "variable2 is still: " << variable2 << endl; // Still prints 5!

return 0;
}

int &&foo1() {

int a = 5;
return static_cast<int&&>(a);
}

int foo2() {

int a = 5;
return a;
} 
```

似乎 foo1 返回并由 variable1 接收的值在一段时间后消失了——也许是几毫秒的短暂时间。请注意，我已通过注释掉 cout 来阻止打印“我的名字是软件爱好者”。如果我允许该语句运行，结果会有所不同。它不是打印 5, 0 而是打印 0, 0。似乎是因为“cout << "My name is softwarelover." 引入了时间延迟，所以 5 变成了 0。

以上是在引用原始整数时，右值引用应该如何表现，该原始整数是通过引用返回的函数而不是按值返回？对了，为什么是0，为什么不是垃圾？

还要注意 variable2 似乎永远不会消失，无论我用 cout 打印多少次！variable2 指的是一个原始整数，它是一个函数按值返回，而不是按引用返回。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T16:45:44.453

右值引用仍然只是引用。函数返回后，对函数局部变量的引用无效。你很幸运，你的右值引用在函数调用后的任何时候都是 5，因为它在函数返回后在技术上是无效的。

**编辑**：我正在扩展我的答案，希望有些人会发现一些有用的额外细节。

在函数内部定义的变量是函数局部变量。该变量的生命周期仅限于声明它的函数内部。您可以将其视为在函数返回时被“销毁”，但它并没有真正被销毁。如果它是一个对象，那么它的析构函数将被调用，但保存变量的内存仍然存在。您对该变量的任何引用或指针仍指向内存中的同一位置，但该内存已被重新使用（或可能在未来某个不确定的时间被重新使用）。

旧值（在您的情况下为“5”）仍会存在一段时间，直到出现某些东西并覆盖它。没有办法知道这些值仍然存在多长时间，并且任何人都不应该依赖它们在函数返回后的任何时间内仍然存在。考虑到函数返回后对函数局部变量的任何引用（或指针）都无效。打个比方，如果你去敲门，你可能不会觉得新租户很讨人喜欢。

# objective-c - 读取 plist 文件崩溃

> ID：12267861
> 
> 赞同：0
> 
> 时间：2012-09-04T16:39:51.797
> 
> 标签：objective-c, ios, plist, read-write

读入确实加载：

```
 NSFileManager *fileManager = [NSFileManager defaultManager];

if (![fileManager fileExistsAtPath: path]) //4
{
    NSString *bundle = [[NSBundle mainBundle] pathForResource:@"data" ofType:@"plist"]; //5

    [fileManager copyItemAtPath:bundle toPath: path error:&error]; //6
}

//load in text fields.
NSMutableDictionary *savedData = [[NSMutableDictionary alloc] initWithContentsOfFile: path];

nameField.text = [[savedData objectForKey:@"name"] stringValue];
locationTextField.text = [[savedData objectForKey:@"location"] stringValue];
sectorTextField.text = [[savedData objectForKey:@"sector"] stringValue]; 
```

写在按钮点击：

```
 - (IBAction)writingButton:(id)sender
{
    NSMutableDictionary *data = [[NSMutableDictionary alloc] initWithContentsOfFile: path];

    //[data setObject:[NSNumber numberWithInt:value] forKey:@"value"];
    [data setObject:[NSString stringWithString:nameField.text] forKey:@"name"];
    [data setObject:[NSString stringWithString:locationTextField.text] forKey:@"location"];
    [data setObject:[NSString stringWithString:sectorTextField.text] forKey:@"sector"];
} 
```

plist文件：

![在此处输入图像描述](../Images/b2c65cca5a325703332bdc0b7a583833.png)

错误：

> 2012-09-04 17:03:40.360 app[4849:c07] -[__NSCFString stringValue]: 无法识别的选择器发送到实例 0x6aa38f0 2012-09-04 17:03:40.362 app[4849:c07] *** 终止应用程序到期未捕获的异常 'NSInvalidArgumentException'，原因：'-[__NSCFString stringValue]: unrecognized selector sent to instance 0x6aa38f0'

有任何想法吗？干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T16:43:20.733

字典直接存储 NSString 对象 - 无需调用（不存在的）方法称为`- stringValue`. 简单地写

```
nameField.text = [savedData objectForKey:@"name"]; 
```

等等。

（为什么你认为这个方法调用是必要的？）

# c# - WINRT 媒体元素顶部的网格导致视频为空白

> ID：12267864
> 
> 赞同：1
> 
> 时间：2012-09-04T16:40:14.280
> 
> 标签：c#, windows-runtime

我在页面上有一个 MediaElement 全屏。最重要的是，我有一个网格，其中包含控件（播放、暂停等）和有关视频的一般信息。这些控件在没有用户交互的几秒钟后被隐藏。

如果控件的任何部分与正在播放的视频重叠，则整个视频将被消隐，只有在控件网格折叠时才会重新出现。是否不可能在媒体元素的顶部进行任何类型的控制？

我注意到作为 Windows8 RTM 一部分的“视频”应用程序在正在播放的视频的顶部具有这种效果。

更新：我找到了问题但不是解决方案。我正在尝试使用“全局”媒体元素，以便可以在不同的页面（全屏、预览等）上查看它。我找到了这个答案

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/241ba3b4-3e2a-4f9b-a704-87c7b1be7988](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/241ba3b4-3e2a-4f9b-a704-87c7b1be7988)

并按照 Jim Man 的建议在根框架上创建一个 MediaElement，然后在需要时拉出该项目。只要我说 CurrentPageMediaElement = RootFrameMediaElement，问题就会发生

我认为它将媒体元素的 z 顺序更改为根框架中“全局”媒体元素的 z 顺序？我不确定为什么当 ControlsGrid 折叠时它会显示视频，因为根网格仍然存在。如果我将根网格更改为不透明度小于 1，我会一直看到媒体元素，如下面的代码所示。

如果有人有更好的方法来分享全球媒体元素，那也可以。

```
//Here I Can't See The MediaElement
<Grid Style="{StaticResource LayoutRootStyle}" Background="Black">
    <MediaElement x:Name="MainMediaElement" />
    <Grid x:Name="ControlsGrid" Opacity="0.7" />
</Grid>

//Here I Can See The Media Element
<Grid Style="{StaticResource LayoutRootStyle}" Background="Black" Opacity="0.7">
    <MediaElement x:Name="MainMediaElement" />
    <Grid x:Name="ControlsGrid" Opacity="0.7">
</Grid> 
```

# matlab - 如何从 MATLAB 输出中抑制“ans”行？

> ID：12267865
> 
> 赞同：4
> 
> 时间：2012-09-04T16:40:29.273
> 
> 标签：matlab

> **编辑**：上面的问题*严格关注 MATLAB****在交互式会话中***默认生成的输出，如给定示例所示。我对修改脚本、函数、方法等产生的输出外观的方法***不感兴趣。***

此外，这样做的动机是保留更多笔记本电脑*极其*稀缺的“屏幕空间”，以提供*实际信息输出*。

* * *

即使使用，除了显示正确输出的行之外`format compact`，MATLAB 的输出还包括一行。`ans =`例如

```
>> format compact
>> date
ans =
04-Sep-2012
>> 
```

有没有办法抑制这`ans =`条线，例如，上面的最后一次交互看起来像这样？：

```
>> date
04-Sep-2012
>> 
```

...或者至少像这样？：

```
>> date
ans = 04-Sep-2012
>> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T20:55:54.210

这有点棘手，可能会产生其他后果，但如果您主要显示某种类型的数据（double、char 等），则可以覆盖相应的内置显示方法。

例如，

```
>> % Before overwriting the @char/display
>> date
ans =
04-Sep-2012 
```

`@char`现在在 MATLAB 路径上的位置创建一个目录并添加一个名为 的方法`display.m`：

```
function display(x)
disp(x)
end 
```

那么你会有

```
>> % After overwriting the @char/display
>> date
04-Sep-2012 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T16:53:03.703

`ans`仅仅是 MATLAB 存储其“最后”答案的变量的名称。“避免它”的最简单方法是将结果分配给其他变量并使用`fprintf`or以清晰的方式将其打印出来`sprintf`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-27T10:40:45.160

`disp(sprintf('<Your format>',<variables>)`做这项工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T18:38:05.007

如果您正在为您的工作创建一个新课程，那么您将有一些选择。命令窗口上的“漂亮”显示是由`display`所有类继承的方法创建的/通常`display`打印变量的名称，“=\n”，然后调用`disp`您可能熟悉的方法。（`help display`详情）。

但是，对于标准的Matlab数组，这些方法都是内置的，我不相信可以修改它们。

`sprintf`因此，如果您正在构建工具（ 、、、[各种工具来破解底层 java 显示](http://undocumentedmatlab.com/blog/cprintf-display-formatted-color-text-in-command-window/)） ，虽然您有无穷无尽的选择`fprintf`，但我不知道有什么方法可以在快速、交互式工作期间将“更紧凑”的显示样式设置为默认值。`disp`

# asp.net-mvc - 如何在 asp.net mvc 4 Visual Studio 2012 中首先使用 ef 代码和 sql server ce

> ID：12267869
> 
> 赞同：1
> 
> 时间：2012-09-04T16:40:35.903
> 
> 标签：asp.net-mvc, entity-framework

我正在尝试使用 SQL Server 精简版 4.0 创建一个简单的 EF 代码第一个示例。使用的技术包括：Visual Studio 2012 Ultimate。

所以我创建了一个简单的 poco 类：

```
namespace MvcApplication2.Models
{
    public class Customer
    {
        public int CustomerId { get; set; }
        public string CustomerName { get; set; }
    }
} 
```

还有一个简单的上下文类：

```
namespace MvcApplication2.Models
{
    public class CustomerEntity : DbContext
    {
        public DbSet<Customer> Customers { get; set; }
    }
} 
```

然后我尝试使用模板创建一个控制器类：MVC Controller with read/write actions and views using entity framework。

*   模型类 -> 客户
*   数据上下文类 -> CustomerEntity

我收到以下错误：

> Unable to retreive metadata for ... 不支持使用相同的 dbcompiledmodel 针对不同类型的数据库服务器创建上下文。...

我应该说这个完全相同的代码使用 LocalDB 没有问题。

我认为需要的唯一区别是将以下内容添加到 web.config 文件中。

```
<add name="CustomerEntity"
     connectionString="Data Source=|DataDirectory|CustomerEntity.sdf"
     providerName="System.Data.SqlServerCe.4.0" /> 
```

我还缺少其他东西吗？

我知道我不可能是唯一一个遇到这个问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:24:46.673

您在 EF 缓存中复制数据库和在 App_Data 中复制数据库的问题。解决此问题的最简单方法是注释您的默认构造函数**CustomerEntity**，从模板创建控制器，然后取消注释。

# c - 从其他线程调用 FD_SET，选择仍然阻塞

> ID：12267877
> 
> 赞同：0
> 
> 时间：2012-09-04T16:41:22.163
> 
> 标签：c, linux, sockets, select

我在使用单选调用编写我的第一个异步服务器时遇到了这个问题：

```
if( (retv = select((hsock<highestsocket?highestsocket:hsock)+1, &rFdx, &wFdx, &eFdx, 0) ) > 0)
{
   printf("select() ended...\n");
    if(FD_ISSET(hsock, &rFdx))
    {
      // .... handle new connection
    }

    for(unsigned int i=0; i < ClientList.size(); i++)
    {
      ServerClient* client = ClientList[i];

      if(FD_ISSET(client->socket, &rFdx))
      {
        // handle client read
      }
      if(FD_ISSET(client->socket, &wFdx))
      {
           // handle client write
      }    

    }
} 
```

我希望在从其他线程调用 FD_SET 时选择停止等待然后处理客户端写入。

如果我从同一个线程调用客户端套接字上的 FD_SET，一切都会按预期工作。但是从其他线程调用它什么都不做，选择会一直等待，直到从客户端接收到任何数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:50:27.440

当然，您不能在一个线程中修改数据并期望在没有适当同步的情况下该修改在其他线程中可见。很可能在被调用时立即`select`读取`fd_set`它，然后再也不看它；`select`但无论如何，如果已经被调用，则无法获得必要的同步。你真的需要重新考虑你的设计。一种解决方案是“自管道”技巧：打开一个`select`始终在寻找输入的管道，并让您的其他线程通过管道发送消息以取消任何挂起`select`并让`select`线程重新扫描文件描述符表它应该正在查看（使用适当的同步！）并更新自己`fd_set`的 s。

# applescript - 如何使用 AppleScript 填充弹出按钮？

> ID：12267882
> 
> 赞同：0
> 
> 时间：2012-09-04T16:41:42.953
> 
> 标签：applescript

我在“网络”周围的各个地方找到了这段代码：

```
tell window 1
  tell menu of popup button 1
    delete every menu item
    repeat with catListItem in catList
      make new menu item at end of menu items with properties {title:catListItem}
    end repeat
  end tell
end tell 
```

当我在 Cocoa-AppleScript 应用程序的 AppDelegate 脚本中使用它时，Xcode 给我一个错误：*t2t_AppDelegate.applescript:25: error: Expected end of line but found identifier。(-2741)*（第 25 行是“告诉菜单...”）

我不确定我缺少什么可以让我使用从另一个应用程序中提取的术语列表 (catList) 动态填充弹出按钮。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:43:54.910

除非您运行的东西早于 Snow Leopard，否则看起来您正在使用 AppleScript Studio 术语（在 Snow Leopard 中已弃用）。使用当前的**AppleScriptObjC**框架，用户界面项通过插座属性引用，例如：

```
property myPopUp : missing value 
```

在界面编辑器中，此属性连接到您的弹出按钮，这允许您将它与[NSPopupButton](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSPopUpButton_Class/Reference/Reference.html)类及其父类中的各种方法一起使用，例如**addItemsWithTitles**。定义并连接所有内容后，您将使用以下内容：

```
set catList to {"next item", "another item", "Items added"}
myPopUp's addItemsWithTitles_(catList) 
```

# c# - 通过事件通知实例

> ID：12267886
> 
> 赞同：2
> 
> 时间：2012-09-04T16:42:03.250
> 
> 标签：c#, events

我想我想做的很简单，但我做不到

我在 A 类的某处有一个静态事件：

```
public static event Action OnInvalidated; 
```

当我的数据无效时我会调用它。当我实例化一个 B 类型的新类时，我想做以下事情：

```
A.OnInvalidated+= () => this.RefreshColumns(); 
```

基本上我想在 OnInvalidated 触发时对每个注册的实例调用 RefreshColumns。

这编译得很好，但是当我处理我的对象时如何删除 lambda 函数？我认为这样做

```
 A.OnInvalidated-= () => this.RefreshColumns(); 
```

行不通，我也不能申报

```
Action myAction = () => this.RefreshColumns(); 
```

作为函数成员

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:05:09.913

尝试如下：

```
class A : IDisposable
{
    public static event Action OnInvalidated;

    public A()
    {
        A.OnInvalidated +=  this.SomeMethod();
        A.OnInvalidated +=  this.SomeOtherMethod();
    }

        public void Dispose()
        {
        A.OnInvalidated -=  this.SomeMethod();
        A.OnInvalidated -=  this.SomeOtherMethod();
        }

    public SomeMethod()
    {

    }

    public SomeOtherMethod()
    {

    }
} 
```

请注意，如果要避免内存泄漏，请务必在 Dispose() 中实现 IDisposable 并取消订阅所有静态事件。否则静态事件的订阅者将永远不会被垃圾收集，因为事件维护对对象的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T17:08:34.483

首先，而不是这样做：

```
A.OnInvalidated+= () => this.RefreshColumns(); 
```

只需直接分配方法（注意`()`缺少以及 lambda 声明）：

```
A.OnInvalidated += this.RefreshColumns; 
```

然后，当您取消订阅时，您只需执行以下操作：

```
A.OnInvalidated -= this.RefreshColumns; 
```

我认为问题在于您在不需要时引入了此匿名 lambda，从而使取消订阅该方法变得更加困难。

# php - 创建可写目录

> ID：12267889
> 
> 赞同：4
> 
> 时间：2012-09-04T16:42:15.940
> 
> 标签：php, filesystems, chmod, mkdir

对于一个项目，我正在实施一个文件上传系统。对于每个用户帐户，我希望脚本创建一个不同的子文件夹。让我们说他们的user_id。

每次添加用户时，系统都会为他们自己的上传创建一个新的子文件夹。例如：

上传/ - user1 - user2 - user3

通过执行 mkdir('Uploads/'.$user_id, 0777); 它将创建一个新的子文件夹。一切都很好。

但是我的应用程序无法写入此文件夹。如何让 php make 目录具有所需的文件权限？我尝试使用 chmod 没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:58:18.400

这可能有助于[chmod](http://php.net/manual/en/function.chmod.php)和[mkdir](http://php.net/manual/en/function.mkdir.php)

```
$dirMode = 0777;
mkdir($directory, $dirMode, true);

// chmod the directory since it doesn't seem to work on recursive paths
chmod($directory, $dirMode); 
```

对于 mkdir，模式在 Windows 上被忽略。默认情况下为 0777。第三个参数是递归的，它允许创建路径名中指定的嵌套目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:53:57.857

有时创建的目录不是指定的模式（0755 而不是 0777 等）。解决这个用途：

```
<?php 
$old = umask(0); 
mkdir($dir,0777); 
umask($old); 
?> 
```

# javascript - 移动定时触摸事件

> ID：12267891
> 
> 赞同：0
> 
> 时间：2012-09-04T16:42:41.847
> 
> 标签：javascript, jquery, html, css, mobile

我正在尝试设置一个事件以使用 touchstart 和 touchend 显示一些共享选项。这是本机应用程序中的一个非常标准的功能，但我在移动网络上没有看到太多。该事件将允许用户点击网站的主要内容区域，如果点击时间超过 1 秒，则会在屏幕上滑动一个选项框，显示用于共享页面内容的选项。

下面的函数适用于第一个事件，但如果用户多次触发该事件，它会在没有 1 秒触发事件的要求下触发。

任何人都可以提出更好的方法或看看为什么计时器每次都不起作用？

```
if ( typeof ontouchstart != 'undefined' && typeof ontouchend != 'undefined' ) { 
var touchStartOrClick = 'touchstart', touchEndOrClick = 'touchend'; 
} else {
var touchStartOrClick = 'click', touchEndOrClick = 'click'; 
};

function shareTog(){
    $('.sharing-pop').animate({width: 'toggle'});
}

var touchTrigger;

$('#content').bind(touchStartOrClick, function(){
    setInterval(function(){
        touchTrigger = true;
    }, 1000);
}).bind(touchEndOrClick, function(){
    window.clearInterval();
    if(touchTrigger == true){
        shareTog();
        touchTrigger = false;
    }
}); 
```

我知道使用 jQuery Mobile 会更容易做到这一点，但不幸的是这不是一个选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:12:42.753

[zepto](https://github.com/madrobby/zepto)是您不错的选择。它的触摸模块提供了一个很好的事件处理程序。

或者你可以查看[zepto touch的源码](https://github.com/madrobby/zepto/blob/master/src/touch.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:03:27.303

我明白你的意思，但我认为这在网络浏览器中不是一个好的解决方案。例如，在 Android 上，当您长按网页上的内容时，您已经得到了一个弹出窗口。您将不得不阻止该事件处理程序，但这意味着您将获得本地化。

# java - 如何在android的ImageView中加载和显示不同名称的文件夹中的图像？

> ID：12267892
> 
> 赞同：2
> 
> 时间：2012-09-04T16:42:48.467
> 
> 标签：java, android

这些是Android程序的代码片段......我试图在ImageView中显示图像。但是，在通过删除常量值使其动态化的同时，程序给了我一个我无法解决的错误......

```
public void onCreate(Bundle savedInstanceState) 
{
        Class<drawable> resources = R.drawable.class;
        Field[] fields = resources.getFields();

        for (Field field : fields) 
        {
            imgName[n]=field.getName();
            n++;
        }
        while(cnt!=n)
        {
            int resID = getResources().getIdentifier(imgName[cnt], "drawable","com.example.imageviewpckg");
            imgList[cnt]=resID;
            cnt++;
        }
} 
```

我们可以编写上面的代码来`int`用 ImageView 初始化数组，`ids`而不是像下面的代码行所示的固定初始化...

下面这行给了我正确的输出：

```
int imgList[] ={
                  R.drawable.img1,
                  R.drawable.img2,
                  R.drawable.img3,
                  R.drawable.img4,
                  R.drawable.img5,
                  R.drawable.img7
                }; 
```

# javascript - 眨眼计时器

> ID：12267893
> 
> 赞同：3
> 
> 时间：2012-09-04T16:42:57.760
> 
> 标签：javascript, jquery, animation, blink

我正在用很少的吉祥物创建这个网站，我将实现一个“眨眼计时器”，让每个吉祥物都眨眼。

我的问题是：我如何在任何语言上实现（以及它是多长时间？）闪烁和闪烁本身之间的延迟（我可能会使用 Javascript，但现在没关系）。

有没有关于“眨眼算法”之类的资源？

编辑：我知道如何使用 setTimeout 和 setInterval，我的问题更多是关于算法而不是实现本身。

* * *

最后结果：

```
var blink = {
    delay: function() {
        return Math.random() * 8000 + 2000;
    },
    duration: function() {
        return 100 + Math.floor(Math.random() * 100);
    },
    blinkAgain: function() {
        return (Math.random() < .2);
    },
    betweenBliks: function() {
        return blink.duration() / 2;
    }
};

$.fn.blink = function(continueBlinking) {
    var $element = $(this);

    // Star the blink
    $element.addClass('blink');

    // Finish the blink
    setTimeout(function() {
        $element.removeClass('blink');

        // Change of blinking again
        if (blink.blinkAgain()) {
            setTimeout(function() {
                $element.blink(false);
            }, blink.betweenBliks());
        }
    }, blink.duration());

    // Continue blinking?
    if (continueBlinking) {
        setTimeout(function() {
            $element.blink(true);
        }, blink.delay());
    }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T16:51:21.863

> 眨眼的频率各不相同，但平均每五秒眨眼一次。这
> 相当于每天 17,000 次或每年 625 万次。
> 
> [资源](http://www.enotes.com/science/q-and-a/how-often-does-human-eye-blink-289010)

假设您有一个`blink`执行“闪烁”的功能，您可能只想做这样的事情：

```
setInterval(blink, 5000); // 5000ms i.e. 5s 
```

如果您想要在眨眼中多一点“随机性”，您可以执行以下操作：

```
function blink() {
    [...] // The blinking
    setTimeout(blink, 5000 + ((Math.random() - 0.5) * 2000));
} 
```

如果我的计算正确，它将在 4000 到 6000 毫秒之间以随机方式调用 blink 函数，因为它`Math.random()`返回的值介于 0.0 和 1.0 之间，因此“Math.random() - 0.5”将介于 -0.5 和 0.5 之间。乘以 2000 将产生一个介于 -1000 和 1000 之间的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T16:56:33.520

我们倾向于将吉祥物之类的东西“人性化”，因此您可以使用人类的眨眼频率使吉祥物看起来很自然。

人类通常平均每分钟眨眼 10 次，眨眼之间间隔 2-10 秒。[[资源]](http://en.wikipedia.org/wiki/Blink)

使眨眼之间的延迟随机在 2 到 10 秒之间，最终平均每分钟 10 次：

```
function blink() {
  // do the blinking stuff
  window.setTimeout(blink, Math.random() * 8000 + 2000);
} 
```

人脑非常擅长识别模式，所以如果你让吉祥物以固定的间隔眨眼，参观者很快就会明白这一点，并认为眨眼看起来是人为的。

检查它的样子。可能是因为实际正常的闪烁间隔看起来并不正常，您可能必须增加间隔，尤其是当您同时展示几个吉祥物时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T16:48:16.580

你的 blink 函数可能会在 DOM 中移动一些东西或像这样操作图像

```
var blink = function () {

   // do some work!
} 
```

然后你可能想用它`setInterval()`来处理闪烁间隔。

```
setInterval(blink, 3000) 
```

请注意， setInterval 以毫秒为单位计时，因此 3000 是“每 3 秒”。希望这会有所帮助。如果您试图每三秒不正确，您可能会有一个动态数字。例如，您可以有一个`slowDown() and speedUp()`名为 random 的函数来设置实际的 setTimeout() 间隔。

关于算法，这里有一段描述一些困难的摘录。

> 人类眨眼表达内心深层信息的过程具有模糊性和随机性的不确定性。提出了一种基于云理论的方法来实现虚拟人眨眼的不确定性控制。设计了眼睛的最大张角云和眨眼间隔云。提出了一种基于云的眨眼控制算法。与确定性方法的比较结果表明，该算法可以生成随机眼睛最大张角和眨眼间隔的眨眼控制曲线，实现眨眼的不确定性控制。

# solr - Solr 通配符搜索

> ID：12267895
> 
> 赞同：8
> 
> 时间：2012-09-04T16:43:08.930
> 
> 标签：solr

如果我有关键字 Chris Muench 的记录，我希望能够匹配 Mue 或 Chr。如何使用 solr 查询来做到这一点。目前我执行以下操作：

```
$results = $solr->search('"'.Apache_Solr_Service::escape($_GET['textsearch']).'"~100', 0, 100, array('fq' => 'type:datacollection')); 
```

它不匹配 Mue 或 Chr，但匹配 Muench

架构：

```
<?xml version="1.0" encoding="UTF-8" ?>
<schema name="rocdocs" version="1.4">
  <types>
    <!-- The StrField type is not analyzed, but indexed/stored verbatim. -->
    <fieldType name="string" class="solr.StrField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="int" class="solr.TrieIntField" precisionStep="0" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
        <!-- in this example, we will only use synonyms at query time
        <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
        -->
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
    </fieldType>
 </types>

 <fields>
    <field name="type" type="string" indexed="true" stored="true" required="true" />
    <field name="mongo_id" type="string" indexed="true" stored="true" required="true" />
    <field name="nid" type="int" indexed="true" stored="true" required="true" />
    <field name="keywords" type="text_general" indexed="true" stored="false" />
 </fields>

 <!-- Field to use to determine and enforce document uniqueness. 
      Unless this field is marked with required="false", it will be a required field
   -->
 <uniqueKey>mongo_id</uniqueKey>

 <!-- field for the QueryParser to use when an explicit fieldname is absent -->
 <defaultSearchField>keywords</defaultSearchField>
 <!-- SolrQueryParser configuration: defaultOperator="AND|OR" -->
 <solrQueryParser defaultOperator="OR"/>
</schema> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T17:25:44.480

您需要使用匹配的[通配符查询](http://solr.pl/en/2010/12/20/wildcard-queries-and-how-solr-handles-them/)，例如 chr* 或 mue*。
这将使客户端要么以这种格式输入查询，要么在应用程序中修改它。
否则，您可以使用[solr.EdgeNGramFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.EdgeNGramFilterFactory)生成令牌，这将匹配记录。例如，chris 会生成 ch、chr、chri、chris，因此会匹配所有这些组合。

# ruby-on-rails - 确定使用 polymorphic_url 生成的路由的可行性

> ID：12267897
> 
> 赞同：1
> 
> 时间：2012-09-04T16:43:16.267
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

如果对象是可链接的，我有一个包含链接的通用部分。

URL 是使用 polymorphic_url 生成的。如果 polymorphic_url 引发 NoMethodError，那么我不包含链接。

这通常效果很好，除非资源具有更新或销毁操作但没有显示操作。在这种情况下，polymorphic_url 生成一个有效的 URL，它只是对 GET 无效。

有没有办法将 polymorphic_url 限制为特定的请求方法，或者确定返回的 URL 是否对 GET 有效的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:13:54.080

我再看一下recognize_path，并让它工作。

```
 begin
    url = polymorphic_url(...)
    # validate URL, since polymorphic URL may return a URL for a
    # different method
    Rails.application.routes.recognize_path(url, {:method => 'GET')
    url
  rescue NoMethodError => e  # raised if polymorphic_url fails
    nil
  rescue ActionController::RoutingError => e  # raised if recognize_path fails
    nil
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T08:13:22.153

这可能取决于您的设置，但是您不能找到相关控制器的路径，从而找出他是否知道表演动作吗？

# xcode - 在“eventstore”类型的对象上找不到属性“title”

> ID：12267899
> 
> 赞同：0
> 
> 时间：2012-09-04T16:43:21.997
> 
> 标签：xcode, object, ekeventstore

我正在关注[这里](http://mobileorchard.com/ios-advanced-programming-event-kit-framework/)的教程，其中包括带有通知的事件管理和所有内容。现在的问题是我在以下代码中遇到错误

我的 .h 文件

```
#import <UIKit/UIKit.h>
#import <EventKit/EventKit.h>

@interface ViewController : UIViewController

- (IBAction) NewEvent:(id)sender;

@end 
```

我的 .m 文件

```
#import "ViewController.h"
#import <EventKit/EventKit.h>

@interface ViewController ()

@end

@implementation ViewController

- (IBAction) NewEvent:(id)sender {

    EKEventStore *eventDB = [[EKEventStore alloc] init];
    EKEventStore *myEvent = [EKEvent eventWithEventStore:eventDB];

    myEvent.title = @"New Event"; // <-- Errors are appearing hear as shown in the title.

}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

**附加信息：** 我已经添加了框架但仍然出现错误，如代码中所示。代码名称是

> 在“eventstore”类型的对象上找不到属性“title”

先感谢您 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:09:17.680

您需要仔细检查这`myEvent`是正确的类型（`EKEvent *`而不是`EKEventStore *`），并且您实际上是在尝试将标题设置为`myEvent`而不是`eventDB`. 您发布的错误表明您正在设置`title`事件存储，而不仅仅是一个事件。

# ruby-on-rails - Rails 资产管道、域分片和缓存

> ID：12267900
> 
> 赞同：1
> 
> 时间：2012-09-04T16:43:28.857
> 
> 标签：ruby-on-rails, caching, asset-pipeline

我有一个问题，我似乎无法找到明确的答案，我希望有人能为我解决这个问题。

使用 Rails 3.2 资产管道，并通过设置`config.action_controller.asset_host`为启用域分片， `"http://foo%d.example.com"`Rails 将始终为 HTML 文件中包含的每个资产使用相同的主机，还是只是选择一个随机的主机？

我在这里担心的是，如果资产主机是随机选择的，如果用户之前从不同的资产主机下载了资产，他们将不得不重新下载他们可能已经在浏览器缓存中拥有的资产。

任何人都可以对此有所了解吗？或者至少澄清我对这个主题可能有的任何困惑。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:24:42.837

关键[线](https://github.com/rails/rails/blob/3-2-stable/actionpack/lib/action_view/asset_paths.rb#L118)是

```
(host =~ /%d/) ? host % (Zlib.crc32(source) % 4) : host 
```

其中 source 是资产的完整路径（例如“/assets/application-123456789012345678.css”）

因此，任何单个文件都将始终路由到同一主机，因为该数字基于路径的校验和。

# mysql - SQL Server 2008 R2 Express 行号

> ID：12267902
> 
> 赞同：0
> 
> 时间：2012-09-04T16:43:39.937
> 
> 标签：mysql, sql, sql-server, r

背景故事：我使用它`SQL Server`是因为我的数据集大约有 150 列宽，我不想将所有这些都输入到`MySql Workbench`表设置中。所以我正在使用`MS SQL Server`数据导入工具。

我正在尝试设置表格，以便我可以对`R`. 我计划提取所有阳性（约 100k），然后从非阳性中提取约 400k 的随机样本。为此，我需要一个行编号列来索引正数和非正数。

在`MySQL`设置表格时我只是添加一个行编号列，但我不知道如何在`SQL Server's`数据导入工具中执行此操作。我已经建立了表格并且更愿意添加它（或者知道是否`SQL Server`已经分配了行号）但我愿意重建表格，因为没有行号它就无法使用。

编辑：我需要知道如何在 SSMS 中或直接在导入工具中执行此操作。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:50:40.113

您可以使用[ROW_NUMBER()](http://msdn.microsoft.com/en-us/library/ms186734.aspx)函数。在查询中使用它，或者您可以编写一个更新语句，根据 ROW_NUMBER() 更新表中的行。

如果您在分配行号时不关心排序，您也可以在表中添加一个新的整数自动递增列。为此，向表中添加一个新的 IDENTITY 列：

```
ALTER TABLE dbo.YourTable
    ADD ID INT IDENTITY(1,1) 
```

[向现有表添加一列并对其进行唯一编号](https://stackoverflow.com/questions/108211/sql-server-add-a-column-to-existing-table-and-uniquely-number-them)

# html - Firefox：“类型错误：localStorage 为空”

> ID：12267903
> 
> 赞同：10
> 
> 时间：2012-09-04T16:43:42.200
> 
> 标签：html, firefox, local-storage

[http://www.frostjedi.com/terra/scripts/demo/localstorage.html](http://www.frostjedi.com/terra/scripts/demo/localstorage.html)

当我在 IE 或 Chrome 中查看该网站时，添加数据，点击保存按钮，转到另一个网站，然后返回该网站，数据仍然存在。但在 Firefox 中并非如此。错误日志中有一条“TypeError：localStorage is null”消息。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-04T18:37:53.393

确保您使用的是最新版本的 Firefox。

如果您使用的是最新版本的 Firefox，但仍然无法正常工作，请确保启用 DOM 存储。

输入`about:config`您的地址栏并点击`Enter`查看您的内部浏览器设置。

向下滚动到`dom.storage.enabled`，如果它被禁用，则右键单击它并点击`Toggle`以启用 DOM 存储。

来源：[http ://webdevwonders.com/clear-dom-storage/](http://webdevwonders.com/clear-dom-storage/)

# ios - 动画重复和 iOS 应用程序生命周期

> ID：12267904
> 
> 赞同：0
> 
> 时间：2012-09-04T16:43:46.043
> 
> 标签：ios, animation, lifecycle, uiviewanimation

我正在尝试为 a 设置动画，`UIImageView`并在应用程序最小化（主页按钮、进入另一个应用程序等）并重新输入后让它恢复/启动动画。我在我的`viewDidLoad`方法中执行以下操作来创建动画、我想要的路径和旋转：

```
CGMutablePathRef path = CGPathCreateMutable();
CGPathMoveToPoint(path, NULL, startX, startY);
CGPathAddCurveToPoint(path, NULL, startX, startY, curvePoint1X, curvePoint1Y, endX, endY);
CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"position"];
animation.duration = duration;
animation.path = path;
animation.repeatCount = HUGE_VALF;
[imageView.layer addAnimation:animation forKey:@"theAnimation"];
[UIView animateWithDuration:duration delay:0.0 options:0
                     animations:^{
                         [UIView setAnimationRepeatCount:HUGE_VALF];
                         [UIView setAnimationBeginsFromCurrentState:YES];
                         imageView.transform = CGAffineTransformMakeRotation(M_PI);
                     }
                     completion:NULL]; 
```

它工作得很好，但是当我点击主页按钮并返回我的应用程序时，动画没有播放并且我的视图处于原始位置。重新进入应用程序时，如何设置此动画重新开始？我不介意动画是否必须从头开始。我的应用程序也有`NSTimer`运行，我知道它会恢复，我想在那里运行检查以恢复动画，但我不确定这是最好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:01:42.733

对于任何感兴趣的人，我想出了一个解决我的问题的方法。我有一个“NSTimer”正在运行，并通过查看表示层框架定期检查我的视图是否正在移动，如果动画没有移动，我会再次启动动画。检查表示层框架是棘手的部分，我这样做了：

```
-(BOOL) isViewNotMoving:(UIImageView *) imageView {
  // Grab values from view presentation layer and compare to test movement
  CGRect viewLocation = [[[imageView layer] presentationLayer] frame];
  double currentX = viewLocation.origin.x;
  double currentY = viewLocation.origin.y;
  BOOL testResult = false;
  if ((currentX - previousX == 0) && (currentY - previousY == 0)) {
      testResult = true;
  } else {
      testResult = false;
  }
  previousX = currentX;
  previousY = currentY;

  return testResult;
} 
```

在哪里`previousX`和`previousY`之前声明过。希望其他人觉得这很有用。

# sockets - 如何使用 netcat 发送文件然后保持连接有效？

> ID：12267905
> 
> 赞同：8
> 
> 时间：2012-09-04T16:43:45.433
> 
> 标签：sockets, unix, netcat

我发出命令：

```
netcat serveraddress myport < MY_FILE 
```

问题是，一旦发送文件，netcat 就会发送一条消息以关闭连接。发送该文件后，我需要从控制台写入消息。我记得对标准输入的管道做了一些事情。是这个吗？

```
netcat serveraddress myport < MY_FILE | 
```

现在不行了。

我在unix上。

额外信息：这并没有在服务器端进行控制（例如在服务器端使用 netcat 来监听入站连接）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-04T21:59:05.600

也许你在做：

```
cat MY_FILE - | ncat ... 
```

（请注意，我故意拼错了 netcat，因为我相信`ncat`它是一个优秀的程序。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-05T00:08:51.630

服务器端：

```
nc -k -l 10000 < my_in_file 
```

客户端：

```
echo "bye" | netcat 192.168.1.6 10000 > my_in_file - 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-12T07:01:56.020

要继续侦听其他连接，请使用`-k`on `nc`。

假设您要连接到服务器，服务器写入文件并打印到标准输出？

服务器：

```
nc -k -l $PORT | tee file ( or > file without print to stdout) 
```

客户

```
nc $IP $PORT < file_to_send 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-12-10T20:52:45.930

您可以使用 nc 的 -q -1 选项：

```
echo MY_FILE | nc -q -1 192.168.0.1 9000 
```

这样，如果命令在后台运行，它也将起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-19T21:02:55.040

我意识到这个线程很老，但是 OP 使用 unix，这里的参考是一个相当于“cat FILE - | ncat HOST”的窗口：

```
type FILE con | ncat HOST 
```

然后键入 CTRL-Z 或 CTRL-C 以结束连接。

**笔记**

*   'con' 表示控制台输入，见[http://ss64.com/nt/type.html](http://ss64.com/nt/type.html)
*   它适用于二进制文件。

# c# - 为什么要跳过行？

> ID：12267906
> 
> 赞同：1
> 
> 时间：2012-09-04T16:43:57.573
> 
> 标签：c#, winforms, datagridview, datagridviewtextboxcell

我有一个以这种方式填充的 DataGridView：偶数行包含用户不能编辑的“常量”值。奇数行可由用户编辑，但只能包含 0 或 1 个字符。如果单元格包含一个值并且用户按下一个键，它应该首先向下移动到下一个单元格，然后允许在下一个单元格中输入该值。通过这种方式，用户可以继续按下一个键，并且每次都会填充下面的单元格。

我有这段代码（基于 David Hall 的代码：[如何以编程方式从 datagridview 中的一个单元格移动到另一个单元格？](https://stackoverflow.com/questions/12206478/how-can-i-programmatically-move-from-one-cell-in-a-datagridview-to-another#comment16370308_12206478)）：

```
private void dataGridViewPlatypus_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
    int columnIndex = (((DataGridView)(sender)).CurrentCell.ColumnIndex);
    if (columnIndex % 2 == 1) {
        e.Control.KeyPress += TextboxNumeric_KeyPress;
    } 
}

private void TextboxNumeric_KeyPress(object sender, KeyPressEventArgs e)
{
    TextBox tb = sender as TextBox; 
    if (tb.TextLength >= 1)
    {
        dataGridViewPlatypus.CurrentCell = dataGridViewPlatypus[
            dataGridViewPlatypus.CurrentCell.ColumnIndex, 
            dataGridViewPlatypus.CurrentCell.RowIndex + 1];
    }
} 
```

这在我第一次在已经有值的单元格中输入 val 时效果很好 - 它向下移动到下一个单元格，随后的按键在此处输入值。但是，在那之后，它每次都会跳过一个单元格。IOW，如果我首先在第 5 列第 2 行的单元格中输入“2”，它会移动到第 3 行（好！）；然后，它移动到第 5 行，跳过第 4 行。在下一次按下键时，它移动到第 8 行，跳过第 6 行和第 7 行，依此类推。

为什么会这样，解决方案是什么？

## 更新

好的，根据下面 LarsTech 的回答，我现在得到了这段代码：

```
private void dataGridViewPlatypus_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e) {
    int columnIndex = (((DataGridView)(sender)).CurrentCell.ColumnIndex);
    if (columnIndex % 2 == 1) {
        e.Control.KeyPress -= TextboxNumeric_KeyPress;
        e.Control.KeyPress += TextboxNumeric_KeyPress;
    }
}

private void TextboxNumeric_KeyPress(object sender, KeyPressEventArgs e) {
    const int LAST_ROW = 11;
    const int LAST_COL = 15;
    TextBox tb = sender as TextBox;
    if (tb.TextLength >= 1) {
        if (dataGridViewPlatypus.CurrentCell.RowIndex != LAST_ROW) {
            dataGridViewPlatypus.CurrentCell = dataGridViewPlatypus[
                dataGridViewPlatypus.CurrentCell.ColumnIndex,
                dataGridViewPlatypus.CurrentCell.RowIndex + 1];
        } else { // on last row
            if (dataGridViewPlatypus.CurrentCell.ColumnIndex != LAST_COL) {
                dataGridViewPlatypus.CurrentCell =
                    dataGridViewPlatypus[dataGridViewPlatypus.CurrentCell.ColumnIndex + 2, 0];
            } else // on last row AND last editable column
            {
                dataGridViewPlatypus.CurrentCell = dataGridViewPlatypus[1, 0];
            }
        }
    }
} 
```

但是，现在的问题是，如果我在一个输入了先前值的单元格中，它不会用输入的新值覆盖旧值。那么有没有办法不在这个单元格中输入另一个值，同时允许一个新值替换单元格中的现有值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:48:15.270

您正在添加越来越多的按键事件：

```
e.Control.KeyPress += TextboxNumeric_KeyPress; 
```

不删除以前的按键事件。所以它多次调用它。

尝试将其更改为以下内容：

```
if (columnIndex % 2 == 1) {
  e.Control.KeyPress -= TextboxNumeric_KeyPress;
  e.Control.KeyPress += TextboxNumeric_KeyPress;
} 
```

# macos - Git错误“致命：不明确的参数'HEAD'：未知的修订或路径不在工作树中”

> ID：12267912
> 
> 赞同：83
> 
> 时间：2012-09-04T16:44:52.630
> 
> 标签：macos, git, virtualbox

我正在尝试从[Debian](https://en.wikipedia.org/wiki/Debian)初始化一个新的 Git 存储库（实际上是 VirtualBox 上的一个 VM，在 Mac OS X 上安装并运行）：

```
cd ~
mkdir test
cd test
git init

Initialized empty Git repository in /home/david/test/.git/
fatal: ambiguous argument 'HEAD': unknown revision or path not in the working tree.
Use '--' to separate paths from revisions

[david@server-VM-001:test  (master #) $] 
```

有什么问题？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-14T23:16:17.873

正如其他人指出的那样，此消息来自您的 shell 提示符。问题是在新创建的存储库中`HEAD`( `.git/HEAD`) 指向的 ref 尚不存在。

```
% git init test
Initialized empty shared Git repository in /Users/jhelwig/tmp/test/.git/
% cd test
% cat .git/HEAD
ref: refs/heads/master
% ls -l .git/refs/heads
total 0
% git rev-parse HEAD
HEAD
fatal: ambiguous argument 'HEAD': unknown revision or path not in the working tree.
Use '--' to separate paths from revisions 
```

看起来`rev-parse`在没有事先进行足够的错误检查的情况下使用。创建第一个提交后`.git/refs/heads`看起来有点不同，并且`git rev-parse HEAD`不会再失败。

```
% ls -l .git/refs/heads
total 4
-rw------- 1 jhelwig staff 41 Oct 14 16:07 master
% git rev-parse HEAD
af0f70f8962f8b88eef679a1854991cb0f337f89 
```

在为我的 shell 提示符（ZSH 的 wunjo 提示符主题的大量修改版本）更新 Git 信息的函数中，我有以下方法来解决这个问题：

```
zgit_info_update() {
    zgit_info=()

    local gitdir=$(git rev-parse --git-dir 2>/dev/null)
    if [ $? -ne 0 ] || [ -z "$gitdir" ]; then
        return
    fi

    # More code ...
} 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2018-07-25T21:09:21.640

我通常在我的 Linux 机器上使用 Git，但在工作中我必须使用 Windows。尝试在 Windows 环境中提交第一次提交时，我遇到了同样的问题。

对于那些仍然面临这个问题的人，我能够解决它如下：

```
git commit --allow-empty -n -m "Initial commit." 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-04-26T17:47:35.293

我在创建新 Git 项目时在终端中进行自定义显示时遇到了这个问题（我的分支显示在路径名之前，例如 <branch>:/current/path）。

我需要做的就是对我的主分支进行初始提交，以使这条消息消失。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-07-22T15:20:21.973

在我的情况下，它是**克隆深度**（我设置`1`并忘记了它）

[詹金斯](https://en.wikipedia.org/wiki/Jenkins_%28software%29)正在运行：

```
git rev-parse 2865c1ce8248de835b5a3fbfcce09e7346d5e3ea^{commit} 
```

（该提交是 HEAD 后面的一些提交。）

使用 进行克隆/获取时`--depth=1`，我会在运行时收到此错误`git rev-parse`。当使用更大的数字（或没有`--depth`）进行克隆时，`git rev-parse`效果很好。

这可能与 OP 的命令略有不同，但它可能对某人有所帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-07T08:40:32.147

[Jacob Helwig](https://stackoverflow.com/users/187516/jacob-helwig)[在他的回答](https://stackoverflow.com/a/12887486/6309)中提到：

> 看起来使用 rev-parse 之前没有进行足够的错误检查

来自[Jeff King ( `peff`)的](https://github.com/peff)[提交 62f162f](https://github.com/git/git/commit/62f162f8e7c28cd60f0c18f5e69933efd72659e0)应该会提高[`git rev-parse`](http://git-scm.com/docs/git-rev-parse)Git 1.9/2.0 (Q1 2014) 中的健壮性（除了[提交 1418567 之外](https://github.com/git/git/commit/141856738152d02beac5d4270a310a6007597282)）：

> 对于我们不匹配的情况（例如，“ `doesnotexist..HEAD`”），我们将尝试将参数视为文件名。
> [`try_difference()`](https://github.com/git/git/commit/62f162f8e7c28cd60f0c18f5e69933efd72659e0#diff-ffbd98c4facc3a16a9fdff1819169c0bL231)做对了，并且在这种情况下总是取消。
> 但是，[`try_parent_shorthand()`](https://github.com/git/git/commit/62f162f8e7c28cd60f0c18f5e69933efd72659e0#diff-ffbd98c4facc3a16a9fdff1819169c0bL288)永远不要取消，导致不正确的错误消息，甚至不正确的结果：

```
$ git rev-parse foobar^@
foobar
fatal: ambiguous argument 'foobar': unknown revision or path not in the working tree.
Use '--' to separate paths from revisions, like this:
'git <command> [<revision>...] -- [<file>...]' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-09-16T20:49:40.583

此问题的根源在于您要查找的参考文献之一不存在。

这可能是因为：

1.  您正在寻找的提交尚未发生（因此围绕新存储库的各种答案不起作用）
2.  您使用浅签出（--depth = 0、bare 或 mirrored）克隆了存储库
3.  您签出了不包括标签和/或分支的存储库，并且您正在按名称查找该标签/分支

...可能还有其他我不知道的原因。就我而言，结帐已满，但已排除标签。跑步：

> git fetch --all --tags

清除它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-12-01T21:36:42.580

我遇到了这个问题，这里的答案都没有帮助我。问题出在使用`git rev-parse`. 该脚本正在检查当前分支是否为`master`. 我改为`git branch --show-current`在脚本中使用它，问题就消失了。如果错误消息告诉您什么功能遇到了问题，这将很有帮助。

* * *

## 回答 #8

> 赞同：-8
> 
> 时间：2019-08-22T05:54:54.173

[我有同样的问题，我在安装CocoaPods](https://en.wikipedia.org/wiki/CocoaPods)后通过“pod setup”解决了这个问题。

# css - 滑动形式在其他 div 上并不稳固

> ID：12267914
> 
> 赞同：0
> 
> 时间：2012-09-04T16:44:59.967
> 
> 标签：css, html

我按照[本教程](http://www.digimantra.com/technology/javascript/sliding-feedback-form-jquery/)创建了一个滑动表单。唯一的问题是表单的背景不是实心的，背景中的元素可以通过表单看到，如下所示：

![在此处输入图像描述](../Images/9517bdf2897f4a8593474f9ea3e49742.png)

这是表单的代码：

```
 <div id="feedback">

    <%  @message = Message.new %>
    <h2>Envía tu feedback</h2><br />
    <%= form_for @message, :url => contact_path do |form| %>
  <fieldset class="fields">
    <div class="field">
      <%= form.label "Mensaje" %>
      <%= form.text_area :body %>
    </div>
  </fieldset>

  <fieldset class="actions">
    <%= form.submit "Send" %>
  </fieldset>
<% end %>

<a href="#" class="pull_feedback" title="Haz click para enviar feedback">Feedback</a>
    </div> 
```

我已将不透明度设置为 1，但没有任何变化。这是反馈表的主要样式：

```
 #feedback{
        background: #ffffff;
        position: fixed;
        top:100px;
        left:-392px;
        opacity:1;
    } 
```

我不仅可以看到它背后的按钮，还可以与它们进行交互。使在消息的文本区域中书写变得非常困难（Mensaje）。

这是它背后的文本格式：

```
<li>
    <input id="ac-2" name="accordion-1" type="radio"/>
    <label for="ac-2">Eventos</label>
    <article class="ac-xsmall">
    <p>
       <!-- some text links -->
    </p>
    </article>
</li> 
```

手风琴风格是：

```
 /* Acordion */
.ac-container label{
    font-family: 'BebasNeueRegular', 'Arial Narrow', Arial, sans-serif;
    padding: 5px 20px;
    position: relative;
    z-index: 20;
    display: block;
    height: 30px;
    cursor: pointer;
    color: #777;
    text-shadow: 1px 1px 1px rgba(255,255,255,0.8);
    line-height: 33px;
    font-size: 19px;
    background: linear-gradient(top, #ffffff 1%,#eaeaea 100%);
    box-shadow:
        0px 0px 0px 1px rgba(155,155,155,0.3),
        1px 0px 0px 0px rgba(255,255,255,0.9) inset,
        0px 2px 2px rgba(0,0,0,0.1);
}
.ac-container label:hover{
    background: #fff;
}

.ac-container input:checked + label,
.ac-container input:checked + label:hover{
    background: #c6e1ec;
    color: #3d7489;
    text-shadow: 0px 1px 1px rgba(255,255,255, 0.6);
    box-shadow:
        0px 0px 0px 1px rgba(155,155,155,0.3),
        0px 2px 2px rgba(0,0,0,0.1);
}
.ac-container label:hover:after,
.ac-container input:checked + label:hover:after{
    content: '';
    position: absolute;
    width: 24px;
    height: 24px;
    right: 13px;
    top: 7px;
    background: transparent url(/images/arrow_down.png) no-repeat center center;
}

.ac-container input:checked + label:hover:after{
    background-image: url(/images/arrow_up.png);
}
.ac-container input{
    display: none;
}
.ac-container article{
    background: rgba(255, 255, 255, 0.5);
    margin-top: -1px;
    overflow: hidden;
    height: 0px;
    position: relative;
    z-index: 10;
    transition:
        height 0.3s ease-in-out,
        box-shadow 0.6s linear;
}
.ac-container input:checked ~ article{
    transition:
        height 0.5s ease-in-out,
        box-shadow 0.1s linear;
    box-shadow: 0px 0px 0px 1px rgba(155,155,155,0.3);
}

.ac-container article p{
    font-style: italic;
    color: #777;
    line-height: 23px;
    font-size: 14px;
    padding: 20px;
    text-shadow: 1px 1px 1px rgba(255,255,255,0.8);
}

.ac-container input:checked ~ article.ac-xxsmall{
    height: 60px;
} 
```

我怎样才能解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:29:30.137

您在 CSS 中将 #feedback 元素设置为不透明的白色，但我在 HTML 中看不到任何带有 id="feedback" 的元素。

在本教程中，表单包含在此 DIV 中。这就是背景的来源。将您的表单放入以下 ​​div 中。

```
<div id="feedback">
...
</div> 
```

# sql - 将数据插入到 sql server 服务代理中的队列中

> ID：12267915
> 
> 赞同：2
> 
> 时间：2012-09-04T16:45:00.067
> 
> 标签：sql, sql-server-2008, service-broker

我正在尝试将数据插入队列。存储过程 fire_event 将用于此目的。每当调用此存储过程时，它应该将该数据插入队列中。下面是将从存储过程传递的查询和变量。有人可以告诉我如何使用这个存储过程在 SQL Server 的队列中插入数据。我想通过将其直接插入队列来替换插入表 event_type 的操作。谢谢

```
BEGIN

INSERT event_type
VALUES (@p_message_id,@p_event_type,@p_classifier,
        @p_event_time,@p_correlation_id,@p_person_id,@p_channel_id,
        @p_source_address_id,@p_agent_user,
        @p_agent_channel_id,@p_device_os,@p_device_os_version,
        @p_device_manufacturer,@p_device_model,@p_product_id,
        @p_event_source,@p_event_version,
        @p_node_id,@p_user_agent_string,@p_event_data)

END 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T08:16:37.800

如果您真的是指 Service Broker，那么您应该使用[SEND](http://msdn.microsoft.com/en-us/library/ms188407.aspx)命令。

例如，Service Broker 对象：

```
Create Queue MyTableQueue;
Create Service MyTableService On Queue MyTableQueue([DEFAULT])
Create Queue  ProcessQueue;
Create Service ProcessService On Queue ProcessQueue([DEFAULT]) 
```

要发送消息：

```
Declare @h UniqueIdentifier;
Declare @doc xml;

Set @doc =
(
    Select 'Hello' Msg
    For XML Raw, Elements, Type, Root('Data')
);
Begin Dialog Conversation @h
From Service MyTableService
    To Service 'ProcessService'
With Encryption = OFF;

Send On Conversation @h(@doc) 
```

或在您的情况下（+列别名）：

```
Declare @h UniqueIdentifier;
Declare @doc xml;

Set @doc =
(
    Select @p_message_id,@p_event_type,@p_classifier,@p_event_time,@p_correlation_id,@p_person_id,@p_channel_id,@p_source_address_id,@p_agent_user,
           @p_agent_channel_id,@p_device_os,@p_device_os_version,@p_device_manufacturer,@p_device_model,@p_product_id,@p_event_source,@p_event_version,
           @p_node_id,@p_user_agent_string,@p_event_data
    For XML Raw, Elements, Type, Root('Data')
);

Begin Dialog Conversation @h
From Service MyTableService
    To Service 'ProcessService'
With Encryption = OFF;

Send On Conversation @h(@doc) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T17:50:25.887

```
CREATE PROCEDURE [dwhuser].[put_event] 
   @p_message_id            nvarchar(256),
   @p_event_type            nvarchar(256),
   @p_classifier             nvarchar(256),
   @p_event_time             datetime,
   @p_correlation_id         nvarchar(256),
   @p_person_id              nvarchar(256),
   @p_channel_id             nvarchar(256),
   @p_source_address_id      nvarchar(256),
   @p_agent_user             nvarchar(256),
   @p_agent_channel_id       nvarchar(256),
   @p_device_os              nvarchar(256),
   @p_device_os_version      nvarchar(256),
   @p_device_manufacturer    nvarchar(256),
   @p_device_model           nvarchar(256),
   @p_product_id             nvarchar(256),
   @p_event_source           nvarchar(256),
   @p_event_version          nvarchar(256),
   @p_node_id                nvarchar(256),
   @p_user_agent_string      nvarchar(2000),
   @p_event_data             VARBINARY(MAX)

AS
  BEGIN
BEGIN TRY
   INSERT [aq_event_type]
   VALUES (@p_message_id,@p_event_type,@p_classifier,@p_event_time,@p_correlation_id,@p_person_id,@p_channel_id,@p_source_address_id,@p_agent_user,
           @p_agent_channel_id,@p_device_os,@p_device_os_version,@p_device_manufacturer,@p_device_model,@p_product_id,@p_event_source,@p_event_version,
           @p_node_id,@p_user_agent_string,@p_event_data)

END TRY
BEGIN CATCH 
```

# ruby-on-rails - 强制命名空间模型表单使用根类名

> ID：12267917
> 
> 赞同：0
> 
> 时间：2012-09-04T16:45:06.747
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, mongoid3

我正在使用命名空间模型将不同类型的服务分配给平台：

关系：`Platform has_many :services`&`Service belongs_to :platform`

继承 : `Service::Service1 < Service`, `Service::Service2 < Service`, 等等

每种服务类型都有一组不同的字段（我使用的是 Mongoid，因此字段被声明到模型中，“子模型”类型存储在`_type`字段中）。

在`ServicesController::new`，我实例化这样的新服务：

```
def new
  klass    = "service/#{params[:type]}"
  @service = klass.camelize.constantize.new 
  render :form
end 
```

`params[:type]`由路由参数给出（类似于`/:platform_id/services/new/:type`）

在我`form`看来，我现在可以根据服务类型显示字段（它是 Haml + simple_form）：

```
= simple_form_for @service do |f|

[...]

  - case @service.class

  - when Service::Service1
    = f.input :field1

[...] 
```

到目前为止一切正常：生成的 HTML 输入如下所示：

```
<input class="string required" id="service_service1_field1" name="service_service1[field1]" size="50" type="text"> 
```

使用`service_service1[field1]`作为字段名称，我的参数哈希将根据子服务包含不同的键，并且在我的控制器的`create`操作中，我必须为每个子服务编写一个案例/何时，而`service[field1]`我的代码会“干燥”（我只需要添加一个带有确切模型的隐藏字段来实例化）。

在使用命名空间模型时，有没有办法强制 Rails 使用根类作为字段名？

**编辑**：提交按钮 i18n 的相同问题：Rails 查找`helpers.submit.service_service1.create`我希望它查找的位置，`helpers.submit.service.create`因为所有服务的文本都是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:13:33.077

你试过这个`:as`选项吗？我已将其用于子类，但不适用于名称空间。您可能需要做一些额外的体操，`:url`才能让您的表格张贴到正确的位置。

```
If you have an object that needs to be represented as a different parameter, 
like a Person that acts as a Client:

<%= form_for(@person, :as => :client) do |f| %>
  ...
<% end %> 
```

取自[Rails 文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for)

# iphone - iPad：无法更改 UITableView 背景颜色

> ID：12267919
> 
> 赞同：0
> 
> 时间：2012-09-04T16:45:17.173
> 
> 标签：iphone, ios, ipad

重现步骤：

1.  在情节提要中添加新的 ViewController；
2.  添加表格视图
3.  在属性检查器中：

    *   将样式更改为分组；
    *   将原型单元设置为 1；

    **- 将表格视图背景颜色更改为粉红色**

而已 ！！当您将其设置为粉红色时，您会看到颜色没有改变。为什么 ？如何更改背景颜色？

PS它适用于iPhone

# python-2.7 - Python从txt文件中读取邮件账户

> ID：12267921
> 
> 赞同：1
> 
> 时间：2012-09-04T16:45:27.460
> 
> 标签：python-2.7

Python...

我有一个电子邮件地址文件，我需要创建一个脚本来将所有这些地址作为帐户导入，因此正在进行一些文本操作，我需要学习更多 python。
该文件的形式为

user1@domain1.co.uk
user1@domain2.com
user2@domain4.com
user3@domain4.com

这基本上是一个用户名和一个域名，我需要创建一个帐户名（与用户相同）和域，以及电子邮件地址，以及一些其他日期/文件路径变量到导入文件中。一旦将用户和域分配给变量，就可以将它们打印到包含其他数据的文件中，以创建和导入列表/脚本。然后使用导入文件在一个新的邮件服务器上创建一个帐户列表，而无需一一遍历所有 128k。所以。我如何一次读取文件的每一行（128,000 个条目），将每个用户名放入一个变量，然后将相应的域放入一个数组/元组/列表/字典？然后添加日期和其他一些文件路径的东西，用两个变量的电子邮件地址构建一个帐户名，并将输出附加到一个新文件中，

类似的东西

使输出文件
读取文件第 1 行并将用户和域放入变量中
print user print domain print (otherstuff) print user@domain

将每个输出循环附加到同一个新文件（不是原始文件）
循环到文件的下一行并重复
继续到 EOF（128k 行之后）
以制作一个大文件来导入邮件帐户和每个文件的详细信息，
（可能将输出文件拆分为更小的块对于导入稳定性，每个文件 100 个条目？）

到目前为止我有

```
#!/usr/bin/python
import time;

input = open('/home/adam/Downloads/mailaccounts.txt', 'r')
fileoutput = open('/tmp/domaintest.txt', 'a' 'w')
sql1 = "INSERT INTO mailbox (username, password, name, storagebasedirectory, maildir, quota, domain, active)"
password = "88888888"
storage_base_directory = '/var/vmail/vmail1'
localtime = time.localtime(time.time())
localtime = localtime[0], ".", localtime[1], ".", localtime[2], ".", localtime[3], ".", localtime[4], ".", localtime[5]
localtime = ''.join(map(str, localtime))
for line in input:
    email = line
    user = line.split("@")[0]
    domain = line.split("@")[1]
    fileoutput.write(domain) 
```

现在输出文件有字符

```
^@d^@o^@m^@a^@i^@n^@1^@.^@c^@o.^@u^@k^@^M^@ 
```

从命令行测试时打印命令不显示的

```
domain1.co.uk 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-04T09:58:08.573

尝试用 'a+' 替换 'a' 'w' 选项，如下所示

```
fileoutput = open('/tmp/domaintest.txt', 'a+') 
```

在此之后，您的脚本运行良好并获得

```
domain1.co.uk 
domain2.com 
domain4.com 
domain4.com 
```

作为输出文件中的输出

# ruby-on-rails - Rails 3.2：从另一个迁移中调用 up\down

> ID：12267930
> 
> 赞同：6
> 
> 时间：2012-09-04T16:46:05.010
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-migrations

我希望以与生成器类似的方式调用另一个迁移。基本上，如果您有一个创建表，那么在将来的某个时间点，您将不再使用该表，并且您希望调用迁移，`up`并且`down`与原始创建迁移的迁移完全相反。如果可能的话，我会创建一个类似的生成器

```
rails g reverse_migration CreateModel 
```

然后结果就像

```
class ReverseCreateModel < ActiveRecord::Migration
  def up
    #call to create model down
  end
  def down
    #call to create model up
  end
end 
```

我不想要任何解决方法，而是明确地复制代码并保持干净迁移和角色回退的能力。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T20:54:49.747

迁移只是一个 Ruby 文件，因此您可以`require`：

```
require "./db/migrate/20120117195557_create_model.rb"

class ReverseCreateModel < ActiveRecord::Migration
  def up
    CreateModel.new.down
  end

  def down
    CreateModel.new.up
  end
end 
```

如果您的原始迁移使用`change`，则必须使用`CreateModel.new.migrate(:down)`and `CreateModel.new.migrate(:up)`。

就我而言，当使用`migrate(direction)`迁移时会生成更多输出：

```
==  ReverseCreateModel: migrating ======================================
==  CreateModel: reverting =============================================
(...)
==  CreateModel: reverted (0.0018s) ====================================

==  ReverseCreateModel: migrated (0.0019s) ============================= 
```

代替：

```
==  ReverseCreateModel: migrating ======================================
(...)
==  ReverseCreateModel: migrated (0.0019s) ============================= 
```

这个答案基于[https://stackoverflow.com/a/754316/183791](https://stackoverflow.com/a/754316/183791)

# database - 为什么 Sybase ASE 在添加未实现的计算列时进行表扫描

> ID：12267931
> 
> 赞同：0
> 
> 时间：2012-09-04T16:46:06.893
> 
> 标签：database, sap-ase, calculated-columns

当我将未具体化的计算列添加到表中时，ASE 决定复制整个表，而数据页的实际内容不受影响。

例子：

```
create table t (i int null)
go
set showplan on
go
alter table t
add c compute (i+1) not materialized
go

QUERY PLAN FOR STATEMENT 1 (at line 1).
...
       |   |INSERT Operator (VA = 1)
...
       |   |   |SCAN Operator (VA = 0)
       |   |   |  FROM TABLE
       |   |   |  t
       |   |   |  Table Scan.
...
       |   |  TO TABLE
       |   |  #syb__altab
... 
```

如果您检查页面内容，`dbcc page`您可能会发现新旧页面是相同的

1.  为什么 ASE 会做这个无用的操作？
2.  有可能避免吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:07:42.383

我认为这样做是因为未具体化的计算机列可能会在您每次访问它时产生不同的值。因此，为了确保数据完整性并且每个单元格都有应该存在的数据，它首先将其复制到一个位置，然后使用它来执行您要求它执行的功能。

# c# - 在 LoginView 中显示用户名

> ID：12267933
> 
> 赞同：4
> 
> 时间：2012-09-04T16:46:10.653
> 
> 标签：c#, asp.net, database, loginview

在 Visual Studio 中创建 ASP.NET 项目时的默认网站模板会在登录到 LoginView 时显示用户的用户名。我想用用户的名字替换它。我将其存储在数据库中，因此在 Site.master 页面中我尝试了以下操作（在页面 onload 中）：

```
 MembershipUser user = Membership.GetUser();
    string id = user.ProviderUserKey.ToString();
       SqlConnection connection = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["Connection"].ConnectionString);
        try
        {
            using (connection)
            {
                using (SqlCommand con_get = new SqlCommand("SELECT firstname FROM x WHERE userId='" + id + "'", connection)) //Executes SQL command             
                {
                    try
                    {
                        connection.Open(); //Opens the database connection
                        using (SqlDataReader reader = con_get.ExecuteReader())
                        {
                            if (reader != null)
                            {
                                while (reader.Read())
                                {
                                    Label label1 = (Label)sender;
                                    label1.Text = reader["x"].ToString();
                                }
                            }
                        }
                    }
                    catch
                    {

                    }

                    finally
                    {
                        connection.Close(); //Closes the database connection
                    }
                }
            }
        }
        catch
        {

        } 
```

目前这不起作用。我也尝试不使用发件人，只是尝试使用 label1.Text = reader["x"].ToString(); 但这没有用。

有人对我如何使这项工作有任何建议吗？

另外，这是正确的方法吗？当然有一种更有效的方法来加载名字而不是每次用户导航到不同的页面时都重新加载（因此减少了对数据库的查询数）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:59:06.787

我认为您最终遇到的是标签位于母版页上的事实。

```
protected void Page_Load(object sender, EventArgs e)
{
   if(!Page.IsPostBack)
   {
      var welcomeLabel = Page.Master.FindControl("lblWelcome") as Label;
      SetName(welcomeLabel);
   }
} 
```

这是一个手写的登录模式：

```
protected void SetName(Label welcomeLabel)
{
    //this is the type of thing you'd probably wanna do in the Global.asax on session start
    if (Session["userName"] == null || !Login()) return; //session variable is empty and the login attempt failed, give up
    var usersName = Session["userName"].ToString();
    welcomeLabel.Text = usersName;
}
protected bool Login()
{
    const string query = "SELECT Name FROM Users WHERE Password = @Password AND UserName = @UserName";
    using (var conn = new SqlConnection(connectionString))
    {
        using (var comm = new SqlCommand(query, conn))
        {
            comm.CommandType = CommandType.Text;
            comm.Parameters.Add(new SqlParameter("@Password", password)); //or get this from a control or wherever
            comm.Parameters.Add(new SqlParameter("@UserName", userName)); //or get this from a control or wherever
            conn.Open();
            var name = (string)comm.ExecuteScalar();
            if (!string.IsNullOrEmpty(name))
            {
                Session["userName"] = name;
                return true;
            }
            //"Login information is wrong or user doesn't exist.
            return false;
        }
    }
} 
```

所以我们在这里所做的就是在我们的数据库中搜索用户名和密码之间的匹配项。用户名应该是唯一的，所以有点像您的主键，AND 过滤器只是确保密码与用户名匹配。简单的。

一般来说，我认为您应该在会话中存储更多有关用户的信息，以使其值得您花时间。我通常创建某种形式的用户对象，以便我可以在需要时点击它，然后通过用户对象整齐地访问它。我认为这就是 Windows Membership 类试图帮助解决的问题，但我不喜欢使用它们，除非我进行 Windows 身份验证。但这只是偏好。

# php - 公共 IP 指向 vhosts 的 DocumentRoot

> ID：12267940
> 
> 赞同：0
> 
> 时间：2012-09-04T16:47:07.047
> 
> 标签：php, apache, virtualhost, ubuntu-12.04

刚刚获得了我的 VPS 和域用于一个宠物项目。我设置了 Apache 和 PHP，一切正常，直到我将我的公共 IP 放到 URL 中。它重定向到`DocumentRoot`我的一组`VirtualHost`：

```
<VirtualHost *:80>
  # Admin email, Server Name (domain name), and any aliases
  ServerAdmin webmaster@mydomain.com
  ServerName  mydomain.com
  ServerAlias www.mydomain.com

  # Index file and Document Root (where the public files are located)
  DirectoryIndex index.html index.php
  DocumentRoot /var/www/mysite
  <Directory /var/www/mysite>
    AllowOverride All
    Allow from mydomain.com
    Allow from www.mydomain.com
  </Directory>
  # Log file locations
  LogLevel warn
  ErrorLog  /home/me/public/mydomain.com/log/error.log
  CustomLog /home/me/public/mydomain.com/log/access.log combined
</VirtualHost> 
```

我需要调整什么，以便每次在 URL 上输入我的公共 IP 时，它只会重定向到默认值`It works! // /var/www/index.html`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:51:27.063

您只需要更改全局`DocumentRoot`点的位置`httpd.conf`

```
#
# DocumentRoot: The directory out of which you will serve your
# documents. By default, all requests are taken from this directory, but
# symbolic links and aliases may be used to point to other locations.
#
DocumentRoot "/var/www/" 
```

并更改中的值`directory`：

```
#
# This should be changed to whatever you set DocumentRoot to.
#
<Directory "/var/www">
    Options -Indexes +FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory> 
```

# c# - 此示例的 MEF/Prism 最佳实践？

> ID：12267948
> 
> 赞同：1
> 
> 时间：2012-09-04T16:47:30.077
> 
> 标签：c#, wcf, prism, mef

我有从 WCF 肥皂服务生成的类。

```
public partial class Job
{
  public ActivityId {get;set;}          
} 
```

并对课程进行书面补充

```
public partial class Job
{
  public Activity Activity 
  {
    get
    {
      return *ActivityService*.Activities
                  .Where(x=>x.ActivityId==this.ActivityId)
                  .FirstOrDefault();
    }
  }
} 
```

由于 Prism 的模块化特性，Activity 列表的类来自不同的 Web 服务和模块，而不是生成 Job 的模块。

那么填充*ActivityService*的最佳方法是什么，或者有更好的方法吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:23:56.613

您修复`Export Attribute`您的服务，您修复`Import`您的客户，并通过注册您`Catalog`的服务完成

```
public partial class Job
{
  [Import]
  public Activity Activity 
  {
    get
    {
      return *ActivityService*.Activities
                  .Where(x=>x.ActivityId==this.ActivityId)
                  .FirstOrDefault();
    }
  }
}

[Export]
public class Activity
{
 ...

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:11:22.333

请注意，我采用了不同的方法并使用了装饰器模式。

JobService 在构造时导入 ActivityService 并使用私有成员字段引用它。当 JobService 从 WCF 服务检索作业时，它使用 ActivityService 填充 Activity。

```
public class JobService
{
  private ActivityService activityService;

  public JobService(ActivityService activityService)
  {
    this.activityService = activityService;
  }

  public Job GetJob(int jobId)
  {
    using(Client client = new Client())
    {
       Job j = client.GetJob(jobId);

       j.Activity = this.activityService.Activities
                        .Where(a=>a.ActivityId == j.ActivityId)
                        .FirstOrDefault();
       return j;
    }
  }  
} 
```

# java - 从依赖于外部库的终端运行 java

> ID：12267949
> 
> 赞同：2
> 
> 时间：2012-09-04T16:47:31.420
> 
> 标签：java, linux, terminal, lwjgl

我已经阅读了很多，但还没有找到解决方案。

我正在使用`lwjgl`，它需要 2 个 jars 和一个本地库来运行：`lwjgl.jar`和`lwjgl_util.jar`本地库。我已经以我能想到的各种方式尝试了这个，无论如何，我现在正在尝试这样的命令：

```
java - Djava.library.path="libs/natives/" -cp libs/jars/lwjgl.jar:libs/jars/lwjgl_util.jar DisplayTest.class 
```

但在我尝试的每一种方式中，我得到：

```
Exception in thread "main" java.lang.NoClassDefFoundError: DisplayTest/class
Caused by: java.lang.ClassNotFoundException: DisplayTest.class
at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: DisplayTest.class. Program will exit 
```

哦，值得一提的是，我正在使用 linux 终端。此外，我让它在 Eclipse 中运行得非常好，所以我无法真正理解这里发生了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T16:54:43.160

首先，您只需要将类名传递给 java：

```
java -Djava.library.path="libs/natives/" 
     -cp libs/jars/lwjgl.jar:libs/jars/lwjgl_util.jar DisplayTest 
```

（为了可读性而换行）

我会尝试以下方法：

1) 使用 CLASSPATH 环境变量，如下所示：

```
 CLASSPATH=.:/path/to/lwjgl/lwjgl.jar:/path/to/lwjgl/lwjgl_util.jar 
  export CLASSPATH 
```

注意类路径开头的点 (.)；

2）运行你的java应用程序：

```
 java -Djava.library.path="libs/natives" DisplayTest 
```

如果可行，请将上面的命令添加到 shell 脚本中。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:55:37.970

尝试取消“.class”，例如

> java -Djava.library.path="libs/natives/" -cp libs/jars/lwjgl.jar:libs/jars/lwjgl_util.jar DisplayTest.class

会成为：

> java -Djava.library.path="libs/natives/" -cp libs/jars/lwjgl.jar:libs/jars/lwjgl_util.jar DisplayTest

通过添加“.class”，您告诉命令您在名为“DisplayTest”的目录中有一个名为“class”的类，这不是您想要实现的。这显示在这一行中：

```
Exception in thread "main" java.lang.NoClassDefFoundError: DisplayTest/class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-21T18:54:48.723

I also got a similar error.

Just include your working directory , (where you have your own class), along with the libraries that you need in your classpath at runtime.

`NoCLassDefFoundError` occurs when the machine is unable to find your `.class` files during runtime (even though they have been compiled ,i.e it won't give an error while compiling but only during runtime)

STEP 1: to compile javac -classpath "path/to/lib1:path/to/lib2" yourfile.java STEP 2: to run java - classpath "path/to/lib1:path/to/lib2:path/to/your/currentdirectory/wherethedotclass/filearecreated/" yourfile

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T16:50:36.093

触发 java 命令时使用 -cp 或 -classpath。只需输入`java`命令即可查看使用情况

# objective-c - 以编程方式将 % 符号添加到 UITextField

> ID：12267955
> 
> 赞同：4
> 
> 时间：2012-09-04T16:48:07.443
> 
> 标签：objective-c, ios, cocoa-touch

我想知道如何将 % 符号添加到插入 UiTextfield 的任何数字中，以便用户可以知道它是一个百分比，类似于在 Excel 中设置单元格类型时 $ 或 % 符号的工作方式。

我已经查看了整个堆栈溢出，但想知道除了使用观察者附加 % 之外是否还有其他方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T16:49:37.057

你想要的`rightView`是`UITextField`. 这是我写的一个小类别，可以帮助您为文本字段设置永久前缀或后缀：

```
@implementation UITextField (Additions)

- (void)setPrefixText:(NSString *)prefix
{
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectZero];
    [label setBackgroundColor:[UIColor clearColor]];
    [label setFont:[UIFont fontWithName:self.font.fontName size:self.font.pointSize]];
    [label setTextColor:self.textColor];
    [label setAlpha:.5];
    [label setText:prefix];

    CGSize prefixSize = [prefix sizeWithFont:label.font];
    label.frame = CGRectMake(0, 0, prefixSize.width, self.frame.size.height);

    [self setLeftView:label];
    [self setLeftViewMode:UITextFieldViewModeAlways];
    [label release];
}

- (void)setSuffixText:(NSString *)suffix
{
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectZero];
    [label setBackgroundColor:[UIColor clearColor]];
    [label setFont:[UIFont fontWithName:self.font.fontName size:self.font.pointSize]];
    [label setTextColor:self.textColor];
    [label setAlpha:.5];
    [label setText:suffix];

    CGSize suffixSize = [suffix sizeWithFont:label.font];
    label.frame = CGRectMake(0, 0, suffixSize.width, self.frame.size.height);

    [self setRightView:label];
    [self setRightViewMode:UITextFieldViewModeAlways];
    [label release];
}

@end 
```

顺便说一句：[https](https://stackoverflow.com/search?q=uitextfield+rightview) ://stackoverflow.com/search?q=uitextfield+rightview ：截至目前有 4,099 个结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T16:50:05.803

```
[NSString stringWithFormat:@"%d%%", number]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-08T11:55:24.523

使用`UITextFieldDelegate`'`textFieldDidEndEditing:`方法。

例子：

```
- (void)textFieldDidEndEditing:(UITextField *)textField {

    NSString *oldText = textField.text;

    textField.text = [NSString stringWithFormat:@"%@ %%",oldText];
} 
```

# java - 更新后无法初始化编辑器

> ID：12267958
> 
> 赞同：0
> 
> 时间：2012-09-04T16:48:12.323
> 
> 标签：java, aptana

今天早上更新后，当我打开 Aptana 时，我收到一条错误消息，由于 java 堆/内存不足错误，无法初始化编辑器。发生此错误时，我有 2.39GB 的可用 RAM。我运行了诊断测试，这是输出：

```
Host OS: Mac OS X
OS Arch: x86
JRE Version: 1.6.0_33
JRE Vendor: Apple Inc.
JRE Home: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
Install Directory: file:/Applications/Aptana Studio 3/
Version: 3.2.2.201208201020
VM Arguments: -Xms40m
-Xmx512m
-Declipse.p2.unsignedPolicy=allow
-Declipse.log.size.max=10000
-Declipse.log.backup.max=5
-Xdock:icon=../Resources/aptana.icns
-XstartOnFirstThread
-Dorg.eclipse.swt.internal.carbon.smallFonts
-XX:MaxPermSize=256m
-Djava.class.path=/Applications/Aptana Studio 3/AptanaStudio3.app/Contents/MacOS//../../../plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar

Workspace Directory: file:/Users/ddewbre/Documents/Aptana Studio 3 Workspace/
Language: en_US 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:53:21.127

这个

```
-Xmx512m 
```

*意味着无论您的机器有多少内存*，JVM 都不会为您的 Java 对象分配超过 512m的内存。我怀疑您需要将其增加到合适的数量以避免上述错误。

# css - 在 CSS 上使用图像样式的复选框和单选仅适用于 Chrome

> ID：12267963
> 
> 赞同：3
> 
> 时间：2012-09-04T16:48:26.807
> 
> 标签：css, checkbox, styles, radio

我创建了这种风格，但我不知道如何让它在 IE 和 Firefox 中工作：

```
input[type="checkbox"]:before
{
    content:"";
    display:inline-block;
    background: url("../images/controls.png") 0% 5%, url("../images/controls.png") 0% 2.5%, white;
    display: block;
    width: 19px;
    height: 19px;
    vertical-align: middle;
}
input[type=checkbox]:hover:before
{
    background-position: 0% 10%;
}
input[type=checkbox]:checked:before
{
    background: url("../images/controls.png") 0% 15.1%, url("../images/controls.png") 0% 5%, white;
}

input[type="radio"]:before
{
    content:"";
    display:inline-block;
    background: url("../images/controls.png") 0% 2.5%, url("../images/controls.png") 0% 30.6%, white;
    display: block;
    width: 19px;
    height: 19px;
    vertical-align: middle;
}
input[type=radio]:hover:before
{
    background-position: 0% 35.6%;
}
input[type=radio]:checked:before
{
    background: url("../images/controls.png") 0% 40.6%, url("../images/controls.png") 0% 30.6%, white;
} 
```

它在 chrome 和 safari 中完美运行。我尝试使用背景图像，但也不起作用。谁能帮我解决这个问题？谢谢。

我正在使用这张图片（controls.png）：

![](../Images/8197e4ea98b7e99cdb7b69948e2d5507.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:56:32.003

浏览器对多种背景的支持相对普遍，所有主要浏览器都提供支持，无需供应商前缀。Firefox 从 3.6 版（Gecko 1.9.2）开始支持多种背景，从 1.3 版开始支持 Safari，从 10 版开始支持 Chrome，从 10.50 版（Presto 2.5）开始支持 Opera，从 9.0 版开始支持 Internet Explorer。

来自[http://www.css3.info/preview/multiple-backgrounds/](http://www.css3.info/preview/multiple-backgrounds/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:01:26.017

你可以看看**[Custom Crossbrowser Styling for Checkboxes and Radio Buttons](http://acidmartin.wordpress.com/2011/02/24/custom-crossbrowser-styling-for-checkboxes-and-radio-buttons/)**

希望这可以帮助。

# c++ - 快速排序算法遇到问题

> ID：12267964
> 
> 赞同：-1
> 
> 时间：2012-09-04T16:48:30.153
> 
> 标签：c++, visual-c++

我不确定我的代码有什么问题，但是在第 30 行，当递归开始时，我的程序中断并且只打印出未排序的数组，并且 quickSort 算法永远不会完成。如果有人知道为什么这个程序不能正常工作，请告诉我。先感谢您。

```
#include <iostream>
#include <time.h>
using namespace std;

void quickSort(int qarray[], int l, int r){

    int i = l, j = r;
    int temp;
    int pivot = qarray[(l+r)]/2;

    //partitioning
    while(i<=j){
        while(qarray[i]< pivot)
            i++;
        while(qarray[j] > pivot)
            j--;
        if(i<=j){

            temp = qarray[i];
            qarray[i] = qarray[j];
            qarray[j] = temp;
            i++;
            j--;

        }
      }
    //Recursion of the quicksort algorithm
    if(l < j){

        quickSort(qarray,l,j);

    }
    if(i < r){

        quickSort(qarray,i,r);

    }

}

int main(){

    clock_t tStart = clock();

    int myArray[26] ={4,2,5,6,1,3,17,14,67,45,32,66,88,
                   78,69,92,93,21,25,23,71,61,59,60,30,79}; 

    for(int i=0;i < 26;i++){

        cout << "Unsorted: " << myArray[i] << endl;
    }

    quickSort(myArray,0,25);

    for(int i=0;i < 26;i++){

        cout << "Sorted: " << myArray[i] << endl;
    }

    double seconds = clock() / double(CLK_TCK);
    cout << "This program has been running for " << seconds << " seconds." << endl;

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T16:56:35.373

此行中的错误（至少）：`int pivot = qarray[(l+r)]/2;`

一定是`int pivot = qarray[(l + r) / 2];`

将数组元素除以 2 是没有意义的。 Pivot 是索引为 的范围的中间元素`(l + r) / 2`。

# c# - 将 JS 日期解析为 C# DateTime

> ID：12267965
> 
> 赞同：3
> 
> 时间：2012-09-04T16:48:38.647
> 
> 标签：c#, javascript, datetime

我有 javascript 日期对象，它给了我这种格式的日期字符串，“Tue Sep 04 2012B0100 (GMT Daylight Time)”

我正在尝试使用此处提到的 ParseEaxcat 进行解析[，](https://stackoverflow.com/questions/1877788/javascript-date-to-c-sharp-via-ajax)但它会引发无效的日期异常 - 任何人都指向正确格式的方向

```
 string date = "Tue Sep 04 2012B0100 (GMT Daylight Time)";
                dt = DateTime.ParseExact(date,"ddd MMM dd yyyyBzzzz",
                     CultureInfo.InvariantCulture); 
```

我也没有高兴地看着这个：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T17:06:45.417

如果可以（听起来好像因为您拥有该对象），我建议从 Javascript (.getTime()) 中提取自 1970/01/01 以来的毫秒数，将其转换为 .Net ticks (100-纳秒单位），并使用它来解析为 C# DateTime。

```
var ticks = (jsMillis * 10000) + 621355968000000000;
var date = new DateTime(ticks); 
```

其中 jsMillis 是在 Javascript DateTime 对象上调用 getTime() 获得的数字。

621355968000000000 是将 C# 的日期来源（0001 年 1 月 1 日午夜）转换为 javascript 的日期来源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T17:07:40.923

This works. Though, you may want to strip the GMT Daylight Time portion out before passing it in just to avoid the in-line split.

```
string date = "Tue Sep 04 2012B0100 (GMT Daylight Time)";
var dt = DateTime.ParseExact(date.Split('(')[0].Replace("B","+").Trim(), "ddd MMM dd yyyyzzz", CultureInfo.InvariantCulture); 
```

Edited to account for the offset.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-18T19:26:04.367

我从 JavaScript 中得到了不同的日期时间格式。这是我必须做的：

```
public void Main()
{
    Console.WriteLine(
        ConvertJsDate("Fri Apr 18 2014 16:23:18 GMT-0500 (Central Daylight Time)"));
    //test more regular date
    Console.WriteLine(
        ConvertJsDate("4/18/2014 16:23:18")); 
}

public DateTime ConvertJsDate(string jsDate)
{
    string formatString = "ddd MMM d yyyy HH:mm:ss";

    var gmtIndex = jsDate.IndexOf(" GMT");
    if (gmtIndex > -1) 
    {
        jsDate = jsDate.Remove(gmtIndex);
        return DateTime.ParseExact(jsDate, formatString, null);
    }
    return DateTime.Parse(jsDate);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T17:07:58.287

The date doesn't appear to match the format string. The format string has hyphens, and is missing the parenthesized section. Also, there is no mention of a format string with 4 z's, so you might change the first one to a 0.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T17:27:28.640

另一种方法是将日期转换为 JavaScript 端的合理表示，这将更加健壮：无需猜测语言服务器端，可以正确处理时区。

如果您使用某种自动转换（即 JSON.stringify），您可能需要添加一个与日期字段平行的字段，并使用相同值的字符串表示形式，并在服务器端使用它而不是原始字段。

```
{ dateFied: new Date(),
  dateFiledAsIsoString: "....." } 
```

如果决定走这条路线，请考虑将时区（时间偏移）传递给服务器端代码或在 JavaScript 端将时间转换为 UTC。考虑使用 ISO8601 日期格式：yyyy-MM-ddTHH:mm:ss.fffffffzzz。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-26T18:13:35.560

有很多方法可以做到这一点......但这是我发现最简单的......

```
// JavaScript
var d = new Date();
d.toLocaleString();
// =>   "6/26/2015, 2:07:25 PM"

// Can be Parsed by the C# DateTime Class
DateTime d = DateTime.Parse( @"6/26/2015, 2:07:25 PM" );
Console.WriteLine( d.ToLongDateString() );
// =>   Friday, June 26, 2015 
```

# ruby-on-rails-3 - 模型之间的关联不起作用

> ID：12267966
> 
> 赞同：0
> 
> 时间：2012-09-04T16:48:39.043
> 
> 标签：ruby-on-rails-3, methods, has-and-belongs-to-many

我已经在两个模型之间建立了一个 has_and_belongs_to_many 关联。我需要从一个模型访问另一个模型中的方法的属性。现在我的代码看起来像这样，但我收到一条错误消息，提示“未定义的局部变量 'model1_id'”

模型_2.rb

```
Class Model_2 < ActiveRecord:: Base
...
has_and_belongs_to_many :model_1

def some_method
   attr_1 * Model_1.find(model_1_id).attr_I_need
end 
```

我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:15:12.010

首先，你应该写

```
 has_and_belongs_to_many :model_1s 
```

在Model_2中如果你的模型名称是Model_1，仔细看model_1s中的last s，lly写

```
 has_and_belongs_to_many :model_2s 
```

在 Model_1 中

看来，您的本地方法找不到 model_1_id 变量。

你在哪里定义了它？

# android - Android 平板电脑 Arnova Arnova 10b g3 未在 adb devices mac 中显示

> ID：12267967
> 
> 赞同：3
> 
> 时间：2012-09-04T16:48:55.560
> 
> 标签：android, macos

我遇到了与这个[Developing on Arnova 9 G3 相同的问题 - not visible via 'adb devices'](https://stackoverflow.com/questions/10307470/developing-on-arnova-9-g3-not-visible-via-adb-devices)。我正在研究 MAC OSX LION

我的平板电脑是 ARNOVA 10b G3。我试图让它被 adb-devices 识别以在其上调试一些应用程序。平板电脑被识别为传输文件，并且在平板电脑端激活了调试选项。

我还检查了这个链接[http://www.archos.com/support/support_tech/updates_adb.html?country=in&lang=en](http://www.archos.com/support/support_tech/updates_adb.html?country=in&lang=en) 并按照他们的要求添加了文件。

平板电脑永远不会显示在设备选择器表单中，当我使用 adb -devices 命令时也不会显示

我不知道我还能做什么。

感谢您的回答

# r - ggplot2 返回值

> ID：12267970
> 
> 赞同：10
> 
> 时间：2012-09-04T16:49:09.943
> 
> 标签：r, ggplot2

`ggplot2`'s函数的文档`stat_bin`声明它**返回**一个带有附加列的新数据框。一个人实际上是如何访问这个数据框的？

可能吗？

```
simple <- data.frame(x = rep(1:10, each = 2))
tmp <- stat_bin(data=simple, binwidth=0.1, aes(x)) 
```

我已经弄清楚这`tmp`是一个环境，`ls(tmp)`并将显示环境中的对象，但是在探索了这些对象中的每一个之后，我没有看到任何像被描述为返回值的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T17:10:12.853

正如 Luciano Selzer 所提到的，生成下表的计算直到打印时才会执行。（看一下`ggplot2:::print.ggplot()`会发现，在最后一行，它以不可见的方式返回表格，因此可以通过分配捕获它以供进一步检查。）

```
tmp <- ggplot(data=simple) + stat_bin(aes(x), binwidth=0.1)
x <- print(tmp)
head(x[["data"]][[1]])
#   y count    x ndensity ncount density PANEL group ymin ymax xmin xmax
# 1 0     0 0.95        0      0       0     1     1    0    0  0.9  1.0
# 2 2     2 1.05        1      1       1     1     1    0    2  1.0  1.1
# 3 0     0 1.15        0      0       0     1     1    0    0  1.1  1.2
# 4 0     0 1.25        0      0       0     1     1    0    0  1.2  1.3
# 5 0     0 1.35        0      0       0     1     1    0    0  1.3  1.4
# 6 0     0 1.45        0      0       0     1     1    0    0  1.4  1.5 
```

# java - Android 查看后保存图像

> ID：12267981
> 
> 赞同：0
> 
> 时间：2012-09-04T16:49:40.753
> 
> 标签：java, android, android-camera

我正在使用以下代码打开相机，拍摄图像并将其显示在图像视图中。

我假设在 onActivityResult 我应该做一个 bm.save 类型的命令，但我在那里看不到一个。理想情况下，我想将其保存为 SD 卡上的 jpeg。任何帮助将不胜感激。

汤姆

```
public class TakePhoto extends Activity {

    ImageView iv;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_take_photo);

        iv = (ImageView) findViewById(R.id.imageView1);

        Button b = (Button) findViewById(R.id.button1);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(intent, 0);

            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);

        Bitmap bm = (Bitmap) data.getExtras().get("data");

        iv.setImageBitmap(bm);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:08:31.313

这应该可以解决问题。使用您的位图（您用相机拍摄的）和您选择的文件名调用以下方法，例如。“我的史诗”。

（我假设您知道何时想要/需要保存位图）

```
public void writeBitmapToMemory(String filename, Bitmap bitmap) {
        FileOutputStream fos;
        // Use the compress method on the Bitmap object to write image to the OutputStream
        try {
            fos = this.openFileOutput(filename, Context.MODE_PRIVATE);
            // Writing the bitmap to the output stream
            bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
            fos.close();

        } 
        catch (FileNotFoundException e) {
            e.printStackTrace();

        } 
        catch (IOException e) {
            e.printStackTrace();

        }

    } 
```

如果您想再次从内存中读取位图：

```
public Bitmap readBitmapFromMemory(String filename) {
Bitmap defautBitmap = null;
File filePath = this.getFileStreamPath(filename);
FileInputStream fi;
try {
fi = new FileInputStream(filePath);
defautBitmap = BitmapFactory.decodeStream(fi);

} 
catch (FileNotFoundException e) {
e.printStackTrace();

}

return defautBitmap;

} 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:56:03.423

在 onActivityResult 你可以像这样存储位图

```
File root = new File(Environment.getExternalStorageDirectory(), "Directory");
             if (!root.exists()) {
                    root.mkdirs();
               }

               String fname = "Image.png";
               File file = new File (root, fname);

              try {
                      FileOutputStream out = new FileOutputStream(file);
                      bm.compress(Bitmap.CompressFormat.PNG, 90, out);

                      out.flush();                      out.close();
               } catch (Exception e) {
                      e.printStackTrace();
              } 
```

# c#-4.0 - “从方法和垃圾收集中返回对象”这一段是什么意思？（来自 C#4.0 Herbert Schildt）

> ID：12267982
> 
> 赞同：0
> 
> 时间：2012-09-04T16:49:40.817
> 
> 标签：c#-4.0, c#-3.0

当一个对象被方法返回时，它会一直存在，直到不再有对它的引用。此时，它会受到垃圾收集。因此，一个对象不会因为创建它的方法终止而被销毁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:55:53.423

这意味着在下面的场景中，在您调用 之后，即使它是私有对象`Run()`，也不会被垃圾收集。`a`那是因为`_b`存在于方法的范围之外，并且仍然持有对`a`.

```
class Test
{
    private B _b;
    public void Run()
    {
        A a = new A();
        _b = new B(a);
    }
}

public class A 
{
}

public class B
{
    private A _a;
    public B(A a)
    {
        _a = a;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:07:25.757

If you have:

```
string Method1()
{
  return new Random().Next(0, 1000).ToString();
} 
```

Then when you call it, it creates a `Random` object, and soon afterwards a `string` object.

Once the method is done using the `Random` object by calling `Next` (note, whether the method has returned or not has absolutely **nothing** to do with this, regardless of what that book might say). there's no more references to it anywhere that any code will reach it by, so it might be collected.

If though the string was obtained in:

```
void Method2()
{
  string s = Method1();
  //s isn't collected here by devious forces.
  Console.WriteLine(s);//this works.
} 
```

So the book is saying "things don't magically disappear when you use them.

It's actually incorrect, in:

```
void Method3()
{
  Method1();
} 
```

There's no reason to suspect that the string wasn't collected before the method method returned.

But also:

```
static string blah

void Method4()
{
  blah = new Random().Next(0, 10).ToString();
} 
```

This didn't return anything, but it created an object that won't be collected.

Also:

```
void Method5(out string ret)
{
  ret = new Random().Next(0, 10).ToString();
}
void Method 6()
{
  string s;
  Method5(out s);
  //s isn't collected here by devious forces.
  Console.WriteLine(s);//this works.
} 
```

Here's a better version:

"Once there is no way that any code which will run could use the object, it may be collected."

Buy a better book, there's no point asking people to explain what Herbert Schildt says about something, because that assumes he's correct. Frankly, I'd be more worried about the bits you thought you understood than the bits you were confused by, because you won't know if it was actually correct or bullschildt.

# jquery - 将标题从 ALT 或 TITLE 标签添加到 jQuery 幻灯片

> ID：12267985
> 
> 赞同：0
> 
> 时间：2012-09-04T16:49:55.760
> 
> 标签：jquery, slideshow, alt

我正在使用一个简单的小 jQuery 脚本来旋转一些图像。我想知道是否有一种方法可以从图像中获取 alt 或 title 标签，并让该文本出现在 ap 或 div 标签中的图像下方。

这是我到目前为止所拥有的：

jQuery：

```
$(function(){
    $('.fadein img:gt(0)').hide();
    setInterval(function(){
      $('.fadein :first-child').fadeOut(1000)
         .next('img').fadeIn(1000)
         .end().appendTo('.fadein');}, 
     3500);
}); 
```

CSS

```
.fadein { position:relative; height:350px; }
.fadein img { position:absolute; left:0; top:0; } 
```

HTML

```
<div class="fadein">
<img src="1.jpg" alt="This is Image One" />
<img src="1.jpg" alt="This is Image two" />
</div>
<p>CAPTION GOES HERE</p> 
```

将更改标题集成到由 alt 标签提供的任何提示？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:02:02.443

也许是这样的 -[**演示**](http://jsfiddle.net/PRnT4/)

```
$(function(){
    $('.fadein img:gt(0)').hide();
    $('p').text( $("img:visible").prop("alt") );

    setInterval(function() {
      $('.fadein :first-child').fadeOut(1000)
         .next('img').fadeIn(1000)
         .end().appendTo('.fadein').end();
      $('p').text( $("img:visible").prop("alt") );
    }, 3500);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T17:02:17.387

这是一种方法：

```
$(function() {
    $('.fadein img:gt(0)').hide();
    $('.fadein').next().text($('img:first').get(0).alt);
    setInterval(function() {
        $('.fadein :first-child').fadeOut(1000, function() {
            $(this).closest('div').next().text('');
        }).next('img').fadeIn(1000, function() {
            $(this).closest('div').next().text(this.alt);
        }).end().appendTo('.fadein');
    }, 3500);
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/4fRxD/1/)。

**编辑**答案以更改上述内容以使用选择器缓存，以最大限度地减少对 DOM 的查询：

```
$(function() {
    var fadein = $('.fadein');
    fadein.find('img:gt(0)').hide();
    fadein.next().text(function() {
        return fadein.find('img:first').attr('alt');
    });
    setInterval(function() {
        fadein.find(':first-child').fadeOut(1000, function() {
            fadein.next().text('');
        }).next('img').fadeIn(1000, function() {
            fadein.next().text(this.alt);
        }).end().appendTo(fadein);
    }, 3500);
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/4fRxD/2/)。

# api - 无法连接到必应翻译 API

> ID：12267989
> 
> 赞同：0
> 
> 时间：2012-09-04T16:50:08.480
> 
> 标签：api, bing

我有两个问题：

1.  我不能不在 Ruby 中发布到 MS 的服务器。

2.  我无法从 MS 的服务器获得结果。

以下是详细内容。

这是我的红宝石代码：（xxxxxx 是我的 client_secret）

```
require "net/http"

base_url = URI("https://datamarket.accesscontrol.windows.net/v2/OAuth2-13")
params = {:client_id => :woki,
          :client_secret => "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
          :scope => "http://api.microsofttranslator.com",
          :grant_type => "client_credentials"}

res = Net::HTTP.post_form(base_url, {})

File.open("token", "w").write res.body 
```

我希望使用此代码来获取我的访问令牌。

但是，每次发生错误时：

```
rescue in rbuf_fill': Timeout::Error (Timeout::Error) 
```

因此，我改为使用 bash 命令 curl 发布，并返回响应：

```
{"token_type":"http://schemas.xmlsoap.org/ws/2009/11/swt-token-profile-1.0","access_token":"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx","expires_in":"599","scope":"http://api.microsofttranslator.com"} 
```

然后，我想使用我的访问令牌将一个英文单词翻译成中文，但仍然失败。以下是我的代码：

```
#!/bin/bash

clear

curl -H "Authorization: Bearer xxxxx" -d "appId&text=apple&to=zh-CHS&from=en&maxTranslations=10" http://api.microsofttranslator.com/V2/Http.svc/GetTranslations 
```

其中 xxxxx 是直接从上面的访问令牌复制的，其内容类似于“http%3a%2f%2f”。

根据[http://msdn.microsoft.com/en-us/library/ff512417](http://msdn.microsoft.com/en-us/library/ff512417 "微软 API 文档")。我认为没有错。

但是，我只得到

```
Error Status Code: 'InternalServerError'

Details: The server encountered an error processing the request. Please see the server logs for more details. 
```

谁能告诉我问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:22:57.890

尝试重新排序你的参数——我看到你在'from'之前有'to'。

还可以尝试摆脱“maxTranslations”参数。

# jquery - 如果已经在页面上，请让 requireJs 不重新加载 jQuery

> ID：12267990
> 
> 赞同：18
> 
> 时间：2012-09-04T16:50:09.323
> 
> 标签：jquery, requirejs

我正在编写一个脚本，该脚本旨在嵌入到 3rd 方网站上以向它们添加功能。我最近删除了我相当混乱的自定义加载程序代码，并开始用 requirejs 替换它。可以选择为我加载的库之一（取决于传入的一些参数）是 jQuery。

这很好用，直到我的脚本包含在 jQuery 已经存在的页面上，在这种情况下，似乎发生的是一些插件在中途加载，requirejs 在页面的版本上加载 jQuery，并且插件立即中断。

要求客户重写他们的页面只是为了使用这个脚本是不可能的，所以我想做的是检测jQuery是否已经加载，如果是，跳过通过requirejs加载它，只使用已经加载的一个（当他们使用更旧版本的 jQuery 时，这可能会让我遇到奇怪的边缘情况和错误，但我没有太多选择）。

我想我会写一个新模块，首先查看是否加载了 jQuery，如果是，则导出 jQuery 对象，如果不是，则加载它，然后执行导出。但是，我似乎受到了阻碍，因为模块的定义函数似乎需要同步才能工作，所以我不能去加载另一个异步脚本，然后将导出填充到 requirejs 中。

我在文档中遗漏了什么吗？我正在尝试的事情是不可能的吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-04T17:05:53.427

我在一个类似的项目中遇到了同样的问题，将 require.js 用于打算在 3rd 方网站上加载的库。[你可以在这里](https://github.com/nrabinowitz/awld-js/blob/master/src/awld.js#L151)看到我的方法，但这里是简化版本：

```
// check for existing jQuery
var jQuery = window.jQuery,
    // check for old versions of jQuery
    oldjQuery = jQuery && !!jQuery.fn.jquery.match(/^1\.[0-4](\.|$)/),
    localJqueryPath = libPath + 'jquery/jquery-1.7.2.min',
    paths = {},
    noConflict;

// check for jQuery 
if (!jQuery || oldjQuery) {
    // load if it's not available or doesn't meet min standards
    paths.jquery = localJqueryPath;
    noConflict = !!oldjQuery;
} else {
    // register the current jQuery
    define('jquery', [], function() { return jQuery; });
}

// set up require
require.config({
    paths: paths 
});

// load stuff
require(['jquery', ... ], function($, ...) {

    // deal with jQuery versions if necessary
    if (noConflict) $.noConflict(true);

    // etc

}); 
```

如您所见，这会查找 jQuery，然后将“jquery”模块定义为现有库的包装器，或者（如果没有 jQuery 或现有 jQuery 是旧版本）加载特定于库的 jQuery `noConflict`.

这工作得很好。唯一的缺点是您在`require()`脚本中动态调用，这使得`r.js`有效使用优化器变得更加困难。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-25T23:12:29.113

我有一个类似的问题..我的脚本重新加载了 jQuery 两次..使用了[本文评论中的解决方案](http://www.manuel-strehl.de/dev/load_jquery_before_requirejs.en.html)

像魅力一样工作！

（有效的评论是：

> “我把它放在我的配置文件中，在 requirejs.config(...) 之后和 requirej(["app"]) 之前，它起作用了")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-09T18:41:29.247

通过一些玩弄 srini 的解决方案，我能够获得一种“条件”手段，仅当网页尚未加载 jquery 时才在 requirejs 中加载它。在我的 main.js 顶部附近（我也在加载角度）：

```
requirejs.config({
    "baseUrl": "./app/",
    "paths": {
        "jquery"            : "https://code.jquery.com/jquery-3.6.0.min.js",
        "angular"           : "https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min"
    },
    "shim": {
        "jquery": {
            "exports" : "$"
        },
        "angular": {
            "exports" : 'angular'
        }
    }
})

// don't load jquery if it is already loaded
if(typeof(jQuery) == 'function') {
    // define 'jquery' so requirejs knows how to get it
    define('jquery', [], function() {
        return jQuery;
    });
} else {
    // require (preload) jquery so it's available in requirejs
    requirejs(['jquery'], function( $ ) {
        return $; // optional
    });
} 
```

我用 jquery 的本地副本确认，我在顶部添加了一个“console.log()”，它只被加载一次。我还在我的 html 文件中使用脚本标记进行了测试，没有在服务方法和控制器方法中引用“$”，并且都使用或不使用脚本标记。

# servlets - HttpSession 的编程失效

> ID：12267991
> 
> 赞同：2
> 
> 时间：2012-09-04T16:50:17.947
> 
> 标签：servlets, spring-security, tomcat7, httpsession

是否可以终止已登录用户的 HttpSession？

我们可以在用户会话中执行以下操作：

```
HttpSession s = request.getSession(false);
s.invalidate(); // make sure s != null 
```

但是管理员用户如何“踢出”给定用户呢？

我希望找到一些 API`ServletContext`来返回活动会话列表，但情况似乎并非如此。

我正在使用 Spring Security 3 和 Tomcat 7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T16:52:41.393

基本上有两种方法（因为我不做 Spring，所以不考虑 Spring Security）：

1.  在某些应用程序范围内收集所有这些会话`Map<User, HttpSession>`。然后就做

    ```
    sessions.get(user).invalidate(); 
    ```

    在会话超时/到期的情况下，[`HttpSessionListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSessionListener.html)和/或[`HttpSessionBindingListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSessionBindingListener.html)可能有助于清理整个应用程序。`Map`

2.  向数据库中添加一个布尔列，该列由某个[过滤器](https://stackoverflow.com/tags/servlet-filters/info)对每个请求进行检查。

    ```
    if (shouldLogout(user)) {
        session.invalidate();
    } 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T16:56:10.017

Spring Security 有一个[SessionRegistry](http://static.springsource.org/spring-security/site/docs/current/apidocs/org/springframework/security/core/session/SessionRegistry.html)来处理这种场景。您可以使用标签中`session-registry-ref`的属性声明它。`concurrency-control`在这里你有一些[文档](http://static.springsource.org/spring-security/site/docs/current/reference/session-mgmt.html)。

# python - Python：QTableWidget scrollToItem()

> ID：12267993
> 
> 赞同：1
> 
> 时间：2012-09-04T16:50:29.160
> 
> 标签：python, pyqt4, qtablewidget

我刚开始使用python，所以遇到了问题。我到处搜索，我得出了这个结论：我使用 QT-Designer 制作了一个简单的 GUI。填写 tableWidget 后，我​​想要的只是自动滚动到第 10 行，我这样成功：

```
for i in range(0, self.rows):
    ...filling table...
self.ui.tableWidget.scrollToItem(self.ui.tableWidget.item(10, 3), QtGui.QAbstractItemView.PositionAtCenter)
self.ui.tableWidget.scrollToItem(self.ui.tableWidget.selectRow(10), QtGui.QAbstractItemView.PositionAtCenter) 
```

问题：如果没有第 3 行或第 4 行，这将不起作用。正如我所说，我是 Python 新手，所以好的解释或建议对我来说意义重大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T17:03:53.360

所以，这一行：

```
self.ui.tableWidget.scrollToItem(self.ui.tableWidget.item(10, 3), QtGui.QAbstractItemView.PositionAtCenter) 
```

会起作用，因为你会因为执行 self.ui.tableWidget.item(10, 3) 而得到一个项目

```
self.ui.tableWidget.scrollToItem(self.ui.tableWidget.selectRow(10), QtGui.QAbstractItemView.PositionAtCenter) 
```

该行不起作用-因为您在这里尝试做的是选择界面中的行，该行具有 None (void) 值返回

您必须进行两次通话，第一次滚动到该项目，然后选择该行（或您想要的任何顺序，顺序无关紧要）

```
item = self.ui.tableWidget.item(10, 3)
self.ui.tableWidget.scrollToItem(item, QtGui.QAbstractItemView.PositionAtCenter)
self.ui.tableWidget.selectRow(10) 
```

在 C++ 中你会得到一个错误，但在 Python 中，一个 void 返回的方法将返回 None，这与将 NULL 指针传递给 scrollToItem 方法相同。

# git - 当代码没有整齐地隔离到子目录时，Git 子模块可以工作吗？

> ID：12267996
> 
> 赞同：0
> 
> 时间：2012-09-04T16:50:35.350
> 
> 标签：git, git-submodules

我正在使用一个框架，它或多或少地迫使我将自己的代码与框架代码混合在一起——也就是说，两者都不能整齐地隔离到它自己的子目录中。到目前为止，我通过使用 .gitignore 忽略所有框架代码将它们分开，但是当我需要升级框架时，我创建了一个升级分支并进行了升级，最初并没有意识到这意味着以前未跟踪/忽略的文件将是在新分支中跟踪，因此当我切换回主分支时将不再存在。

从[巨大的掌心时刻](http://www.quicksprout.com/images/homerdoh.jpg)中恢复过来后，我想我必须改用 Git 子模块。然而，这带来的问题是，属于子模块的代码*似乎*必须保存在子目录中。来自[Pro Git](http://git-scm.com/book/en/Git-Tools-Submodules)：

> 子模块允许您将 Git 存储库保留为另一个 Git 存储库的子目录。

这真的是 git 子模块的限制，还是有什么办法解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:04:01.940

我相信是这样（一个子模块本身就是一个完整的 git 存储库，同一个文件夹不能包含两个 git 存储库）。我还相信，当文件夹中有子模块时`Foo`，外部存储库将忽略其中的所有内容，`Foo`只是它会跟踪子模块所在的修订版。

（警告：巨大的黑客攻击）但是，您可以有两个单独的 git 存储库，一个在另一个内部，并且“只是”对各自的 s 非常小心`.gitignore`-但是，您将无法使一个存储库控制另一个存储库的哪个版本存储库位于。此外，最外层的存储库必须是项目所在位置之外的一个文件夹级别（如果它需要包含该文件夹中的顶级文件并且您已经在其中拥有主存储库），因此如果您的项目`/foo/bar/Project`位于需要有框架仓库`/foo/bar`，除了主仓库在`/foo/bar/Project`.

# asp.net - 使用 client.PutObject 和 request.ContentBody 通过 AWS .Net 开发工具包在 Amazon S3 上创建文件时字符损坏

> ID：12267997
> 
> 赞同：0
> 
> 时间：2012-09-04T16:50:35.007
> 
> 标签：asp.net, amazon-s3

我有一个 Web 应用程序，它创建一些 HTML 作为字符串并将字符串作为文件上传到 Amazon S3。

在文件上传之前检查调试器中的字符串，我看到 HTML 看起来不错，但是当我检查存储桶中的文件时，我看到一些字符已经改变。它只发生在某些角色身上。例如：

> 现在是 Android™ 上的 GO 时间！

变成

> 现在是 Android™ 上的 GO 时间！

这是我使用的确切代码：

```
using (var client = AWSClientFactory.CreateAmazonS3Client(accessKey, secretKey, s3Config))
        {
            var request = new PutObjectRequest()
                .WithBucketName(bucketName)
                .WithKey(fileKey)
                .WithMetaData("title", title);
            request.ContentBody = body;
            S3Response response = client.PutObject(request);
            response.Dispose();
        } 
```

我尝试了 .WithContentBody(body) 但将其更改为 request.ContentBody = body; 看看这是否会神奇地起作用，但显然没有。

body 变量是 HTML 字符串。当我在调试器中查看它时，字符看起来应该是它们应该的样子。此外，当我使用 Visual Studio HTML 查看器获取正文值时，它看起来很好。

知道我在这里做错了什么吗？我错过了一些设置吗？在我的网络搜索中似乎找不到任何其他有此问题的机构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:20:41.103

终于想通了这个。没有早点发现它，因为我在调试器中的 HTML 字符串在浏览器中呈现正常，但我猜应该很明显。

我必须在传输特殊字符之前对其进行编码。我不能使用标准的 HttpUtility 来编码整个 HTML 字符串，因为所有的 HTML 标记都会被编码。

我使用了这种方法：

```
private static string HtmlEncodeSpecialChars(string html)
    {
        var sb = new StringBuilder();
        foreach (var c in html)
        {
            if (c > 127) // special chars
                sb.Append(String.Format("&#{0};", (int)c));
            else
                sb.Append(c);
        }
        return sb.ToString();
    } 
```

我在[这里](http://geekswithblogs.net/TimH/archive/2006/05/25/79563.aspx)看到的。

到目前为止似乎正在做这个伎俩。

# c# - Windows 运行时方法不能是通用的 - 原因、解决方法、替代方法？

> ID：12267999
> 
> 赞同：14
> 
> 时间：2012-09-04T16:50:41.817
> 
> 标签：c#, windows-runtime, windows-store

这是一个接口，取自我尝试将我维护的事件聚合器[MemBus 移植到 Windows 运行时世界：](https://github.com/flq/MemBus)

```
public interface ISubscriber
{
    IDisposable Subscribe<M>(Action<M> subscription);

    #if WINRT 
    [Windows.Foundation.Metadata.DefaultOverload]
    #endif
    IDisposable Subscribe(object subscriber);

    IObservable<M> Observe<M>();
} 
```

我得到的是编译器错误：

> “错误 WME1031：' `MemBus.ISubscriber.Subscribe<M>(System.Action<M>)`' 是通用方法。Windows 运行时方法不能是通用的。”

我只是怀疑为什么会这样，如果有人可以澄清，请做。

我的主要问题是：**将代码移植到 Windows 运行时时我们应该如何处理这个**问题？

许多更高级别的功能发生在泛型上。事实上，我们在 Windows 运行时使用泛型类（例如`List<T>`）。RT 组件应该如何公开泛型类型，如果不是，是否是返回编写 .NET 1.1 代码（即对象输入、对象输出和强制转换）的唯一替代方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-05T07:39:31.250

您需要从 Windows 应用商店模板（而不是 Windows 运行时组件模板）中选择一个**类库模板。**

![截图VS2012](../Images/635c7e3d0a2119b99505f005fdf52404.png)

这将允许您在 Windows 应用商店应用程序中使用完整的 C# 语言，但不允许 C++ 和 JS 等其他语言使用程序集（因为它们不像 C# 那样支持泛型）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T23:02:21.200

简短的故事是 JavaScript 不知道如何处理泛型，因此 WinRT 组件无法使用它们。请参阅[WinRT 不允许自定义泛型类型或接口的原因以](https://stackoverflow.com/questions/9509099/winrt-reason-for-disallowing-custom-generic-types-or-interfaces)进行更长时间的讨论。