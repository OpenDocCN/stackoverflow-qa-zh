# StackOverflow 问答 11223000-11223999

# php - 使用 PHP post 和 get 同一个表单到同一页面

> ID：11223000
> 
> 赞同：2
> 
> 时间：2012-06-27T09:18:20.320
> 
> 标签：php, html, forms, post

我正在制作一个 PHP 应用程序，用它测试面向对象，因为我正在尝试学习面向对象而不是过程编程。

基本上我有一个用户可以使用系统预订的课程列表，它们出现在用户个人资料中。从个人资料中，我希望每个预订的课程旁边都有一个“删除”链接，单击该链接会删除该课程。

我必须为此使用html表单吗？我已经开始这样做了，但似乎不对。我有一个名为“delete_course”的函数，它可以完成我想要它做的事情，而我需要传递的只是数据库中帖子的 ID。所以......我的问题是......将表单中的ID发布到带有函数调用的页面是否是最佳做法？

如果这是最好的方法，最好将其发布到用户所在的相同（当前）页面，还是发布到另一个页面，例如“cancel_course.php”？有什么好处？

谢谢

哦，顺便说一句，我对 PHP 比较陌生，但是已经做了很多 JS，所以我知道 ajax 是一个更好的选择，只是想学习 PHP :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T09:24:20.713

如果您想在不使用 JavaScript 的情况下通过 HTTP POST 变量，则需要在 HTML 中使用一个带有“post”方法属性的表单。

每个删除按钮都可以在数据库中具有课程 ID 的值，这将使您可以轻松识别 PHP 中正在删除的课程。

HTML：

```
<form method="post">
    <ul>
        <li>
            <h1>Learn how to sew course</h1>
            <button type="submit" name="deleteCourse" value="1">Delete</button>
        </li>
        <li>
            <h1>Learn how to knit course</h1>
            <button type="submit" name="deleteCourse" value="2">Delete</button>
        </li>
</form> 
```

PHP：

```
if(!empty($_POST["deleteCourse"])) {
    $courseList->deleteById($_POST["deleteCourse"]);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T09:26:15.073

您有一些选项可供选择，仅举几例：

1) 通过 URL：创建超链接，例如：

```
http://www.example.com/myprofile.php?deleteCourseid=23
http://www.example.com/myprofile.php?deleteCourseid=54 
```

等等以及来自 myprofile.php：

```
if (isset($_GET["deleteCourseid"]){
  $deleteme = (int)$_GET["deleteCourseid"];
  // Some query here.
} 
```

2）通过表单中的POST。同样的逻辑适用。

我建议您也使用一些会话逻辑来识别用户，以便您可以根据 $_GET["deleteCourseid"] 和类似 $_SESSION["userid"] 的内容删除课程

假设您有一些表，例如：[Postgresql]

```
CREATE tblusercourse(
  usercourseid SERIAL PRIMARY KEY,
  userid INTEGER REFERENCES tblusers(userid),
  courseid INTEGER REFERENCES tblcourse(courseid),
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T09:23:08.043

如果我理解正确，你有一些东西的列表，每个东西都有它自己的删除按钮。

例如，拉脱维亚语课程【删除课程】

我发现很简单，[删除课程] 将链接到带有 GET 参数的同一页面，例如 delete_course=$id。接着

```
if (isset($_GET['delete_course'])) {
    $class->delete_course($_GET['delete_course']);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T09:38:10.207

最好的选择是使用 ajax 调用（你说你很清楚）从配置文件中删除项目，所以你有两个优点

1.  用户不必等待页面加载：您可以假设一个乐观模型并立即从 DOM 中删除该项目，并且只注册失败回调来恢复 HTML 元素并在出现问题时通知用户
2.  （一点）节省服务器带宽 - 是的，这是一个很小的优化，我承认：P

但是，既然你说你是 PH​​P 新手，我最强烈的建议是不要使用普通的 PHP 文件来做这类事情，特别是如果你需要（就像你应该的那样）一个数据库。这样你可能会学到不好的知识（比如使用 mysql 扩展函数[而不是 PDO](http://www.php.net/manual/en/ref.pdo-mysql.php)），而且实际上这些知识既不是真正的面向对象，也不是在现实生活中的应用程序中使用的。

PHP 开发人员（如 Python 和 Ruby 开发人员）现在使用框架来构建他们的应用程序。这些框架通常提供从数据库到 PHP 代码的 OR 映射，让您编写真正的 OO 代码，而且由于 MVC 范式更易于维护。

这些框架大部分都是开源的，所以你可以通过查看代码来学习 PHP 的东西。我个人推荐[CakePHP](http://cakephp.org/)。

# c++ - 如何将整数转换为字符串

> ID：11223002
> 
> 赞同：0
> 
> 时间：2012-06-27T09:18:24.137
> 
> 标签：c++, c, pointers

> **可能重复：**
> [替代 itoa() 将整数转换为字符串 C++？](https://stackoverflow.com/questions/228005/alternative-to-itoa-for-converting-integer-to-string-c)
> [如何在 C++ 中将数字转换为字符串，反之亦然](https://stackoverflow.com/questions/5290089/how-to-convert-a-number-to-string-and-vice-versa-in-c)
> [将 int 附加到 std::string](https://stackoverflow.com/questions/10516196/append-an-int-to-a-stdstring)

我想将整数转换为字符串，有人帮我进行这些转换吗？

```
itoa(*data->userid,buff1,10);
itoa(*data->userphone,buff2,10); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T09:19:31.903

对于 C++，请`std::stringstream`改用。

```
#include <sstream>

//...
std::stringstream ss;
ss << *data->userid;
std::string userId = ss.str(); 
```

或者`std::to_string`如果您可以访问 C++11 编译器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T09:20:24.820

如果你有一个带有新[`std::to_string`](http://en.cppreference.com/w/cpp/string/basic_string/to_string)函数的 C++11 编译器，你可以使用它。否则使用`std::stringstream`Luchian 的解决方案。

# mysql - MySQL中没有子查询字段的模式计算？

> ID：11223003
> 
> 赞同：4
> 
> 时间：2012-06-27T09:18:24.897
> 
> 标签：mysql, sql, subquery, mode

在我的应用程序中，每个产品组都有很多产品，每个产品都有一个制造商。这些关系由 MySQL 存储在`product_groups`带有`id`字段的 InnoDB 表中，并`products`带有`id`,`product_group`和`manufacturer`字段。

有没有办法找到每个产品组中最常见的制造商，而无需选择子查询？

这就是我目前的做法：

```
SELECT product_groups.id,
  (
    SELECT manufacturer FROM products
    WHERE product_group = product_groups.id
    GROUP BY manufacturer
    ORDER BY count(*) DESC
    LIMIT 1
  ) manufacturer_mode
FROM product_groups; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T10:38:18.890

试试这个解决方案：

```
SELECT
    a.product_group,
    SUBSTRING_INDEX(GROUP_CONCAT(a.manufacturer ORDER BY a.occurrences DESC SEPARATOR ':::'), ':::', 1) AS manufacturer_mode
FROM
    (
        SELECT
            aa.product_group,
            aa.manufacturer,
            COUNT(*) AS occurrences
        FROM
            products aa
        GROUP BY
            aa.product_group,
            aa.manufacturer
    ) a
GROUP BY
    a.product_group 
```

# 解释：

这仍然使用子查询的一种形式，但它只执行一次，而不是像在原始示例中那样逐行执行。

它的工作原理是首先选择`product_group`id、制造商以及制造商在每个特定组中出现的次数。

子选择在`FROM`执行后看起来像这样（这里只是弥补数据）：

```
product_group   |   manufacturer   |    occurrences
---------------------------------------------------
1               |   XYZ            |    4
1               |   Test           |    2
1               |   Singleton      |    1
2               |   Eloran         |    2
2               |   XYZ            |    1 
```

现在我们有了子选择结果，我们需要`occurences`为每个产品组选择字段中具有最大值的行。

在外部查询中，我们再次按字段对子选择进行分组，`product_group`但这一次，***只有***`product_group`字段。现在，当我们在`GROUP BY`这里进行操作时，我们可以在 MySQL 中使用一个非常引人注目的函数`GROUP_CONCAT`，我们可以使用它以我们想要的任何顺序将制造商连接在一起。

```
...GROUP_CONCAT(a.manufacturer ORDER BY a.occurrences DESC SEPARATOR ':::'... 
```

我们在这里所做的是将每个`product_group`id 组合在一起的制造商连接在一起，以`ORDER BY a.occurrences DESC`确保出现最多的制造商出现在连接列表中的***第一位。***最后，我们将每个制造商与`:::`. 这个 for 的结果`product_group` `1`将如下所示：

```
XYZ:::Test:::Singleton 
```

`XYZ`首先出现，因为它在该`occurance`字段中具有最高值。我们*只想*选择`XYZ`，因此我们将串联包含在 中`SUBSTRING_INDEX`，这将允许我们仅根据`:::`分隔符选择列表的第一个元素。

最终结果将是：

```
product_group    |    manufacturer_mode
---------------------------------------
1                |    XYZ
2                |    Eloran 
```

# ruby-on-rails - 抢救 Rails 中的路由错误

> ID：11223009
> 
> 赞同：2
> 
> 时间：2012-06-27T09:19:05.923
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

因此，我关注了 José Valim 的博文[，](http://blog.plataformatec.com.br/2012/01/my-five-favorite-hidden-features-in-rails-3-2/)添加了

```
config.exceptions_app = self.routes 
```

到我的 application.rb 用于将 HTTP 错误路由到我自己的控制器。

一切都按预期工作，我的自定义错误页面工作等等，但它抛出了一个`ActionController::RoutingError`虽然，它被记录为`FATAL`. 有没有办法绕过这个`FATAL`消息？我一直试图从应用程序控制器和我的错误控制器中的错误中拯救出来，但无济于事。

```
2012-06-27 12:19:33.908 [FATAL] [127.0.0.1] 
ActionController::RoutingError (No route matches [GET] "/3489423u4023ho") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:47:58.720

您是否添加了类似的路线`match "/404", :to => "errors#not_found"`？

你使用的是生产模式，还是开发模式？

> 除非您`config.consider_all_requests_local`在. 原因是，如果请求被认为是本地的，Rails 总是倾向于显示调试异常页面；`false``config/environments/development.rb`

# python - AttributeError: 'list' 对象没有属性 'click' - Selenium Webdriver

> ID：11223011
> 
> 赞同：26
> 
> 时间：2012-06-27T09:19:16.657
> 
> 标签：python, selenium, webdriver

我正在尝试使用 python 在 Selenium webdriver 中使用 click 命令。但我收到以下错误。有人能帮我吗？

```
Traceback (most recent call last):
File "C:\Users\vikram\workspace\LDC\test.py", line 13, in <module>
driver.find_elements_by_link_text("MISCQA Misc Tests").click()
AttributeError: 'list' object has no attribute 'click' 
```

这是我的程序

```
from selenium import webdriver
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.common.by import By 
from selenium.common.exceptions import NoSuchElementException 
from selenium.webdriver.support.ui import WebDriverWait
import config

url = config.config.get('url')

driver = webdriver.Ie()
driver.get(url)

driver.find_elements_by_link_text("MISCQA Misc Tests").click()

driver.close() 
```

我想我错过了一些东西。请建议我

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-06-27T09:42:24.067

感谢您的帮助。我为自己找到了答案。“Dan Niero”给出的想法

问题是，我使用`driver.find_element[s]`的是`driver.find_element`. 所以一个 s 有所作为并调用了错误的方法。事实上，我正在关注 eclipse 自动完成 :(。显然`driver.find_elements_by_link_text`返回列表，所以如果我发送点击事件，它不会理解。

感谢您的帮助，并对我的坏问题感到抱歉

-维克拉姆

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-27T09:27:30.100

也许`driver.find_elements_by_link_text("MISCQA Misc Tests")[0].click()`或另一个索引...

我不知道 Selenium，但我猜 find_elements_by_link_text 发现的不止一件事，或者该方法总是返回一个列表而不是单个对象。如果你绝对确定只有一个对象应该是你的搜索结果，而不是像我提到的那样使用 [0]，如果你不能假设只有一个对象，那么你需要想出一个更强大的对象战略

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-04-03T06:30:19.437

参考[定位元素文档](https://selenium-python.readthedocs.io/locating-elements.html)，这里是一个解释`find_elements_*`：

> ***查找多个元素（这些方法将返回一个列表）***

因此，要访问特定元素，请使用如下索引：

```
#first element
driver.find_elements_by_xpath("xpath")[0].click() 
```

或者您可以使用循环访问列表中的所有元素：

```
#assumed to click the checkbox
chks = driver.find_elements_by_xpath("xpath")
for chk in chks:
    chk.click() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T09:25:34.990

你的代码的一部分，

```
driver.find_elements_by_link_text("MISCQA Misc Tests") 
```

正在返回一个列表，而不是 selenium webdriver 的对象（你想要的，具有函数 "click()" 的类的对象）。

**最有可能**的是，列表的元素是对象。

在该部分代码之后打印列表并检查列表中的元素是否是您需要的元素。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-27T12:21:43.953

如果你想要单个元素，那么你可以使用：

```
driver.find_element_by_link_text("MISCQA Misc Tests") 
```

或者如果你想要整个列表，那么：

```
for x in self.driver.find_elements_by_link_text("MISCQA Misc Tests"):
    link = webdriver.ActionChains(self.driver).move_to_element(x).click(x).perform() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-14T07:54:01.580

如果“MISCQA Misc Tests”的属性只有一个，你可以尝试在这段代码中将elements改为element 'driver.find_elements_by_link_text("MISCQA Misc Tests")' 希望问题能解决

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-27T09:43:39.503

该语句`driver.find_elements_by_link_text("MISCQA Misc Tests")` 返回一个**WebElement**列表， 其中一些可能无法单击。

因此，您必须遍历返回的 WebElement 列表，然后单击那些可单击的元素。

`isClickable()`您可以使用该函数检查 WebElement 是否可点击。

我没有发布代码，因为我不懂 Python。希望这对您有所帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-15T13:00:44.177

我发现下面的解决方案我使用的是 appiumrobotlibaray 1.5 版，其中

```
@{elemet}    get webelements     ${elemets}
click element  @{elemet}[1] 
```

此代码抛出“AttributeError：'list'对象没有属性'click'错误将appium库降级到以前的版本。1.4.6，这在我的情况下有效。

# sql - 在 SQL Server 的 SELECT 语句中使用 EXEC

> ID：11223022
> 
> 赞同：14
> 
> 时间：2012-06-27T09:19:54.410
> 
> 标签：sql, sql-server

我需要使用`exec`inside of`select`子句。exec 的查询是根据表的列创建的，如果使用了 select 子句。我想做的是如下所示：

```
 SELECT distinct 
     MTMain.[TableName],
     MTMain.[TableFKey], 
     (select IsActive (exec GetStringForIsActive MTMain.[TableName],MTMain.[TableFKey]))
 FROM
     [MasterTableForLanguage] MTMain 
```

在这里，`GetStringForIsActive`是我要为从 中选择的每一行执行的存储过程`MasterTableForLanguage`。
将`stored procedure`用于`EXEC`执行以下字符串

```
select IsActive from [TableName] where PKID= cast([TableFKey] as int) 
```

TableName 和 TableFKey 将是存储过程的输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:12:04.000

如果您可以修改存储过程 GetStringForIsActive 以返回 TableName、TableFKey 和 IsActive，则可以使用游标对每一行执行它并将结果添加到临时表中。

IE：

```
exec GetStringForIsActive 'TableName', 'TableFKey'
returns
select [TableName], [TableFKey], IsActive from [TableName] where PKID= cast([TableFKey] as int) 
```

代码将是这样的：

```
declare @TableName nvarchar(50)
declare @TableFKey nvarchar(50)
declare @Results table (TableName nvarchar(50), TableFKey nvarchar(50), IsActive bit)

declare TableCursor cursor fast_forward for
   select TableName, TableFKey from MasterTableForLanguage

open TableCursor

fetch next from TableCursor into @TableName, @TableFKey

if @@FETCH_STATUS <> -1
   print 'MasterTableForLanguage check'

while (@@FETCH_STATUS <> -1)
begin

   insert into @Results
   exec GetStringForIsActive @TableName, @TableFKey

   fetch next from TableCursor into @TableName, @TableFKey

end
close TaleCursor
deallocate TableCursor

select * from @Results 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:24:46.843

在 SELECT 子句中使用函数而不是存储过程。

编辑：

创建该功能

```
CREATE FUNCTION function1 (@TableName nvarchar(10),@TableFKey nvarchar(10))
RETURNS nvarchar(100) AS  
BEGIN 
    -- do whatever here
END 
```

然后

```
SELECT distinct 
     MTMain.[TableName],
     MTMain.[TableFKey], 
     function1(MTMain.[TableName],MTMain.[TableFKey])
 FROM
     [MasterTableForLanguage] MTMain 
```

这有意义吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-05T17:13:39.730

好吧，我想回答完整的问题，我不相信存储过程会执行 SELECT 语句，它只会执行 SELECT。

您执行当前 proc 并将其传递给 vars，它会根据它运行的 select 语句返回一个值。它不是执行该语句，只是执行一个选择。我有几个存储过程，我每天在一些 SQL 代理进程中使用，它们都执行选择来查询各种表，并且没有一个调用 EXEC 来执行这些操作。这是我自己的例子：

```
CREATE PROCEDURE [myproc]
    @job_ident      INT
AS
BEGIN
    SET NOCOUNT ON;

    ...

    SELECT TOP(1) @filter_type = filter_type FROM [place] WHERE [ident] = @job_ident

    ...
 END 
```

如前所述，执行查询的最有效方法是在函数内执行该选择，我认为类似于此的操作：

```
CREATE FUNCTION ThisFunction (
    @TableName nvarchar(10),
    @TableFKey nvarchar(10)
    )
    RETURNS nvarchar(100)
    AS  
        BEGIN
            RETURN 
            (
                select IsActive from [TableName] where PKID= cast([TableFKey] as int)
            )
        END 
```

然后你可以完全按照你的意愿去做......

```
SELECT distinct 
     MTMain.[TableName],
     MTMain.[TableFKey], 
     ThisFunction(MTMain.[TableName],MTMain.[TableFKey])
 FROM
     [MasterTableForLanguage] MTMain 
```

# windows-xp - TFS 2010 构建代理未启动

> ID：11223023
> 
> 赞同：0
> 
> 时间：2012-06-27T09:20:01.477
> 
> 标签：windows-xp, directory, build-agent

在我将属性凭据从网络服务更改为域帐户后，我的构建代理没有启动。我这样做是因为网络服务帐户无法写入我的放置文件夹。

每次我将网络服务添加到放置文件夹共享时，它都会出现然后消失。 [http://msdn.microsoft.com/en-us/library/bb778394.aspx](http://msdn.microsoft.com/en-us/library/bb778394.aspx)我遵循了这个，但有些步骤不同，我有 xp，它没有显示共享选项卡，所以我通过安全选项卡

所以我想我在这里问两个问题；

1.  更改凭据后代理未启动。
2.  网络服务无法写入放置文件夹。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:03:29.030

是的，网络服务无权写入放置位置。这很标准。您需要使用域帐户。

TFS 构建服务将需要以域用户身份运行，以便它可以写入放置位置。

构建代理的域帐户需要位于构建服务帐户的 TFS 项目集合组中（TFS 内部）。我不记得它实际上叫什么，但您需要成为收藏管理员才能更新它。

域帐户还需要一些登录作为批处理/服务权限，但这应该在您重新配置服务时自动完成。您是使用 TFS 管理控制台重新配置代理还是只是在服务上设置了凭据？（您应该使用 TFS 管理控制台）。

# php - 计算 PHP 5.2 的年龄

> ID：11223025
> 
> 赞同：0
> 
> 时间：2012-06-27T09:20:14.350
> 
> 标签：php, expressionengine

我试图从 ExpressionEngine 网站上的出生日期计算一个人的年龄。以下代码适用于我的本地测试站点，但服务器使用的是旧版本的 PHP (5.2.17)，所以我遇到了错误。有人可以建议我需要使用什么代码吗？

```
{exp:channel:entries channel='zoo_visitor'}
<?php
$dob = new DateTime('{member_birthday format='%Y-%m-%d'}');
$now = new DateTime('now');
// This returns a DateInterval object.
$age = $now->diff($dob);
// You can output the date difference however you choose.
echo 'This person is ' .$age->format('%y') .' years old.';
?>
{/exp:channel:entries} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T09:31:41.967

您当前的代码将无法工作，因为`DateTime::diff`它是在 PHP 5.3.0 中引入的。

通常，日期算术非常棘手，因为您必须考虑时区、DST 和闰年，但对于像计算“全年”差异这样简单的任务，您可以很容易地做到这一点。

这个想法是结果等于结束日期的年份减去开始日期的年份，如果开始日期的月/日在一年内早于结束日期，则应从中减去 1。编码：

```
$dob = new DateTime('24 June 1940');
$now = new DateTime('now');

echo year_diff($now, $dob);

function year_diff($date1, $date2) {
    list($year1, $dayOfYear1) = explode(' ', $date1->format('Y z'));
    list($year2, $dayOfYear2) = explode(' ', $date2->format('Y z'));
    return $year1 - $year2 - ($dayOfYear1 < $dayOfYear2);
} 
```

[**看到它在行动**](http://ideone.com/HxHx3)。请注意结果如何在指定生日的同一天增加 1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T09:24:38.647

```
$dob = strtotime('{member_birthday format='%Y-%m-%d'}');
$now = time();
echo 'This person is ' . (1970 - date('Y', ($now - $dob))) .' years old.'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T09:23:07.340

您只能使用PHP 5.3 以上的[差异](http://www.php.net/manual/en/datetime.diff.php)

您可以尝试修改，它适用于 5.2

```
$age = $now->modify('-' . $dob->format('Y') . 'year'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T13:05:44.927

经过大量搜索，我找到了答案：

```
<?php
    //date in mm/dd/yyyy format
    $birthDate = "{member_birthday format='%m/%d/%Y'}";
    //explode the date to get month, day and year
    $birthDate = explode("/", $birthDate);
    //get age from date or birthdate
    $age = (date("md", 
                 date("U", 
                      mktime(0, 
                             0, 
                             0, 
                             $birthDate[0], 
                             $birthDate[1], 
                             $birthDate[2])
                     )
                 )
            > date("md") 
            ? ((date("Y") - $birthDate[2]) - 1)
            : (date("Y") - $birthDate[2]));
    echo $age;
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T10:35:50.240

在某些极端情况下，仅使用一年中的某一天的计算会减少一个：它们显示 2012-02-29 和 2011-03-01 为 1 年，而这应该是 0 年（以及 11 个月和 28 天）。考虑闰年的可能解决方案是：

```
<?php
    function calculateAge(DateTime $birthDate, DateTime $now = null) {
        if ($now == null) {
            $now = new DateTime;
        }

        $age = $now->format('Y') - $birthDate->format('Y');
        $dm = $now->format('m') - $birthDate->format('m');
        $dd = $now->format('d') - $birthDate->format('d');

        if ($dm < 0 || ($dm == 0 && $dd < 0)) {
            $age--;
        }

        return $age;
    }

    echo calculateAge(new DateTime('2011-04-01'), new DateTime('2012-03-29')); 
```

不过，user579984 的解决方案也有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T12:51:42.330

```
$birthday = '1983-03-25';
$cm = date('Y', strtotime($birthday));
$cd = date('Y', strtotime('now'));

$res = $cd - $cm;

if (date('m', strtotime($birthday)) > date('m', strtotime('now')))
    $res--;
else if ((date('m', strtotime($birthday)) == date('m', strtotime('now'))) &&
    (date('d', strtotime($birthday)) > date('d', strtotime('now'))))
    $res--;

echo $res; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-29T09:30:19.893

我一直在使用它，它从未让我失望。`YYYYMMDD`是这个人的生日。

```
$age = floor((date('Ymd') - 'YYYYMMDD') / 10000); 
```

如果您想更严格，您可以使用`intval`函数将日期转换为整数，或在日期前加上`(int)`.

# javascript - 将 Underscore.js 的调用与 lastIndexOf 一起使用

> ID：11223027
> 
> 赞同：0
> 
> 时间：2012-06-27T09:20:22.210
> 
> 标签：javascript, invoke, underscore.js

```
// Why doesn't this:
_.invoke(['D','C'], 'lastIndexOf', ['A','B','C'])

// Return this:
[-1,2]? 
```

我有一个字符串。（输入）

**'ABC'**

拆分成一个数组。（输入缓冲区）

**['A','B','C']**

我还有一个包含任意字符的数组。（触发字符）

**['D','E']**

~~我想检查 InputBuffer 中的最后一项，看看是否匹配任何 TriggerChars。~~

我想在 InputBuffer 中获得两个 TriggerChars 的最后一次出现。

```
_.invoke(['D','E'], 'lastIndexOf', ['A','B','C']);
// Returns [-1,-1] since C isn't D or E.

_.invoke(['D','C'], 'lastIndexOf', ['A','B','C']);
// Why doesn't this return [-1,2]

_.lastIndexOf(['A','B','C'],'D') == -1
_.lastIndexOf(['A','B','C'],'C') == 2 
```

Invoke 没有得到什么？ [http://underscorejs.org/#invoke](http://underscorejs.org/#invoke)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:37:28.577

```
var InputBuffer = ["A","B","C"];
var TriggerChars = ["D","E"];

_.indexOf( TriggerChars, InputBuffer[InputBuffer.length-1] ) > -1; 
```

评估`true`是否：*我想检查 InputBuffer 中的最后一项以查看是否匹配任何 TriggerChars。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:10:44.600

```
var inputBuffer = ["A","B","C"];  
var triggerChars = ["D","E"];

triggerChars.indexOf(inputBuffer[inputBuffer.length-1]) > -1 
```

或者只是跳过下划线，除了依赖关系之外，上面的解决方案完全相同，

好的，我更新了一点

```
var inputBuffer = ["A","B","C"];  
var triggerChars = ["D","C"];  

var index = [];

for(var i = 0; i < triggerChars.length; i++){
   index.push(inputBuffer.lastIndexOf(triggerChars[i]));
}

console.log(index);

-> [-1,2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T13:32:36.070

你需要的是：

```
_.map(['D', 'C'], function (x) { return _.lastIndexOf(['A', 'B', 'C'], x)}) 
```

# java - Java 运行时执行

> ID：11223030
> 
> 赞同：0
> 
> 时间：2012-06-27T09:20:28.987
> 
> 标签：java, command, runtime, system, exec

我正在尝试在 Java 中使用 system exec 做一些事情

```
Runtime.getRuntime().exec(command); 
```

令人惊讶的是，与路径、目录和文件相关的所有内容都无法正常工作

我不明白为什么，只是想知道有没有其他**选择**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T09:25:10.450

另一种方法是使用[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)类，它有一个更干净的界面，但您的主要问题可能与操作系统如何处理命令行有关，并且 Java 没有太多可以帮助您解决的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T09:37:21.087

如上所述， cd 是一个内置的 shell。即它不是一个可执行文件。您可以使用以下方法确定：

```
$ which cd
cd: shell built-in command 
```

因为它不是一个独立的可执行文件，`Runtime.exec()`所以不能用它做任何事情。

您最好编写一个 shell 脚本来执行特定于 shell 的操作（例如更改工作目录），然后简单地使用`Runtime.exec()`. 您可以在脚本中设置 PATH 变量等，让 Java 简单地执行您的脚本。

引起人们注意的一件事是您必须使用脚本的 stdout/stderr（即使您将其丢弃）。如果您没有正确执行此操作，您的进程可能会阻塞。有关更多详细信息，请参阅[此 SO 答案](https://stackoverflow.com/a/882795/12960)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T22:26:21.643

exec() 方法可以接受三个参数。第三个是您的子进程应用作其工作目录的目录。无论如何，这解决了您的“cd”问题。

# iphone - CATiledLayer 问题

> ID：11223032
> 
> 赞同：-1
> 
> 时间：2012-06-27T09:20:36.640
> 
> 标签：iphone, uiview, uiimage, tiles, catiledlayer

我想像在 PhotoScroller 应用程序中一样使用 CATiledLayer。在我的 TilingView.m 我有

```
+ (Class)layerClass {
    return [CATiledLayer class];
}

- (id)initWithImageName:(NSString *)name size:(CGSize)size
{
    if ((self = [super initWithFrame:CGRectMake(0, 0, size.width, size.height)])) {
        imageName = [name retain];

        CATiledLayer *tiledLayer = (CATiledLayer *)[self layer];
        tiledLayer.levelsOfDetail = 4;
    }
    return self;
}

- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();

    // get the scale from the context by getting the current transform matrix, then asking for
    // its "a" component, which is one of the two scale components. We could also ask for "d".
    // This assumes (safely) that the view is being scaled equally in both dimensions.
    CGFloat scale = CGContextGetCTM(context).a;

    CATiledLayer *tiledLayer = (CATiledLayer *)[self layer];
    CGSize tileSize = tiledLayer.tileSize;

    if (scale != 0.125)
    {
        UIImage *image = [UIImage imageNamed:imageName];
        CGRect rect = self.bounds;
        [image drawInRect:rect];
        return;
    }

    // Even at scales lower than 100%, we are drawing into a rect in the coordinate system of the full
    // image. One tile at 50% covers the width (in original image coordinates) of two tiles at 100%. 
    // So at 50% we need to stretch our tiles to double the width and height; at 25% we need to stretch 
    // them to quadruple the width and height; and so on.
    // (Note that this means that we are drawing very blurry images as the scale gets low. At 12.5%, 
    // our lowest scale, we are stretching about 6 small tiles to fill the entire original image area. 
    // But this is okay, because the big blurry image we're drawing here will be scaled way down before 
    // it is displayed.)
    tileSize.width /= scale;
    tileSize.height /= scale;

    // calculate the rows and columns of tiles that intersect the rect we have been asked to draw
    int firstCol = floorf(CGRectGetMinX(rect) / tileSize.width);
    int lastCol = floorf((CGRectGetMaxX(rect)-1) / tileSize.width);
    int firstRow = floorf(CGRectGetMinY(rect) / tileSize.height);
    int lastRow = floorf((CGRectGetMaxY(rect)-1) / tileSize.height);

    for (int row = firstRow; row <= lastRow; row++) {
        for (int col = firstCol; col <= lastCol; col++) {
            UIImage *tile = [self tileForScale:scale row:row col:col];
            CGRect tileRect = CGRectMake(tileSize.width * col, tileSize.height * row,
                                         tileSize.width, tileSize.height);

            // if the tile would stick outside of our bounds, we need to truncate it so as to avoid
            // stretching out the partial tiles at the right and bottom edges
            tileRect = CGRectIntersection(self.bounds, tileRect);

            [tile drawInRect:tileRect];

            if (self.annotates) {
                [[UIColor whiteColor] set];
                CGContextSetLineWidth(context, 6.0 / scale);
                CGContextStrokeRect(context, tileRect);
            }
        }
    }
} 
```

所以，当我使用视网膜显示器时，它总是进入

```
if (scale != 0.125)
    {
        UIImage *image = [UIImage imageNamed:imageName];
        CGRect rect = self.bounds;
        [image drawInRect:rect];
        return;
    } 
```

它在模拟器（视网膜显示器）上完美运行，但在设备上它会引发异常（图像！= nil，我已经检查过）

```
[image drawInRect:rect]; 
```

例外

```
0x35affc70:  push   {r4, r5, r6, r7, lr}
0x35affc72:  add    r7, sp, #12
0x35affc74:  push.w {r8, r10, r11}
0x35affc78:  ldr    r1, [r0]
0x35affc7a:  ldr    r2, [r0, #12]
0x35affc7c:  cmp.w  r2, r1, lsl #2
0x35affc80:  blo    0x35affd06               ; ImageIO_ABGR_TO_ARGB_8Bit + 150
0x35affc82:  ldr    r3, [r0, #24]
0x35affc84:  lsls   r2, r1, #2
0x35affc86:  cmp    r3, r2
0x35affc88:  blo    0x35affd06               ; ImageIO_ABGR_TO_ARGB_8Bit + 150
0x35affc8a:  ldr    r2, [r0, #4]
0x35affc8c:  cmp    r2, #0
0x35affc8e:  beq    0x35affd06               ; ImageIO_ABGR_TO_ARGB_8Bit + 150
0x35affc90:  bic    lr, r1, #7
0x35affc94:  ldr    r3, [r0, #8]
0x35affc96:  ldr.w  r12, [r0, #20]
0x35affc9a:  sub.w  r4, r1, lr
0x35affc9e:  asrs   r5, r1, #3
0x35affca0:  mov    r6, r12
0x35affca2:  mov    r8, r3
0x35affca4:  cbz    r5, 0x35affcbe           ; ImageIO_ABGR_TO_ARGB_8Bit + 78
0x35affca6:  mov    r8, r3
0x35affca8:  mov    r9, r5
0x35affcaa:  mov    r6, r12
0x35affcac:  vld4.8 {d0, d1, d2, d3}, [r8]!
0x35affcb0:  vswp   d0, d2
0x35affcb4:  vst4.8 {d0, d1, d2, d3}, [r6]!     ;!!!!!!!!string with exception!!!!!!!!!!!!
0x35affcb8:  subs.w r9, r9, #1
0x35affcbc:  bne    0x35affeac               ; slab_dealloc + 132
0x35affcbe:  cmp    lr, r1
0x35affcc0:  bge    0x35affcf8               ; ImageIO_ABGR_TO_ARGB_8Bit + 136
0x35affcc2:  add.w  r8, r8, #2
0x35affcc6:  adds   r6, #2
0x35affcc8:  mov    r9, r4
0x35affcca:  ldrb.w r11, [r8]
0x35affcce:  subs.w r9, r9, #1
0x35affcd2:  ldrb   r10, [r8, #-2]
0x35affcd6:  strb   r11, [r6, #-2]
0x35affcda:  ldrb   r11, [r8, #-1]
0x35affcde:  strb   r11, [r6, #-1]
0x35affce2:  strb.w r10, [r6]
0x35affce6:  ldrb.w r10, [r8, #1]
0x35affcea:  add.w  r8, r8, #4
0x35affcee:  strb.w r10, [r6, #1]
0x35affcf2:  add.w  r6, r6, #4
0x35affcf6:  bne    0x35affeca               ; current_timestamp + 26
0x35affcf8:  ldr    r6, [r0, #12]
0x35affcfa:  subs   r2, #1
0x35affcfc:  ldr.w  r8, [r0, #24]
0x35affd00:  add    r3, r6
0x35affd02:  add    r12, r8
0x35affd04:  bne    0x35affea0               ; slab_dealloc + 120
0x35affd06:  pop.w  {r8, r10, r11}
0x35affd0a:  pop    {r4, r5, r6, r7, pc} 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:51:58.980

您是否已经检查过文件名？

在搜索代码中的错误之前，只需检查图像的文件名：记住模拟器不区分大小写（FileName.png == filename.png -> 它将被加载）但 iDevice 区分大小写（FileName.png）。 png != filename.png -> 它不会被加载）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-27T10:41:03.217

问题在于图像不好（我使用在线转换器将图像从 jpg 转换为 png 并且遇到了困难，而不是使用 Photoshop 并且一切都变好了）

# css - 我可以更改 QToolbar 样式的哪些属性？

> ID：11223038
> 
> 赞同：1
> 
> 时间：2012-06-27T09:20:55.313
> 
> 标签：css, qt, qt4, styling

我有一个 QToolbar 我已将样式应用于：

```
sMainWindowStyle += "QToolBar::handle { image: url(:/icons/toolbar_handle.png); }\n"; 
```

但是，除了更改工具栏的句柄之外，我还想更改展开箭头 >>

我找不到属性列表，因此我可以查看工具栏展开箭头是什么。有人知道 Qt 中样式属性的明确列表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:04:05.057

您可以使用以下 CSS 更改展开按钮。

```
QToolButton#qt_toolbar_ext_button 
{ 
    qproperty-icon: url(:/path/to/image.png);
} 
```

不幸的是，我知道找出可以设置哪些属性的最佳方法是浏览 Qt 源代码。有些样式甚至不支持某些属性，而其他样式可以。

# android - .mp3 在 Android 上下载为 .mpga。这与 MIME 类型有关吗？

> ID：11223043
> 
> 赞同：1
> 
> 时间：2012-06-27T09:21:11.213
> 
> 标签：android, mp3, mime-types, mime

嗨，我希望你们中的一个可以帮助我。我有一个小问题。当使用 android 股票浏览器从我的站点下载 .mp3（及其所有 id3 信息）时，该文件将保存为 .mpga 文件，并且所有 id3 信息都将丢失。

有没有办法强制将 .mp3 下载为 mp3？我刚才已经研究过了，我认为这是通过设置正确的 MIME 类型来实现的。如果这确实是正确的行动方案，我只想有人帮助如何做到这一点。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:23:03.233

你在用 Chrome 吗？对此问题加注星标：[http ://code.google.com/p/chromium/issues/detail?id=170852](http://code.google.com/p/chromium/issues/detail?id=170852)

# c# - 使用 ExecuteNonQuery() 时从 SQLite 检索错误代码

> ID：11223044
> 
> 赞同：1
> 
> 时间：2012-06-27T09:21:20.857
> 
> 标签：c#, sqlite, system.data.sqlite, executenonquery

在我的 C# 项目中，我使用的是`System.Data.SQLite.dll`从[CodeProject](http://www.codeproject.com/Articles/26932/Convert-SQL-Server-DB-to-SQLite-DB%22)下载的。

`SqliteCommand.ExecuteNonQuery()`我的问题是根据标题-调用函数后如何获取错误代码？

`SQLITE_CONSTRAINT, SQLITE_BUSY, SQLITE_LOCKED`如此处所示[的](http://www.sqlite.org/c3ref/c_abort.html)错误代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T09:45:57.957

使用 Exception.StackTrace 或 SQLiteException.ErrorCode

```
try
{

}
catch(SQLiteException ex)
{
    string code = ex.ErrorCode;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-26T14:02:35.443

如果您使用 .NET 进行开发，我将对此进行补充以帮助其他人。使用

`SQLiteErrorCode`枚举测试结果，转换 ErrorCode：

```
try
{

}
catch(SQLiteException ex)
{
    SQLiteErrorCode sqlLiteError= (SQLiteErrorCode)ex.ErrorCode;

    //Do whatever logic necessary based of the error type
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-26T03:57:02.850

好问题。System.Exception 没有名为“.ErrorCode”的成员

```
 Catch Ex As SQLiteException
        E = Ex.ResultCode
        Return E
    End Try 
```

# iis-7 - 更改 IIS 7 中所有网站的 IP 地址绑定

> ID：11223052
> 
> 赞同：1
> 
> 时间：2012-06-27T09:21:47.393
> 
> 标签：iis-7

我刚刚使用 msdeploy 实用程序将 iis6 机器迁移到 iis7 新机器。现在我需要更改所有网站的 ip 绑定地址，有没有一种自动化的方法可以做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:35:42.893

您可以通过[appcmd.exe](http://learn.iis.net/page.aspx/114/getting-started-with-appcmdexe/)做到这一点。类型：`%systemroot%\system32\inetsrv\%systemroot%\system32\inetsrv\APPCMD set site "<your site here>" /?` 看看你有什么选择。

# java - 如何构建一个简单的 JPA / GenericDAO 动态 Web 应用程序

> ID：11223053
> 
> 赞同：0
> 
> 时间：2012-06-27T09:21:57.673
> 
> 标签：java, hibernate, jpa

我刚刚开始使用 JPA。根据几个教程，我构建了一个简单的动态 Web 项目，其中包括一个 GerericDAO 以及一个封装 EntityManagerFactory 的单例。

```
public class PersistenceManager {
    private static final PersistenceManager instance = new PersistenceManager();
    protected EntityManagerFactory emf;
    public static PersistenceManager getInstance() {
        return instance;
    }
    private PersistenceManager() {
    }
    public EntityManagerFactory getEntityManagerFactory() {
        if (emf == null)
            createEntityManagerFactory();
        return emf;
    }
    public void closeEntityManagerFactory() {
        if (emf != null) {
            emf.close(); emf = null;
        }
    }
    protected void createEntityManagerFactory() {
        this.emf = Persistence.createEntityManagerFactory("Fusion");
    }
}

public class GenericJPADAO<ID extends Serializable, T> implements GenericDAO<ID, T> {
    private Class<T> persistentClass;
        private EntityManager entityManager;

    @SuppressWarnings("unchecked")
    public GenericJPADAO() {
        this.persistentClass = (Class<T>) ((ParameterizedType) getClass()
                .getGenericSuperclass()).getActualTypeArguments()[0];
    }
    public void setEntityManager(EntityManager entityManager) {
        this.entityManager = entityManager;
    }

    protected EntityManager getEntityManager() {
        if (entityManager == null)
            throw new IllegalStateException("EntityManager has not been set on DAO before");
        return entityManager;
    }
    public T create(T element) throws IOException, IllegalArgumentException {
        if (element == null)
            throw new IllegalArgumentException();
        try {
            getEntityManager().persist(element); 
            return element;
        } catch (Exception e) {
            throw new IOException("create failed");
        }
    } 
```

要在 Transaction 方法中将其组合在一起，我需要这样的东西（省略一些细节）：

```
DAOFactory factory = DAOFactory.instance(DAOFactory.JPA);
ConfigurationDAO dao = factory.getAddressDAO();
dao.setEntityManager(entityManager);
EntityTransaction ut = entityManager.getTransaction();      
try {
    ut.begin();
    dao.create(address);
    ut.commit();
} catch (Exception e) {
    ut.rollback();
}
    finally {
 close??
} 
```

我对此很陌生，但是从 Transaction 方法在 DAO 类中设置 EntityManager 似乎很尴尬。我以前使用过 Hibernate，并且我的 DAO 类已经能够从 HibernateUtil 类型的类中检索当前的 Session。我不确定如何在维护线程安全应用程序的同时使用 JPA / EntityManager 实现类似的结构？也许我的结构设计不佳 - 无论如何，任何建议/指导都非常感谢。我还没有找到一个清晰完整的例子。顺便说一句 - 我没有在这个应用程序中使用 Spring。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:36:58.950

JPA 规范定义了一个类似于 Hibernate 的模式`getCurrentSession()`——电流`EntityManager`被注入到用`@PersistenceContext`.

但是，规范说应该由外部环境而不是 JPA 提供者提供对这种模式的支持，因此您不能只在独立环境中使用它。

特别是，这种模式受到 Spring Framework 和 Java EE 应用程序服务器的支持。

或者，如果您不能使用 Spring Framework 或 Java EE 应用程序服务器，您可以通过将当前存储`EntityManager`在`ThreadLocal`.

# hibernate - Hibernate 产生额外的 sql

> ID：11223060
> 
> 赞同：0
> 
> 时间：2012-06-27T09:22:35.000
> 
> 标签：hibernate, join, fetch, one-to-one

我有两个实体：**Parent**和**Child**。它们之间存在**@OneToOne**关系。

我有以下查询：**from Parent p left join fetch p.child**。

如果 Parent 中有一行不存在子键（例如 -1），则休眠会为每种情况发出额外的查询。

```
Hibernate: 
    select
        parent0_.PARENT_ID as PARENT1_2_0_,
        child1_.CHILD_ID as CHILD1_3_1_,
        parent0_.CHILD_ID as CHILD2_2_0_,
        child1_.NAME as NAME3_1_ 
    from
        PARENT parent0_ 
    left outer join
        CHILD child1_ 
            on parent0_.CHILD_ID=child1_.CHILD_ID
Hibernate: 
    select
        child0_.CHILD_ID as CHILD1_3_0_,
        child0_.NAME as NAME3_0_ 
    from
        CHILD child0_ 
    where
        child0_.CHILD_ID=? 
```

这是代码：

```
@Entity
@Table(name = "PARENT")
public class Parent {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "PARENT_ID", nullable = false)
    private int id;

    @OneToOne(optional = true)
    @JoinColumn(name = "CHILD_ID")
    @NotFound(action = NotFoundAction.IGNORE)
    private Child child;
}

@Entity
@Table(name="CHILD")
public class Child {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "CHILD_ID", nullable = false)
    private int id;

    @Column(name = "NAME")
    private String name;
} 
```

为什么会这样？如何防止这个额外的sql？

这是数据库生成的代码：

```
create table PARENT(
PARENT_ID INTEGER GENERATED ALWAYS AS IDENTITY,
CHILD_ID  INTEGER, 
PRIMARY KEY (PARENT_ID)
);

create table CHILD(
CHILD_ID  INTEGER GENERATED ALWAYS AS IDENTITY,
NAME VARCHAR(100) NOT NULL,
PRIMARY KEY (CHILD_ID)
);

insert into PARENT(CHILD_ID) values(-1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:55:15.290

您可能会尝试不同的 fetchtype；

```
@OneToOne(optional = true, fetch = FetchType.EAGER)
private Child child; 
```

但是，就像 JB Nizet 已经解释的那样，根本问题是存储在 CHILD_ID 字段中的虚构标识符。

另一种策略是反转关系，通过在父类的@OneToOne 注释中添加 mappedBy 属性，并在子类中添加对父类的引用，或者仅在子类中设置父类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:48:47.373

正确设计数据库，不要在`PARENT.CHILD_ID`列中存储不存在的子 ID。如果父级没有子级，则在此列中存储 NULL，并为该列创建外键约束以确保该列始终包含 NULL 或有效的子级 ID。

这将允许您`@NotFound`从映射中删除注释，并将删除附加查询。实际上，当 Hibernate 执行第一个查询时，它会得到 -1 作为子 ID。但是由于无法知道 -1 是否是有效的子 ID，它必须执行附加查询来确定子是否存在（因此应该在父级中初始化）或不存在（因此应该在父级中设置为 null）。

# android - 如何在不扩展 Gallery 类的情况下停止在 Android 中的 Gallery 上投掷

> ID：11223065
> 
> 赞同：2
> 
> 时间：2012-06-27T09:22:52.023
> 
> 标签：android, gallery, android-gallery, onfling

> **可能重复：**
> [如何在 android 库中禁用投掷](https://stackoverflow.com/questions/5426439/how-to-disable-fling-in-android-gallery)

我有一个带有**Gallery**小部件和更多小部件的 Activity 类。该类扩展`Activity`。现在我想停止画廊中的***投掷***属性。

是否有任何侦听器界面或类似的东西，我可以在需要时获得帮助以停止*画廊*的投掷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:37:30.723

有一种方法可以在不覆盖图库的情况下实现这一点，但这也会停止所有其他 onTouch 事件。

将您的 Gallery 放在 RelativeLayout 中，然后创建另一个 View，该 View 位于整个 Gallery 视图上，作为透明层。

您现在需要覆盖此 View 的[onInterceptTouch](http://developer.android.com/guide/topics/ui/ui-events.html#EventHandlers)方法并返回 true。现在所有的触摸事件都应该在你的视图中被截获，并且画廊不会得到任何它可以用来开始投掷的触摸事件。

# blackberry - 黑莓自定义按钮字段

> ID：11223071
> 
> 赞同：0
> 
> 时间：2012-06-27T09:23:25.567
> 
> 标签：blackberry, focus, buttonfield

[这](http://imageshack.us/photo/my-images/846/normalax.png/)是我启动活动时的默认外观。

在我玩弄轮式触控板之后，就变成[了这样](http://imageshack.us/f/10/afterj.png/)。按钮图像或整个按钮丢失。

这是我的自定义按钮字段，其中`extends ButtonField`.

```
public class Custom_ButtonField extends ButtonField {
Bitmap mNormal;
Bitmap mFocused;
Bitmap mActive;

int mWidth;
int mHeight;

public Custom_ButtonField(Bitmap normal, Bitmap focused, 
    Bitmap active) {
    super(CONSUME_CLICK);
    mNormal = normal;
    mFocused = focused;
    mActive = active;
    mWidth = mNormal.getWidth();
    mHeight = mNormal.getHeight();
    setMargin(0, 0, 0, 0);
    setPadding(0, 0, 0, 0);
    setBorder(BorderFactory
                    .createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    setBorder(VISUAL_STATE_ACTIVE, BorderFactory
                    .createSimpleBorder(new XYEdges(0, 0, 0, 0)));
}

protected void paint(Graphics graphics) {
    Bitmap bitmap = null;
    switch (getVisualState()) {
    case VISUAL_STATE_NORMAL:
            bitmap = mNormal;
            break;
    case VISUAL_STATE_FOCUS:
            bitmap = mFocused;
            break;
    case VISUAL_STATE_ACTIVE:
            bitmap = mActive;
            break;
    default:
            bitmap = mNormal;
    }
    graphics.drawBitmap(0, 0, bitmap.getWidth(), bitmap.getHeight(),
                    bitmap, 0, 0);
}

public int getPreferredWidth() {
    return mWidth;
}

public int getPreferredHeight() {
    return mHeight;
}

protected void layout(int width, int height) {
    setExtent(mWidth, mHeight);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:51:54.417

看起来您正在尝试创建一个带有图像的按钮，因此您最好使用RIM 发布的[高级 UI 库。](https://github.com/blackberry/Samples-for-Java/tree/master/Advanced%20UI)看看`BitmapButtonField`课堂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:51:10.393

在构造函数上设置 Focusable。

```
super(Field.FOCUSABLE); 
```

# c - 如何将 32 位 time_t 值转换为 64 位 time_t

> ID：11223075
> 
> 赞同：0
> 
> 时间：2012-06-27T09:23:35.800
> 
> 标签：c, windows, type-conversion, 32bit-64bit, time-t

我正在研究嵌入式系统。我们的平台是 32 位的，所以`time_t`大小是 32 位的。

现在我想将结构作为`char`数组发送到 Windows 7 计算机。我的结构的字段之一是`time_t`. 我不能改变结构。

所以我必须使用 32 位变量将时间值发送到 Windows 机器，当 char 数组到达时，我必须将 32 位 unsigned int 值转换为 64 位`time_t`。

我想我不能直接将 32 位整数转换为 64 位`time_t`，因为 32 位`time_t`从 1970 年开始，而 64 位从 1600 年开始。

那么有什么方法可以转换吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:38:58.863

请参阅：[时间、_time32、_time64 文档](http://msdn.microsoft.com/en-us/library/1f4c8f33%28v=vs.80%29.aspx)

两者都从 1970 年 1 月 1 日开始。在将其作为字符发送时，您只需要担心字节顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:27:49.863

精度（即单位）是否相同（秒）？如果是这样，那么您应该能够通过减去差异并截断为 32 位来转换较大的数字。

计算所需的秒数可能有点棘手......我尝试了[Wolfram Alpha](http://www.wolframalpha.com/input/?i=seconds%20from%201600-01-01%20to%201970-01-01)，但我不知道如何获得比“1.168 * 10 ^(10)秒”更精确的答案。

# hibernate - 提交整个事务后，Hibernate 是否刷新？

> ID：11223077
> 
> 赞同：0
> 
> 时间：2012-06-27T09:23:50.460
> 
> 标签：hibernate, flush, hibernate-entitymanager

我有两个应用程序第一个应用程序将在一个 while 循环中持久保存到数据库中，循环将在很长一段时间后结束（比如 10-15 分钟）。但是第二个应用程序需要第一个应用程序已经在数据库中持久化的数据，**第二个应用程序不能等待第一个应用程序完成。它将在第一个应用程序开始运行后立即启动。** 我在第一个应用程序中使用了 EntityManager.flush()，希望第一个应用程序能够立即将数据与数据库同步。这样在不同事务中的第二个应用程序就可以开始处理数据了。

这不起作用，flush（）方法的目的是什么？我该如何解决我的问题？请帮忙 ！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T09:29:51.057

`flush()`将所有挂起的更改写入数据库。它执行插入、更新和删除语句。它（默认情况下）在提交事务*之前自动调用。*

但仅仅因为您刷新并不意味着其他事务会看到更改。这取决于事务隔离级别，在大多数数据库中，它是 READ_COMMITTED。事务彼此隔离运行（[ACID](http://en.wikipedia.org/wiki/ACID)中的 I ）。因此，如果您的隔离级别为 READ_COMMITTED，则第二个应用程序中的事务将不会看到第一个应用程序的事务中所做的任何更改，直到该事务已提交。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T09:39:59.923

听起来好像您应该将第一个应用程序的工作拆分为单独的事务。更改通常仅在提交后对其他事务可见（正如 JB Nizet 所解释的那样。您可以更改它，但您不应该这样做）。

# php - Bit.Ly（简单集成）

> ID：11223078
> 
> 赞同：0
> 
> 时间：2012-06-27T09:23:59.017
> 
> 标签：php, forms, url-shortener

我想知道是否有人能告诉我在我的网站中实现 Bit.Ly URL 缩短服务的最简单方法（使用 PHP）。我有一个表单，需要使用 URL 缩短器，如果缩短的链接可以保存为变量？我试图遵循官方文档，但我觉得它很生硬。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:36:54.660

这是一个很好的实现： [http ://davidwalsh.name/bitly-php](http://davidwalsh.name/bitly-php)

# objective-c - 指向不同对象的方法选择器

> ID：11223081
> 
> 赞同：1
> 
> 时间：2012-06-27T09:24:02.810
> 
> 标签：objective-c, xcode, object, selector

以下方法在 viewController 中。

```
refreshTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(refreshLabels) userInfo:nil repeats:YES]; 
```

是否可以在选择器而不是在当前对象中选择 appDelegate （或另一个类）内的方法？

喜欢：

```
AppDelegate *ad = (AppDelegate *) [[UIApplication sharedApplication] delegate];
refreshTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector([ad refreshLabels]) userInfo:nil repeats:YES]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:56:52.510

尝试这个。

```
AppDelegate *ad = (AppDelegate *) [[UIApplication sharedApplication] delegate];
refreshTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:ad selector:@selector(refreshLabels) userInfo:nil repeats:YES]; 
```

在您的 AppDelegate 中，应该有一个声明的 refreshLabels 方法，

```
target
The object to which to send the message specified by aSelector when the timer fires. The target object is retained by the timer and released when the timer is invalidated.

aSelector
The message to send to target when the timer fires. The selector must correspond to a method that returns void and takes a single argument. The timer passes itself as the argument to this method. 
```

您问题中的代码将“self”设置为目标的参数，但您尝试调用的方法在 AppDelegate 中

# zend-framework - Zend：修改模块中的导航结构

> ID：11223090
> 
> 赞同：0
> 
> 时间：2012-06-27T09:24:38.390
> 
> 标签：zend-framework, module

这是我目前的情况：

我有一个 xml 来配置我的一般导航结构。在 application/Bootstrap.php 我添加了以下函数：

```
protected function _initViewHelpers()
{
    $this->bootstrap('layout');
    $oLayout = $this->getResource('layout');
    $oView = $oLayout->getView();
    $oNavContainerConfig = new Zend_Config_Xml(CONFIGPATH . 'navigation.xml', 'nav');
    $oNavigationContainer = new Zend_Navigation($oNavContainerConfig);

    $aCurrentRole = $this->_auth->getStorage()->read();
    @$oView->navigation($oNavigationContainer)->setAcl($this->_acl)->setRole($aCurrentRole->role);
} 
```

这是我当前的插件：

```
class Discount_Plugin_Module extends Zend_Controller_Plugin_Abstract
{
    public function routeShutdown(Zend_Controller_Request_Abstract $oRequest)
    {
        // init all module view controller stuff
    }
} 
```

我想在运行时修改我的导航。我想添加模块特定的导航项。

我不知道如何从模块中修改导航结构。

希望您能够帮助我。

最大限度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:31:28.230

为了完成同样的事情，我使用我创建的对象来构建菜单。您可以在此处找到我使用的代码：http: [//pastebin.com/FzChbVeV](http://pastebin.com/FzChbVeV)。我还使用助手来检查是否允许用户查看链接。如果您不想使用它，您可以删除第 102 到 109 行并编辑第 111 行。

之后，在我的模块的 bootstrap.php 中，我添加以下代码来添加菜单项：

```
 $menu = ZARD_Object_Module_Multimodmenu::getInstance();

    $menu->id = 'submenuid';
    $menu->label = 'Submenu';
    $menu->module = 'default';
    $menu->controller = 'index';
    $menu->action = 'index';
    $menu->addItem();

    $menu->id = 'amenuitem';
    $menu->label = 'Menu Item';
    $menu->module = 'modulename';
    $menu->controller = 'controllername';
    $menu->action = 'actionname';
    $menu->parent = 'submenuid';
    $menu->addItem(); 
```

之后，我在布局中加载菜单：

```
 $menu = ZARD_Object_Module_Multimodmenu::getInstance();
    echo $menu->getMenu(); 
```

# excel - 在Excel VBA中的列中的相似单元格值之间按升序对一系列行进行排序

> ID：11223093
> 
> 赞同：0
> 
> 时间：2012-06-27T09:24:41.190
> 
> 标签：excel, vba

因为我是编写宏的新手。我需要帮助编写一个宏，该宏对单元格值“TLA”之间的一系列行进行排序。这是一个例子：

```
Column A   
  TLA  
   23
    6
   32
  TLA
  TLA
    5
   21
   16
   40
  TLA 
```

我尝试修改从该论坛浏览的宏。但是，我无法选择行。任何指示或帮助都会对我有很大帮助。VB：

```
Sub Sort_column_TLA() 

    Dim r As Long 
    Application.ScreenUpdating = False 
    ActiveSheet.DisplayPageBreaks = False 
    r =Range("A"& ActiveSheet.Rows.Count).End(xlUp).Row 
    For r = r To 2 Step -1 

        Select Case Cells(r, 1) 
        Case "TLA" 
             'do nothing
        Case Else 
            Range(r & ":" & r ).Select 

             'Rows(r).Select
        End Select 
    Next r 
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:10:48.917

除了您实际上没有对值进行排序外，我认为您的代码没有任何问题。
就选择而言，如果您调试代码并逐步运行，您将看到该行确实被选中。

以下将对“TLA”之间的所有值进行升序排序

```
Function a()
    Dim r, r2 As Long

    r2 = 0

    Application.ScreenUpdating = False
    ActiveSheet.DisplayPageBreaks = False
    r = Range("A" & ActiveSheet.Rows.Count).End(xlUp).Row
    For r = r To 1 Step -1

        If (Cells(r, 1) = "TLA") Then
            If (r2 <> 0) Then
                If (r2 - r >= 2) Then
                    With Range(r + 1 & ":" & r2)
                        .Sort Key1:=Range("A" & r + 1), _
                                Order1:=xlAscending, _
                                Orientation:=xlTopToBottom
                    End With
                End If
            End If
        r2 = r - 1
        End If

    Next r
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:53:55.460

你的构造看起来很奇怪：

```
r =Range("A"& ActiveSheet.Rows.Count).End(xlUp).Row  
For r = r To 2 Step -1 
```

我认为如果你让计数器从上到下运行会更透明（具体原因是相反？）使用另一个计数器，例如。lCnt（只要）。希望对你有所帮助。

例如，使用不同的方式设置范围

```
set oRange = thisworkbook.sheets("<Name>").usedrange    'Declare oRange as excel.range
for each oRow in oRange.rows   
    lCnt = lCnt + 1
    select case oRow.cells(lcnt, 1)
        case "TLA" 
        oRow.select 
        'etc... 
    end select
next oRange 
```

# php - 是否有可能/合理地阅读一个 html 页面并使用 php 在某些点添加额外的元素？

> ID：11223094
> 
> 赞同：-1
> 
> 时间：2012-06-27T09:24:43.100
> 
> 标签：php, html

例如，我有一个非常标准的 html 页面：

```
<html>
    <head>
        <title>Test Page</title>
    </head>
    <body>
        <a class="add-container-element">
            This is Test Text
        </a>
    </body>
</html> 
```

我希望能够在容器元素中包装具有某些类的元素，即：

```
<div class="container" /> 
```

我一直被指向 php dom 操作，但是我对 php 不是很熟悉，如果我能举个例子说明它是如何完成的，那就太好了？

一般的想法是，对于没有启用 javascript 的用户，我基本上可以使用 javascript 做的事情。

非常感谢

-贾伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:34:14.697

嗯，有很多方法，但实际上，它比手动操作要耗时和复杂得多。看，你在这里遇到的主要问题是你没有在 class="" 周围包裹一个 div，这很容易 - 但你必须找到 class=""，然后找出里面的内容（对于例如；一个 ul)，然后找到该 ul 的结束标记 - 同时忽略可能在其中打开或关闭的任何其他 ul 标记。

如果您只是想在一个块中获取元素，您可以添加；

```
.add-container-element {
display: block; } 
```

但是，对于您的预期结果，这将是非常受打击和错过的。

您可以查看一些可能更容易的 DOM 操作，但这是一种罕见的情况，我认为手动浏览您的代码可能更省时。

# java - 访问器方法和 Java 反射

> ID：11223096
> 
> 赞同：1
> 
> 时间：2012-06-27T09:24:45.817
> 
> 标签：java, reflection, attributes, getter, accessor

这是一个关于Java如何在内部进行反射的问题。

我有一个抽象类说

```
SuperClass 
```

和两个来自 SuperClass 的 chlid 类，

`ChildClass1`和`ChildClass2`。

`SuperClass`定义了一个访问器方法`getValue()`，尽管它没有定义属性值。

`ChildClass1`并`ChildClass2`覆盖该方法`getValue()`并为该方法添加一个注释`@MyAnnotation`，`@MyAnnotation`保留在运行时（它是`OneToOne`注释）。

在我的程序中，我有一个实例`ChildClas1`和一个`ChildClass2`. 我使用反射从两个对象中获取所有方法。

正如预期的那样，我`getValue()`在结果数组中得到了两种方法，（一种用于 the `SuperClass`，一种用于`ChildClass`）。

对于已标记为访问器`ChildClass1`的`getValue()`方法的实例`@MyAnnotation`（methodAccessor 属性！= null），但对于`ChildClass2`标记为访问器的方法的实例没有注释（是`getValue()`父类的方法）。

我不明白为什么，最终我改变了声明方法的顺序`ChildClass2`（有更多的方法，而不仅仅是访问器），即我把所有的 getter 和 setter 都放在了 begginging 并且`ChildClass2`表现得像`ChildClass1`.

我的问题是，**Java 如何将方法限定为反射中的访问器**，并且声明方法的顺序是否会改变反射的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:39:34.793

> Java 如何将方法限定为反射中的访问器，

它不是 JavaBean 是反射库不知道的约定。如果您使用 Beans Introspector，这确实会根据参数的名称和数量对 getter 和 setter 做出假设。

> 并且进一步声明方法的顺序会改变反射的行为吗？

定义方法的顺序往往是检索它们的顺序，例如 getMethods() 但您不能依赖这种行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:39:32.333

Java 反射不会将访问器方法与其他方法区分开来——它们都只是方法。声明方法的顺序无关紧要。

# iphone - 文本字段重新输入单词

> ID：11223098
> 
> 赞同：0
> 
> 时间：2012-06-27T09:24:52.373
> 
> 标签：iphone, objective-c

下午好。我想知道是否有一种方法可以使文本字段能够“记住”用户以前写的内容，所以当用户写第一个字母时，会出现一个包含建议单词的列表！：） 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:31:45.843

可以在表格视图中显示值列表。你可以使用自动完成。

阅读这篇[文章。](http://www.radulucaciu.ro/iphone-autocomplete-class/5/)还有源代码。这将对您有所帮助。

示例图像

![图片](../Images/adfc4b49c4f8f67a2cd7b53e7bb0348e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:26:05.807

没那么容易，你必须做一些修改，例如你需要存储`NSMutalbeArray`所有插入的值，然后你必须在用户开始编辑时提供一个表格，`UITextField`这将随着用户写入而改变

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:31:57.960

当您的应用程序运行时，您需要记住/存储许多文本，以至于您必须记住的文本会变大。您可以将文本存储到本地数据库 (sqlite)，然后当用户在文本字段上写入时，进行搜索查询并返回数据。

除非您不想记住用户使用和退出/退出您的应用程序时输入的文本。

# objective-c - 如何实现基于属性值的相等？

> ID：11223101
> 
> 赞同：2
> 
> 时间：2012-06-27T09:24:57.250
> 
> 标签：objective-c, equality

我正在`-isEqual:`为我的自定义类实施。相等性基于属性值，即。如果所有属性都相等，则认为对象相等。与传统的类检查一起，代码如下所示：

```
- (BOOL) isEqual: (id) object
{
    return [object class] == [self class]
        && [[object someProperty] isEqual:someProperty]
        && [[object otherProperty] isEqual:otherProperty];
} 
```

但这对于`nil`属性值失败，即。`nil`具有存储值的类的两个对象`someProperty`被认为是不相等的，而我希望它们相等。因此，我得到了以下版本：

```
- (BOOL) isEqual: (id) object
{
    #define equals(a, b) ((a == b) || ([a isEqual:b]))
    return equals([object class], [self class])
        && equals([object someProperty], someProperty)
        && equals([object otherProperty], otherProperty);
} 
```

这似乎工作正常。这是解决平等的“标准”方式吗？对我来说似乎过于复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:37:50.633

`isEqual:`非常特定于对象。这是一个语义平等。您可以为每个类定义 isEqual 的含义。因此，没有标准的方法来做到这一点。

最简单的实现是`return self == object`，您的第二个实现非常通用且不错，但不一定适合每个类。例如，对于 a `Person`，比较电子邮件可能就足够了，或者如果您认为电子邮件可以被多个家庭成员使用，则比较电子邮件和名字。

# jquery - 混淆jQuery队列和出队

> ID：11223117
> 
> 赞同：0
> 
> 时间：2012-06-27T09:25:59.203
> 
> 标签：jquery, arrays, for-loop, queue

我有一个数组，我想使用 jquery queue 和 print 函数将它们打印出来：

```
var show = function (el) { //print function 
    console.log('el', el);
}

var arr = ["a", "b", "c", "d", "e"];
var que = $({});
for (var i in arr) {
    que.queue('custom', function (next) {
        show(arr[i]);
        next();
    })
}
que.dequeue('custom'); 
```

但是所有的打印信息都是`e`，为什么会这样？打印怎么能像数组顺序？

第二个问题是当我尝试改变`for`循环编写方式时，例如：

```
for (var i = 0; i < arr.length; i++) {
    //...
} 
```

所有打印信息将是`undefined`. 两种写法有区别吗？它总是一样的，不是吗？

这是演示：http: [//jsfiddle.net/hh54188/L8ExM/](http://jsfiddle.net/hh54188/L8ExM/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:37:13.517

这是一个范围界定问题。当您的函数被称为`i`内部函数中的变量等于 时`arr.length`，`arr[i]`也是`undefined`。您需要用匿名函数包装它：

```
var show = function (el) {
    console.log('el', el);
}

var arr = ["a", "b", "c", "d", "e"];
var que = $({});
for (var i = 0; i < arr.length; i++) {
    (function(i) {
        que.queue('custom', function (next) {
            show(arr[i]);
            next();
        });
    })(i);
}
que.dequeue('custom'); 
```

Also, when you use `for (var i in arr)` you get `e`, because the loop stops at the last element which is `4`. The first loop stops at `5` because the condition is checked **after** incrementation.

# c# - 显示文本内容

> ID：11223118
> 
> 赞同：3
> 
> 时间：2012-06-27T09:26:03.313
> 
> 标签：c#, wpf, text

我希望很简单。我有一篇想要在窗口中显示的文本。现在，与其在我的代码中心放置大量文本，我可以将其添加为资源并以某种方式将其读出到窗口中吗？

对于那些问为什么的人，这仅仅是因为它是一篇庞大的文章，并且卡在我的代码中间会非常难看。

**HB 更新**

我已经尝试了许多不同的方法，目前正在研究`GetManifestResourceStream`并使用嵌入式资源（txt 文件）并将其写入屏幕。尚未完成测试，但如果它有效，那将比复制和粘贴整个文本要好得多`txtbox1.Text = "...blah blah blah"`。

```
_textStreamReader = new    
StreamReader(Assembly.GetExecutingAssembly().GetManifestResourceStream("Problem.Explaination.txt"));
                        try
                        {
                            if (_textStreamReader.Peek() != -1)
                            {
                                txtBlock.Text = _textStreamReader.ReadLine();
                            }
                        }
                        catch
                        {
                            MessageBox.Show("Error writing text!");
                        } 
```

我的查询仍然存在，是否有更好的方法来实现这一点（假设这甚至是成功的）谢谢

**笔记**

在上面的示例中，我只想要一行文本。如果您正在调整它以从文件中读取多行，您可以像这样进行更改；

```
StreamReader _textStreamReader;
        _textStreamReader = new StreamReader(Assembly.GetExecutingAssembly().GetManifestResourceStream("Problem.Explaination.txt"));
        var fileContents = _textStreamReader.ReadToEnd();
        _textStreamReader.Close();

        String[] lines = fileContents.Split("\n"[0]);
        String[] lines2;
        Int16 count;
        foreach (string line in lines)
        {
        txtBlock.Text += line;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:31:09.213

您可以将该文本放在文本文件中，然后在代码中读出

[http://msdn.microsoft.com/en-us/library/db5x7c0d.aspx](http://msdn.microsoft.com/en-us/library/db5x7c0d.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:57:28.897

将文件添加为资源，并在您的代码中将其加载到字符串中。

```
 StringBuilder sb = new StringBuilder();
    using (var stream = this.GetType().Assembly.GetManifestResourceStream("MyNamespace.TextFile.txt"))
    using(var reader = new StreamReader(stream))
    {
        string line;
        while ((line = reader.ReadLine()) != null)
        {
            sb.AppendLine(line);
        }
    }
    ViewModel.Text = sb.ToString(); 
```

# c++ - 在类的析构函数中关闭类的线程成员是个好主意吗？

> ID：11223119
> 
> 赞同：21
> 
> 时间：2012-06-27T09:26:03.803
> 
> 标签：c++, multithreading, boost, destructor

当需要销毁该类的对象时，关闭由 C++ 类管理的 Boost 线程的最佳方法是什么？我有一个类，它在构造时创建并启动一个线程，并提供一个公共`Wake()`方法，该方法在需要做一些工作时唤醒线程。该`Wake()`方法使用 Boost mutex 和 Boost 条件变量来向线程发出信号；线程过程等待条件变量，然后完成工作并返回等待。

目前，我在类的析构函数中关闭了这个线程，使用布尔成员变量作为“运行”标志；我清除标志，然后在条件变量上调用 notify_one()。然后线程过程唤醒，注意到“运行”为假，然后返回。这是代码：

```
class Worker
{
public:
    Worker();
    ~Worker();
    void Wake();
private:
    Worker(Worker const& rhs);             // prevent copying
    Worker& operator=(Worker const& rhs);  // prevent assignment
    void ThreadProc();
    bool m_Running;
    boost::mutex               m_Mutex;
    boost::condition_variable  m_Condition;
    boost::scoped_ptr<boost::thread> m_pThread;
};

Worker::Worker()
    : m_Running(true)
    , m_Mutex()
    , m_Condition()
    , m_pThread()
{
    m_pThread.reset(new boost::thread(boost::bind(&Worker::ThreadProc, this)));
}

Worker::~Worker()
{
    m_Running = false;
    m_Condition.notify_one();
    m_pThread->join();
}

void Worker::Wake()
{
    boost::lock_guard<boost::mutex> lock(m_Mutex);
    m_Condition.notify_one();
}

void Worker::ThreadProc()
{
    for (;;)
    {
        boost::unique_lock<boost::mutex> lock(m_Mutex);
        m_Condition.wait(lock);
        if (! m_Running) break;
        // do some work here
    }
} 
```

像这样关闭类的析构函数中的线程是个好主意，还是我应该提供一个公共方法让用户在对象被销毁之前执行此操作，当有更多的错误处理和/或强行销毁线程的可能性时如果线程过程未能干净或及时返回？

在其析构函数中清理我的对象的混乱是很有吸引力的，因为它不需要用户对细节的关注（抽象，欢呼！）但在我看来，如果我能保证承担全部责任，我应该只在析构函数中做事成功而彻底地清理东西，并且类外的代码有一天可能需要知道线程是否被干净地关闭的可能性很小。

此外，我正在使用的机制——写入一个线程堆栈上的对象中的成员变量并在另一个线程中读取该变量——是否安全且理智？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-29T22:53:28.477

在类被销毁时释放类创建的资源是一个好主意，即使其中一个资源是线程。如果资源是通过用户调用显式创建的，例如`Worker::Start()`，那么还应该有一个显式的方式来释放它，例如`Worker::Stop()`. 如果用户不调用和/或为用户提供一个实现[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization "资源获取是初始化") -idiom`Worker::Stop()`的作用域辅助类，在其构造函数和析构函数中调用，则在析构函数中执行清理也是一个好主意。但是，如果资源分配是隐式完成的，例如在构造函数中，那么资源的释放也应该是隐式的，而析构函数是该职责的主要候选者。`Worker::Start()``Worker::Stop()``Worker`

* * *

### 破坏

让我们检查一下`Worker::~Worker()`。一般规则是[不要在析构函数中抛出异常](http://www.parashift.com/c++-faq/dtors-shouldnt-throw.html)。如果一个`Worker`对象在从另一个异常展开的堆栈上，并`Worker::~Worker()`抛出一个异常，那么`std::terminate()`将被调用，杀死应用程序。虽然`Worker::~Worker()`没有显式抛出异常，但重要的是要考虑到它正在调用的某些函数可能会抛出：

*   [`m_Condition.notify_one()`](http://www.boost.org/doc/libs/1_50_0/doc/html/thread/synchronization.html#thread.synchronization.condvar_ref.condition_variable.notify_one)不扔。
*   [`m_pThread->join()`](http://www.boost.org/doc/libs/1_50_0/doc/html/thread/thread_management.html#thread.thread_management.thread.join)可以扔`boost::thread_interrupted`。

如果`std::terminate()`是所需的行为，则不需要更改。但是，如果`std::terminate()`不需要，则捕获`boost::thread_interrupted`并抑制它。

```
Worker::~Worker()
{
  m_Running = false;
  m_Condition.notify_one();
  try
  {
    m_pThread->join();
  }
  catch ( const boost::thread_interrupted& )
  {
    /* suppressed */ 
  }
} 
```

* * *

### 并发

管理线程可能很棘手。定义函数的确切期望行为（`Worker::Wake()`如 ）以及了解促进线程和同步的类型的行为非常重要。例如，[`boost::condition_variable::notify_one()`](http://www.boost.org/doc/libs/1_50_0/doc/html/thread/synchronization.html#thread.synchronization.condvar_ref.condition_variable.notify_one)如果没有线程被阻塞在`boost::condition_variable::wait()`. 让我们检查一下可能的并发路径`Worker::Wake()`。

下面是对两种场景的并发性进行粗略的尝试：

*   操作顺序从上到下发生。（即顶部的操作发生在底部的操作之前。
*   并发操作写在同一行。
*   `<`并`>`用于突出显示一个线程何时唤醒或解除阻塞另一个线程。例如`A > B`表示线程`A`正在解除阻塞线程`B`。

**场景**：在被阻塞时`Worker::Wake()`调用。`Worker::ThreadProc()``m_Condition`

```
其他主题 | 工人::ThreadProc
------------------------------------------------+-------------- ----------------------------
                                   | 锁（m_Mutex）
                                   | `-- m_Mutex.lock()
                                   | m_Condition::wait(锁)
                                   | |-- m_Mutex.unlock()
                                   | |-- 等待通知
工人::Wake() | |
|-- 锁( m_Mutex ) | |
| `-- m_Mutex.lock() | |
|-- m_Condition::notify_one() > |-- 从通知中唤醒
`-- ~lock() | `-- m_Mutex.lock() // 块
    `-- m_Mutex.unlock() > `-- // 获取锁
                                   | // 在这里做一些工作
                                   | ~lock() // for 循环范围的结束
                                   | `-- m_Mutex.unlock()
```

**结果**：`Worker::Wake()`返回相当快，并`Worker::ThreadProc`运行。

* * *

**场景**：在未被阻塞时`Worker::Wake()`调用。`Worker::ThreadProc()``m_Condition`

```
其他主题 | 工人::ThreadProc
------------------------------------------------+-------------- ----------------------------
                                   | 锁（m_Mutex）
                                   | `-- m_Mutex.lock()
                                   | m_Condition::wait(锁)
                                   | |-- m_Mutex.unlock()
Worker::Wake() > |-- 唤醒
                                   | `-- m_Mutex.lock()
工人::Wake() | // 在这里做一些工作
|-- 锁( m_Mutex ) | // 还在工作...
| |-- m_Mutex.lock() // 块 | // 希望我们不要阻塞系统调用
| | | // 还有更多工作...
| | | ~lock() // for 循环范围的结束
| |-- // 仍然被阻塞 < `-- m_Mutex.unlock()
| `-- // 获取锁 | lock( m_Mutex ) // 下一次“for”迭代。
|-- m_Condition::notify_one() | `-- m_Mutex.lock() // 阻塞
`-- ~lock() | |-- // 仍然被阻塞
    `-- m_Mutex.unlock() > `-- // 获取锁
                                   | m_Condition::wait(锁)    
                                   | |-- m_Mutex.unlock()
                                   | `-- 等待通知
                                   | `--仍在等待...
```

**结果**:`Worker::Wake()`像工作一样被阻止`Worker::ThreadProc`，但是没有操作，因为它`m_Condition`在没有人等待它时发送了一个通知。

这并不是特别危险`Worker::Wake()`，但它可能会导致问题`Worker::~Worker()`。如果在工作时`Worker::~Worker()`运行，则在加入线程时可能会无限期地阻塞，因为线程可能不会在收到通知时等待，并且仅在等待完成后才检查。`Worker::ThreadProc``Worker::~Worker()``m_Condition``Worker::ThreadProc``m_Running``m_Condition`

* * *

### 努力寻找解决方案

在此示例中，让我们定义以下要求：

*   `Worker::~Worker()`不会导致`std::terminate()`被调用。
*   `Worker::Wake()`工作时不会阻塞`Worker::ThreadProc`。
*   如果在不工作`Worker::Wake()`的时候被调用`Worker::ThreadProc`，那么它会通知`Worker::ThreadProc`做工作。
*   如果在工作`Worker::Wake()`时被调用`Worker::ThreadProc`，那么它将通知`Worker::ThreadProc`执行另一次工作迭代。
*   多次调用`Worker::Wake()`while `Worker::ThreadProc`is doing work 将导致`Worker::ThreadProc`执行一次额外的工作迭代。

代码：

```
#include <boost/thread.hpp>

class Worker
{
public:
  Worker();
  ~Worker();
  void Wake();
private:
  Worker(Worker const& rhs);             // prevent copying
  Worker& operator=(Worker const& rhs);  // prevent assignment
  void ThreadProc();

  enum state { HAS_WORK, NO_WORK, SHUTDOWN };

  state                            m_State;
  boost::mutex                     m_Mutex;
  boost::condition_variable        m_Condition;
  boost::thread                    m_Thread;
};

Worker::Worker()
  : m_State(NO_WORK)
  , m_Mutex()
  , m_Condition()
  , m_Thread()
{
  m_Thread = boost::thread(&Worker::ThreadProc, this);
}

Worker::~Worker()
{
  // Create scope so that the mutex is only locked when changing state and
  // notifying the condition.  It would result in a deadlock if the lock was
  // still held by this function when trying to join the thread.
  {
    boost::lock_guard<boost::mutex> lock(m_Mutex);
    m_State = SHUTDOWN;
    m_Condition.notify_one();
  }
  try { m_Thread.join(); }
  catch ( const boost::thread_interrupted& ) { /* suppress */ };
}

void Worker::Wake()
{
  boost::lock_guard<boost::mutex> lock(m_Mutex);
  m_State = HAS_WORK;
  m_Condition.notify_one();
}

void Worker::ThreadProc()
{
  for (;;)
  {
    // Create scope to only lock the mutex when checking for the state.  Do
    // not continue to hold the mutex wile doing busy work.
    {
      boost::unique_lock<boost::mutex> lock(m_Mutex);
      // While there is no work (implies not shutting down), then wait on
      // the condition.
      while (NO_WORK == m_State)
      {
        m_Condition.wait(lock);
        // Will wake up from either Wake() or ~Worker() signaling the condition
        // variable.  At that point, m_State will either be HAS_WORK or
        // SHUTDOWN.
      }
      // On shutdown, break out of the for loop.
      if (SHUTDOWN == m_State) break;
      // Set state to indicate no work is queued.
      m_State = NO_WORK;
    }

    // do some work here
  }
} 
```

注意：作为个人喜好，我选择不在`boost::thread`堆上分配，因此我不需要通过`boost::scoped_ptr`. `boost::thread`有一个[默认构造函数](http://www.boost.org/doc/libs/1_50_0/doc/html/thread/thread_management.html#thread.thread_management.thread.default_constructor)将引用*Not-a-Thread*，并且它是[move-assignable](http://www.boost.org/doc/libs/1_50_0/doc/html/thread/thread_management.html#thread.thread_management.thread.move_assignment)。

# c# - 基于双击 jQGrid 中的一行重定向到另一个页面。（Asp.Net C#）

> ID：11223123
> 
> 赞同：0
> 
> 时间：2012-06-27T09:26:05.433
> 
> 标签：c#, asp.net, jqgrid, double-click, jqgrid-asp.net

在 a`jQGrid`中，当我双击一行时，我想打开另一个页面，其中显示有关所选行的更多数据。需要根据所选行构建查询并将其传递到该页面。My`jQGrid`是根据谁登录动态创建的。我是一名软件学生，我不知道该怎么做。我在网上搜索过，但一无所获。请你帮忙。如果您需要更多信息，请告诉我。

```
<trirand:JQGrid ID="JQGrid1" runat="server" Width="760px" onsearching="JQGrid1_Searching" >         
    <Columns>

    </Columns>

    <PagerSettings ScrollBarPaging="true" PageSize="100" NoRowsMessage="Scroll to bottom to retrieve new page" />
    <AppearanceSettings HighlightRowsOnHover="true" /> 
    <ToolBarSettings ShowAddButton="true" ShowSearchToolBar="true" ShowRefreshButton="true" />
    <AddDialogSettings ReloadAfterSubmit="true" Caption="Add a new row" SubmitText="Add the row" Resizable="false" />   

</trirand:JQGrid> 
```

功能：

```
public static DataTable GetAnimalsByClient(Client cli)
{
    DataTable dt = new DataTable();

    try
    {
        MySqlConnection connection = Database.Connect();
        string sql = string.Format("select a.animal_official_tag as AnimalOfficialTag, DATE_FORMAT(a.animal_date_of_birth,'%d/%m/%Y') AS DateOfBirth, a.animal_gender as AnimalGender, a.animal_breed as AnimalBreed, a.animal_jumbo as AnimalJumbo from animal a inner join herd_animal ha on a.animal_id = ha.animal_id join herd h on ha.herd_id = h.herd_id join client c on h.client_id = c.client_id where c.client_id = {0}", cli.ID);
        MySqlDataAdapter adapter = new MySqlDataAdapter(sql, connection);

        adapter.Fill(dt);
        adapter.Dispose();

        Database.Disconnect(connection);
    }
    catch (Exception exp)
    {
        StackFrame stackFrame = new StackFrame();
        MethodBase methodBase = stackFrame.GetMethod();
        Error.SaveError(methodBase.Name, exp.Message);
    }
    return dt;
}

public DataTable GetCurrentStock()
{
    try
    {
        DataTable dt = (DataTable)AnimalDao.GetAnimalsByClient(UserSession.GetClient());

        List<DataColumn> lstCol = new List<DataColumn>();
        foreach (DataColumn col in dt.Columns)
        {
            lstCol.Add(col);
        }

        for (int i = 0; i < dt.Columns.Count; i++)
        {
            JQGridColumn col = new JQGridColumn();
            col.DataField = lstCol[i].ColumnName;
            col.HeaderText = lstCol[i].ColumnName;
            col.Width = lstCol[i].ColumnName.Length;
            col.Visible = true;
            col.Editable = true;
            JQGrid1.Columns.Add(col);
        }

        return dt;
    }
    catch (Exception exp)
    {
        return null;
    }
}

protected void Page_Load(object sender, EventArgs e)
{
    if (!UserSession.LoggedIn())
    {
        Response.Redirect("Default.aspx");
    }

    RefreshGrid();
    JQGrid1.DataSource = GetCurrentStock();
    JQGrid1.DataBind();      
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:19:29.347

谢谢它确实帮助了我。我创建了下面的函数

```
<script type="text/javascript">
    function doubleClick(id) {
        window.location = '<%= ResolveUrl("http://localhost:9110/AgriNet%20Website/CowCard.aspx?a=") %>' + id;
    }

    function GetGrid() {
        var grid = $("#<%= JQGrid1.ClientID %>");return grid;
    }

</script> 
```

在动态创建 jQGrid 的地方，我将第一列分配为主键。

```
for (int i = 0; i < dt.Columns.Count; i++)
        {
            JQGridColumn col = new JQGridColumn();
            col.DataField = lstCol[i].ColumnName;
            col.HeaderText = lstCol[i].ColumnName;
            col.Width = lstCol[i].ColumnName.Length;
            col.Visible = true;
            col.Editable = true;
            if (i == 0)
            {
                col.PrimaryKey = true;
            }
            JQGrid1.Columns.Add(col);
        } 
```

在你双击一行后被定向到的页面上，我添加了这行代码。

```
Session["selectedID"] = Request.QueryString["a"].ToString(); 
```

它现在对我有用。当我双击 jQGrid 中的一行时，我被重定向到另一个页面，其中包含一条数据，我需要显示有关上一页中所选行的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:22:20.933

我只想创建一个 javascript 函数来将带有 RowID 的查询字符串发送到新页面。

您可以通过以下方式获取所选行的 RowID：

```
var grid = jQuery("#<%= JQgrid1.ClientID %>");
var rowKey = grid.getGridParam("selrow"); 
```

然后只需使用它打开一个新窗口，同时发送 rowID 以打开您想要的信息：

```
window.open("http://yourwebsite.com?RowID=" + rowKey); 
```

然后您需要做的就是将双击事件连接到 javascript 函数：

```
<trirand:JQGrid ID="JQGrid1" runat="server" Width="760px"
        onsearching="JQGrid1_Searching"
        ClientSideEvents-RowDoubleClick="[function name]"> 
```

希望这可以帮助。

# .net - 为什么有时会用十六进制字符填充进程映像名称？

> ID：11223125
> 
> 赞同：8
> 
> 时间：2012-06-27T09:26:10.583
> 
> 标签：.net, debugging, windows-7, clearcase, windows-7-x64

在我的 Windows-7 64 位 VM 机器上进行调试时，我注意到有时（可能 50%）我的 exe 名称被奇怪的十六进制字符填充：

**8000885a4fe0a0d0des.exe.11048**

其他时候很简单：

**解压程序**

这些是在 64 位系统上构建和运行的 32 位 .Net4 程序集。如任务管理器所示。

有谁知道为什么会这样？

编辑：这是由 Clearcase 在 Windows-7 上做奇怪的事情引起的。为什么它随机执行此操作或如何修复它我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:53:03.643

（我根据上述评论的要点发布了答案，因此问题不再显示为“未回答”。）

问题似乎是[ClearCase](http://en.wikipedia.org/wiki/IBM_Rational_ClearCase)和 Windows 7 任务管理器之间的交互混乱。大概不同的十六进制填充文件名代表来自 ClearCase 修订控制的文件的不同版本。通常，ClearCase 会向最终用户隐藏这些“具体细节”，但在这种情况下，任务管理器不会被愚弄（或至少，只是被愚弄）。

# php - 编辑后 JQuery 函数不会填充文本区域

> ID：11223128
> 
> 赞同：0
> 
> 时间：2012-06-27T09:26:15.903
> 
> 标签：php, jquery

我有一个文本区域的问题，它是由用户输入从数据库中动态填充的。

一切正常，但是一旦编辑了 textarea 的内容，它就不会在下一次函数调用后自行更新。

我已经偶然发现了这个[线程](https://stackoverflow.com/questions/4722914/jquery-append-not-appending-to-textarea-after-text-edited)，它告诉我应该使用 val() 方法。我做到了，但它没有用。我还尝试将函数设置为异步，以防止我的 clear() 函数在 php 填充 textarea 后立即执行，但也无法正常工作。

这是我的代码：

[HTML / JS](http://pastebin.com/efTp0Wgi)

[PHP](http://pastebin.com/BwMR8G2v)

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:16:06.943

明白了... .text() 而不是 .val() ...

```
 function copyToArea(){

                var content = $('p#resultpara').text() ;
                $('textarea#editarea').val(content) ;

            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:29:00.347

也许你应该试试

```
$('textarea#resultpara').val("") ; 
```

# javascript - Jquery 检查类名是否包含字符，例如“Y”或“N”

> ID：11223129
> 
> 赞同：0
> 
> 时间：2012-06-27T09:26:17.540
> 
> 标签：javascript, jquery

假设您有一个循环，并根据循环的结果将类名添加到 DIV，Y 或 N。基于 Y 或 N，您希望更改该类的 css 属性。请参见下面的代码：

```
function percentageCount() {

    $(".Parent").children().each(function(i, valOuter) { // Outer Loop
        alert("Outer loop");
        alert($(valOuter).html());
        var totalPercentage = 0;
        $(valOuter).children().find(':input').each(function(ii, valInner) { // Inner Loop        
            //                alert("Inner loop");

            totalPercentage += parseInt(this.value);
            //                alert("total percentage: " + totalPercentage);

            if (this.value == '') {
                totalPercentage += 0; // Assume empty string == 0
            }

            if (totalPercentage == 100) {
                alert("Percentage equals to 100");
                $(valOuter).removeClass("N");
                $(valOuter).addClass("Y");
            }

            else {
                alert("Percentage must equal to 100");
                $(valOuter).removeClass("Y");
                $(valOuter).addClass("N");

            }
        }); // Inner Loop
    });      // Outer Loop

    // Code to search for JQuery class

    }); 
```

这样做的好方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T09:28:39.253

```
$('.Y') // Will give you all the Y class elements
$('.N') // Will give you all the N class elements 
```

# android - java.lang.IllegalStateException：尝试重新打开一个已经关闭的对象：android.database.sqlite.SQLiteQuery

> ID：11223132
> 
> 赞同：5
> 
> 时间：2012-06-27T09:26:24.677
> 
> 标签：android, exception, android-contacts, android-cursor

大家好

我有一个错误，我不知道出了什么问题

这是我的日志错误

```
java.lang.IllegalStateException: attempt to re-open an already-closed object: android.database.sqlite.SQLiteQuery (mSql = SELECT display_name, _id FROM view_data_restricted data WHERE (1) AND (data1 =? AND mimetype='vnd.android.cursor.item/group_membership' AND display_name like '%r%') ORDER BY display_name) 
```

这是我的代码

```
public Cursor runQuery(CharSequence constraint) {
filter = nome.getText().toString();

try{
tempCurs = getContentResolver().query(ContactsContract.Groups.CONTENT_URI,
    new String[]{ContactsContract.Groups._ID,ContactsContract.Groups.TITLE},
    ContactsContract.Groups.ACCOUNT_NAME + " =? " + " AND " + ContactsContract.Groups.TITLE + " !=? ",
    new String[]{accountName,nomeGrupo},
    null
    );      
if(tempCurs.moveToFirst())
    do{
        cursorContactosGrupos = getContentResolver().query(ContactsContract.Data.CONTENT_URI,
                new String[]{ContactsContract.CommonDataKinds.GroupMembership.DISPLAY_NAME, ContactsContract.CommonDataKinds.GroupMembership._ID},
                ContactsContract.CommonDataKinds.GroupMembership.GROUP_ROW_ID + " =? AND " + Data.MIMETYPE + "='" + ContactsContract.CommonDataKinds.GroupMembership.CONTENT_ITEM_TYPE + "' AND " + ContactsContract.CommonDataKinds.GroupMembership.DISPLAY_NAME + " like '%" + filter + "%'" ,
                new String[]{String.valueOf(tempCurs.getLong(0))},
                ContactsContract.CommonDataKinds.GroupMembership.DISPLAY_NAME
                );
         //Log.w(SocioEdit.class.getName(), "->" + cursorContactosGrupos.getString(cursorContactosGrupos.getColumnIndex(ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME)));
            }while(tempCurs.moveToNext());
        }finally{
            if(cursorContactosGrupos != null && tempCurs != null && !cursorContactosGrupos.isClosed() && !tempCurs.isClosed()){
                cursorContactosGrupos.close();
                tempCurs.close();
            }   
        }
        return cursorContactosGrupos;
    }       
}); 
```

我做错了什么？如何解决？感谢帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T09:33:31.967

该错误可能是因为您正在返回一个`Cursor`已经在`finally`块中关闭的，并且您可能正在尝试使用返回的值。

将块更改`finally`为以下内容：

```
finally{
    if(tempCurs != null && !tempCurs.isClosed()){
        tempCurs.close();
    }   
} 
```

并记得关闭`Cursor`从调用方法返回的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-27T09:41:46.937

尝试**删除**以下代码行，然后再次检查，

```
finally{
            if(cursorContactosGrupos != null && tempCurs != null && !cursorContactosGrupos.isClosed() && !tempCurs.isClosed()){
                cursorContactosGrupos.close();
                tempCurs.close();
            } 
```

**改为**添加****

 **```
finally{
                if(cursorContactosGrupos != null && tempCurs != null && !cursorContactosGrupos.isClosed() && !tempCurs.isClosed()){

                    tempCurs.close();
                } 
```**

# linkedin - 有什么方法可以让 LinkedIn 返回 SSL 资源？

> ID：11223137
> 
> 赞同：0
> 
> 时间：2012-06-27T09:26:45.113
> 
> 标签：linkedin

Facebook 支持`return_ssl_resources`其 Graph API 的参数。LinkedIn 的 REST API 有类似的东西吗？这个想法是让它返回图片的 HTTPS URL，并在我的应用程序中避免浏览器的混合协议警告，这是仅限 SSL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T05:20:14.797

这是最近（2012 年 12 月）添加到 LinkedIn API 的。您现在可以附加“ `secure=true`”来获取个人资料图片的 SSL 版本。

```
GET http://api.linkedin.com/v1/people/~:(picture-url;secure=true) 
```

[在此处查看来源](https://developer.linkedin.com/comment/20464#comment-20464)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:37:00.800

事实证明，现在唯一的解决方案是在图像 URL中`http://media.linkedin.com/`替换为。[LinkedIn 自己的员工（ 1](https://developer.linkedin.com/thread/2268)和[2](https://developer.linkedin.com/forum/ssl-profile-picture-url-https)`https://www.linkedin.com/` ）一直在倡导这一点，直到他们在 API 中引入适当的支持。

# windows - 根据特定文本执行操作？一个windows脚本

> ID：11223141
> 
> 赞同：1
> 
> 时间：2012-06-27T09:26:52.480
> 
> 标签：windows, command-line, batch-file

考虑我有一个包含以下信息的文本文件：

```
TIMESTARTED=Thu Nov 17 09:43:47 GMT 2011
START-OF-DATA
TEXT TEXT TEXT 
```

TIMESTARTED 行位于文本文件中的特定行上，我需要在执行特定任务之前创建某种验证，以确保此处的日期是正确的。我基本上希望它查看计算机上的日期，看看它是否对应于 TIMESTARTED= 之后的日期，如果是，它应该运行一个 batscript，如果不是，它应该运行一个不同的 bat 脚本。

我不知道这是否可行，或者是否需要大量编程？如果仅通过在 Windows 中编写脚本就可以做到这一点，我会更喜欢。谁能引导我走向正确的道路？（请记住，我不是程序员，所以最好尽可能简单）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T01:20:57.787

这是 jeb 的解决方案，稍微修改为使用数组而不是映射字符串，仅用于比较目的（并促进在 Batch 中使用数组）：

```
setlocal EnableDelayedExpansion

for /F "tokens=2,3 delims= " %%A in ('findstr /B "TIMESTARTED" html_2.txt') do (
  set "monthName=%%A"
  set "day=%%B"
)
set "year=%date:~-4%"
for %%a in ("Jan=01" "Feb=02" "Mar=03" "Apr=04" "May=05" "Jun=06" "Jul=07" "Aug=08" "Sep=09" "Oct=10" "Nov=11" "Dec=12") do set %%~a
set "month=!%monthName%!"

set "timestarted=%day%.%month%.%year%"
if "%timestarted%" == "%DATE%" (
  echo The date is correct
) ELSE (
  echo wrong date %timestarted%
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:38:04.643

您可以先选择行，`findstr`然后将日期与当前日期进行比较`%date%`。

```
setlocal EnableDelayedExpansion

for /F "tokens=2,3 delims= " %%A in ('findstr /B "TIMESTARTED" html_2.txt') do (
  set "monthName=%%A"
  set "day=%%B"
)
set "year=%date:~-4%"
SET map=Jan-01;Feb-02;Mar-03;Apr-04;May-05;Jun-06;Jul-07;Aug-08;Sep-09;Oct-10;Nov-11;Dec-12
SET "v=!%map:*%monthName%-=!"
set "month=!v:~0,2!"

set "timestarted=%day%.%month%.%year%"
if "%timestarted%" == "%DATE%" (
  echo The date is correct
) ELSE (
  echo wrong date %timestarted%
) 
```

# grails - 如何在 STS 控制台窗口中停止缓存

> ID：11223144
> 
> 赞同：0
> 
> 时间：2012-06-27T09:27:22.087
> 
> 标签：grails, groovy, sts-springsourcetoolsuite

我将 STS 用于 grails。考虑以下代码

```
def x=5+6
println x 
```

现在，当我第一次刷新 gsp 页面时，它会给我结果`11`（如果我需要解释 gsp 和控制器关系，请告诉我）

如果我再次刷新页面，它不会给我一个新行，例如，

```
11
11 
```

相反，我只看到一条线持有`11`

当我清除控制台（右键单击控制台窗口，然后单击清除）并刷新页面时，我在控制台窗口中看不到任何输出。

我认为在 grails 或 STS 中有一个缓存系统启用，我多次看不到相同的输出。禁用此功能的方法是什么？或者如果它是别的东西，我每次刷新页面时如何才能看到输出。

# python - Python + Sqlite 3\. 如何构造查询？

> ID：11223147
> 
> 赞同：0
> 
> 时间：2012-06-27T09:27:35.880
> 
> 标签：python, sqlite

我正在尝试创建一个构建有效 sqlite 查询的 python 脚本。我想避免 SQL 注入，所以我不能使用`'%s'`. 我已经找到了如何执行查询，`cursor.execute('sql ?', (param))`但是我想要如何获取解析的`sql param`. 如果我必须先执行查询才能获得最后执行的查询，这不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:32:16.510

如果您不只是在进行参数替换，而是在完整构建 SQL，那么您必须在最后使用字符串操作来做到这一点。替换总是只代表`?`一个值。在内部，SQL 字符串被编译为 SQLite 自己的字节码（你可以用 找到它生成的内容`EXPLAIN thesql`），并且`?`只需将值存储在值堆栈中的正确位置即可完成替换；在结构上改变查询需要不同的字节码，所以仅仅替换一个值是不够的。

是的，这确实意味着您必须*非常小心*。如果您不想允许更新，请尝试以只读模式打开数据库连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:46:16.797

如果您试图将数据库的更改传输到另一台计算机，为什么必须将它们表示为 SQL 字符串？为什么不将查询字符串和参数腌制为一个元组，让另一台机器也使用 SQLite 参数化来查询其数据库？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:20:08.000

> 我想如何获取解析的“sql 参数”。

它都是开源的，因此您可以完全访问进行解析/清理的代码。为什么不只是阅读这段代码并了解它是如何工作的，以及是否有一些（可能未记录的）实现可以重用？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T09:30:32.243

使用 DB-API 的参数替换。将`?`作为占位符放在要使用值的任何位置，然后提供一个值元组作为游标`execute()`方法的第二个参数。

```
# Never do this -- insecure!
symbol = 'hello'
c.execute("SELECT * FROM stocks WHERE symbol = '%s'" % symbol)

# Do this instead
t = (symbol,)
c.execute('SELECT * FROM stocks WHERE symbol=?', t)
print c.fetchone() 
```

更多参考[在手册中](http://docs.python.org/library/sqlite3.html)。

# facebook - 为什么图片 url 需要有 request.scheme？

> ID：11223148
> 
> 赞同：3
> 
> 时间：2012-06-27T09:27:36.610
> 
> 标签：facebook, image, facebook-graph-api

我们的页面中出现此错误。我们可以做一个简单的检查并实现 request.scheme（我们正在实现）但是 w3.org 声明资源可以有相对的方案。og:image 不是类似于图像标签，应该支持图像标签的所有功能。

错误：

```
Object at URL 'http://www.slideshare.net/jessedee/100-bullet-points-from-cannes-lions-2012' of type 'slideshare:presentation' is invalid because the given value '//cdn.slidesharecdn.com/100bulletpointsfromcanneslions12-120626070638-phpapp02-thumbnail-2?1340766735' for property 'og:image:url' could not be parsed as type 'url'. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T09:30:25.940

Facebook`og:image`元标签的值不能是协议相关的，它必须是绝对的

# android - 图像叠加/与 css 重叠

> ID：11223150
> 
> 赞同：0
> 
> 时间：2012-06-27T09:27:42.477
> 
> 标签：android, css, image

我有一个工具栏图像（android），然后我想在这个工具栏图像上添加另一个小图像（问号图像）。然后当任何人点击那个小图片时，就会显示一个新页面。我知道如何显示新页面或其他页面。但不知道如何在工具栏图像上设置小图像。我对 CSS 很弱。

那么，有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T09:37:01.753

使用类似的东西

```
.smallImage{
  position: relative;
  left: -10px;
  bottom: 10px;
  display : hidden;
} 
```

然后在工具栏图像之后插入一个 <img />。将其显示设置为在需要时阻止并使用顶部和左侧值使其出现在正确的位置。这里的“相对”是指“相对于父母的位置”。

# javascript - 如何以编程方式访问 CSS 选择器？

> ID：11223151
> 
> 赞同：-4
> 
> 时间：2012-06-27T09:27:44.490
> 
> 标签：javascript, css

我正在使用我在网上找到的一个示例，以在 CSS3 中创建假定的 HTML5 工具提示。

```
.tooltip {
    border-bottom: 1px dotted #333;
    position: relative; cursor: pointer;
}  

.tooltip:hover:after {
    content: attr(title);
    position: absolute;
    white-space: nowrap;
    background: rgba(0, 0, 0, 0.85);
    padding: 3px 7px;
    color: #FFF;
    border-radius: 3px;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    margin-left: 7px;
    margin-top: -3px;
} 
```

由于应用程序故意不包含 HTML 或 CSS，我如何以编程方式创建它？

据我目前所知，我认为“after”是一个**CSS 选择器**，但我找不到更多关于如何使用 JavaScript 在 DOM 中创建、访问或修改它的信息。

请仅使用 JavaScript 解决方案，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T09:30:23.553

您可以使用在文档中添加任何 CSS 规则[`insertRule`](https://developer.mozilla.org/en/DOM/CSSStyleSheet/insertRule)。在 MDN 页面上，有一种方法显示了一种跨浏览器兼容的方法来插入任意 CSS 规则。

由于您的应用程序不包含任何 HTML，因此您必须`<style>`自己使用[`document.createElement`](https://developer.mozilla.org/en/DOM/document.createElement). [`document.styleSheets[0].cssRules`](https://developer.mozilla.org/en/DOM/CSSStyleSheet#Properties)当`null`样式表来自不同的来源时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:54:11.317

与事件绑定一样，如果您想在 JS 中执行此操作，则 需要将所有相关事件（例如, ）`:hover`挂钩到所有相关元素（ where ）。`onmouseover``onmouseout``/\btooltip\b/.test(className)`

您可以只将事件绑定到一个共同的父级（例如`document.body`，然后检查`event`对象以限定触发事件的元素，而不是将事件附加到未知数量的元素）。

至于`:after`，那是在被选元素之后插入的*伪*元素，因为`:hover`它只会在悬停时出现在文档中。所以你只需使用 DOM 方法来添加/删除元素（你不需要每次都创建它，你可以创建一次并保留对它的引用）。

而不是添加/删除元素，您可以只添加一次，并切换它的可见性（例如`element.style.display = visible ? '' : 'none';`）。

你做什么取决于你。

# iphone - 如何在两个 Marge 视频之间设置 CMTimeRange？

> ID：11223154
> 
> 赞同：2
> 
> 时间：2012-06-27T09:27:54.657
> 
> 标签：iphone, objective-c, ios5, avfoundation

我想播放 Marge 视频，但有一段时间先播放，然后第二个中断到第一个视频........

```
 CMTimeRange timeRange = CMTimeRangeMake(kCMTimeZero, CMTimeMakeWithSeconds(30, 10));

AVMutableVideoCompositionLayerInstruction *to = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:compositionCommentaryTrack];
   [to setOpacity:.5 atTime:kCMTimeZero];
 [to setTransform:CGAffineTransformScale(compositionCommentaryTrack.preferredTransform, .5, .5) atTime:kCMTimeZero];

 AVMutableVideoCompositionLayerInstruction *from = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:compositionVideoTrack];
[from setOpacity:.5 atTime:kCMTimeZero];
[from setTransform:CGAffineTransformScale(compositionVideoTrack.preferredTransform, .6, .6) atTime:kCMTimeZero];

// Video Compostion
  AVMutableVideoCompositionInstruction *transition = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
  transition.backgroundColor = [[UIColor clearColor] CGColor];
  transition.timeRange = timeRange;
   transition.layerInstructions = [NSArray arrayWithObjects:to, from, nil];
  videoComposition.instructions = [NSArray arrayWithObjects:transition,  nil];
  videoComposition.frameDuration = CMTimeMake(1, 30);
  videoComposition.renderSize = CGSizeMake(320, 360);
  videoComposition.renderScale = 1.0; 
```

# php - 导出为 CSV 时不会显示俄语字符

> ID：11223156
> 
> 赞同：2
> 
> 时间：2012-06-27T09:28:02.593
> 
> 标签：php, mysql, csv, character-encoding, export-to-csv

我有这段代码，用于在 CSV 中导出查询，问题是，如果我用 Excel 打开它，俄语字符将不会显示，但如果我用数字（Mac）打开它，它们会显示。

现在，我不明白这有什么问题。我添加了一些我在互联网上看到的行，但什么都没有。

```
<?php
/*
 * PHP code to export MySQL data to CSV
 * http://salman-w.blogspot.com/2009/07/export-mysql-data-to-csv-using-php.html
 *
 * Sends the result of a MySQL query as a CSV file for download
 */

 /*
  * establish database connection
  */

$conn = mysql_connect('', '', '') or die(mysql_error());
mysql_select_db('', $conn) or die(mysql_error($conn));
mysql_query("SET NAMES UTF8");

/*
 * execute sql query
 */

$query = sprintf('SELECT fields FROM table');
$result = mysql_query($query, $conn) or die(mysql_error($conn));

/*
 * send response headers to the browser
 * following headers instruct the browser to treat the data as a csv file called export.csv
 */

header('Content-Type: text/csv; charset=utf-8');
header('Content-Disposition: attachment;filename=hostess.csv');

/*
 * output header row (if atleast one row exists)
 */

$row = mysql_fetch_assoc($result);
if ($row) {
    echocsv(array_keys($row));
}

/*
 * output data rows (if atleast one row exists)
 */

while ($row) {
    echocsv($row);
    $row = mysql_fetch_assoc($result);
}

/*
 * echo the input array as csv data maintaining consistency with most CSV implementations
 * - uses double-quotes as enclosure when necessary
 * - uses double double-quotes to escape double-quotes 
 * - uses CRLF as a line separator
 */

function echocsv($fields)
{
    $separator = '';
    foreach ($fields as $field) {
        if (preg_match('/\\r|\\n|,|"/', $field)) {
            $field = '"' . str_replace('"', '""', $field) . '"';
        }
        echo $separator . $field;
        $separator = ',';
    }
    echo "\r\n";
}
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T17:25:01.307

该脚本不是为 UTF-8 编码数据创建的。它几乎按原样转储数据。生成的 CSV 文件将包含（可能）有效的 UTF-8 编码数据，但没有签名。在没有签名的情况下，一些软件会使用启发式来检测编码；其他的，比如 Excel，不会。

您必须告诉 excel 将文件视为 UTF-8 编码。为此，您需要在 Excel 中导入文件（数据 > 获取外部数据 > 从文本），而不是直接打开它（双击或使用文件 > 打开）。在文本导入向导中，选择适当的编码，Excel 应该会正确导入数据。请参阅下面的屏幕截图。

或者，您可以尝试[手动添加 UTF-8 签名](http://unicode.org/faq/utf_bom.html#bom4)。我自己没试过。

```
// ...
header('Content-Disposition: attachment;filename=hostess.csv');
echo "\xEF\xBB\xBF";
// ... 
```

![这是直接打开文件看到的](../Images/0bf61d3c94679b7fda3daf99f9d01e0b.png) ![如果您选择正确的编码，这就是您所看到的](../Images/88c5be04358aac83912fd423b1f725cb.png)

# c++ - 如何从同意流程 (UAC) 中获取流程路径或 pid

> ID：11223158
> 
> 赞同：2
> 
> 时间：2012-06-27T09:28:14.277
> 
> 标签：c++, windows, uac

当我启动需要 UAC 提升的应用程序时，我会看到 UAC 同意窗口，该窗口由进程“consent.exe”显示。

我正在尝试确定正在启动的应用程序的路径或进程 ID。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T02:35:27.400

你不能做这个。当 UAC**同意**对话框出现时，您的屏幕会变暗，您无法执行任何其他操作。

您别无选择，只能关闭同意对话框。

# vba - 将内部颜色复制到单元格

> ID：11223161
> 
> 赞同：1
> 
> 时间：2012-06-27T09:28:49.190
> 
> 标签：vba, excel

我的桌子上有一些彩色的单元格。我需要将它们的值复制到另一列。这是我的宏：

```
Sub exa()

Dim rng As Range
Dim row As Range
Dim cell As Range

Set rng = Range("B:AJ")

For Each row In rng.Rows
  For Each (cell).Interior.Color = RGB(138, 255, 132) in row.Cells

    Area.Offset(, 40).Value = Area.Value

  Next cell
Next row

End Sub 
```

我正在尝试寻找另一种方法来复制彩色单元格的值。现在我正在尝试做：

```
Sub test()
Dim rng As Range
Dim r As Integer
Set rng = ActiveSheet.Range("B2:I8")

For Each Row In rng.Rows
    For Each cell In Row.Cells
       If cell.Interior.Color = RGB(138, 255, 132) Then
      '  cell.Copy Destination:=Sheets("HMPB").Range("AU")
          Area.Offset(, 40).Value = Area.Value
       Next cell
Next Row

End Sub 
```

字符串有问题

```
(cell).Interior.Color = RGB(138, 255, 132) in row.Cells 
```

这就是我需要的：![http://postimage.org/image/4sjvimv35/](../Images/b4e7dbbf14aa36b25442fea54c45970e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:41:33.483

要获取有关颜色的代码：

```
For Each row In rng.Rows
    For Each cell In row.cells
        cell.Interior.Color = RGB(138, 255, 132)
    Next cell
Next row 
```

为了获得您需要的效果，方法可能会有所不同。但是，我不确定这是否是您问题的一部分。

# javascript - 保存并重新加载 directionService.route 响应

> ID：11223162
> 
> 赞同：0
> 
> 时间：2012-06-27T09:28:50.740
> 
> 标签：javascript, json, google-maps-api-3

我有一个将地址作为用户输入的应用程序。对于给定的输入，我在 < 2 KMS 距离内找到了地址列表（保存在数据库中）。我有数据库中地址的经纬度信息。每个地址都有一个起点和终点。这些起点和终点的经纬度也在数据库中。

现在我需要在谷歌地图中的这些起点和终点之间画线。我使用 Javascript 来做到这一点。对于任何给定的地址，我至少要画 50 条线。由于 OVER_QUERY_LIMIT，我想将此响应作为字符串保存在数据库中，然后将其转换回对象并显示在谷歌地图中。

请注意，我总是只有一个已知地址的列表。这些地址使用 From&To lat&long 保存在数据库中。所以我也可以编写一个 cronjob 来检索给定 fromlat&long & to-lat&long 的响应，就像这样。

```
var directionsDisplay<?php print $i; ?> = new google.maps.DirectionsRenderer(rendererOptions);  
directionsDisplay<?php print $i; ?>.setMap(map); 
var start<?php print $i; ?> = '<?php echo $address1; ?>'; 
var end<?php print $i; ?> = '<?php echo $address2; ?>'; 
var request<?php print $i; ?> = { 
    origin:start<?php print $i; ?>,  
    destination:end<?php print $i; ?>, 

    travelMode: google.maps.DirectionsTravelMode.DRIVING 

}; 

<?php if(isempty($routestr)) { ?> 
directionsService.route(request<?php print $i; ?>, function(response, status) { 
    if (status == google.maps.DirectionsStatus.OK) { 
        var routestr = JSON.stringify(response, null, 4); 
        //Saving routestr in database using ajax call
        directionsDisplay<?php print $i; ?>.setDirections(response);
    }
}
<?php } //end of $routestr check 
else { //convert $routestr into response and assign to setDirections method
  ?>
  //PHP $routestr is a JSON object automatically. so eval function will not work.
  //var response1 = eval('(' + <?php print $routestr; ?> + ')');

  var response1 = <?php echo $routestr; ?>; //This works.
  alert(response1.status); //displays OK. So I am assured that this is a JSON object now.
   directionsDisplay<?php print $i; ?>.setDirections(response1); //This still does not work. Map is blank

<?php    }//end of $routestr else check ?> 
```

我在其他部分面临问题。eval 方法不能正确转换对象。因此，当我调用 setDirections(response1) 时不起作用。

有人可以帮忙吗？我想将我的 JSON 字符串转换回 DirectionsResult 对象

我还检查了[https://developers.google.com/maps/documentation/javascript/reference#DirectionsResult](https://developers.google.com/maps/documentation/javascript/reference#DirectionsResult)。这里有一行“请注意，虽然这个结果是“类 JSON”，但它不是严格的 JSON，因为它间接包含 LatLng 对象。

我在 html 文件中测试了这段代码

```
var res = new google.maps.DirectionsResult(); //I receive js error This is not a class and cannot be instantiated. Don't understand how they send back this as response in route method call.
res1.status = "OK"; //Becoz of above issue, this will not work
alert(res1.status); //Becoz of above issue, this will not work 
```

但是这个警告信息永远不会被执行。什么都没有显示。不知道为什么。

伙计们不要尝试这个。这是行不通的。

目前，我已经更改了我的代码并实现了超时。我在某处读到，我们每秒最多可以向方向服务发出 5 个请求。如果我们在一秒钟内超过 5 个请求，将返回 OVER_QUERY_LIMIT。

实施超时减慢了最终响应。但似乎没有别的办法。不确定将此服务作为业务 api 是否可以解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:19:07.010

我也有这个问题。但在我的情况下，我需要将那条路线画回来并允许用户拖动路线（与我们发出路线请求时存在的相同属性）并更新 BD 中的 lat lng。如果您只需要在已有的这两个点之间画线，您可以请求一条新路线。如果您有 Over_query_limit 问题，您可以保存 response.routes[0].overview_path 中的 LatLng，并使用将 LatLng 解析为 Path 的简单折线将其绘制回来。当然，这不会完全是一个新的路由请求。

# http - 来自脚本的格式错误的标头。错误标头=HTTP/1.1 302 找到

> ID：11223166
> 
> 赞同：6
> 
> 时间：2012-06-27T09:29:05.173
> 
> 标签：http, cgi

我有一个作为 CGI 脚本的 C++ 程序，我目前正在使用 Cgicc 为我做一些解析和格式化（尽管它可能会在某个时候被替换）。在构建我的响应时，我使用`cgicc::HttpResponseHeader`，这将创建我类似的东西

```
HTTP/1.1 302 Found
Location: www.bla.com 
```

这对我来说看起来很标准。然而，网络服务器对此感到窒息，给了我一个

```
<...> malformed header from script. Bad header=HTTP/1.1 302 Found: script.cgi 
```

我发现了如何解决这个问题：

1.  删除`HTTP/...`线
2.  改为添加一行`Status: 302 Found`

事实上，这正是`cgicc::HttpRedirectHeader`它的作用。我现在有两个问题：

1.  这条线`HTTP/1.1 302 Found`不标准吗？
2.  如果不是，为什么`cgicc::HttpResponseHeader`要这样做？如果是，为什么我的网络服务器会卡住它？

注意我不是在寻找解决这个问题的方法，我知道该怎么做。我只是想了解发生了什么。

干杯奥莱

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T09:37:35.627

该`HTTP`行是标准 HTTP，但不是标准 CGI。

在 CGI 下，脚本使用`Status`标头将状态传回 Web 服务器，Web 服务器`HTTP`从该状态代码构造响应行。

为什么`cgicc`要构建`HTTP`我不知道的行-您是否可能不应该在该上下文中使用该特定类？也许该类仅用于`nph`脚本？ [该文档](http://www.gnu.org/software/cgicc/doc/lib_overview.html)确实暗示了-在描述了一组标准响应类之后，它说：

*cgicc::HTTPResponseHeader 是一个更强大的通用 HTTP 标头类，用于构建完整的 HTTP 响应。*

这意味着在普通的 CGI 脚本中使用它是不寻常的。

# search - ack 在 Smarty TPL 模板文件中搜索内容

> ID：11223167
> 
> 赞同：1
> 
> 时间：2012-06-27T09:29:06.953
> 
> 标签：search, smarty, case-insensitive, ack

是否可以用于`ack`搜索 Smarty 模板文件 (.tpl) 中的内容？

目前我只能在这些模板的缓存版本中搜索，它们本身就是 PHP 文件。

如果我在下面进行不区分大小写的`ack`搜索，则会返回以下内容：

```
[crmpicco@dev dev_crmpicco]$ ack -i select\ the\ course
cache/templates/gb/%%9B^9B3^9B37B147%%course.tpl.php
48:                             <p><label>Select the course:</label></p>
64:                             <p><label>Select the course:</label></p>
83:                             <p><label>Select the course:</label></p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:00:38.293

听起来您要问的是“如何让 ack 1.x 将 .tpl 识别为有效的文件类型？”

您想要的是放在`--type-set=smarty=.tpl`命令行或 ACK_OPTIONS 环境变量或 .ackrc 文件中。然后你可以说“ack --smarty foo”，它只会搜索 smarty 文件。

您可能还想使用`--ignore-dir=cache`so ack 不在您的缓存目录中搜索。

区分大小写与这里的问题无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:38:24.207

你的问题不清楚...

如果你想找到模板的文件名，它在渲染后填充了一些内容，这里是它（加粗）：

> 缓存/模板/gb/%%9B^9B3^9B37B147%% **course.tpl** .php

# javascript - ExtJS 4.1 GridPanel 错位列

> ID：11223169
> 
> 赞同：0
> 
> 时间：2012-06-27T09:29:15.293
> 
> 标签：javascript, extjs4.1

我有一个 GridPanel，但是，如您所见，第一列（即`locked`）没有像其他列一样对齐。

这是一个错误，还是我做错了什么？

![在此处输入图像描述](../Images/08f0bb7631542c47c7bda421709602c9.png)

**编辑：**以下是有关列的一些片段：

```
 initComponent: function(){
     this.renderTo = this.divId;
     this.status = "normal";
     Ext.Array.insert(this.columns,0,this.cols);
     this.columns = this.cols;
         this.callParent(); 
    } 
```

`cols`对象看起来像这样：

```
for(var i in params){
                if(i != config.staticColumn)
                cols.push({header: headers[i], dataIndex: i});
                else{
                    cols.push({header: headers[i], dataIndex: i, locked: true});
                }
            } 
```

这个空间实际上是：

```
<div id="gridview-1323-spacer" style="height: 17px"></div> 
```

我不知道这意味着什么或为什么首先创建它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-13T11:52:46.557

这是 ExtJS 的一个问题（和其他几个一样）。我已经在他们的论坛上寻求支持，但没有提供足够快的答案来有用（我最后一次检查 - 大约一年前仍然没有答案）。

与此同时，我已经停止使用这个框架，也没有检查过其他修复。

# iphone - 像默认 iPhone 相册一样的连续图像过渡

> ID：11223175
> 
> 赞同：0
> 
> 时间：2012-06-27T09:29:52.260
> 
> 标签：iphone, ios5, uigesturerecognizer, swipe

我正在从我的自定义 UIImagePicker 相机拍照并将图像保存在应用程序文档目录中。

现在，当用户在我的图像上滑动时显示图像时，他应该会看到下一张/上一张图像。到目前为止，我已经保持过渡离散（图像不会随手指移动；它会立即改变）。但我希望过渡像默认 iPhone 专辑中的那样平滑（平滑且与手指一起）。

你能告诉如何实现这一目标吗？提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:35:11.023

如果你只想滚动图像而不是你可以使用分页技术：试试这个链接：

[http://eureka.ykyuen.info/2010/05/22/iphone-uiscrollview-with-paging-example/](http://eureka.ykyuen.info/2010/05/22/iphone-uiscrollview-with-paging-example/)

# javascript - javascript：如何按年龄对员工对象数组进行排序

> ID：11223179
> 
> 赞同：0
> 
> 时间：2012-06-27T09:30:13.630
> 
> 标签：javascript, arrays, sorting

我正在尝试按年龄对员工对象数组进行排序，我得到以下输出：

```
[object Object],[object Object],[object Object],[object Object] 
```

但是，当我将员工数组替换为以下数字数组时，代码可以正常工作： var points=[2,10,7,8]

有人可以告诉我我要去哪里错了吗？谢谢你。

以下是我的代码：

```
<script type="text/javascript">

function sortFunc(){

var employees=[]
 employees[0]={name:"George", age:32, retiredate:"March 12, 2014"}
 employees[1]={name:"Edward", age:17, retiredate:"June 2, 2023"}
 employees[2]={name:"Christine", age:58, retiredate:"December 20, 2036"}
 employees[3]={name:"Sarah", age:62, retiredate:"April 30, 2020"}

 employees.sort(function(a, b){
  return a.age-b.age
 // return a-b;
 })
 document.getElementById("disp").innerHTML=employees;

}

</script>
</head>
<body>
<div id="disp">Click the button below to sort.</div>
<button onclick="sortFunc()">Sort Now</button>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:40:00.383

排序工作正常。您输出它的方式不正确。

尝试使用循环而不是 innerHTML 将其添加到页面。

```
var out="";
for(var i=0;i<employees.length;i++){
  out+="<p>"+employees[i]['age']+", "+employees[i]['name']+"</p>\n";
}

document.getElementById("disp").innerHTML=out; 
```

您也可以这样定义对象：

```
var employees=[
  {name:"George", age:32, retiredate:"March 12, 2014"},
  {name:"Edward", age:17, retiredate:"June 2, 2023"},
  {name:"Christine", age:58, retiredate:"December 20, 2036"},
  {name:"Sarah", age:62, retiredate:"April 30, 2020"}
] 
```

干杯

G。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:33:56.767

您的问题不在于排序，这是因为员工是一个对象数组，因此，无论是否排序，如果您将其转换为字符串表示形式以便将其添加到您将要获得的文档中

```
[object Object],[object Object],[object Object],[object Object] 
```

要显示您的数据，您需要在将其转换为文本的方式上更加结构化。例如：

```
var html = "";
for(var i = 0; i < employees.length; i++) {
   var employee = employees[i];
   html = html + employee.name + " " + employee.age + "<br/>";
}
document.getElementById("disp").innerHTML=employees; 
```

或者您可以考虑使用众多 javascript 模板库之一，这些模板库可以轻松地将复杂的 javascript 结构转换为文本/html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:35:54.780

您的排序功能确实有效。要查看输出，请尝试以下操作：

```
document.getElementById("disp").innerHTML='';
for(i=0; i<employees.length; i++) {
   document.getElementById("disp").innerHTML+=employees[i].age+'<br>';
} 
```

代替

```
document.getElementById("disp").innerHTML=employees; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T09:39:44.000

问题是`document.getElementById("disp").innerHTML=employees;`- 您在 HTML 中填充员工数组，而无需手动将其转换为有效的 HTML，因此您获得了 JavaScript 的默认文本表示形式，恰好是`[object Object],[object Object],[object Object],[object Object]`.

试试这个：

```
function prepForHTML(emp) {
  var html='';
  for (var i=0;i<emp.length;i++) {
    for (var j in emp[i]) html+=j+"="+emp[i][j]+", ";
  }
  html+="<br>";
  return html;
} 
```

和

```
document.getElementById("disp").innerHTML=prepForHTML(employees); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T09:45:39.190

您需要覆盖`toString()`方法，默认会显示您`[object Object]`。

***[例子：](http://jsfiddle.net/ESNAX/)***

```
function Employee(name, age, retiredate) {
  this.name = name;
  this.age = age;
  this.retiredate = retiredate;
}

Employee.prototype.toString = function() {
  return "Name:"+this.name+" Age:"+this.age+" Retiredate:"+this.retiredate;
};

var employees=[];
employees.push(new Employee("George", 32, "March 12, 2014"));
employees.push(new Employee("Edward", 17, "June 2, 2023"));
employees.push(new Employee("Christine", 58, "December 20, 2036"));
employees.push(new Employee("Sarah", 62, "April 30, 2020"));

employees.sort(function(a, b){
  return a.age-b.age;
});

document.getElementById("disp").innerHTML=employees; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T09:34:11.630

你的方法是正确的。

但是，您的 JavaScript 缺少所有分号。另外，您应该使用`push()`而不是直接分配。

```
var employees = [];

employees.push( {name:"George", age:32, retiredate:"March 12, 2014"} );
employees.push( {name:"Edward", age:17, retiredate:"June 2, 2023"} );
employees.push( {name:"Christine", age:58, retiredate:"December 20, 2036"} );
employees.push( {name:"Sarah", age:62, retiredate:"April 30, 2020"} );

employees.sort(function(a, b){
  return a.age - b.age;
}); 
```

要输出可读的内容，首先将数据结构转换为字符串：

```
document.getElementById("disp").innerHTML = JSON.stringify(employees); 
```

# asp.net - 过期标头和性能

> ID：11223192
> 
> 赞同：0
> 
> 时间：2012-06-27T09:30:37.180
> 
> 标签：asp.net, performance, http, iis

好的，我在我们的开发服务器上使用 IIS6 中的过期标头，我真的不明白！

因此，如果我不向文件添加过期标头，则在使用 firebug 查看时会收到以下请求/响应：

```
Accept  */*
Accept-Encoding gzip, deflate
Accept-Language en-gb,en;q=0.5
Cache-Control   no-cache
Connection  keep-alive
Cookie  __utma=222382046.267771103.1330592028.1337002926.1340787333.122; __utmz=222382046.1330592028.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utma=76038230.629470783.1340728034.1340728034.1340786921.2; __utmz=76038230.1340728034.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); timeOutCookie=Wed%20Jun%2027%202012%2011%3A17%3A22%20GMT+0100%20%28GMT%20Daylight%20Time%29; __utmb=76038230.26.10.1340786921; __utmb=222382046.5.10.1340787333; ASP.NET_SessionId=yhib5kyxf1m5azuhoogrstt5; __utmc=76038230; Travel2=ECC62DC4F9C36A41F3BCF0C54F96D877FEA32D4867DB1A3A97D0C6A3BE79EE98517B9B1A4E24289C863D86A2A4A846EA1FF4BF3822E8B6CBF872E25DD1ADF306F724EE1500AA71E28CFCD02476748163929B73856C505E50D185C05E6322488F
Host    site
Pragma  no-cache
Referer http://site/Agents/Flights/FlightSearch.aspx? 
```

回复：

```
Accept-Ranges   bytes
Content-Length  17864
Content-Type    application/x-javascript
Date    Wed, 27 Jun 2012 09:21:07 GMT
Etag    "0de7d7f192dcd1:a07d"
Last-Modified   Tue, 08 May 2012 12:53:00 GMT
Server  Microsoft-IIS/6.0
X-Powered-By    ASP.NET 
```

现在，如果我现在按 f5，系统会从客户端缓存中检索文件，太棒了！

现在，如果我添加 expires 标头并按 ctrl f5 我会得到一个稍微不同的请求/响应：

```
Accept  */*
Accept-Encoding gzip, deflate
Accept-Language en-gb,en;q=0.5
Cache-Control   no-cache
Connection  keep-alive
Cookie  __utma=222382046.267771103.1330592028.1337002926.1340787333.122; __utmz=222382046.1330592028.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utma=76038230.629470783.1340728034.1340728034.1340786921.2; __utmz=76038230.1340728034.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); timeOutCookie=Wed%20Jun%2027%202012%2011%3A21%3A11%20GMT+0100%20%28GMT%20Daylight%20Time%29; __utmb=76038230.27.10.1340786921; __utmb=222382046.5.10.1340787333; ASP.NET_SessionId=yhib5kyxf1m5azuhoogrstt5; __utmc=76038230; Travel2=ECC62DC4F9C36A41F3BCF0C54F96D877FEA32D4867DB1A3A97D0C6A3BE79EE98517B9B1A4E24289C863D86A2A4A846EA1FF4BF3822E8B6CBF872E25DD1ADF306F724EE1500AA71E28CFCD02476748163929B73856C505E50D185C05E6322488F
Host    site
Pragma  no-cache
Referer http://site/Agents/Flights/FlightSearch.aspx?
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0.1 
```

回复：

```
Accept-Ranges   bytes
Cache-Control   max-age=86400
Content-Length  17864
Content-Type    application/x-javascript
Date    Wed, 27 Jun 2012 09:24:41 GMT
Etag    "0de7d7f192dcd1:a082"
Last-Modified   Tue, 08 May 2012 12:53:00 GMT
Server  Microsoft-IIS/6.0
X-Powered-By    ASP.NET 
```

太棒了，我现在在缓存控件中获得了最大年龄。现在让我感到困惑的是，据我所知，现在网站在下载方面的表现有实际差异。如果我按 f5 它会从缓存中获取它，如果我按 control f5 它会从带有 HTTP 200 的服务器中获取它。

那么这如何提高性能呢？您如何获得 HTTP 304 而不是 http 200？我只是不明白这实际上是什么档案？

任何帮助都会很好谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:26:58.207

当您设置`Expires`或`max-age`显式设置时，您是在告诉客户端在这么长的时间内缓存响应是安全的。客户端会很高兴地从缓存中获取它，它*不会*触及你的服务器，不会出现 304。除非你按 Ctrl+F5，这会强制浏览器重新执行完整请求，从而导致 200。

现在，如果您不设置`Expires`nor怎么办`max-age`？这只是意味着客户端将启发式[*地自行*](https://www.rfc-editor.org/rfc/rfc2616#section-13.2.2)[选择到期时间。](https://www.rfc-editor.org/rfc/rfc2616#section-13.2.2)*您的响应仍然被缓存，只有浏览器必须猜测多长时间。*

 *因此，`Expires`/`max-age`在两种情况下很有用。

*   如果你想*推荐*缓存一段特定的时间——比浏览器猜测的要长。这通常使用版本化的静态内容来完成，这些内容永远不会改变，因此到期时间设置为以年为单位。
*   如果你想*防止*缓存，在这种情况下你设置`Cache-Control: no-cache`和`Expires`过去（某些版本的IE会忽略`no-cache`）。

有条件的请求，304 和所有这些，只有在内容*已经过期*后才能播放。要重新验证它，客户端可能会执行条件`GET`，这取决于您的服务器设置，可能会或可能不会导致 304。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:27:07.677

性能改进来自更少的 HTTP 请求。当浏览器正在解析一个页面并看到它必须请求一个 CSS 文件时，如果它已经在它的缓存中获得了`max-age=31536000`它的副本，并且它知道它的缓存副本是 1 年有效并且不必发出 HTTP 请求以获取文件。

更少的往返服务器应该会导致更快的加载页面，并为用户提供更好的体验。*

# php - 尝试安装 ZendDeveloperTools 模块时缺少 Zend\Module

> ID：11223194
> 
> 赞同：0
> 
> 时间：2012-06-27T09:30:39.493
> 
> 标签：php, module, zend-framework2

我正在尝试[`ZF2`安装](http://modules.zendframework.com/)要求[`ZendDeveloperTools`](https://github.com/zendframework/ZendDeveloperTools)与`ZF2 beta4`. 我已将模块放在我的`Module`目录中，并将其添加`modules`到`config/application.config.php`. 当我加载我的应用程序时，我收到以下错误：

> 致命错误：在第 29 行的 /.../module/ZendDeveloperTools/Module.php 中找不到接口“Zend\Module\Consumer\AutoloaderProvider”

查看`Module.php`，这是模块尝试使用的库列表：

```
use Zend\Module\Manager,
    Zend\Module\Consumer\AutoloaderProvider,
    Zend\EventManager\StaticEventManager; 
```

当我查看已安装的最新版本的[`ZF2`库](https://github.com/zendframework/zf2/tree/master/library/Zend)时，我可以看到整个`Zend\Module`路径都丢失了（`Zend\EventManager`是否存在）。

此外，我可以看到该[`ZendDeveloperTools`](https://github.com/zendframework/ZendDeveloperTools)模块在 4 个月前最后一次更新，而[`ZF2`在大约 1 个月前发布](http://framework.zend.com/zf2/blog/entry/Zend-Framework-2-0-0beta4-Released)。

**我可以`ZendDeveloperTools`完全使用该模块（如果可以，我需要调整什么），还是需要等待与`ZF2`beta 4 匹配的模块的重构？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T18:04:15.610

我是最后一个在 ZendDeveloperTools 上工作的人。Zend Framework 2 仍处于测试阶段（我们将在下周发布 beta5，之后 ZF2 将进入 RC）。ZendDeveloperTools 自从 beta1，*也许*是beta2 以来，一直没有更新。那时，它唯一做的就是使用 microtime() 进行非常粗略和基本的执行时间分析，并且它有一个方法可以在标记之前预先添加一些输出（执行时间），并在响应发送到浏览器之前立即. 这实际上只是我们真正想要的概念的证明。

要回答你的问题，这个模块已经非常过时了，根本无法与最新的 beta4 版本一起使用（也不适用于 Github 上的当前 master 分支）。太多的改变，包括改变的命名空间（Zend\Module 不是 Zend\ModuleManager）和整个 MVC 堆栈被重构。该模块只需要进行重大更新。幸运的是，至少有一个人在[这里](https://github.com/coss/ZendDeveloperTools/tree/redux/sf-profiler-alike)开始了一些更新，我的一位开发人员以及我自己将与他一起进行更新，以尝试让 ZendDeveloper 工具正常工作并完成我们的设想。我还将联系 ZF1 的[ZFDebug](https://github.com/jokkedk/ZFDebug)项目背后的开发人员，看看他是否有兴趣提供帮助。

这个想法是这样的：

默认情况下，ZendDeveloperTools 应该为非 ajax HTTP 请求（可能只有带有标签的请求）提供一个漂亮的浮动工具栏。这将类似于[Symfony2 的 web 调试工具栏](http://symfony.com/blog/towards-symfony-2-1-the-new-web-debug-toolbar)或 ZF1 的[ZFDebug](https://github.com/jokkedk/ZFDebug)项目。

它将在设计时考虑到 ZF2 模块，因此除了我们在栏中提供的任何默认调试工具外，第三方模块还可以提供自己的“插件”/数据提供者，以在工具栏上显示为附加按钮/菜单. 例如，我的一位开发人员已经开始使用[分析器模块](https://github.com/bjyoungblood/BjyProfiler)（目前提供 DB 分析，但也允许设置任意计时器），我们希望最终能够为 ZendDeveleperTools 工具栏提供数据。

* * *

2012 年 7 月 6 日更新：我已经更新了 ZendDeveloperTools 的最新大师，以及[@coss](https://github.com/coss)在 GitHub 上所做的出色工作。它现在应该可以与几分钟前发布的 beta5 一起使用。:) 它看起来也不错！

# android - aDrawable.SetBounds(...) 不起作用

> ID：11223195
> 
> 赞同：0
> 
> 时间：2012-06-27T09:30:49.720
> 
> 标签：android, overlay, drawable, osmdroid, setbounds

我无法成功在我的地图上放置一个自定义的居中叠加项目。它总是出现在底部和中间的中心。这是我的代码：

------------我的叠加项目类-------------

```
public class EditionThumbOverlayItem extends OverlayItem {

    public EditionThumbOverlayItem(GeoPoint aGeoPoint, Resources resources) {
        super("", "", aGeoPoint);
        Drawable pinThumbDrawable = resources.getDrawable(R.drawable.pin_thumb);
        pinThumbDrawable.setBounds(pinThumbDrawable.getIntrinsicWidth() * (-2 / 5),
                pinThumbDrawable.getIntrinsicHeight() * (-2 / 5), pinThumbDrawable.getIntrinsicWidth() * 3 / 5,
                pinThumbDrawable.getIntrinsicHeight() * 3 / 5);
        setMarker(pinThumbDrawable);
    }

} 
```

-------------我的逐项叠加类-----------------

```
public class PinThumbOverlay extends ItemizedOverlay<OverlayItem> {
    // Only one item can be set on this overlay
    private OverlayItem mEditionThumb;

    public PinThumbOverlay(Drawable pDefaultMarker, ResourceProxy pResourceProxy) {
        super(pDefaultMarker, pResourceProxy);
    }

    @Override
    public boolean onSnapToItem(int arg0, int arg1, Point arg2, IMapView arg3) {
        return false;
    }

    @Override
    protected OverlayItem createItem(int arg0) {
        return mEditionThumb;
    }

    @Override
    public int size() {
        if (mEditionThumb == null) {
            return 0;
        } else {
            return 1;
        }
    }

    public void addOverlayItem(OverlayItem overlay) {
        mEditionThumb = overlay;
        populate();
    }

    public void removeOverlayItem() {
        mEditionThumb = null;
        populate();
    }
} 
```

------------------逐项叠加创建------------------

```
DefaultResourceProxyImpl defaultResouceProxyImpl = new DefaultResourceProxyImpl(getApplicationContext());
Drawable defaultPinEdition = getResources().getDrawable(R.drawable.pin_thumb);
                mPinThumbOverlay = new PinThumbOverlay(defaultPinEdition, defaultResouceProxyImpl);
mMapView.getOverlays().clear();
mMapView.getOverlays().add(mPinThumbOverlay); 
```

-------------------叠加项目创建--------------

```
EditionThumbOverlayItem editionThumb = new EditionThumbOverlayItem(new GeoPoint(mCurrentUserLocation),
                getResources());
        mPinThumbOverlay.addOverlayItem(editionThumb); 
```

注意：我使用 osmdroid 地图，而不是默认的 google map api。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:28:48.567

似乎 osmdroid 会覆盖您在 ItemizedOverlay 的 onDrawItem 方法中使用 drawble.setBounds() 方法设置的任何值：

```
protected void onDrawItem(final Canvas canvas, final Item item, final Point curScreenCoords) {
    final int state = (mDrawFocusedItem && (mFocusedItem == item) ? OverlayItem.ITEM_STATE_FOCUSED_MASK
            : 0);
    final Drawable marker = (item.getMarker(state) == null) ? getDefaultMarker(state) : item
            .getMarker(state);
    final HotspotPlace hotspot = item.getMarkerHotspot();

    boundToHotspot(marker, hotspot);

    // draw it
    Overlay.drawAt(canvas, marker, curScreenCoords.x, curScreenCoords.y, false);
} 
```

或者更确切地说，实际覆盖将在 boundToHotspot(marker,hotspot); 中完成。方法。

要克服这个问题，请将热点设置在 OverlayItem 上，而不是设置可绘制对象的边界。例子：

```
GeoPoint point = new GeoPoint(currentLoc);
OverlayItem item = new OverlayItem("my location", "my loc", point);
item.setMarkerHotspot(HotspotPlace.BOTTOM_CENTER); 
```

这应该会产生您想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:50:14.920

如果您只想在地图中心放置一个标记，请使用以下代码片段：

```
public class MyActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.main);
        mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
        mapView.setMultiTouchControls(true);
        mapView.setClickable(true);
        mapView.setUseDataConnection(true);
        mapView.getController().setZoom(MAP_DEFAULT_ZOOM);
        mapView.setTileSource(TileSourceFactory.MAPNIK);
        resourceProxy = new DefaultResourceProxyImpl(getApplicationContext()); 

        GeoPoint location = getLocation()
        ItemizedIconOverlay<OverlayItem> currentLocationOverlay; 
        Drawable marker = this.getResources().getDrawable(R.drawable.custom_marker);
        OverlayItem myLocationOverlayItem = new OverlayItem("Here", "Current Position", location); 
        myLocationOverlayItem.setMarker(marker);  
        final ArrayList<OverlayItem> items = new ArrayList<OverlayItem>();
        items.add(myLocationOverlayItem);
        currentLocationOverlay = new ItemizedIconOverlay<OverlayItem>(items,
                new ItemizedIconOverlay.OnItemGestureListener<OverlayItem>() {
                    public boolean onItemSingleTapUp(final int index, final OverlayItem item) {
                        return true;
                    }
                    public boolean onItemLongPress(final int index, final OverlayItem item) {
                        return true;
                    }
                }, resourceProxy);        

     mapView.getOverlays().add(this.currentLocationOverlay);
     mapView.getController().setCenter(location);

 } 
```

# delphi - TWebBrowser：缩放+“单窗口模式”不兼容

> ID：11223197
> 
> 赞同：6
> 
> 时间：2012-06-27T09:31:14.723
> 
> 标签：delphi, delphi-2010

## 我正在尝试什么：

我需要一个 TWebBrowser，它总是放大（~140%）并将所有链接保存在同一个 webbrowser 中（即 _BLANK 链接应该在同一个浏览器控件中打开）。

## 我是怎么做的：

我已将`FEATURE_BROWSER_EMULATION`in 注册表设置为 9999，因此网页使用 IE9 呈现。我已经确认这是有效的。此外，我正在全新安装的带有 IE9 的 Windows 7 上运行编译后的程序，并通过 Windows Update 进行了全面更新。

**缩放**：

```
procedure TForm1.WebBrowser1DocumentComplete(ASender: TObject;
  const pDisp: IDispatch; var URL: OleVariant);
var
  ZoomFac: OLEVariant;
begin
  ZoomFac := 140;
  WebBrowser1.ExecWB(OLECMDID_OPTICAL_ZOOM, OLECMDEXECOPT_DONTPROMPTUSER, ZoomFac);
end; 
```

这完美地工作。

**在同一浏览器控件中打开新窗口：**

默认情况下，当 TWebBrowser 遇到设置为在新窗口中打开的链接时，它会打开一个新的 IE。我需要它留在我的程序/网络浏览器中。

我在这里尝试了很多东西。这对我有用：

```
procedure TFormWeb.WebBrowser1NewWindow3(ASender: TObject;
  var ppDisp: IDispatch; var Cancel: WordBool; dwFlags: Cardinal;
  const bstrUrlContext, bstrUrl: WideString);
begin
  Cancel := True;
  WebBrowser1.Navigate(bstrUrl);
end; 
```

我取消了新窗口，而是导航到相同的 URL。

Internet 上各个页面上的其他来源建议我不要取消，而是将 ppDisp 设置为各种事物，例如`WebBrowser1.DefaultDispath`or`WebBrowser1.Application`和它们的变体。这对我不起作用。当我单击 _BLANK 链接时，没有任何反应。这是在两台计算机（Win7 和 IE9）上测试的。我不知道为什么它不起作用，因为这似乎适用于互联网上的其他人。也许这会解决问题？

## 现在的问题：

当我结合这两条代码时，它会中断！

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  WebBrowser1.Navigate('http://wbm.dk/test.htm');
  // This is a test page, that I created. It just contains a normal link to google.com
end;

procedure TForm1.WebBrowser1DocumentComplete(ASender: TObject;
  const pDisp: IDispatch; var URL: OleVariant);
var
  ZoomFac: OLEVariant;
begin
  ZoomFac := 140;
  WebBrowser1.ExecWB(OLECMDID_OPTICAL_ZOOM, OLECMDEXECOPT_DONTPROMPTUSER, ZoomFac);
end;

procedure TForm1.WebBrowser1NewWindow3(ASender: TObject; var ppDisp: IDispatch;
  var Cancel: WordBool; dwFlags: Cardinal; const bstrUrlContext,
  bstrUrl: WideString);
begin
  Cancel := True;
  WebBrowser1.Navigate(bstrUrl);
end; 
```

在运行时在浏览器中点击一个链接（无论是正常的还是_BLANK），都会产生这个错误：

```
First chance exception at $75F1B9BC. Exception class EOleException with message 'Unspecified error'. Process Project1.exe (3288) 
```

如果我删除代码的任何一部分，它就可以工作（显然没有删除的代码）。

任何人都可以帮助我同时让这两件事工作吗？

谢谢你的时间！

## 更新：

现在这是正确捕获新窗口并将其保存在同一浏览器控件中的问题。据我所知，OnDocumentComplete 中的缩放代码与它无关。总的来说就是变焦。如果 WebBrowser 控件已被缩放（一次就足够了），NewWindow3 中的代码将失败并显示“未指定错误”。将缩放级别重置为 100% 无济于事。

通过使用缩放代码 (ExecWB)，WebBrowser 中的某些内容“永远”发生了变化，这使得它与 NewWindow3 中的代码不兼容。

有人能弄清楚吗？

**新代码：**

```
procedure TForm1.Button1Click(Sender: TObject);
var
  ZoomFac: OLEVariant;
begin
  ZoomFac := 140;
  WebBrowser1.ExecWB(OLECMDID_OPTICAL_ZOOM, OLECMDEXECOPT_DONTPROMPTUSER, ZoomFac);
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  WebBrowser1.Navigate('http://www.wbm.dk/test.htm');
end;

procedure TForm1.WebBrowser1NewWindow3(ASender: TObject; var ppDisp: IDispatch;
  var Cancel: WordBool; dwFlags: Cardinal; const bstrUrlContext,
  bstrUrl: WideString);
begin
  Cancel := True;
  WebBrowser1.Navigate(bstrUrl);
end; 
```

尝试在单击 Button1 之前和之后单击链接。缩放后失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T09:21:19.093

您可以在事件中设置`ppDisp`一个**新**实例，例如：`IWebBrowser2``OnNewWindow2`

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  WebBrowser1.Navigate('http://wbm.dk/test.htm');
end;

procedure TForm1.WebBrowser1DocumentComplete(Sender: TObject;
  const pDisp: IDispatch; var URL: OleVariant);
var
  ZoomFac: OleVariant;
begin
  // the top-level browser
  if pDisp = TWebBrowser(Sender).ControlInterface then
  begin
    ZoomFac := 140;
    TWebBrowser(Sender).ExecWB(OLECMDID_OPTICAL_ZOOM, OLECMDEXECOPT_DONTPROMPTUSER, ZoomFac);
  end;
end;

procedure TForm1.WebBrowser1NewWindow2(Sender: TObject;
  var ppDisp: IDispatch; var Cancel: WordBool);
var
  NewWindow: TForm1;
begin
  // ppDisp is nil; this will create a new instance of TForm1:
  NewWindow := TForm1.Create(self);
  NewWindow.Show;
  ppDisp := NewWindow.Webbrowser1.DefaultDispatch;
end; 
```

微软还[建议](http://support.microsoft.com/kb/184876)设置`RegisterAsBrowser`为`true`.
您可以更改此代码以`TWebBrowser`在 Page 控件内的新选项卡中打开一个。

我们不能设置`ppDisp`为**当前**实例`TWebBrowser`- 所以使用这个简单的代码：

`ppDisp := WebBrowser1.DefaultDispatch;`剂量不起作用。

如果我们想维护 UI 流程，我们需要**“重新创建”** current/active ——请注意，在以下示例中，它是动态创建的，例如：`TWebBrowser``TWebBrowser`

```
const
  CM_WB_DESTROY = WM_USER + 1;
  OLECMDID_OPTICAL_ZOOM = 63;

type
  TForm1 = class(TForm)
    Button1: TButton;        
    Panel1: TPanel;
    procedure Button1Click(Sender: TObject);
    procedure FormCreate(Sender: TObject);
  private
    function CreateWebBrowser: TWebBrowser;
    procedure WebBrowserDocumentComplete(Sender: TObject; const pDisp: IDispatch; var URL: OleVariant);
    procedure WebBrowserNewWindow2(Sender: TObject; var ppDisp: IDispatch; var Cancel: WordBool);
    procedure CMWebBrowserDestroy(var Message: TMessage); message CM_WB_DESTROY;
  public
    WebBrowser: TWebBrowser;
  end;

var
  Form1: TForm1;

implementation

{$R *.DFM}

procedure TForm1.FormCreate(Sender: TObject);
begin
  WebBrowser := CreateWebBrowser;
end;

function TForm1.CreateWebBrowser: TWebBrowser;
begin
  Result := TWebBrowser.Create(Self);
  TWinControl(Result).Parent := Panel1;
  Result.Align := alClient;
  Result.OnDocumentComplete := WebBrowserDocumentComplete;
  Result.OnNewWindow2 := WebBrowserNewWindow2;
  Result.RegisterAsBrowser := True;
end;

procedure TForm1.WebBrowserDocumentComplete(Sender: TObject;
  const pDisp: IDispatch; var URL: OleVariant);
var
  ZoomFac: OleVariant;
begin
  // the top-level browser
  if pDisp = TWebBrowser(Sender).ControlInterface then
  begin
    ZoomFac := 140;
    TWebBrowser(Sender).ExecWB(OLECMDID_OPTICAL_ZOOM, OLECMDEXECOPT_DONTPROMPTUSER, ZoomFac);
  end;
end;

procedure TForm1.WebBrowserNewWindow2(Sender: TObject; var ppDisp: IDispatch; var Cancel: WordBool);
var
  NewWB: TWebBrowser;
begin
  NewWB := CreateWebBrowser;
  ppDisp := NewWB.DefaultDispatch;
  WebBrowser := NewWB;

  // just in case...
  TWebBrowser(Sender).Stop;
  TWebBrowser(Sender).OnDocumentComplete := nil;
  TWebBrowser(Sender).OnNewWindow2 := nil;

  // post a delayed message to destory the current TWebBrowser
  PostMessage(Self.Handle, CM_WB_DESTROY, Integer(TWebBrowser(Sender)), 0);
end;

procedure TForm1.CMWebBrowserDestroy(var Message: TMessage);
var
  Sender: TObject;
begin
  Sender := TObject(Message.WParam);
  if Assigned(Sender) and (Sender is TWebBrowser) then
    TWebBrowser(Sender).Free;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  WebBrowser.Navigate('http://wbm.dk/test.htm');
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T11:22:07.000

我认为问题在于有时 OnDocumentComplete 会在文档加载（带框架的页面）时触发多次。

[这是正确实施它的方法。](https://stackoverflow.com/a/6446675/800214)

# ios - 添加资源路径到 UIWebView Cordova IOS

> ID：11223199
> 
> 赞同：3
> 
> 时间：2012-06-27T09:31:42.570
> 
> 标签：ios, url, cordova, uiwebview

我正在使用 Phonegap 开发 IOS 应用程序，并且我想在主 UIWebView 中添加一个资源路径，该路径位于我的应用程序的目录文件夹中。

我知道我必须将 baseURL 设置为这个确切的路径，但我似乎无法找到以某种方式获取 UIWebView 对象的方法。

我还注意到在本机部分：

```
self.viewController = [[[MainViewController alloc] init] autorelease];
self.viewController.useSplashScreen = YES;
self.viewController.wwwFolderName = @"www";
self.viewController.startPage = @"index.html";
self.viewController.invokeString = invokeString;
self.viewController.view.frame = viewBounds; 
```

此代码段位于 AppDelegate.m 中的*didFinishLaunchingWithOptions**中*，所以我想我应该添加资源路径的属性（？），但我不知道应该怎么做。

 *任何帮助或替代观点将不胜感激。

编辑：

是的，我注意到了这种方法，但它并没有按照我想要的方式工作。所以让我解释一下情况是什么：我有想要在我的项目文件夹中显示的 .html 文件。目标是在应用程序的初始化阶段下载 css 文件，然后使用我之前下载的 css 文件夹中的引用加载主 Web 视图。我知道它可以通过 css 参考链接中的“文件：”协议来完成，但不幸的是，我们不知道确切的路径以便将其包含在 html 文件中。如果我将资源路径更改为下载的文件夹，则应用程序找不到 index.html。

所以我的问题是，如果有人可以以某种方式加载 html 文件并在下载的 css 文件夹中进行“引用”。一个示例代码是：

```
in index.html:
<link href="/allCss.css" rel="stylesheet" type="text/css" /> 
```

allCss 文件位于我的应用程序的本地文件夹中，如前所述，该文件夹已下载。

我的第一个猜测是“添加”一个资源路径，但它没有按预期工作。任何其他有关如何解决此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:03:49.957

在主视图controller.m

这种方法会有所帮助。只需取消注释并尝试

```
- (NSString*) pathForResource:(NSString*)resourcepath;
{
return [super pathForResource:resourcepath];
} 
```*

# php - 删除php字符串中包含某些单词的句子

> ID：11223200
> 
> 赞同：0
> 
> 时间：2012-06-27T09:31:43.177
> 
> 标签：php, string

我有以下字符串

“这很好。感谢您的支持。”

现在我想删除包含感谢字的行

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T10:10:16.890

你需要用句号来爆炸段落。假设您的完整段落存储在 $str

```
$lines_arr = explode(".",$str); 
```

现在 $lines_arr 是一个包含行数的数组。

现在在循环下，您可以检查哪些行包含 "thanks" ，如果是则跳过它。

```
 $string = '';
    for($i=0; $i<(count($lines_arr)-1); $i++){
     //with the help of strpos
         if(strpos($lines_arr[$i],"Thanks") == false){
             $string .= $lines_arr[$i].". ";
       }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T09:34:53.533

你可以使用[str_replace](http://php.net/manual/en/function.str-replace.php)

```
echo str_replace("Thanks", "", "This is very nice. Thanks for your support.");
# Output: This is very nice.  for your support. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T09:35:11.647

如果您期望正确的标点符号，您可以将字符串explode() 到句号上的数组中，并使用您的特定单词删除元素，然后将所有元素合并回一个字符串。

# javascript - javascript 正则表达式简码 wordpress

> ID：11223202
> 
> 赞同：-1
> 
> 时间：2012-06-27T09:31:45.710
> 
> 标签：javascript, regex, wordpress, tinymce, shortcode

假设我有这样的简码：

```
[lexio param1="ara" param2="baba"]content[/lexio]

[tagor param1="rara"] 
```

如何使用 javascript 正则表达式将它们全部提取出来？我想要 lexio 参数数据和内容。我也需要 tagor 和它的参数。

我试过了

```
/[([a-z]+)([^[]+)*(?:](.*)[\/\1]|\s+\/])/gm; 
```

但这没有用。

谢谢

**编辑1：**

我找到了正则表达式模式：

```
/(.?)\[([\w\-]+)\b((?:[^\[\]]|(?R)|.)*?)(?:(\/))?\](?:(.+?)\[\/\2\])?(.?)/gm 
```

但是如何在 php 中提取像 preg_match_all 这样的模式呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:26:34.383

***JavaScript：***

```
var regex = /\](.*?)\[/g, result = []; 

while ( (result = regex.exec(text)) ) { 
  print(result[1]);
} 
```

*[在此处](http://ideone.com/7IxtO)查看并测试代码。*

# php - 将数组保存到数据库

> ID：11223203
> 
> 赞同：0
> 
> 时间：2012-06-27T09:31:50.823
> 
> 标签：php, mysql, curl

将数组插入数据库时​​出现错误。 **错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 23 行的“访问学生应咨询学生应参考相关部分”附近使用正确的语法。**

这是下面的数组

```
array
 'Choose by Subject Category or Module Code' => string '' (length=0)
 '
Back to Home page' => string '' (length=0)
 'International' => string 'visiting students should consult the' (length=36)
 'Undergraduate' => string 'students should refer to the relevant section of the UCC' (length=56)
 'Postgraduate' => string 'students should refer to the relevant section of the UCC' (length=56)
 'Credit Weighting' => string '5' (length=1)
 'Teaching Period(s)' => string 'Teaching Period 1.' (length=18)
 'No. of Students' => string 'Min 15, Max 30.' (length=15)
 'Pre-requisite(s)' => string 'None' (length=4)
 'Co-requisite(s)' => string 'None' (length=4)
 'Teaching Methods' => string '1 x 4hr(s) Lectures; Other (Distance Education Module - Up to 146hrs Self Directed Study).' (length=90)
 'Module Co-ordinator' => string 'Dr Peter Cleary, Department of Accounting, Finance and Information Systems.' (length=75)
 'Lecturer(s)' => string 'Staff, Department of Accounting, Finance and Information Systems.' (length=65)
 'Module Objective' => string 'To examine the management uses of accounting information and to enhance students ability to exert effective managerial control.' (length=127)
 'Module Content' => string 'Topics include; the accounting information needs of management, costs and pricing; estimating costs; the identification of key performance indicators; budgeting for control; capital investment appraisal and  implications for strategic planning and control.' (length=256)
 'Learning Outcomes' => string 'On successful completion of this module, students should be able to:' (length=68)
 'Assessment' => string 'Total Marks 100: Continuous Assessment 100 marks (Project/ Essay. Approximately 1500 words.).' (length=93)
 'Compulsory Elements' => string 'Continuous Assessment.' (length=22)
 'Penalties (for late submission of Course/Project Work etc.)' => string 'Where work is submitted up to and including 7 days late, 10% of the total marks available shall be deducted from the mark achieved.  Where work is submitted up to and including 14 days late, 20% of the total marks available shall be deducted from the mark achieved.  Work submitted 15 days late or more shall be assigned a mark of zero.' (length=336)
 'Pass Standard and any Special Requirements for Passing Module' => string '40%.' (length=4)
 'End of Year Written Examination Profile' => string 'No End of Year Written Examination.' (length=35)
 'Requirements for Supplemental Examination' => string 'Marks in passed element(s) of Continuous Assessment are carried forward, Failed element(s) of Continuous Assessment must be repeated (Resubmission of revised Continuous Assessment).' (length=181) 
```

下面是查询。

```
//============== INSERT QUERY================//
$result = array();      
foreach($result as $snode){ 
$query = sprintf("INSERT INTO save_array 
       (ModuleCode,
        Homepage,
        International,
        ......) VALUES ('%s')",mysql_real_escape_string($snode)); 

foreach ($result as $key => $value) 
$query = $query . "$value"; 

 echo '<br /><br />'; 
mysql_query($query) or die($query."<br/><br/>".mysql_error());  
echo $snode. '<br />'; 
}
echo '<br /><br /><br />'; 
```

任何帮助将不胜感激。

```
//================== New Updated Query Using Mysqli =============================

$result = array();
foreach($result as $snode){ 
$snode = mysql_real_escape_string($snode);
$query = sprintf("INSERT INTO save_array 
       (ModuleCode,Homepage,International,.......)VALUES ('%s')",implode("','",$result)); 

echo $query. '<br />'; 

foreach ($result as $key => $value) 
    $query = $query . "$value"; 
$result = mysql_query($query) or die (mysql_error());
} 
```

我回应了查询，似乎将正确的值插入到正确的列中，但没有执行到数据库中。

**错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 23 行的“访问学生应咨询学生应参考相关部分”附近使用正确的语法**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:37:34.980

回显您的 $query，您将看到。它不是有效的 SQL 语句。

用于调试动态查询的规则号 1,2 和 3：查看查询本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:40:15.853

您正在尝试保存到**多个**列中：

```
ModuleCode,
Homepage,
International,
Undergraduate,
... 
```

具有单个值`('%s')`

另请注意，`mysql_real_escape_string`它采用**SINGLE**值，而不是数组（我假设**$snode**是一个数组）。还可以考虑使用`PDO`or `mysqli`。

您可以这样做（例如；不知道 $snode 结构）并检查输出：

```
foreach($snode as &$val) {
   $val = mysql_real_escape_string($val);
}
...VALUES ('%s'),implode("','",$snode) 
```

**更新：**

**我找不到问题；**查询应该工作。我什至在我的系统中创建了您的表结构（假设每列的**VARCHAR(256) ）并且您的查询输出按预期工作（插入）..**

```
$result = array();
foreach($result as $snode) { 

   foreach($snode as &$val) {
      $val = mysql_real_escape_string($val);
   }

   $query = sprintf("INSERT INTO save_array (
        ModuleCode,Homepage,International,Undergraduate,Postgraduate,CreditWeighting, 
        TeachingPeriod,NoofStudents,Prerequisite,Corequisite,TeachingMethods, 
        ModuleCoordinator,Lecturer,ModuleObjective,ModuleContent,LearningOutcomes, 
        Assessment,CompulsoryElements,Penalties,PassStandard, 
        EndofYearWrittenExamination,RequirementsforExamination) 
        VALUES ('%s')",implode("','",$snode)); 

   $result = mysql_query($query) or die (mysql_error());
} 
```

**按原样**运行上面的代码片段；不要改变任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:40:37.950

你的主要问题是引号：

```
('%s') 
```

然后你的：

```
mysql_real_escape_string 
```

它会导致您的 SQL 发生冲突。使用 MySQL 转义或 '.

所以发生的事情是你双重转义你的 SQL 输入，这导致它实际上是 SQL 注入......

MYSQL 真正的转义字符串也不会将 $snode 作为数组插入。您将需要 foreach 数组提取值构建和数组以注入 SQL 查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T09:50:55.750

假设您的数组`$node`与您显示的列的顺序相同，您可以使用它`vsprintf()`来生成结果查询：

```
// assuming $node is the array with the data
// generate list of place holders
$placeholders = join(',', array_fill(0, count($node), "'%s'"));

// construct full query using array_map applied to the escaping function
$query = vsprintf("INSERT INTO save_array (ModuleCode,
        Homepage,
        International,
        Undergraduate,
        Postgraduate,
        CreditWeighting,
        TeachingPeriod,
        NoofStudents,
        Prerequisite,
        Corequisite,
        TeachingMethods,
        ModuleCoordinator,
        Lecturer,
        ModuleObjective,
        ModuleContent,
        LearningOutcomes,
        Assessment,
        CompulsoryElements,
        Penalties,
        PassStandard,
        EndofYearWrittenExamination,
        RequirementsforExamination) VALUES ($placeholders)", 
            array_map('mysql_real_escape_string', $node)
); 
```

顺便说一句，不要使用`mysql_`函数！

# spring - 将 SpringHttpInvoker 与 WSO2 ESB 集成？

> ID：11223204
> 
> 赞同：0
> 
> 时间：2012-06-27T09:31:53.863
> 
> 标签：spring, esb, wso2, wso2esb, spring-remoting

我有多个 Spring HttpInvoker 服务，并希望将它们与 WSO2 ESB 集成。我真的是 ESB 的新手，所以有人可以帮助我吗？

```
S1：http://10.0.1.75:8080/integration/ws/switch
S2：http://10.0.1.75:8080/beachon/ws/controller
S3：http://10.0.1.75:8080/ola/ws/mixture

```

我想将所有这些集成到 WSO2 ESB 中，并拥有来自 WSO2 ESB 的单个调用接口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:41:11.437

您可以通过称为服务链的功能来做到这一点。请看一下这些[1][2]。

[1] [http://wso2.org/library/articles/2011/01/wso2-esb-by-example-service-chaining](http://wso2.org/library/articles/2011/01/wso2-esb-by-example-service-chaining) [2] [http://wso2.org/library/articles/2011/04/integrate -规则-soa](http://wso2.org/library/articles/2011/04/integrate-rules-soa)

# java - Android中的模型/DAO

> ID：11223208
> 
> 赞同：0
> 
> 时间：2012-06-27T09:31:59.010
> 
> 标签：java, android

我想要一个模型（或类似模型），我想从中保存和获取数据。例如; 我运行一个异步任务，并且`onPostExecute`我想将返回值保存到模型中，我可以在我的其他类中使用它（当然，一旦异步任务完成）。

希望您了解我在这里之后的内容，否则会详细说明。

谢谢！

# javascript - 使用 jquery 在 iframe 中捕获鼠标右键单击事件

> ID：11223210
> 
> 赞同：2
> 
> 时间：2012-06-27T09:32:18.857
> 
> 标签：javascript, jquery, asp.net, iframe

我需要使用任何 javascript 或 jquery 代码在 asp.net 的 iframe 中捕获鼠标右键单击事件。

下面是我到目前为止尝试过的代码。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Detect IFrame Clicks</title>

<script type="text/javascript" language="javascript" src="JScript/jquery-1.7.1.js"></script>

<script type="text/javascript" language="javascript" src="JScript/jquery.ui.core.js"></script>

<script type="text/javascript" language="javascript" src="JScript/jquery.ui.widget.js"></script>

<script type="text/javascript" language="javascript" src="JScript/jquery.ui.mouse.js"></script>

<script type="text/javascript">        
    document.onmousedown = onMousebtClick
    var isOverIFrame = false;
    $(document).ready(function() {
        function processMouseOut() {
            isOverIFrame = false;
            top.focus();
        }

        function processMouseOver() {
            isOverIFrame = true;
        }

        function processIFrameClick() {
            if (isOverIFrame) {
                log("CLICK << detected. ");
                onMousebtClick();
            }
        }

        function log(message) {
            var console = document.getElementById("console");
            var text = console.value;
            text = text + message + "\n";
            console.value = text;
        }

        function attachOnloadEvent(func, obj) {
            if (typeof window.addEventListener != 'undefined') {
                window.addEventListener('load', func, false);
            } else if (typeof document.addEventListener != 'undefined') {
                document.addEventListener('load', func, false);
            } else if (typeof window.attachEvent != 'undefined') {
                window.attachEvent('onload', func);
            } else {
                if (typeof window.onload == 'function') {
                    var oldonload = onload;
                    window.onload = function() {
                        oldonload();
                        func();
                    };
                } else {
                    window.onload = func;
                }
            }
        }

        function init() {
            var element = document.getElementsByTagName("iframe");
            for (var i = 0; i < element.length; i++) {
                element[i].onmouseover = processMouseOver;
                element[i].onmouseout = processMouseOut;
            }
            if (typeof window.attachEvent != 'undefined') {
                top.attachEvent('onblur', processIFrameClick);
            }
            else if (typeof window.addEventListener != 'undefined') {
                top.addEventListener('blur', processIFrameClick, false);
            }
        }

        attachOnloadEvent(init);

    });

    function onMousebtClick() {
        switch (event.button) {
            case 1:
                alert("leftclick");
                break;

            case 2:
                alert("right click");
                break;
        }
    }
    /*document.onmousedown = onMousebtClick*/
</script>

</head>
<body id="mybody">
<iframe src="http://www.microsoft.com" width="800px" height="300px" id="ifrm">
</iframe>
<br />
<br />
<form name="form" id="form" action="">
<textarea name="console" id="console" style="width: 300px; height: 300px;" cols=""
    rows=""></textarea>
<button name="clear" id="clear" type="reset">
    Clear</button>
</form>
</body>
</html> 
```

我可以检测到正文标记中的鼠标右键单击，但我无法检测到 iframe 内的鼠标右键单击事件。

谁能帮帮我吗。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T10:36:56.463

如果 an 内的页面位于`iframe`同一域中，则可能。

**同一域的 IFrame 页面：http:** [//fiddle.jshell.net/rathoreahsan/MNtw8/8/show/](http://fiddle.jshell.net/rathoreahsan/MNtw8/8/show/)

**见演示：http:** [//jsfiddle.net/rathoreahsan/gJtkW/](http://jsfiddle.net/rathoreahsan/gJtkW/)

如果您访问其他域的页面，`iframe`就像您正在做的那样，那么不建议这样做。

编辑：请参阅下面给出的一些参考资料，希望对您有所帮助。

1.  [iframe 跨域策略问题](http://www.cakemail.com/the-iframe-cross-domain-policy-problem/)

2.  [跨域 iframe 调整大小](http://css-tricks.com/cross-domain-iframe-resizing/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T09:39:20.883

嘿：这可能会有所帮助：

[如何使用 JavaScript 在 IFRAME 中启用右键单击](https://stackoverflow.com/questions/3597470/how-enable-right-click-in-iframe-with-javascript?rq=1)

或者

[http://forums.asp.net/p/1818670/5042726.aspx/1?Capture+mouse+right+click+event+inside+a+iframe+using+jquery+](http://forums.asp.net/p/1818670/5042726.aspx/1?Capture+mouse+right+click+event+inside+a+iframe+using+jquery+)

> 恐怕这是不可能的。当您在 iframe 内时，您处于第二个标签中...除非您拥有 iframe 内的内容并且能够将您的 Javascript 放在其中的页面上，否则这是不可能的。由于许多安全原因，iframe 非常有限。

如果有人不这么认为，请告诉我，很高兴撤下这篇文章。

**虽然**尝试这里提到的这个黑客：http: [//www.codingforums.com/archive/index.php/t-8824.html](http://www.codingforums.com/archive/index.php/t-8824.html)

**或**在这里[http://forums.mozillazine.org/viewtopic.php?f=19&t=371334](http://forums.mozillazine.org/viewtopic.php?f=19&t=371334)

干杯，

# objective-c - 在 NSImageview 中移动 NSImage

> ID：11223211
> 
> 赞同：0
> 
> 时间：2012-06-27T09:32:24.120
> 
> 标签：objective-c, cocoa

我是 Cocoa 的新手，有点想创建一个计时器。

我正在尝试根据计时器向上或向下移动 NSImageview 内的 NSImage 。

这是我在 NSImageview 中加载图像的方式：

```
NSRect fnRect = NSMakeRect(10 + (wheelWidth / 4) - 5, 30, numbersWidth, wheelHeight);
fnImageView = [[NSImageView alloc] initWithFrame:fnRect];
[fnImageView setImageScaling:NSScaleNone];
[fnImageView setImage:numbers];
[self addSubview:fnImageView]; 
```

如果有人可以向我指出一个教程或给我一个关于如何做的提示，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:39:14.980

里面 a`NSImageView`不是 a `NSImage`。它只是用来**显示**.`NSImage`

你想要做的可能是一个你可以移动它的`NSImageView`内部。`NSView`

1.  创建一个新的`NSView`
2.  `NSImageView`在里面放一个
3.  左右移动`NSImageView`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:45:19.020

您可能想研究 CoreAnimation 并使用图层。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/WhatisCoreAnimation.html#//apple_ref/doc/uid/TP40004689-SW1](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/WhatisCoreAnimation.html#//apple_ref/doc/uid/TP40004689-SW1)

# asp.net - asp.net webforms 应用程序试图连接到代码中任何地方都没有引用的数据库？

> ID：11223215
> 
> 赞同：2
> 
> 时间：2012-06-27T09:33:01.147
> 
> 标签：asp.net, sql-server

我的服务器上有一些旧数据库，因此将旧的、未使用的数据库脱机。

这导致了一个非常奇怪的问题，因为我的网站抱怨无法连接到这些数据库之一。

我已经在整个代码库中搜索了数据库名称以及服务器上的所有配置文件，但它们都没有引用这个数据库名称，但是如果我脱机，我会收到错误消息？

我无法从错误中看到实际发出连接请求的内容，除了它看起来与 SQL 会话服务器有关。

> [SqlException (0x80131904)：无法打开数据库“MyOldDatabaseName”，因为它处于脱机状态。]
> System.Data.SqlClient.SqlConnection.OnError（SqlException 异常，布尔型 breakConnection）+1953274
> System.Data.SqlClient.SqlInternalConnection.OnError（SqlException 异常， Boolean breakConnection) +4849707
> System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) +194 System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +2392
> System.Data .SqlClient.SqlDataReader.ConsumeMetaData() +33
> System.Data.SqlClient.SqlDataReader.get_MetaData() +96
> System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) +297
> System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async) +954
> System.Data.SqlClient .SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result) +162
> System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method) +32
> System.Data。 SqlClient.SqlCommand.ExecuteReader（CommandBehavior 行为，字符串方法）+141
> System.Data.SqlClient.SqlCommand.ExecuteReader()+89
> System.Web.SessionState.SqlSessionStateStore.DoGet(HttpContext context, String id, Boolean getExclusive, Boolean& locked, TimeSpan& lockAge, Object& lockId, SessionStateActions& actionFlags) +516
> 
> [HttpException (0x80004005): 无法连接到 SQL Server 会话数据库。]
> System.Web.SessionState.SqlSessionStateStore.ThrowSqlConnectionException(SqlConnection conn, Exception e) +229
> System.Web.SessionState.SqlSessionStateStore.DoGet(HttpContext context, String id, Boolean getExclusive, Boolean& locked, TimeSpan& lockAge, Object& lockId, SessionStateActions& actionFlags) +649
> System.Web.SessionState.SqlSessionStateStore.GetItemExclusive(HttpContext context, String id, Boolean& locked, TimeSpan& lockAge, Object& lockId, SessionStateActions& actionFlags) +48
> System.Web .SessionState.SessionStateModule.GetSessionStateItem() +117 System.Web.SessionState.SessionStateModule.BeginAcquireState(Object source, EventArgs e, AsyncCallback cb,对象额外数据）+487
> System.Web.AsyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +66 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:48:01.547

你知道这是一个网络应用程序。您可以转到 IIS，停止所有网站，使数据库脱机，看看是否出现错误。如果您无法重现它，则某些网站正在连接到数据库，而您没有检查其源代码。然后，您可以一个一个地启动这些站点，直到它中断。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:15:21.127

`HttpException (0x80004005): Unable to connect to SQL Server session database`表示您正在/正在使用 SQL Server 存储会话状态。在您的 web.config 中`sessionState`查找`configuration -> system.web`. 如果该`mode`属性设置为`SQLServer`，那么将有一个`sqlConnectionString`带有连接字符串的属性。您可以将模式从 更改`SQLServer`为`InProc`移动到内存解决方案并远离 SQL Server。对于负载平衡环境，您必须坚持使用 SQL Server 或内存状态服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:52:03.847

你清理你的解决方案了吗？尝试清洁它，然后重建它。此外，您需要检查当您使该数据库重新联机时会发生什么。在您的 IIS 中检查可能引用此站点的任何连接字符串。

# javascript - 关于 jQuery 数据网格的查询

> ID：11223218
> 
> 赞同：0
> 
> 时间：2012-06-27T09:33:11.913
> 
> 标签：javascript, jquery, datagrid

我一直在看这个[问题](https://stackoverflow.com/questions/159025/jquery-grid-recommendations)

我正在寻找一个 datagrid jQuery 插件，它允许按列编辑数据表。

例如，表中的每一行可能需要在一列中包含相同的特定数据字符串。而不是 activley 将其逐行添加。您曾经使用的任何数据网格是否允许一次发生这种情况，例如“复制到所有行”功能？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:11:29.077

对我来说，答案是像 Pawan 一样的 JQGris，他说

# javascript - Javascript SDK 自动登录

> ID：11223226
> 
> 赞同：3
> 
> 时间：2012-06-27T09:33:41.500
> 
> 标签：javascript, facebook, login, sdk

我正在尝试使用 Javascript SDK 从 Facebook 获取登录按钮以在我的网站上工作。如果用户已登录，我会取回电子邮件地址。这行得通。但是在我有我的 Facebook 登录按钮的页面上，我也有我网站的正常登录。（用户名密码）。但是当我进入我的登录页面时，页面会自动加载 Facebook 按钮并出现 Facebook 登录对话框。但我不想自动加载这个按钮。我希望用户总是必须按下 Facebook 的登录按钮。这可能吗？

这是我的代码：

```
<script>
  window.fbAsyncInit = function() {
FB.init({
        appId: 'MY_APP_ID', // App ID
        status: true,
        cookie: true,
        xfbml: true,
        oauth: true,

});
FB.getLoginStatus(function(response) {
  FB.login(function(response) {
   if (response.authResponse) {
     FB.api('/me', function(response) {
       alert('Good to see you, ' + response.email + '.');
     });
   } else {
     alert('User cancelled login or did not fully authorize.');
   }
 });
});

// Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
 var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
 js = d.createElement('script'); js.id = id; js.async = true;
 js.src = "//connect.facebook.net/en_US/all.js";
 d.getElementsByTagName('head')[0].appendChild(js);
   }(document));
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T09:55:35.920

`FB.getLoginStatus`方法用于知道用户是否已登录

`FB.login`用于提示登录页面对应用进行身份验证和授权。

您正在调用 FB.getLoginStatus 方法，而不是总是担心响应和触发 fb.login 按钮。

如果您总是希望用户单击登录按钮，请不要使用`FB.getLoginStatus`

使用此代码

```
<html>
    <head>
      <title>My Facebook Login Page</title>
    </head>
    <body>

      <div id="fb-root"></div>
      <script>
        window.fbAsyncInit = function() {
          FB.init({
            appId      : 'YOUR_APP_ID', // App ID
            channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
            status     : true, // check login status
            cookie     : true, // enable cookies to allow the server to access the session
            xfbml      : true  // parse XFBML
          });
        };
        // Load the SDK Asynchronously
        (function(d){
           var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
           if (d.getElementById(id)) {return;}
           js = d.createElement('script'); js.id = id; js.async = true;
           js.src = "//connect.facebook.net/en_US/all.js";
           ref.parentNode.insertBefore(js, ref);
         }(document));
      </script>

      <div class="fb-login-button">Login with Facebook</div>

    </body>
 </html> 
```

仅供参考：[https](https://developers.facebook.com/docs/guides/web/)
://developers.facebook.com/docs/guides/web/ 检查身份验证部分

# android - 如何使用 JUnit 测试设备重启？

> ID：11223228
> 
> 赞同：2
> 
> 时间：2012-06-27T09:33:47.827
> 
> 标签：android

我已经创建了可以重新启动您的设备的应用程序。现在我想为该应用程序编写 JUnit。但问题是当设备重新启动时，JUnit 进程也会被杀死。当收到 BOOT_COMPLETE 广播时，我的测试用例将通过。请建议我一些方法来测试我的应用程序。我可以深入解决这个问题。

# php - 小型 php web 应用程序的最佳实践

> ID：11223230
> 
> 赞同：0
> 
> 时间：2012-06-27T09:33:50.463
> 
> 标签：php, web-applications

我将为我的团队创建一个非常小的 Web 应用程序，它非常具体——列出 json 文件并在线编辑它们。使用像 CI 这样的框架是不合理的，但我需要让它变得灵活，并且易于被其他程序员维护。我之前做过几个单页应用程序，并使用 `switch`. 不确定这是否正确，我认为有更好的方法可以做到这一点。

编辑：我试图摆脱框架，真正保持简单。或者至少可以使用 3 个文件框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:37:56.143

为什么不使用Sensio Labs 的微框架[Silex ？](http://silex.sensiolabs.org/)

# c - 程序接收信号：“EXC_BAD_ACCESS”？

> ID：11223234
> 
> 赞同：0
> 
> 时间：2012-06-27T09:34:07.357
> 
> 标签：c, xcode, string, pointers, fgets

我正在制作这个只读取文件内容的小程序，但是当我运行它时，我得到了这个错误：程序收到信号：“EXC_BAD_ACCESS”。

我还收到了来自 Xcode 的警告：在我的代码 (main.c) 的第 10 行“赋值从整数中生成指针而不进行强制转换”：

```
#include <stdio.h>
#include <stdlib.h>

#define FILE_LOCATION "../../Data"

int main (int argc, const char * argv[]) {
    FILE *dataFile;
    char c;

    if ( dataFile = fopen(FILE_LOCATION, "r") == NULL ) {
        printf("FAILURE!");
        exit(1);
    }

    while ( (c = fgetc(dataFile)) != EOF ) {
        printf("%c", c);
    }

    fclose(dataFile);

    return 0;
} 
```

这是调试器输出：

```
[Session started at 2012-06-27 10:28:13 +0200.]
GNU gdb 6.3.50-20050815 (Apple version gdb-1515) (Sat Jan 15 08:33:48 UTC 2011)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin".tty /dev/ttys000
Loading program into debugger…
Program loaded.
run
[Switching to process 34331]
Running…
Program received signal:  “EXC_BAD_ACCESS”.
sharedlibrary apply-load-rules all
(gdb) 
```

是不是指针有问题，功能不对？我发现了一些可以跟踪内存问题的东西，叫做 NSZombie，那是什么，我可以使用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:39:44.357

```
if ( (dataFile = fopen(FILE_LOCATION, "r")) == NULL ) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:45:07.007

这是另一个错误：

```
char c;

while ( (c = fgetc(dataFile)) != EOF ) { 
```

您应该在使用它们之前真正研究重要功能的[文档。](http://linux.die.net/man/3/fgetc)`fgetc()`

具体来说，`fgetc()`returns`int`是拟合`EOF`值所必需的。如果返回`char`，则必须有一个字符的数值与之冲突`EOF`，因此不能出现在二进制文件中。那会很糟糕，所以这不是它的工作原理。:)

# mysql - 来自所有主机的 MySQL root 访问权限

> ID：11223235
> 
> 赞同：177
> 
> 时间：2012-06-27T09:34:07.780
> 
> 标签：mysql, authentication

我已经在远程 Ubuntu 机器上安装了 MySQL 服务器。`root`用户在表中以这种`mysql.user`方式定义：

```
mysql> SELECT host, user, password FROM user WHERE user = 'root';
+------------------+------+-------------------------------------------+
| host             | user | password                                  |
+------------------+------+-------------------------------------------+
| localhost        | root | *xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx |
| ip-10-48-110-188 | root | *xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx |
| 127.0.0.1        | root | *xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx |
| ::1              | root | *xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx |
+------------------+------+-------------------------------------------+ 
```

我可以`root`使用标准客户端从同一个远程计算机命令行界面与用户一起访问`mysql`。现在我想**允许从 Internet 上的每个主机进行 root 访问**，所以我尝试添加以下行（它与先前转储中的第一行完全相同，`host`列除外）：

```
mysql> SELECT host, user, password FROM user WHERE host = '%';
+------------------+------+-------------------------------------------+
| host             | user | password                                  |
+------------------+------+-------------------------------------------+
| %                | root | *xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx |
+------------------+------+-------------------------------------------+ 
```

但是我个人 PC 上的客户端继续告诉我（我隐藏了服务器 IP）：

> SQL 错误 (2003): 无法连接到“46.xxx”上的 MySQL 服务器 (10061)

我不知道这是身份验证错误还是网络错误。在服务器防火墙上，我为*0.0.0.0/0启用了端口**3306/TCP*，这对我来说没问题...

 ** * *

## 回答 #1

> 赞同：414
> 
> 时间：2012-06-27T11:53:56.633

**更新：**

正如评论中提到的，由于 MySql 8 您需要首先显式创建用户，因此命令将如下所示：

```
CREATE USER 'root'@'%' IDENTIFIED BY 'root'; GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' WITH GRANT OPTION; 
```

**原答案：**

这个过程有两个步骤：

a) 授予特权。作为 root 用户执行此替换`'password'`为您当前的 root 密码：

```
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'password'; 
```

b) 绑定到所有地址：

最简单的方法是**注释掉**文件中的行`my.cnf`：

```
#bind-address = 127.0.0.1 
```

并重新启动mysql

```
service mysql restart 
```

默认情况下，它只绑定到 localhost，但如果你注释它绑定到它找到的所有接口的行。注释掉该行相当于`bind-address=*`.

要检查 mysql 服务绑定的位置，请以 root 身份执行：

```
netstat -tupan | grep mysql 
```

**Ubuntu 16 更新：**

配置文件是（现在）

```
/etc/mysql/mysql.conf.d/mysqld.cnf 
```

（至少在标准 Ubuntu 16 上）

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2014-06-12T17:24:27.910

运行以下查询：

```
use mysql;
update user set host='%' where host='localhost' 
```

注意：不推荐用于生产用途。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-10-30T11:15:33.160

MYSQL 8.0 - 打开 mysql 命令行客户端

```
GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost'; 
```

使用 mysql

```
UPDATE mysql.user SET host='%' WHERE user='root'; 
```

重启mysql服务

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-08-16T17:57:42.857

有时

> 绑定地址 = 127.0.0.1

应该

> 绑定地址 = *

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-10-01T16:17:14.703

MariaDB 在 Raspbian 上运行 - 包含绑定地址的文件很难查明。MariaDB 有一些关于这个主题[的不太有用的信息](https://mariadb.com/kb/en/library/configuring-mariadb-with-mycnf/)。

我用了

```
# sudo grep -R bind-address /etc 
```

找到该死的东西在哪里。

就像上面提到的每个人一样，我还必须在 mysql 中设置权限和主机。

并且在打开 3306 端口以远程连接到我的 Raspberry Pi 时也玩得很开心——最后使用了[iptables-persistent](http://blog.mxard.com/persistent-iptables-on-raspberry-pi-raspbian)。

现在一切都很好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-21T20:10:11.990

如果您的操作系统连接了许多网络，您必须在 my.conf 文件的绑定地址中指定其中一个网络。一个例子：

```
[mysqld]
bind-address = 127.100.10.234 
```

此 ip 来自 ethX 配置。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-26T21:21:47.347

就我而言，“绑定地址”设置是问题所在。评论这个设置`my.cnf`没有帮助，因为在**我**的例子中，mysql出于某种原因将默认设置为 127.0.0.1。

要验证 MySql 当前使用的设置，请在本地框中打开命令行：

```
mysql -h localhost -u myname -pmypass mydb 
```

读出当前设置：

```
Show variables where variable_name like "bind%" 
```

如果您想允许来自所有主机的访问，您应该在此处看到 0.0.0.0。如果不是这种情况，请`/etc/mysql/my.cnf`在 [mysqld] 部分下编辑并设置绑定地址：

```
bind-address=0.0.0.0 
```

最后重新启动您的 MySql 服务器以获取新设置：

```
sudo service mysql restart 
```

重试并检查是否已选择新设置。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-09-17T20:13:17.413

`bind-address = 0.0.0.0`在`/etc/mysql/mysql.conf.d/mysqld.cnf`mysql 命令行中更新并允许`root`用户从任何 Ip 进行连接。

以下是唯一适用于**mysql-8.0**的命令，因为其他命令因错误而失败`syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'IDENTIFIED BY 'abcd'' at line 1`

```
GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost';
UPDATE mysql.user SET host='%' WHERE user='root'; 
```

重启mysql客户端

```
sudo service mysql restart 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-12-12T00:30:48.623

我正在使用 AWS LightSail，为了让我的实例正常工作，我必须进行更改：

```
bind-address = 127.0.0.1 
```

到

```
bind-address = <Private IP Assigned by Amazon> 
```

然后我就可以远程连接了。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2018-08-19T10:24:10.673

`mysql_update`是你需要的。

我不知道为什么有人会遵循更复杂的方法来纠正这个问题，当 MySql 慷慨地构建了一个已经这样做的工具时......*

# wpf - 通过验证绑定到双字段

> ID：11223236
> 
> 赞同：17
> 
> 时间：2012-06-27T09:34:09.813
> 
> 标签：wpf, binding

我正在尝试使用 . 绑定`TextBox`到`double`某个对象的属性`UpdateSourceTrigger=PropertyChanged`。目标是在编辑期间立即验证输入的值是否在允许的范围内（如果不是则显示错误）。我想在模型级别实现验证，即通过`IDataErrorInfo`.

当我绑定到 int 属性时，一切都很好，但是如果属性是双倍的，则会出现令人沮丧的编辑行为：在擦除数字小数部分的最后一个有效数字后 - 小数分隔符被自动擦除（所有可能的小数零）。例如，从数字“12.03”中删除数字“3”后，文本变为“12”而不是“12.0”。

请帮忙。

这是示例代码：

MainWindow.xaml：

```
<Window x:Class="BindWithValidation.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="80" Width="200" WindowStartupLocation="CenterOwner">

  <StackPanel>
    <TextBox Width="100" Margin="10" Text="{Binding DoubleField, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}">
      <TextBox.Style>
        <Style TargetType="TextBox">
          <Style.Triggers>
            <Trigger Property="Validation.HasError" Value="true">
              <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors)[0].ErrorContent}"/>
            </Trigger>
          </Style.Triggers>
        </Style>
      </TextBox.Style>
    </TextBox>
  </StackPanel>
</Window> 
```

MainWindow.xaml.cs：

```
namespace BindWithValidation
{
  public partial class MainWindow : Window
  {
    private UISimpleData _uiData = new UISimpleData();

    public MainWindow()
    {
      InitializeComponent();
      DataContext = _uiData;
    }
  }
} 
```

UISimpleData.cs：

```
namespace BindWithValidation
{
  public class UISimpleData : INotifyPropertyChanged, IDataErrorInfo
  {
    private double _doubleField = 12.03;

    public double DoubleField
    {
      get
      {
        return _doubleField;
      }
      set
      {
        if (_doubleField == value)
          return;

        _doubleField = value;
        RaisePropertyChanged("DoubleField");
      }
    }

    public string this[string propertyName]
    {
      get
      {
        string validationResult = null;
        switch (propertyName)
        {
          case "DoubleField":
          {
            if (DoubleField < 2 || DoubleField > 5)
              validationResult = "DoubleField is out of range";
            break;
          }

          default:
            throw new ApplicationException("Unknown Property being validated on UIData");
        }

        return validationResult;
      }
    }

    public string Error { get { return "not implemented"; } }

    public event PropertyChangedEventHandler PropertyChanged;

    protected void RaisePropertyChanged(string property)
    {
      if ( PropertyChanged != null )
        PropertyChanged(this, new PropertyChangedEventArgs(property)); 
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-09-16T07:37:35.040

> 将浮点值绑定到文本框的行为已从 .NET 4 更改为 4.5。在 .NET 4.5 中，默认情况下不再可以使用“UpdateSourceTrigger = PropertyChanged”输入分隔符（逗号或点）。
> 
> **微软说，这（是）打算**
> 
> 如果您仍想使用“UpdateSourceTrigger = PropertyChanged”，您可以通过将以下代码行添加到您的构造函数中来强制 .NET 4.5 应用程序中的 .NET 4 行为`App.xaml.cs`：
> 
> ```
> public App()  
> {
>     System.Windows.FrameworkCompatibilityPreferences
>                .KeepTextBoxDisplaySynchronizedWithTextProperty = false;   
> } 
> ```

[（Sebastian Lux - 从这里](http://www.sebastianlux.net/2014/06/21/binding-float-values-to-a-net-4-5-wpf-textbox-using-updatesourcetriggerpropertychanged/)逐字复制）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-12T14:01:09.570

我意识到我参加聚会有点晚了，但我找到了一个（我认为）相当干净的解决方案来解决这个问题。

一个聪明的转换器，它记住最后一个转换为双精度的字符串并返回如果它存在应该做你想做的一切。

请注意，当用户更改文本框的内容时，ConvertBack 将存储用户输入的字符串，将字符串解析为双精度，并将该值传递给视图模型。紧接着，调用 Convert 来显示新更改的值。此时，存储的字符串不为空，将被返回。

如果应用程序而不是用户导致双精度更改，则仅调用 Convert 。这意味着缓存的字符串将为空，并且将在双精度上调用标准 ToString()。

这样，用户在修改文本框的内容时避免了奇怪的意外，但应用程序仍然可以触发更改。

```
public class DoubleToPersistantStringConverter : IValueConverter
{
    private string lastConvertBackString;

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (!(value is double)) return null;

        var stringValue = lastConvertBackString ?? value.ToString();
        lastConvertBackString = null;

        return stringValue;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (!(value is string)) return null;

        double result;
        if (double.TryParse((string)value, out result))
        {
            lastConvertBackString = (string)value;
            return result;
        }

        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-27T09:57:04.043

尝试用小数位格式化值？

但这可能很奇怪，因为您将始终有 N 个小数位。

```
<TextBox.Text>
    <Binding Path="DoubleField" StringFormat="{}{0:0.00}" UpdateSourceTrigger="PropertyChanged" ValidatesOnDataErrors="True"/>
</TextBox.Text> 
```

如果固定小数位不够好，您可能必须编写一个转换器，将值视为字符串并将其转换回双精度值。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-30T10:12:36.457

问题是每次值更改时您都在更新您的属性。当您将 12.03 更改为 12.0 时，它会四舍五入为 12。

您可以通过像这样`delay`更改`TextBox`in来查看更改`xaml`

```
<TextBox Width="100" Margin="10" Text="{Binding DoubleField, UpdateSourceTrigger=PropertyChanged,Delay=500, ValidatesOnDataErrors=True}"> 
```

但`delay`会在延迟时间（以 mili sec 为单位）后通知并设置属性。`StringFormat`像这样使用更好

```
<TextBox Width="100" Margin="10" Text="{Binding DoubleField, UpdateSourceTrigger=PropertyChanged,StringFormat=N2, ValidatesOnDataErrors=True}"> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-08T11:19:46.240

我遇到了同样的问题，并找到了一个非常简单的解决方案：使用自定义验证器，当文本以“。”结尾时，它不会返回“有效”。或“0”：

```
double val = 0;
string tmp = value.ToString();

if (tmp.EndsWith(",") || tmp.EndsWith("0") || tmp.EndsWith("."))
{
    return new ValidationResult(false, "Enter another digit, or delete the last one.");
}
else
{
    return ValidationResult.ValidResult;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-27T09:40:36.517

尝试在绑定上使用 StringFormat：

```
<TextBox Width="100" Margin="10" Text="{Binding DoubleField, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, StringFormat='0.0'}"> 
```

不确定该字符串格式是否正确，因为我已经有一段时间没有做过了，但这只是一个例子

# iphone - 如何读取外部mysql数据库

> ID：11223237
> 
> 赞同：1
> 
> 时间：2012-06-27T09:34:10.960
> 
> 标签：iphone, objective-c

我试图找到如何在我的 iphone 应用程序中从我的数据库中读取数据。数据库在我的服务器中，我尝试的方法类似于我在 Android 中的操作方式（我不确定是否是最好的方法）：

```
NSString *hostStr = @"http://www.myip/notices.php";

NSData *dataURL =  [NSData dataWithContentsOfURL: [ NSURL URLWithString: hostStr ]];    
NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];

NSLog(@"Mysql response:is %@",serverOutput); 
```

我得到的是“Mysql 响应：是数组”，这是真的：

```
<?php
mysql_connect("localhost","user","pass");
mysql_select_db("database");

  $q = mysql_query("SELECT id, title FROM jos_content WHERE catid=12 AND state=1 AND DATE(publish_up) <= NOW() ORDER BY DATE(publish_up) DESC");

   while($e=mysql_fetch_assoc($q))

    $output[]=array("id" => $e['id'], "title" =>  utf8_encode($e['title']));
        echo $e;

print($output);

mysql_close();

?> 
```

我该怎么做？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:36:14.097

从您的 php 将数据打印为 JSON 处理起来会容易得多

在您的 PHP 使用中

代替

```
print($output); 
```

利用

```
echo json_encode($output); 
```

然后在您的 iOS 应用程序中，您可以使用[这个框架](https://github.com/stig/json-framework/)

其他资源

*   [如何在 iOS App 中解析 JSON](https://stackoverflow.com/questions/7530173/how-to-parse-json-in-ios-app)
*   [iPhone/iOS JSON解析教程](https://stackoverflow.com/questions/5813077/iphone-ios-json-parsing-tutorial)

要使用 SBJSon，您将执行以下操作

```
NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];
id object = [serverOutput JSONValue];
NSMutableDictionary *dictionary = (NSMutableDictionary *)object; 
```

现在`dictionary`将包含值和键的字典

# tfs - Azure 网站在 TFS 上构建和部署时缺少 msshrtmi

> ID：11223243
> 
> 赞同：9
> 
> 时间：2012-06-27T09:34:35.207
> 
> 标签：tfs, azure, azure-deployment

我正在尝试从 TFS（预览版）部署到 Azure 网站（预览版）。构建工作并部署了网站，但是当我的代码尝试访问 Azure RoleEnvironment 时，网站会引发以下异常：

> 无法加载文件或程序集 'msshrtmi, Version=1.7.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 或其依赖项之一。该系统找不到指定的文件。

我已经尝试了以下线程中提出的所有解决方案，但没有成功。我认为这与TFS有关。

我已经对此进行了测试：

*   重新安装 Azure SDK 和工具
*   从项目文件中删除所有 PlatformTarget
*   编写构建后事件以删除 msshrtmi.dll
*   将所有程序集定位到 x64（-> TFS 上的所有单元测试失败，它似乎是 x86，即使在 .testsettings 中允许 x64）

[无法加载文件或程序集“msshrtmi”或其依赖项之一（Azure 表存储访问）](https://stackoverflow.com/questions/8273321/could-not-load-file-or-assembly-msshrtmi-or-one-of-its-dependencies-azure-tab)

我对如何解决此问题没有任何想法？有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:19:04.133

在进行一些构建时，我在早期版本的 SDK 中遇到了类似的问题。我的解决方案并不完全直观。如果我检查每个构建配置并执行“清洁解决方案”，然后返回到我真正关心的构建配置并进行构建，这个问题就会消失。

我无法解释为什么会这样，但是几个小时后我的头发被拉出来，我很高兴有一个解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:02:31.927

经过 7 小时的令人难以置信的反复试验，我终于解决了这个问题。问题在于 2012 年 6 月的 Microsoft Windows Azure 工具和 2011 年 11 月的 Microsoft Windows Azure 工具。

我遵循的步骤：

*   删除适用于 Visual Studio 2012 RC 的 Microsoft Windows Azure 工具 - 2012 年 6 月
*   为 Visual Studio 2010 安装 Microsoft Windows Azure 工具 - 2012 年 6 月版
*   删除适用于 Visual Studio 2010 的 Microsoft Windows Azure 工具 - 2011 年 11 月版
*   现在重新打开试图部署的项目
*   Visual Studio 将尝试将所有 2011 年 11 月的二进制文件转换为 2012 年 6 月的版本
*   成功完成后，重新检查所有 Microsoft.WindowsAzure 引用以查看它们是否为 1.7.0.0 版
*   发布到 Azure！

希望它对某人有所帮助，我太累了，我在接下来的 24 小时内不会编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T01:19:21.523

我遇到了同样的问题，它总是在 64 位应用程序中寻找 32 位版本的 msshrtmi，导致这样的错误。我从来不知道为什么，但我在我的项目中创建了构建任务，该任务将从 bin 中删除有问题的 32 位文件，因此在 GAC 中找到了 64 位。

# sql-server - SQL Server 正则表达式约束

> ID：11223245
> 
> 赞同：9
> 
> 时间：2012-06-27T09:34:47.450
> 
> 标签：sql-server, regex, sql-server-2008

我通过下面的查询创建一个表

```
CREATE TABLE testing(
    test_field VARCHAR(20) CHECK(test_field like '^[a-zA-z0-9]{6,20}$')
); 
```

正则表达式在 Javascript 中工作并且表已成功创建，但是当我尝试执行下面的插入查询时，发生了错误。

```
INSERT INTO testing VALUES('abcde12345'); 
```

错误消息在下面列出

> INSERT 语句与 CHECK 约束“CK_ *testing* _test_field__173876EA”冲突。冲突发生在数据库“TEST”、表“dbo.testing”、列“test_field”中。

在 Javascript 和 SQL Server 中使用正则表达式有什么区别吗？

有没有高手可以帮忙？？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T09:36:53.117

[`LIKE`不使用正则表达式。](http://msdn.microsoft.com/en-us/library/ms179859.aspx)

您可以通过创建自己的函数将正则表达式支持添加到 SQL Server。[本文](http://msdn.microsoft.com/en-us/magazine/cc163473.aspx)详细介绍了一种通过 .NET 的方法。

在您的情况下，您还可以尝试以下方法，但这并不漂亮：

```
 test_field LIKE '[a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9]'
OR test_field LIKE '[a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9]'
OR test_field LIKE '[a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9]'
OR test_field LIKE '[a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9]'
OR test_field LIKE '[a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9]'
OR test_field LIKE '[a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9]'
OR test_field LIKE '[a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9]'
OR test_field LIKE '[a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9]'
OR test_field LIKE '[a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9]'
OR test_field LIKE '[a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9]'
OR test_field LIKE '[a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9]'
OR test_field LIKE '[a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9]'
OR test_field LIKE '[a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9]'
OR test_field LIKE '[a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9]'
OR test_field LIKE '[a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9]' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:18:19.700

Sql Server 不支持[POSIX 正则表达式](http://en.wikipedia.org/wiki/Regular_expression#POSIX)，只支持一个子集。

有关详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/ms179859.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-05T10:38:48.757

有一个解决方法。由于您想检查每个字符，您可以使用复制生成正则表达式：

```
SET @pattern = replicate('[a-zA-Z0-9]', LEN(@VAL)); 
```

这是围绕此 hack 的完整功能：

```
create function dbo.example (@VAL varchar(32))
RETURNS bit
WITH EXECUTE AS CALLER
AS
BEGIN
    DECLARE @pattern varchar(512);
    SET @pattern = replicate('[a-zA-Z0-9]', LEN(@VAL));
    IF @VAL like @pattern
    BEGIN
        RETURN 1;
    END;
    RETURN 0;
END;
GO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-22T07:52:21.940

除了创建自己的函数之外，tsql 中的另一种方法是使用包含正则表达式的模式约束创建 XML Schema：

```
CREATE XML SCHEMA COLLECTION dbo.RegexValidatorSchema
AS '<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified"
           elementFormDefault="qualified"
           xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="test">
        <xs:simpleType>
            <xs:restriction base="xs:string">
                <xs:pattern value="^[a-zA-z0-9]{6,20}$"/>
            </xs:restriction>
        </xs:simpleType>
    </xs:element>
</xs:schema>'; 
```

并添加一个检查约束，以便验证插入/更新：

```
ALTER TABLE dbo.testing
 ADD CONSTRAINT CK_ValidateValueMatchesPattern 
 CHECK (CAST(ISNULL('<test>' + REPLACE(REPLACE(REPLACE(Value, '&','&amp;'), '<','&lt;'), '>','&gt;') + '</test>','') AS XML(dbo.RegexValidatorSchema)) IS NOT NULL) 
```

但要注意性能下降。

# maven - 无法用 mvn 编译大象鸟

> ID：11223246
> 
> 赞同：2
> 
> 时间：2012-06-27T09:34:49.090
> 
> 标签：maven, hadoop

我只是无法解决我的问题，即使它对你来说可能很明显。那么任何人都可以帮助我吗？

当我尝试根据它的源代码构建大象鸟时，出现了问题。我执行了`mvn package`

它返回了：

```
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] One or more required plugin parameters are invalid/missing for 'protobuf:run' 
```

在插件“protobuf-maven-plugin”的定义中指定以下内容：

```
<configuration>
  ...
  <inputDirectories>VALUE</inputDirectories>
</configuration> 
```

-或者-

在命令行上，指定：'-DinputDirectories=VALUE'

我尝试安装 protobuf，但它仍然无法正常工作。那么，这是否意味着我已经指定了参数？以及如何指定参数？

再次，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:18:32.353

你需要使用`protobuf 2.3`- 不`2.4`！（[在这里](https://github.com/kevinweil/elephant-bird)阅读！）

另外，请确保您使用`maven3`，我遇到了一些问题`maven2`。

# java - 更改类后的 NullPointerException （代码之前工作过）

> ID：11223247
> 
> 赞同：-2
> 
> 时间：2012-06-27T09:34:52.380
> 
> 标签：java, android

我正在用 Java 为 Android 做基本的计算器。我的计算器能用，但我把所有代码都放在一个班级里。然后我想让代码更具可读性，我创建了另一个计算类并将计算代码放在那里。现在由于某种原因我的应用程序崩溃了。LogCat 说：NullPointerException。（我的应用程序启动良好，然后当我选择要转换的理想货币时，当我点击 ImageButton(convert) 时，应用程序崩溃）。这是我的代码：

CroToEu 类：

```
package com.eu.calculator;

import android.app.Activity;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.widget.ImageButton;
import android.widget.TextView;

public class CroToEur extends Activity {

TextView resultView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.cro_to_eur);

    final ImageButton convert = (ImageButton) findViewById(R.id.converButton);
    convertButton(convert);

}

private void convertButton(final ImageButton convert) {

    resultView = (TextView) findViewById(R.id.resultView);

    convert.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            Calculate now = new Calculate();
            now.croToEu();

            if(event.getAction() == MotionEvent.ACTION_DOWN) {

                convert.setImageResource(R.drawable.convert_button_ontouch);   

                checkForEmptyEntry();

            } else if (event.getAction() == MotionEvent.ACTION_UP) {

                convert.setImageResource(R.drawable.convert_button);
            }
            return false;
        }

        private void checkForEmptyEntry() {

            if(Calculate.HRKfield.getText() == null || "".equals(Calculate.HRKfield.getText().toString())) {

                resultView.setText("You left empty field");
            } else {

            resultView.setText(Calculate.HRKfield.getText()+" HRK = "+Calculate.fixDecimal+" EUR");

            }
        }
    });
}  
} 
```

还有我的计算课：

```
package com.eu.calculator;

import java.math.BigDecimal;

import android.app.Activity;
import android.widget.EditText;

public class Calculate extends Activity {

public static EditText HRKfield;    //S tem dobimo vrednost iz polja edittext  
public static double EUR = 0.133;//drži vrednost
public static Double HRK;   // Možnost uporabe double za parsing
public static double result; // rezultat
public static BigDecimal fixDecimal; // rezultat pretvori na decimalko

public BigDecimal croToEu() {

HRKfield = (EditText) findViewById(R.id.enterField);

    try {
        HRK = Double.parseDouble(HRKfield.getText().toString()); //tukaj dobimo čisto številko, ki jo uporabnik vnese v polje
        result = HRK * EUR;
        fixDecimal = new BigDecimal(result);
        fixDecimal = fixDecimal.setScale(2, BigDecimal.ROUND_HALF_UP);

    } catch (NumberFormatException e) {

    }
    return fixDecimal;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:43:29.393

不要用 Activity 扩展计算类。删除计算类中的扩展活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:38:41.613

```
 if(Calculate.HRKfield.getText() == null || " 
```

了解其他活动的观点是错误的............

您在 CroToEur 中并且您正在访问计算活动的 HRK 字段，该字段将为空

所以应该`pass the data from CroToEur activity to Calculate activity using intent`和s`et that in HRKfield in onCreate of CroToEur`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:39:28.617

你错过了你的`onCreate()`方法，甚至`setContentView`在`Calculate.class`里面，所以它找不到你的edittext HRKfield，所以它正在抛出`NullpointerException`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T09:39:52.117

如果您只是想创建一个帮助器类，它会为您进行计算，那么不要在您的Calculate 类上扩展 Activity。而是让您的 croToEu 方法返回一个变量并从另一个类中调用它，如下所示。

```
Calculate now = new Calculate();
BigDecimal val = now.croToEu(); 
```

Id 实际上有如下的计算类

```
public abstract class Calculate {

    public static final double EUR = 0.133;//drži vrednost

    public static BigDecimal croToEu(double hrkValue) {

        BigDecimal fixDecimal = new BigDecimal(hrkValue * EUR);
        fixDecimal = fixDecimal.setScale(2, BigDecimal.ROUND_HALF_UP);

        return fixDecimal;
    }

} 
```

然后在您的主要活动课程中

```
BigDecimal val = Calculate.croToEu(hrkValue); 
```

# mysql - SQL选择两个与另一个表有关系的表

> ID：11223249
> 
> 赞同：2
> 
> 时间：2012-06-27T09:34:54.300
> 
> 标签：mysql, sql

我想创建一个查询，从下表中选择列 PlayerName 、 PlayerNumber 、 Location 、 PartnerName 、 PartnerNumber 、 Location ：

*   玩家（列：Id、PlayerName、PlayerNumber、LocationId）
*   合作伙伴（列：Id、PartnerName、PartnerNumber、LocationId）
*   位置（列：ID、位置）

但我不知道该怎么做。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:47:10.357

考虑注册表后找到更新的查询。

```
SELECT players.playername, 
       player.playernumber, 
       L1.location, 
       partners.partnername, 
       partners.partnernumber, 
       L2.location 
FROM   registration R 
       INNER JOIN players 
               ON players.id = R.playerid 
       INNER JOIN partners 
               ON partners.id = R.partnerid 
       INNER JOIN locations L1 
               ON players.locationid = L1.id 
       INNER JOIN locations L2 
               ON partners.locationid = L2.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T09:44:29.720

简单直接的方法

```
select PL.PlayerName , PL.PlayerNumber, L.Location, PT.PartnerName, PT.PartnerNumber
from  Players PL, Location L, Patners PT
where L.id = PL.LocationId and L.id = P.LocationId 
```

这也可以使用 UNION 来完成，但对此不太确定

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T09:44:44.697

试试这个..我不确定

```
select pl.Id,pl.PlayerName,pl.PlayerNumber,pa.ID,pa.PartnerName,pa.PartnerNumber,l.Location 
from Players as  pl,Partners as pa ,Location as l 
where pl.LocationId = pa.LocationId and l.LocationId = pl.LocationId
and pa.LocationId = l.LocationId
AND l.LocationId = <some id> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T10:16:25.103

```
select
  PlayerName,
  PlayerNumber,
  Location,
  PartnerName,
  PartnerNumber
from players
  left join locations
    on locations.id = players.LocationId
  left join partners
    on partners.LocationId = locations.id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T09:39:40.097

```
Select PlayerName , PlayerNumber, Location, PartnerName, PartnerNumber
from Players pl
inner join Partners pa on pl.LocationId=pa.LocationId
inner join Location L on L.id=pa.LocationId
where Location = 'String to search for' 
```

# php - 独立 PHP 应用程序 Zend Framework 1.11

> ID：11223250
> 
> 赞同：0
> 
> 时间：2012-06-27T09:34:55.733
> 
> 标签：php, zend-framework

> **可能重复：**
> [从命令行运行 Zend Framework 操作](https://stackoverflow.com/questions/2325338/running-a-zend-framework-action-from-command-line)

我想使用 Zend Framework（1.11 版）创建一个 PHP 应用程序。它基本上用于在邮件服务器上执行一些日常任务，该服务将通过 cron 作业运行。

但是，因为将来拥有某种基于 HTML 的监控系统可能会很好，所以我希望拥有可用的布局功能。

所以真的有两个问题：

1.  从命令行运行时，如何禁用 Zend Framework 呈现视图？
2.  如果我访问特定的 url，我通常会如何构建界面？

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:03:03.853

我正在自动执行这些日常任务，例如：

1.  发出发票
2.  发送短信 + 电子邮件通知
3.  做一些家务[缓存+移动文件+归档....等]

我得到了这个想法[http://www.davidcaunt.co.uk/2010/02/25/easy-command-line-scripts-with-zend-application/](http://www.davidcaunt.co.uk/2010/02/25/easy-command-line-scripts-with-zend-application/)我已经扩展到管理任务+添加任务+删除任务+ 处理任务。

通常我不渲染任何视图，只是将函数和类调用到任务+参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:07:14.413

在您的控制器中，如果您的 cronjob 请求链接，您可以创建一个可以接收参数的操作。像这样的东西：

```
public function somepageAction() {
    if($this->_getParam('requestedByCronJob') {
        $this->_helper->layout()->disableLayout();
        $this->_helper->viewRenderer->setNoRender();
    }

    //Add the code here
    //The view/scripts/controller/somepage.phtml will be loaded if the parameter requestedbycronjob was not passed

} 
```

# mongodb - 分页子文档 MongoDB

> ID：11223254
> 
> 赞同：2
> 
> 时间：2012-06-27T09:35:14.500
> 
> 标签：mongodb, pagination

我正在尝试为存储在 MongoDB 中的产品文档创建分页机制。让这件事变得棘手的是，每个文档都可以有多种颜色，我需要按这些颜色而不是文档本身来分页。例如，下面的示例有两种颜色，然后在我的分页结果中应计为 2。

有人会如何以最简单/最有效的方式来做这件事？

提前致谢！

```
{
        "_id": ObjectId("4fdbaf608b446b0477000142"),
        "created_at": newDate("14-10-2011 12:02:55"),
        "modified_at": newDate("15-6-2012 23:55:43"),
        "sku": "A1051g",
        "name": {
            "en": "Earrings - Celebrity"
        },
        "variants": [
            {
                color: {
                    en: "Blue"
                }
            },
            {
                color: {
                    en: "Yellow"
                }

            }
        ]
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:34:28.807

我喜欢 Sammaye 的解决方案，但另一种方法可能只是拉回比您需要的更多的结果。

例如，如果您每页需要 100 个变体，并且每个产品至少有 1 个变体，则查询限制为 100 以尝试获取 100 个产品，因此至少有 100 个变体。

很有可能，您将拥有 100 多个变体（每个产品有超过 1 个），因此当您遍历光标以跟踪数量变体时构建一个产品列表。

当您有 100 个变体时，请记下您在列表中有多少个产品，在您检索的 100 个中，并将其用作下一个查询的跳过。

对于大型跳过，这最终会变得昂贵，因为您将不得不寻找跳过的文档数量，但现在可能是一个很好的解决方案。

# asp.net - itextsharp pdf创建在本地而不是在服务器上运行

> ID：11223263
> 
> 赞同：2
> 
> 时间：2012-06-27T09:35:54.750
> 
> 标签：asp.net, c#-4.0, pdf-generation, itextsharp

我使用 iTextSharp 创建了一个 PDF 文件，它存储在我的系统桌面中，并在我的本地系统中成功打开。现在，如果我将相同的代码上传到服务器，则不会发生错误并且不会创建 PDF 文件。这是我创建和打开 pdf 的部分代码。

```
PdfWriter.GetInstance(doc, new FileStream(Environment.GetFolderPath(Environment.SpecialFolder.Desktop) + "\\Out.pdf", FileMode.Create));

doc.Open();
DataView DView = (DataView)Session["data_value"];
dtData = DView.ToTable();
dr = dtData.Select("fldemp_no='" + Session["EmployeeID"].ToString() + "'");
doc.NewPage();
iTextSharp.text.Image ObjImg = iTextSharp.text.Image.GetInstance(Server.MapPath("~/Bin/Head.png"));
ObjImg.Alignment = iTextSharp.text.Image.ALIGN_CENTER;
ObjImg.ScaleToFit(220f, 150f);
ObjImg.SpacingBefore = 13f;
ObjImg.SpacingAfter = 1f;
doc.Add(ObjImg);

maintable = new PdfPTable(1);
cell = new PdfPCell(new Phrase("Pay Slip for the month of " + dr[0]["fldmonth"].ToString(), fnt1));
cell.HorizontalAlignment = Element.ALIGN_CENTER;
cell.Border = 0;
maintable.AddCell(cell);
doc.Add(maintable);

maintable = new PdfPTable(2);
empdetright = new PdfPTable(2);

empdetleft = new PdfPTable(2);
cell = new PdfPCell(new Phrase("Emp No", fnt1));
cell.Border = 0;
empdetright.AddCell(cell);

cell = new PdfPCell(new Phrase(": " + dr[0]["fldemp_no"].ToString(), fnt1));
cell.Border = 0;
empdetright.AddCell(cell);

cell = new PdfPCell(new Phrase("Emp Name", fnt1));
cell.Border = 0;
empdetright.AddCell(cell);
cell = new PdfPCell(new Phrase(": " + dr[0]["fldempname"].ToString(), fnt1));
cell.Border = 0;
empdetright.AddCell(cell);

doc.Close();
Process.Start(Environment.GetFolderPath(Environment.SpecialFolder.Desktop) + "/out.pdf"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:24:30.623

在 Web 应用程序中，您需要在响应流中返回 PDF 文档。这是一个简单的例子：

```
var response = HttpContext.Current.Response;
response.Clear();
response.ContentType = "application/pdf";

MemoryStream mem = new MemoryStream(); // PDF data will be written here
PdfWriter writer = PdfWriter.GetInstance(doc, mem);  // tie a PdfWriter instance to the stream

doc.Open();

// ... Doing the pdf generation

doc.Close();

// write the document data to response stream
writer.Flush();
response.OutputStream.Write(mem.GetBuffer(), 0, mem.GetBuffer().Length);
response.OutputStream.Flush();
response.OutputStream.Close();
response.End(); 
```

# objective-c - 如何在调整大小时为 NSSplitView 设置动画？

> ID：11223267
> 
> 赞同：0
> 
> 时间：2012-06-27T09:36:16.243
> 
> 标签：objective-c, macos, cocoa, nssplitview

我想在以`NSSplitView`编程方式调整大小时制作动画。这是调整视图大小的代码`SplitView`

在 awakeFromNib 中：我正在观察`NSSplitViewWillResizeSubviewsNotification`

```
 [[NSNotificationCenter defaultCenter] addObserver:self
            selector:@selector(splitViewWillResizeSubviewsHandler:)
            name:NSSplitViewWillResizeSubviewsNotification
            object:splitView]; 
```

拆分视图调整大小

```
NSView * leftSubView = [[splitView subviews] objectAtIndex:0];       
if ([leftSubView isHidden]) 
{
    [leftSubView setHidden:NO];
    [splitView setPosition:0 ofDividerAtIndex:0];
}
else 
{
    [leftSubView setHidden:YES];
}
[splitView adjustSubviews];
    [[NSNotificationCenter defaultCenter] postNotificationName:NSSplitViewWillResizeSubviewsNotification object:self userInfo:nil]; 
```

我可以调整 splitView 的大小。我应该在哪里添加动画代码。（当 rightView 移动以替换 leftSubView 时，我希望调整大小发生一些延迟）？

我在调整大小之前和之后都有两个视图的矩形。我应该在哪里编写动画代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:32:22.967

我能够解决动画。以下代码对我有用

```
-(IBAction)resizeViews:(id)sender
    {
        NSSplitView *splitView = [self splitView];
        NSView * leftSubView = [[splitView subviews] objectAtIndex:0];
        NSView * rightSubView = [[splitView subviews] objectAtIndex:1];
        NSLog(@"splitView Frame %@",NSStringFromRect(splitView.frame));
        NSLog(@"left Frame %@",NSStringFromRect(leftSubView.frame));
        NSLog(@"right Frame %@",NSStringFromRect(rightSubView.frame));

        self.lastLeftViewWidth = leftSubView.frame.size.width;

        NSMutableDictionary *collapseMainAnimationDict = [NSMutableDictionary dictionaryWithCapacity:2];
        [collapseMainAnimationDict setObject:rightSubView forKey:NSViewAnimationTargetKey];
        NSRect newRightSubViewFrame = rightSubView.frame;
        newRightSubViewFrame.size.width =  splitView.frame.size.width;
        [collapseMainAnimationDict setObject:[NSValue valueWithRect:newRightSubViewFrame] forKey:NSViewAnimationEndFrameKey];

        NSMutableDictionary *collapseInspectorAnimationDict = [NSMutableDictionary dictionaryWithCapacity:2];
        [collapseInspectorAnimationDict setObject:leftSubView forKey:NSViewAnimationTargetKey];
        NSRect newLeftSubViewFrame = leftSubView.frame;
        newLeftSubViewFrame.size.width = 0.0f;
        newLeftSubViewFrame.origin.x = splitView.frame.size.width;
        [collapseInspectorAnimationDict setObject:[NSValue valueWithRect:newLeftSubViewFrame] forKey:NSViewAnimationEndFrameKey];

        NSViewAnimation *collapseAnimation = [[NSViewAnimation alloc] initWithViewAnimations:[NSArray arrayWithObjects:collapseMainAnimationDict, collapseInspectorAnimationDict, nil]];
        [collapseAnimation setDuration:0.60f];
        [collapseAnimation startAnimation];
        [splitView adjustSubviews];
        [splitView setNeedsDisplay:YES];
    }

-(IBAction)normalizeViews:(id)sender
{
    NSView * left = [[self.splitView subviews] objectAtIndex:0];
    NSView * right = [[self.splitView subviews] objectAtIndex:1];
    NSLog(@"splitView Frame %@",NSStringFromRect( self.splitView.frame));
    NSLog(@"left Frame %@",NSStringFromRect( left.frame));
    NSLog(@"right Frame %@",NSStringFromRect( right.frame));
//    [right setFrame: NSMakeRect(0, right.frame.origin.y, right.frame.size.width-118, right.frame.size.height)];
//    [left setFrame:NSMakeRect(0, 0, 118, left.frame.size.height)];

    left.hidden = NO;

    NSMutableDictionary *expandMainAnimationDict = [NSMutableDictionary dictionaryWithCapacity:2];
    [expandMainAnimationDict setObject:right forKey:NSViewAnimationTargetKey];
    NSRect newMainFrame = right.frame;
    newMainFrame.size.width =  self.splitView.frame.size.width-self.lastLeftViewWidth;
    [expandMainAnimationDict setObject:[NSValue valueWithRect:newMainFrame] forKey:NSViewAnimationEndFrameKey];

    NSMutableDictionary *expandInspectorAnimationDict = [NSMutableDictionary dictionaryWithCapacity:2];
    [expandInspectorAnimationDict setObject:left forKey:NSViewAnimationTargetKey];
    NSRect newInspectorFrame = left.frame;
    newInspectorFrame.size.width = self.lastLeftViewWidth;
    newInspectorFrame.origin.x = self.splitView.frame.size.width-self.lastLeftViewWidth;
    [expandInspectorAnimationDict setObject:[NSValue valueWithRect:newInspectorFrame] forKey:NSViewAnimationEndFrameKey];

    NSViewAnimation *expandAnimation = [[NSViewAnimation alloc] initWithViewAnimations:[NSArray arrayWithObjects:expandMainAnimationDict, expandInspectorAnimationDict, nil]];
    [expandAnimation setDuration:0.60f];
    [expandAnimation startAnimation];
    [self.splitView adjustSubviews];
    [self.splitView setNeedsDisplay:YES];
} 
```

以下链接帮助我解决了这个问题

[如何用动画展开和折叠 NSSplitView 子视图？](https://stackoverflow.com/questions/6315091/how-to-expand-and-collapse-nssplitview-subviews-with-animation?rq=1)

# c# - ASP.Net Ajax UpdatePanel 仅在页面准备好后加载

> ID：11223269
> 
> 赞同：1
> 
> 时间：2012-06-27T09:36:28.637
> 
> 标签：c#, asp.net, asp.net-ajax

我正在使用`ASP.Net AJAX` `UpdatePanel`加载页面的右侧部分。

由于该部分需要一些时间来加载，我想在页面的其他部分加载后加载它。

我可以使用正常的`AJAX`，也可以使用`ASP.Net AJAX`后者，因为我想尝试一下。

我发现我`UpdatePanel`的总是加载。

我希望它仅在页面准备好后才加载。

有些人说要使用计时器，有些人说要使用一些javascript。

但我仍然无法完成它。

所以，这是我的 2 个障碍，在页面开始时停止加载并在页面准备好时开始加载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:45:09.347

为什么不启用和禁用页面事件？例如。尝试在 Page_PreLoad 事件中，将更新面板的启用属性设置为 False。在 Page_LoadComplete 事件中，将其设置回 enabled = true

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:46:32.373

UpdatePanels 使用 Ajax 进行更新，而不是在第一次加载时。

如果您希望它在第一次加载时快速加载，请避免任何昂贵的处理、加载时的数据库调用。把它们放在一个

```
if(IsPostBack)
{
  //your long processing
} 
```

现在使用[AsyncPostBackTrigger](http://msdn.microsoft.com/en-us/library/system.web.ui.asyncpostbacktrigger.aspx)进行 updatePanel 回发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:57:16.790

尝试使用此代码（条件模式 + 更新方法）

```
<asp:UpdatePanel ID="YourIdPanel" UpdateMode="Conditional"                                  runat="server">

//In order to force loading
YourIdPanel.Update(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T05:59:56.633

```
<script type="text/javascript">
    var currentItemID=$('#<%= labcurrentItemID.ClientID %>').html();
    if (currentItemID != null) {
        $(document).ready(function () { 
            $('#main_container').load('/Custom/Going%20Places/PopularRelatedArticle.aspx?currentID=' + currentItemID);
        });
    }
    else {
        $(document).ready(function () { 
            $('#main_container').load('/Custom/Going%20Places/PopularRelatedArticle.aspx?currentID={7F0811A7-D484-4675-8A23-0AEB235B9B5F}');
        });
    }
</script> 
```

# google-app-engine - 如何在 Google AppEngine 中的自定义域上激活 SSL？

> ID：11223280
> 
> 赞同：3
> 
> 时间：2012-06-27T09:36:59.773
> 
> 标签：google-app-engine, ssl

我可以通过自定义 (http) 域为我的 AppEngine 站点提供服务，但在“域设置”中看不到“SSL”子选项卡。

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:51:29.270

用于自定义域的 SSL 尚未启动。然而，观察者可能已经注意到（文档、管理控制台、1.7.0 发行说明），发布迫在眉睫。请继续关注[博](http://googleappengine.blogspot.com/)文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:47:56.887

不确定，但原因可能是 - 您必须有一个启用了计费的 App Engine 应用程序，该应用程序至少清除了一项计费费用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:01:49.657

您是否已将应用配置为使用自定义域？在您这样做之前，子选项卡不会出现。

[https://developers.google.com/appengine/docs/domain](https://developers.google.com/appengine/docs/domain)

# richfaces - 未在 a4j 上调用操作：带有内部 a4j 的命令按钮：支持 onclick 事件

> ID：11223283
> 
> 赞同：1
> 
> 时间：2012-06-27T09:37:01.757
> 
> 标签：richfaces, jsf-1.2

我正在使用**JSF 1.2**和**RichFaces 3.3.3**。我在使用 Twitter Bootstrap 设计的页面上工作。我需要处理这样的订单操作：

1.  用户点击页面上的操作按钮，
2.  一个模态对话框打开并要求用户确认操作（如果用户取消操作，过程当然在这里结束），
3.  在确认的情况下，对话框的内容从确认文本更改为其他一些内容以遵循操作处理（在某些情况下显示进度条，例如，在代码中只是一个等待文本），
4.  操作完成后，对话框消失。

所以我需要同时做两件事，交替对话内容并在页面bean中启动一个动作。今天，我可以更改对话内容，但未处理在我的 bean 中启动的操作...为此，我在我的 bean 中使用一个标志来切换对话内容，由 a4j:support 修改a4j:commandButton 中的 onclick （在正常调用的操作之前执行）执行操作。

```
<a4j:commandButton 
    type="button"
    value="#{common.COMMON_Confirm}"
    styleClass="btn btn-danger"
    action="#{orderDetailBean.cancelOrder}"
    oncomplete="showCancelOrderModal(false);">
    <a4j:support 
        event="onclick" 
        actionListener="#{orderDetailBean.startProcessingMainAction}"
        reRender="cancelOrderForm" />
</a4j:commandButton> 
```

也许这种方法是错误的……我只成功地完成了一次！现在我花了很多时间让它再次工作，一些帮助应该很好。请注意，我自几周以来就自学了 JSF 和 RichFaces。

**现在，代码。**

在我的网页的一些代码下面，首先是启动进程的按钮（通过 javascript 函数打开对话框），然后是 Twitter Bootstrap 对话框本身。

```
<!-- Main action button -->
<h:form>
    <a4j:commandButton 
        id="cancelOrder"
        styleClass="btn btn-danger btn-large"
        style="width: 100%; margin-bottom: 7px;"
        value="#{app.ACTION_OrderCancel}"
        oncomplete="showCancelOrderModal(true);"
        reRender="cancelOrderForm" />
</h:form>

<script type="text/javascript">
    function showCancelOrderModal(visible) {
        jQuery( function($) {
            $('#cancelOrderModal').modal(visible ? 'show' : 'hide');
        });
    }
</script>

<!-- Cancel order modal -->
<div class="modal modal-narrow modal-small hide fade" id="cancelOrderModal">
    <div class="modal-header">
        <h3>
            <h:outputText value="#{app.MODAL_CancelOrderTitle}" />
        </h3>
    </div>
    <a4j:form id="cancelOrderForm">
        <a4j:outputPanel 
            id="cancelOrderConfirm"
            rendered="#{!orderDetailBean.processingAction}">
            <div class="modal-body">
                <p>
                    <h:outputText value="#{app.MODAL_CancelOrderConfirm}" />
                </p>
            </div>
            <div class="modal-footer">
                <a href="#" 
                    class="btn btn-primary" 
                    data-dismiss="modal">
                    #{common.COMMON_Cancel}
                </a>
                <a4j:commandButton 
                    type="button"
                    value="#{common.COMMON_Confirm}"
                    styleClass="btn btn-danger"
                    action="#{orderDetailBean.cancelOrder}"
                    oncomplete="showCancelOrderModal(false);">
                    <a4j:support 
                        event="onclick" 
                        actionListener="#{orderDetailBean.startProcessingMainAction}"
                        reRender="cancelOrderForm" />
                </a4j:commandButton>
            </div>
        </a4j:outputPanel>
        <a4j:outputPanel 
            id="cancelOrderWait"
            rendered="#{orderDetailBean.processingAction}">
            <div class="modal-body">
                <h:outputText value="#{app.MODAL_CancelWait}" />
            </div>
        </a4j:outputPanel>
        <a4j:poll 
            id="cancelOrderPoll"
            interval="1000"
            enabled="#{orderDetailBean.processingAction}"
            reRender="cancelOrderPoll, cancelOrderWait" />
    </a4j:form>
</div> 
```

和我的 bean 中的代码

```
private boolean processingAction;

public void startProcessingMainAction(ActionEvent event) {
    logger.debug("Set processing order main action to TRUE");
    processingAction = true;
}

public String cancelOrder() {
    logger.debug("Start to cancel order with id " + order.getId());
    try {
        processingAction = true;
        cancelProductionOrder(order.getId());
    }
    catch (Exception e) {
        logger.error("Unable to cancel production order" + order.getId(), e);
        addErrorMessage("An error occured cancelling order: " + e.getMessage(), null);
        return "error";
    }
    finally {
        processingAction = false;
    }
    return "";
} 
```

**那么，执行时会发生什么？**

对话框正在打开，在用户确认后对话框内容交替出现（所以 a4j:support 效果很好），但是因为没有调用 a4j:commandButton 操作，它的 oncomplete 立即执行并且我的对话框消失了。

我希望你能帮助我，这是我 UI 的重要组成部分，截止日期是周末 ^_^

* * *

*更新*我观察到一个随机行为。很少（现在 2 次），但有时，一切正常，并且在 99% 时不会调用 commandButton 的操作：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:04:20.700

操作完成后，您将重新呈现整个表单`<a4j:support>`。这样，表单的 HTML DOM 树将被丢弃并替换为来自 ajax 响应的树。`<a4j:commandButton>`这几乎与需要执行的默认操作同时发生。这里有竞争条件的手段。如果它发生*在*默认操作将被执行之前，那么它将永远不会被执行，因为源已经完全消失了。

具体的功能要求并不完全清楚，因为`startProcessingMainAction()`在给定的示例中没有任何意义，它似乎完全是多余的。但我认为您可以通过将`reRender`属性从移动`<a4j:support>`到来解决它`<a4j:commandButton>`，以便仅在默认操作完成时重新渲染它。或者更好的是，`<a4j:support>`完全删除它，你似乎根本不需要它。

# c++ - 复制和直接初始化行为不同的动机是什么？

> ID：11223285
> 
> 赞同：43
> 
> 时间：2012-06-27T09:37:16.060
> 
> 标签：c++, initialization, history, language-design

[与为什么调用复制构造函数而不是转换构造函数](https://stackoverflow.com/questions/11222076/why-is-copy-constructor-called-instead-of-conversion-constructor)有些相关？

初始化有两种语法，直接初始化和复制初始化：

```
A a(b);
A a = b; 
```

我想知道他们有不同定义行为的动机。对于副本初始化，涉及到一个额外的副本，我想不出那个副本有什么用途。由于它是临时副本，因此可以并且可能会对其进行优化，因此用户不能依赖它的发生-因此，额外的副本本身不足以引起不同的行为。所以为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T09:59:14.440

> 由于它是临时副本，因此可以并且**可能**会对其进行优化

这里的关键词*大概是*。该标准允许但不要求编译器优化副本。如果某些编译器允许此代码（优化），但其他编译器拒绝它（未优化），这将是非常不一致的。

所以标准规定了一种一致的处理方式——每个人都必须检查复制构造函数是否可访问，无论他们是否使用它。

这个想法是所有编译器都应该接受或拒绝代码。否则它将是不可移植的。

* * *

另一个例子，考虑

```
A a;
B b;

A a1 = a;
A a2 = b; 
```

当复制构造函数是私有的时，允许`a2`但禁止同样不一致。`a1``A`

* * *

我们还可以从标准文本中看到初始化类对象的两种方法是不同的（8.5/16）：

> 如果初始化是直接初始化，或者如果是复制初始化，其中源类型的 cv 非限定版本与目标类相同或派生类，则考虑构造函数。枚举了适用的构造函数（13.3.1.3），并通过重载决议（13.3）选择最佳构造函数。调用如此选择的构造函数来初始化对象，使用初始化表达式或*表达式列表*作为其参数。如果没有构造函数适用，或者重载决议不明确，则初始化格式错误。
> 
> 否则（即，对于剩余的复制初始化情况），可以从源类型转换到目标类型或（当使用转换函数时）到其派生类的用户定义转换序列被枚举，如 13.3 中所述。 1.4，最好的一个是通过重载决议（13.3）选择的。如果转换无法完成或不明确，则初始化格式错误。以初始化表达式作为参数调用所选函数；如果函数是构造函数，则调用初始化目标类型的 cv 非限定版本的临时版本。临时是prvalue。然后根据上述规则，调用的结果（对于构造函数的情况是临时的）用于直接初始化作为复制初始化目标的对象。在某些情况下，允许实现通过将中间结果直接构造到正在初始化的对象中来消除这种直接初始化中固有的复制；见 12.2、12.8。

不同之处在于直接初始化直接使用构造类的构造函数。使用复制初始化，会考虑其他转换函数，这些函数可能会产生一个必须被复制的临时函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T10:27:09.853

只是一种猜测，但如果没有 Bjarne Stroustrup 确认它的真实情况，恐怕很难更确定：

之所以这样设计，是因为假定程序员会期望这种行为，即他会期望在使用 = 符号时完成复制，而不是使用直接初始化语法来完成。

我认为可能的复制省略仅在标准的更高版本中添加，但我不确定 - 这是有人可以通过检查标准历史来确定的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T09:40:11.040

Take the following example:

```
struct X
{
    X(int);
    X(const X&);
};

int foo(X x){/*Do stuff*/ return 1; }
X x(1);
foo(x); 
```

In the compilers I tested, the argument to `foo` was always copied even with full optimization turned on. From this, we can gather that copies *will not/must not* be eliminated in all situations.

Now lets think from a language design perspective, imagine all the scenarios you would have to think about if you wanted to make rules for when a copy is needed and when it isn't. This would be very difficult. Also, even if you were able to come up with rules, they would be very complex and almost impossible for people to comprehend. However, at the same time, if you forced copies everywhere, that would be very inefficient. This is why the rules are the way they are, you make the rules comprehensible for people to understand while still not forcing copies to be made if they can be avoided.

I have to admit now, this answer is very similar to Suma's answer. The idea is that you can expect the behavior with the current rules, and anything else would be too hard for people to follow.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-17T03:51:46.237

内置类型的初始化，例如：

```
int i = 2; 
```

是非常自然的语法，部分原因是历史原因（记住你的高中数学）。它比以下更自然：

```
int i(2); 
```

即使一些数学家可能会争论这一点。毕竟，调用函数（在这种情况下为构造函数）并传递参数并没有什么不自然的。

对于内置类型，这两种初始化类型是相同的。在前一种情况下没有额外的副本。这就是同时具有这两种类型的初始化的原因，并且最初并没有明确的意图使它们表现不同。

但是，存在用户定义的类型，并且该语言的既定目标之一是允许它们尽可能地表现为内置类型。

因此，复制构造（例如，从某个转换函数获取输入）是第一种语法的自然实现。

您可能有额外的副本并且它们可能会被忽略这一事实是对用户定义类型的优化。复制省略和显式构造函数在语言中出现的时间要晚得多。标准允许在使用一段时间后进行优化也就不足为奇了。此外，现在您可以从重载决议候选中消除显式构造函数。

# android - Sencha 原生包装与 android

> ID：11223287
> 
> 赞同：1
> 
> 时间：2012-06-27T09:37:24.050
> 
> 标签：android, extjs, sencha-touch-2

以下是我的配置文件（packager.json）

```
{
"applicationName":"Sencha",
"applicationId":"Sencha",
"iconName":"icon.png",
"versionString":"1.0",
"outputPath":"D:/wamp/www/sencha/mvc/",
"inputPath":"C:/wamp/www/sencha",
"webAppPath":"C:/wamp/www/sencha",
"androidAPILevel":"15",
"configuration":"Debug",
"platform":"AndroidEmulator",
"deviceType":"Universal",
"certificatePath":"debug.keystore",
"certificateAlias":"androiddebugkey",
"sdkPath":"C:\Program Files\Android\android-sdk",
"orientations": [
    "portrait",
    "landscapeLeft",
    "landscapeRight",
    "portraitUpsideDown"
]
} 
```

我还为调试模式创建了证书。

以下是我用来生成证书文件的命令

```
keytool.exe -genkey -v -keystore debug.keystore -alias androiddebugkey -keyalg RSA -keysize 2048 -validity 10000 
```

然后，

```
D:\wamp\www\sencha>sencha package run packager.json 
```

命令没有给出错误。这个命令是假设生成 .apk 文件，对吗？？但什么也没发生？

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:18:46.843

似乎 android-sdk 路径中的反斜杠可能会导致问题。

更改`"sdkPath":"C:\Program Files\Android\android-sdk",` 为`"sdkPath":"C:/Program Files/Android/android-sdk",`。

也尝试`sencha package build <packager json filename>`而不是`sencha package run <packager json filename>`作为运行命令需要一个正在运行的模拟器。

对我来说，它还需要“certificatePassword”作为打包程序 json 文件中的条目之一。如果有进一步的并发症，请回复我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T20:38:53.993

有同样的问题：

```
Sencha : Android Native Build - 错误 17: 无法加载 PKCS12 身份    

```

为了构建 Android Native 应用程序，我参考了 Sencha Doc (http://docs.sencha.com/touch/2-0/#!/...native_android)

```
 Step1:
    I created an Android Certificate using following command
    keytool -genkey -v -keystore athena.keystore -alias athena -keyalg RSA -keysize 2048 -validity 10000

    Step 2:
    Under Sencha-touch2-SDK directory, to build a apk file, I run following command:
    sencha app build native 

    with this I get following error: 
    ERROR 17: Unable to load PKCS12 identity from "/path/to/certificate.file"Failed to package application*

    Its not clear to me,
     if I need to user command jarsigner as follows:

    jarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 -keystore athena.keystore athenamobile.apk athena

    ( when I tried above command, I get message: jarsigner: unable to open jar file: athenamobile.apk)

    Here is my android.json:        
    { 
    "applicationName":"AthenaMobile",
    "applicationId":"com.mycompany.AthenaMobile",
    "versionString":"1.0",
    "versionCode":"1",
    "iconName":"resources/icons/Icon~ipad.png",
    "inputPath":"C:/sencha-touch-2.0.1.1/AthenaMobile",
    "outputPath":"C:/sencha-touch-2.0.1.1/AthenaBuild",
    "configuration":"Release",
    "platform":"Android",
    "deviceType":"Universal",
    "certificatePath":"c:/athena.keystore",
    "certificatePassword":"athena", 
    "certificateAlias":"athena",
    "sdkPath":"c:/android-sdk-windows",
    "androidAPILevel":"16",
    "orientations": [
    "portrait",
    "landscapeLeft",
    "landscapeRight",
    "portraitUpsideDown"
    ]
    }

    Please note that,
    I did try command "sencha package run android.json" (as per doc),
    and hit with following errors:**

    Added file C:\sencha-touch-2.0.1.1\AthenaBuild\proguard-project.txt
    Buildfile: C:\sencha-touch-2.0.1.1\AthenaBuild\build.xml

    -set-mode-check:

    -set-release-mode:
    jarsigner: unable to open jar file: C:\sencha-touch-2.0.1.1\AthenaBuild\\
    enaMobile-release-unsigned.apk
    ""c:\android-sdk-windows\tools\android" create project --target android-1
    e AthenaMobile --activity STActivity --path "C:\sencha-touch-2.0.1.1\Athe
    \/" --package com.mycompany.AthenaMobile"
    Could not sign application with error: 1
    Failed to package application
    [ERROR]
    BUILD FAILED
    C:\android-sdk-windows\tools\ant\build.xml:1070: com.sun.org.apache.xerce
    nal.impl.io.MalformedByteSequenceException: Invalid byte 1 of 1-byte UTF-
    nce.
    at com.sun.org.apache.xerces.internal.impl.io.UTF8Reader.invalidB
    8Reader.java:684)
    at com.sun.org.apache.xerces.internal.impl.io.UTF8Reader.read(UTF 
```

# java - Find a Lib 解析移动设备的用户代理字符串

> ID：11223288
> 
> 赞同：2
> 
> 时间：2012-06-27T09:37:26.423
> 
> 标签：java, user-agent

我想编写一个解析`User Agent String`来自`Mobile Devices`.

我要提取的信息是：

*   操作名称

*   操作版本

*   设备类型

*   浏览器名称

*   浏览器版本

我搜索了一些 Java 库：

*   [用户代理工具](http://code.google.com/p/user-agent-utils/)

*   [WURFL](http://wurfl.sourceforge.net/) - 无线通用资源文件

因为我曾经`UserAgentUtils`从 PC 请求中解析用户代理字符串。

但它没有重点`Mobile Devices`。

我也试过`WURFL`了，很好。

你能推荐我其他的Lib吗？

我想找到一个解析用户代理字符串焦点的库`Mobile Devices`。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T15:23:41.923

我在基于 user-agent-string.info 数据库的用户代理解析器库（称为 UADetector ）上工作[了](http://user-agent-string.info)[一段](http://uadetector.sourceforge.net)时间。目前只能区分移动浏览器而不是移动设备。但是我们可以扩展这个库来扫描不同的签名。

为了开发更方便的访问，我们可以在类中构建一个 Signature-Enum`UserAgent`作为一个集合，如下所示：

`Set<Signature> getSignatures();`

我们还可以添加一些 Is-Methods：

`boolean isNexus();`

`boolean isIPhone();`

`boolean isIPad();`

等等

但是对于这一步，我目前需要您（和/或其他开发人员）的一些输入/支持来收集移动设备签名（在用户代理字符串中）。

# delphi - Delphi 7 中 Application.OnActivate 的意外行为

> ID：11223297
> 
> 赞同：7
> 
> 时间：2012-06-27T09:38:01.117
> 
> 标签：delphi, delphi-7

我编写了一个 D7 应用程序来测试 Application.OnActivate 的行为。
这是相关部分：

```
procedure TMainForm.FormCreate (Sender: TObject);
begin
Memo1.Lines.Add (IntToStr (Memo1.Lines.Count + 1) + ' - MainForm.FormCreate - Begin');

  Application.OnActivate := AppActivate;

Memo1.Lines.Add (IntToStr (Memo1.Lines.Count + 1) + ' - MainForm.FormCreate - End');
end;

procedure TMainForm.AppActivate (Sender: TObject);
begin
Memo1.Lines.Add (IntToStr (Memo1.Lines.Count + 1) + ' - MainForm.AppActivate - Begin');

  ShowWidthsHeights (Sender);

Memo1.Lines.Add (IntToStr (Memo1.Lines.Count + 1) + ' - MainForm.AppActivate - End');
end;

procedure TMainForm.ShowWidthsHeights (Sender: TObject);

begin
Memo1.Lines.Add (IntToStr (Memo1.Lines.Count + 1) + ' - MainForm.ShowWidthsHeights -     Begin');

Memo1.Lines.Add (IntToStr (Memo1.Lines.Count + 1) + ' - MainForm.ShowWidthsHeights -     End');
end; 
```

启动应用程序后，Memo1 的内容为：
1 - MainForm.FormCreate - Begin
2 - MainForm.FormCreate - End
3 - MainForm.AppActivate - Begin
4 - MainForm.ShowWidthsHeights - Begin
5 - MainForm.ShowWidthsHeights - End
6 - MainForm。 AppActivate - 结束

那是对的 。

但是，如果我然后单击任务栏中的快捷方式，这 4 行将添加到 Memo1：
7 - MainForm.AppActivate - Begin
8 - MainForm.ShowWidthsHeights - Begin
9 - MainForm.ShowWidthsHeights - End
10 - MainForm.AppActivate - End

为什么D7会这样做？
我的应用程序没有被激活，相反，它已经被停用了！

* * *

为了测试 Application.OnDeactivate 事件是否也被触发，我添加了这个事件处理程序：

```
procedure TMainForm.AppDeactivate(Sender: TObject);
begin
Memo1.Lines.Add (IntToStr (Memo1.Lines.Count + 1) + ' - MainForm.AppDeactivate - Begin');

Memo1.Lines.Add (IntToStr (Memo1.Lines.Count + 1) + ' - MainForm.AppDeactivate - End');
end; 
```

并将此语句添加到 TMainForm.FormCreate ：

```
Application.OnDeactivate := AppDeactivate; 
```

启动应用程序后，Memo1 包含与原始案例相同的 6 行，但单击任务栏中的快捷方式会导致 Memo1 中多出 8 行：

```
7 - MainForm.AppDeactivate - Begin  
8 - MainForm.AppDeactivate - End  
9 - MainForm.AppActivate - Begin  
10 - MainForm.ShowWidthsHeights - Begin  
11 - MainForm.ShowWidthsHeights - End  
12 - MainForm.AppActivate - End  
13 - MainForm.AppDeactivate - Begin  
14 - MainForm.AppDeactivate - End 
```

所以，我的应用程序被停用，然后被激活，然后再次被停用！
这很令人困惑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:11:04.217

正如大卫已经说过的那样，它反映了`WM_ACTIVATE`信息的接收。[http://msdn.microsoft.com/en-us/library/windows/desktop/ms632614(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632614(v=vs.85).aspx)给出了答案：

> 当属于与活动窗口不同的应用程序的窗口即将被激活时发送。该消息被发送到正在激活其窗口的应用程序和正在停用其窗口的应用程序。

并且消息的参数进一步解释：

*w参数：*

> 指示窗口是被激活还是被停用。如果正在激活窗口，则此参数为 TRUE；如果窗口被停用，则为 FALSE。

# c# - C# 使用库 - 从源代码编译？真的吗？

> ID：11223300
> 
> 赞同：1
> 
> 时间：2012-06-27T09:38:17.213
> 
> 标签：c#, compilation

我对C#不是很有经验，用它做了一些小东西，但它与Java非常相似，只是不同，所以没有大惊小怪。对于我当前的项目，我需要一个小型 Web 服务器。所以我一直在环顾四周，发现很多人都在做基于 HttpListener 的事情。太好了，我可以做到，但我也遇到了 Kayak 网络服务器（https://github.com/kayak/kayak），我认为使用更老练的框架可能是个好主意。

所以我开始尝试将它添加到我的项目中；搜索要添加的 DLL。但似乎我想检查源代码并使用 Rake 编译它。真的吗？C# 中的框架是这样分布的吗？'旧'风格的Unix“请编译我”？期待像 Maven 这样的东西可能太多了，但是......或者这是一个例外？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T09:40:04.947

一些开源项目需要您从头开始编译 - 其他项目提供[NuGet](http://nuget.org/)包。例如，通常项目在达到 v1.0 之前不会有预打包的构建。

在 Kayak 的情况下，有*一个*NuGet[包](http://nuget.org/packages/kayak)，所以这可能是您应该使用的。

请注意，NuGet 只是“相当”的新项目（最近几年），所以会有一些旧的、稳定的项目，它们最近不需要任何更改，可能没有包，你很可能会发现很多开发人员会*使用*不熟悉 NuGet 的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T09:40:34.480

您肯定在寻找： http: [//nuget.org/packages/kayak](http://nuget.org/packages/kayak)

[NuGet](http://nuget.org/)可以从命令行使用，也可以作为 Visual Studio 插件使用——两者都运行良好。

# c# - 跨域 Active Directory 身份验证

> ID：11223301
> 
> 赞同：0
> 
> 时间：2012-06-27T09:38:18.403
> 
> 标签：c#, active-directory, ldap

我们有一个网站在不同的 AD 域上运行，然后我们需要进行身份验证。出于我不会进入的原因，我们不能允许他们之间的信任。

所以我们有：

Rackspace.Domain
SuperDuperEnterpriseDomain

该网站在其域下的机架空间中运行，我们需要确保它们已通过身份验证

有没有办法在 C# 中检查用户是否存在于另一个域中？如果有怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:26:46.377

假设您获得 SuperDuperEnterpriseDomain 的用户名和密码，请使用[`DsBindWithCred`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675961(v=vs.85).aspx). 请注意，即使凭据在技术上有效（例如帐户被锁定），此功能也会因访问被拒绝而失败。由于您未加入目标域，因此您将无法调用 LogonUser 以获取有关凭据无效原因的更详细信息。

有关代码，请参阅我[对另一个问题的回答](https://stackoverflow.com/a/12676430/628981)。如果您不介意安全隐患，可以将 SecureString 替换为常规字符串。

# version-control - Perforce 超级用户丢失

> ID：11223302
> 
> 赞同：4
> 
> 时间：2012-06-27T09:38:20.740
> 
> 标签：version-control, perforce

我正在使用 Perforce 服务器，但唯一的超级用户帐户丢失了，因为 Perforce 支持人员（使用超级用户帐户）离开了公司并且没有写下超级用户帐户详细信息。我的团队依赖于 perforce 服务器。我现在可以做些什么来重新获得对它的管理控制？我确实拥有托管 perforce 服务器的 Windows 服务器的管理权限。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T09:43:06.103

在互联网上的快速搜索显示 Perforce 经常被问到这个问题，他们对此做了一些事情：这是他们知识库文章的[链接。](https://community.perforce.com/s/article/2492)

以下是文章中对问题的描述：

> 由于以下情况，超级用户无法访问 Perforce 数据库：
> 
> *   当保护表中列出的唯一超级用户帐户被意外删除，但仍保留在保护表中时
> *   超级用户帐号的所有者忘记了超级用户帐号密码

修复背后的想法是停止服务器，移开`db.protect`，弹回服务器，使用任何其他帐户更改密码，然后移`db.protect`回，并再次弹回服务器。

# c++ - OS X Lion 上的 32 位 OpenCV？可能的？

> ID：11223305
> 
> 赞同：3
> 
> 时间：2012-06-27T09:38:25.900
> 
> 标签：c++, opencv, xcode4, osx-lion, 32bit-64bit

我一直在谷歌搜索和尝试几天，试图弄清楚如何让 32 位 OpenCV 在 OS X Lion 上运行，但只能找到 64 位版本。

所以我有以下问题：

**OpenCV 库有 32 位或 64 位架构，对吗？**

如何让 32 位 OpenCV 在 Lion 上运行？我尝试了以下方法： - 通过 MacPorts 安装 OpenCV：不，MacPorts 安装 64 位版本。BI 删除了 OpenCV 和 MacPorts。

*   使用以下命令通过 Homebrew 安装 OpenCV 2.4.1：

酿造安装 opencv --build32

但看起来它们也是 64 位的。删除了 OpenCV 和 Homebrew。

*   使用标准的 unix makefile 自己安装 OpenCV 2.4.1。不，它们看起来仍然像 64 位。

我写了“它们看起来像 64 位”，因为我必须在针对 32 位 Mac 的 OS X Snow Leopard 下制作的 Xcode 项目中替换 OpenC，而且我总是遇到大量错误，例如：

ld：警告：忽略文件/usr/local/Cellar/opencv/2.4.1/lib/libopencv_calib3d.2.4.1.dylib，文件是为不受支持的文件格式构建的，它不是被链接的体系结构（i386）

所以我想 OpenCV 的东西是 64 位的。如果我强制项目以 64 位运行，它会摩擦但无法正常工作并卡住。

**是否有标准方法来检查我的 OpenCV 库是 64 位还是 32 位？**

**我在哪里可以获得 32 位 OpenCV？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T17:56:35.803

解决了这个问题。

**回顾：在 64 位 Mac OSX Lion 上可以有 32 位 OpenCV 库。**

如何？

第 1 步：下载 OpenCV 2.4.0

第 2 步：下载并安装 CMake。

第 3 步：解压 OpenCV 包。

第 4 步：在 OpenCV 包中创建一个单独的目录用于构建

```
mkdir build
cd build
cmake -G "Unix Makefiles" -D CMAKE_OSX_ARCHITECTURES=i386 -D CMAKE_C_FLAGS=-m32 -D CMAKE_CXX_FLAGS=-m32 .. 
```

（这将强制 32 位编译）

```
make -j8
sudo make install 
```

第5步：享受！

如需更多参考，请访问[Mac OS X OpenCV 端口页面](http://opencv.willowgarage.com/wiki/Mac_OS_X_OpenCV_Port)

感谢大家让我走上正轨：

**@karlphilip**：我尝试按照您的建议进行操作，但是如果没有 make 选项，编译阶段将失败，因为架构不连贯。

**@hamstergene**：MacPorts 在新安装后卡住了，也许我还有一些旧安装的残留物:(（奇怪，我按照官方说明删除了它）。

**@Adrien**：这就是我所做的，但我必须合并两种方法:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T08:21:07.733

我很难在许多不同的操作系统上配置 OpenCv 库。事实证明，事情是自动生成一个示例项目，然后在其中构建业务逻辑。

[请参阅此处的安装说明](http://opencv.willowgarage.com/wiki/InstallGuide)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-11T08:06:41.150

OpenCV 项目的网站在去年进行了重大升级。提供了一个新的[教程部分](http://opencv.org/quickstart.html)，我能够在我的 32 位核心 Mac OS Lion 上安装 OpenCV。

[Sadeep 的技术博客](http://sadeepj.blogspot.com/2012/03/installing-and-configuring-opencv-to.html)上也提供了一个非常酷的教程，涵盖了一系列有趣的细节。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T12:41:38.937

您可以尝试以下方法：下载 OpenCV 2.4 源代码并编辑根目录中的**CMakeLists.txt**。在第 242 行附近，您将看到：

```
# ----------------------------------------------------------------------------
#  Path for build/platform -specific headers
# ----------------------------------------------------------------------------
set(OPENCV_CONFIG_FILE_INCLUDE_DIR "${CMAKE_BINARY_DIR}/" CACHE PATH "Where to create the platform-dependant cvconfig.h")
add_definitions(-DHAVE_CVCONFIG_H)
ocv_include_directories(${OPENCV_CONFIG_FILE_INCLUDE_DIR}) 
```

在通话下方`add_definitions()`，添加以下内容：

```
 add_definitions(-m32) 
```

# c++ - 使用 C/C++ Socket 模拟网络条件

> ID：11223306
> 
> 赞同：15
> 
> 时间：2012-06-27T09:38:32.223
> 
> 标签：c++, sockets, networking, network-programming, emulation

我正在寻找一种将网络仿真添加到套接字的方法。

基本的解决方案是通过某种方式为连接增加带宽限制。

对我来说理想的解决方案是：

*   支持高级网络属性（延迟、丢包）
*   开源
*   具有与标准套接字类似的 API（或环绕它们）
*   在 Windows 和 Linux 上工作
*   支持 IPv4 和 IPv6

我看到了一些在系统级别上工作的选项，甚至作为代理（Dummynet、WANem、neten 等），但这对我不起作用，因为我希望能够手动模拟每个套接字（例如,开一个模拟modem的socket，一个模拟3G的socket。基本上我想知道这些工具是怎么做的。

**编辑：**我需要将此功能嵌入到我自己的产品中，因此使用额外的盒子或需要手动配置的第三方工具是不可接受的。我想编写与那些工具做同样事情的代码，我的问题是如何去做。

**结语：**事后看来，我的问题有点误导。显然，没有办法直接在套接字上做我想做的事。有两种选择：

*为发送/接收操作添加延迟*（基于@PaulCoccoli's answer）：
通过在发送和接收之前添加延迟，您可以获得非常粗略的网络模拟（延迟的恒定延迟，延迟发送，每次发送不超过 X 字节第二，带宽）。
保罗的回答和评论给了我很大的启发，所以我奖励了他。

*添加网络模拟逻辑作为代理*（基于@m0she 等人
的回答）：要么通过代理发送请求，要么使用代理拦截请求，然后添加所需的模拟。然而，使用现成的解决方案而不是编写自己的代理实现更有意义——据我所知， [Dummynet](http://info.iet.unipi.it/~luigi/dummynet/)可能是最好的选择（这就是webpagetest.org 所做的）。其他选项在下面的答案中，我还会添加[DonsProxy](http://donsproxy.moneybender.com/)
这是更好的方法，所以我接受这个答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T16:11:53.587

您可以将代理编译到您的软件中来执行此操作。它可以是完全成熟的 socks 代理的一些实现（如[this](http://antinat.sourceforge.net/build.shtml)），或者可能更好，更简单的只为您的目的服务（并且不需要在您的通信前加上目的地和其他 socks 开销）。该代码可以作为单独的进程或进程中的线程运行。

向代理添加限制应该不会太难。你可以：

*   如果超过某些带宽限制，则延迟数据转发
*   通过在缓冲区的读/写操作之前添加计时器来增加延迟。
*   如果您使用基于连接的协议（如 TCP），丢弃数据包将毫无意义，但使用基于数据报的协议（UDP）也很容易实现。

连接创建 API 会与普通的 posix/winsock 有点不同（除非你做一些宏或其他魔法），但其他一切（发送/接收/选择/关闭/等等）都是一样的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T18:55:11.700

如果您要将它构建到您的产品中，那么您应该在套接字 API 上实现一个抽象层，以便您可以在运行时选择自己的实现。或者，您可以实现每个套接字函数的包装器，并选择是调用自己的版本还是系统的版本。

至于增加延迟，您可以让套接字 API 的实现脱离线程。在那个线程中，有一个按时间排序的优先级队列（即这个后台线程进行非常基本的离散事件模拟）。您发送或接收的每个“数据包”都可以与交付时间一起排队。每个交货时间都应该增加一些延迟。我会使用某种具有高斯分布的随机数生成器。

后台线程还必须模拟连接的另一端，尽管听起来您可能已经实现了那部分？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T11:06:19.223

我只知道 Mac OS X Lion 的网络链接调节器。你应该是 mac 开发者才能下载它，所以我不能把下载链接放在那里。仅来自 9to5mac.com 的描述：http: [//9to5mac.com/2011/08/10/new-in-os-x-lion-network-link-conditioner-utility-lets-you-simulate-internet-and-bandwidth -条件/](http://9to5mac.com/2011/08/10/new-in-os-x-lion-network-link-conditioner-utility-lets-you-simulate-internet-and-bandwidth-conditions/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T15:30:31.833

在使用 linux 时，此答案可能是您的部分解决方案： [Simulate delayed and dropped packet on Linux](https://stackoverflow.com/questions/614795/simulate-delayed-and-dropped-packets-on-linux)。它指的是一个名为[netem](http://www.linuxfoundation.org/collaborate/workgroups/networking/netem)的内核模块，可以模拟各种网络问题。

如果您想使用 TCP 连接，“数据包丢失”可能会有问题，因为许多错误处理（如恢复丢失的数据包）是在内核中完成的。以跨平台的方式进行模拟可能很困难。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T14:53:52.847

您通常会在网络中添加一个网络设备来限制带宽或延迟，逐个端口，然后您可以通过连接到分配给您要测试的特定类型的糟糕网络的端口来实现您想要的，使用无需更改或修改代码。

最简单的方法就是[将 iptables 规则添加](https://superuser.com/questions/66574/how-to-throttle-bandwidth-on-a-linux-network-interface)到充当代理的 Linux 服务器。

如果您希望它在没有单独设备的情况下工作，请尝试使用 tricle，这是一个可以在客户端 PC 上限制您的网络的软件包。（或[对于 Windows](https://stackoverflow.com/questions/1094760/network-tools-that-simulate-slow-network-connection)）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-13T15:43:18.837

您可能想查看 WANem [http://wanem.sourceforge.net/](http://wanem.sourceforge.net/)。WANEM 是开源的，并根据 GNU 通用公共许可证获得许可。

WANem 允许应用程序开发团队设置一个透明的应用程序网关，可用于模拟 WAN 特性，如网络延迟、数据包丢失、数据包损坏、断开连接、数据包重新排序、抖动等。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-16T18:58:42.220

如果您想要一个您可以控制的纯软件解决方案，您必须自己实现它。我知道没有这样的现有软件包。

虽然套接字上的包装层可能使您能够引入延迟，但引入丢失或无序交付是不够的。为了模拟这些活动，您实际上需要拦截两个 TCP 堆栈之间传输的数据。

我推荐的方法是使用隧道设备（比如`tunX`）。应该设置路由，以便客户端相信到服务器的方式是通过`tunX`。额外的代码（可能在不同的线程中运行）会在通过真正的物理接口转发数据包之前混杂地拦截 上的流量`tunX`，并执行您的增强行为，从而将流量发送到您的服务器。从物理接口上的服务器到达的数据包会发生相反的情况。这些数据包将被客户端代码拦截，行为增强，然后通过`tunX`.

但是，由于您正在测试客户端软件，我不清楚您为什么要将此代码嵌入到您发布的软件中，除非软件本身是 WAN 模拟客户端。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-18T09:00:39.787

我认为您可以使用[Network Simulator 之](http://www.akmalabs.com/downloads_netsim.php)类的工具。它是免费的，适用于 Windows。

唯一要做的就是设置您的程序以使用正确的端口（当然还有网络设置）。

# android - 单击项目并创建新的警报对话框后，如何终止具有 ListView 的 AlertDialog.Builder

> ID：11223309
> 
> 赞同：0
> 
> 时间：2012-06-27T09:38:40.680
> 
> 标签：android

我面临一个非常奇怪的问题。当我从 ListView 中单击一个项目时尝试启动和警告对话时。ListView 仍然在后台，并且启动的警报对话框出现在 ListView 上。一旦我单击确定/取消，ListView 就会再次出现在前台。我希望一旦从警报对话框中单击 OK/Cancel，ListView 和 alertdailogue 都会消失。

```
builder.setView(listview);
 listview.SetOnItemClickListener(new onItemClickListener{

public void onItemClick(AdapterView<?> parent, View view,int position, long id){

showsomedialogue();}

 }); 
```

感谢任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:47:48.423

我用以下方法做到了：

```
@Override
public void onItemClick(AdapterView<?> parent, View view,int position, long id) {
    // Do anything
    this.finish();
} 
```

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:01:20.167

根据您的要求，警告对话框应该是这样的

```
 AlertDialog.Builder adb=new AlertDialog.Builder(DealsActivity.this);
            adb.setTitle("Are You Sure Want To Delete?");
            adb.setPositiveButton("OK", new AlertDialog.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    //add code for  what u want on OK click event 
                    showsenderpasswrd();//this will create another dialogue and make                                                    //this in background.
                    YourActivity.this.finish();

                }});
            adb.setNegativeButton("CANCEL", new AlertDialog.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                           //add code for  what u want on Cancel click event 
                         YourActivity.this.finish();
                    }});
            adb.show(); 
```

# iphone - 我可以从 iPhone 中的照片中获取图像的名称吗

> ID：11223311
> 
> 赞同：4
> 
> 时间：2012-06-27T09:38:42.763
> 
> 标签：iphone, ios, uiimage, uiimagepickercontroller

我正在使用图像选择器从 iPhone 设备的图库中选择图像。我必须以与图库中相同的名称保存这些图像。我不想在选择图像后给它起不同的名字。选择图像后，我尝试打印信息字典。它给出了图像、url、路径和类型..但是如何获得图像的实际名称任何想法。以下是我在 didFinish 中得到的

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
{
NSLog(@"Selected image info: %@",info);

} 
```

这打印

```
Selected image info : (
        {
        UIImagePickerControllerMediaType = "public.image";
        UIImagePickerControllerOriginalImage = "<UIImage: 0x617d390>";
        UIImagePickerControllerReferenceURL = "assets-library://asset/asset.JPG?id=1000000089&ext=JPG";
        }
) 
```

我的问题是从上面获取实际名称的任何方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T09:54:51.910

使用 AssetsLibrary 框架，您可以从 info 字典中获取 referenceURL 并获取资产。像这样的东西：

```
NSURL *assetURL = [info objectForKey:UIImagePickerControllerReferenceURL];

__block NSString *fileName = nil;

ALAssetsLibrary *library = [[[ALAssetsLibrary alloc] init] autorelease];
[library assetForURL:assetURL resultBlock:^(ALAsset *asset)  {
    fileName = asset.defaultRepresentation.fileName;
} failureBlock:nil]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T10:32:51.940

从图库中挑选的图像，没有“名称”。您永远不会为刚从相机捕获的图片指定名称，即使您通过 iTunes 添加图像，原始文件名也会被删除并替换为 iTunes 理解用于同步的文件名。

这些文件名不适合程序员访问，因为它们可能会在未来的同步中被其他一些图像替换。

一个很好的方法是将当前日期指定为文件名，同时保存到从图库中挑选的图像。您可以将它保存在您的文档或库目录中，并使用映射 PList 文件将图像映射到它们的文件名。

或者，您也可以指定唯一编号作为文件名，并使用这些值访问图像。

尽管您提到您不想分配新名称，但不幸的是，这是解决此问题的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:43:54.293

我不认为他们有名字。我在我的应用程序中使用的是用`NSDate`（当前日期）作为名称保存它们。

# powerbuilder - 使用 powerbuilder 从 excel 写入和读取

> ID：11223315
> 
> 赞同：1
> 
> 时间：2012-06-27T09:39:02.880
> 
> 标签：powerbuilder

使用Powerbuilder“OLE”从excel表写入和读取的任何示例（我需要在excel表文件中写入值并在excel执行某些功能后读取其他值）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:45:32.343

以下是通过 OLE 访问 Excel 文件的示例：

```
int li_rtn
string ls_range
oleobject lole_excel, lole_workbook, lole_worksheet, lole_range
lole_excel = create oleobject
li_rtn = lole_excel.ConnectToNewObject("excel.application")
if li_rtn <> 0 then
      MessageBox( "Error", 'Error running MS Excel api.')
      destroy lole_Excel
else
  lole_excel.WorkBooks.Open("C:\some_path_to\sample.xls") 

  lole_workbook = lole_excel.application.workbooks(1)
  lole_worksheet = lole_workbook.worksheets(1)

  // Set the cell value
  lole_worksheet.cells(1,11).value = "Some value" //it is cells(line, column)

  //example to work on a range of cells
  ls_range = "A1:F"+string(ll_excel_rows)
  lole_range = lole_worksheet.Range(ls_range)
  lole_range.Select
  lole_range.Locked = True

  // Save
  lole_workbook.save()
  // Quit
  lole_excel.application.quit()
  lole_excel.DisconnectObject()

  destroy lole_Excel
end if 
```

`worksheet.cells`通过该属性可以轻松地读取和写入值。

唯一的问题是通过 OLE 在大量单元格上驱动 Excel 速度很慢。

# spring - 在 Eclipse 中集成 JSF 2、Spring 3.1 和 Hibernate 4.1

> ID：11223319
> 
> 赞同：0
> 
> 时间：2012-06-27T09:39:20.973
> 
> 标签：spring, hibernate, jakarta-ee, jsf-2, tomcat7

根据我之前[的问题集成 jsf2.0 和 spring 3.1 和 hibernate 4.1](https://stackoverflow.com/questions/11206876/integration-of-jsf2-0-and-spring-3-1-and-hibernate-4-1)

我认为我的代码有问题。我真的很困惑。我按照其他建议做了，但仍然收到错误 404：描述请求的资源 (/jsfspringhiber/default.xhtml) 不可用。我不使用maven。

客户.java

```
package main;
public class Customer{ 
    public long customerId;
    public String name;
    public String address;
    public String createdDate;
    public long getCustomerId() {
        return customerId;
    }
    public void setCustomerId(long customerId) {
        this.customerId = customerId;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getAddress() {
        return address;
    }
    public void setAddress(String address) {
        this.address = address;
    }
    public String getCreatedDate() {
        return createdDate;
    }
    public void setCreatedDate(String createdDate) {
        this.createdDate = createdDate;
    }
} 
```

CustomerBean.java

```
package main;
import java.io.Serializable;
import java.util.List;

import main.CustomerBo;
import main.Customer;

public class CustomerBean implements Serializable{

    CustomerBo customerBo;
    public String name;
    public String address;
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    public void setCustomerBo(CustomerBo customerBo) {
        this.customerBo = customerBo;
    }

    public CustomerBo getCustomerBo() {
        return customerBo;
    }

    //get all customer data from database
    public List<Customer> getCustomerList(){
        return customerBo.findAllCustomer();
    }

    //add a new customer data into database
    public String addCustomer(){

        Customer cust = new Customer();
        cust.setName(getName());
        cust.setAddress(getAddress());

        customerBo.addCustomer(cust);

        clearForm();

        return "";
    }

    //clear form values
    private void clearForm(){
        setName("");
        setAddress("");
    }

} 
```

CustomerBo.java

```
import java.util.List;

import main.Customer;

public interface CustomerBo{

    void addCustomer(Customer customer);

    List<Customer> findAllCustomer();

} 
```

CustomerBoImpl.java

```
public class CustomerBoImpl implements CustomerBo{

    CustomerDao customerDao;

    public void setCustomerDao(CustomerDao customerDao) {
        this.customerDao = customerDao;
    }

    public void addCustomer(Customer customer){

        customerDao.addCustomer(customer);

    }

    public List<Customer> findAllCustomer(){

        return customerDao.findAllCustomer();
    }
} 
```

CustomerDao.java

```
public interface CustomerDao{

    void addCustomer(Customer customer);

    List<Customer> findAllCustomer();

} 
```

CustomerDaoImpl.java

```
public class CustomerDaoImpl implements CustomerDao{
    private SessionFactory sessionFactory;
    public SessionFactory getSessionFactory() {
        return sessionFactory;}
    public void setSessionFactory(SessionFactory sessionFactory) {
         this.sessionFactory = sessionFactory;
    }

    public void addCustomer(Customer customer){

        getSessionFactory().getCurrentSession().save

(customer);

    }

    public List<Customer> findAllCustomer(){

        List list = getSessionFactory().getCurrentSession

().createQuery("from Customer").list();
        return list;

    }
} 
```

客户.hbm.xml

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated Jun 27, 2012 1:01:10 PM by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
    <class name="main.Customer" table="CUSTOMER">
        <id name="customerId" type="long">
            <column name="CUSTOMER_ID" />
            <generator class="assigned" />
        </id>
        <property name="name" type="java.lang.String">
            <column name="NAME" />
        </property>
        <property name="address" type="java.lang.String">
            <column name="ADDRESS" />
        </property>
        <property name="createdDate" type="java.lang.String">
            <column name="CREATED_DATE" />
        </property>
    </class>
</hibernate-mapping> 
```

客户Bean.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.1xsd">

    <bean id="customerBo" 
         class="main.CustomerBoImpl" >
        <property name="customerDao" ref="customerDao" />
    </bean>

    <bean id="customerDao" 
         class="main.CustomerDaoImpl" >
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

</beans> 
```

数据源.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

  <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver" />
    <property name="url" value="jdbc:oracle:thin:@Mohsen-PC:1521:mydb" />
    <property name="username" value="system" />
    <property name="password" value="123" />
  </bean>

</beans> 
```

HibernateSessionFactory.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

<!-- Hibernate session factory -->
<bean id="sessionFactory" 
     class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">

    <property name="dataSource">
      <ref bean="dataSource"/>
    </property>

    <property name="hibernateProperties">
       <props>
         <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
         <prop key="hibernate.show_sql">true</prop>
       </props>
    </property>

    <property name="mappingResources">
    <list>
          <value>main/Customer.hbm.xml</value>
    </list>
     </property>    

</bean>
</beans> 
```

应用程序上下文.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

    <!-- Database Configuration -->
    <import resource="main/DataSource.xml"/>
    <import resource="main/HibernateSessionFactory.xml"/>

    <!-- Beans Declaration -->
    <import resource="main/CustomerBean.xml"/>

</beans> 
```

面孔-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">
<application>
        <el-resolver>
            org.springframework.web.jsf.el.SpringBeanFacesELResolver
        </el-resolver>
    </application>

    <managed-bean>
        <managed-bean-name>customer</managed-bean-name>
        <managed-bean-class>main.CustomerBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
        <managed-property>
            <property-name>customerBo</property-name>
            <value>#{customerBo}</value>
        </managed-property>
    </managed-bean>
</faces-config> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>jsfspringhiber</display-name>
   <!-- Add Support for Spring -->
  <listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
  </listener>
  <listener>
    <listener-class>
        org.springframework.web.context.request.RequestContextListener
    </listener-class>
  </listener>
   <!-- Change to "Production" when you are ready to deploy -->
  <context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
  </context-param>

  <!-- Welcome page -->
  <welcome-file-list>
  <welcome-file>default.xhtml</welcome-file>
</welcome-file-list>

    <!-- JSF mapping -->
  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
   <!-- Map these files with JSF -->
  <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>
  <context-param>
    <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
  </context-param>
  <context-param>
    <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
    <param-value>resources.application</param-value>
  </context-param>
  <listener>
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
  </listener>
</web-app> 
```

默认.xhtml

```
<<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      >
    <h:head>
        <h:outputStylesheet library="css" name="table-style.css"  />
    </h:head>

    <h:body>

        <h1>JSF 2.0 + Spring + Hibernate Example</h1>

        <h:dataTable value="#{customer.getCustomerList()}" var="c"
                styleClass="order-table"
                headerClass="order-table-header"
                rowClasses="order-table-odd-row,order-table-even-row"
            >

            <h:column>
                <f:facet name="header">
                    Customer ID
                </f:facet>
                    #{c.customerId}
            </h:column>

            <h:column>
                <f:facet name="header">
                    Name
                </f:facet>
                    #{c.name}
            </h:column>

            <h:column>
                <f:facet name="header">
                    Address
                </f:facet>
                    #{c.address}
            </h:column>

            <h:column>
                <f:facet name="header">
                    Created Date
                </f:facet>
                    #{c.createdDate}
            </h:column>

        </h:dataTable>

        <h2>Add New Customer</h2>
        <h:form>

            <h:panelGrid columns="3">

                Name : 
                <h:inputText id="name" value="#{customer.name}" 
                    size="20" required="true"
                    label="Name" >
                </h:inputText>

                <h:message for="name" style="color:red" />

                Address : 
                <h:inputTextarea id="address" value="#{customer.address}" 
                    cols="30" rows="10" required="true"
                    label="Address" >
                </h:inputTextarea>

                <h:message for="address" style="color:red" />

            </h:panelGrid>

            <h:commandButton value="Submit" action="#{customer.addCustomer()}" />

        </h:form>

    </h:body>

</html> 
```

我的项目结构：

![在此处输入图像描述](../Images/93b6facd3fad1d0a72203917c410d907.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:17:55.177

让我们做一件事，这里是集成 Spring 和 JSF 的基本骨架的代码。如果您能够看到带有此代码的登录页面，那么我们将以此构建解决方案。

使用以下文件创建一个新的动态 Web 项目：Web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"       
     xmlns="http://java.sun.com/xml/ns/javaee" 
     xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" 
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee    
     http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID"  
     version="3.0">

<welcome-file-list>
    <welcome-file>index.xhtml</welcome-file>
</welcome-file-list>
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext*.xml</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>
</web-app> 
```

面孔-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">

    <application>
    <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
    </application>

</faces-config> 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
   http://www.springframework.org/schema/beans/spring-beans.xsd
   http://www.springframework.org/schema/context
   http://www.springframework.org/schema/context/spring-context.xsd">

   <context:annotation-config/>
   <context:component-scan base-package="com.examples" />

</beans> 
```

测试页面：index.xhtml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html">
<h:head>
  <title>Welcome</title>
</h:head>
<h:body>
  <h:form>
     <h3>Please enter your name and password.</h3>   
     <table>
        <tr>
           <td>Name:</td>
           <td><h:inputText value="#{userBean.name}"/></td>
        </tr>
        <tr>
           <td>Password:</td>
           <td><h:inputSecret value="#{userBean.password}"/></td>
        </tr>
     </table>
     <p><h:commandButton value="Login" action="welcome"/></p>
  </h:form>
</h:body>
</html> 
```

欢迎.xhtml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html">
<h:head>
  <title>Welcome</title>
</h:head>
<h:body>
  <h3>Spring integration with JavaServer Faces Successful, #{userBean.name}!</h3>
</h:body>
</html> 
```

最后是支持 bean：UserBean.java

```
package com.examples;

import java.io.Serializable;

import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Component;

@Component
@Scope("request")
public class UserBean implements Serializable {
private static final long serialVersionUID = 1L;
private String name;
private String password;

public String getName() { return name; }   
public void setName(String newValue) { name = newValue; }

public String getPassword() { return password; }
public void setPassword(String newValue) { password = newValue; }   
} 
```

仅此而已，仅此而已。只需将此代码复制并粘贴到示例项目中，然后看看我们以后可以做什么。我注意到的另一件事是您的 WEB-INF 下的 lib 文件夹似乎是空的。您将需要以下 jar 来运行此项目：

1.  [从这里](http://www.springsource.org/download/community)下载 Spring Framework 的最新 GA 版本，并将 jars 包含在 zip 文件的 dist 文件夹中。

2.  [从这里](http://javaserverfaces.java.net/)下载 JSF jars ，您可以获取最新的 2.1.10。

3.  [从此处](http://commons.apache.org/logging/download_logging.cgi)包含公共日志记录 jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:34:22.047

我使用行家。正确答案在[这里](https://stackoverflow.com/questions/11293730/oracle-11g-and-integration-of-hibernate-spring-and-jsf/11295542#11295542)。

结构是：

![在此处输入图像描述](../Images/c75aa520218bde9b18f6f79302507aa1.png)

# html - 是否可以有渐变+背景图像的背景

> ID：11223339
> 
> 赞同：0
> 
> 时间：2012-06-27T09:40:09.540
> 
> 标签：html, css

我正在尝试将箭头图像添加到我的链接并将其定位到中间。我的链接也有一个背景渐变，我试图在右边应用背景图像。

CSS

```
 #nav a.linkchildflyout:link,
    #nav a.linkchildflyout:active,
    #nav a.linkchildflyout:visited 
    {
        display:block;
        padding:0px 5px;
        text-decoration:none;
        background: #b95d73; /* Old browsers */
        background: -moz-linear-gradient(top, #b95d73 0%, #970e2e 0%, #9c1a38 0%, #910022 52%, #b95d73 100%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#b95d73), color-stop(0%,#970e2e), color-stop(0%,#9c1a38), color-stop(52%,#910022), color-stop(100%,#b95d73)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top, #b95d73 0%,#970e2e 0%,#9c1a38 0%,#910022 52%,#b95d73 100%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top, #b95d73 0%,#970e2e 0%,#9c1a38 0%,#910022 52%,#b95d73 100%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top, #b95d73 0%,#970e2e 0%,#9c1a38 0%,#910022 52%,#b95d73 100%); /* IE10+ */
        background: linear-gradient(top, #b95d73 0%,#970e2e 0%,#9c1a38 0%,#910022 52%,#b95d73 100%); /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#b95d73', endColorstr='#b95d73',GradientType=0 ); /* IE6-9 */
        color: white;
    }

    #nav a.linkchildflyout
    {
        background-image: url(Images/arrow.png);
        background-position: right center;
        background-repeat: no-repeat;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T09:43:22.113

您可以（并且应该）使用`:before`and`:after`伪元素来实现这样的效果。

这是**[一篇关于这个主题的好文章！](http://css-tricks.com/pseudo-element-roundup/ "CSS-Tricks - 伪元素综述")**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:46:03.120

是的，有 css3 多个背景属性。你可以这样写：

```
#nav a.linkchildflyout{
 background:linear-gradient(top, #b95d73 0%, #970e2e 0%, #9c1a38 0%, #910022 52%, #b95d73 100%),url(Images/arrow.png) no-repeat right center;
} 
```

阅读更多[http://www.css3.info/preview/multiple-backgrounds/](http://www.css3.info/preview/multiple-backgrounds/)

# node.js - 本地驱动器上的html文件能否连接到socket.io服务器

> ID：11223340
> 
> 赞同：0
> 
> 时间：2012-06-27T09:40:11.650
> 
> 标签：node.js, socket.io

为了便于开发，我想从本地驱动器上的 html 文件连接到我的 socket.io 服务器（Node.js），而不需要网络服务器。如何配置它？还是最好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T05:36:51.040

提供静态文件不是 socket.io 的目的。尤其是二进制文件对 websocket 来说很烦人。

Node.js 拥有提供静态文件所需的一切，正如 Cadell 指出的那样，网络上有很好的指南可以做到这一点。

恕我直言，更好的解决方案是使用Node.js[的连接框架](https://github.com/senchalabs/connect)，以便您可以使用静态中间件。如果你想让你的生活更轻松恕我直言，那么我会使用构建在 connect 之上的[express 框架，它包含许多非常好的东西来简化 Web 应用程序的编写。](http://expressjs.com/)通过这些解决方案中的任何一个来提供静态文件都非常容易。

# reporting-services - 带有子报表的 SSRS 报表：部署到报表管理器时布局奇怪

> ID：11223341
> 
> 赞同：0
> 
> 时间：2012-06-27T09:40:12.630
> 
> 标签：reporting-services, reportingservices-2005

我正在使用子报表（例如“child1”）来创建一个主报表（例如“parent1”）。报告“parent1”使用报告“child1”的 15 个实例，每个参数一次。

直到 10 个实例，报告行为都很好，但是一旦我添加了第 11 个实例，报告格式就变得很奇怪。`Interactive Height`对于“child1”和“parent1”报告，我都设置为 0。我不确定我在这里缺少什么。

我在 BIDS 2005 中创建了报告，它在 BIDS 中运行良好。该问题仅在部署在报表管理器中时出现。另外：导出到 Excel 和 PDF 效果很好。

对此的任何意见表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T08:21:11.790

此问题通常在将报表部署到报表服务器时发现。你做一件事，为每个子报告使用矩形容器然后尝试。可能会帮到你。

# php - Preg_replace 多个模式

> ID：11223345
> 
> 赞同：0
> 
> 时间：2012-06-27T09:40:34.190
> 
> 标签：php, preg-replace

我正忙于一个网站，对于一个元素，我使用 preg_replace 用破折号替换所有空格。

```
preg_replace('/\\s/', '-', $item_replace_en[0]) 
```

这很好用，但现在我遇到了一个新问题。用户输入了以下“音乐/电影”。输出是“音乐/电影”，我希望它是“音乐电影”。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:56:54.440

看起来您正在尝试生成一个可用作 URL 的字符串。

当用户添加要转换为 URL 安全字符串的标题时，可能会发生许多情况。例如，有人可以使用这个：

```
Mess'd up --text-- just (to) stress /test/ ?our! `little` \\clean\\
url fun.ction!?-->"); 
```

应该返回：

> messd-up-text-just-to-stress-test-our-little-clean-url-function

你的代码准备好了吗？在这种情况下，您可以使用此功能：

```
setlocale(LC_ALL, 'en_US.UTF8');
function toAscii($str, $replace=array(), $delimiter='-') {
    if( !empty($replace) ) {
        $str = str_replace((array)$replace, ' ', $str);
    }

    $clean = iconv('UTF-8', 'ASCII//TRANSLIT', $str);
    $clean = preg_replace("/[^a-zA-Z0-9\/_|+ -]/", '', $clean);
    $clean = strtolower(trim($clean, '-'));
    $clean = preg_replace("/[\/_|+ -]+/", $delimiter, $clean);

    return $clean;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:46:54.820

您可以在模式和替换文本中使用数组。例如

```
$pattern=array();
$pattern[0]="/\\s/";
$pattern[1]="/-\/-/";
$replace=array();
$replace[0]="-";
$replace[1]="-";
preg_replace($pattern, $replace, $item_replace_en[0]); 
```

您可以使用任意数量的模式和替换。有关详细信息，请参阅[http://php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:48:52.860

尝试这个 ：

```
$returnValue = preg_replace('/(\\s\\/)?(\\s)/', '-',$item_replace_en[0]); 
```

但这不会替换类似`"Music/ Film"`or `"Music /Film"`or的字符串`Music/Film`。

# c# - RadListView 自动按 ID 列排序

> ID：11223348
> 
> 赞同：0
> 
> 时间：2012-06-27T09:40:37.343
> 
> 标签：c#, asp.net, listview, telerik

我正在使用 Telerik radlistview o 显示一些结果，我在查询中执行一些分组并返回排序和排序的结果集并将其设置到数据源。出于某种原因（我整个上午都在与之斗争），ListView 按 ID 列重新排序结果。

```
<telerik:RadListView runat="server" ID="rlThumbnailView" OnNeedDataSource="rlThumbnailView_NeedDataSource"
                AllowPaging="true" PageSize="8" OnDataBound="rlThumbnailView_DataBound" OnItemDataBound="rlThumbnailView_ItemDataBound">
                <LayoutTemplate>
                    <span style="vertical-align: top; position: relative; top: 4px">Displaying page
                        <%#Container.CurrentPageIndex + 1 %>
                        of
                        <%#Container.PageCount %></span> </span>
                    <br />
                    <div id="list">
                        <asp:Panel runat="server" ID="Panel1" Style="float: left; margin-left: 160px" Visible="<%#Container.PageCount > 1 %>">
                            <asp:Button runat="server" ID="PrevButton" CommandName="Page" CommandArgument="Prev"
                                Text="Prev Page" Enabled="<%#Container.CurrentPageIndex > 0 %>" />
                            <asp:Button runat="server" ID="NextButton" CommandName="Page" CommandArgument="Next"
                                Text="Next Page" Enabled="<%#Container.CurrentPageIndex < Container.PageCount - 1 %>" />
                        </asp:Panel>
                        <div>
                            <telerik:RadSlider runat="server" ID="RadSlider1" MaximumValue="3" MinimumValue="1"
                                Value="2" LiveDrag="false" SmallChange="1" AutoPostBack="true" OnValueChanged="RadSlider1_ValueChanged"
                                Width="150px" CausesValidation="false" />
                        </div>
                        <div style="clear: both;">
                        </div>
                        <asp:Panel ID="itemPlaceholder" runat="server">
                        </asp:Panel>
                        <div style="clear: both;">
                        </div>
                    </div>
                </LayoutTemplate>
                <ItemTemplate>
                    <div id="wrapper" runat="server" style="float: left; margin-top: 2px; margin-bottom: 2px;">

                                <telerik:RadBinaryImage ID="ThumnailImage1" runat="server" />

                            UPC:
                            <asp:Label ID="lblUPC" runat="server"></asp:Label><br />
                            Description:
                            <asp:Label ID="lblDescription" runat="server"></asp:Label>
                            <br />
                            <div id="dvCountries" runat="server">
                                Languages:</div>
                            Changes:<asp:Label ID="lblChanges" runat="server"></asp:Label>
                            <br />
                            Pack Format:<asp:Label ID="lblPackType" runat="server"></asp:Label>
                            <br />
                            Date Completed:<asp:Label ID="lblDateCompleted" runat="server"></asp:Label>
                            <br />
                        </div>
                    </div>
                </ItemTemplate>
            </telerik:RadListView> 
```

我相信这是基于标准的微软列表视图，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:26:57.743

对于任何面临同样问题的人，答案出现在这里：

[http://www.telerik.com/community/forums/aspnet-ajax/listview/listview-paging-and-sortorder.aspx](http://www.telerik.com/community/forums/aspnet-ajax/listview/listview-paging-and-sortorder.aspx)

似乎是 Telerik 的错误

# php - 使用 openssl_encrypt 加密文件

> ID：11223351
> 
> 赞同：2
> 
> 时间：2012-06-27T09:40:43.363
> 
> 标签：php, openssl

`openssl_encrypt`我已经看到了使用命令行加密文件的解决方案，如下所示：

```
file_put_contents ('./file.encrypted',openssl_encrypt ($source, $method, $pass, true, $iv));

$exec = "openssl enc -".$method." -d -in file.encrypted -nosalt -nopad -K ".strtohex($pass)." -iv ".strtohex($iv); 
```

或者，`openssl_encrypt`用于加密字符串，如下所示：

```
$string = 'It works ? Or not it works ?';
$pass = '1234';
$method = 'aes128';
file_put_contents ('./file.encrypted', openssl_encrypt ($string, $method, $pass)); 
```

但不是直接从代码中加密文件的东西。这是为什么 ？

如果我想从代码中加密 2-10mb 的文件，而不是像使用命令行那样为每个文件打开单独的进程，该怎么办？

我正在寻找可以为我做到这一点的代码示例，例如：

```
$myfile = 'files/myfile.doc';
$pass = '1234';
$method = 'aes128';
file_put_contents ('./file.encrypted', openssl_encrypt ($myfile, $method, $pass)); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:31:34.617

没有理由不能使用 file_get_contents() 将文件读入变量，使用 openssl_public_encrypt() 对其进行加密，然后使用 fopen() fwrite() 和 fclose() 将其保存到磁盘，但大概有一个限制使用这种方法可以将多大的文件加载到内存中。

在脚本中进行文件加密也可能会产生性能开销，但您应该能够很容易地对此进行测试。

# git - 为什么 git 不自动将无冲突的更改合并到本地修改的文件中？

> ID：11223353
> 
> 赞同：1
> 
> 时间：2012-06-27T09:40:48.433
> 
> 标签：git, merge

定期做`git pull`我注意到命令有时会以错误结束

```
Your local changes to the following files would be overwritten by merge:  
app/Ribbon.xaml  
Please, commit your changes or stash them before you can merge 
```

在这种特殊情况下，我在本地修改了这个文件中的一行，并且它在存储库中的新版本也改变了一个遥远的行 - 没有冲突，没有重命名，没有更改行尾，没有子模块。所以在这种情况下，我希望 git 自动合并更改，而不需要我`git commit`或`git stash`......
我知道 git 能够自动合并更改（它通常会这样做），但在这种情况下不会。

还有一个问题：**什么可能会阻止 git 自动合并无冲突的更改**（到本地修改的文件中）？

我想，我的问题中可能遗漏了一些数据。如果是这样，让我知道还应该检查什么。

* * *

[27.JUN.2012 14:15] 根据答案中的提示，git 的正常策略是拒绝将任何更改合并到本地修改的文件中。考虑到这一点，我会将问题改写为**如何使 git 自动将更改合并到本地修改的文件中**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:32:37.497

Git 处理其存储库中的文件，位于项目根目录下的 .git/ 目录下。

Git 在进行拉取和合并时使用此存储库进行比较。

在您的情况下，Git 足够聪明，可以注意到您已经进行了更改，但没有添加或提交它们，因此 git 将无法处理它们。

**即使更改位于单独的代码区域中，**您也会收到消息，因为您还没有真正将文件添加到 git 并且 git 实际上并不知道是否会有冲突......直到 git '看到'文件。如果你`git add`然后`git commit`是文件，那么它在存储库中，那么 git 可以在它上“工作”，如果更改在不同的区域中**，它将能够执行**你想要看到的自动合并。

所以它给出了这个信息。

您的选择是：

*   添加并提交本地文件，然后git可以进行合并。

*   存储本地更改以将它们保存在一边，然后提取新的服务器文件。

*   使用您当前的更改创建一个分支 - 使用 checkout，然后切换回 master 并使用 reset。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:45:34.150

我认为这只是 git 的自然行为。因为你的文件没有暂存或提交，git 并不真正知道你想对文件做什么。git 最好拒绝拉取，而不是猜测你对文件的意图。我通常在拉取之前存储我未提交和未暂存的更改，然后在之后应用存储。

# javascript - Jquery ajax请求无法将数据返回给其他函数

> ID：11223356
> 
> 赞同：2
> 
> 时间：2012-06-27T09:41:20.210
> 
> 标签：javascript, ajax, jquery

我正在使用 jquery 发出一个简单的 ajax 请求。下面是我的 ajax 函数。

```
 var makeJqueryAjaxRequest = function(arrParam) {
         var request = $.ajax({
             url : arrParam['url'],
             async: false,
             type: arrParam['type'],
             data: arrParam['data'],
             dataType: arrParam['data_type'],
             success: function(data) {
                 if(data){ 
                 return data;   
                 }
             }
         });
     } 
```

这是我的函数调用：

```
 var items = {
       "type" : 'POST',
       "url" : ajaxGetUrl,
       "data" : arrParam['data'],
       "data_type" : 'html'
      };
      var msg = makeJqueryAjaxRequest(items); 
```

现在不知道为什么我的 makeJqueryAjaxRequest 函数总是返回空值。如果我在成功提醒数据：我正在获得完美的数据。但是当我尝试返回时，它给了我空值

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T09:48:17.083

> 您不能从异步回调函数返回值。

因为`success`是一个回调，当[ajax 事件（在这种情况下为成功）](http://docs.jquery.com/Ajax_Events)触发`async`时由 jQuery 调用。所以从这个函数返回一些东西不会有任何影响，因为它们将被返回给 jQuery 代码。

您可以使用以下

```
var makeJqueryAjaxRequest = function(arrParam) {
     var request = $.ajax({
        url : arrParam['url'],
        async: false,
        type: arrParam['type'],
        data: arrParam['data'],
        dataType: arrParam['data_type']

     });
   return request;
  } 
```

然后做

```
 makeJqueryAjaxRequest(items).done(function(data){
    if(data){
      var msg  = data;  
      // do whatever you like with msg now
    }
 }); 
```

* * *

**替代回调方法：**

```
var makeJqueryAjaxRequest = function(arrParam,callback) {
     var request = $.ajax({
        url : arrParam['url'],
        async: false,
        type: arrParam['type'],
        data: arrParam['data'],
        dataType: arrParam['data_type'],
        success: function(data) {
           if(data){ 
              callback(data); 
           }
       }
     });

  } 
```

然后像这样使用它

```
 makeJqueryAjaxRequest(items,function(data){
    // do whatever you like with data
 }); 
```

文档[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)

**笔记**

`async: false`并且没有必要使用这些方法中的任何一种。你可以删除它。正如医生所说

> 从 jQuery 1.8 开始，不推荐使用**async: false**

# php - 如何从 LinkedIn 中删除/撤销访问令牌

> ID：11223357
> 
> 赞同：4
> 
> 时间：2012-06-27T09:41:28.990
> 
> 标签：php, linkedin

我正在使用 LinkedIn API。我已经完成了检索访问令牌的所有过程。但从不在任何地方显示从 LinkedIn 删除/撤销访问令牌。请帮忙。！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T09:45:39.027

将秘密存储在数据库中后，只需将其删除，访问权限就会被撤销。

我相信，如果您希望用户撤销对您的应用程序的访问权限，则用户必须进入linkedin 并执行此操作，就像 Facebook 一样。

正如此处确认的那样：http: [//developer.linkedin.com/forum/how-really-revoke-apps-oauth-access-token](http://developer.linkedin.com/forum/how-really-revoke-apps-oauth-access-token) linkedin 没有可用于您想做的事情的可编程 API。

但是在从数据库中删除它之前，您可以使令牌无效，这就像我相信通过使用您的令牌卷曲[https://api.linkedin.com/uas/oauth/invalidateToken采取的额外步骤一样。](https://api.linkedin.com/uas/oauth/invalidateToken)

### 编辑

正如@Paul 所纠正的那样，使用 LinkedIn 使令牌无效实际​​上非常重要。正如他所说，这样做然后从数据库中删除是正确的方法。

# xforms - 事件仅在第一次触发

> ID：11223360
> 
> 赞同：0
> 
> 时间：2012-06-27T09:41:49.863
> 
> 标签：xforms, episerver

我有一个带有 xForm 的 Episite，我试图在提交之前对其进行操作。我试图在 global.asax 上获取 formdata，如下所示：

```
public void XFormControlSetup(object sender, EventArgs e)
    {       
        control.BeforeLoadingForm += XFormBeforeLoadingForm;
        control.ControlsCreated += XFormControlsCreated;
        control.BeforeSubmitPostedData += XFormBeforeSubmitPostedData;
        control.AfterSubmitPostedData += XFormAfterSubmitPostedData;
    } 
```

我第一次调试 XFormControlSetup 触发并设置事件处理程序。事件触发。但只是我第一次提交表格！在此之后，即使我重新启动调试，事件也不会触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:24:30.540

我解决了。事件被触发。它的 Visual Studios 调试并不总是在断点处中断

# java - MyEclipse 中等价的 IntelliJ idea 的 Ctrl + U 快捷键

> ID：11223361
> 
> 赞同：2
> 
> 时间：2012-06-27T09:41:55.280
> 
> 标签：java, intellij-idea, myeclipse

我过去确实使用*IntelliJ IDEA*作为我的开发环境，最近我开始使用*MyEclipse*。

在*IntelliJ*中，使用覆盖/实现方法上的`Ctrl`+`U`快捷方式转到超类中的原始方法。

*MyEclipse*是否有类似的快捷方式，如果有，我该如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:55:54.363

假设 MyEclipse 具有与标准 Eclipse 相同的菜单命令，则等效命令是Navigate 菜单上的*Open Super Implementation 。*默认情况下它没有分配键盘快捷键，但您可以添加一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:00:07.457

您可以通过在将显示下拉列表的方法上按***Ctrl+ 鼠标来执行此操作，因为它具有打开的超级实现。***您还可以从***帮助 --> 键辅助***菜单设置您的自定义键。

# android - 在 android 主页小部件中获取 TextView 的文本？

> ID：11223362
> 
> 赞同：4
> 
> 时间：2012-06-27T09:41:59.243
> 
> 标签：android, widget, gettext

我刚开始使用 android home 小部件进行编程，所以我可以从我的小部件提供程序将文本设置为 home 小部件中的 textview，但是当我想从中获取文本时，我没有理想。无法 findById() 和 getText()。有没有办法从小部件提供者那里获取主页小部件中的 textview 文本？或者告诉我如何从另一个活动中获得？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:57:04.657

她是示例代码。

```
TextView textValue = (TextView) layout.findViewById(R.id.labelValue);
String s = textValue.getText().toString();
textValue.setText("Welcome"); 
```

# vba - Excel VBA 从一张纸复制到另一张纸

> ID：11223364
> 
> 赞同：-1
> 
> 时间：2012-06-27T09:42:03.357
> 
> 标签：vba, excel, spreadsheet, rows

我有一张看起来像这样的表格 A：

```
Name     Phone Number  Title         Id
Ron      08900108      Carpenter     440
Bob      48951230      Painter       830
Ron      14890560      Carpenter     561
Steve    98023023      Carpenter     112 
```

和另一个名为 Carpenter 的工作表（以及另一个名为 Painter 的相同格式的工作表）

```
Name     Phone Number  Id     Comment
Ron      08900108      440    Cool dude
Bob      48951230      830    Less Awesome Dude 
```

我想将 A 的行复制到名为 Carpenter 和 Painter 的工作表中，将姓名、电话号码与现有 ID 放在同一行（例如，如果有人更改了号码），或者如果它是新 ID，则添加新行. 我想保留现有的评论。

由于我在 VBA 方面没有任何经验，因此您可以通过提供解决问题的代码或提示要使用哪些函数（？）和其他语言结构以及在哪里可以找到有关它们的信息来帮助我。

我想我需要遍历 A 中的行并将其复制到一个数组中，然后以某种方式发送到正确的工作表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:20:47.520

首先，考虑到您正在使用 Excel 进行通常与数据库相关的操作，并且可以使用 Access 轻松完成。我越来越注意到 Excel 被用作数据表这一事实。虽然在某些情况下这可能是实用的，但我们不要忘记 Excel 的主要功能是电子表格而不是数据库。

如果您仍然坚持在 Excel 中这样做，有很多方法可以做到这一点：

1）将源范围以及命运范围加载到数组中。开始比较两个加载的数组，随意进行操作；当需要设置新的 id 时，可以动态扩展数组并使用 ubound(array) 来检索数组的大小。您还可以使用数组的大小作为输入参数动态设置范围。由您决定如何为您的案件完成。

2) 为每张返回代表记录的实例字典的工作表创建一个自定义的自我维持类。字典允许使用关键属性。这也可以作为进一步操作的基础。这似乎是一种相当奇怪的方式，但它确实有效，但我不会将它用于大量数据）。好处是这个类相当灵活，以后可以很容易地用非常有限的代码再次调用。

3) 使用 ADODB 对工作表执行查询（不要忘记引用库）。ADODB 允许您将 Excel 工作表视为表格，其中工作表的第一行被视为字段标题。

这些方法中的任何一种最终都会奏效，但你会让自己变得很难。正如我所说，Access 在这方面做得更好，因为您可以创建基于外键的关系表。如果您需要 Excel 中的这些数据，这不是问题，因为您仍然可以使用 ADO 在 Excel - Access 之间创建连接。

很抱歉将其作为回复，但由于我不经常在 Stack Overflow 上，我无法发表评论。虽然我无法为您编写代码，但我希望这对您有所帮助。

# c# - 用一些逻辑在 EF 中插入多对多

> ID：11223365
> 
> 赞同：0
> 
> 时间：2012-06-27T09:42:03.920
> 
> 标签：c#, .net, entity-framework, insert, many-to-many

我在实体框架中有多对多的关系。查看图片... ![多对多](../Images/55fef38db370406994b72799f4e9ad1e.png)

我想为这篇文章插入一篇文章和标签，**但**TagName 属性在 db 中是唯一的，所以我只需要在表中插入新标签`Tags`（`ArticlesToTags`在 EF 中看不到），而其他标签已经在表中`Tags`只需插入`ArticlesToTags`.

```
public void CreateUpdate(string title, string subTitle, string text,
                string author, string tags, string photo, bool allowComments)
            {
                using (var context = new blogEntities())
                {
                        var article = new Article()
                        {
                            Title = title,
                            SubTitle = subTitle,
                            ArticleText = text,
                            Author = author,
                            Photo = photo,
                            CreateDate = DateTime.Now,
                            ModifyDate = null,
                            AllowComments = allowComments
                        };

                        foreach (var tg in tags.Split(','))
                        {
                            article.Tags.Add(new Tag() { TagName = tg });
                        }

                        context.Articles.AddObject(article);

                    context.SaveChanges();
                }
            } 
```

**现在它抛出无法插入重复唯一键**的异常它是如何在 EF 中完成的？我是新手...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T09:58:50.683

添加一个select语句，查看数据库中是否已经有标签。

```
foreach (var tg in tags.Split(','))
{
    var tag = context.Tags.SingleOrDefault(x => x.TagName == tg);
    if (tag == null)
        tag = new Tag() { TagName = tg };

    article.Tags.Add(tag);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:24:40.437

检查您的数据库，您必须在关系表中添加一个两列主键。像这样： ![在此处输入图像描述](../Images/0a13782bd1bb7fbe191fb3da6e34de37.png)

这是我的代码，与您的代码相同，并且有效：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication13
{
    class Program
    {
        static void Main(string[] args)
        {
            using (manytomanyEntities entities = new manytomanyEntities())
            {
                List<B> bList = new List<B>();

                A a = new A
                {
                    Name = "Tim_A"
                };

                for (int i = 0; i < 100; i++)
                {
                    B b = new B
                    {
                        Name = "Tim_B_" + i
                    };

                    entities.B.AddObject(b);
                }

                entities.A.AddObject(a);

                entities.SaveChanges();

            }
        }
    }
} 
```

希望这对你有帮助，:)

# java - Quartz @DisallowConcurrentExecution 允许多个类的实例运行但不允许作业？

> ID：11223370
> 
> 赞同：2
> 
> 时间：2012-06-27T09:42:27.427
> 
> 标签：java, spring, quartz-scheduler

我一直在研究一个调度引擎，它从数据库中读取调度作业并安排它们工作正常但是数据库中的行只是某些类型作业的“配置”，例如：

获取 FTP 的特定配置有

```
host: imagineryHost1.com 
post: 22 
```

另一个同级别的有

```
host: imagineryHost2.com
post: 21 
```

我们使用自己的触发器和自己的单独数据创建两个 FPTjob。

```
/**
BaseJob is an Abstract class extending QuartzJobBean used to handle our logging and 
other requirements that need across all our jobs.
*/
public class FTPJob extends BaseJob {

    /**
        Called from executeInternal of QuartzJobBean 
    */
    @Override
    public boolean execute1V(JobExecutionContext context) {
        //Code to get Files from FTP.
    }
} 
```

这些是使用带有 cron 的 TriggerBuilder 安排的。

如果我添加 @DisallowConcurrentExecution 将只允许我们的 FTPJob 的 1 个实例在任何时候运行，但是我需要能够运行 FTPJob 的多个实例，但仅限于该类的特定配置的一个实例。

任何有关如何取得进展的线索都将受到高度赞赏:)

**更新**

根据 ftom2 的回答，我去挖掘并找到了 TriggerListener，因为每个作业配置都有它自己的 uniqueID，所以我可以“否决”运行作业，即。

```
public boolean vetoJobExecution(Trigger trigger, JobExecutionContext context) {
    try {
        Iterator<JobExecutionContext> it =     
        context.getScheduler().getCurrentlyExecutingJobs().iterator();

        boolean found = false;
        while(it.hasNext()) {
            JobExecutionContext job = it.next();

            if(trigger.getJobKey().equals(job.getJobDetail().getKey())) {
                return false;
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

有没有其他更内置的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:03:06.433

我不确定这是否可能，但这可能是一个方向。

您可以实现[JobListener](http://quartz-scheduler.org/api/2.0.0/org/quartz/JobListener.html)，然后执行以下操作：

1.  使用 jobWasExecuted，您将在 jobDetails 中设置该作业完成的标志。
2.  使用 jobToBeExecuted，您将在作业启动之前检查作业状态，看看它是否处于运行状态，如果是 - 停止它（请参阅[此处](https://stackoverflow.com/questions/7159080/how-to-interrupt-or-stop-currently-running-quartz-job)），如果不是 - 让它运行并将其状态设置为运行。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T12:04:05.497

很抱歉迟到了一年……但是建议使用 TriggerLinstener 不是非线程安全的吗？在我看来，两个工作可以在 getCurrentlyExecutingJobs() 返回之前通过否决阶段。在同样的情况下，我在调度程序上使用了执行锁，它甚至更少“内置”......（想法是 - 尝试在触发器 linstener 中获取锁，如果不能，则否决，从作业侦听器 jobWasExecuted 返回锁）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T19:10:30.410

看起来有状态的作业不允许并发执行，你可以简单地实现 StatefulJob 而不是 Job 接口

# magento - 添加产品属性时出错

> ID：11223375
> 
> 赞同：0
> 
> 时间：2012-06-27T09:42:53.440
> 
> 标签：magento, attributes, product, catalog

当我看到很多帖子时，我通过这个问题进行了很多查找，但没有一个为 magento 提供定义的解决方案。

当我尝试向产品添加属性时，出现此错误：

```
"Le modèle source "sac_productattributes/attribute_source_type" n'a pas été trouvé pour l'attribut "athlete_name_product" " 

The source model "sac_productattributes / attribute_source_type" was not found for attribute "athlete_name_product 
```

我在我的安装程序脚本中尝试这个：

```
$installer = $this;
$installer->startSetup();
$installer->addAttribute('catalog_product','athlete_name_product', array(
    'group'             => 'General',
    'type'              => 'varchar',
    'backend'           => '',
    'frontend'          => '',
    'label'             => 'Athlete name',
    'input'             => 'select',
    'class'             => '',
    'source'            => 'sac_productattributes/attribute_source_type',
    'global'            => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_WEBSITE,
    'visible'           => true,
    'required'          => false,
    'user_defined'      => false,
    'searchable'        => false,
    'filterable'        => false,
    'comparable'        => false,
    'visible_on_front'  => false,
    'unique'            => false,
    'apply_to'          => 'simple,configurable,bundle,grouped',
    'is_configurable'   => false,
));

$installer->endSetup(); 
```

***更新：问题解决了我写班级名称有误***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:45:54.433

您能否检查 sac_productattributes/attribute_source_type 模型类是否实际存在。即productattribute/attribute/source/type.php应该存在

# mysql - MySQL - 合并表行（分组方式不起作用）

> ID：11223381
> 
> 赞同：0
> 
> 时间：2012-06-27T09:43:03.683
> 
> 标签：mysql, sql

我在完成 MySQL 查询时遇到了一些麻烦。想象一下，我将表格票、发票行和用户结合起来。每张票都有一个或多个发票行，每个用户可以拥有一张或多张票。

我正在尝试创建一个可用于创建姓名徽章的查询。对于这个徽章，我需要知道该人注册的姓名和物品。

我创建了以下 MySQL 查询

```
SELECT u.firstName, u.lastName, il.invID, il.name, 
CASE 
  WHEN il.name = 'Conference Dinner' 
  THEN 'Diner'
END AS 'conference_dinner',

CASE 
  WHEN il.name = 'Regular Conference Fee' THEN 'Conference'
  WHEN il.name = 'Conference Fee for Phd. Students'  THEN 'Conference'
END AS 'conference',

CASE
  WHEN il.name = 'Pre-Conference Fee' THEN 'Pre-Conference'
END AS 'pre_conference',

FROM invoice_line il, events_tickets et, users u
WHERE il.invID = et.invID
AND et.userID = u.ID 
```

查询几乎没问题，但是它为具有三个发票行（= 三个项目）的用户生成了表中的三行，我希望这三行合并为一行。用户 ID 上的 Group By 将产生一行，但比案例创建的列不会合并到一行中，只显示其中一个。

我可能使用了错误的方法来做到这一点。但它应该产生一个像这样的表：

```
firstName | lastName | conference_diner | conference | pre_conference |
----------------------------------------------------------------------
John      | Doe      | Diner            | Conference |                |
Jane      | Norman   |                  | Conference | Pre-Conference | 
Martijn   | Thomas   |                  | Conference |                |
Pete      | Johns    |                  |            | Pre-Conference | 
```

目前这导致：

```
firstName | lastName | conference_diner | conference | pre_conference |
----------------------------------------------------------------------
John      | Doe      | Diner            |            |                |
John      | Doe      |                  | Conference |                |
Jane      | Norman   |                  | Conference |                |
Jane      | Norman   |                  |            | Pre-Conference |  
Martijn   | Thomas   |                  | Conference |                |
Pete      | Johns    |                  |            | Pre-Conference | 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:50:23.333

像这样的东西：

```
SELECT u.firstName, u.lastName, et.invID,
CASE 
  WHEN il_d.name IS NULL THEN '' ELSE 'Diner'
END AS 'conference_dinner',

CASE 
  WHEN il_c.name IS NULL THEN '' ELSE 'Conference'
END AS 'conference',

CASE
  WHEN il_p.name IS NULL THEN '' ELSE 'Pre-Conference'
END AS 'pre_conference'
FROM events_tickets et
INNER JOIN users u ON et.userID = u.ID
LEFT JOIN invoice_line il_d ON il_d.invID = et.invID AND il_d.name = 'Conference Dinner'
LEFT JOIN invoice_line il_c ON il_c.invID = et.invID AND il_c.name IN ('Regular Conference Fee', 'Conference Fee for Phd. Students')
LEFT JOIN invoice_line il_p ON il_p.invID = et.invID AND il_p.name = 'Pre-Conference Fee' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:51:49.083

由于您没有包含源数据，我将假设最终结果中的每一列都与输入数据中的一行相关。

这意味着您*确实*想使用`GROUP BY`...

```
SELECT
  u.firstName, u.lastName, il.invID, il.name, 
  MAX(CASE
    WHEN il.name = 'Conference Dinner'                 THEN 'Diner'
  END) AS 'conference_dinner',
  MAX(CASE
    WHEN il.name = 'Regular Conference Fee'            THEN 'Conference'
    WHEN il.name = 'Conference Fee for Phd. Students'  THEN 'Conference'
  END) AS 'conference',    
  MAX(CASE
    WHEN il.name = 'Pre-Conference Fee'                THEN 'Pre-Conference'
  END) AS 'pre_conference'

FROM
  invoice_line il, events_tickets et, users u
WHERE
  il.invID = et.invID AND et.userID = u.ID
GROUP BY
  u.firstName, u.lastName 
```

但是，我不得不`il.invID, il.name,`从`SELECT`. 这是因为我推断它们可以具有不同的值。在这种情况下，您希望在聚合结果中显示哪个值？

**编辑**：

这比多`LEFT JOIN`版本的优势在于它只扫描`invoice_line`talb 一次，而不是多次。这*应该*意味着更低的读取、可能更低的 CPU 和通常更低的执行时间。

`il.invID`不利的一面是，如果需要，提取所有个人和`il.name`价值观会稍微复杂一些，并且不太直接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T09:53:11.543

您可以尝试以下方法：

```
SELECT u.firstName, u.lastName, il.invID, il.name,
IF(SUM(il.name = 'Conference Dinner') > 0,
    'Diner', '') AS 'conference_dinner',
IF(SUM(il.name IN ('Regular Conference Fee',
                   'Conference Fee for Phd. Students')) > 0,
    'Conference', '') AS 'conference',
IF(SUM(il.name = 'Pre-Conference Fee') > 0,
    'Pre-Conference', '') AS 'pre_conference'
FROM invoice_line il, events_tickets et, users u
WHERE il.invID = et.invID
AND et.userID = u.ID
GROUP BY u.ID 
```

mysql 中的比较结果是一个数字，0 表示*false*，1 表示*true*。因此，您可以简单地将它们相加以计算与给定表达式匹配的行数。换句话说，属于单个用户的连接中的所有行都被分组，匹配某个属性的那些行被计数，这些计数将决定在结果表中打印什么作为该用户的聚合值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T09:58:00.190

在 event_tickets 表上添加一些自连接

```
SELECT u.firstName, u.lastName, il.invID, il.name, 
CASE 
  WHEN il.name = 'Conference Dinner' 
  THEN 'Diner'
END AS 'conference_dinner',

CASE 
  WHEN il.name = 'Regular Conference Fee' THEN 'Conference'
  WHEN il.name = 'Conference Fee for Phd. Students'  THEN 'Conference'
END AS 'conference',

CASE
  WHEN il.name = 'Pre-Conference Fee' THEN 'Pre-Conference'
END AS 'pre_conference',

FROM invoice_line il, events_tickets et1, events_tickets et2, event_tickets et3, users u
WHERE il.invID = et.invID
AND et1.userID = u.ID
AND et2.userID = u.ID
AND et3.userID = u.ID 
```

但还要在连接中包含一些东西，以确保您不会吃两次晚餐，例如，如果 et.name 是指定“Diner”与“Conferece”等的属性，那么您将需要

```
AND et1.name > et2.Name
AND et.name > et3.name 
```

可能还有一些空值处理。

# android - 如何在 Gellery 视图中禁用 onItemClick 侦听器？

> ID：11223383
> 
> 赞同：0
> 
> 时间：2012-06-27T09:43:10.377
> 
> 标签：android

我用下面的代码创建了 GelleryView。我的问题是，我不想显示选择的图像，因为当我触摸滚动它时它会发出黄色光。如何禁用此单击或触摸以使黄色选择状态不出现。

```
public class main extends Activity {
/** Called when the activity is first created. */
public Context context=main.this;
public Map< Integer,Drawable> dayMap;

ProgressDialog dialog;
Context con=main.this;
JSONArray json_array;
public static ArrayList<String> image;
public static ArrayList<Bitmap> imageBitmap;
mygallery gallery;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    new DownloadMoreImages().execute();

    gallery = (mygallery) findViewById(R.id.thisgallery);

}

public class AddImgAdp extends BaseAdapter {
    int GalItemBg;
    private Context cont;

    public AddImgAdp(Context c) {
        cont = c;
        TypedArray typArray = obtainStyledAttributes(R.styleable.Gallery1);
        GalItemBg = typArray.getResourceId(R.styleable.Gallery1_android_galleryItemBackground, 1);
        typArray.recycle();
    }

    public int getCount() {
        return dayMap.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imgView = new ImageView(cont);

        imgView.setImageDrawable(dayMap.get(position));

        imgView.setScaleType(ImageView.ScaleType.FIT_CENTER);
        imgView.setBackgroundResource(GalItemBg);
        imgView.setLayoutParams(new mygallery.LayoutParams(340  , 265));

        return imgView;
    }
}

public class mygallery extends Gallery {

public mygallery(Context ctx, AttributeSet attrSet) {
    super(ctx, attrSet);
    // TODO Auto-generated constructor stub
}

@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY){

  return false;  
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:48:12.497

尝试galleryview.setOnItemclickListener(null);

# php - 在 PHP 中搜索 Google Play 应用程序？

> ID：11223385
> 
> 赞同：2
> 
> 时间：2012-06-27T09:43:14.453
> 
> 标签：php, android, web-services, api, google-play

我想在我的一个用 PHP 构建的网络应用程序中搜索 Google Play 中的 Android 应用程序。有什么办法吗？任何网络服务或 API 或类似的东西？任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:30:25.963

这里有一个非官方的 API 可以使用：

[http://code.google.com/p/android-market-api/](http://code.google.com/p/android-market-api/)

但到目前为止，Google 还没有提供官方的 Google Play API。

# jquery - 动画调整 jquery ui 对话框的大小

> ID：11223388
> 
> 赞同：1
> 
> 时间：2012-06-27T09:43:33.917
> 
> 标签：jquery, jquery-ui

我有 jquery ui 对话框，我想通过动画调整它的大小，

我已经这样做了：http: [//jsfiddle.net/a8LRg/](http://jsfiddle.net/a8LRg/)

但它只调整对话框内的 div 的大小（尝试将对话框移动到屏幕的右边缘或某处），我想调整整个框的大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:18:28.593

您必须调整原始 div 的`.ui-dialog`父容器的大小，而不是内容本身。

见[http://jsfiddle.net/alnitak/wKcDP/](http://jsfiddle.net/alnitak/wKcDP/)

即便如此，对话框仍然会停留在同一个地方——它不会自动将自己重新定位在屏幕的中心。

# plugins - 詹金斯插件显示当天的构建摘要

> ID：11223391
> 
> 赞同：5
> 
> 时间：2012-06-27T09:43:39.400
> 
> 标签：plugins, build, continuous-integration, jenkins

是否有 jenkins 插件报告当天构建结果的摘要？

例如，一个作业每天执行 10 次，在一天结束时，它将报告所有构建的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T10:42:50.683

根据您需要多少定制，您可能会发现[Radiator View 插件](https://wiki.jenkins-ci.org/display/JENKINS/Radiator+View+Plugin)或[eXtreme 反馈面板插件](https://wiki.jenkins-ci.org/display/JENKINS/eXtreme+Feedback+Panel+Plugin)很有用。

您还可以编写自己的基于 Groovy 的自定义作业，利用[Groovy 插件](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin)访问[Jenkins API](http://javadoc.jenkins-ci.org/)以收集和显示您需要的统计信息。

# apache - 如何重定向这些在创建子域时形成的 URL？

> ID：11223392
> 
> 赞同：0
> 
> 时间：2012-06-27T09:43:41.990
> 
> 标签：apache, .htaccess, url-rewriting, subdomain, forum

这是我的网站名称`iamfine.com`，`forum.iamfine.com`是它的子域。

以前的论坛是`iamfine.com`被 访问的`iamfine.com/forum`，现在是被访问的`forum.iamfine.com`。

我没有将文件移动到任何地方。我刚刚在根目录的论坛目录下维护它们。

我想重定向所有论坛 URL，如下所示：

```
http://iamfine.com/forum/index.php 
```

至

```
http://forum.iamfine.com/index.php 
```

我怎样才能做到这一点？

我正在使用红帽 Linux。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:50:57.603

您需要重写论坛目录，但您需要检查它是否已经在子域中。

```
RewriteCond %{REQUEST_URI} ^(www\.)?iamfine\.com$
RewriteRule ^forum/(.*)$ http://forum.iamfine.com/$1 [R=301,L] 
```

这是假设您`RewriteEngine`已开启，并且您想要 301 重定向。

[Apache Mod_Rewrite 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# twitter-bootstrap - 流体布局（Twitter Bootstrap）

> ID：11223396
> 
> 赞同：1
> 
> 时间：2012-06-27T09:43:58.223
> 
> 标签：twitter-bootstrap, fluid-layout

我正在创建一个我想响应的网站。我正在使用 Twitter 引导程序来帮助解决这个问题。我已经设法让它的大部分工作，但网站内的一些元素没有发挥作用。现在也许我只是错过了显而易见的事情，但如果有人能指出我哪里出错了，我将不胜感激，以便 1）我可以纠正问题和 2）从我的错误中吸取教训。

该网站位于[http://growth-mist-5023.herokuapp.com/](http://growing-mist-5023.herokuapp.com/)，我试图修复的部分是滑块下方页面中心的宝丽来。欢迎所有建设性的批评，因为我正在努力学习（尽管来自我的错误），欢迎提出任何建议

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:05:36.020

您可以在 .polaroid 的第二级父级中`<div class="row">`替换为`<div class="row-fluid">`

我认为您不能在 768px 下保持相同的布局（下图为 480px）

![480 像素宽度](../Images/652af11d3533a173fe9bde3fe019bf1e.png)

我建议您在 .span3 顶部使用另一个类，并使用媒体查询覆盖 .span3 在 768 下的行为以创建居中的 2x2。

# python - 已安装 libusb - 但未找到 pyUSB 后端

> ID：11223398
> 
> 赞同：2
> 
> 时间：2012-06-27T09:44:09.627
> 
> 标签：python, libusb, pyusb

我正在尝试使用 wxGlade 为 USB 设备设计一个 GUI。代码的 pyUSB 部分已添加到 Glade 生成的 python 代码中。

但是，有一个错误。'没有可用的后端'

这是对使用函数 usbDev = usb.core.find(idVendor = 0xfffe, idProduct = 0x0001) 的响应

我已经安装了 libusb-win32 仍然无法正常工作。我重新启动了一次PC，但无济于事。请帮忙。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-30T14:15:25.763

我也有同样的问题。
然后，我尝试了 ActivePython2.7.xx

链接-> [http://www.activestate.com/activepython/downloads](http://www.activestate.com/activepython/downloads)

下载 2.7.xx 32 位版本。64位版本不允许安装pyusb！
然后安装pyusb并继续。
工作正常。

# php - PHP的for循环逻辑问题

> ID：11223400
> 
> 赞同：0
> 
> 时间：2012-06-27T09:44:21.507
> 
> 标签：php, logic

这是我的新代码，它几乎可以工作，但我认为我的 while 循环在哪里出错了？

和以前一样，让用户生病将其放入一个 var。然后根据用户的服务年限获取用户的权利，然后计算出他们已经拿走了什么，看看用户是否已经使用了所有的全部权利，然后看他们是否已经使用了所有的半薪权利。

请帮忙？

```
if($this->CURRENT_USER['User']['role_id'] > 3) { //locks out user types

        //Get Holidaytypes
        $types = $this->Holiday->find(
            'all',
            array(
             'conditions' => array(
                                 'Holiday.holidaystype_id' => 3,
                                 'Holiday.user_id' => $id
             )));

        //Get starting date
        $contracts = $this->Holiday->User->Contract->find(
            'all',
            array(
                'conditions' => array(
                'Contract.user_id' => $id//$data['user_id']),
                'order' => array('Contract.startson' => 'ASC')
            )
        );
    //Get How Many sick days
    foreach ($types as $key => $value) {
            global $SickTotal; 
            $typesDataEnds =  strftime ("%u-%d-%Y", $types[$key]['Holiday']['endson']);
            $typesDataStarts = strftime ("%u-%d-%Y", $types[$key]['Holiday']['startson']);

            $SickTotal = count($typesDataEnds - $typesDataStarts);  
            //echo $SickTotal;

        //Get Contract Start & End Dates
        $start = array_shift($contracts);
        $end = array_pop($contracts);

        $endDate = $end['Contract']['endson'];
        $startDate = $start['Contract']['startson'];

        if (empty($endDate)) {
                $endDate = time('now');
        }
        if (!empty($startDate)) {
            $SortEnd = strftime("%Y", $endDate);
            $SortStart = strftime("%Y", $startDate);
            $YearsService = $SortEnd - $SortStart;

            if ($YearsService <= 1) {
                    $SetFullEntitlement = 5;
                    $SetHalfEntitlement = 5;
                    //echo 'one year';
            } elseif ($YearsService >= 2) {
                    $SetFullEntitlement = 10;
                    $SetHalfEntitlement = 10;
                    //echo 'two years';
            } elseif ($YearsService >= 5) {
                    $SetFullEntitlement = 20;
                    $SetHalfEntitlement = 20;
                    //echo 'up to five years';
            } elseif ($YearsService > 5) {
                    $SetFullEntitlement = 30;
                    $SetHalfEntitlement = 30;
                    //echo 'five years or more';
            } else {
                    $SetFullEntitlement = 0;
                    $SetHalfEntitlement = 0;
                    //echo 'no sick pay';
            }
        } else {
            $YearsService = 0;
            //echo 'Sorry No Start Date For You Found!';
        }

        while ($SickTotal > 0) {
            if ($SetFullEntitlement != 0) {
                $SetFullEntitlement--;
            } elseif ($SetHalfEntitlement != 0) {
                $SetHalfEntitlement--;
            }
        }

        echo 'FullPay:';
        echo $SetFullEntitlement;
        echo '<br/><br/>Halpay:';
        echo $SetHalfEntitlement;
        echo $SickTotal;
    } 

        debug($types);
        die();  
        //$this->render('/artists/holidayslist');

    }       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:57:35.070

```
If ($startdate <= 1 year) { 
```

如果这就是你输入的字面意思，那它是行不通的。也许 strtotime 可能会有所了解？

任何状况之下，

```
 For ($i = $Totalsick, $i >= $Fulldays, $i--) {
    For ($i = $Totalsick, $>= $Halfdays, $i--) { 
```

您在其中缺少 $i - 您没有针对 $Halfdays 进行任何评估。您还将 $i 用于两个单独的循环，因此它们都在同一个计数器上。切换第二个循环以使用不同的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:12:50.597

我不太确定我是否完全按照您在此处尝试执行的操作，但您可以稍微整理一下代码并节省代码行。我假设这`$startdate`是用户在几年前开始的。

```
$sickdays= array( 0=>5, 1=>10, 2=>20, 5=>30 );
$userdays= 0;
foreach ( array_keys( $sickdays ) as $years_service )
{
   if ( $years_service <= $startdate )
      $userdays=$sickdays[$years_service];
} 
```

现在`$userdays`应该是该用户的正确带薪病假天数和半天数（在您的示例中两者始终相同）。一个简单的比较应该足以检查他们是否花费了少于或多于分配的天数和半天数。

我没有尝试过，因为我今天没有使用 PHP，所以我相信有人会直接击落我，但是通过设置一次变量并编写更少的行，你应该会发现你的代码更容易维护。

# html - Safari 中的 HTML5 视频

> ID：11223401
> 
> 赞同：0
> 
> 时间：2012-06-27T09:44:26.043
> 
> 标签：html, video, safari, h.264

目前有点困惑，我有 2 个 .mp4 文件，都带有 h.264 编码的视频。

```
| #Safari | 视频 1 | 视频 2 |
| 窗户 | 失败 | 玩过 |
| 操作系统 | 玩过 | 玩过 |

```

我的代码

```
<video width="550" height="400" controls>
    <source src="test/charlie.mp4" type="video/mp4" /> 
    <source src="test/charlie.ogv" type="video/ogg" /> 
  Nope.
</video> 
```

视频 1

```
状态：HTTP/1.1 200 OK
日期：格林威治标准时间 2012 年 6 月 27 日星期三 09:19:02   
服务器：Apache/2.2.22 (Debian)  
最后修改时间：2012 年 6 月 27 日星期三 08:06:41 GMT   
ETag：“aff04e8-49c7f3-4c36fb1f12640”  
接受范围：字节   
内容长度：4835315
连接：关闭   
内容类型：视频/mp4

```

视频 2

```
状态：HTTP/1.1 200 OK
日期：格林威治标准时间 2012 年 6 月 27 日星期三 09:18:37   
服务器：Apache/2.2.22 (Debian)  
最后修改时间：2009 年 12 月 28 日星期一 05:06:33 GMT   
ETag：“aff04eb-45de48-47bc2de762840”  
接受范围：字节   
内容长度：4578888
连接：关闭   
内容类型：视频/mp4

```

我用于视频 1 的 ffmpeg 命令是

```
ffmpeg -y -i input.avi -vcodec libx264 -r 24 -preset medium -crf 20 -bufsize 20M -acodec libfaac -ac 2 -ar 44100 -ab 128k out.mp4
```

以前有人见过这种行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:42:52.247

`-preset medium`看起来有点可疑。那究竟是什么？IIUC H264 取决于 [levels](http://en.wikipedia.org/wiki/H.264/MPEG-4_AVC#Levels] 在设备和浏览器之间有不同的支持。

# clojure - Clojure、Scheme/Racket 和 Common Lisp 之间有什么区别？

> ID：11223403
> 
> 赞同：136
> 
> 时间：2012-06-27T09:44:28.293
> 
> 标签：clojure, lisp, scheme, common-lisp, racket

我知道它们是同一个语言家族的方言，称为 lisp，但究竟有什么区别？如果可能的话，您能否给出一个概述，涵盖诸如语法、特征、特性和资源等主题。

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-06-27T10:07:29.310

他们都有很多共同点：

*   动态语言
*   [强类型](http://en.wikipedia.org/wiki/Strong_typing)
*   编译
*   Lisp 风格的语法，即代码被编写为 Lisp 数据结构（表单），最常见的模式是函数调用，例如：`(function-name arg1 arg2)`
*   强大的宏系统，允许您将代码视为数据并在运行时生成任意代码（通常用于使用新语法“扩展语言”或创建 DSL）
*   常用于函数式编程风格，虽然有能力适应其他范式
*   强调使用 REPL 进行交互式开发（即您在代码的运行实例中进行交互式开发）

Common Lisp 的显着特点：

*   一个强大的 OOP 子系统（[Common Lisp Object System](http://en.wikipedia.org/wiki/Common_Lisp_Object_System)）
*   可能是最好的编译器（根据[http://benchmarksgame.alioth.debian.org/u64q/which-programs-are-fastest.html，Common](http://benchmarksgame.alioth.debian.org/u64q/which-programs-are-fastest.html) Lisp 是最快的 Lisp，尽管其中没有太多......）

Clojure 显着特点：

*   最大的库生态系统，因为您可以直接使用任何 Java 库
*   向量`[]`和地图`{}`用作标准列表之外的标准`()`- 除了向量和地图的一般有用性之外，有些人认为这是一项创新，通常更易读
*   更加强调不变性和惰性函数式编程，在某种程度上受到 Haskell 的启发
*   语言级别的软件事务内存支持的强大并发能力（值得关注： http: [//www.infoq.com/presentations/Value-Identity-State-Rich-Hickey](http://www.infoq.com/presentations/Value-Identity-State-Rich-Hickey)）

方案显着特点：

*   可以说是最简单易学的 Lisp
*   卫生宏（参见[http://en.wikipedia.org/wiki/Hygienic_macro](http://en.wikipedia.org/wiki/Hygienic_macro)） - 优雅地避免了宏扩展中意外符号捕获的问题

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-09-16T05:48:51.197

上面的人错过了一些东西

1.  Common Lisp 也有向量和哈希表。不同之处在于 Common Lisp 使用 #() 表示向量，而没有使用哈希表的语法。方案有向量，我相信

2.  Common Lisp 有阅读器宏，允许您使用新的括号（Racket 也是如此，Scheme 的后代）。

3.  Scheme 和 Clojure 有卫生的宏，而不是 Common Lisp 的不卫生的宏

4.  所有的语言要么是现代的，要么有广泛的翻新项目。Common Lisp 在过去五年中获得了大量的库（主要归功于 Quicklisp），Scheme 有一些现代实现（Racket、Chicken、Chez Scheme 等），而 Clojure 是最近才创建的

5.  Common Lisp 有一个内置的 OO 系统，尽管它与您可能使用过的其他 OO 系统完全不同。*值得注意的是，它不是强制的*——您不必编写 OO 代码。

6.  这些语言有一些不同的设计理念。Scheme 被设计为理解 Actor 模型的最小方言；它后来被用于教学。Common Lisp 旨在统一大量涌现的 Lisp 方言。Clojure 是为并发而设计的。因此，Scheme 以简洁和优雅而著称，Common Lisp 以强大且与范式无关（函数式、OO 等）而著称，而 Clojure 则以支持函数式编程而著称。

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2012-06-28T10:41:11.487

不要忘记 Lisp-1 和 Lisp-2 的区别。

Scheme 和 Clojure 是 Lisp-1：
这意味着变量和函数名称都驻留在同一个命名空间中。

Common Lisp 是 Lisp-2：
函数和变量有不同的命名空间（其实 CL 有很多命名空间）。

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2016-02-24T03:41:42.023

Gimp 是用 Scheme 编写的 :)

事实上，一些人认为可能用 C++ 编写的软件的分配可能是在 Lisp 的保护伞下完成的，很难从一堆中挑选出金苹果。事实上，C++ 并不总是很流行，它只是在今天才流行起来，因为它有更新的历史。在本世纪下半叶，C++ 甚至没有使用多线程，它是 Python 今天成为无用的未经测试的错误胶水代码的污水池的地方。快进一点，现在我们看到函数式编程的兴起，它更像是适应或死亡。我认为就适配部分而言，Java 是正确的。

Scheme 旨在简化 Lisp 语言，这是它的唯一目的，只是它从未真正流行起来。我认为 Clojure 做了类似的事情来简化 JVM 的方案。就像其他所有 JVM 语言一样，它只是为了提升用户体验，只是为了简化 Java 领域的编写样板。

# android - 肥皂响应解析

> ID：11223405
> 
> 赞同：-2
> 
> 时间：2012-06-27T09:44:32.740
> 
> 标签：android, soap, xml-parsing

我已经复制了我在浏览器上得到的 Soap 响应，我如何使用 soap 在 Android 中解析这个响应？我用过 SoapObject obj = (SoapObject)mySoapEnvelop.getResponse(); 但我得到 obj.getPropertyCount() = 1 。

我在这一点上很困惑，谁能帮我出来？？？

这是我的完整回复：

真的

```
<Data>
  <xs:schema id="NewDataSet" >
        <xs:element
            name="NewDataSet"
            msdata:IsDataSet="true"
            msdata:Locale="" >
            <xs:complexType>
                <xs:choice
                    maxOccurs="unbounded"
                    minOccurs="0" >
                    <xs:element name="Table" >
                        <xs:complexType>
                            <xs:sequence>
                                <xs:element                     
                                    name="ID"
                                    minOccurs="0"
                                    type="xs:int" />
                                <xs:element
                                    name="UniqueID"
                                    minOccurs="0"
                                    type="xs:string"
                                    msdata:DataType="System.Guid, mscorlib,
           Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>        
                                <xs:element
                                    name="FullName"
                                    minOccurs="0"
                                    type="xs:string" />
                                <xs:element
                                    name="Title"
                                    minOccurs="0"
                                    type="xs:string" />
                                <xs:element
                                    name="Phone"
                                    minOccurs="0"
                                    type="xs:string" />
                               <xs:element
                                    name="Email"
                                    minOccurs="0"
                                    type="xs:string" />
                                <xs:element
                                    name="CreatedDate"
                                    minOccurs="0"
                                    type="xs:dateTime" />
                               <xs:element
                                    name="Website"
                                    minOccurs="0"
                                    type="xs:string" />
                               <xs:element
                                    name="CompanyName"
                                    minOccurs="0"
                                    type="xs:string" />
                                <xs:element
                                    name="LeadStatus"
                                    minOccurs="0"
                                    type="xs:string" />
                                <xs:element
                                    name="StatusName"
                                    minOccurs="0"
                                    type="xs:string" />
                                <xs:element
                                    name="IsRead"
                                    minOccurs="0"
                                    type="xs:boolean" />
                                <xs:element
                                    name="OwnerName"
                                    minOccurs="0"
                                    type="xs:string" />
                            </xs:sequence>
                        </xs:complexType>
                    </xs:element>
                </xs:choice>
            </xs:complexType>
        </xs:element>
    </xs:schema>

    <diffgr:diffgram>

        <NewDataSet>
           <Table
                diffgr:id="Table1"
                msdata:rowOrder="0" >
                <ID>6</ID>
                <UniqueID>8d93aab5-086f-41bb-b8ec-03b3eb0aa463</UniqueID>
                <FullName>bhatt</FullName>
                <Title />
                <Phone />
                <Email />
                <CreatedDate>2012-02-24T13:14:06.773+05:30</CreatedDate>
                <Website />
                <CompanyName>xyz</CompanyName>
                <LeadStatus>Qualified</LeadStatus>
                <StatusName>Approved</StatusName>
                <IsRead>false</IsRead>
                <OwnerName>Admin admin</OwnerName>
            </Table>
        </NewDataSet>
    </diffgr:diffgram>
</Data> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T09:47:31.053

```
SoapObject result = (SoapObject)envelope.bodyIn;

if(result != null){

    int count = result.getPropertyCount();
    //TextView t = (TextView)this.findViewById(R.id.resultbox);
    //t.setText("SOAP response:\n\n" + count);

    SoapObject nameResult = (SoapObject) result.getProperty(0);
    // TextView t = (TextView)this.findViewById(R.id.resultbox);
    //t.setText("SOAP response:\n\n" + nameResult.toString());

    SoapObject test = (SoapObject) nameResult.getProperty(1);
    // TextView t = (TextView)this.findViewById(R.id.resultbox);
    // t.setText("SOAP response:\n\n" + test.toString());

    SoapObject dar = (SoapObject) test.getProperty(0);
    //TextView t = (TextView)this.findViewById(R.id.resultbox);
    //t.setText("SOAP response:\n\n" + dar.toString());

    SoapObject suvas = (SoapObject) dar.getProperty(0);
    int c = dar.getPropertyCount();
    TextView t = (TextView)this.findViewById(R.id.resultbox);
    t.setText("SOAP response:\n\n" + suvas.toString());
    //t.setText("SOAP response:\n\n" + c);
    //SoapObject nivas = (SoapObject) suvas.getProperty(NewsId);
    //TextView t = (TextView)this.findViewById(R.id.resultbox);
    // t.setText("SOAP response:\n\n" + nivas.toString());

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:18:23.197

我认为您是编程新手。您无法解析此 xml 文件，因为这是 webservice 的服务描述。Webservice 将具有方法，在浏览器中单击这些方法，您将获得任何客户端都可以调用和解析的 xml 输出数据。另请参阅[android/eclipse 中的此 Web 服务](https://stackoverflow.com/questions/10995620/web-service-in-android-eclipse/10995857#10995857)以解析您的数据。

# java - 如何在 Android 应用中实现 Java 编译器和 DEX 转换器？

> ID：11223408
> 
> 赞同：7
> 
> 时间：2012-06-27T09:44:39.557
> 
> 标签：java, android, dex

在尝试寻找[Android Jasper Reporting](https://stackoverflow.com/q/7085943/1482507)的答案时，我发现还有另外两个问题需要回答，我被要求作为问题而不是作为答案提出；）：

我现在的问题是：“是否有任何编译器可以直接在设备上使用”以及“如何在不生根设备的情况下执行这些编译器。如果有人能给我一个提示，我将不胜感激......

* * *

我在这种方法上看了一点时间，发现可以直接在没有根的 Android 设备上创建 APK 的应用程序：

*   TerminalIDE - [https://play.google.com/store/apps/details?id=com.spartacusrex.spartacuside&hl=de](https://play.google.com/store/apps/details?id=com.spartacusrex.spartacuside&hl=de)
*   JavaIDEdroid - [http://code.google.com/p/java-ide-droid/](http://code.google.com/p/java-ide-droid/)
*   助手 - [https://play.google.com/store/apps/details?id=com.aide.ui&hl=en](https://play.google.com/store/apps/details?id=com.aide.ui&hl=en)

看起来他们正在使用来自 eclipse 的编译器和一个移植的 dex 转换器。现在我正试图弄清楚如何做同样的事情。

当然：获取源代码并查看它。但是，虽然我在连接服务器并试图解决它时遇到了奇怪的问题，但我还是按照请求在这里提出这个问题。希望既能帮助别人，也能得到自己的答案；）

* * *

我从我的 indigo 的插件目录中取出了 org.eclipse.jdt.core_3.7.3.v20120119-1537.jar 并尝试了以下代码：

```
 org.eclipse.jdt.internal.compiler.batch.Main ecjMain = new org.eclipse.jdt.internal.compiler.batch.Main(new PrintWriter(System.out), new PrintWriter(System.err), false/*noSystemExit*/, null, progress);
     System.err.println("compiling...");
     ecjMain.compile(new String[] {"-classpath", "/system/framework", storage.getAbsolutePath()+"/Test.java"});
     ecjMain.compile(new String[] {storage.getAbsolutePath()+"/Test.java"});
     System.err.println("compile succeeded!!!"); 
```

有时会抛出无法找到 java.lang.Object 的异常，有时它会在以 100% 的使用率加热我的处理器时卡住什么也不做......

此时我无法弄清楚发生了什么以及为什么。由于我还有其他工作要做，所以这部分必须稍等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T13:53:40.117

[在从JavaIDEdroid](http://code.google.com/p/java-ide-droid/)的源代码中获得灵感并意识到我很愚蠢之后，我成功了（有一段时间我试图将编译器与设备上的 dexified 框架类一起使用——这自然是行不通的）。
在我成功使用 sdcard 上的 ADTs android-jar 的副本编译我的 Test.java 后，我只需要使用 DexClassLoader 加载类。
在告诉自己如何做到这一点的同时，我发现这篇不错的文章[Custom Class Loading in Dalvik](http://android-developers.blogspot.de/2011/07/custom-class-loading-in-dalvik.html)至少启发了我编写这段代码：

```
 File storage = getDir("all41", Context.MODE_PRIVATE);

    System.err.println("copying the android.jar from asssets to the internal storage to make it available to the compiler");
    BufferedInputStream bis = null;
    OutputStream dexWriter = null;
    int BUF_SIZE = 8 * 1024;
    try {
          bis = new BufferedInputStream(getAssets().open("android.jar"));
          dexWriter = new BufferedOutputStream(
              new FileOutputStream(storage.getAbsolutePath() + "/android.jar"));
          byte[] buf = new byte[BUF_SIZE];
          int len;
          while((len = bis.read(buf, 0, BUF_SIZE)) > 0) {
              dexWriter.write(buf, 0, len);
          }
          dexWriter.close();
          bis.close();

    } catch (Exception e) {
        System.err.println("Error while copying from assets: " + e.getMessage());
        e.printStackTrace();
    }

    System.err.println("instantiating the compiler and compiling the java file"); 
    org.eclipse.jdt.internal.compiler.batch.Main ecjMain = new org.eclipse.jdt.internal.compiler.batch.Main(new PrintWriter(System.out), new PrintWriter(System.err), false/*noSystemExit*/, null);
    ecjMain.compile(new String[] {"-classpath", storage.getAbsolutePath()+"/android.jar", Environment.getExternalStorageDirectory().getAbsolutePath() + "/Test.java"});

    System.err.println("calling DEX and dexifying the test class"); 
    com.android.dx.command.Main.main(new String[] {"--dex", "--output=" + storage.getAbsolutePath() + "/Test.zip", Environment.getExternalStorageDirectory().getAbsolutePath() + "/./Test.class"});

    System.err.println("instantiating DexClassLoader, loading class and invoking toString()");
    DexClassLoader cl = new DexClassLoader(storage.getAbsolutePath() + "/Test.zip", storage.getAbsolutePath(), null, getClassLoader());
    try {
        Class libProviderClazz = cl.loadClass("Test");
        Object instance = libProviderClazz.newInstance();
        System.err.println(instance.toString());
    } catch (Exception e) {
        System.err.println("Error while instanciating object: " + e.getMessage());
        e.printStackTrace();
    } 
```

Test.java 仅包含一种方法：

```
public String toString() {
    return "Hallo Welt!";
} 
```

要让它运行，你需要 jars jdt-compiler-xxxjar（在 eclipse 的 plugins 目录中找到）和 dx.jar（在 Android SDK 的目录 platform-tools/lib 中找到）

* * *

并不难；）
现在我将找出在 JasperReports 的源代码中需要更改的内容，以使其在我们心爱的 Android 设备上运行：D

# entity-framework-4 - EF 4.1 中的 POCO 实体和 IsLoaded()

> ID：11223410
> 
> 赞同：0
> 
> 时间：2012-06-27T09:44:46.577
> 
> 标签：entity-framework-4, poco, eager-loading

我正在开发一个企业应用程序，该应用程序利用 EF 4.1 之上的存储库模式，并预先加载到 POCO 实体。通常，调用将如下所示：

```
public IEnumerable<SomeEntity> List(DateTime date)
{
   using (var context = ContextFactory.CreateContext()) // Returns a DbContext
   {
      return CreateQuery<SomeEntity>(context)
         .Include("PATH1")
         .Include("PATH2")
         .Where(...)                  
         .AsNoTracking()
         .ToList();
   }
} 
```

在某些时候，业务层将这些实体转换为 DTO，然后通过 WCF 传输到 Web 应用程序。

由于急切加载相当昂贵，我试图将 .Include 保持在最低限度，因此有时（急切）加载相关属性，有时则不加载。但是，业务层不知道实体中何时存在相关属性，因此我得到了一个 ObjectContextDisposedException，其原因对我来说非常清楚，我不打算更改基本策略（即在之后立即处理上下文急切加载实体）。

但是，我需要检查是否加载了特定的相关属性，检查相关对象是否为 null 不起作用（ObjectContextDisposedException），也没有任何我可以使用的 IsLoaded() 方法。

我在这里卡住了 try/catch 块还是有其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:59:30.907

关闭延迟加载并检查 null 将起作用。您当前的解决方案不能使用延迟加载，因为您在运行查询后立即处理上下文：

```
context.Configuration.LazyLoadingEnabled = false; 
```

# django - Django 按日期转储数据

> ID：11223411
> 
> 赞同：2
> 
> 时间：2012-06-27T09:44:50.307
> 
> 标签：django, date, fixtures, dumpdata

有没有办法或任何模块可用于按日期过滤的所有模型的转储数据？例如，在日期范围或大于给定日期的日期之间。

[limited-the-amount-of-fixtures-in-django-dumpdata](https://stackoverflow.com/questions/11135832/limiting-the-amount-of-fixtures-in-django-dumpdata)处理 ID 以及作为参数的显式模型名称。

我不是指 Django/Python 日期时间字段。我假设当记录被添加到数据库中时，可能会有日期和时间的本地支持来跟踪。我使用postgres。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T06:05:12.987

没有其他方法可以按日期范围限制数据集。

# c# - c# SQL_Latin1_General_CP1_CI_AS 的日期时间格式

> ID：11223413
> 
> 赞同：0
> 
> 时间：2012-06-27T09:45:01.800
> 
> 标签：c#, sql-server-2008-r2

我如何为此排序规则格式化带有日期时间的插入语句...

目前：

```
string SQLst = "UPDATE [LASTUPDATE] SET last_update = '" + DateTime.Now.ToString("yyyy-MM-dd") + "'"; 
```

这适用于 Latin1_General_CI_AS 但现在在不同的服务器上我需要这个语句才能使用设置为排序规则 SQL_Latin1_General_CP1_CI_AS 的服务器

这是我得到的错误：

```
The conversion of a char data type to a datetime data type resulted in an out-of-range datetime value 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T09:46:57.020

根本不执行转换。相反，使用参数化 SQL 并将值设置为参数。您应该对*所有*参数使用参数化 SQL，以避免[SQL 注入攻击](http://bobby-tables.com)、像这样的转换问题，并保持代码更干净。

**一般避免不必要的字符串转换。它们几乎总是细微错误的潜在来源。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:48:13.870

如果你按照@Jon Skeet 所说的那样做会很棒，但如果你不能，那就使用 CONVERT

```
string SQLst = "UPDATE [LASTUPDATE] SET last_update = CONVERT(datetime, '"+DateTime.Now.ToString("yyyy-MM-dd")+"', 120) 
```

# python - 字典到稀疏向量 Python

> ID：11223418
> 
> 赞同：-1
> 
> 时间：2012-06-27T09:45:13.347
> 
> 标签：python

请帮我做这个作业：

makeA({0: 1, 2: 1, 4: 2, 6: 1, 9: 1})

输出应该是这样的：

```
[1, 0, 1, 0, 2, 0, 1, 0, 0, 1] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T09:47:33.883

尝试列表理解：

```
def makeA(d, default=0):
    """Converts a dictionary to a list. Pads with a default element

    Examples:

    >>> makeA({0: 1, 2: 1, 4: 2, 6: 1, 9: 1})
    [1, 0, 1, 0, 2, 0, 1, 0, 0, 1]

    >>> makeA({3: 'kos'},'')
    ['', '', '', 'kos']

    """
    maxElem = max(d)
    return [d.get(x, default) for x in range(maxElem+1)] 
```

函数体的第一行找到 dict 中的最大键（因为`dict`对象在迭代时会产生它们的键）。如果最大键为 5，则需要一个包含 6 个元素 [0..6] 的数组。

最后一行对序列使用列表推导`0 .. maxElem`，并且对于该序列的每个值，`d`为该键分配 的值，如果不存在则为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:55:17.253

是的，您可以在列表理解中使用默认值。但我认为让 defaultdict 类为你做这件事会更好。你会得到更多可读的代码来启动！！:-)

```
from collections import defaultdict

def makeA(d):
    dd = defaultdict(int, d)
    return [dd[n] for n in range(10)]

print makeA({0: 1, 2: 1, 4: 2, 6: 1, 9: 1}) 
```

# extjs - 带有网格的自定义选择器编辑器

> ID：11223423
> 
> 赞同：1
> 
> 时间：2012-06-27T09:45:30.757
> 
> 标签：extjs, extjs4

使用 EXTJS4，我创建了一个自定义网格。我希望使用选择器可以编辑一列。如果我想使用可编辑的文本字段执行此操作，我只需将行定义为：

```
{dataIndex: 'ValueScore', width: 40 text:'Value',
                        field: {xtype: 'textfield'}} 
```

所以我认为我应该能够这样做：

```
{dataIndex: 'ValueScore', width: 40, text:'Value',
                        field: {xtype: 'pickerfield'}} 
```

但是如何定义我的选择器字段等？这是正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T14:03:58.987

感谢 sha 在这方面为我指明了正确的方向。首先，原来我想要一个组合框（单选），而不是选择器。但无论如何，不​​明白（并且找不到文档）是 EXT-JS 将为您创建这些选择对象（如组合框），因此您只需在“字段”参数中传递创建参数. 例如：

```
{dataIndex: 'ValueScore', width: 40, text:'Value',
    field: {xtype: 'combobox', store: myStore, queryMode: 'local', displayField: 'value', valueField: 'value'} 
```

在这里，我预定义了一个名为 myStore 的数据存储，它具有一组有限的值，我希望用户从中进行选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T10:56:07.693

看看`Combobox`,`Date`和`Time`字段如何从类继承`Picker`并做类似的事情。

[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.ComboBox](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.ComboBox)

# android - android中的非静态变量错误

> ID：11223424
> 
> 赞同：0
> 
> 时间：2012-06-27T09:45:33.407
> 
> 标签：android, variables, non-static

所以我有一个主类和另一个有一个变量的类，我需要把它拉到主类中。我已经尝试了一些在这样的已回答问题上发布的方法，但我仍然无法正确处理。

```
public class Example extends MapActivity
{
    public void OnCreate(Bundle savedInstanceState){
        final Button bttn = (Button)findViewById(R.id.button1);
        bttn.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Toast tulos = Toast.makeText(getBaseContext(),
                                               "Area is: "
                                                +MyItemizedOverlay.alue +"" 
                     /*I get the non static variable error here
                       which I get as it is not yet defined, it will be after the user 
                       inputs values into the program*/
                                               ,Toast.LENGTH_LONG);
                tulos.show();
            }
     });

public class MyItemizedOverlay extends ItemizedOverlay<OverlayItem> {
    int alue;
        //irreleveant stuff (I assume)
    public void Calc(Geopoint gp, Mapview map){
        //there's some stuff before the variable I want to get like other variables
        //not relevant for my problem I hope

        alue = (int)Math.round(*formula: derived from user input data*)
    }
} 
```

那么我怎样才能从我的其他班级中获得价值，因为它现在似乎无法获得呢？或者这可能是一个更大问题的迹象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:49:28.970

有两种方式

1 -`make alue static`但这将显示`error that satic variable can't be accesses in non static function Calc`或者`make function Calcalso static as well`转到第 2 点

2-尝试`new MyItemizedOverlay().alue with making alue public`如下

```
 public class Example extends MapActivity
    {
    public void OnCreate(Bundle savedInstanceState){
        final Button bttn = (Button)findViewById(R.id.button1);
    bttn.setOnClickListener(new View.OnClickListener() {
           public void onClick(View v) {
          Toast tulos = Toast.makeText(getBaseContext(),
                  "Area is: "
                  +new MyItemizedOverlay().alue +"" /<--------------------
    /*I get the non static variable error here
     which I get as it is not yet defined, it will be after the user has input 
    values into the program*/
                  ,Toast.LENGTH_LONG);
           tulos.show();
             }
         });

    public class MyItemizedOverlay extends ItemizedOverlay<OverlayItem> {
    public int alue; /<--------------------
        //irreleveant stuff (I assume)
    public void Calc(Geopoint gp, Mapview map){
        //there's some stuff before the variable I want to get like other variables
        //not relevant for my problem I hope
    alue = (int)Math.round(*formula: derived from user input data*)
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:55:20.250

没有访问修饰符`int alue`意味着它是默认的。使其`public int alue`可以从其他类访问。查看[控制对类成员的访问](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

# android - Android 点火 POM 错误

> ID：11223430
> 
> 赞同：0
> 
> 时间：2012-06-27T09:45:39.630
> 
> 标签：android, eclipse, maven, pom.xml, droid-fu

我对所有事物 Maven 和点火都是陌生的。我正在尝试将点火核心设置为库项目以链接到新项目。然而，点火核心 pom 有这个错误......

项目构建错误：不可解析的父 POM：找不到工件 com.github.ignition:ignition:pom:0.3-SNAPSHOT 和 'parent.relativePath' 指向错误的本地 POM

我该如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:26:24.767

[Ignition](https://github.com/kaeppler/ignition)是一个[多模块项目](http://maven.apache.org/pom.html#Aggregation)，由一组相互具有模块间依赖关系的项目组成：

```
ignition/
  ignition-core/
    ignition-core-lib/
    ignition-core-samples/
    ignition-core-tests/
    pom.xml
  ignition-location/
    ignition-location-lib/
    ignition-location-samples/
    ignition-location-tests/
    pom.xml
  ignition-support/
    ignition-support-lib/
    ignition-support-samples/
    pom.xml
  pom.xml 
```

假设您使用 Eclipse 并安装了 m2e 和 m2e-android 插件。您需要将所有项目作为一个组导入 Eclipse，方法是使用`File -> Import ... -> Maven -> Existing Maven Projects`并选择点火/作为根项目文件夹。

不修改pom.xml（打破多模块项目结构），不能在Eclipse中独立导入和使用ignition-core/。

# javascript - Fusion Tables 地图在搜索后损坏

> ID：11223432
> 
> 赞同：0
> 
> 时间：2012-06-27T09:45:47.223
> 
> 标签：javascript, google-maps, google-fusion-tables

这是一张搜索后损坏的 Fusion Tables 地图。在我进行搜索之前，它可以很好地完成所有工作。地图上的点只是不显示（尽管下表中的信息已更新）。

我究竟做错了什么？

```
//write the map on page load
$(document).ready(function() {

    createMap();

});

//ft layer
var layer;

//ft table
var tableid = 4176964;

//map
var map;

//geocoder instance
var geocoder = new google.maps.Geocoder();

//infowindow
var infowindow;

//gviz
var table;

//FT data in gviz object
var datatable;

//center of map
var center = new google.maps.LatLng(52.146973340644735, 4.7021484375);

//default zoom
var zoom = 7;
google.load('visualization', '1', {
    'packages': ['table']
});

function createMap() {
    //map options
    map = new google.maps.Map(document.getElementById('map_canvas'), {
        center: center,
        zoom: zoom,
        minZoom: 2,
        maxZoom: 12,
        scrollwheel: true,
        disableDragging: true,
        mapTypeControl: false,
        navigationControl: true,
        streetViewControl: false,
        scaleControl: false,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        navigationControlOptions: {
            style: google.maps.NavigationControlStyle.SMALL,
            position: google.maps.ControlPosition.RIGHT_TOP
        }
    });

    //intial fusion layer & supress fusion info window
    layer = new google.maps.FusionTablesLayer(tableid, {
        suppressInfoWindows: true,
        query: "SELECT Latitude FROM " + tableid,
        map: map
    });

    //adds click listener on layer
    google.maps.event.addListener(layer, 'click', function(e) {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
        if (infowindow) infowindow.close();
        else infowindow = new google.maps.InfoWindow();

        //write FT data to info window
        text = infowindow.setContent('<p>Op <b>' + e.row['Datum'].value + '</b> storte een ' + e.row['Type'].value + ' van ' + e.row['Vliegmaatschappij'].value +' met registratienummer ' + e.row['Registratie'].value + ' neer bij <b>' + e.row['Locatie'].value + '</b>.<p><p>Hierbij overleden ' + e.row['Slachtoffers'].value + ' van de ' + e.row['Inzittenden'].value + ' inzittenden en ' + e.row['Grond'].value + ' overleden op de grond.<p><p><a href="http://aviation-safety.net/database/record.php?id=' + e.row['ASN'].value + '" target="_blank">Meer informatie op Aviation Safety Network</a>.');

        infowindow.setPosition(e.latLng);
        map.setCenter(e.latLng);
        infowindow.open(map);
    });

    //query FT data for visualization
    var queryText = encodeURIComponent("SELECT Datum, Locatie, Type, Registratie, Vliegmaatschappij, Slachtoffers, Inzittenden, Grond FROM 4176964 ORDER BY 'Datum' ASC");
    var query = new google.visualization.Query('http://www.google.com/fusiontables/gvizdata?tq=' + queryText);
    query.send(getData);
}

//write FT data to table
var getData = function(response) {
    console.log('getData');
    console.log(response);
    table = new google.visualization.Table(document.getElementById('visualization'));
    datatable = response.getDataTable();
    table.draw(datatable, {
        showRowNumber: true
    });

    //add table listener when row clicked
    google.visualization.events.addListener(table, 'select', selectHandler);
}

//match table data to map data

function selectHandler() {

    //get lat/lng from FT
    var selection = table.getSelection();
    var Datum = datatable.getValue(selection[0].row, 0);
    var Locatie = datatable.getValue(selection[0].row, 1);    
    var Type = datatable.getValue(selection[0].row, 2);
    var Registratie = datatable.getValue(selection[0].row, 3);
    var Vliegmaatschappij = datatable.getValue(selection[0].row, 4);
    var Slachtoffers = datatable.getValue(selection[0].row, 5);   
    var Inzittenden = datatable.getValue(selection[0].row, 6);
    var Grond = datatable.getValue(selection[0].row, 7);

    infoWindowContent = ('<p>Op <b>' + e.row['Datum'].value + '</b> storte een ' + e.row['Type'].value + ' van ' + e.row['Vliegmaatschappij'].value +' met registratienummer ' + e.row['Registratie'].value + ' neer bij <b>' + e.row['Locatie'].value + '</b>.<p><p>Hierbij overleden ' + e.row['Slachtoffers'].value + ' van de ' + e.row['Inzittenden'].value + ' inzittenden en ' + e.row['Grond'].value + ' overleden op de grond.<p><p><a href="http://aviation-safety.net/database/record.php?id=' + e.row['ASN'].value + '" target="_blank">Meer informatie op Aviation Safety Network</a>.');

}

function changeSearch(dater) {
    dater = document.getElementById('newDatum').value;
    console.log('dater: ' + dater);

    //with a query based on the variables
    var sql = "SELECT Datum, Locatie, Type, Registratie, Vliegmaatschappij, Slachtoffers, Inzittenden, Grond FROM " + tableid + " WHERE Datum CONTAINS '" + dater + "' ORDER BY 'Datum' ASC";
    var polySql = "SELECT Latitude FROM " + tableid + " WHERE Datum CONTAINS '" + dater + "'";
    console.log('SQL: ' + sql);
    console.log('Polygon-SQL: ' + polySql);
    layer.setOptions({
        query: polySql,
        map: map
    });
    var queryText = encodeURIComponent(sql);
    var query = new google.visualization.Query('http://www.google.com/fusiontables/gvizdata?tq=' + queryText);
    query.send(getData);

    //adds a click listener on search layer
    google.maps.event.addListener(layer, 'click', function(e) {
        if (infowindow) infowindow.close();
        else infowindow = new google.maps.InfoWindow();

        //writes the info window on search layer
        infowindow.setContent('<p>Op <b>' + e.row['Datum'].value + '</b> storte een ' + e.row['Type'].value + ' van ' + e.row['Vliegmaatschappij'].value +' met registratienummer ' + e.row['Registratie'].value + ' neer bij <b>' + e.row['Locatie'].value + '</b>.<p><p>Hierbij overleden ' + e.row['Slachtoffers'].value + ' van de ' + e.row['Inzittenden'].value + ' inzittenden en ' + e.row['Grond'].value + ' overleden op de grond.<p><p><a href="http://aviation-safety.net/database/record.php?id=' + e.row['ASN'].value + '" target="_blank">Meer informatie op Aviation Safety Network</a>.');

        infowindow.setPosition(e.latLng);
        map.setCenter(e.latLng);
        infowindow.open(map);
    });
}
//end function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:32:20.397

这适用于地图上的查询： [SELECT Latitude FROM 4176964 WHERE Datum <= '16 JAN 1950'](http://www.geocodezip.com/v3_FusionTablesLayer_linktoA.html?lat=52.364236&lng=4.421623&zoom=7&type=m&tableid=4176964&tablequery=SELECT%20Latitude%20FROM%204176964%20WHERE%20Datum%20%3C%3D%20%2716%20JAN%201950%27)

我怀疑您需要将数据视为数字（即使您将其指定为字符串）

# c++ - 存在间接路由时的强制转换

> ID：11223433
> 
> 赞同：0
> 
> 时间：2012-06-27T09:45:52.870
> 
> 标签：c++, visual-c++, gcc, casting

有人可以解释转换规则，以及何时转换不明确吗？我对以下案例感到有些困惑，它在 MSVC++ (Visual Studio 2010) 和 gcc-4.3.4 上*给出了不同的答案。*

```
#include <string>

class myStr
{
  std::string value;

public:
  myStr(const char* val) : value(val) {}
  operator const char*() const {return value.c_str();}
  operator const std::string() const {return value;}
};

myStr byVal();
myStr& byRef();
const myStr& byConstRef();

int main(int, char**)
{
  myStr foo("hello");
  std::string test;

  // All below conversions fail "ambiguous overload for 'operator='" in gcc
  // Only the indicated coversions fail for MSVC++
  test = foo;  // MSVC++ error "'operator =' is ambiguous"
  test = static_cast<std::string>(foo);

  test = byVal();  // MSVC++ error "'operator =' is ambiguous"
  test = static_cast<std::string>(byVal());  // MSVC++ error 
             // "'static_cast' : cannot convert from 'myStr' to 'std::string'"

  test = byRef();  // MSVC++ error "'operator =' is ambiguous"
  test = static_cast<std::string>(byRef());

  test = byConstRef();  // MSVC++ error "'operator =' is ambiguous"
  test = static_cast<std::string>(byConstRef());

  return 0;
} 
```

哪些规则规定哪些转换是合法的？是否有任何合规的方法可以明确地使用一个`myStr`定义强制转换为`const char*`和的类`const std::string`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:09:33.260

隐式转换都是模棱两可的，因为`std::string`重载的赋值运算符同时采用`const std::string&`and `const char*`。这意味着您的两个转换运算符都是同样好的选择，因此存在歧义：

```
myStr -> std::string -> operator=(const std::string&)
myStr -> const char* -> operator=(const char*) 
```

含糊不清`static_cast`是因为您使用演员表来创建临时`std::string`对象。`std::string`从 a或 a创建它同样有效`const char*`，因此再次考虑您的两个转换运算符。

```
myStr -> std::string -> static_cast<std::string>(std::string)
myStr -> const char* -> static_cast<std::string>(const char*) 
```

您可以通过转换为参考来打破歧义：

```
test = static_cast<const std::string&>(foo); 
```

这仍然会创建一个临时的，因为转换运算符返回一个对象。但是，该转换现在是隐式的，因此不能涉及多个用户定义的转换；因此，它只能通过你来完成，`operator std::string()`没有歧义。

```
myStr -> std::string -> static_cast<const std::string&>(std::string)
myStr -> const char* -> std::string -> static_cast<const std::string&>(std::string)
      ^^             ^^  two implicit user-defined conversions - not allowed 
```

您还可以考虑更改转换运算符以返回`const`引用，以避免不必要的临时操作。

# php - 如何从 mysql 中的日期加载 {html_select_date} 中的日期

> ID：11223435
> 
> 赞同：3
> 
> 时间：2012-06-27T09:45:58.830
> 
> 标签：php, mysql, smarty

当一天来自mysql时，我需要显示下拉列表

我的查询是

```
select doj from user_detatils where user_id='2' 
```

我使用 html_select_date 作为下拉选项

代码如下

```
 {html_select_date start_year=1970 month_format="%b" field_order="dmy" 
  field_array="date" prefix="" day_id="dd" month_id="mm" year_id="yy" 
  year_empty="Year" month_empty="Month" day_empty="Day" } 
```

如果表格返回 doj，则将在下拉列表中选择该日期，否则下拉列表未选择任何值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:16:53.610

跟进[如何将数字更改为单词中的月份](https://stackoverflow.com/questions/11190250/how-can-change-the-numeric-to-month-in-words/11191192#11191192)。

[{html_select_date}](http://www.smarty.net/docs/en/language.function.html.select.date.tpl)解释了时间参数。当然，它在解释这`time=null`将导致“未选择日期”方面做得很差，并且任何其他评估为假的（假，0，“”，...）将选择“当前日期”。

所以你的 PHP 应该检查数据库在 doj 中是否有一个有效的日期，否则将该变量设置为`null`.

# app-store-connect - 付费应用程序的 iTunes Connect 请求合同

> ID：11223440
> 
> 赞同：2
> 
> 时间：2012-06-27T09:46:19.600
> 
> 标签：app-store-connect

当我尝试在 iTunes Connect 上请求合同时出现问题。

在**合同、税务和银行**页面上，我看到**法人实体**列，我可以在其中看到我的地址和邮政编码。

但是，当我尝试在下一个 Web 表单中请求付费申请合同时，我会得到带有另一个号码的新邮政编码。

有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:58:18.253

我向 Apple 发送了电子邮件，在其中描述了我的问题。作为回应，他们只是建议我申请合同。

# android - 如何在 android 中使用 Switch 小部件

> ID：11223442
> 
> 赞同：3
> 
> 时间：2012-06-27T09:46:23.900
> 
> 标签：android, widget

我使用 Android Views 并在我的设计中使用 Switch View。我收到如下错误：

> 缺少样式。是否为此布局选择了正确的主题？使用布局上方的主题组合框选择不同的布局，或修复主题样式引用。
> 
> 未能在当前主题 java.lang.NullPointerException 中找到样式“switchStyle” 异常详细信息记录在 Window > Show View > Error Log 中

我无法修复此错误，任何人都可以帮忙。

也分享你在这个主题上的实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:48:15.757

我通过更改我的活动主题来解决它，使用 DeviceDefault 主题，它会起作用。

# seo - 我应该将 schema.org 用于建议框和问答网站吗？

> ID：11223445
> 
> 赞同：0
> 
> 时间：2012-06-27T09:46:38.180
> 
> 标签：seo, schema.org

我目前正在开发一个 getSatisfaction 网站，例如，用户可以在其中发布想法，并就各种 subjets 提出问题。我应该在想法和问题上使用 schema.org 吗？我可以使用哪种模式？

我可能正在考虑使用[http://schema.org/CreativeWork](http://schema.org/CreativeWork)模式。

我已经将其子 BlogPosting 用于我开发的博客。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:46:22.910

我没有看到适合问答格式的架构。我不会使用不合适的，但充其量它会混淆 Google 并损害您的排名。在最坏的情况下，这会被视为虐待并让您受到惩罚。

# session - Struts2 更改语言环境

> ID：11223446
> 
> 赞同：1
> 
> 时间：2012-06-27T09:46:38.927
> 
> 标签：session, struts2, request, locale

我想知道是否可以将语言环境更改为操作，而不是通过 url 参数...

事实上，我有一个身份验证操作，对于经过身份验证的用户，我想切换到适当的语言环境。

我试过了 ：

```
session.put("WW_TRANS_I18N_LOCALE", "my_locale") 
```

或者

```
session.put("WW_TRANS_I18N_LOCALE", new Locale("my_locale")) 
```

但还是什么都没有……

任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:23:13.977

您应该将您的语言环境信息作为参数传递给操作。像这样的东西：

```
<s:url id="url" action="your-action" >
   <s:param name="request_locale" >${your-locale}(e.g. de, en, etc.)</s:param>
</s:url> 
```

**更新 1**

这是链接，可能会对您有所帮助。[如何在自定义 Struts 2 ActionMapper 中设置语言环境](https://stackoverflow.com/questions/1292981/how-to-set-locale-in-a-custom-struts-2-actionmapper)

你也可以试试这个，但我不确定它是否有效。将此代码段放入您的操作类中。ActionContext.getContext().setLocale(new Locale("your-locale"));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:07:57.527

您也可以使用： `ServletActionContext.getContext().setLocale(new Locale("en","US"));`

# c# - 将新 System.Windows.Forms.Control 对象转换为 System.Windows.Forms.Textbox

> ID：11223451
> 
> 赞同：1
> 
> 时间：2012-06-27T09:47:03.340
> 
> 标签：c#, winforms, casting, textbox, controls

将 Control 转换为 System.Windows.Forms.Textbox 时出现 InvalidArgumentException：

> 无法将“System.Windows.Forms.Control”类型的对象转换为“System.Windows.Forms.TextBox”类型。

```
System.Windows.Forms.Control control = new System.Windows.Forms.Control();
control.Width = currentField.Width;

//here comes the error
((System.Windows.Forms.TextBox)control).Text = currentField.Name; 
```

我这样做是因为我有不同的控件（Textbox、MaskedTextbox、Datetimepicker...），它们将动态添加到面板并具有相同的基本属性（大小、位置...-> 控件）

为什么不能选演员？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T09:49:07.413

强制转换失败，因为`control` *不是`TextBox`*. 您可以将 a`TextBox`视为控件（类型层次结构的更高级别），但不能将任何`Control`视为 a `TextBox`。对于设置通用属性，您可以将所有内容视为`Control`并设置它们，而您必须事先创建要使用的实际控件：

```
TextBox tb = new TextBox();
tb.Text = currentField.Name;

Control c = (Control)tb; // this works because every TextBox is also a Control
                         // but not every Control is a TextBox, especially not
                         // if you *explicitly* make it *not* a TextBox
c.Width = currentField.Width; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:50:57.373

您的控件是 Control 类的对象，它是父类。可能是更多控件从父级继承。

因此，孩子可以被视为父母，但反之则不行。

而是使用这个

```
if (control is System.Windows.Forms.TextBox)
    (control as System.Windows.Forms.TextBox).Text = currentField.Name; 
```

或者

制作一个 TextBox 对象。那将永远是一个文本框，你不需要检查/转换它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T09:52:15.583

乔伊是对的：

您的控件不是文本框！您可以使用以下方法测试类型：

```
System.Windows.Forms.Control control = new System.Windows.Forms.Control();
control.Width = currentField.Width;

if (control is TextBox)
{
//here comes the error
((System.Windows.Forms.TextBox)control).Text = currentField.Name;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T09:52:32.963

您的所有控件都继承自 System.Windows.Forms.Control。但是，例如，TextBox 与 DateTimePicker 不同，因此您不能将它们相互转换，只能转换为父类型。这是有道理的，因为每个控件都专门用于执行某些任务。

鉴于您拥有不同类型的控件，您可能希望先测试类型：

```
if(control is System.Windows.Forms.TextBox)
{
 ((System.Windows.Forms.TextBox)control).Text = currentField.Name;
} 
```

您还可以使用 ' [as](http://msdn.microsoft.com/en-us/library/cscsdfbt%28v=vs.71%29.aspx) ' 关键字推测性地转换为类型：

```
TextBox isThisReallyATextBox = control as TextBox;

if(isThisReallATextBox != null)
{
  //it is really a textbox!
} 
```

# android - 滚动条未出现在 Android 平板电脑网络浏览器中

> ID：11223457
> 
> 赞同：2
> 
> 时间：2012-06-27T09:47:43.183
> 
> 标签：android, css, tablet

我设计了一个带有可滚动内容的 html 聊天窗口。它在桌面上很好。但是当我想在 android 平板电脑（华硕）网络浏览器中看到该视图时，滚动条没有出现。但我能够像滚动一样移动内容。touchmove时如何查看滚动条？

我用简单的 html 和 css 创建了应用程序。谢谢。

# security - j_security_check 困境 - 解决方法

> ID：11223459
> 
> 赞同：0
> 
> 时间：2012-06-27T09:47:48.863
> 
> 标签：security, jsp, servlets, servlet-filters

在我的 Web 应用程序中使用 MySQL 领域身份验证实现 j_security_check 之前。我将表单信息发送到 servlet（动作控制器），该 servlet 将对用户进行身份验证**，然后将有关用户的一些信息添加到会话对象**. 然后其他 servlet 可以使用这个会话对象。实现 j_security_check 后，我不知道如何将登录的详细信息添加到会话对象，因为调用的是 j_security_check 而不是我的控制器，然后它转发到请求的页面。就像用户登录时一样 - 需要表单上指定的数据来创建会话对象，但是我目前无法找到任何访问提交的数据的方式，因为它被传递给了 j_security_check。我尝试使用过滤器，但我似乎无法读取针对 j_security_check 提交的数据。关于我应该做什么的任何建议（我只想在用户登录后立即设置一个会话对象）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:22:08.337

您可以在`j_security_chec`k 中获得的唯一信息是`username`和`password`。我没有看到在会话中存储密码的用例。

但是，任何时候都可以使用获取用户名`HttpServletRequest.getRemoteUser()`

# c# - 如何通过指定发件人地址使用 Microsoft.Office.Interop.Outlook.MailItem 发送邮件

> ID：11223462
> 
> 赞同：5
> 
> 时间：2012-06-27T09:47:56.770
> 
> 标签：c#, email, outlook, vsto

我正在使用 Interop 通过 Outlook 发送电子邮件，但我无法指定发件人电子邮件地址。

我想向来自同一发件人（来自）的多个用户发送邮件。我需要提及发件人的电子邮件地址。但是，我无法使用 Intellisense 找到允许我指定它的属性。

请帮忙。

```
Microsoft.Office.Interop.Outlook.Application olkApp1 = 
    new Microsoft.Office.Interop.Outlook.Application();
Microsoft.Office.Interop.Outlook.MailItem olkMail1 =
    (MailItem)olkApp1.CreateItem(OlItemType.olMailItem);
        olkMail1.To = txtpsnum.Text;
        olkMail1.CC = "";
        olkMail1.Subject = "Assignment note";
        olkMail1.Body = "Assignment note";
        olkMail1.Attachments.Add(AssignNoteFilePath, 
            Microsoft.Office.Interop.Outlook.OlAttachmentType.olByValue, 1, 
                "Assignment_note");
olkMail1.Save();
//olkMail.Send(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T10:52:45.673

您正在使用 Outlook 发送邮件。由于必须将 Outlook 配置为使用`from`您的邮件地址，因此您不能`from`直接提供地址。但是，您可以选择 Outlook 上可用的帐户。例如 ：

```
using Outlook = Microsoft.Office.Interop.Outlook;

Outlook.Accounts accounts = olkApp1.Session.Accounts;
foreach (Outlook.Account account in accounts)
{
    // When the e-mail address matches, send the mail.
    if (account.SmtpAddress == "from@mail.com")
    {
            olkMail1.SendUsingAccount = account;
            ((Outlook._MailItem)olkMail1).Send();
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T10:45:26.817

[Send](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.send.aspx)方法使用默认帐户发送邮件。要指定不同的帐户来发送邮件，请在调用 Send 方法之前将[SendUsingAccount](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.sendusingaccount.aspx)属性设置为所需的[帐户。](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.account.aspx)

```
var application = new Application();
var mail = (_MailItem) application.CreateItem(OlItemType.olMailItem);
mail.To = "anonymous@somedomain.com";
....
Outlook.Account account = Application.Session.Accounts["MyOtherAccount"];
mailItem.SendUsingAccount = account;
mail.Send(); 
```

更多信息可以在这里找到：

[http://msdn.microsoft.com/en-us/library/ff184652.aspx](http://msdn.microsoft.com/en-us/library/ff184652.aspx)

# c# - 如何测试 ActionFilterAttribute - OnActionExecuted

> ID：11223473
> 
> 赞同：4
> 
> 时间：2012-06-27T09:48:33.983
> 
> 标签：c#, asp.net-mvc-3, unit-testing, attributes

我正在尝试对自定义 ActionFilterAttribute 进行单元测试。例如：

```
public class ActionAuthorizationAttribute: ActionFilterAttribute 
{

  protected override void  OnActionExecuted(ActionExecutedContext filterContext)
  {
    filterContext.HttpContext.Response.Redirect("SecurityException");
  }
} 
```

如何编写一个单元测试来测试任何具有此属性的操作是否会重定向到 SecurityException。

**我的尝试**

```
[TestClass]
public class TestControllerResponse
{
  [TestMethod]
  public void TestPermissionAccepted()
  {
    var controller = new TestController();
    var result = controller.Index() as RedirectToRouteResult;
    Assert.IsNotNull(result);
    Assert.AreEqual("SecurityException", result.RouteValues["action"]);
  }
}

protected class TestController : Controller
{
  [ActionAuthorization]
  public ActionResult Index()
  {
    return RedirectToAction("UnfortunatelyIWasCalled");
  }

} 
```

不幸的是，测试失败了。索引操作重定向到“UnfortunatelyIWasCalled”而不是“SecurityException”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T02:49:38.213

我不会对控制器的动作进行单元测试来测试动作过滤器的行为。它们是两个不同的关注点。例如，如果有人去更改 ActionAuthorizeAttribute 的 OnActionExecutedMethod 以返回不同的异常，那么您对控制器 Action 的单元测试将因错误原因而失败。这是因为，您正在测试 Action，但您的代码还在 ActionFilter 中测试其他内容。单元测试就是独立地验证工作单元的行为。如果您真的想测试 ActionFilter，我会单独对过滤器进行单元测试。在执行 Action 之后是否调用 ActionFilter 是一个单独的问题，并且已经被 MVC 框架测试过。

# html - 使用任何标签将 C/C++ 库接口到 HTML5

> ID：11223474
> 
> 赞同：1
> 
> 时间：2012-06-27T09:48:34.923
> 
> 标签：html, google-chrome, internet-explorer, c++11, firefox

我的目的是制作一个具有以下功能的 UI：

1.  应该能够在 Windows、Mac 和 Linux 等所有操作系统平台上运行/工作。
2.  应该能够与几乎所有的网络浏览器一起工作，如 IE、Chrome、Firefox 等。
3.  应该能够链接或接口 C/C++ 库。

如果可能的话，可以嵌入任何其他工具来链接这些 C 和 C++ 库。

实际上，这里没有涉及服务器。只有独立的应用程序必须链接 C 和 C++ 库并在所有 3 个操作系统和几乎所有可能的 Web 浏览器上运行。

有可能吗？请建议我最合适的方式来跨越这个障碍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:19:58.280

使用 Qt 并使用 qml webView 元素打开 HTML5 页面怎么样？您可以将 Qt 代码移植到几乎所有可能的平台，在它之上您可以运行您的 HTML 代码。

> *应该能够在 Windows、Mac 和 Linux 等所有操作系统平台上运行/工作。*

Qt 代码可以移植到几乎所有平台。

> *应该能够与几乎所有的网络浏览器一起工作，如 IE、Chrome、Firefox 等。*

您可以在几乎所有平台上通过 qml 的 webView 元素或 QtWebkit 使用它。

> *应该能够链接或接口 C/C++ 库。*

如果需要，使用 Qt 的 C++ 代码，您将能够通过进程间通信链接到其他库/进程。

* * *

这些链接可能会提供见解：

> 1.  [qml WebView 元素](http://doc.qt.digia.com/4.7-snapshot/qml-webview.html#javaScriptWindowObjects-prop)
>     
>     
> 2.  [将 qt 与 HTML 一起使用](http://qt-project.org/forums/viewthread/17980)
>     
>     
> 3.  [选择你的 UI 武器 - C++ vs. QML vs. HTML5](http://qt-project.org/videos/watch/choosing-your-ui-weapon-c-vs.-qml-vs.-html5)

# filtering - 同步框架过滤未检测到外键更改

> ID：11223476
> 
> 赞同：0
> 
> 时间：2012-06-27T09:48:37.817
> 
> 标签：filtering, microsoft-sync-framework

我遇到了 Microsoft Sync Framework 2.1 的问题，遇到了绊脚石。为了简化，假设我正在同步两个表，**ConfigSet**和**ConfigItem**，它们具有以下结构：

```
|ConfigSet        |
|-----------------|
|ConfigSetID (PK) |
|ConfigItemID (FK)|

|ConfigItem       |
|-----------------|
|ConfigItemID (PK)|
|ConfigItem.Data  | 
```

我对两者都使用了由**ConfigSetID**驱动的过滤子句：

```
ProvisionerObject.Tables["ConfigSet"].FilterParameters.Add(new SqlParameter("@ConfigSetID", SqlDbType.UniqueIdentifier));
ProvisionerObject.Tables["ConfigSet"].FilterClause = "[side].[ConfigSetID] = @ConfigSetID"

ProvisionerObject.Tables["ConfigItem"].FilterParameters.Add(new SqlParameter("@ConfigSetID", SqlDbType.UniqueIdentifier));
ProvisionerObject.Tables["ConfigItem"].FilterClause = "[side].[ConfigItemID] in (SELECT ConfigSet.ConfigItemID FROM ConfigSet WHERE ConfigSet.ConfigSetID = @ConfigSetID)" 
```

如果我然后在服务器端创建两个 ConfigItem 记录“Item1”和“Item2”，并创建一个 ConfigSet 记录“Set1”，它具有指向“Item1”的外键，然后执行同步它会正常工作并且客户端将从 ConfigItem 中获取“Set1”记录和仅“Item1”。

如果我随后在服务器上对“Set1”执行更新，使其现在指向“Item2”，则同步框架会检测到 ConfigSet 中的更改，但随后会在客户端上抛出外键约束，说记录“Item2”没有存在。

似乎在同步 ConfigItem 时它没有检测到任何更改，因为从技术上讲，ConfigItem 没有任何更改，但是如果这是第一次同步，过滤子句将返回 Item2。

我知道每个表都是独立同步的，但是即使该表没有更改，有没有办法强制它获取“Item2”记录？更好的是（尽管我认为我正在用框架可以做的事情来推动我的运气！）如果它可以删除客户端上的“Item1”，因为这在技术上不再被客户端同步/引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:48:13.590

不幸的是，同步框架不支持分区重新对齐或行进出范围。

您的方案中最简单的解决方法是对 item2 进行虚拟更新以将其标记为已更改。但是，这意味着此更改也将发送给具有 item2 的其他客户端，因为没有真正更改，所以浪费了事务。

至于客户端中超出范围的行，您可以从客户端删除它们并拦截 ChangesSelected 事件中的更改并从更改数据集中删除这些行，这样它们就不会传播到服务器。或者您可以简单地清理客户端表并根据新的过滤器值重新初始化。

# php - Magento 价格根据货币变化

> ID：11223483
> 
> 赞同：1
> 
> 时间：2012-06-27T09:49:02.450
> 
> 标签：php, currency, magento-1.6

情况：我正在创建具有多种货币的 Magento 网上商店（每种货币的网站）并将价格范围设置为网站。

问题：如果我改变一种货币的价格，另一种不会改变。当我将产品范围设置为多个网站（货币）时，每种货币的产品具有相同的价格。

问题是：

*   如何通过将价格从初始货币转换为每种新货币来设置货币之间的范围。
*   如何通过仅以一种基础货币或全球范围（所有网站）更改价格来更新每个网站（货币）的价格。

# iphone - 如何将tableView中特定单元格的隐藏属性设置为NO

> ID：11223493
> 
> 赞同：0
> 
> 时间：2012-06-27T09:49:39.643
> 
> 标签：iphone, ios

我是 iphone 新手。我有一个小小的疑问，我有一个 66 行的表格视图，最初我为所有行放置了一个进度视图，但在( )中`viewdidload`我将其设置为隐藏`tableViewClass``ShowProgressViewCont`

```
cell.progressView.hidden = YES; 
```

这里（单元格）是 CustomCell 类的引用。在这个类中，我声明了一个进度视图，并且在这个类中也设置了 setter 和 getter 属性

在表格视图中，每个单元格中都有一个下载按钮。如果我们单击该下载按钮（例如在第 66 个单元格中）。我们必须仅删除该特定第 66 个单元格的进度视图的隐藏属性。其余 65 个单元格应该仅像所有单元格一样隐藏进度视图。

如果有人知道这一点，请帮助我....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:28:34.660

您熟悉表格单元格被重用的概念吗？

viewDidLoad 不是操作单个单元格内容的合适位置。如果表格太小以至于其所有单元格都适合屏幕（在两个方向上），它可能会正常工作。当表格中的单元格比屏幕上显示的单元格多时，那些最近变得不可见的单元格将被重新使用并再次显示。因此，如果屏幕上一次有 6 个单元格，则表格单元格编号。7（有时是 8）将与单元格编号相同。1.

cellForRowAtIndexPath 将是隐藏/取消隐藏单元格某些视图的更好位置。如果它已经是自定义单元格，那么单元格的 layoutSubViews 也可能是合适的。但是，只有在 tableViewController 的 cellForRowAtIndexPath 中，您才能轻松访问表的数据和关联的单元格。

每次单元格即将变为可见时，都会调用 cellForRowAtIndexPath。使用默认的重用机制来确保正确的单元对象将被重用。这非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:01:27.667

首先在 CellForRowAtInedexPath 的下载按钮中设置行号

```
 downloadButton.tag = indexPath.row
   [downloadButton addTarget:self action:@selector(actionDownload:) forControlEvents:UIControlEventTouchUpInside]; 
```

在 actionDownload 中，从 button.tag 创建 IndexPath 并从 "cellForRowAtIndexPath:" 获取单元格，最后通过 reloadRowsAtIndexPaths: withRowAnimation: 更新

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:32:30.853

您的模型应该跟踪每个单击按钮的进度。出于此答案的目的，假设模型保存在名为 modelInformationArray 的属性中（该属性将包含与表中每个单元格相关的对象数组）

当单击单元格的下载按钮时，modelInformationArray 会被修改，使其对象知道正在为其处理下载。

该对象在名为 downloadProcessingStarted 的成员中报告下载处理。还有许多其他方法可以做到这一点。

要回答您的问题......然后取消隐藏进度视图，您将在 tableView:cellForRowAtIndexPath: 的 UITableViewDataSource 实现中执行以下操作。

```
- (UITableViewCell*)tableView:tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath {
    YourCustomCell* cell = ...
    if ([[self.modelInformationArray objectAtIndex:indexPath.row] downloadingProcessingStarted])
        cell.progressView.hidden = NO;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T09:55:26.370

获取索引 65 处的单元格，然后将其转换为您的自定义单元格

```
UITableViewCell *cell = [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:64 inSection:0]];

YourCustomCell *customCell = (YourCustomCell *)cell;
customCell.progressView.hidden = NO; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T10:08:50.313

在您的自定义单元格中隐藏您的进度视图意味着隐藏每个进度视图的默认属性，然后您的按钮单击方法。

```
CutomeCell *cell = (CutomeCell *)[[button superview] superview];
[cell.progressView setHidden:NO];
NSIndexPath *rowToReload = [[self tableView] indexPathForCell:cell];
NSArray* rowsToReload = [NSArray arrayWithObjects:rowToReload, nil];
[UITableView reloadRowsAtIndexPaths:rowsToReload withRowAnimation:UITableViewRowAnimationNone]; 
```

这可以帮助你...

# c++ - 如何将负时间戳转换为字符串。C++

> ID：11223494
> 
> 赞同：3
> 
> 时间：2012-06-27T09:49:48.603
> 
> 标签：c++, timestamp, time-t

我有负时间戳（即 1970 年以前的日期，例如 15.04.1896）。如何将给定的时间戳转换为正确的日期字符串。

正如我正在尝试做的那样

```
#include <ctime>
#include <string>
#include <iostream>

int _tmain(int argc, _TCHAR* argv[])
{
    time_t t = std::atol("-2326924800");
    struct tm * ptm;
    ptm = gmtime ( &t );

    std::cout << ptm->tm_year;
    std::cin.get();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:52:29.207

由于看起来您使用的是 Windows（我从 TCHAR 推断），您可能想要使用[`FileTimeToSystemTime()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724280%28v=vs.85%29.aspx). 它适用于自 1601 年以来的数年。

例子：

```
#include <windows.h>
#include <stdio.h>
#include <string.h>

int main(void)
{
  SYSTEMTIME sysTime;
  FILETIME fileTime;
  long long seconds;

  sysTime.wYear = 1896;
  sysTime.wMonth = 4;
  sysTime.wDayOfWeek = 0;
  sysTime.wDay = 15;
  sysTime.wHour = 0;
  sysTime.wMinute = 0;
  sysTime.wSecond = 0;
  sysTime.wMilliseconds = 0;

  if (SystemTimeToFileTime(&sysTime, &fileTime))
  {
    seconds = *(long long*)&fileTime;
    seconds /= 10000000; // 100-nanoseconds to seconds since Jan 1st 1601
    seconds -= 11644473600; // 1601 to 1970
    printf("%d.%d.%d is %lld seconds from Jan 1st 1970\n",
           sysTime.wDay,
           sysTime.wMonth,
           sysTime.wYear,
           seconds);
  }
  else
  {
    printf("SystemTimeToFileTime() failed with error 0x%X\n", GetLastError());
  }

  // Now, convert it back...

  seconds += 11644473600; // 1970 to 1601
  seconds *= 10000000; // seconds since Jan 1st 1601 to 100-nanoseconds
  *(long long*)&fileTime = seconds;

  memset(&sysTime, 0, sizeof(sysTime));

  if (FileTimeToSystemTime(&fileTime, &sysTime))
  {
    seconds /= 10000000; // 100-nanoseconds to seconds since Jan 1st 1601
    seconds -= 11644473600; // 1601 to 1970
    printf("%lld seconds from Jan 1st 1970 is %d.%d.%d\n",
           seconds,
           sysTime.wDay,
           sysTime.wMonth,
           sysTime.wYear);
  }
  else
  {
    printf("FileTimeToSystemTime() failed with error 0x%X\n", GetLastError());
  }

  return 0;
} 
```

输出：

```
15.4.1896 is -2326147200 seconds from Jan 1st 1970
-2326147200 seconds from Jan 1st 1970 is 15.4.1896 
```

粗略估计 (1896-1970+3.5/12)*365.2425*24*3600 给出 -2326010337。所以，我们很好。

**编辑**：

如果您想要一个不涉及任何操作系统或编译器特定功能的 DIY 解决方案，请使用我的秒到日期转换器从[这个答案](https://stackoverflow.com/a/11197532/968261)。

这个片段展示了如何使用它：

```
 struct tm t;
  SecondsSinceEpochToDateTime(&t, -2326924800LL);
  printf("-2326924800 is %d.%d.%d %d:%d:%d\n",
         t.tm_mday,
         t.tm_mon + 1,
         t.tm_year + 1900,
         t.tm_hour,
         t.tm_min,
         t.tm_sec); 
```

这是它的输出：

```
-2326924800 is 6.4.1896 0:0:0 
```

是的，-2326924800 不是公历的 15.4.1896。现在是 6.4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:24:50.857

我建议使用[boost::posix_time](http://www.boost.org/doc/libs/1_49_0/doc/html/date_time/posix_time.html)。

```
std::cout << boost::posix_time::to_simple_string(boost::posix_time::from_time_t(0) + boost::posix_time::seconds(-2326924800)); 
```

`time_t`不合适，因为它没有指定接受负值（请参阅[What is finally a time_t typedef to?](https://stackoverflow.com/questions/471248/what-is-ultimately-a-time-t-typedef-to)）

# .htaccess - Magento 类别网址无限重定向

> ID：11223495
> 
> 赞同：1
> 
> 时间：2012-06-27T09:49:52.893
> 
> 标签：.htaccess, magento

在 Magento 中，我目前在站点类别 url 上没有尾部斜杠，即 www.example.com/gifts

我想将类别网址更改为带有斜杠，例如 www.example.com/gifts/

为此，我进入了管理部分，并在系统 -> 配置 -> '目录' -> 搜索引擎优化下编辑了 SEO 部分。

我在类别 URL 后缀框中添加了一个“/”。

这都是标准的，在重建索引后，该站点确实会显示所有带有斜杠的类别 URL，例如 www.example.com/gifts/

**问题**是，当我点击 www.example.com/gifts/ （或现在的任何类别）时，我得到一个**无限重定向循环**。

Chrome 显示“错误 310 (net::ERR_TOO_MANY_REDIRECTS)：重定向太多。”，并且在 url 上执行 CURL -I -0 会显示*301 重定向*到*Location: /gifts/*。

我检查了我的 htaccess 文件，绝对没有与斜杠或类别重定向相关的规则。

编辑：我也在 htaccess 上启用了日志记录，并且我不断收到如下行：

```
strip per-dir prefix: /var/www/blah/app-core/index.php -> index.php 
```

这正常吗？

有没有人以前见过这个问题，或者有任何想法可能导致这个问题？

它对我来说是一个完全的障碍，所以任何见解或帮助将不胜感激。

谢谢保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:49:11.160

哈哈！！！对不起，这里有点生气！

终于弄明白了——我认为这可能是 Magento 1.4 中的一个错误。

在 Mage/Core/Model/Url/Rewrite.php 文件中，请求路径为：

```
$requestPath = trim($request->getPathInfo(), '/'); 
```

所以我对“/gifts/”的要求变成了“礼物”。Magento 然后尝试附加一个斜线，它会无限循环。

当您将 trim() 更改为**ltrim()**时，它可以工作。即 $requestPath = ltrim($request->getPathInfo(), '/');

现在 '/gifts/' 是 'gifts/'，而 www.example.com/gifts/ 是 200！

当然，现在为了这样一个小调整而不得不扩展 Magento 是一件很痛苦的事情......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:01:06.413

听起来您的 url 重写表需要重建。登录到您的管理区域并重新索引 url 重写。

# javascript - Javascript正则表达式调整

> ID：11223499
> 
> 赞同：2
> 
> 时间：2012-06-27T09:50:08.657
> 
> 标签：javascript, regex, mootools

使用 mootools 我有一个像这样的正则表达式：

```
new RegExp('^([^\\D'+ separator +']+)(\\d{2})'); 
```

在字符串中，它在每 2 个字符之后插入分隔符中定义的字符。我希望它只插入最后两个。

例子：

```
 String     Result
 123456     12.34.56  // what it does now
 123456     1234.56   // what it should do 
```

我对正则表达式没有太多经验，因此感谢任何帮助或指向体面教程的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:55:28.230

如果你的字符串只包含数字，这不等于除以 100 吗？

```
'' + str / 100 
```

它可能取决于语言环境；-)

如果您有更多我可以使用的边缘案例，我可以改进这个答案。

* * *

如果你绝对必须只是正则表达式，你总是可以使用这个：

```
'123456'.replace(/(.)(\d{2})$/, function($0, $1, $2) { 
    return $1 + '.' + $2; 
}); 
```

这将保护您免受可能导致的字符串的影响`NaN`，例如`'foo'`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:52:18.453

不要为此使用正则表达式：

```
var str = "123456".split('').reverse().join('');
var x = str.substring(0,2) + '.' + str.substring(2);
var final = x.split('').reverse().join('');

console.log(final); 
```

[**现场演示**](http://jsfiddle.net/CTnV8/1/)

当然你可以检查字符串长度是否大于2

```
if (str.length > 2)
    // ... 
```

* * *

或者使用字符串`slice`函数：

```
str ="123456";
str.slice(0, -2) + "." + str.slice(-2); 
```

**它是如何工作的？** 我会把它分成几块：

```
// Start at the beginning of the string grab all the chars 
// and stop two chars before the end of the string
str.slice(0, -2)

// Start at two chars before the end of the string, take all the chars until  
// the  end of the string.
str.slice(-2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:08:07.307

假设字符串总是超过 2 个字符：

```
str.slice(0, -2) + "." + str.slice(-2) 
```

引用[String.slice](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/slice)。

# r - 用ggplot聚合/求和

> ID：11223501
> 
> 赞同：10
> 
> 时间：2012-06-27T09:50:16.827
> 
> 标签：r, ggplot2

有没有办法对数据求和`ggplot2`？

我想做一个气泡图，其大小取决于 z 的总和。

目前我正在做类似的事情

```
dd <- ddply(d, .(x,y), transform, z=sum(z))
qplot(x,y, data=dd, size=z) 
```

但是我觉得我在写两次相同的东西，我希望能够写一些东西

```
qplot(x,y, data=dd, size=sum(z)) 
```

我看了看，`stat_sum`但`stat_summmary`我也不确定它们是否合适。

有可能`ggplot2`吗？如果不是，那么编写这两行的最佳方法是什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T03:08:09.827

它可以`stat_sum`在 ggplot2 中使用。默认情况下，点大小表示比例。要获得点大小来表示计数，请`size = ..n..`用作美学。第三个变量的计数（和比例）可以通过第三个变量的权重（`weight = cost`）作为美学来获得。一些例子，但首先是一些数据。

```
library(ggplot2)
set.seed = 321
# Generate somme data
df <- expand.grid(x = seq(1:5), y = seq(1:5), KEEP.OUT.ATTRS = FALSE)
df$Count = sample(1:25, 25, replace = F)
library(plyr)
new <- dlply(df, .(Count), function(data) matrix(rep(matrix(c(data$x, data$y), ncol = 2), data$Count), byrow = TRUE, ncol = 2))
df2 <- data.frame(do.call(rbind, new))
df2$cost <- 1:325 
```

数据包含根据两个因素分类的单位：X1 和 X2；第三个变量是每个单位的成本。

绘图 1：绘制每个 X1 - X2 组合的元素**比例**。`group=1`告诉 ggplot 从数据框中的单位总数中计算比例。

```
ggplot(df2, aes(factor(X1), factor(X2))) + 
  stat_sum(aes(group = 1)) 
```

![在此处输入图像描述](../Images/c299524c4bfe6a8b8b74d3a0a7028387.png)

绘图 2：绘制每个 X1 - X2 组合的元素**数**。

```
ggplot(df2, aes(factor(X1), factor(X2))) + 
  stat_sum(aes(size = ..n..)) 
```

![在此处输入图像描述](../Images/f9888a1959a777c07bf979b0d14e10d7.png)

图 3：绘制每个 X1 - X2 组合的元素成本，即`weight`第三个变量。

```
ggplot(df2, aes(x=factor(X1), y=factor(X2))) + 
     stat_sum(aes(group = 1, weight = cost, size = ..n..)) 
```

![在此处输入图像描述](../Images/15f500f15254e328267e3328ba683143.png)

图 4：绘制每个 X1 - X2 组合处数据框中所有元素的总成本的比例

```
ggplot(df2, aes(x=factor(X1), y=factor(X2))) + 
     stat_sum(aes(group = 1, weight = cost)) 
```

![在此处输入图像描述](../Images/6182455b5b6fb6fe9e8ab1132ebb2efa.png)

图 5：绘制比例，但该比例不是超出数据框中所有元素的总成本，而是超出 X1 每个类别中元素的成本。也就是说，在每个 X1 类别中，X2 单位的主要成本出现在哪里？

```
ggplot(df2, aes(x=factor(X1), y=factor(X2))) + 
     stat_sum(aes(group = X1, weight = cost)) 
```

![在此处输入图像描述](../Images/2e1df25218eaa14ad5a0f7e42c4ebc37.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T21:45:14.267

您可以将`ddply`调用放入`qplot`：

```
d <- data.frame(x=1:10, y=1:10, z= runif(100))
qplot(x, y, data=ddply(d, .(x,y), transform, z=sum(z)), size=z) 
```

或者使用`data.table`包。

```
DT <- data.table(d, key='x,y')
qplot(x, y, data=DT[, sum(z), by='x,y'], size=V1) 
```

# php - 服务器能否在用户不知情的情况下通知 iOS/Android 应用程序有关更改？

> ID：11223504
> 
> 赞同：1
> 
> 时间：2012-06-27T09:50:31.060
> 
> 标签：php, android, ios, sync

我是移动开发的新手，我有一个项目要做，过去几天我一直在寻找问题的解决方案，直到我迷路了，所以我希望我能在这里找到最终答案。

我有一个服务器（php & MySQL DB）并在 iOS + Android 中开发一个从服务器检索数据的移动应用程序。移动应用程序应在第一次运行时从服务器获取数据并将其保存在手机中，以便在再次运行时获取存储的数据。

每当发生更改时，服务器应“在用户不知情的情况下”通知应用程序，以便应用程序可以立即更新数据。

我考虑过使用 web 服务（可能是带有 RestKit 的 REST）或在服务器记录上应用某种时间戳，这都不是问题。

我的问题是我找不到一种方法让服务器本身在发生更改时通知应用程序有关更改并允许应用程序然后更新新数据。我考虑过使用推送通知，但 - 特别是在 iOS 中 - 它不能对用户隐藏。

那么有没有可能的方法呢？复杂吗？值得吗？其他建议？

正如我所说，我是新人，所以在这种情况下，我的想法可能错了，很抱歉，我搜索了这些问题，但找不到我的问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:59:54.080

你能解释一下你想要做什么吗？这里的经典习惯用法是在应用程序启动时更新数据（您可以使用缓存版本，如果它仍然是最新的并且如果用户没有连接）如果用户不知道为什么要更新数据?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:14:15.247

我不确定我是否正确地关注了您的问题，但听起来您希望服务器知道已进行更改，然后将这些更改通知用户。

为什么不运行 cron 作业以在您想要的任何定时周期检查服务器，然后向用户发送推送通知（在 iOS 上）

[iOS 推送通知教程](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

我几乎没有 Android 经验，但在这些设备上进行推送通知似乎更棘手。（我相信有人会尽快纠正我：D）

这可能会有所帮助：

[Android 推送通知](http://tokudu.com/2010/how-to-implement-push-notifications-for-android/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T10:32:53.303

在用户不知道应用程序的情况下，在 iOS 上是不可能的 - 您可以从服务器端更新应用程序数据的唯一方法是如果...

1.  ...应用程序已打开，您正在打开一个 tcp 连接
2.  ...您发送推送消息（以便用户打开应用程序）

在这两种情况下，用户都知道应用程序正在运行。您可以做的是在用户使用应用程序时在后台更新数据。您可以使用推送消息让用户打开应用程序。但就是这样。

在 Android 上，如果您让应用程序运行后台服务，可能会有更多可能性，但是不要忘记，如果您的应用程序正在耗尽电池等，用户会删除它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T09:55:39.153

至少在 iOS 中，一个解决方案是使用 Apple Push Notifications。如果您不想打扰并希望它尽可能透明，您可以定义您想要什么样的“通知”信号，如下所示：

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:
         (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)]; 
```

至于后台进程，我认为您无法做到这一点。Apple 对您可以在后台执行的操作非常严格（不是后台线程，而是您不在应用程序中时作为工作进程的后台）。我的建议是使用通知徽章，这样用户就会知道有新的东西，当他进入应用程序时，你可以开始更新。

* * *

我不得不同意亚瑟：

> 如果用户不知道，为什么要更新数据？

您应该始终使其尽可能用户友好。在我看来，不让您的用户知道应用程序可能会消耗资源是不好的。想象一下，您正在更新 2mb 的信息，而用户正在使用 3G...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T10:36:36.680

对于应用程序数据更新，您应该检查服务器上数据的版本。最好的方法是让您的应用程序在每次用户启动应用程序时询问您的服务器：**用户启动应用程序 -> 应用程序询问服务器是否有 RESTful API 样式的新数据 -> 服务器响应是/否 -> 如果有是新数据，应用程序将其加载到设备。**

# haskell - 将 Haskell parsec 转换为 FParsec

> ID：11223508
> 
> 赞同：2
> 
> 时间：2012-06-27T09:50:43.940
> 
> 标签：haskell, f#, parsec, fparsec

如何翻译这个 Haskell 代码：

```
import Text.ParserCombinators.Parsec((<|>), unexpected, lookAhead, noneOf, char)
import Control.Monad(when)

data BracketElement = BEChar Char | BEChars String | BEColl String | BEEquiv String | BEClass String

p_set_elem_char = do 
  c <- noneOf "]"
  when (c == '-') $ do
    atEnd <- (lookAhead (char ']') >> return True) <|> (return False)
    when (not atEnd) (unexpected "A dash is in the wrong place in a bracket")
  return (BEChar c) 
```

到 FParsec ？最好的方法是没有单子语法来提供良好的性能。

在此先感谢，亚历山大。

抱歉有点误导。我稍微纠正了问题以使 Haskell 代码可编译：

```
import Text.ParserCombinators.Parsec((<|>), (<?>), unexpected, lookAhead, noneOf, char)
import Control.Monad(when)
import Data.Functor.Identity
import qualified Text.Parsec.Prim as PR

-- | BracketElement is internal to this module
data BracketElement = BEChar Char | BEChars String | BEColl String | BEEquiv String | BEClass String
                    deriving Show

p_set_elem_char :: PR.ParsecT [Char] u Identity BracketElement  
p_set_elem_char = do 
  c <- noneOf "]"
  when (c == '-') $ do
    atEnd <- (lookAhead (char ']') >> return True) <|> (return False)
    when (not atEnd) (unexpected "A dash is in the wrong place in a bracket")
  return (BEChar c) 
```

现在可以重现 *p_set_elem_char* 计算。

我真诚地感谢所有帮助过我的人。

我做了自己的近似，但不幸的是，它没有那么实用：

```
type BracketElement = BEChar of char 
                    | BEChars of string 
                    | BEColl of string 
                    | BEEquiv of string 
                    | BEClass of string

let p_set_elem_char : Parser<BracketElement, _> = 
    fun stream ->
        let stateTag = stream.StateTag
        let reply = (noneOf "]") stream
        let chr = reply.Result
        let mutable reply2 = Reply(BEChar chr)
        if reply.Status = Error && stateTag = stream.StateTag then
            reply2.Status <- Error
            reply2.Error <-  reply.Error
        else if chr = '-' && stream.Peek() <> ']' then
            reply2.Status <- Error
            reply2.Error <- messageError ("A dash is in the wrong place in a bracket")
        reply2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:55:24.137

使用`BracketElement`toyvo 答案中的类型，您可以执行类似的操作

```
let pBEChar : Parser<_, unit> = 
  let c = 
    pchar '-' .>> followedByL (pchar ']') "A dash is in the wrong place in a bracket"
    <|> noneOf "-]"
  c |>> BEChar 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T21:52:58.077

Similar to what Daniel proposed, you could write that parser as

```
let pSetElementChar : Parser<_,unit> = 
    satisfy (function '-' | ']' -> false | _ -> true)
    <|> (pchar '-' .>> followedByString "]")
    |>> BEChar 
```

If you want to add your custom message to the error, you could use `followedByL` like in Daniel's answer or you could add the message using the `fail` primitive

```
let pSetElementChar2 : Parser<_,unit> = 
  satisfy (function '-' | ']' -> false | _ -> true)
  <|> (pchar '-' .>> (followedByString "]" 
                      <|> fail "A dash is in the wrong place in a bracket"))
  |>> BEChar 
```

A low-level implementation can be as simple as

```
let pSetElementChar3 : Parser<_,unit> =
  fun stream ->
    let c = stream.ReadCharOrNewline()
    if c <> EOS then
      if c <> '-' || stream.Peek() = ']' then Reply(BEChar c)
      else Reply(Error, messageError "A dash is in the wrong place in a bracket")
    else
      Reply(Error, unexpected "end of input") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T14:01:44.673

我不太了解 FParsec，但这是一个幼稚的尝试，根据评论对性能进行了一些修正：

```
type BracketElement =
    | BEChar of char
    | BEChars of string
    | BEColl of string
    | BEEquiv of string
    | BEClass of string

let parseBEChar : Parser<BracketElement,unit> =
    let okChars = noneOf "]"
    let endTest =
        (lookAhead (skipChar ']') >>. parse.Return(true))
        <|> parse.Return(false)
    let failure = fail "A dash is in the wrong place in a bracket"
    parse {
        let! c = okChars
        if c = '-' then
            let! atEnd = endTest
            if not atEnd then
                return! failure
            else
                return BEChar c
        else
            return BEChar c
    } 
```

# c# - 去除特定标签的 Html

> ID：11223509
> 
> 赞同：1
> 
> 时间：2012-06-27T09:50:45.780
> 
> 标签：c#, asp.net, html, regex

我有一个 html 字符串：

```
<td style=\"border-bottom: windowtext 1pt solid; 
border-left: 
windowtext 1pt solid; 
padding-bottom: 0cm; 
padding-left: 3.5pt; 
width: 489pt; 
padding-right: 3.5pt; 
background: #dfdfdf; 
border-top: 
windowtext 1pt solid; 
border-right: windowtext 1pt solid; 
padding-top: 0cm;\" valign=\"top\" colspan=\"4\">

    <strong>Kan fejlen genskabes?</strong> 

    </td>\r\n 
```

我有一段代码允许特定标签：

```
 public string HtmlStrip( string input)
    {
        string acceptable = "img|n|br|tr|td|table|tbody|th|td style strong";
        string stringPattern = @"</?(?(?=" + acceptable + @")notag|[a-zA-Z0-9]+)(?:\s[a-zA-Z0-9\-]+=?(?:(["",']?).*?\1?)?)*\s*/?>";
        return Regex.Replace(input, stringPattern,String.Empty);
    } 
```

我现在要做的是仅在“td”或“table”标签内允许“strong”标签。有任何想法吗？

奖励：我怎样才能在“td”标签中只允许特定的样式？例如，如果我愿意，只能向左填充？

# android - Android 内部文件存储还是 SQLite？

> ID：11223510
> 
> 赞同：0
> 
> 时间：2012-06-27T09:50:48.587
> 
> 标签：android, file, sqlite

我正在开发一个 Android 应用程序。这个应用程序处理联系信息（姓名、号码、照片），我需要将其存储在本地以供以后处理。这些数据也需要经常修改。

什么是实现这一目标的好方法？我在考虑“文件输入流内部文件存储（通过序列化实现）”和 SQLite，但对它们都感到困惑。

谁能告诉我这两者在性能、速度、内存消耗等方面的区别？

（此外，什么是 SQLite3？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:55:24.410

（我个人意见）

与文件相比，数据库速度较慢，但​​它可以帮助您以排列格式获取数据，并且您可以轻松地对其执行任何聚合功能。我建议您在您的要求中使用数据库。因为您可以以排列格式存储特定记录。

[SQLite](http://www.sqlite.org/)是一个实现自包含、无服务器、零配置、事务性 SQL 数据库引擎的软件库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:56:13.053

因为您的数据就像任何人的联系信息姓名、号码、照片，所以更喜欢 `SQlite`添加更新和删除将变得简单有效

考虑点原生联系人也将 SQlite 用于相同类型的数据集

# android - Android：活动堆叠问题或系统启动问题

> ID：11223515
> 
> 赞同：1
> 
> 时间：2012-06-27T09:51:01.117
> 
> 标签：android, android-intent

我的应用程序中的主/启动器活动是登录页面（活动 A）。一旦用户通过身份验证，他们就会被带到应用程序的主要区域，例如活动 B。所以现在这个任务的当前活动堆栈是 A > B。

然后我按下手机上的主页按钮并被带到 Android 主屏幕。我通过 HTC Desire Z 中的快捷键重新启动我的应用程序（参见空格后的图像，有两个快捷方式 1 和 2），然后我被带到 Activity A，而不是 Activity B。Activity 堆栈现在是 A > B > A，或者现在有两个单独的任务，分别具有活动堆栈 A > B 和 A。我想要的是在我重新启动应用程序时回到活动 B..![在此处输入图像描述](../Images/67b33c5540ed8da23a981061df6d7c45.png)

[我按照这个链接](https://stackoverflow.com/questions/6356467/activity-stack-ordering-problem-when-launching-application-from-android-app-inst)
上面的解决方案适用于 2.3.3 但在 ICS 4.0.3 中它有一个问题，我没有被带到活动 B。
我该如何解决这个问题，在 ICS 中我看不到什么 Intent 标志系统按下快捷键时用于启动活动，这是系统错误吗？
请帮助
尼茨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:59:48.620

我倾向于使用这样的登录模式。我将使用`A`to 表示`Login`和`B`表示`Main`应用程序。

我制作`B`了启动器`Activity`，并在其中`onCreate()`检查是否需要登录，如果需要，则立即启动`Activity A`。一旦`A`完成，我`finish()`就完成了，这样我就回到了`B`。

这样，我的活动堆栈堆栈永远不会包含登录活动，除非它正在被使用。即，在登录完成后，只有`B`在堆栈上。

# backbone.js - 仅添加新模型时使用带有 slim.php 的骨干网显示 500（内部服务器错误）

> ID：11223516
> 
> 赞同：1
> 
> 时间：2012-06-27T09:51:03.927
> 
> 标签：backbone.js

我从[https://github.com/ccoenraets/backbone-cellar](https://github.com/ccoenraets/backbone-cellar)获得了这段代码，因为我正在尝试学习backbone.js。当我尝试使用 slim.php 向数据库添加新模型时，它显示 500（内部服务器错误）。但是当我试图获取、更新、删除它的工作良好时。为什么它只在添加时显示错误？

请帮助我，谢谢。

```
 window.WineView = Backbone.View.extend({

        initialize: function () {
            this.render();
        },

        render: function () {
            $(this.el).html(this.template(this.model.toJSON()));
            return this;
        },

        events: {
            "click .save"   : "beforeSave",
            "click .delete" : "deleteWine"

        },

        beforeSave: function () {
            var self = this;
            var check = this.model.validateAll();
            if (check.isValid === false) {
                utils.displayValidationErrors(check.messages);
                return false;
            }

            // Upload picture file if a new file was dropped in the drop area
            if (this.pictureFile) {
                this.model.set("picture", this.pictureFile.name);
                utils.uploadFile(this.pictureFile,
                    function () {
                        self.saveWine();
                    }
                );
            } else {
                this.saveWine();
            }
            return false;
        },

        saveWine: function () {
            var self = this;
            this.model.save(null, {
                success: function (model) {
                    self.render();
                    app.navigate('wines/' + model.id, false);
                    utils.showAlert('Success!', 'Wine saved successfully', 'alert-success');
                },
                error: function () {
                    utils.showAlert('Error', 'An error occurred while trying to add this item', 'alert-error');
                }
            });
        },

        deleteWine: function () {
            this.model.destroy({
                success: function () {
                    alert('Wine deleted successfully');
                    window.history.back();
                }
            });
            return false;
        }

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:58:29.943

我有同样的问题。在您的 /tutorial/api 目录中；打开 index.php 并在函数 addWine() 中查找第一行：

error_log('addWine\n', 3, '/var/tmp/php.log');

评论那一行：

//error_log('addWine\n', 3, '/var/tmp/php.log');

这应该可以解决您的问题，它确实解决了我的问题。

# php - 在 Joomla 中包含一个 php 文件！1.5调用另一个php文件

> ID：11223520
> 
> 赞同：0
> 
> 时间：2012-06-27T09:51:25.057
> 
> 标签：php, mysql, include, joomla1.5

我想在 Joomla 中包含一个 PHP 程序！文章，这个程序调用了不同的PHP文件来显示我想要的东西，我尝试安装不同的插件，如Jumi，directPHP等，但我不断收到以下错误：

应用程序引发了异常类 EDatabaseError 并带有消息“无法连接到数据库服务器：mysql 错误：[0: 连接错误到服务器 '' 与用户 ''] 在 CONNECT(, '', ' *** *', ) '

该程序独立运行良好，但是当我在 Joomla 上运行它时它不起作用。

连接参数是从包含“config.php”中获取的，但似乎它们不会从包含的 PHP 文件中获取包含。

此外，当我尝试包含我制作的独立菜单时，会将我重定向到 Joomla 的 index.php！根目录。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:17:37.830

我做过类似的事情，但必须安装几个扩展才能让它们工作。

首先，我使用 jce WYSIWYG。然后安装在任何地方（它可以让你在文章中放置模块）创建一个新模块，type=Custom HTML code your php there...

我知道这并不完全是您所描述的，但这是我所经历的最接近的情况。

如果它不能立即工作，请务必使用 JCE WYSIWYG 检查设置，以免破坏您的 php.ini 文件。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:00:28.823

尝试使用'Flexi Custom Code'扩展是一个很好的检查：[http ://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-modules/15251](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-modules/15251)

它是一个模块扩展，您可以将其与“任何地方的模块”一起使用以放置在“内容区域”（文章）中。要调用不同的 php 文件，您可以使用 php include 或 required once 代码

如果有任何疑问，请随时询问....实现这一点

# php - 比较存储为日期时间的 MySQL 日期

> ID：11223521
> 
> 赞同：0
> 
> 时间：2012-06-27T09:51:37.660
> 
> 标签：php, mysql

我尝试了几个 mySQL 查询来比较存储为日期时间的日期列。我需要`queries`根据对表单采取的操作创建几个不同的。下面是我创建的 sql 示例：

```
CREATE OR REPLACE VIEW franchise_filter AS SELECT * FROM `c_data`.`franchise_leads`    WHERE `lead_added` BETWEEN UNIX_TIMESTAMP(DATE_SUB(now(),INTERVAL 3 Months)) AND UNIX_TIMESTAMP(now()) 
```

或者

```
CREATE OR REPLACE VIEW franchise_filter AS SELECT * FROM `c_data`.`franchise_leads` WHERE `lead_added` <= 2012-06-27 00:00:00 
```

在第二个示例中，日期由 PHP 提供，使用：

```
date("Y-m-d 00:00:00", strtotime($date_now, "+6 months")) 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:54:53.393

你非常接近：使用

```
... WHERE `lead_added` <= "2012-06-27 00:00:00" 
```

（注意引号）和

```
... WHERE `lead_added` BETWEEN DATE_SUB(NOW(),INTERVAL 3 MONTH) AND NOW() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:55:59.133

```
BETWEEN NOW() + INTERVAL 3 Months AND NOW() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:57:15.610

尝试使用[DATE()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date)函数，例如 -

```
SELECT * FROM table WHERE DATE(date_time_field) <= '2012-06-27'; 
```

此外，您可以使用[CURRENT_DATE()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_curdate)函数代替 NOW()。

# java - Spring 配置的 JMS Listener Idle 超时

> ID：11223522
> 
> 赞同：2
> 
> 时间：2012-06-27T09:51:40.413
> 
> 标签：java, spring-jms

我有一个配置了 Spring 的 JMS 侦听器，如果消息在几个小时内没有收到（如果它空闲而没有收到任何消息），之后它将不会选择任何消息。有人可以解释一下这里可能是什么问题。

非常感谢。

# linux-kernel - kmalloc标志中的GFP是什么意思？

> ID：11223523
> 
> 赞同：15
> 
> 时间：2012-06-27T09:51:40.700
> 
> 标签：linux-kernel, kmalloc

`GFP`中的flags是什么意思`kmalloc`？例如`GFP_KERNEL`，`GFP_ATOMIC`？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-27T11:22:25.147

GFP = 获取免费页面 = `__get_free_pages`。

这些标志是传递给分配内存的函数的标志，例如`__get_free_pages`and `kmalloc`，告诉它们在分配时可以做什么和不可以做什么。

例如，`GFP_ATOMIC`意味着在分配时不必发生上下文切换（这意味着不可能进行分页）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:49:29.597

查看[include/linux/gfp.h](http://lxr.linux.no/linux+v3.4.4/include/linux/gfp.h#L100)文件了解详细信息。

```
 100 /* This equals 0, but use constants in case they ever change */
 101 #define GFP_NOWAIT      (GFP_ATOMIC & ~__GFP_HIGH)
 102 /* GFP_ATOMIC means both !wait (__GFP_WAIT not set) and use emergency pool */
 103 #define GFP_ATOMIC      (__GFP_HIGH)
 104 #define GFP_NOIO        (__GFP_WAIT)
 105 #define GFP_NOFS        (__GFP_WAIT | __GFP_IO)
 106 #define GFP_KERNEL      (__GFP_WAIT | __GFP_IO | __GFP_FS)
 107 #define GFP_TEMPORARY   (__GFP_WAIT | __GFP_IO | __GFP_FS | \
 108                         __GFP_RECLAIMABLE)
 109 #define GFP_USER        (__GFP_WAIT | __GFP_IO | __GFP_FS | __GFP_HARDWALL)
 110 #define GFP_HIGHUSER    (__GFP_WAIT | __GFP_IO | __GFP_FS | __GFP_HARDWALL | \
 111                         __GFP_HIGHMEM)
 112 #define GFP_HIGHUSER_MOVABLE    (__GFP_WAIT | __GFP_IO | __GFP_FS | \
 113                                 __GFP_HARDWALL | __GFP_HIGHMEM | \
 114                                 __GFP_MOVABLE)
 115 #define GFP_IOFS        (__GFP_IO | __GFP_FS)
 116 #define GFP_TRANSHUGE   (GFP_HIGHUSER_MOVABLE | __GFP_COMP | \
 117                         __GFP_NOMEMALLOC | __GFP_NORETRY | __GFP_NOWARN | \
 118                         __GFP_NO_KSWAPD) 
```

# c# - 如何解决错误“调用的目标已引发异常”

> ID：11223525
> 
> 赞同：-1
> 
> 时间：2012-06-27T09:51:44.070
> 
> 标签：c#, wpf

当我运行以下代码时，它显示错误

> “调用的目标已抛出异常”

我能做些什么来解决这个问题？

```
public LinqToXml()
{
    XDocument document = XDocument.Load(@"D:\\Data.xml");
    #region Fetch All the Books
    var books = from r in document.Descendants("book") 
                select new
                {
                    Author = r.Element("author").Value,
                    Title = r.Element("title").Value,
                    Genere = r.Element("genre").Value,
                    Price = r.Element("price").Value,
                    PublishDate = r.Element("publish_date").Value,
                    Description = r.Element("description").Value,

                };

    foreach (var r in books)
    {
        com_xdocuments.Items.Add(r.PublishDate + r.Title + r.Author);                            

    }

    #endregion 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:58:13.363

难道不应该

```
XDocument document = XDocument.Load(@"D:\Data.xml"); 
```

两者都是一样`@"D:\Data.xml"`的`"D:\\Data.xml"`

# jquery - jQuery：如何创建一个新元素并将其添加到集合中？

> ID：11223526
> 
> 赞同：2
> 
> 时间：2012-06-27T09:51:44.550
> 
> 标签：jquery, dom

我想用 jQuery 创建一些 DOM 节点，将它们附加到 html 中，同时保持它们被选中，所以我不需要再次选择它们。

这是我的代码：

```
var foo=$('');
for(var i=0;i<10;i++){
    var bar=$('<div>');
    $('body').append(bar);
    foo.add(bar);
} 
```

显然 foo 最终会保持为空，所以它不会起作用。如果最后没有选择所有的酒吧，我应该如何处理它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T09:53:40.273

您可以使用数组，而不是 jQuery 对象：

```
var foo = [];
for(var i=0; i < 10; i++) {
  var bar = $('<div>');
  $('body').append(bar);
  foo.push(bar[0]);
}
foo = $(foo); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T10:26:37.033

这个问题的原因是`.add()`方法没有改变原来的jQuery集合对象，而是返回一个新的。

您可以简单地将代码更改为：***[DEMO。](http://jsfiddle.net/SnsPg/)***

```
var foo=$('');
for(var i=0;i<10;i++){
    var bar=$('<div>');
    $('body').append(bar);
    foo = foo.add(bar);
}

console.log(foo); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T10:33:18.450

要将新元素添加到 jQuery 集合中，请使用`foo = foo.add(bar)`.

这是您的代码的更新版本：

```
var foo = $();
for (var i = 0; i < 10; i++) {
    var bar = $("<div />").appendTo("body");
    foo = foo.add(bar);
}
foo.css("color", "red"); 
```

**演示：http:** [//jsfiddle.net/u3efP/](http://jsfiddle.net/u3efP/)

# haskell - 从管道教程编译代码

> ID：11223528
> 
> 赞同：1
> 
> 时间：2012-06-27T09:51:55.477
> 
> 标签：haskell, conduit

我正在尝试理解来自[http://www.yesodweb.com/book/conduits](http://www.yesodweb.com/book/conduits)的代码。经过一些修复（例如替换`Resource`为`MonadResource`）后，它仍然无法编译：

```
sumSink :: MonadResource m => Sink Int m Int
sumSink = CL.fold (+) 0

sum' :: [Int] -> Int
sum' input = runST $ runResourceT $ CL.sourceList input $$ sumSink 
```

给我以下错误：

```
 Couldn't match type `GHC.ST.ST s' with `IO'
    When using functional dependencies to combine
      Control.Monad.Trans.Control.MonadBaseControl
        (GHC.ST.ST s) (GHC.ST.ST s),
        arising from the dependency `m -> b'
        in the instance declaration in `Control.Monad.Trans.Control'
      Control.Monad.Trans.Control.MonadBaseControl IO (GHC.ST.ST s),
        arising from a use of `runResourceT'
        at D:\Works\stablename\test.hs:43:22-33
    In the expression: runResourceT
    In the second argument of `($)', namely
      `runResourceT $ CL.sourceList input $$ sumSink' 
```

我正在使用 GHC 7.4.1 和导管 0.4.2。

PS 是否有任何教程没有损坏/是用导管 0.4 编写的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:33:00.260

回答我自己的问题：

*   `Monad m`应该使用而不是`Resource m`.
*   `runResourceT``sinkFile`如果在链中的某处使用了类似的函数，则需要应用，因为`sinkFile`需要`MonadResource m`并且没有`MonadResource IO`.

# android - 安卓版 MuPDF

> ID：11223530
> 
> 赞同：0
> 
> 时间：2012-06-27T09:52:02.700
> 
> 标签：android, pdf, mupdf

在那里！

我在为 android 编译 mupdf 时遇到问题

```
Compile thumb : mupdfcore <= pdf_cmap_table.c
jni/../../pdf/pdf_cmap_table.c:5:35: error: ../generated/cmap_cns.h: No such file or directory
jni/../../pdf/pdf_cmap_table.c:6:34: error: ../generated/cmap_gb.h: No such file or directory
jni/../../pdf/pdf_cmap_table.c:7:37: error: ../generated/cmap_japan.h: No such file or directory
jni/../../pdf/pdf_cmap_table.c:8:37: error: ../generated/cmap_korea.h: No such file or directory
jni/../../pdf/pdf_cmap_table.c:14: error: 'cmap_78_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:15: error: 'cmap_78_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:16: error: 'cmap_78_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:17: error: 'cmap_78_RKSJ_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:18: error: 'cmap_78_RKSJ_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:19: error: 'cmap_78_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:20: error: 'cmap_78ms_RKSJ_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:21: error: 'cmap_78ms_RKSJ_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:22: error: 'cmap_83pv_RKSJ_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:23: error: 'cmap_90ms_RKSJ_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:24: error: 'cmap_90ms_RKSJ_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:25: error: 'cmap_90msp_RKSJ_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:26: error: 'cmap_90msp_RKSJ_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:27: error: 'cmap_90pv_RKSJ_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:28: error: 'cmap_90pv_RKSJ_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:29: error: 'cmap_Add_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:30: error: 'cmap_Add_RKSJ_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:31: error: 'cmap_Add_RKSJ_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:32: error: 'cmap_Add_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:33: error: 'cmap_Adobe_CNS1_0' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:34: error: 'cmap_Adobe_CNS1_1' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:35: error: 'cmap_Adobe_CNS1_2' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:36: error: 'cmap_Adobe_CNS1_3' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:37: error: 'cmap_Adobe_CNS1_4' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:38: error: 'cmap_Adobe_CNS1_5' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:39: error: 'cmap_Adobe_CNS1_6' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:40: error: 'cmap_Adobe_CNS1_UCS2' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:41: error: 'cmap_Adobe_GB1_0' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:42: error: 'cmap_Adobe_GB1_1' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:43: error: 'cmap_Adobe_GB1_2' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:44: error: 'cmap_Adobe_GB1_3' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:45: error: 'cmap_Adobe_GB1_4' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:46: error: 'cmap_Adobe_GB1_5' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:47: error: 'cmap_Adobe_GB1_UCS2' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:48: error: 'cmap_Adobe_Japan1_0' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:49: error: 'cmap_Adobe_Japan1_1' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:50: error: 'cmap_Adobe_Japan1_2' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:51: error: 'cmap_Adobe_Japan1_3' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:52: error: 'cmap_Adobe_Japan1_4' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:53: error: 'cmap_Adobe_Japan1_5' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:54: error: 'cmap_Adobe_Japan1_6' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:55: error: 'cmap_Adobe_Japan1_UCS2' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:56: error: 'cmap_Adobe_Japan2_0' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:57: error: 'cmap_Adobe_Korea1_0' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:58: error: 'cmap_Adobe_Korea1_1' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:59: error: 'cmap_Adobe_Korea1_2' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:60: error: 'cmap_Adobe_Korea1_UCS2' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:61: error: 'cmap_B5_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:62: error: 'cmap_B5_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:63: error: 'cmap_B5pc_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:64: error: 'cmap_B5pc_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:65: error: 'cmap_CNS_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:66: error: 'cmap_CNS_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:67: error: 'cmap_CNS1_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:68: error: 'cmap_CNS1_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:69: error: 'cmap_CNS2_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:70: error: 'cmap_CNS2_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:71: error: 'cmap_ETHK_B5_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:72: error: 'cmap_ETHK_B5_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:73: error: 'cmap_ETen_B5_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:74: error: 'cmap_ETen_B5_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:75: error: 'cmap_ETenms_B5_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:76: error: 'cmap_ETenms_B5_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:77: error: 'cmap_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:78: error: 'cmap_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:79: error: 'cmap_Ext_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:80: error: 'cmap_Ext_RKSJ_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:81: error: 'cmap_Ext_RKSJ_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:82: error: 'cmap_Ext_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:83: error: 'cmap_GB_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:84: error: 'cmap_GB_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:85: error: 'cmap_GB_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:86: error: 'cmap_GB_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:87: error: 'cmap_GBK_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:88: error: 'cmap_GBK_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:89: error: 'cmap_GBK2K_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:90: error: 'cmap_GBK2K_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:91: error: 'cmap_GBKp_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:92: error: 'cmap_GBKp_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:93: error: 'cmap_GBT_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:94: error: 'cmap_GBT_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:95: error: 'cmap_GBT_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:96: error: 'cmap_GBT_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:97: error: 'cmap_GBTpc_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:98: error: 'cmap_GBTpc_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:99: error: 'cmap_GBpc_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:100: error: 'cmap_GBpc_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:101: error: 'cmap_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:102: error: 'cmap_HKdla_B5_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:103: error: 'cmap_HKdla_B5_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:104: error: 'cmap_HKdlb_B5_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:105: error: 'cmap_HKdlb_B5_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:106: error: 'cmap_HKgccs_B5_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:107: error: 'cmap_HKgccs_B5_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:108: error: 'cmap_HKm314_B5_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:109: error: 'cmap_HKm314_B5_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:110: error: 'cmap_HKm471_B5_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:111: error: 'cmap_HKm471_B5_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:112: error: 'cmap_HKscs_B5_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:113: error: 'cmap_HKscs_B5_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:114: error: 'cmap_Hankaku' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:115: error: 'cmap_Hiragana' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:116: error: 'cmap_Hojo_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:117: error: 'cmap_Hojo_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:118: error: 'cmap_Hojo_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:119: error: 'cmap_Hojo_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:120: error: 'cmap_KSC_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:121: error: 'cmap_KSC_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:122: error: 'cmap_KSC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:123: error: 'cmap_KSC_Johab_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:124: error: 'cmap_KSC_Johab_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:125: error: 'cmap_KSC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:126: error: 'cmap_KSCms_UHC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:127: error: 'cmap_KSCms_UHC_HW_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:128: error: 'cmap_KSCms_UHC_HW_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:129: error: 'cmap_KSCms_UHC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:130: error: 'cmap_KSCpc_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:131: error: 'cmap_KSCpc_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:132: error: 'cmap_Katakana' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:133: error: 'cmap_NWP_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:134: error: 'cmap_NWP_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:135: error: 'cmap_RKSJ_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:136: error: 'cmap_RKSJ_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:137: error: 'cmap_Roman' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:138: error: 'cmap_UniCNS_UCS2_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:139: error: 'cmap_UniCNS_UCS2_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:140: error: 'cmap_UniCNS_UTF16_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:141: error: 'cmap_UniCNS_UTF16_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:142: error: 'cmap_UniGB_UCS2_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:143: error: 'cmap_UniGB_UCS2_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:144: error: 'cmap_UniGB_UTF16_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:145: error: 'cmap_UniGB_UTF16_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:146: error: 'cmap_UniHojo_UCS2_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:147: error: 'cmap_UniHojo_UCS2_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:148: error: 'cmap_UniHojo_UTF16_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:149: error: 'cmap_UniHojo_UTF16_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:150: error: 'cmap_UniJIS_UCS2_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:151: error: 'cmap_UniJIS_UCS2_HW_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:152: error: 'cmap_UniJIS_UCS2_HW_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:153: error: 'cmap_UniJIS_UCS2_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:154: error: 'cmap_UniJIS_UTF16_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:155: error: 'cmap_UniJIS_UTF16_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:156: error: 'cmap_UniJISPro_UCS2_HW_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:157: error: 'cmap_UniJISPro_UCS2_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:158: error: 'cmap_UniKS_UCS2_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:159: error: 'cmap_UniKS_UCS2_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:160: error: 'cmap_UniKS_UTF16_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:161: error: 'cmap_UniKS_UTF16_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:162: error: 'cmap_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:163: error: 'cmap_WP_Symbol' undeclared here (not in a function)
make: *** [obj/local/armeabi/objs-debug/mupdfcore/__/__/pdf/pdf_cmap_table.o] Error 1 
```

正如我所见，生成的目录中的头文件不存在问题。怎么会这样？我为 git 存储库（1.0+）和 mupdf 第三方安装了最新版本的 mupdf。

拜托，你能帮帮我吗？

PS。感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:45:31.880

如果您阅读 android/ReadMe.txt，您将看到有关如何为 Android 构建的分步说明。第 11 步（引用如下）清楚地描述了您需要做的事情：

> 11) 最后，您将需要一个“生成”目录的副本。目前无法下载。
> 
> 正常的 mupdf 构建过程涉及在主机（您正在编译的机器）上运行一些代码，而不是在目标（您最终想要运行 mupdf 的机器/设备）上运行一些代码。此代码将各种信息（字体、CMAP 等）重新打包成更紧凑和可用的形式。
> 
> 不幸的是，android SDK 没有为宿主机提供编译器，所以我们不能作为 android 构建的一部分自动运行这一步。您将需要通过运行不同的构建来生成它，例如 windows 或 linux 原生构建。
> 
> 由于该目录的内容经常更改，因此我们不会对生成的目录进行快照以供下载，并且我们必须在网站上保留多个版本。我们假设任何能够为 android 构建的人都能够进行正常的托管构建。
> 
> 在 Windows（您使用 cygwin 的地方）或 linux/macos 上，这可以像在顶级目录中运行“make”一样简单。即使 make 过程失败，它也应该足够远来为您生成所需的“生成”目录，您可以继续执行这些说明。

您没有执行此步骤，因此您的“生成”目录中没有所需的文件。

# c# - 安装程序 c# windows form app/sdf 数据库

> ID：11223532
> 
> 赞同：0
> 
> 时间：2012-06-27T09:52:07.300
> 
> 标签：c#, installation, sql-server-ce

我做了使用本地`.sdf`数据库（SQL Server Compact Edition）的 ac# windows form 应用程序，但我无法为此创建安装程序。

我使用 Visual Studio 中的设置向导，但安装的程序给了我一个未处理的异常错误。我不知道错误是连接字符串还是其他。

我的问题不是访问 .sfd 数据库，而是创建一个设置以便在其他计算机上安装应用程序。为了创建安装程序项目，我使用了 Visual Studio 2010 的安装向导项目，但是当我使用生成的安装程序安装应用程序时，程序无法运行。我的问题是我不知道如何为我的应用程序创建设置。连接字符串是 app.config 中的“Data Source = |DataDirectory|DataBase\yyyy.sdf”。我没有安装程序的任何代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:38:35.787

为了找出答案，请向我们展示您的代码，但至少将您的数据库方法包装在一个 try-catch 块中：

```
try
{
  // do your DB stuff here
}
catch (Exception ex)
{
  MessageBox.Show(ex.Message);
} 
```

在没有看到您的代码的情况下，请检查您是否没有硬编码 .sdf 的路径作为示例。此外，您是否分发[了 SQL Server Compact 所需的所有依赖项](http://msdn.microsoft.com/en-us/library/ms174138%28v=sql.105%29)？请记住不要在程序文件文件夹中安装 .sdf，因为它违反了 Window 的用户访问模型。

# java - 为什么只有当我按下主页按钮并返回 Android 设备时才会清理内存？

> ID：11223533
> 
> 赞同：0
> 
> 时间：2012-06-27T09:52:14.197
> 
> 标签：java, android, listview, memory

我有它的 listView 和自定义 ArrayAdapter。在我的列表视图中有很多图片，我使用强大的内存清理：

```
@Override
public void onDestroy() {       
    list.clear();
    adapter.notifyDataSetChanged();
    listView.setAdapter(null);
    super.onDestroy();
} 
```

并使用 LazyLoader 进行图像加载。但是在使用我的应用程序一段时间后（当我更新列表时）我仍然会得到“位图大小超过 vm 预算”错误。虽然如果我按下主页按钮并返回应用程序内存被清除。没有它如何清除内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:00:36.707

确保对不再使用的所有 Bitmap 对象调用[recycle()](http://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29)以尽快释放其内存。

此外，使用[Bitmap.createScaledBitmap()](http://developer.android.com/reference/android/graphics/Bitmap.html#createScaledBitmap%28android.graphics.Bitmap,%20int,%20int,%20boolean%29)创建一个与 ImageView 所需一样小的位图，从而节省一些额外的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:18:55.287

尝试阅读有关[加载大型位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)的信息。这将有助于避免内存泄漏问题。

# javascript - 单击按钮时运行 javascript

> ID：11223536
> 
> 赞同：0
> 
> 时间：2012-06-27T09:52:19.223
> 
> 标签：javascript, android, android-webview

我在 WebView 下方有一个按钮。当我点击它时，我想要一个在 WebView 上运行的 javascript。

这不起作用：

```
 public void onClick(View v) {
            String script = "javascript:document.getElementById('lnkNxtPg').click()";
            switch (v.getId()) {
            case R.id.nextPg:
                webView.loadUrl(script);
                break;

            default:
                break;
            }       
        } 
```

但这有效：

```
public void onClick(View v) {

        switch (v.getId()) {
        case R.id.nextPg:
            webView.loadUrl("www.google.com");
            break;

        default:
            break;
        }       
    } 
```

我怎样才能使第一个例子工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:21:10.520

尝试了解如何[从 Android 调用 JavaScript 函数并处理结果](http://ganeshtiwaridotcomdotnp.blogspot.com/2011/10/calling-javascript-function-from.html)

# java - Drools：字符串全局变量的奇怪行为

> ID：11223537
> 
> 赞同：1
> 
> 时间：2012-06-27T09:52:25.460
> 
> 标签：java, drools

情况很容易。我创建了一个规则文件：

```
package org.domain.rules;
dialect "mvel"
import eu.ohim.fsp.core.configuration.domain.xsd.Section;

global java.lang.String sectionName;

rule "rule 1"
salience 1000
when
    Section($name : nameOfTheSection)
    eval(sectionName == null)
then
    System.out.println("Section: " + $name+ "("+$name.length()+")");
    System.out.println("Section Name: " + sectionName + "("+sectionName.length()+")");
    System.out.println("Mark Details: " + sectionName.equals(null));
end 
```

在触发规则之前，我添加了带有有效`coreName`和全局变量的 Section 对象：

```
public void fireInserted(Section section1) {
    kstateful.insert(section1);
    kstateful.setGlobal("sectionName", new String("markudetails"));
    kstateful.fireAllRules();
} 
```

结果是：

```
Section: markudetails(12)
Section Name: markudetails(12)
Mark Details: false 
```

问：这怎么可能？**当**部分为空**时**，部分不为空！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T10:30:34.163

全局变量不是知识库的一部分，而是将某些上下文推送到规则执行中的单独通道。`when`在子句中使用它们是不合适的。您的情况的确切原因`null`可能很难追踪，因为规则激活与规则执行完全分离。`when`该变量可能在子句评估时根本不绑定，但在`then`子句执行时绑定。

总结一下：不要在`when`子句中使用全局变量，这不是它们的用途。

您的问题有一个简单的通用解决方案：您可以将配置对象插入知识中。该对象可以具有您想要的“sectionName”属性，然后您会发现它很容易在`when`.

顺便说一句，测试是没有意义的`object.equals(null)`——这永远不会产生`true`. 也没有必要使用`new String("markudetails")`. 而是使用`"markudetails"`.

# c++ - 如何在 C++ 中将一般形式的二维直线方程转换为斜截距形式

> ID：11223538
> 
> 赞同：1
> 
> 时间：2012-06-27T09:52:30.317
> 
> 标签：c++, algorithm, floating-point, geometry

我有一般形式的二维线方程，`a x + b y + c = 0`我需要将其转换为正确的斜率截距形式；正确的意思是我可以在 和 之间进行`y = m x + q`选择`x = m y + q`。

我的想法是检查线条是否出现“更多”水平或垂直，然后选择两种斜率截距形式之一。

这是一个示例代码：

```
#include <iostream>
#include <cmath>

void abc2mq( double a, double b, double c, double& m, double& q, bool& x2y )
{
   if ( fabs(b) >= fabs(a) ) {
      x2y = true;
      m = -a/b;
      q = -c/b;
   } else {
      x2y = false;
      m = -b/a;
      q = -c/a;
   }
}

void test(double a, double b, double c)
{
   double m,q;
   bool x2y;
   abc2mq( a, b, c, m, q, x2y );
   std::cout << a << " x + " << b << " y + " << c << " = 0\t";
   if ( x2y ) {
      std::cout << "y = " << m << " x + " << q << "\n";
   } else {
      std::cout << "x = " << m << " y + " << q << "\n";
   }
}

int main(int argc, char* argv[])
{
   test(0,0,0);
   test(0,0,1);
   test(0,1,0);
   test(0,1,1);
   test(1,0,0);
   test(1,0,1);
   test(1,1,0);
   test(1,1,1);

   return 0;
} 
```

这是输出

```
0 x + 0 y + 0 = 0       y = -1.#IND x + -1.#IND
0 x + 0 y + 1 = 0       y = -1.#IND x + -1.#INF
0 x + 1 y + 0 = 0       y = -0 x + -0
0 x + 1 y + 1 = 0       y = -0 x + -1
1 x + 0 y + 0 = 0       x = -0 y + -0
1 x + 0 y + 1 = 0       x = -0 y + -1
1 x + 1 y + 0 = 0       y = -1 x + -0
1 x + 1 y + 1 = 0       y = -1 x + -1 
```

有什么不同或更好的想法吗？特别是，我该如何处理前两个“退化”行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T09:57:28.483

如果您正在寻找绘制这些线的好方法，我建议您使用[Bresenham 算法](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)，而不是对线方程的斜率截距形式的结果进行采样。道歉，如果这不是你想要做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T10:07:39.540

你差不多完成了，只需处理退化的情况。添加检查 a 和 b 是否为非零。

```
if(fabs(a) > DBL_EPSILON && fabs(b) > DBL_EPSILON)
{
    ... non-degenerate line handling
} else
{
    // both a and b are machine zeros
    degenerate_line = true;
} 
```

然后添加参数'degenerate_line'：

```
void abc2mq( double a, double b, double c, double& m, double& q, bool& x2y, bool& degenerate_line)
{
    if(fabs(a) > DBL_EPSILON && fabs(b) > DBL_EPSILON)
    {
       if ( fabs(b) >= fabs(a) ) {
           x2y = true;
           m = -a/b;
           q = -c/b;
        } else {
           x2y = false;
           m = -b/a;
           q = -c/a;
        }

        degenerate_line = false;
    } else
    {
        degenerate_line = true;
    }
} 
```

然后检查该行是否为空集：

```
void test(double a, double b, double c)
{
    double m,q;
    bool x2y, degenerate;
    abc2mq( a, b, c, m, q, x2y, degenerate );
    std::cout << a << " x + " << b << " y + " << c << " = 0\t";
    if(!degenerate)
    {
       if ( x2y ) {
           std::cout << "y = " << m << " x + " << q << std::endl;
       } else {
           std::cout << "x = " << m << " y + " << q << std::endl;
       }
    } else
    {
       if(fabs(c) > DBL_EPSILON)
       {
          std::cout << "empty set" << std::endl
       } else
       {
          std::cout << "entire plane" << std::endl
       }
    }
} 
```

如果您只需要画线，只需使用 Thorsten 的建议 - 改用光栅化算法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T10:13:27.447

对应于两种退化情况的方程不代表线，而是分别代表全平面（ℝ<sup>2）和空集（∅）。正确的做法可能是丢弃它们或抛出错误。

对于非退化情况，您已经正确处理它们。

# asp.net - 在基本控制器中覆盖 ASP.NET MVC 中的 OnAuthorization

> ID：11223545
> 
> 赞同：5
> 
> 时间：2012-06-27T09:53:19.560
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

在我的 ASP.NET MVC 应用程序中，我试图确定用户是否有权访问特定控制器，受授权数据注释的限制，如下所示

```
[Authorize(Roles = "user")] 
```

我正在尝试覆盖 OnAuthorization 以检查：-

*   如果请求已通过身份验证（效果很好）
*   如果用户被授权访问请求的视图（这不起作用）

我的用户角色存储在我创建的 SessionManager 对象中 -`SessionManager.ActiveUser.Roles`

这是我所拥有的伪代码形式，但如果有人可以帮助我正确解决这个问题，我将不胜感激。

```
public class HomeBaseController : Controller
{
    protected override void OnAuthorization(AuthorizationContext context)
    {
        if (context.HttpContext.User.Identity.IsAuthenticated)
        {
            // these values combined are our roleName 

            bool isAuthorised = context.HttpContext.User.IsInRole(context.RequestContext.HttpContext.User.Identity.); 

            if (!context.HttpContext.User.IsInRole(---the roles associated with the requested controller action (e.g. user)---))
            {
                var url = new UrlHelper(context.RequestContext);
                var logonUrl = url.Action("LogOn", "SSO", new { reason = "youAreAuthorisedButNotAllowedToViewThisPage" });
                context.Result = new RedirectResult(logonUrl);

                return;
            } 
        }
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T18:16:47.733

至于根据 ProASP.NET MVC3 Book 覆盖 OnAuthorization，他们不建议覆盖它，因为此方法的默认实现安全地处理使用 OutputCache 过滤器缓存的内容。

如果您正在寻找自定义身份验证（使用表单身份验证）和授权（使用角色提供程序逻辑，那么下面是我保护我的应用程序的方式。

编辑：以下逻辑使用内置表单身份验证和角色管理器。用户通过身份验证和授权后，用户身份可用于检查身份验证 (User.Identity.IsAuthenticated) 和角色 User.IsInRole("admin")

在 Web.Config 中：

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="15" slidingExpiration="true" enableCrossAppRedirects="false" protection="All" />
</authentication>
<roleManager enabled="true" defaultProvider="MyRolesProvider" cacheRolesInCookie="true" cookieProtection="All">
  <providers>
    <clear />
    <add name="MyRolesProvider" type="MyApp.Library.CustomRolesProvider" />
  </providers>
</roleManager> 
```

对于角色授权，请根据需要扩展 RoleProvider 并覆盖方法。

```
public class CustomRolesProvider : RoleProvider
{
    public override string[] GetRolesForUser(string username)
    {
       // You need to return string of Roles Here which should match your role names which you plan to use.
       //Some Logic to fetch roles after checking if User is Authenticated...    

        return new string[] { "admin" , "editor" };
    }

    //Rest all of them I have kept not implemented as I did not need them...

} 
```

在您的控制器中现在您可以使用它：

```
 [Authorize(Roles="Admin")]
    public class AdminController : Controller
    {
    ....

    } 
```

对于身份验证，我已经实现了我的自定义身份验证检查，但我仍然使用表单身份验证：

```
//This one calls by Custom Authentication to validate username/password
public ActionResult LogOn(LogOnViewModel model, string returnUrl)
{
    if(Authenticate("test","test"))
    {
     .......
    }
}

public bool Authenticate(string username, string password)
{
   //Authentication Logic and Set the cookie if correct else false.
   //..... your logic....
   //.....

   FormsAuthentication.SetAuthCookie(username, false);
} 
```

# ios - ios 多个视图与滚动视图释放实例

> ID：11223547
> 
> 赞同：0
> 
> 时间：2012-06-27T09:53:26.870
> 
> 标签：ios, memory-management

我对包含多个视图的滚动视图有疑问。我认为问题在于正在发布子视图。我在子视图中有按钮，当我单击按钮时出现此错误，`[GraphDisplayViewController performSelector:withObject:withObject:]:`

> 发送到已释放实例的消息

. 如果只有一个子视图，那么我可以只使用一个属性并且这有效，但由于子视图的数量不同（一个或多个），它不起作用，我不知道如何解决这个问题。

我目前在开始时一次加载所有视图。我一次只加载一个子视图并将属性分配给该视图，但我不确定这是否可行。

我的布局如下，一个父视图（DetailViewController）包含一个滚动视图，我将视图（GraphDisplayViewController）添加到滚动视图，子视图每个加载一个视图（GraphView）。

任何帮助或建议将不胜感激。如果您需要更多详细信息，请告诉我。感谢您的时间。

我如何添加子视图的代码示例，

细节视图控制器

```
- (void)loadScrollViewWithPage:(int)page
{
if (page < 0) return;
if (page >= pageControl.numberOfPages) return;

subView = [viewControllers objectAtIndex:page];   
NSString *description;
NSString *packsize;
if ((NSNull *)subView == [NSNull null]) 
{
    subView = [[GraphDisplayViewController alloc] initWithNibName:@"GraphDisplayViewController" bundle:nil];
    [viewControllers replaceObjectAtIndex:page withObject:subView];
    subView = [[GraphDisplayViewController alloc] init];
    subView.molecule = moleculeName;
    subView.description = description;    
    subView.dataArray = moleculePrices;

}
else
{
    return;
}

// add the controller's view to the scroll view
if (nil == subView.view.superview) 
{
    CGRect frame = scrollView.frame;
    frame.origin.x = frame.size.width * page;
    frame.origin.y = 0;
    subView.view.frame = frame;
    [scrollView addSubview:subView.view];
} 
} 
```

**更新** 代码中有错误，测试看看是否解决了任何问题

```
subView = [[GraphDisplayViewController alloc] initWithNibName:@"GraphDisplayViewController" bundle:nil];
[viewControllers replaceObjectAtIndex:page withObject:subView];
subView = [[GraphDisplayViewController alloc] init]; <- Mistake 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:47:28.527

我的代码中有一个简单的错误，我将视图初始化了两次。

```
subView = [[GraphDisplayViewController alloc] initWithNibName:@"GraphDisplayViewController" bundle:nil];
subView = [[GraphDisplayViewController alloc] init]; <- Mistake 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:42:48.890

您没有保留`GraphDisplayViewController`分配给`subView`变量。因此你会在某个时间点失去它。

正如我们所看到的那样，您正在获取`subView`对象，`subView = [viewControllers objectAtIndex:page];` 那么您还应该将其存储在其中`viewControllers`（尽管我不确定您已经实现了什么逻辑，但是在您的代码中，`subView`必须执行每个分配的此操作：`[viewControllers replaceObjectAtIndex:page withObject:subView];`并且您需要确保该`viewControllers`变量也是为一切顺利进行而保留。）

数组，以便可以保留它以避免您面临的崩溃。
我希望这对你有用..祝你好运

# asp.net - 将源更改为所见即所得 ckeditor 时跳过跨度标签 asp.net

> ID：11223548
> 
> 赞同：0
> 
> 时间：2012-06-27T09:53:33.617
> 
> 标签：asp.net, editor, html, ckeditor.net

我有一个ckeditor，当我从ckeditor工具栏中单击所见即所得的源时，它会跳过span标签我的代码是 **原始代码**

```
 <div style="color: White; display: block; float: right; font-size: 11pt; font-style: italic; margin-right: 116px; margin-top: -85px; position: relative; width: 40px;">
<span id="Active"></span> of <span id="Total"></span>
     </div> 
```

单击源按钮时我看到此代码

```
<div style="color: White; display: block; float: right; font-size: 11pt; font-style: italic; margin-right: 116px; margin-top: -85px; position: relative; width: 40px;">
 of</div> 
```

我有一种情况，我无法使用 asp.net 服务器控件，我将页面保存在数据库中。谁能告诉我如何解决这个问题，或者我应该将 ckeditor 更改为任何其他编辑器，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:48:57.410

这是 CKEditor 中的已知行为。这就是它应该如何工作的方式。[这里解释](https://dev.ckeditor.com/ticket/9004)了一些解决方法。

# imagemagick - ImageMagick 在将 PSD 文件转换为 GIF、PNG、JPG 文件时可以在多大程度上保留剪切路径？

> ID：11223551
> 
> 赞同：3
> 
> 时间：2012-06-27T09:53:40.290
> 
> 标签：imagemagick, photoshop, image-clipping

我们有一个 PHP 工具，它通过调用**ImageMagick将图像****从 PSD 转换为其他格式**。

 **为了潜在地扩展该工具的功能，我现在需要了解“ **ImageMagick 将 PSD 文件转换为 GIF、PNG 和 JPG 文件关于剪切路径的可能性**”，例如回答以下问题：

*   ImageMagick 是否可以将 PSD 文件转换为 GIF/JPG/PNG 并**保留剪切路径**，以便以后可以进一步编辑？

*   还是 ImageMagick 只能将 PSD 文件转换为 GIF/JPG/PNG，从而**将剪切路径之外的所有内容**转换为**透明区域**？

*   从 PSD 文件支持的意义上说，GIF、PNG 和 JPG 中的每一种格式是否都**支持剪切路径？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T16:55:31.880

我没有带有剪辑路径的 psd 文件 - 出于兴趣，您能否提供一个我可以在我的 imagemagick 示例网站上使用的文件？我有一个带有剪辑路径的 jpg，但不允许在我的网站上使用它。

无论如何，我从一个 jpg 开始，我被告知有一个剪辑路径并运行此代码：

```
exec(" convert clip_path.jpg -clip -negate clipped1.jpg");
exec(" convert clip_path.jpg -resize x300 -clip -negate clipped2.jpg");
exec(" convert clip_path.jpg clipped3.png");
exec(" convert clipped3.png -clip -negate clipped4.jpg"); 
```

结果是：

1/ 剪辑路径中的反转颜色 - 所以剪辑路径正在工作。

2/ 在剪辑路径中调整大小和反转颜色 - 因此在调整大小时会保留剪辑路径。

3/ 更改为准备在 4/ 中进行剪辑测试的 png

4/ 剪辑路径中的反转颜色 - 更改格式时保留剪辑路径。

剪辑选项在此处列出[http://www.imagemagick.org/script/command-line-options.php#clip](http://www.imagemagick.org/script/command-line-options.php#clip)并在此处列出一些示例和更多注释[http://www.imagemagick.org/Usage/masking/#clip_mask](http://www.imagemagick.org/Usage/masking/#clip_mask)**

# java - svnkit：如何从 SVN DB 获取最新版本号？

> ID：11223554
> 
> 赞同：1
> 
> 时间：2012-06-27T09:53:55.750
> 
> 标签：java, svnkit

我想使用 SVNKIT 获取 SVN 数据库的最新版本号。我不想更新本地存储库并获取头部修订号，我想直接联系 SVN 存储库并获取最新的修订号。请帮我 。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T09:57:39.993

```
DAVRepositoryFactory.setup();
String url = "(directory in svn url)";
String name = "(login name)";
String password = "(login password)";
SVNRepository repository = null;
repository = SVNRepositoryFactory.create(SVNURL.parseURIDecoded(url));
ISVNAuthenticationManager authManager =
                   SVNWCUtil.createDefaultAuthenticationManager(name, password);
repository.setAuthenticationManager(authManager);
SVNDirEntry entry = repository.info(".", -1);
System.out.println("Latest Rev: " + entry.getRevision()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T10:33:30.790

```
FSRepositoryFactory.setup();
File pathToRepository = new File("/path/to/repository");
SVNRepository svnRepository = SVNRepositoryFactory.create(SVNURL.fromFile(pathToRepository));
try {
    final long latestRevision = svnRepository.getLatestRevision();
    System.out.println("latestRevision = " + latestRevision);
} finally {
    svnRepository.closeSession();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:00:58.520

```
DAVRepositoryFactory.setup();

final SVNURL url = SVNURL.parseURIDecoded("http://svn.apache.org/repos/asf");
final SVNRepository repository = SVNRepositoryFactory.create(url);
final long latestRevision = repository.getLatestRevision();
System.out.println(latestRevision); 
```

# java - 我们可以将请求发送到 servlet 中的 HTML

> ID：11223556
> 
> 赞同：3
> 
> 时间：2012-06-27T09:54:07.923
> 
> 标签：java, servlets, requestdispatcher

这可能吗？

```
RequestDispatcher rd = request.getRequestDispatcher("index.html");
rd.forward(request, response); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T10:03:05.653

是的。您可以将请求发送到 HTML 页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T10:23:04.373

是的，它会起作用。您可以获得静态/动态页面的请求调度程序。

# android - 使用葫芦进行 Android 端到端测试

> ID：11223558
> 
> 赞同：0
> 
> 时间：2012-06-27T09:54:27.540
> 
> 标签：android, functional-testing

我是使用 android 的葫芦的新手，这是 android 的端到端测试框架。我正在尝试测试一项功能，在我的应用程序中按下按钮时，我会被带回 android 主屏幕。有人可以帮我测试这种情况吗？这是我到目前为止所拥有的

```
Feature: Return to Home Screen

   Scenario: As a user 
     When I press the "GO" button
     Then I should see "HomeActivity" screen appear 
```

我被困在第二行。我尝试了几种替代方法，例如尝试使用 id（不要认为我得到了正确的 id。android home 活动是否有预定义的 id？）或不同的名称来测试 home 活动是否出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:52:52.753

[我在我的 github 分支](https://github.com/nalbion/calabash-android/blob/master/ruby-gem/test-server/instrumentation-backend/src/sh/calaba/instrumentationbackend/actions/view/GetActivityName.java)上创建了一个新操作来完全做到这一点

对于 TabActivities，它返回当前选项卡的标签。对于其他活动，它返回类名。

```
actual_activity = performAction('get_activity_name')['bonusInformation']
引发异常“预期 #{expected_activity} 活动，但为 #{actual_activity}”，除非实际活动 == 预期活动

```

# asp.net - 应用程序池到底是什么？

> ID：11223559
> 
> 赞同：0
> 
> 时间：2012-06-27T09:54:35.957
> 
> 标签：asp.net, windows, iis

好的，所以我了解应用程序池的工作原理以及它们的作用，但我想知道应用程序池到底是什么，我现在在想它只是元数据库或一些用于 http.sys 的配置文件的信息？

我想另一个问题是，当提出请求时，谁或什么产生了工作进程？

谢谢

迷茫的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:11:19.067

首先，您可以将应用程序池视为实际上与您的页面合二为一并运行它们的程序。因此，您以编程方式在页面上所做的一切都是使用应用程序池完成的。

例如：

*   用户请求页面 a.aspx
*   IIS 看到这是 asp.net 页面并将其分配给一个应用程序池
*   应用程序池查看 a.aspx，检查是否已编译并运行它 - 运行您的代码。

其次，您可以看到大局，即有许多网站一起存在于一台服务器上，而应用程序池是一起处理一个或多个网站的。

现在，一个 Web 应用程序可以运行在一个应用程序池上，也可以同时在同一台服务器上的多个应用程序池上运行（这称为 Web 园）。在每一个中，您都可以运行许多线程。

现在有关更多详细信息，您可以阅读[官方微软页面。](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/67e39bd8-317e-4cf6-b675-6431d4425248.mspx?mfr=true)

# java - 如何将两个地图中的值相加并使用番石榴返回值

> ID：11223561
> 
> 赞同：1
> 
> 时间：2012-06-27T09:54:41.280
> 
> 标签：java, map, guava

如何对两个地图中的值求和并使用 guava 返回具有求和值的地图？可以安全地假设，两个映射将具有相同的键集。

例如：

```
Map<OccupancyType, BigDecimal> filteredPrice
[ 1 : 100 ]
[ 2 : 50 ]
[ 3 : 200 ] 
```

其他地图

```
Map<OccupancyType, BigDecimal> pkgPrice
[ 1 : 10 ]
[ 2 : 20 ]
[ 3 : 30 ] 
```

求和图

```
Map<OccupancyType, BigDecimal> sumPrice
[ 1 : 110 ]
[ 2 : 70 ]
[ 3 : 230 ] 
```

我知道我可以遍历这些映射并轻松地对这些值求和，但是有没有一种更简洁的方法可以使用其中一种番石榴方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T10:02:01.347

番石榴贡献者在这里。

如果您*确定*两个地图具有相同的键，我*想*您可以这样做

```
Maps.transformEntries(pkgPrice,
    new EntryTransformer<OccupancyType, BigDecimal, BigDecimal>() {
  public BigDecimal transformEntry(OccupancyType key, BigDecimal pkPrice) {
    return pkPrice.add(filteredPrice.get(key));
  }
}); 
```

但话虽如此，这似乎完全属于[“直接方法最干净”的范畴。](http://code.google.com/p/guava-libraries/wiki/FunctionalExplained) （此外，此实现将在您每次请求它们时重新计算值，除非您进行复制。不过，这几乎肯定是不必要的复杂；在这里，直接的、命令式的方法几乎肯定是更可取的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T10:46:08.320

使用[功能性java](http://functionaljava.org)：

您可以为 map 定义一个[monoid](http://en.wikipedia.org/wiki/Monoid)实例。（我很惊讶[这还没有出现在图书馆里](https://github.com/functionaljava/functionaljava/blob/master/core/src/main/java/fj/Monoid.java)。）

```
public static <K, V> Monoid<Map<K, V>> mapMonoid(final Monoid<V> valueMonoid) {
  return new Monoid<Map<K, V>>(

    // associative binary operation
    new F2<Map<K, V>, Map<K, V>, Map<K, V>>() {
      public Map<K, V> f(Map<K, V> m1, Map<K, V> m2) {
        // logic for merging two maps
      }
    },

    // identity
    new HashMap<K, V>()
  ); 
} 
```

然后使用它：

```
Map<Integer, Integer> mergedMap = 
  mapMonoid(Monoid.intAdditionMonoid).sum(m1, m2); 
```

这样，您甚至可以*汇总*地图列表。

```
List<Map<Integer, Integer>> maps = /* list of maps */;
Map<Integer, Integer> total = 
  mapMonoid(Monoid.intAdditionMonoid).sumLeft(maps); 
```

# c# - system_tray 接收设备移除通知

> ID：11223562
> 
> 赞同：-2
> 
> 时间：2012-06-27T09:54:47.580
> 
> 标签：c#, c, winapi, device-driver, systray

我正在编写一个应用程序来检查我的 USB 设备，如果该设备可用，则进行拨号连接。我`Rasdial`用来建立连接。不幸的是，如果我移除 USB 电缆，连接不会断开或通知用户。所以在这里我需要检查`device removal`.

我计划在系统托盘中运行我的应用程序并等待设备移除。我在这里吗？

如果是正确的如何让应用程序等待设备移除，目前我的控制台应用程序在拨号连接建立后退出。如何在 Winapi32 中实现这一点？我用 C 编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:52:49.190

您的窗口可以处理`WM_DEVICECHANGE`广播消息，以告知何时发生了变化。如果您需要更详细的信息，请使用`RegisterDeviceNotification()`.

使用系统通知区域与您使用这些方法的能力无关。它们都需要一个窗口来发送通知，但它可以保持隐藏。

# android - 根据Activity中的事件处理Android服务执行

> ID：11223563
> 
> 赞同：0
> 
> 时间：2012-06-27T09:54:50.860
> 
> 标签：android, sockets, android-service

我正在开发一个简单的多人 Android 游戏，它使用 Java 套接字与其游戏服务器进行通信。为了创建非冻结 UI，我决定`Service`在 Android 应用程序中创建类以通过`Socket`连接与服务器进行通信。数据交换以 JSON 格式完成。

现在的问题是，在整个游戏过程中，单个 Socket 连接将持续存在，并且将在服务器之间进行数据交换，但**基于**运行在 Android 中的游戏客户端上发生的事件。

例如; 当用户点击一个按钮时，一些数据被发送到服务器，服务器返回一些数据，在此之前，客户端将等待，当数据到达时，活动上的 UI 将被更新，客户端将再次执行一些操作，然后再次数据将发送到服务器，依此类推。

当客户端等待来自服务器的数据时，我将禁用 Activity 上的控件，以便用户在数据从服务器到达之前不会执行任何操作，并且我还将在 Activity 上显示等待对话框以让用户知道该应用程序没有冻结，正在等待。

现在，由于 Android 服务主要与`onCreate()`,`onStart()`和`onDestroy()`方法一起使用，我相信它会在后台执行某些操作而无需任何用户干预。因此，如果我的应用程序需要用户的一些输入（或等到用户提供它）将其发送到服务器，`Service`在这种情况下我将如何使用类？此外，除了在这种情况下使用服务之外，我还有其他选择吗？

另外，请注意，我的应用程序中有两个活动，它们将使用**单个 Socket 连接**与服务器进行通信。

# ruby-on-rails - actionmailer 基于 .LTD app.com/ app.fr 设置主机动态

> ID：11223570
> 
> 赞同：3
> 
> 时间：2012-06-27T09:55:21.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization, actionmailer, i18n-gem

我在我的 rails 应用程序中有 2 种不同的语言，并且希望能够以正确的语言设置域名。例如，如果用户从 app.FR 注册，我希望在下面的示例中使用扩展名 .FR 而不是 .COM 有没有办法做到这一点？

```
 config.action_mailer.asset_host = "http://app.com"
  config.action_mailer.default_url_options = {:host => 'app.com'} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:40:32.697

似乎解决方案是在您的 ApplicationController 中设置一个前置过滤器并执行如下功能：

```
 def set_mailer_host
    ActionMailer::Base.default_url_options[:host] = request.host_with_port
  end 
```

请记住，从 rails 控制台发送邮件时，这将不起作用，因为 rails 控制台不会传递真正的 ActionController。

# css - 如何拉伸背景图像以填充 div

> ID：11223585
> 
> 赞同：121
> 
> 时间：2012-06-27T09:56:00.023
> 
> 标签：css, html, background, background-image

我想为不同的 div 设置背景图片，但我的问题是：

1.  图像的大小是固定的（60px）。
2.  改变div的大小

如何拉伸背景图像以填充 div 的整个背景？

```
#div2{
  background-image:url(http://s7.static.hootsuite.com/3-0-48/images/themes/classic/streams/message-gradient.png);
  height:180px;
  width:200px;
  border: 1px solid red;
} 
```

[在此处检查代码。](http://jsfiddle.net/ranasaani/qdzaw/)

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2012-06-27T10:00:27.450

添加

```
background-size:100% 100%; 
```

到背景图像下方的CSS。

您还可以指定确切的尺寸，即：

```
background-size: 30px 40px; 
```

这里：[JSFiddle](http://jsfiddle.net/qdzaw/7/)

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2014-01-14T11:07:03.493

您可以使用：

```
background-size: cover; 
```

或者只是使用一个大的背景图像：

```
background: url('../images/teaser.jpg') no-repeat center #eee; 
```

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2015-06-25T04:32:11.890

# 现代 CSS3（为未来推荐，可能是最好的解决方案）

```
.selector{
   background-size: cover;
   /* stretches background WITHOUT deformation so it would fill the background space,
      it may crop the image if the image's dimensions are in different ratio,
      than the element dimensions. */
} 
```

**最大限度。拉伸不裁剪也不变形*（可能不填充背景）*：** `background-size: contain;`
**强制绝对拉伸*（可能导致变形，但不裁剪）*：** `background-size: 100% 100%;`

# “旧” CSS“始终有效”的方式

绝对定位图像作为*（相对定位）*父级的第一个子级并将其拉伸到父级大小。

**HTML**

```
<div class="selector">
   <img src="path.extension" alt="alt text">
   <!-- some other content -->
</div> 
```

### 相当于 CSS3 `background-size: cover;`：

要动态地实现这一点，您必须使用**与包含方法替代相反的方法**（见下文），如果您需要将裁剪的图像居中，您将需要一个 JavaScript 来动态地做到这一点 - 例如使用 jQuery：

```
$('.selector img').each(function(){ 
   $(this).css({ 
      "left": "50%", 
      "margin-left": "-"+( $(this).width()/2 )+"px", 
      "top": "50%", 
      "margin-top": "-"+( $(this).height()/2 )+"px" 
   }); 
}); 
```

**实际例子：**
![css 裁剪样例](../Images/9318d035c4497990153c6afb5dbb4e05.png)

### 相当于 CSS3 `background-size: contain;`：

这个可能有点棘手 - 会溢出父级的背景尺寸将 CSS 设置为 100%，另一个设置为自动。 **实际例子：** ![CSS拉伸背景作为图像](../Images/3b6bb74890213d4c470def2bf86ea12e.png)

```
.selector img{
   position: absolute; top:0; left: 0;
   width: 100%;
   height: auto;
   /* -- OR -- */
   /* width: auto; 
      height: 100%; */
} 
```

### 相当于 CSS3 `background-size: 100% 100%;`：

```
.selector img{
   position: absolute; top:0; left: 0;
   width: 100%;
   height: 100%;
} 
```

*PS：要完全动态地以“旧”方式进行覆盖/包含等价物（因此您不必关心溢出/比率），您必须使用 javascript 为您检测比率并按照描述设置尺寸。 ..*

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2012-06-27T09:57:50.027

为此，您可以使用 CSS3`background-size`属性。像这样写：

```
#div2{
    background-image:url(http://s7.static.hootsuite.com/3-0-48/images/themes/classic/streams/message-gradient.png);
    -moz-background-size:100% 100%;
    -webkit-background-size:100% 100%;
    background-size:100% 100%;
    height:180px;
    width:200px;
    border: 1px solid red;
} 
```

检查这个：http: [//jsfiddle.net/qdzaw/1/](http://jsfiddle.net/qdzaw/1/)

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2012-06-27T10:05:23.573

你可以加：

```
#div2{
    background-image:url(http://s7.static.hootsuite.com/3-0-48/images/themes/classic/streams/message-gradient.png);
    background-size: 100% 100%;
    height:180px;
    width:200px;
    border: 1px solid red;
} 
```

你可以在这里阅读更多关于它的信息：[css3 background-size](http://www.css3.info/preview/background-size/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-08-26T09:38:31.823

通过使用属性 css：

```
background-size: cover; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-01-21T21:58:26.767

```
body{
  margin:0;
  background:url('image.png') no-repeat 50% 50% fixed;
  background-size: cover;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-07-20T02:56:02.410

使用：背景尺寸：100% 100%；使背景图像适合 div 大小。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-29T19:13:04.830

要保持纵横比，请使用`background-size: 100% auto;`

```
div {
    background-image: url('image.jpg');
    background-size: 100% auto;
    width: 150px;
    height: 300px;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-10-29T19:51:47.340

尝试这样的事情：

```
div {
    background-image: url(../img/picture1.jpg);
    height: 30em;
    background-repeat: no-repeat;
    width: 100%;
    background-position: center;
} 
```

# java - 无论索引如何，最后一行总是从 DefaultTableModel 中删除

> ID：11223586
> 
> 赞同：4
> 
> 时间：2012-06-27T09:56:02.323
> 
> 标签：java, swing, jtable, row, defaulttablemodel

当我尝试从 java 中的表中删除行时，我遇到了一些问题。特别是，我使用`DefaultTableModel`, 并且当我试图删除一行时，使用该`removeRow(int row)`方法，最后一行被删除，不管是什么`row`。例如，假设我们有六行。当`removeRow(0)`or `removeRow(2)`or`removeRow(5)`被调用时，最后一行总是被删除。任何想法，为什么会这样？

谢谢

- -更新

当按下 jtable 的特定单元格时，应删除相应的行。

```
 class TagsTableMA extends MouseAdapter {

    @Override
    public void mousePressed(MouseEvent e){
        Point p = e.getPoint();
        int row = tagsJT.rowAtPoint(p);
        int column = tagsJT.columnAtPoint(p);

        if (column == COLUMN_DELETE_TAG){
            DocDialog docDialog = new DocDialog(parentMainJF, 
                                                true, 
                                                null, 
                                                "Please confirm...", 
                                                "Are you sure you want to delete the \"" + 
                                                tagsJT.getValueAt(row, COLUMN_TAG_NAME) +
                                                "\" tag?",
                                                DocDialog.TYPE_YES_NO);
            docDialog.show();
            int answer = docDialog.getAnswer();

            if (answer == DocDialog.YES)                                                
                    model.removeRow(row);
        }
    }   
} 
```

--- update no2 这是我的问题的一些代码。我删除了一些无关紧要的东西。

```
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JFrame;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;

public class MainJF extends JFrame {

public MainJF(){
    this.add(createTagsTable());
    setMinimumSize(new java.awt.Dimension(200,400));
}

 private JTable createTagsTable(){

    String[] columnNames = {"",          
                            "Tag",
                            "",
                            "",
                            ""};

    Object[][] data = new Object[10][columnNames.length];
    for (int i=0; i<data.length; i++){
        data[i][COLUMN_CHECK] = false;
        data[i][COLUMN_TAG_NAME] = "Tag " + i;
        data[i][COLUMN_TAG_ID] = i;
        data[i][COLUMN_EDIT_TAG] = "edit";
        data[i][COLUMN_DELETE_TAG] = "delete";
    }

    model = new TagsSelectionTableModel(columnNames, data);
    tagsJT = new JTable(model);

    tagsJT.setRowSelectionAllowed(true);
    tagsJT.addMouseListener(new TagsTableMA());

    return tagsJT;
}

class TagsSelectionTableModel extends DefaultTableModel{

    public TagsSelectionTableModel(String[] columnNames, Object[][] data){
        super(data, columnNames);
        this.columnNames = columnNames;
        this.data = data;
    }

    private String[] columnNames;
    private Object[][] data;

    @Override
    public Object getValueAt(int row, int col) { return data[row][col]; }
}

  class TagsTableMA extends MouseAdapter{

    @Override
    public void mousePressed(MouseEvent e){
        Point p = e.getPoint();
        int row = tagsJT.rowAtPoint(p);
        int column = tagsJT.columnAtPoint(p);

        if (column == COLUMN_DELETE_TAG){
            int irow = tagsJT.convertRowIndexToView(row);     
            model.removeRow(irow);
        }
    }
}

private JTable tagsJT;
private TagsSelectionTableModel model;   

private static int COLUMN_CHECK = 0;
private static int COLUMN_TAG_NAME = 1;
private static int COLUMN_TAG_ID = 2;
private static int COLUMN_EDIT_TAG = 3;
private static int COLUMN_DELETE_TAG = 4;

public static void main(String args[]) {
    new MainJF().setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T08:59:03.220

`row`获得的是`columnAtPoint()`在*视图*坐标中，而`removeRow()`假设是*模型*坐标。引用相关[教程部分](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)：

> 这种区别并不重要，除非您查看的数据已通过排序、过滤或用户对列的操作进行了重新排列。

如果是这样，您将需要使用，在[*排序和过滤*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)`convertRowIndexToModel()`末尾附近描述，它建议：[](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)

 *> 使用分拣机时，请始终记住转换单元格坐标。

另外，考虑使用 a[`ListSelectionListener`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)而不是 a `MouseAdapter`。

附录：您的实现`getValueAt()`继续访问提供给构造函数的数组，而模型的数据实际上存储在父实现中。如果您确实需要对模型的数据结构进行更多控制，请扩展`AbstractTableModel`，如下[所示](https://stackoverflow.com/a/9134371/230513)。

```
import java.awt.EventQueue;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;

/** @see https://stackoverflow.com/a/11237205/230513 */
public class MainJF extends JFrame {

    private JTable tagsJT;
    private TagsSelectionTableModel model;
    private static int COLUMN_CHECK = 0;
    private static int COLUMN_TAG_NAME = 1;
    private static int COLUMN_TAG_ID = 2;
    private static int COLUMN_EDIT_TAG = 3;
    private static int COLUMN_DELETE_TAG = 4;

    public MainJF() {
        this.add(new JScrollPane(createTagsTable()));
        pack();
        setLocationRelativeTo(null);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    private JTable createTagsTable() {

        String[] columnNames = {"0", "Tag", "2", "3", "4"};

        Object[][] data = new Object[10][columnNames.length];
        for (int i = 0; i < data.length; i++) {
            data[i][COLUMN_CHECK] = false;
            data[i][COLUMN_TAG_NAME] = "Tag " + i;
            data[i][COLUMN_TAG_ID] = i;
            data[i][COLUMN_EDIT_TAG] = "edit";
            data[i][COLUMN_DELETE_TAG] = "delete";
        }
        model = new TagsSelectionTableModel(columnNames, data);
        tagsJT = new JTable(model);
        tagsJT.setRowSelectionAllowed(true);
        tagsJT.addMouseListener(new TagsTableMA());
        return tagsJT;
    }

    class TagsSelectionTableModel extends DefaultTableModel {

        public TagsSelectionTableModel(String[] columnNames, Object[][] data) {
            super(data, columnNames);
        }
    }

    class TagsTableMA extends MouseAdapter {

        @Override
        public void mousePressed(MouseEvent e) {
            Point p = e.getPoint();
            int row = tagsJT.rowAtPoint(p);
            int col = tagsJT.columnAtPoint(p);
            if (col == COLUMN_DELETE_TAG) {
                model.removeRow(row);
            }
        }
    }

    public static void main(String args[]) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new MainJF().setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T02:07:28.190

看 的`removeRow(int)`方法的代码`DefaultTableModel`，很明显它会移除 backing 对应索引处的行数组`Vector`：

```
 public void removeRow(int row) {
    dataVector.removeElementAt(row);
    fireTableRowsDeleted(row, row);
} 
```

（来自Java 6）。

我能想到两种可能：

1.  您已扩展`DefaultTableModel`并更改了此方法的实现。（我怀疑是这种情况——你可能会在你的帖子中承认这一点）

2.  您有一个用于表格的自定义渲染器，它根据单元格的行索引绘制单元格数据。*

# asp.net-web-api - Web API 和 .NET 4.5：声明和权利

> ID：11223589
> 
> 赞同：4
> 
> 时间：2012-06-27T09:56:07.373
> 
> 标签：asp.net-web-api, claims-based-identity, .net-4.5, rights, claims

是否有使用权利管理声明的最佳实践？

我正在使用新的 .net 4.5 和新的声明类。目前我做这样的事情：

```
new ClaimsIdentity(new List<Claim>
                    {
                        new Claim("Username", user.UserName),
                        new Claim("UserNumber", user.UserNumber.ToString()),
                        new Claim("Creation_Right", ""),
                        new Claim("Edit_Right", "")
                    } 
```

我添加了没有价值的权利声明。稍后我检查是否**存在**权利。不需要值（如真/假） - 如果存在，则其隐含的“**真**”。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:38:14.240

也许。看起来您正在做的是将身份验证和授权合并在一起，在身份验证时做出访问策略决策。

您还可以选择将授权组件与身份验证组件分开。声明表示一组有关用户的信息，可用于做出授权决定。也就是说，您的身份验证步骤会产生一组声明，并且每当您的用户尝试访问某些内容时，这些声明都会被提供给授权组件，该组件会做出决定。

这提供了一些灵活性，因为您的授权策略可以独立于您的索赔发布系统而改变和发展。例如，您可以发出将某人标识为管理员的角色声明，还可以发出指定用户如何登录的身份验证方法声明，例如使用智能卡或用户名和密码。这使您能够定义访问策略，您可以只需要管理员角色来访问某些资源，而其他更敏感的资源需要管理员角色并使用强大的身份验证机制。这也意味着您可以根据上下文在多个不同的访问策略之间切换。您的在线威士忌商店可能会在美国使用 ageOver21 声明，但您网站的加拿大版本需要 over18 或 over19 声明。

# c# - 填充 ObservableCollection 的 ObservableCollection，由两个数据库列分隔

> ID：11223590
> 
> 赞同：0
> 
> 时间：2012-06-27T09:56:08.697
> 
> 标签：c#, sql, sql-server, linq, linq-to-sql

我的数据库如下：

```
ID   Date   Number   NumberIWishToRecord 
```

我想做的是使用 Linq-to-SQL 查询来填充`ObservableCollection<ObservableCollection<CustomClass>>`.

我想要的是只选择行`Number == a given parameter`。

`ID`指的是一个人，我要做的是获取一个人的所有信息并将其存储在一个`ObservableCollection`，所以我会有一个`ObservableCollection<CustomClass>`，每个`CustomClass`持有信息只有一行，每个`ObservableCollection<CustomClass>`持有信息只有一个人（记录在不同的日子）。

然后，我希望选择其中一个`ObservableCollection`包含`ObservableCollection<CustomClass>`所有人的信息！

所以，一些样本数据：

```
ID   Date          Number   NumberIWishToRecord
1    27-06-2012    0.1933   25
1    28-06-2012    0.1933   27
1    29-06-2012    0.1933   29
2    14-06-2012    0.1933   412
2    15-06-2012    0.1741   321 
```

所以当我运行我的方法时，我只想返回给定参数的数字，在我的例子中我会选择 0.1933。

然后，我希望将 ID = 1 的两行保存在一个`ObservableCollection<CustomClass>`中，并将单行`ID == 2`保存在另一个中`ObservableCollection<CustomClass>`。然后，这两个都`ObservableCollections`将各自举行`ObservableCollection`！为了显示 ：

```
ObservableCollection<ObservableCollection<CustomClass>>
     ObservableCollection<CustomClass>
         1    27-06-2012    0.1933   25
         1    28-06-2012    0.1933   27
         1    29-06-2012    0.1933   29
     ObservableCollection<CustomClass>
         2    14-06-2012    0.1933   412 
```

我将如何在 linq to sql 中编写一个可以执行此操作的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:18:17.467

我将只编写一个标准的查询语法 Linq 表达式来实现这一点，您可以将其调整为您的表。

```
 var rowsById = new ObservableCollection<ObservableCollection<row>>(
            from r in _rows
            where r.number == 1.2
            group r by r.ID into rowIdGroup
            select new ObservableCollection<row>(rowIdGroup)); 
```

如果需要将行中的数据转换为 CustomClass：

```
 var rowsById = new ObservableCollection<ObservableCollection<CustomClass>>(
            from r in _rows
            where r.number == 1.2
            group r by r.ID into rowIdGroup
            select new ObservableCollection<CustomClass>(
                rowIdGroup.Select(r => new CustomClass
                                        {
                                            ID = r.ID,
                                            Number = r.number // add more
                                        }))); 
```

或者，如果您更喜欢所有表达式中的查询语法：

```
 var rowsById = new ObservableCollection<ObservableCollection<CustomClass>>(
            from r in _rows
            where r.number == 1.2
            group r by r.ID into rowIdGroup
            select new ObservableCollection<CustomClass>(
                from gr in rowIdGroup select new CustomClass
                                        {
                                            ID = gr.ID,
                                            Number = gr.number
                                        })); 
```

# javascript - Onclick 不应触发表单数据提交

> ID：11223591
> 
> 赞同：3
> 
> 时间：2012-06-27T09:56:08.883
> 
> 标签：javascript, html

我刚刚发现，每次`onclick`我`<button>`放置在`<form>`标签内的事件触发时，表单都会提交它的数据，就好像我点击了一样`<input type='submit'>`。我不想要那个。我的表单中的按钮用于其他任务，在我单击其中一个按钮后，表单不应提交数据。

为了更清楚，我想要这个代码：

```
<form action="http://www.google.com" method="POST">
    <button onclick="alert('hi!')">Button</button>
    <br>
    <input type="submit" value="submit"/>
</form> 
```

显示警报“嗨！” 当我点击按钮时，它不应该打开谷歌。它应该只在我按“提交”时显示谷歌。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T10:02:12.497

指定[`type="button"`](https://developer.mozilla.org/en/HTML/Element/button#attr-type)：

```
<button type="button" onclick="alert('hi!')">Button</button> 
```

从链接的文章：

> 如果未指定属性，则此 [submit] 为默认值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T09:57:31.353

尝试这个..

```
onclick="alert('hi!'); return false;" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T16:33:18.990

使用 jQuery 使用跨度而不是输入，使用 .button 调用，然后设置单击事件。

# java - 如何强制文本显示在标题下方？

> ID：11223592
> 
> 赞同：1
> 
> 时间：2012-06-27T09:56:10.113
> 
> 标签：java, pdf, itext

如何避免文档文本和标题重叠？

![在此处输入图像描述](../Images/bfffd5849a101841cddb82a7007ead19.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:13:08.057

您必须为文档设置边距，以考虑页眉使用的空间。看看这个[例子](http://itextpdf.com/examples/iia.php?id=17)。特别是，您对此[Document 构造函数](http://api.itextpdf.com/itext/com/itextpdf/text/Document.html#Document%28com.itextpdf.text.Rectangle,%20float,%20float,%20float,%20float%29)感兴趣：

```
Document doc = new Document(Rectangle pageSize,
    float marginLeft,
    float marginRight,
    float marginTop,        // <-- you want to play with this paramater
    float marginBottom) 
```

# sql-server - 如何通过对行进行分组来旋转行？

> ID：11223594
> 
> 赞同：0
> 
> 时间：2012-06-27T09:56:17.553
> 
> 标签：sql-server, pivot

我有查询显示这样的表：
![在此处输入图像描述](../Images/38e1b16582e474bd8a53acd3454f6a0f.png)

但我想`PIVOT`通过分组`bulan`和表格结果来做到这一点：
![在此处输入图像描述](../Images/45452bf9707fbf71674c27970e8e9d8f.png)

这是我用来获取当前结果的查询：

```
SELECT 
    month([date]) as bulan, 
    [type] as tipe,
    SUM([net qty]) total_karton, 
    CAST(SUM([cm1 (rp)]) as decimal) as total_uang
FROM 
    tbl_weeklyflash_ID
WHERE
    DATEDIFF(month,[date],CURRENT_TIMESTAMP) between 0 and 2
GROUP BY 
    month([date]),
    [type]
ORDER BY 
    month([date]), [type] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:25:10.943

如果每组的行数是动态的，但组数总是 3，那么试试这个代码

```
;with maintable as (select month([date]) m_date,row_number() over(order by count(*) desc) row_num from tbl_weeklyflash_ID WHERE DATEDIFF(month,[date],CURRENT_TIMESTAMP) between 0 and 2
group by month([date])),
t1 as ( select month([date]) as bulan, [type] as tipe,SUM([net qty]) total_karton, CAST(SUM([cm1 (rp)]) as decimal) as total_uang,row_number() over(order by month([date])) as slno  from tbl_weeklyflash_ID where month([date]) =(select m_date from maintable where row_num=1) GROUP BY month([date]), [type]) ,
t2 as ( select month([date]) as bulan, [type] as tipe,SUM([net qty]) total_karton, CAST(SUM([cm1 (rp)]) as decimal) as total_uang,row_number() over(order by month([date])) as slno  from tbl_weeklyflash_ID where month([date]) =(select m_date from maintable where row_num=2) GROUP BY month([date]), [type]),
t3 as ( select month([date]) as bulan, [type] as tipe,SUM([net qty]) total_karton, CAST(SUM([cm1 (rp)]) as decimal) as total_uang,row_number() over(order by month([date])) as slno  from tbl_weeklyflash_ID where month([date]) =(select m_date from maintable where row_num=3) GROUP BY month([date]), [type])
select t1.tipe,t1.total_karton [karton1],t1.total_uang [uang1],t2.total_karton [karton2],t2.total_uang [uang2],t3.total_karton [karton3],t3.total_uang [uang3]
from t1 full outer join t2
on t1.slno=t2.slno 
full outer join t3
on t2.slno =t3.slno 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:55:14.497

这不是确切的解决方案。如果每组的行数始终如示例所示（本示例为 5），则可以执行以下操作。

```
declare @row_count int =6;
    with cte as(
        select  month([date]) as bulan, 
        [type] as tipe,
        SUM([net qty]) total_karton, 
        CAST(SUM([cm1 (rp)]) as decimal) as total_uang,row_number() over(order 
    by month([date]),[type]) as rnk 
        from tbl_weeklyflash_ID 
        WHERE
        DATEDIFF(month,[date],CURRENT_TIMESTAMP) between 0 and 2
        GROUP BY 
        month([date]),
        [type]
        )
    select * from cte T1 join cte T2 
    on T1.rnk= T2.rnk-@row_count 
    and t1.rnk between 1 and @row_count
    join cte T3
    on  T2.rnk= T3.rnk-@row_count 
    and t2.rnk between 1*@row_count+1 and 2*@row_count 
```

在这里，您必须添加与组数一样多的加入条件..

# python - Django：WSGIRequest'对象在某些页面上没有属性'user'？

> ID：11223597
> 
> 赞同：19
> 
> 时间：2012-06-27T09:56:30.513
> 
> 标签：python, django, wsgi, django-middleware

如果用户登录与否，我想设置一个 cookie。

**我的中间件：**

```
class UserStatus(object):
    def process_response(self,request,response):
        user_status = 1 if request.user.is_authenticated() else 0
        max_age = (20)*52*7*24*60*60 # 20 years (After expiry, cookie gets deleted)
        response.set_cookie(user_status_cookie,user_status,max_age)
        return response 
```

最后添加到`MIDDLEWARE_CLASSES`settings.py 中。

**问题：**

*   错误：“WSGIRequest”对象没有属性“用户”
*   为什么，当我已经激活了身份验证和会话中间件时？
*   此外，有些页面运行流畅，有些页面出现此错误。
*   我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-10T02:11:53.103

最近遇到了同样的问题，发现是在访问没有尾部斜杠的 url 时发生的，并且 APPEND_SLASH 设置设置为 true：

* * *

**Django 处理初始请求**

*   CommonMiddleware.process_request
    *   重定向到带有斜杠的 newurl
*   process_response 仍在自定义中间件中运行
    *   request.user 不存在
*   HTTP 301

**然后 Django 处理带有斜杠的 url 请求**

*   process_response 在自定义中间件中运行
    *   request.user 现在存在

* * *

任何人都知道为什么永久重定向后无法在 process_response 中访问某些主要属性（用户和会话）？

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-01-13T20:42:13.073

所以它与`APPEND_SLASH`Django Common Middleware 通过重定向应用有关，防止运行`process_request()`in `AuthenticationMiddleware`（添加`user`属性）但您`process_response`仍在运行。

以下是 Django 进程中间件的实际工作方式（来自`django/core/handlers/base.py`Django 1.6）

1.  您请求的 URL 没有尾部斜杠。所以`yourdomain.com/view`。这将启动中间件流程。
2.  一旦请求到达`CommonMiddleware`，中间件发现没有斜线并返回一个`http.HttpResponsePermanentRedirect(newurl)`. 这会立即停止`process_requests`运行任何附加功能，包括`AuthenticationMiddleware`将`user`属性添加到`request`
3.  因为`CommonMiddleware`没有返回异常（包括`Http404`），`django`所以现在将从中间件获取响应并通过`process_response()`中列出的每个中间件中的每个运行它`MIDDLEWARE_CLASSES`，无论该中间件`process_request()`是否有机会运行。

解决此问题的唯一真正方法是将代码移动到`process_request()`位于 in 之后的方法`AuthenticationMiddleware`中，或者`MIDDLEWARE_CLASSES`检测对象是否具有属性。`hasattr()``request``user`

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-27T10:17:35.693

根据 FineManual：

> 在响应阶段（process_response() 和 process_exception() 中间件），类以相反的顺序应用，从下往上

所以我想说你最好在 auth 和 session 中间件*之前*添加你的中间件（假设它只处理响应）。

话虽如此，我对您仅在某些页面上出现错误这一事实感到有些困惑？？？

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-06-27T10:18:53.657

你有激活这个中间件吗？：

```
'django.contrib.auth.middleware.AuthenticationMiddleware' 
```

这个中间件在你的中间件之前运行吗？

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-02-10T15:46:10.717

我有一个类似的问题，我的一些页面在请求中没有用户，所以在我的中间件中我做了一个快速检查

```
if not hasattr(request, 'user'):
    return response 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-22T16:27:50.247

There could be an exception raised within some middleware or any other code that runs before the django's AuthenticationMiddleware (which is responsible for assigning the .user to request object).

Then there will be an AttributeError upon accessing the .user variable.

For example, any exception triggered before the AuthenticationMiddleware had a chance to run might cause the error view to execute. You'll get the error as mentioned in the title of the question, if the error view depends on request.user.

# apache - Mod_rewrite 自动重定向

> ID：11223598
> 
> 赞同：0
> 
> 时间：2012-06-27T09:56:35.447
> 
> 标签：apache, mod-rewrite, xampp

我有一个 xampp 服务器，当我想使用 Mod_rewrite 时，它​​会自动重定向到该地址，我想要的是隐藏的重定向，因此用户看不到它。例如：

> localhost/projects/23/test ==> localhost/projects/?ID=23

没有用户看到？ID = 23。使用我的代码，用户被重定向，我不知道为什么。

代码：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} ^/projects/([0-9]*)/(.*)$
RewriteRule ^projects/([0-9]*)/(.*)$ /projects?ID=$1 [L] 
```

有人可以告诉我我做错了什么，或者我可以如何配置我的 Xampp 服务器以停止重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:05:22.573

在重写 uri 中添加斜杠：

```
RewriteRule ^projects/([0-9]*)/(.*)$ /projects/?ID=$1 [L] 
```

`projects`是一个文件夹，如果您在没有尾部斜杠的情况下点击文件夹的名称，Apache 会自行重定向（添加尾部斜杠）

# python - Python + pyQT - 向连接的 Signal 函数发送参数

> ID：11223599
> 
> 赞同：1
> 
> 时间：2012-06-27T09:56:44.750
> 
> 标签：python, function, parameters, combobox, pyqt

这个例子有效：（这里我的函数没有输入参数）

```
 QtCore.QObject.connect(ComboJobType1_1, QtCore.SIGNAL(_fromUtf8("currentIndexChanged(QString)")) ,self.InputChanged()) 
```

但是，我有必要发送一个参数，所以我试试这个：（在更新我的函数以期望一个参数之后）：

QtCore.QObject.connect(ComboJobType1_1, QtCore.SIGNAL(_fromUtf8("currentIndexChanged(QString)")) ,self.InputChanged("ComboJobType1_1"))

请注意，第一个示例正在运行，唯一的问题（我猜）是向我的函数发送参数（当我在函数中时，我必须知道组合框的名称）。

请指教...谢谢！祝你有美好的一天，海豚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-12-26T06:56:17.293

参考[https://eli.thegreenplace.net/2011/04/25/passing-extra-arguments-to-pyqt-slot](https://eli.thegreenplace.net/2011/04/25/passing-extra-arguments-to-pyqt-slot)

```
 button1.clicked.connect(lambda: self.on_button(1))
    button2.clicked.connect(lambda: self.on_button(2))

def on_button(self, n):
    print('Button {0} clicked'.format(n)) 
```

为我工作，它给了它一个简单的 lambda（把它变成 funciton ref 而不是 execute ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:31:43.037

您需要提供发射对象（“from_object”）和插槽处理程序（“self.my_handler”）：

```
QtCore.QObject.connect(from_object, QtCore.SIGNAL("nameOfSignal(QString)"), self.my_handler) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-26T16:19:24.813

另一种可以导入部分函数以将参数传递给槽函数的方法。

```
from functools import partial

QtCore.QObject.connect(ComboJobType1_1, QtCore.SIGNAL(_fromUtf8("currentIndexChanged(QString)")) ,partial(self.InputChanged, "ComboJobType1_1")) 
```

# adobe - 如何从 adobe workbench ES2 工具调试 Adob e 进程

> ID：11223601
> 
> 赞同：0
> 
> 时间：2012-06-27T09:56:49.233
> 
> 标签：adobe, livecycle, workbench, livecycle-designer

我发现 adobe 服务调用存在问题，我从工作台调用了流程并记录了该流程。

过程记录没有显示任何错误，文档也在指定路径生成，但它没有给出成功消息。:(

我陷入了这个问题。

在正常情况下，我们会在对话框中收到成功消息，但在我的情况下，我能够创建文档但成功消息没有出现

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:02:11.633

我猜你正在调用输出服务。如果是这样，请务必遵循此处描述的指南：http: [//help.adobe.com/en_US/livecycle/9.0/programLC/help/000674.html](http://help.adobe.com/en_US/livecycle/9.0/programLC/help/000674.html)

此外，您应该发布您正在执行的代码，以更广泛地了解您想要实现的目标。

# javascript - 在动画期间移除元素

> ID：11223608
> 
> 赞同：0
> 
> 时间：2012-06-27T09:57:02.023
> 
> 标签：javascript, jquery, jquery-ui

当鼠标悬停在缩略图上时，我正在显示更大尺寸的图像。缩略图和较大尺寸的图像都是动态创建的，我使用`clip`效果来显示较大尺寸的图像。当鼠标从缩略图上移开时，必须删除较大尺寸的图像。这是我的代码。

```
$(".uploadThumb").live('mouseover mouseout', function(event) {
           if (event.type == 'mouseover') {
                var src = $(this).prop("src");
                var img = $("<img class='big_thumb' src='"+src+"' width='400'/>");
                $(this).after(img);
                img.hide().show("clip", { direction: "horizontal" }, 1000);
              } else {
                  $(this).siblings(".big_thumb").remove();
              }
}); 
```

当我将鼠标移到缩略图上时，更大的图像会正确显示，如果我等待动画完成然后将鼠标从缩略图上移开，它就会被完美地移除。 **但是，如果我在动画（ ）完成****之前移开鼠标，则不会删除更大的图像`clip`**

**[这是我的问题的演示](http://jsfiddle.net/bSSVP/)**

有什么解决方案或者我必须删除动画:((

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T10:12:14.313

你真的需要使用[`sibilings`](http://api.jquery.com/siblings/)方法吗？

你可以写：

```
$(".big_thumb").remove(); 
```

一切都应该工作。

请参阅更新的[演示](http://jsfiddle.net/antyrat/bSSVP/7/)。

# php - WordPress - 恢复原来的 WP_Query

> ID：11223609
> 
> 赞同：0
> 
> 时间：2012-06-27T09:57:03.523
> 
> 标签：php, wordpress, loops

我有一个名为“Portfolio”的帖子类型和single-portfolio.php 文件来处理它（它是WordPress）。当我在那里使用类似的东西时，它会像预期的那样工作：

```
$post_id = $post->ID; //returns ID of current portfolio post. Good! 
```

但是当我在中间发布这样的简短查询时：

```
$post_id = $post->ID; //returns ID of current portfolio post. Good!
wp_reset_query();
query_posts('posts_per_page=4');
    if ( have_posts() ) : while ( have_posts() ) : the_post();
            the_id(); //returns ID of standard blog post
        endwhile;
    endif; 
wp_reset_query();
$post_id = $post->ID; //returns ID of last BLOG post. Wrong! 
```

我只关心`$post_id`上面例子中的变量。我希望它始终返回当前 PORTFOLIO 帖子的正确 ID，而不依赖于其他查询。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T01:13:10.313

我相信[`wp_reset_postdata()`](http://codex.wordpress.org/Function_Reference/wp_reset_postdata)会给你你正在寻找的结果。

```
$the_query = new WP_Query( 'posts_per_page=4' );

if ( $the_query->have_posts() ) :
    while ( $the_query->have_posts() ) : $the_query->the_post();
        // output
    endwhile;
endif;

wp_reset_postdata(); 
```

我应该注意，我[在另一个问题中记录了另一种方法，询问有什么区别以及何时应该使用每种方法](https://stackoverflow.com/questions/14866154/wordpress-different-wp-query-usage-which-is-correct-in-which-context)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:13:49.227

该[`wp_reset_query`](http://codex.wordpress.org/Function_Reference/wp_reset_query)函数`$post`也会重置全局变量，但仅基于全局`$wp_query`变量。这仍然被修改，可能是由于 Wordpress 中的一个小缺陷。在你的情况下，我会说一个简单的`WP_Query::rewind_posts()`应该做到这一点：

```
wp_reset_query();
$wp_query->rewind_posts();
$post_id = $post->ID; 
```

此外，您应该考虑创建第二个循环，而不是覆盖第一个循环。

另见：

*   [Wordpress wp_reset_query() 不会返回上一个查询？](https://stackoverflow.com/questions/4932116/wordpress-wp-reset-query-doesnt-go-back-to-last-query)

# jquery - 如何将 Font Awesome 用于复选框等

> ID：11223615
> 
> 赞同：16
> 
> 时间：2012-06-27T09:57:29.037
> 
> 标签：jquery, css, twitter-bootstrap, font-awesome

我在我的网站上使用[Font Awesome](http://fortawesome.github.com/Font-Awesome/)作为图标。我对 HTML 和 CSS 很陌生。我试图将它用于复选框，并且很难弄清楚如何使用它来启用/禁用复选框并显示适当的图标。

例如; 我将以下标签用于复选框：

```
<div style="font-size: 24px;">
<i id="prime" type="checkbox" class="icon-check-empty"></i>icon-check
</div> 
```

当复选框被启用/禁用时，我正在使用下面的 jQuery 来更改图标：

```
$(".icon-check-empty").click(function(){
    $('#prime').removeClass('icon-check-empty');
    $('#prime').addClass('icon-check');
}); 
```

我确信这不会是它应该如何使用的方式。您能否指导我应该如何使用它。

目前; 我想使用复选框，我的目标是选中/取消选中复选框，并显示它的相应图标。选中时： icon-check ; 未选中：icon-check-empty

请指导我！

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-09T00:39:12.873

这是我[简单的纯 CSS 方法](http://jsfiddle.net/8PYJg/)：

```
input[type="radio"],
input[type="checkbox"] {
  display:none;
}

input[type="radio"] + span:before,
input[type="checkbox"] + span:before {
  font-family: 'FontAwesome';
  padding-right: 3px;
  font-size: 20px;
}

input[type="radio"] + span:before {
  content: "\f10c"; /* circle-blank */
}

input[type="radio"]:checked + span:before {
  content: "\f111"; /* circle */
}

input[type="checkbox"] + span:before {
  content: "\f096"; /* check-empty */
}

input[type="checkbox"]:checked + span:before {
  content: "\f046"; /* check */
} 
```

基本思想是选择跨度：在您想要的输入*旁边。*我用复选框和收音机做了一个例子。如果您使用的是 less/sass，您可以只包含 .icon-glass:before 声明，以使其更易于维护和修改。

作为旁注，您可以使用此方法设置您喜欢的样式，因此可以更改颜色、背景、阴影颜色、图标等。

您可以使用[FontAwesome 源](https://github.com/FortAwesome/Font-Awesome/blob/master/css/font-awesome.css)获取要添加的字符。

[selectivizr](http://selectivizr.com/)支持 :before & :checked，所以如果您支持 IE6-8，请使用它来支持 IE6+：

```
<!--[if (gte IE 6)&(lte IE 8)]>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/selectivizr/1.0.2/selectivizr-min.js"</script>
<noscript><link rel="stylesheet" href="[fallback css that display:inline-block radios & checkboxes]" /></noscript>
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-08-30T00:18:55.990

许多花哨的复选框解决方案都存在以不接收输入焦点的方式删除原始输入复选框的缺陷。
这是不可接受的，原因有两个：

1.  您不能使用键盘（`Tab-key`和`spacebar`）导航到复选框并更改其值。
2.  您不能在复选框上应用悬停和聚焦样式。

@konsumer 上面的解决方案很好，但缺乏输入焦点能力。但是，我遇到 了@geoffrey_crofte 在输入焦点起作用的地方的
[实现。](http://codepen.io/CreativeJuiz/pen/zqKtp)然而，它可能不像@konsumers那么花哨

所以..我将这两者结合起来并提出了一个[笨拙的例子](http://plnkr.co/edit/PCDhvl?p=info)。此解决方案的唯一缺点是您必须使用特定的 html 标记才能使其工作：

```
<input type="checkbox" class="fancy-check" id="myId"/>
<label for="myId" ><span>The label text</span></label> 
```

复选框后面必须跟一个标签标签。然后该`label`标签可以包括`span`包含标签文本的标签。

我还要求将类`fancy-check`用于要应用的新样式。这是为了避免样式破坏页面中缺少所需的后续`label`标记的其他复选框。

该示例基于使用图标字体，在这种情况下它需要[FontAwesome 库](http://fortawesome.github.io/Font-Awesome/)。

样式表在这里：

```
/*Move he original checkbox out of the way */
[type="checkbox"].fancy-check {
  position: absolute;
  left: -9999px;
}
/*Align the icon and the label text to same height using tabl-cell display*/
/*If you change the font-size of the text, you may also want to do som padding or alignhment changes here*/
.fancy-check ~ label >  span {
  display: table-cell;
  vertical-align: middle;
  padding-left: 5px;
}
/*The label will contain the icon and the text, will grab the focus*/
[type="checkbox"].fancy-check + label {
  cursor: pointer;
  display: table;
}
/*The icon container, set it to fixed size and font size, the padding is to align the border*/
/*If you change the font-size of this icon, be sure to adjust the min-width as well*/
[type="checkbox"].fancy-check + label:before {
  font-family: 'FontAwesome';
  display: inline-block;
  box-sizing: border-box;
  border: 1px solid transparent;
  font-size: 22px;
  min-width: 28px;
  padding: 2px 0 0 3px;
}
/* toggle font awsome icon*/
[type="checkbox"].fancy-check:checked + label:before {
  content: "\f046";
}
[type="checkbox"].fancy-check:not(:checked) + label:before {
  content: "\f096";    
}
/*Do something on focus, in this case show dashed border*/
[type="checkbox"].fancy-check:focus + label:before {
  border: 1px dashed #777;
}
/*Do something on hover, in this case change the image color*/
[type="checkbox"].fancy-check:hover + label:before {
   color: #67afe5;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-27T10:16:12.230

```
$("yourselector").click(function(){
    if($(this).hasClass('icon-check')){
        $(this).removeClass('icon-check').addClass('icon-check-empty');}
    else {
        $(this).removeClass('icon-check-empty').addClass('icon-check');}
});​ 
```

`yourselector`随心所欲更换零件

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-14T22:26:48.520

如果你正在运行 jQuery，你可以使用这样的东西..

扩展 jQuery：

```
jQuery.fn.extend({
  shinyCheckbox:
    function() {
      var setIcon = function($el) {
        var checkbox = $el.find('input[type=checkbox]');
        var iclass = '';
        if (checkbox.is(':checked')) {
          var iclass = 'icon-check';
        } else {
          var iclass = 'icon-check-empty';
        }
        $el.find('i[class^=icon-]').removeClass('icon-check').removeClass('icon-check-empty').addClass(iclass);
      }
      this.find('input[type=checkbox]').change(function() {
        setIcon($(this).parents('label.checkbox'));
      });
      this.each(function(i, el) {
        setIcon($(el));
      });
    }  
});

$(document).ready(function() {
  $('label.checkbox').shinyCheckbox();
}); 
```

然后在你的 html 中使用它：

```
<label class="checkbox" for="mycheckbox">
  <i class="icon-check-empty"></i>
  <input type="hidden" name="mycheckbox" value="0" />
  <input id="mycheckbox" name="mycheckbox" type="checkbox" value="1" checked="checked" />
  Meine Checkbox hat einen sehr langen Text
</label> 
```

还有一些基本的 CSS，你有一个闪亮的复选框：

```
input[type="checkbox"] {
    display: none;
}
label.checkbox {
    cursor: pointer;
    display: inline-block;
    margin-left: 1px;
    padding-left: 15px; /* maybe this is not enough for your font size - remember: it's just an example and not best practice */
}
label.checkbox .icon-check:before, label.checkbox .icon-check-empty:before {
    margin-left: -15px;
    padding-right: 3px;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-16T14:23:24.680

看看这个：[http ://codepen.io/jamesbarnett/pen/yILjk](http://codepen.io/jamesbarnett/pen/yILjk)

这是对我有用的代码，来自上面的链接。

```
/*** custom checkboxes ***/

input[type=checkbox] { 
    display:none; 
} 

/* to hide the checkbox itself */
input[type=checkbox] + label:before {
  font-family: FontAwesome;
  display: inline-block;
}

input[type=checkbox] + label:before {
    content: "\f096"; 
} 

/* unchecked icon */
input[type=checkbox] + label:before {    
    letter-spacing: 10px; 
} 

/* space between checkbox and label */
input[type=checkbox]:checked + label:before {
    content: "\f046"; 
} 

/* checked icon */
input[type=checkbox]:checked + label:before { 
    letter-spacing: 5px; 
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-25T23:37:21.533

这是一个非常干净的全 CSS 示例。

[http://jsfiddle.net/8wLBJ/](http://jsfiddle.net/8wLBJ/)

```
.checkbox-container { width: 100%; height: 30px; padding: 0 0 0 10px; margin: 5px 0 0 0; border-radius: 3px; background-color: #e5e5e5; }
.checkbox-container label { float: left; padding: 0; margin-top: 7px; }
.checkbox-container label .checkBoxTitle {width: 200px; margin-top: -1px; font-size: 12px;}

.newCheck[type="checkbox"]:not(:checked), .newCheck[type="checkbox"]:checked { position: absolute; left: -9999px;}
.newCheck[type="checkbox"]:not(:checked) + label, .newCheck[type="checkbox"]:checked + label { width: 150px; position: absolute; cursor: pointer; }
.newCheck[type="checkbox"]:not(:checked) + label:before,   .newCheck[type="checkbox"]:checked + label:before { content: ''; position: absolute; left: 0; top: -1px; width: 17px; height: 17px; border: 1px solid #aaa; background: #f8f8f8; border-radius: 3px; box-shadow: inset 0 1px 3px rgba(0,0,0,.1);}
.newCheck[type="checkbox"]:not(:checked) + label:after,    .newCheck[type="checkbox"]:checked + label:after { content: '\f00c'; font-family: FontAwesome; padding-right: 5px; position: absolute; top: -8px; left: 0;  font-size: 20px; color: #555;}
.newCheck[type="checkbox"]:not(:checked) + label:after { opacity: 0;}
.newCheck[type="checkbox"]:checked + label:after { opacity: 1;}
.newCheck[type="checkbox"]:checked + label span, .newCheck[type="checkbox"]:not(:checked) + label span { position:absolute; left:25px; } 
```

# objective-c - setHTTPBody 在 NSMUtableURLRequest 中发送不正确的数据

> ID：11223618
> 
> 赞同：0
> 
> 时间：2012-06-27T09:57:39.520
> 
> 标签：objective-c, nsmutableurlrequest

我在正确设置请求的 HTTPBody 时遇到问题。我正在使用 Oauth 与我们的 API 服务器进行通信，唯一的区别是，我需要通过正文而不是标头发送数据（使用 OauthConsumer.framework - [http://code.google.com/p/oauthconsumer/ wiki/UsingOAuthConsumer](http://code.google.com/p/oauthconsumer/wiki/UsingOAuthConsumer)）。

这是我的代码：

```
NSString *oauthHeader = [NSString stringWithFormat:@"OAuth realm=\"%@\", oauth_consumer_key=\"%@\", %@oauth_signature_method=\"%@\", oauth_signature=\"%@\", oauth_timestamp=\"%@\", oauth_nonce=\"%@\", oauth_version=\"1.0\"%@",
                         [realm URLEncodedString],
                         [consumer.key URLEncodedString],
                         oauthToken,
                         [[signatureProvider name] URLEncodedString],
                         [signature URLEncodedString],
                         timestamp,
                         nonce,
                         extraParameters];

//[self setValue:oauthHeader forHTTPHeaderField:@"Authorization"];
NSLog(@"%@", oauthHeader);
[self setHTTPBody:[oauthHeader dataUsingEncoding:NSASCIIStringEncoding]]; 
```

这是 NSlog 的输出。

OAuth 领域=""，oauth_consumer_key="key"，oauth_signature_method="HMAC-SHA1"，oauth_signature="HT2UwJoW4dSNh1gXkAzQThLp0Sk%3D"，oauth_timestamp="1340789377"，oauth_nonce="3BDF0A1A-4FB0-40EF-95EA-5CBB88" “1.0”

这就是服务器读取的内容，为什么数组是错误的？这不是服务器端的错误，我们的 C# 客户端没有任何问题。

```
数组（1）{
  [“OAuth_realm”]=>
  字符串(215) """, oauth_consumer_key="key", oauth_signature_method="HMAC-SHA1", oauth_signature="HT2UwJoW4dSNh1gXkAzQThLp0Sk=", oauth_timestamp="1340789377", oauth_nonce="3BDF0A1A-4FB0-40EF-95EA-5CBauth_versionFD071" ="1.0""
}

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:39:41.997

问题似乎是您没有将不同的键值对彼此分开。只需将它们与“&”（不带引号）连接即可。您在键值关联之间设置逗号。
此外，您不需要将值封装在引号内，除非您希望这些引号成为接收方值的一部分。

您生成的数据字符串应如下所示：

```
NSString *oauthHeader = [NSString stringWithFormat:@"OAuth_realm=%@&oauth_consumer_key=%@&%@oauth_signature_method=%@&oauth_signature=%@&oauth_timestamp=%@&oauth_nonce=%@&oauth_version=1.0%@",
                     [realm URLEncodedString],
                     [consumer.key URLEncodedString],
                     oauthToken,
                     [[signatureProvider name] URLEncodedString],
                     [signature URLEncodedString],
                     timestamp,
                     nonce,
                     extraParameters]; 
```

请记住，您的额外参数也需要用“&”分隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:52:37.833

好吧，我很愚蠢，没有注意到我们的 API 使用“&”而不是“，”来分隔键。问题解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:28:08.773

看起来 oauth_signature 没有正确编码（百分号仍然存在）。而不是`[signature URLEncodedString]`试试这个：

```
[signature stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding] 
```

看看是否有什么不同。

# email - hotmail 是否使用 ARF 作为其反馈循环消息？

> ID：11223623
> 
> 赞同：0
> 
> 时间：2012-06-27T09:57:46.313
> 
> 标签：email, feedback-loop

我正在开发一个程序来解析 ARF（Abure 报告格式）消息。事实证明，我还需要能够处理 Hotmail 反馈循环消息。

hotmail 是否使用 ARF 作为其反馈循环消息？如果不是，它使用哪种格式？

我发现[这个站点](http://cpan.uwinnipeg.ca/htdocs/Email-ARF-Hotmail/Email/ARF/Hotmail.pm.html)提供了一个 perl 解析器来将 hotmail 消息转换为 ARF 格式，这让我觉得它没有使用它。

我在某处读到它正在使用 JMR（垃圾邮件报告），但我在 Internet 上找不到此类消息的任何示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-06T17:47:34.480

像往常一样，微软提出了他们自己的专有替代标准（我猜至少它们是一致的），称为 JMR - 垃圾邮件报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:21:31.027

不，不像 AOL Hotmail 不使用 ARF。相反，您将收到主题为“来自“staff@hotmail.com”的来自 [ip]* 的邮件的投诉，其中包含原始正文。

# php - 通过php使用api将视频上传到youtube

> ID：11223624
> 
> 赞同：0
> 
> 时间：2012-06-27T09:57:47.760
> 
> 标签：php, youtube, youtube-api

```
 $httpClient = 
     Zend_Gdata_ClientLogin::getHttpClient(
     $username = '****@gmail.com',
     $password = '*****',
     $service = 'youtube',
     $client = null,
     $source = 'testphp', 
     $loginToken = null,
     $loginCaptcha = null,
     $authenticationURL); 
```

我从 code.google.com 获得了上述代码。我想知道`authenticationURL`应该是什么。我是新手，帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:02:40.833

如果您从[此处](https://developers.google.com/youtube/2.0/developers_guide_php#ClientLogin_for_Installed_Applications)复制代码，那么您错过了这一行：

`$authenticationURL= 'https://www.google.com/accounts/ClientLogin';`

就是这样。

# jquery - Coffeescript：如何链接 div，但如果单击子链接，则覆盖链接

> ID：11223626
> 
> 赞同：0
> 
> 时间：2012-06-27T09:57:53.853
> 
> 标签：jquery, coffeescript

我觉得很难解释，所以如果您需要，请索取更多信息。

我有一个像这样的div：

```
<div id="clickable">
  <p>Some content</p>
  <a href="google.com" class="link">Google</a>
  <a href="yahoo.com">Yahoo</a>
</div> 
```

我希望 div 是可点击的，并链接到具有类“链接”的属性的 href。这部分我做了：

```
 $('#clickable').on 'click', (ev) ->
    window.location = $(this).find('.link').attr('href')
    return false 
```

但是，如果用户单击 div 内的链接，应该发生的情况是，该链接位置优先。因此，在上面的示例中，如果您单击 yahoo，它将直接指向 yahoo。目前，它迫使谷歌。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:25:23.703

无论链接的正常行为如何，都会调用更新`window.location`和后续（停止点击的传播）。`return false`

尝试这个：

```
$('#clickable').on('click', (ev) ->
  unless $(ev.target).is('a')
    window.location = $('.link', @).attr('href') 
    false
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T10:08:40.520

这是因为事件冒泡。单击`a`气泡到`div`并`click`触发一个处理程序`div`，将您重定向到`.link`. 由于 JavaScript 是单线程的，因此顶部处理程序作为最后一个处理程序被触发，并且您总是被重定向到`.link`.

尝试添加此代码：

```
$('#clickable').on 'click', 'a', (ev) ->
    ev.stopPropagation() 
```

不要忘记`'a'`部分，它过滤点击`a`元素。你可以在那里使用 jQuery 的过滤器。

**编辑**

由于未知原因，我发布的代码段不适合您，那么这个怎么样？（这次替换代码）

```
$('#clickable').on 'click', (ev) ->
    if ev.target.href
        window.location = ev.target.href
        return
    window.location = $(this).find('.link').attr('href')
    return false 
```

# javascript - 如何在 d3.grid 示例 d3-js-building-a-grid-of-rectangles 中向单元格添加文本

> ID：11223628
> 
> 赞同：1
> 
> 时间：2012-06-27T09:57:57.427
> 
> 标签：javascript, layout, grid, d3.js

我是 d3.js 的新手，我需要设计一个类似于此处描述的可视化（http://stackoverflow.com/questions/10457170/d3-js-building-a-grid-of-rectangles/ 10465456#10465456) 网格实现。我正在尝试向每个具有文本 d.value 但不起作用的单元格添加文本。

我尝试将 .text(function(d){return d.value;} 添加到 row.selectAll(".cell") 但没有帮助。任何想法我应该怎么做。我尝试了类似的东西，但不确定我我在做正确的事。

```
col.selectAll("rect").append("text")
           .data(function (d) { return d; })
           .enter()
           .append("text")
            .text(function(d,i) {
                console.log(d);
              console.log(i);
                return d.value;
            }) 
            .attr("x", function(d) { return d.x; })
         .attr("y", function(d) { return d.y; }); 
```

我的问题是如何访问 d.value 并将其作为文本添加到 .cell？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:03:55.990

`text`向元素添加`<rect>`元素没有内在意义，文本元素可以添加到 s 之外，或者您可以为每个包含其和 . 的单元格`rect`创建另一个子元素。第一个场景的jsfiddle在这里：http: [//jsfiddle.net/Kmf7g/1/](http://jsfiddle.net/Kmf7g/1/)`<g>``text``rect`

# sql-server - 存储过程中的临时表导致 SQL Server

> ID：11223630
> 
> 赞同：1
> 
> 时间：2012-06-27T09:58:01.773
> 
> 标签：sql-server, stored-procedures

我们可以从存储过程结果动态创建一个临时表吗？

我不想手动声明临时表列。它从存储过程结果中获取表的模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:59:13.280

使用以下语法模板根据结果集创建临时表。

```
Select * into #temptable from mytable

Select column1,column2,..columnn into #temptable from mytable 
```

笔记：

该`SELECT INTO`语句非常快，原因之一是：未记录该命令以进行备份。更准确地说，该命令可以在事务中，并且任何回滚命令都将正确撤消其影响。但是，新值不会永久存储在日志文件中，因此在此命令之后，您只能执行完整的数据库备份（增量备份引发错误）。这解释了为什么必须为非临时表显式启用此功能（临时表从不包含在备份中，因此在使用临时表之前不需要使用 sp_dboption 命令`SELECT INTO`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:16:40.520

使用[行集函数](http://msdn.microsoft.com/en-us/library/ms187957)之一：

```
SELECT  *
INTO    #Temp
FROM    OPENQUERY(SERVERNAME, 'EXEC pr_StorProcName') 
```

# java - Hashmap的搜索方法

> ID：11223633
> 
> 赞同：2
> 
> 时间：2012-06-27T09:58:22.380
> 
> 标签：java, search, hashmap

我需要一个哈希图的搜索方法，但我不知道该怎么做。我也在尝试做一个编辑方法，我认为为此我需要这个方法。我的 hashMap 是用来存储员工数据的。我有`MainApp`, Employee 类和一个`EmployeeStore`类。任何人都可以帮忙吗？

```
public class MainApp
{

    public static void main(String[] args)
    {
        new MainApp().start();

    }
    public void start()
    {
        EmployeeStore Store = new EmployeeStore();
        Store.add(new Employee ("James O' Carroll", 18,"hotmail.com"));

        Store.add(new Employee ("Andy Carroll", 1171,"yahoo.com"));

        Store.add(new Employee ("Luis Suarez", 7,"gmail.com"));
        Store.print();
        Store.clear();
        Store.print();

        Store.add(new Employee ("James O' Carroll", 18,"hotmail.com"));

        Store.add(new Employee ("Andy Carroll", 1171,"yahoo.com"));

        Store.add(new Employee ("Luis Suarez", 7,"gmail.com"));

        Store.print();
        Store.remove("Andy Carroll");
        Store.print();

    }

}

//Imports.
import java.util.HashMap;
//********************************************************************
import java.util.Map;

public class EmployeeStore 
{
    HashMap<String, Employee> map;

//Constructor.  
    public EmployeeStore()
    {
        map = new HashMap<String,Employee>();
    }
//********************************************************************
//Hashmap Methods.
//Add to the Hashmap : Employee.
    public void add(Employee obj)
    {

        map.put(obj.getEmployeeName(), obj);
    }
//********************************************************************
//Remove from the Hashmap : Employee.
    public void remove(String key)
    {
      //Remove the Employee by name.
        map.remove(key);
    }
//********************************************************************
//Clear the Hashmap : Employee.
    public void clear()
    {
        map.clear();
    }
    //********************************************************************
//Print the Hashmap : Employee. 
    public void print()
    {
        System.out.println("\n********Employee's in the Company.********");
        for (Employee employee : map.values())
        {
            System.out.println("Employee Name:\t" + employee.getEmployeeName());
            System.out.println("Employee Id:\t" + employee.getEmployeeId());
            System.out.println("E-mail:\t"+ employee.getEmployeeEmail());
        }

    }

//********************************************************************  
//********************************************************************

}

//Imports:

//********************************************************************
//Employee Class.
public class Employee
{
//Variables.
    private String employeeName;
    private int employeeId;
    private String employeeEmail;
//********************************************************************  
//Constructor.
    public Employee(String employeeName, int employeeId, String employeeEmail) 
    {
        this.employeeName = employeeName;
        this.employeeId = employeeId;
        this.employeeEmail = employeeEmail;
    }
//********************************************************************
//Getters.
    public String getEmployeeEmail() {
        return employeeEmail;
    }
    public void setEmployeeEmail(String employeeEmail) {
        this.employeeEmail = employeeEmail;
    }
    public String getEmployeeName() {
        return employeeName;
    }
    public int getEmployeeId() {
        return employeeId;
    }
//********************************************************************
//toString method.
    public String toString() {
        return "Employee [employeeName=" + employeeName + ", employeeId="
                + employeeId + ", employeeEmail=" + employeeEmail + "]";
    }
//********************************************************************

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T16:52:58.223

因为这是作业，我只会指导你。

你有两个选择：

**首先**是创建额外的地图，映射`id`-`Employee`和`email`- `Employee`，然后在添加新员工时填写所有三个地图。获取员工需要在其中一张地图上使用[Map.get(key)](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#get%28java.lang.Object%29)方法。

**其次**，似乎更适合您的需要，**选项**是从地图中检索所有值 - 使用[Map.values()](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#values%28%29)，迭代它们（使用[foreach](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)），并检查给定员工`id`是否`email`是您正在寻找的人 - 使用`object.equals(object2)`方法。

最后一件事 - 尝试编写[干净的代码](http://www.ibm.com/developerworks/rational/library/nov06/pollice/index.html)，因此命名要准确 - 代替：

```
public void add(Employee obj)
{
    map.put(obj.getEmployeeName(), obj);
} 
```

尝试以下：

```
public void add(Employee employee)
{
    map.put(employee.getEmployeeName(), employee);
} 
```

它**确实**有所作为，相信我:)

**编辑：**

回到*命名建议*-当您将类命名`Employee`为带有单词的多余名称方法时`Employee`-就像您对`employee.getEmployeeName()`.

很明显，您想获得员工的姓名，而不是他的狗，也不是沙发: )（获得名为*name*`employee.getName()`的字段的值- 而不是*myName*或*employeeName*）是您应该拥有的最简单和最好的主意:)

# iphone - 无法将操作发布到 Facebook 活动

> ID：11223634
> 
> 赞同：0
> 
> 时间：2012-06-27T09:58:33.103
> 
> 标签：iphone, ios, facebook-graph-api, facebook-ios-sdk

我让我的服务器端代码使用我创建的 Facebook 应用程序用户在 Facebook 上创建一个事件。

然后，我希望我的应用程序的移动用户使用 FB 连接登录到我的应用程序，以便能够在该墙上发布操作。我尝试使用代码、curl 或图形资源管理器进行操作，但似乎没有任何效果。我怀疑唯一的选择是使用创建事件的用户发布操作。

当我发布到这样的链接时：

```
https://graph.facebook.com/EVENT_ID/APP_NAMESPACE:ACTION 
```

将对象也作为参数，我得到以下错误：

```
Requires a valid user is specified (either via the session or via the API parameter for specify 
```

当我发布这样的链接时： [https ://graph.facebook.com/EVENT_ID/feed/APP_NAMESPACE:ACTION](https://graph.facebook.com/EVENT_ID/feed/APP_NAMESPACE:ACTION)

我收到一个错误：

```
Unknown path components: /APP_NAMESPACE:ACTION 
```

有什么方法可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:06:17.963

错误消息告诉您事件的`/feed`连接没有`/APP_NAMESPACE:ACTION`类型的连接。此错误消息是正确的。

将操作发布到页面、事件、组或作为页面、事件、组发布是不可能的，也不可能将操作发布到朋友的时间轴 - 只有用户可以发布操作，并且只能发布到他们自己的时间轴。

请参阅文档的[Open Graph Mechanics](https://developers.facebook.com/docs/opengraph/keyconcepts/#mechanics)部分，它显示**用户**对**对象**执行**操作**。您正在尝试做的是让用户采取行动，然后将其发布到事件墙上 - 这是不支持的

# r - 在 r 中绘制 gam 模型的正确值

> ID：11223635
> 
> 赞同：0
> 
> 时间：2012-06-27T09:58:38.003
> 
> 标签：r, gam

我有以下示例（与我的数据格式相似）：

```
set.seed(1)
RandData <- runif(8760*2)
Locations <- rep(c('UK','France'),each=8760)

Date = seq(from=as.POSIXct("1991-01-01 00:00"), 
           to=as.POSIXct("1991-12-31 23:00"), length=8760)

Final <- data.frame(Loc = Locations,
                    Doy = as.numeric(format(Date,format = "%j")),
                    Tod = as.numeric(format(Date,format = "%H")),
                    Temp = RandData)
require(mgcv)
mod1 <- gam(Temp ~ Loc + s(Doy) + s(Doy,by = Loc) +
  s(Tod) + s(Tod,by = Loc),data = Final)
plot(mod1,pages = 1, scale = 0) 
```

从这个模型中，绘制的结果首先显示了平均温度变化作为一年中一天的函数，然后是每个位置的温度与这个平均值的变化量。一天中的时间也是如此。

问题在于 y 轴没有显示正确的值范围，即第一个图没有显示这些位置的平均温度。如何更改绘图以显示 (1) 两个位置的平均温度和 (2) 每个位置的温度与平均值相比，而不是某个任意数字。

如果我没有明确表达我的意图，请告诉我，我会尽力提供一个更好的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:48:21.857

gam 模型的图显示了平滑器本身的效果。如果您想要模型的几个部分的组合效果，则为每个值创建一个包含相关值的 data.frame，使用 predict(model, newdata) 计算这些值的预测并创建您想要的图。

```
dataset <- expand.grid(Loc = unique(Final$Loc), 
    Doy = pretty(Final$Doy), Tod = pretty(Final$Tod))
dataset$Temp <- predict(mod1, newdata = dataset)
library(ggplot2)
ggplot(dataset, aes(x = Doy, y = Temp, linetype = Loc)) + geom_line() + 
    facet_wrap(~Tod) 
```

# symfony - 我不能运行 sahi

> ID：11223637
> 
> 赞同：0
> 
> 时间：2012-06-27T09:58:38.650
> 
> 标签：symfony, behat, sahi, mink

> **可能重复：**
> [sahi 和 symfony2](https://stackoverflow.com/questions/11222722/sahi-and-symfony2)

我想用 symfony2 测试 behat、mink 和 sahi。

在我的文件 config_test.yml 我有

```
mink:
    base_url:  http://localhost/Symfony_Standard_2.0.15_2/symfony/web/app_test.php    
    default_session: symfony
    sahi: ~ 
```

在我的 test.feature 当我使用

```
Scenario: Open page with products list and check it
Given I am on "/hello"
Then the response should contain "hello" 
```

结果很好：

```
1 scenario (1 passed)
2 steps (2 passed)
0m5.112s 
```

但是当我添加`@mink:sahi`我得到

```
@mink:sahi
Scenario: Open page with products list and check it #             
src\Acme\DemoBundle\Features\test.feature:6
Given I am on "/hello" # Acme\DemoBundle\Features\Context\FeatureContext::visit()
Operation timed out after 5000 milliseconds with 0 bytes received
Then the response should contain "hello" # 
Acme\DemoBundle\Features\Context\FeatureContext::assertResponseContains()

1 scenario (1 failed)
2 steps (1 skipped, 1 failed)
0m5.112s 
```

你有什么主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:18:55.237

我已经解决了这个问题，事实上，我们必须运行驱动程序，在开始测试之前，

# java - mockito + easymock - NoClassDefFoundError:net/sf/cglib/proxy/Enhancer

> ID：11223640
> 
> 赞同：6
> 
> 时间：2012-06-27T09:58:54.697
> 
> 标签：java, junit, mockito, noclassdeffounderror, powermock

我正在使用easymock + powermock编写测试，我使用powermock的原因是为了模拟一个静态方法。

我的测试类看起来像：

```
import static org.powermock.api.easymock.PowerMock.mockStatic;

import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;

import org.mockito.Mockito;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;

@RunWith(PowerMockRunner.class)
@PrepareForTest(StaticTest.class)
public class DummyTest {
    @Test
    public void testDummy() {
        mockStatic(StaticTest.class);
        Mockito.when(StaticTest.testMethod()).thenReturn("hello world");
        ........
} 
```

这是我的测试依赖项和版本：

```
 <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.powermock</groupId>
        <artifactId>powermock-module-junit4</artifactId>
        <version>1.4.12</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.powermock</groupId>
        <artifactId>powermock-api-easymock</artifactId>
        <version>1.4.12</version>
        <scope>test</scope>
    </dependency> 
```

运行测试，我得到了如下的initializationError：

```
java.lang.NoClassDefFoundError: net/sf/cglib/proxy/Enhancer
at org.powermock.api.extension.proxyframework.ProxyFrameworkImpl.isProxy(ProxyFrameworkImpl.java:29)
at org.powermock.reflect.internal.WhiteboxImpl.getUnmockedType(WhiteboxImpl.java:1783)
at org.powermock.reflect.internal.WhiteboxImpl.getType(WhiteboxImpl.java:2237)
at org.powermock.reflect.internal.WhiteboxImpl.setInternalState(WhiteboxImpl.java:327)
at org.powermock.reflect.proxyframework.RegisterProxyFramework.registerProxyFramework(RegisterProxyFramework.java:18)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.powermock.reflect.internal.WhiteboxImpl.performMethodInvocation(WhiteboxImpl.java:2014)
at org.powermock.reflect.internal.WhiteboxImpl.doInvokeMethod(WhiteboxImpl.java:885)
at org.powermock.reflect.internal.WhiteboxImpl.invokeMethod(WhiteboxImpl.java:859)
at org.powermock.reflect.Whitebox.invokeMethod(Whitebox.java:466)
at org.powermock.tests.utils.impl.AbstractTestSuiteChunkerImpl.registerProxyframework(AbstractTestSuiteChunkerImpl.java:154)
at org.powermock.tests.utils.impl.AbstractTestSuiteChunkerImpl.getPowerMockTestListenersLoadedByASpecificClassLoader(AbstractTestSuiteChunkerImpl.java:107)
at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.createDelegatorFromClassloader(JUnit4TestSuiteChunkerImpl.java:144)
at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.createDelegatorFromClassloader(JUnit4TestSuiteChunkerImpl.java:39)
at org.powermock.tests.utils.impl.AbstractTestSuiteChunkerImpl.createTestDelegators(AbstractTestSuiteChunkerImpl.java:217)
at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.<init>(JUnit4TestSuiteChunkerImpl.java:59)
at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.<init>(AbstractCommonPowerMockRunner.java:32)
at org.powermock.modules.junit4.PowerMockRunner.<init>(PowerMockRunner.java:31)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:31)
at org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:24)
at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)
at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.<init>(JUnit4TestReference.java:33)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestClassReference.<init>(JUnit4TestClassReference.java:25)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:48)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

Caused by: java.lang.ClassNotFoundException: net.sf.cglib.proxy.Enhancer
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at org.powermock.core.classloader.MockClassLoader.loadModifiedClass(MockClassLoader.java:143)
at org.powermock.core.classloader.DeferSupportingClassLoader.loadClass(DeferSupportingClassLoader.java:67)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 39 more 
```

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:09:11.863

您的类路径中需要[cglib](http://cglib.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-18T12:06:32.053

在 maven 中添加 cglib 依赖项解决了我 @Premraj 提到的 powermock 1.5.5 的初始化错误问题。对于 1.4.12 Powermock 可能版本 2.2.2 的 cglib 应该这样做。

```
<dependency>
     <groupId>cglib</groupId>
     <artifactId>cglib</artifactId>
     <version>3.1</version>
     <scope>test</scope>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-26T12:19:54.457

对我来说，添加 cglib 依赖项不起作用。我使用以下方法解决了问题：

```
<!--
    We depend on the EasyMock API but exclude the EasyMock dependency. The reason
    is that PowerMock Whitebox needs a "org.powermock.reflect.spi.ProxyFramework"
    implementation in order to work correctly. This implementation is provided by
    the extension API:s. Since JMock uses CGLib it can reuse the
    "org.powermock.api.extension.proxyframework.ProxyFrameworkImpl" in the
    PowerMock EasyMock API. An alternative to depend on this class would be to simply copy
    the class it into your code (remember that the class must be named
    org.powermock.api.extension.proxyframework.ProxyFrameworkImpl).
-->
<dependency>
    <groupId>org.powermock</groupId>
    <artifactId>powermock-api-easymock</artifactId>
    <version>${project.version}</version>
    <scope>test</scope>
    <exclusions>
        <exclusion>
            <groupId>org.easymock</groupId>
            <artifactId>easymock</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

如此[处](https://code.google.com/p/powermock/source/browse/trunk/examples/jmock/pom.xml)所示。注意我没有使用easymock（我使用mockito代替）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-09T16:13:05.310

添加以下依赖项后，我解决了同样的问题。

```
testCompile('org.powermock:powermock-api-mockito2:2.0.0-beta.5')
testCompile('org.powermock:powermock-module-junit4:2.0.0-beta.5') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-21T09:42:38.020

我尝试了多个选项，最后以下依赖项对我有用。应该使用更高版本的 PowerMock 和 Mockito 在 Spring Boot 应用程序中工作。

下面是maven依赖：

spring-boot：2.0.1.RELEASE（包含junit：默认4.12版本）

` 1.8 2.0.0-beta.5

```
</properties>

    <dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-core</artifactId>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.powermock</groupId>
        <artifactId>powermock-api-mockito2</artifactId>
        <version>${powermock-version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.powermock</groupId>
        <artifactId>powermock-module-junit4</artifactId>
        <version>${powermock-version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.powermock</groupId>
        <artifactId>powermock-core</artifactId>
        <version>${powermock-version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.powermock</groupId>
        <artifactId>powermock-module-junit4-rule</artifactId>
        <version>${powermock-version}</version>
        <scope>test</scope>
    </dependency>' 
```

# c# - 如何使用 Excel-DNA 创建一个新工作表并用多行数据填充它？

> ID：11223641
> 
> 赞同：1
> 
> 时间：2012-06-27T09:58:56.460
> 
> 标签：c#, excel-dna

我的 Excel-dna 插件后面有 c# 代码，它成功地从服务下载数据。我在 Excel-dna 中创建了一个带有触发下载按钮的功能区，现在我想在新工作表中显示数据。如何创建工作表并添加行？

我尝试使用以下方法从我的 c# 代码中调用[xlcWorkbookInsert ：](https://groups.google.com/group/exceldna/browse_frm/thread/cc87114539c78f53)

```
 ExcelReference newSheet = (ExcelReference)XlCall.Excel(XlCall.xlcWorkbookInsert, 1); 
```

但我总是得到一个 ExcelDna.Integration.XlCallException 异常。这是正确的方法，还是有更简单的方法可以做到这一点？

我还尝试将`object[,]`数据粘贴到现有工作表：

```
 ExcelReference sheet1 = (ExcelReference)XlCall.Excel(XlCall.xlSheetId, "Sheet1");

   ExcelReference myTargetPasteArea = new ExcelReference(1, 1, 2, 10, sheet1.SheetId);

   myTargetPasteArea.SetValue(result); 
```

这次没有错误，但什么也没有发生（尽管我在调试时可以看到正在执行的代码）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T13:31:52.553

[您的代码通过 C API 调用 Excel（这就是Excel-DNA](http://exceldna.codeplex.com)中 XlCall.Excel(...) 和 ExcelReference的工作方式）。但是您不能直接从功能区事件处理程序调用 C API。你有两个选择：

*   通过宏绕道。如果您更改功能区 xml 代码，这很容易：

    <button onAction="RunTagMacro" tag="MyMacro" />

然后定义一个宏：

```
public static void MyMacro()
{
    // ... do your work here ....
} 
```

您也可以自己从事件处理程序中调用宏 -`RunTagMacro`内部只是调用

```
object app = ExcelDnaUtil.Application;
app.GetType().InvokeMember("Run", BindingFlags.InvokeMethod, 
    null, app, new object[] { control.Tag }, new CultureInfo(1033)); 
```

*   另一种选择是更改您的交互代码以使用 COM API。为此，您需要使用 .NET 4 中的“动态”支持，或引用互操作程序集——Office 的特定于版本的主互操作程序集，或一些与版本无关的互操作程序集，如[NetOffice](http://netoffice.codeplex.com)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-20T15:16:53.707

```
XlCall.Excel(XlCall.xlcWorkbookInsert, 1); 
```

返回一个`bool`：`true`- 成功，`false`- 失败

因此，将其转换`ExcelReference`为`exception`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-18T11:26:15.230

在 xlcWorkbookInsert 之前您可能需要一个 xlcNew。查看 Excel.cs 中 GetApplication 方法的 Excel-Dna 源代码。

# entity-framework - Entity Framework Code First 一对一的必需-必需关系

> ID：11223642
> 
> 赞同：10
> 
> 时间：2012-06-27T09:59:02.393
> 
> 标签：entity-framework

使用 Entity Framework Code First 4.3.1 时，可以创建具有 1 对 1 多重性的关系。也就是说，关系的每一端都有一个实体。

可以将 1 对 1 关系配置为**required-required**或**required-optional** ^。但是，当我在两者之间切换时，我看不出有任何区别：

*   生成的数据库模式。我的目标是 SQL Server 2008。
*   EF 的运行时行为。

因此，尽管关系被配置为**required-required** ，但我能够创建没有相应的**RequiredDependentAs记录的****RequiredPrincipalAs**记录。这似乎与**HasRequired(...)**的文档相矛盾：

 ****> 配置此实体类型的必需关系。除非指定此关系，否则实体类型的实例将无法保存到数据库中。数据库中的外键将不可为空。
> 
> [http://msdn.microsoft.com/en-us/library/gg671317](http://msdn.microsoft.com/en-us/library/gg671317)

**required-required**关系实体：

```
public class RequiredPrincipalA
{
    public int Id { get; set; }
    public virtual RequiredDependentA DependentA { get; set; }
}

public class RequiredDependentA
{
    public int Id { get; set; }
    public virtual RequiredPrincipalA PrincipalA { get; set; }
} 
```

必需的**可选**关系实体：

```
public class RequiredPrincipalB
{
    public int Id { get; set; }
    public virtual OptionalDependentB DependentB { get; set; }
}

public class OptionalDependentB
{
    public int Id { get; set; }
    public virtual RequiredPrincipalB PrincipalB { get; set; }
} 
```

DbContext 和模型配置：

```
public class AppContext : DbContext
{
    public DbSet<RequiredPrincipalA> PrincipalAs { get; set; }
    public DbSet<RequiredDependentA> DependentAs { get; set; }

    public DbSet<RequiredPrincipalB> PrincipalBs { get; set; }
    public DbSet<OptionalDependentB> DependentBs { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<RequiredPrincipalA>()
            .HasRequired(o => o.DependentA)
            .WithRequiredPrincipal(o => o.PrincipalA);

        modelBuilder.Entity<RequiredPrincipalB>()
            .HasOptional(o => o.DependentB)
            .WithRequired(o => o.PrincipalB);
    }
} 
```

测试代码：

```
Database.SetInitializer(new DropCreateDatabaseAlways<AppContext>());

using (var ctx = new AppContext())
{
    ctx.Database.Initialize(force: false);

    ctx.PrincipalAs.Add(new RequiredPrincipalA());
    ctx.PrincipalBs.Add(new RequiredPrincipalB());

    ctx.SaveChanges();
} 
```

我知道我可以将**[Required]**数据属性添加到**RequiredPrincipalA.DependentA**和**RequiredDependentA.PrincipalA**的导航属性中。这将导致 EF 验证阻止上述情况。但是，我不想这样做，因为它还会在更新现有实体时验证导航属性是否已填充。这意味着应用程序必须为每次更新预取关系另一端的实体。

为什么仅在更改**required-required**和**required-optional**之间的关系时，我看不到 EF 的行为有任何差异？

^*请注意，还支持 optional-optional ，但这不构成我的问题的一部分。配置可选-可选关系时，生成的数据库模式和运行时行为存在明显差异。*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T11:10:51.170

我不知道为什么在这种情况下允许 required-required 但它不能存在于数据库中，因为关系是建立在主键上的。required-required表示如果相关B不存在则无法插入A，如果相关A不存在则无法插入B => A或B都不能插入。

数据库关系始终具有主体和依赖实体 - 主体可以始终存在而没有依赖。

[只有当 A 和 B 都映射到同一个表（表拆分](https://stackoverflow.com/questions/5390172/how-to-map-table-splitting-in-ef-code-first)）时，才能在 EF 中实现真正的 required-required，因为在这种情况下，它们都是使用单个 insert 命令插入的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T21:08:07.013

不是真正的答案，但我要说的比评论更多。但你知道，我写了 900 页的书……这就是我滚动的方式。:)

奇怪的是，我希望流畅的配置与数据注释的行为方式相同，并且很困惑它没有这样做。（我已经用指向该线程的链接 ping Rowan Miller 以获得他的反馈。）我的意思是：在 SaveChanges 期间验证约束。

在数据库方面，我使用 Ladislav。在模型中，EF 使用相关实体的键定义 1:1。但是在数据库中，您不能在两个表中都有 FK，因此只有数据库中的依赖表需要它的 PK 映射到主表中现有 PK 的约束。

最后，如果您不总是处理完整的图表，我理解您不希望 EF 强制执行这种关系的原因。我认为 1:1 关系是 EF 关系映射中最令人困惑的，我总是发现自己不得不回去提醒规则以及事情应该如何工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-15T22:15:45.603

老问题。但由于 EF6 仍在使用，甚至可用于 .Net 标准*，而且*这个问题可能是一个真正的麻烦，我认为值得一提的是我在其他答案中找不到的东西。

确实，两者都`HasRequired - WithRequiredPrincipal`产生`HasOptional - WithRequired`相同的数据库模式和相同的运行时行为。也就是说，使用这两种映射都可以保存*没有*依赖实体的主体，并在以后删除依赖实体。这么多`HasRequired`。

但是有一种方法可以让 EF*在创建实体时*验证所需的关系，即简单地添加一个`[Required]`属性：

```
public class RequiredPrincipalA
{
    public int Id { get; set; }

    [Required] // <== here
    public virtual RequiredDependentA DependentA { get; set; }
}

public class RequiredDependentA
{
    public int Id { get; set; }
    public virtual RequiredPrincipalA PrincipalA { get; set; }
} 
```

如前所述，仅在创建实体时。仍然可以设置`RequiredPrincipalA.RequiredDependentA = null`并保存成功。但我认为，幸运的是，在代码中发生这种情况的可能性远低于忘记设置所需的依赖项。****

# javascript - 使用javascript创建动态表，在文本框中给定行和列

> ID：11223643
> 
> 赞同：2
> 
> 时间：2012-06-27T09:59:04.333
> 
> 标签：javascript, html

我又遇到了一个问题（请配合我的愚蠢问题，我对 JavaScript 很陌生）。我正在尝试理解 JavaScript 中动态表的概念。当然我通过谷歌，但无法理解这个概念:(

我有两个文本框（tb1，tb2），分别用于输入行数和列数。因此，当我单击按钮 (b1) 时，它应该根据文本框中给定的行数和列数创建表格。这是我目前所知道的。。

```
<script type = "text/javascript">

function createTable(){
var a = document.getElementById("tb1").value;
var b = document.getElementById("tb2").value;

    if(a=="" || b==""){
        alert("Please enter some numeric value");
        }else{
        .......the creating table code goes here.....   

        }
    }

}

</script> 
```

我将在按钮 onClick="createTable()" 中调用 createTable 函数。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:11:59.023

**这是使用innerHTML**的另一个解决方案

 **```
<script type = "text/javascript">

function createTable(){

var a = document.getElementById("tb1").value;
var b = document.getElementById("tb2").value;
var resultTable = '<table>';

if(a=="" || b==""){
    alert("Please enter some numeric value");
    }else{
         for(var i=0;i<parseInt(a);i++){
              resultTable += '<tr>';
              for (var j=0;j<parseInt(b);j++)
                   resultTable +='<td><\/td>';
              }
              resultTable +='<\/tr>';

         }
    resultTable+='<\/table';
    }
    return resultTable;

}

</script> 
```

之后，只需使用 innerHTML 将结果添加到您想要的任何元素，例如，如果您有：

```
<div id='myElement'></div> 
```

然后您可以将表格添加到元素（在任何 js 函数中），如下所示：

```
var targetElement = document.getElementById('myElement');
targetElement.innerHTML = createTable(); 
```

否则，您可以删除该行：

```
return resultTable; 
```

并将表格直接添加到函数内部的元素中，如下所示：

```
var target = document.getElementById('myElement');
target.innerHTML=resultTable; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:04:10.003

这是您的功能：

```
function createTable(){
    var a = document.getElementById("tb1").value;
    var b = document.getElementById("tb2").value;

        if(a=="" || b==""){
            alert("Please enter some numeric value");
            }else{

            row=new Array();
        cell=new Array();

        row_num=parseInt(a); //edit this value to suit
        cell_num=parseInt(b); //edit this value to suit

        tab=document.createElement('table');
        tab.setAttribute('id','newtable');

        tbo=document.createElement('tbody');

        for(c=0;c<row_num;c++){
        row[c]=document.createElement('tr');

        for(k=0;k<cell_num;k++) {
        cell[k]=document.createElement('td');
        cont=document.createTextNode((c+1)*(k+1))
        cell[k].appendChild(cont);
        row[c].appendChild(cell[k]);
        }
        tbo.appendChild(row[c]);
        }
        tab.appendChild(tbo);
        document.getElementById('mytable').appendChild(tab);//'myTable' is the parent control of your table, change it as per your requirements
                }
            }

        } 
```

将此属性添加到您的按钮 b1 onclick="createTable();"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T10:37:26.803

**JS**

```
function createTable() {
    var a, b, tableElem, rowElem, colElem;

    a = document.getElementById('tb1').value;
    b = document.getElementById('tb2').value;

    if (a == "" || b == "") {
        alert("Please enter some numeric value");
    } else {
        tableElem = document.createElement('table');

        for (var i = 0; i < a; i++) {
            rowElem = document.createElement('tr');

            for (var j = 0; j < b; j++) {
                colElem = document.createElement('td');
                colElem.appendChild(document.createTextNode(j + 1)); //to print cell number
                rowElem.appendChild(colElem);
            }

            tableElem.appendChild(rowElem);
        }

        document.body.appendChild(tableElem);

    }
} 
```

**JSFiddle**
[http://jsfiddle.net/mprRb/1/](http://jsfiddle.net/mprRb/1/)**

# linq - Linq to ... 和 Lambda 表达式

> ID：11223645
> 
> 赞同：-3
> 
> 时间：2012-06-27T09:59:11.833
> 
> 标签：linq, linq-to-sql, c#-4.0, lambda, linq-to-entities

我有一个大问题一直困扰着我很长时间，而且我似乎无法在任何地方得到一个直接的答案，我相信如果有人能以权威和好的例子回答这个问题，它不仅会有所帮助我可是成千上万的开发者来了。我只想知道以下概念的特点是什么，它们之间有什么区别

**林克**

**LINQ转SQL**

**Linq 到实体**

**Linq 到对象**

**Lambda 表达式**

另外，特别是，有人能告诉我们这些结构属于上述类别吗？

**构造 1**

```
var result = from n in nums
             where n < 5
             orderby n
             select n; 
```

**构造 2**

```
Entities.Person.Where(p => p.FirstName == "John").First(); 
```

热切期待您学到的澄清。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:09:56.563

我敢肯定这里有一些过度简化，但值得：

**Linq**是为处理数据集而设计的 API。`IQueryable`，例如，来自`System.Linq`命名空间。**Linq to ...**是不同的实现，它们解析相同的 Linq 指令以根据数据的存储方式执行不同的操作。因此，**Linq to SQL**将解析您的`.Where`指令以生成带有`WHERE`子句的 sql 查询，而**Linq to Objects**将采用相同的指令并生成`foreach`.

**lambda 表达式**几乎是匿名委托的简写。您可以通过运算符识别 lambda `=>`。您的参数列表在左侧`=>`，可以访问这些参数并可选择返回结果的表达式在右侧。

您的两个代码示例是可以编写 Linq 查询的不同语法。它们分别称为查询语法和方法语法。

# c# - 在 javascript 函数中调用服务器端方法？

> ID：11223651
> 
> 赞同：1
> 
> 时间：2012-06-27T09:59:38.897
> 
> 标签：c#, jquery, asp.net, asp.net-ajax

在这里，我在单击按钮时调用了一个 javascript 函数，我需要在 javascript 函数执行完后调用服务器端方法。

**Javascript 函数**

```
 function exportCharts(exportFormat) {

            initiateExport = true;
            for (var chartRef in FusionCharts.items) {
                if (FusionCharts.items[chartRef].exportChart) {
                    document.getElementById("linkToExportedFile").innerHTML = "Exporting...";
                    FusionCharts.items[chartRef].exportChart({ "exportFormat": exportFormat });
                }
                else {

                    document.getElementById("linkToExportedFile").innerHTML = "Please wait till the chart completes rendering...";
                }
            }

        } 
```

**服务器端方法**

```
 protected void imgBTNExportPPT_Click(object sender, ImageClickEventArgs e)
        {
            try
            {
               PredictExportToPPT objOExporttoPPT = new PredictExportToPPT();
               PredictionModel();
                string reportNames = ObjCommon.GetBIReportNames("Prediction", "Report");
                reportNames += ObjCommon.GetBIReportNames("Prediction", "Table");
               objOExporttoPPT.ExportToPPTPredict(ObjPredictInputParameter, reportNames, ObjSharedEntities.PredictTableData);
                string itemname = "PPTOutput.pptx";
                HttpContext.Current.Response.Clear();
                HttpContext.Current.Response.ContentType = "pptx";
                HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment; filename=" + itemname + "");
       HttpContext.Current.Response.BinaryWrite(System.IO.File.ReadAllBytes(HttpContext.Current.Server.MapPath(DataTemplate.PPTOutputTemplateFilePath)));
                HttpContext.Current.Response.Flush();
                HttpContext.Current.Response.End();
               }
            catch (Exception exceptionMessage)
            {
                throw (exceptionMessage);
            }
            finally
            {
                GC.Collect();
            }
        } 
```

我试过这样

```
 $(document).ready(function () {
        $("#imgBTNExportPPT").click(function (e) {
            e.imgBTNExportPPT_Click();
            $.ajax({
                type: "POST",
                url: "PEventPerformance.aspx/updateContent",
                data: "{}",
                success: function (result) {
               }
            });
        });
    }); 
```

有什么建议吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:03:53.150

你`imgBTNExportPPT_Click`看起来像一个按钮的点击事件。您可以尝试以下方法从 JavaScript 引发事件

将此 javascript 放在 aspx 页面中

```
<script type="text/javascript">
    function myfunc() {
        <%= Page.ClientScript.GetPostBackEventReference(imgBTNExportPPT, String.Empty) %>;
    }
</script> 
```

针对 OnClientClick 调用此函数

```
<asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="myfunc();" /> 
```

这将触发服务器端事件：

```
protected void imgBTNExportPPT_Click(object sender, ImageClickEventArgs e)
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:12:49.740

你可以使用 Ajaxpro 来达到这个目的，如果你想生成一个服务器端调用，而不需要像按钮点击这样的任何事件。

在您的代码隐藏文件中。在 Page_Load 部分下添加

```
AjaxPro.Utility.RegisterTypeForAjax(typeof(YourCodebehindfilename)); 
```

在客户端

调用服务器端方法，如

```
var content =  YourCodeBehind.Yourmethod(optional parameters).value; 
```

在内容中，您可以将响应作为对象获取并可以进行进一步的更改

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:50:10.163

我想执行服务器端方法的最佳方法是使用 Web 服务。

您必须编写一个包含服务器端方法的 Web 服务。然后您可以使用 AJAX 调用它。

# asp.net - EF、UoW 和存储库 - 何时在 WebForms 中处理 UnitOfWork？

> ID：11223652
> 
> 赞同：5
> 
> 时间：2012-06-27T09:59:41.203
> 
> 标签：asp.net, entity-framework, repository-pattern, dispose, unit-of-work

最近我开始深入研究存储库模式和 UnitOfWork 的概念，同时探索 EntityFramework。

根据 MVC 示例制作了我自己的实现，他们在其中从 Controller 中处理 UnitOfWork，如下所示：

```
protected override void Dispose(bool disposing)
{
    unitOfWork.Dispose(); 
    base.Dispose(disposing);
} 
```

我根本不喜欢 MVC，而且在 Webforms 中也很新，但我认为它们正在覆盖 Controller 的 dispose 方法，以便将 UnitOfWork 处理为其他“一切”都已处理。

基本上，我想在我的 ASP.NET WebForms 网站中实现相同的概念，并将在页面代码后面使用的 UnitOfWork 与页面本身的处置一起处置。

我考虑在生命周期中将相同的内容添加到**Page_Unload**事件中，但我不确定这是否是正确的方法，因为我以前没有搞砸过这样的事情。我的想法如下：

```
protected void Page_Unload(object sender, EventArgs e)
{
    unitOfWork.Dispose();
    base.Dispose();
} 
```

我怎样才能安全地实现这一目标，我是否走在正确的轨道上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:51:38.860

首先：不要发明轮子。

使用**依赖注入**框架，例如：*StructureMap、Ninject、Unity 等。*

您的**UoW**应该从**Web 请求**的开始开始，并在**请求结束时****处理**。

 ***换句话说*：EF的DataContext应该在请求开始时被初始化。然后你可以将它存储在某个地方（会话，...），它可以用于该请求。**每个请求一个 DataContext 实例。**

但是如果你尝试自己做，你就错了，使用依赖注入框架会让它变得如此简单。

该框架可以处理**您的 DataContext** (UoW) 的生命周期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T11:49:25.100

你应该把你的软件分成层和组件......

UI --> 控制器 --> 服务 --> DAL

例如

UI.Submit --> Controller.SaveUserInfo --> UsersManagementService.SaveUserInfo -->

```
public void SaveUserInfo(User user)
{
    using (var uow = new Uow())
    {
        var dbUser = uow.Users.GetByKey(user.Id);
        if (dbUser == null)
        {
            // TODO:
        }

        dbUser.Name = user.Name;
        dbUser.Address = user.Address;
        // Or use a framework for injecting properties

        uow.SaveAndAcceptChanges();
    }
} 
```

您甚至可以在某些服务方法中接收查询逻辑，例如

```
public User GetUsersMatching(Func<IQueryable<User>, IQueryable<User>> query)
{
    using (var uow = new Uow())
    {
        var users = query(uow.Users).ToList();
        return users;

        // For this to work using POCOs you may need to disable proxy creation
    }
} 
```

**但是**，这会使测试变得更加复杂，并且需要服务使用者了解 LINQ to Entities 的限制和最佳实践。

我还建议不要使用纯学术型 repository-per-base-type 模式，因为通常要**有效地使用来自****同一域的**不同类型的数据，需要跨“存储库”查询和 LINQ 中的 require`join`子句，或者多个查询的结果是组合在一起并在将其作为一个干净的结果返回之前对其进行重塑。

而是将您的服务视为域特定存储库，您可以在其中获得各种类型的输出。或者换句话说，在 MVC 下和 EF 上使用 SOA。**

# objective-c - Facebook 提要对话框的问题

> ID：11223660
> 
> 赞同：0
> 
> 时间：2012-06-27T10:00:28.230
> 
> 标签：objective-c, ios, facebook

我正在尝试实现 Facebook 对话提要，但它没有显示任何内容。我已关注：

[使用最新的 FBConnect SDK 使用 iPhone 发布到用户的 Facebook 墙上](https://stackoverflow.com/questions/4486528/post-to-users-facebook-wall-with-iphone-using-latest-fbconnect-sdk/4487523#4487523)

和：

[http://developers.facebook.com/docs/reference/dialogs/feed/](http://developers.facebook.com/docs/reference/dialogs/feed/)

这是我的代码：

```
 -(void) facebookPost{

    NSString *kAppId = [[NSString alloc] initWithString:@"383032031757454"];

    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   kAppId, @"app_id",
                                   @"http://developers.facebook.com/docs/reference/dialogs/", @"link",
                                   @"http://fbrell.com/f8.jpg", @"picture",
                                   @"Facebook Dialogs", @"name",
                                   @"Reference Documentation", @"caption",
                                   @"Using Dialogs to interact with users.", @"description",
                                   nil];

    [facebook dialog:@"feed" andParams:params andDelegate:self];

} 
```

非常感谢您的帮助。

弗洛伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:04:40.493

我想你必须像下面一样设置 accessToken

```
[params setObject:facebook.accessToken forKey:@"access_token"];

[facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

# c# - 如何从泛型类型中获取命名空间？

> ID：11223664
> 
> 赞同：4
> 
> 时间：2012-06-27T10:00:44.013
> 
> 标签：c#, generics, namespaces

我有一个方法，我指定为某种类型。

例如

```
public MyLabels GetLabels<T>()
{
    // I'd like to get the namespace of the type that T represents here
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T10:03:11.643

使用 的`Namespace`属性`Type`：

```
typeof(T).Namespace 
```

[**MSDN**](http://msdn.microsoft.com/en-us/library/system.type.namespace.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-27T10:04:59.150

```
typeof(T).FullName // namespace and class name 
typeof(T).Namespace // namespace, no class name 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T10:02:01.787

您可以使用`typeof(T).FullName`.

该字符串包含类名和命名空间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T10:04:42.910

怎么样

```
typeof(T).Namespace; 
```

# email - php中的邮件发送错误

> ID：11223665
> 
> 赞同：-1
> 
> 时间：2012-06-27T10:00:44.913
> 
> 标签：email, phpmailer, php

我遇到了 PHP`mail()`函数的错误。该`mail()`功能可以成功发送邮件到 gmail、ymail、rediffmail 等，但如果是 webmail，则失败。

我还没有找到任何理由。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:06:16.093

收件人地址是否正确？也许您需要一个合格的 SMTP 服务器签名！

我在您的代码中添加了一行

```
$mailbody="Hi"; 
$cheaders = "From: <admin@mysite.com>\n"; 
$cheaders .= "MIME-Version: 1.0\n"; 
$cheaders .= "Content-type: text/html; charset=iso-8859-1";
$recipient="info@mysite2.com"; 
$subject="Test"; 

ini_set('sendmail_from', 'me@domain.com'); // Set your Sendingadress here

mail($recipient, $subject, $mailbody , $cheaders); 
```

让我知道它是否适用

# linux - Shell 脚本 - 将文件移动到文件夹中

> ID：11223671
> 
> 赞同：0
> 
> 时间：2012-06-27T10:01:04.563
> 
> 标签：linux, shell

假设一个特定的命令生成了几个文件（我不知道这些文件的名称）。我想将这些文件移动到一个新文件夹中。如何在shell脚本中做到这一点？

我不能使用：

```
#!/bin/bash
mkdir newfolder
command 
mv * newfolder 
```

因为 cwd 还包含许多其他文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:19:24.743

第一个问题是你能不能作为当前目录运行`command`以`newfolder`在它开始的正确位置生成文件：

```
mkdir newfolder
cd newfolder
command 
```

或者如果`command`不在路径中：

```
mkdir newfolder
cd newfolder
../command 
```

如果您不能这样做，那么您需要捕获前后文件的列表并进行比较。这样做的一种不优雅的方法如下：

```
# Make sure before.txt is in the before list so it isn't in the list of new files
touch before.txt

# Capture the files before the command
ls -1 > before.txt

# Run the command
command

# Capture the list of files after
ls -1 > after.txt

# Use diff to compare the lists, only printing new entries
NEWFILES=`diff --old-line-format="" --unchanged-line-format="" --new-line-format="%l " before.txt after.txt`

# Remove our temporary files
rm before.txt after.txt

# Move the files to the new folder
mkdir newfolder
mv $NEWFILES newfolder 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:05:03.213

如果您想将它们移动到子文件夹中：

```
mv `find . -type f -maxdepth 1` newfolder 
```

设置 a`-maxdepth 1`只会查找当前目录中的文件，不会递归。传入`-type f`意味着“查找所有文件”（“d”分别表示“查找所有目录”）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T10:07:00.663

使用模式匹配：

```
 $ ls *.jpg         # List all JPEG files
  $ ls ?.jpg         # List JPEG files with 1 char names (eg a.jpg, 1.jpg)
  $ rm [A-Z]*.jpg    # Remove JPEG files that start with a capital letter 
```

示例无耻地取自[此处](http://www.linuxjournal.com/content/bash-extended-globbing)，您可以在其中找到更多有用的信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T10:37:52.813

假设您的命令打印出每行一个名称，则此脚本将起作用。

```
my_command | xargs -I {} mv -t "$dest_dir" {} 
```

# java - 在 liferay portlet 中实现编辑

> ID：11223673
> 
> 赞同：1
> 
> 时间：2012-06-27T10:01:09.960
> 
> 标签：java, jsp, liferay, portlet

我正在开发一个liferay portlet。这是我在jsp文件中的代码：

```
<table class="DDGridView">
<tr class="td">
    <td class="th">Complex Name</td>
    <td class="th">City</td>
    <td class="th">Status</td>
</tr>
<%
    Complex complex;
    for(int i = 0 ; i < complexList.size(); i++)
    {
        complex = (Complex)complexList.get(i);
%>
        <tr class="td">
            <td><%=complex.complexName %></td>
            <td><%=complex.complexCity %></td>
            <%
                if(complex.isActive == 1)
                {
            %>              
                    <td class="th">Active</td>
            <%
                }
                else
                {
            %>
                    <td>Not Active</td>
            <%
                }
            %>
            <td><a href="<%=prepareEditComplexURL%>">Edit</a></td>
            <td><a>Delete</a></td>
        </tr>
<%
    }
%>  
</table> 
```

当用户单击编辑 url 时，我想将选定的行项发送到 portlet 类。但我不知道该怎么做。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T06:07:07.450

根据您的评论，您似乎需要帮助构建 URL。

`for`因此，您可以在循环内构造 URL，例如：

如果您想使用这些详细信息来执行一些数据库操作，例如`update`或`insert`

```
<portlet:actionURL var="preparedEditComplexURL">
    <portlet:param name="complexName" value="<%=complex.complexName %>" />
    <portlet:param name="complexCity " value="<%=complex.complexCity %>" />
    <portlet:param name="status " value="<%=complex.isActive %>" />
</portlet:actionURL> 
```

或者，如果您想根据这些字段呈现（或显示）某些页面，则使用 Render URL，如下所示：

```
<portlet:renderURL var="preparedEditComplexURL">
    <portlet:param name="complexName" value="<%=complex.complexName %>" />
    <portlet:param name="complexCity " value="<%=complex.complexCity %>" />
    <portlet:param name="status " value="<%=complex.isActive %>" />
</portlet:renderURL> 
```

如果您可以参考一些关于 portletURL 以及如何使用它们的概念，这也会有所帮助。有很好的教程可供使用，这也是`Portlets in Action`一本关于几乎所有 portlet 开发概念的好书。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T21:34:58.657

Prakash K 的回答真的很好！只需添加一件有用的东西。当您创建一个 portlet 操作 url 时，您可以像这样指定一个名称属性

```
<portlet:actionURL name="preparedEditComplex" var="preparedEditComplexURL">
    <portlet:param name="complexName" value="<%=complex.complexName %>" />
    <portlet:param name="complexCity " value="<%=complex.complexCity %>" />
    <portlet:param name="status " value="<%=complex.isActive %>" />
</portlet:actionURL> 
```

因此，在您的 portlet 类中，您可以像这样调用您的方法：

# Liferay 6.x

```
public preparedEditComplex(ActionRequest actionRequest, ActionResponse actionResponse) {
    //Your implementation
    ...
} 
```

# 生命射线 5.2

```
@ProcessAction(name="preparedEditComplex")
public preparedEditComplex(ActionRequest actionRequest, ActionResponse actionResponse) {
    //Your implementation
    ...
} 
```

通过这种方式，您可以编写更清晰、更易读的代码。:)

干杯

# c++ - 在QString中连接stl string+int+int+int

> ID：11223674
> 
> 赞同：0
> 
> 时间：2012-06-27T10:01:19.393
> 
> 标签：c++, qt, qstring

> **可能重复：**
> [用一个整数连接两个 QString](https://stackoverflow.com/questions/7011447/concatenating-two-qstrings-with-an-integer)

我期待在 QT 中从 3 个整数和一个 c++ stl 字符串创建一个字符串，我该怎么做？有人知道吗？，找不到可以解释这个过程的东西？

这是我的代码，如果我在 lsit 中创建元素，但我想打印所有元素及其属性，而不仅仅是名称：

```
void Window::listMovies(){
ui->listMovies->clear();
vector <Movie> all = ctrl->getAllMovies();
for(int i=0; i <(int) all.size();i++){
    QListWidgetItem*item = new QListWidgetItem(
                QString::fromStdString(all[i].getName()),ui->listMovies);
    item->setData(Qt::UserRole,QVariant::fromValue(all[i].getID())); 
```

电影对象有 1 个字符串和 3 个整数变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T10:42:37.023

```
QString str = QString::fromStdString( stl_string ) + " " +
              QString::number( num1 ) + " " +
              QString::number( num2 ) + " " +
              QString::number( num1 ); 
```

有几种不同的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T10:11:14.313

使用 的`arg()`功能`QString`。这是一个真实世界的例子：

```
QString title("<b>Select Region of Interest:</b> %1.%2 - %3.%4 (%5x%6)");
title = title.arg(roi.x()).arg(roi.y()).arg(roi.right()).arg(roi.bottom())
.arg(roi.width()).arg(roi.height()); 
```

我想你明白了。[在 Qt 4.8 文档中找到它](http://qt-project.org/doc/qt-4.8/qstring.html#arg)。

# javascript - 固定背景图像水平连接到具有固定宽度的内容

> ID：11223676
> 
> 赞同：3
> 
> 时间：2012-06-27T10:01:24.220
> 
> 标签：javascript, html, css, css-position

问题是：我有一个巨大的背景图像和具有这些特征的内容：

*   内容居中`margin: auto;`且宽度固定
*   内容的位置与图像相关（就像它适合图像的中间一样）
*   此连接仅是水平的（垂直滚动会按预期移动所有内容）

实际上，这适用于位置固定在背景图像上的桌面设备。

但问题是：当我调整窗口大小直到它小于内容时，内容固定在左侧，但背景图像仍然居中，正如预期的那样。在这种情况下，两个元素之间的连接会丢失。

我有这个 JavaScript 可以解决问题，但这当然是我想避免的一些开销，因为由于计算，它在任何时候都不流畅：

```
$(window).resize(function(){
    container.css('left', (body.width() - img.width()) / 2);
}); 
```

我也尝试过这样的事情：

```
<div id="test" style="
    position: absolute;
    z-index: 0;
    top: 0;
    left: 0;
    width: 100%:
    height: 100%;
    background: transparent url(path) no-repeat fixed center top;
"></div> 
```

但这会导致上述相同的问题。

这个问题有什么优雅的 CSS 解决方案吗？

**演示**

[自己试试](http://jsfiddle.net/48EU9/)

**笔记**

图像大小是固定的并且是已知的，它永远不会被浏览器缩放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:16:55.447

Is this working for you? [http://jsfiddle.net/wPmrm/24/](http://jsfiddle.net/wPmrm/24/)

**HTML**

```
<div class="background">
<div class="content">
    CONTENT
    <br><br>
    This example works fine until you the viewport size gets smaller than this content. After that the image isn't sticky anymore.
    <br><br>
    And check out vertical scrolling.

    <div style="height:1500px;"></div>
    END
</div>
</div> 
```

**CSS**

```
div.background {
    min-width: 740px;
    background: url('http://placehold.it/1600x1050') top center fixed no-repeat;
}

div.content {
    width: 700px;
    height: 2000px;
    margin: auto;
    padding: 50px 20px;
    background: none;
    opacity: 0.7;
    color: #333;
} 
```

.background should be the wrapper for .content with a centered background and have a minimum-width of the .contents width+padding.

Update from comments:

[http://jsfiddle.net/wPmrm/28/](http://jsfiddle.net/wPmrm/28/)

We'll have to use a media-query, so when the width is at max 740px we change the background position. Oh and we set background-attachment to fixed again.

**CSS added**

```
@media screen and (max-width:740px) {
    div.background {
        background-position: -435px 0;
    }
} 
```

I don't see why it is -435px ((1600-740)/2 would be 430) but it seems to be the most accurate value.

# php - PHP mySQL 搜索跨 2 个字段的连接信息

> ID：11223678
> 
> 赞同：0
> 
> 时间：2012-06-27T10:01:24.930
> 
> 标签：php, mysql, concat

我有一个正常运行的 mySQL 搜索系统。

```
mysql_query("SELECT * FROM electors WHERE constituency = '$constituency' AND ward = '$ward' AND (surname LIKE '$q' OR first_name LIKE '$q') LIMIT 18"); 
```

我还想搜索输入的术语（包括空格）是否是`first_name ' ' surname.`如何完成的串联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:06:43.273

我认为您将需要[CONCAT](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)：

```
mysql_query("SELECT * FROM electors WHERE constituency = '$constituency' AND ward = '$ward' AND (surname LIKE '$q' OR first_name LIKE '$q' OR CONCAT(first_name,' ',surname) LIKE '$q') LIMIT 18"); 
```

您不妨减少到：

```
mysql_query("SELECT * FROM electors WHERE constituency = '$constituency' AND ward = '$ward' AND CONCAT(first_name,' ',surname) LIKE '%$q%' LIMIT 18"); 
```

考虑将其设为一个 full_name 字段，然后您可以出于速度原因对其进行索引。

# ios5 - pushViewController 在 iOS 5 上无法启动 GTMOAuth2ViewControllerTouch

> ID：11223682
> 
> 赞同：3
> 
> 时间：2012-06-27T10:01:39.063
> 
> 标签：ios5, oauth-2.0, single-sign-on

我正在使用 sdk 5 和情节提要开发一个 iPad 应用程序。我正在关注 [OAuth2] 教程和示例。[1](https://developers.google.com/accounts/docs/OAuth2)

我已将代码移植到 Singleton。每次调用 initSesion 时创建一个新视图：

```
 viewController = [[GTMOAuth2ViewControllerTouch alloc] initWithScope:scope
                                                             clientID:kMyClientID
                                                         clientSecret:kMyClientSecret
                                                     keychainItemName:kKeychainItemName
                                                             delegate:self
                                                     finishedSelector:@selector(viewController:finishedWithAuth:error:)];

//viewController.keychainItemAccessibility = kSecAttrAccessibleAlways;

NSDictionary *params = [NSDictionary dictionaryWithObject:@"en"
                                                   forKey:@"hl"];

//viewController.signIn.additionalAuthorizationParameters = params;

NSString *html = @"<html><body bgcolor=silver><div align=center>Loading sign-in page...</div></body></html>";
viewController.initialHTMLString = html;

[[self navigationController] pushViewController:viewController
                                       animated:YES]; 
```

但是，当另一个 Viewcontroller 调用 simgleton 时，推送的视图不会显示。

理论上，导航控制器使用堆栈来显示不同的视图，因此，如果我以正确的方式，该函数必须启动 GTMOAuth2ViewControllerTouch.view，以使用 OAuth2 登录，这在示例中发生。但什么也没有发生。

这是怎么回事？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:50:46.827

检查您是否有导航控制器，它可能为零。使用调试模式或放置一个 NSLog：

```
 if(![self navigationController]){   NSLog(@"I´m Nil"); } else { ... } 
```

如果您还没有创建 navigationController，请尝试使用应用程序的单例来获取它，例如：

```
[[[[[UIApplication sharedApplication] delegate] window] rootViewController] presentModalViewController:viewController animated:YES]; 
```

# php - 选择具有特定日期格式的 Where 子句？

> ID：11223690
> 
> 赞同：3
> 
> 时间：2012-06-27T10:02:15.523
> 
> 标签：php, mysql

我的表有这样的数据结构

```
 cate_id  task_id   date_start              date_end                other
         34     14   2012-06-27 10:21:39    2012-06-27 10:21:42     Volume
         34     14   2012-06-27 10:21:42    2016-01-01 00:00:00     Volume

UPDATE tbl SET other ='new'
WHERE task_id =14 
AND cate_id=34
AND DATE_FORMAT('date_start','%Y-%m-%d')='2012-06-27' 
AND DATE_FORMAT('date_end','%Y-%m-%d')='2016-01-01'; 
```

我的目标只是将日期与格式 '%Y-%m-%d' 进行比较，而不是整个值。

可以像上面的mysql Script那样做吗？因为它成功执行了sql脚本，但没有更新我特定的col？任何人都可以告诉我吗？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T10:07:37.487

哼...

`date_start`尝试删除和周围的引号`date_end`：

```
AND DATE_FORMAT(date_start,'%Y-%m-%d')='2012-06-27' 
AND DATE_FORMAT(date_end,'%Y-%m-%d')='2016-01-01'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:06:30.070

尝试使用`date(date_start)`and`date(date_end)`而不是`date format`

```
UPDATE tbl SET other ='new'
WHERE task_id =14 
AND cate_id=34
AND date(date_start)='2012-06-27' 
AND date(date_end)='2016-01-01'; 
```

仅供参考：[function_date](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date)

# c# - 动态更新网页参考

> ID：11223697
> 
> 赞同：3
> 
> 时间：2012-06-27T10:02:41.163
> 
> 标签：c#, asp.net, wpf, web-services

我开发了一个 .net 网络服务，它在我的机器 IIS 中运行，地址为 -

```
http://localhost/backEnd/service1.asmx 
```

其中 'backEnd' 是 Web 服务的名称。

我还有一个 WPF 桌面应用程序，该应用程序具有该 Web 服务地址作为其参考。

在不重新编译代码的情况下，有没有办法可以将其部署到不使用“localhost”的客户端服务器上？

喜欢动态更新服务引用的方法吗？

# sql - Complex SQL query or complex processing in controller?

> ID：11223706
> 
> 赞同：0
> 
> 时间：2012-06-27T10:03:13.673
> 
> 标签：sql, ruby-on-rails, database

I am using Rails 3, and building an app in which a user can put objects to be rented. For each object, he can decide:

*   the object can be rented by the entire world (potentially) or not (object access is restricted)
*   the object can only be rented by my friends (in the app, via a `has_many friends, :through => friendship` association)
*   the object can be rented by members of the following groups (then the user selects either all the groups he belongs to, or a subset of these)

My question is how to display the list of objects a current_user can see ? I see two options, and I would like to know which is the best one or if they are equivalent:

1) In the object controller, build the collection of the objects a user can see (@`objects = Object.can_see(current_user)`) and then pass this to the index view and display the whole list

2) In the controller, collect ALL objects `(@objects = Object.all`), pass this to the index view, and in the view, for each object, conduct a serie of test to determine if the object should be displayed or not.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:31:17.767

In the end, it is really up to you to decide based on where you see the project headed. You really have three options though:

1.  Handle the entire query via SQL statements.
2.  Handle some of the initial filtering via SQL statements, then filter the returned data.
3.  Return all of the data via SQL statements, and filter the returned data.

Keep in mind that SQL db's are *built* for performing fast data access. I would be very surprised if your solution didn't have any initial filtering, unless you were returning very small data sets to filter. In the end, it comes down to how complex your logic is (can it be expressed in SQL and still understood?), how performant each option would be, and how scalable the solution would be.

There are also a number of good ORM's out there that can help blur the line between your business logic and data access. Many of them will dynamically create the complex SQL based on your code, so there isn't as much of a concern about how ugly it'll be.

# .net - GridView 行样式

> ID：11223707
> 
> 赞同：2
> 
> 时间：2012-06-27T10:03:18.703
> 
> 标签：.net, wpf, styles, radgrid

我想用`RadGridView` **粗体**做一些行；我已经设置

```
<telerik:RadGridView.RowStyle>
   <Style TargetType="telerik:GridViewRow">
      <Setter Property="FontWeight" Value="{Binding RowFontWeight}" />
   </Style>
</telerik:RadGridView.RowStyle> 
```

在`ItemsSource`对象中我设置了`RowFontWeight`值，但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:34:26.010

我认为您`RowFontWeight`在数据网格行中无法访问`DataContext`；我过去使用过这种风格，对我来说效果很好；

我附上了一个telerik示例，我通过`RowFontWeight`在模型类（`Club.cs`和`Player.cs`）中添加一个属性并将您的样式添加到数据网格中来修改了这个示例；它工作正常，父网格行变粗，而在子网格中它们变亮。

![在此处输入图像描述](../Images/acb2272aea3c977eaeb30fb48a090945.png)

[下载样本](http://sdrv.ms/NMAPeT)

# asp.net - asp.net url重写

> ID：11223709
> 
> 赞同：1
> 
> 时间：2012-06-27T10:03:35.123
> 
> 标签：asp.net, url-rewriting

```
<rule name="test" stopProcessing="true">
                    <match url="\Test1.aspx$" />
                    <conditions logicalGrouping="MatchAll">
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                    </conditions>
                    <action type="Rewrite" url="Test1" appendQueryString="true" />
                </rule> 
```

我正在使用上面的 url 重写配置来重写其中一个页面。我在浏览器中收到以下错误。谁能告诉我我做错了什么？

表达式“\Test1.aspx$”包含无效的转义序列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:19:53.807

试试这个：

```
<match url="^/Test1\.aspx$" /> 
```

# iphone - 如何删除以编程方式添加的自定义视图？

> ID：11223715
> 
> 赞同：0
> 
> 时间：2012-06-27T10:03:46.910
> 
> 标签：iphone, objective-c, ios

在其中一个 iPad 应用程序中，我正在向视图添加自定义视图。这工作正常，但现在我想删除所有添加的自定义视图。我怎么做？

以下是我添加自定义视图的代码

```
for (int col=0; col<colsInRow; col++) {
    //  NSLog(@"Column Number is%d",col);
    x=gapMargin+col*width+gapH*col;

    //self.styleButton=[[UIButton alloc] initWithFrame:CGRectMake(x, y, width, height)];
    ComponentCustomView *componentCustomobject=[[ComponentCustomView alloc] initWithFrame:CGRectMake(x, y, width, height)];
    componentCustomobject.backgroundColor=[UIColor redColor];
    componentCustomobject.componentLabel.text=[appDelegate.componentsArray objectAtIndex:row];
    [self.formConatinerView addSubview:componentCustomobject];
    tempCount1++;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T10:05:27.660

您可以从父视图中删除所有类型为 ComponentCustomView 的子视图

```
for (UIView *view in self.formConatinerView.subviews) {
    if ([view isKindOfClass:[ComponentCustomView class]) {
        [view removeFromSuperview];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:14:17.953

```
NSArray  *arr = [self.view subViews];

for (UIView *view in arr) {
    if ([view isKindOfClass:[ComponentCustomView class]) {
        [view removeFromSuperview];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:21:16.027

我不确定从正在迭代的数组中删除对象（在这种情况下`subviews`）是否安全（我记得读过一些关于 Mac OS X 和 iOS 之间差异的文章，但不确定......）；除非 property`subviews`返回内部数组的副本（很可能因为内部数组需要是可变的），否则 100% 安全、以防万一的方法是：

```
NSArray* copyOfSubviews = [[NSMutableArray alloc] initWithArray:[myView subviews]];
// Explicitly made mutable in an attempt to prevent Cocoa from returning 
//  the same array, instead of making a copy. Another, tedious option would 
//  be to create an empty mutable array and add the elements in subviews one by one.

for(UIView* view in copyOfSubviews){
    if ([view isKindOfClass:[ComponentCustomView class]){
        [view removeFromSuperview];
    }
}

// (This is for non-ARC only:)
[copyOfSubviews release]; 
```

# grails - grails spring 社交推特插件

> ID：11223718
> 
> 赞同：1
> 
> 时间：2012-06-27T10:03:57.230
> 
> 标签：grails, twitter, spring-social

我在我的应用程序中使用 spring social 来处理与 twitter 的集成。如果我登录了我的应用程序，一切正常，但如果我没有登录，每次我尝试用 twitter 做任何事情时，我都会收到“授权撤销”异常。

# r - 如何根据另一个数据框中的条件从数据框中删除

> ID：11223726
> 
> 赞同：1
> 
> 时间：2012-06-27T10:04:29.617
> 
> 标签：r

我目前正在使用 2 个数据帧，一个称为 Data，另一个称为 DataOutput。数据有超过 40 万个 21 个变量的观测值，而 DataOutput 只有 4 个 21 个变量的观测值。DataOutput 是一个数据框，它包含不同的总和，包括多少 NA 和 OOR(OutofRange) 以及 #Measurements 和 Ratio((NA+OOR)/#Measurements)。Data 数据框目前包含许多仅包含 NA 的列，因为那里根本没有对这些变量进行测量。

我想摆脱其中只有 NA 的列。

```
for(z in 2:22)
{

if(DataOutput[4,z] == 1) //This is the ratio ((NA+OOR)/#Measurements) == 1
{
    Data <- subset(Data, select = -Data[,z] )
}
} 
```

我试图这样做，但它不起作用。我不能简单地对需要删除的列进行硬编码，例如 select = - c(a,b) 或其他内容，因为代码必须处理许多不同大小的数据帧。它们都有完全不可用的不同列。

有任何想法吗？非常感谢您的帮助！

```
> dput(head(Data))
structure(list(StartTime = structure(c(1169218200, 1169218800, 
1169219400, 1169220000, 1169220600, 1169221200), class = c("POSIXct", 
"POSIXt"), tzone = ""), Latitude = c(15.6383658333333, 15.648397, 
15.6581663333333, 15.6680338333333, 15.6778031666667, 15.6876706666667
), Longitude = c(15.8445643333333, 15.8549853333333, 15.8651343333333, 
15.8753853333333, 15.8855343333333, 15.8957853333333), GPSSpeed = c(NA, 
NA, 315, 315, 315, 315), LogSpeed = c(NA, NA, 696.091532743333, 
697.291378813333, 698.491512383334, 699.691533736667), WindSpeedRel = c(NA, 
NA, 1.03611152968314, 1.00016348803882, 1.06045149695061, 0.995509934806929
), WindDirRel = c(NA, NA, 1.38425886694239, 1.29982376776468, 
1.37160349066357, 1.33137136705896), Course = c(NA, NA, NA, NA, 
NA, NA), SeaDepth = c(NA, NA, NA, NA, NA, NA), DraftFWD = c(NA, 
NA, NA, NA, NA, NA), DraftAFT = c(NA, NA, NA, NA, NA, NA), Rudder = c(NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_), PropellerKW = c(NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_), MEConsumption = c(NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_), MERPM = c(NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_), MELoad = c(NA, 
NA, NA, NA, NA, NA), DGConsumption = c(NA, NA, NA, NA, NA, NA
), DG1_Load = c(NA, NA, NA, NA, NA, NA), DG2_Load = c(NA, NA, 
NA, NA, NA, NA), DG3_Load = c(NA, NA, NA, NA, NA, NA), DG4_Load = c(NA, 
NA, NA, NA, NA, NA), DG5_Load = c(NA, NA, NA, NA, NA, NA)), .Names = c("StartTime", 
"Latitude", "Longitude", "GPSSpeed", "LogSpeed", "WindSpeedRel", 
"WindDirRel", "Course", "SeaDepth", "DraftFWD", "DraftAFT", "Rudder", 
"PropellerKW", "MEConsumption", "MERPM", "MELoad", "DGConsumption", 
"DG1_Load", "DG2_Load", "DG3_Load", "DG4_Load", "DG5_Load"), row.names = c(NA, 
 6L), class = "data.frame") 
```

和

```
 > dput(head(DataOutput))
 structure(list(Type = structure(c(1L, 3L, 2L, 4L), .Label = c("#Measurements", 
 "NA", "OOR", "Ratio((NA+OOR)/#M"), class = "factor"), Latitude = c(67879, 
 0, 19829, 0.292122747830699), Longitude = c(67879, 0, 19829, 
 0.292122747830699), GPSSpeed = c(67879, 7, 19904, 0.293330779769885
 ), LogSpeed = c(67879, 18235, 49621, 0.999661161773155), WindSpeedRel = c(67879, 
 392, 38297, 0.569970093843457), WindDirRel = c(67879, 0, 38297, 
 0.564195111890275), Course = c(67879, 0, 67879, 1), SeaDepth = c(67879, 
 0, 67879, 1), DraftFWD = c(67879, 0, 67879, 1), DraftAFT = c(67879, 
 0, 67879, 1), Rudder = c(67879, 46675, 21204, 1), PropellerKW = c(67879, 
 5857, 21332, 0.400550980421043), MEConsumption = c(67879, 10, 
 21185, 0.312246792085918), MERPM = c(67879, 5105, 22030, 0.399755447192799
 ), MELoad = c(67879, 0, 67879, 1), DGConsumption = c(67879, 0, 
 67879, 1), DG1_Load = c(67879, 0, 67879, 1), DG2_Load = c(67879, 
 0, 67879, 1), DG3_Load = c(67879, 0, 67879, 1), DG4_Load = c(67879, 
 0, 67879, 1), DG5_Load = c(67879, 0, 67879, 1)), .Names = c("Type", 
 "Latitude", "Longitude", "GPSSpeed", "LogSpeed", "WindSpeedRel", 
 "WindDirRel", "Course", "SeaDepth", "DraftFWD", "DraftAFT", "Rudder", 
 "PropellerKW", "MEConsumption", "MERPM", "MELoad", "DGConsumption", 
 "DG1_Load", "DG2_Load", "DG3_Load", "DG4_Load", "DG5_Load"), row.names = c(NA, 
 4L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:26:49.187

我认为您可以直接在此处设置子集而无需循环：

```
Data[,DataOutput[4,]!=1] 
```

如果您没有`DataOutput`并且想要摆脱专门用 NA 填充的列，您可以执行以下操作：

```
Data[,colSums(is.na(Data))!=nrow(Data)] 
```

# flickr - Flickr 照片按组和位置名称

> ID：11223729
> 
> 赞同：0
> 
> 时间：2012-06-27T10:04:44.353
> 
> 标签：flickr

我正在使用 API 方法 flickr.groups.pools.getPhotos 从我的 2 个 flickr 组中抓取照片。这没关系，但我想实际返回城镇名称而不仅仅是地理位置。有人知道获取我的图像的替代方法，包括地理位置、城镇名称和他们所在的组吗？我宁愿不要对每个图像进行多次 API 调用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T11:25:23.497

您可以通过将“geo”参数添加到**flickr.groups.pools.getPhotos**请求的**extras**参数来获取位置属性。

 **> extras （可选）要为每个返回的记录获取的额外信息的逗号分隔列表。当前支持的字段有：description、license、date_upload、date_taken、owner_name、icon_server、original_format、last_update、geo、tags、machine_tags、o_dims、views、media、path_alias、url_sq、url_t、url_s、url_q、url_m、url_n、url_z、url_c , url_l, url_o

作为回应，您将收到组中每张照片的地理纬度和经度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:08:19.867

所以看起来没有办法做到这一点。我不得不在每张图片上调用 flickr.groups.pools.getPhotos 然后调用 flickr.photos.geo.getLocation 来获取它的位置。不是最好的解决方案，但它会被缓存到数据库中以提高性能，然后每 30 分钟调用一次。**

# c# - 绑定 ObservableCollection 到组合框 wpf

> ID：11223732
> 
> 赞同：3
> 
> 时间：2012-06-27T10:04:55.963
> 
> 标签：c#, wpf, .net-4.0

我正在尝试将组合框绑定到 ObservableCollection。当显示表单时，组合框为空。与字符串类型的 ObservableCollection 相同的代码可以完美运行。我有一种感觉，我的 XPath 是错误的。欢迎任何建议：

**XAML：**

```
<ComboBox ItemsSource="{Binding ItemParameters, XPath=InnerXml/name,Mode=TwoWay}" SelectedIndex="0" Margin="2" VerticalAlignment="Top" HorizontalContentAlignment="Stretch" Grid.Row="1" Grid.Column="1" Height="24"  /> 
```

**ObservableCollection XmlNode ：**

```
public ObservableCollection<XmlNode> _itemParameters = new ObservableCollection<XmlNode>();
public ObservableCollection<XmlNode> ItemParameters
{
    get { return _itemParameters; }
    set { _itemParameters = value; }
} 
```

组合框应显示集合中每个 XmlNode 的**名称属性：**![在此处输入图像描述](../Images/75573c2e5553f4558ef733b92f904237.png)

**更新：**

我尝试以两种不同的方式使用 DisplayMemberPath，但组合框仍然不包含数据：

```
DisplayMemberPath="{Binding XPath=name}" ItemsSource="{Binding ItemParameters}"
DisplayMemberPath="{Binding XPath=InnerXml/name}" ItemsSource="{Binding ItemParameters}" 
```

**解决方案：**

这成功了，希望它对其他人也有帮助：

```
<ComboBox DisplayMemberPath="@name" ItemsSource="{Binding ItemParameters}" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:08:27.407

首先，您正在设置`Path`并且`XPath`同时，它们是相互矛盾的属性，其次您绑定，这与您要*在*`ItemsSource`项目中显示的内容无关。无论是 use还是 an为此， the都应该被绑定到.*[`DisplayMemberPath`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.displaymemberpath.aspx)[`ItemTemplate`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplate.aspx)`ItemsSource``ItemParameters`*

# tomcat - 上传和搜索大型 pdf 文件

> ID：11223739
> 
> 赞同：1
> 
> 时间：2012-06-27T10:05:18.353
> 
> 标签：tomcat, pdf, full-text-search, pdf-generation, liferay

我目前有 6 个 100mb+ PDF 文档，这些文档启用了可搜索的文本层。

但是，当文件上传时，图像在预览中显示为负数，并且文本不可见。但是，当您从该站点下载文档时，它们又可以完全搜索到了。

知道如何在 liferay 上搜索这些 PDF 的内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:45:03.340

此论坛帖子回复可能会有所帮助：http：[是否可以从 PDF 文档中搜索内容？](http://www.liferay.com/community/forums/-/message_boards/view_message/14051278#_19_message_14064180)还有这个[回复](http://www.liferay.com/community/forums/-/message_boards/view_message/14051278#_19_message_14113263)。

# ruby-on-rails - 如何在 text_field 中设置默认值？

> ID：11223742
> 
> 赞同：4
> 
> 时间：2012-06-27T10:05:27.107
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我知道这个问题已经被问了无数次，但我仍然觉得我错过了一些明显的东西。给定一个模型，其中`Address`包含一个`city`我们希望使用默认值初始化的字段，比如`Awesome City`.

到目前为止我已经尝试过：

1）视图中的默认值：

```
# @file: /app/views/addresses/_form.html.erb
<dt><%= f.label :city %></dt>
<dd><%= f.text_field :city, :value => 'Awesome city' %></dd> 
```

这有效，但感觉不对。用户也无法更改它，该值仍然是`Awesome city`.

2）覆盖`city`方法：

```
# @file: app/models/address.rb
def city
  self[:city] ||= 'Awesome city'
end 
```

该字段呈现为空，因此由于某种原因它不起作用。如果你尝试`Address.new.city`你会得到默认值。

3）在控制器中分配默认值：

```
# address doesn't have a controller, we use nested forms
# belongs_to :parent
# @file: /app/controllers/parents_controller.rb
def new
  @parent = Parent.new
  @parent.build_address 
  @parent.address.city = 'Awesome city'
end 
```

这实际上可行，但我认为它不应该在控制器中，而应该在模型中。

4）添加一个`after_initialize`调用（是的，它有效，你不必覆盖回调）：

```
# @file: app/models/address.rb
after_initialize :set_default_city
def set_default_city
   self.city = 'Awesome city'
end 
```

这也有效，但是每次实例化对象时都会调用它，这是我们不想要的。

5）JavaScript，这似乎是一个极端的措施，它应该比这更容易。

底线：添加默认值的最佳方法是什么？每次我必须给一个字段一个默认值时，我似乎都在为这样一个简单的事情而努力。还有其他我想念的选择吗？

**编辑：：**我使用 Rails 3.1.4 和 Ruby 1.8.7/1.9.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T10:32:27.823

您可以在迁移文件中定义它：

```
class CreateAddress < ActiveRecord::Migration
  def change
    create_table :addresses do |t|
      ...
      t.string :city, default: "Awesome City"
      ...

      t.timestamps
    end
  end
end 
```

其他选项是在`new`动作中定义它，在你的控制器中，这更灵活......所以，当你创建一个新的`address`时，它将以默认值开始......

```
 def new
   @address = Address.new
   @address.city ||= "Awesome City"
   ...
 end 
```

**编辑**- 在模型中定义默认值的可能解决方案：

```
before_save :set_default_city
def set_default_city
   self.city ||= 'Awesome city'
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T11:15:59.277

我的红宝石有点生锈，但有点像

```
Parent < ActiveRecord::Base
  def self.custom_parent(options)
    custom_parent = self.new
    if options.empty?
      custom_parent.update_attributes(default_options)
    else
      //Iterate over all options and assign them to custom_parent
    end

    return custom_parent
  end
end 
```

你必须创建“default_options”哈希

我认为这不会开箱即用，但我想你明白了我的想法

# google-apps - 使用 Google Drive SDK 而不使用 Chrome 商店的 Web 应用

> ID：11223745
> 
> 赞同：1
> 
> 时间：2012-06-27T10:05:31.013
> 
> 标签：google-apps, google-drive-api

我实际上正在使用 Google Drive SDK 开发一个应用程序。我不想创建列表或将我的应用注册到 Chrome 商店。无论如何，我的网络应用程序能够连接到我的个人 GDrive 帐户并上传文件，而无需 Chrome 商店干预，只需使用 Oauth 身份验证和我自己的 API 密钥。

但是如果我想在我的应用程序中使用“打开方式”功能，是否需要在 Chrome 商店中注册它，或者我可以在没有注册的情况下使用它？

“打开方式”功能允许直接使用与其文件扩展名关联的任何应用程序从 Google Drive 打开文件。例如，8reader 应用程序允许我打开 .epub 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:10:30.170

正确，目前对于“打开方式”功能，您需要在 Chrome 网上应用店中注册您的应用程序。您不再需要 Chrome 网上商店应用程序来访问 Drive API（如您所说）。我们正在寻求改进这种可用性，以便用户可以在没有 Chrome We store 的情况下安装您的应用程序。敬请关注！

# php - ajax - 如果我在 url 上发送 ajax 请求，我可以检查 php 页面是否是请求或页面已打开？

> ID：11223753
> 
> 赞同：2
> 
> 时间：2012-06-27T10:05:50.987
> 
> 标签：php, javascript, jquery, ajax

出于安全目的，我想阻止用户查看或发送任何内容到我将用于 ajax 目的的 php 页面。

那么有什么方法可以检查页面是否由于ajax请求而被调用或页面是否已打开？self=top 是否考虑 ajax 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:10:53.773

```
/* AJAX check  */
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
  /* special  for ajax here */
}
else
{
  //its a page request
} 
```

这仅在使用发送此标头的 JS 框架时才有效 :-by Bergi

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:11:21.773

不，您将需要其他安全模型。

当然，您可以[`X-Requested-With`](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Requested-With)在执行 Ajax 请求时设置自定义 http 标头（如 ）等（许多库会自动执行此操作），并将它们与正常的“查看”请求区分开来。但是一切都可能是伪造的，因此确定这一点并没有安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:10:53.617

即使您确实阻止人们不使用 ajax 请求，是什么阻止人们首先更改 ajax 请求？

在我看来，这几乎不会增加安全性，尤其是可以轻松地通过例如 firebug 来完成。

# zend-framework - 从 SocialEngine 管理控制面板创建新的 cron 作业任务计划程序

> ID：11223754
> 
> 赞同：0
> 
> 时间：2012-06-27T10:05:52.233
> 
> 标签：zend-framework, cron, scheduled-tasks, socialengine

我是社交引擎框架的新手。任何人都可以帮助我如何从社交引擎管理面板创建新的 cron 作业任务计划程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:49:46.030

您将无法从管理面板创建 cron 作业。您需要使用您的服务器进行设置。您的托管服务提供商应该能够为您提供帮助。根据您要安排的任务，可以在以下目录中找到您需要安排的作业：application/modules//Plugin/Task

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T14:47:15.233

任务脚本位于最新版本的 SocialEngine 中的 application/modules/Core/Plugin/Task 中，我们通常将它们设置为每 60 秒运行一次，脚本之间的间隔为 5 秒。

# ios - 滚动时从 UITableViewCell 中消失的元素

> ID：11223756
> 
> 赞同：1
> 
> 时间：2012-06-27T10:06:15.597
> 
> 标签：ios, uibutton, scroll, tableviewcell

我目前遇到了 UITableView 的问题，更准确地说是自定义单元格。

我有一个表格视图控制器，比如说 ControllerA，它负责显示不同的 TableViewCell。这些单元格是自定义单元格，在另一个类中定义，比如 ControllerCell。每个单元格都包含其中一个信息按钮（小，带有“i”的圆形）。这些按钮仅在有要显示的内容时显示。

在 ControllerCell 中，我定义了下一步：

```
@property (nonatomic, retain) IBOutlet UIButton *infoButton;
@property (nonatomic, retain) IBOutlet UIAlertView *alert;
@property (nonatomic, retain) IBOutlet NSString *info;
- (IBAction)infoSupButton:(id)sender; 
```

以及@synthesis，就像每个人都会这样做一样。然后我定义警报会发生什么：

```
- (IBAction)infoSupButton:(id)sender {
        alert = [[UIAlertView alloc] initWithTitle:@"Informations supplémentaires" 
                                                    message:info
                                                   delegate:self 
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];
       if (info != nil) {
      [alert show];
      }
} 
```

在“initWithStyle”部分，我做

```
[_infoButton addTarget:self action:@selector(infoSupButton:) forControlEvents:UIControlEventTouchUpInside]; 
```

那是为了宣布细胞。

现在让我们关注ControllerA。

我正在解析一个 XML 文件以获取“信息”数据，当单击“信息按钮”时应显示该数据。这不是一个真正的问题，因为我可以获取这些数据并在控制台中显示它。

解析数据后，我会在 viewDidLoad 部分填充一个 NSMutableArray：

```
tableInfoSup = [[NSMutableArray alloc] init]; 
```

然后遵循经典方法：

-numberOfSectionsInTableView：（3 个部分）-numberOfRowsInSection：（第 0 部分中的 8 行，第 1 部分中的 4 行和第 2 部分中的 4）-cellForRowAtIndexPath：

我有 3 个不同的部分，显示具有不同信息的单元格，在 cellForRowAtIndex 方法中，我这样做：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {    

static NSString *cellIdentifier = @"ExerciceTableCell";
ControllerCell *cell = (ControllerCell *)[tableView dequeueReusableCellWithIdentifier:exerciceTableIdentifier];

if (cell == nil) 
{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"ExerciceTableCell" owner:self options:nil];
    cell = [nib objectAtIndex:0];

} 

if (indexPath.section == 0) {
    [...]

    if ([[tableInfoSup objectAtIndex:indexPath.row] isEqualToString:@""]) {
        [cell.infoButton setHidden:YES];
        cell.info = nil;
    }
    else {
        cell.info = [tableInfoSup objectAtIndex:indexPath.row];
    }

}
if (indexPath.section == 1) {
    [...]

    if ([[tableInfoSup objectAtIndex:indexPath.row+8] isEqualToString:@""]) {
        [cell.infoButton setHidden:YES];
        cell.info = nil;
    }
    else {
        cell.info = [tableInfoSup objectAtIndex:indexPath.row+8]; //got the 8 rows from section 0;
    }

}
if (indexPath.section == 2) {

    [...]

    if ([[tableInfoSup objectAtIndex:indexPath.row+12] isEqualToString:@""]) {
        [cell.infoButton setHidden:YES];
        cell.info = nil;
    }
    else {
        cell.info = [tableInfoSup objectAtIndex:indexPath.row+12];  //got the 8 rows from section 0, + 4 rows from section 1
    }    
}

return cell;
} 
```

现在，问题是，当屏幕第一次显示时，一切正常：我得到了带有小“i”按钮的单元格，显示了良好的 UIAlertView，其他一些单元格不显示按钮......那是普通的。但经过几次滚动后，“i”按钮开始消失......我不知道为什么。

有人有想法吗？谢谢 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:14:48.697

在您的`tableView:cellForRowAtIndexPath:`中，当您不希望显示信息时，您会隐藏它，但对于应该显示的单元格，您没有明确取消隐藏它。

查看该方法中的前两行：您正在 - 正确 - 做的是重用单元格，因此当单元格滚动出视图时，它们会从 UITableView 中删除并放入重用队列中。然后，当单元格应该变得可见时，TableView 会从该队列中获取单元格 - 如果没有可用的单元格，则创建新的单元格。

这一切都很顺利，但过了一会儿，带有隐藏信息按钮的单元格被放入队列中。然后，一段时间后，这些单元格被重用 - 有时用于应该有可见信息的行。

有两种解决方案：您可以显式取消隐藏您希望显示的那些行的信息，或者您可以使用两种不同类型的单元格，一种具有隐藏信息，另一种具有可见信息。然后，您为每个单元格指定一个不同的标识符，并根据单元格所在的行，在出列/创建单元格之前设置标识符。

# assembly - 有符号与无符号解释

> ID：11223760
> 
> 赞同：1
> 
> 时间：2012-06-27T10:06:25.177
> 
> 标签：assembly

只是想了解有关已签名与未签名解释的信息。如果我说如果一个数字是无符号整数，它的值是通过将二进制转换为十进制来正常计算的，我对吗？但是当涉及有符号整数时，首先记下符号位（msb）然后计算二进制值使用 2 的补码；计算的值是带有符号的实际值。

我是对的还是遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:28:30.260

是的你是对的。*将以2 的补码*形式表示的有*符号整数转换为**十进制*数时，您会这样做。*2 的补码*是英特尔处理器如何存储和使用有符号整数进行数学运算。

 ***[注意：但这个答案与英特尔机器如何表示有符号整数*无关。*这是一般的。]

您用于转换为十进制的技术实际上取决于硬件使用的表示形式。

硬件设计人员可以选择将带符号的数字存储为：

1.  Sign-Magnitude（1位指定符号，其他指定幅度，无补码）
2.  1 的补码（其中 8 位`11111111`表示 a`-0`和`00000000`a `+0`）
3.  2 的补码（在通用硬件中很流行，如 Intel）
4.  ...（还有其他方法。在[维基百科文章](http://en.wikipedia.org/wiki/Signed_number_representations)中阅读更多内容）

我们人类在阅读我们喜欢的十进制形式时需要使用相应的“转换”。

例如，如果您正在设计主要进行乘法运算的硬件，则以符号大小形式存储有符号整数会很有意义。您只需将符号和大小分别相乘。另一方面，2 的补数[乘起来有点笨拙，但并不多](http://en.wikipedia.org/wiki/Two%27s_complement#Multiplication)。

当然，2 的补码是大多数硬件（当今几乎所有通用 CPU）存储有符号数的方式。这使得添加小菜一碟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:28:31.957

您所描述的是将带符号的二进制整数转换为具有十进制数字的人类可读字符串的最典型方法。

然而，这不是唯一的方法。您可以先将 2 的补码负 3 位值 111 转换为“7”，然后从中减去“8”并得到“-1”。***

# ravendb - 从 Ravendb 查询中获取 ID

> ID：11223762
> 
> 赞同：4
> 
> 时间：2012-06-27T10:06:31.623
> 
> 标签：ravendb

我正在使用 clientAPI 来查询 RavenDB 中的索引（卡片），所以：

```
Dim cards = Raven.CurrentSession.Query(Of Cards)("Cards").ToArray() 
```

这很好用并返回所有文档，但我怎样才能获得它返回的文档的 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T19:44:28.510

爱斯坦，

对于每张退回的卡片，您都可以

Raven.CurrentSession.Advanced.GetDocumentId(card)

# php - Php：DateTime：如何只设置秒（不是小时也不是分钟）

> ID：11223763
> 
> 赞同：19
> 
> 时间：2012-06-27T10:06:33.627
> 
> 标签：php, datetime

我有一个代码，我必须“四舍五入”到最低分钟。

*   `16:05:00`应该成为`16:05:00`
*   `16:05:01`应该成为`16:05:00`
*   `16:05:29`应该成为`16:05:00`
*   `16:05:30`应该成为`16:05:00`
*   `16:05:31`应该成为`16:05:00`
*   `16:05:59`应该成为`16:05:00`

我想使用 DateTime 对象。没有以下功能：

*   `setHours()`
*   `setMinutes()`
*   `setSeconds()`

这是我的代码的开头：

```
$my_date=DateTime::createFromFormat(
    'Y-m-d H:i:s',
    $bd_date
);  
$my_date->setTimezone(self::$TimeZone); 
```

现在我想将“秒”部分设置为零。

您是否有一种优雅的方式来按照我想要的方式设置分钟？

注意：我不是在寻找诸如“将 getTime() 除以 60，转换为整数，然后乘以 60”之类的解决方案。我正在寻找一个通用的解决方案来设置秒，而不仅仅是“0”。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-27T10:17:42.093

[setTime](http://php.net/manual/en/datetime.settime.php)优雅吗？

```
$my_date->setTime ( $my_date->format("H"), $my_date->format("i"), $new_second_val );
$my_date->setTime ( $my_date->format("H"), $new_minute_val, $new_second_val );
// etc... 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-27T10:19:12.530

只需将秒数设置为“00”

```
date_default_timezone_set('America/Sao_paulo');
$date = new DateTime();
echo $date->format('Y-m-d H:i:00'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-03T06:32:02.103

通过简单地使用 Carbon DateTime 对象上的秒/分钟或小时函数来设置秒/分钟或小时的最佳方法。（显然你需要创建碳对象）

```
\Carbon\Carbon::now()->hour(2)->minute(20)->second(0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-27T19:01:57.117

我知道这是一个迟到的答案，但它可能会以帮助我的方式帮助某人。

如果需要特定时区，可以添加第一行

`date_default_timezone_set('Africa/Johannesburg'); $created = date('Y-m-d H:i:00', time());`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-10T23:40:22.350

从文档应该是

```
$dt = Carbon::create(2012, 1, 31, 15, 32, 45);
echo $dt->startOfMinute(); // 2012-01-31 15:32:00 
```

# c# - 将多个变量传递到 asp.net 中的另一个页面

> ID：11223764
> 
> 赞同：0
> 
> 时间：2012-06-27T10:06:34.943
> 
> 标签：c#, asp.net

我想将多个变量传递给其他网页。

我试试这段代码

`string adi = TaskGridView.SelectedRow.Cells[3].Text;`

`string soyadi = TaskGridView.SelectedRow.Cells[3].Text;`

`Response.Redirect("Default2.aspx?adi=" + adi);`

`Response.Redirect("Default2.aspx?soyadi=" + adi);`

但它不起作用我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T10:18:22.770

最安全的方法是使用[`String.Format()`](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)with [`Server.UrlEncode()`](http://msdn.microsoft.com/en-us/library/ms525738%28v=vs.90%29.aspx)：

```
Response.Redirect(String.Format("Default2.aspx?adi={0}&soyadi={1}", Server.UrlEncode(adi), Server.UrlEncode(soyadi))); 
```

这将确保查询字符串值不会被破坏`&`，例如，如果值中有与号 ( )。

然后`Default2.aspx`您可以访问以下值：

```
Server.UrlDecode(Request.QueryString["adi"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:08:01.550

像这样连接它们：

```
Response.Redirect("Default2.aspx?adi=" + adi + "&soyadi=" + soyadi); 
```

传递查询字符串参数时，`?`在页面名称后使用符号，如果要添加多个参数，请使用`&`符号分隔它们

在消费页面：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        var adi = this.Request.QueryString["adi"];
        var soyadi = this.Request.QueryString["soyadi"];
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:21:39.710

您还可以使用会话将值从一个页面传递到另一个页面

在页面中设置要将值从其中传递到会话的值

```
Session["adi"] = TaskGridView.SelectedRow.Cells[3].Text;

Session["soyadi"] = TaskGridView.SelectedRow.Cells[3].Text; 
```

在您要检索的页面中-您这样做..

```
string adi=(string)(Session["adi"]);
string soyadi=(string)(Session["soyadi"]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T10:23:34.600

您也可以传递值，`ViewState`或者`Session`与您现在所做的不同的是：人们不会在您的 url 中看到任何内容，也不知道后端发生了什么。传递一些“绝密”数据时很好；P

# c# - 如何从.net应用程序编译java代码？

> ID：11223767
> 
> 赞同：0
> 
> 时间：2012-06-27T10:06:46.910
> 
> 标签：c#, java, .net, compilation

我正在使用 .NET 4 中的 C# 为 Java 创建一个源代码编辑器。我需要知道如何与 jre 交互以从 .net 编译我的应用程序编辑器界面上的 java 代码。我也希望向用户显示代码上的任何错误。任何关于如何实现这一点的想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:10:31.263

请注意，JRE 是*runtime*，因此编译器不附带。您将需要[JDK](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1637583.html)进行编译。

我认为最简单的解决方案是从您的 .Net 应用程序中生成一个[javac](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html)实例。或许更好的解决方案（然而）是用 Java 本身编写您的应用程序，然后您可以直接在您的应用程序中使用[Java 编译器 API 。](http://docs.oracle.com/javase/7/docs/api/javax/tools/JavaCompiler.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:20:00.613

也许最自然的互操作性方法是在 JVM 中运行 Java 代码，在 CLR 中运行 .NET 代码，并使用运行时桥来管理它们之间的通信。在这种情况下，.NET 代码调用充当 Java 类和对象代理的 .NET 类和对象。代理管理通信；调用 .NET 类甚至不知道它们最终调用的是 Java 类。运行时桥为各种架构提供互操作性，因为 Java 代码和 .NET 代码可以在不同的机器上，Java 代码可以在独立的 JVM 或 Java EE 应用程序服务器中运行，并且该解决方案提供了互操作性任何 JDK 版本。与字节码翻译解决方案一样，您只需要 Java 字节码，而不需要源代码。

本文的代码使用 JNBridge 的 JNBridgePro。

# asp.net - 从查询字符串到对象和请求响应模式的 ASP.NET MVC 模型绑定

> ID：11223769
> 
> 赞同：0
> 
> 时间：2012-06-27T10:06:51.350
> 
> 标签：asp.net, asp.net-mvc, model-binding

**来自HTTP POST**参数的模型绑定与请求响应模式非常有效，因此我在控制器中收到了我需要的 ViewModel，并使用该对象调用服务层。所以一切都封装在 DTO ViewModel 中。如果我想添加一些其他参数，我会修改对象而不是方法声明。

如果可能的话，我需要使用**HTTP GET**请求（来自 QueryString）自动执行相同的操作，例如：

**/Index/CountryName/PageNumber/1**绑定到控制器**索引（字符串 CountryName，int PageNumber）**

我希望它绑定到这个控制器：**Index(CountryQueryStringModel countryQueryStringModel)**

```
class CountryQueryStringModel 
{
   public string CountryName, 
   public int PageNumber 
} 
```

使用这种方法，如果我想添加例如过滤条件，我将其封装在对象中`CountryQueryStringModel`

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:02:10.700

你是对的马克，路由默认模型绑定器做到了。这是我找到的解决方案

```
context.MapRoute(
                null,
                "hotel/{countryName}/Page/{pageNumber}",
                new { controller = "ResultsCity", action = "Index"},
                new[] { "California_Front.Areas.Hotel_FR.Controllers" }

context.MapRoute(
                null,
                "hotel/{countryName}/",
                new { controller = "ResultsCity", action = "Index", PageNumber = 1 },
                new[] { "California_Front.Areas.Hotel_FR.Controllers" } 
```

控制器是这样的

```
public ActionResult Index(CountryQueryStringModel CountryQueryStringModel)
{} 
```

感谢帮助

# php - 如何使这段代码工作？

> ID：11223771
> 
> 赞同：-2
> 
> 时间：2012-06-27T10:06:59.773
> 
> 标签：php

我有一个小问题，我想它来自这里：

```
if($thepage == "") {
    $strSQL = "SELECT * FROM Banlist LIMIT 0 , 15";
}
if($thepage == 2) {
    $strSQL = "SELECT * FROM Banlist LIMIT 15 , 30";
}
if($thepage == 3) {
    $strSQL = "SELECT * FROM Banlist LIMIT 30 , 45";
}
if($thepage == 4) {
    $strSQL = "SELECT * FROM Banlist LIMIT 45, 60";
}
if($thepage == 5) {
    $strSQL = "SELECT * FROM Banlist LIMIT 60 , 75";
}
if($thepage == 6) {
$strSQL = "SELECT * FROM Banlist LIMIT 75 , 90";
}
if($thepage == 7) {
    $strSQL = "SELECT * FROM Banlist LIMIT 90 , 105";
}
if($thepage == 8) {
    $strSQL = "SELECT * FROM Banlist LIMIT 105 , 120";
} 
```

在我的浏览器中，在 PHP 代码的 HTML 部分之前，它向我显示了以下内容：

```
} } } } } } } } } } } } } } } 
```

似乎是什么问题？

PS：我想编写一些代码，使我成为这样的页面浏览器：

```
(page: 1  2  3  4  5 ... LAST) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:12:53.537

尝试这个：

```
<?php
if(!isset($thepage) || ( $thepage==1 )) {
   $startLimit = 0;
} else {
   $startLimit = 15 * $thepage;
}

$strSQL = "SELECT * FROM Banlist LIMIT " . $startLimit . " , 15";
?> 
```

简短而简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:14:04.267

你可以像这样清理它，然后你就不需要if了。

```
$limitLength = 15;
$thepage = $thepage == ""? 1: $thepage;
$baseLimit = ($thepage-1) * $limitLength;
$strSQL = sprintf("SELECT * FROM BanList LIMIT %d, %d", $baseLimit, $limitLength; 
```

但是我们需要查看整个页面才能了解这些大括号的来源

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:28:49.403

你的代码有一些问题……</p>

如果你想使用“if”而不是 case，你应该使用“elsif”……因为即使第一次检查是正确的，你也要使用服务器时间来检查其余的……</p>

我认为维护这样的东西会更容易：

```
$top = $thepage ? ($thepage - 1) * 15 : 0;
$strSQL = "SELECT * FROM Banlist LIMIT  $top, 15"; 
```

编辑：根据评论更正代码：P

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T10:18:17.180

```
$ENTRIES_PER_PAGE = 15;

$strSQL = 'SELECT * FROM banlist LIMIT '.($ENTRIES_PER_PAGE * (empty($thepage)? 0 : $thepage - 1)).', '.$ENTRIES_PER_PAGE; 
```

# shell - 我可以在测试表达式中简单地使用退出代码（不带 $ 吗？）？

> ID：11223773
> 
> 赞同：0
> 
> 时间：2012-06-27T10:07:08.837
> 
> 标签：shell, sh, exit-code, ash

我必须在 ash 中创建一个条件，这取决于两个命令的结果。问题是其中一个将结果返回到标准输出，另一个作为退出代码。

我必须写吗

```
 command2
 RET=$?
 if [ `command1` -eq 1 -a $RET -eq 2 ] ; then ... 
```

还是有一些结构可以让我简单地访问`command2`逻辑内的返回代码`[ ]`？

```
 if [ `command1` -eq 1 -a ${{{ command2 }}} -eq 2 ] ; then ... 
```

（`${{{ }}}}`作为提取返回码的神奇表达式？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:09:52.027

最好写成：

```
if [ "`command1`" -eq 1 ] && command2
then
  ....
fi 
```

或者当您想检查退出代码是否为 2 时：

```
if [ "`command1`" -eq 1 ] && { command2 ; [ "$?" = 2 ] ; }
then
  ....
fi 
```

例子：

```
$ cat 1.sh
ARG="$1"

command1()
{
  echo 1
}
command2()
{
  return "$ARG"
}

if [ "`command1`" -eq 1 ] && { command2 ; [ "$?" = 2 ] ; }
then
  echo OK
else
  echo FAILED
fi

$ sh 1.sh 2
OK
$ sh 1.sh 3
FAILED 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:01:35.073

我想没有办法避免 $?，但我可以在 test 语句中使用命令，通过`;echo $?`在末尾添加。

```
if [ `command1` -eq 1 -a `command2 ; echo $?` -eq 2 ] ; then ... 
```

# php - id 生成所需的数字逻辑程序

> ID：11223775
> 
> 赞同：-1
> 
> 时间：2012-06-27T10:07:17.307
> 
> 标签：php

程序输出**所有 4 位数字**，其中没有前一位大于后一位。

数字应为 1-9（包括 1 和 9）。

数字可以是 1234,2345。第一位应小于第二位，第二位应小于第三位，第三位应小于第四位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:46:01.310

```
<?php
$count = 1;
for($i=1;$i<=6;$i++){
  for($j=$i+1;$i<$j,$j<=7;$j++){
   for($k=$j+1;$j<$k,$k<=8;$k++){
    for($l=$k+1;$k<$l,$l<=9;$l++){
            echo $i.$j.$k.$l."<br>";
            $count++;
    }
   }
  }
}
echo $count;
?> 
```

总共有 127 个这样的数字。

# google-app-engine - 使用 bulkloader 上传带有父级的实体

> ID：11223782
> 
> 赞同：2
> 
> 时间：2012-06-27T10:07:39.233
> 
> 标签：google-app-engine, parent, bulkloader

因此，我正在尝试使用 bulkloader 创建一个具有父级的实体。

我有一个客户实体：

```
class Client(db.Model):
    identifier = db.StringProperty()
    www_ip = db.StringProperty()
    local_ip = db.StringProperty()
    status=db.BooleanProperty() 
```

我想创建一个数据实体作为客户的孩子。

```
class Data(db.Model):
    songscount = db.IntegerProperty()
    nextorder = db.IntegerProperty(default=1)
    players = db.ListProperty(str)
    previousplayer = db.StringProperty() 
```

客户实体存在。Data.yaml 是（无序言）：

```
transformers:
- kind: Data
  connector: csv
  connector_options:
    # TODO: Add connector options here--these are specific to each connector.
  property_map:
    - property: __key__
      external_name: key
      import_transform: transform.create_deep_key(('Client', '__key__'), ('Data', transform.CURRENT_PROPERTY))
      export_transform: transform.key_id_or_name_as_string

    - property: nextorder
      external_name: nextorder
      import_transform: transform.none_if_empty(int)

    - property: players
      external_name: players
      import_transform: transform.none_if_empty(users.User)  # Assumes email address

    - property: previousplayer
      external_name: previousplayer
      import_transform: transform.none_if_empty(users.User)  # Assumes email address

    - property: songscount
      external_name: songscount
      import_transform: transform.none_if_empty(int) 
```

我知道需要使用 transform.create_foreign_key 或 transform.create_deep_key 。我不明白的是如何告知我的客户实体（它是父实体）。

我发现一个这样的问题讨论了[如何在 Google App Engine 上的 appcfg.py 批量加载数据期间为数据存储实体设置父级？](https://stackoverflow.com/questions/2356158/how-to-set-parent-for-datastrore-entity-during-bulkloading-data-by-appcfg-py-on)，但“代码配置”已被弃用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:12:09.833

老问题，但供将来参考，答案似乎在这里：

```
 - property: __key__
      external_name: key
      import_transform: transform.create_deep_key(('clientKey‘, ‘clientKey‘),(’key‘, transform.CURRENT_PROPERTY))
      export:
      - external_name: clientKey
        export_transform: transform.key_id_or_name_as_string_n(0)
      - external_name: key
        export_transform: transform.key_id_or_name_as_string_n(1) 
```

（改编自[http://longsystemit.com/javablog/?p=23](http://longsystemit.com/javablog/?p=23)）

# android - 飞行模式下的活动蓝牙

> ID：11223785
> 
> 赞同：3
> 
> 时间：2012-06-27T10:07:43.133
> 
> 标签：android

我需要在我的应用程序中关闭 gsm 网络但启用蓝牙。我知道如何更改为飞行[模式在 Android 中切换飞行模式](https://stackoverflow.com/questions/5533881/toggle-airplane-mode-in-android)，但是有没有办法让蓝牙保持开启状态（我知道它们都在使用无线电信号），我认为在 android 4 上是可能的，因为我看到一些应用程序在做它就像“自动飞机”。

我在没有帮助的情况下尝试了下面的代码：

```
Settings.System.putInt(context.getContentResolver(),
                Settings.System.AIRPLANE_MODE_ON,1);
Intent intent = new Intent(Intent.ACTION_AIRPLANE_MODE_CHANGED);
intent.putExtra("state", 1);
context.sendBroadcast(intent);

BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
mBluetoothAdapter.enable(); 
```

谢谢，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:22:02.100

这应该是不可能的，因为飞行模式旨在减少每个信号，TMHO 应该包括蓝牙。

[http://en.wikipedia.org/wiki/Airplane_mode](http://en.wikipedia.org/wiki/Airplane_mode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:25:22.020

具有 BLUETOOTH_ADMIN 权限它正在工作，但蓝牙部分已从手机设置中禁用，手机对其他设备可见。

# screen - 基于网站的屏幕调整

> ID：11223788
> 
> 赞同：-1
> 
> 时间：2012-06-27T10:08:00.323
> 
> 标签：screen, resolution

有没有根据网站调整屏幕分辨率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:46:19.810

您没有指定是否要调整网站用户的分辨率，或者是否要根据您访问的网站调整自己的分辨率。

前者：**不要。**

后者：我想，理论上，可能有一个程序可以做到这一点，但我也可以猜测任何这样的程序开发起来都会很痛苦，所以我不会屏住呼吸。在我看来，实现您所追求的最佳方式是为所有站点设置足够高的分辨率，然后调整浏览器窗口的大小，或使用每个站点的缩放设置。

# asp.net - 数据表中的 LINQ 查询

> ID：11223792
> 
> 赞同：0
> 
> 时间：2012-06-27T10:08:16.980
> 
> 标签：asp.net, linq, datatable

我有一个`DataTable`名为`dt`. 它有两个名为`atype_code`和的列`module`。现在我需要根据特定查询一个模块`atype_code`。

这是我编写但无法正常工作的代码。

```
DataTable dt = GetATypeCodeList();
var accType = (from myAccType in dt.AsEnumerable()
           where myAccType.Field<string>("atype_code") == aTypeCode.Trim()
           select myAccType.Field<string>("module")); 
```

`acctype`是一个`System.Data.EnumerableRowCollection<System.String>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:23:47.463

既然你说你

> 需要根据具体的atype_code查询一个模块

，我假设你只想要一个`module`给定的`atype_code`.

那么你应该使用`Single`/`SingleOrDefault`或`First`/ `FirstOrDefault`。

```
String firstModule = dt.AsEnumerable()
                       .Where(r => r.Field<string>("atype_code") == aTypeCode.Trim())
                       .Select(r => r.Field<string>("module"))
                       .FirstOrDefault();
// or
String singleModule = dt.AsEnumerable()
                       .Where(r => r.Field<string>("atype_code") == aTypeCode.Trim())
                       .Select(r => r.Field<string>("module"))
                       .SingleOrDefault(); 
```

`Enumerable.Single`如果有多个匹配元素，则抛出异常。这对于验证数据很有用。

**编辑**：

这是查询语法：

```
IEnumerable<String> modules =  
    from myAccType in dt.AsEnumerable()
    where myAccType.Field<string>("atype_code") == aTypeCode.Trim()
    select myAccType.Field<string>("module");
String module = modules.FirstOrDefault(); // returns null if no matching modules were found 
```

# javascript - 在 python 中使用 selenium 执行 javascript 后存储结果

> ID：11223794
> 
> 赞同：1
> 
> 时间：2012-06-27T10:08:22.620
> 
> 标签：javascript, python, selenium

我正在尝试使用 selenium 在锚标记内执行 javascript 函数，并尝试将结果存储在某处

**HTML 代码**：

```
<td>
<td>
  <ul class="compare">
    <li class="floatRight dividLineLeft category_page_navigation">
       <div class="page_navigation">
           <span id="ctl00_ctl00_ContentPlaceHolder1_ItemListPlaceHolder_pager1">
               <a style="width: 22px; height: 22px;" disabled="disabled">
               <a style="width: 22px; height: 22px;" href="javascript:__doPostBack('ctl00$ctl00$ContentPlaceHolder1$ItemListPlaceHolder$pager1$ctl00$ctl01','')">
           </span>
       </div>
    </li>
  </ul>
</td> 
```

**下面是我的代码**

```
from selenium import webdriver
driver = webdriver.Chrome('/usr/bin/chromedriver')
driver.get("http://www.e3050.com/Items.aspx?cat=SON");
anchor_tags = driver.find_element_by_xpath("//div[@class='page_navigation']/span[@id='ctl00_ctl00_ContentPlaceHolder1_ItemListPlaceHolder_pager1']")
anchor_tags_res = anchor_tags.find_elements_by_tag_name("a")
for anchor_tag in anchor_tags_res:
      href=[]
      href.append(anchor_tag.get_attribute("href"))
      for i in href:
          element = driver.execute_script(i)
          print element 
```

在这里，我可以从锚标签中获取 href，但是当我尝试像上面显示的那样执行时，它会显示以下错误。当我使用 click() 函数时

```
for anchor_tag in anchor_tags:
      anchor_tag.click() 
```

javascript执行良好，但我想存储执行结果，因为在上面的代码中，javascript函数只不过是生成分页

**结果：**

```
---------------------------------------------------------------------------
WebDriverException                        Traceback (most recent call last)

/home/local/<ipython console> in <module>()

/usr/lib/python2.7/site-packages/selenium-2.21.3-py2.7.egg/selenium/webdriver/remote/webdriver.pyc in execute_script(self, script, *args)
    383         converted_args = list(args)
    384         return self.execute(Command.EXECUTE_SCRIPT,
--> 385             {'script': script, 'args':converted_args})['value']
    386 
    387     def execute_async_script(self, script, *args):

/usr/lib/python2.7/site-packages/selenium-2.21.3-py2.7.egg/selenium/webdriver/remote/webdriver.pyc in execute(self, driver_command, params)
    151         response = self.command_executor.execute(driver_command, params)
    152         if response:
--> 153             self.error_handler.check_response(response)
    154             response['value'] = self._unwrap_value(
    155                 response.get('value', None))

/usr/lib/python2.7/site-packages/selenium-2.21.3-py2.7.egg/selenium/webdriver/remote/errorhandler.pyc in check_response(self, response)
    123             if exception_class == ErrorInResponseException:
    124                 raise exception_class(response, value)
--> 125             raise exception_class(value)
    126         message = ''
    127         if 'message' in value:

WebDriverException: Message: '{"sessionId":"ed4b6f549a9902254bc49399cddbe79a","status":400,"value":{"message":"No script specified"}}' 
```

那么在 selenium 中执行 javascript 后如何存储结果

提前致谢........................

**编辑代码**：

```
from selenium import webdriver
driver = webdriver.Chrome('/usr/bin/chromedriver')
driver.get("http://www.e3050.com/Items.aspx?cat=SON");
anchor_tags = driver.find_element_by_xpath("//div[@class='page_navigation']/span[@id='ctl00_ctl00_ContentPlaceHolder1_ItemListPlaceHolder_pager1']")
all_options = anchor_tags.find_elements_by_tag_name("a")
hrefs = all_options[1].get_attribute("href")
res = hrefs.encode('utf-8')
element = driver.execute_script('%s'%res)
WebDriverWait(driver, timeout=10).until(lambda x: x.find_element_by_id('ctl00_ctl00_ContentPlaceHolder1_ItemListPlaceHolder_itemslv_ctrl0_Counterlbl'))
print element,"Here should be the result" 
```

我编辑了代码，并通过终端从文件中运行了此代码，我没有收到任何错误，但结果没有。实际上我想在 javascript 执行后保存结果。请让我知道为什么结果是空的............

提前致谢................

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:22:40.453

点击后要得到结果，只需调用适当的`find_element_by*`方法即可。您可能需要`selenium.webdriver.support.ui.WebDriverWait`等待结果加载。

# javascript - $(document).ready() 在 IE 中使用 require.js 优化的代码

> ID：11223795
> 
> 赞同：1
> 
> 时间：2012-06-27T10:08:22.720
> 
> 标签：javascript, jquery, requirejs, require

我在 IE 中加载 JS 时遇到问题。我的文档只有在按 ctrl+r 时才会运行。只有在使用 requirejs 优化器和 IE 时才会出现这种情况。如果我不运行优化器，我会在其他浏览器和 IE 中工作。

```
require(["jquery", "modals", "registermodule", "bootstrap", "personsmodule"], function($) {

//This is for placeholders in browsers that don't support it.
function createPlaceHoldersForIE(){
    if (typeof document.createElement("input").placeholder == 'undefined') {
        $('[placeholder]').focus(function() {
            var input = $(this);
            if (input.val() == input.attr('placeholder')) {
                input.val('');
                input.removeClass('placeholder');
            }
        }).blur(
                function() {
                    var input = $(this);
                    if (input.val() === '' || input.val() === input.attr('placeholder')) {
                        input.addClass('placeholder');
                        input.val(input.attr('placeholder'));
                    }
                }).blur().parents('form').submit(function() {
            $(this).find('[placeholder]').each(function() {
                var input = $(this);
                if (input.val() == input.attr('placeholder')) {
                    input.val('');
                }
            });
        });
    }
}

// This will allow $(selector).val().trim(); syntax
String.prototype.trim = function() {
    return $.trim(this);
};

$(document).ready(function() {
    createPlaceHoldersForIE();
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:07:56.910

改为使用 domReady! 模块。

[http://requirejs.org/docs/api.html#pageload](http://requirejs.org/docs/api.html#pageload)

```
require([
         "jquery", "modals", "registermodule", 
         "bootstrap", "personsmodule", "domReady!"
        ], 
         function($){ 
```

# c# - 更高效地编辑 XML 代码注释的工具？

> ID：11223802
> 
> 赞同：4
> 
> 时间：2012-06-27T10:08:48.750
> 
> 标签：c#, .net, visual-studio-2010, xml-comments

我正在寻找有助于更高效地编辑和管理良好 XML 代码注释的工具，因为当我想编写更详细的注释（带有项目符号列表、表格和更长的解释）时，Visual Studio 中的编辑工具似乎无法扩展. 进一步来说：

*   在代码中很好地格式化 xml 注释（包装、自动 xml 格式化和缩进等）
*   所见即所得编辑器，用于更高级的编辑（项目符号列表、表格等）
*   预览和输出生成
*   了解记录的内容和未记录的内容等，以及比查看单个文件更高的级别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-25T21:15:40.970

我是[Atomineer Pro 文档](http://www.atomineerutils.com/)插件的作者，值得一看。它更多地关注源代码而不是外部生成的文档，因此它可能是也可能不是满足您需求的正确工具，但这里有一个要点，说明它如何与您的特定需求列表相关：

**优点：**它将帮助您比大多数（如果不是全部）其他插件更快更好地生成原始评论，并且比其他插件支持更多的源代码语言和评论格式。更新评论时，它将比其他插件更进一步，让您可以控制格式（评论内外的空白控制、评论块格式、对自动换行、条目格式、缩进和块分隔线的非常好的控制，并支持项目符号列表等）。它还包括一个文档查看器窗口，可让您查看最终文档的外观（取决于您将其导出为富文本格式的方式）。实时输入帮助使编辑文档注释更快更容易。

**缺点：**它（还）不提供文档的富文本编辑，也不提供解决方案的文档概述。您可能会发现像[DocumentX](http://www.innovasys.com/product/dx/overview)这样的产品可能更适合您在该领域的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T14:12:55.723

我最近发现了这个[GhostDoc](http://submain.com/products/ghostdoc.aspx)，我正在考虑用它来帮助处理 XML 注释。

# c++ - 如何创建一个双端队列数组？

> ID：11223804
> 
> 赞同：-1
> 
> 时间：2012-06-27T10:08:53.413
> 
> 标签：c++, arrays, deque

我定义了很多双端队列，当我需要执行擦除或弹出所有这些操作时，我只需要专门针对每个双端队列执行此操作。我认为可以更容易的是将双端队列放在某种数组或列表中，我可以循环遍历。

我想做的是这样的（基本上只是伪代码）：

```
deque<f32> pos, vel, rot, prop;
deque deques[] = {pos, vel, rot, prop};
for(i=0; i<deques.length; i++) deques[i].pop_back(); 
```

（但它不起作用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:10:24.257

```
std::vector<std::deque<f32>> array;

std::deque pos, vel, rot, prop;

array.push_back(pos);
array.push_back(vel);
array.push_back(rot);
array.push_back(prop); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:13:58.167

如果您的编译器支持 C++11 功能，则替代方法[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)是[`std::array`](http://en.cppreference.com/w/cpp/container/array)：

```
std::array<std::deque<f32>, 4> deques;

std::for_each(deques.begin(),
              deques.end(),
              [](const std::deque<f32>& a_d)
              {
                  std::cout << a_d.size() << "\n";
              }); 
```

如果没有，您可以`std::vector`按照已经说明的方式使用。要`std::vector`使用初始`deque<f32>`元素创建：

```
std::vector<std::deque<f32> > deques(4); // 4 empty deque<f32>s

for (std::vector<std::deque<f32> >::iterator i = deques.begin();
     i != deques.end();
     i++)
{
      std::cout << i->size() << "\n";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T10:15:19.477

在这里，您声明一个简单的非托管数组：

```
deque deques[] = {pos, vel, rot, prop}; 
```

...但是您忘记声明其内容的完整专用类型，而`deque<f32>`不仅仅是裸`deque`.

现在，您尝试迭代您的数组，

```
for(i=0; i<deques.length; i++) deques[i].pop_back(); 
```

...但是简单的 C 风格数组没有像`length`. 您似乎在尝试编写 C#，而不是 C++！

试试这个：

```
std::array<std::deque<float>, 4> deques = { pos, vel, rot, prop };
for(auto i=0; i<deques.size(); i++) deques[i].push_back(1.0f); 
```

等等

# mysql - 如何在mysql中存储客户数据（2表vs 1表）

> ID：11223806
> 
> 赞同：1
> 
> 时间：2012-06-27T10:09:04.407
> 
> 标签：mysql

我在想我会有两张 mysql 表。一个用于存储登录信息，另一个用于送货地址。这是传统方式还是所有东西都存储在一张桌子上？

对于两个表...有没有一种方法可以自动将一列从表 A 复制到表 B，以便我可以引用相同的 id 来获取他们的送货地址...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:18:27.403

如果它是一个地址，并且每次都会更新，那么您可以将它放在一个表中，例如

```
**Customer** 

customer_id [pkey]
customer_name
login_id
password
shipping_address 
```

而如果您想存储单个客户的所有送货地址（跨多次访问），那么拥有另一个表 customer_shipping_address 将是一个不错的设计

```
**Customer**

customer_id [pkey]
customer_name
login_id
password

**Customer_Shipping_Address**

customer_id [fkey to customer]
shipping_address 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:20:00.973

这是我对您关于使用 1 个表或 2 个表的问题的回答。这个决定取决于可能的因素。但我建议您应该使用 2 个单独的表格。因为登录信息是您将经常检索到的与运输信息相比的信息。现在，如果您将所有信息都放在一个表中，那么表的大小将会很大，并且每次需要用户的登录信息时都必须查询这个巨大的表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:26:13.547

我认为使用两张桌子是更好的方法。然后在您想要运送时加入他们。那个 SQL 是这样的。

```
SELECT
table1.id, table2.id, table2.somethingelse, table1.somethingels
FROM
table1 INNER JOIN table2
ON table1.foreignkey = table2.primarykey
WHERE
    (some conditions is true) 
```

上面的代码需要在运输页面本身上运行。

# php - 通过扩大匹配来改善搜索结果

> ID：11223809
> 
> 赞同：0
> 
> 时间：2012-06-27T10:09:17.173
> 
> 标签：php, string-matching

我正在尝试使用 PHP 改进搜索结果。例如，当产品名称为`ZSX-3185BC`用户时，用户在放置类似的内容时找不到产品`ZSX3185BC`。到目前为止，我得到了类似的东西：

```
$input = '01.10-2010';  
$to_replace = array('.','-');
$clean = str_replace($to_replace, '/',$input);` 
```

我试过这个，但它不能正常工作*（不确定，在没有详细说明的情况下发布在评论中）*

```
$str = ""; 
$len = strlen($strSearch) - 1; 
// Loop through the search string to check each charecter is acceptable and strip those that are not 
for ($i = 0; $i <= $len; $i++) {
    if(preg_match("/\w|-| /",$strSearch[$i])) {
        $str = $str . $strSearch[$i]; 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:35:22.967

您应该尝试直接在数据库查询中进行这种模糊匹配。模糊字符串匹配的一种常用方法是[Levenshtein 距离](https://en.wikipedia.org/wiki/Levenshtein_distance)。

MySQL 没有内置此功能，但是可以添加。[请参阅这个 SO 问题。](https://stackoverflow.com/questions/4671378/levenshtein-mysql-php)

基本的方法是在 MySQL 中添加一个存储函数。有一个[Levenshtein 实现](http://www.artfulsoftware.com/infotree/queries.php#552)作为存储函数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-27T10:21:48.837

尝试这个 ：

```
SELECT * FROM tablename WHERE replace(fieldname, '-', '') like '%ZSX3185BC%';

```

# xml - xml结构中的歧义

> ID：11223811
> 
> 赞同：1
> 
> 时间：2012-06-27T10:09:21.270
> 
> 标签：xml, xml-parsing

我看到了这个 XML：

```
<amount type="downpayment"></amount> 
```

我想知道为什么不这样做：

```
<amount>
       <type>downpayment</type>
</amount> 
```

1.用方法1而不是方法2写有什么特别的原因或意义吗？

2.这两个XML如何翻译成POJO？有什么区别。

3.XML中有什么保留字不能用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:39:04.320

在很多情况下，将属性用于对象的属性，将子元素用于包含的对象，这很清楚。

一个示例是“文档样式”XML 应用程序，例如 XHTML。在：

```
<p class="warning"><a href="/helpAccountExpire">Your account has expired</a></p> 
```

`p`那么和之间的关系`a`是前者代表了一个文档元素，后者是其中的一部分，同时提供了更多关于和about`class`的性质的信息。`p``href``a`

这在非“文档样式”应用程序中也很有意义：

```
 <list presorted="true">
   <item>4</item><item>7</item><item>23</item>
 </list> 
```

这里`list`包含数字 4、7 和 23，而`presorted`属性告诉 use 列表已经排序（因此如果需要排序，我们可以放弃自己排序的费用）。

有很多情况可以合理地使用其中任何一种，并且个人偏好通常会对 XML 应用程序设计产生影响。当然，任何不能用简单字符串完成的事情，或者可能有超过可能值的事情（在你的问题示例中，在第一种情况下`amount`只能有零或一个`type`，但在第二种情况下可以有任何数字.

它将如何翻译成 POJO 取决于翻译的内容，您必须指定。

至于保留字，元素或属性的名称可以以任何匹配的字符开头：

```
":" | [A-Z] | "_" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF] 
```

并且名称的其余部分可以是与该名称匹配的任何字符，也可以是：

```
"-" | "." | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040] 
```

请注意，这包含一些 Unicode 非字符，虽然没有被 XML 标准禁止，但不能在 XML 中，因为 XML 建立在 Unicode 之上，因此它们在实践中也被禁止。

还有一条规则，`xml`以任何大写 (`XML`等`xMl`) 开头的名称都保留用于核心 XML 技术，例如 XML 本身、XML 名称空间等。 ( `xml:space`、`xml:lang`和前缀是使用的示例) `xmlns`。`xmlns:`

（这是在 XML1.0 中，XML1.1 有稍微不同的规则来澄清一些奇怪的情况，但大多数情况下只有真正需要那些澄清规则的人需要）。

使用 XML 命名空间的应用程序进一步限制了上述内容，因为名称中只能有一个冒号 ( `:`)，在这种情况下，左边的部分是标识使用的命名空间的命名空间前缀（如果不存在，则为默认命名空间) 并且右边的位（或者如果在默认名称空间中，则为整个）是本地名称。暗示，这禁止以冒号开头的名称。

即使您不使用命名空间，遵循这些限制也是一个好主意，这样您就可以与使用的技术兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:14:52.073

第一个是`XML Attribute`，第二个是`XML Child Element`。以下是一些讨论它们比较的链接：

[在 w3schools.com 上](http://www.w3schools.com/dtd/dtd_el_vs_attr.asp)

[在 IBM developerworks 上](http://www.ibm.com/developerworks/xml/library/x-eleatt/index.html)

[在 Stackoverflow 上](https://stackoverflow.com/questions/825147/xml-attributes-or-children)

# mysql - MySQL 我可以使用正则表达式来表示行的类型吗？

> ID：11223812
> 
> 赞同：0
> 
> 时间：2012-06-27T10:09:30.933
> 
> 标签：mysql, sql, regex

我有一个带有列的“用户”表：

```
USERNAME varchar(40) 
```

“用户”可以是管理用户，也可以是标准用户。管理用户始终包含纯数字用户名。

然后我可以使用正则表达式提取所有具有数字名称的用户以获取管理用户，反之亦然以获取非管理用户。

因此，在我的选择查询中使用正则表达式来获取此信息是否可行，或者我应该添加一个额外的列：

```
MANAGEMENT TINYINT(1) 
```

其中存储用户是否为管理用户。

什么是最佳实践，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:51:02.113

在一个字段中依赖这种“隐藏”的含义*确实不是很安全或有效。*添加一个新字段。真的。没有合理的理由不这样做*。*

我还建议阅读这篇关于[Falsehoods Programmers Believe About Names](http://www.kalzumeus.com/2010/06/17/falsehoods-programmers-believe-about-names/)的文章。

一些例子：

> 9：人名用ASCII写。
> 
> 15：人名不包含数字。
> 
> 24：我的系统永远不需要处理来自中国的名字。
> 
> 25：或者日本
> 
> 26：或者韩国

您的正则表达式可以处理所有这些吗？当然？每次？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T10:41:50.730

通常最好将模式设计为[​​规范化](http://en.wikipedia.org/wiki/Database_normalization)。这包括没有多个列可以存储相同的信息。但是，用户名和作为管理用户绝对是不同的信息，您需要两者。

您可以使用`BIT`新列的类型。

如果您想强制使用特定格式的用户名，标准的数据库解决方案将定义一个检查约束，如下所示：

```
ALTER TABLE YourTable ADD CONSTRAINT YourConstraint CHECK ( is_management_user = 0 OR ...) 
```

（其中`...`将包括`REGEXP_LIKE`在 Oracle 上，在 TSQL 中转换为整数或类似的东西）。

但是，MySql[不强制](https://stackoverflow.com/questions/5807231/mysql-check-constraint-alternative)检查约束，如果您认为`USERNAME`某种形式对应用程序的安全或操作很重要，则必须使用触发器来模拟它们 - 我希望它确实不是。

# php - PHP数组过滤器问题

> ID：11223814
> 
> 赞同：0
> 
> 时间：2012-06-27T10:09:49.147
> 
> 标签：php, arrays, filter

对不起，为什么这不能工作：

```
function filter($var) {
    return($var['id'] < 4);
}

$t1 = array(
array("key"=>"date", "value"=>"effe", "id"=>2),
array("key"=>"date2", "value"=>"jieffe", "id"=>3),
array("key"=>"date3", "value"=>"efjife", "id"=>4),
array("key"=>"date4", "value"=>"effijoe", "id"=>5),

);

array_filter($t1, "filter");

var_dump($t1); 
```

[在http://writecodeonline.com/php/](http://writecodeonline.com/php/)上测试

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:14:17.857

array_filter()***返回***过滤后的数组，它不是通过引用传递：

```
$t1 = array_filter($t1, "filter");

var_dump($t1);// done 
```

# android - 我的 mfacebook 对象初始化好了吗？

> ID：11223818
> 
> 赞同：0
> 
> 时间：2012-06-27T10:10:13.893
> 
> 标签：android, facebook

嗨，我已将 facebook 集成到我的 android 应用程序中。下面是代码：

```
public class Example extends Activity {

public static final String APP_ID = "My App ID";//i have placed my app id here

private LoginButton mLoginButton;
private TextView mText;
private Button mPostButton;

private Facebook mFacebook;
private AsyncFacebookRunner mAsyncRunner;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (APP_ID == null) {
        Util.showAlert(this, "Warning", "Facebook Applicaton ID must be " +
                "specified before running this example: see Example.java");
    }

    setContentView(R.layout.main);
    mLoginButton = (LoginButton) findViewById(R.id.login);
    mText = (TextView) Example.this.findViewById(R.id.txt);

    mPostButton = (Button) findViewById(R.id.postButton);

    **mFacebook = new Facebook(APP_ID);**//this is where i get a Null Pointer Exception
    mAsyncRunner = new AsyncFacebookRunner(mFacebook);

    SessionStore.restore(mFacebook, this);
    SessionEvents.addAuthListener(new SampleAuthListener());
    SessionEvents.addLogoutListener(new SampleLogoutListener());
    mLoginButton.init(this, mFacebook);

    mPostButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            mFacebook.dialog(Example.this, "feed",
                    new SampleDialogListener());
        }
    });
    mPostButton.setVisibility(mFacebook.isSessionValid() ?
            View.VISIBLE :
            View.INVISIBLE);
 } 
```

当我运行应用程序时，我在以下行得到一个空指针异常：
**mfacebook = new facebook(APP_ID);**

这是我的 Logcat

> 06-27 15:01:29.424: ERROR/AndroidRuntime(646): FATAL EXCEPTION: main 06-27 15:01:29.424: ERROR/AndroidRuntime(646): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. sardarjijokes.ncpl/com.sardarjijokes.ncpl.Example}：java.lang.NullPointerException 06-27 15:01:29.424：错误/AndroidRuntime（646）：在 android.app.ActivityThread.performLaunchActivity（ActivityThread.java:2663）06 -27 15:01:29.424: 错误/AndroidRuntime(646): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679) 06-27 15:01:29.424: 错误/AndroidRuntime(646): 在 android.app .ActivityThread.access$2300(ActivityThread.java:125) 06-27 15:01:29.424: 错误/AndroidRuntime(646): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033) 06-27 15: 01：29.424：错误/AndroidRuntime（646）：在 android.os.Handler。dispatchMessage(Handler.java:99) 06-27 15:01:29.424: ERROR/AndroidRuntime(646): at android.os.Looper.loop(Looper.java:123) 06-27 15:01:29.424: ERROR/ AndroidRuntime(646): 在 android.app.ActivityThread.main(ActivityThread.java:4627) 06-27 15:01:29.424: 错误/AndroidRuntime(646): 在 java.lang.reflect.Method.invokeNative(Native Method) 06-27 15:01:29.424: ERROR/AndroidRuntime(646): at java.lang.reflect.Method.invoke(Method.java:521) 06-27 15:01:29.424: ERROR/AndroidRuntime(646): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 06-27 15:01:29.424: ERROR/AndroidRuntime(646): at com.android.internal.os.ZygoteInit.main(ZygoteInit .java:626) 06-27 15:01:29.424: ERROR/AndroidRuntime(646): at dalvik.system.NativeStart.main(Native Method) 06-27 15:01:29.424: ERROR/AndroidRuntime(646):引起：java.lang.NullPointerException 06-27 15:01:29.424: ERROR/AndroidRuntime(646): at com.sardarjijokes.ncpl.Example.onCreate(Example.java:85) 06-27 15:01:29.424:错误/AndroidRuntime(646): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 06-27 15:01:29.424: 错误/AndroidRuntime(646): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java :2627)

请提供建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:20:23.213

尝试以下：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
 setContentView(R.layout.main); //set Activity layout here
    if (APP_ID == null) {
        Util.showAlert(this, "Warning", "Facebook Applicaton ID must be " +
                "specified before running this example: see Example.java");
    }

    mLoginButton = (LoginButton) findViewById(R.id.login);
    mText = (TextView)findViewById(R.id.txt);

    mPostButton = (Button) findViewById(R.id.postButton);

    **mFacebook = new Facebook(APP_ID);**//this is where i get a Null Pointer Exception
    mAsyncRunner = new AsyncFacebookRunner(mFacebook); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:13:22.873

我不明白你的代码，如果`APP_ID`为空，你会显示一条警告消息，但让其余的代码得到执行。

不应该是：

```
if (APP_ID == null) {
    Util.showAlert(this, "Warning", "Facebook Applicaton ID must be " + "specified before running this example: see Example.java");
    return;
} 
```

?

# android - 在层次结构顶部复制后退按钮功能

> ID：11223820
> 
> 赞同：1
> 
> 时间：2012-06-27T10:10:15.573
> 
> 标签：android

我已经覆盖了我的后退按钮方法，我想知道，当在层次结构的顶部时，如何将我的应用程序置于后台并将其返回到 android 主屏幕。那么在没有更多可返回的情况下复制其通常的功能？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:15:37.697

我不确定我是否理解你的正确，但只是让你的应用程序做，当用户按下后退按钮时系统会做什么，使用*super.onBackPressed();*

我希望这有帮助。

# css - LESSCSS：更改导入的 .less 文件中的变量根本不起作用

> ID：11223822
> 
> 赞同：0
> 
> 时间：2012-06-27T10:10:17.790
> 
> 标签：css, zend-framework, import, less

我正在使用 LESSCSS（与 Zend），并且我导入了一些 .less 文件。

像这样： Zend ：

```
->headLink()->appendStylesheet(array('rel' => 'stylesheet/less','href' => '/css/'.$moduleName.'/content.less')); 
```

所以在**主要的** *content.less*（唯一使用“链接”html标签的文件）。我导入其他文件：

```
@import "../commun.less";
@import "../menu/menu.less";
@import "../font-face/font-face.less"; 
```

但是，当我在***commun.less*****中更改 css 规则时***，它不起作用。修改无效！*

 *文件已编译，是的，当然，但为什么我不能修改 .less 导入的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:39:58.430

我认为你应该 @import .css 文件而不是 .less 文件到你的样式表中。LESS 只会编译样式表。它不会将 .css 中的文档更改为 .less。

希望我能帮上忙。如果我这样做了，请说出来。*

# vb.net - Visual Studio 2010 中的智能感知

> ID：11223827
> 
> 赞同：0
> 
> 时间：2012-06-27T10:10:39.683
> 
> 标签：vb.net

由于某种原因，当我在 With 语句中使用 Aggregate Lambda 表达式时，vb.net 中的 Intellisense 停止工作。

```
With Me.SalesPackage
    .WebLinks = Sales.Where(Function(f) f.Current.BookerWeb > 0).Count
    .WebAmount = Aggregate o In Sales.Where(Function(f) f.Current.WebBooker > 0) Into 
    Sum(o.Current.WebPrice)
End With 
```

如果我在 .WebLinks 和 .WebAmount 之间插入新行并开始输入，它会起作用。但如果我在 Aggregate 语句之后这样做，它就行不通了......

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:12:36.757

根据我的经验，当 Intellisense 停止工作时，Linq 表达式中肯定存在语法错误。

# ajax - jQuery递归ajax轮询使用setTimeout控制轮询间隔

> ID：11223829
> 
> 赞同：5
> 
> 时间：2012-06-27T10:10:46.050
> 
> 标签：ajax, jquery, ajax-polling

```
$(document).ready(function() {
    (function poll() {
        setTimeout(function() {
            $.ajax({
                url: "/project1/api/getAllUsers",
                type: "GET",
                success: function(data) {
                    console.log("polling");
                },
                dataType: "json",
                complete: poll,
                timeout: 5000
            }), 5000
        });
    })();
});​ 
```

这只是尽可能快地执行服务器可以响应，但我希望它只会每 5 秒轮询一次。有什么建议么？

**编辑：**我应该补充一点，在请求完成后 5 秒会更好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T11:41:03.300

看来您已经设法将`setTimeout`延迟参数写在错误的位置。

```
$(document).ready(function() {
  (function poll() {
    setTimeout(function() {
        $.ajax({
            url: "/project1/api/getAllUsers",
            type: "GET",
            success: function(data) {
                console.log("polling");
            },
            dataType: "json",
            complete: poll,
            timeout: 5000
        }) //, 5000  <-- oops.
    }, 5000); // <-- should be here instead
  })();
});​ 
```

如果您遵循大括号，您会看到您正在调用`setTimeout`：

```
setTimeout(function () {
    $.ajax(), 5000
}) 
```

并且应该是

```
setTimeout(function () {
    $.ajax();
}, 5000) 
```

这应该在前一个完成后 5 秒调用 AJAX 轮询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:16:01.693

如果它应该每 5 秒轮询一次，而不一定是在完成最后一个请求后 5 秒，您可以使用 setInterval。不知道这是否可以接受，但这会使递归变得不必要。

```
function poll() {

            $.ajax({
                url: "/project1/api/getAllUsers",
                type: "GET",
                success: function(data) {
                    console.log("polling");
                },
                dataType: "json"
        });
    }

setInterval(poll, 5000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-01T13:42:15.967

如果您想使用 jQuery 的 promise 语法，而不是回调语法，这是另一种整洁的方式。

```
function poll() {
    $.get('http://your-api-endpoint.com')
    .done(function() {
        // 200 - OK response
    })
    .fail(function() {
        // Error Response
    })
    .always(function () {
        setTimeout(function() {
            poll();
        }, 5000);
    });
}

poll(); 
```

# php - 使用 Clang 编译 PHP 堆栈

> ID：11223830
> 
> 赞同：1
> 
> 时间：2012-06-27T10:10:48.110
> 
> 标签：php, llvm, clang

是否有可能编译一个完整的 PHP 堆栈——比如 Apache、PHP、Postgres 和足够多的更常用的库来覆盖 90% 的站点——将 Clang 编译到 LLVM 位码中？如果是这样，是否有任何关于如何从开箱即用的 Ubuntu 设置开始的说明？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T13:34:24.633

Apache、PHP 和 Postgres 可以通过 Clang 编译，这意味着它们也可以编译成 LLVM 位码。我不能给你具体的步骤来实现这一点，因为它取决于构建系统。无论如何，这涉及将`-femit-llvm`标志添加到编译行，并且可能`llvm-link`用作链接器。

请注意，至少 PHP 具有内联汇编代码，您的分析器可能会阻塞这些代码。

**更新**：

使用任意构建系统将代码编译到 LLVM IR 的好工具是[gllvm](https://github.com/SRI-CSL/gllvm)。简而言之，您只需使用`gclang`/`gclang++`而不是`gcc/g++`然后`get-bc`在生成的二进制文件上运行。

# vim - vim：突出显示折叠仅更改背景颜色

> ID：11223835
> 
> 赞同：6
> 
> 时间：2012-06-27T10:11:04.747
> 
> 标签：vim, syntax-highlighting

我已经注释掉了

```
"hi Fold … 
```

在我当前的 vim-colorscheme（xoria256 修改）中的行，但是当我编辑时仍然有（更丑陋的）语法突出显示。我查看了特定文件类型的语法文件 - 但也没有折叠突出显示。现在我不知道在哪里寻找“默认语法突出显示”。

最后，我只想按照语法指定的前景色进行折叠，而只是背景发生了变化。也许我想了很多，有一种简单的方法可以做到这一点。

ps：我试图离开`guifg`和`ctermfg`部分没有成功。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T11:38:46.650

恐怕这样做是不可能的（至少不接触 Vim 的源代码）。折叠线中的文本是计算出来的，而不是文件的一部分，这意味着它不会像文本/代码的其余部分一样被处理，它只会应用于`Folded`突出显示组。这就是为什么在注释掉该行时会得到单一的前景色`hi Folded`。

# java - Java内存泄漏和垃圾收集，

> ID：11223841
> 
> 赞同：0
> 
> 时间：2012-06-27T10:11:23.167
> 
> 标签：java, memory-management, memory-leaks, garbage-collection

这个问题让我自己和我的同事都感到困惑。在我编写的程序中，我遇到了内存泄漏。每次迭代都将 var Platform 重新分配给一个新对象。但由于某种原因，旧平台对象没有被 gc 清理，并且经过多次迭代后堆溢出：

你们中的一些人可能意识到这是一个 PSO 算法。但是对于那些不使用这个函数的人来说，这个函数必须被评估 1000 次，而且 basicplatform 是一个数据非常广泛的对象，所以多个实例最终会导致内存溢出，只是为了提供一点上下文。

错误代码：

```
public class Fitness implements FitnessFunction{

protected Platform platform;

public Fitness(){

}

public Fitness(Platform platform) {
    this.platform = platform;
}

@Override
public double fitness(Particle p) {

    try {
        platform = new BasicPlatform("testData.csv");
    } catch (Exception e) {
        e.printStackTrace();
    }

    platform.startSimulation();
    double prof = platform.getFitness();
    v.clear();
    if(prof != 0)
    return -prof;
    return 0;
}

} 
```

在对为什么会有泄漏感到困惑之后，我的朋友向我展示了这个解决方案，他以前在类似的情况下使用过这个解决方案：

```
public class TradingRuleFitness implements FitnessFunction{

protected Platform platform;

public Fitness(){

}

public Fitness(Platform platform) {
    this.platform = platform;
}

@Override
public double fitness(Particle p) {

    Vector<Platform> v = new Vector<Platform>();
    try {
        //platform = new BasicPlatform("testData.csv");
        v.add(new BasicPlatform("testData.csv"));
    } catch (Exception e) {
        e.printStackTrace();
    }

        double prof = v.get(0).getFitness;
        v.clear();
        if(prof != 0)
        return -prof;
        return 0;
    }

} 
```

几乎完全相同，但这次不是重新分配 var 平台，而是在向量内创建一个新对象，并在完成后将其删除。这种方法似乎强制 gc 进行清理。

问题是为什么这种向量方法有效，但不是技术上应该的原始方法，是否有更清洁的解决方案？

ps 我已经清理了一些不必要的代码，因为问题是关于对象的创建和删除

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:16:02.017

在第一种情况下，如果您的 Fitness 对象被保留，那么您的 Platform 对象也将作为字段保留。

在第二种情况下，您的 Platform 保存在局部变量中，并在`fitness`返回时被丢弃。

它不一定是 Vector，它可以是一个普通的局部变量。

尝试在两个示例中删除该字段，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:15:59.297

似乎在第一个示例中，您还清除了向量本身的“不必要的代码位”:)

很难给出这样的正确答案......

# javascript - Jquery 对话框在 IE 中完美运行，但在 FF 和 Chrome 中无法运行

> ID：11223842
> 
> 赞同：0
> 
> 时间：2012-06-27T10:11:29.407
> 
> 标签：javascript, jquery

这是我的简单 jquery，它在 IE 中运行良好，但在 FF 和 Chrome 中无法运行

```
function publishRedirects() {
    if (window.confirm("Are you sure want to publish the redirects?")) {
        callJquery();
    }
}

function callJquery() {
    $('#btnPublish').click(function () {
        $("#dialog").attr('title', 'Publishing').text('Publishing Please Wait').append("<img src='../images/loading11.gif' id='myNewImage' />").dialog({
            draggable: false,
            resizable: false,
            modal: true,
            closeOnEscape: false,
            open: function (event, ui) {
                $("a.ui-dialog-titlebar-close").remove();
            }
        });
    });
} 
```

这是我的 HTML：

```
<body> <div id="dialog"></div> <input name="btnPublish" class="button1" type="button" id="btnPublish" value="Publish" onClick="publishRedirects()"> <script type="text/javascript" src="../script/jquery.js"></script> <script type="text/javascript" src="../script/jquery-ui.js"></script> </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:20:14.390

我认为这是因为您将单击事件分配给 btnPublish 而不是执行该功能。如果在单击按钮时调用 publishRedirects() 并且您希望 callJquery 中的代码在用户确认对话框后执行，​​它应该看起来像这样：（注意删除的附加到单击事件）

```
 function callJquery(){
         var obj= $("#dialog");
         obj.attr('title','Publishing');
         obj.text('Publishing Please Wait');
         obj.append("<img src='../images/loading11.gif' id='myNewImage' />");
         obj.dialog({ 
                draggable: false,
                resizable: false,
                modal: true,
                closeOnEscape: false,
                open: function(event, ui) {
                       $("a.ui-dialog-titlebar-close").remove();
                  }
                 });

    } 
```

# apache-flex - Flex 子应用：App sdk 3.5 内 App sdk 4.5

> ID：11223845
> 
> 赞同：0
> 
> 时间：2012-06-27T10:11:41.223
> 
> 标签：apache-flex, subapplication

我有一个在 Flex 4.5 中编译的应用程序并加载（使用 SWFLoader）在 Flex 3.5 中编译的其他应用程序，它工作正常，但是当我执行语句“SystemManager（myLoader.content）”时，系统显示错误：

```
TypeError: Error #1034: Error de conversión forzada: no se puede convertir _AnalizaOrganigramaTest_mx_managers_SystemManager@8450eb9 en mx.managers.SystemManager.
at AnaTestModule/_mlCargada()[C:\eanaliza\branch\peticiones3_p9184\40 flex\flex\AnaTestModule\src\AnaTestModule.mxml:28]
at AnaTestModule/__myLoader_complete()[C:\eanaliza\branch\peticiones3_p9184\40 flex\flex\AnaTestModule\src\AnaTestModule.mxml:43]
at flash.events::EventDispatcher/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at mx.core::UIComponent/dispatchEvent()[E:\dev\4.5.1\frameworks\projects\framework\src\mx\core\UIComponent.as:13128]
at mx.controls::SWFLoader/http://www.adobe.com/2006/flex/mx/internal::contentLoaderInfo_completeEventHandler()[E:\dev\4.5.1\frameworks\projects\framework\src\mx\controls\SWFLoader.as:2292] 
```

这是 Flex 4.5 应用程序代码：

```
<fx:Script>
    <![CDATA[
        import mx.managers.SystemManager;

        [Bindable]
        public var loadedSM:SystemManager;

        protected function _mlInit():void
        {
            myLoader.source = "/analiza_peticiones3_p9184/AnalizaOrganigramaTest-debug/AnalizaOrganigramaTest.swf";
            myLoader.load();
        }
        private function _mlCargada():void
        {
            loadedSM = SystemManager(myLoader.content);             
        }
    ]]>
</fx:Script>

<s:SWFLoader id="myLoader"  
             loadForCompatibility="true" 
             complete="_mlCargada();" 
             maintainAspectRatio="true" 
             scaleContent="false"  
                 /> 
```

谁能帮我？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:34:44.937

我一直在做类似的事情。尝试使用 GreenSock 的 LoaderMax。 [http://www.greensock.com/loadermax/](http://www.greensock.com/loadermax/)

我在我的中使用了一个多版本的子应用程序并尝试了 SystemManager，这导致无处可去，我又回到了 LoaderMax。使用 SystemManager 时，我遇到了太多 RSL 加载错误和诸如此类的错误。

您可能还需要[编组支持。](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7f0c.html)

父应用程序是 SDK 4.5，它与另一个应用程序 (4.6) 共享两个 SWC 文件 (4.5) 父应用程序将一个 SDK 4.1 应用程序加载到自身中。

这在很大程度上是有效的，我仍然在解决链接资产和相对路径的问题。但总而言之，应用程序加载。

**在父应用程序视图屏幕中加载子应用程序：**

```
[Bindable] private var childAppLink= "http://myserver.com/AppRoot/@@version/controls/Application.swf";
[Bindable] private var altChildAppLink:String = "/AppRoot/@@version/controls/Application.swf";
[Bindable] private var loaderQueue:LoaderMax = new LoaderMax({name:"ChildApp4_0_Loader",onProgress:handleLoaderProgress,onComplete:handleLoaderComplete,onError:handleLoadingError});

protected function loadUsingLoaderMax():void
        {
            childAppLink= StringUtils.replace(childAppLink,'@@version',cm.s.childAppVersion);
            altChildAppLink= StringUtils.replace(altChildAppLink,'@@version',cm.s.childAppVersion);

            var swfvars:SWFLoaderVars = new SWFLoaderVars();
            var loaderRequest:URLRequest = new URLRequest();
            var loaderVars:URLVariables = new URLVariables();
            var loaderContexts:LoaderContext = new LoaderContext();

            LoaderMax.contentDisplayClass = FlexContentDisplay;

            loaderVars.DEBUG            = cm.s.debug;
            loaderVars.inChildMode      = "true"; //set this as a string!
            loaderVars.bpu              = String(u.userId + ';' + u.currentLocationId);
            loaderVars.sv               = cm.s.childAppVersion;
            loaderVars.KEYWORD          = 'XXXXX';

            loaderContexts.applicationDomain = new ApplicationDomain();

            if(Security.sandboxType == Security.REMOTE)
                loaderContexts.securityDomain = SecurityDomain.currentDomain;

            loaderRequest.url = childAppLink;
            loaderRequest.data = loaderVars;
            loaderRequest.method = URLRequestMethod.GET;

            swfvars.name("ChildApplication_4_0");
            swfvars.estimatedBytes(410000000);
            swfvars.container(ChildAppPH);
            swfvars.x(0);
            swfvars.autoPlay(true);
            swfvars.scaleMode("none");
            swfvars.alternateURL(altChildAppLink);
            swfvars.context(loaderContexts);

            loaderQueue.append(new com.greensock.loading.SWFLoader(loaderRequest,swfvars) );

            this.addEventListener("mx.managers.SystemManager.isBootstrapRoot", systemManagerHandler);
            this.addEventListener("mx.managers.SystemManager.isStageRoot", systemManagerHandler);
            ShoplandPlaceholder.systemManager.addEventListener(FlexEvent.CREATION_COMPLETE,handleLoaderComplete);

            loaderQueue.load();
            ChildAppPH.visible = false;
            ChildAppPH.alpha = 0;
        }

protected function systemManagerHandler(event:Event):void
            {
                event.preventDefault(); 
            } 
```

以及占位符的 MXML：

```
<s:SWFLoader id="ChildAppPH" width="1010" height="610" verticalCenter="305" horizontalCenter="505" top="10" /> 
```

子应用程序设置为处理一些新的 flashvars (this.parameters)，告诉它在加载过程中要做什么。子应用程序是独立的，可以在没有它的情况下运行，因此它现在已成为一个双重用途的应用程序。1）独立，2）子应用程序（inChildMode）

# asp.net-mvc - ASP.NET MVC 迁移母版页 - Web 控制逻辑问题

> ID：11223847
> 
> 赞同：0
> 
> 时间：2012-06-27T10:11:44.173
> 
> 标签：asp.net-mvc, controls, migration, master-pages, webforms

我正在尝试将现有的 ASP.NET Webforms 3.5 应用程序迁移到 ASP.NET MVC 3 应用程序中。这意味着，我尝试使用控制器逻辑和剃刀视图来转换现有的带有 web 控件和代码隐藏的 .aspx 页面。目前，我专注于母版页（为所有其他剃须刀视图获取模拟 layout.cshtml）。例如，我用局部视图替换了诸如 asp:Menu、asp:LoginView 之类的控件，并使用 @Html.Action 来调用控制器操作，运行之前已在该母版页的代码隐藏中的一些代码并返回该局部视图。

但是现在我迷失了许多已设置为/可见的母版页的 Web 控件，具体取决于背后的代码。例如，母版页中有两个 asp:panels 已根据访问的页面切换/可见。问题是在 razor 视图中我没有 Web 控件，而在控制器中我无法设置属性/属性（如私有 int 计数器；）。所以我不知道如何继续...

我希望你对这种情况有一些想法或经验。请询问是否缺少任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:39:42.920

您可以在 Controller 中设置 Model 或 ViewData 的属性，然后在 Razor 视图中通过 @if 使用这些属性

例如

在控制器上：

```
public ActionResult Index()
{
    ViewBag.Foo = IsThisFoo();
    View();
} 
```

在视图中：

```
@if (ViewBag.Foo) {
    <p>This is foo</p>
}
else
{
    <p>This is bar</p>
} 
```

注意：最佳实践是将其作为视图的强类型模型的一部分

# c - 多边形的交集

> ID：11223849
> 
> 赞同：7
> 
> 时间：2012-06-27T10:11:51.947
> 
> 标签：c, algorithm, polygons

给出了两个多边形。如何确定一个多边形是在另一个多边形的内部、外部还是与另一个多边形相交？多边形可以是凹的或凸的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:50:43.277

您想将分离轴定理用于凸多边形。基本上，对于每个多边形的每个面，您将每个多边形投影到该面的法线上，然后查看这些投影是否相交。

您可以执行各种技巧来减少必须执行的这些计算的数量 - 例如，您可以在对象周围绘制一个矩形，并假设如果两个对象的矩形不相交，它们本身也不相交。（这更容易，因为检查这些框的交集的计算成本较低，并且通常非常直观。）

凹多边形更难。我认为您可以将多边形分解为一组凸多边形并尝试检查交叉点的每个组合，但我认为自己在这方面的技能不足以尝试它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T00:08:02.523

通常，此类问题可以通过扫描线算法轻松解决。然而，使用扫描线方法的主要目的和好处是，当输入由两组*相对较大*的多边形组成时，它可以有效地解决问题。一旦实施扫描线解决方案，如果需要，它也可以有效地应用于一对多边形。也许你应该考虑朝那个方向前进，以防你将来需要解决一个大问题。

但是，如果您确定需要两个且仅两个多边形的解决方案，则可以通过顺序点对多边形和分段对多边形测试来解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:10:34.403

这是一个简单的算法，可以知道给定点是在给定多边形内部还是外部：

```
bool isInside(point a, polygon B)
{
    double angle = 0;
    for(int i = 0; i < B.nbVertices(); i++)
    {
        angle += angle(B[i],a,B[i+1]);
    }
    return (abs(angle) > pi);
} 
```

*   如果 A 的线段与 B 的线段相交，则这两个多边形彼此相交。
*   否则，如果多边形 A 的所有点都在多边形 B 内，则 A 在 B 内。
*   否则，如果多边形 B 的所有点都在多边形 A 内，则 B 在 A 内。
*   否则，如果多边形 A 的所有点都在多边形 B 之外，那么 A 在 B 之外。
*   否则这两个多边形相互交叉。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T00:05:03.240

有一种简单的方法可以检查一个点是否位于多边形中。根据这篇[Wikipedia 文章](http://en.wikipedia.org/wiki/Point_in_polygon#Ray_casting_algorithm)，它被称为光线投射算法。

该算法的基本思想是，您从正在测试的点向某个任意方向投射光线，并计算它与多边形相交的边数。如果这个数字是偶数，则该点位于多边形之外，否则，如果它是奇数，则该点位于多边形内。

这个算法有很多问题我不会深入研究（它们在我之前链接的 Wikipedia 文章中讨论过），但它们是我称这个算法为 easyish 的原因。但是为了给您一个想法，您必须处理涉及光线与顶点相交的极端情况，光线平行运行并与边缘相交以及与靠近边缘的点相交的数值稳定性问题。

然后，您可以按照 Thomas 在他的回答中描述的方式使用此方法来测试两个多边形是否相交。这应该为您提供一个`O(NM)`算法，其中两个多边形分别具有`N`和`M`顶点。

# tinymce - 排序时禁用刷新 iframe

> ID：11223853
> 
> 赞同：3
> 
> 时间：2012-06-27T10:12:07.733
> 
> 标签：tinymce, jquery-ui-sortable

我有文本区域列表。对于 textareas，我使用 tinyMCE 编辑器。当我开始对这个 textareas 列表进行排序时，这些 textareas 中的所有内容都消失了。我的意思是 iframe 不会刷新它们的内容。

```
<ul id="sortable">
<li class="ui-state-default"><br />
    <textarea id="1"></textarea>
</li>
<li class="ui-state-default"><br />
    <textarea name="2" id="2"></textarea>
</li></ul> 
```

我的.js 文件

```
 tinyMCE.init({
    mode : 'textareas',
    theme : 'advanced',
    theme_advanced_buttons1 : 'save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect',
    theme_advanced_buttons2 : '',
    theme_advanced_buttons3 : '',       
    theme_advanced_toolbar_location : 'top',
    theme_advanced_toolbar_align : 'left',
    theme_advanced_statusbar_location : 'bottom',
    theme_advanced_resizing : false
});
    $( "#sortable" ).sortable({

    }); 
```

TinyMCE 工作完美，直到我拖动放置此文本区域的 <li>。<iframe> 内的代码消失了。
我可以以某种方式阻止刷新 iframe 内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:46:03.483

这里的问题是你不能轻易地在 dom 中移动编辑器。解决方案是首先关闭 tinymce 实例（需要 id！）

```
tinymce.execCommand('mceRemoveControl',true,'editor_id'); 
```

然后执行 DOM 操作并重新初始化 tinymce 实例

```
tinymce.execCommand('mceAddControl',true,'editor_id'); 
```

# android - 如何配置夏洛克动作栏+地图插件？

> ID：11223855
> 
> 赞同：4
> 
> 时间：2012-06-27T10:12:15.667
> 
> 标签：android, actionbarsherlock

因为将 Sherlock Action Bar 集成到我的 Android 项目中需要花费大量时间（使用它的地图插件！），所以我建议在这里描述我的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T10:12:17.540

第一步包括创建一个库项目，第二步创建您自己的项目，该项目将使用操作栏，第三步允许使用地图插件。

I - ActionBar SHerlock 项目：

1.  下载 actionbarSherlock zip 文件
2.  将现有 Android 代码导入 Workspace（适用于 ActionBar 4.2.0）。选择要导入的目录“库”。创建了一个“库”项目。
3.  使用 "android:minSdkVersion="7" android:targetSdkVersion="16" 设置清单
4.  导入兼容库：右键项目>Android工具>添加支持库
5.  使用以下项目属性配置此项目：

    *   android 构建目标：>= android 4.0
    *   检查“是图书馆”

II - 你的项目：

1.  创建使用 Action Bar sherlock 的项目
2.  将 Android Build Target 设置为 >= Android 4.0（选择与上一个项目相同的目标！）
3.  使用 "android:minSdkVersion="7" android:targetSdkVersion="16" 设置清单
4.  将上一个项目“ActionBarSherlock”添加为库：项目 > 属性 > Android > 添加...（底部面板）
5.  更改您的代码以使用 ActionBar 类

III - 使用 Action Bar Sherlock 的 actionbarsherlock-plugin-maps-4.1.0.jar 插件：

1.  将actionbarsherlock-plugin-maps-4.1.0.jar（从zip文件中获得）添加到libs目录下的项目“ActionBarSherlock”中
2.  配置项目：项目>属性>构建路径>库：

    ```
    - add actionbarsherlock-plugin-maps-4.1.0.jar 
    ```

3.  将构建目标设置为 Google map API >4.0（对您的项目执行相同的操作 - 相同的目标！）

4.  将“actionbarsherlock-plugin-maps-4.1.0.jar”库添加到新项目的构建路径

我希望它也对你有用。

# shell - 在 Cygwin 中设置环境变量

> ID：11223856
> 
> 赞同：0
> 
> 时间：2012-06-27T10:12:17.383
> 
> 标签：shell, variables, cygwin, environment-variables

我一直在尝试使用命令在 Cygwin 中设置环境变量`export PRIMOSBASE=/directory/for/primosfiles`。

当我使用命令检查变量时，`echo $PRIMOSBASE`它会显示 /directory/for/primosfiles。希望这意味着设置了环境变量。

但是当我尝试为 /directory/for/primosfiles 运行 shell 脚本（primos）时，它显示

```
./primos: line 8: /prilaunch.pl: No such file or directory
chmod: failed to get attributes of `step1.sh': No such file or directory 
```

这意味着我还没有设置 PRIMOSBASE 环境。谁能告诉我我哪里出错了...

谢谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:37:04.080

跑

```
echo "export PRIMOSBASE=/directory/for/primosfiles" >> ~/.bashrc 
```

将命令附加到`.bashrc`文件末尾，以便在每次使用 Cygwin 时设置变量。然后运行

```
source ~/.bashrc 
```

使其立即生效。

**注意：**确保使用双括号 ( `>>`) 进行附加。`.bashrc`备份以防万一可能是个好主意。如果您对 I/O 重定向不满意，另一种方法是使用编辑`.bashrc`器进行编辑。我认为`vim`是 Cygwin 中的默认工具之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-09T11:28:24.943

我在尝试让 ANDROID_HOME 在 Cygwin 窗口中工作时遇到了类似的问题。当我使用 linux 路径分隔符时，如下 `ANDROID_HOME=/cygdrive/c/Users/User/AppData/Local/Android/sdk`我的 gradlew 构建脚本抱怨它无法在`ANDROID_HOME`.

我最终发现我必须将我的环境变量设置为 Windows 格式，包括 Windows 路径分隔符`'\'`，如下 `ANDROID_HOME=C:\Users\User\AppData\Local\Android\sdk`

注意：Windows 中设置的 PATH 和其他几个环境变量被转换为 Linux 格式。我希望这可以帮助其他想要/需要使用 Cygwin + Windows + 本质上需要环境变量的 Windows 程序的人。

# objective-c - 不正确的对象的引用计数递减不正确

> ID：11223858
> 
> 赞同：0
> 
> 时间：2012-06-27T10:12:27.010
> 
> 标签：objective-c, memory-leaks

在分析下面的代码时遇到问题：

```
NSDate *formatterDate = [inputFormatter dateFromString:smBook.time_limit];
formatterDate = [formatterDate initWithTimeInterval:1*24*60*60 sinceDate:formatterDate]; 
```

消息是： 调用者此时不拥有的对象的引用计数不正确递减。

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:16:34.423

更改以下行：

```
formatterDate = [formatterDate initWithTimeInterval:1*24*60*60 sinceDate:formatterDate]; 
```

用这条线：

```
NSDate *newDate = [[NSDate alloc] initWithTimeInterval:1*24*60*60 sinceDate:formatterDate]; 
```

完成操作后释放此 newDate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:18:03.003

似乎上述行中没有出现消息，请检查整个类或从项目的编辑方案中启用僵尸对象

# c# - 在 C# 中使用 * 正则表达式搜索文件名

> ID：11223860
> 
> 赞同：0
> 
> 时间：2012-06-27T10:12:41.650
> 
> 标签：c#, windows-phone-7

我在 WP7 隔离存储中有一个文件列表，文件名中有空格字符，例如“我的文件名 1.dat”。我想在字符串 [] 中获取所有这些文件名。我使用了以下代码，但没有得到文件名：

```
string searchPattern = "FolderName" + "\\*";
string[] fileList = store.GetFileNames(searchPattern); 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:29:09.693

从您的 FolderName 变量中取出引号以使其成为：

字符串搜索模式 = 文件夹名称 + "\*";

# java - 如何从 Java 中的文件创建 ByteArrayInputStream？

> ID：11223868
> 
> 赞同：29
> 
> 时间：2012-06-27T10:12:56.817
> 
> 标签：java, arrays, bytebuffer, bytearrayinputstream

我有一个文件，可以是 ZIP、RAR、txt、CSV、doc 等任何文件。我想从中创建一个*ByteArrayInputStream*。我正在使用它通过Apache Commons Net的*FTPClient*
将文件上传到 FTP 。

 ***有人知道怎么做吗？**

例如：

```
String data = "hdfhdfhdfhd";
ByteArrayInputStream in = new ByteArrayInputStream(data.getBytes()); 
```

我的代码：

```
public static ByteArrayInputStream retrieveByteArrayInputStream(File file) {
    ByteArrayInputStream in;

    return in;     
} 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-27T10:18:07.653

使用[`FileUtils#readFileToByteArray(File)`](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#readFileToByteArray%28java.io.File%29)来自[Apache Commons IO](http://commons.apache.org/io)，然后`ByteArrayInputStream`使用[`ByteArrayInputStream(byte[])`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ByteArrayInputStream.html#ByteArrayInputStream%28byte[]%29)构造函数创建。

```
public static ByteArrayInputStream retrieveByteArrayInputStream(File file) {
    return new ByteArrayInputStream(FileUtils.readFileToByteArray(file));
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-27T10:19:56.667

一般的想法是 File 会产生 a`FileInputStream`和 a `byte[]`a `ByteArrayInputStream`。两者都实现`InputStream`，因此它们应该与`InputStream`用作参数的任何方法兼容。

当然可以将所有文件内容放入 a`ByteArrayInputStream`中：

1.  将完整文件读入`byte[]`; Java 版本 >= 7 包含一个[方便的方法`readAllBytes`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#readAllBytes%28java.nio.file.Path%29)，用于从文件中读取所有数据；
2.  围绕文件内容创建一个`ByteArrayInputStream`，现在在内存中。

请注意，对于非常大的文件，这可能不是最佳解决方案 - 所有文件将同时存储在内存中。为工作使用正确的流很重要。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-27T10:21:37.760

A`ByteArrayInputStream`是`InputStream`字节数组的包装器。这意味着您必须将文件完全读入 a `byte[]`，然后使用其中一个`ByteArrayInputStream`构造函数。

你能提供更多关于你在做什么的细节`ByteArrayInputStream`吗？围绕您要实现的目标可能有更好的方法。

**编辑：**
如果您使用 Apache FTPClient 上传，您只需要一个`InputStream`. 你可以这样做;

```
String remote = "whatever";
InputStream is = new FileInputStream(new File("your file"));
ftpClient.storeFile(remote, is); 
```

您当然应该记住在完成后关闭输入流。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-27T10:21:05.730

这不是您要问的，而是一种以字节为单位读取文件的快速方法。

```
File file = new File(yourFileName);
RandomAccessFile ra = new RandomAccessFile(yourFileName, "rw"):
byte[] b = new byte[(int)file.length()];
try {
    ra.read(b);
} catch(Exception e) {
    e.printStackTrace();
}

//Then iterate through b 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-01T02:14:42.697

This piece of code comes handy:

```
private static byte[] readContentIntoByteArray(File file)
{
  FileInputStream fileInputStream = null;
  byte[] bFile = new byte[(int) file.length()];
  try
  {
     //convert file into array of bytes
     fileInputStream = new FileInputStream(file);
     fileInputStream.read(bFile);
     fileInputStream.close();
  }
  catch (Exception e)
  {
     e.printStackTrace();
  }
  return bFile;
} 
```

Reference: [http://howtodoinjava.com/2014/11/04/how-to-read-file-content-into-byte-array-in-java/](http://howtodoinjava.com/2014/11/04/how-to-read-file-content-into-byte-array-in-java/)*

# php - 在 PHP 中使用 href 下载 XML 文件的下载链接

> ID：11223871
> 
> 赞同：0
> 
> 时间：2012-06-27T10:13:16.877
> 
> 标签：php, xml

需要一个小的基本帮助，我正在使用用户在表单中提交的参数动态创建一个 XML 文件。提交表单后，我将跳转到 PHP 代码，并且我想提供一个 href 链接以下载/显示创建的 XML 文件。

这是我的示例代码：

```
<?php

$outputForm = 1;   

if(isset($_POST['submit'])){
$outputForm = 0

//Function to generate XML file which works as expected, so that XML file is there
createXML($folderPath, $albumName, $dateOfEntry);

//My XML file is named as albumName.xml and stored in the folderPath as specified
echo '<a href = "' .  $folderPath . $albumName. '.xml' . '">XML FILE</a>';
}
 else{
            $outputForm = 1;
        }
        if($outputForm == 1)
        {     
       //Here follows my input form
     <?php
       }
     ?>

FYI: 
$folderPath = 'c:/htdocs/output/';
Therefore:
$folderPath . $albumName = 'c:/htdocs/output/jessi';
In this example xml file name:
jessi.xml 
```

我可以在输出中看到 href 链接，但是当我单击它时它什么也没做。当我将光标移到“XML 文件”链接上时，我还可以看到 xml 文件的完整路径。

任何想法如何在 php 脚本中嵌入 href 链接以下载/显示 XML 文件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:49:13.990

问题是，您正在通过使用 http 协议（无论是在本地服务器还是远程）访问代码来运行代码，并且您尝试访问的文件是本地的，并且您正在使用[文件 URI 方案](http://en.wikipedia.org/wiki/File_URI_scheme)访问本地 xml 文件所以，浏览器是可能出于某种安全原因，限制您访问该文件。如果您尝试通过直接在浏览器中打开 html 文件（而不是通过从本地主机运行它）来访问文件，您将能够使用该链接访问该文件位置，浏览器不会限制您。但是您将无法执行 php 代码。

因此，您可以使用相对路径或从本地主机的相对路径引用文件，为此使用 http URI 方案，浏览器不会限制您打开本地文件。

# c# - C# 套接字编程

> ID：11223872
> 
> 赞同：1
> 
> 时间：2012-06-27T10:13:18.073
> 
> 标签：c#, sockets

这两个 php 函数的等价物是什么？

```
socket_create(AF_INET, SOCK_STREAM, SOL_TCP)  

socket_read($socketResource, $Port) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:19:06.040

示例：1）

```
 Socket s = new Socket(AddressFamily.InterNetwork, 
    SocketType.Stream, ProtocolType.Tcp); 
```

2)

```
 s.Connect(host, port) 
```

如需更多知识，请使用链接[http://msdn.microsoft.com/en-us/library/attbb8f5](http://msdn.microsoft.com/en-us/library/attbb8f5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:19:34.307

通读这个。希望能帮助到你。

[c# Socket 类](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T10:17:33.403

查看[.Net Socket 类](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T10:19:11.073

看看以下资源：

[如何创建一个套接字](http://msdn.microsoft.com/en-us/library/1w48w47c.aspx)

[套接字类](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx)

希望它们有用。

# jquery - 按 ID 显示/隐藏/切换多个 div？

> ID：11223873
> 
> 赞同：2
> 
> 时间：2012-06-27T10:13:19.013
> 
> 标签：jquery, toggle, slidetoggle

stackoverflow 的好人帮助我完成了部分工作，现在我只需要在终点线上稍微推动一下。

我需要一个切换按钮，它在单击时打开 div（向下滑动），然后在单击时关闭，也可以使用活动类。

但是，如果您单击另一个切换按钮，子 div 会打开并关闭前一个，如果它是打开的。

所以基本上没有一个打开的 div 可以同时打开，一次只能打开一个。

我需要通过锚 id 完成此操作，因为打开 div 与切换按钮无关（它在页面下方）

到目前为止，这不起作用，但所有的 html 都在那里.. [http://jsfiddle.net/CkTRa/398/](http://jsfiddle.net/CkTRa/398/)

非常感谢你，如果有人能帮忙，搜索了高低，我发现最近的是这个[http://andylangton.co.uk/articles/javascript/jquery-show-hide-multiple-elements/](http://andylangton.co.uk/articles/javascript/jquery-show-hide-multiple-elements/)但它还没有关闭当您单击一个新的时打开 div。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T10:27:17.547

**[演示](http://jsfiddle.net/nawazhi/CkTRa/409/)**

```
 $("a").click(function(){
    var myelement = $(this).attr("href")
    $(myelement).slideToggle("slow");
    $(".toggle:visible").not(myelement).hide();

  }); 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T10:28:37.223

如其他答案中所述，要使 next() 工作，必须更改布局（参见小提琴）之后，要先关闭所有切换 div，您可以使用：

```
$(".toggle").slideUp("slow"); 
```

但为了防止干扰扩展的 div，可以使用 not 来排除该 div：

```
var div = $(this).next(".toggle");
$(".toggle").not(div).slideUp("slow");
div.slideToggle("slow"); 
```

组合小提琴：http: [//jsfiddle.net/CkTRa/402/](http://jsfiddle.net/CkTRa/402/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T10:18:28.673

[这是一个 jsFiddle](http://jsfiddle.net/CkTRa/400/)，它根据锚标记中的 href 获取正确的 div：

基本上：

```
 $( $(this).find("a").attr('href') ).slideToggle("slow"); 
```

编辑：

[jsFiddle 隐藏任何打开的，不是当前的](http://jsfiddle.net/CkTRa/401/)

基本上：

```
var divToToggle = $( $(this).find("a").attr('href') );
$(".toggle:visible").not(divToToggle).hide();
divToToggle.slideToggle("slow"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-13T07:50:33.970

```
<h3 class = "trigger" href="#box1">Heading 1</h3>. 
```

优于：

```
<h3 class = "trigger"><a href="#box1">Heading 1</a></h3>. 
```

You get display trouble with the second option when the content slides back.

# android - 在 Android 地图上显示标记注释

> ID：11223880
> 
> 赞同：0
> 
> 时间：2012-06-27T10:13:58.950
> 
> 标签：android, google-maps, marker, popupwindow

我正在寻找在单击标记时显示注释的提示/方式。我扩展了 ItemizedOverlay 以显示标记并实现 onTad(int index) 以在点击标记时做出反应。现在我想像 iphone 一样弹出一个小窗口（[示例](http://developer.anscamobile.com/forum/2012/01/19/google-maps-marker-clickable-button)）......我找到了 android-mapviewballoons，但它不满足我的要求，因为它将地图和弹出窗口居中在中间屏幕。我找到了另一个库（[example2](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)( 我知道这不适用，因为视图的位置与屏幕有关，而标记位置与地图的坐标有关...

我的想法是为 popupWIdow 创建另一个 ItemizedOverlay 并让它指向点击标记（geopoint）的相同坐标。

# mysql - 不是通过内部连接加入两个查询

> ID：11223884
> 
> 赞同：3
> 
> 时间：2012-06-27T10:14:15.063
> 
> 标签：mysql, sql, join

```
$query1 = "SELECT id, ac, aa FROM tbl_ac WHERE ac = ? AND aa = ?"; 
```

和

```
$query2 = "SELECT id, cc FROM tbl_cc WHERE cc = ?"; 
```

仅在一个查询中，这两个查询的最佳等效项是什么？我不能使用`INNER JOIN`它，因为每个表都没有任何关系。

我只想验证`ac`,是否存在于我的数据库中`aa`。`cc`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T10:24:26.663

如果你想要一个查询，你可以这样做：

```
SELECT id, ac, aa, NULL as cc FROM tbl_ac WHERE ac = ? AND aa = ?
UNION ALL
SELECT id, NULL, NULL, cc FROM tbl_cc WHERE cc = ? 
```

但我不推荐。

* * *

如果查询没有以任何方式链接，您应该执行这两个查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T10:25:51.150

[http://sqlfiddle.com/#!3/779da/1](http://sqlfiddle.com/#!3/779da/1)

你也可以这样做：

```
select *
from tbl_ac, tbl_cc
where ac = 1 AND aa = 1 AND cc = 1 
```

（如果要带回大量数据，您可以使用 EXISTS 或 COUNT(*)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T10:26:24.770

```
SELECT id, ac, aa FROM tbl_ac WHERE ac = ? AND aa = ?  
AND EXISTS(SELECT id, cc FROM tbl_cc WHERE cc = ?) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T10:27:49.457

如果只有部分表有关系，可以使用LEFT JOIN，将表连接起来，在没有关系的地方填NULL。

```
$query = "
 SELECT tbl_ac.id, tbl_ac.ac, tbl_ac.aa 
 FROM tbl_ac
 LEFT JOIN tbl_cc ON ( tbl_cc.cc = tbl_ac.ac ) 
"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T10:42:56.487

```
SELECT EXISTS (SELECT * FROM tbl_ac WHERE ac = ? AND aa = ?)
   AND EXISTS (SELECT * FROM tbl_cc WHERE cc = ?) 
```

如果两个`EXISTS`谓词都返回 TRUE，则返回 TRUE，否则返回 FALSE。请注意，您不需要在子查询中指定列`EXISTS`。`EXISTS`谓词仅测试是否存在行。

# ruby-on-rails - 导轨下一个/上一个记录

> ID：11223886
> 
> 赞同：1
> 
> 时间：2012-06-27T10:14:15.653
> 
> 标签：ruby-on-rails, ruby

我看到了很多相同的解决方案来查找下一个/上一个记录，但我有不同的情况。

在我的数据库中有一些帖子 (6, 5, 4, 3, 2, 1) 并且它们`default_scope`用于粘贴帖子：`default_scope :order => 'sticky DESC'` 如果 4 的帖子会被粘贴，它将排在第一位 (4, 6, 5, 3, 2, 1...)

如果我像这样搜索下一篇文章：`record.where('created_at > ?', @post.created_at).first`，它将是 3，而不是`nil`，因为首先它搜索`created_at`然后按`sticky`列排序。

我怎样才能找到第一个/下一个帖子`default_scope`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:24:38.623

查找“下一条”记录时是否仍要考虑默认范围？

如果没有，请使用

```
Post.unscoped.where(...).first 
```

如果是，您可以考虑更改默认范围，如下所示：

```
default_scope :order => ['sticky DESC', 'created_at ASC'] 
```

一般来说，如果可能，应避免使用默认范围。它们可能/将成为以后维护的噩梦。建议仅在需要时使用范围。

# iphone - NSFileManager如何知道一个文件是否正在被使用（以避免删除它）NSFileBusy？

> ID：11223887
> 
> 赞同：1
> 
> 时间：2012-06-27T10:14:16.457
> 
> 标签：iphone, ios, nsfilemanager

我正在尝试限制我的 iOS 应用程序使用的空间，因此如果达到限制，则会删除旧图片。但是旧图片并不意味着未使用的图片。我想知道是否有办法知道图片是否正在使用或最近已加载以避免删除它，从而避免引发应用程序崩溃。我正在使用`NSFileManager removeItemAtPath`. 谢谢！

任何人都有比 NSFileBusy 上的文档更多的信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:18:14.483

您可以从文件属性中获取 fileModificationDate，因此可以决定将其删除..

在这种情况下，您必须妥善保管用户保留以备将来使用的文件。像我们日常很少看到的婚纱照和童年照，所以它们最近没有被修改过，请确保您的代码在未经用户许可的情况下不会删除它们。

# extendscript - 从 HTML 文件或 js 脚本执行 jsx 脚本

> ID：11223888
> 
> 赞同：1
> 
> 时间：2012-06-27T10:14:17.280
> 
> 标签：extendscript, after-effects

通常，当您编写 .jsx 脚本以自动化 Adob​​e 产品（如 InDesign、Illustrator 或 Photoshop）时，您会从 ExtendScript IDE 编写、调试和执行脚本。是否可以绕过 ExtendScript 并从第三个程序运行脚本？

我编写了脚本来自动化一些后效工作。我一直在从 ExtendScript IDE 运行脚本，但是现在我希望用户从 html 表单中提供输入参数，然后当他单击提交按钮时，我想将用户输入传递给 jsx 脚本，然后自动运行脚本。

所以基本上我想从 HTML 或用 html 文件编写的 JavaScript 代码调用 jsx 代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-15T19:29:55.937

是的，这是可行的，但工作量取决于您的平台。正如 Loic 所提到的，我提出的是客户端解决方案，如果您的目标是让远程用户在服务器上访问您的网页来执行此操作，那实际上是行不通的。您最好构建一个完成所有这些工作的 Web 服务，然后让 HTML 表单调用该 Web 服务。

对于 HTML 表单案例，您需要在 Windows 上执行 JSX 代码，使用封装在 HTML 文件的脚本标记中的 VBScript 或 javascript（通过 Microsoft JScript）代码从表单中提供所需的参数/参数。VB/JS 代码可以在脚本标签中，也可以通过脚本标签从外部 VBS/JS 文件中提取。使用此解决方案，您的 HTML 文件必须以扩展名“.hta”而不是“.htm”或“.html”命名。您可能希望在文件中添加一些额外的 HTA 元素标签。

有关详细信息，请参阅：[http ://en.wikipedia.org/wiki/HTML_Application](http://en.wikipedia.org/wiki/HTML_Application)

HTA 的好处是，与传统 HTML 页面不同，浏览器对本地文件系统的安全限制被删除，因此您可以获得额外的访问权限，例如能够使用 VBScript（而不仅仅是用于 HTML 页面的 javascript）和使用 COM 对象。这里的技巧是我们将使用 Adob​​e 应用程序的 COM API 来执行 JSX 文件。

如果在 Mac 上，我相信你没有类似的等价物。因此，您的替代选择是构建一个类似于 HTML 表单但实际上是 Mac 桌面应用程序的 GUI（例如 wxWidgets、Qt、本机 Mac 应用程序、Java GUI 应用程序）。构建了 GUI 后，它可以通过 Applescript 执行 JSX，因为许多语言（Java、Python 等）都应该有 Applescript 桥接接口。最坏的情况是，你可以通过 shell 执行一个 Applescript，将 Applescript 然后传递给实际 JSX 脚本文件的参数传递给它。

至于如何将参数传递给 JSX 文件并在 ExtendScript IDE 之外执行它，请参阅此 SO 帖子：

[是否可以从 ExtendScript 外部执行 JSX 脚本？](https://stackoverflow.com/questions/3846626/is-it-possible-to-execute-jsx-scripts-from-outside-extendscript?rq=1)

我刚刚提到的关于 HTML 表单或 GUI 应用程序的内容只是将其连接到 SO post 解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T23:15:54.137

这很棘手，但如果您不认为 html 页面将运行脚本，而是认为脚本正在寻找一些设置以显示由于 html 页面，那么它可能会实现。

如果您使用的是 mac，您可以编写一个 applescript 来监控文件夹并在需要时运行 jsx 文件。

如果您有能力冻结 InDesign，请考虑使用 $.sleep() 让它定期检查文件夹。另一种方法是依靠 AS3，以便在 html 端没有任何事情发生时使 InDesign 可用。

最后但同样重要的是，这些是灰色区域，因为脚本必须由用户在 adobe 软件的桌面版本中执行。您想要实现的更多是关于服务器脚本处理。鉴于您的预算，您可以看看 InDesign 服务器解决方案。虽然没有适用于 Ai & Ps 的服务器解决方案。

希望能帮助到你，

洛伊克

# c# - “给定编码中的无效字符”.... .doc 文件中的希伯来语字符

> ID：11223894
> 
> 赞同：0
> 
> 时间：2012-06-27T10:14:32.753
> 
> 标签：c#, sharepoint, .doc

当我尝试将希伯来语语言的 .doc 文件上传到 SharePoint 列表时，会出现主题错误。

```
XmlDocument document = new XmlDocument();
            if (_view.DocumentStream != null)
            {
                document.Load(_view.DocumentStream); 
```

.Load() 方法和 DocumentStream 是 Stream 类型时引发异常。希伯来字符存在字符集问题，但我不知道如何解决。谢谢并恭祝安康，

维托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:08:30.030

.doc 文件不是 XML 文档，因此 XML 解析器运行的第一件事看起来像

```
ÐÏà¡±á 
```

这不是文档语言的问题，而是您使用的方法的问题。

这个问题是你需要问的：

[Sharepoint API - 如何从 ASP.NET Web 应用程序将文件上传到 Sharepoint 文档库](https://stackoverflow.com/questions/279429/sharepoint-api-how-to-upload-files-to-sharepoint-doc-library-from-asp-net-web)

# c++ - Best way to protect from multiple shared_ptr to the same object

> ID：11223895
> 
> 赞同：13
> 
> 时间：2012-06-27T10:14:36.887
> 
> 标签：c++, c++11, shared-ptr

Sending the same pointer into two different `shared_ptr`'s is bad, it causes double deallocation, like thus:

```
int* p = new int;
std::shared_ptr<int> p1(p);
std::shared_ptr<int> p2(p); // BAD 
```

You can accomplish the same purpose with `std::enable_shared_from_this`:

```
class Good: public std::enable_shared_from_this<Good>
{
public:
    std::shared_ptr<Good> getptr() {
        return shared_from_this();
    }
};

int main()
{
    std::shared_ptr<Good> gp1(new Good);
    std::shared_ptr<Good> gp2 = gp1->getptr();
} 
```

But that still doesn't protect against:

```
class Good: public std::enable_shared_from_this<Good>
{
public:
    std::shared_ptr<Good> getptr() {
        return shared_from_this();
    }
};

int main()
{
    Good* p = new Good;
    std::shared_ptr<Good> gp3(p);
    std::shared_ptr<Good> gp4(p); // BAD
} 
```

which could become a problem if you have code like this:

```
void Function(std::shared_ptr<Good> p)
{
    std::cout << p.use_count() << '\n';
}

int main()
{
    Good* p = new Good;
    std::shared_ptr<Good> p1(p);
    Function(p);    // BAD
} 
```

Why would I use a regular pointer when there's smart pointers? Because in performance critical code (or for convenience) the overhead of shared_ptr or weak_ptr is undesirable.

To prevent this mistake, I've done:

```
class CResource : public shared_ptr<Good>
{
public:
    CResource()
    {
    }

    CResource(std::shared_ptr<CBaseControl> c)
        : CResource(c)
    {
    }

private:
    CResource(CBaseControl* p)
    {
    }
};

void Function(CResource p)
{
    std::cout << p.use_count() << '\n';
}

int main()
{
    Good* p = new Good;
    CResource p1(std::shared_ptr<Good>(p));
    Function(p);    // Error
} 
```

This would cause the compiler to error if anyone tries to call `Function` with a pointer instead of a `shared_ptr`. It doesn't prevent someone from declaring `void Function(std::shared_ptr p)` though, but I think that's unlikely.

Is this still bad? Is there a better way of doing this?

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-27T10:17:00.843

The solution is simple: never have a raw pointer own memory in the first place. This pattern:

```
int* p = new int;
std::shared_ptr<int> p1(p);
std::shared_ptr<int> p2(p); // BAD 
```

Simply shouldn’t exist. Eradicate it from your code base. The only places where `new` is legitimate in C++11 is *as an argument* to a constructor call to a smart pointer (or in *very* low level stuff).

I.e. have code like this:

```
std::shared_ptr<int> p1(new int); 
```

Or better yet (no naked `new` involved any longer):

```
auto p1 = std::make_shared<int>(); 
```

Note that it’s fine to use raw pointers in code (but I’d question even that in most C++ code I’ve seen). But if you use raw pointers, don’t let them own the memory. Either point to automatic storage (no resource management necessary) or use a `unique_ptr` and access the raw pointer via its `get` member function.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-27T11:37:40.403

This example doesn't even compile:

```
void Function(std::shared_ptr<Good> p)
{
    std::cout << p.use_count() << '\n';
}

int main()
{
    Good* p = new Good;
    std::shared_ptr<Good> p1(p);
    Function(p);    // BAD
} 
```

`shared_ptr` has an `explicit` constructor *precisely* to stop that happening.

To make that compile you need to write:

```
 Function( std::shared_ptr<Good>(p) ); 
```

which is pretty obviously wrong, and if someone's going to make that mistake they're just as likely to do:

```
 Function( CResource(std::shared_ptr<Good>(p)) ); 
```

So why have you bothered to write `CResource`? What does it add?

To expand on Konrad Rudolph's excellent answer:

The answer to your question of how to avoid problems is to follow the [RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization) idiom, but follow it *fully*.

We'll ignore the example that doesn't even compile and look at the one above it:

```
Good* p = new Good;
std::shared_ptr<Good> gp3(p);
std::shared_ptr<Good> gp4(p); // BAD 
```

That code fails to follow the RAII idiom. You acquire a resource:

```
 Good* p = new Good; 
```

But do not initialize an RAII type. **BAD**.

Then you initialize an object with some existing resource:

```
 std::shared_ptr<Good> gp3(p); 
```

This is also **BAD**. You should initialize an RAII type at the same time as acquiring the resource, not separately (not even only separated by one line.)

Then you repeat the same error:

```
 std::shared_ptr<Good> gp4(p); // BAD 
```

You've marked this line as "BAD" but actually the previous two lines were *just* as bad. The third line will cause undefined behaviour, but the first two lines allowed that error to creep in, when it should have been made more difficult. If you never had a `Good*` hanging around then you couldn't have used it to initialize `gp4`, you'd have needed to say `shared_ptr<Good> gp4(gp3.get())` which is so *obviously* wrong noone will do it.

The rule is pretty simple: Don't take a raw pointer and put it in a `shared_ptr`. A raw pointer you didn't allocate is not resource *acquisition* so don't use it for *initialization*. The same applies inside `Function`, it should not take the raw pointer and use it to initialize a `shared_ptr` that takes ownership of the type.

This is C++, so it's not possible to protect against all the wrong ways to write code, you can't prevent sufficiently motivated idiots from shooting themselves in the foot, but all the guidelines and tools are there to prevent it, if you follow the guidelines.

Whn you have an interface that **forces** you to transfer ownership by passing a raw pointer, try to replace the interface so it uses a `unique_ptr` for ownership transfer, or if it's totally impossible to do that then try to wrap the interface in a safer version using `unique_ptr` for ownership transfer, and only as a last resort, use the dangerous interface but document it **very explicitly** that ownership is transferred.

# mongodb - MongoDb 插入（Perl 驱动程序）与 mongoimport 不一致

> ID：11223902
> 
> 赞同：1
> 
> 时间：2012-06-27T10:15:10.003
> 
> 标签：mongodb, mongoimport

我在 mongo 中有一个集合，我在其中插入来自 Perl（使用 MongoDb）和 mongoinsert 的数据。问题是数字的数据类型变得不一致。

例如，在 Perl 中，我这样做：

```
$collection->insert({ _id => 1, value => "record 1" }); 
```

我有一个使用 mongoimport 导入的 JSON 文件，其中包含以下行：

```
{"_id":2,"value":"record 2"} 
```

现在，如果我对集合进行搜索，我会得到以下信息：

```
> db.test.find()
{ "_id" : NumberLong(1), "value" : "record 1" }
{ "_id" : 2, "value" : "record 2" } 
```

有没有办法强制 Perl 驱动程序将 _id 作为 32 位数字插入？或强制 mongoimport，将其写为 64 位（NumberLong）？

您对如何保持 _id 字段一致有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T04:23:50.200

MongoDB Perl 模块文档有一些关于 64 位整数的信息： [http ://search.cpan.org/dist/MongoDB/lib/MongoDB/DataTypes.pod#64-bit_Platforms](http://search.cpan.org/dist/MongoDB/lib/MongoDB/DataTypes.pod#64-bit_Platforms)

整数大小的差异取决于您使用的语言和驱动程序；如果编译为 64 位，动态类型语言（如 Perl、PHP 和 Python）将使用 64 位整数，如果编译为 32 位，则使用 32 位整数。像 Java 这样的静态类型语言可能更具体（Int 始终为 32 位），但某些语言（如 C）仅保证 int 至少为 16 位（并且 long 大于 int 且至少为 32 位） ）。

您在 shell 查询中看到的 NumberLong _ids 是预期的，因为您使用 64 位 Perl（它使用 64 位整数）插入数据。32 位整数实际上是 NumberInt 格式，但 shell 没有显式显示这些整数的类型。

就索引和查询的应用而言，数字 _ids 仍然需要是唯一的。

例如，尝试插入与 32 位和 64 位相同的整数 _id 将导致重复键错误：

```
MongoDB shell version: 2.0.6
>     db.ints.insert({ _id: NumberInt(1) });
>     db.ints.insert({ _id: NumberLong(1) });
E11000 duplicate key error index: testing.ints.$_id_  dup key: { : 1 } 
```

同样，在查询数字 _ids 时将匹配：

```
>     db.ints.insert({ _id: NumberLong(2) });
>     db.ints.find({_id:Number(2)});
{ "_id" : NumberLong(2) }

>     db.ints.insert({ _id: NumberLong(3) });
>     db.ints.find({_id:Number(3)});
{ "_id" : NumberLong(3) } 
```

如果您担心使用不同驱动程序或命令（例如 mongoimport）时整数大小的差异，您可以编写自己的导入脚本。可以使用[Text::CSV_XS](http://search.cpan.org/dist/Text-CSV_XS/)快速组合 mongoimport 的等价物。

# android - MapActivity引起的onResume中的NullPointerException？

> ID：11223904
> 
> 赞同：1
> 
> 时间：2012-06-27T10:15:18.680
> 
> 标签：android, nullpointerexception, android-mapview, mapactivity

我只在第一次运行我的应用程序时收到此错误。为什么？有什么线索吗？这是我的代码：

我在`init()`启用工具按钮时启动服务的方法中获取用户的 Facebook 名称和图片

```
public void onCreate(Bundle savedInstanceState) {
    Log.i(TAG, "[ACTIVITY] onCreate");
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mUserPic = (ImageView) findViewById(R.id.user_pic);
    mText = (TextView) findViewById(R.id.welcome_text);
    mStepValueView = (TextView) findViewById(R.id.step_value);

    // restore facebook session if exist
    SessionStore.restore(facebook, this);

    // Init facebook session
    init();

    // inizialize pedometer
    mStepValue = 0;
    mPaceValue = 0;

    // set map
    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
    mapView.setEnabled(true);
    mapController = mapView.getController(); // get MapController
    mapController.setZoom(MAP_ZOOM); // zoom in the map

    // register listener for toggleButton
    ToggleButton toggleButton = (ToggleButton) findViewById(R.id.ToggleButton);
    toggleButton.setOnCheckedChangeListener(toggleButtonListener);

}

public void onResume() {
    Log.i(TAG, "[ACTIVITY] onResume");
    super.onResume();
    if (!facebook.isSessionValid()) {
        mText.setText("User offline");
        mUserPic.setImageBitmap(null);
    } else {
        facebook.extendAccessTokenIfNeeded(this, null);
    }

    // resume pedometer
    mSettings = PreferenceManager.getDefaultSharedPreferences(this);
    mPedometerSettings = new PedometerSettings(mSettings);

    // Read from preferences if the service was running on the last onPause
    mIsRunning = mPedometerSettings.isServiceRunning();

    if (mIsRunning) {
        bindStepService();
    }

    mPedometerSettings.clearServiceRunning();

}

@Override
protected void onPause() {
    Log.i(TAG, "[ACTIVITY] onPause");
    // if (mIsRunning) {
    // unbindStepService();
    // }
    if (mQuitting) {
        mPedometerSettings.saveServiceRunningWithNullTimestamp(mIsRunning);
    } else {
        mPedometerSettings.saveServiceRunningWithTimestamp(mIsRunning);
    }

    super.onPause();
} 
```

日志猫

```
06-27 11:48:54.101: E/AndroidRuntime(20313): FATAL EXCEPTION: main
06-27 11:48:54.101: E/AndroidRuntime(20313): java.lang.RuntimeException: Unable to resume activity {it.univpm.dii.socialfoot/it.univpm.dii.socialfoot.SocialFootActivity}: java.lang.NullPointerException
06-27 11:48:54.101: E/AndroidRuntime(20313):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2455)
06-27 11:48:54.101: E/AndroidRuntime(20313):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2483)
06-27 11:48:54.101: E/AndroidRuntime(20313):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1176)
06-27 11:48:54.101: E/AndroidRuntime(20313):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-27 11:48:54.101: E/AndroidRuntime(20313):    at android.os.Looper.loop(Looper.java:137)
06-27 11:48:54.101: E/AndroidRuntime(20313):    at android.app.ActivityThread.main(ActivityThread.java:4437)
06-27 11:48:54.101: E/AndroidRuntime(20313):    at java.lang.reflect.Method.invokeNative(Native Method)
06-27 11:48:54.101: E/AndroidRuntime(20313):    at java.lang.reflect.Method.invoke(Method.java:511)
06-27 11:48:54.101: E/AndroidRuntime(20313):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-27 11:48:54.101: E/AndroidRuntime(20313):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-27 11:48:54.101: E/AndroidRuntime(20313):    at dalvik.system.NativeStart.main(Native Method)
06-27 11:48:54.101: E/AndroidRuntime(20313): Caused by: java.lang.NullPointerException
06-27 11:48:54.101: E/AndroidRuntime(20313):    at com.google.android.maps.MapActivity.onResume(MapActivity.java:451)
06-27 11:48:54.101: E/AndroidRuntime(20313):    at it.univpm.dii.socialfoot.SocialFootActivity.onResume(SocialFootActivity.java:296)
06-27 11:48:54.101: E/AndroidRuntime(20313):    at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1154)
06-27 11:48:54.101: E/AndroidRuntime(20313):    at android.app.Activity.performResume(Activity.java:4545)
06-27 11:48:54.101: E/AndroidRuntime(20313):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2445)
06-27 11:48:54.101: E/AndroidRuntime(20313):    ... 10 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:19:17.210

看起来facebook可能在那里无效......试试这个

```
public void onResume() {
    Log.i(TAG, "[ACTIVITY] onResume");
    super.onResume();
   if(null!=facebook){ ///<------------
    if (!facebook.isSessionValid()) {
        mText.setText("User offline");
        mUserPic.setImageBitmap(null);
    } else {
        facebook.extendAccessTokenIfNeeded(this, null);
    }
} 
```

# javascript - 在 Web 应用程序中登录 Facebook

> ID：11223915
> 
> 赞同：0
> 
> 时间：2012-06-27T10:15:53.580
> 
> 标签：javascript

我正在尝试在我的 Web 应用程序中实现 facebook 登录。我得到了应用程序 ID，我的代码如下。`我的 Facebook 登录页面

```
 <div id="fb-root"></div>
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '<<App Id>> ', // App ID
        channelUrl : '//www. DOMAIN NAME.com/channel.html', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });
      // Additional initialization code here
    };
    // Load the SDK Asynchronously
    (function(d){
       var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       ref.parentNode.insertBefore(js, ref);
     }(document));
  </script><div class="fb-login-button"><a href=" ">Login with Facebook</a></div>
</body> 
```

`。我正在尝试运行它并为我的应用程序提供错误。我也得到了密钥，但不知道确切的位置。我们是否需要为此放置任何 css 或 js 或任何其他文件？

任何帮助是极大的赞赏..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:05:32.190

```
appId      : '<<App Id>> ', //Place App ID
channelUrl : '//www. DOMAIN0 NAME.com/channel.html', // Place domain here 
```

# objective-c - 使用 Objective C (iOS 5) 读取 XML 文件

> ID：11223919
> 
> 赞同：0
> 
> 时间：2012-06-27T10:16:02.527
> 
> 标签：objective-c, ios5, xml-parsing, xcode4.2

我正在尝试使用目标 C 语言读取 XML 文件并对其进行解析。我正在使用 XCode 4.2 并为 iPhone 编写应用程序。我创建了 Viewcontroller .h 和 .m 文件。我正在使用 NSXMLParser，xml 文件被命名为“simple.xml”。我已经从 w3schools 网站下载了它。我没有使用 ARC。没有构建错误。下面是我在 viewDidLoad 方法中的代码 -

```
NSString *filePath;
filePath = [[NSBundle mainBundle] pathForResource:@"simple" ofType:@"xml"];
NSData *fileData = [NSData dataWithContentsOfFile:filePath]; 
NSString *urlString = [[NSString alloc] initWithData:fileData encoding:NSASCIIStringEncoding];
NSLog(@"File data is %@",urlString);    
NSString* str= urlString;
NSData* data=[str dataUsingEncoding:NSUTF8StringEncoding];
xmlParser = [[NSXMLParser alloc] initWithData:data];
xmlParser.delegate = self;
[xmlParser parse]; 
```

这是 XML 内容 -

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<breakfast_menu>
    <food>
        <name>Belgian Waffles</name>
        <price>$5.95</price>
        <description>two of our famous Belgian Waffles with plenty of real maple syrup</description>
        <calories>650</calories>
    </food>
    <food>
        <name>Strawberry Belgian Waffles</name>
        <price>$7.95</price>
        <description>light Belgian waffles covered with strawberries and whipped cream</description>
        <calories>900</calories>
    </food>
    <food>
        <name>Berry-Berry Belgian Waffles</name>
        <price>$8.95</price>
        <description>light Belgian waffles covered with an assortment of fresh berries and whipped cream</description>
        <calories>900</calories>
    </food> 
  </breakfast_menu> 
```

但是当我执行这段代码时，程序突然终止。我在日志中没有看到任何异常信息。但它与 fileData 变量有关，因为在 XCode 中，我使用此变量的行以绿色显示，并带有文本“线程 1 停止执行...”。也许 XML 是用 ISO-8859-1 编码的，而我使用的是 ASCII 编码？早些时候，我使用类似的代码来解析从 Web 服务返回的 XML，当时响应是用 UTF-8 编码的。或者我在内存管理方面犯了一些错误..allos、release 等？请帮助我。

我也尝试在“TextEdit”中使用“UTF-8”保存文件，但没有这样的选项可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:22:56.963

您需要实现 xmlParser Delegate 方法，例如

```
– parserDidStartDocument:
– parserDidEndDocument:
– parser:didStartElement:namespaceURI:qualifiedName:attributes:
– parser:didEndElement:namespaceURI:qualifiedName: 
```

[http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html)

当您使用 alloc,new,copy,retain 时，您拥有该对象，您需要在完成后释放它们。

```
NSString* str= urlString;
[urlString release]; 
```

因为您已经通过分配给 str 完成了 urlstring。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:42:54.820

删除了编码部分，并将我从 xml 文件中读取的任何数据直接传递给 XML 解析器，它对我有用。

# preg-match - php 邮件表单安全性：发现新行的最可靠方法

> ID：11223922
> 
> 赞同：0
> 
> 时间：2012-06-27T10:16:04.997
> 
> 标签：preg-match, newline, php

我正在尝试构建一个安全的 php 联系表单以允许用户（希望不是垃圾邮件发送者）发送邮件。

我正在研究在 from: 字段中检测新行的方法，用户将使用该字段提交他们的电子邮件地址和 subject: 字段。

我有 2 种替代方法来检测新行，我希望您能就哪一种最可靠（意味着在大多数情况下工作）提出意见：

```
function containingnewlines1($stringtotest) {
    if (preg_match("/(%0A|%0D|\\n+|\\r+)/i", $stringtotest) != 0) {
        echo "Newline found. Suspected injection attempt";
        exit;
    }
}

function containingnewlines2($stringtotest) {
    if (preg_match("/^\R$/", $stringtotest) != 0) {
        echo "Newline found. Suspected injection attempt";
        exit;
    }
} 
```

提前感谢您的意见！

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:30:11.350

更相关的问题是“哪个更可靠？”。两种方法的效率都无关紧要，因为两种方法的执行时间都不应该超过几毫秒。试图根据毫秒在两者之间做出决定是一种[微优化](/questions/tagged/micro-optimization "显示标记为“微优化”的问题")。

此外，您所说的效率是什么意思？你的意思是哪个更快？哪一个消耗的内存最少？效率是一个定义不明确的术语，您需要更具体。

如果您绝对必须根据性能/效率要求做出决定，那么我建议您构建一个基准并自己找出最符合您要求的基准，因为最终只有您可以回答这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:09:08.350

实际上，我决定使用第一个函数，因为它涵盖了另外 2 种情况（%OA 和 %OD），并且它还包括不同操作系统使用的所有换行符变体（\n、\n\r 等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:50:55.010

我又给自己添加了 2 个函数并做了一个`100000`循环基准测试：

```
function containingnewlines3($stringtotest) {
   return (strpbrk($stringtotest,"\r\n") !== FALSE);
}

function containingnewlines4($stringtotest) {
   return (strpos($stringtotest,"\n") !== FALSE && strpos($stringtotest,"\r\n") !== FALSE);
}

$start = microtime(TRUE);
for($x=0;$x<100000;$x++) {
   containingnewlines1($html);   // 0.272623 ms
   containingnewlines2($html);   // 0.244299 ms
   containingnewlines3($html);   // 0.377767 ms
   containingnewlines4($html);   // 0.142282 ms
}
echo (microtime(TRUE) - $start); 
```

# image - 使用 PaperJs 动态更新 Canvas 图像

> ID：11223923
> 
> 赞同：0
> 
> 时间：2012-06-27T10:16:09.473
> 
> 标签：image, html5-canvas, updating, raster, paperjs

我有一个 src 指向 Handler (asp.net) 的图像元素，并且该图像用作定义为全局对象并在 window.load 期间更新的 Raster (PaperJs) 对象的源。

```
var raster;
paper.install(window);    
function WindowOnLoad() {    
    raster = new paper.Raster('MainContent_imageData');
    raster.position = paper.view.center;
    window.paper.view.draw();
} 
```

上面的代码在第一次加载时将图像加载到画布上，然后通过与回调控件（ComponentArt 回调控件）相关联的按钮单击来更新图像元素，但画布不是，它显示为空白。

然后我创建了一个在回调完成后被调用的处理程序，但它也没有工作。

```
function CallBackCompleted(sender,eventArgs) {
    var imgData = document.getElementById('MainContent_imageData');
    raster.image = imgData ;
    raster.position = window.paper.view.center;
    window.paper.view.draw();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:37:46.277

下面的代码解决了这个问题。光栅对象作为子对象添加到 layer[0] 上删除了除 children[0] 之外的所有其他对象，children[0] 指的是光栅对象。

```
function CallBackCompleted(sender,eventArgs) {
    if(window.paper.project.layers[0].hasChildren())
         window.paper.project.layers[0].removeChildren(1);

    var imageObj = new Image();
    imageObj.src = document.getElementById('MainContent_imageData').src;
    imageObj.onload = function () {
    window.paper.project.layers[0].children[0].setImage(imageObj);
    window.paper.project.layers[0].children[0].position = window.paper.view.center;
    window.paper.view.draw();
  }
} 
```

# jquery - 如何根据先前的选择过滤下拉列表

> ID：11223925
> 
> 赞同：1
> 
> 时间：2012-06-27T10:16:12.757
> 
> 标签：jquery, asp.net-mvc-3, kendo-ui

我的视图中有两个下拉列表。一个是国家，另一个是州。当我单击并选择某个国家时，该国家的相应州必须出现在状态下拉列表中我正在使用剑道下拉列表并且能够获取使用剑道数据源的下拉值我使用以下功能进行过滤，但数据没有被过滤。任何人都可以帮助我哪里出错或建议我一些关于如何做到这一点的想法

```
enter code here

      var sourcedata = new kendo.data.DataSource({

                  type: "odata",
                  serverFiltering: true,

                  transport: {

                      read:

                      {
                          url: "/Home/State",
                          type: "POST"
                      }
                  }
              });

              $("#cnty").kendoDropDownList({
                  optionLabel: "Select category...",
                  dataTextField: "ct",
                  dataValueField: "country",
                  dataSource: {
                      type: "odata",
                      serverFiltering: true,
                      transport: {
                          read: "/Home/Country"
                      }
                  },
                  change: function () {
                      var value = this.value();

                      if (value) {
                          sourcedata.filter({
                              field: "country",
                              operator: "eq",
                              value: parseInt(value)
                          });
                          st.enable();
                      } else {
                          st.enable(false);
                      }

                      st.select(0);

                  }
             }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:31:08.063

我有这个 ajax 代码，请尝试一下，它将完美地在我的网站上运行。我没有 jquery 代码，所以我会给你 AJAX 代码

```
function ajaxState()
    {

        var ajaxRequest;
        try
        {
                ajaxRequest = new XMLHttpRequest();
        } 
        catch (e)
        {
                try
                {
                        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
                } 
                catch (e) 
                {
                        try
                        {
                                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                        } 
                    catch (e)
                    {
                            alert("Your browser broke!");
                            return false;
                    }
                }
        }
        ajaxRequest.onreadystatechange=function()
        {
                if(ajaxRequest.readyState==4)
                {
                        //alert("Response :: "+ajaxRequest.responseText);
                        document.getElementById("statediv").innerHTML=ajaxRequest.responseText;
                }
        }
        var query="ajaxhendler.php?msg=loadstate";
        //alert("Request ::" +query);
        ajaxRequest.open("POST",query,true);
        ajaxRequest.send();
    }

    function loadcity()
    {
                    //alert("i m called")
        var city=document.getElementById("state").value;
            //alert(city);
            var ajaxRequest;

            var ajaxRequest;
            try
            {
                    ajaxRequest = new XMLHttpRequest();
            } 
            catch (e)
            {
                    try
                    {
                            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
                    } 
                    catch (e) 
                    {
                            try
                            {
                                    ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                             } 
                        catch (e)
                        {
                                alert("Your browser broke!");
                                return false;
                        }
                    }
            }

            ajaxRequest.onreadystatechange=function()
            {
                    if(ajaxRequest.readyState==4)
                    {
                            //alert("Response :: "+ajaxRequest.responseText);
                            document.getElementById("city").innerHTML=ajaxRequest.responseText;
                    }
            }
            var query="ajaxhendler.php?msg=loadcity&c="+city;
            //alert("Request ::" +query);
            ajaxRequest.open("POST",query,true);
            ajaxRequest.send();     

    }
</script> 
```

**和这样的html代码**

```
<body onLoad="ajaxState()">
<table>
 <tr>

     <td>State :</td>
    <td><div id="statediv"/></td>
 </tr>
 <tr>
     <td>City :</td>
     <td><div id="city"/></td>
 </tr>

</table> 
```

查询是

```
<?php 
$msg=$_GET['msg'];

if($msg=='loadstate')
{
    load_state();
}
if($msg=='loadcity')
{
    load_city();
}

function load_state()
        {
                $cn=mysql_connect("localhost","root","");
                mysql_select_db("per_info",$cn);
                $query="SELECT * FROM tbl_state WHERE loc_parent =0";

                if($rs=mysql_query($query))
                {
                        echo "<select name=\"state\" id=\"state\" onchange=\"loadcity()\">
                                    <option value=\"\">Select State</option>";
                        while($row=mysql_fetch_array($rs))
                        {
                                echo "<option value=\"".$row[loc_id]."\">".$row[loc_name]."</option>";
                        }
                        echo "</select>";
                }
                else
                {
                        echo "error";
                }
        }
//========================================================display city in <select>============================================      
        function load_city()
        {
                $state=$_GET['c'];

                $cn=mysql_connect("localhost","root","");
                mysql_select_db("per_info",$cn);

                $query="SELECT * 
                        FROM tbl_state 
                        WHERE loc_parent = ".$state;
                if($rs=mysql_query($query))
                {
                        echo "<select name=\"city\" id=\"city\">
                                    <option value=\"\">Select City</option>";
                        while($row=mysql_fetch_array($rs))
                        {

                                echo "<option value=\"".$row[loc_id]."\">".$row[loc_name]."</option>";
                        }
                        echo "</select>";
                }

        } 
```

我希望它可以帮助你..

# objective-c - NSURLCredential-credentialForTrust 与用户名：密码

> ID：11223926
> 
> 赞同：1
> 
> 时间：2012-06-27T10:16:18.007
> 
> 标签：objective-c, nsurlconnection, nsurlrequest, nsurlcredential

我是 iOS 和 https 的新手。我是一名初学软件的学生。我想编写一个应用程序，从我的 uni 帐户中提取数据（例如班级编号、公告等）并在我的应用程序上显示。

通常，我会去我的大学学生页面，用我的用户名和密码登录，这些信息就会显示在浏览器上。

我试过使用 NSURLConnection 及其委托。请看下面我的代码。一开始，在connection:didReceviveAuthenticationChallenge方法中，我通过[NSURLCredential withUser:password:persistence]创建了一个NSURLCredential对象。它不起作用。然后我尝试做NSLog，然后我发现protectionSpace.authenticationMethod是NSURLAuthenticationMethodServerTrust。

然后，我尝试阅读 Apple 的文档和一些谷歌资源。但是，我无法真正理解它，然后我编辑了我的代码，如下所示（这是我的最终版本，它仍然无法正常工作）。

我不太明白的一点是：我希望服务器应该询问我的用户名和密码。取而代之的是，它要求 credentialForTrust，它基于我读过的那些文档，他们建议我评估 NSURLConnection 委托对服务器的信任。但是，服务器从未询问用户名和密码。那么，服务器如何知道我正在访问哪个帐户。

所以，我认为这应该是证书（信任）与用户名和密码之间的某种关系。我真的不明白这些东西是如何工作的。

我想，我的问题可能不是很清楚或其他什么，而且可能很愚蠢。我接受这一点，因为我从来没有学过所有这些东西。

所以，请有人向我解释这些事情是如何工作的。您可以假设我对什么是 https、SSL、NSURLConnection、NSURLCredential 等有一些基本的了解，请指导我找到解决方案。

我很感激你的所有努力。

下面是我的代码，（它不工作）。

连接中的 NSLog()：didReceiveAuthenticationChallenge，打印出“NSURLAuthenticationMethodServerTrust”

```
- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace
{
    return YES;
}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
    NSLog(@"authenticationMethod is:  %@\n",challenge.protectionSpace.authenticationMethod);
    if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust]){
          [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];
    }else{
            NSURLCredential *creden = [[NSURLCredential alloc] initWithUser:myusername password:mypassword persistence:NSURLCredentialPersistenceForSession];
            [[challenge sender] useCredential:creden forAuthenticationChallenge:challenge];
    }
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"didFailWithError:  %@\n  %@\n",
          [error localizedDescription],
          [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
     [self.myData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [self.myData setLength:0];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
     NSString *str = [[NSString alloc] initWithData:self.myData    encoding:NSASCIIStringEncoding];
    NSLog(@"Data in String %@", str);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T17:53:22.580

`NSURLAuthenticationMethodServerTrust`当 URL 加载系统不信任服务器时，就会出现挑战。如果您想避免这些调用，请确保 iOS 信任您服务器的证书（[通过手动安装它](https://stackoverflow.com/questions/4589562/how-to-install-my-servers-self-signed-certificate-on-an-ipad)，或者让像 Verisign 这样的受信任的根对其进行签名）。

# css - Susy：如何扩展内容框以覆盖网格填充？

> ID：11223927
> 
> 赞同：6
> 
> 时间：2012-06-27T10:16:22.813
> 
> 标签：css, compass-sass, susy-compass

我刚开始和苏西一起玩。我有一个 12 列网格，上面有网格填充。现在我希望我的页面标题跨越整个网格，包括网格填充。我现在正在做的是计算整体宽度，然后在标题上设置负边距。这对我来说感觉相当hacky......有没有更清洁的方法呢？

```
$total-columns  : 12;
$column-width   : 3.5em;
$gutter-width   : 1.25em;
$grid-padding   : 2em;

$total-width: ( $total-columns * ($column-width + $gutter-width) ) + ( 2 * $grid-padding ) - $gutter-width;

header {
    height: 150px;
    width: $total-width;
    margin-left: -$grid-padding;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-04T01:03:05.923

你有两个不错的选择。一个是您所拥有的简化版本。由于块元素默认为 100% 宽度，因此您可以简单地消除宽度设置（以及所有那些 hacky 数学）。

```
header {
    height: 150px;
    margin: 0 0 - $grid-padding;
} 
```

您的另一个选择是在页面上使用多个容器。这需要更改标记，但有时它是一种效果很好的简化。如果您将标头移到当前容器之外，并将其声明为它自己的容器，则可以解决问题。

（附带说明：如果您确实需要全宽，您可以简单地使用该`columns-width()`功能（用于内部宽度，无填充）或`container-outer-width()`用于包括填充在内的全宽。）

**更新：**

我一直在使用这个 mixin，在我需要的任何地方应用 bleed：

```
@mixin bleed($padding: $grid-padding, $sides: left right) {
  @if $sides == 'all' {
    margin: - $padding;
    padding: $padding;
  } @else {
    @each $side in $sides {
      margin-#{$side}: - $padding;
      padding-#{$side}: $padding;
    }
  }
} 
```

一些例子：

```
#header { @include bleed; }
#nav { @include bleed($sides: left); }
#main { @include bleed($sides: right); }
#footer { @include bleed(space(3)); } 
```

# z3 - z3 中的符号变量

> ID：11223929
> 
> 赞同：1
> 
> 时间：2012-06-27T10:16:30.507
> 
> 标签：z3, solver, smt

有没有办法让 z3 求解器发出“符号”解决方案？例如，对于方程：

1+x=c

解是 x=c-1，但 z3 总是发出一个特定的模型，比如`[c = 0, x = -1]`. 如何将 c“定义”为符号变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T21:33:25.460

不幸的是，Z3 没有公开这种功能。尽管我们在内部使用求解器，但它们并未在 API 中公开。在未来的版本中，我们希望公开内部组件，例如：求解器、Grobner 基础程序等。在当前版本中，我们有一个策略称为`solve-eqs`（参见[http://rise4fun.com/Z3Py/tutorial/strategies](http://rise4fun.com/Z3Py/tutorial/strategies)）。它使用高斯消除的推广来消除变量。但是，这是一个预处理步骤，您无法控制消除哪些变量。

# c++ - 将一维数组转换为二维向量 c++

> ID：11223938
> 
> 赞同：0
> 
> 时间：2012-06-27T10:16:52.240
> 
> 标签：c++, visual-c++

有人可以帮我编写一个将 ID 数组转换为 2D 向量的逻辑。

就像是

```
int array[] = {1, 4, 5, 7, 9, 3}; // dynamic array
vector <vector int> ex; 
```

我现在如何将数组中的值放在 ex 中.. 以便它形成 2 个向量，每个向量 3 个值？

我搜索了没有用的帮助，并自己尝试如下：

```
for(int i=0; i<2; i++)
{   
        rowTemp_ex.assign(array, array+3));
 ex.push_back(rowTemp_ex);
 rowTemp_ex.erase(rowTemp_ex.begin() , rowTemp_ex.end());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:22:54.157

首先，计算将有多少行向量。如果每个元素都有三个元素，则总数是数组的大小除以 3。

```
template <typename T, std::size_t N>
std::size_t size(T(&)[N]) { return N; }

int number_of_rows = size(array) / 3; 
```

现在创建一个具有该数量行向量的向量，每个向量具有三个元素：

```
std::vector<std::vector<int> > v(number_of_rows, std::vector<int>(3)); 
```

然后遍历原始数组并填充结果的每个单元格，使用整数除法和余数运算：

```
for(int i = 0; i < size(array); ++i) {
    v[i / 3][i % 3] = array[i];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:08:55.923

你在正确的轨道上，但在你的 for 循环中犯了一个错误：

```
rowTemp_ex.assign(array, array+3)); 
```

这将在每次迭代时分配数组的相同部分。您需要将行 (3) 的大小乘以 i：

```
rowTemp_ex.assign(array + i * 3, array + (i * 3) + 3));

i = 0:      0*3                  0*3+3
i = 1:                            1*3                   1*3 + 3
array:    [  0  ][  1  ][   2  ][   3  ][  4   ][  5  ] [one past the end] 
```

调用`vector::erase`是多余的，`vector::assign`在下一次迭代中无论如何都会丢弃以前的内容。

这里有一些更通用的东西，也可以处理可能的奇怪元素（未经测试）：

```
const size_t arr_size = N;
const size_t n_cols = M;
const size_t n_rows = arr_size / n_cols;
const size_t n_odd = arr_size % n_cols;

int arr[arr_size] = { .... };

int* begin = arr;
int* end = arr + (n_rows * n_cols);

while( begin != end ) {
    ex.push_back(std::vector<int>(begin, begin + n_cols));
    begin += n_cols;
}

if (n_odd)
    ex.push_back(std::vector<int>(begin, begin + n_odd)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:23:12.813

假设您*总是*需要三个大小为 2 的向量，并且 2D 向量在 C 数组中成对对齐，请执行以下操作：

```
int array[] = {1, 4, 5, 7, 9, 3}; // dynamic array
vector<vector<int> > ex;

for(int i = 0; i < 3; ++i)
{
    vector<int> tmp;
    tmp.push_back(array[2*i]);
    tmp.push_back(array[2*i+1]);
    ex.push_back(tmp);
} 
```

# android - 具有离线 Web 应用程序的 Android 平板电脑

> ID：11223944
> 
> 赞同：1
> 
> 时间：2012-06-27T10:17:18.753
> 
> 标签：android, html

我们计划使用*HTML5*和本地网络存储为 Android 平板电脑创建应用程序。

我们可以创建保存在缓存中的站点，并在桌面上创建链接或类似的东西。用户应该能够在没有互联网连接的情况下打开它。如果用户单击刷新站点并且没有可用的 Internet 连接，则不会出现错误。站点应从缓存中重新加载。

我知道 iPad 允许这样做。

Android 是否支持此功能？

Android 是否支持 HTTPS AJAX 查询？

# javascript - 如何从 jQuery Get 获取响应头位置？

> ID：11223946
> 
> 赞同：19
> 
> 时间：2012-06-27T10:17:31.220
> 
> 标签：javascript, jquery, ajax, response

所以我试图通过 jQuery get 从标头响应中获取位置。我尝试使用 getResponseHeader('Location') 和 getAllResponseHeaders() 但它们似乎都返回 null。

这是我当前的代码

```
$(document).ready(function(){
   var geturl;
   geturl = $.ajax({
      type: "GET",
      url: 'http://searchlight.cluen.com/E5/Login.aspx?URLKey=uzr7ncj8)',
   });
   var locationResponse = geturl.getResponseHeader('Location');
   console.log(locationResponse);
}); 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-27T10:26:06.307

当*异步*请求返回时，标头将可用，因此您需要在[成功回调](http://api.jquery.com/jQuery.ajax/)中读取它们：

```
$.ajax({
    type: "GET",
    url: 'http://searchlight.cluen.com/E5/Login.aspx?URLKey=uzr7ncj8)',
    success: function(data, status, xhr) {
        console.log(xhr.getResponseHeader('Location'));
    }
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-30T05:42:00.737

对于 jQuery Ajax 中的某些标头，您需要访问 XMLHttpRequest 对象

```
var xhr;
var _orgAjax = jQuery.ajaxSettings.xhr;
jQuery.ajaxSettings.xhr = function () {
  xhr = _orgAjax();
  return xhr;
};

$.ajax({
    type: "GET",
    url: 'http://example.com/redirect',
    success: function(data) {
        console.log(xhr.responseURL);
    }
}); 
```

或使用纯 javascript

```
var xhr = new XMLHttpRequest();
xhr.open('GET', "http://example.com/redirect", true);

xhr.onreadystatechange = function () {
  if (this.readyState == 4 && this.status == 200) {
    console.log(xhr.responseURL);
  }
};

xhr.send(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-08-17T13:03:41.070

jQuery 将 XMLHttpRequest 对象抽象为所谓的“超集”，它不公开 responseURL 字段。在他们的文档中，他们谈论“jQuery XMLHttpRequest (jqXHR) 对象”

```
For backward compatibility with XMLHttpRequest, a jqXHR object will expose the following properties and methods:

readyState
responseXML and/or responseText when the underlying request responded with xml and/or text, respectively
status
statusText
abort( [ statusText ] )
getAllResponseHeaders() as a string
getResponseHeader( name )
overrideMimeType( mimeType )
setRequestHeader( name, value ) which departs from the standard by replacing the old value with the new one rather than concatenating the new value to the old one
statusCode( callbacksByStatusCode )
No onreadystatechange mechanism is provided, however, since done, fail, always, and statusCode cover all conceivable requirements. 
```

如您所见，没有办法获取响应 URL，因为 jqXHR API 没有公开它

# php - 推送通知分发

> ID：11223951
> 
> 赞同：1
> 
> 时间：2012-06-27T10:17:56.513
> 
> 标签：php, iphone, push-notification, apple-push-notifications

我创建了所有证书来为我的应用程序 iPhone 开发推送通知。如果我使用由开发人员证书创建的文件 .pem 对其进行测试，它可以工作，但如果我使用由生产证书创建的文件 .pem ，它就不起作用。

这是我的代码：

```
public function push($deviceToken,$badge,$message,$deviceType) {

              $sound = "default";

              // Construct the notification payload
              $body = array();
              $body['aps'] = array("alert" => $message);

              if ($badge)
                    $body['aps']['badge'] = $badge;
              if ($sound)
                    $body['aps']['sound'] = $sound;

              $ctx = stream_context_create();
              stream_context_set_option($ctx, 'ssl', 'local_cert', 'apns-prod.pem');
              $fp = stream_socket_client("ssl://gateway.push.apple.com:2195", $err, $errstr, 60, STREAM_CLIENT_CONNECT, $ctx);

              if (!$fp) {
                    print "Failed to connect $err $errstrn";
                    return;
              } else {
                    print "Connection OK\n";
              }

              $payload = json_encode($body);
              $msg = chr(0) . pack('n',32) . pack('H*', str_replace(' ', '', $deviceToken)) . pack('n',strlen($payload)) . $payload;
              fwrite($fp, $msg);
              fclose($fp);

    } 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:38:49.523

确保在为推送过程创建证书之后创建新的临时和/或应用商店分发证书。启用推送的应用程序的 adhoc 和 appstore 证书发生变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:28:01.410

仅当您向使用临时分发证书（或最终版本）签名的应用程序发送通知时，生产推送证书才有效。开发者推送证书仅适用于使用开发者分发证书签名的应用程序（即从 XCode 安装到设备上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:33:43.247

您可以通过更改方案属性来尝试您的生产证书：

*   单击 Xcode 窗口左上角的目标方案，然后单击编辑方案。

*   在“Run yourTarget”选项卡中，设置`Release`为构建配置，“None”为调试器。

*   当然，您的目标必须配置一个临时供应配置文件。

*   插入您的 iPhone 并使用 iOSDevice 配置运行。

行得通吗？

**编辑：**我道歉，我会说`Release`而不是`Ad-hoc`（我更正了）

# objective-c - 从一个场景过渡到另一个场景

> ID：11223958
> 
> 赞同：1
> 
> 时间：2012-06-27T10:18:17.027
> 
> 标签：objective-c, nsarray

我有三个名为*a、b、c 的NSArray 和另一个名为**na*的NSMutableArray 。

3 个数组包含元素 imagename.image。

当按下按钮时，3 个数组被合并到可变数组*na*中。数组再次被拆分。重复此过程，在第三次点击后，*na*的第 10 个元素应显示在另一个视图控制器上。

我已经设置了一个计数器*j*并且我需要*j==3*时的步骤。

```
- (IBAction)selection1:(id)sender { 
    na = [[NSMutableArray alloc] init]; 

    [na addObjectsFromArray:b]; 
    [na addObjectsFromArray:a]; 
    [na addObjectsFromArray:c]; 
    if(j==3) { 
        j=1; //I need the code for this part 
        [self performSegueWithIdentifier: @"SendInfo" sender: self]; 
    } else { 
        j++; 
        img1.image=[na objectAtIndex:0]; 
        img2.image=[na objectAtIndex:3]; 
        img3.image=[na objectAtIndex:6]; 
        img4.image=[na objectAtIndex:1];
        img5.image=[na objectAtIndex:4]; 
        img6.image=[na objectAtIndex:7]; 
        img7.image=[na objectAtIndex:2]; 
        img8.image=[na objectAtIndex:5]; 
        img9.image=[na objectAtIndex:8]; 

        a=[NSArray arrayWithObjects:img1.image,img2.image,img3.image, nil]; 
        b=[NSArray arrayWithObjects:img4.image,img5.image,img6.image, nil]; 
        c=[NSArray arrayWithObjects:img7.image,img8.image,img9.image, nil]; 
    } 
} 
```

你能帮助我吗？我是 xcode 的新手。

# java - How to send parameters to portlet use jquery

> ID：11223961
> 
> 赞同：0
> 
> 时间：2012-06-27T10:18:16.917
> 
> 标签：java, jquery, jsp, portlet

I have a form on my jsp page. In this form i choose a file (zip archive) and after click submmit call servlet to upload this file. For file upload im use Apache Commons FileUlpoad library. After upload im unzip archive. Them i do redict to this jsp.

jsp code:

```
<form action="Upload_Servlet" method="post" enctype="multipart/form-data">
   <div id="up">
       <input id="fileUpload1" type="file" name="filename1"value="Browse..."/>
   </div>
   <div>
        <input id="btnSubmit" type="submit" value="Загрузить">
        <input type="button" id="del" onclick="deleting()" value="Удалить">
   </div>
</form> 
```

servlet code:

```
public class uploadfile extends HttpServlet
{

public void doPost(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, java.io.IOException {
    System.out.println(response.getCharacterEncoding());
    response.setCharacterEncoding("UTF-8");
    System.out.println(response.getCharacterEncoding());
    response.setContentType("text/html");
    PrintWriter writer = response.getWriter();
    writer.println("wtpwebapps<br/>");
    boolean isMultipart = ServletFileUpload.isMultipartContent(request);
    if (!isMultipart) {
        writer.println("<HTML>");
            writer.println("<HEAD <TITLE> Upload4 </TITLE> </HEAD>");
            writer.println("<BODY>");
            writer.println("<FORM action = \"Upload_Servlet\" method = \"post\" enctype = \"multipart/form-data\">");
            writer.println("<INPUT type = file name = ufile>");
            writer.println("<INPUT type = submit value = \"Attach\">");
            writer.println("<h1>its not multipart</h1>");
            writer.println("</FORM>");
            writer.println("</BODY>");
            writer.println("</HTML>");
            return;
        }          
  FileItemFactory factory = new DiskFileItemFactory();
    ServletFileUpload upload = new ServletFileUpload(factory);
    List<FileItem> list=null;
    String mifpath= "1";
    String path = " ";
    String mif = " ";
    String from = "\\\\";
    String to ="/";
    String error="";
     try{
      list = upload.parseRequest(request);
      Iterator<FileItem> it = list.iterator();
      response.setContentType("text/html");
      while ( it.hasNext() ) 
      {

        FileItem item = (FileItem) it.next();
        File disk = new File("C:/uploaded_files/"+item.getName());

            path = disk.toString();

            String code = new String(path.substring(path.lastIndexOf("."), path.length()).getBytes("ISO-8859-1"),"utf-8");
            if (code.equalsIgnoreCase(".zip"))
            {
                mifpath=path;
                mif = mifpath.replaceAll(from, to);
                item.write(disk);
                error=unzip.unpack(mif, "C:/uploaded_files");
            }
            else
            {
                error = "Выбранный файл не является архивом zip";

            }
      }
    }
     catch ( Exception e ) {
      log( "Upload Error" , e);
    }
     request.setAttribute("error", error);
     request.getRequestDispatcher("/Home.jsp").forward(request, response);

    // String redictedURL="http://localhost:8080/redicted_test/Home.jsp";
    // response.sendRedirect(redictedURL);
    writer.close();
    }
} 
```

Now i want to do this on the portal. Its mean that i dont want to reload my jsp after I upload a file. So i have to use Jquery. And i have some questions:

1.  How to submit form to use jquery in my case?
2.  My servlet code will be work in portlet?
3.  How to send parametrs to jps from portlet?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:55:10.047

Using Jquery it can be done easily:

1.  Set a click event on the submit button (or on the form submit).
2.  Post data to servlet:

    ```
    $.ajax({
            url : base_url + 'Upload_Servlet',
            type : "post",
            data:$('form').serialize(),             
            cache : false,
            success : function(data) {
                //do some stuff

        },
        error : function(xhr, status, err) {
            //do error stuff
        },
        timeout : 3000
        });
        //End ajax call 
    ```

3.  After the servlet is done, just use the response writer to write an aswer back (If it contains a lot of data, I'd recommend sending a response in the form of json, see [here](https://stackoverflow.com/questions/11224338/sending-json-data-servlet-applet-communication-example/11225420#11225420)) and then the success callback is called and you can do whatever you like with this data.

**IMPORTANT:** Since you are submitting a form, you need to use [e.preventDefault()](http://api.jquery.com/event.preventDefault/) so the form will not be actually submitted but rather be handeled by your ajax.

# .net - .net 内存管理的几个问题

> ID：11223976
> 
> 赞同：0
> 
> 时间：2012-06-27T10:18:47.723
> 
> 标签：.net, garbage-collection, unmanaged-memory

我已经在 .net 中阅读了一些关于内存管理的想法，但是我没有回答以下三个问题

1.  非托管资源在用于托管资源的同一托管堆中获取内存以及谁分配它（OS OR CLR 或其他任何东西）？
2.  在托管资源 R 上调用 Dispose() 方法，将立即释放该 R 占用的内存以及 R 占用的所有其他非托管资源
3.  Who 清除被取消管理的资源（OS OR CLR 或其他）占用的内存。

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:59:01.090

1）。创建非托管资源的代码。例如，Win32 文件句柄由操作系统内核分配。

2）。释放非托管资源取决于 Dispose 方法的实现。例如，它可以调用 Win32 CloseHandle 来关闭文件句柄。托管资源仍然存在，只是通过 GC 释放。

3）。Dispose 方法实现，通常调用原生函数。

# c - %p %c %s 的 C 指针变量中的 printf

> ID：11223977
> 
> 赞同：3
> 
> 时间：2012-06-27T10:18:50.937
> 
> 标签：c, printf, string-formatting

```
void say(char msg[])
{   // using pointer to print out the first char of string
    printf("%c\n", *msg);
}

void say(char msg[])
{   // using pointer to print out the memory address of the         first char of string
    printf("%p\n", msg);
}

void say(char msg[])
{   // using pointer to print out the whole string
    printf("%s\n", msg);
} 
```

前两个是有道理的，但我不太明白第三个函数是如何工作的。我所知道的是 msg 指向字符串第一个字符的内存地址。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T10:22:19.290

`%s`会将地址解释`msg`为 C 字符串的基地址，这是一个以 NULL 结尾的 ( `'\0'`) 字节序列，因此带有 的 printf将`%s`获取基地址`msg`并打印每个字节的等效字符`msg`它不会遇到 NULL 字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T10:21:09.830

最后一个打印字符串..它从 msg 的内存地址开始，直到到达终止字符 '\0'

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T10:21:21.333

由于 C 字符串由 NUL 字符终止`\0`，因此该`printf`函数将采用该假设并使用指针中的地址打印出所有字符，直到`\0`找到 NUL 字符。

如果`char`传入的数组不是 NUL 终止的，您的程序可能会崩溃，因为它可能找不到 NUL 字符，并且会输出垃圾，直到它到达未分配的内存位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T10:31:08.227

最后一条语句**需要 String**因为**格式说明符是 %s**。它将 msg 的基地址作为起始地址并打印所有字符，直到到达 '\0' 因为 string 是一个以空字符结尾的字符数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T18:26:40.837

%P 打印出被调用的变量压入的堆栈值地址。例如，如果值 a 存储在地址 2000。并且我们在 printf() 语句中执行 %P，则输出是压入函数堆栈的地址。当我们执行 printf("%P",a); 时，a 的地址将被压入堆栈；它打印堆栈的推送值。

# android - 增加 android Launcher 和 All apps 页面中的图标大小

> ID：11223979
> 
> 赞同：1
> 
> 时间：2012-06-27T10:18:54.133
> 
> 标签：android, icons

我想增加启动器和所有应用程序页面中的应用程序图标大小。我们尝试将 GridView 中的 android:rowHeight 设置为 all_apps_2d.xml 中的 200dip，但这对增加图标大小没有任何影响。任何人都可以帮助我增加网格视图中的应用程序图标大小。谢谢， 里亚兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:26:09.807

我认为您应该创建一个所需大小的新图标（即 200*200 像素）。这样就可以了。

# yii - Yii 框架 urlManager 重写规则

> ID：11223981
> 
> 赞同：3
> 
> 时间：2012-06-27T10:19:04.377
> 
> 标签：yii

我有一个如下所示的网址：

```
<controller>/<action>/param/value 
```

我希望它喜欢这样的东西：

```
param/value 
```

如何实现？

我尝试了这个规则，但不确定它是否可以（控制器是帐户，操作是索引）。

```
'user/<user:.*>' => 'account/index/user/test' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:53:53.547

如果我正确理解了您的问题，您希望像这样处理 URL：

```
mysite.domain/user/username123 
```

并使用参数**User**调用**AccountController**中的**actionIndex**，（在这种情况下）等于**“username123”**

 ******在这种情况下，您可以尝试以下规则：

```
'user/<user:.*>' => 'account/index/<user>' 
```

但是，如果您的操作可能需要更改声明：

```
function actionIndex($user){
    // code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:39:04.647

我会避免将参数放入动作签名中，因为 yii 根本不会处理签名不匹配的动作[优雅地]...事实上，将 $user 放入将绑定该动作以始终需要指定 $user 并且如果你曾经决定更改您的功能，追踪为什么没有调用您的操作比确定您的 $_GET 未设置的原因更难......我建议不要将 $user 添加到签名中，只需执行以下操作跟随你的行动。

```
//will always run on /user/<USER:.*>
function actionIndex(){
    $user = isset($_GET['user'])?$_GET['user']:NULL;
    if(!is_null($user)){
        //your user specific account action..
    }else{
        //handle your error gracefully..
    }
} 
```

这种方法可以让您的操作更加灵活。URL 规则应如下所示：

```
'user/<user:.*>' => 'account/index/user/<user>' //user is defined as a get... 
```

希望能帮助&&快乐编码！******

# asp.net - 如何在全球范围内更改路线？

> ID：11223990
> 
> 赞同：5
> 
> 时间：2012-06-27T10:19:26.350
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-3, routes

我想在两种语言（PL 和 EN）之间切换我在 MVC 3 中的视图。我在 Views-EN 和 PL 中创建了两个文件夹。因此，在任何站点上单击适当的语言链接后，我希望我的路线更改为：

```
routes.MapRoute(
                "pl", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "PL", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            ); 
```

到：

```
routes.MapRoute(
                "en", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "EN", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            ); 
```

当我单击适当的链接（语言切换器）时，它会更改对所有线程都持久的 CultureInfo。_带有切换器的布局视图：

```
<ul>
    <li>@Html.ActionLink("En", "ChangeCulture", null, new { lang = "en"}, null)</li>
    <li>@Html.ActionLink("Pl", "ChangeCulture", null, new { lang = "pl"}, null)</li>
</ul> 
```

和控制器（它还设置静态变量 lang 可以在每个控制器的方法中看到并且在请求之间保持不变）：

```
public ActionResult ChangeCulture(string lang)
    {

        PLController.lang = lang;
        CultureSettings setCulture = new CultureSettings();
        setCulture.InitializeCulture(lang);
        cookie.Value = CultureInfo.CurrentCulture.Name;
        this.ControllerContext.HttpContext.Response.Cookies.Add(cookie);
        return View("Index");
    } 
```

从 Page 类重写 InitializeCulture 方法，如下所示：

```
public class CultureSettings : Page{

    public void InitializeCulture(string culture)
    {
            String selectedLanguage;
            if(culture == null)
            {
                selectedLanguage = "pl";
            }
            else
            {
                selectedLanguage = culture;
            }

            UICulture = selectedLanguage;
            Culture = selectedLanguage;

            Thread.CurrentThread.CurrentCulture =
                CultureInfo.CreateSpecificCulture(selectedLanguage);
            Thread.CurrentThread.CurrentUICulture = new
                CultureInfo(selectedLanguage);

        base.InitializeCulture();
    }
} 
```

它正确设置 CultureInfo。现在我想（根据当前的 CultureInfo）为每个导航链接切换路线，并将路线模式从 mysite.com/PL/{controller}/{action} 更改为 mysite.com/EN/{controller}/{action}。

有没有人对这个问题有任何想法或更好的方法？但条件是地址必须看起来像这个 mysite.com/EN 或 mysite.com/PL - 没有不同（即 en.mysite.com）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T13:06:16.350

您必须决定的第一件事是存储当前用户语言的位置。有不同的可能性：

*   每个网址的一部分
*   曲奇饼
*   会议

恕我直言，出于 SEO 目的，最好将其作为 url 的一部分。

所以我建议编写一个自定义路由，它将从 url 解析语言并设置当前线程文化：

```
public class LocalizedRoute : Route
{
    public LocalizedRoute()
        : base(
            "{lang}/{controller}/{action}/{id}",
            new RouteValueDictionary(new
            {
                lang = "en-US",
                controller = "home",
                action = "index",
                id = UrlParameter.Optional
            }),
            new RouteValueDictionary(new
            {
                lang = @"[a-z]{2}-[a-z]{2}"
            }),
            new MvcRouteHandler()
        )
    {
    }

    public override RouteData GetRouteData(HttpContextBase httpContext)
    {
        var rd = base.GetRouteData(httpContext);
        if (rd == null)
        {
            return null;
        }

        var lang = rd.Values["lang"] as string;
        if (string.IsNullOrEmpty(lang))
        {
            // pick a default culture
            lang = "en-US";
        }

        var culture = new CultureInfo(lang);

        Thread.CurrentThread.CurrentCulture = culture;
        Thread.CurrentThread.CurrentUICulture = culture;

        return rd;
    }
} 
```

我们现在可以在以下位置注册此自定义路由`Global.asax`：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.Add("Default", new LocalizedRoute());
} 
```

好的，现在让我们有一个模型：

```
public class MyViewModel
{
    [DisplayFormat(DataFormatString = "{0:d}")]
    public DateTime Date { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View(new MyViewModel
        {
            Date = DateTime.Now
        });
    }

    public ActionResult Test()
    {
        return Content(DateTime.Now.ToLongDateString());
    }
} 
```

还有一个观点：

```
@model MyViewModel

@Html.DisplayFor(x => x.Date)

<ul>
    <li>@Html.ActionLink("switch to fr-FR", "index", new { lang = "fr-FR" })</li>
    <li>@Html.ActionLink("switch to de-DE", "index", new { lang = "de-DE" })</li>
    <li>@Html.ActionLink("switch to en-US", "index", new { lang = "en-US" })</li>
</ul>

@Html.ActionLink("Test culture", "test") 
```

现在，当您单击链接时，我们正在更改语言，这种语言现在是路线的一部分。请注意，一旦您选择了语言，该语言将如何保留在`test`链接的路由中。

Scott Hanselman 还写了[一篇](http://www.hanselman.com/blog/GlobalizationInternationalizationAndLocalizationInASPNETMVC3JavaScriptAndJQueryPart1.aspx)关于 ASP.NET 本地化和全球化的精彩博客文章，值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:35:50.860

此解决方案不会解决此问题：

```
english: /en/home

french: /fr/accueil

english: /en/contactus

french: /fr/contacteznous 
```

它只会做

```
/en/home

/fr/home 
```

您还应该在字典中本地化路线并进行查找。

# iphone - 转向行为教程：路径跟随

> ID：11223998
> 
> 赞同：1
> 
> 时间：2012-06-27T10:20:01.260
> 
> 标签：iphone, cocos2d-iphone, racing

我正在开发一款赛车游戏。我几乎完成了原型，但有一件事。我无法添加对手的汽车。我搜索了转向行为，找到了一个很酷的 Wandering 教程。但是在路径跟踪上找不到太多用处。

我找到[了这个链接](http://www.red3d.com/cwr/steer/gdc99/ "这个链接")，但帮助我理解了很多。

有没有人帮助我提供一些关于转向行为的好教程，这将帮助我掌握基本概念..？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T11:44:10.337

这是不平凡的。除非您希望它们的行为不切实际，否则汽车不仅会遵循路径。你需要的是一个人工智能驱动程序。一个好的驾驶人工智能会检查它前面的东西，然后决定或多或少地朝一个方向行驶，或者刹车或踩油门。

[本文介绍了一些基础知识。](http://www.codeproject.com/Articles/14840/Artificial-Intelligence-in-Games)

对于最简单的解决方案，我建议使用航路点 AI，汽车只是试图前往您布置的预定路径的下一个航路点。根据过去、当前和下一个航路点之间的角度，人工智能可以决定转向多少以及是否踩刹车来转弯。您需要通过检查汽车是否在合理范围内来确保 AI 确实能够识别到达航点。两个航路点之间的距离必须大于这个范围，否则AI容易向前跳甚至可能折返。