# StackOverflow 问答 11718000-11718999

# android-4.0-ice-cream-sandwich - ICS 上的 wifi-direct：如何获取设备名称？

> ID：11718002
> 
> 赞同：0
> 
> 时间：2012-07-30T08:43:16.940
> 
> 标签：android-4.0-ice-cream-sandwich, wifi-direct

首先，

Decive A 和 B 都启用 wifi-direct。

然后，

当设备 A 尝试连接设备 B 时，设备 B 上会显示一个对话框。

该对话框上的话：

```
<string name="wifi_p2p_pbc_go_negotiation_request_message">Wi-Fi Direct connection setup request from <xliff:g id="p2p_device_address">%1$s</xliff:g>. Click OK to accept. </string> 
```

它显示了 A 的 decive-mac-address，如果我想显示 A 的设备名称，我该怎么办？

因为我可以在设备列表中获得 A 的名称，这是一个偏好。

======================

这是来自 wifip2pconfig 类的 A 的 decive-mac-address。

WifiP2pService.java (frameworks\base\wifi\java\android\net\wifi\p2p)

```
private void notifyP2pGoNegotationRequest(WifiP2pConfig config {

    //... ...

    dialog.setMessage(r.getString(R.string.wifi_p2p_pin_go_negotiation_request_message,
                    config.deviceAddress));

    //... ...

} 
```

WifiP2pConfig.java (frameworks\base\wifi\java\android\net\wifi\p2p)

```
public WifiP2pConfig(String supplicantEvent) throws IllegalArgumentException {  

    //... ...

    String[] tokens = supplicantEvent.split(" ");

    deviceAddress = tokens[1];   

    //... ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:13:03.170

参考[Wifi-Direct API](http://developer.android.com/guide/topics/connectivity/wifip2p.html)，当发现对等点时，对于每个 WifiP2pDevice 您可以获得设备名称。

# ios - 消失的标签栏

> ID：11718004
> 
> 赞同：0
> 
> 时间：2012-07-30T08:43:35.090
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller

我有一个 TabBarController 作为我的应用程序的根，其中一个选项卡通向带有 Pin 注释的 MapView。MapView 本身嵌入在 NavigationController 中。

在选项卡之间切换时，除了第二次选择 MapView 时 TabBar 消失之外，一切正常。但是，如果随后选择了地图图钉并按下详细信息视图，TabBar 会重新出现并且随后似乎可以正常工作。

任何有关为什么会发生这种情况的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:30:02.877

以下情况如何：

*   窗口 RootViewController = UINavigationController
    *   YourRootController（实现 TabBarController 或子类）

代码（即在 AppDelegate 中）：

```
YourRootCtrl *cont = [[YourRootCtrl alloc] init];

UINavigationController *navi = [[UINavigationController alloc] initWithRootViewController:cont];
navi.delegate = self;
[cont release];

[self.window setRootViewController:navi]; 
```

# c# - 在网格行上添加 OnClick 事件并根据选择打开新网格

> ID：11718005
> 
> 赞同：0
> 
> 时间：2012-07-30T08:43:35.283
> 
> 标签：c#, asp.net

您可以在下面找到我的网格的代码，到目前为止一切正常。现在我想在 RegionProjectname 上添加 Click 事件，这样当我单击 Region 项目名称行时，该列的 RegionProjectID 将存储在会话变量中，并且将根据所选行打开一个新网格。请编辑或指导我如何做到这一点。

我已经在网格中添加了 Select 行，它也可以正常工作，但我发表了评论。

```
 <asp:GridView ID="ResultGridView" runat="server" AutoGenerateColumns="False" ShowFooter="true"
    DataKeyNames="RegionProjectID" 
    AllowPaging="True" 
    CellPadding="3" 
    OnPageIndexChanging="ResultGridView_PageIndexChanging" 
    OnRowDeleting="ResultGridView_RowDeleting" 
    CssClass="mGrid"
    OnRowEditing="ResultGridView_RowEditing" OnRowUpdating="ResultGridView_RowUpdating" OnRowCancelingEdit="ResultGridView_RowCancelingEdit" PageSize="15" BackColor="#DEBA84" BorderColor="#DEBA84" BorderStyle="None" BorderWidth="1px" CellSpacing="2" OnRowCommand="ResultGridView_RowCommand" >
        <Columns>
            <asp:BoundField DataField="RegionProjectID" HeaderText="Region ID" InsertVisible="False"
                ReadOnly="True" SortExpression="RegionProjectID" Visible="false" />
            <asp:TemplateField HeaderText="Region Name" SortExpression="RegionProjectName">
                <EditItemTemplate>
                    <asp:TextBox ID="txtRegion" Width="250px" runat="server" Text='<%# Bind("RegionProjectName") %>'></asp:TextBox>
                </EditItemTemplate>
                <FooterTemplate>
                <asp:TextBox ID="txtRegion1" runat="server"  Width="250px"></asp:TextBox> 
                </FooterTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("RegionProjectName") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>

            <asp:TemplateField HeaderText="Edit" ShowHeader="False"> 
            <EditItemTemplate> 
              <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" CommandName="Update" Text="Update"></asp:LinkButton> 
              <asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel"></asp:LinkButton> 
            </EditItemTemplate> 
            <FooterTemplate> 
              <asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="AddNew" Text="Add New"></asp:LinkButton> 
            </FooterTemplate> 
            <ItemTemplate> 
              <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" CommandName="Edit" Text="Edit"></asp:LinkButton> 
            </ItemTemplate> 
            </asp:TemplateField> 
            <asp:CommandField HeaderText="Delete" ShowDeleteButton="True"  ShowHeader="True" /> 
           <%-- <asp:CommandField HeaderText="Select" ShowSelectButton="True"  ShowHeader="True" on/> --%>

        </Columns>
        <RowStyle BackColor="#FFF7E7" ForeColor="#8C4510" />
        <FooterStyle BackColor="#F7DFB5" ForeColor="#8C4510" />
        <PagerStyle ForeColor="#8C4510" HorizontalAlign="Center" />
        <%--<SelectedRowStyle BackColor="#738A9C" Font-Bold="True" ForeColor="White" />--%>
        <HeaderStyle BackColor="#A55129" Font-Bold="True" ForeColor="White" />
    </asp:GridView>
private void FillVendorGrid()
    {
        dataTable = new DataTable();
        cmd.Connection = conn;
        cmd.CommandText = "SELECT * FROM RegionAndProjectInfo where natureofWorkID= " + ddlnatureOfWork.SelectedValue.ToString(); ;
        ad = new SqlDataAdapter(cmd);
        ad.Fill(dataTable);
        ResultGridView.DataSource = dataTable;
        ResultGridView.DataBind();
    }

    protected void ResultGridView_RowEditing(object sender, GridViewEditEventArgs e)
    {
        ResultGridView.EditIndex = e.NewEditIndex;
        FillVendorGrid();
    }

    protected void ResultGridView_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        ResultGridView.PageIndex = e.NewPageIndex;
        FillVendorGrid();
    }

    protected void ResultGridView_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {
        cmd.Connection = conn;
        cmd.CommandText = "DELETE FROM RegionAndProjectInfo WHERE RegionProjectID='" + ResultGridView.DataKeys[e.RowIndex].Values[0].ToString() + "'";
        conn.Open();
        cmd.ExecuteNonQuery();
        conn.Close();
        FillVendorGrid();

    }

    protected void ResultGridView_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        TextBox txtRegionname = (TextBox)ResultGridView.Rows[e.RowIndex].FindControl("txtRegion");
        TextBox txtNatureOFWork = (TextBox)ResultGridView.Rows[e.RowIndex].FindControl("txtNatureOFWork");
        cmd.Connection = conn;
        cmd.CommandText = "UPDATE RegionAndProjectInfo SET RegionProjectName ='" + txtRegionname.Text + "'   WHERE RegionProjectID='" + ResultGridView.DataKeys[e.RowIndex].Values[0].ToString() + "'";
        conn.Open();
        cmd.ExecuteNonQuery();
        ResultGridView.EditIndex = -1;
        FillVendorGrid();
        conn.Close();

    }

    protected void ResultGridView_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
    {
        ResultGridView.EditIndex = -1;
        FillVendorGrid();

    }

    protected void ResultGridView_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName.Equals("AddNew"))
        {

            TextBox txtRegion1 = (TextBox)ResultGridView.FooterRow.FindControl("txtRegion1");
            TextBox txtNatureOFWork1 = (TextBox)ResultGridView.FooterRow.FindControl("txtNatureOFWork1");
            if (txtRegion1.Text != "")
            {
                cmd.Connection = conn;
                cmd.CommandText = "INSERT INTO RegionAndProjectInfo(RegionProjectName, NatureOFWorkID ) Values('" + txtRegion1.Text + "', '" + ddlnatureOfWork.SelectedValue.ToString() + "')";
                conn.Open();
                cmd.ExecuteNonQuery();
            }
            FillVendorGrid();
            conn.Close();
        }
    }

    protected void ddlnatureOfWork_SelectedIndexChanged(object sender, EventArgs e)
    {
        FillVendorGrid();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:48:47.773

您好，您可以尝试使用此代码

1.  首先在您的列中添加 ButtonField

    ```
    <asp:buttonfield buttontype="Link" commandname="Add" text="Add"/> 
    ```

2.  添加事件 GridView_RowCommand

    ```
    void GridView_RowCommand(Object sender, GridViewCommandEventArgs e)
    {
            if(e.CommandName=="Add")
            {
               int index = Convert.ToInt32(e.CommandArgument);

               GridViewRow row = ContactsGridView.Rows[index];

               Session["YourKey"] = ...;
            } 

    } 
    ```

# c# - 您可以在 C# 中以编程方式创建表单域吗？

> ID：11718007
> 
> 赞同：0
> 
> 时间：2012-07-30T08:43:39.447
> 
> 标签：c#, xml, winforms

假设我必须通过读取 XML 文件在表单上显示详细信息，并根据编号。我想在表单中显示详细信息的元素。有可能这样做吗？

例如：假设我的 XML 文件包含以下内容

```
<Rooms>
     <Room>
           <Name>A</Name>
           <ID>1</ID>
      </Room>
      <Room>
            <Name>B</Name>
            <ID>2</ID>
      </Room>
 </Rooms> 
```

我可以在表格中显示上述详细信息。如果我在 xml 文件中添加另一个房间元素，

```
 <Room>
          <Name>C</Name>
          <ID>3</ID>
    <Room> 
```

我也想在表单中显示它。这真的可能吗？还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:45:44.050

您可以使用[LINQ-XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)解析 XML 文档，准备一个`List<T>`并使用*控件*显示结果- 如 DataGridView、ListView 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T08:16:53.443

我的建议 - 将您的 XML 转换为强类型对象（即`Room`具有给定属性的对象），您可以将其加载到`List<Room>`.

一旦你有了它，你现在就可以通过编程方式添加删除等。

现在您需要将您的 UI 绑定到该信息 - 使用[`DataGridView`](http://msdn.microsoft.com/en-us/library/e0ywh3cz.aspx)控件是一种廉价的方法 - 与数据源一起，它将自动支持编辑和添加/重新排序/删除。

如果您想要更复杂的东西，您可以为该`Room`类型创建一个自定义 UserControl，然后也许另一个来充当这些类型的容器。

我不会发布任何代码，因为我认为您可以使用很多选项 - 而且您还没有真正解释过您尝试过的内容 - 更进一步最终会使这个答案变得很长！需要我的建议 - 首先了解 DataGridView，如何自定义列格式并为此提供自定义控件 - 它会让您很好地了解您可能想要从完全自己的解决方案中获得什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T08:48:49.877

当然，这是可能的。

但最好的选择取决于你想用它做什么。你要编辑数据吗？还是只是展示一下？有许多选项，您可以以网格形式显示它，或者像您建议的那样，创建控件运行时。但是你必须知道哪些控件和不同数据的不同控件（标签或文本框，或者是 texbox（如果是 ID）是只读的。你将如何确定这些东西？还有当你创建控件确保您以某种方式使其可滚动，您不知道您获得了多少数据，因此您的表单可能变得无限长！

对于实际创建控件，您可以检查：http: [//support.microsoft.com/kb/319266](http://support.microsoft.com/kb/319266)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-30T08:51:09.710

对的，这是可能的。传统上，您会在您的 aspx.cs 文件的 Page_Init 方法和类似于以下伪代码的用户代码中循环遍历您的节点：

```
foreach(//loop specified here) {
  Page.Form.Controls.Add(new TextBox() {Id = "Room" + loopValue});
} 
```

然后在回发时，您应该能够使用类似的循环来访问您的动态控件来重建 Id。该视频应更详细地介绍该概念。

[http://www.asp.net/web-forms/videos/aspnet-ajax/how-to-dynamically-add-controls-to-a-web-page](http://www.asp.net/web-forms/videos/aspnet-ajax/how-to-dynamically-add-controls-to-a-web-page)

# java - 使用生成的 Id 安全持久化新 JPA 实体的最佳实践

> ID：11718008
> 
> 赞同：1
> 
> 时间：2012-07-30T08:43:41.953
> 
> 标签：java, jpa, jpa-2.0

从用户输入创建新实体时，我不能确定没有其他实体具有相同的数据。我能够找到的唯一示例使用了预定义的 Id，因此可以通过调用来检查实体是否存在`entityManager.find(id)`。如果生成了 id，我看到了几种安全持久的方法：

*   打电话`entityManager.persist`并希望最好 - 抓住`EntityExistsException`并吞下它或显示错误消息
*   打电话`entityManager.merge`让 JPA 进行检查……它会一直正常工作吗？
*   通过查询搜索实体 - jPQL 或条件，`entityManager.persist`如果未找到则调用

我的直觉是采用第三种方法，但还有更好的方法吗？

我正在使用 JPA 2，并希望避免使用特定于供应商的解决方案（如 Hibernate 的`SessionManager.saveOrUpdate`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:54:26.447

如果您真的无法预测新生成的 ID 是否唯一，我肯定会采用第三种方法。

此外，我认为您不需要 Criteria 来进行如此简单的查询，并且在大多数情况下，额外查询的成本不会很高。

# java - Java [android]：我应该使用同步的信号量对象吗？

> ID：11718013
> 
> 赞同：0
> 
> 时间：2012-07-30T08:44:02.603
> 
> 标签：java, android, multithreading

我有 2 个线程。

第一个调用这个函数

```
public int doCompute1(obj)
{
    if (obj.state == OK_FOR_COMPUTE1)
    {
      // do something
      obj.state = OK_FOR_COMPUTE2;
    }
} 
```

第二个线程调用这个函数

```
public int doCompute2(obj)
{
    if (obj.state == OK_FOR_COMPUTE2)
    {
      // do something
      obj.state = OK_FOR_COMPUTE1;
    }
} 
```

目前它似乎工作得很好！

我的问题是：它正确吗？是否有可能在多核处理器上，obj.state 位于缓存内存中，然后通过线程修改此值，第二个线程不会看到？

如果此代码不正确，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:48:29.660

```
synchronized(obj){  
    if (...){ 
    }
} 
```

会做的东西

编辑：

同步做什么？

```
synchronized(obj){  //if obj is not locked,i lock it and go to the if instruction.if obj is locked, i'm waiting for its unlocking

          //some stuff that will run with no thread-interruption caused by other synchronized block locked on the obj object 

    }//the obj object is unlocked and let other methods enter their synchronized(obj) block 
```

# c# - 在 C# 中重用 C 中的结构

> ID：11718017
> 
> 赞同：3
> 
> 时间：2012-07-30T08:44:17.627
> 
> 标签：c#, c, dll, struct, marshalling

是否可以从 C dll 导入 C# 结构定义？

在我看到的所有示例中，都是重新定义 C# 中的结构。如果结构发生变化怎么办？我需要在我的项目中的两个位置进行更改...

```
struct MyCStruct
{
    unsigned long A;
    unsigned long B;
    unsigned long C;
}; 
```

在 C# 中：

```
 [StructLayout(LayoutKind.Sequential)]
    internal struct MyCStructAgain
    {
        public uint A;
        public uint B;
        public uint C;
    } 
```

如果无法重用定义，那是为什么呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:51:40.177

您可以将结构编译为 C++/CLI，其中编译器会为您生成托管对应项，然后您可以引用它们。您需要一个 ifdef 来添加值以使其成为 .NET 结构。

```
#ifdef CLIEXPORT
#define value
#endif

CLIEXPORT struct MyCStruct
{
    unsigned long A;
    unsigned long B;
    unsigned long C;
}; 
```

# cocoa - 自定义 UITableViewController 不加载静态单元格

> ID：11718018
> 
> 赞同：5
> 
> 时间：2012-07-30T08:44:20.543
> 
> 标签：cocoa

我正在尝试使用静态单元格，因此我制作了一个表格视图并在其中嵌入了一个`UITableViewController`，然后添加了一些静态单元格。一切正常，直到我创建了一个新`UITableViewController`类并通过界面构建​​器将其连接为自定义类。从那时起，当我构建应用程序时，它只显示一个空的 Tableview，其中没有任何单元格，现在我想知道我错过了什么。

我尝试了一些研究，我怀疑我会是第一个问的人，但显然我一定一直在寻找错误的东西。我想一定有什么东西要去`ViewDidLoad`，所以静态单元格被加载了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T18:39:47.433

这是解决方案：

从 .m 文件中删除以下方法：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T16:36:43.000

汉斯说的。此外，请确保如果您将 UITableViewController 子类化，这些方法也会从中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:08:12.053

如果您使用的是模板`UITableViewController`，它可能为您创建了很多骨架`UITableViewDelegate`和`UITableViewDataSource`方法。当您使用带有静态单元格的 Storyboard 时，您不应该实现这些方法；只需从您的控制器中删除它们。

# objective-c - 用于大图像的 CIFilter inputIntensity 滑块

> ID：11718021
> 
> 赞同：5
> 
> 时间：2012-07-30T08:44:27.613
> 
> 标签：objective-c, macos, cocoa, cifilter

我已经实施`NSSlider`了`CIFilter inputIntensity`调整。它的工作。但是当我尝试调整`CIFilter`大图像的强度时，它是滞后的。Slider 设置为`continuous`，因为我需要用户在移动滑块时能够看到效果。当滑块被移动时，我的应用程序开始滞后很多。有没有可能的解决方案可以做到没有滞后？因为我看到许多具有此功能并且运行良好的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T14:13:28.293

例如，您可以合并更新，因此不会为滑块触发的每个事件更新过滤器参数，而是仅每 200 毫秒更新一次。

如果您有招聘图像，或者在高分辨率图像上方显示的低分辨率图像上显示过滤器更改，并在滑块拖动结束时更新大图像。

# ruby - 如何使用 Ruby 将数组的内容添加到电子表格中

> ID：11718023
> 
> 赞同：0
> 
> 时间：2012-07-30T08:44:31.523
> 
> 标签：ruby, csv, axlsx

我在[http://h10010.www1.hp.com/wwpc/ie/en/ho/WF06b/321957-321957-3329742-89318-89318-5186820-5231694.html?dnr=1抓取网页](http://h10010.www1.hp.com/wwpc/ie/en/ho/WF06b/321957-321957-3329742-89318-89318-5186820-5231694.html?dnr=1)

首先，我创建所需的关键字（线索）数组，然后执行 Xpath 查询，将结果输入 CSV。一切顺利，但电子表格需要更好的格式，以便最终用户可以复制和粘贴

有没有一种方法可以使用 CSV 或 Axslx 来实现我想要的外观

我的代码如下：

```
require 'rubygems'
require 'nokogiri'   
require 'open-uri'
require 'CSV'
require 'axlsx'

#Set encoding options to remove nasty Trademark symbols
  encoding_options = {
    :invalid           => :replace,  # Replace invalid byte sequences
    :undef             => :replace,  # Replace anything not defined in ASCII
    :replace           => '',        # Use a blank for those replacements
    :universal_newline => true       # Always break lines with \n
  }

doc = Nokogiri::HTML(open("http://h10010.www1.hp.com/wwpc/ie/en/ho/WF06b/321957-321957-3329742-89318-89318-5186820-5231694.html?dnr=1"))
#For each break create a ;
doc.css('br').each{ |br| br.replace ';' }

clues = Array.new
clues << 'Operating system'
clues << 'Processors'
clues << 'Chipset'
clues << 'Memory type'
clues << 'Hard drive'
clues << 'Graphics'
clues << 'Ports'
clues << 'Webcam'
clues << 'Pointing device'
clues << 'Keyboard'
clues << 'Network interface'
clues << 'Chipset'
clues << 'Wireless'
clues << 'Power supply type'
clues << 'Energy efficiency'
clues << 'Weight'
clues << 'Minimum dimensions (W x D x H)'
clues << 'Warranty'
clues << 'Software included'
clues << 'Product color'

CSV.open("output.csv", "wb") do |csv|
  #1\. Output the Clues header
  #2\. Scrape the output/force encoding to remove special characters
    csv << clues
    csv << clues.map{|clue| doc.at("//td[text()='#{clue}']/following-sibling::td").text.strip.encode Encoding.find('ASCII'), encoding_options}
  #end loop
end 
```

我的代码可以将整个数组添加到一行，但是我怎么说 foreach 数组中的项目将它添加到换行符？我试过 \n 但它没有用。

**我得到的输出**

![我得到的输出](../Images/1024de636f91741981a4ae044aa2d788.png)

**我想要的输出**

![我想要的输出](../Images/8aef45d9ce0c6a2513997255634604ce.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:31:07.493

我是 randym，axlsx 的作者。我想你想这样做：

```
clues = Array.new
clues << 'Operating system'
clues << 'Processors'
clues << 'Chipset'
clues << 'Memory type'

Axlsx::Package.new do |p|
  p.workbook do |wb|
    wb.add_worksheet do |sheet|
      clues.each { |clue| sheet.add_row [clue] }
    end
  end
  p.serialize 'My_Spreadsheet.xlsx'
end 
```

至于你的第二个问题：

```
selector = "//td[text()='%s']/following-sibling::td"
data = clues.map do |clue| 
         xpath = selector % clue
         [clue, doc.at(xpath).text.strip]
       end 
```

然后使用

```
data.each { |datum| sheet.add_row datum } 
```

当您构建工作表时

```
require 'rubygems'
require 'nokogiri'   
require 'open-uri'
require 'axlsx'

doc = Nokogiri::HTML(open("http://h10010.www1.hp.com/wwpc/ie/en/ho/WF06b/321957-321957-3329742-89318-89318-5186820-5231694.html?dnr=1"))
#For each break create a ;
doc.css('br').each{ |br| br.replace ';' }

clues = Array.new
clues << 'Operating system'
clues << 'Processors'
clues << 'Chipset'
clues << 'Memory type'
clues << 'Hard drive'
clues << 'Graphics'
clues << 'Ports'
clues << 'Webcam'
clues << 'Pointing device'
clues << 'Keyboard'
clues << 'Network interface'
clues << 'Chipset'
clues << 'Wireless'
clues << 'Power supply type'
clues << 'Energy efficiency'
clues << 'Weight'
clues << 'Minimum dimensions (W x D x H)'
clues << 'Warranty'
clues << 'Software included'
clues << 'Product color'

selector = "//td[text()='%s']/following-sibling::td"
data = clues.map do |clue| 
         xpath = selector % clue
         [clue, doc.at(xpath).text.strip]
       end

Axlsx::Package.new do |p|
  p.workbook.add_worksheet do |sheet|
    data.each { |datum| sheet.add_row datum }
  end
  p.serialize 'output.xlsx'
end 
```

屏幕截图供您欣赏。 ![在此处输入图像描述](../Images/aeb469ff38d6b0952454e49e049a567c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:59:16.777

尝试类似：

```
CSV.open("output.csv", "wb") do |csv|
  clues.each do |clue|
    value = doc.at("//td[text()='#{clue}']/following-sibling::td").text.strip.encode Encoding.find('ASCII'), encoding_options
    cvs << [clue, value]
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T08:47:08.740

使用 each 遍历数组：

```
clues.each do |clue|
  sheet.add_row [clue]
end 
```

# oledb - 使用 oledb 提供程序使用 vb.net 打开 excel 文件

> ID：11718024
> 
> 赞同：0
> 
> 时间：2012-07-30T08:44:31.937
> 
> 标签：oledb, vb.net-2010

使用 vb.net 将 excel 文件值写入记事本。在我的代码中，我使用 oledb 提供程序打开 excel 文件。但是在打开 excel 文件时出现错误。该文件名为“phone data.xlsx”。存储在我的系统桌面中。使用文件上传控制来获取该文件。

```
my code
-------
 Dim pathToCheck As String = filename
    If System.IO.File.Exists(pathToCheck) = "True" Then

        IO.File.Delete(filename)
    End If
    Dim sw As System.IO.StreamWriter = New System.IO.StreamWriter("D:\modellog.txt", True, System.Text.Encoding.UTF8)

    If FileUpload2.HasFile Then
        TextBox1.Text = FileUpload2.FileName
        Dim MyConnection As System.Data.OleDb.OleDbConnection
        Dim Ds As System.Data.DataSet
        Dim MyCommand As System.Data.OleDb.OleDbDataAdapter
        Try
            MyConnection = New System.Data.OleDb.OleDbConnection(("provider=Microsoft.ACE.OLEDB.12.0; " + ("data source=" _
                                  + (TextBox1.Text + ("; " + "Extended Properties=Excel 12.0;")))))
            MyCommand = New System.Data.OleDb.OleDbDataAdapter _
                ("select * from [Sheet1$]", MyConnection)
            Ds = New System.Data.DataSet
            MyCommand.Fill(Ds)

error
-----
The Microsoft Office Access database engine cannot open or write to the file ''. It is already opened exclusively by another user, or you need permission to view and write its data. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:16:24.183

看起来是权限问题。您是否尝试过将文件复制到其他地方，例如 C:\temp？您是否尝试过至少暂时授予文件中的每个人完全控制权？如果它在那之后工作，你知道这是一个权限问题，然后你只需要弄清楚适当的权限级别是什么（不想让每个人都完全控制它）。

# php - 使用带有翻译日期的代码时的 PHP 日期错误

> ID：11718031
> 
> 赞同：1
> 
> 时间：2012-07-30T08:45:04.660
> 
> 标签：php, date, translation

每个人的另一个 PHP 日期问题 - 我有我的网站的英文版本的当前代码，它运行良好：

```
$article = &$articles[$i];

if($currentdate != date("F Y", strtotime($article->getDate()))) {   
    $currentdate = date("F Y", strtotime($article->getDate()));                 
    $current_content1 .= "<div class='press-articles-heading'>" . $currentdate . "    </div>";
} 
```

基本上，这样做是从数据库中提取记录并比较日期，以便月份标题仅显示一次，例如 2012 年 7 月，然后是该月的所有记录，然后是 2012 年 6 月等。

如果我在非英语版本的网站上使用相同的代码，我会遇到错误：

```
$article = &$articles[$i];

if($currentdate != date("F Y", strtotime($article->getDate()))) {   
    $currentdate = strftime("%B %Y", strtotime($article->getDate()));                 
    $current_content1 .= "<div class='press-articles-heading'>" . $currentdate . "</div>";
} 
```

这里发生的情况是，尽管它们是相同的，但我得到了每个 db 记录的月份标题。

看不到错误在哪里，有没有人有任何想法？

任何帮助深表感谢。

**更新**

在发布问题之前，我确实尝试了一些事情，但为了保持问题简单，我认为最好将其保留。

我确实尝试了以下方法：

```
$article = &$articles[$i];

if($currentdate != date("F Y", strtotime($article->getDate()))) {   
    $translated_date = strftime("%B %Y", strtotime($article->getDate()));                 
    $current_content1 .= "<div class='press-articles-heading'>" . $translated_date . "</div>";
} 
```

但这并没有解决它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:51:32.207

试试这个：

```
$article = &$articles[$i];

$timeString = strtotime($article->getDate());
$numericDate = strftime('%m %Y', $timeString);

if($currentDate != $numericDate) {
    $currentDate = $numericDate;
    $translatedDate = strftime('%B %Y', $timeString);                 
    $current_content1 .= "<div class='press-articles-heading'>" . $translatedDate . "</div>";
} 
```

这将根据月份和年份的数值进行比较，但会显示本地化的文本值。我使用额外的变量来缓存一些日期解析结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:26:24.377

您正在将 的值与`date('F Y')`的值进行比较`strftime('%B %Y')`。那些可能不会匹配。

# ios - 我将在哪里取消注册 NSNotification？

> ID：11718032
> 
> 赞同：1
> 
> 时间：2012-07-30T08:45:11.433
> 
> 标签：ios, ios5, nsnotificationcenter, nsnotifications

我经常在 viewDidLoad 中注册 NSNotification 并在 dealloc 中取消注册。我们在 ios 5 中没有 dealloc。我将在哪里取消注册 NSNotification？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:48:42.120

你仍然可以在 ARC 中使用 dealloc（我假设这就是你所说的 iOS 5）——只需像以前一样定义方法。只是不要调用 [super dealloc]。

```
- (void) dealloc {
   // unregister and clean up.
   // NO SUPER!
} 
```

我经常使用这种模式——尤其是在检查泄漏时，将 NSLog 放在那里很方便。

# c# - 检查默认浏览器是否打开了域

> ID：11718040
> 
> 赞同：0
> 
> 时间：2012-07-30T08:46:04.073
> 
> 标签：c#, browser

我正在寻找一种方法来检查默认浏览器是否有一个打开特定域地址的选项卡。如果是我喜欢更改此选项卡上的 URL，而不是像我现在使用此代码那样打开一个新选项卡。

```
Process.Start(URL); 
```

这甚至可以通过通用解决方案实现。需要明确的是，我不想只在 IE 中执行此操作，并且我不想为每个浏览器实现一个解决方案。

编辑：我有一个程序可以从程序中打开一个网页。而我想要做的是仅当它尚未打开时才打开此页面，如果它已打开，我只想将其重定向到网站上的其他位置。我希望这更清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:59:38.930

在纯 html 中`<a href="page.html" target="_blank">link</a>`，您可以使用命名目标 ( `target="myWindow"`) 来重用同一个窗口（或选项卡），而不是使用 。

我不确定是否可以在其中指定一个窗口名称`Process.Start`，但您能否在“Process.Start”中使用一个额外的小 html 文件来 a) 在命名窗口中打开真实 URL；b) 关闭用于这个小文件的窗口？

# javascript - 对于通过 JavaScript 隐藏/显示的输入，iOS 中的上一个/下一个按钮被禁用

> ID：11718041
> 
> 赞同：2
> 
> 时间：2012-07-30T08:46:09.230
> 
> 标签：javascript, ios, safari

在 iOS 上的 Mobile Safari 中查看[此内容。](http://oliverjash.github.com/FormAccordion/)当在第一个输入中找到一个值时，将显示第二个输入 - 但在表单中切换到下一个输入的按钮（在 iOS 中固定到键盘）被禁用。

有什么办法可以触发某些东西以便找到这个输入并且我可以点击下一步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:21:10.180

我在这里从臀部射击，但您可以尝试其中一种：

*   将隐藏字段设置为`visibility:hidden; height:0`而不是`display:none`.
    *   可能的缺点：如果这有效，该`next`按钮将始终处于活动状态。
*   在第 136`form-accordion.js`行，按照`$this.blur(); $('body').focus(); $this.focus();`. 虽然丑陋，但它可能会起作用。

# iphone - - (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar 调用时清除搜索栏文本

> ID：11718042
> 
> 赞同：1
> 
> 时间：2012-07-30T08:46:09.120
> 
> 标签：iphone, objective-c, cocoa-touch, ios4

我在我的应用程序中使用搜索栏。在搜索栏键盘上有搜索按钮。在点击搜索按钮时，删除了搜索栏的旧文本。当按下搜索按钮时，此方法调用：

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar 
```

我想清除搜索栏文本，我尝试过使用以下代码：

```
-(void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{
     searchBar.text = nil; 
     //searchBar is object of UISearchBar
} 
```

我已经为搜索栏设置了委托，`searchBarSearchButtonClicked`按下搜索按钮时也会调用该方法。但它不会清除搜索栏文本。

请任何人建议我该怎么做？

# html - 使用 CSS sprite 为不同的 HTML 元素使用单个背景图像

> ID：11718046
> 
> 赞同：1
> 
> 时间：2012-07-30T08:46:28.310
> 
> 标签：html, css, css-sprites

我想问你是否可以为不同的 HTML 元素使用相同的背景图像？

意味着，我有 HTML 代码（其中的一部分）：

```
<div class="src">
 <form action="#">
  <input type="text" class="text" />
  <input type="submit" class="submit" />
 </form>
</div>

<div class="menu">
 <ul class="level1">
  <li class="test1"><a href="#">Test1</a></li>
  <li class="test2"><a href="#">Test2</a></li>
 </ul>
</div> 
```

和简单的CSS

```
.src {
 background: url(images.png) 0 -45px no-repeat;
}

.menu ul.level1 li {
 background: url(images.png) 0 0 no-repeat;
}

.menu ul.level1 li.test1 {
 background-position:-15px -120px;
}

.menu ul.level1 li.test2 {
 background-position: -50px -120px;
} 
```

这个技术好不好？是占用更少的HTTP请求吗？

如何在 CSS 中编写通用背景图像并使用，对于不同的 HTML 元素，只有背景位置？还是不可能？

方法：

```
.generic {
 background: url(images.png) no-repeat;
}

.src {
 background-position: 0 -45px;
}

.menu ul.level1 li {
 background-position: 0 0;
}

.menu ul.level1 li.test1 {
 background-position:-15px -120px;
}

.menu ul.level1 li.test2 {
 background-position: -50px -120px;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:50:31.330

是的，这很好。

您可以简单地为将使用它的每个元素声明背景图像，如下所示：

```
.element1, .element2, .element3 {
 background-image:url(image.png);
 background-repeat:no-repeat;
} 
```

然后像您所做的那样声明每个元素的背景位置。

# actionscript-3 - 音乐文件的专辑艺术

> ID：11718051
> 
> 赞同：0
> 
> 时间：2012-07-30T08:46:40.550
> 
> 标签：actionscript-3, blackberry-playbook

有什么方法可以让我们获得任何音乐文件的专辑封面，我可以提取文件详细信息，如专辑名称、长度、作者、流派、曲目信息。但我很乐意展示专辑封面图片。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:12:33.203

显然，[此页面](http://www.actionscript.org/forums/showthread.php3?t=185677)上的某个人设法编写了一些代码来将图像的数据提取为 ByteArray，然后最终通过 Loader 对象加载它。这是他们提出的代码：

```
var binaryData:ByteArray;
var file:URLLoader = new URLLoader(new URLRequest("test.mp3"));
var finalData:ByteArray = new ByteArray;
var byteCon:Loader = new Loader;
var offset:int; var rLength:int;
var found:Boolean = false;
var end:Boolean = false;
file.dataFormat = URLLoaderDataFormat.BINARY;
file.addEventListener(Event.COMPLETE, handleComplete);
function handleComplete(e:Event):void{
    binaryData = file.data as ByteArray;
    binaryData.position = 0;
    //get offset and length
    while(!found){
        var pos:int = binaryData.readUnsignedInt();
        if(pos == 0x41504943){
            offset = binaryData.position + 20;
        }
        if(pos == 0){
            if (!found){
                rLength = binaryData.position - 1 - offset;
                if(rLength > 5000){
                    found = true;
                }
            }    
        }
        binaryData.position = binaryData.position - 3;
    }
    finalData.writeBytes(binaryData, offset, rLength);
    finalData.position = 0;
    byteCon.loadBytes(finalData);
    addChild(byteCon);
} 
```

当然，这是专门针对 MP3 的，尽管您可以将其调整为其他格式。

# glassfish-3 - Glassfish 3.1 中的多个 DAS

> ID：11718052
> 
> 赞同：0
> 
> 时间：2012-07-30T08:46:48.737
> 
> 标签：glassfish-3

是否可以在 Glassfish 中创建多个 DAS？事实上，我想建立一个冗余架构，以防服务器物理故障。换句话说，如果托管 DAS 的机器出现故障，管理操作不会受到影响，其他实例将获得管理员控制权。

此外，我知道由 DAS 管理的实例不受影响，并且所有实例都在不需要任何 DAS 的情况下继续运行。

我需要这种架构的原因是我有一个监控程序，它连接 DAS 并获取有关实例的统计信息和其他信息。如果 DAS 出现故障，我不知道如何获取此信息。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:26:35.763

根据java论坛的主题。不能创建多个 DAS。这是[一个链接](http://forums.java.net/node/790171)！

# java - 为不同的IP地址动态创建不同的目录

> ID：11718053
> 
> 赞同：0
> 
> 时间：2012-07-30T08:46:49.467
> 
> 标签：java, jsp

我有下面的代码，它在从闪存捕获图像后动态创建目录以存储图像。

如果图像是从不同的 IP 地址捕获的，我想创建具有新名称的新目录，例如“terminal_2”（这里它使用名称 terminal_1 创建）。

例如：目前，如果我的 IP 地址是 192.113.25.13，那么它会创建“terminal_1”目录，如果我的 IP 地址更改为 192.113.37.25，那么它应该创建“terminal_2”目录并将图像存储在“terminal_2”目录中。

我知道如何使用 java 捕获 IP 地址。

```
String fileStoreURL="";
String rootpath="/applicationservices/fileshare/vm/uploads";
fileStoreURL = config.getServletContext().getRealPath("") + rootpath + "/terminal_1";

try {
    File f = new File(fileStoreURL);
    if (!f.exists())
    {
        f.mkdirs();
    }
}
catch (Exception e)
{

}

try {
    long time = new Date().getTime();
    FileOutputStream fileOutputStream = new FileOutputStream(fileStoreURL + "/"+time+".jpg");
    int res;
    while ((res = request.getInputStream().read()) != -1) {
        fileOutputStream.write(res);
    }

    fileOutputStream.close();
/*
 * To make sure each url is differeent and not cached added time to tit
 */
response.getWriter().append(
"http://localhost/......./fileshare/vm/uploads/terminal_1/" + time+ ".jpg");

} catch (Exception e)
{
    e.printStackTrace();
} 
finally 
{   

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:53:33.217

如果我理解正确，那么（如果我错了，请更正）：

1.  您需要存储从特定 IP 地址获得的图像。
2.  对于每个 IP，您需要在服务器上创建一个单独的文件夹，例如（terminal_1、terminal_2 等）。
3.  然后在该文件夹中，您需要存储从特定 IP 获得的图像。

您已经做了以下事情：

1.  获取正在访问您的应用程序的机器的 IP 地址。
2.  在服务器上创建一个文件夹
3.  在该文件夹中创建图像

待办事项：

1.  为不同的 IP 创建不同的文件夹。
2.  检查此 IP 的文件夹是否已创建的逻辑。
3.  `if (folder not created) { then create } else { don't create, just save the image}`.

所以这是我处理未决事物的方法：

1.  您需要维护 IP 地址和文件夹名称之间的某种关系，并将其存储在数据库或服务器文件系统上的文件（如属性文件）中。假设您从 192.168.1.23 获取图像并将其存储在终端 1 中，然后您从 192.167.0.34 获取图像并将其存储在终端 2 中，现在您再次从 192.168.1.23 获取另一个图像，那么您将创建一个新文件夹还是将图像存储在 terminal_1 中。因此，要确定此 IP 地址 (192.167.0.34) 的文件夹是否已创建，您需要维护 IP 地址和文件夹之间的某种关系。
2.  然后，当您从 IP 地址（例如 192.168.1.23）获取图像时，在数据库中搜索 IP 地址：

    ```
    if(no mapping found for this IP Address) {
        // 1) create the folder and give some name for eg: terminal_2
        // 2) store this mapping of IP Address and the folder name
        // 3) Save the image inside this folder
    } else if (mapping found) {
        // 1) fetch the folder name
        // 2) Save the image in this folder
    } 
    ```

希望这可以帮助。

# html - 如何解决横向网站的分辨率设置

> ID：11718054
> 
> 赞同：-2
> 
> 时间：2012-07-30T08:46:54.513
> 
> 标签：html, css, web

我正在设计分辨率为 1024*768 的水平网站，但是当我将计算机分辨率更改为 1600*900 时，网站布局会在屏幕上显示第二页的某些部分。该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:51:33.217

你有几个主要的选择。

*   使用 Javascript 完全禁用网站以检测屏幕分辨率并在分辨率不正确时重定向（*我不建议这样做*）。

*   动态调整所有内容的大小，以便所有内容都根据分辨率进行缩放。

*   用纯色背景填充多余的空间，并将 1024 x 768 区域居中。（*请注意，这不适用于屏幕分辨率小于固定布局尺寸的人*）

当然还有其他选择，但我会考虑这三个。这取决于您要达到的目标。

# php - 在 php 中保存由 fopen() 函数创建的文件？

> ID：11718058
> 
> 赞同：1
> 
> 时间：2012-07-30T08:47:04.460
> 
> 标签：php, fopen

我创建了一个文件，使用 fopen('contacts','w')。现在我想提示用户将此文件保存在他的本地机器中他想要的位置（使用 php）。

任何建议或示例代码将不胜感激。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:54:30.413

假设您的文件 - “联系人”是服务器中现在存在的物理文件。

```
<?php
$file = 'contacts.csv';

if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
}
?> 
```

参考： http: [//php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T08:52:25.107

**下载代码**

```
<?php

// place this code inside a php file and call it f.e. "download.php"
$path = $_SERVER['DOCUMENT_ROOT']."/path2file/"; // change the path to fit your websites document structure
$fullPath = $path.$_GET['download_file'];

if ($fd = fopen ($fullPath, "r")) {
    $fsize = filesize($fullPath);
    $path_parts = pathinfo($fullPath);
    $ext = strtolower($path_parts["extension"]);
    switch ($ext) {
        case "pdf":
        header("Content-type: application/pdf"); // add here more headers for diff. extensions
        header("Content-Disposition: attachment; filename=\"".$path_parts["basename"]."\""); // use 'attachment' to force a download
        break;
        default;
        header("Content-type: application/octet-stream");
        header("Content-Disposition: filename=\"".$path_parts["basename"]."\"");
    }
    header("Content-length: $fsize");
    header("Cache-control: private"); //use this to open files directly
    while(!feof($fd)) {
        $buffer = fread($fd, 2048);
        echo $buffer;
    }
}
fclose ($fd);
exit;
// example: place this kind of link into the document where the file download is offered:
// <a href="download.php?download_file=some_file.pdf">Download here</a>
?> 
```

# c# - .net 滑入式菜单

> ID：11718061
> 
> 赞同：1
> 
> 时间：2012-07-30T08:47:06.750
> 
> 标签：c#, javascript, jquery, asp.net, css

当您将鼠标悬停以显示多个菜单项/链接时，让浮动侧边/顶部菜单展开的最佳方式是什么？

我认为像 jquery 这样的东西是最好的选择，但从哪里开始呢？是否有一个 jquery 插件可以完成上述所有操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:51:58.773

您可以先查看一些在网络中可用的 jQuery Dropdown 插件。它们是免费的，可以大大减少您的工作量。也没有跨浏览器兼容性问题:)

例如：- [http://slodive.com/web-development/best-jquery-dropdown-menus/](http://slodive.com/web-development/best-jquery-dropdown-menus/)

# javascript - 在内部使用 JavaScript 或 JQuery 陈述

> ID：11718063
> 
> 赞同：-1
> 
> 时间：2012-07-30T08:47:18.780
> 
> 标签：javascript, jquery, jstl

我需要做以下工作，有人知道如何做：

```
<script type="text/javascript">
    function raceChecked(raceID){
    return $('#raceCheck_'+raceID).attr('checked');
}
</script>
<div>
    <c:forEach items="${raceEvent.raceList}" var="race">
    <div><input type="checkbox" value="${race.id}" checked="checked" onClick="refreshPage()"/><c:out value="${race.name}"/></div>
    </c:forEach>
</div>  
<c:if test="raceChecked(${race.id})">
  <!--SHOW RACE -->
</c:if> 
```

有趣的部分是最后`<c:if test="raceChecked(${race.id})">` 这不起作用，因为他没有调用 JavaScript 函数！

但我怎样才能使这项工作？我希望用户使用复选框来决定显示哪个种族。这些比赛不能使用 JQuery 隐藏。它们不得显示在源代码中。

有人出主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:01:00.360

JSTL 在服务器上执行，而 javascript 在客户端上执行。`<body onload="raceChecked(${race.id})">`如果您需要检查加载时显示的内容，您可以使用。

# haskell - 为什么这个主要测试这么慢？

> ID：11718067
> 
> 赞同：11
> 
> 时间：2012-07-30T08:47:44.480
> 
> 标签：haskell, primes, sieve-of-eratosthenes

这段代码取自《Haskell Road to Logic, Math and Programming》一书。它实现了埃拉托色尼筛算法并解决了 Project Euler 问题 10。

```
sieve :: [Integer] -> [Integer]
sieve (0 : xs) = sieve xs
sieve (n : xs) = n : sieve (mark xs 1 n)
  where
    mark :: [Integer] -> Integer -> Integer -> [Integer]
    mark (y:ys) k m | k == m = 0 : (mark ys 1 m)
                    | otherwise = y : (mark ys (k+1) m)

primes :: [Integer]
primes = sieve [2..]

-- Project Euler #10
main = print $ sum $ takeWhile (< 2000000) primes 
```

实际上，它的运行速度甚至比天真的素数测试还要慢。有人可以解释这种行为吗？

我怀疑这与在标记函数中迭代列表中的每个元素有关。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-30T10:02:04.870

您正在使用此算法构建二次未评估的 thunk。该算法严重依赖惰性，这也是它无法扩展的原因。

让我们来看看它是如何工作的，希望这能让问题变得明显。简而言之，假设我们想要无穷`print`大的元素，即我们想要一个接一个地评估列表中的每个单元格。定义为：`primes``primes`

```
primes :: [Integer]
primes = sieve [2..] 
```

由于 2 不是 0，因此`sieve`应用了第二个定义，并且 2 被添加到素数列表中，并且列表的其余部分是未评估的 thunk（我使用而不是for`tail`中的模式匹配`n : xs`，所以实际上并不是调用，并且不会在下面的代码中增加任何开销；实际上是唯一的 thunked 函数）：`sieve``xs``tail``mark`

```
primes = 2 : sieve (mark (tail [2..]) 1 2) 
```

现在我们想要第二个`primes`元素。因此，我们遍历代码（读者练习）并最终得到：

```
primes = 2 : 3 : sieve (mark (tail (mark (tail [2..]) 1 2)) 1 3) 
```

再次相同的过程，我们要评估下一个素数......

```
primes = 2 : 3 : 5 : sieve (mark (tail (tail (mark (tail (mark (tail [2..]) 1 2)) 1 3))) 1 5) 
```

这开始看起来像 LISP，但我离题了......开始看到问题了吗？对于列表中的每个元素，必须评估`primes`越来越多的应用程序堆栈。`mark`换句话说，对于列表中的每个元素，必须通过评估`mark`堆栈中的每个应用程序来检查该元素是否被前面的任何素数标记。因此，对于`n~=2000000`，Haskell 运行时必须调用函数，导致调用堆栈的深度约为……我不知道，137900（`let n = 2e6 in n / log n`给出下限）？类似的东西。这可能是导致减速的原因；也许[`vacuum`](http://hackage.haskell.org/package/vacuum)可以告诉你更多（我现在没有一台同时具有 Haskell 和 GUI 的计算机）。

Eratosthenes 的筛子在像 C 这样的语言中起作用的原因是：

1.  您没有使用无限列表。
2.  由于 (1)，您可以在继续 next 之前标记整个数组`n`，从而完全没有调用堆栈开销。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-30T12:09:03.483

不仅是 thunk 导致它非常慢，如果在有限位数组上用 C 语言实现，该算法也会非常慢。

```
sieve :: [Integer] -> [Integer]
sieve (0 : xs) = sieve xs
sieve (n : xs) = n : sieve (mark xs 1 n)
  where
    mark :: [Integer] -> Integer -> Integer -> [Integer]
    mark (y:ys) k m | k == m = 0 : (mark ys 1 m)
                    | otherwise = y : (mark ys (k+1) m) 
```

对于每个素数`p`，该算法检查从`p+1`到极限的所有数字是否是 的倍数`p`。它不是像特纳的筛子那样通过除法来做到这一点，而是通过将计数器与素数进行比较。现在，比较两个数字比除法要快得多，但为此付出的代价`n`是现在检查每个数字的每个素数`< n`，而不仅仅是检查直到`n`的最小素数因子的素数。

结果是该算法的复杂度是 O(N^2 / log N) 与 O( (N/log N)^2 ) 对于 Turner 筛子（和 O(N*log (log N)) 对于一个真实的埃拉托色尼筛）。

这~~嵌套~~¹ [dflemstr 提到](https://stackoverflow.com/a/11719209/1011995)的 thunk 堆叠加剧了问题²，但即使没有这种情况，算法也会比 Turner 的算法更糟糕。我同时感到震惊和着迷。

* * *

¹“嵌套”可能不是正确的词。尽管每个`mark`thunk 只能通过它上面的一个来访问，但它们不会引用封闭 thunk 范围内的任何内容。

² 不过，thunk 的大小或深度都不是二次方的，而且 thunk 的表现相当好。为了说明，让我们假设`mark`用相反的参数顺序定义。然后，当发现 7 是素数时，情况是

```
sieve (mark 5 2 (mark 3 1 (mark 2 1 [7 .. ])))
~> sieve (mark 5 2 (mark 3 1 (7 : mark 2 2 [8 .. ])))
~> sieve (mark 5 2 (7 : mark 3 2 (mark 2 2 [8 .. ])))
~> sieve (7 : mark 5 3 (mark 3 2 (mark 2 2 [8 .. ])))
~> 7 : sieve (mark 7 1 (mark 5 3 (mark 3 2 (mark 2 2 [8 .. ])))) 
```

下一个模式匹配 by`sieve`强制`mark 7 1`thunk，它强制`mark 5 3`thunk，它强制`mark 3 2`thunk，它强制`mark 2 2`thunk，它强制`[8 .. ]`thunk 并将头部替换为 0，并将尾部包裹在一个`mark 2 1`thunk 中。这会冒泡到`sieve`，它会丢弃 0 然后强制下一个 thunk 堆栈。

因此，对于从`p_k + 1`to `p_(k+1)`（包括）的每个数字，模式匹配 in`sieve`强制`k`形成 thunk 的堆栈/链`mark p r`。这些中的每一个都`(y:ys)`从封闭的 thunk 中接收（`[y ..]`对于最里面的`mark 2 r`），并将尾部包装`ys`在一个新的 thunk 中，要么保持`y`不变，要么用 0 替换它，从而在尾部建立一个新的 thunk 堆栈/链列表到达`sieve`。

对于每个找到的素数，在顶部`sieve`添加另一个`mark p r`thunk，因此最后，当找到并完成第一个大于 2000000 的素数时`takeWhile (< 2000000)`，将有 148933 级 thunk。

这里的 thunk 堆叠不会影响复杂性，它只会影响常数因素。在我们正在处理的情况下，一个延迟生成的无限不可变列表，没有太多可以减少将控制从一个 thunk 转移到下一个的时间。如果我们正在处理一个不是延迟生成的有限可变列表或数组，就像在像 C 或 Java 这样的语言中那样，让每个都`mark p`完成它的完整工作会更好（这将是一个`for`开销更少的简单循环比函数调用/控制转移）在检查下一个数字之前，所以永远不会有超过一个标记处于活动状态并且控制传递更少。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-30T10:15:38.620

好吧，你绝对是对的，它比天真的实现要慢。我从 Wikipedia 中获取了这个，并将其与您使用 GHCI 的代码进行了比较，因此：

```
-- from Wikipedia
sieveW [] = [] 
sieveW (x:xs) = x : sieveW remaining 
  where 
    remaining = [y | y <- xs, y `mod` x /= 0]

-- your code
sieve :: [Integer] -> [Integer]
sieve (0 : xs) = sieve xs
sieve (n : xs) = n : sieve (mark xs 1 n)
  where
    mark :: [Integer] -> Integer -> Integer -> [Integer]
    mark (y:ys) k m | k == m = 0 : (mark ys 1 m)
                    | otherwise = y : (mark ys (k+1) m) 
```

运行给

```
[1 of 1] Compiling Main             ( prime.hs, interpreted )
Ok, modules loaded: Main.
*Main> :set +s
*Main> sum $ take 2000 (sieveW [2..])
16274627
(1.54 secs, 351594604 bytes)
*Main> sum $ take 2000 (sieve [2..])
16274627
(12.33 secs, 2903337856 bytes) 
```

为了尝试了解正在发生的事情以及`mark`代码的工作原理，我尝试手动扩展代码：

```
 sieve [2..]
= sieve 2 : [3..]
= 2 : sieve (mark [3..] 1 2)
= 2 : sieve (3 : (mark [4..] 2 2))
= 2 : 3 : sieve (mark (mark [4..] 2 2) 1 3)
= 2 : 3 : sieve (mark (0 : (mark [5..] 1 2)) 1 3)
= 2 : 3 : sieve (0 : (mark (mark [5..] 1 2) 1 3))
= 2 : 3 : sieve (mark (mark [5..] 1 2) 1 3)
= 2 : 3 : sieve (mark (5 : (mark [6..] 2 2)) 1 3)
= 2 : 3 : sieve (5 : mark (mark [6..] 2 2) 2 3)
= 2 : 3 : 5 : sieve (mark (mark (mark [6..] 2 2) 2 3) 1 5)
= 2 : 3 : 5 : sieve (mark (mark (0 : (mark [7..] 1 2)) 2 3) 1 5)
= 2 : 3 : 5 : sieve (mark (0 : (mark (mark [7..] 1 2) 3 3)) 1 5)
= 2 : 3 : 5 : sieve (0 : (mark (mark (mark [7..] 1 2) 3 3)) 2 5))
= 2 : 3 : 5 : sieve (mark (mark (mark [7..] 1 2) 3 3)) 2 5)
= 2 : 3 : 5 : sieve (mark (mark (7 : (mark [8..] 2 2)) 3 3)) 2 5) 
```

我想我可能在最后犯了一个小错误，因为 7 看起来要变成 0 并删除，但机制是明确的。这段代码只是创建了一组计数器，计数到每个素数，在正确的时刻发出下一个素数并将其传递到列表中。这相当于在简单实现中仅检查每个先前素数的除法，以及在 thunk 之间传递 0 或素数的额外开销。

这里可能还有一些我遗漏的微妙之处。Haskell 中对埃拉托色尼筛法进行了非常详细的处理，并在[此处](http://www.haskell.org/haskellwiki/Prime_numbers#Sieve_of_Eratosthenes)进行了各种优化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T03:13:23.377

*简短*的回答：计数筛比特纳的（又名“幼稚”）筛慢，因为它模拟了具有顺序计数的直接 RAM 访问，这迫使它沿着标记阶段之间未*筛分的流传递。*这是具有讽刺意味的，因为*计数*使它成为 Eratosthenes 的*“真正”*筛子，而不是 Turner 的试验师筛子。实际上去除倍数，就像特纳的筛子正在做的那样，会弄乱计数。

*这两种算法都非常慢，因为它们过早*地从每个找到的素数而不是它的平方开始多重消除工作，从而创建了太多不需要的流处理阶段（无论是过滤还是标记）——`O(n)`它们，而不是仅仅`~ 2*sqrt n/log n`，在产生最多`n`在价值上。在输入中看到**`7`**之前不需要检查 的倍数。**`49`**

[这个答案](https://stackoverflow.com/a/8871918/849891)解释了如何`sieve`被视为在其背后构建流处理“转换器”的管道，因为它正在工作：

```
[2..] ==> sieve --> 2
[3..] ==> mark 1 2 ==> sieve --> 3
[4..] ==> mark 2 2 ==> mark 1 3 ==> sieve 
[5..] ==> mark 1 2 ==> mark 2 3 ==> sieve --> 5
[6..] ==> mark 2 2 ==> mark 3 3 ==> mark 1 5 ==> sieve 
[7..] ==> mark 1 2 ==> mark 1 3 ==> mark 2 5 ==> sieve --> 7
[8..] ==> mark 2 2 ==> mark 2 3 ==> mark 3 5 ==> mark 1 7 ==> sieve
[9..] ==> mark 1 2 ==> mark 3 3 ==> mark 4 5 ==> mark 2 7 ==> sieve
[10..]==> mark 2 2 ==> mark 1 3 ==> mark 5 5 ==> mark 3 7 ==> sieve
[11..]==> mark 1 2 ==> mark 2 3 ==> mark 1 5 ==> mark 4 7 ==> sieve --> 11 
```

特纳筛子用来`nomult p = filter ((/=0).(`rem`p))`代替`mark _ p`条目，但在其他方面看起来是一样的：

```
[2..] ==> sieveT --> 2
[3..] ==> nomult 2 ==> sieveT --> 3
[4..] ==> nomult 2 ==> nomult 3 ==> sieveT 
[5..] ==> nomult 2 ==> nomult 3 ==> sieveT --> 5
[6..] ==> nomult 2 ==> nomult 3 ==> nomult 5 ==> sieveT 
[7..] ==> nomult 2 ==> nomult 3 ==> nomult 5 ==> sieveT --> 7
[8..] ==> nomult 2 ==> nomult 3 ==> nomult 5 ==> nomult 7 ==> sieveT 
```

每个这样的转换器都可以实现为闭包框架（也称为“thunk”），或者具有可变状态的生成器，这并不重要。每个这样的生产者的输出直接作为输入进入其链中的继任者。这里没有未评估的 thunk，每个都被其消费者强迫，以产生其下一个输出。

所以，回答你的问题，

> 我怀疑这与在标记函数中迭代列表中的每个元素有关。

是的，**正是。**否则，他们都运行非延期计划。

* * *

因此，可以通过推迟流标记的开始来改进代码：

```
primes = 2:3:filter (>0) (sieve [5,7..] (tail primes) 9)

sieve (x:xs) ps@ ~(p:t) q 
   | x < q = x:sieve xs ps q
   | x==q  = sieve (mark xs 1 p) t (head t^2)
  where
    mark (y:ys) k p 
       | k == p    = 0 : (mark ys 1 p)      -- mark each p-th number in supply
       | otherwise = y : (mark ys (k+1) p) 
```

`O(k^1.5)`根据经验，它现在在`k`产生的素数上运行。但是，当我们可以按增量计数时，为什么要按个数来计数。***（每个第 3 个奇数`9`可以通过添加`6`, 一次又一次地找到。）***然后我们可以立即剔除这些数字，而不是标记，让自己成为一个真正的 Eratosthenes 筛子（即使不是最有效的筛子）：

```
primes = 2:3:sieve [5,7..] (tail primes) 9

sieve (x:xs) ps@ ~(p:t) q 
   | x < q = x:sieve xs ps q
   | x==q  = sieve (weedOut xs (q+2*p) (2*p)) t (head t^2)
  where
    weedOut i@(y:ys) m s 
       | y < m = y:weedOut ys m s
       | y==m  = weedOut ys (m+s) s
       | y > m = weedOut i (m+s) s 
```

`O(k^1.2)`这在生成的素数中运行在上面，`k`编译加载到 GHCi 中的快速 n 脏测试，产生高达 100k - 150k 的素数，退化到`O(k^1.3)`大约 0.5 万个素数。

* * *

那么这样可以实现什么样的加速呢？将 OP 代码与“维基百科”的特纳筛进行比较，

```
primes = sieve [2..] :: [Int]
  where
    sieve (x:xs) = x : sieve [y | y <- xs, rem y x /= 0] 
```

*W/OP 有2k*的**`8x`**加速（即产生 2000 个素数）。但在*4k*时，这是一个加速。特纳筛似乎在产生素数时以经验复杂度运行，而计数筛在相同范围内运行。****`15x`**`O(k^1.9 .. 2.3)``k = 1000 .. 6000``O(k^2.3 .. 2.6)`**

 **对于此答案中的两个版本，v1/W在*4k*和*8k*时**`20x`**更快。v2/v1 为20k *，* 40k*甚至*更快，产生 80,000 个素数。***`43x`*****`5.2x`*****`5.8x`*****`6.5x`******

 ***（作为比较，Melissa O'Neill 的优先级队列代码以`O(k^1.2)`经验复杂度运行，`k`产生的素数。当然，它的扩展性比这里的代码好得多）。

* * *

这是埃拉托色尼定义的筛子：

**P** = { *3* , *5* , ...} \ **⋃** { { *p*p* , *p*p* + *2*p* , ...} | *p*中的**p** }

埃拉托色尼筛法效率的关键是*直接生成多个*素数，通过从每个素数开始计数（两次）素数值的*增量；*以及它们的*直接消除*，这可以通过值和地址的融合来实现，就像整数排序算法一样（仅适用于可变数组）。它是否必须产生预设数量的素数或无限期地工作并不重要，因为它总是可以分段工作。*****

# jquery - 使用 jQueryForm XHR 作为 HTML

> ID：11718069
> 
> 赞同：-1
> 
> 时间：2012-07-30T08:47:46.040
> 
> 标签：jquery

我有这个 JS 代码（使用 jQuery Form 插件）：

```
 function doLogin(responseText, statusText, xhr, $form)  {
        var userbox = $(xhr).html();
        console.log(userbox);
    } 
```

我想`userbox`用作 html，所以我可以剪掉它的一部分（使用`find()`）。我在这里做错了什么？

* * *

完整登录代码：

```
$('#loginForm').submit(function() {
    $(this).ajaxSubmit({
        'success': doLogin,
        'error': showError
    });

    function showError() {
        $('#loginForm').append('<div class="errorMessage" style="display:none">Błędny login lub hasło.</div>');
        $('.errorMessage').fadeToggle();
    }

    function doLogin(responseText, statusText, xhr, $form)  {
        var userbox = $(responseText).html();
        console.log(userbox);
    }

    return false;
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:49:33.220

`xhr`是对您的 XmlHttpRequest 的引用。你打算写`$(responseText).html()`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:08:12.927

好的，问题已经解决了，而且它是 - 几乎总是:) - 我的错误。

正如 David Hedlund 所说，`responseText`这是关键。这是更新的代码，是否有人需要它：

```
 function doLogin(responseText, statusText, xhr, $form)  {
        var userbox = $(responseText).find('div#userBar');

        $('#loginForm').after(userbox)
        console.log(userbox)
    } 
```

# c++ - 复制对象上的 C++ 中的动态绑定

> ID：11718070
> 
> 赞同：0
> 
> 时间：2012-07-30T08:47:49.413
> 
> 标签：c++, virtual-functions, dynamic-binding

我在虚函数中遇到问题：以下是一些代码作为示例：

```
class A
   {
      public : virtual  void print(void)
           {
              cout<< "A::print()"<<endl;
           }
    };
 class B : public A
    {
      public : virtual void print(void)
           {
               cout<<"B::print()"<<endl;
           }
    };
 class C : public A
    {
      public : void print(void)
            {
               cout<<"C::print()"<<endl;
            }
     };
  int main(void)
     {
         A a,*pa,*pb,*pc;
         B b;
         C c;
         pa=&a;
         pb=&b;
         pc=&c;

         pa->print();
         pb->print();
         pc->print();

         a=b;
         a.print();
         return 0;
       } 
```

结果： A::print() B::print() C::print() A::print()

我知道这是一个多态，并且知道有一个名为 virtual-function-table 的表，但我不知道它是如何实现的，并且

```
 a=b;
   a.print(); 
```

结果是：A::print() 不是 B::print()，为什么它没有多态性。谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T08:51:08.110

该对象`a`仍然是*type* `A`。该分配仅从 复制数据`b`，它不会创建`a`对象`B`。

这称为[对象切片](http://en.wikipedia.org/wiki/Object_slicing)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T08:50:41.970

```
a=b;
a.print(); 
```

它将打印`A::print()`，因为会导致*对象*切片，`a=b`这意味着`a`仅获取. 读这个 ：*`b`*

 **   [什么是对象切片？](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c).

请注意，运行时多态性**只能**通过*指针*和*引用*类型来实现。在上面的代码中，`a`既不是*指针*，也不是*引用*类型：

```
A * ptr = &b; //syntax : * on LHS, & on RHS
A & ref =  b; //syntax : & on LHS, that is it!

ptr->print(); //will call B::print() (which you've already seen)
ref.print();  //will call B::print() (which you've not seen yet) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T08:51:12.990

因为`a`不是*指针*。它是 的实例`A`，并且赋值`a=b;` *复制*`b`了to的实例`a`。但是函数调用是在`A`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T08:51:50.953

当你这样做时，`a = b;`你`b`的对象被切片，即只有`A`它的一部分被复制。多态性仅通过指针和引用起作用。搜索“对象切片”以了解该主题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T08:56:17.443

要了解有关虚拟方法表的更多信息，请参阅[wiki](http://en.wikipedia.org/wiki/Virtual_method_table)。但在一般情况下，该表保留了信息方法的地址。因此，表中的 A 类将有一条记录表明方法*print*位于地址 X。当您执行*pa=&b*时， B 类只需将表替换为它的一个，这样方法*print*的地址将指向地址 Y。

但是当您执行*a=b*时，您会复制对象。在这种情况下，多态性不起作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T19:31:12.080

在对类型的对象调用*任何*成员函数之后`A`，您仍然拥有`A`对象（除了显式的析构函数调用，它什么都没有留下）。

```
 a = b; 
```

类实例的分配只是对名为“”的特定成员函数的调用`operator=`。这里的“”没有什么特别之处`operator=`，只是它的名字是标准的。您可以使用其他名称进行分配：

```
a = b;
// you could as well write:
a.assign(b);
// (if such member was defined) 
```

就像你可以写`add(a,b)`而不是`a+b`, 但`a+b`更具可读性。

对函数的显式调用永远不会改变调用它的变量的类型：

```
A a;
foo(a);
// a is still a A
a.bar();
// a is still a A 
```

声明的类型`a`是`A`，并且不能更改为其他类型：这是 的不变量`a`。

对于指针也是如此：类型为指针**的变量`A`将始终具有指向的类型指针`A`**：

```
void foo (A*&);
A *bar();

A a;
A *p = &a;
foo (p); // might change p
// a still has type: pointer to A
p = bar();
// a still has type: pointer to A 
```

但`p`可能指向类型的对象`B`，因此，在运行时，动态类型`*p`将为`B`; 但**动态类型`p`始终是`A*`**.*

# java - 在桌面应用程序中设置权限/功能？

> ID：11718073
> 
> 赞同：1
> 
> 时间：2012-07-30T08:48:09.023
> 
> 标签：java, permissions, desktop-application, modularity

我有一个包含 10 个功能的桌面应用程序，有些客户只要求 8 个功能或 7 个功能。我想有一种方法来管理添加/删除客户端的权限/功能（只有我可以控制）。这样我就可以根据标志隐藏/显示功能。

这应该通过一个包含带有布尔标志的功能名称的属性文件来完成，还是什么？

请给我一些想法，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T23:44:43.337

从您的其他答案中，我觉得出现了以下附加细节；如果我有这些错误，请告诉我：

1.  您将应用程序作为 .jar 文件交付，
2.  每个客户都直接从您那里获得他们的构建，并且有少数客户，
3.  您专门为每个客户配置构建，并且
4.  您不希望您的客户能够修改他们的功能访问权限。

在这种情况下，我会将“活动”功能列表存储在一个散列属性值中，该值存储在一个绑定到 .jar 的 .properties 文件中。我将在下面描述一种方法。在交付之前生成属性文件，将文件添加到 jar 中：

```
jar -uf applicationJarFile.jar configuration.properties 
```

然后签署 .jar 并交付。在运行时，您的应用程序可以加载属性文件，运行每个功能的哈希，与您存储的属性进行比较，并确定哪些是关闭或打开的。

您的属性（用于确定启用哪些功能）可能包含如下列表：

```
feature1=enabled
feature2=disabled
feature3=disabled
feature4=enabled 
```

为自己编写一个实用程序，它对整个字符串“feature1=enabled”加上一个盐值进行哈希处理，例如“feature1=enabledaKn087*h5^jbAS5yt”。（Java 中内置了此代码；例如，请参见[How can I generate an MD5 hash?](https://stackoverflow.com/questions/415953/generate-md5-hash-in-java) feature1=1865834.... 盐值应该在您的代码中分解成多个较短的字符串，这样您的客户就不能只检索它并轻松地自己复制该过程。

在您的应用程序中，在启动时，您使用“启用”和“禁用”值构造上面的字符串，运行两者的 MD5，并将其与存储的哈希值进行比较。这将告诉您要启用哪些功能。

我认为单独的 .jar 或 .properties 是个坏主意。它使您的交付混乱。

您可以相当轻松地自动化整个过程，因为您可以随时动态生成属性，并将它们绑定到您的应用程序中。

您可以添加其他“内置”属性，从而在最终交付中为您提供很大的灵活性，包括为客户品牌设计蒙皮之类的东西。

不过，正如其他人所指出的那样：有很多方法可以解决这个问题，具体取决于产品的其他细节和总体目标。鉴于上述假设，这是一种方法。AFAIK，没有“规范”的方式来做这种事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T16:52:28.347

您应该考虑使用许可证管理 api 来做同样的事情，这将为您提供安全性和更改许可证前/后安装的能力。

不建议构建临时许可功能，请查看[License3j](http://projects.verhas.com/com.verhas.licensor/license3j/license3j/)和[TrueLicense](http://truelicense.java.net)，它们都是免费的，可以帮助您获得观点或更好地满足您的要求

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T08:58:42.450

您可以尝试将其编码到文件中。我假设每个用户都有自己的应用程序安装/版本，对吧？我进一步假设应用程序不需要检查某些 Web 资源。因此，您需要在文件中实现它。

但是，您应该加密该文件并将盐和密钥放在代码中不容易被反编译的地方。另外创建一个哈希来检查文件的修改。该哈希可以基于应用程序的大小或其他内容。

请注意，没有 100% 的安全性，任何黑客仍然可以破解您的应用程序。但在那种情况下，这将需要某种形式的犯罪​​能量，这种能量在商业世界中并不常见。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T22:11:33.843

模块化应用程序并仅将他想要/可以访问的那些部分部署到每个客户端。有很多方法可以做到（最完整但重量级的是 OSGi），但具体取决于您的情况和要求。

实现它的最快方法可能是简单地将额外功能提取到单独的 JAR 中，并在部署时适当地更新类路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T11:34:35.397

这是非常开放的——它真的取决于你想要实现的目标，以及你所说的特性。

一种方法是使用基于插件的架构。例如你有一个界面

```
public interface Feature {} 
```

并提供你的十个特性中的每一个作为这个接口的实现者。然后有一些在应用程序启动时运行的方法，它在`Feature`类路径上查找子类。

您可以通过仅在类路径中包含相关功能来控制客户端具有哪些功能，例如使用 maven。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T08:52:55.553

这取决于应用程序的类型、您想要的安全类型以及可能使用该应用程序的人数。

如果客户端的数量不是那么大，您可以将他们的偏好存储在一些内存数据结构中，例如 Map 。否则，您可以使用文件系统或数据库，具体取决于您想要的安全类型。

# visual-c++ - 在哪里可以找到用于 VC++ 2010（Win 7）中 PC/SC 编程的 winscard.lib？

> ID：11718081
> 
> 赞同：1
> 
> 时间：2012-07-30T08:48:34.573
> 
> 标签：visual-c++, smartcard, smartcard-reader, pcsc, winscard

我想在 win7 x32 环境中使用 VC++ 2010 编写一个 PC/SC 应用程序。
我的程序无法编译，出现如下链接错误：

```
error LNK2019: unresolved external symbol _SCardReleaseContext@4 referenced in function "void __cdecl pscs_app(void)" (?pscs_app@@YAXXZ) 
```

我想我需要将 winscard.lib 包含到我的项目中，但我在系统上的任何地方都找不到它。所以我想我需要安装 SDK 或开发包之类的东西，但我在网上找不到任何合适的信息，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-25T07:07:31.947

WINSCard.lib 包含在 microsoft windows SDK 中：

[http://microsoft.com/en-us/download/details.aspx?id=8279](http://microsoft.com/en-us/download/details.aspx?id=8279)

# objective-c - ARC 使用的内存过多

> ID：11718083
> 
> 赞同：0
> 
> 时间：2012-07-30T08:48:43.990
> 
> 标签：objective-c, macos, cocoa

我用ARC写了一个OSX App，只加载一个没有任何单元格的tableview，内存高达50M+，我想知道有什么方法可以优化它。（不能使用**release**，我找不到其他方法）

================================== 更新================ =========================

我创建了一个demo Application，只是一个空白窗口，内存高达40M+，sigh

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:58:58.273

使用 ARC 与不使用 ARC 实际上应该没有区别——将 ARC 视为`release`自动为您添加调用。[这个答案](https://stackoverflow.com/questions/9068312/how-to-free-memory-in-arc-for-high-memory-usage-graphics-render)说明了这一点。

# asp.net-mvc - MVC：重置密码属于服务层或实际实体

> ID：11718094
> 
> 赞同：2
> 
> 时间：2012-07-30T08:49:34.047
> 
> 标签：asp.net-mvc, model-view-controller, software-design, design-principles

我对 MVC 比较陌生，并且刚刚遇到了一些预先存在的代码。

我们有一个 UserService，它主要包含 CRUD 操作，也许还有一两个业务逻辑操作——所有这些都是我们的控制器所需要的。它封装了上下文和成员资格。

我正要实现 ResetPassword 操作，但不知道在哪里实现；是在 UserService 还是在 User Entity 实现它。

* * *

*用户服务*

```
bool ResetPassword(string username, string newPassword); 
```

这将导致我的控制器成为：

```
ActionResult ResetPassword(string username, string newPassword)
{
  userService.ResetPassword(username, newPassword);
} 
```

对比

*用户*

```
bool ResetPassword(string newPassword) 
```

这将导致我的控制器成为：

```
ActionResult ResetPassword(string username, string newPassword)
{
  var user = userService.GetUser(username);
  user.ResetPassword(newPassword);
} 
```

推荐哪种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:41:50.693

我会推荐第二种方法，你必须有所收获。

1.  您的域/业务逻辑（此处为 ResetPassword）将远离控制器/操作
2.  您从不同的地方重复使用该功能（例如，如果您将 ResetPassword 作为服务公开）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:52:10.263

您应该始终将数据与业务逻辑分离，因此您应该通过业务逻辑层（即 UserService）修改控制器（表示层 - 是的，视图、视图模型和控制器都是表示层的一部分）中的用户对象（数据层） ！

# java - 弹簧表单复选框 - 由 toString() 匹配，从而检查错误的复选框

> ID：11718099
> 
> 赞同：1
> 
> 时间：2012-07-30T08:49:49.567
> 
> 标签：java, forms, spring-mvc, checkbox

我有一个域对象**ContactGroup**，其中包含对另一个域对象**Person**的 ManyToMany 引用：

```
@Entity
public class ContactGroup {

@ManyToMany
private Set<Person> members = new HashSet<>();

  [...]
} 
```

我需要编辑一个**ContactGroup**并显示 a)*所有*可能的**Persons** with form:checkboxes 和 b) 选择那些已经包含在**成员中的人**

到目前为止效果很好。我正在使用 form:checkboxes 标记绑定到**成员**并包含模型属性**personList**作为项目：

```
 <form:checkboxes path="members" multiple="true" items="${personList}" itemLabel="displayString" itemValue="id"/> 
```

* * *

***那么问题是什么？***

显然，spring 会比较不同项目的 toString() 来评估是否应该检查它们。如果两个**Person**具有相同的 toString() 表示，则如果其中一个被选中，则它们都将被选中。

我怎样才能改变这种行为？我尝试添加自定义活页夹，但这并没有改变任何东西：

```
@InitBinder
public void initBinder(WebDataBinder binder) {
    binder.setValidator(validator);

    binder.registerCustomEditor(Person.class, new PropertyEditorSupport() {
        @Override
        public void setAsText(String text) throws IllegalArgumentException {
            setValue(personService.get(Long.parseLong(text)));
        }

    });

    binder.registerCustomEditor(Set.class, "members", new CustomCollectionEditor(Set.class) {
        @Override
        protected Object convertElement(Object element) {
            if (element instanceof Long) {
                return personService.get((Long) element);
            } else if (element instanceof String) {
                personService.get(Long.parseLong((String) element));
            } else if (element instanceof Person) {
                return element;
            }
            return null;
        }

    });
} 
```

# usb - 在没有 JTAG 的情况下将代码嵌入到 MSP430

> ID：11718105
> 
> 赞同：0
> 
> 时间：2012-07-30T08:50:09.533
> 
> 标签：usb, embed, msp430, uart, jtag

我是这个主题的新手，想学习如何将代码嵌入到 MSP430 中。我有一个分线板 MSP430-H5438，但我没有使用 JTAG 接口。我已经准备好 IAR 生成的代码（十六进制文件）（ADC、SPI 接口），但是我无法将它们加载到 IC 中。我正在使用 USB-UART 桥接器将设备连接到 PC，使用 BSL 脚本编写软件，但没有结果。在没有 JTAG 接口的情况下将 MSP430 连接到 PC 是否是错误的方法？我在这里绕圈子吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:56:53.693

BSL 应该可以工作，但您不仅需要连接 TX 和 RX，还需要将 DTR 连接到 RST，将 RTS 连接到 TEST。如果您的 USB-UART 接口只有 TX 和 RX（通常是这种情况），那么它不适用于 BSL。

请注意，该板上的 MCU 不仅支持常规（且昂贵）的 JTAG，还支持较新的 SBW 接口。这意味着您可以获得 4.30 美元的 Launchphad 并使用 Launchpad 中包含的编程器对您的电路板进行编程。这将使您可以通过常规 J​​TAG 执行任何您可以执行的操作，并且强烈建议您通过 BSL，因为它将为您提供硬件调试功能。Launchpad 本身也很有用。

# matlab - levenberg marquardt 曲线拟合 MATLAB

> ID：11718107
> 
> 赞同：0
> 
> 时间：2012-07-30T08:50:24.787
> 
> 标签：matlab, least-squares, levenberg-marquardt

在此处输入图像描述我不知道如何在 MATLAB 中选择`lb`and`ub`以及如何将我的函数与数据相匹配，我的意思是我有一些输出，但它们不正确，`lsqcurvefit``x0`

这是我的数据：

```
xdata= [22.8700000000000;7.92000000000000;3.45000000000000;1.78000000000000;
        1.57000000000000;6.41000000000000;12.9000000000000;1.82000000000000;
        1.86000000000000;3.71000000000000;12.0900000000000;15.9900000000000;
        18.9600000000000;23.1500000000000;23.4500000000000;24.8200000000000;
        25.0700000000000;13.2800000000000];
ydata= [8.44300000000000;7.92100000000000;7.64600000000000;7.51600000000000;
        7.47100000000000;7.82100000000000;8.03200000000000;7.76200000000000;
        7.77400000000000;7.87800000000000;8.07000000000000;8.26000000000000;
        8.40000000000000;8.52000000000000;8.52000000000000;8.57000000000000;
        8.58000000000000;8.03200000000000]; 
```

然后我将 myfunc 放在一个单独的 m 文件中：

```
 function F = myfun(x,xdata)
  F=x(1)*(1-x(2)^2)./((1+x(2)^2+2*x(2)*cosd(xdata)).^1.5); 
```

我有`x(1)`和`x(2)`，我想在拟合我的数据后估计未知，并且我知道 k`x(2)`不会是负值。

所以我这样设置`lsqcurvefit`：

```
[x, resnorm]=lsqcurvefit(@myfun,[-0.5:0.5], xdata, ydata, 0, 1.5, options) 
```

这是结果：

> x = 1.5000 -0.4945
> resnorm = 52.1739

它显示了一个负值`x(2)`！

请你帮助我好吗？

非常感谢您回答我的问题，现在在命令计算了 x 和 resnorm 之后，我在函数中使用了结果，这意味着我使用了 x(1)=92.8054 x(2)=0.7427

所以;

F=92.8054*(1-(0.7427)^2)./((1-0.7427)^2+2*(0.7427)*cosd(xdata)).^1.5;

现在我有向量 F ，当我绘制我的数据和结果时， plot(xdata, ydata, 'o', xdata, F, '*')

我不明白为什么 y 轴的范围如此不同！也许我需要将 x(3) 添加到我的函数中。

我附上了图。![在此处输入图像描述](../Images/da11b04c029791a4b5c8731a1e55c178.png)

![在此处输入图像描述](../Images/50bcd45f31c0832a48ccce7c7a32adfc.png)

![在此处输入图像描述](../Images/3ad359f749330e5d53d8869444107521.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:18:06.333

您的上限和下限必须是与您尝试估计的元素数量相同的向量，在您的情况下为 x。

因此，例如，如果您希望 x(1) 无界且 x(2) 介于 0 和 1.5 之间，请尝试

```
[x, resnorm]=lsqcurvefit(@myfun,[-0.5:0.5], xdata, ydata, [-inf, 0], [inf, 1.5], options) 
```

要计算 F，请使用您已经创建的目标函数：

`F = myfun(x, xdata)`然后按照你已经拥有的方式绘制它。在下面的评论中，您已将 a 切换`+`为 a `-`，这就是您的图表未对齐的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:21:25.180

参数`lb`和`ub`是您的输出的下限和上限，即您的优化值`xopt`将满足`lb <= xopt <= ub`。

正如您已经知道的那样，这`x(2)`不能是负数，您已经有一个下限，即 0，即`lb(2) = 0`。现在您只需要为 和 定义下限和`x(1)`上限。`x(1)``x(2)`

以下代码将限制`x(1) to [-inf, 1e3]`and `x(2) to [0, 1e3]`：

```
lb = [-inf, 0];
ub = [1e3, 1e3];
[x, resnorm] = lsqcurvefit(@myfun,[-0.5:0.5], xdata, ydata, 0, 1.5, ...
                           lb, ub, options) 
```

我也有点困惑你的方法奏效了。根据[文档](http://www.mathworks.de/help/toolbox/optim/ug/lsqcurvefit.html)，如果您没有上限或下限但想提供，则应传递空向量`options`，即您的示例应阅读

```
[x, resnorm] = lsqcurvefit(@myfun,[-0.5:0.5], xdata, ydata, 0, 1.5, ...
                           [], [], options) 
```

可能，我们有不同版本的 Matlab。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T19:12:11.483

为什么不使用简单的最小二乘解决方案：

```
in = [ones(size(xdata, 1), 1), xdata];
w = in \ ydata;
ydata_fit = in * w; 
```

结果：

![在此处输入图像描述](../Images/4b9c80b58a49ffb390ce741bfd66d234.png)

```
>> disp(w)
    7.5744
    0.0401 
```

# python - python输入变量处理

> ID：11718108
> 
> 赞同：0
> 
> 时间：2012-07-30T08:50:28.363
> 
> 标签：python, fabric

试图在语句中使用输入变量。

```
def email(account):
    email = fabric.operations.prompt("Enter client's email address:")
    run('mysql -u %s -p%s -e "UPDATE users SET email = %email WHERE id = 1" %s' % (env.user, dbpasswd, account)) 
```

错误：

```
 File "/tmp/fabfile.py", line 196, in email
    run('mysql -u %s -p%s -e "UPDATE users SET email = %email WHERE id = 1" %s' % (env.user, dbpasswd, account))
TypeError: float argument required, not str 
```

任何想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:48:55.117

正如avasal所说， %email 是你的问题。即使你可以通过写 '%%' 来转义 '%' 字符，从 Python 2.6 开始，我鼓励你[使用新的 format()](http://docs.python.org/library/stdtypes.html#str.format)语法，这样你就可以将它传递给 Python 3 而无需任何更改：

```
>>> template = 'mysql -u {} -p{} -e "UPDATE users SET email = %email WHERE id = 1" {}'
>>> query = template.format("user", "pass", "account")
>>> print(query)
mysql -u user -ppass -e "UPDATE users SET email = %email WHERE id = 1" account
>>> run(query) 
```

此外，将模板与参数分开有助于避免代码重复，这是一种很好的做法，可以节省大量时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:53:44.673

`%email`这应该是你的问题，

`%e`在`%email`最后一个 %s 之前遇到字符串替换

```
In [4]: a = "1.2"

In [5]: print "%s" %a
1.2

In [6]: print "%e" %a
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
C:\Python27\<ipython-input-6-1d66dedeb226> in <module>()
----> 1 print "%e" %a

TypeError: float argument required, not str 
```

最简单的解决方法是：

```
cmd = 'mysql -u %s -p%s -e "UPDATE users SET email = ' %(env.user, dbpasswd) + '%email' + ' WHERE id = 1" %s' %account

run(cmd) 
```

或者你也可以

```
data = "%email"
run('mysql -u %s -p%s -e "UPDATE users SET email = %s WHERE id = 1" %s' % (env.user, dbpasswd, data, account)) 
```

# javascript - 使用 Javascript 从多个选择框中隐藏选项

> ID：11718112
> 
> 赞同：0
> 
> 时间：2012-07-30T08:50:49.837
> 
> 标签：javascript, select, hide

我需要使用 Javascript 从多个选择框中隐藏某些选项。我不能使用 jQuery，我也不允许这样做。

我还有一个下拉框，我正在调用一个 js 函数，该函数将在值更改时调用。js 函数将控制另一个多选选项框的选项，我需要根据下拉框的值隐藏（而不是删除）选项。

任何简单的js函数？

[http://jsfiddle.net/zz3dg/](http://jsfiddle.net/zz3dg/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:35:24.057

众所周知，选择和选项元素很难设置样式。虽然您可以尝试设置

```
display: none;
visibility: hidden; 
```

关于您希望隐藏的选项，我不希望得到普遍支持（即使在支持 CSS/JS 的浏览器中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T19:32:19.720

根据我的尝试，`display:none`在 FF 中有效，但在 Chrome 中无效......我尝试`visibility:hidden|collapsed`了（以及各种其他替代方法），但在 Chrome 中也没有产生预期的结果。 `visibility:hidden`隐藏文本但不会像我希望的那样折叠空白行。

我认为 Chrome 中唯一可行的解​​决方案是分离`filtered`选项元素（这似乎需要大量工作 ATM）

# java - 在 java 中运行 cmd-line 失败

> ID：11718124
> 
> 赞同：0
> 
> 时间：2012-07-30T08:51:13.340
> 
> 标签：java, command-line, execution

我面临以下问题：

我正在 Eclipse 中编写一个 java 应用程序。在我的应用程序中，我想启动一个 cmd 命令：

```
C:/Users/User1/Content-Integration Testing Framework/JDBC Connector/bin/connect -h 
```

命令“connect -h”是一个运行良好的企业内部应用程序。如果我要使用命令行 a 将不得不像这样冒险我的当前目录：

```
cd C:/Users/User1/Content-Integration Testing Framework/JDBC Connector/bin/ 
```

然后我会输入`connect -h` 这很好用。但我并不确定如何在 Java 应用程序中执行此命令。

在这里，他们告诉我如何在 Java 应用程序中运行 cmd： [How to use "cd" command using Java runtime?](https://stackoverflow.com/questions/4884681/how-to-use-cd-command-using-java-runtime)

但如果我这样做：

```
Runtime.getRuntime().exec("'C:/Users/User1/Content-Integration Testing Framework/JDBC Connector/bin/connect' -h"); 
```

日食告诉我：

```
java.io.IOException: Cannot run program "'C:/Users/User1/Content-Integration": CreateProcess error=2, Das System kann die angegebene Datei nicht finden
    at java.lang.ProcessBuilder.start(Unknown Source) 
```

它在“内容集成”处切断了我的命令。

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:53:56.303

You should use the version of `exec()` that [takes multiple args](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5B%5D%29) via a `String` array.

`Runtime.exec(String s)` will split your string using a tokenizer (this is why quoting the string won't work, and why you see the behaviour you do). If you resolve the executable and arguments yourself, and pass each as an array element in the above e.g.

```
String[] args = new String[]{"executable", "arg1", "arg2"};
Runtime.getRuntime().exec(args); // don't forget to collect stdout/err etc. 
```

then you will bypass `Runtime.exec(String s)`'s splitting behaviour.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:52:53.480

你有没有尝试过：

```
Runtime.getRuntime().exec("\"C:/Users/User1/Content-Integration Testing Framework/JDBC Connector/bin/connect\" -h"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T09:33:39.717

This happens because your path contains spaces. Make sure to wrap it in "" and it will work.

```
Runtime.getRuntime().exec("\"C:/Users/User1/Content-Integration Testing Framework/JDBC Connector/bin/connect\" -h"); 
```

# api - 获取打开的 Word 文档的完整路径

> ID：11718129
> 
> 赞同：1
> 
> 时间：2012-07-30T08:51:33.013
> 
> 标签：api, ms-word, dde

如果 MS Word 正在打开 DOC 文件，外部程序有什么方法可以获取 DOC 文件的完整路径？我尝试使用 GetCommandLineA() 但它没有产生任何结果，只是“C:\Program Files\Microsoft Office\Office12\WINWORD.EXE”/n /dde”。我还在[http://www.withinwindows.com/2008/08/31/taming-microsoft-word-2007s-file-associations-and-document-windows-part-one/](http://www.withinwindows.com/2008/08/31/taming-microsoft-word-2007s-file-associations-and-document-windows-part-one/)上阅读了一篇文章，但我没有知道如何获取 DDE 消息。你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:45:40.290

您需要挂钩到 Word 对象模型（例如通过 .Net/Office Interop 或直接通过 COM）。获得对文档的引用后，请使用其 FullName 属性。如果文档可能在服务器上的网络上或来自数据库，则文件名中可能包含字符（例如“-”），这些字符对于您将其下载到的任何平台都是无效的。如果是这种情况，请根据平台去除无效文件路径字符的名称。

有一些获得名称的防御技术。

# php - codeigniter 查询控制器视图

> ID：11718131
> 
> 赞同：0
> 
> 时间：2012-07-30T08:51:57.137
> 
> 标签：php, mysql, sql, codeigniter

我有两张桌子：- `tbl_ticket_categories(id,category_name,site_referer)`

`tbl_tickets(id,title,category_name,site_referer)`

我必须从具有 site_referer = 1 的相应 category_name 的 tbl_tickets 中获取所有标题。

假设 tbl_ticket_categories ：-

```
编号 | 类别 | site_referer
1 | 猫1 | 1
2 | 猫2 | 1
3 | 猫1 | 2
4 | 三类 | 3
5 | 猫1 | 1

```

tbl_tickets

```
编号 | 标题 | 类别名称 | site_referer
1 | 标题1 | 三类 | 3
2 | 标题2 | 猫1 | 2
3 | 标题3 | 猫1 | 1
4 | 标题4 | 猫2 | 1
5 | 标题5 | 猫1 | 1

```

输出：- cat1：- title3，title5

cat2 :- 标题 4

我查询这个没有问题，但我不知道如何安排，我在控制器部分的逻辑出错了。

我正在做的是：-

```
function categorizedTickets() {
    $categories = $this->helpdesk_model->getCategories($this->site_referers_id);
    foreach($categories->result_array() as $value) {            
        $title = $this->helpdesk->model($value['category_name']);
    }
} 
```

但是这个函数在以我应该做的方式显示输出时没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:00:53.637

```
SELECT tbl_ticket_categories.category, CONCAT(tbl_tickets.title, ', ') AS title
FROM tbl_ticket_categories
     JOIN tbl_tickets ON tbl_ticket_categories.category = tbl_tickets.category_name
WHERE tbl_ticket_categories.site_referer = ? 
```

...不要使用 Active Record - 它不起作用。

# html - CSS垂直对齐不适用于浮动

> ID：11718134
> 
> 赞同：89
> 
> 时间：2012-07-30T08:52:16.137
> 
> 标签：html, css, vertical-alignment

我如何在属性中使用`vertical-align`以及？如果我不使用. 但是如果我使用浮动，那么它就不起作用。对我来说使用最后一个 div 很重要。`float``div``vertical-align``float``float:right`

我正在尝试关注，如果您从所有 div 中删除浮动，那么它会正常工作：

```
<div class="wrap">
    <div class="left">First div, float left,  has more text.</div>
    <div class="left2">Second div, float left </div>
    <div class="right">Third div, float right</div>
</div> 
```

**CSS：**

```
.wrap{
    width: 500px;
    overflow:hidden;    
    background: pink;
}

.left {
    width: 150px;       
    margin-right: 10px;
    background: yellow;  
    float:left;
    vertical-align: middle;  
    display:inline-block

}

.left2 {
    width: 150px;    
    margin-right: 10px;
    background: aqua;
    float:left;
    vertical-align: middle;   
    display:inline-block
}

.right{
    width: 150px;
    background: orange;
    float:right;
    vertical-align: middle;
    display:inline-block
} 
```

[JSFiddle](http://jsfiddle.net/J5Ujj/1/)

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-06-14T07:26:50.927

您需要设置行高。

```
<div style="border: 1px solid red;">
<span style="font-size: 38px; vertical-align:middle; float:left; line-height: 38px">Hejsan</span>
<span style="font-size: 13px; vertical-align:middle; float:right; line-height: 38px">svejsan</span>
<div style="clear: both;"></div> 
```

[http://jsfiddle.net/VBR5J/](http://jsfiddle.net/VBR5J/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-30T08:54:47.850

编辑：

[**垂直对齐**](https://developer.mozilla.org/en/CSS/vertical-align)CSS 属性指定内联、内联块或表格单元元素的垂直对齐方式。

阅读这篇文章[**了解垂直对齐**](http://phrogz.net/CSS/vertical-align/index.html)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-04-07T09:53:35.787

垂直对齐确实不适用于浮动元素。那是因为 float 从文档的正常流程中提升了元素。您可能想要使用其他垂直对齐技术，例如基于变换、显示：表、绝对定位、行高、js（可能是最后的手段）甚至是普通的旧 html 表（如果内容是实际上是表格）。你会发现关于这个问题的争论很激烈。

但是，这是垂直对齐 3 个 div 的方法：

```
.wrap{
    width: 500px;
    overflow:hidden;    
    background: pink;
}

.left {
    width: 150px;       
    margin-right: 10px;
    background: yellow;  
    display:inline-block;
    vertical-align: middle; 
}

.left2 {
    width: 150px;    
    margin-right: 10px;
    background: aqua; 
    display:inline-block;
    vertical-align: middle; 
}

.right{
    width: 150px;
    background: orange;
    display:inline-block;
    vertical-align: middle; 
} 
```

不知道为什么你需要固定宽度，显示：内联块和浮动。

# c++ - C++ 中将默认变量类型设置为 int 的任何选项

> ID：11718135
> 
> 赞同：5
> 
> 时间：2012-07-30T08:52:16.190
> 
> 标签：c++, g++, compiler-options

是否有任何选项**可以省略变量类型**或**将变量类型设置为** `int`在 linux 中使用 g++ 编译器编译的 c++ 代码。

```
 const bufLen = 2000; 
```

在 solaris 中编译很顺利（因为我正在从 solaris 移植到 linux）。

还有一件事，**我无法控制文件**，因为它是由某些解析器生成的（由某些第三方以二进制形式提供）

由于我无法更改 c++ 文件（因为它是在每次编译前生成的），我需要一些（g++ 的）选项，因此我可以在编译期间包含以抑制/解决错误：

```
error: ISO C++ forbids declaration of `bufLen` with no type 
```

* * *

**编辑 ：**

**信息**：我目前正在使用的选项`-c -fPIC -Wno-deprecated -m32 -O2 -ffriend-injection -g`

是否有任何选项给我带来麻烦（或影响其他人）？

* * *

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:41:52.197

感谢 AndersK，他给了我一个解决方案（通过评论 [在我的问题下方]）

我尝试使用`-fms-extensions`g++ 进行编译，这解决了我的问题

参考： http: [//gcc.gnu.org/onlinedocs/gcc-3.4.4/gcc/C-Dialect-Options.html](http://gcc.gnu.org/onlinedocs/gcc-3.4.4/gcc/C-Dialect-Options.html)

PS：*为了可见性，我在答案部分添加了答案。学分归于实际回答的人:)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:58:56.230

尝试`-ansi`或`-std=c89`。[http://gcc.gnu.org/onlinedocs/gcc-4.0.2/gcc/C-Dialect-Options.html](http://gcc.gnu.org/onlinedocs/gcc-4.0.2/gcc/C-Dialect-Options.html)

# redirect - 如何将 .aspx url 重定向到 php 页面？

> ID：11718136
> 
> 赞同：2
> 
> 时间：2012-07-30T06:22:56.177
> 
> 标签：redirect, .htaccess

如何将 .aspx url 重定向到 php 页面？我有来自我的旧站点的链接 domain.com/song.aspx?SongID=1 我想重定向到 domain.com/song.php?SongID=2 文件。你能告诉我怎么做吗？我愿意使用 htaccess 或插件。如果我使用插件，我需要能够在 song.aspx 之后让 song.php 也获得查询字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T06:53:53.117

Htaccess 可能是最好的方法。这条规则很笼统，但应该可以解决问题。

```
RewriteRule ^song\.aspx$ song.php [R=301,QSA,L] 
```

QSA 代表“Query String Append”，它将查询字符串从旧 URL 附加到新 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:59:15.197

如果您需要匹配查询字符串并更改 ID，例如您的示例：

> domain.com/song.aspx?SongID=1 我想重定向到 domain.com/song.php?SongID=2

您需要为此设置一个重写列表：

```
RewriteCond %{QUERY_STRING} ^SongID=1$
RewriteRule ^/?song\.aspx$ /song.php?SongID=2 [R=301,L] 
```

# java - java.util.logging.FileHandler 和多线程

> ID：11718140
> 
> 赞同：1
> 
> 时间：2012-07-30T08:52:28.413
> 
> 标签：java, java.util.logging, filehandler

java.util.logging 中的 FileHandler 类为它正在写入的文件实现了某种锁定机制。但是我发现应用程序完成后文件系统中有一个 .lck 文件。有没有办法针对 .lck 文件或整个锁定机制自定义 FileHandler 类的行为？

编辑：似乎当我关闭 FileHandler 对象时 .lck 文件消失了。这是想要的行为吗？我以某种方式期望应该自动调用 FileHandler 的 close 方法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:59:54.917

您可以使用激活线程的功能 System.addShutdownHookFinalizer(Runnable r) 来关闭所有未关闭的内容。所以你将关闭 FileHandler 并且 .lck 文件将消失

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-23T17:08:30.620

> 似乎当我关闭 FileHandler 对象时 .lck 文件消失了。这是想要的行为吗？我以某种方式期望应该自动调用 FileHandler 的 close 方法

LogManager 有一个关闭钩子，如果 FileHandler 在关闭时它仍然连接到记录器，它将关闭它。问题是记录器可能会受到垃圾收集。如果发生这种情况，则 FileHandler 永远不会关闭。这包含在以下错误中：

1.  [JDK-8060132 在 logging.properties 中的抽象节点上配置的处理程序并不总是正确关闭。](https://bugs.openjdk.java.net/browse/JDK-8060132)
2.  [JDK-6274920：JDK 记录器拥有对 java.util.logging.Logger 实例的强引用。](https://bugs.openjdk.java.net/browse/JDK-6274920)

强烈引用您的记录器，以免它们被垃圾收集。

# date - 使用 jasper 将日期导出到 Excel

> ID：11718144
> 
> 赞同：1
> 
> 时间：2012-07-30T08:52:45.747
> 
> 标签：date, jasper-reports, export-to-excel

我开始与 Jasper 合作，但遇到了一个小问题。我想导出我数据库中的日期并将其导出到 excel 并保存日期格式。日期与数据库中的日期一起保存。

错误是当我打开导出数据的 excel 文件时，日期不是格式日期而是一般。**但是使用jrxml**中编写的模式显示正确。

![在此处输入图像描述](../Images/2aa1d25ecf4d70c00a282521dfc9fe5b.png)

那是我用来进行excel导出的代码。我认为 jrxml 的另一部分是默认的。

```
<textField isStretchWithOverflow="true" pattern="dd/MM/yyyy" isBlankWhenNull="true" hyperlinkType="None">
            <reportElement stretchType="RelativeToBandHeight" x="343" y="0" width="68" height="21"/>
            <box>
                <pen lineWidth="0.5"/>
                <topPen lineWidth="0.5"/>
                <leftPen lineWidth="0.5"/>
                <bottomPen lineWidth="0.5"/>
                <rightPen lineWidth="0.5"/>
            </box>
            <textElement textAlignment="Right" verticalAlignment="Middle">
                <font fontName="Arial" size="10" isBold="true" isItalic="true" pdfFontName="arial.ttf"/>
            </textElement>
            <textFieldExpression class="java.util.Date"><![CDATA[$F{Date1}]]></textFieldExpression>
        </textField> 
```

有谁知道我做错了什么？？？

*另一个小问题：* - 在我的 Eclipse 项目中，我使用 jasperreports.jar 版本 3.5，但我使用 iReporter 3.1.1 处理/修改 .jrxml。这可能会导致使用不同版本的问题或问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-10-11T10:20:40.523

参考：http: [//jasperreports.sourceforge.net/sample.reference/xlsfeatures/index.html#xlsfeatures](http://jasperreports.sourceforge.net/sample.reference/xlsfeatures/index.html#xlsfeatures)

> 当数据必须以完全可读和有意义的形式呈现时，格式模式很有用。举个例子，日期通常存储为数字（自 1970 年 1 月 1 日 00:00:00.000 GMT 以来经过的毫秒数）。但是读取这样的数字并不适合我们通常的日期表示，具有完美分隔的年、月和日字段。格式模式在这里是绝对必要的，以获得这些数字的有意义的表示。文本字段的模式属性来解决这个问题。对于几乎所有的输出格式，除了 Excel 格式。这是因为模式属性包含标准的 Java 格式模式。不幸的是，并非所有适用于 Java 的模式也适用于 Excel。在某些情况下，应翻译此类模式以便在 Excel 中识别。实现这种转换的一种较旧的方法是在运行时使用 getFormatPatternsMap() 导出器设置，与动态工作表名称部分所示的同样不方便：需要 Java 硬编码。取而代之的是，现在可以使用自定义属性 net.sf.jasperreports.export.xls.pattern 在元素级别的报表示例中为 Excel 指定正确的格式模式。查看 XlsFeaturesReport.jrxml 示例部分中的当前日期文本字段：Java硬编码的需要。取而代之的是，现在可以使用自定义属性 net.sf.jasperreports.export.xls.pattern 在元素级别的报表示例中为 Excel 指定正确的格式模式。查看 XlsFeaturesReport.jrxml 示例部分中的当前日期文本字段：Java硬编码的需要。取而代之的是，现在可以使用自定义属性 net.sf.jasperreports.export.xls.pattern 在元素级别的报表示例中为 Excel 指定正确的格式模式。查看 XlsFeaturesReport.jrxml 示例部分中的当前日期文本字段：
> 
> ```
> <textField pattern="EEE, MMM d, yyyy">
>   <reportElement style="Sans_Bold" mode="Opaque" x="0" y="30" width="515" height="30" forecolor="#000000">
>     <property name="net.sf.jasperreports.export.xls.pattern" value="ddd, mmm d, yyyy"/>
>   </reportElement>
>   ...
>   </textField> 
> ```
> 
> 在这种情况下，EEE, MMM d, yyyy 模式在 Java 中完全有效，但会为 Excel 生成不可读的内容，在将报告导出到 Excel 时将替换为等效的 ddd, mmm d, yyyy 模式。

# iphone - 获取 iOS 上已安装的 Web 浏览器应用程序列表

> ID：11718151
> 
> 赞同：2
> 
> 时间：2012-07-30T08:53:00.650
> 
> 标签：iphone, ios, browser, url-scheme

有什么方法可以获取 iOS 设备上已安装浏览器（例如 Safari 和 Chrome）的列表？

在我的应用程序中，我想允许用户使用预设浏览器打开网页。它不应该干扰 iOS 的默认行为

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:56:48.290

只有浏览器有自己的 URL 方案，您才能打开特定的浏览器。当前 SDK 无法获取所有已注册 URL 方案的列表，因此您必须通过调用该[`[UIApplication canOpenURL:(NSURL *)URL]`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006728-CH3-SW50)方法来检查您自己是否支持该方案。我不知道浏览器特定 URL 方案的任何实现

`[UIApplication openURL:someURL]`使用方案调用`http:`将始终打开 safari，自定义浏览器无法覆盖`http:`方案。

# c - 比较 C 代码和 CUDA 代码时使用哪个计时器？

> ID：11718154
> 
> 赞同：1
> 
> 时间：2012-07-30T08:53:23.140
> 
> 标签：c, cuda, timing

我目前正在执行一种算法的两种实现，一种在 C 中，另一种在 CUDA 中，并计划在运行时对两者进行比较。我的问题是，考虑到我将比较 C 和 CUDA 中的运行时，最好的 C 计时器是什么。对于 CUDA，我将使用事件，并且我已经阅读了 C 中的挂钟计时器，例如 clock() 和 gettimeofday() 以及高分辨率计时器，例如 clock_gettime()，但不确定使用哪个 C如果我要将我的 C 时间与 CUDA 时间进行比较？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:26:44.780

对于应用程序级别的端到端测量，我建议使用高精度主机定时器，如下面的代码所示，我已经使用了十多年。对于可能极短的 GPU 活动的详细测量，我建议使用 CUDA 事件。

```
#if defined(_WIN32)
#if !defined(WIN32_LEAN_AND_MEAN)
#define WIN32_LEAN_AND_MEAN
#endif
#include <windows.h>
double second (void)
{
    LARGE_INTEGER t;
    static double oofreq;
    static int checkedForHighResTimer;
    static BOOL hasHighResTimer;

    if (!checkedForHighResTimer) {
        hasHighResTimer = QueryPerformanceFrequency (&t);
        oofreq = 1.0 / (double)t.QuadPart;
        checkedForHighResTimer = 1;
    }
    if (hasHighResTimer) {
        QueryPerformanceCounter (&t);
        return (double)t.QuadPart * oofreq;
    } else {
        return (double)GetTickCount() * 1.0e-3;
    }
}
#elif defined(__linux__) || defined(__APPLE__)
#include <stddef.h>
#include <sys/time.h>
double second (void)
{
    struct timeval tv;
    gettimeofday(&tv, NULL);
    return (double)tv.tv_sec + (double)tv.tv_usec * 1.0e-6;
}
#else
#error unsupported platform
#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:57:55.947

最好只坚持一些相对简单的方法，我建议使用 gettimeofday，它将提供具有微秒精度的时间戳。只需记录计算前后的时间，然后将两者相减。您可以使用 timersub 宏来执行此操作。

[http://linux.die.net/man/2/gettimeofday](http://linux.die.net/man/2/gettimeofday)

[http://linux.die.net/man/3/timercmp](http://linux.die.net/man/3/timercmp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:08:26.867

```
#include "time.h"

clock_t init, final;

init=clock();

...
//your sequential algoritm
...

final=clock()-init;
float seq_time ((double)final / ((double)CLOCKS_PER_SEC));
printf("\nThe sequential duration is %f seconds.", seq_time);

//Clock is initialized again
init=clock();

...
//your parallel algoritm
...

final=clock()-init;
float par_time ((double)final / ((double)CLOCKS_PER_SEC));
printf("\nThe parallel duration is %f seconds.", par_time);

printf("\n\nSpped up is %f seconds. (%dX Faster)", (seq_time - par_time), ((int)(seq_time / par_time))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-09T18:19:06.567

我使用以下代码取得了巨大/准确的成功：

```
#include <time.h>

long unsigned int get_tick()
{
  struct timespec ts;
  if (clock_gettime(CLOCK_MONOTONIC, &ts) != 0) return (0);
  return ts.tv_sec*(long int)1000 + ts.tv_nsec / (long int) 1000000;
} 
```

Then in the code you want to time put the get_tick method before and after it and subtract the two variables to get the result. Divide the answer by 1000 to get it in seconds

# authentication - Cakephp密码更改不起作用

> ID：11718155
> 
> 赞同：0
> 
> 时间：2012-07-30T08:53:24.620
> 
> 标签：authentication, cakephp-2.1

我正在使用 cakephp 2.1，我试图通过一个链接更改用户的密码，当提出忘记密码请求时，用户将收到该链接。

链接看起来像这样

> ../myApp/users/change_password/1

我在链接中传递用户 ID。即 1 如上。

视图即change_password.ctp如下

```
<?php echo $this->Form->create('User', array('controller' => 'users', 'action' => 'change_password', 'class' => 'well')); ?>
<?php echo $this->Form->input('User.id',array('value' => $this->params['pass'][0],'type'=>'hidden')); ?>
<?php echo $this->Form->label('password', 'Password', array('class' => 'control-label')); ?>
<?php echo $this->Form->password('password', array('class' => 'span3', 'type' => 'password')); ?>
<?php echo $this->Form->error('password', null , array('wrap' => 'span', 'class' => 'help-inline')); ?>
<?php echo $this->Form->submit('Change Password', array('class' => 'btn')); ?>
<?php echo $this->Form->end(); ?> 
```

控制器如下

```
public function change_password() {
if($this->request->is('post')) {                                   
    if ($this->User->save($this->request->data)) {
        $this->Session->setFlash('Password has been changed.', 'default/flash_success');
        $this->redirect(array('controller' => 'movies', 'action' => 'index'));
        } else {
    $this->Session->setFlash('Password could not be changed.', 'default/flash_error');
    $this->redirect(array('controller' => 'movies', 'action' => 'index'));
    }
} 
```

}

但我无法保存密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:40:23.293

因此，如果我只是更改 url 中的用户 ID，我可以更改其他用户的密码吗？

`/myApp/users/change_password/2` 那根本不安全。您应该重新考虑另一种方法。

但是，您的问题的答案是：您可能无法更改密码，因为数据未经验证。您在 User.php 模型中有设置验证规则吗？如果是，您必须在保存用户之前取消设置验证规则。例子：`unset($this->User->validate['username']);`

有关模型验证的更多信息，请阅读[文档](http://book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html)

# udp - 网络服务器中的 UDP 配置以接受来自 GPRS 移动设备的连接

> ID：11718157
> 
> 赞同：1
> 
> 时间：2012-07-30T08:53:30.113
> 
> 标签：udp, gprs

有人可以帮我在网络服务器中配置 UDP 以接受来自 GPRS 移动设备的连接。GPRS 移动设备将发送数据包，我需要将其作为文件写入网络服务器以处理网页。请帮忙。

我需要知道以下内容：

1) 如何在 Web 服务器中配置 UDP 2) GPRS 移动设备如何使用 UDP 连接到服务器 3) 将数据包写入 txt 文件

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T09:15:16.703

*   “网络服务器”通常是指“http-server”，它是一个监听传入“http”请求的进程。现在`http`是一种[标准化](https://www.rfc-editor.org/rfc/rfc2616)的协议，可以通过`TCP/IP port 80`. 因此，大多数 webserver 实现将实现一个 TCP/IP 服务器，默认情况下侦听端口 80。通常您可以根据需要更改端口，但通常您不能将传输层更改为例如 UDP。

    因此，实际上可能无法让您的“网络服务器”对 UDP 数据包做出反应。

*   但是，如果“Web 服务器”是指可在 Internet 上访问的主机（最终可能会运行 http-daemon），那么您可能会更幸运：只需在该机器上运行一个小型服务器应用程序来监听传入的给定端口上的 UDP 流量，并对其执行“某些操作”（例如，将其转发到 http-daemon 以显示当前位置）

回答您的 3 个问题：

1.  *创建一个监听 UDP-traffic 的小型应用程序*：

一个简单的服务器可能是：

```
 `netcat -l -u -p 8888` 
```

[这将使用netcat](http://netcat.sourceforge.net/)创建一个侦听端口 8888 的 UDP 服务器。无论客户端连接到您的服务器，客户端发送到服务器的所有内容都将通过标准输出输出，您可以通过标准输入与客户端对话。您不应该`netcat`在生产环境中使用；但它是检查是否可以建立连接以及协议是否有效的一个很好且简单的工具。

在生产中，您可能希望使用“真正的”UDP 服务器，例如用您选择的语言编写您自己的。

1.  *如何让您的 gprs 设备与您的服务器通信？*如果不了解有关设备的更多信息，这是不可能回答的，它的操作系统和安装的软件会产生数据并应该将其发送到。

2.  `netcat -l -u -p 8888 > myfile.txt`

# php - 如何在php中处理字符串

> ID：11718158
> 
> 赞同：0
> 
> 时间：2012-07-30T08:53:38.990
> 
> 标签：php, string

我有这样的字符串

```
$str="absdbsasd k=12312 sdasd l=89879 m=ken asddq casdasd" 
```

输出应该是这样的

问题是如何处理变量 $str 上的字符串以获得像这样的输出

```
k=12312
l=89879
m=ken asddq casdasd 
```

在将空格字符（''）替换为'&'后，我尝试实现 parse_str，但输出仍然得到错误的答案

```
k=12312
l=89879
m=ken 
```

谁能帮帮我。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:12:22.757

假设逻辑是标识符是以 a 结尾的字符字符，`=`并且值在下一个标识符出现时结束，但是如果值以数字开头，那么只有该值所需的数字的第一个字，我会这样处理：

```
$str="absdbsasd k=12312 sdasd l=89879 m=ken asddq casdasd";

$parts = preg_split('/(\w+=)/', $str, -1, PREG_SPLIT_DELIM_CAPTURE);

$result = array();
$prev_was_an_identifier = false;
$last_identifier = null;
foreach ($parts as $part) {
    if ($prev_was_an_identifier) {
        if (preg_match('/^\d+/', $part)) {
            $result[$last_identifier] = preg_replace('/^(\d+).*/', '$1', $part);
        } else {
            $result[$last_identifier] = $part;
        }   
        $prev_was_an_identifier = false;
    } elseif (preg_match('/=$/', $part)) {
        $prev_was_an_identifier = true;
        $last_identifier = mb_substr($part, 0, -1);
    }
} 
```

输出：

```
array (
  'k' => '12312',
  'l' => '89879',
  'm' => 'ken asddq casdasd',
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:13:01.897

好吧，首先您需要定义字符串的结构，如下所示：

```
$str = "$first_value k=$secound_value l=$third_value m=$forth_value"; 
```

如果结构如我所写，那么几乎不可能得到你需要的东西，因为没有分隔符或任何其他类型的方法来确定一个值的结束位置和另一个值的开始位置。看这个例子：

```
$str="absdbsasd k=12312 sdasd l=s l=8987 l=s 9 m=ken asddq casdasd" 
```

没有办法知道真正的`l=`开始。

如果您要添加一些分隔符，例如`'`( 并确保它们不会出现在值中，您可以获得如下内容：

```
$str="'absdbsasd' k='12312 sdasd l=s' l='8987 l=s 9' m='ken asddq casdasd'" 
```

然后你可以做一个`preg_match`或`preg_split`检查并得到你想要的值。

或者，建议在第一个位置创建一个数组。

# android - SQLite 数据库，带有位图的对象

> ID：11718166
> 
> 赞同：0
> 
> 时间：2012-07-30T08:54:23.747
> 
> 标签：android, sqlite

我在将对象插入 SQLite 数据库时遇到问题。我的课，`Case`看起来像这样：

```
public class Case {

String caseNumber; 
int status; 
String date;
Bitmap rightIndexFinger;
Bitmap leftIndexFinger; 

public Case(String caseNumber, int status, String date, Bitmap rightIndexFinger, Bitmap leftIndexFinger) {

    this.caseNumber = caseNumber;
    this.status = status;
    this.date = date;
    this.rightIndexFinger = rightIndexFinger;
    this.leftIndexFinger = leftIndexFinger; 

}

public Case(String caseNumber, int status, String date) {

    this.caseNumber = caseNumber;
    this.status = status;
    this.date = date;
}

public Bitmap getRightIndexFinger() {
    return rightIndexFinger;
}

public void setRightIndexFinger(Bitmap rightIndexFinger) {
    this.rightIndexFinger = rightIndexFinger;
}

public Bitmap getLeftIndexFinger() {
    return leftIndexFinger;
}

public void setLeftIndexFinger(Bitmap leftIndexFinger) {
    this.leftIndexFinger = leftIndexFinger;
}

public String getCaseNumber() {
    return caseNumber;
}

public void setCaseNumber(String caseNumber) {
    this.caseNumber = caseNumber;
}

public int getStatus() {
    return status;
}

public void setStatus(int status) {
    this.status = status;
}

public String getDate() {
    return date.toString();
}

public void setDate(String date) {
    this.date = date;
}
} 
```

我需要将此类的对象插入 SQLite 数据库。我尝试的是：

```
String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CASES + "("
                + KEY_ID + " INTEGER PRIMARY KEY," + DATE + " TEXT,"
                + RIGHTFINGER + " TEXT," + LEFTFINGER +" TEXT" + ")";
        db.execSQL(CREATE_CONTACTS_TABLE); 
```

`case`如果类中的所有变量都是 ，这是有道理的`String`，但是如何为位图做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:56:51.900

sqlite 中的位图映射到 Blob，要插入图像，您将其作为字节 [] 插入。
检查[https://stackoverflow.com/a/4508531/1434631](https://stackoverflow.com/a/4508531/1434631)
和[https://stackoverflow.com/a/7331698/ 1434631](https://stackoverflow.com/a/7331698/1434631)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:58:58.270

将位图转换为字节数组，然后将此字节数组以 Blob 数据类型保存到数据库中。通过以下代码：

要将位图转换为字节数组，请使用以下代码：

```
Bitmap image = BitmapFactory.decodeResource(getResources(), R.drawable.thumbnail);

ByteArrayOutputStream out = new ByteArrayOutputStream();

image.compress(Bitmap.CompressFormat.PNG, 100, out);

byte[] buffer=out.toByteArray(); 
```

要将字节数组保存为 blob 类型，请使用以下代码：

```
ContentValues cv=new ContentValues();
   cv.put(CHUNK, buffer);       //CHUNK blob type field of your table
   long rawId=database.insert(TABLE, null, cv); //TABLE table name 
```

通过此链接阅读有关 Blob 的更多信息

# android - 为什么 Toast.makeText 而不是新的 Toast

> ID：11718171
> 
> 赞同：6
> 
> 时间：2012-07-30T08:54:34.730
> 
> 标签：android, toast, android-source

这可能是一个菜鸟问题，但我想知道为什么我们必须使用静态方法（makeText）来创建 Toast 而不是构造函数。

为什么我们必须使用这个：

```
makeText(Context context, CharSequence text, int duration) 
```

而不是这个：

```
new Toast(Context context, CharSequence text, int duration) 
```

这是 makeText 方法：

```
 public static Toast makeText(Context context, CharSequence text, int duration) {
        Toast result = new Toast(context);

        LayoutInflater inflate = (LayoutInflater)
                context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View v = inflate.inflate(com.android.internal.R.layout.transient_notification, null);
        TextView tv = (TextView)v.findViewById(com.android.internal.R.id.message);
        tv.setText(text);

        result.mNextView = v;
        result.mDuration = duration;

        return result;
    } 
```

为什么我们没有以下内容：

```
public Toast (Context context, CharSequence text, int duration) {
    this(context);

    LayoutInflater inflate = (LayoutInflater)
            context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = inflate.inflate(com.android.internal.R.layout.transient_notification, null);
    TextView tv = (TextView)v.findViewById(com.android.internal.R.id.message);
    tv.setText(text);

    this.mNextView = v;
    this.mDuration = duration;
} 
```

我出于任何原因搜索了网络和源代码，但没有找到。

如果您有想法，请不要犹豫。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T09:17:23.857

这个问题基本上深入到我什么时候应该将方法设为静态。答案很简单——当你的方法有一个非常具体的任务并且不改变对象的状态时。

类似于实用方法的东西，比如 add(int a, int b)，它只返回 a+b。如果我需要存储值 a+b 以供以后用于对象，静态方法是严格禁止的（您将无法在静态方法中存储非静态变量）。但是，如果我们正在处理一些独立于对象状态的动作，那么静态就是答案。

如果静态独立于对象的状态，我们为什么要优先考虑它？

1.  内存静态方法将只有一个副本，与对象的实际数量无关。

2.  可用性 - 即使您没有单个对象，方法也可用

当然，缺点是我们保留了一个方法的副本，即使我们根本不使用它（如果它是非静态的并且没有创建对象，我们会节省这个空间）。但这比上面提到的优点要轻。

作为我们这里讨论的方法（makeText），不需要保持状态以备后用，最好的方法是静态方法。

- 编辑 -

上面提到的答案对于我们何时应该使用静态以及何时使用非静态更为通用，让我具体介绍一下 Toast 类。

Toast 类为我们提供了 2 种创建 Toast 对象的方法（请参阅[http://developer.android.com/reference/android/widget/Toast.html](http://developer.android.com/reference/android/widget/Toast.html)）

1.  makeText(Context context, CharSequence text, int duration) 返回一个 Toast 对象，该对象分配了值。

2.  正常方式，使用 new Toast(context) 创建一个对象，然后根据需要设置值。

如果你使用方法 1，你说的是 Toast.makeText(context, text, duration).show(); 我们完成了。我一直使用这种方法。

方法 2 仅用于特定情况，来自[http://developer.android.com/guide/topics/ui/notifiers/toasts.html](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)

> 除非您打算使用 setView(View) 定义布局，否则不要对 Toast 使用公共构造函数。如果您没有要使用的自定义布局，则必须使用 makeText(Context, int, int) 来创建 Toast。

@CFlex，如果我正确地回答了你的问题，我想你只是想知道为什么我们有 Toast.makeText(context, text, duration) 返回一个 Toast 对象，而构造函数可以完成同样的事情。

每当我看到类似 ClassName.getObject 返回类的对象时，我都会想到单例模式。好吧，在这种情况下，我们并不是在谈论单例，我想假设 makeText 总是返回相同的对象（以保存 N 个对象的创建），否则它只是 Android 团队开发的一个花哨的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T09:00:29.787

一条规则：问问自己“即使还没有构造任何对象，调用这个方法是否有意义？” 如果是这样，它肯定应该是静态的。

请记住，对象存在于内存中，它们是为某些工作而创建的。静态方法可用于类中的所有对象，无需创建对象即可使用它们。

所以没有理由创建一个对象 Toast 来访问该方法`makeText`，当您可以将它作为静态方法访问时（更优雅和紧凑）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T08:59:00.740

据我所知：

那是因为我们不希望保存对象 toast 的实例，这将需要持续使用的内存量，直到被 GarbageCollector 清除。

并且它始终可以访问显示，因此您的应用程序不需要任何权限集。

# plone - 克隆“成员文件夹”选项不起作用

> ID：11718172
> 
> 赞同：1
> 
> 时间：2012-07-30T08:54:39.147
> 
> 标签：plone, directory, member, zope

我在克隆管理面板中启用了“成员文件夹”。然后我在 ZMI 中创建了一个上下文菜单链接（带有 url: `string:${portal/portal_membership/getHomeUrl}`），以使这些文件夹易于使用。

我注意到，它`.getHomeUrl()`总是返回 None，并且链接看起来像：`127.0.0.1:80/web/None`。

你知道有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:07:41.690

首先，您通常在 Plone 控制面板的安全选项卡中启用该选项：

![安全设置控制面板](../Images/0be7f2a2b65f3e257838c530ac661b89.png)

如果您在此处设置该选项，它还将自动添加一个使用该`.getHomeUrl()`方法的“我的文件夹”操作。

`.getHomeUrl()`仅当文件夹已存在时才返回 URL。在您的情况下，似乎尚未为当前成员创建文件夹。该文件夹是在成员登录但还没有自己的文件夹时首先创建的。注销然后再次登录应该可以解决此问题。

如果您不小心`Members`从 Plone 设置中删除了该文件夹，则需要重新创建它。否则，每用户文件夹创建将失败。如果它丢失，只需`Members`在站点的根目录中创建一个带有 id 的新文件夹。

# c++ - 比较 IPV4 套接字（sockaddr_in）与 IPV6 套接字（sockaddr_in6）

> ID：11718176
> 
> 赞同：5
> 
> 时间：2012-07-30T08:54:57.377
> 
> 标签：c++, sockets, udp

我有一个 UDP 服务器，它必须为 IPV4 和 IPV6 地址上的客户端提供服务。我创建了一个 IPV6 套接字来同时为 IPV4 和 IPV6 客户端提供服务。

服务器在第一次通信时存储客户端的 IPAddress。如果是 IPV4 客户端，则存储为 IPV4 地址，如果是 IPV6 客户端，则服务器存储为 IPV6 地址。对于所有未来的通信，它会检查存储是否该客户端是已知的（存储的），然后采取相应的行动。为了将客户端地址与存储的地址进行比较，我根据族类型（AF_INET 和 AF_INET6）执行 memcmp。

在与 IPV6 客户端通信时，系统正常工作，但在与 IPV4 客户端通信时，系统的行为就好像它从来不知道客户端一样。在调试时，我发现由于 IPV6 的套接字类型，IPV4 客户端的 IPAddresss 被接收为 IPV6 映射的 IPV4 地址，其系列设置为 IPV6。为了解决这个问题，我需要比较 IPV4 存储地址和 IPV6 映射地址。为此，我使用 IPV4 结构的 sin_addr.s_addr 和 IPV6 结构的 sin6_addr.in6_u.u6_addr32。请在下面找到代码片段。

```
ipv6_clientdata = (const struct sockaddr_in6 *)&sockStor;
ipv4_storeddata = (const struct sockaddr_in *)&(_stData[index].clientaddr);
if( (ipv6_clientdata->sin6_port == ipv4_storeddata->sin_port) && 
    (ipv6_clientdata->sin6_addr.in6_u.u6_addr32[3] == ipv4_storeddata->sin_addr.s_addr) 
  )
{
    addrfound = true;
} 
```

我想知道这种方法是否是将 IPV6 映射的 IPV4 地址与 IPV4 地址进行比较的正确解决方案，还是有其他更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T00:21:57.313

正如[Joachim Pileborg 所](https://stackoverflow.com/users/440558/joachim-pileborg)推理的，当 IPv4 地址来自同一套接字上接收的较早数据包时，您无需关心这一点，因为您将一个映射的 IPv4 地址与另一个进行比较。只有在 IPv4 地址是从外部来源获得的情况下，您才需要注意。

正如[João Augusto](https://stackoverflow.com/users/6909/joao-augusto)指出的那样，在比较最后 32 位之前，您忽略了检查 IPv6 地址是否确实是 IPv4 映射地址。有一个宏`IN6_IS_ADDR_V4MAPPED`可以帮助你做到这一点：

```
if (
    IN6_IS_ADDR_V4MAPPED(&(ipv6_clientdata->sin6_addr)) &&
    (ipv6_clientdata->sin6_port == ipv4_storeddata->sin_port) &&
    (ipv6_clientdata->sin6_addr.in6_u.u6_addr32[3] == ipv4_storeddata->sin_addr.s_addr)
) {
    addrfound = true;
} 
```

# ruby-on-rails - 使用“mongoid-paperclip”宝石时出错

> ID：11718178
> 
> 赞同：1
> 
> 时间：2012-07-30T08:55:00.117
> 
> 标签：ruby-on-rails, mongoid, paperclip, image-upload

我使用“mongoid-paperclip”gem在rails中使用mongodb进行图像上传。教程是：[Mongoid-paperclip](https://github.com/meskyanichi/mongoid-paperclip)。但我收到以下错误
`undefined method "logger" for Mongoid::Config:Module`
如何删除此错误。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:20:00.843

按照此链接[https://github.com/meskyanichi/mongoid-paperclip/blob/6dfdf7f9b4f44d80903a9ddbb6549f53ddb6116c/lib/mongoid_paperclip.rb](https://github.com/meskyanichi/mongoid-paperclip/blob/6dfdf7f9b4f44d80903a9ddbb6549f53ddb6116c/lib/mongoid_paperclip.rb) 并替换您的 gem 代码并尝试它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:42:04.550

在试图找到解决这个问题的几个小时后，我感到沮丧并尝试了一种不同的方法并将 gems 切换到carrierwave。它似乎与 mongoid 一起工作得更好（至少我让它立即工作）。因此，如果您没有（出于某种我不知道的原因）卡在回形针上，我建议您使用carrierwave，尤其是当瑞安·贝茨（Ryan Bates）将其描述为具有更多功能时。

*   这是 Railscast，因此您可以决定是否要使用它：[#253 CarrierWave File Uploads at RailsCasts](http://railscasts.com/episodes/253-carrierwave-file-uploads)

这是carrierwave的文档：

1.  [Github 上的 Carrierwave Wiki](https://github.com/jnicklas/carrierwave/wiki)
2.  [Github 上的 Carrierwave-Mongoid](https://github.com/jnicklas/carrierwave-mongoid)

对我来说，Rails 3 + Mongoid 就像一个魅力。

# tfs - TFS 插件在编辑时锁定文件

> ID：11718183
> 
> 赞同：0
> 
> 时间：2012-07-30T08:55:25.510
> 
> 标签：tfs, team-explorer-everywhere

嗨，我使用 MS TFS 作为我的存储库，我在 Eclipse Juno 上安装了 tsf Everywhere 插件，在这里，每当我在文件中进行编辑时，文件会自动锁定在存储库中，然后只有在我提交后，另一个开发人员才能提交，有什么方法可以避免锁定，就像我们在 SVN 中那样，我的意思是编辑不会锁定文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:24:32.403

在您的团队项目配置中，在“源代码管理设置”中，您需要选中“启用多个签出”。如果为您的文件扩展名启用了“文件合并”，您还需要检查您的团队项目集合设置。

# ruby-on-rails - 如何在 Rails 中不创建模型的情况下查询数据？

> ID：11718184
> 
> 赞同：9
> 
> 时间：2012-07-30T08:55:27.590
> 
> 标签：ruby-on-rails

有时，我需要查询数据库中的大量数据进行数据处理。

例如，我有一个表：Activity，我想找到上个月创建活动的所有用户，

我只关心数据数组，不想创建很多Activity模型，

有什么办法可以做到吗？

像这样的代码：

```
Activity.where('created_at > ?', Time.now - 1.month).get_data(:user_id, :created_at)
=> [[1, 2012-02-01] .... ] 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-30T10:52:32.523

试试这个方法：

```
sql = "SELECT * from activities limit 10"
result = ActiveRecord::Base.connection.execute(sql)
result.to_a 
```

我不确定 sql 查询，但我想你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:37:49.623

尝试：

```
Activity.where(['activities.user_id = ? 
                 AND activities.created_at BETWEEN ? 
                 AND ?', users, 1.month.ago, Time.zone.now]) 
```

这将返回过去一个月为一组用户创建的所有活动。此查询的唯一潜在问题是数据集非常大。在运行此查询之前，您可能希望使用 named_scope 来缩小活动范围，这样它就不会搜索数据库中的每个活动。

# android - PlayN Android 游戏的支付实现

> ID：11718186
> 
> 赞同：1
> 
> 时间：2012-07-30T08:55:31.033
> 
> 标签：android, payment, playn

我正在使用 PlayN 引擎创建游戏，并且我想使用支付功能通过 Google 钱包销售游戏内容。

在[支付演示示例中](https://code.google.com/p/playn-samples/source/browse/#git/paymentsdemo)，我没有找到任何适用于 Android 的部分，并且在[PlatformStatus](http://code.google.com/p/playn/wiki/PlatformStatus)中也没有支付功能。

我只是感兴趣，Android中是否支持付款？如何使用它，有代码示例吗？

# java - 无法在 play 2 框架模板中访问 List[ArrayList]

> ID：11718188
> 
> 赞同：1
> 
> 时间：2012-07-30T08:55:34.097
> 
> 标签：java, playframework, playframework-2.0

我`List<ArraList>`在“模型”中填充如下：

```
List<ArrayList> selectedAgrovoc=new ArrayList<ArrayList>();
for(int i.......)
{
for(int j......)
{
ArrayList rowNewAgrovoc=new ArrayList();
rowNewAgrovoc.add(new String(....));
rowNewAgrovoc.add(new String(.....));
selectedAgrovoc.add(rowNewAgrovoc);
}

} 
```

访问控制器中的列表：

```
inputModel create=filledForm.get();
List<ArrayList> ctagsList=inputModel.indertData(create);
return ok(summary.render(create, ctagsList)); 
```

在模板字段中：

```
@(ctagList: List[ArrayList]) 
```

编译后出现错误`class ArrayList takes type parameters`

我的问题是：

1.  为什么我无法`List`在模板中访问
2.  如何在模板中`List`使用循环显示每个元素`for`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-07T17:22:52.057

在@(ctagList: List[ArrayList]) 下方，添加@import collection.JavaConversions._ 并将ctagList 声明为arralist - @(ctagList: ArrayList[Long])

# android - Android：单击侦听器操作

> ID：11718191
> 
> 赞同：0
> 
> 时间：2012-07-30T08:55:56.557
> 
> 标签：android

我不知道要解释这个，但我走了，所以我有一个填充列表......所以我长按该列表中的一个项目的每个项目都会出现一个图像按钮实际上是一个删除按钮......所以当我长按列表中的另一个项目我想在我单击的第一个项目上隐藏该按钮...就像每次我长按一个项目时都会出现一个图像按钮，当我单击另一个项目时，该按钮将被隐藏并且将显示我单击新项目的按钮..有关如何执行此操作的任何输入将不胜感激，或者如果您可以给我一些有效的方法来执行此操作..请分享。很多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:14:31.653

尝试这个，

假设您正在为列表使用适配器...

```
 final ImageButton prevButton=null;
    row.setOnLongClickListener(new OnLongClickListener() {          
        @Override
        public boolean onLongClick(View arg0) {
            ImageButton currButton=row.findViewById(R.id.<button_id>);
            currButton.setVisibility(View.VISIBLE);
            if(prevButton!=null)
                prevButton.setVisibility(View.gone);
            prevButton=currButton;
            return true;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:08:34.853

您可以只跟踪上一个删除按钮，因为只允许一个。在长按监听器中，您可以删除前一个按钮并创建一个新按钮。

```
ImageButton prevDelete = null;

...

list.setOnItemLongClickListener (new OnItemLongClickListener() {
  public boolean onItemLongClick(AdapterView parent, View view, int position, long id)      {
        deleteButton(prevButton); // check if not null in the function
        prevDelete = createButton(view); // draw button at view
        return true;
  }
}); 
```

您可能已经实现了函数`createButton`和`deleteButton`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T09:10:47.770

这个问题非常令人困惑......但据我了解，我发现您需要检测列表项上的长按。您是否尝试过[AdapterView.OnItemLongClickListener](http://developer.android.com/reference/android/widget/AdapterView.OnItemLongClickListener.html)。

```
somelist.setOnItemLongClickListener (new OnItemLongClickListener() {
  public boolean onItemLongClick(AdapterView parent, View view, int position, long id) {
    //do your stuff of showing\hiding button here...
  }
}); 
```

# ubuntu-12.04 - 如何在 Ubuntu 12.04 LTS 上开始使用 Xmonad？

> ID：11718196
> 
> 赞同：30
> 
> 时间：2012-07-30T08:56:14.950
> 
> 标签：ubuntu-12.04, xmonad

我已经在我的 Ubuntu 12.04 LTS 系统上安装了用 Haskell 编写的 Xmonad 0.10-3 Lightweight X11 窗口管理器以及库和文档。

我期望一些界面/菜单来运行这个应用程序，但什么也没看到。我也找不到相关文档。

请指导如何开始使用 Xmonad？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-30T18:09:14.067

如果您通过 Ubuntu 软件包安装了 XMonad，您应该能够在登录系统时选择 XMonad 作为选项，就像选择 Gnome 或 Unity 等任何其他窗口管理器一样。

进入后，您会发现默认配置非常少。我建议您按照教程开始。XMonad 站点 (http://xmonad.org/) 有各种文档，包括这个入门教程： http: [//xmonad.org/tour.html](http://xmonad.org/tour.html)。

XMonad 的很大一部分乐趣在于能够滚动您自己的非常定制的配置。我发现弄清楚什么是可能的最好方法是看看其他人在做什么。XMonad 站点有一个带有屏幕截图和许多不同示例配置文件的页面：[http](http://www.haskell.org/haskellwiki/Xmonad/Config_archive) ://www.haskell.org/haskellwiki/Xmonad/Config_archive 。

或者，您可能有兴趣查看我自己评论和记录的配置，其中包括安装说明和其功能的演练。我已经在 GitHub 上提供了这个：[https](https://github.com/davidbrewer/xmonad-ubuntu-conf) ://github.com/davidbrewer/xmonad-ubuntu-conf 。

最重要的是，给它一点时间！XMonad 一开始可能会让人望而生畏，但是一旦我习惯了它，我就无法想象在我的日常工作中回到更传统的窗口管理器了。

# ruby-on-rails - 在创建错误时，我应该渲染“new”还是重定向到“new”？

> ID：11718204
> 
> 赞同：8
> 
> 时间：2012-07-30T08:56:56.307
> 
> 标签：ruby-on-rails

假设我有这样的事情：

```
def new
  @user = User.new
end
def create
  @user = User.create(params[:user])
  if @user.save
    flash[:notice] = 'User created'
    redirect_to :action => 'list'
  else
    flash[:error] = 'Some error here!'
    render 'new'
  end
end 
```

我认为代码很清楚。
这里的问题是，当`@user`对象没有成功保存时，我应该渲染`new`（如上）还是应该重定向到`new`？

我知道重定向到`new`用户输入的数据是否丢失，但如果我渲染`new`，URL 将`/users/create`代替`/users/new`（这很难看！）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:29:54.110

你不使用是正确的`redirect`。重定向正在加载一个全新的资源。

`render`然而，这将使您的会话数据保持新鲜，并且根据您的表单设置方式，*应该*重新填充输入的任何数据。

你提到：

*我知道重定向到新用户输入的数据是否丢失，但如果我呈现新的，URL 将是 /users/create 而不是 /users/new （这很难看！）。*

不，这不是真的。如果你说`render 'new'`，它将转到`users/new`未创建的 url。Create as an action 仅处理`POST`对控制器的请求，通常不会有与之关联的视图。相反，它将指代`new`处理任何错误和显示表单的操作。

create 动作与`update`只处理请求的动作相同`PUT`，但指的是`edit`处理视图显示的动作。

# database - postgresql 序列中的漏洞/间隙对性能有害吗？

> ID：11718206
> 
> 赞同：1
> 
> 时间：2012-07-30T08:56:58.473
> 
> 标签：database, postgresql, sequence

我实现了一个系统，该系统导致 Postgresql 生成的序列值存在很多漏洞。我只是想问一下这是否会导致性能下降？

如果可能的话，请附上我可以做进一步阅读的参考，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:02:06.193

不用担心。不会对性能产生任何影响。

主要原因是数字（整数、大整数）以固定的存储量存储。因此，无论 ID 保存值 42 还是 38643874638，存储或运行时开销都没有区别

另外：无法避免序列中的漏洞。由于主键只是“一些价值”，它们也无关紧要。

整数的存储要求：[http ://www.postgresql.org/docs/current/static/datatype-numeric.html#DATATYPE-INT](http://www.postgresql.org/docs/current/static/datatype-numeric.html#DATATYPE-INT)

# iphone - 如何在 xcode 中运行 PJSIP？

> ID：11718207
> 
> 赞同：1
> 
> 时间：2012-07-30T08:57:03.377
> 
> 标签：iphone, objective-c, ios, ipad, pjsip

我是 XCode 的新手，但仍在尝试理解 Objective-C。我正在使用 xcode 4.3.2，我必须创建一个与 PJSIP 集成的应用程序。

我找到[了这个链接](http://trac.pjsip.org/repos/wiki/Getting-Started/iPhone#OtheriPhoneProjects)。我仍然对那个链接感到困惑，因为文章说我们必须安装命令行工具。但是命令行工具已经安装在我的 XCode 中。我该如何使用它？

我需要创建视图基础应用程序吗？我怎样才能像链接说的那样运行命令行工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T08:59:41.037

命令行工具允许您从源代码编译“传统 UNIX 程序”，通常使用`make`. 如果您使用 Xcode 创建项目，那么您甚至不需要安装它们。

**编辑**好的，您已经编辑了您的问题，说明了您面临的真正问题；您不知道如何使用已安装的 PJSIP 包。您引用的链接是关于构建 PJSIP，而不是使用它，因此您仍然可以忘记命令行并专注于如何配置您的 Xcode 项目以使用 PJSIP。这将需要设置头文件搜索路径和库搜索路径来查找头文件和库文件，以便对其进行编译和链接。希望它是一个静态库，因为它更易于使用；如果它是一个动态库或框架，那么你的工作就会被削减，因为它更难使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:40:36.927

在较新的 XCode（4.3 或更高版本）中，您可能必须安装命令行工具，因为它已成为可选的。打开 XCode 并转到 XCode->Preferences

打开“下载”面板并单击“组件”。如果尚未安装命令行工具，您将获得从此处安装它们的选项。

这样做，你就准备好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:42:58.687

我自己完成了。如果你遇到同样的问题，你可以参考[这个链接](https://stackoverflow.com/questions/11848333/just-info-how-to-build-and-compile-pjsip-for-xcode-using-sample-code-ipjsua-t)，我已经试过并运行它。它适用于模拟器和设备。谢谢。

# sencha-touch-2 - 清除数据存储并重新填充它

> ID：11718208
> 
> 赞同：0
> 
> 时间：2012-07-30T08:57:05.950
> 
> 标签：sencha-touch-2

我有以下商店：

```
Ext.define('Sencha.store.AdultMenuStore', {
extend: 'Ext.data.Store',

config: {
    onItemDisclosure: true,
    model:'Sencha.model.MenuPoint',
    data: [
        {
            id:   'addChild',
            name: 'Add child',
            icon_url: 'http://kidsparent.no/images/adultMenu/bkids-home-plussign.png',
            xtype: 'addchildform'
        },{
            id:   'share',
            name: 'Share',
            icon_url: 'http://kidsparent.no/images/adultMenu/bkids-home-shareicon.png',
            xtype: 'childmenu'
        },{
            id:   'myProfile',
            name: 'My Profile',
            icon_url: 'http://kidsparent.no/images/adultMenu/bkids-home-profile.png',
            xtype: 'childmenu'
        },{
            id:   'help',
            name: 'Help',
            icon_url: 'http://kidsparent.no/images/adultMenu/bkids-home-question.png',
            xtype: 'childmenu'
        }]
}
}); 
```

它使用以下模型：

```
Ext.define('Sencha.model.MenuPoint', {
extend: 'Ext.data.Model',

config: {
    fields: [
        {name: 'id', type: 'string'},
        {name: 'name', type: 'string'},
        {name: 'icon_url', type: 'string'},
        {name: 'xtype', type: 'string'}
    ]
}
}); 
```

我在代码中的某些地方动态添加菜单点，如下所示：

```
 var child = children[i];
 var menuPoint = Ext.create('Sencha.model.MenuPoint', {id: child.childId, name: child.firstName, icon_url: 'aLink', xtype: 'childmenu'});
 store.add(menuPoint); 
```

有时我需要清除商店，删除我动态添加的菜单点，只使用我在商店中硬编码的菜单点。我看到了在商店中删除和添加的方法，但我不知道如何重置商店并用我在那里定义的静态数据重新填充它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:13:08.107

按照我在你上一个问题上的回答做，你不尊重:)

```
var data = [
        {
            id:   'addChild',
            name: 'Add child',
            icon_url: 'http://kidsparent.no/images/adultMenu/bkids-home-plussign.png',
            xtype: 'addchildform'
        },{
            id:   'share',
            name: 'Share',
            icon_url: 'http://kidsparent.no/images/adultMenu/bkids-home-shareicon.png',
            xtype: 'childmenu'
        },{
            id:   'myProfile',
            name: 'My Profile',
            icon_url: 'http://kidsparent.no/images/adultMenu/bkids-home-profile.png',
            xtype: 'childmenu'
        },{
            id:   'help',
            name: 'Help',
            icon_url: 'http://kidsparent.no/images/adultMenu/bkids-home-question.png',
            xtype: 'childmenu'
        }]

store.load(function (store) {
    store.add(data)// data is an array with you local data
}) 
```

store.load() 函数清理 prev 数据

干杯，奥列格

# spring - HTTPSessionListener 使用 Spring 注入和服务 => 无法访问我的 bean

> ID：11718216
> 
> 赞同：2
> 
> 时间：2012-07-30T08:57:59.923
> 
> 标签：spring, jakarta-ee, service, dependency-injection, httpsession

我使用**Spring 注释**在 Web 应用程序上工作，以注入我的控制器和服务。在应用程序中，我有用户在处理项目，但我需要确保一个项目一次只能由一个用户编辑，所以我在数据库的“项目”表中有一个属性，如果项目打开并且通过谁。

我需要添加一个 HTTPSessionListener 以便能够在用户编辑项目断开连接时“关闭”项目。这意味着在“sessionDestroyed”事件中，我想调用我的 DAO 服务来更新数据库中的项目。唯一的问题是这个服务是由Spring注入的，我无法得到它......

我尝试在我的 HTTPSessionListener 中使用 @Autowired 但它不起作用，我尝试在这个解决方案中这样做（[Spring – 如何在会话侦听器中进行依赖注入](http://www.mkyong.com/spring/spring-how-to-do-dependency-injection-in-your-session-listener/)）但我得到了 WebApplicationContext 的 nullPointerException ...

我的 web.xml ：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee" xmlns:jsp="http://java.sun.com/xml/ns/javaee/jsp"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
id="WebApp_ID" version="3.0">

<!-- jsp config => automatic inclusions in all jsp files -->
<jsp-config>
    <jsp-property-group>
        <url-pattern>*.jsp</url-pattern>
        <include-prelude>taglibs.jsp</include-prelude>
        <include-prelude>setLanguage.jsp</include-prelude>
    </jsp-property-group>
</jsp-config>
<display-name>MEANS</display-name>

<!--Spring dispatcher servlet -->
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.do</url-pattern><!-- detect all urls ending with ".do" -->
</servlet-mapping>

<!-- The welcome files -->
<welcome-file-list>
    <welcome-file>connection.jsp</welcome-file>
</welcome-file-list>
<session-config>
    <session-timeout>30</session-timeout><!-- the session is automatically disconnected after 30 min of inactivity -->
</session-config>
<listener>
    <listener-class>myPackages.listener.MySessionListener</listener-class>
</listener> 
```

和 dispatcher-servlet.xml ：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:mvc="http://www.springframework.org/schema/mvc"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="http://www.springframework.org/schema/beans 
   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/mvc
   http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
   http://www.springframework.org/schema/context 
   http://www.springframework.org/schema/context/spring-context.xsd">

<!-- Spring MVC Support for annotations (JSR-303) -->
<mvc:annotation-driven/>

<!-- Spring View resolver => find the jsps -->
<bean id="viewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver"
      p:suffix=".jsp" />

<!--  Spring info : what packages to scan for detecting annotations -->
<context:component-scan base-package="myPackages"/> 
```

所以我需要你的帮助......有人知道如何将 Spring Service 注入我的 HTTPSessionListener 吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:41:27.187

一种选择（从设计的角度来看可能是最好的选择）是创建[一个范围 bean`session`](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-scopes-session)（不要忘记声明`RequestContextListener`）并将与会话生命周期相关联的逻辑放入其中。当 session 被销毁时，Spring 会自动调用它的销毁方法（用 注释`@PreDestroy`或配置为）。`destroy-method`

您注入会话侦听器的方法会导致问题，因为您只有`DispatcherServlet`、没有`ContextLoaderListener`、`WebApplicationContextUtils`也不能获得与`DispatcherServlet`. 如果您选择遵循该方法，您应该创建一个根应用程序上下文并将一些 bean 提取到其中，然后您将能够通过会话侦听器访问它`WebApplicationContextUtils`。

# jquery - 如何同时使用 jquery 为 2 个不同的 html 元素设置动画？

> ID：11718220
> 
> 赞同：-2
> 
> 时间：2012-07-30T08:58:13.343
> 
> 标签：jquery, html, jquery-animate, move

我需要为 2 个不同的 html 元素创建幻灯片效果，但是这个动画必须同时运行。

有 jquery.animate() 函数的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:29:15.843

在这里，我完成了完整的 bins，展示了如何使用 jQuery 为两个不同的 HTML 元素设置动画。演示链接如下：

**演示：** [http ://codebins.com/bin/4ldqp9a](http://codebins.com/bin/4ldqp9a)

**HTML：**

```
<div id="panel1" class="edge">
  <div class="box" style="top:30; background:#f8a2a4;">
  </div>
</div>
<div id="panel2" class="edge">
  <div class="box" style="top:120; background:#5599fd;">
  </div>
</div>
<br/>
<input type="button" id="btn1" value="Animate Block1" />
<input type="button" id="btn2" value="Animate Block2" />
<input type="button" id="btn3" value="Animate Both" /> 
```

**CSS：**

```
body{
  background:#ffffef;
}
.edge{
  width:500px;
  height:70px;
  border:1px solid #3377af;
  padding:5px;
  margin-top:10px;
}
.box{
  position:absolute;
  left:10;
  width:40px;
  height:40px;
  border:1px solid #a82244;
} 
```

**查询：**

```
$(function() {
    $("#btn1").click(function() {
        var move = "";
        if ($(".box", $("#panel1")).css('left') == "10px") {
            move = "+=" + ($("#panel1").width() - 35);
        } else {
            move = "-=" + ($("#panel1").width() - 35);
        }
        $(".box", $("#panel1")).animate({
            left: move
        }, 500, function() {
            if ($(this).css('left') == "475px") {
                $(this).css('background', '#afa799');
            } else {
                $(this).css('background', '#f8a2a4');
            }

        });
    });

    $("#btn2").click(function() {
        var move = "";
        if ($(".box", $("#panel2")).css('left') == "10px") {
            move = "+=" + ($("#panel2").width() - 35);
        } else {
            move = "-=" + ($("#panel2").width() - 35);
        }
        $(".box", $("#panel2")).animate({
            left: move
        }, 500, function() {
            if ($(this).css('left') == "475px") {
                $(this).css('background', '#afa799');
            } else {
                $(this).css('background', '#5599fd');
            }

        });
    });
    //Call Event Con-currently for both blocks
    $("#btn3").click(function() {
        $("#btn1").add("#btn2").click();
    });

}); 
```

**演示：** [http ://codebins.com/bin/4ldqp9a](http://codebins.com/bin/4ldqp9a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:20:20.980

我只是想移动一个 div 并同时移动一个 IMG

我忘记了两个 .animate() 一个接一个地同时自动运行。

抱歉耽误了时间……

# wordpress - Wordpress the_meta 和 get_post_meta- 在自定义字段中隐藏空值

> ID：11718221
> 
> 赞同：0
> 
> 时间：2012-07-30T08:58:24.513
> 
> 标签：wordpress

如果自定义字段没有值，我会尝试隐藏它们的显示。如果我用**the_meta**显示它们，那么标题会显示，无论自定义字段中是否有任何值。

它生成这个html：

```
<ul class="post-meta">
<li>
<span class="post-meta-key">My Custom Field Title</span>
</li>
<li>
</ul> 
```

如果没有内容，我真的不想要页面上的标题。所以我尝试了：

```
<?php
$ck = get_post_custom_keys($post_id); //Array
    foreach ($ck as $k) {
         $cv = get_post_custom_values($k, $post_id );  //Array
            foreach ($cv as $c) {
                echo (' - ');
                echo ($c);
            }
    }
?> 
```

$c 的回声（应用于帖子的自定义值）如下所示：

没有值：

*   1 - 1343633746:1 - - field_5014a45c9a2df - field_5014a48c38f9d - - field_5014a48c2cc82

有价值观：

*   1 - 1343603999:1 - 3 杯鸡蛋 - field_5014a45c9a2df - field_5014a48c38f9d - 2 杯面粉 - field_5014a48c2cc82

这可能是很长的路要走。它也显示了诸如“上次编辑”之类的值，而不仅仅是我输入测试的两个字段。

仅当自定义字段具有值时，我如何才能显示它们？我正在写一个主题，所以我事先不知道字段的名称或数量。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:07:35.940

您的主题是否仅显示某些自定义字段？与其针对所有内容进行测试，不如直接针对这些特定的自定义字段是否为空进行测试？

例如

```
$item = get_post_meta($post_id, "custom_field_1", true);
if (!empty($item)) { // if that field has something
    [...]            // display what you need to
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:16:22.450

您可以使用 来检查空值`empty()`，您可以检查字段是否以下划线开头（内部值，如`_edit_last`）并跳过这些。

```
<?php
$ck = get_post_custom_keys($post_id); //Array
    foreach ($ck as $k) {
         if (substr ($k, 0, 1) == '_')
         {   // skip keys starting with '_'
             continue;
         }
         $cv = get_post_custom_values($k, $post_id );  //Array
            foreach ($cv as $c) {
                if (empty ($c))
                {   // skip empty value
                    continue;
                }

                echo ($k . ': ' . $c . '<br/>');
            }
    }
?> 
```

# python - 使用多进程的问题

> ID：11718224
> 
> 赞同：1
> 
> 时间：2012-07-30T08:58:35.813
> 
> 标签：python, multiprocessing, pool

也许你可以帮助我找到我在设置多处理功能时的错误。我设置了一个工作函数，它获取数据（浮点类型）并计算平均值。如果我使用以下代码（使用 join()），则不会启动多处理，每个 for 循环都会一个接一个地工作。计算出正确的值。

相反，当我删除 join() 函数时，并行处理已启用，但会出现错误，并且大部分计算数据是相同的。似乎工作进程不使用自己的变量列表。你能给我一个提示吗？谢谢你。斯特凡

```
for hostgroup in hostgroups:
jobs = []
#multiprocessing.log_to_stderr(logging.DEBUG)
p = multiprocessing.Process(target=worker, args=(hostgroup,hostsfile,mod_inputfile,outputdir,testmode,backup_dir,start_time,end_time,rrdname,unit,yesterday,now_epoch,rrd_interval,rrd_heartbeat,name))
jobs.append(p)
p.start()
p.join() 
```

更新，与 Pool 一起使用，但仍不并行：

```
number_of_processes = len(hostgroups)
if __name__ == '__main__':
pool = multiprocessing.Pool(processes=number_of_processes)
for hostgroup in hostgroups:
    result = pool.apply_async(worker, [hostgroup,hostsfile,mod_inputfile,outputdir,testmode,backup_dir,start_time,end_time,rrdname,unit,yesterday,now_epoch,rrd_interval,rrd_heartbeat,name])
    print result.get(timeout=30) 
```

更新，这似乎并行工作，但只有一些进程正确结束（总是不同）：

```
number_of_processes = len(hostgroups)
if __name__ == '__main__':
pool = multiprocessing.Pool()
results = []
for hostgroup in hostgroups:
    results.append(pool.apply_async(worker,[hostgroup,hostsfile,mod_inputfile,outputdir,testmode,backup_dir,start_time,end_time,rrdname,unit,yesterday,now_epoch,rrd_interval,rrd_heartbeat,name]))
pool.close()
pool.join() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:08:04.650

p.join() 将阻塞你的主线程，直到进程完成它的工作。要获得真正的并行性，您需要在调用 join() 之前启动所有作业。

代码示例

```
jobs = []
for hostgroup in hostgroups:
    p = multiprocessing.Process(target=worker, args=(hostgroup,hostsfile,mod_inputfile,outputdir,testmode,backup_dir,start_time,end_time,rrdname,unit,yesterday,now_epoch,rrd_interval,rrd_heartbeat,name))
    jobs.append(p)
    p.start()
[p.join() for p in jobs] 
```

# c++ - 什么是 clang 中的无效 SourceLocation 以及如何与之交互？

> ID：11718227
> 
> 赞同：3
> 
> 时间：2012-07-30T08:58:49.007
> 
> 标签：c++, clang, abstract-syntax-tree

我需要用其他变量声明替换一些变量声明。

例如

```
int a = 5; 
```

变成

```
T<int> a = 5; 
```

更通用

```
X a = _const; 
```

变成

```
T<X> a = _const; 
```

我试图在 clang 中实现一个 ASTVisitor 后代：

```
bool VisitVarDecl(Decl *f) {
    if (VarDecl* VD = dyn_cast_or_null<VarDecl>(f)){
    Expr* init = VD->getInit();

    SourceRange definition = VD->getDefinition()->getSourceRange();
    FullSourceLoc exprLoc = ctx.getFullLoc(init->getLocStart());
    FullSourceLoc vLoc = ctx.getFullLoc(VD->getLocStart());
    ... 
```

我想用下一种方式替换变量的定义：

```
TheRewriter.ReplaceText(VD->getLocStart(), exprLoc.getSpellingColumnNumber()-vLoc.getSpellingColumnNumber(), someSting); 
```

但是任何调用 exprLoc.getSpellingColumnNumber() 都会导致分段错误。例如我只是尝试打印 exprLoc.getSpellingColumnNumber()：

```
llvm::outs()<< "init start at " 
    <<exprLoc.getSpellingColumnNumber(&isValid)
    <<" is "<<(isValid?"valid ":"invalid ")
    <<", decl start at "
    <<vLoc.getSpellingColumnNumber()
    <<".\n"; 
```

并且输出是 init start at 9 is invalid , decl start at 1\. <…> 分段错误

“无效”的 SourceLocation 是什么意思以及如何与之交互？

# ruby-on-rails - 红宝石中的复数

> ID：11718234
> 
> 赞同：2
> 
> 时间：2012-07-30T08:59:13.850
> 
> 标签：ruby-on-rails, ruby, count

我想识别并计算具有特定数量的消息和 post.location 不为零的帖子。

我有大约 100k 行，它用于统计用途，所以我需要快速查询（顺便说一下，我可能必须索引 post.location）。

我怎样才能以最简单快捷的方式做到这一点？

这是我的架构：

```
create_table "posts", :force => true do |t|
  t.string   "ref"
  t.string   "title"
  t.string   "author"
  t.datetime "created_at"
  t.datetime "updated_at"
  t.string   "location"
  t.float    "lat"
  t.float    "long"
end

create_table "messages", :force => true do |t|
  t.integer  "post_id"
  t.integer  "status_id"
  t.integer  "user_id"
  t.string   "content"
  t.datetime "created_at"
  t.datetime "updated_at"
  t.float    "lat"
  t.float    "long"
end

add_index "messages", ["post_id"], :name => "index_messages_on_post_id"
add_index "messages", ["created_at"], :name => "index_messages_on_created_at" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T09:05:41.360

您正在寻找的 SQL 查询应该看起来很像这样：

```
SELECT COUNT(posts.id)
FROM posts
JOIN messages ON (posts.id = messages.post_id)
GROUP BY (posts.id) HAVING (count(messages.id) > ?)
WHERE posts.location IS NOT NULL 
```

然后，您可以将其转换为 ActiveRecord 查询或仅使用`find_by_sql`. （我是凭记忆写的，因此您可能需要在某些地方对其进行调整……但总体思路应该可行）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:02:55.243

您可以在 Post 模型中使用此范围

范围：give_a_valid_name，lambda {|n| joins(:messages).having("COUNT(messages.id) = #{n}").where("location IS NOT NULL")}

然后使用 Post.give_a_valid_name(5).size 获取有 5 条消息的帖子数。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:17:58.207

好的，多亏了 Tigraine 和 az7ar 的回答，我成功地度过了难关。这是解决的方法：

`Post.joins(:messages).select('post_id as id').group("post_id").having("count(*) = 1").where('location IS NOT NULL')`

感谢 Tigraine 的 JOIN 建议和 az7ar 的`.where("location IS NOT NULL")`语法。

# html - html5 / css3 page-break-* 在 chrome 或 safari 中无法正常工作

> ID：11718238
> 
> 赞同：1
> 
> 时间：2012-07-30T08:59:27.137
> 
> 标签：html, google-chrome, css, safari, page-break

所以我有以下CSS。

```
#container { margin: 0 auto 0 auto; width: 800px; }

.print { display: none; }

@media print {
  #container { margin: 0; page-break-before: always; }
  .print { display: block; }
} 
```

应用于以下 HTML。

```
<html>
  <body>

    <div class="print">
      <img src="/logo" style="left: 50%; margin-left: -34px; margin-top: -15px; position: absolute; top: 50%;" />
    </div>

    <div id="container">
      <div>

        ...

      </div>
    </div>
  </body>
</html> 
```

除了 Chrome 和 Safari 之外，一切都很棒，它们都在**之前** `<img>`插入分页符并在第 2 页的中间插入右击。我在打印类中`/logo`得到相同的放置（例如） 。`page-break-after: always;`我怀疑这可能与此有关`position: absolute;`？

我怎样才能`<div class="print">`出现在第 1 页，`/logo`中间，并`<div id="container">`从第 2 页的顶部开始？

# ios5 - UIBarButtonItem 外观 setTitleTextAttributes 不影响 UIControlStateDisabled 状态

> ID：11718243
> 
> 赞同：16
> 
> 时间：2012-07-30T08:59:43.470
> 
> 标签：ios5, uibarbuttonitem, appearance, uibarbuttonitemstyle

我们的设计师要求我为禁用的 UIBarButtonItems 的文本使用特定颜色。我用来实现这个的代码：

```
NSDictionary* textAttributes = [NSDictionary dictionaryWithObject: [UIColor blueColor]
                                                           forKey: UITextAttributeTextColor];

[[UIBarButtonItem appearance] setTitleTextAttributes: textAttributes
                                            forState: UIControlStateDisabled]; 
```

但它不会改变文本属性。

我已经尝试过使用正常状态的代码，尝试使用 setBackgroundImage 更改 UIControlStateDisabled 按钮的背景，并且所有 thouse 实验都运行良好。但是这个单一的组合：setTitleTextAttributes 和 UIControlStateDisabled 并没有做任何事情。

谷歌没有给我任何关于这个特定组合的相关答案。

有没有人知道改变禁用 UIBarButtonItem 的颜色的其他方法或使 setTitleTextAttributes 对禁用项目起作用的方法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-16T17:02:49.183

您必须为控制状态 Normal 和 Disabled 设置它。

*（2015-11-18 -- 从 iOS 9.1 开始，您仍然必须同时设置两者。）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:00:13.673

使用 iOS 5.1 对我来说效果很好。也许这是一个 5.0 的错误。

# c# - 我自己的 Win CE 任务栏

> ID：11718248
> 
> 赞同：2
> 
> 时间：2012-07-30T09:00:10.333
> 
> 标签：c#, compact-framework, windows-ce

我创建了没有任务栏的 WinCE 6.0 映像。所以所有应用程序都最大化到全屏。我想创建自己的应用程序，例如任务栏。我只想向此任务栏添加几个按钮。但我希望其他处于最大化模式的应用程序不要隐藏此任务栏。而且我不想让我的一切都成为最重要的，因为它们隐藏了其他应用程序的某些部分。如何使我的应用程序像任务栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:35:59.457

您可以修改当前探索 shell 中的现有任务栏（来源`%WINCEROOT%\PUBLIC\SHELL\OAK\HPC\EXPLORER\TASKBAR\taskbar.cpp`或不够灵活，您可以[创建自己的 Shell](http://msdn.microsoft.com/en-us/library/aa446914.aspx)并根据需要创建自己的“类似任务栏”的行为。

无论哪种情况，请记住**将代码克隆**到您自己的 BSP 树中！不要修改公共树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:09:48.600

我采用和工作的方法是基于 Visual Studio 中内置的 explorer.exe 代码编写自定义 kiosk shell。您也可以使用平台构建器，就像现在一样的工具。回想起来，我会说它有点笨拙，需要对 CTaskBar 和资源管理器进行一些重构，以根据我们的需要对 CTaskBar 进行子类化，但它产生了一个外壳，我们可以使用完整的资源管理器功能锁定和解锁。也许更轻量级的方法是将您的应用程序的窗口注册为任务栏（对不起，系统调用让我忘记了）并在您的 winproc 中处理任务栏特定的消息？

# c# - 自定义 Microsoft SmoothStreaming 播放器

> ID：11718249
> 
> 赞同：2
> 
> 时间：2012-07-30T09:00:15.867
> 
> 标签：c#, asp.net, streaming

我正在开展一个项目，该项目涉及用户通过流媒体查看视频或实时网络广播等多媒体文件。我遇到了 smoothStreaming 框架，它很好。但是在播放器中，没有像其他媒体播放器那样手动从硬盘打开视频文件的功能，所以我想知道是否有向播放器提供此功能，或者无论如何我们可以自己制作SMF 框架上的媒体播放器，然后将其嵌入网页中。请帮忙。

# charts - 在直方图条上绘制水平线

> ID：11718251
> 
> 赞同：0
> 
> 时间：2012-07-30T09:00:21.923
> 
> 标签：charts, plot, gnuplot, histogram, data-visualization

我有一个实验，我测量了一些算法相对于三个基线的性能。因此，我想为算法绘制直方图，通过直方图条绘制各种样式的水平线以显示基线。

下面是我通过在 Gnuplot 生成的图表上手动绘制水平线生成的示例。直方图“sentence”和“document”代表我测试的算法，“mono”、“random”和“MFS”是基线。

有什么方法可以在 Gnuplot 本身中做到这一点吗？如果没有，任何人都可以推荐另一个可以做到这一点的工具吗？或者也许我应该使用更好的可视化技术？

![直方图，其中每个系列中的条被各种样式的线一分为二](../Images/68a1fda39fd23f230b8a056ef9e2f93c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:17:17.433

这绝对是可能的。这是我制作的一个小例子：

首先，数据文件`"data.dat"`：

```
#histograms
1 3 stack1
2 2 stack2
3 1 stack3

#mono
 .6
 .6

 1.5
 1.5

 3.1
 3.1 
```

现在绘制它的 gnuplot 脚本：

```
set yrange [0:*]
set style data histograms 
set style histogram cluster gap 1

IDX=-1
xpos(x)=(IDX=IDX+1, IDX%2==0)?(IDX/2-.5):(IDX/2+.5)

set style fill solid
plot 'data.dat' index "histograms" u 1:xtic(3) title "column1", \
     '' index "histograms" u 2 title "column2", \
     '' index "mono" u (xpos($1)):1 w lines ls -1 title "mono" 
```

这比我的上一个版本要复杂一些。绘制直方图集群时，每个集群都以一个整数为中心，从 0 开始，每个集群递增 1（无论您对 xtics 和标签的设置如何）。我所做的是使用该信息来简化数据文件。现在这个绘图命令将 2 个不同的数据集绘制为直方图（取自数据文件“直方图”部分的每一列），第一个添加 xtic 标签。然后是棘手的部分：我编写了一个具有副作用的函数（我认为 gnuplot 内联函数在 gnuplot 4.4 中是新的）。每次调用时，变量的值`IDX`都会递增——因此，xrange 上的当前位置始终为`IDX/2`. `IDX/2-.5`此功能在返回和之间交替`IDX/2+.5`. 请注意，要创建另一个 dataset `random`，您需要另一个与它`xpos2`相同的函数，`xpos1`只是它使用单独的迭代器。

# javascript - jquery在加载的div中不起作用

> ID：11718255
> 
> 赞同：2
> 
> 时间：2012-07-30T09:00:33.843
> 
> 标签：javascript, jquery, wysiwyg

我正在尝试在使用 .load() 的 div 加载中使用 jquery .wysiwyg 编辑器，但它不起作用。所见即所得代码位于 div 之外，位于页面底部，其余部分为 jquery。我已经测试过将 jquery 直接放入 div 中，这工作正常，但不是很整洁。

这是 jquery 代码，我很确定我在使用 .live 的方式上做错了，如果有人能指出我正确的方向，我将不胜感激。

```
 $('#editBrandEmail').live('click', function(){
        $('#editBrandEmailDiv').load($('#editBrandEmail').attr('href'));
            $('.wysiwyg').wysiwyg({
            controls: {
                strikeThrough : { visible : true },
                underline     : { visible : true },
                justifyLeft   : { visible : true },
                justifyCenter : { visible : true },
                justifyRight  : { visible : true },
                justifyFull   : { visible : true },
                indent  : { visible : true },
                outdent : { visible : true },
                subscript   : { visible : true },
                superscript : { visible : true },
                undo : { visible : true },
                redo : { visible : true },
                insertOrderedList    : { visible : true },
                insertUnorderedList  : { visible : true },
                insertHorizontalRule : { visible : true },
            h4: {
                visible: true,
                className: 'h4',
                command: $.browser.msie ? 'formatBlock' : 'heading',
                arguments: [$.browser.msie ? '<h4>' : 'h4'],
                tags: ['h4'],
                tooltip: 'Header 4'
            },
            h5: {
                visible: true,
                className: 'h5',
                command: $.browser.msie ? 'formatBlock' : 'heading',
                arguments: [$.browser.msie ? '<h5>' : 'h5'],
                tags: ['h5'],
                tooltip: 'Header 5'
            },
            h6: {
                visible: true,
                className: 'h6',
                command: $.browser.msie ? 'formatBlock' : 'heading',
                arguments: [$.browser.msie ? '<h6>' : 'h6'],
                tags: ['h6'],
                tooltip: 'Header 6'
            },
            cut   : { visible : true },
            copy  : { visible : true },
            paste : { visible : true },
            html  : { visible: true }
        }
        });
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:19:47.980

尝试为负载添加回调函数并将“.wysiwyg”的代码放入其中

IE;

```
 $('#editBrandEmail').live('click', function(){
    $('#editBrandEmailDiv').load($('#editBrandEmail').attr('href'),function(){
       $('.wysiwyg').wysiwyg({
        controls: {
                  .....
                  ........
                  ........
    });
 }); 
```

# iphone - NSURLRequest 超时 IOS

> ID：11718256
> 
> 赞同：5
> 
> 时间：2012-07-30T09:00:34.810
> 
> 标签：iphone, ios, ipad, nsurlconnection, nsurlrequest

我需要使用 UIRequest 设置超时 15 秒或 30 秒，但它总是采用默认值。有什么方法可以设置连接的最小超时。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-30T12:51:24.810

[这个答案](https://stackoverflow.com/a/2776733/692507)`timeoutInterval`解释了对象的最小值`NSURLRequest`。如果您需要一个较小的值，那么您可以使用所需的时间启动一个 NSTimer，并在计时器的触发方法中取消您的 NSURLConnection 对象的连接。如：

```
//....
connection = [[NSURLConnection connectionWithRequest:request delegate:self] retain];
[request release];

[connection start];

if (timer == NULL) {

    timer = [NSTimer scheduledTimerWithTimeInterval: TimeOutSecond
                                             target: self
                                           selector: @selector(cancelURLConnection:)
                                           userInfo: nil 
                                            repeats: NO];
    [timer retain];
}

- (void)cancelURLConnection:(NSTimer *)timerP {
    [connection cancel]; //NSURLConnection object
    NSLog(@"Connection timeout.");
    [timer invalidate];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T09:09:10.500

在构造时设置超时间隔属性似乎有问题：

```
NSMutableURLRequest* request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:url] cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:240.0]; 
```

而是在构造之后设置它：

`request.timeoutInterval = 70;`

另请注意，您可以设置多低的间隔似乎有一些限制。阅读这篇文章了解更多信息： [https ://devforums.apple.com/message/108087#108087](https://devforums.apple.com/message/108087#108087)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T09:27:25.850

我相信 POST 请求的超时最小值为 4 分钟。最安全的方法是`NSTimer`在超时触发时启动并取消请求。

# javascript - 非 IE 7 的 Javascript

> ID：11718259
> 
> 赞同：0
> 
> 时间：2012-07-30T09:00:56.367
> 
> 标签：javascript, html

我已经`addthis`在我的代码中实现了 javascript。

但是如果我在 IE 7 中打开我的页面，它将无法正常工作。

因此，我仅在浏览器不是 IE 7 时才尝试添加该脚本

首先，我编写了这段代码，它可以工作。

```
<!--[if IE 7]>
<script type="text/javascript">
alert('hihi');
</script>
<![endif]--> 
```

该代码有效，页面将显示`hihi`在其他浏览器中，`IE 7`但不会显示在其他浏览器中。

现在，我想扭转这一点，让页面`hihi`仅在浏览器不显示的情况下显示`IE 7`

我试过

```
<!--[if !IE 7]>
<script type="text/javascript">
alert('hihi');
</script>
<![endif]--> 
```

但它不起作用。还有其他方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:03:08.033

尝试...

```
<!--[if gt IE 7]> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:04:25.913

```
<!--[if !(IE 7)]>
<script type="text/javascript">
alert('hihi');
</script>
<![endif]--> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T09:05:54.470

`navigator object`您可以使用( [w3schools try me](http://www.w3schools.com/js/tryit.asp?filename=try_nav_all) )检测带有 javascript 的浏览器类型。

```
var Browser = {
  Version: function() {
  var version = 999; // we assume a sane browser
  if (navigator.appVersion.indexOf("MSIE") != -1)
    // bah, IE again, lets downgrade version number
    version = parseFloat(navigator.appVersion.split("MSIE")[1]);
  return version;
}
}

if(Browser() > 7){
alert("hi hi");
} 
```

来源：[用 javascript 检查 IE 版本](http://obvcode.blogspot.co.nz/2007/11/easiest-way-to-check-ie-version-with.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T09:06:25.803

你需要`()`，检查[语法](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)。

```
<!--[if !(IE 7)]> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T09:07:32.363

采用`[if !(IE 7)]`

> 子表达式运算符。与布尔运算符结合使用以创建更复杂的表达式。

[见参考](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T09:11:15.540

尝试

```
<!--[if !(IE 7)]> -->
    <script type="text/javascript">
        alert('hihi');
    </script>
<!-- <![endif]--> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-30T09:36:20.500

您的代码的问题在于，对于非 IE 浏览器，它看起来就像一个普通的 HTML 注释，因此不包含该脚本。一种选择是创建一个您在脚本中检查的变量：

```
<script type="text/javascript">
    var isIe7OrLower = false;
</script>

<!--[if lte IE 7]>
<script type="text/javascript">
    isIe7OrLower = true;
</script>
<![endif]-->

<script type="text/javascript">
    alert("IE 7 or lower: " + isIe7OrLower);
</script> 
```

# jquery - 动画切换滑动菜单

> ID：11718260
> 
> 赞同：0
> 
> 时间：2012-07-30T09:01:15.173
> 
> 标签：jquery, html, css

我正在创建一个与 facebook 移动菜单类似的菜单。你可以在这里找到我的进展 - [http://jsfiddle.net/923GK/](http://jsfiddle.net/923GK/)

我希望它在默认状态下折叠，然后当有人点击说“仪表板”时，它会滑出显示仪表板的子列表。如果他们再次单击仪表板，它将切换回默认的关闭状态。但是，如果二级菜单打开并且他们单击“博客”菜单，而不是再次关闭，它将仅显示博客子菜单，没有花哨的过渡。

我已经尝试了很长时间，但是每次尝试使这项工作都比以前更加混乱。如果有谁更擅长 jquery 可以偷看一下，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:25:27.520

```
var last, elm = $('#menu');

$('.secondary').hide();
elm.css('width', 100);

$('#menu li a').on('click', function(e) {
    e.preventDefault();
    if (elm.width()>100) {
        if (last == this) {
            elm.animate({width: elm.width()<340?350:100});
        }else{
            $(this).next('.secondary').show();
            $(last).next('.secondary').hide();
        }
    }else{
        $(this).next('.secondary').show();
        elm.animate({width: elm.width()<340?350:100});      
    }
    last = this;
}); 
```

[小提琴](http://jsfiddle.net/923GK/1/)

# jquery - 如何重新启用 jRating 星 ?

> ID：11718263
> 
> 赞同：0
> 
> 时间：2012-07-30T09:01:37.697
> 
> 标签：jquery, jquery-plugins

我正在使用插件 jRating。

```
http://www.myjqueryplugins.com/jRating/demo 
```

使用 jRating，一旦我们点击评级，评级就会提交，评级星会被禁用。
我有一种情况，我必须根据登录的用户和
我查看 jRating.jquery.js 并找到这一行的信息来重新启用和禁用

```
$(this).unbind().css('cursor','default').addClass('jDisabled');    //line 132 
```

这会禁用 div。
`this`在上面的第 132 行中，指的是带有 id 的 div `10_5`。
如何重新启用带有 id 的主演 div `10_5`？

# vmware - 使用 VMPlayer 时如何取消捕获某些快捷方式？

> ID：11718267
> 
> 赞同：2
> 
> 时间：2012-07-30T09:01:54.603
> 
> 标签：vmware, shortcuts

当我使用 VMPlayer 时，所有键盘消息都被捕获到来宾系统。

我需要一些访客系统未捕获的快捷方式，例如`Win`++ `PageUp` `Win`。`PageDown`

我使用那里的快捷方式来管理我的 Windows 管理器。

# cognos - 如何在查看表格数据中查看钻取行为的项目？

> ID：11718269
> 
> 赞同：-1
> 
> 时间：2012-07-30T09:02:01.113
> 
> 标签：cognos, cognos-8, cognos-tm1

我有一张图表。
我允许向上钻取和向下钻取选项。
我有一个过滤器，它会影响我的图表。

当我想通过设置参数查看表格数据时，我看不到我想要的。它只是显示数据项，如不影响参数。它不是过滤问题。

当我运行报告并单击图表上的标记时，向下钻取并看起来很真实，但是当值提示更改时，一切看起来都很正常，但条件样式是错误的。我认为并相信主要问题是向下钻取选项。

（例如：我有两列。区域和顶部区域。如果我在不设置参数的情况下查看表格数据，结果是：

区域顶部区域
-------- ------------
a X
b X
c X

当我查看带有设置参数的表格数据时（topregion = ?p1?)--p1:a

区域顶部区域
-------- ------------
a X
b X
c X

但你知道它不喜欢那样。我想这样看：

region topregion
-------- ------------
k a
l a
m a

但事实并非如此。

我怎样才能解决这个问题？

谢谢...

)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:33:26.373

听起来你需要一个计算列。如果 p1 的值为空，则传递原始顶部区域。如果不是，则用您选择的区域替换。

# c - 在单独的目录中构建 cscope.out 文件

> ID：11718272
> 
> 赞同：6
> 
> 时间：2012-07-30T09:02:13.840
> 
> 标签：c, cscope

我在一个目录 (/my/src/) 中有一个大型项目的源代码，我希望在其他目录 (/my/db/) 中构建 cscope 文件。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-30T09:07:45.913

尝试以下步骤：

1\. 生成 cscope.files

```
find /my/src -name '*.c' -o -name '*.h' > /my/db/cscope.files 
```

2\. 在生成的结果上运行 cscope

```
cscope -i /my/db/cscope.files 
```

3\. 导出到环境变量

```
CSCOPE_DB=/my/db/cscope.out; export CSCOPE_DB 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-01T10:40:27.140

如果您有大量不属于 git repo 的文件，并且不必要地使 cscope 命令变慢。您可以使用以下命令创建 cscople 文件（适用于 java/javascript/python/c/go/c++ 项目）。

```
git ls-files | grep '\.js$\|\.java$\|\.py$\|\.go$\|\.c$\|\.cpp$\|\.cc$\|\.hpp$' > /my/db/cscope.files
cscope -b -i /my/db/cscope.files
CSCOPE_DB=/my/db/cscope.out; export CSCOPE_DB 
```

# css - 占位符文本颜色不适用于提交类型

> ID：11718273
> 
> 赞同：1
> 
> 时间：2012-07-30T09:02:15.187
> 
> 标签：css

我已经关注[了关于在占位符中设置文本样式的讨论](https://stackoverflow.com/questions/2610497/change-an-inputs-html5-placeholder-color-with-css)，但我仍然遇到问题。

请注意以下代码。出于某种原因，背景渐变对我的输入字段和提交按钮都有效，**但**占位符的文本颜色在前者中仅为黑色。如果它被禁用，最后一个看起来像灰色。为什么会这样，可以做些什么呢？

```
div.login input[type=text],
div.login input[type=submit]{
  box-shadow: inset 1px 0px 0px 1px rgba(40, 40, 255, .6);
  background: #989898;
  background: -moz-linear-gradient(top,  #ffffff 0%, #cc66ee 100%);
  background: -webkit-linear-gradient(top,  #ffffff 0%,#cc66ee 100%);
}

input::-webkit-input-placeholder{
  color: #000000;
}

input:-moz-placeholder{
  color: #000000;
} 
```

我在 Chrome 和 FF 上都试过了。

**请不要回答我在不同情况下使用单/双冒号的问题（除非你有一个非常重要的理由）。显然应该是这样，因为一个指的是伪类，另一个指的是伪元素。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:30:11.013

我刚刚意识到**为什么**会这样以及**如何**解决它。

为什么？

因为按钮上的文本不是占位符，我误以为这是。这只是一个普通的文本。

如何？

通过使用“颜色”的神秘风格。

# magento - 在magento升级中在哪里写命令行？

> ID：11718274
> 
> 赞同：1
> 
> 时间：2012-07-30T09:02:36.163
> 
> 标签：magento, command-line

我想将 magento 1.7.0 升级到 1.7.2。 [看到这个链接](http://turnkeye.com/blog/magento-upgrade-guide/)

但我的问题是在哪里输入命令行？他们在命令提示符下吗？如果是这样，那么应该设置哪个路径？喜欢从`c:>/`根目录或哪个文件夹？

在该链接行中是： `Next, enter this command: ./mage sync`

那么这个命令在哪里写呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:41:03.217

前几天我从 1.7.0.0 到 1.7.0.2 自己做了这个。他们不是在谈论本地命令提示符，而是 SSH 命令行。我建议您通过从 Magento 站点下载差异文件来处理此升级；

[Magento 差异文件](http://www.magentocommerce.com/download/diff)

将这两个文件上传到 Magento 安装的根目录（您将上传 v 1.7.0.0 和 1.7.0.1 之间的差异文件以及 1.7.0.1 和 1.7.0.2 之间的差异文件）。

然后使用 Linux`patch`命令从 shell 提示符运行差异文件

```
patch -p0 -f < 1.7.0.0-1.7.0.1.diff 
```

接着

```
patch -p0 -f < 1.7.0.1-1.7.0.2.diff 
```

这是另一个关于它的 SO 线程 -[使用 Diff 文件升级](https://stackoverflow.com/questions/11372903/magento-upgrade-from-1-6-2-to-1-7-0-2-will-the-db-base-be-changed)

# android - Android 启动意图不会设置操作

> ID：11718276
> 
> 赞同：0
> 
> 时间：2012-07-30T09:02:46.833
> 
> 标签：android, android-activity, android-notifications

我正在处理推送通知。接收和显示通知当前正在工作，但点击事件未按应有的方式运行。

```
int NOTIFICATION_ID = 1593;

        NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.notification, title, System.currentTimeMillis());
        notification.flags |= Notification.FLAG_AUTO_CANCEL;

        Intent notificationIntent =  new Intent(this, MyMainActivity.class);
        notificationIntent.putExtra("test", "test");
        notificationIntent.setAction("load_notifications");

        PendingIntent intentNotification = PendingIntent.getActivity(this, 999, notificationIntent, 0);
        notification.setLatestEventInfo(this, title,  body, intentNotification);
        notificationManager.notify(NOTIFICATION_ID, notification); 
```

这就是我显示通知的方式，它还包括开始/恢复我的主要活动。

但是，如果我在应用程序中单击通知， putExtra("test", "test") 和 setAction 似乎无效。如果我的应用程序不工作，从通知启动它可以正常工作。

我的主要活动中的 onResume 函数：

```
public void onResume() {
        super.onResume();

        if(this.getIntent().getAction().equalsIgnoreCase("load_notifications")) {
//Do stuff
            }

    } 
```

我的应用配置如下：

```
 <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".Activity"
            android:label="@string/app_name" 
            android:configChanges="orientation"
            android:launchMode="singleInstance"
            >

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <!-- Push notifications -->

        <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                <category android:name="com.app.android" />
            </intent-filter>
        </receiver>

        <service android:name=".GCMIntentService" />

    </application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T15:49:48.130

**答案**可能在这里：通知[中未显示操作按钮](https://stackoverflow.com/questions/20311245/action-buttons-are-not-shown-in-notification)

**API 16**中引入了通知操作。

 **这意味着您应该将目标 SDK 设置为 16 或更高版本。

但是，只有**Jelly Bean**及**更高**版本可以利用通知操作 - 请确保在这些平台上测试此功能。

**NotificationCompat.Builder**负责生成与其运行的任何 API 兼容的 Notification，因此如果您要支持**Ice Cream Sandwich 和更早版本**，请继续使用它。如果没有，只需使用**Notification.Builder**就足够了（*当然在更改目标 SDK 之后*）。**

# asp.net-mvc - 带有 String.Format 的 Razor 语法 For Each

> ID：11718277
> 
> 赞同：0
> 
> 时间：2012-07-30T09:02:52.160
> 
> 标签：asp.net-mvc, vb.net, razor

我是 ASP.MVC4 中 Razor 语法的新手，需要在循环中格式化字符串以提供正确图像文件的运行时路径。

我在格式化 For Each 列表项中的字符串时遇到问题。你能看看下面，让我知道我错过了什么。

```
<ul class="column">
    @For Each item As modeltype In Model
        @<li>
            @Code
                dim itemImage as string = String.Format("../../Images/{0}.png", @item.MajorAssembly)    
            End Code
            <a href="#"><img src="@itemImage"/></a> 
        </li>
    Next            
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:06:43.357

从@item.MajorAssembly 中去掉@。当您在@Code 块内时，所有内容都被视为代码，不需要额外的@。

```
<ul class="column">
@For Each item As modeltype In Model
    @<li>
        @Code
            dim itemImage as string = String.Format("../../Images/{0}.png", item.MajorAssembly)    
        End Code
        <a href="#"><img src="@itemImage"/></a> 
    </li>
Next            
</ul> 
```

此外，如果您愿意，您可以将 String.Format 调用直接放入 src 中，如下所示：

```
<ul class="column">
@For Each item As modeltype In Model
    @<li>
        <a href="#"><img src="@String.Format("../../Images/{0}.png", item.MajorAssembly)"/></a> 
    </li>
Next            
</ul> 
```

# xsd - XSD 中的导入及其实现

> ID：11718283
> 
> 赞同：-1
> 
> 时间：2012-07-30T09:03:16.397
> 
> 标签：xsd, xsd.exe, xsd2code, linq-to-xsd

我有 2 个具有一些共同属性的独立 XSD。我想创建另一个 XSD 并将我所有的公共属性放在单独的 XSD 中，然后将它们导入我已经拥有的 2 个 XSD 中，而不是在两个 XSD 中重复或复制它们。

这种实现有什么参考吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:45:44.903

我们这样做：

共享“库”xsd：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns="http://www.common.namespace/" xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.common.namespace/">
    <xs:attribute name="ACommonAttribute" type="xs:float" default="1.7"/>
</xs:schema> 
```

左 xsd 具有相同的目标命名空间：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns="http://www.common.namespace/" xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.common.namespace/">
    <xs:include schemaLocation="Common.xsd"/>
    <xs:element name="MyLeftElement">
        <xs:annotation>
            <xs:documentation>Comment describing your root element</xs:documentation>
        </xs:annotation>
        <xs:complexType>
            <xs:attribute ref="ACommonAttribute"/>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

具有不同目标命名空间的正确 xsd（如果包含语句则需要 Import）

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns="http://another.namespace/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:libs="http://www.common.namespace/" targetNamespace="http://another.namespace/">
    <xs:import namespace="http://www.common.namespace/" schemaLocation="Common.xsd"/>
    <xs:complexType name="RightComplexType">
        <xs:sequence>
            <xs:element name="Bit">
                <xs:complexType>
                    <xs:attribute ref="libs:ACommonAttribute"/>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:schema> 
```

# jquery - 获取 X 的变量

> ID：11718285
> 
> 赞同：0
> 
> 时间：2012-07-30T09:03:30.750
> 
> 标签：jquery, variables, input, numbers

**>>[小提琴](http://jsfiddle.net/BramVanroy/Nxqxe/1/)<<**

所以，这个小提琴按它应该的方式工作：当检查两个具有不同`name`属性的收音机时，会显示与这些按钮的值相呼应的文本。

但是，如果有更多的收音机呢？我不想继续为每个`name`属性添加行和变量。

我认为可以将名称替换为以数字结尾的值，如下所示：

```
<input type="radio" name="score1" value="0"> 0
<input type="radio" name="score1" value="1"> 1<br/>
<input type="radio" name="score2" value="0"> 0
<input type="radio" name="score2" value="1"> 1<br />
<input type="radio" name="score3" value="0"> 0
<input type="radio" name="score3" value="1"> 1<br/>
<input type="radio" name="score4" value="0"> 0
<input type="radio" name="score4" value="1"> 1 
```

这样，应该可以遍历名称并找到每个名称的检查值，`"input[name='score" + i + "']"`在这种情况下，它是一个自然数。当这个值已知时，它可以用一个`each`函数来回显。因此，无论有多少单选按钮可用，脚本始终有效（并且不应该太多行）。

当然，这就是我在脑海中的看法，但我不知道如何才能真正编写出这样的脚本。我不熟悉无限循环和 and 的`i`使用`ii`。

也欢迎有关此的有趣文章！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:12:23.043

这个怎么样：

```
$( ":radio" ).on( "click", function () {
        var html = ""
        $(':radio :checked').each(function(){
            html += "<span>" + $(this).val() + "</span> - ";
        });
        $( "div#result" ).html(html).show();
}); 
```

# objective-c - NSRegularExpression 错误：进入时为假

> ID：11718289
> 
> 赞同：1
> 
> 时间：2012-07-30T09:03:45.477
> 
> 标签：objective-c, ios, regex, nsregularexpression

我对 NSRegularExpression 有疑问。我确定这是我的错误，但我无法弄清楚。我有这个代码：

```
NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression         
                              regularExpressionWithPattern: nextModelName
                              options:NSRegularExpressionCaseInsensitive
                              error:&error];
[regex enumerateMatchesInString:objTmplName options:0 range:NSMakeRange(0, [objTmplName length]) usingBlock:^(NSTextCheckingResult *match, NSMatchingFlags flags, BOOL *stop){

    NSLog(@"objTmplName:%@ nextModelName:%@",objTmplName,nextModelName);
  }]; 
```

输出是：

```
2012-07-30 10:59:48.779 MyApp[8470:707] objTmplName:yaoygo nextModelName:\w*
2012-07-30 10:59:48.799 MyApp[8470:707] objTmplName:yaoygo nextModelName:yo*
2012-07-30 10:59:48.808 MyApp[8470:707] objTmplName:yaoygo nextModelName:yaoygo 
```

为什么它进入 when`objTmplName = yaoygo`和`nextModelName:yo*`？

我想要做的是当我的 objTmplName 以“yo ...”开头时它会是真的，否则这应该是假的。例如：

```
yooygo TRUE
yaygo FALSE
yayoyoyo FALSE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:06:55.710

> 2012-07-30 10:59:48.799 MyApp[8470:707] objTmplName:yaoygo nextModelName:yo*
> 
> 为什么会在 objTmplName = yaoygo 和 nextModelName:yo* 时进入？

`yo*`方法：

`y`后跟任意数量`o`（可能没有）。

如果你想强制至少一个`o`，使用：

```
yo+ 
```

编辑问题后：

尝试使用正则表达式：`^yo.*`

# tinymce - tinymce 使用带有重音字符的 bbcode

> ID：11718290
> 
> 赞同：1
> 
> 时间：2012-07-30T09:03:51.293
> 
> 标签：tinymce, bbcode

我将 tinyMCE 与一些 ajax 函数一起使用。我有自己的按钮来保存内容，当用户按下它时使用`tinyMCE.activeEditor.getContent()`我获取内容并将其发送到服务器。我还使用自己的 bbcode 插件在保存之前将内容从 html 转换为 bbcode。但问题是当用户使用一些重音字符时，比如`ö,ä,ü` `tinyMCE.activeEditor.getContent()`将其转换为`&ouml;,&auml;,&uuml;`. 我尝试使用`tinyMCE.activeEditor.getContent({format : 'raw'})`，但在这种情况下，bbcode 不起作用。这意味着从

*   Wir müssen uns treffen

我们有
<ul><li>Wir müssen uns treffen</li></ul>

但我想用 bbcode
[ * ]Wir müssen uns treffen [ /* ]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:22:20.323

看起来您将不得不在服务器端使用转换功能，然后`&ouml;,&auml;,&uuml;`用它们的真实角色替换等。

# matlab - 在 MATLAB 中保留非支配元素并省略其余元素的最快方法是什么？

> ID：11718295
> 
> 赞同：2
> 
> 时间：2012-07-30T09:04:06.287
> 
> 标签：matlab

例如`[2 , 5]`支配`[3 , 8]`原因 (2 < 3) 和 (5 < 8)

but`[2 , 5]`不占主导地位，`[3 , 1]`因为 (2 < 3) but (5 > 1) 所以这两个向量是非占主导地位的

现在例如假设我有一个这样的矩阵：

```
a =[ 1 8;
    2 6;
    3 5;
    4 6]; 
```

这里前三个是非支配的，但最后一个是由（3,5）支配的，我需要一个可以省略它并给我这个输出的代码：

```
ans =

    [ 1 8;
    2 6;
    3 5] 
```

请注意，Nx2 矩阵中可能有很多非支配元素

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:14:58.453

1.  [使用bsxfun](http://www.mathworks.nl/help/techdoc/ref/bsxfun.html)将一行与其他行进行比较
2.  [使用arrayfun](http://www.mathworks.nl/help/techdoc/ref/arrayfun.html)对每一行执行此操作（或者如果您愿意，可以使用循环）并使用 cell2mat 将输出转换回矩阵
3.  使用[any](http://www.mathworks.nl/help/techdoc/ref/any.html)和[all](http://www.mathworks.nl/help/techdoc/ref/all.html)检查哪些行占主导地位
4.  删除这些行

代码：

```
a=[1 8;2 6;3 5;4 6];
dominated_idxs = any(cell2mat(arrayfun(@(ii) all(bsxfun(@(x,y) x>y,a,a(ii,:)),2),1:size(a,1),'uni',false)),2);

a(dominated_idxs,:) = []; 
```

## 编辑

如果你想使用`>=`而不是`>`比较，每一行都会控制自己并被删除，所以你最终会得到一个空矩阵。通过如下调整代码过滤掉这些误报：

```
a=[1 8;2 6;3 5;4 6];
N = size(a,1);

compare_matrix = cell2mat(arrayfun(@(ii) all(bsxfun(@(x,y) x>=y,a,a(ii,:)),2),1:N,'uni',false));
compare_matrix(1:N+1:N^2)=false; % set diagonal to false
dominated_idxs = any(compare_matrix,2);

a(dominated_idxs ,:) = []; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T11:12:02.183

这个问题与识别所谓的**帕累托前沿**相同。

如果元素*N*的数量变大和/或您需要经常执行此类操作（我怀疑您这样做），您可能需要考虑为此目的[完全优化的 MEX 文件](http://www.mathworks.com/matlabcentral/fileexchange/17251)（可在 Mathworks文件交换）：

编译这个，把 mex 放在你的 Matlab 路径中，然后使用类似的东西

```
a = a(paretofront(a)); 
```

will accomplish your task much quicker than any combination of Matlab-builtins is able to.

# javascript - 我应该如何包装我的引擎？

> ID：11718297
> 
> 赞同：3
> 
> 时间：2012-07-30T09:04:16.010
> 
> 标签：javascript, web-applications

我正在为 Javascript 创建一个游戏引擎，或者更像是一个包含有用类和函数的大型库。我计划将它用于服务器端和客户端的一些科学模拟，因此功能范围将相当广泛，但它总是围绕虚拟世界（例如游戏）。

不过，我不知道如何把它包起来。如果我只提供所有的类，它会污染全局命名空间，这是非常糟糕的。我可以将所有东西都放在一个对象中，作为命名空间吗？框架本身应该是一个可以实例化的类吗？

如果选择了后一个选项，我如何处理类中的类（构造函数）？

```
var Engine = function()
{
    this.someVar = 4;
}

Engine.prototype.Scene = function()
{
    this.entities = [];
    //What if the scene object needs some classes that are in the engine? How does it get it's parent engine object?
}

Engine.prototype.Scene.prototype.render = function()
{
    //"this" should now represent an instance of a scene. But how can I get someVar from the engine? How can I traverse up in the hierarchy of classes?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:23:01.817

我更喜欢使用有时被称为“[揭示模块](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#revealingmodulepatternjavascript)”（...模式）的东西。看起来像：

```
var Engine = (function($)
{
    $ = $ || {};
    var someVar = 4;

    $.Scene = function()
    {
        this.entities = [];
    }

    $.Scene.prototype.render = function()
    {
        // this function can access someVar just fine because of JavaScript's scoping rules
    }

    return $;
})(Engine); 
```

这使用所谓的*立即调用函数表达式*（以下称为*IIFE*）在 Engine 对象内形成一个闭包。由于[JavaScript 对范围的处理，](http://www.crockford.com/javascript/private.html) IIFE`someVar`中定义的任何函数都可以访问。`someVar`但是，这意味着如果要引用`someVar`您在 IIFE 中定义的函数，则没有函数可以定义自己的函数。

魔术来自 return 语句。您可以看到返回了一个对象，并且在此对象中您必须定义任何您想要“公开”的内容。

然后可以通过 访问构造函数、实用程序方法等`Engine.Scene`，这很好地为您的代码命名空间。

至于`$`参数，这样您就可以传递`Engine`给每个文件中的函数，添加一些方法/属性/构造函数（如果不存在则创建一个新的），然后将返回值传递给另一个 IIFE 以进一步扩张。

这是*许多*流行的 JavaScript 框架中使用的方法，包括[jQuery](https://github.com/jquery/jquery/blob/master/src/intro.js)、[dojo](https://github.com/dojo/dojo/blob/master/dojo.js)和[LimeJS](https://github.com/digitalfruit/limejs/blob/master/lime/src/lime.js)

* * *

场景.js：

```
var Engine = (function ($) {
  // this creates a new object if Engine is undefined in the 
  // invocation below, and keeps the old object otherwise.
  // alternatively: if ($ === undefined) { $ = new Object; }
  $ = $ || {};

  $.foo = "foo";
  $.Scene = function () {
    // blah blah
  }

  // Engine holds either a newly created object,
  // or the old one if it was already defined
  return $;
})(Engine); 
```

sprite.js：

```
var Engine = (function ($) {
  $ = $ || {};

  $.Sprite = function () {
    // totally works
    this.bar = $.foo;
  }

  return $;
})(Engine); 
```

然后，您可以将它们与以下内容一起使用：

```
<script type="text/javascript" src="bar.js"></script>
<script type="text/javascript" src="foo.js"></script>
<script type="text/javascript">
  var mySprite = new Engine.Sprite;
  var myScene = new Engine.Scene;
</script> 
```

你可以`$`用任何你喜欢`$$`的、常见的或聪明的代替。它只是您要添加到的全局对象的占位符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:17:11.590

我认为你不需要甚至不应该那样组织你的课程。即使 Scene 和 Engine 类是相关的，Scene 类也不必是 Render 的子类。改为使用平面类层次结构，这将更容易维护和扩展。

最后，您确实应该将所有这些类放在同一个命名空间下，以免污染全局命名空间。

```
// Define the namespace only if it doesn't already exist. That
// way you can split the definition of your classes in various
// files, without having to worry in which order they are loaded.
if (typeof gameEngine === 'undefined') gameEngine = {};

gameEngine.Engine = function()
{
    this.someVar = 4;
}

gameEngine.Scene = function()
{
    this.entities = [];
}

// Add a new function to define which
// scene the Engine should render:
gameEngine.Engine.prototype.setScene = function(scene)
{
    this.scene = scene;
}

gameEngine.Engine.prototype.render = function()
{
    // render this.scene
} 
```

# backbone.js - 如何在backbone.js 中进行轮询？

> ID：11718301
> 
> 赞同：2
> 
> 时间：2012-07-30T09:04:36.557
> 
> 标签：backbone.js, polling, play2-mini, poller

您好我正在使用backbone.js 开发paly2.0 框架应用程序（使用java）。在我的应用程序中，我需要定期从数据库中获取表数据（用于显示即将发生的事件列表的用例以及是否应从列表中删除越过的旧事件）。我正在获取要显示的数据，但是问题是定期访问数据库。为此，我尝试根据这些链接[使用 Backbone.js 轮询集合](https://stackoverflow.com/questions/5963324/polling-a-collection-with-backbone-js)，[http](http://kilon.org/blog/2012/02/backbone-poller/) ://kilon.org/blog/2012/02/backbone-poller/ 使用主干.js 轮询概念。但是他们没有从 db 轮询最新的集合。请建议我如何实现这一目标或任何其他替代方案？谢谢你的建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T17:33:32.310

Backbone 没有本地方法可以做到这一点。但是您可以实现长轮询请求，将一些方法添加到您的集合中：

```
// MyCollection
var MyCollection = Backbone.Collection.extend({
  urlRoot: 'backendUrl',

  longPolling : false,
  intervalMinutes : 2,
  initialize : function(){
    _.bindAll(this);
  },
  startLongPolling : function(intervalMinutes){
    this.longPolling = true;
    if( intervalMinutes ){
      this.intervalMinutes = intervalMinutes;
    }
    this.executeLongPolling();
  },
  stopLongPolling : function(){
    this.longPolling = false;
  },
  executeLongPolling : function(){
    this.fetch({success : this.onFetch});
  },
  onFetch : function () {
    if( this.longPolling ){
      setTimeout(this.executeLongPolling, 1000 * 60 * this.intervalMinutes); // in order to update the view each N minutes
    }
  }
});

var collection = new MyCollection();
collection.startLongPolling();
collection.on('reset', function(){ console.log('Collection fetched'); }); 
```

# ios - 将“快速打开”的范围限制为当前在 Xcode 中打开的项目？

> ID：11718303
> 
> 赞同：44
> 
> 时间：2012-07-30T09:04:37.153
> 
> 标签：ios, xcode, applescript, hotkeys

CMD+Shift+O ( ⌘⇧O ) 调出 Xcode 的“快速打开”功能。很像 Textmate & Sublime Text 2 中的 CMD+T。它的搜索范围似乎包括我项目之外的系统标头。

有没有办法将此范围限制为当前打开的项目？我在 Xcode 首选项中找不到任何内容。如果可能，此功能将更加有用。

![快速打开](../Images/72e2b5b4e5b0c4c2cf1d56d021fe8b19.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-28T12:49:15.590

快速打开对我来说失去了价值。在修复错误/可以指定范围之前您可以做什么：

使用：`Cmd`+ `Shift`+`J`

然后键入要“快速打开”的文件。这仅限于项目导航器中的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:56:30.220

我怀疑范围是基于当前选择的导航器。当我开始得到奇怪的结果时，我去选择项目导航器，然后再试一次，得到我期望的结果。

# iphone - 获取包含在 iOS 中的移动证书中的 pfx 文件

> ID：11718305
> 
> 赞同：2
> 
> 时间：2012-07-30T09:04:39.317
> 
> 标签：iphone, objective-c, ios, cocoa

我正在尝试使用存储在 iPhone 上的 .mobileconfig 文件中的 .pfx 连接到服务器。

当服务器要求它时

```
-(void)connection:(NSURLConnection*)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge*)challenge{ 
```

如何使用 .pfx 创建 NSURLCredential？我应该使用

```
+ (NSURLCredential *)credentialWithIdentity:(SecIdentityRef)identity certificates:(NSArray *)certArray persistence:(NSURLCredentialPersistence)persistence 
```

如果是这样，我如何提取 .pfx 以将其放入数组中。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-12T16:28:20.620

所以不，没有办法从 mobileconfig 文件中获取证书。iOS 应用程序使用自己的钥匙串访问和存储。只有电子邮件和互联网等其他电话服务可以使用这些证书

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:47:04.140

你可以使用我的代码：

```
 - (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge   
{
    NSString *path = [[NSBundle mainBundle] pathForResource:@"torbix" ofType:@"pfx"];
    NSData *pfxdata = [NSData dataWithContentsOfFile:path];
    CFDataRef inpfxdata = (CFDataRef)pfxdata;
    SecIdentityRef myIdentity;
    SecTrustRef myTrust;
    OSStatus status = extractIdentityAndTrust(inpfxdata, &myIdentity, &myTrust);
    SecCertificateRef myCertificate;
    SecIdentityCopyCertificate(myIdentity, &myCertificate);
    const void *certs[] = { myCertificate };
    CFArrayRef certsArray = CFArrayCreate(NULL, certs, 1, NULL);
    NSURLCredential *credential = [NSURLCredential credentialWithIdentity:myIdentity
                                                             certificates:(NSArray *)myCertificate
                                                              persistence:NSURLCredentialPersistencePermanent];
    [challenge.sender useCredential:credential forAuthenticationChallenge:challenge];
    CFRelease(myIdentity);
    CFRelease(myCertificate);
    CFRelease(certsArray);

}
//extractIdentityAndTrust method.
-(OSStatus) extractIdentityAndTrust:(CFDataRef)inpfxdata identity:(SecIdentityRef *)identity trust:(SecTrustRef *)trust
{
    OSStatus securityError = errSecSuccess;
    CFStringRef password = CFSTR("password");
    const void *keys[] = { kSecImportExportPassphrase };
    const void *values[] = { password };
    CFDictionaryRef options = CFDictionaryCreate(NULL, keys, values, 1, NULL, NULL);
    CFArrayRef items = CFArrayCreate(NULL, 0, 0, NULL);
    securityError = SecPKCS12Import(inpfxdata, options, &items);
    if (securityError == 0) {
        CFDictionaryRef myIdentityAndTrust = CFArrayGetValueAtIndex(items, 0);
        const void *tempIdentity = NULL;
        tempIdentity = CFDictionaryGetValue(myIdentityAndTrust, kSecImportItemIdentity);
        *identity = (SecIdentityRef)tempIdentity;
        const void *tempTrust = NULL;
        tempTrust = CFDictionaryGetValue(myIdentityAndTrust, kSecImportItemTrust);
        *trust = (SecTrustRef)tempTrust;
    }
    if (options) {
        CFRelease(options);
    }
    return securityError;
} 
```

祝你好运！^-^

# oracle - 当记录包含 BLOB 时，ODP.net 参数数组插入性能不佳

> ID：11718307
> 
> 赞同：0
> 
> 时间：2012-07-30T09:04:49.023
> 
> 标签：oracle, blob, odp.net

我使用 ODP.net 参数数组来实现记录的批量插入。当记录不包含 BLOB 列时，这种方式表现得非常好——通常在一秒钟内可以插入大约 10,000 条记录。

如果一条记录包含 BLOB 列，则性能较差 - 大约 1,000 条记录需要 8 个 ssconds。

有什么方法可以有效地批量插入带有 BLOB 列的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:39:40.710

我发现我使用 odp 错误地插入带有 blob 列的记录。

当插入带有 blob 列的记录时，我使用字节数组来存储 blob 值。这种方式的性能会很差。我替换了另一种方式，使用 OracleBlob 类型来存储 blob 值。这样，批量插入记录将具有较高的性能。

# ios - 在ios中格式化数字

> ID：11718308
> 
> 赞同：0
> 
> 时间：2012-07-30T09:04:57.207
> 
> 标签：ios, padding, number-formatting

我正在尝试找到一种解决方案，根据提供的总输入在数字的开头添加零。

示例：数字 = 100 总位数 = 3

我想要的格式是 001,002,003 等等。

谢谢

我找到了相同的解决方案。在下面发布：

```
 while (totalNumCopy) {
        totalNumCopy = totalNumCopy/10;
        noOfDigits++;
    }

    NSMutableString *thumbName = nil;
    if(noOfDigits > 0)
    {
        NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
        [formatter setFormatWidth:noOfDigits];
        [formatter setPaddingCharacter:@"0"];
        [formatter setNumberStyle: NSNumberFormatterPadBeforePrefix];
        NSString *stringNumber = [formatter stringFromNumber:[NSNumber numberWithInt:i+1]];
        thumbName = [NSString stringWithFormat:@"PageThumb%@.png",stringNumber];
        [formatter release];
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T09:07:55.733

基本的字符串格式化程序是这样的：

```
NSLog(@"%03d, %03d, %03d", 1, 2, 3); 
```

结果将是：

```
001, 002, 003 
```

也许它对你有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T09:07:49.707

```
NSString *myNumber = [NSString stringWithFormat:@"%03d", number]; 
```

我认为上面的代码会帮助你

# c# - 南希访问/重写响应

> ID：11718310
> 
> 赞同：4
> 
> 时间：2012-07-30T09:05:04.620
> 
> 标签：c#, nancy

在找到视图并处理完所有内容后，我试图将一些文本（特别是几行 javascript 代码）注入 Nancy 的 HTML 响应中。`After`钩子似乎是我想做的地方。我可以`Response`通过给定的上下文访问该对象，但我尝试从中检索任何数据都失败了。它是类型`Action<Stream>`，所以我一直试图将它写入内存，然后是一个字符串，如下所示：

```
public HelloModule()
{
    After += ctx => {
                var stream = new MemoryStream();
                ctx.Response.Contents.Invoke(stream);

                stream.Position = 0;
                using (var reader = new StreamReader(stream))
                {
                    var content = reader.ReadToEnd();
                }
    };

    Get["/"] = p => View["Issues/Views/SingleIssue"];            
} 
```

但是，当它运行时，我得到了一个例外`ctx.Response.Contents(stream);`。例外是`InvalidOperationException`仅声明`"CSRF is not enabled on this request"`.

所以，我的问题是：如何让 Nancy 允许我访问当前`Response`生成的 HTML？还是我完全不同意我要如何做到这一点？有没有更好的办法？

**编辑 2：**这似乎是*SuperSimpleViewEngine*的问题。我刚刚创建了一个新的、干净的项目，只有一个视图。SSVE 可以重现它，但火花视图引擎可以正常工作。

**编辑1：**

根据要求提供更多信息。上面的代码现在包含模块的整个构造函数。我没有自定义引导程序或其他逻辑。该视图是一个使用默认*SuperSimpleViewEngine*的相当简单的视图，它的组成如下：

**大师.sshtml**

```
<html>
<head>
    <script type="text/javascript" src="/Scripts/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="/Scripts/jquery-ui-1.8.22.min.js"></script>
    <script type="text/javascript" src="/Scripts/jquery-ui-1.8.21.custom.min.js"></script>
    <script type="text/javascript" src="/Scripts/dais-exts.js"></script>
    <link rel="stylesheet" type="text/css" href="/Content/Style.css" />
    <link rel="stylesheet" type="text/css" href="/Content/jquery-ui-1.8.21.custom.css" />
    @Section['Head']
</head>
<body>
    @Section['Content']
</body>
</html> 
```

**SingleIssue.sshtml**

```
@Section['Head']
    <title>Hello!</title>
@EndSection

@Section['Content']
    <h2>View/Edit Issue</h2>

    <form id="issue-form" method="post">
        <input type="hidden" name="HttpMethod" value="Put" />
        <input type="submit" />
    </form>
@EndSection 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T07:14:30.433

回答这个问题，让任何发现这个问题的人都知道发生了什么。

这实际上是 Nancy（版本 0.11）中的一个错误，仅在使用 SuperSimpleViewEngine 时发生。不幸的是，没有简单的解决方法或解决方案，但已对源代码进行了修复。因此，解决该问题的选项是：

*   等待南希 0.12。
*   [从源代码](https://github.com/NancyFx/Nancy/)自己构建一个新版本。
*   使用不同的视图引擎。

# android - 在android中缓存图像

> ID：11718318
> 
> 赞同：1
> 
> 时间：2012-07-30T09:05:28.360
> 
> 标签：android, caching

我想在下载时缓存一些图像，当我的应用程序再次启动时，它应该检查图像是否被缓存，否则返回图像 null ，所以我再次下载并缓存它们

我尝试使用 LRU 缓存[http://developer.android.com/reference/android/util/LruCache.html](http://developer.android.com/reference/android/util/LruCache.html)但它对我不起作用，因为它适用于 API 级别 12，而我正在使用 10。这就是[使用 LruCache 缓存图像的](https://stackoverflow.com/questions/11716214/caching-images-with-lrucache)问题

其他易于采用的缓存解决方案是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:16:31.993

看看这个来存储你的文件： [Storage options android sdk](http://developer.android.com/guide/topics/data/data-storage.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T06:29:46.997

好吧，我确实喜欢这个

```
 private Bitmap getFile(String fileName) {
        Bitmap file = null;
         try {
              FileInputStream fis; 
              fis = openFileInput(fileName);
              file = BitmapFactory.decodeStream(fis);

              fis.close();
         }
         catch (FileNotFoundException e) {
          e.printStackTrace();
         } catch (IOException e) {
          e.printStackTrace();
         }
        return file;
    }
    protected void putFile(Bitmap bitmap, String fileName){
        FileOutputStream fos;
           try {
            fos = openFileOutput(fileName, Context.MODE_PRIVATE);
            bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
            fos.close();
           }    
           catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
               } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
               }
    }
    @Override
    protected String doInBackground(Void... params) {

        for (int i = 0; i < HomeActivity.globalObj.categoriesList.size(); i++) {
            Bitmap b;
            b = getFile(HomeActivity.globalObj.categoriesList.get(i).name);
            if (b == null) {
                b = getImageBitmap(HomeActivity.globalObj.categoriesList.get(i).large_image);
                putFile(b, HomeActivity.globalObj.categoriesList.get(i).name);

            }
            ImageView iv = new ImageView(getApplicationContext());
            iv.setImageBitmap(b);
            imageViewList.add(iv);
        } 
```

# linux - debian 安装程序上的 Bash 脚本在预置时不接受用户输入

> ID：11718329
> 
> 赞同：5
> 
> 时间：2012-07-30T09:06:24.063
> 
> 标签：linux, bash, debian, sh

我有一个非常小的脚本**需要在 debian 安装程序上运行：（** *通过预置，预安装脚本）*

```
echo -n -e " # Your option [1] [2] [3]: "
    read REPLY
    if [ "$REPLY" == "1" ] 
```

脚本在这里停止，我按下的任何内容都会显示在屏幕上，但它不接受输入键。通常，当您按 1 并按 enter 时，读取应返回 1 到 $REPLY。但什么也没有发生。它继续接受用户输入，但没有进一步的操作发生。

然后，我用 ALT+F2 切换到 tty2 并在那里运行脚本，很好，它按预期工作，当我按下时；它需要输入。为什么 tty1 不像往常一样接受输入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T18:44:09.290

使用[debconf](http://www.fifi.org/doc/debconf-doc/tutorial.html)进行这种配置，它可以完全满足您的需求。

### 改编自手册的示例

模板文件（`debian/templates`）：

```
Template: your_package/select_option
Type: select
Choices: 1, 2, 3
Description: Which option?
 Choose one of the options 
```

脚本（`debian/config`）：

```
#!/bin/sh -e

# Source debconf library.
. /usr/share/debconf/confmodule

db_input medium your_package/select_option || true
db_go

# Check their answer.
db_get your_package/select_option
if [ "$RET" = "1" ]; then
   # Do stuff
fi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-23T11:49:06.753

在嵌入式 Linux 上，busybox 有同样的问题（读取不处理我的输入）。
我花了一些时间才意识到busybox 的读取不是CR 容忍的——我的终端程序（使用miniterm.py）默认发送CR/LF 行结束；将其切换到 LF 只解决了我的问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T09:27:55.460

使用 bash 解释器，尝试将 read 替换为：

内置读取

使用其他 sh 解释器，指定变量名：

阅读回复

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T13:59:53.063

以下脚本对我来说很好：

```
#!/bin/sh
echo -n -e " # Your option [1] [2] [3]: "
read

case $REPLY in
    1 ) 
      echo "one" ;;
    2 ) 
      echo "two" ;;
    3 ) 
        echo "three" ;;
    *)
        echo "invalid" ;;
esac 
```

`one`如果我选择它会很好地打印出来`1`。你有什么理由坚持`if`... `fi`？

# iphone - 如何在iphone中制作一个单词作为超链接？

> ID：11718330
> 
> 赞同：0
> 
> 时间：2012-07-30T09:06:24.007
> 
> 标签：iphone, ios

在我的应用程序中，我有 4 个值 0、10、20 和 30。每个值都包含 diff url。当用户点击它时，我使用 UITextView 来触发 url，但是对于值 20，我需要一个词应该出现在那里而不是直接 url。现在用户将点击它应该连接到该 url 的值 20 的那个词。简而言之，我希望点击一个将连接到某个 url 的词。有任何想法吗？？？

这是我的代码：

```
NSString *dot=[NSString stringWithFormat:@"%@",addressInfo.category]; 
NSString *dotstr=@"20";
if ([dot isEqualToString:dotstr] ) {
 urlblue.text = @"eBrochure";
  self.urlblue.dataDetectorTypes = UIDataDetectorTypeLink;

} 
```

每当用户点击“eBrochure”时，我的应用程序应该打开相关的 url .....？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:44:56.283

是的，你可以使用 UIWebView 来做到这一点。但如果你只想使用 Textfield，我认为链接可以帮助你。

[核心文本中的可点击 URL](http://www.netwalk.be/article/tappable-urls-core-text)

^-^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:53:20.850

您可以使用以下代码绘制它：

```
CGRect underlineFrame = CGRectMake(textLabel.frame.origin.x, textLabel.frame.origin.y+textLabel.frame.size.height, textLabel.frame.size.width, 1);
UIView *viewUnderline=[[UIView alloc] init];
viewUnderline.frame=underlineFrame;
viewUnderline.backgroundColor=[UIColor blackColor];
[self addSubview:viewUnderline]; 
```

# asp.net - Windows 工作流基础与 asp.net 的通信

> ID：11718336
> 
> 赞同：0
> 
> 时间：2012-07-30T09:06:41.397
> 
> 标签：asp.net, .net, workflow-foundation

我正在学习工作流（WF4），我要求我的旧 ASP.NET Web 应用程序需要使用 WF4 开发工作流，

*   从 Workflow 到 ASP.NET 的通信如何传递？
*   如何从工作流应用程序调用 ASP.NET 页面，并将相应的页面数据转换为工作流，反之亦然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:48:39.827

您好，您可以使用 InvokeProcess Activity

并设置两个值

1.  iexplore.exe

2.  你的网址

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:36:57.947

问题很短，但答案可能很长。如果您不使用 ASP.NET MVC，那么我们必须将您的 ASPX 代码隐藏视为页面控制器，并且工作流程隐含在控制器如何将用户从页面重定向到页面。

如果您希望 WF Foundation 管理页面导航，那么您正在考虑重新架构以便 WFs 处理事件。

我会在 Web 服务器上安装 Windows Server AppFabric 并在那里托管您的 WF。确保第一条消息链接到用户的会话，CanCreateInstance=true。例如，使用 net.pipe 将 WF 作为服务使用。然后，您需要对 ASP.NET 网站进行重大改造，以将其导航逻辑委托给 WF 服务，就好像它是一个前端控制器一样，并且可能使用 ASP.NET MVC 将 WF 包装到控制器中。

# c# - 如何从不属于模型的类的 DataAnnotations 中获取 HTML 注释？

> ID：11718339
> 
> 赞同：1
> 
> 时间：2012-07-30T09:06:50.537
> 
> 标签：c#, asp.net, asp.net-mvc-3, data-annotations

如何`(data-val="true" data-val-required="Required")`从不属于整个 PAGE 模型的类中获取 html 注释。

我使用该类来填充 GridView，它的值存储在会话变量中。

当我`TextBoxFor(x=>x.Name)`用于 gridview 时，我没有像在页面的其余部分中那样生成 html 注释。

下面的代码对我一点帮助都没有。

```
var metadata = ModelMetadata.FromLambdaExpression(expression,helper.ViewData); 
string prefix = ExpressionHelper.GetExpressionText(expression); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:22:33.220

您不应从视图内部对 Session 对象进行任何调用。相反，您应该将此数据表示为视图模型的一部分并将其填充到控制器中。

事实上，您不应该使用*任何*不属于您的视图模型的数据。

# iphone - 如何将来自服务器的类型字符串存储到缓存？

> ID：11718341
> 
> 赞同：0
> 
> 时间：2012-07-30T09:06:54.237
> 
> 标签：iphone, ios, ipad

我有一个**Iphone 应用程序**，在该应用程序中，我将来自服务器的每种类别的图标图像显示为单元图像。我希望它从我的图像缓存中加载。我希望它将该类型的图像存储在图像缓存中，下次该类型到来时，可以直接从缓存中加载。因此，如果存在该类型的图像，则需要从本地加载。否则需要存储然后显示。我的问题是如何存储该图像对应于图像缓存中的该类型，以及我下次如何检查它。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:21:25.410

有几种技术可以使用缓存。以下是我用过的一些。

1-[自我缓存](https://github.com/enormego/EGOCache)

2- [SDWebImage](https://github.com/rs/SDWebImage/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:18:43.910

您可以试试这个：（对于相应的图像，您需要保存图像名称 - 例如 - nsuser 默认值）：

```
- (void) makeCache: (NSString *)name
{
       NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
   NSString *imagePath = [paths objectAtIndex: 0];  

   // create screen dump of the view of this view controller
   NSString *fileName = [NSString stringWithFormat:@"%@", name];
   NSString *filePath = [NSString stringWithFormat: @"%@/%@.jpg", imagePath, fileName];

   NSData *imageBytes = UIImageJPEGRepresentation(myImageIcon.image, .9);  // myImageIcon.image - uiimageview

   BOOL saved = [imageBytes writeToFile: filePath atomically: YES];
   if (!saved)
       {
    NSLog(@"error! can't save image at path: %@", filePath);
   } 
```

}

然后实现：

```
 - (NSString *) searchFile: (NSString *) fileName
    {
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *imagePath = [paths objectAtIndex: 0];

    NSString *filePath = [NSString stringWithFormat: @"%@/%@", imagePath, fileName];

    if ([[NSFileManager defaultManager] fileExistsAtPath: filePath])
        {
        return filePath;
    }
    else 
        {
    return nil;
    } 
```

}

您也可以对 png 图像执行此操作。祝你好运！

# vba - VBA：如何在 Outlook 电子邮件中设置单行间距？

> ID：11718343
> 
> 赞同：1
> 
> 时间：2012-07-30T09:06:54.993
> 
> 标签：vba, email, outlook, spacing

我正在从 Excel 中创建电子邮件。创建电子邮件后，我需要在顶部添加一两条评论。我已经想出了如何设置字体样式，但 Outlook 在回车上添加了一个我真的不想要的双行空间。我怎样才能改变这个？

下面的代码：

```
Sub CreateDailyEmail()

    Dim oApp As Object
    Dim oMail As Object

    Set oApp = CreateObject("Outlook.Application")
    Set oMail = oApp.CreateItem(0)

    With oMail
        .To = Range("EMAIL_TO")
        .Cc = Range("EMAIL_CC")
        .Subject = Range("EMAIL_SUBJECT")
        .Attachments.Add (Range("PATH"))
        .HTMLBody = "<p style=""font-family: Calibri; font-size: 14px; color: #00f; line-height: 1;""><br /></p>" & RangetoHTML(ActiveWorkbook.Worksheets("Daily").Range("B6:H65"))
        .Display
    End With

    Set oMail = Nothing
    Set oApp = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-08T14:55:35.907

看起来您正在使用出色的 Ron De Bruin 代码从 Excel 发送和发送电子邮件（因此使用 RangetoHTML() 公式）。

我一直在使用相同的代码，可以在[http://www.rondebruin.nl/win/s1/outlook/mail.htm找到](http://www.rondebruin.nl/win/s1/outlook/mail.htm)

而不是在 .HTMLBody 中使用段落 HTML 标记，而是使用 body 标记并将行高设置为 1。然后当 RangetoHTML 返回您想要的范围时，它只会与您拥有的任何文本分开一个空格！这使得代码....

```
Sub CreateDailyEmail()

Dim oApp As Object
Dim oMail As Object

Set oApp = CreateObject("Outlook.Application")
Set oMail = oApp.CreateItem(0)

With oMail
    .To = Range("EMAIL_TO")
    .Cc = Range("EMAIL_CC")
    .Subject = Range("EMAIL_SUBJECT")
    .Attachments.Add (Range("PATH"))
    .HTMLBody = "<body style=""font-family: Calibri; font-size: 14px; color: #00f; line-height: 1;""><br />" & RangetoHTML(ActiveWorkbook.Worksheets("Daily").Range("B6:H65")) & "</body" & .HTMLBody
    .Display
End With

Set oMail = Nothing
Set oApp = Nothing

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:20:36.727

我不完全确定我是否理解您的要求，因为我不确定回车符是出现在 Excel 工作表的单元格中还是仅出现在 Outlook 中的 html 中，但我认为有两种方法：

您可以替换单元格中的回车和换行符（http://stackoverflow.com/questions/2321078/how-can-i-remove-blank-line-breaks-from-an-excel-cell-with-vb- or-a-formula ) 来处理间距问题，例如

```
Substitute(Substitute(A1, CHAR(10), ""), CHAR(13), "") 
```

如果它出现在文档的 html 部分，那么这是一个特定于 Outlook 的问题，因为使用您的设置的 html 示例可以正常工作：

```
<!DOCTYPE html>

<html>

<head>

<meta name="description" content="A Jack Orange 

Lantern Example" />

<style type="text/css">

p
{
font-family: "Calibri"; 
font-size: 20px;
color: #00f;
line-height: 1;
} 

</style>

</head>

<title> What's Up? </title>

<body>

<p> This is totally a paragraph </p>

<p> this is totally a paragraph <br /> + a line 

break </p>

<p> this is totally a paragraph with a line break 

afterwards <br /> </p>

<p> Totally... yeah. <br /> </p>

</body>

</html> 
```

对于 Outlook，您应该能够使用 Replace 函数替换回车：

```
stringNewText = Replace(stringOldText, vbCr, "") 
```

或者，可能：

```
stringNewText = Replace(stringOldText, vbCr, <br>) 
```

或者，或者：

```
stringNewText = Replace(stringOldText, vbCr, vbCrLf) 
```

MSDN 文档直接解决了此 Microsoft 教程中有关使用项目主体的替换功能：http: [//msdn.microsoft.com/en-us/library/office/dd492012 (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/dd492012(v=office.12).aspx)

vbaexpress 上的教程似乎至少在外围解决了这个问题，并可能提供进一步的说明：[http ://www.vbaexpress.com/forum/showthread.php?t=39348](http://www.vbaexpress.com/forum/showthread.php?t=39348)

# svn - 无法从 svn 签出 .htaccess

> ID：11718344
> 
> 赞同：1
> 
> 时间：2012-07-30T09:06:56.567
> 
> 标签：svn, .htaccess

我无法理解 .htaccess 行为。

我已经在文件夹中提交了 .htaccess，但是当我在 localhost 机器上结帐时，...htaccess 没有出现，因此我的网站无法正常工作。

我强行删除并再次签入，但在本地机器上仍然没有显示！。

我有另一个具有相同 svn propset 的分支，它正在我以前的分支中工作..

任何想法 ？？怎么了？

要求：我想查看最新的代码，包括 .htaccess

任何帮助都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:58:50.237

一些想法：

*   由于点文件默认是隐藏的，您确定在工作副本中列出隐藏文件吗？
*   在您`svn status .htaccess`提交文件的机器上执行并验证没有输出。（与问号相反。）
*   直接浏览 repo（比如使用 TortoiseSVN 的**Repo-browser**并查看文件是否存在。
*   查看提交日志并验证 .htaccess 文件是否已添加到存储库中。

# javascript - Javascript自动播放声音文件，单击其中一个按钮时停止

> ID：11718345
> 
> 赞同：0
> 
> 时间：2012-07-30T09:06:59.513
> 
> 标签：javascript, html, audio, autostart

所以我有一些按钮，人们可以按下这些按钮来收听音频文件。当然，音频文件不能“重叠”，因为那会一团糟。这可行，但现在我希望其中一个文件在网站加载时自动播放，仍然保持这样一个事实，即每当我按下另一个按钮时它就会停止。

这是我到目前为止所得到的：

头：

```
<script language="javascript" type="text/javascript">
 function playSound(soundfile) {
 document.getElementById("dummy").innerHTML=
 "<embed src=\""+soundfile+"\" hidden=\"true\" autostart=\"false\" loop=\"true\" />";
 }
 </script> 
```

身体：

```
<span id="dummy"></span>

<p style="text-align:center;">
<a href="#" onclick="playSound('Sound1.mp3');"> 
<img class="alignnone" width="128" img src="Img1.png" ></a>

<a href="#" onclick="playSound('Sound2.mp3');"> 
<img class="alignnone" width="128" img src="Img2.png"  ></a>

<a href="#" onclick="playSound('Sound3.mp3');"> 
<img class="alignnone" width="128" img src="Img3.png"  ></a>
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:20:01.147

试试这个 jquery 解决方案：

[http://archive.plugins.jquery.com/project/sound_plugin](http://archive.plugins.jquery.com/project/sound_plugin)

我在反应时间测试中成功地使用了它，我必须在每次测试之前播放声音。

# php - 在 PHP 中调用上下文（数组或标量）？

> ID：11718346
> 
> 赞同：1
> 
> 时间：2012-07-30T09:07:01.060
> 
> 标签：php

PHP 中的函数或方法是否可以确定调用者是否需要数组返回值（ala Perl 的`wantarray`运算符）？具体来说，我想创建一个`__get()`魔术方法，如果调用者需要一个数组，它会自动返回一个数组，如果不是，则返回一个合理的标量值。所以是这样的：

```
public function __get($name)
{
    if (wantarray())
    {
        // data is stored internally as an array of arrays
        // return appropriate array as-is
        return $this->data[$name];  
    }
    else
    {
        // caller doesn't expect an array, return imploded string instead
        return implode(', ', $this->data[$name]);
    }
} 
```

基本上，PHP 是否有等效于 Perl 的`wantarray`运算符或以其他方式允许确定这种调用上下文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:11:22.820

不，你不能用 PHP 做到这一点。

您只需要返回`$this->data[$name]`并让调用者决定是否需要这样做`implode`。

# html - 在选择 html5 画布框架时需要帮助

> ID：11718348
> 
> 赞同：2
> 
> 时间：2012-07-30T09:07:17.210
> 
> 标签：html, canvas

在为我的项目选择 html5 画布框架时，我需要一些建议 该项目旨在开发基于一些数据和使用生成艺术的可视化应用程序。

有人可以提供一些指向成熟框架的指针。我正在寻找的一些基本要求如下

1.  基于场景图的多层模型。
2.  标准 ZUI（可缩放用户界面）功能，如平移、缩放、移动、旋转、缩放、平移、定位等。
3.  动画，基于帧和基于对象（应该能够在场景图中选择一个对象并像 PPT 动画路径一样从一个点动画到另一个点）。
4.  除了鼠标、键盘和触摸之外，还应支持基于自定义事件/计时器等的程序化事件（基于生成艺术的渲染需要）
5.  应该支持桌面浏览器和手机。

我遇到过很多很棒的框架，比如

*   Paper.js
*   Kinetic.js
*   Fabric.js
*   画架.js

他们都支持第一个和第二个要求（至少部分），但不确定其他要求。

请推荐一个成熟的框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T18:16:33.687

经过更多研究并将这个问题发布在上述框架的邮件列表中，我终于决定使用 Paper.js

Paper.js 看起来非常令人印象深刻，与其他代码相比，代码风格看起来很整洁。

虽然 Kinetic.js 也给我留下了深刻的印象，但现在它还处于保密状态。

Easel.js 也很有前途，但由于它仍处于 alpha 阶段，因此将继续跟踪它。

# jquery - 通过 html 元素类/id 查找 xml 元素

> ID：11718349
> 
> 赞同：0
> 
> 时间：2012-07-30T09:07:24.630
> 
> 标签：jquery, xml, parsing, find, compare

我的脚本需要一些帮助。我想在我的 xml 文件中找到一些与 html 列表类同名的元素。比我想比较它们并做一些事情......这是我的代码。感谢山上的帮助。

```
var class_main_content = $('.main_content ul').find(this.class);
if((class_main_content) == $(xml).find(class_main_content).text()){
    $(this).find("element").each(function(){
        var name = $(this).find("name").text();
        var image = $(this).find("image").text();
        var level = $(this).find("level").text();
        $("#rounded_items").append('<li id="'+ level +'"><img src="'+ image +'" class="image"/><span>'+ name +'</span></li>')
    });        
} 
```

我的xml：

```
<programy_gotowe>
    <element>
        <image>img/icons/01-02/ciasta.png</image>
        <name>Ciasta</name>
        <level>pg_ciasta</level>
    </element>
</programy_gotowe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:15:41.947

ok, maybe this way will be better

```
 var class_main_content = $('.main_content ul').find(this.class);
        var xml_element_name = $(xml).find(class_main_content).text();
        if ((class_main_content) == xml_element_name){
            $('.main_content ul').remove();
        } 
```

can anybody help?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:50:46.653

您必须通过 xml 进行迭代，您可以从这个问题中获得帮助

[Jquery - 遍历所有 xml 标签](https://stackoverflow.com/questions/1735026/jquery-iterate-through-all-xml-tags)

# iphone - 在objective-c（Xcode）中ping IP地址的示例代码

> ID：11718352
> 
> 赞同：0
> 
> 时间：2012-07-30T09:07:36.347
> 
> 标签：iphone, objective-c, xcode4, ping

> **可能重复：**
> [如何在 Cocoa/Objective-C 中编写简单的 Ping 方法](https://stackoverflow.com/questions/798454/how-to-write-a-simple-ping-method-in-cocoa-objective-c)
> [检查可可应用程序中的互联网连接](https://stackoverflow.com/questions/2995822/check-internet-connection-in-cocoa-application)

我想 ping 一个 IP 地址并知道它当前是否在网络中。我正在 Xcode（objective-C）中开发 iPad/Iphone 应用程序。请帮助我提供示例代码，因为我是这项技术的新手。

```
 I don't want to download other application to ping IPaddress. 
```

苏什玛

# sql-server-2008 - 具有从函数评估的值的 SQL Server 持久列

> ID：11718354
> 
> 赞同：1
> 
> 时间：2012-07-30T09:07:44.033
> 
> 标签：sql-server-2008, views

在 Sql Server (2008, R2) 中是否有可能拥有一个持久列，其值是由查询其他表的标量函数产生的？我遇到了性能问题，因为我有一个应该考虑来自其他表的值来评估的字段。我在逻辑上解决了创建（索引）视图和使用 CASE WHEN 评估字段的问题，但现在我遇到了大量数据的性能问题。

我的想法是在函数中评估 CASE WHEN 并将其用作主表中的持久列。是否可以？视图的变化会触发值的更新吗？

你能建议我替代解决方案（触发器除外）吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:10:17.250

即使有可能，这几乎肯定是个坏主意。

触发器的存在是有原因的，这是一个理想的例子。为什么你不想使用它们？

# excel - VBA FileFolderExists 传递变量

> ID：11718360
> 
> 赞同：0
> 
> 时间：2012-07-30T09:07:56.663
> 
> 标签：excel, vba, ms-word

我在网上找到了这个功能

```
 Private Function FileFolderExists(strFullPath As String) As Boolean

    On Error GoTo EarlyExit
    If Not Dir(strFullPath, vbDirectory) = vbNullString then
        FileFolderExists = True
    End If

    EarlyExit:
    On Error GoTo 0
    End Function 
```

我想像这样传递字符串变量

```
 Dim lineText As String
    ...
    ElseIf FileFolderExists(lineText) = False Then 
```

我收到编译错误“byref 参数类型不匹配”

当我将 byval 放在 strFullPath 之前时，它似乎无法正常工作。我也尝试过使用 Dir 函数，如果我传递像“C:\test”这样的文字，它就可以工作，但如果我传递变量，它就不起作用。

是否有人具有检查文件夹存在并接受字符串变量作为参数的功能？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:29:35.617

问题似乎是 Word 将 CR 字符添加到每个段落，或者更准确地说，对象的`Text`属性`Paragraph`返回段落文本加上 CR 字符。

AFAIK，这是每个段落的 Word 行为，即使是最后一个段落。

这怎么会导致编译错误，我不知道。如果我以米兰为例：

```
Private Sub FirstLineFolder()
Dim lineText As String

lineText = ActiveDocument.Paragraphs(1).Range.Text
lineText = Left(lineText, Len(lineText) - 1) 'see below

MsgBox DoesFolderExist("C:\") 
MsgBox DoesFolderExist(lineText)
End Sub 
```

如果文档的第一行是有效文件夹`true`，则返回。`true`如果我注释标记的行，程序仍会编译并运行并返回`true`, `false`（使用相同的文档）。

[MSDN网站](http://msdn.microsoft.com/en-us/library/tx0x9x4d.aspx)上有一些关于它的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:47:14.977

试试这个：

```
Function FolderExists(folderPath As String) As Boolean

Dim f As Object
Set f = CreateObject("Scripting.FileSystemObject")

On Error GoTo NotFound
Dim ff As Object
Set ff = f.GetFolder(folderPath)
FolderExists = True
Exit Function

NotFound:
FolderExists = False
On Error GoTo 0

End Function 
```

我使用以下方法对其进行测试：

```
Sub Tst()

Dim b As Boolean
Dim s As String
s = "c:\temp"
b = FolderExists(s)

End Sub 
```

它按预期工作。

一般我`Scripting.FileSystemObject`都是用VBA里面所有文件相关的操作，native函数太麻烦了。

还应该注意的是，我的函数都检查文件夹，而原始函数——从它的名字来看——也许还试图检查文件是否存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:03:43.570

新代码，它准确地解释了我需要什么，你应该更容易尝试。

我期待 Word 文档第一行中的文件夹，然后我必须检查它是否存在。

```
Private Sub FirstLineFolder()
Dim lineText As String

lineText = ActiveDocument.Paragraphs(1).range.Text

MsgBox DoesFolderExists("C:\") ' this works
MsgBox DoesFolderExists(lineText) ' this doesnt work, when same folder passed
End Sub 
```

我和 Martin 的函数都抛出了我在第一篇文章中写的编译错误。

如果重要：Word 是 2010，没有写“选项显式”（我继承了代码，我无法更改）

# wordpress - 尝试应用特色帖子幻灯片 wp 插件时出现fatel错误

> ID：11718361
> 
> 赞同：0
> 
> 时间：2012-07-30T09:07:56.857
> 
> 标签：wordpress

1.  尝试在我的模板页面中应用此插件时发生错误，如下所示：-

2.  致命错误：在第 2 行的 /wp-content/plugins/featured-posts-slideshow/featured-posts.php 中调用未定义函数 get_bloginfo()

3.  请帮助其紧急。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:43:58.207

尝试使用此代码而不是您的包含函数：

```
include (ABSPATH . '/wp-content/plugins/featured-posts-slideshow/featured-posts.php'); 
```

# php - php替换路由系统

> ID：11718362
> 
> 赞同：-3
> 
> 时间：2012-07-30T09:07:57.123
> 
> 标签：php, routes, replace

我需要 PHP 中的函数来处理类似这样的替换。

```
$pattern = ':foo/anotherString';

$replacement = array(
    'foo' => 'HelloMe'
);

bazFunction($pattern, $replacement); // return 'HelloMe/anotherString'; 
```

这种方法在某些框架中用作路由模式。我想知道哪个函数处理那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:16:25.310

```
$string = "foo/anotherString";
$replacement = array('foo','HelloMe');
$newString = str_replace($replacement[],,$string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:18:20.970

这应该可以（因为关闭需要 5.3）

```
function my_replace($pattern, $replacement) {
  // add ':' prefix to every key
  $keys = array_map(function($element) {
    return ':' . $element;
  }, array_keys($replacement));

  return str_replace($keys, array_values($replacement), $pattern);
} 
```

如果您将内容直接传递给，则不需要此功能`str_replace`

```
str_replace(array(':foo'), array('HelloMe'), ':foo/anotherString'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T09:18:11.683

似乎php为您提供了该功能...

```
str_replace ( ":foo", "HelloMe" , $pattern ) 
```

会给你这个输出：HelloMe/anotherString

# javascript - 需要 JQuery 弹出/警报

> ID：11718363
> 
> 赞同：0
> 
> 时间：2012-07-30T09:07:59.610
> 
> 标签：javascript, jquery, html, css, dhtml

我有一个元素列表，需要为每个元素弹出相应的弹出窗口。这不是背景变黑的弹出窗口。这更像是一个 javascript 警报，尽管我需要在弹出窗口中创建自己的样式按钮，并为其分配我们自己的定制事件。我需要每个 pop 将自己适当地定位在 UI 中的相关项目旁边。

最好的方法是什么？请问有例子吗？我只想在访问者触发事件时显示弹出窗口。

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:13:55.987

我建议您将[Colorbox](http://www.jacklmoore.com/colorbox)用于弹出系统。首先; 它易于学习和使用。

最重要的是：[Colorbox](http://www.jacklmoore.com/colorbox)不会与您的其他插件产生冲突（有时[fancybox](http://fancybox.net/)会这样做）。

一些特点：

*   支持照片、分组、幻灯片、ajax、内联和 iframed 内容。
*   轻量级：10KB 的 JavaScript（压缩后不到 5KB）。
*   外观通过 CSS 控制，因此可以重新设置样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:30:55.183

你可以很容易地做到这一点，而无需使用 jQuery 插件。

我整理了一个小[例子](http://jsfiddle.net/eauur/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:06:34.443

怎么样[http://jqueryui.com/demos/dialog/#modal-confirmation](http://jqueryui.com/demos/dialog/#modal-confirmation)
或[http://jqueryui.com/demos/dialog/#modal-message](http://jqueryui.com/demos/dialog/#modal-message)

# android - 检测是否没有互联网连接

> ID：11718367
> 
> 赞同：5
> 
> 时间：2012-07-30T09:08:06.757
> 
> 标签：android, wifi

我有一个代码来确定是否有网络连接：

```
 ConnectivityManager cm = (ConnectivityManager)  getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();

    if (netInfo != null && netInfo.isConnected()) 
    {
        // There is an internet connection
    } 
```

但是，如果有网络连接而没有互联网，这是没有用的。我必须 ping 一个网站并等待响应或超时以确定 Internet 连接：

```
 URL sourceUrl;
    try {
        sourceUrl = new URL("http://www.google.com");
        URLConnection Connection = sourceUrl.openConnection();
        Connection.setConnectTimeout(500);
        Connection.connect();
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

        // no Internet
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

        // no Internet
    } 
```

但这是一个缓慢的检测。我应该学习一种快速检测它的好方法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:23:48.633

尝试以下方法来检测不同类型的连接：

```
private boolean haveNetworkConnection(Context context)
{
    boolean haveConnectedWifi = false;
    boolean haveConnectedMobile = false;

    ConnectivityManager cm = (ConnectivityManager) Your_Activity_Name.this.getSystemService(Context.CONNECTIVITY_SERVICE);
    // or if function is out side of your Activity then you need context of your Activity
    // and code will be as following
    // (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);

    NetworkInfo[] netInfo = cm.getAllNetworkInfo();
    for (NetworkInfo ni : netInfo)
    {
        if (ni.getTypeName().equalsIgnoreCase("WIFI"))
        {
            if (ni.isConnected())
            {
                haveConnectedWifi = true;
                System.out.println("WIFI CONNECTION AVAILABLE");
            } else
            {
                System.out.println("WIFI CONNECTION NOT AVAILABLE");
            }
        }
        if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
        {
            if (ni.isConnected())
            {
                haveConnectedMobile = true;
                System.out.println("MOBILE INTERNET CONNECTION AVAILABLE");
            } else
            {
                System.out.println("MOBILE INTERNET CONNECTION NOT AVAILABLE");
            }
        }
    }
    return haveConnectedWifi || haveConnectedMobile;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:35:34.730

所有这些方案的问题在于“互联网”并不作为一个实体存在。失败的连接尝试被报告为“无法访问”或“无法连接到 blahblah 的服务器”是有原因的。例子：

1）你没有信号。你连接到互联网了吗？PING 会成功吗？你能连接到你的目标服务器吗？

2) 您有信号，但已超出您的提供商数据限额。你连接到互联网了吗？PING 会成功吗？你能连接到你的目标服务器吗？

3) 您的提供商连接很好，但他们的主干路由器已关闭。你连接到互联网了吗？PING 会成功吗？你能连接到你的目标服务器吗？

4）您的供应商连接很好，他们的主干路由器已启动，但与服务器所在的 X 国的光纤连接已被某个醉酒的船长和他的船锚中断。你连接到互联网了吗？PING 会成功吗？你能连接到你的目标服务器吗？

5) 到目标国家的所有链接都已连接，但 Fred 用他的挖沟 JCB 切断了服务器场的电源线。Fred 的其他工作之一是为备份生成器提供服务：（您连接到互联网了吗？PING 会成功吗？您可以连接到目标服务器吗？

6) 所有硬件都已启动，但服务器代码是 Fred 在他因无能被降级为挖沟机之前编写的，现在又崩溃了。你连接到互联网了吗？PING 会成功吗？你能连接到你的目标服务器吗？

7) Fred 休息了一天，但他的替代主管服务器管理员已阻止路由器中的 ICMP ping 以防止 ping DOS 攻击。你连接到互联网了吗？PING 会成功吗？你能连接到你的目标服务器吗？

因此，唯一可以确定的方法是尝试连接到目标服务器并查看会发生什么。

您肯定可以更快地检测到一些负面情况 - 如果没有信号，您肯定无法建立连接:) 在那之后，您应该尝试连接。告诉用户发生了什么，使用超时并为用户提供“取消”按钮。这是你能做的最好的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T09:35:55.933

这个怎么样？

确保您有一个活动的 WiFi 连接，现在 Use[`WifiManager.getConnectionInfo()`](http://developer.android.com/reference/android/net/wifi/WifiManager.html#getConnectionInfo%28%29)返回有关当前 Wi-Fi 连接的动态信息 [WifiInfo](http://developer.android.com/reference/android/net/wifi/WifiInfo.html)，您可以获得[`WifiInfo.getLinkSpeed()`](http://developer.android.com/reference/android/net/wifi/WifiInfo.html#getLinkSpeed%28%29)，它为您提供当前的链接速度，并根据某个最小值检查它。

# methods - 将闭包传递给方法有什么好处吗？

> ID：11718370
> 
> 赞同：3
> 
> 时间：2012-07-30T09:08:24.540
> 
> 标签：methods, groovy, closures

我想知道将闭包对象传递给方法的真正用途是什么。

可以说我有一个闭包：

```
def a = {
        println it
 } 
```

（考虑它正在做某种操作，而不仅仅是打印）

现在我只是将这个闭包传递`a`给一个方法：

```
def testMethod(def input,Closure a){
        a(input)
}

testMethod "MethodPointer", a //passing closure. 
```

现在的问题是为什么会有这种级别的*间接*性？为什么不能`testMethod`直接处理它`input`？是的，我在这里要进行`input`关闭处理`a`，但是为什么要这样做呢？传递闭包的真正用途是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T09:23:30.513

如果没有参数，您将如何编写`collect`方法`Closures`？这将比现在复杂得多。Builders, ,`inject`等等也是如此...`each``with`

它允许您定义一些通用的东西，然后在以后使其更具体。例如，该`collect`方法可以描述为*“获取一个集合或可迭代的，并为每个元素做一些事情并将其添加到新创建的集合中”*。如果没有闭包在以后指定此*DO SOMETHING*，则 的值`collect`将是最小的。

慢慢地，你会找到一种更实用的思维方式。与其编写一个特定的函数来执行特定的任务，我是否可以编写一个函数，它采用更多适用于多个问题的通才方法，并将每个单独案例的细节放在一个闭包中？

* * *

### 编辑

作为一个例子，考虑这个过程方法，它返回一个介于`min`和`max`的倍数之间的数字列表`mult`：

```
List<Integer> filter( int min, int max, int mult ) {
  List<Integer> multiples = new ArrayList<Integer>() ;
  for( int i = min ; i < max ; i++ ) {
    if( i % mult == 0 ) {
      multiples.add( i ) ;
    }
  }
  multiples
}

println filter( 1, 200, 15 ) 
```

如果我们使用闭包（用于过滤）在 Groovy 中编写此代码，我们会得到：

```
List<Integer> filter( int min, int max, int mult ) {
  (min..max).findAll { it % mult == 0 }
}

println filter( 1, 200, 15 ) 
```

（我接受这个例子基本上反映了 的功能`findAll`，所以可能不是一个很好的例子——而且也有点做作）

现在考虑我们要根据其他一些条件进行过滤（整数存在于数据库中或其他东西中）......我们可以首先将我们的`filter`方法重写为：

```
List<Integer> filter( int min, int max, Closure<Boolean> filter ) {
  (min..max).findAll filter
}

println filter( 1, 200 ) { it % 15 == 0 } 
```

然后，如您所见，我们可以将任何闭包传递给该方法，如果我们想要保留元素，则返回 true，如果想要删除元素，则返回 false。

要以命令式风格执行此操作，您将（可能）最终使用多种方法来完成非常相似的任务......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T09:25:00.550

这个想法是编写模块化和结构化的清晰代码。

我写了一篇关于[闭包设计模式](http://arturoherrero.com/2012/04/25/closure-design-patterns/)的博文。您可以找到一些使用闭包的模式示例。

# android - 请帮助我理解这些错误

> ID：11718371
> 
> 赞同：0
> 
> 时间：2012-07-30T09:08:27.680
> 
> 标签：android, eclipse

我发布的同一个应用程序再次出现错误。请再次帮助我。非常感谢

这是错误：

```
07-30 16:57:08.613: E/AndroidRuntime(655): java.lang.ArrayIndexOutOfBoundsException: length=12; index=-1

07-30 16:57:08.613: E/AndroidRuntime(655):  at java.util.ArrayList.get(ArrayList.java:306)

07-30 16:57:08.613: E/AndroidRuntime(655):  at sample.app.touchsample.TouchsampleActivity.getTouchedViews(TouchsampleActivity.java:365)

07-30 16:57:08.613: E/AndroidRuntime(655):  at sample.app.touchsample.TouchsampleActivity.dealEvent(TouchsampleActivity.java:78)

07-30 16:57:08.613: E/AndroidRuntime(655):  at sample.app.touchsample.TouchsampleActivity.onTouch(TouchsampleActivity.java:294)

07-30 16:57:08.613: E/AndroidRuntime(655):  at android.view.View.dispatchTouchEvent(View.java:7122)

07-30 16:57:08.613: E/AndroidRuntime(655):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2170)

07-30 16:57:08.613: E/AndroidRuntime(655):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1905)

07-30 16:57:08.613: E/AndroidRuntime(655):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1925)

07-30 16:57:08.613: E/AndroidRuntime(655):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1379)

07-30 16:57:08.613: E/AndroidRuntime(655):  at android.app.Activity.dispatchTouchEvent(Activity.java:2396)

07-30 16:57:08.613: E/AndroidRuntime(655):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1873)

07-30 16:57:08.613: E/AndroidRuntime(655):  at android.view.View.dispatchPointerEvent(View.java:7307)

07-30 16:57:08.613: E/AndroidRuntime(655):  at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3172)

07-30 16:57:08.613: E/AndroidRuntime(655):  at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3117)

07-30 16:57:08.613: E/AndroidRuntime(655):  at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4153)

07-30 16:57:08.613: E/AndroidRuntime(655):  at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4132)

07-30 16:57:08.613: E/AndroidRuntime(655):  at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4224)

07-30 16:57:08.613: E/AndroidRuntime(655):  at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)

07-30 16:57:08.613: E/AndroidRuntime(655):  at android.os.MessageQueue.nativePollOnce(Native Method)

07-30 16:57:08.613: E/AndroidRuntime(655):  at android.os.MessageQueue.next(MessageQueue.java:125)

07-30 16:57:08.613: E/AndroidRuntime(655):  at android.os.Looper.loop(Looper.java:124)

07-30 16:57:08.613: E/AndroidRuntime(655):  at android.app.ActivityThread.main(ActivityThread.java:4745)

07-30 16:57:08.613: E/AndroidRuntime(655):  at java.lang.reflect.Method.invokeNative(Native Method)

07-30 16:57:08.613: E/AndroidRuntime(655):  at java.lang.reflect.Method.invoke(Method.java:511)

07-30 16:57:08.613: E/AndroidRuntime(655):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)

07-30 16:57:08.613: E/AndroidRuntime(655):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)

07-30 16:57:08.613: E/AndroidRuntime(655):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

这是 MainActivity 的代码：

```
 package sample.app.touchsample;

import java.util.ArrayList;
import java.util.HashMap;

import android.app.Activity;
import android.content.Context;
import android.graphics.Path;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.media.SoundPool;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewConfiguration;
import android.view.ViewGroup;
import android.view.Window;
import android.view.WindowManager;
import android.view.View.OnTouchListener;
import android.widget.FrameLayout;
import android.widget.ImageView;
//import sample.app.touchsample.TouchsampleActivity.secondDrum.thirdDrum;
import android.widget.LinearLayout;

public class TouchsampleActivity extends Activity implements OnTouchListener
{

    MediaPlayer mp;
    SoundPool fx;
    HashMap <Integer, Integer> fxMap;

    int sfxId=1;
    int sfxId2=2;
    int sfxId3=3;
    int sfxId4=4;

    private Path path = new Path();

    private View parent;

    private final ArrayList[] recentTouchedViewsIndex = new ArrayList[12];

    private final ArrayList[] downTouchedViewsIndex = new ArrayList[12];

    private final ArrayList<View> moveOutsideEnabledViews = new ArrayList<View>();

    private final ArrayList<View> multiTouchViews = new ArrayList<View>();

    private int mTouchSlop = 24;

    private static final String TAG = "Touch";
    //private ImageView imageView1, imageView2 ;

    public void addMoveOutsideEnabledViews(final View view) {
        moveOutsideEnabledViews.add(view);
    }

    private void dealEvent(final int actionPointerIndex,
            final MotionEvent event, final View eventView,
            final int actionResolved) {
        int rawX, rawY;
        final int location[] = { 0, 0 };
        eventView.getLocationOnScreen(location);
        // Log.v("tag", location + "");
        rawX = (int) event.getX(actionPointerIndex) + location[0];
        rawY = (int) event.getY(actionPointerIndex) + location[1];

        final int actionPointerID = event.getPointerId(actionPointerIndex);
        ArrayList<View> hoverViews = getTouchedViews(rawX, rawY);

        if (actionResolved == MotionEvent.ACTION_DOWN) {
            downTouchedViewsIndex[actionPointerID] = (ArrayList<View>) hoverViews
                    .clone();
        }
        // deletes all views which where not clicked on ActionDown
        if (downTouchedViewsIndex[actionPointerID] != null) {
            final ArrayList<View> tempViews = (ArrayList<View>) hoverViews
                    .clone();
            tempViews.removeAll(downTouchedViewsIndex[actionPointerID]);
            hoverViews.removeAll(tempViews);
        }

        if (recentTouchedViewsIndex[actionPointerID] != null) {
            final ArrayList<View> recentTouchedViews = recentTouchedViewsIndex[actionPointerID];

            final ArrayList<View> shouldTouchViews = (ArrayList<View>) hoverViews
                    .clone();
            if (!shouldTouchViews.containsAll(recentTouchedViews)) {
                shouldTouchViews.removeAll(recentTouchedViews);
                shouldTouchViews.addAll(recentTouchedViews);

                final ArrayList<View> outsideTouchedViews = (ArrayList<View>) shouldTouchViews
                        .clone();
                outsideTouchedViews.removeAll(hoverViews);
            }

            recentTouchedViewsIndex[actionPointerID] = hoverViews;
            hoverViews = shouldTouchViews;
        } else {
            recentTouchedViewsIndex[actionPointerID] = hoverViews;
        }

        if (actionResolved == MotionEvent.ACTION_UP) {
            recentTouchedViewsIndex[actionPointerID] = null;
            downTouchedViewsIndex[actionPointerID] = null;
        }

        dumpEvent(event);
        for (final View view : hoverViews) {
            int x, y;
            view.getLocationOnScreen(location);
            x = rawX - location[0];
            y = rawY - location[1];

            // View does not recognize that the Pointer is
            // outside if the Pointer is not far away (>mTouchSlop)
            if (recentTouchedViewsIndex[actionPointerID] != null) {
                if (pointInView(x, y, mTouchSlop, view.getWidth(),
                        view.getHeight())) {
                    // Log.v("tag", "added because < mTouchSlop");

                    if (!recentTouchedViewsIndex[actionPointerID]
                            .contains(view)) {
                        recentTouchedViewsIndex[actionPointerID].add(view);
                    }
                } else if (moveOutsideEnabledViews.contains(view)) {
                    Log.v("tag", "outside but gets event");
                    recentTouchedViewsIndex[actionPointerID].add(view);
                }
            }
            final MotionEvent me = MotionEvent.obtain(event.getDownTime(),
                    event.getEventTime(), actionResolved, x, y,
                    event.getPressure(actionPointerIndex),
                    event.getPressure(actionPointerIndex),
                    event.getMetaState(), event.getXPrecision(),
                    event.getYPrecision(), event.getDeviceId(),
                    event.getEdgeFlags());
            me.setLocation(x, y);

            if (!me.equals(event)) {
                // deals the Event
                view.onTouchEvent(me);
            }

            // debug
            if (actionResolved == MotionEvent.ACTION_MOVE) {
                Log.v("tag",
                        "#" + actionPointerIndex + " Rawx:" + rawX + " rawy:"
                                + rawY + " x:" + x + " y:" + y + " "
                                + view.toString());
            }
        }

    }

//  @Override
 //   public boolean onCreateOptionsMenu(Menu menu) 
  //  {
 //       getMenuInflater().inflate(R.menu.touchsample, menu);
  //      return true;
 //   }

    public class secondDrum implements OnTouchListener
    {

        public boolean onTouch(View v, MotionEvent event) 
        {

            dumpEvent(event);

            AudioManager bongos2 = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
            float curVolume2 = bongos2.getStreamVolume(AudioManager.STREAM_MUSIC);
            float maxVolume2 = bongos2.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
            float leftvolume2 = curVolume2/maxVolume2;
            float rightVolume2 = curVolume2/maxVolume2;
            int priority2 = 1;
            int no_loop2 = 0;
            float normal_playback_rate2=1.0f;

            fx.play(sfxId2, leftvolume2, rightVolume2, priority2, no_loop2, normal_playback_rate2);
            return false;
        }

    }

        public class thirdDrum implements OnTouchListener
        {

            public boolean onTouch(View v, MotionEvent event) 
            {

                    dumpEvent(event);
                    AudioManager bongos3 = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
                    float curVolume = bongos3.getStreamVolume(AudioManager.STREAM_MUSIC);
                    float maxVolume = bongos3.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
                    float leftVolume = curVolume/maxVolume;
                    float rightVolume = curVolume/maxVolume;
                    int priority = 1;       
                    int no_loop = 0;
                    float normal_playback_rate = 2.0f;
                    fx.play(sfxId3, leftVolume, rightVolume, priority, no_loop, normal_playback_rate);
                    return false;

                    //return false;
            }

        }

            public class forthDrum implements OnTouchListener
            {

                public boolean onTouch(View v, MotionEvent event) 
                {

                    dumpEvent(event);
                    AudioManager bongos4 = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
                    float curVolume = bongos4.getStreamVolume(AudioManager.STREAM_MUSIC);
                    float maxVolume = bongos4.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
                    float leftVolume = curVolume/maxVolume;
                    float rightVolume = curVolume/maxVolume;
                    int priority = 1;       
                    int no_loop = 0;
                    float normal_playback_rate = 2.0f;
                    fx.play(sfxId4, leftVolume, rightVolume, priority, no_loop, normal_playback_rate);  
                    return false;
                    //return false;

                }

            }

    public boolean onTouch(View view, MotionEvent event) 
    {

            dumpEvent(event);

            AudioManager bongos = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
            float curVolume = bongos.getStreamVolume(AudioManager.STREAM_MUSIC);
            float maxVolume = bongos.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
            float leftVolume = curVolume/maxVolume;
            float rightVolume = curVolume/maxVolume;
            int priority = 1;       
            int no_loop = 0;
            float normal_playback_rate = 1.0f;
            fx.play(sfxId, leftVolume, rightVolume, priority, no_loop, normal_playback_rate);       
            //return false;
            //index of the pointer which starts this Event

            final int actionPointerIndex = event.getActionIndex();

            // resolve the action as a basic type (up, down or move)
            int actionResolved = event.getAction() & MotionEvent.ACTION_MASK;
            if (actionResolved < 7 && actionResolved > 4) {
                actionResolved = actionResolved - 5;
            }

            if (actionResolved == MotionEvent.ACTION_DOWN) {
                for (int ptrIndex = 0; ptrIndex < event.getPointerCount(); ptrIndex++) {
                    // only one event for all move events.
                    dealEvent(ptrIndex, event, view, actionResolved);
                    Log.v("tag", "move" + ptrIndex);
                }

            } else {
                dealEvent(actionPointerIndex, event, view, actionResolved);
            }

            return false;
            }

        private void dumpEvent(MotionEvent event) 
        {
            final String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE", "POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };

            final StringBuilder sb = new StringBuilder();
            final int action = event.getAction();
            final int actionCode = action & MotionEvent.ACTION_MASK;
            sb.append("event ACTION_").append(names[actionCode]);

            if(actionCode == MotionEvent.ACTION_POINTER_DOWN)
            {
                sb.append("(pid " ).append(action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
                sb.append(")" );
            }

            sb.append("[");

            for (int i = 0; i <event.getPointerCount(); i++)
            {
                sb.append("#").append(i);
                sb.append("(pid ").append(event.getPointerId(i));
                sb.append(")=").append((int) event.getX(i));
                sb.append(",").append((int) event.getY(i));
                if(i + 1 < event.getPointerCount())
                    sb.append(";");
            }

            sb.append("]");
            Log.d(TAG, sb.toString());
        }

        private ArrayList<View> getChildViews(final View view) {
            final ArrayList<View> views = new ArrayList<View>();
            if (view instanceof ViewGroup) {
                final ViewGroup v = ((ViewGroup) view);
                if (v.getChildCount() > 0) {
                    for (int i = 0; i < v.getChildCount(); i++) {
                        views.add(v.getChildAt(i));
                    }

                }
            }
            return views;
        }

        private ArrayList<View> getTouchedViews(final int x, final int y) {

            View lastTouchedView = null;
            final ArrayList<View> touchedViews = new ArrayList<View>();
            final ArrayList<View> possibleViews = new ArrayList<View>();

            if (parent instanceof ViewGroup) {
                possibleViews.add(parent);
                for (int i = 0; i < possibleViews.size(); i--) {
                    final View view = possibleViews.get(i);

                    final int location[] = { 0, 0 };
                    view.getLocationOnScreen(location);

                    if (((view.getHeight() + location[1] >= y)
                            & (view.getWidth() + location[0] >= x)
                            & (view.getLeft() <= x) & (view.getTop() <= y))
                        || view instanceof FrameLayout) {
                        if (this.multiTouchViews.contains(view)){
                            lastTouchedView = view;
                        }
                        possibleViews.addAll(getChildViews(view));
                    }
                }
                //ArrayList<View> touchedViews = new ArrayList<View>();
                if (lastTouchedView != null){
                        touchedViews.add(lastTouchedView);
                }

                return touchedViews;
            }
                return possibleViews;
        }

    //@Override
    //public void onCreate(final Bundle instance) {
    //  super.onCreate(instance);

    //public boolean onTouch(final View v, final MotionEvent event) {
     @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            requestWindowFeature(Window.FEATURE_NO_TITLE);
            getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
            getWindow().clearFlags(
                    WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
            setContentView(R.layout.touchsample);

            fx=new SoundPool(1100, AudioManager.STREAM_MUSIC, 1100);
            fxMap=new HashMap<Integer, Integer>();

            fxMap.put(sfxId, fx.load(this, R.raw.bongo_left, 1));
            fxMap.put(sfxId2, fx.load(this, R.raw.bongo_right, 1));
            fxMap.put(sfxId3, fx.load(this, R.raw.bongo_left, 1));
            fxMap.put(sfxId4, fx.load(this, R.raw.bongo_right, 1));

            parent = findViewById(android.R.id.content).getRootView();
            parent.setOnTouchListener(this);
            mTouchSlop = ViewConfiguration.get(getApplicationContext())
                    .getScaledTouchSlop();

        }   

     private boolean pointInView(final float localX, final float localY,
             final float slop, final float width, final float height) {
            return localX >= -slop && localY >= -slop && localX < ((width) + slop)
            && localY < ((height) + slop);
    }

} 
```

* * *

和扩展：

```
package sample.app.touchsample;

import java.util.HashMap;

import android.content.Context;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.media.SoundPool;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.Window;
import android.view.WindowManager;
import android.widget.ImageView;

public class Multitouch extends TouchsampleActivity{

    private ImageView imageview1, imageview2, imageview3, imageview4;
    MediaPlayer mp;
    SoundPool fx;
    HashMap <Integer, Integer> fxMap;

    int sfxId=1;
    int sfxId2=2;
    int sfxId3=3;
    int sfxId4=4;

    @Override
    public void onCreate(final Bundle savedInstanceState) {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
        getWindow().clearFlags(
                WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);

        super.onCreate(savedInstanceState);
        setContentView(R.layout.touchsample);

        fx=new SoundPool(1100, AudioManager.STREAM_MUSIC, 1100);
        fxMap=new HashMap<Integer, Integer>();

        fxMap.put(sfxId, fx.load(this, R.raw.bongo_left, 1));
        fxMap.put(sfxId2, fx.load(this, R.raw.bongo_right, 1));
        fxMap.put(sfxId3, fx.load(this, R.raw.bongo_left, 1));
        fxMap.put(sfxId4, fx.load(this, R.raw.bongo_right, 1));

        ImageView view = (ImageView) findViewById(R.id.imageView1);     
        view.setOnTouchListener(this);

        ImageView view2 = (ImageView) findViewById(R.id.imageView2);
        view2.setOnTouchListener(new secondDrum());

        ImageView view3 = (ImageView) findViewById(R.id.imageView3);
        view3.setOnTouchListener(new thirdDrum());

        ImageView view4 = (ImageView) findViewById(R.id.imageView4);
        view4.setOnTouchListener(new forthDrum());

        }

        public boolean onTouch(View v, MotionEvent event) 
        {

            switch(event.getAction())
            {
            case MotionEvent.ACTION_DOWN:               
                //dumpEvent(event);

                AudioManager bongos = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
                float curVolume = bongos.getStreamVolume(AudioManager.STREAM_MUSIC);
                float maxVolume = bongos.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
                float leftVolume = curVolume/maxVolume;
                float rightVolume = curVolume/maxVolume;
                int priority = 1;       
                int no_loop = 0;
                float normal_playback_rate = 1.0f;
                fx.play(sfxId, leftVolume, rightVolume, priority, no_loop, normal_playback_rate);       

                return false;

                case MotionEvent.ACTION_UP:

                break;

        }

            class secondDrum implements OnTouchListener
            {

                public boolean onTouch(View v, MotionEvent event) 
                {
                    switch (event.getAction())
                    {
                    case MotionEvent.ACTION_DOWN:

                //dumpEvent(event);

                AudioManager bongos2 = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
                float curVolume2 = bongos2.getStreamVolume(AudioManager.STREAM_MUSIC);
                float maxVolume2 = bongos2.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
                float leftvolume2 = curVolume2/maxVolume2;
                float rightVolume2 = curVolume2/maxVolume2;
                int priority2 = 1;
                int no_loop2 = 0;
                float normal_playback_rate2=1.0f;
                fx.play(sfxId2, leftvolume2, rightVolume2, priority2, no_loop2, normal_playback_rate2);
                return false;

                    case MotionEvent.ACTION_UP:

                        break;
            }

            class thirdDrum implements OnTouchListener
            {

                public boolean onTouch(View view, MotionEvent event) 
                {

                    switch(event.getAction())
                    {           
                    case MotionEvent.ACTION_DOWN:

                        //dumpEvent(event);
                        AudioManager bongos3 = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
                        float curVolume = bongos3.getStreamVolume(AudioManager.STREAM_MUSIC);
                        float maxVolume = bongos3.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
                        float leftVolume = curVolume/maxVolume;
                        float rightVolume = curVolume/maxVolume;
                        int priority = 1;       
                        int no_loop = 0;
                        float normal_playback_rate = 2.0f;
                        fx.play(sfxId3, leftVolume, rightVolume, priority, no_loop, normal_playback_rate);

                        return false;

                        case MotionEvent.ACTION_UP:

                        break;
                    }

            class forthDrum implements OnTouchListener
            {
                    public boolean onTouch(View v, MotionEvent event) 
                    {

                        switch (event.getAction())
                        {
                            case MotionEvent.ACTION_DOWN:

                                AudioManager bongos4 = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
                                float curVolume = bongos4.getStreamVolume(AudioManager.STREAM_MUSIC);
                                float maxVolume = bongos4.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
                                float leftVolume = curVolume/maxVolume;
                                float rightVolume = curVolume/maxVolume;
                                int priority = 1;       
                                int no_loop = 0;
                                float normal_playback_rate = 2.0f;
                                fx.play(sfxId4, leftVolume, rightVolume, priority, no_loop, normal_playback_rate);  
                                return false;

                            case MotionEvent.ACTION_UP:

                                break;

                                }
                            return true;
                                }
                            }
                    return true;
                        }
                    }
            return true;
                }
            }
        return true;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:12:57.810

```
07-30 16:57:08.613: E/AndroidRuntime(655):
    java.lang.ArrayIndexOutOfBoundsException: length=12; index=-1 
```

这是您需要的主要内容。它表明您有一个大小数组，`12`但您正在尝试访问元素 number `-1`。这通常是因为您跑完了数组的末尾（在这种情况下是倒计时）。它在 Android 运行时中，但您会发现您可能需要沿着堆栈跟踪查找错误代码（这几乎*总是*您的代码）。

很可能是以下行：

```
for (int i = 0; i < possibleViews.size(); i--) 
```

中`getTouchedViews()`，堆栈的第三步和似乎是非 Android 代码的第一个：

```
07-30 16:57:08.613: E/AndroidRuntime(655):  at
    sample.app.touchsample.TouchsampleActivity
        .getTouchedViews(TouchsampleActivity.java:365) 
```

这个循环从零开始并倒计时（立即到`-1`）所以几乎可以肯定是你的问题。改为使用`i++`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:12:15.490

错误在于：

```
for (int i = 0; i < possibleViews.size(); i--) 
```

它应该是：

```
for (int i = 0; i < possibleViews.size(); i++) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T09:14:41.590

当您尝试访问数组索引之外的元素时，会发生 ArrayIndexOutOfBoundsException。

例如，考虑您的数组有 10 个元素，并且您尝试访问元素 12 或 13，这将导致 ArrayIndexOutOfBoundsException。

再次查看这些循环并查看数组索引超出范围的位置。还要记住java中的数组以0而不是1的索引开始。

# android - 使用什么：AlarmManger 或我自己的带有 Timer 的服务 (scheduleAtFixedRate(task, delay, period));

> ID：11718375
> 
> 赞同：0
> 
> 时间：2012-07-30T09:08:36.270
> 
> 标签：android, alarmmanager

就我而言，我必须在接下来的 3 小时内每 5 分钟执行一次任务。哪一个会更好 AlarmManger 或 Timer。在 AlarmManger 的情况下，我将启动一个意图服务来完成任务，然后我将使用 TimerTask。此外，如何在intentService onHandleIntent 中使用AlarmManager.cancel(pendingIntent) 的待处理意图。

可能的副本，但有不同的情况。[Android Service 中 Timer Task VS Alarm Manager 的使用](https://stackoverflow.com/questions/8679367/timer-task-vs-alarm-manager-usage-in-android-service)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:19:25.283

首先，设置：

```
Intent i = new Intent( context.getApplicationContext(), NameOfYourClass.class );
PendingIntent pi = PendingIntent.getBroadcast( c.getApplicationContext(), 0, i, 0 );
AlarmManager am = (AlarmManager) context.getSystemService( Context.ALARM_SERVICE );
am.setRepeating( AlarmManager.ELAPSED_REALTIME, SystemClock.elapsedRealtime(), 5*60*1000, pi ); 
// ELAPSED_REALTIME will execute ONLY when phone is awake, to execute always use ELAPSED_REALTIME_WAKEUP 
```

就在此初始设置之后，当计数器启动时保存：，例如。[偏好管理器](http://developer.android.com/reference/android/preference/PreferenceManager.html)

最后，时机成熟：

```
Intent i = new Intent( context.getApplicationContext(), NameOfYourClass.class );
PendingIntent pi = PendingIntent.getBroadcast( context.getApplicationContext(), 0, i, 0 );
AlarmManager am = (AlarmManager) context.getSystemService( Context.ALARM_SERVICE );
am.cancel( pi ); 
```

# c# - Windows Azure/SQL Azure 实体框架中的动态数据库/模式

> ID：11718376
> 
> 赞同：2
> 
> 时间：2012-07-30T09:08:53.073
> 
> 标签：c#, asp.net-mvc-3, entity-framework, azure, azure-sql-database

我们目前正在开发代号为 FinAcuity 的 SAAS 应用程序，它将托管在 Windows Azure 平台上，主数据库将是 SQL Azure。

以下是我们产品的一些技术规格：

*   开发环境 - 带有 MVC 3 (Razor) 的 Asp.Net 4.0，实体框架
*   数据库 - SQL Azure

这是我们的商业案例：

*   我们的产品是 SAAS 产品，由于它包含客户的财务数据，我们将为每个客户提供单独的数据库，以实现更高级别的多租户、数据隔离和安全性。
*   现在客户可以在他们的帐户下创建多个公司，这些公司将由特定客户数据库下的架构分开。

**注意：**每个模式的表结构都是相同的。

以下是一些场景，可以让您更深入地了解我们的应用程序流程。

**场景一：**

*   为了在客户端注册时配置新数据库，我们将运行存储过程，该过程将创建具有基本结构的数据库。
*   我们的疑问：这是在 SQL Azure 上执行此操作的正确方法还是有其他方法？

**场景二：**

*   为了访问客户端数据库下的多个模式，我们为单个模式动态生成 SSDL 文件并使用该文件进行连接。
*   我们的疑问：还有其他方法吗，例如使用相同的 SSDL 文件实例进行多个连接并传递元数据进行连接？

**场景 3：**

*   由于我们的应用程序支持从 Excel 文件进行临时查询和动态表创建，我们将提供将在后端运行存储过程的向导，并在客户端数据库的特定模式下从向导中选择标头后从 Excel 文件动态创建该表.
*   我们的疑问：如果有的话，给我们建议一个更好的方法吗？

**场景四：**

*   现在，将新表添加到模式中，我们必须更新 EDMX 文件以从新创建的表中获取数据。为此，我们将运行将从新创建的表中获取数据的存储过程。
*   我们的疑问：有没有办法更新 EDMX 文件运行时和获取数据？

需要针对上面列出的每个场景的最佳解决方案的建议。

先感谢您。

最好的问候 - 萨希尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:46:57.140

我认为这对于一个单一的问题来说有点太多了。

我个人认为你从错误的角度看待它。为什么选择 Entity Framework 和 SQL Azure？您真的认为这些是解决您的问题的最佳技术吗？

我建议您退后一步，研究一下可以使用哪些其他技术。因为你在这里问的看起来像是一个无**模式的**解决方案，而 SQL Azure / SQL Server 并不是为那个恕我直言而构建的。

您可以从查看可能在 Windows Azure 中的 NoSQL（无模式、键值存储）解决方案开始。有一份白皮书可以帮助您入门：[NoSQL 和 Windows Azure 平台——对不太可能的组合的调查](http://download.microsoft.com/download/9/E/9/9E9F240D-0EB6-472E-B4DE-6D9FCBB505DD/Windows%20Azure%20No%20SQL%20White%20Paper.pdf)

Windows Azure 表存储是一个键值存储，可以解决您的一些问题：

*   客户隔离/多种模式：WAZ 表存储支持分区，您可以按客户对数据进行分区，而不是将所有数据放在一起。
*   供应：无需供应任何东西。获取一个存储帐户，您就可以开始使用了。然后，您可以简单地编写一些代码，为该客户在特定分区中写入数据。
*   成本（问题中未提及）：表存储比 SQL Azure 便宜得多
*   ...

# android - 将安卓 4.0.3 手机连接到 Wifly

> ID：11718377
> 
> 赞同：0
> 
> 时间：2012-07-30T09:09:02.327
> 
> 标签：android, wifi, p2p, adhoc

如何使用 14 级 API 函数将 Android 4.0.3 手机连接到 Wifly 模块`wifi direct`？[我将 Wifly 配置为在 adhoc 模式下工作，并按照Android.developer 指南](http://developer.android.com/guide/topics/connectivity/wifip2p.html)中所示编写了 Android 应用程序， 但我找不到对等方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:56:57.817

从 Android 4.0 开始，可以在 adhoc 模式下将 Android 手机连接到 Wifly 模块，无需 root，使用以下技术：

1.  使用帮助应用程序（可在 Google Play 上获得或自行开发），在手机上创建接入点并检查 SSID、密码和 IP 地址。
2.  使用此信息配置 Wifly 模块。
3.  在您的工作应用程序中，通过标准套接字编程与 Wifly 模块进行通信。

以下帖子中描述了这 3 个步骤：

1.  [http://sailboatinstruments.blogspot.ca/2012/10/talking-to-android-phone-through-wi-fi.html](http://sailboatinstruments.blogspot.ca/2012/10/talking-to-android-phone-through-wi-fi.html)

2.  [http://sailboatinstruments.blogspot.ca/2012/11/gps-data-from-wifly-to-android-phone.html](http://sailboatinstruments.blogspot.ca/2012/11/gps-data-from-wifly-to-android-phone.html)

3.  [http://sailboatinstruments.blogspot.ca/2012/11/gps-data-from-wifly-to-android-phone_28.html](http://sailboatinstruments.blogspot.ca/2012/11/gps-data-from-wifly-to-android-phone_28.html)

当前的限制是 SSID 和密码被赋予不可编辑的随机名称，因此您必须在创建新 AP 时重新配置 Wifly（但请注意，只要启用 Wifi，AP 就会在手机上运行，​​除非您使用助手应用程序将其删除）。让我们希望未来的 Android 版本将通过允许保留永久 SSID 和密码来消除此限制。

更新：使用 Android 4.2.1，上述限制似乎已经消失！移除并重新创建接入点后，SSID 和密码短语保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T22:19:21.930

自动连接：[https](https://dl.dropboxusercontent.com/u/101922388/WiflySanUSB.zip) : //dl.dropboxusercontent.com/u/101922388/WiflySanUSB.zip。当WiFly modem只有绿色LED闪烁时，电路和程序已经成功执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:00:51.397

无法以正常方式通过 Android（在 iOS 中可以）使用 AdHoc 模式设备。

请在此处阅读：[http ://www.xda-developers.com/android/android-ad-hoc-wireless-network-support/](http://www.xda-developers.com/android/android-ad-hoc-wireless-network-support/)

此链接显示了一种使用 AdHoc 的方法。

# java - EclipseLink 连接超时

> ID：11718381
> 
> 赞同：3
> 
> 时间：2012-07-30T09:09:14.073
> 
> 标签：java, eclipselink

这应该是一个老问题，但我搜索了很多，没有发现任何有用的东西。我的主要问题是，当连接丢失时，我的 Java swing 应用程序会冻结。必须有一个连接超时，以便应用程序通知用户。

我试过[这个](https://stackoverflow.com/a/5312846/1229038)和[这个](http://dev.eclipse.org/mhonarc/lists/eclipselink-users/msg05023.html)，但它们没有帮助。

这真的是 EclipseLink 的一个弱点，还是我想不通？

**编辑：**这是我通过 EclipseLink 连接的方式：

```
private static javax.persistence.EntityManager em = null;
public static javax.persistence.EntityManager getEntityManager()
{
    if (em == null || !em.isOpen())
    {
        try
        {
            em = Persistence
                  .createEntityManagerFactory("persistenceUnitName", getPersistenceConfig()).createEntityManager();
        } catch (Exception e)
        {
           //log
        }
    }
    return em;
} 
```

这是我的persistence.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence  http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
<persistence-unit name="persistenceUnitName" transaction-type="RESOURCE_LOCAL">
<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
<class>org.entities.MyEntity</class>
<shared-cache-mode>NONE</shared-cache-mode>
<validation-mode>NONE</validation-mode>
<properties>
  <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
</properties> 
```

Swing 和`em`在同一个线程中，`em`无法检索数据，所以 Swing 正在等待`em`并冻结。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:11:39.350

您的应用程序挂在哪里？请中断或调试进程并获取堆栈转储。

如果它挂在查询上，您可以设置查询超时，这可能会有所帮助。

它很可能挂在 JDBC 驱动程序上，JPA 无能为力。检查您的 JDBC 驱动程序中是否有任何设置以防止挂起。

# objective-c - 两个视图之间的参数传递

> ID：11718383
> 
> 赞同：-1
> 
> 时间：2012-07-30T09:09:19.203
> 
> 标签：objective-c, view, xcode4, parameters

我使用第一个视图（一个类），其中有一个按钮显示第二个视图（另一个类）。显示如下：

```
listContactsViewController viewController * = [[listContactsViewController alloc] init];
UINavigationController * vc = [[UINavigationController alloc] initWithRootViewController: viewController];
[self presentModalViewController: vc animated: YES]; 
```

然后在第二个视图中，我选择行，然后我有一个“添加”按钮来显示第一个视图，如下所示：

```
[self dismissModalViewControllerAnimated: YES]; 
```

我的问题是在第二个视图中我有一个 NSMutableArray 我想发送到第一个视图。

如果你有一个想法。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:13:48.730

有很多方法可以解决这个问题。

快速：在您的第二个视图控制器中

```
listContactsViewController 
```

定义一个`delegate`属性，该属性包含对呈现控制器的引用（您希望使用创建的 NSArray 的那个`listContactsViewController`。然后，在关闭视图控制器之前，在`delegate`接口中调用一个方法，以便您的呈现控制器可以获取大批。

不过，这只是解决您的问题的一种快速解决方案，并不是最好的解决方案。

更正确的解决方案是创建一个“模型”对象，该对象可从应用程序中的任何控制器访问（单例可以），该对象包含相关数据：`listContactsViewController`将数组存储到模型中；呈现控制器从那里得到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:32:04.360

使用**代表和协议。**

请参阅本教程：[在视图之间传递数据教程 - 在您的 iPhone 应用程序中使用协议和委托。](http://www.theappcodeblog.com/2011/04/15/passing-data-between-views-tutorial-using-a-protocol-delegate-in-your-iphone-app/)

# c# - 使用带有外键的链接表创建数据

> ID：11718384
> 
> 赞同：1
> 
> 时间：2012-07-30T09:09:21.967
> 
> 标签：c#, linq, dictionary, foreign-keys

我的 MySql Workbench 数据库中有 3 个表：站、位置和位置站。station 的 id 和 location 是 locationstation 的外键。问题是当我选择 stationName 和 locationName 时，我无法将其保存到 locationstation 表中。有什么帮助吗？谢谢！

这是我将车站名称和位置链接到组合框中供用户选择的代码。

```
 private void Create_LS_Load(object sender, EventArgs e)
    {
        using (satsEntities Setupctx = new satsEntities())
        {
            var storeStation = (from SLS in Setupctx.stations
                               select SLS.StationName).Distinct().ToList();                                   
            foreach (var LocationStation in storeStation)
            {
                cbStation.Items.Add(LocationStation);
            }

            var storeLocation1 = (from SLS in Setupctx.stations
                                join location l in Setupctx.locations on SLS.StationID equals l.LocationID
                                select l.LocationName).Distinct().ToList();                                      
            foreach (var LocationStation1 in storeLocation1)
            {
                cbLocation.Items.Add(LocationStation1);
            }
        }
    } 
```

这是要创建的代码。

```
 private void btnCreate_Click(object sender, EventArgs e)
    {
        using (satsEntities Setupctx = new satsEntities())
        {
            locationstation ls = new locationstation();
            ls.stationID = cbStation.SelectedIndex;
            ls.locationID = cbLocation.SelectedIndex;
            Setupctx.locationstations.AddObject(ls);
            Setupctx.SaveChanges();
            cbStation.SelectedIndex = -1;
            cbLocation.SelectedIndex = -1;

            MessageBox.Show("New Location Station Is Created");
        }
    } 
```

这是我将车站和位置设置到字典中的代码。

```
private void cbStation_SelectedIndexChanged(object sender, EventArgs e)
    {
        DataSet ds = new DataSet();
        Dictionary<int, string> dictStation = new Dictionary<int, string>();

        foreach (DataRow dr in ds.Tables[0].Rows)
        {
            dictStation.Add(Convert.ToInt32(dr["StationID"].ToString()), dr["StationName"].ToString());
        }

        dictStation.Equals((cbStation.SelectedValue));
    }

    private void cbLocation_SelectedIndexChanged(object sender, EventArgs e)
    {
        DataSet ds1 = new DataSet();
        Dictionary<int, string> dictStation = new Dictionary<int, string>();

        foreach (DataRow dr in ds1.Tables[0].Rows)
        {
            dictStation.Add(Convert.ToInt32(dr["LocationID"].ToString()), dr["LocationName"].ToString());
        }

        dictStation.Equals((cbLocation.SelectedValue));
    } 
```

错误是部分：“（ds.Tables [0].Rows中的DataRow dr）”。他们找不到表 [0]。关于错误的任何意见？

# .net - F# 4.0.0.0 到 4.3.0.0 的系统范围绑定重定向

> ID：11718385
> 
> 赞同：6
> 
> 时间：2012-07-30T09:09:24.417
> 
> 标签：.net, f#, assembly-binding-redirect

我有一些常见的 xUnit 测试失败了

```
Could not load file or assembly 'FSharp.Core, Version=4.0.0.0, Culture=neutral, 
PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. 
The system cannot find the file specified. 
```

为了执行机器范围的重定向，我添加到文件中

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\machine.config 

<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="FSharp.Core" publicKeyToken="b03f5f7f11d50a3a"
                        culture="neutral"/>
      <bindingRedirect oldVersion="4.0.0.0" newVersion="4.3.0.0"/>
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

你有更好的方法来处理 4.0 / 4.3 的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T18:54:40.837

我不知道 xUnit，但是如果您的单元测试运行程序支持 app.config 文件，您可以将配置附加到单元测试程序集（例如，按照您使用默认 F# 控制台应用程序模板获得的内容的 app.config ）。如果测试运行程序不尊重 app.config，那么我认为 machine.config 策略是一个不错的策略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-30T08:58:24.073

通过使用 NuGet，我添加了 FSharp.Core.3 并解决了我的问题。

# javascript - 使用javascript动态创建和删除可点击按钮

> ID：11718391
> 
> 赞同：-2
> 
> 时间：2012-07-30T09:09:49.317
> 
> 标签：javascript

我创建了一个英文到印地文音译网页。有规则将每个印地语字母映射到其对应的英文字母。如果用户按“d”，我想建议一些附近的字母。如果我能够使用 javascript 创建和删除按钮（具有相关的 onclick 操作），那就太好了。那可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:23:30.390

steve graham - 用于创建具有相关操作的可点击按钮。我也用过这个

```
function removechildren()
{   var node=document.getElementById("fooBar");
    node.innerHTML = "";
} 
```

一次删除所有这些。

# c# - 如何加快 Dropdownlist SelectedIndexChanged 事件

> ID：11718392
> 
> 赞同：1
> 
> 时间：2012-07-30T09:09:51.490
> 
> 标签：c#, asp.net, performance, drop-down-menu, selectedindexchanged

我在 Dropdownlist_SelectedIndexChanged 事件上绑定了一个网格视图，但我发现这个过程太慢了。填充需要 50-60 秒，而我显示的数据量并不庞大。（最多 40 行）。如何加快 selectedindexchanged 的​​性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:24:14.287

是否每次绑定网格视图都依赖于 selectedIndex？如果是这种情况，可能是因为 sql 事务页面很慢，
您可以保存`data-table`并`session or view state`根据所选索引过滤此数据表。这将停止对 sql server 的命中。
在其他方式您可以使用 ajax 来获取数据表，这将阻止您的整页回发。

# iphone - Segue 使用了错误的动画

> ID：11718396
> 
> 赞同：0
> 
> 时间：2012-07-30T09:10:16.327
> 
> 标签：iphone, ios, user-interface, segue

我正在使用 push segue 从视图控制器进入动画控制器。我的故事板文件中有一个 push segue，这是我在`prepareForSegue`方法中使用的代码：

```
if([[segue identifier] isEqualToString:@"Push To Table Segue"]){
     NSLog(@"Push to table segue called");

    ReccyTableViewController *loginViewController = (ReccyTableViewController *)segue.destinationViewController;

    [self presentViewController:loginViewController animated:YES completion:nil];
} 
```

这是调用下一个 segue 的代码：

```
- (void)goToNextView {
      [self performSegueWithIdentifier:@"Push To Table Segue" sender:self]
} 
```

segue 有效，但新窗口从底部飞起来，而不是被推动。我怎样才能让它推入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:13:04.787

好吧，在为 segue 做准备时，您应该只“准备”，而不是执行动画。

此外，您在这里使用的不是您的 segue 动画，而是来自 的动画`presentViewController`，我认为默认情况下它是模态动画。您实际上无需执行任何操作来执行您的转场，除非`performSegueWithIdentifier`您想以编程方式执行此操作，或者单击按钮/单元格/您在情节提要中链接的任何内容。

编辑：根据[这篇文章](https://stackoverflow.com/a/8768805/1343969)，您只能在`navigationController`. 如果不是这种情况，您可以插入它们并隐藏导航栏，或者创建自定义 Segue。

# emacs - 如何在组织模式下使用 TODO 标签而不定义标题？

> ID：11718401
> 
> 赞同：19
> 
> 时间：2012-07-30T09:10:23.677
> 
> 标签：emacs, org-mode, todo

当我在 org-mode 中写下一些笔记时：

```
note 1
note 2
note 3 
```

然后想把'note 2'变成一个`TODO`项目，我需要把它变成一个标题，像这样：

```
note 1
* TODO note 2
note 3 
```

但是现在，“note 3”属于“note 2”标题。我知道的唯一解决方案是将其他笔记也变成头条新闻。

```
* note 1
* TODO note 2
* note 3 
```

但这很乏味。

我试过了

```
# TODO note 2 
```

但这也行不通。

如何在不实际更改大纲的情况下获得待办事项关键字项目？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-10T04:22:41.357

您的问题似乎[在 Worg FAQ](http://orgmode.org/worg/org-faq.html#closing-outline-sections)中。

正如 BeSlayed 提到的，您需要放入`(require 'org-inlinetask)`~/.emacs 文件（不要忘记`M-x eval-buffer`第一次）（或者您也可以这样做`M-x load-library RET org-inlinetask`……）。

然后，内联任务是具有 >15 星的标题，如此[处](http://orgmode.org/w/?p=org-mode.git;a=blob;f=lisp/org-inlinetask.el;h=01f861e611aee4c24fcf7184ea191962be83be70;hb=HEAD)所述，您可以使用`C-c C-x t`它们来插入它们。

# ios - 即使添加到 plist 中，来自 Cloudmade 的地图图块也不会加载

> ID：11718404
> 
> 赞同：0
> 
> 时间：2012-07-30T09:10:43.487
> 
> 标签：ios, cordova, ios-simulator, cloudmade, leaflet

我一直在尝试 iOS 和 PhoneGap 并取得了一些成功，但是当我使用 Leaflet 添加地理定位和地图时，即使我将它们作为外部主机添加到 Cordova.plist 中，我仍然无法加载瓷砖。

瓷砖从这里被调用：

```
 var map = new L.Map('map');

            var cloudmadeUrl = 'http://{s}.tile.cloudmade.com/MYAPIKEY/997/256/{z}/{x}/{y}.png',
            cloudmadeAttribution = 'Map data &copy; 2011 OpenStreetMap contributors, Imagery &copy; 2011 CloudMade',
            cloudmade = new L.TileLayer(cloudmadeUrl, {maxZoom: 18, attribution: cloudmadeAttribution}); 
```

即使我删除了协议，瓷砖也不会从 iOS 模拟器加载，所以我不确定我在做什么有什么问题。该应用程序编译得很好，没有错误，我使用的 CloudMade 密钥用于移动设备。我正在从 Leaflet 教程中学习这一点，并在学习使用 PhoneGap 进行 iOS 开发的过程中进行了一些非常小的修改。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T19:47:49.250

可能是你不打电话

```
cloudmade.addTo(map); 
```

# php - TCPDF 在最后一页更改页脚

> ID：11718406
> 
> 赞同：4
> 
> 时间：2012-07-30T09:10:48.797
> 
> 标签：php, tcpdf

我正在尝试使用 TCPDF 创建一个 pdf，并且在最后一页需要一个不同的页脚

使用以下代码，我可以在第一页获得不同的页脚，但不是最后一页

我看过几个关于这个的帖子，但不能让它工作

任何帮助实现这一点将不胜感激

```
public function Footer() {
    $tpages = $this->getAliasNbPages();
    $pages = $this->getPage();

    $footer = 'NORMAL' . $pages . $tpages;

    if ($pages == 1 ) $footer = 'FIRST' . $pages . $tpages;
    if ($pages == $tpages) $footer = 'LAST' . $pages . $tpages;

    $this->Cell(0, 10, $footer, 0, false, 'C', 0, '', 0, false, 'T', 'M');
} 
```

这给了我

第 1 页 - FIRST13 第 2 页 - NORMAL23 第 3 页（最后一页） NORMAL23

回答：

```
public function Footer() {
    $tpages = $this->getAliasNbPages();
    $pages = $this->getPage();

    $footer = 'NORMAL' . $pages . $tpages;

    if ($pages == 1 ) $footer = 'FIRST' . $pages . $tpages;
    if ($this->end == true) $footer = 'LAST' . $pages . $tpages;

    $this->Cell(0, 10, $footer, 0, false, 'C', 0, '', 0, false, 'T', 'M');
}

function display() {
    #function that has main text
    $this->AddPage();
    $html = '1st page';
    $this->writeHTMLCell($w=0, $h=0, $x='', $y='', $html, $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=true);
     $this->AddPage();
    $html = '2nd page';
    $this->writeHTMLCell($w=0, $h=0, $x='', $y='', $html, $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=true);

     $this->AddPage();
    $html = 'Last page';
    $this->writeHTMLCell($w=0, $h=0, $x='', $y='', $html, $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=true);   
  $this->end = true;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-22T08:59:49.533

您自己的答案并不能回答您在最后一页有不同页脚的问题。[我从 tcPDF 的作者本人](http://sourceforge.net/projects/tcpdf/forums/forum/435311/topic/3512586)
那里找到了以下代码，这正是您想要的。

```
class mypdf extends tcpdf {

  protected $last_page_flag = false;

  public function Close() {
    $this->last_page_flag = true;
    parent::Close();
  }

  public function Footer() {
    if ($this->last_page_flag) {
      // ... footer for the last page ...
    } else {
      // ... footer for the normal page ...
    }
  }
} 
```

现在该代码有效，但前提是您的最后一页不同。就我而言，我可以有 0-X 个最后一页，所以我仍然需要依赖页面计数器。这段代码对我有用：

```
class mypdf extends tcpdf {

  public $page_counter = 1;

  public function Make() {
    ...

    // Create your own method for determining how many pages you got, excluding last pages
    $this->page_counter = NUMBER;

    ...
  }

  public function Footer() {
    if ($this->getPage() <= $this->page_counter) {
      // ... footer for the normal page ...
    } else {
      // ... footer for the last page(s) ...
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-30T14:49:00.260

嗨我有类似的问题，这解决了它：

```
public $isLastPage = false;

public function Footer()
{
    if($this->isLastPage) {    
      $this->writeHTML($this->footer);
    }
}

public function lastPage($resetmargins=false) {
    $this->setPage($this->getNumPages(), $resetmargins);
    $this->isLastPage = true;
} 
```

希望它会帮助你:)它不完全是你想要的，但我认为它很容易调节:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-26T20:25:53.003

我希望这有帮助：

```
 if($this->page == 1){
        $this->Cell(0, 10, "ORIGINAL - Pagina '.$this->getAliasNumPage().'/'.$this->getAliasNbPages(), 0, false, 'C', 0, '', 0, false, 'T', 'M');
    } else {
        $this->Cell(0, 10, "COPY - Pagina '.$this->getAliasNumPage().'/'.$this->getAliasNbPages(), 0, false, 'C', 0, '', 0, false, 'T', 'M');
    } 
```

或者

```
define("titulos_pie_pdf", ",ORIGINAL, COPY, TITLE1, TITLE2, ...", true); 
```

然后

```
 $titulos = explode(",",titulos_pie_pdf);
    $this->Cell(0, 10, $titulos[$this->page]." - Pagina '.$this->getAliasNumPage().'/'.$this->getAliasNbPages(), 0, false, 'C', 0, '', 0, false, 'T', 'M'); 
```

我不是一个大程序员，但这段代码对我有帮助。

# svn - 如何将 SVN 存储库迁移到具有历史记录和不同目标路径的现有 SVN 存储库

> ID：11718408
> 
> 赞同：1
> 
> 时间：2012-07-30T09:10:51.553
> 
> 标签：svn, migrate

对于我当前的项目，我必须使用以下结构移动现有的 SVN 存储库：

```
/myproject/trunk/code 
```

至

```
/existing/server/projects/myproject/trunk/code 
```

在保留历史的同时。我可以访问这两个存储库。

我找到了当前的选项，但我不确定解决方案：

```
svnadmin dump / load - Can this load into an existing repository?
svnsync - Can this load into an existing repository with a different path? 
```

知道如何解决我的问题吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-30T09:13:31.293

如果您有相同的设置和版本的 SVN 服务器，为什么不停止两个服务器并制作一个 tarball 来复制？

*PS。使用根本没有数据库的 Git 是多么容易:-)*

# python - setuptools 如何处理传递依赖？

> ID：11718410
> 
> 赞同：2
> 
> 时间：2012-07-30T09:11:13.603
> 
> 标签：python, setuptools

假设我有一个 setuptools 项目，它依赖于

*   PyPi 包 A，v. 1.0。
*   PyPi 包 B，1.0 版。

并且包 B 依赖于 A, v. 2.0。

在 Java 中，我必须排除`pom.xml`或类似的传递依赖。它在 setuptools 中是如何工作的？同一个包的多个版本可以在一个安装中同时存在吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T09:22:35.553

这不适用于 setuptools；出于充分的理由，您不能像这样覆盖依赖项。

你描述的是一个破碎的依赖; 您必须手动解决此问题（可能通过将包 A 固定到 v. 2.0）。

# c# - 用于连接操作的 Lambda 表达式

> ID：11718413
> 
> 赞同：1
> 
> 时间：2012-07-30T09:11:23.180
> 
> 标签：c#, lambda

我有一个`SQL query`我在两张桌子上表演的。

这是我的查询

```
Select a.cSubGroupName,a.cAddedBy,a.dAddedOn,b.cGroupName 
from sys_Log_Account_SubGroup a,sys_Account_Primary_Group b 
where a.cAuthorizedStatus='Pending'  and a.nGroupCode=b.nGroupCode 
```

我正在尝试使用`Lambda expression`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:15:00.130

```
var query = tA
    .Where(a => a.cAuthorizedStatus == "Pending")
    .Join(tB, a => a.nGroupCode, b => b.nGroupCode, (a, b) => new 
    { 
        cSubGroupName = a.cSubGroupName, 
        cAddedBy = a.cAddedBy, 
        dAddedOn = a.dAddedOn, 
        cGroupName = b.cGroupName 
    }); 
```

或者

```
var query = tA
    .Join(tB, a => a.nGroupCode, b => b.nGroupCode, (a, b) => new 
    { 
        cSubGroupName = a.cSubGroupName, 
        cAddedBy = a.cAddedBy, 
        dAddedOn = a.dAddedOn, 
        cGroupName = b.cGroupName,
        cAuthorizedStatus = a.cAuthorizedStatus
    })
    .Where(j => j.cAuthorizedStatus == "Pending")
    .Select(j => new
    { 
        cSubGroupName = j.cSubGroupName, 
        cAddedBy = j.cAddedBy, 
        dAddedOn = j.dAddedOn, 
        cGroupName = j.cGroupName
    }); 
```

请注意，仅当您想明确排除`cAuthorizedStatus`返回集中的列时，才需要最后一次选择。

# objective-c - UITableView 创建 4 个正方形

> ID：11718414
> 
> 赞同：0
> 
> 时间：2012-07-30T09:11:28.597
> 
> 标签：objective-c, ios, xcode, uitableview

我想用 UITableView 创建日历视图

我希望每行有 4 个正方形，如下图所示：

你能帮我吗，我怎样才能在表格的一行中有 4 个正方形我知道如何创建具有不同部分和行的动态表格视图，但是我怎样才能在一行中有 4 个正方形？

提前致谢！

**Edit1：我在 viewDidLoad 中的代码：**

```
 - (void)viewDidLoad
{
[super viewDidLoad];
NSMutableArray *keys = [[NSMutableArray alloc] init];
NSMutableDictionary *contents = [[NSMutableDictionary alloc] init];

NSString *monKey = @"Monday";
NSString *tueKey = @"Tuesday";
NSString *wedKey = @"Wednday";
NSString *thuKey = @"Thusday";
NSString *friKey = @"Friday";
NSString *satKey = @"Satuarday";
NSString *sunKey = @"Sunnday";

[contents setObject:[NSArray arrayWithObjects:@"Work Time", @"Absence", nil] forKey:monKey];
[contents setObject:[NSArray arrayWithObjects:@"Compensation", @"Work Time", @"Absence", nil] forKey:wedKey];
[contents setObject:[NSArray arrayWithObjects:@"Compensation", @"Work Time", nil] forKey:tueKey];
[contents setObject:[NSArray arrayWithObjects:@"Compensation", @"Work Time", nil] forKey:thuKey];
[contents setObject:[NSArray arrayWithObjects:@"Compensation", @"Work Time", nil] forKey:friKey];
[contents setObject:[NSArray arrayWithObjects:@"Compensation", @"Work Time", nil] forKey:satKey];
[contents setObject:[NSArray arrayWithObjects:@"Compensation", @"Work Time", nil] forKey:sunKey];

[keys addObject:tueKey];
[keys addObject:monKey];
[keys addObject:wedKey];
[keys addObject:thuKey];
[keys addObject:friKey];
[keys addObject:satKey];
[keys addObject:sunKey];

[self setSectionKeys:keys];
[self setSectionContents:contents];

// Uncomment the following line to preserve selection between presentations.
// self.clearsSelectionOnViewWillAppear = NO;

// Uncomment the following line to display an Edit button in the navigation bar for this view controller.
self.navigationItem.leftBarButtonItem = self.editButtonItem;
UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd 
target:self action:@selector(addNewItem)];
self.navigationItem.rightBarButtonItem = rightButton;
} 
```

**我在 cellForRowAtIndexPath 中的代码**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithFrame:CGRectZero]; 
}
cell.selectionStyle = UITableViewCellSelectionStyleNone;

int column = 4;
for (int i=0; i<column; i++) {

    UIImageView *aBackgroundImageView = [[UIImageView alloc]initWithFrame:CGRectMake(32+184*i,10, 167,215)];
    aBackgroundImageView.tag = (column*indexPath.row)+i;
    [cell.contentView addSubview:aBackgroundImageView];
   // [aBackgroundImageView release];
}
return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:05:16.203

试试这个代码： -

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero] autorelease]; 
    }
   cell.selectionStyle = UITableViewCellSelectionStyleNone;
int column = 4;

   for (int i=0; i<column; i++) {

        UIImageView *aBackgroundImageView = [[UIImageView alloc]initWithFrame:CGRectMake(32+184*i,10, 167,215)];
        aBackgroundImageView.tag = (column*indexPath.row)+i;
        [cell.contentView addSubview:aBackgroundImageView];
        [aBackgroundImageView release];
    }
  return cell;
} 
```

列将在一个单元格中包含您想要的项目数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:25:56.147

如果您想创建日历视图，请查看[此代码](https://github.com/evolvIQ/iqwidgets/blob/master/IQCalendarView.m)以获得一些想法（取决于您想要实现的目标）。

要创建`UITableView`具有四个大小相同的单元格的行，只需实现`tableView:cellForRowAtIndexPath:`datasource 方法以创建一个具有例如四个大小相同的视图`UILabel`。

# javascript - 如何在使用 WEBKIT 和 GTK 制作的 python GUI 中显示自定义（使用 JAVASCRIPT）htm 页面

> ID：11718415
> 
> 赞同：1
> 
> 时间：2012-07-30T09:11:33.550
> 
> 标签：javascript, webkit, pygtk

我想使用 gtk 和 webkit 加载和显示一个 html 页面。这是我到目前为止所做的：

[加载一个 html 页面，更改其外观（通过 JAVASCRIPT）并使用 WEBKIT 在 PYGTK GUI 中显示它](https://stackoverflow.com/questions/11079966/load-an-html-page-change-its-look-and-display-it-in-a-pygtk-gui)

问题是我想通过去掉一些 div 来自定义这个页面的外观。

有人可以指出我正确的方向。

谢谢法布里齐奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:23:26.980

我会回答我自己的问题。

这个问题的解决方案实际上是[在这里](https://stackoverflow.com/questions/11748404/python-gtk-webkit-insert-javascript-after-gtk-main/11774423#11774423)提出的，可以通过使用 webkit 方法`execute_script`和代码（未经测试和不完整的代码）：

```
import gtk
import webkit

def load_finished(b):
    js = 'alert("a");'
    b.execute_script(js)

w = gtk.Window()
b = webkit.WebView()
w.add(b)
b.open('http://example.com')
w.show_all()

b.connect("load-finished", load_finished)

gtk.main() 
```

此处提供了完整的解决方案（也是我实施的解决方案）：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import gtk, webkit
# import jswebkit

# set of methods for the browser
def delete_event(widget, event, data=None):
    return False

def destroy(widget, data=None):
    gtk.main_quit()

def go_back(widget, data=None):
    browser.go_back()

def go_forward(widget, data=None):
    browser.go_forward()

def go_home(widget, data=None):
    browser.open("http://opencores.org/projects")

def load_www(widge, url):
    try:
        url.index("://")
    except:
        url = "http://" + url
    www_adr_bar.set_text(url)
    browser.open(url)

def load_www_bar(widge):    
    url = www_adr_bar.get_text()
    load_www(widge, url)

def update_buttons(widget, data=None):
    www_adr_bar.set_text( widget.get_main_frame().get_uri() )
    back_button.set_sensitive(browser.can_go_back())
    forward_button.set_sensitive(browser.can_go_forward())

def load_progress_amount(webview, amount):
    progress.set_fraction(amount/100.0)

    js_code = """
        var el1 = document.getElementsByClassName("top")[0]; 
        if (el1) el1.parentNode.removeChild(el1);

        var el2 = document.getElementsByClassName("banner")[0]; 
        if (el2) el2.parentNode.removeChild(el2);

        var el3 = document.getElementsByClassName("line")[0]; 
        if (el3) el3.parentNode.removeChild(el3);

        var el4 = document.getElementsByClassName("lang")[0]; 
        if (el4) el4.parentNode.removeChild(el4);

        var el5 = document.getElementsByClassName("mainmenu")[0]; 
        if (el5) el5.parentNode.removeChild(el5);

        var el6 = document.getElementsByClassName("pad_leftside")[0]; 
        if (el6) el6.parentNode.removeChild(el6);

        var el7 = document.getElementsByClassName("menu-tools")[0]; 
        if (el7) el7.parentNode.removeChild(el7);

        var el8 = document.getElementsByClassName("content")[0];
        if (el8){ var el81 = el8.nextElementSibling
                  if (el81 != null) el81.parentNode.removeChild(el81); }

        d1 = document.getElementsByClassName('main')[0];
        if(d1){d1.style.width="100%";
               d1.style.margin="0pt";}

        d2 = document.getElementsByTagName('body')[0];
        if(d2) d2.style.backgroundColor= "#FFF";

        d3 = document.getElementsByClassName('content')[0];
        if (d3) {d3.style.width="100%";
                 d3.style.paddingBottom ="20pt";}

        function getsupportedprop(proparray){
            var root=document.documentElement
            for (var i=0; i<proparray.length; i++){
                if (typeof root.style[proparray[i]]=="string"){
                    return proparray[i] 
        }}}

        // change some css3 proprieties 
        var boxshadowprop=getsupportedprop(['boxShadow', 'MozBoxShadow', 'WebkitBoxShadow'])
        d4 = document.getElementsByClassName('main')[0];
        if(d4) d4.style[boxshadowprop]='0px 0px 0px #FFF';
    """
    try:
        pass
        webview.execute_script(js_code)
        #ctx = get_js_context(webview)
        #ctx.EvaluateScript(js_code)
    except:
        pass

def load_started(webview, frame):
    progress.set_visible(True)

#def get_js_context(webview):
#    frame = webview.get_main_frame()
#    return jswebkit.JSContext(frame.get_global_context())

def load_finished(webview, frame):
    progress.set_visible(False)

def download(webview, download):

    import threading, urllib

    saveas = gtk.FileChooserDialog(title=None,
             action=gtk.FILE_CHOOSER_ACTION_SAVE,
             buttons=(gtk.STOCK_CANCEL, gtk.RESPONSE_CANCEL,
                      gtk.STOCK_SAVE, gtk.RESPONSE_OK))

    # get url under the mouse and propose it as file name
    downloadfrom = download.get_network_request().get_uri()
    saveas.set_current_name(downloadfrom.split('/')[-1]) # better stripping method is needed

    saveas.set_default_response(gtk.RESPONSE_OK)
    resp = saveas.run()

    if resp == gtk.RESPONSE_OK:
        downloadto = saveas.get_filename()
    saveas.destroy()

    if resp == gtk.RESPONSE_OK:
        # TODO this needs to go in a different thread
        # also, this will not work with the link: http://opencores.org/download,audio
        print 'Downloading: ', downloadfrom, 'and saving it in:', downloadto

        #urllib.urlretrieve(downloadfrom, downloadto)

        # multithreading version
        mythread = threading.Thread(target = urllib.urlretrieve,
                                   args = (downloadfrom,downloadto))
        mythread.start()

if __name__ == '__main__':
    win = gtk.Window(gtk.WINDOW_TOPLEVEL)
    win.set_size_request(920, 600)
    win.connect("delete_event", delete_event)
    win.connect("destroy", destroy)
    win.set_resizable(True)

    scroller = gtk.ScrolledWindow()
    browser = webkit.WebView()

    settings = browser.get_settings()
    settings.set_property('enable-default-context-menu', True)

    browser.connect("load-progress-changed", load_progress_amount)
    browser.connect("load-started", load_started)
    browser.connect("load-finished", load_finished)
    browser.connect("load_committed", update_buttons)
    #browser.connect("download-requested", download_link)
    browser.connect("download_requested", download)

    prj_button = gtk.Button('OpenCores')
    login_button = gtk.Button('Login')
    account_button = gtk.Button('My Account')
    faq_button = gtk.Button('FAQ')

    prj_button.connect("clicked", load_www,'http://opencores.org/projects')
    login_button.connect("clicked", load_www,'http://opencores.org/login')
    account_button.connect("clicked", load_www,'http://opencores.org/acc')
    faq_button.connect("clicked", load_www,'http://opencores.org/faq')

    www_adr_bar = gtk.Entry()
    www_adr_bar.connect("activate", load_www_bar)
    hlp_hbox = gtk.HBox()
    hlp_vbox = gtk.VBox()
    progress = gtk.ProgressBar()
    back_button = gtk.ToolButton(gtk.STOCK_GO_BACK)
    back_button.connect("clicked", go_back)
    forward_button = gtk.ToolButton(gtk.STOCK_GO_FORWARD)
    forward_button.connect("clicked", go_forward)
    #home_button = gtk.ToolButton(gtk.STOCK_HOME)
    #home_button.connect("clicked", go_home)

    # put stuff together
    hlp_hbox.pack_start(back_button,False, False,5)
    hlp_hbox.pack_start(forward_button,False, False)
    #hlp_hbox.pack_start(home_button,False, False)

    hlp_hbox.pack_start(prj_button,False, False,4)
    hlp_hbox.pack_start(login_button,False, False,4)
    hlp_hbox.pack_start(account_button,False, False,4)
    hlp_hbox.pack_start(faq_button,False, False,4)

    hlp_hbox.pack_start(www_adr_bar,True, True,4)

    hlp_vbox.pack_start(hlp_hbox,False, False,2)
    hlp_vbox.pack_start(scroller,True, True,4)
    hlp_vbox.pack_start(progress,False, False)
    scroller.add(browser)

    default_www = 'http://opencores.org/projects'
    www_adr_bar.set_text(default_www)

    # LOAD PAGE
    browser.open(default_www)
    back_button.set_sensitive(False)
    forward_button.set_sensitive(False)

    win.add(hlp_vbox)
    win.show_all()
    gtk.main() 
```

这将产生以下结果：

![在此处输入图像描述](../Images/8a46cc7e35cc81f941524587997b9602.png)

如果没有命令`webview.execute_script(js_code)`，效果将是：

![在此处输入图像描述](../Images/575823669c744693e6f0c6eb8886ce8b.png)

# c# - 使用 Firebug 和 Selenium 自动化页面加载性能测试

> ID：11718420
> 
> 赞同：2
> 
> 时间：2012-07-30T09:12:02.927
> 
> 标签：c#, selenium, firebug, webdriver

我正在使用 `firefox12`并下载`firebug-1.9.0.xpi`& `netExport-0.5.xpi`，但未创建 har 文件。可以做的任何改变。程序代码：

```
 class Program 
   {
    public IWebDriver webDriver;
    public InternetExplorerDriver IEDriver;
    static void Main(string[] args)
    {
        {
            FirefoxProfile profile = new FirefoxProfile();
            IWebDriver webDriver = new FirefoxDriver();
            try
            {
                profile.AddExtension(@"D:\LoadTesting\firebug-1.9.0.xpi");
                profile.AddExtension(@"D:\LoadTesting\netExport-0.5.xpi");
            }
            catch (IOException err)
            {

            }
            profile.SetPreference("app.update.enabled", false);
            String domain = "extensions.firebug.";
            string output_dir =
        Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
            output_dir = Path.Combine(output_dir, "Firebugnetexports");
            if (!Directory.Exists(output_dir))
            {
                Directory.CreateDirectory(output_dir);
            }

            profile.SetPreference(domain + "currentVersion", "1.8.2");
            profile.SetPreference(domain + "allPagesActivation", "on");
            profile.SetPreference(domain + "defaultPanelName", "net");
            profile.SetPreference(domain + "net.enableSites", true);
            profile.SetPreference(domain + "netexport.alwaysEnableAutoExport", true);
            profile.SetPreference(domain + "netexport.showPreview", false);
            profile.SetPreference(domain + "netexport.defaultLogDir", output_dir);
            try
            {

                webDriver.Navigate().GoToUrl("http://www.janodvarko.cz");
            }
            catch (Exception ex)
            {

            }
            webDriver.Quit();

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:28:43.923

您最好的选择可能是将[Browsermob 代理](http://opensource.webmetrics.com/browsermob-proxy/)与 Selenium 结合使用。它将允许您在没有插件的情况下运行 Firefox，并输出 har 文件。该项目有 Selenium 的创建者和其他一些知名人物。[Github 项目](https://github.com/webmetrics/browsermob-proxy)有一个示例，它显示了如何创建 Har 文件，您可以从那里编写自己的代码来处理它并确保满足您的性能指标，或者您包含的 javascript / css 已定位，将其写入磁盘等...

# java - 验证和授权 jax-rs 休息服务

> ID：11718421
> 
> 赞同：2
> 
> 时间：2012-07-30T09:12:05.203
> 
> 标签：java, spring, rest, restful-authentication

我有一个 Web 应用程序，我想制作一个 Android 版本，因此用户可以通过 Web（浏览器）或通过 android 访问该应用程序。我使用 Spring、Struts、Hibernate 构建了我的 Web 应用程序，并且我使用 jax-rs 创建了 rest 服务。但我很困惑如何验证和授权 android 请求。我的意思是，例如，当来自 android 的用户访问休息服务 XYZ 时，我混淆了如何检查 android 用户是否已登录并有权访问我的休息服务中的功能。我存储在数据库中的用户帐户和用户授权功能。当用户通过 android 访问应用程序时，我对如何保存用户日志感到困惑。我很困惑如何获取当前用户，以便我可以在我的 Web 应用程序上创建日志。我该如何解决这个问题，

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:44:46.417

如果您想要一些低级别的安全性，而不仅仅是在请求中设置一个标头

例如。**Requested_With**：**Android** 并在您的 Java 代码中使用[@HeaderParam](http://www.mkyong.com/webservices/jax-rs/get-http-header-in-jax-rs/)检查并验证是否找到了您设置的标头，然后继续。

# maven-2 - Maven 组装程序集

> ID：11718422
> 
> 赞同：0
> 
> 时间：2012-07-30T09:12:11.530
> 
> 标签：maven-2, maven-assembly-plugin

我有一个多模块 maven 2 项目，它使用程序集（在打包阶段通过 maven-assembly-plugin）以某种方式打包每个模块。然后我尝试使用另一个模块将这些程序集组合成一个可分发的“安装程序”包。对于安装程序模块，我可以从我的其他项目中看到默认 jar，但我所做的任何事情似乎都无法让我访问额外的程序集。从文档看来，这应该是可能的，所以我认为我要么做错了什么，要么是 Maven 中的错误？我已经坚持了好几天了，所以任何帮助都将不胜感激！

继评论之后，我在 github 上创建了一个测试项目来演示这一点，proj1 模块创建了 2 个 jar 文件。我希望“包”模块中生成的程序集包含它们，但它不只包含主项目 jar。

[https://github.com/unluckypixie/maven-packaging-test](https://github.com/unluckypixie/maven-packaging-test)

请注意：我知道 proj1 的 jar 的内容在这个例子中是相同的 - 但它们不是我的现实生活情况，我认为 proj1 文件中的内容与问题无关。

如果你运行：

```
mvn clean package 
```

你`ls proj1/target/*.jar`应该看到：

```
proj1/target/proj1-1.0-SNAPSHOT.jar
proj1/target/proj1-1.0-SNAPSHOT-proj1-assembly.jar 
```

如果您查看包 jar ：

```
jar -tvf package/target/package-1.0-SNAPSHOT-package-assembly.jar 
```

你会看到类似的东西：

```
 0 Mon Jul 30 16:27:00 BST 2012 META-INF/
   106 Mon Jul 30 16:26:58 BST 2012 META-INF/MANIFEST.MF
     0 Mon Jul 30 16:21:46 BST 2012 package/
  2358 Mon Jul 30 16:21:44 BST 2012 package/proj1-1.0-SNAPSHOT.jar
  2363 Mon Jul 30 16:21:46 BST 2012 package/package-1.0-SNAPSHOT.jar 
```

我想知道为什么`proj1/target/proj1-1.0-SNAPSHOT-proj1-assembly.jar`不在那里。

包装组件如下所示：

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd">

    <id>package-assembly</id>

    <formats>
        <format>jar</format>
    </formats>

    <includeBaseDirectory>false</includeBaseDirectory>

    <moduleSets>
        <moduleSet>
            <useAllReactorProjects>true</useAllReactorProjects>

            <includes>
                <include>org.test.parent:*</include>
            </includes>

            <binaries>
                <outputDirectory>/package/</outputDirectory>
                <unpack>false</unpack>
            </binaries>
        </moduleSet>
    </moduleSets>
</assembly> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:36:37.950

I have managed to get this working by using the attachmentClassifier in my assembly file, e.g:

```
 <moduleSet>
        <useAllReactorProjects>true</useAllReactorProjects>

        <includes>
            <include>org.me:*</include>
        </includes>

        <binaries>
            <outputDirectory>/output/dir</outputDirectory>
            <unpack>false</unpack>
            <includeDependencies>false</includeDependencies>
            <attachmentClassifier>my-assembly</attachmentClassifier>
        </binaries>
    </moduleSet> 
```

Thanks to khmarbaise for your help, I might not have used your solution but it helped me get there!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:04:57.580

我[根据您的帖子创建了一个示例项目](https://github.com/khmarbaise/assembly-of-assemblies)（对其进行了一些修复），如果我做了

```
mvn clean package 
```

我在 package/target/package-1.0.0-SNAPSHOT-package-assembly.zip 下找到，其中包含

```
package/
package/proje1-1.0.0-SNAPSHOT.jar
package/package-1.0.0-SNAPSHOT.jar 
```

这对我来说看起来不错。问题是你期待什么？

# regex - 使用ant从文件中提取值

> ID：11718425
> 
> 赞同：6
> 
> 时间：2012-07-30T09:12:16.140
> 
> 标签：regex, ant

文件中存在以下行。我想从此文件中提取多个数据。

> 当前用户构建列表的数量：23
> 
> *   'RevisionBuild' 运行时间（分钟）= 8.40
> 
> [构建] RC = 0

我使用以下正则表达式从该文件中检索值 23

```
<ac:for param="line" list="${logFileContent}" delimiter="${line.separator}">
  <sequential>                          
<propertyregex property="noOfBuildlists"
         input="@{line}"
     regexp="(.*)Number of current user build lists: (.*)$"
     select="\2"/>  
  </sequential>
</ac:for> 
```

但是当我尝试获取其他行时，相同的正则表达式不会获取任何值，例如 regexp="(. *)[revBuild] RC = (.* )$" 或 regexp="(. *)'RevisionBuild' 运行时间（以分钟为单位） ) = (.* )$" 其中提取的值应分别为 0 和 8.40。

有人可以帮忙吗？谢谢， 阿尔西

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T10:00:05.717

我认为这是您感兴趣的内容。在如下输入文件中

```
Number of current user build lists: 23
'RevisionBuild' Run time (in minutes) = 8.40
[Build] RC = 0 
```

当我在目标以下执行时

```
<project name="BuildModule" basedir="." default="extract.nums">
    <taskdef resource="net/sf/antcontrib/antlib.xml" />
    <property environment="env" />
    <loadfile property="file" srcfile="${basedir}/inputLog.log"/>
    <target name="extract.nums">
        <for param="line" delimiter="${line.separator}" list="${file}">
            <sequential>
                <propertyregex property="noOfBuildlists" input="@{line}" regexp="Number of current user build lists:\s*([0-9]+)$" select="\1" />
                <propertyregex property="revisionBuild" input="@{line}" regexp="'RevisionBuild' Run time\s*\(in minutes\)\s*=\s*([0-9\.]+)$" select="\1" />
                <propertyregex property="rcBuild" input="@{line}" regexp="\[Build\] RC\s*\=\s*([0-9]+)$" select="\1" />
            </sequential>
        </for>
        <echo message="Current user build : ${noOfBuildlists}" />
        <echo message="Revision Build : ${revisionBuild}" />
        <echo message="RC Build : ${rcBuild}" />
    </target>
</project> 
```

我得到低于输出。

```
[echo] Current user build : 23
[echo] Revision Build : 8.40
[echo] RC Build : 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-12T11:14:23.953

使用`propertyregex`时提示错误`if doesn't support the nested "condition" element`。我的`{android.sdk.air}/tools/ant/build.xml`. 所以我试图找到一个标准Ant可以呈现的解决方案。我做到了。

试试这个：

```
<loadfile
    encoding="UTF-8"
    property="property.for.your.string"
    srcFile="your/file/path" >
        <filterchain>
            <tokenfilter>
                <containsregex
                    pattern="Number of current user build lists:\s*([0-9]+)$"
                    replace="\1" />
            </tokenfilter>
        </filterchain>
</loadfile>

<echo message="DEBUG LOG: property.for.your.string = ${property.for.your.string}" /> 
```

这让我想知道为什么ant将属性命名为“replace”，这导致了我的误解。

# android - 如何将数据从应用程序发送到 AppWidgetProvider？

> ID：11718426
> 
> 赞同：3
> 
> 时间：2012-07-30T09:12:19.563
> 
> 标签：android, android-widget, android-preferences

我被困在一个特定的场景中。用户从应用程序更新时间后，我需要立即更新我的小部件。我确实尝试通过 Intent Extras 发送数据来进行广播，但没有这样做。目前，我有我的数据，`AppWidgetProvider`我需要将此数据发送到服务

```
public class CountdownWidget extends AppWidgetProvider {
    // SharedPreferences userDefaults;

    // update rate in milliseconds
    public static final int UPDATE_RATE = 1800000; // 30 minute

    public static String nameOne = "";

    @Override
    public void onDeleted(Context context, int[] appWidgetIds) {
        for (int appWidgetId : appWidgetIds) {
            setAlarm(context, appWidgetId, -1);
        }
        super.onDeleted(context, appWidgetIds);
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

        Bundle extras = intent.getExtras();
        nameOne = extras.getString("NAME_ONE");

        Log.e("Name: ", nameOne);

        super.onReceive(context, intent);
    }

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
                         int[] appWidgetIds) {

        for (int appWidgetId : appWidgetIds) {
            setAlarm(context, appWidgetId, UPDATE_RATE);
        }
        super.onUpdate(context, appWidgetManager, appWidgetIds);
    }

    public static void setAlarm(Context context, int appWidgetId, int updateRate) {

        // Log.e("", "Updating Widget Service");

        PendingIntent newPending = makeControlPendingIntent(context,
                CountdownService.UPDATE, appWidgetId);
        AlarmManager alarms = (AlarmManager) context
                .getSystemService(Context.ALARM_SERVICE);
        if (updateRate >= 0) {
            alarms.setRepeating(AlarmManager.ELAPSED_REALTIME,
                    SystemClock.elapsedRealtime(), updateRate, newPending);
        } else {
            // on a negative updateRate stop the refreshing
            alarms.cancel(newPending);
        }
    }

    public static PendingIntent makeControlPendingIntent(Context context,
                                                         String command, int appWidgetId) {
        Intent active = new Intent(context, CountdownService.class);
        active.setAction(command);
        active.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
        // this Uri data is to make the PendingIntent unique, so it wont be
        // updated by FLAG_UPDATE_CURRENT
        // so if there are multiple widget instances they wont override each
        // other
        Uri data = Uri.withAppendedPath(
                Uri.parse("countdownwidget://widget/id/#" + command
                        + appWidgetId), String.valueOf(appWidgetId));
        active.setData(data);
        return (PendingIntent.getService(context, 0, active,
                PendingIntent.FLAG_UPDATE_CURRENT));
    }
} 
```

如您所见`nameOne`，是一个静态变量。我可以使用 getExtras 接收有关该`onReceive`方法的数据，但我无法将此数据传递给我的`CountdownService`服务。

我确实尝试`CountdownWidget.nameOne`过，但仍然无法获取服务中的数据。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-11T03:25:40.610

我通过在我为更新小部件而构建的意图中添加额外内容来做到这一点。此外，当小部件具有信息时，它可以再次传递到填充小部件视图的 RemoteViewsService

在我的 UpdateWidget 辅助方法中，我传入了 userId（由应用程序中的各种活动调用，这些活动可能需要通知小部件它需要自我更新）。

```
public static void updateWorkoutsWidget(Context context) {
    Intent intent = new Intent(context, WorkoutsWidget.class);
    intent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
    intent.putExtra(WorkoutsWidgetService.USER_ID_EXTRA, userId);
    int[] ids = AppWidgetManager.getInstance(context).getAppWidgetIds(new ComponentName(context, WorkoutsWidget.class));
    if(ids != null && ids.length > 0) {
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, ids);
        context.sendBroadcast(intent);
    } 
```

然后小部件有一个字段来保存 userId 并在 onReceive 中更新它。我将它与用于创建集合适配器的 Intent 一起传递给 RemoteViewsService。

```
public class WorkoutsWidget extends AppWidgetProvider {
    private long userId;

    @Override
    public void onReceive(Context context, Intent intent) {
        if(intent.getLongExtra(WorkoutsWidgetService.USER_ID_EXTRA, -1) != -1) {
             userId = intent.getLongExtra(WorkoutsWidgetService.USER_ID_EXTRA, -1);
        }
        super.onReceive(context, intent);
    }

    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
        // update each of the app widgets with the remote adapter
        for (Integer widgetId : appWidgetIds) {
            Intent intent = new Intent(context, WorkoutsWidgetService.class);
            intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, widgetId);
            intent.putExtra(WorkoutsWidgetService.USER_ID_EXTRA, userId);
            intent.setData(Uri.parse(intent.toUri(Intent.URI_INTENT_SCHEME)));

            RemoteViews rv = new RemoteViews(context.getPackageName(), R.layout.widget_workouts);
            rv.setRemoteAdapter(R.id.workouts_list, intent);

            rv.setEmptyView(R.id.workouts_list, R.id.empty_view);

            //(Pending intent stuff ommitted for brrevity)

            appWidgetManager.updateAppWidget(widgetId, rv);
        }
        super.onUpdate(context, appWidgetManager, appWidgetIds);
    }
} 
```

然后所有这些都直接通过 RemoteViewsService 传递到它的 RemoteViewsFactory 中：

```
public class WorkoutsWidgetService extends RemoteViewsService {
    public static final String TRACK_WORKOUT_ACTION = "com.bodybuilding.mobile.service.TRACK_WORKOUT_ACTION";
    public static final String USER_ID_EXTRA = "userId";

    @Override
    public RemoteViewsFactory onGetViewFactory(Intent intent) {
        return new WorkoutWidgetViewsFactory(this.getApplicationContext(), intent);
    }

    class WorkoutWidgetViewsFactory implements RemoteViewsFactory, ServiceConnection {

        WorkoutWidgetViewsFactory(Context context, Intent intent) {
            this.context = context;
            appWidgetId = intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, -1);
            userId = intent.getLongExtra(USER_ID_EXTRA, -1);
        }

        //Lots of other stuff in here
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:28:07.393

您必须创建一个更新小部件的服务，查看[本教程](http://www.vogella.com/articles/AndroidWidgets/article.html#updates)（第 4 部分），您可以尝试通过静态变量传输数据。

# java - 替换Java中的单引号

> ID：11718429
> 
> 赞同：0
> 
> 时间：2012-07-30T09:12:24.617
> 
> 标签：java, escaping

我开发了一个 java 应用程序，用于读取给定的 xml 文件并`SQL INSERT or UPDATE statements`使用 xml 文件中的数据进行制作。有趣的是，有一些陈述如下。

```
INSERT INTO BUYERS(BUYER_ID, BUYER_NAME) VALUES ('100', 'A's Shop') 
INSERT INTO BUYERS(BUYER_ID, BUYER_NAME) VALUES ('101', 'ABC's Shop') 
INSERT INTO BUYERS(BUYER_ID, BUYER_NAME) VALUES ('102', 'ZXCVBN's Shop') 
INSERT INTO BUYERS(BUYER_ID, BUYER_NAME) VALUES ('103', 'RR's Shop') 

UPDATE BUYERS SET BUYER_NAME = 'MKO's Shop' WHERE BUYER_ID = 151
UPDATE BUYERS SET BUYER_NAME = 'DDD's Shop' WHERE BUYER_ID = 160 
```

当我尝试执行这些语句时，我得到一个错误，`ORA-00917: missing comma`因为有一个`single quote`in 值`BUYER_NAME`。

我试图`single quote`用`replace(char oldChar, char newChar)`java中的方法替换这个。但它替换`single quotes`了我的查询中的所有内容。

我只需要替换`single quote`with `BUYER_NAME`。我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:17:08.437

尝试使用preparedStatement()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:16:48.280

就像 Jon Lin 评论的那样，最好的方法可能是更改您的构造方法，以便在创建插入时从 XML 文本中转义所有“危险”字符。

这样您就可以准确控制 Insert 语句中的结果。

请记住，如果 XML 不是由您构建的，那么由于 SQL 注入的可能性，简单地连接字符串来构建插入/更新语句可能会非常危险。

几乎总是，通过 PreparedStatemens 插入和更新数据是执行此类操作的最佳方式，但很难从问题中说出您的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T09:17:36.157

因为您正在解析 xml 并制作查询字符串，所以请确保在制作查询语句之前替换单引号

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T09:28:23.110

尝试使用它来替换这个单引号

```
String str = 'A's Shop'

str=replace(str," ' "," '' ") // Here it will store as "A''s Shop"

Or preparedStatement(). 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T09:38:50.093

一种安全（且简单）的方法是构建您的 StringBuilder

```
StringBuilder sb = new StringBuilder();
sb.append("UPDATE BUYERS SET BUYER_NAME = '";
sb.append("MKO''s Shop" ) // or the (String) parameter build otherwhere
sb.append("' WHERE BUYER_ID = ");
sb.append(100); // Integer are transormed in String here 
```

并使用`sb.toString();`

*编辑：*替换为`''`字符串内的双精度

你可以做同样的事情

```
INSERT INTO BUYERS(BUYER_ID, BUYER_NAME) VALUES ('
100
', '
name''s 
') 
```

# ios - 在 UINavigationController 上按下“后退按钮”时的自定义操作

> ID：11718430
> 
> 赞同：0
> 
> 时间：2012-07-30T09:12:27.910
> 
> 标签：ios, button, uinavigationcontroller, back, pressed

我正在使用故事板来创建我的应用程序，并且我有一个导航控制器，可以在页面之间来回导航。现在，当它返回到页面时（例如，当用户点击返回按钮时），我需要用户返回到的页面进行刷新（或者换句话说，再次执行 viewDidiLoad 方法）。有没有办法将导航控制器配置为那个？当导航控制器上的“后退”按钮被录音时，有没有办法调用方法（任何方法 - 如果它是我必须为此目的创建的特殊方法，我不开车）？

谢谢您的支持！！非常感谢任何帮助=]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:15:13.353

您可以采取行动，`viewWillAppear`但`viewDidAppear`通常最好使用自定义 @protocol 和委托模式在 2 个视图控制器之间进行通信。

# android - 广播接收器收听特定的包删除

> ID：11718431
> 
> 赞同：0
> 
> 时间：2012-07-30T09:12:36.937
> 
> 标签：android, broadcastreceiver

我的应用程序有一个广播接收器，它监听卸载包，然后它将根据需要启动一个透明的活动。（我的应用程序本身可以选择卸载仅与我的其他应用程序相关的包）我在清单中注册了我的接收器，如下所示。

```
<receiver android:name=".PackageRemoveReceiver">
        <intent-filter>
            <action android:name="android.intent.action.PACKAGE_REMOVED"/> 
            <data android:scheme="package"/>
        </intent-filter>
    </receiver> 
```

我的接收器类如下。

```
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub 
    this.context = context;
    boolean replacing = intent.getBooleanExtra(Intent.EXTRA_DATA_REMOVED, false);
    Log.d("Log","getting receivers");
    if(replacing){
        ......
                    ......

        startActivity(context);
    } 

   private void startActivity(Context context) {
    // TODO Auto-generated method stub 
    Intent i = new Intent(context, TransparentActivity.class);
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(i);

} 
```

因此，在听取了意图之后，它正在打开我的活动。到这里它工作正常。

但是，每当我从设置中卸载不同的应用程序（我的应用程序除外）时，它总是在监听并打开我的透明活动。

每当删除特定软件包时，我只想运行广播。有可能吗，如果可以，该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:07:33.230

检查包名称`onReceive()`：

```
@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getDataString().equals("package:your.package.name")) {
        ...
} 
```

# wget - 如果提供 IP 而不是域名，wget 不会镜像

> ID：11718432
> 
> 赞同：0
> 
> 时间：2012-07-30T09:12:39.963
> 
> 标签：wget, mirroring

我正在尝试使用 wget 进行站点镜像，但遇到了一个奇怪的行为。

假设我正在通过以下方式镜像一个名为 www.example.com 的内部站点，一切似乎都运行良好：

```
wget -mkE http://www.example.com 
```

但是，由于我需要通过 IP 而不是域名访问服务器，所以我尝试使用：

```
wget -mkE -D www.example.com --header "Host: www.example.com" http://IPv4_ADDR 
```

但在这种情况下，它只下载第一页并退出。

任何想法？

# ruby-on-rails - Ruby On Rails 应用程序和 Openshift 中的 Elasticsearch

> ID：11718433
> 
> 赞同：2
> 
> 时间：2012-07-30T09:12:52.070
> 
> 标签：ruby-on-rails, elasticsearch, tire, openshift

如何在我的 R&R 应用程序中安装/使用 elasticsearch？

[本教程](https://openshift.redhat.com/community/blogs/searching-with-elasticsearch-on-openshift)不适用于我的应用程序，因为我的应用程序使用其他端口 8080，而 elasticsearch 使用相同。

编辑

我使用以下设置更改端口：

Elasticsearch 的设置：

```
network.host: ${OPENSHIFT_INTERNAL_IP}
transport.tcp.port: 15001
http.port: 15002
discovery.zen.ping.multicast.enabled: false
discovery.zen.ping.unicast.hosts: [] 
```

轮胎设置：

```
Tire.configure do
  url "127.12.64.1:15001"
  logger "#{Rails.root}/log/elasticsearch.log", level: 'debug'
end 
```

我有这个错误：

> 请求超时 (RestClient::RequestTimeout)

如果我将端口更改为 15002，我也会有一些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:51:11.117

您可以使用相同的方法...只需绑定到 15000+ 端口。然后，您可以从您的应用 $OPENSHIFT_INTERNAL_IP:$YOUR_PORT 连接到 Elastic。

# php - 如何按降序对 id 和 sub_id 进行排序？

> ID：11718434
> 
> 赞同：3
> 
> 时间：2012-07-30T09:12:51.413
> 
> 标签：php, mysql, sql

我的桌子就像...

```
id  Sub_id  name    path    date

1   33  Sanjay  Something here to all   Some thing
2   33  Sanjay      
3   34  Fariya      
4   35  Neeraj      
5   35  Neeraj      
6   32  Mukesh      
7   37  Ravi        
8   32  Mukesh      
9   32  Mukesh      
10  32  Mukesh 
```

当我使用此查询时-表名是画廊...

`$sql="select * from (select * from gallery order by id desc 4) gallery group by Sub_id desc limit 4";`

我需要这种格式

```
id  Sub_id  name    path    date
10  32  Mukesh  Something here to all   Some thing
7   37  Ravi        
5   35  Neeraj      
3   34  Fariya 
```

请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:34:28.727

以您的原始 SQL 为基础（如果您想先对 id 排序，然后对 sub_id 排序）：

```
$sql="select * from gallery group by sub_id order by id desc, subid desc limit 0,4"; 
```

如果不打算消除“重复”，则可以使用以下 sql 代替上述 sql：

```
$sql="select * from gallery order by id desc, subid desc limit 0,4"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:34:40.207

请试试这个

```
select * from  (select max(id), sub_id from gallery group by sub_id order by id desc) where rownum <=4; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T09:24:44.490

尝试这个 ：

```
SELECT 
    MAX(id), 
    Sub_id, 
    name, 
    path, 
    date 
FROM 
    gallery 
GROUP BY 
    Sub_id
ORDER BY 
    id DESC 
LIMIT 4; 
```

# oauth - 带有 passport.js 示例的 tower.js

> ID：11718437
> 
> 赞同：0
> 
> 时间：2012-07-30T09:13:02.317
> 
> 标签：oauth, towerjs, passport.js

我是 tower.js 的新手，我想为 facebook 身份验证集成 passport.js，请任何人都可以给我一个简短但详细的示例，如何集成登录功能以及将代码放在哪里。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:43:08.703

Here's an example that should definitely get you started: [Tower.js with Passport demo app](https://github.com/viatropos/tower-authentication-example)

My understanding is that its still incomplete, but should at least give you a starting point.

# c# - 读取字符串中的特定行？

> ID：11718441
> 
> 赞同：1
> 
> 时间：2012-07-30T09:13:17.760
> 
> 标签：c#

这是我的字符串：

```
string conSTR = "Data Source=(local);Initial Catalog=MyDB;User ID=sa"; 
```

我只想得到 string`"(local)"`和word 任何`"MyDb"`人`"sa"`都可以建议如何在 C# 中做到这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T09:15:30.313

假设这实际上是一个 SQL 连接字符串，您可以使用[`SqlConnectionStringBuilder`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.aspx)- 将字符串传递给构造函数，然后询问适当的属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T09:15:48.433

使用[`SqlConnectionStringBuilder`](http://msdn.microsoft.com/en-us/library/d7z89tex.aspx)：

```
var builder = new SqlConnectionStringBuilder(conSTR); 
```

然后您可以读取构建器的属性，例如[. `DataSource`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.datasource.aspx),[`.UserID`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.userid.aspx)和[`.Password`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.password.aspx).

# javascript - 仅加载 jqGrid 中的可选列

> ID：11718442
> 
> 赞同：4
> 
> 时间：2012-07-30T09:13:22.647
> 
> 标签：javascript, jquery, ajax, database, jqgrid

在[jqGrid 中](http://www.trirand.com/jqgridwiki/doku.php?id=start)，我使用可选列来显示列。现在，如果我想将这些选定的列名存储在数据库中，并且在加载网格时我只想显示之前选择的列，那么我该如何实现呢？

另一点是当我只加载可选择的列时，如果我按下添加按钮，那么它只显示在 jqGrid 中选择的字段，但我想在添加表单中创建记录时显示所有字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:44:58.493

您可以将数据库中的字段保存为 CSV 或任何内容，并在获取时指定 colModel 和 colNames，这将使网格仅显示指定的字段。

# layout - 将组件移出 ScrollPane - JavaFX

> ID：11718450
> 
> 赞同：3
> 
> 时间：2012-07-30T09:13:51.537
> 
> 标签：layout, javafx-2, scrollpane

我请求您的帮助，因为我在 JavaFX 中遇到了 ScrollPane 的问题。

我在 scrollPane 中添加了一个 Group，将 scrollpane 添加到 Scene，最后将其放入 JFXPanel，因为我在 Swing 应用程序中使用它并且它运行良好，接下来我将组件添加到 Group 中（组件是指节点的集合像矩形等...）。效果很好，但是当我想将一个组件移出滚动窗格布局时，组件的移动是无法控制的，它开始移动得非常快，我不明白为什么。当组件的边框接触到滚动窗格布局的边框时，它就开始麻烦了。我尝试改用 ScrollBar，但似乎 ScrollPane 是最合适的对象。

有我用来创建我的视图的代码：

```
public void createView() {
    this.architectureJFXPanel = new JFXPanel();
    this.group = new Group();
    this.scrollPane = new ScrollPane();

    this.scrollPane.setContent(group);
    this.scrollPane.setOnKeyPressed(new KeyPressed());

    Platform.runLater(new Runnable() {
        @Override
        public void run() {
            Scene scene = new Scene(scrollPane, Color.WHITE);
            architectureJFXPanel.setScene(scene);
        }
   });
} 
```

为了将组件放入我使用的视图`group.getChildren.add()`中，然后我将 JFXPanel 放入 Swing 应用程序中。

这是我正在尝试做的一个例子。您可以在图片上看到我尝试将组件移出布局：

![在此处输入图像描述](../Images/530ac5f65a72c5b1483696d7300c1e0c.png)

因此，如果有人已经遇到这种问题并且可以帮助我，我会非常感激 :) 询问我是否需要更多信息来了解问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:43:17.427

这是我使用 ScrollBar 的 ScrollPane 的解决方法。

```
public void setStyle() {
    // In my program, TextField controls were generate at run-time, so the prefer height is calculated based on number of controls       
    int preHeight = 1000;
    Group root = new Group();

    // This anchor pane contains all control.
    AnchorPane anchorPane = new AnchorPane();
    // TODO: Add control into this anchor pane
    // anchorPane.getChildren().addAll();

    final ScrollBar sc = new ScrollBar();
    root.getChildren().addAll(anchorPane, sc);

    // Set default size for scene to 800 x 600
    int sceneW = 800;
    int sceneH = 600;
    final Scene scene = new Scene(root, sceneW, sceneH);

    // Setting for the scroll bar
    sc.setLayoutX(scene.getWidth()- sc.getWidth()/2 - 1);
    sc.setMin(0);
    sc.setOrientation(Orientation.VERTICAL);
    sc.setPrefHeight(sceneH);
    sc.setMax(preHeight - sceneH);

    // In case prefer height is smaller than scene height then hide the scroll bar
    if(preHeight < sceneH) {
        sc.setVisible(false);
    }

    scene.setRoot(root);

    // Change the scroll bar and the anchor pane when user change scene's width
    scene.widthProperty().addListener(new ChangeListener<Number>() {

        @Override
        public void changed(ObservableValue<? extends Number> arg0,
                Number arg1, Number arg2) {
            sc.setLayoutX(arg2.doubleValue()- sc.getWidth()/2 - 1);
            anchorPane.setPrefWidth(arg2.doubleValue() - sc.getWidth());
        }
    });

    // Change the scroll bar and the anchor pane when user change scene's height
    scene.heightProperty().addListener(new ChangeListener<Number>() {

        @Override
        public void changed(ObservableValue<? extends Number> arg0,
                Number arg1, Number arg2) {
            sc.setMax(preHeight - arg2.doubleValue());
            if(arg2.doubleValue() >= preHeight) {
                sc.setVisible(false);
            }
            else {
                sc.setVisible(true);
            }
            sc.setPrefHeight(arg2.doubleValue());
            anchorPane.setPrefHeight(arg2.doubleValue());
        }
    });

    // Change the Y position of anchor pane when user scroll the scroll bar
    sc.valueProperty().addListener(new ChangeListener<Number>() {
        public void changed(ObservableValue<? extends Number> ov,
                Number old_val, Number new_val) {
            anchorPane.setLayoutY(-new_val.doubleValue());
        }
    });

    anchorPane.setPrefSize(scene.getWidth() - sc.getWidth(), scene.getHeight());
} 
```

这种方法存在一个问题，即如果用户使用 Tab 键在屏幕中的控件之间导航，则滚动条的 Y 位置不会更改为相应的位置。您可以通过处理锚窗格中可聚焦控件的焦点事件并相应地设置滚动条的 Y 位置来解决此问题。

# java - 使用 Java 进行选择性 HTML 转义

> ID：11718451
> 
> 赞同：0
> 
> 时间：2012-07-30T09:13:51.793
> 
> 标签：java, spring, security, xss, apache-stringutils

中是否有任何内容`JavaSE`，`Spring`或者`Apache Commons StringUtils`允许我从字符串中删除 HTML，但也提供我希望允许的 HTML 实体的白名单？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:24:23.173

你可以看看 OWASP [AntiSamy 项目](https://www.owasp.org/index.php/Category%3aOWASP_AntiSamy_Project)。它具有默认策略文件，但您可以根据需要对其进行定制；有关详细信息，请参阅[开发人员指南](http://code.google.com/p/owaspantisamy/downloads/detail?name=Developer%20Guide.pdf&can=2&q=)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:27:04.857

使用正则表达式是这里的答案。在我可用的任何库中都没有解决此问题的方法。

# ruby-on-rails - Rails will_paginate 使用 :conditions，仅当参数存在于 URL 中时

> ID：11718454
> 
> 赞同：2
> 
> 时间：2012-07-30T09:13:58.243
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我正在尝试从数据库中获取分页记录列表，条件在 url 中给出。

例如：如果 url 是这样的：`?name=Michael&age=20` 它应该显示所有 20 岁的 Michaels 等。

但是如果 url 是 like `&age=20`，它应该显示所有 20 岁的人并忽略“name”参数。

我在 1 页上对 2 个列表进行分页，它们都来自同一型号，仅因位置而异，所以我在控制器中定义了 2 个分页：

```
@boss = Person.paginate(:page => params[:boss_page], :conditions => "position = 1")
@manager = Person.paginate(:page => params[:manager_page], :conditons => "position = 2") 
```

现在如何仅在参数存在的情况下从 URL 添加条件？

我正在尝试这种方式：

```
conditions = []
conditions << [ "age = ?", params[:age] ] if params[:age].present? 
```

但是当我在 URL 中传递参数时它给了我错误：

```
undefined method `%' for ["age = ? ", "1"]:Array 
```

下一个问题是如何将此数组中的条件与条件“position = 1”合并？

更新：我了解如何使用条件进行分页，但我只是不明白根据 GET 参数指定条件的最佳方法。我总是可以这样做：

```
if params[:age].present?
@boss = version with age conditons
else if params[:age].present? and params[:name].present?
@boss = version with age and name
else if params[:name].preset?
@boss = version with name only 
```

但我相信在 Rails 中它可以做得更简单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:58:14.687

第一个选项：您可以手动根据传递的参数粘合条件，构建自定义命名范围，如果传递的参数不为空（来自一个旧项目的示例），它将添加一个 where：

```
# custom scope in model
# call in controller by Model.email_contains(params[:email])
def self.email_contains(searched_email)
  if(searched_email.blank?)
    all # scoped
  else
    where(:email => searched_email)
  end
end 
```

第二种选择，只需使用 ransack（或其前身 meta_search）：[https ://github.com/ernie/ransack](https://github.com/ernie/ransack)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:35:35.497

```
@boss = Person.where(:position => 1).paginate(:page => params[:boss_page])
@manager = Post.where(:position => 2).paginate(:page => params[:manager_page]) 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-31T15:44:08.843

最后我以另一种对我来说更简单的方式做到了：

```
@p = Person.scoped
@p = @p.where(:age => params[:age]) if params[:age].present?
@p = @p.where(:name => params[:name]) if params[:name].present?

@boss = @p.paginate(:page => params[:boss_page], :conditions => "position = 1")
@manager = @p.paginate(:page => params[:manager_page], :conditons => "position = 2") 
```

它就像一个魅力。

# twitter-bootstrap - 引导跨度

> ID：11718457
> 
> 赞同：17
> 
> 时间：2012-07-30T09:14:13.583
> 
> 标签：twitter-bootstrap

我最近开始使用 Twitter Bootstrap，但我似乎无法理解 span 的作用以及为什么会有不同的编号 span，例如 span4、span12？什么是偏移量以及它们何时使用？（有时与跨度一起使用）我试图在网上搜索它，但只找到了有关引导程序的具体问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-30T09:19:08.497

Bootstrap“跨度”类用于[引导网格系统](http://getbootstrap.com/2.3.2/scaffolding.html#gridSystem)。

文档显示标有数字的列，每个数字代表`span`用于此容器的类。偏移量显示在下一节的右侧，它们定义了跨度左侧应该有多少空列。

您可以阅读`span4 offset2`为“将此块扩展到 4 列，将左侧两列留空”。
默认情况下有 12 列。如果您有`span12`，它将与[容器](http://twitter.github.com/bootstrap/scaffolding.html#layouts)一样宽（可能是流体）。

这与不再支持的 v3.2.2 相关。可以在[此处](https://getbootstrap.com/docs/4.1/getting-started/introduction/)找到最新版本的 Bootstrap 。

如果您正在 v4 中的 Bootstrap 中寻找“span”类（指的是徽章和标签，而不是网格系统），可以在[此处](https://getbootstrap.com/docs/4.1/components/badge/)找到。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-30T09:18:33.780

首先，它们不是`<span>`标签。（我提到这一点是因为我已经开始输入`<span>`几次了！）它们是一行内的列宽。

来自[http://twitter.github.com/bootstrap/scaffolding.html#gridSystem](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)：

```
<div class="row">
 <div class="span4">...</div>
 <div class="span8">...</div>
</div> 
```

文档还讨论了偏移量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-04T15:47:31.763

22据我所知，如果你想设置响应式页面布局的样式，你也可以使用 col-lg-2 或类似的一些类，在编写 div 标记时，比如

```
<div class="col-lg-2 col-sm-3 col-xs-6"> some content </div> 
```

这将定义一些内容在屏幕上占据多少列，对于大屏幕、小屏幕和超小屏幕。关键是，每行最多有 12 列，因此一行中的所有内容都必须尊重这一点。你不能有

```
<row>
<div class="col-lg-5">content1 </div>
<div class="col-lg-6">content2 </div>
<div class="col-lg-3">content3 </div>
</row> 
```

因为这里有 14 个大柱子。不过只有 xs 类加到 24

那么，span 做同样的把戏吗？

# java - @OneToMany mappedBy 映射到 _____

> ID：11718459
> 
> 赞同：31
> 
> 时间：2012-07-30T09:14:30.437
> 
> 标签：java, jpa, annotations, one-to-many, jpql

`mappedBy`映射**到**什么？或者，更确切地说，它应该映射到什么？

下面的字段根据[文档](http://docs.oracle.com/javaee/6/api/javax/persistence/OneToMany.html)`headers`映射到？然后将是一个包装器？`@Entity` `Foo``@OneToMany` `Foo``javax.mail.Header`

```
package net.bounceme.dur.usenet.model;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.mail.Header;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.persistence.*;

@Entity
public class Articles implements Serializable {

    private static final long serialVersionUID = 1L;
    private static final Logger LOG = Logger.getLogger(Articles.class.getName());
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    @Column
    private String subject;

    @OneToMany(mappedBy="foo")  //a wrapper for Header is needed?
    private List<Header> headers = new ArrayList<>();

    public Articles() {
    }

    public Articles(Message message) {
        try {
            subject = message.getSubject();
        } catch (MessagingException ex) {
            Logger.getLogger(Articles.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Articles)) {
            return false;
        }
        Articles other = (Articles) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return subject;
    }

    public String getSubject() {
        return subject;
    }

    public void setSubject(String subject) {
        this.subject = subject;
    }
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-30T09:30:56.000

是的，需要 javax.mail.Header 的包装器，通常你不能直接保存任意类，尤其是那些不可序列化的类。它们也不能是设计实体之间关系的列表元素。

mappedBy 的值是拥有双向关系的字段的名称。举个例子，假设 Article 实体与 Foo 实体有一对多的关系：

```
@OneToMany(mappedBy="article")
private List<Foo> headers; 
```

现在我们知道，这个关系肯定还有另一端，就是属性，它位于 Foo 实体，确实有 Article 作为类型，命名为*article*：

```
@Entity
public class Foo {
...
   @ManyToOne
    Article article;
} 
```

当双向关系持久保存到数据库时，使用拥有方（在本例中为 Foo 中的文章）。在 JPA 2.0 规范中，这是用以下词语来说明的：

> 托管实体之间的双向关系将基于关系拥有方持有的引用进行持久化。开发人员有责任保持拥有方的内存引用和相反方的内存引用在更改时彼此保持一致。在单向一对一和一对多关系的情况下，开发人员有责任确保遵守关系的语义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:19:02.057

**在这里检查：** [文档](http://docs.oracle.com/javaee/5/api/javax/persistence/OneToMany.html)

相关部分是：

> ```
>  mappedBy
>       The field that owns the relationship. 
> ```

这是不言自明的。你想要例子吗？

例如，如果您`Article`有很多`Header`对象，则`Article`拥有关系，因为文章**有**很多标题。

# mysql - 为什么mysql慢日志会报告这些非慢查询

> ID：11718462
> 
> 赞同：2
> 
> 时间：2012-07-30T09:14:54.693
> 
> 标签：mysql, mysql-slow-query-log

我的 mysql 服务器已`long_query_time = 2`配置，但我仍然在慢速查询日志中看到这些查询似乎很快：

```
# Time: 120730  5:06:41
# User@Host: <user> @ <Host> [<IP>] 
# Query_time: 0.000412  Lock_time: 0.000060 Rows_sent: 5  Rows_examined: 5
SET timestamp=1343639201;
SELECT album_id FROM `TB_albums` where album_id!='res_4fe4333271bda7.42833845' and deleted is NULL order by `created_time` desc limit 5; 
```

如您所见 Query_time: 0.000412 Lock_time: 0.000060 似乎远低于 2 秒

您知道为什么会报告这些“*快速*”查询吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T09:20:32.990

### MySQL 还记录不使用索引的查询

my.cnf 中的选项`log-queries-not-using-indexes`用于控制这一点。正如您从 my.cnf 的这段代码中看到的那样，我的已关闭（通过注释掉）

```
# Here you can see queries with especially long duration
log_slow_queries        = /var/log/mysql/mysql-slow.log
long_query_time = 2
#log-queries-not-using-indexes 
```

如果您无权访问 my.cnf，则可以使用 SQL 检查

```
mysql> show variables like 'log_queries_not_using_indexes';
+-------------------------------+-------+
| Variable_name                 | Value |
+-------------------------------+-------+
| log_queries_not_using_indexes | OFF   |
+-------------------------------+-------+
1 row in set (0.00 sec) 
```

希望有帮助！

克里斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:23:14.453

检查变量`log-queries-not-using-indexes`

```
show variables like '%log_queries_not_using_indexes%';
+-------------------------------+-------+
| Variable_name                 | Value |
+-------------------------------+-------+
| log_queries_not_using_indexes | OFF   | 
+-------------------------------+-------+ 
```

对于您的情况，它必须设置为 OFF，如果为 ON，那么您可以`log_queries_not_using_indexes = OFF`在`my.cnf`文件中设置，然后重新启动 MySQL 服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T09:22:29.227

AFAIK MySQL 测量从查询提交到获取阶段结束的数据获取查询的查询时间。这意味着，类似于

```
Start timer
Start fast SELECT query
Wait for result 
Check timer and note time
sleep 2 seconds
fetch query results
Stop timer 
```

将以`noted time<2s`and结束`end time>2s`，并且触发时间较长的慢查询日志。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T09:24:06.997

从[手册](http://dev.mysql.com/doc/refman/5.6/en/slow-query-log.html)中，您需要检查与将查询写入显示查询日志相关的其他配置。

服务器按以下顺序使用控制参数来确定是否将查询写入慢查询日志：

> 1.查询不能是管理语句，或者必须指定--log-slow-admin-statements。
> 
> 2.查询必须至少花费 long_query_time 秒，或者必须启用 log_queries_not_using_indexes 并且查询不使用索引进行行查找。
> 
> 3.查询必须至少检查过 min_examined_row_limit 行。
> 
> 4.查询不能根据log_throttle_queries_not_using_indexes设置被抑制。

# python - 为什么recv函数在python的阻塞模式下没有被阻塞

> ID：11718471
> 
> 赞同：0
> 
> 时间：2012-07-30T09:15:22.100
> 
> 标签：python, sockets

我有一个socket编程的问题，花了很多时间寻找错误，但没有找到。有人可以帮我吗，拜托。

**服务器代码：**

```
 import socket
 server_socket = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
 server_socket = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
 server_socket.bind(("localhost",5001)
 server_socket.listen(10)
 client_socket, address = server_socket.accept() 
 server_socket = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
 server_socket.bind(("localhost",5001))
 server_socket.listen(10)
 client_socket, address = server_socket.accept()
 while True:
     temp = client_socket.recv(100)
     print (len(temp))
     print ("Recv isn't blocked")
 client_socket.close() 
```

**客户代码：**

```
import socket
import io

client_socket = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
client_socket.connect(("localhost",5001))
print("send data finised") 
```

当我运行程序时，虽然客户端没有向服务器发送任何内容，但服务器上的 recv() 函数仍在运行，我不明白为什么，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:17:18.637

因为您的客户端程序退出，套接字已关闭？

# android - 出现特定图像时播放音乐android

> ID：11718476
> 
> 赞同：0
> 
> 时间：2012-07-30T09:15:36.253
> 
> 标签：android

我有这个代码：
openHandlera = new ViDBOpenHandler(this);

```
 Runnable ru = new Runnable(){      
             public void run(){     

                 int imageArrr[] = new int[2];      
                 imageArrr[0] = R.drawable.crossone;      
                 imageArrr[1] = R.drawable.blackone;      

                 int n = (int)( Math.random()*2);      

                 theIm.setImageResource(image[n]);     
                 if(n == 0) {     
                     Log.v("Result", "n is 0 now");     
                     startTimea = System.currentTimeMillis();     
                     final SoundGenerator task=new SoundGenerator();     
                     task.keepPlaying(true);     
                     task.setLoudness(audioLoudnessa);     
                     task.execute(audioFrequencya);     

                     new Handler().postDelayed(new Runnable() {     
                          public void run()           {                           
                            task.keepPlaying(false);      
                        }     
                    }, 1000);      
                }       
                 new Handler().postDelayed(new Runnable() {     
                     public void run() {                     

                         finish();      
                     }      
                }, 30000);       

                  Log.v("test", "is"+ startTimea);      
                  theIm.postDelayed(this, 3000); //set to go off again in 3 seconds.      
            }      
        };       
        theIm.postDelayed(ru,1500); 
```

在这段代码中，我想说如果我的图像等于 imageArrr[1]，则播放音乐一秒钟并将当前时间设置为开始时间。问题是我使用了 if(n==0)。但似乎它不承认这种实施方式。因为它不去如果，我听不到声音，甚至它不打印任何东西。有人可以指导我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:20:04.613

```
int n = (int)( Math.random()*2); 
```

您正在随机生成价值，`n`并且您不会在任何时候都获得**零**

所以你的条件`if(n == 0)`永远不会成真。你没有得到正确的输出。

**编辑：**你可以这样使用

```
if(n>2>
   int image =imageArrr[0];
else
   int image =imageArrr[1]; 
```

# c# - 以前的值被覆盖列表

> ID：11718478
> 
> 赞同：1
> 
> 时间：2012-07-30T09:16:00.557
> 
> 标签：c#, datalist, cart

我正在尝试将项目添加到存储在会话中的购物车，但是当我将新产品添加到购物车时会话值被覆盖。

```
private List<int> newCart = new List<int>();
    protected void dlstCartItems_ItemCommand(object source, DataListCommandEventArgs e)
    {

        if (e.CommandName == "AddToCart")
        {
            var arg = e.CommandArgument;
            DropDownList ddlList = e.Item.FindControl("ddlAvailableSizes"+e.CommandArgument) as DropDownList;
            int currentItemID = int.Parse(this.dlstCartItems.DataKeys[e.Item.ItemIndex].ToString());
            if (ddlList.SelectedIndex == 0)
            {
                ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "alert", "alert('Please Select Size');", true);
            }
            else
            {

                newCart.Add(Convert.ToInt32(e.CommandArgument));
                Session["Cart"] = newCart;
                if (Session["Cart"] != null)
                {

                    int ct = ((List<int>)Session["Cart"]).Count;
                    lblCartMessage.Text = Convert.ToString(ct)+" "+"Product";

                }

            }

        }
    } 
```

我的问题是，当我添加新产品时，旧产品不再出现在列表中，并且产品计数始终为 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:21:29.823

您要添加的列表应在类级别定义。每当您添加新产品时，私有列表 newCart = new List(); 不应该执行，否则它会使添加后计数为零，您只会留下最新的添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T09:21:48.250

您正在通过 覆盖购物车`Session["Cart"] = newCart;`。为了做到这一点，写：

```
 newCart = Session["Cart"] as List<int>;
 if (newCart == null)
 {
    newCart = new List<int>();
    Session["Cart"] = newCart;
 }

// Rest of the code adding to newCart etc. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T09:21:47.463

也许 newcart 在执行 dlstCartItems_ItemCommand 时总是为空，因此

```
Session["Cart"] = newCart; 
```

清除值

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-30T11:10:04.343

protected void dlstCartItems_ItemCommand(object source, DataListCommandEventArgs e) { List newCart;

```
 if (e.CommandName == "AddToCart")
    {
        var arg = e.CommandArgument;
        DropDownList ddlList = e.Item.FindControl("ddlAvailableSizes" + e.CommandArgument) as DropDownList;
        int currentItemID = int.Parse(this.dlstCartItems.DataKeys[e.Item.ItemIndex].ToString());
        if (ddlList.SelectedIndex == 0)
        {
            ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "alert", "alert('Please Select Size');", true);
        }
        else
        {

            if (Session["Cart"] == null)
            {
                newCart = new List<int>();
                newCart.Add(Convert.ToInt32(e.CommandArgument));
                Session["Cart"] = newCart;
            }
            else
            {
                newCart = Session["Cart"] as List<int>;
                newCart.Add(Convert.ToInt32(e.CommandArgument));
                Session["Cart"] = newCart;
            }

            int ct = ((List<int>)Session["Cart"]).Count;
            lblCartMessage.Text = Convert.ToString(ct) + " " + "Product";

        }

    }
} 
```

# php - PHP - 基于时间的不同状态

> ID：11718480
> 
> 赞同：0
> 
> 时间：2012-07-30T09:16:01.850
> 
> 标签：php, date, time

我目前正在开展一个项目，通过使用它们的图像精灵表示来实时打开和关闭业务。

在下面的代码中，我将默认时区设置为 GMT 并将时间格式设置为 0000。在测试时，除了 0000 和 0959 之间之外，这很好。它似乎忽略了时间格式并且没有放入前导零。

此外，是否有更有效的方法来执行以下操作？

提前致谢。

```
<?php date_default_timezone_set("Europe/London"); $time = date("Hi");?> 

.<?php if($time > 1600 && $time < 2329){echo "business1";} else{echo "business1:hover";}?> {background: url(http://website.com/business1.png) 0 -145px;}
.<?php if($time > 1600 && $time < 2329){echo "business1:hover";} else{echo "business1";}?> {background: url(http://website.com/business1.png) 0 0;}

.<?php if($time > 0800 && $time < 1659){echo "business2";} else{echo "business2:hover";}?> {background: url(http://website.com/business2.png) 0 -145px;}
.<?php if($time > 0800 && $time < 1659){echo "business2:hover";} else{echo "business2";}?> {background: url(http://website.com/business2.png) 0 0;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:19:05.067

由于前导`0800`，PHP中的文字[被理解为*八进制*数](http://php.net/manual/en/language.types.integer.php)`0`。您不应该将时间作为字符串进行比较。使用 UNIX 时间戳进行时间比较：

```
$now = time();
if ($now > strtotime('16:00') ...) 
```

# java - Java Array/ArrayList 用即将添加的数据替换内部的数据

> ID：11718482
> 
> 赞同：0
> 
> 时间：2012-07-30T09:16:08.587
> 
> 标签：java, arrays, pointers, arraylist, data-loss

我有一个调用函数**requestAudioBlocks**来请求一些数据的程序。在其中，它初始化一个数组，然后调用数据请求。

```
private ReadAudioData[] receivedAudioMessages;

private int receivedMessageCount;

private boolean requestAudioBlocks(long blocksPerRequest)
{
    receivedAudioMessages = new ReadAudioData[2];

    receivedMessageCount = 0;

    connection.sendRequest();  //Send the command
} 
```

运行 connection.sendRequest 时，**connection.sendRequest**调用**saveAudioBlocks**，**向其**发送要放入数组的变量**下载。**

```
private ReadAudioData audioDataPacket;

public void sendRequest()
{
    ReadAudioData readAudioData;

    while (int count = 0; count < 2; count++)
    {
        readAudioData = new ReadAudioData();

        //Add the received information into the readAudioData variable

        audioDataPacket = readAudioData;

        saveAudioBlocks(audioDataPacket);
    }
} 
```

每次收到新的 ReadAudioData 对象时，都会调用 saveAudioBlocks。

```
public void saveAudioBlocks(ReadAudioData download)
{
    receivedAudioMessages[receivedMessageCount] = download;

    receivedMessageCount++;
} 
```

在程序运行过程中，**saveAudioBlocks**被调用了两次，应该将两个**ReadAudioData**对象放入数组**receivedAudioMessages**中。

它第一次起作用，因为正确的**ReadAudioData**对象进入**receivedAudioMessages[0]**。

ReadAudioData**对象**有一个变量 String，在本例中为**"111"**。**如果您在saveAudioBlocks中的****receivedMessageCount++**行放置一个断点，您可以查看数组，它包含带有字符串变量**“111”的****ReadAudioData**对象，因为它应该位于位置**0**。

 ****但是，当使用新的 ReadAudioData 对象再次调用**saveAudioBlocks****时**，如果查看位置 0 处的**receivedAudioMessages数组，则****ReadAudioData**对象是传递给函数的变量**download**中包含的新**ReadAudioData**对象，其中包含 String 变量“122”。

 **就好像我在数组中保存了指向变量**下载**的指针，而不是当前的实际对象。

我也尝试过使用 ArrayLists，但也会出现同样的问题。

**我在saveAudioBlocks**有一个断点，以确保在我不知道且不知道时不会调用它来替换数据。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:22:46.643

> 就好像我在数组中保存了指向变量下载的指针，而不是当前的实际对象。

这就是发生的事情。您存储对由局部变量*引用*的对象的*引用*`download`。因此，如果该对象的属性发生更改，那么更改也会在您的数组中变得“可见”。

数组不存储对象本身，它们存储对对象的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:19:56.303

这很可能是因为在你的调用代码中（你调用的地方`saveAudioBlocks`你重用了相同的`ReadAudioData`变量而不是创建一个新变量。

换句话说，如果你这样做：

```
ReadAudioData data = new ReadAudioData();
data.setId("111");
receivedAudioMessages[0] = data;

data.setId("222");
receivedAudioMessages[1] = data; 
```

两者`receivedAudioMessages[0]`和`receivedAudioMessages[1]`对相同数据的引用，该数据现在的 id 为 222。使用 ArrayList，您将获得相同的行为。

这只是一个猜测，因为您没有提供调用该`saveAudioBlocks`方法的代码。******

# css - Spring项目问题中的映射字体

> ID：11718493
> 
> 赞同：2
> 
> 时间：2012-07-30T09:17:14.533
> 
> 标签：css, spring, fonts, stylesheet, font-face

我遇到了下一个问题：我创建了 spring 项目，向其中添加了脚本、样式和字体，映射了资源，但没有连接字体。这是萤火虫控制台：

```
"NetworkError: 404 Not Found - http://localhost:8080/myApp/resources/fonts/cabin-regular.woff"
"NetworkError: 404 Not Found - http://localhost:8080/myApp/resources/fonts/cabin-regular.ttf" 
```

图像等已正确加载，所以我不去哪里寻找问题。这是我的 css 文件的一部分，我在其中连接字体：

```
@import url(reset.css);

a{
    text-decoration: none;
    font-family: Cabin-Regular, sans-serif;
    color: #472c7f;
}
a:hover{

}

@font-face {
    font-family: 'Cabin-Regular';
    src: url('../fonts/cabin-regular.eot');
    src: url('../fonts/cabin-regular.eot?#iefix') format('embedded-opentype'),
         url('../fonts/cabin-regular.woff') format('woff'),
         url('../fonts/cabin-regular.ttf') format('truetype'),
         url('../fonts/cabin-regular.svg#cabin-regular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

如果需要，我也可以提供上下文。我会对任何建议或答案感到满意。谢谢！

升级版：

文件结构是这样的：

```
/resources

             /fonts

             /styles

             /images 
```

等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:18:34.330

首先，检查您的 FTP 以查看它是否更改了文件类型或完全删除了扩展名。某些 FTP 应用程序和服务器的行为方式与 Windows 相同，并隐藏了使您的路径不正确的扩展程序。

除此之外，尝试通过[Fontsquirrel](http://www.fontsquirrel.com)上的字体生成器传递你的字体，并记住选择 base64。简而言之，Base64 会将整个字体嵌入到您的 CSS 中，并允许大多数浏览器在不链接到实际字体文件的情况下重新创建它。缺点是由于 base64 编码字体添加的数据量，您的 css 会增加相当多的大小。请记住在 fontsquirrel 上选择您需要的所有格式，而不仅仅是 base64。

# php - PHP中的文档数字签名

> ID：11718496
> 
> 赞同：0
> 
> 时间：2012-07-30T09:17:23.047
> 
> 标签：php, zend-framework, document, digital-signature

一项新的立法强制我的应用程序只允许用户附加数字签名的文档。我以前从未在我的应用程序中以任何特殊方式处理数字签名文档，所以我不知道选择哪种方法。

基本上我可以使用两种不同的方法。

1.  实现允许用户签署文档的功能
2.  让用户使用其他软件对文档进行签名，只检查文档是否包含签名并验证其内容

我的应用程序是用 Zend 框架编写的，支持上传 pdf、doc/docx 和 xsl/xslx 文档

我想知道如何确定文档是否包含数字签名 + 时间戳以及其中的内容（姓名、公司）或者它是否有效，以便我可以允许/拒绝其上传。

或者我想知道我应该怎么做才能允许用户对文档进行数字签名并在我的 Web 应用程序的签名中添加时间戳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:44:09.640

[您可以在PHPDocX](http://www.phpdocx.com/documentation/digital-signature-docx-pdf#digital-signature-DOCX)的帮助下为 Word (docx) 文档添加数字签名。

它不需要 Microsoft Office，可以在任何运行 PHP 的服务器上运行。

您也可以使用相同的包来签署 PDF 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:41:47.957

所有提到的格式都支持嵌入式数字签名，但我非常怀疑您是否会找到 PHP 库来处理这些格式以验证是否包含签名。

要让用户签署文档，您需要在客户端拥有文档或支持分布式签名。根据您的描述，我猜文档已经存储在客户端系统上，因此您需要添加的只是在客户端计算机上执行签名的内容。

我可以想象当用户选择数据时，Java 小程序会在浏览器中对文档进行签名，然后将签名的文件发布到服务器。这是大多数基于银行浏览器的软件所做的。

我知道一个 Java 库可以对 PDF 和办公文档进行数字签名。这是我们的[SecureBlackbox](http://www.eldos.com/sbb/java-security.php)（Java 版）。您可以使用我们的组件构建浏览器小程序。对于 PDF 签名，也存在 iText，但我对使用 Java 签名的 Office DOC 和 XLS 文件一无所知。

# php - 如何制作有效日期数组

> ID：11718499
> 
> 赞同：0
> 
> 时间：2012-07-30T09:17:34.873
> 
> 标签：php, date

我需要用闰年制作一组有效日期，例如：

```
$year = 2012;

$month = 04;

$days = array('01', '02', '03', '04', '05' etc..) 
```

我如何检查每年每个月的每一天，然后将所有内容推送到数组中，然后将其放入选择标签中

```
<select name="years">

</select>

<select name="months">

</select>

<select name="days">

</select> 
```

一些想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:31:46.680

你的问题没有意义。如果要创建选择列表，所有日期 (1-31) 都有效，因为它们对某些日期有效，因此您始终必须列出它们以便用户可以选择它们。

因为您不必枚举所有有效日期，您只需验证可使用[checkdate](http://php.net/manual/en/function.checkdate.php)完成的发送数据。您可以在发送请求之前进行额外的 Javascript 检查以验证日期。

# magento - 目录价格规则与购物车规则

> ID：11718504
> 
> 赞同：3
> 
> 时间：2012-07-30T09:17:48.543
> 
> 标签：magento

我在任何地方都没有找到答案，所以也许你们中的一些人可以想出一个解释。

问题是：我有一个目录价格规则。适用于具有 5% 和 10% 折扣的客户群体，当然还有普通客户的类别可享受 10% 的折扣。

现在的问题是，当属于折扣组的客户从折扣类别中购买产品时，已经打折的产品也有折扣组。（5 或 10%）。

如果购物车中有打折产品，有没有办法告诉 magento 禁用购物车规则？

很抱歉，我没有与某些 magento 代码相关的问题，但这是一个大问题，任何帮助都非常受欢迎。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-31T03:13:06.490

我在寻找相同的解决方案时遇到了这个问题：要求是 X 组中的客户获得 10% 的折扣，但通过 special_price 值的目录价格规则排除已经有折扣的产品。

到目前为止，似乎没有明确的解决方案；）正如其他答案和评论中所述，您可以使用类别从折扣规则中排除产品。

这是一个可行的解决方案，但问题是需要维护该产品列表，这可能是一项非常耗时且容易出错的任务。

**它可以自动化！**

使用[动态类别产品](http://www.proxiblue.com.au/premium-modules/magento-dynamic-category-products.html)扩展（由我自己开发），您可以自动化应用有效折扣的产品列表。

一个快速的方法。

在您的商店中，创建一个新的根类别。这只是将您的“数据”类别分组到默认商店视图之外，因此它们不会意外出现在任何地方。

然后，您可以从这个新的根类别创建子类别。其中之一将是列出所有打折产品的类别。

例如，这里是 my `Root Data Category`，有一些子类别。我在购物车规则中使用了这些。

[![在此处输入图像描述](../Images/416454d661a1a70e769a82db5b56b285.png)](https://i.stack.imgur.com/8JIny.png)

对于这个答案，我们会对`All products with discount applied`

此类别包含如下动态规则：

[![在此处输入图像描述](../Images/5c13f00e55c6714ebab4e864b463e19b.png)](https://i.stack.imgur.com/hfzLX.png)

该类别将是动态的、自我更新的、每天的，并且可用于从现有的购物车折扣中排除产品。

我希望这对某人有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-06T17:44:17.213

在这里查看答案... [http://www.magentocommerce.com/knowledge-base/entry/what-are-catalog-price-rules-and-how-do-i-use-them](http://www.magentocommerce.com/knowledge-base/entry/what-are-catalog-price-rules-and-how-do-i-use-them)

> Magento 中有 2 种价格规则，目录和购物车价格规则。商品加入购物车前会制定目录规则，而购物车价格规则则应用于购物车。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T16:36:46.760

您可以在购物车规则中添加一个条件，即打折的产品或类别*不*包含在购物车中。如果他们的购物车中已经有这些打折产品，这将使购物车规则无效。

# android - 我可以在 Google Play 商店中隐藏我的应用程序吗？

> ID：11718505
> 
> 赞同：26
> 
> 时间：2012-07-30T09:17:49.527
> 
> 标签：android, google-play

我正在为我的客户开发一个 Android 应用程序，我想在 Google Play 上发布。有没有办法从搜索中隐藏应用程序并使其只能通过 URL 访问？要使用该应用程序，人们需要许可证，我不希望有人搜索“XYZ”来查看我的应用程序。

在我的服务器上托管 APK 不是一个解决方案，因为我经常更新它并且更喜欢 Play Store 更新系统。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T11:43:09.327

Google Play 现在允许您以一种新的方式分发内部应用程序（*Google Play Private Channel*）：

> Google Apps 的 Google Play 专用渠道（专用渠道）允许 Google Apps 域通过 Google Play 商店向其用户分发内部 Android 应用程序。

您可以在此处找到 Google 企业博客上的公告，并[在](http://googleenterprise.blogspot.com.es/2012/12/a-new-way-to-distribute-your-internal.html)[此处](http://support.google.com/a/bin/answer.py?hl=en&answer=2494992)找到设置此功能的说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:31:28.950

一种方法是临时发布它，然后告诉所有人下载它，然后立即取消发布该应用程序。

另一种方法是对应用程序进行正确的描述（alpha、预览等），并只允许选定的用户实际使用它（其他人可以下载，但对他们不起作用）。您可以只让选定的用户使用您希望的任何方法使其工作。

不管怎样，你应该考虑如何让许可证在某个时候过期。

另一种方法是将其放在服务器上，并让应用程序不时检查新的更新。您也可以使用谷歌驱动器，但我不确定如何。

# macos - XCode 中的文件加密

> ID：11718509
> 
> 赞同：1
> 
> 时间：2012-07-30T09:18:02.793
> 
> 标签：macos, cocoa, encryption

我是 Mac 开发的新手。在我的项目中，我需要加密文件。任何人都可以建议我在 mac 环境中最喜欢的库。如果可能的话，请帮我提供样品。

我正在开发一个可可应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:31:04.563

OK，首先阅读Apple的[“加密服务指南”](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/cryptoservices/Introduction/Introduction.html)，然后熟悉[“Common Crypto”](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/Common%20Crypto.3cc.html#//apple_ref/doc/man/3cc/CommonCrypto)库，它现在比Cocoa下的OpenSSL更受欢迎。

最后谷歌搜索“可可通用加密样本”并找到这样[的](http://robnapier.net/blog/aes-commoncrypto-564)宝石。

# templates - drupal 7 - 用于视图的页面模板

> ID：11718519
> 
> 赞同：0
> 
> 时间：2012-07-30T09:18:43.873
> 
> 标签：templates, drupal-7, views

我有一个视图调用产品。它在[http://myurl.com./products](http://myurl.com./products)上输出。我可以为这个视图页面指定一个模板文件，这样它就不会从我的 page.tpl.php 中获取模板

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:11:07.637

接受的页面模式`page--[front|internal/path].tpl.php`应该`page--products.tpl.php`适用于您的视图页面。

有关更多详细信息，请参阅有关[Drupal 模板（主题挂钩）建议](http://drupal.org/node/1089656)的文档。

# visual-studio-2008 - 如何在 vc 2008 上使用“Visual C++ 2008 Feature Pack”？

> ID：11718520
> 
> 赞同：1
> 
> 时间：2012-07-30T09:18:44.427
> 
> 标签：visual-studio-2008, mfc, mfc-feature-pack

我有 vc++ 2008 Microsoft Visual Studio 2008 版本 9.0.30729.1 SP

在windows7上

我下载了 Visual C++ 2008 Feature Pack 示例，但无法打开项目/解决方案文件。我的 vc 无法通过 extion .vcxproj 打开文件。

我需要安装什么来解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T00:31:22.153

这对 MS 来说很常见：制造混乱（类似于使用事件而不是 Windows 消息）。

“Visual C++ 2008 Feature Pack”并不表示这是针对 VS 2008 的软件包，而是表示它是在 2008 年发布的，之后的版本使用 VS 2010 0solutions 进行更新。

安装 VS 2008 SP1 后，您应该可以使用所有示例。我不确定这组示例是否属于默认安装设置。

尝试再次运行 SP1 安装并查看安装示例的选项是否可用。样品应以 zip 文件的形式包含在内。

如果这不起作用，请使用此链接：[使用此链接：](http://www.microsoft.com/en-us/download/details.aspx?id=5718)下载 VS2008 SP1 示例库。

您可以使用安装包或展开 exe 文件并从中提取 vc_samples.cab。vc_samples.cab 包含 AllVCLanguageSamples.zip_x86_enu。解压后只需将其重命名为 zip。

# android - 查询不起作用数据库android

> ID：11718521
> 
> 赞同：1
> 
> 时间：2012-07-30T09:18:45.797
> 
> 标签：android, sql, sqlite

我正在使用 SQL 开发一个简单的 Android 应用程序。我遵循了以下指南 -[在 Android 应用程序中使用您自己的 SQLite 数据库](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

尝试查询数据库时出现错误。

这是我的 DataBaseHelp.Java 类：

```
package namae.nombebe;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

public class DataBaseHelper extends SQLiteOpenHelper{

    //The Android's default system path of your application database.
    private static String DB_PATH = "/data/data/namae.nombebe/databases/";

    private static String DB_NAME = "myDBName";

    private SQLiteDatabase myDataBase; 

    private final Context myContext;

    /**
     * Constructor
     * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
     * @param context
     */
    public DataBaseHelper(Context context) {

        super(context, DB_NAME, null, 1);
        this.myContext = context;
    }   

  /**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public void createDataBase() throws IOException{

        boolean dbExist = checkDataBase();

        if(dbExist){
            //do nothing - database already exist
        }else{

            //By calling this method and empty database will be created into the default system path
               //of your application so we are gonna be able to overwrite that database with our database.
            this.getReadableDatabase();

            try {

                copyDataBase();

            } catch (IOException e) {

                throw new Error("Error copying database");

            }
        }

    }

    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase(){

        SQLiteDatabase checkDB = null;

        try{
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        }catch(SQLiteException e){

            //database does't exist yet.

        }

        if(checkDB != null){

            checkDB.close();

        }

        return checkDB != null ? true : false;
    }

    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{

        //Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public void openDataBase() throws SQLException{

        //Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }

    @Override
    public synchronized void close() {

            if(myDataBase != null)
                myDataBase.close();

            super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

        // Add your public helper methods to access and get content from the database.
       // You could return cursors by doing "return myDataBase.query(....)" so it'd be easy
       // to you to create adapters for your views.

} 
```

这就是我打开数据库的方式：

```
 public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        DataBaseHelper myDbHelper = new DataBaseHelper(this);

        try 
        {
                myDbHelper.createDataBase();
        } 
        catch (IOException ioe) 
        {
            throw new Error("Unable to create database");
        }

        try 
        {
            myDbHelper.openDataBase();
        }
        catch(SQLException sqle)
        {
            throw sqle;
        }

        myDataBase = myDbHelper.getWritableDatabase();

        Cursor c = myDataBase.rawQuery("SELECT * FROM Astuces", null);
// problem on this query
    } 
```

所以查询不起作用。（如果我不把它应用程序工作）

我有一张桌子`Astuces`。

错误：

```
07-30 10:56:53.869: E/AndroidRuntime(503): java.lang.RuntimeException: Unable to start activity ComponentInfo{namae.nombebe/namae.nombebe.NomBebeActivity}: android.database.sqlite.SQLiteException: no such table: Astuces: , while compiling: SELECT * FROM Astuces 
```

我们可以看到我说没有桌子`Astuces`我真的有它所以我不明白为什么我能找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:32:57.383

几周前，我关注了相同的链接。在开始使用代码之前，您必须考虑一些重要的事情：

1 - 您需要在`SQLite file`呼叫中添加一个表格`android_metadata`，然后插入`en_US`其中。

2 - 您必须将其重命名`id`为`_id`.

3 - 您应该将 SQLite 文件复制到`assets`项目的文件夹中。

然后就可以使用代码了。你是如何完成这 3 个步骤的？

上课在哪里`myDataBase`？您在代码中哪里实现了这些方法？

```
myDataBase = myDbHelper.getWritableDatabase();
Cursor c = myDataBase.rawQuery("SELECT * FROM Astuces", null); 
```

你可能需要在你的`DataBaseHelper`课堂上有这样的东西

```
public Cursor fetchAllEntries() {
            //includes all column names
        String[] projection = new String[] { KEY_ROWID, USER_ID, START, END };
        String restrict = null; // Get all entries
            String orderby = null;
        return myDataBase.query(TABLE_NAME, projection, restrict, null, null, null, orderby);
    } 
```

并在主要活动中这样称呼它：

```
Cursor entryCursor = db.fetchAllEntries(); 
```

# javascript - javascript不能与runat一起使用

> ID：11718522
> 
> 赞同：1
> 
> 时间：2012-07-30T09:19:00.200
> 
> 标签：javascript, asp.net, runat

我将从 HTML TextArea 中获取值，它运行良好，直到我将 runat="server" 放在控件上。

```
<script language="javascript" type="text/javascript" >
    function limitText(limitField, limitCount, limitNum) {
        if (limitField.value.length > limitNum) {
            limitField.value = limitField.value.substring(0, limitNum);
        } else {
            limitCount.value = limitNum - limitField.value.length;
        }
    }
</script> 
```

那么这就是身体

```
 <div runat="server">
    <%-- Note:Set runnat="server" --%>

    <textarea runat="server" name="limitedtextarea" id="Area" onkeydown="limitText(this.form.limitedtextarea,this.form.countdown,100);"
        onkeyup="limitText(this.form.limitedtextarea,this.form.countdown,100);" > 
```

我正在尝试将（文本区域的）值放入变量中，然后将其显示在标签上

我真的很感谢你的帮助..谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:28:46.427

当您使用任何控制服务器端控件时，该控件`runat=server`的 ID 会发生更改，现在您可以使用 ClientID 获取 Javascript 中的服务器端控件 ID，例如

```
document.getElementById('<%=Area.ClientID%>') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:09:22.663

您可以使用关键字直接发送控件引用`this`，并在 javascript 函数中使用该引用和值来检查限制。通过这种方式，您可以将相同的函数与其他控件一起使用。

```
<textarea runat="server" name="limitedtextarea" id="Area" 
    onkeydown="limitText(this,this.form.countdown,100);"         
    onkeyup="limitText(this,this.form.countdown,100);" >

    <script language="javascript" type="text/javascript" >     
       function limitText(limitField, limitCount, limitNum) 
       {         

          if (limitField.value.length > limitNum) 
          {             
            limitField.value = limitField.value.substring(0, limitNum);         
          } 
          else 
          {             
            limitCount.value = limitNum - limitField.value.length;         
          }     

      } 
    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T09:24:18.710

当您添加 a`runat="server"`时，它将更改其中表单元素的名称，并且您依赖于具有命名元素的表单：

```
this.form.limitedtextarea 
```

对于文本字段，您应该可以传递 just `this`，因为`countdown`您可以使用 id：

```
onkeydown="limitText(this,document.getElementById('countdowntimer'),100);" 
```

# c# - 无法绑定到属性或列...添加控件时

> ID：11718526
> 
> 赞同：1
> 
> 时间：2012-07-30T09:19:08.837
> 
> 标签：c#, forms, user-controls

当我尝试将自己创建的控件添加到窗体时，Visual Studio 会抛出错误： **无法绑定到数据源上的属性或列项名称。参数名称：dataMember** 谁能告诉我，可能我做错了，因为我认为放置整个类是不必要的。

```
public partial class ctrlDetailGradation : BaseDetailsControl
{
    protected override DevExpress.XtraDataLayout.DataLayoutControl LayoutMain { get { return dataLayoutControl; } }

    public SALES_Gradation CurrentGradation
    {
        get { return GetXPOObject as SALES_Gradation; }
    }

    public bool bEditMode { get; set; }

    public ctrlDetailGradation():base(null)
    {
        OnConstructInit();
    }

    public ctrlDetailGradation(IMxPEditObjectHandlerInterface cEditObjInterface)
        : base(cEditObjInterface)
    {
        OnConstructInit();
    }

    private void OnConstructInit()
    {
        InitializeComponent();
        InitLngStrings();
    }
... 
```

有部分代码，就是简单的类... BaseDetailsControl 继承自 usercontrol

# image - 动作脚本 3 - 在下一张图片之前滑出

> ID：11718533
> 
> 赞同：0
> 
> 时间：2012-07-30T09:19:22.823
> 
> 标签：image, actionscript-3, flash, transition

我有以下代码：

```
stop ();

import fl.transitions.*;
import fl.transitions.easing.*;

TransitionManager.start(axis30, {type:Fly, direction:Transition.IN, duration:2, easing:Regular.easeInOut, startPoint:6});

var nextImage:Timer = new Timer(5000);

nextImage.addEventListener(TimerEvent.TIMER, playNext);
nextImage.start();

function playNext(event:Event):void
{
    nextFrame();
} 
```

图像滑入但几秒钟后消失。我需要让它停留一点然后滑出。我已经尝试了很多方法，但没有一个有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:35:07.330

为什么使用过渡管理器？假设您已经将 iamge 加载到位图或影片剪辑中。您所要做的就是显示它，显示后，添加一个 ENTER_FRAME 事件，将影片剪辑/位图移动到您想要的位置。如果它到达想要的位置，移除监听器，添加计时器，重复。

# c# - 如何将二进制值放置到多维字符串数组的特定位置？

> ID：11718535
> 
> 赞同：2
> 
> 时间：2012-07-30T09:19:29.910
> 
> 标签：c#

我这样声明多维字符串数组

```
 public String[][] DataArray = new String[][]
    {

      new String[]  { "2.1", "2.2", "3.6", "3.7", "3.8", "4.3", "4.4", "4.5" }, 
      new String[]  { "2.3", "2.4", "2.5", "5.1", "5.2", "4.6", "4.7", "4.8" }, 
      new String[]   { "2.6", "2.7", "2.8", "5.3", "5.4", "5.5", "1.1", "1.2" },
      new String[]   { "1.5", "6.1", "6.2", "5.6", "5.7", "5.8", "1.3", "1.4" },
      new String[]   { "1.8", "6.3", "6.4", "6.5", "8.1", "8.2", "1.6", "1.7" },
      new String[]   { "7.2", "6.6", "6.7", "6.8", "8.3", "8.4", "8.5", "7.1" },
      new String[]   { "7.4", "7.5", "3.1", "3.2", "8.6", "8.7", "8.8", "7.3" },
      new String[]   { "7.7", "7.8", "3.3", "3.4", "3.5", "4.1", "4.2", "7.6" }                                     

    }; 
```

我在大小为 8 的字符串数组中有一组二进制值（例如 01000010）。这个字符串数组包含总共 8 个二进制值集。例如，如果我想将 01000010 二进制值放在 2 的位置，如 2.1=0， 2.2=1,2.3=0 ...等。

例如我想得到这样的输出

```
public String[][] DataArray= new String[][]
    {

      new String[]  { "0", "1", "3.6", "3.7", "3.8", "4.3", "4.4", "4.5" }, 
      new String[]  { "0", "0", "0", "5.1", "5.2", "4.6", "4.7", "4.8" }, 
      new String[]   { "0", "0", "0", "5.3", "5.4", "5.5", "1.1", "1.2" },
      new String[]   { "1.5", "6.1", "6.2", "5.6", "5.7", "5.8", "1.3", "1.4" },
      new String[]   { "1.8", "6.3", "6.4", "6.5", "8.1", "8.2", "1.6", "1.7" },
      new String[]   { "7.2", "6.6", "6.7", "6.8", "8.3", "8.4", "8.5", "7.1" },
      new String[]   { "7.4", "7.5", "3.1", "3.2", "8.6", "8.7", "8.8", "7.3" },
      new String[]   { "7.7", "7.8", "3.3", "3.4", "3.5", "4.1", "4.2", "7.6" }                                     

    }; 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:22:51.903

^( 设置整数的第)*n*位（从 0 开始）的条件为：^(`a`)

```
a & (1 << n) != 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:25:53.087

以下将使用您的位值填充 DataArray：

```
for(int i = 0; i < binaryList.Count; i++)
    for(int j = 0; j < binaryList[i].Length; j++)
        DataArray[i][j] = binaryList[i][j]; 
```

**编辑：没关系，误解了这个问题。**

# python - 添加到 django request.user 变量

> ID：11718536
> 
> 赞同：2
> 
> 时间：2012-07-30T09:19:33.237
> 
> 标签：python, django, authentication, login

在 django 中，我使用 authenticate() 函数来登录用户。使用`request.user`，我可以访问从 users 表中提取的登录用户信息。如果我这样做`request.user.id`，我可以获得用户的 ID。在任何模板中，根据任何请求，我都可以`user.username`获取用户名。

有没有一种方法可以向`request.user`变量添加值，以便我可以在整个应用程序和模板中使用它们？

例如，我想要这样：`request.user.timezone`在用户登录网站时设置；我应该能够在模板和我的视图中访问这个变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T12:00:18.123

您可以编写一个简单的中间件：

```
class UserTZMiddleware(object):
    def process_view(self, request, view_func, view_args, view_kwargs):
        if request.user.is_authenticated():
            request.user.timezone = evaluate_tz() 
```

然后将其附加到`MIDDLEWARE_CLASSES`您的`settings.py`文件中：

```
MIDDLEWARE_CLASSES = (
    ....,
    'myapp.UserTZMiddleware',
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T12:25:28.507

您想让用户更改时区并强制指定特定时区吗？我假设你会，如果是这样，你想在你的数据库中保持时区可配置。因此，我建议您制作一个与用户对象具有一对一关系的 UserProfile 模型。

你可以做 ：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    time_zone = models.whateverField()
    ... add anything else you would like to extend your profile ... 
```

在您的模板上，您将能够通过这样做获得时区：

```
{{ request.user.userprofile.time_zone }} 
```

简单而且非常干净。

如果您希望在保存用户对象时自动创建用户配置文件，您可以为此使用信号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:32:12.847

将请求上下文处理器添加到您的 TEMPLATE_CONTEXT_PROCESSORS。该处理器将请求添加到上下文中，在您的模板中您可以执行 {{request}} 或 {{ request.user }}

见：[https ://docs.djangoproject.com/en/dev/ref/templates/api/#django-core-context-processors-request](https://docs.djangoproject.com/en/dev/ref/templates/api/#django-core-context-processors-request)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T12:13:17.687

使用[会话](https://docs.djangoproject.com/en/dev/topics/http/sessions/?from=olddocs/)，旨在将变量保留在上下文中。

您不应该更改`request.user`，因为这是其他应用程序将依赖的东西，并且由 django 自己的身份验证机制填充。

如果您需要专门跟踪时区，您应该阅读 django 1.4 中的[时区支持](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/)。在文档中，它提供了为用户设置和管理时区的示例。

# c# - C# - RadGrid - 如何手动调用 ItemDatabound 事件？

> ID：11718537
> 
> 赞同：2
> 
> 时间：2012-07-30T09:19:35.147
> 
> 标签：c#, asp.net, telerik-grid

当 RadTextBox 文本更改时，我需要调用 ItemDataBound 事件。如何实现这一点，请帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T09:36:47.657

您应该将`RadGrid.DataBind();`方法分配给`RadTextBox.TextChanged`偶数。所以你会得到你的`ItemDataBound`事件触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T09:28:19.053

itemdatabound 事件仅在绑定 radgrid 时触发..不能直接在文本框更改事件上调用它..

或者你在 textchanged 事件上绑定你的网格然后它会调用那个事件

# android - 您如何从源代码分发构建 FreeImage for Android？

> ID：11718540
> 
> 赞同：0
> 
> 时间：2012-07-30T09:19:44.580
> 
> 标签：android, c++, c, android-ndk, freeimage

我需要为我的 Android 项目构建 FreeImage.a 库。我已经从[项目页面](http://freeimage.sourceforge.net/download.html)下载了源代码。

面向 Android 时，如何从原始资源构建此项目？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-30T09:35:51.760

要从原始资源构建适用于 Android 的[FreeImage 3.15.3](http://freeimage.sourceforge.net/download.html)，您需要 3 样东西：

1) 在 FreeImage 文件夹中创建文件 jni/Application.mk：

```
APP_OPTIM := release
APP_PLATFORM := android-8
APP_STL := gnustl_static
APP_CPPFLAGS += -frtti 
APP_CPPFLAGS += -fexceptions
APP_CPPFLAGS += -DANDROID
APP_ABI := armeabi-v7a x86
APP_MODULES := FreeImage 
```

2）创建文件jni/Android.mk：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

GLOBAL_C_INCLUDES := \
    $(LOCAL_PATH)/../Source \
    $(LOCAL_PATH)/../Source \
    $(LOCAL_PATH)/../Source/DeprecationManager \
    $(LOCAL_PATH)/../Source/FreeImage \
    $(LOCAL_PATH)/../Source/FreeImageLib \
    $(LOCAL_PATH)/../Source/FreeImageToolkit \
    $(LOCAL_PATH)/../Source/LibJPEG \
    $(LOCAL_PATH)/../Source/LibMNG \
    $(LOCAL_PATH)/../Source/LibOpenJPEG \
    $(LOCAL_PATH)/../Source/LibPNG \
    $(LOCAL_PATH)/../Source/LibRawLite \
    $(LOCAL_PATH)/../Source/LibRawLite/dcraw \
    $(LOCAL_PATH)/../Source/LibRawLite/internal \
    $(LOCAL_PATH)/../Source/LibRawLite/libraw \
    $(LOCAL_PATH)/../Source/LibRawLite/src \
    $(LOCAL_PATH)/../Source/LibTIFF \
    $(LOCAL_PATH)/../Source/Metadata \
    $(LOCAL_PATH)/../Source/OpenEXR \
    $(LOCAL_PATH)/../Source/OpenEXR/Copyrights \
    $(LOCAL_PATH)/../Source/OpenEXR/Half \
    $(LOCAL_PATH)/../Source/OpenEXR/Iex \
    $(LOCAL_PATH)/../Source/OpenEXR/IlmImf \
    $(LOCAL_PATH)/../Source/OpenEXR/IlmThread \
    $(LOCAL_PATH)/../Source/OpenEXR/Imath \
    $(LOCAL_PATH)/../Source/ZLib \

LOCAL_SRC_FILES = ../Source/FreeImage/BitmapAccess.cpp ../Source/FreeImage/ColorLookup.cpp ../Source/FreeImage/FreeImage.cpp ../Source/FreeImage/FreeImageC.c ../Source/FreeImage/FreeImageIO.cpp ../Source/FreeImage/GetType.cpp ../Source/FreeImage/MemoryIO.cpp ../Source/FreeImage/PixelAccess.cpp ../Source/FreeImage/J2KHelper.cpp ../Source/FreeImage/MNGHelper.cpp ../Source/FreeImage/Plugin.cpp ../Source/FreeImage/PluginBMP.cpp ../Source/FreeImage/PluginCUT.cpp ../Source/FreeImage/PluginDDS.cpp ../Source/FreeImage/PluginEXR.cpp ../Source/FreeImage/PluginG3.cpp ../Source/FreeImage/PluginGIF.cpp ../Source/FreeImage/PluginHDR.cpp ../Source/FreeImage/PluginICO.cpp ../Source/FreeImage/PluginIFF.cpp ../Source/FreeImage/PluginJ2K.cpp ../Source/FreeImage/PluginJNG.cpp ../Source/FreeImage/PluginJP2.cpp ../Source/FreeImage/PluginJPEG.cpp ../Source/FreeImage/PluginKOALA.cpp ../Source/FreeImage/PluginMNG.cpp ../Source/FreeImage/PluginPCD.cpp ../Source/FreeImage/PluginPCX.cpp ../Source/FreeImage/PluginPFM.cpp ../Source/FreeImage/PluginPICT.cpp ../Source/FreeImage/PluginPNG.cpp ../Source/FreeImage/PluginPNM.cpp ../Source/FreeImage/PluginPSD.cpp ../Source/FreeImage/PluginRAS.cpp ../Source/FreeImage/PluginRAW.cpp ../Source/FreeImage/PluginSGI.cpp ../Source/FreeImage/PluginTARGA.cpp ../Source/FreeImage/PluginTIFF.cpp ../Source/FreeImage/PluginWBMP.cpp ../Source/FreeImage/PluginXBM.cpp ../Source/FreeImage/PluginXPM.cpp ../Source/FreeImage/PSDParser.cpp ../Source/FreeImage/TIFFLogLuv.cpp ../Source/FreeImage/Conversion.cpp ../Source/FreeImage/Conversion16_555.cpp ../Source/FreeImage/Conversion16_565.cpp ../Source/FreeImage/Conversion24.cpp ../Source/FreeImage/Conversion32.cpp ../Source/FreeImage/Conversion4.cpp ../Source/FreeImage/Conversion8.cpp ../Source/FreeImage/ConversionFloat.cpp ../Source/FreeImage/ConversionRGB16.cpp ../Source/FreeImage/ConversionRGBF.cpp ../Source/FreeImage/ConversionType.cpp ../Source/FreeImage/ConversionUINT16.cpp ../Source/FreeImage/Halftoning.cpp ../Source/FreeImage/tmoColorConvert.cpp ../Source/FreeImage/tmoDrago03.cpp ../Source/FreeImage/tmoFattal02.cpp ../Source/FreeImage/tmoReinhard05.cpp ../Source/FreeImage/ToneMapping.cpp ../Source/FreeImage/NNQuantizer.cpp ../Source/FreeImage/WuQuantizer.cpp ../Source/DeprecationManager/Deprecated.cpp ../Source/DeprecationManager/DeprecationMgr.cpp ../Source/FreeImage/CacheFile.cpp ../Source/FreeImage/MultiPage.cpp ../Source/FreeImage/ZLibInterface.cpp ../Source/Metadata/Exif.cpp ../Source/Metadata/FIRational.cpp ../Source/Metadata/FreeImageTag.cpp ../Source/Metadata/IPTC.cpp ../Source/Metadata/TagConversion.cpp ../Source/Metadata/TagLib.cpp ../Source/Metadata/XTIFF.cpp ../Source/FreeImageToolkit/Background.cpp ../Source/FreeImageToolkit/BSplineRotate.cpp ../Source/FreeImageToolkit/Channels.cpp ../Source/FreeImageToolkit/ClassicRotate.cpp ../Source/FreeImageToolkit/Colors.cpp ../Source/FreeImageToolkit/CopyPaste.cpp ../Source/FreeImageToolkit/Display.cpp ../Source/FreeImageToolkit/Flip.cpp ../Source/FreeImageToolkit/JPEGTransform.cpp ../Source/FreeImageToolkit/MultigridPoissonSolver.cpp ../Source/FreeImageToolkit/Rescale.cpp ../Source/FreeImageToolkit/Resize.cpp ../Source/LibJPEG/./jaricom.c ../Source/LibJPEG/jcapimin.c ../Source/LibJPEG/jcapistd.c ../Source/LibJPEG/./jcarith.c ../Source/LibJPEG/jccoefct.c ../Source/LibJPEG/jccolor.c ../Source/LibJPEG/jcdctmgr.c ../Source/LibJPEG/jchuff.c ../Source/LibJPEG/jcinit.c ../Source/LibJPEG/jcmainct.c ../Source/LibJPEG/jcmarker.c ../Source/LibJPEG/jcmaster.c ../Source/LibJPEG/jcomapi.c ../Source/LibJPEG/jcparam.c ../Source/LibJPEG/jcprepct.c ../Source/LibJPEG/jcsample.c ../Source/LibJPEG/jctrans.c ../Source/LibJPEG/jdapimin.c ../Source/LibJPEG/jdapistd.c ../Source/LibJPEG/./jdarith.c ../Source/LibJPEG/jdatadst.c ../Source/LibJPEG/jdatasrc.c ../Source/LibJPEG/jdcoefct.c ../Source/LibJPEG/jdcolor.c ../Source/LibJPEG/jddctmgr.c ../Source/LibJPEG/jdhuff.c ../Source/LibJPEG/jdinput.c ../Source/LibJPEG/jdmainct.c ../Source/LibJPEG/jdmarker.c ../Source/LibJPEG/jdmaster.c ../Source/LibJPEG/jdmerge.c ../Source/LibJPEG/jdpostct.c ../Source/LibJPEG/jdsample.c ../Source/LibJPEG/jdtrans.c ../Source/LibJPEG/jerror.c ../Source/LibJPEG/jfdctflt.c ../Source/LibJPEG/jfdctfst.c ../Source/LibJPEG/jfdctint.c ../Source/LibJPEG/jidctflt.c ../Source/LibJPEG/jidctfst.c ../Source/LibJPEG/jidctint.c ../Source/LibJPEG/jmemmgr.c ../Source/LibJPEG/jmemnobs.c ../Source/LibJPEG/jquant1.c ../Source/LibJPEG/jquant2.c ../Source/LibJPEG/jutils.c ../Source/LibJPEG/transupp.c ../Source/LibPNG/./png.c ../Source/LibPNG/./pngerror.c ../Source/LibPNG/./pngget.c ../Source/LibPNG/./pngmem.c ../Source/LibPNG/./pngpread.c ../Source/LibPNG/./pngread.c ../Source/LibPNG/./pngrio.c ../Source/LibPNG/./pngrtran.c ../Source/LibPNG/./pngrutil.c ../Source/LibPNG/./pngset.c ../Source/LibPNG/./pngtrans.c ../Source/LibPNG/./pngwio.c ../Source/LibPNG/./pngwrite.c ../Source/LibPNG/./pngwtran.c ../Source/LibPNG/./pngwutil.c ../Source/LibTIFF4/./tif_aux.c ../Source/LibTIFF4/./tif_close.c ../Source/LibTIFF4/./tif_codec.c ../Source/LibTIFF4/./tif_color.c ../Source/LibTIFF4/./tif_compress.c ../Source/LibTIFF4/./tif_dir.c ../Source/LibTIFF4/./tif_dirinfo.c ../Source/LibTIFF4/./tif_dirread.c ../Source/LibTIFF4/./tif_dirwrite.c ../Source/LibTIFF4/./tif_dumpmode.c ../Source/LibTIFF4/./tif_error.c ../Source/LibTIFF4/./tif_extension.c ../Source/LibTIFF4/./tif_fax3.c ../Source/LibTIFF4/./tif_fax3sm.c ../Source/LibTIFF4/./tif_flush.c ../Source/LibTIFF4/./tif_getimage.c ../Source/LibTIFF4/./tif_jpeg.c ../Source/LibTIFF4/./tif_luv.c ../Source/LibTIFF4/./tif_lzma.c ../Source/LibTIFF4/./tif_lzw.c ../Source/LibTIFF4/./tif_next.c ../Source/LibTIFF4/./tif_ojpeg.c ../Source/LibTIFF4/./tif_open.c ../Source/LibTIFF4/./tif_packbits.c ../Source/LibTIFF4/./tif_pixarlog.c ../Source/LibTIFF4/./tif_predict.c ../Source/LibTIFF4/./tif_print.c ../Source/LibTIFF4/./tif_read.c ../Source/LibTIFF4/./tif_strip.c ../Source/LibTIFF4/./tif_swab.c ../Source/LibTIFF4/./tif_thunder.c ../Source/LibTIFF4/./tif_tile.c ../Source/LibTIFF4/./tif_version.c ../Source/LibTIFF4/./tif_warning.c ../Source/LibTIFF4/./tif_write.c ../Source/LibTIFF4/./tif_zip.c ../Source/ZLib/./adler32.c ../Source/ZLib/./compress.c ../Source/ZLib/./crc32.c ../Source/ZLib/./deflate.c ../Source/ZLib/./gzclose.c ../Source/ZLib/./gzlib.c ../Source/ZLib/./gzread.c ../Source/ZLib/./gzwrite.c ../Source/ZLib/./infback.c ../Source/ZLib/./inffast.c ../Source/ZLib/./inflate.c ../Source/ZLib/./inftrees.c ../Source/ZLib/./trees.c ../Source/ZLib/./uncompr.c ../Source/ZLib/./zutil.c ../Source/LibOpenJPEG/bio.c ../Source/LibOpenJPEG/./cidx_manager.c ../Source/LibOpenJPEG/cio.c ../Source/LibOpenJPEG/dwt.c ../Source/LibOpenJPEG/event.c ../Source/LibOpenJPEG/image.c ../Source/LibOpenJPEG/j2k.c ../Source/LibOpenJPEG/j2k_lib.c ../Source/LibOpenJPEG/jp2.c ../Source/LibOpenJPEG/jpt.c ../Source/LibOpenJPEG/mct.c ../Source/LibOpenJPEG/mqc.c ../Source/LibOpenJPEG/openjpeg.c ../Source/LibOpenJPEG/./phix_manager.c ../Source/LibOpenJPEG/pi.c ../Source/LibOpenJPEG/./ppix_manager.c ../Source/LibOpenJPEG/raw.c ../Source/LibOpenJPEG/t1.c ../Source/LibOpenJPEG/t2.c ../Source/LibOpenJPEG/tcd.c ../Source/LibOpenJPEG/tgt.c ../Source/LibOpenJPEG/./thix_manager.c ../Source/LibOpenJPEG/./tpix_manager.c ../Source/OpenEXR/./IlmImf/ImfAttribute.cpp ../Source/OpenEXR/./IlmImf/ImfB44Compressor.cpp ../Source/OpenEXR/./IlmImf/ImfBoxAttribute.cpp ../Source/OpenEXR/./IlmImf/ImfChannelList.cpp ../Source/OpenEXR/./IlmImf/ImfChannelListAttribute.cpp ../Source/OpenEXR/./IlmImf/ImfChromaticities.cpp ../Source/OpenEXR/./IlmImf/ImfChromaticitiesAttribute.cpp ../Source/OpenEXR/./IlmImf/ImfCompressionAttribute.cpp ../Source/OpenEXR/./IlmImf/ImfCompressor.cpp ../Source/OpenEXR/./IlmImf/ImfConvert.cpp ../Source/OpenEXR/./IlmImf/ImfCRgbaFile.cpp ../Source/OpenEXR/./IlmImf/ImfDoubleAttribute.cpp ../Source/OpenEXR/./IlmImf/ImfEnvmap.cpp ../Source/OpenEXR/./IlmImf/ImfEnvmapAttribute.cpp ../Source/OpenEXR/./IlmImf/ImfFloatAttribute.cpp ../Source/OpenEXR/./IlmImf/ImfFrameBuffer.cpp ../Source/OpenEXR/./IlmImf/ImfFramesPerSecond.cpp ../Source/OpenEXR/./IlmImf/ImfHeader.cpp ../Source/OpenEXR/./IlmImf/ImfHuf.cpp ../Source/OpenEXR/./IlmImf/ImfInputFile.cpp ../Source/OpenEXR/./IlmImf/ImfIntAttribute.cpp ../Source/OpenEXR/./IlmImf/ImfIO.cpp ../Source/OpenEXR/./IlmImf/ImfKeyCode.cpp ../Source/OpenEXR/./IlmImf/ImfKeyCodeAttribute.cpp ../Source/OpenEXR/./IlmImf/ImfLineOrderAttribute.cpp ../Source/OpenEXR/./IlmImf/ImfLut.cpp ../Source/OpenEXR/./IlmImf/ImfMatrixAttribute.cpp ../Source/OpenEXR/./IlmImf/ImfMisc.cpp ../Source/OpenEXR/./IlmImf/ImfOpaqueAttribute.cpp ../Source/OpenEXR/./IlmImf/ImfOutputFile.cpp ../Source/OpenEXR/./IlmImf/ImfPizCompressor.cpp ../Source/OpenEXR/./IlmImf/ImfPreviewImage.cpp ../Source/OpenEXR/./IlmImf/ImfPreviewImageAttribute.cpp ../Source/OpenEXR/./IlmImf/ImfPxr24Compressor.cpp ../Source/OpenEXR/./IlmImf/ImfRational.cpp ../Source/OpenEXR/./IlmImf/ImfRationalAttribute.cpp ../Source/OpenEXR/./IlmImf/ImfRgbaFile.cpp ../Source/OpenEXR/./IlmImf/ImfRgbaYca.cpp ../Source/OpenEXR/./IlmImf/ImfRleCompressor.cpp ../Source/OpenEXR/./IlmImf/ImfScanLineInputFile.cpp ../Source/OpenEXR/./IlmImf/ImfStandardAttributes.cpp ../Source/OpenEXR/./IlmImf/ImfStdIO.cpp ../Source/OpenEXR/./IlmImf/ImfStringAttribute.cpp ../Source/OpenEXR/./IlmImf/ImfStringVectorAttribute.cpp ../Source/OpenEXR/./IlmImf/ImfTestFile.cpp ../Source/OpenEXR/./IlmImf/ImfThreading.cpp ../Source/OpenEXR/./IlmImf/ImfTileDescriptionAttribute.cpp ../Source/OpenEXR/./IlmImf/ImfTiledInputFile.cpp ../Source/OpenEXR/./IlmImf/ImfTiledMisc.cpp ../Source/OpenEXR/./IlmImf/ImfTiledOutputFile.cpp ../Source/OpenEXR/./IlmImf/ImfTiledRgbaFile.cpp ../Source/OpenEXR/./IlmImf/ImfTileOffsets.cpp ../Source/OpenEXR/./IlmImf/ImfTimeCode.cpp ../Source/OpenEXR/./IlmImf/ImfTimeCodeAttribute.cpp ../Source/OpenEXR/./IlmImf/ImfVecAttribute.cpp ../Source/OpenEXR/./IlmImf/ImfVersion.cpp ../Source/OpenEXR/./IlmImf/ImfWav.cpp ../Source/OpenEXR/./IlmImf/ImfZipCompressor.cpp ../Source/OpenEXR/./Imath/ImathBox.cpp ../Source/OpenEXR/./Imath/ImathColorAlgo.cpp ../Source/OpenEXR/./Imath/ImathFun.cpp ../Source/OpenEXR/./Imath/ImathMatrixAlgo.cpp ../Source/OpenEXR/./Imath/ImathRandom.cpp ../Source/OpenEXR/./Imath/ImathShear.cpp ../Source/OpenEXR/./Imath/ImathVec.cpp ../Source/OpenEXR/./Iex/IexBaseExc.cpp ../Source/OpenEXR/./Iex/IexThrowErrnoExc.cpp ../Source/OpenEXR/./Half/half.cpp ../Source/OpenEXR/./IlmThread/IlmThread.cpp ../Source/OpenEXR/./IlmThread/IlmThreadMutex.cpp ../Source/OpenEXR/./IlmThread/IlmThreadPool.cpp ../Source/OpenEXR/./IlmThread/IlmThreadSemaphore.cpp ../Source/LibRawLite/./internal/dcraw_common.cpp ../Source/LibRawLite/./internal/dcraw_fileio.cpp ../Source/LibRawLite/./internal/demosaic_packs.cpp ../Source/LibRawLite/./src/libraw_c_api.cpp ../Source/LibRawLite/./src/libraw_cxx.cpp ../Source/LibRawLite/./src/libraw_datastream.cpp 

LOCAL_MODULE := FreeImage

GLOBAL_CFLAGS   := -O3 -DHAVE_CONFIG_H=1 -DFREEIMAGE_LIB -isystem $(SYSROOT)/usr/include/ 

ifeq ($(TARGET_ARCH),x86)
    LOCAL_CFLAGS   := $(GLOBAL_CFLAGS)
else
    LOCAL_CFLAGS   := -mfpu=vfp -mfloat-abi=softfp -fno-short-enums $(GLOBAL_CFLAGS)
endif

LOCAL_C_INCLUDES := $(GLOBAL_C_INCLUDES)

include $(BUILD_STATIC_LIBRARY) 
```

3）提供Android的libc中缺少的一些功能：

```
/// C-runtime patch
extern "C"
{
    // used deep inside FreeImage
    void* lfind( const void * key, const void * base, size_t num, size_t width, int (*fncomparison)(const void *, const void * ) )
    {
        char* Ptr = (char*)base;

        for ( size_t i = 0; i != num; i++, Ptr+=width )
        {
            if ( fncomparison( key, Ptr ) == 0 ) return Ptr;
        }

        return NULL;
    }

    // used in libcompress
    int fseeko64(FILE *stream, off64_t offset, int whence)
    {
        return fseek( stream, int( offset & 0xFFFFFFFF ), whence );
    }

    // used in libcompress
    off64_t ftello64(FILE *stream)
    {
        return ftell( stream );
    }
} // extern C 
```

现在你可以运行`ndk-build`编译你的 FreeImage。

**PS** Precompiled Android 版本可从Linderdaum 引擎 SDK 中的[http://www.linderdaum.com获得。](http://www.linderdaum.com)

# jsf - 带参数的 JSF 托管 bean 重定向，无需查看 URL

> ID：11718542
> 
> 赞同：2
> 
> 时间：2012-07-30T09:19:49.727
> 
> 标签：jsf, jsf-2, managed-bean

我正在尝试通过从托管 bean 重定向来从一个 jsf 重定向到另一个，如下所示：

```
return "page2?faces-redirect=true&parameter1=a&parameter2=b"; 
```

但我可以看到网址中的参数。是否可以重定向到 page2 但不查看传递的参数？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:45:46.020

将它们存储在 cookie 或会话中。

# wpf - 如何让 WPF 页面导航代码看起来更好看？

> ID：11718547
> 
> 赞同：0
> 
> 时间：2012-07-30T09:20:09.733
> 
> 标签：wpf

我想通过 WPF 制作一个包含几页的程序。

我现在有一个`Window`和几个`Page`。

为了导航，我使用

```
this.Content = new Page1(); 
```

在主窗口中（从`Window`到`Page`），以及

```
((Window)this.Parent).Content = new Page1(); 
```

页面之间（从`Page`到`Page`），因为`Page`只能是`Window`or的子元素`Frame`。

但是，上面的第二行代码看起来很丑。

有没有更好的方法来实现相同的目标？

[我之前从几个 Windows Phone 应用程序中编写过代码，我认为在 s 之间导航可能`Page`比隐藏/显示元素（例如`Grid`s）更好。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:22:20.117

如果您的导航代码在您的 Page 类上，则：

*   将其移至窗口类
*   在 Page 类中创建一个事件，并在 Window 类中对其作出反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:23:17.763

有什么理由不能在 Window 中放一个 Frame 吗？

您可以使用 NavigationService。

[http://msdn.microsoft.com/en-us/library/ms750478.aspx](http://msdn.microsoft.com/en-us/library/ms750478.aspx)

[http://www.paulstovell.com/wpf-navigation](http://www.paulstovell.com/wpf-navigation)

也许这会有所帮助：

[http://azerdark.wordpress.com/2010/04/23/multi-page-application-in-wpf/](http://azerdark.wordpress.com/2010/04/23/multi-page-application-in-wpf/)

# java - 触摸超出编辑字段时如何自动隐藏虚拟键盘？

> ID：11718548
> 
> 赞同：1
> 
> 时间：2012-07-30T09:20:18.143
> 
> 标签：java, blackberry, virtual-keyboard

在android中，我可以这样做，用户可以在editview之外单击以隐藏虚拟键盘。

```
@Override
public boolean dispatchTouchEvent(MotionEvent event) {

    View v = getCurrentFocus();
    boolean ret = super.dispatchTouchEvent(event);

    if (v instanceof EditText) {
        View w = getCurrentFocus();
        int scrcoords[] = new int[2];
        w.getLocationOnScreen(scrcoords);
        float x = event.getRawX() + w.getLeft() - scrcoords[0];
        float y = event.getRawY() + w.getTop() - scrcoords[1];

        if (event.getAction() == MotionEvent.ACTION_UP
                && (x < w.getLeft() || x >= w.getRight() || y < w.getTop() || y > w
                        .getBottom())) {

            InputMethodManager imm = (InputMethodManager) getSystemService(INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(getWindow().getCurrentFocus()
                    .getWindowToken(), 0);
        }
    }
    return ret;
} 
```

黑莓呢？我只想跑`VirtualKeyboard.isSupported()`。

**更新**

```
public class Custom_EditField extends EditField {
private int width, row, color;
private MainScreen mainscreen;

Custom_EditField(long style, int width, int row, MainScreen mainscreen) {
    super(style);
    this.width = width;
    this.row = row;
    this.mainscreen = mainscreen;
}

public int getPreferredHeight() {
    return Font.getDefault().getHeight() * row;
}

public int getPreferredWidth() {
    return width;
}

protected void onFocus(int direction) {
    if (VirtualKeyboard.isSupported())
        mainscreen.getVirtualKeyboard().setVisibility(
                VirtualKeyboard.SHOW_FORCE);
    invalidate();
    super.onFocus(direction);
}

protected void onUnfocus() {
    if (VirtualKeyboard.isSupported())
        mainscreen.getVirtualKeyboard().setVisibility(
                VirtualKeyboard.HIDE_FORCE);
    invalidate();
    super.onUnfocus();
}

public boolean isFocusable() {
    return true;
}

protected void layout(int maxWidth, int maxHeight) {
    super.layout(maxWidth,
            Math.min(maxHeight, Font.getDefault().getHeight() * row));
    super.setExtent(maxWidth,
            Math.min(maxHeight, Font.getDefault().getHeight() * row));
}

protected void paint(Graphics graphics) {
    int rectHeight = getPreferredHeight();
    int rectWidth = getPreferredWidth();
    try {
        color = Color.BLACK;
        graphics.setColor(color);
        graphics.drawRect(0, 0, rectWidth, rectHeight);
        super.paint(graphics);
    } finally {
        graphics.setColor(color);
    }
}
} 
```

如果您单击另一个字段而不是任何点，此编辑字段将隐藏键盘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:37:48.003

我有用于显示或隐藏键盘的实用程序代码。这应该对 OS 4.7 及更高版本有效。如果您需要支持较低的操作系统版本，请告诉我。

```
 /** Hides the virtual keyboard, if there is one showing. */
   public static void hideKeyboard() {
      VirtualKeyboard kb = UiApplication.getUiApplication().getActiveScreen().getVirtualKeyboard();
      if (kb != null) {
         kb.setVisibility(VirtualKeyboard.HIDE);
      }
   }

   /** @return TRUE if the virtual keyboard is hidden, or not supported */
   public static boolean isKeyboardHidden() {
      if (VirtualKeyboard.isSupported()) {
         VirtualKeyboard kb = UiApplication.getUiApplication().getActiveScreen().getVirtualKeyboard();
         if (kb != null) {
            int visibility = kb.getVisibility();
            return ((visibility == VirtualKeyboard.HIDE)
                    || (visibility == VirtualKeyboard.HIDE_FORCE));
         }
      }
      return true;
   } 
```

请注意，我制作了这些`static`功能。所以，如果你把它们放在一个名为 的类中`UiUtilities`，那么你会这样称呼它们：

```
 if (!UiUtilities.isKeyboardHidden()) {
     UiUtilities.hideKeyboard();
 } 
```

As far as **where** to trigger this code, here's what I recommend, **instead of** overriding `onUnfocus()`. I'm not sure this is the easiest, or most efficient way to solve the problem (so I welcome other answers!), but I think this will work.

I told you a couple answers ago that you normally should **not** override the `touchEvent()` method in your code. For things like normal buttons, I think that's true. This might be one example where you need to. You should have a `Manager` (or `VerticalFielManager`, or similar) that represents the screen that this `EditField` is on. In that manager, implement the `touchEvent()` method like this:

```
import net.rim.device.api.ui.TouchEvent;

   protected boolean touchEvent(TouchEvent event) {
      // We take action when the user completes a click (a.k.a. unclick)
      int eventCode = event.getEvent();
      if ((eventCode == TouchEvent.UNCLICK) || (eventCode == TouchEvent.DOWN)) {
         // Get the touch location, within this Manager
         int x = event.getX(1);
         int y = event.getY(1);

         if ((x >= 0) && (y >= 0) && (x < getWidth()) && (y < getHeight())) {
            int field = getFieldAtLocation(x, y);
            if (field >= 0) {
               // Let event propagate to child field
               return super.touchEvent(event);
            } else {
               if (eventCode == TouchEvent.UNCLICK) {
                  // A completed click anywhere else in this manager should dismiss the keyboard
                  UiUtilities.hideKeyboard();
               } else {
                  // This is just a soft touch (TouchEvent.DOWN), without full click
                  setFocus();
               }
               // Consume the event
               return true;
            }
         }
      }
      // Event wasn't for us, let superclass handle in default manner
      return super.touchEvent(event);
   } 
```

Try that. You might need to change my logic, depending on whether you want to hide the keyboard for a full **click**, versus a simple touch **down** (if you're new to BlackBerry, it might not be clear what the difference between those are). But, I think this should get you close(r).

# apache - 'Httpd' 中的 'd' 代表守护进程？

> ID：11718549
> 
> 赞同：-4
> 
> 时间：2012-07-30T09:20:22.070
> 
> 标签：apache

我想知道“Httpd”这个名字是怎么来的，特别是“d”代表什么。它是像“initd”一样的“守护进程”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:23:57.593

可能是守护进程，因为根据 apache 网站 httpd.apache.org/docs/2.2/programs/httpd.html，它“设计为作为独立守护进程运行”

# javascript - 为什么jquery append在phonegap ios中不起作用

> ID：11718553
> 
> 赞同：0
> 
> 时间：2012-07-30T09:20:39.573
> 
> 标签：javascript, jquery, ios, cordova

我想向 div 添加一些 html 并使用此代码（在`document.ready`函数中）：

```
var html= "<h2>Name:"+JSONObject.name+"</h2>" 
html += "<h2>Address:" +JSONObject.address+"</h2>";  
html += "<h2>Age:" +JSONObject.age+"</h2>";  
html += "<h2>Phone No.:"+JSONObject.phone+"</h2>";  
html += "<h2>Mobile No.:"+JSONObject.MobileNo+"</h2>";
$('#locationresultholder').append(html); 
```

现在在我拥有的 html 文件的正文中：

```
<div id="locationresultholder"></div> 
```

现在如果我启动 ios 模拟器，我看不到我想要附加的 HTML。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:39:29.640

首先你应该检查是否包含jquery的文件~~例如做一个测试：

```
$(function(){
alert("jquery");
}) 
```

你可以使用firebug检查jquery文件路径，检查404错误，这是我知道的，希望对你有用

# php - 一个简单的 glob() 目录更改问题

> ID：11718561
> 
> 赞同：0
> 
> 时间：2012-07-30T09:21:15.910
> 
> 标签：php, directory, glob

我在服务器上有一个主目录，其中有一个名为 upload 的子目录，其中有一组图片。我想显示上传目录中的所有图片名称。我正在使用以下代码：

```
 foreach(glob("".DIRECTORY_SEPARATOR."upload".DIRECTORY_SEPARATOR."*.{jpg,gif,png}", GLOB_BRACE) as $filename)
                {
                    echo $filename.'<br/>';
                } 
```

并且没有结果（白屏）。但是，当将它用于当前目录或上层（使用 ../）时，它可以正常工作。我确定这不是权限问题，并且上传目录中有文件，但问题仍然存在。有人可以帮我解决吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:25:02.050

从模式中删除第一个 DIRECTORY_SEPARATOR。这是假设您在主目录中。

```
foreach(glob("upload".DIRECTORY_SEPARATOR."*.{jpg,gif,png}", GLOB_BRACE) as $filename)
{
    echo $filename.'<br/>';
} 
```

# java - 如何在 Java 中分离 MVC 设计模式的类（KeyListener 与 JFrame 分离）？

> ID：11718565
> 
> 赞同：0
> 
> 时间：2012-07-30T09:21:26.893
> 
> 标签：java, model-view-controller, design-patterns, keylistener

我正在使用 MVC 设计模式在 java 中制作一个打砖块游戏，但我不知道如何使 Controller 类与视图类分开。它应该是足够简单的任务，我想在控制器类中制作 keyListener，同时将所有视觉内容保留在 View 类中（我可以自己处理模型）。由于某种原因，我找不到如何做到这一点。现在我有一个扩展 JFrame 并实现 keylistener 的视图类。

我更喜欢使用代码发布 2 个小类的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:40:16.120

在 Swing 中，`View`和`Controller`大多是相同的类，例如[JTable](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html) (View & Controller) + [TableModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/TableModel.html) (Model)。
如果你想要一个干净的分离，你可以看看[JGoodies](http://www.google.de/url?sa=t&rct=j&q=jgoodies&source=web&cd=1&ved=0CFQQFjAA&url=http%3A%2F%2Fwww.jgoodies.com%2F&ei=B2EWUNqwIonR4QTb4YCYDw&usg=AFQjCNEwECNCdkUN_ZYGrOYsfkLGIogO8w)，它是 Swing 的数据绑定框架，但我不确定它是否是游戏的最佳解决方案。
当然你可以实现你自己的`Logic Layer`，例如

```
public interface GameStateListener {
  public void playerPositionChanged(Player p, Position oldPos, Position newPos);
}

// Stores the current state of the game
public class DefaultGameState implements IGameState {
  public void addGameStateListener(GameStateListener) {...}
}

// Contains the logic of the game
public class DefaultGameLogic implements IGameLogic {
  public DefaultGameLogic(IGameState gameState) {...}
  public void doSomething(...) { /* update game state */ }
  ...
}

// displays information of the game state and translates Swing's UI
// events into method calls of the game logic
public class MyFrame extends JFrame implements GameStateListener {
  private JButton btnDoSomething;

  public MyFrame(IGameLogic gameLogic, IGameState gameState) {
    // Add ourself to the listener list to get notified about changes in
    // the game state
    gameState.addGameStateListener(this);

    // Add interaction handler that converts Swing's UI event
    // into method invocation of the game logic - which itself
    // updates the game state
    btnDoSomething.addActionListener(new ActionListener() {
      public void actionPerformed() {
        gameLogic.doSomething();
      }
    });
  }

  // gets invoked when the game state has changed 
  // (might be by game logic or networking code - if there is a multiplayer ;) )
  public void playerPositionChanged(Player p, Position oldPos, Position newPos) {
    // update UI
  }
} 
```

使用 Java 的[Observable](http://docs.oracle.com/javase/6/docs/api/java/util/Observable.html)和[Observer](http://docs.oracle.com/javase/6/docs/api/java/util/Observer.html)接口并不是很方便，因为您需要找出被观察对象的哪些属性发生了变化。
因此，使用自定义回调接口是实现这一点的常用方法。

# c - 循环中的 snprintf 在 linux 上不起作用

> ID：11718573
> 
> 赞同：1
> 
> 时间：2012-07-30T09:21:57.753
> 
> 标签：c, linux

`snprintf`在循环中不起作用，`linux`但它在`windows`.

```
#include <stdio.h>
#include <stdlib.h>

    int main( int argc, char **argv) {
      char buffer[255] ={0};
      for ( int i = 0; i < 10; i++) {
        snprintf(buffer, 255, "%s:%x\0",buffer,  i );
      }
      printf ( "BUFFER  = %s\n", buffer );
      return 0;
    } 
```

此代码不附加现有的`buffer`，但只采用最后一次迭代值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T09:30:35.343

您可以避免将缓冲区用作目标字符串和作为这样的参数的未定义行为：

```
#include <stdio.h>
#include <stdlib.h>

int main( int argc, char **argv) {
  char buffer[255] ={0};
  int offset = 0;
  for ( int i = 0; i < 10; i++) {
    offset += snprintf(buffer + offset, 255 - offset, ":%x\0", i);
  }
  printf ( "BUFFER  = %s\n", buffer );
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T09:28:23.690

`sprintf()`将结果数组添加到自身是未定义的行为。

编辑：如果你想要一些有效的代码，你在这里：使用`strcat()`（或更安全的 strncat 等。在此处插入关于缓冲区溢出的常规安全讨论）：

```
#include <stdio.h>
#include <stdlib.h>

int main( int argc, char **argv) {
    char buffer[255] = { 0 };
    char fmtbuf[64];

    int i;
    for (i = 0; i < 10; i++) {
        snprintf(fmtbuf, 64, "%x", fmtbuf, i);
        strcat(buffer, fmtbuf);
    }

    printf ("BUFFER  = %s\n", buffer);
    return 0;
} 
```

另请注意， printf() 调用不需要手动写出终止零 - 它是自动添加的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T09:26:30.233

[snprintf](http://linux.die.net/man/3/snprintf)确实按照 Linux 上的指定工作，但您的代码不会附加它。阅读链接文档中的*注释！*

您不应将目标用作其参数（在格式字符串之后）。

如果您希望它追加，请确保您不会溢出固定缓冲区，或者在该缓冲区变得太小时时重新分配该缓冲区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T09:37:34.440

您不能通过“snprintf”将“缓冲区”写入自身。

测试代码如下：

```
#include <stdio.h>
#include <stdlib.h>
#include <cstring>

int main( int argc, char **argv) {
    char buffer[255] ={0};
    for ( int i = 0; i < 10; i++) {
        char tmp[255] = {0};
        strcpy(tmp, buffer);
        snprintf(buffer, 255, "%s:%x\0",tmp,  i );
        printf ( "BUFFER  = %s\n", buffer );
        }
    printf ( "BUFFER  = %s\n", buffer );  
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T09:50:24.473

该标准明确指出，该代码预计不会起作用。首先，声明了初始缓冲区参数`restrict`，这意味着它不能为另一个参数起别名。其次，本标准有以下条款只是为了强调：

> [c99](/questions/tagged/c99 "显示标记为“c99”的问题")
> 
> ## 7.19.6.5 snprintf 函数
> 
> ### 描述
> 
> 2 - [...] 如果复制发生在重叠的对象之间，则行为未定义。

# java - [Android]如何从字符串中获取物品编号（位置）[]

> ID：11718574
> 
> 赞同：3
> 
> 时间：2012-07-30T09:22:03.017
> 
> 标签：java, android, android-layout

我有一个包含多个字符串的 String[]，我要做的是根据使用的字符串设置 ProgressBar 的进度。

例如，我已经确定了字符串的数量并相应地设置了进度条的最大进度；这是清单：

```
 "zero one two three four five six seven eight nine...." 
```

..

```
 String[] cpu0freqslist = cpu0freqs.split("\\s");
 countcpu0 = cpu0freqslist.length; 
```

..

```
 ProgressBar cpu0progbar = (ProgressBar)findViewById(R.id.progressBar1);
 cpu0progbar.setMax(countcpu0); 
```

但是现在需要根据使用的item来设置progressbar的进度，不知道怎么获取item位置。

因此，如果我想将进度条设置为第五项的位置（在本例中为 6），我该怎么做 - 我怎样才能获得第五项的位置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T09:26:35.363

基本上你正在寻找的是 indexOf(...) ...

由于数组没有它，因此您必须通过它搜索才能找到所需的字符串。所以像这样（随意优化）

```
 public int indexOfString(String searchString, String[] domain)
 {
     for(int i = 0; i < domain.length; i++)
        if(searchString.equals(domain[i]))
           return i;

     return -1;
 } 
```

再说一次，如果您动态获取您的 String[] 数据，使用 ArrayList 并调用会更明智`list.indexOf(myString);`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-30T09:54:40.870

您可以使用`Arrays`实用程序类：

```
List<String> list = Arrays.asList(new String[] {"First", "Second", "Third"});
int index = list.indexOf("Second"); // 1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-30T09:26:11.340

`cpu0freqslist[5]`

这对你有帮助吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T09:38:36.223

好的，让我将您的查询分成几部分...

```
String[] arr = {"First","Second","Third"};   // String array with 3 elements

for(int i=0 ; i<arr.length ; i++){

    int j = i ;                          // Position of the element

    String s = a[i] ;                    // Element Itself

   System.out.println("The "+i+" element is  "+s);

  } 
```

# jsf - 如何在 JSF 页面中使用 Primefaces 日历？

> ID：11718576
> 
> 赞同：0
> 
> 时间：2012-07-30T09:22:09.977
> 
> 标签：jsf, jsf-2, calendar

我`h:panelGroup`在 JSF 页面中有一个用于数据选择的输入字段：

```
<h:panelGroup>Date to change password</h:panelGroup>
<h:panelGroup>
    <h:inputText value="#{AddAccountController.formMap['DATETOCHANGEPASSWD']}" autocomplete="off" >
        <f:validateLength minimum="0" maximum="35"/>
    </h:inputText>
</h:panelGroup> 
```

问题是如何将[日历](http://www.primefaces.org/showcase-labs/ui/calendarTime.jsf)集成到输入菜单中。像这样的东西：

```
<h:panelGroup>Date to change password</h:panelGroup>
<h:panelGroup>
    <h:inputText value="#{AddAccountController.formMap['DATETOCHANGEPASSWD']}" autocomplete="off" >
        <p:calendar value="#{AddAccountController.date4}" pattern="MM/dd/yyyy HH:mm:ss" />  
        <f:validateLength minimum="0" maximum="35"/>
    </h:inputText>
</h:panelGroup> 
```

我测试了代码，但它不起作用。将它用于输入字段的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:52:08.747

认为您必须在 from 中添加两个不同的字段，因为这样它不会以这种方式工作。

```
<h:panelGroup>Date to change password</h:panelGroup>
<h:panelGroup>
    <h:inputText value="#{AddAccountController.formMap['DATETOCHANGEPASSWD']}" autocomplete="off" >
        <f:validateLength minimum="0" maximum="35"/>
    </h:inputText>
    <p:calendar value="#{AddAccountController.date4}" pattern="MM/dd/yyyy HH:mm:ss"/>
</h:panelGroup> 
```

# windows - Windows 批处理文件引用问题

> ID：11718580
> 
> 赞同：0
> 
> 时间：2012-07-30T09:22:25.060
> 
> 标签：windows, windows-7, batch-file

我有以下代码，但是在执行时引号会出现问题：子字符串方法需要使用：=，但我不知道如何将它们与例如：~0,9结合起来。

```
SETLOCAL enabledelayedexpansion

set var=%1

if %var:~0,9%=="phpfile:/" (
    set url = %var:~9% 
) else (
    set url = %var:~10%
)

if "%var:~-1%"=="\" (
    set url = %url:~0,-1%"
)
if "%var:~-1%"=="/" (
    set url = %url:~0,-1%"
)

START "" "C:\Program Files (x86)\NuSphere\PhpED\7.0\phped.exe" %url:"=% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:49:39.717

您的代码中有一些语法错误。

不要在`SET`语句中添加空格，否则你会得到带有空格`url<space>`而不是`url`.

`if %var:~0,9%=="phpfile:/" (`必须引用，否则解析器将无法按预期工作。

尾随引号`set url = %url:~0,-1%"`将在末尾添加一个引号，我想您需要类似`set "url=%url:~0,-1%"`

```
set "var=%~1"

if "%var:~0,9%"=="phpfile:/" (
    set "url=%var:~9%"
) else (
    set "url=%var:~10%"
)

if "%var:~-1%"=="\" (
    set "url=%url:~0,-1%"
)
if "%var:~-1%"=="/" (
    set "url=%url:~0,-1%"
) 
```

# javascript - 无论有多少单词，都设置网格大小

> ID：11718587
> 
> 赞同：0
> 
> 时间：2012-07-30T09:22:40.937
> 
> 标签：javascript, jquery

我有一个动态生成网格的 3 个字母单词的列表。

问题是我需要一个 6x6 的网格，如果列表中没有足够的单词来促进 6x6（12 个单词），那么它不会是所需的大小，而只是一个与其中的单词一样大的网格。

我怎样才能使它始终生成 6x6 网格，随机生成单词的位置并用空单元格填充空白？

```
var listOfWords = {};

var ul = document.getElementById("wordlist");

var i;
for(i = 0; i < ul.children.length; ++i){
listOfWords[ul.children[i].getAttribute("data-word")] = {
     "pic" : ul.children[i].getAttribute("data-pic"),
     "audio" : ul.children[i].getAttribute("data-audio")
};
}

 console.log(listOfWords);
 var shuffledWords = Object.keys(listOfWords).slice(0).sort(function() {
 return 0.5 - Math.random();
 }).slice(0, 12);
 var guesses = {}
console.log(shuffledWords);
var tbl = document.createElement('table');
tbl.className = 'tablestyle';
var wordsPerRow = 2;

for (var i = 0; i < Object.keys(shuffledWords).length - 1; i += wordsPerRow) {
var row = document.createElement('tr');

for (var j = i; j < i + wordsPerRow; ++j) {
    var word = shuffledWords[j];
    guesses[word] = [];

    for (var k = 0; k < word.length; ++k) {
        var cell = document.createElement('td');

        $(cell).addClass('drop').attr('data-word', word);
        cell.textContent = word[k];
        // IF FIREFOX USE cell.textContent = word[j]; INSTEAD
        row.appendChild(cell);
    }
}
tbl.appendChild(row);
}

document.body.appendChild(tbl); 
```

我已经尝试过这个，但无法让它工作......

```
while(listOfWords.length < 12)
listOfWords.push("   "); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:35:43.350

您之前是否尝试过创建具有所需大小的表格，然后将单词放入随机的 td 和 tr？

# c++ - Asio::async_connect 和 io_service.run 不编译

> ID：11718597
> 
> 赞同：0
> 
> 时间：2012-07-30T09:23:22.923
> 
> 标签：c++, sockets, boost, boost-asio

我正在学习使用 Boost ASIO。这是我改编自 Boost doc's [chat example](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/example/chat/chat_client.cpp)的代码。

```
class AsioCommunicationService {
AsioCommunicationService::AsioCommunicationService(
        boost::asio::io_service& io_service,
        tcp::resolver::iterator endpoint_iterator)
    : io_service_(io_service),
      socket_(io_service)
{
    boost::asio::async_connect(socket_, endpoint_iterator,
        boost::bind(&AsioCommunicationService::handle_connect, this,
        boost::asio::placeholders::error));
}

void AsioCommunicationService::handle_connect(const boost::system::error_code& error)
{
    if (!error)
    {
      boost::asio::async_read(socket_,
          boost::asio::buffer(read_msg_.data(), LampMessage::header_length),
          boost::bind(&AsioCommunicationService::handle_read_header, this,
          boost::asio::placeholders::error));
    }
}
}

class Connection
{
    m_session = std::shared_ptr<AsioCommunicationService>(
            new AsioCommunicationService(io_service, iterator));
    boost::thread t(boost::bind(&boost::asio::io_service::run, &io_service));
} 
```

编译时，我收到一条错误消息，提示“async_connect”不是“boost::asio”的成员。显然，就 IDE 告诉我的内容而言，async_connect 不是 boost asio 的成员，而是 socket 的成员。我正在使用 libasiodev 1.41.3。

我试图修改对此的调用

```
tcp::endpoint endpoint = *endpoint_iterator;
socket_.async_connect(endpoint,
    boost::bind(&AsioCommunicationService::handle_connect, this,
    boost::asio::placeholders::error, ++endpoint_iterator));
//Got this error: instantiated from ‘boost::_bi::bind_t<boost::_bi::unspecified, void (networkService::AsioCommunicationService::*)(const boost::system::error_code&), boost::_bi::list3<boost::_bi::value<networkService::AsioCommunicationService*>, boost::arg<1> (*)(), boost::_bi::value<boost::asio::ip::basic_resolver_iterator<boost::asio::ip::tcp> > > >’ 
```

更新：更改 handle_connect 签名以包含迭代器参数后，我成功编译了该行。但是，编译器现在停留在对 thread.hpp 的包含

```
#include <boost/thread.hpp>
//ERROR: In function ‘boost::thread&& boost::move(boost::thread&&)’:
///usr/include/boost/thread/detail/thread.hpp:349:16: error: invalid initialization of reference of type ‘boost::thread&&’ from expression of type ‘boost::thread’
//In file included from /usr/include/boost/thread/detail/thread_heap_alloc.hpp:17:0,
//             from /usr/include/boost/thread/detail/thread.hpp:13,
//             from /usr/include/boost/thread/thread.hpp:22,
//             from /usr/include/boost/thread.hpp:13,
//             from /home/son/dev/logistics/src/frameworks/networkService/NetworkConnection.cpp:13:
///usr/include/boost/thread/pthread/thread_heap_alloc.hpp: In function ‘T* boost::detail::heap_new(A1&&) [with T = boost::detail::thread_data<void (*)()>, A1 = void (*&)()]’:
///usr/include/boost/thread/detail/thread.hpp:130:95:   instantiated from here
///usr/include/boost/thread/pthread/thread_heap_alloc.hpp:24:47: error: cannot bind ‘void (*)()’ lvalue to ‘void (*&&)()’
///usr/include/boost/thread/detail/thread.hpp:43:13: error:   initializing argument 1 of ‘boost::detail::thread_data<F>::thread_data(F&&) [with F = void (*)()]’ 
```

出于某种原因，我无法通过调用 boost::thread t(boost::bind(&boost::asio::io_service::run, &io_service)); 启动一个新线程。，即使如果我通过对 io_service.run(); 的简单调用来替换它，它也可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:13:40.463

因为你的 cb 有签名

```
void AsioCommunicationService::handle_connect(const boost::system::error_code& error) 
```

这个调用是不正确的。

```
tcp::endpoint endpoint = *endpoint_iterator;
socket_.async_connect(endpoint,
    boost::bind(&AsioCommunicationService::handle_connect, this,
    boost::asio::placeholders::error, ++endpoint_iterator)); 
```

你的最后一个标准是错误的，所以，正确的绑定是

```
boost::bind(&AsioCommunicationService::handle_connect, this,
        boost::asio::placeholders::error)); 
```

# vim - 在 vimscript 中使用来自不同函数的全局递归

> ID：11718600
> 
> 赞同：1
> 
> 时间：2012-07-30T09:23:48.030
> 
> 标签：vim

我想在 vimscript 的不同函数中使用多个全局变量，但出现以下错误：

“不能做：全局递归”

对于我的问题：我有一个配置文件，其中包含多个 XML 文件的路径。我想为配置文件中的每个路径使用一个全局变量，并为每个 XML 文件中的每个标记使用一个全局变量。

所以我有这样的事情：

> 全局搜索文件路径调用函数 X（文件路径）
> 
> 函数X（文件路径）
> 
> 编辑文件路径
> 
> 全局搜索标签调用 functionThatDoesStuff()
> 
> 函数ThatDoesStuff()
> 
> 事情发生在这里...

是否有可能使这项工作与全局变量一起使用，还是我需要使用不同的方法？

PS：我已经看过[这个问答，](https://stackoverflow.com/questions/737078/how-can-i-recursively-use-the-global-in-vim)但它对我没有帮助，因为我在不同的函数中使用了全局变量，而解决方案只显示了它是如何在“单行”中完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:31:26.997

Vimscript 似乎根本无法做到这一点，所以我想出了以下解决方案：

```
while search("the-thing-I-search-for") > 0
   call functionThatDoesStuff()
end while 
```

感谢[Martin](https://stackoverflow.com/users/341091/martin)在这件事上的帮助。

# php - Symfony 2 - 找不到“GET /videotheque”的路线

> ID：11718604
> 
> 赞同：0
> 
> 时间：2012-07-30T09:23:58.710
> 
> 标签：php, symfony, yaml

我需要一些帮助，因为我没有成功找到路线问题的根源。

这是我的`routing.yml`：

```
gstyle39VideothequeBundle:
    resource: "@gstyle39VideothequeBundle/Resources/config/routing.yml"
    prefix: /videotheque 
```

`routing.yml`在`VideothequeBundle/Resources/config/`：_

```
VideothequeBundle_homepage:
    pattern:  /
    defaults: { _controller: gstyle39VideothequeBundle:Videotheque:index } 
```

我的控制器：

```
<?php

namespace gstyle39\VideothequeBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpKernel\Exception\NotFoundHttpException;
use Symfony\Component\HttpFoundation\Response;

class VideothequeController extends Controller
{    
    public function indexAction()
    {
        return new Response("Kikoo");
    }
} 
```

就我而言，我做了一个“cache:clear”，一个检测到我的路由的“router:debug”：

```
VideothequeBundle_homepage ANY /videotheque/ 
```

我也手动删除了文件夹`app/cache`...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:35:59.710

恕我直言，您没有在应用程序全局 routing.yml (app/config/routing.yml) 中添加路由定义。

[在https://github.com/drupalmk/Jobeeto](https://github.com/drupalmk/Jobeeto)中查看我的路由定义

# apache - 重写IP规则不起作用

> ID：11718606
> 
> 赞同：1
> 
> 时间：2012-07-30T09:24:03.410
> 
> 标签：apache, .htaccess

我有以下 apache 重定向规则：

```
RewriteCond %{HTTP_HOST} ^example\.com  [OR]
RewriteCond %{HTTP_HOST} ^82\.238\.254\.181 
RewriteRule (.*) http\://www\.example\.com/$1 [R=301,L] 
```

我希望 IP 地址也应该重定向到 www 域。现在，当我在浏览器中输入 IP 时，它就变成了 www 作为前缀。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:34:28.290

`HTTP_HOST``Host`包含客户端发送的 HTTP 标头的值。

你不会在那里找到IP地址。如果用户连接到`http://82.238.254.181`，则不会有`Host`header 。

你应该使用：

```
RewriteCond %{HTTP_HOST} ="" 
```

# java - Jena、RDF 和 Jade 实施

> ID：11718609
> 
> 赞同：0
> 
> 时间：2012-07-30T09:24:11.020
> 
> 标签：java, rdf, jena, owl

我有一个 OWL 本体，我想将数据存储为 RDF 。当我在 Google 中搜索时，我看到 Jena 库用于此目的。但是我不明白如何在 Jade 中将数据表示为 RDF .. 有人可以帮助我吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T09:49:28.530

Jade 和 Jena 或多或少是独立的库，因此在项目中使用它们并不难。事实上，它们已被用于各种项目——例如，尝试在 Google 上搜索 AgentOWL。

您的代理将需要一个或多个 Jena`Model`对象来保存他们要推理的 RDF 信息。这些模型可以加载到每个代理实例的内存中，或者您可以使用持久存储，例如[TDB](http://jena.apache.org/documentation/tdb/index.html)。

当代理需要通过 Jade 发送代理间消息时，我记得 Jade 使用的默认机制是 Java 对象序列化（这可能已经改变，我已经有一段时间没有看 Jade了）。序列化不适用于 Jena 对象，您需要构建一个仅包含您要发送的 RDF 三元组的模型，然后`toString()`将其放入 ACL 消息的内容中。我建议使用 Turtle 作为序列化格式；它更紧凑，更易于阅读。

# javascript - 使用 SlickGrid 以编程方式触发单元格复制 (Ctrl+c)

> ID：11718610
> 
> 赞同：1
> 
> 时间：2012-07-30T09:24:12.147
> 
> 标签：javascript, triggers, copy, slickgrid

我正在使用's中`copy/paste`实现的功能，该功能运行良好（即，如果您选择一些单元格并按下，那么这些单元格的内容将被复制到您的剪贴板中）。`Slickgrid``slick.cellcopymanager.js``Ctrl+c`

我想以`Ctrl+c`编程方式触发操作（例如，允许通过单击按钮而不是按键来进行复制/粘贴）。我知道如何定义 keydown 事件`Ctrl+c`：

```
var e = jQuery.Event("keydown");        
e.which = 67;
e.ctrlKey = true; 
```

但是我只是找不到触发该事件的对象以及如何模拟手册`Ctrl+c`。首先，我尝试了一个无效的事件的简单触发器：

- `div_dom_from_selected_cell.trigger(e); // nothing happens`
- `grid_dom_wrapper.trigger(e); // nothing happens`
- `$('body').trigger(e); // nothing happens`
-`my_grid.trigger(e); // trigger is not a function`

然后我扩展`slick.cellcopymanager.js`以使该`handleKeyDown`功能在外部可用：

```
$.extend(this, {
  "init": init,
  "destroy": destroy,
  "clearCopySelection": clearCopySelection,
  "handleKeyDown": handleKeyDown,          // ADDED THIS LINE
  "onCopyCells": new Slick.Event(),
  "onCopyCancelled": new Slick.Event(),
  "onPasteCells": new Slick.Event()
}); 
```

并尝试使用它：

```
var copyManager = new Slick.CellCopyManager();
copyManager.init(my_grid);
copyManager.handleKeyDown(e, { cell: cell, row: row, grid: my_grid } ); 
```

尽管：-我正确选择了一个单元格（它具有`selected`类）
-`handleKeyDown`被正确触发
-`e`并且`args`内部参数`handleKeyDown`看起来不错（我正在跟踪`console.log`并且看不到手动之间的任何区别） ，但单元格的复制仍然不起作用`Ctrl+c`和程序化尝试`

**如何触发`Ctrl+c`事件以便以编程方式复制单元格？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T07:13:02.977

这对我从[示例页面](http://mleibman.github.com/SlickGrid/examples/example-spreadsheet.html)上的控制台运行很有用。

```
// Copy from row 2, column 5
var row = 2, col = 5;
grid.getSelectionModel().setSelectedRanges([new Slick.Range(row,col)]);
var e = jQuery.Event("keydown");        
e.which = 67;
e.ctrlKey = true;
grid.onKeyDown.notify(null, e); 
```

然后粘贴：

```
// Past to row 3, column 4
var row = 3, col = 4;
grid.getSelectionModel().setSelectedRanges([new Slick.Range(row,col)]);
var e = jQuery.Event("keydown");        
e.which = 86;
e.ctrlKey = true;
grid.onKeyDown.notify(null, e); 
```

# wpf - 包含带有内容的 UserControl

> ID：11718612
> 
> 赞同：3
> 
> 时间：2012-07-30T09:24:15.147
> 
> 标签：wpf, xaml, user-controls, contentpresenter

我创建了一个用户控件。我想将其包含在此代码中：

```
<UserControl1 Header="Heading">
    <TextBlock Text="My Content" />
</UserControl1> 
```

那是用户控件：

```
<UserControl x:Class="WpfApplication1.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" MinHeight="200"
             d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Resources>
        <Style TargetType="ToggleButton">
            <!-- ... -->
        </Style>        
    </UserControl.Resources>
    <StackPanel>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBlock Text="{Binding Path=Header}" Grid.Column="0" />
            <ToggleButton Name="ToggleButton" IsChecked="True" Grid.Column="2" />
        </Grid>
        <Rectangle Stroke="#c3c3c3" StrokeThickness="1" Height="1" StrokeDashArray="4 4" SnapsToDevicePixels="True" Focusable="False" />
        <!-- Content -->
        <ContentControl>
            <ContentPresenter/>
        </ContentControl>
    </StackPanel>
</UserControl> 
```

现在我的问题：

如果我将它与以下代码集成，

```
<UserControl1 Header="Heading">
    <TextBlock Text="My Content" />
</UserControl1> 
```

我收到的结果是：

![在此处输入图像描述](../Images/a7992691f3eca3d52921e11861cc80c2.png)

那不是我想要的。

但是当我将它与这段代码集成时，我得到了想要的结果。

```
<UserControls:UserControl1 Header="Heading" /> 
```

![在此处输入图像描述](../Images/9b6049c3ae509437aa2af68b05447952.png)

我的第一种方式有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T09:45:34.880

为了使事情按您期望的那样工作，您必须设置 UserControl 的`Template`：

```
<UserControl x:Class="UserCtrl.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Template>
        <ControlTemplate TargetType="UserControl">
            <StackPanel>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0"
                        Text="{Binding Path=Header,
                               RelativeSource={RelativeSource Mode=FindAncestor,
                                               AncestorType=UserControl}}}" />
                    <ToggleButton Name="ToggleButton" IsChecked="True" Grid.Column="2" />
                </Grid>
                <Rectangle Stroke="#c3c3c3" StrokeThickness="1" Height="1" StrokeDashArray="4 4" SnapsToDevicePixels="True" Focusable="False" />
                <!-- Content -->
                <ContentPresenter/>
            </StackPanel>
        </ControlTemplate>
    </UserControl.Template>
    <!-- Initial Content of the UserControl -->
    <TextBlock Text="Initial Content"/>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:33:54.217

第一种方法没有任何*问题。*它只是创建 a`UserControl1`并将内容设置为 a `TextBlock`，从而覆盖您在定义中设置的内容。第二种方法创建 a`UserControl1`并保持内容不变。

# ivy - 仅发布依赖项

> ID：11718615
> 
> 赞同：0
> 
> 时间：2012-07-30T09:24:18.480
> 
> 标签：ivy

我想将模块的依赖项与模块的 jar 工件分开发布。

```
<?xml version="1.0" encoding="UTF-8"?>
<ivy-module version="2.0">
  <info organisation="com.mycompany" module="platform" />
  <configurations defaultconfmapping="release->*;compile->*" defaultconf="release">
    <conf name="release" />
    <conf name="compile" extends="release" />
  </configurations>
  <publications>
    <artifact name="platform-api" type="jar" ext="jar" />
  </publications>
  <dependencies>
    <dependency org="com.google.inject" name="guice" rev="3.0" />
    <dependency org="org.slf4j" name="slf4j-api" rev="1.6.6" />

    <dependency org="com.google.guava" name="guava" rev="13.0-rc1" conf="compile" />
    <dependency org="log4j" name="log4j" rev="1.2.17" conf="compile" />
    <dependency org="org.slf4j" name="slf4j-log4j12" rev="1.6.6" conf="compile" />
  </dependencies>
</ivy-module> 
```

对于上面的配置，我想要一个只包含 guice 和 slf4j-api jar 的工件，没有 platform-api.jar。我目前的解决方案是在依赖模块中定义两个依赖项，一个是传递的，另一个不是：

```
<dependency org="com.mycompany" name="platform" rev="1.0-SNAPSHOT" conf="myconf->release">
  <exclude org="com.mycompany" />
</dependency>
<dependency org="com.mycompany" name="platform" rev="1.0-SNAPSHOT" transitive="false" conf="myotherconf->release" /> 
```

但是当第三个模块同时依赖于这两个模块时，这种解决方案会出现问题，而且很丑陋。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T23:24:42.570

试试这个：

```
<ivy-module version="2.0">
  <info organisation="com.mycompany" module="platform" />
  <configurations>
    <conf name="default" description="runtime dependencies and master artifact can be used with this conf" extends="runtime,master"/>
    <conf name="master"  description="contains only the artifact published by this module itself, with no transitive dependencies"/>
    <conf name="compile" description="Compile dependencies"/>
    <conf name="runtime" description="Runtime dependencies, includes compile dependencies" extends="compile"/>
  </configurations>
  <publications>
    <artifact name="platform-api" type="jar" ext="jar" conf="master"/>
  </publications>
  <dependencies>
    <!-- Compile dependencies -->
    <dependency org="com.google.inject" name="guice" rev="3.0" conf="compile->default"/>
    <dependency org="org.slf4j" name="slf4j-api" rev="1.6.6" conf="compile->default"/>
    <dependency org="com.google.guava" name="guava" rev="13.0-rc1" conf="compile->default" />

    <!-- Runtime dependencies -->
    <dependency org="log4j" name="log4j" rev="1.2.17" conf="runtime->default" />
    <dependency org="org.slf4j" name="slf4j-log4j12" rev="1.6.6" conf="runtime->default" />
  </dependencies>
</ivy-module> 
```

**笔记：**

*   请注意配置上的“扩展”属性，用于创建更大的 jar 集。
*   我建议删除默认配置映射并在每个依赖项上显式设置一个 conf 映射。在我看来更简单，最终更容易理解（不那么神奇）

既然您的模块对已发布的工件及其运行时依赖项具有单独的配置，则可以按如下方式使用单个依赖项声明将它们映射到单独的本地配置：

```
<dependency org="com.mycompany" name="platform" rev="1.0-SNAPSHOT" conf="myconf->runtime;myotherconf->master" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:54:39.780

我认为，您正在寻找的实际上是两个共享相同依赖项的项目。（巧合的是，其中一个也在使用另一个）。

您是否考虑过使用扩展[http://ant.apache.org/ivy/history/latest-milestone/ivyfile/extends.html](http://ant.apache.org/ivy/history/latest-milestone/ivyfile/extends.html)与：

```
extendType="dependencies". 
```

然后，您的平台将使用依赖项扩展 parent-ivy.xml。并且您的 Other 项目为相同的依赖项扩展了相同的 parent-ivy.xml 文件。

我不确定这是否足够。由于配置将在这里发挥作用。但也许这是一个开始。

# php - “文档已过期”，按钮提交其他操作

> ID：11718621
> 
> 赞同：0
> 
> 时间：2012-07-30T09:24:49.420
> 
> 标签：php, html, yii

我在其他操作（无表单）上使用带有“提交”的 CHtml::button，它显示了页面，但是当我单击 BACK 然后单击 NEXT 时，它显示 Document Expired

```
 <?php echo CHtml::button('title', array('submit' => array('/'.$_GET['id'].'/smthing/profile'))); //)?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T09:25:39.480

尝试从 POST 更改为 GET，例如活动表单：

```
 $form = $this->beginWidget('CActiveForm', array(
    'action' => '/',
    'method' => 'get',
    'enableClientValidation' => true,
    'clientOptions' => array(
        'validateOnSubmit' => true,
    ),
)); 
echo Chtml::submitButton('Submit');
$this->endWidget(); 
```

# c# - 我必须在我的 3 层架构应用程序中设置 SOAP 参考

> ID：11718629
> 
> 赞同：3
> 
> 时间：2012-07-30T09:25:31.707
> 
> 标签：c#, asp.net, soap, reference, n-tier-architecture

我对 3 层架构有疑问。我有一个数据层、一个服务层和一个显示层。对于测试，我使用控制台。我设置了对soap文件的引用，但我不知道必须在哪里设置soap文件的引用（在服务层还是数据层？）soap有很多功能可以创建与互联网的guestconnection。

塔拉索夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:21:57.673

**简短回答**：服务引用应始终位于`Data Tier`(as `Service Components/Agents`) 中。

**长答案**：

在 n 层架构中，以下是主要层：

```
[ Presentation Layer ]
[ Service Layer ]
[ Business Layer ]
[ Data Layer ] 
```

这`Service Layer`是为了隐藏您的业务，并`Presentation Layer`通过您的服务接口直接访问您的客户。

在这一层中，应该只提供接口（和消息/服务模型实体）。它是**您的**服务表示。

一般来说，3-tier是`Presentation Tier`>> ；通常在这一层中没有服务层元素，但您可以将它们放在逻辑层中。`Business/Logic Tier``Data Tier`

在 中`Data (Access) Layer`，您有两个主要的数据组件：`Data Access Components`& `Service Components`（也称为`Service Agents`）。**您对其他**服务的所有引用都应该在这里，因为服务是“数据提供者”。

# google-maps-markers - 谷歌地图标记中的链接

> ID：11718631
> 
> 赞同：1
> 
> 时间：2012-07-30T09:25:38.220
> 
> 标签：google-maps-markers

我无法获得在我的标记中工作的链接。

我的代码是：

```
var marker = new google.maps.Marker({ draggable: false, raiseOnDrag: false, icon: image, shape: shape, map: map, url: 'http://www.google.com/', position: myLatlng36, title:"My marker" }); 
```

它在正确的位置完美地显示了标记，但是当我单击它时没有任何反应。我也尝试添加

```
google.maps.event.addListener(marker, 'click', function() {
  window.location.href = marker.url;
}); 
```

没有结果。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:05:46.480

你测试了吗？

```
google.maps.event.addListener(marker, 'click', function() {
  window.location.href = this.url;
}); 
```

将“标记”更改为“此”？

# iphone - 如何保存来自不同视图控制器的数据并将其加载到 iOS 中的另一个视图控制器中

> ID：11718632
> 
> 赞同：0
> 
> 时间：2012-07-30T09:25:38.033
> 
> 标签：iphone, objective-c, ios, xcode, ios5

我是 iOS 新手。在浏览了很多文件后，我很困惑。这就是我必须做的。

我有几个视图控制器，每个都有 NSString 值，我将在文本字段中输入这些值并将其保存在一个公共位置，当我需要查看数据时，它将显示在`UITableview`. 我知道如何创建一个`UITableview`并在其中加载数据。但我必须知道如何保存和加载它。

到目前为止，我已经尝试了一些东西。如果我输入一个新字段，旧内容将被覆盖。我不知道从哪里开始..谁能给我一步一步的逻辑（不是代码）。这样我就可以遵循这一点。

我尝试使用 NSdefaults 但它没有我预期的效率

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T09:30:48.497

您可以通过多种方式保存数据

1.  使用 CoreData 保存数据。你会发现一些关于如何使用 CoreData 的好教程
2.  使用没有 CoreData 的 SQLite 数据库
3.  将数据保存到您的应用程序委托或可从最终视图控制器访问的视图控制器中
4.  将所有视图控制器的数据传递给最终的视图控制器
5.  将数据保存在 plist 中

可能性是无止境。最适合您的项目的是您应该使用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T09:40:25.910

1-您可以使用您的应用委托界面保存常用数据。然后您可以从其他界面访问它

2-您可以使用 NSUserDefault 来存储带有键的数据

3-创建 NSString 对象并从视图传递到另一个将数据传递给新的 NSString 对象

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T05:49:33.043

在不同的视图控制器中存储和检索数据有两个选项。

1)NSUserDefaults 是在任何其他视图控制器中存储数据和访问的最佳选择。

NSUserDefaults 类提供了方便的方法来访问常见的类型，例如 float、double、integer、Boolean。默认对象必须是一个属性列表，即以下实例（或集合实例的组合）：NSData、NSString、NSNumber、NSDate、NSArray 或 NSDictionary。

这是存储和检索数据的非常简单和最佳的方法。

如果你想了解 NSUserDefaults，我在这里分享文档。

```
https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html 
```

2) 当您希望它们可以在类或其他视图控制器之外访问时，您将创建属性。

以这种方式创建属性。`@property (nonatomic, retain) NSArray *arrayData;`然后你也可以在其他视图控制器中使用这个数组值。

属性替换了对象的访问器方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T06:26:07.403

在这里使用数据库是更好的选择。但是，如果您只需要动态地获取这些数据，那么您可以将其保存在一个数组中并通过委托获取这些公共数据。

# android - 将信息从一个意图传递到另一个意图

> ID：11718638
> 
> 赞同：-4
> 
> 时间：2012-07-30T09:25:56.097
> 
> 标签：android, android-listview

我有一个从 JSON 读取一些数据的应用程序，并且我有 2 个类可以执行此操作。

现在两个类都显示注册成员的完整列表。但我想要实现的是，当点击一个成员时，我只能看到该成员，而看不到其他成员。

这是两个类的代码：

从列表视图：

```
public class Listviewer extends ListActivity {

     @Override
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);

        setContentView(R.layout.listplaceholder);

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        JSONObject json = JSONfunctions.getJSONfromURL("http://de-saksen.nl/deelnemers.txt");

        try{

            JSONArray  deelnemers = json.getJSONArray("deelnemers");

            for(int i=0;i<deelnemers.length();i++){                     
                HashMap<String, String> map = new HashMap<String, String>();    
                JSONObject e = deelnemers.getJSONObject(i);

                map.put("id",  String.valueOf(i));
                map.put("name", "Character Naam: " +  e.getString("naamingw2"));
                map.put("sex", "Geslacht: " +  e.getString("geslacht"));
                map.put("rank", "Rang: " +  e.getString("rang"));

                mylist.add(map);            
            }   

        }catch(JSONException e)        {
             Log.e("log_tag", "Error parsing data "+e.toString());
        }

        ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main, 
                        new String[] { "name", "sex", "rank"}, 
                        new int[] { R.id.item_title, R.id.item_subtitle, R.id.item_subtitle2 });

        setListAdapter(adapter);

        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);  
        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
                Intent intent = new Intent(Listviewer.this, Profileviewer.class);   
                startActivity(intent); 
            }
        });

    }
} 
```

从个人资料来看：

```
public class Profileviewer extends ListActivity {

     @Override
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);

        setContentView(R.layout.listplaceholder);

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        JSONObject json = JSONfunctions.getJSONfromURL("http://de-saksen.nl/deelnemers.txt");

        try{

            JSONArray  deelnemers = json.getJSONArray("deelnemers");

            for(int i=0;i<deelnemers.length();i++){                     
                HashMap<String, String> map = new HashMap<String, String>();    
                JSONObject e = deelnemers.getJSONObject(i);

                map.put("id",  String.valueOf(i));
                map.put("name", "Naam: " +  e.getString("naamingw2"));
                map.put("sex", "Geslacht: " +  e.getString("geslacht"));
                map.put("rank", "Rang: " +  e.getString("rang"));
                map.put("race", "Ras: " +  e.getString("ras"));
                map.put("profession", "Beroep: " +  e.getString("beroep"));
                map.put("skills", "Hobby's: " +  e.getString("hobbys"));
                map.put("lvl", "Level: " +  e.getString("level"));
                mylist.add(map);            
            }   

        }catch(JSONException e)        {
             Log.e("log_tag", "Error parsing data "+e.toString());
        }

        ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.profile, 
                        new String[] { "name", "sex", "rank", "race", "profession", "skills", "lvl" }, 
                        new int[] { R.id.item_title, R.id.item_subtitle, R.id.item_subtitle2, R.id.item_subtitle3, R.id.item_subtitle4, R.id.item_subtitle5, R.id.item_subtitle6 });

        setListAdapter(adapter);

        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);  
        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
                Intent intent = new Intent(Profileviewer.this, Listviewer.class);   
                startActivity(intent); 
            }
        });

    }
} 
```

我侦察我必须将一个变量传递给另一个包含已单击成员的类，但是我该如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:27:49.160

使用意图：

```
lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
        Intent intent = new Intent(Profileviewer.this, Listviewer.class);
        intent.putExtra("Key", value);
        startActivity(intent); 
    }
}); 
```

然后在 Listviewer.java 中：

```
getIntent().getStringExtra("Key"); //for example 
```

要传递用户数据，请修改如下：

```
String [] users = new String[] { "name", "sex", "rank", "race", "profession", "skills", "lvl" };
int[] ids = new int[] { R.id.item_title, R.id.item_subtitle, R.id.item_subtitle2, R.id.item_subtitle3, R.id.item_subtitle4, R.id.item_subtitle5, R.id.item_subtitle6 };

ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.profile, 
                users, ids);

setListAdapter(adapter);

final ListView lv = getListView();
lv.setTextFilterEnabled(true);  
lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
        Intent intent = new Intent(Profileviewer.this, Listviewer.class);   
        intent.putExtra("Key", users[position]);
        startActivity(intent); 
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:33:13.793

```
If you want to pass int value:

categoryView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                Toast.makeText(CategoryView.this, "id::" + id,
                        Toast.LENGTH_SHORT).show();

                Intent menuIntent = new Intent(CategoryView.this,MenuListView.class);
                Bundle b = new Bundle();
                b.putInt("categoryId", (int) id); //Your id
                menuIntent.putExtras(b);
                menuIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(menuIntent);
                //finish();

            }

        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-07T08:13:58.177

您可以在使用 Extras 创建 Intent 对象时发送基本信息。看看[http://developer.android.com/guide/components/intents-filters.html](http://developer.android.com/guide/components/intents-filters.html)。

如果您必须加载大量信息而 Extras 还不够正确，您只需发送一个“密钥”，您将使用它来取回您需要的所有信息。

例如：

这节课

```
Intent intent = new Intent(thisClass, otherClass);
intent.putExtra("id", "1");
intent.putExtra("model", "model1");
startActivity(inte); 
```

其他类

```
String query = "SELECT * FROM " + T_NAME + " WHERE 'id' = " + getIntent().getIntExtra("id",0);
Cursor c = db.rawQuery(query, null) 
```

# android - Android：如何在 android 中从服务器打开 pdf 文件

> ID：11718640
> 
> 赞同：2
> 
> 时间：2012-07-30T09:26:04.180
> 
> 标签：android, pdf, iframe, pdf-generation

我是 android 编程的新手，我正在 android 中开发一个应用程序来从我的应用程序中的服务器打开一个 PDF 文件。我对此一无所知。所以请帮助我。我怎么能这样做？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T09:31:01.607

您必须尝试使用​​此代码在您的应用程序中打开 pdf 文件。

```
WebView webView = (WebView) findViewById(R.id.my_webview);
webView.setWebViewClient(new MyWebViewClient());
webView.addView(webView.getZoomControls());
webView.getSettings().setJavaScriptEnabled(true);
webView.loadUrl("http://docs.google.com/gview?embedded=true&url=http://myurl.com/demo.pdf"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T09:32:19.330

```
 String pdf = "http://www.xyzwebsite.com/yourfile.pdf"; //YOUR URL TO PDF
   String googleDocsUrl = "http://docs.google.com/viewer?url="+ pdfurl;
   Intent intent = new Intent(Intent.ACTION_VIEW);
   intent.setDataAndType(Uri.parse(googleDocsUrl ), "text/html");
   startActivity(intent); 
```

将此权限添加到清单文件

```
<uses-permission android:name="android.permission.INTERNET" > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:46:39.390

```
File file = new File("/sdcard/example.pdf");

                if (file.exists()) {
                    Uri path = Uri.fromFile(file);
                    Intent intent = new Intent(Intent.ACTION_VIEW);
                    intent.setDataAndType(path, "application/pdf");
                    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

                    try {
                        startActivity(intent);
                    } 
                    catch (ActivityNotFoundException e) {
                        Toast.makeText(OpenPdf.this, 
                            "No Application Available to View PDF", 
                            Toast.LENGTH_SHORT).show();
                          String pdf = "http://www.xyzwebsite.com/yourfile.pdf"; //YOUR URL TO PDF
                          String googleDocsUrl = "http://docs.google.com/viewer?url="+ pdfurl;
                          Intent intent = new Intent(Intent.ACTION_VIEW);
                          intent.setDataAndType(Uri.parse(googleDocsUrl ), "text/html");
                          startActivity(intent);

                    }
                }
            } 
```

# recording - 仅嗅探/记录应用层

> ID：11718642
> 
> 赞同：0
> 
> 时间：2012-07-30T09:26:05.693
> 
> 标签：recording, sniffing, network-traffic, application-layer

我正在寻找一种工具（最好在 Linux 上），它可以嗅探 UDP 流量并仅将应用程序层记录到文件中。

我不能让**tcpdump/wireshark**这样做，因为它们也总是写下层的标题。我尝试使用**snort** (./snort -qd -l ./logs)，但即使数据包中没有应用程序层数据，它也会继续将数据存储到文件中。

也许有人知道这样的工具......

哦，UDP流量也是多播的......

我还尝试了**multicat**（VideoLAN）。他们声称它是多播的netcat。但我不知道，除了我使用 netcat 手动发送的有效载荷外，它还存储了一些其他二进制垃圾（对我而言）......熟悉 multicat 的人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:45:01.200

Wireshark 具有解析大多数协议标头的过滤器，并且肯定会识别 UDP、IP、以太网等标头。我不确定您想通过日志记录完成什么，但如果文件的格式很重要（即，甚至不应该将标头存储到文件中），您可以尝试使用 UDP 代理。

使用 netcat，你可以做类似的事情

```
nc -u -l 12345 | tee mydumpfile.out | nc -u target.example.com 12345 
```

你也必须做相反的事情来转储双向通信。如果您这样做是为了进行逆向工程，您可能还需要编辑`/etc/hosts`文件以将目标 DNS 名称指向`localhost`. 我为 TCP 连接做了几次，但我没有为 UDP 尝试它，由于管道数据的缓冲，可能存在数据包边界等问题。

如果您想要最大程度的控制，请自己编写（如果您使用例如[Python+Twisted](http://twistedmatrix.com/documents/current/core/howto/index.html)则只有十几行）

# visual-c++ - 如何防止 CFrameWnd 被鼠标移动

> ID：11718647
> 
> 赞同：1
> 
> 时间：2012-07-30T09:26:28.877
> 
> 标签：visual-c++, mfc

我有一个显示在主窗口顶部显示的 CFrameWnd 的应用程序。当用户为窗口选择某种模式时，我需要窗口不可移动且不可调整大小。
我的 CFrameWnd 是用样式创建的`WS_OVERLAPPEDWINDOW | WS_THICKFRAME | WS_POPUP`

我遇到了一个解决方案，它使用 CWndOnNcHitTest 的重载来重写
`HTLEFT,HTRIGHT,HTTOP,HTTOPLEFT,HTTOPRIGHT,HTBOTTOM,HTBOTTOMLEFT,HTBOTTOMRIGHT,HTSIZE,HTCAPTION`以`HTBORDER`防止框架识别负责调整大小/移动的区域。
在我的情况下，此方法适用于调整大小，但仍然可以移动窗口，尽管 hittest 覆盖工作正常（通过跟踪验证）。

我的方法有什么问题吗，或者可能有什么东西干扰了这个解决方案，如果是这样，你有什么关于在哪里看的提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:21:10.170

您应该能够使 OnNcHitTest() 工作，不要返回 HTCAPTION。

尽管如此，移动/调整窗口大小的方法不止一种，您还必须担心系统菜单（键入 Alt+Space）。为 WM_MOVING 和 WM_SIZING 编写消息处理程序并覆盖 RECT 以使窗口保持不变。

# c# - 由多个字符分割

> ID：11718653
> 
> 赞同：5
> 
> 时间：2012-07-30T09:26:42.183
> 
> 标签：c#, split

做的结果

```
var b = "asfsadefbweabgggggggggggg".Split("ab".ToCharArray()); 
```

是 6 个字符串的列表，而我想将数组拆分为`"asfsadefbwe"`和`"gggggggggggg"`。有什么方法/方法可以正确地做到这一点（使用 C#）？

PS：我将使用一个字符串，其中包含一些由`"\r\n"`secuences 分隔的数据。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-30T09:31:17.207

```
string[] list = b.Split(new string[] { "ab" }, StringSplitOptions.None); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-30T09:28:58.353

使用另一个重载，一个不会拆分单个字符的重载：

```
 "asfsadefbweabgggggggggggg".Split(new [] {"ab" }, StringSplitOptions.None) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T09:29:19.627

您的子字符串总是相同的长度吗？如果是这样，请使用[String.Substring](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)。

# email - 如何从 apex 代码打开 Outlook 邮件

> ID：11718660
> 
> 赞同：0
> 
> 时间：2012-07-30T09:27:32.457
> 
> 标签：email, outlook, salesforce, protocols, apex-code

我是 Salesforce 开发人员。我有一个应用程序，单击 Visualforce 页面中的表中的一行后，我可以通过该应用程序阅读邮件。现在我要添加另一个增强功能：我想单击一行并打开我电脑上的 Outlook 邮件。这可能吗？是否存在可以导航到邮件的 Outlook 协议？

谢谢大家，

FP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:37:22.003

您可以在您的 VP 中创建一个指向 Outlook 邮件的链接，如下所示：

```
<a href='Outlook:00000000CC63759F18171E46835E96E44971FDFB07006446′&gt;Email subject here 
```

将**Outlook**设置为**协议**并*链接*de **GUID**（全局唯一标识符）。

阅读[此处](http://www.davidtan.org/create-hyperlinks-to-outlook-messages-folders-contacts-events/)了解更多信息

# javascript - 如何使用 Spotify 应用 API 制作大型专辑播放器？

> ID：11718663
> 
> 赞同：0
> 
> 时间：2012-07-30T09:27:40.113
> 
> 标签：javascript, api, spotify

目前在我的 Spotify 应用程序中，我有创建专辑播放器的代码（见下文）。专辑播放器的默认大小似乎是中等（128 像素 x 128 像素）。

JavaScript

```
var sp = getSpotifyApi(1),
models = sp.require("sp://import/scripts/api/models"),
views = sp.require("sp://import/scripts/api/views"),
dom = sp.require('sp://import/scripts/dom');

models.Album.fromURI('spotify:album:2fUrVWDYASjthLVsVH53zP', function(context){
  var player = new views.Player();
  player.context = context;
  sp.dom.adopt(sp.dom.queryOne('#my-album-player'), player.node);
}); 
```

HTML：

```
...
<div id="#my-album-player"></div>
... 
```

[设计指南](https://developer.spotify.com/technologies/apps/guidelines/02_app-design-guidelines.html)（参见第16.5 项）建议有 Samll、Medium、Large 和 XL 盖板尺寸可供选择。

如何修改我的代码以创建带有大 (200 像素 x 200 像素) 封面图像的专辑播放器？

[Player 视图](https://developer.spotify.com/technologies/apps/docs/beta/ca28d10757.html)的文档似乎没有帮助。

我尝试使用 CSS 将 #my-album-player div 设置为所需的大小，但这并没有调整封面大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:01:12.820

事实证明，这可以用 CSS 完成：

```
.sp-player {
  display: block !important; 
  height: 100% !important; 
  width: 100% !important;
}

#wrapper {
  width: 200px;
  height: 200px;
} 
```

和 HTML：

```
<div id="wrapper">
  <div id="#my-album-player"></div>
</div> 
```

感谢 freenode #spotify IRC 频道上的 Simon。

# php - 在更新/删除/插入上使用 Mysql 触发器

> ID：11718667
> 
> 赞同：0
> 
> 时间：2012-07-30T09:27:55.240
> 
> 标签：php, mysql, triggers

我在这里有一个任务来记录数据库中的更改。

所以我刚刚读到了触发器，这让我有兴趣尝试一下。

我在数据库中得到了这张表，描述了客户信息，

（id fornamn, efternam.. etc 是列名，下面的信息是值）

这张桌子叫做“kunder”

```
id  fornamn     efternamn   adress  ort     postnummer  foretag     telefon         email           personNmr   husNmr  organisationsNmr    produkt     uppringd    prioritet   raderad
15  Peter       Tressing    adress  ort     41676       foretag     071234565       email@email.se  123456      4       55658794            Nocria      1           0           0 
```

我称这个表为 kunder_log

```
id  fornamn     efternamn   adress  ort     postnummer  foretag     telefon         email           personNmr   husNmr  organisationsNmr    produkt     uppringd    prioritet   raderad     timestamp   type 
```

（唯一的区别是 ID 上的索引而不是主键，我添加了时间戳和类型）

（键入查询的类型（插入、删除或更新））

现在我想在执行更新/插入/删除查询时触发表中每一行的更改。

但我只想插入所做的更改，而不是旧表中的每一列。

这是可能的还是你推荐另一种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:38:44.227

基本上有两种方法可以记录在主表上所做的所有更改：

1.  如果要全局记录对表所做的所有更改，触发器是一个不错的选择。

2.  在所有存储过程中的每个插入、更新、删除语句之后将插入写入更改日志表。

我通常更喜欢第二种方法，因为它比触发器快得多。

示例表结构：

```
kunder
    all_columns

kunder_log
    change_log_id INT unsigned NOT NULL AUTO_INCREMENT PRIMARY KEY,
    all_columns
    change_type ENUM('INSERT','UPDATE','DELETE'),
    change_time TIMESTAMP NOT NULL DEFAULT 0,
    change_description VARCHAR(1024) 
```

# fusioncharts - 如何更改融合图上轴标签的位置？

> ID：11718668
> 
> 赞同：2
> 
> 时间：2012-07-30T09:27:59.360
> 
> 标签：fusioncharts

在这里，我正在尝试更改 fusioncharts 轴标签的位置。我正在使用 fusioncharts 生成报告。问题是轴的标签（x 和 y）不在我想要的位置。我想更改这些标签的位置。有什么办法可以做到这一点不以任何方式影响融合图？这就是我想要实现的目标：

```
![Required Image][1]
![Original Image][2]

  [1]: http://i.stack.imgur.com/CviVz.jpg
  [2]: http://i.stack.imgur.com/BpXOq.jpg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:22:05.147

FusionCharts 不提供轴名对齐配置。这主要是因为轴名称的非中心对齐会导致在感知图表时产生歧义。

# javascript - 获取第一个包含 tds 的 tr

> ID：11718682
> 
> 赞同：0
> 
> 时间：2012-07-30T09:28:25.960
> 
> 标签：javascript, jquery

在 jquery 中，我如何获取包含的第一个表行`<td>s`

到目前为止，我的代码看起来像这样，但它不起作用？

```
$('#mytable tr').has('td:first').html(); 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T09:31:15.587

你可以找到第一个 td 的父母。

```
$("#mytable td:first").parent().html(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T09:38:40.860

你可以试试

```
$($("#mytable").find('tr')[0]).find('td') 
```

在这种情况下，您可以遍历行并获取 tds

```
$($($("#mytable").find('tr')[0]).find('td')[0]).text()
$($($("#mytable").find('tr')[0]).find('td')[1]).text() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T09:33:45.940

尝试使用这个：

```
$("#mytable td:first ").parents('tr').html(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T09:41:51.110

试试这个，jQuery 在选择它们时维护元素索引 -

```
$('#mytable td').eq(0).parent(); 
```

所以实际上，这将选择`td`表中的第一个并返回父级，这应该是一个`tr`元素，按照惯例

# c# - 在 WPF 中使用“与 StaticResource 绑定”和使用“直接使用 StaticResource”有什么区别

> ID：11718684
> 
> 赞同：8
> 
> 时间：2012-07-30T09:28:33.010
> 
> 标签：c#, .net, wpf, xaml

我创建了`mycustomItemsPanel`一个`App.Resources`

```
<Application.Resources>
    <ItemsPanelTemplate x:Key="mycustomItemsPanel">
        .... Some code here
    </ItemsPanelTemplate>
</Application.Resources> 
```

并以这种方式将其提供给 UIControl

```
<.... ItemsPanel="{StaticResource mycustomItemsPanel}" /> 
```

但我开始知道这可以提供为

```
<.... ItemsPanel="Binding Source={StaticResource mycustomItemsPanel}}" /> 
```

这些有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:32:03.153

一方面，绑定只能在[依赖属性](http://msdn.microsoft.com/en-us/library/ms752914.aspx)上使用，另一方面是某些对象在分配为 a 时表现不同`Binding.Source`，即[`DataSourceProviders`](http://msdn.microsoft.com/en-us/library/system.windows.data.datasourceprovider.aspx).

> **DataSourceProvider**对象的通用基类和协定，它们是执行某些查询以生成单个对象或可用作绑定源对象的对象列表的工厂。

使用 then提供的对象`DataSourceProvider`而不是`DataSourceProvider`自身。

因此，在这种特定情况下，应该*没有实际区别*。

# sql - 在 Oracle 中提高性能而无需连接

> ID：11718685
> 
> 赞同：0
> 
> 时间：2012-07-30T09:28:34.230
> 
> 标签：sql, oracle10g

我有 3 张桌子。

```
 - Tab_active(Contains active details )(Contains 30 million records)

 - Tab_apr(Contains customer details for april) (contains 7 lakh
   records) 
 - Tab_may(Contains customer details for may) (contains 7 lakh
   records)
 - Tab_jun(Contains customer details for june) (contains 7 lakh
   records) 
```

所有表的表结构都相同

```
CustNo Revenue
1000    54.55 
```

现在我写一个程序来计算

```
[(Revenue for June)/(Avg Revenue for Apr,May)-1] 
```

我需要那些活跃了 3 个月（6 月、4 月和 5 月）的人以及那些在 Tab_active 中的人。

考虑到活动客户记录的大小，使用联接会降低性能。有没有更好的方法来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:20:24.727

我可以想到一种无需加入的方法，但我不能保证它会更快：

```
select sum(revJun) / (sum(RevMay)*0.5 + sum(RevApr)*0.5 - 1)
from (select CustNo, sum(revJun) as revJun, sum(revMay) as revMay, sum(revApr) as revApr,
             count(*) as NumActiveMonths
      from ((select Custno, Revenue, 'Now' as which, 0.0 as RevJun, 0.0 as RevMay, 0.0 as RevApr
             from tab_active
            ) union all
            (select Custno, Revenue, 'Jun', Revenue as RevJun, 0.0 as RevMay, 0.0 as RevApr
             from tab_Jun
            ) union all
            (select Custno, Revenue, 'May', 0.0 as RevJun, Revenue as RevMay, 0.0 as RevApr
             from tab_May
            ) union all
            (select Custno, Revenue, 'Apr', 0.0 as RevJun, 0.0 as RevMay, Revenue as RevApr
             from tab_Apr
            )
           ) t
      group by CustNo
     ) t
where NumActiveMonths = 4 
```

我不知道这会更快。你必须进行实验。

# php - Less.php 解析和覆盖变量

> ID：11718686
> 
> 赞同：0
> 
> 时间：2012-07-30T09:28:43.820
> 
> 标签：php, css, less

是否可以通过发送的参数覆盖现有的变量？

示例：我的 CSS

```
/* ... */
@bg_color: purple;
@h_color: lighten(@bg_color,25);
#header { background: @bg_color; }
/* ... */ 
```

现在当我打电话时：

```
$less->parse(array('bg_color' => 'blue')); 
```

它没有效果。变量不会被覆盖。这个想法是使用 CSS 中的变量作为“Fallback-Color”

有什么想法可以强制 less.php 覆盖现有变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:45:37.743

我认为您调用该方法是错误的， [git-master](https://github.com/leafo/lessphp/blob/master/lessc.inc.php#L1339)`parse()`的当前签名是：

```
function parse($str = null, $initialVariables = null) { 
```

从 3.xx 版本开始，[在此之前](https://github.com/leafo/lessphp/blob/b6f73f47de77494aaf2f02e040dfe2f0bb8c1081/lessc.inc.php#L1198)（2.0.0 标签）它只有`$str`参数，（该行的实际更改提交在[这里](https://github.com/leafo/lessphp/commit/018d5dfea2aeef0adf403086ddfc5e6c2fd7b5d9)）。

至于覆盖：lessc 解析您的代码的方式是，它将您在 phpland 中提供的变量推送到它们，然后读取源文件。因此，源文件将始终具有优先权，因此您无法加载用于编译的更少文件并在`lessc`生成输出之前更改其中的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:59:05.880

答案：less.php 不能覆盖更少的变量！

# ruby-on-rails - 使用 google-api-ruby-client gem 有 redirect_uri_mismatch 错误

> ID：11718689
> 
> 赞同：0
> 
> 时间：2012-07-30T09:29:12.113
> 
> 标签：ruby-on-rails

我想在 Rails 中使用[这个](https://developers.google.com/google-apps/admin-settings)API。

它说应该包括一个授权标头。（使用oauth2）

所以我`google-api-ruby-client`像下面这样使用这个库。[我通过这个示例](http://code.google.com/p/google-api-ruby-client/wiki/OAuth2)编写了下面的代码。

```
@client = Google::APIClient.new
@client.authorization.client_id = CONSUMER_KEY
@client.authorization.client_secret = CONSUMER_SECRET
@client.authorization.scope = 'https://apps-apis.google.com/a/feeds/domain/'
@client.authorization.redirect_uri = "http://#{request.host}:#{request.port.to_s}
                                     /google_app/oauth2callback"

redirect_to @client.authorization.authorization_uri.to_s 
```

但它会导致 redirect_uri_mismatch 错误。
我不知道我的用法是否正确。

注意：
在使用此 API 之前，我已经使用 Google Openid 成功登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:38:53.767

访问 Google API 时可能与[OAuth 2.0 示例错误重复](https://stackoverflow.com/questions/9290182/oauth-2-0-sample-error-when-accessing-google-api)

存在的问题是javascript缺少端口号。

# oracle - 如何在 pl-sql 中验证 oracle 用户凭据？

> ID：11718691
> 
> 赞同：0
> 
> 时间：2012-07-30T09:29:20.950
> 
> 标签：oracle, plsql

我想编写一个 pl-sql 过程，它将接受登录名/密码参数并返回一些关于用户的信息。

我希望它是有关用户是否属于管理员组的信息。

我应该从哪里开始？我应该使用一些程序还是尝试直接从系统表中获取对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T04:32:36.887

可以从视图**v$pwfile_users**检索具有**sysdba**和**sysoper**权限的用户。

# spring-mvc - 网站上的固定链接

> ID：11718692
> 
> 赞同：0
> 
> 时间：2012-07-30T09:29:23.150
> 
> 标签：spring-mvc

我有一个网站，现在我想实现一个永久链接功能，比如[http://mywebsite.com/sougata](http://mywebsite.com/sougata)应该是 sougata 的网页。为此，我使用 Spring MVC 编写了一个宁静的服务，它返回了我想要的页面。将其描述为 @RequestMapping(value="/{username}",method = RequestMethod.GET)

现在的问题是当我想调用任何其他服务时，这个 web 服务会被调用。有没有办法阻止这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:47:29.590

正确设计您的 RESTful URL。url **http://mywebsite.com/{anything-here}**绝对匹配您的控制器方法。并且 url **http://mywebsite.com/{anything-here}/{something-here}**将不匹配相同的控制器方法。

我希望您为您的永久链接提供以下网址映射 **http://mywebsite.com/perm/{anything-here}**

# c# - 尝试接球

> ID：11718693
> 
> 赞同：6
> 
> 时间：2012-07-30T09:29:26.310
> 
> 标签：c#, .net

我试图了解我将如何在我的代码中使用 Throw。我有一个 MainForm 类来处理 Windows 窗体 GUI，然后我有一个 Manager 类来读取和保存文件中的数据。

我在两个课程中都使用 Try/Catch，但我的导师希望我在 Manager 课程中使用 Throw，尽管我正在阅读它，但我不明白它会做什么？Throw 会影响 MainForm 类中的 Try/Catch 吗？

如果捕获到异常，我也会在管理器类中使用消息框，但是根据讲师的说法，管理器中不允许有消息框，那我该怎么办？我可以只在 MainForm 类中使用消息框吗？对理解和扩展我的知识有一些帮助！谢谢！

MainForm 类：

```
try
{
     motelManager.SaveToFile(file);
}
catch
{
     MessageBox.Show("Ett fel uppstod!", "Varning!", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
} 
```

经理类：

```
 public void SaveToFile(string filePath)
 {
     try
     {
         string newFilePath = filePath.Replace(".bin", "");
         filestream = new FileStream(newFilePath + ".bin", FileMode.Create);
         BinaryFormatter b = new BinaryFormatter();
         b.Serialize(filestream, animals);
     }
     catch(Exception ex)
     {
         MessageBox.Show(ex.Message, "Varning!", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
     }

     if (filestream != null) filestream.Close();
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T09:35:25.917

您的经理类应如下所示：

```
public void SaveToFile(string filePath)
{
    try
    {
        string newFilePath = filePath.Replace(".bin", "");
        filestream = new FileStream(newFilePath + ".bin", FileMode.Create);
        BinaryFormatter b = new BinaryFormatter();
        b.Serialize(filestream, animals);
    }
    catch(Exception ex)
    {
        if (filestream != null) filestream.Close();
        throw;
        // but don't use
        // throw ex;
        // it throws everything same
        // except for the stacktrace
    }
    // or do it like this
    //catch(Exception ex)
    //{
    //    throw;
        // but don't use
        // throw ex;
        // it throws everything same
        // except for the stacktrace
    //}
    //finally
    //{
    //    if (filestream != null) filestream.Close();
    //}

} 
```

在你的主要课程中：

```
try
{
    motelManager.SaveToFile(file);
}
catch (Exception e)
{
    MessageBox.Show("Ett fel uppstod!", "Varning!", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:39:27.653

Throw 只是将异常引发到调用函数。（在这种情况下，无论谁调用 SaveToFile）。如果那里有错误处理程序，它将被捕获，否则它将继续调用堆栈，直到它被捕获或在顶层。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T09:39:33.540

最好在表单中处理向用户呈现的异常 - 仅仅是因为在更大的结构良好的系统中，Manager 对象可能与 GUI 没有任何连接。

一般规则是在后端 [Manager] 类中捕获异常以清理任何资源（即关闭文件），然后从异常处理程序重新抛出异常，如下所示：

```
public void SaveToFile(string filePath)
{
    try
    {
        string newFilePath = filePath.Replace(".bin", "");
        filestream = new FileStream(newFilePath + ".bin", FileMode.Create);
        BinaryFormatter b = new BinaryFormatter();
        b.Serialize(filestream, animals);
    }
    catch(Exception ex)
    {
        /* 
         * cleanup resources and rethrow the exception for catching and handling elsewhere
         */
        if (filestream != null)
            filestream.Close();
        throw;
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T09:51:33.553

在具有多个层的应用程序中，底层发生的异常不会按原样发送到更高层或调用应用程序。

例如，如果数据库相关代码出现问题，您不会将其发送到客户端应用程序或更高层。这样做的原因是为用户提供友好的错误消息。假设您在删除操作期间出现外键引用错误，您可以：

1.  记录异常信息。
2.  替换为用户友好的异常消息并将其扔到上面的层。

上面的层可能会将此异常包装到另一个更高级别的消息中，然后将其抛出。这类似于您被要求做的事情。

在 Manager 类的代码中，检查可能发生多少异常。如果您使用的是 VS，则工具提示/帮助文本会提供该信息。如果您不使用 VS，请查看 MSDN 以获取此信息。

在表单中，处理管理层可能抛出的所有异常，以及如果发生严重错误时的通用异常。恕我直言，这就是您在管理层中的代码应该如何

```
try
            {
                string newFilePath = filePath.Replace(".bin", "");
                FileStream filestream = new FileStream(newFilePath + ".bin", FileMode.Create);
                BinaryFormatter b = new BinaryFormatter();
                b.Serialize(filestream, animals);
            }
            catch (ArgumentNullException argNullException)
            {
                // Log current exception

                // Wrap it under your exception type
                CustomWrapException customWrap = new CustomWrapException();
                customWrap.Message = "Your custom message here.";
                customWrap.InnerException = argNullException;
                throw customWrap;
            }
            catch (SecurityException securityException)
            {
                // Log current exception

                // Replace current exception with you custom exception
                CustomReplaceException replaceException = new CustomReplaceException();
                replaceException.Message = "Your custom message here.";
                throw replaceException;
            }
            finally
            {
                // Close stream and dispose objects here
            } 
```

你的表单应该有这样的异常处理：

```
try
            {
                // Call mananger code from here
            }
            catch (CustomWrapException wrapException)
            {
                // replace/wrap if desired
                // Display message to user
            }
            catch (CustomReplaceException replaceException)
            {
                // replace/wrap if desired
                // Display message to user
            }
            catch (Exception exception)
            {
                // This is for everything else that may go wrong apart from known possible exceptions
                // Display message to user
            }
            finally
            {

            } 
```

HTH。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T09:35:23.147

```
public void SaveToFile(string filePath)
{
    try
    {
         string newFilePath = filePath.Replace(".bin", "");
         filestream = new FileStream(newFilePath + ".bin", FileMode.Create);
         BinaryFormatter b = new BinaryFormatter();
         b.Serialize(filestream, animals);
    }
    catch (Exception ex)
    {
        if (filestream != null) filestream.Close();
        //what you want
        //MessageBox.Show(ex.Message, "Warning!");
        throw (new Exception("Your custom message"));
    }
} 
```

在你的经理中：

```
try
{
    manager.SaveToFile(filePath);
}
catch (Exception ex)
{
    // here shows your 'Your custom message'
    MessageBox.Show(ex.Message);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-30T09:35:33.490

您可以使用[Application ThreadException](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.threadexception.aspx)来捕获任何异常。并且您的保存逻辑使用 using 而不是 try catch 进行包装，在这种情况下，它将关闭您的流。

```
public void SaveToFile(string filePath)
{
    string newFilePath = filePath.Replace(".bin", "");
    using(var filestream = new FileStream(newFilePath + ".bin", FileMode.Create))
    {
        BinaryFormatter b = new BinaryFormatter();
        b.Serialize(filestream, animals);
    }
} 
```

在入口点 (static void main()) 中订阅此事件。

```
 [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());

        Application.ThreadException += Application_ThreadException;
    }

    static void Application_ThreadException(object sender, System.Threading.ThreadExceptionEventArgs e)
    {
        MessageBox.Show(".......");
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-30T09:38:10.013

是这样的……

```
 try { } 
catch(Exception e) 
{ throw } 
```

当它抛出异常时，它将更改源和堆栈跟踪，以便看起来异常已从该方法中抛出，从包含该 try-catch 块的方法上的那一行 throw e 开始。

# php - Yii 拆分下拉列表

> ID：11718694
> 
> 赞同：0
> 
> 时间：2012-07-30T09:29:26.927
> 
> 标签：php, yii

我会在 3 个下拉列表字段（年、月和日）中拆分单个 CActiveForm TextField。

我试试这段代码：

```
echo CHtml::activeDropDownList($model,'day', $model->getDays());
echo CHtml::activeDropDownList($model,'month', $model->getMonths());
echo CHtml::activeDropDownList($model,'year', $model->getYears()); 
```

但模型无法识别“日”、“月”和“年”字段，因为未在数据模型中定义。

有没有办法创建不依赖于模型的字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:59:23.410

将这三个字段定义为模型中的变量，例如

```
class myTable extends CActiveRecord
{
   public $day;
   public $month;
   public $year;
} 
```

那么你就可以在你的 CActiveForm 中使用了。并在调用 $model->save(); 之前将这三个字段组合在控制器中的 Post 上。

# php - Facebook Php SDK 实例化

> ID：11718696
> 
> 赞同：0
> 
> 时间：2012-07-30T09:29:44.577
> 
> 标签：php, facebook, facebook-php-sdk

我的问题是：我从以下位置下载了 Facebook Php SDK：[https](https://github.com/facebook/facebook-php-sdk) ://github.com/facebook/facebook-php-sdk 我将所有内容放在一个文件夹中，并以这种方式创建了我的索引：

我的应用文件夹：

*   源代码
*   索引.php

在我的 index.php 中，我尝试了以下代码：

```
require_once("src/facebook.php");
$facebook = new Facebook(array('appId' => 666, 'secret' => 616));
die("why not zoidberg?"); 
```

但是我的应用程序不会死，也不会返回任何东西，一些想法？

接下来我尝试了这段代码，但只显示了第一个回显：

```
<?php     
echo "This is visible";
try{
require_once "src/facebook.php";
$facebook = new Facebook(array(
                                'appId' => '666',
                                'secret' => '616',
                                ));
}catch(ErrorException $e){
        echo error_reporting(E_ALL);
        die(var_dump($e));
}
die("This is not visible"); 
```

我的输出是：

```
This is visible 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:09:47.600

这段代码非常适合我：

**索引.php**

```
<?

  require_once('src/facebook.php');

  $config = array(
    'appId' => 'myappId',
    'secret' => 'mysepratecode',
  );

  $facebook = new Facebook($config);
  $user_id = $facebook->getUser();
?>
<html>
  <head></head>
  <body>

  <?
    if($user_id) {

      // We have a user ID, so probably a logged in user.
      // If not, we'll get an exception, which we handle below.
      try {

        $user_profile = $facebook->api('/me','GET');
        echo "Name: " . $user_profile['name'];

      } catch(FacebookApiException $e) {
        // If the user is logged out, you can have a 
        // user ID even though the access token is invalid.
        // In this case, we'll get an exception, so we'll
        // just ask the user to login again here.
        $login_url = $facebook->getLoginUrl(); 
        echo 'Please <a href="' . $login_url . '">login.</a>';
        error_log($e->getType());
        error_log($e->getMessage());
      }   
    } else {

      // No user, print a link for the user to login
      $login_url = $facebook->getLoginUrl();
      echo 'Please <a href="' . $login_url . '">login.</a>';

    }

  ?>

  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:34:37.897

解决了，我没有安装 Json 和 Curl ;)

# vbscript - 自动点击链接

> ID：11718698
> 
> 赞同：1
> 
> 时间：2012-07-30T09:29:52.160
> 
> 标签：vbscript, automation, browser-automation

我正在尝试单击页面上的链接，它没有任何 id 并且没有唯一的类名。该函数唯一的独特之处在于 onclick 处理程序

```
<a href="#" onclick="closepopup('popup', 'popuphandler')" > </a> 
```

我需要通过 vbscript 自动化单击此链接，同样我尝试了以下代码：

```
Set allLinks = ie.document.links
for j = 0 to allLinks.length-1
    if allLinks(j).onClick = "closePopup(""popup"",""popupClose"")" then
        allLinks(j).click
        j = allLinks.length 'class name = blueButtonCenter
    end if
Next 
```

但它不起作用，请帮助。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:00:34.430

在第一种情况下，您没有指定什么不起作用，找到链接或单击它： onClick 将返回类似

```
about:blank# function onclick()
{
closepopup('popup', 'popuphandler')
} 
```

所以你应该使用 instr 检查它是否是正确的链接

```
Dim HTMLDoc, XML, URL, table
Set HTMLDoc = CreateObject("HTMLFile")
Set XML = CreateObject("MSXML2.XMLHTTP")

URL = "your url"

With XML
  .Open "GET", URL, False
  .Send
  HTMLDoc.Write .responseText
End With

Set allLinks = HTMLDoc.links 
For each link in allLinks
  if instr(link.onClick, "closepopup('popup', 'popuphandler')") then
    link.click
    exit for
  end if
Next 
```

只有点击不会以这种方式工作..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:06:14.263

我会尝试检查是否在实际的javascript中找到了closePupup，如下所示：

```
'safety first
if not isnull(allLinks(j).onClick) then
  if instr(allLinks(j).onClick.toString() ,  "closePopup(""popup"",""popupClose"")" ) > -1 then 
        allLinks(j).click 
        j = allLinks.length 'class name = blueButtonCenter 
  end if 
end if 
```

这假设 onClick 提供一个字符串，（至少在 javascript 中它确实如此，并且在 IE9 和 Chrome 中这是有效的）

# wordpress - 为 Wordpress 的插件测试创建协议

> ID：11718700
> 
> 赞同：1
> 
> 时间：2012-07-30T09:30:00.877
> 
> 标签：wordpress

我需要为测试插件创建一个协议。我究竟应该怎么做？我应该在不同的 WP 版本中测试它吗？我还应该做什么？什么是测试协议？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:09:12.410

当我听到人们谈论测试协议时，他们通常只是指有一个测试软件的标准计划。我强烈建议您研究 Scrum 和测试驱动开发。如果您熟悉这些工作流程，那么您几乎已经建立了测试协议。（我还推荐阅读敏捷宣言和实用程序员，以帮助您了解如何实际实施这些开发过程）。

特别关注 WordPress 插件，我建议可能进行一些单元测试（PHPUnit 用于 PHP 代码，QUnit 用于 Javascript）。一组手动测试也是一个不错的主意。在开发过程中，您应该尝试使这些测试保持最新，并确保它们在发布之前全部通过。

另外，我通常只是说所需的最低 WP 版本是最新的 WP 版本使我自己的测试更容易，然后我可以在每个新版本中运行我的测试以确保没有任何东西被破坏（但是，这种情况很少见任何破坏向后兼容性的东西都被引入到 WP 基线中）。

# windows - 如何在 Windows 中删除目录和文件名/文件路径中的多余空格

> ID：11718701
> 
> 赞同：0
> 
> 时间：2012-07-30T09:30:05.817
> 
> 标签：windows, filepath

我想删除许多文件路径中的额外空格，因为正在审查的文件路径相当长。

例如，我有这个文件路径：

```
C:\TEST   Filepath\TEST   Filepath\TEST   Filepath\..\File.doc 
```

并希望它变成：

```
C:\TEST Filepath\TEST Filepath\..\File.doc 
```

我有数百个像这样的文件路径，想知道是否有一种快速有效的方法可以从它们中删除额外的空间？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:29:00.960

尝试在备用磁盘上使用一小部分。请小心。

```
void RemoveExtraSpace(string sourceDir)
{
    var filePaths = Directory.GetDirectories(sourceDir, "*.*", SearchOption.AllDirectories);
    Regex rx = new Regex(@"\s\s+");
    for(int x = filePaths.Length - 1; x >= 0; x--)
    {
        string cur = filePaths[x];
        DirectoryInfo di = new DirectoryInfo(cur);
        if(rx.IsMatch(di.Name))
        {
            string result = Regex.Replace(di.Name, @"\s\s+", " ");
            result = Path.Combine(di.Parent.FullName, result);          
            Directory.Move(di.FullName, result);
        }
    }
} 
```

# matlab - 如何使用 for 循环在 Matlab 中处理大型视频且没有内存错误

> ID：11718704
> 
> 赞同：1
> 
> 时间：2012-07-30T09:30:08.697
> 
> 标签：matlab, memory, video, for-loop, out-of-memory

我是 Matlab 处理的新手，我想在“for 循环”（或没有它）内读取和处理一个大型视频（超过 200k 帧）。特别是，我想：

1.  使用 VideoReader 阅读视频，
2.  将视频细分为每个 1000 帧的 n-epoch，
3.  处理1000帧的每个epoch，读取：epoch的第一帧，跳过两帧，读取帧，跳过两帧，以此类推（例如i=1:3:nFrames），
4.  考虑到每个时代，我需要将读取的每个“RGB 帧”转换为 im2bw
5.  转换后，我需要考虑第一个视频帧（“mov(1,1).cdata”）和在该时期内读取的每一帧，进行“corr2”2D 互相关，
6.  将“corr2”的结果存储到向量中。

总之，这是我需要做的。谢谢你们

* * *

这是我到目前为止所拥有的，关于“corr2”：

```
for frame_ind = 1 : nFrames
  mov(frame_ind).cdata = im2bw(rgb2gray(read(xyloObj,frame_ind)),0.20);      
end

%% Corr2 to compare BW video frames
for frame_ind2 = 1:(frame_ind-1)
    R(frame_ind2)=corr2(mov(1,frame_ind2).cdata,mov(1,frame_ind2+1).cdata);
end

 TF= isnan(R); 
 g=sum(TF);
 f=(length(R)-g);

if (g~=(length(R))) 
  %%If Part has errors 
  disp('"Part_1" has video interferences/noise/problems, see "Testresult.txt" for more information.');
 else 
  %%If Part has not errors  
  displ=strcat('"Part_1" has not video interferences/noise/problems.');
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:04:38.447

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:57:32.953

```
% create video handle and get number of frames
vidObj = VideoReader(video_file);
nFrames = get(vidObj, 'NumberOfFrames');

blocksize = 1000;
BlocksIDs = 1:blocksize:nFrames;
nBlocks = numel(BlocksIDs);

frame_step = 3;

% cell array with all correlations values grouped by block
xcorrs_all_blocks = cell(1, nBlocks);

for j = 1 : nBlocks

    % if this is the last block, process until the last frame
    if j == nBlocks
        last_frame = nFrames;
    % otherwise, read until next block
    else
        last_frame = BlocksIDs(j + 1);
    end
    % compute the frame numbers that we want to look at
    frame_indices = BlocksIDs(j) : frame_step : last_frame;
    nFrames = numel(frame_indices);

    first_frame = [];
    % pre-allocate array holding the in-block corr2 values.
    xcorrs_this_block = nan(1, nFrames-1);

    for k = 1 : nFrames

        % read-in raw frame from video file.
        raw_frame = read(vidObj, frame_indices(k));            
        % determine level for bw conversion - this might help.
        level = graythresh(raw_frame);
        raw_frame = im2bw(raw_frame, level);

        if k == 1
            % save current frame as first frame for later corr2 processing
            first_frame = raw_frame;
        else
            % calc the correlation between the first frame in the block and each successive frame
            xcorrs_this_block(k-1) = corr2(first_frame, raw_frame);
        end

    end

    % save all xcorr values into global cell array.
    xcorrs_all_blocks{j} = xcorrs_this_block;

end 
```

# android - Android Touch 关于

> ID：11718706
> 
> 赞同：0
> 
> 时间：2012-07-30T09:30:16.020
> 
> 标签：android, touch

我有一系列按钮小部件，它们位于另一个下方。我想制造一架钢琴，我正在使用触摸监听器。我想在按下按钮并滑动时播放声音。它适用于单独触摸按钮。但是我想在用户像钢琴一样在按钮上滑动时播放声音。需要捕捉动作播放声音。滑动按钮时我无法采取行动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:33:28.990

我认为你需要一个手势监听器，然后实现它：看看下面的[链接](http://developer.android.com/design/patterns/gestures.html)

编辑：抱歉链接不好，这是[lars vogel 的教程](http://www.vogella.com/articles/AndroidGestures/article.html)，它们通常非常好：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:41:58.640

```
@Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            findViewById(R.id.myimage1).setOnTouchListener(new MyTouchListener());
            findViewById(R.id.myimage2).setOnTouchListener(new MyTouchListener());

        }

private final class MyTouchListener implements OnTouchListener {
            public boolean onTouch(View view, MotionEvent motionEvent) {
                if (motionEvent.getAction() == MotionEvent.ACTION_DOWN) {
                    ClipData data = ClipData.newPlainText("", "");
                    DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(
                            view);
                    view.startDrag(data, shadowBuilder, view, 0);
                    view.setVisibility(View.INVISIBLE);
                    return true;
                } else {
                    return false;
                }
            }
        } 
```

# biztalk - 在 Biztalk 中恢复已删除的端口

> ID：11718709
> 
> 赞同：2
> 
> 时间：2012-07-30T09:30:23.587
> 
> 标签：biztalk

有没有办法在不导出绑定的情况下恢复物理发送和接收端口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T10:46:26.800

即使您导出绑定，端口也不会存在，因此不会被导出。我认为 Bilal 是正确的 - 此数据位于管理数据库中，因此您需要从备份中恢复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T15:39:56.233

您最好的选择是始终为您的应用程序配置绑定文件。使用正确的发送、接收端口、编排主机等配置 BizTalk 应用程序后，请确保使用 BizTalk 管理控制台中的“导出绑定”选项备份绑定配置。

事实上，在更大的项目中，绑定文件通常由部署团队拥有，用于各种环境，您永远不会在真实环境中使用管理控制台创建端口。

恢复 BizTalk 数据库有点矫枉过正，只需恢复端口即可。我宁愿再次手动创建它们，即使数字很高。恢复数据库需要特别注意，如果你做错了，你最终会重新配置整个环境，这将非常耗时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T17:06:41.183

我同意萨拉瓦纳。我的 5c：您可以导入现有的绑定文件，并且不会删除不在绑定文件中的端口。导入过程以“添加”模式工作。

# java - 诺基亚 3109c 在调用 System.getProperty("wireless.messaging.sms.smsc") 时冻结在 java 应用程序上

> ID：11718715
> 
> 赞同：1
> 
> 时间：2012-07-30T09:30:51.113
> 
> 标签：java, java-me

在我的应用程序的**startApp()**方法中，我想通过以下代码检测手机中是否插入了 SIM 卡：

```
try {
        String s = System.getProperty("wireless.messaging.sms.smsc");
        if (s == null) {
            simCard = false;
        } else {
            simCard = true;
        } 
    } catch (Exception e) {
        simCard = false;
    } 
```

这在模拟器、诺基亚 2700 和诺基亚 5230 上运行良好。但这在诺基亚**3109c**上失败了。**当我在诺基亚3109c**上打开我的应用程序时，手机卡住**并**显示屏幕“正在打开应用程序”和进度条。

我不知道为什么会这样。如果有人可以帮助我，我将不胜感激。谢谢你。

# websocket - 浏览器崩溃时的 Websocket 连接

> ID：11718718
> 
> 赞同：1
> 
> 时间：2012-07-30T09:30:57.300
> 
> 标签：websocket, netty

如果问题很简单，请原谅我，但我不知道在这种**一般情况下**会发生什么：如果由于某些问题或故障/系统故障（任何类型的故障等）浏览器崩溃，websocket 会发生什么正在运行的连接？它会被关闭还是会是什么状态？

我正在使用 netty websocket 实现。现在，具体在**netty websocket实现**中，在上述场景中，会发生什么？（当我尝试时，我得到这个：如果我手动关闭浏览器，连接就会关闭，但是如果我终止浏览器进程，这不会发生）。如果连接没有关闭，我如何在发送消息时检测/处理它，否则在发送消息`ClosedChannelException`时，尝试发送消息时会发生。

编辑：除了检查上述错误，有没有办法知道使用 netty 实现时 websocket 连接已关闭？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T09:44:45.580

我认为您必须捕获 ClosedChannelException 并以与完全关闭的连接相同的方式处理它。

如果您的 websocket 会话很昂贵，并且您想更快地发现被终止的连接，您可以定期向每个客户端发送[ping](https://www.rfc-editor.org/rfc/rfc6455#section-5.5.2)请求。Netty 有一个 PingWebSocketFrame 类，看起来它会为你提供支持。

# windows-phone-7 - 根据复选框列表框过滤 ObservableCollection

> ID：11718720
> 
> 赞同：0
> 
> 时间：2012-07-30T09:31:00.110
> 
> 标签：windows-phone-7, listbox, observablecollection

我找不到任何好的解决方案来解决我的问题。我所想的一切都很好，但我猜要长。所以事情是这样的：

我有从 ObservableCollection 绑定的图钉和底部的过滤器 ApplicationBar 按钮的地图，该按钮导航到设置过滤器页面。

过滤器页面是带有复选框的列表框。根据选中的复选框，我想在地图上过滤我的图钉。

顺便说一句。我的引脚数据来自 sqlite。所以一般来说我可以做 WHERE type = 'name1' OR WHERE type='name2' ，它会做得很好。

我在这里唯一缺少的是如何填写此查询，我的意思是如何从列表框中获取值并将它们顺利发送到我的地图页面。

我希望那不是太混乱:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:35:58.423

你应该看看 ICollectionView 界面：http: [//msdn.microsoft.com/en-us/library/ms752348.aspx](http://msdn.microsoft.com/en-us/library/ms752348.aspx)

# html - 在 HTML5 中使用本地存储进行分组

> ID：11718722
> 
> 赞同：0
> 
> 时间：2012-07-30T09:31:01.980
> 
> 标签：html, local-storage

我正在使用 HTML5 和 JqueryMobile 创建我的第一个移动应用程序。将所有数据存储在本地存储中。任何人都可以建议我从以下结果集中检索分组数据计数的简单方法，

```
1 mango
2 orange
3 mango
4 apple
5 mango
6 apple
7 orange
8 orange
9 apple
10 mango 
```

预期结果

```
 mango  4
 orange 3
 apple  3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:41:38.953

你可以使用查询 lik 来做同样的事情

```
SELECT Fruit_Name, COUNT(*) as "Fruit Count"
FROM Fruits
GROUP BY Fruit_Name; 
```

[此处解释了](http://www.html5rocks.com/en/tutorials/webdatabase/todo/)在 HTML5 中选择数据和呈现。

# android - 如何从 MapView 中的标记/引脚打开新的活动/布局？

> ID：11718724
> 
> 赞同：0
> 
> 时间：2012-07-30T09:31:03.447
> 
> 标签：android, google-maps, android-activity

如何在 Android MapView 中从 Pin/Marker 打开一个新的 Activity？

像这样，然后我想点击一个标记，它应该打开一个新活动，我该怎么做？

我的代码：

```
 private GeoPoint getPoint(double lat, double lon) {
return(new GeoPoint((int)(lat*1000000.0),
                      (int)(lon*1000000.0))); 
```

}

私有类 SitesOverlay 扩展 ItemizedOverlay { private List items=new ArrayList();

```
public SitesOverlay(Drawable marker) {
  super(marker);

  boundCenterBottom(marker);

  items.add(new OverlayItem(getPoint(47.17612,
          8.499727),
                            "TCS", "TCS Camping Brüggli"));
  items.add(new OverlayItem(getPoint(47.57612,
          8.499727),
                            "",
                            ""));
  items.add(new OverlayItem(getPoint(00.765136435316755,
                                      00.97989511489868),
                            "",
          ""));
  items.add(new OverlayItem(getPoint(00.0686417491799,
                                      00.01572942733765),
                            "",
                    ""));

  populate();
}

@Override
protected OverlayItem createItem(int i) {
  return(items.get(i));
}

@Override
protected final boolean onTap(int i) {
         //Do you job here.
       startActivity(new Intent(MaptestActivity.this,SettingsActivity.class));
    return false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:48:06.180

[https://github.com/jgilfelt/android-mapviewballoons](https://github.com/jgilfelt/android-mapviewballoons)

在这个链接中，我们有一个包“mapviewballoons.example.simple”

在这个“mapviewballoons.example.simple”包中有一个类“SimpleItemizedOverlay.java”对这段代码进行了一些修改。

包mapviewballoons.example.simple；

公共类 SimpleItemizedOverlay 扩展 BalloonItemizedOverlay {

```
private ArrayList<OverlayItem> m_overlays = new ArrayList<OverlayItem>();
private Context c;

public SimpleItemizedOverlay(Drawable defaultMarker, MapView mapView) {
    super(boundCenter(defaultMarker), mapView);
    c = mapView.getContext();
}

public void addOverlay(OverlayItem overlay) {
    m_overlays.add(overlay);
    populate();

}

@Override
protected OverlayItem createItem(int i) {
    return m_overlays.get(i);
}

@Override
public int size() {
    return m_overlays.size();
}

@Override
protected boolean onBalloonTap(int index, OverlayItem item) {
    Toast.makeText(c, "onBalloonTap for overlay index " + index,
            Toast.LENGTH_LONG).show();

    c.startActivity(new Intent(c.getApplicationContext(), NewActivity.class));

    return false;
} 
```

}

这是修改代码，

```
@Override
protected boolean onBalloonTap(int index, OverlayItem item) {
    Toast.makeText(c, "onBalloonTap for overlay index " + index,
            Toast.LENGTH_LONG).show();

    c.startActivity(new Intent(c.getApplicationContext(), NewActivity.class));

    return false;
}

  Call different activities,

@Override
protected boolean onBalloonTap(int index, OverlayItem item) {
    Toast.makeText(c, "onBalloonTap for overlay index " + index,
            Toast.LENGTH_LONG).show();
            if (index == 0)
            {
    c.startActivity(new Intent(c.getApplicationContext(), NewActivity.class));
             } else {
              c.startActivity(new Intent(c.getApplicationContext(), secondNewActivity.class));

    return false;
} 
```

# blackberry - 黑莓中文本字段中的逗号分隔

> ID：11718730
> 
> 赞同：2
> 
> 时间：2012-07-30T09:31:20.657
> 
> 标签：blackberry, blackberry-eclipse-plugin, blackberry-jde

在我的应用程序中，我有一个自定义文本框`BasicEditField.FILTER_NUMERIC`。当用户在字段中输入值时，应将逗号添加到货币格式中。

例如：1,234,567,8.... 像这样。

在我的代码中，我尝试过这样。

```
protected boolean keyUp(int keycode, int time) {
    String entireText = getText();
    if (!entireText.equals(new String(""))) {
        double val = Double.parseDouble(entireText);

        String txt = Utile.formatNumber(val, 3, ",");// this will give the //comma separation format 
        setText(txt);// set the value in the text box
    }
    return super.keyUp(keycode, time);
} 
```

它会给出正确的数字格式...当我在文本框中设置值时，它将通过`IllegalArgumentException`. 我知道`BasicEditField.FILTER_NUMERIC`不会允许像逗号（，）这样的字符。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:02:39.277

我试过这种方法，它工作正常......

```
public class MyTextfilter extends TextFilter {
private static TextFilter _tf = TextFilter.get(TextFilter.REAL_NUMERIC);

public char convert(char character, int status) {
    char c = 0;

    c = _tf.convert(character, status);
    if (c != 0) {
        return c;
    }

    return 0;
}

public boolean validate(char character) {
    if (character == Characters.COMMA) {
        return true;
    }

    boolean b = _tf.validate(character);
    if (b) {
        return true;

    }

    return false;
}
} 
```

像这样打电话

```
editField.setFilter(new MyTextfilter()); 
```

# r - 公式中的 R as.numeric

> ID：11718732
> 
> 赞同：1
> 
> 时间：2012-07-30T09:31:55.193
> 
> 标签：r

我有以下数据框：

```
id<-c(1,2,3,4)
x<-c(0,2,1,0)
A<-c(1,3,4,3)
df<-data.frame(id,x,A) 
```

现在我想以一种方式调用一个变量`value`，如果 x>0，`value`对于每个`id`将等于 A+1/x，如果 x=0，值将等于 A。为此我输入了

```
value <- df$A + as.numeric(df$x > 0)*(1/df$x) 
```

我期望的是一个向量 a 如下：

```
[1] 1 3.5 5.0 3 
```

但是我通过输入上述命令得到的是：

```
 [1] NaN 3.5 5.0 NaN 
```

我想知道是否有人可以帮助我解决这个问题。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T09:35:00.217

我认为`ifelse`在这种情况下使用函数会更简单：

```
ifelse(df$x>0, df$A + (1/df$x), df$A)
[1] 1.0 3.5 5.0 3.0 
```

有关`?ifelse`更多详细信息，请参阅。

使用您尝试应用的命令，虽然确实给了您一个 1 和 0 的向量（所以这是个好主意），但它并没有改变when等于 0的`as.numeric(df$x>0)`事实（因为您不能除0)。`1/df$x``NaN``df$x`

# ios - Core Data 获取请求和未保存的更改

> ID：11718737
> 
> 赞同：1
> 
> 时间：2012-07-30T09:32:10.647
> 
> 标签：ios, save, fetch, nsfetchrequest

我有个问题。在获取一些数据和未保存的更改时，我的 iOS 应用程序的行为非常奇怪。为了您的兴趣，在与 Web 服务器同步一些数据时会出现整个行为。我想做一个完全同步，然后保存更改。我尝试了一些解决方法，但没有一个工作得足够好。

对于问题本身：我将一些实体与 Web 服务器同步。它们被组织成区域（它们的父级），它们本身位于建筑物中。因此，对于每个实体，我都会查询是否已经存在匹配区域，如果不存在，则创建一个新的。现在的问题是，如果刚刚创建这些区域，我将无法获取它们（因此每次都会创建一个新但相同的区域）。我还有一个问题，即一旦通过向其添加新创建的区域进行更改，我就无法再获取正确的建筑物，完全相同的查询的结果突然为空。

我已确保`[fetch setIncludePendingChanges:YES]`已设置，并且我还使用正常结果模式而不是 NSDictionaryResultType （请参阅：[NSDictionaryResultType 表达式不考虑新插入的对象](https://stackoverflow.com/questions/1632029/nsdictionaryresulttype-expression-not-taking-into-account-newly-inserted-objects)）。

我希望有人能帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:27:39.767

Fetch 请求从上下文中获取数据，该上下文已将数据**保存**在上下文从中获取的持久存储中。当你创建一个新的托管对象时，你是在你的上下文（也就是你的便签簿）中创建它，但不是在你的持久存储中。因此，在您获取新创建的对象之前，您必须将该上下文的更改保存到您的存储中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T13:43:49.060

假设我理解您的描述是正确的：我认为您获取数据的谓词非常复杂，这会迫使核心数据从持久存储中读取。因此，托管对象上下文中的修改被忽略。

例如，我们有一个数据模型，如

```
Category 1---n Icon 
```

我们想获取所有类别

1.  有图标（多于零），
2.  `usable`具有属性为的图标`TRUE`
3.  `enabledByAdmin`具有属性为的图标`TRUE`

我们使用这样的谓词：

```
NSArray *predicates = @[[NSPredicate predicateWithFormat:@"icons.@count > 0"],
                        [NSPredicate predicateWithFormat:@"ANY icons.usable = 1"],
                        [NSPredicate predicateWithFormat:@"ANY icons.enabledByAdmin = 1"]];

NSCompoundPredicate *cp;
cp = [[NSCompoundPredicate alloc] initWithType:NSAndPredicateType
                                 subpredicates:predicates]; 
```

这个复杂的谓词强制核心数据直接从持久存储中读取。

我的解决方案是保存托管对象上下文并在之后获取数据。

# python - 快速增加精灵位置而没有延迟 - Python

> ID：11718743
> 
> 赞同：2
> 
> 时间：2012-07-30T09:32:36.053
> 
> 标签：python, kivy, game-physics, pong, game-ai

我正在使用 Python 中的 Kivy 为学校项目制作 PONG 游戏。到目前为止，感谢这个论坛，我已经为 NPC 桨制作了一些 AI。这是代码：

```
 if self.ball.y < self.player2.center_y:
        self.player2.center_y = self.player2.center_y - 4
    if self.ball.y > self.player2.center_y:
        self.player2.center_y = self.player2.center_y + 4 
```

这是在 PongGame() 类的一个方法中，称为ArtificialIntelligence()。

我用这个来称呼它：

```
Clock.schedule_interval(game.ArtificialIntelligence, 1/300) 
```

这允许我每 1/300 秒调用一次。但是，任何超过1/300的东西，我似乎都没有区别。即 1/9001 不会每 1/9001 秒调用一次。

它的工作方式是相对于球的位置将 y 坐标增加 4 个像素，并且每 1/300 秒执行一次，因此它不会以这种速度“滞后”。这对玩家来说基本上是一个“简单”的模式。如果我想做一个“硬”模式，我需要让NPC更准确。我可以这样做

```
self.player2.center_y = self.player2.center_y + 20 
```

像这样的东西。这将是非常准确的。但是，它看起来并不“流畅”，它看起来“滞后”。*我假设我可以通过更频繁地调用该方法*来获得相同的移动量，而不是通过改变像素移动来改变它的移动量。但是，我不知道如何做到这一点，因为正如我所说，从 1/300 以上的任何位置更改它似乎没有任何区别。

这就是我使用桨的方式：

```
if touch.x < self.width/3:
    self.player1.center_y = touch.y 
```

我可以随心所欲地移动它，因为它会随着我移动鼠标而更新。它看起来很流畅，因为它会根据需要更新。我不知道如何用我的 AI 做到这一点。

有谁知道我怎样才能基本上使 NPC 桨更准确，让我做 Easy-Normal-Hard 等，同时保持流动性和没有滞后？我只看到一种方法可以做到：增加调用方法的数量。

但是我打赌有更好的方法，我不知道该怎么做。有谁知道我怎么能做到这一点？谢谢。

编辑：看起来我可以这样做：

```
Clock.schedule_interval(game.ArtificialIntelligence, 1/300)     
Clock.schedule_interval(game.ArtificialIntelligence, 1/300) 
Clock.schedule_interval(game.ArtificialIntelligence, 1/300) 
Clock.schedule_interval(game.ArtificialIntelligence, 1/300)         
Clock.schedule_interval(game.ArtificialIntelligence, 1/300) 
```

但这看起来真的很丑陋而且效率很低......我更喜欢更清洁的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:01:11.380

在每秒 300 帧的情况下，问题不在于更新速率，因为您已经超过了人眼感知运动的能力 50 倍或更多。

突然运动的出现是因为球沿着直线轨迹移动，而您的桨只是跳到球现在的位置。理想情况下，您的计算机玩家可以计算出球撞击计算机桨的平面时的位置，然后以每秒 30 帧或更低的速度以非常平滑的路线到达该位置。当然，预测数学需要少量的三角函数，但它是“正确”的方法，因为这是一个好的球员会如何打球，通过预测。

仅仅增加计算机桨的大小会容易得多，这也会向人类玩家提供视觉指示游戏的难度。当计算机的桨变成一堵墙时，玩家会看到没有获胜的机会。较大的桨会产生不那么生涩的副作用，但这是否是“好”的方式是你的决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:08:50.320

我的建议是使用三角来计算球的位置，然后让桨移动到那里拦截它。

动画将以每秒 30 帧的速度流畅。

如今，当制作游戏时，AI 非常重要，玩家不会看到它“作弊”，并赋予它更大的桨或传送能力，这将是明显的迹象。它应该以与人类相同的方式进行游戏，只是更好 - 不使用玩家无法访问的某些机制。“这个游戏很烂，因为 CPU 作弊”是电子游戏论坛上非常普遍的负面评论。

因此，如果您需要计算机错过，请确保它的三角计算因随机因素而偏离，这样玩家就无法将其游戏与人类的游戏区分开来。

编辑：例如：如果随机（X）<=球的速度，则正确拦截，否则随机（Y）单位错过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T04:24:28.540

感谢您的帮助，我能够根据您和他的帮助与老师一起解决问题。

他开发了这个算法（他做的太快了，我真的无法理解它！）但这本质上是使用三角来生成桨的去向（注意，我不使用角度，因为我有其他值可以使用）

```
def AIController(self, *args):      
    ballsFuturePos = self.ball.center_y + ((self.width - self.ball.center_x) / self.ball.velocity_x) * self.ball.velocity_y
    numIterations = ((self.width - self.ball.center_x) / self.ball.velocity_x)
    #print ballsFuturePos
    #print numIterations
    if numIterations > 0:
        self.wantedPos = self.player2.center_y +(ballsFuturePos - self.player2.center_y) / numIterations        
        #print wantedPos
        #self.player2.center_y = wantedPos + (error / wantedPos) * 100

    if self.player2.center_y < self.wantedPos:
        self.player2.center_y = self.player2.center_y + 9
    if self.player2.center_y > self.wantedPos:
        self.player2.center_y = self.player2.center_y - 9 
```

因此，我通过获取球的 y 位置，添加（宽度 - 球的 x 位置）来生成球将要击中屏幕最右侧部分的位置（这让我知道屏幕最右侧部分的距离） x 像素），然后我用 x 速度计算，然后用 y 速度乘以整个事物，这给了我斜率（我认为），因此现在计算斜率也意味着它具有轨迹和因此可以预测球将在哪里击中屏幕。

我通过获取屏幕宽度并减去球 x 位置来计算到达球所需的迭代次数，该位置计算距离屏幕最右侧部分的距离，然后除以速度。这给了我一个可以用来迭代的数字。

现在我用它进行迭代，并创建一个名为 WantPos 的变量，这是我想要我的桨去的地方。这使用桨的 y 位置，加上（球将在哪里 - 桨在哪里），这给了我球和桨之间的距离，除以迭代次数，这给了我桨的位置在球的同一位置。随着每次调用的 numIterations 减少，wantedPos 也会减少，这意味着差距会变小。然后，我使用 9 作为速度迭代桨靠近球，这允许我增加或减少难度。

谢谢。如果我在试图描述他的行为时搞砸了我的逻辑，请告诉我！我想我明白了，但确认会很好:)

# xslt - 带有 FOP 的 xslfo：检查内容是否溢出并调用不同的模板？

> ID：11718744
> 
> 赞同：1
> 
> 时间：2012-07-30T09:32:43.837
> 
> 标签：xslt, xsl-fo, apache-fop

我对 XSLFO 有疑问，生成器是 FOP。我想做的：在 PDF 中，我想生成一个项目列表，每个项目都在一个具有特定宽度和高度的框中。如果内容不适合此框，则内容应显示在更大的框（也具有特定尺寸）中。

我看不出有任何方法可以在 XSLFO 中实现这一点，尤其是在 FOP 中。

有人有解决这个问题的想法吗？

谢谢你的每一个想法！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:59:43.253

这里涉及两个独立的处理步骤：

1.  生成 XSL-FO 标记（使用样式表和 XSLT 处理器）。
2.  将 XSL-FO 标记呈现为 PDF（使用 FO 处理器，例如 FOP）。

第二步不能影响第一步。无法在渲染期间测试溢出条件并以某种方式决定调用哪个模板。没有反馈回路。你所要求的是不可能的。

* * *

可以通过估计 XSLT 中文本字符串的长度来进行粗略的文本拟合。[这就是“用于猜测组合文本字符串长度的撒克逊扩展”](http://groups.yahoo.com/group/XSL-FO/message/5499)背后的想法。

我没有使用过这个扩展，它甚至可能不再可用（关于它的公告是从 2004 年开始的）。无论如何，这与实际的布局反馈机制相去甚远。

# ios - 我在哪里可以获得 SRVResolver 示例代码？

> ID：11718752
> 
> 赞同：0
> 
> 时间：2012-07-30T09:33:17.473
> 
> 标签：ios, networking, bluetooth

我正在尝试学习如何在 iOS 上进行蓝牙流式传输。在[技​​术问答 QA1753](http://developer.apple.com/library/ios/#qa/qa1753/_index.html#//apple_ref/doc/uid/DTS40011315)中提到的示例代码中，引用了另一个名为 SRVResolver 的示例代码：

> 如果您希望回调在特定的运行循环上运行，您可以使用 DNSServiceRefSockFD 获取 DNS-SD 套接字，将其包装在 CFSocket 中，然后在运行循环上安排 CFSocket。SRVResolver 示例代码显示了一个示例。
> 
> [http://developer.apple.com/library/mac/#samplecode/SRVResolver/](http://developer.apple.com/library/mac/#samplecode/SRVResolver/)

然而，苹果开发网站上不再存在该链接..我在网络上的任何其他地方都找不到它的示例..有人可以指导我到哪里可以找到它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:16:09.107

`SRVResolver`OS X 10.8 文档集中似乎不存在。它可以在 10.6 和 10.7 文档集中找到。

在 10.8 中，有一个`DNSSDObjects`例子，看起来很相似，但我没有看清楚它的作用。QA1753 已更新以引用此新示例。

谷歌搜索`SRVResolver filetype:m`没有产生任何结果，但旧的文档集*应该*仍然可以从 Xcode 的首选项中下载。

# javascript - 如果特定单词在 javascript 中匹配，则替换行

> ID：11718758
> 
> 赞同：0
> 
> 时间：2012-07-30T09:33:44.573
> 
> 标签：javascript, regex, string

如果行中的特定单词匹配，那么我想阅读整行。我怎样才能做到这一点。

就像如果

```
var str = "this is test sample msg \n this is second line \n  "; 
```

包含“样本”字的行将被返回。

我怎么能在javascript中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T09:36:15.007

```
var str = "this is test sample msg \n this is second line \n third samples";
str.split("\n").filter(function(str) {
    return ~str.indexOf("sample")
});
//["this is test sample msg ", " third samples"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:37:53.450

尝试这个

```
var line = "sample text", var str = "sample";
if(line.indexOf(sample) > 0){
//do something
}else{
//do something else
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T09:38:45.507

```
function returnLine(lines, str)
{
    var i, lines = lines.split("\n");

    for(i=0; i<lines.length; i++)
    {
        if(lines[i].indexOf(str) !== -1)
        {
            return lines[i];
        }
    }

    return '';
} 
```

要使用：

```
returnLine("this is test sample msg \n this is second line \n ", "sample"); 
```

# .net - 将 [AutoFixture] SemanticComparison OfLikeness 应用于序列/集合/数组/IEnumerable

> ID：11718761
> 
> 赞同：14
> 
> 时间：2012-07-30T09:33:52.433
> 
> 标签：.net, unit-testing, collections, autofixture, semantic-comparison

我们编写了一个如下所示的测试。此测试要求我们`Equal`为 -class 创建了 en -overload `CodeTableItem`：

```
ICollection<CodeTableItem> expectedValutaList = new List<CodeTableItem>();
expectedValutaList.Add(new CodeTableItem("DKK", "DKK"));
expectedValutaList.Add(new CodeTableItem("EUR", "EUR"));
RepoDac target = new RepoDac(); 

var actual = target.GetValutaKd();

CollectionAssert.AreEqual(expectedValutaList.ToList(),actual.ToList()); 
```

测试工作正常，但不幸地依赖于`Equality`-function，这意味着如果我`CodeTableItem`用一个更多字段扩展 -class，并且忘记扩展`Equals`-function，单元测试仍然运行绿色，尽管我们没有测试所有字段. 我们想避免这种`Equality`污染（参见[测试特定的平等](http://xunitpatterns.com/test-specific%20equality.html)），它只是为了符合测试而编写的。

我们尝试过使用`OfLikeness`，并以这种方式重写了测试：

```
ICollection<CodeTableItem> expectedValutaList = new List<CodeTableItem>();
expectedValutaList.Add(new CodeTableItem("DKK", "DKK"));
expectedValutaList.Add(new CodeTableItem("EUR", "EUR"));
var expectedValutaListWithLikeness = 
          expectedValutaList.AsSource().OfLikeness<List<CodeTableItem>>();

RepoDac target = new RepoDac(); 
ICollection<CodeTableItem> actual;

actual = target.GetValutaKd();

expectedValutaListWithLikeness.ShouldEqual(actual.ToList()); 
```

但测试失败，因为`Capacity`不相等。我编写了多次通过反射运行的代码，并且通常最终实现了忽略字段的重载。有没有办法用`OfLikeness`or忽略某些字段`ShouldEqual`？还是有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-30T11:56:15.350

**为什么你不想那样做**

我不认为从任何人创建一个像`List<T>`你想要它做的事情。据我了解，您想比较两个列表的*内容*。这与比较两个列表不同......

考虑一下 Likeness 的作用：它比较*属性*值。的属性是`List<T>`什么？

他们是

*   容量
*   数数

正如 Nikos Baxevanis 在他的回答中指出的那样，您可以使用 Without 方法忽略 Capacity 属性的值，但这意味着只保留 Count 属性。

换句话说，如果你这样做了，那么：

```
expectedValutaListWithLikeness.ShouldEqual(actual.ToList()); 
```

在功能上等同于：

```
Assert.AreEqual(expected.Count, actual.Count) 
```

换句话说，列表可能有完全不同的数据，但如果每个列表的元素数量相同，测试仍然可以通过。这可能不是你想要的...

**你应该做什么**

您可以使用 Likeness 将每个元素相互比较。像这样的东西应该工作：

```
var expectedValutaList = new List<CodeTableItem>();
expectedValutaList.Add(new CodeTableItem("DKK", "DKK"));
expectedValutaList.Add(new CodeTableItem("EUR", "EUR"));

var expectedValutaListWithLikeness = from cti in expectedValutaList
                                     select cti
                                         .AsSource()
                                         .OfLikeness<CodeTableItem>();

var target = new RepoDac(); 

var actual = target.GetValutaKd();

Assert.IsTrue(expectedValutaListWithLikeness.Cast<object>().SequenceEqual(
    actual.Cast<object>())); 
```

您也可以使用 CollectionAssert 进行断言，但是自从我上次使用 MSTest 以来已经有很多年了，以至于我不记得该方法的怪癖了...

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-30T10:07:37.100

只需添加`.Without(x => x.Capacity)`和 Likeness 实例将`Capacity`在比较值时忽略该属性。

```
var expectedValutaListWithLikeness = 
      expectedValutaList.AsSource().OfLikeness<List<CodeTableItem>>()
      .Without(x => x.Capacity); 
```

**更新：**

正如 Mark Seemann 在他的回答中指出的那样，您可能想要的是将每个元素相互比较。这是一种稍微不同的方式，可让您执行*非常*灵活的比较。

假设 RepoDac 类返回如下内容：

```
public class RepoDac
{
    public ICollection<CodeTableItem> GetValutaKd()
    {
        return new[]
        {
            new CodeTableItem("DKK", "DKK"),
            new CodeTableItem("EUR", "EUR")
        };
    }
} 
```

对于 上的每个实例，`expectedValutaList`您可以创建一个使用 Likeness 覆盖 Equals 的动态代理：

```
var object1 = new CodeTableItem("DKK", "DKK1")
    .AsSource().OfLikeness<CodeTableItem>()
    .Without(x => x.Property2)
    .CreateProxy();

var object2 = new CodeTableItem("EUR2", "EUR")
    .AsSource().OfLikeness<CodeTableItem>()
    .Without(x => x.Property1)
    .CreateProxy(); 
```

> 请注意 object1 和 object2 如何具有甚至不同的动态生成的 Equals。*（第一个忽略 Property2 而第二个忽略 Property1。）*

以下测试通过：

```
var expected = new List<CodeTableItem>();
expected.Add(object1);
expected.Add(object2);

var target = new RepoDac();
var actual = target.GetValutaKd();

Assert.IsTrue(expected.SequenceEqual(actual)); 
```

**笔记：**

需要从`expected`包含动态生成的代理（覆盖 Equals）的实例开始。

[您可以在此处](http://blog.ploeh.dk/2012/06/22/ResemblanceAndLikeness.aspx)找到有关此功能的更多信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T12:21:50.957

以下答案来自[我问自己这个问题的副本](https://stackoverflow.com/questions/12817974/comparing-sequences-with-ploeh-autofixture-semanticcomparison-likeness)，见下文

您可以使用`SequenceLike`暗示 LINQ 运算符的`SequenceEqual`操作。

这允许人们写：-

```
[Theory, AutoData]
public void ShouldMap(  Dto inputDto )
{
    var mapped = inputDto.ToModel();

    inputDto.AsSource().OfLikeness<Model>()
        .Without( x => x.IgnorableProperty )
        .With( x => x.Tags ).EqualsWhen( ( dto, model ) => 
            model.Tags.SequenceLike( dto.Tags ) )
        .ShouldEqual( mapped );
} 
```

得益于@Nikos Baxevanis 的提示，基于@Mark Seemann 的回答的多合一助手的闪亮简短实现：-

```
static class LikenessSequenceExtensions
{
    public static bool SequenceLike<T, TSource>( this IEnumerable<T> that, IEnumerable<TSource> source )
    {
        return SequenceLike<T, TSource>( that, source, x => x );
    }

    public static bool SequenceLike<T, TSource>( this IEnumerable<T> that, IEnumerable<TSource> source, Func<Likeness<TSource, T>, IEquatable<T>> customizeLikeness )
    {
        return source.Select( x => customizeLikeness( x.AsSource().OfLikeness<T>() ) ).SequenceEqual( that.Cast<object>() );
    }
} 
```

* * *

# 我的原始实现：

```
static class LikenessSequenceExtensions0
{
    public static bool SequenceLike0<T, TSource>( this T[] that, TSource[] source )
    {
        return source.SequenceLike0( that, likeness => likeness );
    }

    public static bool SequenceLike0<T, TSource>( this T[] that, TSource[] source, Func<Likeness<TSource, T>, IEquatable<T>> customizeLikeness )
    {
        return source.SequenceEqual( that, ( x, y ) => customizeLikeness( x.AsSource().OfLikeness<T>() ).Equals( y ) );
    }

    public static bool SequenceEqual<T, TSource>( this T[] that, TSource[] source, Func<T, TSource, bool> equals )
    {
        return that.Length == source.Length && that.Zip( source, Tuple.Create ).All( x => equals( x.Item1, x.Item2 ) );
    }
} 
```

* * *

# 原始重复问题

我正在寻找最简洁的方法来管理我的基于 xunit.AutoFixture 的测试中的数组/ /的[测试特定相等性。](http://xunitpatterns.com/test-specific%20equality.html)`IEnumerable<T>``seq<'T>`

OOTB（我已经失去了我在哪里学到这个的参考），最高 2.12`Ploeh.SemanticComparison`的`Likeness`版本仅适用于单个项目。

将相同技术应用于项目集合（理想情况下是 OOTB，但对经过良好判断的扩展方法套件非常开放）以促进以可组合方式表达包含嵌入对象的项目的相似性的最佳方法是什么？

*这确实是一个自我回答，所以如果 Likeness 将来提供序列支持，我可以隐藏助手并允许放置一个“你在 V nn 中这样做”的地方，但这不会是我第一次'我对 AFflicted AFicionados 可能回答的微妙之处感到惊讶*

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-18T06:01:27.297

我想为其他有此问题的人明确说明 - 使用 Ruben 的第二个代码示例，您想在其中比较 Calendar 和 Calendar.Holidays，同时自定义两者的比较：

```
var expectedCalendar = newCalendar.AsSource()
   .OfLikeness<Calendar>()
   .Without(c=>c.Id) //guid, will never be equal
   .With(c=>c.Holidays).EqualsWhen((source, dest) => 
      source.Holidays.SequenceLike(dest.Holidays, holiday => 
          holiday.Without(h=>h.SecondsUntil) //changes every second
   )); 
```

在此示例中，您首先在日历对象上设置要排除的属性等。然后你给出一个自定义的 EqualsWith 实现来处理 Holidays 集合。然后，holiday=> lambda 允许您自定义子比较，就像父级一样。只要您喜欢大量括号，就可以继续嵌套。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-08T18:27:57.223

我不确定这个问题是否仍然相关，但您正在寻找的是[https://github.com/jmansar/SemanticComparisonExtensions](https://github.com/jmansar/SemanticComparisonExtensions)

您可以使用 .WithCollectionInnerLikeness() 进行集合比较，它会得到您想要的。

# android - java.lang.RuntimeException android ActivityInstrumentationTestCase2 测试

> ID：11718763
> 
> 赞同：1
> 
> 时间：2012-07-30T09:34:03.667
> 
> 标签：android

我想运行一个扩展 ActivityInstrumentationTestCase2 的测试类。但我得到了下一个日志。我在 Oncreate 将断点设置为目标活动，但它甚至没有到那里，然后我得到了错误。

```
[2012-07-30 18:14:42 - myapp] Uploading myapp.apk onto device '66313d1c'
[2012-07-30 18:14:47 - myapp] Installing myapp.apk...
[2012-07-30 18:14:57 - myapp] Success!
[2012-07-30 18:14:57 - mytestapp] Launching instrumentation android.test.InstrumentationTestRunner on device 66313d1c
[2012-07-30 18:14:57 - mytestapp] Collecting test information
[2012-07-30 18:14:58 - mytestapp] Test run failed: Instrumentation run failed due to 'java.lang.RuntimeException' 
```

我这样做了：

```
adb shell pm list instrumentation 
```

我可以看到我的测试应用程序。

整个日志：

```
07-30 20:37:16.172: W/dalvikvm(19499): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
07-30 20:37:16.202: E/AndroidRuntime(19499): FATAL EXCEPTION: main
07-30 20:37:16.202: E/AndroidRuntime(19499): java.lang.RuntimeException: Exception thrown in onCreate() of ComponentInfo{mytestapp/android.test.InstrumentationTestRunner}: java.lang.RuntimeException: Could not instantiate test class. Class:myapp.activity.myactivityTest
07-30 20:37:16.202: E/AndroidRuntime(19499):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3257)
07-30 20:37:16.202: E/AndroidRuntime(19499):    at android.app.ActivityThread.access$2200(ActivityThread.java:117)
07-30 20:37:16.202: E/AndroidRuntime(19499):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:973)
07-30 20:37:16.202: E/AndroidRuntime(19499):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-30 20:37:16.202: E/AndroidRuntime(19499):    at android.os.Looper.loop(Looper.java:130)
07-30 20:37:16.202: E/AndroidRuntime(19499):    at android.app.ActivityThread.main(ActivityThread.java:3691)
07-30 20:37:16.202: E/AndroidRuntime(19499):    at java.lang.reflect.Method.invokeNative(Native Method)
07-30 20:37:16.202: E/AndroidRuntime(19499):    at java.lang.reflect.Method.invoke(Method.java:507)
07-30 20:37:16.202: E/AndroidRuntime(19499):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)
07-30 20:37:16.202: E/AndroidRuntime(19499):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
07-30 20:37:16.202: E/AndroidRuntime(19499):    at dalvik.system.NativeStart.main(Native Method)
07-30 20:37:16.202: E/AndroidRuntime(19499): Caused by: java.lang.RuntimeException: Could not instantiate test class. Class:myapp.activity.myactivityTest
07-30 20:37:16.202: E/AndroidRuntime(19499):    at android.test.AndroidTestRunner.runFailed(AndroidTestRunner.java:233)
07-30 20:37:16.202: E/AndroidRuntime(19499):    at android.test.AndroidTestRunner.buildSingleTestMethod(AndroidTestRunner.java:100)
07-30 20:37:16.202: E/AndroidRuntime(19499):    at android.test.AndroidTestRunner.setTestClassName(AndroidTestRunner.java:51)
07-30 20:37:16.202: E/AndroidRuntime(19499):    at android.test.suitebuilder.TestSuiteBuilder.addTestClassByName(TestSuiteBuilder.java:81)
07-30 20:37:16.202: E/AndroidRuntime(19499):    at android.test.InstrumentationTestRunner.parseTestClass(InstrumentationTestRunner.java:418)
07-30 20:37:16.202: E/AndroidRuntime(19499):    at android.test.InstrumentationTestRunner.parseTestClasses(InstrumentationTestRunner.java:399)
07-30 20:37:16.202: E/AndroidRuntime(19499):    at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:364)
07-30 20:37:16.202: E/AndroidRuntime(19499):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3254) 
```

我的活动测试活动

```
package myapp;

    import myapp.R;
    import android.test.ActivityInstrumentationTestCase2;

    public class myactivityTest extends ActivityInstrumentationTestCase2<myactivity> {

        public ImportFileSelectorTest(String name) {
            super("myactivity", myactivity.class);
        }

        protected final void setUp() throws Exception {
            super.setUp();
        }

        protected final void tearDown() throws Exception {
            super.tearDown();
        }

        public void testSimpleDefaults(){
            assertTrue(true);
        }

    } 
```

任何提示都会有所帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:24:00.263

好吧，在我的情况下，类的构造函数抛出异常，所以我在构造函数中处理了该异常，它开始正常工作！虽然很奇怪，但这有效:)

所以就像`public classname throws exception(){}`我改成的一样`public classname (){try...catch}`

# java - JVM getObjectSize 示例

> ID：11718765
> 
> 赞同：6
> 
> 时间：2012-07-30T09:34:11.970
> 
> 标签：java, jvm

我在获取 JVM 中对象的大小时遇到​​了一些麻烦。JDK 5 提供了一个`Instrumentation`通过`premain()`函数计算的接口，但我不知道如何使用它。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T10:16:35.707

最简单和最有效的解决方案是使用非常小的**sizeof**库

```
<dependency>
    <groupId>com.carrotsearch</groupId>
    <artifactId>java-sizeof</artifactId>
    <version>0.0.3</version>
</dependency> 
```

你需要使用这个[http://grepcode.com/file/repo1.maven.org/maven2/com.carrotsearch/java-sizeof/0.0.2/com/carrotsearch/sizeof/RamUsageEstimator.java?av=f](http://grepcode.com/file/repo1.maven.org/maven2/com.carrotsearch/java-sizeof/0.0.2/com/carrotsearch/sizeof/RamUsageEstimator.java?av=f)

**shallowSizeOf()**方法或**sizeOf()**

到目前为止，这确实是我在这个主题上找到的最简单的快速解决方案......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:37:46.357

另一个可能对您有所帮助的开源项目是[Jamm](https://github.com/jbellis/jamm)，它也使用了 JVM 代理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T09:50:37.173

在这里，我们有一篇非常好的***达斯汀马克思***的文章，我可以参考你。

[http://java.dzone.com/articles/estimating-java-object-sizes](http://java.dzone.com/articles/estimating-java-object-sizes)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T10:02:23.013

您可能会发现使用[MemoryMeasurer 库](https://github.com/DimitrisAndreou/memory-measurer)很有帮助，它将简单的内存测量打包到一个相对简单的 API 中。（或者，您可以查看它的源代码以了解它如何使用检测。）

# ruby-on-rails - 我的第一个 Ruby On Rails 应用程序出了什么问题？

> ID：11718768
> 
> 赞同：2
> 
> 时间：2012-07-30T09:34:21.363
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我是 Ruby On Rails 的新手。我在 2 天前安装在 Windows 上，现在我想用它创建一个简单的“Hello Rails”。我使用[本教程](http://guides.rubyonrails.org/getting_started.html)。我完成了本文中描述的所有步骤，但它不起作用。步骤是：

1.  在 PowerShell 中编写此命令：rails generate controller home index
2.  在文本编辑器中打开 app/views/home/index.html.erb 并编辑它以包含一行代码：

    # 你好，Rails！

3.  使用此命令 rm public/index.html 从应用程序中删除默认页面

4.  在编辑器中打开文件 config/routes.rb，然后编辑 root

> :to => "欢迎#index"

到

> :to => "home#index"

1.  导航

> “http://localhost:3000”

在我的浏览器中，但我看到了这个错误，而不是 Hello Rails：（我没有足够的声誉来发布错误图片）

> 路由错误
> 
> 没有路线匹配 [GET] "/"

谁能告诉我有什么问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:51:39.980

确保文件中的*唯一*内容`config/routes.rb`如下：

```
Blog::Application.routes.draw do
  root :to => "home#index"
end 
```

（现在只需删除其他所有内容以确保它是干净的）

另外，请尝试终止服务器并确保您仍然看不到该错误消息（这可能表明另一台服务器仍在某处运行）。按照这些思路，请确保在获取页面时在控制台输出中看到请求。

如果您仍然收到错误，请在控制台错误消息中查找任何线索。

# java - google protocol buffers如何定义List in protocol buffers proto file Java class has a List Property , how definition List in protocol buffers proto file,as google protocol buffers 问问题 问问题 2012-07-30T09:34:25.993 7360 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Java class has a List Property , how definition List in protocol buffers proto file,as google protocol buffers no support Object of java world ? In general, protocol buffer message types exist independently of standard Java value types, or sometimes Java value types are implemented as wrappers around protocol buffers. In this specific case, however, the protocol buffer compiler compiles repeated fields to Java Lists. Of course, you'll need to figure out how to protobuffify the objects in the list, but your question doesn't give us enough information to help with that. javaprotocols 4 1 回答 1 This answer is useful 1 In general, protocol buffer message types exist independently of standard Java value types, or sometimes Java value types are implemented as wrappers around protocol buffers. In this specific case, however, the protocol buffer compiler compiles repeated fields to Java Lists. Of course, you'll need to figure out how to protobuffify the objects in the list, but your question doesn't give us enough information to help with that. 于 2012-07-30T10:00:55.840 回答 Related 0 c - 尽管使用了宏，但 Doxygen 中的文档 C？ 1 c# - 文本的工具提示可能吗？ 2 android - 膨胀类片段时出错-sherlockactionbar google map v2 2 c# - 如何在 .Net MVC 中使用 jQuery 数据表和控制器内的 HTML 渲染实现服务器端处理 2 regex - Visual Studio 用正则表达式查找和替换，用下划线替换空格 2 php - 从 jQuery-ui 滑块中获取值 3 ios - CALayer & drawRect 1 sorting - Python：对字典的值进行排序，其值是元组列表？ 1 ruby-on-rails-3.1 - Rails - 如何对电子邮件使用“has_secure_password”技术 1 matlab - Matlab中的稀疏3D矩阵 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11718770
> 
> 赞同：0
> 
> 时间：
> 
> 标签：java, protocols

Java class has a `List<Object>` Property , how definition `List<Object>` in protocol buffers proto file,as google protocol buffers no support Object of java world ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:00:55.840

In general, protocol buffer message types exist independently of standard Java value types, or sometimes Java value types are implemented as wrappers around protocol buffers.

In this specific case, however, the protocol buffer compiler compiles `repeated` fields to Java `List`s. Of course, you'll need to figure out how to protobuffify the objects *in* the list, but your question doesn't give us enough information to help with that.

# php - php Filemtime函数显示错误的日期

> ID：11718772
> 
> 赞同：4
> 
> 时间：2012-07-30T09:34:34.670
> 
> 标签：php

我想将最后修改日期添加到索引页面，下面的代码显示 31/12/1969 是最后修改日期。

```
echo date("d/m/Y",filemtime("index.php")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T09:38:52.530

估计路径不对。最后，在您的开发系统上，您应该增加错误设置。

在错误[`filemtime()`](http://php.net/filemtime)返回的情况下，-call`false`会生成什么。`0``date()`

您应该使用（伪）绝对路径在文件系统上引用您的文件。

```
__DIR__ . '/path/to/index.php'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:38:48.393

我的猜测是`filemtime`找不到您的文件。`filemtime`将返回 0，或等于 0 的值，例如 FALSE，然后`date`按时应用`0`将返回自纪元（1970 年 1 月 1 日）以来的 0 秒。

看起来这就是你得到的。我也猜你正在使用 PHP <= 5.1。

# galaxy - WakeLock.acquire 在三星 Galaxy SII LTE 上需要很长时间

> ID：11718775
> 
> 赞同：1
> 
> 时间：2012-07-30T09:34:41.980
> 
> 标签：galaxy, wakelock

在我的项目中，将在服务中启动另一个线程。为避免在设备挂起时暂停此线程，我在启动此线程之前获取了 WakeLock，并在此线程完成后释放此 WakeLock。有时，此 API 调用 (WakeLock.acquire) 需要很长时间，在三星 Galaxy SII LTE 上超过 4 分钟。

下面是我的代码： 在服务 onStartCommand 中，获取唤醒锁：

```
 if (mWakeLock == null) {
        final PowerManager pm = (PowerManager)getSystemService(Context.POWER_SERVICE);
        mWakeLock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "Eca Engine");
        mWakeLock.setReferenceCounted(false);
    }
    if (!mWakeLock.isHeld()) {
        Log.d(TAG, "Before acquire");
        mWakeLock.acquire();
        Log.d(TAG, "After acquire");
    }
    ...... 
```

在线程中，释放唤醒锁：

```
 if (mWakeLock != null && mWakeLock.isHeld()) {
        mWakeLock.release();
    } 
```

日志：在“获取之前”超过 4 分钟后打印“获取之后”。

测试设备信息为： 型号：Sc-03d Android版本：2.3.6 基础版本：3c03domlb9 内核版本：2.6.35.11 - 3c03domlb9 980106 se.infra@sep-53#2 Build number：gingerbread omlb9

以前有人遇到过这个问题吗？或者对我的任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:20:07.310

我已经解决了这个问题。我向主线程发送一个命令，让它释放唤醒锁，而不是直接在新线程中释放它。那么这个问题就不能再重现了。

有人了解根本原因吗？为什么我们无法在服务主线程中获取唤醒锁并在另一个线程中释放它，即使我们在同一个 WakeLock obj 上操作。

# javascript - 如何获得正确的计数而不是 JSON 数据的字符长度

> ID：11718776
> 
> 赞同：0
> 
> 时间：2012-07-30T09:34:46.023
> 
> 标签：javascript, json

我认为我的代码返回一个 JSON 数组。返回的 JSON 数组存储在一个 javascript 变量中：result。如果我

```
console.log(result); 
```

在FF中，我得到了输出

```
[{"id":"G24","value":"Zas, S"},{"id":"G75","value":"Wara, TS"},{"id":"G48","value":"Jala, S"}] 
```

在 jsonLint 上验证为正确的 json。

在我的代码中，如果我像这样计算数组中的元素数：

```
var key, count = 0;
for(key in result) 
{
  count++;
}
console.log("result count is:" + count); 
```

输出为 94，这是数组中字符的长度/计数 - [上面显示的示例输出已修改]

但是，在 FF 的 JSON 选项卡中，它显示的结果是一个对象数组：

```
0   Object { id="G24", value="Zas, S"}
1   Object { id="G75", value="Wara, TS"}
2   Object { id="G48", value="Jala, S"} 
```

我使用了来自“stackoverflow”[来源的替代代码片段](https://stackoverflow.com/questions/4546159/how-to-find-length-of-json-using-json-parse)

```
for ( property in result )
{
   if(result.hasOwnProperty(property))
   {
     count++;
   }
} 
```

这也产生了同样的结果。我怎样才能正确地迭代这个数组或对象数组或字符串或其他任何东西？并请数数？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T09:36:49.687

听起来您有一个返回 JSON 文档的 HTTP 响应。

在 JSON 选项卡中，这显示为 JSON。

如果您的代码，您只是获取响应的文本并对其进行操作。

您需要解析 JSON 以创建 JavaScript 对象。

传递字符串[`JSON.parse`](https://developer.mozilla.org/en/JSON#Using_JSON_through_JavaScript%27s_JSON_object)并使用[json2.js](https://github.com/douglascrockford/JSON-js/)为旧浏览器填充。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T09:39:40.953

您必须解析 JSON 以创建 JavaScript 数组。

```
result = JSON.parse(result); // Now it's an array
console.log(result.length) // prints now what you want 
```

# ruby-on-rails - 带有保护的 rspec 测试无法访问模型对象

> ID：11718791
> 
> 赞同：0
> 
> 时间：2012-07-30T09:35:44.057
> 
> 标签：ruby-on-rails, rspec

我无法为 db 对象运行 rspec 测试。我使用 rails 生成器创建了一个模型。然后我重新启动了警卫控制台。我是 Rails 新手，如果有人能指出我明显的错误，我将不胜感激:)

以下是我拥有的 rspec 文件 -

```
require 'spec_helper'

describe TasksController do

  describe "Tasks" do
    describe "GET/tasks" do
      it "display some tasks" do
        @task = Task.create :task => "Get it done"

        visit tasks_path 
        page.should_have_content "Get it done"
      end
    end
  end
end 
```

我的测试通过警卫运行。以下是我收到的错误 -

> 失败：
> 
> 1) TasksController 任务 GET/tasks 显示一些任务失败/错误：@task = Task.create :task => "完成它" ActiveRecord::StatementInvalid: 找不到表 'tasks' # ./spec/controllers/tasks_controller_spec。 rb:8:in `block (4 levels) in '

# javascript - Paypal付款完成后有什么方法可以激活按钮

> ID：11718792
> 
> 赞同：0
> 
> 时间：2012-07-30T09:35:44.227
> 
> 标签：javascript, paypal

我想创建一个带有功能链接的按钮。您只能通过 paypal-payment 激活此按钮。

首先有一个非活动按钮，如果你点击你会去贝宝付款。如果付款完成，我想返回站点并且该按钮现在处于活动状态，您可以单击。我怎么能用 Javascript 做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:34:25.003

您可以将返回 URL 交给 paypal，如果付款成功/中止，则会调用该 URL。所以只需在这个返回 URL 上做所有的魔法。无需使用 javascript 执行此操作。您必须首先在您的帐户中启用自动退货才能使其正常工作。

[贝宝自动退货](https://www.paypal.com/cgi-bin/webscr?cmd=p/mer/express_return_summary-outside)

[API 指南](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_WebsitePaymentsStandard_IntegrationGuide.pdf)- 第 351 页上的自动返回；）

# css - 居中输入字段，容器是必须的吗？

> ID：11718794
> 
> 赞同：0
> 
> 时间：2012-07-30T09:35:54.947
> 
> 标签：css, center

我正在尝试将输入字段居中，但是，它似乎忽略了边距：0 auto; 环境。

需要一个容器来居中吗？还是我做错了什么？

这是我的示例代码，如您所见，框居中，但不是输入字段。

[http://jsfiddle.net/EXZJm/](http://jsfiddle.net/EXZJm/)

很多谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T09:37:45.733

制作`input`一个块元素 - [http://jsfiddle.net/EXZJm/2/](http://jsfiddle.net/EXZJm/2/)

```
 input{
      margin: 0px auto; 
      width: 100px;
      display: block; /* this */
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:39:52.467

只需将 text-align:center 添加到父元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T09:40:32.343

由于默认情况下输入是内联元素，您可以`text-align: center;`在父框上使用并省略输入的边距。

# sql-server - SQL - 查询无效，因为它不包含在聚合函数或 group by 子句中

> ID：11718799
> 
> 赞同：0
> 
> 时间：2012-07-30T09:36:19.783
> 
> 标签：sql-server, tsql

我有一些问题。我有 3 张桌子`Product`, `Version`, `Date`.

依赖项：

*   `version.ProductId = Product.Id`（一个产品有 >=1 个版本）
*   `Date.VersionId = Version.ID`（一对一）

我想获得pairs product - Max 的版本`Date`（`Version`对于每个产品）

就像是：

```
Product 1 - 1.0
Product 2 - 0.9 etc 
```

我尝试了以下查询：

```
SELECT 
     productName, versionName
FROM   
    (SELECT 
         p.Name AS productName, v.Name AS versionName, MAX(d.Date) AS ddate
     FROM  
         Product AS p 
     INNER JOIN 
         Version AS v ON v.ProductId = p.Id 
     INNER JOIN 
         Date AS d ON d.VersionId = v.Id
     WHERE  
         (d.Date < { fn CURDATE() })
     GROUP BY p.Name) AS prd 
```

但我收到一个错误：

> 列 Version.Name 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:37:46.630

您需要在 group by 子句中包含 v.Name

```
SELECT productName, versionName 
FROM   
    (SELECT p.Name AS productName, v.Name AS versionName, MAX(d.Date) AS ddate 
    FROM  Product AS p INNER JOIN Version AS v ON v.ProductId = p.Id  
    INNER JOIN VDate AS d ON d.VersionId = v.Id 
    WHERE  (d.Date < { fn CURDATE() }) 
    GROUP BY p.Name, v.Name 
    ) AS prd 
```

编辑。

```
 select
product.name,
version.name
  from 
product
    inner join
      version
    on product.id = version.productid
inner join
    date on version.id = date.versionid
inner join 
(
    select productid, MAX(date) as maxdate
    from version
        inner join date on version.id = date.versionid
    group by productid
) maxver
    on date.date = maxver.maxdate
    and version.productid = maxver.productid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:43:39.247

试试这个

```
SELECT p.Name AS productName, v.Name AS versionName
FROM  Product AS p INNER JOIN Version AS v ON v.ProductId = p.Id  
inner join 
(select VersionId,MAX(d.Date) from VDate group by Versionid) AS d 
on d.VersionId = v.Id  
WHERE  and d.Date < { fn CURDATE() }
GROUP BY p.Name,v.name 
```

# python - python中套接字编程中的多选择器

> ID：11718801
> 
> 赞同：0
> 
> 时间：2012-07-30T09:36:28.237
> 
> 标签：python, sockets

我是 python 编程的新手，我可以在编程套接字中使用多选择器吗？. 如果可以，请给我一个例子。非常感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T23:51:23.497

有关使用非阻塞套接字的异步 I/O 的基础知识，请参阅[官方 Python 文档。](http://docs.python.org/2/howto/sockets.html#non-blocking-sockets)

有关该模块及其功能的优秀教程，请参阅[PyMOTW 。](http://pymotw.com/2/select/)`select``select.select()`

其他教程可以在[IBM developerWorks](http://www.ibm.com/developerworks/linux/tutorials/l-pysocks/section4.html)和[BGU](http://ilab.cs.byu.edu/python/select/echoserver.html)上找到。

在 Unix/Linux 上，`select.poll()`在`select.epoll()`概念上类似于`select.select()`但效率更高。

# android - 实现点击缩放

> ID：11718802
> 
> 赞同：0
> 
> 时间：2012-07-30T09:36:28.710
> 
> 标签：android

我已经创建了两个应用程序捏缩放和双击缩放，但我不知道如何实现单击缩放。

有人知道，如何实现 Tap Zooming？

# jetty - 使用静态资源为码头配置上下文路径

> ID：11718805
> 
> 赞同：4
> 
> 时间：2012-07-30T09:36:46.807
> 
> 标签：jetty, maven-jetty-plugin

我有一个配置为启动 Jetty 并从 ../client 加载静态的 Maven 应用程序。配置如下：

```
<plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>8.1.4.v20120524</version>
            <configuration>
                <scanIntervalSeconds>25</scanIntervalSeconds>
                <connectors>
                    <connector implementation="org.eclipse.jetty.server.bio.SocketConnector">
                        <port>9095</port>
                        <maxIdleTime>60000</maxIdleTime>
                    </connector>
                </connectors>
                <webAppSourceDirectory>../client/</webAppSourceDirectory>
                <webAppConfig>
                    <resourceBases>
                        <resourceBase>src/main/webapp</resourceBase>
                        <resourceBase>../client/</resourceBase>
                    </resourceBases>
                </webAppConfig>
            </configuration>
</plugin> 
```

我要做的是仅将 webapp 移动到 /API 资源库下。更明确地说，我想要映射：

```
src/main/webapp      --->     /API
../client/           --->     / 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T11:06:24.373

终于找到了正确的配置：

```
<webAppConfig>
    <contextPath>/API</contextPath>
</webAppConfig>
<contextHandlers>
    <contextHandler implementation="org.eclipse.jetty.webapp.WebAppContext">
        <contextPath>/</contextPath>
        <resourceBase>../client/</resourceBase>
    </contextHandler>
</contextHandlers> 
```

# php - 如何在 Zend Framework 2 中进行文件上传？

> ID：11718809
> 
> 赞同：7
> 
> 时间：2012-07-30T09:36:53.480
> 
> 标签：php, forms, zend-framework2

我一直在研究 ZF2 中的文件上传。

我知道你们中的许多人会认为这是一个太模糊的问题，但是创建具有更多处理能力的表单元素的最佳方法是什么？

我似乎不知道从哪里开始。我已经排除在控制器中处理它，因为这会违反 DRY 原则。表单对象似乎没有“挂钩”任何代码的地方。视图助手就是这样，对于视图，因此在其中做任何事情都没有意义。这样就剩下输入过滤器了。这似乎也不对。

我一直转向传输适配器，但代码看起来不是很 ZF2。

很抱歉，这是一个如此含糊的问题，我希望它能引起同情。很难学习一个文档很少的框架，而且我的 zend 框架 1 知识有点薄，进度有点慢。

一旦我有一个很好的例子，我可能会找到一些地方发布它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-28T07:07:00.990

很简单：
**[在您的控制器中]**

```
$request = $this->getRequest();
if($request->isPost()) { 
     $files =  $request->getFiles()->toArray();
     $httpadapter = new \Zend\File\Transfer\Adapter\Http(); 
     $filesize  = new \Zend\Validator\File\Size(array('min' => 1000 )); //1KB  
     $extension = new \Zend\Validator\File\Extension(array('extension' => array('txt')));
     $httpadapter->setValidators(array($filesize, $extension), $files['file']['name']);
     if($httpadapter->isValid()) {
         $httpadapter->setDestination('uploads/');
         if($httpadapter->receive($files['file']['name'])) {
             $newfile = $httpadapter->getFileName(); 
         }
     }
} 
```

**更新**：我找到了将文件验证与表单验证结合使用的更好方法：
将此类添加到您的模块中，例如：Application/Validators/File/Image.php

```
<?php
namespace Application\Validators\File;

use Application\Validator\FileValidatorInterface;
use Zend\Validator\File\Extension;
use Zend\File\Transfer\Adapter\Http;
use Zend\Validator\File\FilesSize;
use Zend\Filter\File\Rename;
use Zend\Validator\File\MimeType;
use Zend\Validator\AbstractValidator;

class Image extends AbstractValidator
{  
    const FILE_EXTENSION_ERROR  = 'invalidFileExtention';
    const FILE_NAME_ERROR       = 'invalidFileName'; 
    const FILE_INVALID          = 'invalidFile'; 
    const FALSE_EXTENSION       = 'fileExtensionFalse';
    const NOT_FOUND             = 'fileExtensionNotFound';
    const TOO_BIG               = 'fileFilesSizeTooBig';
    const TOO_SMALL             = 'fileFilesSizeTooSmall';
    const NOT_READABLE          = 'fileFilesSizeNotReadable';

    public $minSize = 64;  //KB
    public $maxSize = 1024; //KB
    public $overwrite = true;
    public $newFileName = null;
    public $uploadPath = './data/';
    public $extensions = array('jpg', 'png', 'gif', 'jpeg');
    public $mimeTypes = array(
                    'image/gif',
                    'image/jpg',
                    'image/png',
            );

    protected $messageTemplates = array(   
            self::FILE_EXTENSION_ERROR  => "File extension is not correct", 
            self::FILE_NAME_ERROR       => "File name is not correct",  
            self::FILE_INVALID          => "File is not valid", 
            self::FALSE_EXTENSION       => "File has an incorrect extension",
            self::NOT_FOUND             => "File is not readable or does not exist", 
            self::TOO_BIG               => "All files in sum should have a maximum size of '%max%' but '%size%' were detected",
            self::TOO_SMALL             => "All files in sum should have a minimum size of '%min%' but '%size%' were detected",
            self::NOT_READABLE          => "One or more files can not be read", 
    );

    protected $fileAdapter;

    protected $validators;

    protected $filters;

    public function __construct($options)
    {
        $this->fileAdapter = new Http();  
        parent::__construct($options);
    }

    public function isValid($fileInput)
    {   
        $options = $this->getOptions(); 
        $extensions = $this->extensions;
        $minSize    = $this->minSize; 
        $maxSize    = $this->maxSize; 
        $newFileName = $this->newFileName;
        $uploadPath = $this->uploadPath;
        $overwrite = $this->overwrite;
        if (array_key_exists('extensions', $options)) {
            $extensions = $options['extensions'];
        } 
        if (array_key_exists('minSize', $options)) {
            $minSize = $options['minSize'];
        }  
        if (array_key_exists('maxSize', $options)) {
            $maxSize = $options['maxSize'];
        } 
        if (array_key_exists('newFileName', $options)) {
            $newFileName = $options['newFileName'];
        } 
        if (array_key_exists('uploadPath', $options)) {
            $uploadPath = $options['uploadPath'];
        } 
        if (array_key_exists('overwrite', $options)) {
            $overwrite = $options['overwrite'];
        }    
        $fileName   = $fileInput['name']; 
        $fileSizeOptions = null;
        if ($minSize) {
            $fileSizeOptions['min'] = $minSize*1024 ;
        }
        if ($maxSize) {
            $fileSizeOptions['max'] = $maxSize*1024 ;
        }
        if ($fileSizeOptions) {
            $this->validators[] = new FilesSize($fileSizeOptions); 
        }
        $this->validators[] = new Extension(array('extension' => $extensions));
        if (! preg_match('/^[a-z0-9-_]+[a-z0-9-_\.]+$/i', $fileName)) {
            $this->error(self::FILE_NAME_ERROR);
            return false; 
        }

        $extension = pathinfo($fileName, PATHINFO_EXTENSION); 
        if (! in_array($extension, $extensions)) {
            $this->error(self::FILE_EXTENSION_ERROR);
            return false; 
        }
        if ($newFileName) {
            $destination = $newFileName.".$extension";
            if (! preg_match('/^[a-z0-9-_]+[a-z0-9-_\.]+$/i', $destination)) {
                $this->error(self::FILE_NAME_ERROR);
                return false;  
            }
        } else {
            $destination = $fileName;
        } 
        $renameOptions['target'] = $uploadPath.$destination;
        $renameOptions['overwrite'] = $overwrite;
        $this->filters[] = new Rename($renameOptions); 
        $this->fileAdapter->setFilters($this->filters);
        $this->fileAdapter->setValidators($this->validators); 
        if ($this->fileAdapter->isValid()) { 
            $this->fileAdapter->receive();
            return true;
        } else {   
            $messages = $this->fileAdapter->getMessages(); 
            if ($messages) {
                $this->setMessages($messages);
                foreach ($messages as $key => $value) { 
                    $this->error($key);
                }
            } else {
                $this->error(self::FILE_INVALID);
            }
            return false;
        }
    } 

} 
```

在表单中使用并添加 filterInput ：

```
 array(
        'name' => 'file',
        'required' => true,
        'validators' => array(
            array(
                'name' => '\Application\Validators\File\Image',
                'options' => array(
                        'minSize' => '64',
                        'maxSize' => '1024',
                        'newFileName' => 'newFileName2',
                        'uploadPath' => './data/'
                )
            )
        )
    ) 
```

在你的控制器中：

```
 $postData = array_merge_recursive((array)$request->getPost(), (array)$request->getFiles());
    $sampleForm->setData($postData);  
    if ($sampleForm->isValid()) { 
        //File will be upload, when isValid returns true;
    } else {
        var_dump($sampleForm->getMessages());
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T10:28:21.960

这是一个老问题，但万一其他人来到这里，我发现了这篇好文章：

[创建带有文件验证的简单上传表单](http://samsonasik.wordpress.com/2012/08/31/zend-framework-2-creating-upload-form-file-validation/)

这是在 ZF2 中处理文件的良好开端。;)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T08:54:42.293

根据我在 irc (#Zftalk.2) 中询问/看到的内容，文件组件尚未重构

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-20T20:27:36.940

要检索 $_FILES，请在控制器中执行以下操作：

```
$request= $this->getRequest();

    if($request->isPost()){
        $post= array_merge_recursive($request->getPost()->toArray(), $request->getFiles()->toArray());
        print_r($post);
    } 
```

这篇文章很旧，但我希望这对某人有所帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-30T21:21:04.880

文件上传工厂和验证预定到ZF2.1

同时我使用 $_FILES :(

检查以下链接：

*   [http://www.michaelgallego.fr/blog/?p=190](http://www.michaelgallego.fr/blog/?p=190)
*   [http://packages.zendframework.com/docs/latest/manual/en/modules/zend.form.quick.start.html](http://packages.zendframework.com/docs/latest/manual/en/modules/zend.form.quick.start.html)

# audio - 如何使用 ffmpeg 在 mp3 文件上添加封面图片？

> ID：11718811
> 
> 赞同：1
> 
> 时间：2012-07-30T09:37:00.047
> 
> 标签：audio, ffmpeg, mp3

我正在尝试将音频文件转换为 mp3，并且我想将封面图像添加到 mp3 文件中。我试过这个：

```
ffmpeg.exe -i "input audio file" -i image.png out.mp3 
```

转换完成后，没有封面图像转换为 mp3。我试过了，这是来自ffmpeg的官方文档。结果是没有封面图像的相同 mp3 文件。

```
ffmpeg -i input.mp3 -i cover.png -c copy -metadata:s:v title="Album cover"-metadata:s:v comment="Cover (Front)" out.mp3 
```

先感谢您！

# javascript - 在 Mac 上运行 nodejs 服务器时出错，“找不到合适的图像”

> ID：11718813
> 
> 赞同：17
> 
> 时间：2012-07-30T09:37:25.070
> 
> 标签：javascript, macos, node.js, webserver, nowjs-sockets

```
unknown406c8f2d5ecb:proves airrider3$ node tronServer.js
[Error: dlopen(/Users/airrider3/Documents/proves/node_modules/now/node_modules/node-proxy/build/Release/nodeproxy.node, 1): no suitable image found.  Did find:
    /Users/airrider3/Documents/proves/node_modules/now/node_modules/node-proxy/build/Release/nodeproxy.node: unknown file type, first eight bytes: 0x7F 0x45 0x4C 0x46 0x02 0x01 0x01 0x00]
Error: dlopen(/Users/airrider3/Documents/proves/node_modules/now/node_modules/node-proxy/build/Release/nodeproxy.node, 1): no suitable image found.  Did find:
    /Users/airrider3/Documents/proves/node_modules/now/node_modules/node-proxy/build/Release/nodeproxy.node: unknown file type, first eight bytes: 0x7F 0x45 0x4C 0x46 0x02 0x01 0x01 0x00
    at Object.Module._extensions..node (module.js:485:11)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/Users/airrider3/Documents/proves/node_modules/now/node_modules/node-proxy/lib/node-proxy.js:1:90)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12) 
```

它在 Linux 中完美运行。我刚刚安装了 nodejs、nowjs 等，运行了这个服务器脚本，但它一直抛出这个错误。

有任何想法吗？

服务器代码：（这是一种 tron 多人游戏）

```
var html = require('fs').readFileSync(__dirname + '/tronMultiplayer.html');
var server = require('http').createServer(function (req, res) {
   res.end(html);
});
server.listen(8004);

var nowjs = require('now');
var everyone = nowjs.initialize(server);

var bikes = {};
var killCount = {};
var player = 0;

var EMPTY = -1;
var WALL = -2;

var map = [];
var edge = 100;

var count = 0;
var deadbikes = 0;

var gameON = false;

function resetGame () {

    map = [];
    for (var i = 0; i < edge; i++){
        map.push([]);
        for (var j = 0; j < edge; j++){
            if (i == 0 || j == 0 || i == edge-1 || j == edge-1/* || Math.floor(Math.random()*30) == 0*/){
                map[i].push(WALL);
            } else {
                map[i].push(EMPTY);
            }
        }
    }   

    for (var i in bikes){
        spawnBike(i)
    }   
    everyone.now.reset(edge);
    everyone.now.updateScores(bikes);
}

nowjs.on('connect', function () {
   console.log('connect');
   bikes[this.user.clientId] = {nick: "Anonymous", w:0, i: Math.floor(Math.random()*edge-2)+1, j: Math.floor(Math.random()*edge-2)+1, di : 0, dj : 1, p: player, c: "rgba("+Math.floor(Math.random()*255)+ ", " + Math.floor(Math.random()*255)+","+Math.floor(Math.random()*255)+", 1)", alive : false};
   killCount[this.user.clientId] = 0;
   player++;
   console.log(this.user.clientId);
   console.log(bikes);
   if (!gameON){
    gameON = true;
    resetGame();
    step();
   }
});

everyone.now.changeBikeDirection = function (dir) {
    console.log(bikes[this.user.clientId].nick + " changes his direction to " + dir);
    var ndi = 0, ndj = 0;
    if (dir == "left"){
        ndj = -1;
    } else if (dir == "right"){
        ndj = 1;
    } else if (dir == "up"){
        ndi = -1;
    } else if (dir == "down"){
        ndi = 1;
    }
    var odi, odj;
    odi = bikes[this.user.clientId].di;
    odj = bikes[this.user.clientId].dj;

    if (odi != ndi && odj != ndj) {
        bikes[this.user.clientId].di = ndi; 
        bikes[this.user.clientId].dj = ndj;
    }
    killCount[this.user.clientId] = 0; 
};

everyone.now.updateNickname = function (theName) {
    bikes[this.user.clientId].nick = theName;
    everyone.now.updateScores(bikes);
};

function spawnBike (k) {
    bikes[k].i =  Math.floor(Math.random()*edge*(2/4) -2)+1 + edge/4;
    bikes[k].j = Math.floor(Math.random()*edge*(2/4)  -2)+1 + edge/4;
    bikes[k].di = 0;
    bikes[k].dj = 1;
    bikes[k].alive = true;
    player++;
}

nowjs.on('disconnect', function () {
   console.log(bikes[this.user.clientId].nick + ' has disconnected.');
   for (var i in bikes) {
      if (i === this.user.clientId) {
         killBike(i);
     delete bikes[i];
         break;
      }
   }
});

function killBike(k){
        var bike = bikes[k];
    bike.alive = false;
    for (var i = 0; i < edge; i++){
        for (var j = 0; j < edge; j++){
            if (map[i][j] == bike.player){
                map[i][j] = EMPTY;
            }
        }
    }
    //delete bikes[k];
}

function checkIfBikeIsDead(k){
        //console.log("CheckIfBikeIsDead with id "+k);
    var bike = bikes[k];
    if (bike.alive){
        //console.log("Checking current position");
        if (map[bike.i][bike.j] != EMPTY){
            //console.log("Ouch, Cell was "+map[bike.i][bike.j]);
            bike.i -= bike.di;
            bike.j -= bike.dj;
            killBike(k);

            for (var i in bikes){
                if (i != k){
                    if (bikes[i].alive){
                        bikes[i].w++;
                    }
                }
            }
            everyone.now.updateScores(bikes);           
            return true;
        } else {
            //console.log("Safe and sound");
            map[bike.i][bike.j] = bike.p;
            return false;
        }
    } else {
        return false;
    }

}

function traceMap() {
    console.log("---------------------------------------------------------------------");
    var s = "";
    for (var i = 0; i < edge; i++){
        s = "[";
        for (var j = 0; j < edge; j++){
            if (map[i][j] == undefined){
                console.log("We found an undefined at ("+i+","+j+")");
            } else {
                s += map[i][j].toString() + ", ";
            }
        }
        s += "]";
        console.log(s);
    }
}

function step () {

    count = 0;
    deadbikes = 0;

    for (var k in bikes){
        killCount[k]++;
        if (killCount[k] > 2000){
            killBike(k);
            delete bikes[k];
        } else {
            count++;
            if (bikes[k].alive){
                bikes[k].i += bikes[k].di;
                bikes[k].j += bikes[k].dj;
                if (checkIfBikeIsDead(k)){
                    deadbikes++;
                }
            } else {
                deadbikes++;
            }
        }
    }

    if (count > 0){
        if (count == deadbikes){
        resetGame();
        }
        setTimeout(step, 50);
        everyone.now.receiveNewPositions(bikes);
    //  traceMap();
    } else {
        gameON = false;
    }

} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-30T09:51:29.277

没关系。掌心。我拥有的 node_modules 文件夹与我在 Linux 中使用/安装的文件夹相同，因此我相信某些部分是专门为 Linux 编译的，或者其他什么。

通过删除 node_modules 文件夹并重新安装来解决。

我希望它对任何有同样疑问的人有所帮助！

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-03-23T10:18:22.417

跟随 David Da Silva Contín 的回答很棒！

```
$ sudo rm -rf node_modules/
$ npm install 
```

# objective-c - 公式的代码实现以获取 GPS 位置之间的中点坐标无法正常工作

> ID：11718816
> 
> 赞同：1
> 
> 时间：2012-07-30T09:37:38.080
> 
> 标签：objective-c, gps, mapkit

美好的一天，我是 Objective C Dev 的新手，我正在询问位于[http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)的中点公式的实现。

公式：

Bx = cos(lat2).cos(Δlong)

By = cos(lat2).sin(Δlong)

latm = atan2(sin(lat1) + sin(lat2), √((cos(lat1)+Bx)² + By²))

lonm = lon1 + atan2(By, cos(lat1)+Bx)

我在 Objective C 中这个公式的实现是。

```
 - (CLLocationCoordinate2D) getMidPointCoords
 {
    double dLon = (self.toCoordinate.longitude - self.fromCoordinate.longitude) * (M_PI/180);
    double Bx = cos(self.toCoordinate.latitude)*cos(dLon);
    double By = cos(self.toCoordinate.latitude)*sin(dLon);
    double latM = atan2(sin(self.fromCoordinate.latitude)+sin(self.toCoordinate.latitude), sqrt( (cos(self.fromCoordinate.latitude)+Bx)*(cos(self.fromCoordinate.latitude)+Bx) + By*By) );
    double lonM = self.fromCoordinate.longitude + atan2(By, cos(self.fromCoordinate.latitude) + Bx);

    CLLocationCoordinate2D midPoint;
    midPoint.latitude = latM;
    midPoint.longitude = lonM;
 } 
```

当我调试这段代码时，它显然返回了不正确的坐标。所以基本上我的问题是“这是因为我使用双打吗？” 还是我对这个公式的实现只是有缺陷？

提前感谢您提供的任何帮助或见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:49:28.597

您使用的三角函数 ( `sin`, `cos`, `atan2`) 要求其参数以弧度为单位，而不是度数。

例如，在这一行中：

```
double Bx = cos(self.toCoordinate.latitude)*cos(dLon); 
```

这`cos(self.toCoordinate.latitude)`是错误的，因为`self.toCoordinate.latitude`以度为单位，但`cos`需要弧度。

在您调用三角函数的任何地方，首先将参数从度数转换为弧度（将度数乘以`(M_PI/180.0)`）。

此外，在这一行中：

```
double lonM = self.fromCoordinate.longitude + atan2(... 
```

the`self.fromCoordinate.longitude`也需要转换为弧度，因为表达式的其余部分也是弧度。

最后，在最后，`latM`将`lonM`有中点，但以弧度（不是度数）为单位。

因此，当设置`midPoint.latitude`and时`midPoint.longitude`，您必须将`latM`and`lonM`从弧度转换回度数，方法是将它们乘以`(180.0/M_PI)`。

# java - 手动调用组件监听器

> ID：11718817
> 
> 赞同：3
> 
> 时间：2012-07-30T09:37:42.633
> 
> 标签：java, swing

我向 JCheckBox 组件添加了一个监听器，我想手动调用监听器。怎么做？

```
myCheckBox.selected(false) 
```

然后我想调用 myCheckBox 监听器。你有更好的主意吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-08-18T14:27:35.620

我知道我有点晚了，但这应该可以解决问题：

```
ItemListener listener = new ItemListener() {
    public void itemStateChanged(ItemEvent e) {
         //whatever your itemStateChanged() looks like.
    }
};
JCheckBox checkBox = new JCheckBox();
checkBox.addItemListener(listener); 
```

然后，每当您需要手动调用它时：

```
listener.itemStateChanged(
                new ItemEvent(checkBox, ItemEvent.ITEM_STATE_CHANGED, checkBox, 0)); 
```

如果您匿名创建了侦听器，您仍然可以像这样访问它：

```
checkBox.getItemListeners()[0].itemStateChanged(
                new ItemEvent(checkBox, ItemEvent.ITEM_STATE_CHANGED, checkBox, 0)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:45:19.723

我真的不知道您使用什么复选框组件。您没有告诉我们您使用哪个框架或提供其他有用的上下文信息。

但总的来说：你的听众是 impl。一个界面。这个接口定义了你的组件（checkBox）调用的回调方法。

如果您有一个监听器 obj 的实例。你可以直接调用这个方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-18T14:46:53.603

与其尝试调用监听器，为什么不直接使用单独的方法呢？

```
ItemListener listener = new ItemListener() {
   public void itemStateChanged(ItemEvent e) {
      method();
   }
};
public void method() {
   //code you want to run
} 
```

然后，`method()`当您想运行与侦听器分开的代码时，只需调用即可。

# iphone - UIWebview手势iOS

> ID：11718821
> 
> 赞同：0
> 
> 时间：2012-07-30T09:37:49.800
> 
> 标签：iphone, objective-c, ios, ipad, uiwebview

如何在 UIWebview 中识别用户`touch`和`tap`& 。`double tap`是否有任何可用的代表，例如触摸开始等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T09:46:14.493

这是在 webview 上实现单击和双击的代码

```
UITapGestureRecognizer *singleTap = [[[UITapGestureRecognizer alloc] initWithTarget: self action:@selector(doSingleTap)] autorelease];
singleTap.numberOfTapsRequired = 1; 
[self.myWebView addGestureRecognizer:singleTap];

UITapGestureRecognizer *doubleTap = [[[UITapGestureRecognizer alloc] initWithTarget: self action:@selector(doDoubleTap)] autorelease];
doubleTap.numberOfTapsRequired = 2; 
[self.myWebView addGestureRecognizer:doubleTap]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:03:15.377

以下3个链接将解决您的问题

[如何将手势识别器添加到 uiwebview 子类](https://stackoverflow.com/questions/3302000/how-to-add-a-gesture-recognizer-to-a-uiwebview-subclass/3631475#3631475)

[iphone-custom-gestures-on-your-uiwebview](http://fr.ivolo.us/posts/iphone-custom-gestures-on-your-uiwebview)

[uigesturerecognizer-work-on-a-uiwebview](https://stackoverflow.com/questions/2909807/does-uigesturerecognizer-work-on-a-uiwebview)

关于点击次数，可以通过属性**numberOfTapsRequired设置**

例如：

```
UITapGestureRecognizer *myGusture = [[[UITapGestureRecognizer alloc] initWithTarget: self action:@selector(doTap)] autorelease];
myGusture.numberOfTapsRequired = 1; //you can change it to any number as per your requirement.
[self.myWebView addGestureRecognizer:myGusture];
[myGusture release];
myGusture = nil; 
```

# android - Google Play 针对 Google 帐户安装的应用程序列表

> ID：11718822
> 
> 赞同：11
> 
> 时间：2012-07-30T09:37:49.783
> 
> 标签：android, google-play

以下是我的问题： -

1.  是否可以通过使用任何 api 以编程方式通过 Google Play 针对他们的谷歌帐户获取用户已安装的应用程序列表？请注意，我不是在询问设备中当前安装的应用程序列表，而是在某些时候已安装的应用程序列表。

我需要解决上述问题，因为我正在考虑我的应用程序中的一个场景，即：

*   我想在前三个月免费向用户提供我的应用程序，三个月后如果用户卸载该应用程序然后再次安装它我想通过任何 api（来自 Google Play）检测用户已安装该应用程序第二次（并且不应获得任何免费使用）。`Please note that I don't want to use any web service to store the account id & device id of the user at my side.`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T10:13:20.457

对于选项 2，您可以在 SD 卡上创建一个文件。当用户卸载/安装时，这将保留在那里。但是用户可以随时删除您的特殊文件。除非您在身边做点什么，否则您永远无法确定用户之前是否已经使用过您的应用。

* * *

为了完全确定，将其存储在网上：您将需要一个非常简单的数据库，其中包含安装您的应用程序的 device_id 列表。还有一个填充这个数据库的网页。在您的应用程序中，您下载/打开此网页，该网页将填充数据库。

[打开http://www.example.com/registerDevice.php?device_id=](http://www.example.com/registerDevice.php?device_id=)的App > WebClient （或其他）。php 站点填充数据库。

如果当前设备已经安装了此应用程序才能工作/不工作，您的应用程序将需要检查数据库。您可以通过相同的 php 执行此操作并检查响应。例如，您可以返回“ok”或“not ok”或其他内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T17:05:27.310

最简单的方法是在用户第一次运行应用程序时获取用户的帐户，并将该详细信息发送给您。如何做到这一点在此处有详细记录：[如何获取 Android 设备的主电子邮件地址](https://stackoverflow.com/questions/2112965/how-to-get-the-android-devices-primary-e-mail-address)

您将不得不添加另一行代码以在应用程序第一次启动时检查回数据库。

编辑：对于非网络解决方案，只需在应用程序的开头添加一个计时器：

```
schedule(TimerTask task, Date when) 
```

任务应该是在您希望给出的时间段之后添加一个令牌，使用用户的帐户详细信息到手机的内存进行身份验证（请参阅获取帐户详细信息的第一个解决方案）

最后，如上所述，为该特定文件添加到手机内存的检查，以查看用户以前是否使用过该应用程序。

基于手机内存的任何类型身份验证的*问题在于，人们可以轻松删除令牌，如果他们能找到它，然后再次重用应用程序。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:30:58.617

试试这个设备特定的实现：

```
PackageManager packageManager = getContext().getPackageManager();
List<ApplicationInfo> applications = packageManager.getInstalledApplications(
        PackageManger.GET_UNINSTALLED_PACKAGES);
// retrieves some information about all applications (even uninstalled ones)
// which have data directories 
```

当然，如果用户更换设备，这种方法将不起作用。但是您不需要使用任何网络服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-07T15:05:04.850

您可以通过在第 3 方服务器上保存散列设备 ID 和用户谷歌 ID 的数据库来使用它。另请参阅[http://android-developers.blogspot.de/2011/03/identifying-app-installations.html](http://android-developers.blogspot.de/2011/03/identifying-app-installations.html)

# silverlight - Silverlight 列表框拖放

> ID：11718824
> 
> 赞同：1
> 
> 时间：2012-07-30T09:38:05.120
> 
> 标签：silverlight, drag-and-drop, telerik

我正在尝试在两个 Telerik 列表框之间实现拖放功能。我已经使用以下代码完成了

列表框 1：

```
<telerik:RadListBox x:Name="name1" SelectionMode="Multiple" >
    <telerik:RadListBox.DragVisualProvider> 
        <telerik:ScreenshotDragVisualProvider />
    </telerik:RadListBox.DragVisualProvider>
    <telerik:RadListBox.DragDropBehavior>
        <telerik:ListBoxDragDropBehavior />
    </telerik:RadListBox.DragDropBehavior>
</telerik:RadListBox> 
```

列表框 2：

```
<telerik:RadListBox x:Name="name2" AllowDrop="True">
   <telerik:RadListBox.DragDropBehavior>
       <telerik:ListBoxDragDropBehavior />
   </telerik:RadListBox.DragDropBehavior>
</telerik:RadListBox> 
```

添加了这种风格：

```
<Style TargetType="telerik:RadListBoxItem" >
    <Setter Property="telerik:DragDropManager.AllowCapturedDrag" Value="True" />
</Style> 
```

它工作得很好，但我不希望元素在被拖到另一个列表框时从源列表框中删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T16:26:06.263

来自关于树视图的 Telerik 帮助（其他人也一样）：

> 如果您希望在完成拖放操作后从树视图中删除项目，则不要为树视图处理 PreviewDragEnded。

所以，你只需要：

```
<telerik:RadTreeView x:Name="radTreeView" Margin="8,8,20,8"
    PreviewDragEnded="radTreeView_PreviewDragEnded"
    ItemsSource="{Binding Source={StaticResource DataSource}, Path=LeaguesDataSource}"
    ItemTemplate="{StaticResource League}"
    IsDragDropEnabled="True"
    IsDragTooltipEnabled="False"/> 
```

代码隐藏：

```
private void radTreeView_PreviewDragEnded( object sender, RadTreeViewDragEndedEventArgs e )
{
   e.Handled = true;
} 
```

# javascript - 从 dhtmlxgrid 打开一个新窗口，避免弹出阻止程序

> ID：11718826
> 
> 赞同：1
> 
> 时间：2012-07-30T09:38:06.557
> 
> 标签：javascript, dhtmlx, adblock

阅读此[避免浏览器弹出](https://stackoverflow.com/q/2587677/172277)窗口阻止程序证实了我的感觉，即添加阻止程序确实只是允许由用户生成的事件打开的弹出窗口。

我正在使用 dhtmlxgrid 并通过“onRowSelect”事件从用户单击一个单元格时收到通知，但调用会引发 Firefox 和 Chrome 广告拦截器的问题：

```
window.open(url, "_blank"); 
```

任何想法或神奇的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-26T14:36:54.950

您使用的是 Dhtmlx Window 组件吗？因为那个调用 window.open() 是纯 JS 调用。

您可以尝试创建一个 DhtmlxWindow 对象，它是一个 DIV，它不应该被阻止，我以前使用过这个，从来没有遇到过问题。

这是使用 dhtmlx Window 的简单 INIT 指南。

[http://dhtmlx.com/docs/products/dhtmlxWindows/samples/01_init/01_minimal_init.html](http://dhtmlx.com/docs/products/dhtmlxWindows/samples/01_init/01_minimal_init.html)

# java - C 语言中用于 Java 的 BCI 库

> ID：11718830
> 
> 赞同：5
> 
> 时间：2012-07-30T09:38:32.123
> 
> 标签：java, c, instrumentation, jvmti, bcel

我正在寻找用于 C 或 C++ 中的 Java 的 BCI（字节码检测）库，以在[JVMTI 代理](http://docs.oracle.com/javase/6/docs/platform/jvmti/jvmti.html)中使用。

最好的情况是纯 C语言中的[ASM](http://asm.ow2.org/)或[BCEL 。](http://commons.apache.org/bcel/)

到目前为止，我发现的最接近的东西只是[`java_crw_demo`](https://blogs.oracle.com/kto/entry/a_short_java_crw_demo)Kelly O'Hair 几年前编写的一个演示，此后一直用于 Sun 的/Oracle 的教程中。

你知道别的吗？

> 一些基本原理：我正在构建一个检测工具来添加一个 getter 方法`java.lang.Object`并在`Object`. 由于这个原因，我不能使用 Java 代理。此外，出于复杂性和速度的原因，我想避免生成辅助 JVM 来执行检测。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:27:34.897

我很久以前就开始用 C 写一个，但由于缺乏动力，我没有走得很远。[AFAIK 在 C 中没有公开版本，但是根据JVM Specification](http://docs.oracle.com/javase/specs/jvms/se7/html/index.html)编写一个简单的版本来满足您的需求应该不会太难。您应该对[有关`class`文件格式](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html)的章节以及有关[指令集](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html)的章节特别感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T02:24:35.523

我找到的唯一合理的解决方案是将字节码实际通过管道传输到使用 ASM（或您选择的 BCI 框架）的单独 Java 程序。这并不快，但您只需要在每个仪器类中执行一次。

# installation - 在 inno 设置安装程序中显示多行内容的控件

> ID：11718831
> 
> 赞同：13
> 
> 时间：2012-07-30T09:38:33.003
> 
> 标签：installation, inno-setup

我想在安装程序的安装步骤中显示如下图所示的内容...我已使用备忘录来显示内容..但备忘录不是合适的控件..因为如果用户将注意力集中在备忘录上，它看起来像一个文本框字段...见下图..当用户进入这一步时，第一个备忘录字段被选中...![安装类型](../Images/e195cd892b4dc27c3cb93e4c85a0a5a5.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-30T10:24:25.383

使用其中一个[`TLabel`](http://www.jrsoftware.org/ishelp/index.php?topic=scriptclasses&anchor=TLabel)或[`TNewStaticText`](http://www.jrsoftware.org/ishelp/index.php?topic=scriptclasses&anchor=TNewStaticText)组件（在[`TNewStaticText`](http://www.jrsoftware.org/ishelp/index.php?topic=scriptclasses&anchor=TNewStaticText)InnoSetup 中似乎是首选）并将其设置如下：

*   `WordWrap`财产_`True`
*   `AutoSize`财产_`False`

然后只需将组件拉伸到您想要的位置，文本将适合该边界，就像本例中所示：

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program

[Code]    
const
  LoremIpsum =
    'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin mauris ' +
    'lorem, ullamcorper sit amet tincidunt ac, varius at ante. Aenean pretium, ' +
    'tortor non congue pharetra, ante urna consectetur mi, vitae congue arcu est ' +
    'eleifend nisl.';

procedure InitializeWizard;
var
  CustomPage: TWizardPage;
  StandardDescLabel: TLabel;
  StandardRadioButton: TNewRadioButton;
  AdvancedDescLabel: TLabel;
  AdvancedRadioButton: TNewRadioButton;
begin
  CustomPage := CreateCustomPage(wpWelcome, 'Installation type', '');
  StandardRadioButton := TNewRadioButton.Create(WizardForm);
  StandardRadioButton.Parent := CustomPage.Surface;
  StandardRadioButton.Checked := True;
  StandardRadioButton.Top := 16;
  StandardRadioButton.Width := CustomPage.SurfaceWidth;
  StandardRadioButton.Font.Style := [fsBold];
  StandardRadioButton.Font.Size := 9;
  StandardRadioButton.Caption := 'Standard Installation'
  StandardDescLabel := TLabel.Create(WizardForm);
  StandardDescLabel.Parent := CustomPage.Surface;
  StandardDescLabel.Left := 8;
  StandardDescLabel.Top := StandardRadioButton.Top + StandardRadioButton.Height + 8;
  StandardDescLabel.Width := CustomPage.SurfaceWidth; 
  StandardDescLabel.Height := 40;
  StandardDescLabel.AutoSize := False;
  StandardDescLabel.Wordwrap := True;
  StandardDescLabel.Caption := LoremIpsum;
  AdvancedRadioButton := TNewRadioButton.Create(WizardForm);
  AdvancedRadioButton.Parent := CustomPage.Surface;
  AdvancedRadioButton.Top := StandardDescLabel.Top + StandardDescLabel.Height + 16;
  AdvancedRadioButton.Width := CustomPage.SurfaceWidth;
  AdvancedRadioButton.Font.Style := [fsBold];
  AdvancedRadioButton.Font.Size := 9;
  AdvancedRadioButton.Caption := 'Advanced Installation'
  AdvancedDescLabel := TLabel.Create(WizardForm);
  AdvancedDescLabel.Parent := CustomPage.Surface;
  AdvancedDescLabel.Left := 8;
  AdvancedDescLabel.Top := AdvancedRadioButton.Top + AdvancedRadioButton.Height + 8;
  AdvancedDescLabel.Width := CustomPage.SurfaceWidth;
  AdvancedDescLabel.Height := 40;
  AdvancedDescLabel.AutoSize := False;
  AdvancedDescLabel.Wordwrap := True;
  AdvancedDescLabel.Caption := LoremIpsum;
end; 
```

结果：

![在此处输入图像描述](../Images/c2ada3d8edba52df810fbaa80b1a168e.png)

# java - 使自定义按钮的中心文本

> ID：11718832
> 
> 赞同：0
> 
> 时间：2012-07-30T09:38:35.587
> 
> 标签：java, blackberry

我正在开发一个应用程序，其中 9i 已经参加`CustomeButtonField`了制作自定义按钮的课程。其中我得到了自定义按钮，但文本按钮未对齐中心。您能否让我知道在 CustomeButtonFiel 中如何将按钮文本设置为中心。

**这是代码**

```
import net.rim.device.api.system.Bitmap;
import net.rim.device.api.ui.*;

public class CustomButtonField extends Field
{
    Bitmap Unfocus_img, Focus_img, current_pic;
    int width;
    String text;
    Font font;   
    int custColor;
    CustomButtonField(int width, String text, Bitmap onFocus, Bitmap onUnfocus, long style,int custColor)
    {
        super(style);
        Unfocus_img = onUnfocus;
        Focus_img = onFocus;
        current_pic = onFocus;
        this.text = text;
        this.width = width;
        this.custColor = custColor;
    }
    protected void layout(int width, int height) 
    {
        setExtent(current_pic.getWidth(), current_pic.getHeight());        
    }
    protected void paint(Graphics graphics) 
    {
        try
        {
                FontFamily fntFamily = FontFamily.forName("BBAlpha Sans");
                font = fntFamily.getFont(Font.BOLD,20);              
        }
        catch(Exception e)
        {
            font = Font.getDefault();

        }
        graphics.setFont(font);

        graphics.setColor(custColor); 

        graphics.drawBitmap(0, 0, current_pic.getWidth(), current_pic.getHeight(), current_pic , 0 , 0);
        graphics.drawText(text, width, 7);
        graphics.setDrawingStyle(Graphics.HCENTER, true);
    }
    protected void onFocus(int direction) 
    {
        super.onFocus(direction);
        current_pic = Unfocus_img;
        this.invalidate();
    }
  protected void drawFocus(Graphics graphics, boolean on) 
  {

    }
    protected void onUnfocus() 
    {
        super.onUnfocus();
        current_pic = Focus_img;
        invalidate();
    }
    public boolean isFocusable() {
        return true;
    }
    protected boolean navigationClick(int status, int time) {
        fieldChangeNotify(0);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:00:59.197

将方法的最后 3 行替换为`paint`以下行：

```
int xText = (getWidth() - font.getAdvance(text)) / 2;
int yText = (getHeight() - font.getHeight()) / 2;

graphics.drawBitmap(0, 0, current_pic.getWidth(), current_pic.getHeight(), current_pic , 0 , 0);
graphics.drawText(text, xText, yText); 
```

# sharepoint - 仅显示当前用户的警报

> ID：11718834
> 
> 赞同：0
> 
> 时间：2012-07-30T09:38:38.987
> 
> 标签：sharepoint, sharepoint-2007

在sharepoint 2007用户提醒页面，我们可以禁用用户选择的下拉框吗？我们只想显示当前登录用户的警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:17:29.763

禁用警报并不是唯一的解决方案。您将必须使用以下内容创建自定义解决方案

1.  每当有人登录或注销时更新临时列表或文件的自定义解决方案

2.  另一个应用程序页面从上面的列表中读取并显示他们的警报。

# android - 在没有 NDK 的情况下开发原生 C 应用程序 android？

> ID：11718839
> 
> 赞同：6
> 
> 时间：2012-07-30T09:38:46.177
> 
> 标签：android, android-ndk

好的，这是一个奇怪的：

有没有一种方法可以在不使用 Android NDK 的情况下为 Android 开发原生 C 应用程序或库？

NDK 发布之前发生了什么？（它出现的时间不长，我想它只是在一两年前发布的）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T09:42:40.937

显然，你可以——我的一个朋友是真正的 Android 大师，他设法完全手工构建了一个基于 GCC 的本机工具链。他还修复了 Android 的 libc 中一些缺失的部分。主要思想如下：GCC 内置了对 arm-elf-linux 目标的支持，因此使用适当的构建脚本，您可以将其配置为为 Android 构建。但是，您必须 root 手机才能运行生成的二进制文件。一件更酷的事情是，因为 GCC 是一个自托管编译器，使用 arm-linux-elf 工具链，您可以再次重新编译 GCC 并**在手机本身上**拥有该工具链。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T10:03:01.550

在 NDK 发布之前，唯一官方支持的开发 Android 应用程序的方法是使用 Android SDK 并用 Java 编写应用程序。

正如其他人所提到的，可以将一些应用程序交叉编译为完全独立的并在有根手机上运行它们。这样做的缺点应该很明显：很少有人能够运行您的应用程序（他们还需要是 root，而且您将无法在 Play 商店中启动您的应用程序）；你甚至可能在不同的设备上遇到兼容性问题，例如，如果你依赖于各种库的动态链接（你可能需要这样做以降低二进制文件的大小）。

TL；DR：这是可能的，但非常有限，不推荐。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T11:30:14.973

您可以使用与 Android 兼容的工具链（例如[CodeSourcery](http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/)）编译您的 C 代码，并从其命令行（例如通过[SSHDroid 之](https://play.google.com/store/apps/details?id=berserker.android.apps.sshdroid)类的 SSH 连接）在非 root 手机上运行它。

# javascript - Node js redis socket.io pubsub 实时更新

> ID：11718844
> 
> 赞同：3
> 
> 时间：2012-07-30T09:38:55.897
> 
> 标签：javascript, node.js, socket.io, real-time, publish-subscribe

嗨，我正在为我的学校项目构建一个“Twitter 克隆”。

我想为实时更新实现发布订阅模式。

*   用户可以“关注”其他用户
*   当用户在线并且“关注者”发布新消息时，用户应该会收到实时通知。

我使用 Node.js、Socket.io、Redis 和 MySql 作为数据库提供程序。我应该使用消息队列吗？人们在使用消息队列吗？

感谢您的帮助和回答

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T06:22:05.757

**更新**

当你很小的时候，问题就不存在了。但是当你变大时，扇出（将消息转发给所有关注者将会很昂贵，并且你想使用 MQ 离线执行此操作。就像 twitter 一样，你将所有活动的推文存储在内存中。当发布推文时，你放置（[设置](http://redis.io/commands/set)） tweet in memory @key(unique). 你可以使用 Twitter 的[雪花](https://github.com/twitter/snowflake)之类的东西。

接下来是扇出过程。对于每个用户，您需要[将该](http://redis.io/commands/lpushx)唯一键（推文 ID）放在他们的列表中，以便他们可以从内存中检索推文。当您的网站很小时，我想您可以在没有消息队列的情况下执行此操作，但是当您需要分发来自用户的消息时，例如拥有[274,776](http://twitter.com/Scobleizer)个关注者的 scoble 并且发了很多推文，这可能会变得非常昂贵。

许多用户处于离线状态，因此这些推文不需要立即发送给用户。你这样设计你的系统是因为你需要把所有的东西都保存在内存中。我认为这是有效地做到这一点的唯一方法。

* * *

您应该像 twitter 一样使用 MQ。他们甚至开源了自己的 MQ：[Kestrel](https://github.com/robey/kestrel/)。[High Scalability](http://highscalability.com/)博客有一篇非常有趣的文章：Scaling [Twitter: Making Twitter 10000 Percent Faster](http://highscalability.com/scaling-twitter-making-twitter-10000-percent-faster/)。我建议您至少研究一下High Scalability 博客上的[热门文章](http://highscalability.com/all-time-favorites/)，以了解大玩家如何扩展他们的网站。其他一些解释[Twitter 如何扩展的](http://highscalability.com/display/Search?moduleId=4876569&searchQuery=twitter)链接：

*   [http://highscalability.com/blog/2009/10/13/why-are-facebook-digg-and-twitter-so-hard-to-scale.html](http://highscalability.com/blog/2009/10/13/why-are-facebook-digg-and-twitter-so-hard-to-scale.html)
*   [http://highscalability.com/blog/2011/12/19/how-twitter-stores-250-million-tweets-a-day-using-mysql.html](http://highscalability.com/blog/2011/12/19/how-twitter-stores-250-million-tweets-a-day-using-mysql.html)
*   [http://highscalability.com/blog/2009/4/20/some-things-about-memcached-from-a-twitter-software-develope.html](http://highscalability.com/blog/2009/4/20/some-things-about-memcached-from-a-twitter-software-develope.html)

我还假设您已阅读：

*   [http://redis.io/topics/twitter-clone](http://redis.io/topics/twitter-clone)

我还想看看 Twitter 开源的所有项目：

*   [https://github.com/twitter](https://github.com/twitter)

我会看看流行的 MQ，例如：

*   [雷迪斯](http://redis.io)
*   [豆茎](http://kr.github.com/beanstalkd/)
*   [齿轮人](http://gearman.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:50:13.533

我最近研究了一个类似的用例，我使用了 nodejs、socketio 和 redis pubsub。

该代码可在[https://github.com/roshansingh/realtime-notifications](https://github.com/roshansingh/realtime-notifications)获得。

现在回到你的问题：

*   用户可以“关注”其他用户
*   当用户在线并且“关注者”发布新消息时，用户应该会收到实时通知。

您可以通过使用 socketio 创建房间和在 redis pubsub 中创建具有相同名称的通道来实现这两者。

流程可以是这样的：您可以让用户在登录后立即加入 socketio 房间（比如 John、Dan 等），您将在数据库中保存他们所有订阅的房间。同时，您将使用这些频道名称（如 John）订阅 redis pubsub。收到这些更新后，可以将这些更新广播到房间，从而广播给所有在线用户。

您必须将 John 在同一频道名称 (John) 上的活动发布到 redis。

请阅读上面粘贴的链接上的代码。如果您需要任何帮助，请告诉我。

# java - JPA 命名查询参数

> ID：11718846
> 
> 赞同：0
> 
> 时间：2012-07-30T09:39:21.623
> 
> 标签：java, hibernate, jpa, jpql

是否有任何约定如何命名参数`JPQL`？因为今天经过一些调试后，我意识到我不能将名称放入例如冒号。

我还发现了第二个问题，由于某种原因，我不能使用使用常量作为参数名称。我总会得到一个

```
org.hibernate.hql.ast.HqlSqlWalker.lookupProperty(HqlSqlWalker.java:466) 
```

这是我的代码

```
@NamedQueries({
    @NamedQuery(
        name=Lookup.GET_LOOKUP_DATA_QUERY, 
        query="SELECT t.textShort, lookup.metaCode, lookup.tableName FROM Lookup lookup, Txt t" +
                " WHERE (lookup.metaCode = t.txtHeadCode OR t.txtHeadCode IS NULL) AND lookup.module.id =:" + Lookup.PARAM_MODULE_ID +
                " AND lookup.metaCode IN (:" + Lookup.PARAM_LOOKUP_META_CODES + ") AND t.lang.metaCode = 'lang_cz'")
})

@Entity
@Table(name = "TABLE")
public class Lookup {

private static final long serialVersionUID = 1L;

public static final String GET_LOOKUP_DATA_QUERY = "Lookup.GetLookupDataQuery";
public static final String PARAM_MODULE_ID = "Lookup.PARAM_MODULE_ID";
public static final String PARAM_LOOKUP_META_CODES = "Lookup.PARAM_LOOKUP_META_CODES";

@Id
@Column(name ="META_CODE")
private String metaCode;

@Column(name = "ID")
private Long id;

@ManyToOne
@JoinColumn(name="MODULE_ID")
private Module module;
} 
```

+ getter、setter 和其他属性

提供者是`Hibernate`，但查询是纯编写的`JPA`

那么有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T09:51:55.747

您不能使用不属于 Character.isJavaIdentifierPart 定义的有效标识符的[字符](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#isJavaIdentifierPart%28char%29)。命名参数在 JPA 2.0 规范中定义：

> Java Persistence 查询语言查询的命名参数是一个以“:”符号为前缀的标识符。传递给 Query 和 TypedQuery 接口的 setParameter 方法的参数名称不包括此“:”前缀。
> ...
> 标识符是无限长度的字符序列。字符序列必须以 Java 标识符开始字符开头，所有其他字符必须是 Java 标识符部分字符。标识符起始字符是 Character.isJavaIdentifierStart 方法为其返回 true 的任何字符。这包括下划线 (_) 字符和美元符号 ($) 字符。标识符部分字符是 Character.isJavaIdentifierPart 方法返回 true 的任何字符。问号 (?) 字符保留供 Java Persistence 查询语言使用。

在构建 @NamedQuery 的查询字符串时使用常量不会导致问题。它是编译时构造，Hibernate 不知道此查询是否使用常量构建。

在您当前的查询中，所有命名参数均无效。那是因为'.'。根据 Character.isJavaIdentifierPart 它不是有效字符之一。

# java - 如何自动设置 surfview 以显示大小？

> ID：11718850
> 
> 赞同：2
> 
> 时间：2012-07-30T09:39:28.547
> 
> 标签：java, android

我有这个 surfview

```
<SurfaceViewandroid:id="@+id/videoview"android:layout_width="720px"android:layout_height="480px"/> 
```

我如何管理自动设置大小以显示大小？因为每部安卓手机都有不同的显示尺寸？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:47:15.353

你必须在 onSurfaceCreated() 中捕捉它并尝试在那里调整它的大小......

```
 private class surfaceCallback implements SurfaceHolder.Callback
{
    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height)
    {
        if (holder == videoHolder)
        {
            Log.e(TAG, "video surfaceChanged: f: " + format + ", w: " + width + ", h: " + height);

            //resize it here maybe?
        } else
        {
            Log.e(TAG, "Unknown surface: f: " + format + ", w: " + width + ", h: " + height);
            assert (false);
        }
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder)
    {
        Log.e(TAG, "surfaceCreated");
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder)
    {
        Log.e(TAG, "surfaceDestroyed");
    }
} 
```

获得显示尺寸的一种可能方法...

```
 //measured android resolution
    WindowManager win = (WindowManager) getApplicationContext().getSystemService(WINDOW_SERVICE);
    Display d = win.getDefaultDisplay();
    Point measuredResolution = new Point();
    d.getSize(measuredResolution); //measuredResolution now holds actual size. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:49:58.797

你在 xml 中定义这个？`android:layout_width="fill_parent"`然后在父容器中使用和相同:)

否则，如果以编程方式执行此操作，请参阅@Shark 的答案

# python - 对python dict中的值求和，除了一个

> ID：11718852
> 
> 赞同：3
> 
> 时间：2012-07-30T09:39:30.513
> 
> 标签：python, dictionary, numpy, sum

有没有办法对python dict中的所有值求和，除了一个通过使用选择器

```
>>> x = dict(a=1, b=2, c=3)
>>> np.sum(x.values())
6 
```

? 我目前的解决方案是基于循环的：

```
>>> x = dict(a=1, b=2, c=3)
>>> y = 0
>>> for i in x:
...     if 'a' != i:
...             y += x[i]
... 
>>> y
5 
```

编辑：

```
import numpy as np
from scipy.sparse import *
x = dict(a=csr_matrix(np.array([1,0,0,0,0,0,0,0,0]).reshape(3,3)),      b=csr_matrix(np.array([0,0,0,0,0,0,0,0,1]).reshape(3,3)), c=csr_matrix(np.array([0,0,0,0,0,0,0,0,1]).reshape(3,3)))
y = csr_matrix((3,3))
for i in x: 
    if 'a' != i:
        y = y + x[i]
print y 
```

返回`(2, 2) 2.0`

和

```
print np.sum(value for key, value in x.iteritems() if key != 'a') 
```

提高

```
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-    packages/numpy/core/fromnumeric.py", line 1446, in sum
    res = _sum_(a)
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/sparse/compressed.py", line 187, in __radd__
    return self.__add__(other)
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/sparse/compressed.py", line 173, in __add__
    raise NotImplementedError('adding a scalar to a CSC or CSR '
NotImplementedError: adding a scalar to a CSC or CSR matrix is not supported 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T09:41:03.867

您可以遍历 dict 为该`sum`方法创建一个生成器：

```
np.sum(value for key, value in x.iteritems() if key != 'a') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T09:56:53.157

尝试：

```
np.sum(x.values()) - x['a'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T10:20:03.910

您需要为该`sum`方法提供一个累加器或初始值：

```
sum((value for key, value in x.iteritems() if key != 'a'), csr_matrix((3, 3))) 
```

请注意，这是使用内置`sum`方法。它的效果几乎与基于循环的解决方案相同。

using`np.sum`将不起作用，因为`np.sum`不会传递`out`参数，并且无论如何都是为密集矩阵设计的。

```
np.sum((value for key, value in x.iteritems() if key != 'a'),
       out=csr_matrix((3, 3)))    # doesn't work 
```

# c# - 检查 SQL 查询中的多个子字符串

> ID：11718853
> 
> 赞同：1
> 
> 时间：2012-07-30T09:39:32.217
> 
> 标签：c#, sql, sql-server, select

我有一列包含许多行。我正在将值列表传递给方法。我希望返回此列的子字符串包含我要查找的值的所有行。

目前，我正在使用`CHARINDEX`检查单个子字符串，并`OR CHARINDEX`为每个后续子字符串附加。这很混乱，我相信你会欣赏的。

所以，目前，我有：

```
[Long SQL query]...
queryString.Append(string.Format(" (AND CHARINDEX( '{0}', Table.Column ) > 0 ", ListOfValues[0]));
            foreach (string value in ListOfValues)
            {
                queryString.Append(string.Format("OR CHARINDEX( '{0}', Table.Column ) > 0 ", value));
            }

            queryString.Append(string.Format(")AND CHARINDEX( '{0}', Table.Column) > 0)"));

queryString.Append(")"); 
```

有没有更可怕的语法方式来做到这一点？:)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:50:30.090

如果我理解这个问题，那么您可以更轻松地在 SQL 端执行此操作。

```
Select MyColumn
From MyTable
Where MyColumn Like '%MySubstringText%' 
```

显然，如果您的子字符串要更改，您将需要动态创建 SQL 语句。

编辑：

如果您有多个可能的子字符串，那么您可以使用值列表填充一个表，然后交叉连接两个表并使用 CharIndex 进行过滤。

```
Create table MySubstrings
(
    MySubstring nvarchar(100) not null
)

Select t.MyColumn
From MyTable t, MySubstrings s
Where CharIndex(s.MySubstring, t.MyColumn) > 0 
```

虽然性能可能不是很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:52:39.247

首先，将字符串放入这样的 SQL 查询中是非常危险的！如果您不小心，您将打开您的应用程序以进行 SQL 注入[http://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)。

现在回答：

```
queryString.Append(string.Format(" Table.Column LIKE '%{0}%' ", ListOfValues[0])); 
```

为避免 SQL 注入，请尝试这样做：

```
command.Parameters.AddWithValue("@ParamX","%" + value + "%"); 
```

当我们在这里进行字符串比较时，我想不出用 SQL 服务器来处理它的更简单的方法。

# c# - 检测在 c# 中使用 openas_rundll 打开的选定程序

> ID：11718855
> 
> 赞同：3
> 
> 时间：2012-07-30T09:39:39.533
> 
> 标签：c#, winapi, shellexecute

我在 c# 中的 openas_rundll 的帮助下使用 openfile 对话框打开一个文件。

```
Process.Start("rundll32.exe", string.Format("shell32.dll,OpenAs_RunDLL \"{0}\"", tempFilePath)); 
```

现在我想检测哪个程序用于打开文件。我想追踪这个过程。

我的目标是在用户关闭程序时删除文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:52:21.193

您可以通过找到它的 py 父进程 ID 来尝试捕捉实际应用程序关闭的时刻。如果你找到它，你可以等待它关闭，只要它是可以接受的。感谢[jeremy-murray](https://stackoverflow.com/users/88834/jeremy-murray)的[*GetAllProcessParentPids*方法](https://stackoverflow.com/a/7115130/880156)：

```
public void StartProcessAndWathTillTerminated(string tempFilePath)
{
    // Show app selection dialog to user
    Process rundll32 = Process.Start("rundll32.exe", string.Format("shell32.dll,OpenAs_RunDLL {0}", tempFilePath));
    int rundll32id = rundll32.Id;

    // Wait till dialog is closed
    while (!rundll32.HasExited)
    {
        System.Threading.Thread.Sleep(50);
    }

    // Get all running processes with parent id
    Dictionary<int, int> allprocparents = GetAllProcessParentPids();

    int openedAppId = 0;
    // Loop throu all processes
    foreach (var allprocparent in allprocparents)
    {
        // Found child process, started by our rundll32.exe instance
        if (allprocparent.Value == rundll32id)
        {
            openedAppId = allprocparent.Key;
            break;
        }
    }

    // Check if we actually found any process. It can not be found in two situations:
    // 1) Process was closed too soon, while we was looking for it
    // 2) User clicked Cancel and no application was opened
    // Also it is possible that chesen application is already running. In this
    // case new instance will be opened by rundll32.exe for a very short period of 
    //time needed to pass file path to running instance. Anyway, this case falls into case 1).

   //If we ca not find process explicitly, we can try to find it by file lock, if one exists:
   //I'm using here a code snippet from https://stackoverflow.com/a/1263609/880156,
   //which assumes that there are possible more than one lock on this file. 
   //I just take first. 
   if (openedAppId==0)
    {
        Process handleExe = new Process();
        handleExe.StartInfo.FileName = "handle.exe";
        handleExe.StartInfo.Arguments = tempFilePath;
        handleExe.StartInfo.UseShellExecute = false;
        handleExe.StartInfo.RedirectStandardOutput = true;
        handleExe.Start();           
        handleExe.WaitForExit();
        string outputhandleExe = handleExe.StandardOutput.ReadToEnd();

        string matchPattern = @"(?<=\s+pid:\s+)\b(\d+)\b(?=\s+)";
        foreach(Match match in Regex.Matches(outputhandleExe, matchPattern))
        {
            openedAppId  = int.Parse(match.Value);
            break;
        }
    }

    if (openedAppId != 0)
    {
        Process openedApp = Process.GetProcessById(openedAppId);
        while (!openedApp.HasExited)
        {
            System.Threading.Thread.Sleep(50);
        }
    }
    // When we reach this position, App is already closed or was never started.
}

public static Dictionary<int, int> GetAllProcessParentPids()
{
    var childPidToParentPid = new Dictionary<int, int>();

    var processCounters = new SortedDictionary<string, PerformanceCounter[]>();
    var category = new PerformanceCounterCategory("Process");

    // As the base system always has more than one process running, 
    // don't special case a single instance return.
    var instanceNames = category.GetInstanceNames();
    foreach(string t in instanceNames)
    {
        try
        {
            processCounters[t] = category.GetCounters(t);
        }
        catch (InvalidOperationException)
        {
            // Transient processes may no longer exist between 
            // GetInstanceNames and when the counters are queried.
        }
    }

    foreach (var kvp in processCounters)
    {
        int childPid = -1;
        int parentPid = -1;

        foreach (var counter in kvp.Value)
        {
            if ("ID Process".CompareTo(counter.CounterName) == 0)
            {
                childPid = (int)(counter.NextValue());
            }
            else if ("Creating Process ID".CompareTo(counter.CounterName) == 0)
            {
                parentPid = (int)(counter.NextValue());
            }
        }

        if (childPid != -1 && parentPid != -1)
        {
            childPidToParentPid[childPid] = parentPid;
        }
    }

    return childPidToParentPid;
} 
```

**更新**

由于多种原因，似乎没有100％保证成功的解决方案。我认为找到一个由 rundll32.exe 启动的进程是最可靠的。如果它失败了，你仍然可以用其他一些方法来完成它来确定进程 ID。

据我所知，还有其他几种方法可以找到仍在使用的文件。例如，Winword.exe 在同一目录中创建一些临时文件，并在关闭时将其删除。因此，如果您能够捕捉到临时文件删除的瞬间，那么您可能会认为该程序已关闭。

其他程序可能会通过设置锁定来保持您的文件处于打开状态。如果是这样，您可以通过查找锁所有者来找到该程序。我使用了来自这个答案[https://stackoverflow.com/a/1263609/880156](https://stackoverflow.com/a/1263609/880156)的外部程序 handle.exe 的解决方案，所以看看。

我不得不提一下，可能根本没有永久文件锁。它取决于程序架构。例如，如果您使用 Firefox 打开 html 文件，它会尽可能快地读取文件并关闭它，并且不再锁定文件。在这种情况下，即使您以某种方式找到进程名称（例如“firefox.exe”），您也无法找到用户关闭包含您的文件的选项卡的时刻。

如果我是你，我会实施这个解决方案，但仍然不理想，如果有必要我会在以后升级它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:43:16.033

只是一个简单的帮助类，它为您提供了一种使用 Windows 的 OpenWithDialog 打开文件的方法，并使用 WMI 监视启动的进程以识别所选的应用程序。

对于 WMI，添加 System.Management.dll 作为参考

> **注意：**它不能识别 windows 照片查看器 - 这是一个 dllhost.exe

针对您的情况的示例调用：

```
using (OpenFileDialog ofd = new OpenFileDialog())
{

    ofd.Filter = "All files(*.*)|*.*";
    if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
    {
        using (Win.OpenWithDialogHelper helper = new Win.OpenWithDialogHelper())
        {
             helper.OpenFileAndWaitForExit(ofd.FileName);
             File.Delete(helper.Filepath);
        }
    }
} 
```

班上：

```
namespace Win
{
    using System.Management;
    using System.Threading;
    using System.Diagnostics;
    using System.IO;

    public class OpenWithDialogHelper : IDisposable
    {
        #region members

        private Process openWithProcess;
        private ManagementEventWatcher monitor;

        public string Filepath { get; set; }
        public Process AppProcess { get; private set; }

        #endregion

        #region .ctor

        public OpenWithDialogHelper()
        {
        }

        public OpenWithDialogHelper(string filepath)
        {
            this.Filepath = filepath;
        }

        #endregion

        #region methods

        public void OpenFileAndWaitForExit(int milliseconds = 0)
        {
            OpenFileAndWaitForExit(this.Filepath, milliseconds);
        }

        public void OpenFileAndWaitForExit(string filepath, int milliseconds = 0)
        {
            this.Filepath = filepath;

            this.openWithProcess = new Process();
            this.openWithProcess.StartInfo.FileName = "rundll32.exe";
            this.openWithProcess.StartInfo.Arguments = String.Format("shell32.dll,OpenAs_RunDLL \"{0}\"", filepath);
            this.openWithProcess.Start();

            //using WMI, remarks to add System.Management.dll as reference!
            this.monitor = new ManagementEventWatcher(new WqlEventQuery("SELECT * FROM Win32_ProcessStartTrace"));
            this.monitor.EventArrived += new EventArrivedEventHandler(start_EventArrived);
            this.monitor.Start();

            this.openWithProcess.WaitForExit();

            //catching the app process...
            //it can't catched when the process was closed too soon
            //or the user clicked Cancel and no application was opened
            Thread.Sleep(1000);
            int i = 0;
            //wait max 5 secs...
            while (this.AppProcess == null && i < 3000)
            {
                Thread.Sleep(100); i++; 
            }

            if (this.AppProcess != null)
            {
                if (milliseconds > 0)
                    this.AppProcess.WaitForExit(milliseconds);
                else
                    this.AppProcess.WaitForExit();
            }
        }

        public void Dispose()
        {
            if (this.monitor != null)
            {
                this.monitor.EventArrived -= new EventArrivedEventHandler(start_EventArrived);
                this.monitor.Dispose();
            }

            if(this.openWithProcess != null)
                this.openWithProcess.Dispose();

            if (this.AppProcess != null)
                this.AppProcess.Dispose();
        }

        #endregion

        #region events

        private void start_EventArrived(object sender, EventArrivedEventArgs e)
        {
            int parentProcessID = Convert.ToInt32(e.NewEvent.Properties["ParentProcessID"].Value);
            //The ParentProcessID of the started process must be the OpenAs_RunDLL process
            //NOTICE: It doesn't recognice windows photo viewer
            // - which is a dllhost.exe that doesn't have the ParentProcessID
            if (parentProcessID == this.openWithProcess.Id)
            {
                this.AppProcess = Process.GetProcessById(Convert.ToInt32(
                    e.NewEvent.Properties["ProcessID"].Value));

                if (!this.AppProcess.HasExited)
                {
                    this.AppProcess.EnableRaisingEvents = true;
                }
            }
        }    

        #endregion
    }
} 
```

# javascript - LinkedIn被禁止时的Javascript问题

> ID：11718859
> 
> 赞同：0
> 
> 时间：2012-07-30T09:39:48.973
> 
> 标签：javascript, dom-events, linkedin

当我将 LinkeIin 社交插件用于公开个人资料时，

我添加了这两行：

```
 <script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
 <script type="IN/CompanyProfile" data-format="inline" data-id="37093"></script> 
```

现在 LinkdIn 被禁止，因此 platform.linkedin.com/in.js 无法访问并给出错误。

如何处理？

# jquery - 像 WordPress 小部件 / iGoogle 这样的 jQuery Portlet

> ID：11718861
> 
> 赞同：0
> 
> 时间：2012-07-30T09:39:54.387
> 
> 标签：jquery, wordpress, jquery-ui, igoogle

我正在寻找类似于 WordPress 小部件页面或 iGoogle 页面的解决方案。您基本上有一个带有预定义选择的 portlet 的主仪表板，然后是一个带有可用 portlet 的侧面/顶部菜单。

您可以在仪表板（它们将在此处完全展开）或菜单（您只需在其中获得标题）之间移动 portlet。一个portlet 只能在一个或另一个中——不能同时在两者中。

任何建议/链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T10:39:59.253

试试**jQuery UI**。它需要一些配置，但提供了您想要实现的所有必要功能。

[http://jqueryui.com/demos/droppable/#revert](http://jqueryui.com/demos/droppable/#revert)

[http://jqueryui.com/demos/droppable/#photo-manager](http://jqueryui.com/demos/droppable/#photo-manager)

# php - PHP 打开 .exe 服务器端

> ID：11718862
> 
> 赞同：1
> 
> 时间：2012-07-30T09:39:58.613
> 
> 标签：php, xampp, exec, unity3d, server-side

我一直在尝试在服务器端执行 .exe 文件。
换句话说，我真正想要的是在用户将文件上传到服务器后执行一个 .exe 文件（转换此文件）。
我试过打开记事本看看问题是出在我的可执行文件还是在php代码中，但它都没有运行（尽管如果我检查任务管理器，我可以看到它有一个属于系统的notepad.exe进程用户）。我猜这违反了 Windows 上的一些安全措施
我应该说我在 Windows 7 x64 上运行 XAMPP。

这就是我正在做的事情：

```
exec("cd ../../ConvertObj/ && ConvertObj.exe", $data, $ret);
//for debuggging
var_dump($data);
var_dump($ret); 
```

如您所见，我也在尝试读取输出以试图找到问题。现在，您可能想知道为什么我也将其标记为 unity3d。这个可执行文件是一个 Unity3d 独立 .exe 。对于我读过的内容，有一个命令行参数允许 Unity3d 在没有 GUI 的情况下运行，但不幸的是，这是一个仅限 PRO 的参数......我真的不介意在服务器 xD 上查看 GUI
所以，输出我得到（使用unity3d .exe）是

```
array (size=2)
    0 => string 'Mono path[0] = 'C:/xampp/htdocs/ConvertObj/ConvertObj_Data/Managed'' (length=67)
    1 => string 'Mono path[1] = 'C:/xampp/htdocs/ConvertObj/ConvertObj_Data/Mono'' (length=64) 
```

我虽然有点奇怪。我的猜测是 Windows 正在阻止服务器上的所有 GUI 应用程序，因为 dir 命令完美地工作，我认为这两行是 Unity3D 抱怨的东西......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:33:01.373

我以前不得不这样做。在用户受限的封闭（局域网）环境中，我将其破解了。

（为了记录，这不是我引以为豪的事情，但它一直有效并且一直有效，如果这是供公众使用，我不会推荐这个）

在 XP 中，您只需在 apache 服务上选中“允许此服务与桌面交互”即可。这在 W7 中不起作用，根据我的经验，上面的评论也建议将服务设置为使用 apache 用户......这也不起作用。

在 W7 中，我知道使其工作的唯一方法是在服务菜单中停止将 apache 作为服务运行（将启动设置为手动）。然后使用 httpd.exe 并在您的启动项中创建一个快捷方式。

此外，出于某种原因，我不得不使用完整的绝对路径，例如。c:\程序...

这又是一个可怕的 hack，99% 的时间我会说会有更好的方法来做你正在做的事情。尝试重新考虑您的方法。

# cordova - 适用于 iOS4 的 Phonegap 推特插件

> ID：11718864
> 
> 赞同：-3
> 
> 时间：2012-07-30T09:40:12.497
> 
> 标签：cordova, ios4, phonegap-plugins

[我使用这里](https://github.com/phonegap/phonegap-plugins/tree/8848e8dd7f0d93810eec49fb1124f6389c963b68/iOS/Twitter)给出的 phonegp 插件为 ios 集成了一个 twitter 插件。但我也想在 ios4 中使用相同的功能，所以我怎样才能得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T03:57:57.283

Twitter 插件基于 IOS5 平台，其中包括 twitter 作为标准。

Twitter API 使用一种 Oauth 进行身份验证。也许在 webapp 中搜索 OAuth 以获得自定义解决方案。

# java - H2数据库中的存储过程

> ID：11718865
> 
> 赞同：16
> 
> 时间：2012-07-30T09:40:16.663
> 
> 标签：java, stored-procedures, h2

我是数据库新手，最近开始为 H2 数据库编写测试用例。我想知道如何在 Eclipse 中测试存储过程。我看过以下内容：

[http://www.h2database.com/html/features.html#user_defined_functions](http://www.h2database.com/html/features.html#user_defined_functions)

[如何在 H2 中创建程序](https://stackoverflow.com/questions/4955521/how-to-create-procedure-in-h2)

h2database链接中给出的示例代码，

```
"CREATE ALIAS NEXT_PRIME AS $$
String nextPrime(String value) {
    return new BigInteger(value).nextProbablePrime().toString();
}
$$;
" 
```

*   这应该在哪里声明？如何运行它？

PS - 我有 H2 JAR 文件并正在测试它。

如果有人能告诉我如何用 Java 为 H2 编写一个简单的存储过程，那将有很大帮助。

H2中是否还有以下等效项？

“开始 dbms_output”？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-09-23T10:13:39.757

**H2数据库中没有存储过程和sql用户定义函数，我们使用java方法并创建一个别名来引用它。我们可以使用别名调用该方法。**

下面是一个简单的例子：**

```
DROP ALIAS IF EXISTS MYFUNCTION;
CREATE ALIAS MYFUNCTION AS $$
String getTableContent(java.sql.Connection con) throws Exception {
    String resultValue=null;
    java.sql.ResultSet rs = con.createStatement().executeQuery(
    " SELECT * FROM TABLE_NAME");
       while(rs.next())
       {
        resultValue=rs.getString(1);
       }
    return resultValue;
}
$$; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-07T06:21:05.433

您可能忽略了 中的示例`src/test/org/h2/samples/Function.java`。这是一个相关的例子：

```
Connection conn = DriverManager.getConnection("jdbc:h2:mem:", "sa", "");
Statement st = conn.createStatement();
st.execute("CREATE ALIAS getVersion FOR \"org.h2.engine.Constants.getVersion\"");
ResultSet rs;
rs = st.executeQuery("CALL getVersion()");
if (rs.next()) System.out.println("Version: " + rs.getString(1)); 
```

安慰：`Version: 1.4.191`

附录：特性不限于功能；别名方法可以执行任意[Java 代码](https://stackoverflow.com/a/17295917/230513)。例如，中`query()`定义的方法[`Function.java`](https://github.com/h2database/h2database/blob/master/h2/src/test/org/h2/samples/Function.java)可能会被别名和调用，如下所示：

```
Connection conn = DriverManager.getConnection("jdbc:h2:mem:", "sa", "");
Statement st = conn.createStatement();
st.execute("CREATE ALIAS query FOR \"cli.Function.query\"");
rs = st.executeQuery("CALL query('SELECT NAME FROM INFORMATION_SCHEMA.USERS')");
while (rs.next()) {
    System.out.println("User: " + rs.getString(1));
} 
```

安慰：`User: SA`

请注意，这`cli.Function.query`是`org.h2.samples.Function.query`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-06T14:02:35.160

以下是我们过去在项目中实施的方式。这可能会有所帮助:)

```
package com.procedures;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class CRITICAL_ACTIONS {

    public static final int SAVE_ACTION(Connection connection) throws SQLException {
        try {
            Statement statement = connection.createStatement();
            return statement.executeUpdate("INSERT INTO SCHEMA1.CRITICAL_ACTIONS(COLLEAGUE_ID,JOURNEY_ID,TYPE,PRODUCT,DESCRIPTION,META_DATA,STATUS) values('12345',11111111,'ABC','Lloyds','hellow','hello','START')");
        } finally {
            //connection.close();
        }
    }

    public static final ResultSet FETCH_ACTION(Connection connection) throws SQLException {
        try {
            Statement statement = connection.createStatement();
            return statement.executeQuery("SELECT * FROM SCHEMA1.CRITICAL_ACTIONS");
        }finally {
            connection.close();
        }
    }

} 
```

在 Java 中调用 H2 Java 存储过程：-

```
 jdbcTemplate.update("CREATE ALIAS SAVE_ACTION FOR \"com.procedures.CRITICAL_ACTIONS.SAVE_ACTION\"");
    jdbcTemplate.update("CREATE ALIAS FETCH_ACTION FOR \"com.procedures.CRITICAL_ACTIONS.FETCH_ACTION\"");

    jdbcTemplate.getDataSource().getConnection().createStatement().execute("call SAVE_ACTION()"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-12T09:23:48.650

H2数据库中的存储过程和java方法一样，所以写java方法，可以使用别名调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-16T11:06:38.557

```
H2 DB is not supporting for storedprocs. In place of stored proc we have to create function which returns some output jst like storedproc as we did using registerInOut params. For example,

if ur QueryConst is like this:
public static final String INSERT_EMPLOYEE = "{call INSERT_EMPLOYEE(?,?,?)}";

then,

In our schema.sql(which executes @Test before)
DROP ALIAS IF EXISTS INSERT_EMPLOYEE;
CREATE ALIAS INSERT_EMPLOYEE FOR "com.test.EmployeeDaoImplTest.updateEmpStoredproc";

package com.test;
@ContextConfiguration(locations = { "classpath:configxmltest.xml" })
@RunWith(SpringJUnit4ClassRunner.class)
@Sql(scripts = { "classpath:schema.sql" }, executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD)
public class EmployeeDaoImplTest {

    public static final String INSERT_EMPLOYEE = "{call INSERT_EMPLOYEE(?,?,?)}";

    @Autowired
    EmployeeDaoImpl employeeDaoTest;

    and other dependencies....(if any)

    @Test
    public void testUpdateEmployee() {
        ..ur logic if any input data settings
        assertEquals("Inserted Successfully", employeeDaoTest.updateEmployee(input, INSERT_EMPLOYEE));
    }

    public static ResultSet updateEmpStoredproc(String name, String w, Integer i) throws SQLException {
        SimpleResultSet rs = new SimpleResultSet();
        rs.addColumn("input", Types.VARCHAR, 255, 0);
        rs.addColumn("error", Types.VARCHAR, 255, 0);
        rs.addColumn("count", Types.INTEGER, 10, 0);
        rs.addRow(0, "Inserted Successfully");
        rs.addRow(1, 10);
        return rs;
    }
  } 
```

# javascript - 来自用户输入的动态表格，以单元格 ID 作为网格参考

> ID：11718866
> 
> 赞同：1
> 
> 时间：2012-07-30T09:40:16.773
> 
> 标签：javascript, html-table

我正在尝试创建一个由用户输入数据生成的表。

该表反映了一个网格，因此我希望每个单元格的 id 是该网格的坐标。所以左下角单元格的 id 将是 id00。右上角的单元格 ID 将是用户输入的网格的最大大小。

例如，如果输入数据；x值=3；y value=3 这将产生下表：

```
<table>
<tr><td id="id03"></td><td id="id13"></td><td id="id23"></td><td id="id33"></td></tr>
<tr><td id="id02"></td><td id="id12"></td><td id="id22"></td><td id="id32"></td></tr>    
<tr><td id="id01"></td><td id="id11"></td><td id="id21"></td><td id="id31"></td></tr>
<tr><td id="id00"></td><td id="id10"></td><td id="id20"></td><td id="id30"></td></tr>
</table> 
```

我已经确定了代码的基本概念，如下所示：

```
<table>
Create a loop,  initial value of r= 0; maximum value of r=y
r =0 <tr> create a secondary  loop, initial value of n=0; maximum value of n = x;  r remains  constant for row
n=0; r= 0 <td  id = “id” + “[x- (x-n)]” +   “[y-r]” > </td>
….
n=3; r= 0* <td id = “id” + “[x- (x-n)]” +   “[y-r]” > </td>
</tr>

….

r =3 <tr> n=0; r= 3 <td  id = “id” + “[x- (x-n)]” +   “[y-r]” > </td>
….
n=3; r= 3<td id = “id” + “[x- (x-n)]” +   “[y-r]” > </td>
</tr>
</table> 
```

我想用 Javascript 开发它，但我是该语言的新手，我在编码时遇到了麻烦。

任何人都可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:23:26.180

试试这个 ：

```
var x = 3; // value from input
var y = 4; // value from input

var table = document.getElementById("myTable");
for(var i = 0; i < y; i++) {
    var row = table.insertRow(-1);
    for(var j = 0; j < x; j++) {
        var cell = row.insertCell(-1);
        cell.id = "id" + (j) + (y - i - 1);
        cell.innerHTML = cell.id;        
    }
}
​ 
```

[工作示例](http://jsfiddle.net/6YKcK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:01:35.147

尝试这样的事情：

```
var rows = parseInt(document.getElementById('rows').value,10); // get input value
var cols = parseInt(document.getElementById('cols').value,10); // get input value
var table = document.createElement('table'); // create table element
table.border = "1"; // set some attributes
var prevrow; // used to store previous row element
for (var r = 0; r < (rows+1); r++) {  // loop rows
    var row = document.createElement('tr'); // create tr
    for (var c = 0; c < (cols+1); c++) { // loop cols
        var col = document.createElement('td'); // create td
        col.id = 'id' + r + c;  // set id of tr
        col.innerHTML = col.id; // add some text
        row.appendChild(col); // append td to tr
    }
    // if first tr then create append to table else insert before previous tr
    if (prevrow) {
        table.insertBefore(row, prevrow);
    } else {
        table.appendChild(row);
    }
    // store newly create tr
    prevrow = row;
}
// append the new table to the output div
document.getElementById('output').appendChild(table); 
```

使用[`document.createElement()`](https://developer.mozilla.org/en/DOM/document.createElement),[`element.appendChild()`](https://developer.mozilla.org/en/DOM/Node.appendChild)和[`element.insertBefore()`](https://developer.mozilla.org/en/DOM/element.insertBefore)建立表

[这里的工作示例](http://jsfiddle.net/g9ZMf/22/)

# android - 如何使用 achartengine 绘制多 Y 轴

> ID：11718870
> 
> 赞同：0
> 
> 时间：2012-07-30T09:40:33.747
> 
> 标签：android

我使用 achartengine 开发者一个 android 应用程序，现在我只绘制 2 个 Y 轴，但我需要 4 个 Y 轴，我在互联网上搜索并阅读了 achartengine API，但没有学习如何绘制多个 Y 轴，谁能帮助我，非常感谢.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:04:19.963

您可以从下载 AChartEngine 演示开始。在演示中，有一个“温度和日照”图表，它有多个 Y 轴。这是开始学习如何做到这一点的最佳场所。代码可以在[这里](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/MultipleTemperatureChart.java)找到。

# c# - 如何突出显示网格视图中的选定行？

> ID：11718873
> 
> 赞同：2
> 
> 时间：2012-07-30T09:40:37.673
> 
> 标签：c#, html.dropdownlistfor

我正在使用模板字段向 gridview 添加一个下拉列表：

```
 <asp:TemplateField HeaderText="Change Color">
                    <ItemTemplate>
                        <asp:DropDownList ID="dropdownid" DataSourceID="sqldatasource_id" DataTextField="username"
                            BackColor="GrayText"  OnSelectedIndexChanged="GridView1_SelectedIndexChanged" AppendDataBoundItems="True" runat="server" AutoPostBack="True">

                            <asp:ListItem Text="--Select One--" Value="" Selected="True" />
                        </asp:DropDownList> 
```

SqlDataSource 是：

```
 <asp:SqlDataSource ID="sqldatasource_id" runat="server" ConnectionString="<%$ ConnectionStrings:crudconnection %>"
            SelectCommand="SELECT [username] FROM [crudtable]"></asp:SqlDataSource> 
```

Indexchange-Event 为：

```
 protected void GridView1_SelectedIndexChanged(object sender,EventArgs e)
    {

    } 
```

I want to highlight a row when any value from the corresponding dropdownlist is selected. 我该怎么做？

提前致谢。

* * *

我尝试过这个：

```
 GridView1.Rows[GridView1.SelectedIndex].BackColor = Color.Red; 
```

但是，当我从任何下拉列表中选择任何值时，它仍然会给出如下异常。

**指数超出范围。必须是非负数且小于集合的大小。参数名称：索引**

如前所述，我正在获取所选行的索引号。我不能从那里增加它并且也可以使用背景颜色属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:17:59.590

你可以试试这个：

`GridView1.Rows[GridView1.SelectedIndex].BackColor = Color.Red`在你的里面`GridView1_SelectedIndexChanged`？

它应该将所选行的背景颜色设置为红色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:20:00.807

试试 GridView_SelectedIndexChanging()。方法如下：

```
protected void GridView1_SelectedIndexChanging(object sender, GridViewSelectEventArgs e)
{
    //This is current row. Set it to default color
    GridView1.SelectedRow.BackColor = System.Drawing.Color.White;

    //This is selected row. Set it to color you wish
    GridView1.Rows[e.NewSelectedIndex].BackColor = System.Drawing.Color.Black;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:31:26.400

它的工作。我做了如下的改变。

```
 int abc=row.rowindex+3;
 GridView1.Rows[abc].BackColor = Color.Yellow; 
```

感谢您的支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T07:52:51.650

函数更改行颜色（行）{

```
 row = parseInt(row) + 1;

        if (previousRow == row)
            return; //do nothing
        else if (previousRow != null) {
            document.getElementById("MainContent_gvSimulationManager").rows[previousRow].style.backgroundColor = previouscolor;
        }
        previouscolor = document.getElementById("MainContent_gvSimulationManager").rows[row].style.backgroundColor;
        document.getElementById("MainContent_gvSimulationManager").rows[row].style.backgroundColor = "#888888";

        previousRow = row;

        //Disable and enable Session
        var simulationStatus = document.getElementById("MainContent_gvSimulationManager").rows[row].cells[3].innerText;

        EnableAndDisable(simulationStatus); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-16T09:09:56.393

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title></title>
    </head>
    <body>
        <form id="form1" runat="server">
        <div>
            <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false"
            OnRowDataBound="GridView1_RowDataBound" OnSelectedIndexChanged = "OnSelectedIndexChanged">
            <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
                    <Columns>
                        <asp:BoundField DataField="pub_id" HeaderText="pub_id" />
                        <asp:BoundField DataField="pub_name" HeaderText="pub_name" />
                        <asp:BoundField DataField="city" HeaderText="city" />
                        <asp:BoundField DataField="state" HeaderText="state" />
                        <asp:BoundField DataField="country" HeaderText="country" />
                        <asp:ButtonField Text="Click" CommandName="Select" ItemStyle-Width="30"  />
                    </Columns>
           </asp:GridView>
            <br />
            <asp:Label ID="msg" runat="server" Text=""></asp:Label>
        </div>
        </form>
    </body>
    </html>

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Data;
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        SqlDataAdapter adapter = new SqlDataAdapter();
        DataSet ds = new DataSet();
        int i = 0;
        string sql = null;
        string connetionString = "Data Source=.;Initial Catalog=pubs;User ID=sa;Password=*****";
        sql = "select * from publishers";
        SqlConnection connection = new SqlConnection(connetionString);
        connection.Open();
        SqlCommand command = new SqlCommand(sql, connection);
        adapter.SelectCommand = command;
        adapter.Fill(ds);
        adapter.Dispose();
        command.Dispose();
        connection.Close();
        GridView1.DataSource = ds.Tables[0];
        GridView1.DataBind();
    }
    protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            e.Row.Attributes["onmouseover"] = "this.style.backgroundColor='aquamarine';";
            e.Row.Attributes["onmouseout"] = "this.style.backgroundColor='white';";
            e.Row.ToolTip = "Click last column for selecting this row.";
        }
    }
    protected void OnSelectedIndexChanged(object sender, EventArgs e)
    {
        string pName = GridView1.SelectedRow.Cells[1].Text;
        grdCList.SelectedRow.Cells[3].ForeColor = System.Drawing.Color.Red;
    } 
```

# facebook-graph-api - 如果搜索模式是单个单词，则用于搜索的图形 api 不起作用

> ID：11718875
> 
> 赞同：1
> 
> 时间：2012-07-30T09:40:43.777
> 
> 标签：facebook-graph-api

如果搜索模式是单个单词，则用于搜索的图形 api 不起作用。它给出空结果。例如： [https ://graph.facebook.com/search?q=mark&type=user](https://graph.facebook.com/search?q=mark&type=user)

如果您使用如下所示的两个单词查询，您将得到结果。

```
https://graph.facebook.com/search?q=ho hie&type=user 
```

即使它是 URL 编码的，例如“ho%20%hie”，结果也是空的。

谁能帮我找出原因

# python - 部署 Django 项目

> ID：11718877
> 
> 赞同：1
> 
> 时间：2012-07-30T09:40:55.727
> 
> 标签：python, apache2, web-deployment

我有一个 django 项目，我想将它部署在 apache2 Http Server 上。

但是，我想自动将所有 python 文件从某个目录复制到 apache srv 目录，即 /srv/www/myproject。有没有可以解决这个目的的自动 python 工具。

我查看了 DistUtils 和 setup.py 但我不确定如何将所有 .py 文件（连同目录结构）复制到 apache 目录。

任何帮助将不胜感激！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:00:56.170

看看[fabric](http://www.fabfile.org)，它是一个很好的自动部署工具

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:01:04.890

来自 django 教程：

> 如果您的背景是 PHP，您可能习惯于将代码放在 Web 服务器的文档根目录下（在 /var/www 之类的地方）。使用 Django，您不会那样做。将任何这些 Python 代码放在 Web 服务器的文档根目录中并不是一个好主意，因为它有可能使人们能够通过 Web 查看您的代码。这对安全不利。
> 
> 将您的代码放在文档根目录之外的某个目录中，例如 /home/mycode。

对于复制文件，您可以使用可以自动化的 FTP/SCP 之类的简单工具；或者您可以使用更完整的部署选项，例如 fabric（有关 fabric + virtualenv + apache mod_wsgi 的分步指南，请参阅[此博客条目）。](http://www.morethanseven.net/2009/07/27/fabric-django-git-apache-mod_wsgi-virtualenv-and-p.html)

您可以使用任何工具来自动化任务；但请将代码放在适当的非 Web 可浏览目录中。

# templates - drupal 7 - 按分类术语分组

> ID：11718881
> 
> 赞同：0
> 
> 时间：2012-07-30T09:41:22.793
> 
> 标签：templates, drupal-7, views

我有一个视图叫`products`，使用`product content type`和分类`product taxonomy terms`。我只想显示节点中的`Title`and`Picture`并按我的标签对它们进行分组。

**标签：**

*   水果
*   干罐头
*   乳制品

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:37:28.090

当然，您需要创建一个视图。在视图中，您可以对数据进行任何过滤并显示在新节点、表格、列表等中。

# php - XMLReader() 中的 XML 验证

> ID：11718883
> 
> 赞同：2
> 
> 时间：2012-07-30T09:41:26.617
> 
> 标签：php, xml, xsd, xmlreader

我一直在尝试研究如何在 PHP 中针对 XSD 验证 XML，但由于缺乏示例而未能这样做。我读过**is_Valid()**等。

我想出了下面的例子，但它不能正常工作。

```
$reader = new XMLReader();
$reader->open('items.xml');
$reader->setSchema('items.xsd');

//Now how do validate against XSD and print errors here 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-07T16:22:37.483

我创建了一个性能基准：XMLReader vs DOMDocument

XMLReader.php：

```
 $script_starttime = microtime(true);
    libxml_use_internal_errors(true);

    $xml = new XMLReader; 
    $xml->open($_FILES["file"]["tmp_name"]); 
    $xml->setSchema($xmlschema);        

    while (@$xml->read()) {};

    if (count(libxml_get_errors ())==0) {
        echo 'good';            
    } else {
        echo 'error';
    }

    echo '<br><br>Time: ',(microtime(true) - $script_starttime)*1000," ms, Memory: ".memory_get_usage()." bytes"; 
```

DOMDocument.php：

```
 $script_starttime = microtime(true);
    libxml_use_internal_errors(true);

    $xml = new DOMDocument(); 
    $xmlfile = $_FILES["file"]["tmp_name"];
    $xml->load($xmlfile); 

    if ($xml->schemaValidate($xmlschema)) {
        echo 'good';        
    } else {
        echo 'error';
    }

    echo '<br><br>Time: ',(microtime(true) - $script_starttime)*1000," ms, Memory: ".memory_get_usage()." bytes"; 
```

我的示例：18 MB xml，258.230 行

结果：

XMLReader - 656.14199638367 毫秒，379064 字节

DOMDocument - 483.04295539856 毫秒，369280 字节

所以我决定使用 DOMDocument，但只需尝试使用您自己的 xml 和 xsd 并使用您更快的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T00:08:43.020

我刚刚在这里创建了关于验证的类似答案： [Getting PHP's XMLReader to not throw php errors in invalid documents](https://stackoverflow.com/questions/14927565/getting-phps-xmlreader-to-not-throw-php-errors-in-invalid-documents/17118613#17118613)

但最重要的是，如果不传递整个文档，就无法使用 XMLReader 进行验证。这种情况类似于数据库结果集 - 您必须通过文档节点迭代（XMLReader 的读取方法），并且每个节点仅在您读取它时才被验证（有时甚至更晚）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-30T10:48:37.687

首先，使用[DOM](http://php.net/manual/en/book.dom.php)。它更强大，将读者和作家合二为一——我认为没有理由不这样做。它还有一个更合乎逻辑的界面（恕我直言）。

一旦你这样做，[`DOMDocument::schemaValidate()`](http://php.net/manual/en/domdocument.schemavalidate.php)做你所追求的。

# android - 如何在 ChildBrowser 中重定向到 PhoneGap 中的新 URL

> ID：11718887
> 
> 赞同：0
> 
> 时间：2012-07-30T09:41:36.737
> 
> 标签：android, cordova, childbrowser

当用户访问第三方网站进行身份验证时，我想将用户重定向到另一个页面。我正在使用 childbrowser 在应用程序上下文中打开网页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T03:55:40.497

如果您打开子浏览器只是为了进行身份验证，最好将表单复制到您的页面并将结果发布到隐藏的 iFrame 中。

如果您查看 ChildBrowser javascript，您会看到有一个 On Change 方法，您可以在 url 更改时进行回调 - 这可能允许您捕获 URL 中的更改。

# context-free-grammar - L* 和 Σ* 之间的差异

> ID：11718892
> 
> 赞同：2
> 
> 时间：2012-07-30T09:41:57.053
> 
> 标签：context-free-grammar, automata, formal-languages

有人可以解释和之间的确切区别`Σ*`，语言`L*`在哪里， `L`语言`Σ`的字母在`L`哪里？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T22:50:26.880

Σ 是一组字符。

L 是一组字符串。

这最终取决于如何定义 L。如果 L = {w | w in Σ} 那么 L 的所有单词（字符串）都是来自 Σ 的单个字符，并且 L* ≡ Σ*。但是，如果 L 的定义不同（下例），L* ≠ Σ*。

初步说明：您可能还看到 ε 表示空字符串，而不是 λ。这些符号可以互换。

qf [http://en.wikipedia.org/wiki/Kleene_star](http://en.wikipedia.org/wiki/Kleene_star)

> ```
> If V is a set of strings then V* is defined as the smallest superset of
> V that contains λ (the empty string) and is closed under the string
> concatenation operation.
> 
> If V is a set of symbols or characters then V* is the set of all strings
> over symbols in V, including the empty string. 
> ```
> 
> ...
> 
> ```
> Example of Kleene star applied to set of strings:
>     {"ab", "c"}* = {λ, "ab", "c", "abab", "abc", "cab", "cc", "ababab",
>                     "ababc", "abcab", "abcc", "cabab", "cabc", "ccab",
>                     "ccc", ...}. 
> ```

请注意，“aa”和“bb”在生成的字符串中没有出现。

Σ* 限制较少：

> ```
> Example of Kleene star applied to set of characters:
>     {'a', 'b', 'c'}* = {λ, "a", "b", "c", "aa", "ab", "ac", "ba", "bb",
>                        "bc", "ca", "cb", "cc", ...}. 
> ```

# jquery - 如何切换 2 个类并在每次切换后设置一个 cookie？

> ID：11718894
> 
> 赞同：0
> 
> 时间：2012-07-30T09:41:59.517
> 
> 标签：jquery

单击按钮时，我希望发生三件事，一个 slideToggle，在 2 个类之间切换，以及一个 cookie 的设置。我的前两件事工作正常，我现在需要设置一个 cookie`companyDescriptionDiv`或者取决于是否有一个打开或关闭的`opened`类`closed``#showhide-company-description`

```
$(document).on('click', "#showhide-company-description", function () {
    $("#companydescription").slideToggle("slow", function () {
        $("#showhide-company-description").toggleClass("opened").toggleClass("closed");
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:41:37.643

顺便说一句，您不必调用toggleClass 两次，您可以传递一个逗号分隔的类列表来切换，例如toggleClass('opened, closed')。我个人会这样做：

```
$(document).on('click', "#showhide-company-description", function () {
    var $toggler = $(this);
    $("#companydescription").slideToggle("slow", function () {
        var isOpen = $toggler.toggleClass('opened, closed').hasClass('opened');
        if(isOpen) {
            setCookie.routine();
        });
    });
}); 
```

这将执行切换并同时返回其“状态”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:45:23.290

检查类：

```
if ($("#showhide-company-description").hasClass("opened")) {
  //set cookie
} 
```

[设置 cookie](https://stackoverflow.com/questions/1458724/how-to-set-unset-cookie-with-jquery)

# regex - 使用正则表达式或其他方式检查电子邮件字符串

> ID：11718898
> 
> 赞同：1
> 
> 时间：2012-07-30T09:42:28.623
> 
> 标签：regex, erlang, email-validation

我试过下面的代码，但它给了我不匹配。

```
re:run("qw@qc.com", "\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b"). 
```

正则表达式我在这里[http://www.regular-expressions.info/email.html](http://www.regular-expressions.info/email.html)

编辑：下一个不起作用

```
re:run("345345", "\b[0-9]+\b"). 
```

如果您只收到字符串中的电子邮件，那么该电子邮件将匹配

```
re:run("qw@qc.com", "^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$"). 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T11:33:04.380

我不愿回答这个问题，因为我认为它依赖于一个不正确的假设——您可以使用正则表达式确定电子邮件地址是否有效。有关详细信息，请参阅[此问题；](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)乍一看，我注意到您问题中的正则表达式不接受[.museum](http://en.wikipedia.org/wiki/.museum)和[.рф](http://en.wikipedia.org/wiki/.%D1%80%D1%84)顶级域。

也就是说，您需要转义反斜杠。您希望字符串包含反斜杠，但在 Erlang 中，反斜杠用于字符串内部以转义各种字符，因此任何文字反斜杠都需要写为`\\`. 尝试这个：

```
3> re:run("qw@qc.com", "\\b[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}\\b").
{match,[{0,9}]} 
```

或者更好的是，这个：

```
8> re:run("qw@qc.com", "\\b[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*\\b").
{match,[{0,9}]} 
```

那是[HTML 5 标准中使用](http://www.w3.org/TR/html5/states-of-the-type-attribute.html#valid-e-mail-address)的正则表达式，修改为使用`\\b`而不是`^`and `$`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:46:05.503

看起来你需要一个*不区分大小写的*匹配？

目前`[A-Z0-9._%+-]`（例如）仅匹配大写字符（加数字等）。

一种解决方案是指定`[A-Za-z]`. 另一种解决方案是在匹配之前将您的电子邮件地址转换为大写。

# javascript - 我无法返回我的 json 对象

> ID：11718904
> 
> 赞同：0
> 
> 时间：2012-07-30T09:42:44.630
> 
> 标签：javascript, json, api, rest, highcharts

我无法返回 JSON 对象，而我得到的只是一个未定义的变量。

此代码应该从 API 返回一个 json 元素。它似乎在成功中起作用：函数，但是一旦我尝试将该数据带到其他地方，它只会显示“未定义”

```
var datas;
datas = getdata();
//getdata();
createChart(datas)

alert('2datass'+datas); // this returns undefined

function createChart(data){
    alert(data); //outputs undefined
}

function getdataaa(){
    alert('ajax');
    $.ajax({
        type: "GET",
        dataType: "json",
        url: "API URL",
        success: function(data){

            alert(data); // WORKS! and outputs my JSON data
            /*
              for(var i =0;i <= data.length-1;i++)
              {
              var item = data[i];

              datas = datas + {
              type: 'column',
              name: item.name,
              data: [item.difference]
              };
              }
            */

            //Neither of these returns seems to work
            return jQuery.parseJSON(data);
            return data;
        }
    });
}; 
```

任何帮助，将不胜感激。

解决方案

感谢所有帮助过的人。

这似乎可以解决问题

```
 var datas;
        datas = getData();
        //getdata();

        alert('2datass'+datas);
        console.log(datas);
        createChart(datas);

        function createChart(data){

            alert('createChart'+data);
            var dynamicData;

                    for(var i =0;i <= data.length-1;i++)
                    {
                        var item = data[i];

                        dynamicData = dynamicData + {
                            type: 'column',
                            name: item.name,
                            data: [item.difference]
                        };

                    }

            alert('dynamic' +dynamicData); // works, but says undefined before - outputs dynamic undefined[object Object][object Object][object Object][object Object][object Object]

            var series = [dynamicData,{
                    type: 'column',
                    name: 'Jane',
                    data: [300, 30]
                }, {
                    type: 'column',
                    name: 'John',
                    data: [-200, 50]
                }, {
                    type: 'column',
                    name: 'Joe',
                    data: [444, -25]
                }, {
                    type: 'column',
                    name: 'Jobe',
                    data: [444, -25]
                }, {
                    type: 'column',
                    name: 'Jooe',
                    data: [444, -25]
                },{
                    type: 'column',
                    name: 'Jane',
                    data: [300, 30]
                }
                , {
                    type: 'pie',
                    name: 'Total consumption',
                    data: [{
                            name: 'Jane',
                            y: 13
                            //color: '#4572A7' // Jane's color
                        }, {
                            name: 'John',
                            y: 23
                            //color: '#AA4643' // John's color
                        }, {
                            name: 'Joe',
                            y: 19
                            //color: '#89A54E' // Joe's color
                        }],
                    center: [30, 80],
                    size: 100,
                    showInLegend: false,
                    dataLabels: {
                        enabled: false
                    }
                }];

            var options = {
                chart: {
                    renderTo: 'container'
                },
                title: {
                    text: 'Account Managers Leaderboard'
                },
                xAxis: {
                    categories: ['Month on Month', 'Day on Day']
                },
                tooltip: {
                    formatter: function() {
                        var s;
                        if (this.point.name) { // the pie chart
                            s = ''+
                                this.point.name +': '+ this.y +' sales';
                        } else {
                            s = ''+
                                this.x  +': '+ this.y;
                        }
                        return s;
                    }
                },
                labels: {
                    items: [{
                            html: 'Total proportion of sales <br />this month',
                            style: {
                                left: '40px',
                                top: '-5px',
                                color: 'black'
                            }
                        }]
                },
                series: series
            };

            $(document).ready(function() {
                var chart;
                chart = new Highcharts.Chart(options);
            });

        }

       function getData(){
            //alert('ajax');

            var receivedData; // store your value here
            $.ajax({
                type: "GET",
                dataType: "json",
                url: "API URL",
                async: false,
                success: function(data){
                    alert('data'+data); //works
                    receivedData = data;
                }
            }); 

            return receivedData;
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:47:20.383

默认情况下，AJAX 调用是异步的，您必须使用以下方法从 ajax 调用返回响应：

```
function getdataaa() {
    return $.ajax({ 
        type: "GET",
        dataType: "json",
        url: "API URL",
        async: false // NOTICE THIS
    }).responseText; // AND THIS
}; 
```

我不确定 responseText 是否会被解析或未解析的 JSON，但看看你从哪里得到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:52:17.527

代替：

```
 return jQuery.parseJSON(data); 
```

或者

```
 return data; 
```

直接调用`createChart`函数：

```
createChart(data) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T09:54:48.417

问题是你从`success`函数返回，而不是你的`getdataaa`函数。`getdataaa`没有返回语句，所以`undefined`默认返回。return 语句是指最近的函数。

```
success: function(data){
   alert(data); // WORKS! and outputs my JSON data
   ...
   //Neither of these returns seems to work
   return jQuery.parseJSON(data);
   return data;
} 
```

这就是你得到的。您可以使用这样的闭包获得结果：

```
function getdataaa(){
    alert('ajax');

    var receivedData; // store your value here
    $.ajax({
        type: "GET",
        dataType: "json",
        url: "API URL",
        async: false,
        success: function(data){

            alert(data);

            // ...

            receivedData= data;
        }
    });

    return receivedData;
}; 
```

# jquery - 需要一个 jquery 评分滑块

> ID：11718905
> 
> 赞同：0
> 
> 时间：2012-07-30T09:42:57.820
> 
> 标签：jquery, jquery-ui

任何人都可以建议一个好的 jquery 评级滑块。我的主要用途是我需要一个评级滑块来获得 1 到 10 之间的评级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:46:43.917

使用主 jquery 滑块。它将一个元素变成一个简单的滑块：

```
 $("#slider").slider(); 
```

[http://docs.jquery.com/UI/Slider](http://docs.jquery.com/UI/Slider)

# spring - Spring默认对象创建？

> ID：11718906
> 
> 赞同：0
> 
> 时间：2012-07-30T09:43:02.187
> 
> 标签：spring, spring-mvc

Spring 是否从那里读取任何配置文件，知道要创建一些默认的开箱即用实现（`HandlerMapping`等`ViewResolver`）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:08:00.393

是的，`DispatcherServlet.properties`在`org.springframework.web.servlet`pacakge 中就是您要找的东西。

DispatcherServlet 来源的相关片段：

```
 /**
  * Name of the class path resource (relative to the DispatcherServlet class)
  * that defines DispatcherServlet's default strategy names.
  */
 private static final String DEFAULT_STRATEGIES_PATH ="DispatcherServlet.properties";

 ....

 static {
    // Load default strategy implementations from properties file.
    // This is currently strictly internal and not meant to be customized
    // by application developers.
    try {
        ClassPathResource resource = new ClassPathResource(DEFAULT_STRATEGIES_PATH, DispatcherServlet.class);
        defaultStrategies = PropertiesLoaderUtils.loadProperties(resource);
    }
    catch (IOException ex) {
        throw new IllegalStateException("Could not load 'DispatcherServlet.properties': " + ex.getMessage());
    }
 } 
```

# python - python：如何处理时间戳（ISO8601）

> ID：11718909
> 
> 赞同：6
> 
> 时间：2012-07-30T09:43:15.727
> 
> 标签：python, timezone, timestamp

我必须在 python 中处理代表[iso8601](http://www.w3.org/TR/NOTE-datetime)时间戳的字符串。

因此，我的时间戳字符串采用以下形式：

```
timestamp = "2011-08-18T10:29:47+03:00" 
```

目前我正在使用python将它们转换为：

```
timestamp = timestamp[:-6]
timestamp = datetime.datetime.strptime(timestamp, "%Y-%m-%dT%H:%M:%S") 
```

但是这样我就丢失了有关时区的所有信息。我在这里看到了很多关于时间戳和 python 的例子，不幸的是没有人也保留时区，或者只是使用以下方法恢复时区延迟：

```
delay = timestamp[-6:] 
```

我也试过：

```
timestamp = "2011-08-18T10:29:47+03:00"
timestamp = datetime.datetime.strptime(timestamp, "%Y-%m-%dT%H:%M:%S%z") 
```

但它回来了

```
ValueError: 'z' is a bad directive in format '%Y-%m-%dT%H:%M:%S%z' 
```

你能提供一些见解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T09:47:24.727

[python iso8601](http://pypi.python.org/pypi/iso8601/)模块是用一个很棒的 parse_date 方法构建的，可以处理时区信息：

```
>>> import iso8601
>>> iso8601.parse_date("2007-01-25T12:00:00Z")
datetime.datetime(2007, 1, 25, 12, 0, tzinfo=<iso8601.iso8601.Utc ...>)

>>> iso8601.parse_date("2011-08-18T10:29:47+03:00")
datetime.datetime(2011, 8, 18, 10, 29, 47, tzinfo=<FixedOffset '+03:00'>) 
```

如果要将其转换为另一个时区，请使用[astimezone(tz)](http://docs.python.org/library/datetime.html?highlight=datetime#datetime.datetime.astimezone)方法

如果需要获取 UTC 日期时间，可以使用[utctimetuple()](http://docs.python.org/library/datetime.html?highlight=datetime#datetime.datetime.utctimetuple)方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:46:25.817

您需要添加一个提供时区支持的外部模块；该[`pytz`模块](http://pytz.sourceforge.net/)为您提供必要的时区数据库。

您要么需要手动解析时区以构造 pytz 时区，要么使用类似的包[`zc.iso8601`](https://pypi.python.org/pypi/zc.iso8601/)或[`iso8601`](https://pypi.python.org/pypi/iso8601/)为您进行解析：

```
from zc.iso8601.parse import datetimetz
datetimetz(timestamp) 
```

# google-apps-script - Google Apps 脚本 - 结合名字和姓氏来获取电子邮件

> ID：11718913
> 
> 赞同：0
> 
> 时间：2012-07-30T09:43:49.317
> 
> 标签：google-apps-script

我想在我的电子表格中组合名字和姓氏，并获得唯一的电子邮件 ID，并将其与 dot(.) 连接起来，例如 john.harris@unixxx.com

我也意识到，如果我要生成这个，一些同名的学生会有相同的电子邮件帐户，我该如何解决这个问题？有人可以帮忙提供一个代码来做到这一点。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:45:09.040

我有一个[电子表格](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dGlMNW9ZSnVJQVVSZHI2cThyNU9qRFE)用于此目的

它主要是法语，但这不应该成为问题，它非常基本且易于翻译。

# c++ - 用于 windows 操作系统的 strerror_r 的替代 api

> ID：11718915
> 
> 赞同：5
> 
> 时间：2012-07-30T09:43:51.267
> 
> 标签：c++, c, winapi, visual-c++, boost

我看到Visual C++ 2008 不再支持[strerror_r (...) API，可能是因为线程安全问题。](http://www.mkssoftware.com/docs/man3/strerror.3.asp)我想在我的程序中使用类似的功能。是否还有其他与 strerror_r(..) 功能相同的 winapi？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T10:22:09.587

你可以试试[strerror_s](http://msdn.microsoft.com/en-us/library/51sah927%28v=vs.80%29.aspx)。它似乎是线程安全的。

注意strerror_s的参数顺序与strerror_r不同。如果编写可移植代码，您可能需要使用定义

```
#define strerror_r(errno,buf,len) strerror_s(buf,len,errno) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-04T23:33:50.407

> 我看到 Visual C++ 2008 不再支持 strerror_r(...) API，可能是因为线程安全问题

我不相信它曾经得到支持。该链接指向 MKS Toolkit 而不是 Visual C++ 2008 的文档。 strerror_r 函数的存在是一个线程安全的 strerror。微软的 URL 有快速生锈的趋势，但今天，[https:](https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/strerror-strerror-wcserror-wcserror?view=vs-2019) //docs.microsoft.com/en-us/cpp/c-runtime-library/reference/strerror-strerror-wcserror-wcserror?view=vs- 2019 暗示vanilla strerror 在 Windows 上是线程安全的，具有：

> 所有这些函数都返回一个指向错误消息字符串的指针，该指针位于运行时拥有的线程本地存储缓冲区中。稍后对同一线程的调用可以覆盖此字符串。

所以没有必要在 Windows 上使用 strerror_r 。

# javascript - 修改checkbox的checked属性不能正常工作

> ID：11718916
> 
> 赞同：2
> 
> 时间：2012-07-30T09:43:51.683
> 
> 标签：javascript, ruby-on-rails, prototypejs, rjs

我有一个显示复选框的 rails 视图。当我单击复选框时，会在我的控制器中调用一个 rjs 函数，它会根据之前的状态检查或取消选中复选框。

在视图中：

```
<%= check_box_tag 'checkbox_test' %>

<%= observe_field 'checkbox_test',
  :url => { :action => :test_checkbox }
%> 
```

在控制器中：

```
def test_checkbox
  render :update do |page|
    page << "
      var checkBox = $('checkbox_test');
      checkBox.checked = !checkBox.checked;
    "
  end
end 
```

我第一次单击复选框时，一切正常，调用了该函数并更改了选中的属性。问题来了：如果我再次点击复选框，属性不会改变（但在视觉上复选框会改变......），因此不会调用函数“test_checkbox”。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:44:54.293

根本不要使用该属性。只需使用该`checked`属性。对于几乎所有属性和情况，这都是很好的建议。

```
var checkBox = $('checkbox_test');
checkBox.checked = !checkBox.checked; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:35:49.243

在我看来，您需要 $('checkbox_test')[0].checked 来测试检查性。

checked 属性是原生 DOM 的东西，不是 jQuery 的一部分。

# magento - 从 Magento 的“打印订单”中删除帐单信息

> ID：11718917
> 
> 赞同：0
> 
> 时间：2012-07-30T09:43:54.747
> 
> 标签：magento

尝试从您在 Magento 下订单后生成的“打印订单”中删除一些信息。在 Magento CE 1.6 中找不到可以更改它的模板。

有人可以指出我正确的模板文件吗？我已经查看过，`sales/orders/print.phtml`但我在那里所做的任何更改在前端都不可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:13:58.427

也许它会有所帮助，如果你`Template path hints`在 magento 中启用，它可以在后端下启用`System > Configuration > Advanced > Developer > Debug > Template Path Hints and/or Add Block Names to Hints`。通过这种方式，您可以看到哪些模板涉及创建您当前的一面。这应该将您指向打印订单的模板文件。

# macos - OS X Mountain Lion 电源断言

> ID：11718920
> 
> 赞同：4
> 
> 时间：2012-07-30T09:44:07.880
> 
> 标签：macos, assertions, osx-mountain-lion

我试图找到一些示例代码或示例或关于如何以编程方式在 OS X 上使用电源断言的良好文档。Mountain lion 似乎会在系统睡眠时杀死网络访问，因此 Apple 建议使用电源断言来保持系统唤醒并保持网络访问可用。修改电源断言的适当命令是 pmset，但是我没有找到任何有关如何使用它的示例。作为旁注，Snow Leo 和 Lion 似乎没有这个问题，所以我猜这一定是 Mountain Lion 引入的一些功率优化设置。任何关于如何以编程方式为应用程序设置电源断言的代码示例/示例/文档都将受到欢迎。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T11:53:52.263

回答我自己的问题:)。在做了一些阅读之后，我找到了实现这一目标的方法。IOKit 框架似乎为注册电源断言提供了支持。有关此地址的更多详细信息： [IOPMLib 库参考](https://developer.apple.com/library/mac/#documentation/IOKit/Reference/IOPMLib_header_reference/Reference/reference.html#//apple_ref/doc/uid/TP40012430)

# mysql - 程序错误

> ID：11718922
> 
> 赞同：0
> 
> 时间：2012-07-30T09:44:15.097
> 
> 标签：mysql, procedure

```
DELIMITER $$

CREATE PROCEDURE `SearchUserX`( IN columnName VARCHAR( 28 ) , IN search INT )
BEGIN
       DECLARE finished INT DEFAULT FALSE ;
       DECLARE tableName VARCHAR ( 28 ) ;
       DECLARE stmtFields TEXT ;

    DECLARE tableNames CURSOR FOR
              SELECT DISTINCT`TABLE_NAME` FROM `information_schema`.`COLUMNS`
              WHERE `COLUMN_NAME` = columnName AND TABLE_SCHEMA = 'comments' ORDER BY `ORDINAL_POSITION` ;
       DECLARE CONTINUE HANDLER FOR NOT FOUND SET finished = TRUE;
       SET stmtFields = '' ;
       OPEN tableNames;
       readTables: LOOP
              FETCH tableNames INTO tableName ;
              IF finished THEN
                     LEAVE readTables ;
              END IF;
              SET stmtFields = CONCAT(
                     stmtFields , IF ( LENGTH( stmtFields ) > 0 , ' AND' , ''  ) ,
                     ' `', tableName ,'`.`' , columnName , '`= ' , search ,'') ;
       END LOOP;
       SET @stmtQuery=CONCAT('SELECT * FROM `' , tableName , '` WHERE ' , stmtFields ) ;
       PREPARE stmt FROM @stmtQuery ;
       EXECUTE stmt ;
       CLOSE tableNames ;
END 
```

我有错误有人可以帮助我：

```
0   11:42:47    call SearchUserX('UserId',2)    Error Code: 1054\. Unknown column 'TabExample.UserId' in 'where clause' 
```

或者我在分句中的语法有问题`stmtFields`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:47:00.900

正如错误所说：

> “where 子句”中的未知列“TabExample.UserId”

您需要`UserId`在表中添加列`TabExample`。

# ruby-on-rails - ruby on rails - 使用 Sunspot 索引祖先记录

> ID：11718923
> 
> 赞同：0
> 
> 时间：2012-07-30T09:44:18.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3, solr

我正在尝试索引产品的祖先类别，以便使用 Sunspot 进行分面（和搜索，但如果我能解决一个问题，我会解决另一个问题）。该代码适用于直系父母，但我无法弄清楚如何索引祖父母......

在这个场景中，我使用 Ancestry gem 创建了一个类别树结构，每个产品都映射到树中的一个或多个叶节点。

我是 Rails 新手，所以语法对我来说有点陌生，但如果你看到 text:categories 循环，我试图基本上迭代产品的每个祖先并索引每个产品祖先的类别名称。

如果你能帮我修正语法或代码，那就太好了。

```
searchable do
    text :aux_description, :long_description, :name, :on_special, :part_number, :short_description
    text :categories do 

    categories.map { |category| category.name 
        Rails.logger.debug { "indexing category " + category.name }
        category.ancestors.each { |ancestor| ancestor.name
         Rails.logger.debug { "indexing category " + ancestor.name }}
      }
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:04:45.190

您传递给的块`text`需要返回一个字符串数组。因此，如果您只需要索引类别名称，这将起作用：

```
text :categories do
  categories.map { |category| category.name }
end 
```

如果您也需要索引每个类别的祖先，那么您可以使用一个临时变量并返回它。（块中的最后一条语句是“返回”值）。

```
text :categories do
  names = []
  categories.each { |category| names << category.name }
  categories.each { |category| category.ancestors.each { |ancestor| names << ancestor.name } if category.ancestors }
  names
end 
```

或者你可以消除局部变量：

```
text :categories do
  categories.map { |category| [category.name] + (category.ancestors ? category.ancestors.map { |ancestor| ancestor.name } : []) }.flatten
end 
```

小心在块的末尾添加日志语句，因为它会改变从该块返回的值。

# mysql - 使用 mysql 调用 JMS API

> ID：11718924
> 
> 赞同：0
> 
> 时间：2012-07-30T09:44:25.540
> 
> 标签：mysql, jms, openjms

我有一个在 windows 机器上使用 MySQL 5.5 db 的应用程序和在 linux 机器上运行的 JVM。当在其中一个表中插入值时，我想从 mysql 向 JVM 发送 JMS 消息。我已经看到我们可以使用 mysql 配置 openjms，但是，我们如何使用它来调用 JMS API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:04:33.477

Openjms 需要一个用于保存消息的基底——这就是 mysql 出现的地方——MySQL 没有调用 java/create 消息的功能。虽然原则上可以使用 mysql 直接插入消息队列，但这是一个非常糟糕的主意。

您需要实现一些代码（最有可能在 Java 中）来捕获事件并创建消息。

# iphone - 在 UISplitViewController 中以纵向隐藏 DetailViewController

> ID：11718926
> 
> 赞同：0
> 
> 时间：2012-07-30T09:44:30.357
> 
> 标签：iphone, ios, xcode, uisplitviewcontroller

我想知道是否可以为 UISplitController 模板 ipad 示例以纵向隐藏 DetailViewController，并让 MasterViewController 在纵向全屏中使用，当方向更改为横向时使用普通 UISplitViewController 视图，左侧为 masterview和右侧的详细视图...有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:20:11.353

苹果的 UISplitViewController 被赋予了一个非常具体的行为，不能这样定制......

在我的公司，我们必须实现我们自己的 SplitViewController - 我们的目的是在纵向时处理“masterViewController”的不同显示，横向时两个控制器的不同尺寸（比 UISplitViewController 允许的尺寸），以及不同的处理方式'masterViewController' 纵向显示 -

这种繁重的自定义导致我们处理有关包含其他 UIViewControllers 的 UIViewController 的各种问题 - （在 iOS 5 之前，Apple 不支持 UIViewControllers 包含！请参阅[Github 上的 CoconutKit](https://github.com/defagos/CoconutKit/tree/master/CoconutKit/Sources/ViewControllers)或[此示例](http://www.merowing.info/2012/02/uiviewcontroller-containment/)以获取解决方法示例...）。

对于您的特定需求，这是[Matt Gemmell 自己实现自定义 SplitViewController 的尝试，](http://mattgemmell.com/2010/07/31/mgsplitviewcontroller-for-ipad/)非常好，您仍然可以分叉代码以使其适合您自己的需求。

# c# - 生成的列类型

> ID：11718927
> 
> 赞同：1
> 
> 时间：2012-07-30T09:44:40.067
> 
> 标签：c#, wpf, datagrid

您好我正在使用 WPFToolkit 的 Datagrid 控件。我可以填充数据网格。对于我的一些专栏

使用 DataGridTextColumn 和 DataGridComboBoxColumn。

现在我想添加一个新列（子图）。在这个 Column 里面会有一个 Button

一些行，如果我单击按钮，它应该打开一个新的 tabItem 与相应的

特定行的信息。

那么我应该在我的 XAML 中将此列定义为 DataGridTextColumn 还是 DataGridHyperlinkColumn？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:01:07.650

我会使用 DataGridTemplate 列而不是其他列并指定一个模板。您可以通过触发器处理的可见性。取决于你的逻辑

```
<toolkit:DataGridTemplateColumn Header="Timer" Width="50">
                <toolkit:DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button Content="Start" Click="Button_Click" CommandParameter="{Binding}" />
                    </DataTemplate>
                </toolkit:DataGridTemplateColumn.CellTemplate>
            </toolkit:DataGridTemplateColumn> 
```

# php - 新的 php 用户--试图在测试环境中打开 .php 文件

> ID：11718928
> 
> 赞同：0
> 
> 时间：2012-07-30T09:44:43.290
> 
> 标签：php

使用 mac OS，安装 MAMP。一切似乎都运行良好。在 htdocs 文件夹中创建了一个 PHP 文件，尝试用 Firefox 打开它，但无法识别 PHP 文件。问我想用哪个程序打开文件，当我选择firefox时，出现空白屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:53:45.590

对于 Mac 和 MAMP，地址栏中的路径应为：

`http://localhost:8888/folder_name/your_page_name.php`

此外，这将帮助您正确配置 MAMP

[http://sawmac.com/mamp/](http://sawmac.com/mamp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:36:16.837

尽管mamp的所有错误配置，用firefox打开文件必须显示上面写的东西，所以请显示你在那里写的代码，如Dan和DarkXphenomenon所说

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T09:47:20.770

通过在浏览器中键入打开它，`localhost/path/to/your/file.php`然后 MAMP（假设一切正常）将解析文件并返回请求的输出。

# salesforce - 检索用户喜欢的帖子中发生的更改 - Salesforce chatter

> ID：11718933
> 
> 赞同：0
> 
> 时间：2012-07-30T09:44:55.177
> 
> 标签：salesforce, salesforce-chatter

我想检索用户使用 Chatter REST api 喜欢的帖子中发生的更改。我知道可以通过检索当前用户的喜欢并浏览每个帖子进行任何更改来做到这一点。但这会让我很容易达到 api 速率限制。

有没有其他方法可以做到这一点。

# php - 使用数据库列表项检查列表框中的列表项

> ID：11718936
> 
> 赞同：0
> 
> 时间：2012-07-30T09:44:59.640
> 
> 标签：php, mysql

我需要这方面的帮助，并且在思考如何做到这一点时感到非常困惑。

我有一个表单，一个更新/编辑表单，里面有一个多选列表框。

在我的数据库记录中：

```
ID Items
1  Apple
2  Banana
3  Orange
4  Pear
5  Starfruit 
```

每当用户点击编辑时，他们就会进入这个表单，在这个表单中，我根据他们之前保存的数据突出显示了列表框。

当用户单击更新时，更新表单中的列表框将如下所示：

```
<option selected>Apple</option> <-- highlighted
<option>Banana</option>
<option selected>Orange</option> <-- highlighted
<option>Pear</option>
<option selected>Starfruit</option> <-- highlighted 
```

这是用户将根据他们之前保存的第一个选择的项目看到的内容。

目前我正在对其进行硬编码：

```
<?php
$select=mysql_query("select * from products_list where id='$id' "); 
while($row=mysql_fetch_array($select)){

$product_category = explode("\n", $row['category']);
$i=0;

    echo '<select name="product_category[]" id="category" size="9" multiple="multiple"><option value="Black" ';
if ($product_category[$i] == "Black" ){ echo 'selected="selected"'; $i++; }
echo '>Black</option><option value="White" ';
if ($product_category[$i] == "White" ){ echo 'selected="selected"'; $i++; }
echo '>Black</option><option value="Blue" ';
if ($product_category[$i] == "Blue" ){ echo 'selected="selected"'; $i++; }
echo '>Black</option>';
}
?> 
```

依此类推。我只列举几个。所以我想问有没有办法可以做到这一点，如果我的列表框选项没有硬编码？

希望大家理解。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:00:57.057

如果我误解了你和你的代码，我很抱歉，但我认为这是你想要做的：

```
<?php
$select=mysql_query("select * from products_list where id='$id' ");

// Insert the categories in an array in order
$categories = array('Black', 'White', 'Blue', ...);

while($row=mysql_fetch_array($select))
{
    $product_category = explode("\n", $row['category']);

    echo '<select name="product_category[]" id="category" size="9" multiple="multiple">';

    foreach($product_category as $i=>$value)
    {
        echo '<option value="'.$categories[$i].'"';

        if($value == $categories[$i])
        {
            echo ' selected="selected"';
        }

        echo '>'.$categories[$i].'</option>';
    }

    echo '</select>';
} 
```

# regex - 仅当两者都存在时，才从字符串的开头和结尾删除引号

> ID：11718938
> 
> 赞同：5
> 
> 时间：2012-07-30T09:45:00.730
> 
> 标签：regex, r, stringr

我想清理一个包含转义引号的字符串。我想删除字符串的结尾和开头的转义引号，但保留字符串中的所有引号。我想出的是以下内容。

```
library(stringr)
s1 <- "\"He said:\"Hello\" - some word\""
str_replace_all(s1, "(^\\\")|(\\\"$)", "")

> [1] "He said:\"Hello\" - some word" 
```

我现在正在苦苦挣扎的是，我只想删除引号，当且仅当开头和结尾都有一个引号时。否则不是。以下表达式错误地删除了前导表达式。

```
s2 <- "\"Hello!\" he said"
str_replace_all(s2, "(^\\\")|(\\\"$)", "")

> [1] "Hello!\" he said" 
```

在这里，我的正则表达式应该表明我只想在整个字符串被转义引号包裹的情况下删除它们。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T09:54:33.303

以下正则表达式似乎适用于您的示例：

```
s <- c("\"He said:\"Hello\" - some word\"", "\"Hello!\" he said") 
```

正则表达式使用反向引用 ( `\\1`) 仅返回前导引号`^\"`和尾引号内的字符串`\"$`：

```
r <- gsub("^\"(.*)\"$", "\\1", s) 
```

这导致：

```
cat(r, sep="\n")
He said:"Hello" - some word
"Hello!" he said 
```

# java - 有没有办法配置 MySQL 连接器 J 驱动程序以将空字符串作为 0 插入十进制/整数字段？

> ID：11718943
> 
> 赞同：1
> 
> 时间：2012-07-30T09:45:34.020
> 
> 标签：java, mysql, database, jdbc

我需要将公司的数据库遗留系统从 MySQL 4.1 版升级到 5.5 版，我目前发现如果我通过 java 程序将空字符串插入十进制/整数字段，它会抛出异常但是如果我编写相同的语句并插入它直接通过mysql命令行记录将被正常插入（空字段将变为0），所以这让我认为jdbc驱动程序有问题，驱动程序是否在将其传递给db之前对语句执行了一些规则？我真的不想重写旧程序来支持这种变化。

提前谢谢你的回答:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:56:33.657

您可以分配值 null 而不是空字符串。

您正在更改数据库版本，以便所有代码都可以支持。所以你必须改变

# ios - iOS SQLite：如何自动设置外键？

> ID：11718944
> 
> 赞同：2
> 
> 时间：2012-07-30T09:45:36.970
> 
> 标签：ios, sqlite, foreign-keys, auto-increment

我的应用程序使用 SQLite，并且我已经整理了创建表语句。这个想法是表 A 和 B 具有一对多（或一个）关系，因此外键将在表 B 中。现在我知道用于创建主键的自动增量，但是这将如何用于外键? 如果我为表 A 添加一行，为表 B 添加 5 行（理想情况下，所有这些都链接到表 A 中的那一行）怎么办？它不会只是从表 B 中的 001-005 自动递增吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T16:39:39.153

是的，如果 A 和 B 之间是一对多的，并且当您在 B 中添加记录时，您将自动增加 B 的主键，但不会自动增加 A 的外键（假设您将其设置`INTEGER`为没有的普通旧键`AUTOINCREMENT`）。给定您的示例，是的，B 将有 5 条记录 1-5，它们都指向 A 中的记录 1。因此，当您在 A 中添加记录时，您可以通过 FMDB `lastInsertRowId`（或 sqlite 的`sqlite3_last_insert_rowid()`）获取其 ID，并将其存储在一个变量，然后在 B 中填充外键时使用它。因此，简而言之，您不会“自动”设置外键，而是手动设置，但这并不难。

在如何配置表格方面，如果我们看一个作者和书籍之间的一对多关系的例子可能会有所帮助（忽略共同作者的可能性，但关注一个作者可以写多本书的事实） . 因此，您有两个实体，一个`author`(A) 实体和一个`book`(B) 实体。是`book.book_author_id`一个外键引用`author.author_id`。

因此，看起来像：

```
CREATE TABLE author
(
    author_id INTEGER PRIMARY KEY AUTOINCREMENT,
    author_last_name TEXT,
    author_first_name TEXT
);

CREATE TABLE book
(
    book_id INTEGER PRIMARY KEY AUTOINCREMENT,
    title TEXT,
    book_author_id INTEGER,
    FOREIGN KEY (book_author_id) REFERENCES author (author_id)
);

INSERT INTO author (author_last_name, author_first_name) VALUES ('William', 'Shakespeare');

INSERT INTO book (title, book_author_id) VALUES ('Hamlet', 1);
INSERT INTO book (title, book_author_id) VALUES ('Macbeth', 1);
INSERT INTO book (title, book_author_id) VALUES ('Othello', 1);
INSERT INTO book (title, book_author_id) VALUES ('King Lear', 1);
INSERT INTO book (title, book_author_id) VALUES ('Henry V', 1); 
```

如果我们查看结果，它看起来像：

```
$ sqlite3 test.db
SQLite version 3.7.12 2012-04-03 19:43:07
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> .mode column
sqlite> .headers on
sqlite> 
sqlite> CREATE TABLE author
   ...> (
   ...>     author_id INTEGER PRIMARY KEY AUTOINCREMENT,
   ...>     author_last_name TEXT,
   ...>     author_first_name TEXT
   ...> );
sqlite> 
sqlite> CREATE TABLE book
   ...> (
   ...>     book_id INTEGER PRIMARY KEY AUTOINCREMENT,
   ...>     title TEXT,
   ...>     book_author_id INTEGER,
   ...>     FOREIGN KEY (book_author_id) REFERENCES author (author_id)
   ...> );
sqlite> 
sqlite> INSERT INTO author (author_last_name, author_first_name) VALUES ('William', 'Shakespeare');
sqlite> 
sqlite> SELECT * FROM author;
author_id   author_last_name  author_first_name
----------  ----------------  -----------------
1           William           Shakespeare      
sqlite> 
sqlite> INSERT INTO book (title, book_author_id) VALUES ('Hamlet', 1);
sqlite> INSERT INTO book (title, book_author_id) VALUES ('Macbeth', 1);
sqlite> INSERT INTO book (title, book_author_id) VALUES ('Othello', 1);
sqlite> INSERT INTO book (title, book_author_id) VALUES ('King Lear', 1);
sqlite> INSERT INTO book (title, book_author_id) VALUES ('Henry V', 1);
sqlite> 
sqlite> SELECT * FROM book;
book_id     title       book_author_id
----------  ----------  --------------
1           Hamlet      1             
2           Macbeth     1             
3           Othello     1             
4           King Lear   1             
5           Henry V     1             
sqlite> .quit 
```

或者，如果您想以编程方式执行此操作（我正在使用[FMDB](https://github.com/ccgus/fmdb)，这使得这变得更简单，但如果您正在执行自己的 sqlite3 调用，显然相同的逻辑可以工作，但它只需要更多代码）：

```
- (void)createAuthorTable
{
    BOOL result = [_db executeUpdate:
                     @"CREATE TABLE IF NOT EXISTS author "
                      "("
                          "author_id INTEGER PRIMARY KEY AUTOINCREMENT, "
                          "author_last_name TEXT, "
                          "author_first_name TEXT "
                      ");"];
    NSAssert(result, @"%s - Unable to create author table", __FUNCTION__);
}

- (void)createBookTable
{
    BOOL result = [_db executeUpdate:
                     @"CREATE TABLE IF NOT EXISTS book "
                      "("
                          "book_id INTEGER PRIMARY KEY AUTOINCREMENT, "
                          "title TEXT, "
                          "book_author_id INTEGER, "
                          "FOREIGN KEY (book_author_id) REFERENCES author (author_id) "
                      ");"];
    NSAssert(result, @"%s - Unable to create book table", __FUNCTION__);
}

- (sqlite_int64)createAuthorWithFirstName:(NSString *)firstName lastName:(NSString *)lastName
{
    BOOL result = [_db executeUpdate:@"INSERT INTO author (author_first_name, author_last_name) VALUES (?, ?)", firstName, lastName];
    NSAssert(result, @"%s - Unable to insert author record", __FUNCTION__);

    return [_db lastInsertRowId];
}

- (sqlite_int64)createBookWithTitle:(NSString *)title authorId:(sqlite_int64)authorId
{
    BOOL result = [_db executeUpdate:@"INSERT INTO book (title, book_author_id) VALUES (?, ?)", title, [NSNumber numberWithInt:authorId]];
    NSAssert(result, @"%s - Unable to insert book record", __FUNCTION__);

    return [_db lastInsertRowId];
}

- (void)testInsert
{
    [self openDatabase];

    NSArray *bookTitles = [NSArray arrayWithObjects:@"Hamlet", @"Macbeth", @"Othello", @"King Lear", @"Henry V", nil];
    [self createAuthorTable];
    [self createBookTable];

    sqlite_int64 authorId = [self createAuthorWithFirstName:@"William" lastName:@"Shakespeare"];

    sqlite_int64 bookId;
    for (NSString *bookTitle in bookTitles)
        bookId = [self createBookWithTitle:bookTitle authorId:authorId];

    [self closeDatabase];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T05:30:31.070

但在设置外键之前，您必须先将其打开。而是先这样做，

```
PRAGMA foreign_keys=ON; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T18:14:51.457

具有外键约束的列通常不是自动递增值，而是引用另一个表中的（预先存在的）键值。因此，如果您的 AUTHORS 表有一个自动递增的整数主键，那么您的 TITLES.AuthorID 列将只是一个没有自动递增功能的整数。

顺便说一句，整数值*没有*前导零：`001-005`- 这通常意味着必须用 text/varchar 数据类型表示的零填充。

# mysql - 最后插入字段的 ID

> ID：11718949
> 
> 赞同：1
> 
> 时间：2012-07-30T09:46:29.827
> 
> 标签：mysql

我有一个表 DEVICEDETAILS，其主键是 DEVICEID。我想获取最后插入的字段的 ID。last_insert_id() 不起作用，因为主键不是 AUTO_INCREMENT。

在此先感谢 Stack Overflow 的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:48:58.967

真的。它不适用于非自动递增的主键。这个怎么样？

```
SELECT MAX(DeviceID) FROM DeviceDetails 
```

**或者**

你`DeviceID`插入了什么？`:-)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:48:59.980

如果主键不是`AUTO_INCREMENT`，那么您应该知道您插入的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T09:49:59.780

因此，如果它不是 auto_increment，我假设您刚刚使用 deviceid 插入了记录，所以您肯定已经知道了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T09:51:25.433

```
mysql_insert_id() 
```

[http://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html](http://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html)

# javascript - jQuery.Data 设置或获取错误项目

> ID：11718950
> 
> 赞同：0
> 
> 时间：2012-07-30T09:46:31.107
> 
> 标签：javascript, jquery, selector

我正在使用与此类似的东西：

```
$("input").each(function(number,element)
{
    var inputField=$(element);

    if(inputField.data("FieldLocalizationStrings") == null)
        inputField.data("FieldLocalizationStrings", []);
} 
```

并添加数据：

```
var data=inputField.data("FieldLocalizationStrings");
data.push({Language:inputField.attr("language"),Value:inputField.val()}); 
```

但是当我尝试检索时，它似乎忽略了它保存在哪个 DOM 元素上，只是加载它，就像它都保存在同一个元素上一样。有人知道为什么会发生这种情况吗？我以前使用过同样的技术，它被证明是有效的，但现在我不知道为什么会这样。我确认它不会将其保存到多个输入字段中，但是在加载时它的行为就像它一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:49:50.077

**更新**
在这里 添加[了一个小提琴](http://jsfiddle.net/yQJNd/)

```
$("input").each(function(number,element)
{
    var inputField=$(element);

    if(inputField.data("FieldLocalizationStrings") == null)
        inputField.data("FieldLocalizationStrings", [
            {
                Language:inputField.attr("language"),
                Value:inputField.val()
            }
    ]);

    //If later you want to append to the data
    inputField.data("FieldLocalizationStrings").push({/* Your data */})
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:54:08.587

[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/) - 至于文档，您将获得作为第二个参数的值。如果你想为一个元素设置数据，你应该使用它。

# less - 在 Windows 上使用 lessc

> ID：11718952
> 
> 赞同：1
> 
> 时间：2012-07-30T09:46:34.803
> 
> 标签：less, therubyracer

我一直在尝试研究如何在 Windows 7 上安装 lesscss.org，这样我就可以从 cygwin 命令行界面使用它，也可以使用 Maven。

我们以这种方式运行 SASS，但需要在新项目中使用 LESS。

到目前为止我的步骤...

1.  检查 Ruby 已安装，我已将其安装在 C:\Ruby193
2.  下载[了 Ruby DevKit](https://github.com/oneclick/rubyinstaller/wiki/Development-Kit)并按照这个来安装它。
3.  在 CMD.exe，执行`gem install less`- 1 gem installed ... less-2.2.1
4.  CMD.exe，运行`lessc`- 这给出 [警告] 请安装 gem 'therubyracer' 以使用 Less。
5.  所以在 CMD.exe 我尝试`gem install therubyracer`给出这个错误......

错误：

> 安装 therubyracer 时出错：错误：无法构建 gem 原生扩展。

完整的错误在[这里](http://pastebin.com/f1pUjXYn)

6.这就是我卡住的地方，因为`lessc`仍然抱怨没有安装rubyracer。我还安装了 Python27 并将其添加到 Path 变量中，因为它出现在上一个错误中。

我可以确认我有这条`C:\Ruby193\lib\ruby\gems\1.9.1\gems\therubyracer-0.10.1`对我来说看起来像一个项目的路径，但显然有问题。

我还发现这是在 Windows 上获得 LESS 的潜在答案，但这表明我们无法运行本机“真实”版本，因此 Mac、Windows 和 Ubuntu 都可以使用相同的开关/环境？github.com/duncansmart/less.js-windows

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T08:12:38.540

正如其他人提到的，这现在很容易用节点完成：

`npm install -g less`

这将安装 less 作为全局模块，您可以通过键入以下命令从命令行的任何位置使用：

`lessc input-file.less output-file.css`

一个更简单的方法是使用像 SimpleLess 这样的工具，它会自动为你编译和缩小你的 LESS：

[http://wearekiss.com/simpless](http://wearekiss.com/simpless)

快乐编码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-22T20:37:43.357

也许您在通过以下方式成功安装节点模块时遇到了同样的问题：

```
npm install -g less 
```

但是在尝试运行lessc时，您会收到错误消息：

```
[WARNING] Please install gem 'therubyracer' to use Less. 
```

我认为这是因为，尽管您已经安装了 node 模块，但 lessc 命令仍然与 ruby​​ gem 相关联。尝试卸载 less gem：

```
gem uninstall less 
```

然后尝试再次运行lessc。

# html - 如何使用 lang 指定输入按钮的语言？

> ID：11718956
> 
> 赞同：2
> 
> 时间：2012-07-30T09:46:52.080
> 
> 标签：html, text, input, submit, lang

我在瑞典语 Win7 上的英文网站上获得了瑞典语“发送”按钮。我的英语用户可能甚至不会注意到，一旦它被上传，但圣诞老人知道它并保留了我什么时候做坏事的清单。所以我去添加“lang”属性如下。

```
<input id="submit" type="submit" lang="en" /> 
```

你猜怎么着，它仍然以瑞典语显示。为什么？！以及如何强制所需的文本？

我应该明确指定要显示的字符串吗？我更愿意在给定当前（或由我指定）语言的情况下设置文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T11:42:13.787

正如@Chris 解释的那样，`lang`属性是声明性的：它告诉元素的内容和属性是什么语言，而不是翻译任何东西。

您可以并且通常应该使用属性设置要在提交按钮中显示的文本`value`，例如`<input id="submit" type="submit" value="Send" />`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T10:00:02.533

该`lang`属性不用于强制翻译文本。它是提供元数据的通用属性（[http://www.w3.org/TR/html401/struct/dirlang.html#adef-lang](http://www.w3.org/TR/html401/struct/dirlang.html#adef-lang)）。

理论上，浏览器可以在某些情况下使用它来进行翻译，但我认为它从来没有这样做过。您提交按钮的语言更可能与您的计算机或浏览器的安装语言或类似的语言有关。

如果您的网站通常是多语言的，那么我建议使用相同的翻译代码来明确翻译。如果它不是多语言的，那么让浏览器/用户担心它。

# java - 如何可靠地给 Java 更多内存？

> ID：11718959
> 
> 赞同：3
> 
> 时间：2012-07-30T09:47:03.403
> 
> 标签：java, memory

对于特定的 java 程序，我需要比标准数量更多的内存，但我不能使用命令行来获取更多，因为它使用了启动器。

我尝试在 Java 控制面板的运行时参数中添加“-Xms1024m -Xmx1024m”，这一次有效，但下次我启动程序时，内存又回到了低默认值。我怎样才能可靠地为这个程序获得更多内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T09:59:07.183

大多数启动器（至少我看到的那些）都为您提供了应用 jvm 参数的选项。您可以在此处添加您的`-Xms1024m -Xmx1024m`. 例如在[Launch4J](http://launch4j.sourceforge.net/)中，您可以这样设置：

![Launch4J JRE 设置](../Images/0ece50305536033ded44a8b297824a23.png)

您可以在底部看到，您也可以输入自己的参数，尽管内存内容已经作为单独的选项提供。我敢打赌您的启动器应用程序也可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T12:17:36.420

.exe 启动器似乎反过来更新并启动 .jar 启动器。我通过简单地将内存参数添加到命令行命令来启动 .jar 启动器来解决了这个问题。它不会以这种方式自动更新启动器，但它已经足够好了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T10:12:53.387

为什么不编写一个简单的 java 进程来引导你的主进程呢？

所以启动器启动进程 A，然后启动进程 B 并使用您需要的参数？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T10:00:29.167

在您的启动器的某处，有一个类似于此的函数调用......

```
 JNIEnv* create_vm(JavaVM ** jvm)
 {

JNIEnv *env;
JavaVMInitArgs vm_args;
JavaVMOption options;
strcpy(options.optionString, CLASSPATH); //fix for options.optionString = CLASSPATH;
if (DEBUG) printf("optionString = %s\n", options.optionString); 
vm_args.version = JNI_VERSION_1_6; //JDK version. This indicates version 1.6
vm_args.nOptions = 1;
vm_args.options = &options;
vm_args.ignoreUnrecognized = 0;

int ret = JNI_CreateJavaVM(jvm, (void**) &env, &vm_args);
if (ret < 0) printf("\n<<<<< Unable to Launch JVM >>>>>\n");
return env;
} 
```

正确的？如果是这种情况，只需将这些选项添加到 optionsString。

听起来您要么对其进行硬编码，要么为设置此类属性的启动器提供一个 .config 文件。但更改肯定会转到启动器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T10:09:33.400

如果您无法控制启动器，则必须创建自己的 Java 启动器。

您当前的启动器可以启动 JAR，并且可以使用正确的 JVM 参数再次启动 JAR。即一个 JAR 可以使用 Runtime.exec() 来运行它自己（相同的主或不同的），并带有运行程序所需的参数。

AFAIK，您不能使用控制面板通过命令行控制 java 运行。如果它现在不起作用，我怀疑它从未真正起作用，也许它不起作用并不重要。

# perl - Perl 将文本文件分割成块

> ID：11718967
> 
> 赞同：3
> 
> 时间：2012-07-30T09:47:21.890
> 
> 标签：perl

我有一个由数千篇文章组成的大型 txt 文件，我正在尝试将其拆分为单独的文件 - 我想保存为 article_1、article_2 等的每篇文章都有一个文件。每篇文章都以包含单词/文档/。我对 perl 完全陌生，任何见解都会很棒！（甚至是好的文档网站上的建议）。非常感谢。到目前为止，我尝试过的看起来像：

```
#!/usr/bin/perl
use warnings;
use strict;

my $id = 0;
my $source = "2010_FTOL_GRbis.txt";
my $destination = "file$id.txt";

open IN, $source or die "can t read $source: $!\n";

while (<IN>)
  {
    {  
      open OUT, ">$destination" or die "can t write $destination: $!\n";
      if (/DOCUMENTS/)
       {
         close OUT ;
         $id++;
       }
    }
  }
close IN; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T13:00:04.683

假设它`/DOCUMENTS/`单独出现在一条线上。因此，您可以将其*设为记录*分隔符。

```
use English     qw<$RS>;
use File::Slurp qw<write_file>;
my $id     = 0;
my $source = "2010_FTOL_GRbis.txt";

{   local $RS = "\n/DOCUMENTS/\n";
    open my $in, $source or die "can t read $source: $!\n";
    while ( <$in> ) { 
        chomp; # removes the line "\n/DOCUMENTS/\n"
        write_file( 'file' . ( ++$id ) . '.txt', $_ );
    }
    # being scoped by the surrounding brackets (my "local block"),
    close $in;    # an explicit close is not necessary
} 
```

**笔记：**

*   `use English`声明全局变量`$RS`。它的“杂乱名称”是`$/`. 看[`perldoc perlvar`](http://perldoc.perl.org/perlvar.html#%24RS)
*   行分隔符是*默认的* ***记录***分隔符。即文件读取的标准单位是一条*记录*。*默认情况下*，这只是一条“线”。
*   正如您将在链接文档中发现的那样，$RS 只接受文字字符串。因此，利用文章之间的划分`'/DOCUMENTS/'`完全在一条线上的想法，我指定了`newline + '/DOCUMENTS/' + newline`. 如果这是行中某处发生的路径的一部分，则该特定值将不适用于记录分隔符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T10:02:05.543

你读过[*Perl 编程*](http://oreilly.com/catalog/9780596004927)吗？这是最好的开始书！

我不明白你想做什么。我假设您有包含文章的文本，并希望将所有文章放在单独的文件中。

```
use warnings;
use strict;
use autodie qw(:all);

my $id          = 0;
my $source      = "2010_FTOL_GRbis.txt";
my $destination = "file$id.txt";

open my $IN, '<', $source;
#open first file
open my $OUT, '>', $destination;

while (<$IN>) {
    chomp;    # kill \n at the end
    if ($_ eq '/DOCUMENTS/') {  # not sure, am i right here or what you looking for
        close OUT;
        $id++;
        $destination = "file$id.txt";
        open my $OUT, '>', $destination;
    } else {
        print {$OUT} $_, "\n";     # print into file with $id name (as you open above)
    }
}
close $IN; 
```

# android - 如何使用新的 Google Analytics for mobile (v2) 分析 Android 服务任务

> ID：11718974
> 
> 赞同：1
> 
> 时间：2012-07-30T09:47:48.000
> 
> 标签：android, google-analytics, android-service

我**没有**前台活动——只有后台[服务](http://developer.android.com/reference/android/app/Service.html)（一种保持活动状态的服务）。

如何使用[新的分析 SDK](https://developers.google.com/analytics/devguides/collection/android/v2/)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T04:40:59.357

看看 SiFEUP 移动客户端中的这两个类。他们提供了一个很好的例子来管理单个线程以进行跟踪调用，以及会话管理。您应该能够为您的服务使用[AnalyticsUtils](http://code.google.com/p/sifeup-mobile/source/browse/SiFEUPMobile/src/pt/up/beta/mobile/tracker/AnalyticsUtils.java)类。

[http://code.google.com/p/sifeup-mobile/source/browse/SiFEUPMobile/src/pt/up/beta/mobile/tracker/](http://code.google.com/p/sifeup-mobile/source/browse/SiFEUPMobile/src/pt/up/beta/mobile/tracker/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:03:46.000

在`onCreate()`您的服务方法上，您可以尝试：

```
EasyTracker.getInstance().setContext(this); 
```

这样，您可以在 Activity 之外使用 EasyTracker。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-30T18:10:07.527

您可以使用新的谷歌分析来做到这一点。

```
GoogleAnalytics GaInstance = GoogleAnalytics.getInstance(mContext);
Tracker tracker = GaInstance.getTracker("UA-XXXX-Y");
tracker.send(new HitBuilders.EventBuilder()
        .setCategory(categoryId) // string value of Category name
        .setAction(actionId)     // string value of action name
        .setLabel(labelId)      // string value of  label name
        .build()); 
```

# html - 如何使宽度未知的元素居中？

> ID：11718975
> 
> 赞同：0
> 
> 时间：2012-07-30T09:47:58.640
> 
> 标签：html, css, width, center, responsive-design

目前我正在编写响应式设计。因此，代码中有几个元素设置为相对或未知宽度。

在这种特殊情况下，我有一个 section-element 用于寻呼机在未知数量的页面之间切换。所以它的宽度是不确定的。

由于布局原因，分页器必须放置在由相对宽度定义的父元素的水平中心。

我知道如何以绝对和相对宽度居中元素，但在这种情况下我有点无助。我也在这里搜索并找到了一些帖子，但我找不到可以正常工作的解决方案。

你有什么想法？

代码：

```
<section class="pager">
    <ul>
        <li><a href=""><span>&laquo;<span> previous</span></span></a></li>
        <li><a href="" class="active"><span>1</span></a></li>
        <li><a href=""><span>2</span></a></li>
        <li><a href=""><span>3</span></a></li>
        <li><a href=""><span>4</span></a></li>
        <li><a href=""><span>5</span></a></li>
        <li><a href=""><span>6</span></a></li>
        <li><a href=""><span>7</span></a></li>
        <li><a href=""><span>8</span></a></li>
        <li><a href=""><span>9</span></a></li>
        <li>...</li>
        <li><a href=""><span>540</span></a></li>        
        <li><a href=""><span>541</span></a></li>
        <li><a href=""><span><span>next </span>&raquo;</span></a></li>
    </ul>
</section> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:53:55.610

你试过这个吗？

```
.pager{display:block;width:100%;min-width:200px;margin:0 auto;text-align:center} 
```

min-width 值是一个示例，您可以为每个分辨率调整 min-width

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:46:24.310

看看这个小提琴，看看这是否有帮助：

[http://jsfiddle.net/qQEQ6/](http://jsfiddle.net/qQEQ6/)

# sonarqube - Sonar 和 C#：guava-10.0.1.jar 的下载因超时而失败

> ID：11718979
> 
> 赞同：1
> 
> 时间：2012-07-30T09:48:35.357
> 
> 标签：sonarqube

我们将 Sonar 设置为在单独的服务器上运行。确实如此，并且客户端应用程序（声纳运行器）可以成功连接到它。但是，运行中断，但出现以下异常：

```
Runner configuration file: C:\Program Files (x86)\sonar-runner-1.3\bin\..\conf\sonar-runner.properties
Project configuration file: C:\project\subproject\sonar-project.properties
Runner version: 1.3
Java version: 1.6.0_33, vendor: Sun Microsystems Inc.
OS name: "Windows 7", version: "6.1", arch: "x86"
Server: http://<serverip>:80
Work directory: C:\project\subproject\.sonar
Total time: 1:30.902s
Final Memory: 0M/15M
Exception in thread "main" org.sonar.batch.bootstrapper.BootstrapException: org.sonar.batch.bootstrapper.BootstrapException: Fail to download the file: http://<serverip>:80/batch/guava-10.0.1.jar
        at org.sonar.batch.bootstrapper.Bootstrapper.downloadBatchFiles(Bootstrapper.java:164)
        at org.sonar.batch.bootstrapper.Bootstrapper.createClassLoader(Bootstrapper.java:87)
        at org.sonar.runner.Runner.createClassLoader(Runner.java:155)
        at org.sonar.runner.Runner.execute(Runner.java:78)
        at org.sonar.runner.Main.main(Main.java:61)
Caused by: org.sonar.batch.bootstrapper.BootstrapException: Fail to download the file: http://<serverip>:80/batch/guava-10.0.1.jar
        at org.sonar.batch.bootstrapper.Bootstrapper.remoteContentToFile(Bootstrapper.java:113)
        at org.sonar.batch.bootstrapper.Bootstrapper.downloadBatchFiles(Bootstrapper.java:159)
        ... 4 more
Caused by: java.net.SocketTimeoutException: Read timed out
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.io.BufferedInputStream.fill(Unknown Source)
        at java.io.BufferedInputStream.read1(Unknown Source)
        at java.io.BufferedInputStream.read(Unknown Source)
        at sun.net.www.http.ChunkedInputStream.readAheadBlocking(Unknown Source)

        at sun.net.www.http.ChunkedInputStream.readAhead(Unknown Source)
        at sun.net.www.http.ChunkedInputStream.read(Unknown Source)
        at java.io.FilterInputStream.read(Unknown Source)
        at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(Unknown Source)
        at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(Unknown Source)
        at org.sonar.batch.bootstrapper.BootstrapperIOUtils.copyLarge(BootstrapperIOUtils.java:63)
        at org.sonar.batch.bootstrapper.Bootstrapper.remoteContentToFile(Bootstrapper.java:109)
        ... 5 more 
```

我可以用普通浏览器重现这个。检索文件会打开下载管理器，但是，文件最终下载最多需要 5 分钟（它只有 1.5 兆）。由 sonar-runner 或使用浏览器检索的其他文件没有此问题。

声纳测井似乎不知道有问题。下载不会记录在 sonar.log 文件中，无论是成功的还是不成功的。syslog 不包含任何问题提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T20:58:16.693

sonar+php 插件和 eset 智能安全有类似的问题。必须在过滤协议部分禁用对 127.0.0.1 的过滤。它随机发生在不同的罐子上。它发生在太阳能蚂蚁任务和太阳能跑步者身上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:38:12.743

因此，解决方案不是服务器上的问题，而是客户端问题。Kaspersky Endpoint Security 似乎有一个错误/功能，它需要扫描通过网络传输的所有内容，并且不知何故，这个 JAR 文件在文件被扫描时触发了数分钟的延迟。

# c# - FormsAuthentication.SignOut() 不起作用

> ID：11718980
> 
> 赞同：6
> 
> 时间：2012-07-30T09:48:36.067
> 
> 标签：c#, asp.net, authentication

我正在开发一个带有安全部分的网站，即名为“PIP”的文件夹。

登录部分工作正常，但是当我单击注销时，用户仍然是已知的，如果他/她触摸安全部分，则不会被重定向到登录页面。

这是我的 web.config：

```
<system.web>

<authentication mode="Forms">
  <forms loginUrl="Login.aspx" name=".ASPXFORMSAUTH">
  </forms>
</authentication>

</system.web>

<location path="PIP">
<system.web>
  <authorization>
    <deny users="?" />
  </authorization>
</system.web>
</location> 
```

我对用户进行身份验证的登录页面：

```
FormsAuthentication.RedirectFromLoginPage(uid, false); 
```

在安全文件夹 (PIP) 中的 default.aspx 页面上有一个注销按钮，该按钮后面的代码：

```
FormsAuthentication.SignOut();
Response.Redirect("~/Default.aspx", true); 
```

在页面上的“Default.aspx”是一个指向 ~/PIP/Default.aspx 的链接，它应该被重定向到登录页面，但不是。似乎会话不受注销的影响。

我尝试了很多选项，手动删除会话。Session.Clear，Session.Abandon，但似乎没有任何效果。

我希望你们能指出我正确的方向！

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T10:09:17.510

您需要在退出后放弃会话。

```
FormsAuthentication.SignOut();
Session.Abandon();
Response.Redirect("~/Default.aspx", true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T11:11:17.647

在您退出之前、期间或之后，您是否打开了任何其他 IE 实例？如果没有，你可以发现 cookie 仍然存在于 IE 的一个共享 cookie 元素中。

您的网页是否设置了过期时间？如果没有，该页面可能仍在您的浏览器缓存中，并且不会调用服务器上的表单身份验证检查。

如果您关闭浏览器并再次尝试访问受保护的资源并且必须登录，则它已正确配置.... 会话 cookie 不用作表单身份验证过程的一部分，因此您不必担心 - FormsAuthentication .SignOut() 是正确的方法。

在您的 Global.asax.cs 添加以下事件处理程序 - 如果您还没有它 - 并在其上放置一个断点。如果您在调用 LogOff 之后为后续请求命中断点，那么您可以打开 cookie 并查看其中的内容 - 我的猜测是您不会命中此断点，因为请求是从缓存中提供的。

```
 protected void Application_BeginRequest(object sender, EventArgs e) 
    {} 
```

要破解 cookie：

```
 HttpRequest currentRequest = HttpContext.Current.Request;

            // Attempt to get the Forms Auth Cookie from the Request
            HttpCookie authenticationCookie = currentRequest.Cookies[FormsAuthentication.FormsCookieName];

            if(authenticationCookie != null)
            {
                // Crack the Cookie open
                var formsAuthenticationTicket = FormsAuthentication.Decrypt(authenticationCookie.Value);

                // breakpoint here to see the contents of the ticket.
                if (formsAuthenticationTicket.Expired)
                {

                }
            } 
```

在 Firefox 或 Chrome 中尝试这个也是值得的，因为它们似乎更擅长立即删除 cookie。

要禁用缓存，您可以将以下内容放在其中一个页面中：

```
 private static void SetImmediateExpiryOnResponse(HttpResponse response)
    {
        response.Cache.SetAllowResponseInBrowserHistory(false);
        response.Cache.SetCacheability(HttpCacheability.NoCache);
        response.Cache.SetExpires(DateTime.UtcNow.AddMinutes(-1));
        response.Cache.SetNoStore();
        response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches);
        response.Expires = -1;
        response.ExpiresAbsolute = DateTime.Now.AddDays(-1);
        response.CacheControl = "no-cache";
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-03T12:36:38.307

设置过期的cookies：

```
HttpCookie cookie = HttpContext.Current.Request.Cookies[FormsAuthentication.FormsCookieName];
cookie.Expires = DateTime.Now.AddYears(-1);
HttpContext.Current.Response.Cookies.Add(cookie); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T10:02:26.453

使用 LoginView 控件可能会解决您的问题。

我的一个网站在 web.config 上有这个配置

```
<authentication mode="Forms">
        <forms loginUrl="~/Login.aspx" protection="All" timeout="30" name=".ASPXAUTH" path="/" requireSSL="false" slidingExpiration="true" 
               defaultUrl="Login.aspx" cookieless="UseDeviceProfile" enableCrossAppRedirects="false"/>
    </authentication> 
```

然后在我的保护区中，我创建了一个新的 web.config，只有这几行：

```
<configuration>
  <system.web>
    <authorization>
      <deny users="?"/>
    </authorization>
  </system.web>
</configuration> 
```

在 MasterPage 中，我使用 LoginView 控件：

```
<asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false">
      <AnonymousTemplate>
        <a href="../LoginReservedArea.aspx">Area Clienti</a>
        <%--[ <a href="~/Login.aspx" ID="HeadLoginStatus" runat="server">Log In</a> ]--%>
    </AnonymousTemplate>
    <LoggedInTemplate>
        Welcome <asp:LoginName ID="HeadLoginName" runat="server" />
        [<asp:LoginStatus ID="HeadLoginStatus" runat="server" LogoutAction="RedirectToLoginPage" LogoutText="Log Out" />]
    </LoggedInTemplate>
</asp:LoginView> 
```

[这里](http://msdn.microsoft.com/it-it/library/system.web.ui.webcontrols.loginstatus%28v=vs.100%29.aspx)有一个 loginview 控件的参考，你可以读到

> 退出网站会清除用户的身份验证状态，并且在使用 cookie 时会从用户的客户端计算机中清除 cookie。

所以我认为如果你不使用 loginview 控件，你必须手动清除 cookie。

# ruby - 转义 URL（没有双重转义）

> ID：11718983
> 
> 赞同：3
> 
> 时间：2012-07-30T09:48:46.053
> 
> 标签：ruby, url, browser

如何根据需要转义 URL，而不进行双重转义？

是否有一个已经这样做的 Ruby 库？我想知道 WebKit 或 Chrome 使用什么算法。

两个例子：

*   此 URL 无效，因为`%`没有转义: `http://x.co/op&k=21%`。如果您在 URL 栏中键入它，它就会知道将其转义。（它正在逃避幕后的'％'，对吗？）

*   如果您`http://localhost:3000/?s=hello%20world`在浏览器中键入，它就知道**不会**再次转义`%20`。

我想重用已经处理浏览器必须处理的边缘情况的优秀代码。如有必要，我不介意调用外部库。

**更新**：是的，我知道[URI.parse](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html#method-c-parse)。无需向我展示语法。我的问题**比**这更难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:30:20.383

到目前为止，获奖者是：

*   [Addressable::URI#normalize](http://addressable.rubyforge.org/api/Addressable/URI.html#normalize-instance_method)：“返回一个规范化的 URI 对象。注意：此方法并不试图完全符合规范。它的存在主要是为了纠正其他人阅读规范的失败，以及处理缓存问题，因为几个不同的URI 可能代表相同的资源，不应多次缓存。”

*   [Addressable::URI.heuristic_parse](http://addressable.rubyforge.org/api/Addressable/URI.html#heuristic_parse-class_method)：“将输入转换为 URI。输入不必是有效的 URI - 该方法将使用启发式方法来猜测 URI 的意图。这不符合标准，只是用户友好。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:07:35.690

是否需要多次编码或解码取决于您自己。您是程序员，需要了解 URL 处于什么状态，因为您按摩它。

浏览器可以假设 a`%`后面没有数字值是裸露的，应该被转义。有关详细信息，请参阅“[统一资源标识符 (URI)：通用语法](https://www.rfc-editor.org/rfc/rfc3986#section-2.1)”。

您可以使用 Ruby 的内置[`URI`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html)或[Addressable::URI](http://addressable.rubyforge.org/api/) gems 进行编码/解码。

```
require 'uri'

uri = URI.parse('http://x.co/op')
uri.query = URI.encode_www_form('k' => '21%')

puts uri.to_s # => http://x.co/op?k=21%25 
```

或者：

```
require 'addressable/uri'

uri = Addressable::URI.parse('http://x.co/op')
uri.query_values = {'k' => '21%'}
puts uri.to_s # => "http://x.co/op?k=21%25" 
```

# sql-server - 如何自动每天执行查询 SQL Server？

> ID：11718985
> 
> 赞同：0
> 
> 时间：2012-07-30T09:48:49.090
> 
> 标签：sql-server

我有一些想每天自动执行的查询。我应该将它创建为存储过程还是有其他方法？这是我的查询：

```
declare @tanggal_1 varchar(50)

set @tanggal_1 = (select top 1 ltrim(rtrim(cast(numweek as char)))+'-('+rangeweek+')' from tbl_weeklyflash_id where year([date]) = year(getdate()) order by numweek desc)

TRUNCATE table mytable
GO
INSERT INTO mytable (field1, field2, field3)
EXEC my_store_procedure @tanggal_1
GO
UPDATE mytable SET 
 [field4] = isnull(((nullif([cm1pl2],0)/nullif([cm1pl2_per],0))*100),0)
,[field5] = isnull(((nullif([cm1pl1],0)/nullif([cm1pl1_per],0))*100),0)
,[field6] = isnull(((nullif([cm1_cost_value],0)/nullif([cm1_cost_per],0))*100),0)
GO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T09:53:31.137

[在 sqlserver 中创建和调度作业](https://stackoverflow.com/questions/5471080/how-to-schedule-a-job-for-sql-query-to-run-daily)

我更喜欢写 SP，但你可以直接写查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:12:07.687

你可以做一个代理来做必要的事情。
参考：http: [//msdn.microsoft.com/en-us/library/ms191439.aspx](http://msdn.microsoft.com/en-us/library/ms191439.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T10:12:48.817

一种方法是在 sql server 中编写查询和调度作业。

其他方法是为该查询准备 Windows 计划。首先，您需要创建该查询的存储过程。之后转到计算机管理（右键单击我的计算机并选择管理）。并转到任务计划程序并创建新任务。为此，您需要创建批处理文件来执行您需要每天运行的存储过程。

# java - 代码中的需求和代码之间的联系

> ID：11718986
> 
> 赞同：6
> 
> 时间：2012-07-30T09:48:54.513
> 
> 标签：java, version-control, requirements

我正在寻找简单的方法来连接有关需求/发布和源代码的信息。案例是开发人员应该能够以简单的方式找到给定版本或 CR 创建的任何工件。我的想法是引入一些新注释来标记任何新类（我不确定它是否适用于任何新方法），例如：

```
@ArtifactInfo(release="1.2" cr="cr123") 
```

你还有其他建议吗？也许你已经使用了类似的东西？

保重，马辛

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T04:11:32.977

IMO 代码是此类信息的错误位置。

看看下面的假想代码。

```
class Authenticator {

    login(String username, String password){
        User user = retrieveUserFromDatabase(username);
        throwIfWrongpassword(user, password);
        verifyUserAge(user)
    }

    void throwIfWrongpassword(User user, String password){
        //throws AuthenticationException if password is wrong
    }

    void verifyUserAge(User user){
        //verify that user is above 18 or account is authorized by a parent
    }

    void biometricLogin(String username, BiometricImage bioimg){
        User user = retrieveUserFromDatabase(username);
        verifyBiometricImage(user, password);
        verifyUserAge(user);
    }
} 
```

这是几个要求的结果：

*   用户必须进行身份验证才能访问系统
*   用户可以在密码验证上使用生物特征验证
*   未成年用户必须被授权为父母或类似的人。

所有这些要求都是在不同的时间点，在不同版本的软件上添加的。类级别，甚至方法级别的注释都不足以有效地将需求映射到代码。您必须使用“代码行”级别的注释。当然，这是不切实际的。

正确的做法是在使用源代码存储库和错误跟踪器时遵循一些最佳实践：

*   1) 每个需求都对应于 bug 跟踪器上的一个或多个问题
*   2) 每条提交消息都以相应的问题键开头，例如“PROJ-123 - 一个不错的功能”
*   3) 当你发布一个版本（意味着增加你的软件版本）时，你告诉错误跟踪器这些问题在那个版本中得到了修复。

如果您需要知道在哪个版本中实现了哪些要求，请询问您的错误跟踪器。

如果您需要了解为给定需求生成的所有代码，请询问您的源代码存储库（按日志消息过滤提交）

如果您需要知道给定代码行的要求是什么，请询问您的源代码存储库。GIT 和 SVN 有一个“责备”命令，它会告诉你，对于给定的文件，对于每一行代码，谁提交了它，何时提交，以及提交消息（如果团队中的每个人都是好人，它将有问题编号男孩） - 所以这将作为假设的“代码行”级别注释。

使用“提交挂钩”可以帮助您在组织中执行规则 2)。

Maven 与 JIRA 和其他错误跟踪器有一定程度的集成，也许它可以帮助自动化 #3。但我还没有真正那样使用它。但是，如果它不能满足您的需求，您可以随时[要求更多](http://www.freedomsponsors.org):-)

# c++ - 测量互斥量争用/解释 mutrace 输出

> ID：11718997
> 
> 赞同：4
> 
> 时间：2012-07-30T09:49:36.987
> 
> 标签：c++, multithreading, profiling, pthreads, contention

我正在尝试使用 mutrace 在我的程序中测量互斥量争用，但对于如何使用它输出的报告感到困惑。

```
mutrace: Showing statistics for process test (PID: 5924).
mutrace: 1223 mutexes used.

Mutex #362 (0x0x1a23750) first referenced by:
        /usr/local/lib/libmutrace.so(pthread_mutex_init+0x1b2) [0x7fb6b14129b4]
        ./test() [0x500042]

Mutex #390 (0x0x1a23ac0) first referenced by:
        /usr/local/lib/libmutrace.so(pthread_mutex_init+0x1b2) [0x7fb6b14129b4]
        ./test() [0x500042]

Mutex #965 (0x0x1a3a600) first referenced by:
        /usr/local/lib/libmutrace.so(pthread_mutex_init+0x1b2) [0x7fb6b14129b4]
        ./test() [0x500042]

Mutex #502 (0x0x1abbc90) first referenced by:
        /usr/local/lib/libmutrace.so(pthread_mutex_init+0x1b2) [0x7fb6b14129b4]
        ./test() [0x500042]

Mutex #241 (0x0x7fb6af9019c0) first referenced by:
        /usr/local/lib/libmutrace.so(pthread_mutex_lock+0x116) [0x7fb6b1412da6]
        /lib/libgcc_s.so.1(_Unwind_Find_FDE+0x2a) [0x7fb6af6fe3ea]
        [(nil)]

Mutex #704 (0x0x7fb6afe85020) first referenced by:
        /usr/local/lib/libmutrace.so(pthread_mutex_lock+0x116) [0x7fb6b1412da6]
        /usr/lib/libstdc++.so.6(_ZNSt6localeC1Ev+0x2f) [0x7fb6afbf021f]

Mutex #452 (0x0x1a240b0) first referenced by:
        /usr/local/lib/libmutrace.so(pthread_mutex_init+0x1b2) [0x7fb6b14129b4]
        ./test() [0x500042]

Mutex #981 (0x0x1a3a770) first referenced by:
        /usr/local/lib/libmutrace.so(pthread_mutex_init+0x1b2) [0x7fb6b14129b4]
        ./test() [0x500042]

Mutex #626 (0x0x73daa8) first referenced by:
        /usr/local/lib/libmutrace.so(pthread_mutex_init+0x1b2) [0x7fb6b14129b4]
        ./test(_ZN7threads5mutexC2Eb+0x5e) [0x50675e]

Mutex #801 (0x0x1ab6798) first referenced by:
        /usr/local/lib/libmutrace.so(pthread_mutex_init+0x1b2) [0x7fb6b14129b4]
        ./test(_ZN7threads5mutexC1Eb+0x5e) [0x50643e]

mutrace: Showing 10 mutexes in order of (write) contention count:

 Mutex #   Locked  Changed    Cont. cont.Time[ms] tot.Time[ms] avg.Time[ms] Flags
     362   517216   163871    70638       619.184      138.933        0.000 M-.--.
     390   180589    61197    31681      5926.827      463.255        0.003 M-.--.
     965    38679    24052    10646       661.639      718.836        0.019 M-.--.
     502    35394    19012     1540       153.286      134.116        0.004 M-.--.
     241     3481     2715     1378       135.624        1.189        0.000 M-.--.
     704    20902     3879       70         0.594        6.702        0.000 M-.--.
     452      892      158       49        21.401      125.918        0.141 M-.--.
     981     2369     2361       12         0.229       12.984        0.005 M-.--.
     626      598      270        4         0.139        8.417        0.014 Mx.r-.
     801      125        2        1         0.012        0.270        0.002 Mx.r-.
     ...      ...      ...      ...           ...          ...          ... ||||||
                                                                            /|||||
          Object:                                      M = Mutex, W = RWLock /||||
           State:                                  x = dead, ! = inconsistent /|||
             Use:                                  R = used in realtime thread /||
      Mutex Type:                   r = RECURSIVE, e = ERRORCHECK, a = ADAPTIVE /|
  Mutex Protocol:                                       i = INHERIT, p = PROTECT /
     RWLock Kind:  r = PREFER_READER, w = PREFER_WRITER, W = PREFER_WRITER_NONREC 

mutrace: Note that rwlocks are shown as two lines: write locks then read locks.

mutrace: Note that the flags column R is only valid in --track-rt mode!

mutrace: 275 condition variables used.

Condvar #235 (0x0x7fb6a039d5c8) first referenced by:
        /usr/local/lib/libmutrace.so(pthread_cond_init+0x120) [0x7fb6b14134be]
        ./test(_ZN7threads4condC1Ev+0x17) [0x5051b7]

Condvar #153 (0x0x7fb6a8259978) first referenced by:
        /usr/local/lib/libmutrace.so(pthread_cond_init+0x120) [0x7fb6b14134be]
        ./test(_ZN7threads4condC1Ev+0x17) [0x5051b7]

Condvar #42 (0x0x7fb6a03e8188) first referenced by:
        /usr/local/lib/libmutrace.so(pthread_cond_init+0x120) [0x7fb6b14134be]
        ./test(_ZN7threads4condC1Ev+0x17) [0x5051b7]

Condvar #222 (0x0x7fb6a019b7c8) first referenced by:
        /usr/local/lib/libmutrace.so(pthread_cond_init+0x120) [0x7fb6b14134be]
        ./test(_ZN7threads4condC1Ev+0x17) [0x5051b7]

Condvar #118 (0x0x7fb6a0223ca8) first referenced by:
        /usr/local/lib/libmutrace.so(pthread_cond_init+0x120) [0x7fb6b14134be]
        ./test(_ZN7threads4condC1Ev+0x17) [0x5051b7]

Condvar #8 (0x0x7fb6a820d748) first referenced by:
        /usr/local/lib/libmutrace.so(pthread_cond_init+0x120) [0x7fb6b14134be]
        ./test(_ZN7threads4condC1Ev+0x17) [0x5051b7]

Condvar #171 (0x0x7fb69c04d9d8) first referenced by:
        /usr/local/lib/libmutrace.so(pthread_cond_init+0x120) [0x7fb6b14134be]
        ./test(_ZN7threads4condC1Ev+0x17) [0x5051b7]

Condvar #0 (0x0x7fb69c22a2e8) first referenced by:
        /usr/local/lib/libmutrace.so(pthread_cond_init+0x120) [0x7fb6b14134be]
        ./test(_ZN7threads4condC1Ev+0x17) [0x5051b7]

Condvar #75 (0x0x7fb6a81a65f8) first referenced by:
        /usr/local/lib/libmutrace.so(pthread_cond_init+0x120) [0x7fb6b14134be]
        ./test(_ZN7threads4condC1Ev+0x17) [0x5051b7]

Condvar #142 (0x0x7fb6a001c308) first referenced by:
        /usr/local/lib/libmutrace.so(pthread_cond_init+0x120) [0x7fb6b14134be]
        ./test(_ZN7threads4condC1Ev+0x17) [0x5051b7]

mutrace: Showing 10 condition variables in order of wait contention count:

  Cond #    Waits  Signals    Cont. tot.Time[ms] cont.Time[ms] avg.Time[ms] Flags
     235      271        0        0     1370.469         0.000        0.000     x.
     153      190        0        0      960.142         0.000        0.000     x.
      42       65        0        0      328.264         0.000        0.000     x.
     222       52        0        0      262.584         0.000        0.000     x.
     118       51        0        0      261.869         0.000        0.000     x.
       8       48        0        0      242.422         0.000        0.000     x.
     171       41        0        0      207.044         0.000        0.000     x.
       0       38        0        0      191.881         0.000        0.000     x.
      75       37        0        0      186.835         0.000        0.000     x.
     142       35        0        0      176.704         0.000        0.000     x.
     ...      ...      ...      ...          ...           ...          ...     ||
                                                                                /|
           State:                                     x = dead, ! = inconsistent /
             Use:                                     R = used in realtime thread 

mutrace: Note that the flags column R is only valid in --track-rt mode!

mutrace: Total runtime is 3701.228 ms.

mutrace: Results for SMP with 8 processors. 
```

看来我肯定有互斥争用问题，但我不知道如何将其与我的源代码相关联。我希望有更好的回溯然后这个。

根据 mutrace 的网站（和 -g -gdb 也是），该可执行文件已使用 -rdynamic 编译。

我在stackoverflow上发现了mutrace，所以希望有一些有经验的人！

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:03:38.817

从未使用过 mutrace，但可以使用地址到符号转换： **addr2line**

例如：

```
addr2line -e sysopview 0x5051b7 
```

在此示例中，“sysopview”是地址应该位于的二进制文件的路径，0x5051b7 是示例地址。然后 Addr2line 将发出它认为应该映射到它的名称。也适用于回溯。

示例输出：

> folkert@belle:~/Projects/entropybroker/trunk$ addr2line -e ./entropy_broker 0x0000000000406968 /home/folkert/Projects/entropybroker/trunk/handle_client.cpp:761

在本例中，地址 0x406968 映射到文件 handle_client.cpp 的第 761 行。

在 Debian 上，这个程序可以在“binutils”包中找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T03:09:55.287

我在我的 realease 版本中保留了调试标志，所以 -g -gdb -rdynamic 都启用了。我想这会没事的。切换回我的调试版本后，删除 -O2 使回溯更加有用。仍然被破坏，但好多了。

我发现我所有争用最高的互斥锁都被用于 gnutls 使用的 gcrypt 库中的同步。可能需要进行实验，看看是否回到 openssl 会改善它，或者可能是 cyassl！

谢谢。