# StackOverflow 问答 12245000-12245999

# file - 如何检查哪些文件因为 .hgignore 而被忽略？

> ID：12245001
> 
> 赞同：18
> 
> 时间：2012-09-03T09:14:24.337
> 
> 标签：file, mercurial, hgignore

我经常担心我的 hgignore 文件可能会排除重要文件。例如，我刚刚注意到我排除了所有 .exe 文件，这些文件排除了一些应该与源代码一起保存的小可执行工具。将它们包括在内是一个简单的更改，但让我担心这些规则可能会产生意想不到的后果。

有没有办法查看由于文件而没有被跟踪的所有文件的列表`.hgignore`？这样我就可以定期查看列表以检查我是否满意。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-03T09:16:57.930

该命令`hg status -i`正是这样做的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-03T09:28:43.843

@Jon 用正确的答案击败了我，但它一文不值`status -i`，还有：

*   `hg status -m`（仅修改过的文件）
*   `hg status -a`（仅添加的文件）
*   `hg status -r`（仅删除的文件）
*   `hg status -d`（仅限已删除的文件）
*   `hg status -u`（所有未跟踪的文件）
*   `hg status -c`（没有更改的文件，即“干净”）
*   `hg status -A`（所有文件，即一切）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-05T20:58:28.757

如果要对文件名进行**手动检查**`-i/--ignored`，请使用标志状态：

```
$ hg status -i
I ignored file.exe 
```

如果您想要**单独的文件名**，则使用`-n/--no-status`来抑制`I`打印在每个文件名前面的状态代码：

```
$ hg status -n -i
ignored file.exe 
```

如果您需要使用**处理文件`xargs`**，请另外使用该`-0/--print0`标志：

```
$ hg status -n -0 | xargs -0 touch 
```

这将负责正确处理空格 - 使用 using `-0`，您最终可能会将其`ignored file.exe`视为两个文件：`ignored`并且`file.exe`因为 shell 通常会在空格上拆分。

上面的命令显示了**匹配的未跟踪文件`.hgignore`**。如果要解决查找**跟踪文件匹配`.hgignore`**的相关问题，则需要使用[文件集查询](http://www.selenic.com/mercurial/hg.1.html#filesets)。看起来像这样：

```
$ hg locate "set:hgignore()" 
```

您可以将文件集与对文件进行操作的所有命令一起使用，例如，您可以执行以下操作：

```
$ hg forget "set:hgignore()" 
```

安排删除找到的文件（在您的工作副本中留下一个副本）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-03T09:20:13.550

是的，有可能。如果你正在使用 TortoiseHg 之类的东西，你可以选择你想看的文件。

这是一个示例

![在此处输入图像描述](../Images/e1877c230a63cd6d5f3fa6409e73116c.png)

# android - 尝试反复上下滚动列表视图时，Android应用程序会强制关闭

> ID：12245007
> 
> 赞同：-3
> 
> 时间：2012-09-03T09:14:48.813
> 
> 标签：android

我使用自定义列表适配器制作了一个列表视图，其中包含文本和图像 IN 侧列表。它运行良好，但是当我反复向上滚动列表视图然后应用程序崩溃并且在 log cat 中显示堆大小问题。

我应该怎么做才能解决这个问题？当我在 HTC one V(4.0 API) 上测试应用程序时，Low Api 版本没有出现问题，然后只有它在滚动时崩溃，它可以滚动 3 或 4 次，但做更多滚动时它会挂起并用力关闭堆大小问题。

堆栈跟踪：

```
I/dalvikvm(20978):   at dalvik.system.NativeStart.main(Native Method)
09-03 07:58:33.796: E/dalvikvm(20978): Out of memory: Heap Size=131107KB, Allocated=130843KB, Limit=49152KB
09-03 07:58:33.796: E/dalvikvm(20978): Extra info: Footprint=131043KB, Allowed Footprint=131107KB, Trimmed=1096KB
09-03 07:58:33.796: D/skia(20978): --- decoder->decode returned false
09-03 07:58:33.796: D/AndroidRuntime(20978): Shutting down VM
09-03 07:58:33.796: W/dalvikvm(20978): threadid=1: thread exiting with uncaught exception (group=0x40ab8228)
09-03 07:58:33.826: E/AndroidRuntime(20978): FATAL EXCEPTION: main
09-03 07:58:33.826: E/AndroidRuntime(20978): java.lang.OutOfMemoryError: (Heap Size=131107KB, Allocated=130843KB)
09-03 07:58:33.826: E/AndroidRuntime(20978):  at android.graphics.BitmapFactory.nativeDecodeFile(Native Method)
09-03 07:58:33.826: E/AndroidRuntime(20978):  at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:373)
09-03 07:58:33.826: E/AndroidRuntime(20978):  at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:443)
09-03 07:58:33.826: E/AndroidRuntime(20978):  at com.raila.controller.ImageDownloader.download(ImageDownloader.java:90)
09-03 07:58:33.826: E/AndroidRuntime(20978):  at com.raila.view.NewsActivity$ItemsAdapter.getView(NewsActivity.java:166)
09-03 07:58:33.826: E/AndroidRuntime(20978):  at android.widget.AbsListView.obtainView(AbsListView.java:2054)
09-03 07:58:33.826: E/AndroidRuntime(20978):  at android.widget.ListView.makeAndAddView(ListView.java:2004)
09-03 07:58:33.826: E/AndroidRuntime(20978):  at android.widget.ListView.fillUp(ListView.java:889)
09-03 07:58:33.826: E/AndroidRuntime(20978):  at android.widget.ListView.fillGap(ListView.java:829)
09-03 07:58:33.826: E/AndroidRuntime(20978):  at android.widget.AbsListView.trackMotionScroll(AbsListView.java:4636)
09-03 07:58:33.826: E/AndroidRuntime(20978):  at android.widget.AbsListView$FlingRunnable.run(AbsListView.java:3899)
09-03 07:58:33.826: E/AndroidRuntime(20978):  at android.os.Handler.handleCallback(Handler.java:607)
09-03 07:58:33.826: E/AndroidRuntime(20978):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-03 07:58:33.826: E/AndroidRuntime(20978):  at android.os.Looper.loop(Looper.java:154)
09-03 07:58:33.826: E/AndroidRuntime(20978):  at android.app.ActivityThread.main(ActivityThread.java:4974)
09-03 07:58:33.826: E/AndroidRuntime(20978):  at java.lang.reflect.Method.invokeNative(Native Method)
09-03 07:58:33.826: E/AndroidRuntime(20978):  at java.lang.reflect.Method.invoke(Method.java:511)
09-03 07:58:33.826: E/AndroidRuntime(20978):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
-03 07:58:33.826: E/AndroidRuntime(20978):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-03 07:58:33.826: E/AndroidRuntime(20978):  at dalvik.system.NativeStart.main(Native Method)
09-03 07:58:33.977: I/dalvikvm-heap(20978): Clamp target GC heap from 134.749MB to 128.000MB
09-03 07:58:33.987: D/dalvikvm(20978): GC_CONCURRENT freed 388K, 1% free 130500K/131043K, paused 2ms+33ms
09-03 07:58:36.379: D/Process(20978): killProcess, pid=20978 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T06:47:34.010

您应该观看视频“ [listview 的世界](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)”，以更好地了解 listview（以及任何其他适配器视图）的工作原理。

要检查的另一件好事是如何以[有效的方式处理位图](http://developer.android.com/training/displaying-bitmaps/index.html)。

此外，您应该在每次到达 getView 函数时取消一个视图任务，这样旧任务就不会改变“新”视图的内容来显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:41:39.530

错误是在使用位图时。当你滚动时，你会不断地加载新的位图，所以在某些时候你会耗尽内存。当不再显示位图时，您必须在位图上调用“recycle()”。Android 开发者博客上有一篇文章展示了如何正确执行此操作。查看[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)和[http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

# wpf - DataGrid Multiple KeyBinding到相同的功能，如何知道我按下了哪个键

> ID：12245009
> 
> 赞同：1
> 
> 时间：2012-09-03T09:14:57.693
> 
> 标签：wpf, mvvm, key-bindings

我有这个 xaml：

```
<DataGrid.InputBindings>
        <KeyBinding Key="a" Command="{Binding Path=Function}" CommandParameter="{Binding ElementName=dataGrid1,Path=SelectedItem}"></KeyBinding>
        <KeyBinding Key="s" Command="{Binding Path=Function}" CommandParameter="{Binding ElementName=dataGrid1,Path=SelectedItem}"></KeyBinding>
</DataGrid.InputBindings> 
```

当我选择一行并按 a 或 si 时，将所选项目绑定到 KeyPressed。我的问题是我怎么知道我按下了哪个键？（我想绑定按键和选定的项目）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:48:30.810

如果您有 2 个键绑定，则有 2 个不同的命令会更清楚：

```
<DataGrid.InputBindings>
    <KeyBinding Key="a" Command="{Binding Path=ACommand}" CommandParameter="{Binding ElementName=dataGrid1,Path=SelectedItem}"></KeyBinding>
    <KeyBinding Key="s" Command="{Binding Path=SCommand}" CommandParameter="{Binding ElementName=dataGrid1,Path=SelectedItem}"></KeyBinding>
</DataGrid.InputBindings> 
```

# c# - C# - 像在 Windows 7 中一样创建样式化的 winforms

> ID：12245011
> 
> 赞同：1
> 
> 时间：2012-09-03T09:15:13.353
> 
> 标签：c#, winforms, customization, system-tray

我想创建一个这样的winform：

![Winform 样式类似于通知区域的弹出窗口（Windows 7）](../Images/dba22360ded16b96c671f1c4629ae49b.png)

[通过关注其他问题](https://stackoverflow.com/q/2169006)，我已经完成了视觉效果（如图所示）。但我不能禁止调整表格的大小，因为要有边框，它必须是“Sizeable”。有人建议将最小尺寸和最大尺寸值设置为等于当前表单尺寸。这解决了部分问题，但是当鼠标悬停在边框上时，它仍然显示双端箭头，表明表单是可调整大小的。有什么方法可以禁用此光标更改？我的目标是模仿 Windows 7 中的原始系统托盘弹出窗口，如网络、声音等。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:02:15.683

示例代码：

```
private const int WM_NCHITTEST = 0x84;
private const int HTCLIENT = 0x1;

protected override void WndProc(ref Message m)
{
    switch (m.Msg)
    {
        case WM_NCHITTEST:
            m.Result = (IntPtr)HTCLIENT;
            return;
    }
    base.WndProc(ref m);
} 
```

这样，当光标悬停在边框上时，指针不会改变，因为它被视为在表单内部，从而达到预期的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:21:07.390

将消息处理程序添加到您的表单并处理 WM_NCHITTEST。当原件返回 HTSIZE（等）时，返回 HTNONE 或 HTCAPTION。

像[这样的问题](https://stackoverflow.com/questions/30184/winforms-click-drag-anywhere-in-the-form-to-move-it-as-if-clicked-in-the-form)应该让你开始。

解释：

当 Windows 想知道您的窗口使用哪个光标时，它首先会向您发送一条`WM_NCHITTEST`消息（非客户端命中测试）。该消息由该`WndProc`方法处理。您的窗口应该返回一个`HT*`代码来告诉 Windows 鼠标在窗口的哪个部分。例如，返回`HTCAPTION`标题区域、`HTCLIENT`客户区域或`HTSIZENESW`左下角大小。标准窗口的默认消息处理程序（调用`base.WndProc`）处理此问题。

我们没有标准的窗口。

我们在这里尝试做的是询问原始窗口鼠标在哪里。如果它返回任何`HTSIZE*`值，我们希望将该返回值替换为`HTNONE`（对于无操作）或`HTCLIENT`（如果您希望光标被视为在窗口内 - 可能不是这个）或`HTCAPTION`（如果您希望能够通过边缘拖动窗口 - 可能有用）。

# qt - 如何使用 QtConcurrent::run() 创建多个线程

> ID：12245015
> 
> 赞同：0
> 
> 时间：2012-09-03T09:15:28.833
> 
> 标签：qt

我尝试在循环中运行 QtConcurrent::run()，但程序崩溃：（我正在使用 libsmbclient）

```
void Scanner::scan()
{
    for(int i=0;i<ipList.length();i++)
    {
        QtConcurrent::run(this,&Scanner::scanThread,i);
    }
}
void Scanner::scanThread(int i)
{
int dh;
QString ip;
ip="smb://"+ipList[i]+"/";
dh= smbc_opendir(ip.toAscii());  // debugger points to this location
if(dh<0)
    return;
emit
        updateTree(i,dh);         // on commenting this line, it still crashes 
} 
```

错误：

> talloc: access after free 错误 - 第一个 free 可能位于 ../lib/util/talloc_stack.c:103
> Badtalloc 魔术值 - access after free
> 程序意外完成。

# plist - Apple iMessage - ForceICQPlainText

> ID：12245016
> 
> 赞同：0
> 
> 时间：2012-09-03T09:15:32.013
> 
> 标签：plist, icq, imessage

我想在 ~/Library/Preferences/com.Apple.iChat.AIM.plist 中更改 ForceICQPlainText，这样我的 iMessage 就不会发送 HTML 代码。但是在我更改它并重新启动我的 Mac 7 次后，我放弃了。

**似乎没有任何效果：**

ForceICQPlainText = ":true";

ForceICQPlainText = true;

ForceICQPlainText = "真";

ForceICQPlainText = ":是";

ForceICQPlainText = "是";

ForceICQPlainText = YES；

ForceICQPlainText = ":true";

我需要输入什么才能只获得文字按摩？我总是重新启动，我也锁定了文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T11:29:24.877

关机消息

在 finder 中打开 ~/Library/Preserences

找到 com.Apple.iChat.AIM.plis 文件

在 xcode 中打开 plist（您可能需要先安装它，它是免费的）

[cmd]-F 查找标签

在下拉菜单中选择“是”

[cmd]-S 保存

关闭 xcode

[ctrl]-单击文件并选择“获取信息”

向下滚动到最底部

选择只读而不是读写

重启你的mac

请享用

# jquery - 在哪个版本的 jquery 中引入了自动完成功能？

> ID：12245017
> 
> 赞同：0
> 
> 时间：2012-09-03T09:15:35.263
> 
> 标签：jquery

我在整个站点上使用 jquery 1.2.6，但是在实现 jquery 时遇到了困难。谁能告诉我在哪个版本的 jquery 中引入了自动完成功能，是否有任何过程可以将旧版本的 jquery 升级到新版本。例如：从 1.2.6 升级到 1.8。有没有什么流程要走。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:17:28.857

自动完成是[jQuery UI](http://jqueryui.com/demos/autocomplete/)的一部分，不包含在 jQuery 框架中。

自动完成是在 jQuery UI 1.8 中引入的，不要与 jQuery 1.8 混淆，它是在 jQuery 1.4 左右发布的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:19:09.230

[在 jQuery 但jQuery UI](http://jqueryui.com/demos/autocomplete/)中找不到自动完成功能

# c++ - 为什么派生类函数参数取基类函数参数的值？

> ID：12245019
> 
> 赞同：7
> 
> 时间：2012-09-03T09:15:50.810
> 
> 标签：c++, oop, inheritance, derived-class, base-class

我正在研究 C++。以下是我的代码：

```
#include <iostream>
using namespace std;
class base
{
        public:
        virtual void display(int a = 4)
        {
                cout << "base ::  "<<  a*a << endl;
        }
};

class derived : public base
{
        public:
        void display(int b = 5)
        {
                cout << " Derived :: " << b*b*b <<  endl;
        }
};

int main()
{
        base *bobj;
        derived dobj;
        bobj = &dobj;
        bobj->display();
        return 0;
} 
```

输出是：

```
Derived :: 64 
```

基类的函数被调用，但使用派生函数的参数的默认值。为什么派生类方法 display() 采用基类方法参数值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T09:16:24.373

因为您是通过指向`base`. 这就是它的工作原理。

在实际调用*之前*，参数被压入参数堆栈（或内部寄存器） 。因为你有一个指向的指针`base`并且没有参数，所以默认值`4`被传递给函数。然后调用正确的函数 ( `derived::display`)，但使用`base`的默认参数。当然，这是一个实现细节，但行为是标准的。

### C++03 8.4/10

> 虚函数调用 (10.3) 在虚函数的声明中使用默认参数，由表示对象的指针或引用的静态类型确定。派生类中的覆盖函数不会从它覆盖的函数中获取默认参数。

我会强调引用，但整个事情是不言自明的。

```
dobj.display(); 
```

将打印`125`(5^3)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T09:19:30.870

默认参数由调用者插入。您的代码相当于

```
class base {
public:
    virtual void display(int a) { cout << "base ::  "<<  a*a << endl; }
    inline void display(void) { display(4); }
}; 
```

等等

通过`base`指针调用时，将插入基类的默认值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T09:22:09.663

标准说明了一切：

> (§8.3.6/10) 虚函数调用 (10.3) 在虚函数的声明中使用默认参数，由表示对象的指针或引用的静态类型确定。派生类中的覆盖函数不会从它覆盖的函数中获取默认参数。[ 例子：
> 
> ```
>  struct A {
>       virtual void f(int a = 7);
>     };
>     struct B : public A {
>       void f(int a);
>     };
>     void m() {
>       B* pb = new B;
>       A* pa = pb;
>       pa->f();   // OK, calls pa->B::f(7)
>       pb->f();   // error: wrong number of arguments for B::f()
>     }
>     — end example ] 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T09:29:58.543

让自己成为一个不那么做作的测试设置，它变得很清楚：

```
#include "base.hpp"

int compute(base * p)
{
    return p->display();
} 
```

现在有两点很明显：

1.  默认参数只能来自 中指定的默认参数`base`。

2.  实际调度是动态的，因为`display`它是一个虚拟成员函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T09:20:55.420

当您使用`->`即使用指针调用函数时，它使用被指向的对象来做出决定，在这种情况下是`Derived`类的对象。

正如规范所说...

> 虚函数调用使用虚函数声明中的默认参数，由表示对象的指针或引用的静态类型确定。派生类中的覆盖函数不会从它覆盖的函数中获取默认参数。

# ios - iOS MDM 供应商签名流程

> ID：12245021
> 
> 赞同：2
> 
> 时间：2012-09-03T09:15:56.457
> 
> 标签：ios, mdm

我按照 MDM 供应商签名文档[http://www.softhinker.com/in-the-news/iosmdmvendorcsrsigning](http://www.softhinker.com/in-the-news/iosmdmvendorcsrsigning)的说明进行操作。在第 2 步中，它需要您从 iOS Provisioning Portal 创建证书。您需要单击中心的“其他”选项卡。在我的门户中，只有四个选项卡，但没有“其他”选项卡。我想念什么吗？请帮忙。

# hibernate - 多对多关系奇怪的行为

> ID：12245024
> 
> 赞同：0
> 
> 时间：2012-09-03T09:16:12.493
> 
> 标签：hibernate, jpa-2.0

## 我有两个实体“Person”和“Team”，它们使用注释通过多对多关系映射，如下所示：

```
@Entity
public class Perosn implements Serializable {
      ....
      private Collection<Team> teams;
      ....

     @ManyToMany(fetch = FetchType.LAZY)
     @Cascade({CascadeType.ALL})
     @JoinTable(name = "person_team",
            joinColumns = { @JoinColumn(name = "person_id")},
            inverseJoinColumns = {@JoinColumn(name = "team_id")})
     public Collection<Team> getTeams() {
        return advisers;
     }
} 
```

* * *

```
@Entity
public class Team implements Serializable {
      ....
      private Collection<Person> persons;
      ....

     @ManyToMany(fetch = FetchType.LAZY)
     @Cascade({CascadeType.ALL})
     @JoinTable(name = "person_team",
            joinColumns = { @JoinColumn(name = "team_id")},
            inverseJoinColumns = {@JoinColumn(name = "person_id")})
     public Collection<Person> getPersons() {
        return advisers;
     }
} 
```

* * *

## 我使用以下服务类将新团队添加到人员对象并更新连接表（添加包含 personId 和 teamId 的新记录）：

```
@Service("teamService")
public class TeamService extends DataAccess {
    ....
    public void addTeamToPerson(String teamId, String personId) {

        Team team= getTeam(teamId);
        Person person= personService.getPerson(personId);
        person.getTeams().add(team);
        super.update(team);
    }
    ....
} 
```

* * *

```
public abstract class DataAccess<E> {

    private EntityManager manager;
    ....
    public void update(E object) {
        try {
            manager.getTransaction().begin();
            manager.merge(object);
            manager.getTransaction().commit();
        } catch (Exception e) {
            ....
        }
   }
   ....
} 
```

* * *

这种结构确实有效，但我认为将团队对象添加到人员对象的团队集合并更新团队对象很奇怪。逻辑上是错的吗？我需要知道在这种类型的关系中存在主从功能或类似的东西。

任何指南都将被视为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:16:36.927

您的映射是错误的：您没有定义多对多双向关联，而是使用相同的连接表定义了两个多对多单向关联。

双向关联总是有所有者方和反方。所有者方是没有`mappedBy`属性的一方。反面必须有一个`mappedBy`属性。想一想：为什么需要两次告诉 Hibernate 双向关联是如何映射的？

映射应该是：

```
@Entity
public class Person implements Serializable {
      ....
      private Collection<Team> teams;
      ....

     @ManyToMany(fetch = FetchType.LAZY)
     @Cascade({CascadeType.ALL})
     @JoinTable(name = "person_team",
            joinColumns = { @JoinColumn(name = "person_id")},
            inverseJoinColumns = {@JoinColumn(name = "team_id")})
     public Collection<Team> getTeams() {
        return advisers;
     }
}

@Entity
public class Team implements Serializable {
     ....
     private Collection<Person> persons;
     ....

     @ManyToMany(fetch = FetchType.LAZY, mappedBy = "teams")
     @Cascade({CascadeType.ALL})
     public Collection<Person> getPersons() {
        return advisers;
     }
} 
```

在这种情况下，所有者方是`Person`。这意味着要在人员和团队之间添加关联，您需要将团队添加到人员的团队集合中。您可以选择以其他方式映射它，在这种情况下，您需要将该人员添加到人员的团队集合中。

另外，请注意，拥有`CascadeType.ALL`ManyToMany 关联真的很可疑：您是否真的要在删除团队时删除所有人员，并删除已删除人员的所有团队等？

# php - 使用 PHP 在 SAML 2.0 中进行 DSA 签名检查

> ID：12245031
> 
> 赞同：2
> 
> 时间：2012-09-03T09:17:05.270
> 
> 标签：php, saml, dsa, xmlseclibs

我已经检查过 SO 并四处搜索，但到目前为止还没有找到答案。我使用 SAML 2.0 作为服务提供商，并嵌入了[php-saml](https://github.com/onelogin/php-saml) - 首先使用了 simplesamlphp，但发现嵌入起来有点困难。

IdP-s 响应带有签名

```
<signaturemethod algorithm="http://www.w3.org/2000/09/xmldsig#dsa-sha1"> 
```

看起来 xmlseclibs 不支持 dsa 签名。

问题 A：有什么建议可以用来验证 dsa 签名吗？

问题 B：只是好奇其他人为 SAML 使用什么库。我刚刚在 simplesamlphp 上花了大约 20 分钟，发现它完全依赖于它自己的 URL 结构并且是一个适当的网络服务器端点，而不仅仅是一个库。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:30:36.457

PHP 库中缺乏 DSA 支持的部分历史原因可能与此有关：

*   [https://bugs.php.net/bug.php?id=41033](https://bugs.php.net/bug.php?id=41033)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:21:21.750

PingFederate（来自 Ping Identity）为您提供 DSA 作为选项（作为 IDP 和 SP）。尽管 XML 签名强制要求使用 DSAwithSHA1 签名算法，但 SAML V2.0 并不要求它，但建议使用它。

虽然 PF 不是一个代码库（它是一个完整的本地 SSO 解决方案），但它支持云计算所需的所有各种身份协议（SAML 1.0/1.1/2.0/WS-Federation），并且可以很容易地通过以下方式连接到 PHP 应用程序RESTful Web 服务或 PHP 库。

# sql-server - 案例不工作在 Sql Server 中存在

> ID：12245034
> 
> 赞同：0
> 
> 时间：2012-09-03T09:17:14.553
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, sql-server-2008-r2, sql-server-2000

我有一个场景，我必须检查一个变量的默认值，如果它有我必须使用 Table2 有条件地检查 EXISTS 部分，如果它没有默认值，我必须使用 Table3 有条件地检查 EXISTS 部分。

以下是示例代码：-

```
SELECT * FROM tbl1 WHERE EXISTS (SELECT CASE WHEN @boolVar = 0 THEN (SELECT 'X' FROM tbl2 WHERE tbl1.col1 = tbl2.col1) ELSE (SELECT 'X' FROM tbl3 where tbl1.col1 = tbl3.col1) END) 
```

用于测试目的的带有常量的演示查询：-

```
SELECT 1 WHERE EXISTS (SELECT CASE WHEN 1 = 0 THEN (SELECT 'X' WHERE 1=0) 
    ELSE (SELECT 'X' WHERE 1 = 2) END) 
```

注意： - 上面的查询总是返回 1，即使没有一个条件是满足的。

我知道我们可以使用 OR 运算符以及我们如何实现它，但我真的想知道，如果两个表都没有满足其特定 where 子句的行，即使它返回 Table1 中的所有行。

我试图用常量值的演示查询来解释相同的内容。

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T09:24:41.177

当您的查询没有找到任何匹配的记录时，它基本上会：

```
SELECT 1 WHERE EXISTS (SELECT NULL) 
```

由于包含空值的行仍然是行，因此该`EXISTS`命令返回 true。

您可以添加一个条件来过滤掉空行：

```
SELECT * FROM tbl1 WHERE EXISTS (
  SELECT 1 FROM (
    SELECT
      CASE WHEN @boolVar = 0 THEN (SELECT 'X' FROM tbl2 WHERE tbl1.col1 = tbl2.col1)
      ELSE (SELECT 'X' FROM tbl3 where tbl1.col1 = tbl3.col1)
      END AS Y
  ) Z
  WHERE Y IS NOT NULL
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:42:07.680

这是一个替代方案，以防万一：

```
SELECT *
FROM Table1
WHERE EXISTS (
  SELECT 1
  FROM Table2
  WHERE @var = @defValue
    AND ... /* other conditions as necessary */
  UNION ALL
  SELECT 1
  FROM Table3
  WHERE @var <> @defValue
    AND ... /* other conditions as necessary */
); 
```

# cakephp - CakePhp 分页和我自己的函数

> ID：12245035
> 
> 赞同：1
> 
> 时间：2012-09-03T09:17:28.523
> 
> 标签：cakephp

我的模型中有一个很大的功能。它返回包含照片和个人资料的朋友列表。正文中有两个带有循环的“发现”，因此并不容易。

现在我需要用分页显示这个列表。

是否可以使用我的方法创建分页？

不可能在一个查找（或分页）函数中获取此数据。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:39:44.797

**对的，这是可能的。**

您可以在模型上实现`paginate()`和`paginateCount()`方法，或将它们包含在附加到模型的行为中。行为实现`paginate`和/或`paginateCount`应该实现下面定义的方法签名，并带有正常的附加第一个参数`$model`：

[自定义查询分页](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html#custom-query-pagination)将执行您需要的相同操作。

# objective-c - CATransition 页面卷曲，中间有书脊

> ID：12245038
> 
> 赞同：0
> 
> 时间：2012-09-03T09:17:30.567
> 
> 标签：objective-c, ios, catransition

让页面卷曲动画工作很容易：

```
CATransition *transition = [CATransition animation];
[transition setDelegate:self];
[transition setDuration:0.5f];
[transition setType:@"pageCurl"];
[transition setSubtype:landscape ? @"fromBottom" : @"fromRight"];
[self.view.layer addAnimation:transition forKey:@"CurlAnim"]; 
```

但是，我的老板希望我在横向时让它从中间转向（就像在 iBooks 中一样）。我不能使用`UIPageViewController`，因为我还需要纵向滚动两页，以及横向和滚动同时放大两页。有没有办法做到这一点？现在它只是像一个巨大的横向页面一样卷曲整个视图。由于它使用两层，我怀疑有一种简单的方法可以做到这一点，但我想我会问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:44:21.267

你不能在 UIScrollerView 中使用 UIPageViewController 吗？

这样做您可以放大/缩小两个页面。

唯一的问题是，除非您有 zoom = 1，否则您无法更改页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T07:38:37.120

还在想这个，如果你强制 UIPageViewController 以横向和纵向显示 2 个页面，并将其放在 UIScrollerView 中。当您处于横向时，它会显示 2 页、缩放并按预期工作。如果你是纵向的，你可以让 UIPageViewController frame.width 是单页的 double，并且 UIScrollerView contentSize 和 UIPageViewController 一样宽，但是 UIScrollerView 框架宽度和一个页面一样宽。这样做你只显示一个页面并且可以滚动到第二个页面。我已经测试过并且在横向上工作正常，但在纵向上有一些问题，滑动更改页面不能从内部工作，但这从外部工作（这就是为什么我设置 _zoomer.frame = CGRectMake(10,10,widht ,height), 在 UIPageViewController 周围有一个 10 点的框架以从那里滑动),

我在屏幕旋转中使用的代码，仅适用于 iPad。

```
 - (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
CGRect pageViewRect;
if (UIInterfaceOrientationIsPortrait(toInterfaceOrientation)) {
    pageViewRect = CGRectMake(0,0,1496,984);
    _zoomer.contentSize=CGSizeMake(1496, 984);
    _zoomer.frame = CGRectMake(10,10,748,984);
    self.pageViewController.view.frame = pageViewRect;
} else {
    pageViewRect = CGRectMake(0,0,1004,728);
    _zoomer.frame = CGRectMake(10,10,1004,728);
    _zoomer.contentSize=CGSizeMake(1004, 728);
    self.pageViewController.view.frame = pageViewRect;
}
} 
```

_zoomer 是 UIScrollerView

# php - 奇怪的 apache/PHP POST 错误

> ID：12245039
> 
> 赞同：6
> 
> 时间：2012-09-03T09:17:39.570
> 
> 标签：php, apache, security, post, filtering

经过几个小时的错误搜索，我找到了一个可重现的测试。它使用一个简单的形式：

```
<form name="test" method="POST" action="test.php">
  <textarea name="content"></textarea>
  <input name="submit" type="submit" value="send"/>
</form> 
```

准确填写 textarea`substring((SELECT`并点击“发送”按钮后，服务器返回一般错误：`Connection with the server was reset while downloading` 我查看了 http error_log，但没有关于此的报告。

使用：

```
Linux 2.6.32-220.23.1.el6.x86_64
Build Date  Jul 3 2012
Server API  Apache 2.0 Handler 
Apache Version  Apache/2.2.15 (CentOS) 
Apache API Version  20051115 
PHP Version 5.3.3 
```

test.php 没有 PHP 代码，只有表单。如果我将文件重命名为 test.html 并更改 action="test.html" 错误仍然是一样的。

在 FF 15 和 Chrome 21 上测试，(ERR_CONNECTION_RESET)

Firebug：POST test.php 中止 192.168.1.1 0 192.168.1.1:80

* * *

apache 是否有可能过滤我的 POST 数据？我注意到在几个 apache 漏洞利用中都提到了**substring((SELECT**。我怎样才能禁用这种过滤器？

我的模块中看不到任何 mod_security。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T18:56:15.790

确保

```
echo '<pre>';
var_dump(apache_get_modules()); 
```

不列出 mod_security 或其他与安全相关的模块。

# gwt - 在哪里可以找到适用于 Windows 上的 Chrome 的 GWT 开发者插件？

> ID：12245048
> 
> 赞同：2
> 
> 时间：2012-09-03T09:18:00.343
> 
> 标签：gwt, chrome-web-store

> **可能重复：**
> [在 Chrome 中安装 GWT 插件](https://stackoverflow.com/questions/11901915/installing-gwt-plugin-in-chrome)

没有它，我无法足够快地测试我的 GWT 项目。我在 Chrome 网上商店找不到这个插件。虽然我可以下载插件，但 Chrome 表示它不会部署插件，除非直接从 Chrome 网上商店下载。有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T13:22:57.317

有两种方法可以绕过 Chrome 商店检查：

1) 在浏览器地址栏中键入“chrome://extensions”以打开“扩展”屏幕，然后将“.crx”扩展文件拖放到该窗口上。

2) 使用开关“--enable-easy-off-store-extension-install”从命令行启动 Chrome

# datanucleus - DataNucleus 是否以非本地时区的方式保留 JodaTime 的 DateTime？

> ID：12245049
> 
> 赞同：0
> 
> 时间：2012-09-03T09:18:03.180
> 
> 标签：datanucleus

在 UTC 时区给出时，Joda Time 的 DateTime 类的持久性是否不同？时间戳看起来不寻常（可能全为零）。

Joda Time 用`new DateTime(DateTimeZone.UTC)`. 它们是否以不熟悉的格式保存在 PostgreSQL 中？

```
"2012-09-02 23:43:44.642-07"
"2012-09-03 00:05:01.517-07"
"2012-09-03 00:10:30.704-07"
"1969-12-31 16:00:00-08"
"2012-09-03 00:23:40.556-07"
"1969-12-31 16:00:00-08"
"1969-12-31 16:00:00-08"
"1969-12-31 16:00:00-08" 
```

版本是：

1.  postgresql-9.1-901.jdbc4.jar
2.  DataNucleus 核心/RDBMS 3.1.1
3.  DataNucleus Joda Time 3.1.0-release。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:03:02.120

如评论中所述，通过将 PostgreSQL 的 JDBC4 驱动程序升级到“postgresql-9.1-901-1.jdbc4.jar”解决了这个问题。

# iphone - iPhone HTTP 服务器在模拟器上工作，但在 iPhone 设备上不工作

> ID：12245051
> 
> 赞同：1
> 
> 时间：2012-09-03T09:18:12.850
> 
> 标签：iphone, webserver, httpserver

我想在 iPhone 应用程序中嵌入网络服务器，以便从应用程序的文档目录下载文件。我正在使用[iPhone Http Server](http://code.google.com/p/cocoahttpserver/downloads/detail?name=iPhoneHTTPServer.zip&can=1&q=)。

在 iPhone 模拟器上一切正常。即使我能够使用 http://: 或 localhost: 获取文件。

但是在设备上我无法连接。Safari 说：“无法打开页面”。即使[http://iphone.local](http://iphone.local) : 在安装了应用程序的同一设备上也不起作用。

请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T10:38:31.730

您的应用程序进入后台，不是吗？我认为当您在 iOS 模拟器中试用您的应用程序时，您会使用 Mac 的 Safari。当您在 iPhone 上试用时，您的应用程序处于后台，而 iPhone 的 Safari 处于前台。

如果是这样，我相信以下内容可以帮助您：

cocoaHTTPServer 在后台不起作用。尝试保持您的应用程序前台并从其他机器访问它。

而且，没有办法一直维护服务器功能...... [https://devforums.apple.com/message/706241](https://devforums.apple.com/message/706241)

# html - 如何在 html 中制作一个看起来像这样的表格或制作一个无表格的表格

> ID：12245053
> 
> 赞同：0
> 
> 时间：2012-09-03T09:18:22.257
> 
> 标签：html, css

我必须在带有标题的 html 中呈现数据。下面是我正在努力解决的部分标题的图像。

![在此处输入图像描述](../Images/3c68df78738a1fcd654f2ba10306eeb3.png)

我设法旋转了文本，但问题是有重叠。

这是整个结构的代码。

```
<style type="text/css"> .text-rotation {
            -webkit-transform: rotate(90deg); 
            -moz-transform: rotate(90deg);
            filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1);
            -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";
            height:inherit;
            }
</style>
</head>

<body>
<table width="100%" border="1" align="center" cellpadding="3" cellspacing="1">
  <tr>
    <td rowspan="5">&nbsp;</td>
    <td rowspan="5" align="center" valign="bottom">Code</td>
    <td rowspan="5" align="center" valign="bottom">Change</td>
    <td rowspan="5" align="center" valign="bottom">Description</td>
    <td colspan="6" align="center" bgcolor="#FF6666">STOCK RANGE</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td colspan="2" align="center" bgcolor="#66CC00" >SPHERICAL</td>
    <td colspan="2" align="center" bgcolor="#FFCC00" >SPH/CYL-/-</td>
    <td colspan="2" align="center" bgcolor="#0066CC">SPH/CYL+/-</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td rowspan="3" align="center" bgcolor="#66CC00" class="text-rotation">MINUS</td>
    <td rowspan="3" align="center" bgcolor="#66CC00" class="text-rotation">PLUS</td>
    <td rowspan="3" align="center" bgcolor="#FFCC00" class="text-rotation">MINUS</td>
    <td rowspan="3" align="center" bgcolor="#FFCC00" class="text-rotation">PLUS</td>
    <td rowspan="3" align="center" bgcolor="#0066CC"  class="text-rotation">PLUS</td>
    <td rowspan="3" align="center" bgcolor="#0066CC" class="text-rotation">MINUS</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:28:17.833

快速模拟：

```
 <table border="1">
    <tr>
        <td colspan="6">STOCK RANGE</td>
        <td colspan="11">LENS PROPERTIES</td>        
    </tr>
    <tr>
        <td colspan ="2">SPHERICAL</td>
        <td colspan ="2">SPH/CYL</td>
        <td colspan ="2">SPH/CYL</td>
        <td rowspan="2">Stock</td>
        <td rowspan="2">Disclaimer</td>
        <td rowspan="2">Index</td>
        <td rowspan="2">UV Coating</td>
        <td rowspan="2">FOOBAR</td>
        <td rowspan="2">FOOBAR</td>
        <td rowspan="2">FOOBAR</td>
        <td rowspan="2">FOOBAR</td>
        <td rowspan="2">FOOBAR</td>
        <td rowspan="2">FOOBAR</td>
        <td rowspan="2">FOOBAR</td>
    </tr>
    <tr>
        <td>LEFT1</td>
        <td>LEFT2</td>
        <td>LEFT3</td>
        <td>LEFT4</td>
        <td>LEFT4</td>
        <td>LEFT5</td>
    </tr>
    <tr>
        <td>DATA_LEFT_1</td>
        <td>DATA_LEFT_2</td>
        <td>DATA_LEFT_3</td>
        <td>DATA_LEFT_4</td>
        <td>DATA_LEFT_5</td>
        <td>DATA_LEFT_6</td>
        <td>DATA_RIGHT_1</td>
        <td>DATA_RIGHT_2</td>
        <td>DATA_RIGHT_3</td>
        <td>DATA_RIGHT_4</td>
        <td>DATA_RIGHT_5</td>
        <td>DATA_RIGHT_6</td>
        <td>DATA_RIGHT_7</td>
        <td>DATA_RIGHT_8</td>
        <td>DATA_RIGHT_9</td>
        <td>DATA_RIGHT_10</td>
        <td>DATA_RIGHT_11</td>
    </tr>
</table>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

编辑2：一些视觉效果：[jsFiddle](http://jsfiddle.net/Ze6bz/)

编辑 3：一些新的视觉效果与其他答案合并：[jsFiddle](http://jsfiddle.net/Ze6bz/3/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:39:18.157

在非旧版 IE 中旋转项目会在旋转元素*之前计算其属性。*这意味着整个项目和背景将转移到文档流之外，可能不是您想要的表格。尝试旋转单元格内容，而不是单元格本身，如下所示：

```
.text-rotation > * {
        -webkit-transform: rotate(90deg); 
        -moz-transform: rotate(90deg);
        filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1);
        -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";
        height:inherit;
} 
```

`display:block`...并在单元格内容周围添加通用包装器...

```
<td rowspan="3" align="center" bgcolor="#66CC00" class="text-rotation"><div>MINUS</div></td>
<td rowspan="3" align="center" bgcolor="#66CC00" class="text-rotation"><div>PLUS</div></td>
<td rowspan="3" align="center" bgcolor="#FFCC00" class="text-rotation"><div>MINUS</div></td>
<td rowspan="3" align="center" bgcolor="#FFCC00" class="text-rotation"><div>PLUS</div></td>
<td rowspan="3" align="center" bgcolor="#0066CC" class="text-rotation"><div>PLUS</div></td>
<td rowspan="3" align="center" bgcolor="#0066CC" class="text-rotation"><div>MINUS</div></td> 
```

# c - Linux 3.5：从多个线程的同一个 fd `open(2)``/dev/urandom` 安全地`read(2)`？

> ID：12245054
> 
> 赞同：5
> 
> 时间：2012-09-03T09:18:26.667
> 
> 标签：c, linux, multithreading, pthreads, linux-device-driver

这样做是否安全：

```
int fd;

void thread_main()
{
    char buf[M];
    ssize_t r = read(fd, buf, M);
    assert(r == M);
    ...
}

int main()
{
    fd = open("/dev/urandom", O_RDONLY);

    for (int i = 0; i < N; i++)
         start_thread(i);

    for (int i = 0; i < N; i++)
         join_thread(i);
} 
```

那就是：从主线程`open(2)`ing之后，从不同线程上下文中不同步它是否安全？`"/dev/urandom"``read(2)`

什么情况下assert会火？两个线程会得到相同的数据吗？会出什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T10:48:36.973

你的代码是安全的，因为它不会崩溃。`assert`永远不会触发。没有两个线程将（*应该*）获得相同的随机数据（两个线程获得两个“不同”随机序列的可能性很小，但仍然有可能*偶然*相同，因此不能 100% 保证这一点）。

`/dev/urandom`永远不会阻塞或返回比您尝试读取的字节更少的字节，但是，如果您读取的数量足够大，它最终会耗尽熵，因此随机数的质量最终会略有下降。通常，这仍然足够好，并且在此之前也需要一段时间，但这是需要注意的事情（大多数人不需要关心，但可能*无法*接受，这取决于你做什么） .

`read`/`write`是线程安全的（只要它们不会崩溃或损坏数据或使描述符处于未定义状态），并且在这种特殊情况下，也不*应*在对不同进程的读取/写入之间混合/拆分字节。但是，通常`read`/`write` **不保证这一点**。它们*可能会*在某些设备上混合并发读/写数据。

但是，这应该不是问题，因为如果您获得一些其他随机位并且其他人获得介于两者之间的一些（不同）位，则随机位仍然是随机的。
如果您认为这对您来说是个问题，请使用`readv`它**保证**严格的原子性（永远不会混合/混合）。任何进出`readv`/`writev`的东西总是作为一个原子单元处理（*除了*在管道上，当超过 的大小时`PIPE_BUF`，正如 rodrigo 所指出的那样）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T09:31:51.163

read 是线程安全的，因为它是一个系统调用，如果您从多个线程进行多次读取，则每次读取都将被串行处理。也就是说线程 A 会读取 M 个字节，线程 B 会读取下一个 M 个字节，依此类推，而不是线程 A 读取几个字节，线程 B 读取几个字节，然后线程 A 读取更多字节。

写也是一样。

多个线程进行读取和写入的常见问题是，它们通常一次读取/写入 1 个字符，因此有很多机会混淆输入和输出的来源 - 通常混淆是由存在于读/写之上的语言运行时库添加

# sql - 加入 3 个表 pgsql

> ID：12245056
> 
> 赞同：2
> 
> 时间：2012-09-03T09:18:35.513
> 
> 标签：sql, postgresql, join

我有 3 个表，如下所示

```
table 1
________________________________________________
id | effective_date     | table_3_id | acc_name |
___|____________________|____________|__________|
112|2012-02-01 12:00:00 |     23     | Over Pay |
___|____________________|____________|__________|

table 2
__________________________________
id    | table_1_id     | amount  |
______|________________|_________|
 1    |    112         |  400.00 |
______|________________|_________|

table 3
________________________________________
id  | emp_num  | first_name  | last_name|
____|__________|_____________|__________|
 23 |   100004 |   John      |    Doe   |  
____|__________|_____________|__________| 
```

我有一个开始日期和一个结束日期，还有 acc_name 的预定义值。我想要做的是，从相关表中检索emp_num、first_name、last_name 和amount，这些表的有效日期在开始日期和结束日期之间，而且acc_name 应该是预定义的值。

对于上述表格，如果我的开始日期 = 2012-01-30 12:00:00 ，结束日期 = 2012-03-01 12:00:00 并且 acc_name = Over Pay；然后应该返回以下值。

```
emp_num = 100004  
first_name = John  
last_name = Doe  
amount = 400.00 
```

我怎样才能做到这一点？我不确定加入所有 3 个表是否是最好的方法。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:21:38.777

是的。使用连接。

```
select emp_num, first_name, last_name, amount
from 
    table1 
       inner join table2 on table1.id = table2.table_1_id
       inner join table3 on table1.table_3_id = table3.id
where
    effective_date between '2012-01-30 12:00:00' and '2012-03-01 12:00'
and 
    acc_name = 'Over Pay' 
```

没有 2 月 30 日。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:22:27.543

在这里，试试这个：

```
SELECT  a.emp_num,
        a.first_name,
        a.last_name,
        c.amount
FROM    table3 a
            INNER JOIN table1 b
                on a.id = b.table_3_id
            INNER JOIN table2 c
                on b.id = c.id
WHERE   b.effective_date BETWEEN '2012-01-30 12:00:00' AND '2012-02-29 12:00:00' 
        AND
        b.acc_name = 'Over pay' 
```

# c# - 在 Telerik 编辑器文件上传中隐藏新文件夹选项

> ID：12245061
> 
> 赞同：0
> 
> 时间：2012-09-03T09:18:54.873
> 
> 标签：c#, asp.net, telerik, radeditor

我在我的项目中使用 Telerik rad 编辑器。要添加图像，我正在使用图像管理器，单击图像管理器会打开弹出窗口，我可以在其中将多个图像上传到指定的文件夹。它还在同一个弹出窗口中向我显示图像编辑选项。我的要求是我不想向用户显示默认图像文件夹，也不想进行任何图像编辑。我还想隐藏添加新文件夹选项。请帮我。如果您有任何示例代码。请与我分享。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-15T08:15:05.743

```
<telerik:RadFileExplorer ID="RadFileExplorer1" Height="410px" Width="400px" TreePaneWidth="150px"
runat="Server" EnableOpenFile="false" AllowPaging="true" VisibleControls="TreeView,Toolbar,Grid,AddressBox"/> 
```

有关更多信息，请参阅此链接[http://goo.gl/k9LMuR](http://goo.gl/k9LMuR)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:49:28.943

我认为下面的 url 可以帮助你通过这个希望这会有所帮助:) [http://www.telerik.com/community/forums/aspnet-ajax/editor/radeditor---image-manager---removing-commands.aspx](http://www.telerik.com/community/forums/aspnet-ajax/editor/radeditor---image-manager---removing-commands.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:06:34.337

您可以自定义对话框，使您不希望用户看到的元素不可见，例如通过将其 display CSS 属性设置为 none 或通过编辑标记。有关示例，请参阅此演示：http: [//demos.telerik.com/aspnet-ajax/editor/examples/externaldialogspath/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/editor/examples/externaldialogspath/defaultcs.aspx)。请注意，仅删除控件可能会导致错误，因此您应该仔细测试自定义对话框。

关于您显示的文件夹 - 为了上传图像，您需要访问该文件夹，因此文件将显示给用户。您可以尝试实现自定义提供程序来隐藏某些文件，请参阅此演示：http: [//demos.telerik.com/aspnet-ajax/editor/examples/dbfilebrowsercontentprovider/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/editor/examples/dbfilebrowsercontentprovider/defaultcs.aspx)。

# curl - 如何根据 URL 下载图像并保存图像名称？

> ID：12245074
> 
> 赞同：0
> 
> 时间：2012-09-03T09:19:42.993
> 
> 标签：curl, web-scraping, wget, scrape, scraper

如何从网页下载所有图像并在图像名称前加上网页的 URL（所有符号替换为下划线）？

例如，如果我要从[http://www.amazon.com/gp/product/B0029KH944/](https://rads.stackoverflow.com/amzn/click/com/B0029KH944)下载所有图像，则主要产品图像将使用以下文件名保存：

www_amazon_com_gp_product_B0029KH944_41RaFZ6S-0L._SL500_AA300_.jpg

我已经安装了 WinHTTrack 和 wget 并且花费的时间比让他们做我想做的事情可能值得花费的时间更多，但我没有成功，所以 Stack Overflow 是我最后的努力。（如果您将构建选项设置为根据站点结构保存文件并编写脚本以根据文件的父目录重命名文件，WinHTTrack 就接近了，但问题是主图像托管在不同的域上。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:36:03.477

好吧，我在我的新[Webscraper](http://videlibri.sourceforge.net/xidel.html)中添加了一个下载选项。

有了它，你可以这样做：

```
 xidel "http://www.amazon.com/dp/B0029KH944/" -e 'site:=translate(filter($_url, "http://(.*)", 1), "/.", "__")'  -f //img -e 'image:=filter($_url, ".*/(.*)", 1)' --download '$site;$image;' 
```

首先 -e 读取 url 并删除 /。字符，-f 选择所有 imgs，-e 秒读取文件名，然后 --download 下载它......

虽然它的缺点是它试图将每个图像解析为一个 html 文件，这可能会减慢一点速度......

# asp.net-mvc-3 - 使用内联编辑时显示列并在显示模式下隐藏同一列

> ID：12245076
> 
> 赞同：1
> 
> 时间：2012-09-03T09:19:54.083
> 
> 标签：asp.net-mvc-3

我正在使用 Kendoui 网格，在此我需要在显示模式下隐藏该字段，

但是当我单击编辑按钮时，它应该显示该列。

例子：-

在显示模式中它显示 6 列，

在编辑模式下显示 7 列。

请发给我相关的示例代码。

提前致谢。

# c++ - 来自 socket.h 的 ::accept 的错误号在哪里

> ID：12245080
> 
> 赞同：1
> 
> 时间：2012-09-03T09:20:11.863
> 
> 标签：c++, linux, sockets, error-handling, throw

这是我到目前为止所拥有的

```
socklen_t cli_size;
struct sockaddr cli;
int in_sock;

/* event from TCP server socket, new connection */
cli_size = sizeof(cli);
try {
    if ((in_sock  = ::accept(handle,&cli, &cli_size)) < 0) {
        throw in_sock;
        return NULL;
        }
    }
catch(int ex) {
    cout << "Exception Nr. " << ex << endl;
    } 
```

从手册页：

> 出错时，返回 -1，并适当设置 errno。

问题：我还是不明白errno在哪里？我需要了解异常

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T09:25:13.033

`errno``accept`是一个全局整数变量，在系统调用失败后包含错误代码。您可能必须包含`<errno.h>`要定义的变量的头文件。

在您的情况下，您不应该抛出由返回的值，`accept`而是以下值`errno`：

```
try
{
    if ((in_sock = accept(...)) == -1)
        throw errno;
    // ...
}
catch (int error)
{
    std::cout << "Error code " << error << " (" << std::strerror(error) << ")\n";
} 
```

该函数[`std::strerror`](http://en.cppreference.com/w/cpp/string/byte/strerror)在头文件中声明`<cstring>`并返回描述错误的字符串。

重要说明： 的值`errno`仅**在**函数返回失败时才有效。如果在您的示例中`accept`成功，则值为`errno`未定义。

# c++ - 在控制台应用程序中检测按键？

> ID：12245081
> 
> 赞同：2
> 
> 时间：2012-09-03T09:20:12.317
> 
> 标签：c++, c, linux, keyboard, keypress

我需要在控制台应用程序中检测按键，而不提示用户。基本上，我的应用程序通常是一个监听特殊输入设备的守护进程，但我需要在开发盒上使用键盘以交互模式模拟它。我怎样才能做到这一点？- 我在 Linux 系统上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:31:57.190

如果在等待输入时无法阻塞，则可以使用 eg`select`检查`STDIN_FILENO`文件描述符是否已准备好读取，如果是，则可以使用普通输入函数（`scanf`、`fgets` `std::getline`等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:29:36.637

你检查这个[答案](https://stackoverflow.com/a/1488272/610351)，它解释了如何从输入事件中读取（通常`/dev/input/event0`）

或者直接查看答案的来源：

> 学分不归我所有，此代码取自 Ventriloctrl hack 以获取击键。 [http://public.callutheran.edu/~abarker/ventriloctrl-0.4.tar.gz](http://public.callutheran.edu/~abarker/ventriloctrl-0.4.tar.gz)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-03T15:18:11.020

这篇文章解释了如何做这样的事情。[http://thc.org/papers/writing-linux-kernel-keylogger.txt](http://thc.org/papers/writing-linux-kernel-keylogger.txt)

# android - 如何弹出对话框但仍然能够控制后台活动

> ID：12245085
> 
> 赞同：0
> 
> 时间：2012-09-03T09:20:27.003
> 
> 标签：android, android-layout

我目前正试图在某个活动时弹出一张图片，例如闹钟刚刚启动。当闹钟正在运行时，我想在闹钟常规时钟图片上弹出一张图片，但仍然允许用户关闭闹钟。到目前为止，我只能弹出一个透明的活动，它不会让你触摸背景中的任何东西。
想让图片只出现几秒钟然后消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:24:36.700

我认为这种方法可能会有所帮助。尝试弹出另一个活动，并将您的弹出图片作为该活动中的图像视图。而且由于您也想关闭警报，也许您可​​以在显示的活动中设置一个按钮，该按钮也可以控制警报。您可以通过编辑样式使活动透明并弹出。这些的答案在这里

[如何在 Android 上创建一个透明的 Activity？](https://stackoverflow.com/questions/2176922/how-to-create-transparent-activity-in-android)

# drupal - 使用 Drupal 权限控制 CiviCRM 访问

> ID：12245086
> 
> 赞同：2
> 
> 时间：2012-09-03T09:20:33.540
> 
> 标签：drupal, access-control, civicrm

我正在尝试在 CiviCRM 中设置访问控制系统，以限制某些用户对某些自定义数据字段集的访问。我计划使用 Civi ACL 来实现这一点，尽管我的理解是它们被 Drupal 权限覆盖，因此必须在 Drupal 权限内取消选中“CiviCRM：访问所有自定义数据”复选框。然后，我将能够使用 ACL 仅允许我想要的用户访问这些字段。

我的问题是我创建了一个 Drupal 角色“crm 用户”，但未选中此框，但是当我以具有此角色的用户身份登录时，我仍然可以看到所有自定义数据，这是我不应该做的。有谁知道我可能做错了什么？是否还有其他需要删除的 Drupal 权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-04T08:50:21.190

确保您的“crm 用户”角色具有所需的最低权限。正如@Flying 的回答中所述，“管理 CiviCRM”权限使用户可以访问整个 CiviCRM，因此会覆盖“访问所有自定义数据”权限。

请注意，如果您在匿名用户或登录用户需要访问的公开配置文件或表单中使用自定义数据字段，则这些角色将需要具有“访问所有自定义数据”权限，以便他们可以查看和完成这些字段，因此您需要小心设置用户角色和权限。

一旦您拥有 Drupal 权限，您就可以继续在 CiviCRM 中设置您需要的 ACL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-03T23:35:17.047

如果用户具有“管理 CiviCRM”的 Drupal 访问权限，则将覆盖“CiviCRM：访问所有自定义数据”设置。

因此，任何具有“管理 CiviCRM”的 Drupal 访问权限的用户都可以访问 CiviCRM 自定义数据，而不管“CiviCRM：访问所有自定义数据”设置如何。

# android - 何时在并行或同时运行的 AsyncTask 上调用 onPreExecute？

> ID：12245088
> 
> 赞同：1
> 
> 时间：2012-09-03T09:20:44.363
> 
> 标签：android, android-asynctask

我正在使用 Android HoneyComb。我需要并行执行一些任务，并且我正在使用 AsyncTask 的 **公共最终 AsyncTask executeOnExecutor (Executor exec, Params...params)**方法。在每个单独的线程中，我正在计算一些值，然后我需要将其存储在一个 ArrayList。然后我必须对 arrayList 中的所有值进行排序，然后将其显示在 UI 中。现在我的问题是，如果一个线程比另一个线程更早完成，那么它将立即调用**onPostExecute**方法还是 调用**onPostExecute**方法在所有后台线程都完成之后？我的程序实现取决于这里发生的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:31:48.010

现在......它是这样的......

`AsyncTask`同步 UI 线程，非 UI 的输出在非 UI 线程上工作。

`onPreExecute()`**在非 UI 工作开始之前在**`UI thread`上调用。

 **然后`doInBackground()` **执行**旋转非 UI 线程，此时`onProgressUpdate(Progress...)`保持**同时执行....但其执行高度不可预测。**

**`doInBackground(`)**之后**，`onPostExecute()` **在 UI 线程上运行。****

 ****有关详细信息，请参阅此链接：**

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:52:57.660

即使使用 onexecuteExecutor 会给你并行执行，每个异步任务一旦完成就会调用 postexecute。

但是 asynctask 会自行返回，以便您在必要时知道哪个是哪个，并跟踪它们的返回顺序。

[文档](http://developer.android.com/reference/android/os/AsyncTask.html#executeOnExecutor%28java.util.concurrent.Executor,%20Params...%29)

至于从多个线程管理数组列表，我认为您应该看看 Vectors，因为它们与快速失败行为同步。[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Vector.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Vector.html)****

# exception - iText pdf创建中的异常

> ID：12245089
> 
> 赞同：1
> 
> 时间：2012-09-03T09:20:48.937
> 
> 标签：exception, itext, java-5

我正在尝试使用 iText 生成一个表（仅用于测试，这就是为什么我不使用任何 servlet 和类）。我已将[本](http://www.geek-tutorials.com/java/itext/servlet_jsp_output_pdf.php)教程用作我的参考。该代码未显示任何错误，但在运行时出现异常

```
org.apache.jasper.JasperException: getOutputStream() has already been called for this response 
```

我使用 itext 版本 5.3.2，java 5。我的代码如下。

**我的代码**

```
<%@page import="java.io.DataOutputStream"%>
<%@page import="com.itextpdf.text.DocumentException"%>
<%@page import="java.io.DataOutput"%>
<%@page import="com.itextpdf.text.pdf.PdfPTable"%>
<%@page import="com.itextpdf.text.pdf.PdfWriter"%>
<%@page import="java.io.ByteArrayOutputStream"%>
<%@page import="com.itextpdf.text.Document"%>       
<%

response.setContentType("application/pdf");
Document document = new Document();
try{
ByteArrayOutputStream buffer = new ByteArrayOutputStream();
PdfWriter.getInstance(document, buffer);
document.open();

PdfPTable table = new PdfPTable(2);
table.addCell("1");
table.addCell("2");
table.addCell("3");
table.addCell("4");
table.addCell("5");
table.addCell("6");

document.add(table);
document.close();

DataOutput dataOutput = new DataOutputStream(response.getOutputStream());
byte[] bytes = buffer.toByteArray();
response.setContentLength(bytes.length);
for(int i = 0; i < bytes.length; i++)
{
dataOutput.writeByte(bytes[i]);
}

}catch(DocumentException e){
e.printStackTrace();
}

%> 
```

**例外**

```
org.apache.jasper.JasperException: getOutputStream() has already been called for this response
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:510)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:387)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:314)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:802)

root cause

java.lang.IllegalStateException: getOutputStream() has already been called for this response
    org.apache.catalina.connector.Response.getWriter(Response.java:606)
    org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:195)
    org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:124)
    org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:117)
    org.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:191)
    org.apache.jasper.runtime.JspFactoryImpl.internalReleasePageContext(JspFactoryImpl.java:115)
    org.apache.jasper.runtime.JspFactoryImpl.releasePageContext(JspFactoryImpl.java:75)
    org.apache.jsp.generatepdf_jsp._jspService(org.apache.jsp.generatepdf_jsp:99)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:332)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:314)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:802) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:10:38.910

在页面顶部使用 this

```
<%@ page trimDirectiveWhitespaces="true" %> 
```

我们还应该为您添加`flush`/`close`数据输出。

```
dataOutput.flush();
dataOutput.close();
return; 
```

# c# - 同时选择不同树视图中的2个节点

> ID：12245091
> 
> 赞同：1
> 
> 时间：2012-09-03T09:20:58.013
> 
> 标签：c#, winforms, treeview

我有 2 个 TreeView 控件，用户在 TreeView1 中选择一个节点，然后在 TreeView2 中选择一个节点。
问题是，当他选择另一个 TreeView 的节点时，前一个节点会离开焦点，这样用户就不会知道选择了哪个 TreeView。

有什么方法可以将注意力集中在 2 个 TreeNode 上或更改前景色/使所选节点变粗，以便所选节点仍然可见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:23:39.743

将 TreeView 的[HideSelection](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.hideselection.aspx)属性设置为 false：

> 获取或设置一个值，该值指示即使在树视图失去焦点时，选定的树节点是否仍保持突出显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:01:11.223

您可以有 2 个字段来跟踪您拥有的两个树视图的选定节点（使用`AfterSelect`事件）。就像是：

```
 private TreeNode selectedNodeA;
    private TreeNode selectedNodeB;

    private void treeViewA_AfterSelect(object sender, TreeViewEventArgs e)
    {
        //Reset color if was perviously highlighted
        if (selectedNodeA != null)
            selectedNodeA.BackColor = Color.White;

        selectedNodeA = e.Node;

        //Here you can indicate the node is selected, change background color or set font to
        // Bold or any other tricks!
        selectedNodeA.BackColor = Color.LightGray;

         //Rest of code
     } 
```

上面的代码适用于您需要与 winforms 使用的默认颜色不同的颜色（通过设置`HideSelection`为 Stuart 所说的 false 。

# ajax - 使用 rails 的 AJAX：购物车上的第一项未更新

> ID：12245095
> 
> 赞同：4
> 
> 时间：2012-09-03T09:21:11.260
> 
> 标签：ajax, ruby-on-rails-3, depot

我刚刚开始使用 Sam Ruby 的 Agile Web Development 学习 Ruby on Rails。我目前被困在任务 F：将 Ajax 添加到购物车。一切都很顺利，直到我添加了隐藏空购物车的代码。现在，当我添加第一个项目时，购物车在侧栏上显示为空（它应该在购物车中显示一个项目）但是当我添加第二个项目时，购物车应该显示为 2 个项目。代码有效如果我添加更多项目。只有在购物车中添加第一个商品时，我才会遇到这个问题。为了这个问题，我已经把头发扯了一天了。任何帮助将不胜感激。抱歉，如果我没有提供完整的细节。请让我知道相关的其他详细信息（如果有）。我正在使用 rails 3.2.8 和 ruby​​ 1.9.3 谢谢！

_cart.html.erb

```
<div class="cart_title">Your Cart</div>
  <table>
   <%= render(cart.line_items) %>

     <tr class="total_line">
             <td colspan="2">Total</td>
             <td class="total_cell"><%= number_to_currency(cart.total_price) %></td>
     </tr>

  </table>

<%= button_to 'Empty Cart',cart, method: :delete, confirm: 'Are you sure?'%> 
```

_line_item.html.erb

```
<%if @current_item==line_item%>
<tr id="current_item">
<% else %>
<tr>
<% end %>

  <td><%= line_item.quantity %> &times;</td>
  <td><%= line_item.product.title %></td>
  <td class="item_price" ><%= number_to_currency(line_item.total_price) %></td>
  <td><%= button_to 'Remove Item', line_item, method: :delete, confirm: 'Are you   sure?'%>
</tr> 
```

创建.js.erb

```
 $("#notice").hide();

 if ($('#cart tr').length > 0) { $('#cart').show('blind', 1000); }

 $('#cart').html("<%=j render @cart %>");

 $('#current_item').css({'background-color':'#88cc88'}).
   animate({'background-color':'#114411'}, 1000); 
```

应用程序.js.erb

```
<html>
  <head>
   <title>Pragprog Books Online Store</title>
    <!-- START:stylesheet -->
   <%= stylesheet_link_tag "scaffold" %>
   <%= stylesheet_link_tag "depot", :media => "all" %><!-- <label id="code.slt"/> -->
   <!-- END:stylesheet -->
   <%= javascript_include_tag "application" %>
   <%= csrf_meta_tag %><!-- <label id="code.csrf"/> -->
  </head>
  <body id="store">
   <div id="banner">
    <%= image_tag("logo.png") %>
    <%= @page_title || "Pragmatic Bookshelf" %><!-- <label id="code.depot.e.title"/> -->
   </div>
   <div id="columns">
    <div id="side">
       <a href="/">Home</a><br />
       <a href="/faq">Questions</a><br />
       <a href="/news">News</a><br />
       <a href="/contact">Contact</a><br />
       <%if @cart%>
       <%= hidden_div_if(@cart.line_items.empty?, id:"cart") do%>
               <%=render @cart%>
         <% end %>
       <% end %>

    </div>
    <div id="main">
     <%= yield %><!-- <label id="code.depot.e.include"/> -->
    </div>
   </div>
  </body>
 </html> 
```

~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-01T11:10:14.007

设法自己解决了:)..在输入问题时，我得到一个提示，问题出在渲染本身，所以它是..解决方案是将 { $('#cart 中的 show 参数设置为 0 ').show('盲', 1000); } 代码现在应该是 { $('#cart').show('blind', 0); }

@Btuman 完成！！

# objective-c - 将 nil 对象添加到自动释放池不会崩溃

> ID：12245097
> 
> 赞同：0
> 
> 时间：2012-09-03T09:21:20.743
> 
> 标签：objective-c, autorelease

我正在向自动释放池添加一个 nil 对象。但它不会使应用程序崩溃。为什么？？任何人都可以对此进行解释吗？我在下面给出的测试代码，

```
 UIView *testView = nil;
    [testView autorelease]; 
```

谢谢，奥古斯丁 PA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T21:56:34.607

发送*任何*消息`nil`总是不会导致任何事情发生。没有`autorelease`方法被调用——消息分发机制在接收者被调用时立即停止`nil`。

# ruby-on-rails - 生产服务器中的 Backbone JS 和 Rails 3.2 错误

> ID：12245100
> 
> 赞同：1
> 
> 时间：2012-09-03T09:21:38.950
> 
> 标签：ruby-on-rails, backbone.js

我这里有个问题。我正在开发一个使用 Rails 和 Backbone 构建的应用程序。在我的开发环境中，一切运行良好，但是当我将其部署到生产服务器时，我的 firebug 中显示了此错误：

> TypeError: this._reset is not a function
> ...;return a.success=function(d,e,f){ba.add?"add":"reset",c&&c(b,...

有人可以帮我吗？

**修订版 1**
我已经预编译了资产，这是我的 Gemfile ：

```
source 'https://rubygems.org'

gem 'rails', '3.2.0'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2'
gem 'devise', '1.5.3'
gem 'friendly_id'
gem 'pry'
gem "paperclip", "~> 2.5.0"
gem "kaminari"
#gem "ckeditor", "3.7.0.rc3"
gem "tinymce-rails"
gem "puma"
gem "tlsmail"
gem "rails-erd"
gem "juggernaut"
gem "thin"

#gem 'execjs'
#gem 'therubyracer'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer'

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

无论如何，我得到了这个新事实。我尝试在本地计算机上以生产模式运行该应用程序，它运行良好，但在我的服务器中却没有。有什么我忘了在我的服务器上安装的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:39:55.413

看来您手动安装骨干网。

我建议使用诸如骨干轨宝石之类的东西来帮助优雅地集成导轨和骨干。像[https://github.com/codebrew/backbone-rails](https://github.com/codebrew/backbone-rails)之类的东西（周围还有其他 gem，但 codebrew 实现是最受欢迎的实现之一）。

这是为了确保跨机器的一致性依赖。

不要忘记阅读资产管道，我在生产中使用 js 和 rails 的大部分问题来自于我对 rails 3 资产管道缺乏了解：http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

如果你认真考虑整合骨干网和 Rails，[https://learn.thoughtbot.com/products/1-backbone-js-on-rails](https://learn.thoughtbot.com/products/1-backbone-js-on-rails)是不可或缺的资源（49 美元）

**已编辑：** 这是我在创建主干.js 和 rails 应用程序时的典型 Gemfile：

```
group :assets do
  gem 'haml-rails', '~> 0.3.4'
  gem 'sass-rails', '~> 3.2.5'
  gem 'bootstrap-sass', '~> 2.0.3.1'
  gem 'compass', '~> 0.12.1'
  gem 'compass-rails', '~> 1.0.2'

  gem 'coffee-rails', '~> 3.2.2'
  gem 'jquery-rails', '~> 2.0.2'
  gem 'jquery-ui-rails', '~> 1.1.0'
  gem 'handlebars_assets', '~> 0.4.4'

  gem 'rails-backbone', '~> 0.7.2'

  # javascript
  gem 'haml_coffee_assets', '~> 1.2.0'
  gem 'execjs', '~> 1.4.0'
  gem 'therubyracer', '~> 0.10.1'
  gem 'uglifier', '~> 1.2.4'
  gem 'yajl-ruby', '~> 1.1.0'
end 
```

# java - Eclipse Juno red Linux 上的最小化和最大化按钮

> ID：12245102
> 
> 赞同：9
> 
> 时间：2012-09-03T09:21:40.787
> 
> 标签：java, button, minimize, eclipse-juno, maximize

我在 Linux 上使用 Gtk 版本 1.2.10 运行 Eclipse Juno 4.2.0，并且我在 GUI 中有以下图形“错误”：所有最小化和最大化按钮都有红色背景色。换句话说，最小化和最大化图标位于红色小方块内。

我不是在管理运行 Eclipse 的系统，因此即使可能，更新 Gtk 也不是很容易。如何解决问题？

编辑：我通过 VNC 使用 Eclipse。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-31T21:32:45.293

在 RHEL 5 / CentOS 5 上，当我将 VNC 的颜色深度更改为 24 位时，红色框消失了。例如，使用标准 VNC 服务器：

```
vncserver :10 -geometry 1280x960 -depth 24 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T02:56:44.210

它也适用于 Linux Mint。我已经使用它几个月了，没有任何问题。

编辑：我虽然使用的是 c/c++ 的版本，但我怀疑这会产生什么影响，因为你的是 java

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T15:06:08.950

不幸的是，自 2012 年 3 月以来，Eclipse 中存在一个已知错误（[错误 374985](https://bugs.eclipse.org/bugs/show_bug.cgi?id=374985)）。

分发中有各种重复，例如这个 FC17 [Bug 815941](https://bugzilla.redhat.com/show_bug.cgi?id=815941)。

您现在可以做什么：安装 Ubuntu 12.04：它可以在 KDE 和 Gnome、普通桌面或 VNC 中运行。

不幸的是，在 Centos 5 中，红色方块将继续出现在 Gnome 和 KDE 中。

# jquery - JQuery 自动完成演示

> ID：12245103
> 
> 赞同：0
> 
> 时间：2012-09-03T09:21:52.893
> 
> 标签：jquery, autocomplete

我正在使用 jquery 自动完成功能。

我使用的预期数据格式是

```
[ { label: "Choice1", value: "value1" }, ... ] 
```

它使用“标签”显示在菜单中，使用“值”显示在文本框中。

我希望菜单和文本框都显示“值”而不是标签。

这是我的代码

```
$(function() {
$( "#tags" ).autocomplete({
        source: [ { label: "Choice1", value: "value1" }, ... ]
    });
}); 
```

谢谢，

约翰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:25:52.707

所以你只需要`value`在数组中使用。

```
$(function() {
    $( "#tags" ).autocomplete({
        source: ["value1", "value2" ... ]
    });
}); 
```

或者转换源。

```
var data = [ { label: "Choice1", value: "value1" }, ... ];
$(function() {
    $( "#tags" ).autocomplete({
        source: data.map(function() {return this.value;})
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:05:09.883

我解决我的问题，

我为预期的数据格式添加了 id 并将标签值放入其中

代替

```
 [ { label: "Choice1", value: "value1" }, ... ] 
```

我正在使用

```
 [ { label: "value1", value: "value1",id:"Choice1" }, ... ] 
```

这样我可以保存标签值并完成我想要的，即只查看“值”

多谢你们！

# c# - 将不同的文本数量修复到 Web 浏览器内容

> ID：12245108
> 
> 赞同：2
> 
> 时间：2012-09-03T09:22:28.727
> 
> 标签：c#, css, webbrowser-control

我有一个`web browser`我`win form` 每次都用一些文本填充它的内容（每个循环中的文本大小几乎相同）。

我的网络浏览器大小是`fixed` 我想将我的内容文本以芳香的方式修复到浏览器内容（例如，如果我的内容文本大小大于网络浏览器内容，使用某种算法将其修复为内容并且不显示滚动）正是一些`Css`修复每个内容大小到网络浏览器大小

有可能吗？（可能是更改文本大小以获得最佳修复或...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:10:15.237

您真正需要做的就是将您的文本包装在一些 DIV 标记中，这将自动将文本封装在您的 DIV 中以适合窗口。

我假设您不想要水平滚动条，对吗？因为你没有具体说明，我只是猜测。如果它是您不想要的垂直滚动条，请告诉我。

否则，如果您的文本输入被放置在许多不同的区域，并且您确实需要对此进行更多的全局或通用控制，您可以更改 BODY 标签中的 WIDTH 属性以确保它完全正确，或者比它小几个像素WebBrowser 控件的宽度。

因此，如果您的 WB 控件宽度为 600，则可以将其放在已加载的 HTML 页面的 BODY 标记中（我假设您可以访问 HTML 页面，如果没有，请再次告诉我）。

`<BODY WIDTH="590">`

让我知道您的情况，如果我完全错过或误解了您的问题，请告诉我并添加必要的详细信息，以便我们了解您的需求。

干杯。

# javascript - 如何从表单调用外部 javascript 方法？

> ID：12245109
> 
> 赞同：1
> 
> 时间：2012-09-03T09:22:34.957
> 
> 标签：javascript, forms, include, submit

我想提交一个表格。但在此之前，我想验证它。验证是一种 javascript 方法。只要 javascript 方法与表单在同一个 .jsp 文件中，一切都可以。

但我想把它放到一个外部 javascript 文件中，并且该方法永远不会被调用。为什么？

这部分应该将 javascript 包含到 .jsp 文件中。

```
 <script type="text/javascript" src="Validate.js">
    var val = new Validate();
    var result= val.validateArticle();
</script> 
```

这是我要提交的表格：

```
<form name="articleAnswerForm" action="answer.html"
        action="answer.html" onsubmit="return result" method="post">
        Was is der Artikel?<br> <select name="art">
            <option>???</option>
            <option>der</option>
            <option>die</option>
            <option>das</option>
        </select> <input type="hidden" name="richtig" value="${selected.article}">
        <h1>${selected.german}</h1>
        <input type="submit" value="Antworten">
    </form> 
```

Validate.js 与 .jsp 文件位于同一目录中。这是 Validate.js （但它工作正常，如果它在 .jsp 文件中。）

```
function validateArticle() {
    var a = document.forms["articleAnswerForm"]["art"].value;
    var richtig = document.forms["articleAnswerForm"]["richtig"].value;
    if (a == null || a == "" || a != richtig) {
        alert("Nein " + a + " ist falsch");
        return false;
    }
} 
```

到目前为止，唯一可行的是，如果我将所有内容都放入一个 .jsp 文件中，如下所示

```
 <script type="text/javascript" >
function validateArticle() {
    var a = document.forms["articleAnswerForm"]["art"].value;
    var richtig = document.forms["articleAnswerForm"]["richtig"].value;
    if (a == null || a == "" || a != richtig) {
        alert("Nein " + a + " ist falsch");
        return false;
    }
}
</script> 
```

```
 <form name="articleAnswerForm" action="answer.html"
        action="answer.html" onsubmit="return validateArticle()" method="post">
        Was is der Artikel?<br> <select name="art">
            <option>???</option>
            <option>der</option>
            <option>die</option>
            <option>das</option>
        </select> <input type="hidden" name="richtig" value="${selected.article}">
        <h1>${selected.german}</h1>
        <input type="submit" value="Antworten">
    </form>

    <form:form method="post" action="word.html">
        <input type="submit" value="nächste Wort">
    </form:form>
</c:if> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:25:04.203

首先，您不能在一个`script`标签中混合使用 src-ref 和本地代码。

```
<script type="text/javascript" src="Validate.js"></script>
<script type="text/javascript">
    var val = new Validate(); // 'new Validate' won't work.
    var result= val.validateArticle();
</script> 
```

在 HTML 中，`onsubmit="return result"`可能不会做你想做的事。您想在提交时进行验证，不是吗？所以你必须调用该`validateArticle()`函数，而不是在页面加载时调用。并且不需要实例化一个`Validate`对象。

```
onsubmit="return validateArticle()" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:27:39.447

这就是你所需要的。您无需创建实例即可使用验证功能。

脚本：

```
<script type="text/javascript" src="Validate.js"></script> 
```

HTML 表单：

```
<form name="articleAnswerForm" action="answer.html"
    action="answer.html" onsubmit="return validateArticle()" method="post">
    Was is der Artikel?<br> <select name="art">
        <option>???</option>
        <option>der</option>
        <option>die</option>
        <option>das</option>
    </select> <input type="hidden" name="richtig" value="${selected.article}">
    <h1>${selected.german}</h1>
    <input type="submit" value="Antworten">
</form> 
```

因此，当您将 Javascript 移动到外部文件时。您无需执行任何特殊操作即可访问它。不需要实例化。如果它包含在文件本身中，只需使用 javascript。如果您发现它不起作用，则可能是文件加载不正确，在这种情况下，请检查文件是否在正确的目录中并且文件的大小写是否正确设置，因为某些文件系统区分大小写。

# cocoa - NSTableView：只有 numberOfRowsInTableView：数据源被调用

> ID：12245113
> 
> 赞同：1
> 
> 时间：2012-09-03T09:22:55.997
> 
> 标签：cocoa, nstableview

我遇到了一个关于 的问题`NSTableView`，它就像：tableview 的一个数据源被称为：

```
- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView
{
    return [self.dataArray count];
} 
```

但是这个从来没有被称为：

```
- (id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    // the code 
} 
```

我检查了数组确实有数据，还检查了 `[NSTableView reloadData]`在主线程中调用的。

所以我完全迷失了这个奇怪的问题。有人会给出一些提示吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:30:31.493

我将初始代码从 移动`awakeFromNib`到`init`，并且它正确调用。但我仍然不知道真正的原因。我想这对视图的生命周期很重要，因为具有 tableview 的类`NSObject`是`NSViewController`.

# php - 使用 preg_match 提取 MMS Ref

> ID：12245116
> 
> 赞同：0
> 
> 时间：2012-09-03T09:23:14.373
> 
> 标签：php, regex

好的，我有：

`<ASX version = "3.0"> <Entry> <Ref href = "mms://173.239.17.41/FGM-Streams/baker/000803-Heidi_Baker-Signs_&_Wonders-3.wmv" /> </Entry> </ASX>`

作为文件内容字符串，我只想提取 ref href = "...." 的行，这样我就可以获得彩信 URL。

我该怎么做`preg_match()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:30:18.000

如果您只需要匹配`mms`-links，您需要的正则表达式可能应该提及它：

```
if (preg_match('#(mms:[^"]*)#', $test_string, $matches) ) { ... } 
```

*（实际上，使用它可能会更好`mms:[^"'\s]*`，因为即使引号是单引号或完全省略它也会起作用）*

否则，只需捕获`href`部分：

```
if (preg_match('#href\s*=\s*"([^"]*)"#', $test_string, $matches) ) { ... } 
```

方法（通常）很简单：您捕获所有内容，从不是关闭分隔符的“开始分隔符”开始（`"`在您的情况下）。

# azure - SQL Azure 和索引

> ID：12245117
> 
> 赞同：9
> 
> 时间：2012-09-03T09:23:24.170
> 
> 标签：azure, azure-sql-database

SQL Azure 自动重建/重组索引是真的吗？

我们在 Sql Azure 上有一个数据库并且性能下降，我想这是一个城市传奇。

你能帮助我吗？

谢谢，马可

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-03T14:35:58.620

SQL Azure 不会在自动更新统计信息时自动重建索引。如果您有特定原因强制重建它，则必须直接发出命令。

这篇好文章可帮助您创建一个脚本来[动态重建 SQL Azure db 中的所有索引](http://blogs.msdn.com/b/dilkushp/archive/2013/07/28/fragmentation-in-sql-azure.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-03T06:21:53.030

Sql Azure 提供了一些不错的功能，如下所示：

智能性能 性能概览 性能建议 查询性能洞察 自动调优

密切关注统计数据，您还可以允许 azure 自动调整数据库索引、添加、删除它们以调整数据库性能。

希望能帮助到你。

# windows - jbi-registry.xml：文件过早结束

> ID：12245118
> 
> 赞同：0
> 
> 时间：2012-09-03T09:23:28.663
> 
> 标签：windows, glassfish-2.x, glassfish-esb

有时 Glassfish - OpenESB-v2.3 会出现以下错误：

```
jbi-registry.xml:1:1: Premature end of file. 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:23:28.663

当服务器或 Glassfish 重新启动或未正确关闭（有时 Windows 更新强制重新启动）时，有时会发生这种情况。然后文件**jbi-registry.xml**为空，我们得到上述错误。

要更正它，只需转到以下文件夹：

```
%GLASSFISH_ESB%/glassfish/domains/domain1/jbi/config 
```

并检查**jbi-registry.xml**是否为空。如果是这种情况，请将其替换为位于同一目录中且不应为空的**jbi-registry-backup.xml 。**

# javascript - 基于 Jquery 的 WYSIWYG 与 On-Air 可能性

> ID：12245122
> 
> 赞同：-1
> 
> 时间：2012-09-03T09:23:55.327
> 
> 标签：javascript, jquery, jquery-plugins, wysiwyg

我遇到了[http://redactorjs.com](http://redactorjs.com)，这是一个非常好的所见即所得编辑器，具有直播功能。换句话说，在一行中，您可以动态地将静态 div 转换为可编辑的文本区域。

我 - 不想 - 付钱（出于某些原因我不会透露）因此我正在寻找替代方案。

你有没有使用过轻量级的基于 jquery 的编辑器，可以轻松使用？

我正在寻找我会使用如下的东西：

```
$("#edit_btn").click(function({
     $("#my_div").turnIntoEditor();
}));

$("#save_btn").click(function({
     $("#my_div").post_content("http://target");
     $("#my_div").turnIntoStatic();
})); 
```

请不要介意 post_content 和其他函数名称，因为它们仅供参考，以显示我所关注的用法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:12:23.767

我终于去了ckeditor。我可以按如下方式轻松使用它（poc）：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
            <html xmlns="http://www.w3.org/1999/xhtml">

                <head>
                    <meta content="text/html; charset=UTF-8" http-equiv="content-type"/>
                    <title>Title</title>

                    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
                    <script type="text/javascript" src="ckeditor/ckeditor.js"></script>
                    <script type="text/javascript" src="ckeditor/adapters/jquery.js"></script>
                    <script type="text/javascript">
                        $(document).ready(function(){
                            $("#edit").click(function(){
                                $( '.editable' ).ckeditor();
                            });

                            $("#save").click(function(){
                                var editor = CKEDITOR.instances['editor'];
                                if (editor) { editor.destroy(); }

                                alert($('#editor').html());
                            });
                        });

                    </script>
                </head>
            <body>
                <span id="edit">EDIT</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span id="save">SAVE</span><br/><br/>
                <div class="editable" id="editor">
                    Some useless content
                </div>
            </body>
            </html> 
```

# c# - 跨内容页面在母版页文本框中保留文本

> ID：12245123
> 
> 赞同：0
> 
> 时间：2012-09-03T09:23:59.013
> 
> 标签：c#, asp.net, master-pages

我有一个带有用于输入日期的文本框的母版页。3 个内容页面使用此母版页，并根据输入的日期显示不同的数据。现在，当用户从一个内容页面切换到另一个内容页面时，我想在文本框中保留日期。是否可以在不使用 cookie、会话状态和查询字符串的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:28:47.400

我相当确定您可以使用 master`ViewState`来存储值，因为它独立于 ContentPage 的 ViewState。

因此，您可以设置`TextBox.Text`in`Page_load`并写入`ViewState`in `MasterPage.PreRender`。

# java - Spring 验证在来自 ServletContext 资源的 XML 文档中存在错误

> ID：12245124
> 
> 赞同：2
> 
> 时间：2012-09-03T09:24:00.600
> 
> 标签：java, xml, spring, validation

我在我的注册页面中应用了弹簧验证。但以下错误显示在我的应用引擎服务器的服务器日志中。

```
 javax.servlet.UnavailableException: 
    org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException:
    Line 22 in XML  document from ServletContext resource 
    [/WEB-INF/spring/appServlet/servlet-context.xml] is invalid; 
    nested exception is org.xml.sax.SAXParseException;
    lineNumber: 22; columnNumber: 30; 
    cvc-complex-type.2.4.c: The matching wildcard is strict, 
    but no declaration can be found for element 'property'. 
```

我的代码如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd 
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd >

    <beans:bean name="/register" class="com.my.registration.NewUserRegistration">
        <property name="validator">
            <bean class="com.my.validation.UserValidator" />
        </property>
        <beans:property name="formView" value="newuser"></beans:property>
        <beans:property name="successView" value="home"></beans:property>
    </beans:bean>
    <beans:bean
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

</beans:beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:30:17.547

您的文档的默认 XML 命名空间是`http://www.springframework.org/schema/mvc`，因此您应该为来自其他命名空间的所有元素使用命名空间前缀，包括来自`http://www.springframework.org/schema/beans`命名空间的元素：

```
<beans:property name="validator">
    <beans:bean class="com.my.validation.UserValidator" />
</beans:property> 
```

或者，您可以配置`http://www.springframework.org/schema/beans`为默认命名空间：

```
xmlns = "http://www.springframework.org/schema/beans" 
```

`mvc`显然，在这种情况下，如果有的话，您需要为命名空间中的元素使用命名空间前缀。

**也可以看看：**

*   [XML 命名空间](http://en.wikipedia.org/wiki/XML_namespace)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:28:15.307

这没有适当的 XML 命名空间前缀：

```
<property name="validator">
  <bean class="com.my.validation.UserValidator" />
</property> 
```

用作`beans`前缀。

实际上我建议使用`beans`命名空间作为默认的 XML 命名空间并创建`mvc`一个显式的命名空间。

# android - 如何在方向更改期间强制某些视图旋转，但让其他视图保持原样？

> ID：12245126
> 
> 赞同：2
> 
> 时间：2012-09-03T09:24:13.017
> 
> 标签：android, android-layout, android-orientation

为了简化，我想创建一个包含两个不同视图（例如按钮和图像）的活动。而且我只希望其中一个在方向变化时旋转，而另一个与方向无关。我发现了很多关于 iOS 案例的信息，但没有找到关于 Android 的信息。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T09:41:58.847

这非常简单，只需`screenOrientation`在清单文件中添加活动（您不想在方向更改时旋转的活动），如下所示：

```
<activity android:name=".Activity" 
android:screenOrientation="portrait" /> 
```

所有其他活动将在方向更改时自动旋转。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:28:17.347

您可以控制在每个活动的方向更改期间发生的情况。 [方向事件监听器](http://developer.android.com/reference/android/view/OrientationEventListener.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:28:21.613

制作两个布局文件并根据您的要求将其更改为 int 并放入 layout-land 和 layout 文件夹。

**横向视图的布局土地。**

**纵向视图的布局。**

# c# - 将泛型类型分配给属性

> ID：12245129
> 
> 赞同：0
> 
> 时间：2012-09-03T09:24:34.857
> 
> 标签：c#, generics

我希望我的对象能够引用它们所在的集合。

我有一个集合类来自`ObservableCollection<>`：

```
public class MyObservableCollection<T> : ObservableCollection<T> where T: class, IMyItem

public interface IMyItem
{
   MyObservableCollection<IMyItem> Owner;
} 
```

在其中，我已经覆盖了`Insert( )`and `Remove( )`，以便它可以将它自己分配给 上的属性`IMyItem`，但我不允许这样做，因为

```
Cannot implicitly convert type 'MyObservableCollection<T>' to
'MyObservableCollection<IMyItem>' 
```

我怎样才能解决这个问题？
可以/应该以完全不同的方式解决问题吗？

插入代码：

```
 protected override void InsertItem(int index, T item)
    {
        base.InsertItem(index, item);
        item.Owner = this;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:44:29.810

如果您这样定义界面，它应该可以工作：

```
public interface IMyItem<T> where T : class, IMyItem<T>
{
    MyObservableCollection<T> Owner { get; set; }
}

public class MyItem : IMyItem<MyItem>
{
    public MyObservableCollection<MyItem> Owner { get; set; }
}

public class MyObservableCollection<T> : ObservableCollection<T> where T : class, IMyItem<T>
{
    protected override void InsertItem ( int index, T item )
    {
        base.InsertItem ( index, item );
        item.Owner = this;
    }
} 
```

用法：

```
public class MyClass
{
    public static void Main ()
    {
        MyObservableCollection<MyItem> list = new MyObservableCollection<MyItem> ();
        list.Add ( new MyItem () );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:07:37.760

假设您有实现接口的 Item 类：

```
class Item : IMyItem
{
    public MyObservableCollection<IMyItem> Owner;
} 
```

现在，您正在创建一个新集合：

```
var myCollection = new MyObservableCollection<Item>();
myCollection.Insert(new Item()); 
```

现在，在您的`Insert()`方法中，您正在执行此任务：

```
newItem.Owner = this; 
```

但你`newItem.Owner`的类型`MyObservableCollection<IMyItem>`，而`this`更具体的类型`MyObservableCollection<Item>`。您遇到的是泛型[covariance/contravariance](http://msdn.microsoft.com/en-us/library/dd799517.aspx)的问题。`Item`可能继承自`IMyItem`，但`List<Item>`不继承自`List<IMyItem>`。

Stephan Bauer 的回答为您提供了一个解决方法，通过让`IMyItem`接口对其自身具有通用引用，从而跳过整个协方差问题。一个不同的想法是使用`IEnumerable<T>`而不是`ObservableCollection<T>`，因为`IEnumerable`它被定义为`<out T>`，这意味着它在继承期间支持协变。

# jquery - jquery 动态拖放手风琴

> ID：12245133
> 
> 赞同：0
> 
> 时间：2012-09-03T09:24:43.657
> 
> 标签：jquery, jquery-ui-accordion

我是 javascript 和 jquery 的新手，请帮忙，

我有一个我拖动的列表，例如

```
<ul class='drag-list'>
    <li>category 1</li>
    <li>category2</li>
    ------------
    ------------
</ul> 
```

把它放在

```
<div class='dropArea'>
    <div id="accordion"></div>
</div> 
```

当我删除列表时，它应该转换为accordin

我的拖放代码是

```
$( ".drag-list li" ).draggable({        
    helper:"clone"
});

$( ".dropArea" ).droppable({        
    drop:function(event,ui){        
        addCategory(ui.draggable.html());       
        $( "#accordion" ).accordion({
            collapsible: true,
            header:'h3'
        });
    }
});

Category = function(item){
    var category = $("<h3><a href='#'>"+item+"</a></h3> \
                      <div> \
                      <p>hello I am accordion</p> \
                      </div>");
    return category;
}

function addCategory(item) {
    var category = Category(item);
    $('#accordion').append(category);
} 
```

只有第一个阻力 li 得到手风琴之后没有添加任何课程

我还在类别对象上使用了 addClass('ui-accordion') 但仍然无法正常工作

请帮助我想不通

[http://jsfiddle.net/ZXYrx/](http://jsfiddle.net/ZXYrx/)

下面是我想要的截图

![在此处输入图像描述](../Images/7f788442b7e944e9be11903b848fdc99.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:14:44.623

您必须在每次下降时重新创建手风琴，因此请执行以下操作：

```
 $( "#accordion" ).accordion('destroy').accordion({
        collapsible: true,
        header:'h3'
    }); 
```

如果销毁删除了您的内容，则先获取它`var html = $('#accordion').html();`，然后再销毁。然后在重新创建之前设置内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:19:54.560

好的...就像 Kostantin 说的一样，顺便说一下，您需要销毁并重新制作手风琴：

像：

```
$( ".dropArea" ).droppable({        
    drop:function(event,ui){        
        addCategory(ui.draggable.html());       
        $( '#accordion' ).accordion( "detroy" ); // <-- destroy
        $( "#accordion" ).accordion({
            collapsible: true,
            header:'h3'
        });
    }
}); 
```

# java - 向蓝牙发现添加过滤器

> ID：12245135
> 
> 赞同：1
> 
> 时间：2012-09-03T09:24:49.463
> 
> 标签：java, android, bluetooth

当我开始我的蓝牙设备发现时，我只想发现外围设备，我的应用程序不能发现/显示其他设备。这怎么可能？

这就是我搜索设备的方式

```
 IntentFilter filter = new IntentFilter("android.bluetooth.devicepicker.action.DEVICE_SELECTED");
  registerReceiver(mBtPickReceiver,filter);

  startActivity(new Intent("android.bluetooth.devicepicker.action.LAUNCH")
 .putExtra("android.bluetooth.devicepicker.action.EXTRA_NEED_AUTH",false)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:31:10.870

要根据您的要求减少（过滤）搜索设备的数量，请检查所需蓝牙设备的**类类型**。知道类型后，您可以根据类别类型过滤搜索到的蓝牙设备。例如：

```
BluetoothDevice btd = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);

if(btd.getBluetoothClass().getDeviceClass() == BluetoothClass.Device.bla_bla_bla)
{
   //do whatever you want with the filtered device
} 
```

# r - 将整数区间拆分为长度几乎相等的 bin

> ID：12245136
> 
> 赞同：1
> 
> 时间：2012-09-03T09:24:51.477
> 
> 标签：r

可以说我有`start=1`，`end=12`而且间隔`start:end`。

我想将它拆分成箱，`x=2`这样我就会得到一个数据框

```
 start.index end.index
1           1         2
2           3         4
3           5         6
4           7         8
5           9        10
6          11        12 
```

在这种情况下，它会产生 6 个 bin。`start`, `end`, 和`x`总是整数

有什么功能可以做到这一点吗？很明显，当`start%%x!=0`一个垃圾箱可能比其他垃圾箱更大或更小，但我不介意。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:30:26.833

以下是此类函数的一个简单示例：

```
foo <- function(start, end, x = 2) {
    SEQ <- seq(start, end, by = x)
    END <- SEQ + (x - 1)
    take <- END > end
    END[take] <- end
    data.frame(start.index = SEQ, end.index = END)
}

R> foo(1, 12, 2)
  start.index end.index
1           1         2
2           3         4
3           5         6
4           7         8
5           9        10
6          11        12
R> foo(1, 12, 3)
  start.index end.index
1           1         3
2           4         6
3           7         9
4          10        12
R> foo(1, 12, 4)
  start.index end.index
1           1         4
2           5         8
3           9        12 
```

并且观察到奇数个，所以我们得到最后一个不同的 bin 宽度：

```
R> foo(1, 11)
  start.index end.index
1           1         2
2           3         4
3           5         6
4           7         8
5           9        10
6          11        11 
```

# nservicebus - NServiceBus 异常和错误队列

> ID：12245137
> 
> 赞同：0
> 
> 时间：2012-09-03T09:24:51.783
> 
> 标签：nservicebus

我是 NServiceBus 的新手。我有一个关于错误队列的问题。在我的 IHandleMessages 类中，抛出了一个异常。但是，消息不会发送到错误队列。日志文件中没有异常信息。即使我声明了一个 try catch 块，该异常似乎也没有被 try catch 块捕获有人可以帮我澄清 NserviceBus 中的错误队列和异常处理吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-29T03:35:31.060

消息可能正在重试并在第二次尝试中成功 [http://docs.particular.net/nservicebus/errors/automatic-retries](http://docs.particular.net/nservicebus/errors/automatic-retries)

# ruby-on-rails - 在 Rails 3 中的 Country 表中将长国名显示为短国名

> ID：12245142
> 
> 赞同：1
> 
> 时间：2012-09-03T09:25:08.370
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

关于从模型中表示字符串的问题。

我有一个`Country`包含国家/地区列表的模型。

这些国家的形式很长，例如。美国、英国等

我想以短名称形式表示这些数据，例如。美国、英国。

我真的不想更改表格列上的名称，因为在我的表单上我想保留长表单名称。

如果 self.id == 123 "USA"我想我会在模型中添加代码，`Country.rb`但我确信这不是正确的方法。

任何帮助都将是巨大的。

非常感激。

西部数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:43:06.567

最好将短名称存储在附加字段中，请参见以下链接：

*   [http://en.wikipedia.org/wiki/Country_code](http://en.wikipedia.org/wiki/Country_code)
*   [http://en.wikipedia.org/wiki/ISO_3166-1_alpha-3](http://en.wikipedia.org/wiki/ISO_3166-1_alpha-3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:44:53.997

您可以添加短格式列，或者您可以选择长格式名称的第一个字母，或者如果您可以使用 rails helper 选择国家/地区[http://guides.rubyonrails.org/form_helpers.html#time-zone-and-country-select](http://guides.rubyonrails.org/form_helpers.html#time-zone-and-country-select)

# javascript - 为 URL 捕获 .click

> ID：12245147
> 
> 赞同：0
> 
> 时间：2012-09-03T09:25:43.220
> 
> 标签：javascript, ajax

我对 Javascript/Ajax 比较陌生。

当用户点击某些网址时，我希望完全使用 Javascript/jquery 来处理点击。

```
<a class="row_edit" href="/sales_item/edit/{{ item.id }}"></a> 
```

我所做的是在这个 html 文件中添加一个 javascript：

```
 $(document).ready(function () {  
        $(".row_edit").click(row_edit);
    });

   function row_edit() {
      var url = $(this).attr("href") + "/";
      ...
   } 
```

这很好用，每次我单击 row_edit 时，javascript 都会触发并为我进行部分站点加载。但是在某些情况下，实际链接似乎会触发（我看到部分站点加载为整个屏幕）。似乎有一个竞争条件。

我认为确保只有 javascript 被触发的最佳方法是更改​​ to 的`href`内容`#`。这样我就可以确保 url 本身不会消失，只有我的 javascript 正在触发。但是，我将如何获得我的`url`价值`row_edit()`呢？

也许我在这里采取了错误的方法。你们如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:37:22.630

为了确保只有 javascript 被触发（取消点击的默认操作（导航）），您必须`preventDefault();`在点击处理程序中调用。

前任：

```
$(document).ready(function () {  
        $(".row_edit").click(row_edit);
    });

   function row_edit(event) {
      var url = $(this).attr("href") + "/";
      ...
      event.preventDefault();
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:29:23.953

我不确定使用 javascript 而不是 href 执行重定向的意图。无论如何，其中一种方法就在这里......

如果您正在为支持“data-”（HTML5）的现代浏览器实现，那么您可以使用这些属性

```
<a class="row_edit" data-url="/sales_item/edit/{{ item.id }}" href="#"></a> 
```

并修改 javascript 以获得适当的属性值

```
 var url = $(this).attr("data-url") + "/"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:34:26.630

```
<a href="#"> click me </a> 
```

1.  '#' 用于阻止 clcik

2.  通过 jquery 阻止默认事件。

3.  添加新的事件处理程序。

参考链接（jQuery）： -

[http://jsfiddle.net/8LeaP/](http://jsfiddle.net/8LeaP/)

# r - cut() - 包括最低值

> ID：12245149
> 
> 赞同：6
> 
> 时间：2012-09-03T09:25:48.200
> 
> 标签：r

我想使用定义的中断来削减我的数据`cut()`：

```
x = c(-10:10)

cut(x, c(-2,4,6,7))

[1] <NA>   <NA>   <NA>   <NA>   <NA>   <NA>   <NA>   <NA>   <NA>   (-2,4] (-2,4] (-2,4] (-2,4] (-2,4] (-2,4] (4,6]  (4,6]  (6,7]  <NA>   <NA>  
[21] <NA>  
Levels: (-2,4] (4,6] (6,7] 
```

但是，我也想获得水平`(minimum:-2]`和`(7:maximum]`. 在 car-package 的功能`recode()`中可以使用“lo:”。是否有类似的东西可用于切割？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T09:29:59.860

```
x <- -10:10

cut(x, c(-Inf, -2, 4, 6, 7, +Inf))

# Levels: (-Inf,-2] (-2,4] (4,6] (6,7] (7, Inf] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-22T12:50:04.653

您可以使用`min()`and`max()`来评估区间范围（如 Gavin 所述）并设置`include.lowest = TRUE`以确保最小值（此处：-10）是区间的一部分。

输入：

```
x = c(-10:10)

cut(x, c(min(x),-2,4,6,7,max(x)), include.lowest = TRUE) 
```

输出：

```
 [1] [-10,-2] [-10,-2] [-10,-2] [-10,-2] [-10,-2] [-10,-2] [-10,-2] [-10,-2] [-10,-2] (-2,4]  
[11] (-2,4]   (-2,4]   (-2,4]   (-2,4]   (-2,4]   (4,6]    (4,6]    (6,7]    (7,10]   (7,10]  
[21] (7,10]  
Levels: [-10,-2] (-2,4] (4,6] (6,7] (7,10] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-03T13:35:08.417

`findInterval`是答案。

```
i <- findInterval(x, c(-2,4,6,7))

cbind(x, i)

        x i
 [1,] -10 0
 [2,]  -9 0
 [3,]  -8 0
 [4,]  -7 0
 [5,]  -6 0
 [6,]  -5 0
 [7,]  -4 0
 [8,]  -3 0
 [9,]  -2 1
[10,]  -1 1
[11,]   0 1
[12,]   1 1
[13,]   2 1
[14,]   3 1
[15,]   4 2
[16,]   5 2
[17,]   6 3
[18,]   7 4
[19,]   8 4
[20,]   9 4
[21,]  10 4 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-03T09:45:59.100

`Inf`我在使用&之前遇到了填充问题`-Inf`（尽管这正是为什么在这个时间逃脱了我）所以一个更安全的解决方案可能是用适当扩展的最小值和最大值来填充：

```
x <- c(-10:10)
cut(x, c(min(x) -1 , -2, 4, 6, 7, max(x) + 1))

R> x <- c(-10:10)
R> cut(x, c(min(x) -1 , -2, 4, 6, 7, max(x) + 1))
 [1] (-11,-2] (-11,-2] (-11,-2] (-11,-2] (-11,-2] (-11,-2] (-11,-2] (-11,-2]
 [9] (-11,-2] (-2,4]   (-2,4]   (-2,4]   (-2,4]   (-2,4]   (-2,4]   (4,6]   
[17] (4,6]    (6,7]    (7,11]   (7,11]   (7,11]  
Levels: (-11,-2] (-2,4] (4,6] (6,7] (7,11] 
```

但在大多数情况下，Sven 的答案/解决方案就足够了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-05T23:09:33.927

We can also use `smart_cut` from package `cutr` :

```
# devtools::install_github("moodymudskipper/cutr")
library(cutr)

x <- -10:10
smart_cut(x, c(-2, 4, 6, 7), closed="right")

#  [1] [-10,-2] [-10,-2] [-10,-2] [-10,-2] [-10,-2] [-10,-2] [-10,-2] [-10,-2] [-10,-2] (-2,4]   (-2,4]   (-2,4]   (-2,4]   (-2,4]  
# [15] (-2,4]   (4,6]    (4,6]    7        (7,10]   (7,10]   (7,10]  
# Levels: [-10,-2] < (-2,4] < (4,6] < 7 < (7,10] 
```

It has an `expand` argument set to `TRUE` by default, setting it to `FALSE` makes it work like `base::cut`.

[more on cutr and smart_cut](https://github.com/moodymudskipper/cutr)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-28T11:38:36.537

(My) `santoku` package automatically extends breaks if necessary:

```
library(santoku)
x <- c(-10:10)

chop(x, c(-2, 4, 6, 7))

##  [1] [-10, -2) [-10, -2) [-10, -2) [-10, -2) [-10, -2) [-10, -2) [-10, -2) [-10, -2) [-2, 4)  
## [10] [-2, 4)   [-2, 4)   [-2, 4)   [-2, 4)   [-2, 4)   [4, 6)    [4, 6)    [6, 7)    [7, 10]  
## [19] [7, 10]   [7, 10]   [7, 10]  
## Levels: [-10, -2) [-2, 4) [4, 6) [6, 7) [7, 10] 
```

You can control this behaviour using the `extend` argument to `chop()`.

# jquery - dataTable 列渲染

> ID：12245161
> 
> 赞同：0
> 
> 时间：2012-09-03T09:26:34.717
> 
> 标签：jquery, html, ajax, json, datatable

我有一个来自服务器端的 JSON 数据结构：

```
"data":[
    { "subdata":{ "type":"RY", "config":{ "cash":200} }
    { "subdata":{ "type":"SR", "config":{ "cash":200, "chips":300} }
    { "subdata":{ "type":"SR", "config":{ "chips":300} }
    { "subdata":{ "type":"RY", "config":{ "bonus":200, "chips":400} }
    { "subdata":{ "type":"SR", "config":{ "bonus":100} }
] 
```

它呈现在视图中的表格中，如下所示：

```
<table id='table-config'>
    <tr><td>RY</td> <td>cash=200,</td> <td>Mode Amount=200</td></tr>
    <tr><td>SR</td> <td>cash=200,chips=300,</td> <td>Mode Amount=300</td></tr>
    <tr><td>SR</td> <td>chips=200,</td> <td>Mode Amount=200</td></tr>
    <tr><td>RY</td> <td>bonus=200,chips=400,</td> <td></td></tr>
    <tr><td>SR</td> <td>bonus=100,</td> <td>Mode Amount=600</td></tr>
</table> 
```

在渲染数据时，

第一列数据应该给出`type=RY/SR`，但第一个单元格在发出警告后变为空

> DataTables 警告（表 id = 'table-configs'）：从第 0 行的数据源请求未知参数 'subdata.type'，

第二列数据应该给出配置对象，但第二个单元格在抛出警告后变为空

> DataTables 警告（表 id = 'table-configs'）：从第 0 行的数据源请求未知参数 'subdata.config'，

对于第三列，渲染数据正在工作。

dataTable js 代码为：

```
function renderAmount(o, config){
    var amount = '';
    $.each(config, function(key, value){
        amount += key + '=' + value + ',';
    });
    return amount;
}

function renderGameMode(o, data){
    var game_mode= (data.type=='RY')? 'cash' : 'chips';
    var mode_value='';
    $.each(data.config, function(key,value){
        if(key == game_mode){
            mode_value = "Mode Amount="+data.config.key;
        }
    });
    return mode_value;
}

$('#table-configs').dataTable({
    'aaData': data.data,
    'bPaginate': false,
    'aoColumns':[
        { 'mDataProp': 'subdata.type' },
        { 'mDataProp': 'subdata.config', 'fnRender': renderAmount },
        { 'mDataProp': 'subdata', 'fnRender': renderGameMode }
    ]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:12:53.777

您在@Pradeep 此处发布的代码有问题。不应该是这样的

```
<tr><td>cash=200,</td></tr>
<tr><td>cash=200,chips=300,</td></tr>
<tr><td>chips=200,</td></tr>
<tr><td>bonus=200,chips=400,</td></tr>
<tr><td>bonus=100,</td></tr> 
```

如果不是，那可能是代码的问题！

# jakarta-ee - 内网和外网场景的REST服务

> ID：12245162
> 
> 赞同：1
> 
> 时间：2012-09-03T09:26:40.550
> 
> 标签：jakarta-ee, jboss7.x, resteasy

我正在开发一个使用 REST 服务的 Web 应用程序。要求是

1.  REST 服务必须公开
2.  由 Web 应用程序使用

Web 应用程序和 REST 服务是两个不同的战争文件。但将部署在同一应用程序服务器中。

由于 REST 服务部署在同一台服务器上，而不是使用`http://localhost/services/rest`URI，我可以使用一些不同的方法来获得更好的性能吗？我的意思是，除了使用 HTTP 之外，还可以使用 TCP 或其他一些方法来提高性能，因为这两个应用程序都部署在同一台服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:39:04.127

如果您使用典型的 REST 方法（例如 Resteasy，它是 JAX-RS 实现），那么您一定会使用 HTTP - 这是设计使然，所有 GET/POST、内容类型的东西都与 HTTP 通信处理相关联。

如果这两个应用程序必须交互，那么您可以考虑使用 Java 消息服务 (JMS) 或[Hessian](http://hessian.caucho.com)或普通 Java 套接字进行应用程序间通信，并在 Resteasy 上中继以公开外部 API。

# android - Android sdk facebook 如何知道用户何时不再使用您的应用

> ID：12245163
> 
> 赞同：4
> 
> 时间：2012-09-03T09:26:43.143
> 
> 标签：android, facebook-graph-api, sdk, native

我有一个问题，似乎没有找到解决方案。我有一个像Draw Something这样的游戏。所以用户必须授权我的应用访问它。我将所有用户的用户 ID 保存在 mysql 数据库中。

为了生成一个新游戏，我从我的数据库中选择了一个随机用户 ID。问题是我想知道哪个用户仍在使用我的应用程序。

碰巧有几个用户安装了您的应用程序，登录到 facebook，他们保存在我的数据库中，但过了一段时间他们卸载了该应用程序。如果有人随后生成了一个随机游戏，那么他很可能必须与我的应用程序的前用户（已经卸载我的应用程序的用户）玩。

有没有办法知道一个应用程序的仍然活跃的用户？我知道如果用户取消对您的应用程序的授权，我们可以使用 is_app_user 进行检查，但这不是我所关心的。用户很少取消对 imo 应用程序的授权。

现在，我只是通过选择以下随机用户进行检查：1）现在 - 7 天之间注册 2）现在 - 7 天之间最后一次打开应用程序

但是，这仍然不是一个优雅的解决方案。

如果有人知道解决方案，我也会用它来清理我的数据库（删除所有非活动用户）。

感谢您的输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:16:15.830

利用 GCM 可能会奏效

[http://developer.android.com/guide/google/gcm/gcm.html](http://developer.android.com/guide/google/gcm/gcm.html)

在本文档中：

> 当用户卸载应用程序时，它不会在 GCM 上自动取消注册。只有当 GCM 服务器尝试向设备发送消息并且设备回答应用程序已卸载时，它才会取消注册。此时，您的服务器应将设备标记为未注册（服务器将收到 NotRegistered 错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:42:17.813

您可以做到这一点的一种方法是让服务偶尔运行一次，告诉您该应用程序仍为 x 用户安装。

但是为什么不只使用活跃用户而完全忽略非活跃用户呢？每当要创建新游戏时，请查找玩家，如果无法联系，则该用户不在场，您将不得不寻找新玩家。

# ruby-on-rails - 我如何在rails中使用array.collect进行分页

> ID：12245164
> 
> 赞同：0
> 
> 时间：2012-09-03T09:26:47.087
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一组用户喜欢的故事，我想对其进行分页。

为此我尝试做：（在用户控制器中）

```
@stories = @user.likes.paginate(page: params[:page]).map { |e| e.story} 
```

但我得到一个错误： `undefined method 'total_pages' for #<Array:0x007f9548c4cdd8>`

部分：

```
<%= will_paginate @stories%> 
```

（顺便说一句，它可以正常工作而无需分页）我在这里做错了什么？

更多信息：

模型之间的联系：

用户模型

```
class User < ActiveRecord::Base
  has_many :stories
  has_many :likes
end 
```

喜欢型号：

```
class Like < ActiveRecord::Base
  belongs_to :user
  belongs_to :story
end 
```

故事模型：

```
class Story < ActiveRecord::Base
  has_many :likes , dependent: :destroy
  has_many :users , through: :likes, source: :users
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:42:07.030

在调用 paginate 之前添加下面的代码。

```
require 'will_paginate/array' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:22:05.483

When you call `map { |e| e.story}` you're throwing away the will paginate collection (which contains info such as which page are you on, total number of pages etc) and replacing it with a straight array.

Something like this should work:

```
likes = @user.likes.paginate(page: params[:page])
@stories = WillPaginate::Collection.create(likes.current_page, likes.per_page, likes.total_entries) do |pager|
  pager.replace likes.collect {|l| l.story}
end 
```

This creates a new will paginate collection with the same metadata, but new contents.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:50:01.427

最后一部分`.map { |e| e.story}`是原因。实际上要使用`will_paginate @stories`你需要有`@stories`as`will paginate`对象。但是在这里你得到的只是一个简单的数组，`stories`其中`total_pages`并不是真正未知的。

我没有尝试以下但它会有点像这样

```
#FOLLOWING LINE MAY NOT WORK DIRECTLY!!
@stories = @user.likes(:include => :story).paginate(page: params[:page]) 
```

关键是`@stories`应该有`paginate`函数的输出。然后`will_paginate`将使用列表。

**编辑：**这个怎么样。

```
@stories = (@user.likes.map { |e| e.story}).paginate(page: params[:page]) 
```

实际上我现在无法测试它，所以只是试图根据我的假设来解决它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T18:53:10.650

我听说了一些方法如何做到这一点

但最好的方法是添加到 User 模型中：

```
class User < ActiveRecord::Base
  has_many :stories
  has_many :likes
  has_many :liked_stories, through: :likes , source: :story
end 
```

并且在控制器中

```
@stories = @user.liked_stories.paginate(page: params[:page]) 
```

# c# - 如何在标签控件中下移一半的行

> ID：12245170
> 
> 赞同：0
> 
> 时间：2012-09-03T09:27:05.560
> 
> 标签：c#, .net, winforms

我使用标签控制。标签控件中包含的行太长，我希望行的一半向下移动。

例如标签看起来像这样：

> 关注美国政治，跟上最热门的政治辩论。

我希望它是这样的：

> 关注美国政治，跟上
> 
> 最热门的政治辩论，并分享您的。

知道如何实现这个吗？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:39:05.237

您可以使用以下技术。获取字符串的长度，将其除以`2`得到一半长度，从那里寻找空格并添加`Environment.NewLine`。以下几行：

```
string Text = "Follow American politics, keep up with the hottest political debates.";
int halfLength = Text.Length / 2;
int cuttOffPoint = Text.IndexOf(' ', halfLength);
Text = Text.Substring(0, cuttOffPoint) + Environment.NewLine+Text.Substring(cuttOffPoint);
yourLabel.Text = Text; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T09:31:39.583

你可以使用它：

```
label2.Text = "Follow American politics, keep up with the"+System.Environment.NewLine+ "hottest political debates, and share your"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T09:34:15.013

如果您只需要**文本换行**，请尝试以下操作：

首先，将标签的属性设置[`AutoSize`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.autosize)为`True`。

然后，下一个关键属性是[`MaximumSize`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.maximumsize.aspx)。您应该将其宽度（或高度）设置为固定值，而不是默认值 0。如果文本超过该宽度，标签将自动换行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T10:28:03.360

除了上面提到的方法，你可以使用`AutoSize = false`标签控件的 set 属性

# c# - 运行 TCP 服务器应用程序时 100% 的 CPU 使用率

> ID：12245172
> 
> 赞同：2
> 
> 时间：2012-09-03T09:27:10.750
> 
> 标签：c#, cpu-usage, tcplistener

我有一个 tcp 服务器应用程序，它接受更多数量的 tcp 客户端并从所有连接的客户端接收连续消息。

```
public void KeepListening()
    {
        while (IsRunning)
        {
                try
                {
                        Thread.Sleep(20);
                        if (tcpListener.Pending())
                        {
                            //Get the socket obtained from the tcpListener
                            TcpClient _Client = tcpListener.AcceptTcpClient();
                            NetworkStream ns = _Client.GetStream();
                            Thread.Sleep(20);
                            if (Stop_Status == false)
                            {
                                if (_Client.Connected)
                                {
                                    int DataBytes = _Client.Available;
                                    byte[] data = new byte[DataBytes];
                                    if (ns.DataAvailable == true)
                                    {
                                        ns.Read(data, 0, DataBytes);
                                        string Key = ASCIIEncoding.ASCII.GetString(data);
                                        string[] KeyCodes = Key.Split(',');
                                        if (Key != "" && ((KeyCodes[0].StartsWith("i"))))
                                            ProcessClient(_Client, KeyCodes[0], Key);
                                    }
                                }
                            }
                            else
                            {
                                ns.Flush();
                            }
                        }
                }
                catch
                {

                }
        }
    }

    void ProcessClient(TcpClient _Client, string Key,string Msg)
    {
        try
        {
            if (hashTable_Users.Count > 0)
            {
                if (hashTable_Users.Contains(Key))
                {
                    hashTable_Users.Remove(Key);
                }
            }
            hashTable_Users.Add(Key, _Client);
            hashusers = hashTable_Users.Count;
            this.MessageFromClient(Key, serverPortNo.ToString(), Msg);

            //StreamWriter sw = new StreamWriter(_Client.GetStream());
            //sw.WriteLine("1");
            //sw.Flush();

            object[] objarr = new object[5];
            objarr[0] = _Client;
            objarr[1] = Key;
            Thread ReceiveFromClient = new Thread(new ParameterizedThreadStart(ReceiveFromClients));
            ReceiveFromClient.Start(objarr);
        }
        catch
        {

        }
    }
   public void ReceiveFromClients(object obj)
    {
            object[] objarr = (object[])obj;
            TcpClient _Client = (TcpClient)objarr[0];
            NetworkStream ns = _Client.GetStream();
            while (IsRunning)
            {
                if (Stop_Status == false)
                {
                    if (_Client.Connected)
                    {
                        if (ns.DataAvailable)
                        {
                            try
                            {
                                int numBytesRead = _Client.Available;
                                byte[] data = new byte[numBytesRead];
                                ns.Read(data, 0, numBytesRead);
                                string MsgReceived = ASCIIEncoding.ASCII.GetString(data);
                                string clientKey = objarr[1].ToString();
                                this.MessageFromClient(clientKey, serverPortNo.ToString(), MsgReceived);
                            }
                            catch
                            {

                            }
                        }
                    }
                    else
                    {
                        break;
                    }
                }
                else
                {
                    ns.Flush();
                }
            }
    } 
```

`KeepListening()`用于接受发送请求的客户端。`ProcessClient()`并`ReceiveFromClients()`用于接收来自客户端的消息。

此应用程序正在使用 100% 的 CPU。

请建议我怎么做才能降低cpu利用率？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:35:16.720

通过查看您的代码，ReceiveFromClients 正在消耗大部分 CPU，因为 while (IsRunning) 并且如果只有数据可用，您正在读取。

为了解决这个问题，不要检查 IsAvailabele，调用 ReadMethod 阻塞线程，直到 ReadTimeOut 发生或已读取一些数据。根据接收到的字节数，处理您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:30:56.170

> 请建议我怎么做才能降低cpu利用率？

好吧，这看起来是一个糟糕的开始：

```
while (IsRunning)
{
    try
    {
        ...
    }
    catch
    {
    }
} 
```

如果您反复遇到异常，您将永远不会知道它 - 并且继续循环。你也有另一个空的 catch 块......你*真的*不应该抓住所有东西然后继续前进，甚至不记录。

同样在这里：

```
while (IsRunning)
{
    if (Stop_Status == false)
    {
        ...
    }
    else
    {
        ns.Flush();
    }
} 
```

如果`IsRunning`是真的，`Stop_Status`是假的，那只会紧循环，反复调用`Flush`......

# wix - Wix：将片段安装到多个位置

> ID：12245173
> 
> 赞同：0
> 
> 时间：2012-09-03T09:27:21.457
> 
> 标签：wix, wix3.5, wix3

> **可能重复：**
> [安装到不同位置但引用相同组件的功能](https://stackoverflow.com/questions/4941602/features-installed-to-different-locations-but-referencing-the-same-components)

我有一个 wix 安装程序，它安装了几个 Web 服务。安装服务后，我需要在已安装服务的每个二进制目录中安装某种插件。插件文件在一个单独的片段文件中，我用热生成它。问题是：如何将同一个片段安装到多个位置？

仅将它安装到一个位置不会是一个 pb - 然后我会在生成过程中为这个片段创建正确的文件夹结构。但我不知道如何在几个地方做到这一点。一个明显的替代方法是创建两个具有相同文件但文件夹结构不同的片段。wix 是否足够聪明，可以理解在这种情况下文件不应该被打包两次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:56:25.567

这个问题似乎是重复的。它实际上在这里得到了回答：

[安装到不同位置但引用相同组件的功能](https://stackoverflow.com/questions/4941602/features-installed-to-different-locations-but-referencing-the-same-components)

# visual-studio-2010 - VS 2010 后期构建事件是否支持多行？

> ID：12245174
> 
> 赞同：3
> 
> 时间：2012-09-03T09:27:22.143
> 
> 标签：visual-studio-2010, build

我需要在 VS postbuild 事件中执行多个命令。这可能吗？我如何分隔命令？新队？分号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T09:32:12.073

使用新行。

很容易，只是简单地测试了它。

从[如何：](http://msdn.microsoft.com/en-us/library/ke5z92ks.aspx)在 MSDN 上指定生成事件 (C#)：

> 构建项目时，会将构建前事件添加到名为 PreBuildEvent.bat 的文件中，并将构建后事件添加到名为 PostBuildEvent.bat 的文件中。如果您想确保错误检查，请将您自己的错误检查命令添加到构建步骤中。

如您所见，这些都进入批处理文件，因此您需要使用与批处理文件相同的语法。

# java - 如何在 MacOSX 中为 JRE 7 安装无限强度 JCE？

> ID：12245179
> 
> 赞同：39
> 
> 时间：2012-09-03T09:28:06.997
> 
> 标签：java, macos, jce

我为 MacOSX 安装了 Oracle JRE 7（不是 JDK），但我找不到 JCE 管辖文件的放置位置。

我需要用无限强度版本替换它们。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-04T11:48:32.757

我已经安装了 Oracle JDK，如果有帮助，我的目录是`/Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/jre/lib/security/`. 您的里程可能会有所不同，在这种情况下，只需运行`find . -name local_policy.jar`并查看结果。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-08-22T18:59:53.407

**这是针对 JDK 的，而不是针对 JRE 的**。

* * *

我在 Mac、OSx Lion 上，我曾经[`/usr/libexec/java_home`](https://stackoverflow.com/a/6588410/761771)找到我的 java 主页

```
/usr/libexec/java_home -V
# Matching Java Virtual Machines (3):
#     1.7.0_51, x86_64: "Java SE 7" /Library/Java/JavaVirtualMachines/jdk1.7.0_51.jdk/Contents/Home
#     1.6.0_65-b14-462, x86_64: "Java SE 6" /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
#     1.6.0_65-b14-462, i386:   "Java SE 6" /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
# 
# /Library/Java/JavaVirtualMachines/jdk1.7.0_51.jdk/Contents/Home

/usr/libexec/java_home
# /Library/Java/JavaVirtualMachines/jdk1.7.0_51.jdk/Contents/Home

/usr/libexec/java_home -v 1.6
# /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home

/usr/libexec/java_home -v 1.7
# /Library/Java/JavaVirtualMachines/jdk1.7.0_51.jdk/Contents/Home 
```

从这里您可以使用这个可执行文件并找到这些文件

```
find $(/usr/libexec/java_home -v 1.7) -name local_policy.jar
# /Library/Java/JavaVirtualMachines/jdk1.7.0_51.jdk/Contents/Home/jre/lib/security/local_policy.jar

find $(/usr/libexec/java_home -v 1.7) -name US_export_policy.jar
# /Library/Java/JavaVirtualMachines/jdk1.7.0_51.jdk/Contents/Home/jre/lib/security/US_export_policy.jar 
```

并将其与@ngreen 的答案结合起来以获取这些文件的 md5（如果需要）

```
find ~/Downloads/UnlimitedJCEPolicy -name *.jar |xargs md5
# MD5 (/Users/nperry/Downloads/UnlimitedJCEPolicy/local_policy.jar) = 9dd69bcc7637d872121880c35437788d
# MD5 (/Users/nperry/Downloads/UnlimitedJCEPolicy/US_export_policy.jar) = 3bb2e88a915b3cb003ca185357a92c16

find $(/usr/libexec/java_home -v 1.7) -name local_policy.jar | xargs md5
# MD5 (/Library/Java/JavaVirtualMachines/jdk1.7.0_51.jdk/Contents/Home/jre/lib/security/local_policy.jar) = f41ab8f64b1fa13fec7276579c420951

find $(/usr/libexec/java_home -v 1.7) -name US_export_policy.jar | xargs md5
# MD5 (/Library/Java/JavaVirtualMachines/jdk1.7.0_51.jdk/Contents/Home/jre/lib/security/US_export_policy.jar) = d5d126ae15abecb7d6e3a28b0d57543e 
```

你可以看到我还没有替换这些文件。

如果需要，请备份原始文件

```
mkdir ~/Downloads/JCEPolicy-originals-1.7/
cp $(find $(/usr/libexec/java_home -v 1.7) -name local_policy.jar)     ~/Downloads/JCEPolicy-originals-1.7/
cp $(find $(/usr/libexec/java_home -v 1.7) -name US_export_policy.jar) ~/Downloads/JCEPolicy-originals-1.7/ 
```

你可以用这个替换文件。

```
sudo cp ~/Downloads/UnlimitedJCEPolicy/local_policy.jar $(find $(/usr/libexec/java_home -v 1.7) -name local_policy.jar)
sudo cp ~/Downloads/UnlimitedJCEPolicy/US_export_policy.jar $(find $(/usr/libexec/java_home -v 1.7) -name US_export_policy.jar) 
```

得到 MD5 会告诉我它是否有效

```
find $(/usr/libexec/java_home -v 1.7) -name local_policy.jar | xargs md5
# MD5 (/Library/Java/JavaVirtualMachines/jdk1.7.0_51.jdk/Contents/Home/jre/lib/security/local_policy.jar) = 9dd69bcc7637d872121880c35437788d

find $(/usr/libexec/java_home -v 1.7) -name US_export_policy.jar | xargs md5
# MD5 (/Library/Java/JavaVirtualMachines/jdk1.7.0_51.jdk/Contents/Home/jre/lib/security/US_export_policy.jar) = 3bb2e88a915b3cb003ca185357a92c16 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-02-07T15:53:02.400

您对[Thom](https://stackoverflow.com/users/24618/thom)答案的评论是正确的。JRE 路径为`/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/`，而 JCE 文件则位于`lib/security/`.

我碰巧安装了多个 JVM，所以我认为值得展示一种方法来检查特定 JVM 是否具有正确的文件。以下是一些可用于确定给定 Java 安装是否配置正确的命令：

```
find ~/Downloads/UnlimitedJCEPolicy -name *.jar |xargs md5
cd /Library/Java/JavaVirtualMachines/  # -OR-
cd '/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/'
find . \( -name local_policy.jar -or -name US_export_policy.jar \) |xargs md5 
```

一旦知道文件的路径，就可以根据需要替换它们。请记住，每个 Java 版本可能需要不同的 JCE 库。根据兼容性，您可能需要为 6、7 和 8 使用单独的 jar。

# javascript - ajax给出空白响应

> ID：12245184
> 
> 赞同：0
> 
> 时间：2012-09-03T09:28:27.833
> 
> 标签：javascript, jquery

我在该位置存储了一个 xml 内容，`http://localhost:8080/cleo-primer/rest/elements/search?uid=1&query=facebook`

```
<element-list><element><term>facebook</term><name>Bing Facebook</name></element></element-list> 
```

我正在发送一个获取请求

```
 $.get('http://localhost:8080/cleo-primer/rest/elements/search', { uid: 1, query: request.term }, function(responseData){alert(responseData);}); 
```

但这给了我一个空白响应，当我使用我的萤火虫检查时，它显示 XML Parsing Error: no element found Location: moz-nullprincipal:{1e7688d3-7b3c-43ae-9142-5b183a7cbfda} 第 1 行，第 1 列：在 XML标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:37:29.667

您正在进行不允许的跨源调用。您正在呼叫：`http://localhost`至`http://localhost:8080`。调用没有执行，也不会有响应。Chrome/Safari 将在控制台中显示如下错误：

> XMLHttpRequest 无法加载`http://targeturl`Origin`http://localhost`是 Access-Control-Allow-Origin 不允许的。

更多信息：[http ://en.wikipedia.org/wiki/Same_origin_policy#Origin_determination_rules](http://en.wikipedia.org/wiki/Same_origin_policy#Origin_determination_rules)

如果您可以对后端进行修改，使其发送正确的标题，将解决您的问题......（`Access-Control-Allow-Origin yourdomain`或`Access-Control-Allow-Origin *`允许所有）

更多信息：[http ://enable-cors.org](http://enable-cors.org)

还有几个其他选项要完成......

*   如果您使用 apache：您可以使用**apache 代理**将端口 8080 上的位置转发（映射）到不同的端口（如默认端口 80）我刚刚发布了一个关于它的[问题/答案](https://stackoverflow.com/questions/7807600/apache-mod-proxy-configuring-proxypass-proxypassreverse-for-cross-domain-ajax)......
*   您也可以使用通过脚本标签加载资源的技术来使用**jsonP**（它不是 xml，而是 json），如果您的 json 适合它，您可以加载 json。（包装它一个回调函数调用）
*   如果你不能这样做，你唯一的选择就是**代理脚本**。代理脚本是一种中间件。您向脚本发出请求，脚本获取数据并将其返回给您。例如[php 代理](http://jquery-howto.blogspot.de/2009/04/cross-domain-ajax-querying-with-jquery.html)。你可以在 asp、jsp、flash 甚至 java applet 中做同样的事情。

# android - Android TextView 拖放

> ID：12245187
> 
> 赞同：0
> 
> 时间：2012-09-03T09:28:40.983
> 
> 标签：android, drag-and-drop

我想用`SDK >= 8`. 我想拖动`TextView`元素并将其放在其他视图上。

在支持库中有一个新`MotionEvent`类，我可以使用它，但我害怕我无法处理它。我看到了一些关于画布的教程，但我不想使用它。

`TextView`有人可以用简单的代码告诉我如何实现简单的拖放`ImageView`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:41:00.713

对于 SDK>=11，Android 提供了拖放框架。

但是对于旧 SDK 的简单拖放，请查看此站点[http://techdroid.kbeanie.com/2010/04/simple-drag-n-drop-on-android.html](http://techdroid.kbeanie.com/2010/04/simple-drag-n-drop-on-android.html)

# c# - 通过提交按钮传递值？

> ID：12245190
> 
> 赞同：0
> 
> 时间：2012-09-03T09:28:50.030
> 
> 标签：c#, javascript, asp.net-mvc, submit

我试图通过表单的提交按钮传递值。

这些是我需要的值：

```
[HttpPost]
        public ActionResult Upload() //string token, string filename, string moddate, object file
        {
            Dictionary<string, string> parameters = new Dictionary<string, string>();
                parameters.Add("Token", token);
                parameters.Add("FileName", filename);
                parameters.Add("ModDate", DateTime.Today.ToString());
                parameters.Add("File", file);

            String compleat = "Complete";  
            return View(compleat);              
        } 
```

这是我尝试获取值的地方：

```
<form action="/Home/Upload" method="post" enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file" />
@string token = @Model.Token;
@string fileName = file.tostring();
@File actualfile = file;
<br>
<input type="submit" name="submit" value="Submit" /> 
```

我想做这样的事情，我的 JavaScript 可能是错误的，因为我是新手。

单击提交后，如何从家庭控制器访问变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:48:07.930

在 MVC 中，您想使用视图模型。还可以使用 html.beginform 帮助程序，这样您的代码就不会看起来那么混乱。

上传视图模型.cs

```
public class UploadViewModel
{
    public string Token { get; set; }
    public string FileName { get; set; }
    public string ModDate { get; set; }
    public object File { get; set; }
} 
```

家庭控制器.cs

```
 public ActionResult Upload()
    {
        TempData["Status"] = "";
        return View(new UploadViewModel());
    }

    [HttpPost]
    public ActionResult Upload(UploadViewModel upload) //string token, string filename, string moddate, object file
    {
        //*** Do something with the upload viewmodel

        // It's probably a good idea to store the message into tempdata
        TempData["Status"] = "Complete";
        return View();
    } 
```

上传.cshtml

```
@model UploadViewModel

@Html.Label(TempData["Status"].ToString())
@using (Html.BeginForm())
{
    @Html.LabelFor(model => model.Token)
    @Html.EditorFor(model => model.Token)
    @Html.LabelFor(model => model.ModDate)
    @Html.EditorFor(model => model.ModDate)
    @Html.LabelFor(model => model.FileName)
    @Html.EditorFor(model => model.FileName)
    <input type="submit" name="submit" value="Submit" />
} 
```

这是非常基本的东西，你应该阅读一些教程。像这些：[http ://www.asp.net/mvc/tutorials](http://www.asp.net/mvc/tutorials)

# android - 为什么我不能以这种方式从意图中获得额外信息？

> ID：12245192
> 
> 赞同：-2
> 
> 时间：2012-09-03T09:28:55.960
> 
> 标签：android, android-intent, extra

在上一个活动中，我这样做了：

```
int entryId = 10;
intent.putExtra("entry_id", entryId); 
```

然后在结果活动中

首先我尝试了这个：

```
entry_id = this.getIntent().getExtras().getInt("entry_id"); 
```

它总是给我默认值`0`

但我改成这样：

```
entry_id = this.getIntent().getIntExtra("entry_id", 1); 
```

它给出了正确的值（10）。

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:30:17.433

尝试这个`entry_id = this.getIntent().getIntExtra("entry_Id", 1);`

变化是使用`I`in `id`。这是您的 get() 中的资本

原因是 key 区分大小写

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:31:55.793

在您的第一种情况下更改 `entry_Id`为`entry_id`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:33:06.023

你应该使用`entry_id`而不是`entry_Id`

# c# - 如何从 ASPx 页面向 sqlserver 发送 ref int 值？

> ID：12245193
> 
> 赞同：3
> 
> 时间：2012-09-03T09:28:56.090
> 
> 标签：c#, sql, sql-server, data-access-layer

我有这个返回用户 ID 的存储过程：

```
ALTER PROCEDURE dbo.GetUserID
(
@TopicID int, 
    @AskerID int
)
AS
SELECT       @AskerID = Post.Pt_CreatedBy 
WHERE        (Topic.Tp_ID = @TopicID)
RETURN @AskerID 
```

现在，当我使用 C# 从数据访问层页面调用它时，我使用了这个函数：

```
 MyDatabaseDataContext StudyAppdb = new MyDatabaseDataContext();

public int GetUserID(int TopicID)
    {
        int UserID = -1;
        UserID = db.GetUserID(TopicID, UserID);
        return UserID;
    } 
```

但是 GetUserID 应该采用 (int , ref int).... 我不知道什么是 ref int 以及如何将它传递给函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T09:33:44.067

由于`GetUserID`应该采取`(int , ref int)`，所以在调用此方法时还应显式使用`ref`关键字。与其调用该方法，`db.GetUserID(TopicID, UserID)`不如使用`ref`关键字，例如：

```
public int GetUserID(int TopicID)
{
    int UserID = -1;
    UserID = db.GetUserID(TopicID, ref UserID);
    return UserID;
} 
```

您可以阅读有关[`ref`关键字](http://msdn.microsoft.com/en-us/library/14akc2c7.aspx)的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T09:31:44.357

您可以编写函数而不是存储过程，如下所示

```
CREATE FUNCTION dbo.GetUserID
(
@TopicID int, 
    @AskerID int
)
RETURNS INT
AS
BEGIN
SELECT       @AskerID = Post.Pt_CreatedBy 
WHERE        (Topic.Tp_ID = @TopicID)
RETURN @AskerID
END 
```

或使用 OUTPUT 参数更改程序。然后您必须更改数据访问层代码以捕获该值..

# php - ajax/json fetch 的错误处理

> ID：12245195
> 
> 赞同：0
> 
> 时间：2012-09-03T09:28:59.663
> 
> 标签：php, jquery, ajax, json

此代码片段是 html 5 独立网页的一部分。有人可以告诉我如何更新此代码以要求该人在他们无法访问该网址时检查他们的互联网连接吗？现在它什么都不做，这是不可接受的。

```
//get grid for station
function insertTideGrid(marker, stationId, defaultCenter) {
    currentMarker = marker;
    currentStationId = stationId;
    if(grids['station'+stationId]) {
        addTextToInfowindow(marker, grids['station'+stationId], defaultCenter);
    } else {
        addTextToInfowindow(marker, '<img src="../images/ajax-loader.gif" /> <br /> Loading...', defaultCenter);
        $.ajax({
            url: 'http://www.mydomain/page.php',
            dataType: 'jsonp',
            type: 'GET',
            data: {'station': stationId, 'json': true},
            success: function(data){
            }
        })
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:30:29.257

[ajax 函数](http://api.jquery.com/jQuery.ajax/)可以让你精确的错误回调；

```
$.ajax({
        url: 'http://www.mydomain/page.php',
        dataType: 'jsonp',
        type: 'GET',
        data: {'station': stationId, 'json': true},
        success: function(data){
        },
        error: {
            alert('Please check your internet connection and reload the page');
        }
    }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:31:36.453

```
//modify your ajax like this

 $.ajax({
            url: 'http://www.mydomain/page.php',
            dataType: 'jsonp',
            type: 'GET',
            data: {'station': stationId, 'json': true},
            success: function(data){
               // do you wat you want here..its OK
            },error:function(msg){
           alert(msg); //you will get the error here
           }
        }); 
```

# c# - 如何处理 asp.net mvc3 中的多个单选按钮？

> ID：12245198
> 
> 赞同：1
> 
> 时间：2012-09-03T09:29:14.500
> 
> 标签：c#, asp.net-mvc-3, radio-button

我有这样的表：

```
id value

3 var1
6 var2
81 var3 
```

所以我需要为每条记录显示两个单选按钮，例如：

```
var1
O Yes
O No

var2
O Yes
O No

var3
O Yes
O No 
```

其中“O”是单选按钮。

但我不知道如何在控制器中处理它。当然可以有更多的记录。我应该如何命名它们或其他东西。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:11:45.177

你有没有尝试过这样的方法？

//模型

```
public class MyModel
{
   public int SomeProperty { get; set; }
   public int SomeOtherProperty { get; set; } 

   public IList<MyDetails> RadioButtonList{ get; set; }
}

public class MyDetails
{
   public string Name { get; set; }
   public string Id { get; set; }
} 
```

// 控制器

```
public ActionResult Index()
{
  MyModel myModel = new MyModel()
  {
   RadioButtonList = getListFromDB();
   SomeProperty  = valuse       
  };

  return View(myModel);
} 
```

//看法

```
@foreach (var item in Model.RadioButtonList)
{
   <b>@item.Name</b>
   @Html.RadioButton("@item.Id", "0", true); <span> Yes </span><br />
   @Html.RadioButton("@item.Id", "1", false); <span> No </span><br />   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:14:35.263

为了使它起作用，您需要给每对单选按钮一个不同的组名。这确保了每个组合只能选择是或否。

# polygon - 计算不规则房间的面积

> ID：12245199
> 
> 赞同：2
> 
> 时间：2012-09-03T09:29:20.487
> 
> 标签：polygon, area, vertex

有一个鹅卵石商人。他出售用于擦亮地板的鹅卵石。他的主要职责是测量房间两侧的长度。但他有时会犯错，错误会导致损失。所以，他来找你，让你做一辆智能小车，它可以沿着房间的墙壁跑，并计算它们的长度。

汽车必须从它开始的地方回来。这意味着起点与终点相同。当汽车给出房间墙壁的长度时，您可以计算地板的表面积。

***知道了表面积***，你就可以计算出用鹅卵石覆盖整个地板的价格。1平方米的面积需要3公斤的鹅卵石。鹅卵石的价格为每公斤 5 美元。

例如，使用两个数组说明了汽车的测量值。

`Array 1 = {L, R, L, R, R, L, R, R, L, R, R, L, R, L, L, R, Z}`

其中 `L`表示，汽车左转。`R`表示汽车右转。Z 表示，终点在最后一圈之后。下图将消除任何误解（在此示例中`Array 1 = {L, R, R, R, Z}`）。

`Array 2 = {3, 4, 2, 3, 2, 4, 5, 4, 2, 3, 2, 1, 2, 2, 2, 1, 2}`

的元素`Array2`表示经过相应转弯后汽车所经过的长度（以米为单位）。

`{3L, 4R, 2L, 3R, 2R, 4L, 5R, 4R, 2L, 3R, 2R, 1L, 2R, 2L, 2L, 1R, 2Z}`

在这个表示中，可以清楚地看到从入口转折点的方向以及到下一个转折点的距离。中的最后一个元素表示 中对应的长度`Z`是最后的距离，车子在跑完这个长度后到达终点。 `Array1``Array2`

给定图片的面积是63平方米，覆盖它的成本是945美元。！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:31:12.667

只需保存每个顶点的每个坐标。[然后用它来计算面积](http://en.wikipedia.org/wiki/Shoelace_formula)

您首先需要从 L,2 R,5 中导出绳索，...。

```
Start from origin(assuming downwards is +y and rightwards is +x on screen):

L,2---->go left 2 units.           Result: P1=(-2,0)
R,1---->turn right and go 1 units. Result: P2=(-2,-1)
R,3--->turn right and go 3 units.  Result: P3=(1,-1)

...
...

Lets say we have 3 points: P1=(-2,0), P2=(-2,-1), P3=(1,-1)
Area=0.5*abs(x1*y2+x2*y3+x3*y1-x2*y1-x3*y2-x1*y3)
    =0.5*abs(2+2+0-0+1-2)
    =0.5*3.0
    =1.5 units 
```

[当您编写时，Wolframalpha.com 给出了相同的结果（1.5）：](http://www.wolframalpha.com/input/?i=triangle%20area%20%28-2,0%29%20%28-2,-1%29%20%281,-1%29)

["三角形面积 (-2,0) (-2,-1) (1,-1)"](http://www.wolframalpha.com/input/?i=triangle%20area%20%28-2,0%29%20%28-2,-1%29%20%281,-1%29)

使用所有这些点作为 Shoelace_formula 的数据来获得封闭区域 关于此的数学是：

![在此处输入图像描述](../Images/7d708dd6a001d5dafac50f23cce87a67.png)

然后，您唯一需要将其与卵石/面积/金钱的成本相乘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T10:24:01.663

这个问题实际上是无法回答的；你必须知道汽车每转多少弯。假设每一个转弯都是直角的，huseyin tugrul buyukisik 的，答案是可惜好。

# java - mvc中的jquery文件树错误

> ID：12245204
> 
> 赞同：1
> 
> 时间：2012-09-03T09:29:45.200
> 
> 标签：java, jquery, model-view-controller, jersey, jstree

我正在使用 jquery 文件树来显示我的本地文件系统，但是我遇到了一些问题。嗯，我在我的项目中使用了maven+jersey+guice，并且我修改了版本jsp，我在我的controler中创建了一个类，代码如下：

```
@Path("/monurl")
@POST
@Produces({MediaType.TEXT_HTML})
public Response getGsp(@Context HttpServletRequest request) throws UnsupportedEncodingException
{

    StringBuffer buffer = new StringBuffer();

    String dir = request.getParameter("dir");

    if (dir == null) {
        return Response.ok("").build();
    }

    if (dir.charAt(dir.length()-1) == '\\') {
        dir = dir.substring(0, dir.length()-1) + "/";
    } else if (dir.charAt(dir.length()-1) != '/') {
        dir += "/";
    }

    dir = java.net.URLDecoder.decode(dir, "UTF-8"); 

    if (new File(dir).exists()) {
        String[] files = new File(dir).list(new FilenameFilter() {
            public boolean accept(File dir, String name) {
                return name.charAt(0) != '.';
            }
        });
        Arrays.sort(files, String.CASE_INSENSITIVE_ORDER);
        buffer.append("<ul class=\"jqueryFileTree\" style=\"display: none;\">");
        // All dirs
        for (String file : files) {
            if (new File(dir, file).isDirectory()) {
                buffer.append("<li class=\"directory collapsed\"><a href=\"#\" rel=\"" + dir + file + "/\">"
                    + file + "</a></li>");
            }
        }
        // All files
        for (String file : files) {
            if (!new File(dir, file).isDirectory()) {
                int dotIndex = file.lastIndexOf('.');
                String ext = dotIndex > 0 ? file.substring(dotIndex + 1) : "";
                buffer.append("<li class=\"file ext_" + ext + "\"><a href=\"#\" rel=\"" + dir + file + "\">"
                    + file + "</a></li>");
                }
        }
        buffer.append("</ul>");
    }

    log.debug("Response content {}", buffer.toString());
    return Response.ok(buffer.toString()).build();  
} 
```

对于代码 javascript：

```
 $(document).ready( function() {

            $('#JQueryFTD_Demo').fileTree({
              root: '/home/y.zhang/kernely/kernely/work/',
              script: '/ged/monurl',
              expandSpeed: 1000,
              collapseSpeed: 1000,
              multiFolder: true
            }, function(file) {
                alert(file);
            });         
        });
    </script> 
```

但是我总是遇到遍历我的文件夹的问题，并且从萤火虫中，我观察到我的服务器返回 200 OK 128ms。那么，我的代码有问题吗？提前致谢。

# asp.net - 区分 ASPxHiddenField 的 Set 和 Get 方法

> ID：12245205
> 
> 赞同：0
> 
> 时间：2012-09-03T09:29:48.907
> 
> 标签：asp.net, devexpress

我发现 Add 方法和 Set 方法是相同的功能，但我不知道这两种方法有什么不同？能解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:35:44.730

方法映射到[Dictionary](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx) Add 和 indexer 方法。如果键已经存在，Add 方法将抛出异常。Set 方法将覆盖现有值。

```
ASPxHiddenField hiddenField = new ASPxHiddenField();
hiddenField.Add("key1", "value1");
hiddenField.Set("key1", "value2");  // this will properly set key1 value
hiddenField.Add("key1", "value3");  // this will throw exception 
```

# visual-studio - Visual Studio 中构建操作内容和“复制到输出目录”之间的区别

> ID：12245208
> 
> 赞同：49
> 
> 时间：2012-09-03T09:29:53.843
> 
> 标签：visual-studio, buildaction

在我的 Visual Studio 项目中，我有一些文件要包含在输出中，但不是编译或嵌入的。

我知道有两种方法可以做到这一点。

1.  将文件的构建操作设置为“内容”
2.  将“复制到输出目录”设置为“始终复制”或“如果较新则复制”

有人可以告诉我有什么区别以及每个选项适合哪种情况吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-03T09:37:56.720

设置为`Build Action`时`Content`，文件不会被编译，会被放到内容输出组中。

文件是否获得副本取决于当时的`Copy to Output Directory`设置。

当然，如果你设置`Copy Always`一个文件，它*可能会*被编译*然后*复制。

请参阅MSDN 上的[文件属性：](http://msdn.microsoft.com/en-us/library/0c6xyb66(v=vs.100).aspx)

> 内容 - 文件未编译，但包含在内容输出组中。例如，此设置是 .htm 或其他类型的 Web 文件的默认值。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-28T06:36:48.153

内容构建操作在 WPF 项目（也可能是 ASP）中具有明显的效果*。*

它增加了

```
[assembly: System.Windows.Resources.AssemblyAssociatedContentFileAttribute("filename")] 
```

到`WpfApplication1_Content.g.cs`. 阅读有关[`AssemblyAssociatedContentFileAttribute`](https://docs.microsoft.com/en-us/dotnet/api/system.windows.resources.assemblyassociatedcontentfileattribute).

在 WinForms 和控制台应用程序（OP 可能正在使用的）中，它不会执行此操作，因此在构建时与*None操作没有区别。*

在[此评论](https://stackoverflow.com/q/145752/850848#comment29008347_145769)中，我还发现了关于对部署的影响的说明：

> 另请注意，*使用一键式部署时将包含内容*，但即使选择了“如果较新则复制”也不会包含内容。

可能这甚至适用于控制台和 WinForms 应用程序（我没有尝试过）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-02-07T17:27:23.703

即使没有更改任何代码，始终复制也会触发解决方案中该项目的重建。

# r - 如何在不关心顺序的情况下生成所有可能的向量组合？

> ID：12245213
> 
> 赞同：12
> 
> 时间：2012-09-03T09:30:05.290
> 
> 标签：r

在数据框中，我有一列包含字符串。假设它看起来像这样：

```
x <- unique(df[,1])
x
"A" "A" "B" "B" "B" "C" 
```

我想将唯一字符串的所有可能组合作为 2 个集合获得，而不关心它们的顺序，因此`A, B`与 相同`B, A`，我不想获得与组合相同的值`A, A`。到目前为止，我得到了这一点：

```
comb <- expand.grid(x, x)
comb <- comb[which(comb[,1] != comb[,2]),] 
```

但这仍然留下了具有相同字符串组合的行以不同顺序排列的问题。我该如何摆脱这个？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-03T09:35:30.553

包里面有个`combn`函数`utils`：

```
t(combn(LETTERS[1:3],2))
#      [,1] [,2]
# [1,] "A"  "B" 
# [2,] "A"  "C" 
# [3,] "B"  "C" 
```

我对您的`x`值重复的原因感到有些困惑。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-03T09:34:56.917

我想你正在寻找`combn`：

```
x <- c("A", "A", "B", "B", "B", "C")
combn(x,2) 
```

给出：

```
 [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14] [,15]
[1,] "A"  "A"  "A"  "A"  "A"  "A"  "A"  "A"  "A"  "B"   "B"   "B"   "B"   "B"   "B"  
[2,] "A"  "B"  "B"  "B"  "C"  "B"  "B"  "B"  "C"  "B"   "B"   "C"   "B"   "C"   "C" 
```

如果你只想要唯一的值（如果它是调用的结果，`x`我不知道为什么你首先有重复的值）：`x``unique()`

```
> combn(unique(x),2)
     [,1] [,2] [,3]
[1,] "A"  "A"  "B" 
[2,] "B"  "C"  "C" 
```

# git - 如何在 Eclipse 中为 github 上的 repo 配置我的 git 远程分支？

> ID：12245215
> 
> 赞同：1
> 
> 时间：2012-09-03T09:30:10.140
> 
> 标签：git, github

我在本地有一个项目，我推送到 github。每次我尝试将提交推送到 github 时，它都会要求我提供远程 url。我不能配置它，让它自动推送到我想要的分支。

我尝试在存储库视图中设置远程跟踪，但它开始克隆我不需要的存储库，因为我已经在本地同步了我的分支。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:21:30.063

最简单的方法是在新目录中尝试以下过程，以查看问题是否仍然存在：

*   克隆您的 GitHub 存储库（这样，我们确信`git remote -v`将为您的新本地存储库显示正确的远程）
*   git checkout the right branch：切换到你要处理的分支
*   对其进行新的提交
*   `git push -u origin yourBranch`：这会将上游（跟踪）引用添加到`origin/yourBranch`.

该分支的下一次推送可以使用简单的`git push`.
您不必再次指定远程 url。

# hibernate - Java Hibernate 在内存更改中回滚

> ID：12245217
> 
> 赞同：4
> 
> 时间：2012-09-03T09:30:14.903
> 
> 标签：hibernate, transactions, rollback, in-memory

我使用 Hibernate 来保存我的内存数据。有时 Hibernate 由于某些错误而拒绝提交我的对象中的更改，并执行回滚。在这种情况下，我的内存数据变得不一致，我也需要它回滚。

我的问题是：是否有任何规范/实现可以帮助我跟踪和撤消内存中的更改。在尝试自己编写这段代码之前，我想确定我不会发明轮子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:06:18.427

无法回滚内存中的对象。但是正确的数据在数据库中，因此您只需忘记内存中的数据，并从数据库中获取它们的新副本：

1.  `foo`从数据库中获取
2.  `foo`在内存中修改
3.  尝试提交事务以`foo`在数据库中更新：异常
4.  `foo`再次从数据库中获取

# makefile - Makefile 在多目标规则中保留一些中间体

> ID：12245229
> 
> 赞同：1
> 
> 时间：2012-09-03T09:30:47.167
> 
> 标签：makefile, gnu-make

我使用以下 Makefile 部分：

```
.PHONY: all
all: _MyModule.so

_%.so: %.pb.cc %.pb.h
    python setup.py build

%.pb.cc %.pb.h: %.proto
    protoc --cpp_out=. $^  # Generate these two files together 
```

我希望`make`创建`_MyModule.so`文件并删除中间体`MyModule.pb.cc`和`MyModule.pb.h`. 在实践中发生的情况是只有一个文件被删除（`.h`或`.cpp`）。我还注意到，这取决于它们在`_%.so`依赖项列表中出现的顺序。

谁能解释这种行为？

我怎样才能优雅地去除所有的中间体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:44:33.560

多么奇特。我会冒昧地说这看起来像 GNUMake 中的一个错误。具有多个目标的模式规则具有特殊行为，并且这种行为似乎与中间文件的处理不正确（并且`.INTERMEDIATE`没有帮助）。

我不会称这是一个优雅的解决方案，但它确实有效：

```
%.pb.cc: %.pb.h
    @:

%.pb.h: %.proto
    ... 
```

**PS**原来这是一个[已知的错误](http://savannah.gnu.org/bugs/?func=detailitem&item_id=32042)。

# asp.net - 自动回发不起作用

> ID：12245233
> 
> 赞同：1
> 
> 时间：2012-09-03T09:30:57.010
> 
> 标签：asp.net, postback, autopostback

我有一个组合框，它应该根据它的新值在更改时重新加载页面。

`<asp:dropdownlist id="{ElementId}" Runat="server" AutoPostBack="true" Enabled="True"></asp:dropdownlist>`

我的问题：它可以打开和关闭。在使用调试器后，我发现有一些 javascript 行有时会出现，有时不会。他们来了：

```
<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['Form1'];
if (!theForm) {
    theForm = document.Form1;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script> 
```

我假设 .Net 生成器负责这些行，有时它们不存在似乎很有趣。我们正在使用 .Net 4.0。

此外，当它不起作用时，似乎缺少另一个元素，一个名为“aspNetHidden”的div在它起作用时存在：

```
<div class="aspNetHidden">
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__LASTFOCUS" id="__LASTFOCUS" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="..." />
</div> 
```

当它不起作用时，只会出现：

```
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="..." /> 
```

此外，在不同的尝试中，似乎与上一个问题无关（它可以在上一个不存在时出现），`onchange`元素的属性来来去去：

```
onchange="javascript:setTimeout(&#39;__doPostBack(\&#39;{ElementId}\&#39;,\&#39;\&#39;)&#39;, 0)" 
```

刷新页面有时会有所帮助，有时不会。这是一个常见问题吗？

# google-api - 弃用后的 Google Charts 复合图表

> ID：12245238
> 
> 赞同：1
> 
> 时间：2012-09-03T09:31:12.843
> 
> 标签：google-api, google-visualization

我正在使用[Google Charts](https://developers.google.com/chart/image/)绘制**[复合图表](https://developers.google.com/chart/image/docs/gallery/compound_charts)**，类似于下图（条形图和折线组合）。刚刚得知它[已被弃用](http://googledevelopers.blogspot.se/2012/04/changes-to-deprecation-policies-and-api.html)。

![复合图](../Images/ab2f0b061841c6fb472d187f47abd73a.png)

似乎替代品是[Google Chart Tools](https://developers.google.com/chart/)，我需要重新编码我的东西。但是，尽管[我尽了最大的努力](https://developers.google.com/search?q=compound%20chart)，我还是找不到任何使用新 API 制作复合图表的示例或方法。

是否可以使用新 API 制作复合图表？有人有文档链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:37:25.177

结帐谷歌组合图表 [https://google-developers.appspot.com/chart/interactive/docs/gallery/combochart](https://google-developers.appspot.com/chart/interactive/docs/gallery/combochart)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-10T17:36:55.370

最好的方法是

1.  使用组合图表

2.  重复数据数组并将其更改为您想要的类型。

    例如，

在谷歌可视化和使用之前使用堆积条形图和连接数据数组

```
seriesType: 'bars',
      series: {5: {type: 'line'}, {6: {type: 'line'}, .... } 
```

等等。这只是一种黑客方法。或者你可以使用其他一些 JS 图表库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-20T11:35:29.447

```
function priceChart(a) {
var data = google.visualization.arrayToDataTable(a, true);
var options = {
   legend: 'none',
   bar: { groupWidth: '100%' },   // Remove space between bars.
  seriesType: 'candlesticks',
candlestick: {
      fallingColor: { strokeWidth: 0, fill: '#a52714' }, // red
      risingColor: { strokeWidth: 0, fill: '#0f9d58' }   // green
   },
    series: {1: {type: 'line'},2: {type: 'line'}},
};

var chart = new google.visualization.ComboChart(document.getElementById(vname));
chart.draw(data, options); 
```

}

# c# - 如何从 c# 填充 aspx:Dropdown？

> ID：12245239
> 
> 赞同：1
> 
> 时间：2012-09-03T09:31:24.530
> 
> 标签：c#, asp.net, drop-down-menu

`aspx:dropdown`我在文件中有以下内容`aspx`：

```
<asp:DropDownList ID="ddlbStatus" Width="210px" Height="30px" CssClass="ddlb" 
         runat="server" onselectedindexchanged="ddlbStatus_SelectedIndexChanged" Style="text-align:left">
   <asp:ListItem Selected="True" Text="" Value="NA"> </asp:ListItem>
   <asp:ListItem Text="New" Value="NEW"></asp:ListItem>
   <asp:ListItem Text="Open" Value="OPEN"></asp:ListItem>
   <asp:ListItem Text="Closed" Value="CLSD"></asp:ListItem>
</asp:DropDownList> 
```

我想从我的`c#`文件中填充它。我使用以下代码进行了尝试，但它对我不起作用：

```
 ddlbStatus.SelectedItem = r["OrderPeriodStatus"].ToString(); 
```

例如`r["OrderPeriodStatus"].ToString();`打印`NEW or OPEN or CLOSED`

我是新手`asp.net`。我做错了什么？

## 更新

我已经在`dropdwonlist`. 现在我想要什么，我从 a`SQL Query`中获取状态，该值将是`NEW` `CLOSED`or `OPEN`。因此，例如，如果我`CLOSED`从数据库中获取值，那么在我的 HTML 页面`CLOSED`中将位于选定区域中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:33:31.950

你可以试试

```
ddlbStatus.Items.Add("test","test"); 
```

或者也

```
ListItem li = new ListItem();
li.Text = "NEW";
li.Value = "NEW";
ddlbStatus.items.add(li); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T09:35:17.470

您可以以这种方式填写或填充您`Dropdownlist`的`C#`

```
ddlbStatus.Items.Add(r["OrderPeriodStatus"]); 
```

**编辑：**

```
ddlbStatus.SelectedIndex = ddlbStatus.Items.IndexOf(ddlbStatus.Items.FindByText(r["OrderPeriodStatus"].ToString())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:39:07.543

除了其他答案之外，您还可以将下拉列表绑定到将为您填充它的数据源。

```
ddlStatus.DataSoruce = SomeCollection;
ddlStatus.DataValueField = field1;
ddlStatus.DataTextField = field2;
ddlStatus.DataBind(); 
```

# android - Android textColor不会改变颜色

> ID：12245240
> 
> 赞同：0
> 
> 时间：2012-09-03T09:31:31.057
> 
> 标签：android, android-layout, android-linearlayout, textview

我试过了...

`android:textColor="#ff0000"`

&

`TextView app_nameTextView = (TextView) findViewById(R.id.app_name);` `app_nameTextView.setTextColor(getResources().getColor(R.color.white));`

但它不会改变文本颜色，我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:13:25.613

试试这个

```
 tv.setTextColor(Color.WHITE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:34:47.600

尝试`android:textColor="#FFFFFF"`白色的十六进制代码是`#FFFFFF`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:44:00.113

Spanables 呢？例如：

```
Spannable spanText = new SpannableString("INFO: Some spanned result.");
spanText.setSpan(new ForegroundColorSpan(Color.GREEN), 0, spanText.length(), 0); 

area.append(spanText); 
```

# android - android中的Bluez实现

> ID：12245242
> 
> 赞同：1
> 
> 时间：2012-09-03T09:31:36.917
> 
> 标签：android, bluetooth, bluetooth-lowenergy, bluez

任何人都可以向我们提供任何用于在 android 中实现 bluez 的源代码。实际上，我们正在尝试使用 GATT 配置文件制作应用程序。此 android 应用程序应通过蓝牙连接与其他设备连接。请建议我将数据发送到非 android 设备的最佳方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:54:50.750

查看 Google 的蓝牙聊天示例，您也可以使用相同的方法连接到非 android 设备。具体来说，您将需要此 api

> device.createRfcommSocketToServiceRecord(SerialPortServiceClass_UUID);

编辑：您也可以尝试使用反射来访问像这样的另一种方法

```
Method m = mmDevice.getClass().getMethod("createRfcommSocket", new Class[] {int.class});
mmSocket = (BluetoothSocket) m.invoke(mmDevice, Integer.valueOf(1)); 
```

# opencl - OpenCL：在内核中手动抛出异常

> ID：12245247
> 
> 赞同：4
> 
> 时间：2012-09-03T09:31:51.330
> 
> 标签：opencl

是否可以在 OpenCL 中手动抛出异常，仅用于调试目的？我的代码中有一个非常奇怪的错误：当我计算两个双精度值并将它们相加时，主机报告“CL_OUT_OF_RESOURCE”。但是，如果我不添加这两个值，则主机不会报告任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:36:41.303

OpenCL 不支持异常 - 它基于 C99 语言。

在 AMD GPU 上，您可以`printf`在内核中使用 - 请参阅`cl_amd_printf`扩展。要使用，请将其放在 .cl 文件的顶部：

```
#pragma OPENCL EXTENSION cl_amd_printf : enable 
```

# c - 我可以从 popen() 流中打开 bash 吗？

> ID：12245252
> 
> 赞同：5
> 
> 时间：2012-09-03T09:32:06.453
> 
> 标签：c, linux, bash, shell, popen

根据 popen() 的手册页，我正在打开 /bin/sh ...有没有办法可以重载此行为以打开 /bin/bash shell 并与 BASH shell 脚本交互？还是我需要打开一个 pty 样式的连接才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T01:10:22.207

如果您想在传递给 的代码段中使用 bash 结构`popen`，您可以从 sh 显式调用 bash。

```
f = popen("exec bash -c 'shopt -s dotglob; cat -- *'", "r"); 
```

如果您在 bash 代码段中需要单引号，请将它们传递为`'\''`. 所有其他字符都按字面意思传递。

如果您有想要运行的现有 bash 脚本，只需指定其路径，与任何脚本或其他程序相同。确保脚本是可执行的并且以`#!/usr/bin/env bash`or开头`#!/bin/bash`。如果您有一个可能无法执行的脚本（例如由于 Windows 可移植性限制），您可以显式调用 bash：

```
f = popen("exec bash myscript.bash", "r"); 
```

或者，编写你自己的自定义`popen`函数来调用你想要的程序（但只有在更简单的解决方案不能令人满意时才这样做，因为它更难做对）。参见例如[popen() 替代方案](https://stackoverflow.com/questions/6743771/popen-alternative/6744256#6744256)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:40:52.023

可能最简单的是有一个小的 sh 脚本，它反过来调用你的 bash 脚本，如下所示：

```
#!/bin/sh

exec bash yourscript.sh "$@" 
```

或者你可以放弃 popen 并使用 fork() 和 execl() 实现你自己的 popen。

# java - BitmapFactory 在 .png 图像上完美运行，但当我从 url 加载 jpeg 图像时返回 null

> ID：12245255
> 
> 赞同：1
> 
> 时间：2012-09-03T09:32:20.093
> 
> 标签：java, android

BitmapFactory 在 .png 图像上完美运行，但当我从 url 加载 jpeg 图像时返回 null。

```
BitmapFactory.decodeStream( (InputStream) new URL(URL).getContent(), null, options); 
```

我使用此代码，但是当我提供 jpeg 图像 url 时，它返回 null。

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:53:18.713

尝试这种方式可能它适用于我的.jpg图像

```
 Bitmap bitmaps = LoadImage(strMainImageLink, new BitmapFactory.Options()); where **LoadImage** method is as shown below 
```

**加载图像**方法

```
private Bitmap LoadImage(String URL, BitmapFactory.Options options)
  {      
   Bitmap bitmap = null;
   InputStream in = null;      
      try {
        //  in = OpenHttpConnection(URL);
          bitmap = BitmapFactory.decodeStream(OpenHttpConnection(URL), null, options);
        //  in.close();

      } catch (IOException e1) {
          Log.e("erererere", e1.toString());
      }
      return bitmap;              
  }

private InputStream OpenHttpConnection(String strURL) throws IOException{
 InputStream inputStream = null;
 URL url = new URL(strURL);
 URLConnection conn = url.openConnection();

 try{
  HttpURLConnection httpConn = (HttpURLConnection)conn;
  httpConn.setRequestMethod("GET");
  httpConn.connect();

  if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
   inputStream = httpConn.getInputStream();
  }
 }

 catch (Exception ex)
 {
     Log.e("error",ex.toString());
 }
 return inputStream;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:41:24.223

检查您的 jpg 中是否设置了颜色配置文件。因此，Android 位图解码器让我失望了。遗憾的是，我没有时间或资源来为此找到解决方案。

要知道jpg中是否设置了颜色配置文件，请尝试用photoshop打开它，如果有应该提示您询问您如何处理配置文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-09T17:47:16.523

URL 唯一地标识网络上的资源。测试 url 的一个好方法是使用浏览器。我不知道 new URL(URL) 应该做什么。URL 采用字符串参数，但其他构造函数可用，请参阅[https://docs.oracle.com/javase/7/docs/api/java/net/URL.html](https://docs.oracle.com/javase/7/docs/api/java/net/URL.html)如果您将字符串传递给构造函数，您可能希望分配一个字符串的值或仅使用文字字符串示例 new URL("google.com") 至少您将获得除空指针以外的其他内容。我无法知道您的图片是什么网址，因为网络是一个很大的地方。

# android - 显示列表视图项的全部内容

> ID：12245258
> 
> 赞同：1
> 
> 时间：2012-09-03T09:32:32.537
> 
> 标签：android, listview, listviewitem

这里我要显示`whole content of the listview item`在`listview`. 我怎样才能做到这一点？

```
 ArrayAdapter< String> myadapter = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_single_choice,answers);
     listview.setAdapter(myadapter);
     listview.setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

主.xml

```
<ListView
    android:id="@+id/questions_list"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:cacheColorHint="@android:color/transparent" >
</ListView> 
```

检查图像：

![列表视图的图像](../Images/2682c94bd303444338dd1fb5e8bc07ae.png)

谢谢你。

**编辑 ：**

带有复选框/单选按钮的自定义列表视图。我得到了这个，但我需要一个单一的选择。

我尝试使用它`lstvw.setChoiceMode(ListView.CHOICE_MODE_SINGLE);`，但它不适用于我。

main.java

```
 private ImageAdapter  adapter; 

private static String month[] = {"January","February","March","April","May",  
    "June","July","August","September",  
    "October","November","December"};  

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ListView lstvw = (ListView) findViewById(R.id.listView);

     adapter = new ImageAdapter(this, month);  
     lstvw.setAdapter(adapter);  
      lstvw.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

     lstvw.setOnItemClickListener(this);
} 
```

我不知道如何将复选框的代码添加到适配器类中。请检查适配器类，如下所示。

ImageAdapter.class

```
public class ImageAdapter extends BaseAdapter{

public String title[];  
public String description[];  
public Activity context;  
public LayoutInflater inflater;

public ImageAdapter(Activity context,String[] title) {  
    super();  

    this.context = context;  
    this.title = title;  

    this.inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);  
}  

@Override  
public int getCount() {  
    // TODO Auto-generated method stub  
    return title.length;  
}  

@Override  
public Object getItem(int position) {  
    // TODO Auto-generated method stub  
    return null;  
}  

@Override  
public long getItemId(int position) {  
    // TODO Auto-generated method stub  
    return 0;  
}  

public static class ViewHolder  
{  

    TextView txtViewTitle;  
    RadioButton radiobtn;

}  

@Override  
public View getView(int position, View convertView, ViewGroup parent) {  
    // TODO Auto-generated method stub  

    ViewHolder holder;  
    if(convertView==null)  
    {  
        holder = new ViewHolder();  
        convertView = inflater.inflate(R.layout.listitem, null);  

        holder.txtViewTitle = (TextView) convertView.findViewById(R.id.lstvw_textView);  

         holder.radiobtn = (RadioButton) convertView.findViewById(R.id.itemradio);

        convertView.setTag(holder);  
    }  
    else  
        holder=(ViewHolder)convertView.getTag();  

    holder.txtViewTitle.setText(title[position]);  

    /* holder.radiobtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            RadioButton rb = (RadioButton) v;
            if (rb.isChecked() == true) 
            {
                // Here you will get list of checked item.

            }

            else 
           {
            // Here you will get list of unchecked item.    
            }

        }

    }); */

    return convertView;  
}   

} 
```

列表项.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<TextView
    android:id="@+id/lstvw_textView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_toLeftOf="@+id/itemCheckBox"
    android:padding="8dp"
    android:text="hello world" />

<CheckBox
    android:id="@+id/itemCheckBox"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:gravity="right" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:39:36.357

看到这个问题

[android listview项目高度](https://stackoverflow.com/questions/4243894/android-listview-item-height)

ListView 中的 wrap_content 不会做任何事情，因为这里重要的高度是项目的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:33:43.843

`android:layout_height="wrap_content"`:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:54:01.040

请把它改成这个并检查你是否还有任何问题......

```
<ListView
    android:id="@+id/questions_list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:cacheColorHint="@android:color/transparent" >
</ListView> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T09:54:25.077

您必须为列表视图创建自定义列表项布局。您不能使用该默认列表项`android.R.layout.simple_list_item_single_choice`

# android - 如何使用 Tag 而不是 R.id。在自定义 ArrayAdapter 的构造函数中？

> ID：12245260
> 
> 赞同：2
> 
> 时间：2012-09-03T09:32:52.010
> 
> 标签：android, android-layout, android-arrayadapter, android-view, android-custom-view

在我的 Android 项目中，我需要通过标签而不是 ID 在我的 Activity 中查找视图。*（如果你问我为什么不简单地使用`findViewById`，这不是我的偏好，而且描述起来很复杂，但目前我不能依赖`R.id.`常量！）* 到目前为止，为了在我的代码中找到视图，我已经设法使用这成功：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.index);
    mainViewGroup = (ViewGroup)getWindow().getDecorView();
    TextView indexCaption = (TextView) mainViewGroup.findViewWithTag("index_caption");
    // Now I have my TextView and can use it without problem
} 
```

但现在，问题是我在同一个活动中的自定义 ArrayAdapter：

```
 class IconicAdapter extends ArrayAdapter<String> {
    IconicAdapter() {
                    // How I can use Tag instead of R.layout.index_row_caption here?!!!
        super(IndexActivity.this, R.layout.index_row, R.id.index_row_caption, arrayList);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = super.getView(position, convertView, parent);
                    // Some customizations...
        return (row);
    }
} 
```

`index_row.xml`对于那个 IconicAdapter ：

```
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/content_bg" >

<TextView
    android:id="@+id/index_row_caption"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_toLeftOf="@+id/index_row_icon"
    android:layout_toRightOf="@+id/index_row_search"
    android:gravity="right"
    android:tag="index_row_caption"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<ImageView
    android:id="@+id/index_row_icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:tag="index_row_icon" />

<ImageView
    android:id="@+id/index_row_search"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:src="@drawable/index_row_search"
    android:tag="index_row_search" /> 
```

如何避免`R.id.index_row_caption`在构造函数中使用并将其替换为与其标签相关的内容？

**编辑：**最后，我已经完成了这段代码，并且效果很好：（在这方面帮助我的 pawelzieba 获得了学分和赏金）

```
 class IconicAdapter extends ArrayAdapter<String> {
    IconicAdapter() {
        super(IndexActivity.this, R.layout.index_row, 0, arrayList);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View view;
        if (convertView == null) {
            LayoutInflater mInflater = IndexActivity.this.getLayoutInflater();
            view = mInflater.inflate(R.layout.index_row, parent, false);
        } else {
            view = convertView;
        }

        //find views
        TextView text = (TextView) view.findViewWithTag("index_row_caption");

        //fill views with data
        text.setText(arrayList.get(position));          

        return view;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T15:10:39.947

扩展`ArrayAdapter`和覆盖`getView()`方法。

```
public View getView(int position, View convertView, ViewGroup parent) {
    View view;

    if (convertView == null) {
        view = mInflater.inflate(R.layout.index_row, parent, false);
    } else {
        view = convertView;
    }

    //find views
    TextView text = (TextView) view.findViewWithTag("index_row_caption");

    //fill views with data
    //example:
    T item = getItem(position);
    text.setText(item.toString());

    return view;
} 
```

然后传递给构造函数的行资源 id 未被使用。

为了获得更好的性能，使用 View Holder Pattern 在创建行的视图上只调用一次 findViewWithTag：[http ://www.vogella.com/articles/AndroidListView/article.html#adapterperformance_hoder](http://www.vogella.com/articles/AndroidListView/article.html#adapterperformance_hoder)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T19:47:49.697

如果要将 R.id 值用作常量，可以在 public.xml 中声明它们。资源 ID 在构建中将保持不变。因此，您不必仅仅因为需要常量 id 而使用标签。

检查这个[帖子](https://stackoverflow.com/questions/9348614/what-is-the-use-of-the-res-values-public-xml-file-on-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:38:33.600

您可以通过以下方式执行此操作：

将`android:tag="someTag"`属性添加到您`view`的`xml`布局文件中。

要访问该视图，只需使用：

```
findViewByTag(); method 
```

通过这种方式，您可以通过标签而不是 id 访问您的视图。

# qt - 设置 QTreeView 标头的标头文本

> ID：12245262
> 
> 赞同：13
> 
> 时间：2012-09-03T09:33:00.503
> 
> 标签：qt, header, treeview, settext

我有同样的问题：

[为 QTreeWidget 的标题设置文本的方法是什么？](https://stackoverflow.com/questions/9943866/what-is-the-method-to-set-the-text-for-a-qtreewidgets-header)

有一个区别：我使用的是树视图，而不是树小部件，所以那里的答案没有帮助。

我在文档中找不到任何说明。

那么 - 如何设置 QTreeView 的标题文本？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-03T11:06:35.437

它可以在您可能继承[QStandardItemModel](http://qt-project.org/doc/qt-4.8/qstandarditemmodel.html)的模型类中完成。

通常，您会调用：

```
QStandardItemModel::setHorizontalHeaderLabels ( const QStringList & labels ) 
```

仅用于文本，或

```
 QStandardItemModel::setHorizontalHeaderItem ( int column, QStandardItem * item ) 
```

如果标题项中需要更多自定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-26T13:44:45.230

啊......任何对 PyQt5 感到沮丧的人都可能想试试这个：

```
self.ui.treeView.setHeaderHidden( False ) 
```

# javascript - Javascript 多重继承模式

> ID：12245264
> 
> 赞同：1
> 
> 时间：2012-09-03T09:33:15.673
> 
> 标签：javascript

我在 JS 中使用了这种模式进行继承

```
MyApp.utils = {
    extend: function (subClass, baseClass, subClassMethods) {
        function inheritance() { }
        inheritance.prototype = baseClass.prototype;
        subClass.prototype = new inheritance();
        subClass.prototype.constructor = subClass;
        subClass.baseConstructor = baseClass;
        subClass.superClass = baseClass.prototype;

        if (subClassMethods == null) return;

        for (var index in subClassMethods) {
            subClass.prototype[index] = subClassMethods[index];
        }
    }
}; 
```

你像这样使用它

```
MyApp.utils.extend(SubClass, BaseClass, {
    subMethodOne: function() {        
    }
}); 
```

这工作得很好，代码也很简单，但它不适用于多重继承，因为构造函数调用将是子类而不是基类，这将产生堆栈溢出

多重继承的最佳模式是什么？它必须支持原型和每个类中单独的构造函数逻辑

JSFiddle： http: [//jsfiddle.net/HcPhL/1/](http://jsfiddle.net/HcPhL/1/) 它会崩溃FF所以要小心：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:03:33.717

javascript中的继承是基于原型的。这意味着对象相互继承，而不是类。与其尝试使用你知道的其他编程语言的习语，我建议你学习 javascript 自己的习语。我发现使用模块、克隆和复制功能（因为函数是对象）比 javascript 中的经典继承有用得多。

也就是说，您想要做的事情可以通过以下方式完成：

我们希望**A**从**B**和**C**类的对象继承

1.  创建一个新对象，将其命名为 A
2.  迭代 B 的每个属性（使用 for... in 循环）并将其分配给 A。
3.  迭代 C 的每个属性（使用 for... in 循环）并将其分配给 A，在这里您可能需要考虑您对冲突解决的看法（意味着您希望优先考虑谁的方法 B 或 C。

有很多带有扩展功能的开源 javascript 库，您可以在那里查看实现。Douglas Crockford 还有一篇关于如何在这里完成继承的基本文章[，](http://www.crockford.com/javascript/inheritance.html)这里[是一篇关于 javascript 多重继承的文章](http://webreflection.blogspot.co.il/2009/06/wait-moment-javascript-does-support.html)

我假设你想要完成的是代码重用，我建议你看看 Addy Osmani 的这本免费书[学习 javascript 设计模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/)。尤其是模块模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T08:49:13.440

使用 mixins 模式或装饰器模式来支持多重继承。如果你需要，我可以给你一个详细的实现

# php - 将数据插入mysql - ios

> ID：12245265
> 
> 赞同：0
> 
> 时间：2012-09-03T09:33:19.000
> 
> 标签：php, mysql, ios, http-post, http-get

我想在我的数据库中存储 4 个值。经度、纬度电话号码和时间戳。

我知道如何使用 NSLOG 将它们存储在本地，

但我想将它发送到我的 MySQL 数据库。

有人有一些教程或想在这里帮助我吗？

我非常需要这个，

您的帮助将不胜感激。

问候

**更新**

这是我需要存储在数据库中的一些代码

```
 resultsLabel.text = [NSString stringWithFormat:@"(%@) %@ Location %.06f %.06f %@", ([UIApplication sharedApplication].applicationState == UIApplicationStateBackground) ? @"bg" : @"fg", resultsLabel.tag == 0 ? @"gps:" : @"sig" , newLocation.coordinate.latitude, newLocation.coordinate.longitude,  [formatter stringFromDate:newLocation.timestamp]];

LocationTestAppDelegate * appDelegate = (LocationTestAppDelegate *)[UIApplication sharedApplication].delegate;
[appDelegate log:resultsLabel.text];

NSString* encodedValue = [newLocation.coordinate.latitude
                          stringByAddingPercentEscapesUsingEncoding:
                          NSASCIIStringEncoding];

//construct an URL for your script, containing the encoded text for parameter value
NSURL* url = [NSURL urlWithString:
              [NSString stringWithFormat:
               @"http://yourdomain.com/locatie.php?id=%@",
               encodedValue]];

NSError* error = nil;
//send the request synchronously, store the response in result
NSString* result = [NSString stringWithContentsOfURL:url
                                            encoding:NSUTF8StringEncoding
                                               error:&error];

if (!error && ([result isEqualToString:@"OK"])) {
    // everything went well
} 
```

我需要存储来自文本字段、经度、纬度和时间戳的电话号码。

问候（再次）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:13:49.040

使用以下代码

```
 //Create String
    NSString *var1 =@"waitTime=";
    NSString *var2 =@"&cover=";
    NSString *wait = [var1 stringByAppendingString:waitTime.text];
    NSString *co = [var2 stringByAppendingString:cover.text];

    NSMutableURLRequest *request = 
    [[NSMutableURLRequest alloc] initWithURL:
     [NSURL URLWithString:@"http://mysite.net/index.php"]];

    [request setHTTPMethod:@"POST"];

    NSString *postString = [wait stringByAppendingString:co];

    [request setValue:[NSString 
                       stringWithFormat:@"%d", [postString length]] 
   forHTTPHeaderField:@"Content-length"];

    [request setHTTPBody:[postString 
                          dataUsingEncoding:NSUTF8StringEncoding]];

    [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

[您可以按照此链接](http://teamtutorials.com/web-development-tutorials/php-tutorials/inserting-data-into-a-mysql-database-using-php#.UER-5FRhNWc)中的说明获取状态代码

```
- (void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
   NSHTTPURLResponse* httpResponse = (NSHTTPURLResponse*)response;
   int code = [httpResponse statusCode];
} 
```

状态代码[在此链接](http://www.w3.org/Protocols/HTTP/HTRESP.html)中定义。

在 POST 命令之后，这表示成功，但响应行的文本部分表示应该知道新创建的文档的 URI。

如果连接超时，您应该在调用 connection:didFailWithError: 委托方法时看到这一点。

使用[PHP 教程](http://teamtutorials.com/web-development-tutorials/php-tutorials/inserting-data-into-a-mysql-database-using-php#.UER-5FRhNWc)通过 PHP 将 POST 数据（从 iOS 接收）发送到 MYSQL 数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:35:02.360

这有帮助吗？

```
INSERT INTO table_name (column1, column2, column3,...)
 VALUES (value1, value2, value3,...) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T10:08:13.250

好吧，我不确定你想要什么，但正如我一般理解的那样，如果你想在 mysql 服务器上更新你的本地数据，那么你只需做简单的事情

添加 ASIHTTPrequest 或 AF 和 sbjeson 框架并将您的数据编码为 json 并使用 post 或 get 方法发送到 php 页面，其中 php 可以将字典解码为关联数组，然后循环并更新到 mysql。

如果你只想存储数据，那么你应该使用 Codedata 或 sqlite。

# oracle - 如何在oracle中实现查询限制或分页

> ID：12245266
> 
> 赞同：1
> 
> 时间：2012-09-03T09:33:20.363
> 
> 标签：oracle

> **可能重复：**
> [如何限制 Oracle 查询在排序后返回的行数？](https://stackoverflow.com/questions/470542/how-do-i-limit-the-number-of-rows-returned-by-an-oracle-query-after-ordering)

我正在使用就像下面的查询：

```
SELECT url, title, metadesc FROM (
        SELECT url,title, metadesc, rownum rn FROM (
                SELECT url, title, metadesc FROM web
            )
            WHERE rownum <= 60
    )
    WHERE rn > 50 
```

它适用于单个表，但如果加入我的主查询，即

```
SELECT name, id, url, title, metadesc
FROM web, emp 
```

然后它给了我错误：

```
java.sql.SQLException: ORA-00918: column ambiguously defined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:59:00.800

使用任一别名：

```
SELECT e.name, e.id, w.url, w.title, w.metadesc
  FROM web w
  JOIN emp e ON w.xx = e.yy 
```

或完整的表名（更详细）：

```
SELECT emp .name, emp .id, web.url, web.title, web.metadesc
  FROM web
  JOIN emp ON web.xx = emp .yy 
```

如果子查询返回具有相同名称的两列，则不能执行以下操作`SELECT *`：

```
SQL> SELECT * FROM (
  2     SELECT d1.dummy, d2.dummy
  3       FROM dual d1, dual d2
  4  );

ERROR at line 1:
ORA-00918: column ambiguously defined 
```

在这种情况下，在带有别名的子查询中使用不同的列名：

```
SQL> SELECT * FROM (
  2     SELECT d1.dummy dummy_d1, d2.dummy dummy_d2
  3       FROM dual d1, dual d2
  4  );

D D
- -
X X 
```

# c# - 加密后将字符串转换回对象或执行此操作的方法

> ID：12245268
> 
> 赞同：0
> 
> 时间：2012-09-03T09:33:27.290
> 
> 标签：c#, encryption, msmq

我目前正在尝试将加密消息传递给 msmq 并且已经能够加密正文中的某些字段，例如用户名和密码，这要归功于以下链接[Simple insecure two-way "obfuscation" for C#](https://stackoverflow.com/questions/165808/simple-2-way-encryption-for-c-sharp)

请参阅以下代码：

```
var simpleAes = new SimpleAES();

            var a = new AddToBasketView
            {
                Url = simpleAes.EncryptToString(retailerProduct.DeepLink),
                RetailerProductId = retailerProduct.Id,
                RetailerId = retailerProduct.RetailerId,
                Password = simpleAes.EncryptToString((form["Password"])),
                Username = simpleAes.EncryptToString(form["Username"])
            };
            a.RetailerProduct = _retailerProductRepository.GetRetailerProduct(a.RetailerProductId);
  msgQ.Send(a); 
```

但我真正想做的是加密整个消息。正文

所以我尝试了以下

```
 msgQ.Send(simpleAes.EncryptToString(a.ToString())); 
```

这会加密身体，但是当我来解密它时，我的代码期望一个对象它失败了 - 我不知道如何处理这个问题。

这是我在解密用户名和密码时使用的代码：

```
 var message = _msgQ.Receive(); // this should be synchronous and block until we receive

        // Is the message we have an empty message or a message?
        if (message != null)
        {

            #region decrypt paword and username
            var simpleAes = new SimpleAES();

            var addToBasketView = (AddToBasketView)message.Body;

            addToBasketView.Password = simpleAes.DecryptString(addToBasketView.Password);
            addToBasketView.Username = simpleAes.DecryptString(addToBasketView.Username);

            #endregion  decrypt paword and username 
```

如果我将 (AddToBasketView)message.Body 作为字符串传递，我该如何解密它？

编辑：

所以问题是，如果我加密对象 aa，我必须将其转换为字符串：

```
msgQ.Send(simpleAes.EncryptToString(a.ToString())); 
```

当我来解密它时，我需要它是一个对象而不是字符串，所以我可以使用它ieaurl a.password a.retailerid 等....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:24:18.737

好的，由于某种原因，您使用的“密码学”抽象仅支持加密字符串。所以，如果你想使用，`SimpleAes`你需要将你的对象序列化为一个字符串，以便你可以使用`SimpleAes`它来加密它。

然后，当您解密时，您需要将加密字符串解密回明文字符串，然后将明文字符串反序列化回类实例。

* * *

一旦对象被[加密](http://en.wikipedia.org/wiki/Encryption)，您就无法访问它的属性。所有数据都应该被加扰，如果没有密钥和解密算法，很难将其改回或解释其含义。

这与[编码](http://en.wikipedia.org/wiki/Encoding#Character_encodings)或[序列化](http://en.wikipedia.org/wiki/Serialization)不同。

# css - 我可以为 value rev 指定一个类吗？

> ID：12245269
> 
> 赞同：0
> 
> 时间：2012-09-03T09:33:27.470
> 
> 标签：css

```
<a href="img1.jpg" rel="zoom-id:bike" rev="img1.jpg"> <img src="" class="img-thumb"/></a> 
```

这是一个 CSS 代码示例，是否有可能

> rev="img1.jpg"

有一个不影响整个课程的课程`<a>`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T09:36:13.553

是的，使用属性选择器：

```
a[rev]
{
    color: red;
} 
```

[http://jsfiddle.net/Kyle_Sevenoaks/aPrr3/](http://jsfiddle.net/Kyle_Sevenoaks/aPrr3/)

您也可以扩展它以选择“rev”属性中的内容：

```
a[rev="img1.jpg"]
{
    color: red;
} 
```

[http://jsfiddle.net/Kyle_Sevenoaks/aPrr3/1/](http://jsfiddle.net/Kyle_Sevenoaks/aPrr3/1/)

# mysql - 使用 php 触发多个 Mysql 数据库表

> ID：12245271
> 
> 赞同：4
> 
> 时间：2012-09-03T09:33:35.480
> 
> 标签：mysql, triggers

如果我在 db1 中有一个表 t1 ，在 db2 中有一个 t2 。现在对 db1 的 t1 表上的任何操作，我希望在 db2 的 t2 上执行相同的操作。

考虑一个场景......如果我在 t1 中插入相同的记录，则应该在 t2 上添加相同的记录。db1 和 db2 都位于同一个数据库中。

谁能告诉我应该采取哪些具体步骤来实现这种情况......或者如何在触发触发器之前打开两个数据库连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:39:28.777

您可以在一张表上编写`INSERT, UPDATE & DELETE`触发器以反映另一张表上的数据。

手册[在这里](http://dev.mysql.com/doc/refman/5.5/en/trigger-syntax.html)

```
CREATE TRIGGER insert_t1 BEFORE INSERT ON db1.t1
delimiter //
FOR EACH ROW
BEGIN
    INSERT INTO db2.t2 VALUES (...);

END;//
delimiter ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T05:56:35.647

这也是我们可以根据应用在相关数据库上的更改来更新同一服务器的不同数据库的数据的一种方式

```
USE db1;
DROP TRIGGER IF EXISTS t1;

DELIMITER $$

CREATE
    /*[DEFINER = { user | CURRENT_USER }]*/
    TRIGGER `t1`  AFTER INSERT
    ON `db1`.`dt1`
    FOR EACH ROW BEGIN 
    INSERT INTO `db2`.`dt2`
    (ID,Fname)
  VALUES
    (NEW.ID,NEW.Fname);

    END$$

DELIMITER ;

////Update

USE db1;
DROP TRIGGER IF EXISTS t4;
DELIMITER $$

CREATE
    /*[DEFINER = { user | CURRENT_USER }]*/
    TRIGGER `t4` AFTER UPDATE
    ON `db1`.`dt1`
    FOR EACH ROW BEGIN
UPDATE `db2`.`dt2` 
    SET `dt2`.`Fname`=NEW.Fname WHERE `dt2`.`ID`=NEW.ID;
    END$$

DELIMITER ;

////Delete

USE db1;
DROP TRIGGER IF EXISTS t2;
DELIMITER $$
CREATE
    /*[DEFINER = { user | CURRENT_USER }]*/
    TRIGGER `t2`  AFTER DELETE
    ON `db1`.`dt1`
    FOR EACH ROW BEGIN 
    DELETE FROM `db2`.`dt2` WHERE `dt2`.`ID`=OLD.ID;

    END$$
DELIMITER ; 
```

# c# - ASP.Net DatagridView 选择链接到页面

> ID：12245272
> 
> 赞同：1
> 
> 时间：2012-09-03T09:33:36.103
> 
> 标签：c#, asp.net, database, sql-server-2012

我的数据网格绑定到 Sql-Server 数据库。数据网格显示每个房间的信息。我在 asp.net 的末尾添加了一个额外的列，其中显示了详细信息。用户单击所需房间旁边的详细信息，它应该打开该房间的新网页。但是可能存在一个问题，当用户寻找他们进行搜索的房间时，我怎样才能使它每次每个详细信息链接都链接到某个房间。

我现在在想我需要在那个 Sql 数据库房间表中添加一个新列来保存一个链接？这可能有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:48:54.217

您只需要向您的 gridview 添加一个超链接字段

在 DataNavigateUrlFormatString 属性中，您将模板地址写入详细信息页面，例如“Details.aspx?id={0}”，在 DataNavigateUrlFields 中，您将写入包含行 ID 的 DB 列的名称。ID 字段的内容将自动替换 DataNavigateUrlFormatString 的 {0} 部分

来自 MSDN 的示例：

```
<columns>

  <asp:boundfield datafield="OrderID" 
    headertext="OrderID"/>
  <asp:boundfield datafield="CustomerID" 
    headertext="Customer ID"/>
  <asp:boundfield datafield="OrderDate" 
    headertext="Order Date"
    dataformatstring="{0:d}" />
  <asp:hyperlinkfield text="Details..."
    navigateurl="~\details.aspx"            
    headertext="Order Details"
    target="_blank" />

</columns> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:51:12.947

aspx 页面：

```
<asp:Label ID="lblRoomName" runat="server"></asp:Label> 
```

后面的代码：

```
string strRoomId = Request.QueryString["Id"].ToString();
SqlConnection sqlCon = new SqlConnection(ConfigurationManager.ConnectionStrings["dbconstr"].ConnectionString);
SqlCommand sqlcommand = new SqlCommand("Select * from RoomDetails where RoomId = @RoomId", sqlCon);
sqlcommand.Parameters.AddWithValue("@RoomId", strRoomId);
SqlDataAdapter da = new SqlDataAdapter(sqlcommand);
DataSet ds = new DataSet();
da.Fill(ds);
GridView1.DataSource = ds;
GridView1.DataBind(); 
```

# android - Android Native 浏览器和 Chrome 有什么区别

> ID：12245273
> 
> 赞同：17
> 
> 时间：2012-09-03T09:33:39.507
> 
> 标签：android, browser, native

有人知道最近推出的 google chrome 和 android 的本机浏览器之间是否有任何区别（从开发角度来看）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:01:32.133

这些是以下链接，应该给出我的答案，但不满意，

*   [https://developers.google.com/chrome/mobile/docs/faq](https://developers.google.com/chrome/mobile/docs/faq)
*   [http://news.softpedia.com/news/Chrome-for-Android-Comes-with-Advanced-Developer-Tools-251500.shtml](http://news.softpedia.com/news/Chrome-for-Android-Comes-with-Advanced-Developer-Tools-251500.shtml)
*   [http://androidandme.com/2012/02/applications/goodbye-old-browser-chrome-to-become-the-standard-browser-on-android-4-0-and-above/](http://androidandme.com/2012/02/applications/goodbye-old-browser-chrome-to-become-the-standard-browser-on-android-4-0-and-above/)
*   [https://developers.google.com/chrome/mobile/docs/overview](https://developers.google.com/chrome/mobile/docs/overview)

如果有人有更正确的答案，请告诉我。

# d3.js - D3 强制导向布局和画笔事件

> ID：12245279
> 
> 赞同：3
> 
> 时间：2012-09-03T09:33:57.810
> 
> 标签：d3.js, brush, force-layout

我是 D3 伟大世界的新手。

我有一个强制导向布局，我需要在强制导向布局中“拖动选择”节点（圆圈）。

我试过这段代码：

```
 force = d3.layout.force()
      .size([bw,bh])
      .nodes(d3.values(nodes))
      .links(links)
      .linkDistance(60)
      .charge(-300)
      .on("tick", tick)
      .start();

    var svg = d3.select("#"+domID)
        .append("svg:svg")
        .attr("width",bw)
        .attr("height",bh)
        .attr("class", "d3_linkgraph")

    // Brush.
    var brush = d3.svg.brush()
        .on("brushstart", brushstart)
        .on("brush", brush)
        .on("brushend", brushend);

    function brushstart(p) {
        if (brush.data !== p) {
            cell.call(brush.clear());
            brush.x(x[p.x]).y(y[p.y]).data = p;
            }
        }

    // Highlight the selected circles.
    function brush(p) {
        //do something
    }
    // If the brush is empty, select all circles.
    function brushend() {

    } 
```

但这不起作用......请帮忙。

# bash - 将目录的内容解析为脚本中的 bash 命令

> ID：12245282
> 
> 赞同：0
> 
> 时间：2012-09-03T09:34:14.587
> 
> 标签：bash

我有目录`~/fooscripts/`，里面有`foo1.txt`，`foo2.txt`等

我有一个将文件`foo1.txt`作为输入并进行一些计算的命令。输出位置等在 fooprog 内部处理

```
fooprog -user-data=foo1.txt 
```

我想在 bash 脚本中自动化整个过程，以便脚本`~/fooscripts/`按顺序解析所有 txt 文件。我是 bash 的新手。谁能给我一个提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:37:12.527

您可以使用`for`循环和通配符来获取文件列表：

```
for data in ~/fooscripts/foo*.txt ; do
    fooprog -user-data="$data"
done 
```

# postgresql - 选择按日期排序的唯一值

> ID：12245289
> 
> 赞同：1
> 
> 时间：2012-09-03T09:34:30.913
> 
> 标签：postgresql, unique, plpgsql

我正在尝试解决一个有趣的问题。我有一个表格，其中包含这些列（此示例中的日期以欧洲格式显示 - dd/mm/yyyy）：

```
n_place_id   dt_visit_date
(integer)    (date)
==========   =============
   1           10/02/2012
   3           11/03/2012
   4           11/05/2012
  13           14/06/2012
   3           04/10/2012
   3           03/11/2012
   5           05/09/2012
  13           18/08/2012 
```

基本上，每个地方都可能被访问多次 - 日期可能是过去（完成访问）或将来（计划访问）。为简单起见，今天的访问是计划的未来访问的一部分。

现在，我需要在这个表上运行一个选择，它会从这个表中提取**唯一的**地点 ID（没有日期），按以下顺序排序：

1.  未来的访问先于过去的访问
2.  未来访问优先于对同一地点的过去访问进行排序
3.  对于以后的访问，最早的日期必须优先于排序相同的地方
4.  对于过去的访问，最晚日期必须优先于对同一地点进行排序。

例如，对于上面显示的示例数据，我需要的结果是：

```
 5     (earliest future visit)
 3     (next future visit into the future)
13     (latest past visit)
 4     (previous past visit)
 1     (earlier visit in the past) 
```

`case when`现在，我可以像这样在`order by`子句中使用所需的排序：

```
select
    n_place_id
from
    place_visit
order by
    (case when dt_visit_date >= now()::date then 1 else 2 end),
    (case when dt_visit_date >= now():: date then 1 else -1 end) * extract(epoch from dt_visit_date) 
```

这种*做*我需要的，但它确实包含重复的 ID，而我需要唯一的地点 ID。如果我尝试添加`distinct`到 select 语句中，postgres 会抱怨我必须`order by`在 select 子句中添加 - 但是唯一的将不再有意义，因为我在那里有日期。

不知何故，我觉得应该有一种方法可以在一个 select 语句中获得我需要的结果，但我不知道该怎么做。

如果这不能完成，那么，当然，我将不得不在代码中完成整个事情，但我更愿意在一个 SQL 语句中完成它。

PS我不担心性能，因为我要排序的数据集并不大。应用该`where`子句后，它很少会包含超过 10 条记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:16:27.947

您可以轻松地显示该[`DISTINCT ON`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-DISTINCT)行的其他列，结果`n_place_id`如下：

```
SELECT n_place_id, dt_visit_date
FROM  (
   SELECT DISTINCT ON (n_place_id) *
         ,dt_visit_date < now()::date    AS prio  -- future first
         ,@(now()::date - dt_visit_date) AS diff  -- closest first
   FROM   place_visit
   ORDER  BY n_place_id, prio, diff
   ) x
ORDER  BY prio, diff; 
```

实际上，我选择了具有最早未来日期（包括“今天”）的行，`n_place_id`或者过去最晚的日期，失败了。
然后生成的唯一行按相同的标准排序。

*   `FALSE`排序之前`TRUE`
*   “[绝对值”`@`](http://www.postgresql.org/docs/current/interactive/functions-math.html)有助于“最接近的优先”排序
*   [`DISTINCT ON`](https://stackoverflow.com/a/7630564/939860)有关此相关答案中特定 Postgres 的更多信息。

结果：

```
 n_place_id | dt_visit_date
------------+--------------
 5          | 2012-09-05
 3          | 2012-10-04
 13         | 2012-08-18
 4          | 2012-05-11
 1          | 2012-02-10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:45:40.690

试试这个

```
 select n_place_id
 from 
 (
    select *, 
    extract(epoch from (dt_visit_date - now())) as seconds,  
    1 - SIGN(extract(epoch from (dt_visit_date - now())) ) as futurepast
    from #t
 ) v
 group by n_place_id
 order by max(futurepast) desc, min(abs(seconds)) 
```

# opencms - OpenCMS：为验证规则创建一个 OR 子句

> ID：12245290
> 
> 赞同：0
> 
> 时间：2012-09-03T09:34:36.837
> 
> 标签：opencms

在 OpenCMS 环境中，我创建了一个链接对象：

```
 <xsd:sequence>
        <xsd:element name="LinkTitle" type="OpenCmsString" minOccurs="1" maxOccurs="1" />
        <xsd:element name="InternalLink" type="OpenCmsVfsFile" minOccurs="0" maxOccurs="1" />
        <xsd:element name="ExternalLink" type="OpenCmsString" minOccurs="0" maxOccurs="1" />
    </xsd:sequence> 
```

这意味着这`LinkTitle`始终是强制性的。这是对的。给定 a ，必须在 and 之间提供一个`LinkTitle`（并且只有一个） 。如果我为这两个字段设置没有任何意义。我能做些什么？如果我可以创建两个正则表达式（一个 for和一个 for ），而不是在它们之间创建一个 OR（而不是通常的 AND），那应该很有用。`InternalLink``ExternalLink``minOccurs="1"``InternalLink``ExternalLink`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:24:12.847

您可以使用嵌套的 XSD 选项。请参阅此链接[http://arquivo.bng-galiza.org/opencms/opencms/alkacon-documentation/documentation_xmlcontent/step5-nestedcontents.html](http://arquivo.bng-galiza.org/opencms/opencms/alkacon-documentation/documentation_xmlcontent/step5-nestedcontents.html)

# java - 使用 JAI 合并缩略图

> ID：12245294
> 
> 赞同：1
> 
> 时间：2012-09-03T09:34:47.127
> 
> 标签：java, image-processing, jai

我有几百个缩略图，我搜索了一种使用 JAI 合并它们的方法。此外，他们必须首先通过透视变换进行拉伸。我发现这个转换效果很好： [Java Advanced Imaging API 中的快速透视转换](https://stackoverflow.com/questions/2500489/fast-perspective-transform-in-java-advanced-imaging-api)

我已经编写了一些测试代码来使用 Graphics2D 对象做一些事情，但我想它在 JAI 中会更有效。

谢谢！

-马可

```
 PlanarImage img1 = PlanarImage.wrapRenderedImage(bufIn1);
    PlanarImage img2 = PlanarImage.wrapRenderedImage(bufIn2);

    int numBands = img1.getSampleModel().getNumBands();
    ColorSpace cs = ColorSpace.getInstance(numBands == 1 ?ColorSpace.CS_GRAY : ColorSpace.CS_sRGB);
    ColorModel cm =RasterFactory.createComponentColorModel(DataBuffer.TYPE_BYTE,cs, true, false,Transparency.BITMASK);

    SampleModel sm =RasterFactory.createComponentSampleModel(img1.getSampleModel(),DataBuffer.TYPE_BYTE,img1.getTileWidth(),img1.getTileHeight(),numBands + 1);
    ImageLayout il = new ImageLayout();
    il.setSampleModel(sm).setColorModel(cm);
    RenderingHints rh = new RenderingHints(JAI.KEY_IMAGE_LAYOUT, il);

    ParameterBlock pb;
    Dimension d;
    WarpPerspective wp;
    RenderedOp srca;

  //make background for single image
    pb = new ParameterBlock();
    pb.add(new Float(img1.getWidth())).add(new Float(img1.getHeight()));
    pb.add(new Byte[]{new Byte((byte)0xFF)});
    RenderedOp alpha = JAI.create("constant", pb);

    pb = new ParameterBlock();
    pb.addSource(img1).addSource(img1);
    pb.add(alpha).add(alpha).add(Boolean.FALSE);
    pb.add(CompositeDescriptor.DESTINATION_ALPHA_LAST);
    srca = JAI.create("composite", pb, rh);
    d = new Dimension(img1.getWidth(),img1.getHeight());
    wp = new WarpPerspective(PerspectiveTransform.getQuadToQuad(
            0 , 0, d.width, 0, d.width, d.height, 0, d.height,
            0 , 0, d.width, 0, d.width, d.height/2, 0, d.height));
    pb = (new ParameterBlock()).addSource(srca);
    pb.add(wp);
    pb.add(Interpolation.getInstance(Interpolation.INTERP_NEAREST)); //INTERP_BICUBIC
    PlanarImage i1 = (PlanarImage)JAI.create("warp",pb);

    pb = new ParameterBlock().addSource(img2).addSource(img2);
    pb.add(alpha).add(alpha).add(Boolean.FALSE);
    pb.add(CompositeDescriptor.DESTINATION_ALPHA_LAST);
    srca = JAI.create("composite", pb, rh);
    d = new Dimension(img1.getWidth(),img1.getHeight());
    wp = new WarpPerspective(PerspectiveTransform.getQuadToQuad(
            0 , 0, d.width, 0, d.width,   d.height, 0, d.height,
            0 , 0, d.width, 0, d.width*2, d.height, 0, d.height/2));
    pb = (new ParameterBlock()).addSource(srca);
    pb.add(wp);
    pb.add(Interpolation.getInstance(Interpolation.INTERP_NEAREST)); //INTERP_BICUBIC
    PlanarImage i2 = (PlanarImage)JAI.create("warp",pb);

    BufferedImage masterImage = new BufferedImage(1000, 1000, BufferedImage.TYPE_4BYTE_ABGR);
    Graphics2D g = masterImage.createGraphics();
    g.setBackground(FastSurfaceImageRenderable.transparencyColor);
    g.clearRect(0, 0, subImage.getWidth(), subImage.getHeight());
    g.drawImage(i1.getAsBufferedImage(), 0, 0, 100, 100, null);
    g.drawImage(i2.getAsBufferedImage(), 50, 50, 200, 100, null);
    g.dispose(); 
```

# asp.net - 通过 web.config 禁用输出缓存

> ID：12245298
> 
> 赞同：2
> 
> 时间：2012-09-03T09:34:56.033
> 
> 标签：asp.net, wcf, outputcache

我正在尝试巧妙地禁用 WCF 应用程序的输出缓存。enableOutputCache 属性由于某种原因不起作用，有人可以解释原因，或建议解决方法。

```
<system.web>      
    <caching>
      <outputCache enableOutputCache="false" enableFragmentCache="false"></outputCache>
      <outputCacheSettings>        
        <outputCacheProfiles>          

        </outputCacheProfiles>
      </outputCacheSettings>
    </caching>
  </system.web> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-17T23:28:31.963

我知道这是一个老问题，但我想给我两分钱。我实际上需要禁用 SPA 调用的 webapi 服务的缓存，并且在某些版本的 IE 上，它们默认缓存，除非存在 cache-control:no-cache 和类似的标头。我为启用静态资源的浏览器缓存并为所有服务禁用它所做的是根据使用 web-config 的位置添加标头。

IE

```
<location path="api">
<system.webServer>
  <httpProtocol>
    <customHeaders>
      <add name="Cache-Control" value="no-cache" />
      <add name="Expires" value="-1" />
      <add name="Pragma" value="no-cache" />
    </customHeaders>
  </httpProtocol>
</system.webServer> 
```

# video - 如何嵌入 pixelbark.com 视频

> ID：12245300
> 
> 赞同：0
> 
> 时间：2012-09-03T09:34:57.873
> 
> 标签：video, iframe

我尝试使用嵌入/共享代码从[http://pixelbark.com嵌入一些视频，对于这个 url](http://pixelbark.com) [http://pixelbark.com/639](http://pixelbark.com/639)，代码看起来像这样

```
<iframe width="640" height="360" src="http://pixelbark.com/e/639" frameborder="0" allowfullscreen></iframe>

```

所以他们所做的就是用 com/e/ 替换 com/

然而，这不起作用。有人可以帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:45:05.027

如果你真的去`http://pixelbark.com/e/639`你会看到他们的服务器抛出和错误。我建议您将此问题报告给 pixelbark，看起来您没有做错任何事情，或者您可以做任何其他事情。

# sql - MyBatis 是否支持 like 运算符？

> ID：12245310
> 
> 赞同：0
> 
> 时间：2012-09-03T09:35:33.467
> 
> 标签：sql, mybatis

你知道如何在 MyBatis 中像 sql 一样写吗？我用谷歌搜索了很多，没有任何可行的解决方案。它总是返回错误的 SQL 错误。我需要在喜欢后传递汉字。

# mysql - 加入两个表格以显示已购买的商品

> ID：12245314
> 
> 赞同：1
> 
> 时间：2012-09-03T09:36:04.100
> 
> 标签：mysql, select

我有一张桌子，用来保存我的所有模板：

**模板**

*   模板编号
*   模板名称
*   模板价格

这些模板可以由注册用户购买，然后插入到`payments`表中：

**付款**

*   付款ID
*   模板编号
*   用户身份

有没有办法加入这两个表，不仅得到某个用户已购买的模板列表，而且得到所有模板？然后从那里找出哪些已经被购买？

我使用了这个 SELECT，但只显示了用户购买的那些。我想拥有来自 的所有行，但如果不匹配`templates`，则为空。`user_id`

```
SELECT *
FROM templates
LEFT JOIN payments
ON templates.template_id = payments.template_id
WHERE user_id = 2
GROUP BY templates.template_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:40:17.127

```
SELECT t.*, IF(p.user_id IS NULL, 'not purchased', 'purchased ') AS is_purchased 
FROM templates t
LEFT JOIN payments p
ON t.template_id = p.template_id
GROUP BY t.template_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:43:30.597

使用子选择这将是

```
SELECT t.*, p.payment_id
FROM templates t
LEFT JOIN (
    SELECT * FROM payments WHERE user_id=2
) p ON t.template_id = p.template_id 
```

这将向您显示所有模板和 payment_id（如果该用户有一个）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:38:27.050

试试这个：

```
SELECT *
FROM  templates
LEFT  JOIN payments
ON    templates.template_id = payments.template_id
AND   user_id = 2 -- <-- change Where to and
GROUP BY templates.template_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T09:43:20.593

试试这个：

```
SELECT templates.template_id, templates.template_name, templates.template_price, payments.user_id
FROM  templates
LEFT  JOIN payments
ON    templates.template_id = payments.template_id 
```

这将显示所有模板，但不会为您提供唯一列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T09:43:27.670

试试这个`UNION`

```
SELECT  b.template_name, 'purchased' `status`
FROM    payments a
            INNER JOIN templates b
                on a.template_id = b.templateID
WHERE a.user = 2
UNION
SELECT  template_name, 'not purchased' `status`
FROM templates 
WHERE template_name NOT IN
(
    SELECT  b.template_name
    FROM    payments a
                INNER JOIN templates b
                    on a.template_id = b.templateID
    WHERE a.user = 2
) 
```

# c# - 为加密数据创建订单列

> ID：12245315
> 
> 赞同：3
> 
> 时间：2012-09-03T09:36:11.127
> 
> 标签：c#, sorting, encryption, sql-order-by

我正在将加密数据保存到数据库中。

有没有一种方法可以创建纯文本数据的“哈希码”或指纹或校验和，如果我按“哈希码”排序/排序，则顺序与保存纯文本数据并执行时相同同样的排序/顺序按操作就可以了？

我基本上需要一个 SOUNDEX() 类型的函数，它会给我一个保持纯文本数据顺序的值。然后，我将保存加密数据和“哈希码”，并在通过“哈希码”字段查询数据顺序时。

我需要在应用程序中执行此操作，如果可能的话，最好不要在 SQL DB 中执行。

我正在使用实体框架和 SQL 2008 和 C# 4.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:37:03.310

加密会故意破坏明文中的任何明显结构，因此任何排序结构也将被破坏。鉴于未加密记录的已知结构，使用非加密哈希码将导致潜在的安全漏洞。

您可以轻松地从未加密的数据创建订单列并将其存储，但每次添加新记录时都需要解密全部或部分数据库。

您可以从每十个记录编号开始：10、20、30，...这将允许使用二进制搜索插入新记录。每隔一段时间就会对整个数据库进行解密和重新编号，从而恢复记录之间的差距。不是一个理想的解决方案，而是一个可能的解决方案。

# z80 - CP/M 3.1 (z80) 的最小汇编程序

> ID：12245317
> 
> 赞同：5
> 
> 时间：2012-09-03T09:36:14.073
> 
> 标签：z80, cpm

我似乎正在与我的愚蠢作斗争。

[该站点](http://www.seasip.demon.co.uk/Cpm/bdos.html)解释了各种版本的 CP/M 下的系统调用。

但是，当我尝试使用调用 2（C_WRITE，控制台输出）时，什么都没有发生。

我有以下代码。

```
ORG 100h
LD E,'a'
LD C,2
CALL 5
CALL 0 
```

我在这里背诵这句话。如果有错别字，请放心，它们不在原始文件中，因为文件确实编译了，而且我有一个 COM 文件要启动。

我认为这些线条的含义如下：

1.  确保它被加载到地址 100h（0h 到 FFh 是零页）。
2.  将 ASCII 'a' 加载到系统调用 2 的 E 寄存器中。
3.  将整数 2 加载到系统调用 2 的 C 寄存器中。
4.  进行系统调用（系统调用的 JMP 位于零页中的地址 5）。
5.  结束程序（退出命令在零页的地址 0 处）。

程序启动和退出没有问题。如果我删除最后一个命令，它会挂起计算机（我猜这也是预期的，并显示 CALL 0 有效）。

但是，它不打印 ASCII 字符。（但它确实打印了一个额外的新行，但系统可能已经这样做了。）

如何让我的 CP/M 程序执行系统调用应该执行的操作？我究竟做错了什么？

更新：问题是我尝试过的所有汇编程序都需要某种格式的源文件。此文件与 Microsoft 的宏汇编器一起使用：

```
 .Z80
START:  LD      E,'a'
        LD      C,2
        CALL    5
        JP      0 
```

我*认为*（我猜）asm.com（DR 的汇编程序）和 m80.com（微软的宏汇编程序）期待 Intel 8080 助记符，并且必须告知他们何时必须期待 z80 助记符，这显然是不同的。

无论如何我都会接受下面的答案，因为它也是正确的，因为它建议只需编写图像本身而不用担心 asm.com。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T23:02:59.130

明显的可能性：您的汇编程序是否将 'a' 视为十六进制而不是 ASCII 字符？`0xa`是换行的 ASCII。也许尝试'g'或检查你的汇编输出的十六进制转储？

除此之外，您的代码看起来不错，尽管`RST 0`会节省一些字节。

编辑：

我将您的代码手动组装到：

```
1e 61
0e 02 
cd 05 00
cd 00 00 
```

我将它作为 mytest.com 保存到磁盘。然后我启动了[这个 CP/M 仿真器](http://www.simtel.net/free-download/Development-Emulators/z80mu52b-zip/45234.html)（警告：这是一个直接的文件下载链接；仿真器的标题似乎是*Joan Riff 的“Z80MU PROFESSIONAL”Z80 和 CP/M 2.2 仿真器*，它本身已有 20 多年的历史，所以似乎没有有一个网页）在 DOSBox 中运行 DOS 并运行 mytest.com。它输出字母'a'。因此，无论是您的工具链还是您的 CP/M 都有问题。

一张照片，因为它确实发生了：

![在此处输入图像描述](../Images/3f04b91d68b75816f26f654085fd16b9.png)

# android - 原生 android 和 iOS 应用程序的 GUI 测试

> ID：12245323
> 
> 赞同：2
> 
> 时间：2012-09-03T09:36:40.730
> 
> 标签：android, ios, user-interface, native, gui-testing

我有一个原生 android 和一个原生 iOS 应用程序，想用一个工具测试它们。

是否有一种工具可以**记录/编写**一次 GUI 测试，然后在两个平台上使用它？

我发现的唯一工具是 MonkeyTalk，但那里没有更多工具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T00:43:39.573

您可以使用机器人。从此位置下载该工具：[http ://code.google.com/p/scirocco/wiki/QuickStartScirocco](http://code.google.com/p/scirocco/wiki/QuickStartScirocco)

Scirocco（上面链接中提到的工具）只是 Robotium 的一个附加组件。这意味着Scirocco 使您能够捕捉图像。几乎和猴子跑者一样。

在此位置查看一个简单示例：http: [//testdroid.com/tech/54/automated-ui-testing-android-applications-robotium](http://testdroid.com/tech/54/automated-ui-testing-android-applications-robotium)

希望这可以帮助！

# wcf - 如何使用 WP7 应用程序获取 WCF 服务的联机或脱机状态

> ID：12245325
> 
> 赞同：2
> 
> 时间：2012-09-03T09:37:07.030
> 
> 标签：wcf, windows-phone-7, service

我正在使用与 Azure 托管的 WCF 服务通信的 Windows Phone 7 应用程序。

在沟通等方面一切正常。但是我想处理服务不在线时的情况。

现在 WP7 应用程序有一个带有登录名的主屏幕。单击“登录”按钮后，应用程序将凭据发送到与数据库通信的 WCF 服务。

现在我的问题是，有没有办法获得 WCF 服务的在线/离线状态？所以我可以向用户提供反馈，并且应用程序不会崩溃（：

非常感谢任何答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:57:01.333

您可以只调用该服务并使用一些编程逻辑来处理您从它收到的响应。

```
try
{
    callService();
    //proceed with login
}   
catch(Exception)
{   
    handleFailure();
   //display error message here
} 
```

在上面的代码中，如果服务在线，try 块将成功执行，如果服务离线，那么您可以向用户显示错误消息而不会崩溃。

有关更多信息，您可以看到[这个](https://stackoverflow.com/questions/2867486/is-there-an-example-of-checking-on-if-a-wcf-service-is-online)类似的问题。

# active-directory - Active Directory (LDAP) 查询/过滤器以检索 Exchange 分发列表

> ID：12245327
> 
> 赞同：8
> 
> 时间：2012-09-03T09:37:09.613
> 
> 标签：active-directory, exchange-server

我正在寻找可以检索 Exchange 分发列表的 LDAP 查询。

如果我做的是简单的`(objectClass=Group)`，我会得到太多的组，其中大多数没有用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-03T15:40:24.213

我会使用 groupType 属性来识别分发列表。在这里您可以找到如何区分安全/分发的[信息。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675935%28v=vs.85%29.aspx)

过滤器看起来像这样：

```
(&(objectClass=group)(!(groupType:1.2.840.113556.1.4.803:=2147483648))) 
```

**或者编辑** ，您可能想要检查具有交换电子邮件地址的组，例如：

```
(&(objectClass=group)(proxyAddresses=*)) 
```

# c - 我们可以修改 const 变量的值吗？

> ID：12245333
> 
> 赞同：7
> 
> 时间：2012-09-03T09:37:31.263
> 
> 标签：c, pointers, constants, read-write

从[这篇文章](http://gustedt.wordpress.com/2010/08/17/a-common-misconsception-the-register-keyword/)。

> 将变量声明为`register`and的另一个用途`const`是禁止对该变量进行任何非本地更改，即使通过获取其地址然后转换指针也是如此。即使您认为自己永远不会这样做，一旦您将指针**（即使具有 const 属性）**传递给其他函数，您也永远无法确定这可能是恶意的并更改您脚下的变量。

我不明白我们如何`const`通过指针修改变量的值。这不是未定义的行为吗？

```
const int a = 81;
int *p = (int *)&a;
*p = 42; /* not allowed */ 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-03T10:00:23.403

作者的观点是，使用`register`存储类声明变量会阻止您获取其地址，因此无法将其传递给可能通过强制转换来更改其值的函数`const`。

```
void bad_func(const int *p) {
    int *q = (int *) p;            // casting away const
    *q = 42;                       // potential undefined behaviour
}

void my_func() {
    int i = 4;
    const int j = 5;
    register const int k = 6;
    bad_func(&i);                  // ugly but allowed
    bad_func(&j);                  // oops - undefined behaviour invoked
    bad_func(&k);                  // constraint violation; diagnostic required
} 
```

通过将潜在的 UB 更改为违反约束，需要进行诊断，并且（需要）*在编译时*诊断错误：

> [c11](/questions/tagged/c11 "显示标记为“c11”的问题")
> 
> ### 5.1.1.3 诊断
> 
> 1 - 如果预处理翻译单元或翻译单元包含违反任何语法规则或约束的行为，则符合的实现应产生至少一个诊断消息[...]，即使该行为也明确指定为未定义或实现定义。
> 
> ### 6.5.3.2 地址和间接运算符
> 
> 约束
> 
> 1 - 一元运算`&`符的操作数应为 [...] 一个左值，它指定一个 [...] 未使用`register`存储类说明符声明的对象。

请注意，`register`数组对象上的数组到指针衰减是未定义的行为，不需要诊断 (6.3.2.1:3)。

另请注意，在 C++*中*允许获取`register`左值的地址，这只是一个优化器提示（并且不推荐使用）。*`register`*

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T09:40:01.230

> **我们可以修改`const`变量的值吗？**

是的，您可以通过各种方式修改`const`变量：指针黑客、强制转换等...请
*阅读下一个问题！*

> **`const`修改变量的值是有效的代码吗？**

不！给你的是**Undefined Behavior**。

从技术上讲，您的代码示例具有**Undefined Behavior**。
一旦您修改了程序，该程序就不会遵守 c 标准`const`，因此可能会给出任何结果。

请注意，未定义的行为并不意味着编译器需要将违规报告为诊断。在这种情况下，您的代码使用指针骇客来修改 a`const`并且不需要编译器为其提供诊断。

**C99 标准 3.4.3**说：

> **未定义行为：**在使用不可移植或错误程序结构或错误数据时的行为，本国际标准对此没有任何要求。
> 
> 注意 可能的未定义行为范围从完全忽略具有不可预测结果的情况，到在翻译或程序执行期间以环境特征的记录方式表现（有或没有发出诊断消息），到终止翻译或执行（使用发出诊断消息）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T10:00:08.227

您的代码可以编译，但它具有未定义的行为。

作者的观点是使用`const` **and** `register`使代码不再编译：

```
const int a = 81; 
int *p = (int *)&a; /* no compile error */
*p = 42; /* UB */ 

register const int b = 81; 
int *q = (int *)&b; /* does not compile */ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T09:44:17.953

代码片段确实调用了未定义的行为。

我不太确定作者的意思是什么：为了不让“外来代码”更改您创建的变量的值，`const`以便... UB 被调用？那如何更可取？坦率地说，这没有任何意义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-03T09:56:56.163

我觉得作者也是在讲这个案例，这是一个误区`const`：

```
 int a = 1;
 int* const a_ptr = (int* const)&a; //cast not relevant
 int function(int* const p){
     int* malicious = (int*)p;
     *malicious = 2;
 } 
```

变量本身不是常量，但指针是。恶意代码可以转换为常规指针并合法地修改下面的变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-12T17:41:40.530

> 我不明白我们如何`const`通过指针修改变量的值。这不是未定义的行为吗？

* * *

是的，这是未定义的行为：

引自 C18, 6.7.3/7：

> *“如果尝试通过使用具有非 const 限定类型的左值来修改使用 const 限定类型定义的对象，则行为未定义。”*

但仅仅因为行为未定义，并不意味着您*可能*无法做到这一点。据我所知，情况确实如此，大多数时候你的程序包含任何未定义的行为，**而不是**警告你——这是一个大问题。

幸运的是，在这种情况下，编译 fe 时：

```
#include <stdio.h>

int main(){
    const int a = 25;
    int *p = &a;

    *p = 26;

    printf("a = %d",a);
} 
```

编译器会抛出警告：

> 初始化从指针目标类型 [-Wdiscarded-qualifiers] (gcc) 中丢弃“const”限定符

或者

> 警告：使用 'const int *' 类型的表达式初始化 'int *' 会丢弃限定符 [-Wincompatible-pointer-types-discards-qualifiers] (clang)

但是尽管代码包含导致未定义行为的部分，并且您永远无法确定它会在任何执行时打印什么，但您会编译该恶意程序（`-Werror`当然没有选项）。

* * *

> 我们可以修改`const`变量的值吗？

所以，是的 - 不幸的是。一个人实际上可以修改一个`const`对象，**但**你永远不应该这样做，无论是有意还是无意。

使用`register`关键字的方法可能很有效，因为`register`标记变量的地址不能获取其地址 - 这意味着您不能为指针分配相对变量的地址，也不能将其作为相应指针类型的参数传递给函数。*

# asp.net-mvc - 如何在 Azure 上以虚拟方式运行带有 MVC 应用程序的 Wordpress

> ID：12245335
> 
> 赞同：0
> 
> 时间：2012-09-03T09:37:37.540
> 
> 标签：asp.net-mvc, wordpress, azure, azure-web-roles

我想知道如何在 Azure 上的 WP 下运行 Wordpress 和虚拟 MVC 应用程序。我发现了很多关于此的文章，但它不起作用，Azure SDK 一直在变化，没有实际信息。

我能否远程连接到 Azure Web 角色 IIS 服务器？

如果您有任何问题，请在回答之前询问。

**由 Jim O'Neil 更新评论**

是的，我的意思是 ASP.NET MVC。[“不工作”意味着这个](http://azurephp.interoperabilitybridges.com/articles/how-to-deploy-wordpress-using-the-windows-azure-sdk-for-php-wordpress-scaffold)和 ASP.NET MVC 应用程序在 Azure 上的 WP可以单独工作，但不能一起工作。[当我尝试通过 Azure 上的这个 tutrial](http://www.wadewegner.com/2011/02/running-multiple-websites-in-a-windows-azure-web-role/) VM将 ASP .NET MVC 添加为 VirtualApplication 时，它始终处于忙碌状态。

我需要在 example.com/mvcapp 的域 example.com 和 ASP.NET MVC 应用程序上部署 WP。这应该可以在 Azure 平台上运行，并且可以通过 IIS 的虚拟应用程序功能来实现。然后我希望 Azure Web 角色可用于此。

你有什么主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:19:37.780

如果你**真的**想以 www.example.com 的形式运行 wordpress 网站，以 www.example.com/mvcapp 的形式运行 ASP.NET MVC 应用程序，那么你可能需要多一点创意才能让它工作。这是一项可行的任务，但需要很好地了解 Windows Azure 平台、Web 角色的工作原理以及 PHP/WordPress 知识。

我可以指出一些关于如何做到这一点的想法，但你需要冒险尝试和测试。您真正需要的是创建一个支持 PHP 的 ASP.NET Web 角色并为其配置 Wordpress。这可以在运行时完成，或者您可以将 worldpress 与 PHP 本身放在一起，以便在部署应用程序时将整个 wordpress 配置为包。现在，在同一个 Web 角色中，您添加了虚拟目录并让 MVC 应用程序作为应用程序在那里运行。

请记住，整个 Web 角色将只有一个 web.config，因此您需要使其与 ASP.NET PHP 应用程序和 MVC 应用程序一起使用。处理这两个任务很艰巨，需要时间来完成。

另一个更简单的选择是让 PHP 在 ASP.NET MVC 应用程序中运行，并在 PHP 文件夹中设置您的 Wordpress 应用程序。此设置很容易配置，但它会以其他方式更改 wordpress 和 MVC 应用程序的位置。

总的来说，我真的认为你应该重新考虑最后你真正想要什么，因为你的目标与让 wordpress 和 ASP.NET MVC 一起运行的需求不匹配。如果你只是想尝试一下，这肯定是一个很棒的项目，让你学到很多东西。

[这个问题在@ SO 之前也](https://stackoverflow.com/questions/9388818/is-it-possible-to-get-wordpress-working-in-a-asp-net-mvc-3-running-azure)被问过，但也有相同的回答，即为什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T21:22:35.640

我不确定在 azure 上，但在 IIS7 上，我们将 WP 和 URL Rewriter 设置为默认网站，然后将 asp.net 和 ASP 应用程序部署到虚拟目录并关闭这些子目录中的 URL Rewriter。工作精美。缺点是与 ASP/ASP.net 相比，PHP 在 IIS 上像狗一样运行。我们正在切换到在 LAMP 上使用 WP，然后继续在 IIS7 上运行我们的 ASP/.net 应用程序。缺点是切换后的 WP 可能会对我们的 SEO 产生一点影响。IIS 是 www，WP 是 ww3。

如果有的话，您可以检查您的 URL 重写规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-05T15:48:42.940

您可以使用 wordpress 模板 VM 在 Azure 中创建网站。您还可以使用[http://wordpress.brandoo.pl/project/](http://wordpress.brandoo.pl/project/)，它在 Azure 中有可用的图像，这意味着您可以使用 SQL 数据库而不是 MYSQL 数据库，这可能会有所帮助。

您可以让一个 VM 作为指向 www.mydomain.com 的 MVC 应用程序，并且您可以将 worpress 放在一个单独的 VM 中，例如 blog.mydomain.com

我认为这将使维护更容易

# c# - 向 Telerik RadTextBox 添加属性

> ID：12245339
> 
> 赞同：2
> 
> 时间：2012-09-03T09:38:00.207
> 
> 标签：c#, .net, telerik, radtextbox

我试图在点击事件后面的代码中获取我在 Telerik RadTextBox 上创建的属性。我已经看到它在 Javascript 中解决，但不是 .cs/.vb 文件。希望我的代码能更好地解释它：HTML：

```
<telerik:RadTextBox runat="server" ID="rdtTest" measurement-type="3" /> 
```

后面的代码：

```
 protected void btnSave_OnClick(object sender, EventArgs e)
    {
        RadTextBox rdtTest= (RadTextBox)item.FindControl("rdtTest");
        string m = rdtHead.Attributes("measurement-type");
    } 
```

Visual Studio 认为 Telerik RadTextBox 不能有“属性”方法。我做错了什么，还是 Telerik 不支持它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:42:52.597

您可以使用此代码

```
<telerik:RadTextBox ID="RadTextBox1" runat="server" /> 
```

在你的代码后面

```
var result = RadTextBox1.Attributes["yourKeyOfAttribute"]; 
```

# javascript - 整形三角波和锯齿波

> ID：12245340
> 
> 赞同：1
> 
> 时间：2012-09-03T09:38:02.537
> 
> 标签：javascript, math, geometry, wave

我很难用开放图表绘制三角形和锯齿波形。公式来自[这篇文章的答案](https://stackoverflow.com/a/12019459/393964)。这就是我对三角形的看法：

```
 var myArray = [];
    var myVals = [];
    var mytrin = [];
    ti = 2.0 * Math.PI * (880 / 44100);
    theta = 0;
    for(i = 0; i <500; i++){
        myArray.push(i);
        var ke = value = (1.0 - Math.abs(theta - 0.5) * 4);
        mytrin.push(ke);
        theta = theta + ti;
    } 
```

这是一个[在线演示](http://jsfiddle.net/AsbV8/)。

锯齿也差不多：

```
var myArray = [];
var myVals = [];
var mytrin = [];
ti = 2.0 * Math.PI * (880 / 44100);
theta = 0;
for(i = 0; i <1000; i++){
    myArray.push(i);
    var ke = theta*2-1;
    mytrin.push(ke);
    theta = theta + ti;
} 
```

这[是演示](http://jsfiddle.net/vr8Au/)。

有什么问题有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:48:10.643

问题出在你的工作中`ke`。你有这个：

```
(1.0 - Math.abs(theta - 0.5) * 4) 
```

在 theta = 0 时，这将给出 -1。当 theta 达到 0.5 时，您会上升到 1，但随着 theta 从那里增加，`Math.abs(theta - 0.5)`它将继续增加，因此 ke 将继续下降和下降。

您想要做的是使用一些模块化算术将其保持在一定范围内。

我玩过并将其修改为：

```
1-Math.abs((theta%4)-2); 
```

[http://jsfiddle.net/chrisvenus/tMHR8/](http://jsfiddle.net/chrisvenus/tMHR8/)

这样做是做一个模数以使值变为 0-4，然后是 0-4 并重复（一种锯齿）。减去 2 使其重复 -2 到 +2。取这个 abs 使它从 2 反弹到 0 到 2，然后减去 1 以获得漂亮的 -1 到 1 三角波。

我的小提琴也减少了 i 以使图表更明显。:)

**编辑添加：**

另一个问题的函数不起作用的原因是他在那里说他`pos`是一个从 0 到 1 的循环变量（尽管我觉得解释得不是很清楚）。

# spring - 在 JAVA 中使用客户端-服务器应用程序动态 Spring AOP？

> ID：12245344
> 
> 赞同：0
> 
> 时间：2012-09-03T09:38:40.450
> 
> 标签：spring, servlets, client-server, aop, aspectj

我正在使用 Eclipse Juno IDE 和 Tomcat 7.0

我有一个服务器，在服务器内我有**TaxiStation**类。现在，当站中发生事件时，我正在使用 spring AOP 记录它。

另一方面，我有一个客户。客户端是一个 Web 应用程序。因此，当用户想查看车站是否有出租车（我有保存数据的向量）时，他单击一个按钮，然后 servlet 从服务器询问信息，然后显示所需的 jsp 页面和信息. 如果向量是空的，它可以正常工作，但是即使只有一个元素，我也会遇到异常。

这是我的代码：

**服务器端：**

应用程序上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/aop 
       http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
    http://www.springframework.org/schema/beans  
            http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
    http://www.springframework.org/schema/context 
            http://www.springframework.org/schema/context/spring-context.xsd">
    <aop:aspectj-autoproxy>
        <aop:include name="Logging"/>
    </aop:aspectj-autoproxy>
    <bean id="Logging" class="pack.aop.Logging"/>

    <bean id="Station" class="pack.bl.Station" scope ="prototype" lazy-init="true"/> 
```

**服务器管理员：**

```
public MyServer()
{
    al = new ArrayList<ClientHandler>();
    try {
        ApplicationContext ctx = new ClassPathXmlApplicationContext("applicationContext.xml");
        si = (StationInterface)ctx.getBean("Station",StationInterface.class);
    } catch (SecurityException e) {
        e.printStackTrace();
    }
} 
```

SI 是站接口（我有实现这个接口的站类）

**客户端处理程序**

```
 ClientHandler(Socket client)
    {
        this.socket = client;

        try{
            to_client   = new ObjectOutputStream(socket.getOutputStream());
            from_client = new ObjectInputStream(socket.getInputStream());
            si.set_server(MyServer.this);
        }
        catch(IOException ioe)
        {
            // error when create the streams
            return;
        }
    }

    public void run(){

        boolean is_running = true;
            try
            {
                data_from_client = (Vector)from_client.readObject();

                 if (data_from_client.elementAt(0).equals("taxis_waits") && 
                      data_from_client.elementAt(1).equals("taxis_break"))
                {
                    Object t_b = si.get_taxis_on_break();
                    Object t_w = si.get_taxis_on_waiting();
                    to_client.writeObject(t_w);
                    to_client.writeObject(t_b);
                    to_client.flush();
                }
                else if (data_from_client.elementAt(0).equals("all_passengers"))
                {
                    Object x = si.get_passengesrs();
                    to_client.writeObject(x);
                    to_client.flush();
                }
            }
    } 
```

**注意：**方法：get_taxis_on_break()、get_taxis_on_waiting() 和 get_passengers()，返回 Vector。（出租车或乘客）所以当向量为空时，它似乎工作正常，服务器将数据写入 servlet，servlet 读取它很好，但是当有一个元素时，我在客户端遇到异常（小服务程序（WebApplication））：

**例外：**

```
SEVERE: Servlet.service() for servlet [pack.servlets.servlet2] in context with path  
[/TaxiWeb] threw exception
java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: 
org.springframework.aop.aspectj.annotation.InstantiationModelAwarePointcutAdvisorImpl
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.readArray(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.readArray(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.readObject(Unknown Source)
at pack.servlets.servlet2.doPost(servlet2.java:90)
at pack.servlets.servlet2.doGet(servlet2.java:47)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
 Caused by: java.io.NotSerializableException: 
 org.springframework.aop.aspectj.annotation.InstantiationModelAwarePointcutAdvisorImpl
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.writeArray(Unknown Source)
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.writeArray(Unknown Source)
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.access$300(Unknown Source)
at java.io.ObjectOutputStream$PutFieldImpl.writeFields(Unknown Source)
at java.io.ObjectOutputStream.writeFields(Unknown Source)
at java.util.Vector.writeObject(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.writeObject(Unknown Source)
at pack.my_server.MyServer$ClientHandler.run(MyServer.java:186) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:45:33.403

如果要序列化，您的 Station Class 必须实现 java.io.Serializable 接口。

更新

或者您可以扩展您的界面并使其可序列化

```
public interface SI extends Serializable{
  //interface code here
} 
```

# c++ - Qt SDK 1.2.1——找不到nmake

> ID：12245345
> 
> 赞同：1
> 
> 时间：2012-09-03T09:38:49.370
> 
> 标签：c++, qt, nmake

**编辑：似乎我可以使用 \Microsoft Visual Studio 10.0\VC\bin\nmake.exe 中的 nmake，但如果“Qt 4.8.1 for Desktop”能够处理好，那就太好了（而且对用户更友好）这是自动的。**

我使用在线安装程序在 Windows 7 64 位下安装了 Qt SDK。我使用了默认安装选项。

现在我正在尝试在**\QtSDK\Examples\4.7\tutorials\gettingStarted\gsQt**下构建记事本应用程序。我正在使用提供的“Qt 4.8.1 for Desktop”命令行。

对于构建的前两个步骤，**qmake**运行良好，但是在我的安装中找不到**nmake 。**设置路径不是问题——我在 QtSDK 文件夹和子文件夹的任何地方都找不到 nmake.exe（或任何类似 nmake 的东西）。

如果我使用**make**或**mingw32-make**，我会得到著名的缺少分隔符错误：

```
c:/qtsdk/mingw/bin/mingw32-make -f Makefile.Debug
mingw32-make[1]: Entering directory `C:/Workspace/qt_notepad'
Makefile.Debug:59: *** missing separator.  Stop.
mingw32-make[1]: Leaving directory `C:/Workspace/qt_notepad'
mingw32-make: *** [debug] Error 2 
```

这是一个错误的安装，还是我忽略了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:20:17.700

nmake 与 MSVC 工具链一起发布。因此，您无法在 QtSDK 中找到它。

[这](https://stackoverflow.com/questions/5601950/how-to-build-qt-for-visual-studio-2010)是供你参考的。

# unit-testing - 集成测试 - 模拟预期延迟

> ID：12245351
> 
> 赞同：0
> 
> 时间：2012-09-03T09:39:05.767
> 
> 标签：unit-testing, integration-testing, rhino-mocks

**总结**：

如何创建模拟来自外部系统的预期延迟的“集成”测试？

**详细**：

我有一个应用程序“Main”，它与多个外部系统（通过 Web 服务）通信，我称之为“Partners”。

我对合作伙伴的内部运作不感兴趣，但我需要全面测试 Main。

对于主要我目前有：

*   对每个单独的可测试块进行单元测试[因此在每个“级别”（n 层）测试每个类的每个公共方法并存根每个依赖项]
*   自上而下进行测试的集成测试（因此测试表示层上的所有公共方法并仅存根这些合作伙伴 Web 服务）

我还想要创建一些集成测试，以确保 MAIN 中的代码提供正确的性能。

什么是“正确的表现”？好吧，产品经理可以说“所有视图必须在 2 秒内返回数据”。我知道（平均而言）调用合作伙伴需要（比如说）1.5 秒，因此我可以使用秒表编写集成测试，如果主代码在 0.5 秒（2 - 1.5）内完成，则该秒表通过。但是，在与同事的讨论中，建议合作伙伴的存根应该包括 1.5 秒的预期延迟，因此我的测试应该是主代码加上合​​作伙伴的存根应该在 PM 指定的 2 秒内完成。

问：

1.  建议的行为是什么？
2.  如果按照建议，如何使用 Rino Mocks 进行存根？

感谢大家

格里夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T16:43:20.680

“所有视图必须在 2 秒内返回数据”毫无意义。在限制响应时间时，还应该考虑负载。当每 10 秒有 1 个请求时，您的视图可能会在 2 秒内返回。但是当每秒有 10k 请求时，您的响应时间将“稍微”长一些。更好的性能要求是“当负载低于每秒 z 次请求时，x% 的响应将花费不超过 y 秒”或类似的东西。

单元测试延迟也没有任何意义。您应该运行全面的性能测试。选择现有工具之一，准备几个客户端节点（由该工具控制），针对您测试的服务器运行记录/脚本客户端的请求，并检查响应时间、cpu 和内存使用情况。然后将一个或模式节点添加到您的系统并检查系统如何扩展

# android - 将电池电量状态存储在 txt 文件中

> ID：12245353
> 
> 赞同：1
> 
> 时间：2012-09-03T09:39:08.680
> 
> 标签：android

我是 Android 的新手。我已经能够使用以下代码获取电池状态/电量：

```
private void BattStatus() {
        BroadcastReceiver batteryLevelReceiver = new BroadcastReceiver() {
            public void onReceive(Context context, Intent intent) {
                context.unregisterReceiver(this);
                int rawlevel = intent.getIntExtra("level", -1);
                int scale = intent.getIntExtra("scale", -1);
                int level = -1;
                if (rawlevel >= 0 && scale > 0) {
                    level = (rawlevel * 100) / scale;
                }
                batteryLevel = level;
                BattStatus.setText("Battery Level : " + batteryLevel + "%");

            }
        };
        IntentFilter batteryLevelFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
        registerReceiver(batteryLevelReceiver, batteryLevelFilter);
    } 
```

我想将电池电量存储在文本文件中（使用线程）。代码 ：

```
public final Runnable DBThread = new Runnable() {
        String AllInfo = batteryLevel+"%"+" , "+new SimpleDateFormat("HH:mm , dd.MM.yy ").format(new Date());
        public void run() {
            try {
                Log.d("DBThread","Battery :"+batteryLevel);
                Log.d("DBThread","Updating DB");
                myDbHelper.CreateAndWriteFile(sdDir+"/", AllInfo );
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        mHandler.postAtTime(this, SystemClock.uptimeMillis() + 2000);
        Log.d("DBThread","Updated DB");
        Log.d("DBThread",AllInfo);

    } 
```

不幸的是，电池状态/级别在文本文件中返回 0%，当我使用线程中的 Log 函数对其进行测试时，它返回正确的值。

请有人这么好心地告诉我我做错了什么或我没有做什么，并可能为我提供一个代码片段，因为我是开发新手。如果我的帖子不正确，请原谅 Stack Overflow 上的第一个计时器： )

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:42:53.483

这不是一个线程。这是一个 Runnable，它是一段在线程中运行的代码。

在您的情况下，它在处理程序线程中运行，很可能是 UI 线程。

您可能在收到电池状态之前启动线程，因此将默认值 (0) 写入文件。

你不需要一个线程。您可以在收到广播后立即在 onReceive 方法中写入文件。

# 编辑

有一些东西在您的代码中不起作用。您取消注册广播接收器，因此在第一次之后您不会收到电池电量。

您在不知道它是否确实被修改的情况下编写了 batteryLevel 值

您每 2 秒写入一次，却不知道发生了变化。

我建议您不要取消注册 BR，这样您就会收到所有电池电量的变化。然后，在 onReceive 中，将日期和新值附加到文件中。

# c# - 命令参数未实现。服务器响应首先经过身份验证（#5.5.0）

> ID：12245356
> 
> 赞同：0
> 
> 时间：2012-09-03T09:39:13.117
> 
> 标签：c#, asp.net, sql

我在发送电子邮件时收到这样的错误消息：

> 命令参数未实现。服务器响应首先经过身份验证（#5.5.0）

但是此错误消息不会在工作时间出现，它仅在晚上 7 点之后出现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T09:59:55.033

您的服务器将被配置为仅在工作时间允许邮件。
这是很多 smtp 服务器上的常见设置（通常这样做是为了防止滥用 SMTP 服务器）。

请与您的网络管理员联系以解决此问题。

# c# - 我的应用程序从 xml 文件中读取过时的数据

> ID：12245362
> 
> 赞同：4
> 
> 时间：2012-09-03T09:39:31.057
> 
> 标签：c#, asp.net, xml, telerik, linq-to-xml

我从这样的 xml 文件中读取数据：

```
StringBuilder str = new StringBuilder();
str.Append("<News>");

XDocument xmlDoc = XDocument.Load(path);
var q = xmlDoc.Descendants("news")
 .Where(x => x.Descendants("language_id") != null && x.Descendants("language_id").First().Value == "2")
 .Select(x => x);

foreach (var st in q)
{
    str.Append(st.ToString(SaveOptions.DisableFormatting) + " ");
}

str.Append("</News>");
return str.ToString(); 
```

* * *

但我最近注意到，当 xml 文件更新时。它仍然从旧的读取数据！我不知道它是否从兑现副本中读取。

当我重置`iis`它时，它会更新数据。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T09:46:28.180

可能您需要设置 DefaultCachePolicy。

```
WebRequest.DefaultCachePolicy = new
RequestCachePolicy(RequestCacheLevel.Revalidate);
XmlDocument xmlDocument = new XmlDocument();
xmlDocument.Load(myUri); 
```

从这里：[http ://www.pcreview.co.uk/forums/stop-xmldocument-load-using-cached-data-t3489418.html](http://www.pcreview.co.uk/forums/stop-xmldocument-load-using-cached-data-t3489418.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T16:15:04.900

快速破解。

假设`path`是一个包含 URL 的字符串，更改

```
XDocument xmlDoc = XDocument.Load(path); 
```

至

```
XDocument xmlDoc = XDocument.Load(path + "?" + Guid.NewGuid().ToString();); 
```

这将破坏正在进行的任何中间缓存，并且`?`在 URL 中使用 不应扰乱您请求数据的服务器。

（`Guid.NewGuid()`这只是获取随机字符串的一种快速方法。如果您愿意，可以轻松使用`Random`该类或`DateTime.Now.Ticks`以类似方式。）

# php - 用于通过 UDP 接收 GPS 数据的 PHP / JS / Bash 脚本

> ID：12245365
> 
> 赞同：0
> 
> 时间：2012-09-03T09:39:39.993
> 
> 标签：php, mysql, node.js, gps, udp

我想编写自己的小型网站来控制我自己的 GPS 定位器。问题是，他们使用 UDP 发送数据（通过 GPRS），而不是 HTTP 协议。谁能给我任何关于如何接收这些数据并将其放入 MySQL 数据库的建议？

我正在寻找与[该问题的](https://stackoverflow.com/questions/2632643/developing-a-gps-car-tracking-system)[答案](https://stackoverflow.com/a/2632778/1469208)完全相同的内容。唯一的问题是此答案中提到的站点已过期并且脚本不可用。

我需要的只是一个关于如何接收包含坐标、速度、日期等的 UDP 数据包/数据报并将这些数据放入 MySQL 数据库的建议或示例。如何尽可能简单地编写网关？其余的我可以自己处理。

我可以在 Windows 上毫无问题地做到这一点，因为我是前 Delphi 开发人员，在 UDP 和 MySQL 之间编写网关并不是一件难事。但是我需要在一个基于 Linux 的小型服务器上运行这个解决方案（网关），它不能运行 Kylix（Linux 的 Delphi）程序，所以这种方式是一条死胡同。

这可以使用 PHP、JavaScript 或通过编写 Bash 脚本来完成吗？我在考虑node.js，它在主页上有类似的例子（互联网上可能还有更多）。但我不熟悉 node.js，因此我不知道是否有更好/更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:04:18.037

可以使用 PHP 从 UDP 端口读取数据。我发布了一个从 udp 端口​​读取数据的示例代码。

```
<?php
    error_reporting(E_ALL | E_STRICT);

    $socket = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP);
    socket_bind($socket, '127.0.0.1', 1223);

    $from = '';
    $port = 0;
    socket_recvfrom($socket, $buf, 12, 0, $from, $port);

    echo "Received $buf from remote address $from and remote port $port" .                                              PHP_EOL;
?> 
```

并将该数据插入 MySQL 数据库可能需要使用守护程序，请通过此链接 [http://phpdaemon.net/](http://phpdaemon.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:51:34.710

也许[socket_recvfrom](http://php.net/manual/en/function.socket-recvfrom.php)可能会让你感兴趣？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T06:39:41.593

这就是我自己发现的。

## 一般的

正如 Venkat 所写，您可以用纯 PHP 编写一个简单的侦听器。您只需要通过 SSH 在 PHP 中以 CLI SAPI 模式运行它，而不是通过浏览器，因为它会在大约 3-5 分钟后超时失败。

要在 CLI 模式下运行，您需要知道 PHP 的完整路径，并且必须使用正确的开关调用它。例如：

```
/mnt/ext/opt/apache/bin/php -f /share/Web/projects/gps/gateway.php 
```

PHP CLI 不`stdout`用于`echo`（不知道，它使用什么）。因此，将任何 echo 替换为将值存储到文件或数据库，以查看侦听器工作的实际效果。

您可能需要使用`set_time_limit(0)`函数来实现无休止、不间断的执行；但据报道（请参阅[此处](http://www.php.net/manual/en/function.set-time-limit.php)的用户贡献注释），对于 CLI SAPI，它被硬编码为 0，因此设置这可能不是强制性的。

在 CLI 模式下运行脚本后，您可以使用 Ctrl+C 将其中断。

## 监听器示例

这是一个列表器的示例，它删除所有内容，它接收到同一目录中的“drop.txt”文件中，其中放置了脚本文件：

```
error_reporting(E_ALL | E_STRICT);

$file = './dump.txt';

$socket = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP);
socket_bind($socket, '0.0.0.0', 12345);

while(TRUE)
{
    $buf = '';
    $from = '';
    $port = 0;

    socket_recvfrom($socket, $buf, 1024, 0, $from, $port);

    $momentum = time();

    $entry = $momentum.' -- received "'.trim($buf).'" from '.$from.' on port '.$port.PHP_EOL;

    file_put_contents($file, $entry, FILE_APPEND | LOCK_EX);
} 
```

事情，你应该记住：

1.  该脚本使用无限循环，因此在运行后中断它的唯一方法是使用 Ctrl+C。

2.  在 socket_bind 中使用 0.0.0.0 IP 地址来监听所有源（IP 地址）或 127.0.0.1 将其限制为仅本地主机。

3.  仔细选择 socket_recvfrom 中的第三个参数——将接收的最大字节数——以确保您等待的数据不会被截断。

4.  您必须使用文件的完整路径，您正在使用 - 这就是为什么在代码中`$file = './dump.txt'`没有. `$file = 'dump.txt'`没有完整路径，它只能通过网络浏览器工作。

## 使用数据库

如果您决定将接收到的 UDP 数据包放入数据库并为此选择 SQLite，您不仅需要提供数据库文件的完整路径，还需要提供绝对路径！所以：

```
$dbhandle = new SQLiteDatabase('/share/Web/projects/gps/data.db'); 
```

不是：

```
$dbhandle = new SQLiteDatabase('data.db'); 
```

甚至：

```
$dbhandle = new SQLiteDatabase('./data.db'); 
```

第二次和第三次尝试在某些系统上会失败（取决于 PHP 配置），在这种情况下，您会看到警告，即在数据库文件中没有您要查找的此类表。

## 注销问题修复

如果您无法直接访问将运行该侦听器的机器，并且您正在通过 SSH 连接，请记住，一旦您注销，您的侦听器可能会被关闭。

要解决此问题，您必须以守护程序模式运行您的 PHP 脚本（通过`&`在末尾添加）：

```
/mnt/ext/opt/apache/bin/php -f /share/Web/gps/gateway.php& 
```

`screen`或者在“虚拟”终端中运行监听器的非守护程序版本中使用命令。

# jqgrid - 在jqgrid中使用内联编辑时如何将所有数据发送到服务器

> ID：12245369
> 
> 赞同：0
> 
> 时间：2012-09-03T09:39:54.427
> 
> 标签：jqgrid, jqgrid-asp.net, jqgrid-formatter, jqgrid-inlinenav

我在 jqgrid 中启动。我在页面中有一个 jqgrid 和按钮。我希望用户编辑行示例 row1、row2、row3、...，然后单击按钮，当单击按钮时，将数据 rows1、2、3 发送到服务器。但是 jqGrid 在用户编辑行时将数据发送到服务器。请给我解决我的问题。谢谢大家

我写这段代码

```
 var mydata = [
{ id: "1", REQUEST_ID: "2007-10-01", WAYBILL_NO: "test", COST_ID: "note", COST_NAME: "200.00", COST_AMOUNT: "10.00", Subcategory: "1" },
{ id: "2", REQUEST_ID: "2007-10-02", WAYBILL_NO: "test2", COST_ID: "note2", COST_NAME: "300.00", COST_AMOUNT: "20.00", Subcategory: "2" },
{ id: "3", REQUEST_ID: "2007-09-01", WAYBILL_NO: "test3", COST_ID: "note3", COST_NAME: "400.00", COST_AMOUNT: "30.00", Subcategory: "1" },
{ id: "12", REQUEST_ID: "2007-09-10", WAYBILL_NO: "test11", COST_ID: "note12", COST_NAME: "500.00", COST_AMOUNT: "30.00", Subcategory: "1" }
];

            var localstr = "0:Select Ones;";
            localstr += "1:Dollar";
            localstr += ";2:Pond";
            localstr += ";3:Youro";
            localstr += ";4:Derham";

            var lastSel;
            var grid = jQuery("#list");
            grid.jqGrid({

                datatype: "local",
                data: mydata,
                ajaxGridOptions: { cache: false },
                loadonce: true,
                direction: "rtl",

                height: 'auto',
                colNames: ['RequestID', 'WayBillNo', 'CostId', 'CostName', 'Amount', 'CurrencyUnit '],
                colModel: [
                    { name: 'REQUEST_ID', width: 100, sortable: true, hidden: true },
                        { name: 'WAYBILL_NO', width: 100, sortable: true, hidden: true },
                        { name: 'COST_ID', index: 'COST_ID', width: 200, sortable: true, hidden: true },
                        { name: 'COST_NAME', width: 200, sortable: true },
                        { name: 'COST_AMOUNT', width: 100, sortable: true, editable: true },
                      { name: 'Subcategory', index: 'Subcategory', width: 200, formatter: 'select', editable: true, edittype: 'select', editoptions: { value: localstr} }
                ],
                sortname: 'Name',
                viewrecords: true,
                rownumbers: true,
                sortorder: "desc",
                editurl: 'clientArray',
                onSelectRow: function (id) {

                    if (id && id !== lastSel) {

                        grid.saveRow(lastSel, true, 'clientArray'); 

                        grid.jqGrid('restoreRow', lastSel);
                        grid.jqGrid('editRow', id, true, null, null, 'clientArray');
                        lastSel = id;

                    }

                },

                pager: '#pager',
                caption: ""
            }).jqGrid('navGrid', '#pager', { edit: true, add: true, del: false, search: false, refresh: false }); 
```

但是什么是clientArray，如何使用clientArray中的数据并发送到服务器？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:25:46.260

您可以在创建按钮后将所有数据更改存储到网格中供用户单击此按钮所有数据都发送到服务器

你把代码改成这个

```
onSelectRow: function (id) {
                    if (id && id !== lastSel) {
                        grid.jqGrid('restoreRow', lastSel);
                        grid.saveRow(lastSel,true,'clientArray');
                        grid.jqGrid('restoreRow',lastSel);

                        grid.jqGrid('editRow', id, true, null, null, 'clientArray');

                    }
                }, 
```

并从网格中读取数据

```
$("#btnSave").click(function(){
    var row=$("#list").jqGrid('getRowData',1);
alert(row.cost_id)
}); 
```

# android - 以编程方式将 LinearLayout 高度更改为 0

> ID：12245371
> 
> 赞同：5
> 
> 时间：2012-09-03T09:40:00.710
> 
> 标签：android, android-layout

我`LinearLayout`从原来的高度重新调整`0`为：

```
ViewGroup.LayoutParams params = getLayoutParams();
params.height = newHeight;
requestLayout(); 
```

一切正常，除了`newHeight = 0`- 布局的高度变回原来的高度。我怎样才能避免它？

将可见性设置为`GONE`if`newHeight == 0`没有帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T10:46:07.300

试试这个.....

```
 LinearLayout layout = (LinearLayout)findViewById(R.id.yourLayoutId);

 LinearLayout.LayoutParams lp = (LayoutParams) layout.getLayoutParams();
 lp.height = 0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-14T11:07:06.780

```
layout = (LinearLayout)findViewById(R.id.linearTop);

layout.getLayoutParams().height =  ViewGroup.LayoutParams.WRAP_CONTENT;                
ViewGroup.LayoutParams params =    layout.getLayoutParams();
params.height =  ViewGroup.LayoutParams.WRAP_CONTENT;
layout.setLayoutParams(params); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:48:16.297

您不必设置`params`使用[setBaseAttributes()](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html#setBaseAttributes%28android.content.res.TypedArray,%20int,%20int%29)的高度吗？`int height = ...`不会对...产生任何`params`影响

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T10:27:35.977

你确定你得到的是实际参数对象，而不是一个副本吗？我会尝试以下代码：

```
ViewGroup.LayoutParams params = getLayoutParams();
params.height = newHeight;
setLayoutParams(params);
requestLayout(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T10:41:33.423

然后尝试设置一个新的布局参数对象。这应该工作

```
ViewGroup.LayoutParams lp = new ViewGroup.LayoutParams(LayoutParams.MATCH_PARENT,0);
layout.setLayoutParams(lp); 
```

# java - struts2 将 URL 传递给操作

> ID：12245373
> 
> 赞同：0
> 
> 时间：2012-09-03T09:40:12.333
> 
> 标签：java, struts2

我阅读了有关[通配符映射](http://struts.apache.org/2.1.8.1/docs/wildcard-mappings.html)的 struts 手册，并决定自己测试一些示例。我有一个动作指向：

```
<action name="**" method="getPerson" class="PersonActionBean">
      <result>/person/view.jsp</result>
</action> 
```

这让我可以去任何过去的地方，尽我所能`/person`看到它。`view.jsp`所以我现在要做的是转到`/person/jack/black`然后我希望类中的`getPerson`方法`PersonActionBean`获取 URL 字段`jack`，`black`并在我的数据库中按名称和姓氏进行搜索，然后填充一个将用于`view.jsp`

我关心的不是搜索功能，而是从方法中检索 URL 中的字段`getPerson`。我将如何从 URL 中检索`jack`并在我的方法中使用它？`black``getPerson`

我正在使用**[struts 2.1.8.1](http://struts.apache.org/2.1.8.1/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:08:38.443

**方法 1 - 使用 struts2-convention 插件**

> struts.xml

```
<constant name="struts.patternMatcher" value="namedVariable"/> 
```

> PersonAction.java

```
 import org.apache.struts2.convention.annotation.Namespace;
    ...
    @Namespace{"/persons/{param1}/{param2}");
    public class PersonActionBean exends ActionSupport {
        private String param1;
        private String param2;
        // getter and setter
    } 
```

如果你打电话`persons/jack/black`，参数应该设置为`param1 = jack`，`param2 = black`

**方法 2 - 没有 struts2-convention 插件**

> PersonAction.java

```
public class PersonActionBean exends ActionSupport {
    private String param1;
    private String param2;
    // getter and setter
} 
```

> 人.xml

```
<package name="person" namespace="/person" extends="website">
    <action name="*/*" method="getPerson" class="PersonActionBean">
            <param name="param1">{1}</param>
            <param name="param2">{2}</param>
            <result>/person/view.jsp</result>
    </action>   
</package> 
```

> struts.xml

```
<package name="website" namespace="/" extends="struts-default, json-default">
     ...
    <constant name="struts.enable.SlashesInActionNames" value="true"/>
    <constant name="struts.mapper.alwaysSelectFullNamespace" value="false"/>
     ...
</package> 
```

**参考**

查看[高级通配符](http://struts.apache.org/2.1.8.1/docs/wildcard-mappings.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-03T12:55:46.183

*使用* `<s:Property>`标签

你为什么不去寻找财产标签。最好你通过属性标签发送这些名字。

```
<s:url action="PersonActionBean" var="urlPersonActionBean" >
    <s:param name="name1">no</s:param>
    <s:param name="name2">no</s:param>
</s:url>

<a href="<s:property value="#urlPersonActionBean"/>"  target="content"> 
```

我相信这会对你有所帮助......

# c# - 使用键列数组派生 DataRow 子集的 C# 优雅方法

> ID：12245377
> 
> 赞同：0
> 
> 时间：2012-09-03T09:40:18.630
> 
> 标签：c#, linq

我有一个数据行：`Row[1, 2, 3, 4, ...]`

我还有一个主键列名数组：`PKeys[1, 2, ...]`

我想要一个数组或列表，其中每个 PKeys 元素都有一个元素，其中包含来自 DataRow 中匹配元素的值（字符串）。

我当然可以这样做：

```
List<string> keyVals = new List<string>();
foreach (string PKey in PKeys)
{
    keyVals.Add(Row[PKey].ToString());
} 
```

但是有没有更优雅的方法，也许是 LINQ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:43:50.637

```
keyVals.AddRange(from p in PKeys select Row[p].ToString()); 
```

这与

```
keyVals.AddRange(PKeys.Select(p => Row[p].ToString())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:45:30.643

试试这个：

```
PKeys.Select(key => Row[key].ToString()).ToList() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:52:37.020

怎么样

```
static IEnumerable<T> GetKeyVals<T>(IEnumerable<T> rows, IEnumerable<T> pKeys)
{
    foreach (var PKey in PKeys)
    {
        yield return Row[PKey]; 
    }
} 
```

所以你可以这样做，使用延迟执行。

```
var keysVals = GetKeyVals(Row, PKeys); 
```

* * *

这在实践中与

```
var keysVals = PKeys.Select(pkey => return Row[pkey]); 
```

我不确定我是否理解你的急于`IList<string>`。

# xml - Standalone = yes 不会出现在使用 jaxb 的 moxy 实现生成的 xml 中

> ID：12245379
> 
> 赞同：0
> 
> 时间：2012-09-03T09:40:33.763
> 
> 标签：xml, jaxb

我有一个使用 jaxb 生成的 xml 文件。但是，standalone = yes 不会出现在 xml 文档中。有没有问题。

使用的代码是

```
JAXBContext context = JAXBContext.newInstance(object.getClass());
Marshaller marshall = context.createMarshaller();
marshall.setProperty(JAXB_FORMATTED_OUTPUT, true);
marshall.setProperty(Marshaller.JAXB_SCHEMA_LOCATION, schema_location);
marshall.marshal(object, outputstream); 
```

# xml - XSL：将 XML 文件与另一个文件进行转换以对其进行过滤

> ID：12245386
> 
> 赞同：1
> 
> 时间：2012-09-03T09:41:02.430
> 
> 标签：xml, xslt, filter, transform, xslt-2.0

又是我，但这次我遇到了一个真正的问题......我有一个 XML，我必须使用另一个 XML 的过滤器将它转换为另一个 XML

**文件_in.xml：**

```
 <?xml version="1.0" encoding="ISO-8859-15"?>
    <root>
        <item>
            <server>001023541</server>
            <name>P1</name>
            <desc>Production</desc>
            <status>1</status>
            <ram>1024</ram>
            <hdd>8 To</hdd>
        </item>
        <item>
            <server>201012345</server>
            <name>P2</name>
            <desc>Production</desc>
            <status>4</status>
            <ram>2048</ram>
            <hdd>8 To</hdd>
        </item>
        <item>
            <server>120332416</server>
            <name>P1</name>
            <desc>Production</desc>
            <status>2</status>
            <ram>8196</ram>
            <hdd>8 To</hdd>
        </item>
    </root> 
```

* * *

还有另一个 XML：

**过滤器.xml**

```
 <?xml version="1.0" encoding="ISO-8859-15"?>
    <Filtre>
        <Bloc5>
            <Part1>
                <EAN>001023541</EAN>
                <EAN>012356549</EAN>
                <EAN>012356559</EAN>
                <EAN>012356569</EAN>
            </Part1>
            <Part2>
                <EAN>201012345</EAN>
                <EAN>201012346</EAN>
                <EAN>201012347</EAN>
            </Part2>
        </Bloc5>
    </Filtre> 
```

* * *

如果 /root/item/server 与 /Filtre/Bloc5/Part1/EAN 的元素匹配，我替换

```
 <item>
            <server>001023541</server>
            <name>P1</name>
            <desc>Production</desc>
            <status>1</status>
            <ram>1024</ram>
            <hdd>8 To</hdd>
        </item> 
```

经过

```
 <item>
            <server>MAIN</server>
            <status>PRODUCTION</status>
        </item> 
```

* * *

否则，如果 /root/item/server 与 /Filtre/Bloc5/Part2/EAN 的元素匹配，我替换

```
 <item>
            <server>201012345</server>
            <name>P2</name>
            <desc>Production</desc>
            <status>4</status>
            <ram>2048</ram>
            <hdd>8 To</hdd>
        </item> 
```

经过

```
 <item>
            <server>BACKUP</server>
            <status>STOPPED</status>
        </item> 
```

* * *

另一个自动替换，如：

```
 <item>
            <server>120332416</server>
            <name>P1</name>
            <desc>Production</desc>
            <status>2</status>
            <ram>8196</ram>
            <hdd>8 To</hdd>
        </item> 
```

经过

```
 <item>
            <name>OFFLINE</name>
            <desc>Production</desc>
        </item> 
```

* * *

我通过这种方式获得了 XML（用于过滤）的名称：

```
 <!-- filter settings -->
            <xsl:param name="filter_xml" />
            <xsl:variable name="filter" select="document('$filter_xml')" /> 
```

还有我的代码：

```
 <xsl:for-each select="root/item">
            <xsl:choose>
                <xsl:when test="index-of(($filter/Filtre/Bloc5/Part1/EAN), ./server)">
                <item>
                    <server>MAIN</server>
                    <status>PRODUCTION</status>
                </item>
                </xsl:when>
            <xsl:when test="index-of(($filter/Filtre/Bloc5/Part2/EAN), ./server)" >
                <item>
                    <server>BACKUP</server>
                    <status>STOPPED</status>
                </item>
            </xsl:when >
            <xsl:otherwise>
                <item>
                    <name>OFFLINE</name>
                    <desc>Production</desc>
                </item>
            </xsl:otherwise>
        </xsl:for-each> 
```

但这不起作用...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:13:41.543

一个更清洁、更简单和有效的解决方案是使用模板匹配而不是曲折的分支。我假设 XSLT 2.0 因为您没有用 XSLT 版本号标记您的问题，但是如果您需要 XSLT 1.0，那么可以轻松进行调整。

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output indent="yes" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" />

<xsl:variable name="filter" select="document('filter.xml')/*" />

<xsl:template match="/" >
 <root>
   <xsl:apply-templates select="*/item" />
 </root>
</xsl:template>

<xsl:template match="item[server=$filter/Bloc5/Part1/EAN]" >
  <item>
    <server>MAIN</server>
    <status>PRODUCTION</status>
  </item>
</xsl:template>

<xsl:template match="item[server=$filter/Bloc5/Part2/EAN]" >
  <item>
    <server>BACKUP</server>
    <status>STOPPED</status>
  </item>
</xsl:template>

<xsl:template match="item" >
  <item>
    <name>OFFLINE</name>
    <desc>Production</desc>
  </item>
</xsl:template>

</xsl:stylesheet> 
```

* * *

# 更新：锦上添花

感谢您的接受。作为锦上添花，您还可以用这个更通用和可扩展的模板替换前两个项目*模板*。但它是更简单还是更复杂还有待商榷。

替代通用项模板（仅适用于 XSLT 2.0）...

```
<xsl:template match="item[server=$filter/Bloc5/*/EAN]" >
  <xsl:variable name="part-no"
    select="substring-after(local-name(($filter/Bloc5/*[EAN=current()/server])[1]),
            'Part') cast as xs:integer" />
  <xsl:copy>
    <server><xsl:value-of select="('MAIN'      ,'BACKUP' )[$part-no]" /></server>
    <status><xsl:value-of select="('PRODUCTION','STOPPED')[$part-no]" /></status>
  </xsl:copy>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:35:13.970

您需要调整的两件事：

1.  的路径`document()`需要是过滤器变量的值。您当前正在传递字符串“$filter”。您需要更改 `<xsl:variable name="filter" select="document('$filter_xml')" />` 为`<xsl:variable name="filter" select="document($filter_xml)" />`

2.  该`contains()`函数需要每个参数的字符串输入。为了`contains()`针对每个过滤器评估测试`EAN`，请在谓词过滤器内部对`EAN`元素执行测试。例如，将：更改`<xsl:when test="index-of(($filter/Filtre/Bloc5/Part1/EAN), ./server)">`为 `<xsl:when test="$filter/Filtre/Bloc5/Part1/EAN[contains(., ./server)]">`。如果有任何匹配项，则结果将至少为一个`EAC`，它将`true()`在测试中评估为。

应用于示例 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:output indent="yes"/>
    <xsl:param name="filter_xml" />
    <xsl:variable name="filter" select="document($filter_xml)" />

    <xsl:template match="/">

        <xsl:for-each select="root/item">
            <xsl:choose>
                <xsl:when test="$filter/Filtre/Bloc5/Part1/EAN[contains(., ./server)]">
                    <item>
                        <server>MAIN</server>
                        <status>PRODUCTION</status>
                    </item>
                </xsl:when>
                <xsl:when test="$filter/Filtre/Bloc5/Part2/EAN[contains(., ./server)]" >
                    <item>
                        <server>BACKUP</server>
                        <status>STOPPED</status>
                    </item>
                </xsl:when >
                <xsl:otherwise>
                    <item>
                        <name>OFFLINE</name>
                        <desc>Production</desc>
                    </item>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

# javascript - mootools toQueryString 表单

> ID：12245387
> 
> 赞同：0
> 
> 时间：2012-09-03T09:41:03.003
> 
> 标签：javascript, html, mootools

我试图序列化一个完整的表格。我找到了最简单的方法：

```
var tmp = $('myForm').toQueryString().parseQueryString();
var req = JSON.decode( tmp ); 
```

但它不会工作。

我只测试

```
var tmp = $('myForm').toQueryString()
alert("data " + tmp); 
```

也不会工作。它只打印“数据”而已..

我的表格很简单：

```
<form action="test.php" id="myForm">
<input type="text" name="user">
<input type="text" name="user_name">

<input type="submit" name="user_name_button">
</form> 
```

javascript代码是这样的：

```
$('myForm').addEvent( 'submit', function( e ) 
{
  e.stop();
  var tmp = $('myForm').toQueryString()
  alert("data " + tmp);
}) 
```

有人知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:17:06.700

发现错误。提交和一个文本字段具有相同的名称。

在此处查看固定版本，[http://jsfiddle.net/HXsBk/1/](http://jsfiddle.net/HXsBk/1/)

# asp.net - asp.net openxml 打开 docx，更改内容并流式传输给用户

> ID：12245389
> 
> 赞同：1
> 
> 时间：2012-09-03T09:41:10.557
> 
> 标签：asp.net, ms-word, openxml

我的代码如下。我正在尝试使用 Open XML 打开 Word 文档并更改某些文本。然后必须将文档发送给客户，他们可以将其保存在他们的 PC 上或打开它。它将文档发送给客户端，但它是空白的。当我保存我的 InMemory 文档时，它说文件无法打开，它必须包含至少一个根元素。我正在使用 Visual STudio 2010 Express。请帮我。我的代码有什么问题？

```
 Dim fileName As String = "directory on server\doc.docx"

    Dim myDocument As WordprocessingDocument = WordprocessingDocument.Open(fileName, True)

    Dim docText As String = Nothing

    Dim sr As StreamReader = New StreamReader(myDocument.MainDocumentPart.GetStream)
    docText = sr.ReadToEnd
    sr.Close()

    Dim regexText As Regex = New Regex("XXXCourtXXX")
    docText = regexText.Replace(docText, "JOHANNESBURG")

    Dim ms As New MemoryStream()
    Dim sw As StreamWriter = New StreamWriter(ms)

    sw.Write(docText)
    myDocument.MainDocumentPart.FeedData(ms)

    Dim mem = New MemoryStream()
    myDocument.MainDocumentPart.GetStream().CopyTo(Response.OutputStream)
    Response.ContentType = "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
    Response.AppendHeader("Content-Disposition", "attachment;filename=Notice.docx")
    mem.Position = 0
    mem.CopyTo(Response.OutputStream)
    Response.Flush()
    Response.End() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:33:19.440

您正在调暗一个新的内存流 mem，不向其中写入任何内容，然后将其复制到输出流。删除所有引用您的 mem 变量的行。

# c# - XDocument.ToString() 抛出“''，十六进制值 0x13，是无效字符。” 例外

> ID：12245396
> 
> 赞同：3
> 
> 时间：2012-09-03T09:41:42.477
> 
> 标签：c#, xml, wcf, silverlight

我想将 XDocument 存储到 SQLXML 数据类型中。我通过[此链接](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/ac074ccb-1a52-4bda-a032-c874d3ba8ce5/)将 XDOcument 存储到 SQL DB 中。根据转换 XDocumentObj.ToString() 时的链接，它抛出`"' ', hexadecimal value 0x13, is an invalid character."`异常。谁能帮我解决这个问题。如何将完整的 XML 文件存储到 XML 类型的数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:52:52.260

不知何故，你在那里得到了字符 U+0013，这是一个用于暂停串行数据链路上的传输的控制字符。你不太可能真的想要那个，所以真正的问题不是那里有一个在 XML 中无效的字符，而是那里有一个不应该存在的字符。所以找出它是如何进入那里的，因为那是真正的错误。我首先捕获添加到文档中的任何调用，并在找到包含 U+0013 的字符串时抛出

# html - 用javascript替换类名中的数字

> ID：12245397
> 
> 赞同：0
> 
> 时间：2012-09-03T09:41:52.153
> 
> 标签：html, regex

为什么我的脚本不起作用？

我想替换这段代码中的数字：

```
<!--m-->
<li class="g videobox" style="position:relative">
<div class="s">
<table class="ts" style="width:auto">
<tbody>
<tr>
<td style="padding-top:5px;padding-right:8px" valign="top" width="1%">
<div class="th" style="background-color:#000;height:68px;overflow:hidden;position:relative;width:120px">
<a id="v0" style="text-decoration:none" href="/url?url=http://www.dailymotion.com/video/xt80kj_2nd-september-2012-southampton-vs-manchester-united-2-3-hd_sport&amp;rct=j&amp;sa=X&amp;ei=P2hEUIfkKYKk0QXppoHgCA&amp;ved=0CDwQuAIwAA&amp;q=manchester&amp;usg=AFQjCNGmLl3hg6CUcX5MsuU-njXolHOOlQ">
<div style="position:relative;top:0px;left:0px">
<img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5Ojf/2wBDAQoKCg0MDRoPDxo3JR8lNzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzf/wAARCABDAHgDASIAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAAAAUDBAYCBwH/xAA3EAACAQMDAgMGBQMDBQAAAAABAgMABBEFEiEGMRNBURQiYXGBkRUyocHRI0KxByUzUmKS4fD/xAAaAQACAwEBAAAAAAAAAAAAAAADBAACBQEG/8QALBEAAgIBAwIGAgAHAAAAAAAAAQIAAxEEEiExQQUTMlFhcRQiNEKBobHB8P/aAAwDAQACEQMRAD8A+a3Y2sWmQSEyBeeYYlyfuVq4uoWunJYTTQzPH4e0ZKBhkjuMZ+xpnf2Ek+hujAIV7B2C4/8AIUq1y1jfSLe3luY4PcCl/eYA+XCgg/enSgIDY7SunsFgFJPf/M0za6nsEVxBZnazbdsjtx8fMd6o6ZrN5Np17dwJHbybn/JGOMEjuF5+tdwW1oNKjBmkkjEmTsQjJH1xXzo670+W4vLO3idXLM4aSTfnJ9AMDnypdtoUTi6TAsKr6T/aJ7zXxq3TpW4l3XEZG/GOCePJhjv6GqWkafLfx6bIsTSKoYFwm7GD616HedOLLYyPo0dtYXj++xSBdsp+3FY/TJbu5uLUXMsjuiurq5yQwIHb4HPFDfaxHM19HivT2bOnXn6+pb6rhabSkyu/YSp5yQMehpF1IDD03aRZyvh5xuPp6U9mQiwuYZS64ckYQn9OaW9QtG3TkO53Yhf7f4NEvQDnHaL6H+WvjG7/AFMDc3N3OI4pXLQr2XPAHwBrYdVwA2Nk5XhY1xyc9xz6UhktZUgSdkZYiMhjnt+1afqAs+l2q5yQg43ftSNSMNwYY4m3rPK8yna2Rk9PqSySxJcSgMxJgGPDQsf8Ug6bRW1y4C5YFCdpX9q0rajbBkZnCq0IXDDPOPTtilmjWYi1G5uNm6PZgMPeWn7QHVWAmHRtqFqnuOMyzbExCONzhXBGw44+mKVdYEwSQ7Y1bgYyTj7CrdzMq2cUqYVFkPZQCPX41F1qN0MMjMSAvmQc0AldpwJ3Soy6hCWGDmVLPY0NtH4UODHyXYc/TvRTLQ4ba8022nmIDxKcZwMDt3oq4UMARFdTxcyn3M0lg+bX2duzocYJ5pfr2m3bW8SWsMrkYx4aE/qP4q2+p3MKwAyBUbIIjVV/wK76xZPw+GVNrkYP/wBmmkKqCvvFq0I1COPedwWkgsFjddjBsncRx8+fnSrSbEWV9PqMdyZQqt7kUZPnnGTimujRtJYIiqCwcgDC/v8AtUnT1pchJ7W5i8NXLFeFzjJ8qFtRlXImgLHp81we/TiMtF68juo83Vo0MYfwwxPII75HlVjUrIx3n4hp3gi2nBLskYLBj3Jz5H4edKLjSbPRtIuUnnmKOxfKxgkHv2OPSvJtb/1M6ijnS0iWG3jgkDFdu7xQPIk/2n4feqlBW2M8QC2rapevoeJ7Jd6hZ3MVxZpIHnCcoVI/as81jNqelPZJGGlUkY3AcfWsLovVlvea5JqMsCwrIu2SJQG/yad2XV0Vhqktxb200ts4/LgKQeeRzVXsQDO6M0eHWrzQpPcH59pf6jD6Xo8dtcIqOFOVE2f0xTZZIWsbEuFy0I4z/NYjqDqAa9dZKtFEP7XySfpnFWdF1uJALWaVZBFzGd2do9PhS7WqX4OZonR3LplawAEHJH3OOrpsurRIQi8EDvmk3TXVEie32j4MTRbk3clWzjj55rT3N5Z3e/aVMh5wPOsI+i3+mTSXtzD7khKRheQ3nz6dqILPYxP8fewyMgmOn1yQ6f7M6Akknfjnv86gvdYmnjSK6ZNijucCljS6jLtK29tGg7gjJ/WpRDGSCUCSHuAqH9cUu3PVpsIijhKsfJ/4ye1uy9ynsvjSBsgiFGIJxRVizkmiljRbiZYuxQSkL9u1FErCgd4vqaXd9xxN7rV5ZW2lLObZpimMeJKwHJHPu1f1LW7f8Li8Pwo2yAFKFsHyHvA1k57MLpSjV9Ws7b3BvPibznPwr5qV90xEsIlvri7YSRqBBhRnPnwaYyxOViQ0tSqBa3IMfx9TxxpHazgvI7EKM7R9sUo0e4vINcle2DsxjJC4J7MP/dQza9B+I2q2GgoymRsTTBn5A7jkD18q4XUdZkvpIrq/eOF4A3gwqsSrlvLaAe3xqFWIwzcZha1pQsUTJYcx7e3Gt6pDOmqRxWduHUK8zhAy457n9q8+690yxXSrG8t9Stri4QeGyQBmVkzwQ3bjP606sbCCd71VEk8hnJO0l2OVH81bHTjjQY/avCsk8NVPtbbMc4wR37cV0qnXOZRdO2w1KoAM8ignkt5BJC5Rh2IpwOopPDCm2UnzYu3NXte6WitJv9uvo7hSe20gL8j50mOh6gD/AMGfkwoDbM/tKLTr9PkIGA+MwudUaYe4hQ5/6yR9jUC6hdDfiU+8MHjFSvo9+iM7W5woycMDx9660iXTUeSLVoJHgkXAlhPvxN6j1HwNXXaxwMRW46gHNuc/OYy6W1CGK8D3tzsKkkFzwRimHU/WLXsYsbEf0I3DeKe7EenwrHOFDsFbcoPBxjNC4rqVAtK/kOFwJqdPvxdR47Sgc00gGmyWZae6dLwFgEyMH0rDRTNC4aNiGHYir/4qzsHYKJQPzFAwP0OaNZTURkcGN0+I2ABbOfmaq21OW0lhRbgRAntgfuKKQxarIzxlbSzupMgB5YDxz8CKKUCj3jN2rJbITiaNenn1HSwyW8tzIsabSoJz8qazdHQCCFrpbO0k8VMGabDH1A7nNfbvUru50h3e5lONrYDY/wAV3e+NJbQvGjMVuFyEUkkYq4YRxdMncCXTp+j2c9oDdTyMhZlEKYB4x3NdXOrada3sm3TYyywD+rO5kJBPbbwPSvsmj3btaTyKkKKW3NNIE4+vNRanaaRFI73V7JNItuA0VrHnIz3DNxXRkmW2IFIXriZibrK+ge8ZZ1MaybViiiWIY49Bn7mk6XutatFB7NFc3G0YZYI3b6nGf1plHqOki6n/AA3Row4mOHvi1wWwO4QYAP3pvp93d3+iO8000ZwG2Qr4CjnkYTGR880Zgm3mZOn8+yzCnEq31rdW1vAb2F4JWB91+/GM8VULH1NW5rYCMMPM9yck1BswO1Zlo/bieuryEGZyjtgj171mLXS47rqD8Plk8ESORGcjkn8oyfWtSpxWb6oiC3EU4HDLtP0q+nO1uZk+NVb6N/cGS6v0tcWrk2QeYBBI0DLiaMZIOV8xkHkfYVLqD6WOkrKNY2F7nIYDsfPn0Pp8qs2utNaW88/jLd2UqFFikuALmDPcBjzjI8s+XxrL31ybu5eUjG4/f4n41osVUZXvPKgyvTrpDTV1TXra3dVkTduaItgyAdwPX1x6CktSW80lvPHPCxWSNg6MPIg5BoSkZyZJ6TqugWGi6qDaxSTWk/vxIXKNEfNTxyP5orK2fU17dalC2q3UssOSuFA93PmBx8POigahm8wlBxH69cUQLjpPV9A0qwl0ZmltkclVzvyQfoaWa5qV5a+zwWs7W8bTkEQ4TIA9Rj0ooq3RJrIc2YMX3sjvc2Tu7O2H95jk/c1KedW55zbp3+Zooqmf3jy+n+k4jhibVboGNcCRfL4CtZYWFrZ9PyzwQIJAmQWG7k8ng5ooo6RLUHDcfExGo3txeOTcSbthIUBQoH0FUdxx3oopCwncZq1ekTo0m6oA9hjP/fRRXU9YgPEP4R/qZaiiinZ4uWLNVczbgDiFiM+RxVeiipJPoODkUUUVJJ//2Q==" alt="" id="vidthumb1" class="th vidthumb1" style="display:inline-block;height:67px;margin:0px 0px 0px 0px;border:0;width:120px" align="middle" border="0" height="67" width="120">
</div>
<span class="vdur" style="right:0;background-color:#000;bottom:0;color:#000;filter:alpha(opacity=70);font-size:11px;font-weight:bold;opacity:0.7;-khtml-opacity:0.7;-moz-opacity:0.7;padding:1px 3px;position:absolute;text-align:right;text-decoration:none">►&amp;nbsp;4:01</span>
<span class="vdur" style="right:0;bottom:0;color:#fff;font-size:11px;font-weight:bold;padding:1px 3px;position:absolute;text-align:right;text-decoration:none">►&amp;nbsp;4:01</span>
</a>
</div>
</td>
<td style="padding-top:1px" valign="top">
<h3 class="r inl">
<a href="http://www.dailymotion.com/video/xt80kj_2nd-september-2012-southampton-vs-manchester-united-2-3-hd_sport" class="l" onmousedown="return rwt(this,'','0','','1','AFQjCNFZjowZj8K920o31HeauBkHuwmpzA','6LR8Li4Qt3qhz4xWQE49yQ','0CDsQtwIwAA',null,event)" title="2nd September 2012 Southampton vs Manchester United 2-3 [HD] - Video Dailymotion">2nd September 2012 Southampton vs <em>Manchester</em> <b>...</b>
</a>
</h3>
<div> <cite class="kv">dailymotion.com</cite>
<span class="st">
<span class="f">
<span style="background:#aaa;border:#999 1px solid;border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px;color:#fff;font-size:10px;font-weight:bold;margin-right:5px;padding:0 3px;text-transform:uppercase">New</span>
<span class="nobr">14 hours ago</span> - <span class="nobr">4 min</span>
</span>
<br>2nd September 2012 Southampton vs <em>Manchester</em> United 2-3 [HD]<br>
</span>
</div> </td>
</tr>
</tbody>
</table>
</div>
<!--n-->
<!--m-->
</li>
<li class="g videobox" style="position:relative">
<div class="s">
<table class="ts" style="width:auto">
<tbody>
<tr>
<td style="padding-top:5px;padding-right:8px" valign="top" width="1%">
<div class="th" style="background-color:#000;height:68px;overflow:hidden;position:relative;width:120px">
<a id="v0" style="text-decoration:none" href="/url?url=http://www.footytube.com/video/southampton-manchester-united-sep02-127801&amp;rct=j&amp;sa=X&amp;ei=P2hEUIfkKYKk0QXppoHgCA&amp;ved=0CD8QuAIwAQ&amp;q=manchester&amp;usg=AFQjCNGWDlz10zch_sUaWuQ63AO88LPtzA">
<div style="position:relative;top:-1px;left:0px">
<img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5Ojf/2wBDAQoKCg0MDRoPDxo3JR8lNzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzf/wAARCABGAHgDASIAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAAAAUDBAYBAgf/xAA1EAACAQMDAgQDBgYDAQAAAAABAgMABBEFEiETMQZBUWEicYEUMjORobEHFRYjQsFSU9Hw/8QAGQEAAgMBAAAAAAAAAAAAAAAAAgMAAQQF/8QAIxEAAgICAgICAwEAAAAAAAAAAAECEQMhEjETQSJhBCMyUf/aAAwDAQACEQMRAD8A+c3IWWCJQxXIQZYeuKd6HqMmmkxxuXiD4whxvfHmPQDH0qobGW4trV4+ngxruDk5J/1Vn+WTQxiW3IeR1V4yF8/P5+VL6OjJxn6PM1zLFenUGuVLg7mdO6/8uP2+dbTRk1BLaIS6jbXMDSN1muwjOwx/bMZUgj0PvWQ13T7zS0t4bk280d4wmE8RbCuByhB7dwfzpro/hy7R1LJBD8IuFfO4KqkZX2JGabCbXaETgpwu+jQS+INuTLYampCMVLLtJC8DAI7kdquWlqL+8tJZZru0LIrLCXUHjB2nae/HPzNK/wCJAKtpjh9mbeRSSe+cVQ8JB5PEtoxnkmi6a7FZvuAf/CinJOtGaDdtom1DxnZWF1Pbvb3s8kVw0Z+NMkoSM+4NZ/WdTt9Ta7ubiHom52MYoxjZx8P6rVTXWjhv9WmY7pBqUoxt+7yf/TVG8t7g2No8i70KALKmSSAcjPp5/nQpOROketTeO1ltHhyqhQxAONwIP6etR2t51NT3wb41d/hjX34qvdXVxfRW9tI29Ub4SR8Q4wAPbkV2NP5TqSrcpvZQQyA8hscAe9U4jFK2mTTpHHLNGOpuAYkg9wewI8qs6MiOUWZytupydowwbHHxfQVXns7lFkupXjLSrucMM5z5fOptIt9RvbFrWxtbidnOcJHx3PG7t6VSiw/Jdpsv+IbpJLcEbXjRlCjzzk5/TFKEmjnvlkXbF32bhlQRjGa0jeGrp9LuIr2CSznithOobt1Ry3bgqR5eWBWSURiRJY2PTKqWH71dUB7VdDHT36N1fCXCtIg2My8AgnOD+VFeUaSLCuAykfCoOe/NFD8g/wBb7ZoXto44oIpFUSLEjMVYjI2g/wC68hrqWBEthtRCyq27kAgZGPSlCXt3dSM2JGhWNELFccYArn821K0uJLaGNljQ5+JMn0paa52aJNeNRo0d5byan4et3IDizug74PI4Kn6dqbaaLidGIn6IKk9NV3KceQJrAi/u4JY47eWcK4AkjViBkk7hjsas2esX1rqPQtZZ1jluAHXGdvI9uPPtTUxEo6o2/wDEmN5oNOQkFBAxYbsHORjBpJ4Amf8AqhF4XvkY880w/iq0QOjCZZFjZXJ2DORjtSz+HUN1Drtm1xE6qwYh2GB5fWo3dFYq8cvsUalZi58W3cM0bG3l1KQPzjjcc1uS2kW6XmlQQYglMe2ADJGADw3oCMkUhuns7fxFqM18zLALmQF2U4ByR6VTbxLBo9+XtrVbyGSIFJmYqSD5jjt2ojOn/pQt1sk1i4gvFwUUlZAABnIYcfTH0rV6Stna+Ipr2BBLcmBSd4DKnALfInisRJb3F9umtLaR3wWbA759zTiLVP6c1V7yeCWeO4ZI5I923gRj7pPnkVS0x8oxUVTPfioWF8YF0bZDHGxSfCEHjlTz9R69q0fh3UriCyhtI7ZoUDHDKQQy+eR86x6WFw9zPcp12tLppZDuGOkS2V47ng+/amGm+MLawSC3u7KaKSFsNLH8S4A81POflRRewJ1xGvinXpY2s9Pu4nZpo96Pu27csVPHmCOKzllYW91rUyMitBAp3qPoAD79z9KY+JPEOneIJbZ7USN0EZS7x7CTnIxnnA55NKZrma1gklVtu4HJHG49uTUyYnNWmF+PnhifyVjHWtMtkgW5soOnLCQNpbhweMUVzTdTbVbVoLxWbpptBVdxA8s49/Ois8OUFUtmrM8WVqUVRLpGlxyRR3LBSuwZjx3+Hz/KvJ8O7b9mW5DGVACFzwwx+mKk0m+6GmxRG3ckxj4gw9CP91ONQ3IRLbHef84zj0x+360tNJ7JLyMhXRFR5cyBVIUtJIPu8f7Pl71yHS2EcUv2gK5kBCoOcBufpV2TUvtBbqWmUIxgt+Xz5rqXEeyJRbbWXIGD2BIJ/UCpzi2Jc5JUxr47g68+kQjCl42UE8+lUvBVuE1O1lLZdsPnnIBB4/Sm3jH+2+myLHudFyhJxjnmqHhpgut2yJFsTIA5z2zTG/kJeRuFIy/iy1e51DVP7h6YvWBGfcn5VdsfD8YuLa6fZNaGDdnPBc5GMe3NWtft2kvbyFQFYXbuGH+WSe/6UaRdTWNuIHXcqOWQqe2e4xUWTZU5Jw12dksvs1iYkVHTJbJXBGTkAVBqOjrqNxbSTFVSJd4APO4KMZqe/ee/Gy3JiKncQTwR717utTjtYWkYAsqAbQwAOBjNXzTM0eVFK4iZdDtOrH0ZcIrA9147cUji0T7ffTs06LEjbgW53ADz961l000unwygIj9QFfaqFtvto5m6YaRyMENj50DnTNWOlGpE+i6TYyafNd9EZaaNNmeAvYkfX9660FghhtZYsyko24nvk8gj0xUFpJcWsdrEhbppKzS4PDLjgfng1bFyu1G6GbgFA7nzRWB/PiheT7JcbJG0+3t7j7OIcvskkO04yPIUV5Fyr7uurNjqhdp5CNzjNFEpoF5GLrK3BsoCc/hr2OPIVaWEKAAg4qGyDfYoO/4SfsKnCt/yJrPJNsN5JP2d6Yznpiu7PiBIxkiuEEf5H5ZoGcj5jzqJAW/ZpPFyrssOB+Ge9LtAAGs2zEAndTDxf93T8/8AWaXeHxnV7fHk1Nf9oWutnnVUU6reHAz1n/eoo4MqZHISMdzVvVIY01G6kmY/isVQdzzVCWQzMMnAHYDypclTKIdTvorO0Z9oCL91R3Y1noLV0ni1bU76W2jYgp0eX9segpRrmoS3N/OjNtjjYqiD9T86nTUheRWUDFN1uCGRxnI7AkVphGkHGkaq31i3uLuWyjn6qcNEW43DA8vWr2zHlj60hvNLhnjsrqJhBcQhG3Jj4lyMj/ynszW6sWiuN8RAKtuHas+Rb0VI4yqT2rgUD7orz1It34gOe2CK7leDvznyyKVsA66DptlQPhNFDLhWBJ7HvRVoJIX2Vvm0gG5vwk/yPoKsBSg2hjz70UUTewjghGdxOTXtVCnI9v3ooqJ7IzR+LRuXTxnnpn/VLGH2Eb4/xc8N6UUU2fYBU3NI7OzEsTkk9zQVFFFIIYDxVbfZdXl2HiYdQD0z3/apdAv/ALPA1s8auhY7coMgtwcn60UVvj0EjWai3SuDDGQ+5Qz70A7DHHoavC2Zgro6N2OXjAIX0wOPaiik5G10WyuYJTlQ0QAG5m2ct6cduAccV5FtIpP9xPulfwh7UUUjk32CTAFYcZyADyaKKKAJH//Z" alt="" id="vidthumb2" class="th vidthumb2" style="display:inline-block;height:70px;margin:0px 0px 0px 0px;border:0;width:120px" align="middle" border="0" height="70" width="120">
</div>
<span class="vdur" style="right:0;background-color:#000;bottom:0;color:#000;filter:alpha(opacity=70);font-size:11px;font-weight:bold;opacity:0.7;-khtml-opacity:0.7;-moz-opacity:0.7;padding:1px 3px;position:absolute;text-align:right;text-decoration:none">►&amp;nbsp;4:40</span>
<span class="vdur" style="right:0;bottom:0;color:#fff;font-size:11px;font-weight:bold;padding:1px 3px;position:absolute;text-align:right;text-decoration:none">►&amp;nbsp;4:40</span>
</a>
</div>
</td>
<td style="padding-top:1px" valign="top">
<h3 class="r inl">
<a href="http://www.footytube.com/video/southampton-manchester-united-sep02-127801" class="l" onmousedown="return rwt(this,'','0','','2','AFQjCNE5svFiL4Af9K2TuhaGf4ydP-LjtQ','t7BFtngpHDrP_gEBAAj7eg','0CD4QtwIwAQ',null,event)" title="Southampton vs. Manchester United Video Highlights &amp; Interviews (02nd Sep 12)">Southampton vs. <em>Manchester</em> United Video <b>...</b>
</a>
</h3>
<div> <cite class="kv">footytube.com</cite>
<span class="st">
<span class="f">
<span style="background:#aaa;border:#999 1px solid;border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px;color:#fff;font-size:10px;font-weight:bold;margin-right:5px;padding:0 3px;text-transform:uppercase">New</span>
<span class="nobr">13 hours ago</span> - <span class="nobr">5 min</span>
</span>
<br>Southampton v <em>Manchester</em> United video highlights, results and news. Match  played on Sunday, Sep 02 2012 <b>...</b>
<br>
</span>
</div> </td>
</tr>
</tbody>
</table>
</div>
<!--n-->
<!--m-->
</li>
<li class="g videobox" style="position:relative">
<div class="s">
<table class="ts" style="width:auto">
<tbody>
<tr>
<td style="padding-top:5px;padding-right:8px" valign="top" width="1%">
<div class="th" style="background-color:#000;height:68px;overflow:hidden;position:relative;width:120px">
<a id="v0" style="text-decoration:none" href="/url?url=http://www.footytube.com/video/southampton-manchester-united-sep02-127812&amp;rct=j&amp;sa=X&amp;ei=P2hEUIfkKYKk0QXppoHgCA&amp;ved=0CEIQuAIwAg&amp;q=manchester&amp;usg=AFQjCNEBZOpSGbL3i-xMze45YxunEAhAag">
<div style="position:relative;top:-1px;left:0px">
<img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5Ojf/2wBDAQoKCg0MDRoPDxo3JR8lNzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzf/wAARCABGAHgDASIAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAAAAUCAwQGAQf/xAA3EAABAwMCBAMGBQMFAQAAAAABAgMEAAUREiEGEzFBIlFhFDJxgaHRFSNCkbFSksEWRFNik+H/xAAZAQADAQEBAAAAAAAAAAAAAAACAwQBAAX/xAAlEQACAgICAgIBBQAAAAAAAAABAgARAyESMQRBEyJRFDJCYYH/2gAMAwEAAhEDEQA/AE/skGO20WbNDbUpXVUfOf3rWjhtiTclpMKGgKGrGgeXYU1vvJRChuhlLni6OqVt8kkVKZdpUO7tNRgy2hxtOrDQz8j96XXsmOOXkn0FExdceEbVbLM/LmsoU22Ula0RshsE4ycb4rdarDwvJiNsIZgmZywtbDjGh5IyNyk79waleZ01crlh1x1spSVtEZSoHYggVsmQpwipZtkBjQ8wGXVJcIkFAO35iiVHGTimKy+9GT27gcjMB4JtrTi3nIfNQMhLaIm38ZqpFgtLUp61i0sqe1qRzBEKsEZ3yfhWZyNELjsOS+6UoGlaGXDq8PYq0g/WnbMwKMdB1fmp6nA+Gw6Vh4fxlG+NvMFv4IgNurdXFbUCQkcyGQE7DfcdN6STbdardInw3YsJ9YXpS420COnY02hFSfxVvKvDnTqJ2+Fc8hs43xnvvScmRQPrKMGAZGJM0wLRb12aY6qDGUoYwot+L5VODa7Yu0urct8UrSseLljNbbeoCzTkgE9M4ryGc2h4ZPvg7Efasxm6JnZ0rmB+RFvEFmtzU1tDEBhoBsaglsDNMl2e2AxHPwyKoFrJTyhnbvXnETWmc0tvPjbHU6qZO4RLhpUCfyjjFa/7u4kqPiSu4tdttrdQtwWmKAU48LI29dhSyDarX7S1rixHArGUBGVb+YxXT2h4vWyW2N+VqHlsTSWzlpNwbKiU+LGdVdYsbhYEYq4oaEcR7BZ5UdxX4TFbDasZ5KRqoprEhKjpdVIfK0OKykBWcDyopvICeYzm9SmUyw7Zkp8ThCQpJ2T96Vz32vxeOkRWyoIBC15UenqcfSmaTFQqKxzipbiMeBBx9cVivJYYvjSVMFag3sVOY+lbdpKMAIy163Kr9LeLRw6pA0D3TjvTnh2dHlxmhPdMfQBpdJ7+hpbd31NttLRpbJCQpQQCcE+tUXSBIkToKmgt1k4yAcj7UBW+o4MoxgGdXxRZGHojdwZeZU8yk855IxlB77b7UnjwmHURil5etpAOoJ05+XWsLl+a4QnSEzXnWY7gIb1pKs5HYb5pI/xS1dAl22BxhvWcskFOBnbHoRvWICILlsgCgxwhOLlc2Cs+NOfFSu2RGS1JU+AeWDgE9a1S5qGJUWSCg8xOHR1I+NX365QfYeTC5alLPi5eDj40JO49S4FAdyi1NJdts5HMAJA9cfCq3o7UWErS4skjOPWsVsmeyMuNKAKXRj1FbHC06y2FL8XTJoFahG5UIZtVcUC5ll1tTp1pQr3T5U1euTLt4Q+NmQ3gACkN5jHmJShsknunfFRVLZZylaXXFj/jTkUwtY1AxYwW+8dQriiE5Lw3qQ+MYz9qyRnOWouNnBBynUNgaWtPKkg8pDjQ/wC/hz+4q9iGlKtbp177pWskH5Uog+zLsaIptVub7jxBJXbx7ROCOWsZKF0Vcw4I8RYYaYaGv9DaRRRlgJMcO9KI6nIajm2OLltIUjoEgqONvKp3xMU3hhxxTq1lroAADSiREmPRIntCmGOXlI5iwkAZr11MNN1CpFxDikpxy20Z7edHZiFwgEEmb7xOZEcKipaWvQnJIJ0+lWtcUJi29hL+eYoYSAcA+lIEzIaY0pcSG5JWFAfmuaB19Aak5MmKbiqYLcNI6pZaSSd+mpQJ/bFdbXcE48RTid0ZTcbLIvTkpPJcBWCpDhBASe25xn964W3zHYqx4ilQ2UnyI619ASJEy4SEKdfkEoOxUVYyK5698LSA2mRHQhC86S1qAz60VgdzWQsBwHUmxc47jeXCQe4O4NDkxr3m3UpHbw1zSo05klJivjzwkkfSvMysbx3v/M/au4odwvnzgUNR4q4Fa9SVLWUH+ogH5Vc1dVvy0slYQFbJz50ghOpQ8EyQ4lAV+YkDxBPwrRd4rLb6UQ5aZDK06kOo2PwPrR8FI1EnK5a2Nztxc4lrjh2XuFAgJPU0qgTkv5wnSTuO1cyw0XlDnOuLX21qz+1MU4ZUkpO47k1i4RW4Y8h1NrOiabVIfbZ1BJUcBSjsKsU2Y75bXhegkHB2OKSKnMraLTiyCR1HY1bGuKEvNscsBOnK18zJUAOwxS2xVLMXlBmsidEmS2I7nLitZzvqJNFJ7A9DTHlBqNJWNQzzn/4xmilFaMNX5i6mmZYnJ8WMHWX1hJPvLKf5NbTY46LumS5IbbUlGFJDpV28h1qLhkSIjCxzHDk77nv861mDIROC1pDSCPecUB27Z3reRgnEkpaTAajPhS3nhqGyRoHXzOT9KwXSfFQzEDEWOkBeSp9CnCBntuBn5UwSzEbZf5ksK3GzKNR6+uKUXpcKOiIEW52U2ok63lq8O46pRgY60Sne4vMvFfrPXr7JduciEiQsL5SgkBWACQMEJFeWpyS/aG3pcdxtfQlxOnUfPFaIcx83WQhCW2ULR4VMtBIG3n1qQDimCtanFDP6lE/zRZKneKHJs9SrJPejfp/ivcdaKnJM9L/Jy/E7AjSm5SU7LB1gbZI/+Ve/w3IYa50dwO6gCpBTp3UMjST71buI2C/a3CkZU0oLHy6/TNYLHOWWYrSJLJSwsFTMpfhIByNGf1eXrVWFrE8bzE45NTTY4kJ9mSu5IwWxtqyDnHl50ofe5ZWnPNbB8BJ0kCr7zePbnFGMw6klalEukE47JGPh3rHGjqntPkq5a2Qk6NOSpJO57U+TGZysKWNCiST7ua+hRuEEt8PsTJLmmeydS2ljYtkb6T3O9fPrtDNtlIZQ+HwtpLmUo06dQyAabw+Mr01bk23mt8nQGwpSSpQR/TntQmarUQZ2EBmExDdCOapJwQEtpTj60VRZ3WJUFSlSUJUUjKAkq0mioGcg1Uq/V/1ETnHinGUI5b6dPXQoAfSoL41imWX1Q3iSBnKhk0UVTxE75G/Mi3xlHSh1JiOnX08Q2q1HGltEcIdgylqHYLSAf80UVgUXObK9dyTfHsZqQp1q2BsfoIwpQ+Zql7jdDow6w8odhqFFFaVExMrjoyn/AFfGP+1e/uFB4ujYz7I7/cKKKwosYc+Su5B7iqO4ytHsrmFpI6iucalpb2CVY+NFFEgA6k+Z2Y7k/bVKO4wrzFXRrq5FeDjAw4OuoagflRRTTETPKmGW4t1zPMVuT0G1euPsDSqO2tO3iBPf0ooofc6ObFxKxbdaX4zjqFDolWKKKKEqCZ0//9k=" alt="" id="vidthumb3" class="th vidthumb3" style="display:inline-block;height:70px;margin:0px 0px 0px 0px;border:0;width:120px" align="middle" border="0" height="70" width="120">
</div>
<span class="vdur" style="right:0;background-color:#000;bottom:0;color:#000;filter:alpha(opacity=70);font-size:11px;font-weight:bold;opacity:0.7;-khtml-opacity:0.7;-moz-opacity:0.7;padding:1px 3px;position:absolute;text-align:right;text-decoration:none">►&amp;nbsp;5:53</span>
<span class="vdur" style="right:0;bottom:0;color:#fff;font-size:11px;font-weight:bold;padding:1px 3px;position:absolute;text-align:right;text-decoration:none"> 
```

使用此代码：

```
var html = document.getElementsByTagName("tr")[0].getElementsByTagName("td")[1].innerHTML
html = html.replace( /2012/g, "???" );
document.getElementsByTagName("tr")[0].getElementsByTagName("td")[1].innerHTML =html; 
```

在这段代码中，我想替换`2012`为`????`

但我想用 ??? 替换值中的每个数字 但不能替换 url 中的数字。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:13:14.420

由于 URL 都`-`在 URL 中使用斜杠，因此您可以执行以下操作：

```
html = html.replace( /[^\-]2012/g, " ???" ); 
```

# c# - 如何根据当前服务器找到最合适的缓冲区大小来读取或写入Stream

> ID：12245399
> 
> 赞同：3
> 
> 时间：2012-09-03T09:42:00.900
> 
> 标签：c#, .net, sockets, tcp, stream

我正在编写一个服务器，它将准备好并写入巨大的文件/数据库。

我在很多地方都使用了 Stream 读写函数，我使用 8192 作为缓冲区大小。

我也在从 TCP 套接字读取大量输入。

我不知道将部署服务的虚拟机的配置是什么。

是否有任何内置函数可以用来确定最适合我的服务器的缓冲区大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T10:45:09.930

我自己也经常这样想。但最后我不认为有一个通用的规则可以适用。它始终取决于您的特定需求。

根据经验，如果您的缓冲区更大，您需要更少的往返文件系统或数据库，这通常是大多数情况下的最佳选择。

但是，您的系统可以在不创建其他应用程序的情况下一次将多少数据读入内存，很大程度上取决于您的个人环境。某些移动设备的细节可能与您的顶级服务器硬件不同，等等。

其他要考虑的事情是网络带宽和其他共享资源，以及对您的操作的绝对性能影响。

例如，在一个包含数千个图像文件的项目中，经过几次尝试，我们发现 idela 缓冲区大小约为 1 MB。对于大小小于我们使用的缓冲区大小的图像，我们使用的缓冲区大小等于文件大小。对于您的情况，这当然不适合。

微软的性能专家 Rico Mariani 列举了性能编程中最重要的 10 个方面：测量、测量、测量、测量……（你明白了。:-)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T10:03:29.033

关键因素不是应用程序缓冲区的大小，而是套接字发送和接收缓冲区的大小，它必须 >= 链路的带宽延迟乘积。任何高于此的增加都应产生零收益；低于它的任何下降都将在次优带宽中变得可见。应用程序缓冲区在减少系统调用方面可以发挥作用，但 8192 通常足以满足大多数用途，尤其是网络用途。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T09:52:16.943

它取决于生产环境中的吞吐量、通信通道利用率和连接稳定性。
从我的角度来看，这里最好的方法是制作一个自适应算法，它会根据上述因素改变缓冲区大小。

**更新**。
使用缓冲区时要小心，即等于或大于 85000 字节。此类缓冲区应尽可能多地重复使用（因为 LOH 行为）。

# java - 使用 spring 和 hibernate 测试数据库连接

> ID：12245400
> 
> 赞同：1
> 
> 时间：2012-09-03T09:42:06.460
> 
> 标签：java, spring, hibernate, c3p0, applicationcontext

我目前正在开发一个java应用程序。`Spring`它是一个带有and的独立客户端`Hibernate`。也`C3P0`。

在以前的版本中，我们使用标准用户（在配置文件中硬编码）进行数据库连接，但现在我们对其进行了更改，以便每个用户都必须提供自己的凭据。

带有数据库代码的 bean 基本上是按需创建的。
我更改了 XML 文件并添加了一个后处理器，用于设置凭据以及一些连接设置。现在看起来与此类似：

```
ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext();

configurer = new PropertyPlaceholderConfigurer();

// properties are retrieved from a private method
configurer.setProperties(getProperties());

context.addBeanFactoryPostProcessor(configurer);

context.setConfigLocations(new String[] { "first.xml","second.xml" });

context.refresh();  

return context.getBean("myClass", MyClass.class); 
```

这一切都按预期工作，但现在我们到达了我目前卡住的部分。

我想为连接提供一个测试功能，以便用户可以单击一个按钮，然后被告知他的凭据是否被接受。
我的第一个想法是在数据库上做一个简单的选择。然而，通过日志筛选，我注意到 Spring 在`refresh()`（或者更确切地说是 bean 的实例化）期间尝试连接到数据库。我可以在日志中看到异常，例如：
`java.sql.SQLException: Connections could not be acquired from the underlying database!`
不幸的是，Spring 似乎并不真正关心。异常被记录下来但`refresh()`完成并且因此不会引发任何异常。我曾希望我可以简单地捕获异常，然后我就会知道连接失败了。

我可以按计划进行选择，但我想尽可能地限制连接尝试，因为数据库服务器会在多次尝试后阻止用户。即使有很多尝试（在我更改连接池的设置之前已经有一些乐趣）。

我对这个问题的搜索几乎一无所获。有没有办法以某种方式获得异常？或者 Spring 是否提供了一种 API，可以告诉我实例化/刷新期间的连接错误？

如果做不到这一点，有什么替代方法的想法吗？最好只需要一次尝试即可确定连接是否可能。

**编辑：**对于任何感兴趣的人：我接受了 Santosh 的建议，并在`JDBC`.
不幸的是，似乎没有简单的方法来利用 bean 实例化期间遇到的数据库错误/异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:53:17.267

1.  您正在寻找的那种功能使用 spring+hibernate 来完成是非常棘手的。
2.  连接属性在会话工厂级别设置，如果凭据不正确，则不会实例化会话工厂。
3.  [从他的回答](https://stackoverflow.com/questions/2768511/spring-hibernate-sessionfactory-recovery-from-a-down-server)中引用@Bozo 。

    > 您可以做的是扩展`LocalSessionFactoryBean`和覆盖该 `getObject()`方法，并使其返回代理（通过 `java.lang.reflect.Proxy`或 CGLIB / javassist），以防 sessionFactory 为空。这样 a`SessionFactory`将被注入。代理应该持有对一个 bare 的引用，该引用`SessionFactory`最初为 null。每当要求代理连接时，如果 sessionFactry 仍然为空，则调用`buildSessionFactory()` (of `LocalSessionFactoryBean`) 并委托给它。否则抛出异常。（然后当然映射你的新工厂 bean 而不是当前的）

4.  还有一种*简单且基本的方法*，其中在创建之前`ClassPathXmlApplicationContext`，只需尝试使用原始 JDBC 调用获取连接。如果成功，则继续，否则使用适当的消息。

5.  您可以在此处限制连接尝试，因为您可以完全控制。

# .net - 暴露一个 rest api 以使用 Json 进行通信

> ID：12245405
> 
> 赞同：0
> 
> 时间：2012-09-03T09:42:43.873
> 
> 标签：.net, rest, json.net, getjson

我想找出一个可以接受 JSON 格式的值和相同格式的响应的 api。

需要知道如何通过 .NET 技术对其进行编码。

锄头发送和接收值和响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:16:40.683

使用[Asp.Net Web API](http://www.asp.net/web-api) - 链接的站点上有很多很好的演练和指南。

# memory - haskell中构造函数的内存使用情况

> ID：12245410
> 
> 赞同：7
> 
> 时间：2012-09-03T09:43:01.253
> 
> 标签：memory, haskell

> **可能重复：**
> [Haskell 数据类型的内存占用](https://stackoverflow.com/questions/3254758/memory-footprint-of-haskell-data-types)

在解决组合问题时，我经常将解决方案表示为位串，例如。1010100010110111000110...你明白了。

我想当我`[Int]`用于位字符串时，`Int`总是花费相同数量的内存，无论实际数字有多大（因为`Int`它是有界的，与 相比`Integer`），因为计算机只记住位表示，并且`String`'s 会据我所知，占用更多空间。

我的想法是使用数据类型

```
data Bits = Empty | Zero Bits | One Bits deriving (Eq,Ord,Show) 
```

但是与's相比，构造函数和使用`Empty`多少`Zero`内存？`One``Int`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T09:58:09.617

`Int`在内存中花费两个词（`#I`构造函数和`#Int`字段），您的`Bits`数据可以使用各种成本，例如：`Zero (One (Zero Empty))`将花费：

1.  `Empty`构造函数的一个词
2.  `Zero`构造函数和字段的两个词
3.  `One`构造函数和字段的两个词
4.  `Zero`构造函数和字段的两个词

和总成本 - 7 个字。因此，您的数据的内存量可能超过`Int`.

# jquery - JQuery 1.8.1 TypeError: d is undefined When Using Spring Web MVC + Apache Tiles + JSPX

> ID：12245417
> 
> 赞同：0
> 
> 时间：2012-09-03T09:43:20.500
> 
> 标签：jquery, spring-mvc, tiles

我是 JSPX 和 Tiles 的新手。我的瓷砖定义（Tiles 2.2）是：

```
<tiles-definition>
  <definition name="default" template="/WEB-INF/layouts/test.jspx" preparer="com.test.MenuPreparer">
  </definition>
</tiles-definition> 
```

我的内容`test.jpsx`是：

```
<?xml version="1.0" encoding="UTF-8" ?>
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tiles="http://tiles.apache.org/tags-tiles"
  xmlns:c="http://java.sun.com/jsp/jstl/core"
  xmlns:jsp="http://java.sun.com/JSP/Page"    
  xmlns:spring="http://www.springframework.org/tags">     
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<spring:url value="/scripts/jquery-1.8.1.min.js" var="jqURL" />

<script type="text/javascript" src="${jqURL}"><jsp:text /></script> 
</head>

<body>
<h1>TEST!</h1>
</body>
</html> 
```

在我的`servlet-context.xml`中，我包含了资源位置：

```
<resources location="/resources/scripts/" mapping="/scripts/**" /> 
```

当我尝试查看页面是 Firefox 14.0.1 时，我在错误控制台中发现以下内容：

```
TypeError: d is undefined
http://localhost:8080/test/scripts/jquery-1.8.1.min.js 
```

当我在 IE9 中查看同一页面时，我在 IE 控制台中收到以下消息：

```
SCRIPT5007: Unable to get value of the property 'style': object is null or undefined
jquery-1.8.1.min.js, line 2 character 19451 
```

JQuery 在这两种浏览器中都不起作用。

但是当我在独立的 HTML 中包含相同的 JQuery 脚本（未部署在 tc Server 中）时，我在浏览器控制台中没有收到错误消息并且 JQuery 正在工作。

使用 Spring Web MVC + Apache Tiles + JSPX 时如何使 JQuery 工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:28:20.880

阅读后[，当我包含 jquery 时，为什么我的简单严格的 XHTML 文件会出错？](https://stackoverflow.com/questions/2687777/why-does-my-simple-strict-xhtml-file-give-errors-when-i-include-jquery)，我添加了以下行`test.jspx`：

```
<jsp:output doctype-root-element="html" doctype-public="-//W3C//DTD XHTML 1.0 Strict//EN" doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd" omit-xml-declaration="yes" /> 
```

它现在正在工作。

# forms - 将值设置为尚未呈现的表单

> ID：12245421
> 
> 赞同：1
> 
> 时间：2012-09-03T09:43:33.900
> 
> 标签：forms, extjs, extjs4.1

我在选项卡中有一个表格。它是第二个选项卡，因此在您打开它之前它不会呈现。

我试图将数据提交到表单，`Ext.getCmp('DetailsForm').getForm().setValues(selections[0]);`但它说它不是一个函数。可能是因为它还没有渲染。我必须做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T20:36:08.677

将Ext.tab.Panel的[deferredRender配置属性设置为](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.tab.Panel-cfg-deferredRender)`deferredRender: false`

这将强制呈现所有选项卡，而不仅仅是活动选项卡。现在表格将在那里。如前所述，我建议您也使用 myTabPanelRef.down('from').getForm().setValues(selections[0]); 访问表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:48:32.100

订阅第二个选项卡`show`事件或`painted`事件
，然后最好使用`.down()`方法查找表单，因为这不会在整个 DOM 中查找。设置值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:04:56.623

使用表单面板的**渲染**事件。您的代码将是这样的 -

`Ext.getCmp('DetailsForm').on('render', function(){ this.getForm().load(selections[0]); });`

# android - Android GCM 注册 ID

> ID：12245424
> 
> 赞同：0
> 
> 时间：2012-09-03T09:43:43.960
> 
> 标签：android, google-cloud-messaging

我想使用 GCM。我尝试在客户端进行以下操作：

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="com.example.test" android:installLocation="preferExternal" android:versionCode="1" android:versionName="1.0">
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<permission android:name="com.example.test.permission.C2D_MESSAGE" android:protectionLevel="signature" />
<uses-permission android:name="com.example.test.permission.C2D_MESSAGE" />

<application android:icon="@drawable/ic_launcher"  android:label="@string/app_name" >

<activity android:screenOrientation="portrait"
            android:name=".MainActivity"
            android:label="@string/app_name"
             android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="com.example.test" />
        </intent-filter>
    </receiver>
    <service android:name=".GCMIntentService" android:enabled="true" />
    </application>
</manifest> 
```

活动：

```
package com.example.test;

import com.google.android.gcm.GCMRegistrar;

import android.os.Bundle;
import android.app.Activity;
import android.app.PendingIntent;
import android.content.Intent;
import android.util.Log;
import android.view.Menu;
import android.view.WindowManager;
import android.widget.Toast;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        gcmRelated();
    }

    private void gcmRelated() {
        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        final String regId = GCMRegistrar.getRegistrationId(this);
        Toast.makeText(this, regId, 10000).show();

        if (regId.equals("")) {
          GCMRegistrar.register(this, "609612932495");
        } else {
          Log.v("Register", "Already registered");
        }

    }

} 
```

GCMIntentService.java：

```
package com.example.test;

import com.google.android.gcm.GCMBaseIntentService;
import com.google.android.gcm.GCMRegistrar;
import android.content.Context;
import android.content.Intent;
import android.os.PowerManager;
import java.util.logging.Logger;

public class GCMIntentService extends GCMBaseIntentService
{
    private static PowerManager.WakeLock sWakeLock;
    private static final Object LOCK = GCMIntentService.class;
    private static final String GCM_SENDER_ID = "609612932495";
    private static final String GCM_INTENT_FILTER = "com.example.test.GCM_MESSAGE";
    private static final String MESSAGE_TYPE = "Type";
    private static final String MESSAGE_CONTENT = "Body";
    private static Logger log = Logger.getLogger(GCMIntentService.class.getName());

    public GCMIntentService()
    {
        super(GCM_SENDER_ID);
    }

    static void runIntentInService(Context context,Intent intent)
    {
        synchronized(LOCK)
        {
            if (sWakeLock == null)
            {
                PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
                sWakeLock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,"sc_wakelock");
            }
        }
        sWakeLock.acquire();
        intent.setClassName(context,GCMIntentService.class.getName());
        context.startService(intent);
    }

    @Override protected void onRegistered(Context context,String registrationId)
    {
        log.warning("From GCMIntentService: Device successfully registered as "+registrationId);

    }

    @Override protected void onUnregistered(Context context,String registrationId)
    {
        log.warning("From GCMIntentService: Device successfully unregistered");

    }

    @Override protected void onMessage(Context context,Intent messageIntent)
    {
        log.warning("From GCMIntentService: Game update notice received");

    }

    @Override protected void onDeletedMessages(Context context,int total)
    {
        log.warning("From GCMIntentService: Server deleted "+Integer.toString(total)+" pending messages");
    }

    @Override public void onError(Context context,String errorId)
    {
        log.warning("From GCMIntentService: Error "+errorId);

    }

    @Override protected boolean onRecoverableError(Context context,String errorId)
    {
        log.warning("From GCMIntentService: Recoverable error "+errorId);
        return(super.onRecoverableError(context,errorId));
    }
} 
```

它显示没有错误。**GCMRegistrar.getRegistrationId(this)**总是返回**" "(empty string)**。所以，它总是试图注册，我从来没有得到 registerId。

有什么要做的吗？

另外，在实现服务器端代码时，我是否需要发送此注册 ID 并将所有 ID 保存在数据库中并发送它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:53:02.623

```
 public class GCMIntentService extends GCMBaseIntentService {

    @SuppressWarnings("unused")
    private final String TAG = "GCMIntentService";

    public GCMIntentService() {

        super("GCM_ID");
    }

    /**
     * Issues a notification to inform the user that server has sent a message.
     */
    public void generateNotification(Context context, String message) {
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.ic_launcher, message, when);
        String title = context.getString(R.string.app_name);

        Intent notificationIntent = new Intent(context, SamplePushActivity.class);
        PendingIntent intent = PendingIntent.getActivity(context, 0, notificationIntent, android.content.Intent.FLAG_ACTIVITY_NEW_TASK);
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notification.defaults |= Notification.DEFAULT_SOUND | Notification.DEFAULT_LIGHTS;
        notificationManager.notify(0, notification);
    }

    @Override
    protected void onError(Context arg0, String arg1) {

    }

    @Override
    protected void onMessage(Context arg0, Intent arg1) {

        Resources res = getResources();
        Log.d("GCM", "RECIEVED A MESSAGE");

        // Get the data from intent and send to notificaion bar

        System.out.println("MEssage Recieved :" + arg1.getStringExtra("message"));
        System.out.println("Data Recieved :" + arg1.getExtras().getString("collapse_key"));

        // generateNotification(arg0, arg1.getStringExtra("state"));
        // generateNotification(arg0, arg1.getStringExtra("message"));
        generateNotification(arg0, res.getString(R.string.assignment_new, "arg1", "arg2"));
        // String notifyMessage = arg1.getStringExtra("collapse_key");
        // if
        // (arg1.getStringExtra("collapse_key").equalsIgnoreCase("NOTIFICATION_ASSIGNMENT"))
        // {
        // generateNotification(arg0, arg1.getStringExtra("message"));
        // }
    }

    @Override
    protected void onRegistered(Context arg0, String arg1) {
        // TODO Auto-generated method stub
    }

    @Override
    protected void onUnregistered(Context arg0, String arg1) {
        // TODO Auto-generated method stub
    }

public class SamplePushActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);
        TextView regNumber = (TextView) findViewById(R.id.textView1);

        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);

        if (GCMRegistrar.isRegistered(this)) {
            Log.d("info", GCMRegistrar.getRegistrationId(this));
        }

        final String regId = GCMRegistrar.getRegistrationId(this);
        regNumber.setText(regId);

        if (regId.equals("")) {
            // replace this with the project ID
            System.out.println("registration ID is " + regId);
            GCMRegistrar.register(this, "GCM_ID");
            Log.d("info", GCMRegistrar.getRegistrationId(this));
            System.out.println("Get Reg ID: " + GCMRegistrar.getRegistrationId(this));
            regNumber.setText(regId);
        } else {
            Log.d("info", "already registered as" + regId);
        }
    } 
```

```
<uses-sdk android:minSdkVersion="8" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.WAKE_LOCK" />

<permission
    android:name="in.android.gcm.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<uses-permission android:name="in.android.gcm.permission.C2D_MESSAGE" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.USE_CREDENTIALS" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".SamplePushActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="in.android.gcm" />
        </intent-filter>
    </receiver>

    <service android:name=".GCMIntentService" />
</application> 
```

# javascript - 使用greasemonkey预加载页面

> ID：12245426
> 
> 赞同：2
> 
> 时间：2012-09-03T09:43:52.220
> 
> 标签：javascript, firefox, greasemonkey, preloader

我见过一些预加载问题，但其中大多数来自拥有网站并希望为用户实现一些预加载的人。我想要做的是使用greasemonkey在一些网站上实现一些预加载以供我自己使用。

我经常光顾的一些网站有像书一样的“页面”。而且有很多页面（在大多数情况下，每页上都有 1 MB+ 的图像）所以我想制作一个greasemonkey 脚本来加载接下来的 1-2 页。下一页的 URL 是可预测的（它们按顺序编号，编号前有前缀）。

我该怎么做呢？有没有办法下载网页（包括所有图像）并让 Firefox 知道它已被缓存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T10:37:54.600

您可以在隐藏的 iFrame 中加载页面。然后它将被缓存（基于服务器和您的 Firefox 设置）。

```
// ==UserScript==
// @name        _Preload page(s)
// @namespace   _pc
// @include     http://YOUR_SERVER.COM/YOUR_PATH/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant       GM_addStyle
// ==/UserScript==

if (window.top != window.self)  //-- Don't run on frames or iframes.
    return;

var preloadPage = "http://cheezburger.com/6555102208";

/*--- Load page in hidden iFrame.
    It will then be cached per FF and server settings.
*/
$("body").append (
    '<iframe class="GM_hiddenIFrame" src="' + preloadPage + '"></iframe>'
);

GM_addStyle ( (<><![CDATA[
    iframe.GM_hiddenIFrame {
        display:        none;
    }
]]></>).toString () ); 
```

请注意，`window.top != window.self`添加了该位，否则脚本可能会在隐藏的 iframe 上触发，从而导致递归（可能是无限的）。

* * *

我通过以下方式验证了此作品：

1.  清除 Firefox 的缓存
2.  在测试页面上运行此脚本。
3.  在不同的选项卡中加载[cheezburger.com/6555102208](http://cheezburger.com/6555102208)
    ... Firebug 的*网络*面板中的几乎所有内容（包括图像）的状态为`304 Not Modified`- 这意味着它已被缓存。

    （新的、无缓存的加载返回状态`200 OK`。）

# html - 两级水平手风琴菜单

> ID：12245429
> 
> 赞同：1
> 
> 时间：2012-09-03T09:44:06.813
> 
> 标签：html

请，我需要同样的东西，但 html5 不是 flash

[http://www.oxylusflash.com/files/1571/index.html](http://www.oxylusflash.com/files/1571/index.html)

你知道吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:55:55.130

好吧，我认为它不可能做到这一点`html5`

所以如果你真的想要它们并且可以使用 jquery 然后看看这些

1) [http://www.htmldrive.net/item/view/id/521](http://www.htmldrive.net/item/view/id/521)

2) [http://discovery.pulseextensions.com/2012/05/30-jquery-accordion-menu-best-example-an-tutorials/](http://discovery.pulseextensions.com/2012/05/30-jquery-accordion-menu-best-example-an-tutorials/)

# javascript - 如何在 jQuery 中向新生元素添加事件？

> ID：12245432
> 
> 赞同：0
> 
> 时间：2012-09-03T09:44:13.703
> 
> 标签：javascript, jquery, events

我有一个事件，它在页面上插入新的 DOM 元素。如何向这个新元素添加事件？我的目标是：当用户点击输入时，旧值应该被清除。我试过这个：

```
$('a').on('click', function() {
    var newel = '<input type="text" value="test" />';
    $(newel).insertAfter($('a'));

});
$('input').on('focus', function() {
    alert($(this).val());
    $(this).val('');
});​ 
```

[http://jsfiddle.net/WpyUf/](http://jsfiddle.net/WpyUf/) 新事件没有添加到元素中，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:50:00.500

> 委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。例如，该元素可以是模型-视图-控制器设计中视图的容器元素，或者如果事件处理程序想要监视文档中的所有冒泡事件，则可以是文档。在加载任何其他 HTML 之前，文档元素在文档的头部是可用的，因此在此处附加事件是安全的，而无需等待文档准备好。

```
$('a').on('click', function() {
    var newel = '<input type="text" value="test" />';
    $(newel).insertAfter($('a'));
});
$(document).on('focus', 'input', function() {
    $(this).val('');
});​ 
```

[**小提琴**](http://jsfiddle.net/WpyUf/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:50:43.770

您的代码通过将`jQuery`版本更改为`1.7.2`

这是[更新的小提琴](http://jsfiddle.net/iMaverick/WpyUf/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:51:08.340

你可以这样做。

```
$('a').on('click', function() {
    var newel = '<input type="text" />';
    $(newel).insertAfter($('a')).bind('click', function() {alert("me");});
;
}); 
```

[http://jsfiddle.net/dadviegas/WpyUf/4/](http://jsfiddle.net/dadviegas/WpyUf/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T09:52:18.473

```
$('a').on('click', function() {
    var newel = '<input type="text" />';
    $(newel).on("focus",function() { alert("hello")}).insertAfter($('a'));

}); 
```

[演示](http://jsfiddle.net/mplungjan/wzKy7/)

# javascript - 动力学js的困难（错误？）

> ID：12245437
> 
> 赞同：0
> 
> 时间：2012-09-03T09:44:19.467
> 
> 标签：javascript, html, kineticjs

我是 KineticJS 的新手，文档很差，所以我在制作这两个示例时遇到了一些困难：

[http://jsfiddle.net/jure/xUEse/](http://jsfiddle.net/jure/xUEse/)

[http://jsfiddle.net/jure/jgrpx/](http://jsfiddle.net/jure/jgrpx/)

他们怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:03:28.487

不知道为什么第一次鼠标移动给出未定义，但你的 if 语句应该是`if(p!="undefined")`or`if(typeof p!=undefined)`和 not `if(typeof p!="undefined")`。

# sqlite - Phonegap：我的 sqlite 数据库会发生什么？

> ID：12245441
> 
> 赞同：0
> 
> 时间：2012-09-03T09:44:31.987
> 
> 标签：sqlite, cordova

我正在为我的移动应用程序使用 phonegap。我正在从应用程序创建一个数据库。一切正常，如预期的那样。

但是当我卸载我的应用程序时我的数据库会发生什么？数据库也被删除了，还是我必须手动删除数据库？

我创建了一个不同的应用程序来擦除数据库，但是查看`console.log()`s 可以看出数据库也与应用程序一起被擦除。

这是真的吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:30:38.033

根据我的经验，当您像用户一样通过删除电话上的应用程序来卸载应用程序时，数据库的数据也会被删除。当我重新安装应用程序进行开发时，让我们说

```
./adb install <packagename> 
```

或从 XCode 中，数据不会**被**删除。

# c# - 获取当前运行进程

> ID：12245443
> 
> 赞同：2
> 
> 时间：2012-09-03T09:44:41.277
> 
> 标签：c#, mysql

我有一个程序可以使用 c# 实时列出所有当前在列表框中运行的进程。我在将其插入 mysql 数据库时遇到问题。我从进程的线程列表框中检索数据，然后保存到数据库。当列表框刷新时我遇到了问题，它重复将相同的数据插入到 mysql 数据库中。

有人可以帮我解决这个问题吗？

这是示例代码

```
foreach (String item in listBox1.Items)
{
    cmd.CommandText = "SELECT * FROM sample";
    MySqlDataReader msdr = cmd.ExecuteReader();

    while (msdr.Read())
    {
        var items = msdr["log"].ToString();
        if(items != item)
        {
            String query = "INSERT INTO sample values('','"+item+"')";
            cmd.CommandText = query;

            using(MySqlDataReader reader = cmd.ExecuteReader())
            {
                reader.Close();
            }
        }
    }
    msdr.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:00:42.380

类似的东西（未测试）：

```
foreach (String item in listBox1.Items)
{
    cmd.CommandText = "SELECT COUNT(*) as cnt FROM sample WHERE log = @log";
    cmd.Parameters.AddWithValue("@log", item)
    bool found = ((int)cmd.ExecuteScalar()) > 0

    if(!found)
    {

       String query = "INSERT INTO sample values('',@log)";
       cmd.CommandText = query;
       cmd.Parameters.AddWithValue("@log", item);
       cmd.ExecuteNonQuery();

    }  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:49:37.567

第一： **永远不要**`INSERT`在语句中使用字符串。**始终**使用[参数](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)。

第二：这取决于*调用*此代码的位置。如果在*刷新*事件中调用它，可能正确的做法是了解实际是否发生了某些更改，并且仅在肯定结果时执行 SQL 查询。

# c# - 如何通过单击超链接打开文件

> ID：12245444
> 
> 赞同：5
> 
> 时间：2012-09-03T09:44:42.853
> 
> 标签：c#, asp.net, visual-studio-2010, web-applications, hyperlink

我有这张桌子

![在此处输入图像描述](../Images/5086102aa6ff54769e5741f61a2c2972.png)

我想单击链接，文件（无论文件）将在一个新的弹出窗口中打开。

这是我的代码：

```
<asp:Repeater ID="dokumente" runat="server">
    <ItemTemplate>
        <tr>
            <td><asp:HyperLink ID="HyperLink4" runat="server" Text='<%# Eval("DokuTyp") %>' NavigateUrl='file://<%# Eval("File") %>'></asp:HyperLink></td>
            <td><%# Eval("Description")%></td>
            <td><%# Eval("Date") %></td>
            <td><%# Eval("File") %></td>
        </tr>
    </ItemTemplate>
</asp:Repeater> 
```

但它不适用于 NavigateUrl。任何人都可以帮助我或任何想法如何做到这一点。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T09:55:28.527

file:/// 用于您自己机器上的资源。

要在服务器上打开文件，您必须链接到服务器上的 url。采用：

```
HttpContext.Current.Request.ResolveUrl(pathOnServer); 
```

像这样更改您的代码：

```
<asp:Repeater ID="dokumente" runat="server">
    <ItemTemplate>
        <tr>
            <td><asp:HyperLink ID="HyperLink4" runat="server" Text='<%# Eval("DokuTyp") %>' NavigateUrl='<%# HttpContext.Current.Request.ResolveUrl(Eval("File")) %>'></asp:HyperLink></td>
            <td><%# Eval("Description")%></td>
            <td><%# Eval("Date") %></td>
            <td><%# Eval("File") %></td>
        </tr>
    </ItemTemplate>
</asp:Repeater> 
```

服务器在哪里

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:49:23.737

“文件”协议在用户计算机中打开一个文件。我猜你必须在服务器端读取文件并调用 Resposne.Write。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:59:33.720

如果要在服务器上查找文件，可以使用`Server.MapPath`方法；如果您想在服务器上查找文件，“file://”不是正确的 url

```
NavigateUrl=<%#Server.MapPath(DataBinder.Eval("File"))%> 
```

# perl - 如何在变量中保留一个值以连续执行 pl 脚本

> ID：12245447
> 
> 赞同：2
> 
> 时间：2012-09-03T09:44:53.560
> 
> 标签：perl, perl-module

我是 perl 脚本的新手。需要你的建议

我有一个运行成功或失败的*xyz.pl脚本。*如果失败，我需要保存失败的检查点，例如变量中的失败名称

```
$var=job[0]; 
```

当我第二次重新运行*xyz.pl*时，它应该读取这个变量**$var**并选择它的值并从失败​​的工作开始，而不是从头开始。

在perl中，有可能吗？是否有变量可以为脚本的连续运行保留上述场景的值。

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:46:58.087

变量不能在脚本结束后继续存在。但是，您可以将该值保存到一个文件中，以后可以将其读回到脚本的另一次运行中。

# annotations - 在哪里可以找到完整的 Eclipse4 注释列表？

> ID：12245450
> 
> 赞同：0
> 
> 时间：2012-09-03T09:45:19.707
> 
> 标签：annotations, eclipse-rcp

在下面的教程中有很多生命周期和行为注释： [http ://www.vogella.com/articles/EclipseRCP/article.html#programmingmodel](http://www.vogella.com/articles/EclipseRCP/article.html#programmingmodel)

*   @PostConstruct
*   @PreDestroy
*   @重点
*   @坚持
*   @PersistState

*   @执行

*   @CanExecute
*   @GroupUpdates
*   @EventTopic

**问题：**

我在哪里可以找到它们的完整列表？有官方文档吗？

我想，这些注释来自不同的框架（OSGI、Spring 等）。
哪些注释来自哪个框架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T15:31:21.963

目前关于特定注释的文档非常稀少，因此您没有一个可以去的地方。

`@PostConstruct``@PreDestroy`来自 JSR-250 。

`@Inject``@Named`来自 JSR- 330

`@Persist`、`@PersistState`和`@Focus`是特定于 Eclipse4 UI 呈现生命周期的注释。

`@Execute`、`@CanExecute`、`@Optional`和`@GroupUpdates`是 Eclipse4 核心 DI 故事的一部分，以帮助在运行时通知 DIed 值的更改或在 DI 上下文中调用方法。

`@EventTopic`并且`@Preference`是 Eclipse4 DI 扩展，可以从其他提供中注入值并允许通知更改。

`@PostContextCreate`、`@PreSave`、`@ProcessAdditions`和`@ProcessRemovals`是在生命周期管理器上作为 Workbench 应用程序生命周期的一部分调用的方法。

# c - C 变量赋值和 R 等效项

> ID：12245453
> 
> 赞同：1
> 
> 时间：2012-09-03T09:45:31.667
> 
> 标签：c, r, variables, variable-assignment

嗨，我正在尝试理解 C 中的以下变量赋值，并尝试在 R 中重新编写它。我经常使用 R，但只真正看过 C。

```
 int age,int b_AF,int b_ra,int b_renal,int b_treatedhyp,int b_type2,double bmi,int ethrisk,int fh_cvd,double rati,double sbp,int smoke_cat,int surv,double town
    )
    {
        double survivor[3] = {
            0,
            0.996994316577911,
            0.993941843509674

        };
    a = /*pre assigned*/ 
    double score = 100.0 * (1 - pow(survivor[surv], exp(a)) );
    return(score);
} 
```

幸存者[surv] 在这种情况下如何工作？解释会很有帮助，任何关于如何在 R 中完成作业的输入都将是一个奖励。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T09:53:20.363

这是一个聚合初始化器：

```
double survivor[3] = {
    0,
    0.996994316577911,
    0.993941843509674
}; 
```

相当于：

```
double survivor[3];
survivor[0] = 0;
survivor[1] = 0.996994316577911;
survivor[2] = 0.993941843509674; 
```

并且`survivor[surv]`是存储在`survivor`数组索引处的值。数组索引从`0`到 ，`N - 1`所以如果`surv`是`1`则`survivor[surv]`值为`0.996994316577911`。

* * *

请注意，当前编写的函数不会检查`surv`该数组是否为有效索引`survivor`（即`surv > -1`和`surv < 3`），并且存在未定义行为的风险。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T10:07:04.377

那么，鉴于@hmjd 的答案，R 等价物将是

```
survivor <- c(0, 0.996994316577911, 0.993941843509674) 
```

或者如果`survivor`已经存在并且您希望分配到前 3 个元素中：

```
survivor[1:3] <- c(0, 0.996994316577911, 0.993941843509674) 
```

（注意 R 的索引是从 1 开始的，而 C 的索引是从 0 开始的。）

* * *

至于提取，大体思路与 C 相同，但细节很重要：

```
R> survivor[0] ## 0 index returns an empty vector
numeric(0)
R> survivor[-1] ## negative index **drops** that element
[1] 0.9969943 0.9939418
R> survivor[10] ## positive outside length of vector returns NA
[1] NA
R> surv <- 2
R> survivor[surv] ## same holds for whatever surv contains
[1] 0.9969943 
```

# google-sheets - sumproduct，修复一个数组

> ID：12245455
> 
> 赞同：2
> 
> 时间：2012-09-03T09:45:35.300
> 
> 标签：google-sheets, google-sheets-formula, sumproduct

我有两列我以这种方式对它们进行 sumproduct 操作：

```
=SUMPRODUCT(I37:I61, **D37:D61**) 
```

它工作得很好——我把结果**放在单元格 I8 中**

但是当我将此功能复制到单元格 J8

它转移到：

```
=SUMPRODUCT(J37:J61, **E37:E61**) 
```

我想修复一个数组，所以我的函数看起来像

```
=SUMPRODUCT(J37:J61, D37:D61) 
```

我希望很清楚我想要实现什么:)

有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T10:04:23.483

不确定谷歌电子表格，但在 Microsoft Excel 中，您需要使用以下公式供您使用。我认为谷歌电子表格也适用。

```
=SUMPRODUCT(I37:I61, $D37:$D61) 
```

请注意“$”，它表示当您进行复制粘贴时不要翻译 D。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-22T11:32:15.743

我会使用命名范围来避免任何混淆。以下是步骤 1) 选择范围 D37:D61 2) 通过将名称绑定到插入公式的位置附近的 fx 的左侧来给名称一个范围 3) 让我们调用该范围 DATA1 4) 然后使用公式 =SUMPRODUCT(I37:I61, DATA1) 5) 当您将此公式复制到下一个单元格时，它应显示为 =SUMPRODUCT(J37:J61, DATA1)

让我知道你是怎么办的。

# ios - UIImage Animation 在使用 UIViewController+Transitions 时禁用按钮

> ID：12245458
> 
> 赞同：0
> 
> 时间：2012-09-03T09:45:46.383
> 
> 标签：ios, ios5, uiviewcontroller, uiimageview, uiviewanimation

我的项目让我有些头疼，我认为这是因为我需要边做边学，因此我错过了 iOS 中的一些基本知识，所以不要对我大喊大叫！:-)。

我有一个 iOS iPad 故事板，由大约。33-35 视图控制器。这个概念是“世界”，你逐个查看，直到你到达我有一个动画 UIImage 的表面（25png，1,7f 持续时间）。由于 presentModalView 只是覆盖旧视图而不是在另一个视图从底部进入时将其向上推，所以我添加了 UIViewController+Transitions ( [http://srooltheknife.blogspot.no/2012/03/custom-transition-animation-for -modal.html](http://srooltheknife.blogspot.no/2012/03/custom-transition-animation-for-modal.html)）也可以动画删除旧视图女巫完美。但是，当我在 UIImageView 中使用动画时使用这个额外的库时，所有触摸事件似乎都被禁用了。我已经在视图、按钮、视图上尝试了 enableUserInteraction = YES 但没有帮助。

任何想法？

这是具有动画的 viewController：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"Main world view loaded....");
    NSLog(@"Bounds = %@", NSStringFromCGRect(self.view.bounds));
    //self.view.bounds = self.view.frame;
    NSLog(@"Bounds are now = %@", NSStringFromCGRect(self.view.bounds));
    self.view.clipsToBounds = YES;
    self.navigationController.navigationBarHidden = YES;
    self.view.userInteractionEnabled = YES;
    NSLog(@"User interaction is enabled?= %i", self.view.userInteractionEnabled);
    // Do any additional setup after loading the view, typically from a nib.
    NSMutableArray *images = [[NSMutableArray alloc] init];
    for (int i=1; i<=24; i++) {
        [images addObject:[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"Untitled-%d", i] ofType:@"png"]]];
    }
    world.animationImages = images;
    world.animationDuration = 1.7;
    [world startAnimating];

    NSLog(@"Preparing audio");
    NSURL *audioURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"mainWorldSound" ofType:@"wav"]];
    NSError *audioError;
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:audioURL error:&audioError];
    if(audioError){
        NSLog(@"Error in audioplayer: %@", [audioError localizedDescription]);
    } else {
        AVAudioSession *audioSession = [AVAudioSession sharedInstance];
        [audioSession setCategory:AVAudioSessionCategoryPlayAndRecord error:NULL];
        player.numberOfLoops = -1;
        player.volume = 1.0;
        if([player isPlaying]){
            [player stop];
        }
        [player prepareToPlay];
        [player play];
        NSLog(@"Playing with volume: %f", player.volume);
    }

    [self.view setNeedsLayout];
    [self.view setNeedsDisplay];
} 
```

因此，在加载此视图之前，我有 5 个视图控制器，它们只是带有滑动事件的文本和图片。这是加载新 ViewController（上图）并为其设置动画的代码：

```
- (IBAction)goToMainWorld:(id)sender {
    [self doVolumeFade];
    ViewController *mainWorld = [self.storyboard instantiateViewControllerWithIdentifier:@"mainWorld"];
    [self presentModalViewController:mainWorld withPushDirection:kCATransitionFromBottom];

} 
```

为了让事情更容易看到，我从我的故事板中添加了一个屏幕截图。在这里（我还不允许发布图片）：[在此处输入链接描述](http://imageshack.us/photo/my-images/163/skjermbilde20120903kl11.jpg/)

我还尝试修改 UIViewController+Transitions.m 以使用 navigationController Default

```
[self presentModalViewController:modalView animate:NO]; 
```

至：

```
[self.navigationController presentModalViewcontroller:modal view animate:NO]; 
```

但是如果我这样做，它会很好地加载第一个动画视图控制器，但如果这有意义的话，所有其他只是第一个被重新动画的视图控制器？

对不起，我的英语不好！

如果我需要提供更多代码，请告诉我！:-)..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:06:51.533

好的..我自己已经弄清楚了，似乎我为每个“视图”使用视图的技术并不是一个好主意..

我从未见过 UIScrollView 并认为值得一试，而且它似乎是我的解决方案。

MemoryVise 大致相同，但我现在得到了市场营销想要的转换等。

现在唯一的问题是让每个 ScrollView 页面的声音淡入和淡出，并控制底部第二个 UIScrollView 中的声音似乎让我有些头疼。

谢谢问候奥登

# javascript - javascript 正则表达式验证未按预期工作

> ID：12245459
> 
> 赞同：0
> 
> 时间：2012-09-03T09:45:58.240
> 
> 标签：javascript, regex

我已经在我的 js 文件的顶部声明了这个正则表达式 -

```
var regexName = /^[ A-Za-z]+$/ 
```

再往下，我有一个验证功能 - 它在页面提交时触发，但也在页面上某些文本框的 keyup 功能上触发。

```
$('#Name).keyup(function () { validateContactDetails(); }); 
```

这是我的功能：

```
function validateContactDetails() {

    var errorText = "";
    var valid = true;

    $("#ValidationHolder").text(errorText);

    var Name= $('#Name');

    Name.removeClass("input-validation-error");

        if ( isEmpty(Name.val()) || Name.val().length > 40  && !regexName.test(Name.val()) ) {

            Name.addClass("input-validation-error");

            errorText += "Name cannot  be empty or longer than 40 letters or contain numbers. ";

            valid = false;
        }

$("#ValidationHolder").html(errorText);

    return valid;
} 
```

然后我将这个 js 文件包含在我的 cshtml 页面中。但是，正则表达式验证目前不起作用 - 它让我在页面上的名称文本框中输入数字。有人看到我错过的简单的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:14:10.820

所以我正在检查 && 条件而不是 od || 条件是这里的问题以及缺少 ; 在我的正则表达式中

# javascript - Backbone + RequireJS + Mediator Pattern 导致 View Logic 短路和无限循环

> ID：12245468
> 
> 赞同：5
> 
> 时间：2012-09-03T09:46:39.627
> 
> 标签：javascript, design-patterns, backbone.js, requirejs, mediator

我目前正在使用[Backbone.Mediator](https://github.com/chalbert/Backbone-Mediator)在我的 Backbone + RequireJS 项目中利用 Mediator Pattern 的优势；但是，我遇到了 Pattern 的一个特殊行为，不确定它是否是“设计使然”，或者更确切地说，不是 Mediator Pattern 的标准行为，而是插件中的一个错误。

作为一个人为的例子：

**AMD 模块 1**

```
var View1 = Backbone.View.extend({
    ...
    events: {
        'click div: switchList'
    },
    switchList: function() {
        Backbone.Mediator.pub('list:switch');
    }
}); 
```

**AMD 模块 2**

```
var View2 = Backbone.View.extend({
    ...
    subscriptions: {
        'list:switch': 'shrinkDiv'
    },
    shrinkDiv: function() {
        Backbone.Mediator.pub('div:shrink');
        this.shrinkAndMore();
    }
});

return View2; 
```

**AMD 模块 3**

```
define(function(require) {
    var View2 = require(**AMD Module 2**);

    var View3 = Backbone.View.extend({
        ...
        subscriptions: {
            'div:shrink': 'createSiblingDiv'
        },
        createSiblingDiv: function() {
            this.siblingView = new View2();
            this.$el.after(this.siblingView.$el);
            this.siblingView.render();
        }
    });
}); 
```

我认为它会像这样工作：

```
 **View1**.switchList();
                      │
Channel 'list:switch' │
                      ↓
                      **View2**.shrinkDiv();
                      │
                      ├─┐
                      │ │ Channel 'div:shrink'
                      │ ↓
                      │ **View3**.createSiblingDiv();
                      │ │
                      │ └──→ "SiblingDiv created and rendered"
                      │
                      └────→ "View2 Div shrinked and more" 
```

然而，事实是因为**View2**`SiblingDiv`的另一个实例订阅了 Channel 'list:switch'，在它创建之后，它也会被仍然在 Channel 'list:switch' 上传递的事件信号触发（它只会在)的执行。**`SiblingDiv``**View2**.shrinkAndMore();`**

 **所以真正的代码流程是这样的：

```
 **View1**.switchList();
                      │
Channel 'list:switch' │
                      ↓
                      **View2**.shrinkDiv(); ←──────────────────┐
                      │                                         │
                      ├─┐                                       │
                      │ │ Channel 'div:shrink'                  │
                      │ ↓                                       │
                      │ **View3**.createSiblingDiv();           │
                      │ │                                       │
                      │ └──→ "SiblingDiv created and rendered" ─┘
                      │
                      └────→ "View2 Div shrinked and more" 
```

一个无限循环……哎呀！

通过对我的代码进行一些修改，我能够使事情按我的方式工作：

**AMD 模块 2 已修改**

```
var View2 = Backbone.View.extend({
    initialize: function() {                                 // new code
        if (this.options.subscriptions) {                    // new code
            this.subscriptions = this.options.subscriptions; // new code
        }                                                    // new code
    },                                                       // new code
    ...
    subscriptions: {
        'list:switch': 'shrinkDiv'
    },
    shrinkDiv: function() {
        Backbone.Mediator.pub('div:shrink');
        this.shrinkAndMore();
    }
});

return View2; 
```

**AMD 模块 3 改装**

```
define(function(require) {
    var View2 = require(**AMD Module 2**);

    var View3 = Backbone.View.extend({
        ...
        subscriptions: {
            'div:shrink': 'createSiblingDiv'
        },
        createSiblingDiv: function() {
            this.siblingView = new View2({        // new code
                subscriptions: {}                 // new code
            });                                   // new code
            this.$el.after(this.siblingView.$el);
            this.siblingView.render();
        }
    });
}); 
```

但是我很想了解无限循环行为（在事件信号广播***期间***创建的新对象也将由该信号触发）是否被认为是调解器模式方法中的“标准”？或者这只是插件部分的一个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T19:39:24.780

似乎这是插件中的一个错误。看看[这一行](https://github.com/chalbert/Backbone-Mediator/blob/master/backbone-mediator.js#L63)。它将遍历在此通道中注册的所有事件。问题是它在调用每个注册事件时停止，并且在每个循环步骤中检查注册事件数组的长度。所以发生的事情是：

1.  你触发了这个事件
2.  您注册的事件被称为
3.  创建一个新实例并将其自身注册到通道
4.  这会将数组的长度增加一
5.  所以它不会结束循环，而是调用刚刚创建的视图的监听器
6.  回到 3。

将行更改为：

```
for (var i = 0, l =  channels[channel].length; i < l; i++) { 
```

应该解决这个问题，因为您在开始时获得了数组的长度。添加新元素不会以无限循环结束。**

# android - 将图像从 Android（使用 Android 异步 Http 客户端）上传到 rails 服务器（使用回形针）

> ID：12245469
> 
> 赞同：12
> 
> 时间：2012-09-03T09:46:50.950
> 
> 标签：android, ruby-on-rails, paperclip

我正在尝试通过http post方法将图像文件从android设备上传到rails服务器。但是发布图像不起作用。更具体地说，post 参数（包括图像文件）似乎没有正确发送。

我正在使用 Android Asynchronous Http Client (http://loopj.com/android-async-http/) 从 android 发布图像，发布图像的代码是这样的。

```
public static void postImage(){
    RequestParams params = new RequestParams();
    params.put("picture[name]","MyPictureName");
    params.put("picture[image]",File(Environment.getExternalStorageDirectory().getPath() + "/Pictures/CameraApp/test.jpg"));
    AsyncHttpClient client = new AsyncHttpClient();
    client.post("http://x.x.x.x:3000/pictures/", params, new AsyncHttpResponseHandler() {
        @Override
        public void onSuccess(String response) {
            Log.w("async", "success!!!!");
        }                                                                                                                                                                     
    }); 
} 
```

至于rails回形针应用程序，我只是使用脚手架和生成的名为“图片”的模型，并在其上添加回形针附件。模型和控制器（接收请求）如下所示。

模型

```
class Picture < ActiveRecord::Base                                                                                                                                            
  attr_accessible :name, :image
  has_attached_file :image,
                    :styles => { :original => "480x480>", :thumbnail => "100x100>" },
                    :path => ':rails_root/public/system/pictures/image/:id_partition/:style_:filename'
end 
```

控制器

```
# POST /pictures                                                                                                                                                              
# POST /pictures.json
def create
  @picture = Picture.new(params[:picture])

  respond_to do |format|
    if @picture.save
      format.html { redirect_to @picture, notice: 'Picture was successfully created.' }
      format.json { render json: @picture, status: :created, location: @picture }
    else
      format.html { render action: "new" }
      format.json { render json: @picture.errors, status: :unprocessable_entity }
    end
  end
end 
```

收到请求时，“rails server”控制台会说如下内容

```
Started POST "/pictures/" for y.y.y.y at 2012-09-03 18:23:00 +0900
Processing by PicturesController#create as HTML
  Parameters: {"picture"=>{"name"=>"PictureName"}}
   (0.1ms)  begin transaction
  SQL (0.5ms)  INSERT INTO "pictures" ("album_id", "created_at", "image_content_type", "image_file_name", "image_file_size", "image_updated_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["album_id", nil], ["created_at", Mon, 03 Sep 2012 09:23:00 UTC +00:00], ["image_content_type", nil], ["image_file_name", nil], ["image_file_size", nil], ["image_updated_at", nil], ["name", "PictureName"], ["updated_at", Mon, 03 Sep 2012 09:23:00 UTC +00:00], ["user_id", nil]]
[paperclip] Saving attachments.
   (11.0ms)  commit transaction
Redirected to http://x.x.x.x:3000/pictures/10                                                                                                                               
Completed 302 Found in 15ms (ActiveRecord: 11.6ms) 
```

如您所见，仅发送了一个参数，并且未接收到原始图像数据“picture[image]”参数。谁能帮我？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-03T15:20:25.810

对不起，那是我的愚蠢错误。我应该做的

```
params.put("picture[image]", new File(Environment.getExternalStorageDirectory().getPath() + "/Pictures/CameraApp/test.jpg")); 
```

不是

```
params.put("picture[image]", File(Environment.getExternalStorageDirectory().getPath() + "/Pictures/CameraApp/test.jpg")); 
```

*应该使用新文件而不是文件*

在使用 Android Asynchronous Http Client ( [http://loopj.com/android-async-http/](http://loopj.com/android-async-http/) ) 时，我们不必关心 MultipartEntity。感谢所有回答我问题的人！！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:52:55.350

您可以通过 MultipartEntity 上传图像。

MultipartEntity，HttpMime 4.0 及更高版本的一部分。允许您将由边界字符串分隔并使用给定字符集编码的多个部分放入 httppost 请求中。

有关更多信息以及如何使用 Multipart，请参阅[this](https://stackoverflow.com/questions/2935946/sending-images-using-http-post) **和[this](https://stackoverflow.com/questions/2017414/post-multipart-request-with-android-sdk)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T10:44:08.657

在Android AsyncHttpClient官方页面（http://loopj.com/android-async-http/）中有如下描述

“无需额外的第三方库即可上传多部分文件”

在“使用 RequestParams 上传文件”部分，他们有一个示例代码来上传图像

```
File myFile = new File("/path/to/file.png");
RequestParams params = new RequestParams();
try {
    params.put("profile_picture", myFile);
} catch(FileNotFoundException e) {} 
```

这就是我所做的，虽然没有奏效。这有助于回答我的问题吗？

# javascript - JavaScript 的历史和修改的 HTML

> ID：12245470
> 
> 赞同：1
> 
> 时间：2012-09-03T09:46:53.970
> 
> 标签：javascript, html, browser-history

当页面被 JavaScript 修改时，我遇到了浏览器历史记录的一个小问题。

**如何重现**

1.  打开的页面包含可以删除的元素。然后我点击删除按钮，它使用 ajax 触发 JavaScript 和`jquery.remove()`
2.  然后我点击一些链接打开另一个页面
3.  在新页面上，我将点击浏览器的后退按钮
4.  我在带有已删除元素的页面上，该元素实际上不存在于数据库中。

解决办法是什么？清除浏览器历史记录？（我可以吗？）

## 解决方案

感谢 Endy 和来源，我提供了一些解决方案：

*   在 HTML 模板中创建一个 input[type=hidden] 并删除名称（无论如何）

*   创建可以使用唯一 ID 删除的元素

*   什么时候触发删除动作，添加唯一ID删除输入

    ***var 已删除 = $("input[name=deleted]"); 已删除.val(deleted.val()+id+";");***

*   在准备好文档时创建检查器，它会删除元素

**它是如何工作** 的 浏览器会自动记住添加到输入中的值，因此当从缓存中显示页面时，它具有该值并触发文档准备就绪

*代码：*

```
var deleted     = $("input[name=deleted]");
if (deleted.length > 0 && deleted.val() != "") {
    var deletedInput    = deleted.val();
    var deletedArray    = deletedInput.split(";");
    for (var i = 0; i < deletedArray.length;i++) {
        if (deletedArray[i] != "") {
            $("#photo"+deletedArray[i]).remove();
        }
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:55:34.680

您无法清除浏览器历史记录。您可以做的是始终在您删除内容的页面上强制执行 Javascript。

```
window.history.forward(); 
```

或者，更好的是，在返回时修改页面，使其与您的数据库同步。

# c++ - 增量优化（Visual C Express 2010）

> ID：12245473
> 
> 赞同：0
> 
> 时间：2012-09-03T09:47:07.047
> 
> 标签：c++, compiler-optimization, visual-c++-2010-express

在使用 Visual C++ Express 2010 处理 C++ 项目时，我发现了一个我想了解的有趣问题。问题是如果我在 Debug 或 Release 模式下编译，我的程序的结果会有所不同。我做了一个小程序来重现它：

```
#include <stdio.h>

int firstarg(int i)
{
    printf("First argument called with i = %d\n", i);

    return i;
}

int secondarg(int i)
{
    printf("Second argument called with i = %d\n", i);

    return i;
}

void function(int i, int j)
{
    printf("Function called with %d, %d\n", i,j);
}

int main(int argc, char* argv[])
{

    // Line with the problem!
    for (int i = 0; i < 5; ) function(firstarg(i), secondarg(i++)); 

    return 0;
}

// Result on RELEASE:
Second argument called with i = 0
First argument called with i = 0
Function called with 0, 0
Second argument called with i = 1
First argument called with i = 1
Function called with 1, 1
Second argument called with i = 2
First argument called with i = 2
Function called with 2, 2
Second argument called with i = 3
First argument called with i = 3
Function called with 3, 3
Second argument called with i = 4
First argument called with i = 4
Function called with 4, 4

// Result on DEBUG
Second argument called with i = 0
First argument called with i = 1
Function called with 1, 0
Second argument called with i = 1
First argument called with i = 2
Function called with 2, 1
Second argument called with i = 2
First argument called with i = 3
Function called with 3, 2
Second argument called with i = 3
First argument called with i = 4
Function called with 4, 3
Second argument called with i = 4
First argument called with i = 5
Function called with 5, 4 
```

如您所见，在这两种情况下，第二个参数都在第一个参数之前进行评估（如果参数是在某种 LIFO 堆栈中处理的，那是我所期望的）；但是在 release 中，变量 i 的增量被“优化掉”并延迟到循环的下一次迭代。这是出乎意料的，我真的很想了解发生了什么。

当然，我可以通过将循环更改为轻松“修复”我的代码

```
 for (int i = 0; i < 5; ++i) function(firstarg(i+1), secondarg(i)); 
```

无论编译参数如何，它都会给出相同的结果。但是，我仍然很想了解这种增量优化背后的原因。

PS。顺便说一句，我无法在 linux 下使用 gcc 重现此问题（使用 -O0 标志进行调试，使用 -O3 进行发布）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:51:12.950

你误解了结果。增量不会“优化掉”或延迟到循环的下一次迭代。`i`在下一次迭代之前，您无法查看 的值是多少。试试这个：

```
for (int i = 0; i < 5; )
{
   function(firstarg(i), secondarg(i++)); 
   printf("At end of iteration, i = %d\n");
} 
```

你会发现它根本没有延迟。

您的代码是 UB，因为您可以访问变量并修改同一变量，而无需插入序列点。虽然你可能会得到非常疯狂的结果，但实际上你会得到两个“预期”的结果，这取决于你的优化。未指定评估函数参数的顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T09:51:48.143

您的程序修改和读取变量`i`两次，没有中间的序列点（在函数调用表达式中`function`），这只是**未定义的行为**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:51:23.883

我认为您存在导致未定义行为的序列点问题：

*   这是一个类似的问题：[为什么这些构造（使用 ++）是未定义的行为？](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)

*   这个答案非常好：[为什么这些构造（使用 ++）是未定义的行为？](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc/4177063#4177063)

*   [http://en.wikipedia.org/wiki/Sequence_point](http://en.wikipedia.org/wiki/Sequence_point)

无论如何，解决方案是不要编写这种代码。

# javascript - 媒体查询与 Javascript 相结合？

> ID：12245474
> 
> 赞同：0
> 
> 时间：2012-09-03T09:47:08.583
> 
> 标签：javascript, jquery, media-queries

当用户向下滚动页面时，我有一个位于窗口顶部的粘性侧边栏。

它在桌面尺寸下工作正常，但是当将屏幕尺寸调整为平板电脑尺寸（@media only screen and (min-width: 768px) and (max-width: 959px) ）时，它不再粘住......

我是否必须将媒体查询添加到我的 Javascript 中？

[您可以在http://v3.edharrisondesign.com/project/](http://v3.edharrisondesign.com/project/)上查看该项目

```
 $('#sticky').scrollToFixed({
        marginTop: 20,
        limit: function() {
            var limit = $('#foot').offset().top - $('#sticky').outerHeight(true) - 100;
            return limit;
        },
        minWidth: 1000,
        zIndex: 999,
        fixed: function() {  },
    });

    $('#sticky').bind('unfixed', function() {
        console.log('sticky preUnfixed');
    });
    $('#sticky').bind('unfixed', function() {
        console.log('sticky unfixed');
        $(this).css('color', '');
    });
    $('#sticky').bind('fixed', function() {
        console.log('sticky fixed');
        $(this).css('opacity', '1');
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:28:30.083

您已在#sticky 上将 minWidth 属性设置为 1000。这意味着窗口宽度必须至少为 1000px 宽；否则，它将自行关闭。删除它，或者让它足够小以适合所需的尺寸，它应该可以工作。

换句话说，使它成为：

```
$('#sticky').scrollToFixed({
    marginTop: 20,
    limit: function() {
        var limit = $('#foot').offset().top - $('#sticky').outerHeight(true) - 100;
        return limit;
    },
    minWidth: 768,
    zIndex: 999,
    fixed: function() {  },
}); 
```

# testing - 如何在 Jmeter 中找到准确的“总测试持续时间”？

> ID：12245475
> 
> 赞同：3
> 
> 时间：2012-09-03T09:47:15.963
> 
> 标签：testing, jmeter, performance-testing

我想知道是否有一个 JMeter 监听器可以显示测试运行的总时间。

尽管[此](http://code.google.com/p/jmeter-plugins/)插件沿 x 轴显示经过的时间/总持续时间，但它以秒为单位给出了这个值，但我想要以毫秒为单位的值。

请告诉我如何以毫秒为单位获得测试的总持续时间/经过的时间？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T11:00:40.520

该问题的简短回答（已根据评论澄清）是否定的，AFAIK 没有侦听器可以在屏幕上显示测试运行的总时间（以毫秒为单位）。

但是，如果您想要这个值，您只需从结果文件中的最后一个时间戳中减去第一个时间戳。这将或多或少地给出测试运行的总毫秒数。我说或多或少是因为起点和终点是主观的，有些人可能会说起点是第一个请求，其他人会说是启动 JMeter 的时间 - 这些可能是不同的时间。

如果您确实必须在 GUI 中拥有值，那么您可以使用设置和拆卸线程组以及简单的 beanshell 计算来计算时间。同样，这需要解释，因为设置 TG 将在测试开始*之前触发。*之前不多，但可以肯定的是几毫秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T11:14:53.460

请注意，从 Apache JMeter 的下一个版本（> 2.7）开始，将有一个名为 Response Time Graph 侦听器的新侦听器，它将为您提供所需的内容。

此版本现在可作为夜间版本使用：

*   [http://jmeter.apache.org/nightly.html](http://jmeter.apache.org/nightly.html)

# jquery - 完整日历：在点击日期，我想通过更改背景来突出显示所选日期的整周

> ID：12245477
> 
> 赞同：0
> 
> 时间：2012-09-03T09:47:37.447
> 
> 标签：jquery, fullcalendar

我想要的是每当我在月视图中单击日期时，它应该通过更改其背景突出显示整个星期（例如在左角显示的谷歌小视图日历中）。

![在此处输入图像描述](../Images/ca4e797fd203ce494c5700535387492f.png)

例如：如果我点击日期 3（九月），它会将整个星期的背景颜色从日期 2 更改为 8（整行），当我点击下周/上一周的任何日期时，它会改变输入日期的星期的背景颜色。

如何通过更改背景颜色在月视图中选择整周 - [http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:49:40.360

您可以使用`dayClick`回调来执行此操作。检查这个小提琴：http: [//jsfiddle.net/100thGear/sStbC/](http://jsfiddle.net/100thGear/sStbC/)

让我知道这是否有帮助！

# java - 蓝牙安卓错误

> ID：12245481
> 
> 赞同：2
> 
> 时间：2012-09-03T09:48:00.643
> 
> 标签：java, android, bluetooth

我写了一个java文件，我在行出现错误：“blutooth_enabled_flag= mBluetoothAdapter.isEnabled();”

我没有找到问题......当我运行这个应用程序时，我得到“不幸的是应用程序已停止”

请帮我找出问题

```
package com.example.fast.battery.charger;

import android.net.wifi.WifiManager;
import android.os.Bundle;
import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.content.Context;
import android.view.View.OnClickListener;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.SeekBar;

public class Fast_Charger extends Activity implements OnClickListener {

    Button Onbutton,Offbutton,prefbutton;
    BluetoothAdapter mBluetoothAdapter;
    WifiManager wifi;
    SeekBar brightbar;
    int bluetooth_state;
    Boolean wifi_enable_flag;
    Boolean blutooth_enabled_flag;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_fast__charger);
        Onbutton= (Button)findViewById(R.id.Onbutton);
        Offbutton= (Button)findViewById(R.id.Offbutton);
        prefbutton = (Button)findViewById(R.id.prefbutton);
        mBluetoothAdapter=BluetoothAdapter.getDefaultAdapter();
        wifi=(WifiManager)getSystemService(Context.WIFI_SERVICE); 
        blutooth_enabled_flag= mBluetoothAdapter.isEnabled();

      //  wifi_enable_flag=wifi.isWifiEnabled();
     //   Onbutton.setOnClickListener(this);
     //   Offbutton.setOnClickListener(this);
     //   prefbutton.setOnClickListener(this);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_fast__charger, menu);
        return true;
    }

    public void onClick(View src) {
    //  switch (src.getId()) {
    //  case R.id.Onbutton:
    //      mBluetoothAdapter.disable(); 
    //      wifi.setWifiEnabled(Boolean.TRUE);
    //      break;
    //  case R.id.Offbutton:
    //      if (bluetooth_state==BluetoothAdapter.STATE_ON) {
    //          mBluetoothAdapter.enable();
    //      }
    //      if(wifi_enable_flag==Boolean.TRUE) {
    //          wifi.setWifiEnabled(Boolean.FALSE);
    //      }
    //      break;
    //  case R.id.Brightbar:
    //      break;
    //  case R.id.prefbutton:
    //      break;
        }

    } 
```

这是清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.fast.charger"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk

        android:minSdkVersion="10"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Fast_Charger"
            android:label="@string/title_activity_fast__charger" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
        <uses-permission android:name="android.permission.BLUETOOTH"></uses-permission>
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN"></uses-permission>
<uses-permission android:name="com.example.bluetooth.PERMISSION"></uses-permission>
<uses-feature android:name="android.hardware.wifi" />
</manifest> 
```

这是logcat：

```
09-03 10:07:07.701: I/dalvikvm(537): threadid=3: reacting to signal 3
09-03 10:07:07.721: I/dalvikvm(537): Wrote stack traces to '/data/anr/traces.txt'
09-03 10:07:08.221: I/dalvikvm(537): threadid=3: reacting to signal 3
09-03 10:07:08.261: I/dalvikvm(537): Wrote stack traces to '/data/anr/traces.txt'
09-03 10:07:08.442: D/AndroidRuntime(537): Shutting down VM
09-03 10:07:08.442: W/dalvikvm(537): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
09-03 10:07:08.451: E/AndroidRuntime(537): FATAL EXCEPTION: main
09-03 10:07:08.451: E/AndroidRuntime(537): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.fast.charger/com.example.fast.charger.Fast_Charger}: java.lang.NullPointerException
09-03 10:07:08.451: E/AndroidRuntime(537):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
09-03 10:07:08.451: E/AndroidRuntime(537):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-03 10:07:08.451: E/AndroidRuntime(537):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-03 10:07:08.451: E/AndroidRuntime(537):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-03 10:07:08.451: E/AndroidRuntime(537):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-03 10:07:08.451: E/AndroidRuntime(537):  at android.os.Looper.loop(Looper.java:137)
09-03 10:07:08.451: E/AndroidRuntime(537):  at android.app.ActivityThread.main(ActivityThread.java:4424)
09-03 10:07:08.451: E/AndroidRuntime(537):  at java.lang.reflect.Method.invokeNative(Native Method)
09-03 10:07:08.451: E/AndroidRuntime(537):  at java.lang.reflect.Method.invoke(Method.java:511)
09-03 10:07:08.451: E/AndroidRuntime(537):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-03 10:07:08.451: E/AndroidRuntime(537):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-03 10:07:08.451: E/AndroidRuntime(537):  at dalvik.system.NativeStart.main(Native Method)
09-03 10:07:08.451: E/AndroidRuntime(537): Caused by: java.lang.NullPointerException
09-03 10:07:08.451: E/AndroidRuntime(537):  at com.example.fast.charger.Fast_Charger.onCreate(Fast_Charger.java:33)
09-03 10:07:08.451: E/AndroidRuntime(537):  at android.app.Activity.performCreate(Activity.java:4465)
09-03 10:07:08.451: E/AndroidRuntime(537):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-03 10:07:08.451: E/AndroidRuntime(537):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-03 10:07:08.451: E/AndroidRuntime(537):  ... 11 more
09-03 10:07:08.731: I/dalvikvm(537): threadid=3: reacting to signal 3
09-03 10:07:08.821: I/dalvikvm(537): Wrote stack traces to '/data/anr/traces.txt'
09-03 10:07:09.102: I/dalvikvm(537): threadid=3: reacting to signal 3
09-03 10:07:09.111: I/dalvikvm(537): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:57:19.083

我认为您正在尝试在模拟器中运行您的应用程序，因为模拟器不支持蓝牙

```
 mBluetoothAdapter=BluetoothAdapter.getDefaultAdapter(); 
```

mBluetoothAdapter 出来是*null*。在您启用蓝牙的机器人上运行此应用程序，我认为它会正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:17:36.537

“引起：com.example.fast.charger.Fast_Charger.onCreate(Fast_Charger.java:33) 处的 java.lang.NullPointerException”

第 33 行是“blutooth_enabled_flag= mBluetoothAdapter.isEnabled();”。在此处获取 NPE 的唯一方法是在 mBluetoothAdapter 中设置为 null。检查这个

# javascript - Javascript函数在调用时运行两次

> ID：12245488
> 
> 赞同：0
> 
> 时间：2012-09-03T09:48:17.090
> 
> 标签：javascript, function, call

因此，我正在使用 contenteditable 开发富文本编辑器。我有一个名为“dveditor”的功能。我愿意`var editor = new dveditor()`；传入一些设置，它会用东西替换 div 的内容。

但它运行两次。如果我删除`editor = new editor();`它根本不会运行。但是如果我调用它一次，它就会运行两次。我只用警报替换了函数中的代码，同样的事情发生了。所以这个函数没有调用自己。

有什么想法可能是错的吗？我有点不知所措。至少当我知道我只调用一次时。我的意思是，如果我删除对它的调用，它就会完全停止。

提前致谢。

# sql - 如何在执行查询时比较 2 个字符串

> ID：12245489
> 
> 赞同：1
> 
> 时间：2012-09-03T09:48:30.163
> 
> 标签：sql

```
declare @pid int
declare @mid int
declare @tableName varchar(10)
declare @query nvarchar(1000)
declare @subquery nvarchar(300)

set @pid = 1
set @mid = 2
set @query = 'Select * from '+@tableName+' where'

if(@pid is not null)
begin
set @query = @query+' pid ='+@pid+' and'
end

if(@mid is not null)
begin
set @query = @query+' mid ='+@mid+' and'
end 
```

如果@pid 和@mid 不为空，则添加到查询中。如果@pid 和@mid 为空，我想从查询中删除'where'。'and' 也一样，如果两者都被选中。

```
set @subquery = select right('''+@query+''',5)
if(@subquery = 'where')
begin
print @query
-- execute sp_executesql @query
end 
```

但无法在 if 子句中比较这些。我需要执行@subquery。如果是，如何取该值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:52:07.597

> 如果@pid 和@mid 不为空，则添加到查询中。
> 
> 如果@pid 和@mid 为空，我想从查询中删除'where'。都被选中。

我想你正在寻找这样的东西：

```
WHERE 1 = 1
  AND (@mid IS NULL OR mid = @mid )
  AND (@pid IS NULL OR pid = @pid) 
```

如果`@pid`and `@mid`are not `NULL`s，前一个`WHERE`将是：

```
WHERE 1 = 1
  AND mid = @mid 
  AND pid = @pid 
```

因此它们被添加到查询中。

如果`@pid`and`@mid`是`NULL`s，则`WHERE`子句将变为：

```
WHERE 1 = 1 
```

因此，它就像它不存在一样。

**请注意**，我使用`WHERE 1 = 1`了两个`@pid`and`@mid`都是`NULL`s 的情况，查询会继续工作并且不会中断。

# soap - 是否可以从 XSD 文件生成 SOAP 消息？

> ID：12245490
> 
> 赞同：0
> 
> 时间：2012-09-03T09:48:31.590
> 
> 标签：soap, xsd

是否可以从 XSD 文件以编程方式生成 SOAP 消息，如果可以，该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:55:33.807

出于某种原因，这落空了……下面是一种可能的方法。

该设置由两个主要组件组成：

*   基于 XSD 获取 XML 文档
*   生成 SOAP 信封和您可能希望添加的任何其他 SOAP 标头。

根据更具体的要求，XML 的创建可能会有所不同；[它的范围可以从创建此MSDN 文章](http://msdn.microsoft.com/en-us/library/aa302296.aspx)中描述的示例到 Excel 电子表格、数据库等。

要创建 SOAP 信封，您只需要[System.ServiceModel.Channels.Message.CreateMessage](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.message.createmessage.aspx)方法之一。

# .net - 会话被销毁并放弃，但性能监视器仍显示会话计数

> ID：12245491
> 
> 赞同：1
> 
> 时间：2012-09-03T09:48:39.390
> 
> 标签：.net, session, asp.net-4.0, monitor

情况就是这样。我使用了性能监视器，为**ASP.Net Apps v4.xx.xx添加了****会话活动**计数器我有一个使用无 cookie 会话的基于 Web 的应用程序。

 **我用网络浏览器打开了应用程序。性能监视器中的会话计数显示 1。我打开了另一个，计数增加。当我关闭一个时，计数在会话超时之前不会下降（我相信，因为在超时值之后计数会减少）。

我尝试登录 2 次，然后注销。注销后会话计数没有下降。

谁能解释为什么会发生这种情况，以及是否有一个好的（且值得信赖的）工具可以用来监控会话的活动或被破坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:46:49.533

会话与身份验证无关。注销会使您的 cookie 无效，但您的会话将持续到会话超时。如果您想在注销时放弃会话，则需要添加自己的代码来调用`Session.Abandon();`**

# wpf - 以编程方式将 DataTemplate 插入另一个 DataTemplate

> ID：12245506
> 
> 赞同：0
> 
> 时间：2012-09-03T09:49:57.870
> 
> 标签：wpf, datatemplate

我想创建一个可自定义的 ListBox，从某种意义上说，我想在运行时选择，显示绑定集合中的哪些项目。就像是：

```
<CustomizedListBox Format="[Name][Age]"/> 
```

我有一个 ItemTemplateSelector，它可以在 For 循环中很好地生成内容。但现在的故事是，我想在 XAML 中为列表的不同部分预定义 DataTemplate，然后在 ItemTemplateSelector 中组合它们。所以我的目标是有这些定义：

```
<DataTemplate x:Key="Name">
    <TextBlock Text="{Binding Name, StringFormat='Name: {0}'}"/>
</DataTemplate>
<DataTemplate x:Key="Age">
    <TextBlock Text="{Binding Age}" HorizontalAlignment="Right"/>
</DataTemplate> 
```

然后以编程方式组合它们。

我的问题是在 XAML 中生成的数据模板的 VisualTree 是 Null - 显然，WPF“使用不同的机制”。而且我不能使用 LoadContent - 因为我还不想实例化模板。

我想要的有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:48:41.147

解决方案在这里：[http ://social.msdn.microsoft.com/Forums/en-US/wpf/thread/fc3104b6-c1b0-4ab0-a48f-adefdaeb0f57](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/fc3104b6-c1b0-4ab0-a48f-adefdaeb0f57)

# c# - 加载后如何使用 POCO 和 DbContext 初始化实体框架中的对象？

> ID：12245516
> 
> 赞同：2
> 
> 时间：2012-09-03T09:50:53.897
> 
> 标签：c#, entity-framework, poco, dbcontext, entity-framework-5

我正在使用 EF5。我想初始化 DbContext 中包含的 DbSet 集合的每个对象，最好（但不一定）在初始化对象字段（但不一定与其他 POCO 的关系）之后。这可以简称为“施工后拦截”或“加载后拦截”。

初始化需要使用与 DbContext 实例（当前用户设置等）并行存在的对象实例来设置对象的一些属性。

所以基本上：

```
var settings = new Settings();
settings.PrintName = false;

var context = new MyDbContext();
// here initialize context so that every User object get initialized with settings
var john = context.Users.Where(x => x.Name == "John").FirstOrDefault();
Assert.AreEqual(john.Settings, settings); 
```

除了遍历集合中的所有对象并手动设置属性之外，还有什么可能的方法来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T10:12:43.357

您可以使用`ObjectMaterialized`公开的事件`ObjectContext`：

```
var settings = new Settings();
settings.PrintName = false;

var dbContext = new MyDbContext();
var objectContext = ((IObjectContextAdapter)dbContext).ObjectContext;
objectContext.ObjectMaterialized += (sender, e) => {
    var user = e.Entity as User;
    if (e != null) {
       // Now you can call your initialization logic
       user.Settings = settings;
    }
};

var john = dbContext.Users.Where(x => x.Name == "John").FirstOrDefault();
Assert.AreEqual(john.Settings, settings); 
```

`ObjectMaterialized`应该在从数据库记录填充公共（标量和复杂）属性之后但在填充导航属性之前引发事件。

# vba - 使用VB宏将数据从word表复制到excel表时如何保留源格式？

> ID：12245525
> 
> 赞同：2
> 
> 时间：2012-09-03T09:51:18.740
> 
> 标签：vba, excel, ms-word

我正在尝试使用 VB 宏将一些数据从单词表复制到 Excel 工作表。

它可以根据需要完美地复制文本。

现在我想保留 word doc 中存在的源格式。

我想保留的东西是

1.  击穿
2.  颜色
3.  子弹
4.  换行符

我正在使用以下代码复制 -

`objTemplateSheetExcelSheet.Cells(1, 2) = WorksheetFunction.Clean(.cell(iRow, iCol).Range.Text)`

## 请让我知道如何编辑它以保留源格式。

我使用的逻辑如下 -

```
wdFileName = Application.GetOpenFilename("Word files (*.*),*.*", , _
"Browse for file containing table to be imported") '(Browsing for a file)

If wdFileName = False Then Exit Sub '(user cancelled import file browser)

Set wdDoc = GetObject(wdFileName) '(open Word file)

With wdDoc
    'enter code here`
    TableNo = wdDoc.tables.Count '(Counting no of tables in the document)
    If TableNo = 0 Then
        MsgBox "This document contains no tables", _
        vbExclamation, "Import Word Table"
    End If
End With 
```

我正在对 word 文件进行表格计数。然后对于 word doc 中存在的所有表，使用上述代码访问表的每一行和每一列。

好的，我也附上剩余的代码

```
'Creating TemplateSheet object
Set objTemplateSheetExcelApp = CreateObject("Excel.Application")
'Opening the template to be used
objTemplateSheetExcelApp.Workbooks.Open ("C:\Temp\Documents Page XX_US-VC Combo Template.xlsx")
Set objTemplateSheetExcelWkBk = objTemplateSheetExcelApp.ActiveWorkbook.Worksheets(5)
Set objTemplateSheetExcelSheet = objTemplateSheetExcelApp.ActiveWorkbook.Worksheets(5) '(Selecting the desired tab)

tblcount = 1
For tblcount = 1 To TableNo
    With .tables(tblcount)
    'copy cell contents from Word table cells to Excel cells
    For iRow = 1 To .Rows.Count
        For iCol = 1 To .Columns.Count
            On Error Resume Next
            strEach = WorksheetFunction.Clean(.cell(iRow, iCol).Range.Text)
            For arrycnt = 0 To 15
                YNdoc = InStr(strEach, myArray(arrycnt))
                    If (YNdoc > 0) Then
                        objTemplateSheetExcelSheet.Cells(2, yourArray(arrycnt)) = _
                        WorksheetFunction.Clean(.cell(iRow, iCol + 1).Range.Text)
                            If arrycnt = 3 Or arrycnt = 6 Then
                                objTemplateSheetExcelSheet.Cells(2, yourArray(arrycnt) + 1) = _
                                WorksheetFunction.Clean(.cell(iRow + 1, iCol + 1).Range.Text)
                            End If
                    End If
            Next arrycnt
        Next iCol
    Next iRow
    End With
    Next tblcount
End With
intRow = 1

'To save the file
strFileName = "Newfile.xlsx"
objTemplateSheetExcelWkBk.SaveAs strFld & "\" & strFileName

objTemplateSheetExcelApp.Quit

Set objTemplateSheetExcelApp = Nothing
Set objTemplateSheetExcelWkBk = Nothing
Set objTemplateSheetExcelSheet = Nothing

Set wdDoc = Nothing 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T12:54:21.543

要与 Excel 中的 Word 交互，您可以选择早期绑定或后期绑定。我正在使用后期绑定，您不需要添加任何引用。

我将分 5 部分介绍代码

1.  与 Word 实例绑定
2.  打开 Word 文档
3.  与单词表交互
4.  声明你的 Excel 对象
5.  将单词表复制到 Excel

* * *

A. 与 Word 实例绑定

* * *

声明您的 Word 对象，然后与现有的 Word 实例绑定或创建一个新实例。例如

```
Sub Sample()
    Dim oWordApp As Object, oWordDoc As Object

    '~~> Establish an Word application object
    On Error Resume Next
    Set oWordApp = GetObject(, "Word.Application")

    If Err.Number <> 0 Then
        Set oWordApp = CreateObject("Word.Application")
    End If
    Err.Clear
    On Error GoTo 0

    oWordApp.Visible = True
End Sub 
```

* * *

B. 打开 Word 文档

* * *

连接/创建 Word 实例后，只需打开 word 文件。请参阅此示例

```
Sub Sample()
    Dim oWordApp As Object, oWordDoc As Object
    Dim FlName As String

    FlName = Application.GetOpenFilename("Word files (*.Doc*),*.Doc*", , _
             "Browse for file containing table to be imported")

    '~~> Establish an Word application object
    On Error Resume Next
    Set oWordApp = GetObject(, "Word.Application")

    If Err.Number <> 0 Then
        Set oWordApp = CreateObject("Word.Application")
    End If
    Err.Clear
    On Error GoTo 0

    oWordApp.Visible = True

    '~~> Open the Word document
    Set oWordDoc = oWordApp.Documents.Open(FlName)
End Sub 
```

* * *

C. 与词表交互

* * *

现在您已经打开了文档，让我们连接到 word 文档的 Table1。

```
Sub Sample()
    Dim oWordApp As Object, oWordDoc As Object
    Dim FlName As String
    Dim tbl As Object

    FlName = Application.GetOpenFilename("Word files (*.Doc*),*.Doc*", , _
             "Browse for file containing table to be imported")

    '~~> Establish an Word application object
    On Error Resume Next
    Set oWordApp = GetObject(, "Word.Application")

    If Err.Number <> 0 Then
        Set oWordApp = CreateObject("Word.Application")
    End If
    Err.Clear
    On Error GoTo 0

    oWordApp.Visible = True

    Set oWordDoc = oWordApp.Documents.Open(FlName)

    Set tbl = oWordDoc.Tables(1)
End Sub 
```

* * *

D. 声明你的 Excel 对象

* * *

现在我们有了 Word Table 的句柄。在我们复制它之前，让我们设置我们的 Excel 对象。

```
Sub Sample()
    Dim oWordApp As Object, oWordDoc As Object
    Dim FlName As String
    Dim tbl As Object

    FlName = Application.GetOpenFilename("Word files (*.Doc*),*.Doc*", , _
             "Browse for file containing table to be imported")

    '~~> Establish an Word application object
    On Error Resume Next
    Set oWordApp = GetObject(, "Word.Application")

    If Err.Number <> 0 Then
        Set oWordApp = CreateObject("Word.Application")
    End If
    Err.Clear
    On Error GoTo 0

    oWordApp.Visible = True

    Set oWordDoc = oWordApp.Documents.Open(FlName)

    Set tbl = oWordDoc.Tables(1)

    '~~> Excel Objects
    Dim wb As Workbook, ws As Worksheet

    Set wb = Workbooks.Open("C:\Temp\Documents Page XX_US-VC Combo Template.xlsx")

    Set ws = wb.Sheets(5)
End Sub 
```

* * *

E. 将单词表复制到Excel

* * *

最后，当我们设置好目标后，只需将表格从 word 复制到 Excel。看到这个。

```
Sub Sample()
    Dim oWordApp As Object, oWordDoc As Object
    Dim FlName As String
    Dim tbl As Object

    FlName = Application.GetOpenFilename("Word files (*.Doc*),*.Doc*", , _
             "Browse for file containing table to be imported")

    '~~> Establish an Word application object
    On Error Resume Next
    Set oWordApp = GetObject(, "Word.Application")

    If Err.Number <> 0 Then
        Set oWordApp = CreateObject("Word.Application")
    End If
    Err.Clear
    On Error GoTo 0

    oWordApp.Visible = True

    Set oWordDoc = oWordApp.Documents.Open(FlName)

    Set tbl = oWordDoc.Tables(1)

    '~~> Excel Objects
    Dim wb As Workbook, ws As Worksheet

    Set wb = Workbooks.Open("C:\Temp\Documents Page XX_US-VC Combo Template.xlsx")

    Set ws = wb.Sheets(1)

    tbl.Range.Copy

    ws.Range("A1").Activate

    ws.Paste
End Sub 
```

**截屏**

***Word 文档***

![在此处输入图像描述](../Images/a0dfaa5a271138587940211608ebfe40.png)

***Excel（粘贴后）***

![在此处输入图像描述](../Images/cb2f17a8b0b9e0a216ac4af63b49dc91.png)

希望这可以帮助。

# c++ - 在内存 OpenCV 2 上写入视频

> ID：12245527
> 
> 赞同：1
> 
> 时间：2012-09-03T09:51:26.580
> 
> 标签：c++, opencv

我们目前正在为需要 OpenCV 的程序开发一些功能。摆在桌面上的一个想法是使用“缓冲区”，它将一分钟的视频数据保存到内存中，然后我们需要为每个事件触发从该缓冲区中提取一个 13 秒的视频文件。

目前我们对 OpenCV 没有足够的经验，所以我们不知道这是否可能。查看文档，唯一允许写入内存的函数是 imencode 和 imdecode，但这些是图像。如果我们能找到一种将图像序列写入视频文件的方法，那将是整洁的，但现在我们的想法是使用视频缓冲区。

我们还使用 OpenCV 版本 2 规范。

TL;DR 我们想知道是否可以将视频的一部分写入内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:08:51.740

在 OpenCV 中，每个视频都被视为帧（图像）的集合。根据相机的 FPS，您可以定期捕获帧并用它们填充缓冲区。同时，您可以销毁最旧的帧（在 1 分钟前拍摄）。所以可以实现一个FIFO数据结构来实现你的目标。获取 13 秒的样本很容易，只需跳转到随机帧并将 13*FPS 帧顺序写入视频文件即可。

但是会存在一些同步和计时问题 AFAIK 并且就我使用 OpenCV 而言。

[这](http://opencv.willowgarage.com/documentation/cpp/reading_and_writing_images_and_video.html)是有关视​​频 i/o 的 OpenCV 文档的链接。尤其是最后一段代码是您将用于编写的代码。

TL;DR：没有视频，有连续图像，差别不大。所以你需要这样对待他们。

# eventbrite - 用于从所选联系人列表中同步联系人的联系人列表 API？

> ID：12245545
> 
> 赞同：0
> 
> 时间：2012-09-03T09:52:21.217
> 
> 标签：eventbrite

我们需要联系人列表 API 用于将 EventBrite 中的联系人同步到我们的应用程序。在 API 文档中，此联系人列表 API 不包括在内，mailChimp 这种类型的集成存在，即..从配置的 EventBrite 帐户导入联系人以在 MailChimp 中列出这种类型的集成是一个很棒的集成 .API 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:40:16.923

These notes might be useful: [https://gist.github.com/6a66d93a54a69d4e3f50](https://gist.github.com/6a66d93a54a69d4e3f50)

# javascript - li点击时如何用,（逗号）附加输入值？

> ID：12245547
> 
> 赞同：0
> 
> 时间：2012-09-03T09:52:29.300
> 
> 标签：javascript, jquery

我有如下 HTML，

```
<ul class="holder" style="width: 512px;">
    <li id="pt_5uZqW99dmlgmiuCTJiPHDC9T9o2sfz0I"
    rel="test1@gmail.com"
    class="bit-box">test1@gmail.com<a href="#" class="closebutton"></a>
    </li>
    <li id="pt_9O0pMJDhtNbRgU1vNM8He8Vh9zpJ1tcE" 
    rel="test2@gmail.com"
    class="bit-box">test2@gmail.com<a href="#" 
    class="closebutton"></a>
    </li>
    <li id="pt_U8JH5E9y5w4atm4CadEPvuu3wdh3WcBx" 
    rel="test3@gmail.com" 
    class="bit-box">test3@gmail.com<a href="#"
    class="closebutton"></a></li>
    <li id="Project_update_user_id_annoninput" 
     class="bit-input">
     <input type="text" autocomplete="off" size="0" class="maininput"></li>
    </ul>

<input id="removeuser" value="" /> 
```

当我单击 li 时，我需要将 li 的值存储在隐藏的输入框中。如果我单击前两个 li，我需要存储值，例如，

```
<input id="removeuser" value="test1@gmail.com,test2@gmail.com" /> 
```

那就是我每次单击 li 时都需要附加输入值。

我用过以下一个，

```
jQuery(document).ready(function(){                

       jQuery("a.closebutton").click(function(){

          jQuery("input#removeuser").val(jQuery.map(jQuery(this).parent().attr('rel')).join(","));

        });

    }); 
```

但它不起作用。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:08:48.943

[http://jsfiddle.net/ySV6F/](http://jsfiddle.net/ySV6F/)

```
jQuery(document).ready(function(){                
   jQuery("a.closebutton").click(function(){
      jQuery("input#removeuser").val(jQuery("input#removeuser").val() + "," + jQuery(this).parent().attr('rel'));
      $(this).remove();
       return false;
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:08:26.947

这个小提琴解决了你的问题：http: [//jsfiddle.net/pratik136/zVmwg/](http://jsfiddle.net/pratik136/zVmwg/)

我所做的第一个更改是在`<a />`标签内移动您的文本。这使您可以按预期单击它们。

接下来，我将其更改`JS`为：

```
jQuery(document).ready(function() {
    jQuery("a.closebutton").click(function(a) {
        var v = jQuery(this).parent().attr('rel');
        var t = jQuery("input#removeuser").val();
        if (t.indexOf(v) < 0) {
            if(t.length>0){
                t += ",";
            }
            jQuery("input#removeuser").val(t + v);
        }
    });
});​ 
```

我添加了附加检查以确保没有输入重复项，并且仅在必要时才附加逗号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T10:12:17.007

尝试：

```
var arr = [];
$(".closebutton").click(function(e) {
    e.preventDefault();
    var email = $(this).parent("li").attr("rel");
    if( $(this).hasClass("added") ) {
        arr= $.grep(arr, function(value) {
            return value != email;
       });
        $(this).removeClass("added");
    }
    else {
        arr.push( email );
        $(this).addClass("added");
    }
    $("input[id='removeuser']").val( arr.join(",") );
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T10:11:03.510

首先，我建议不要使用`rel`属性（在 (X)HTML 中带有特定标签的特定含义），而是使用 html 安全`data-*`属性

像这样：

```
<li id="pt_5uZqW99dmlgmiuCTJiPHDC9T9o2sfz0I" data-email="mdineshkumarcs@gmail.com" 
class="bit-box">mdineshkumarcs@gmail.com<a href="#" class="closebutton"></a></li> 
```

要访问此属性，只需使用 jQuery`$(elem).attr('data-email')`

现在没有重复的解决方案：

```
jQuery(document).ready(function(){
    jQuery("a.closebutton").click(function(){
        var value = $(this).parent().attr('data-email');
        var values = $("input#removeuser").val().split(',');
        var is_in = false;
        // already in?
        $.each(values, function(i, e){
            if(e == value) {
                is_in = true; return false; // set and exit each
            }
        });
        if (!is_in) {
            values.push(value);
            $("input#removeuser").val(values.join(','));
        }

        return false;
    });
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T10:21:02.673

我已将工作代码放在[jsFiddle](http://jsfiddle.net/dpqa2/)上，以便您可以看到它的运行情况。

```
jQuery(document).ready(function(){                

jQuery("a.closebutton").bind('click', function(){
    var data = $(this).parent().attr('rel');
    if($("#removeuser").val() == ""){        
        $("#removeuser").val(data);
    } else {
        $("#removeuser").val(", "+data);
    }
    $(this).parent().hide();
});

});​ 
```

在这里，我将删除`li`一次单击。您可能相信使用该`.toggle()`功能也可以使用户从中删除值`#removeuser`。希望这可以帮助！

# asp.net-mvc - MVC 和 EF 解决方案结构 - 您应该使用存储库模式、服务定位器还是两者都使用？

> ID：12245558
> 
> 赞同：1
> 
> 时间：2012-09-03T09:53:00.190
> 
> 标签：asp.net-mvc, entity-framework, repository-pattern, service-locator

以您有以下应用程序的场景为例：

*   一个 MVC 4 Web 应用程序
*   该应用程序通过 Entity Framework 5 与现有数据库通信（没有计划更改为另一个 ORM 或数据库平台）。
*   应用程序与外部 SOAP Web 服务（Web 服务可能更改为 WCF）对话。

你会：

1.  为所有 EF 实体创建一个通用存储库（例如 MyDBRepository），并为 SOAP Web 服务调用创建一个存储库（例如 MyWSRepository）。然后创建一个包含业务逻辑的服务类，使用这两个存储库来访问数据并为所有控制器的需求（MyApplicationService）实现 CRUD 方法。然后将存储库注入服务类，最后将服务类注入 MVC 控制器。

2.  或者，您是否有一个使用 EF 生成的 DBContext 和生成的表实体（例如 MyDBService）来处理数据库查询和业务逻辑的服务类，以及另一个处理业务逻辑和 SOAP Web 服务调用的服务类（例如 MySOAPWebService）。然后将这两个服务都注入到 MVC 控制器中。

3.  或者是其他东西。

过去我使用过选项 1。但我想知道这是否只是添加了不必要的抽象层。如果实体框架生成一个 DBContext，那么拥有一个直接使用 DBContext 实体的服务类似乎不那么复杂。

在阅读了 StackOverflow 中的几篇文章和其他问题后，似乎有一条灰线可以区分服务定位器模式和存储库模式。

你会使用哪种结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:03:13.037

我为每个聚合推荐一个存储库或 DAO。使这些类在构造函数（或工作单元，如果您愿意）上接收 dbContext。

然后让您的服务实现业务逻辑并使用 DAO。该服务负责实例化 DBContext（如果需要，还负责实例化事务）。然后服务调用具有相同上下文的不同 DAO。

为了更强大的解耦，我强烈建议您让服务层无法接触 DBContext。每次都强迫自己通过 DAO。

服务层也应该处理异常。在我的应用程序中，服务层只抛出两种类型的异常：用户和系统。在控制器上，我使用它们来区分可恢复的错误或其他内容。（这就是为什么您有时会看到特定错误，例如“无效订单号”或其他类似“系统中发生错误，稍后再试”）

顺便说一句，永远不要忘记使用断开连接的实体。当您调用存储库进行添加/更新时，始终假定 POCO 已断开连接并相应地使用它们。

# c# - 在字符串列表中查找右括号的索引

> ID：12245560
> 
> 赞同：0
> 
> 时间：2012-09-03T09:53:09.000
> 
> 标签：c#

我正在从文本文件中获取输入。我已阅读所有文本并将其标记化。

这是输入样本

```
.MAIN [
    .HEADING1 [ .TEXT 30000 ]
    .HEADING2 [
      [
        .TEXT1 YAMA
        .TEXT2 THAH
      ]
    ]
  ] 
```

标记化后，标记列表包含“.MA​​IN”、“[”、“.HEADING1”等。现在我想为特定的起始方括号找到右括号的索引。例如，如果我给我的函数索引 0（第一个起始方括号）函数应该返回我最后一个索引，如果给我的函数索引 .HEADING1 的起始方括号，那么它应该返回我在同一行的右括号索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:22:43.113

```
int index = 3;
int bracketCount = 1;

for(int i = index + 1; i < tokenlist.Count; i++)
{
    if(tokenList[i] == "]")
    {
        bracketCount--;
    }
    if(tokenList[i] == "[")
    {
        bracketCount++;
    }
    if(bracketCount == 0)
    {
        index = i;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:22:24.547

试试这个：

```
 //Give it index of first bracket you want
        int myStartingIndex = 0;
        string s = "[ sfafa sf [fasfasfas ] [ test ] ]";
        int firstClosedIndex = s.IndexOf("]", myStartingIndex + 1);
        int firstOpenedIndex = s.IndexOf("[", myStartingIndex + 1);
        while (firstOpenedIndex < firstClosedIndex)
        {
            firstClosedIndex = s.IndexOf("]", firstClosedIndex + 1);
            firstOpenedIndex = s.IndexOf("[", firstOpenedIndex + 1);

            //Break if there is no any opened bracket
            //index before closing index
            if (firstOpenedIndex == -1)
            {
                break;
            }
        }

        Console.WriteLine("Required index is {0}", firstClosedIndex); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:29:22.163

只需使用堆栈推开括号“[”并在“]”处弹出右括号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-10T12:54:31.980

```
public int FindClosingBracketIndex(string text, char openedBracket = '{', char closedBracket = '}')
        {
            int index = text.IndexOf(openedBracket);
            int bracketCount = 1;
            var textArray = text.ToCharArray();

            for (int i = index + 1; i < textArray.Length; i++)
            {
                if (textArray[i] == openedBracket)
                {
                    bracketCount++;
                }
                else if (textArray[i] == closedBracket)
                {
                    bracketCount--;
                }

                if (bracketCount == 0)
                {
                    index = i;
                    break;
                }
            }

            return index;
        } 
```

# java - apache poi：将jtable保存到文件

> ID：12245561
> 
> 赞同：6
> 
> 时间：2012-09-03T09:53:08.943
> 
> 标签：java, swing, jtable, apache-poi, poi-hssf

我最近开始使用 java，当我需要从 jTable 创建一个 excel 文件时，我遇到了 apache poi 库的一些问题。

我已经阅读了很多线程并提出了一些不起作用的代码（即使这是非常简单的东西并且有很多示例，这让我看起来更加愚蠢），我希望有人可以帮助我。

所以这里有问题：

**a）**为什么应该编写excel文件的for循环不填充每个单元格？（excel文件中唯一有数据的行是第六行，这也让我想知道为什么它会为getRowCount / Column方法计算表模型中的空项目..我也知道它正在打印自定义字符串而不是表格本身，但将其保存到点 b)

**b)**我应该如何使用 jtable 模型项来填充 excel 文件，因为在创建表时我必须选择对象作为行类型？（特别是我也遇到了对象类型的问题，只要它是一个字符串||整数就没有问题，但是表应该是两者的混合，当你尝试时这似乎不起作用使用与 String||integer 不同的 setCellValue() 方法..或者至少我无法使其工作）

**c)**假设我稍后想从我之前创建的文件中填充 jtable，在使用 bufferedReader 类读取文件后，我是否只需要使用 b) 点的解决方案（另一种方法是）？

**免责声明：**代码的第一部分是由 netbeans 自动生成的，你可能会说，我想出的 hssf 部分在最后，但我想你可能想看看整个事情，抱歉，如果它看起来有点乱.

这是代码：

```
package poitest;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JTable;
import javax.swing.table.TableModel;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.ss.usermodel.*;

public class POITestFrame extends javax.swing.JFrame {

    /**
     * Creates new form POITestFrame
     */
    public POITestFrame() {
        initComponents();
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        excelButton = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTable1 = new javax.swing.JTable();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        excelButton.setText("ESPORTA!");
        excelButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                excelButtonActionPerformed(evt);
            }
        });

        jTable1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {"Boolean", "Integer", "String", "Array"},
                {"x*y", "x+y", "x/y", "x-y"},
                {"32", "43", "12", "24"},
                {"casa", "cantiere", "museo", "acquario"},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        jScrollPane1.setViewportView(jTable1);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 320, Short.MAX_VALUE)
            .addComponent(excelButton, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 91, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(excelButton)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void excelButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_excelButtonActionPerformed
        try {
             PoiWriter(jTable1);
        } catch (FileNotFoundException ex) {
             Logger.getLogger(POITestFrame.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IOException ex) {
            Logger.getLogger(POITestFrame.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_excelButtonActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(POITestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(POITestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(POITestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(POITestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new POITestFrame().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton excelButton;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable jTable1;
    // End of variables declaration//GEN-END:variables

    private void PoiWriter(JTable jTable1) throws FileNotFoundException, IOException {
        TableModel model = jTable1.getModel();

    // create a workbook
    Workbook wb = new HSSFWorkbook();  // xls file
        // create a new sheet
        Sheet sheet = wb.createSheet("Foglio di Prova!");
        // declare a row object reference
        Row r = null;
        // declare a cell object reference
        Cell c = null;
        // create a new file
    FileOutputStream fos;
    fos = new FileOutputStream("File di Prova.xls");

        // create a sheet table rows
        int rownum;
        for (rownum = (short) 0; rownum < model.getRowCount(); rownum++) {
            // create a row
            r = sheet.createRow(rownum);
        }

        for (short cellnum = (short) 0; cellnum < model.getRowCount(); cellnum ++) {
            // create a numeric cell
            c = r.createCell(cellnum);

            // populate table with custom objects
            for(int i=0; i < model.getRowCount();i++){
            for(int j=0;j < model.getColumnCount();j++){
                String aplala = "blabla";       
                c.setCellValue(aplala);   
            }
        }

        }
        wb.write(fos);
    fos.close();
    }
} 
```

PS：如果您想知道为什么我用对象类型构建表：这不是我正在使用的项目，我制作了这个片段来测试 hssf，因为生成的 excel 是非常可编辑的，但事情似乎没有顺利。

PPS：我也尝试使用 tokenizer 类，但我不确定您是否可以像使用 poi lib 那样编辑生成的 excel 文件。

PPPS：这是我第一次尝试使用java，所以请不要太粗暴！

我希望问题足够清楚，并提前感谢，我确实在努力提高编程能力：P

编辑：经过一天的练习，这就是我想出的似乎可以与 apache poi 库一起使用的方法，感谢它提供了良好指示的帮助人员！

```
 int rowNum;
    int colNum;
    int tempRows;
    int rowCount = model.getRowCount();
    int columnCount = model.getColumnCount();     

    // create the headers
    for (colNum = 0; colNum < columnCount; colNum++) {             
        if (colNum == 0) {
            r = sheet.createRow(0);
        }            
        c = r.createCell(colNum);  
        c.setCellValue(model.getColumnName(colNum)); 
    }

    for (rowNum = 0; rowNum < rowCount; rowNum++) {
        // create rows + 1 (to account for the headers) 
        tempRows = rowNum + 1;
        r = sheet.createRow(tempRows);      

        for (short cellnum = 0; cellnum < columnCount; cellnum ++) {
            // create cells 
            c = r.createCell(cellnum);
            // add values from table
            c.setCellValue(model.getValueAt(rowNum, cellnum).toString());
        } 
    } 
```

如果您认为代码可以改进，请随时发表评论，欢迎提出建议，尤其是像我这样的新手；）

再次感谢您的提示，他们真的成功了^^

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T10:23:05.000

请阅读有关[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)、[创建表模型](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)和[实现的数据类型](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)的教程，`JTable`了解这些`Column Classes`并返回`proper value`输出到`POI`；对于 MS Excel 中的大多数类型：

1.  您也必须在当前行的单元格内循环

2.  必须为各种数据类型（,,, `Date`）`Double`格式化`String`输出

3.  然后你可以专注于创造`formula(s)`和`coloring cell(s)`

循环代码`TableModel`也可以生成 MS Excel 文件，标准`windows delimiters`：

```
public class ExcelCustomerReport {

    public ExcelCustomerReport() {
    }

    public void exportTable(JTable table, File file) throws IOException {
        TableModel model = table.getModel();
        FileWriter out = new FileWriter(file);
        String groupExport = "";
        for (int i = 0; i < (model.getColumnCount()); i++) {//* disable export from TableHeaders
            groupExport = String.valueOf(model.getColumnName(i));
            out.write(String.valueOf(groupExport) + "\t");
        }
        out.write("\n");
        for (int i = 0; i < model.getRowCount(); i++) {
            for (int j = 0; j < (model.getColumnCount()); j++) {
                if (model.getValueAt(i, j) == null) {
                    out.write("null" + "\t");
                } else {
                    groupExport = String.valueOf(model.getValueAt(i, j));
                    out.write(String.valueOf(groupExport) + "\t");
                }
            }
            out.write("\n");
        }
        out.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-23T12:59:36.920

我知道这篇文章可能已经晚了，但也许对于其他想要获得代码的人来说，这里有一些有用的东西。

```
 TableModel model = raportTable.getModel();

    SXSSFWorkbook wb = new SXSSFWorkbook(-1);
    SXSSFSheet sh = wb.createSheet("Report");
    Row row = sh.createRow(0);
    for (int i = 0; i < model.getColumnCount(); i++) {
        Cell cell = row.createCell(i);
        cell.setCellValue(model.getColumnName(i));
    }

    for(int i = 0; i < model.getRowCount(); i++) {
        row = sh.createRow(i + 1);
        for(int j = 0; j < model.getColumnCount(); j++){
            Cell cell = row.createCell(j);
            cell.setCellValue(model.getValueAt(i,j).toString());
        }
    }

    try {
        FileOutputStream excel = new FileOutputStream(filename + ".xlsx");
        wb.write(excel);
        excel.flush();
        excel.close();
    } catch (FileNotFoundException ex) {
        Logger.getLogger(MainForm.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IOException ex) {
        Logger.getLogger(MainForm.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

希望能帮助到你。

# mysql - Centos 6 64bit 启用 my.cnf

> ID：12245563
> 
> 赞同：1
> 
> 时间：2012-09-03T09:53:16.907
> 
> 标签：mysql, centos, my.cnf, centos6

有人可以告诉我如何`my.cnf`在 CentOS 6 中启用选项吗？

我有所有预期的`.cnf`文件，`/usr/share/mysql`但它们根本不起作用。

```
/etc/init.d/mysqld --help --verbose
Usage: /etc/init.d/mysqld {start|stop|status|restart|condrestart|try-restart|reload|force-reload} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:55:13.683

据我所知，默认位置是 /etc/my.cnf 。也许您应该尝试将它们复制到那里并重新启动？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T09:56:57.227

`my.cnf`应该放在`/etc/`像`/etc/my.cnf`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T01:14:41.517

解决方案是将 my.cnf 文件放在 /etc/mysql/my.cnf

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T11:03:17.593

init.d 脚本 mysqld 依赖于 /usr/bin/my_print_defaults 中的脚本。

该脚本将“域”作为第一个输入，例如 mysqld_safe oder mysqld 并输出配置..

此脚本将 /etc/mysq/my.cnf + /etc/my.cnf + ~/.my.cnf 中的 .cnf 文件合并在一起，并以 .. 的形式输出 key=value 对。

```
]# /usr/bin/my_print_defaults mysqld
--datadir=/var/lib/mysql
--socket=/var/lib/mysql/mysql.sock
--user=mysql
--symbolic-links=0 
```

所以将 .cnf 文件放在 /usr/share/mysql 中可能是错误的..

# jprofiler - Jprofile“直接调用过滤类的方法”是什么意思？

> ID：12245564
> 
> 赞同：2
> 
> 时间：2012-09-03T09:53:16.907
> 
> 标签：jprofiler

我使用 CPU View 来检查性能。有人可以建议“直接调用过滤类的方法”是什么意思吗？我无法上传屏幕截图。

就像这样：“91.5% -60,324ms -14inv.direct 调用过滤类的方法”

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T14:44:48.577

此节点包含仅调用未分析类的线程 - 从线程的顶级`run()`方法开始。

要查看所有方法调用，请在分析设置中切换到“采样”并停用所有过滤器。

![在此处输入图像描述](../Images/306bf7b66a1a5a366188a0b951cb5412.png)

# android - 通过蓝牙通讯

> ID：12245567
> 
> 赞同：-1
> 
> 时间：2012-09-03T09:53:30.907
> 
> 标签：android, bluetooth

我想开发一个在安卓和非安卓设备之间进行蓝牙通信的应用程序。请给我一些建议。如何传输数据。转移后我怎么知道它已收到。我能够发送数据，但在非 android 设备中没有收到任何内容。谁能帮我这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:00:44.860

我建议你看看Android Developer。这是蓝牙通信主题的链接：http: [//developer.android.com/guide/topics/connectivity/bluetooth.html](http://developer.android.com/guide/topics/connectivity/bluetooth.html)

我希望这有帮助。

# asp.net - 带一个 出一个div

> ID：12245569
> 
> 赞同：-2
> 
> 时间：2012-09-03T09:53:42.063
> 
> 标签：asp.net, css

`javascript`这是一个带有and的 asp 项目`css`。我已经`java`从这个站点获得了 JonDesign 的 SmoothGallery 演示。

现在我想把`p`里面有摘要的标签放在里面，`div`顺便说一下，这里是代码：

```
<div id="myGallery">
    <asp:Repeater ID="HeadLinesRepeater" runat="server" DataSourceID="SqlDataSource1">
        <ItemTemplate>
            <div class="imageElement">
                <h3><%# Eval("Title") %></h3>
                <div>
                    <p><%# Eval("Summary") %></p>
                </div>
                <a href='<%# "/NewsBody.aspx?NewsId=" + Eval("ID")  %>' title="متن کامل" class="open"></a>
                <img class="full" src='<%# "/Img/news/" + Eval("ID") + ".jpg" %>' />
                <img class="thumbnail" src='<%# "/Img/news/" + Eval("ID") + ".jpg" %>' style="width: 100px; height: 75px" />
            </div>
        </ItemTemplate>
    </asp:Repeater>
</div> 
```

**CSS：**

```
 .jdGallery .slideInfoZone p {
            float: right;
            margin-bottom: 10px;
            z-index: 1000000;
            position: absolute;
            margin-left: 92px;
            width: 300px;
            right: 670px;
            top: 220px;
            font-family: Tahoma;
            font-size: 10pt !important;
            text-align: justify;
            color: white !important;
            padding: 0;
            font-size: 60%;
            margin: 2px 5px;
            color: #eee;
        } 
```

如果我将位置更改为固定位置，它将得到解决，但是当我以其他分辨率打开该站点时，它将被解读并进入其他`div`s 内部。这是我的大学项目，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:06:15.277

只需物理剪切`<p><%# Eval("Summary") %></p>`并将其粘贴到 div 之外。

编辑

使用 display:none 设置内部 p 的样式怎么样，然后创建您自己的 javascript（您是否在此页面中引用了 JQuery？）以获取所有段落并将它们附加到 DOM 中的其他位置。

但实际上它接缝（根据您的评论）您需要更改操纵父 div 的 javascript 以不依赖于内部段落，或者将其更改为与 DOM 中不同位置的段落一起使用。

# c# - 在用户没有管理员权限的机器上安装或运行该工具

> ID：12245572
> 
> 赞同：1
> 
> 时间：2012-09-03T09:53:59.823
> 
> 标签：c#, installation

我开发了一个 C# windows 窗体应用程序。我希望它在机器上安装和运行。当前登录到这台机器的用户没有任何管理员权限。他是普通用户，不能提供管理员权限。普通用户的问题是我无法在机器上安装该工具。我还尝试使用以管理员身份运行以及禁用 UAC 设置来运行安装程序。但结果是一样的。我该如何解决这个问题？我需要对工具代码进行任何更改吗？请提供解决方案。

# android - 如何在 android 2.3 应用程序中使用谷歌地图

> ID：12245574
> 
> 赞同：0
> 
> 时间：2012-09-03T09:54:00.393
> 
> 标签：android, api, android-intent, sdk

当我试图将我的课程扩展到`MapActivity`它时，会显示错误，例如*“没有可用的建议”*。我已经安装了所有的谷歌 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:57:01.937

您必须`Target`按照下图设置您的项目 -

![截屏](../Images/7452bc755f344c0f82127362eae448ff.png)

而且，看看[谷歌地图视图教程](http://codemagician.wordpress.com/2010/05/06/android-google-mapview-tutorial-done-right/)不要忘记创建一个与下面`AVD`一样的项目创建`Google-API`

![图片](../Images/f7df295d024b4262763b1909fc0fe819.png)

# javascript - 需要一个正则表达式来查找小数范围

> ID：12245576
> 
> 赞同：1
> 
> 时间：2012-09-03T09:54:15.180
> 
> 标签：javascript, regex

我目前需要一个 reg 表达式来评估十进制范围。

要求如下

1) 点后只能允许 1 或 2 个小数位，也可以允许整数（例如）1234、123.4、1245.78 有效

2) 范围应在 9999 以内（例如） 9999.0 、 9998.99 、 9999.00 - 有效 | 9999.01,10000.00 - 无效

3) 不需要前导零或尾随零

到目前为止，我一直试图实现直到写这个 reg 表达式

```
/^[0-9]\d{1,4}(\.\d{1,2})?$/.test(value); 
```

...但无法继续设置范围直到数字 9999（因为 9999.01 也无效）你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:07:48.397

为什么不只应用正则表达式来确定您的字符串是否为有效`digit with dots`浮点数，然后将其类型转换为 Number 并查找它是否大于 9999。

满足您需求的正则表达式可能非常复杂，并且从客户端占用过多的 CPU。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:06:43.453

这里有一些快速而肮脏的东西应该适合你：[http ://regex101.com/r/vK1jM3](http://regex101.com/r/vK1jM3)

`/^(?(?=9999)9999(?:\.0+)?|\d{1,4}(?:\.\d{1,2})?)$/gm`

我只处理特殊情况`9999`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:08:44.827

为什么是正则表达式？做就是了

```
x > 0 && x <= 9999 && (x*100 - Math.floor(x*100) == 0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T10:52:51.083

据我所知，这有效：

```
^(9999(?!\.[1-9])(?!\.0[1-9])\.[0-9]{1,2}|9999|(?!9999)[0-9]{1,4}|(?!9999)[0-9]{1,4}\.[0-9]{1,2})$ 
```

测试一下：

```
var monstrosity = /^(9999(?!\.[1-9])(?!\.0[1-9])\.[0-9]{1,2}|9999|(?!9999)[0-9]{1,4}|(?!9999)[0-9]{1,4}\.[0-9]{1,2})$/;

console.log(monstrosity.test("9999.00")); // true
console.log(monstrosity.test("9999.01")); // false
console.log(monstrosity.test("9999")); // true
console.log(monstrosity.test("9998.4")); // true
console.log(monstrosity.test("0")); // true
console.log(monstrosity.test("0.5")); // true 
```

如果你在代码库中添加这样的东西，未来的维护程序员会用干草叉来追捕你。正如 webbandit 建议的那样，尝试在没有正则表达式的情况下解决范围检查。

# ruby-on-rails-3 - 在嵌套模型导轨 3.2 中获取属性

> ID：12245578
> 
> 赞同：0
> 
> 时间：2012-09-03T09:54:19.980
> 
> 标签：ruby-on-rails-3, activerecord, actioncontroller, actionpack

我有两个模型用户和个人资料。
我想将用户名和密码保存在配置文件中的用户和其他用户配置文件详细信息中。
现在，
用户模型具有：

```
has_one :profile
accepts_nested_attributes_for :profile
attr_accessible :email, :password,:profile_attributes 
```

轮廓模型有

```
 belongs_to :user
 attr_accessible :firstname, :lastname 
```

用户控制器有

```
 def new
    @user = User.new
    @profileattr = @user.build_profile
  end

  def create
    @user = User.new(params[:user])

    if @user.save
      redirect_to root_url, :notice => "user created successfully!"
    else
      render "new"
    end
  end 
```

视图 new.html.erb 包含用户和配置文件的字段。
视图有：

```
<%= form_for @user do |f| %>
  <% if @user.errors.any? %>
    <div class="error_messages">
      <h2>Form is invalid</h2>
      <ul>
        <% for message in @user.errors.full_messages %>
          <li><%= message %></li>
        <% end %>

      </ul>
    </div>
  <% end %>

  <p>
    <%= f.label :email %><br />
    <%= f.text_field :email %>
  </p>
  <p>
    <%= f.label :password %><br />
    <%= f.password_field :password %>
  </p>

  <%= f.fields_for @profileattr do |pf|%>
  <p>
    <%= pf.label :firstname %><br />
    <%= pf.text_field :firstname %>
  </p>
  <p>
    <%= pf.label :lastname %><br />
    <%= pf.text_field :lastname %>
  </p>
  <% end %>

  <p class="button"><%= f.submit %></p>
<% end %> 
```

但是，当我运行此 Web 应用程序时，它显示错误：

*无法批量分配受保护的属性：配置文件*

在调试时我发现用户具有以下属性：

```
 :email:abc@gmail.com
 :password:secret

 :profile
            ---:firstname:abc
            ---:lastname:xyz 
```

所以，而不是预期的 params[:profile_attributes] 视图返回 params[:profile]
导致质量分配错误。所以出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:20:56.417

你试过了吗

```
 <%= f.fields_for :profile do |pf|%> 
```

?

# ios - 哪个分发程序：开发人员/企业？

> ID：12245581
> 
> 赞同：0
> 
> 时间：2012-09-03T09:54:29.377
> 
> 标签：ios, ipad, app-store

我正在为音乐合奏创建一个应用程序。这个合奏想要赠送参加音乐会的游客这个应用程序。前几天，这个应用程序可能会在 appStore 中作为一个具有特定价格的应用程序。这是否应该通过每天更改其价格来完成？或者有没有更实用的方法呢？

我应该建议乐团采取哪种方式**？**还是我应该将它作为 Ad Hoc App 带到应用商店？还是自定义 B2B 应用分发？还是他们应该通过内部分销来做到这一点？

开发人员或企业计划？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:09:11.083

绝对不是企业计划。企业许可证允许您在企业或企业员工拥有的设备上构建和部署 iOS 应用程序。向普通客户分发应用程序将违反许可证。

使用标准许可证有两种方法可以解决您的问题：

1) 在应用商店发布付费应用。如果参加音乐会的客户数量较少，则将应用商店促销代码赠送给他们，然后将应用程序出售给其余客户。

2) 在应用商店发布免费应用。有某种登录机制。将用户名和密码赠送给参加音乐会的客户。为所有其他人进行应用内购买，以获得完整的功能。

# android - 如何创建弹出通知，如whatsapp for android中使用的通知？

> ID：12245583
> 
> 赞同：11
> 
> 时间：2012-09-03T09:54:39.427
> 
> 标签：android, notifications, whatsapp

我想创建通知，例如用于 android 设备的 WhatsApp 应用程序中使用的弹出通知。

我该怎么做？由于我是新用户，我无法上传屏幕截图

请参考此链接：[http ://cdn6.staztic.com/cdn/screenshot/appsdroidnotifythemeicecreamsandwich-1-1.jpg](http://cdn6.staztic.com/cdn/screenshot/appsdroidnotifythemeicecreamsandwich-1-1.jpg)

[![在此处输入图像描述](../Images/a9ade4ddda590db65eeb0c04e326b837.png)](https://i.stack.imgur.com/11DCD.png)

对于屏幕截图图像并帮助我:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-06-22T10:08:59.177

它们被称为“提醒”通知。[这个页面](http://www.brevitysoftware.com/blog/how-to-get-heads-up-notifications-in-android/)有一个很好的解释。

总而言之，将优先级设置为高（或最大）。

这是我的代码中的一个示例：

```
public static void notify(Context context, int id, int titleResId,
                          int textResId, PendingIntent intent) {
    NotificationManager notificationManager =
        (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    String title = context.getString(titleResId);
    String text = context.getString(textResId);

    NotificationCompat.Builder builder = new NotificationCompat.Builder(context)
            .setSmallIcon(R.drawable.notification)
            .setContentTitle(title)
            .setContentText(text)
            .setDefaults(Notification.DEFAULT_ALL)
            .setPriority(NotificationCompat.PRIORITY_HIGH)
            .setAutoCancel(true)
            .setWhen(System.currentTimeMillis())
            .setTicker(title)
            .setContentIntent(intent);
    notificationManager.notify(id, builder.build());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T19:07:27.010

声明一个 PopUpWindow 引用并从要打开弹出窗口的位置调用initialPopupWindow() 方法：

```
private PopupWindow pwindo;

private void initiatePopupWindow() {
try {
// We need to get the instance of the LayoutInflater
LayoutInflater inflater = (LayoutInflater) PopUpWinndowDemoActivity.this
.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View layout = inflater.inflate(R.layout.screen_popup,
(ViewGroup) findViewById(R.id.popup_element));
pwindo = new PopupWindow(layout, 300, 370, true);
pwindo.showAtLocation(layout, Gravity.CENTER, 0, 0);

} catch (Exception e) {
e.printStackTrace();
}
} 
```

弹出窗口有一个 screen_popup.xml，如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/popup_element"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#444444"
android:orientation="vertical"
android:padding="10sp" >

<TextView
android:id="@+id/txtView"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_marginTop="5sp"
android:text="Hello!" />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-12T07:16:04.777

您可以使用 Dialog 主题或通过在主题中将窗口背景设置为透明来使活动的窗口透明来实现它。只要让你的 UI 看起来像一个对话框。

```
<style name="Theme.AppCompat.Translucent" parent="Theme.AppCompat.Light.NoActionBar">
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:colorBackgroundCacheHint">@null</item>
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowAnimationStyle">@android:style/Animation</item>
</style> 
```

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2012-09-03T10:03:01.907

我不知道whatsapp的弹出窗口是什么样的......

您可以使用[吐司](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)或[对话](http://developer.android.com/guide/topics/ui/dialogs.html)

# css - 如何将 -moz 和 -o 前缀添加到仅包含 -webkit 标签的代码中

> ID：12245589
> 
> 赞同：0
> 
> 时间：2012-09-03T09:55:04.430
> 
> 标签：css, vendor-prefix

说，我有这个页面：[http ://www.webkit.org/blog-files/3d-transforms/morphing-cubes.html](http://www.webkit.org/blog-files/3d-transforms/morphing-cubes.html)

我保存页面并在本地主机中运行 html 文件。它在 chrome 中运行良好，因为 css 使用 -webkit 前缀。现在我想测试是否也可以在 firefox & opera 上运行。所以我必须在具有-webkit 的相同css 代码中添加-moz & -o 前缀。

除了在代码中自己附加 -moz 和 -o 前缀之外，还有其他方法吗？一种方法是编写脚本来读取文件并附加标签。还有其他人吗？

**注意：**我不关心 -webkit 使用的 css3 转换当前是否被 -moz 或 -o 支持。我想要的只是如何复制 -webkit 行，向它们添加 -moz 和 -o 供应商前缀。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T09:58:55.433

可能是**供应商前缀**JS 帮你[http://leaverou.github.com/prefixfree/](http://leaverou.github.com/prefixfree/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-09T04:10:26.757

你没有一个，你有很多..

[https://css-tricks.com/how-to-deal-with-vendor-prefixes/](https://css-tricks.com/how-to-deal-with-vendor-prefixes/)

我喜欢[-prefix-free](http://leaverou.github.io/prefixfree/)

# ftp - 单击按钮在客户端打开 FTP 服务器

> ID：12245590
> 
> 赞同：0
> 
> 时间：2012-09-03T09:55:05.597
> 
> 标签：ftp

我正在开发一个网络应用程序。如果用户单击网页上的按钮，则 FTP 服务器应该在 Windows 资源管理器中打开，并且用户应该能够将文件粘贴到服务器上。

请帮帮我......

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:07:31.643

我猜你是在 PHP 上开发的？而不是连接到 FTP，也许你可以尝试一个基于 php 的文件管理器，它会在用户点击时打开。

下面的链接提供了很好的免费文件管理器，允许用户直接在网络上管理文件（如 FTP），它还允许您在文件级别添加保护。

[http://devsnippets.com/article/7-free-powerful-file-managers.html](http://devsnippets.com/article/7-free-powerful-file-managers.html)

另一方面，您可以硬编码到 ftp 的链接以包含用户名和密码注意大多数浏览器不会在 Windows 资源管理器上打开，并且您将无法通过网络对其进行控制。我绝对建议使用上述方法。

xtp://username@name.ext 将提示输入密码 xtp://username:password@name.ext 将在不安全的情况下传输密码

# html - 如何获取现有评论应用的 Facebook AppID？

> ID：12245594
> 
> 赞同：0
> 
> 时间：2012-09-03T09:55:24.710
> 
> 标签：html, facebook, facebook-social-plugins

我已经在使用 Facebook 评论应用，但需要集成 AppID。如果不创建新应用程序，我在任何地方都找不到如何获得其中一个。我想获取我正在使用的现有评论应用程序的 ID。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:20:06.027

您只能通过创建应用程序来获取应用程序 ID。然后，您可以使用新创建的应用程序的应用程序 ID。这怎么没有意义？:)

您实现了评论插件这一事实并不意味着您创建了一个应用程序（或者您已经拥有一个应用程序 ID）。您不会丢失您的评论，因为它们与 URL 相关联。向插件添加应用程序 ID 可让您审核评论，但不会丢失它们。

# ios - 代码不再在 OS4.3 中工作，但在 5.0 中可以正常工作（过去可以正常工作）

> ID：12245595
> 
> 赞同：0
> 
> 时间：2012-09-03T09:55:26.707
> 
> 标签：ios, xcode, debugging

奇怪的错误。我的代码是用 Xcode 3 编写的，它在 4.4 中加载良好，没有错误。

最近，它开始无法在 OS 4.3 或更低版本中运行，但在 5.0 和 5.1 中运行良好。我已经更新了我的应用程序几个星期，所以我不知道它哪里出了问题（我在测试时使用的是当前的模拟器 5.1，所以我什至没有想过在每次试用后尝试其他人）。

这是我的错误日志，但我无法弄清楚导致崩溃的原因。应该注意的是，在 4.3 或更低版本中启动时，我得到“位置服务不可用”，但在 5.0 及更高版本中没有。它在我尝试加载具有表的视图时崩溃。这是我的调试器信息...有什么想法吗？

```
> 2012-09-03 05:43:39.582 Diners[7811:12203] [-[MapViewController viewDidLoad] /Users/user/Documents/Source Code/Working Projects/Diners/Classes/MapViewController.m:48] 
bootstrap_look_up failed (44e)
2012-09-03 05:43:42.997 Diners[7811:12203] [-[StripClubsAppDelegate i3fSplashViewBrickDidRemoveFromSuperview:] /Users/user/Documents/Source Code/Working Projects/Diners/Classes/StripClubsAppDelegate.m:77] 
2012-09-03 05:43:49.883 Diners[7811:12203] -[UITapGestureRecognizer initWithCoder:]: unrecognized selector sent to instance 0x5fe01b0
2012-09-03 05:43:49.950 Diners[7811:12203] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UITapGestureRecognizer initWithCoder:]: unrecognized selector sent to instance 0x5fe01b0'
*** Call stack at first throw:
(
    0   CoreFoundation    0x014585a9 __exceptionPreprocess + 185
    1   libobjc.A.dylib   0x01205313 objc_exception_throw + 44
    2   CoreFoundation    0x0145a0bb -[NSObject(NSObject) doesNotRecognizeSelector:] + 187
    3   CoreFoundation    0x013c9966 ___forwarding___ + 966
    4   CoreFoundation    0x013c9522 _CF_forwarding_prep_0 + 50
    5   UIKit             0x0061c9fd UINibDecoderDecodeObjectForValue + 2592
    6   UIKit             0x0061d6ac -[UINibDecoder decodeObjectForKey:] + 398
    7   UIKit             0x0053293e -[UIRuntimeConnection initWithCoder:] + 153
    8   UIKit             0x00532ee7 -[UIRuntimeEventConnection initWithCoder:] + 64
    9   UIKit             0x0061c9fd UINibDecoderDecodeObjectForValue + 2592
    10  UIKit             0x0061c2f5 UINibDecoderDecodeObjectForValue + 792
    11  UIKit             0x0061d6ac -[UINibDecoder decodeObjectForKey:] + 398
    12  UIKit             0x00531c36 -[UINib instantiateWithOwner:options:] + 804
    13  UIKit             0x00533ab7 -[NSBundle(UINSBundleAdditions) loadNibNamed:owner:options:] + 168
    14  UIKit             0x003e9628 -[UIViewController _loadViewFromNibNamed:bundle:] + 70
    15  UIKit             0x003e7134 -[UIViewController loadView] + 120
    16  UIKit             0x003e700e -[UIViewController view] + 56
    17  UIKit             0x003e5482 -[UIViewController contentScrollView] + 42
    18  UIKit             0x003f5f25 -[UINavigationController _computeAndApplyScrollContentInsetDeltaForViewController:] + 48
    19  UIKit             0x003f4555 -[UINavigationController _layoutViewController:] + 43
    20  UIKit             0x003f5870 -[UINavigationController _startTransition:fromViewController:toViewController:] + 524
    21  UIKit             0x003f032a -[UINavigationController _startDeferredTransitionIfNeeded] + 266
    22  UIKit             0x003f7562 -[UINavigationController pushViewController:transition:forceImmediate:] + 932
    23  UIKit             0x003f01c4 -[UINavigationController pushViewController:animated:] + 62
    24  Diners            0x00002c83 -[MapViewController goToListByState] + 275
    25  UIKit             0x003374fd -[UIApplication sendAction:to:from:forEvent:] + 119
    26  UIKit             0x003c7799 -[UIControl sendAction:to:forEvent:] + 67
    27  UIKit             0x003c9c2b -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 527
    28  UIKit             0x003c8a1c -[UIControl touchesBegan:withEvent:] + 277
    29  UIKit             0x0035bd41 -[UIWindow _sendTouchesForEvent:] + 395
    30  UIKit             0x0033cc37 -[UIApplication sendEvent:] + 447
    31  UIKit             0x00341f2e _UIApplicationHandleEvent + 7576
    32  GraphicsServices  0x01a2e992 PurpleEventCallback + 1550
    33  CoreFoundation    0x01439944 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 52
    34  CoreFoundation    0x01399cf7 __CFRunLoopDoSource1 + 215
    35  CoreFoundation    0x01396f83 __CFRunLoopRun + 979
    36  CoreFoundation    0x01396840 CFRunLoopRunSpecific + 208
    37  CoreFoundation    0x01396761 CFRunLoopRunInMode + 97
    38  GraphicsServices  0x01a2d1c4 GSEventRunModal + 217
    39  GraphicsServices  0x01a2d289 GSEventRun + 115
    40  UIKit             0x00345c93 UIApplicationMain + 1160
    41  Diners            0x0000203d main + 125
    42  Diners            0x00001fb5 start + 53
)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T10:25:54.683

It seems that you add a gesture recognizer using interface builder, this feature is only available for ios5 and more.

# php - 在事务中插入 mysql 外键和主键。

> ID：12245599
> 
> 赞同：2
> 
> 时间：2012-09-03T09:55:39.083
> 
> 标签：php, mysql, transactions

只是为我正在做的一个小项目寻找一些提示和指示。我有一些想法，但我不确定它们是否是最佳实践。我正在使用 mysql 和 php。

我在数据库中有一个名为 nomsing 的表。

它有一个名为 row id 的主键，它是一个整数。

然后我有大约 8 个其他表引用该表。例如，称为 nomplu、accsing、accplu、datsing、datplu。每个都有一个引用 nomsing 主键的列。

使用我的 php 代码，我可以将所有信息插入到表中，除了一件事，即 nomsing 表的行 id 主键。这样 php 就会生成一系列插入，如下所示。

```
INSERT INTO nomsing(word,postress,gender) VALUES (''велосипед","8","mask").
INSERT INTO nomplu(word,postress,NOMSING?REFERENCE) VALUES (''велосипеды","2",@the reference to the id of the first insert@). 
```

还有更多的插入，但这一点得到了理解。第二个插入应该引用第一个插入的自动生成的 id。我是作为一个事务工作的，所以所有插入都应该完成或不完成。

我的一个想法是不自动生成 id 并在 php 中自己生成它。这样就可以知道交易之前给出的 id，但是我必须检查 id 是否已经在数据库中。

我的另一个想法是进行第一次插入，然后在 php 中查询该插入的行 ID，然后进行第二次插入。我的意思是两者都应该工作，但它们似乎不是最佳解决方案。我对数据库事务功能不太熟悉，但在这种情况下最好的方法是什么。我不喜欢插入然后查询 id 然后运行其余查询的想法。只是看起来效率很低，或者我错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:03:54.510

只需在主表中插入一行。然后，您可以获取[插入 id](http://php.net/manual/en/function.mysql-insert-id.php)（在 PDO 上时为[lastInserId](http://php.net/manual/en/pdo.lastinsertid.php)）并使用它来填充您的其他查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:26:03.657

您可以使用 JvdBerg 或 Mysql 的[LAST_INSERT_ID](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)给出的 php 版本。我通常使用前一个选项。

[在此处](https://stackoverflow.com/questions/1685860/php-how-to-get-last-inserted-id-of-a-table)查看类似的 SO 问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T10:59:04.240

您可以向表中添加一个新列`nomsing`，称为“insert_order”（或类似的），默认值为 0，然后不是为每个插入生成一个 SQL 语句，而是创建一个批量插入语句，例如

```
INSERT INTO nomsing(word,postress,gender, insert_order) 
VALUES (''велосипед","8","mask",1), (''abcd'',"9","hat",2)..... 
```

`insert_order`您在循环中使用从一开始的计数器生成数字。然后你可以`SELECT`在桌子上执行一个来获取ID，例如

```
SELECT row_id
FROM   nomsing
WHERE  insert_order > 0; 
```

现在您拥有所有 ID，您现在可以为以下查询进行批量插入。在脚本结束时，只需执行更新以将`insert_order`列重置为 0

```
UPDATE nomsing SET insert_order = 0 WHERE insert_order > 0; 
```

添加一个额外的列来执行此操作似乎很麻烦，但与一次执行一个查询相比，它会显着提高速度。

# javascript - 如何获取登录当前会话的用户ID？

> ID：12245600
> 
> 赞同：0
> 
> 时间：2012-09-03T09:55:41.173
> 
> 标签：javascript, jquery, jquery-mobile, sugarcrm

我需要找到登录到当前会话的用户。我尝试了以下但不起作用：有人可以帮助我吗？提前致谢！

```
$.get(CurrentServerAddress + '/service/v4/rest.php', {
    method: "get_user_id",
    input_type: "JSON",
    response_type: "JSON",
    rest_data:'"new_get_user_id":["session":"' + SugarSessionId + '"]'
}, function(data) {
    if (data !== undefined) {
        var userID = jQuery.parseJSON(data);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:58:19.063

我尝试了以下方法，它对我有用。

```
var userID = '';
    $.get(CurrentServerAddress + '/service/v4/rest.php', {
        method: "get_user_id",
        input_type: "JSON",
        response_type: "JSON",
        rest_data: '[{"session":"' + SugarSessionId + '"}]'
    }, function(data) {
        if (data !== undefined) {
            userID = jQuery.parseJSON(data);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:02:56.413

```
'authenticated_user_id' 
```

据我所知，这是您应该寻找的会话中的糖 crm 项目，您是否要求这样做？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T03:46:15.970

您正在进行的 REST 调用要求您拥有 SESSION 令牌。通常，我们将在我们的 CRM 上设置一个*REST*用户，该用户可以通过 REST 访问。

# wordpress - wordpress 不能点击超链接

> ID：12245601
> 
> 赞同：0
> 
> 时间：2012-09-03T09:55:53.663
> 
> 标签：wordpress, hyperlink, clickable

我有一个网站，我为一个朋友使用主题 KIN for wordpress 作为基础。该网站建立在 Wordpress 之上，它使用 AJAX 加载所有页面，但链接虽然可见，但无法点击！我完全不知道为什么。下面是网站...

[http://www.baudesigncreative.com](http://www.baudesigncreative.com)

如果您导航到保持联系页面，您会注意到有指向页面的链接。奇怪的是，我可以在状态栏上看到链接，但是当我单击时没有任何反应。我不确定在哪里可以解决这个问题，有人可以提供任何帮助吗？

非常感谢！

* * *

多亏了下面的帮助，我发现链接中断来自 bau.js，

```
$(document).ready(function() {  

  var url = '';
  var currentOpen = '';

  var mousedown = false;
  var galleryMousedown = false;
  var mouseX = 0;
  var xdiff = 0;

  var movePercentage = 0;
  var toMove = 0;

  function randomQuotes() {
    $('body').append('<div id="bau-quotes-holder"></div>');
    $('#bau-quotes-holder').hide();

    var quotesUrl = 'http://baudesigncreative.com/quotes/';
    var quotesLength = 0;

    $('#bau-description').html('').hide();
    $('#bau-quotes-holder').load(quotesUrl + ' #page_content_wrapper', function() {
      $('#bau-quotes-holder').find('dt').each(function() {
        $('#bau-description').append('<img src="' + $('a', this).attr('href') + '" />');
        quotesLength++;
      });
      $('#bau-description img').hide();

      var randomized = Math.floor((Math.random() * quotesLength) + 1);

      $('#bau-description').show();
      $('#bau-description img:nth-child(' + randomized + ')').fadeIn(500, function() {
        $('#bau-quotes-holder').remove();
      });
    });
  }

  randomQuotes();

  function scrollers() {
    $('#bau-gallery').hover(function() {
      $('#bau-gallery-left').fadeIn(200);
      $('#bau-gallery-right').css('marginLeft', $('#galleryScrollbar').width() - '29').fadeIn(200);
    }, function() {
      $('#bau-gallery-left').fadeOut(200);
      $('#bau-gallery-right').fadeOut(200);
    });

    var galleryLength = 0;    
    $('#bau-gallery-list').find('img').each(function() {
      galleryLength++;
    });

    var scrollbarWidth = parseFloat($('#galleryScrollbar').width()) - 20;
    var scrollbarToMove = 0;

    var isDown = false;
    var galleryLeft = parseFloat($('#bau-gallery-list').css('left'));
    var galleryWidth = parseFloat($('#bau-gallery-list').width());
    var lastImgWidth = parseFloat($('#bau-gallery-list img:last-child').width()) + 2;

    toMove = Math.abs($('hr').width() - $('#bau-gallery-list img:last-child').width());
    // var jumpWidth = ((galleryWidth - lastImgWidth - toMove) / (galleryLength - 1)) / 20;
    var jumpWidth = ((galleryWidth - lastImgWidth - toMove) / (galleryLength - 1)) / 2;

    // scrollbarToMove =  (scrollbarWidth / (galleryLength - 1)) / 20;
    scrollbarToMove =  (scrollbarWidth / (galleryLength - 1)) / 2;

    var timeoutLeft;
    var timeoutRight;

    $('#bau-gallery-left').dblclick(function(e) {
      return false;
    });

    $('#bau-gallery-right').dblclick(function(e) {
      return false;
    });

    $('#bau-gallery-left').click(function(e) {
      galleryWidth = parseFloat($('#bau-gallery-list').width());
      lastImgWidth = parseFloat($('#bau-gallery-list img:last-child').width()) + 2;
      toMove = Math.abs($('hr').width() - $('#bau-gallery-list img:last-child').width());
      jumpWidth = ((galleryWidth - lastImgWidth - toMove) / (galleryLength - 1)) / 2;

      if ((galleryWidth - Math.abs(parseFloat($('#bau-gallery-list').css('left')))) > galleryWidth - jumpWidth) {
        $('#galleryScrollbarThumb').css('left', 0);
        $('#bau-gallery-list').css('left', 0);
      }
      else {
        $('#bau-gallery-list').animate({'left': '+=' + jumpWidth + 'px'}, 100);
        $('#galleryScrollbarThumb').animate({'left': '-=' + scrollbarToMove + 'px'}, 100);
      }

      return false;
    });

    $('#bau-gallery-right').click(function(e) {
      galleryWidth = parseFloat($('#bau-gallery-list').width());
      lastImgWidth = parseFloat($('#bau-gallery-list img:last-child').width()) + 2;
      toMove = Math.abs($('hr').width() - $('#bau-gallery-list img:last-child').width());
      jumpWidth = ((galleryWidth - lastImgWidth - toMove) / (galleryLength - 1)) / 2;

      if ((scrollbarWidth - Math.abs(parseFloat($('#galleryScrollbarThumb').css('left')))) < scrollbarToMove) {
        $('#galleryScrollbarThumb').css('left', scrollbarWidth);
        $('#bau-gallery-list').css('left', -(galleryWidth - lastImgWidth - toMove));
      }
      else {
        $('#bau-gallery-list').animate({'left': '-=' + jumpWidth + 'px'}, 100);
        $('#galleryScrollbarThumb').animate({'left': '+=' + scrollbarToMove + 'px'}, 100);
      }

      return false;
    });

    //onhold
    // $('#bau-gallery-left').mousedown(function(e) {
      // if (!galleryMousedown) {
        // galleryMousedown = true;
        // timeoutLeft = setInterval(function() {
          // if ((scrollbarWidth - Math.abs(parseFloat($('#galleryScrollbarThumb').css('left')))) > scrollbarWidth - scrollbarToMove) {
            // $('#galleryScrollbarThumb').css('left', 0);
            // $('#bau-gallery-list').css('left', 0);
          // }
          // else {
            // $('#bau-gallery-list').animate({'left': '+=' + jumpWidth + 'px'}, 50);
            // $('#galleryScrollbarThumb').animate({'left': '-=' + scrollbarToMove + 'px'}, 50);
          // }
        // }, 50);
      // }

      // return false;
    // });

    // $('#bau-gallery-right').mousedown(function(e) {
      // if (!galleryMousedown) {
        // galleryMousedown = true;

        // timeoutRight = setInterval(function() {
          // if ((scrollbarWidth - Math.abs(parseFloat($('#galleryScrollbarThumb').css('left')))) < scrollbarToMove) {
            // $('#galleryScrollbarThumb').css('left', scrollbarWidth);
            // $('#bau-gallery-list').css('left', -(galleryWidth - lastImgWidth - toMove));
          // }
          // else {
            // $('#bau-gallery-list').animate({'left': '-=' + jumpWidth + 'px'}, 50);
            // $('#galleryScrollbarThumb').animate({'left': '+=' + scrollbarToMove + 'px'}, 50);
          // }
        // }, 50);
      // }        
      // return false;
    // });

    // $(window).mouseup(function(e) {
      // galleryMousedown = false;
      // clearInterval(timeoutLeft);
      // clearInterval(timeoutRight);

      // return false;
    // });
  }

  function backLoop() {
    $('#bau-gallery-back a').dblclick(function(e) {
      return false;
    });

    $('#bau-gallery-back a').click(function(e) {
      randomQuotes();
      var backShowcaseUrl = $(this).attr('href');
      $('#bau-content').fadeOut(1000, function() {
        $('#bau-gallery').remove();
        $('#bau-content').hide();
        $('#bau-content').append('<div id="page_content_wrapper"><div class="inner"><div id="bau-showcase"></div></div></div>')
        $('#bau-showcase').append($('#bau-showcase-holder').html());
        $('#bau-content').height('')
          .css('marginBottom', '')
          .width('')
          .css('overflow', '');
        $('#bau-content').fadeIn(500, function() {
          $('#bau-showcase-holder').remove();
          showcaseEvents();
        });
        $('#bau-content').height($('.inner').height());
      });

      return false;
    });
  }

  function showcaseEvents() {
    $('#bau-showcase li').dblclick(function(e) {
      return false;
    });

    $('#bau-showcase li').click(function(e) {
      randomQuotes();
      var showcaseUrl = $('a', this).attr('href');
      var tempWidth = 0;

      $('#bau-content').fadeOut(1000, function() {
        $('#bau-showcase-holder').remove();
        $('body').append('<div id="bau-showcase-holder">' + $('#bau-showcase').html() + '</div>');
        $('#bau-showcase-holder').hide();

        $('#page_content_wrapper').remove();
        $('#bau-content').append('<div id="bau-gallery"></div>');

        $('#bau-gallery-holder').load(showcaseUrl + ' #page_content_wrapper', function() {
          $('#bau-gallery').append('<div id="bau-gallery-title">' + $('#bau-gallery-holder h2').text() + '</div><div id="bau-gallery-list"></div><div id="bau-gallery-left" class="scroller scroll-left"></div><div id="bau-gallery-right" class="scroller scroll-right"></div>')

          $('#bau-gallery-holder').find('dt').each(function() {
            var _thisImgUrl = $('a', this).attr('href');

            $('#bau-gallery-list').append('<img src="' + _thisImgUrl  + '"/>');
          });

          $('#bau-gallery').append('<div class="clear"></div><div id="galleryScrollbar"><div id="galleryScrollbarThumb"><img src="http://baudesigncreative.com/wp-content/uploads/2011/09/scrollbar_thumb.png" alt=""></div></div>')
            .append('<div id="bau-gallery-back"><a href="' + $('#main_menu li:nth-child(2) a').attr('href') + '"><img src="http://baudesigncreative.com/wp-content/uploads/2011/09/back-to-showcase.png" />Back to Showcase</a></div>');

          $('#bau-content').fadeIn(1000, function() {
            tempWidth = $('#bau-gallery').width();
            // $('#bau-gallery').width($('hr').width());
            $('#bau-content').width($('hr').width());
            // $('#bau-gallery-list').width($('#bau-gallery').width());
            // $('#bau-gallery-list').width($('hr').width());

            $('#galleryScrollbarThumb').mousedown(function(event) {
              if (!mousedown) {
                mousedown = true;
              }

              return false;
            });

            var scrollerOffset = $('hr').offset();
            var scrollerOffsetLeft = scrollerOffset.left;
            var realEvent = 0;

            $(window).mousemove(function(event) { 
              if (mousedown) {
                realEvent = event.pageX - (scrollerOffsetLeft + 10);

                if (realEvent < 0) {
                  realEvent = 0;
                }
                else if (realEvent > ($('hr').width() - 20)) {
                  realEvent = $('hr').width() - 20;
                }

                $('#galleryScrollbarThumb').css('left', realEvent);
                movePercentage = (realEvent) / ($('hr').width() - 20);
                toMove = Math.abs($('hr').width() - $('#bau-gallery-list img:last-child').width());
                $('#bau-gallery-list').css('left', -(movePercentage * ($('#bau-gallery-list').width() - $('#bau-gallery-list img:last-child').width() - 2 - toMove)));
              }

              return false;
            });

            $(window).mouseup(function(event) { 
              mousedown = false;

              if (parseFloat($('#galleryScrollbarThumb').css('left')) <= 0) {
                $('#galleryScrollbarThumb').css('left', 0);
                $('#bau-gallery-list').css('left', 0);
              }
              else if (parseFloat($('#galleryScrollbarThumb').css('left')) >= $('hr').width() - 20) {
                $('#galleryScrollbarThumb').css('left', $('hr').width() - 20);
                toMove = Math.abs($('hr').width() - $('#bau-gallery-list img:last-child').width());
                $('#bau-gallery-list').css('left', -($('#bau-gallery-list').width() - $('#bau-gallery-list img:last-child').width() - 2 - toMove));
              }

              return false;
            });

            scrollers();

            backLoop();
          });

          $('#bau-content').height($('#bau-gallery').height())
            .css('marginBottom', $('#bau-gallery').css('marginBottom'))
            .width('100%')
            .css('overflow', 'hidden');

          $('#bau-gallery-back').width($('hr').width());
          $('#galleryScrollbar').width($('hr').width());

          $('#bau-gallery-holder').remove();
          $('body').prepend('<div id="bau-gallery-holder"></div>');
        });
      });

      return false;
    });
  }

  $('#page_content_wrapper').remove();
  $('#main_menu li:first').append('<div id="bau-ajax"><div id="bau-content"></div><div class="clear"></div></div>');
  $('#bau-ajax').hide();

  $('body').prepend('<div id="bau-gallery-holder"></div>');
  $('#bau-gallery-holder').hide();

  $('#main_menu > li').dblclick(function(e) {
    return false;
  });

  $('#main_menu > li').click(function(e) {
    randomQuotes();
    $('#bau-showcase-holder').remove();
    var _this = $(this);
    var _thisA = $('a', this);

    $('#main_menu li a').css('color', '#000');
    $('#bau-content').slideUp(500, function() {
      if (_this.attr('id') != currentOpen) {
        $('#bau-ajax').remove();
        _this.append('<div id="bau-ajax"><hr><div id="bau-content"></div><div class="clear"></div><hr></div>');
        url = _thisA.attr('href');

        $('#bau-ajax').show();
        $('#bau-content').hide();
        _thisA.css('color', '#909295');

        $('#bau-content').load(url + ' #page_content_wrapper', function() {
          $('#bau-content h1').remove();
          $('#bau-content br').remove();

          $('#bau-content').fadeIn(500, function() {
            $('#bau-content').click(function(e) {
              return false;
            });

            showcaseEvents();
          });

          $('#bau-content').height($('.inner').height());
          currentOpen = _this.attr('id');
        });
      }
      else {
        $('#bau-ajax').remove();
        _this.append('<div id="bau-ajax"><div id="bau-content"></div><div class="clear"></div></div>');
        url = _thisA.attr('href');
        currentOpen = '';
      }
    });

    return false;
  });  

  //styleSheets
  $('#menu_wrapper').css('width', '100%');
  $('#page_content_wrapper').css('width', '1000px');

}); 
```

任何人有机会发现任何可能的东西吗？

当我注释掉时（从第 297 行开始）

```
$('#page_content_wrapper').remove(); 
```

它似乎删除了与它重叠的样式，这导致页面有点断裂:(

我是否错过了一些简单的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:03:57.013

如果您的链接仍然有问题，那么您的链接正在我这边工作，然后使用 CSS 属性。

```
Z-index:999; 
```

# ios-simulator - 如何在 iPhone 模拟器中播放视频

> ID：12245604
> 
> 赞同：-1
> 
> 时间：2012-09-03T09:56:10.017
> 
> 标签：ios-simulator, mpmovieplayer

我想在 iPhone 模拟器中播放视频。我尝试过使用 MPMoviePlayerViewController，但它没有播放。有人知道怎么做吗？如果有什么好的教程，请帮我找一个。谢谢。

注意：与 MPMoviePlayerViewController 不是 MPMoviePlayerController 相关的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T10:00:56.290

只需将视频文件拖放到您的 Xcode 项目中

在“videourl”中给出视频的url

```
NSURL *url = [NSURL URLWithString:videourl];
MPMoviePlayerViewController *moviePlayer1 = [[MPMoviePlayerViewController alloc]initWithContentURL:url];     
[self presentMoviePlayerViewControllerAnimated:moviePlayer1]; 
```

它将在模拟器中完美运行

这个[链接](http://www.techotopia.com/index.php/Video_Playback_from_within_an_iOS_5_iPhone_Application)也可以帮助你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T10:01:53.697

假设弧。

例如，您可以在 viewDidLoad 方法中调用它，并使用以下方法将该控制器添加到您的视图中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSBundle *bundle = [NSBundle mainBundle];
    NSString *moviePath = [bundle pathForResource:@"test" ofType:@"m4v"];
    NSURL *movieURL = [NSURL fileURLWithPath:moviePath];
    MPMoviePlayerController *theMovie = [[MPMoviePlayerController alloc] initWithContentURL:movieURL];
    theMovie.scalingMode = MPMovieScalingModeAspectFill;
    [theMovie play];

   [self.view addSubview:theMovie.view];
    [self addChildViewController:theMovie];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T10:02:00.483

在我的头文件中我写：

```
MPMoviePlayerController *moviePlayer; 
```

使用此属性：

```
@property(nonatomic, strong) MPMoviePlayerController *moviePlayer; 
```

在我初始化moviePlayer的方法中：

```
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:movieUrl];
self.moviePlayer = player; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-03T10:20:12.097

使用以下代码

```
MPMoviePlayerController *moviePlayer1 = [[MPMoviePlayerController alloc]
initWithContentURL:yourVideoURL];

moviePlayer1.view.frame = CGRectMake(0, 0, 200, 110);
[self.view addSubview:moviePlayer1.view];
[[NSNotificationCenter defaultCenter]addObserver:self 
                                        selector:@selector(movieFinishedCallback:)
                                            name:MPMoviePlayerPlaybackDidFinishNotification
                                          object:moviePlayer1];
[moviePlayer1 play]; 
```

# ios - 我收到以下错误 - Apple Mach-O Linker (id) Error

> ID：12245605
> 
> 赞同：0
> 
> 时间：2012-09-03T09:56:12.997
> 
> 标签：ios

我收到以下错误，但 .h 或 .m 文件中均未显示错误

> Apple Mach-O 链接器 ( `id`) 错误“ `_AudioServicesCreateSystemSoundID`”，引用自 - `[firstViewController playSound:]` in`FirstViewController.o`

.h 和实现文件都是干净的，并且在页面上没有显示任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:05:23.440

您需要将其添加`AudioToolbox.framework`到您的项目中。

执行此操作的说明在这里：[如何在 Xcode 4 中“添加现有框架”？](https://stackoverflow.com/questions/3352664/how-to-add-existing-frameworks-in-xcode-4)

# oracle - 甲骨文：使用 WHERE ROWNUM = 1

> ID：12245607
> 
> 赞同：2
> 
> 时间：2012-09-03T09:56:22.163
> 
> 标签：oracle

小节和小节

只是一个快速的问题。我只需要从存储过程中返回一行，但是无论我将 WHERE 子句放在哪里，都会出错。有人可以看看（由于长度太短而被删减）代码，请让我知道它应该去哪里，好吗？

```
SELECT        **values** 

INTO          **variables**                  

FROM          **table**

_WHERE        ROWNUM = 1_

INNER JOIN    **other table**
ON            **join target**
ORDER BY      **sort criteria**;

_WHERE        ROWNUM = 1_ 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T10:10:03.487

我相信这是构造 rownum 查询的方法

```
SELECT * FROM 
INTO **Variables * *
( SELECT * FROM X 
  WHERE Y 
  ORDER BY Z
) 
WHERE ROWNUM = 1; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T02:19:04.130

你几乎是正确的。您将 WHERE 子句放在 JOIN 之后，但在 ORDER BY 之前。

```
SELECT        **values** 

INTO          **variables**                  

FROM          **table**

INNER JOIN    **other table**
ON            **join target**

_WHERE        ROWNUM = 1_

ORDER BY      **sort criteria**; 
```

然而，这不会像你想的那样——在 where 子句之后评估 ORDER BY；这意味着这将只选择它找到的第一条记录（满足连接条件），然后对该行进行排序（这显然是一个无操作）。

其他答案（例如 IvoTops'）给出了如何根据排序标准获取第一条记录的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T12:21:13.267

```
SELECT        **values** 
INTO          **variables**                  
FROM 
    ( SELECT        **values** 
                  , ROW_MUMBER() OVER (ORDER BY  **sort criteria**) AS rn
      FROM          **table**
      INNER JOIN    **other table**
      ON            **join target**  
    ) tmp 
WHERE        rn = 1 ; 
```

另请查看此博客文章：[Oracle：ROW_NUMBER() 与 ROWNUM](http://explainextended.com/2009/05/06/oracle-row_number-vs-rownum/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-07T11:15:02.313

有点晚了，但我遇到了类似的问题，我这样解决了：

```
SELECT **values** 
INTO **variables** 
FROM **table**
WHERE **condition**
ORDER BY **sort criteria**
FETCH FIRST 1 ROW ONLY; 
```

问候

# c# - 如何使用 MVC3/C#/Razor 将变量传递给 SASS？

> ID：12245617
> 
> 赞同：1
> 
> 时间：2012-09-03T09:57:30.337
> 
> 标签：c#, css, asp.net-mvc-3, sass, less

在我当前的 MVC3 项目中，我们正在实现一个主题功能，用户可以在其中选择将在整个站点中使用的调色板。

为此，我需要能够将他们的选择传递给我的样式表。看来我的选择是 dotless 或 SASS，我更喜欢 SASS 的外观，但不知道如何将参数传递给它。

使用 dotless 时，您可以在引用样式表时在查询字符串中将参数传递给它，下面我将传递所选蓝色和绿色的十六进制代码：

```
<link href="/Content/Site.less?blue=%23134988&amp;green=%23008000&amp;"
      rel="stylesheet" type="text/css" /> 
```

`@blue`然后可以使用或在样式表中访问这些变量`@green`。

谁能告诉我如何使用 SASS 实现相同的目标？

# javascript - 如何通过 ID 获取图层对象

> ID：12245619
> 
> 赞同：0
> 
> 时间：2012-09-03T09:57:36.727
> 
> 标签：javascript, photoshop, photoshop-script, jsx

Photoshop 脚本 API 让我很苦恼。它根本对开发人员不友好。但我仍然相信，当我有图层 ID 时，有办法获取图层对象吗？

我要做的就是将选定的图层复制到一个新文档中。图层可能嵌套在组中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T18:07:19.243

你说得对，这么简单的动作不应该这么复杂。试试这个：

```
var curDoc  = app.activeDocument;
var newDoc = app.documents.add(curDoc.width,curDoc.height,curDoc.resolution);//add a new doc with the same dimensions as the active one
app.activeDocument = curDoc;//set the original doc as active
try {
    var curLayer = newDoc.activeLayer;//get a reference to the new document's current layer
    curDoc.activeLayer.duplicate(newDoc,ElementPlacement.PLACEATBEGINNING);//dupliate the active layer from the original doc to the new/copy doc
} catch(e) {    alert(e);   } 
```

如果有帮助，Photshop 会附带一个参考（应该在 中`PHOTOSHOP_INSTALL_FOLDER/Scripting/Documents`）和/或对象模型查看器（在 ExtendScriptToolkit 的帮助菜单下可见）。

# asp.net - 根据其他 RadGrid PageSize 更改 Telerik RadGrid PageSize

> ID：12245620
> 
> 赞同：1
> 
> 时间：2012-09-03T09:57:45.160
> 
> 标签：asp.net, telerik, telerik-grid, radgrid

我的页面 RadGrid1 和 RadGrid2 中有两个 RadGrid 控件，当我更改其中任何一个的页面大小时，我希望另一个自动更改为相同的页面大小，我尝试了这个：

```
protected void RadGrid1_PageSizeChanged(object sender, GridPageSizeChangedEventArgs e)
{
    RadGrid2.PageSize = e.NewPageSize;
}

protected void RadGrid2_PageSizeChanged(object sender, GridPageSizeChangedEventArgs e)
{
    RadGrid1.PageSize = e.NewPageSize;
} 
```

但这会导致 stackoverflow 异常，因为每个事件都调用了另一个事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:24:28.567

请尝试以下代码片段。

**.aspx**

```
 <telerik:RadGrid ID="RadGrid1" runat="server" AutoGenerateColumns="False" OnItemDataBound="RadGrid1_ItemDataBound"
    OnNeedDataSource="RadGrid1_NeedDataSource" AllowFilteringByColumn="true" 
     PageSize="2" AllowPaging="true" onpagesizechanged="RadGrid1_PageSizeChanged">
    <MasterTableView Name="Parent" DataKeyNames="ID" EditMode="PopUp">
        <Columns>
            <telerik:GridBoundColumn DataField="ID" UniqueName="ID" HeaderText="ID">
            </telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="Name" UniqueName="Name" HeaderText="Name">
            </telerik:GridBoundColumn>
            <telerik:GridEditCommandColumn>
            </telerik:GridEditCommandColumn>
        </Columns>
    </MasterTableView>
</telerik:RadGrid>

<telerik:RadGrid ID="RadGrid2" runat="server" AutoGenerateColumns="False" OnNeedDataSource="RadGrid2_NeedDataSource"  onpagesizechanged="RadGrid2_PageSizeChanged"
PageSize="2" AllowPaging="true">
    <MasterTableView Name="Parent" DataKeyNames="ID" EditMode="PopUp">
        <Columns>
            <telerik:GridBoundColumn DataField="ID" UniqueName="ID" HeaderText="ID">
            </telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="Name" UniqueName="Name" HeaderText="Name">
            </telerik:GridBoundColumn>
        </Columns>
    </MasterTableView>
</telerik:RadGrid> 
```

**.aspx.cs**

```
 protected void RadGrid1_NeedDataSource(object sender, GridNeedDataSourceEventArgs e)
{
    dynamic data = new[] {
    new { ID = 1, Name ="Name1",path="1.jpg"},
    new { ID = 2, Name = "Name2",path="2.jpg"},
    new { ID = 3, Name = "Name3",path="3.jpg"},
     new { ID = 4, Name = "Name4",path="2.jpg"},
    new { ID = 5, Name = "Name5",path="3.jpg"}
};
    RadGrid1.DataSource = data;
}

protected void RadGrid1_ItemDataBound(object sender, GridItemEventArgs e)
{
    if (e.Item.IsInEditMode && e.Item is GridEditableItem)
    {
        GridEditableItem item = e.Item as GridEditableItem;
        string strID = item.GetDataKeyValue("ID").ToString();
        // Access your DataKey here
    }
}

protected void RadGrid2_NeedDataSource(object sender, GridNeedDataSourceEventArgs e)
{
    dynamic data = new[] {
    new { ID = 1, Name ="Name1",path="1.jpg"},
    new { ID = 2, Name = "Name2",path="2.jpg"},
    new { ID = 3, Name = "Name3",path="3.jpg"},
     new { ID = 4, Name = "Name4",path="2.jpg"},
    new { ID = 5, Name = "Name5",path="3.jpg"}
};
    RadGrid2.DataSource = data;
}

protected void RadGrid1_PageSizeChanged(object sender, GridPageSizeChangedEventArgs e)
{
    RadGrid2.PageSize = e.NewPageSize;
    RadGrid2.Rebind();
}

protected void RadGrid2_PageSizeChanged(object sender, GridPageSizeChangedEventArgs e)
{
    RadGrid1.PageSize = e.NewPageSize;
    RadGrid1.Rebind();
} 
```

# internet-explorer - 在 IE 中设置光标位置和光标丢失

> ID：12245621
> 
> 赞同：1
> 
> 时间：2012-09-03T09:57:46.767
> 
> 标签：internet-explorer, cursor, range

在 contenteditable div 中，我输入一些诸如 @ab 之类的单词，然后弹出一个用户弹出窗口，然后如果我在弹出窗口中通过鼠标选择用户“abc”，用户可以将 @abc 插入 div 但光标会丢失。如果我通过键盘选择用户，就可以了。

IE: //currentRange include @ab //elem 是 contenteditable div

```
 elem = $this.get(0);
    elem.focus();

    var inputStr = <a href="userlink">@abc</a>

    currentRange.pasteHTML(inputStr);   

    // set cursor position  
    var r = document.selection.createRange(); 
    if(bookmark) {
        r.moveToBookmark(bookmark);
        r.select();
        bookmark = null;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T09:40:26.787

选中后调用`pasteHTML()`范围，光标会自动移动到粘贴内容后的位置：

```
elem = $this.get(0);
elem.focus();

var inputStr = '<a href="userlink">@abc</a>';

// set cursor position  
var r = document.selection.createRange(); 
if(bookmark) {
    r.moveToBookmark(bookmark);
    r.select();
    bookmark = null;
}
r.pasteHTML(inputStr); 
```

# gwt - GWT - 多于 3 位小数的 DoubleBox

> ID：12245622
> 
> 赞同：4
> 
> 时间：2012-09-03T09:57:54.490
> 
> 标签：gwt, double, truncate

我正在使用 GWT 创建一个用户界面，并且有很多双值框，但是当我设置一些包含超过 3 位小数的变量时，我的 DoubleBox 不接受并截断仅保留 3 位的数字。

正常吗？

最好的解决方案是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T10:21:52.363

As the javadoc says `DoubleBox` is a `ValueBox` using a `DoubleParser` and `DoubleRenderer`. Those rely on `NumberFormat.getDecimalFormat()` which will trunk at 3 decimals in most (if not all) locales (for the default locale: [http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/i18n/client/constants/NumberConstantsImpl.properties](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/i18n/client/constants/NumberConstantsImpl.properties))

If you want another format, then use a `ValueBox` with a `NumberFormatRenderer` with your custom `NumberFormat` pattern (and either use the `DoubleParser` or make your own `Parser` with your custom `NumberFormat` pattern)

# unit-testing - 如何对使用 Express + Mongoose 构建的 NodeJs REST API 服务器进行单元测试？

> ID：12245624
> 
> 赞同：3
> 
> 时间：2012-09-03T09:57:57.110
> 
> 标签：unit-testing, node.js, rest, mongoose, express

我有一个使用 Express、Mongoose 和[config](https://github.com/lorenwest/node-config)的 REST API 服务器。我想对我的 API 进行单元测试。基本上，在端口 x 上启动一个临时 Web 服务器，在端口 y 上启动一个空的 mongo-database，执行一些 API 调用（gets 和 puts）并验证我返回的内容，然后在我的测试完成后关闭临时服务器并删除测试数据库. 做这个的最好方式是什么？我一直在研究[mocha](http://visionmedia.github.com/mocha/) / [rewire](http://jhnns.github.com/rewire/)但不确定如何设置临时服务器和数据库，也不确定最佳实践是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T02:26:11.113

我使用[Jenkins](http://www.jenkins-ci.org)（持续集成服务器）和[Mocha](http://www.mochajs.org)来测试我的应用程序，我发现自己遇到了和你一样的问题。我配置了 Jenkins，所以它会执行这个 shell 命令：

```
npm install
NODE_ENV=testing node app.js &
npm mocha
pkill node 
```

这将运行服务器以执行测试，然后将其杀死。这也设置了 NODE_ENV 环境变量，因此我可以在测试时在不同的端口上运行服务器，因为 Jenkins 已经使用端口 8080。

这是代码：

应用程序.js：

```
...
var port = 8080
if(process.env.NODE_ENV === "testing")
    port = 3000;
... 
```

测试.js：

```
var request = require('request'),
    assert = require('assert');

    describe('Blabla', function() {
      describe('GET /', function() {
        it("should respond with status 200", function(done) {
          request('http://127.0.0.1:3000/', function(err,resp,body) {
            assert.equal(resp.statusCode, 200);
            done(); 
          }); 
        }); 
      });
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:51:52.097

我找到了我正在寻找的东西：[testrest](https://github.com/DamonOehlman/testrest)。我不喜欢它基于 .txt 文件的语法——我适应了使用 .json 文件代替我的规范。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T10:01:52.810

我建议尝试一下[Buster.JS](http://busterjs.org/)。您可以进行异步测试、模拟/存根并启动服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T00:28:47.173

它还在[vows](https://github.com/cloudhead/vows)之上构建了[api-easy](https://github.com/flatiron/api-easy)，第一个似乎很容易使用，但第二个它非常灵活和强大

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-25T20:25:44.887

没有*正确的*方法，但我确实为我的个人目录结构创建了一个种子应用程序，并包含@norman784 建议的誓言测试。

你可以克隆它：`git clone https://github.com/hboylan/express-mongoose-api-seed.git`

或者使用 npm：`npm install express-mongoose-api-seed`

# php - Apache 和 PHP 的默认 windows 用户

> ID：12245625
> 
> 赞同：3
> 
> 时间：2012-09-03T09:58:08.737
> 
> 标签：php, apache, permissions

查看为 Windows XP 运行的进程，Apache (httpd.exe) 似乎在 SYSTEM 用户下运行。但我不知道使用什么用户来运行 PHP 脚本。这是使用 Xampp 的基本安装。

我正在尝试在目录上设置正确的权限（即“修改”），以便 php 脚本可以创建一个 txt 文件，然后写入它。

如果我使用的是 IIS，它将类似于“IIS_USER”。**Windows XP**的等效**Apache 用户**是什么？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:59:45.180

当 PHP 是 Apache 模块时，PHP 脚本作为 Apache 运行，因此这也意味着 PHP 的 SYSTEM。

等效的“apache 用户”问题有点误导：IIS_USER 仅存在是因为 IIS 的安装程序创建了该帐户。您可以自己创建一个具有任何名称的新用户帐户，并安排`httpd`以该用户身份运行（注意提供足够的权限）。**

# c# - 处理过程中发现错误 标头 (c#) + WS-Security 时间戳

> ID：12245627
> 
> 赞同：2
> 
> 时间：2012-09-03T09:58:12.063
> 
> 标签：c#, header, ws-security

我收到一条错误消息：

> “处理标头时发现错误”

当我尝试与 Web 服务通信时。

如何添加`"WS-Security Timestamp"`到肥皂请求中？

# mootools - 具有补间效果的鼠标滚动 [Mootools]

> ID：12245630
> 
> 赞同：0
> 
> 时间：2012-09-03T09:58:21.137
> 
> 标签：mootools, tween

我正在尝试做这样的鼠标滚动效果： [http](http://www.s5-style.com/#!/works) ://www.s5-style.com/#!/works (ClientWorks)

但我的问题是，mootools 没有一个很好的 Tween 类来做到这一点。然后，我有这个：http: [//jsfiddle.net/FU9Hp/](http://jsfiddle.net/FU9Hp/)

```
$('content').addEvent('mousemove', function(event)
{
        var padding = this.getPosition();
        var size =  this.getSize();
        var scrollpos =  this.getScroll();
        var scrollsize =  this.getScrollSize();
        var mouseX = (event.client.x-padding.x);

        var percent = Math.round(mouseX*100/(size.x));
        var scrollWidth = (scrollsize.x-size.x);

        this.scrollTo(Math.round(percent*scrollWidth/100), 0);  
}); 
```

我如何使用 Tween 类来实现 s5-style.com 的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:07:26.157

> 但我的问题是，mootools 没有一个很好的 Tween 类来做到这一点。然后，我有这个：

呃。mootools 有一个很棒的补间。它还有 Fx.Scroll 和 Fx.SmoothScroll 将补间绑定到滚动。

这是一个具有弹性过渡的滚动示例：http: [//jsfiddle.net/dimitar/FU9Hp/3/](http://jsfiddle.net/dimitar/FU9Hp/3/)

见[http://mootools.net/docs/more/Fx/Fx.Scroll](http://mootools.net/docs/more/Fx/Fx.Scroll)和[http://mootools.net/docs/more/Fx/Fx.SmoothScroll](http://mootools.net/docs/more/Fx/Fx.SmoothScroll)

# jquery - 谷歌地图自动完成框，shift+enter上的监听器

> ID：12245641
> 
> 赞同：-1
> 
> 时间：2012-09-03T09:59:27.123
> 
> 标签：jquery, google-maps, autocomplete

我对此进行了相当多的研究，并发现了任何东西。我是一个新手程序员，所以也许有一个解决方案，但我并没有真正注意到它。

我有一个谷歌地点自动完成框，我用它来让用户将地点添加到谷歌地图上。用户可以用箭头向下选择想要的位置，然后按回车键添加它。

我想要做的是让地图平移到用户按下 shift+enter 时选择的位置。我试过但无济于事。

这是自动完成框的原始侦听器：

```
google.maps.event.addListener(autoCompleteBox, 'place_changed', onPlaceChanged); 
```

这是我一直在尝试编辑它的方式：

```
google.maps.event.addListener(autoCompleteBox, 'place_changed', function(){
    if ($('#searchTextField').keyup(function (event) {
        if (event.keyCode == 13 && event.shiftKey) {
            var place= autoCompleteBox.getPlace();
            _map.setCenter(place.getPosition()); 
            console.log("logged shift enter");
        }
     });
else {
    onPlaceChanged();
} 
```

});

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:44:04.813

假设您的 autoCompleteBox 是 google.maps.places.Autocomplete 类的实例，该对象不会向 place_changed 事件的事件侦听器发送任何参数，因此您的事件对象可能只存在于 Internet Explorer 中，（因为在 IE 中它是全球的）。除此之外，如果地点已经改变并且触发了 place_changed 事件，则用户不再按下任何键。如果您想使用事件对象中包含的信息，那么您应该从头开始构建您自己的 autoCompleteBox，而不是使用 API 中的那个。可以肯定的是，请尝试`console.log("Fired")`在函数的第一行，在 if() 语句之前添加另一个。

# android - 使用 FrameLayout 将文本视图放在图像视图上

> ID：12245644
> 
> 赞同：2
> 
> 时间：2012-09-03T09:59:42.653
> 
> 标签：android, android-layout, android-relativelayout, android-framelayout

下面是我如何设计我的 xml。现在我试图在下面显示的白框中放置一个文本视图。但是受到 FrameLayout 的限制（至少我认为是这样），我需要对值进行硬编码以使文本视图适合中间或白框内的某个位置。我不能为此目的使用相对或其他布局，因为我已经通过我的试验了解到，因为这整个是一个单一的图像。

这是我的布局，

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content" android:layout_height="wrap_content"
    android:visibility="visible" android:layout_marginTop="60dip"
    android:layout_gravity="center" android:id="@+id/xxx">

    <ImageView android:id="@+id/calloutquizImage" 
        android:background="@drawable/callout" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:scaleType="fitCenter" />

    <ImageView android:id="@+id/triviaImage"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:layout_alignTop="@+id/calloutquizImage" android:layout_gravity="left"
        android:src="@drawable/trivia" android:background="@drawable/trivia"
        android:layout_marginTop="50dip" android:layout_marginLeft="85dip"></ImageView>

    <TextView android:text="TextView" android:id="@+id/triviAnswerText"
        android:layout_marginTop="125dip" android:layout_marginLeft="85dip"
        android:layout_gravity="left" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:textColor="#000000"
        android:typeface="sans"></TextView>

    <ImageButton android:id="@+id/triviaanswercloseButton"
        android:src="@drawable/closebtn" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:background="@drawable/closebtn"
        android:layout_marginRight="8dip" android:layout_marginTop="43dip"
        android:layout_gravity="right" android:onClick="triviaanswerClose"></ImageButton>
    <ImageView android:id="@+id/buttontoclose"
        android:layout_gravity="left"
        android:visibility="visible" android:onClick="triviaanswerClose" 
        android:layout_marginTop="50dip" android:layout_marginLeft="75dip"
        android:layout_width="230dip" android:layout_height="170dip"></ImageView>
</FrameLayout> 
```

因此，文本视图在各种手机中的不同位置看起来。

任何猜测可以为此做些什么？

下面是我的图片：

![在此处输入图像描述](../Images/3e564eaee035ea786aabfef5c99be56e.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T10:05:50.130

我认为你没有做正确的事。如果您希望文本出现在白框内（或者甚至调整它的大小，如果有很多文本适合它） - 您仍然可以避免任何布局广告**只使用一个**TextView。

请看看什么是**`NinePatch`**Android 中的图像：http: [//developer.android.com/reference/android/graphics/NinePatch.html](http://developer.android.com/reference/android/graphics/NinePatch.html)

[http://developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html) - 绘图工具

所以基本上你只需要 1 个 textView 和你的图像，正确转换为 9-patch 和第二个链接。（基本上 - 只需在图像边框上添加一些黑色像素）。不，只是将这个 9-patch 设置为 textView 的背景。它会将文本放置在您需要的位置，如果您在 9-patch 中定义，它将缩小白框。

**UPD：** 请找到生成的屏幕截图： ![在此处输入图像描述](../Images/065ecdcaf72acf762187d6aa81c3865f.png)

如您所见，textView 本身不处理 WhiteBox"，而是用文本填充它并在必要时调整框的大小。

以下是如何使其工作：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent">

    <TextView
        android:id="@+id/first"
        android:background="@drawable/back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Manymanymany text 
        Manymanymany text 
        Manymanymany text 
        Manymanymany text 
        Manymanymany text 
        Manymanymany text" />

    <TextView
        android:layout_below="@+id/first"
        android:background="@drawable/back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Not so many text" />
</RelativeLayout> 
```

这是您的图像，转换为 9patch。只需将其放入“drawable/”文件夹即可。注意：它必须有“back.9.png”的名字。 ![在此处输入图像描述](../Images/e696e2be41c20a5434fd273d278f9ba3.png)

有关 9patch 如何工作的详细信息，您可以查看上面的链接。主要思想：通过在左侧和顶部边框上制作黑点 - 您指定在必须放大图像时将拉伸图像的哪个部分。通过在右侧/底部制作点，您可以告诉视图放置内容的位置。在我们的例子中，内容是 TextView 的文本。

希望对你有帮助，祝你好运

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T10:06:27.587

我认为您可以`RelativeLayout`在`FrameLayout`for`ImageView`和 the中使用 a `TextView`，并且通过使用参数，您可以将 导航`TextView`到白框。有关详细信息，请参阅[LayoutParams 文档](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)。

例如。您可以`ImageView`先添加块，然后添加`TextView`，以便`TextView`将覆盖`ImageView`，并通过使用底部对齐，并使用负值指定上边距，您可以`TextView`遍历图像。或者更确切地说，如果您使用的是eclipse，您可以直接在图形布局中移动文本视图。

```
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/tools"
    android:id="@+id/xxx"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginTop="0dp"
    android:visibility="visible" >

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margintop="0dp" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/user2" />
        <TextView
            android:id="@+id/Textviewtitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/hello_world"
            android:layout_below="@+id/imageView1"
            android:layout_marginTop="-10dp"
            app:context=".TestActivity" />

    </RelativeLayout>
 </FrameLayout> 
```

与上面类似，您可以指定左右边距以根据需要正确定位`TextView`。检查图形布局以获取反馈以了解正确的位置。如果这有帮助，请回复。

使用您的图像和值作为高度和宽度。我只是尝试测试。

# sql - SSIS - 带有包含转换的 SQL 语句的数据源

> ID：12245653
> 
> 赞同：1
> 
> 时间：2012-09-03T10:00:36.913
> 
> 标签：sql, ssis

我创建了一个 SQL OLEDB 数据源 (SQL Server)，并且我有以下命令文本：

```
select replace(convert(varchar(10), dob, 111), '/', '-') As DOB FROM Person 
```

我在执行时收到一条警告：[OLE DB Source [1]] 警告：由于从长度为 8000 的数据库列“DOB”到长度为 10 的数据流列“DOB”中检索数据，可能会发生截断。

当我尝试将外部列从 8000 更改为 10（如查询中所述）时，设计器会自动将其更改回来。我认为外部列代表数据源中的元数据。数据源中的 dob（参见上面的查询）是一个 varchar(10)。为什么它必须有8000的长度？我对SSIS没有很多经验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T10:15:50.257

我找到了解决方案。我不得不这样做：

```
select cast(replace(convert(varchar(10), dob, 111), '/', '-') As varchar(10)) As DOB from Person 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T07:40:20.207

还有另一种解决方法可以解决这个问题：您可以忽略错误并通过在“源”块的“错误输出”选项卡中设置适当的属性来执行“截断”错误中的包。

# javascript - 如何对知道行位置的表格进行排序？

> ID：12245658
> 
> 赞同：0
> 
> 时间：2012-09-03T10:01:17.867
> 
> 标签：javascript

我有一张桌子：

```
<table>
    <tr><td>1</td></tr>
    <tr><td>2</td></tr>
    <tr><td>3</td></tr>
</table> 
```

一个数组，它告诉每一行应该到哪里`[{index: 2},{index: 1},{index: 0}]`（第一行是数组的最后一行，第二行是`1`数组，第三行`0`是数组）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:02:41.063

这是我的方法。

```
// create a new temporary tbody outside the DOM (similar to jQuery's detach)
var tbody_tmp   = document.createElement('tbody');

// itterate through the array in the order of a new table
for(var i = 0, j = data.length; i < j; i++)
{
    // make a copy of current row (otherwise, append child removes the row from the rows array and messes up the index-finder; there got be a better way for this)
    var row     = rows[data[i].index].cloneNode(true);

    tbody_tmp.appendChild(row);

    // reset the index to reflect the new table order (optional, outside the sample)
    data[i].index   = i;
}

// Note that tbody is a jquery object
tbody.parent()[0].replaceChild(tbody_tmp, tbody[0]); 
```

不过，克隆方法很慢。拥有 10,000 多条记录需要约 1200 毫秒。此外，最好使用无 jQuery 的方法。

发布此内容以防其他人可能会发现它足够简单以满足他们的需求（少于 1,000 行）。

* * *

经过数小时的焦躁思考，我得出了以下结论。如果这个示例还不够，我已经写了一篇完整的博客文章来解释它背后的逻辑，[http://anuary.com/57/sorting-large-tables-with-javascript](http://anuary.com/57/sorting-large-tables-with-javascript)。

```
// Will use this to re-attach the tbody object.
var table       = tbody.parent();

// Detach the tbody to prevent unnecessary overhead related
// to the browser environment.
var tbody       = tbody.detach();

// Convert NodeList into an array.
rows            = Array.prototype.slice.call(rows, 0);

var last_row    = rows[data[data.length-1].index];

// Knowing the last element in the table, move all the elements behind it
// in the order they appear in the data map
for(var i = 0, j = data.length-1; i < j; i++)
{
    tbody[0].insertBefore(rows[data[i].index], last_row);

    // Restore the index.
    data[i].index   = i;
}

// Restore the index.
data[data.length-1].index   = data.length-1;

table.append(tbody); 
```

# c++ - C++ const 引用向量（或其他动态容器）中的类变量

> ID：12245661
> 
> 赞同：1
> 
> 时间：2012-09-03T10:01:34.393
> 
> 标签：c++, vector, reference, constants, containers

这里非常具体的问题！

我有一个类，其中包含有关行星的数据。例如，它有一个向量 (double x, double y, double z) 来保存它的位置，还有一个 double 变量来保存它的半径。

我经常使用引用来获得对私有变量的“只读公共访问”。我调用 setter 方法来更改私有变量。

但是，我认为在向量或列表等动态容器中不允许这样做。

我已经尝试过“常量常量”指针，一旦在初始化列表中初始化了这个想法，它们将无法指向其他任何东西或修改变量。但同样的错误信息出现在编译时。

消息是这样的：“错误：非静态 const 成员`const double* const x`，不能使用默认赋值运算符”

因此，当我对向量执行“push_back”时，复制类会出现问题 - 对吧？

这是一个示例代码：

```
class planet{

    private:

        double _radius;

    public:

        // Constructor
        planet() : rad(_radius){
           _radius = 0.0f;
        }

        // This is a setter method - works fine
        void setrad(double new_rad){
            _radius = rad;
        }

        // This is a better solution to the getter method
        // - does not seem to work with dynamic containers!
        const double& rad; // This is initialized in the constructor list
};

int main(...){

...

    std::vector<planet> the_planets;
    planet next_planet_to_push;
    next_planet_to_push.setrad(1.0f);

    // This causes the error!
    the_planets.push_back(next_planet_to_add);

...

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:04:58.803

您需要为包含成员引用或`const`成员（在您的情况下为两者）的类提供您自己的复制构造函数和赋值运算符。

编译器生成的将尝试做一个浅拷贝，这在这种情况下是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:05:12.747

`std::vector`需要`operator=`才能工作。默认`operator=`只分配每个成员。它不能为`const &`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T10:06:29.553

实际上， a 的元素`std::vector`必须是可赋值的，因此它们不能包含 const 或引用成员。

但是为什么不拥有一个简单的访问器*函数*：

```
double rad() const { return _radius; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T10:07:09.943

仅仅公开半径有什么问题？

如果 setter 所做的一切都是`this->radius = some_other_radius`，则代码没有任何好处：添加提供语言已经提供的功能的代码是否值得？

# javascript - 将纯 javascript 代码重写为使用 jQuery 的代码

> ID：12245663
> 
> 赞同：-4
> 
> 时间：2012-09-03T10:01:42.560
> 
> 标签：javascript, jquery

我有一个不依赖外部库的纯 JavaScript 代码。但是鉴于 jQuery 的流行以及 jQuery 已经成为事实上的标准这一事实，我想知道为了将来的维护和扩展而重写整个代码是否有意义。即使目前我的纯 javascript 代码没有特别问题，这样做是否有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:04:29.380

取决于代码库的大小。如果这是一项非常大的工作，那么“如果它没有损坏，就不要修复它”适用。如果它很小，那么它可能有助于使事情更加一致。

然而，混合 jquery 和标准 javascript 本身并没有什么害处，所以任何新的东西都可以使用 jquery 编写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:06:34.660

只有当我可以利用 jQuery 使我的代码更小、更易于维护时，我才会这样做。

jQuery 只是用 vanilla JavaScript 编写的函数，因此我们不必自己编写它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T10:24:57.680

我认为这个问题没有一个简单的答案。

我的想法：这取决于。Jquery 可以帮助您更快地开发新功能，所以也许它可以很好地用于未来的功能。如果您的应用程序很大，如果您一次重写大部分应用程序，可能会导致不稳定。也许您会发现一些特别受益于用 jquery 编写的部分，并随着时间的推移逐一重构这些部分？由于 javascript 是 Jquery 的基础，即使 Jquery 过时，javascript 也会存在，所以保留它也不会那么糟糕。您的主要关注点应该是用户；让他们对您的应用程序感兴趣并提供新功能，让他们继续使用您的应用程序。很少有用户会关心甚至注意到您是否引入了新库，但如果您的应用程序出现故障，他们会知道。

旁注：这些天我想知道是否有人知道他们明年将使用什么语言/库？

# css - 如何在 FF 和 IE7/IE8 中使表格固定宽度

> ID：12245672
> 
> 赞同：0
> 
> 时间：2012-09-03T10:02:34.463
> 
> 标签：css, html, width, tablelayout

我正在使用[这个免费的 html 模板](http://freehtml5templates.com/minimalism-html5-and-css3-template/)来创建一个显示有关 Web 应用程序的一些信息的页面。请参阅此 JsFiddle 以供参考： [//jsfiddle.net/wx3Gz/1/](http://jsfiddle.net/wx3Gz/1/)

问题是主要内容的三列中的表格。我想将表格设置为与每个列（274px）相同的宽度，并且内容应该自动排列在其中。

对于第一个表，我希望第二列的宽度与内容需要的一样宽，然后第一列应该占据剩余的可用宽度并用省略号溢出。

我已经尝试过的任何事情（在表格上设置 display: block，使用 tabley-layout: fixed）都会导致表格的所有列都具有相同（错误）的宽度，或者在大多数情况下导致内容溢出列。

完美的解决方案是将三个组元素中的所有表格格式化为最大宽度，并允许在列（即第 th 个元素）上设置一个 css 类，该类应该在列变宽的地方显示省略号）。一个几乎完美的解决方案将需要每个单元格上的 css 类。

我需要它在 Firefox 和 IE7/8 中工作。理想情况下还有 IE9 和 Chrome。

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:40:32.003

尝试`max-width`在表格单元格上设置 a 而不是直接在表格上：

```
td {
    max-width: 200px;
}
td div, td {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
} 
```

[这是您的代码的修改版本](http://jsfiddle.net/robertc/wx3Gz/9/)。我不在 Windows 上，所以我无法检查 IE。`

# jquery - Datepicker 日期时间格式问题。如果更改本地系统日期格式，行为会发生变化

> ID：12245677
> 
> 赞同：0
> 
> 时间：2012-09-03T10:02:46.197
> 
> 标签：jquery, asp.net-mvc-3

我是 MVC3 的新手，正在为我的公司做一项评估工作。今天，我被 MVC3 中的日期格式困住了。

我有一个具有以下方法的模型类

```
[DataType(DataType.Date)]
[Display(Name = "Date Of Birth")]
[DisplayFormat(DataFormatString = "{0:dd-MM-yyyy}", ApplyFormatInEditMode = true)] 
public DateTime? DOB { get; set; }

[DataType(DataType.Date)]
[Display(Name = "Date Of Joining")]
[DisplayFormat(DataFormatString = "{0:dd-MM-yyyy}", ApplyFormatInEditMode = true)] 
public DateTime? DOJ { get; set; } 
```

在我看来，我调用了一个 jquery 内置函数 Datepicker

```
<script language="javascript" type="text/javascript">
    $(function () {
        $("#DOB").datepicker({
                                 changeMonth: true,
                                 changeYear: true,
                                 yearRange: "1942:2099",
                                 dateFormat: 'dd/mm/yy' 
                            });
        $("#DOJ").datepicker({
                                 changeMonth: true,
                                 changeYear: true,
                                 yearRange: "2010:2099",
                                 dateFormat: 'dd/mm/yy' 
                            });
    });
</script> 
```

如果我的本地系统日期格式为“dd-mm-yyyy”格式，则此代码工作正常，但如果我在本地系统中以任何其他格式更改日期格式，则开始抛出错误。

我的问题是，我怎样才能使它成为通用日期时间格式，以便在部署后不会抛出错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:45:01.667

听起来问题与文化设置有关。我对日期格式有类似的问题，我通过在 web.config 的`<system.web>`部分添加这些行来解决它

```
<globalization requestEncoding="utf-8" responseEncoding="utf-8" culture="en-GB" uiCulture="en-GB"/> 
```

希望能帮助到你！！

# actionscript-3 - 在 as3 中上传文件到服务器

> ID：12245682
> 
> 赞同：0
> 
> 时间：2012-09-03T10:03:16.243
> 
> 标签：actionscript-3, apache-flex, file-upload, air

as3如何将文件上传到服务器？我不想使用 FileReference.browse() 浏览文件。我尝试使用 URLLoader 获取文件并转换为 byteArray，但是当我使用 URLVariables 将其发送到服务器时，它给出了 IOError=2032。我想更新服务器上的数据库。结构就像 email (string) sqlite_db (Blob)

我必须在一个请求中发送这两个变量。任何想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:19:17.277

通过使用[UploadPostHelper](http://marstonstudio.com/2007/10/19/how-to-take-a-snapshot-of-a-flash-movie-and-automatically-upload-the-jpg-to-a-server-in-three-easy-steps/) ，上传过程变得更加容易，这是一个创建多部分数据表单的好类：

```
ByteArray byteArray = [YOUR FILE DATA];

var urlRequest : URLRequest = new URLRequest();
urlRequest.url = 'http://your.server.com/destination';
urlRequest.contentType = 'multipart/form-data; boundary=' + UploadPostHelper.getBoundary();
urlRequest.method = URLRequestMethod.POST;
urlRequest.data = 
    UploadPostHelper.getPostData( 
        'filename.ext', 
        byteArray, 
        { 
            email:"emailParameter", 
            other:"otherParameter" 
        } );
urlRequest.requestHeaders.push( new URLRequestHeader( 'Cache-Control', 'no-cache' ) );

// create a loader & send the file to the server;
var urlLoader : URLLoader = new URLLoader();
urlLoader.dataFormat = URLLoaderDataFormat.BINARY;
urlLoader.load( urlRequest ); 
```

当然，您可以收听完整的事件并从您的服务器传回任何信息。希望有帮助。

# c++ - 在 OpenGL 中为顶点、uvs 和法线使用一个缓冲区是否比使用三个更好？

> ID：12245687
> 
> 赞同：1
> 
> 时间：2012-09-03T10:03:55.060
> 
> 标签：c++, opengl, buffer

我发现将这些元素保存在单独的缓冲区中会更干净、更容易，但我想知道将它们全部放在一个大缓冲区中是否会更好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T10:09:27.147

使用多个缓冲区的优点是您可以轻松地为某些特殊渲染禁用一个（例如，仅深度不需要法线或纹理坐标）。

但是，将所有属性交错存储在一个数组中可以在渲染时提供更好的缓存局部性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T10:13:19.653

我们正在谈论数组结构或结构数组及其效率。在大多数情况下，结构数组更有效，因为它可以更好地利用处理器缓存，但这假设您将按照它们在内存中的顺序访问数据。

但是，如果您的某些数据以与其他数据不同的速率刷新，则将它们放在不同的缓冲区中会很有好处，这样您就可以只更新需要更新的数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-03T10:10:59.737

根据[OpenGL 维基](http://www.opengl.org/wiki/VBO_-_more)，

> 如果您使用单独的 VBO，您不会损失太多性能。它大约为 5%，但您的测试可能会显示其他结果。

我不知道此语句是否仅适用于动态数据，但在我的引擎中我使用单独的 VBO。

# java - 列表 串起来

> ID：12245693
> 
> 赞同：2
> 
> 时间：2012-09-03T10:04:33.283
> 
> 标签：java

我的课看起来像：

以下代码位于 MethodCall 类下：

```
public static class InnerValue {
  @XmlElementRef(name = "string", type = JAXBElement.class)
  @XmlMixed
  protected List<Serializable> content;

  public List<Serializable> getContent() {
    if (content == null) {
      content = new ArrayList<Serializable>();
    }
    return this.content;
  }
} 
```

当我尝试调用 Innervalue 的`getContent`方法时，它返回对象，当我尝试将对象转换为字符串时，我失败了。

我使用以下代码将其从 Object 转换为 String，但它仍然显示 Object。

```
System.out.println(MethodCall.getContent.toSting()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:24:05.140

该调用`System.out.println(MethodCall.getContent().toSting());`甚至不会编译。如果编译成功，那么您`getContent()`的 MethodCall 类中有一个静态方法，这就是被调用的方法。

您问题中的方法`getContent()`方法不是静态的，因此您需要其类的实例来调用它，如下所示：

```
InnerValue innerValue = new InnerValue();
System.out.println(innerValue.getContent()); 
```

当你这样做时，不要忘记导入：

```
import <yourpackagename>.MethodCall.InnerValue; 
```

然而，创建这样的`InnerValue`实例没有多大意义，因为内容列表不可避免地会是空的......

* * *

* * *

**至于如何打印 list 的内容**，请考虑以下示例：

```
 class SerializableImpl implements Serializable {
        private static final long serialVersionUID = 1L;
    };

    List<Serializable> list = new ArrayList<Serializable>();
    list.add(new SerializableImpl());

    System.out.println(list); 
```

使用此代码，我将获得输出：

```
[test.MyTestClass$1SerializableImpl@1befab0] 
```

这是意料之中的，因为 ArrayList 实现会调用`toString()`列表中的每个条目。但是由于我们没有`toString()`为 class 定义 a ，所以会调用class`SerializableImpl`中的默认`toString()`方法。`Object`我们如何解决这个问题？考虑上面代码的替代方案：

```
 class SerializableInteger implements Serializable {
        private static final long serialVersionUID = 1L;
        private int value;

        public SerializableInteger(int value){
            this.value = value;
        }

        public String toString(){
            return "value = " + value;
        }
    };

    List<Serializable> list = new ArrayList<Serializable>();
    list.add(new SerializableInteger(42));

    System.out.println(list); 
```

现在会发生什么？嗯...因为我们`toString()`为类定义了一个方法`SerializableInteger`，该方法将被调用，我们将收到输出：

```
[value = 42] 
```

* * *

**因此，总而言之：**当您调用`toString()`a`List`时，`toString()`将调用列表中条目的方法。因此，如果您想要可读的输出，请确保您添加到列表中的所有对象都`toString()`定义了方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:01:57.900

尝试

```
System.out.println(MethodCall.getContent()+""); 
```

# c# - 错误显示对象引用未设置为对象的实例？

> ID：12245696
> 
> 赞同：0
> 
> 时间：2012-09-03T10:04:50.690
> 
> 标签：c#, .net

我是 C# 和 Web 服务的新手...当我调试它在浏览器上运行的登录编码时，但是当输入登录按钮时，它显示错误 Object reference not set to an instance of an object with source error，如下所示：

```
{

   SqlConnection DBConn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["ASPNETDBConnectionString"].ConnectionString);
    try
    { 
```

是否存在与数据库连接丢失或错误的语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:06:38.147

您没有带有`ASPNETDBConnectionString`名称的连接字符串，这就是您收到此错误的原因。在使用它之前检查`null`它。

```
if(System.Configuration.ConfigurationManager.ConnectionStrings["ASPNETDBConnectionString"] != null)
         SqlConnection DBConn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["ASPNETDBConnectionString"].ConnectionString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:16:46.313

```
firstly add connection string to web config file as follows:

***<configuration>
    <system.web>
        <compilation debug="true" targetFramework="4.0"/>
    </system.web>
    <connectionStrings>
        <add name="key" connectionString="....." providerName="System.Data.SqlClient"/>
    </connectionStrings>
    </configuration>***

then add namespace to .cs page 

> using System.Configuration;

then create a connection string on page as:-
 ***cn = new SqlConnection();
        cn.ConnectionString = ConfigurationManager.ConnectionStrings["key"].ConnectionString;*** 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T10:06:53.560

1 添加对 System.Configuration 的引用

2 验证 App.Config 或 Web.Config 中是否存在 ASPNETDBConnectionString 字符串连接

注意：您的配置文件中必须有此部分 ASPNETDBConnectionString

```
<connectionStrings>
  <add 
    name="ASPNETDBConnectionString" 
    connectionString="Data Source=serverName;Initial 
    Catalog=...;Persist Security Info=True;User 
    ID=userName;Password=password"
    providerName="System.Data.SqlClient"
  />
</connectionStrings> 
```

# c# - C# 控制台应用程序在 Windows Server 上无法正常工作（在 win XP 和 win 7 上工作正常）

> ID：12245697
> 
> 赞同：2
> 
> 时间：2012-09-03T10:04:54.967
> 
> 标签：c#, windows

我的申请有很大的问题`windows server 2008 R2.`

该应用程序可以运行`.NET framework 3.5`，据我所知，windows server 2008 R2 包含这样一个框架。

应用程序本身非常庞大，它是一个服务器程序，用于记录员工的工作时间，通过条形码扫描仪，然后将其存储在 . `xml`文件，它也会`update.xml`每隔几分钟从文件中更新一次。

为了避免让这个应用程序一直处于焦点，我使用了一些方法来捕获按键而不关注应用程序。

所以对于我的问题，应用程序正在正确启动，它也在正确读取代码并识别它们，但应用程序显然在“break：”和“return”方面存在问题，它根本没有在里面启动我的方法之一我的程序。（这是没有任何参数的简单静态 void 方法）

我是否必须重写整个程序以使其在不调用方法和所有中断和返回的情况下工作？或者是什么问题。这对我来说很重要，截止日期或多或少是今天。我还可以补充一点，这个应用程序在其他电脑上运行良好，当我在我的电脑上调试它时，它也能按预期工作。

我不会在这里发布整个代码，它太庞大了，但我可以发布其中的一部分来帮助你们。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using System.Windows.Forms;
using System.Xml.Serialization;
using System.Xml;
using System.IO;
using System.Threading;
using System.Data;
using System.Diagnostics;
using System.Runtime.InteropServices;
using System.Security;
using System.Security.Permissions;
using Microsoft.Win32;
using System.Reflection;
using System.Security.AccessControl;

    static void Main()
    {
        var handle = GetConsoleWindow();
        ShowWindow(handle, SW_HIDE);
        appPath = Path.GetDirectoryName(Application.ExecutablePath);

        if (AutoStarter.IsAutoStartEnabled == false)
        {
            AutoStarter.SetAutoStart();
        }

        if (!Directory.Exists(appPath+"\\Raporty"))
        {
            Directory.CreateDirectory(appPath + "\\Raporty");
        }

        if (!File.Exists(appPath+"\\settings.jsn"))
        {
        utworzsetting();
        }
        sprawdzostatniawersje();
        uaktualnij();
        _hookID = SetHook(_proc);
        Application.Run();
        UnhookWindowsHookEx(_hookID);
     }

    private delegate IntPtr LowLevelKeyboardProc(
    int nCode, IntPtr wParam, IntPtr lParam);

    private static IntPtr HookCallback(
        int nCode, IntPtr wParam, IntPtr lParam)
    {
        if (nCode >= 0 && wParam == (IntPtr)WM_KEYDOWN)
        {
            int vkCode = Marshal.ReadInt32(lParam);

            switch (vkCode)
                {
                   case 48:
                     wiersz = "";
                     break;
                   case 49:
                     wiersz += "1";
                     break;
                   case 50:
                     wiersz += "2";
                     break;
                   case 51:
                     wiersz += "3";
                     break;
                   case 52:
                     wiersz += "4";
                     break;
                   case 53:
                     wiersz += "5";
                     break;
                   case 54:
                     wiersz += "6";
                     break;
                   case 55:
                     wiersz += "7";
                     break;
                   case 56:
                     wiersz += "8";
                     break;
                   case 57:
                     wiersz += "9";
                     break;
                   case 13:
                     if (wiersz != null) 
```

几个“如果”

最后

```
 if (aktualneID != -1) // Jezeli ID znajduje sie bazie danych
                         {
                             // MySettings settings = MySettings.Load(appPath + "\\settings.jsn");
                             if (settings.limit == true && lPracownik[aktualneID].Dni.Count != 0)
                             {
                                 czymoze();
                                 if (niemoze == false)
                                 {
                                     Console.WriteLine("z limitem");
                                     asdf();
                                     Console.WriteLine("nie wywolalem metody");
                                 }
                             }
                             else
                             {
                                 Console.WriteLine("bez limitu");
                                 asdf();
                                 Console.WriteLine("nie wywolalem metody");
                             }
                         }
                     }
                            wiersz = "";
                            zapiszbaze();
                     break;
                   default:
                     break; 
```

这就是问题所在，应用程序到了这一刻`"Console.WriteLine("bez limitu");"`，就是这样，它没有启动 " `asdf`" 方法，它也没有运行 wiersz = "";

如果您还有任何问题，我将不胜感激任何帮助，希望我指定一些事情只是告诉。

PS。我正在使用`VS 2010 Express`，如果您认为可以帮助我，我可以将整个解决方案发送给您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:48:12.037

问题解决了，这是 .NET 框架故障，我已经在服务器上重新安装了它，一切都像一个魅力。

# jquery - 使用 jquery fancybox 弹出图像不工作

> ID：12245699
> 
> 赞同：0
> 
> 时间：2012-09-03T10:05:07.817
> 
> 标签：jquery

```
$(".fancybox").fancybox({
    openEffect  : 'fade',
    closeEffect : 'fade',
    nextEffect  : 'fade'

}); 
```

上面的代码在弹出框中显示图像列表，但我只想显示其中的前六个，所以我尝试如下

```
$(".fancybox").fancybox({
    i : 1,
    if (i<=6) :{
    openEffect  : 'fade',
    closeEffect : 'fade',
    nextEffect  : 'fade'
    },
    i++,
}); 
```

但它没有用....任何帮助....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:15:11.433

你可以像下面这样

```
$('.fancybox').each(function(index,ele) {
    if(index < 6)
        $(ele).fancybox({openEffect:'fade',closeEffect:'fade',nextEffect:'fade'});
}); 
```

# menu - Cocos2d：有没有办法访问 CCMenu 子项？

> ID：12245702
> 
> 赞同：0
> 
> 时间：2012-09-03T10:05:16.807
> 
> 标签：menu, cocos2d-iphone, menuitem, switching

我正在使用以下代码：

```
CCMenuItemFont *controllerItem = [CCMenuItemFont itemFromString:@"Analog" target:self selector:@selector(controllerToggle)];

    CCMenu *controllerTypeMenu = [CCMenu menuWithItems:controllerItem, nil];
    [controllerTypeMenu alignItemsVerticallyWithPadding:30.0f];
    controllerTypeMenu.position = CGPointMake(160.0f, 240.0f);
    [self addChild:controllerTypeMenu z:0 tag:ControllerMenu];
}  

-(void) controllerToggle
{
    CCMenuItemFont *controllerItem = [self getChildByTag:888];
    NSString * text = [NSString stringWithFormat: @"switching.. %f", CCRANDOM_0_1()];
    [controllerItem setString:text];
} 
```

在 controllerToggle 我想访问 controllerItem 并将 String 更改为另一个值。这可能吗？我检查并 CCMenu 添加了基于数组顺序的 CCMenuItems 作为子项。但这不是一个优雅的解决方案。出于同样的原因，我无法将 CCMenuItem 添加到场景中，因为它会给我“孩子已添加错误”。所以我觉得我应该写自己的“开关”按钮，但我想知道那里是否已经有东西了..

有什么帮助吗？？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:26:47.040

您可以将所需的菜单项声明为类成员。通过这种方式，您将能够随时访问它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T07:59:53.113

已经有 CCMenuItemToogle 用于在单击事件时切换任何菜单项的标题或图像。您可以使用 CCMenuItemToggle 代替 CCMenuItem。

这是一个示例代码 CCmenuItemToggle *cam=[CCMenuItemToggle itemWithTarget:self selector:@selector(openCameraController) items:cameraOn,cameraOff, nil]; 其中 cameraOn 和 cameraOff 是两个简单的 CCMenuItemImage ，它被添加到 CCMenuItemToggle 中，并且这个 CCmenuItemToggle 被添加到菜单中。

现在，每次单击 CCMenuItemToggle 时，同一个菜单项都会有一个 cameraOn 和 cameraOff 状态。

希望这会有所帮助...

# delphi - delphi WSDL 导入器有问题

> ID：12245703
> 
> 赞同：5
> 
> 时间：2012-09-03T10:05:18.320
> 
> 标签：delphi, wsdl, soap-client

我正在导入第三方提供的 WSDL。但我没有成功使用 delphi WSDL 导入器。当我导入 WSDL 时，delphi WSDL 导入器会从 WSDL 文件中隐藏类的实现。WSDL 文件包含一些接受对象作为参数的函数。导入 WSDL 后，delphi 出现错误，因为一些变量未声明，它们实际上是类的对象，其定义被 WSDL 导入器隐藏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:23:40.817

我没有个人经验，但[Free Pascal Web Service Toolkit](http://wiki.freepascal.org/Web_Service_Toolkit)似乎正在积极开发中。它与 Delphi 兼容，可用于创建 Web 服务客户端和服务器。

它包括一个 WSDL 导入器，既作为命令行实用程序又作为“向导”。它还有一个基于 WSDL 的类型库编辑器。

该工具包使用 FPCUnit 进行测试用例。对于 Delphi，使用 DUnit。

# javascript - 如何在“drop”事件中获取“ui.draggable”的原始位置？

> ID：12245704
> 
> 赞同：1
> 
> 时间：2012-09-03T10:05:20.647
> 
> 标签：javascript, jquery, jquery-ui, draggable

我将“可拖动”对象拖动到“可放置”对象。我想知道该位置是否已经有东西。我已经这样做了（没有 jQuery UI）。

1.  我可以用 jQuery UI 以某种方式做到这一点吗？

2.  如果已经存在对象，则拖动的对象必须恢复到原始位置。如何获得`ui.draggable`“drop”事件中的原始位置？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:24:18.350

看看以下，这可能会有所帮助

```
$(document).ready(function() {
    var x;
    var y;
    $("#div1").mousedown(function(e) {
        var pos = $(this).offset();
        x = e.pageX - pos.left;
        y = e.pageY - pos.top;
        //alert(x + "," + y);
        $("#drag").show().css({
            top: y,
            left: x
        });
        $("#drag").draggable();
    });
    $("#div1").mouseup(function(e) {
        var pos = $(this).offset();
        var a = e.pageX - pos.left;
        var b = e.pageY - pos.top;
        alert("Start-Top:" + y + "Start-Left" + x + "End-Top" + b + "End-Left" + a);
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:30:40.113

[如果在此 div 之外和其他可拖动对象内部（使用无效和有效的还原选项），](https://stackoverflow.com/questions/6071409/draggable-revert-if-outside-this-div-and-inside-of-other-draggables-using-both/6087928#6087928)您可以从上一篇文章中找到答案Draggable revert

演示在这里[http://jsfiddle.net/htWV3/1/](http://jsfiddle.net/htWV3/1/)

# android - 在 Android 中创建 GameLoop

> ID：12245706
> 
> 赞同：0
> 
> 时间：2012-09-03T10:05:32.653
> 
> 标签：android, multithreading, surfaceview, game-loop, surfaceholder

我正在此应用程序中创建与 GameLoop 相关的应用程序，如果用户单击屏幕，则在屏幕上绘制图像并且它以随机速度和随机方向在屏幕上移动。在代码中没有错误但是当我尝试运行该应用程序时，我最终遇到了强制关闭错误。

这是我的源代码：

源代码：`GameLoop.java`

```
public class GameLoop extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(new Sview(this));
}
} 
```

源代码：`Sview.java`

```
public class Sview extends SurfaceView implements Callback{

Bitmap bmp;
public static float mHeight;
public static float mWidth;
ViewThread mThread;
private ArrayList<elements> mElements=new ArrayList <elements>();
Paint p1;

public Sview(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
    mThread = new ViewThread();
    getHolder().addCallback(this);
}

@Override
public boolean onTouchEvent(MotionEvent event)
{
    synchronized (mElements) {
        mElements.add(new elements(getResources(), (int)event.getX(), (int)event.getY()));
    }
    return super.onTouchEvent(event);
}

public void update(long elapsed)
{
    synchronized (mElements)
    {
        for(elements el : mElements)
        {
            el.animate_ele(elapsed);
        }
    }
}

public void mydraw(long elapsed, Canvas c)
{
    c.drawColor(Color.BLACK);
    synchronized (mElements)
    {
        for(elements el : mElements)
        {
            el.draw_ele(c);
        }
    }
    c.drawText("FPS: "+Math.round(1000f/elapsed), 40, 40, p1);
}

public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    // TODO Auto-generated method stub
    mHeight = height;
    mWidth = width;
}

public void surfaceCreated(SurfaceHolder holder) {
    // TODO Auto-generated method stub
    if(!mThread.isAlive())
    {
        mThread.setRun(true);
        mThread.start();
    }
}

public void surfaceDestroyed(SurfaceHolder holder) {
    // TODO Auto-generated method stub
    if(mThread.isAlive())
    {
        mThread.setRun(false);
        mThread.stop();
    }
}
} 
```

源代码：`ViewThread.java`

```
public class ViewThread extends Thread{

private Sview myView;
private SurfaceHolder mHolder;
private boolean mRun = false;
private long StartTime, elapsed;

public View Thread (Sview sv)
{
    myView = sv;
    mHolder = myView.getHolder();
    return sv;
}

public void setRun(boolean b)
{
    mRun = b;
}

@Override
public void run()
{
    Canvas can = null;
    StartTime = System.currentTimeMillis();
    while(mRun)
    {
        can = mHolder.lockCanvas();
        if(can!=null)
        {
            myView.update(elapsed);
            myView.mydraw(elapsed, can);
            elapsed = System.currentTimeMillis() - StartTime;
            mHolder.unlockCanvasAndPost(can);
        }
        StartTime = System.currentTimeMillis();
    }

}
} 
```

源代码：`elements.java`

```
public class elements {

private int mx, my, mspeedx, mspeedy;
Bitmap bmp1;

public elements(Resources res, int x, int y)
{
    bmp1 = BitmapFactory.decodeResource(res, R.drawable.ic_launcher);
    mx = x;
    my = y;
    Random r1 = new Random();
    mspeedx = r1.nextInt(7)-3;
    mspeedy = r1.nextInt(7)-3;
}

public void draw_ele(Canvas c)
{
    c.drawBitmap(bmp1, mx, mx, null);
}

public void animate_ele(long elapsed)
{
    mx+=mspeedx*(elapsed/50f);
    my+=mspeedy*(elapsed/50f);
    checkborder();
}

private void checkborder()
{
    if(mx<=0)
    {
        mspeedx=-mspeedx;
        mx=0;
    }
    else if(mx>=Sview.mWidth)
    {
        mspeedx=-mspeedx;
        mx=(int)Sview.mWidth;
    }
    if(my<=0)
    {
        mspeedy=-mspeedy;
        my=0;
    }
    else if(my>=Sview.mHeight)
    {
        mspeedy=-mspeedy;
        my=(int)Sview.mHeight;
    }
}
} 
```

我得到的错误是：

```
08-29 00:05:55.982: E/AndroidRuntime(2295): FATAL EXCEPTION: Thread-8
08-29 00:05:55.982: E/AndroidRuntime(2295): java.lang.NullPointerException
08-29 00:05:55.982: E/AndroidRuntime(2295):     at com.pnf.game.ViewThread.run(ViewThread.java:31)
08-29 00:05:56.292: E/global(2295): Deprecated Thread methods are not supported.
08-29 00:05:56.292: E/global(2295): java.lang.UnsupportedOperationException
08-29 00:05:56.292: E/global(2295):     at java.lang.VMThread.stop(VMThread.java:85)
08-29 00:05:56.292: E/global(2295):     at java.lang.Thread.stop(Thread.java:1379)
08-29 00:05:56.292: E/global(2295):     at java.lang.Thread.stop(Thread.java:1344)
08-29 00:05:56.292: E/global(2295):     at com.pnf.game.Sview.surfaceDestroyed(Sview.java:85)
08-29 00:05:56.292: E/global(2295):     at android.view.SurfaceView.reportSurfaceDestroyed(SurfaceView.java:568)
08-29 00:05:56.292: E/global(2295):     at android.view.SurfaceView.updateWindow(SurfaceView.java:472)
08-29 00:05:56.292: E/global(2295):     at android.view.SurfaceView.onWindowVisibilityChanged(SurfaceView.java:206)
08-29 00:05:56.292: E/global(2295):     at android.view.View.dispatchWindowVisibilityChanged(View.java:3891)
08-29 00:05:56.292: E/global(2295):     at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:719)
08-29 00:05:56.292: E/global(2295):     at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:719)
08-29 00:05:56.292: E/global(2295):     at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:719)
08-29 00:05:56.292: E/global(2295):     at android.view.ViewRoot.performTraversals(ViewRoot.java:744)
08-29 00:05:56.292: E/global(2295):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
08-29 00:05:56.292: E/global(2295):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-29 00:05:56.292: E/global(2295):     at android.os.Looper.loop(Looper.java:123)
08-29 00:05:56.292: E/global(2295):     at android.app.ActivityThread.main(ActivityThread.java:4627)
08-29 00:05:56.292: E/global(2295):     at java.lang.reflect.Method.invokeNative(Native Method)
08-29 00:05:56.292: E/global(2295):     at java.lang.reflect.Method.invoke(Method.java:521)
08-29 00:05:56.292: E/global(2295):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-29 00:05:56.292: E/global(2295):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-29 00:05:56.292: E/global(2295):     at dalvik.system.NativeStart.main(Native Method) 
```

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T01:36:18.843

java.lang.Thread 的 android java 文档提到 stop 已弃用（请参阅[http://developer.android.com/reference/java/lang/Thread.html#stop](http://developer.android.com/reference/java/lang/Thread.html#stop) () ）。您真正需要做的是将 ViewThread 的 mRun 设置为 false 并在 ViewThread 上调用 join 以确保它停止运行。

# python - django 自定义字段保存但不可视化

> ID：12245708
> 
> 赞同：0
> 
> 时间：2012-09-03T10:05:44.920
> 
> 标签：python, django, django-forms, django-admin, django-models

我创建了一个字段来保存工作日，在这样的模型中使用（`models.py`）：

```
from myfields import *
from django.db import models

class MyModel(models.Model):
    weekdays = WeekdayField() 
```

我存储表单声明的文件是`myfields.py`并且是这个文件：

```
from django.db import models
from django import forms

class Weekdays(object):
    CHOICES = (
        (1, "Monday"),
        (2, "Tuesday"),
        (4, "Wednesday"),
        (8, "Thursday"),
        (16, "Friday"),
        (32, "Saturday"),
        (64, "Sunday"),
        )
    MONDAY,TUESDAY,WEDNESDAY,THURSDAY,FRIDAY,SATURDAY,SUNDAY = [2**i for i in range(0,7)]
    del i

    def __init__(self, value=0):
        self.raw = value

    def __add__(self, other):
        return Weekdays(self.raw | other)

    def __sub__(self, other):
        return Weekdays(self.raw & (-1 ^ other))

    def __unicode__(self):
        ret = []
        for ele in Weekdays.CHOICES:
            if (self.raw & ele[0]) >> ele[0] == 1:
                ret.append(ele[1])
        return ",".join(ret)

    def __iter__(self):
        ret = []
        for ele in Weekdays.CHOICES:
            if (self.raw & ele[0]) >> ele[0] == 1:
                ret.append(ele)
        return iter(ret)

    def __len__(self):
        i = 0
        for n in range(7):
            if (self.raw & n) >> n == 1:
                i += 1
        return i

class WeekdayField(models.Field):
    description = "Multiple select of weekdays"

    __metaclass__ = models.SubfieldBase

    def __init__(self, *args, **kwargs):
        kwargs['max_length'] = 3
        super(WeekdayField, self).__init__(*args, **kwargs)

    def to_python(self, value):
        if isinstance(value, int):
            return [ wd for wd in Weekdays(value) ]
        if isinstance(value, Weekdays):
            return value
        if isinstance(value, list): #list of weekstay
            wd = Weekdays()
            for val in value:
                wd += int(val)
            return wd

    # PY to DB
    def get_prep_value(self, value):
        return value.raw

    def formfield(self, **kwargs):
        defaults = {'form_class': WeekdayFormField}
        defaults.update(kwargs)
        return super(WeekdayField, self).formfield(**defaults)

    def get_internal_type(self):
        return "IntegerField"

class WeekdayFormField(forms.MultipleChoiceField):
    def __init__(self, *args, **kwargs):
        if 'choices' not in kwargs:
            kwargs['choices'] = Weekdays.CHOICES
        kwargs.pop('max_length', None)
        if 'widget' not in kwargs:
            kwargs['widget'] = forms.widgets.CheckboxSelectMultiple
        super(WeekdayFormField, self).__init__(*args, **kwargs)

    def clean(self, value):
        super(WeekdayFormField, self).clean(value)
        possible_values = [ str(x[0]) for x in Weekdays.CHOICES ]
        for v in value:
            if not v in possible_values:
                raise forms.ValidationError("Day not valid")
        return value 
```

使用它我可以通过 Django Admin 创建和删除元素，但是当我修改一个值时，我看不到我之前存储的值。我查看了数据库并正确存储了值。

在修改期间如何让我看到 Django Admin 的当前值是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T18:18:13.367

我有办法！方法的实现是错误`Weekdays.__unicode__()`的`Weekdays.__iter__()`。

最后，我还更改了下面报告的两种方法，在`WeekdayField`.

```
#Class-type
class Weekdays(object):
    ...

    def __unicode__(self): # Request for the matching
        ret = []
        for i,ele in enumerate(Weekdays.CHOICES):
            if (self.raw & ele[0]) >> i == 1:
                ret.append(unicode(ele[0]))
        return ','.join(ret)

    def __iter__(self):
        for i,ele in enumerate(Weekdays.CHOICES):
            if (self.raw & ele[0]) >> i == 1:
                yield Weekdays(ele[0])

#Field to include in the model
class WeekdayField(models.Field):
    ...

    # DB to PY
    def to_python(self, value):
        if isinstance(value, int):
            return [ wd for wd in Weekdays(value) ]
        if isinstance(value, unicode):
            return [ wd for wd in Weekdays(int(value)) ]
        if isinstance(value, Weekdays):
            return value
        if isinstance(value, list): #list of Weekdays
            wd = []
            for val in value:
                wd += self.to_python(val)
            return wd

    #PY to DB
    def get_prep_value(self, value):
        if isinstance(value, Weekdays):
            return value.raw
        if isinstance(value, list):
            sum_raw = 0
            for val in value:
                sum_raw += self.get_prep_value(val)
            return sum_raw 
```

我希望这对某人有帮助！

# c# - 如何在不暂停循环的情况下显示循环的进度？

> ID：12245710
> 
> 赞同：0
> 
> 时间：2012-09-03T10:05:46.257
> 
> 标签：c#, for-loop, backgroundworker, progress

我有一个`for`循环（在它自己的线程中运行），我正在计算循环的进度，并且我想在每次更改时显示进度值，但我想在循环外运行消息显示命令，所以它不会t 暂停循环。

我已阅读[如何在繁忙的循环中显示进度？](https://stackoverflow.com/questions/1194620/how-do-i-display-progress-during-a-busy-loop)，但我不想使用后台工作人员，因为我已经有一个使用启动循环的类的实例（即我不想嵌套后台工作人员）。我假设替代方案是引发和监听事件，但我不确定在这种情况下如何实现。

那么，如何在不使用后台工作人员的情况下解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:14:20.537

如果是 Winforms，您可以`MyForm.BeginInvoke()`使用匿名委托来更新进度显示。`BeginInvoke`是异步的，所以它不会阻塞当前线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:15:56.403

您需要从循环线程中通知*LoopWatcher之类的东西。*

```
public class ProgressEventArgs : EventArgs
{
    public int Number { get; private set; }
    public ProgressEventArgs(int num)
    {
        this.Number = num;
    }
}

public class Worker
{
    public event EventHandler<ProgressEventArgs> ProgressChanged = delegate { };

    public void DoSomething()
    {
        for (int i = 0; i < 10; i++)
        {
            ProgressChanged(this, new ProgressEventArgs(i));
            Thread.Sleep(1000);   //just an example here
        }
    }
} 
```

您可以在 中看到`Worker.DoSomething`，有一个循环需要花费时间。我在 中添加了一个事件`Worker`，因此在课堂之外，订阅者可以知道进度发生了变化。

```
var worker = new Worker();
worker.ProgressChanged += (s, e) => Console.WriteLine(e.Number);
Thread t = new Thread(worker.DoSomething);
t.Start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:34:31.413

由于提供的答案不符合我的要求，因此我对事件进行了一些研究，并按照我最初想要的方式解决了问题。

我在开始循环的类中声明了一个事件：

```
public delegate void ProgressChangedEvHandler(int progress);

public event ProgressChangedEvHandler ProgressChanged;

private void OnProgressChanged(int progress)
{
    var handler = ProgressChanged;
    if (handler != null) handler(progress);
} 
```

然后我从循环中调用了该事件：

```
for (var index = 0; index < arrayListCount; index++)
{
    var progress = (int) (100*(double) index/(double) arrayListCount);
    OnProgressChanged(progress);
} 
```

然后我刚刚在`LoopClassInstance.ProgressChanged += LoopClassInstance_ProgressChanged;`不同的类中（在不同的线程上）创建了监听器（）：

```
private void LoopClassInstance_ProgressChanged(int progress)
{
    toolStripProgressBar1.Value = progress;
} 
```

# java - 如何在 JavaFX 2 中为未装饰的 Stage 提供高级窗口管理器设施？

> ID：12245714
> 
> 赞同：3
> 
> 时间：2012-09-03T10:05:57.747
> 
> 标签：java, javafx-2, custom-component, window-managers

出于美观和可用性的原因，我的程序使用未装饰的`Stage`. 我已经实现了核心功能——最小化、最大化、关闭、调整大小和拖动都存在。

现在，我发现该程序缺少一些我认为给定的高级功能：
在 Windows XP 系统上，单击任务栏中的程序条目不再将其最小化。
在 KDE 系统上，拖动不允许任何部分`Stage`离开屏幕。

每个功能都存在于相应的其他系统上；装饰舞台时，两者都在每个系统上工作。

我想知道我是否可以在我的程序中以某种方式重新创建这种行为，而无需恢复到装饰阶段。`Stage`API 似乎没有提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:16:01.067

让它工作的一个技巧可能是创建一个装饰的舞台作为你未装饰的舞台的父级。放置装饰好的舞台，使其隐藏在未装饰的舞台后面。在任务栏中单击程序条目等功能应该可以工作（希望被黑的安排不会导致其他无法克服的问题）。您需要监听窗口的可见和隐藏状态并跟踪它们的大小，以便您可以正确维护顶部未装饰窗口和隐藏装饰窗口之间的关系。[您可以在http://javafx-jira.kenai.com](http://javafx-jira.kenai.com)上请求更直接地提供您正在寻找的功能的官方 API

# iphone - 更改按钮单击时的 UILabel 文本颜色

> ID：12245715
> 
> 赞同：2
> 
> 时间：2012-09-03T10:06:05.543
> 
> 标签：iphone, xcode, uibutton, uilabel

我在应用程序中有按钮我希望当用户单击该按钮时它应该将未选择的问题标签文本显示为红色

只有一个标签文本改变了 Q1，而其他的没有。

```
-(IBAction)nextButtonClicked
{
    if ([professionLabel.text isEqualToString:@"Profession"])
    {    
        errorLabel.text=@"请选择突出显示的答案";
        Q1.textColor=[UIColor redColor];   
    }
    else if ([workLabel.text isEqualToString:@"Work"])
    {      
        errorLabel.text=@"请选择突出显示的答案";
        Q2.textColor=[UIColor redColor];
    }
    否则 if([yearLabel.text isEqualToString:@"Year"])
    {    
        errorLabel.text=@"请选择突出显示的答案";
        Q3.textColor=[UIColor redColor];   
    }
    别的
    {
        [自我提交调查答案];
        [自我提交SurveyAnswersOne]；
        [自我提交SurveyAnswersTwo]；
        OnlineViewController*targetController=[[OnlineViewController alloc]init];   
        targetController.mynumber=mynumber;
        [self.navigationController pushViewController:targetController 动画：YES];
    }
}

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:10:20.717

尝试`else`从 中删除`else if`，然后它会一一进入所有条件....`Else if`意味着如果满足一个语句，则默认情况下将跳过其他语句。

```
if ([professionLabel.text isEqualToString:@"Profession"]) {
errorLabel.text=@"Please Select the Highliteg Answers";
Q1.textColor=[UIColor redColor];
}

if ([workLabel.text isEqualToString:@"Work"]) {
errorLabel.text=@"Please Select the Highliteg Answers";
Q2.textColor=[UIColor redColor];
} 
if([yearLabel.text isEqualToString:@"Year"]){

errorLabel.text=@"Please Select the Highliteg Answers";
Q3.textColor=[UIColor redColor];
} 
```

# javascript - ember.js：转换到相同的路由会产生堆栈溢出问题

> ID：12245736
> 
> 赞同：1
> 
> 时间：2012-09-03T10:06:53.543
> 
> 标签：javascript, ember.js

这是我的路线：

```
photo: Ember.Route.extend({
      route: '/photo/:photo_id',
      showPhoto: Ember.Route.transitionTo('root.photo'),
      connectOutlets: function(router, photo) {
        console.log("TEST");
        router.get('applicationController').connectOutlet('photo', photo);
      },
    }) 
```

在我的 PhotoView 中，我有几个地方，我必须显示“相关照片”，其缩略图也应该是可点击的，所以我有这个

```
<a {{action showPhoto this href=true}}> ...photo... </a> 
```

但是，如果我之后单击链接，则会收到堆栈溢出错误。我该如何解决这个问题？我真的需要路由到相同的视图，但使用新数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:52:19.167

代替

`action showPhoto this href=true`和

`action showPhoto photo href=true`

没有 jsfiddle 很难检查我的答案。

# c# - 使用 clickonce 发布 sqlCE(*.sdf) 文件

> ID：12245737
> 
> 赞同：2
> 
> 时间：2012-09-03T10:06:56.303
> 
> 标签：c#, sql-server-ce, clickonce, publishing

我正在尝试使用 CLICKONCE 部署将带有数据库文件 (SQLCE - *.sdf) 项目的 .NET WINFORMS 发布到我的服务器。我在我的解决方案中使用 C#。

我在这个体育场遇到的问题是我的数据库文件与我的可执行文件位于不同的项目中。包含 *.sdf 的项目在 Main 项目中被引用。因此，该文件在构建后会自动复制到主项目的 bin 文件夹中，但在（MainProject > Properties > Publish > Application Files）中看不到，因此我无法将其发布到我的服务器。

因此，问题是，我无法在项目发布时发送 *.sdf。

我该如何去工作来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:37:56.830

有几个选项可供您使用。两者都涉及在 Visual Studio 之外创建 ClickOnce 部署。一旦你想要超越基础知识，你就需要离开 Visual Studio。

选项 1) Mage 和 MageUI - 这是一个 Microsoft 工具，可用于将 ClickOnce 部署组合在一起。这里有一个指南：http: [//msdn.microsoft.com/en-us/library/xc3tc5xx.aspx](http://msdn.microsoft.com/en-us/library/xc3tc5xx.aspx)

选项 2) ClickOnceMore - 这是我编写的一个工具，可让您使用 ClickOnce 做更多事情。您可以轻松地创建一个项目并从主 .exe 项目之外添加文件。这里有一个入门指南：[http](http://clickoncemore.net/documentation/browser.php?page=quick_start_guide) ://clickoncemore.net/documentation/browser.php?page=quick_start_guide 。在您的场景中，您可能只需要创建一个文件包含规则并将其指向应用程序的 bin 目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:27:02.610

试试这个指令：

1) 创建一个新的 Windows 窗体应用程序。

2) 将数据源（选择一个数据库文件，例如 SqlDatabase.mdf）添加到您的项目中。

3) 将 DataGridView1 拖放到 Form1 上，并使用 |DataDirectory| 数据库连接字符串中的路径。

```
Imports System.Data.SqlClient

Public Class Form1

'Binding database table to DataGridView

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    Dim con As SqlConnection = New SqlConnection("Data Source=.;Integrated Security=True;AttachDbFilename=|DataDirectory|\SqlDatabase.mdf")

    Dim cmd As SqlCommand = New SqlCommand("SELECT * FROM Table1", con)

    con.Open()

    Dim myDA As SqlDataAdapter = New SqlDataAdapter(cmd)

    Dim myDataSet As DataSet = New DataSet()

    myDA.Fill(myDataSet, "MyTable")

    DataGridView1.DataSource = myDataSet.Tables("MyTable").DefaultView

    con.Close()

    con = Nothing

End Sub

End Class 
```

4) 在解决方案资源管理器中选择 SqlDatabase.mdf 文件并查看其属性：

确保“构建操作”属性设置为“内容”。

“复制到输出目录”属性设置为“如果较新则复制”。

5) 项目属性 -> 发布选项卡 -> 按“应用程序文件”按钮

检查列表中的数据库文件，确保其“发布状态”设置为“数据文件（自动）”，“下载组”设置为“（必填）”。

6) 项目属性 -> 发布选项卡 -> 单击“发布”按钮发布您的应用程序以生成 Setup.exe 文件。

安装 Setup.exe 文件，数据库文件将与应用程序一起部署在应用程序安装文件夹的“Data”文件夹中。exe.config 文件也将与应用程序一起部署在应用程序安装文件夹中。

[原始来源](http://social.msdn.microsoft.com/Forums/en/vbinterop/thread/353e10d3-b46e-4234-927d-c2c17d750546)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-17T12:35:42.357

1) 在解决方案资源管理器中选择 SqlDatabase.sdf 文件并查看其属性：

确保“构建操作”属性设置为“内容”。

“复制到输出目录”属性设置为“如果较新则复制”。

2) 项目属性 -> 发布选项卡 -> 按“应用程序文件”按钮

检查列表中的数据库文件，确保其“发布状态”设置为“包含”，“下载组”设置为“（必填）”。

3) 项目属性 -> 发布选项卡 -> 单击“发布”按钮发布您的应用程序以生成 Setup.exe 文件。

# php - Heroku 上的数据库名称 & 用户 & 密码 & 主机

> ID：12245738
> 
> 赞同：3
> 
> 时间：2012-09-03T10:06:57.260
> 
> 标签：php, sql, heroku

我想在 heroku 上安装一个带有数据库的 php 脚本。如何获取我安装的数据库的数据库名称、密码、用户和主机信息？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T10:24:02.440

[Heroku 上有几个不同的数据库可用 - 您可以在addons.heroku.com](https://addons.heroku.com/)查看选项并将它们添加到您的应用程序中。可能第一个/最基本的数据库是 Postgres -[这是 heroku Postgres 教程](https://addons.heroku.com/)。引用自[相关部分](https://devcenter.heroku.com/articles/database#connecting-and-using-database-urls)：

> Heroku 应用程序上安装的每个数据库都有一个唯一的数据库 URL，您的应用程序可以使用该 URL 连接到该数据库。数据库 URL 采用 postgres://username:password@host:port/database_name 格式。
> 
> ...
> 
> 此外，每个应用程序都有一个 DATABASE_URL 配置变量；这是代表您的默认数据库的数据库。

Heroku[配置](https://devcenter.heroku.com/articles/config-vars)变量在创建应用程序时设置为环境变量。因此，您可能可以读取`DATABASE_URL`环境变量以获取连接到数据库所需的信息。

# android - 如何在android中设置屏幕亮度和Font-Scale

> ID：12245739
> 
> 赞同：1
> 
> 时间：2012-09-03T10:06:59.333
> 
> 标签：android, font-size, screen-brightness

我将设备设置设置为某些值。我想使用以下代码调整屏幕亮度和字体比例 iam：

```
//For Font-Scale
Settings.System.putFloat(this.getContentResolver(),Settings.System.FONT_SCALE,(float) 1.3);
//For Brightness
Settings.System.putString(this.getContentResolver(),Settings.System.SCREEN_BRIGHTNESS,255); 
```

亮度值确实会改变，但要设置激活它，我必须转到屏幕设置并打开亮度设置并按 OK。Font-Scale 的值不会改变。我认为也许是一种刷新设置以获取新值的方法。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:40:44.287

应用程序无法做到这一点。使这些设置生效的一种方法是重新启动手机。如果您具有 root 访问权限，则可以使用非公共 API。使用下面的代码使用反射来做到这一点。

要更改亮度，您需要调用

```
 PowerManagerService.setBacklightBrightness(brightness); 
```

并改变

```
 ActivityManagerNative.getDefault().updatePersistentConfiguration(mCurConfig) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T05:48:31.597

查看源代码DisplaySettings.java，这里是控制字体大小比例的方法

```
public void writeFontSizePreference(Object objValue) {
    try {
        mCurConfig.fontScale = Float.parseFloat(objValue.toString());
        ActivityManagerNative.getDefault().updatePersistentConfiguration(mCurConfig);
    } catch (RemoteException e) {
        Log.w(TAG, "Unable to save font size");
    }
} 
```

这是一个将字体大小保持在不同字体比例的解决方案。

```
float textSize = 22f;
mTextView.setTextSize(textSize / getResources().getConfiguration().fontScale); 
```

而且我认为@shoe rat 的答案对于活动或应用程序上下文更好。

# python - 用谷歌实现 SSO + OAuth

> ID：12245747
> 
> 赞同：1
> 
> 时间：2012-09-03T10:07:46.183
> 
> 标签：python, django, google-apps, google-openid, google-sso

我想做的就是为在自定义域上使用谷歌应用程序的用户实施单点登录。例如。startup.com 已通过为其域购买 google apps for business 来配置其域。他们在 users@startup.com 配置了 gmail 地址。

我有一个 Django 应用程序。现在，如果我想为自定义谷歌应用程序域实施 SSO，我有几个选择：

1.  混合开放 ID + OAuth + SSO
2.  自定义 OAuth + SSO。

1\. 的文档非常丰富，他们已经展示了。第二种方式怎么样，因为我只是想用他们的电子邮件 ID 记录用户。我也可以使用 OAuth 来做到这一点。一起实现 SSO + OAuth 有多好？有没有什么好的图书馆可以帮助我做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:09:34.410

这会照顾你正在寻找的东西：[https ://github.com/simul14/django-googleappsauth](https://github.com/simul14/django-googleappsauth)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:59:25.273

看看[django-social-auth](https://github.com/omab/django-social-auth)，它允许您将 OpenID 和 OAuth 与 Google 一起使用，这应该可以帮助您解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-05T20:45:22.747

您可以使用 WorkOS [https://workos.com/](https://workos.com/)将 SSO 集成到您的应用程序中，而无需从头开始。它也支持 OAuth。

# java - JSF 2.0：使用 HttpServletRequest.login 后如何重定向到受保护的页面

> ID：12245749
> 
> 赞同：5
> 
> 时间：2012-09-03T10:07:47.553
> 
> 标签：java, authentication, jsf-2

我正在尝试将 HttpServletRequest.login 与基于表单的身份验证一起使用。

一切正常（容器告诉登录名/密码是否正确），除了用户输入登录名后，我不知道如何将用户重定向到他要求的受保护页面（重新显示登录表单）。怎么做？

在此先感谢您的帮助。

编码：

网页.xml：

```
<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>security</realm-name>
    <form-login-config>
        <form-login-page>/faces/loginwithlogin.xhtml</form-login-page>
        <form-error-page>/faces/noaut.xhtml</form-error-page>
    </form-login-config>
</login-config> 
```

页面 loginwithlogin.xhtml

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>Authentication</title>
    </h:head>
    <h:body>
        <h:form>
            Login :
            <h:inputText value="#{login.login}" required="true" />
            <p/>
            Mot de passe :
            <h:inputSecret value="#{login.password}" required="true" />
            <p/>
            <h:commandButton value="Connexion" action="#{login.submit}">
                 <f:ajax execute="@form" render="@form" />
            </h:commandButton>
            <h:messages />
        </h:form>
    </h:body>
</html> 
```

更新：没有 Ajax，它不起作用。

支持豆：

```
@Named
@SessionScoped
public class Login implements Serializable {
  private String login;
  private String password;
  // getters and setters 
  ...

  public void submit() {
    FacesContext context = FacesContext.getCurrentInstance();
    HttpServletRequest request = 
            (HttpServletRequest) context.getExternalContext().getRequest();
    try {
        request.login(login, mdp);
        context.addMessage(null, 
                new FacesMessage(FacesMessage.SEVERITY_INFO, 
                "OK", null));
    } catch (ServletException e) {
        context.addMessage(null, 
                new FacesMessage(FacesMessage.SEVERITY_ERROR, 
                "Bad login", null));
    }
  }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T11:16:55.440

在基于容器管理表单的身份验证的情况下，登录页面由 a 打开，[`RequestDispatcher#forward()`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)因此原始请求 URI 可用作名称由 标识的请求属性[`RequestDispatcher#FORWARD_REQUEST_URI`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#FORWARD_REQUEST_URI)。请求属性（基本上，请求范围）在 JSF 中可用[`ExternalContext#getRequestMap()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getRequestMap%28%29).

因此，这应该这样做：

```
private String requestedURI;

@PostConstruct
public void init() {
    requestedURI = FacesContext.getCurrentInstance().getExternalContext()
        .getRequestMap().get(RequestDispatcher.FORWARD_REQUEST_URI);

    if (requestedURI == null) {
        requestedURI = "some/default/home.xhtml";
    }
}

public void submit() throws IOException {
    // ...

    try {
        request.login(username, password);
        externalContext.redirect(requestedURI);
    } catch (ServletException e) {
        context.addMessage(null, 
                new FacesMessage(FacesMessage.SEVERITY_ERROR, 
                "Bad login", null));
    }
} 
```

您只需要制作 bean `@ViewScoped`(JSF) 或`@ConversationScoped`(CDI) 而不是`@SessionScoped`（绝对不要`@RequestScoped`；否则需要使用不同的方法`<f:param>`和`<f:viewParam>`）。

# adobe - 在 Adob e CQ 中确定运行模式

> ID：12245751
> 
> 赞同：13
> 
> 时间：2012-09-03T10:07:55.093
> 
> 标签：adobe, osgi, aem, sling, day-cq

我如何以编程方式知道实例正在运行哪种运行模式？我创建了一个自定义标签，根据实例运行模式提供配置，但我无法确定当前的运行模式。
我找到了一个返回 run-mods 实例列表的方法：

```
SlingSettings settings = ...get from BundleContext...
Set<String> currentRunModes = settings.getRunModes(); 
```

但我无法获取对象 SlingSettings 或 BundleContext。我怎样才能得到这些对象，或者也许有另一种方法来获得当前的运行模式？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-03T19:52:47.767

SlingSetttings 是正确的方法 - 如果它来自 Java，那么最简单的方法是在 SCR @Component 的类中使用 SCR @Reference 注释，这样您就不必通过 BundleContext。

如果它来自 Sling 脚本，您可以使用 sling.getService(....) 来获取 SlingSettings。

请注意，您需要读取运行模式的情况很少见，通常您宁愿将 OSGi 配置设置为依赖于运行模式，并让 OSGi 组件基于此修改其行为。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-05T11:58:56.203

最后我决定使用 global.jsp，在页面上下文中编写运行模式并在我的类中获取它：

```
<%
pageContext.setAttribute("runModes", sling.getService(SlingSettingsService.class).getRunModes().toString());
%> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-12T09:40:38.877

```
import java.util.Set;
import org.osgi.framework.BundleContext;
import org.osgi.framework.FrameworkUtil;
import org.osgi.framework.ServiceReference;
import org.apache.sling.settings.SlingSettingsService;

public class myClass {
    public static Set<String> getRunModes() {
        BundleContext bundleContext = FrameworkUtil.getBundle(myClass.class).getBundleContext();
        ServiceReference serviceReference = bundleContext.getServiceReference(SlingSettingsService.class.getName( ));
        SlingSettingsService slingSettingsService = (SlingSettingsService)bundleContext.getService(serviceReference);
        return slingSettingsService.getRunModes();
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-07T16:57:54.643

```
@Reference
RunMode runmode; 
```

或者

```
sling.getService( RunMode.class ) 
```

并打电话

```
getCurrentRunModes(); //returns String[] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-11-14T18:06:37.217

如果您使用 Sightly 并使用扩展 WCMUsePojo 的类

```
slingSettings =this.getSlingScriptHelper().getService(SlingSettingsService.class);
    Set<String> runmodes = slingSettings.getRunModes(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-11-19T18:00:55.387

正如 Bertrand Delacretaz 所说，这是检查实例是作者还是发布的正确方法。在 jsp 或 java 中，你可以检查像

```
import  org.apache.sling.settings.SlingSettingsService
Set<String> runModes = sling.getService(SlingSettingsService.class).getRunModes();

if (runModes.contains("author")) {
} 
```

另一种方法是使用

```
if (mode == WCMMode.EDIT) 
{
} 
```

但是这种方法在预览模式下会失败并且不起作用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-27T14:01:46.723

你也可以试试这个：

```
RunModeService runModeService = getSlingScriptHelper().getService(RunModeService.class);
author = runModeService.isActive("author"); 
```

# ajax - 是否有一些 Ajax JSON 测试和调试 Web 服务/API？

> ID：12245752
> 
> 赞同：2
> 
> 时间：2012-09-03T10:07:56.523
> 
> 标签：ajax, json, web-services, jsonp, asp.net-web-api

我正在调试一些没有服务器端的棘手的 Ajax 代码，实际上我没有域等，甚至可以放置任何服务器端代码。

我想找到一些非常小的 Ajax JSON(P) 测试或调试 web 服务或 web API，它们只是发回一些东西。类似于`ping`or`noop`或的东西`ack`。

我更喜欢小型、快速和可靠的东西，最好由谷歌、微软或雅虎等主要互联网公司提供。

理想情况下，它会支持这些功能，但没有一个是完全必要的：

*   支持`JSONP`。
*   参数化返回成功或各种失败。
*   在响应之前参数化延迟指定的时间。
*   参数化支持或拒绝`CORS`请求。
*   对 HTTP 标头的参数控制。
*   参数化描述返回的对象。

事实上，来自主要提供商的此类服务的最基本形式也可用于确定 Internet 访问是否可用，至少在一定程度上超过`navigator.onLine`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:28:47.843

[**jsFiddle**](http://jsfiddle.net/)[实际上通过他们的“Echo Javascript 文件和 XHR 请求”</a>](http://doc.jsfiddle.net/use/echo.html)支持我正在寻找的一些功能

[](http://doc.jsfiddle.net/use/echo.html)

> [](http://doc.jsfiddle.net/use/echo.html)
> 
> [为了改善用户体验，创建了“回声”功能。这允许测试 XHR 请求、添加 javascript 文件、创建工作人员 - 所有这些都来自一个小提琴，因此对于阅读代码的用户来说更加透明。XHR 请求分为*HTML*、*JSON*、*JSONP*和*XML*。](http://doc.jsfiddle.net/use/echo.html)**[Gist](http://doc.jsfiddle.net/use/gist_response.html#gist-response)*和*[github](http://doc.jsfiddle.net/use/github_response.html#github-response)*响应类似于 echo 功能，并且与将 fiddles 存储在*[gist](http://doc.jsfiddle.net/use/gist_read.html#gist-read)*和*[github](http://doc.jsfiddle.net/use/github_read.html#github-read)*中很好地配对。*

 *不过，它们并不是真的打算在 jsFiddle 之外使用。一些限制：

*   HTTP`POST`必须用于除`JSONP`JavaScript 之外的所有内容。
*   `CORS`不支持。

在我列出的所需功能中，它至少支持：

*   指定延迟
*   描述要返回的对象*

# javascript - require.js 是否检查已加载的 js 文件？

> ID：12245753
> 
> 赞同：1
> 
> 时间：2012-09-03T10:07:57.837
> 
> 标签：javascript, html, requirejs

我展示了不同类型的 HTML 5 图表，因此我为每种图表类型制作了单独的 js 文件，以便我可以有选择地加载。听说过很多有关 require.js 的内容，因此我尝试了一下。我对此很陌生，因此不确定我实现它们的方式是否正确。下面是我调用来构建图表的函数：

```
 function buildChart(podObj) {

        switch (podObj.PodAttributes.type) {
            case "ColumnChart":

                  requirejs(["HTML5SpendDashboard/includes/js/views/column.chart.js"], function () {
                var objChart = ColumnChart.getInstance();
                onSuccessLoadChart(podObj, objChart);
                  });
                break;
            case "dataGrid":
                 requirejs(["HTML5SpendDashboard/includes/js/views/grid.js"], function () {
                var objChart = DataGrid.getInstance();
                onSuccessLoadChart(podObj, objChart);
                 });
                break;
            case "lineChart":
                requirejs(["HTML5SpendDashboard/includes/js/views/line.chart.js"], function () {
                var objChart = LineChart.getInstance();
                onSuccessLoadChart(podObj, objChart);
                 });
                break;
            case "pieChart":
                 requirejs(["HTML5SpendDashboard/includes/js/views/pie.chart.js"], function () {
                var objChart = PieChart.getInstance();
                onSuccessLoadChart(podObj, objChart);
                  });
                break;
        }
    }
    function onSuccessLoadChart(podObj, objChart) {

        objChart.BaseViewRef.Variables.ViewProperties = podObj;
        objChart.Build();
    } 
```

这是使用 require.js 的正确方法吗？目前我不想采用模块化模式。另一件事是，如果重复柱形图的情况将 require.js 重复加载 column.chart.js 文件，我可以跳过加载吗？

# sql - ORACLE SQL：将时间添加到带有时区的时间戳

> ID：12245757
> 
> 赞同：1
> 
> 时间：2012-09-03T10:08:16.867
> 
> 标签：sql, oracle, timestamp-with-timezone

我需要添加秒数并减去类型为 TIMESTAMP WITH TIMEZONE 的变量，但是，据我了解，向此类数据添加数字会导致有关时区的信息丢失，可能是因为它已转换为 DATE 类型

那是：

```
 SELECT FROM_TZ(
           TO_TIMESTAMP( 
             TO_DATE('03/09/2012 2:30:30','DD/MM/YYYY HH:MI:SS')
           )
         , 'America/Chicago') 
      FROM DUAL; 
```

给出：

```
 03/09/2012 00:00:00, -05:00 
```

然后

```
 SELECT FROM_TZ(
           TO_TIMESTAMP( 
             TO_DATE('03/09/2012 2:30:30','DD/MM/YYYY HH:MI:SS')
           )
         , 'America/Chicago')  + 1/24 -- add 1 hour
      FROM DUAL; 
```

给

```
 03/09/2012 01:00:00 
```

并丢失时区信息。但

```
 SELECT FROM_TZ(
     TO_TIMESTAMP( 
       TO_DATE('03/09/2012 2:30:30','DD/MM/YYYY HH:MI:SS'))
      , 'America/Chicago') +  INTERVAL '1' hour

  FROM DUAL; 
```

正确给出

```
 03/09/2012 01:00:00,000000000 -05:00 
```

但是 INTERVAL.. 语法需要一个 char 常量，所以我不能将它与变量一起使用。

如何在保留时区信息的同时使用 TIMESTAMP WITH TIME ZONE 数据类型执行这种算术？

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T23:04:26.320

您可以使用 NUMTODSINTERVAL 函数将数字转换为间隔。

```
SELECT FROM_TZ( TIMESTAMP '2012-10-08 00:00:00','-5:00') 
  + NUMTODSINTERVAL(1,'HOUR')
FROM dual; 
```

# ruby - 使用 Ruby 元编程保存类的新方法

> ID：12245758
> 
> 赞同：1
> 
> 时间：2012-09-03T10:08:19.677
> 
> 标签：ruby, metaprogramming

我刚刚发现了 Ruby 的元编程（在使用 Ruby 7 年后，是时候了！）我有一个问题：

假设我运行一个程序，该程序使用`class_eval`和其他元编程函数向一个类添加方法，有没有一种简单的方法，当重新运行同一个程序时，已经定义了这些新方法，或者我必须编写自己的系统，每次`class_eval`使用，还要将生成的代码保存在一个文件中，以便下次运行程序时重新评估它？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T10:12:51.730

这不是它的完成方式。一种正确的方法是，当您下次运行程序时，再次运行所有这些对`define_method`, `class_eval`（以及诸如此类）的调用并在运行时定义方法。

想象一下，如果生成的方法保留在您的源代码中会发生什么？您想`attr_accessor`用两种新方法替换自己吗？

如果您自己编写这样的元方法并更改它会怎样。您认为所有这些保存的生成方法将如何更新？

我不知道你在哪里读到过元编程，但我强烈推荐这本书：[元编程 Ruby](http://pragprog.com/book/ppmetr/metaprogramming-ruby)。它应该让你头脑清醒。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T10:13:13.463

您不能（可以使用 eval 和自组装字符串，但这不再是元编程）并且不应该这样做，即使 ruby​​ 的标准库在程序启动时也会重新评估。

另一种可能性是分叉，独角兽就是一个很好的例子。评估所有方法定义，然后开始生成子进程，它们是“主”进程的副本。这可以节省您重新评估所有代码的时间，因为与此相比，分叉非常快。

# javascript - Opera Mini 是否支持 window.confirm()

> ID：12245762
> 
> 赞同：0
> 
> 时间：2012-09-03T10:08:34.497
> 
> 标签：javascript, mobile-browser, opera-mini

有人能告诉我 Opera Mini（版本 4 及更高版本）是否支持 window.confirm() javascript 方法吗？

如果不是，该方法返回什么值？

```
var answer = window.confirm("Yes or no?"); 
```

答案是 TRUE、FALSE、NULL 还是 Undefined？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:10:57.160

[http://docstore.mik.ua/orelly/web/jscript/refp_434.html](http://docstore.mik.ua/orelly/web/jscript/refp_434.html)

TRUE 或 FALSE

编辑：是的，要检查它是否受支持，请阅读此线程：[如何确定是否支持 window.confirm()？](https://stackoverflow.com/questions/9468531/how-to-determine-if-window-confirm-is-supported)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:19:41.700

Opera Mini 确实支持这种方法。

[在 Opera mini 中打开此链接以确保](https://dl.dropbox.com/u/12866640/confirm.html).

# android - 无法访问 sys_call_table

> ID：12245763
> 
> 赞同：1
> 
> 时间：2012-09-03T10:08:35.323
> 
> 标签：android, linux, linux-kernel

我设法通过查看**/proc/kallsyms找到了****sys_call_table**的地址。我有以下代码：

 **```
void **sys_call_table;

#include <linux/kernel.h>
#include <asm/unistd.h>

void Java_com_example_testlib_LibLoader_test() {
    sys_call_table = (void *) 0xc023cd28;
    LOGD("backup original sys_open %p", sys_call_table[__NR_open]);
} 
```

问题是代码导致`Fatal Signal Exeption`为什么尝试获取**sys_call_table 条目** `sys_call_table[__NR_open]`
我也尝试获取条目 0、1、2，...。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:42:15.587

好的，答案就像 Crhis 所说的**“你不能从用户模式程序修改内核！”**

我将它编译为 LKM 并使用`insmod`命令加载它并且它工作

**PS**：我也发现只有LKM模块可以读取`/proc/kallsyms`。由于 Android 4.1 中的内核补丁，用户空间程序不再这样做。`/proc/sys/kernel/kptr_restrict`引入以避免泄漏内核地址。

所以现在为了让用户空间程序看到 kallsym 地址，我们可以将 kptr_restrict 设置为 0 或 1。

```
echo 1 > /proc/sys/kernel/kptr_restrict 
```

信息可以在这里找到： [https ://blog.duosecurity.com/2012/07/exploit-mitigations-in-android-jelly-bean-4-1/](https://blog.duosecurity.com/2012/07/exploit-mitigations-in-android-jelly-bean-4-1/)

在这里：http: [//insitusec.blogspot.sg/2013/01/kallsyms-on-android.html](http://insitusec.blogspot.sg/2013/01/kallsyms-on-android.html)**

# mysql - MySQL - LEFT JOIN 在 CPU 为 100% 时不返回

> ID：12245768
> 
> 赞同：0
> 
> 时间：2012-09-03T10:08:55.750
> 
> 标签：mysql, left-join

我有一个问题，我试图在查询中使用 LEFT JOIN 语句，但它没有返回任何内容。我已经尝试过 INNER 和 RIGHT JOIN 都有效。但是 INNER 和 RIGHT 的问题是它们只会跳过我不喜欢的子句不匹配的行。

正如标题所说，在进行查询时，使用 LEFT JOIN 语句的 CPU 负载为 100%。

我的查询看起来像这样

```
SELECT t1.id, t2.name, t1.name guid, t1.timestamp, t1.server_id, t1.message
FROM chat t1
LEFT JOIN players t2 ON t2.guid = t1.name
ORDER by t1.id DESC 
LIMIT 0,20; 
```

解释的结果：

```
id select_type table type possible_keys key key_len ref rows Extra
1 SIMPLE t1 ALL NULL NULL NULL NULL 37302 使用临时；使用文件排序
1 简单 t2 全部 NULL NULL NULL NULL 610715

```

# pdf - 创建可点击的 PDF 模型

> ID：12245769
> 
> 赞同：2
> 
> 时间：2012-09-03T10:08:58.737
> 
> 标签：pdf, user-interface, mockups, interaction-design

我正在设计一个新的用户界面，并为每个新屏幕创建图像。现在我想将这些图像组合成一个可点击的 PDF，以便通过单击图像中的按钮，您可以从一个屏幕导航到另一个屏幕。

创建可点击 PDF 的最简单方法是什么？（免费工具？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T21:54:02.177

Pencil Project 是一款免费的原型制作工具，可让您创建可点击的 PDF。 [http://pencil.evolus.vn/Default.html](http://pencil.evolus.vn/Default.html) 祝你好运！有些人使用 Microsoft Excel 进行原型设计，但我不建议这样做。

# c# - 如何在 C# 中获取 xml 节点？

> ID：12245772
> 
> 赞同：0
> 
> 时间：2012-09-03T10:09:17.087
> 
> 标签：c#, xml, xpath

我正在尝试从 xmldocument 获取成本节点，但我不知道如何设置正确的 xpath 表达式。这是我的 C# 代码：

```
XmlNode n = reportFields.SelectSingleNode(field[1].Trim()); 
```

field[1] 是我的 xpath，以下字符串：

```
"    /Report/Tablix6/RowGroup_Collection/RowGroup/@Cost" 
```

这是reportFields的innerXml属性的一部分：

```
"<?xml version=\"1.0\" encoding=\"utf-8\"?>
<Report Name=\"Sample\">
<Tablix6>
    <RowGroup_Collection>
        <RowGroup Cost=\"1199\" />
    </RowGroup_Collection>
</Tablix6> 
```

有任何想法吗？

编辑：

执行此代码后，n 为空。

EDIT2：这是 xmlDocument 的更新版本：

```
<?xml version="1.0" encoding="utf-8" ?> 
<Report xsi:schemaLocation="Telephony http://serverName" 
Name="Telephony" 
Textbox1="Telephony total cost" 
Textbox6="Updated: 2010-4" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns="Telephony">
<Tablix6>
    <RowGroup_Collection>
        <RowGroup CostSEK="13.908239364624" /> 
    </RowGroup_Collection>
</Tablix6> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:43:08.653

好的，我设法解决了它。原来我必须创建一个命名空间并修改我的 XPath 字符串以反映这一点：

XPath：

```
ns:Report/ns:Tablix6/ns:RowGroup_Collection/ns:RowGroup/@CostSEK 
```

C＃：

```
XmlNamespaceManager namespaces = new XmlNamespaceManager(reportFields.NameTable);
namespaces.AddNamespace("ns", "Telephony");
XmlNode n = reportFields.SelectSingleNode(field[1].Trim(), namespaces); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:16:53.683

尝试

```
XmlNode n = reportFields.SelectSingleNode("/Report/Tablix6/RowGroup_Collection/RowGroup").Attributes["Cost"]; 
```

然后您可以使用 n.Value 访问节点的值，所以

```
Console.Writeline(n.Value); 
```

应该输出“1199”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T10:18:07.083

请试试：

```
object attr = reportFields.SelectSingleNode(field[1].Trim()).Value; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-03T10:15:47.760

```
"//Report/Tablix6/RowGroup_Collection/RowGroup/@Cost" 
```

我可能会弄错，但我认为如果 XPath 表达式以双斜杠“//”开头会更好

# sql - 选择 2 个查询的左侧或右侧中的较大者

> ID：12245773
> 
> 赞同：1
> 
> 时间：2012-09-03T10:09:21.317
> 
> 标签：sql, tsql

我有以下联合查询，用于查询列的最新日期（如果存在）：

```
SELECT TOP 1 m.sentdate AS 'calltreelastsignedoff' 
FROM Incidents i 
INNER JOIN Plans p ON i.planuid = p.uid 
INNER JOIN IncidentMessages im ON i.uid = im.incidentuid 
INNER JOIN Messages m ON im.messageuid = m.uid 
WHERE p.uid = '031E3346-2921-426E-9494-1111111111' 
UNION
SELECT TOP 1 m.sentdate AS 'calltreelastsignedoff' 
FROM Incidents i
INNER JOIN PlanExercises pe ON i.planexerciseuid = pe.uid
INNER JOIN IncidentMessages im ON i.uid = im.incidentuid 
INNER JOIN Messages m ON im.messageuid = m.uid 
WHERE pe.planuid = '031E3346-2921-426E-9494-1111111111' 
```

如果每个查询返回前 1 个结果，这将返回 2 个值。

我真正想要的是选择组合查询的前 1 个。

如何对联合查询执行选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T10:10:56.227

尝试这个：

您可以使用派生表执行此操作

```
select top 1 from
(   
  SELECT TOP 1 m.sentdate AS 'calltreelastsignedoff' 
  FROM Incidents i 
  INNER JOIN Plans p ON i.planuid = p.uid 
  INNER JOIN IncidentMessages im ON i.uid = im.incidentuid 
  INNER JOIN Messages m ON im.messageuid = m.uid 
  WHERE p.uid = '031E3346-2921-426E-9494-1111111111' 

  UNION

  SELECT TOP 1 m.sentdate AS 'calltreelastsignedoff' 
  FROM Incidents i
  INNER JOIN PlanExercises pe ON i.planexerciseuid = pe.uid
  INNER JOIN IncidentMessages im ON i.uid = im.incidentuid 
  INNER JOIN Messages m ON im.messageuid = m.uid 
  WHERE pe.planuid = '031E3346-2921-426E-9494-1111111111' 
)a
order by <col> 
```

# javascript - 我想根据值检查复选框

> ID：12245776
> 
> 赞同：-1
> 
> 时间：2012-09-03T10:09:38.160
> 
> 标签：javascript, jquery

AOA，我需要通过 jquery 在值的基础上检查复选框。例如，现在我想在加载此页面时需要检查此 chckbox。

最佳毕业生，穆萨迪克汗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:17:01.927

您可以使用 attr 命令轻松完成此操作，如下所示。

```
$(".abc").attr('checked', true); 
```

其中 abc 是复选框类的名称，例如

```
<input type="checkbox" class="abc"> 
```

如果您想在页面加载时检查它，只需使用

```
 $(document).ready(function() {
           $(".abc").attr('checked', true);
       }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T10:19:22.390

在页面加载时，您可以使用`attribute=value`选择器：

```
var valueToFind = 3; // or whatever you're looking for
$('input:checkbox[value="' + valueToFind + '"]').prop('checked',true); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/b9xEM/1/)。

参考：

*   [`[attribute="value"]`选择器](http://api.jquery.com/attribute-equals-selector)。
*   [`:checkbox`选择器](http://api.jquery.com/checkbox-selector/)。
*   [`prop()`](http://api.jquery.com/prop/).

# java - JButton 的动作监听器在 JTable 中不起作用

> ID：12245777
> 
> 赞同：2
> 
> 时间：2012-09-03T10:09:40.637
> 
> 标签：java, swing, jtable, actionlistener

我在 JTable 中有按钮。我已将 ActionListener 添加到这些按钮中，但是当我单击编辑时，什么也没有发生。

![在此处输入图像描述](../Images/92c86950a3a09bd78047575d3a417ae4.png)

```
import java.awt.BorderLayout;
import java.awt.Button;
import java.awt.Color;
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.nio.ByteOrder;

import javax.swing.DefaultComboBoxModel;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JSplitPane;
import javax.swing.JTabbedPane;
import javax.swing.JTable;
import javax.swing.JTree;
import javax.swing.border.EmptyBorder;
import javax.swing.table.JTableHeader;
import javax.swing.table.TableCellRenderer;

public class eSCCMyView extends JFrame {

/**
 * 
 */
private static final long serialVersionUID = 1L;

final int WIDTH_FRAME = 800;
final int HEIGHT_FRAME = 600;
final int x_frame = 0;
final int y_frame = 0;

private JPanel motherPanel = null;
private JButton bt_edit = new JButton("Edit");

private JTable tableA = null;
private JTable tableB = null;

private Object[] colNames = {"Col-1", "Col-2", "Col-3", "Button1", "Col-4", "Col-5", "Col-6", "Button2"};
private Object[][] data = {
                   {"One", "Two", "Three", bt_edit, "Four", "Five", "Six", bt_edit},
                   {"Four", "Five", "Six", bt_edit, "Four", "Five", "Six", bt_edit},
                   {"Four", "Five", "Six", bt_edit, "Four", "Five", "Six", bt_edit},
                   {"Four", "Five", "Six", bt_edit, "Four", "Five", "Six", bt_edit}
                   };

public static void main(String[] args) {

    EventQueue.invokeLater(new Runnable() {

        public void run() {
            try {
                JFrame eSCCFrame = new eSCCMyView();
                eSCCFrame.setVisible(true);
            }catch(Exception e) {
                e.printStackTrace();
            }
        }
    });
}

public eSCCMyView() {
    setTitle("eSCC My View");
    setBounds(x_frame, y_frame, WIDTH_FRAME, HEIGHT_FRAME);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    /*
     *  motherPanel is the main panel to which we add all the panels.
     */
    motherPanel = new JPanel();
    motherPanel.setBorder(new EmptyBorder(5, 5, 5, 5));
    motherPanel.setLayout(new BorderLayout(0, 0));
    setContentPane(motherPanel);

    /*
     * A panel is added to mother panel to add the splitPanel;
     */
    JPanel panel2AddSplit = new JPanel();
    motherPanel.add(panel2AddSplit, BorderLayout.CENTER);
    panel2AddSplit.setLayout(new BorderLayout(0, 0));

    /*
     * Add a splitPanel on top of panel2AddSplit;
     */
    JSplitPane splitPane = new JSplitPane();
    panel2AddSplit.add(splitPane, BorderLayout.CENTER);

    /*
     * Add a panel to the left of the left of the splitPanel;
     */
    JPanel pl_leftTree = new JPanel();
    splitPane.setLeftComponent(pl_leftTree);
    pl_leftTree.setBackground(Color.WHITE);
    splitPane.setResizeWeight(0.1);

    /*
     * Add tree to the left panel;      
     */
    JTree tree = new JTree();
    pl_leftTree.add(tree, BorderLayout.CENTER);

    /*
     * Add a right panel to the splitPane;
     */
    JPanel pl_rightPanel = new JPanel();
    pl_rightPanel.setLayout(new BorderLayout(0, 0));
    splitPane.setRightComponent(pl_rightPanel);

    /*
     * This panel is used to add buttons, comboBoxes, checkBoxes
     */
    JPanel pl_toAddButtons = new JPanel();
    pl_rightPanel.add(pl_toAddButtons, BorderLayout.NORTH);

    JLabel lb_plant = new JLabel("Plant");
    pl_toAddButtons.add(lb_plant);

    ImageIcon image = new ImageIcon("SampleView/images/Arrow.png");
    JButton bt_imageButton = new JButton(image);
    pl_toAddButtons.add(bt_imageButton);

    JLabel lb_subPlant = new JLabel("Sub-Plant");
    pl_toAddButtons.add(lb_subPlant);

    JButton bt_arrowButton = new JButton(" -> ");
    pl_toAddButtons.add(bt_arrowButton);

    JCheckBox ck_boxActive = new JCheckBox("Lab Active");
    pl_toAddButtons.add(ck_boxActive);

    JCheckBox ck_boxLimit = new JCheckBox("LT");
    pl_toAddButtons.add(ck_boxLimit);

    JComboBox cb_box = new JComboBox();
    cb_box.setModel(new DefaultComboBoxModel(new String []{"0 - 100", "101 - 1000", "1001 - 1500"}));
    pl_toAddButtons.add(cb_box);

    /*
     * To add a tab to the rightPanel;
     */
    JTabbedPane tabPane = new JTabbedPane(JTabbedPane.TOP);
    pl_rightPanel.add(tabPane, BorderLayout.CENTER);

    JPanel pl_firsttabPanel = new JPanel();
    tabPane.addTab("First", null, pl_firsttabPanel, null);
    pl_firsttabPanel.setBackground(Color.WHITE);
    pl_firsttabPanel.setLayout(new BorderLayout(0, 0));

    JPanel pl_secondtabPanel = new JPanel();
    tabPane.addTab("Second", null, pl_secondtabPanel, null);
    pl_secondtabPanel.setLayout(new BorderLayout(0, 0));
    /*
     * In this second tab you need to create a splitpane as a component;
     */
    //JSplitPane sp_secondTab = new JSplitPane();
    //sp_secondTab.setT

    JPanel pl_inSecondTabPanel = new JPanel();
    pl_secondtabPanel.add(pl_inSecondTabPanel, BorderLayout.CENTER);
    pl_inSecondTabPanel.setLayout(new BorderLayout(0, 0));

    JPanel pl_inSecondPanelTwo = new JPanel();
    pl_secondtabPanel.add(pl_inSecondPanelTwo, BorderLayout.SOUTH);
    pl_inSecondPanelTwo.setLayout(new BorderLayout(0, 0));

    JPanel pl_bottomPanelInSecondTab = new JPanel();
    pl_inSecondPanelTwo.add(pl_bottomPanelInSecondTab, BorderLayout.SOUTH);

    /*
     *  The following 3-buttons Save, Save & Send, Supply-Chain are present in the secondTab's Panel;
     */
    JButton bt_save = new JButton("Save");
    pl_bottomPanelInSecondTab.add(bt_save);

    JButton bt_savenSend = new JButton("Save & Send");
    pl_bottomPanelInSecondTab.add(bt_savenSend);

    JButton bt_supplyChain = new JButton("Supply Chain");
    pl_bottomPanelInSecondTab.add(bt_supplyChain);

    /*
     * We need a panel to add SplitPane in the existing two panels in the secondTab;
     */
    JPanel pl_forSplitPanel = new JPanel();
    pl_forSplitPanel.setLayout(new BorderLayout(0, 0));
    pl_inSecondTabPanel.add(pl_forSplitPanel, BorderLayout.CENTER);

    JSplitPane sp_inSecondTab = new JSplitPane();
    sp_inSecondTab.setOrientation(JSplitPane.VERTICAL_SPLIT);
    pl_forSplitPanel.add(sp_inSecondTab, BorderLayout.CENTER);

    /*
     * Assign two tables say tableA, tableB to the splitPane sp_inSecondTab;
     */
    //JTable tableA = new JTable(data, colNames);
    tableA = new JTable(new CustomModelForTable(colNames, data));
    JTableHeader tableAHeader = tableA.getTableHeader();
    tableAHeader.setBackground(Color.GRAY);

    TableCellRenderer defaultRenderer = tableA.getDefaultRenderer(JButton.class);
    tableA.setDefaultRenderer(JButton.class, new JButtonRendererClass(defaultRenderer));

    //tableB = new JTable(data, colNames);
    tableB = new JTable(new CustomModelForTable(colNames, data));
    tableAHeader = tableB.getTableHeader();
    tableAHeader.setBackground(Color.GRAY);
    TableCellRenderer tableBRenderer = tableB.getDefaultRenderer(JButton.class);
    tableB.setDefaultRenderer(JButton.class, new JButtonRendererClass(tableBRenderer));

    sp_inSecondTab.setLeftComponent(new JScrollPane(tableA));
    sp_inSecondTab.setRightComponent(new JScrollPane(tableB));
    sp_inSecondTab.setOneTouchExpandable(true);
    sp_inSecondTab.setResizeWeight(0.5);

    // Add ActionListener to bt_edit button;
    bt_edit.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            int row = tableA.getSelectedRow();
            System.out.println("Row Selected is: " + row);
            CustomModelForTable cus = (CustomModelForTable) tableA.getModel();
            cus.removeRow(row);
        }
    });
}
} 
```

**PS：**我在代码末尾为按钮添加了动作监听器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T10:28:39.320

*   [JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)中的[JButtons JComponent](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)不是简单的工作（不包括内置的[JCheckBox 作为布尔值](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html#checkbox)），

*   避免重新发明轮子或写一些关于[Render](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)和[Editor](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editor)的东西，你看过[@camickr 的很棒的代码](http://tips4java.wordpress.com/2009/07/12/table-button-column/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T10:29:21.343

我认为虽然按钮显示在表格上，但它并不是真正的按钮，而是像按钮一样呈现的单元格。

您可以收听表格的模型，以查看用户何时单击具有按钮的单元格并在发生这种情况时采取行动。

# c# - ASMX 支持多部分/表单数据？

> ID：12245779
> 
> 赞同：0
> 
> 时间：2012-09-03T10:09:47.773
> 
> 标签：c#, web-services, asmx, multipartform-data

我有一个 WFC 网络服务，它通过正常工作的 http 请求接收流数据。现在，我想在 .Asmx 中创建相同的 Web 服务，但 Web 服务总是回复我：415 Unsupported Media Type

现在，.asmx 有可能接受多部分表单/数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:50:38.170

是的，这是可能的，我已经成功地做到了。

不确定您的问题出在哪里...可能是客户吗？（编辑：您使用的是什么客户端？）

您是如何检查网络流量的？

# mysql - Sql - 我可以在记录中搜索特定数字吗？

> ID：12245781
> 
> 赞同：2
> 
> 时间：2012-09-03T10:09:53.807
> 
> 标签：mysql, sql, select, records, sql-like

我在表中有一个列，其中包含以下数据：

```
column: col_name
 row 1: 3451,3547,234,456,6487,2341,7856,546,76
 row 2: 4746,234,6757,234,7657,6346,563
 row 3: 546,7467,4562,456,234
 row 4: 563,3246,5641,4637,234,7854,567,577 
```

我希望能够根据记录中是否包含特定数字来选择记录。

例如，当 234 出现在所有行中时，它将全部选中；563出现在2中，以此类推。这不起作用：

```
select col_name from table_name where col_name like '%234%'; 
```

我认为这可能是因为我很困惑我应该如何选择列和行，但我对还有什么可以工作一无所知，感谢帮助！

编辑：我想我让自己和一些回复者感到困惑（对不起，伙计们）。我不是要查找与我的查询匹配的列名，而是要在与我的查询匹配的列中查找数据，也就是行中的数据。一些答案似乎针对未知的列名，但我知道我使用的是哪一列。

如果我搜索包含 563 的行，这就是我期望得到的结果：

```
4746,234,6757,234,7657,6346,563      (row 2)
563,3246,5641,4637,234,7854,567,577  (row 4) 
```

如果我使用查询中的所有值搜索它，如下所示：

```
select col_name from table_name where col_name = '4746,234,6757,234,7657,6346,563'; 
```

然后它将返回该行：

```
4746,234,6757,234,7657,6346,563      (row 2) 
```

但我只希望能够使用一个数字而不是多个数字来搜索它，因为它们代表不同的事物。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T10:19:09.487

您可以使用[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)执行此操作：

```
SELECT col_name 
FROM table_name 
WHERE FIND_IN_SET('563', col_name); 
```

# 示例：[SQLFiddle](http://sqlfiddle.com/#!2/da7e3/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:23:12.363

查看您在数据库中存储数据的方式，相应地选择包含逗号的模式。

您的查询是正确的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T10:22:52.550

try this one

> SELECT col_name FROM table_name WHERE ','+col_name+',' like '%,234,%';

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T10:16:50.307

尝试这个

```
SELECT col_name
FROM   table_name 
WHERE  concat(',',col_name,',') like '%,234,%'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T10:13:26.520

```
select 
      col_name
from table_name 
WHERE col_name LIKE '234,%'
OR col_name LIKE '%,234'
OR col_name LIKE '%,234,%'
OR col_name = '234' 
```

不要担心行。它将搜索您只需提供列名的行。

# ajax - Chtml Ajax Button采用最后一行的参数

> ID：12245782
> 
> 赞同：0
> 
> 时间：2012-09-03T10:09:54.837
> 
> 标签：ajax, button, yii, row

这是我从 CList 视图在模板中调用的 Ajax 按钮的代码问题是我想在编译时绑定 editid 变量，以便相应的行 ID 作为 ajax 请求的参数。

但是 yii 的惰性绑定总是在处理所有行时绑定它，因为点击任何行我只得到最后一行的 id。有什么解决方法吗

```
echo CHtml::ajaxButton("Edit",CHtml::normalizeUrl(array('fieldvals/parseajax','eid'=>$data->id)),
                    array(
                        'data'=> "js:{edtid:$data->id}",
                        'success'=>'function(resp)
                         {

                         }',
                        'complete'=>'function(data){
                            $("#message").html("Edit Mode");
                            }',
                        'type'=>'post',
                        'update' => '#data'
                        ),
                        array(
                            'id'=>'ajaxEditSubmit'.$users['ids'][$key], 
                            'name'=>'ajaxEditSubmit'.$users['ids'][$key]
                        )); ?> 
```

//CListView 配置

```
 $this->widget('zii.widgets.CListView', array(
'dataProvider'=>$dataProvider,
'itemView'=>'_view',
    )); 
```

# perl - 使用 perl 的按需进程间通信

> ID：12245788
> 
> 赞同：2
> 
> 时间：2012-09-03T10:10:23.523
> 
> 标签：perl, architecture, ipc

想象一下进程间通信

```
+--------------+                               +------------+
| main_process | ==produces data somewhat to=> | monitoring |
+--------------+                               +------------+ 
```

在哪里：

*   `main_process`正在**不停地运行**并产生一些数据`monitoring`
*   仅在`monitoring`某些时候运行，并且在运行时应读取由`main_process`
*   并且当`monitoring`不运行时，`main_process`不应保存生成的数据。

问题是：**如何编写“按需”IPC**？

的代码`main_process`基本上是下一个（真正的更复杂）：

```
use 5.014;
use warnings;
my $box = new BlackBox( callback =>  sub {
    my ($self, $jref) = @_;
    #
    # processing of $jref
    #
});
$box->run(); 
```

`callback`每 2-5 秒调用一次，正如我上面所说，这个过程应该不间断*地*运行。我无法更改黑匣子。

我需要：

*   写`processing of $jref`部分 - 什么应该发送`$jref`到*某个地方*
*   以及`monitoring`进程本身，应该读取数据的内容，运行时...

不需要任何代码，只需要一些指向正确方向的指针，或者知道如何做到这一点，而不会填满我的内存或硬盘，所以最简单的方法：

*   将 $jref 写入文件是*不合适*`monitoring`的，因为它会在未运行时填满我的硬盘。

如果有人关心，那`$jref`是对 json 字符串的引用，所以我可以这样做：

```
 use JSON::XS qw(decode_json):
 my $perlref = decode_json($$jref); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T10:28:20.583

我的第一个想法是“UDP 到 localhost？”

该想法的变体包括 AF_UNIX 或命名管道。使用流套接字，您将执行非阻塞连接，使用管道，您将执行 O_WRONLY|O_NONBLOCK，如果您获得 EAGAIN，则无需写入即可返回。

您可以保存文件句柄并在多个调用中重复使用它，只需关闭它并在获得`EPIPE`. 你会`$SIG{PIPE}='IGNORE';`希望黑匣子不会反对。

`cat $path_to_fifo`阅读方面与or一样简单`nc -l -u -p $udpport`，如果您使用 AF_UNIX 套接字，则稍微困难一些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T10:28:03.537

听起来使用套接字就足够了。选择一个端口号`P`并尝试从主应用程序 ( `localhost:P`) 连接到监视器。如果端口打开，则发送实际数据，而不是参考。如果端口关闭，则忽略数据。您的监视器将侦听`P`并处理通过此端口接收到的任何数据。

# eclipse - 无法在 Eclipse helios 上安装 subclipse

> ID：12245793
> 
> 赞同：0
> 
> 时间：2012-09-03T10:10:55.850
> 
> 标签：eclipse, subclipse, equinox, helios

当我尝试在 Eclipse Helios v3.6.2 上安装 Subclipse（最新版本）时，我收到以下错误消息：

无法完成安装，因为找不到一项或多项所需项目。Software currently installed: Shared profile 1.0.0.1305107493878 (SharedProfile_SDKProfile 1.0.0.1305107493878) Missing requirement: Shared profile 1.0.0.1305107493878 (SharedProfile_SDKProfile 1.0.0.1305107493878) requires 'toolingorg.eclipse.equinox.launcher.win32.win32.x86_64 [1.1.2.R36x_v20101222 ]' 但找不到

我应该安装Equinox sdk吗？

我在网上搜索了如何安装Equinox，但没有找到任何教程。我找到了一个 Euinox p2 安装程序应用程序，但它没有工作（错误消息：内部错误）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:50:21.340

您的 Eclipse 安装似乎有问题。我猜会有其他插件无法安装。我会尝试全新安装或干净的工作区，看看是否会有所不同。似乎安装中缺少一些基本的核心 Eclipse 部分，或者配置以某种方式损坏。

# c# - 调用 System.Drawing.Image.Save 时出现无效参数错误

> ID：12245800
> 
> 赞同：4
> 
> 时间：2012-09-03T10:11:03.710
> 
> 标签：c#, reduce, image-size

调用 System.Drawing.Image.Save 函数时出现无效参数错误。我谷歌并找到了一些建议，但没有任何效果。我想做的是，当我上传图片时，如果它大于 100kb，我想将图片大小减半。请帮忙。

```
 System.Drawing.Image FullsizeImage = System.Drawing.Image.FromFile(realpath);

                        FullsizeImage = System.Drawing.Image.FromFile(realpath);                    
                        int fileSize = (int)new System.IO.FileInfo(realpath).Length;
                        while (fileSize > 100000) //If Larger than 100KB
                        {
                            SaveJpeg(realpath, FullsizeImage);
                            fileSize = (int)new System.IO.FileInfo(realpath).Length;
                        }

 private static ImageCodecInfo GetEncoderInfo(string mimeType)
    {
        // Get image codecs for all image formats 
        ImageCodecInfo[] codecs = ImageCodecInfo.GetImageEncoders();

        // Find the correct image codec 
        for (int i = 0; i < codecs.Length; i++)
            if (codecs[i].MimeType == mimeType)
                return codecs[i];
        return null;
    }

    public static void SaveJpeg(string path, Image img)
        {

            Image NewImage = img;
            img.Dispose();

            EncoderParameter qualityParam = new EncoderParameter(Encoder.Quality, 85L);
            EncoderParameters encoderParams = new EncoderParameters(1);
            encoderParams.Param[0] = qualityParam;

            ImageCodecInfo jpegCodec = GetEncoderInfo(GetMimeType(path.Substring(path.LastIndexOf('.'), path.Length - path.LastIndexOf('.'))));
//THE ERROR IS HERE!!!!!!
            NewImage.Save(path, jpegCodec, encoderParams); 
//THE ERROR IS HERE!!!!!!

        }

    public static string GetMimeType(string extension)
        {
            if (extension == null)
            {
                throw new ArgumentNullException("extension");
            }

            if (!extension.StartsWith("."))
            {
                extension = "." + extension;
            }

            switch (extension.ToLower())
            {
                #region Big freaking list of mime types
                // combination of values from Windows 7 Registry and 
                // from C:\Windows\System32\inetsrv\config\applicationHost.config
                // some added, including .7z and .dat

                case ".323": return "text/h323";

 // more extension here..

                #endregion

                default:
                    // if you have logging, log: "No mime type is registered for extension: " + extension);
                    return "application/octet-stream";
            }
        } 
```

编辑：我修改了如下代码，现在图像正在保存，没有任何异常！谢谢！但这里有另一个问题。文件大小没有减少。这意味着我的 while 循环永远无法退出。请帮助并再次感谢。

```
using (MemoryStream ms = new MemoryStream(File.ReadAllBytes(realpath)))
                    {
                        using (Image FullsizeImage = Image.FromStream(ms))
                        {
                            //code here                           
                            int fileSize = (int)new System.IO.FileInfo(realpath).Length;
                            while (fileSize > 100000) //If Larger than 100KB
                            {
                                SaveJpeg(realpath, FullsizeImage, 85L);
                                fileSize = (int)new System.IO.FileInfo(realpath).Length;
                            }

                        }
                    } 
```

有人可以帮我吗，我的问题还没有解决:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T10:27:05.737

因为你正在处理一个`image`对象。

```
public static void SaveJpeg(string path, Image img)
 {
  Image NewImage = img;
  img.Dispose(); <------- Here
  ...
 } 
```

编辑：方法`Image.FromFile`文件打开一个流，直到您的方法没有终止，该文件才会关闭。尝试使用 MemoryStream。

```
using (MemoryStream ms = new MemoryStream(File.ReadAllBytes(realPath)))
  {
   using (Image img = Image.FromStream(ms))
    {
     ImageCodecInfo myImageCodecInfo;
     Encoder myEncoder;
     EncoderParameter myEncoderParameter;
     EncoderParameters myEncoderParameters;

     myImageCodecInfo = GetEncoderInfo("image/jpeg");
     myEncoder = Encoder.Quality;

     myEncoderParameters = new EncoderParameters(1);

     myEncoderParameter = new EncoderParameter(myEncoder, 85L);
     myEncoderParameters.Param[0] = myEncoderParameter;
     img.Save(realPath, myImageCodecInfo, myEncoderParameters);
     }
  } 
```

# wpf - 相对于程序集的本地文件的 URI

> ID：12245805
> 
> 赞同：8
> 
> 时间：2012-09-03T10:11:27.033
> 
> 标签：wpf, xaml, uri, relative-path, .net-assembly

例如，我有以下项目结构：

```
Root\Core\Application.exe
Root\Modules\Assembly.dll
Root\Modules\Icons\Icon.png 
```

我的 Application.exe 加载 Assembly.dll。Assembly.dll 包括一个带有图像控件的 WPF UserControl。Icon.png 不是嵌入式资源，它是本地文件（构建：内容）。

我在图像控件的源属性中尝试了所有可能的 URI，但它从不显示图像:-(

```
<Image Source="Icons\Icon.png" />
<Image Source="pack://application:,,,/Icons\Icon.png" />
<Image Source="pack://application:,,,/Assembly;component/Icons/Icon.png" /> 
```

等等

URI 的外观如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T10:44:32.910

此语句意味着您不能引用程序集中的内容文件...（因此只有在您的应用程序中指定的内容文件才能使用“application://”解析）。

[http://msdn.microsoft.com/en-us/library/aa970069(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa970069(v=vs.85).aspx)

> 不包括引用程序集中的内容文件，因为它们不受 WPF 支持。引用程序集中的嵌入文件的包 URI 是唯一的，因为它们包括被引用程序集的名称和 ;component 后缀。源文件站点的包 URI 是唯一的，因为它们使用的是唯一使用 siteoforigin:/// 权限的包 URI。

您可能会在某个地方出现“siteoforigin”，它指的是您的 .exe 运行的位置。

```
Source="pack://siteoforigin:,,,/../Modules/Icons/Icon.png" 
```

或者

```
Source="pack://siteoforigin:,,,/Icons/Icon.png" 
```

虽然它可能不支持相对路径。

也试一试：

```
Source="../Modules/Icons/Icon.png" 
```

和这个：

```
Source="Icons/Icon.png" 
```

尝试使用 Pack URI 时的一个提示是使用 构建它们`PackUriHelper`，以便您符合正确的语法/语义。

查看一些相关帖子：

*   [Wpf 绝对与相对包 URI](https://stackoverflow.com/questions/7772163/wpf-absolute-vs-relative-pack-uris)

*   [http://nerddawg.blogspot.co.uk/2005/12/more-on-resource-loading-in-wpf.html](http://nerddawg.blogspot.co.uk/2005/12/more-on-resource-loading-in-wpf.html)

* * *

另一个想法……

您可以定义自己的 MarkupExtension，它有助于为您的 png 文件构建绝对路径。

您将有一个全局配置设置，该设置在使用 LoadFrom 加载 DLL 之前设置。

然后你会让你的 XAML 使用扩展：

```
Source={local:MyMarkupExtensionPathBuilder Icon.png} 
```

以此为起点...在您的情况下，您不想使用“application://”...您希望将 Uri 构建为直接的绝对“文件”路径类型 URI，例如“C:\程序文件\myapplication\Root\Modules\Icons\icon.png”。

*   [http://www.switchonthecode.com/tutorials/wpf-tutorial-fun-with-markup-extensions](http://www.switchonthecode.com/tutorials/wpf-tutorial-fun-with-markup-extensions)

你可以让你的 MarkupExtension 直接返回 BitmapSource （或者只是让它返回一个字符串......然后 TypeConverter 无论如何都会解析为 BitmapSource ）。

（您也可以使用使用 Converter 连接路径的 2 个部分的 Binding 做类似的事情，或者如果您使用一个，则让您的 ViewModel 进行连接......尽管标记扩展是一种更简洁的方法）

# java - 如何在单独的进程中运行 JUnit 测试？

> ID：12245806
> 
> 赞同：4
> 
> 时间：2012-09-03T10:11:26.933
> 
> 标签：java, junit

我有 2 个使用 JUnit 实现的集成测试。这两个测试都执行对远程服务器的调用，并且服务器目标由环境变量配置：

```
System.setProperty("property", "value1"); 
```

棘手的是，对于 2 个测试，这些属性必须不同。如果我为每个单元测试设置环境变量，它就不起作用，因为我们使用的中间件在第一次调用时缓存了属性值并且不再评估它（对于第二次测试）。

我相信解决方案可能是在单独的进程中运行这些单元测试。[我在这里](https://stackoverflow.com/questions/636367/executing-a-java-application-in-a-separate-process)看到了类似的讨论，但也许有更优雅的方式来使用 JUnit4 做到这一点？这个问题看起来很常见。或者也许还有另一种方法来运行具有不同配置的单元测试？

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T10:20:16.853

这取决于您如何运行 JUnit。

如果您希望能够从 IDE 或构建中运行它，请`Runner`使用 annotation 实现您的自定义和标记测试用例`RunWith(MyRunner.class)`。

如果您使用的是 maven，并且您能够从那里运行测试`<forkMode>always</forkMode>`到`maven-surefire-plugin`定义中就足够了。

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.11</version>
            <configuration>
                <systemProperties>
                    <systemProperty>
                        <name>panpwr.conf.dir</name>
                        <value>${basedir}/conf-test</value>
                    </systemProperty>
                </systemProperties>
                <forkMode>always</forkMode> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T10:14:26.137

在测试之间无法重置状态被认为是不好的做法。虽然无法轻松测试的代码很常见，但解决方案并不简单。

即使您使用反射来执行此操作，我也会考虑重置缓存值。确切需要重置的内容取决于库的内部表示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-17T16:24:50.437

我需要在使用一些遗留代码的过程中隔离junit测试，所以我开发了小型maven插件Jute，它允许在单独的外部进程中启动每个Junit测试方法，[我已经在GitHub](https://github.com/raydac/jute)和[maven central](http://search.maven.org/#artifactdetails%7Ccom.igormaznitsa%7Cjute%7C1.0.0%7Cmaven-plugin)中发布了它，可能是插件合适您的问题的解决方案，该插件还允许使用不同的 JVM 启动此类测试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T11:29:17.210

使用[ProcessBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html) API，您可以在启动每个进程之前更改环境变量。这是一个代码片段，您可以如何做到这一点。

```
 @Test
 void testVariant1(){
      String [] commandArray = 
        {"java", "-cp", "your/class/path", "org.mydomain.myClass", ...};
      Map<String, String> envVarsForThisTest = new HashMap<String, String>();
      envVarsForThisTest.put("newProperty", "value1");
      List<String> staleVars = new List<String>();
      stateVars.add("oldProperty");
      File workingDir = new File("myDir"));
      Process p = runVariant(
                commandArray, envVarsForThisTest, staleVars, workingDir);
      Assert.assert(p.waitFor(), 0);
      checkAssertions(p.getOutputStream(), p.getErrorStream());
 }

 void checkAssertions(OutputStream output, InputStream errorStream){
      // where you'll check the return values against your expectations
 }

 void runVariant(String commandArray[], 
           Map<String, 
           String> newEnvironmentVariables, 
           List<String> environemntVariablesToRemove, 
           File workingDirectory){
      ProcessBuilder pb = new ProcessBuilder(commandArray);
      Map<String, String> env = pb.environment();
      for(Map.Entry<String, String> entry : newEnvironmentVariables){
           env.put(entry.key(), entry.value());
      }
      for(String staleVariable : environemntVariablesToRemove){
           env.remove(staleVariable);
      }
      pb.directory(workingDirectory);
      return pb.start();
 } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-03T10:26:17.520

单元测试通常不应依赖于远程服务器等外部资源。否则，您不是在测试单元，而是在测试它所依赖的资源的可用性和正确性。

那么如何测试这些单元呢？

您通常使用模拟对象执行此操作。您将对外部资源的调用封装在一个对象中，并将该对象传递给您要测试的单元（称为[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)）。在您的单元测试中，您没有传递真正的服务器抽象对象。相反，您传递的是实现相同接口或扩展服务器抽象类的模拟对象。模拟对象并不真正查询服务器。相反，它立即返回服务器应返回的值。

这可能需要对您的代码进行一些重构。但它允许您的单元测试在不依赖外部资源的情况下工作。它还使测试变得更快，从而减少了测试套件的整体执行时间。这使您可以更频繁地执行单元测试

# c++ - 为什么 istreambuf_iterator 不能提前工作

> ID：12245809
> 
> 赞同：2
> 
> 时间：2012-09-03T10:11:35.763
> 
> 标签：c++, iterator, binaryfiles, ifstream, istream-iterator

我正在阅读[Constructing a vector with istream_iterators](https://stackoverflow.com/questions/4423361/constructing-a-vector-with-istream-iterators)这是关于将完整的文件内容读入字符向量。虽然我希望将文件的一部分加载到字符向量中。

```
#include <iostream>
#include <fstream>
#include <iterator>
#include <vector>
#include <algorithm>

using namespace std;

int main(int argc, char *argv[])
{
    ifstream ifs(argv[1], ios::binary);
    istreambuf_iterator<char> beginItr(ifs);
    istreambuf_iterator<char> endItr(beginItr);
    advance(endItr, 4);
    vector<char> data(beginItr, endItr);
    for_each(data.cbegin(), data.cend(), [](char ch)
    {
            cout << ch << endl;
    });
} 
```

这不起作用，因为提前不起作用，而上述问题的接受答案有效。为什么提前不工作`istreambuf_iterator`？

还

```
 endItr++;
  endItr++;
  endItr++;
  endItr++;
  cout << distance(beginItr, endItr) << endl; 
```

返回 0。请有人解释发生了什么！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T10:14:47.790

> 为什么提前在 istreambuf_iterator 上不起作用？

有用。它推进迭代器。问题是 an`istreambuf_iterator`是一个*输入迭代器*，但不是一个*前向迭代器*，这意味着它是一个单程迭代器：一旦你推进它，你将永远无法再次访问之前的状态。要做你想做的事，你可以简单地使用一个计数为 4 的老式 for 循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T10:43:05.053

`istreambuf_iterator`从 a 中读取*连续*字节`basic_streambuf`。它不支持定位（`basic_istream::seekg`和`basic_istream::tellg`）。

这是因为它是单通道输入迭代器，而不是前向迭代器或随机访问迭代器；它被设计为能够处理不支持定位的流（例如管道或 TCP 套接字）。

您可能会发现[文件/ifstream 上的双向迭代器](https://stackoverflow.com/questions/9026734/bidirectional-iterator-over-file-ifstream)中的一些解决方案很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-25T04:44:15.250

如果其他人偶然发现了这个问题，并且想要一些替代的简单代码，你可以尝试这样的事情：

```
 std::vector<char> buffer{4};
        std::ifstream source{argv[1], std::ios_base::binary};
        source.read(buffer.data(), buffer.size()); 
```

# dns - 加载特定领域的内容

> ID：12245810
> 
> 赞同：0
> 
> 时间：2012-09-03T10:11:36.840
> 
> 标签：dns

假设我有一个应用程序坐在

```
myapp.com 
```

该应用程序的客户或用户位于此处

```
myapp.com/jonny
myapp.com/sally 
```

我想允许用户将他们自己的域指向我的服务器（A 记录）并加载他们的特定内容。没有重定向或任何东西。

```
jonnysapp.com -> myapp.com/jonny 
```

所以我的服务器需要以某种方式检测请求来自哪里并设置客户端......正确吗？

更新

我正在使用一个非常标准的 LAMP 堆栈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:36:23.260

我用 IIRF 解决了一个类似的问题（我用的是 IIS，你不说你用的是什么）。

```
RewriteEngine ON
RedirectRule 0

# rewrite the Url to a folder, the host starts WWW 
RewriteCond     %{HTTP_HOST}         ^(www\.)([^\.]+)\.     [I]
RewriteRule     ^/content/(.*)       /content/$1             [L]

RewriteCond     %{HTTP_HOST}         ^(www\.)([^\.]+)\.     [I]
RewriteRule     ^/(.*)$              /content/*2/$1           [L] 
```

每个域都具有与您建议的相同的 A 记录，并且我的设置将每个子站点都放在*content*的子文件夹中。例如

```
www.jonnysapp.com -> www.myapp.com/content/jonny 
```

我这样做的原因是为了停止重写器中的无限循环，没有某种可预测的令牌来测试重写器重写两次（即使我告诉它只做一次），我最终会得到*myapp .com/jonny/jonny*

# php - PHP - 匹配没有被 HTML 标签包围的空格

> ID：12245812
> 
> 赞同：0
> 
> 时间：2012-09-03T10:11:46.040
> 
> 标签：php, regex

我有这样的文字：

```
Word word word <a href=google.com>word word word</a> word word word 
```

我需要空格的位置，它们没有被任何 html 标记包围 - 下面带下划线的空格位置：

```
Word_word_word_<a href=google.com>word word word</a>_word_word_word 
```

我应该使用什么正则表达式（in `preg_match()`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:28:39.587

一个相当简单的方法：

```
$test = 'Word word word <a href=google.com>word word word</a> word word word';
$t = preg_replace('#\s+((?=.*<a)|(?!.*</a>))#', '_', $test);
var_dump($t); 
// string 'Word_word_word_<a href=google.com>word word word</a>_word_word_word' 
```

显然，它不适用于可能包含多个嵌入式 href 的字符串；对于这些情况，我建议另一种方法：1）按`<a href...>...</a>`部分拆分字符串，2）替换非链接部分中的所有空格；3) 重构字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:22:16.770

使用[`str_replace`](http://php.net/manual/en/function.str-replace.php)功能：

```
$string = "Sample Sample Sample Sample Sample";
$name = str_replace(' ', '_', $string );
echo $name; 
```

# mysql - 为数据类型分配的大小

> ID：12245821
> 
> 赞同：0
> 
> 时间：2012-09-03T10:12:32.483
> 
> 标签：mysql

如果我在 charset latin1 上设置 varchar (250) say 当我添加一个值 say 'abc' 字符时，这是否意味着为其分配的数据是 251 字节或 4 字节？其他数据类型也会这样吗？请指教？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:15:27.973

当您有一个 varchar(250) 并添加 'abc' 时，将分配 3 个字节/字符。如果您有用户 char(250)，则将分配 250 个字节/字符。

请注意，对于 VARCHAR，内部使用最小的存储开销来表示数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:48:04.747

MySQL 手册有一整[章是关于存储要求](http://dev.mysql.com/doc/refman/5.6/en/storage-requirements.html)的。

A`VARCHAR(250) NOT NULL`用一个字节来存储长度*n*，用*n*个字节来存储实际的字符串。因此，保存一个值的列`'abc'`将占 4 个字节。在 a`VARCHAR(250) NULL`中，nullity 占用一位，而`NULL`value 不会占用其他任何内容。非空值占用该位，长度为一个字节，数据为*n*个字节。*这里需要一点*意味着几个可为空的列共享一个或多个字节来记录它们的空值。

其他可变长度数据类型类似。各种大小的 BLOB 和 TEXT 类型的长度可能不止一个字节，但在其他方面的工作方式几乎相同。数字类型以及固定长度`CHAR`类型具有固定的内存要求。我想我`CHAR`会省略长度字节，因为它的内容用空格填充到该固定长度。

索引可能会增加内存需求。多字节字符集（包括 UTF-8）可能会增加内存要求，因此上述语句仅在您的表是为 latin1 或类似文件创建时才成立。

# hadoop - 将文本文件读入 Hbase MapReduce 并将其存储到 HTable

> ID：12245822
> 
> 赞同：0
> 
> 时间：2012-09-03T10:12:36.783
> 
> 标签：hadoop, mapreduce, hbase

我是 HBaseMapReduce 和 Hadoop 数据库的新手。我需要从 mapreduce 作业中读取原始文本文件，并使用 HBase MapReduce API 将检索到的数据存储到 Htable 中。

我从五月开始就在谷歌上搜索，但我无法理解确切的流程。任何人都可以为我提供一些从 A 文件中读取数据的示例代码。

我需要从文本/csv 文件中读取数据。我可以找到一些从命令提示符读取数据的示例。我们可以使用哪种方法来读取 xml 文件`FileInputFormat`，或者请帮助我学习 Mapreduce API，并请提供简单的读写示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T10:29:56.747

您可以使用 importtsv 和 completebulkupload 工具将 csv 数据导入 HBase。importtsv 将 csvs 加载到 hadoop 文件，而 completebulkupload 将它们加载到指定的 HTable。您可以从命令行和 Java 代码中使用这些工具。如果这可以帮助您通知我提供示例代码或命令

# objective-c - UIButton 背景不会是透明的

> ID：12245824
> 
> 赞同：1
> 
> 时间：2012-09-03T10:12:44.713
> 
> 标签：objective-c, user-interface, uibutton

我正在尝试创建一个自定义 UIButton，但是当我将背景设置为清晰/透明时，它会用黑色填充框架的背景。我不是在 IB 中创建这些，我需要以编程方式执行此操作。有什么我想念的吗？

```
UIButton* btn = [UIButton buttonWithType: UIButtonTypeCustom];
btn.frame = rect;
[btn addTarget: self action:@selector(toggleMaster) forControlEvents: UIControlEventTouchUpInside];
btn.opaque = NO;
btn.backgroundColor = [UIColor clearColor];
[btn setBackgroundImage: [UIImage imageNamed: [NSString stringWithFormat: @"%@_icon", self.currentKey]] forState: UIControlStateNormal];
[self addSubview: btn]; 
```

编辑：我意识到我应该提到我在 `drawRect`UIView 的方法中这样做。不好的做法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:16:43.677

我认为您不需要设置`backgroundColor`,`UIButtonTypeCustom`默认情况下已经是透明的。你试过没有它吗？另外，图片是透明的吗？按钮的大小是一样的吗？

# firefox - Firefox 无法验证网站证书

> ID：12245828
> 
> 赞同：0
> 
> 时间：2012-09-03T10:13:04.180
> 
> 标签：firefox, hosting, ssl

我有一个网站托管在我的专用服务器中。当我现在尝试访问我的网站（在 Firefox 中）时，它会说**This Connection is Untrusted**。

![在此处输入图像描述](../Images/b9be0940c4df54d38b4d8e3b67748235.png) 我是否需要更改我的源代码中的某些内容，或者我应该询问托管公司？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:14:02.573

您正在尝试访问没有有效证书的安全 (https) 站点。您需要获得一个有效的证书（与您的托管公司交谈）或不使用 HTTPS。

# c# - 动态转换为通用接口

> ID：12245833
> 
> 赞同：2
> 
> 时间：2012-09-03T10:13:15.990
> 
> 标签：c#, reflection

我有一个具有以下语法的外部函数：

```
public void Set<FieldType>(
    Field field,
FieldType value
) 
```

字段类型可以是一些原始类型，如**int**、**double**、**bool**等，也可以是这些类型的通用列表，例如**IList< int >**

问题是我必须准确地传递一个*IList< T >*接口。如果我传递任何实现*IList< T >*接口的类型，该函数将抛出**InvalidOperationException** *Unsupported type: System.Collections.Generic.List`1[[System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089] ]*

例如：

```
IList<int> list1 = new List<int>();
List<int> list2 = new List<int>();

Entity entity = new Entity();

//this works fine
entity.Set(field, list1);

//Here exception is throw
entity.Set(field, list2);

//works fine as well
entity.Set(field, list2 as IList<int>); 
```

我通过反射动态获取列表的问题

```
var property = entityType.GetProperty(field.FieldName);
dynamic propertyValue = property.GetValue(myObject, null); 
```

因此， propertyValue 是*List< T >*，而不是*IList< T >*，当我将此值传递给外部函数时，我看到了一个异常。

显然，这是一个外部函数的错误。

我唯一的想法是将 propertyValue 转换为*IList< T >*。**但我在编译时不知道 T**。

所以，我需要动态投射。我有一个通用列表接口类型，如变量

```
var genericIListType = typeof (IList<>)
    .MakeGenericType(field.ValueType); 
```

但我找不到如何将 propertyValue 转换为这种类型的方法。我只能找到如何将对象转换为其他对象的示例（例如使用*Activator.CreateInstance*），但我需要转换为接口。

请给我建议如何实现目标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T10:21:24.577

您可以包装外部函数：

```
public void SetWrapper<T>(Field field, List<T> list) {
    entity.Set(field, (IList<T>)list);
} 
```

# c# - DataTable 修改后的行数在适配器填充后恢复为 0

> ID：12245840
> 
> 赞同：0
> 
> 时间：2012-09-03T10:13:48.103
> 
> 标签：c#, ado.net, datatable

如果这是一个愚蠢的错误，我深表歉意——但我已经为此苦苦挣扎了几个星期，我不再继续了。

问题是 - 我从基于 DT 的 DS 到 SQL Db 的更新调用只是插入 nerw 记录，而不是更新修改过的记录。

我有一个数据源（httpWebRequested html 表），我定期调用它并用它更新属于 DataSet 的 DataTable。最初我将它全部解析为第二个 DataTable 并将其与我的 DataSet 表合并 - 但这不起作用，所以目前我只有一个 DataTable 并且要么将新行插入到表中，要么通过迭代源并添加一行来更新现有值一个数组的时间 - 检查当前行的存在，并更新或插入（[Session ID] 是一个 PK，Data[0] 是对应的唯一值）：-

```
 foreach (var row in rows.Skip(1))
            {
                //create new list collection
                var data = new List<string>();
                //interate through rows
                foreach (var column in row.Descendants("td"))
                {
                    //add data to list from Table
                    data.Add(column.InnerText);
                }
                    string strSelect = "[Session ID] = '"+ data[0] +"'";
                    DataRow[] myRow = dt.Select(strSelect);
                    if (myRow.Length == 1)
                    {
                        if (myRow[0][2].ToString() != data[2].ToString())
                        {
                            myRow[0][2] = data[2];
                        }
                        if (myRow[0][3].ToString() != data[3].ToString())
                        {
                            myRow[0][3] = data[3];
                        }
                        if (myRow[0][4].ToString() != data[4].ToString())
                        {
                            myRow[0][4] = data[4];
                        }
                        if (myRow[0][5].ToString() != data[5].ToString())
                        {
                            myRow[0][5] = data[5];
                        }
                        if (myRow[0][7].ToString() != data[7].ToString())
                        {
                            myRow[0][7] = data[7];
                        }
                    }
                    else
                    {
                        dt.Rows.Add(data.ToArray());
                    } 
```

我在最后也加了一点，计算了添加和修改：-

```
 int modified= 0;
            int added = 0;
            foreach (DataRow dr in pca.chatDataSetG.Tables[0].Rows)
            {
                if (dr.RowState == DataRowState.Modified)
                {
                    modified++;
                }
                if (dr.RowState == DataRowState.Added)
                {
                    added++;
                }
            } 
```

此时 - 计数很好 - 修改后拾取属性已更改和添加的行是正确的。

当我调用我的更新 Db 方法时 - 事情开始出错： -

```
 public static void updateSqlTable()
    {

        string connectionString = "Connection String here";
        string qry = @"select * from chatData";

        SqlConnection conn = new SqlConnection(connectionString);

        try
        {
            SqlDataAdapter da = new SqlDataAdapter(qry, conn);
            SqlCommandBuilder sb = new SqlCommandBuilder(da);
            log.Info("Building Queries...");
            da.UpdateCommand = sb.GetUpdateCommand();
            da.InsertCommand = sb.GetInsertCommand();
            da.DeleteCommand = sb.GetDeleteCommand();

            log.Info("Filling Data into Adapter...");
            int modified = 0;
            int added = 0;
            foreach (DataRow dr in pca.chatDataSetG.Tables[0].Rows)
            {
                if (dr.RowState == DataRowState.Modified)
                {
                    modified++;
                }
                if (dr.RowState == DataRowState.Added)
                {
                    added++;
                }
            }
            //This is where the modified count reverts
            da.Fill(pca.chatDataSetG, "Chat");
            modified = 0;
            added = 0;
            foreach (DataRow dr in pca.chatDataSetG.Tables[0].Rows)
            {
                if (dr.RowState == DataRowState.Modified)
                {
                    modified ++;
                }
                if (dr.RowState == DataRowState.Added)
                {
                    added++;
                }
            }
            conn.Open();
            log.Info("Calling Update to DB...");
            int rowseffected = da.Update(pca.chatDataSetG, "Chat");
            log.Info("Update Complete - " + rowseffected + " rows effected........");

        }
        catch (Exception ex)
        {
            log.Error("Error Updating Db with chat Data", ex);
        }
        finally
        {
            conn.Close();
        }

    } 
```

计数正好在填充之前，但之后 - 添加的计数保持不变 - 好，但修改后的计数变为 0 - 坏:(。我尝试了所有形状来尝试看看这里发生了什么 - 但老实说 -我很难过。任何帮助都会非常非常非常感谢。数据库中的行没有反映新的值。

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:35:45.700

您确实在这行代码中重新填充了 DataSet/Tables

```
//This is where the modified count reverts
da.Fill(pca.chatDataSetG, "Chat"); 
```

在 MSDN DataAdapter 填充中，我认为对所描述的行为有解释

> 您可以在同一个 DataTable 上**多次**使用 Fill 方法。如果 存在主键，则传入行将与已存在**的匹配行合并。****如果不存在主键，则将传入行附加到 DataTable**。

IMO 修改的行已与数据库中的原始拥有合并，因此失去其 rowState，而插入的项目已按所述附加。

# php - PHP中的多子数组

> ID：12245843
> 
> 赞同：4
> 
> 时间：2012-09-03T10:13:56.637
> 
> 标签：php

我有`elements`如下输入

```
 <form method="post" >
1       <input type="text" name="passname[name]" /> <br/> <br/>
2       <input type="text" name="passname[type]" /> <br/> <br/>
3       <input type="text" name="passname[age]" /> <br/> <br/>

1       <input type="text" name="passname[name]" /> <br/> <br/>
2       <input type="text" name="passname[type]" /> <br/> <br/>
3       <input type="text" name="passname[age]" /> <br/> <br/>

        <input type="submit" name="send" value="Submit" /> <br/>
    </form> 
```

我想要所有的`text box`as 数组`php`

像下面

```
Passenger Name : passname[name]
Passenger Type : passname[type]
Passenger Age : passname[age] 
```

这可能与php

表格中使用的表格代码

```
<input type="text" name="passname[name][]" /> <br/> <br/>
<input type="text" name="passname[type][]" /> <br/> <br/>
<input type="text" name="passname[age][]" /> <br/> <br/>

<input type="text" name="passname[name][]" /> <br/> <br/>
<input type="text" name="passname[type][]" /> <br/> <br/>
<input type="text" name="passname[age][]" /> <br/> <br/> 
```

当我提交表单时，我得到这种类型的数组值

```
 array
  'passname' => 
        array
          'name' => 
            array
              0 => string '1' (length=1)
              1 => string '1' (length=1)
          'type' => 
            array
              0 => string '2' (length=1)
              1 => string '2' (length=1)
          'age' => 
            array
              0 => string '3' (length=1)
              1 => string '3' (length=1)
      'send' => string 'Submit' (length=6) 
```

我怎么能在每一个喜欢的打击中做到这一点

```
<?php
if(isset($_POST['aa']))
{
    $number = $_POST['1'];
    $text = $_POST['2'];
    foreach($number as $key=>$val)
    {
        echo $val."=".$text[$key]."<br />";
    }
}
?>
<formid="a"name="a"method="post">
<selectid="1[]"name="1[]">
<optionvalue="1">1</option>
<optionvalue="3">3</option>
<optionvalue="2">2</option>
</select>
<inputtype="text"value=""id="2[]"name="2[]"/>
<selectid="1[]"name="1[]">
<optionvalue="1">1</option>
<optionvalue="3">3</option>
<optionvalue="2">2</option>
</select>
<inputtype="text"value=""id="2[]"name="2[]"/>
<inputtype="submit"id="aa"name="aa"value="send now"/>
</form> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T10:16:41.067

```
<input type="text" name="passname[name][]" /> <br/> <br/>
<input type="text" name="passname[type][]" /> <br/> <br/>
<input type="text" name="passname[age][]" /> <br/> <br/> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-03T10:16:12.887

```
<form method="post" >
       <input type="text" name="passname[name][]" /> <br/> <br/>
       <input type="text" name="passname[type][]" /> <br/> <br/>
       <input type="text" name="passname[age][]" /> <br/> <br/>

       <input type="text" name="passname[name][]" /> <br/> <br/>
      <input type="text" name="passname[type][]" /> <br/> <br/>
       <input type="text" name="passname[age][]" /> <br/> <br/>

        <input type="submit" name="send" value="Submit" /> <br/>
    </form>

<?php
$_POST['passname']['name'];
$_POST['passname']['type'];
$_POST['passname']['age'];
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T10:20:33.953

如果你想让乘客分开，你应该像这样构建你的表单：

```
<form method="post" >
  <input type="text" name="passname[0][name]" /> <br/> <br/>
  <input type="text" name="passname[0][type]" /> <br/> <br/>
  <input type="text" name="passname[0][age]" /> <br/> <br/>

  <input type="text" name="passname[1][name]" /> <br/> <br/>
  <input type="text" name="passname[1][type]" /> <br/> <br/>
  <input type="text" name="passname[1][age]" /> <br/> <br/>

  <input type="submit" name="send" value="Submit" /> <br/>
</form> 
```

然后，一旦提交，您的`$_POST`数组将如下所示：

```
$_POST == array(
  0 => array(
    'name' => 'XXX',
    'type' => 'XXX',
    'age' => 'XXX',
  ),
  1 => array(
    'name' => 'XXX',
    'type' => 'XXX',
    'age' => 'XXX',
  ),
  'send' => 'Submit',
); 
```

其中`XXX`表示用户输入数据。

# ruby-on-rails - postgresql 在 osx 上创建用户

> ID：12245846
> 
> 赞同：0
> 
> 时间：2012-09-03T10:14:01.723
> 
> 标签：ruby-on-rails, ruby, bash, postgresql, path

我在 osx 上，我在创建用户 postgresql 时遇到问题。当我写命令时：

```
createuser myapp -s 
```

我收到以下错误：

```
could not connect to database postgres: could not connect to server: No such file or directory
Is the server running locally and accepting
connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

我不知道这是否只是 PATH 目录问题。

```
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting 
```

我用这个解决方案安装了 postgresql：http: [//tammersaleh.com/posts/installing-postgresql-for-rails-3-1-on-lion](http://tammersaleh.com/posts/installing-postgresql-for-rails-3-1-on-lion)

感谢您的帮助，并为我的英语不好感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:57:32.447

您确定 postgres 服务器正在运行吗？（使用“ps ax | grep postgres”）。它是否打开了 TCP 端口（默认为 5432）？这个 unix 套接字“/var/pgsql_socket/.s.PGSQL.5432”是否可用，您是否有权读取/写入它？

此外，您可能需要检查配置 postgres 服务器本身权限的 pg_hba.conf 文件。

# java - JSF 部署错误“在 javax.faces.context.FacesContext.isProcessingEvents(FacesContext.java:300)”

> ID：12245849
> 
> 赞同：1
> 
> 时间：2012-09-03T10:14:14.873
> 
> 标签：java, jsf, jakarta-ee, deployment, websphere

我想在 Websphere 上部署一个企业项目。

我得到了以下异常。

可能是什么原因？

```
[03.09.12 11:21:05:636 CEST] 0000001a webapp        E com.ibm.ws.webcontainer.webapp.WebApp notifyServletContextCreated SRVE0283E: Exception caught while initializing context: {0}
                                 java.lang.StackOverflowError
    at java.lang.ThreadLocal$ThreadLocalMap.getEntry(ThreadLocal.java:371)
    at java.lang.ThreadLocal$ThreadLocalMap.access$000(ThreadLocal.java:254)
    at java.lang.ThreadLocal.get(ThreadLocal.java:138)
    at javax.faces.context.FacesContext.isProcessingEvents(FacesContext.java:293)
    at javax.faces.context.FacesContext.isProcessingEvents(FacesContext.java:300)
    at javax.faces.context.FacesContext.isProcessingEvents(FacesContext.java:300)
    at javax.faces.context.FacesContext.isProcessingEvents(FacesContext.java:300)
    at javax.faces.context.FacesContext.isProcessingEvents(FacesContext.java:300)
    at javax.faces.context.FacesContext.isProcessingEvents(FacesContext.java:300)
    at javax.faces.context.FacesContext.isProcessingEvents(FacesContext.java:300)
    at javax.faces.context.FacesContext.isProcessingEvents(FacesContext.java:300)
    at javax.faces.context.FacesContext.isProcessingEvents(FacesContext.java:300) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:06:48.263

堆栈跟踪[表明](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.myfaces.core/myfaces-api/2.1.8/javax/faces/context/FacesContext.java#291)您正在使用 MyFaces 并且在代码之前的某个时间点`FacesContext.setCurrentInstance(FacesContext.getCurrentInstance())`被调用，这将导致这种无限循环。

根据目前提供的信息，我只能说这些。我不确定为什么用当前实例设置了 faces 上下文的当前实例。也许这是您自己代码中的错误，或者配置错误。验证污染的类路径（重复旧版本的 JAR）并验证任何启动代码（`Filter#init()`,`ServletContextListener#contextInitialized()`等），如果它没有做一些奇怪的事情。

# c# - 输入字符串格式不正确错误

> ID：12245852
> 
> 赞同：3
> 
> 时间：2012-09-03T10:14:28.913
> 
> 标签：c#

我正在尝试在 21 天内使用 Sams Teach Yourself C# 学习 C# 的基础知识。

我通过从第 1 天类型和运行部分逐行复制它来创建这个程序。它编译得很好，但是当你运行它时，它会给出这个错误：“输入字符串的格式不正确”。

我正在从控制台运行程序。

我正在使用 Visual Studio 2010 Express 编辑器。

我复制的代码是：

```
using System;
using System.IO;

/// <summary>
/// Class to number a listing. Assumes fewer than 1000 lines.
/// </summary>

class NumberIT
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>

    public static void Main(string[] args)
    {
        // check to see if a file name was included on the command line.

        if (args.Length <= 0)
        {
            Console.WriteLine("\nYou need to include a filename.");
        }
        else
        {
            // declare objects for connecting to files...
            StreamReader InFile = null;
            StreamWriter OutFile = null;

            try
            {
                // Open file name included on command line...
                InFile = File.OpenText(args[0]);

                // Create the output file...
                OutFile = File.CreateText("outfile.txt");
                Console.Write("\nNumbering...");

                // Read first line of the file...
                string line = InFile.ReadLine();
                int ctr = 1;

                // loop through the file as long as not at the end...
                while (line != null)
                {
                    OutFile.WriteLine("{1}: {2}", ctr.ToString().PadLeft(3, '1'), line);
                    Console.Write("..{1]..", ctr.ToString());
                    ctr++;
                    line = InFile.ReadLine();
                }
            }

            catch (System.IO.FileNotFoundException)
            {
                Console.WriteLine("Could not find the file {0}", args[0]);
            }
            catch (Exception e)
            {
                Console.WriteLine("Error: {0}", e.Message);
            }
            finally
            {
                if (InFile != null)
                {
                    // Close the files
                    InFile.Close();
                    OutFile.Close();
                    Console.WriteLine("...Done.");
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:34:13.773

您的罪魁祸首是 OutFile.WriteLine 和 Console.Write 语句：

```
OutFile.WriteLine("{1}: {2}", ctr.ToString().PadLeft(3, '1'), line);
Console.Write("..{1]..", ctr.ToString()); 
```

它应该是：

```
OutFile.WriteLine("{0}: {1}", ctr.ToString().PadLeft(3, '1'), line);
Console.Write("..{0}..", ctr.ToString()); 
```

请注意，格式字符串中的占位符从 0 开始。第二个语句中的右括号是方括号，而不是大括号。

另一个提示：你不需要在后一种情况下调用`.ToString()`，`ctr`除非你想明确指定一种文化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:35:29.437

有几点需要注意：

```
OutFile.WriteLine("{1}: {2}", ctr.ToString().PadLeft(3, '1'), line); 
```

索引是基于 0 的，所以它应该是`OutFile.WriteLine("{0}: {1}"...`

```
Console.Write("..{1]..", ctr.ToString()); 
```

这里有一个错字！（我希望！），它应该是 0 而不是 1。

# html - 在支持 HTML5 的浏览器中，对于本地文件系统上的键值数据库，如何处理同源策略？

> ID：12245854
> 
> 赞同：1
> 
> 时间：2012-09-03T10:14:33.720
> 
> 标签：html, security, same-origin-policy, key-value-store

我有一个 webapp，作为一个主要的吸引力，它可以处理键值存储之外的部分个人信息管理。从我的网站访问时，它在基本级别上工作；我想知道它的工作情况如何，或者打包为可下载的 zip 文件、保存的页面等，如果有什么我可以做的让它在作为本地文件运行而不是从下载时更好地工作浏览器。

浏览器的键值存储如何处理作为本地文件系统上的点的原点？

# asp.net-mvc-3 - 为新内容重用域名并永久删除 beta 站点索引内容

> ID：12245856
> 
> 赞同：0
> 
> 时间：2012-09-03T10:14:36.967
> 
> 标签：asp.net-mvc-3, iis-7, seo

我在 IIS 7+ 上部署的站点存在三个问题。

1.  我将现有域名重新用于与旧域名完全不同的内容。问题是旧网站已被谷歌索引，但新网站上不再提供内容。如何删除谷歌上的旧内容索引？

2.  我在 AWS 上托管了一个 beta 站点，并向其中添加了大量的测试数据。我不知道 Robots.txt，所以该网站已被抓取。该站点只能通过 IP 访问。我现在已经将我的生产站点移动到同一台服务器上，并将 ip 链接到顶级域。问题是旧的测试数据在搜索中出现并通过 ip 链接重定向到生产站点。测试数据不再可用

3.  我有两个顶级域 .co.in 和 .in 都指向同一个服务器。我是否需要配置一些东西以免我因重复内容而受到谷歌的惩罚？

我已经搜索了论坛和网络，但不确定如何为我的 mvc 3 应用程序配置 301 或 302

皮纳金

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:48:36.487

1.  您可以向 google 提交请求，要求他们从索引中删除内容 (http://support.google.com/webmasters/bin/answer.py?hl=en&answer=1663416)，但这可能暂时不会发生。如果内容不再存在，Google 会自动从其索引中删除该内容。同时，您应该使用 URL 重写从服务器返回响应，如下所示

    *   `301 Moved Permanently`如果内容在其他位置仍然可用，则发出 a
    *   `303 See Other`如果与缺失内容的上下文相似的内容在其他位置仍然可用，则发出a
    *   `404 Not Found`如果内容不再可用，则发出 a
2.  对于测试数据 url 的设置 URL 重写以发出`404 Not Found`. 这将迫使搜索引擎从它的索引中删除丢失的内容。它不会立即发生，但最终会发生。

3.  设置 IIS 重写规则，以便`.co.in`重定向到`.in`（反之亦然）。这将确保尽管您的内容可以从多个域访问，但您只有 1 个主域，因此搜索引擎不会因重复内容而惩罚您

# asp.net-mvc-3 - MVC3 中的 Ajax 请求

> ID：12245857
> 
> 赞同：0
> 
> 时间：2012-09-03T10:14:40.420
> 
> 标签：asp.net-mvc-3

我是 Ajax 新手，我正在尝试使用 jquery 通过 ajax 调用从数据库中获取数据。

我有一个国家选项卡列表，我正在尝试在有用户操作时显示数据

这是我的代码示例，目前它说有一个空系统引用。

```
 public ActionResult Details(int id, string searchTerm)
        {
            // Do we have a search term
            if (!String.IsNullOrEmpty(searchTerm))
            {
                // decode the searchTerm as we dont want to search for encoded bits
                searchTerm = Decode(searchTerm);
            }
        var a = _mRepository.GetMyId(id);
        if (a == null)
        {
            return View("NotFound");
        }

       // Here we need to get list of countries for the selected manufacturer

        var c = _mwRepository.Getcountries(id);

        ViewData["Countries"] = c.ToArray();

        // Now we need list of products for the manufacturer countries and this is an Ajax call to database so that it fetches data only when there is a user action
        foreach (var country in c)
        {
            var p = _productRepository.GetAllCurrentProductsForManufacturerCountry(id, 
               country.Id);

        }
            if(Request.IsAjaxRequest())
            {
                                  ViewData["ManufacturerCountryProducts"] = 

                                  p.ToArray();
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:14:58.233

```
public class CountryProducts
{
    public Country Country { get; set; }
    public List<Product> ProductsList { get; set; }
}

[HttpPost]
public ActionResult Details( int id, string searchTerm )
{
    // Do we have a search term
    if ( !String.IsNullOrEmpty( searchTerm ) )
    {
        // decode the searchTerm as we dont want to search for encoded bits
        searchTerm = Decode( searchTerm );
    }
    var a = _mRepository.GetMyId( id );
    if ( a == null )
    {
        return View( "NotFound" );
    }

    // Here we need to get list of countries for the selected manufacturer
    List<Country> countriesList = _mwRepository.Getcountries( id );

    var data = new List<CountryProducts>();
    if ( countriesList != null )
    {
        foreach (var country in countriesList)
        {
            List<Product> products = _productRepository.GetAllCurrentProductsForManufacturerCountry(id,
                                                                                                    country.Id);
            data.Add(new CountryProducts() {Country = country, ProductsList = products});
        }
    }

    if (Request.IsAjaxRequest())
    {
        ViewData["CountryProducts"] = data.ToArray();
    }
} 
```

但我对 ajax 使用了两种不同的方法，例如：

```
public ActionResult Details( int id )
{
    ...
    return View(model);
}

//for ajax request:
[HttpGet]
public JsonResult Details( int id, string searchTerm )
{
    return new JsonResult()
               {
                   JsonRequestBehavior = JsonRequestBehavior.AllowGet,
                   Data = GetFilteredDetailsData(id, searchTerm)
               };
} 
```

# python - 使用非均匀度量集成函数（python/scipy）

> ID：12245859
> 
> 赞同：1
> 
> 时间：2012-09-03T10:14:46.200
> 
> 标签：python, numpy, scipy, probability, numerical-methods

我想在 python 中集成一个函数并提供用于采样值的概率密度（度量）。如果不明显，集成`f(x)dx`隐`[a,b]`式使用 上的均匀概率密度`[a,b]`，我想使用我自己的概率密度（例如指数）。

我可以自己做，`np.random.*`但随后

*   我想念`scipy.integrate.quad`. 或者也许所有这些优化都假设密度均匀？
*   我需要自己进行误差估计，这不是微不足道的。或者也许是？也许误差只是 的方差`sum(f(x))/n`？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:10:15.113

正如 unutbu 所说，如果你有密度函数，你可以使用`scipy.integrate.quad`.

对于 中可用的分布`scipy.stats`，我们也可以只使用 expect 函数。

例如

```
>>> from scipy import stats

>>> f = lambda x: x**2

>>> stats.norm.expect(f, loc=0, scale=1)
1.0000000000000011

>>> stats.norm.expect(f, loc=0, scale=np.sqrt(2))
1.9999999999999996 
```

`scipy.integrate.quad`也有一些预定义的权重函数，尽管它们没有被归一化为概率密度函数。

近似误差取决于调用的设置`integrate.quad`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:06:47.187

为简洁起见，提出了 3 种方法来计算概率 p(x) 下的 f(x) 的期望值：

*   假设 p 以封闭形式给出，`scipy.integrate.quad`用于评估`f(x)p(x)`
*   假设 p 可以从中采样，采样 N 个值`x=P(N)`，然后评估期望值`np.mean(f(X))`和误差`np.std(f(X))/np.sqrt(N)`
*   假设 p 在 处可用`stats.norm`，使用`stats.norm.expect(f)`
*   假设我们有`CDF(x)`分布而不是`p(x)`，计算`H=Inverse[CDF]`然后`f(H(x))`使用积分`scipy.integrate.quad`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:27:03.707

另一种可能性是对 x -> f( H(x)) 进行积分，其中 H 是概率分布的累积分布的倒数。

[这是因为变量的变化：替换 y=CDF(x) 并注意到 p(x)=CDF'(x) 产生变化 dy=p(x)dx 并因此产生 int{f(x)p(x )dx}==int{f(x)dy}==int{f(H(y))dy 其中 H 是 CDF 的倒数。]

# ruby-on-rails-3 - 引导表的替代选项行类不起作用。为什么？

> ID：12245861
> 
> 赞同：0
> 
> 时间：2012-09-03T10:14:52.107
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

我可以让这段代码与 twitter bootstrap 一起使用

<tr class="success"> 根据[http://twitter.github.com/bootstrap/base-css.html#tables](http://twitter.github.com/bootstrap/base-css.html#tables)

它应该用绿色标记表格行，但它对我不起作用。哪里有问题？

我正在使用 rails 3 和最新的引导 gem。谢谢您的回复。

编辑：这里的代码：http: [//jsfiddle.net/24RQM/28/](http://jsfiddle.net/24RQM/28/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:46:09.787

您使用的是旧版本的 Twitter Bootstrap。移至 2.1.0，它将起作用。[在这个小提琴](http://jsfiddle.net/simbirsk/g7Z9P/)
上看到它的实际效果。

**编辑**
twitter-bootstrap-rails 版本控制令人困惑，因为 gem 版本与框架版本不匹配。所以 gem 版本 2.1.1 包含 Twitter Bootstrap 版本 2.0.4。
要获得**Bootstrap v2.1.0**（现在是最新版本），您必须将**twitter-bootstrap-rails 更新到 v2.1.2**

# c# - 从字符串中选择一个子字符串

> ID：12245862
> 
> 赞同：-6
> 
> 时间：2012-09-03T10:14:58.177
> 
> 标签：c#, .net, windows

我有一个字符串如下：

```
string str = "abcdefgh" 
```

我想将大小减少到只有两个字符 - 所以输出将是：

```
str = "ab" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:16:26.563

```
string str = "abcdefgh";
var s = str.Substring(0, 2); 
```

或者另一种解决方案是编写您自己的扩展方法（这将检查字符串是否比预期的子字符串长并避免出现[athoik](https://stackoverflow.com/users/1093668/athoik)注意到的异常）并执行此操作

```
class Program
{
    static void Main(string[] args)
    {

        var str = "asdfasd";
        var trimmed = str.MySubString(2);
        Console.WriteLine(trimmed);
        Console.ReadLine();

    }

}
public static class Helper
{
    public static string MySubString(this String value, int length)
    {
        return !string.IsNullOrEmpty(value) && value.Length >= length
        ? value.Substring(0, length)
        : value;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:17:35.607

字符串子 = str.Substring(0, 2);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T10:23:11.670

```
 string substr =  str.substring(0,2) 
```

或者

```
 StringBuilder sb = new StringBuilder();
        sb.toString(0,2); 
```

# c# - 在整个会话期间维护数据表和变量

> ID：12245864
> 
> 赞同：3
> 
> 时间：2012-09-03T10:15:08.650
> 
> 标签：c#, asp.net, session, datatable

我创建了一个网站，我必须在其中维护数据表和内存中的一些变量。数据表或变量中的数据/值将根据登录的用户而有所不同。怎么保养？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T10:18:12.050

您可以将它们保存为

```
DataTable dt = new DataTable();
// I assumed that dt has some data

Session["dataTable"] = dt; // Saving datatable to Session
// Retrieving 
DataTable dtt = (DataTable) Session["dataTable"]; // Cast it to DataTable

int a = 43432;
Session["a"] = a;
// Retrieving 
int aa = (int) Session["a"];

// classes
  class MyClass
  {
    public int a { get; set; }
    public int b { get; set; }
  }

  protected void Page_Load(object sender, EventArgs e)
  {

    MyClass obj = new MyClass();
    obj.a = 5;
    obj.b = 20;

    Session["myclass"] = obj;  // Save the class object in Session
     // Retrieving 
      MyClass obj1 = new MyClass();
       obj1 = (MyClass) Session["myclass"]; // Remember casting the object
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T10:24:32.730

将会话与数据表一起使用的完美方式是......

```
 public class clsSession
    {
        public static DataTable dtEmp
        {
            get
            {
                if (HttpContext.Current.Session["dtEmp"] != null)
                {
                    return (DataTable)HttpContext.Current.Session["dtEmp"];
                }
                else
                    return new DataTable();
            }
            set
            {
                HttpContext.Current.Session["dtEmpAddres"] = value;
            }
        }
    } 
```

您可以使用将数据表存储为`clsSession.dtEmp = new DataTable();`

# jsf-2 - 相同视图的会话范围 bean

> ID：12245867
> 
> 赞同：4
> 
> 时间：2012-09-03T10:15:15.853
> 
> 标签：jsf-2, richfaces, cdi

我有一个包含列表的 DTO。当用户单击添加按钮时，我想向数据表添加新行。但是当我单击**添加**dto 时，即调用构造函数并初始化值并且列表大小为 0。该 bean 是对话范围的。**在使用对话范围 bean 时，**我应该开始和结束相同视图的对话吗？我正在使用相同的 bean 进行编辑，它运行良好。如何在使用 Richfaces 4 和 jsf 2 和 ajax 时解决初始化问题。

**看法：**

```
 <rich:panel id ="dataPnl">
                        <rich:dataTable value="#{legendbean.legendDTO.list}" var="legend" style="width:100%">

                            <rich:column>
                                <f:facet name="header">
                                    <h:outputText value="SN"/>
                                </f:facet>
                                <h:inputText value="#{legend.sn}"/>
                            </rich:column>

                            <rich:column>
                                <f:facet name="header">
                                    <h:outputText value="Description"/>
                                </f:facet>
                                <h:inputText value="#{legend.desc}"/>
                            </rich:column>

                            <rich:column>
                                <a4j:commandLink value="Add" actionListener="#{legendbean.addLegendRange()}" render="nisForm:dataPnl"/>
                                <h:outputText value=" / "/>
                                <a4j:commandLink value="Remove" actionListener="#{legendbean.removeLegendRange(legend)}" render="nisForm:dataPnl"/>
                            </rich:column>

                        </rich:dataTable>
                    </rich:panel> 
```

* * *

**豆 ：**

```
@Named("legendbean")
@ConversationScoped
public class LegendController implements Serializable {

    LegendDTO legendDTO = new LegendDTO();
    String selectedLegend;
    boolean edit;
    @Inject
    private Conversation conversation;

    public boolean isEdit() {
        return edit;
    }

    public void setEdit(boolean edit) {
        this.edit = edit;
    }

    public LegendController() {
        Logger.getLogger(LegendController.class.getName()).warning("The value of Edit is : " + edit);
        if (!edit) {
            legendDTO.getList().add(new Legend());
            Logger.getLogger(LegendController.class.getName()).warning("The size of list" + legendDTO.getList().size());
        }
    }

    public LegendDTO getLegendDTO() {
        return legendDTO;
    }

    public void setLegendDTO(LegendDTO legendDTO) {
        this.legendDTO = legendDTO;
    }

    public void addLegendRange() {
        Logger.getLogger(LegendController.class.getName()).warning("List Size " + legendDTO.getList().size());
        legendDTO.getList().add(new Legend());
        Logger.getLogger(LegendController.class.getName()).warning("List Size " + legendDTO.getList().size());
    }

    public void removeLegendRange(Legend legend) {
        if (legendDTO.getList().size() != 1) {
            legendDTO.getList().remove(legend);
        }
    }

    public String saveLegend() {
        Logger.getLogger(LegendController.class.getName()).warning("Save Legend Edit" + edit);
        LegendDAO dao = new LegendDAO();
        if (dao.addLegend(legendDTO, edit)) {
            if (edit) {
                conversation.end();
                edit = false;
                Logger.getLogger(LegendController.class.getName()).warning("Save Legend Edit" + edit);
                return "VIEWLEGEND";
            } else {
                legendDTO = new LegendDTO();
                legendDTO.getList().add(new Legend());              
                FacesContext.getCurrentInstance().addMessage(null, new FacesMessage("Saved !"));
                return "";
            }
        } else {
            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage("Could Not Save Confim if you have already defined Legend " + legendDTO.getLegendName() + "!"));
            return "";
        }
    }

    public List<LegendDTO> getLegends() {
        LegendDAO dao = new LegendDAO();
        return dao.getLegendDTO();
    }

    //All function from here are for legend  delete
    public void deleteLegendType(LegendDTO dto) {
        LegendDAO dao = new LegendDAO();
        if (dao.deleteLegendType(dto.getLegendName())) {
            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage("Deleted !"));
        } else {
            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage("Deleted Error !"));
        }
    }

    //All function from here is to legend edit
    public String editLegendType(LegendDTO dto) {
        conversation.begin();
        edit = true;
        legendDTO = dto;
        LegendDAO dao = new LegendDAO();
        dto.getList().clear();
        try {
            List<Legend> legends = dao.getDetailForEditLegend(dto.getLegendName());
            dto.setList(legends);
        } catch (SQLException ex) {
            Logger.getLogger(LegendController.class.getName()).warning("SQL EXception has occoured");
        }
        Logger.getLogger(LegendController.class.getName()).warning("The size of list" + dto.getList().size());
        return "addLegend";
    }

    public String cancel() {
        conversation.end();
        return "VIEWLEGEND";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T20:40:48.957

是的，您需要[开始](http://docs.oracle.com/javaee/6/api/javax/enterprise/context/Conversation.html#begin%28%29)一个长时间运行的对话，以使您的对话（和对话范围的 bean）跨越多个请求。否则会话在 JSF 请求结束时被终止（默认情况下会话是暂时的：请参阅[ConversationScoped javadoc](http://docs.oracle.com/javaee/6/api/javax/enterprise/context/ConversationScoped.html)）。

在这种情况下，一个常见的解决方案是使用[ViewScoped](http://docs.oracle.com/javaee/6/api/javax/faces/bean/ViewScoped.html) bean，但是注释是 JSF2 特定的，并且不在 CDI 中显示（您可以将其移植到 CDI 或使用 seam-faces 模块，更多详细信息：[http://www. verborgh.be/articles/2010/01/06/porting-the-viewscoped-jsf-annotation-to-cdi/](http://www.verborgh.be/articles/2010/01/06/porting-the-viewscoped-jsf-annotation-to-cdi/)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T01:13:14.507

如果您不受限于使用 CDI/Seam 注释，您可以将 bean 更改为`@ManagedBean(name="legendbean")`从`javax.faces.bean.ManagedBean`包中使用，然后`@ViewScoped`在您的类上使用注释，以保证只要用户在同一页面上，您将使用托管 bean 的同一实例。您的设置无需更改任何其他内容，所有`@Inject`s 都将正常工作。要初始化 backing `legendDTO.list`，请使用 JSF 注释在 ViewScoped JSF bean 中注释一个方法，`@PostConstruct`并将列表填充逻辑放在那里。您可以安全地添加/删除列表，而无需将其重新初始化为空。但是您必须记住将此列表的更改提交回数据库。

只是一个想法，作为安全做法，您可能希望显示一个弹出窗口，允许您的用户确认他们想要从您的数据库中删除任何内容。干杯

# mysql - Mac Lion 10.7 上的 MySQL 错误

> ID：12245872
> 
> 赞同：0
> 
> 时间：2012-09-03T10:15:51.457
> 
> 标签：mysql, ruby-on-rails-3, osx-lion

我正在尝试让 mysql 在 mac 上运行，这样我就可以让它与 rails 3 一起工作。我从官方网站安装了 mysql*.dmg 文件，我还在我的“.bashrc”文件中添加了这个文件：

```
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting
PATH=$PATH:/usr/local/mysql/bin 
```

现在我创建了一个 /tmp/mysql.lock 文件，更改了它的权限，当我尝试运行 mysql 时仍然出现此错误：

```
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (38) 
```

在 Lion 上安装 mysql 有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:56:42.283

那是因为 MySQL 可能正在其他地方创建套接字文件。采用

```
mysqladmin variables 
```

在终端中找出确切位置并在您的`database.yaml`.

# django - 如何在每个字段的 MultiValueField / MultiWidget 中呈现验证错误

> ID：12245887
> 
> 赞同：3
> 
> 时间：2012-09-03T10:16:39.407
> 
> 标签：django

在一个表单中，我使用了一个 MultiValueField (MVF) 和一个具有多个字段的 MultiWidget。如果在 MVF 的某个字段中存在验证错误，则会在 MVF 级别而不是在各个子字段中处理（显示）这可能导致：

```
* Ensure this value is greater than or equal to 1.
* Ensure this value is greater than or equal to -100.0.

Number of days: -1
...
...
Threshold: -200 
```

其中第一个错误是指 MVF 的第一个字段，第二个错误是指 MVF 的最后一个字段。

是否可以将这些错误消息放在它们所属的字段“内部”MVF 中？（也许在 MultiWidget 的 format_output 方法中？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T01:03:33.087

以下解决方案不使用 MultiValueField 而是：

*   用表单上的几个字段动态替换原始字段`__init__`
*   在表单验证期间为原始字段重建有效数据`_post_clean`

这是一些需要适应每种情况的测试代码：

```
class MyMultiField(CharField):

    def split(self, form):
        name = 'test'
        form.fields_backup[name] = form.fields[name]
        del form.fields[name]
        # here is where you define your individual fields:
        for i in range(3):
            form.fields[name + '_' + str(i)] = CharField()
            # you need to extract the initial data for these fields
            form.initial[name + '_' + str(i)] = somefunction(form.initial[name])
        form.fields['test_1'] = DecimalField() # because I only want numbers in the 2nd field

    def restore(self, form):
        # here is where you describe how to joins the individual fields:
        value = ''.join([unicode(v) for k, v in form.cleaned_data.items() if 'test_' in k])
        # extra step to validate the combined value against the original field:
        try:
            restored_data = form.cleaned_data.copy()
            restored_data["test"] = form.fields_backup["test"].clean(value)
            for k in form.cleaned_data:
                if k.startswith("test_"):
                    del restored_data[k]
            form.cleaned_data = restored_data
        except Exception, e:
            form._errors[NON_FIELD_ERRORS] = form.error_class(e)

class MyForm(Form):

    test = MyMultiField()

    def __init__(self, *args, **kwargs):
        super(ItemForm, self).__init__(*args, **kwargs)
        self.fields_backup = {}
        self.fields['data'].split(self)

    def _post_clean(self):
        self.fields_backup['data'].restore(self)
        return super(MyForm, self)._post_clean() 
```

前：

![原始表单域](../Images/3f8053ec30607d8addbb2a7d4c6532b4.png)

之后（验证一些输入）：

![多场](../Images/40b831c93f6196300a2970a74dd6e4eb.png)

我不确定是否可以使用这种方法进一步解耦此字段/表单代码。我对这段代码也不太满意，因为新的字段类需要从原来的类继承。

尽管如此，基本的想法是存在的，我成功地使用它来*单独*验证从存储在 PostgreSQL hstore 的单个模型字段中的字典构建的表单字段。

# ruby-on-rails - 在 Rails HABTM 嵌套表单中创建新记录

> ID：12245890
> 
> 赞同：5
> 
> 时间：2012-09-03T10:16:42.803
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-forms, nested-attributes, has-and-belongs-to-many

我有一个嵌套表单（使用 Ryan B 的nested_form gem），使用 has_and_belongs_to_many 到 has_and_belongs_to_many 设置：

`Opening has_and_belongs_to_many :contacts`

`Contact has_and_belongs_to_many :openings`

在尝试将新联系人添加到开口时，在这种情况下，我得到：

`Can't mass-assign protected attributes: new_1346666966632`

为了

`"opening"=>{"contacts_attributes"=>{"new_1346666966632"=>{"contacts"=>{"name"=>"Test Contact",`

我已经添加了相应的“accepts_nested_attributes_for”和“attr_accessible”，并且正在控制器中构建联系人，即@opening.contacts.build 和@opening.contacts.build(params[:opening][:contact_attributes])。

我哪里错了？在这里使用 has_many through 关系会更好吗？

**编辑：**

看法：

```
<%= simple_nested_form_for @opening, :wrapper => :plain do |f| %>
  <%= f.link_to_add "Add a contact", :contacts %>
  <%= f.button :submit %>
<% end %> 
```

它使用部分生成嵌套联系人的字段：

```
<%= f.fields_for :contacts, @opening.contacts.build do |contact_form| %>
  <%= contact_form.input :name, :label => false, :input_html => { :class => 'span6' } %>
  <%= contact_form.input :company, :label => false, :input_html => { :class => 'span6' } %>
  <%= contact_form.input :telephone, :label => false, :input_html => { :class => 'span6' } %>
  <%= contact_form.input :email_address, :label => false, :input_html => { :class => 'spa12' } %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:17:43.647

您需要从开放模型构建/创建联系人，而不是尝试手动分配contacts_attributes。您的控制器代码需要类似于：

```
@opening.update_attributes(params[:opening]) 
```

查看[Rails 指南了解更多关于使用嵌套属性的信息](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

# vb.net - 查找数组 vb 中最后一次出现的值

> ID：12245892
> 
> 赞同：0
> 
> 时间：2012-09-03T10:16:43.223
> 
> 标签：vb.net, visual-studio-2005

我想找到数组中最后一次出现的值的引用。

该数组的值的格式类似于`(0,7,7,7,7,7,14,15,15,15,15,15,15,16)`，第二列中有一个布尔值。

我相信 FINDLAST 是我正在寻找的功能，但我无法使语法正常工作。

编辑：

我有数组中某个事件的位置，`CursorPosition`并且我想从中找到数组中的最后一个事件。我的代码目前是：

```
CursorPosition = position.FindLast(position, position(0, CursorPosition)) 
```

我目前收到 3 个错误：

> 无法推断“公共共享函数 FindLast(Of T)(array() As T, match As System.Predicate(Of T)) As T”的类型参数“T”。
> 
> 'Public Shared Function FindLast(Of T)(array() As T, match As System.Predicate(Of T)) As T' 的类型参数 'T' 的类型参数推断失败。无法从传递给参数“array”的参数推断类型参数。
> 
> 'Public Shared Function FindLast(Of T)(array() As T, match As System.Predicate(Of T)) As T' 的类型参数 'T' 的类型参数推断失败。无法从传递给参数“match”的参数推断类型参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:05:26.323

您正在谈论 Array.FindLast() 和 Array.FindLastIndex() 方法。最后一个参数是一个*predicate*，一个委托类型。换句话说，该方法需要一个可以将候选值传递给的函数，并且在匹配时应该返回 True。

这样的谓词最容易用[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb531253.aspx)实现。查看链接了解详细信息。一个简单的例子：

```
 Dim position() As Integer = {1, 2, 2, 3, 3, 3}
    Dim tofind = 2
    Dim index = Array.FindLastIndex(position, Function(value) value = tofind) 
```

# jsf - 按钮单击时 JSF 删除行

> ID：12245893
> 
> 赞同：0
> 
> 时间：2012-09-03T10:16:44.270
> 
> 标签：jsf, jsf-2, primefaces

我在单击按钮时删除一行时遇到了一些问题。我有一个数据表，其中包含 5 列。第五列是一个按钮。我有个需求，在哪里，当我点击按钮时，需要删除按钮对应的行数据。我试图使用数据模型填充列值。下面是我为实现行删除而编写的代码。但是该行没有被删除。

```
<h:commandButton id="buttonID1"  image="/images/drappimages/delete.png" style="width:15px ;" actionListener="#{adminBean.delete}" >  
<f:ajax  render="adminTableID" ></f:ajax>  
</h:commandButton> 
```

监听器方法在下面指定

```
public void delete(ActionEvent event)  
{  
    deleteFlag = true;  
    int rowIndex = adminVODataModel.getRowIndex() ;  
    AdminVO admminData = adminVODataModel.getRowData();  
    System.out.println("The rowIndex that needs to be actioned is :"+ rowIndex);  
    System.out.println("The adminVOList is :"+ adminVOList.size());  
    adminVOList.remove(rowIndex) ;  
    adminVOList.remove(adminData) ;  
    System.out.println("the VOList now is "+ adminVOList.size());  
    adminVODataModel = new ListDataModel<AdminVO>(adminVOList) ;  
    setAdminScheduleVODataModel(adminVODataModel);  

} 
```

我使用 adminVODataModel 填充数据表。我试图使用上面的代码删除相应的行。但是该行没有被删除。

请协助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:41:49.093

您应该在删除后更新您的表

只需添加`update="@form"`到您的`<p:ajax`. 如果你有一些`h:panelGroup`包装，你可以把它的 id`@form`放在更新中。

顺便说一句，我认为在 3.4 中您也可以将表 id 放在`update`属性的目标中（不确定在 3.4 之前是否可能）

既然你搬到了`h:commandButton`，试试

`render="@form"`或者`render="somePanelGroudIDThatWrapsTheTable"`

还

不要两者都做`adminVOList.remove(rowIndex);` ，`adminVOList.remove(adminData) ;` 如果你有正确的索引，用它来删除条目

# jquery - jquery UI Lightbox在IE中不起作用

> ID：12245900
> 
> 赞同：0
> 
> 时间：2012-09-03T10:17:01.380
> 
> 标签：jquery, jquery-ui, jquery-plugins, lightbox

嗨，我正在使用以下 jquery UI Lightbox 此代码在 IE 中不起作用，来自[http://www.class.pm/files/jquery/jquery.ulightbox/demo/](http://www.class.pm/files/jquery/jquery.ulightbox/demo/)

```
<script type="text/javascript" src="js/jquery.ulightbox.js"></script>
<link rel="stylesheet" type="text/css" href="css/jquery.ulightbox.css" /> 
 <script type="text/javascript">
 $(document).ready(function() {
 uLightBox.init({
  override:true,
  background: 'white',
  centerOnResize: true,
  fade: true
 });

 $('#alert').click(function() {
  alert('Hello');
  });
 });
 </script> 
```

有没有办法在 IE 中解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:40:56.007

你是对的：“uLightBox”插件（或“ClassyLightbox”，因为它目前被命名）不适用于 Internet Explorer（至少在版本 8 和 9 中），因为它会引发 JavaScript 错误。
但是，我设法使它以这种方式工作：

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="css/jquery.classylightbox.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
        <script src="js/jquery.classylightbox.js"></script>
        <script type="text/javascript">
        function alert(val){ 
            ClassyLightbox.alert({ title: 'Alert', text: val, rightButtons: ['OK'] }); 
        }

        $(document).ready(function() {
            ClassyLightbox.init({
                override: false,
                background: 'white',
                centerOnResize: true,
                fade: true
            });

            $('#alert').click(function() {
                alert('Hello World');
            });
        });
        </script> 
    </head>
    <body>
         <input id="alert" type="button" value="Click Me" />
    </body>
</html> 
```

在我的示例中，我使用了从[此处](http://www.class.pm/?retrieve=process&did=NzUuaG90bGluaw==)下载的最新版本的插件。
然后我设置`override`为 false 并重新定义`alert()`函数来调用该`ClassyLightbox.alert`方法。
如果您使用的是旧版本的插件，您应该这样做：

```
<script type="text/javascript">
function alert(val){ 
    uLightBox.alert({ title: 'Alert', text: val, rightButtons: ['OK'] }); 
}

$(document).ready(function() {
    uLightBox.init({
        override: false,
        background: 'white',
        centerOnResize: true,
        fade: true
    });

    $('#alert').click(function() {
        alert('Hello World');
    });
});
</script> 
```

此解决方案的缺点是您无法再更改背景颜色；换句话说，当`override`设置为 false 时，该`background`属性将被忽略。

# vb.net - 导出到 excel vb.net office 2010

> ID：12245902
> 
> 赞同：0
> 
> 时间：2012-09-03T10:17:02.143
> 
> 标签：vb.net, export-to-excel

我有一个 vb.net 项目，想从`axmshflexgrid`. 但我总是有例外

> Ancien format ou bibliothèque de type non valide

以及带有此代码的空 excel 文件。

```
Private Sub cmd_export_excel_Click(ByVal eventSender As System.Object, ByVal eventArgs As System.EventArgs) Handles cmd_export_excel.Click

    On Error GoTo ErrorHandler

    Dim iRow As Short
    Dim iCol As Short
    Dim objExcl As Microsoft.Office.Interop.Excel.Application
    Dim objWk As Microsoft.Office.Interop.Excel.Workbook
    Dim objSht As Microsoft.Office.Interop.Excel.Worksheet
    Dim iHead As Short
    Dim vHead As Object

    objExcl = New Microsoft.Office.Interop.Excel.Application
    objExcl.Visible = True
    objExcl.UserControl = True

    Dim oldCI As System.Globalization.CultureInfo = _
    System.Threading.Thread.CurrentThread.CurrentCulture
    System.Threading.Thread.CurrentThread.CurrentCulture = _
        New System.Globalization.CultureInfo("en-US")

    objWk = objExcl.Workbooks.Add
    System.Threading.Thread.CurrentThread.CurrentCulture = oldCI
    objSht = objWk.Sheets(1)

    vHead = Split(g.FormatString, "|")
    For iHead = 1 To UBound(vHead)
        If Len(Trim(vHead(iHead))) > 0 Then objSht.Cells._Default(1, iHead) = vHead(iHead)
    Next
    System.Windows.Forms.Cursor.Current = System.Windows.Forms.Cursors.WaitCursor

    For iRow = 0 To g.Rows - 1
        For iCol = 0 To g.get_Cols() - 1
            g.Row = iRow
            g.Col = iCol
            If g.Text <> "" Then

                objSht.Range(NumCol2Lattre(iCol + 1) & "" & iRow + 2 & ":" & NumCol2Lattre(iCol + 1) & "" & iRow + 2 & "").Select()

                objExcl.ActiveCell.Value = CStr(g.Text)

            End If
        Next iCol

    Next iRow

    objExcl.Application.Visible = True

    System.Windows.Forms.Cursor.Current = System.Windows.Forms.Cursors.Default

    objSht = Nothing
    objWk = Nothing
    objExcl = Nothing
    Exit Sub

ErrorHandler:
    objSht = Nothing
    objWk = Nothing
    objExcl = Nothing

    MsgBox("Error In expotation task & " & Err.Description, MsgBoxStyle.Information)
    Err.Clear()

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T00:54:37.483

您是否安装了多个版本？

你互操作程序集的版本是什么？

将版本与创建的 excel 实例 (objExcl.Version) 进行比较。

看起来你有版本冲突。

在这种情况下，您可能必须重新安装 office2010（大部分时间都有帮助）。

# c - 嵌入式系统的负载和性能测试

> ID：12245909
> 
> 赞同：2
> 
> 时间：2012-09-03T10:17:17.760
> 
> 标签：c, load, arm, embedded-linux, performance-testing

我正在向 ARM 皮质处理器上的现有嵌入式系统添加一个新协议。在将新协议添加到早期系统后，我需要进行负载测试和性能测试。源代码为 C 和 C++。

如果有任何免费的测试代码可以在这个嵌入式系统上进行负载和性能测试、网络 I/O 测试等，请告诉我。或者建议我为此提供任何方法。

基本上我要比较： 1.添加新协议后的负载是多少。2\. 性能 3\. 网络 IO 测试 4\. 系统测试等...

问候， AK

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T11:09:04.297

对于系统性能分析，您可以使用[oprofile](http://oprofile.sourceforge.net/about/)或[gprof](http://www.cs.utah.edu/dept/old/texinfo/as/gprof_toc.html)。

对于网络分析，您可以使用[ethereal](http://www.ethereal.com/)或[netstat](http://linux.die.net/man/8/netstat)。

对于 I/O 统计信息，您可以使用[iostat](http://linux.die.net/man/1/iostat)或[sar](http://linux.die.net/man/1/sar)。

对于 CPU 分析，您可以使用[mpstat](http://linuxcommand.org/man_pages/mpstat1.html)。

这些只是一些工具。我敢肯定还有更多的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T07:49:33.343

来自谷歌：

对于内存泄漏，使用 **dmalloc**和**Valgrind**

用于跟踪使用 **LTT（Linux Trace Toolkit）**

# utf-8 - 处理用于代替拉丁字符的西里尔字母

> ID：12245916
> 
> 赞同：1
> 
> 时间：2012-09-03T10:17:40.887
> 
> 标签：utf-8, utf

我们最近有一个用户输入英文文本，但它似乎是在为西里尔文设置的计算机上完成的，因为某些字母（例如“a”）实际上是西里尔小写字母 A，而不是拉丁小写字母 A。

我认为[规范化](http://www.unicode.org/reports/tr15/tr15-29.html)会将西里尔文转换为拉丁文等价物，但事实并非如此（我猜它们只是在显示方式上等价，而不是在含义上）。

这是一个常见问题吗 - 为西里尔文设置计算机的用户可能正在写英文，但使用的是西里尔字母？

一般来说，什么是发现这一点并适当转换的安全方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T16:01:58.170

要检测西里尔字母，只需使用正则表达式匹配 [\p{IsCyrillic}]。更通用的方法是搜索任何非拉丁字符。那些你有匹配的，你需要用它们的拉丁对应物替换字符。

# jquery - 带有凭据的 jQuery CORS 仅适用于 Chrome

> ID：12245917
> 
> 赞同：3
> 
> 时间：2012-09-03T10:17:45.753
> 
> 标签：jquery, ajax, credentials, cors, request-headers

我的 ajax CORS 请求遇到问题。我让它在任何其他浏览器中工作，但 Firefox 不发送授权标头。

这是相应的代码

```
$.ajax(
{
  type: "GET",
  url: 'http://www.urlhere.com/file.php',
  crossDomain: true,
  xhrFields: { withCredentials: true },
  headers: { 'Authorization': 'Basic .....' },
  error: function(data,error,errormsg) {
    $('#serverTestLog').html('<h3><span style="color: red">' 
      + error + '</h3></span><p>'+errormsg+'</p>');
    },
    success: function(data) {
      $('#serverTestLog').html('<h3><span style="color: green">success</h3>');
    }
  }); 
```

问题似乎是 Chrome 是唯一一个实际发送 Authorization 请求头的浏览器。如果我用 Firefox 尝试它，它会询问我用户名和密码，然后开始一个正确设置标头的新请求，但我想在没有用户交互的情况下执行此操作。

我也尝试替换替换

```
headers: { 'Authorization': 'Basic .....' }, 
```

和

```
usename: 'username',
password: 'password', 
```

但 Chrome 仍然是唯一在其请求中发送 Authorization 标头的浏览器。这次 Firefox 以

> NetworkError：需要 401 授权”，无需询问用户名和密码。

有人知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:57:48.990

因为您正在发送请求`withCredentials`，所以在实际请求之前发出了预检请求。[根据CORS 规范](https://dvcs.w3.org/hg/cors/raw-file/tip/Overview.html#preflight-request)，预检`OPTIONS`请求不包括用户凭据。

该`OPTIONS`请求很可能以 401 响应，并且 Firefox 正确地报告了它。

[Chrome](https://code.google.com/p/chromium/issues/detail?id=139566)和[WebKit](https://bugs.webkit.org/show_bug.cgi?id=92755)存在未解决的错误，即使`OPTIONS`请求因 401 而失败，预检后的后续请求仍然会被发送。

# perl - 模板工具包周数和日期

> ID：12245918
> 
> 赞同：0
> 
> 时间：2012-09-03T10:17:49.653
> 
> 标签：perl, template-toolkit

我想在 Template-toolkit 中使用日期插件显示周数和日期。今天的输出将类似于：

```
36 Monday 
```

我得到了带有以下代码的周数：

```
[% USE date(format = '%W' ) %]
[% date.format %] 
```

仍在试图弄清楚如何获得工作日。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T12:05:10.220

来自[http://template-toolkit.org/docs/modules/Template/Plugin/Date.html](http://template-toolkit.org/docs/modules/Template/Plugin/Date.html)

> Date 插件提供了一种通过委托给 POSIX strftime() 例程来生成格式化时间和日期字符串的简单方法。

来自[http://perldoc.perl.org/POSIX.html#strftime](http://perldoc.perl.org/POSIX.html#strftime)

> 有关这些和其他参数的详细信息，请参阅系统的 strftime() 联机帮助页。

来自[http://linux.die.net/man/3/strftime](http://linux.die.net/man/3/strftime)

> %A 根据当前语言环境的完整工作日名称。

# android - java.lang.NoClassDefFoundError 异常

> ID：12245920
> 
> 赞同：3
> 
> 时间：2012-09-03T10:17:54.110
> 
> 标签：android, eclipse, noclassdeffounderror

嗨，我所有的应用程序都遇到了这个异常

```
 09-03 12:11:10.677: E/AndroidRuntime(31704): FATAL EXCEPTION: main
  09-03 12:11:10.677: E/AndroidRuntime(31704): java.lang.NoClassDefFoundError:       mPay2Park.zwl.com.StartNow$1
 09-03 12:11:10.677: E/AndroidRuntime(31704):   at mPay2Park.zwl.com.StartNow.<init>(StartNow.java:449)
09-03 12:11:10.677: E/AndroidRuntime(31704):    at java.lang.Class.newInstanceImpl(Native Method)
09-03 12:11:10.677: E/AndroidRuntime(31704):    at java.lang.Class.newInstance(Class.java:1319)
 09-03 12:11:10.677: E/AndroidRuntime(31704):   at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
 09-03 12:11:10.677: E/AndroidRuntime(31704):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1882)
 09-03 12:11:10.677: E/AndroidRuntime(31704):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
  09-03 12:11:10.677: E/AndroidRuntime(31704):  at android.app.ActivityThread.access$600(ActivityThread.java:127)
 09-03 12:11:10.677: E/AndroidRuntime(31704):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
09-03 12:11:10.677: E/AndroidRuntime(31704):    at android.os.Handler.dispatchMessage(Handler.java:99)
 09-03 12:11:10.677: E/AndroidRuntime(31704):   at android.os.Looper.loop(Looper.java:137)
09-03 12:11:10.677: E/AndroidRuntime(31704):    at android.app.ActivityThread.main(ActivityThread.java:4441)
 09-03 12:11:10.677: E/AndroidRuntime(31704):   at java.lang.reflect.Method.invokeNative(Native Method)
  09-03 12:11:10.677: E/AndroidRuntime(31704):  at java.lang.reflect.Method.invoke(Method.java:511)
 09-03 12:11:10.677: E/AndroidRuntime(31704):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
 09-03 12:11:10.677: E/AndroidRuntime(31704):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 09-03 12:11:10.677: E/AndroidRuntime(31704):   at dalvik.system.NativeStart.main(Native Method) 
```

以及活动中的代码在这一行得到异常

```
 OnWheelScrollListener scrolledListener = new OnWheelScrollListener() {
     public void onScrollingStarted(WheelView wheel) {
         wheelScrolled = true;
     } 
     public void onScrollingFinished(WheelView wheel) {
         wheelScrolled = false;
     }
}; 
private OnWheelChangedListener days_changedListener = new OnWheelChangedListener() {
      public void onChanged(WheelView wheel, int oldValue, int newValue) {
          if (!wheelScrolled) {
              ChossenTime = duration_optionsList.get(newValue);
            }
      }
}; 
```

任何人都可以帮我解决这个问题，这个应用程序运行良好，一旦遇到这个异常

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T10:26:45.480

将你的库文件名更改为“/libs”并检查它。

看起来好像您没有正确地将 jar 添加到您的 APK 中。检查您的项目设置。这是您设置的问题，而不是 API 的错误。

[http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17) …

这将向您解释如何修复 classdefnotfounderror

# java - 将图像从android串行发送到java应用程序时出错-javax.imageio.IIOException：伪造的霍夫曼表定义

> ID：12245922
> 
> 赞同：2
> 
> 时间：2012-09-03T10:18:09.930
> 
> 标签：java, android, image, bytearray, huffman-code

我需要将图像从 android 应用程序发送到 java 应用程序。基本上，我需要图像中的一个字节数组发送到传输的 rf 模块。另一个 rf 模块接收字节数组并将其发送到必须制作图像的 java 应用程序。

安卓代码：

```
FileInputStream fis = new FileInputStream(myFile);
    byte[] b=new byte[(int)myFile.length()];        
    fis.read(b);server.send(b); 
```

Java代码：

```
FileOutputStream fwrite = new FileOutputStream(new File("my_xml"),true);
                                fwrite.write(bb);//bb is a byte from rf using input stream as soon as a byte comes it is read to file. This is necessary for some other reasons
                                fwrite.flush();
                                fwrite.close(); 
```

获取完整文件后：

```
FileInputStream fir=new FileInputStream("my_xml");
        final BufferedImage bufferedImage = ImageIO.read(fir);
        ImageIO.write(bufferedImage, "bmp", new File("image.bmp"));
        fir.close(); 
```

我收到错误 javax.imageio.IIOException: Bogus Huffman table definition The rf 工作正常，因为文本文件正在完美发送。请帮助。即使没有 ImageIo 代码即使在将扩展名更改为 jpeg 后也不会给出图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:20:27.327

该错误表示由于格式错误而无法读取图像文件。即某些字节丢失或错误或位置不正确，因此无法解码文件。我的 rf 传输没有像 tcp/ip 这样的协议，因此由于通信通道中的错误以及因此错误而丢失了一些字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:39:29.910

您不需要使用 ImageIO 来复制文件。只需读取和写入字节。

您的代码还有其他问题：

1.  您假设 read(byte[]) 填充了缓冲区。它没有。检查Javadoc。

2.  您还假设文件长度适合`int`. 如果是这样，那很好。如果没有，那你就完蛋了。

3.  您似乎正在打开和关闭`FileOutputStream`接收到的每个字节。这不能再低效了。打开一次，写下所有内容，关闭它。

4.  `flush()`之前`close()`是多余的。

5.  您将图像存储在名为“my_xml”的文件中。这只会引起混乱，如果还没有的话。

6.  您甚至不需要该文件。只需直接从输入流加载图像。

# android - android：为 sqlite 创建函数

> ID：12245926
> 
> 赞同：3
> 
> 时间：2012-09-03T10:18:32.877
> 
> 标签：android, sqlite, distance, trigonometry

我需要为 sqlite 创建一个函数，因为 sin 和 cos mysql 函数不存在，我需要进行如下查询：

```
 String q = "SELECT * FROM shops WHERE _id > 0 AND distance(lat, lng, latitudine, longitudine) < 20 AND cancellato=0 ORDER BY _id";
    Cursor c = myDataBase.rawQuery(q, null);
    return c; 
```

所以，我需要一个距离函数。

我不能通过代码来做，因为它是一个 +8000 家商店的列表！

我怎样才能？我没有在网上找到任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-03T10:26:16.077

距离（lat，lng，纬度，经度）

我认为你必须从你的javacode务实地计算距离然后你可以比较

```
http://www.sqlite.org/lang_aggfunc.html

http://oreilly.com/catalog/sqlnut/chapter/ch04.html 
```

# c# - Itextsharp HTMLWorker.Parse 错误

> ID：12245927
> 
> 赞同：5
> 
> 时间：2012-09-03T10:18:37.443
> 
> 标签：c#, winforms, itextsharp, objectdisposedexception

我在 Windows 窗体程序中遇到了来自 iTextSharp 的 HTMLWorker.Parse 的问题。每次我执行代码并以 HTMLWorker.Parse 开头时，它都会给出 objectDisposedException。异常表示它无法访问已关闭的文件。但是我检查了很多次，都找不到关闭的文件。这是代码：

```
class HtmlToPdfConverter
 {
             private iTextSharp.text.Document doc = new iTextSharp.text.Document();

     public HtmlToPdfConverter()
     {
        this.doc.SetPageSize(PageSize.A4);

     }

     public string Run(string html, string pdfName)
     {
        try
        {
            using (doc)
            {
                StyleSheet styles = new StyleSheet();
                using (PdfWriter writer = PdfWriter.GetInstance(this.doc, new     FileStream(@"Z:\programs\" + pdfName + ".pdf", FileMode.Create)))
                {
                    this.doc.Open();
                    this.doc.OpenDocument();
                    this.doc.NewPage();
                    if (this.doc.IsOpen() == true)
                    {
                        StringReader reader = new StringReader(html);
                        //XMLWorkerHelper.GetInstance().ParseXHtml(writer, doc, reader);
                        this.doc.Add(new Paragraph(" "));
                        HTMLWorker worker = new HTMLWorker(this.doc);
                        worker.Open();
                        worker.StartDocument();
                        worker.NewPage();
                        worker.Parse(reader);
                        worker.SetStyleSheet(styles);

                        List<IElement> ie = iTextSharp.text.html.simpleparser.HTMLWorker.ParseToList(reader, null);

                        foreach (IElement element in ie)
                        {
                            this.doc.Add((IElement)element);
                        }

                        worker.EndDocument();
                        worker.Close();
                    }
                }
            }
            return string.Empty;
        }
        catch (Exception ex)
        {
            return ex.Message;
        }

    }
 } 
```

这是一个例外：

```
System.ObjectDisposedException was caught
  Message=Cannot access a closed file.
  Source=mscorlib
  ObjectName=""
  StackTrace:
       at System.IO.__Error.FileNotOpen()
       at System.IO.FileStream.Write(Byte[] array, Int32 offset, Int32 count)
       at iTextSharp.text.pdf.OutputStreamCounter.Write(Byte[] buffer, Int32 offset, Int32 count)
       at iTextSharp.text.pdf.PdfIndirectObject.WriteTo(Stream os)
       at iTextSharp.text.pdf.PdfWriter.PdfBody.Add(PdfObject objecta, Int32 refNumber, Boolean inObjStm)
       at iTextSharp.text.pdf.PdfWriter.PdfBody.Add(PdfObject objecta, Int32 refNumber)
       at iTextSharp.text.pdf.PdfWriter.PdfBody.Add(PdfObject objecta, PdfIndirectReference refa)
       at iTextSharp.text.pdf.PdfWriter.AddToBody(PdfObject objecta, PdfIndirectReference refa)
       at iTextSharp.text.pdf.Type1Font.WriteFont(PdfWriter writer, PdfIndirectReference piref, Object[] parms)
       at iTextSharp.text.pdf.FontDetails.WriteFont(PdfWriter writer)
       at iTextSharp.text.pdf.PdfWriter.AddSharedObjectsToBody()
       at iTextSharp.text.pdf.PdfWriter.Close()
       at iTextSharp.text.DocWriter.Dispose()
       at WebPageExtraction.HtmlToPdfConverter.Run(String html, String pdfName)
  InnerException: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T10:21:34.953

您正在尝试在它已经处理后调用 close 方法。

您有一个`using`自动处理对象的块，因此只需删除这两行：

```
doc.CloseDocument();
doc.Close(); 
```

如果您不相信内部处置代码可以正确关闭文档并且无论如何都想自己执行此操作，请在`using`块内执行此操作：

```
using (doc)
{
    StyleSheet styles = new StyleSheet();
    using (PdfWriter writer = PdfWriter.GetInstance(this.doc, new     FileStream(@"Z:\programs\" + pdfName + ".pdf", FileMode.Create)))
    {
        //.....
    }
    doc.CloseDocument();
    doc.Close();
} 
```

**编辑**：在自己尝试了您的代码后，我发现了更多问题，并找到了您遇到错误的真正原因：

*   您正在关闭和处置全局对象`doc`，并且永远不会创建新实例。
*   您不会处理所有对象，这可能会导致内存泄漏或锁定文件。
*   您收到的错误是因为默认情况下，PdfWriter 正在关闭它正在使用的 Stream，并且在处理时，作者正在尝试使用此流。所以要解决这个问题，你必须自己关闭流并告诉作者不要这样做。

完整的固定代码：

```
Document doc = new Document();
StyleSheet styles = new StyleSheet();
string filePath = @"Z:\programs\" + pdfName + ".pdf";
using (FileStream pdfStream = new FileStream(filePath, FileMode.Create))
{
    using (PdfWriter writer = PdfWriter.GetInstance(doc, pdfStream))
    {
        writer.CloseStream = false;
        doc.Open();
        doc.OpenDocument();
        doc.NewPage();
        if (doc.IsOpen() == true)
        {
            using (StringReader reader = new StringReader(html))
            {
                //XMLWorkerHelper.GetInstance().ParseXHtml(writer, doc, reader);
                doc.Add(new Paragraph(" "));
                using (HTMLWorker worker = new HTMLWorker(doc))
                {
                    worker.Open();
                    worker.StartDocument();
                    worker.NewPage();
                    worker.Parse(reader);
                    worker.SetStyleSheet(styles);
                    List<IElement> ie = iTextSharp.text.html.simpleparser.HTMLWorker.ParseToList(reader, null);
                    foreach (IElement element in ie)
                    {
                        doc.Add((IElement)element);
                    }
                    worker.EndDocument();
                    worker.Close();
                }
            }
        }
        writer.Close();
    }
}

doc.CloseDocument();
doc.Close();
doc.Dispose(); 
```

# javascript - 内容可编辑 DIV 单击/插入符号设置

> ID：12245928
> 
> 赞同：1
> 
> 时间：2012-09-03T10:18:46.713
> 
> 标签：javascript, jquery, cursor, dom-events, contenteditable

我有一个标准的内容可编辑 div：

`<div id="profileBody" class="customInputDiv" contentEditable='true' autocomplete="off"></div>`

基本上我想检测光标在某个事件上的下落（最好是有效的代码`onclick`，`keydown`或在按钮上）。

像这样：
`onkeydown`- 在 div 中保存插入符号位置，然后设置插入符号位置。

这听起来有点傻，但这是必需的，因为在某些事件中我会稍微更改内容，并且在更改光标位置时会非常烦人。

我讨厌在没有我尝试过的示例的情况下提出问题，但是如果您阅读以前的问题，我总是会非常详细地提供我尝试过的内容，只是在这里遇到了死胡同！

```
function setCaret() {
    var el = document.getElementById("editable");
    var range = document.createRange();
    var sel = window.getSelection();
    range.setStart(el.childNodes[2], 5);
    range.collapse(true);
    sel.removeAllRanges();
    sel.addRange(range);
    el.focus();
}
​ 
```

也许是解析数据的好方法`window.getSelection();`？

找到： http: [//jsfiddle.net/s5xAr/3/](http://jsfiddle.net/s5xAr/3/) 但我不想要 -- 只是希望它使用函数获取插入符号位置并设置它，例如

```
getCaretPOS();
//do something
setCaretPOS(); 
```

此代码将设置它，但获取它似乎是问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:23:11.203

要获取插入符号位置，请使用此函数：

```
function getCaretPosition(editableDiv) {
    var caretPos = 0, containerEl = null, sel, range;
    if (window.getSelection) {
        sel = window.getSelection();
        if (sel.rangeCount) {
            range = sel.getRangeAt(0);
            if (range.commonAncestorContainer.parentNode == editableDiv) {
                caretPos = range.endOffset;
            }
        }
    } else if (document.selection && document.selection.createRange) {
        range = document.selection.createRange();
        if (range.parentElement() == editableDiv) {
            var tempEl = document.createElement("span");
            editableDiv.insertBefore(tempEl, editableDiv.firstChild);
            var tempRange = range.duplicate();
            tempRange.moveToElementText(tempEl);
            tempRange.setEndPoint("EndToEnd", range);
            caretPos = tempRange.text.length;
        }
    }
    return caretPos;
} 
```

这应该适用于大多数浏览器（当然，离开 IE）。你似乎有 IE 覆盖了你的`setCaret`功能。

该功能来自[另一个 SO 答案。](https://stackoverflow.com/a/3976125/401137)看看评论。

[演示](http://jsfiddle.net/amaan/SBPPY/)

# iphone - 从 iPhone 上传视频文件到服务器

> ID：12245929
> 
> 赞同：3
> 
> 时间：2012-09-03T10:18:50.647
> 
> 标签：iphone, objective-c, ios

我知道如何将图像上传到运行 PHP 的服务器，但我一直在上传视频。

我已使用[此建议](http://zcentric.com/2008/08/29/post-a-uiimage-to-the-web/)上传我的视频文件。

发布方法一切正常。我在服务器上得到的是一个 0 字节的文件。

我的代码如下：

```
- (void)imagePickerController:(UIImagePickerController *)picker
            didFinishPickingMediaWithInfo:(NSDictionary *)info {

    NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];
    NSData *videoData = [NSData dataWithContentsOfFile:[videoURL path]];
} 
```

这个 videoData 在我的 POST 方法中传递。

我应该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-17T04:24:14.747

**要发布视频，您需要在图像选择器委托后使用此功能**

```
- (NSData *)generatePostDataForData:(NSData *)uploadData
{
    // Generate the post header:
    NSString *post = [NSString stringWithCString:"--AaB03x\r\nContent-Disposition: form-data; name=\"upload[file]\"; filename=\"somefile\"\r\nContent-Type: application/octet-stream\r\nContent-Transfer-Encoding: binary\r\n\r\n" encoding:NSASCIIStringEncoding];

    // Get the post header int ASCII format:
    NSData *postHeaderData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

    // Generate the mutable data variable:
    NSMutableData *postData = [[NSMutableData alloc] initWithLength:[postHeaderData length] ];
    [postData setData:postHeaderData];

    // Add the image:
    [postData appendData: uploadData];

    // Add the closing boundry:
    [postData appendData: [@"\r\n--AaB03x--" dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES]];

    // Return the post data:
    return postData;
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{ 

    //assign the mediatype to a string 
    NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];

    //check the media type string so we can determine if its a video
    if ([mediaType isEqualToString:@"public.movie"]){
        NSLog(@"got a movie");
        NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];
        NSData *webData = [NSData dataWithContentsOfURL:videoURL];
        [self post:webData];
        [webData release];

    } 
```

对于发布视频，请使用此功能

```
- (void)post:(NSData *)fileData
{

    NSLog(@"POSTING");

    // Generate the postdata:
    NSData *postData = [self generatePostDataForData: fileData];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

    // Setup the request:
    NSMutableURLRequest *uploadRequest = [[[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://www.example.com:3000/"] cachePolicy: NSURLRequestReloadIgnoringLocalCacheData timeoutInterval: 30 ] autorelease];
    [uploadRequest setHTTPMethod:@"POST"];
    [uploadRequest setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [uploadRequest setValue:@"multipart/form-data; boundary=AaB03x" forHTTPHeaderField:@"Content-Type"];
    [uploadRequest setHTTPBody:postData];

    // Execute the reqest:
    NSURLConnection *conn=[[NSURLConnection alloc] initWithRequest:uploadRequest delegate:self];
    if (conn)
    {
        // Connection succeeded (even if a 404 or other non-200 range was returned).
        NSLog(@"sucess");
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Got Server Response" message:@"Success" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
        [alert release];
    }
    else
    {
        // Connection failed (cannot reach server).
        NSLog(@"fail");
    }

} 
```

# java - 是否应该在 Coldfusion 的应用程序/会话级别上创建重用对象？

> ID：12245930
> 
> 赞同：1
> 
> 时间：2012-09-03T10:18:54.687
> 
> 标签：java, performance, object, coldfusion, invoke

我在跑步`Coldfusion8/MySQL 5.0.88`。

我的应用程序的主要功能是一个搜索功能，它在提交时会触发一个调用 cfc 方法的 AJAX 请求。该方法组装 HTML，将其压缩并返回压缩后的 HTML 作为 Ajax 响应。

这是 gzip 部分：

```
 <cfscript>
 var result="";
 var text=createObject("java","java.lang.String").init(arguments[1]);
 var dataStream=createObject("java","java.io.ByteArrayOutputStream").init();
 var compressDataStream=createObject("java","java.util.zip.GZIPOutputStream").init(dataStream);
 compressDataStream.write(text.getBytes());
 compressDataStream.finish();
 compressDataStream.close();
 </cfscript> 
```

我对`cfobject`这里的使用有点不情愿，特别是因为每个用户都会一遍又一遍地调用这个脚本。

**问题：**
如果我在`application`or`session`级别创建对象，或者至少在重新创建对象之前检查对象是否存在，它会提高性能吗？处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T08:19:02.337

如果您对对象的使用就像问题中的代码片段中的内容一样，那么我不会将任何内容放入任何比请求寿命更长的范围内。原因是：

*   您正在实例化的对象不可重用（字符串是不可变的，并且输出流看起来也不可重用）

*   即使它们是可重用的，有问题的对象也不是线程安全的。它们不能在并发请求之间共享，因此应用程序范围不合适，实际上会话范围可能也不安全，因为同一会话的并发请求很容易发生。

*   您在那里使用的对象的创建开销可能非常低，因此如果可以的话，尝试缓存它们几乎没有什么好处。

如果您的对象*确实*是资源密集型的，那么缓存和池化它们是有意义的（例如数据库连接），但要做到正确需要付出相当大的努力，因此您需要确保首先需要它。

# c# - Task.Factory.StartNew() 是否保证使用另一个线程而不是调用线程？

> ID：12245935
> 
> 赞同：76
> 
> 时间：2012-09-03T10:19:37.197
> 
> 标签：c#, multithreading, locking, task, task-parallel-library

我正在从一个函数开始一个新任务，但我不希望它在同一个线程上运行。我不在乎它在哪个线程上运行，只要它是不同的线程（所以[这个问题](https://stackoverflow.com/questions/9410930/is-task-factory-startnew-guaranteed-to-create-at-least-one-new-thread)中给出的信息没有帮助）。

我是否保证下面的代码`TestLock`在允许`Task t`再次输入之前总是会退出？如果不是，那么推荐的防止重入的设计模式是什么？

```
object TestLock = new object();

public void Test(bool stop = false) {
    Task t;
    lock (this.TestLock) {
        if (stop) return;
        t = Task.Factory.StartNew(() => { this.Test(stop: true); });
    }
    t.Wait();
} 
```

**编辑：**根据 Jon Skeet 和 Stephen Toub 的以下回答，确定性防止重入的一种简单方法是传递 CancellationToken，如此扩展方法所示：

```
public static Task StartNewOnDifferentThread(this TaskFactory taskFactory, Action action) 
 {
    return taskFactory.StartNew(action: action, cancellationToken: new CancellationToken());
} 
```

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-09-03T10:26:31.243

我就这个问题向[PFX 团队](http://blogs.msdn.com/b/pfxteam/)的成员 Stephen Toub 发送了邮件。他很快就回来找我了，提供了很多细节——所以我就在这里复制并粘贴他的文字。我没有全部引用，因为阅读大量引用的文本最终会比普通的黑白黑白更舒服，但实际上，这是斯蒂芬 - 我不知道这么多东西 :) 我做了这个答案社区 wiki 以反映以下所有优点并不是我真正的内容：

> 如果您调用已完成[`Wait()`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.wait)的[任务](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task)，则不会有任何阻塞（如果任务以非 的 TaskStatus 完成，它只会抛出异常，[否则](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.taskstatus)`RanToCompletion`返回为[nop](https://en.wikipedia.org/wiki/NOP)）。如果你调用`Wait()`一个已经在执行的任务，它必须阻塞，因为它不能合理地做任何其他事情（当我说阻塞时，我包括真正的基于内核的等待和旋转，因为它通常会混合使用两者）。同样，如果您调用`Wait()`具有`Created`or`WaitingForActivation`状态的任务，它将阻塞，直到任务完成。这些都不是正在讨论的有趣案例。
> 
> 有趣的情况是，当您调用`Wait()`处于`WaitingToRun`状态的 Task 时，这意味着它之前已排队到[TaskScheduler](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.taskscheduler)，但 TaskScheduler 尚未开始实际运行 Task 的委托。在这种情况下，调用将询问调度程序是否可以通过调用调度程序的方法`Wait`在当前线程上运行任务。`TryExecuteTaskInline`这称为*内联*。调度程序可以选择通过调用来内联任务`base.TryExecuteTask`，或者它可以返回“false”以指示它没有执行任务（通常这是通过类似...的逻辑来完成的）
> 
> ```
> return SomeSchedulerSpecificCondition() ? false : TryExecuteTask(task); 
> ```
> 
> 返回布尔值的原因`TryExecuteTask`是它处理同步以确保给定的任务只执行一次）。因此，如果调度程序希望在 期间完全禁止内联任务`Wait`，则可以将其实现为`return false;` 如果调度程序希望尽可能始终允许内联，则可以将其实现为：
> 
> ```
> return TryExecuteTask(task); 
> ```
> 
> 在当前实现中（.NET 4 和 .NET 4.5，我个人不希望这会改变），如果当前线程是 ThreadPool 线程并且该线程是一个先前已将任务排队。
> 
> 请注意，这里没有任意重入，因为默认调度程序在等待任务时不会抽出任意线程......它只允许内联该任务，当然任何内联该任务依次决定去做。另请注意，`Wait`在某些情况下甚至不会询问调度程序，而是更愿意阻止。例如，如果您传入一个可取消的[CancellationToken](https://docs.microsoft.com/en-us/dotnet/api/system.threading.cancellationtoken)，或者如果您传入一个非无限超时，则它不会尝试内联，因为内联任务的执行可能需要任意长的时间，即全有或全无，这最终可能会显着延迟取消请求或超时。总的来说，TPL 试图在浪费线程之间取得不错的平衡。`Wait`'ing 并重复使用该线程太多。这种内联对于递归的分而治之问题（例如[QuickSort](https://en.wikipedia.org/wiki/Quicksort)）非常重要，在这种问题中，您会产生多个任务，然后等待它们全部完成。如果在没有内联的情况下这样做，那么当您耗尽池中的所有线程以及它想要给您的任何未来线程时，您很快就会陷入僵局。
> 
> 与 分开，如果正在使用的调度程序选择作为 QueueTask 调用的一部分同步运行任务`Wait`，则[Task.Factory.StartNew](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.taskfactory.startnew)调用也有可能最终执行任务。.NET 中内置的调度程序都不会这样做，我个人认为这对调度程序来说是一个糟糕的设计，但理论上是可能的，例如：
> 
> ```
> protected override void QueueTask(Task task, bool wasPreviouslyQueued)
> {
>     return TryExecuteTask(task);
> } 
> ```
> 
> that的重载`Task.Factory.StartNew`不接受 a`TaskScheduler`使用来自的调度程序，在targets`TaskFactory`的情况下。这意味着如果您从排队到这个神话的任务中调用，它也会排队到，导致调用同步执行任务。如果您对此完全担心（例如，您正在实现一个库并且您不知道将从哪里调用您），您可以显式传递给调用，使用（总是转到），或使用created 来定位.`Task.Factory``TaskScheduler.Current``Task.Factory.StartNew``RunSynchronouslyTaskScheduler``RunSynchronouslyTaskScheduler``StartNew``TaskScheduler.Default``StartNew``Task.Run``TaskScheduler.Default``TaskFactory``TaskScheduler.Default`

* * *

编辑：好的，看来我完全错了，当前正在等待任务的线程*可能*会被劫持。这是一个更简单的例子：

```
using System;
using System.Threading;
using System.Threading.Tasks;

namespace ConsoleApplication1 {
    class Program {
        static void Main() {
            for (int i = 0; i < 10; i++)
            {
                Task.Factory.StartNew(Launch).Wait();
            }
        }

        static void Launch()
        {
            Console.WriteLine("Launch thread: {0}", 
                              Thread.CurrentThread.ManagedThreadId);
            Task.Factory.StartNew(Nested).Wait();
        }

        static void Nested()
        {
            Console.WriteLine("Nested thread: {0}", 
                              Thread.CurrentThread.ManagedThreadId);
        }
    }
} 
```

样本输出：

```
Launch thread: 3
Nested thread: 3
Launch thread: 3
Nested thread: 3
Launch thread: 3
Nested thread: 3
Launch thread: 3
Nested thread: 3
Launch thread: 4
Nested thread: 4
Launch thread: 4
Nested thread: 4
Launch thread: 4
Nested thread: 4
Launch thread: 4
Nested thread: 4
Launch thread: 4
Nested thread: 4
Launch thread: 4
Nested thread: 4 
```

如您所见，有很多次等待线程被重用于执行新任务。即使线程已获得锁，这种情况也可能发生。讨厌的重入。我很震惊和担心:(

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T13:22:33.587

为什么不只是为它设计，而不是向后弯腰以确保它不会发生？

TPL 在这里是一条红鲱鱼，只要您可以创建一个循环，任何代码都可能发生重入，并且您不确定堆栈帧的“南部”会发生什么。同步重入是最好的结果——至少你不能自己（很容易）自死锁。

锁管理跨线程同步。它们与管理重入是正交的。除非您要保护真正的一次性资源（可能是物理设备，在这种情况下您可能应该使用队列），否则为什么不只是确保您的实例状态是一致的，以便重入可以“正常工作”。

（边想：信号量是否可重入而不递减？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T07:54:19.683

您可以通过编写一个在线程/任务之间共享套接字连接的快速应用程序来轻松测试这一点。

该任务将在通过套接字发送消息并等待响应之前获取锁。一旦这个块并变得空闲（IOBlock），在同一个块中设置另一个任务来做同样的事情。它应该阻止获取锁，如果它没有，并且第二个任务被允许通过锁，因为它由同一个线程运行，那么你就有问题了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-01T07:09:58.650

Erwin提出的解决方案`new CancellationToken()`对我不起作用，无论如何都发生了内联。

所以我最终使用了 Jon 和 Stephen ( `... or if you pass in a non-infinite timeout ...`) 建议的另一个条件：

```
 Task<TResult> task = Task.Run(func);
  task.Wait(TimeSpan.FromHours(1)); // Whatever is enough for task to start
  return task.Result; 
```

**注意：**为简单起见，此处省略异常处理等，您应该注意生产代码中的那些。

# asp.net - 在 HTML 表格单元格内水平对齐动态加载的用户控件

> ID：12245936
> 
> 赞同：0
> 
> 时间：2012-09-03T10:19:38.043
> 
> 标签：asp.net, html, user-controls, web-user-controls

我有一个 html 表，其中有一个带有 runat=server 的元素。我正在从后面的代码中加载一些用户控件。

```
 <td id ="ModuleGridHolder" runat="server" rowspan="3">            
    </td> 
```

这是用户控件 HTML

```
 <%@ Control Language="C#" AutoEventWireup="true" CodeBehind="ModuleGrid.ascx.cs"
    Inherits="RadTreeListTest.Controls.ModuleGrid" %>

    <table cellpadding="0px" cellspacing="0px" style="width:100%;">

    <tr>
    <td colspan="2">
        <asp:GridView ID="gvSectionCells" runat="server" Width="100%" AutoGenerateColumns= "true">
            <HeaderStyle BackColor="#9999FF" />
            <RowStyle HorizontalAlign="Center" />
        </asp:GridView>
    </td>
    <td>
        <asp:GridView ID="gvSectionTotalCells" runat="server" Width="100%" AutoGenerateColumns="false">
            <HeaderStyle BackColor="#9999FF" />
            <RowStyle HorizontalAlign="Center" />
          <Columns>
                <asp:BoundField DataField="sumRow" HeaderText="" />                                      
            </Columns>              
        </asp:GridView>
    </td>
</tr> 
```

这是代码的简化版本，它在其中呈现几个用户控件。

```
 foreach loop
  {
      ModuleGrid mg = (ModuleGrid)LoadControl("ModuleGrid.ascx");
      ModuleGridHolder.Controls.Add(mg);
  } 
```

问题是所有呈现的控件都在彼此之上垂直加载 IE。如何在单元格内水平对齐它们？

我试过使用 float:left 但它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:07:45.510

在代码中使用 CssClass 参数并应用于每个控件。这样，您可以集中设置页面上加载的每个动态控件的样式：

```
foreach loop
{
    ModuleGrid mg = (ModuleGrid)LoadControl("ModuleGrid.ascx");
    mg.CssClass = "myStyle";
    ModuleGridHolder.Controls.Add(mg);
} 
```

一旦控件使用您的样式表类，将样式表链接到您的 aspx 页面并使用如下内容：

```
.myStyle
{
   float: left;
   width: 100px;
} 
```

如果您已经在做类似的事情，我建议为每个控件分配一个固定的宽度（或百分比），看看是否让它们浮动到彼此的左侧，可能是没有指定宽度控件仅使用 100% 宽度并导致后续控件垂直“堆叠”。

总的来说，我会完全避免使用表格，而只使用 DIV 标签。我发现它们比不得不摆弄表格、列和行更容易定位。

# java - 在 Eclipse 中使用 maven-release-plugin

> ID：12245938
> 
> 赞同：13
> 
> 时间：2012-09-03T10:19:48.933
> 
> 标签：java, eclipse, maven, release, m2eclipse

我最近尝试使用`maven-release-plugin`它，因为它显然是 Maven 世界中推荐的构建和打包发布方式。

但是我想在 Eclipse 中使用它，因为我的开发工作流程的其余部分都是基于 Eclipse 的。我通常通过作为 Eclipse Juno (4.2) 的一部分提供的 m2eclipse 插件运行 Maven 命令

当我尝试在 Eclipse 中运行“release:prepare”时，我注意到了一些奇怪的现象：

1.  在根项目目录中创建了一些额外的文件 - “pom.xml.releaseBackup”和“release.properties”。他们真的属于那里吗？我是否正确设置了发布目录？我不会真的将这些临时工件视为我的源代码树的一部分......
2.  被`pom.xml`更新的版本号手动覆盖。Eclipse 会警告您并很乐意重新加载更新的版本——但这通常安全吗？
3.  准备最终失败并给出错误`[ERROR] Failed to execute goal org.apache.maven.plugins:maven-release-plugin:2.0:prepare (default-cli) on project clisk: Failed to invoke Maven build. Error configuring command-line. Reason: Maven executable not found at: C:\Users\Mike\git\clisk\EMBEDDED\bin\mvn.bat -> [Help 1]`- 大概是因为我使用的是 m2eclipse 提供的内置 Maven excetable 而不是命令行。我想我也可以安装命令行 maven ......但这是否明智或只会导致更多问题？

考虑到这些问题，有没有办法让 maven-release-plugin 在 Eclipse 中顺利工作，还是我应该放弃并继续手动发布？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T10:35:08.377

我一直在使用发布插件，但只能从命令行使用。

回覆。1\. 如果在准备发布时出现问题，需要发布插件创建的备份文件。您始终可以使用 release:rollback 命令回滚准备好的版本。当您发布时：执行它们将被删除。

回覆。2.插件将版本号从快照版本例如：0.0.1-SNAPSHOT：更改为发布版本：0.0.1。然后在 release:perform 发布版本移动到 maven 存储库后，发布插件再次将版本更改为 0.0.2-SNAPSHOT。现在，您可以在测试或生产环境中使用完整发布（测试）版本以及用于开发目的的快照版本。

回覆。3.我不知道是什么导致了问题，但是从命令行使用发布插件看不到问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-12T20:16:46.137

mvn 3.3.3 还安装 mvn.cmd 文件，而不是 Windows 中的 mvn.bat 文件。

您应该将 mvn.cmd 复制到 mvn.bat

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-25T16:44:58.807

好吧，我知道这个链接是旧的，但是为了帮助一些人为问题 3 引用这个链接。

将 maven 单独安装到本地 Box 并在 Windows->Preferences--> maven--> Installation 下给出安装路径。您还必须在 Eclipse 的运行配置中定义相同的内容。

附件是一个解释相同的链接。

[http://maven.40175.n5.nabble.com/Build-Failure-prepare-release-td510949.html](http://maven.40175.n5.nabble.com/Build-Failure-prepare-release-td510949.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-03T10:38:55.693

您可以通过安装命令行 Maven 并通过选择 Window -> Preferences -> Maven -> Installations 将 Eclipse 配置为使用它而不是嵌入式来克服您提到的错误，但我同意在外部发布您的版本的建议蚀。

# eclipse - 导入com.interwoven无法解决

> ID：12245942
> 
> 赞同：1
> 
> 时间：2012-09-03T10:19:58.073
> 
> 标签：eclipse, teamsite

我是 Teamsite 的新手，不确定使用哪个 jar 文件来解决我在尝试在 Eclipse 中编写 Java 数据源时遇到的问题。我正在使用的进口清单是：

```
import com.interwoven.datasource.MapDataSource;
import com.interwoven.datasource.core.DataSourceContext;
import com.interwoven.livesite.dom4j.Dom4jUtils;
import com.interwoven.serverutils100.InstalledLocations;
import com.interwoven.cssdk.filesys.CSVPath; 
```

所有这些导入都显示相同的错误

> 无法解析导入的 com.interwoven。

谁能告诉我应该添加哪些jar文件？

# c# - XNA类的保存列表

> ID：12245943
> 
> 赞同：1
> 
> 时间：2012-09-03T10:19:59.633
> 
> 标签：c#, serialization, io, xna-4.0, .net

我在保存到二进制文件时遇到了一些问题。

我需要将我的游戏信息保存到一个二进制文件并在游戏加载时加载它。我试图用将保存的所有信息创建一个类，然后保存它。

它看起来像这样：

```
public struct SaveGameData
{
    public List<Chunk> chunkList;
    public string saveName;
    public string playerName;
    public Vector2 playerPosition;
} 
```

问题是块列表...它不序列化并且类不能序列化，因为它包含对 XNA 类的引用。

我保存数据的函数如下所示：

```
public static void saveGame(string mSaveFileName, SaveGameData data)
    {
        saveFileName = mSaveFileName;

        if (!Directory.Exists(saveFilePath))
        {
            Directory.CreateDirectory(saveFilePath);
        }

        FileStream stream = File.Open(saveFilePath + saveFileName + ".dat", FileMode.OpenOrCreate, FileAccess.Write);

        data.saveName = saveFileName;
        formatter.Serialize(stream, data);
        stream.Close();
    } 
```

如何将类的实例保存到文件中，然后再读取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T08:41:18.793

保存数据时没有问题。

XNA 您可以轻松地将用户数据或游戏详细信息保存在文件中。但是序列化的东西可能会出现问题。这是我使用的不同选项。你可以选择其中任何一个。

**另存为 XML：**如果您的类是可序列化的（具有序列化属性的类），您可以将类序列化为 XML 并将其写入磁盘。使用纯 C# 有很多方法可以做到这一点。这是它的[MSDN](http://msdn.microsoft.com/en-us/library/aa286548.aspx)。您可以选择其中任何一个

**另存为 JSON：**如果您的类是可序列化的，那么您可以使用文件流在磁盘上另存为 JSON，因为 JSON 是纯字符串，您可以将数据写入流。

**另存为文本：**我个人从不喜欢这个，因为这个文件没有任何结构，读回很困难

**另存为二进制：**正如您在此处尝试的那样。将数据转换为添加为二进制对象。最大的缺点是即使您可以读取数据。它比 about 选项快，但在游戏中你真正需要进行 IO 操作的时刻非常少。所以，我个人更喜欢上述选项。

如果需要更多详细信息，请告诉我。

# tridion - 无法使用 Tcmupload 程序集将 dll 构建到 tridion 内容管理器

> ID：12245947
> 
> 赞同：2
> 
> 时间：2012-09-03T10:20:12.970
> 
> 标签：tridion, tridion-2011

我们已经从 5.3 版本迁移到 Tridion 2011 SP1

在复合模板设置中，我们创建了一个名为“CommonFunctions”的项目，其中包含在整个网站中经常使用的函数。

这个 cs 文件是为 tridion 内容管理器构建的，我们正在尝试使用 Add Exixting Item > CommonFunctions.cs > Add as link 在其他项目中引用它

但是当我尝试构建我的项目（其中引用了 commonFunctions cs 文件）时，它给了我以下错误：

无法生成名为 CommonFunctions 的模板，因为为另一个程序集模板创建的生成模板已经存在。

有人可以帮忙吗？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T10:47:32.957

如果您使用错误消息，原因很简单。您正在尝试创建两个具有相同名称（CommonFunctions）的 TBB。我建议您更改现有的 TBB 或重命名新的 TBB。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T11:34:46.680

您的 CommonFunctions 类是否实现了 ITemplate？如果是这样，这就是您看到错误的原因。这样做意味着，当上传时，Tridion 将尝试为其创建一个 TBB，从而为您提供命名冲突的情况。课堂上有什么？它应该是帮助功能或“模板”（TBB），但不能同时是两者。至少，如果您想以这种方式重用现有功能，则不会。

在我看来，你有几个选择。第一种是将新程序集上传到与当前使用的文件夹不同的文件夹。第二个是将类复制到您的新项目并重命名它。第三种是将您的辅助函数从 TBB 类中分离到一个不实现 ITemplate 的类中，然后您可以在当前尝试从新项目中引用它。

# multithreading - 分析死锁时“CritSec 的 DebugInfo 未指向临界区”

> ID：12245951
> 
> 赞同：5
> 
> 时间：2012-09-03T10:20:21.267
> 
> 标签：multithreading, delphi, debugging, windbg, critical-section

我正在使用 Windbg 分析在用 delphi 编写的数据快照应用程序服务器中发生的死锁。

当我跑

```
!analyze -hang -v 
```

我明白了

```
:000:x86> !analyze -hang -v
****************************************************** *****************************
* *
* 异常分析 *
* *
****************************************************** *****************************

GetPageUrlData 失败，服务器返回 HTTP 状态 404
请求的 URL：http://watson.microsoft.com/00000000.htm?Retriage=1

FAULTING_IP：
+6ced240
00000000 ?? ？？？

EXCEPTION_RECORD: ffffffffffffffff -- (.exr 0xffffffffffffffff)
异常地址：0000000000000000
   ExceptionCode：80000003（Break指令异常）
  异常标志：00000000
编号参数：0

FAULTING_THREAD：0000000000000000

BUGCHECK_STR：挂起

DEFAULT_BUCKET_ID：APPLICATION_HANG

PROCESS_NAME：********.exe

ERROR_CODE：（NTSTATUS）0xcfffffff -

EXCEPTION_CODE：（NTSTATUS）0xcfffffff -

MOD_LIST：

NTGLOBALFLAG：0

APPLICATION_VERIFIER_FLAGS：0

DERIVED_WAIT_CHAIN：  

Dl Eid Cid WaitType
-- --- -------- --------------
   0 c7c.2634 临界区       

WAIT_CHAIN_COMMAND: ~0s;k;;

BLOCKING_THREAD：0000000000002634

PRIMARY_PROBLEM_CLASS：APPLICATION_HANG

LAST_CONTROL_TRANSFER：从 0000000077138df4 到 000000007711f8b1

堆栈文本：  
0018fc50 77138df4 00000c6c 00000000 00000000 ntdll_77100000!NtWaitForSingleObject+0x15
0018fcb4 77138cd8 00000000 00000000 03fe0940 ntdll_77100000!RtlpWaitOnCriticalSection+0x13e
0018fcdc 7369324f 736a3134 00000000 03fe0940 ntdll_77100000!RtlEnterCriticalSection+0x150
警告：堆栈展开信息不可用。以下框架可能是错误的。
0018fcec 7369af5f 00000388 00000000 003d1e00 mswsock!GetLspGuid+0x19af
0018fd08 76366958 00000388 0018fd84 0018fd9c mswsock!GetLspGuid+0x96bf
0018fd38 0018fd58 763668cd 00000388 0018fd84 ws2_32!WSAAccept+0x84
00000000 00000000 00000000 00000000 00000000 0x18fd58

FOLLOWUP_IP：
mswsock!GetLspGuid+19af
7369324f 33db xor ebx,ebx

SYMBOL_STACK_INDEX：3

SYMBOL_NAME: mswsock!GetLspGuid+19af

FOLLOWUP_NAME：机器所有者

模块名称：C:\Windows\System32\mswsock

IMAGE_NAME：lld

DEBUG_FLR_IMAGE_TIMESTAMP：4ce7c83d

STACK_COMMAND: ~0s ; KB

FAILURE_BUCKET_ID：APPLICATION_HANG_cfffffff_lld！卸载

BUCKET_ID: X64_HANG_mswsock!GetLspGuid+19af

WATSON_STAGEONE_URL：http://watson.microsoft.com/00000000.htm?Retriage=1

跟进：MachineOwner
---------

```

然后我做了

```
!locks -V 
```

查看它在等待哪个锁，令我惊讶的是它返回了这个，

```
0:000:x86> !locks -V

CritSec ntdll!RtlCriticalSectionLock+0 在 0000000077057060
LockCount 未锁定
递归计数 0
拥有线程 0
条目数 0
争用计数 0

CritSec ntdll!LdrpLoaderLock+0 at 0000000077057490
LockCount 未锁定
递归计数 0
拥有线程 0
条目数 0
争用计数 0

CritSec ntdll!RtlpDynamicFunctionTableLock+0 at 0000000077057468
LockCount 未锁定
递归计数 0
拥有线程 0
条目数 0
争用计数 0

CritSec ntdll!FastPebLock+0 在 000000007705a900
LockCount 未锁定
递归计数 0
拥有线程 0
条目数 0
争用计数 0

CritSec ntdll!RtlpProcessHeapsListLock+0 at 000000007705a240
LockCount 未锁定
递归计数 0
拥有线程 0
条目数 0
争用计数 0

CritSec +270208 在 0000000000270208
LockCount 未锁定
递归计数 0
拥有线程 0
条目数 0
争用计数 1

CritSec ntdll!EtwProvCritSect+0 在 000000007705a120
LockCount 未锁定
递归计数 0
拥有线程 0
条目数 0
争用计数 0

CritSec ntdll!EtwPrivSessionCritSect+0 在 000000007705a1e0
LockCount 未锁定
递归计数 0
拥有线程 0
条目数 0
争用计数 0

CritSec +10208 在 0000000000010208
LockCount 未锁定
递归计数 0
拥有线程 0
条目数 0
争用计数 0

CritSec +276f40 在 0000000000276f40
LockCount 未锁定
递归计数 0
拥有线程 0
条目数 0
争用计数 0

扫描了 10 个关键部分

```

从查看调用堆栈

```
堆栈文本：  
0018fc50 77138df4 00000c6c 00000000 00000000 ntdll_77100000!NtWaitForSingleObject+0x15
0018fcb4 77138cd8 00000000 00000000 03fe0940 ntdll_77100000!RtlpWaitOnCriticalSection+0x13e
0018fcdc 7369324f 736a3134 00000000 03fe0940 ntdll_77100000!RtlEnterCriticalSection+0x150
警告：堆栈展开信息不可用。以下框架可能是错误的。
0018fcec 7369af5f 00000388 00000000 003d1e00 mswsock!GetLspGuid+0x19af
0018fd08 76366958 00000388 0018fd84 0018fd9c mswsock!GetLspGuid+0x96bf
0018fd38 0018fd58 763668cd 00000388 0018fd84 ws2_32!WSAAccept+0x84
00000000 00000000 00000000 00000000 00000000 0x18fd58

```

我确定它正在等待地址 0x736a3134 的关键部分（传递给 RtlEnterCriticalSection 的第一个参数）所以我运行了这个

```
!critsec 736a3134 
```

这给了我这个输出

```
0:000:x86> !critsec 736a3134

位于 00000000736a3134 的 CritSec 的 DebugInfo 未指向临界区
不是初始化的临界区。

CritSec mswsock!WSPStartup+6f64 at 00000000736a3134
服务员醒来 是的
锁定计数 -1
递归计数 11028
拥有线程 c6c
条目计数 1f49dad6
争用计数 88000000
*** 锁定

```

现在一分钱掉了，指向临界区的指针已经损坏，可能是由于并发线程访问和代码中其他地方缺乏同步

我的问题是我如何追踪它在哪里或找出它是否是另一个问题？

PS：此错误仅在应用程序负载过重且可能连接了 700 个客户端时出现

（每个连接使用一个线程，我知道 32 位应用程序将被限制为默认线程堆栈大小的大约 2000 个线程，这不是最好的方法）

PPS：我有多个故障转储，其中应用程序挂起等待不同的关键部分，在每种情况下，关键部分的指针似乎都没有指向关键部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:22:45.557

查看 !analyze -hang -v 的输出，您似乎没有使用 Application Verifier。我建议您在启用应用程序验证程序“锁定”选项后收集挂起转储。它肯定会为您提供更多故障排除信息。

您可以从此处下载应用程序验证程序：

[http://www.microsoft.com/en-us/download/details.aspx?id=20028](http://www.microsoft.com/en-us/download/details.aspx?id=20028)

更多信息：

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd371695(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371695(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:31:32.727

只是为了让您知道我们放弃了试图找出造成这种情况的原因。因为它只发生在程序接近其最大虚拟内存空间（2.1GB 32 位应用程序）时，因为我们使用的每个连接方法一个线程。

最后，我们重新设计了客户端，因此他们不再使用这个服务器应用程序，而是现在使用 SOAP 服务器。

SOAP 服务器的扩展性比我们使用的 datasnap/Midas 好得多，尽管我们仍要在出现初始问题的客户端站点对其进行测试。

# php - 有什么办法可以推迟 PHP 代码吗？

> ID：12245955
> 
> 赞同：5
> 
> 时间：2012-09-03T10:20:44.203
> 
> 标签：php, deferred

有什么办法可以推迟 PHP 代码吗？

就像在 javascript 中我们使用`<script defer="defer"></script>`. 有没有办法对 PHP 代码做同样的事情？

**更新：** 这是我使用的代码：

信息：此代码位于我的侧边栏中，并导致网站在加载时停止 2-3 秒。我正在尝试跳过此过程并在站点的其余部分已加载时加载此代码....我也愿意接受其他编码解决方案。

```
<div style="padding:5px;">
<?php
function currency($from_Currency,$to_Currency,$amount) {
$amount = urlencode($amount);
$from_Currency = urlencode($from_Currency);
$to_Currency = urlencode($to_Currency);
$url = "http://www.google.com/ig/calculator?hl=en&q=$amount$from_Currency=?$to_Currency";
$ch = curl_init();
$timeout = 0;
curl_setopt ($ch, CURLOPT_URL, $url);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_USERAGENT , "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1)");
curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
$rawdata = curl_exec($ch);
curl_close($ch);
$data = explode('"', $rawdata);
$data = explode('"', $data['3']);
$var = $data['0'];
return round($var,1);
}
?>

<div style="padding:2px; border-bottom:1px solid #EFEFEF;">1 USD er <?php echo currency("USD","NOK",1); ?> NOK<br />
</div>

<div style="padding:2px; border-bottom:1px solid #EFEFEF;">1 EUR er <?php echo currency("EUR","NOK",1); ?> NOK<br />
</div>

<div style="padding:2px; border-bottom:1px solid #EFEFEF;">1 GBP er <?php echo currency("GBP","NOK",1); ?> NOK<br />
</div>

<div style="padding:2px; border-bottom:1px solid #EFEFEF;">1 SEK er <?php echo currency("SEK","NOK",1); ?> NOK<br />
</div>

<div style="padding:2px; border-bottom:1px solid #EFEFEF;">1 DKK er <?php echo currency("DKK","NOK",1); ?> NOK<br />
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-30T18:37:33.450

延迟 PHP 代码（没有 hack）的唯一可维护方法是 trough`__destruct`方法：

```
class App {

    protected $deferredStack = [];

    public function __destruct() {
        $this->runDeferredStack();
    }

    public function defer(callable $deferred){
        $this->deferredStack[] = $deferred;
    }

    protected function runDeferredStack()
    {
        array_map('call_user_func', array_reverse($this->deferredStack))
    }
} 
```

用法：

```
$app->defer(function(){ echo "bye"; })
// code that opens a resource here...
$app->defer(function(){ echo "closing resource"; })
// code that opens DB connection here...
$app->defer(function(){ echo "closing DB connection"; })
$app->defer(function(){ echo "hi"; }) 
```

由于延迟堆栈以相反的顺序执行，`stdout`因此：

```
hi
closing DB connection
closing resource
bye 
```

您还可以使用[register_shutdown_function](http://php.net/manual/pt_BR/function.register-shutdown-function.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:48:12.763

看起来你想要 AJAX。简单地说：

1.  不要在您的页面中包含有问题的代码；在代码结果出现的地方放置一些占位符（如加载动画）。
2.  取而代之的是 JavaScript 代码，它会向您的服务器发出 AJAX 请求；服务器通过运行有问题的代码并返回一些结果（可能是直接的 HTML）来处理这个请求。
3.  JavaScript 代码获取此结果并将其合并到您的页面中，替换占位符。

如果您使用 jQuery，那么便利功能[`load`](http://api.jquery.com/load/)是一个不错的起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T10:51:35.137

两种选择：

1.  使用 AJAX 在单独的请求中加载它，这样它就不会延迟页面加载。但是，由于这是一个不同的域，您将不得不绕过相同的源策略，例如使用[JSONP](http://en.wikipedia.org/wiki/JSONP)，因此这可能会很棘手，并且如果操作不当会产生安全隐患。按照[本教程](http://viralpatel.net/blogs/jquery-ajax-tutorial-example-ajax-jquery-development/)尝试使用 jQuery 。
2.  运行一个 cron 作业，定期在服务器上检索此数据并将其存储在您的数据库中，以便可以从那里加载它。

无论哪种方式都可以，但如果数据量很大和/或远程连接可能很慢，那么 cron 选项可能更可取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T10:52:20.350

您可能想尝试将这些 div 移动到页脚，而不是使用 JavaScript 将它们就地移动。虽然，这将阻止优雅降级，因为如果用户没有 JS，它将保留在页脚中。另一方面，它将使您免于通过 AJAX 发出额外的请求。

如果使用 jQuery，它会是这样的：

```
<div class="footer_calcs">
    <div style="padding:2px; border-bottom:1px solid #EFEFEF;">1 USD er <?php echo currency("USD","NOK",1); ?> NOK<br />
    </div>
    ...
</div>

<script ...>
    $(function(){
        $('.footer_calcs').children().appendTo( $('#id_of_destination_in_sidebar') ):
    });
</script> 
```

* * *

**另一种选择**可能是：

1.  将值“1”转换`$from_currency`为`$to_currency`
2.  将该比率存储在 PHP var 中`$currency_ratio`
3.  使用`$currency_ratio`比率进行所有计算，因此您无需为每个计算向谷歌发出 CURL 请求。

这样你只做一个 CURL 调用而不是 5 个，这应该会显着加快速度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T11:08:11.357

就像这里已经建议的那样，使用 Ajax 以异步方式加载内容。但这里有一个关于它如何工作的例子。

有几种方法可以做到这一点，但最好的办法是使用 JS 库。一个非常受欢迎的是 jQuery（也许你已经在使用它了？）。

您可以使用 jQuery 轻松地进行 Ajax 调用，如下所示：

```
$.ajax({
  url: 'http://127.0.0.1/controller/someAction/param1',
  success: function(data) {
    $('.result').html(data);
    alert('Load was performed.');
  }
}); 
```

在此示例中，我正在调用此 URL `http://127.0.0.1/controller/action/param1`：。当然，您可以使用任何您想要的 URL。但这里的重点是你必须确保它只返回你想看到的东西。所以它不应该返回整个页面（DOCTYPE 和所有），而应该是这样的：

```
// This is obviously just fictional, i have no idea how your php code looks like
public function someAction($param1)
{
    $menu = $this->getPartialView('menu.phtml');
    $this->view->parse($menu);
} 
```

menu.phtml 看起来像这样：

```
<div>
  <div> ... content ... </div>
</div> 
```

现在回到 JS 代码。如果一切顺利，那么该`success`方法应该被触发。所有内容都将在变量中`data`。因此，您现在需要做的就是将该数据放在正确的 DIV 中。这就是这条线的用途：`$('.result').html(data);`. 这会将加载的内容放置在具有类名的 div 中`result`。

这基本上就是您需要做的所有事情。

# java - Facebook open graph get 'me' works 但 'me?fields=name' 返回 oAuth 错误

> ID：12245960
> 
> 赞同：0
> 
> 时间：2012-09-03T10:20:59.867
> 
> 标签：java, android, facebook, facebook-graph-api, oauth

看完长标题后，这是我目前的状态：

1.  我已成功登录 Facebook（授权方法返回完成）。
2.  我已经实现了一个**异步任务**来获取“**我**”的数据——一切正常。
3.  我试图改变对**me?fields=name**，**gender**的调用，我得到一个错误，比如 -
    `"An active access token must be used to query information about the current user."`

我试着用谷歌搜索它并阅读它，但因为人们用数百万种语言实现他们的代码，我没能找到解决我问题的好方法。

请指教！盎司

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:20:18.547

为了解决这个问题，我改变了处理 facebook 对象的方式：而不是发送给**我？fields=name,gender**

我改为这段代码：

```
 Bundle bundle = new Bundle();
        bundle.putString("fields", "name, gender, picture");
        String jsonString = params[0].request("me", bundle); 
```

# drupal-6 - How to display html content in block in Drupal 6?

> ID：12245962
> 
> 赞同：0
> 
> 时间：2012-09-03T10:21:03.953
> 
> 标签：drupal-6, block

How can i display external(from server) html content into block region.

let me tell you what i did so far is i created a new block on my site called sitemap and put some php code

```
<?php include('../sitemap/sitemap.html'); ?> 
```

and set this block region to footer.

But it show nothing so plz help me so i do it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:08:02.430

也许包含文件路径是错误的。为了获得更好的结果，您可以将该文件放在主题文件夹中并调用它。

```
<?php include(path_to_theme().'/sitemap.html'); ?> 
```

# linux - How to create a script on windows which could run ssh command on a remote linux

> ID：12245965
> 
> 赞同：2
> 
> 时间：2012-09-03T10:21:10.333
> 
> 标签：linux

I just want to create a auto script on windows which could do run some comand through ssh on a reomote linux.

I know it's easy to write script between linux(ssh client) and linux(ssh server).

But I do not know how to create a script on windows(ssh client) to remote connect to linux(ssh server)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:55:44.483

大多数流行的语言都有可以使用的 ssh 库，选择一种你熟悉的语言，然后去寻找库。

我已经成功使用了这些：

C - [libssh](http://www.libssh.org/)
.NET - [SharpSSH](http://www.tamirgal.com/blog/page/SharpSSH.aspx)
Python - [Paramiko](http://www.lag.net/paramiko/) 或[真正简单的 SSH](http://zeth.net/archive/2008/05/29/sftp-python-really-simple-ssh/)或[Fabric](http://docs.fabfile.org/en/0.9.1/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:16:05.160

如果它只是你想要运行的一些命令行，那么[plink](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)就足够了恕我直言..

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T21:45:21.537

一种方法是安装 Cygwin 并使用 shell 脚本运行 ssh 命令。`sh.exe`您可以通过使用参数运行来启动此脚本。

这样，您可以使用您已经熟悉的相同 Linux 工具（sh 和 OpenSSH）来完成这项工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-06T20:31:42.637

使用[plink](http://linux.die.net/man/1/plink)（从 putty 网站获取）和 bat 文件格式，如下所示：

```
Plink.exe -ssh -pw %password5 %linuxuser%@%servver% /path/to/script/script.sh 
```

将它们保存在同一个文件夹中 -> 运行您的精彩杰作

# php - Date and number - create array

> ID：12245966
> 
> 赞同：0
> 
> 时间：2012-09-03T10:21:14.187
> 
> 标签：php, date, datetime

> **Possible Duplicate:**
> [Generate incrementing date strings](https://stackoverflow.com/questions/2447875/generate-incrementing-date-strings)

I have:

```
$start_date = '2012-09-03';
$number_days = 5; 
```

I would like receive array with this dates:

```
$dates = array(
            '2012-09-03',
            '2012-09-04',
            '2012-09-05',
            '2012-09-06',
            '2012-09-07'
 ); 
```

What is the best way for this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:33:35.240

来自@vinay 的修改代码以打印实际输出

```
<?php 
$start_date = '2012-09-03';
$number_days = 5;

$dates = array();
$TS = strtotime($start_date);
for($i=0;$i<5;$i++)
{
    $dates[$i] = date('Y-m-d', strtotime('+1 day', $TS));
    $TS = strtotime($dates[$i]);
   echo date('y-m-d',$TS).'<br>';

}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:37:55.317

这是 PHP 5.3 DateTime 和 DateInterval 的简单示例。这是明确的解决方案。**注意：PHP 5.2 支持 DateTime，但不支持 DateInterval。您可以在 PHP 5.2 的自定义类中声明它，请参见此处：[DateInterval 定义](http://www.php.net/manual/en/class.dateinterval.php)。**

```
<?php
   $start_date = '2012-09-03';
   $number_days = 5;
   $dt = new DateTime($start_date);

   $dates = array();

   for($i = 0; $i < $number_days; $i++) {
       $dates[] = $dt->format("Y-m-d");
       $dt->add(new DateInterval("P1D"));
   }

   print_r($dates);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T10:27:14.343

[http://php.net/manual/en/function.date-add.php](http://php.net/manual/en/function.date-add.php) 循环并添加您需要的日期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T10:27:28.113

你有没有尝试过这样的事情

```
 function get_days($start_date, $max){
        $ts=strtotime($start_date);
        $next_day_interval=24*60*60;
        $arr=array();
            $arr[]=$start_date;
        for($i=1;$i<=$max;$i++){
            $ts += $next_day_interval;
            $arr[]=date('Y-m-d', $ts);
        }

        return $arr;
    } 
```

只是在这里写了它，所以可能会有一些编译时错误，但我希望你明白这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T10:28:08.807

尝试这个。

```
$start_date = '2012-09-03';
$number_days = 5;

$dates = array();
$TS = strtotime($start_date);
$dates[0] = $start_date;
for($i=1;$i<5;$i++)
{
    $dates[$i] = date('Y-m-d', strtotime('+1 day', $TS));
    $TS = strtotime($dates[$i]);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-03T10:29:09.533

这就是您要搜索的内容（也适用于 PHP < 5.3）

```
<?php 
    $start_date = '2012-09-03';
    $number_days = 5;

    $stdate = date(strtotime($start_date));
    $dates = array();
    for($i = 0 ; $i < $number_days ; $i++) {
      $dates[$i] = date('Y-m-d', $stdate) ;
      $stdate += 24*60*60;
    }

    var_dump($dates);
?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-03T10:29:31.730

```
$start_date = '2012-09-03';
$dates[] = $start_date;
$number_days = 5;
for ($i=1; $i < $number_days; $i++) {
    $dates[] = date('Y-m-d', strtotime("$start_date +$i days"));
} 
```

# excel - Copying Entire Worksheet from one Excel to another

> ID：12245967
> 
> 赞同：0
> 
> 时间：2012-09-03T10:21:15.357
> 
> 标签：excel, vba, adodb

I would like to copy the entire worksheet from one Closed Excel file to the currently open excel file however I do not want to use a range as the amount of rows in the file will vary.

The code I am using to rereive data from within a range is

```
Public Sub GetData(SourceFile As Variant, SourceSheet As String, _
  SourceRange As String, TargetRange As Range, Header As Boolean,         
UseHeaderRow As Boolean)
' 30-Dec-2007, working in Excel 2000-2007
Dim rsCon As Object
Dim rsData As Object
Dim szConnect As String
Dim szSQL As String
Dim lCount As Long

' Create the connection string.
If Header = False Then
    If Val(Application.Version) < 12 Then
        szConnect = "Provider=Microsoft.Jet.OLEDB.4.0;" & _
                    "Data Source=" & SourceFile & ";" & _
                    "Extended Properties=""Excel 8.0;HDR=No"";"
    Else
        szConnect = "Provider=Microsoft.ACE.OLEDB.12.0;" & _
                    "Data Source=" & SourceFile & ";" & _
                    "Extended Properties=""Excel 12.0;HDR=No"";"
    End If
Else
    If Val(Application.Version) < 12 Then
        szConnect = "Provider=Microsoft.Jet.OLEDB.4.0;" & _
                    "Data Source=" & SourceFile & ";" & _
                    "Extended Properties=""Excel 8.0;HDR=Yes"";"
    Else
        szConnect = "Provider=Microsoft.ACE.OLEDB.12.0;" & _
                    "Data Source=" & SourceFile & ";" & _
                    "Extended Properties=""Excel 12.0;HDR=Yes"";"
    End If
End If

If SourceSheet = "" Then
    ' workbook level name
    szSQL = "SELECT * FROM " & SourceRange$ & ";"
Else
    ' worksheet level name or range
    szSQL = "SELECT * FROM [" & SourceSheet$ & "$" & SourceRange$ & "];"
End If

On Error GoTo SomethingWrong

Set rsCon = CreateObject("ADODB.Connection")
Set rsData = CreateObject("ADODB.Recordset")

rsCon.Open szConnect
rsData.Open szSQL, rsCon, 0, 1, 1

' Check to make sure we received data and copy the data
If Not rsData.EOF Then

    If Header = False Then
        TargetRange.Cells(1, 1).CopyFromRecordset rsData
    Else
        'Add the header cell in each column if the last argument is True
        If UseHeaderRow Then
            For lCount = 0 To rsData.Fields.Count - 1
                TargetRange.Cells(1, 1 + lCount).Value = _
                rsData.Fields(lCount).Name
            Next lCount
            TargetRange.Cells(2, 1).CopyFromRecordset rsData
        Else
            TargetRange.Cells(1, 1).CopyFromRecordset rsData
        End If
    End If

Else
    MsgBox "No records returned from : " & SourceFile, vbCritical
End If

' Clean up our Recordset object.
rsData.Close
Set rsData = Nothing
rsCon.Close
Set rsCon = Nothing
Exit Sub

SomethingWrong:
MsgBox "The file name, Sheet name or Range is invalid of : " & SourceFile, _
       vbExclamation, "Error"
On Error GoTo 0

End Sub 
```

Any help with importing the entire worksheet and all of its rows/column would be great.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:14:14.380

为什么不这样做呢？

```
Dim wbkSource As Workbook
Set wbkSource = Workbooks.Open("C:\BookFromWhichToCopy.xlsx")
wbkSource.Sheets("MySheet").Copy Before:=ThisWorkbook.Sheets(2)
wbkSource.Close 
```

请注意，您可以按名称`.Sheets("MySheet")`或工作簿中的编号调用工作表`.Sheets(2)`，以最适合您的方式调用。

# c# - Using statement with try catch. What happens to instance from using statement?

> ID：12245968
> 
> 赞同：9
> 
> 时间：2012-09-03T10:21:22.080
> 
> 标签：c#, .net, using-statement

If I have a using block surrounding a try catch statement what will happen to the object inside that using statement should the catch fire an exception? Consider the following code:

```
using (IDatabaseConnectivityObject databaseConnectivityObject = new DbProviderFactoryConnectionBasicResponse())
{
    try
    {
        Foo();
    }
    catch (ArgumentNullException e)
    {
        throw;
    }
} 
```

If we assume Foo() fails and the exception is fired and effectively breaks the program will databaseConnectivityObject be disposed? The reason this is important is that the object has a database connection associated with it.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-03T10:25:25.030

您可以将其`using`视为 try-finally 的简写。因此，您的代码相当于：

```
IDatabaseConnectivityObject databaseConnectivityObject = new DbProviderFactoryConnectionBasicResponse();
try
{
    try
    {
        Foo();
    }
    catch(ArgumentNullException e)
    {
        throw;
    }
}
finally
{
  if(databaseConnectivityObject != null)//this test is often optimised away
    databaseConnectivityObject.Dispose()
} 
```

这样看，你可以看到`Dispose()`如果抛出异常，确实会调用 ，因为 try-finally 在 try-catch 之外。

这正是我们使用`using`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-03T10:22:20.697

> we assume Foo() fails and the exception is fired and effectively breaks the program will databaseConnectivityObject be disposed?

Yes it will be. using internally uses `try-finally`, *(using only works for those which implements `IDisposable`)*

From [MSDN- using statement](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

> The using statement ensures that Dispose is called **even if an exception occurs** while you are calling methods on the object. You can achieve the same result by putting the object inside a try block and then calling Dispose in a finally block; in fact, this is how the using statement is translated by the compiler.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-03T10:23:51.910

是的`using`，无论您是否有 try-catch 块，您的块都会处理 databaseConnectivityObject。

您正确地说 using 块很重要，您应该将它用于所有实现的类，`IDisposable`以确保即使在发生异常时也能正确处理它们。

来自[MSDN- using 声明](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

> using 语句可确保调用 Dispose，**即使在**调用对象上的方法时发生异常也是如此。您可以通过将对象放在 try 块中，然后在 finally 块中调用 Dispose 来获得相同的结果；事实上，这就是编译器翻译 using 语句的方式。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-03T10:24:01.730

在实现块时，如果它实现了接口`using`，括号中的对象将被释放。`IDisposable`

即使`foo()`失败，它仍然会被处理掉。

using 语句中的对象必须实现该`IDisposable`接口。

此外，这些问题[“Uses of using in c sharp”](https://stackoverflow.com/questions/75401/uses-of-using-in-c-sharp)和[“using statement vs try finally”](https://stackoverflow.com/questions/278902/using-statement-vs-try-finally?rq=1)`using`进一步说明了该语句的用途和实用性。

[C# 语言规范](http://go.microsoft.com/fwlink/?LinkId=199552)的第 8.13 节清楚地详细说明了 using 语句。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-03T10:26:49.160

您的`using` 代码相当于

```
IDatabaseConnectivityObject databaseConnectivityObject = new IDatabaseConnectivityObject ();
try
{
//To do code here
}
finally
{
    if(databaseConnectivityObject!=null)
    {
       databaseConnectivityObject.Dispose();
    }
} 
```

使用语句主要分为三部分，即

1.  获得
2.  用法
3.  处理

首先，通过 finally 语句获取资源并在 try 块上进行使用。最后，将对象放置在 finally 块中，如上面等效代码中给出的......

# php - How to disable object providing in debug_backtrace?

> ID：12245975
> 
> 赞同：2
> 
> 时间：2012-09-03T10:22:00.973
> 
> 标签：php, php-5.2, debug-backtrace

How to disable object providing with debug_backtrace in PHP 5.2.11? debug_backtrace(false) didn't work.

Thanks in advance,

Simon

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-12-11T11:50:05.113

已经很晚了，但我想回答这个问题。实际上这不是我的答案，但我也在寻找上述问题的解决方案，我在 PHP 的官方网站上找到了答案：[debug_backtrace](http://php.net/manual/en/function.debug-backtrace.php#119987)

`debug_backtrace`在这里，robert 对函数中各种选项的使用进行了简要说明。

```
debug_backtrace() - show all options
debug_backtrace(0) - exlude ["object"]
debug_backtrace(1) - same as debug_backtrace()
debug_backtrace(2) - exlude ["object"] AND ["args"] 
```

我希望，这会对其他人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:24:54.067

PHP 5.2.11[源代码](https://github.com/php/php-src/blob/9a983f9ccfa61690fd2b0f186de12d4e8a28cab8/Zend/zend_builtin_functions.c#L2120)表明它`debug_backtrace`接受一个布尔参数，所以传入`false`应该可以工作。

# java - merise 和 uml 可以在实际项目中共存吗？

> ID：12245977
> 
> 赞同：2
> 
> 时间：2012-09-03T10:22:05.867
> 
> 标签：java, jakarta-ee, uml

在现实世界的项目中，当您必须使用面向对象建模和数据库建模来创建某种信息系统时，无论是大型网站还是桌面应用程序。

*   你可以同时使用 Merise 和 UML 吗？

*   还是只有一个建模系统就足够了？

*   在这种情况下使用哪一个？

*   在第一种情况下，谁先 Merise 或 UML？

*   你会如何从一个过往另一个？

例如，该项目由一个 java EE 业务服务器和一个 java 桌面应用程序组成，换句话说就是一个 3tires 系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T20:07:06.687

UML 和 Merise 都是用于软件开发的组织工具箱，因此在这方面，使用其中一种或另一种并没有根本上的错误，因为它将/应该仅用于帮助形式化您的开发决策的某些方面（用例、类图等） .)。在表达性方面，如果我记得很清楚，Merise 具有一些您会发现 UML 中缺乏的数据库建模功能，而 UML 具有用例建模和序列图，您在 Merise 中找不到（如果我没记错的话）。总而言之，我想说 UML 为高级软件开发概念（概念/组织维度）提供了更多工具，而 Merise 则更具组织性/可操作性。

也就是说，一切都应该归结为指导您最终选择的这些问题/理由：

*   你们团队的文化是什么？据我所知，Merise 是一个在法国以外并没有真正赶上的开发过程，它正逐渐被 UML 所取代。很有可能，如果您在一个年轻的团队中，大多数开发人员应该有一些 UML 概念。
*   如果您在一个同时具有 UML/Merise 文化的团队中，那么使用这两种语言真的有好处吗？**虽然大多数概念应该在这两种方法之间进行映射（一旦你掌握了这**两种方法就相当容易了），但它需要每个人都努力在每个开发图/阶段之间转换这些概念。这真的值得吗？
*   there's one final aspect that'll make UML shine: tooling. While I'm pretty sure there's a few Merise IDEs around, you'll find a profusion of tools for editing UML diagrams comfortably (e.g., Visio or [StarUML](http://staruml.sourceforge.net/en/) on the PC, Omigraffle on the Mac, portable solutions such as [Papyrus](http://www.papyrusuml.org/) (for Eclipse) or Gentleware's [Poseidon](http://www.gentleware.com/uml-software-community-edition.html). Last thing you'd want is sharing basic drawings or PDFs to explain your design choices.

# iphone - UIDatePicker giving different time?

> ID：12245980
> 
> 赞同：0
> 
> 时间：2012-09-03T10:22:16.460
> 
> 标签：iphone, objective-c, ios, ios5, uidatepicker

I have drag and drop `UIDatePicker` from `InterfaceBuilder` and in .h file i have done the outlet and actions as follows.

```
- (IBAction)DatePicker:(id)sender;
@property (strong, nonatomic) IBOutlet UILabel *dateSelected;
@property (strong, nonatomic) IBOutlet UIDatePicker *datePickerOutlet; 
```

and in appDelegate.m file i have assigned the following parameters to the `datePickerOutlet`

```
datePickerOutlet.calendar=[NSCalendar autoupdatingCurrentCalendar];
datePickerOutlet.timeZone=[NSTimeZone defaultTimeZone]; 
```

but it is giving time as follows through `NSLog`

```
2012-09-03 15:42:45.365 DataTest[4213:207] 2012-09-03 10:10:28 +0000
2012-09-03 15:42:45.366 DataTest[4213:207] Asia/Kolkata 
```

it should give output as

```
2012-09-03 15:42:45.365 DataTest[4213:207] 2012-09-03 3:42:45 +0000
2012-09-03 15:42:45.366 DataTest[4213:207] Asia/Kolkata 
```

(which is the current time)

How to get the current time??in the picker it is showing correctly but when i select a date NSLog is giving other value..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:25:45.260

显示的时间为格林威治标准时间，您需要使用 localTimeZone 或手动添加 +0530 小时

```
datePickerOutlet.timeZone = [NSTimeZone localTimeZone]; 
```

使用它来设置本地时区。希望能帮助到你。快乐编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:47:05.000

你试过用`-[NSDateFormatter stringFromDate:]`格式化`NSDate`吗？

# scala - Do monad transformers apply to getting JSON from services?

> ID：12245987
> 
> 赞同：18
> 
> 时间：2012-09-03T10:22:27.643
> 
> 标签：scala, playframework-2.0, monads, monad-transformers

I have a Play! 2 for Scala application that needs to retrieve some data in JSON format from an external service.

The Play! framework allows to make HTTP requests asynchronously by wrapping the response in a [Promise](http://www.playframework.org/documentation/2.0.2/ScalaWS). `Promise` is a monad that wraps a value that will be available in the future.

This is fine, but in my case what I get from the web service is a JSON string. I have to parse it and the parsing might fail. So I have to wrap whatever I get into an `Option`. The result is that many of my methods are returning `Promise[Option[Whatever]]`. That is, a value of type `Whatever` that will be, maybe, available later.

Now whenever I have to operate over such a value I need to `map` it twice. I was thinking of handling this in the following way:

*   creating a new type, say `Hope[A]`, that wraps a `Promise[Option[A]]`
*   defining the relevant methods like `map` (or maybe I should use `foreach` and inherit from some collection trait?) and `flatten`
*   provide an implicit converter between `Promise[Option[A]]` and `Hope[A]`.

It is easy to define `map` - the composition of two functors is again a functor - and `flatten` can be done explicitly in this case, or whenever composing a monad with `Option`.

**But** it is my limited understanding that I do not need to reinvent this stuff: monad transformer exist for exactly this case. Or, well, so I think - I have never used a monad tranformer - and this is the point of the question:

> Can monad tranformers be used in this situation? How would I go about actually using them?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-03T13:13:39.943

使用 Scalaz 库的`OptionT`转换器，您应该能够将 type`Promise[Option[A]]`的值转换为 type 的值`OptionT[Promise, A]`。

使用 Scalaz 7：

```
import scalaz.OptionT._
val x: OptionT[Promise, Int] = optionT(Promise.pure(Some(123))) 
```

要使用此值，例如调用`map`或对其进行调用，您需要为( for , for )`flatMap`提供适当的类型类。`Promise``Functor``map``Monad``flatMap`

由于`Promise`是一元的，因此应该可以提供`Monad[Promise]`. （您将免费获得`Functor`和`Applicative`，因为类型类形成了继承层次结构。）例如（注意：我没有测试过这个！）：

```
implicit val promiseMonad = new Monad[Promise] {
  def point[A](a: => A): Promise[A] = Promise.pure(a)
  def bind[A, B](fa: Promise[A])(f: A => Promise[B]): Promise[B] = fa flatMap f
} 
```

举个简单的例子，你现在可以`map`在`OptionT[Promise, A]`, 上使用一个类型的函数`A => B`到里面的值：

```
def foo[A, B](x: OptionT[Promise, A], f: A => B): OptionT[Promise, B] = x map f 
```

要从 检索基础`Promise[Option[A]]`值`OptionT[Promise, A]`，请调用该`run`方法。

```
def bar[A, B](x: Promise[Option[A]], f: A => B): Promise[Option[B]] =
  optionT(x).map(f).run 
```

`OptionT[Promise, _]`当您可以组合多个兼容类型的操作、保留操作之间的类型并在最后检索基础值时，您将从使用 monad 转换器中获得更多好处。

要在理解中组合操作，您将需要 type 的函数`A => OptionT[Promise, B]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:23:00.807

-- 删除 --

编辑：

好的，您可以简单地使用`scalaz.OptionT`这里：

```
val x = optionT(Promise { /* api call */ some("""{ "foo": "bar" }""") })
val mapped = x.map(Json.parse).run // run return the resulting Promise[Option[T]] 
```

# php - Problems updating manytomany reference in Symfony with Sonata and MongoDB

> ID：12245994
> 
> 赞同：2
> 
> 时间：2012-09-03T10:22:50.843
> 
> 标签：php, mongodb, symfony, sonata-admin

I'm having some problems updating a reference from one collection to another in Symfony2 with mongoDB using Sonata Admin Bundle.

I have created this reference between the users and the communities they can admin.

This one is in the Community class

```
class Community
{
    /**
     * @MongoDB\ReferenceMany(
     *      targetDocument="User",
     *      inversedBy="communitiesAdmin",
     *  )
     */
    protected $usersAdministrator; 
```

And this one in the User

```
class User extends BaseUser
{
    /**
     * @MongoDB\ReferenceMany(
     *      targetDocument="Community",
     *      mappedBy="usersAdministrator",
     * )
     */
    protected $communitiesAdmin; 
```

and this is the way I show the field in Sonata

```
 $formMapper
        ->with('Community Administrators')
            ->add('usersAdministrator', 'sonata_type_model', array('expanded' => true))
        ->end() 
```

When i track the collection in MongoHub the reference is being created but I cannot update it because the data previously inserted is not being shown when I edit the community.

Any idea?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-26T07:02:36.657

修复它：

```
public function addVideo($video)
{
    $this->videos[] = $video;
    $video->addArtist($this); << This makes doctrine handle the bi direction
} 
```

在管理员中：

```
 ->add('videos', 'sonata_type_model', array(
            'required' => false,
            'multiple' => true,
            'by_reference' => false
        )) 
```

by_reference = FALSE 真的很重要！

# sql - 选择多个 id 之前的行

> ID：12245997
> 
> 赞同：1
> 
> 时间：2012-09-03T10:22:57.963
> 
> 标签：sql, database, sqlite, union

我想在具有指定值的行之前获得 2 个行 ID。

所以我在表中有 ID 和值

```
ID   value
1,   x
3,   x 
7,   x
8,   error
9,   x
10\.  x
11,  x
12   error 
```

我想要错误之前的两行。

我可以使用硬编码的错误行 ID 来做到这一点

```
SELECT id FROM thetable WHERE id < 8 ORDER BY ID DESC LIMIT 2  
UNION ALL
SELECT id FROM thetable WHERE id < 12 ORDER BY ID DESC LIMIT 2 
```

Howewer 我不能硬编码错误 ID，我怎么能做到这一点，例如结合它`SELECT id FROM thetable WHERE value = 'error'`或任何其他方式？

我使用 sqlite 3，但我对一切都感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:08:36.877

我是 SQLite 的新手，所以我不知道它的语法和所有内容。但是如果它对你有用，请尝试下面的代码

```
select id,value
from (select *,rowid rid from tbl
order by id)
where rid in
(
  select rowid-1 from tbl
  where value = 'error'
  order by id
)or rid in
(
  select rowid-2 from tbl
  where value = 'error'
  order by id
) 
```

**[演示](http://www.sqlfiddle.com/#!7/37435/1)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T10:55:57.113

[SQL 小提琴演示](http://www.sqlfiddle.com/#!5/8836b/5)

* * *

我不知道 sqllite 是否具有排名功能，这会使解决方案变得更容易，但以下语句应该适用于任何符合 ANSI-92 的 DBMS。

解决方案的要点是

*   Step1：获取所有`error`ID
*   Step2：通过使用 GROUP BY 子句获取所有 ID < 根 ID，并加入相同的查询以检索原始错误 ID
*   Step3：与第二步类似，但下降一个层次。

**SQL 语句**

```
SELECT  ID
FROM    (
              -- Select the ROOT value
              SELECT  ID, 0 AS GroupID
              FROM    thetable
              WHERE   value = 'error'
              UNION ALL

              -- Selects the ROOT value - 1 
              SELECT  MAX(t.ID) AS ID, te.ID AS GroupID
              FROM    thetable AS t
                      INNER JOIN (
                        SELECT  ID
                        FROM    thetable
                        WHERE   value = 'error'
                      ) AS te ON te.ID > t.ID 
              GROUP BY
                      te.ID

              UNION ALL        

              -- Selects the ROOT value - 1 - 1 
              SELECT  MAX(t.ID), te.ID
              FROM    thetable AS t
                      INNER JOIN (        
                        SELECT  MAX(t.ID) AS ID, te.ID AS GroupID
                        FROM    thetable AS t
                                INNER JOIN (
                                  SELECT  ID
                                  FROM    thetable
                                  WHERE   value = 'error'
                                ) AS te ON te.ID > t.ID 
                        GROUP BY
                                te.ID
                      ) AS te ON te.ID > t.ID
              GROUP BY
                      te.ID
            ) AS t                  

ORDER BY
        ID 
```

**编辑**

FWIW：如果 SQLite 允许排名函数和 cte 的，下面的语句返回相同的结果，但更简洁。

```
;WITH q AS (
  SELECT  ROW_NUMBER() OVER (ORDER BY ID) rn
          , ID
          , value
  FROM    thetable 
)
SELECT  q2.ID
FROM    q q1
        INNER JOIN q q2 ON q2.rn BETWEEN q1.rn - 2 AND q1.rn
WHERE   q1.value = 'error' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T10:28:35.447

```
select id, value 
from test where id in (select id-1 from test where value = 'error') 
```

如果您总是在错误后面寻找第一个 id，这将起作用。如果您可能会跳过一个 id，您可以使用 MIN 函数来获取最接近的现有 id。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T10:28:46.173

试试这个：

```
SELECT id 
FROM thetable 
ORDER BY 
   CASE WHEN value = 'error' THEN value ELSE ID END
 DESC 
```

# python - django-celery in multiple server production environment

> ID：12245999
> 
> 赞同：5
> 
> 时间：2012-09-03T10:23:03.900
> 
> 标签：python, django, rabbitmq, celery, django-celery

I trying to deploy a django project using django, but I have these questions unsolved:

*   Should I run one celeryd for each web server?
*   Should I run just one RabbitMQ server, on another machine (not) running celeryd there, accesible to all my web servers? or RabbitMQ must be run also on each of the web servers?
*   How can I use periodic tasks if the code is the same in all web servers?

Thank for your answers.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T10:40:43.510

这真的取决于项目的大小，理想情况下你有 RabbitMq、celery workers 和 web workers 运行在不同的机器上。

您只需要一个 RabbitMQ 并最终需要多个队列工作人员（当然，更大的队列需要更多工作人员）。

您不需要每个网络工作者 1 个 celery 工作者，网络工作者将向代理发布任务，然后工作者将从那里获取它们，事实上，网络工作者并不关心连接到代理的工作者数量，因为它只与经纪人。

当然，如果您正在开始一个项目，那么将所有内容都保留在相同的硬件上并保持低预算并等待流量和资金流动是有意义的 :)

您希望在应用程序的每个运行实例上都有相同的代码，无论它们是芹菜工人/网络服务器还是其他任何东西。