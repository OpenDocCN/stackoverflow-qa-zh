# StackOverflow 问答 12374000-12374999

# java - AVD 模拟器未在 Eclipse 中启动

> ID：12374002
> 
> 赞同：0
> 
> 时间：2012-09-11T16:20:07.090
> 
> 标签：java, android, eclipse, avd

我正在尝试在 Eclipse 中启动 AVD 模拟器，但没有任何反应。控制台显示：

```
[2012-09-11 17:06:02 - SecondAPP] Android Launch!
[2012-09-11 17:06:02 - SecondAPP] adb is running normally.
[2012-09-11 17:06:02 - SecondAPP] Performing ie.mf.secondapp.MainActivity activity launch
[2012-09-11 17:06:02 - SecondAPP] Automatic Target Mode: launching new emulator with compatible AVD 'MyAVD'
[2012-09-11 17:06:02 - SecondAPP] Launching a new emulator with Virtual Device 'MyAVD' 
```

一切似乎都正常运行，然后它就停止在这一点上。

我不知道问题是什么，我已经尝试完全卸载所有内容并重新安装所有内容，但没有任何变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:54:47.860

我有同样的问题，在我的情况下，模拟器不会启动，因为 opengles 失败，所以我添加（`-gpu on`模拟器[- 加速图形](http://developer.android.com/tools/devices/emulator.html#accel-graphics)），然后模拟器正常工作。`Additional Emulator Command Line Options`

# sql - Rails activerecord 按两个表排序

> ID：12374005
> 
> 赞同：0
> 
> 时间：2012-09-11T16:20:11.593
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3.2

我只是想知道是否可以加入一个表，然后在两者上按列排序。

例如，如果我有两张桌子，一张称为棒棒糖，另一张称为特色棒棒糖：

棒棒糖可以属于特色棒棒糖

两个表都有一个名为“sweetness”的列

是否可以进行如下查询：

```
Lollipop.joins(:featured_lollipops).order("sweetness ASC") 
```

返回的结果是所有棒棒糖的 ActiveRecord 哈希，即使甜度来自连接表，也按甜度排序？

提前致谢。

编辑：

我需要能够按组合的甜度排序，而不是每列的甜度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:25:20.777

在该`order`方法中，您可以使用`lollipops.sweetness`and`featured_lollipops.sweetness`来区分这两个表。
这是一个例子：

```
.order("lollipops.sweetness ASC, featured_lollipops.sweetness DESC") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:52:48.343

这行得通吗？

```
a = Lollipop.joins(:featured_lollipop) + FeaturedLollipop.all
a.sort_by {|f| f.sweetness} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-12T01:55:37.480

是的，我相信你可以做到这一点。

```
Lollipop.joins(:featured_lollipop).
  select(
    "(lollipop.sweetness + featured_lollipop.sweetness) AS sorting_sweetness, lollipop.*"
  ).order("sorting_sweetness DESC") 
```

# android - 理想的标记尺寸

> ID：12374006
> 
> 赞同：2
> 
> 时间：2012-09-11T16:20:13.377
> 
> 标签：android, osmdroid

我目前正在重写一个使用 OSMDroid（新设计、新功能等）的应用程序，我需要知道哪些是自定义标记的理想尺寸。

我需要 xhdpi、hdpi、mdpi、ldpi。我问是因为应用程序的早期版本我使用了一些随机尺寸，并且在某些设备上看起来很糟糕。

希望你们能给我一些想法，因为我的扩展搜索不足以找到我的问题的答案。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:05:02.123

我不知道什么尺寸适合你，但与普通 Android 图形相比，它的棘手之处在于地图数据的显示没有缩放，所以你得到多少取决于设备，没有密度的概念就地图数据而言，是独立的像素。如果您只有一个用于标记的图形并在没有缩放的情况下显示它，那么它至少总是与地图数据的相对大小相同。如果您提供不同的密度标记，那么与地图数据相比的相对大小将会改变。

# delphi - LVM_GETITEMPOSITION

> ID：12374011
> 
> 赞同：1
> 
> 时间：2012-09-11T16:20:41.030
> 
> 标签：delphi, dll, icons, desktop, inject

我正在尝试使用 LVM_GETITEMPOSITION 设置/获取桌面图标位置。设置位置按预期工作，但获得它们不是。

当我发送消息时（DeskHandle，LVM_GETITEMPOSITION，1，ppt）；资源管理器崩溃，这显然是因为 ppt 只是我进程中的有效地址，所以我需要将一个 dll 注入资源管理器的内存地址空间..这就是我再次被卡住的地方

问题是返回位置始终为 0,0

dll：

```
library Project2_dll;

uses
  SysUtils,Classes,windows,messages,dialogs,commctrl;

{$R *.res}

procedure hookit; stdcall;
var ppt:tpoint;
    Desktop,DeskHandle : hwnd;
    DeskThread : cardinal;
begin
  Desktop := FindWindow('ProgMan', nil);
  Desktop := FindWindowEx(Desktop, 0, 'SHELLDLL_DefView', nil);
  DeskThread := GetWindowThreadProcessID(Desktop, nil);
  DeskHandle := FindWindowEx(Desktop, 0, 'SysListView32', nil);

  sendmessage(DeskHandle, LVM_GETITEMPOSITION, 1, Longint(@ppt) );
  showmessage(inttostr(ppt.X)+'  '+inttostr(ppt.Y));
end;

exports hookit;

begin

end. 
```

可执行程序 ：

```
var
  lib : hwnd;
  prc: procedure; stdcall;

procedure TForm2.Button1Click(Sender: TObject);
var hListView : HWND;
    DeskThread : cardinal;
begin
  hListView := FindWindow('ProgMan', nil);
  hListView := FindWindowEx(hListView, 0, 'SHELLDLL_DefView', nil);
  DeskThread := GetWindowThreadProcessID(hListView, nil);

  lib:= LoadLibrary('Project2_dll.dll');
  prc := GetProcAddress(lib, 'hookit');

  HH := SetWindowsHookEx(WH_MOUSE,GetProcAddress(lib, 'getit'),lib,DeskThread);

  prc;
end; 
```

我已经在这里看到了一些类似的问题，没有任何帮助。

ps：在 Delphi XE、windows 7 x64 中运行它，并假设 SysListView32 始终是 progman 的孩子（不是 WorkerW）

任何帮助表示赞赏^_^

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T16:32:42.507

您不能将 32 位 DLL 注入 64 位进程。为了将 DLL 注入 64 位资源管理器，您需要获取 XE2 或 XE3 并构建 64 位 DLL。如果您无法访问 64 位 Delphi，或者使用 C++ 编写这部分代码。

碰巧的是，您的代码无论如何都不会注入。它只是从您的流程中调用 SendMessage。注入通常涉及对 CreateRemoteThread 的调用。

事实上，你不需要注入。您可以使用`VirtualAllocEx`在资源管理器进程中分配内存。然后，您可以将该地址传递到您的`SendMessage`. 由于该内存位于另一个进程中，因此您必须使用`ReadProcessMemory`并`WriteProcessMemory`访问它。不过，您仍然需要从 64 位进程执行此操作。

我原以为 shell 为您提供了在不破坏资源管理器进程内存的情况下获取这些信息的工具。

# beagleboard - BeagleBoard：设置 ALSA 主音量

> ID：12374018
> 
> 赞同：0
> 
> 时间：2012-09-11T16:21:01.653
> 
> 标签：beagleboard, alsa

我正在尝试在 BeagleBoard（安装了 Ubuntu）上使用 alsa 设置主卷，但是当执行以下代码时，结果始终是：“未找到混合器简单元素”

```
elem = snd_mixer_find_selem(handle_mix, sid);
if(elem==NULL)
{
printf("Mixer simple element not found\n");
} 
```

我在计算机（三星 NC10）上运行了相同的代码，结果是正确的，我可以设置主音量。你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:38:04.427

混合器元素依赖于硬件，即使在相同的硬件上，混合器元素 ID 也可能在不同的驱动程序版本中发生变化。

运行`amixer scontrols`以查看实际可用的混音器控件。

# python - findall 中的正则表达式匹配无法始终如一地工作

> ID：12374019
> 
> 赞同：1
> 
> 时间：2012-09-11T16:21:11.410
> 
> 标签：python, regex

谁能告诉我为什么 Python 中的正则表达式模式大部分时间都有效，但对以下文本有困难。

图案：

```
patternd = re.compile(r"""\(VFSCAN\)[^=]*=\s*    # first line of a section: (VFSCAN) AT TIME =  1.1800 UP    TO  100 BUSES WITH LOW VOLTAGE DEVIATION BELOW -0.200 
(\d*(?:\.\d+)?)                 # group 1 - first number of first line: 1.1800
\D+ 
\d+                             # second number of first line: 100 
\s+BUSES\s+WITH\s+LOW\s+VOLTAGE\s+(DEVIATION)\s+BELOW.*? 
\D+                             # skip second line 
(?:                             # a data line: 18436 [LENZIE 618.0] -0.245 18433 [LENZIE 318.0] -0.245
(?:\d+\s+\[(.+?)\]\s+\S+\s*)+   # Component of data line
(?=[\r\n\s]+|$) 
)+                              # This search ends with an empty line
""", re.VERBOSE) 
```

我遇到问题的文字是：

```
test3 = r'''(VFSCAN) AT TIME =  1.1800 UP TO  100 BUSES WITH LOW VOLTAGE DEVIATION BELOW -0.200:

X ----- BUS ------ X    VDEV       X ----- BUS ------ X    VDEV
18436 [LENZIE 618.0]   -0.245      18433 [LENZIE 318.0]   -0.245     
18431 [LENZIE 118.0]   -0.214      18435 [LENZIE 518.0]   -0.214     
18434 [LENZIE 418.0]   -0.214      18432 [LENZIE 218.0]   -0.214     

(VFSCAN) AT TIME =  1.5167 UP TO  100 BUSES WITH LOW VOLTAGE DEVIATION BELOW -0.200:

X ----- BUS ------ X    VDEV       X ----- BUS ------ X    VDEV
69036 [DNLP2G21.575]   -0.414      69038 [DNLP2G22.575]   -0.414     
69040 [DNLP2G23.575]   -0.414      69032 [DNLP1_G1.575]   -0.402     
65460 [DIFICULT 230]   -0.384      69027 [7MIHL G1.575]   -0.355     
69076 [HORIZ_G .575]   -0.303      67237 [MEDBOWCO 115]   -0.301     
67940 [STNDPSVC 230]   -0.300      65976 [MINERS  34.5]   -0.294     
65585 [FT CRK1 34.5]   -0.261      65584 [FT CRK2 34.5]   -0.261     
69073 [HIPLN_G .575]   -0.214     

(VFSCAN) AT TIME =  1.1800 UP TO  100 BUSES WITH LOW VOLTAGE DEVIATION BELOW -0.200:

X ----- BUS ------ X    VDEV       X ----- BUS ------ X    VDEV
65191 [BONANZA 24.0]   -0.572      65192 [BONANZA  138]   -0.434     
65194 [CHAPITA  138]   -0.433      66278 [RANGELY  138]   -0.320     
65371 [COVE TP  138]   -0.302      79265 [CALAMRDG 138]   -0.286     
79400 [DES.MINE 138]   -0.285      65086 [ASHLEY  69.0]   -0.284     
79067 [VERNAL   138]   -0.277      67257 [MOONLAK269.0]   -0.268     
67256 [MOONLAK169.0]   -0.266      79264 [W.RV.CTY 138]   -0.206     

''' 
```

我正在使用“findall”使用上面的模式匹配文本，并期望提取一个元组列表。当我运行它时，我得到：

```
[('1.1800', 'DEVIATION', 'LENZIE 218.0'), ('1.5167', 'DEVIATION', 'HIPLN_G .575'),     ('1.1800', 'DEVIATION', 'W.RV.CTY 138')] 
```

但我应该在我的列表中获得更多匹配的元组。我真的只对提取每场比赛第一行的时间以及方括号“[]”中的所有项目感兴趣。我应该在列表中得到 6+13+12 = 31 个元组。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:31:01.767

您必须逐行解析此格式，一旦找到匹配项，正则表达式将不会返回到文本中。您希望正则表达式找到重叠部分（第 0 行 + 第 2 行，然后是第 0 行 + 第 3 行等），但引擎已经在第 0 - 2 行匹配了一些内容，因此*下一个*匹配`findall`将搜索行之后的开始2.

按行拆分输入，检测标题行和数据行，并相应地解析每个。然后使用最近解析的标题对数据行进行分组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:33:23.793

你想要的不能使用正则表达式来完成。（至少，不在单个正则表达式中）。组或匹配中的子组数不能是可变的。比较这个简化版本的正则表达式。

```
p = re.compile('(a(b)+)')
test3 = 'ababbabbbabbbb'
print p.findall(test3) 
```

您希望它返回如下内容：

```
[('ab', 'b'), ('abb', 'b', 'b'), ('abbb', 'b', 'b', 'b'), ('abbbb', 'b')] 
```

相反，它返回：

```
[('ab', 'b'), ('abb', 'b'), ('abbb', 'b'), ('abbbb', 'b')] 
```

根据示例数据，您可以使用两遍算法。您可以首先使用原始正则表达式（没有使其失败的分组）来提取大块文本。然后，使用第二个正则表达式，您可以从第一遍中找到的块中提取子模式。

# ruby-on-rails - 在数据库中存储日期和费率

> ID：12374023
> 
> 赞同：0
> 
> 时间：2012-09-11T16:21:32.887
> 
> 标签：ruby-on-rails, forms, database-design

这种情况的最佳做法是什么？

我正在构建一个预订系统，并且正在寻找从用户那里获取和存储信息的最佳方式。每个资源在一天内可用，并且最多可以占用任意数量的用户。例如，假设这是一个最多可容纳 5 人的热气球。我希望我的表格看起来像这样：

```
[Buttons to select # of guests]  // So if a user wants the same price for 1-3 people he only has to enter it once.

From [START DATE] to [END DATE]: [RATE]  // Where the []'s are input fields for the user 
```

我计划将每个价格存储在数据库中：

```
Date, # of guests, rate 
```

所以每个日期一行。

所以我需要将“转换`[START DATE]`为`[END DATE]`”来存储每个日期的值。我应该在 Javascript 中还是在我的控制器中在 Rails 中执行该客户端？如果一组客人的价格相同，即 1-3 位客人，有没有办法可以将其存储在数据库中以便更好地查询？或者我不应该打扰，因为如果明天用户想要更改 2 位客人的价格，它可能会搞砸我的数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:29:28.293

`Start date`和`End date`vs. `Each date`- 几个条件：

1.  如果用户要预订3天的热气球，是每天同一个热气球还是可以换？如果可以不同，请将一个`resources.type`字段映射到多个`booked_resources.id`.

2.  如果您使用单独的`start`和`end`日期，则需要检查资源使用的重叠。使用 存储重复记录一个日期`booked_resource.id`将消除重叠检查的需要。有关相关问题，请参阅此线程：[在 MySQL 中存储日历数据](https://stackoverflow.com/questions/12368030/storing-calendar-data-in-mysql)

3.  向客户端 JS 发送每天的日期数组可能比提取`for each day between start date and end date`. 选择最符合您当前代码的那个。请记住，无论哪种方式，都必须修改 SQL/日期检查以发现不可用。

4.  如果用户可以更改客人的数量并影响成本，那么**存储每个单独的日期对于此类数据库更新更方便**（如酒店的逐项计费）。否则，您将需要“拆分”具有不同客人数量的日期的记录。

# .net - WPF->Web 的异步双向客户端/服务器模型

> ID：12374027
> 
> 赞同：1
> 
> 时间：2012-09-11T16:21:56.387
> 
> 标签：.net, wpf, asynchronous, websocket, signalr

好的，我知道这可能看起来像一个奇怪的用例，但是这里......

我们有一个确保连接的 LAN，其中部署了大量（平均 30-50 个）相同的胖客户端应用程序（WPF 或可能的 Windows 8 应用程序，我们还不确定我们的客户需要哪两个） . 将有一个中央服务器监控这些客户端的各种状态更新，有些像“你连接到网络了吗？”这样简单。还有一些涉及更复杂的业务规则。

异步性（异步？）是必须的，因为我们需要尽快知道任何错误或状态更新。出于显而易见的原因，我们还需要双向连接。

我不是专门来讨论架构的，因为我们仍在讨论这个问题。但我想知道你是否是某种允许我们需要的连接的.NET 框架。

我看过[SignalR](http://signalr.net/)和[WebSockets](http://msdn.microsoft.com/en-us/library/system.net.websockets.websocket.aspx)，但它们似乎都更适合具有厚客户端后端的 Web 客户端，而我们需要相反。

我知道这仍然有点模糊，这主要是因为我们仍处于设计阶段。但是，如果有人对框架有任何提示可以查看，那将是最有帮助的！

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-08T10:10:28.517

您可能想查看 SignalR 中的自托管选项。
SignalR 不在乎它的托管位置。

取自 SignalR 网站：

> SignalR 服务器通常托管在 IIS 的 ASP.NET 应用程序中，但也可以使用自托管库进行自托管（例如在控制台应用程序或 Windows 服务中）。

**教程：SignalR 自托管**
[http://www.asp.net/signalr/overview/getting-started/tutorial-signalr-self-host](http://www.asp.net/signalr/overview/getting-started/tutorial-signalr-self-host)

# mysql - 实时数据库视图

> ID：12374028
> 
> 赞同：0
> 
> 时间：2012-09-11T16:21:59.793
> 
> 标签：mysql, ajax, node.js, socket.io

我已经使用 mysql 节点模块为自己设置了一个 NodeJS 和 socket.io 服务器，并且一切正常。

这是我的脚本：

```
// create an http server listening on port 8100
var io = require('socket.io').listen(8100);
var mysql = require('mysql');

var connection = mysql.createConnection({
host     : '127.0.0.1',
user     : 'user',
password : 'password',
database : 'mybase'
});

connection.connect(function(e){
if(e)
{
    console.log('Database connection failed. ('+e+')') ;
}
else
{
    console.log('Database connection successful!') ;
}
})

connection.query('SELECT id, name FROM entity_details WHERE id = 4626', function(e, rows) {
if(e)
{

}
else
{
    console.log(decodeURIComponent(rows[0]['name'])) ;
}
 });

// listen on new connections
io.sockets.on('connection', function (socket) {

// listen on an event called "eventA"
socket.on('eventA', function(data) {
    // send "eventA" to all clients, except the sender
    io.sockets.emit('eventA', data);

});

}); 
```

我的问题是如何让 MySQL “告诉” nodeJS/Socket.io 列中的值已更改或新行已更新？所以实际上我可以实时查看数据库中我想要的任何表、列等？

我想我不想每秒都轮询数据库，因为这违背了 socket.io 的整个想法，我不妨将 setTimeout 与 ajax 调用一起使用。

* * *

经过一番思考，我想出了这个我认为对于实时视图最有效的过程，请参阅附件。请让我知道你在想什么！![在此处输入图像描述](../Images/486f9dc616958f3839a13af3b744ee2f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:51:01.160

我正在使用 postgresql，但由于 mysql 支持触发器，它应该工作相同。

在更新的每个表中放置一个触发器订阅数据库模块上每个触发器的事件

`for (notification in notifications) { var n =notifications[notification]; pgclient.on('updated', n.handler); pgclient.query("LISTEN "+n.channel); }` 发回消息

`socket.emit('eventA',dbMsg.payload);`

这样你就不需要轮询了。

# java - 清除后 Eclipse 未释放控制台（日志）内存

> ID：12374030
> 
> 赞同：7
> 
> 时间：2012-09-11T16:22:07.650
> 
> 标签：java, eclipse

我的 Eclipse 占用空间从 500MB 稳步增加到 >1GB，而我没有做任何特别的事情 - 只是运行一些日志繁重的程序。进行手动 GC，关闭和重新打开项目根本没有帮助，一旦超过 1GB，它就会停留在那里。

我运行了 jvisualvm 并从 heapdump 中发现**数百兆字节是 char[] 代表日志输出**。

我养成了关闭所有停止进程的控制台的习惯，所以不是那样的。控制台缓冲区设置为 1MB（字符）。我已关闭控制台视图并再次重新打开它。

我可以粘贴我的特定 eclipse.ini，但我尝试了不同的 GC 和内存设置、不同的 JVM、不同的 Eclipse 版本——行为仍然相同。

在我看来，日志似乎被某个地方的引用卡住了，并且永远不会被释放。还有其他人有这个问题吗？**是否有从旧控制台视图释放内存的设置？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:11:27.240

当我想在这里写一些聪明的东西时，我发现了这个：[如何减少 Eclipse 的内存使用？](https://stackoverflow.com/questions/1490803/how-to-reduce-eclipses-memory-usage)禁用拼写检查的建议实际上**产生了很大的不同**。

所以.. 这是我自己的贡献：这听起来可能很奇怪，但我也注意到自己有很多未使用的断点使 Eclipse 变得迟缓。定期清除所有断点是一个良好的习惯。

这只是与此相关的提示，有一个选项可以显示内存并从 Eclipse 中强制执行 GC。在下面

*首选项>常规>显示堆状态*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:03:52.107

简短的回答：堆大小不会缩小，只会增长。

长答案：最终，这似乎是多种因素的结合。我不完全确定 JVM 默认选项应该是什么，但我的 XP 机器将 Windows 性能优化设置为“服务器”/“后台应用程序”。我相信这也会导致 JVM 默认使用“-server”选项而不是“-client”。-server 选项不允许堆收缩。

据我所知，parallelGC 不允许堆缩小。

XX:MaxHeapFreeRatio (70) 和 XX:MinHeapFreeRatio (30) 的默认值非常懒惰地放弃空闲内存。将它们设置为 20/10 将导致堆大小更接近实际使用情况。

为什么这一切都很重要？好吧，如果您正在用 Java 开发桌面应用程序，您的客户端可能会对不断增加的内存使用量感到不安，并责怪您糟糕的编程。有点像 Firefox 发生的事情。

# javascript - 如何修复非持久性 Javascript 函数

> ID：12374036
> 
> 赞同：1
> 
> 时间：2012-09-11T16:22:23.767
> 
> 标签：javascript, asp.net, dom-events, ajaxcontroltoolkit

我使用 AJAX 控件工具包在 ASP.NET 页面中创建了一个滑块。为了增加和减少滑块的值，我还放置了一个“加号”和一个“减号”按钮。在每个按钮的客户端单击事件中，我使用了一个 Javascript 函数，该函数将进行一些计算并将其显示为`asp:label`滑块下方。现在的问题是，如果我通过拖动来更改滑块的值，则调用该函数并将计算显示为标签，但是，如果我通过按钮（“加号”或“减号”按钮）更改滑块的值，该函数被调用，但计算仅显示几秒钟作为标签。1 2 秒后标签消失，什么也没有显示。

有人对我的问题有任何想法吗？

这是代码：

1.  “加号”按钮：

    ```
    <asp:ImageButton ID="ImageButton1" runat="server" ImageUrl="~/icon_plus1.jpg" 
    ```

    style="z-index: 1; left: 830px; top: 130px; position: absolute" onclientclick="change1();"/>

2.  这是我正在调用的函数：

    ```
    function change1() {
       var object = document.getElementById("TextBox");
       var val = object.value;
       object.value = parseInt(val) + 5;
       updatesum();
     } 
    ```

3.  主要计算在`updatesum()`函数中：

    ```
    function updatesum() {
    var principal = slider1Value;
    var daily_interest_rate = eval((360 / 100) / 365);
    var transaction_fee = eval(5.50);

    var number_of_days = slider2Value;
    var due_date = addDays(eval(number_of_days)).toDateString();

    var interest_amount = (eval(daily_interest_rate) * eval(number_of_days) *
    eval(eval(principal) + eval(transaction_fee))) + eval(transaction_fee);
    var total_amount = interest_amount + eval(principal);

    lblDate.innerHTML = due_date;
    lblBorrow.innerHTML = "&pound " + slider1Value;
    lblInter.innerHTML = "&pound " + interest_amount.toFixed(2);
    lblRepay.innerHTML = "&pound " + total_amount.toFixed(2);

    } 
    ```

4.  滑块及其目标控件 ID 文本框：

    ```
    <ajaxToolkit:SliderExtender ID="SliderExtender2" runat="server" length="400"
    Enabled="True" Maximum="400" Minimum="0" Steps="80" TargetControlID="TextBox"
    BoundControlID="TextBox1" RailCssClass="SliderRail">
    </ajaxToolkit:SliderExtender>
    <asp:TextBox ID="TextBox" runat="server" 
    OnChange ="javascript:updatesum(this);"   
    style="z-index: 1; top: 130px; position: absolute; left: 430px; bottom: 130px"
    </asp:TextBox> 
    ```

# vba - 在使用与上一行的 %difference 时，需要帮助使用 vba 填写 excel 数据透视表留下的空白

> ID：12374038
> 
> 赞同：2
> 
> 时间：2012-09-11T16:22:55.330
> 
> 标签：vba, excel, excel-2010, pivot-table

所以，说到VBA，我还不是很了解。我有使用 Java 的经验，因此我了解编码背后的结构概念，并且可以阅读/理解基本中级代码。但是当谈到自己编写它时，就自己编写 VBA 而言，我绝对仍然是 1.5 分（满分 10 分）。因此，任何帮助将不胜感激。

所以我有以下示例数据透视表（我的实际数据是大约 10 年的数据，还有几列）： ![在此处输入图像描述](../Images/e46e1a387cd3483515e07621b34986ef.png)

红点和黄点是我的问题区域。带有空白标题的列与前一行只是 % 的差异。但是，如您所见，使用它会在每年的第一个月留下空白（那些是黄点）。此外，对于年份线，它不计算与上一年的百分比差异（红点）。

所以，我需要的是（很可能）一个 PivotTableUpdate 或 PivotTableChangeSync（顺便说一句，我仍然不明白它们的区别）来用红点和黄点填充这些单元格中的数据。有什么想法吗？

编辑：根据要求，这是为数据透视表提供动力的数据：

![在此处输入图像描述](../Images/6f393b4d8117d312aad0bf6ed24ea3db.png)

出于格式化目的，我将设置的下半部分向右移动以将其全部放入一张图片中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:53:47.413

如果没有 VBA，你可以尝试这个尝试，我可能会扩展它，但不是今天 - 这可能是一种在没有 VBA 的情况下解决这个问题的方法，但我错过了一些东西。

![在此处输入图像描述](../Images/4afa04719e0a0b5f6012db3f1b51a521.png)

```
E2=SUMIFS(D:D,C:C,C2)

F2=IFERROR(E2/E1;1)-1 
```

在数据透视表上，将 NP 和 Test2 添加到值部分，然后可以对 Test2 使用 Max 或 Sum，它将如下所示：

![在此处输入图像描述](../Images/d88a3454ced1d6e7713e90e8fd9c8ad7.png)

**注意**这里是一个错误，因为在查看年份时，将差异相加不会相加！但是，您可以使用给定的公式来计算年份之间的总和和差异；）

# telerik-grid - 根据条件禁用自定义工具栏按钮

> ID：12374043
> 
> 赞同：2
> 
> 时间：2012-09-11T16:23:11.307
> 
> 标签：telerik-grid, telerik-mvc

我在 Telerik mvc 网格上使用自定义工具栏按钮。

例如：

```
.ToolBar(toolBar =>
          {
toolBar.Custom().Url("#").ButtonType(GridButtonType.Text).Text("send to web service").HtmlAttributes(new {@onclick = "SendReportConfirmationDialog()"});

}) 
```

但是这个控件没有 .hidden(true) 或 .enabled(false) 属性，所以我试图根据某些布尔值用 true 或 false 禁用这个按钮。

你知道这是否可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T21:06:51.853

没有这样的配置。您可以尝试在加载 Grid 时使用 JavaScript 禁用它（OnLoad 事件）

```
$('.t-toolbar .t-button').addClass('t-state-disabled').click(function(){return false}); 
```

以上将禁用工具栏中的所有按钮 - 更具体地说，您可以通过 HtmlAttributes 方法将类分配给命令按钮，

```
tb.Custom().Text("test").HtmlAttributes(new{ @class="myTbCommand"}) 
```

并更改选择器：

```
$('.myTbCommand').addClass('t-state-disabled').click(function(){return false}); 
```

不知道这是否有帮助，但我认为没有其他办法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:47:41.657

那么解决方案很简单：

根据控制器 ViewBag 的值在方法链中使用 if 条件。这可行，并且自定义工具栏中不会出现任何按钮。

```
 .ToolBar(toolBar =>
      {
          if (ViewBag.gridEditMode != false)
          {
              toolBar.Custom().Url("#").Text("Send").HtmlAttributes(new {@onclick = "SendXSD()"});
          }
      }) 
```

# c# - 托管到 WinForm 时，Wpf 控件移动不起作用

> ID：12374045
> 
> 赞同：0
> 
> 时间：2012-09-11T16:23:25.633
> 
> 标签：c#, wpf, winforms, integration

我使用[这篇](http://www.codeproject.com/Articles/22952/WPF-Diagram-Designer-Part-1)文章创建了一些可移动的在`runtime`Porject中一切正常，但是当我托管我的. 有人知道哪里有问题吗？`control``WPF``WPF control``WinForm`

`C#`可移动部分`control`

```
using System.Windows.Controls;
using System.Windows.Controls.Primitives;

namespace EvTest.Resource
{

public class MoveThumb : Thumb
{
    public MoveThumb()
    {
        DragDelta += new DragDeltaEventHandler(this.MoveThumb_DragDelta);
    }

    private void MoveThumb_DragDelta(object sender, DragDeltaEventArgs e)
    {
        Control designerItem = this.DataContext as Control;

            double left = Canvas.GetLeft(designerItem);
            double top = Canvas.GetTop(designerItem);

            Canvas.SetLeft(designerItem, left + e.HorizontalChange);
            Canvas.SetTop(designerItem, top + e.VerticalChange);

    }
}
} 
```

`Xaml`控制部分：

```
<UserControl x:Class="EvTest.Control"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:s="clr-namespace:EvTest.Resource"
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Resources>

        <!-- MoveThumb Template -->
        <ControlTemplate x:Key="MoveThumbTemplate" TargetType="{x:Type s:MoveThumb}">
            <Rectangle Fill="Transparent"/>
        </ControlTemplate>

        <!-- ResizeDecorator Template -->

        <!-- Designer Item Template-->
        <ControlTemplate x:Key="DesignerItemTemplate" TargetType="ContentControl">
            <Grid DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}">
                <s:MoveThumb Template="{StaticResource MoveThumbTemplate}"/>
                <ContentPresenter Content="{TemplateBinding ContentControl.Content}"/>
            </Grid>
        </ControlTemplate>

    </UserControl.Resources>

    <Canvas>
        <ContentControl Width="130"
                MinWidth="50"
                Height="130"
                MinHeight="50"
                Canvas.Top="149"
                Canvas.Left="158"
                Template="{StaticResource DesignerItemTemplate}">
            <Ellipse Fill="Red"
           IsHitTestVisible="False"/>
        </ContentControl>
        <ContentControl Width="130"
                MinWidth="50"
                Height="130"
                MinHeight="50"
                Canvas.Top="12"
                Canvas.Left="12"
                Template="{StaticResource DesignerItemTemplate}">
            <Path Fill="Blue"
        Data="M 0,5 5,0 10,5 5,10 Z"
        Stretch="Fill"
        IsHitTestVisible="False"/>
        </ContentControl>
    </Canvas>

</UserControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:27:28.127

我发现问题。它必须是这样的：

```
private void MoveThumb_DragDelta(object sender, DragDeltaEventArgs e)
{
    ContentControl designerItem = this.DataContext as ContentControl;

        double left = Canvas.GetLeft(designerItem);
        double top = Canvas.GetTop(designerItem);

        Canvas.SetLeft(designerItem, left + e.HorizontalChange);
        Canvas.SetTop(designerItem, top + e.VerticalChange);

} 
```

# design-patterns - 用于在线交互的客户端-服务器消息传递协议

> ID：12374055
> 
> 赞同：4
> 
> 时间：2012-09-11T16:24:25.933
> 
> 标签：design-patterns, web-applications, client-server, protocols

我有一个 Web 应用程序，其中许多人通过服务器发送和接收消息。这种互动会持续多个时期。

在每个时期，都有一个共同的模式：客户端向服务器发送消息并期待它的响应；一旦收到响应，客户端就会进入下一个周期。但是，服务器仅在收到来自交互中涉及的所有客户端/人员的消息时才会响应。

当某人的消息无法到达服务器时，就会出现问题，导致服务器正在等待来自该客户端/人的消息 - 并且交互只是挂起。这种可能性是真实的，因为交互发生在 Internet 上。

我知道如果问题是由客户端断电或计算机崩溃引起的，那么我无能为力。但是，如果由于传输中的流量/负载或阻止消息发送的临时客户端应用程序问题（例如浏览器冻结或操作系统停止响应几秒钟）而导致消息丢失，我想知道是否有我可以做任何事情来解决这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T18:39:44.367

这称为[可靠消息传递](http://www.soapatterns.org/reliable_messaging.php)，有多种方法，对于简单的 Web 应用程序，您可以使用两部分确认；确认收到，然后进行。

# ios - iOS：发布 NSString 对象，从 sqlite 数据库中读取数据

> ID：12374061
> 
> 赞同：0
> 
> 时间：2012-09-11T16:25:11.717
> 
> 标签：ios, database, release

我有一个从 sqlite 数据库读取的应用程序，然后在每次单击按钮后在按钮中显示内容。

```
 NSString *data;    
 query = [NSString stringWithFormat:@"SELECT * FROM %@ WHERE ID=%d",TABLENAME,tempIndex];
 sqlite3_prepare_v2(contactDB,[query UTF8String],-1,&statement,NULL);
 sqlite3_step(statement);
 data = [[NSString alloc] initWithUTF8String:(const char *)sqlite3_column_text(statement, 2)];
 sqlite3_finalize(statement);
 [myButton setTitle:data forState:UIControlStateNormal];
 [data release]; 
```

但是，数据永远不会显示在按钮中，并且出现错误提示：

```
Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: _CFXMLNodeGetInfoPtr 
```

如果我不发布数据，应用程序运行正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:17:35.187

这是非常奇怪的行为，我很想深入了解它。但是现在，自动释放您的数据字符串。

 data = [[[NSString alloc] initWithUTF8String:(const char *)sqlite3_column_text(statement, 2)] autorelease]

# php - 使用 symfony2 和资产链接到 pdf 文件

> ID：12374068
> 
> 赞同：1
> 
> 时间：2012-09-11T16:25:44.167
> 
> 标签：php, symfony, hyperlink, assetic

我使用 syomfony2 和资产。如何在我的网络文件夹中创建指向 pdf 文件的链接？

它适用于图像，但没有用于 pdf 的标签

```
{% image '@myBundle/Resources/public/pdf/dok.pdf'%}
<img src="{{ asset_url }}" alt="my image"/>
{% endimage %} 
```

我想做的是一个简单的`<a href...>Download pdf here</a>`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T16:30:31.827

`<a href="{{ asset('bundles/my/Resources/public/pdf/dok.pdf') }}">Download PDF!</a>`
您不需要为此使用资产，它在下载 PDF 的上下文中没有任何意义。

# oracle - Oracle DB 适配器和 Oracle E-Business Suite 适配器有什么区别？

> ID：12374074
> 
> 赞同：0
> 
> 时间：2012-09-11T16:26:23.613
> 
> 标签：oracle, biztalk

Oracle DB 适配器和 Oracle E-Business Suite 适配器有什么区别？

哪种情况更适合另一种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:57:50.093

Oracle DB 适配器是用于连接 Oracle 数据库的经典数据库适配器（类似于用于连接 Microsoft SQL Server 的 SQL 适配器）

而 Oracle E-Business Suite 适配器用于连接到 Oracle E-Business Suite，它是全球应用程序套件，例如：客户关系管理、订单管理、渠道收入营销等[链接](http://www.oracle.com/us/products/applications/ebusiness/overview/index.html)。它与 Microsoft Dynamics CRM Adapter 类似（不完全是）

# visual-studio - LNK2020 使用 VS2012 将托管 DLL 中的 C++ 函数与 C++ 托管控制台应用程序链接起来

> ID：12374079
> 
> 赞同：0
> 
> 时间：2012-09-11T16:27:16.863
> 
> 标签：visual-studio, dll, clr, visual-studio-2012, managed-c++

我正在将旧的 C/C++ 实用程序库转换为托管的 IJW DLL。试图了解链接错误 LNK2020。我有一个 C/C++ 静态库现在被编译为一个带有 /CLR 的 DLL 和一个带有实用程序 lib DLL 作为参考的控制台应用程序。我在 DLL 中的所有 C 函数上都得到了未解析的令牌。对于库 DLL 中的一个 ref 类，我没有收到链接错误。

```
Error   1   error LNK2020: unresolved token (0A00000B) 
"void __clrcall BwLibM::Reallocx(void * *,unsigned int,class System::String ^,unsigned int)" (
?Reallocx@BwLibM@@$$FYMXPAPAXIP$AAVString@System@@I@Z)  C:\ICL5K\ICL5K\OPENSOUR.obj ICL5K 
```

当我在实用程序 DLL 程序集上使用 dumpbin /exports 时，我没有得到任何导出的符号。

```
Microsoft (R) COFF/PE Dumper Version 11.00.50727.1
Copyright (C) Microsoft Corporation.  All rights reserved.

Dump of file bwlibm.dll
File Type: DLL
  Summary
        4000 .data
       26000 .rdata
        1000 .reloc
        3000 .rsrc
        F000 .text 
```

当我使用 dumpbin /relocations 时，我确实看到了未定义的函数，并且原型与 LNK2020 错误消息完全匹配。

```
FE5  HIGHLOW 100365E4  __mep@
?Reallocx@BwLibM@@$$FYMXPAPAXIP$AAVString@System@@I@Z ([MEP] 
 void __clrcall BwLibM::Reallocx(void * *,unsigned int,class System::String ^,unsigned int)) 
```

我应该在 dumpbin /export 输出中看到该功能吗？我尝试使用带有 __declspec(dllexport) 和 __declspec(dllimport) 的经典 DLL 导入/导出技术导出函数，但出现错误

> 错误 1 ​​错误 C3395: 'BwLibM::Reallocx' : __declspec(dllexport) 无法应用于具有 __clrcall 调用约定 C:\ICL5K\BwLibM\REALLOCX.CPP 34 1 BwLibM 的函数

其中一个实用程序函数的源代码如下所示：Reallocx.cpp

```
namespace BwLibM {
    void Reallocx(void **ptr, size_t nBytesI, System::String^ file, unsigned line)
    {
     . . .
    }
} // namespace BwLibM 
```

===BwLibM.h==

```
namespace BwLibM {
 . . .
void Reallocx(void **ptr, size_t nBytesI, System::String^ file, unsigned line);
 . . .
} 
```

几个月前我发布了一个类似的[问题，解决方案是将库和应用程序上的字符集设置为多字节。](https://stackoverflow.com/questions/11019791/lnk2028-managed-c-dll-calling-function-in-another-managed-c-dll)在这种情况下，DLL 和控制台应用程序设置为多字节字符集，并且链接器错误仍然存​​在。

# facebook - 客户有公司。Facebook 我不想登录插件代码，我可以自己登录吗？

> ID：12374081
> 
> 赞同：-2
> 
> 时间：2012-09-11T16:27:20.403
> 
> 标签：facebook, user-accounts

在获取与客户帐户相关的 Facebook 代码时，网站管理员帮助客户的经验法则是什么？

例如，我想为我的客户 Facebook 帐户获取社交插件的代码，这样我就可以将它们放在他们的网站上，这些听起来是正确的：

1.  我需要用他们的登录名登录到他们的 FB 帐户/页面吗
2.  我可以为他们的帐户获取 FB 登录信息吗
3.  我是否能够从我自己的 FB 帐户中获取通用代码并使用我的客户的 ID（等）来使 coe 为他们的帐户工作？

提前感谢您的帮助。干杯，-艾伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:38:28.673

**3号是对的。**

您真正需要的只是他们的 Facebook ID（例如，您可以在这里通过粘贴他们的个人资料网址[http://findmyfacebookid.com/](http://findmyfacebookid.com/)找到它）

例如，在设置他们的“赞按钮”时，您可以将他们的 ID 设置为管理员（只有在他们按下赞按钮后才会生效，因此没有人会在未经同意的情况下成为管理员）

当然，如果您指定了您到底想做什么，那么回答您的问题会更容易。干杯

# math - 多个四元数的“平均值”？

> ID：12374087
> 
> 赞同：60
> 
> 时间：2012-09-11T16:27:49.377
> 
> 标签：math, quaternions

我正在尝试在我的 OpenGL 程序中将骨骼动画从矩阵切换到四元数，但我遇到了一个问题：

给定许多单位四元数，我需要得到一个四元数，当它用于转换向量时，将给出一个向量，该向量是每个四元数单独转换的向量的平均值。（对于矩阵，我只需将矩阵相加并除以矩阵的数量）

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2014-12-10T21:11:26.017

与计算机图形行业的普遍看法相反，有一种直接的算法可以解决这个问题，该算法来自航空航天工业，它强大、准确且简单。它在被平均的四元数加上一个（较大的）常数因子的时间线性运行。

令*Q* = [ *a* [1] *q* [1] , *a* [2] *q* [2] , ..., *a* [*n*] *q* [*n*] ],

其中*a* [*i*]是第*i*个四元数的权重，*q* [i]是被平均的第*i*个四元数，作为列向量。 *Q*因此是一个 4× *N*矩阵。

*QQ* ^T的最大特征值对应的归一化特征向量就是加权平均。由于*QQ* ^T是自伴随的并且至少是半正定的，因此可以使用快速且稳健的方法来解决该特征问题。计算矩阵-矩阵乘积是唯一随着被平均的元素数量而增长的步骤。

[请参阅2007 年的《制导、控制和动力学杂志》中的](http://www.acsu.buffalo.edu/%7Ejohnc/ave_quat07.pdf)此技术说明，这是此方法和其他方法的摘要论文。在现代，我上面引用的方法在实现可靠性和健壮性方面做出了很好的权衡，并且已经在 1978 年的教科书中发表！

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-11-27T17:57:16.740

不幸的是，这并不是非常简单，但它是可能的。这是一份解释其背后数学原理的白皮书：http: [//ntrs.nasa.gov/archive/nasa/casi.ntrs.nasa.gov/20070017872_2007014421.pdf](http://ntrs.nasa.gov/archive/nasa/casi.ntrs.nasa.gov/20070017872_2007014421.pdf)

查看 Unity3D Wiki 页面（以下代码示例来自同一篇文章）：[http ://wiki.unity3d.com/index.php/Averaging_Quaternions_and_Vectors](http://wiki.unity3d.com/index.php/Averaging_Quaternions_and_Vectors)

```
//Get an average (mean) from more then two quaternions (with two, slerp would be used).
//Note: this only works if all the quaternions are relatively close together.
//Usage: 
//-Cumulative is an external Vector4 which holds all the added x y z and w components.
//-newRotation is the next rotation to be added to the average pool
//-firstRotation is the first quaternion of the array to be averaged
//-addAmount holds the total amount of quaternions which are currently added
//This function returns the current average quaternion
public static Quaternion AverageQuaternion(ref Vector4 cumulative, Quaternion newRotation, Quaternion firstRotation, int addAmount){

    float w = 0.0f;
    float x = 0.0f;
    float y = 0.0f;
    float z = 0.0f;

    //Before we add the new rotation to the average (mean), we have to check whether the quaternion has to be inverted. Because
    //q and -q are the same rotation, but cannot be averaged, we have to make sure they are all the same.
    if(!Math3d.AreQuaternionsClose(newRotation, firstRotation)){

        newRotation = Math3d.InverseSignQuaternion(newRotation);    
    }

    //Average the values
    float addDet = 1f/(float)addAmount;
    cumulative.w += newRotation.w;
    w = cumulative.w * addDet;
    cumulative.x += newRotation.x;
    x = cumulative.x * addDet;
    cumulative.y += newRotation.y;
    y = cumulative.y * addDet;
    cumulative.z += newRotation.z;
    z = cumulative.z * addDet;      

    //note: if speed is an issue, you can skip the normalization step
    return NormalizeQuaternion(x, y, z, w);
}

public static Quaternion NormalizeQuaternion(float x, float y, float z, float w){

    float lengthD = 1.0f / (w*w + x*x + y*y + z*z);
    w *= lengthD;
    x *= lengthD;
    y *= lengthD;
    z *= lengthD;

    return new Quaternion(x, y, z, w);
}

//Changes the sign of the quaternion components. This is not the same as the inverse.
public static Quaternion InverseSignQuaternion(Quaternion q){

    return new Quaternion(-q.x, -q.y, -q.z, -q.w);
}

//Returns true if the two input quaternions are close to each other. This can
//be used to check whether or not one of two quaternions which are supposed to
//be very similar but has its component signs reversed (q has the same rotation as
//-q)
public static bool AreQuaternionsClose(Quaternion q1, Quaternion q2){

    float dot = Quaternion.Dot(q1, q2);

    if(dot < 0.0f){

        return false;                   
    }

    else{

        return true;
    }
} 
```

还有这篇文章：http: [//forum.unity3d.com/threads/86898-Average-quaternions](http://forum.unity3d.com/threads/86898-Average-quaternions)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-03-28T10:05:41.380

[这是](http://www.mathworks.com/matlabcentral/fileexchange/40098-tolgabirdal-averaging-quaternions)我用来平均四元数以进行方向估计的 MATLAB 函数的实现。将 MATLAB 转换为任何其他语言都很简单，除了这种特殊方法 (Markley 2007) 需要计算特征向量和特征值。有许多库（包括 Eigen C++）可以为您做到这一点。

您可以阅读文件的描述/标题以查看原始论文中的数学。

matlab 文件取自[http://www.mathworks.com/matlabcentral/fileexchange/40098-tolgabirdal-averaging-quaternions](http://www.mathworks.com/matlabcentral/fileexchange/40098-tolgabirdal-averaging-quaternions)：

```
% by Tolga Birdal
% Q is an Mx4 matrix of quaternions. weights is an Mx1 vector, a weight for
% each quaternion.
% Qavg is the weightedaverage quaternion
% This function is especially useful for example when clustering poses
% after a matching process. In such cases a form of weighting per rotation
% is available (e.g. number of votes), which can guide the trust towards a
% specific pose. weights might then be interpreted as the vector of votes 
% per pose.
% Markley, F. Landis, Yang Cheng, John Lucas Crassidis, and Yaakov Oshman. 
% "Averaging quaternions." Journal of Guidance, Control, and Dynamics 30, 
% no. 4 (2007): 1193-1197.
function [Qavg]=quatWAvgMarkley(Q, weights)

% Form the symmetric accumulator matrix
A=zeros(4,4);
M=size(Q,1);
wSum = 0;

for i=1:M
    q = Q(i,:)';
    w_i = weights(i);
    A=w_i.*(q*q')+A; % rank 1 update
    wSum = wSum + w_i;
end

% scale
A=(1.0/wSum)*A;

% Get the eigenvector corresponding to largest eigen value
[Qavg, ~]=eigs(A,1);

end 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-15T17:27:56.083

[我尝试按照这里](http://www.ogre3d.org/forums/viewtopic.php?f=2&t=43261)的建议对四元数进行 Slerping，但这对我想要做的事情不起作用（模型失真），所以我只是最终通过每个四元数转换向量，然后做一个平均值（直到我能找到一个更好的解决方案）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-14T19:34:47.163

您不能添加四元数。你可以做的是找到一个在两个角度之间连续旋转的四元数，包括中途。四元数插值被称为“slerp”并且有一个维基百科页面。这是一个非常有用的动画技巧。在某些方面，slerp 是在计算机图形学中使用四元数的主要原因。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-04-06T10:39:06.290

这是我在 Python 中对 Tolga Birdal 算法的实现：

```
import numpy as np

def quatWAvgMarkley(Q, weights):
    '''
    Averaging Quaternions.

    Arguments:
        Q(ndarray): an Mx4 ndarray of quaternions.
        weights(list): an M elements list, a weight for each quaternion.
    '''

    # Form the symmetric accumulator matrix
    A = np.zeros((4, 4))
    M = Q.shape[0]
    wSum = 0

    for i in range(M):
        q = Q[i, :]
        w_i = weights[i]
        A += w_i * (np.outer(q, q)) # rank 1 update
        wSum += w_i

    # scale
    A /= wSum

    # Get the eigenvector corresponding to largest eigen value
    return np.linalg.eigh(A)[1][:, -1] 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-10-20T13:16:07.373

2001 年的一份[技术报告](http://www.soest.hawaii.edu/wessel/courses/gg711/pdf/Gramkow_2001_JMIV.pdf)指出，如果四元数靠得很近，平均值实际上是一个很好的近似值。（对于 -q=q 的情况，您可以通过预先将它们乘以 -1 来翻转指向另一个方向的那些，以便所有四元数都涉及同一个半球体中的生命。

[2007 年的这篇论文](http://www.acsu.buffalo.edu/~johnc/ave_quat07.pdf)中概述了一种更好的方法，其中涉及使用 SVD。这是 Nathan 引用的同一篇论文。我想补充一点，不仅有 C++，还有[Matlab 实现](http://www.mathworks.com/matlabcentral/fileexchange/40098-averaging-quaternions)。通过执行 matlab 代码附带的测试脚本，我可以说它对于所涉及的四元数的小扰动（0.004 * 均匀噪声）给出了相当好的结果：

```
qinit=rand(4,1);
Q=repmat(qinit,1,10);

% apply small perturbation to the quaternions 
perturb=0.004;
Q2=Q+rand(size(Q))*perturb; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-03-26T15:29:41.620

使用四元数，您可以做同样的事情，但需要进行少量修正： 1\. 如果四元数与先前总和的点积为负，则在平均之前取反四元数。2\. 如果您的库使用单位四元数，则归一化平均四元数，即平均的结束。

平均四元数将代表近似平均旋转（最大误差约 5 度）。

警告：如果旋转太不同，则可能会破坏不同方向的平均矩阵。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-09-30T06:54:27.550

在计算无约束平均值时，四元数不是用于旋转的理想自由度集。

这是我大部分时间使用的（

```
[MethodImpl(MethodImplOptions.AggressiveInlining)]
    internal static Vector3 ToAngularVelocity( this Quaternion q )
    {
        if ( abs(q.w) > 1023.5f / 1024.0f)
            return new Vector3();
            var angle = acos( abs(q.w) );
            var gain = Sign(q.w)*2.0f * angle / Sin(angle);

        return new Vector3(q.x * gain, q.y * gain, q.z * gain);
    }

    [MethodImpl(MethodImplOptions.AggressiveInlining)]
    internal static Quaternion FromAngularVelocity( this Vector3 w )
    {
        var mag = w.magnitude;
        if (mag <= 0)
            return Quaternion.identity;
        var cs = cos(mag * 0.5f);
        var siGain = sin(mag * 0.5f) / mag;
        return new Quaternion(w.x * siGain, w.y * siGain, w.z * siGain, cs);

    }

    internal static Quaternion Average(this Quaternion refence, Quaternion[] source)
    {

        var refernceInverse = refence.Inverse();
        Assert.IsFalse(source.IsNullOrEmpty());
        Vector3 result = new Vector3();
        foreach (var q in source)
        {
            result += (refernceInverse*q).ToAngularVelocity();
        }

        return reference*((result / source.Length).FromAngularVelocity());
    }
     internal static Quaternion Average(Quaternion[] source)
    {
        Assert.IsFalse(source.IsNullOrEmpty());
        Vector3 result = new Vector3();
        foreach (var q in source)
        {
            result += q.ToAngularVelocity();
        }

        return (result / source.Length).FromAngularVelocity();
    }
     internal static Quaternion Average(Quaternion[] source, int iterations)
    {
        Assert.IsFalse(source.IsNullOrEmpty());
        var reference = Quaternion.identity;
        for(int i = 0;i < iterations;i++)
        {
            reference = Average(reference,source);

        }
        return reference;

    }` 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-02-05T16:47:55.967

由于这里有不同的方法，我编写了一个 Matlab 脚本来比较它们。这些结果似乎表明，对于`simple_average`四元数足够相似且可以接受小偏差的情况，简单地对四元数进行平均和归一化（来自统一 wiki 的方法，称为此处）可能就足够了。

这是输出：

```
everything okay, max angle offset == 9.5843
qinit to average: 0.47053 degrees
qinit to simple_average: 0.47059 degrees
average to simple_average: 0.00046228 degrees
loop implementation to matrix implementation: 3.4151e-06 degrees 
```

这是代码：

```
%% Generate random unity quaternion
rng(42); % set arbitrary seed for random number generator
M = 100;
qinit=rand(1,4) - 0.5;
qinit=qinit/norm(qinit);
Qinit=repmat(qinit,M,1);

%% apply small perturbation to the quaternions 
perturb=0.05; % 0.05 => +- 10 degrees of rotation (see angles_deg)
Q = Qinit + 2*(rand(size(Qinit)) - 0.5)*perturb;
Q = Q ./ vecnorm(Q, 2, 2); % Normalize perturbed quaternions
Q_inv = Q * diag([1 -1 -1 -1]); % calculated inverse perturbed rotations

%% Test if everything worked as expected: assert(Q2 * Q2_inv = unity)
unity = quatmultiply(Q, Q_inv);
Q_diffs = quatmultiply(Qinit, Q_inv);
angles = 2*acos(Q_diffs(:,1));
angles_deg = wrapTo180(rad2deg(angles));
if sum(sum(abs(unity - repmat([1 0 0 0], M, 1)))) > 0.0001
    disp('error, quaternion inversion failed for some reason');
else
    disp(['everything okay, max angle offset == ' num2str(max(angles_deg))])
end

%% Calculate average using matrix implementation of eigenvalues algorithm
[average,~] = eigs(transpose(Q) * Q, 1);
average = transpose(average);
diff = quatmultiply(qinit, average * diag([1 -1 -1 -1]));
diff_angle = 2*acos(diff(1));

%% Calculate average using algorithm from https://stackoverflow.com/a/29315869/1221661
average2 = quatWAvgMarkley(Q, ones(M,1));
diff2 = quatmultiply(average, average2 * diag([1 -1 -1 -1]));
diff2_angle = 2*acos(diff2(1));

%% Simply add coefficients and normalize the result
simple_average = sum(Q) / norm(sum(Q));
simple_diff = quatmultiply(qinit, simple_average * diag([1 -1 -1 -1]));
simple_diff_angle = 2*acos(simple_diff(1));
simple_to_complex = quatmultiply(simple_average, average * diag([1 -1 -1 -1]));
simple_to_complex_angle = 2*acos(simple_to_complex(1));

%% Compare results
disp(['qinit to average: ' num2str(wrapTo180(rad2deg(diff_angle))) ' degrees']);
disp(['qinit to simple_average: ' num2str(wrapTo180(rad2deg(simple_diff_angle))) ' degrees']);
disp(['average to simple_average: ' num2str(wrapTo180(rad2deg(simple_to_complex_angle))) ' degrees']);
disp(['loop implementation to matrix implementation: ' num2str(wrapTo180(rad2deg(diff2_angle))) ' degrees']); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-04-03T14:10:40.663

Markley 的解决方案最简单的实现（在 Python 中使用 Numpy>=3.6）是：

```
import numpy as np
def q_average(Q, W=None):
    if W is not None:
        Q *= W[:, None]
    eigvals, eigvecs = np.linalg.eig(Q.T@Q)
    return eigvecs[:, eigvals.argmax()] 
```

其中`Q`大小为 N×4。得到的四元数已经标准化。

在这种情况下，权重默认等于 1。否则，您可以给出大小为 N 的权重列表（每个四元数一个。）

就是这样。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-04-17T21:50:31.547

[在此处](http://tbirdal.blogspot.com/)查看我对加权平均以及四元数 Lp 中位数的解决方案。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-07-24T13:56:52.907

这是一个 GitHub 存储库，其中实现了这个建议的算法 :) [https://github.com/christophhagen/averaging-quaternions](https://github.com/christophhagen/averaging-quaternions)

感谢和感谢 christophhagen ofc ;)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-11-13T21:08:16.087

还有另一种基于 slerp 的方法，这可能是您在平均四元数时真正想要的。

让我们首先将其与基于特征分析的平均进行比较：

考虑两个四元数 A 和 B 的平均值，对应于围绕 X 轴旋转 0° 和 90° 度，权重 w_A = 2 和 w_B = 1。预期的加权平均值应对应于围绕 X 轴旋转 30° . 基于 Slerp 的加权平均值将返回预期值。基于特征分析的加权平均将返回 26.56° 的旋转。 [![在此处输入图像描述](../Images/fbc0599bb6541deeda41406dea1a95a7.png)](https://i.stack.imgur.com/tPkAr.png)

基于特征分析的方法将返回最小化相应旋转矩阵的 Frobenius 范数的四元数。基于 slerp 的方法将改为根据四元数计算 3D 旋转空间中的平均值。

```
import math
import numpy as np
import quaternion # (pip install numpy-quaternion)
d2r = math.pi/180
r2d = 180/math.pi

def recover_angle(mat):
    return np.arctan2(mat[1,0], mat[0,0])

# ground truth
angles = np.array([0,90])
weights = np.array([2,1])
mean_angle = np.sum(angles*(weights/weights.sum()))
quaternion_mean = quaternion.from_euler_angles(mean_angle*d2r,0,0)

# eigen analysis
Q = quaternion.as_float_array(
    [
        (weight**0.5) * quaternion.from_euler_angles(0,0,angle*d2r) 
        for angle,weight 
        in zip(angles,weights)
    ]
).T
QQT = Q @ Q.T
eigval,eigvec = np.linalg.eig(QQT)
quaternion_mean_eig = quaternion.from_float_array( eigvec[:,np.argmax(eigval)] )

# slerp based
def slerp_avg(quaternions, weights):
    # welford's mean in terms of linear mix operations:
    toqt = quaternion.from_float_array
    mix = lambda a,b,k: quaternion.slerp(toqt(a),toqt(b),0,1,k)
    wmean, wsum, num = quaternions[0], weights[0], len(weights)
    for i in range(1,num):
        wsum += weights[i]
        k = (weights[i]/wsum)
        # wmean := wmean*(1-k) + quaternions[i]*k
        wmean = mix(wmean,quaternions[i],k) 
    return wmean

quaternion_mean_slerp = slerp_avg(quaternion.as_float_array(
    [quaternion.from_euler_angles(0,0,angle*d2r) for angle in angles]
), weights)

mat_mean = quaternion.as_rotation_matrix(quaternion_mean)
mat_mean_eig = quaternion.as_rotation_matrix(quaternion_mean_eig)
mat_mean_slerp = quaternion.as_rotation_matrix(quaternion_mean_slerp)

print("expected", recover_angle(mat_mean)*r2d)
print("eigen", recover_angle(mat_mean_eig)*r2d)
print("slerp", recover_angle(mat_mean_slerp)*r2d) 
```

输出：

```
expected 29.999999999999996
eigen 26.565051177077994
slerp 30.00000000000001 
```

您可以在 [https://github.com/xaedes/average_affine_transform_mat/找到一个零依赖 C++ 库](https://github.com/xaedes/average_affine_transform_mat/)

# php - 使用 PHP 更新 XML

> ID：12374088
> 
> 赞同：1
> 
> 时间：2012-09-11T16:28:00.357
> 
> 标签：php, xml

PHP 不是我的世界，所以我需要一些帮助来更新 xml 文件。这是我第一次使用 DOM，似乎没有替换元素。

**这是我的 XML：**

```
<?xml version="1.0" encoding="utf-8"?>
<feedback>
  <feed id="0">
    <title>some title</title>
    <desc><![CDATA[some text]]></desc>
  </feed>
  <feed id="1">
    <title>some title</title>
    <desc><![CDATA[some text]]></desc>
  </feed>
  <feed id="2">
    <title>some title</title>
    <desc><![CDATA[some text]]></desc>
  </feed>
</feedback> 
```

**和PHP代码：**

```
<?php

    if ($_POST['agg']) {

        $selid = $_POST['selectedfeed'];
        $newtitolo = $_POST['title'];
        $newdesc = nl2br($_POST['feed']);

        $file = "feedback.xml";
        $fp = fopen($file, "rb") or die("cannot open file");
        $str = fread($fp, filesize($file));

    $xml = new DOMDocument();
    $xml->formatOutput = true;
    $xml->preserveWhiteSpace = false;
    $xml->loadXML($str) or die("Error");    

    $root = $xml->documentElement;

    $oldfeed = $root->getElementsByTagName("feed")->item($selid);

    $title = $xml->createElement("title");
    $titleText = $xml->createTextNode($newtitle);
    $title->appendChild($titleText);

    $desc = $xml->createElement("desc");
    $descText = $xml->createCDATAsection($newdesc);
    $desc->appendChild($descText);

    $feed = $xml->createElement("feed");
    $feed->appendChild($title);
    $feed->appendChild($desc);

    $root->replaceChild($feed,$oldfeed);

    $xml->saveXML("feedback.xml");
    }
?> 
```

对于上面的代码，我需要获取一个具有特定 ID 的“feed”节点，并将 feed 的内容替换为新创建的元素“title”和“desc”（cdata）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:33:36.180

使用 DOMDocument::getElementById()](http://www.php.net/manual/en/domdocument.getelementbyid.php) 找到您需要的提要。

```
$oldfeed = $xml->getElementById($selid); 
```

* * *

然后使用[DOMDocument::save()](http://www.php.net/manual/en/domdocument.save.php)将 XML 保存到文件中。

```
$xml->save('feedback.xml'); 
```

* * *

DOMDocument::save() 将文件名作为第一个参数。DOMDocument::saveXML() 将 DOMNode 作为第一个参数并回显内容（它不保存它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:40:27.080

几乎你的代码中的每一件事都是好的。只是改变：

```
 $xml->saveXML("feedback.xml"); 
```

到

```
 $xml->save("feedback.xml"); 
```

# css - 在宽度为 100% IE7 的 div 容器中向左浮动和向右浮动

> ID：12374089
> 
> 赞同：3
> 
> 时间：2012-09-11T16:28:05.757
> 
> 标签：css, internet-explorer-7, floating

我想在 IE7 的容器 div 中浮动两个 div。容器中的第一个 div 应该向左浮动，第二个向右浮动。实际上，这两个 div 在我的 css 配置中浮动到左侧。

这是我的CSS：

```
.container {float:left; width:100%; height:30px;}
.left {float:left; width:auto; height:30px;}
.right {float:right; width: auto; height:30px} 
```

这是我的 HTML

```
<div class="container">
    <div class="left">To the Left!</div>
    <div class="right">To the Right!</div>
</div> 
```

这应该是结果：（点是这里的空格；））

```
#-#-#-#-#-#-#-#-#-#-#-#-#-# Container -#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#
#-#-
#-#-    |~~~~~~~~~~~~|. . . . . . . . . . . . . . . .|~~~~~~~~~~~~~|
#-#-    |To The Left | . . . . . . . . . . .  . . . .|To the Right |
#-#-    |~~~~~~~~~~~~|. . . . . . . . . . . . . . . .|~~~~~~~~~~~~~|
#-#-
#-#-#-#-#-#-#-#-#-#-#-#--#-#-#-#-#-#-#-#-#-#-#-#--#-#-#-#-#-#-#-#-#-#-#- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:37:33.223

代替

```
.container {float:left; width:100%; height:30px;} 
```

和

```
.container {width:100%; height:30px;} 
```

你的容器类“float:left;” 优先于其他花车。您也可以将其他课程编辑为

```
.left {clear: both; float:left; width:auto; height:30px;}
.right {clear: both; float:right; width: auto; height:30px;} 
```

在实现新的浮点数之前，它应该清除容器类留下的浮点数。

# asp.net-mvc-3 - 如何清除文本

> ID：12374099
> 
> 赞同：0
> 
> 时间：2012-09-11T16:28:30.120
> 
> 标签：asp.net-mvc-3, razor

ASP.Net MVC 3 和 Razor 我使用以下代码提交页面

```
 <input name ="button" type="submit" value="AddData" /> 
```

我从服务器端读取了控制动作方法中的模态数据。

我读取的数据来自以下代码

@Html.TextAreaFor(m => m.Letter.Letters, new {id = "LetterTextArea"});

提交页面后，我无法清除文本框中的文本。

提交（单击按钮）数据后如何清除文本。

谢谢你，史密斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:31:04.113

我认为您正在将相同的模型返回给视图。您应该改为重定向到**GET**操作（[Post -Redirect-Get 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)）

```
[HttpPost]
public ActionResult Add(UserViewModel model)
{
  if(ModelState.IsValid)
  {
    //Save the data, If everything is ok, We will do a Redirect to GET action
    return RedirectToAction("Add","User");
  } 
  return View(model);    
} 
```

[`RedirectToAction`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.redirecttoaction%28v=vs.108%29.aspx)方法将发出一个`GET`请求并点击返回空表单的 GET 操作方法。

```
public ActionResult Add()
{
  var userViewModel=new UserViewModel();
  return View(userViewModel);
} 
```

[这](http://devlicio.us/blogs/tim_barcz/archive/2008/08/22/prg-pattern-in-the-asp-net-mvc-framework.aspx)是一个很好的教程，为什么你应该考虑 PRG 模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:33:07.727

除了@Shyju 回答，这是在这种情况下的最佳做法，您可以从 ModelState 中删除该值，因为 HTML 助手将首先使用存储在 ModelState 中的值，然后再使用模型中的值：

```
[HttpPost]
public ActionResult SomeAction(MyViewModel model)
{
    ModelState.Remove(Letter.Letters);
    model.Letter.Letters = "";
    return View(model);
} 
```

# mysql - 如何在 Select 语句中使用 IF() [控制流函数] case？

> ID：12374101
> 
> 赞同：0
> 
> 时间：2012-09-11T16:28:37.850
> 
> 标签：mysql, sql, select, if-statement

我需要从单列中创建两列，`price`具体取决于它是`used`/`secondhand`还是新的。旧的由列中的`used`某处指示`format`。一种是“不含税价格”，另一种是`price`含税。我希望下面的代码（没有错误，但根据我的要求出现故障）能更好地解释它。

> 当 format ='%used%' 或 format='%secondhand%' then CAST(price AS UNSIGNED INTEGER) else CAST(price AS UNSIGNED INTEGER)*0.8 end as 'Pris ex Tax', CAST(price AS UNSIGNED INTEGER)作为价格

这里基本上我需要为新产品和`price`二手产品显示价格*0.8 的列。 `format`在数据库中包含旧文章的信息，`used`但`secondhand`没有新的。

我关注[了这个链接](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html) 以及[stackoverflow](https://stackoverflow.com/questions/4907238/mysql-multiplication-in-select-depending-on-value-of-column)中的一些相关问题， 但还不足以让我理解。我试图把输出放在这里，但发现很难做到。如果您认为需要解决它，我会这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:31:16.367

**[这是一个很好的链接，它教 MySQL 中的内联 IF 和 CASE 语句。](http://timmurphy.org/2009/08/13/inline-if-and-case-statements-in-mysql/)**

代码片段：

`IF Statement`

```
SELECT IF(score > 100, 100, score) AS score
FROM exam_results 
```

`CASE Statement`

```
SELECT CASE num_heads
WHEN 0 THEN 'Zombie'
WHEN 1 THEN 'Human'
ELSE 'Alien'
END AS race
FROM user 
```

# windows - bbcomm.exe 在 Windows 64 位中不会自动启动

> ID：12374102
> 
> 赞同：1
> 
> 时间：2012-09-11T16:28:40.330
> 
> 标签：windows, api, 64-bit, bloomberg

> **可能重复：**
> [在 Java v3 Bloomberg API 中启动 bbcomm](https://stackoverflow.com/questions/1880787/starting-bbcomm-in-java-v3-bloomberg-api)

我们有一个 C# (framewrok 4.0) 程序，它通过 APIv3 连接到 Bloomberg。

在我们的 Windows 7 32 位机器上一切正常。当我们的程序尝试连接到 Bloomberg 时，bbcomm.exe 会自动启动。

在新的 Windows 64 位计算机上，相同的程序挂起，因为 bbcomm.exe 没有启动。

我读过这篇文章：

[在 Java v3 Bloomberg API 中启动 bbcomm](https://stackoverflow.com/questions/1880787/starting-bbcomm-in-java-v3-bloomberg-api)

并且还与彭博帮助台进行了交谈，但没有找到真正的解决方案。

目前，解决方法是从命令行启动 bbcomm.exe，然后启动我们的应用程序。

任何帮助将不胜感激。

# iphone - 构建和更新大视图

> ID：12374107
> 
> 赞同：0
> 
> 时间：2012-09-11T16:28:59.130
> 
> 标签：iphone, xcode, cgcontext

查看许多现有的应用程序，我注意到一个反复出现的主题，其中（滚动）视图实际上由许多正方形组成，例如 100 x 100。想要做类似的事情，我想到的问题是这个视图是由数百个子视图创建的，还是一个通过 setNeedDisplay 根据需要获取更新部分的视图。

一方面，使用数百个子视图似乎真的很耗费内存和处理负担。但另一方面，如何以及应该如何保留绘图上下文，最终似乎只在 drawRect 方法中可用，但它被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:39:25.843

是什么让您认为滚动视图由 100x100 的正方形组成？如果您认为出现这种情况是因为您在滚动时看到方块加载，原因可能是因为该应用程序使用了一种称为平铺的中等先进技术。

这里有来自 Apple 的关于 CATiledLayer 的参考材料，这里有Bill [Dudney](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/CATiledLayer_class/Introduction/Introduction.html)[的使用示例](http://bill.dudney.net/roller/objc/entry/catiledlayer_example)。

# linux - clone() 系统调用不能正常工作

> ID：12374109
> 
> 赞同：-1
> 
> 时间：2012-09-11T16:29:25.293
> 
> 标签：linux, clone

我花了很多时间来了解如何使用`clone()`系统调用`linux`。我编写了以下程序，但它无法正常工作......

```
#define _GNU_SOURCE
#include<stdio.h>
#include<stdlib.h>
#include<signal.h>
#include<sched.h>
#include<sys/types.h>

int sched2()
{
printf("it is working\n");

}
int main(int argc, char *argv[])
{
printf("in the main\n");
void *stack=malloc(65536);
int Pid=clone(sched2, stack, 0, NULL);
printf("%d\n",Pid );
if(Pid==-1)
{
    printf("clone error\n");
    exit(1);
}
sleep(100);

printf("yea2");
exit(0);
} 
```

`it is working`正如我所料，应该打印字符串......以及......

```
in the main
2534 
```

它没有打印`it is working`字符串。此外，当我获取新创建的内核线程的进程 ID 并发出

```
kill -9 2534 
```

我使用 ps 命令检查了终端上的进程，它应该是这样的......

```
 PID    TTY       TIME CMD
2209 pts/2    00:00:00 bash
2533 pts/2    00:00:00 a.out
2534 pts/2    00:00:00 a.out <defunct>
2535 pts/2    00:00:00 ps 
```

该过程实际上没有被杀死！它仍在运行...请点亮...谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:51:15.687

> ```
> void *stack=malloc(65536);
> int Pid=clone(sched2, stack, 0, NULL); 
> ```

在大多数架构上，堆栈向下增长。你可能想说：

```
clone(sched2, stack + 65536, 0, NULL); 
```

对于第二个问题，进程*已死*，但父级尚未等待。这是一个所谓的“僵尸”过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:33:29.413

它已经死了，但父母忘了收割它。使用其中一个`wait(2)`函数来执行此操作，可选择设置`SIGCHLD`处理程序。

# php - 将 Woo Commerce 下拉菜单转换为单选按钮

> ID：12374110
> 
> 赞同：2
> 
> 时间：2012-09-11T16:29:29.100
> 
> 标签：php, jquery, radio-button, woocommerce

我无法将变体下拉列表转换为启用 woocommerce 的网站的单选按钮。我已经尝试过在[这里](https://stackoverflow.com/questions/11819604/dropdown-converted-to-radio-buttons-no-longer-triggering-specific-function)找到的答案，但我似乎无法使这个解决方案发挥作用。我还尝试编辑 variable.php 文件中的代码。

到目前为止，最成功的是第二种方法，编辑 variable.php 代码并将标签更改为标签。问题是单击单选按钮时不会触发自然的 jQuery 事件。

如果你们中的任何人知道将下拉菜单转换为收音机的更简单方法，或者只是让 jQuery 事件触发，我们将不胜感激。

我可以得到的相关代码：

```
<?php $loop = 0; foreach ( $attributes as $name => $options ) : $loop++; ?>

<tr>

<td class="label"><label for="<?php echo sanitize_title($name); ?>"><?php echo $woocommerce->attribute_label($name); ?></label></td>

<td class="value"><select id="<?php echo esc_attr( sanitize_title($name) ); ?>" name="attribute_<?php echo sanitize_title($name); ?>">

<option value=""><?php echo __('Choose an option', 'woocommerce') ?>&hellip;</option>

<?php 

    if ( is_array( $options ) ) {

        if ( empty( $_POST ) )

            $selected_value = ( isset( $selected_attributes[ sanitize_title( $name ) ] ) ) ? $selected_attributes[ sanitize_title( $name ) ] : '';

        else

            $selected_value = isset( $_POST[ 'attribute_' . sanitize_title( $name ) ] ) ? $_POST[ 'attribute_' . sanitize_title( $name ) ] : '';

        // Get terms if this is a taxonomy - ordered

        if ( taxonomy_exists( sanitize_title( $name ) ) ) {

            $terms = get_terms( sanitize_title($name), array('menu_order' => 'ASC') );

            foreach ( $terms as $term ) {

                if ( ! in_array( $term->slug, $options ) ) continue;

                echo '<option value="' . $term->slug . '" ' . selected( $selected_value, $term->slug ) . '>' . apply_filters( 'woocommerce_variation_option_name', $term->name ) . '</option>';

            }

        } else {

            foreach ( $options as $option )

                echo '<option value="' . $option . '" ' . selected( $selected_value, $option ) . '>' . apply_filters( 'woocommerce_variation_option_name', $option ) . '</option>';

        }

    }

?> 
```

相关的 Javascript。我将“选择”元素更改为“输入：收音机”，但它仍然不起作用。

jQuery(文档).ready(函数($) {

```
/**
 * Variations form handling
 */
$('form.variations_form')

    // On clicking the reset variation button
    .on( 'click', '.reset_variations', function( event ) {

        $(this).closest('form.variations_form').find('.variations select').val('').change();

        return false;
    } )

    // Upon changing an option
    .on( 'change', '.variations select', function( event ) {

        $variation_form = $(this).closest('form.variations_form');
        $variation_form.find('input[name=variation_id]').val('').change();

        $variation_form
            .trigger( 'woocommerce_variation_select_change' )
            .trigger( 'check_variations', [ '', false ] );

        $(this).blur();

        if( $().uniform && $.isFunction( $.uniform.update ) ) {
            $.uniform.update();
        }

    } )

    // Upon gaining focus
    .on( 'focusin', '.variations select', function( event ) {

        $variation_form = $(this).closest('form.variations_form');

        $variation_form
            .trigger( 'woocommerce_variation_select_focusin' )
            .trigger( 'check_variations', [ $(this).attr('name'), true ] );

    } )

    // Check variations
    .on( 'check_variations', function( event, exclude, focus ) {
        var all_set             = true;
        var any_set             = false;
        var showing_variation   = false;
        var current_settings    = {};
        var $variation_form     = $(this);
        var $reset_variations   = $variation_form.find('.reset_variations');

        $variation_form.find('.variations select').each( function() {

            if ( $(this).val().length == 0 ) {
                all_set = false;
            } else {
                any_set = true;
            }

            if ( exclude && $(this).attr('name') == exclude ) {

                all_set = false;
                current_settings[$(this).attr('name')] = '';

            } else {

                // Encode entities
                value = $(this).val()
                    .replace(/&/g, '&amp;')
                    .replace(/"/g, '&quot;')
                    .replace(/'/g, '&#039;')
                    .replace(/</g, '&lt;')
                    .replace(/>/g, '&gt;');

                // Add to settings array
                current_settings[ $(this).attr('name') ] = value;
            }

        });

        var product_id          = parseInt( $variation_form.attr( 'data-product_id' ) );
        var all_variations      = window[ "product_variations_" + product_id ];

        // Fallback
        if ( ! all_variations ) 
            all_variations = window[ "product_variations" ];

        var matching_variations = find_matching_variations( all_variations, current_settings );

        if ( all_set ) {

            var variation = matching_variations.pop();

            if ( variation ) {

                // Found - set ID
                $variation_form
                    .find('input[name=variation_id]')
                    .val( variation.variation_id )
                    .change();

                $variation_form.trigger( 'found_variation', [ variation ] );

            } else {

                // Nothing found - reset fields
                $variation_form.find('.variations select').val('');

                if ( ! focus )
                    $variation_form.trigger( 'reset_image' );

            }

        } else {

            $variation_form.trigger( 'update_variation_values', [ matching_variations ] );

            if ( ! focus )
                $variation_form.trigger( 'reset_image' );

            if ( ! exclude ) {
                $variation_form.find('.single_variation_wrap').slideUp('200');
            }

        }

        if ( any_set ) {

            if ( $reset_variations.css('visibility') == 'hidden' )
                $reset_variations.css('visibility','visible').hide().fadeIn();

        } else {

            $reset_variations.css('visibility','hidden');

        }

    } )

    // Reset product image
    .on( 'reset_image', function( event ) {

        var $product        = $(this).closest( '.product' );
        var $product_img    = $product.find( 'div.images img:eq(0)' );
        var $product_link   = $product.find( 'div.images a.zoom:eq(0)' );
        var o_src           = $product_img.attr('data-o_src');
        var o_title         = $product_img.attr('data-o_title');
        var o_href          = $product_link.attr('data-o_href');

        if ( o_src && o_href && o_title ) {
            $product_img
                .attr( 'src', o_src )
                .attr( 'alt', o_title )
                .attr( 'title', o_title );
            $product_link
                .attr( 'href', o_href );
        }

    } )

    // Disable option fields that are unavaiable for current set of attributes
    .on( 'update_variation_values', function( event, variations ) {

        $variation_form = $(this).closest('form.variations_form');

        // Loop through selects and disable/enable options based on selections
        $variation_form.find('.variations select').each(function( index, el ){

            current_attr_select = $(el);

            // Disable all
            current_attr_select.find('option:gt(0)').attr('disabled', 'disabled');

            // Get name
            var current_attr_name   = current_attr_select.attr('name');

            // Loop through variations
            for ( num in variations ) {

                var attributes = variations[ num ].attributes;

                for ( attr_name in attributes ) {

                    var attr_val = attributes[ attr_name ];

                    if ( attr_name == current_attr_name ) {

                        if ( attr_val ) {

                            // Decode entities
                            attr_val = $("<div/>").html( attr_val ).text();

                            // Add slashes
                            attr_val = attr_val.replace(/'/g, "\\'");
                            attr_val = attr_val.replace(/"/g, "\\\"");

                            // Compare the meercat
                            current_attr_select.find('option[value="' + attr_val + '"]').removeAttr('disabled');

                        } else {
                            current_attr_select.find('option').removeAttr('disabled');
                        }

                    }

                }

            }

        });

        // Custom event for when variations have been updated
        $variation_form.trigger('woocommerce_update_variation_values');

    } )

    // Show single variation details (price, stock, image)
    .on( 'found_variation', function( event, variation ) {
        var $variation_form = $(this);

        var $product        = $(this).closest( '.product' );
        var $product_img    = $product.find( 'div.images img:eq(0)' );
        var $product_link   = $product.find( 'div.images a.zoom:eq(0)' );

        var o_src           = $product_img.attr('data-o_src');
        var o_title         = $product_img.attr('data-o_title');
        var o_href          = $product_link.attr('data-o_href');

        var variation_image = variation.image_src;
        var variation_link = variation.image_link;
        var variation_title = variation.image_title;

        $variation_form.find('.variations_button').show();
        $variation_form.find('.single_variation').html( variation.price_html + variation.availability_html );

        if ( ! o_src ) {
            o_src = ( ! $product_img.attr('src') ) ? '' : $product_img.attr('src');
            $product_img.attr('data-o_src', o_src );
        }

        if ( ! o_href ) {
            o_href = ( ! $product_link.attr('href') ) ? '' : $product_link.attr('href');
            $product_link.attr('data-o_href', o_href );
        }

        if ( ! o_title ) {
            o_title = ( ! $product_img.attr('title') ) ? '' : $product_img.attr('title');
            $product_img.attr('data-o_title', o_title );
        }

        if ( variation_image && variation_image.length > 1 ) {
            $product_img
                .attr( 'src', variation_image )
                .attr( 'alt', variation_title )
                .attr( 'title', variation_title );
            $product_link
                .attr( 'href', variation_link );
        } else {
            $product_img
                .attr( 'src', o_src )
                .attr( 'alt', o_title )
                .attr( 'title', o_title );
            $product_link
                .attr( 'href', o_href );
        }

        var $single_variation_wrap = $variation_form.find('.single_variation_wrap');

        if ( variation.sku )
             $product.find('.product_meta').find('.sku').text( variation.sku );
        else
             $product.find('.product_meta').find('.sku').text('');

        $single_variation_wrap.find('.quantity').show();

        if ( ! variation.is_in_stock && ! variation.backorders_allowed ) {
            $variation_form.find('.variations_button').hide();
        }

        if ( variation.min_qty )
            $single_variation_wrap.find('input[name=quantity]').attr( 'data-min', variation.min_qty ).val( variation.min_qty );
        else
            $single_variation_wrap.find('input[name=quantity]').removeAttr('data-min');

        if ( variation.max_qty )
            $single_variation_wrap.find('input[name=quantity]').attr('data-max', variation.max_qty);
        else
            $single_variation_wrap.find('input[name=quantity]').removeAttr('data-max');

        if ( variation.is_sold_individually == 'yes' ) {
            $single_variation_wrap.find('input[name=quantity]').val('1');
            $single_variation_wrap.find('.quantity').hide();
        }

        $single_variation_wrap.slideDown('200').trigger( 'show_variation', [ variation ] );

    } );

/**
 * Initial states and loading
 */
$('form.variations_form .variations select').change();

/**
 * Helper functions for variations
 */

// Search for matching variations for given set of attributes
function find_matching_variations( product_variations, settings ) {
    var matching = [];

    for (var i = 0; i < product_variations.length; i++) {
        var variation = product_variations[i];
        var variation_id = variation.variation_id;

        if ( variations_match( variation.attributes, settings ) ) {
            matching.push(variation);
        }
    }
    return matching;
}

// Check if two arrays of attributes match
function variations_match( attrs1, attrs2 ) {
    var match = true;
    for ( attr_name in attrs1 ) {
        var val1 = attrs1[ attr_name ];
        var val2 = attrs2[ attr_name ];
        if ( val1 !== undefined && val2 !== undefined && val1.length != 0 && val2.length != 0 && val1 != val2 ) {
            match = false;
        }
    }
    return match;
}

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-26T17:31:02.860

几年后，官方回购中有一个解决方案： [http ://wordpress.org/plugins/woocommerce-radio-buttons/](http://wordpress.org/plugins/woocommerce-radio-buttons/)

缺少的部分是插件 dequeue 的 WooCommerce`add-to-cart-variation.js`脚本并加载它自己的，以便通过更改单选按钮输入来触发正确的事件。

# tsql - 根据循环大小查找第一行

> ID：12374115
> 
> 赞同：0
> 
> 时间：2012-09-11T16:29:43.037
> 
> 标签：tsql, sql-server-2012

我有一张牌桌和一张牌桌（在一张牌上），例如：

```
declare @cards table
(
    id_card int,
    cycle int
)

insert into @cards (id_card, cycle) values (1, 10)

declare @moves table
(
    id_move int,
    id_card int,
    quantity int
)

insert into @moves (id_move, id_card, quantity) values (1, 1, 2)
insert into @moves (id_move, id_card, quantity) values (2, 1, 4)
insert into @moves (id_move, id_card, quantity) values (3, 1, 2)
insert into @moves (id_move, id_card, quantity) values (4, 1, 8)
insert into @moves (id_move, id_card, quantity) values (5, 1, 2) 
```

问题：每张牌都有一个循环大小，每一步都有一个数量。因此，卡片周期大小为 10 和 18 步意味着 1 个完整周期加 8 步。我必须找到最后一个循环的第一步（给定示例中的移动 id 4）。这个问题听起来（起初）微不足道，但我遇到了很多麻烦来找到我认为我做错了什么的举动。

我想出了一个查询，它给出了最后一个循环第一次移动开始位置的位置，但我找不到从那里去的任何地方。

```
select
    id_card,
    case
        when value > quantity then value - quantity
        else value
    end value
from
(
    select
        f.id_card,
        f.quantity,
        f.quantity - f.quantity % cards.cycle + 1 value
    from
    (
        select
            id_card,
            sum(quantity) quantity
        from @moves
        group by
            id_card
    ) f
    join @cards cards on
        cards.id_card = f.id_card
) f 
```

预期输出：

```
id_move
4 
```

有任何想法吗？我可以进行任何修改以使问题更容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:49:24.437

这个怎么样：

```
;WITH CycleCountCTE AS (
SELECT m.id_move, m.id_card, (select sum(quantity)-1 FROM @moves m2 WHERE m2.id_card = m.id_card AND m2.id_move<=m.id_move)/c.cycle + 1 AS CycleNum, 
    (SELECT MAX(m3.id_move) FROM @moves m3 WHERE m3.id_card = m.id_card AND m3.id_move < m.id_move) AS Prev_id_move
FROM @cards c
JOIN @moves m on m.id_card = c.id_card
)
SELECT cn.id_card, MAX(cn.id_move) as First_id_move_of_last_cycle
FROM CycleCountCTE cn
LEFT OUTER JOIN CycleCountCTE cp ON cp.id_move = cn.Prev_id_move
where cn.CycleNum > isnull(cp.CycleNum,0)
GROUP BY cn.id_card 
```

或者更简单一点：

```
;WITH CycleCountCTE AS (
SELECT m.id_move, m.id_card, (select sum(quantity)-1 FROM @moves m2 WHERE m2.id_card = m.id_card AND m2.id_move<=m.id_move)/c.cycle + 1 AS CycleNum
FROM @cards c
JOIN @moves m on m.id_card = c.id_card
)
SELECT id_card, MIN(id_move) as First_id_move_of_last_cycle
FROM CycleCountCTE c
WHERE CycleNum = (SELECT MAX(CycleNum) from CycleCountCTE c2 WHERE c2.id_card = c.id_card)
GROUP BY id_card 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:25:35.137

尝试运行它，我相信它可能是您正在寻找的。它取卡数量的总和，并将周期的剩余部分作为 current_cycle 返回。

```
SELECT 
    m.[id_move],
    m.[id_card],
    m.[quantity],
    c.[cycle],
    running_total_set.[total_quantity],
    running_total_set.[total_quantity] % c.[cycle] AS [current_cycle]
FROM @moves m
INNER JOIN @cards c
    ON m.[id_card] = c.[id_card]
INNER JOIN
(
    SELECT
        id_move_2 AS [id_move],
        SUM([quantity]) AS [total_quantity]
    FROM
    (
        SELECT
            moves1.id_move AS [id_move_1],
            moves2.id_move AS [id_move_2],
            moves1.quantity AS [quantity]
        FROM @moves moves1
        INNER JOIN @moves moves2
            ON moves2.[id_move] >= moves1.[id_move]
    )move_set
    GROUP BY [id_move_2]
)running_total_set
ON m.[id_move] = running_total_set.[id_move] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T20:23:28.180

就个人而言，我首先设置一个记录先前移动总数的辅助移动表：

```
SELECT this.id_move, this.id_card, this.quantity,
  [sumPrevMoves] = sum(prev.quantity),
  [sumMovesNow] = this.quantity + isnull(sum(prev.quantity), 0)
FROM @moves this
  LEFT JOIN @moves prev on this.id_card = prev.id_card
                       and this.id_move > prev.id_move
GROUP BY this.id_move, this.id_card, this.quantity 
```

然后，通过简单地连接到 @cards 表，您可以找到各种有用的东西：

```
SELECT m.id_move, m.id_card,
  [cardCycles] = c.cycle,
  [thisMove] = m.quantity,
  m.sumPrevMoves, m.sumMovesNow,
  [totalCycles] = m.sumMovesNow / cycle,
  [totalMoves] = m.sumMovesNow % cycle
FROM @cards c
  JOIN (/*query from above*/) m on c.id_card = m.id_card 
```

从这里，要找到`last cycle, first move`，您需要两条信息：

1.  最后的周期数是多少
2.  该周期的最小移动是多少

如果您将所有内容与一些 CTE 放在一起，那么以下内容应该可以满足您的需求：

```
;WITH moves2 as (
    SELECT this.id_move, this.id_card, this.quantity,
      [sumPrevMoves] = sum(prev.quantity),
      [sumMovesNow] = this.quantity + isnull(sum(prev.quantity), 0)
    FROM @moves this
      LEFT JOIN @moves prev on this.id_card = prev.id_card
                           and this.id_move > prev.id_move
    GROUP BY this.id_move, this.id_card, this.quantity
), allMoves as (
    SELECT m.id_move, m.id_card,
      [cardCycles] = c.cycle,
      [thisMove] = m.quantity,
      m.sumPrevMoves, m.sumMovesNow,
      [totalCycles] = m.sumMovesNow / cycle,
      [totalMoves] = m.sumMovesNow % cycle
    FROM @cards c
      JOIN moves2 m on c.id_card = m.id_card
)
SELECT am1.id_card, [firstMoveLastCycle] = min(am1.id_move)
FROM allMoves am1
    join (
        SELECT id_card, [lastCycle] = max(totalCycles)
        FROM allMoves
        GROUP BY id_card
    ) am2 on am1.id_card=am2.id_card
        and am1.totalCycles = am2.lastCycle
GROUP BY am1.id_card 
```

# javascript - 元素对象与 HTML 字符串

> ID：12374118
> 
> 赞同：2
> 
> 时间：2012-09-11T16:29:54.083
> 
> 标签：javascript, jquery

我的问题很简单，可能是主观的。大多数情况下，当我操作 DOM 时，我会创建 HTML 文本并将其附加到元素中。有时，如果数据足够小，我会创建元素并将它们附加到父元素。

```
$("#p").html("<p>My Paragraph</p>"); 
```

或者

```
$("<p/>").html("My Paragraph").appendTo("#p"); 
```

应该使用哪一个，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T16:33:08.707

jQuery 有一种更优雅的方式来创建元素：

```
var $p = $("<p/>", {
    html: "My paragraph"
}).appendTo("#p"); 
```

创建元素的最大价值在于您可以保存对它们的引用，然后根据需要使用它们。无需使用`$()`选择器再次找到它们。

另一方面，如果您的 HTML 非常简单，并且您以后不需要访问任何这些元素，则可以使用该`.html()`方法。而且速度稍快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T16:31:45.557

我认为使用第一个会更好，因为它取决于您页面的结构，而第二个与更有可能更改的内容有关。我不知道性能，如果那是你所问的更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T16:39:59.197

以我的拙见，我只是不喜欢第二种选择的外观。从语义上讲，您永远不会`<p/>`在标记中看到任何地方，因此使用它感觉很奇怪（即使我知道它在添加到 DOM 之前就已填充）。第一个例子看起来更干净。

纯粹是一个偏好问题，我强烈主张代码可读性优于优化，直到您真正感觉到性能受到影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T16:40:58.040

好像

```
$("#p").html("<p>My Paragraph</p>"); 
```

是最快的方法。
见[http://jsperf.com/jquery-append-order](http://jsperf.com/jquery-append-order)

# android - 为什么触摸位置坐标会相互影响？(ACTION_MOVE)

> ID：12374121
> 
> 赞同：0
> 
> 时间：2012-09-11T16:30:10.317
> 
> 标签：android, touch, multi-touch, motionevent

我在这里遇到了一个真正的问题，自过去几个小时以来我一直在拼命想弄清楚。哪儿也去不了...

在编写一个需要处理两个手指在屏幕上的确切位置的应用程序时，我遇到了一个意想不到的行为（对我来说）。经过一些调试，我发现当我将一根手指保持在屏幕上的静态位置，同时用另一根手指在同一屏幕上滑动时，不仅会改变移动手指的坐标，还会改变静态手指的坐标！（虽然不是在现实生活中：D）

这是仅 y 坐标的示例日志输出。
y(0) 是握在屏幕底部的静态手指，
y(1) 从上到下移动。

有趣的是，在我到达屏幕底部之前，y(1) 达到了最大值 480。

有人可以向我解释这种行为吗？

这是我用来生成日志的代码，也许我犯了一个愚蠢的错误......

编辑：在“htc 愿望”上进行了测试。

```
 @Override
    public boolean onTouchEvent( MotionEvent e ) {
        String s = "";
        for ( int i = 0; i < e.getPointerCount(); i++ ) {
                s += "y(" + i + ")=" + (int)e.getY( i ) + " ";
        }
        Log.d( "some tag", s );
        return true;
    } 
```

*   09-11 17:57:09.257: D/TouchHandler(14932): y(0)=480
*   09-11 17:57:09.267: D/TouchHandler(14932): y(0)=480 y(1)=5
*   09-11 17:57:09.287: D/TouchHandler(14932): y(0)=480 y(1)=10
*   09-11 17:57:09.327: D/TouchHandler(14932): y(0)=480 y(1)=30
*   09-11 17:57:09.367: D/TouchHandler(14932): y(0)=480 y(1)=70
*   09-11 17:57:09.427: D/TouchHandler(14932): y(0)=480 y(1)=121
*   09-11 17:57:09.528: D/TouchHandler(14932): y(0)=480 y(1)=206
*   09-11 17:57:09.608: D/TouchHandler(14932): y(0)=480 y(1)=271
*   09-11 17:57:09.618: D/TouchHandler(14932): y(0)=480 y(1)=281
*   09-11 17:57:09.628: D/TouchHandler(14932): y(0)=447 y(1)=293
*   09-11 17:57:09.638: D/TouchHandler(14932): y(0)=447 y(1)=304
*   09-11 17:57:09.658: D/TouchHandler(14932): y(0)=428 y(1)=311
*   09-11 17:57:09.668: D/TouchHandler(14932): y(0)=419 y(1)=317
*   09-11 17:57:09.678: D/TouchHandler(14932): y(0)=415 y(1)=325
*   09-11 17:57:09.688: D/TouchHandler(14932): y(0)=413 y(1)=333
*   09-11 17:57:09.698: D/TouchHandler(14932): y(0)=411 y(1)=351
*   09-11 17:57:09.708: D/TouchHandler(14932): y(0)=411 y(1)=363
*   09-11 17:57:09.718: D/TouchHandler(14932): y(0)=411 y(1)=373
*   09-11 17:57:09.728: D/TouchHandler(14932): y(0)=411 y(1)=383
*   09-11 17:57:09.748: D/TouchHandler(14932): y(0)=480 y(1)=480
*   09-11 17:57:09.758: D/TouchHandler(14932): y(0)=459 y(1)=438
*   09-11 17:57:09.768: D/TouchHandler(14932): y(0)=459 y(1)=432
*   09-11 17:57:09.778: D/TouchHandler(14932): y(0)=445 y(1)=431
*   09-11 17:57:09.788: D/TouchHandler(14932): y(0)=439 y(1)=432
*   09-11 17:57:09.798: D/TouchHandler(14932): y(0)=437 y(1)=436
*   09-11 17:57:09.818: D/TouchHandler(14932): y(0)=439 y(1)=441
*   09-11 17:57:09.828: D/TouchHandler(14932): y(0)=443 y(1)=447
*   09-11 17:57:09.838: D/TouchHandler(14932): y(0)=450 y(1)=456
*   09-11 17:57:09.838: D/TouchHandler(14932): y(0)=459 y(1)=467
*   09-11 17:57:09.858: D/TouchHandler(14932): y(0)=469 y(1)=480
*   09-11 17:57:09.868: D/TouchHandler(14932): y(0)=476 y(1)=480
*   09-11 17:57:09.878: D/TouchHandler(14932): y(0)=479 y(1)=480
*   09-11 17:57:09.888: D/TouchHandler(14932): y(0)=480 y(1)=480

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:40:47.163

好吧，我已经在互联网上寻找了相当长的一段时间。
我遇到了[这篇文章](http://androidandme.com/2010/03/news/is-multitouch-broken-on-the-nexus-one/)，它描述了这个问题，即使是一段短视频和指向[google.play 上的应用程序的](https://play.google.com/store/apps/details?id=com.batterypoweredgames.mtvistest&feature=nav_result#?t=W251bGwsMSwyLDNd)链接，也可以用来在某些设备上重现这种行为。

谷歌工程师 Dianne Hackborn 在官方的[Android Developer Group](https://groups.google.com/forum/?fromgroups=#!msg/android-developers/0Ko-6o_Zorg/VZlRXSPd6XAJ)上对此进行了评论。

这似乎不是 Android 错误，因为 Android 只处理来自硬件的数据。因此，这很可能是驱动程序问题或我们开发人员无法控制的问题。

现在我正在寻找一种解决方法，因为我的应用程序中确实需要准确的多点触控手势。帮助将不胜感激。

# sql-server - 如何编写查询来解析列？

> ID：12374123
> 
> 赞同：0
> 
> 时间：2012-09-11T16:30:11.470
> 
> 标签：sql-server

我有一个表 tb1(item, status)，状态是`varchar(50)`. 例如，

```
item    status
item1   abc
item2   a
item3   ed
item4   ca 
```

我需要编写一个查询来选择那些状态值为（'b'，'d'，'f'）中的任何一个的项目。所以结果应该是`item1, item3`。如何编写查询来拆分列状态？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T16:34:26.947

```
select item, status
from tb1
where status like '%[bdf]%' 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/8824b/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T16:35:23.010

```
select *
from yourTable
where Contains(status, 'b OR d OR f') 
```

看这里的[例子](http://msdn.microsoft.com/en-us/library/ms187787.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T16:34:15.757

```
SELECT * FROM tb1 
WHERE status LIKE '%a%' OR status LIKE '%b%' OR status LIKE '%f%' 
```

# ios - CoreData - 有没有一种很好的方法来更新项目？

> ID：12374132
> 
> 赞同：10
> 
> 时间：2012-09-11T16:31:08.647
> 
> 标签：ios, core-data, upsert, nsmergepolicy

只是想知道是否有一种在 a 中**插入**项目的好方法`CoreData db`？

或者有没有办法让我将 CoreData 数据库视为一个集合？

我的意思是，如果我将一个项目插入数据库并且那里已经有一个相同的冗余项目，那么数据库会忽略它。有什么方便的方法吗？或者我每次插入时都必须查询以避免冗余？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-12-10T15:56:34.757

我最近读了这篇文章

[https://www.upbeat.it/upsert-in-core-data/](https://www.upbeat.it/upsert-in-core-data/)

基本上，首先在名称上创建一个约束，然后在 Core Data 上下文中指定 TrumpMergePolicy。

```
managedObjectContext.mergePolicy = NSMergeByPropertyObjectTrumpMergePolicy 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T18:01:37.087

否 - Core Data 无法知道您如何看待一个项目“相同”或“冗余”。这些词的定义几乎可以随着您创建的每个实体而改变 - 例如，企业中的部门可能具有唯一的名称，但多个人可以具有相同的名称（并且经常这样做）。

但是，您可以利用 Core Data 的查询能力，并使用 NSPredicate 进行快速查询，以查明具有您选择的标识符的记录是否已经存在。您可以将此查询分解为它自己的方法（可能在您的托管对象子类中），以便您可以方便地调用它。

# xcode - 在 Xcode 中创建蓝色文件夹

> ID：12374133
> 
> 赞同：17
> 
> 时间：2012-09-11T16:31:12.163
> 
> 标签：xcode

我正在处理一个现有项目，其中有一些蓝色文件夹存储一些图像参考。如果我创建正常的黄色文件夹，则不会读取图像。那么如何创建新的蓝色文件夹？

![在此处输入图像描述](../Images/c3b12142fe137449ed61c7bfcf8c1c4e.png)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-11T16:33:59.927

将文件夹拖到您的项目中，并确保**为任何添加的文件夹选择创建文件夹引用**

![在此处输入图像描述](../Images/4f0923865e8a48ade8af54cb7d5a7f7c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T09:53:52.957

要制作蓝色文件夹，您应该执行以下步骤，

1.  准备包含文件的文件夹结构。
2.  将该文件夹拖到 xcode 即项目导航盘中。
3.  选择“为任何添加的文件夹创建文件夹引用”选项。
4.  最后点击添加。

你会得到那个蓝色的文件夹。

谢谢你..

# iphone - 在 Tabbar 中显示 UIWebView，带有 TTWebController 等控件

> ID：12374136
> 
> 赞同：0
> 
> 时间：2012-09-11T16:31:26.790
> 
> 标签：iphone, objective-c, ios, three20

是否有任何适合与 a 一起使用的现有开源`UIWebView`控件（带有后退/前进按钮）`UITabBarController`？

我曾尝试使用`TTWebController`，但问题是按钮控件位于底部，因此它们与标签栏堆叠在一起，布局很奇怪。

如果任何开源 Web 控制器在视图顶部有按钮控件，我会更喜欢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:32:54.347

实现它的一种方法是子类`TTWebController`化，并在函数中重新定位 Web 控制器工具栏`loadView`：

```
///////////////////////////////////////////////////////////////////////////////////////////////////
- (void)loadView {
 [super loadView];

 _toobar.frame = CGRectMake(0,0, self.view.size.width, TTToolbarHeight());
} 
```

# powershell - 合并文件夹中多个文件的内容

> ID：12374140
> 
> 赞同：3
> 
> 时间：2012-09-11T16:31:39.493
> 
> 标签：powershell

我有大约 30 个目录，其中包含 .log 文件。我想进入每个文件夹并分别组合子目录中所有文件的文本。我不想合并所有子目录中所有文件的文本。

例子

我有一个名为 Machines 的目录

在`Machines\`我有

```
Machine2\
Machine3\
Machine4\ 
```

在每个`Machine*`文件夹中，我有：

```
1.log
2.log
3.log
etc.. 
```

我想创建一个可以执行以下操作的脚本：

第一：进入目录`Machine2`，合并该目录下所有文本文件的文本 第二：进入`Machine3`目录，合并该目录下所有文本文件的文本。

如果只有一个文件夹，我可以使用下面的，但我需要它循环几个子文件夹，所以我不必在下面的命令中输入子目录。

```
Get-ChildItem -path "W:\Machines\Machine2" -recurse |?{ ! $_.PSIsContainer } |?{($_.name).contains(".log")} | %{ Out-File -filepath c:\machine1.txt -inputobject (get-content $_.fullname) -Append} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T17:05:54.633

我认为递归解决方案会很好。给定一个目录，获取所有`*.log`文件的内容并转储到`COMBINED.txt`. 然后拉出所有子目录的名称，并为每个子目录重复。

```
function CombineLogs
{
   param([string] $startingDir)

   dir $startingDir -Filter *.log | Get-Content | Out-File (Join-Path $startingDir COMBINED.txt)

   dir $startingDir |?{ $_.PsIsContainer } |%{ CombineLogs $_.FullName }
}

CombineLogs 'c:\logs' 
```

# memory-leaks - 如何在 PHP 4 中清除垃圾

> ID：12374141
> 
> 赞同：0
> 
> 时间：2012-09-11T16:31:42.607
> 
> 标签：memory-leaks, php4

我写了一个应用程序。但是存在内存溢出的问题。有没有办法清除 PHP 4 中的所有垃圾值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:46:53.033

I think more information about your specific case and environment (I am just guessing that you are running PHP from a web server and not CLI) is needed. And you should look through your entire code yourself for places that can be optimized.

As you probably know, garbage collection is not a part of PHP 4\. Check out [unset](http://php.net/manual/en/function.unset.php) and [http://www.obdev.at/developers/articles/00002.html](http://www.obdev.at/developers/articles/00002.html) for some pointers.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:03:45.510

如果问题是内存溢出。您可以使用：

```
ini_set('memory_limit', '128M'); //or the quantity of memory you need 
```

这将扩展该脚本在 httpd.conf 上使用的默认内存。

注意：我不确定它是否适用于 php 4，但是，试一试。

# ruby - 在运行 RSpec 测试时启动 irb 以进行调试？

> ID：12374144
> 
> 赞同：1
> 
> 时间：2012-09-11T16:31:50.930
> 
> 标签：ruby, testing, rspec, irb

*在我的rspec*测试 运行期间如何启动*irb ？*

 *本质上，我希望能够玩各种东西，然后在程序的相应实例上运行我的*rspec测试。*我能够在程序的常规运行时成功地做到这一点，但是当我尝试在*rspec*测试运行时启动*irb时遇到问题。*

 *## 常规运行时间

`test.rb`

```
#!/usr/bin/env ruby
require 'irb'

puts 'hello world'
IRB.start
puts 'goodbye world' 
```

运行

```
$ ./test.rb 
hello world
1.9.3-p194 :001 > puts 'yo'
yo
 => nil 
1.9.3-p194 :002 > exit
goodbye world 
```

## *rspec*运行时

`test_spec.rb`

```
require 'spec_helper'
require 'irb'

describe "irb" do
  it "should print 'hello world', launch irb, upon exiting irb print 'goodbye world'" do
    puts 'hello world'
    IRB.start
    puts 'goodbye world'
  end
end 
```

运行

```
$ rake spec
/Users/username/.rvm/rubies/ruby-1.9.3-p194/bin/ruby -S rspec ./spec/test_spec.rb
Run options: include {:focus=>true}

All examples were filtered out; ignoring {:focus=>true}
hello world
1.9.3p194 :001 > require 'spec_helper'
 => false
1.9.3p194 :002 > require 'irb'
 => false
1.9.3p194 :003 >
1.9.3p194 :004 >   describe "irb" do
1.9.3p194 :005 >       it "should print 'hello world', launch irb, upon exiting irb print 'goodbye world'" do
1.9.3p194 :006 >           puts 'hello world'
1.9.3p194 :007?>         IRB.start
1.9.3p194 :008?>         puts 'goodbye world'
1.9.3p194 :009?>       end
1.9.3p194 :010?>   end1.9.3p194 :010?>
 => RSpec::Core::ExampleGroup::Nested_2
1.9.3p194 :010 >
goodbye world
.

Finished in 0.10321 seconds
1 example, 0 failures

Randomized with seed 62613
$ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T16:40:27.250

使用[撬](http://pryrepl.org/)。

简单、快速、语法高亮。安装后，你只需要写：

```
binding.pry 
```

在您的代码中停止执行并显示开发人员调试控制台

在你爱上 pry 之后，还有一个有用的 gem，叫做“pry-nav”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T22:20:20.587

你可能想检查一下`binding.repl`。它可以像 Pry 一样在运行时启动 IRB（和其他 ruby​​ 控制台）。例如，您会说，`binding.repl.irb`而不是`binding.pry`在您的 rspec 示例中。

[https://github.com/robgleeson/binding.repl](https://github.com/robgleeson/binding.repl)
$ gem install binding.repl

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T01:23:14.733

启动调试器然后访问 IRB 可能会起作用。

```
require 'spec_helper'
require 'ruby-debug' # Install the gem first

describe "irb" do
  it "should print 'hello world', launch irb, upon exiting irb print 'goodbye world'" do
    puts 'hello world'
    debugger
    puts 'goodbye world'
  end
end 
```

运行测试，它应该会命中调试器，你应该会看到一个 rdb 提示符。启动 IRB。

```
(rdb:1) irb
1.9.3p194 :001 > 
```**

# android - 如何在Android中动态调用资源中的颜色？

> ID：12374146
> 
> 赞同：7
> 
> 时间：2012-09-11T16:31:58.023
> 
> 标签：android, xml, user-interface, imageview

我正在尝试使用在我的`res/values/colors.xml`文件中创建的颜色。但是当我动态调用时，程序不会编译，而是建议：`Should pass resolved color instead of a resource id.`

色标：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
 <color name="gold">#857500</color>
  <color name="green">#0B3B0B</color>
</resources> 
```

活动代码：

```
title.setTextColor(R.color.green); 
help.setTextColor(R.color.gold);
settings.setTextColor(R.color.gold);
logout.setTextColor(R.color.gold);
profile.setTextColor(R.color.green); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-11T16:31:58.023

将代码更改为以下内容：

```
title.setTextColor(getResources().getColor(R.color.green)); 
help.setTextColor(getResources().getColor(R.color.gold));
settings.setTextColor(getResources().getColor(R.color.gold));
logout.setTextColor(getResources().getColor(R.color.gold));
profile.setTextColor(getResources().getColor(R.color.green)); 
```

# drupal - Drupal 所见即所得插件 API 文档

> ID：12374150
> 
> 赞同：0
> 
> 时间：2012-09-11T16:32:13.030
> 
> 标签：drupal, documentation, wysiwyg

有人知道在哪里可以找到像样的 Drupal 项目 API 文档吗？具体来说，我想查看 WYSIWYG 插件 API 文档，但我找不到任何实际记录该文档的地方，即使它在 WYSIWYG 项目中被引用了很多次。

如果那里有一些好的站点，其中包含我希望获得的有关 Drupal 的所有文档，我将不胜感激，因为 drupal.org 目前没有帮助。我尝试通过文档来掌握 Drupal，尝试在不使用搜索引擎的情况下找到任何东西是很**痛苦**的，但是即使使用搜索引擎，我也无法在 WYSIWYG 插件 API 上找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T06:45:46.037

Drupal 所见即所得的组：[https ://groups.drupal.org/wysiwyg](https://groups.drupal.org/wysiwyg)

祝你好运^^

# postgresql - 在 Erlang 中为 PostgreSQL 编写网关是个好主意吗？

> ID：12374153
> 
> 赞同：0
> 
> 时间：2012-09-11T16:32:27.417
> 
> 标签：postgresql, erlang, gateway

我正在用 Erlang 编写一个 Web 应用程序，并且想将我的数据存储到 PostgreSQL。

我的应用程序中有两种资源。一种非常重要，而另一种则不那么重要。

*   对于重要的，不允许数据丢失。
*   对于不太重要的，由于系统故障导致的数据丢失是可以的。

我想获得最大的效率并想出了这样一个想法：为PostgreSQL写一个网关。网关是一个`gen_server`，业务逻辑（BL）部分可以与网关通信以存储资源。

*   为了存储重要的资源，BL部分将要存储的资源发送到网关，并**阻塞**到`receive`一个消息（成功或失败），最后以网页响应用户。
*   对于存储不太重要的资源，BL部分只将资源发送到网关**而不阻塞**。发送资源后，BL 部件直接以网页响应。

我对这个想法的期望是*每个请求的秒数更少*，因为*大多数资源都不那么重要*。但我想知道这是否是一个好主意，或者换句话说，我真的能得到我所期待的吗？

请根据您的经验或一些可靠的“网络搜索结果”来回答。谢谢。:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T18:39:08.880

我可以看到你的提议有两个问题：

1.  所有发送到 gen_server 网关的消息都会被序列化（阻塞或非阻塞）
2.  如果 gen_server 网关进程崩溃，您至少会丢失进程邮箱中的消息。

我要做的是创建一个负责数据库交互的帮助模块（不是进程）。此过程将使用支持连接池的 postgresql 库（因此对 DB 的调用可以具有一些并行性）。

如果您希望对不太重要的资源执行非阻塞 DB 操作，只需生成一个进程来执行 DB 交互并继续。

一些指向 postgresql erlang 库的链接（我没有使用过）：

[Erlang 中的 Postgresql 连接池](https://stackoverflow.com/questions/7767415/postgresql-connection-pooling-in-erlang)

[http://zotonic.com/page/519/epgsql-postgresql-driver](http://zotonic.com/page/519/epgsql-postgresql-driver)

# paypal - Paypal 定期订阅付款，但有积分

> ID：12374154
> 
> 赞同：1
> 
> 时间：2012-09-11T16:32:29.743
> 
> 标签：paypal, paypal-subscriptions, paypal-adaptive-payments, recurring-billing

我有一个网站，我想设置基于订阅的访问权限。我真的很喜欢使用 Paypal Express Checkout 来执行此操作的想法，因此我没有责任自己存储客户的敏感计费信息，也无需负责每个月的实际计费。

然而...

如果客户向我推荐另一位客户，我还想奖励他们一个月的免费订阅。例如，如果您在 9 月 10 日向我推荐了一位新客户，那么您不会在 10 月收到账单（您已经支付了整个 9 月的费用）。如果您在 9 月 10 日向我推荐三个，那么直到 1 月您才再次按月收费。

我对通过 Express Checkout 进行定期付款的理解是，如果我取消 10 月份的订阅，客户会收到一封电子邮件说订阅已被取消，然后当我在 11 月重新启用它时，他们也会收到一封来自贝宝。我什至可以在没有客户同意的情况下重新启用订阅吗？

哪种 Paypal 计费解决方案最适合我的需求？我是否必须每月存储所有客户的账单信息并发送个人身份验证和捕获请求？是否存在允许频繁取消和取消取消的定期付款设置？我应该让定期的定期付款发生，然后将帐户退回吗？

这一切似乎都很尴尬，但我对此很陌生，所以可能会有一些我遗漏的东西。任何帮助或建议将不胜感激！

干杯。

# java - 同时启动和终止线程

> ID：12374158
> 
> 赞同：0
> 
> 时间：2012-09-11T16:32:45.393
> 
> 标签：java, multithreading

我说过两个线程 t1 和 t2 我想同时启动（同时），每次调用`System.out.println()`打印到控制台，然后同时完成。

请告知如何通过执行器框架来实现这一点。我正在尝试在执行器框架本身的帮助下做到这一点.. !!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T16:33:36.650

您可以使用 2 `CountDownLatch`es 或 a`CyclicBarrier`来做到这一点。例如：

```
final CountDownLatch start = new CountDownLatch(2);
final CountDownLatch end = new CountDownLatch(2);

Runnable r1 = new Runnable() {
    @Override
    public void run() {
        try {
            start.countDown();
            start.await();
            System.out.println("In 1");
            end.countDown();
            end.await();
        } catch (InterruptedException ex) {
            Thread.currentThread().interrupt(); //restore interruption status
        }
    }
};
Runnable r2 = new Runnable() {
    @Override
    public void run() {
        try {
            start.countDown();
            start.await();
            System.out.println("In 2");
            end.countDown();
            end.await();
        } catch (InterruptedException ex) {
            Thread.currentThread().interrupt(); //restore interruption status
        }
    }
}; 
```

# ant - 设置 Ant / Ivy

> ID：12374161
> 
> 赞同：1
> 
> 时间：2012-09-11T16:33:07.447
> 
> 标签：ant, ivy

所以，假设我已经安装了 SVN 并在本地安装了 ANT / Ivy。

我想让常春藤配置的“共享”部分指向服务器上的某种共享。我需要如何设置？

我知道我必须挖掘 ivy jar 并提取 ivysettings 文件并修改共享存储库。

因此，让我们假设我的 Intranet 上有一台服务器，位于 MyServer.intranet.net 并且我的团队的文件夹位于 /path/to/NetAdmin 下（因此完整路径将是 MyServer.intranet.net/path/to/NetAdmin ）如何我将此设置为共享库的团队存储库吗？我是否只需指定它，当我打包项目时，它会在那里写入依赖项？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T01:54:05.183

这是我所做的：

*   我创建了一个名为`ivy.dir`.
*   在这个`ivy.dir`项目中，我有最新的 ivy.jar。
*   在 中`ivy.dir`，我有`ivysettings.xml`我们环境的设置。例如，我们为自己的 jars 使用本地 Artifactory Maven 存储库。项目`ivysettings.xml`中的`ivy.dir`指出了这一点。
*   我创建了一个名为`ivy.tasks.xml`. 这是一个 Ant 构建文件。

`ivy.tasks.xml`看起来像这样：

```
<project name="Ivy.Tasks"
    xmlns:ivy="http://ant.apache.org/ivy"
    xmlns:jacoco="antlib:org.jacoco.ant">

    <property environment="env"/>

    <!-- Add Ivy Tasks -->
    <taskdef uri="http://ant.apache.org/ivy"
        resource="org/apache/ivy/ant/antlib.xml">
        <classpath>
            <fileset dir="${ivy.dir}">
                <include name="ivy*.jar"/>
            </fileset>
        </classpath>
    </taskdef>
    <ivy:settings file="${ivy.dir}/ivysettings.xml"/>
</project> 
```

请注意，我有自己的 Ivy 设置，谢谢。我没有必要修改其中的那个`ivy.jar`（尽管我可以这样做，因为每个人都会使用我的`ivy.jar`文件！）。我的`ivysettings.xml`样子是这样的：

```
<ivysettings>

    <!-- I'll explain this part below -->
    <property name="env.EXECUTOR_NUMBER" value="0" override="false"/>
    <caches
        defaultCacheDir="${ivy.default.ivy.user.dir}/cache-${env.EXECUTOR_NUMBER}"
        resolutionCacheDir="${ivy.dir}/../target/ivy.cache"/>

    <!-- Just the standard stuff you find in the `ivysettings.xml in the ivy.jar -->
    <settings defaultResolver="default"/>
    <include file="${ivy.dir}/ivysettings-public.xml"/> <!-- This one is different -->
    <include url="${ivy.default.settings.dir}/ivysettings-shared.xml"/>
    <include url="${ivy.default.settings.dir}/ivysettings-local.xml"/>
    <include url="${ivy.default.settings.dir}/ivysettings-main-chain.xml"/>
    <include url="${ivy.default.settings.dir}/ivysettings-default-chain.xml"/>
</ivysettings> 
```

最大的变化是`ivysetting-public.xml`文件：

```
<ivysettings>
    <resolvers>
        <ibiblio name="public"
            m2compatible="true"
            checkmodified="true"
            root="http://repos.vegicorp.com/artifactory/libs-release" />
    </resolvers>
</ivysettings> 
```

它指向我的本地 Maven 存储库——我的 Artifactory 服务器。

现在，对于使用 Ivy 的开发人员，他们所要做的就是：

*   在 Subversion 项目的根目录中，添加一个`svn:external`. 这`svn:external`将用于将我的`ivy.dir`项目带入他们的 Subversion 项目。
*   在 build.xml
    *   `build.xml`在定义中为它们添加一个 Ivy 命名空间`<project>`定义。
    *   将属性设置`ivy.dir`为`${basedir}/ivy.dir。
    *   使用`<import>`任务导入`${ivy.dir}/ivy.tasks.xml`他们的`build.xml`文件。

像这样的东西：

```
<project name="post-a-matic" default="package" basedir="."
    xmlns:ivy="http://ant.apache.org/ivy">

    <property name="ivy.dir" value="${basedir}/ivy.dir"/>
    <import file="${ivy.dir}/ivy.tasks.xml"/>

    <!-- A whole bundle of properties are set -->

    <target name="clean">
        <delete dir="${target.dir}"/>
        <ivy:cleancache/>   <!-- Look: They have access to Ivy! -->
    </target>

    <target name="-resolve">
        <ivy:resolve/>
    </target>

    <target name="compile"
        depends="-resolve">

       <ivy:cachpath 
           pathid="main.classpath" 
           conf="compile,provided"/>

       <!-- Boy that's easy! -->

       <javac srcdir="${main.srcdir}"
           destdir="${main.destdir}"
           classpathref="main.classpath"/>
   </target>

   <!-- On and on --> 
```

这解决了很多问题：

*   您可以更新`ivy.settings`并且每个人都将拥有更新的设置。这最终对我们非常重要，因为我们使用 Jenkins，我希望 Jenkins 清理每个构建的 ivy 缓存。哎呀！这会清除同时执行的构建中的常春藤缓存！我通过更改`ivysettings.xml`文件为每个 Jenkins 构建执行程序定义不同的 Ivy 缓存解决了这个问题。在 Jenkins 服务器中，您有名为`$HOME/.ivy2/cache-0`,`$HOME/.ivy2/cache-1`等的常春藤缓存。每个执行程序都可以删除它自己的常春藤缓存，而不会影响其他人。同时，用户将只有`$HOME/.ivy2/cache-0`.
*   您还可以在新罐子出来时更新 Ivy。你更新了你的 Ivy jar 文件，每个人都得到了迟到的东西。
*   最重要的当然是 Ivy 会在项目签出时自行安装。
*   ***还有一个额外的特殊奖励***：您可以使用您的`ivy.dir`和`ivy.tasks.xml`文件来安装其他任务。例如，我们的每个项目都必须通过[Findbugs](http://findbugs.sourceforge.net)、 [PMD](http://pmd.sourceforge.net)、 CPD （PMD 项目的一部分[Checkstyle](http://checkstyle.sourceforge.net) ）运行自己，并使用[JaCoCo](http://www.eclemma.org/jacoco/)进行测试覆盖。

这些项目中的每一个都包含一个 jar 文件和一个`<taskdef>`用于将任务定义拉入 Ant 的文件。而且，您也如何使用这些任务？它们没有在标准 Ant 模型中定义。开发人员不知道如何使用它们。

我已将这些 jar 添加到我的`ivy.dir`项目中，并将所有这些任务定义安装到我的`ivy.tasks.xml`文件中。我还为大多数这些任务定义了易于使用`<macrodef>`，因此开发人员很容易使用它们。事实上，我什至包含了旧的 Ant-Contrib 任务只是为了好玩。

现在，一旦你添加`ivy.dir`到你的项目中，你就拥有了所有这些额外的任务，并且你没有任何东西可以安装在你的机器上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T21:19:34.463

你不需要改变常春藤罐子。只需在 ivysettings 文件中创建文件系统解析器并发布到此文件。这是一个例子：

*   [本地存储库的好常春藤教程？](https://stackoverflow.com/questions/1200762/good-ivy-tutorial-for-local-repository/2279596#2279596)

您会发现 ivy 非常灵活，几乎可以支持任何托管文件的机制。

就个人而言，我会考虑安装像[Nexus](http://www.sonatype.org/nexus/)或[Artifactory](http://www.jfrog.com/home/v_artifactory_opensource_overview)这样的 Maven 存储库管理器，并使用它来托管您的构建依赖项和构建输出。从长远来看，这要容易得多，尤其是在您进行 Java 开发时。

# jquery - 更改标签 jquery 的背景颜色

> ID：12374171
> 
> 赞同：1
> 
> 时间：2012-09-11T16:33:50.740
> 
> 标签：jquery, css

我正在使用 jquery 在选择时更改选项卡的字体和背景颜色。当我选择一个选项卡时，字体更改有效，但背景颜色无效。任何人都可以输入我做错了什么吗？

jQuery脚本：

```
<script type="text/javascript">
$(document).ready(function() {

    $('.tabs a').click(function(){
        switch_tabs($(this));
    });

    switch_tabs($('.defaulttab'));

});

function switch_tabs(obj)
{
    $('.tab-content').hide();
    $('.tabs a').removeClass("selected");
    var id = obj.attr("rel");

    $('#'+id).show();
    obj.addClass("selected");
} 
</script> 
```

CSS代码：

```
ul.tabs li a {
    display:block;
    float:left;
    padding:3px;
    font-size:1em;
    background-color: #e0e0e0;
    color:black;
    text-decoration:none;
    border-color: white;
}
.selected {
    font-weight:bold;
    background-color:#3399FF;
    color:white;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:36:51.497

更改 CSS 选择器：

从`.selected`到`ul.tabs li a.selected`。

# java - 将 Wicket 值插入 Java 中的 JavaScript 函数

> ID：12374173
> 
> 赞同：2
> 
> 时间：2012-09-11T16:33:59.393
> 
> 标签：java, javascript, html, wicket

我正在使用 HTML 和 Wicket 编写一个网络应用程序。

在我的 HTML 页面中，我有一个小的警报脚本，我需要检票口将一个值插入到警报的消息中。我的代码是：

### HTML 代码：

```
<script>
   function version(){
   alert(<sub wicket:id="version">);
   } 
</script>
<img class="logo" src="images/logo.png" alt="" width="68" height="21" onclick="version()"/> 
```

### 爪哇：

```
add(new Label("version","1.0.0"); 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T16:43:08.153

Wicket 不会处理`<script>`. 但是您可以通过页面类（或任何其他`Component`）中的标头贡献添加 JavaScript 函数。

检票口 1.5：

```
@Override
public void renderHead(IHeaderResponse response) {
    super.renderHead(response);
    response.renderJavaScript("function version(){alert('" + "1.0.0" + "');}", "version");
} 
```

检票口 6.0：

```
@Override
public void renderHead(IHeaderResponse response) {
    super.renderHead(response);
    response.render(JavaScriptHeaderItem.forScript("function version(){alert('" + "1.0.0" + "');}", "version"));
} 
```

另一种方法是渲染`Label`输出函数的 a：

```
add(new Label("script", "function version(){alert('1.0.0');}").setEscapeModelStrings(false)); 
```

在你的标记中

```
<script wicket:id="script" />
<img class="logo" src="images/logo.png" alt="" width="68" height="21" onclick="version()"/> 
```

# jquery - IE 中的 CSS 图像大小问题...响应式设计

> ID：12374174
> 
> 赞同：0
> 
> 时间：2012-09-11T16:34:00.203
> 
> 标签：jquery, css, internet-explorer-8, responsive-design

我正在努力将网站转换为响应式网站，并且在调整图像大小和一些 jquery 元素的位置时遇到问题。

请看[这个测试站点](http://www.gymnasticsvillage.com/unifirst)。减小浏览器宽度（我设置为 768），在 Firefox 中看起来一切正常。

在 IE8 中，除了滑块中图像的大小和滑块标题的位置外，一切正常。

图像不会缩小以适应较小的视口。至于幻灯片上元素的定位，我希望有一个解决方案，因为我想我不能在页面上使用 IE 特定样式，因为它不是响应代码的一部分......或者我可以吗？

我不知所措！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:44:40.537

我的猜测是媒体查询使用的 CSS 选择器

```
#slider > section > deiv > div img { 
    width: 768px;
    height: 251px;
} 
```

尝试将部分标记更改为其他内容或直接在 CSS 选择器中选择图像。IE8 不支持 section 标签，因为它是一个 HTML5 元素，因此媒体查询无法选择 section 标签。

您可以将 CSS 选择器更改为：

```
#slider * img {
    width: 768px;
    height: 251px;
} 
```

#slider * img 选择器将获取 ID 为滑块的元素的任何子/孙子。

有关部分标签的更多信息和浏览器支持，请访问：[http ://www.w3schools.com/html5/tag_section.asp](http://www.w3schools.com/html5/tag_section.asp)

编辑：经过进一步研究，看起来 IE8 不支持媒体查询。您可以使用其他替代方法来模拟带有 javascript 的媒体查询。查看之前的问题： [IE8 support for CSS Media Query](https://stackoverflow.com/questions/5769493/ie8-support-for-css-media-query)

它建议使用[http://code.google.com/p/css3-mediaqueries-js/](http://code.google.com/p/css3-mediaqueries-js/)在 IE 8 中实现此功能。

它看起来相对容易实现，因为基本上你所做的就是在应用程序中包含这个 JS 文件并编写媒体查询，就像它们是为原生支持它的浏览器编写的一样。

# python - Python Jython 全局变量的使用

> ID：12374176
> 
> 赞同：1
> 
> 时间：2012-09-11T16:34:02.583
> 
> 标签：python, scope, jython, global

我对 python 全局变量及其正确用法的理解存在问题。代码的第一位工作正常，第二位抛出异常“NameError：未定义全局名称'选择'”。我确定我在这里遗漏了一些简单的东西，但我看不到它是什么。

我想将一个侦听器与许多事件生成器中的每一个相关联，然后使用 getChoices 方法获取每个生成器所做选择的字典。

```
#Working code
class Listener1():
  chosen = "0"
  def __init__(self, choice):
    self.choice = choice

  def actionPerformed(self, event):            
    global chosen
    chosen = self.choice

  @staticmethod
  def getChoices():
    return chosen

e1 = Listener1('evt1')
e1.actionPerformed('abc')
print Listener1.getChoices() 
```

失败的代码

```
class Listener2():  
  chosen2 = {'a':-1}
  def __init__(self, choice):
    self.choice = choice
    global chosen2
    chosen2[self.choice] = 'unset'

  def actionPerformed(self, event):
    val = event
    global chosen2
    chosen2[self.choice] = val

  @staticmethod
  def getChoices():
    return chosen2

e2 = Listener2('evt2')
e2.actionPerformed('def')
e3 = Listener2('evt3')
e3.actionPerformed('ghi')
print Listener2.getChoices() 
```

**脚注：如果我将对全局变量selected2**的第一个引用移动到类定义之前的行而不是之后的行，则 Listener2 类可以正常工作。

感谢下面的答案，代码重写为：

```
class Listener3():
  chosen3 = {}
  def __init__(self, choice):
    self.choice = choice
    if choice is not None:
        self.chosen3[self.choice] = 'unset'

  def actionPerformed(self, event):
    val = event
    self.chosen3[self.choice] = val

  def getChoices(self):
    return self.chosen3

e1 = Listener3('evt1')
e1.actionPerformed('abc')
e2 = Listener3('evt2')
e2.actionPerformed('def')
e3 = Listener3('evt3')

print Listener3(None).getChoices()
{'evt1': 'abc', 'evt2': 'def', 'evt3':'unset'} 
```

除了变得更简单之外，现在还可以完美运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:39:11.003

`global`你认为的也不行。在这两种情况下`chosen`，`chosen2`都是*类*变量，而不是全局变量。

但是当您声明`chosen`为全局变量并分配给它时，python 愉快地*创建*了一个全局变量（与 分开`Listener1.chosen`）并存储了您的值。

但是因为`chosen2`你没有给它分配任何东西；您试图将其视为 dict ，但您没有通过赋值创建变量，因此失败。

您想`self.chosen2`改用；作为一个类变量，它将可用于`Listener2`. 您也可以使用`Listener2.chosen2`. 对于`chosen`，您可以使用`Listener1.chosen`来引用它。`global`关键字可以完全删除。

无论如何，将变量声明为 as`global`并不意味着*超出我当前的范围*。相反，它意味着*在模块范围内*，因此始终在您的函数、类和方法定义之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:38:50.247

您可以重新创建相同的错误：

```
global chosen2 #you're not creating chosen2, just saying you're about to create it, and when you do - it should be a global variable
chosen2[2]=2 #chosen2 has yet to be defined so how can you set anything? 
```

您正在尝试设置一个尚未定义的对象的属性`two`，首先您必须说明您希望它是列表还是字典（或其他）。

```
global chosen2
chosen2={}
chosen2[2]=2 
```

*如前所述，我认为您不希望它是全局的（因为您希望能够创建具有不同选择的值的类实例！*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T16:39:48.297

你不需要在`global`这里使用。在您的示例中，`chosen`和`chosen2`是类属性。代替：

```
global chosen
chosen = self.choice 
```

你只需写：

```
self.chosen = self.choice 
```

当您`chosen2`在类之前定义时，您实际上是在所`global`引用的范围内定义它。当您在类范围*内*定义它时，它是一个由所有实例共享的类属性。

*更新：*正如所指出的，直接分配给类属性不是你想要的，因为它会在实例上创建一个新属性，从而在类上屏蔽它。但在你的`Listener2`例子中，这会很好：

```
def actionPerformed(self, event):
    self.chosen[self.choice] = event 
```

在这里，您不是覆盖`.chosen`，而是将一个项目添加到它所引用的字典中，因此该类将为每个侦听器保留最新事件的记录。

# php - IIS 7.5 上的 Codeigniter 1.7

> ID：12374177
> 
> 赞同：0
> 
> 时间：2012-09-11T16:34:02.810
> 
> 标签：php, codeigniter, iis-7, url-rewriting, iis-7.5

我想向您寻求有关在 IIS 7.5 版上部署 Codeigniter 应用程序的帮助。我已经尝试在这里阅读与 Codeigniter 和 IIS 相关的其他帖子，但它们都不起作用。我使用 CodeIgniter 1.7 开发了一个在 Apache 中运行良好的应用程序，但我无法让它在 Windows 7 Ultimate 下的 IIS 7.5 中运行。

![phpconfig的IIS数据](../Images/bc8eb3df61af627c57d5c7224aef17ea.png)

首先，php 已经在服务器中工作，我按照所有步骤使其工作，我还安装了 IIS_UrlRewriteModule，我认为这是 php 应用程序工作和使用 htaccess 等文件所必需的。（附件是服务器中phpinfo的JPG）。这是一个本地服务器 IIS 7.5。

之后确保 PHP 工作正常，我将 Web 应用程序的文件夹放在 C:\inetpub\wwwroot\ 中，这是我在 apache 中使用的 .htaccess：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /application/index.php?/$1 [L]

RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /application/index.php?/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ application/index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 index.php
</IfModule> 
```

我读到，使用 IIS 你必须使用 web.config 文件，所以我根据 stackoverflow 的另一篇文章的示例创建了一个文件，它具有以下代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="MyRule"> <match url="^(.*)$" /> 
                    <conditions>
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                    </conditions>
                    <action type="Rewrite" url="index.php/{R:1}" appendQueryString="false" />
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

但是，当我转到“http://localhost/application”时，我得到了这个：

![网站文件目录](../Images/004be96b91b461834f2196ba3e4d9305.png)

如果我输入“http://localhost/application/index.php”，我会得到错误 500。如果我在应用程序根目录中只有 web.config，或者如果我在根目录中有 .htaccess，我会遇到同样的情况。我不知道该怎么办，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-14T11:05:38.397

首先不需要web.config！然后检查您的普通 php 代码（没有 codeigniter）是否在 IIS 下工作正常。如果是，则必须通过添加 2 行代码来修改 Code Igniter 的 php 文件之一。从 Apache 复制使用**Code Igniter**的 Web 应用程序目录。

1.  转到您的 Web 应用程序目录下的***系统***目录。因此，当您打开 Web 应用程序目录时，您应该立即看到*系统*目录。
2.  然后进入***core***目录，在编辑器中打开***URI.php***，找到一个名为***_parse_request_uri()***的函数。
3.  在函数的开头只需添加以下行：

    ```
    if(!isset($_SERVER['REQUEST_URI']))
        $_SERVER['REQUEST_URI'] = $_SERVER['PHP_SELF']; 
    ```

所以在添加上面两行之后，修改后的函数应该是这样的，

```
 protected function _parse_request_uri()
    {
        if(!isset($_SERVER['REQUEST_URI']))
            $_SERVER['REQUEST_URI'] = $_SERVER['PHP_SELF'];

        if ( ! isset($_SERVER['REQUEST_URI'], $_SERVER['SCRIPT_NAME'])) 
```

保存 URI.php，修改后的代码应该可以在 IIS 和非 IIS 网络服务器（包括 Apache）上运行。（在 Apache 下修改的行没有效果！所以如果您不小心将相同的代码复制到 Apache 中，请不要担心。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T17:17:23.173

好吧，最后经过一点测试，我修复了它，感谢上帝。首先我遇到了 php.ini 的问题，因为扩展目录错误，所以当它试图找到 mysql 和 mssql 扩展时，它在 PHP 日志中给了我一个错误。之后我修改了 IIS 管理器中的处理程序映射，我编辑了我为 PHP 创建的模块映射，在请求限制部分我检查了“仅当请求映射到文件时才调用处理程序”，然后我修改了 web.config像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="MyRule"> <match url="^(.*)$" /> 
                    <conditions>
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                    </conditions>
                    <action type="Rewrite" url="/application/index.php?/{R:1}" appendQueryString="false" />
                </rule>
            </rules>
        </rewrite>
        <defaultDocument>
            <files>
                <add value="index.php" />
            </files>
        </defaultDocument>
        <security>
         <requestFiltering>
            <hiddenSegments applyToWebDAV="false">
               <add segment="application" />
               <add segment="system" />
            </hiddenSegments>
         </requestFiltering>
      </security>
    </system.webServer>
</configuration> 
```

所以现在它可以工作了：D。

# android - 如何像示例中一样创建 Android 图像滑块

> ID：12374178
> 
> 赞同：2
> 
> 时间：2012-09-11T16:34:06.147
> 
> 标签：android, image, slider

我收到了在活动图像滑块的上半部分创建的特定请求，如下所示：

![在此处输入图像描述](../Images/639138f1c721964ebc605921e5f7c6a7.png)

与图片的不同之处在于我每边只有 2 件物品。

每个图像都是可点击的项目，应该在它自己的活动中打开。

有谁知道像这样现成的免费滑块？

我从来没有在android上见过这样的东西，也不知道要搜索什么。

天呐！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:59:45.760

它看起来像 CarouselLayout，但有一些修改。只需谷歌它或查看一个人最近在 stackoverflow 上发布的帖子： [https ://stackoverflow.com/questions/12424296/android-carousel](https://stackoverflow.com/questions/12424296/android-carousel)

# desire2learn - desire2learn api添加内容

> ID：12374182
> 
> 赞同：1
> 
> 时间：2012-09-11T16:34:24.437
> 
> 标签：desire2learn

每当我对“/d2l/api/le/(D2LVERSION: version)/(D2LID: orgUnitId)/content/modules/(D2LID: moduleId)/structure/”进行 GET 调用时，我都会在提供的 moduleId 中获得内容列表结构体。但是，当我进行 POST 调用时，我收到一个 Page Not Found 错误。我已将 orgUnitId 替换为要添加内容的课程的 ID，并将 moduleId 替换为要插入内容的模块的 ID。这是我发送的 JSON 块：

```
{"StartDate":null,
"Title":"My Test File",
"Type":1,
"ShortTitle":"MTF",
"TopicType":3,
"EndDate":null,
"IsHidden":false,
"Url":"http://somecollege.edu/",
"IsLocked":false} 
```

我不明白为什么我在帖子上而不是在获取时收到页面未找到错误。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:53:48.337

我们能够在我们的测试服务器上成功发布类似的链接主题。HTTP 数据包（由 wireshark 捕获）如下所示：

```
POST /d2l/api/le/1.2/8083/content/modules/24980/structure/?x_t={timestamp}&x_a={app_id}&x_b={user_id}&x_d={user_sig}&x_c={app_sig} HTTP/1.1\r\n
Host: {test_hostname}\r\n
Content-Length: 186\r\n
Content-Type: application/json\r\n
Accept-Encoding: identity, deflate, compress, gzip\r\n
Accept: */*\r\n
\r\n

JavaScript Object Notation: application/json
Object
    Member Key: "StartDate"
        Null value
    Member Key: "TopicType"
        Number value: 3
    Member Key: "ShortTitle"
        String value: MTF
    Member Key: "Title"
        String value: My Test File
    Member Key: "Url"
        String value: http://www.desire2learn.com/
    Member Key: "IsHidden"
        False value
    Member Key: "IsLocked"
        False value
    Member Key: "EndDate"
        Null value
    Member Key: "Type"
        Number value: 1 
```

下面是 JSON 数据作为发送的 UTF-8 字符串打印出来的样子：

```
{"StartDate": null, "TopicType": 3, "ShortTitle": "MTF", "Title": "My Test File", "Url": "http://www.desire2learn.com/", "IsHidden": false, "IsLocked": false, "EndDate": null, "Type": 1} 
```

我认为我们的 JSON 和您的 JSON 之间没有显着差异，因此问题可能出在您实际发送的数据包上。404 表明您正在使用的路线与应有的路线不完全一致（例如，路线中的“结构”后面应该有一个斜杠）。

您也可能会遇到发起呼叫的用户上下文的权限问题。请注意，*查看*课程内容（和结构）的角色权限不同于*创建*和*管理*课程内容的权限。您应该确保进行调用的用户上下文具有授予其适当权限的角色，该权限不仅可以查看课程内容，还可以创建和管理内容。

如果这些建议都没有帮助，那么我建议升级到下一个支持级别（使用 D2L 的 Valence 问题跟踪器打开问题，或联系 Valence 支持电子邮件地址），以便他们可以更直接地帮助您并提供更多详细信息向前。

# javascript - 如何在模块窗口中捕获 Flash？

> ID：12374184
> 
> 赞同：2
> 
> 时间：2012-03-02T22:19:47.197
> 
> 标签：javascript, html, flash

有没有办法捕捉在 Flash 播放器模块中播放的视频？从我看到的没有缓存或至少播放器设置设置为无缓存和无存储。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-03-07T18:35:57.933

Replay Media Catcher 是一个不错的程序，[http://applian.com/download-videos/](http://applian.com/download-videos/)可以捕捉flash流

这是更多类似程序的列表

[http://stream-recorder.com/forum/record-rtmp-flash-video-flv-stream-embedded-t2324.html](http://stream-recorder.com/forum/record-rtmp-flash-video-flv-stream-embedded-t2324.html)

# javascript - 设置画布渲染器的 x 和 y 位置

> ID：12374186
> 
> 赞同：0
> 
> 时间：2012-09-11T16:35:19.723
> 
> 标签：javascript, html, three.js

Three.js 可以轻松管理画布渲染器的宽度和高度：

```
renderer = new THREE.CanvasRenderer();
renderer.setSize( 500, 300 ); 
```

但是仍然找不到设置该对象的 x 和 y 的方法，我不想从索引 (0,0) 开始播放它，我查看了`CanvasRenderer.js`类但我没有得到解决方案。有没有办法这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:50:29.500

我不确定这是否回答了您的问题，但画布可以像任何其他 DOM 元素一样在页面上移动。

所以你可以做这样的事情：

```
renderer.domElement.style.position = 'absolute';
renderer.domElement.style.left = '100px'; 
```

您也可以通过 CSS 文件执行此操作。

# python - 递归查找表达式的深度

> ID：12374193
> 
> 赞同：6
> 
> 时间：2012-09-11T16:35:44.023
> 
> 标签：python, recursion, tracking, depth

我正在尝试使用递归来查找“表达式”的深度，即嵌套元组有多少层：例如，

```
depth(('+', ('expt', 'x', 2), ('expt', 'y', 2))) => 2

depth(('/', ('expt', 'x', 5), ('expt', ('-', ('expt', 'x', 2), 1), ('/', 5, 2)))) => 4 
```

基本上，我认为我需要检查（从外到内）每个元素是否是元组的一个实例，然后如果是，则递归调用深度函数。但是我需要找到一种方法来确定哪一组递归调用具有**最大**的深度，这就是我被困的地方。这是我到目前为止所拥有的：

```
def depth3(expr):
    if not isinstance(expr, tuple):
        return 0
    else:
        for x in range(0, len(expr)):
            # But this doesn't take into account a search for max depth
            count += 1 + depth(expr[x])
    return count 
```

对解决此问题的好方法的想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-11T16:39:07.063

您在正确的轨道上，但不是使用 找到“总”深度，而是`count += 1 + depth(expr[x])` 使用`max`找到最大值：

```
def depth(expr):
    if not isinstance(expr, tuple):
        return 0
    # this says: return the maximum depth of any sub-expression + 1
    return max(map(depth, expr)) + 1

print depth(("a", "b"))
# 1
print depth(('+', ('expt', 'x', 2), ('expt', 'y', 2)))
# 2
print depth(('/', ('expt', 'x', 5), ('expt', ('-', ('expt', 'x', 2), 1), ('/', 5, 2)))) 
# 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:42:37.857

仅伪代码（不保证编译，更不用说运行）：

```
深度（expr）：
  如果不是 isinstance(expr, tuple)：
    返回 0
  别的：
    米深度 = 0
    对于范围内的 x (0, len(expr))：
      d = 深度（expr[x]）
      如果 d > mdepth：
        mdepth = d
    返回 mdepth+1

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T17:00:26.893

在这里，试试这个——它是一个函数式编程解决方案，采用 Lisp、Haskell 等语言编程时使用的风格。

```
def depth(exp):
    if not exp:                         # the tuple is empty
        return 0                        #return 0
    elif not isinstance(exp[0], tuple): # first element is not a tuple
        return depth(exp[1:])           # traverse the rest of elements
    else:  # depth is 1 + depth of first tuple + depth of rest of elements
        return 1 + max(depth(exp[0]), depth(exp[1:])) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-20T13:19:15.197

你可以试试这个

```
def depth(expr):
count = 0
if not isinstance(expr,tuple):
    return 0 
else:
    count = 1
    count1 = 0
    for e in expr:
        count1 = 1 + depth(e)
        count = max(count1,count)
return count 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-24T23:17:35.560

在遍历子表达式时，您可以简单地跟踪最后的最大深度。

```
def depth(expr):
    # base case
    if not isinstance(expr, tuple):
        return 0
    # if it is a tuple, we've at least depth of 1
    max_depth = 1
    # If any sub-expression is deeper, update max_depth
    for elem in expr:
        elem_depth = 1 + depth(elem)
        if elem_depth > max_depth:
            max_depth = elem_depth
    return max_depth 
```

# vim - 在 VIM 中使用 Uncrustify

> ID：12374200
> 
> 赞同：14
> 
> 时间：2012-09-11T16:36:24.470
> 
> 标签：vim, uncrustify

在我的 vimrc 中，我通过以下命令调用 Uncrustify：

```
%!uncrustify -l CPP -c D:\uncrustify\default.cfg 
```

之后在一些代码上我得到一个 Windows 致命错误：

但是，当我使用 -f 选项在控制台中的同一代码上调用 uncrustify 时，没有错误。

如何更改我的 vimrc 以避免将来出现此类错误？什么可以引发此错误？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-20T01:44:18.620

为了将 Uncrustify 与 Vim 正确集成，请将以下内容添加到您的`.vimrc`:

```
" Restore cursor position, window position, and last search after running a
" command.
function! Preserve(command)
  " Save the last search.
  let search = @/

  " Save the current cursor position.
  let cursor_position = getpos('.')

  " Save the current window position.
  normal! H
  let window_position = getpos('.')
  call setpos('.', cursor_position)

  " Execute the command.
  execute a:command

  " Restore the last search.
  let @/ = search

  " Restore the previous window position.
  call setpos('.', window_position)
  normal! zt

  " Restore the previous cursor position.
  call setpos('.', cursor_position)
endfunction

" Specify path to your Uncrustify configuration file.
let g:uncrustify_cfg_file_path =
    \ shellescape(fnamemodify('~/.uncrustify.cfg', ':p'))

" Don't forget to add Uncrustify executable to $PATH (on Unix) or 
" %PATH% (on Windows) for this command to work.
function! Uncrustify(language)
  call Preserve(':silent %!uncrustify'
      \ . ' -q '
      \ . ' -l ' . a:language
      \ . ' -c ' . g:uncrustify_cfg_file_path)
endfunction 
```

现在，您可以将此函数 ( `Uncrustify`) 映射到键组合，也可以使用我使用的方便技巧。创建一个文件`~/.vim/after/ftplugin/cpp.vim`，您可以在其中覆盖任何 Vim 设置，特别是针对 C++ 的设置，并在其中添加以下行：

```
autocmd BufWritePre <buffer> :call Uncrustify('cpp') 
```

这基本上添加了一个预保存挂钩。现在，当您使用 C++ 代码保存文件时，Uncrustify 将使用您之前提供的配置文件自动对其进行格式化。

例如，对于 Java 也可以这样做：在`~/.vim/after/ftplugin/java.vim`添加中：

```
autocmd BufWritePre <buffer> :call Uncrustify('java') 
```

你明白了。

**注意**：这里介绍的所有内容都经过我的充分测试和每天使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-17T09:05:15.620

我发现将以下代码放入您的 .vimrc 就足够了：

```
let g:uncrustifyCfgFile = '~/.uncrustify.cfg'
function! UncrustifyFunc(options) range
    exec a:firstline.','.a:lastline.'!uncrustify '.a:options
                \.' -c '.g:uncrustifyCfgFile.' -q -l '.&filetype
endfunction

command! -range=% UncrustifyRange <line1>,<line2>call UncrustifyFunc('--frag')
command! Uncrustify  let s:save_cursor = getcurpos() 
                  \| %call UncrustifyFunc('') 
                  \| call setpos('.', s:save_cursor) 
```

请注意，这确实假设您的 $PATH 中有“unrustify”二进制文件。

它还假设您的配置文件是 ~/.uncrustify.cfg 但是您可以通过修改 g:uncrustifyCfgFile 变量来更改它。

调用运行

```
:Uncrustify 
```

它也适用于范围（这是促使我制作此功能的原因）。视觉选择示例：

```
:'<,'>UncrustifyRange 
```

我只对 C、CPP 和 JAVA 感到厌烦（我认为其他人也可以）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-27T20:37:22.560

除了@Alexander Shukaev 的回答，如果检测到错误，添加以下内容将检查 uncrustify 配置的正确性而不是自动格式化：

```
 let output = system('uncrustify -q -c ' . a:cfgfile)

  if v:shell_error != 0
      echo output
  endif

  return v:shell_error
endfunction

" Don't forget to add Uncrustify executable to $PATH (on Unix) or 
" %PATH% (on Windows) for this command to work.
function! Uncrustify(language)
  if CheckUncrustifyCfg(g:uncrustify_cfg_file_path)
      echo "Config file" g:uncrustify_cfg_file_path "has errors"
      echo "No formatting will be performed"
      return
  endif

  call Preserve(':silent %!uncrustify'
      \ . ' -q '
      \ . ' -l ' . a:language
      \ . ' -c ' . g:uncrustify_cfg_file_path)
endfunction 
```

# javascript - jquery mobile根据内容大小对齐按钮

> ID：12374205
> 
> 赞同：1
> 
> 时间：2012-09-11T16:36:55.813
> 
> 标签：javascript, jquery, css

我想使用 javascript/jquery 和 css 实现以下布局。我有一个用 jquery mobile 编写的项目。正如预期的那样，有页眉、内容和页脚。我的页脚里面什么都没有，并且漂浮在页面底部。我的内容是一个动态的表单，底部有一个下一步按钮来提交它。提交时，我得到一个带有按钮的不同表单。该按钮始终位于表单右侧的下方。

根据表单内的内容，按钮应浮动在表单下方并右对齐。如果表单内容较小且未覆盖屏幕，则按钮应放在页脚上方并右对齐。如果表单中的内容大于屏幕大小，则按钮应粘贴在表单内容下方。

我尝试使用 jquery 方法来获取屏幕的大小和按钮的 css 设置，但这给了它一个固定的属性，并且如果我改变屏幕也不会改变。

```
 var innerHeight = $('#contents').height();
  alert(innerHeight);
  var screenHeight = window.innerHeight;
  alert(screenHeight);
  if(innerHeight < screenHeight) {
    $('#contents').css("height", screenHeight-120);
  } 
```

我希望这是动态的，以便如果在移动设备中查看它可以在横向和纵向上正确呈现。感谢您的所有建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:06:53.447

听起来您正在为该按钮寻找一个粘性页脚：[http ://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)

确保将粘性页脚至少填充到您在帖子中提到的固定位置页脚元素的高度（这将确保您的按钮永远不会隐藏）。

**注意：**您可能需要重新考虑此设计中的用户体验。
“提交/下一步”按钮的位置应该直观且一致。

例如：Form #1 的按钮距离输入字段只有几个像素；表格 #2 的按钮位于输入下方 100 像素处。对我来说，这是糟糕的设计。它是一种形式——一种用户期望以某种方式表现的工具。我认为“玩”提交按钮的位置是一个坏主意——除非它在整个表单提交过程中具有非常特定的位置。

也许粘性页脚与平衡页面之间的输入计数相结合，将为您提供最好的“想要”和“需要”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:43:38.937

您可以在 CSS 中使用媒体查询来达到您想要的效果。尽管我喜欢编写 JavaScript，但 CSS 是一个更好的资源。[http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

* 作为旁注，IE8 本身不支持媒体查询。但是，您的主要意图是为移动设备提供响应式设计——CSS 将很好地为您处理。

# java - 固定到任务栏时，Java Web 启动遇到 CouldNotLoadArgumentException

> ID：12374209
> 
> 赞同：3
> 
> 时间：2012-09-11T16:37:12.027
> 
> 标签：java, windows-7, java-web-start

想知道其他人是否遇到了这个问题，并且有已知的解决方法。我们的 UI 是通过 java web start 部署的。它运行良好，除非用户将图标固定到 Windows 7 中的任务栏。我们使用的是 JRE 7u7。

`jaavws.exe`报告它找不到缓存，见下文。请记住，当我们从桌面启动相同的图标时，这非常有效：

```
CouldNotLoadArgumentException[ Could not load file/URL specified: C:\Users\Chang_Lee\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\14\14bb61ce-3d47036e]
                at com.sun.javaws.Main.launchApp(Unknown Source)
                at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
                at com.sun.javaws.Main.access$000(Unknown Source)
                at com.sun.javaws.Main$1.run(Unknown Source)
                at java.lang.Thread.run(Unknown Source)

[...]

java.io.FileNotFoundException: C:\Users\Chang_Lee\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\14\14bb61ce-3d47036e (The system cannot find the file specified)
                at java.io.FileInputStream.open(Native Method)
                at java.io.FileInputStream.<init>(Unknown Source)
                at java.io.FileInputStream.<init>(Unknown Source)
                at com.sun.javaws.jnl.LaunchDescFactory.buildDescriptor(Unknown Source)
                at com.sun.javaws.Main.launchApp(Unknown Source)
                at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
                at com.sun.javaws.Main.access$000(Unknown Source)
                at com.sun.javaws.Main$1.run(Unknown Source)
                at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T22:06:33.590

报告的错误的 URL：[http](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4774096) ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4774096仅表示它们无法重现。

我们发生了同样的错误，用户升级到更新 34 并没有解决问题，但重新安装了应用程序并且一切正常。

Dwain A Wuerfel

# c# - 重音字符未显示

> ID：12374211
> 
> 赞同：5
> 
> 时间：2012-09-11T16:37:23.723
> 
> 标签：c#, .net, email, mailmessage

我有一个要求，将电子邮件发送给用户，他可以直接回复电子邮件，并且该电子邮件的内容会发布在他的帐户中。

问题是当用户从他的电子邮件中发布内容时，重音字符没有正确显示。`MailMessage`我使用类发送电子邮件：

```
message.BodyEncoding = Encoding.UTF8;
message.SubjectEncoding = Encoding.UTF8; 
```

如您所见，正文和主题都是 UTF8 编码的。但是，当我从电子邮件中发布消息时，口音会转换为 ?。谁能告诉我我错过了什么？

**编辑：**这有什么关系`IsBodyHtml`吗？我没有设置`IsBodyHtml`为真。这是必需的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T17:31:17.747

我似乎认为，尽管使用 UTF8 进行编码，但用于正文的默认媒体类型是 text/plain——这是 ASCII（即[ASCII](http://en.wikipedia.org/wiki/ASCII)字符集）。如果您使用`IsBodyHtml`，它将使用 text/html 的媒体类型，该媒体类型将使用[ISO-8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)字符集。

# vba - 列出在两个单元格中指定范围的范围内的所有数字 - vba

> ID：12374212
> 
> 赞同：2
> 
> 时间：2012-09-11T16:37:29.483
> 
> 标签：Excel表：, vba, excel

我有一个包含以下数据的[Excel表：](/questions/tagged/excel "显示标记为“excel”的问题")

```
col1      col2    col3    col4
dvdtable    6      52      57
tvunit      2      30      31 
```

我需要将每一行复制到另一张纸上，但是制作 dvdtable 行的 6 个副本和 tvunit 行的 2 个副本。（col2 是指数量）。此外，我需要创建一个新列，其中对于 6 个 dvdtable 行中的每一行，我分别在新列中包含 52、53、54、55、56、57。看下面的结果：

```
col1      col2    col3 
dvdtable    6      52
dvdtable    6      53
dvdtable    6      54
dvdtable    6      55
dvdtable    6      56
dvdtable    6      57
tvunit      2      30
tvunit      2      31 
```

由于您论坛中的另一个问题，我设法生成了生成多个行副本的代码，但我坚持编程的最后一部分，我需要在第 3 列和第 3 列中给出的范围内创建数字列表每种家具4个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:07:53.760

您可能必须更改工作表名称。

```
Option Explicit
Sub whyDidIDoThisForYou()

    Dim i, j, k As Integer
    Dim numbRows As Integer
    Dim curWriteRow As Integer
    Dim temp As Integer
    Dim values() As String

    numbRows = Range("a1").End(xlDown).Row - 1 'assumes heading
    curWriteRow = 1
    ReDim values(1 To numbRows, 1 To 4)

    For i = 1 To numbRows

        'read all values in from initial datasheet
        For j = 1 To 4
            values(numbRows, j) = Sheets("Sheet1").Cells(i + 1, j).Value
        Next j

        'write to next sheet
        'get number of things to write
        temp = values(numbRows, 4) - values(numbRows, 3)

        'start writing the "output" sheet!
        For j = 0 To temp
               Sheets("Sheet2").Cells(curWriteRow, 1).Value = values(numbRows, 1)
               Sheets("Sheet2").Cells(curWriteRow, 2).Value = values(numbRows, 2)
               Sheets("Sheet2").Cells(curWriteRow, 3).Value = values(numbRows, 3) + j
               curWriteRow = curWriteRow + 1
        Next j

    Next i

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T00:01:28.567

您可以使用如下数组，这比逐个单元格地写入范围要快得多

下面的代码

*   将原始数据读入变量数组`Y`
*   遍历`Y` ( `lngCnt2`)的每一行
*   以 colulmB ( )`Y`中指定的次数运行`lngCnt3`
*   将新记录转储到第二个变体数组`X`
*   转储到完成时`x`开始的范围`E1`

![在此处输入图像描述](../Images/bbc7c4f09bfe85a92b055b8a0ed5c89d.png)

```
Sub SplicenDice()
Dim rng1 As Range
Dim lngCnt As Long
Dim lngCnt2 As Long
Dim lngCnt3 As Long
Dim lngCnt4 As Long
Dim X
Dim Y
Set rng1 = Range([a1], Cells(Rows.Count, "D").End(xlUp))
Y = rng1.Value2
lngCnt = Application.WorksheetFunction.Sum(Range("B:B"))
ReDim X(1 To lngCnt, 1 To 3)
For lngCnt2 = 1 To UBound(Y, 1)
For lngCnt3 = 1 To Y(lngCnt2, 2)
lngCnt4 = lngCnt4 + 1
X(lngCnt4, 1) = Y(lngCnt2, 1)
X(lngCnt4, 2) = Y(lngCnt2, 2)
X(lngCnt4, 3) = Y(lngCnt2, 3) + lngCnt3 - 1
Next
Next
[e1].Resize(UBound(X, 1), UBound(X, 2)).Value2 = X
End Sub 
```

# c# - 无法在 silverlight 应用程序中访问自托管 wcf 服务

> ID：12374215
> 
> 赞同：0
> 
> 时间：2012-09-11T16:37:47.107
> 
> 标签：c#, wcf, silverlight, service

我试图从我的 Silverlight 应用程序中访问一个自托管的 WCF 服务，但它不工作。该服务被配置为使用 SSL，我可以使用 WCFTestClient 工具、一个 Web 浏览器来访问它，我可以引用该服务并从 silverlight 项目中更新它。问题是当 silverlight 应用程序尝试调用服务时，它会出现以下错误：

> 服务器没有提供有意义的回复；这可能是由于合同不匹配、会话过早关闭或内部服务器错误造成的。

当我使用 WCF 测试客户端工具点击它时，它返回的数据没有问题（如预期的那样）。

有任何想法吗？

以下是我的应用程序配置：

```
<system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="basicHttp" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="6553600" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>
          <security mode="Transport">
          </security>
        </binding>
      </basicHttpBinding>
      <webHttpBinding>
        <binding name="webHttp" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" useDefaultWebProxy="true" allowCookies="false">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="6553600" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>
          <security mode="Transport">
          </security>
        </binding>
      </webHttpBinding>
    </bindings>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
    <services>
      <service name="Application.ServiceModel.ApplicationService" behaviorConfiguration="serviceBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="https://192.168.1.171:8000/ApplicationServiceModel/service"/>
          </baseAddresses>
        </host>
        <endpoint address="" 
                  binding="basicHttpBinding" 
                  bindingConfiguration="basicHttp" 
                  contract="Application.ServiceModel.IApplicationService"  />
        <endpoint address="mex" 
                  binding="mexHttpsBinding" 
                  contract="IMetadataExchange"/>
        <endpoint address="http://localhost:8000/"
                  binding="webHttpBinding"
                  contract="Application.ServiceModel.IApplicationService"
                  behaviorConfiguration="webHttpBehavior" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="serviceBehavior">
          <serviceMetadata httpsGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="webHttpBehavior">
          <webHttp />
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:31:25.197

@carlos：您的代码非常适合 http。但是，我无法让它适用于 https。我只是得到“clientaccesspolicy.xml”没有找到......

我对主要功能进行了这些修改：

```
 public static void Main()
        {
            string baseAddress = "https://" + Environment.MachineName + ":8000";
            ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
            BasicHttpBinding basicHttpBinding = new BasicHttpBinding(BasicHttpSecurityMode.Transport);
            host.AddServiceEndpoint(typeof(ITest), basicHttpBinding, "basic");
            WebHttpBinding webHttpBinding = new WebHttpBinding(WebHttpSecurityMode.Transport);
            HttpTransportSecurity httpTransportSecurity = webHttpBinding.Security.Transport;
            httpTransportSecurity.ClientCredentialType = HttpClientCredentialType.None;
            httpTransportSecurity.ProxyCredentialType = HttpProxyCredentialType.None;
            WebHttpBehavior webHttpBehavior = new WebHttpBehavior();

            host.AddServiceEndpoint(typeof(IPolicyRetriever), webHttpBinding, "").Behaviors.Add(webHttpBehavior);
            ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
            smb.HttpsGetEnabled = true;
            host.Description.Behaviors.Add(smb);
            host.Open();
            Console.WriteLine("Host opened");
        } 
```

此外，我对 GetSilverlightPolicy() 函数进行了以下修改：

```
 public Stream GetSilverlightPolicy()
        {
            string result =
                @"<?xml version=""1.0"" encoding=""utf-8""?>
                    <access-policy>
                        <cross-domain-access>
                            <policy>
                                <allow-from http-request-headers=""SOAPAction"">
                                    <domain uri=""https://""/>
                                    <domain uri=""http://""/>
                                </allow-from>
                                <grant-to>
                                    <resource path=""/"" include-subpaths=""true""/>
                                </grant-to>
                            </policy>
                        </cross-domain-access>
                    </access-policy>";
            return StringToStream(result);
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T16:45:06.060

默认情况下，Silverlight 客户端无法向加载 .XAP 文件的域以外的域发出网络请求（即跨域请求）。如果要访问自承载的 WCF 服务（这意味着 X 域请求），该服务必须向 Silverlight 运行时提供一个*策略文件*，说明可以发出此类请求。

[您可以在http://blogs.msdn.com/b/carlosfigueira/archive/2008/03/07/enabling-cross-domain-](http://blogs.msdn.com/b/carlosfigueira/archive/2008/03/07/enabling-cross-domain-calls-for-silverlight-apps-on-self-hosted-web-services.aspx)的帖子中找到如何为自托管服务启用跨域调用的示例[呼吁-silverlight-apps-on-self-hosted-web-services.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2008/03/07/enabling-cross-domain-calls-for-silverlight-apps-on-self-hosted-web-services.aspx)。由于您的服务使用 HTTPS，因此您也需要使用 HTTPS 来提供策略，否则帖子中的代码应该适合您。

# jquery - 使用 ASP.NET Web 应用程序播放流式视频

> ID：12374218
> 
> 赞同：1
> 
> 时间：2012-09-11T16:38:05.107
> 
> 标签：jquery, asp.net, html

我正在开发一个文档共享 Web 应用程序。我想流式传输视频（最常用的格式是 MPEG 和 AVI，就像 YouTube.com。

我应该使用哪个控件来播放视频？用户将上传视频文件，然后其他用户可以查看它们。

我可以为此使用 Jquery 或纯服务器端控件。请建议。

此外，我如何在线查看 PowerPoint 文件或其他 Microsoft Office 文件格式，就像 slideshare.net 一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:32:21.727

只需使用 HTML5`<video src="<%= pathToVideoFile %>" />`元素。浏览器会自己渲染它。如果视频存储在 Web 可访问的文件系统位置，只需直接链接到它，否则如果它存在于数据库中，那么您应该实现一个`*.ashx`处理程序，该处理程序只需在响应中直接从数据库返回数据（使用正确的 MIME 类型， 当然）。

不用说，您的视频必须正确编码。如果它们是 H.264，那么你会没事的。如果它们是 DivX 或 MPEG-2，您会遇到问题（因为 Windows 8 默认不再附带 MPEG-2 解码器）。我建议您在将所有上传的视频添加到您的系统时将其转换为 H.264。您可以使用`ffmpeg`.

如果您的目标是上一代浏览器（基本上是 IE8），那么您需要使用 Flash SWF 视频播放器。一个很受欢迎的是[JWPlayer](http://www.longtailvideo.com/players)，另一个（免费）是[FlowPlayer](http://flowplayer.org/)。`<script>`这一切都是通过向您的站点添加一些块来在客户端完成的。

让 PowerPoint 文件在 Internet 上可见是一项艰巨的任务。不要试。有些公司花费大量资金建立专门用于该单一任务的整个网站并且惨遭失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:40:23.560

检查一下，如果我阅读正确，它带有非 html 5 后备[http://lifehacker.com/5536050/embed-html5-videos-with-multi+browser-support-on-your-site](http://lifehacker.com/5536050/embed-html5-videos-with-multi+browser-support-on-your-site)

这是另一个值得研究的 html5/非 html 5 方法[http://blogfreakz.com/video/cross-browser-video-player/](http://blogfreakz.com/video/cross-browser-video-player/)

直接链接[http://camendesign.com/code/video_for_everybody](http://camendesign.com/code/video_for_everybody)

# batch-file - 同一行上有多个grep关键字？

> ID：12374220
> 
> 赞同：0
> 
> 时间：2012-09-11T16:38:12.590
> 
> 标签：batch-file, grep

我在这样的同一行上使用命令 grep 3 次

```
ls -1F ./ | grep / | grep -v 0_*.* | grep -v undesired_result 
```

有没有办法将它们组合成一个命令而不是让它通过管道传输 3 次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:48:26.023

There's no way to do both a positive search (`grep <something>`) and a negative search (`grep -v <something>`) in one command line, but if your `grep` supports `-E` (alternatively, `egrep`), you could do `ls -1F ./ | grep / | grep -E -v '0_*.*|undesired_result'` to reduce the sub-process count by one. To go beyond that, you'd have to come up with a specific regular expression that matches either exactly what you want or everything you don't want.

Actually, I guess that first sentence isn't entirely true if you have `egrep`, but building the proper regular expression that correctly includes both the positive and negative parts and covers all possible orderings of the parts might be more frustrating than it's worth...

# pdf - 合并的 PDF 空白

> ID：12374223
> 
> 赞同：2
> 
> 时间：2012-09-11T16:38:25.040
> 
> 标签：pdf, batch-file, merge, ghostscript

尝试在 .bat 文件中使用 GhostScript 9.06 64bit 合并目录中的所有 pdf

以下，使merged.pdf，但它是1页和空白

```
call gswin64c -q -dNOPAUSE -dBATCH -sDEVICE=pdfwrite -sOutputFile=merged.pdf *.pdf 
```

如果我真的指定要合并哪些 PDF，它可以正常工作。是什么赋予了？

```
call gswin64c -q -dNOPAUSE -dBATCH -sDEVICE=pdfwrite -sOutputFile=merged.pdf 1.pdf 2.pdf 3.pdf 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:50:53.177

您不能在 Ghostscript 命令行上指定通配符，就这么简单。

由于 GS 没有找到名为“*.pdf”的文件，因此它没有执行任何标记操作，在这种情况下，您会得到一个空白文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T11:16:45.483

我做了以下事情来解决这个问题：

1.)`dir /B *.pdf > do.bat`

2.）用记事本打开`do.bat`以替换`\r\n`为空格

3.) 插入：`c:\Programs\gs\gs9.07\bin\gswin64 -dNOPAUSE -sDEVICE=pdfwrite -sOutputFile=merged.pdf`在开头

然后执行`do.bat`

瞧

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T17:45:07.327

您不能从命令行指定通配符，但您可以`gswin32c`运行命令文件。

由于“命令文件”只需要用任意数量的空格（空格、制表符、换行符）分隔开关，并且文件大小没有限制，我们可以制作一个满足您需要的文件

```
echo -q -dNOPAUSE -dBATCH -sDEVICE=pdfwrite -sOutputFile=merged.pdf > files.gsx
dir *.pdf /b >> files.gsx 
```

创建此文件**files.gsx**后，您可以使用

> gswin32c @files.gsx

所有文件将被合并

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T12:25:07.530

Ghostscript 本身不能进行通配符扩展。

如果您`gs ... *.pdf`从可以进行通配符扩展的外壳内部调用，它仍然可以工作。

您链接到的网站和您上面使用的代码有所不同：

1.  您的代码是 DOS 批处理并使用`call gswin64c ...`. 但如前所述，Ghostscript 本身不能扩展通配符。

2.  链接网页中的代码是 Unix shell，它在Ghostscript 看到自己的命令行*之前进行通配符扩展。*当 Ghostscript 看到它时，通配符扩展已经发生了。

您必须为您的批处理文件找到一个解决方案，您首先将（扩展的）*.pdf 文件名存储在变量中`%mypdfs%`，然后执行`call gswin64c ... %mypdfs%`.

# selenium - isAlertPresent? 使用 WebDriverBackedSelenium

> ID：12374224
> 
> 赞同：1
> 
> 时间：2012-09-11T16:38:27.713
> 
> 标签：selenium, webdriver, selenium-webdriver

> **可能重复：**
> [使用 Java 处理 Selenium 2 警报](https://stackoverflow.com/questions/8244723/selenium-2-alert-handling-with-java)

如果我`driver.switchTo.alert();`用于检查警报是否存在，则需要 2 秒以上。

但是，如果我使用以下逻辑进行检查，则只需不到 1 秒。

```
Selenium sel=new WebDriverBackedSelenium(driver, "");
b = sel.isAlertPresent(); 
```

但问题是，如果警报不存在，它会返回 false，如果警报*存在*，它会抛出 an`UnhandledAlertException`而不是仅仅返回 true。

为什么它抛出这个异常而不是返回true？

# android - 使用 SimpleAdapter 时为列表视图项设置标签

> ID：12374226
> 
> 赞同：0
> 
> 时间：2012-09-11T16:38:30.870
> 
> 标签：android

我想在每个`ListView`项目中存储一些数据（比如说 ID）并稍后在`clickItem`侦听器中检索它。

如果我创建自己的适配器，我知道该怎么做。但是，如果我正在使用，是否可以为每个项目设置一个唯一的标签`SimpleAdapter`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:48:07.100

Without overriding at least `getView()`, you will have trouble setting tags with every Adapter's view recycler.

However you can simply pass a custom layout with a TextView that has its visibility set to `GONE` or `INVISIBLE` and bind data from your List of Maps (`List<Map<String, ?>>`). Later you can easily fetch this TextView in an OnItemClickListener.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:41:22.940

i think this will help you in case you want to identify imageview uniquely by tag like this

```
 //add this in your getview() method
   ImageView imageView = new ImageView(_context);
   imageView.setTag(1); 
```

and then on listview's/imageView's click check its tag like this

```
 listview.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {

                  Tag = (Integer) arg1.getTag(); 
```

} }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-15T14:36:54.913

SimpleAdapter 中有一个方法可以做到这一点。它被称为 ViewBinder。尝试在“SimpleAdapter adapter = new SimpleAdapter(this, Maps, R.layout.search, from, to);”之后立即包含此代码 在“setListAdapter(adapter);”之前 （在您的 onCreate 方法中）。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    //...

    String[] from = new String[] {"ONE", "TWO", "THREE", "FOUR", "FIVE", "SIX", "SEVEN"};

int[] to = new int[] { R.id.textView_1, R.id.textView_2, R.id.textView_3, R.id.textView_4, R.id.textView_5, R.id.textView_6, R.id.textView_7};

SimpleAdapter adapter = new SimpleAdapter(this, Maps, R.layout.search, from, to);

    SimpleAdapter.ViewBinder binder = new SimpleAdapter.ViewBinder() {
    @Override
public boolean setViewValue(View view, Object object, String value) {
System.out.println("view= "+view);
    System.out.println("view.toString()= "+ view.toString());
    System.out.println("view.getId()= "+ view.getId()); //The return value will be decimal (not hexadecimal). You can have this value as a global string for later use.
    System.out.println("view.getVisibility()= "+ view.getVisibility());
    System.out.println("view.equals((TextView) view.findViewById(R.id. textView_5))= "+ view.equals((TextView) view.findViewById(R.id.textView_5)));
    if (view.equals((TextView) view.findViewById(R.id.textView_5)))
            {
                TextView textView_five = (TextView) view.findViewById(R.id. textView_5);
                    //Change color/answer/etc for textView_5
            }

//OR
          if (view instanceof TextView) {
                    //Do stuff
                    return true;
                }

                return false;
            }
        };

adapter.setViewBinder(binder);

    setListAdapter(adapter);    
}//End of onCreate 
```

setViewValue 方法将为您调用的每个 R.id.textView_1、R.id.textView_2、R.id.textView_3、R.id.textView_4、R.id.textView_5、R.id.textView_6、R.id.textView_7 调用在“适配器”中有。setViewValue 方法将在每个视图/每次绘制上述 R.id 之一时被调用。

然后，当用户单击 ListView 项目之一并且您想要更改它时，覆盖 onListItemClick 方法。

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
if (v.equals((TextView) v.findViewById(R.id.textView_5)))
    {
TextView textView_five = (TextView) v.findViewById(R.id. textView_5);
    textView_five.setText(“stuff”); 
    //Change color/answer/etc for textView_5
            }
} 
```

# python - python中的smtp代理需要root身份验证才能运行

> ID：12374230
> 
> 赞同：0
> 
> 时间：2012-09-11T16:38:51.677
> 
> 标签：python, linux, proxy, permission-denied, smtpd

我在 Linux 上有以下简单的 python 代码

```
import smtpd
proxy = smtpd.PureProxy(('0.0.0.0',25), None) 
```

以 sudo 运行时运行良好，但`socket.error: [Errno 13] Permission denied`以标准用户运行时出错。我的问题：我怎样才能让这个片段与普通用户一起运行。

谢谢，

亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:26:34.213

如果您想绑定到端口 25（或 1024 以下的任何端口），您必须是 root。但是，一旦套接字绑定完成，您就可以更改为其他用户。

```
>>> import os
>>> import smtpd
>>> import pwd
>>> uid = pwd.getpwnam('nobody').pw_uid
>>> gid = pwd.getpwnam('nobody').pw_gid
>>> proxy = smtpd.PureProxy(('0.0.0.0',25), None)
>>> os.setgid(gid)
>>> os.setuid(uid)
>>> os.system('whoami')
nobody
0
>>> 
```

当然，这是一种单向操作。一旦您更改为另一个用户，您将无法再次更改用户。

# c - 关于 C 指针和内存地址的说明

> ID：12374233
> 
> 赞同：-1
> 
> 时间：2012-09-11T16:39:05.850
> 
> 标签：c, pointers, memory-management

我对下面代码中的第 6、7 和 8 行感兴趣。

```
#include <stdio.h>
#include <stdlib.h>

void go_south_east(int *lat, int *lon) {
  printf("Lat: %p, Long: %p\n", lat, lon);
  printf("Address of Lat: %p, Address of Long: %p\n", &lat, &lon);
  printf("Address of Lat: %p, Address of Long + 8 bytes?: %p\n", &lat, &lon+8);
  printf("Size of Lat: %lu, Size of Long: %lu\n", sizeof(lat), sizeof(lon));
  *lat -= 1;
  *lon += 1;
}

int main() {

  int latitude = 32;
  int longtitude = -64;
  go_south_east(&latitude, &longtitude);
  printf("Avast! Now at: [%i, %i]\n", latitude, longtitude);

  return 0;
} 
```

我得到的输出是：

```
Address of Lat: 0x7fff5fbfe9e8, Address of Long: 0x7fff5fbfe9e0
Address of Lat: 0x7fff5fbfe9e8, Address of Long + 8 bytes?: 0x7fff5fbfea20 
Size of Lat: 8, Size of Long: 8 
```

我知道 lat 和 long 指针的大小是 8 个字节，因为它们是 long unsigned int。但是为什么它们在内存中只相距 1 个字节呢？由于它们的大小是 8 个字节，它们不应该彼此相距 8 个字节吗？请指教。

* * *

感谢所有有用的建议。我希望我可以将每个人的答案都标记为答案，但我不能。真的很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:19:35.113

在您的问题中，完全不同的事物和无法解释的断言混杂在一起。

首先，我`long unsigned int`在您的代码中看不到指针。代码中的所有指针都有`int *`类型。是从哪里来`long unsigned int`的？

其次，`lat`是`lon`数据指针。通常，在非外来 C 实现中，所有数据指针都具有相同的大小。他们指向什么并不重要。在您的平台上，数据指针的大小为 8 字节。这意味着指向的指针`char`和指向的指针`double`以及指向的指针`unsigned long int`将具有相同的 8 字节大小。

Thirdly, where did you get the idea that they are 1 byte away in memory? The very first line in your output clearly shows that they are located at `0x7fff5fbfe9e8` and `0x7fff5fbfe9e0` addresses. These addresses are exactly 8 bytes away: `0x7fff5fbfe9e8` minus `0x7fff5fbfe9e0` equals 8\. So, where did your "1 byte away" come from?

Fourthly, your code seems to suggest that `&lon+8` changes the address by "8 bytes". This is incorrect. Adding 1 to a data pointer `T*` shifts it by `sizeof(T)` bytes, which means that `&lon+8` actually changes the address by 8*8=64 bytes, which is exactly what you observe in your output: `0x7fff5fbfea20` minus `0x7fff5fbfe9e0` equals 64.

Basically, the questions you ask are directly contradicting what you observe in your output. That's kinda makes it virtually impossible to answer. It is like showing people a red handkerchief and asking why it is green.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:41:20.263

这两个地址的差正好是8，再看看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T16:41:59.257

它们彼此相距八个字节。PC 是*字节*可寻址的，而不是位可寻址的。

也就是说，编号的内存单元是*字节*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T17:02:22.337

指针算法实际上将数据类型的大小添加到地址中。澄清：

```
int* i = 0;
i++;
printf("%p\n", i); // Prints 0x4, not 0x1 
```

所以

```
printf("Address of Lat: %p, Address of Long + 8 bytes?: %p\n", &lat, &lon+8); 
```

实际上打印 lon + 8 * sizeof(&lon) 字节的地址

# jquery - 为 category.php 中的每个帖子制作一个图库

> ID：12374237
> 
> 赞同：0
> 
> 时间：2012-09-11T16:39:24.503
> 
> 标签：jquery, wordpress, jquery-cycle

嗨，我在尝试为每个帖子实施画廊时遇到了一些麻烦。

好吧，事实上问题不在于它工作，问题是网站像龟一样变慢。

我为每个画廊使用循环：

```
var  
    id = $('#gallery-id-<?php the_ID(); ?>'),
    container = $('#container'),
        leftArrow = $('#leftArrow'),
        rightArrow = $('#rightArrow')

    id.cycle({
        timeout:0,
        fx:'scrollHorz',
        prev: prv,
        next: nxt,
        easing: 'easeOutExpo' 
    }); 
```

但是为 10 个帖子生成一个画廊使网站变得超级慢......

并且 well cycle 不是帖子中唯一调用的插件，它还使用 jspScroll、qTip 等。

您建议在每篇文章中添加 jquery 以准确快速地显示内容吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:49:50.557

如果你使用了大量的 jQuery '插件'，你肯定会注意到性能急剧下降。在 UI 密集度较低的页面上帮助提高性能的一种快速简便的方法可能是将代码上下文化。例如，如果您只需要在 Wordpress 构建的主页上运行 Cycle，您可以使用“if”语句：

```
if($('body').hasClass('home')) {
  var  
    id = $('#gallery-id-<?php the_ID(); ?>'),
    container = $('#container'),
    leftArrow = $('#leftArrow'),
    rightArrow = $('#rightArrow')

  id.cycle({
    timeout:0,
    fx:'scrollHorz',
    prev: prv,
    next: nxt,
    easing: 'easeOutExpo' 
  });
}// End body.home only 
```

所有这一切都是查看`<body>`类并检查页面是否具有该类。如果它有那个类，它将运行必要的 jQuery 调用。您可以开始了解这很容易成为维护问题，因此请适当地进行上下文关联！

ps 如果没有看到你的其余代码，我可以根据经验说 jspScroll 是“慢”网站的罪魁祸首 - 特别是如果你在大型 DOM 上运行它。

# ruby-on-rails - 有没有巧妙的方法将 yml 语言环境文件传递给我的客户进行翻译？

> ID：12374239
> 
> 赞同：0
> 
> 时间：2012-09-11T16:39:26.473
> 
> 标签：ruby-on-rails, internationalization, yaml

我已经使用 i18n 完成了一个 rails 项目，现在我需要将网站中的所有文本传递给我们的客户，以便他可以翻译它们，我们可以在我们的应用程序中包含其他语言环境。

问题是我们的客户不是极客，如果我们给他们实际的 YAML 文件，他们将使用 MS Word 对其进行编辑，我们将在此过程中丢失所有正确的标记（“\n”表示新行，一行文字等...）。

你会如何处理这个过程？有没有比给客户一个 .doc 文件然后浪费一天时间来清理文本并手动将其转换回 YAML 更好的方法？

在此先感谢，奥古斯托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T00:18:23.287

这正是创建[Locale](http://www.localeapp.com)的目的：您上传 YAML 文件，您的客户端/翻译器编辑内容，然后同步 YAML。您无需通过电子邮件发送文件，也无需处理糟糕的文件格式 - 看看吧！

全面披露：我共同创立并开发了 Locale。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T17:47:11.360

这听起来像是一次性的事情，我只做一次翻译，然后就完成了。

我们在这些情况下所做的（我们通常使用翻译器来处理这类事情）是将 YAML 中的所有密钥导出到 Excel 并发送给它们。

一旦我们把它拿回来，我们通常会指派一个实习生来修复 yaml（在它被翻译回 YAML 之后 - 我们现在手动执行此操作，但一个小脚本应该很容易实现）

其他解决方案可能是（如果您经常这样做）将翻译包含到您的应用程序中，并通过一些 JavaScript 和可能类似于[Aloha 编辑器](http://aloha-editor.org/)的东西启用，用户只需单击文本并在应用程序中翻译它们。但这有点过分了，只有在确实有很多翻译要完成并且你想众包它们时才有意义（Facebook 过去就是这样做的）

# security - 在 bash 脚本执行之间保存密码

> ID：12374240
> 
> 赞同：4
> 
> 时间：2012-09-11T16:39:28.467
> 
> 标签：security, bash, shell, sh

我希望我的脚本提示输入密码，但我只希望它每次输入一次**~~天~~**会话（比方说半小时）。是否可以在脚本执行之间安全地保存用户的登录凭据？我需要这是一个 bash 脚本，因为它必须在几种不同类型的 UNIX 上运行，而我无权在这些 UNIX 上安装任何东西。

我正在考虑加密一个文本文件，我将在其中写入登录凭据，但我将把该文件的密码保存在哪里？好像我只是重新创建问题。

我知道运行加密脚本的实用程序，我非常反对使用它们，因为我不喜欢将主密码保存在人们以后可能需要调试的脚本中的想法。

编辑：这不是服务器登录脚本，而是通过我无法控制的 Web 服务器进行身份验证。

编辑 2：编辑的会话持续时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:44:00.053

根据脚本的“多次调用”正在做什么，您可以使用 2 个脚本、一个服务器和一个客户端，使用命名管道进行通信。警告：这可能是不可移植的。

脚本 1“服务器”：

```
#!/bin/bash

trigger_file=/tmp/trigger
read -s -p "Enter password: "  password
echo 
echo "Starting service"
mknod $trigger_file p
cmd=
while [ "$cmd" != "exit" ]; do
    read cmd < $trigger_file
    echo "received command: $cmd"
    curl -u username:$password http://www.example.com/ 
done
rm $trigger_file 
```

脚本 2“客户端”：

```
#!/bin/bash

trigger_file=/tmp/trigger
cmd=$1
echo "sending command: $cmd"
echo $cmd > $trigger_file 
```

跑步：

```
$ ./server
Enter password: .....
Starting service
received command: go 
```

其他窗口：

```
$ ./client go
sending command: go 
```

编辑：

这里是一个统一的自启动服务器/客户端版本。

```
#!/bin/bash

trigger_file=/tmp/trigger
cmd=$1

if [ -z "$cmd" ]; then
   echo "usage: $0 cmd"
   exit 1
fi

if [ "$cmd" = "server" ]; then
    read -s password
    echo "Starting service"
    mknod $trigger_file p
    cmd=
    while [ "$cmd" != "exit" ]; do
        read cmd < $trigger_file
        echo "($$) received command $cmd (pass: $password)"
        curl -u username:$password http://www.example.com/ 
    done
    echo exiting
    rm $trigger_file
    exit
elif [ ! -e $trigger_file ]; then
    read -s -p "Enter password: " password
    echo 
    echo $password | $0 server &
    while [ ! -e $trigger_file ]; do
      sleep 1
    done
fi

echo "sending command: $cmd"
echo $cmd > $trigger_file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T16:54:27.030

您是正确的，将密码保存在任何可访问的地方都会重新产生问题。从系统安全的角度来看，每天一次而不是每次程序运行时都要求提供凭据与根本没有身份验证系统基本相同。将密码放在易于阅读的任何地方（无论是纯文本还是由纯文本密钥加密）都会消除您通过向具有良好系统知识/扫描工具的任何人提供密码而获得的任何安全性。

解决此问题的传统方法（以及更安全的机制之一）是使用 SSH 密钥代替密码。一旦用户拥有密钥，他们就无需手动重新输入身份验证。为了获得更好的安全性，您可以使 SSH 密钥以仅对脚本/可执行文件具有执行权限的用户身份登录。因此，他们将无法更改脚本的功能，也无法通过读取文件来重现它。然后文件的实际所有者可以轻松地编辑/运行脚本而无需身份验证，同时将其他用户保持在受限使用模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:20:05.957

通常，出于安全原因，不存储密码，而是`hash`存储密码。每次用户输入密码时，都会比较哈希以进行身份​​验证。但是，您的要求类似于“记住密码”功能（例如在 Web 浏览器或 Windows 应用程序上）。在这种情况下，没有其他方法可以将密码存储在平面文件中，然后使用类似的东西[`gpg`](http://www.gnupg.org/)来加密文件，但最终你会得到一个`key`用于加密的方法。

每天询问用户一次凭据的整个设计与不询问任何凭据一样好。一个高度安全的系统应该设置适当的超时时间，以使用户因不活动而注销，尤其是在后端服务器操作上。

# php - jQuery AJAX 写入 XML

> ID：12374241
> 
> 赞同：0
> 
> 时间：2012-09-11T16:39:39.290
> 
> 标签：php, javascript, jquery, xml, ajax

我想使用 jQuery 写入 XML 文件。假设如下：

```
app.writeXML = function(data) {
    $.get("xml/sample.xml", function(resp) {
        var node = $(resp).find("Sample")
        $(node).append('<test>this is a test</test>')

        //write to the sample.xml file with the additional "test" node added

    }, 'xml')
} 
```

新节点“test”是否附加到本地内存中我的“Sample”节点的末尾，或者我这里有错误？

如果它仅在本地内存中，我假设我需要一个服务器端组件来实际写入文件。使用 PHP 会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:44:12.643

您在客户端所做的一切

1.  获取 xml
2.  为它建立 dom
3.  将节点添加到 dom
4.  然后什么都没有，一切都在浏览器中

您实际上必须在服务器端实现一些 api 来更改文件。例如，您可能有一个 php 文件，您可以在其中使用 xml 文件，而在客户端只需向其发布请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:45:35.610

我不认为你可以这样做。您可能需要做的是在您的 jquery 中进行 post 调用以发布发送更改，然后更新您的 xml。

# php - 即使我已经设置为小于或等于 0，仍然得到负值

> ID：12374242
> 
> 赞同：0
> 
> 时间：2012-09-11T16:39:44.973
> 
> 标签：php

我正在创建一个玩家 1 与玩家 2 的简单系统，如果完成了 30 轮并且两个玩家都还活着，则系统仅限制到 30 轮，则称为平局。如果玩家 1 在 30 轮之前得到 0 或小于 0 并且玩家 2 还活着，那么玩家 2 赢得比赛等等......

问题是为什么我仍然有负值我的代码有什么问题？我已经在那里设置了一个 if 语句。任何想法都会对我有很大帮助，因为我仍然是初学者，所以我愿意改进，谢谢。

```
<?php 

        //Player 1
        $p1Health = 100;
        $p1Attack = 5;
        $p1Speed = 3;

        //Player 2
        $p2Health = 70;
        $p2Attack = 8;
        $p2Speed = 5;

        //Greater speed attack first
        $speed1=0;
        $speed2=0;

        echo '<td>'.$p1Health.'</td><td>'.$p1Attack.'</td><td>'.$p1Speed.'</td>';

        echo '<td>'.$p2Health.'</td><td>'.$p2Attack.'</td><td>'.$p2Speed.'</td>';

        //Compare speed
        if($p1Speed<$p2Speed){
            $speed1=1; //start first
            $speed2=0;
        }
        else {
            $speed1=0; //start first
            $speed2=1;
        }

        $rounds = 30; //maximum rounds
        $count = 0;

        while($count<=30){

            if($p1Health<=0 || $p2Health<=0){ //if any of the players health is equal or below zero loop stop and declare winner

                break;

            }
            else if($speed1==1){

                $p2Health = $p2Health - $p1Attack;

                echo 'Player 2 damaged by '.$p1Attack.' points.Health points left: '.$p2Health.'<br>'; 

                //turn to other player to attack
                $speed1=0;
                $speed2=1;

            }
            else if($speed2==1){

                $p1Health = $p1Health - $p2Attack;

                echo 'Player 1 damaged by '.$p2Attack.' points.Health points left: '.$p1Health.'<br>';

                //turn to other player to attack
                $speed1=1;
                $speed2=0;

            }

            $count++;
        }

        if($p1Health>0 && $p2Health<=0){

            echo 'Player 1 wins the battle';

        }
        else if($p2Health>0 && $p1Health<=0){

            echo 'Player 2 wins the battle';

        }
        else if($p1Health>0 && $p2Health>0){

            echo 'Battle draw';

        }

    ?> 
```

我不知道我的代码是否正确，但这是基于我的理解，任何改进它的想法都会对我有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T16:47:36.477

Player 1 starts with 100 health. After each attack from player 2, that goes down by 8\. After the 12th attack, player 1 will have 4 health. On the 13th attack, that value is reduced by another 8, yielding −4.

You'll see this phenomenon any time one player's attack strength doesn't evenly divide the other's health.

If you don't want the value to go below zero, even after an attack, then check for that and fix it:

```
$p1Health = $p1Health - $p2Attack;
if ($p1Health < 0)
  $p1Health = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:51:39.853

这是因为在循环的第 20 次执行中，这些值仍然可能为负数。循环仍将再次执行到第 21 次迭代，您的 if 条件将中断。

您可以考虑在 while 条件下使用健康值，例如：

```
while ($count < $rounds && p1Health > 0 && p2Health > 0) { 
```

然后消除循环中检查健康值的第一个条件。

# cuda - 在设备上使用主机功能

> ID：12374246
> 
> 赞同：0
> 
> 时间：2012-09-11T16:39:49.453
> 
> 标签：cuda

如何在设备中使用主机功能？
例如在下面的函数中，我想返回一个值

```
__device__ float magnitude2( void ) {
    return r * r + i * i;
} 
```

但是这个功能是一个设备功能，我收到了这个错误：
`calling a host function from a __device__/__global__ function is not allowed`
解决这个问题的最佳方法是什么？

对代码的额外评论：

我想定义这个结构：

```
struct cuComplex {
    float   r;
    float   i;
    cuComplex( float a, float b ) : r(a), i(b)  {}
    __device__ float magnitude2( void ) {
        return r * r + i * i;
    }
    __device__ cuComplex operator*(const cuComplex& a) {
        return cuComplex(r*a.r - i*a.i, i*a.r + r*a.i);
    }
    __device__ cuComplex operator+(const cuComplex& a) {
        return cuComplex(r+a.r, i+a.i);
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:28:29.380

现在我们知道问题涉及 C++ 结构，答案很明显 - 类的构造函数也必须可用作 __device__ 函数，以便能够在内核中实例化类。在您的示例中，结构应定义如下：

```
struct cuComplex {
    float   r;
    float   i;

    __device__ __host__
    cuComplex( float a, float b ) : r(a), i(b)  {}

    __device__ 
    float magnitude2( void ) {
        return r * r + i * i;
    }

    __device__ 
    cuComplex operator*(const cuComplex& a) {
        return cuComplex(r*a.r - i*a.i, i*a.r + r*a.i);
    }

    __device__ 
    cuComplex operator+(const cuComplex& a) {
        return cuComplex(r+a.r, i+a.i);
    }
}; 
```

您看到的错误是因为每当实例化类时都需要调用构造函数。在您的原始代码中，构造函数仅声明为主机函数，导致编译错误。

# javascript - 在 IE 中加载 Firebug Lite 时遇到问题

> ID：12374249
> 
> 赞同：0
> 
> 时间：2012-09-11T16:40:01.540
> 
> 标签：javascript, internet-explorer, cross-domain, firebug, firebug-lite

我已经下载了最新的 firebug-lite 并将它放在我的本地目录中，我`<script type="text/javascript" src="../js/firebug-lite.js"></script>`就像这样包含它。IE 在控制台中抛出此错误 -`SCRIPT5: Access is denied.` 这似乎是 IE 的跨域问题，我不确定它是怎么回事 - 我确实想尝试让它以这种特定方式工作（本地文件） - 另一个包含它的方法确实有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T08:30:34.667

Have you got any of the ["ie7.js"](https://code.google.com/p/ie7-js/) shims loaded, too? I tried using "ie9.js" (a later version for IE8) and it screwed with Firebug Lite for me. I feel your pain; Firebug Lite is a damn sight better than the IE8's absolutely useless native tools.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:17:46.707

至于错误访问被拒绝。很明显，您正在尝试运行您没有权限的脚本。您是这台电脑的管理员吗，您在使用 IE 浏览时使用的是受限帐户还是访客帐户。

尽管如此，您始终可以按照 Colin Pickard 的这些步骤使其在 IE 中运行

1.  转到一些 Firebug Lite 页面 (http://getfirebug.com/firebuglite)。

2.  单击收藏夹栏上的“添加到收藏夹栏”按钮。

3.  这将为您提供[http://getfirebug.com/firebuglite](http://getfirebug.com/firebuglite)的书签。

4.  右键单击“Firebug Lite”链接并选择“复制快捷方式”。

5.  右键单击您的新书签并选择属性。

6.  将小书签粘贴到 URL 框中并关闭。

# bash - 如何查找包含空字符串的文件

> ID：12374252
> 
> 赞同：1
> 
> 时间：2012-09-11T16:40:20.023
> 
> 标签：bash

我们的一个供应商有一个错误的车间系统（长话短说）。虽然他们最终修复了任何错误，但我需要隔离他们发送的文件：它们不是空的，而是有一个很长的空字符串。通常一个好的文件在 vi 中看起来像这样

```
 <insert_list><test_event_insert  endTime="2012-09-10T05:28:45" startTime="2012-09-10T05:27:41" operator="8176967"><process_step name="FVT" revision="NO DATA"></process_step><location1 name="CT" type="REGION"><location2 name="ONTREP1" type="TESTER"><location3 name="LineA" type="LINE"></location3></location2></location1><unit ...
"CT~DCA~FVT~8176967~ONTREP1~4~P~1100~DECA1MR0-01~XED1B1033A4675~20120910~052846.XML" [noeol][dos] 3L, 2170C 
```

一个坏的文件会是这样的：

```
^@^@^@^@^@^@^@^@^@^@^@^@^@...

"CT~DCA~FVT~8176967~ONTREP1~2~P~1100~DECA1MR0-01~XED1B1045B6072~20120904~043209.XML" [noeol] 1L, 2170C 
```

插入符号/at 符号组合是 VI 对该字符串的解释，我猜，但它实际上是一个空字符串。使用`-z`似乎适用于一个文件

```
X=CT~DCA~FVT~8176967~ONTREP1~2~P~1100~DECA1MR0-01~XED1B1045B6072~20120904~043209.XML
if [ ! -z $X ] 
then 
echo "$X empty"
else 
echo "$X not empty"
fi
    CT~DCA~FVT~8176967~ONTREP1~2~P~1100~DECA1MR0-01~XED1B1045B6072~20120904~043209.XML empty 
```

但同样的代码告诉我，我的 EMC 批量文件管理器上的所有 900 个文件都是空的。这不是真的。

```
export OUT=/path/to/device
declare -a myArray
for f in "$OUT"/*ONTREP1*; do myArray+=( "${f#$OUT/}" ); done
for i in "${myArray[@]}"; do  if [ ! -z $i ] ; then echo "$i empty"; else echo "$i not empty"; fi; done 
```

注意：模式“ *ONTREP1* ”是将故障文件缩小到一个车间计算机名称。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:57:10.387

您缺少`test -z string`测试字符串是否为空的测试（而不是`test -s file`测试文件是否为空的测试。）此外，vim 中的 ^@ 指示 NUL 字节 - 值为 0 的字节。看起来这些是二进制数据文件或可能已损坏，但肯定不是空的。vim 中的空文件在最左边的列中显示为所有波浪号 (~) :-)

尝试`file filename`对好文件和坏文件运行命令；由于 NUL 字节，后者可能会说“数据”。

# string - 字符串中模式的符号表示，并找到“相似”的子模式

> ID：12374259
> 
> 赞同：5
> 
> 时间：2012-09-11T16:41:03.330
> 
> 标签：string, algorithm, data-structures, pattern-matching

字符串“abab”可以被认为是索引符号“0101”的模式。字符串“bcbc”也将由“0101”表示。这非常漂亮，并且可以进行强大的比较，但它很快就会从完美的案例中分崩离析。

“babcbc”将是“010202”。如果我想指出它包含等于“0101”（bcbc 部分）的模式，我只能考虑在每个索引处进行某种标准化过程，以象征性地“重新表示”从 n 到 length 的子字符串以进行比较. 如果我想看看“babcbc”和“dababd”（010202 与 012120）是否有任何共同点，那就变得复杂了。这么低效！

如何有效地做到这一点，照顾所有可能的嵌套案例？请注意，我正在寻找类似的模式，而不是实际文本中的类似子字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:06:46.183

尝试将每个字符替换为 min(K, 与该字符之前出现的距离)，其中 K 是一个可调常数，因此 babcbc 和 dababd 变为类似于 KK2K22 和 KKK225。您可以使用后缀树或后缀数组在转换后的文本中查找重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:53:07.390

您的算法因压缩字符串的原始数据集而丢失了信息，因此我不确定您是否可以在不做比比较原始字符串更多的工作的情况下恢复完整的信息集。此外，虽然您的数据集看起来更易于人类阅读，但它当前占用的空间与原始字符串一样多，并且字符串的差异图（其中值是前一个字符和当前字符之间的距离）可能具有更具可比性的信息放。

但是，关于如何检测所有公共子集，您应该查看 Least Common Subsequence 算法以找到最大的匹配模式。这是一个定义明确的算法并且效率很高——O(n * m)，其中 n 和 m 是字符串的长度。请参阅[SO](https://stackoverflow.com/questions/8257655/lcs-algorithm-example)和[Wikipedia](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)上的 LCS 。如果您还想查看环绕字符串的模式（作为循环搅拌 - 在哪里`abeab`和`eabab`应该匹配），那么您需要一个环形 LCS，它在[Andy Nguyen](http://arxiv.org/abs/1208.0396)的论文中有所描述。

您需要稍微更改算法以考虑到目前为止的变化数量。我的建议是在 LCS 表中添加两个额外的维度，表示在两个原始字符串的过去 k 个字符中遇到的唯一数字的数量以及每个字符串的压缩版本。然后你可以做一个 LCS 解决方案，你总是朝着与压缩字符串匹配的方向移动，并且为过去的 k 个字符匹配两个字符串中相同数量的唯一字符。这应该对所有可能的唯一子字符串匹配进行编码。

棘手的部分将始终选择最大化包含相同数量唯一字符的 k 的方向。因此，在 LCS 表的每个元素中，您将有一个额外的字符串搜索来搜索 k 值的最佳步骤。由于更长的序列总是包含所有可能的更小的序列，如果你最大化你在每一步中的 k 个选择，你知道下一次迭代中的最佳 k 最多是 1 步，所以一旦 4D 表被填写，它应该是可以以与原始 LCS 表类似的方式求解。请注意，因为您有一个 4D 表格，所以逻辑确实变得更加复杂，但是如果您阅读 LCS 的工作原理，您将能够看到如何定义一致的规则，以便在每个步骤中向左上角移动。因此 LCS 算法保持不变，只是扩展到更多维度。

这个解决方案一旦完成就会非常复杂，所以你可能想重新考虑你想要实现的目标/如果这个模式在你开始编写这样的算法之前编码了你真正想要的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:02:05.163

这是一个使用 Prolog 的统一功能和属性变量来匹配模板的解决方案：

```
:-dynamic pattern_i/3.

test:-
  retractall(pattern_i(_,_,_)),
  add_pattern(abab),
  add_pattern(bcbc),
  add_pattern(babcbc),
  add_pattern(dababd),
  show_similarities.

show_similarities:-
  call(pattern_i(Word, Pattern, Maps)),
  match_pattern(Word, Pattern, Maps),
  fail.
show_similarities.

match_pattern(Word, Pattern, Maps):-
  all_dif(Maps), % all variables should be unique
  call(pattern_i(MWord, MPattern, MMaps)),
  Word\=MWord,
  all_dif(MMaps),
  append([_, Pattern, _], MPattern), % Matches patterns
  writeln(words(Word, MWord)),
  write('mapping: '),
  match_pattern1(Maps, MMaps). % Prints mappings

match_pattern1([], _):-
  nl,nl.
match_pattern1([Char-Char|Maps], MMaps):-
  select(MChar-Char, MMaps, NMMaps),
  write(Char), write('='), write(MChar), write(' '),
  !,
  match_pattern1(Maps, NMMaps).

add_pattern(Word):-
  word_to_pattern(Word, Pattern, Maps),
  assertz(pattern_i(Word, Pattern, Maps)).

word_to_pattern(Word, Pattern, Maps):-
  atom_chars(Word, Chars),
  chars_to_pattern(Chars, [], Pattern, Maps).

chars_to_pattern([], Maps, [], RMaps):-
  reverse(Maps, RMaps).
chars_to_pattern([Char|Tail], Maps, [PChar|Pattern], NMaps):-
  member(Char-PChar, Maps),
  !,
  chars_to_pattern(Tail, Maps, Pattern, NMaps).
chars_to_pattern([Char|Tail], Maps, [PChar|Pattern], NMaps):-
  chars_to_pattern(Tail, [Char-PChar|Maps], Pattern, NMaps).

all_dif([]).
all_dif([_-Var|Maps]):-
  all_dif(Var, Maps),
  all_dif(Maps).

all_dif(_, []).
all_dif(Var, [_-MVar|Maps]):-
  dif(Var, MVar),
  all_dif(Var, Maps). 
```

该算法的思想是：

*   为每个单词生成一个未绑定变量的列表，我们对单词中的相同字符使用相同的变量。例如：对于单词 abcbc，列表看起来像 [X,Y,Z,Y,Z]。这定义了这个词的模板
*   一旦我们有了模板列表，我们就可以获取每个模板并尝试将模板与每个其他单词的子模板统一起来。例如，如果我们有单词 abcbc 和 zxzx，则模板将是 [X,Y,Z,Y,Z] 和 [H,G,H,G]。然后在第一个模板上有一个子模板，它与第二个单词的模板统一（H=Y，G=Z）
*   对于每个模板匹配，我们显示产生该匹配所需的替换（变量重命名）。所以在我们的例子中，替换是 z=b, x=c

测试输出（单词 abab、bcbc、babcbc、dababd）：

```
?- test.

words(abab,bcbc)
mapping: a=b b=c 

words(abab,babcbc)
mapping: a=b b=c 

words(abab,dababd)
mapping: a=a b=b 

words(bcbc,abab)
mapping: b=a c=b 

words(bcbc,babcbc)
mapping: b=b c=c 

words(bcbc,dababd)
mapping: b=a c=b 
```

# google-drive-api - 使用 Document List API 3.0 创建空文件

> ID：12374264
> 
> 赞同：1
> 
> 时间：2012-09-11T16:41:35.303
> 
> 标签：google-drive-api, google-docs-api

我正在开发一个需要向 Google 驱动器创建一个新的空文件（不是文档）的功能，现在我使用的是文档列表 API 3.0，我指的是文档：[https ://developers.google.com/google-apps /documents-list/#uploading_a_new_document_or_file_with_both_metadata_and_content](https://developers.google.com/google-apps/documents-list/#uploading_a_new_document_or_file_with_both_metadata_and_content)。我会将一个零字节文件上传到 Google 驱动器以生成空文件。

现在我在请求步骤 1 和请求步骤 2 中遇到问题。在第一个 Post[resumable-create-media link] 请求之后，我成功获得了上传位置。然后，当我向该位置请求 put 方法时，出现 404 not found 错误。所有请求都有“GData-Version: 3.0”和“Authorization: accessToken”标头。

我从论坛中搜索了很多，并弄清楚如何创建空文档，但无法弄清楚如何创建空文件。这是我的代码，有人可以帮忙看看哪一部分是错的吗？提前致谢。

```
private final static String PARAM_CONTENT_TYPE = "Content-Type";
private final static String PARAM_UPLOAD_LENGTH = "X-Upload-Content-Length";
private final static String PARAM_UPLOAD_TYPE = "X-Upload-Content-Type";
private final static String CONTENT_TYPE_XML = "application/atom+xml";
private final static String URI_RESUMABLE_RESOURCE = "https://docs.google.com/feeds/upload/create-session/default/private/full";
private final static String ENTITY_NEW_FILE = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><entry xmlns=\"http://www.w3.org/2005/Atom\" "
        + "xmlns:docs=\"http://schemas.google.com/docs/2007\"><title>{0}</title></entry>";

@Override
public boolean createNewFile() throws IOException {
    String uri = null;
    if (ROOT.equals(parentResourceId))
        uri = URI_RESUMABLE_RESOURCE;
    else
        uri = URI_RESUMABLE_RESOURCE + "/%3A" + parentResourceId + "/contents";
    try {
        StringEntity entity = new StringEntity(MessageFormat.format(ENTITY_NEW_FILE, getName()), Constants.ENCODING);
        Map<String, String> headers = new HashMap<String, String>();
        headers.put(PARAM_CONTENT_TYPE, CONTENT_TYPE_XML);
        headers.put(PARAM_UPLOAD_LENGTH, "0");
        headers.put(PARAM_UPLOAD_TYPE, "text/plain");
        Map<String, String> params = new HashMap<String, String>();
        params.put("convert", "false");
        HttpResponse response = helper.execMethodAsResponse(uri, new PostMethod(entity), headers, params);
        String location = null;
        if ((location = response.getFirstHeader("Location").getValue()) != null) {
            headers = new HashMap<String, String>();
            headers.put(PARAM_CONTENT_TYPE, "text/plain");
            headers.put("Content-Range", "bytes 0-0/0");
            //FIXME: Problem occurs here, this put invocation will return 404 not found error.
            JsonObject obj = helper.execMethodAsJson(location, new PutMethod(new ByteArrayEntity(new byte[0])), headers, null);
            if (obj != null) {
                decorateFile(this, obj.get("entry").getAsJsonObject());
                return true;
            }
        }
    } catch (UnsupportedEncodingException e) {
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:17:14.530

在 Google Drive 上创建空文件的最简单方法是使用 Google Drive API v2 并发送[`service.files.insert(File content)`](http://javadoc.google-api-java-client.googlecode.com/hg/apis/drive/v2/com/google/api/services/drive/Drive.Files.html#insert%28com.google.api.services.drive.model.File%29)请求。

您可以使用参考指南中的 Java 示例并将其编辑为不包含`MediaContent`：[https ://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:20:15.423

我已经找到了问题，根据这个链接：[Google Documents List API file upload 400 response](https://stackoverflow.com/questions/11191727/google-documents-list-api-file-upload-400-response)

第二个 put 请求不需要任何额外的 headers，例如“GData-Version: 3.0”和“Authorization: Bearer ****”等。唯一需要做的就是新建一个带有位置 URI 的 put 请求，然后它将返回带有 201 状态码的响应。

谢谢大家。

# algorithm - 在 Twitter 上识别重复问题的方法？

> ID：12374267
> 
> 赞同：3
> 
> 时间：2012-09-11T16:41:59.623
> 
> 标签：algorithm, twitter, duplicates

如标题中所述，我只是在寻找可以用来接收 twitter firehose（或其中的一部分）的算法或解决方案，并且

a) 确定一般问题 b) 对于一个问题，确定可能相同的问题，并有一定的信心

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:01:55.553

**（一种）**

我会尝试使用[机器学习](http://en.wikipedia.org/wiki/Machine_learning)和[词袋模型](http://en.wikipedia.org/wiki/Bag-of-words_model)来识别问题。

1.  创建一组带标签的 twits，并用二进制标志标记它们中的每一个：问题或非问题。
2.  从训练集中提取特征。这些特征传统上是单词，但至少在我尝试过的任何时候——使用[二元](http://en.wikipedia.org/wiki/N-gram)语法显着改善了结果。（3克对我的情况没有帮助）。
3.  根据数据构建分类器。我通常发现[SVM](http://en.wikipedia.org/wiki/Support_vector_machine)比其他分类器提供更好的性能，但您也可以使用其他分类器 - 例如[朴素贝叶斯](http://en.wikipedia.org/wiki/Naive_Bayes_classifier)或[KNN](http://en.wikipedia.org/wiki/K-nearest_neighbor_algorithm)（但您可能需要这些分类器的[特征选择](http://en.wikipedia.org/wiki/Feature_selection)算法）。
4.  现在您可以使用分类器对推文进行分类。¹

**(乙)**

这个问题在[信息检索领域](http://en.wikipedia.org/wiki/Information_retrieval)被称为“重复检测”或“接近重复检测”。
您至少可以使用语义解释找到彼此非常相似的问题，正如 Markovitch 和 Gabrilovich 在他们精彩的文章[Wikipedia-based Semantic Interpretation for Natural Language Processing](http://www.cs.technion.ac.il/%7Eshaulm/papers/abstracts/Gabrilovich-2009-WBS.html)中所描述的那样。至少，它将帮助您确定两个问题是否正在讨论相同的问题（即使不相同）。

这个想法是这样的：

1.  使用 wikipedia 构建一个表示其语义的向量，对于一个 term `t`，条目是与 term共同出现的该术语`vector_t[i]`的 tf-idf 分数。文章中详细描述了这个想法。阅读前 3-4 页就足以理解它。无需全部阅读。²`i``t`
2.  对于每条推文，构造一个向量，该向量是其术语向量的函数。比较两个向量 - 您可以确定两个问题是否在讨论相同的问题。

**编辑：**

第二个想法，BoW 模型在这里不太合适，因为它忽略了术语的位置。但是，我相信如果您添加用于提取特征的[NLP](http://en.wikipedia.org/wiki/Natural_language_processing)处理（例如，对于每个术语，还表示它是前置主题还是后置主题，这是使用 NLP 处理确定的），结合机器学习将产生相当不错的效果结果。

* * *

(1) 为了评估您的分类器，您可以使用[交叉验证](http://en.wikipedia.org/wiki/Cross-validation_%28statistics%29)，并检查预期的准确性。
(2) 我知道 Evgeny Gabrilovich 将他们创建的实现算法发布为一个开源项目，只需要寻找它。

# zend-framework - Zend 框架：路由器

> ID：12374270
> 
> 赞同：0
> 
> 时间：2012-09-11T16:42:31.923
> 
> 标签：zend-framework

那是我的两个路由器：

```
->addRoute('viewTextMaterial', new Zend_Controller_Router_Route(':mCat/:mCatSub/:mId/:mTitle', array('controller' => 'index', 'action' => 'viewtextmaterial')))
->addRoute('viewNews', new Zend_Controller_Router_Route(':nCat/:nId/:nTitle/:page', array('controller' => 'index', 'action' => 'viewnews'))) 
```

在 index.phtml 文件中，我添加了这个：

```
<a href="<?= $this->url(array('mCat' => 'Test', 'mCatSub' => 'Test', 'mId' => 7, 'mTitle' => 'Test'), 'viewTextMaterial') ?>">Test</a> 
```

经验。查看新闻网址：

```
<a href="<?= $this->url(array('nCat' => News, 'nId' => 5, 'nTitle' => Some title, 'page' => 1), 'viewNews') ?>">some text</a> 
```

但是，为什么当我点击一个 href 时，它会将我重定向到“viewnews”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T03:45:17.377

根据我的经验（这不是很好:)）我认为当您在名称前使用冒号时，当您定义路由器时，例如

```
'/:mCat/:mCatSub/:mId/:mTitle',
      array(
           'controller' => 'index', 
           'action'    => 'viewtextmaterial'
            ) 
```

您告诉路由器要做的是将遵循上述格式（'/:mCat/:mCatSub/:mId/:mTitle'）的任何 url 路由到您在此处提到的控制器/操作。例如。

**一些控制器/动作/x/y**

或者

**anoCont/act/a/b**

将被路由到相同的控制器/动作。

因此，在您的情况下，您正在定义两个具有相同选项的路由器（这会产生歧义），并且默认情况下使用第二个定义的路由（从下到上匹配）。

你可以使用这样的东西

```
'/test/:mCatSub/:mId/:mTitle',
          array(
               'controller' => 'index', 
               'action'    => 'viewtextmaterial'
                ) 
```

所以任何以'test'作为控制器（在url中）开头的东西现在都将被路由到你想要的控制器/视图。

希望它有效.. :) （如果没有请赐教:)）

# php - 从php中的两个给定时间减去非工作时间和天数

> ID：12374275
> 
> 赞同：0
> 
> 时间：2012-09-11T16:42:57.983
> 
> 标签：php, date, time

我想计算两个给定时间之间的总小时数和分钟数。

条件是我只想计算工作时间，即从 09:30 到 18:00，如果星期六和星期日位于给定的两个时间之间，我还想排除它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:22:26.990

```
function calcTime($startTime,$endTime){
//==1.===Time Diff D,H,M,S===========
$diff=diffInTime($startTime,$endTime);
//==2.===Time Separation=============
$sep=explode(",",$diff);
$days=$sep[0];
$hours=$sep[1];
$mins=$sep[2];
$secs=$sep[3];

$totSecs=($days*24*60*60)+($hours*60*60)+($mins*60)+$secs;

$invalidTime=$days*((15*3600)+1800);

//$mor=strtotime('09:30:00');
//$eve=strtotime('18:00:00');

$mor=(9*3600)+1800;
$eve=18*3600;

echo "invalidtime".$invalidTime."<br>";

$startExplode=explode(":",date("H:i:s",$startTime));
$startTimeToday=$startExplode['0']*3600+$startExplode['1']*60+$startExplode['2'];

$endExplode=explode(":",date("H:i:s",$endTime));    
$endTimeToday=$endExplode['0']*3600+$endExplode['1']*60+$endExplode['2'];

echo "starttime".$startTime."<br>";
echo "endtime".$endTime."<br>";
echo "mor".$mor."<br>";
echo "eve".$eve."<br>";

if($startTimeToday<$mor){
    if($endTimeToday<$mor){
        //==1a.===When checked/endtime is before morning===========
        if($endTimeToday<$startTimeToday){
            $invalidTime=$invalidTime+($mor-$startTimeToday)+(6*3600)+$endTimeToday;
        }
        else if($endTimeToday>$startTimeToday){
            $invalidTime=$invalidTime+($endTimeToday-$startTimeToday);
        }           
    }
    else if(($endTimeToday>$mor)&&($endTimeToday<$eve)){
        //==2a.===When checked/endtime is beetween working hours===
        $invalidTime=$invalidTime+($mor-$startTimeToday);
    }
    else if($endTimeToday>$eve){
        //==3a.===When checked/endtime is after evening============
        $invalidTime=$invalidTime+($mor-$startTimeToday)+($endTimeToday-$eve);
    }
}
else if(($startTimeToday>$mor)&&($startTimeToday<$eve)){
    if($endTimeToday<$mor){
        //==1b.===When checked/endtime is before morning===========
        echo $invalidTime=$invalidTime+(6*3600)+$endTimeToday;
    }
    else if(($endTimeToday>$mor)&&($endTimeToday<$eve)){
        //==2b.===When checked/endtime is beetween working hours===
        if($endTimeToday<$startTimeToday){
            $invalidTime=$invalidTime+((15*3600)+1800);
        }
        else if($endTimeToday>$startTimeToday){
            $invalidTime=$invalidTime;
        }           
    }
    else if($endTimeToday>$eve){
        //==3b.===When checked/endtime is after evening============
        $invalidTime=$invalidTime+($endTimeToday-$eve);
    }
}
else if ($startTimeToday>$eve){
    if($endTimeToday<$mor){
        //==1c.===When checked/endtime is before morning===========
        echo $invalidTime=$invalidTime+((24*3600)-$startTimeToday)+$endTimeToday;
    }
    else if(($endTimeToday>$mor)&&($endTimeToday<$eve)){
        //==2c.===When checked/endtime is beetween working hours===
        $invalidTime=$invalidTime+((24*3600)-$startTimeToday)+((9*3600)+1800);
    }
    else if($endTimeToday>$eve){
        //==3c.===When checked/endtime is after evening============
        if($endTimeToday<$startTimeToday){
            $invalidTime=$invalidTime+((24*3600)-$endTimeToday)+((9*3600)+1800)+($endTimeToday-$eve);
        }
        else if($endTimeToday>=$startTimeToday){
            $invalidTime=$invalidTime+($endTimeToday-$startTimeToday);
        }
    }
}
$validTime=$totSecs-$invalidTime;

echo "<br><br>Total Time Taken is ".$totSecs."<br>";
echo "InValid seconds are ".$invalidTime."<br><br>";
echo "Valid seconds are ".$validTime.", or<br>";
echo "Valid minutes are ".($validTime/60).", or<br>";
echo "Valid hours are ".($validTime/3600)."<br>"; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:27:04.910

```
function diffInTime($startdate,$enddate){
$time_period = ( $enddate - $startdate );
$days = 0;
$hours = 0;
$minutes = 0;
$seconds = 0;
$time_increments = array( 'Days' => 86400,
'Hours' => 3600,
'Minutes' => 60,
'Seconds' => 1 );
$time_span = array();
while( list( $key, $value ) = each( $time_increments )) {
$this_value = (int) ( $time_period / $value );
$time_period = ( $time_period % $value );
$time_span[$key] = $this_value;
}
$diff="";
while( list( $key, $value ) = each( $time_span )) {

    $diff.=$value.",";

}
return $diff; 
```

}

# matlab - 关于标记 x 轴

> ID：12374276
> 
> 赞同：2
> 
> 时间：2012-09-11T16:42:59.417
> 
> 标签：matlab, waterfall

我有很多数据需要在 matlab 中绘制为瀑布图。我有10多列数据，每一列代表一个数据数据集。我将所有数据放在一个大矩阵中，这样第一个数据集放在矩阵的第一行，第二个数据集放在第二行......等等。在所有这些数据存储在矩阵中之后，我使用瀑布绘制这些数据。对于每一列，它包含大约 10,000 个数据点，对应于从 -5 到 5 的 x 变量。但在瀑布中，它在 x 轴上显示 0 到 10, 000 而不是 -5 到 5。如何强制 matlab 显示正确的范围？谢谢

```
mydata = zeros(13, 10000);
mydata(1, :) = ... ;  % first data set
mydata(2, :) = ... ;  % second data set
...
mydata(13, :) = ... ; % last data set
waterfall(mydata) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:55:15.297

如果您查看文档`waterfall`（您可以通过将光标放在编辑器中的命令中并点击 轻松完成此操作`F1`），您将看到您可以使用不同的语法调用瀑布命令。.

```
% Syntax

waterfall(Z) 
waterfall(X,Y,Z) 
waterfall(...,C) 
waterfall(axes_handles,...) 
h = waterfall(...) 
```

不仅仅是用 data 调用瀑布图，还可以为`Z`它提供 the`X`和`Y`range 数据。例如 。. .

```
mydata = rand(13, 10000);
Y = 1:size(mydata,1);
X = linspace(-5, 5,size(mydata,2));

waterfall(X, Y , mydata) 
```

# php - 用于 PHP 数据库值的 HTMLdropdown

> ID：12374278
> 
> 赞同：-5
> 
> 时间：2012-09-11T16:43:06.387
> 
> 标签：php, zend-framework

我将我的数据库值存储在 PHP 文件中，如下所示：

```
$select->from(apartment,array('idapartment'));   
$select->where('apartment.idowner = ?',$usersession->arrvar['idowner']);
$stmt = $select->query();   
$result = $stmt->fetchAll();
$this->view->$rows = $options; 
```

现在我想在 phtml 文件的下拉列表中使用它。谁能帮我实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:26:44.137

这是假设您将结果作为关联数组获取。如果您将它们作为对象获取，请使用`$row->idapartment`而不是`$row['idapartment']`

```
<select>
<?php foreach($this->rows as $row): ?>
<option value="<?php echo $row['idapartment']; ?>"><?php echo $row['idapartment']; ?></option>
<?php endforeach; ?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:47:00.883

in a php file you simply write html code using the echo statement.

such as:

```
echo "<SELECT>";
for($i=0$i<count($result);$i++){
    echo "<option>".$result[$i]['idowner']."</option>";
}
echo "</select>"; 
```

# c# - 如何用等效符号替换网页代码？

> ID：12374281
> 
> 赞同：2
> 
> 时间：2012-09-11T16:43:12.410
> 
> 标签：c#, html, replace, webpage

这可能是一个重复的问题，但我不知道要查找哪些搜索词，所以如果以前有人问过，请不要难为我（我很确定是这样）。

因此，我使用该类获取网页的源代码`WebClient`并将整个字符串保存在`source`变量中：

```
var client = new WebClient();
client.Headers.Add("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)");
var data = client.OpenRead(urlAddress);
var reader = new StreamReader(data);
var source = reader.ReadToEnd();
data.Close();
reader.Close(); 
```

现在我想处理`source`变量中的某些文本范围，尤其是用户发布的消息。现在的问题是，在网页中，源“&”实际上是`&amp;`，“'”是`&#8217;`，引号 (") 是`&#8211;`, `&#8220;`，`&#8221;`谁知道还有什么。

好吧，我可以使用字符串方法将这些代码替换为实际符号`Replace`，但我想知道是否有办法将所有这些代码转换为实际（预期）符号。有没有一种方法可以做到这一点，或者互联网上的图书馆或一些实用程序类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T16:45:29.287

尝试使用[`HttpUtility.HtmlDecode`](http://msdn.microsoft.com/en-us/library/7c5fyk1k)或[`HttpServerUtility.HtmlDecode`](http://msdn.microsoft.com/en-us/library/hwzhtkke.aspx)。

# autocomplete - 自动完成单元格上的光滑网格设置值

> ID：12374283
> 
> 赞同：2
> 
> 时间：2012-09-11T16:43:29.590
> 
> 标签：autocomplete, edit, slickgrid

我正在尝试从 jQuery 到 val 和文本（例如 .find('div.slick-cell.l2.r2').text('xyz')）在光滑的网格中设置值。有问题的单元格上有一个 jquery 自动完成功能，但只有在点击时才会激活。因此，当我单击有问题的单元格时，它会被编辑器中的初始 defaultValue 覆盖：

```
function ComboBoxEditor(args) {
    ...
    this.loadValue = function (item) {
        defaultValue = item[args.column.field] || "";
        $input.val(defaultValue);
        $input[0].defaultValue = defaultValue;
        $input.select();
    }; 
    ... 
```

我可以从光滑网格的世界中获取 jQuery 文本值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T16:05:45.410

将 slickgrid 视为渲染引擎，[将 dataView](https://github.com/mleibman/SlickGrid/wiki/DataView)视为数据接口（您使用的是 dataView 对吗？） dom 元素的 Jquery 或 javascript 编辑不起作用，因此请考虑 jquery/javascript 如何使用 dataView 方法进行更新. [在将文件拖放](http://www.dropzonejs.com/)到[SlickGrid](https://github.com/mleibman/SlickGrid/wiki)中时，我遇到了同样的问题

我检测到 drop 的 elementID 并将其映射回 dataView 行和列。

这是我用于文本粘贴的功能：

```
function insertText(textString, location) {
            grid.resetActiveCell();
            $(location).click();
            var startCell = grid.getActiveCell();
            if (startCell) {
// only paste text into active cells for now
                    var columnDef   =       grid.getColumns();
                    var colField = columnDef[startCell.cell].field;
                    if (!dataView.getItem(startCell.row)) {
// new row
                            var tobj = {'id': "new_" + (Math.random() + 1).toString(36).substring(7)};
                            tobj[colField] = textString;
                            dataView.addItem(tobj);
                    } else {
// modify existing cell
                            var item = dataView.getItem(startCell.row);
                            item[colField] = textString;
                            dataView.updateItem(item.id, item);

                    }
                    grid.resetActiveCell();
                    grid.render();
                    dataView.refresh();
    }
} 
```

# unit-testing - 在测试遗留 C 代码时尝试使用 TEST_GROUP_BASE 共享测试组时出现链接器错误

> ID：12374286
> 
> 赞同：0
> 
> 时间：2012-09-11T16:43:41.167
> 
> 标签：unit-testing, cpputest

我们试图通过使用 TEST_GROUP_BASE 创建共享基类来减少代码重复。当我们尝试在多个测试类中使用此 TEST_GROUP_BASE 时，我们会收到链接器警告，抱怨 'getwchar' 和 'putwchar'：不一致的 dll 链接和错误报告这两个函数的多个定义，以及许多其他 'char'/ 'wchar' 对（例如 strchr/wcschr、strpbrk/wcspbrk）。如果我只包含一个使用 TEST_GROUP_BASE 宏的测试文件，则不会出现链接器错误。

基类在 .h 文件中定义为 TEST_BASE，所有成员函数都内联。然后，此 .h 文件包含在派生的测试文件中，其中 TEST_GROUP_BASE 宏用于合并共享的 TEST_BASE。我错过了什么吗？

我没有找到任何使用 TEST_GROUP_BASE 的例子，所以我不确定我是否错过了一个关键的配置。我们正在测试遗留 C 代码，但所有对生产代码的引用都在 extern "C" 大括号内进行，因为我们的简单测试通过了，这表明 c/c++ 链接正常。

任何人都可以提出任何可能的原因，或者指出我在其他地方如何使用 TEST_GROUP_BASE 的任何开源示例的方向吗？

开发环境为VS2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:04:56.673

我不太确定为什么 putwchar 和 getwchar 上有错误，这可能与 TEST_BASE 和 TEST_GROUP_BASE 无关，但可能与它们是内联的并且头文件包含在不同的链接中有关。如果没有代码示例，将很难弄清楚不同的链接问题来自何处，尤其是当您提到它仅适用于一个 TEST_GROUP_BASE 时。

不过，解决此问题的最佳方法可能是不要将所有 TEST_BASE 函数内联到头文件中。TEST_BASE 宏实际上是“struct testBaseClass : public Utest”的非常简单的替换。因此，TEST_BASE 只是从 Utest 子类化的任何类。这意味着您可以简单地将实现放在 cpp 文件中。

您找不到太多 TEST_GROUP_BASE 用法的原因之一是很多人（包括我）建议不要使用它。将要重用的部分放在单独的类中并在 TEST_GROUP 中使用（而不是派生）该类通常更灵活。这允许许多较小的“夹具”类可以在不同的测试中重复使用。

希望这可以帮助。

# session - Magento多个网站共享购物车

> ID：12374289
> 
> 赞同：5
> 
> 时间：2012-09-11T16:43:51.430
> 
> 标签：session, magento, shopping-cart

我对正在构建的 Magento 网站有点进退两难。我有两个网站，每个网站都设置了一个商店，以便为每个网站启用多种货币结帐。因此，通过一个常见的 magento 安装管理的两个站点（在两个不同的域上）之间的唯一区别是货币显示和结帐货币。到目前为止，这一切都很好。但是，我正在尝试在站点之间共享结帐会话，以便在站点之间切换时购物车保持不变。我设法将正确的会话 ID 添加到切换 url，以便每个站点都知道我们正在寻找什么会话。然而，实际显示购物车的方法似乎并不独立于网站 - 例如在

Mage_Checkout_Model_Session

_getQuoteIdKey() -> 使用当前网站 ID 检查会话中的报价 ID。

而且我无法弄清楚什么/如何覆盖此功能，以便每个网站共享完全相同的购物车数据！

我的 $_SESSION['checkout'] 变量在每个网站上都显示相同，但​​包含此网站 ID 的数据对购物车没有用：'quote_id_4' => string '13' (length=2)

任何想法这是否可能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-12T14:33:45.720

在我搜索了这个问题的答案并偶然发现了自 2009 年以来提出的同一个问题而没有明确的解决方案后，我终于不得不自己研究代码的深层 - 瞧，我有一个可行的解决方案。这里是任何想要设置 Magento 的人的详细指南

*   不仅会显示，而且会以所选货币实际收费的多种货币
*   在整个网站上共享购物车，而不仅仅是商店

这种组合的主要问题是，使用默认的 Magento 结构，您只能做一个或另一个，而不是两者结合。

因此，让我们先将 Magento 设置为多种货币。

*   为每种货币创建一个具有相应商店和商店视图的网站（不仅仅是商店视图，完整的网站）
*   将每个网站的系统 - 配置 - 货币设置设置为相应的货币。所有三个条目基本货币、默认显示货币和允许的货币都应设置为一种相同的货币。
*   回到默认的整体配置范围，将 System - Configuration - Catalog - - Price the Catalog Price Scope 设置为“网站”</li>
*   您还可以在 System - Manage Currency Rates 中定义您的货币汇率
*   为每个网站范围设置适当的系统 - 配置 - 网络 - 安全和不安全的基本 URL。
*   在您的 .htaccess 文件中将其添加到顶部（替换您在设置网站时输入的相应网站域和代码（此处[http://website-us.local](http://website-us.local)使用 base_us 和[http://website-uk.local](http://website-uk.local)使用代码base_uk)

    SetEnvIf Host website-us.local MAGE_RUN_CODE=base_us SetEnvIf Host website-us.local MAGE_RUN_TYPE=website SetEnvIf Host ^website-us.local MAGE_RUN_CODE=base_us SetEnvIf Host ^website-us.local MAGE_RUN_TYPE=website

    SetEnvIf Host website-uk.local MAGE_RUN_CODE=base_uk SetEnvIf Host website-uk.local MAGE_RUN_TYPE=website SetEnvIf Host ^website-uk.local MAGE_RUN_CODE=base_uk SetEnvIf Host ^website-uk.local MAGE_RUN_TYPE=website

*   覆盖 Mage/Core/Model/Store 中的方法 convertPrice 并更改方法 convertPrice - 这将确保价格始终以正确的转换和正确的货币符号显示。

    ```
    /**
     * Convert price from default currency to current currency
     *
     * @param   double $price
     * @param   boolean $format             Format price to currency format
     * @param   boolean $includeContainer   Enclose into <span class="price"><span>
     * @return  double
     */
    public function convertPrice($price, $format = false, $includeContainer = true)
    {
        $categories = Mage::getModel('catalog/category')->getCollection();
        $categ_ids=$categories->getAllIds();
        $baseCurrencyCode = Mage::app()->getBaseCurrencyCode();
        $allowedCurrencies = Mage::getModel('directory/currency')->getConfigAllowCurrencies();
        $currencyRates = Mage::getModel('directory/currency')->getCurrencyRates($baseCurrencyCode,array_values($allowedCurrencies));

        if ($this->getCurrentCurrency() && $this->getBaseCurrency()) {
            $value = $this->getBaseCurrency()->convert($price, $this->getCurrentCurrency());
        } else {
            $value = $price;
        }

        if($this->getCurrentCurrencyCode() != $baseCurrencyCode)
        {
            $value = $price * $currencyRates[$this->getCurrentCurrencyCode()];
        }
        if ($this->getCurrentCurrency() && $format) {
            $value = $this->formatPrice($value, $includeContainer);
        }
        return $value;
    } 
    ```

    }

但当然，我们也希望在我们刚刚建立的网站中共享用户数据、购物车和登录信息。

*   在默认配置范围设置系统 - 配置 - 客户配置 - 帐户共享选项 - 将客户帐户共享到全局

*   覆盖 magento/app/code/core/Mage/Checkout/Model/Session.php 并替换此方法：

    受保护的函数_getQuoteIdKey() { return 'quote_id'; //返回'quote_id_'。$网站[1]；}

*   覆盖 magento/app/code/core/Mage/Sales/Model/Quote.php 并将方法 getSharedStoreIds 更改为：

    公共函数 getSharedStoreIds() { $ids = $this->_getData('shared_store_ids'); if (is_null($ids) || !is_array($ids)) { $arrStoreIds = array(); foreach(Mage::getModel('core/website')->getCollection() as $website) { $arrStoreIds = array_merge($arrStoreIds,$website->getStoreIds()); } 返回 $arrStoreIds; /*if ($website = $this->getWebsite()) { return $website->getStoreIds(); var_dump($this->getStore()->getWebsite()->getStoreIds());exit(); 返回 $this->getStore()->getWebsite()->getStoreIds(); */ } 返回 $ids; }

*   覆盖 magento/app/code/core/Mage/Customers/Model/Customer.php 并再次将方法 getSharedWebsiteIds() 更改为：

    公共函数 getSharedWebsiteIds() { $ids = $this->_getData('shared_website_ids'); if ($ids === null) { $ids = array(); if ((bool)$this->getSharingConfig()->isWebsiteScope()) { $ids[] = $this->getWebsiteId(); } else { foreach (Mage::app()->getWebsites() as $website) { $ids[] = $website->getId(); } } $this->setData('shared_website_ids', $ids); } 返回 $ids; }

*   如果您使用愿望清单选项，您应该对 magento/app/code/core/Mage/Wishlist/Model/Wishlist.php 中的方法执行相同的操作并更改 getSharedWebsiteIds 以便它不仅从当前网站加载商店 ID，而且从所有其中

*   现在我们还必须在前端商店上实现货币（网站）开关，并在其间传递正确的会话 id，以便 magento 知道要查找的商店。我在这里模仿了货币切换并将以下下拉列表添加到

magento/app/design/frontend/default/yourtheme/template/directory/currency.phtml

这会加载所有网站并将当前会话 ID 应用为查询字符串，以便 magento 知道在任何域上使用哪个会话。

```
<?php
/**
 * Currency switcher
 *
 * @see Mage_Directory_Block_Currency
 */
?>
<div class="top-currency">
<?php
$websites = Mage::getModel('core/website')->getCollection();
$this_session_id = Mage::getSingleton('core/session', array('name' => 'frontend'))->getSessionId();
?>
<select id="website-changer" onChange="document.location=this.options[selectedIndex].value">
<?php
foreach($websites as $website):
    $default_store = $website->getDefaultStore();
    $website_currency = $default_store->getBaseCurrency()->getCurrencyCode();
    $url_obj = new Mage_Core_Model_Url();
    $default_store_path = $url_obj->getBaseUrl(array('_store'=> $default_store->getCode()));
    $default_store_path .= Mage::getSingleton('core/url')->escape(ltrim(Mage::app()->getRequest()->getRequestString(), '/'));
    $default_store_path = explode('?', $default_store_path);
    $default_store_path = $default_store_path[0] . '?SID=' . $this_session_id;

?>
    <option <? if(strstr($default_store_path,Mage::getBaseUrl())):?>selected="selected"<?endif; ?> value="<?=$default_store_path ?>">
    <?=$website_currency?>
    </option>
<?endforeach;?>
</select>
</div> 
```

此查询字符串只会在您第一次切换时应用，但 magento 会记住存储在 cookie 中的会话 ID。

*   为了使其正常工作，请覆盖

magento/app/code/core/Mage/Core/Model/Session/Abstract/Varien.php

和

替换这个

```
// potential custom logic for session id (ex. switching between hosts)
$this->setSessionId(); 
```

和

```
// potential custom logic for session id (ex. switching between hosts)
/* Amend to ensure shopping carts are shared between websites */
if (isset($_COOKIE['lastsid']))
{
  session_decode(file_get_contents(Mage::getBaseDir('session').'/sess_'.$_COOKIE['lastsid']));
            setcookie ('lastsid', '', time() - 3600);
        }

        if (isset($_GET['SID']))
        {
            $this->setSessionId($_GET['SID']);
            session_decode(file_get_contents(Mage::getBaseDir('session') . '/sess_' . $_GET['SID']));
            setcookie('lastsid', $_GET['SID']);
            $_COOKIE['lastsid'] = $_GET['SID'];
        }
        else
        {
            $this->setSessionId();
        }
        /* Amend end */ 
```

现在应该显示多种货币，在多个网站上以多种货币收费，并在此共享登录和购物车之上。这个解决方案是我在互联网上找到的知识的集合，结合了我自己想出的一些点点滴滴，所以感谢任何提供建议的人！

# php - PHP For Each Loop 的输出是应有的两倍

> ID：12374294
> 
> 赞同：1
> 
> 时间：2012-09-11T16:44:15.283
> 
> 标签：php, mysql

我正在运行下面的代码来回显 MySQL 数据库中单行的内容，它当前输出的内容似乎是输出的两倍。见下文

```
$result = mysql_query("SELECT * FROM table WHERE this='1'") or die(mysql_error()); 
$row = mysql_fetch_array($result);
    foreach($row as $key => $field) {
        if($key != 'id' && $key != 'doss' && $key != ''){
            echo "Field name: $key = $field<br />";
            $missing =$missing+$field;
        }
     } 
```

输出是：

```
Field name: 1 = 0
Field name: go = 0
Field name: 2 = 1
Field name: het = 1
Field name: 3 = 0
Field name: quf = 0
Field name: 4 = 0
Field name: sid = 0
Field name: 5 = 1
Field name: ram = 1
Field name: 6 = 1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T16:46:01.460

`mysql_fetch_array`将生成一个包含数字键和关联键的数组。

默认定义是：

```
array mysql_fetch_array ( resource $result [, int $result_type = MYSQL_BOTH ] ) 
```

如果您想获得唯一值，请使用`MYSQL_ASSOC`或`MYSQL_NUM`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T16:47:33.730

`mysql_fetch_array`默认情况下返回一个包含数字索引和关联键的数组。

如果你想要一个或另一个，你可以传递额外的选项：

```
$row = mysql_fetch_array($result, MYSQL_NUM); 
```

或者

```
$row = mysql_fetch_array($result, MYSQL_ASSOC); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T16:48:46.817

尝试：

```
mysql_fetch_array($result, MYSQL_ASSOC); 
```

[http://php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)

顺便说一句，去 PDO！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T16:46:43.083

`mysql_fetch_assoc`是你要找的功能

# linq - Lightswitch 查询以显示订单中使用的供应商

> ID：12374296
> 
> 赞同：1
> 
> 时间：2012-09-11T16:44:21.833
> 
> 标签：linq, visual-studio-lightswitch

这是我正在尝试做的事情：

我有订单、订单项和供应商。每个 Order 可以有多个 OrderItem，每个 OrderItem 都绑定到一个 Vendor。我有一个屏幕显示每个订单的订单项目。该屏幕上有一个供应商下拉列表，可让您过滤订单项目列表。问题是下拉列表显示了数据库中的所有供应商（数百个），我一直试图让该列表仅显示与订单项目相关的供应商（通常少于十几个）。

如果我使用 SQL，我会这样做：

```
SELECT VendorID, VendorName
FROM Vendors V
JOIN OrderItems O ON V.VendorID = O.VendorID
WHERE O.OrderID = @OrderID 
```

或这个：

```
SELECT VendorID, VendorName
FROM Vendors
WHERE VendorID IN (SELECT VendorID 
                   FROM OrderItems 
                   WHERE OrderID = @OrderID) 
```

我无法弄清楚如何在 Lightswitch 中执行此操作，因为它不允许在查询设计器或 Linq 查询中进行连接。我也不知道如何使用 IN 运算符之类的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T00:30:26.983

好吧，事实证明 Lightswitch 不允许您跨不同的数据集进行查询。在这种情况下，我有一些用于 Order 和 Order Items 的本地表，以及来自我们数据仓库的供应商表。我为供应商创建了一个本地表，从数据仓库导入数据，现在一切都按预期工作。

# javascript - 成功函数中的jQuery ajax成功函数？

> ID：12374297
> 
> 赞同：0
> 
> 时间：2012-09-11T16:44:33.377
> 
> 标签：javascript, jquery

我试图在函数的成功函数中调用 ajax 函数。这是我的代码：

```
success: function () {
    jQuery.ajax({
        type: "POST",
        url: "script.php?subtype=3",
        data: "page=1",
        beforeSend: function () {
            jQuery(".data").animate({opacity: 0.2}, 150);
            jQuery(".outer-data").css({'background': 'url("ajax-loader.gif") no-repeat scroll 50% 50%'});
        },
        success: function (msg) {
            jQuery("#container_cat").ajaxComplete(function (event, request, settings) {
                jQuery(".outer-data").css({'background': 'none'});
                jQuery("#container_cat").html(msg);
            });
        }
        // ...
    });
} 
```

即使我从 Firebug 控制台中得到响应

```
jQuery("#container_cat").html(msg); 
```

我在文档中没有得到任何输出。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:25:57.963

似乎问题在于您在成功函数中调用 ajaxComplete() 函数。您不需要在成功函数中使用 ajaxComplete，因为只有在 ajax 请求完成并成功时才会执行成功函数。所以在里面使用ajaxComplete是没有意义的。供参考：[ajaxComplete docs](http://www.w3schools.com/jquery/ajax_ajaxcomplete.asp) 您可以在成功功能之前使用 ajaxComplete。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T17:22:56.683

```
success: function () {
    jQuery.ajax({
        type: "POST",
        url: "script.php?subtype=3",
        data: "page=1",
        beforeSend: function () {
            jQuery(".data").animate({opacity: 0.2}, 150);
            jQuery(".outer-data").css({'background': 'url("ajax-loader.gif") no-repeat scroll 50% 50%'});
        },
        success: function (msg) {
            jQuery(".outer-data").css({'background': 'none'});
            jQuery("#container_cat").html(msg);
        }
        // ...
    });
} 
```

# c++ - 模板复制构造函数

> ID：12374303
> 
> 赞同：8
> 
> 时间：2012-09-11T16:44:56.357
> 
> 标签：c++

给定以下代码， Foo 是否具有复制构造函数？将 Foo 与 STL 容器一起使用是否安全？

```
class Foo
{
public:
   Foo() {}

   template <typename T>
   Foo(const T&) {}   
}; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T16:48:24.090

The standard explicitly says that a copy constructor is a non-templated constructor that takes a reference to a possibly const-volatile object of the same type. In the code above you have a *conversion* but not *copy* constructor (i.e. it will be used for everything *but* copies, where the implicitly declared constructor will be used).

> Does `Foo` have a copy constructor?

Yes, the implicitly declared/defined copy constructor.

> Is it safe to use `Foo` with standard library containers?

With the current definition of `Foo` it is, but in the general case, it depends on what members `Foo` has and whether the implicitly defined copy constructor manages those correctly.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T16:49:51.170

根据标准，复制构造函数必须是以下签名之一：

```
Foo(Foo &);
Foo(Foo const &);
Foo(Foo volatile &);
Foo(Foo const volatile &);

Foo(Foo&, int = 0, );
Foo(Foo&, int = 0, float = 1.0); //i.e the rest (after first) of the 
                                 //parameter(s) must have default values! 
```

由于您代码中的模板构造函数与上述任何形式都不匹配，因此**不是** *复制*构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T16:48:24.107

`Foo` has a compiler generated copy constructor, which cannot be replaced by the template conversion constructor you have provided.

```
Foo f0;
Foo f1(f0); // calls compiler-synthesized copy constructor
Foo f2(42); // calls template conversion constructor with T=int 
```

# python - 为 python 脚本设置默认解释器

> ID：12374307
> 
> 赞同：4
> 
> 时间：2012-09-11T16:45:10.137
> 
> 标签：python, default, interpreter

我正在使用一个只能在 python 2.7 中找到的模块，所以当我运行我的脚本时，我必须指定`python2.7 script`而不是仅仅指定`script`. 我知道那里有更大的问题，但我仍然想知道 - 在编写 python 脚本时，是否可以将解释器默认设置为 2.7？也许通过设置`#! /usr/bin/env python`例如？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T16:48:43.387

大多数 unix 环境都有`python2.7`可执行文件，因此您可以编写：

```
#!/usr/bin/env python2.7 
```

显然，这对 Windows 没有多大帮助。您至少可以在启动后检查 python 版本，尽管如果更高版本可用，它不会帮助您运行：

```
import sys
print sys.version_info
...really do checks here... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:48:59.337

使用 shebang 是一种适当的方式来指定这一点，是的。使用 .找出`python2.7`您的 PATH 中的位置`which python2.7`。这是例如`/usr/bin/python2.7`。然后设置shebang：

```
#!/usr/bin/python2.7 
```

当然，这只适用于 Python 2.7 在此位置可用的系统 :) 这也适用于可能的系统：`/usr/bin/env python2.7`

然后使脚本可执行并使用`$ ./wonderful_python_script.py`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T16:54:16.550

如果您使用的是 Windows，请安装 Python 3.3，它具有[一个新的启动器](http://www.python.org/dev/peps/pep-0397/)，可在 Windows 下提供 shebang 支持。这将为您提供一种（终于！）明确指定解释器版本的合理且跨平台的方式。

# groovy - Groovy 中变量名后的空方括号是什么意思？

> ID：12374308
> 
> 赞同：1
> 
> 时间：2012-09-11T16:45:12.413
> 
> 标签：groovy

我对 groovy 很陌生，查看一些现有的代码，我看到了：

```
def timestamp = event.timestamp[] 
```

我不明白这一行的空方括号在做什么。请注意，此处定义的时间戳应该接收一个长值。

在这段代码中，`event`是在我们庞大的代码库中的其他地方定义的，所以我不确定它是什么。我以为它是一张地图，但是当我在地图上使用这个符号编写一些单独的测试代码时，方括号导致一个空值被分配给时间戳。然而，在上面的代码中，括号是获得正确（非空）值所必需的。

一些快速的谷歌搜索并没有太大帮助（很难在“[]”上搜索）。

编辑：原来 event 和 event.timestamp 都是 zero.core.groovysupport.GCAccessor 对象，正如下面的答案所说， [] 必须在这些对象上调用 getAt() 并返回一个值（在这种情况下，一个 long ）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:48:39.830

方括号将调用该`getAt(Object)`对象的底层方法，因此该行可能正在调用该对象。

我做了一个小脚本：

```
class A { 
    def getAt(p) { 
        println "getAt: $p"
        p 
    }
}
def a = new A()
b = a[]
println b.getClass() 
```

它返回作为参数传递的值。在这种情况下，一个`ArrayList`. 也许那个时间戳对象上有一些元编程。`def timestamp`运行代码后包含什么？

还要检查你的 groovy 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:56:10.260

空列表，找到[了这个](http://groovy.codehaus.org/Collections)。这里有点相关/可能有用[的问题](https://stackoverflow.com/questions/11785134/math-with-mysql-timestamps-in-groovy)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T17:40:24.963

不是在计算机上，但看起来它正在调用该方法`event.timestamp`并将一个空列表作为参数传递。

与以下相同：

```
def timestamp = event.timestamp( [] ) 
```

# jquery - jQuery Mobile 列表中的 jQuery Parse XML 显示 UL UL 仅返回 XML 中的最后一项

> ID：12374309
> 
> 赞同：4
> 
> 时间：2012-09-11T16:45:14.297
> 
> 标签：jquery, jquery-mobile, jquery-xml

我正在使用 jQuery Mobile 1.1.1 和 jQuery 1.7.1。JQuery mobile 可以有一个嵌套列表，点击后可以在另一个屏幕中显示下一个 ul。请参阅此示例：http: [//jquerymobile.com/demos/1.1.1/docs/lists/lists-nested.html#&ui-page=0-8](http://jquerymobile.com/demos/1.1.1/docs/lists/lists-nested.html#&ui-page=0-8)

我试图通过解析 XML 数据文件来做到这一点。我列出列表的内容没有问题，但是，在单击第一个父项时，我总是得到最后一个父项的子项。

在 Firebug 中，我可以看到那里所有的 Children 区域，但关系变得混乱......

如何单击第一个父 LI 并获取该父的孩子？

这是我的 jquery/mobile cdn 脚本部分：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script type="text/javascript">
    var xml;
    $(document).ready(function(){
        $.ajax({
            type: "GET",
            url: "test.xml",
            dataType: "xml",
            success: xmlParser
        });
    });
        //loading XML file and parsing to .main div.
        function xmlParser(data) {
            xml = data;

            $('#load').fadeOut();

            $(xml).find("Employee").each(function () {
                name = $(this).attr("name");
                var email = $(this).find("email").text();
                var jobtitle = $(this).find("jobtitle").text();
                var address = $(this).find("address").text();
                var workphone = $(this).find("workphone").text();
                var homephone = $(this).find("homephone").text();
                var cellphone = $(this).find("cellphone").text();
                var fax = $(this).find("fax").text();

                $("#list").append('<li><h3 id="name">' + name + '</h3><ul><li>Email: '+ email + '</li><li>Job Title: '+ jobtitle + '</li><li>Address: '+ address + '</li><li>Work Phone: '+ workphone + '</li><li>Home Phone: '+ homephone + '</li><li>Cell Phone: '+ cellphone + '</li><li>Fax: '+ fax + '</li></ul></li>');

                $('#list').listview('refresh'); 
            });
        }

</script>
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script> 
```

这是html：

```
<div data-role="page">
  <div data-role="header" data-theme="a">
    <h1>Employees</h1>
  </div>
  <!-- /header -->
  <div data-role="content">
    <div class="content-primary">
      <ul id="list" data-role="listview" data-theme="a" data-filter="true">
      <li id="load">Loading Data...</li>
      </ul>
      <ul id="results" data-role="listview" data-theme="a">
      </ul>
    </div>
    <!-- /contentprimary --> 
  </div>
  <!-- /content -->
  <div data-role="footer" data-theme="a">
    <div data-role="navbar">
      <p align='center'>::: Footer :::</p>
    </div>
    <!-- /navbar --> 
  </div>
  <!-- /footer --> 
</div>
<!-- /page --> 
```

这是示例 xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<THEEmployees xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Employee name="John Doe">
    <email>jdoe@email.com</email>
    <jobtitle>Software Engineer</jobtitle>
    <address>San Bernardino, CA</address>
    <workphone>555-555-1212</workphone>
    <homephone>444-555-1212</homephone>
    <cellphone>333-555-1212</cellphone>
    <fax>N/A</fax>
    <contractor>No</contractor>
  </Employee>
  <Employee name="Sam Jones">
    <email>sjones@email.com</email>
    <jobtitle>Sotware Developer</jobtitle>
    <address>San Francisco, CA</address>
    <workphone>888-888-8888</workphone>
    <homephone>999-999-9999</homephone>
    <cellphone>101-010-1010</cellphone>
    <fax>555-555-6666</fax>
    <contractor>No</contractor>
  </Employee>
  <Employee name="Hank Tree">
    <email>htree@email.com</email>
    <jobtitle>Software Developer</jobtitle>
    <address>Everett, WA</address>
    <workphone>898-899-9955</workphone>
    <homephone>456-564-5566</homephone>
    <cellphone>899-999-9989</cellphone>
    <contractor>Yes</contractor>
  </Employee>
  <Employee name="Urki Yuri">
    <email>uyuri@email.com</email>
    <jobtitle>Project Engineer</jobtitle>
    <address>Washington DC</address>
    <workphone>222-222-2222</workphone>
    <cellphone>222-222-2222</cellphone>
    <fax>569-596-5696</fax>
    <contractor>No</contractor>
  </Employee>
</THEEmployees> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T00:48:38.463

只需放在`$('#list').listview('refresh');`后面`.each()`，就是这样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T12:04:16.207

```
$("#list").append('<li><h3 id="name">' + name + '</h3><ul><li>Email: '+ email + '</li><li>Job Title: '+ jobtitle + '</li><li>Address: '+ address + '</li><li>Work Phone: '+ workphone + '</li><li>Home Phone: '+ homephone + '</li><li>Cell Phone: '+ cellphone + '</li><li>Fax: '+ fax + '</li></ul></li>');
$('#list').listview('refresh');
<!-- Put It Here --> 
```

# mysql - mysql_result()：无法跳转到第 0 行

> ID：12374318
> 
> 赞同：0
> 
> 时间：2012-09-11T16:45:52.410
> 
> 标签：mysql, warnings, row, fetch

代码：

```
$qry_categorie = "SELECT id_category FROM wrs_category_product WHERE id_product = ". $row['id_product'] ."";
$query_categorie = mysql_query($qry_categorie);
$ciclaid = 0;
$lista_id_categorie_completa = '';

while($id_categorie = mysql_fetch_row($query_categorie)) {
    $lista_id_categorie_completa .= $id_categorie[$ciclaid] . ',';
    ++$ciclaid;
} 
```

当我尝试：

```
echo $lista_id_categorie_completa; 
```

我希望拥有：

```
3,63,18,5,57 
```

但回声打印：

```
3,,,,,,, 
```

并且打开 PHP 错误报告，我看到很多错误：

> mysql_result()：无法跳转到第 0 行

有任何想法吗？

# c++ - 函数返回临时对象行为不端

> ID：12374319
> 
> 赞同：1
> 
> 时间：2012-09-11T16:45:54.110
> 
> 标签：c++, string, oop, function, return-value

好的，非常简单的`String`类，它包含*常量*字符串（即一旦初始化就不能更改），实现了复制 ctor 和***连接***功能`conc`。正是这个函数给我带来了麻烦，因为我真的无法弄清楚为什么我创建的局部变量没有作为返回值正常传递。

代码：

```
class String
{
public:
    String(char*);
    String(const String& other);
    ~String();
    friend String conc(const String&, const String&);
    friend std::ostream& operator<<(std::ostream&, const String&);
private:
    const char* const str;
};

String::String(char* aStr) : str(aStr) {}

String::String(const String& other) : str(other.str) {}

std::ostream& operator<<(std::ostream& out, const String& s)
{
    out<<s.str<<"\n";
    return out;
}

String::~String()
{
    delete str;
}

String conc(const String& s1, const String& s2)
{
    int n = strlen(s1.str) + strlen(s2.str);
    int i, j;
    char* newS = new char[n+1];
    for(i = 0; i < strlen(s1.str); ++i)
    {
        newS[i] = s1.str[i];
    }
    for(j = 0; j < strlen(s2.str); ++j)
    {
        newS[i+j] = s2.str[j];
    }
    newS[i+j] = '\0';  //newS is made correctly 
    String tmp(newS); // the tmp object is made correctly
    return tmp;   // here tmp becomes something else --- Why??
}

int main()
{
    String s1("first");
    String s2("SECOND");

    String s3 = conc(s1, s2); //here the copy ctor should be called, right?
    std::cout<<s3;
    _getch();
} 
```

正如您在评论中看到的那样，问题出在`conc`最后的函数中。我已经让函数返回 a `String`，而不是`String&`故意的，因为它返回的值不应该是左值......

请解释和帮助，谢谢！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T16:56:00.603

这里到处都是内存管理问题。每个`String`对象都应该拥有自己的内存。这意味着`String::String(char*)`需要分配一个 char 数组并复制输入字符串的内容；`String::String(const String&)`需要分配一个char数组并复制输入字符串的内容；并且`String::operator=`需要删除自己的字符串（除非和输入字符串相同），分配一个char数组，复制输入字符串的内容。最后，`String::~String()`应该`delete[]`是char数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T16:51:32.803

这不是你想的那样：问题是删除`temp`. 您调用`delete`而不是在分配有- 未定义行为`delete[]`的数组上。`new[]`

修复该错误后，您将遇到与`String`使用字符串文字初始化的 s 相关的其他错误：将它们传递给`delete[]`也是未定义的行为。

问题的根本原因是您的类不允许您区分必须释放的内存和不能释放的内存。您应该统一执行，例如始终将内容复制到您在构造函数中分配的数组中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T16:57:22.813

你的课有几个问题：

*   您的`String( char * )`构造函数假定传递给它的指针的所有权，因此如果您使用字符串文字构造对象，析构函数将尝试使用`delete`它，从而导致未定义的行为。

*   您的复制构造函数假定属于被复制对象的字符串的所有权，而不是制作自己的副本，因此字符串将被双重删除。

*   在`conc`函数中，您使用分配内存，`new[]`但随后您使用`delete`它而不是`delete[]`导致未定义的行为

*   成员变量`str`应该是一个 char 数组，所以析构函数必须`delete[]`是它而不是`delete`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T16:50:21.027

您需要更改构造函数，以便复制 C 字符串，例如：

```
String::String(const String& other) : str(strdup(other.str)) {} 
```

如果你`strdup`在上面使用你应该适当地改变你的析构函数，所以不要使用`delete`你使用`free`

```
String::~String() { free(str); } 
```

更改您的其他构造函数是一个好主意，这样它就不会获取 C 字符串，而是制作它的副本，这样所有构造函数的行为通常会更加一致和安全：

```
String::String(const char* aStr) : str(strdup(aStr)) {} 
```

如果您这样做，无论客户端代码是否将分配给您的指针传递给您，它都会正常工作`malloc`or `new`。

用更多替换`strdup`和应该很容易，我把它留给你作为练习。`free``new``delete`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T18:59:47.280

当您从函数返回一个临时值时，会为返回值制作一个副本，并销毁该临时值。（有时可以通过[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)跳过副本，但我认为这里不会发生这种情况）。

因为您的复制构造函数复制了字符数组指针，所以两个对象现在都指向同一个内存。当临时对象被销毁时，它会销毁字符数组，现在返回的对象有一个悬空指针。

不可变字符串类的一大好处是，它可以像您在此处所做的那样轻松共享缓冲区，而无需复制开销。您只需要一种机制来计算对缓冲区的引用，以便在删除最后一个对象之前不会删除它。您可以将 a`std::shared_ptr`与[自定义删除器](https://stackoverflow.com/a/9876759/5987)一起使用，而不是`char *`指针。

您还应该[研究三法则，](http://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming))以确保您实现了所有必要的功能。

# php - pdo 语句执行失败

> ID：12374320
> 
> 赞同：0
> 
> 时间：2012-09-11T16:45:57.153
> 
> 标签：php, pdo

我有一个 pdo 块，用于将值插入到我的表中，如下所示

```
try{

        $user = 'root';
        $pass = null;
        $pdo = new PDO('mysql:host=localhost; dbname=divebay', $user, $pass);

        $name = $_POST['name'];
        $desc = $_POST['description'];
        $cond = $_POST['condGroup'];
        $sprice = $_POST['sprice'];
        $iprice = $_POST['iprice'];
        $incprice = $_POST['incprice']; 
        $duration = $_POST['duration'];
        $img = $_POST['img'];

        $owner = $_SESSION['username'];

        $valid = "set";
        $stmt2 = $pdo->prepare("SELECT * FROM auction WHERE ID = :id");
        $stmt2->bindParam(":id", $random, PDO::PARAM_INT);
        while(isset($valid)){
            $random = rand(100000,999999);
            $stmt2->execute();

            if(!$stmt2->fetch(PDO::FETCH_ASSOC)){
                unset($valid);
            }
        }

        $timestamp = time() + ($duration * 24 * 60 * 60);

        $stmt = $pdo->prepare("INSERT INTO auction(ID, name, owner, holder, sprice, iprice, incprice, etime, img, condition, description)
                      VALUES (:id, :name, :owner, :holder, :sprice, :iprice, :incprice:, :etime, :img, :condition, :description");
        $stmt->bindParam(':id', $random, PDO::PARAM_INT);
        $stmt->bindParam(':name', $name, PDO::PARAM_STR);
        $stmt->bindParam(':owner', $owner, PDO::PARAM_STR);
        $stmt->bindParam(':holder', $owner, PDO::PARAM_STR);
        $stmt->bindParam(':iprice', $iprice, PDO::PARAM_STR);
        $stmt->bindParam(':sprice', $sprice, PDO::PARAM_STR);
        $stmt->bindParam(':incprice', $incprice, PDO::PARAM_STR);
        $stmt->bindParam(':etime', $timestamp, PDO::PARAM_INT);
        $stmt->bindParam(':img', $img, PDO::PARAM_STR);
        $stmt->bindParam(':condition', $condition, PDO::PARAM_STR);
        $stmt->bindParam(':description', $description, PDO::PARAM_STR);
        if($stmt->execute()){
            $worked ="yes";
        }

}catch(PDOException $e){
        echo $e->getMessage();
} 
```

我不知道为什么这个语句不会执行，运行脚本时没有设置 $worked 变量。所有数据库列名和数据类型都已按原样检查正确。我从来没有遇到过直到现在才执行的语句的问题。怎么了？我该如何调试呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T17:27:50.813

如果您使用错误模式异常设置数据库连接，如果您的语句有问题，PDO 将引发异常。我还看到您正在为 PDO 使用 MySQL 驱动程序。如果你这样做，你应该总是禁用模拟的准备好的语句。所以我会写你的连接如下（注意我也设置了编码）：

```
$pdo = new PDO('mysql:host=localhost; dbname=divebay;charset=utf8', $user, $pass);
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

另请参阅[此帖子](https://stackoverflow.com/questions/134099/are-pdo-prepared-statements-sufficient-to-prevent-sql-injection/12202218#12202218)以获取有关此内容的更多信息。

一旦你这样做了，你会发现你的陈述是错误的。`)`您在声明的末尾缺少一个：

```
$stmt = $pdo->prepare("INSERT INTO auction(ID, name, owner, holder, sprice, iprice, incprice, etime, img, condition, description)
                       VALUES (:id, :name, :owner, :holder, :sprice, :iprice, :incprice:, :etime, :img, :condition, :description)");
                                                                                                                                ^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T16:59:04.970

修改这一行：

```
$stmt = $pdo->prepare("INSERT INTO auction(ID, name, owner, holder, sprice, iprice, incprice, etime, img, condition, description)
                      VALUES (:id, :name, :owner, :holder, :sprice, :iprice, :incprice:, :etime, :img, :condition, :description"); 
```

到

```
$stmt = $pdo->prepare("INSERT INTO auction(ID, name, owner, holder, sprice, iprice, incprice, etime, img, condition, description)
                      VALUES (:id, :name, :owner, :holder, :sprice, :iprice, :incprice:, :etime, :img, :condition, :description)"); 
```

区别在于`)`最后。

并告诉我它现在是否有效。

# jquery - 替换 div（交换 div）

> ID：12374321
> 
> 赞同：1
> 
> 时间：2012-09-11T16:45:57.360
> 
> 标签：jquery, html

我在 div 中有一些输入。如下所示：

```
<div name="emailInput">
      <input type="text" name="email_1" /></div>
<div name="phoneInput">
      <input type="text" name="phone_number_1"   /></div>

<div name="emailInput">
      <input type="text" name="email_2"   /></div>
<div name="phoneInput">
      <input type="text" name="phone_number_2" /></div>

<div name="emailInput">
      <input type="text" name="email_3"  /></div>
<div name="phoneInput">
      <input type="text" name="phone_number_3" /></div> 
```

但在某些情况下，我需要更改输入的顺序。具体来说，我想交换电子邮件和电话位置。结果必须是：

```
<div name="emailInput">
      <input type="text" name="phone_number_1" /></div>
<div name="phoneInput">
      <input type="text" name="email_1"   /></div>

<div name="emailInput">
      <input type="text" name="phone_number_2"   /></div>
<div name="phoneInput">
      <input type="text" name="email_2" /></div>

<div name="emailInput">
      <input type="text" name="phone_number_3"  /></div>
<div name="phoneInput">
      <input type="text" name="email_3" /></div> 
```

为了实现我的目标，我编写了 jquery 代码：

```
$('div[name^= emailInput]').insertBefore('div[name^= phoneInput]'); 
```

此代码在每个 emailInputs div 之前交换了整个 phoneInputs div。我怎样才能一个一个地交换div？（输入的数量未知）

还，

```
 $('input[name^= email]').insertBefore('input[name^= phone_number]'); 
```

不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:51:54.173

我没有试过这个..但我认为它应该是这样的：

```
$('div[name=^ emailInput]').each(obj, function(i, val) {
      obj.insertBefore('div[name^= phoneInput]');

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:53:45.943

您需要单独操作它们，而不是整个选择器组。

```
 $('div[name^="emailInput"]').each(function(){
      var previousPhoneInput = $(this).prev("div[name^='phoneInput']");
      $(this).remove().insertBefore(previousPhoneInput);
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T16:58:31.853

试试这个：

```
$('input[name^="phone_number"]').each(function(){
   var $this = $(this);
   var $prev = $this.parent().prev()
   $prev.find('input').insertAfter($this);
   $this.appendTo($prev)    
}) 
```

[http://jsfiddle.net/PnT4Q/1/](http://jsfiddle.net/PnT4Q/1/)

您还可以更改 div 标签的位置。

```
$('div[name="phoneInput"]').each(function(){
  var $this = $(this);
  $this.insertBefore($this.prev())   
}) 
```

# android - Android - 如何在自定义 MyLocationOverlay 中添加阴影

> ID：12374322
> 
> 赞同：0
> 
> 时间：2012-09-11T16:45:57.810
> 
> 标签：android, google-maps, mylocationoverlay

我想为 MyLocationOverlay 的自定义标记添加阴影。我用[这个问题](https://stackoverflow.com/questions/10887532/mylocationoverlay-custom-image-but-no-shadow/10894663#10894663)试过这个：

```
 @Override
  protected void drawMyLocation(Canvas canvas, MapView mapView, Location lastFix, GeoPoint myLocation, long when) {
    mapView.getProjection().toPixels(myLocation, currentPoint);
    canvas.drawBitmap(markerBitmap, currentPoint.x - this.markerBitmap.getWidth()/2, currentPoint.y - this.markerBitmap.getHeight(), null);
  }

  @Override
  public synchronized boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {

      if (getLastFix() == null) {
        return super.draw(canvas, mapView, shadow, when);
      }

      if (markerDrawable != null) {
          GeoPoint lastFixGeoPoint = new GeoPoint((int)(getLastFix().getLatitude() * 1E6), (int)(getLastFix().getLongitude() * 1E6));
          mapView.getProjection().toPixels(lastFixGeoPoint, currentPoint);

          drawAt(canvas, markerDrawable, currentPoint.x, currentPoint.y, shadow);
    } else if (getMyLocation() != null) {
        drawMyLocation(canvas, mapView, getLastFix(), getMyLocation(), when);
    }
      return super.draw(canvas, mapView, shadow, when);
} 
```

我错过了什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:03:42.950

最后，我可以为 MyLocationOverlay 的自定义标记绘制阴影，如下所示：

```
@Override
protected void drawMyLocation(Canvas canvas, MapView mapView, Location lastFix, GeoPoint myLocation, long when) {
    mapView.getProjection().toPixels(myLocation, currentPoint);

    canvas.drawBitmap(shadowBitmap, currentPoint.x - this.markerBitmap.getWidth()/2, currentPoint.y - this.markerBitmap.getHeight(), null);
    canvas.drawBitmap(markerBitmap, currentPoint.x - this.markerBitmap.getWidth()/2, currentPoint.y - this.markerBitmap.getHeight(), null);
} 
```

我希望这可以帮助别人。

# java - 如何使用 Apache Ant 以 UTF-8 编码 Java 文件？

> ID：12374324
> 
> 赞同：7
> 
> 时间：2012-09-11T16:46:01.253
> 
> 标签：java, ant, encoding, build.xml

在我的 build.xml 文件中，我通过 cxf 获取了一些 Java 文件。其中一些 Java 文件需要以 UTF-8 编码。如何使用 Ant 将编码更改为 UTF-8？

PS：我找到了有关如何将 javac 的编码设置为 UTF-8 的说明，但在 javac 之前，我需要 Java 文件为 UTF-8。否则我会得到一个错误：

> 警告：用于编码 utf-8 的不可映射字符

这是我的代码：

```
<macrodef name="lpwservice">
    <attribute name="name"/>
    <attribute name="package"/>
    <sequential>
        <property name="wsdlfile" value="${portal.basedir}/lpw/wsdl/@{name}.wsdl"/>

        <mkdir dir="${portal.basedir}/lpw/wsdl"/>
        <get src="${lpw.baseuri.cxf}/@{name}?wsdl" dest="${portal.basedir}/lpw/wsdl/@{name}.wsdl.new"/>
        <if>
            <and>
                <filesmatch file1="${portal.basedir}/lpw/wsdl/@{name}.wsdl" file2="${portal.basedir}/lpw/wsdl/@{name}.wsdl.new"/>
                <uptodate targetfile="${portal.basedir}/lpw-wsdl.jar" srcfile="${portal.basedir}/lpw/wsdl/@{name}.wsdl"/>
            </and>
            <then>
                <echo message="${wsdlfile} is up to date" level="info"/>
                <delete file="${portal.basedir}/lpw/wsdl/@{name}.wsdl.new"/>
            </then>
            <else>
                <echo message="${portal.basedir}/lpw/wsdl/@{name}.wsdl needs update" level="info"/>
                <move file="${portal.basedir}/lpw/wsdl/@{name}.wsdl.new" tofile="${portal.basedir}/lpw/wsdl/@{name}.wsdl" overwrite="true" />
                <java classname="org.apache.cxf.tools.wsdlto.WSDLToJava" fork="true" failonerror="true">
                    <arg value="-client"/>
                    <arg value="-d"/>
                    <arg value="${portal.basedir}/lpw/src"/>
                    <arg value="${portal.basedir}/lpw/wsdl/@{name}.wsdl"/>
                    <classpath>
                        <path refid="cxf.classpath"/>
                    </classpath>
                </java>
            </else>
        </if>
    </sequential>
</macrodef> 
```

我应该在这里做什么

```
<java classname="org.apache.cxf.tools.wsdlto.WSDLToJava" fork="true" failonerror="true"> 
```

在 utf-8 中编码 java 文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T18:12:02.147

Ant 的[`<copy>`](http://ant.apache.org/manual/Tasks/copy.html)任务具有属性`encoding`和`outputencoding`.

### 单个 Java 文件

```
<copy file="myJavaFile.java" tofile="myJavaFile.java" overwrite="true"
    encoding="ISO-8859-1" outputencoding="UTF-8" /> 
```

### 目录中的所有 Java 文件

```
<property name="source.dir" location="/path/to/java/files" />

<copy todir="${source.dir}" overwrite="true"
    encoding="ISO-8859-1" outputencoding="UTF-8">
  <fileset dir="${source.dir}" includes="*.java" />
</copy> 
```

只需更改`ISO-8859-1`为 Java 文件的编码格式。

# javascript - jQuery.ajax: TypeError: Property 'xhr' of object # is not a function I have a jquery.ajax object in which I want to substitute xhr. However executing the following code gives me an error: TypeError: Property 'xhr' 问问题 问问题 2012-09-11T16:46:13.137 2190 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have a jquery.ajax object in which I want to substitute xhr. However executing the following code gives me an error: TypeError: Property 'xhr' of object # is not a function The relevant code is: var req = jQuery.ajaxSettings.xhr(); req.upload.addEventListener('progress', calendar.check_progress, false); $.ajax({ url: script_root + '_save_file/'+id+'/'+timestamp, type: 'POST', processData: false, contentType: false, data: fd, xhr: req, success: function(data){ do_something(); }, error: function(data){ console.log(data); do_something_else(); } }); Grouping with xslt and child nodes I have tried some of the examples here, but I still can't get the correct output. I haven't worked much with XSLT before. I want to group on the "Detail" element and get all the "Data" elements matching that group as children to the "Detail" element. Example: input <file><detail type="A" group="1"><data><nr>1</nr></data> <data><nr>2</nr></data></detail> <detail type="B" group="1"><data><nr>3</nr></data> <data><nr>4</nr></data></detail> <detail type="B" group="2"><data><nr>5</nr></data></detail> <detail type="A" group="1"><data><nr>6</nr></data></detail></file> Wanted output ("Detail type="A" group="1"> elements grouped together and all the elements matching that group as children) <file><detail type="A" group="1"><data><nr>1</nr></data> <data><nr>2</nr></data> <data><nr>6</nr></data></detail> <detail type="B" group="1"><data><nr>3</nr></data> <data><nr>4</nr></data></detail> <detail type="B" group="2"><data><nr>5</nr></data></detail></file> Thanks for help :) javascriptjqueryhtmlajaxxmlhttprequest 4 1 回答 1 This answer is useful 2 xhr以其他方式使用。请参阅文档：http ://api.jquery.com/jQuery.ajax/ xhr: 函数 默认值：ActiveXObject 可用时 (IE)，否则为 XMLHttpRequest 创建 XMLHttpRequest 对象的回调。可用时默认为 ActiveXObject (IE)，否则为 XMLHttpRequest。重写以提供您自己的 XMLHttpRequest 实现或对工厂的增强。 可能是你正在寻找类似的东西 xhr: function() { var xhr = $.ajaxSettings.xhr(); xhr.upload.addEventListener('progress', calendar.check_progress, false); return myXhr; }, 于 2012-09-11T16:51:02.090 回答 Related 6 java - 动态地将方法体重新分配给对象 3 android - 如何区分 ActionBarSherlock 中的两个菜单项点击？ 1 mysql - 如何在mysql中获得本周前6周的结果 1 ios - 与 UIImage 分开的视图中的阴影用于动态调整 2 php - facebook php 连接 检查 cookie 2 java - 具有相同标识符值的不同对象已与会话关联 3 c++ - 函数结束后丢失指针数据 3 compression - MPI：是否有能够进行消息压缩的 mpi 库？ 1 vmware - VMWare 播放器上的黑莓 playbook 模拟器暂停 4 java - 从java自定义excel文件 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12374326
> 
> 赞同：3
> 
> 时间：
> 
> 标签：javascript, jquery, html, ajax, xmlhttprequest

I have a jquery.ajax object in which I want to substitute xhr. However executing the following code gives me an error:

```
TypeError: Property 'xhr' of object #<Object> is not a function 
```

The relevant code is:

```
 var req = jQuery.ajaxSettings.xhr();
    req.upload.addEventListener('progress', calendar.check_progress, false);

    $.ajax({
        url: script_root + '_save_file/'+id+'/'+timestamp,
        type: 'POST',
        processData: false,
        contentType: false,
        data: fd,
        xhr: req,
        success: function(data){
            do_something();
        },
        error: function(data){
            console.log(data);
            do_something_else();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:51:02.090

`xhr`以其他方式使用。请参阅文档：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

> xhr: 函数
> 
> 默认值：ActiveXObject 可用时 (IE)，否则为 XMLHttpRequest
> 
> 创建 XMLHttpRequest 对象的回调。可用时默认为 ActiveXObject (IE)，否则为 XMLHttpRequest。重写以提供您自己的 XMLHttpRequest 实现或对工厂的增强。

可能是你正在寻找类似的东西

```
xhr: function() {
    var xhr = $.ajaxSettings.xhr();
    xhr.upload.addEventListener('progress', calendar.check_progress, false);
    return myXhr;
}, 
```

# xslt - 使用 xslt 和子节点进行分组

> ID：12374327
> 
> 赞同：2
> 
> 时间：2012-09-11T16:46:15.467
> 
> 标签：xslt, grouping

我在这里尝试了一些示例，但仍然无法获得正确的输出。我以前没有用过 XSLT。我想对“Detail”元素进行分组，并将所有与该组匹配的“Data”元素作为“Detail”元素的子元素。

例子：

输入

```
<?xml version="1.0" encoding="utf-8"?>
<File>
  <Detail type="A" group="1" >
    <Data>
      <Nr>1</Nr>
    </Data>
    <Data>
      <Nr>2</Nr>
    </Data>
  </Detail>
  <Detail type="B" group="1">
    <Data>
      <Nr>3</Nr>
    </Data>
    <Data>
      <Nr>4</Nr>
    </Data>
  </Detail>
  <Detail type="B" group="2">
    <Data>
      <Nr>5</Nr>
    </Data>
  </Detail>
  <Detail type="A" group="1">
    <Data>
      <Nr>6</Nr>
    </Data>
  </Detail>
</File> 
```

想要的输出（“Detail type="A" group="1"> 元素组合在一起，并且所有与该组匹配的元素作为子元素）

```
<?xml version="1.0" encoding="utf-8"?>
<File>
  <Detail type="A" group="1" >
    <Data>
      <Nr>1</Nr>
    </Data>
    <Data>
      <Nr>2</Nr>
    </Data>
    <Data>
      <Nr>6</Nr>
    </Data>
  </Detail>
  <Detail type="B" group="1">
    <Data>
      <Nr>3</Nr>
    </Data>
    <Data>
      <Nr>4</Nr>
    </Data>
  </Detail>
  <Detail type="B" group="2">
    <Data>
      <Nr>5</Nr>
    </Data>
  </Detail>
</File> 
```

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T23:32:02.153

**一、XSLT 1.0**

这是一个使用面向推送的模板的解决方案，而不是`<xsl:for-each>`（这通常是一种更可重用的方法）。

**当这个 XSLT：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:key name="kDetailAttr" match="Detail" use="concat(@type, '+', @group)" />

  <xsl:template match="/*">
    <File>
      <xsl:apply-templates select="Detail[generate-id() = generate-id(key('kDetailAttr', concat(@type, '+', @group))[1])]" />
    </File>
  </xsl:template>

  <xsl:template match="Detail">
    <Detail type="{@type}" group="{@group}">
      <xsl:copy-of select="key('kDetailAttr', concat(@type, '+', @group))/Data" />
    </Detail>
  </xsl:template>

</xsl:stylesheet> 
```

**...应用于原始 XML：**

```
<?xml version="1.0" encoding="UTF-8"?>
<File>
  <Detail type="A" group="1">
    <Data>
      <Nr>1</Nr>
    </Data>
    <Data>
      <Nr>2</Nr>
    </Data>
  </Detail>
  <Detail type="B" group="1">
    <Data>
      <Nr>3</Nr>
    </Data>
    <Data>
      <Nr>4</Nr>
    </Data>
  </Detail>
  <Detail type="B" group="2">
    <Data>
      <Nr>5</Nr>
    </Data>
  </Detail>
  <Detail type="A" group="1">
    <Data>
      <Nr>6</Nr>
    </Data>
  </Detail>
</File> 
```

**...产生了想要的结果：**

```
<?xml version="1.0" encoding="utf-8"?>
<File>
  <Detail type="A" group="1">
    <Data>
      <Nr>1</Nr>
    </Data>
    <Data>
      <Nr>2</Nr>
    </Data>
    <Data>
      <Nr>6</Nr>
    </Data>
  </Detail>
  <Detail type="B" group="1">
    <Data>
      <Nr>3</Nr>
    </Data>
    <Data>
      <Nr>4</Nr>
    </Data>
  </Detail>
  <Detail type="B" group="2">
    <Data>
      <Nr>5</Nr>
    </Data>
  </Detail>
</File> 
```

**解释：**

*   通过正确应用[`Muenchian Grouping Method`](http://www.jenitennison.com/xslt/grouping/muenchian.html)（这在 XSLT 1.0 中是必需的，因为它没有任何“内联”分组机制），我们可以找到唯一节点并将它们的后代分组。

* * *

**二、XSLT 2.0**

**当这个 XSLT：**

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="2.0">
  <xsl:output omit-xml-declaration="no" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:template match="/*">
    <File>
      <xsl:for-each-group select="Detail"
      group-by="concat(@type, '+', @group)">
        <Detail type="{@type}" group="{@group}">
          <xsl:copy-of select="current-group()/Data" />
        </Detail>
      </xsl:for-each-group>
    </File>
  </xsl:template>
</xsl:stylesheet> 
```

**...应用于原始 XML，产生相同的正确结果。**

**解释：**

*   通过正确应用 XSLT 2.0 的[`for-each-group`](http://www.w3.org/TR/xslt20/#xsl-for-each-group)元素，我们可以得到相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:31:13.577

注意：这个问题在我接受之前在垃圾箱中搁置了 6 个小时。我的答案在垃圾箱中搁置了两个小时，然后其他人将一些非必要的评论伪装成答案。

* * *

研究孟契亚群。对于这些分组问题很方便。

最重要的是`<xsl:key>`，它基于@type 和@group 的连接创建一个键，这里的这一行，`<xsl:for-each select="File/Detail[count(. | key('details', concat(@type,'_',@group))[1]) = 1]">`，它隔离了具有特定键的 Detail 节点的第一次出现，并扩展了 @group 和 @ 的特定配对类型。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
     <xsl:key name="details" match="Detail" 
             use="concat(@type,'_',@group)"/>
    <xsl:template match='/'>
      <File>
        <xsl:for-each select="File/Detail[count(. | key('details', concat(@type,'_',@group))[1]) = 1]">
          <xsl:sort select="concat(@type,'_',@group)" />
          <Detail type="{@type}" group="{@group}">
            <xsl:for-each select="key('details', concat(@type,'_',@group))">
              <xsl:copy-of select="Data"/>  
           </xsl:for-each>
          </Detail>
       </xsl:for-each>
     </File>
   </xsl:template>   
</xsl:stylesheet> 
```

# events - Facebook create events with several owners with Graph API

> ID：12374328
> 
> 赞同：0
> 
> 时间：2012-09-11T16:46:16.620
> 
> 标签：events, facebook-graph-api, facebook-php-sdk, owner

Is it possible to create an event with the graph API with several owners/promoters ?

It seems to be possible manually so why not using Graph API, but I don't find any docs about that issue...?

Any answer ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:26:38.383

没有 API 可以更改活动的管理员，这只能通过 Facebook 自己的界面来完成。

# c# - Optimize LINQ to Objects query

> ID：12374334
> 
> 赞同：4
> 
> 时间：2012-09-11T16:46:52.973
> 
> 标签：c#, linq-to-objects

I have around 200K records in a list and I'm looping through them and forming another collection. This works fine on my local 64 bit Win 7 but when I move it to a Windows Server 2008 R2, it takes a lot of time. There is difference of about an hour almost!

I tried looking at Compiled Queries and am still figuring it out.
For various reasons, we cant do a database join and retrieve the child values

Here is the code:

```
//listOfDetails is another collection
List<SomeDetails> myDetails = null;
foreach (CustomerDetails myItem in customerDetails)
{

    var myList = from ss in listOfDetails
                 where ss.CustomerNumber == myItem.CustomerNum
                 && ss.ID == myItem.ID
                 select ss;
     myDetails = (List<SomeDetails>)(myList.ToList());
     myItem.SomeDetails = myDetails;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T16:57:35.187

我会这样做：

```
var lookup = listOfDetails.ToLookup(x => new { x.CustomerNumber, x.ID });
foreach(var item in customerDetails)
{
    var key = new { CustomerNumber = item.CustomerNum, item.ID };
    item.SomeDetails = lookup[key].ToList();
} 
```

这段代码的最大好处是它只需要循环`listOfDetails`一次来构建查找 - 这只不过是一个哈希映射。之后，我们只需使用键获取值，这非常快，因为这是构建哈希映射的目的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T16:55:59.853

我不知道为什么你在性能上有差异，但你应该能够让代码表现得更好。

```
//listOfDetails is another collection
List<SomeDetails> myDetails = ...;
detailsGrouped = myDetails.ToLookup(x => new { x.CustomerNumber, x.ID });
foreach (CustomerDetails myItem in customerDetails)
{ 
    var myList = detailsGrouped[new { CustomerNumber = myItem.CustomerNum, myItem.ID }];
    myItem.SomeDetails = myList.ToList();
} 
```

这里的想法是避免重复循环`myDetails`，而是构建基于哈希的查找。一旦构建完成，进行查找非常便宜。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T17:01:19.260

内部 ToList() 强制对每个循环进行评估，这一定会受到伤害。SelectMany 可能会让您避免使用 ToList，如下所示：

```
var details = customerDetails.Select( item => listOfDetails
    .Where( detail => detail.CustomerNumber == item.CustomerNum)
    .Where( detail => detail.ID == item.ID)
    .SelectMany( i => i as SomeDetails )
); 
```

如果您首先获取所有 SomeDetails，然后将它们分配给项目，它可能会加快速度。或者它可能不会。您应该真正配置文件以查看花费的时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T17:30:28.000

我认为您可能会从这里的加入中受益，所以：

```
var mods = customerDetails
    .Join(
        listOfDetails, 
        x => Tuple.Create(x.ID, x.CustomerNum), 
        x => Tuple.Create(x.ID, x.CustomerNumber),
        (a, b) => new {custDet = a, listDet = b})
    .GroupBy(x => x.custDet)
    .Select(g => new{custDet = g.Key,items = g.Select(x => x.listDet).ToList()});

foreach(var mod in mods)
{
    mod.custDet.SomeDetails = mod.items;
} 
```

~~我没有编译这段代码...~~

`Lookup`通过在 O(n) 时间内构建第二个列表的类似哈希表的集合（然后就是迭代第一个列表并从`Lookup`. 由于从哈希表中提取数据是 O(1)，因此迭代/匹配阶段也只需要 O(n)，随后的 GroupBy 也是如此。因此，在所有操作中都应该采用~O(3n)，这相当于 O(n)，其中 n 是较长列表的长度。

# rally - How to query for rally stories that are not tagged?

> ID：12374335
> 
> 赞同：1
> 
> 时间：2012-09-11T16:46:55.453
> 
> 标签：rally

I have a basic dropdown that contains all the tags defined for a project and two extra fields "All" and "None". The dropdown is used to filter stories on a cardboard. I have managed to make it work for individual tags and the "All" field (to show all user stories) but am having difficulties filtering the cardboard by user stories that do not have tags associated with them.

My cardboard config looks similar to this:

```
var cardboardConfig = {
    types: ['HierarchicalRequirement'],
    attribute: "ScheduleState",
    sortAscending: true,
    order: "Rank",
    fetch: "Name,FormattedID,Owner,ObjectID,Tags,Discussion",    
}; 
```

For the `cardboardConfig.query`, I have some logic to generate the query that eventually looks similar to this:

```
'Tags contains "/tag/12345"' 
```

I know `Tags` is an array containing `Tag` objects and I've written a test that showed that stories that don't have tags associated with them have an empty `Tags` array, so I tried the following to query for stories without tags but all didn't return any results:

```
'Tags = null'
'Tags = []'
'Tags contains null'
'Tags contains ""' 
```

On the net and stackoverflow, there are answers saying that Rally doesn't support `not contains` so I couldn't do the reciprocate of filtering the cardboard by all stories that have tags as well.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-19T02:27:36.997

好消息！到今天为止，这在 WSAPI v2.0 中得到了支持！

```
?query=(Tags.ObjectID = null) 
```

在 SDK 中，它看起来像这样：

```
storeConfig: {
    filters: [
        {
            property: 'Tags.ObjectID',
            value: null
        }
    ]
} 
```

同样， (Tags.ObjectID != null) 应该返回至少有一个标签的故事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:05:50.607

您的应用使用的是哪个版本的 SDK？无论如何，我相信您需要在 storeConfig 中指定“filters”配置选项，如下所示：

```
var cardboardConfig = {
    types: ['HierarchicalRequirement'],
    attribute: "ScheduleState",
    sortAscending: true,
    order: "Rank",
    fetch: "Name,FormattedID,Owner,ObjectID,Tags,Discussion",
    query: '(Tags = null)'
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T17:58:09.170

不幸的是，您是正确的——Rally 的 WSAPI 不支持集合的 is-empty（或 !is-empty）运算符。

我鼓励你在这里投票：
[https ://ideas.rallydev.com/ideas/D2055](https://ideas.rallydev.com/ideas/D2055)

# node.js - 通过 Mongoose 使用 req.body 更新和/或添加数组元素属性？

> ID：12374345
> 
> 赞同：5
> 
> 时间：2012-09-11T16:47:39.320
> 
> 标签：node.js, mongodb, express, mongoose

我有以下文件：

```
{
    "_id" : ObjectId("503b83dfad79cc8d26000004"),
    "pdfs" : [
        {
            "title" : "Test document",
            "pdf_id" : ObjectId("504f6793ce351a595d000004"),
            "created_at" : ISODate("2012-09-11T16:32:19.276Z")
        },
        {
            "title" : "Some other doc",
            "pdf_id" : ObjectId("502bf124b4642341230003f0"),
            "created_at" : ISODate("2012-09-11T11:34:19.276Z")
        }
    ]
} 
```

现在通过传入的表单`req.body`，我有 2 个字段：`title`和`description`。

我想更新`title`并插入`description`指定的 pdf_id，我该怎么做？

所以最后，我的文档现在看起来像：

```
{
    "_id" : ObjectId("503b83dfad79cc8d26000004"),
    "pdfs" : [
        {
            "title" : "This is an UPDATED title",
            "description" : "It has an ALL NEW description",
            "pdf_id" : ObjectId("504f6793ce351a595d000004"),
            "created_at" : ISODate("2012-09-11T16:32:19.276Z")
        },
        {
            "title" : "Some other doc",
            "pdf_id" : ObjectId("502bf124b4642341230003f0"),
            "created_at" : ISODate("2012-09-11T11:34:19.276Z")
        }
    ]
} 
```

为了清楚起见，我真的只是在寻找 Mongoose`update`语法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T17:29:21.620

您可以使用[`$`位置运算符](http://www.mongodb.org/display/DOCS/Updating#Updating-The$positionaloperator)来引用匹配的`pdfs`数组元素`$set`：

```
Model.update(
    { 'pdfs.pdf_id': pdf_id }, 
    { $set: { 
        'pdfs.$.title': title, 
        'pdfs.$.description': description 
    }}, function (err, numAffected) { ... }
); 
```

# telerik - 如何在 SQL Compact 4.0 中使用 Telerik ORM 反向映射？

> ID：12374346
> 
> 赞同：0
> 
> 时间：2012-09-11T16:47:42.023
> 
> 标签：telerik, mapping, sql-server-ce, reverse, telerik-open-access

我使用 SQL Server Compact 3.5 在反向映射模式下使用 Telerik ORM。我将数据库升级到 SQL Compact 4.0，反向映射开始出错。

所以我尝试使用 Telerik ORM 向导重新创建反向映射模型，并显示“无效的数据库类型”。

我有最新版本的 Telerik ORM 我安装了 Visual Studio 2010 SP1 我安装了 Visual Studio Tools for SQL Compact 4.0 SP1。我已经安装了所有必要的组件来创建和管理以标准方式创建的 SQL Compact 4.0 Telerik ORM，它可以与 SQL Comapct 4.0 一起正常工作，但是当我尝试使用反向映射向导从 SQL Compact 4.0 数据库创建模型时，它会给出错误。

有没有人遇到过这个问题？谁能确认 SQL Compact 4.0 是否支持反向映射？

专家的回答受到高度赞赏。谢谢

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T06:44:44.797

看起来您正在尝试使用[Classic API 方法](http://www.telerik.com/help/openaccess-orm/development-environment-wizards-reverse-main-window.html)创建数据层。

您可以使用[新方法](http://www.telerik.com/help/openaccess-orm/openaccess-tasks-update-schema-mechanisms-update-db-from-model.html)在应用程序中生成域模型，这样不会出现问题并且可以使用 SQL CE 4.0。

# jquery - 禁用 jquery 函数 x 秒

> ID：12374356
> 
> 赞同：1
> 
> 时间：2012-09-11T16:48:23.293
> 
> 标签：jquery

我有一个附加了 jquery 点击的图像

```
<img src=pic.gif id="action"> 
```

和一些jQuery

```
$("#action").click(function(){ 
    alert("DONE");
    }); 
```

我该如何编辑它，以使动作函数在运行后 x 秒内无法运行？假设我希望在每次单击后将其禁用 5 秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T16:59:05.483

您可以将函数存储在变量中。在那解除绑定事件并再次附加它。这确保它只会在时间段过去后运行..

试试这个

```
var click = function() {
    $("#action").click(function() {
        alert("DONE");
        // Unbind the event
        $('#action').unbind();
        // Call the function after 2 second delay
        setTimeout(function() {
            click();
        }, 2000);
    });
    };
click();
​ 
```

检查此[演示](http://jsfiddle.net/sushanth009/Jgnxn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:55:49.810

这只是一个示例，您可能希望查看[命名空间事件](http://docs.jquery.com/Namespaced_Events)以防止取消绑定所有`click`处理程序。

```
var action_click = function(){
  var $self = $(this);

  alert("done"); // do your thing

  $self.unbind('click'); // unbind the click handler

  // rebind the handler after 5 second delay
  setTimeout(function(){
    $self.click(action_click);
  }, 5000);

};

// setup initial click handler
$('#action').click(action_click); 
```

示例[**小提琴**](http://jsfiddle.net/yHVsh/)

# ruby - Rails ActiveRecord use join or includes instead of find_by_sql to get attributes of two tables

> ID：12374363
> 
> 赞同：0
> 
> 时间：2012-09-11T16:48:48.757
> 
> 标签：ruby, activerecord, ruby-on-rails-3.1

The following gets me the results I want but I am trying to figure out if I could have done this with a join or includes instead.

```
@items = Item.find_by_sql("SELECT *
    FROM items_with_metadata
    FULL OUTER JOIN items ON items.id = items_with_metadata.item_id") 
```

The result should be that I get all attributes from both tables and the attributes are null wherever the items_with_metadata did not match an item in the items table. ALSO, I do not have any associations between the two tables, the id of some items just happens to be in both tables

So for example if I have items table with

```
 id | name | active
------------------
123 |  a   |   0
456 |  b   |   1 
```

and items_with_metadata has

```
color | usable | location | item_id
-----------------------------------
 red  |   yes  |   north  |  123 
```

the result of the query will be

```
id  | name | active | color | usable | location | item_id
--------------------------------------------------------
123 |  a   |   0    |  red  |   yes  |   north  |  123
456 |  b   |   1    |       |        |          | 
```

I was hoping there was a way to do this using ActiveRecord's joins or includes or any other ActiveRecord method that is not find_by_sql

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:59:52.513

怎么样：

Item.joins('完全外连接 items_with_metadata ON items.id = items_with_metadata.item_id')

编辑：

您还可以使用：

```
@items = Item.includes(:items_with_metadata) 
```

这将只返回 Item 模型，但也会将所有相关的 ItemWithMetadata 模型加载到内存中，这将使它们通过以下方式可用：

```
@items.first.items_with_metadata 
```

最后一条语句不会导致数据库查询，而是从内存中加载项目元数据。

# ruby-on-rails - 最佳实践：放置从视图调用的函数的位置

> ID：12374365
> 
> 赞同：1
> 
> 时间：2012-09-11T16:48:52.500
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是 Ruby on Rails 和整个 MVC 做事风格的新手。这个问题与其说是技术性的，不如说是概念性的。假设我有一些功能`myFunction`，我希望用户通过按下按钮从视图中执行。我应该在模型还是控制器中具有此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:08:12.613

如果该功能与特定模型明确相关，例如“下订单”、“验证用户”，则将其放置在适当的模型上并添加少量控制器代码以创建/检索适当的模型并调用该方法。

如果它显然不属于您的一个模型，那么您可能需要为其创建一个单独的类或模块，并再次添加少量控制器代码。

[为“瘦控制器和胖模型](http://www.google.com/search?q=skinny%20controllers%20fat%20models)”做一些谷歌搜索，这是 Rails 项目普遍青睐的方法。例如，请参阅Jamis Buck 的[这篇（旧的，但仍然有用的）帖子，或](http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model)[这篇更新的帖子](http://qualityonrails.com/archives/33)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:54:18.107

它应该转到控制器的方法，该方法使用模型来执行一些业务逻辑（不必与持久性连接）。或许，您还应该阅读 RESTful 应用程序和路由（有很多关于它的指南）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T17:08:47.130

控制器只需要输入和输出，即请求参数和响应/重定向。因此，根据您的说法，如果用户单击按钮并且`myFunction`应该进入画面。将调用`myFunction` 放在视图助手内部，并将函数`myFunction`放在模型内部。因此，您的视图也从代码中清除，并且 Skinny 控制器和 Fat 模型进入画面

# ipad - 媒体查询在浏览器中工作正常但不是

> ID：12374368
> 
> 赞同：0
> 
> 时间：2012-09-11T16:49:01.330
> 
> 标签：ipad, responsive-design, media-queries

我开发了这个页面：

[http://bluebeam.com/us/support/ipad/](http://bluebeam.com/us/support/ipad/)

媒体查询在每个浏览器中都可以正常工作，但是当我在 ipad 上对其进行测试时，它什么也没做……它只是恢复到正常的 CSS。我已经清除了 iPad 上的浏览​​数据，但没有结果。我可以看到它在我的 iPhone 上运行。

谁能发现我的代码有问题？

编辑：第一个查询（水平布局）正在工作。但是当我翻转 ipad（垂直布局）时，第二个没有触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:04:05.327

如果我没记错的话，iPad 会在方向改变时交换宽度/高度值。我会试试这个：

```
/* portrait*/
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px)

/* landscape */
@media only screen 
and (min-device-width : 1024px) 
and (max-device-width : 768px) 
```

自从我遇到类似的问题以来已经有一年了，所以我可能有点落后于时代。

# php - if语句的php错误

> ID：12374369
> 
> 赞同：-4
> 
> 时间：2012-09-11T16:49:05.313
> 
> 标签：php

> **可能重复：**
> [警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在](https://stackoverflow.com/questions/5473981/warning-mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-i)

错误 -> 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在

```
 $sql = "SELECT * FROM pictures WHERE filename=$filename";
//makes a query to the database using the question in variable sql.
$result = mysql_query($sql);

ERROR ->if(!($row = mysql_fetch_array($result)))
    {
     //code....... 
```

我不明白，我做错了什么，参数没有错......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T16:50:44.973

这意味着您的查询有问题。猜测一下，我建议您需要引用您的变量：

```
$sql = "SELECT * FROM pictures WHERE filename='$filename'"; 
```

**然而**

您还应该考虑不使用`mysql_*`函数 - 它们已被弃用。如果您切换到[PDO](http://php.net/manual/en/book.pdo.php)或 mysqli_，它们不仅可以帮助您生成更安全的代码，还可以为您整理值的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T16:53:18.167

错误消息非常清楚，从 mysql_query 返回的值是布尔值（FALSE）而不是资源，这意味着您的查询失败。

你可能想要这样的东西：

```
$sql = "SELECT * FROM pictures WHERE filename='$filename'";
$result = mysql_query($sql);
if($result && $row = mysql_fetch_array($result)) { ... } 
```

# windows - 在 emacs 中输入多调希腊语

> ID：12374371
> 
> 赞同：2
> 
> 时间：2012-09-11T16:49:10.353
> 
> 标签：windows, emacs, fonts, internationalization, multilingual

我正遇到[这个](http://code.google.com/p/emacs-for-windows/issues/detail?id=3)人报告的问题。我已经在我的 Windows 计算机上安装了最新版本的 emacs，并且我发现将希腊文本粘贴到 emacs 缓冲区中工作正常，只要我更改默认字体但输入希腊文不起作用。我对这个问题进行了一些网络搜索，似乎可能有一些老式的解决方法，但我不明白为什么使用标准 Windows 多调希腊语键盘输入希腊语不能正常工作，因为它确实如此（大多数?) 其他 Windows 程序。

顺便说一句，我注意到的另一个问题是，具有多调希腊字形的字体数量似乎相当有限。（而且我根本没有找到任何固定宽度的！）有没有办法让emacs总是显示正确的字符，即使它必须从另一种字体借用字形？当然，字体错误的丑陋总比完全不出现的糟糕要好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:49:21.413

对于键盘问题，您可能想要，`M-x report-emacs-bug`因为这听起来像是我们应该解决的问题（但我自己无法解决）。对于字体，这部分在每个新的 Emacs 版本中都得到了定期改进，所以如果你运行的是 Emacs-23，你可能想用 Emacs-24 再试一次，如果它仍然没有显示那些字形，请`M-x report-emacs-bug`也.

# boost - boost::filesystem 中是否有与 sys/stat.h 几乎等价的文件？

> ID：12374373
> 
> 赞同：5
> 
> 时间：2012-09-11T16:49:23.910
> 
> 标签：boost, stat, boost-filesystem

特别是，我希望能够访问文件的 user_id 和 group_id。我能找到的最接近 stat 结构的等价物是 file_status 类，但这似乎没有适当的字段..

任何想法？干杯，本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T06:55:15.777

根据[文档](http://www.boost.org/doc/libs/1_51_0/libs/filesystem/doc/index.htm)Boost::filesystem “提供了操作文件和目录以及识别它们的路径的工具”。

虽然获取有关 user_id/group_id 的信息可能很有用，但它可能是不可移植的，因此被省略。

# javascript - 无法从嵌套中取消绑定单击

> ID：12374380
> 
> 赞同：1
> 
> 时间：2012-09-11T16:50:14.747
> 
> 标签：javascript, jquery, twitter-bootstrap

我有一个功能，允许我通过单击列表项来展开和折叠无序列表，但问题出在最低级别的 LI 我有一个嵌入了复选框的表，当用户单击表时 [编辑]显示父 li 的背景图像。

在我看来，有两条主要途径可以解决这个问题，以某种方式仅删除子 li 的背景图像或取消绑定子 li 的单击事件。我正在尝试取消绑定最低级别 LI 上的单击处理程序，但它不起作用。下面是简化版。用户不应该能够点击 td 单元格。

如果您查看 jsfiddle，我无法添加将问题完全复制到您可以看到问题的地方的 png 文件，但只要在子 li 上触发“警报”，您就可以告诉子 li 仍然是可点击的。

[http://jsfiddle.net/3CgQ6/9/](http://jsfiddle.net/3CgQ6/9/)

### HTML

```
<ul id="expList">
  <li>Category 1
     <ul>
        <li class="detailLI"> Category 1.1
           <table>
             <tr><td><input type="checkbox"></td><td>Part A</td></tr>
             <tr><td><input type="checkbox"></td><td>Part B</td></tr>
             <tr><td><input type="checkbox"></td><td>Part C</td></tr>
           </table>
        </li>
        <li class="detailLI"> Category 1.2
           <table>
             <tr><td><input type="checkbox"></td><td>Part D</td></tr>
             <tr><td><input type="checkbox"></td><td>Part E</td></tr>
           </table>
        </li>
     </ul>
  </li>
</ul> 
```

### JavaScript

```
 $('#expList').find('li:has(ul)')    
        .click( function(event) {
            //If line item is expandable but has no line items then call the service to retrieve data
            if($(event.target).hasClass('collapsed') && $(event.target).find('li').length==0){                  
                retrieveResults($(event.target));
            }
            //Toggle the lists if they show or not
            $(event.target).toggleClass('expanded');
            $(event.target).children('ul').slideToggle('medium');
            event.stopPropagation();
            $('.detailLI').unbind("click");
        })
        .addClass('collapsed')
            .removeClass('expanded')
            .children('ul').hide(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:06:24.297

为什么不向复选框元素添加单击事件并将“event.stopPropagation”放在那里以停止冒泡？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:55:11.170

使用 on() 和 off() 绑定/取消绑定事件。从 jQuery 1.7 开始，所有其他绑定/解除绑定的方法都已被弃用。

# asp.net-mvc - 编写自定义版本的 DbContext

> ID：12374384
> 
> 赞同：0
> 
> 时间：2012-09-11T16:50:31.703
> 
> 标签：asp.net-mvc, entity-framework, dbcontext

我的公司有一个产品，它最终公开了一堆我希望能够通过自定义 DbContext 和 DbSet 类与之交互的对象类型，以便我可以在基于 MVC 的网站中对它们执行 CRUD 活动。

所以基本上我想做的是拥有相当于 DbContext （[http://msdn.microsoft.com/en-us/library/gg679505(v=vs.103)](http://msdn.microsoft.com/en-us/library/gg679505(v=vs.103))）和 DbSet 的东西，这样它们就不会被绑定到数据库中在后台，但指向我们的服务器产品。

但我不知道如何做到这一点。这甚至可能吗，还是会成为某种噩梦。我四处寻找，但没有找到任何这种性质的东西，这可能表明这是一场噩梦。

任何指向正确方向的指针都非常感谢。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-11T20:14:21.117

看看这是否有帮助：[编写自定义 DbContext](http://drc.ideablade.com/xwiki/bin/view/Documentation/code-first-dbcontext#HWriteacustomDbContext)

# android - 在 Android 中序列化（或使 Parcelable）线程

> ID：12374385
> 
> 赞同：3
> 
> 时间：2012-09-11T16:50:40.103
> 
> 标签：android, multithreading, serialization

所以我有这个扩展类的`Thread`类。我使用线程将我的手机连接到蓝牙设备并保持连接。

一旦建立连接（或一旦用户与 GUI 交互），我需要传递给另一个 Activity。我想随身携带刚刚创建的线程，以便与它进行交互（停止它、重新启动它、修改它的状态）。

我应该让这个线程实现`Serializable` （或`Parcelable`）并将其作为普通的 Extra 附加到调用另一个 Activity 的 Intent 中吗？可能/正确/方便吗？

如果答案不是，我想知道为什么以及哪种方法是实现此类事情的最正确方法。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T16:53:27.547

好吧，Thread 独立于 Activity，不管它是在那里创建的还是它的内部类（如果你的 Thread 保持对第一个活动的引用，你很可能会在那里泄漏内存）。如果您希望您的线程完全独​​立于 Activity，您应该考虑简单地分离该功能。一种方法是`Application`在那里扩展和移动所有代码。那么无论如何，只要您的应用程序对象存在，您的线程就可以通过它轻松访问。正如 CommonsWare 提醒的那样，其他选择是仅使用常规`Service`并将此蓝牙通信工作委托给它。无论您选择哪种方式，它都会比尝试在这里和那里传递 Thread 更简单和更好。

# jquery - jQuery - 从动态创建的输入中获取值

> ID：12374388
> 
> 赞同：2
> 
> 时间：2012-09-11T16:51:04.207
> 
> 标签：jquery, jquery-selectors

请在此处查看演示：http: [//jsfiddle.net/9pR87/28/](http://jsfiddle.net/9pR87/28/)

1.  添加输入 - 使用新输入添加新行
2.  获取价值 - 获取最后添加的输入的价值

我正在创建一些额外的行（发票元素），但是当我想在动态创建的输入中使用获取值时，输入值始终为`undefined`. 为什么？

**为什么 jQuery 找不到动态创建的输入的值？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T16:55:43.050

我认为这足以满足您的需求：

```
$('#GetValue').click(function() {
    var i = $('table tbody tr').length-1; // subtract 1 for correct indexing
    alert($('#ItemPrice-' + i).val());
    // OR
    alert( $('[id^=ItemPrice]:last').val() );
}); 
```

***[演示](http://jsfiddle.net/9pR87/31/)***

### 根据 jsfiddle 的评论

问题是：

```
tableRow += '<td><input type="text" name="ItemPrice[]" id="ItemPrice-' + i + ' " 
                                                                              ^--- an space
placeholder="Item Price"></td>';

tableRow += '<td><input type="text" name="NumberOfItems[]" id="NumberOfItems-' + i + ' " 
                                                                                      ^-- an space
placeholder="Number Of Items"></td>'; 
```

***[这是更新和工作代码](http://jsfiddle.net/JF38y/13/)***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T16:54:52.473

```
$('#GetValue').click(function() {

    var i = $('table tbody tr').length; // this line is the issue

    alert($('#ItemPrice-' + i).val());

});​ 
```

我已经在您的代码中复制了给您带来问题的函数。我突出显示的行应该是这样的：

```
var i = $('table tbody tr').length-1; 
```

这是因为 Javascript 中的数组是 0 索引的，这意味着它们从零开始向上计数。这意味着如果你想得到数组的最后一个元素，你需要找到数组的长度并减去一个，正如我所演示的。

这一行：

```
alert($('#ItemPrice-' + i).val()); 
```

实际上返回一个数组，该数组从 0 开始计数。这就是为什么在 position 处获取元素`array.length`返回未定义的原因。

[这是一个工作演示](http://jsfiddle.net/9pR87/29/)作为证明。

# ios - iOS - 从视图的 uibutton 关闭子类 UIView

> ID：12374389
> 
> 赞同：0
> 
> 时间：2012-09-11T16:51:08.743
> 
> 标签：ios, uiview, uibutton, subclass

我创建了一个自定义子类 uiview 来显示应用内通知。我可以很好地调用视图，但是在使用 uibutton （嵌入在自定义视图中）解除它时遇到问题

按下按钮时，应用程序崩溃，我收到此错误：

> **更新 - 修复了上述问题，但现在只有按钮消失，而不是实际视图。请参阅下面的更新代码。**

```
-(id)initWithMessage:(NSString *)message{
    self = [super initWithFrame:CGRectMake(0, -70, 320, 60)];
    if (self) {        
        //Add Image
        UIImage *image = [UIImage imageNamed:@"notice-drop-down"];
        UIImageView *background = [[UIImageView alloc] initWithImage:image];
        [self addSubview:background];

        //Add Label
        UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(10, self.frame.size.height/2-25, 300, 50)];
        [label setBackgroundColor:[UIColor clearColor]];
        [label setTextColor:[UIColor blackColor]];
        [label setText:message];
        label.numberOfLines = 0;
        [label setFont:[UIFont fontWithName:@"Hand of Sean" size:16]];
        //NSLog(@"FONT FAMILIES\n%@",[UIFont familyNames]);

        [self addSubview:label];

        //Add Close Button
        UIButton *closeButton = [[UIButton alloc] initWithFrame:CGRectMake(280, self.frame.size.height/2-15, 30, 30)];
        UIImage *closeImage = [UIImage imageNamed:@"notice-close"];
        [closeButton setImage:closeImage forState:UIControlStateNormal];
        [closeButton addTarget:self action:@selector(closeNoticeDropDown:) forControlEvents:UIControlEventTouchUpInside];
        [self addSubview:closeButton];

        //Animate In
        [UIView animateWithDuration:1
                              delay:0
                            options: UIViewAnimationCurveEaseIn
                         animations:^{
                             self.frame = CGRectMake(0,70,320,60);
                         }
                         completion:nil
         ];
    }
    return self;
}

-(void)closeNoticeDropDown:(id)self{
    NoticeDropDown *notice = (NoticeDropDown *)self;
    NSLog(@"Frame: %f",notice.frame.size.width);
    //Animate In
    [UIView animateWithDuration:1
                          delay:0
                        options: UIViewAnimationCurveEaseOut
                     animations:^{
                         notice.frame = CGRectMake(0,-70,320,60);
                     }
                     completion:^(BOOL finished){
                         [notice removeFromSuperview];
                         //notice = nil;
                     }
     ];
} 
```

来自另一个视图控制器的视图调用：

```
noticeDropDown = [[NoticeDropDown alloc] initWithMessage:message];
[self.view insertSubview:noticeDropDown belowSubview:hudContainerTop]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:00:20.270

您可能会尝试在视图实例上调用您的方法（类似于`[noticeDropDown closeNoticeDropDown:...]`），但`closeNoticeDropDown:`它是一个类方法，您应该这样调用它：

```
[NoticeDropDown closeNoticeDropDown: noticeDropDown]; 
```

您的动画代码中也有一些看起来错误的东西：

*   `[UIView commitAnimations];`调用应该被删除，因为它们与 [UIView beginAnimations:... context:...] 方法配对使用，基于块的动画不需要它们

*   `[sender removeFromSuperview];`调用应该进入动画的完成块，否则它会在你的动画开始之前被调用，你不会得到想要的效果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T17:01:41.643

您已将您的方法声明为类方法，但正在将消息发送到实例。如果您希望它仍然是一个类方法，请将 [NoticeDropDown 类] 作为目标参数传递给您的 addTarget:action:forControlEvemts: 方法。否则，将方法声明中的“+”替换为“-”。

此外 - 当 UIControl 操作具有发送者参数时，它将作为发送者发送控件 - 因此您将获得 UIButton 而不是您的视图。

我的建议是将您的操作更改为实例方法并将“发送者”替换为“自我”。

对于我通过手机发布的格式，我深表歉意。回到电脑前我会尝试修复。

编辑：

像这样更改您的更新方法：

```
-(void)closeNoticeDropDown:(id)sender{
    NSLog(@"Frame: %f",notice.frame.size.width);
    //Animate In
    [UIView animateWithDuration:1
                          delay:0
                        options: UIViewAnimationCurveEaseOut
                     animations:^{
                         self.frame = CGRectMake(0,-70,320,60);
                     }
                     completion:^(BOOL finished){
                         [self removeFromSuperview];
                     }
     ];
} 
```

你不需要传入`self`一个方法，它总是存在的。

# python - Flask 可插入视图错误：“未实现错误”

> ID：12374390
> 
> 赞同：1
> 
> 时间：2012-09-11T16:51:11.367
> 
> 标签：python, flask

我正在学习如何在 Flask 中使用 Pluggable Views，因为似乎每个人都在使用它们来获得自己的优势。我有以下文件，它返回“未实现的错误”。我假设那是因为我没有实施`dispatch_request`. 然而，根据 Flask 的文档，在使用 MethodView 时：“......如果你实现了一个名为 get() 的方法，这意味着你将响应 'GET' 请求，并且 dispatch_request() 实现会自动将你的请求转发给那个。” 意思是，我不需要`dispatch_request`.

```
from flask import Flask, render_template, request, redirect, url_for, flash
from flask.views import View, MethodView
import os

SECRET_KEY = 'some_secret_key'
DEBUG = TRUE

app = Flask(__name__)
app.config.from_object(__name__)  

class Main(View):
  def dispatch_request(self):
    return "Hello World!"

class Template(View):
  def get(self):
    return render_template('index.html')

  def post(self):
    result = eval(request.form['expression'])
    flash(result)
    return self.get()

app.add_url_rule('/', view_func=Main.as_view('main'))
app.add_url_rule('/template', view_func=Template.as_view('template'), methods=['GET', 'POST']) 

if __name__ == "__main__":
  app.run() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:58:52.657

哎呀.. 愚蠢的 Python 初学者犯了我的错误。

我是子类`flask.views.View`化而不是`flask.views.MethodView`. `flask.views.View`requires `dispatch_request`，并且不会自动将 HTTP 请求转发到`dispatch_request`，`MethdoView`因此会出现错误。

# c# - UpdatePanel 中的 iFrame 未更新

> ID：12374391
> 
> 赞同：0
> 
> 时间：2012-09-11T16:51:11.710
> 
> 标签：c#, asp.net, ajax, webforms

当在页面上单击按钮时，我正在尝试更新 iFrame 的源。然而，似乎什么都没有发生……

**.ASPX：**

```
 <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Always">
        <ContentTemplate>
                <div class="accountInfo">
                    <p class="submitButton">
                        <asp:Button ID="ValidateButton" runat="server" Text="Validate" OnClick="SubmitSponsor" />
                    </p>
                </div>
                <iframe runat="server" id="PayPalFrame" height="150px" width="100%" frameborder="0"></iframe>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

**代码背后：**

```
 protected void SubmitSponsor(object sender, EventArgs e)
    {
        var driver = new Driver();
        var isvalid = driver.IsAppValid(URL.Text, APILINK, Connstring);

        if (isvalid)
        {
            PayPalFrame.Attributes.Add("src", "http://www.google.com");
            URLInvalid.Visible = false;
        }
    } 
```

我也试过： `PayPalFrame.Attributes["src"] = "http://www.google.com";`仍然没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:44:54.273

我已经测试了你的代码，它在一个示例项目中工作：

ASPX：

```
<form id="form1" runat="server">
<div>
    <asp:ScriptManager runat="server" />
    <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Always">
        <ContentTemplate>
            <div class="accountInfo">
                <p class="submitButton">
                    <asp:Button ID="ValidateButton" runat="server" Text="Validate" OnClick="SubmitSponsor" />
                </p>
            </div>
            <iframe runat="server" id="PayPalFrame" height="150px" width="100%" frameborder="0">
            </iframe>
        </ContentTemplate>
    </asp:UpdatePanel>
</div>
</form> 
```

代码隐藏：

```
public partial class UpdatePanelIFrameTester : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void SubmitSponsor(object sender, EventArgs e)
    {
        bool isvalid = true;
        if (isvalid)
        {
            PayPalFrame.Attributes.Add("src", "http://www.ironworks.com");
        }
    }
} 
```

我会检查您的代码并确保没有任何内容导致您的页面刷新/执行完整的回发（我更改了 URL，因为谷歌不允许您在标准条件下在 iframe 中查看它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:26:01.097

我相信您必须*删除*src 属性，然后重新添加它，才能正常工作。不知道为什么会这样，但我记得上次我使用更新面板时这样做了。也许是因为 src 属性总是已经存在？

无论如何，这里有一些示例代码： [如何更改 iframe 中的 src 属性](http://forums.asp.net/t/1838282.aspx/1)。

# jquery - 对 jQuery 的引用顺序是否重要？

> ID：12374395
> 
> 赞同：1
> 
> 时间：2012-09-11T16:51:18.393
> 
> 标签：jquery

我对 jQuery 很陌生。我在项目的母版页中引用 jQuery 时遇到了问题（您可以在下面找到我的母版页的一部分）。我想在页面中使用 datepicker，所以我在另一组引用（对于整个项目中的任何其他 jquery）上方添加了一组引用（jQuery ui 和 css），但是当我运行它时，它一直给我“ jQuery 未定义”警报。

有趣的是，如果我将 datepicker 的一组 refs 移到另一组之后（就像下面显示的顺序），它可以正常工作。我不知道它是否与渲染页面时的顺序有关。任何信息，将不胜感激。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>
        <asp:ContentPlaceHolder ID="TitleContent" runat="server" />
    </title>
    <script type="text/javascript" src="../../Scripts/jquery-1.7.2.min.js"></script>
    <link href="../../Content/Site.css" rel="Stylesheet" type="text/css"/>
    <!--date picker-->
    <script type="text/javascript" src="../../Scripts/jquery-ui-1.8.22.custom.min.js"></script>
    <link href="../../Content/jquery-ui-1.8.22.custom.css" rel="Stylesheet" type="text/css"/>
    <!--date picker-->
</head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:52:58.293

是的，JavaScript 是“自上而下”解析的。

所有依赖都需要在依赖引用之前被引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:53:30.760

JavaScript 是按照在 DOM 中遇到标签的顺序执行的（默认情况下）`script`——如果你在加载它的依赖项之前加载了一些具有依赖项的库，你会得到错误（正如你所发现的）

请参阅： http: [//www.whatwg.org/specs/web-apps/current-work/multipage/scripting-1.html#attr-script-async](http://www.whatwg.org/specs/web-apps/current-work/multipage/scripting-1.html#attr-script-async)

> 使用这些属性可以选择三种可能的模式。如果存在 async 属性，则脚本将在可用时立即异步执行。如果 async 属性不存在但 defer 属性存在，则在页面完成解析后执行脚本。**如果两个属性都不存在，则在用户代理继续解析页面之前立即获取并执行脚本。**

*强调我的*

# java - 方法重载和覆盖有什么区别？

> ID：12374399
> 
> 赞同：47
> 
> 时间：2012-09-11T16:51:34.347
> 
> 标签：java, overloading, overriding

**重载**方法和**覆盖**方法有什么区别？任何人都可以用一个例子来解释它吗？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-09-11T16:54:04.063

方法**重载**处理在同一个类中具有相同名称但不同参数的两个或多个方法的概念。

```
void foo(int a)
void foo(int a, float b) 
```

方法**覆盖**意味着有两个具有相同参数但实现不同的方法。其中一个将存在于父类中，而另一个将存在于派生类或子类中。注释虽然不是必需的`@Override`，但有助于在编译时[强制正确覆盖方法。](https://stackoverflow.com/a/94411/1079354)

```
class Parent {
    void foo(double d) {
        // do something
    }
}

class Child extends Parent {

    @Override
    void foo(double d){
        // this method is overridden.  
    }
} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-09-11T16:53:35.163

**方法覆盖**是指子类使用相同的参数重新定义与父类相同的方法。*例如*，标准的 Java 类`java.util.LinkedHashSet`扩展`java.util.HashSet`。该方法`add()`在`LinkedHashSet`. 如果您有一个类型为 的变量`HashSet`，并且您调用它的`add()`方法，它将`add()`根据它是 a`HashSet`还是 a来调用 的适当实现`LinkedHashSet`。这称为多态性。

**方法重载**是在同一个类中定义多个方法，它们接受不同数量和类型的参数。在这种情况下，调用的实际方法是在编译时根据参数的数量和类型决定的。*例如*，该方法`System.out.println()`被重载，因此您可以传递整数和字符串，它会调用不同版本的方法。

# linq - EF Code first - 将集合添加到集合中，适当使用 skip() 和 take()

> ID：12374409
> 
> 赞同：2
> 
> 时间：2012-09-11T16:52:19.477
> 
> 标签：linq, collections, entity-framework-4

我有这样的事情：

```
var thread = _forumsDb.Threads
                .Include("Posts")
                .Single(t => t.Id == threadId); 
```

现在，当我有一个线程和其中的一组帖子时，我想计算这些帖子，然后取出一些并删除其余的。

```
var count = thread.Posts.Count();
var tmp = thread.Posts.Skip(15).Take(15);
thread.Posts.Clear();
thread.Posts = tmp; 
```

但这显然行不通。那么，如何将收藏添加到收藏中？这里合适吗`thread.Posts.Clear();`，还是我可以做得更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:21:30.223

为了从您需要的数据库中仅加载 15 个帖子并仅执行单个数据库查询，我将使用投影：

```
var data = _forumsDb.Threads
    .Where(t => t.Id == threadId)
    .Select(t => new
    {
        Thread = t,
        Count = t.Posts.Count(),
        Posts = t.Posts.OrderBy(p => p.SomeProperty).Take(15)
    })
    .Single();

var count = data.Count;
var thread = data.Thread; 
```

请注意，如果要使用LINQ to Entities，`Take`则需要按某些属性进行排序。`Skip`如有疑问，请按邮局订购`Id`。

`Thread`如果和之间的关系`Posts`是一对多，EF 将`thread.Posts`使用 15 个加载的帖子自动填充集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:02:34.573

我会这样做：

```
var count = thread.Posts.Count();
using (var tmp = thread.Posts.Skip(15).Take(15))
{
  thread.Posts.Clear();
  foreach (var Item in tmp) 
    thread.Posts.Add(Item);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T17:06:26.800

您正在跳过您获得的所有 15 条记录。下面使用

替换这个

```
var tmp = thread.Posts.Skip(15).Take(15); 
```

和

```
var tmp = thread.Posts.Skip(15).Take(30); 
```

希望这会有所帮助。

# android - 从 listview、simplecursor 适配器和 sqlite 中删除项目

> ID：12374412
> 
> 赞同：2
> 
> 时间：2012-09-11T16:52:22.467
> 
> 标签：android

我有一个包含 3 个字段（id、名称和类型）的小表的数据库。我尝试在列表视图的一行中显示名称和类型，为此我使用了一个简单的光标适配器。主要问题是如何使用长按上下文菜单从列表视图（适配器和数据库）中删除项目。

```
usdbh = new bbdd(this);
    db = usdbh.getWritableDatabase();
    cur = db.rawQuery("SELECT id as _id, Tipo, Nombre FROM Equipos", null);

    startManagingCursor(cur);

    //String[] from=new String[] {"Tipo","Nombre"};
    //int[] id_views=new int[]{R.id.Tipo,R.id.Nombre};

    ///
    String[] columnas = new String[] {"Nombre", "Tipo"};
    int[] id_views = new int[] {R.id.Nombre, R.id.Tipo};  

    adapter = new SimpleCursorAdapter(this, R.layout.row, cur, columnas, id_views);

    String c = String.valueOf(cur.getCount());

    //Toast.makeText(getApplicationContext(), c, Toast.LENGTH_LONG).show();

    String count = String.valueOf(adapter.getCount());

    Log.v("Count", count);

    lv = (ListView) findViewById(R.id.list);

    lv.setAdapter(adapter);

    db.close();

    //cur.close();

    registerForContextMenu(lv); 
```

这是通过长按运行并选择删除的功能

```
int id = cur.getInt(0);
    String sid = String.valueOf(id);
    String equipo = cur.getString(2);
    //Toast.makeText(getApplicationContext(), "Voy a borrar" + id + equipo , Toast.LENGTH_LONG).show();

    String sql = "DELETE FROM Equipos WHERE id =" + id;
    usdbh = new bbdd(this);
    SQLiteDatabase db = usdbh.getWritableDatabase();
    try {
        db.execSQL(sql);
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    db.close();

    //Delete from listview
    lv.removeViewAt(id); 
```

谢谢

# iis-7 - IIS 7.0 将 https 重定向到 http

> ID：12374413
> 
> 赞同：1
> 
> 时间：2012-09-11T16:52:33.553
> 
> 标签：iis-7, https

我们有一个主地址 example1.example.com，我们有一个为这个地址颁发的 Https 证书。但是主要代码在 example2.example.com 上，我们曾经将第一个重定向到这个。现在我们想使用 https，我想知道我们是否可以这样做。我们在第二台服务器上没有任何 https 证书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:15:18.773

对我来说，在 IIS 7.x 上进行重定向的最佳和最简单的方法是使用 Microsoft 的 URL Rewite 模块：

*   [在这里](http://www.iis.net/downloads/microsoft/url-rewrite)找到
*   以及许多不同的配置示例，[here](http://ruslany.net/2009/04/10-url-rewriting-tips-and-tricks/#more-307)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:36:44.267

在 Global.asax 我有这个块：

```
 if (Request.ServerVariables["HTTPS"] != "on")
        {
            Response.Redirect(Request.Url.AbsoluteUri.Replace("http://", "https://"), true);
            return;
        } 
```

这会将 http 请求转换为 https，如果 example2 引用 example1，您将希望在 example1 上执行此操作。

对于您想要做的事情，这应该有效：

```
 if (Request.ServerVariables["HTTPS"] == "on")
        {
            Response.Redirect(Request.Url.AbsoluteUri.Replace("https://", "http://"), true);
            return;
        } 
```

# android - 支持来自 iOS 设备的 Kerberos 请求

> ID：12374414
> 
> 赞同：1
> 
> 时间：2012-09-11T16:52:39.470
> 
> 标签：android, ios, authentication, impersonation, kerberos

我有一个专为移动设备设计的 Web 应用程序，用于查看报告信息。该应用程序是用 ASP .Net MVC 3 编写的，并与公司网络周围的各种报告服务服务器、分析服务器和 SQL Server 进行通信。通过 Windows / Negotiate 身份验证协议和使用配置了各种 SPN 设置的 Kerberos 支持这些通信中的每一个。

该站点也可从外部访问，因此任何网络环境之外的人都可以使用他们的 Windows 凭据登录该站点。这适用于设置为支持 BES 服务器上的 kerberos 的笔记本电脑和 BlackBerry。

无论如何设置 iPhone / iPad / Android 设备以使用 kerberos 进行身份验证？目前，这些设备只是拒绝使用 kerberos 登录。如果我将站点恢复为使用 NTLM 或基本身份验证，则设备可以进行身份​​验证，但 Web 服务器无法代表当前用户的权限连接到各种数据源。

这是其他人在使用移动报告时面临的常见情况吗？如果是，是否有针对该问题的通用解决方案？

谢谢，布赖恩。

# mysql - 带有xml列的mysql表结构？

> ID：12374415
> 
> 赞同：-1
> 
> 时间：2012-09-11T16:52:39.883
> 
> 标签：mysql, xml, data-structures

这不完全是一个问题，但我只是在寻找关于这个问题的意见。

我在一家公司做我的第一份工作。他们要求我优化他们的 mysql db 全文搜索。

现在，一看到数据库结构，我就真的变脸了。

这是一个汽车零件数据库，它们有 1 个表和 3 列：ID、part_number、xml。

我只是愚蠢地不理解这一点，还是他们把所有的信息都放在了一个巨大的 xml 文本中，我把每个不同产品的所有信息都说了出来？我就是不明白，想澄清一下。难道他们没有将关于该产品的每个不同信息（例如：颜色、尺寸、制造商等）放在每个不同的列中吗？还是使用基于对象的非关系数据库（如 Mongo）？使用它来启用对 XML 文本的“全文”搜索以返回相关项目是一种“正常”的做法吗？

请赐教，要么我真的很愚蠢，不明白，要么DB完全是胡说八道。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:58:54.267

好吧，按照你描述的方式，它看起来确实有点愚蠢。在不了解数据结构的情况下很难说任何关于修改数据结构的事情，但我认为任何事情都比全文搜索更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:59:48.203

他们遇到的问题是，不同部分的属性数量是一个永无止境的列表，其中一些对许多部分是通用的，而另一些则不是。如果您尝试为每个属性放置一列，那么您最终会得到数千列 - 在某些 RDBMS 中有一些技术可以处理 - 稀疏列/表。

另一种方法是将属性规范化到存储part_id、attribute、value的属性表中——这将成为一个非常大的键值表，并且基数会迅速增长——其中一些值可能是不同的类型，并且可能相当大。它们也会重复，因此您可以再次规范化，然后意识到您已经陷入了痛苦的性能和可怕的场景中，您有多个不同类型的值字段或必须存储变体数据类型。

最后的替代方法是 FTS 字段/存储 XML - 这是您发现有人选择的。

有人做出了选择，也许是您第一次在 RDBMS 中看到它，但可能不是最后一次 - 当您在关系存储中时 - 考虑一下您将如何以不同于原作者的方式来做（在 RDBMS 的限制内） .

为具有不同属性的项目存储属性信息总是一个令人讨厌的问题——我已经看到过去人们采用的所有三个选项。

# php - KCFinder 上传文件大小限制

> ID：12374420
> 
> 赞同：0
> 
> 时间：2012-09-11T16:53:19.320
> 
> 标签：php, javascript

在我的 php.ini 中，我验证了上传限制为 20M

但是，当我尝试上传文件时，它接受大约 120kb 以下的所有内容，并拒绝超过 120kb 的所有内容。

我没有对 kcfinder 进行任何具体更改。

如果它很重要，我使用 Firefox 和 Chrome。

知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:55:42.130

文件上传会受到比`upload_max_filesize`单独影响更多的变量的影响。文件上传只是`POST`请求，因此您也需要检查`post_max_size`并根据需要进行调整。一般来说，您希望`post_max_size`至少是`upload_max_filesize`其他 POST 数据的大小 + 一些开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:25:10.253

好的，这是解决方案，但首先，我在探索这个问题时尝试并得到了什么：

*   在 php.ini 中一切似乎都很好
*   我注意到我无法上传大于特定大小的文件，大约 127 kb
*   通过浏览器，我无法轻易理解出了什么问题，所以在我的情况下，我首先注意到它必须是服务器端的东西。
*   在我的情况下，我使用的是 ispCP 控制面板（对它不太满意）并且 ispCP 有某些默认错误 400、401.html、403.html、404.html、500.html、503.html 页面甚至有些愚蠢带有“get_path()”函数的JS“”，通过浏览器（FireBug）报告为“导致问题的那个”。由于我困惑了几个小时，我删除了所有这些错误页面，然后我注意到我在（FireBug）中有另一个“错误”。但是这次我注意到它是服务器端错误 500
*   我立即明白我需要查看 /var/log/apache2/... 错误日志文件。
*   消息有：[Wed Sep 12 05:05:47] [warn] [client 12 05:05:47] mod_fcgid：HTTP 请求长度 135279（到目前为止）超过 MaxRequestLen（131072），引用：[http://url- -to--script.php?type=images&dir=](http://u-r-l--to--script.php?type=images&dir=)
*   所以我“$ apache2ctl -M”，我在列表“fcgid_module（共享）”中找到了那个模块
*   如果有人不熟悉 apache 模块，通常 apache 模块的配置文件位于此处：“/etc/apache2/mods-available/...” 我的一个如您所见是“fcgid.conf”（也有相应的每个模块的“*.load”文件）。
*   所以我在那里添加了两条配置行：

    FcgidMaxRequestLen 52428800

    MaxRequestLen 52428800

/etc/init.d/apache2 restart 并且它工作了：D

# javascript - 在 Google Maps api v3 上创建自定义按钮的错误

> ID：12374425
> 
> 赞同：0
> 
> 时间：2012-09-11T16:53:30.640
> 
> 标签：javascript, html, google-maps-api-3

我在 Google Maps 上创建了两个自定义按钮来创建标记 当我单击按钮 1 时，它会创建一个带有一个图标的标记，当我单击按钮 2 时，它会创建一个带有另一个图标的按钮，但是当我首先单击一个按钮时，创建标记然后在另一个按钮中，并创建另一个标记，它创建 2 个按钮，一个在另一个前面。我不知道为什么，这是我的代码：

这是我的[例子](http://www.inventoresdegaragem.com/dbteste/indexMK.html)

```
var map, ren, ser;

var marker;
var infowindow;
var doMark = false ;
var doMark2 = false;

//Função de Inicio

function goma()
{
    if (doMark == 0)
    {
        doNothing();
    }
    var mapDiv = document.getElementById('mappy');

    var mapOptions = {
    zoom: 12, 

    center: new google.maps.LatLng(-23.563594, -46.654239),
    mapTypeId : google.maps.MapTypeId.ROADMAP
    }

    map = new google.maps.Map( mapDiv, mapOptions );

    var teste = document.createElement('DIV');
    teste.style.padding = '1px';
    teste.style.border = '1px solid #000';
    teste.style.backgroundColor = 'white';
    teste.style.cursor = 'pointer';
    teste.innerHTML = '<img src="http://i47.tinypic.com/2dlp2fc.jpg" border="0" alt="Image and video hosting by TinyPic">';
    teste.index = 1;

    map.controls[google.maps.ControlPosition.TOP_RIGHT].push(teste);

        var rest = document.createElement('DIV2');
    rest.style.padding = '1px';
    rest.style.border = '1px solid #000';
    rest.style.backgroundColor = 'white';
    rest.style.cursor = 'pointer';
    rest.innerHTML = '<img src="http://i45.tinypic.com/2yua8ns.png" border="0">';
    rest.index = 1;
    map.controls[google.maps.ControlPosition.TOP_RIGHT].push(rest);

    google.maps.event.addDomListener(teste, 'click', function() 
    {
        doMark = true;
        doMark2 = false;
        markNow();
    });
    google.maps.event.addDomListener(rest, 'click', function() 
    {

        doMark = false;
        doMark2 = true;
        markNow2();
    });

}   

var string = JSON.stringify(data2)

function downloadUrl(url, callback) 
{
    var request = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');
    request.open('POST',url);
    request.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
    request.send('command=save&marker='+string)
    request.onreadystatechange = function()
    { 
        if(request.readyState==4) 
        {
            if(request.responseText.indexOf('bien')+1)
            {
                alert('Mapa Atualizado !');
            }
            else
            {
                alert(request.responseText);
            }
        }
    }
}

function markNow()
{
    //doMark2 = true;
    if (doMark == true)
    {

        google.maps.event.addListener(map, "click", function(event) 
        {

            marker = new google.maps.Marker({ position: event.latLng, map: map});
            if (doMark ==1)
            google.maps.event.addListener(marker, "click", function() 
            {
                infowindow.open(map, marker);
            });
        });
        var html = "<table>" +
           "<tr><td>Nome:</td> <td><input type='text' id='name'/> </td> </tr>" +
           "<tr><td>Endereco:</td> <td><input type='text' id='address'/></td> </tr>" +
           "<tr><td>Tipo:</td> <td><select id='type'>" +
           "<option value='oficina' SELECTED>oficina</option>" +
           "<option value='restaurante'>restaurante</option>" +
           "</select> </td></tr>" +
           "<tr><td></td><td><input type='button' value='Salvar' onclick='saveData()'/></td></tr>";

infowindow = new google.maps.InfoWindow({content: html});
    }
}

function markNow2()
{

    if (doMark2 == true)
    {

        google.maps.event.addListener(map, "click", function(event) 
        {
            doMark = 0
            marker = new google.maps.Marker({ position: event.latLng, map: map, icon: 'http://i45.tinypic.com/2yua8ns.png' });
            google.maps.event.addListener(marker, "click", function() 
            {
                infowindow.open(map, marker);
            });
        });
        var html = "<table>" +
           "<tr><td>Nome:</td> <td><input type='text' id='name'/> </td> </tr>" +
           "<tr><td>Endereco:</td> <td><input type='text' id='address'/></td> </tr>" +
           "<tr><td>Tipo:</td> <td><select id='type'>" +
           "<option value='oficina' SELECTED>restaurante</option>" +
           "<option value='restaurante'>oficina</option>" +
           "</select> </td></tr>" +
           "<tr><td></td><td><input type='button' value='Salvar' onclick='saveData()'/></td></tr>";

infowindow = new google.maps.InfoWindow({content: html});
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:39:49.653

您有 2 个函数 markNow() 和 markNow2()，它们一起在另一个之上创建一个标记。在 markNow() 中，应在函数内选择标记。其余代码在两个函数中是等效的。

删除 markNow2() 并将 markNow() 更改为

```
function markNow(){   

    google.maps.event.addListener(map, "click", function(event) 
    {
        if (doMark == true){
        alert("Marker 1 Chosen");
        marker = new google.maps.Marker({ position: event.latLng, map: map});
        }
        if (doMark2 == true){
        alert("Marker 2 Chosen");
        marker = new google.maps.Marker({ position: event.latLng, map: map, icon: 'http://i45.tinypic.com/2yua8ns.png' });
        }
        //if (doMark ==1)
        google.maps.event.addListener(marker, "click", function() 
        {
            infowindow.open(map, marker);
        }
        );
    }
    );
    var html = "<table>" +
       "<tr><td>Nome:</td> <td><input type='text' id='name'/> </td> </tr>" +
       "<tr><td>Endereco:</td> <td><input type='text' id='address'/></td> </tr>" +
       "<tr><td>Tipo:</td> <td><select id='type'>" +
       "<option value='oficina' SELECTED>oficina</option>" +
       "<option value='restaurante'>restaurante</option>" +
       "</select> </td></tr>" +
       "<tr><td></td><td><input type='button' value='Salvar' onclick='saveData()'/>     </td></tr>";

  infowindow = new google.maps.InfoWindow({content: html});

} 
```

这仅允许 1 个标记。

在函数 goma() 中最后从 markNow2() 更改；标记现在（）；

# html - 仅在活动时将颜色标记到锚点（最好使用 CSS）

> ID：12374426
> 
> 赞同：2
> 
> 时间：2012-09-11T16:53:30.997
> 
> 标签：html, css, hyperlink

 有这样的布局： 

[http://jsfiddle.net/UuD73/27/](http://jsfiddle.net/UuD73/27/)

```
<div>
    navi 1<br>
<a href="#anchor1">Anchor 1</a><br/>
<a href="#anchor2">Anchor 2</a><br/>
<a href="#anchor3">Anchor 3</a><br/>
    navi 2<br>
<a href="#anchor1">Anchor 1</a><br/>
<a href="#anchor2">Anchor 2</a><br/>
<a href="#anchor3">Anchor 3</a><br/>
</div>

</div>

<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
<a name="anchor1" id="anchor1">Here is anchor 1</a>
<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
<a name="anchor2" id="anchor2">Here is anchor 2</a>
<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
<a name="anchor3" id="anchor3">Here is anchor 3</a> 
```

```
​div{
    position: fixed;
    top: 0;
    right: 0;
    width: 100px;
}
a, a:active, a:visited{
    color: green;
} 
```

带有 2 个相同的导航菜单，可跳转到页面中的锚点。是否可以在单击其中一个时为 2 个活动链接着色，最好只使用 CSS？

**编辑：**我更新了小提琴。我注意到我没有显示 2 个导航菜单

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T17:22:27.337

我不知道它是否可能仅使用 css，但使用 jquery 你可以这样做。如果是这样，你想要吗？

你的 html

```
<div>
<a href="#anchor1">Anchor 1</a><br/>
<a href="#anchor2">Anchor 2</a><br/>
<a href="#anchor3">Anchor 3</a><br/>
</div>

<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
<a name="anchor1" id="anchor1">Here is anchor 1</a>
<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
<a name="anchor2" id="anchor2">Here is anchor 2</a>
<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
<a name="anchor3" id="anchor3">Here is anchor 3</a>

​ 
```

jQuery

```
$(function(){
    $('a').click(function(){
        $('a').css('color', 'green');
       var selector = $(this).attr('href');
        $(selector).css('color', 'black');
    });
});​ 
```

还有你的 CSS

```
div{
    position: fixed;
    top: 0;
    right: 0;
    width: 100px;
}
a, a:active, a:visited{
    color: green;
}
​ 
```

这里的工作示例[@jsfiddle](http://jsfiddle.net/UuD73/20/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T17:40:15.230

我继续[更新了 mattematico 的 jsFiddle](http://jsfiddle.net/UuD73/26/)

1.  :active 伪类的样式可以在单击锚点时看到，但在释放时会消失。
2.  简化 mattematico 的脚本以使用 addClass/removeClass 正确切换颜色。
3.  在样式表中添加了一个 .activeLink 类。

**编辑**

[更新小提琴](http://jsfiddle.net/UuD73/30/)

```
$(function() { 
    // selector for any anchor with an href that begins with '#'.
    var bookmarkSelector = 'a[href^="#"]';
    $(bookmarkSelector).click(function(){ 
        $(bookmarkSelector).removeClass('activeLink'); 
        $('a[href="' + $(this).attr('href') + '"]').addClass('activeLink'); 
    });
});​ 
```

1.  更新了选择器，以便 Click 功能仅适用于书签锚。
2.  添加了指向 stackoverflow 的链接和 js-alert 链接，以确保在这些情况下不会触发效果。
3.  添加了返回此帖子的链接。
4.  删除了 <br/> 标签。

# android - 如何创建具有圆角边缘和两个文本视图的自定义视图？

> ID：12374431
> 
> 赞同：0
> 
> 时间：2012-09-11T16:53:46.190
> 
> 标签：android, user-interface, layout

我想创建一个如下图所示的视图。我的实现有一些线性布局。一个带有自定义可绘制对象的根以获取圆角边缘，然后其他用于两个文本视图和视图分隔线。有没有更快更简单的方法来做到这一点？

![在此处输入图像描述](../Images/ba5dbba0fb032adaf9f131291855d17d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:10:47.737

您可以只使用 1 个 LinearLayout，即根之一。LinearLayout 仅用于订购其他视图。因此，您需要做的是使用垂直方向并添加两个文本视图。

在第一个上，您将背景颜色设置为浅灰色。并记住使用重力作为中心，这样您的文本将被放置在文本视图的中心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T09:09:06.847

我没有太多时间，只是想快速提供一个示例。这是我针对您的问题的代码：

your_main_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/your_bg.xml">

    <TextView
        android:id="@+id/tv1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="my text" />

     <View
        android:id="@+id/seperator
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:layout_below="@+id/tv1" />

      <TextView
        android:id="@+id/tv2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="2nd text here"
        android:layout_below="@+id/seperator" />

</RelativeLayout> 
```

your_bg.xml

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <corners
        android:radius="5dp"
        />
    <solid android:color="#fff" />
    <stroke android:color="#000" />

</shape> 
```

# delphi - TProcessInfo - 获取进程的完整路径

> ID：12374432
> 
> 赞同：1
> 
> 时间：2012-09-11T16:53:57.870
> 
> 标签：delphi, process, delphi-xe2

[我正在使用这个名为TProcessInfo](http://vcldeveloper.com/products/products-components/process-info/)的非可视开源组件来获取进程列表、ProcessID 和我放入 ListView 的完整路径。

我用来执行此操作的代码：

```
procedure TForm1.FormCreate(Sender: TObject);
var
  i: integer;
  Process: TProcessItem;
begin
  for i := 0 to ProcessInfo1.RunningProcesses.Count -1 do
  begin
    Process := ProcessInfo1.RunningProcesses[i];
    with lv.Items.Add do
    begin
      Caption := Process.ExeFile;
      SubItems.Add(IntToStr(Process.ProcessID));
      SubItems.Add(Process.FullPath);
    end;
  end;
end; 
```

代码将始终在最后一行中断：`SubItems.Add(Process.FullPath);`我收到一条错误消息：

系统错误。代码：87
参数不正确。

在 Component 中获取 FullPath 的代码是：

```
function TProcessItem.GetFullPath: TFileName;
var
  hProcess: THandle;
begin
  hProcess := OpenProcess(PROCESS_QUERY_INFORMATION or PROCESS_VM_READ,False,FProcessID);
  if hProcess <> 0 then
  begin
    try
      SetLength(Result,MAX_PATH);
      FillChar(Result[1],Length(Result) * SizeOf(Char), 0);
      if GetModuleFileNameEx(hProcess,0,PChar(Result),Length(Result)) > 0 then
        Result := Trim(Result)
      else
       RaiseLastOSError;
    finally
      CloseHandle(hProcess)
    end;
  end
  else
    RaiseLastOSError;
end; 
```

如果像错误状态一样 - 参数不正确，那么我该如何更改呢？

** 该组件使用 PsAPI，我在 Windows 7 Ultimate x64 上使用 Delphi XE2 也发生在 Windows XP Pro x86 上

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T17:28:57.963

发生这种情况是因为“系统空闲进程”的 PID = 0 并且`OpenProcess`使用这样的 ProcessID 值失败。修补库以避免在循环中使用它或使用 try/except。

# sql-server - 如何在 SSRS 2005 中的两个矩阵控件之间拆分数据集

> ID：12374436
> 
> 赞同：1
> 
> 时间：2012-09-11T16:54:02.053
> 
> 标签：sql-server, reporting-services, reportingservices-2005

在 SSRS 2005 中，有没有一种方法可以创建两个并排的 6 行表，以便每个表（或矩阵）具有相同数据集的一部分？

这是我用于数据集的查询。

```
Select 
Equipment_EquipmentID,
Equipment_Description,
Vendor,
Operator,
JobAccount_TrackingID
from 
(
Select row_number() over (partition by Equipment_EquipmentID order by JobAccount_TrackingID) row,*
from 
(
SELECT DISTINCT
CustomizedFieldLogEquipmentJobAccount_1.Equipment_EquipmentID, 
CustomizedFieldLogEquipmentJobAccount_1.Equipment_Description, 
NULL as Vendor, 
NULL as Operator,
CustomizedFieldLogEquipmentJobAccount_1.JobAccount_TrackingID
FROM
CustomizedFieldLogEquipmentJobAccount AS CustomizedFieldLogEquipmentJobAccount_1 INNER JOIN CustomizedAccount ON CustomizedFieldLogEquipmentJobAccount_1.Account_AccountID = CustomizedAccount.AccountID
WHERE
(CustomizedAccount.AppliesToEquipment = 1)
AND 
(CustomizedFieldLogEquipmentJobAccount_1.FieldLog_FieldLogID =@FieldLogID)
--AND
--IsRented = 0
Union
Select Distinct 
Equipment_EquipmentID,
Equipment_Description,
Null as Vendior,
NULL as Operator,
fake_TrackingID

FROM
CustomizedFieldLogEquipment

cross join
(
Select 'zzz01' fake_TrackingID
union Select 'zzz02' 
union Select 'zzz03' 
union Select 'zzz04' 
union Select 'zzz05' 
union Select 'zzz06' 
union Select 'zzz07' 
union Select 'zzz08' 
union Select 'zzz09' 
union Select 'zzz10' 
) a where FieldLog_FieldLogID = @FieldLogID --AND IsRented = 0
) b 
) c where Row<=6
order by Equipment_EquipmentID,JobAccount_TrackingID 
```

TrackingiD 是我的矩阵中的列，我需要显示总共 6 列天气或那里没有数据（因此是假的 TrackingIds）查询效果很好。但是，如果行数大于 6，我需要能够在报告中的两个矩阵控件之间拆分查询结果。本质上，我需要 2 个 6x6 表。它需要工作的方式很奇怪。如果查询结果返回超过 6 行，则用户希望其余记录流到第二个表。有点像下图：

由此：

![当前版本](../Images/85248b60721276f68eb0497aff66fb34.png)

对此：

![新概念](../Images/07598715406c5a5361a778952c8f7161.png)

我已经在表单上获得了两个矩阵控件，但是如果行数大于 7 左右，我无法弄清楚如何在两个表之间拆分数据集。

这可能吗？如果有怎么办？我已经进行了一些搜索，但无法弄清楚如何将单个记录集拆分为两个矩阵控件。任何帮助表示赞赏。我一直试图告诉用户这不是一个表单打印程序，而是一个旨在报告数据库中内容的程序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:03:05.173

将 RowNumber 列添加到您的数据集。

然后[为每个矩阵控件添加一个过滤器](http://msdn.microsoft.com/en-us/library/ms156270%28v=sql.90%29.aspx)。第一个矩阵应过滤 RowNumber 介于 1-6 之间的行，第二个矩阵将过滤 7-12。

诚然，这是一种快速而肮脏的方式。然而，报告本身超出了 SSRS 的预期用途，所以我不知道是否真的值得担心如何拆分矩阵，只要没有任何性能问题。

这似乎是如此有限和不灵活。用户真的确定他们永远只想要 x 行吗？如果他们改变了行数，你就是受害者，必须对报告进行更改以适应。

# windows - 在 Apple 计算机上安装和运行 Visual Studio 可执行文件

> ID：12374440
> 
> 赞同：0
> 
> 时间：2012-09-11T16:54:23.440
> 
> 标签：windows, visual-studio-2010

我正在讨论通过 Windows 计算机上的 Visual Studio 为我的几个朋友创建一个简单的项目。但是我知道他们中的一些人拥有 Apple 电脑而不是 Windows。我想知道（在我走远之前）是否有可能（无需安装 Parallels 等其他软件）安装我的可执行文件，以便他们可以将它与支持的数据库结构一起使用（对任何免费或 Visual Studio 附带）在他们的苹果电脑上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:20:26.370

如果没有额外的软件，您将无法做到这一点。但是，您不需要在完全安装 Windows 的情况下运行 Parallels。

你可以试试 CrossOver。它使您可以在 OS X 中运行 Windows 应用程序。我从小就用它来玩旧的 PC 游戏。效果很好。 [http://www.codeweavers.com/products/](http://www.codeweavers.com/products/)

# html - Chrome 忽略 autocomplete="off"

> ID：12374442
> 
> 赞同：645
> 
> 时间：2012-09-11T16:54:31.337
> 
> 标签：html, google-chrome, autocomplete, forms

我创建了一个使用标签框下拉菜单的 Web 应用程序。这适用于除 Chrome 浏览器（版本 21.0.1180.89）以外的所有浏览器。

尽管`input`字段和`form`字段都具有该`autocomplete="off"`属性，但 Chrome 坚持显示该字段先前条目的下拉历史记录，这会消除标签框列表。

* * *

## 回答 #1

> 赞同：402
> 
> 时间：2016-08-15T19:18:05.940

防止用户名（或电子邮件）和密码的自动完成：

```
<input type="email" name="email"><!-- Can be type="text" -->
<input type="password" name="password" autocomplete="new-password"> 
```

* * *

防止自动完成字段（**可能不起作用**）：

```
<input type="text" name="field" autocomplete="nope"> 
```

**解释：**

`autocomplete``<input>`尽管有仍然可以工作`autocomplete="off"`，但是您可以更改`off`为随机字符串，例如`nope`.

* * *

其他禁用字段自动完成的*“解决方案”*（这不是正确的方法，但它有效）：

1.

**HTML：**

```
<input type="password" id="some_id" autocomplete="new-password"> 
```

**JS（加载）：**

```
(function() {
    var some_id = document.getElementById('some_id');
    some_id.type = 'text';
    some_id.removeAttribute('autocomplete');
})(); 
```

或使用**jQuery：**

```
$(document).ready(function() {
    var some_id = $('#some_id');
    some_id.prop('type', 'text');
    some_id.removeAttr('autocomplete');
}); 
```

* * *

2.

**HTML：**

```
<form id="form"></form> 
```

**JS（加载）：**

```
(function() {
    var input = document.createElement('INPUT');
    input.type = 'text';
    document.getElementById('form').appendChild(input);
})(); 
```

或使用**jQuery：**

```
$(document).ready(function() {
    $('<input>', {
        type: 'text'
    }).appendTo($('#form'));
}); 
```

* * *

使用 jQuery 添加多个字段：

```
function addField(label) {
  var div = $('<div>');
  var input = $('<input>', {
    type: 'text'
  });

  if(label) {
    var label = $('<label>', {
      text: label
    });

    label.append(input);
    div.append(label);    
  } else {
    div.append(input);    
  }  

  div.appendTo($('#form'));
}

$(document).ready(function() {
  addField();
  addField('Field 1: ');  
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<form id="form"></form>
```

* * *

**工作于：**

*   铬：49+

*   火狐：44+

* * *

## 回答 #2

> 赞同：324
> 
> 时间：2014-03-27T16:54:07.653

**更新**

现在看来 Chrome 忽略了`style="display: none;"`or`style="visibility: hidden;`属性。

您可以将其更改为：

```
<input style="opacity: 0;position: absolute;">
<input type="password" style="opacity: 0;position: absolute;"> 
```

根据我的经验，Chrome 只会自动完成第一个`<input type="password">`和上一个`<input>`. 所以我添加了：

```
<input style="display:none">
<input type="password" style="display:none"> 
```

到了上面，`<form>`案子就解决了。

* * *

## 回答 #3

> 赞同：161
> 
> 时间：2013-04-21T11:03:21.623

Chrome 现在似乎会忽略`autocomplete="off"`，除非它在`<form autocomplete="off">`标签上。

* * *

## 回答 #4

> 赞同：143
> 
> 时间：2015-06-16T16:51:08.437

**2021 年更新：将***<input type="text">*
更改为**<input type="search" autocomplete="off" >**

 ***就这些。保留以下答案以怀旧。

* * *

为了获得可靠的解决方法，您可以将此代码添加到布局页面：

```
<div style="display: none;">
 <input type="text" id="PreventChromeAutocomplete" 
  name="PreventChromeAutocomplete" autocomplete="address-level4" />
</div> 
```

只有当表单中至少有一个其他输入元素具有任何其他自动完成值时，Chrome 才会尊重 autocomplete=off。

这不适用于密码字段——这些在 Chrome 中的处理方式非常不同。有关更多详细信息，请参阅[https://code.google.com/p/chromium/issues/detail?id=468153](https://code.google.com/p/chromium/issues/detail?id=468153)。

**更新：Chromium 团队于 2016 年 3 月 11 日将错误关闭为“不会修复”。请参阅[我最初提交的错误报告](https://bugs.chromium.org/p/chromium/issues/detail?id=468153#c164)中的最后一条评论，以获得完整的解释。TL;DR：使用语义自动完成属性，例如 autocomplete="new-street-address" 来避免 Chrome 执行自动填充。**

* * *

## 回答 #5

> 赞同：104
> 
> 时间：2015-09-15T05:55:12.227

# 现代方法

只需进行输入`readonly`，并在焦点上将其删除。这是一种非常简单的方法，浏览器不会填充`readonly`输入。因此，此方法被接受，并且永远不会被未来的浏览器更新覆盖。

```
<input type="text" onfocus="this.removeAttribute('readonly');" readonly /> 
```

下一部分是可选的。相应地为您的输入设置样式，使其看起来不像`readonly`输入。

```
input[readonly] {
     cursor: text;
     background-color: #fff;
} 
```

[**工作示例**](http://jsfiddle.net/w0wxy9ao/)

* * *

## 回答 #6

> 赞同：57
> 
> 时间：2016-01-25T17:40:03.357

好吧，聚会有点晚了，但似乎对应该如何`autocomplete`工作和不应该如何工作存在一些误解。根据 HTML 规范，用户代理（在本例中为 Chrome）可以覆盖`autocomplete`：

[https://www.w3.org/TR/html5/forms.html#autofilling-form-controls:-the-autocomplete-attribute](https://www.w3.org/TR/html5/forms.html#autofilling-form-controls:-the-autocomplete-attribute)

> 用户代理可能允许用户覆盖元素的自动填充字段名称，例如将其从“关闭”更改为“打开”以允许记住和预填充值，尽管页面作者反对，或者始终“关闭”，从不记住价值观。但是，用户代理不应允许用户轻易地将自动填充字段名称从“off”更改为“on”或其他值，因为如果始终记住所有值，无论站点的偏好如何，都会对用户产生重大的安全隐患。

因此，在 Chrome 的情况下，开发人员基本上说“我们将让用户自行决定他们是否想要`autocomplete`工作。如果你不想要它，请不要在浏览器中启用它” .

然而，对于我来说，这似乎有点过分热心，但事实就是如此。该规范还讨论了这种举措的潜在安全影响：

> “off”关键字表示控件的输入数据特别敏感（例如核武器的激活码）；或者它是一个永远不会被重复使用的值（例如银行登录的一次性密钥），因此用户每次都必须明确输入数据，而不是能够依赖 UA 来预填充对他的价值；或者文档提供了自己的自动完成机制并且不希望用户代理提供自动完成值。

所以在经历了和其他人一样的挫折之后，我找到了一个适合我的解决方案。它与`autocomplete="false"`答案相似。

Mozilla 的一篇文章正是谈到了这个问题：

[https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion](https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion)

> 在某些情况下，即使自动完成属性设置为关闭，浏览器也会继续建议自动完成值。这种意想不到的行为可能会让开发人员感到非常困惑。真正强制不完成的技巧是为属性分配一个随机字符串

所以下面的代码*应该可以*工作：

```
autocomplete="nope" 
```

以下各项也应如此：

```
autocomplete="false"
autocomplete="foo"
autocomplete="bar" 
```

我看到的问题是浏览器代理可能足够聪明，可以学习`autocomplete`属性并在下次看到表单时应用它。如果它确实这样做了，我能看到仍然解决问题的唯一方法`autocomplete`是在生成页面时动态更改属性值。

值得一提的是，许多浏览器会忽略`autocomplete`登录字段（用户名和密码）的设置。正如 Mozilla 文章所述：

> 因此，许多现代浏览器不支持登录字段的 autocomplete="off"。
> 
> *   如果站点为表单设置了 autocomplete="off"，并且表单包含用户名和密码输入字段，则浏览器仍会提供记住此登录信息，如果用户同意，浏览器将在下次登录时自动填充这些字段用户访问此页面。
> *   如果站点为用户名和密码输入字段设置了 autocomplete="off"，那么浏览器仍会提供记住此登录信息，如果用户同意，浏览器将在用户下次访问此页面时自动填充这些字段。
> 
> 这是 Firefox（自 38 版起）、Google Chrome（34 版起）和 Internet Explorer（11 版起）中的行为。

最后一点关于属性是否属于`form`元素或`input`元素的信息。规范再次给出了答案：

> 如果省略 autocomplete 属性，则使用与元素的表单所有者的 autocomplete 属性的状态相对应的默认值（“on”或“off”）。如果没有表单所有者，则使用值“on”。

所以。将其放在表单上应适用于所有输入字段。将它放在单个元素上应该只适用于该元素（即使表单上没有元素）。如果`autocomplete`根本没有设置，则默认为`on`.

**概括**

要禁用`autocomplete`整个表单：

```
<form autocomplete="off" ...> 
```

或者，如果您动态需要这样做：

```
<form autocomplete="random-string" ...> 
```

禁用`autocomplete`单个元素（无论是否存在表单设置）

```
<input autocomplete="off" ...> 
```

或者，如果您动态需要这样做：

```
<input autocomplete="random-string" ...> 
```

请记住，某些用户代理甚至可以覆盖您最艰难地尝试禁用`autocomplete`.

* * *

## 回答 #7

> 赞同：48
> 
> 时间：2014-07-22T09:43:24.613

**TL;DR：**告诉 Chrome 这是一个新密码输入，它不会提供旧密码作为自动完成建议：

```
<input type="password" name="password" autocomplete="new-password"> 
```

* * *

`autocomplete="off"`由于设计决定而无法正常工作 - 大量研究表明，如果用户可以将密码存储在浏览器或密码管理器中，他们将更难破解密码。

的规范`autocomplete` [已更改](https://html.spec.whatwg.org/multipage/forms.html#autofill)，现在支持各种值以使登录表单易于自动完成：

```
<!-- Auto fills with the username for the site, even though it's email format -->
<input type="email" name="email" autocomplete="username">

<!-- current-password will populate for the matched username input  -->
<input type="password" autocomplete="current-password" /> 
```

如果您*不*提供这些 Chrome 仍然会尝试猜测，并且当它提供时会忽略`autocomplete="off"`.

解决方案是`autocomplete`密码重置表单也存在值：

```
<label>Enter your old password:
    <input type="password" autocomplete="current-password" name="pass-old" />
</label>
<label>Enter your new password:
    <input type="password" autocomplete="new-password" name="pass-new" />
</label>
<label>Please repeat it to be sure:
    <input type="password" autocomplete="new-password" name="pass-repeat" />
</label> 
```

您可以使用此`autocomplete="new-password"`标志告诉 Chrome 不要猜测密码，即使它已为此站点存储了密码。

Chrome 还可以直接使用[凭据 API](https://developers.google.com/web/updates/2016/04/credential-management-api)管理网站的密码，这是一个标准，最终可能会得到普遍支持。

* * *

## 回答 #8

> 赞同：42
> 
> 时间：2015-05-08T10:53:31.887

目前的解决方案是使用`type="search"`. Google 不会将自动填充应用于具有某种搜索类型的输入。

见：[https ://twitter.com/Paul_Kinlan/status/596613148985171968](https://twitter.com/Paul_Kinlan/status/596613148985171968)

*2016 年 4 月 4 日更新：*看起来这是固定的！见[http://codereview.chromium.org/1473733008](http://codereview.chromium.org/1473733008)

* * *

## 回答 #9

> 赞同：33
> 
> 时间：2018-08-04T14:23:27.837

我已经通过使用随机字符解决了与谷歌浏览器的无休止的斗争。当你总是用随机字符串渲染自动完成时，它永远不会记住任何东西。

```
<input name="name" type="text" autocomplete="rutjfkde"> 
```

希望它对其他人有所帮助。

* * *

## 回答 #10

> 赞同：27
> 
> 时间：2014-11-14T13:59:01.523

**浏览器不关心 autocomplete=off auto 甚至将凭据填充到错误的文本字段？**

我通过将密码字段设置为只读并在用户单击它或对该字段使用制表键时激活它来修复它。

**修复浏览器自动填充：只读并在焦点上设置可写**（在鼠标单击和选项卡中通过字段）

```
 <input type="password" readonly  
     onfocus="$(this).removeAttr('readonly');"/> 
```

更新：Mobile Safari 在字段中设置光标，但不显示虚拟键盘。新修复像以前一样工作，但处理虚拟键盘：

```
<input id="email" readonly type="email" onfocus="if (this.hasAttribute('readonly')) {
    this.removeAttribute('readonly');
    // fix for mobile safari to show virtual keyboard
    this.blur();    this.focus();  }" /> 
```

现场演示[https://jsfiddle.net/danielsuess/n0scguv6/](https://jsfiddle.net/danielsuess/n0scguv6/)

// 更新结束

顺便说一下，关于我的观察的*更多信息：*

有时我会在 Chrome 和 Safari 上注意到这种奇怪的行为，当密码字段以*相同的形式出现时。*我猜，浏览器会寻找密码字段来插入您保存的凭据。然后它将***用户名*****自动填充到最近的 textlike-input 字段中，该字段出现***在 DOM 中的密码字段之前（只是由于观察而猜测）。由于浏览器是最后一个实例并且您无法控制它，*有时即使 autocomplete=off 也不会阻止将凭据填写*到错误的字段中，但不会阻止用户或昵称字段。*

 ** * *

## 回答 #11

> 赞同：26
> 
> 时间：2014-04-09T09:11:04.717

Chrome 版本 34 现在忽略了`autocomplete=off`， [请参阅此](http://www.theregister.co.uk/2014/04/09/chrome_makes_new_password_grab_in_version_34/)。

[很多人讨论](https://groups.google.com/a/chromium.org/d/msg/security-dev/wYGThW5WRrE/qiWrKwJ79S4J)这是好事还是坏事？你有什么看法？

* * *

## 回答 #12

> 赞同：25
> 
> 时间：2017-02-01T10:19:57.337

您可以使用`autocomplete="new-password"`

```
<input type="email" name="email">
<input type="password" name="password" autocomplete="new-password"> 
```

工作于：

*   铬：53、54、55
*   火狐：48、49、50

* * *

## 回答 #13

> 赞同：16
> 
> 时间：2021-04-09T07:28:49.713

> [2021 年适用于 Chrome（v88、89、90）、Firefox、Brave、Safari]
> 
> 已经在这里写的旧答案可以反复试验，但大多数都没有链接到任何官方文档或 Chrome 在这件事上必须说的内容。

问题中提到的问题是由于 Chrome 的自动填充功能，这是 Chrome 在此错误链接中的立场 - [https://bugs.chromium.org/p/chromium/issues/detail?id=468153#c164](https://bugs.chromium.org/p/chromium/issues/detail?id=468153#c164)

简单来说，有两种情况——

*   ***[案例 1]***：您的`input`类型不是`password`. 在这种情况下，解决方案很简单，分为三个步骤。

    *   将`name`属性添加到`input`
    *   `name`不应以电子邮件或用户名之类的值开头，否则 Chrome 仍会显示下拉列表。例如，`name="emailToDelete"`显示下拉菜单，但`name="to-delete-email"`不显示。同样适用于`autocomplete`属性。
    *   添加`autocomplete`属性，并添加对您有意义的值，例如`new-field-name`

    它看起来像这样，在你的余生中你不会再看到这个输入的自动填充 -

    ```
    <input type="text/number/something-other-than-password" name="x-field-1" autocomplete="new-field-1" /> 
    ```

*   ***[案例2]***：`input` `type`是`password`

    *   好吧，在这种情况下，无论您进行何种试验，Chrome 都会向您显示管理密码/使用现有密码的下拉菜单。Firefox 也会做类似的事情，所有其他主要浏览器也是如此。[1]
    *   在这种情况下，如果您真的想阻止用户查看管理密码的下拉菜单/查看安全生成的密码，您将不得不使用 JS 来切换输入类型，如本问题的其他答案中所述。

[1] 关于关闭自动补全的详细 MDN 文档 - [https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion](https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion)

* * *

## 回答 #14

> 赞同：15
> 
> 时间：2019-01-07T10:19:29.833

`Autocomplete="Off"`不再起作用了。

尝试仅使用随机字符串而不是`"Off"`，例如`Autocomplete="NoAutocomplete"`

我希望它有所帮助。

* * *

## 回答 #15

> 赞同：11
> 
> 时间：2014-05-05T08:09:10.933

看到 chrome 忽略了`autocomplete="off"`，我用一种愚蠢的方法解决了它，即使用“假输入”欺骗 chrome 来填充它而不是填充“真实”输入。

**例子：**

```
<input type="text" name="username" style="display:none" value="fake input" /> 
<input type="text" name="username" value="real input"/> 
```

Chrome 会填写“假输入”，提交时，服务器会取“真实输入”的值。

* * *

## 回答 #16

> 赞同：11
> 
> 时间：2016-03-10T19:25:27.703

我发布这个答案是为了给这个问题带来更新的解决方案。我目前正在使用 Chrome 49，并且对此没有给出答案。我也在寻找与其他浏览器和以前版本一起使用的解决方案。

将此代码放在表单的开头

```
<div style="display: none;">
    <input type="text" autocomplete="new-password">
    <input type="password" autocomplete="new-password">
</div> 
```

然后，对于您的真实密码字段，使用

```
<input type="password" name="password" autocomplete="new-password"> 
```

如果这不再有效，或者如果您遇到其他浏览器或版本的问题，请评论此答案。

批准日期：

*   铬：49
*   火狐：44、45
*   边缘：25
*   互联网浏览器：11

* * *

## 回答 #17

> 赞同：11
> 
> 时间：2018-11-21T17:58:44.077

不知道为什么这在我的情况下有效，但是在我使用的 chrome 上`autocomplete="none"`，Chrome 停止为我的文本字段建议地址。

* * *

## 回答 #18

> 赞同：10
> 
> 时间：2020-08-07T13:23:17.267

写一个 2020+ 的答案，以防万一这对任何人都有帮助。我在上面尝试了许多组合，尽管在我的情况下遗漏了一个键。即使我保留了 autocomplete="nope" 一个随机字符串，但它对我不起作用，因为我**缺少****name**属性！

 **所以我保留了 name='password' 和 autocomplete = "new-password"

对于用户名，我保留了 name="usrid" // 不要保留包含“用户”的字符串

和 autocomplete = "new-password" // 也一样，所以 google 停止建议密码（管理密码下拉菜单）

这对我来说效果很好。（我为 Cordova/ionic 使用的 Android 和 iOS 网络视图做了这个）

```
<ion-input [type]="passwordType" name="password" class="input-form-placeholder" formControlName="model_password"
        autocomplete="new-password" [clearInput]="showClearInputIconForPassword">
</ion-input> 
```

* * *

## 回答 #19

> 赞同：9
> 
> 时间：2013-04-16T18:59:40.713

对于任何寻找解决方案的人，我终于弄清楚了。

`autocomplete="off"`如果页面是 HTML5 页面（我使用的是 XHTML），Chrome 只服从。

我将我的页面转换为 HTML5，问题就消失了（facepalm）。

* * *

## 回答 #20

> 赞同：9
> 
> 时间：2019-02-07T03:38:59.970

`autocomplete="off"`通常工作，但并非总是如此。这取决于`name`输入字段的。“地址”、“电子邮件”、“姓名”等名称 - 将自动完成（浏览器认为它们可以帮助用户），当“代码”、“pin”等字段 - 不会自动完成（如果`autocomplete="off"`已设置）

我的问题是 - 自动完成与谷歌[地址助手搞乱了](https://developers.google.com/maps/documentation/javascript/examples/places-autocomplete-addressform)

我通过重命名来修复它

从

```
<input type="text" name="address" autocomplete="off"> 
```

至

```
<input type="text" name="the_address" autocomplete="off"> 
```

在 chrome 71 中测试。

* * *

## 回答 #21

> 赞同：9
> 
> 时间：2020-12-08T09:14:48.533

一些结束 2020 更新。我尝试了来自不同站点的所有旧解决方案。他们都没有工作！:-(
然后我发现了这个：
使用

```
<input type="search"/> 
```

自动完成功能消失了！

Chrome 86、FireFox、Edge 87 取得成功。

* * *

## 回答 #22

> 赞同：7
> 
> 时间：2017-10-29T07:02:51.670

`autocomplete=off`在现代浏览器中很大程度上被忽略 - 主要是由于密码管理器等。

您可以尝试添加`autocomplete="new-password"`它并非所有浏览器都完全支持它，但它适用于某些浏览器

* * *

## 回答 #23

> 赞同：6
> 
> 时间：2015-10-28T16:29:33.083

将输入类型属性更改为`type="search"`.

Google 不会对具有某种搜索类型的输入应用自动填充。

* * *

## 回答 #24

> 赞同：6
> 
> 时间：2016-01-29T03:46:42.700

直到上周，以下两种解决方案似乎都适用于 Chrome、IE 和 Firefox。但是随着 Chrome 版本 48（仍然是 49）的发布，它们不再起作用：

1.  表格顶部的以下内容：

```
<input style="display:none" type="text" name="fakeUsername"/>
<input style="display:none" type="password" name="fakePassword"/> 
```

2.  密码输入元素中的以下内容：

    自动完成=“关闭”

所以为了快速解决这个问题，起初我尝试使用最初将密码输入元素设置为禁用的主要技巧，然后在文档准备功能中使用 setTimeout 再次启用它。

```
setTimeout(function(){$('#PasswordData').prop('disabled', false);}, 50); 
```

但这似乎太疯狂了，我进行了更多搜索，并在[Disabling Chrome Autofill](https://stackoverflow.com/questions/15738259/disabling-chrome-autofill/29582380#29582380)中找到了@tibalts 的答案。他的回答是在密码输入中使用 autocomplete="new-password" ，这似乎适用于所有浏览器（我在此阶段保留了上面的修复号 1）。

这是 Google Chrome 开发者讨论中的链接： [https ://code.google.com/p/chromium/issues/detail?id=370363#c7](https://code.google.com/p/chromium/issues/detail?id=370363#c7)

* * *

## 回答 #25

> 赞同：5
> 
> 时间：2016-05-07T13:59:04.117

在 Chrome 48+ 中使用此解决方案：

1.  将假字段放在真实字段之前：

    ```
    <form autocomplete="off">
      <input name="fake_email"    class="visually-hidden" type="text">
      <input name="fake_password" class="visually-hidden" type="password">

      <input autocomplete="off" name="email"    type="text">
      <input autocomplete="off" name="password" type="password">
    </form> 
    ```

2.  隐藏虚假字段：

    ```
    .visually-hidden {
      margin: -1px;
      padding: 0;
      width: 1px;
      height: 1px;
      overflow: hidden;
      clip: rect(0 0 0 0);
      clip: rect(0, 0, 0, 0);
      position: absolute;
    } 
    ```

3.  你做到了！

这也适用于旧版本。

* * *

## 回答 #26

> 赞同：5
> 
> 时间：2015-10-17T00:43:12.120

而不是**autocomplete="off"**使用**autocomplete="false"** ;)

来自：[https ://stackoverflow.com/a/29582380/75799](https://stackoverflow.com/a/29582380/75799)

* * *

## 回答 #27

> 赞同：4
> 
> 时间：2014-04-23T16:46:06.690

在 chrome v. 34 之后，`autocomplete="off"`在`<form>`标签处设置不起作用

我进行了更改以避免这种烦人的行为：

1.  去掉密码输入的`name`和`id`
2.  在输入中放置一个类（例如`passwordInput`：）

（到目前为止，Chrome 不会将保存的密码放在输入中，但现在表单已损坏）

最后，要使表单工作，请在用户单击提交按钮时运行此代码，或者在您想触发表单提交时运行：

```
var sI = $(".passwordInput")[0];
$(sI).attr("id", "password");
$(sI).attr("name", "password"); 
```

就我而言，我曾经`id="password" name="password"`输入过密码，所以我在触发提交之前将它们放回去。

* * *

## 回答 #28

> 赞同：4
> 
> 时间：2015-05-21T13:03:04.937

从 Chrome 42 开始，此线程（截至`2015-05-21T12:50:23+00:00`）中的任何解决方案/黑客都不能用于禁用单个字段或整个表单的自动完成功能。

**编辑：**我发现您实际上只需要`display: none`在其他字段之前将一个虚拟电子邮件字段插入表单（您可以使用 隐藏它）以防止自动完成。我认为 chrome 会在每个自动完成的字段中存储某种形式的签名，并且包含另一个电子邮件字段会破坏此签名并阻止自动完成。

```
<form action="/login" method="post">
    <input type="email" name="fake_email" style="display:none" aria-hidden="true">
    <input type="email" name="email">
    <input type="password" name="password">
    <input type="submit">
</form> 
```

好消息是，由于“表单签名”被破坏了，没有一个字段是自动完成的，所以在提交之前不需要 JS 清除虚假字段。

**老答案：**

我发现唯一可行的方法是在真实字段之前插入两个类型为电子邮件和密码的虚拟字段。您可以将它们设置`display: none`为隐藏它们（忽略这些字段不够聪明）：

```
<form action="/login" method="post">
    <input type="email" name="fake_email" style="display:none" aria-hidden="true">
    <input type="password" name="fake_password" style="display:none" aria-hidden="true">
    <input type="email" name="email">
    <input type="password" name="password">
    <input type="submit">
</form> 
```

不幸的是，这些字段必须在您的表单中（否则两组输入都会自动填充）。因此，要真正忽略虚假字段，您需要在表单提交上运行一些 JS 以清除它们：

```
form.addEventListener('submit', function() {
    form.elements['fake_email'].value = '';
    form.elements['fake_password'].value = '';
}); 
```

* * *

请注意，使用 Javascript 清除值可以覆盖自动完成功能。因此，如果在禁用 JS 的情况下失去正确的行为是可以接受的，您可以使用 Chrome 的 JS 自动完成“polyfill”来简化所有这些：

```
(function(document) {

    function polyfillAutocomplete(nodes) {

        for(var i = 0, length = nodes.length; i < length; i++) {

            if(nodes[i].getAttribute('autocomplete') === 'off') {

                nodes[i].value = '';
            }
        }
    }

    setTimeout(function() {

        polyfillAutocomplete(document.getElementsByTagName('input'));
        polyfillAutocomplete(document.getElementsByTagName('textarea'));

    }, 1);

})(window.document); 
```

* * *

## 回答 #29

> 赞同：4
> 
> 时间：2020-07-01T10:43:54.427

我设法利用此规则禁用自动完成：

> 不是密码但应该被隐藏的字段，例如信用卡号，也可能具有 type="password" 属性，但应包含相关的自动完成属性，例如“cc-number”或“cc-csc”。 [https://www.chromium.org/developers/design-documents/create-amazing-password-forms](https://www.chromium.org/developers/design-documents/create-amazing-password-forms)

```
<input id="haxed" type="password" autocomplete="cc-number"> 
```

然而，它伴随着巨大的责任:)

> 不要试图欺骗浏览器 密码管理器（内置于浏览器或外部）旨在简化用户体验。插入虚假字段、使用不正确的自动完成属性或利用现有密码管理器的弱点只会导致用户沮丧。

* * *

## 回答 #30

> 赞同：4
> 
> 时间：2015-09-15T13:57:50.547

我有一个类似的问题，输入字段要么是名字要么是电子邮件。我设置了 autocomplete="off" 但 Chrome 仍然强制建议。原来是因为占位符文本中有“姓名”和“电子邮件”这两个词。

例如

```
<input type="text" placeholder="name or email" autocomplete="off" /> 
```

我通过在占位符中的单词中放置一个零宽度空间来解决它。不再有 Chrome 自动完成功能。

```
<input type="text" placeholder="nam&#8203;e or emai&#8203;l" autocomplete="off" /> 
```

* * *

## 回答 #31

> 赞同：3
> 
> 时间：2014-07-25T10:55:43.950

虽然我同意自动完成功能应该是用户的选择，但有时 Chrome 会过分热衷于它（其他浏览器也可能如此）。例如，具有不同名称的密码字段仍会自动填充保存的密码，而前一个字段则填充用户名。当表单是 Web 应用程序的用户管理表单并且您不希望自动填充使用您自己的凭据填充它时，这尤其糟糕。

Chrome 现在完全忽略了 autocomplete="off"。虽然 JS hack 可能很有效，但我发现了一种在撰写本文时有效的简单方法：

将密码字段的值设置为控制字符 8（`"\x08"`在 PHP 或`&#8;`HTML 中）。这会阻止 Chrome 自动填充该字段，因为它有一个值，但没有输入实际值，因为这是退格字符。

是的，这仍然是一个 hack，但它对我有用。YMMV。

* * *

## 回答 #32

> 赞同：3
> 
> 时间：2020-07-15T20:06:17.700

Chrome 一直在改变它在每个版本上处理自动完成的方式，我想出的方式是，使字段为只读，而 onclick/focus 使其不是只读的。试试这个 jQuery 片段。

```
jQuery(document).ready(function($){
//======fix for autocomplete
$('input, :input').attr('readonly',true);//readonly all inputs on page load, prevent autofilling on pageload

 $('input, :input').on( 'click focus', function(){ //on input click
 $('input, :input').attr('readonly',true);//make other fields readonly
 $( this ).attr('readonly',false);//but make this field Not readonly
 });
//======./fix for autocomplete
}); 
```

* * *

## 回答 #33

> 赞同：3
> 
> 时间：2016-03-14T11:42:26.717

我刚刚更新到**Chrome 49**并且[Diogo Cid 的解决方案](https://stackoverflow.com/a/22694173/4120911)不再起作用。

我做了一个不同的解决方法，在页面加载后在运行时隐藏和删除字段。

Chrome 现在会忽略将凭据应用于第一个**显示** `type="password"`字段及其前一个`type="text"`字段的原始解决方法，因此我使用*CSS隐藏了这两个字段* `visibility: hidden;`

```
<!-- HTML -->
<form>
    <!-- Fake fields -->
    <input class="chromeHack-autocomplete">
    <input type="password" class="chromeHack-autocomplete">

    <input type="text" placeholder="e-mail" autocomplete="off" />
    <input type="password" placeholder="Password" autocomplete="off" />
</form>

<!-- CSS -->
.chromeHack-autocomplete {
    height: 0px !important;
    width: 0px !important;
    opacity: 0 !important;
    padding: 0 !important; margin: 0 !important;
}

<!--JavaScript (jQuery) -->
jQuery(window).load(function() {
    $(".chromeHack-autocomplete").delay(100).hide(0, function() {
        $(this).remove();
    });
}); 
```

我知道它可能看起来不是很优雅，但它确实有效。

* * *

## 回答 #34

> 赞同：2
> 
> 时间：2014-09-30T06:45:15.350

我用另一种方式解决了。你可以试试这个。

```
<input id="passfld" type="text" autocomplete="off" />
<script type="text/javascript">
// Using jQuery
$(function(){                                               
    setTimeout(function(){
        $("input#passfld").attr("type","password");
    },10);
});

// or in pure javascript
 window.onload=function(){                                              
    setTimeout(function(){  
        document.getElementById('passfld').type = 'password';
    },10);
  }   
</script> 
```

* * *

## 回答 #35

> 赞同：2
> 
> 时间：2013-06-13T16:19:08.810

我发现这个解决方案是最合适的：

```
function clearChromeAutocomplete()
{
// not possible, let's try: 
if (navigator.userAgent.toLowerCase().indexOf('chrome') >= 0) 
{
document.getElementById('adminForm').setAttribute('autocomplete', 'off'); 
setTimeout(function () {
        document.getElementById('adminForm').setAttribute('autocomplete', 'on'); 
}, 1500);
}
} 
```

它必须在 dom 准备好之后加载，或者在表单呈现之后加载。

* * *

## 回答 #36

> 赞同：2
> 
> 时间：2018-08-29T17:00:40.007

`autocomplete="off"`现在可以使用，因此您可以执行以下操作：

```
<input id="firstName2" name="firstName2" autocomplete="off"> 
```

在当前的 Chrome 70 以及从 Chrome 62 开始的所有版本中进行了测试。

[演示](http://jsfiddle.net/AlexandrAbakumov/L0e2u7v4/124/)：

*   顶部`input`有自动完成工作
*   **底部** 通过添加**禁用**`input`自动完成**`autocomplete="off"`**

 *** * *

## 回答 #37

> 赞同：2
> 
> 时间：2015-10-05T12:43:22.477

在尝试了所有解决方案之后，这似乎适用于 chrome 版本：45，表单具有密码字段：

```
 jQuery('document').ready(function(){
        //For disabling Chrome Autocomplete
        jQuery( ":text" ).attr('autocomplete','pre'+Math.random(0,100000000));
 }); 
```

* * *

## 回答 #38

> 赞同：2
> 
> 时间：2021-02-09T02:16:20.117

**2021 回答：** 可悲的是，唯一有效的东西是令人作呕的骇人听闻。我的解决方案是在生成前端标记时在名称属性的末尾添加一个动态生成的随机数（例如 <input name="postcode-22643"...）。这暂时适当地欺骗了浏览器。

然后，您需要在服务器端添加一些东西来清理传入的 post 请求。例如，在 NodeJS / Express 中，我放入了一个中间件，使用一些正则表达式从收到的 post 请求中删除数字段。我的看起来像这样，但我想其他语言也会有类似的东西：

```
const cleanseAutosuggest = function (req, res, next) {
   for (const key in req.body) {
      if (key.match(/-\d+/)) {
         req.body[key.replace(/-\d+/, "")] = req.body[key];
         delete req.body[key];
      }
   }
   next();
};

app.post("/submit", cleanseAutosuggest, function (req, res, next) {
...
}) 
```

* * *

## 回答 #39

> 赞同：2
> 
> 时间：2020-07-25T04:47:43.520

对我来说，在表单和输入中设置 autocomplete="off" 是有效的。但可以是片状的。有时它会建议密码或一些保存的登录名+密码选项。但不要预先填写。

铬版本：81.0.4044.138

[代码笔](https://codepen.io/farukaf/pen/RwrdmeJ)

```
<form role="form" method="post" action="#" autocomplete="off">
  <label for="login">Login</label><br/>
  <input type="text" name="login" id="login" autocomplete="off" />
  <br/><br/>
  <label for="password">Password</label><br/>
  <input type="password" name="password" autocomplete="off" />
  <br/><br/>
  <input type="submit" name="submit" value="Submit" />
</form>
```

其他选项：

1.  删除“form”标签...或在提交前将其从“div”更改为“form”。
2.  使用 javascript 和一些 contentEditable="true" 字段可以让你的方式......

通常我必须每隔几个月找到另一份工作......

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2015-06-29T20:53:22.207

隐藏的输入元素技巧似乎仍然有效（Chrome 43）以防止自动填充，但要记住的一件事是 Chrome 将尝试根据占位符标签自动填充。您需要将隐藏输入元素的占位符与您尝试禁用的输入匹配。

就我而言，我有一个带有“城市或邮编”占位符文本的字段，我正在使用 Google Place Autocomplete。它似乎正在尝试自动填充，就好像它是地址表单的一部分一样。直到我将与实际输入相同的占位符放在隐藏元素上，这个技巧才奏效：

```
<input style="display:none;" type="text" placeholder="City or Zip" />
<input autocomplete="off" type="text" placeholder="City or Zip" /> 
```

* * *

## 回答 #41

> 赞同：1
> 
> 时间：2016-04-04T09:47:26.687

看起来这是固定的！见[https://codereview.chromium.org/1473733008](https://codereview.chromium.org/1473733008)

* * *

## 回答 #42

> 赞同：1
> 
> 时间：2021-03-30T03:11:43.903

**2020 年 3 月**

我正面临这个问题，不幸的是，没有一个解决方案对我有用。所以我应用了运行良好的小技巧。

```
<input autocomplete="off" type="password" name="password" id="password" readonly="readonly">

$('#password').on('click', function (event) {
  $('#password').removeAttr('readonly');
  $('#password').focus();
});

$('#password').on('blur', function (event) {
  $('#password').attr('readonly', 'readonly');
}); 
```

当您单击密码输入字段时，它开始显示建议，但是当触发焦点在输入字段上时，它不会显示建议，所以这就是我解决问题的方法。

我希望它会帮助某人。

* * *

## 回答 #43

> 赞同：1
> 
> 时间：2021-12-23T11:49:49.057

快速破解，如果您在阅读上述答案后仍然获得自动完成功能，您可以试试这个。提供随机字符串将删除自动完成。

```
<input autocomplete="somerandomstring" or autocomplete="disabled"> 
```

Idk 是否正确，它对我有用。

* * *

## 回答 #44

> 赞同：1
> 
> 时间：2017-12-20T23:02:06.323

当使用像[jQuery UI 的自动完成](http://api.jqueryui.com/autocomplete/)这样的小部件时，请确保检查它是否没有将自动完成属性添加/更改为关闭。我发现使用它时确实如此，并且会破坏您为覆盖任何浏览器字段缓存所做的任何工作。确保您具有唯一的名称属性，并在小部件初始化后强制使用唯一的自动完成属性。请参阅下面的一些提示，了解这可能如何适用于您的情况。

```
<?php $autocomplete = 'off_'.time(); ?>
<script>
   $('#email').autocomplete({
      create: function( event, ui ) {
         $(this).attr('autocomplete','<? echo $autocomplete; ?>');
      },
      source: function (request, response) { //your code here },
      focus: function( event, ui ) { //your code here },
      select: function( event, ui ) { //your code here },
   });
</script>
<input type="email" id="email" name="email_<? echo $autocomplete; ?>" autocomplete="<? echo $autocomplete; ?>" /> 
```

* * *

## 回答 #45

> 赞同：1
> 
> 时间：2021-11-25T07:09:42.700

这些方法都不起作用了，chrome忽略了所有这些属性，唯一的解决方案是使用jquery

在输入上使用它

`<input onclick="$(this).removeAttr('readonly');" onblur="$(this).attr('readonly', true);" readonly />`

* * *

## 回答 #46

> 赞同：0
> 
> 时间：2016-10-08T16:02:12.043

我刚刚尝试了以下方法，它似乎在 Chrome 53 上起到了作用 - 在输入密码字段时，它还会禁用“使用密码：”下拉菜单。

只需将您的密码输入类型设置为`text`，然后添加`onfocus`处理程序（内联或通过 jQuery/vanilla JS）将类型设置为`password`：

```
onfocus="this.setAttribute('type','password')" 
```

甚至更好：

```
onfocus="if(this.getAttribute('type')==='text') this.setAttribute('type','password')" 
```

* * *

## 回答 #47

> 赞同：0
> 
> 时间：2015-12-10T10:41:39.303

为防止自动完成，只需将一个空格设置为输入值：

```
<input type="text" name="name" value="  "> 
```

* * *

## 回答 #48

> 赞同：0
> 
> 时间：2021-07-31T06:17:02.120

基本上我们可以摆脱来自 chrome、firefox 或任何类型浏览器的任何文本框的自动完成功能。这是简单的JavaScript。

```
window.onload=function(){                                              
        setTimeout(function(){  
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        },100);
    } 
```

当您的窗口完成加载后，100 毫秒后，我们的用户名和密码字段值将被删除。我认为这是在所有浏览器（特别是 chrome）上关闭自动完成功能的最佳方式。

* * *

## 回答 #49

> 赞同：0
> 
> 时间：2018-08-24T14:45:33.747

我称之为大锤方法，但它似乎对我有用，我尝试过的所有其他方法都失败了：

```
<input autocomplete="off" data-autocomplete-ninja="true" name="fa" id="fa" /> 
```

注意：输入名称和 id 属性不应包含任何会给浏览器提示数据是什么的内容，否则此解决方案将不起作用。例如，我使用“fa”而不是“FullAddress”。

页面加载时的以下脚本（此脚本使用 JQuery）：

```
$("[data-autocomplete-ninja]").each(function () {
    $(this).focus(function () {
        $(this).data("ninja-name", $(this).attr("name")).attr("name", "");
    }).blur(function () {
        $(this).attr("name", $(this).data("ninja-name"));
    });
}); 
```

上述解决方案应防止浏览器自动填充从其他表单收集的数据，或从以前在同一表单上提交的数据。

基本上，当输入成为焦点时，我将删除 name 属性。只要您在元素处于焦点时不执行任何需要 name 属性的操作，例如按元素名称使用选择器，此解决方案应该是无害的。

* * *

## 回答 #50

> 赞同：0
> 
> 时间：2018-03-12T23:27:49.563

我正在使用 Chrome - 版本 64.0.3282.140（官方版本）（64 位）并使用以下代码以及表单名称，它适用于我。

```
<form name="formNameHere">....</form>
<script type="text/javascript">
    setTimeout(function(){
        document.formNameHere.reset();
    },500);
</script> 
```

* * *

## 回答 #51

> 赞同：0
> 
> 时间：2017-02-23T06:14:23.423

在表单标签之后添加这个：

```
<form>
<div class="div-form">
<input type="text">
<input type="password" >
</div> 
```

将此添加到您的 css 文件中：

```
.div-form{
opacity: 0;
} 
```

* * *

## 回答 #52

> 赞同：0
> 
> 时间：2016-09-19T09:49:42.490

您可以使用以下概念为 chrome 以及其他浏览器实现 AutoComplete='false'。采用一个虚拟输入类型，它将以不透明度 0 隐藏。默认情况下，chrome 浏览器触发了第一个已经隐藏的输入类型。

```
<input style="opacity: 0; position: absolute; z-index: -1;" name="email">
<input type="search" name="email" class="form-control" autocomplete="new-email" id="email"> 
```

* * *

## 回答 #53

> 赞同：0
> 
> 时间：2020-12-11T08:41:15.357

经过大量挖掘后，我发现当我们删除输入标签上的名称和 id 属性时，Chrome（版本 83.0.4103.116）上的自动完成下拉菜单没有显示，例如。代码如下

```
<div>
<span>
  Auto complete off works if name and id attribute is not set on input tag 
  <input type="text"/>
</span>
<span>
  Auto complete will work here since id attribute is set
  <input id="name" type="text"/>
</span>
</div>
```

* * *

## 回答 #54

> 赞同：0
> 
> 时间：2021-01-23T23:56:54.450

我找到了另一种解决方案 - 只需`autocomplete="off"`使用`style="-webkit-text-security: disc;"`. 您还可以通过以下方式将其添加到您的 CSS 规则中：

```
[autocomplete="off"] {
  -webkit-text-security: disc;
} 
```

主要目标是从元素中消除`type="password"`或其他类似类型的属性。

至少，在`2021-01-24`这个解决方案有效的那一刻......

* * *

## 回答 #55

> 赞同：0
> 
> 时间：2021-12-28T18:32:08.227

我最近遇到了这个问题，没有一个答案对我有用。就我而言，由于我不关心将输入字段嵌套在“表单”标签中，因此我通过为输入提供一个空的数据列表来修复 chrome 自动完成问题。因此，现在 chrome 应该为您提供来自空的“datalist”的自动完成建议。请记住，如果输入嵌套在“表单”标签中，则此解决方案不起作用。令人惊讶的是，除了这个技巧，没有其他东西对我有用。

```
<input type="text" autocomplete="off" list="emptyList" />
<datalist id="emptyList"></datalist> 
```

您可以在此处了解有关数据列表的更多信息： [https ://developer.mozilla.org/en-US/docs/Web/HTML/Element/datalist](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/datalist)

考虑到浏览器的兼容性，使用起来似乎是安全的。

* * *

## 回答 #56

> 赞同：0
> 
> 时间：2018-09-03T11:43:02.510

对于这个问题，我使用了这个 css 解决方案。它对我有用。

```
input{
  text-security:disc !important;
  -webkit-text-security:disc !important;
  -moz-text-security:disc !important;
} 
```

* * *

## 回答 #57

> 赞同：0
> 
> 时间：2016-07-08T00:44:33.347

这是在 Chrome 版本 51.0.2704.106 上对我有用的方法。`<input id="user_name" type="text" name="user_name" autocomplete="off" required />` 并结合`<input id="user_password" type="password" name="user_password" autocomplete="new-password" required />`. 我的问题是，在实施后`new-password`，它仍然会在 user_name 字段上显示用户名下拉列表。

* * *

## 回答 #58

> 赞同：0
> 
> 时间：2018-04-04T21:47:25.037

除了给它一个假字段来自动完成之外，没有一个解决方案有效。我制作了一个 React 组件来解决这个问题。

```
import React from 'react'

// Google Chrome stubbornly refuses to respect the autocomplete="off" HTML attribute so
// we have to give it a "fake" field for it to autocomplete that never gets "used".

const DontBeEvil = () => (
  <div style={{ display: 'none' }}>
    <input type="text" name="username" />
    <input type="password" name="password" />
  </div>
)

export default DontBeEvil 
```

* * *

## 回答 #59

> 赞同：0
> 
> 时间：2020-05-14T16:48:30.113

我在表单中的一个搜索字段中遇到了类似的问题。既不为我工作，`autocomplete= "false"`也不`autocomplete= "off"`为我工作。事实证明，当您将`input`元素中的 aria-label 属性设置为类似`city`或`address`类似的东西时，chrome 会覆盖您的所有设置并显示自动完成

所以我所做的修复是`city`从 aria-label 中删除部分并提出不同的值。最后自动完成停止显示

[![chrome 会覆盖自动完成设置](../Images/afb8e1e31aef4b0765684c69829b80ed.png)](https://i.stack.imgur.com/uZMhj.jpg)

* * *

## 回答 #60

> 赞同：0
> 
> 时间：2021-09-29T22:54:58.000

我只是找到一个技巧：

```
<input type="password" id="some_id" name="some_name" value=" " placeholder="Password">

<script>
 $(function)
 {
    $("#some_id").val("");
 }
</script> 
```

请注意，值是空格。它可以防止在 Chrome 中自动编译，并且输入字段显示占位符。

* * *

## 回答 #61

> 赞同：0
> 
> 时间：2021-09-26T19:09:56.217

**2021年9月答案**

由于我必须处理这个问题，唯一稳定的工作解决方案是在每次呈现网站时为元素生成一个随机字符串`name`和`autocomplete`属性。`<input>`

下面是一个使用纯 JavaScript 的简单演示。

html:

```
<div>
     <h3>Autofill disabled with random string</h3>
     <form id="disable-autofill-form">
       <div>
         <span>First Name</span>
         <input type="text" />
       </div>
       <div>
         <span>Last Name</span>
         <input type="text" />
       </div>
       <div>
         <span>City</span>
         <input type="text" />
       </div>
       <div>
         <span>Street</span>
         <input type="text" />
       </div>
       <div>
         <span>Postal Code</span>
         <input type="text" />
       </div>
     </form>
</div> 
```

JavaScript：

```
const randomString = (Math.random() + 1).toString(36).substring(5);
const disableAutoFillForm = document.getElementById('disable-autofill-form');
const disableAutoFillFormInputs = [
  ...disableAutoFillForm.getElementsByTagName('input'),
];
disableAutoFillFormInputs.forEach((input) => {
  input.setAttribute('autocomplete', randomString);
  input.setAttribute('name', randomString);
}); 
```

[可以在这里找到](https://stackblitz.com/edit/autofill-disable-demo?file=index.js)一个可以使用它的 Stackblitz 项目。

* * *

## 回答 #62

> 赞同：-1
> 
> 时间：2021-12-22T11:01:54.177

我不得不在一个带有巨大网络表单的 drupal 页面上解决这个问题。因为我无法编辑每个输入的 html 代码，所以我想出了以下通用 jQuery 解决方案。

```
<script>

    // Form Autocomplete FIX
    function is_mobile() {
        if( screen.width < 500 || navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPod/i) ) {
            return true;
        }
        return false;
    }
    jQuery( 'input[autocomplete="off"]' ).each( function() {
        if( is_mobile() ) {
            return;
        }
        jQuery( this ).attr( 'readonly', true );
    } );
    jQuery( 'input[autocomplete="off"]' ).focus( function() {
        if( is_mobile() ) {
            return;
        }
        jQuery( this ).removeAttr( 'readonly' );
        jQuery( this ).focus();
    } );
    jQuery( 'input[autocomplete="off"]' ).blur( function() {
        if( is_mobile() ) {
            return;
        }
        jQuery( this ).attr( 'readonly', true );
    } );

</script> 
```

浏览器检测从[这里](https://stackoverflow.com/a/6622980/1278475)。

我想有可能优化这段代码（我很想得到一些建议），但你会从中得到想法。

* * *

## 回答 #63

> 赞同：-1
> 
> 时间：2020-05-15T08:00:43.363

对于这个问题，我有一个近乎完美的解决方案：从所有密码输入元素中删除“type=password”，在所有密码输入元素都加载到 DOM 之后，给一个超时设置“type=password”。Chrome 将忽略更改的类型用于自动填充。示例：

```
setTimeout(()=>{ele.type="password"},3000) 
```

或按事件更改类型：

```
ele.oninput=function(){ele.type="password"} 
```

* * *

## 回答 #64

> 赞同：-1
> 
> 时间：2022-01-05T13:33:21.427

我找到了一个适合我的解决方案。它不会禁用自动完成功能，但允许对其进行自定义。在 Chrome 96、Opera 82 中测试

```
/* Change Autocomplete styles in Chrome*/
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
textarea:-webkit-autofill,
textarea:-webkit-autofill:hover,
textarea:-webkit-autofill:focus,
select:-webkit-autofill,
select:-webkit-autofill:hover,
select:-webkit-autofill:focus {
    border: none;
    border-bottom: 1px solid;
    -webkit-text-fill-color: #000;
    -webkit-box-shadow: 0 0 0 1000px transparent inset;
} 
```

* * *

## 回答 #65

> 赞同：-2
> 
> 时间：2014-11-29T07:42:42.030

我想出了以下解决方案，该解决方案使用该属性查询所有字段，`autocomple="off"`然后将其值设置为单个空格，然后将计时器设置为大约 200 毫秒并将值设置回空字符串。

例子：

```
// hack to prevent auto fill on chrome
var noFill = document.querySelectorAll("input[autocomplete=off]");

noFill.forEach(function(el) {
    el.setAttribute("value", " ");
    setTimeout(function() {
        el.setAttribute("value", "");
    }, 200);
}); 
```

我选择 200 毫秒作为计时器，因为经过一些实验，200 毫秒似乎是我的计算机上 chrome 放弃尝试自动完成字段所需的时间。我很高兴听到其他时间似乎对其他人更有效。********

# ruby-on-rails - 无法创建新模型

> ID：12374443
> 
> 赞同：0
> 
> 时间：2012-09-11T16:54:35.410
> 
> 标签：ruby-on-rails, model

我想为 Ruby on Rails 应用程序创建一个新模型。我知道这应该这样做：

```
$ ruby script/generate model Book 
```

但它给了我：

```
ruby: No such file or directory -- script/generate (LoadError) 
```

这是为什么？我该如何解决？我在我的应用程序文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:58:18.947

你运行的是什么版本的rails？据我所知应该是`script/rails`- 但我正在运行 rails 3.1.3

编辑：正如@Jeremy bellow所说，在rails 3及以上`script/rails`- 或者当然，更一般地说，只是`rails`

跑

```
ruby script/rails -h 
```

你应该看到可用的命令

跑

```
ruby script/rails generate -h 
```

查看可生成的内容

或者，您也应该能够运行：

```
rails generate -h 
```

我从来没有发现这`ruby script/rails`部分是必要的，它自动默认为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T16:57:47.953

如果你使用的是 Rails 3，你可以这样做：

```
$ rails generate model Book 
```

您尝试的方式是旧方式。也许您正在学习旧教程或其他内容。

# javascript - Js在Rails中渲染部分的正确位置

> ID：12374446
> 
> 赞同：1
> 
> 时间：2012-09-11T16:54:44.943
> 
> 标签：javascript, ruby-on-rails, ajax, render, renderpartial

我的计划是通过 klick 事件更新部分内容，我通过 ajax 获取一些数据。所以我打开了我的 assets/javascripts 目录并将代码放在我打算调用它的模块的 js 文件中。我设法获取数据并在 div 上调用一些“html() 或 text()”。但是当我试图打电话时

```
.html("<%= escape_javascript( render( :partial => 'job') ) %>") 
```

我的控制器告诉我未知方法“渲染”。因此，我在许多其他威胁中表示资产目录不是为静态内容构建的。但现在的问题是，如果不在资产中，该放在哪里？我试图把它放在视图/模型文件夹中（与动作“显示”同名）。但它不会加载。是的，我在 show action 中告诉 Controller response_to format.js。

那么我应该把js-File放在哪里以及如何调用它呢？或者甚至有一种方法可以让它在资产目录中并且能够调用渲染？

* * *

感谢您的回答！可悲的是，我正是这样做的，但我不工作。所以这是我的代码：

/app/views/events/show.js.erb.coffee：

```
$(document).ready ->
  url = window.location
  url = String(url).split('/')
  event_id = url[$.inArray( "events" , url) + 1]
  $('.position').click ->
    position_id = $(this).attr("id")
    $.ajax '/events/'+event_id+'/eventpositions/'+position_id+'/eventjobs'
      dataType: 'json'
      success: (result)->
        $( '#'+position_id ).find('.jobs').html("<%= escape_javascript( render( :partial => 'job') ) %>")
        alert result[1].job_id 
```

/app/views/events/show.html.haml：

```
%p#notice{:xmlns => "http://www.w3.org/1999/html"}= notice
%p
  %b Name:
  = @event.name
  \ 
  %b Plz:
  = @event.plz
%p
  %b Personal:
  - @eventpositions.each do |p|
    .position{:id => "#{p.id}"}
    %b
      Position: #{Position.find(p.position_id).name} Anzahl: #{p.quantity} Aufträge: #{p.eventjobs.all.count}
    .jobs

  = link_to 'Neuer Auftrag', new_event_eventposition_eventjob_path(@event.id,p.id)
  %br
  %br
= link_to 'Neue Position', new_event_eventposition_path(@event.id)
= link_to 'Edit', edit_event_path(@event)
|
\#{link_to 'Back', events_path} 
```

/app/views/events/_job.html.haml：

```
.jobs
  - eventjobs.each do |j|
    User: #{User.find(Job.find(j.job_id).user_id).email}
    %br 
```

/app/controllers/events_controller.rb：

```
def show
  @agency = Agency.find(current_agent.agency_id)
  @event = @agency.events.find(params[:id])
  @eventpositions = @event.eventpositions.all

  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @event }
    format.js
  end
end 
```

所以代码确实可以在没有 Javascript 的情况下工作。所有渲染都很好。但我现在的主要问题是，如果我将它放在 app/views/events 文件夹中，它甚至不会对点击事件做出反应。一旦我将它放在资产目录中，我就会像魅力一样工作，但不会渲染。那么我错过了什么？为什么我的 js 代码没有加载？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:36:58.600

一般对于这种东西，我会把它命名为一个特定的动作，比如`show.js.erb`，然后像你在控制器中一样使用 format.js 。如果您使用的是 coffeescript，则需要将其命名为`show.js.coffee.erb`. 如果这不起作用，您可以在设置此 onclick 事件的位置发布您的视图代码吗？

**编辑以使用显示 javascript 代码**

因为您正在使用 show 操作，所以应该能够做到这一点：

```
= link_to "Show", @event, :remote => true, :format => :js 
```

根据需要调整事件变量，但它应该可以工作

# javascript - 返回未定义的 DOM 元素

> ID：12374449
> 
> 赞同：1
> 
> 时间：2012-09-11T16:55:06.310
> 
> 标签：javascript, jquery, forms, coldfusion

我不断返回一个“未定义”的值......不知道为什么它不能在 for 循环中工作，但在此之上`alert($("#evalRate1").val());`确实返回了一个正确的值。

**背景**：我正在建立一个评估系统，并希望在评估员选择“否”以接受可接受的使用时隐藏评论区域，无论员工选择了什么。这是我到目前为止的代码。

**代码**：//在所有问题周围加上蓝色边框 $(".Questions").css("border", "1px solid blue"); //提醒用户ID的值 evalRate1 alert($("#evalRate1").val());

```
//loop from 1 to 15 for all items to hit every question
for(var i = 1; i <= 15; i++) {
    var selfRateID = "selfRate" + i;
    var evalRateID = "evalRate" + i;
    var selfCmntID = "selfCmnt" + i;
    var evalCmntID = "evalCmnt" + i;

    alert("Variable is: " + evalRateID);
    alert("Value is: " + $('#evalRateID').val());

    //check the evaluator answer
    //if the evaluator answer == 'No' (value = 0), hide the comment section
    if($('#evalRateID').val() == 0) {
        $(".Comments").css("display", "none");
            alert("Hiding element!");
    } else {
      alert("Value was not == 0");
}
</script> 
```

**CFML 生成的 HTML 输出：** 我的评估测试页 #pageTable { width: 100%; 边框：1px纯黑色；} .Questions { 宽度：100%; } . 评论 { 宽度：100%; 问题评估者得分自我得分

```
 <tr>
          <table class="Questions">
            <tr id="Question1">
              <td>1\. This represents a question.</td>
              <td width="150px"><select name="evalRate1" id="evalRate1">

                    <option value="0" selected="selected">No</option>
                    <option value="1">Yes</option>

                </select></td>
              <td width="150px"><select name="selfRate1" id="selfRate1">

                    <option value="0" selected="selected">No</option>
                    <option value="1">Yes</option>

                </select></td>
            </tr>
          </table>
        </tr>
        <tr>
          <table class="Comments">
            <tr align="center" id="Cmnts1" >
              <td id="evalCmnt1">Evaluator Comment:<br />
                <textarea name="evalCmnt1" cols="30" rows="6" readonly="readonly" id="evalCmnt1">This represents an evaluator comment for question #1.</textarea></td>
              <td id="selfCmnt1">Self Comment:<br />
                <textarea name="selfCmnt1" cols="30" rows="6" readonly="readonly" id="selfCmnt1">This represents a self comment for question #1.</textarea></td>
            </tr>
          </table>
        </tr>

        <tr>
          <table class="Questions">
            <tr id="Question2">
              <td>2\. This represents a question.</td>
              <td width="150px"><select name="evalRate2" id="evalRate2">

                    <option value="0">No</option>
                    <option value="1" selected="selected">Yes</option>

                </select></td>
              <td width="150px"><select name="selfRate2" id="selfRate2">

                    <option value="0">No</option>
                    <option value="1" selected="selected">Yes</option>

                </select></td>
            </tr>
          </table>
        </tr>
        <tr>
          <table class="Comments">
            <tr align="center" id="Cmnts2" >
              <td id="evalCmnt2">Evaluator Comment:<br />
                <textarea name="evalCmnt2" cols="30" rows="6" readonly="readonly" id="evalCmnt2">This represents an evaluator comment for question #2.</textarea></td>
              <td id="selfCmnt2">Self Comment:<br />
                <textarea name="selfCmnt2" cols="30" rows="6" readonly="readonly" id="selfCmnt2">This represents a self comment for question #2.</textarea></td>
            </tr>
          </table>
        </tr>

        <tr>
          <table class="Questions">
            <tr id="Question3">
              <td>3\. This represents a question.</td>
              <td width="150px"><select name="evalRate3" id="evalRate3">

                    <option value="0" selected="selected">No</option>
                    <option value="1">Yes</option>

                </select></td>
              <td width="150px"><select name="selfRate3" id="selfRate3">

                    <option value="0" selected="selected">No</option>
                    <option value="1">Yes</option>

                </select></td>
            </tr>
          </table>
        </tr>
        <tr>
          <table class="Comments">
            <tr align="center" id="Cmnts3" >
              <td id="evalCmnt3">Evaluator Comment:<br />
                <textarea name="evalCmnt3" cols="30" rows="6" readonly="readonly" id="evalCmnt3">This represents an evaluator comment for question #3.</textarea></td>
              <td id="selfCmnt3">Self Comment:<br />
                <textarea name="selfCmnt3" cols="30" rows="6" readonly="readonly" id="selfCmnt3">This represents a self comment for question #3.</textarea></td>
            </tr>
          </table>
        </tr>

        <tr>
          <table class="Questions">
            <tr id="Question4">
              <td>4\. This represents a question.</td>
              <td width="150px"><select name="evalRate4" id="evalRate4">

                    <option value="0" selected="selected">No</option>
                    <option value="1">Yes</option>

                </select></td>
              <td width="150px"><select name="selfRate4" id="selfRate4">

                    <option value="0">No</option>
                    <option value="1" selected="selected">Yes</option>

                </select></td>
            </tr>
          </table>
        </tr>
        <tr>
          <table class="Comments">
            <tr align="center" id="Cmnts4" >
              <td id="evalCmnt4">Evaluator Comment:<br />
                <textarea name="evalCmnt4" cols="30" rows="6" readonly="readonly" id="evalCmnt4">This represents an evaluator comment for question #4.</textarea></td>
              <td id="selfCmnt4">Self Comment:<br />
                <textarea name="selfCmnt4" cols="30" rows="6" readonly="readonly" id="selfCmnt4">This represents a self comment for question #4.</textarea></td>
            </tr>
          </table>
        </tr>

        <tr>
          <table class="Questions">
            <tr id="Question5">
              <td>5\. This represents a question.</td>
              <td width="150px"><select name="evalRate5" id="evalRate5">

                    <option value="0" selected="selected">No</option>
                    <option value="1">Yes</option>

                </select></td>
              <td width="150px"><select name="selfRate5" id="selfRate5">

                    <option value="0" selected="selected">No</option>
                    <option value="1">Yes</option>

                </select></td>
            </tr>
          </table>
        </tr>
        <tr>
          <table class="Comments">
            <tr align="center" id="Cmnts5" >
              <td id="evalCmnt5">Evaluator Comment:<br />
                <textarea name="evalCmnt5" cols="30" rows="6" readonly="readonly" id="evalCmnt5">This represents an evaluator comment for question #5.</textarea></td>
              <td id="selfCmnt5">Self Comment:<br />
                <textarea name="selfCmnt5" cols="30" rows="6" readonly="readonly" id="selfCmnt5">This represents a self comment for question #5.</textarea></td>
            </tr>
          </table>
        </tr>

        <tr>
          <table class="Questions">
            <tr id="Question6">
              <td>6\. This represents a question.</td>
              <td width="150px"><select name="evalRate6" id="evalRate6">

                    <option value="0">No</option>
                    <option value="1" selected="selected">Yes</option>

                </select></td>
              <td width="150px"><select name="selfRate6" id="selfRate6">

                    <option value="0">No</option>
                    <option value="1" selected="selected">Yes</option>

                </select></td>
            </tr>
          </table>
        </tr>
        <tr>
          <table class="Comments">
            <tr align="center" id="Cmnts6" >
              <td id="evalCmnt6">Evaluator Comment:<br />
                <textarea name="evalCmnt6" cols="30" rows="6" readonly="readonly" id="evalCmnt6">This represents an evaluator comment for question #6.</textarea></td>
              <td id="selfCmnt6">Self Comment:<br />
                <textarea name="selfCmnt6" cols="30" rows="6" readonly="readonly" id="selfCmnt6">This represents a self comment for question #6.</textarea></td>
            </tr>
          </table>
        </tr>

        <tr>
          <table class="Questions">
            <tr id="Question7">
              <td>7\. This represents a question.</td>
              <td width="150px"><select name="evalRate7" id="evalRate7">

                    <option value="0" selected="selected">No</option>
                    <option value="1">Yes</option>

                </select></td>
              <td width="150px"><select name="selfRate7" id="selfRate7">

                    <option value="0" selected="selected">No</option>
                    <option value="1">Yes</option>

                </select></td>
            </tr>
          </table>
        </tr>
        <tr>
          <table class="Comments">
            <tr align="center" id="Cmnts7" >
              <td id="evalCmnt7">Evaluator Comment:<br />
                <textarea name="evalCmnt7" cols="30" rows="6" readonly="readonly" id="evalCmnt7">This represents an evaluator comment for question #7.</textarea></td>
              <td id="selfCmnt7">Self Comment:<br />
                <textarea name="selfCmnt7" cols="30" rows="6" readonly="readonly" id="selfCmnt7">This represents a self comment for question #7.</textarea></td>
            </tr>
          </table>
        </tr>

        <tr>
          <table class="Questions">
            <tr id="Question8">
              <td>8\. This represents a question.</td>
              <td width="150px"><select name="evalRate8" id="evalRate8">

                    <option value="0">No</option>
                    <option value="1" selected="selected">Yes</option>

                </select></td>
              <td width="150px"><select name="selfRate8" id="selfRate8">

                    <option value="0">No</option>
                    <option value="1" selected="selected">Yes</option>

                </select></td>
            </tr>
          </table>
        </tr>
        <tr>
          <table class="Comments">
            <tr align="center" id="Cmnts8" >
              <td id="evalCmnt8">Evaluator Comment:<br />
                <textarea name="evalCmnt8" cols="30" rows="6" readonly="readonly" id="evalCmnt8">This represents an evaluator comment for question #8.</textarea></td>
              <td id="selfCmnt8">Self Comment:<br />
                <textarea name="selfCmnt8" cols="30" rows="6" readonly="readonly" id="selfCmnt8">This represents a self comment for question #8.</textarea></td>
            </tr>
          </table>
        </tr>

        <tr>
          <table class="Questions">
            <tr id="Question9">
              <td>9\. This represents a question.</td>
              <td width="150px"><select name="evalRate9" id="evalRate9">

                    <option value="0" selected="selected">No</option>
                    <option value="1">Yes</option>

                </select></td>
              <td width="150px"><select name="selfRate9" id="selfRate9">

                    <option value="0" selected="selected">No</option>
                    <option value="1">Yes</option>

                </select></td>
            </tr>
          </table>
        </tr>
        <tr>
          <table class="Comments">
            <tr align="center" id="Cmnts9" >
              <td id="evalCmnt9">Evaluator Comment:<br />
                <textarea name="evalCmnt9" cols="30" rows="6" readonly="readonly" id="evalCmnt9">This represents an evaluator comment for question #9.</textarea></td>
              <td id="selfCmnt9">Self Comment:<br />
                <textarea name="selfCmnt9" cols="30" rows="6" readonly="readonly" id="selfCmnt9">This represents a self comment for question #9.</textarea></td>
            </tr>
          </table>
        </tr>

        <tr>
          <table class="Questions">
            <tr id="Question10">
              <td>10\. This represents a question.</td>
              <td width="150px"><select name="evalRate10" id="evalRate10">

                    <option value="0">No</option>
                    <option value="1" selected="selected">Yes</option>

                </select></td>
              <td width="150px"><select name="selfRate10" id="selfRate10">

                    <option value="0">No</option>
                    <option value="1" selected="selected">Yes</option>

                </select></td>
            </tr>
          </table>
        </tr>
        <tr>
          <table class="Comments">
            <tr align="center" id="Cmnts10" >
              <td id="evalCmnt10">Evaluator Comment:<br />
                <textarea name="evalCmnt10" cols="30" rows="6" readonly="readonly" id="evalCmnt10">This represents an evaluator comment for question #10.</textarea></td>
              <td id="selfCmnt10">Self Comment:<br />
                <textarea name="selfCmnt10" cols="30" rows="6" readonly="readonly" id="selfCmnt10">This represents a self comment for question #10.</textarea></td>
            </tr>
          </table>
        </tr>

        <tr>
          <table class="Questions">
            <tr id="Question11">
              <td>11\. This represents a question.</td>
              <td width="150px"><select name="evalRate11" id="evalRate11">

                    <option value="0" selected="selected">No</option>
                    <option value="1">Yes</option>

                </select></td>
              <td width="150px"><select name="selfRate11" id="selfRate11">

                    <option value="0" selected="selected">No</option>
                    <option value="1">Yes</option>

                </select></td>
            </tr>
          </table>
        </tr>
        <tr>
          <table class="Comments">
            <tr align="center" id="Cmnts11" >
              <td id="evalCmnt11">Evaluator Comment:<br />
                <textarea name="evalCmnt11" cols="30" rows="6" readonly="readonly" id="evalCmnt11">This represents an evaluator comment for question #11.</textarea></td>
              <td id="selfCmnt11">Self Comment:<br />
                <textarea name="selfCmnt11" cols="30" rows="6" readonly="readonly" id="selfCmnt11">This represents a self comment for question #11.</textarea></td>
            </tr>
          </table>
        </tr>

        <tr>
          <table class="Questions">
            <tr id="Question12">
              <td>12\. This represents a question.</td>
              <td width="150px"><select name="evalRate12" id="evalRate12">

                    <option value="0">No</option>
                    <option value="1" selected="selected">Yes</option>

                </select></td>
              <td width="150px"><select name="selfRate12" id="selfRate12">

                    <option value="0">No</option>
                    <option value="1" selected="selected">Yes</option>

                </select></td>
            </tr>
          </table>
        </tr>
        <tr>
          <table class="Comments">
            <tr align="center" id="Cmnts12" >
              <td id="evalCmnt12">Evaluator Comment:<br />
                <textarea name="evalCmnt12" cols="30" rows="6" readonly="readonly" id="evalCmnt12">This represents an evaluator comment for question #12.</textarea></td>
              <td id="selfCmnt12">Self Comment:<br />
                <textarea name="selfCmnt12" cols="30" rows="6" readonly="readonly" id="selfCmnt12">This represents a self comment for question #12.</textarea></td>
            </tr>
          </table>
        </tr>

        <tr>
          <table class="Questions">
            <tr id="Question13">
              <td>13\. This represents a question.</td>
              <td width="150px"><select name="evalRate13" id="evalRate13">

                    <option value="0" selected="selected">No</option>
                    <option value="1">Yes</option>

                </select></td>
              <td width="150px"><select name="selfRate13" id="selfRate13">

                    <option value="0" selected="selected">No</option>
                    <option value="1">Yes</option>

                </select></td>
            </tr>
          </table>
        </tr>
        <tr>
          <table class="Comments">
            <tr align="center" id="Cmnts13" >
              <td id="evalCmnt13">Evaluator Comment:<br />
                <textarea name="evalCmnt13" cols="30" rows="6" readonly="readonly" id="evalCmnt13">This represents an evaluator comment for question #13.</textarea></td>
              <td id="selfCmnt13">Self Comment:<br />
                <textarea name="selfCmnt13" cols="30" rows="6" readonly="readonly" id="selfCmnt13">This represents a self comment for question #13.</textarea></td>
            </tr>
          </table>
        </tr>

        <tr>
          <table class="Questions">
            <tr id="Question14">
              <td>14\. This represents a question.</td>
              <td width="150px"><select name="evalRate14" id="evalRate14">

                    <option value="0">No</option>
                    <option value="1" selected="selected">Yes</option>

                </select></td>
              <td width="150px"><select name="selfRate14" id="selfRate14">

                    <option value="0">No</option>
                    <option value="1" selected="selected">Yes</option>

                </select></td>
            </tr>
          </table>
        </tr>
        <tr>
          <table class="Comments">
            <tr align="center" id="Cmnts14" >
              <td id="evalCmnt14">Evaluator Comment:<br />
                <textarea name="evalCmnt14" cols="30" rows="6" readonly="readonly" id="evalCmnt14">This represents an evaluator comment for question #14.</textarea></td>
              <td id="selfCmnt14">Self Comment:<br />
                <textarea name="selfCmnt14" cols="30" rows="6" readonly="readonly" id="selfCmnt14">This represents a self comment for question #14.</textarea></td>
            </tr>
          </table>
        </tr>

        <tr>
          <table class="Questions">
            <tr id="Question15">
              <td>15\. This represents a question.</td>
              <td width="150px"><select name="evalRate15" id="evalRate15">

                    <option value="0" selected="selected">No</option>
                    <option value="1">Yes</option>

                </select></td>
              <td width="150px"><select name="selfRate15" id="selfRate15">

                    <option value="0" selected="selected">No</option>
                    <option value="1">Yes</option>

                </select></td>
            </tr>
          </table>
        </tr>
        <tr>
          <table class="Comments">
            <tr align="center" id="Cmnts15" >
              <td id="evalCmnt15">Evaluator Comment:<br />
                <textarea name="evalCmnt15" cols="30" rows="6" readonly="readonly" id="evalCmnt15">This represents an evaluator comment for question #15.</textarea></td>
              <td id="selfCmnt15">Self Comment:<br />
                <textarea name="selfCmnt15" cols="30" rows="6" readonly="readonly" id="selfCmnt15">This represents a self comment for question #15.</textarea></td>
            </tr>
          </table>
        </tr>

  </table>
</form>

<script type="text/javascript">
//put a blue border around all questions
$(".Questions").css("border", "1px solid blue");
//alert user to value of ID evalRate1
//alert($("#evalRate1").val());

//loop from 1 to 15 for all items to hit every question
for(var i = 1; i <= 3; i++) {
    var selfRateID = "selfRate" + i;
    var evalRateID = "evalRate" + i;
    var selfCmntID = "selfCmnt" + i;
    var evalCmntID = "evalCmnt" + i;
    var CommentsID = "Cmnts" + i;

    alert("Variable is: " + evalRateID);

    //check the evaluator answer
    //if the evaluator answer == 'No' (value = 0), hide the comment section
    if($('#evalRateID').val() == 0) {
        $(".Comments").css("display", "none");
    } else {
        alert("Value was: " + $('#evalRateID').val());
    }   
}
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T16:59:24.373

这是错误的。

```
if($('#evalRateID').val() == 0) { 
```

应该是这个。

```
if($('#' + evalRateID).val() == 0) { 
```

第一个查找 id `"evalRateID"`。

第二个查找存储在`evalRateID`变量中的 id。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T16:59:23.927

看线

```
alert("Value is: " + $('#evalRateID').val()); 
```

它将仅搜索具有 id 的元素`evalRateID`，但您想要搜索`evalRate1`。所以使用

```
alert("Value is: " + $('#'+evalRateID).val()); 
```

由于 evalRateID 被定义为变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T17:04:12.687

根据脚本在文档中的位置，您可能需要将代码包装如下：

```
$(function() {
    // ...
    //all code goes here
    // ...
}); 
```

This ensures that the contained code is not executed until the DOM is ready - ie until the served HTML/CSS has been interpreted into DOM nodes.

# javascript - 进度条不断重复

> ID：12374451
> 
> 赞同：0
> 
> 时间：2012-09-11T16:55:10.510
> 
> 标签：javascript

如何修改下面的代码，以便当进度条完成加载并到达末尾时，可以执行单独的函数（即 test() ），而不是像现在这样重复和重复。

```
<html> 
    <head> 
        <script type="text/javascript"> 
        var prg_width = 200; 

        function progress() { 
            var node = document.getElementById('progress'); 
            var w    = node.style.width.match(/\d+/); 

            if (w == prg_width) { 
                w = 0; 
            } 

            node.style.width = parseInt(w) + 5 + 'px'; 
        } 

        </script> 
    </head> 

    <body onload="var progress_run_id = setInterval(progress, 30);"> 

        <div style="border: 1px solid #808080; width:200px; height:5px;"> 
            <div id="progress" style="height:5px; width:0px; background-color:#DBDBDB;"/> 
        </div> 

    </body> 
</html> 
```

非常感谢和感谢您的所有帮助。

干杯，

周杰伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:57:40.180

调用这个单独的函数而不是

`w = 0;`

线。也不要忘记`clearInterval(progress_run_id)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:56:57.760

```
 var prg_width = 200; 

        function progress() { 
            var node = document.getElementById('progress'); 
            var w    = node.style.width.match(/\d+/); 

            if (w == prg_width) { 
                test(); // CHANGE THIS
                clearInterval(progress_run_id);
            } 

            node.style.width = parseInt(w) + 5 + 'px'; 
        } 
```

检查宽度是否等于完成的宽度。如果是，则清除间隔，然后调用您的`test`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T16:59:26.123

```
<script type="text/javascript"> 
        var prg_width = 200; 

        function progress() { 
            var node = document.getElementById('progress'); 
            var w    = node.style.width.match(/\d+/); 

            if (w == prg_width) { 
                test(); 
                clearInterval(progress_run_id);
            } 

            node.style.width = parseInt(w) + 5 + 'px'; 

        } 

        </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T17:09:01.707

```
<html> 
<head>
<script type="text/javascript"> 
var prg_width = 200; 
var progress_run_id = null;

function progress() { 
var node = document.getElementById('progress'); 
    var w  = node.style.width.match(/\d+/); 
    if (w == prg_width) { 
        clearInterval( progress_run_id );
        w = 0;
    } else {
        w = parseInt(w) + 5 + 'px';             
    }
    node.style.width = w;
}
function initialize(){
    progress_run_id = setInterval(progress, 30);
}
window.onload = initialize();
</script> 
</head> 
<body> 
        <div style="border: 1px solid #808080; width:200px; height:5px;"> 
        <div id="progress" style="height:5px; width:0px; background-color:#DBDBDB;"/> 
        </div> 
</body> 
</html> 
```

# android - 启动 ListAdapter 引发 NullPointerException

> ID：12374456
> 
> 赞同：2
> 
> 时间：2012-09-11T16:55:23.380
> 
> 标签：android, listadapter

当我发起`ListAdapter<String>`这样的事情时，一切都很好：

**初始化变量**

```
List<String> deviceList = new LinkedList<String>();
ArrayAdapter<String> listAdapter = new ArrayAdapter<String>(this,
            R.layout.deviceconnect,
            android.R.layout.simple_list_item_1, deviceList); 
```

但是当我像这样在列表中添加一些东西时：

**向列表中添加了一个项目**

```
List<String> deviceList = new LinkedList<String>();
deviceList.add("Test");
ArrayAdapter<String> listAdapter = new ArrayAdapter<String>(this,
            R.layout.deviceconnect,
            android.R.layout.simple_list_item_1, deviceList); 
```

它抛出一个空指针异常，如下所示：

**例外**

```
09-11 22:02:40.267: E/AndroidRuntime(3052): java.lang.NullPointerException
09-11 22:02:40.267: E/AndroidRuntime(3052):     at          android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:392)
09-11 22:02:40.267: E/AndroidRuntime(3052):     at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
09-11 22:02:40.267: E/AndroidRuntime(3052):     at android.widget.AbsListView.obtainView(AbsListView.java:2267)
09-11 22:02:40.267: E/AndroidRuntime(3052):     at android.widget.ListView.makeAndAddView(ListView.java:1769)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.widget.ListView.fillDown(ListView.java:672)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.widget.ListView.fillFromTop(ListView.java:733)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.widget.ListView.layoutChildren(ListView.java:1622)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.widget.AbsListView.onLayout(AbsListView.java:2102)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.view.View.layout(View.java:13754)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.view.ViewGroup.layout(ViewGroup.java:4362)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.widget.RelativeLayout.onLayout(RelativeLayout.java:948)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.view.View.layout(View.java:13754)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.view.ViewGroup.layout(ViewGroup.java:4362)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.view.View.layout(View.java:13754)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.view.ViewGroup.layout(ViewGroup.java:4362)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1649)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1507)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1420)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.view.View.layout(View.java:13754)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.view.ViewGroup.layout(ViewGroup.java:4362)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.view.View.layout(View.java:13754)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.view.ViewGroup.layout(ViewGroup.java:4362)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:1866)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1687)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.view.Choreographer.doFrame(Choreographer.java:525)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.os.Handler.handleCallback(Handler.java:615)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.os.Looper.loop(Looper.java:137)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at java.lang.reflect.Method.invokeNative(Native Method)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at java.lang.reflect.Method.invoke(Method.java:511)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-11 22:16:54.689: E/AndroidRuntime(6064):     at   dalvik.system.NativeStart.main(Native  Method) 
```

有人可以帮我解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:25:49.427

你应该有这样的东西：

布局文件：

**设备连接.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TextView
                android:id="@+id/textView"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />
</LinearLayout> 
```

这在你的Java中：

```
List<String> deviceList = new LinkedList<String>();
deviceList.add("Test");
ArrayAdapter<String> listAdapter = new ArrayAdapter<String>(this,
            R.layout.deviceconnect,
            R.id.textView, 
            deviceList); 
```

# eclipse - 有什么办法可以在 Juno 更新后修复可怕的工具栏图标？

> ID：12374463
> 
> 赞同：5
> 
> 时间：2012-09-11T16:55:47.400
> 
> 标签：eclipse, icons, alpha, antialiasing

至少在 Windows 7 上，标题栏颜色可能已更改为蓝色。但是，标题栏图标设计为仅用于浅灰色栏，而不是使用 alpha 透明度进行抗锯齿。请注意绿色圆圈“运行”图标边缘周围的白色高光。

![关闭可怕的工具栏图标](../Images/037a2f292952d3df166a54cdca4f3ffb.png)

这些图标看起来很可怕，就像我们在 1995 年一样。它是否也出现在其他 Windows 7 用户的安装中？我注意到有主题，我能找到最接近有效的东西是橄榄主题。我在外观/颜色和字体首选项中找不到工具栏颜色。有没有办法将标题栏恢复为旧颜色或用正确设计的图标替换图标？

同时，我为此提交了一个[Eclipse 错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=389288)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:22:18.493

要么选择外观下的经典主题（然后重新启动！）以返回 3.x 外观，要么安装[Eclipse 4 Chrome 主题](http://marketplace.eclipse.org/content/eclipse-4-chrome-theme#.UE-BBYrN-4o)，可以根据您的个人喜好进行详细调整。

# jsp - java客户端证书认证

> ID：12374464
> 
> 赞同：4
> 
> 时间：2012-09-11T16:55:47.687
> 
> 标签：jsp, authentication, certificate, cac

我在 Web 服务器 (apache) 中实现了强身份验证，效果很好。但我想实现一个 java 类，该类必须将 cac ID 和 suject 名称与 java .properties 文件或 XML 上的名称进行比较

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:36:36.497

不确定您的部署，但例如，如果您需要从部署的 servlet 中执行此操作，`Tomcat`您可以执行以下操作：

```
X509Certificate[] certs = (X509Certificate[])request.getAttribute("javax.servlet.request.X509Certificate"); 
```

如果客户已发送证书，那么`certs`将拥有它们，您可以进行所需的检查，并可能根据您的需要拒绝。
请注意，这将在SSL 握手完成*后发生。*

# html - 将两个具有动态宽度的 div 和具有 100% 宽度的嵌套表对齐

> ID：12374469
> 
> 赞同：0
> 
> 时间：2012-09-11T16:56:01.727
> 
> 标签：html, css, html-table, css-float

我试图让两个 div（具有动态宽度）在具有 100% 宽度的父级中并排排列；直到我在其中一个 div 中遇到一个嵌套表（也有 100% 的表），这并不困难。

**我想要什么：**
`#parent`宽度 100%
`#right`由内容引起的自动宽度
`#left`填充“#right”剩余的空白空间 “#left”
`table`的 100% 宽度

**问题：**
正如您在下面的示例中看到的，我可以让 div 并排，但我不能让表格成为“#left”的 100%；相反，它低于“#parent”。

**示例：http:**
[//jsfiddle.net/MHWQT/](http://jsfiddle.net/MHWQT/)

**代码：**

*html*

```
<div id="parent">

    <div id="right">RIGHT!</div>

    <div id="left">
        <table>
            <tr>
                <th>Header</th>
                <th>Also Header</th>
            </tr>
        </table>
    </div>

</div> 
```

*css*

```
#parent {
    width: 100%;
    height: 300px;
}

#right {
    float: right;
    width: auto;
    height: 100%;
}

#left {
    width: 100%;
    height: 100%;
}

table {
    width: 100%;
} 
```

 **将重播**编辑**为我忘记提及的答案，当屏幕低于一定宽度时，
我将使用@media 属性来更改内部的所有内容。`#parent`所以我想保留当前的html结构**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-09-27T06:48:14.457

[OP 在编辑中写道](https://meta.stackoverflow.com/questions/267434/what-is-the-appropriate-action-when-the-answer-to-a-question-is-added-to-the-que)：

> 我讨厌发布问题并在不久后解决它，即使在发布问题之前尝试解决问题数小时后**，**我仍然解决了它。我认为...
> 
> css
> 
> ```
> #parent {
>     width: 100%;
>     height: 300px;
>     background: rgba(255, 0, 0, 0.1);
> }
> 
> #right {
>     float: right;
>     width: auto;
>     height: 100%;
>     background: rgba(0, 0, 255, 0.1);
> }
> 
> #left {
>     position: relative;
>     overflow: hidden;
>     /*width: 100%;*/
>     height: 100%;
>     background: rgba(0, 255, 0, 0.1);
> }
> 
> table {
>     width: 100%;
>     background: rgba(255, 255, 0, 0.5);
> } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:12:54.430

```
<table id="parent">
   <tr>
     <td id="left">
        <table id="table">
          <tr>
            <th>Header</th>
            <th>Also Header</th>
          </tr>
        </table>
      </td>
    <td id="right">RIGHT!</td>
  </tr>
</table> 
```

并将您的表格 css 更改为：

```
#table {
    width: 100%;
    background: rgba(255, 255, 0, 0.1);
} 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T17:05:05.810

我使用 CSS 已经有一段时间了。但是，首先您应该将`left`div 放在`right`代码块的顶部。HTML 和 CSS 是按顺序排列的（据我所知）

另一件事，您要为左块实现的目标需要一些 JavaScript 才能工作。您应该首先获取表格的内容，当加载时，您需要`left`根据内容的大小调整块的大小。

一件好事是查看页面加载的生命周期并查看哪个部分首先呈现，基于此您可以相应地调整它们的大小。

**工作编辑：**

我玩过您的代码，并认为此代码块将提供“缩小以适应”功能。

HTML：

```
<div id="parent">
    <div id="right">sdfdsfdsfdsfsdf</div>
    <div id="left">
        <table>
            <tr>
                <th>Header</th>
                <th>Also Header</th>
            </tr>
        </table>
    </div>
</div> 
```

​CSS：

```
#parent {
    width: 100%;
    height: 300px;
    background: rgba(255, 0, 0, 0.1);
}

#right {
    float:right;
    width:auto;
    height: 100%;
    background: rgba(0, 0, 255, 0.1);
    display:inline-block;
    text-align:center;
}

#left {
    height: 100%;
    background: rgba(0, 255, 0, 0.1);
    width:100%;
}

table {
    width:300px;
    background: rgba(255, 255, 0, 0.1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T17:44:42.170

删除css中的表格宽度，包括jQuery，然后包括：

```
$(document).ready(function(){
   var new_width = $("#parent").width() - $("#right").width();

   $("table").first().css("width", new_width);

});​ 
```**

# c# - 在 c# 文本框中将电子邮件正文显示为 html

> ID：12374472
> 
> 赞同：1
> 
> 时间：2012-09-11T16:56:22.113
> 
> 标签：c#, asp.net

我在一个asp页面上模仿我的电子邮件客户端。我有一个显示来自、主题、附件和正文等内容的网格视图。正文是html。当我在网格视图中查看它并设置 htmlencode='false' 时，我可以正确看到它。但是，我想在文本框中显示它，以便它可以编辑和转发或回复。

有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:00:03.190

将 HTML 加载到富文本编辑器中以允许用户对其进行编辑 - 请注意，大多数富文本编辑器并非旨在创建*电子邮件安全*的 HTML，如果您要支持超过最基本的格式。

一些示例富文本编辑器：

*   [http://ajaxcontroltoolkit.codeplex.com/](http://ajaxcontroltoolkit.codeplex.com/)
*   [http://www.freetextbox.com/](http://www.freetextbox.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:00:27.387

[研究使用像可爱编辑](http://cutesoft.net/ASP.NET+WYSIWYG+Editor/)器这样的所见即所得（所见即所得）文本编辑器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T17:01:04.390

您需要使用**HTML 编辑器/文本框**，我们使用 DevExpress 组件，质量非常高，但不是免费的，还有 Telerik 或 Infragistics 等替代品以及免费替代品......请参见此处：[最佳免费可用的所见即所得 html 编辑器](https://stackoverflow.com/questions/3964725/best-free-available-wysiwyg-html-editor)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T17:02:15.260

[试试这个...](http://www.codeproject.com/Articles/57176/Parsing-HTML-Tags-in-C) 你不能在文本框中显示 html 但你可以得到源代码。我正在使用这个:)[点击这里](http://www.devasp.net/net/articles/display/994.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T17:23:40.443

您可以尝试 dinamycly 将 html 代码添加到页面：

```
<div runat="server" id="myDiv">
</div> 
```

然后从代码隐藏设置其 InnerHtml 属性：

```
myDiv.InnerHtml = "your html here"; 
```

但是用这种方式你不能编辑它......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T20:15:40.430

如果您使用的是 Devexpress 控件，

您可以使用 ASPxHTMLEditor。

它完全按照您的要求工作。

# sharepoint - 如何从沙盒解决方案进行 Response.Write？

> ID：12374473
> 
> 赞同：2
> 
> 时间：2012-09-11T16:56:21.477
> 
> 标签：sharepoint, web-parts, response.write

我需要创建一个 HTML 表格并将其作为电子表格发送给用户。我在普通的旧 ASP.NET 中做过很多次，但它在 SharePoint 中让我落后了。这是一个简单的按钮，带有一个事件处理程序，它调用存储在模块中的 3 个文件（可访问沙盒解决方案），然后尝试将文本连同适当的内容类型和内容处置一起推送给用户。当我让这部分工作时， SampleData.txt 部分将被多个列表中的数据替换。不幸的是，该页面是回发的，但没有提供文件供用户打开或下载。

我在几个地方读到 Response.Write 在 Web 部件中不可用，但肯定还有其他方法可以完成这项任务......？这就是我想要做的 - 有没有可用的替代方案？

```
 protected override void CreateChildControls()
    {
        Button ReportButton = new Button();
        ReportButton.Text = "Generate DCPDS Report";
        ReportButton.Click += new EventHandler(ReportButton_Click);
        this.Controls.Add(ReportButton);
    }

    protected void ReportButton_Click(Object sender, EventArgs e)
    {
        string header = "";
        string sampleData = "";
        string footer = "";

        using (SPWeb webRoot = SPContext.Current.Site.RootWeb)
        {
            header = webRoot.GetFileAsString("SpreadsheetParts/Header.txt");
            sampleData = webRoot.GetFileAsString("SpreadsheetParts/SampleData.txt");
            footer = webRoot.GetFileAsString("SpreadsheetParts/Footer.txt");
        }

        StringBuilder sb = new StringBuilder();
        sb.Append(header);
        sb.Append(sampleData);
        sb.Append(footer);

        Page.Response.Clear();
        HttpContext.Current.Response.ContentType = "application/vnd.ms-excel";
        HttpContext.Current.Response.AddHeader("content-disposition", "attachment; filename=June2010Spreadsheet.xls");
        HttpContext.Current.Response.Write(sb.ToString());
        //HttpContext.Current.Response.End();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:06:18.833

我没有对此进行测试，这将是一个有趣的概念证明，但我没有任何原始的 SharePoint 2010 服务器可供测试，因此我无法为您测试。但就像一个想法，你能不能把你的 excel 表的内容放在一个隐藏的字段中，然后做一些类似的事情：

HTML：

```
<script type="text/javascript">
   function downloadExcel() {
        location.href='data:application/download,' + encodeURIComponent(
        document.getElementById('<%= hfExcelData.ClientID %>').value
    );
   }
</script> 
```

C＃：

```
protected override void CreateChildControls()
{
    Button ReportButton = new Button();
    ReportButton.Text = "Generate DCPDS Report";
    ReportButton.Click += new EventHandler(ReportButton_Click);
    this.Controls.Add(ReportButton);
}

protected void ReportButton_Click(Object sender, EventArgs e)
{
    string header = "";
    string sampleData = "";
    string footer = "";

    using (SPWeb webRoot = SPContext.Current.Site.RootWeb)
    {
        header = webRoot.GetFileAsString("SpreadsheetParts/Header.txt");
        sampleData = webRoot.GetFileAsString("SpreadsheetParts/SampleData.txt");
        footer = webRoot.GetFileAsString("SpreadsheetParts/Footer.txt");
    }

    StringBuilder sb = new StringBuilder();
    sb.Append(header);
    sb.Append(sampleData);
    sb.Append(footer);

    this.hfExcelData.value = sb.ToString();

    Page.ClientScript.RegisterStartupScript(this.GetType(), "ExcelUploader", "downloadExcel();", true)

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T17:15:08.593

我正在与类似的事情作斗争。我的理解是，在沙箱中，SP 实际上是代理对您页面的调用，获取响应，然后将它自己的响应返回给客户端。该代理不允许 HttpContext 或 SP 类的所有功能。在我的测试中，没有返回 ContentType 和 headers。SP（在沙盒代码中）将始终返回 text/html 并忽略 Webpart 中的任何其他内容。

获得所需内容的*HTML*部分的一种方法是使用 asp:literal。您可以按照[以下步骤](http://www.wictorwilen.se/Post/Custom-application-pages-in-the-SharePoint-2010-Sandbox.aspx)创建一个带有 Web 部件的应用程序页面。删除母版页引用和占位符，以便返回的*唯一*内容是您的 Web 部件内容。在 Web 部件中，添加文字并将文本设置为 HTML 表。此时，您将拥有一个*仅以*HTML 格式返回表格的页面。这是[另一篇文章，概述了确切的技术](http://blogs.msdn.com/b/billgr/archive/2011/01/31/sandboxed-web-request-handler.aspx)。但是，您仍然无法更改内容类型或添加标题。 *也许*结合第一个答案可以为您提供解决方案？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T21:10:17.387

在按钮或链接按钮上使用默认的 javascript 函数 STSNavigate(dUrl);

调用创建 HttpContext.Current.Response 的页面

# opencv - 为 OpenCV 安装 NetBeans 7.2 MinGW

> ID：12374474
> 
> 赞同：4
> 
> 时间：2012-09-11T16:56:27.453
> 
> 标签：opencv, netbeans, mingw, netbeans-7

我已经根据[http://netbeans.org/community/releases/72/cpp-setup-instructions.html](http://netbeans.org/community/releases/72/cpp-setup-instructions.html)在我的 PC 上安装了 minGW ，并且我使用找到所有必要文件的 NetBeans 7.2 “恢复了默认值”。

但是，当我制作测试示例 C++ 应用程序时，出现以下错误：

```
c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/bin/ld.exe: cannot find   -ladvapi32 
c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/bin/ld.exe: cannot find -lshell32 
c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/bin/ld.exe: cannot find -luser32 
c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/bin/ld.exe: cannot find -lkernel32 
collect2: ld returned 1 exit status 
make[2]: *** [dist/Debug/MinGW-Windows/welcome_1.exe] Error 1 
make[1]: *** [.build-conf] Error 2
make: *** [.build-impl] Error 2 
```

谁能帮我为 NetBeans 安装 openCV 和 minGW？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T03:07:27.867

## 如何使用 Netbeans 7.2 构建和使用 openCV。一步步

## 准备工作

在“c:\mingw\bin”和“c:\mingw\lib”

*   搜索并删除所有 libopencv*.dll , libopencv*.dll.a , libopencv*.a

用以下程序测试

下载 OpenCV-2.4.2.exe (222.9 MB) [http://sourceforge.net/projects/opencvlibrary/files/](http://sourceforge.net/projects/opencvlibrary/files/)
下载 mingw-get-inst-20120426.exe (662.7 kB) [http://sourceforge.net/projects/ mingw/files/](http://sourceforge.net/projects/mingw/files/)
下载 cmake-2.8.9-win32-x86.zip [http://www.cmake.org/files/v2.8/cmake-2.8.9-win32-x86.zip](http://www.cmake.org/files/v2.8/cmake-2.8.9-win32-x86.zip)

**本手册中使用的所有参考资料：**

本手册中的所有引用均以“T:\”开头。请更改为实际驱动器号！（主要是 "c:\" ）

*   C:\msys\1.0\src ---（如果不存在“msys”，则创建或使用“C:\mingw\src”）。
*   C:\mingw\bin

**注意：**
对于 msys-mingw 环境中的新项目，我总是使用“ **C:\msys\1.0\src** ”目录。
要具有相同的条件，gcc 也应该是**“4.7.0”**而不是**“4.6.2”**

*   **放在 PATH "C:\mingw\bin;C:\msys\1.0\bin;" 的前面**

**您可能已经注意到，您不能使用 OpenCV-2.4.2.exe 附带的库。**
**完全忽略**文件夹**“...\opencv\build\x86\mingw\bin”**和**“...\opencv\build\x86\mingw\lib”**。

**让我们获取新的 mingw 文件。**

启动 mingw-get-inst-20120426.exe

用途：下载最新的存储库...

![在此处输入图像描述](../Images/ee2df62ed04bebb7aaada462aa16590f.png)

确保指定的目录正确，通常是“C:\mingw”。
如下所述进行检查。
如果你还需要msys，那么也要选择“MinGW Developer Toolkit”。

![MinGW 安装](../Images/23da1f451054ab104fbb1b8d2648d8e5.png)

现在 MinGW-Get 下载所有新文件。(4.7.0)

**运行“OpenCV-2.4.2.exe”**。

文件所在的文件夹应该是“c:\msys\1.0\src”。
这会将所有文件写入新目录“opencv”中。
新文件夹：“ **C:\msys\1.0\src\opencv** ”。从现在开始，这是我们的**顶级目录**

打开“ **cmake-2.8.9-win32-x86.zip** ”并将文件复制到您的 cmake 文件夹。

## 创建 Makefile

运行“ **C:\cmake\bin\cmake-gui.exe** ”

*   A：设置必填字段，点击“配置”
*   B：设置，点击“下一步” ![在此处输入图像描述](../Images/22a080606a6bc18f7aeb7761368569b8.png)

*   设置并点击“确定” ![在此处输入图像描述](../Images/3bc09ddf5d47a859c9def7cf222ee473.png)

**可能的错误：在您的 PATH 中找到了 sh.exe**

*   A：错误“在您的 PATH 中找到了 sh.exe”
*   B：在“C:\msys\1.0\bin”或“C:\mingw\bin”中搜索sh.exe并重命名为“shxx.exe”

*   再次单击“配置”。

![在此处输入图像描述](../Images/933edf5964c68d584c184215290f0f87.png)

**一个可能的错误：CMAKE_MAKE_PROGRAM 未设置**

*   标记“CMAKE_MAKE_PROGRAM”并复制，点击“添加条目”

![在此处输入图像描述](../Images/5291d88c455828e8cf3611968f571228.png)

*   粘贴，设置并单击“确定”
*   再次单击“配置”。

![在此处输入图像描述](../Images/a1e5dded242f8d7d28e69c88dbb7ad6b.png)

**现在它应该可以工作了。Cmake搜索编译环境**

![在此处输入图像描述](../Images/76e6cc68b28d58b5f8080fb572c15c95.png)

**Cmake 显示选项页面**

*   滚动浏览红色选项。不要改变任何东西
*   再次点击“配置”

![在此处输入图像描述](../Images/a249ddef3085bfd9b836fbe3b889c558.png)

**让我们生成 Makefile**

*   点击“生成”

![在此处输入图像描述](../Images/b434ae15ee7bebd625e416b8906dbfea.png)

**构建openCV**

*   运行“cmd”进入目录“C:\msys\1.0\src\opencv\build\mingw”。在那里输入“make”

![在此处输入图像描述](../Images/cc78dd1805ffc29ee962fca1eda4f447.png)

**请稍等！**

在我的电脑上大约需要 4 个小时

![在此处输入图像描述](../Images/e07c0aaa85122411b506ceb2e79d86e9.png)

**检查所有文件是否在正确的位置**

*   B: *.dll 在 "C:\msys\1.0\src\opencv\build\mingw\bin"
*   C: *.dll.a 在 "C:\msys\1.0\src\opencv\build\mingw\lib"

![在此处输入图像描述](../Images/91d55d038978ad5ddd133b441130172e.png)

## 构建一个opencv程序

*   在“C:\msys\1.0\src\opencv”中创建一个新文件夹“OpenCV-MakeC”
*   在文件夹“OpenCV-MakeC”中创建一个“Makefile”和“imgdisplay.cpp”。

避免复制和粘贴错误。这里有2个文件供[下载：](http://www.moskito-x.de/stack/files/OpenCV-Sample1.zip)

![在此处输入图像描述](../Images/0ff059722fa101b7cd04837a980f5b95.png)

**生成文件**

```
MKDIR_P = C:/msys/1.0/bin/mkdir -p
DESTDIRB = build/Debug
DESTDIRD = dist/Debug
LIBDIRCV = ../build/mingw/lib
CFLAGS = -O2
CXX = C:/mingw/bin/g++.exe
Applic = imgdisplay

ALL: imgdisd

imgdisd:
    $(CXX) $(CFLAGS) -c -g $(Applic).cpp -I../build/include -MMD -MP -MF $(DESTDIRB)/$(Applic).o.d -o $(DESTDIRB)/$(Applic).o
    $(CXX) $(CFLAGS) -o $(DESTDIRD)/$(Applic) $(DESTDIRB)/$(Applic).o -L../build/mingw/bin $(LIBDIRCV)/libopencv_calib3d242.dll.a $(LIBDIRCV)/libopencv_contrib242.dll.a $(LIBDIRCV)/libopencv_core242.dll.a \
    $(LIBDIRCV)/libopencv_features2d242.dll.a $(LIBDIRCV)/libopencv_flann242.dll.a $(LIBDIRCV)/libopencv_gpu242.dll.a $(LIBDIRCV)/libopencv_highgui242.dll.a $(LIBDIRCV)/libopencv_imgproc242.dll.a \
    $(LIBDIRCV)/libopencv_legacy242.dll.a $(LIBDIRCV)/libopencv_ml242.dll.a $(LIBDIRCV)/libopencv_nonfree242.dll.a $(LIBDIRCV)/libopencv_objdetect242.dll.a $(LIBDIRCV)/libopencv_photo242.dll.a \
    $(LIBDIRCV)/libopencv_stitching242.dll.a $(LIBDIRCV)/libopencv_ts242.a $(LIBDIRCV)/libopencv_video242.dll.a $(LIBDIRCV)/libopencv_videostab242.dll.a 
md:
    $(MKDIR_P) "$(DESTDIRB)"
    $(MKDIR_P) "$(DESTDIRD)" 
```

**图像显示.cpp**

```
/* 
 * File:   imgdisplay.cpp
 * Author: Administrator
 *
 * Created on 14\. September 2012, 01:12
 */

#include <cstdlib>
#include <opencv/cv.h>
#include <opencv/highgui.h>

using namespace std;

int main( int argc, char* argv[] ) 
{

    cvNamedWindow("mainWin", CV_WINDOW_AUTOSIZE); 
    cvMoveWindow("mainWin", 100, 100);
    IplImage* img;
    img = cvLoadImage("D:/grafik/Lightroom/light01.jpg");
    if (!img) {
        std::cout << "Could not open the image file" << std::endl;
        return -1;
    }
    cvShowImage("My Picture", img); 
    cvWaitKey(0);
    cvReleaseImage(&img);
    return 0;
} 
```

**Netbeans 7.2 创建项目**

*   文件 -- 新项目

![在此处输入图像描述](../Images/315f8744161a6fdc0d27641c528613cc.png)

**使用如下所述的设置。**

![在此处输入图像描述](../Images/5414e0e57a12bf9cd0dda28578008086.png)

**创建项目**

![在此处输入图像描述](../Images/902a31b04ced02531f2021c25f6e9a4c.png)

**创建新目标**

*   在“Makefile”上单击鼠标右键

**注意：**如果你得到一个错误：Makefile:12: *** missing separator。停止。

主要是复制和粘贴错误！（确保起始行没有空格。但设置了 2 个选项卡）。

![在此处输入图像描述](../Images/98b780f2bddd10fadbf2fdea1e14413f.png)

**创建新文件夹**

*   在“Makefile”上单击鼠标右键
*   使用新目标“md”

![在此处输入图像描述](../Images/187dc1dfa82373295dfbe6adb15f79d9.png)

**项目文件夹现在看起来像..**

![在此处输入图像描述](../Images/23fc9c8047d982ba47b6bce9a62d00e2.png)

**构建项目**

![在此处输入图像描述](../Images/c804aa6bfd246b87f1ed5cfb14388567.png)

**调试项目**

*   复制需要的dll（C:\msys\1.0\src\opencv\build\mingw\bin 到T:\msys\1.0\src\opencv\OpenCV-MakeC\dist\Debug）

![在此处输入图像描述](../Images/e977201d76e73736a631785408dfdc8e.png)

*   打开 imgdisplay.cpp（双击）
*   设置断点 第 17 行

    17 cvNamedWindow("mainWin", CV_WINDOW_AUTOSIZE);

*   单击调试按钮

![在此处输入图像描述](../Images/47e67aafeb71754549dca1ae92aaf1ee.png)

**程序在 17 号线停靠**

![在此处输入图像描述](../Images/8969cec7e21a6c32156ae6b2852a11e0.png)

**未解析的标识符**

如果 .cpp 文件的源代码如下所示

![在此处输入图像描述](../Images/a7969f289036718430619470663701b0.png)

在您的项目上单击鼠标右键。
检查`C/C++ Code As...`
运行 `Reparse Project.`

![在此处输入图像描述](../Images/88904c09f29f882b70607c0ebbd980a7.png)

如果这还不够。
转到按照说明`Project Properties`
填写`Include`输入字段。

![在此处输入图像描述](../Images/d4fda1e4ad70f14062a4047d950f2972.png)

## 清理

*   如果您将 sh.exe 重命名为 shxx.exe ！重命名回来！
*   如果您的 PATH 变量中有空格，请在空格周围加上引号（仅在 Visual Studio 等相关程序周围）。
    我知道它们不是必需的，但是一两个程序无法处理
    PATH 中的空格！
*   在一个

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T14:13:52.593

它也发生在我身上，但不是使用`make`I used `mingw32-make`，而是它起作用了。

您可以`mingw32-make`使用安装`mingw-get install mingw32-make`

# c++ - 编译时无法打开包含文件 X11/Xh

> ID：12374475
> 
> 赞同：3
> 
> 时间：2012-09-11T16:56:35.793
> 
> 标签：c++, winapi, fltk

我已将 FL 文件夹复制到项目中。

它向我展示了这个：

> 1>----- 构建开始：项目：客户端，配置：调试 Win32 ------ 1> Main.cpp 1>c:\users\user\documents\visual studio 2012\projects\talktome\talktome \fl\xutf8.h(33)：致命错误 C1083：无法打开包含文件：'X11/Xh'：没有这样的文件或目录 ========== 构建：0 成功，1 失败，0 向上-to-date, 0 跳过 ==========

我的源代码是

```
using namespace std;

#include "FL\Fl.H"
#include "FL\Fl_Window.H"

#define   WIDTH    700
#define   HEIGHT   500

int main()
{
    Fl_Window win(WIDTH, HEIGHT, "TalkToMe");

    win.begin();
    win.end();

    win.show();

    return Fl::run();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T17:07:47.940

您应该在您的 FLTK 包含之前检查是否有“#define WIN32”。会帮助你。它应该。这里的类似问题：

[MSVC 中的 FLTK 需要 x11 标头吗？](https://stackoverflow.com/questions/6804275/fltk-in-msvc-needs-x11-headers)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T07:38:54.750

*   不要`\`在包含语句中使用。使用正斜杠`/`。

*   您在对霉菌毒素的评论中提到的问题清楚地表明您存在关联问题。您必须告诉编译器在哪里可以找到 fltk 库和头文件。`Unresolved external symbols`只意味着你知道一件事...... :)

*   您*不必*按照 Mycotoxin 文本中的描述定义 WIN32。编译器会为您执行此操作，而 FLTK 使用了这一事实。即使没有，您通常也将其作为参数提供给编译器（在 GCC 的情况下类似于 -DWIN32 或在 CL 的情况下类似）。

*   [在http://seriss.com/people/erco/fltk-videos/](http://seriss.com/people/erco/fltk-videos/)观看 Greg 的视频教程，他解释了如何配置 FLTK 并使用 Microsoft Visual Studio 7 构建一个小型应用程序。

*   最后，获取源码包，并读取`README.MSWindows.txt`文件。它解释了在 Windows 上构建基于 FLTK 的应用程序所需了解的一切。

# javascript - 理解 Javascript 中的嵌套数组

> ID：12374480
> 
> 赞同：0
> 
> 时间：2012-09-11T16:57:04.687
> 
> 标签：javascript, arrays, nested, indexof

我想在 Javascript 中创建一个嵌套数组，但不能做我想做的事情，我不知道它是否可能。这是我要创建哪种数组的示例：

```
var array = ['id1', 'id2', 'id3', 'id4']; 
```

然后我想为每个 id 添加新数组，这样 id 值保持不变。为什么？因为我想使用 indexOf 方法来找出具有子数组 id 的主数组的元素索引。像这样的东西：

```
array[0]['par1'] should return the value of parameter1
array[0]['par2'] should return the value of parameter2

...

array[0] should return "id1" because

alert(array.indexOf("id1"))   must return 0 ; 
```

如果有某种方法可以做到这一点，那就太好了，但如果不是我认为我将使用 2 个数组，一个将保存子数组，另一个将保存 id

对不起我的英语不好，我尽力解释我的需求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:58:48.257

也许你想做

```
array[0] = {par1: 'somevalue', par2: someother};
array[1] = {par1: 'anotehrone', par2: stillanother}; 
```

这设置为您数组 javascript 对象的元素，这里用作关联数组。它们使您能够通过 key 设置或获取元素：

```
array[0]['par1'] = 'new value'; // write
var newval = array[0]['par1']; // read 
```

但是，如果您还想`array[0]`返回不是通用对象而是字符串的东西……那么您可能不想要 javascript。这种语言不能那样工作。

# c# - 是否可以从 C# 应用程序访问 SQL Server Service Broker？

> ID：12374488
> 
> 赞同：6
> 
> 时间：2012-09-11T16:57:39.477
> 
> 标签：c#, sql-server, sql-server-2005, service-broker

我想使用 SQL Server Service Broker 生成一条消息（在 SQL Server 内部）并在外部 C# 应用程序中读取它。

我仅限于运行 SQL Server 2005 的 Windows 2003。我已经阅读了很多文章，暗示这是一种可能性，但我在任何地方都没有看到示例。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:52:25.180

T-SQL 具有访问 Service Broker 的语句：SEND、RECEIVE 等。您可以使用 ADO.NET 来执行它们。

# sitecore - 更新项目中的链接？

> ID：12374496
> 
> 赞同：0
> 
> 时间：2012-09-11T16:58:16.747
> 
> 标签：sitecore

我有以下小脚本

```
Sitecore.Data.Database master = Sitecore.Configuration.Factory.GetDatabase("master");
    using (new Sitecore.SecurityModel.SecurityDisabler())
    {
            foreach (Sitecore.Data.Items.Item child in item.Children)
            {
                foreach (ItemLink link in child.Links.GetAllLinks())
                {
                    Item itm = link.GetTargetItem();
                    if (itm != null) {
                        Response.Write(link.TargetPath + " (" + itm.Paths.IsMediaItem + ", " + itm.ID + ")" + "<br/>");
                    } else
                    {
                        Response.Write("<span style='color:red;font-weight:bold;'>NULL ITEM ("+ link.TargetPath + ")</span><br/>");
                    }
                }           

                if (item.Paths.ContentPath.Split("/".ToCharArray()).Length <= 10)
                    RecurseLinks(child, reset);
            }
    } 
```

这会从指定的起始路径遍历所有项目（和子项），并获取项目中定义的所有链接。

我需要更新的一些链接，因为其中一些当前是用绝对路径定义的，而不是它链接到的项目的 ID（媒体或内容项目）。

我将如何在上述脚本中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:45:04.753

“重建链接数据库”操作应该有效。空 ID 可能是由于链接断开（更新链接时在数据库中未找到目标项目）造成的。因此，通过控制面板或在您的代码中重建链接（请参阅 参考资料`LinkDatabaseHelper`）应该可以工作。

# php - 如何在 linode 中使用 crontab 执行 php 文件

> ID：12374502
> 
> 赞同：2
> 
> 时间：2012-09-11T16:58:27.917
> 
> 标签：php, crontab, linode

我正在尝试使用 crontab 执行托管在 linode 上的 php 文件。

这是我到目前为止所做的。

我添加了一行：

```
/etc/crontab ('crontab -e' is used too) 
```

我想每 2 分钟执行一次这个文件。

```
*/2 * * * * /usr/bin/php /srv/www/path/to/my/php/file.php 
```

这是我的 php 文件中用于测试的代码

```
// Set error reporting
error_reporting(-1);
ini_set('display_errors', 'On');
ini_set('html_errors', 'On');
ini_set('allow_url_fopen', 'On');

$fh = fopen('gallery.xml', 'w+');
fwrite($fh, $_SERVER['REQUEST_TIME']);
fclose($fh); 
```

php 文件和 xml 文件都具有 777 权限。如果我直接在浏览器中打开php文件，xml文件可以记录变量。但是当我使用 crontab 时没有任何反应。似乎它对我不起作用。

我正在使用 Linode 和 debian 6。

我做错什么了吗？请给点建议。谢谢。

科比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:05:42.120

您可能需要正确设置您的工作目录或使用绝对路径`fopen()`作为 cron 的默认工作目录是作业在其下运行的任何帐户的主目录，因此它可能是`~/root`或`~/yourusername`（也请参阅[此 stackexchange 问题](https://unix.stackexchange.com/questions/38951/what-is-the-working-directory-when-cron-executes-a-job)）。你可以试试这个：

```
*/2 * * * * ( cd /srv/www/path/to/my/php/ ; /usr/bin/php -q file.php ) 
```

或这个：

```
*/2 * * * * cd /srv/www/path/to/my/php/ && /usr/bin/php -q file.php 
```

不同的是，如果失败，第二个将不会触发 PHP，`cd`这完全是我们想要的，因为如果`cd`失败将不会`file.php`启动。

您还可以设置可执行位（即`chmod a+x file.php`）并将其作为第一行添加到您的脚本：

```
# /usr/bin/php -q 
```

这样您就可以像调用任何其他应用程序或脚本（即`./file.php`）一样调用您的脚本。那么您的 crontab 条目将如下所示：

```
*/2 * * * * cd /srv/www/path/to/my/php/ && ./file.php 
```

并且不要在`error_reporting()`. 它什么也没说。使用`E_ALL`或任何以有效设置结尾并且比 -1 更易于解释的东西。

# bzip2 - 如何重命名 tar.bz2 存档中的文件？

> ID：12374505
> 
> 赞同：1
> 
> 时间：2012-09-11T16:58:46.167
> 
> 标签：bzip2

我想知道是否有更好的方法可以从 .tar.bz2 文件中重命名文件，而无需解压缩并重新打包整个存档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:24:31.427

bzip2 对 tar 生成的整个流执行流压缩。它没有文件的概念，因此在 tar.bzip2 存档中查找文件的唯一方法是解压缩 bzip2 直到文件出现的位置。删除该文件并创建一个新的 tar.bz2 存档将需要创建一个新的 tar 文件。

如果您编写一个特殊用途的缓存以避免在解压缩存档时重新压缩，您*也许*可以重用原始 tar.bz2 存档的开头，但您肯定必须重新压缩存档的其余部分。

如果你的问题是磁盘空间问题，你可以尝试通过管道在线执行整个解压和压缩，即

```
bzcat original.tar.bz2 | command_to_rename_inside_tar | bzip2 > result.tar.bz2 
```

# javascript - 无论浏览器如何，如何检查控件是否被禁用？

> ID：12374510
> 
> 赞同：0
> 
> 时间：2012-09-11T16:58:58.990
> 
> 标签：javascript, dom

首先，我不知道为什么禁用控件仍在激活Javascript功能。现在，我添加了以下几行来检查控件是否被禁用，然后取消操作。IE9 工作正常，但 Chrome 和 FireFox 不工作。

```
var isDisabled = document.getElementById('contentMain__lnkDelete').getAttribute('disabled');
if (isDisabled == true) {
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:00:08.803

简单地：

```
if (document.getElementById('contentMain__lnkDelete').disabled)
    return false; 
```

或者：

```
return  !document.getElementById('contentMain__lnkDelete').disabled; 
```

# jqgrid - 使用虚拟滚动获取本地 jqgrid 数据类型的“正在加载 ...”div

> ID：12374514
> 
> 赞同：5
> 
> 时间：2012-09-11T16:59:11.087
> 
> 标签：jqgrid

当使用 jqgrid 的“虚拟滚动”功能仅创建为大型数据集显示的元素时，在构建单元格时会有延迟。

如果您使用 ajax 获取数据，则会出现加载显示，但如果数据类型是本地的，则显示没有机会使用加载消息进行更新，并且用户会在一段时间内看到一个空白表，直到它呈现。

对于如何在这种情况下显示加载消息有什么建议吗？jqgrid 中是否有任何事件或挂钩来添加超时以使浏览器有机会呈现加载消息？

# ruby-on-rails-3 - 单个表的 Rails ActiveRecord 时区

> ID：12374519
> 
> 赞同：0
> 
> 时间：2012-09-11T16:59:30.333
> 
> 标签：ruby-on-rails-3

我几乎所有的表都使用 UTC。然而，一些遗留表使用 EST。

我住在美国东部时间。所以我设置

```
config.time_zone = 'Eastern Time (US & Canada)' 
```

到目前为止一切顺利，数据以 UTC 存储并转换为 EST

但是，当我处理一些遗留表时，我希望将数据存储在 EST 中并按原样在 EST 中进行翻译，我可以设置；

```
config.active_record.time_zone = :local 
```

但是，适用于所有型号，它打破了很多测试。

有没有办法为每个模型设置时区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:14:30.680

也许如果您将 active_record.time_zone 设置为 :local 并使用[Time.zone](http://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html)将数据存储在 EST 中，它将对您有所帮助...

# azure - 使用移动 Azure 服务验证 MVC4 移动 Web 应用程序

> ID：12374521
> 
> 赞同：3
> 
> 时间：2012-09-11T16:59:49.320
> 
> 标签：azure, azure-mobile-services

如何使用移动 Azure 服务对 MVC4 移动 Web 应用程序进行身份验证？

我想从 MVC 应用程序验证 Live Id，并且我想使用移动 Azure 服务作为后端，以便它可以与我们的 Windows 8 应用程序共享相同的服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:19:27.493

到目前为止，Azure 移动服务（又名[ZUMO](http://weblogs.asp.net/scottgu/archive/2012/08/28/announcing-windows-azure-mobile-services.aspx)）仅支持 Windows 8，但您当然也可以将其与其他应用程序一起使用，并且大多数情况下，WebAPI 是与您的 MVC 应用程序绑定的最佳选择，主要是在使用 Web API 作为代理时。

您可以在您的 MVC4 应用程序中使用文章[通过 ASP.NET Web API 在您的 Web 应用程序中使用 Azure 移动服务，以使用移动 Azure 服务对您的应用程序进行身份验证。](http://www.strathweb.com/2012/09/using-azure-mobile-services-in-your-web-apps-through-asp-net-web-api/)

# vba - 加载的 XML 文件被缓存，不更新

> ID：12374528
> 
> 赞同：3
> 
> 时间：2012-09-11T17:00:21.220
> 
> 标签：vba, excel

我有一个简单的 XML 文件，其中包含我的 VBA 应用程序的当前版本号。在应用程序初始化时，我调用该`GetCurrentVersionNumber()`函数来获取该版本号。问题是，当我更改服务器上的 XML 文件时，VBA 无法识别它。它似乎正在读取 XML 文件的缓存版本。

VBA 中有没有办法防止正在加载的 XML 文件被缓存？或者，是否有另一种解决方法？

这是功能：

```
Function GetCurrentVersionNumber() As String

    Dim doc As MSXML2.DOMDocument60
    Set doc = New MSXML2.DOMDocument60

    doc.async = False
    If Not doc.Load("http://mywebsite.com/myfile.xml") Then
        Debug.Print "Unable to retrieve current application version."
        GetCurrentVersionNumber = ""
        Exit Function
    End If
    GetCurrentVersionNumber = doc.SelectSingleNode("/Application/Version").Text

End Function 
```

如果我转到我的默认浏览器 (Chrome)，导航到 XML 文件，然后按 Shift+F5 强制重新加载，此后 VBA 应用程序将得到更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T17:32:59.233

一种方法是在 URL 的末尾附加一个（随机）虚拟查询字符串。这将“强制”重新获取（因为 URL 唯一性考虑了查询字符串）

```
Dim qs as string
qs = Cstr(rnd()*1e6)

If Not doc.Load("http://mywebsite.com/myfile.xml?" & qs) Then
... 
```

# r - 如何使用 iGraph 在 R 中挖掘图案

> ID：12374534
> 
> 赞同：7
> 
> 时间：2012-09-11T17:00:35.110
> 
> 标签：r, graph, igraph

我正在尝试使用包在 R 中挖掘 3 节点图案`igraph`。我想检索图中每个单独顶点的图案数量，这在 graph.motifs() 函数中似乎是不可能的。

因此，对于示例图：

```
testGraph = barabasi.game(10, 
m = 5,
power = 2, 
out.pref = TRUE,
zero.appeal = 0.5,
directed = TRUE) 
```

我可以用它`graph.motifs()`来计算整个图中每个 3 节点主题的总数：

```
graph.motifs(testGraph, 
size = 3) 
```

> [1] 0 0 26 0 16 0 2 58 0 0 0 0 0 0 0 0

但我想知道个人顶点参与。那么，顶点 1 参与了多少个主题（以及什么类型）？有谁知道一个简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T13:39:30.610

这是一个快速的方法。

如果您对顶点*A*的三元组感兴趣，则首先创建包含*A*及其直接邻居的诱导子图。您可以通过`neighborhood()`和`induced.subgraph()`或简单地使用`graph.neighborhood()`.

然后在这个子图中找到主题，但不是用`graph.motifs()`，而是用`triad.census()`，因为这会计算所有可能的三元组，甚至是非连接的三元组。

然后从这个子图中删除*A*`triad.census()` ，然后再次调用。两个计数向量的差异将恰好是包含*A*的基序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-21T21:04:14.463

这是 Gabor 解决方案的一个独立示例：

```
testGraph = barabasi.game(10, 
    m = 5,
    power = 0.6, 
    out.pref = TRUE,
    zero.appeal = 0.5,
    directed = TRUE)

# Label nodes to more easily keep track during subsets/deletions
V(testGraph)$name = c('one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten')

subGraph = graph.neighborhood(testGraph, order = 1, V(testGraph)[1], mode = 'all')[[1]]
allMotifs = triad.census(subGraph)
removeNode = delete.vertices(subGraph, 'one')
node1Motifs = allMotifs - triad.census(removeNode) 
```

# .htaccess - htaccess 只接受来自特定 http_referer 的流量

> ID：12374535
> 
> 赞同：3
> 
> 时间：2012-09-11T17:00:43.670
> 
> 标签：.htaccess

我正在尝试设置一个 htaccess 文件来完成以下任务：

仅当查看用户来自特定域（链接）时才允许查看我的网站

所以，例如。我有一个名为的域。保护.mydomain.com 。我只希望来自 unprotected.mydomain.com 链接的人能够访问protect.mydomain.com。

我遇到的最大的突出问题是，如果您从 unprotected.mydomain.com 访问protect.mydomain.com 并单击protect.mydomain.com 中的链接，该链接会转到protect.mydomain.com 下的另一个页面，那么我会被发送回到我的重定向，因为 http_referer 是 protect.mydomain.com 。因此，为了解决这个问题，我进行了检查以允许引荐来源网址为protect.mydomain.com。它不起作用，并且允许从任何地方访问。这是我的 htaccess 文件。（所有这些都在 https 下）

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_REFERER} ^https://(.+\.)*mydomain\.com
RewriteCond %1 !^(protect|unprotected)\.$ 
RewriteRule ^.*$ https://unprotected.mydomain.com/ [R=301,L] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T17:14:38.020

您正在将您的推荐人与`^https://(.+\.)*mydomain\.com`. 这意味着，如果某个完全其他的站点，说指向**Protect.mydomain.com**`http://stealing_your_images.com/`上的某些内容的链接，第一个条件将失败，因此请求永远不会重定向到. 您想从另一个方向接近它，只允许某些引用者通过，然后重定向其他所有内容：**`https://unprotected.mydomain.com/`**

 **```
RewriteEngine On
RewriteBase /

# allow these referers to passthrough
RewriteCond %{HTTP_REFERER} ^https://(protect|unprotected)\.mydomain\.com
RewriteRule ^ - [L]

# redirect everything else
RewriteRule ^ https://unprotected.mydomain.com/ [R,L] 
```**

# php - 如何在mysql中选择从最后一行到第一行

> ID：12374543
> 
> 赞同：1
> 
> 时间：2012-09-11T17:01:13.593
> 
> 标签：php, mysql, sorting

每当 `"select * from table where userid=xx"`完成类似的查询时，mysql 就会从表的第一行到最后一行获取这些值。

但我想从最后一个到第一个进行选择，以便最近更新的值首先显示在结果中。

我不能这样做`"select * from table where userid=xx order by time DESC"`，因为表中没有时间列。我只想首先显示表中最近更新的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-27T12:03:09.140

```
$result= mysql_query("SELECT 
(SELECT column FROM table WHERE [condition] ORDER BY column LIMIT 1) as 'first',
(SELECT column FROM table WHERE [condition] ORDER BY column DESC LIMIT 1) as 'last'");

$row=mysql_fetch_array($result);
echo $row['first'];
echo $row['last']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:04:49.467

如果您有任何自动递增字段，则可以按该 desc 排序。

为了保证结果，您必须提供要排序的列。因此，您将不得不更改表结构或决定订购什么。

一个技巧是将数据按照呈现到数组中的顺序拉入，然后开始从该数组的底部弹出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T17:05:56.420

您要么必须具有时间戳、自动增量 ID，要么必须具有要排序的其他列。

仅仅因为您在不使用子句时以特定顺序从数据库中获取行`ORDER BY`，并不意味着它们可以保证以该顺序返回。它也不意味着结果集中的任何顺序。您需要一个可以使用的明确字段`ORDER BY`，否则您无法做您想做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T17:21:47.430

如果您没有可以依赖的列，您可以为此做一些技巧：

```
SELECT * FROM (SELECT *,(@x:=@x+1) default_ordering FROM `table_name`, (SELECT @x:=0) t2) any_name ORDER BY default_ordering DESC 
```

# c# - 对象序列化-Binaryformatter，如何在现有文件中写入和/插入数据？

> ID：12374556
> 
> 赞同：0
> 
> 时间：2012-09-11T17:02:31.007
> 
> 标签：c#, winforms, io, binary, .net

我想编写包含文件名列表的文件，我正在存储这个本地磁盘，

每当我写文件时，所有现有数据都被擦除并且新数据被覆盖，我无法保留现有数据并在现有数据行之后开始写入

我的二进制格式编写器代码是这样的

```
private object ReadFileToUI(string filename)
    {
        Stream readStr = File.OpenRead(filename);
        BinaryFormatter rbf = new BinaryFormatter();
        object obj= rbf.Deserialize(readStr);
        readStr.Close();
        return obj;

    } 
```

我的二进制作家就像这样，

```
 Stream str = File.OpenWrite(fileName);
        BinaryFormatter bf = new BinaryFormatter();
        bf.Serialize(str, fl);
        str.Close(); 
```

假设如果我在文件中已经有 10 个对象，任何新的写入都应该被视为第 11 次及以后，并且文件中以前的数据不应该受到影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:21:21.387

像这样打开你的流...

```
Stream str = File.Open(fileName, FileMode.Append, FileAccess.Write); 
```

# asp.net-mvc - 使用参数对 RedirectToAction 进行单元测试

> ID：12374557
> 
> 赞同：1
> 
> 时间：2012-09-11T17:02:33.580
> 
> 标签：asp.net-mvc, nunit

我有一个正在尝试进行单元测试的 MVC 控制器类。

具体的 ActionResult 是这样的

```
public ActionResult Create(Shipment newShipment)
{
   do some stuff to create a shipmentID
...
   return RedirectToAction("AddUnit",newShipment.ShipmentID);
} 
```

我已经模拟了控制器上下文等，现在我想测试传递给 RedirectToAction 调用的 newShipment.ShipmentID 是我所期望的。

我有一个测试（在设置阶段有很多嘲笑）

```
 [Test]
    public void CreateSuccess()
    {
        //Arrange
        var shipment = new Shipment();
        shipment.Widgets = 2; //Make sure it a valid shipment otherwise
        //Act
        var result = controller.Create(shipment) as RedirectToRouteResult;
        //Assert
        Assert.IsNotNull(result);
        Assert.AreEqual("AddUnits", result.RouteValues["action"]);
        Assert.IsNull(result.RouteValues["controller"]);
        ... 
```

现在我想找到一个 Assert 来检查我传递给 RedirectToAction 的 shippingID 是否正确。我如何检索它的值？

（我相信这段代码确实有效（即实际视图得到正确的shipmentID），但我想编写一个单元测试）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-13T15:55:13.587

实际上， RedirectToActions 可以带参数；下面是我如何在一个中测试正确参数的简化示例。我在这里使用 NUnit 和 FluentAssertions。

```
[HttpPost]        
public ActionResult RedirectMethod()
{
     return RedirectToAction("Index", "Home", new { parameter = "Value" });
} 
```

然后是测试：

```
[Test]
public void RedirectSetsExpectedParameters()
{
    var result = controller.RedirectMethod();
    var redirectResult = result.As<RedirectToRouteResult>();

    var expectedRedirectValues = new RouteValueDictionary
        {
            { "parameter", "Value" },
            { "action", "Index" },
            { "controller", "Home" }
        };

    redirectResult
       .RouteValues
       .ShouldBeEquivalentTo(expectedRedirectValues, 
       "The redirect should look as I expect, including the parameters");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-01T11:41:40.703

在这里，我给出了一个重定向到操作的示例

```
public ActionResult Signupsuccess(string account_code, string plan)
{
   ..........
  do some stuff

  return RedirectToAction("SubscriptionPlan", "Settings");

} 
```

我已经模拟了控制器上下文并将一些参数传递给从控制器到测试方法的 RedirectToAction 调用。最后它测试了预期和实际

[测试方法（）]

```
 public void SignupsuccessTest()
       {
            HomeController target = new HomeController(); // TODO: Initialize to an appropriate value
            string account_code = "B898YB7"; // TODO: Initialize to an appropriate value
            string plan = "Application-BASIC"; // TODO: Initialize to an appropriate value

            var ControllerContext = new Mock<ControllerContext>();
            var context = target.HttpContext;

            ControllerContext.SetupGet(p => p.HttpContext.Session["MerchantID"]).Returns("15");
            ControllerContext.SetupGet(p => p.HttpContext.Session["FriendlyIdentifier"]).Returns("3d649876-19f5-48d2-af03-ca89083ae712");

            target.ControllerContext = controllerContext.Object;       

            var action = (RedirectToRouteResult)target.Signupsuccess(account_code, plan);

            action.RouteValues["action"].Equals("SubscriptionPlan");
            action.RouteValues["controller"].Equals("Settings");

            Assert.AreEqual("SubscriptionPlan", action.RouteValues["action"]);
            Assert.AreEqual("Settings", action.RouteValues["controller"]);          
        } 
```

我希望它对你有帮助。谢谢

# java - Java：双缓冲图形和菜单栏不能一起工作

> ID：12374560
> 
> 赞同：2
> 
> 时间：2012-09-11T17:02:36.663
> 
> 标签：java, swing, graphics, jmenubar, double-buffering

我仍然需要学习很多关于编程（java）的知识，到目前为止我主要使用图形。我尝试制作一个菜单栏，它奏效了。但是我在同时使用 Graphics 和 JMenubar 时遇到了问题。首先我可以绘制图形，但是在查看了一些网站（包括这个）之后，我设法让图形工作。不幸的是，不是双缓冲。

这就是我一直双缓冲的方式，我不知道这是否是双缓冲的坏方法：

```
import java.awt.*;
import javax.swing.*;

public class DoubleBuffering extends JFrame
{
private Image dbImage;
private Graphics dbg;
int i = 1;

public DoubleBuffering()
{
    setTitle("Double Buffering");
    setVisible(true);
    setResizable(false);
    setSize(400, 300);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
}

public void paint(Graphics g)
{
    dbImage = createImage(getWidth(), getHeight());
    dbg = dbImage.getGraphics();
    paintComponent(dbg);
    g.drawImage(dbImage, 0, 0, this);
}

public void paintComponent(Graphics g)
{
    g.setColor(Color.black);
    g.drawString("Text", 75, 71);

    i++;
    g.drawRect(50 + i, 100, 50, 50);

    repaint();
}

public static void main(String[] args)
{
    DoubleBuffering DB = new DoubleBuffering();
}

} 
```

这是我的代码，只有菜单栏和图形。主类：

```
import javax.swing.*;

public class MenubarTest extends JFrame
{
JMenuBar menubar = new JMenuBar();
private drawing drawing;

public MenubarTest()
{
    setTitle("JTextField test");
    setVisible(true);
    setSize(400, 300);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    this.drawing = new drawing();
    this.add(drawing);

    setJMenuBar(menubar);
    menubar.setSize(getWidth(), 10);

    JMenu menuA = new JMenu("Menu A");
    menubar.add(menuA);
    JMenuItem ItemA1 = new JMenuItem("Item A1");
    menuA.add(ItemA1);

    JMenu menuB = new JMenu("Menu B");
    menubar.add(menuB);
    JMenuItem itemB1 = new JMenuItem("Item B1");
    menuB.add(itemB1);
}

public static void main(String[] args)
{
    MenubarTest mt = new MenubarTest();
}
} 
```

绘画类：

```
import java.awt.*;
import javax.swing.*;

public class drawing extends JPanel
{
int i;

public void paintComponent(Graphics g)
{
    g.setColor(Color.black);
    g.drawString("Text", 75, 71);

    i++;
    g.drawRect(50 + i, 100, 50, 50);
}
} 
```

我希望你能帮助我，我一直在寻找一段时间，我找到了一些双缓冲的方法，但它们没有奏效。其中一些是 BufferedImage 和 BufferStrategy。

感谢您的时间。

# powershell - 当图像的文件名包含括号时，为什么 PowerShell 脚本无法关闭 mspaint？

> ID：12374561
> 
> 赞同：1
> 
> 时间：2012-09-11T17:02:42.643
> 
> 标签：powershell, filenames

这是整个代码：

```
$kansio = ($args[0]).replace("'","")
$tiedostot = 0

Get-ChildItem $kansio | foreach {if ($_.Extension -eq ".jpg"){$_.FullName}} |
foreach {

    $id = (Start-process mspaint $_ -ea 0 -PassThru).Id
    $vikaTallennus = (Get-ChildItem $_).LastWriteTime

    [void] [System.Reflection.Assembly]::LoadWithPartialName("'Microsoft.VisualBasic")
    [void] [System.Reflection.Assembly]::LoadWithPartialName("'System.Windows.Forms")

    do
    {
        try
        {
            if ((Get-Process -Id $id -ea 'stop').WaitForInputIdle())
            {
                [Microsoft.VisualBasic.Interaction]::AppActivate($id)
                [System.Windows.Forms.SendKeys]::SendWait("^s")
                [System.Windows.Forms.SendKeys]::SendWait("{esc}")
                for ($i=1; $i -le 10; $i++)
                {
                    if ((Get-ChildItem $_).LastWriteTime -gt $vikaTallennus)
                    {
                        try
                        {
                            Stop-Process -Id $id -force -ea 'stop'
                            Write-Host "Done: $_" -foregroundcolor Green
                            break
                        }
                        catch
                        {
                            Write-Host "Failed to close the process" -foregroundcolor DarkRed
                            Start-Sleep -milliseconds 100
                        }
                    }
                }
            }
        }
        catch
        {
            Write-Host "Failed to catch the process" -foregroundcolor DarkRed
            Start-Sleep -milliseconds 100
        }
    } until ((Get-Process -Id $id -ea 0) -eq $null -or $id -eq $null)
    $tiedostot++
}
Write-Host "Files saved: $tiedostot" -foregroundcolor Green 
```

如果 JPG 图片的文件名包含“ `[`”或“ `]`”，PowerShell 无法关闭 MSPaint。为什么？有哪些解决方法？我可以在这里使用一些文字名称吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:30:41.307

是的，如果你想`Get-ChildItem`用括号（和一些其他奇怪的字符）返回文件/文件夹，你应该使用`-LiteralPath`参数。 [这是](http://technet.microsoft.com/en-us/library/ff730956.aspx)一篇不错的文章。

因此，如果您希望文件名中有此类字符，并且不需要通配符支持，则相关行应为：

```
if ((Get-ChildItem -LiteralPath $_).LastWriteTime -gt $vikaTallennus) 
```

# php - Instagram：如何获取单张图片的信息？

> ID：12374562
> 
> 赞同：-2
> 
> 时间：2012-09-11T17:02:44.137
> 
> 标签：php, instagram

我有一个页面显示某个#hashtag 的最新 50 张照片。

我希望用户单击图像并转到同一网站的页面，在那里我可以显示全尺寸图片、标题....

我进行了很多搜索，但找不到获取单张图片信息的方法。像这样的东西：[http ://snapwidget.com/view/?id=273145283494542941_10884350#.UE9ukhhwPw8](http://snapwidget.com/view/?id=273145283494542941_10884350#.UE9ukhhwPw8)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T17:05:22.853

你检查过[Instagram API](http://instagram.com/developer/)吗？

您可以使用：

`https://api.instagram.com/v1/media/MEDIA-ID?access_token=ACCESS-TOKEN`

获取我在`$_GET`变量中传递图像 id 的信息......像这样：

`http://yoursite.com/image.php?id=3`

```
<?php
//image.php

     $image = $_GET['id'];

     $info = 'https://api.instagram.com/v1/media/'.$image.'?access_token='.$token;

     $response = json_decode($info, true);

     //example for full size image
     $fullsize = $response['images']['standard_resolution']['url'];

     echo '<img src="'.$fullsize.'"/>';

?> 
```

**编辑：也看看[这个](https://github.com/cosenary/Instagram-PHP-API)，它是 Instagram 的 PHP 包装器，非常有用！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-16T19:05:40.643

我使用简码：

从图片网址，我得到简码：例如：[https](https://instagram.com/p/2rqCzTTdUX/) ://instagram.com/p/2rqCzTTdUX/ -> 2rqCzTTdUX

然后，使用以下端点：

[https://api.instagram.com/v1/media/shortcode/](https://api.instagram.com/v1/media/shortcode/) {shortcode}?access_token=ACCESS_TOKEN

我得到与 media/{media_id} api 相同的数据。然后，我在数据的顶层（在 json api 的响应中）查找参数 'id' -> '985065853803556759_429959980'

最后，例如，我可以使用 api 获取媒体：v1/media/{media_id}?access_token=ACCESS_TOKEN

# c# - 如何正确地将元组序列化为键字典

> ID：12374563
> 
> 赞同：4
> 
> 时间：2012-09-11T17:02:46.557
> 
> 标签：c#, json.net

我有以下应用程序，显示 Dictionary 的关键部分未发送到`JsonConverter`，但它被调用`ToString()`。这对我来说是个问题，因为我无法反序列化我的`Json`string 。

有任何想法吗？

```
class Program
{
    static void Main(string[] args)
    {
        var coll = new Dictionary<Tuple<string,string>, string>();
        coll.Add(Tuple.Create("key1", "KEY1"), "Value1");
        coll.Add(Tuple.Create("key2", "KEY2"), "Value2");
        string json = JsonConvert.SerializeObject(coll);
        Dictionary<Tuple<string, string>, string> coll2;
        Console.WriteLine(json);
        //coll2 = JsonConvert.DeserializeObject<Dictionary<Tuple<string, string>, string>>(json);
        // It throws an exception here 
        //foreach (var k in coll2)
        //{
        //    Console.WriteLine("<{0}|{1}>",k.Key, k.Value);
        //} 

        var t = Tuple.Create("key1", "key2");
        Console.WriteLine(t.ToString());
        string json2 = JsonConvert.SerializeObject(t);
        Console.WriteLine(json2);
    }
} 
```

输出 ：

> {"(key1, KEY1)":"Value1","(key2, KEY2)":"Value2"} (key1, key2)
> {"Item1":"key1","Item2":"key2"}
> 按任意键接着说 。. .

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T10:08:21.590

在反序列化以元组为键的字典时，我也遇到了同样的问题。JSON 将元组转换为纯字符串。但就我而言，我无法避免使用元组作为字典中的键。所以我做了一个自定义的 JSON 转换器来反序列化以元组为键的字典，它运行良好。

我已经根据您的代码进行了相同的修改。希望它能正常工作，并且可以让您了解 JSON CustomConverter。还可以通过评论更好地解释。

```
public class TupleKeyConverter : JsonConverter
{
    /// <summary>
    /// Override ReadJson to read the dictionary key and value
    /// </summary>
    /// <param name="reader"></param>
    /// <param name="objectType"></param>
    /// <param name="existingValue"></param>
    /// <param name="serializer"></param>
    /// <returns></returns>
    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        Tuple<string, string> _tuple = null;
        string _value = null;
        var _dict = new Dictionary<Tuple<string, string>, string>();

        //loop through the JSON string reader
        while (reader.Read())
        {
            // check whether it is a property
            if (reader.TokenType == JsonToken.PropertyName)
            {
                string readerValue = reader.Value.ToString();
                if (reader.Read())
                {
                    // check if the property is tuple (Dictionary key)
                    if (readerValue.Contains('(') && readerValue.Contains(')'))
                    {
                        string[] result = ConvertTuple(readerValue);

                        if (result == null)
                            continue;

                        // Custom Deserialize the Dictionary key (Tuple)
                        _tuple = Tuple.Create<string, string>(result[0].Trim(), result[1].Trim());

                        // Custom Deserialize the Dictionary value
                        _value = (string)serializer.Deserialize(reader, _value.GetType());

                        _dict.Add(_tuple, _value);
                    }
                    else
                    {
                        // Deserialize the remaining data from the reader
                        serializer.Deserialize(reader);
                        break;
                    }
                }
            }
        }
        return _dict;
    }

    /// <summary>
    /// To convert Tuple
    /// </summary>
    /// <param name="_string"></param>
    /// <returns></returns>
    public string[] ConvertTuple(string _string)
    {
        string tempStr = null;

        // remove the first character which is a brace '('
        if (_string.Contains('('))
            tempStr = _string.Remove(0, 1);

        // remove the last character which is a brace ')'
        if (_string.Contains(')'))
            tempStr = tempStr.Remove(tempStr.Length - 1, 1);

        // seperate the Item1 and Item2
        if (_string.Contains(','))
            return tempStr.Split(',');

        return null;
    }

    /// <summary>
    /// WriteJson needs to be implemented since it is an abstract function.
    /// </summary>
    /// <param name="writer"></param>
    /// <param name="value"></param>
    /// <param name="serializer"></param>
    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        serializer.Serialize(writer, value);
    }

    /// <summary>
    /// Check whether to convert or not
    /// </summary>
    /// <param name="objectType"></param>
    /// <returns></returns>
    public override bool CanConvert(Type objectType)
    {
        return true;
    }
} 
```

现在声明一个属性，如下所示。JsonConvertor 属性很重要。

```
[JsonConverter(typeof(TupleKeyConverter))]
public Dictionary<Tuple<int,string>,string> MyDict {get; set;} 
```

或者您可以尝试在您的代码中替换它。虽然我从未测试过。

```
coll2 = JsonConvert.DeserializeObject<Dictionary<Tuple<string, string>, string>>("", new TupleKeyConverter()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:18:05.623

根据您提供的信息，我建议不要使用元组作为键，而是使用自定义结构或对象并覆盖 ToString 方法。然后您可以根据需要进行序列化/反序列化。

# soap - 我想知道 SOAP 处理的每个步骤需要多少时间，即解析时间、调用时间等？

> ID：12374564
> 
> 赞同：1
> 
> 时间：2012-09-11T17:02:55.017
> 
> 标签：soap, service, web

我知道如何找出 SOAP 消息的完整处理时间，但我想找出执行 SOAP 处理的各个步骤所花费的时间，以便提高效率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:09:53.023

您始终可以创建 DateTime 并在执行时获取时间，它不会是完美的，但您可以减去时间并从每次执行中获取最终的毫秒或秒值。

# javascript - javasctipt循环中的音频和动画同步

> ID：12374566
> 
> 赞同：0
> 
> 时间：2012-09-11T17:03:11.583
> 
> 标签：javascript, jquery, html

我正在使用我有限的 javascript 技能来尝试一个可以循环播放小动画和声音剪辑的脚本。这是我到目前为止所得到的：

```
<script>
function PulseArea() {
    $('.area-pulse').stop();
    $('.area-pulse').css({ width: 38, height: 38, top: 217, left: 77, opacity: 1 });
    $('.area-pulse').animate({ width: 700, height: 700, top: -114, left: -254, opacity:0 }, 4000, null, function () {  setTimeout("PulseArea()", 400); });

}
$(function() {

    var sample = new Audio("audio/water-droplet-1.wav");

    function playSample() {

    sample.pause();
    sample.currentTime = 0;
    sample.play();
}
})
$(document).ready(function() {
for (i=0;i<=5;i++)
{
PulseArea();
playSample();
}    
})
</script> 
```

相关CSS：

```
.area-pulse
        {
            display:block;
            width:38px;
            height:38px;
            position:absolute;
            top:217px;
            left:77px;
            background-color:transparent;
            zoom: 1;

        }
            .area-pulse img
            {
                opacity:1;
                width:100%;
                height:100%;
                display:inline-block;   
                filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='../img/area_pulse.png', sizingMethod='scale');
                background-color:transparent;
            } 
```

相关HTML：

```
<div style=" width:954px; height:600px; position:absolute;" class="area-pulse"><img src="img/area_pulse.png" /></div> 
```

问题是声音。动画播放良好。有什么建议么？我搜索了 StackOverflow，但找不到这样的东西。

感谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:15:33.370

您的函数`playSample`是在匿名函数范围内定义的，因此不能从`document.ready`范围内调用它。如果将所有内容移到同一范围内，它将正常工作：

```
$(document.ready(function () {
    function PulseArea() {
        $('.area-pulse').stop();
        $('.area-pulse').css({ width: 38, height: 38, top: 217, left: 77, opacity: 1 });
        $('.area-pulse').animate({ width: 700, height: 700, top: -114, left: -254, opacity:0 }, 4000, null, function () {  setTimeout("PulseArea()", 400); });
    }

    var sample = new Audio("audio/water-droplet-1.wav");

    function playSample() {
        sample.pause();
        sample.currentTime = 0;
        sample.play();
    }

    for (i=0;i<=5;i++) {
        PulseArea();
        playSample();
    }    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:24:24.647

我不知道我的问题中的脚本有什么问题，但我通过重写它解决了它。我希望其他人可以因此得到帮助。:)

```
<script>

function PulseArea() {
var audioElement = document.createElement('audio');   
    audioElement.setAttribute('src', 'audio/waterdrop.mp3');
    audioElement.play();
$('.area-pulse').stop();
$('.area-pulse').css({ width: 16, height: 16, top: 227, left: 89, opacity: 1 });
$('.area-pulse').animate({ width: 700, height: 700, top: -114, left: -254, opacity:0 }, 4000, null, function () {  setTimeout("PulseArea()", 400); });

}
$(document).ready(function() {

for (i=0;i<=5;i++)
{
PulseArea();
} 

})

</script> 
```

# c# - C# 文本流访问被拒绝

> ID：12374568
> 
> 赞同：-1
> 
> 时间：2012-09-11T17:03:20.950
> 
> 标签：c#, file-io, authorization, hosts

我猜你很了解这个文件，它是一个用于将一些 IP 绑定到主机名的文件。

> C:\Windows\System32\Drivers\etc\hosts

记事本可以对此文件进行更改，但`C#` `Text-stream`无法对其执行任何操作并显示`access denied`.

任何想法为什么会发生这种情况？

PS：我的用户有足够的权限编辑该文件，因为我可以用记事本编辑它，但我的程序不能。

**编辑：** 还有一件事，它不适用于在 ActiveDirectory 中创建的用户。不是来自这台计算机的用户。他们是管理员，但他们不是所有者。

会不会是所有权问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:05:30.020

UAC？？？您需要以提升的权限运行您的应用程序...还尝试保存您在记事本中编辑的文件？这真的有效吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:13:33.493

尝试将清单添加到您的程序并请求必要的权利。

# html - box-shadow (CSS3) 真的还没准备好使用吗？（根据“我可以使用”）

> ID：12374570
> 
> 赞同：0
> 
> 时间：2012-06-24T15:16:41.893
> 
> 标签：html, css

我有一个问题希望您帮助我，我目前正在制作一个网站，我正在使用 HTML5 和 CSS3 技术构建该网站，我想使用的每个功能我都先在“[我可以使用](http://caniuse.com/#feat=css-boxshadow)”中检查它，我最常用的技术是 box-shadow，我已经用它做了一些很棒的事情，但是我对不支持该技术的浏览器的百分比持怀疑态度，不支持 box-shadow 的浏览器的百分比大约是17.12%，如果您看到结论（显示选项 => 其他选项 => 显示结论），他们会说该功能尚未准备好，因为他们正在“等待 Opera Mini 5.0-6.0 到期”，我个人认为为了让人们更新浏览器，我们能做的最好的事情就是不支持旧版浏览器，但是......

我这样想是对的吗？

如果我不支持旧版浏览器，我会遇到不好的后果吗？

是否值得为了支持旧浏览器而工作两次？

我还应该使用 box-shadow 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T16:40:07.300

一如既往....

# [渐进增强](http://www.alistapart.com/articles/understandingprogressiveenhancement/)。

构建您的网站，使其适用于**所有人，无论他们的浏览器设置和功能如何**。然后添加增强体验但不会导致网站因无法利用该功能的人而中断的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T15:41:51.330

一些 CSS3 元素（阴影、圆角、...）在旧版浏览器中不起作用。这是事实，但您仍然可以使用它们，因为上述浏览器只是忽略此属性。

最好的办法是网站的设计不依赖阴影和其他效果，而只是增强它。

还要考虑不使用这些元素的浏览器的市场份额。Opera 在桌面市场上的份额很小，在移动设备上的份额更大，但无论如何都不是主要参与者。Pre 8 Internet Explorer 会给你最头疼的...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T20:10:19.710

我完全同意约翰康德的观点，

您想建立一个网站来给仍在使用旧浏览器的人上一课吗？或者您正在寻找更多的访客？

从每个人都可以使用的简单设计开始，然后为现代浏览器改进它，同时牢记旧浏览器。

# java - 高级 SortExpression 搜索应用引擎 (Java)

> ID：12374575
> 
> 赞同：0
> 
> 时间：2012-09-11T17:03:38.883
> 
> 标签：java, google-app-engine, search

我有一个关于 SortExpression 的问题：我想按升序对文档列表进行排序。我想避免 0 或负值，我会将它们放在列表的末尾。有没有办法用排序表达式来做到这一点？

示例列表：1 0 4 5 2 排序列表：1 2 4 5 0

任何想法？

我在想这样的事情： sortexpression="MAX_DOUBLE+field_name"

# asp.net - Ajax Cascading Drop Down 在 Visual Studio 虚拟主机下工作，但在 IIS 7.0 上得到方法错误 500

> ID：12374577
> 
> 赞同：0
> 
> 时间：2012-09-11T17:03:50.170
> 
> 标签：asp.net, ajax, asp.net-ajax

我已经下载了示例 AJAX 工具包网站。

在 Visual Studio 2012 中打开时一切正常。

当我发布到 IIS 7.0 级联下拉示例给出方法错误 500。

我可以浏览到 CarsService.asmx 并调用 GetDropDownContents 方法并获取返回的 xml 数据，以便服务正常工作。

建议？

我不在乎我是否使用 AJAX 工具包。我只想创建一些从 API 填充数据的网络表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:23:24.353

[使用这个问题的答案来解决](https://stackoverflow.com/questions/3822733/ajaxtoolkit-iis7-asp-net-4-0-sys-is-not-defined-handler-mapping-issue) 我在 web.config 文件中添加了以下代码的问题

```
 <system.webServer>
<validation validateIntegratedModeConfiguration="false" />
<handlers>
 <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
</handlers> </system.webServer> 
```

# xcode - 在 XCode 中打开一个空编辑器

> ID：12374579
> 
> 赞同：3
> 
> 时间：2012-09-11T17:03:59.753
> 
> 标签：xcode

有时我的剪贴板中会有一团文本，我想将其粘贴到文本文件中。大多数情况下，我打开另一个文本编辑器（如 TextWrangler）并将其粘贴到那里，但在它和 xcode 之间切换似乎有点笨拙。有没有办法在 Xcode 中打开一个空的文本编辑器而不创建新文件？我不想保存任何东西，我只想看看我复制的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:05:36.660

不幸的是，这是不可能的。（从 Xcode 4.4 开始）。

# javascript - 是否有任何 JavaScript UI 组件来显示字符串之间的差异

> ID：12374580
> 
> 赞同：3
> 
> 时间：2012-09-11T17:03:59.687
> 
> 标签：javascript, javascript-framework

是否有任何 JavaScript 框架 UI 组件可以显示两个字符串之间的差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:07:57.987

你可以试试这个：[http ://cemerick.github.com/jsdifflib/demo.html](http://cemerick.github.com/jsdifflib/demo.html)

John Resig 也有一篇不错的帖子，代码如下：[http ://ejohn.org/projects/javascript-diff-algorithm/](http://ejohn.org/projects/javascript-diff-algorithm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:53:52.247

尝试查看[Pretty Diff](http://prettydiff.com/)。它在某种程度上基于 Chas Emerick 的 diff 工具。Chas Emerick 工具大约 5 年没有更新了，Pretty Diff 中的 diff 引擎完全重写以提高性能，除了每行之外还提供每个字符的差异，并且它更稳定，没有一堆废话来绑定它到 Python。Pretty Diff 还具有语言意识，因此空白区域的根本差异是无关紧要的，并提供了额外的选项来消除最终差异报告中其他潜在的误报问题。

# android - 如何通过代码拨打 GSM 电话

> ID：12374588
> 
> 赞同：0
> 
> 时间：2012-09-11T17:04:17.377
> 
> 标签：android

我有一个要求，我想发起和管理 GSM 通话（就像我们通过电话拨打的电话一样）

我将通过此方法连接到 GSM 模块/DTMF 模块（上下文：机器人），并将通过 DTMF 音调发送指令。

我不想通过数据打开电话拨号器`Intent`，`tel:`宁愿自己管理电话。

一开始以为系统可能不允许没有签名匹配系统签名的第三方应用程序做电话的事情，但后来我想知道市场上的一些应用程序是如何做到的。（找到合适的我会附上链接）

**编辑：**我看到的应用程序是启动器和呼叫管理器应用程序，一旦安装，就取代了我的默认电话应用程序（因此是拨打电话而不是默认电话应用程序）

**编辑：**我发现这个问题在问类似的问题，并且也有一个答案：[Android Dialer application](https://stackoverflow.com/q/5029183/243709)。如果我成功了，我会试试这个并回帖。

任何指针将不胜感激。

# datetime - SAS 日期时间格式 YYYY-mm-dd HH:ii

> ID：12374589
> 
> 赞同：4
> 
> 时间：2012-09-11T17:04:39.163
> 
> 标签：datetime, format, sas

我正在尝试以 yyyy-mm-dd hh:mm 格式显示日期时间（例如 2012-12-31 23:59）

在 PHP 中，我通常会使用格式 YYYY-mm-dd HH:ii 来获得我想要的。我一直在浏览 SAS 知识库，我能得到的最接近的是 E8601DTw.d，它提供了 2008-09-15T15:53:00 ，其中包括秒以及我想要空间的“T”。

有没有一种格式可以做我想做的事？如果没有，有没有办法创建我自己的？我自己不太了解 SAS，我只是想修改现有系统。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T16:09:07.093

如果提供的标准日期时间格式不符合您的要求，您可以创建新格式：

```
PROC FORMAT;
  picture MyMSdt other='%0Y-%0m-%0d %0H:%0M' (datatype=datetime);
RUN;

DATA TEST;
  mydatetime='25nov2009 14:44:56'dt;
  format newdt MyMSdt.;
  newdt=mydatetime;
  put mydatetime= newdt=;
RUN; 
```

取自[这个示例](http://www.sascommunity.org/wiki/Tips%3aCreating_your_own_datetime_format)，您可以轻松自定义。

# excel - 使用 VBA 完全控制另一个程序

> ID：12374592
> 
> 赞同：4
> 
> 时间：2012-09-11T17:04:50.377
> 
> 标签：excel, serial-port, vba

我目前正在努力简化工作流程。它涉及使用串行连接传输数据的 Chatillon DFIS 测力计。数据以文本形式发送到 Chattillon 程序，并且只能保存为 .dat 文件。我正在尝试设置一个 Excel 工作簿，它可以自动打开程序并使用不同的命令将信息直接放入 Excel。命令将涉及更改单位、将传感器归零和传输。

我环顾四周，发现 Shell 功能使您可以访问打开文件，应该可以帮助您控制它，但我还没有找到通过 Excel 调用和操作程序的方法。

[Chatillon Program](https://imgur.com/qbdPe)，基本上是用鼠标点击的按钮

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T12:20:46.837

如果Excel 和 VBA*具有 COM 接口，则它们*可以控制外部应用程序- 也就是说，如果您可以将应用程序声明为对象，创建对象的实例，并查看其方法和属性。

如果您有可能为您的程序获取一个 COM 包装器，那就这样做吧。

如果你不能......你不会喜欢使用 I/O 流和 Windows Shell 对象来做这件事，因为命令行 DOS 界面作为用户界面不是特别友好，而且它们比霹雳舞更容易当您尝试将糕点工厂用作 VBA 中的 API 时。

首先，您需要 Windows 脚本宿主对象模型公开的“WshShell”对象。您可以通过后期绑定来声明和实例化它，如下所示：

```
 Dim objWshell As Object
Set objWshell = CreateObject("WScript.Shell") 
```

但正确的方法（这将为您提供属性和方法的 Intellisense 下拉菜单）是使用“工具：参考...”对话框创建对父库的引用，该引用通常位于 C:\Windows \System32\wshom.ocx

然后，您可以将 Shell 对象声明为：

```
 Dim objWshell As IWshRuntimeLibrary.WshShell
Set objWshell = New IWshRuntimeLibrary.WshShell 
```

## 运行命令行可执行文件并读取 VBA 中的 I/O 流

：

这是一个打开命令窗口并运行命令行可执行文件的示例，向其提供命令行开关“-s”和封装在双引号中的参数。

请注意，我正在运行的可执行文件不是“regsvr32.exe”——我的 shell 对象正在执行 cmd.exe，它是 I/O 流的源和接收器。

当然，您可以直接运行您的应用程序。它可能会起作用。但是，当您调用 .StdOut.ReadLine 或 .StdOut.ReadAll 时，输出流锁定或“挂起”您的调用函数及其 VBA 线程是很常见的 - 您已收到警告。

```
 With objWshell.Exec("CMD /K")


       .StdIn.WriteBlankLines 3

    .StdIn.WriteLine "C:"

    .StdIn.WriteLine "CD C:\"


    .StdIn.WriteLine "regsvr32.exe -s " & Chr(34) & "%LIBDIR%\FXPricer.dll" & Chr(34)

    .StdIn.WriteBlankLines 1


    Do Until .StdOut.AtEndOfStream

        Debug.Print .StdOut.ReadLine

    Loop


     Do Until .StdErr.AtEndOfStream

        Debug.Print .StdOut.ReadLine

    Loop


    .Terminate


End With 
```

分享和享受。而且，与往常一样，请注意浏览器（或 StackOverflow 的文本框界面）在源代码示例中插入的换行符。

# service - Raphael.js 自由变换图像并保存

> ID：12374596
> 
> 赞同：0
> 
> 时间：2012-09-11T17:05:11.670
> 
> 标签：service, web, save, raphael, transform

我有一个项目需要像这样（[http://alias.io/raphael/free_transform/](http://alias.io/raphael/free_transform/)）自由转换一个对象，除了图像（png）。处理完图像后，我需要使用 AJAX Post 将图像发送到 Web 服务。谁能帮忙举个例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:56:07.317

Raphael 并不是为图像处理而设计的，真的。我建议您存储用户选择的参数（旋转、缩放等），然后将它们应用到纯 JavaScript 中的原始图像。如果您坚持仿射变换，则存储图像四个角的位置并应用例如双线性插值就足够了。甚至更好：将参数和图像发送回服务器并在那里执行。

# java - 处理多行字符串返回

> ID：12374609
> 
> 赞同：1
> 
> 时间：2012-09-11T17:06:15.130
> 
> 标签：java

我有一个程序基本上返回一个字符串，该字符串有时可能是一行（工作正常），但有时它可能是多行，这会导致我出现问题。基本上我让用户选择一个发送到第二个程序的选项，并根据该选项返回一个特定的字符串。但是，如果我将用户选择放在我的循环之外，如果返回的字符串是多行，它工作正常，但我需要它不断提示用户选项菜单，直到他们选择退出。这是代码：

```
System.out.print("Enter your choice: ");
fromClient = stdIn.readLine().trim();

while ((fromServer = input.readLine()) != null)
    {
        System.out.println("Server: " + fromServer);            
        if (fromServer.equals("Bye"))
        break;          

        if(fromClient.equals("1"))
        {
            System.out.println("Client: " + fromClient);
            output.println(fromClient);

        }
        if(fromClient.equals("2"))
        {
            System.out.println("Client: " + fromClient);
            output.println(fromClient);

        }
        if(fromClient.equals("3"))
        {
            System.out.println("Client: " + fromClient);
            output.println(fromClient);

        }
        if(fromClient.equals("4"))
        {
            System.out.println("Client: " + fromClient);
            output.println(fromClient);
            break;

        }

    } 
```

正如我上面提到的，这很好地返回了多行字符串，但它不再提示用户选择选项。如果我在循环内移动用户选择并返回多行字符串，它将打印一行，询问用户他们的选择，打印第二行，询问用户他们的选择，打印第三行，询问用户他们的选择......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:25:43.560

该代码相当难以遵循。更多上下文会有所帮助。什么是“输入”？（即 fromServer = input.readLine()）

无论如何，无论您的服务器发送多少行，在提示用户输入之前您一次只能读取 1 行。在发送客户端命令之前尝试处理*所有*服务器的响应。例如：

```
boolean shouldExit = false;

while ((fromServer = input.readLine()) != null){
    System.out.println("Server: " + fromServer);                     
    if (fromServer.equals("Bye")){
        shoudExit = true;
        break;
    }
}

if (shouldExit) System.exit(0)  // Or whatever you want to do

//Now handle sending your client's command to the server.
//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:03:06.097

如果要多次通信客户端和服务器，则必须进行两个循环。

1.  第一个循环将要求用户选择，启动第二个循环并根据服务器响应和用户选择做任何你想做的事情
2.  第二个循环将从服务器读取所有行

它可能看起来像这样：

```
System.out.print("Enter your choice: ");
while( true ) {
    fromClient = stdIn.readLine().trim();

    StringBuilder responseSb = new StringBuilder();
    while( ( fromServer = input.readLine() ) != null ) {
        responseSb.append( fromServer );
        responseSb.append( "\n" );
    }

    String response = responseSb.toString().trim();

    System.out.println( "Server: " + response );
    if( response.equals("Bye") ) {
        break;
    }

    if(fromClient.equals("1"))
    {
        System.out.println("Client: " + fromClient);
        output.println(fromClient);

    }
    if(fromClient.equals("2"))
    {
        System.out.println("Client: " + fromClient);
        output.println(fromClient);

    }
    if(fromClient.equals("3"))
    {
        System.out.println("Client: " + fromClient);
        output.println(fromClient);

    }
    if(fromClient.equals("4"))
    {
        System.out.println("Client: " + fromClient);
        output.println(fromClient);
        break;

    }

} 
```

# mysql - 将北、东、南和西坐标转换或使用东北和西南坐标来检查入站

> ID：12374613
> 
> 赞同：1
> 
> 时间：2012-09-11T17:06:29.847
> 
> 标签：mysql, coordinates, bounds

我有两张表，一张表包含国家的北、东、南和西坐标，每个国家都有一个矩形，这是结构，

```
+--------------+----------------------+------+-----+---------+----------------+
| Field        | Type                 | Null | Key | Default | Extra          |
+--------------+----------------------+------+-----+---------+----------------+
| boundary_id  | smallint(5) unsigned | NO   | PRI | NULL    | auto_increment |
| country      | varchar(100)         | NO   |     | NULL    |                |
| country_code | varchar(4)           | NO   |     | NULL    |                |
| geo_west     | float(10,6)          | NO   |     | NULL    |                |
| geo_north    | float(10,6)          | NO   |     | NULL    |                |
| geo_south    | float(10,6)          | NO   |     | NULL    |                |
| geo_east     | float(10,6)          | NO   |     | NULL    |                |
+--------------+----------------------+------+-----+---------+----------------+ 
```

现在，对于另一个表存储用户的位置，我需要他们的位置（纬度和经度）与表匹配，以检查他们是否属于所选的所需国家。换句话说，只选择落在所选国家范围内的用户。

这是表格中的数据（选择4），

```
+-------------+----------------+--------------+-------------+------------+------------+-------------+ 
```

| 边界标识 | 国家 | 国家代码 | geo_west | geo_north | geo_south | geo_east | +-------------+----------------+--------------+--- ----------+------------+------------+------------- + | 218 | 阿富汗 | 自动对焦 | 60.478436 | 38.483425 | 29.377470 | 74.879463 | | 224 | 阿尔巴尼亚 | 铝 | 19.293968 | 42.665615 | 39.648354 | 21.068476 | | 188 | 阿尔及利亚 | DZ | -8.673869 | 37.093727 | 18.960026 | 11.979549 | | 229 | 美属萨摩亚 | 作为 | -170.841339 | -14.162115 | -14.382480 | -169.416061 | +-------------+----------------+--------------+--- ----------+------------+------------+------------- +

用户表，

```
+---------+-----------+-----------+
| user_id | latitude  | longitude |
+---------+-----------+-----------+
|       6 | 51.495010 | -0.071583 |
|       7 | 51.204731 |  1.251486 |
|       8 | 51.261860 |  1.327887 |
|       9 | 51.487850 | -0.071926 |
|      10 | 51.498699 | -0.201187 |
|      11 | 51.436462 | -0.100937 |
|      12 | 51.331093 |  0.829124 |
|      13 | 51.565121 | -0.065918 |
|      14 | 51.493568 | -0.248566 |
+---------+-----------+-----------+ 
```

我是否需要将坐标转换为东北和西南以及如何有效地匹配这些？

由于其局限性，我更愿意避免使用地理定位服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:13:16.607

您可能应该为此使用某种地理定位服务（即谷歌地图）。仅仅知道一个国家的最北端、最南端等坐标并不意味着这个国家的形状。

例如，美国最北端的坐标（阿拉斯加）、最南端和最西端的坐标（夏威夷）和最东端（缅因州）将绘制一个巨大的矩形，其中还可能包括加拿大、墨西哥、加勒比海等大片地区。

如果将国家/地区视为矩形，您将如何处理所有重叠？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:23:49.063

只是一个想法...获取包含世界地图的 360x360 位图。在 RGB 中用不同的颜色绘制每个国家，例如，#010000 用于 id 1 国家，#020000 用于 id 2 国家等（是的，除了水，整个世界都会以红色阴影结束）。然后当你想检查一个用户时，取 xy 像素（记住，它会从 -180 到 +180，所以它实际上是 x+180，y+180），找到那个像素的颜色，然后国家 ？

准备那个位图可能需要做很多工作，但是一旦完成，休息应该很容易。

正如我所说，只是一个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T17:20:54.533

@Mike Brant 刚刚描述了我要提出的要点。

MySQL 支持空间数据类型，所以我建议您采用以下方法：

1.  在线查找国家边界多边形的来源（谷歌搜索可能会让您大部分时间到达那里）
2.  将这些多边形加载到 MySQL 中并将它们存储为空间特征（几何对象，而不仅仅是基本坐标字符串）
3.  将您的用户位置存储为空间特征
4.  使用 MySQL 的[空间关系函数](http://dev.mysql.com/doc/refman/5.0/en/functions-for-testing-spatial-relations-between-geometric-objects.html)来判断一个用户（点）是否在一个国家（多边形）内

如果这是您想要采取的路径，您应该考虑转到[http://gis.stackexchange.com](http://gis.stackexchange.com)

# sql - sql触发器：在插入之前从另一个表中选择FK

> ID：12374616
> 
> 赞同：0
> 
> 时间：2012-09-11T17:06:44.260
> 
> 标签：sql, sql-server-2008, tsql

我有两个数据库表。

1.  `tblTeams`: `PK TeamID`,`TeamName`
2.  `tblMatches`: `PK match id`, `FK HomeTeam`, `FK AwayTeam,Score`.

我正在使用 SQL Server 2008，并且正在通过向导从`.csv`文件中导入行。中的列`csv`是`hometeam`, `awayteam`, `score`。因此，在插入之前`tblMatches`，我想要一个触发器，它可以找到团队的 FK 并插入`tblMatches`外键而不是名称。

请提供任何帮助。

```
CREATE TRIGGER tblmatches_BeforeInsert
ON tblmatches
BEFORE INSERT
AS 
BEGIN
    INSERT  tblmatches
    SELECT  teamName
    FROM    tblmatches
    WHERE   tblTeams.id = ?i dont know here what to insert? 
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:48:44.980

AFAIK，要在 tblMatches 上调用触发器，您需要为该表中的所有列提供值，并且只为该表中的列提供值，这意味着，您不能将团队名称传递给触发器，以便它可以用于解析团队ID。

如果我要这样做，我只需创建一个表以按原样插入原始数据，让导入向导将记录写入该表，在该表上定义一个触发器以将记录插入两个派生表，即。tblTeams，tblMatches。（[SQL Server 触发器](http://msdn.microsoft.com/en-us/library/ms189799.aspx)）

我尝试写一个（没有机会验证，因为我没有 SQL 服务器）

```
CREATE TRIGGER teams.process ON teams
AFTER INSERT
AS
BEGIN
    DECLARE @homeTeamId INT
    DECLARE @awayTeamId INT
    DECLARE @maxTeamId INT
    DECLARE @matchId INT

    SELECT @maxTeamId = 0
    SELECT @maxTeamId = ISNULL(MAX(teamId), 0) from tblTeams

    --- Check if home team has already been inserted into the table.
    SELECT @homeTeamId = -1
    SELECT 
        @homeTeamId = teamId 
    FROM 
        tblTeams t
        JOIN inserted i
        ON t.teamName = i.hometeam
    IF (@homeTeamId = -1) 
    BEGIN
        SELECT @homeTeamId = @maxTeamId + 1
        SELECT @maxTeamId = @maxTeamId + 1
        INSERT INTO tblTeams SELECT @homeTeamId, i.hometeam FROM inserted i
    END

    --- Check if away team has already been inserted into the table.
    SELECT @awayTeamId = -1
    SELECT 
        @awayTeamId = teamId 
    FROM 
        tblTeams t
        JOIN inserted i
        ON t.teamName = i.awayteam
    IF (@awayTeamId = -1) 
    BEGIN
        SELECT @awayTeamId = @maxTeamId + 1
        SELECT @maxTeamId = @maxTeamId + 1
        INSERT INTO tblTeams SELECT @awayTeamId, i.awayteam FROM inserted i
    END

    -- insert a record into the matches table with the home team ID and away team ID.
    SELECT @matchId = 0
    SELECT @matchId = ISNULL(MAX(MatchId), 0) FROM tblMatches
    INSERT INTO tblMatches 
    SELECT @matchId + 1, @homeTeamId, @awayTeamId, i.score 
    FROM inserted i
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:29:59.667

如果您想在表中使用不同的表示形式，那么您可能必须实现一个视图，并通过它而不是基表执行插入。

就像是：

```
CREATE TABLE realMatches (
    MatchID int IDENTITY(1,1) not null, /* Identity? */
    HomeTeamID int not null,
    AwayTeamID int not null,
    Score int not null, /* int? */
    constraint PK_realMatches PRIMARY KEY (MatchID),
    constraint FK_Matches_HomeTeams (HomeTeamID) references tblTeams (TeamID),
    constraint FK_Matches_AwayTeams (AwayTeamID) references tblTeams (TeamID)
)
GO
CREATE VIEW tblMatches
AS
    SELECT
        MatchID,
        ht.TeamName as HomeTeam,
        at.TeamName as AwayTeam,
        Score
    FROM
        realMatches m
           inner join
        tblTeams ht
           on
               m.HomeTeamID = ht.TeamID
           inner join
        tblTeams at
           on
               m.AwayTeamID = at.TeamID
GO
CREATE TRIGGER T_Matches ON tblMatches
INSTEAD OF INSERT
AS
     SET NOCOUNT ON

     INSERT INTO realMatches (HomeTeamID,AwayTeamID,Score)
     SELECT ht.TeamID,at.TeamID,i.Score
     FROM
        inserted i
           inner join
        tblTeam ht
           on
              i.HomeTeam = ht.TeamName
           inner join
        tblTeam at
           on
              i.AwayTeam = at.TeamName 
```

您现在可以（假设“A Team”和“Team America”存在于 中`tblTeams`）：

```
INSERT INTO tblMatches (HomeTeam,AwayTeam,Score)
VALUES ('A Team','Team America',19) 
```

当然，这（还）不涉及任何试图更改匹配表中的球队的*更新*，也没有处理如果球队还不存在的情况下该怎么办`tblTeam`，但你还没有问过这些。

# windows - 具有数据导出功能的鼠标光标跟踪软件

> ID：12374618
> 
> 赞同：0
> 
> 时间：2012-09-11T17:06:46.653
> 
> 标签：windows, mouse, metrics

我正在寻找一些关于光标移动的数据，这些数据将与另一个系统收集的其他传感器数据相关联。我希望了解普通用户使用时计算机鼠标的物理运动与光标运动的关系。

我有软件来记录物理鼠标，它以相当短的时间间隔（大约 100hz）将传感器数据记录在 CSV 文件中。 **我需要的是一个软件，它可以记录关于计算机屏幕上光标位置与时间间隔的类似数据（最好比 30Hz 采样快））。**

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:22:07.293

您可以使用 Python 脚本执行此操作。只要您还安装[PyWin32](http://sourceforge.net/projects/pywin32/files/)。使用[GetCursorInfo 函数](http://docs.activestate.com/activepython/2.5/pywin32/win32gui__GetCursorInfo_meth.html)

```
flags, hcursor, (x,y) = win32gui.GetCursorInfo() 
```

或者，[此链接](http://rosettacode.org/wiki/Mouse_position)将为您提供从各种语言访问鼠标数据的代码。使用对您来说更快的 30Hz。

# nuget - 自托管 NuGet

> ID：12374620
> 
> 赞同：15
> 
> 时间：2012-09-11T17:06:59.627
> 
> 标签：nuget, nuget-server

我一直在研究自托管 NuGet，很难理解如何设置它以及它如何帮助支持我们的开发过程。

有人对使用哪个，如何设置有任何建议吗？

还是我应该只使用托管服务？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-11T18:42:01.047

在查看了各种解决方案（自托管和托管服务）之后，我们选择了[ProGet](http://inedo.com/proget/overview)。

**ProGet 总结**

ProGet 为企业版提供标准的“免费”许可和象征性许可费用（单年和永久）。我们目前使用标准的“免费”版本，没有真正的抱怨。您可以根据需要创建任意数量的提要、添加任意数量的用户等。（我们创建了“测试”、“暂存”和“生产”提要作为我们质量保证流程的一部分。）唯一真正的限制在免费版本中，无法过滤您希望包含在 ProGet 提要中的特定软件包的外部提要。此过滤功能通过“连接器”进行管理。使用企业版——当你创建一个提要时——你可以选择添加一个“连接器”来从其他提要（外部或内部）拉入包。

**ProGet 与 Nuget 包管理和创建**

创建 nuget 包本身的步骤我将留给 David Ebbo 的热门博客文章[http://blog.davidebbo.com/2011/04/easy-way-to-publish-nuget-packages-with.html](http://blog.davidebbo.com/2011/04/easy-way-to-publish-nuget-packages-with.html)。但是，要知道要上传包，您可以通过 ProGet 包管理 Web UI、[命令行 nuget.exe](http://nuget.codeplex.com/releases/view/58939)或[Nuget Package Explorer 上传](http://npe.codeplex.com/)。

**ProGet 安装、配置和激活**

安装、配置和激活 ProGet 是最不直观的部分。它可以安装在常规 SQL Server 数据库或 SQL Server Express 数据库的支持下。此外，它还可以是自托管应用程序或在 IIS 下运行。如果您需要执行离线激活或想要请求不同的许可证密钥，请访问[my.inedo.com](https://my.inedo.com)并创建一个帐户，您可以从那里完成所有操作。

**Proget 质量控制和 CI**

带有 TeamCity 的 CI 是我们将需要的东西，因此我们正在考虑使用 TeamCity 的 Nuget 服务器创建一个 nuget 包构建过程。有一个如何创建我将在评论中发布的包的方法。下一步是自动将 TeamCity 创建的 nuget 包发布到适当的 ProGet 源（即“测试”、“暂存”、“生产”），可能使用带有 API 密钥的命令行 Nuget。

**更多的信息**

我们将 MyGet 视为一项托管服务，但它似乎在添加其他贡献者/用户等简单场景时出现问题。当需要两个以上的贡献者帐户时，它的价格也大幅上涨。而使用 ProGet，您只需使用免费版本即可获得无限的用户帐户。

再附注：对于发布 OSS 类型的项目/包，我会看一下[Chocolatey](http://chocolatey.org/)作为解决方案。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-11T21:33:13.693

自托管的另一个选择是使用 NuGet.Server 包并创建一个 IIS 网站以在您的内部网络上托管它，但如果您计划发布多个包，它的扩展性不会很好。

我创建了一个 NuGet.Server 的分支，它使用 Lucene.Net 索引来解决这些性能问题。可从[https://github.com/themotleyfool/Klondike/releases](https://github.com/themotleyfool/Klondike/releases)下载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-06T08:08:29.783

为了使这个线程保持最新，Visual Studio Team Services 还提供了一个包管理器的预览版。查看市场：[包管理](https://marketplace.visualstudio.com/items/ms.feed)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-15T09:41:40.517

您可以创建一个空的 Asp.Net Web 应用程序并`Nuget.Server`从 Nuget Gallery 安装。这是在 IIS 上自行托管您自己的 Nuget 包的免费选项。检查[文档](http://nugetserver.net/)

# java - AccessControlException 与同一代码库中的小程序类

> ID：12374621
> 
> 赞同：0
> 
> 时间：2012-09-11T17:07:04.220
> 
> 标签：java, security, applet, accesscontrolexception, policyfiles

我有三个类，一个叫做 Capture、AppletLogging 和 AbstractJLabel。我在 %USERPROFILE%/.java.policy 文件中设置了以下权限：

```
grant codeBase "file:/C:/project/abc/target/test-classes/-" {
  permission java.util.logging.LoggingPermission "control";
}; 
```

所有类都在上述授权的代码库中。当 Capture 在 AppletLogging 中调用静态方法时，一切正常。当 AbstractJLabel 在 AppletLogging 中调用相同的静态方法时，我得到

```
java.security.AccessControlException: access denied (java.util.logging.LoggingPermission control) 
```

这在 Sun java plugin version 6 update 35 中运行。有人解释一下吗？即使我对授权 codeBase 块执行以下所有操作，我也会收到相同的错误：

```
 permission java.security.AllPermission; 
```

请注意，Capture 和 AbstractJLabel 从静态块调用静态方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:01:33.613

事实证明，我面临的问题是因为每当我收到 AccessControlException 时，就会从 Javascript 调用一直在运行的线程。让我解释一下，在托管小程序的页面上，我有一个对小程序标签的引用。可以从引用 applet 标记的 Javascript 变量调用 Java applet 类上的公共实例方法。在这种情况下，线程，即使它正在运行来自小程序（或包含主小程序类的 jar）的代码，它也不会从小程序代码库继承权限，因为调用来自外部。解决方案是在 AccessController.doPrivileged 中调用需要权限的 java 代码。

# r - 在格点图中格式化轴标签

> ID：12374622
> 
> 赞同：4
> 
> 时间：2012-09-11T17:07:14.247
> 
> 标签：r, formatting, plot, lattice

`xxx.xxx`在下图中，如何将 y 轴标签格式更改为通常 ( ) 而不是科学格式？

```
df <- read.table(textConnection("
    ypogr_act  amount           cumSum
2012-09-20     30.00              30.00
2012-11-19   1834.69            1864.69
2012-11-30   2915.88            4780.57
2012-11-30   2214.98            6995.55
2012-12-18  21815.00           28810.55
2012-12-19 315000.00          343810.55
2012-12-21   1050.00          344860.55
2012-12-28   1300.00          346160.55
2013-01-10   1836.77          347997.32
2013-01-17 122193.00          470190.32
2013-03-22 415000.00          885190.32
")->con,header=T);close(con)

library(lattice)
library(zoo)
x <- zoo(df[2:3], df$ypogr_act)

win.graph(12,8)

print( xyplot(x, lwd=2,xlab='Μήνας',
              col=c(rgb(127, 201, 127, max = 255),rgb(56, 108, 176, max = 255)),
              scales = list(y=list(rot = 0,abbreviate=FALSE)) ))
trellis.focus("panel", 1, 1, highlight = F)
panel.grid(h = -1, v = 0, col = "grey", lty = 3)
trellis.unfocus() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T17:36:13.050

**编辑：**有一个*更*简单的解决方案：只需设置`options(scipen=10)`然后运行您的代码。要仅临时更改选项，您可以执行以下操作：

```
oscipen <- options(scipen=10)
## <Your plotting code>
options(oscipen) 
```

* * *

可能有一个更简单的解决方案，但这是我要做的：

```
## Write a customized axis annotation function 
## (Uses latticeExtra::xscale.components.log() et al. as templates.)
yscale.components.custom <- function (lim, logsc = FALSE, ...) {
    ans <- yscale.components.default(lim, logsc = logsc, ...)
    ans$left$labels$labels <- format(ans$left$labels$at, digits=3, scientific=10)
    ans
}

## Point to the customized function via xyplot's 'yscale.components=' argument
xyplot(x, lwd=2,xlab='???a?',
       col=c(rgb(127, 201, 127, max = 255),rgb(56, 108, 176, max = 255)),
       scales = list(y=list(rot = 0,abbreviate=FALSE)),
       yscale.components = yscale.components.custom) 
```

# ruby - 如何将可选参数传递给 Ruby 方法？

> ID：12374623
> 
> 赞同：2
> 
> 时间：2012-09-11T17:07:15.540
> 
> 标签：ruby, watir, watir-webdriver

我正在 Ruby 中进行一些 Watir-webdriver 测试，但似乎无法使以下代码正常工作。我想将一个可选`validation`参数传递给该`log_activity`方法。

```
def log_activity (type, *validation)
    #do something
end 
```

我将以下参数传递给该方法：

```
log_activity("license", 1) 
```

我希望`validation == 1`是真的，但它是假的：

```
puts validation.empty?
-> false

puts validation
-> 1

if validation == 1
    puts "validation!!!!"
else
    puts "WTF"
end
-> WTF 
```

我究竟做错了什么？

忘了提，我使用的是 ruby​​ 1.9.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T17:12:31.193

`*validation`是一个包含第二个和所有参数的数组。鉴于它是一个数组，您看到的结果是有意义的。您想检查 *validation 数组中的第一个元素。

Alternatively, if you will only get one optional argument, you can do:

```
def log_activity (type, validation=nil)
    #do something
end 
```

Then `validation` will be whatever you passed in.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T17:36:08.337

Read "[Method Arguments In Ruby](http://www.skorks.com/2009/08/method-arguments-in-ruby/)" and look at "Optional Arguments". I found it pretty handy.

I am pasting the useful content:

> Optional Arguments
> 
> If you want to decide at runtime how many – if any – arguments you will supply to a method, Ruby allows you to do so. You need to use a special notation when you define the method, e.g.:

```
def some_method(*p)
end 
```

> You can call the above method with any number of arguments (including none), e.g.:

```
some_method 
```

> or

```
some_method(25) 
```

> or

```
some_method(25,"hello", 45, 67) 
```

> All of those will work. If no arguments are supplied, then `p` will be an empty array, otherwise, it will be an array that contains the values of all the arguments that were passed in.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T17:11:13.000

当您使用 *args 作为 Ruby 中的最后一个参数时，args 是一个数组。

不幸的是，在 Ruby 1.8 上，array.to_s == array.join("")

尝试任一

```
if validation == [1] 
```

或者

```
if validation.first == 1 
```

# java - 从 Java Map 添加*副本*条目 属性图

> ID：12374625
> 
> 赞同：5
> 
> 时间：2012-09-11T17:07:31.387
> 
> 标签：java, collections, immutability, defensive-programming

我想将propertyMap 的*副本*添加到我的 propertyMap：

```
 public void addProperties(Map<String, Object> propertyMap) {
    for (Map.Entry<String, Object> propertyEntry : propertyMap.entrySet()) {
      this.propertyMap.put(propertyEntry.getKey(), propertyEntry.getValue());
    }
  } 
```

上面的代码没有这样做，但希望能传达意图？

最好的方法是什么？我已经阅读了一些关于“克隆”、“防御性复制”、“不可变对象”、Collections.unmodifiable 等的内容，但我比以前更困惑了。

我所需要的，以典型的 SO 风格，是一种更好的方式来写我在代码片段中的意思，拜托。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T17:11:33.540

看起来你可以使用[`putAll`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#putAll%28java.util.Map%29)：

```
public void addProperties(Map<String, Object> propertyMap) {
    this.propertyMap.putAll(propertyMap);
} 
```

这称为“防御性复制”。这里发生的是本地的值`propertyMap`被复制到实例的`propertyMap`. 这里的一个弱点是给定`propertyMap`的更改不会反映在实例的`propertyMap`. 这实质上是创建给定映射的*快照*并将该快照复制到实例字段映射。

还有其他创建防御性副本的方法，包括`clone()`构造`HashMap(Map)`函数。

对于不可变集合，其中的不可修改方法`Collections`将返回在您尝试添加时抛出异常的集合。例如，

```
Set<String> strs = Collections.unmodifiableSet(new HashSet<String>());
strs.add("Error"); // This line throws an exception 
```

不可变集合通过禁止修改（删除和添加）来保护它们的值，而防御性副本通过不引用复制的集合来保护它们的值（换句话说，原始集合中的更改不会显示在副本中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T17:19:46.580

我认为对于每个密钥，您不必担心复制，因为它们是不可变的。但是对于值，它取决于它们是什么类型的对象。如果它们是可变对象，那么您必须复制所有这些对象。

```
public void addProperties(Map<String, Object> propertyMap) { 
    Cloner cloner = new Cloner();
    for (Map.Entry<String, Object> propertyEntry : propertyMap.entrySet()) { 
        this.propertyMap.put(propertyEntry.getKey(), cloner.deepClone(propertyEntry.getValue())); 
    } 
} 
```

您可以检查此深度克隆[深度克隆实用程序推荐](https://stackoverflow.com/questions/665860/deep-clone-utility-recomendation)。

从主页[http://code.google.com/p/cloning/](http://code.google.com/p/cloning/)

> 重要提示：Java 类的深度克隆可能意味着数千个对象被克隆！文件和流的克隆也可能导致 JVM 崩溃。强烈建议在开发期间启用将克隆的类转储到标准输出，以便查看克隆的内容。

因此，很高兴知道您要克隆的内容。

# python - 在 Django 中使用 cv.CaptureFromCAM

> ID：12374626
> 
> 赞同：1
> 
> 时间：2012-09-11T17:07:37.047
> 
> 标签：python, django, opencv, python-imaging-library

我`cv.CaptureFromCAM`在 Django 应用程序中使用，但我的脚本阻止了这个命令。
没有 Django，它可以工作，我可以看到我的网络摄像头打开了。

这是我的脚本：

```
import cv, Image

def takePhoto():
        """Return a PIL img"""
        print "Taking photo"
        cv_img = cv.QueryFrame( cv.CaptureFromCAM(0) )
        pil_img = Image.fromstring("L", cv.GetSize(cv_img), cv_img.tostring())
        return pil_img 
```

如果有人知道为什么我不能使用`cv.CaptureFromCAM`Django 脚本中的方法？

PS：我已经尝试分解为几行......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T06:41:18.067

已解决：
我在网站启动时放入`cv.CaptureFromCAM`了一个 var`settings.py`以启动它。

我访问该变量以拍照，例如：

在 settings.py 中：

```
CAM = cv.CaptureFromCAM(0) 
```

在views.py中：

```
from django.http import HttpResponse
import cv, Image

def instantPhoto(request) :
    cv_img = cv.QueryFrame( CAM[0] )
    pil_img = Image.fromstring("RGB", cv.GetSize(cv_img), cv_img.tostring())
    response = HttpResponse(mimetype="image/png")
    pil_img.save(response, "PNG")
    return response 
```

# c++ - 代码使用 g++ 编译，但使用 VC++ 10 失败

> ID：12374634
> 
> 赞同：2
> 
> 时间：2012-09-11T17:08:26.287
> 
> 标签：c++, visual-c++, g++

我正在将我的一些 Linux 程序移植到 Windows。我想确保我的代码可以同时使用 MinGW 和 Visual C++ 10 进行编译，而不需要太多`#define`魔法`#ifdef`。我已经设法解决了大多数问题，除了这个。我有一个类似于以下的代码，它可以用 g++ 4.6.3 编译，但不能用 Visual C++ 10：

```
#include <iostream>
#include <vector>
#include <array>
#include <algorithm>
#include <functional>
#include <cmath>
#include <iterator>

typedef unsigned char UINT8;
const UINT8 MAX_COLL = 10;

template< typename BaseT, typename ExpT >
struct fopow {
    BaseT operator() ( BaseT base, ExpT exp ) const {
        return std::pow( base, exp );
    }
};

int main() {
    using namespace std;
    using namespace std::placeholders;

    array<int, MAX_COLL> intCollection_init = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    vector<int> intCollection( intCollection_init.begin(), intCollection_init.end() );

    transform( intCollection.begin(), intCollection.end(),
               ostream_iterator<int>( cout, " " ),
               bind( fopow<int, int>(), 3, _1 )
            );
    cout << endl;

    transform( intCollection.begin(), intCollection.end(),
               ostream_iterator<int>( cout, " " ),
               bind( fopow<int, int>(), _1, 3 )
            );
    cout << endl;
} 
```

我什至无法理解编译器的输出：

```
Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 16.00.40219.01 for 80x86
Copyright (C) Microsoft Corporation.  All rights reserved.

Test2.cpp C:\Program Files\Microsoft Visual Studio
10.0\VC\INCLUDE\xxresult(28) : error C2903: 'result' : symbol is neither a class template nor a function template
        C:\Program Files\Microsoft Visual Studio 10.0\VC\INCLUDE\xxresult(40) : see reference to class tem plate instantiation 'std::tr1::_Result_type2<__formal,_Fty,_Arg0,_Arg1>' being compiled
        with
        [
            __formal=false,
            _Fty=fopow<int,int>,
            _Arg0=std::tr1::_Nil &,
            _Arg1=std::tr1::_Nil &
        ]
        C:\Program Files\Microsoft Visual Studio 10.0\VC\INCLUDE\xxresult(597) : see reference to class te mplate instantiation 'std::tr1::_Result_of2<_Fty,_Farg0,_Farg1>' being compiled
        with
        [
            _Fty=fopow<int,int>,
            _Farg0=std::tr1::_Nil &,
            _Farg1=std::tr1::_Nil &
        ]
        C:\Program Files\Microsoft Visual Studio 10.0\VC\INCLUDE\xrefwrap(28) : see reference to class tem plate instantiation 'std::tr1::_Result_of<_Ty>' being compiled
        with
        [
            _Ty=fopow<int,int> (std::tr1::_Nil &,std::tr1::_Nil &)
        ]
        C:\Program Files\Microsoft Visual Studio 10.0\VC\INCLUDE\xxbind1(273) : see reference to class tem plate instantiation 'std::tr1::result_of<_Fty>' being compiled
        with
        [
            _Fty=fopow<int,int> (std::tr1::_Nil &,std::tr1::_Nil &)
        ]
        C:\Program Files\Microsoft Visual Studio 10.0\VC\INCLUDE\xxbind0(10) : see reference to class temp late instantiation 'std::tr1::_Bind2<_Callable,_Arg0,_Arg1>::_Return<_Barg0,_Barg1,_Barg2,_Barg3,_Barg4,_B arg5,_Barg6,_Barg7,_Barg8,_Barg9>' being compiled
        with
        [
            _Callable=std::tr1::_Callable_obj<fopow<int,int>,false>,
            _Arg0=int,
            _Arg1=std::tr1::_Ph<1>,
            _Barg0=std::tr1::_Nil &,
            _Barg1=std::tr1::_Nil &,
            _Barg2=std::tr1::_Nil &,
            _Barg3=std::tr1::_Nil &,
            _Barg4=std::tr1::_Nil &,
            _Barg5=std::tr1::_Nil &,
            _Barg6=std::tr1::_Nil &,
            _Barg7=std::tr1::_Nil &,
            _Barg8=std::tr1::_Nil &,
            _Barg9=std::tr1::_Nil &
        ]
        C:\Program Files\Microsoft Visual Studio 10.0\VC\INCLUDE\functional(408) : see reference to class template instantiation 'std::tr1::_Bind_base<_Ret,_BindN>' being compiled
        with
        [
            _Ret=std::tr1::_Notforced,
            _BindN=std::tr1::_Bind2<std::tr1::_Callable_obj<fopow<int,int>,false>,int,std::tr1::_Ph<1>>
        ]
        Test2.cpp(26) : see reference to class template instantiation 'std::tr1::_Bind_fty<_Fty,_Ret,_Bind N>' being compiled
        with
        [
            _Fty=fopow<int,int>,
            _Ret=std::tr1::_Notforced,
            _BindN=std::tr1::_Bind2<std::tr1::_Callable_obj<fopow<int,int>,false>,int,std::tr1::_Ph<1>>
        ] C:\Program Files\Microsoft Visual Studio 10.0\VC\INCLUDE\xxresult(28) : error C2039: 'result' : is not a m ember of 'fopow<BaseT,ExpT>'
        with
        [
            BaseT=int,
            ExpT=int
        ] C:\Program Files\Microsoft Visual Studio 10.0\VC\INCLUDE\xxresult(28) : error C2143: syntax error : missin g ';' before '<' C:\Program Files\Microsoft Visual Studio
10.0\VC\INCLUDE\xxresult(28) : error C4430: missing type specifie r - int assumed. Note: C++ does not support default-int C:\Program Files\Microsoft Visual Studio 10.0\VC\INCLUDE\xxresult(28) : error C2039: 'type' : is not a mem ber of '`global namespace'' C:\Program Files\Microsoft Visual Studio 10.0\VC\INCLUDE\xxresult(28) : error C2238: unexpected token(s) p receding ';' C:\Program Files\Microsoft Visual Studio 10.0\VC\INCLUDE\xxresult(40) : error C2039: '_Type' : is not a me mber of 'std::tr1::_Result_type2<__formal,_Fty,_Arg0,_Arg1>'
        with
        [
            __formal=false,
            _Fty=fopow<int,int>,
            _Arg0=std::tr1::_Nil &,
            _Arg1=std::tr1::_Nil &
        ] C:\Program Files\Microsoft Visual Studio 10.0\VC\INCLUDE\xxresult(40) : error C2146: syntax error : missin g ';' before identifier '_Type' C:\Program Files\Microsoft Visual Studio
10.0\VC\INCLUDE\xxresult(40) : error C4430: missing type specifie r - int assumed. Note: C++ does not support default-int C:\Program Files\Microsoft Visual Studio 10.0\VC\INCLUDE\xxresult(40) : error C2602: 'std::tr1::_Result_of 2<_Fty,_Farg0,_Farg1>::_Type' is not a member of a base class of 'std::tr1::_Result_of2<_Fty,_Farg0,_Farg1
>'
        with
        [
            _Fty=fopow<int,int>,
            _Farg0=std::tr1::_Nil &,
            _Farg1=std::tr1::_Nil &
        ]
        C:\Program Files\Microsoft Visual Studio 10.0\VC\INCLUDE\xxresult(40) : see declaration of 'std::t r1::_Result_of2<_Fty,_Farg0,_Farg1>::_Type'
        with
        [
            _Fty=fopow<int,int>,
            _Farg0=std::tr1::_Nil &,
            _Farg1=std::tr1::_Nil &
        ] C:\Program Files\Microsoft Visual Studio 10.0\VC\INCLUDE\xxresult(40) : error C2868: 'std::tr1::_Result_of 2<_Fty,_Farg0,_Farg1>::_Type' : illegal syntax for using-declaration; expected qualified-name
        with
        [
            _Fty=fopow<int,int>,
            _Farg0=std::tr1::_Nil &,
            _Farg1=std::tr1::_Nil &
        ] 
```

我认为问题的根源是 bind() 或 transform() 但我不知道代码到底出了什么问题（因为它编译得很好，没有一个 g++ 警告）。任何人都知道如何在不求助于前身魔法的情况下修复我的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:33:27.760

添加`typedef BaseT result_type;`到 的定义中`fopow`。前几天需要的模板黑客在`decltype`试图弄清楚返回类型`fopow::operator()`是什么时迷路了。（而且，是的，你是对的：它在通话中迷路了`bind()`；特别是第一个。）

或者，如果您愿意，可以使用@ecatmur 建议的修复方法：派生自`std::binary_function<BaseT, ExpT, BaseT>`. 这也将添加`result_type`到模板中，以及`first_argument_type`和`second_argument_type`。`bind`不需要参数类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T17:35:12.270

`std::bind`不是您在 VS2010 中认为的那样：它实际上是`std::tr1::bind`, 和 uses `std::tr1::result_of`，它远不如`std::result_of`C++11 标准规定的编译器辅助功能强大。

特别是，不要尝试`std::bind`在 VS10 中使用 lambda 表达式。

`fopow`您可以通过继承来解决此问题`std::binary_function<BaseT, ExpT, BaseT>`。

# sql-server-2012 - fluentmigrator 是否适用于 SQL Server 2012？

> ID：12374635
> 
> 赞同：6
> 
> 时间：2012-09-11T17:08:35.587
> 
> 标签：sql-server-2012, fluent-migrator

fluentmigrator 的当前迭代是否适用于 SQL Server 2012？它未在受支持的数据库下列出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T06:08:42.320

目前还没有对 Sql Server 2012 的官方支持。但如果您将 SqlServer2008 指定为数据库类型，它应该可以工作。使用 FluentMigrator 时，Sql Server 2005、2008 和 2012 之间的差异并不那么显着（Sql Server 2000 是另一回事）。像新的[序列对象](http://msdn.microsoft.com/en-us/library/ff878091.aspx)这样的一些特性没有支持，因此在此期间必须使用 Execute.Sql 运行。

更新：我使用指定为 SqlServer2008 的数据库类型针对 Sql Server 2012 Express 测试了 FluentMigrator，它运行良好。

更新：FluentMigrator 现在正式支持 Sql Server 2012 和 Sequences。

# android - Android 中的 URL 错误

> ID：12374637
> 
> 赞同：1
> 
> 时间：2012-09-11T17:08:44.790
> 
> 标签：android, android-widget, android-edittext

```
String temp1=(String)firstname.getText().toString(); 
String temp2=(String)lastname.getText().toString();
String urlreg="http://localhost/welcome.php?firstname="+temp1+"&lastname="+temp2; 
```

这里 firstname 和 lastname 是 editText 字段。

我收到如下错误。

LogCat 错误：

`09-11 22:11:09.529: E/AndroidRuntime(1204): FATAL EXCEPTION: main 09-11 22:11:09.529: E/AndroidRuntime(1204): java.lang.IllegalArgumentException: Illegal character in query at index 54: http://localhost/welcome.php?firstname=ji&lastname=kij`

如果我将代码修改为

```
String urlreg="http://localhost/welcome.php?firstname="+temp1+"&lastname"; 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:17:11.760

在使用 urlreg 之前，您需要使用 URLEncoder.encode() 对其进行 url 编码以取出特殊字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:02:44.287

或者你可以做Httppost。它会自动对您的网址进行编码。

```
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("var_name", value));

HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.example.in/submit.php");
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
HttpResponse response = httpclient.execute(httppost);
HttpEntity entity = response.getEntity(); 
```

# windows-phone-7 - 从 XML 更新 WPhone 7 列表框

> ID：12374639
> 
> 赞同：1
> 
> 时间：2012-09-11T17:08:49.913
> 
> 标签：windows-phone-7, listbox

我的列表框没有更新/刷新时遇到问题。我在这里读过我需要使用`ObservableCollection`但我没有任何运气。我正在从 XML 填充我的列表框。

```
 public class PestotoraPost
    {
        public string ID { get; set; }
        public string Date { get; set; }
        public string Name { get; set; }
        public string Message { get; set; }

    }
void WebLoad()
    {
        WebClient pestotora = new WebClient();
        pestotora.DownloadStringCompleted += new DownloadStringCompletedEventHandler(pestotora_DownloadStringCompleted);
        pestotora.DownloadStringAsync(new Uri("wwww.someURL.com/xml.php"));

    } 
```

请注意，实际的 xml 是包含 xml 结构的 php（来自 sql DB）

```
 void pestotora_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        XElement doc = XElement.Parse(e.Result);
        listBox1.ItemsSource = from results in doc.Descendants("Data")
                            select new PestotoraPost
                            {
                                ID = results.Element("DataID").Value,
                                Date = results.Element("DataDate").Value,
                                Name=results.Element("DataName").Value,
                                Message=results.Element("DataMessage").Value     
                            };
    } 
```

每次 XML 更改时，我的列表框都不会更新`listBox1.UpdateLayout();`

关于如何开始实施这个的任何线索/帮助？非常感谢。

更新

```
namespace pestotora
{
    public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        public MainPage()
        {
            InitializeComponent();
            UIload(true);
            WebLoad();

        }

        public ObservableCollection<PestotoraPost> Posts { get; set; }

        public class PestotoraPost
        {
            public string ID { get; set; }
            public string Date { get; set; }
            public string Name { get; set; }
            public string Message { get; set; }
        }

        void WebLoad()
        {

            WebClient pestotora = new WebClient();
            pestotora.DownloadStringCompleted += new DownloadStringCompletedEventHandler(pestotora_DownloadStringCompleted);
            pestotora.DownloadStringAsync(new Uri("www.domain.com/xml.php"));

        }

        void UIload(bool Splash)
        {
            if (Splash == true)
            {

                ApplicationBar.IsVisible = false;
            }
            else
            {

                ApplicationBar.IsVisible = true;
            }
        }

        void pestotora_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
        {
            //XDocument doc = XDocument.Parse(e.Result);

            XElement doc = XElement.Parse(e.Result);

            /* listBox1.ItemsSource = from results in doc.Descendants("Data")
                                select new PestotoraPost
                                {
                                    ID = results.Element("DataID").Value,
                                    Date = results.Element("DataDate").Value,
                                    Name=results.Element("DataName").Value,
                                    Message=results.Element("DataMessage").Value

                                }; */
            var list = from results in doc.Descendants("Data")
                       select new PestotoraPost
                       {
                           ID = results.Element("DataID").Value,
                           Date = results.Element("DataDate").Value,
                           Name = results.Element("DataName").Value,
                           Message = results.Element("DataMessage").Value
                       };
            Posts = new ObservableCollection<PestotoraPost>(list);
            foreach (var post in list)
            {
                Posts.Add(post);
            }

            UIload(false);

        }

        private void ApplicationBarMenuItem_Click(object sender, EventArgs e)
        {
            //stckPost.Visibility = System.Windows.Visibility.Visible;

        }

        private void ApplicationBarIconButton_Click(object sender, EventArgs e)
        {
            NavigationService.Navigate(new Uri("/Post.xaml", UriKind.Relative));
        }

        private void ApplicationBarIconButton_Click_1(object sender, EventArgs e)
        {

            listBox1.UpdateLayout();
            //listBox1.ScrollIntoView(listBox1.Items[0]);

            WebLoad();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:47:11.170

**1\. 如果您使用 MVVM 模式**：在 viewModel 中实现 INotifyPropertyChanged 并声明：

```
private ObservableCollection<PestotoraPost> _posts;
public ObservableCollection<PestotoraPost> Posts 
{
 get{return _posts;} 
 set
  {
     _posts = value;
     RaisePropertyChanged("Posts");
  }
 } 
```

在 xaml 中写：

```
<ListBox Name="listbox1" ItemsSource="{Binding Posts}"/> 
```

在pestoora_DownloadStringCompleted 方法中：

```
var list = from results in doc.Descendants("Data")
                            select new PestotoraPost
                            {
                                ID = results.Element("DataID").Value,
                                Date = results.Element("DataDate").Value,
                                Name=results.Element("DataName").Value,
                                Message=results.Element("DataMessage").Value     
                            };
Posts = new ObservableCollection<PestotoraPosts>(list); 
```

* * *

**2\. 如果您在代码隐藏中运行所有内容，**只需声明

```
 public ObservableCollection<PestotoraPosts> Posts {get;set;} 
```

在 Page 构造函数初始化集合中：

```
 Posts = new ObservableCollection<PestotoraPosts>(); 
```

Xaml 将具有相同的声明。在`pestotora_DownloadStringCompleted`方法中：

```
var list = from results in doc.Descendants("Data")
                            select new PestotoraPost
                            {
                                ID = results.Element("DataID").Value,
                                Date = results.Element("DataDate").Value,
                                Name=results.Element("DataName").Value,
                                Message=results.Element("DataMessage").Value     
                            };
foreach(var post in list)
{
   Posts.Add(post);
} 
```

**我们做了什么？**

在 xaml 中，我们设置了一个[数据绑定](http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/data-binding-with-collection-and-xaml/)。现在`listBox1`将从`Post`收集中获取数据。然后我们创建了新的集合并通知`listBox1`更新它的视图。（在第一个 vatiant 中）。

在第二个变体中，我们填充了集合，并且由于它是可观察的，它通知了一个列表框。

# c# - WPF 自定义形状

> ID：12374643
> 
> 赞同：9
> 
> 时间：2012-09-11T17:09:06.677
> 
> 标签：c#, wpf, silverlight, xaml

我需要创建一个自定义形状以添加到 WPF 表单上。形状只是一个三角形。如果您想知道，是的，我可以使用 XAML 中的多边形来做到这一点：

```
<Polygon Fill="LightBlue" Stroke="Black" Name="Triangle">
  <Polygon.Points>
    <Point X="0" Y="0"></Point>
    <Point X="10" Y="0"></Point>
    <Point X="5" Y="-10"></Point>
  </Polygon.Points>
</Polygon> 
```

问题是我们需要从其他地方绑定一个最终确定形状大小的属性。因此，我编写了一个简单的 shape 类扩展，如下所示：

```
public class Triangle:Shape
{
    private double size;

    public static readonly DependencyProperty SizeProperty = DependencyProperty.Register("Size", typeof(Double), typeof(Triangle));

    public Triangle() {            
    }

    public double Size
    {
        get { return size; }
        set { size = value; }
    }

    protected override Geometry DefiningGeometry
    {
        get {

            Point p1 = new Point(0.0d,0.0d);
            Point p2 = new Point(this.Size, 0.0d);
            Point p3 = new Point(this.Size / 2, -this.Size);

            List<PathSegment> segments = new List<PathSegment>(3);
            segments.Add(new LineSegment(p1,true));
            segments.Add(new LineSegment(p2, true));
            segments.Add(new LineSegment(p3, true));

            List<PathFigure> figures = new List<PathFigure>(1);
            PathFigure pf = new PathFigure(p1, segments, true);
            figures.Add(pf);

            Geometry g = new PathGeometry(figures, FillRule.EvenOdd, null);

            return g;
        }
    }

} 
```

我认为这很好，但形状并没有出现在表格的任何地方。所以，我不确定 DefiningGeometry 方法是否写得好。如果我看不到任何东西，很可能不是。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T17:13:40.537

未正确设置依赖属性。 [像这样编写`Size`getter/setter](http://msdn.microsoft.com/en-us/library/ms750428.aspx)：

```
public double Size
{
    get { return (double)this.GetValue(SizeProperty); }
    set { this.SetValue(SizeProperty, value); }
} 
```

# ruby-on-rails - 将 ruby 数组的元素划分为精确数量的（几乎）大小相等的子数组

> ID：12374645
> 
> 赞同：70
> 
> 时间：2012-09-11T17:09:14.017
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-1.8.7

我需要一种方法将数组拆分为大小大致相等的较小数组的确切数量。任何人都有这样做的方法吗？

例如

```
a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13] 
groups = a.method_i_need(3)
groups.inspect
    => [[1,2,3,4,5], [6,7,8,9], [10,11,12,13]] 
```

> [请注意，这是一个与将数组划分为 chunks](https://stackoverflow.com/q/1230279/2063546)完全不同的问题，因为`a.each_slice(3).to_a`会产生 5 个组（不是我们想要的 3 个组），并且最终组的大小可能与其他组完全不同：
> 
> ```
> [[1,2,3], [4,5,6], [7,8,9], [10,11,12], [13]]  # this is NOT desired here. 
> ```

在这个问题中，需要预先指定所需的 chunk 数量，每个 chunk 的大小最多相差 1。

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-09-11T17:12:03.400

您正在寻找[`Enumerable#each_slice`](http://rdoc.info/stdlib/core/Enumerable#each_slice-instance_method)

```
a = [0, 1, 2, 3, 4, 5, 6, 7]
a.each_slice(3) # => #<Enumerator: [0, 1, 2, 3, 4, 5, 6, 7]:each_slice(3)>
a.each_slice(3).to_a # => [[0, 1, 2], [3, 4, 5], [6, 7]] 
```

* * *

## 回答 #2

> 赞同：122
> 
> 时间：2012-11-29T20:47:48.280

也许我误读了这个问题，因为另一个答案已经被接受，但听起来你想将数组分成 3 个相等的组，而不考虑每个组的大小，而不是将它分成 3 个的 N 组作为以前的答案可以。如果这就是您要寻找的，Rails (ActiveSupport) 也有一个名为[in_groups](http://apidock.com/rails/v3.2.8/Array/in_groups)的方法：

```
a = [0,1,2,3,4,5,6]
a.in_groups(2) # => [[0,1,2,3],[4,5,6,nil]]
a.in_groups(3, false) # => [[0,1,2],[3,4], [5,6]] 
```

我认为没有 ruby​​ 等价物，但是，您可以通过添加这个简单的方法获得大致相同的结果：

```
class Array; def in_groups(num_groups)
  return [] if num_groups == 0
  slice_size = (self.size/Float(num_groups)).ceil
  groups = self.each_slice(slice_size).to_a
end; end

a.in_groups(3) # => [[0,1,2], [3,4,5], [6]] 
```

唯一的区别（如您所见）是这不会将“空白空间”分散到所有组中；除了最后一个之外，每个组的大小都相同，最后一个组始终包含余数加上所有“空白空间”。

**更新：** 正如@rimsky 敏锐地指出的那样，上述方法并不总是会产生正确数量的组（有时它会在最后创建多个“空组”，并将它们排除在外）。这是一个更新版本，从[ActiveSupport 的定义](http://api.rubyonrails.org/classes/Array.html#method-i-in_groups)中缩减，该定义将附加内容展开以填充请求的组数。

```
def in_groups(number)
  group_size = size / number
  leftovers = size % number

  groups = []
  start = 0
  number.times do |index|
    length = group_size + (leftovers > 0 && leftovers > index ? 1 : 0)
    groups << slice(start, length)
    start += length
  end

  groups
end 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-09-11T17:12:55.897

尝试

```
a.in_groups_of(3,false) 
```

它会做你的工作

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-03-10T14:47:38.853

正如 mltsy 所写，`in_groups(n, false)`应该完成这项工作。

我只是想添加一个小技巧来获得正确的平衡 `my_array.in_group(my_array.size.quo(max_size).ceil, false)`。

下面是一个例子来说明这个技巧：

```
a = (0..8).to_a
a.in_groups(4, false) => [[0, 1, 2], [3, 4], [5, 6], [7, 8]]
a.in_groups(a.size.quo(4).ceil, false) => [[0, 1, 2], [3, 4, 5], [6, 7, 8]] 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-11-06T09:41:57.617

这需要一些更好的聪明才智来涂抹多余的部分，但这是一个合理的开始。

```
def i_need(bits, r)
  c = r.count
  (1..bits - 1).map { |i| r.shift((c + i) * 1.0 / bits ) } + [r]
end

>   i_need(2, [1, 3, 5, 7, 2, 4, 6, 8])
 => [[1, 3, 5, 7], [2, 4, 6, 8]] 
> i_need(3, [1, 3, 5, 7, 2, 4, 6, 8])
 => [[1, 3, 5], [7, 2, 4], [6, 8]] 
> i_need(5, [1, 3, 5, 7, 2, 4, 6, 8])
 => [[1, 3], [5, 7], [2, 4], [6], [8]] 
```

# linux - 在 RStudio 上为 R 安装 TSA 包时出错

> ID：12374646
> 
> 赞同：2
> 
> 时间：2012-09-11T17:09:14.283
> 
> 标签：linux, r, installation, rstudio

所以我一直在努力解决这个问题一段时间，我似乎无法在互联网上的其他任何地方找到这个问题。

我正在运行：Linux Mint 12（基于 Ubuntu 11.10）最新版本的 R(2.15.1) RStudio(0.96.331)

R 和 RStudio 都是最新版本，所以我安装 TSA 的问题不是基于过时的 R 版本。

这是我尝试通过 RStudio 安装 TSA 时收到的错误消息（我安装了 PerformanceAnalytics 和 xts 没有任何问题）：

> 正在安装*源*包 'TSA' ...
> 
> ** 创建默认命名空间文件
> 
> ** R
> 
> ** 数据
> 
> ** 为延迟加载准备包
> 
> 错误：'Matrix' 的 loadNamespace() 中的 .onLoad 失败，详细信息：
> 
> 调用：assignInNamespace("..Old..as.matrix", base::as.matrix, ns = "base")
> 
> 错误：“..Old..as.matrix”的锁定绑定无法更改
> 
> 错误：无法加载包“mgcv”
> 
> 错误：包“TSA”的延迟加载失败</p>
> 
> *   删除 '/home/client/R/i686-pc-linux-gnu-library/2.15/TSA'</li>
> 
> install.packages 中的警告：
> 
> 安装包“TSA”的退出状态非零

我检查了我的 mgcv 版本，它是最新的（我检查了我的软件管理器，它已安装以及最新版本）。

我真的不知道现在该怎么办。我打算手动将 TSA 安装到我的系统本身，但我找不到一个可靠的网站来解释如何将软件包直接安装到 R 本身。

对此问题的所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:11:48.763

根据（清除）错误消息`Error : .onLoad failed in loadNamespace() for 'Matrix', details:`，您需要一个新的 Matrix 包。

如果您的 Mint 系统与 Ubuntu 混合使用，您可以尝试[http://cran.r-project.org/bin/linux/ubuntu 。](http://cran.r-project.org/bin/linux/ubuntu)否则从源代码编译 Matrix。

# vb.net - 将包含 &H27 等的字符串转换为其真实字节值

> ID：12374648
> 
> 赞同：0
> 
> 时间：2012-09-11T17:09:18.493
> 
> 标签：vb.net, dictionary, type-conversion, hex, byte

我有几个从数据库填充的字典这里是一些数据库示例数据库中的所有文件都表示为字符串

```
PromoStatus         3   Paid
PromoStatus         4   Escrowed
TickTransCode   &H0 Valid cashable ticket
TickTransCode   &H1 Valid restricted promo ticket
TickTransCode   &H2 Valid nonrestricted promo ticket
BIllDenom           0   1
BIllDenom           1   2 
```

这是我的代码

```
Public Shared TickTransCode As New Dictionary(Of Byte, String)()
Public Shared BIllDenom As New Dictionary(Of Byte, Decimal)()
Public Shared PromoStatus As New Dictionary(Of Byte, String)()    
Dim myReader As SqlDataReader = Nothing
Dim myCommand As New SqlCommand("select * from dictionary", myConnection)
myReader = myCommand.ExecuteReader()
While myReader.Read()
    Select Case myReader.GetString(2)
        Case "PromoStatus"
           PromoStatus.Add(Convert.ToByte(myReader.GetString(3)), myReader.GetString(4))
        Case "BillDenom"
           BIllDenom.Add(Convert.ToByte(myReader.GetString(3)), Convert.ToByte(myReader.GetString(4)))
        Case "TickTransCode"
           TickTransCode.Add((myReader.GetString(3)), myReader.GetString(4))
     End Select
End While 
```

第一个案例工作正常 3 案例我不确定正确的转换，所以 &HA 实际上应该是 10 &HF 将是 15 等等。你可能会问为什么我不只是将实际数字放在 DB 中，但十六进制数字是我从中得到的文档使用的通信流和编号，因此我需要保持不变，因此在解决数据问题时不必转换每个数字。

这是我得到的错误

```
Input string was not in a correct format 
```

还有一种更好的方法可以从数据库中创建字典，我有比这个示例中要填充的字典多得多的字典，而且我真的不希望每个字典都有一个表。我使用 DB 的原因是我可以添加到字典而无需重新编译，还可以为提示和消息等添加一些额外的语言，这些语言可以在运行时加载和/或在运行时更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:18:30.787

在您的 SQL 中，您可以执行以下操作：

```
SELECT CAST(SUBSTRING(HexNumber, 2, 9999) AS INT) 
```

或在 VB 方面：

```
Dim tInt As Int32 = Int32.Parse(hexString, System.Globalization.NumberStyles.HexNumber) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:03:52.353

NumberStyles.HexNumber 不允许使用“&h”或“&H”。但是，您可以简单地删除它们：

```
Dim s = "&h1A"
s = s.Replace("&H", "").Replace("&h", "")
Dim n = Integer.Parse(s, Globalization.NumberStyles.HexNumber)
Console.WriteLine(n.ToString) 
```

# c# - 带有 Tomcat 服务器的 WINCE 5.0 上的 Web 客户端

> ID：12374649
> 
> 赞同：0
> 
> 时间：2012-09-11T17:09:46.567
> 
> 标签：c#, web-services, windows-ce

语境：

我正在设计一个项目，该项目涉及 Wince 5.0 上的 Web 客户端和 Tomcat 服务器（基于 servlet，提供 XML/JSON 数据）。Web 客户端基于 C# 和 net Compact Framework。

问题：

为了从 C# Web 客户端使用 Web 服务，我搜索并找到了 WSDL 方法。作为 C# 的新手，我试图找出在 Java 中是否存在与 HTTPClient 类等效的用于 GET/POST 的类。由于客户端是以 UI 为中心的，因此我希望进行异步 Web 服务调用以提供更好的用户体验。

任何链接都会有很大帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:54:58.790

在完整的框架下，你有 WebClient，但它在 Compact Framework 中不存在。不过这没什么大不了的，因为您可以在 Compact Framework 中使用 HttpWebRequest，所以 GET 看起来像这样：

```
var request = (HttpWebRequest)WebRequest.Create(pageUri);
using (var response = (HttpWebResponse)request.GetResponse())
{
    using (var stream = response.GetResponseStream())
    {
        // read the response stream here
    }
} 
```

发送（POST/PUT/DELETE）看起来像这样：

```
var request = (HttpWebRequest)WebRequest.Create(pageUri);
var requestStream = request.GetRequestStream();
requestStream.Write(postBytes, 0, postBytes.Length);
requestStream.Close(); 
```

# ruby - Ruby - 删除小写字母

> ID：12374652
> 
> 赞同：-2
> 
> 时间：2012-09-11T17:10:09.080
> 
> 标签：ruby, regex

假设我有这个字符串：`a = "Vallås centrum HALMSTAD"` 我想删除所有小写、空格和第一个大写字母，所以我只有一个字符串`a => "HALMSTAD"`

我试过这样的事情：

```
a = "Vallås centrum HALMSTAD"
b = a.gsub(/[:lower:]/, "")
puts b 
```

但我得到这个输出：`a => "Vaås cntum HALMSTAD"`

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:17:29.293

我相信您应该匹配大写单词（包括其中的连续单词和可能的标点符号）并将其余的替换为空字符串。

正则表达式会

```
\b([A-Z']+\s*)\b 
```

这将匹配并捕获所有大写单词，包括连续单词。

[红色链接](http://rubular.com/r/vfnO75DtLa)

考虑的示例字符串：

> Vallås centrum ISN'T blah Blah HALMSTAD AND BLAh

这匹配：

> 不是
> 哈姆斯塔德和

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:01:38.847

尝试这个：

```
your_string.split.last 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T17:19:52.973

这取决于您是要“仅删除小写字符”（并保留空格）还是“仅保留大写字符”（并丢失空格）。我建议也许以下更接近你所追求的？

```
a = "Vallås centrum HALMSTAD"
b = a.gsub(/[^[:upper:]]+/, "")
puts b # => "VHALMSTAD" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T17:43:30.577

尝试这个：

```
a = "Vallås centrum ISN'T blah Blah HALMSTAD AND "
b = a.gsub(/\b[A-Z]?[^A-Z\s']+\s*\b/, '')
puts b 
```

这应该处理大多数小写单词，但您需要处理其他可能的情况，其中有标点符号、问号、感叹号、非 ASCII 字符等......

[你可以在这里](http://rubyfiddle.com/riddles/941fb)摆弄这个

* * *

鉴于@TimPietzcker 对非 ASCII 字符的评论，您可以用`A-Z`POSIX 括号表达式替换`[[:upper:]]`

* * *

**更新**：
这将是一个更完整的解决方案：

正则表达式查找大多数小写单词（这仍然可以扩展为更多符号）：

```
\b(?:[^\s]?[[:lower:]][^\s]?)+\s*\b[?!]? 
```

[在这里](http://rubular.com/r/wbfe73F9zH)测试正则表达式

红宝石代码：

```
a = "Vallås centrum ISN'T blah Blah HALMSTAD AND BlaG and bLag's? FINISH "
b = a.gsub(/\b(?:[^\s]?[[:lower:]][^\s]?)+\s*\b[?!]?/, '')
puts b 
```

[在这里](http://rubyfiddle.com/riddles/941fb/3)摆弄代码

# c# - 从 WPF RichTextBox 运行结束时删除 TextDecoration

> ID：12374653
> 
> 赞同：1
> 
> 时间：2012-09-11T17:10:09.227
> 
> 标签：c#, wpf, richtextbox, flowdocument

我有一个带有粗体文本的 RichTextBox，但是当用户输入分号时，需要以编程方式使粗体“结束” `;`。

例如，我的富文本框有以下粗体文本：

**`hello world`**

当我添加分号`;`并继续输入时，我想要以下内容：

**`hello world;`**`how are you?`

我已经尝试了一些类似的东西：

```
var newRun = new Run();
paragraph.Inlines.InsertAfter(paragraph.Inlines.LastInline, newRun);
CaretPosition = newRun.ElementEnd; 
```

但新创建的运行似乎不是我正在输入的运行（我不知道它是否不存在，或者我只是没有输入）。

有人知道解决这个问题的好方法吗？

**更新：使用默认文本运行。**

我注意到，如果我创建一个运行：

```
var newRun = new Run(" ") 
```

那么它会起作用，但在某些情况下我宁愿不添加空格。有什么见解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:42:29.770

尝试换行：

```
CaretPosition = newRun.ElementEnd; 
```

至：

```
CaretPosition = newRun.ContentEnd; 
```

# asp.net - 如何正确执行 RPC 样式的 Asp.Net Web API 调用？

> ID：12374657
> 
> 赞同：0
> 
> 时间：2012-09-11T17:10:32.270
> 
> 标签：asp.net, rest, asp.net-web-api, rpc

**2012 年 9 月 12 日更新：**

我与一位同事分享了我的代码，第一次对他来说一切正常，没有任何更改。所以，我的盒子上一定有一些环保的东西，有人有什么想法吗？

**请参阅下面的更新**

设置：

.Net 4.5

自托管（控制台应用程序）.​​Net 4.5 Web API 应用程序

使用 MSTest 测试工具

我的 Web API 应用程序大部分都充满了 REST ApiControllers，它们都可以正常工作，正如我对标准 CRUD 类型的东西所期望的那样。现在我有一个需求（将一些对象添加到内部队列），这似乎不太适合 REST CRUD 模型。我发现[这篇](http://encosia.com/rest-vs-rpc-in-asp-net-web-api-who-cares-it-does-both/)文章似乎说您可以在 Web API 中执行 RPC 样式的非 REST 操作就好了。

我写了一个新的控制器，看起来像这样：

```
public class TaskInstanceQueueController : ApiController
{
    public void Queue(TaskInstance taskInstance)
    {
        // Do something with my taskInstance
        Console.WriteLine("Method entered!");
    }
} 
```

在调用它的代理类中，我的代码如下所示：

```
public class TaskInstanceQueueProxy : ITaskInstanceQueueProxy
{
    readonly HttpClient _client = new HttpClient();

    public TaskInstanceQueueProxy()
    {
        var apiBaseUrl = System.Configuration.ConfigurationManager.AppSettings["APIBaseUrl"];
        _client.BaseAddress = new Uri(apiBaseUrl);
        _client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
    }

    public void QueueTaskInstances(TaskInstance taskInstance)
    {
        QueueTaskInstanceViaAPI(taskInstance);
    }

    private async void QueueTaskInstanceViaAPI(TaskInstance taskInstance)
    {

        var response = await _client.PostAsJsonAsync("api/TaskInstanceQueue/Queue", taskInstance);
        var msg = response.EnsureSuccessStatusCode();
    }

} 
```

这是我的路线：

```
 config.Routes.MapHttpRoute("API Default", "api/{controller}/{id}", new {id = RouteParameter.Optional});
    config.Routes.MapHttpRoute("API RPC Style", "api/{controller}/{action}", new { id = RouteParameter.Optional }); 
```

当我对我的代理运行测试时，我没有收到任何错误，但我的控制器方法中没有断点，也没有输入方法！消息出现在控制台中。var msg 行上的断线也永远不会命中。无论出于何种原因，我似乎都没有正确使用 HttpClient 对象来执行此操作。

同样，这个 web api 应用程序与许多其他 apicontroller 一起工作得很好，但它们都在做标准的 REST 东西。

有人有任何线索吗？

**更新**

如果我在 PostAsJsonAsync 调用周围放置一个 try/catch，我会得到以下信息：

```
A first chance exception of type 'System.Threading.ThreadAbortException' occurred in mscorlib.dll
System.Threading.ThreadAbortException: Thread was being aborted.
   at System.Threading.Tasks.TaskHelpers.RunSynchronously(Action action, CancellationToken token)
   at System.Net.Http.Formatting.JsonMediaTypeFormatter.WriteToStreamAsync(Type type, Object value, Stream writeStream, HttpContent content, TransportContext transportContext)
   at System.Net.Http.ObjectContent.SerializeToStreamAsync(Stream stream, TransportContext context)
   at System.Net.Http.HttpContent.LoadIntoBufferAsync(Int64 maxBufferSize)
   at System.Net.Http.HttpClientHandler.PrepareAndStartContentUpload(RequestState state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at TaskManagerProxy.TaskInstanceQueueProxy.<QueueTaskInstanceViaAPI>d__0.MoveNext() in c:\Moso\MOSO\MOSO.Infrastructure\tm\TaskManagerProxy\TaskManagerProxy\TaskInstanceQueueProxy.cs:line 30 
```

第 30 行是呼叫所在的行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T08:14:28.717

这个答案确实取决于您在`TaskInstanceQueueController`. 假设 Queue 是您唯一的一个，那么我相信您的路线已经可以使用（尽管它们有点不整洁）。

我刚刚构建了您的代码的示例版本，并成功使用 Fiddler 和 Curl 成功发布到 Queue 方法并达到断点。我已经详细说明了您的示例，并展示了如何将 RPC 操作与普通 REST 方法混合。

示例代码位于 GitHub上[。](https://github.com/markyjones/StackOverflow/tree/master/WebApiSelfHostWithRpcActionRoute)

基本上，问题与 WebApi 元素（路由、配置等）无关，尽管您可能应该删除 Optional id 并将 HttpPost 属性添加到 queue 方法中），而是因为您的初始问题表明这是您调用服务器的方式这可能应该是另一个问题。

目前尚不清楚您是否有两个项目以及如何托管 MS 测试代码等？...但是这里有一个很好的[WebApi 集成测试](http://forums.asp.net/t/1772734.aspx/1)示例，您可以遵循，并且在使用 Fiddler 等工具调试 API 时可以快速帮助消除并调试路由配置问题。

**工作控制台程序：**

```
static void Main(string[] args)
    {
       // Set up server configuration 
        HttpSelfHostConfiguration config = new HttpSelfHostConfiguration("http://localhost:8080");

        //Route Catches the GET PUT DELETE typical REST based interactions (add more if needed)
        config.Routes.MapHttpRoute("API Default", "api/{controller}/{id}",
            new { id = RouteParameter.Optional },
            new { httpMethod = new HttpMethodConstraint(HttpMethod.Get, HttpMethod.Put, HttpMethod.Delete) });

        //This allows POSTs to the RPC Style methods http://api/controller/action
        config.Routes.MapHttpRoute("API RPC Style", "api/{controller}/{action}",
            new { httpMethod = new HttpMethodConstraint(HttpMethod.Post) });

        //Finally this allows POST to typeical REST post address http://api/controller/
        config.Routes.MapHttpRoute("API Default 2", "api/{controller}/{action}",
            new { action = "Post" },
            new { httpMethod = new HttpMethodConstraint(HttpMethod.Post) });

        using (HttpSelfHostServer server = new HttpSelfHostServer(config))
        {
            server.OpenAsync().Wait();
            Console.WriteLine("Press Enter to quit.");
            Console.ReadLine();
        }
    } 
```

**工作控制器**

```
public class TaskInstanceQueueController : ApiController
{

     public void Get(string id)
    {
        // Do something with my taskInstance
        Console.WriteLine("Method entered!" + id);
    }

    [ActionName("Post")]
    [HttpPost]
    public void Post(TaskInstance taskInstance)
    {
        // Do something with my taskInstance
        Console.WriteLine("REST Post Method entered!");
    }

    [ActionName("Queue")]
    [HttpPost]
    public void Queue(TaskInstance taskInstance)
    {
        // Do something with my taskInstance
        Console.WriteLine("Queue Method entered!");
    }

    [ActionName("Another")]
    [HttpPost]
    public void Another(TaskInstance taskInstance)
    {
        Console.WriteLine("Another Method entered!");
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T01:01:43.620

你有不明确的路线。

```
config.Routes.MapHttpRoute("API Default", "api/{controller}/{id}", new {id = RouteParameter.Optional});
config.Routes.MapHttpRoute("API RPC Style", "api/{controller}/{action}", new { id = RouteParameter.Optional }); 
```

当请求进入 /api/TaskInstanceQueue/Queue 时，它​​匹配第一个路由，因此路由数据包含 { controller = "TaskInstanceQueue", id = "Queue" }。然后系统尝试发现 Post 方法，但无法这样做，因为您没有 Post（或 PostXxx）方法，因此您的 HTTP 调用失败。

你有几个选择。一个是您可以为这个控制器放置一个显式路由（第一个）：

```
config.Routes.MapHttpRoute("API RPC Style", "api/TaskInstanceQueue/{action}", new { controller = "TaskInstanceQueue" });
config.Routes.MapHttpRoute("API Default", "api/{controller}/{id}", new {id = RouteParameter.Optional}); 
```

另一个是，如果你知道你的 ID 总是只有数字，你可以给基于 ID 的路由添加一个约束，这将导致它不匹配“队列”作为一个 ID，因此落入正确的动作 -基于路线。

# android - 如何在我的微调器中显示我的联系人数据库值？

> ID：12374659
> 
> 赞同：0
> 
> 时间：2012-09-11T17:10:48.253
> 
> 标签：android, database, spinner

在我的布局 xml 中，我有一个微调器，在我的 java 中，我有一个包含联系人和一些值的数据库，所以我想知道如何从数据库中发送或放置这些值到微调器中，所以当我单击它时，它会选择联系方式，有代码示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:17:51.400

首先从数据库中获取联系人详细信息。[您可以在http://codinglookseasy.blogspot.in/2012/08/sqlite-database.html](http://codinglookseasy.blogspot.in/2012/08/sqlite-database.html)找到数据库概念的示例代码。接下来从上面的示例中，您可能已经获得了对象的 ArrayList 并使用

```
ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
    android.R.layout.simple_spinner_item, list);
dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner2.setAdapter(dataAdapter); 
```

此处的列表可能是数据库中 ArrayList 中的数据。（将要从数据库中显示的特定字段存储到此列表中）。获取使用选择的项目

```
spinner2.getSelectedItem() 
```

它给出了选定的项目并使用从数据库中获得的 ArrayList 获取数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:25:55.357

试试看嘛

```
//Initialize  the spinner view
Spinner spinnerContact = (Spinnner) findViewById(R.id.spinner);

//Initialise List Variable
List<String> contactsList = databaseObj.getContacts;

// Create and Implement Adapter for spinner
ArrayAdapter<String> contactAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, contactsList );

//set drop down view for spinner
contactAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

//set adapter for spinner
spinnerContact.setAdapter(contactAdapter);

//select the item in spinner defaultly
spinnerContact.setSelection(position);

//get Selected Item Text from the spinner
spinnerContact.getSelectedItem(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:42:26.667

在主要活动中考虑你

```
 public class MainActivity extends Activity {

   private List<String> contactList;
    private Spinner spinnerComp;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.spinnerdemo);
       spinnerComp= (Spinner) findViewById(R.id.spinner1);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, getContacts());
    adapter                 .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    spinnerComp.setAdapter(adapter);

    spinnerComp.setSelection(0);
} 
```

现在 getContacts() 包含如下：

```
// get Contact Names
private List<String> getContacts() {
    // get Contacts
    List<Contact> contacts = DBHelper.getContacts();
    List<String> contactNames = null;
    if (contacts.size() != 0) {
        contactNames = new ArrayList<String>();
        for (Contact contact : Contacts) {
            String contactName = contact.getName();
            contactNames.add(contactName);
        }

    } 
    return contactNames;
} 
```

在 DbHelper.java 中

```
 public List<Contact> getAllContacts() {
    String sql = "SELECT * FROM " + Table.CONTACT + " ORDER BY " + 
        Contact.Column.NAME + " ASC";

    List<Contact> contacts = new ArrayList<Contact>();
    Cursor cursor = database.rawQuery(sql, null);
    while(cursor.moveToNext()) {
        Contact contact = getContactFromCursor(cursor);
        if(Contact != null) {
            contacts.add(Contact);
        }
    }
    cursor.close();

    return contacts;
}

private Contact getContactFromCursor(Cursor cursor) {
    long id = cursor.getLong(cursor.getColumnIndex(Contact.Column.ID));
    String name = cursor.getString(cursor.getColumnIndex(Contact.Column.NAME));
    long phoneNumber = cursor.getLong(cursor.getColumnIndex(Contact.Column.DATE_OF_BIRTH));
    Contact Contact = new Contact(name, phoneNumber);
    Contact.setId(id);
    return Contact;
} 
```

# php - 可读性好的错误？

> ID：12374660
> 
> 赞同：0
> 
> 时间：2012-09-11T17:10:54.337
> 
> 标签：php

如果我有一个 c1.php

```
<?php
class C1 {
    function f1($value) {
        if($value == 'ok') {
            echo "OK!";
        } else {
            throw new Exception("WRONG!");
        }
    }
}
?> 
```

和 index.php

```
<?php
require_once('c1.php');
$c = new C1();
$c->f1('ok');
$c->f1('asd');
?> 
```

谁能知道，如何构建一个可读性好的错误消息，例如“错误：您在 C:\xampp\htdocs\projekt\index.php: 第 5 行中有错误的值”而不是跟踪

```
OK!
Fatal error: Uncaught exception 'Exception' with message 'WRONG!' in
C:\xampp\htdocs\projekt\c1.php:7 Stack trace: #0 
C:\xampp\htdocs\projekt\index.php(5): C1->f1('asd') #1 {main} thrown in
C:\xampp\htdocs\projekt\c1.php on line 7 
```

那个阅读有点困难。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T17:25:23.263

捕捉异常。这就是异常的意义所在。它们是可捕获的，您可以对这些信息做一些事情（例如......仅输出消息）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T17:28:33.487

你可以这样做：

```
try {
    $c = new C1();
    $c->f1('ok');
    $c->f1('asd');
} catch(Exception $e) {
    echo 'Error: you have wrong value in ', $e->getFile(), ' on line ', $e->getLine();
    // ... code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:41:53.927

i caught it

```
try {
    ..
} catch(Exception $e) {
    //echo $e->getTraceAsString();
        $t = $e->getTrace();
        $t = $t[0];
        echo 'Error: file - ',$t['file'],' - line: ',$t['line'],
                  ' - function: ',$t['function'],'; ',$e->getMessage();
} 
```

thank you for hints.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-11T17:22:47.853

很简单，不要使用异常。当您进行尝试捕捉或特殊情况时，应该使用它们。这并非例外——这意味着仅使用 if-else 语句就不可能导致错误。

因此，只需回显您选择的错误消息即可。

# asp.net-mvc - 导出 excel 文件并在没有任何对话框的情况下保存？

> ID：12374661
> 
> 赞同：0
> 
> 时间：2012-09-11T17:10:59.517
> 
> 标签：asp.net-mvc

我正在使用响应对象导出 excel 文件，例如，

```
response.AddHeader("Content-Disposition", "attachment; filename=" + FileName + ";"); 
```

它正在打开一个对话框（打开/保存/取消）。但现在我不需要该对话框。

我想直接保存文件而不用对话框。任何机构都可以通过一些代码链接/任何帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:55:15.047

这不可能。抱歉，但是如果您打开网页并且此页面在您的硬盘上写入一些文件，您会怎么想？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T19:47:11.013

这可能会解决您的问题：

```
 Response.ClearContent();
            Response.AddHeader("Content-type", "application/vnd.ms-excel");
            Response.AddHeader("content-disposition", "attachment;filename=Export.xls");
            Response.ContentType = "application/excel";
            var swr = new StringWriter();
            var tw = new HtmlTextWriter(swr);
            grd.RenderControl(tw);
            Response.Write(swr.ToString());
            Response.Flush();
            Response.End();
            tw.Close();
            swr.Close(); 
```

# web-config - 防止 NuGet 修改 web.config？

> ID：12374662
> 
> 赞同：4
> 
> 时间：2012-09-11T17:11:00.297
> 
> 标签：web-config, nuget

我在我的网络项目/解决方案中更新了一些 nuget 包。但是，这导致了我的 web.config 文件的更新，我很确定没有任何变化。相反，nuget 去改变了我所有的回车\空格。

我该如何防止这种情况发生？需要对 web.config 进行格式化以便于人类阅读，以便部署团队可以轻松地编辑和更改值。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T10:12:25.370

Nuget 仅在包需要时修改 web.config。在这种情况下格式化重置存在一个未解决的问题，我认为该问题已得到修复。链接在这里 -

[http://nuget.codeplex.com/workitem/1511](http://nuget.codeplex.com/workitem/1511)。

[以下关于nuget 和 web.config 格式](https://stackoverflow.com/questions/9828208/nuget-and-web-config-formatting)的主题也讨论了类似的问题

# java - 使用 JSTL 和数据库中的键/值在 JSP 中进行本地化

> ID：12374664
> 
> 赞同：3
> 
> 时间：2012-09-11T17:11:08.337
> 
> 标签：java, database, jstl

我正在使用 JSP 和 Java Servlet 构建一个 Web 应用程序。目前我正在使用 JSTL fmt 使用属性文件（messages.properties）进行国际化。但是我的客户希望能够实时更新文本，所以我需要将键/值从属性文件移动到数据库。问题是我不知道如何将数据库中的文本读取到 `<fmt:message>`JSP 文件中的示例标记中。

非常欢迎任何帮助，谢谢

//沫沫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:04:20.767

`<fmt:message>`可以利用 a `LocalizationContext`which 反过来利用 a `ResourceBundle`。因此，实际上，您应该专注于如何创建`ResourceBundle`满足您需求的产品。如果您绝对必须使用数据库，也许有人已经创建了一个`ResourceBundle`实现来处理它。只要您至少使用 Java 6，要确保调查的一件事是`ResourceBundle.Control`. 事实证明，您可以继续使用属性文件，但可以自定义缓存行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:13:52.403

不与`fmt`. 您要么编写自己的标签，要么更改`fmt`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T13:24:25.307

这可能是一个解决方案吗？我没有从数据库中读取每个键/值对，而是将它们读入地图并刷新每个骑士。 [用于 java web-app 的数据库支持 i18n](https://stackoverflow.com/questions/19295/database-backed-i18n-for-java-web-app)

# c++ - 为什么 operator= 会抛出未处理的异常？

> ID：12374669
> 
> 赞同：-1
> 
> 时间：2012-09-11T17:11:18.237
> 
> 标签：c++

我只是在 Widget 中写了一个简单的 operator=，但是当我 operator= 它时，它会在 vs2010 中引发 Unhandled 异常。我在这些代码中没有看到任何错误。需要一些帮助。

```
 class WidgetImpl
    {
        public:
            WidgetImpl ( int _a, int _b, int _c ) :
                a_ ( _a ), b_ ( _b ), c_ ( _c )
            {
            };
            //WidgetImpl& operator= ( const WidgetImpl& rhs ) {    //if I define this function,everything will be allright.

            //   if ( this == &rhs ) { return *this; }
            ////
            ////.... do something

            ////
            //return *this;
            // }

            int  a_, b_, c_;
            std::vector<double> vector_;
    };

    class Widget
    {
        public:
            Widget () : pImpl_ ( NULL ) {};
            Widget ( const Widget& rhs ) {};
            Widget& operator= ( const Widget& rhs ) 
            {
                if ( this == &rhs ) { return *this; }

                *pImpl_ = * ( rhs.pImpl_ );   
                return ( *this );
            }
            void SetImp ( WidgetImpl* _Impl )
            {
                this->pImpl_ = _Impl;
            }

            WidgetImpl* pImpl_;
    };

    int main ( int argc, char** argv )
    {
        Widget w;
        WidgetImpl* wimpl = new WidgetImpl ( 1, 2, 3 );
        w.SetImp ( wimpl );
        Widget w2;
        w2 = w;  //Unhandled exception throws here

        return 0;
    } 
```

正如你在上面看到的。如果我在类 WidgetImpl 中定义 operator= 。似乎一切都好..奇怪..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T17:15:14.430

您`w2`的 's`pImpl_`为空，因此分配给它会导致未定义的行为（通常是分段违规）。

在代码中

```
 *pImpl_ = * ( rhs.pImpl_ ); 
```

LHS上`pImpl_`的 为空。

# imageresizer - ImageResizer 在大图像上崩溃

> ID：12374677
> 
> 赞同：1
> 
> 时间：2012-09-11T17:11:43.243
> 
> 标签：imageresizer

我使用了很棒的 ImageResizing 组件，在尝试上传和读取大小约为 100MB 的图像时遇到“内存不足”错误。它可能看起来很大，但我们是一台打印机，所以很多人确实需要提供这种尺寸的图像。

失败的代码行是：

ImageResizer.ImageBuilder.Current.Build(Server.MapPath(strImagePath), Server.MapPath(strThumbPath), new ResizeSettings("maxheight=" + "150"+ "&maxwidth=" + "238"));

这可能是 GDI 本身失败了，但是除了检测发生的错误并让用户知道之外，还有其他解决方法吗？

提前感谢艾尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T18:14:10.157

一个 100MB 的 jpeg 通常以位图形式解压缩到大约 8 GB。让它工作的唯一机会是获得 16 GB 的 RAM 并以 64 位模式运行该进程。

或者，您可以尝试[libvips](http://www.vips.ecs.soton.ac.uk/index.php?title=Libvips) - 它是为巨大的图像文件设计的。目前还没有 .NET 包装器，但我真的很想制作一个并进行一些 ImageResizer 集成！当然，如果没有人有兴趣资助它，它可能暂时不会发生......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-22T22:08:02.617

正如[Lilith River](https://stackoverflow.com/a/12375533/10952119)所提到的，libvips 能够以低内存需求调整大图像的大小。幸运的是，现在有一个完整的用于 .NET的[libvips绑定：](https://libvips.github.io/libvips/) [https](https://github.com/kleisauke/net-vips/) ://github.com/kleisauke/net-vips/ 。

它应该能够毫无问题地处理 100MB 的 jpeg 文件。

# objective-c - 为什么我的 NSSMutableString 可能不安全？

> ID：12374679
> 
> 赞同：2
> 
> 时间：2012-09-11T17:11:50.333
> 
> 标签：objective-c, cocoa-touch, nsmutablestring

为什么我的`NSMutableString`潜在不安全感？我搜索了这个，但找不到任何东西。

```
int hour = [number intValue] / 3600; 

NSMutableString *time = [[NSMutableString alloc] initWithString:@""];

if (hour < 9) {
    [time appendFormat:@"0"];
    [time appendFormat:[NSMutableString stringWithFormat:@"%d:", hour]];
} 
```

它出什么问题了？这是我第一次看到这种情况。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T17:13:51.187

改变这个：

```
[time appendFormat:[NSMutableString stringWithFormat:@"%d:", hour]]; 
```

对此：

```
[time appendFormat:@"%d:", hour]; 
```

该`appendFormat`方法期望您传递具有格式的字符串，而不是`NSMutableString`. 此屏幕截图显示了它：

![在此处输入图像描述](../Images/d528d4a984442f9fb571123b67fb5e04.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:21:18.230

这没有回答这里提出的问题，但看起来提供的代码正在尝试重新发明现有的格式字符串选项。

`[NSMutableString stringWithFormat:@"%02d:", hour]`将打印一个带有前导零的两位整数值。

# c# - 当您在 Windows 中运行 git push 命令时，控制台的标准输出重定向会发生什么

> ID：12374680
> 
> 赞同：4
> 
> 时间：2012-09-11T17:11:51.917
> 
> 标签：c#, console, redirectstandardoutput

我正在用 C# 构建一个自定义控制台界面 (Windows)。它只是将控制台的标准输入、输出和错误重定向到 WPF 应用程序中的文本框。在后台工作人员中，“cmd.exe”正在运行，每当它输出任何内容时，该输出都会进入文本框。

代码的一部分是这样的

```
private void SetBackgroundWorker()
{
    _worker = new BackgroundWorker { WorkerReportsProgress = true, WorkerSupportsCancellation = true };
    _worker.DoWork += (sender, args) => ReadOutput(_worker);
    _worker.ProgressChanged += (sender, args) => _window.UpdateConsole(args);
}

private void ReadOutput(BackgroundWorker worker)
{
    int count;
    var buffer = new char[1024];
    do
    {
        var builder = new StringBuilder();
        count = _process.Read(buffer, 0, 1024);
        builder.Append(buffer, 0, count);
        worker.ReportProgress(0, builder.ToString());

    } while (count > 0);
} 
```

然后，我可以在这个界面中执行“git add”、“git status”或“git commit”命令（我在 PATH 中添加了 git bin 目录的路径），但是当我尝试“git push origin master”时，文本框没有更新。我希望“'...'的用户名”和“'...'的密码”，但它永远不会发生。

当我在命令提示符下执行“git push ...”时，它会显示它们，但在我的 wpf 界面中，“cmd.exe”似乎根本没有重定向输出，我在这里迷路了

我认为我可以尝试的一件事是放弃重定向，并使用 Windows api 来挂钩 cmd.exe，但它会更复杂。

如果您能给我建议，我将不胜感激。

如果您想查看完整代码并对其进行测试，代码位于[https://github.com/andrewchaa/ConsolePlus](https://github.com/andrewchaa/ConsolePlus)。它处于一个非常原始的阶段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T17:42:22.903

我想这是应用程序正在使用像[WriteConsole](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687401%28v=vs.85%29.aspx)这样直接写入屏幕缓冲区的东西，没有办法拦截它——尤其是标准输出/标准错误重定向。我现在不具体说 git 应用程序在做什么；但它确实经常使用颜色，这似乎需要使用像[SetConsoleTextAttribute](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686047%28v=vs.85%29.aspx)这样也直接处理屏幕内存的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-09T13:20:17.890

似乎 git.exe 将其输出写入 stdErr。

# c# - “CrystalDecisions.Shared.SharedUtils”的类型初始值设定项引发异常

> ID：12374681
> 
> 赞同：7
> 
> 时间：2012-09-11T17:12:02.433
> 
> 标签：c#, visual-studio-2010, crystal-reports-xi, unhandled-exception

我正在做一个项目并且遇到了问题。当我运行我的代码时，我收到此错误消息：

```
The type initializer for 'CrystalDecisions.Shared.SharedUtils' threw an exception 
```

消息的标题是“TypeInitializerException was unhandled”。

我在这行代码中收到此错误：

```
this.crystalReportViewer = new CrystalDecisions.Windows.Forms.CrystalReportViewer(); 
```

我一直在寻找解决此问题的方法，但我一直遇到另一个问题。我找到的有关如何解决此问题的所有信息都表明平台目标应更改为 x86。遵循该建议的所有评论总是积极的，因为它似乎对每个人都有效，但对我不起作用。我还尝试将平台目标设为 x64。当我这样做时，我没有收到前面提到的错误，而是收到一个新错误，内容如下：

```
The 'Microsoft.ACE.OLEDB.12.0' provider is not registered on the local machine. 
```

*此*消息的标题是“InvalidOperationException was unhandled”。错误就在这一行：

```
db.Open(); 
```

db，当然，被设置为一个新的 OleDbConnection(connection)。连接 = 一个访问数据库。

为什么当平台目标是 x86 时收到第一个错误而不是第二个错误，如果平台目标是 x64，反之亦然？

堆栈跟踪：

```
System.TypeInitializationException was unhandled
  Message=The type initializer for 'CrystalDecisions.Shared.SharedUtils' threw an exception.
  Source=CrystalDecisions.Shared
  TypeName=CrystalDecisions.Shared.SharedUtils
  StackTrace:
       at CrystalDecisions.Shared.SharedUtils.get_CurrentControl()
       at CrystalDecisions.Shared.SharedUtils.GetEffectiveCulture()
       at CrystalDecisions.Shared.LocaleManager..ctor()
       at CrystalDecisions.Windows.Forms.CrystalReportViewer.InitReportViewer()
       at CrystalDecisions.Windows.Forms.CrystalReportViewer..ctor()
       at Client_Manager.ReportViewer.InitializeComponent() in C:\Users\Will\Desktop\Client_Manager\SyndicateII\ReportViewer.Designer.cs:line 31
       at Client_Manager.ReportViewer..ctor() in C:\Users\Will\Desktop\Client_Manager\SyndicateII\ReportViewer.cs:line 27
       at Client_Manager.Form1..ctor() in C:\Users\Will\Desktop\Client_Manager\SyndicateII\Form1.cs:line 174
       at Client_Manager.Program.Main() in C:\Users\Will\Desktop\Client_Manager\SyndicateII\Program.cs:line 18
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: System.BadImageFormatException
       Message=Could not load file or assembly 'log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=692fbea5521e1304' or one of its dependencies. An attempt was made to load a program with an incorrect format.
       Source=CrystalDecisions.Shared
       FileName=log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=692fbea5521e1304
       FusionLog==== Pre-bind state information ===
LOG: User = Will-PC\Will
LOG: DisplayName = log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=692fbea5521e1304
 (Fully-specified)
LOG: Appbase = file:///C:/Users/Will/Desktop/Client_Manager/SyndicateII/bin/Debug/
LOG: Initial PrivatePath = NULL
Calling assembly : CrystalDecisions.Shared, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Users\Will\Desktop\Client_Manager\SyndicateII\bin\Debug\Client_Manager.vshost.exe.config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Post-policy reference: log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=692fbea5521e1304
LOG: Attempting download of new URL file:///C:/Users/Will/Desktop/Client_Manager/SyndicateII/bin/Debug/log4net.DLL.
ERR: Failed to complete setup of assembly (hr = 0x8007000b). Probing terminated.

       StackTrace:
            at CrystalDecisions.Shared.SharedUtils..cctor()
       InnerException: 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T17:38:32.313

这看起来像原来的问题：

```
InnerException: System.BadImageFormatException
   Message=Could not load file or assembly 'log4net, Version=1.2.10.0,
        Culture=neutral, PublicKeyToken=692fbea5521e1304'
   or one of its dependencies. An attempt was made to load a program
   with an incorrect format. 
```

因此，如果 log4net 具有用于不同架构的多个版本*，*您可能使用了错误版本的 log4net，*或者*您只是错误地复制了程序集。这部分日志似乎也很相关：

 *```
LOG: Attempting download of new URL
file:///C:/Users/Will/Desktop/Client_Manager/SyndicateII/bin/Debug/log4net.DLL.
ERR: Failed to complete setup of assembly (hr = 0x8007000b). Probing terminated. 
```

看起来这是您需要检查正确性的文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T10:58:54.473

它可能对某人有用：如果您可以选择这样做，请转到 IIS 并将应用程序池设置为仅 32 位应用程序。

这对我来说是个窍门。

（当然，您的应用程序可以只在 64 位上运行。在这种情况下，我认为安装 CrystalReports 的 64 位可再发行组件应该可以解决问题）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-04T16:46:27.447

您应该为 .Net 4.0 安装**SAP Crystal Reports 运行时**

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-07T23:34:03.103

我遇到过同样的问题。在 64 位服务器上运行的 32 位应用程序。我已经安装了 64 位运行时并且抛出了上述异常。安装 32 位版本后，一切都按预期工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-29T23:58:33.267

我为这个错误所做的是安装 CrystalReport Runtime。它似乎缺少一些 dll。查看此帖子以获取[适用于 .Net 4.0 (64-bit) 的 SAP Crystal Reports 运行时](https://stackoverflow.com/questions/6591923/sap-crystal-reports-runtime-for-net-4-0-64-bit)包。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-08T15:22:17.910

确保为您的环境安装了正确的版本，它尝试使用 64 位安装程序而不是 32 位安装程序，因为它们都可以正常安装，但错误的安装程序会导致上述错误。

我遇到了完全相同的问题并安装了 64 位版本而不是为我解决了问题

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-20T06:23:44.530

我在水晶报告中遇到了同样的问题，我只是更改了平台目标“**任何 CPU** ”，如下面的屏幕截图所示。 ![在此处输入图像描述](../Images/ae276f7a58c65b47e985d78972594475.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-25T21:27:36.353

您应该安装适用于 .Net Framework 的 Crystal Reports 运行时引擎和适用于 Microsoft Visual Studio 的 Crystal Reports。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-09T19:23:43.380

**我解决**了更改**应用程序池身份**的问题，使用本地配置文件和管理员登录（看看密码是否过期）。

症状相似。我认为**Log4net**弹出是因为 Crystal 想要记录已经发生的错误。我的项目中没有任何 log4net，也没有 dll 文件。

我的项目是在 64 位服务器上使用 AnyCpu 编译的，并且我已经安装了 CRRedist x86 x64。

我也尝试在 32 位模式下运行而不做任何更改。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-07T18:31:38.067

根据您安装的版本，如果您只安装了 32 位版本，则必须编译到 x86，或者如果您只安装了 64 位版本，则必须在 x64 上编译，如果您同时安装了两个版本，则必须在 x64 上编译任何CPU。

如果你在 anycpu 上编译，但在 pc 上你有 32 位版本，它会向你发送一个错误。

干杯

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-04-08T10:00:40.100

正如其他人已经发现的那样：这可能是由于运行时不匹配（x86 / x64）而发生的。在为 x86 架构强制构建我的应用程序后，错误已修复。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-01-03T03:45:18.780

这个问题是水晶报表的驱动程序没有安装在客户端，它们在水晶报表的主目录和子文件夹中，命名为水晶.forms和水晶.shared和水晶支持等*

# php - 如何将 jQuery/AJAX 结果放入表格单元格

> ID：12374685
> 
> 赞同：0
> 
> 时间：2012-09-11T17:12:13.370
> 
> 标签：php, javascript, jquery, mysql, ajax

我在这里有这个脚本，它输出 sql db 查询的结果，但我不知道如何让它把结果放在指定的表格单元格中。

这是查询：

```
<script type="text/javascript">

$(document).ready(function(){
$('.typeval').change(function(){
    var movement =  $(this).val();
    var client_id = $(this).parent().siblings().find('.clientval').val();
    var class_id = <? echo $class_id; ?>;

$.ajax({ 
  type: "POST",
  url: "movement_count.php",
  data: {movement:movement, client_id:client_id, class_id:class_id},
  dataType: "json", 
  success:(function(output) {

      $.each(output, function(index, value){
      alert(value);
      $(".count").append(output[value]);
      }) // each

   }) // success

  }); // ajax

  }); // .typeval

});  // document

</script> 
```

我想把这个（值）的结果：

```
alert(value); 
```

进入这里：

```
<td><label class="count"></label></td> 
```

`<td>`我的目标与触发结果的菜单位于同一行`<select>`。还会有多个表格行与这个完全相同的单元格`<td>`。所以我`<td>`只需要以某种方式定位这一行。有人可以帮我弄这个吗？我不确定我是否需要，`$.each`但我的 php 查询是一个`mysql_fetch_row`数组，即使返回的值总是只有一个数字。

这是我需要的表格单元格的 HTML 标记`value`：

```
<td><label class="count"></label></td> 
```

JS源代码`class=count`：

```
$(".count").append(output[index]); 
```

**它的工作！！！！**这是下面的代码

```
$(document).ready(function(){
$('.typeval').change(function(){
    var movement    =  $(this).val();
    var client_id   = $(this).parent().siblings().find('.clientval').val();
    var class_id    = <? echo $class_id; ?>;
        $count      = $(this).parents('tr').find('label.count');

$.ajax({ 
  type: "POST",
  url: "movement_count.php",
  data: {movement:movement, client_id:client_id, class_id:class_id},
  dataType: "json", 
  success:(function(output) {

      $.each(output, function(index, value){
      //alert(value);
      $count.append(output[index]);
      }) // each

   }) // success

}); // ajax

}); // .typeval

});  // document 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:19:52.903

替换这个

```
$("label.count<?php echo $client_id; ?>").append(output[value]); 
```

和

```
$("label.count<?php echo $client_id; ?>").append(value); 
```

或者与此交替

```
$("label.count<?php echo $client_id; ?>").append(output[index]); 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T20:28:02.213

**工作代码：**

```
$(document).ready(function(){
   $('.typeval').change(function(){
    var movement    =  $(this).val();
    var client_id   = $(this).parent().siblings().find('.clientval').val();
    var class_id    = <? echo $class_id; ?>;
        $count      = $(this).parents('tr').find('label.count');

 $.ajax({ 
  type: "POST",
  url: "movement_count.php",
  data: {movement:movement, client_id:client_id, class_id:class_id},
  dataType: "json", 
  success:(function(output) {

      $.each(output, function(index, value){
      //alert(value);
      $count.append(output[index]);
      }) // each

   }) // success

}); // ajax

}); // .typeval

});  // document 
```

# php - 在 PHP 5.2x 中“销毁”一个函数

> ID：12374686
> 
> 赞同：0
> 
> 时间：2012-09-11T17:12:21.703
> 
> 标签：php, function, include, overriding, destroy

> **可能重复：**
> [在 PHP 运行时删除函数](https://stackoverflow.com/questions/2120044/removing-a-function-at-runtime-in-php)

我有一个脚本，它在运行时包含不同的文件。这些文件都包含同名的函数。我只需要当前包含的存在。有什么方法可以启用动态文件，因此不会导致致命错误：无法重新声明函数（）？换句话说，我需要重命名或删除以前的函数。

该函数以经典方式声明 function fn(){;}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:15:48.483

```
if (!function_exists('myFunction')) {
    function myFunction() {
        ....
    }
} 
```

只会定义加载的函数的第一个版本，但除非您使用[runkit](http://www.php.net/manual/en/book.runkit.php)或[apd](http://www.php.net/manual/en/book.apd.php)扩展（或类似），否则您不能重命名或删除函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T17:15:53.747

您应该将您的函数包装在“function_exists”检查中：

```
if (!function_exists('my_func')){

  function my_func(){
    //...
  }

} 
```

你可以在这里找到更多细节：http: [//php.net/manual/fr/function.function-exists.php](http://php.net/manual/fr/function.function-exists.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T17:49:59.747

与其每个文件都定义一个同名的顶级函数，不如考虑使用一个非常简单的 OO 结构：

假设你有这样的事情：

```
switch ( $some_condition )
{
    case 'normal':
    default:
        include_once 'normal_function.php';
    break;
    case 'special':
        include_once 'special_function.php';
    break;
    case 'secret':
        include_once 'secret_function.php';
    break;
}

do_the_action(); 
```

你可以用这样的东西替换它：

```
switch ( $some_condition )
{
    case 'normal':
    default:
        include_once 'normal_class.php';
        $handler_object = new Normal_Class();
    break;
    case 'special':
        include_once 'special_class.php';
        $handler_object = new Special_Class();
    break;
    case 'secret':
        include_once 'secret_class.php';
        $handler_object = new Secret_Class();
    break;
}

$handler_object->do_the_action(); 
```

然后在每个包含的文件中，您将定义一个包含该函数的类，而不是一个函数，如下所示：

```
class Normal_Class
{
    public function do_the_action()
    {
        // Implementation for normal case goes here 
    }
} 
```

这不仅解决了您的问题，还让您走上了学习其他高级/OO PHP 技术的道路 - 自动加载文件，这样您就不必`include_once`每次都指定，定义层次结构和接口等。

# objective-c - 跟踪一个 ccsprite cocos2d-iphone

> ID：12374687
> 
> 赞同：0
> 
> 时间：2012-09-11T17:12:26.367
> 
> 标签：objective-c, cocos2d-iphone

我有一个带有简单黑色甜甜圈精灵的图层。我希望用户能够以不同的颜色在精灵上绘制（我已经使用 CCRenderTexture 成功地做到了这一点）。

我的问题是如何计算图像是否至少被追踪了 95%（意思是，找出 95% 的黑色像素现在是新颜色的时间）。我尝试过诸如截取图层截图并计算黑色像素数量的方法，但效果不佳（使用此解决方案：[https](https://stackoverflow.com/a/1262893/1577738) ://stackoverflow.com/a/1262893/1577738 ）。

如果我可以在每个像素被触摸时更改它的颜色，那就更好了（以避免着色超出线条的问题）。理论上，我可以将甜甜圈分成 10 个精灵，并在用户触摸它时更改该部分的颜色，但如果我让用户选择使用一堆不同的颜色，这似乎很荒谬。

我会以错误的方式解决这个问题吗？非常感谢您的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T21:14:25.937

读取像素颜色会相当不准确和缓慢。我建议将该区域划分为较小的矩形（即 8x8 或 4x4），然后在用户在其上绘制时将每个区域标记为“已访问”。如果大多数矩形区域被标记，则用户已在纹理的大部分部分上绘制。

# lucene - 如何处理多个IndexWriter和多个跨进程IndexWriter

> ID：12374688
> 
> 赞同：6
> 
> 时间：2012-09-11T17:12:26.643
> 
> 标签：lucene, lucene.net

我在谷歌上搜索了两天......我真的需要帮助。

我有一个具有多个线程的应用程序，尝试使用 Open/Close 更新 lucene 索引以`IndexWriter`进行每次更新。线程可以随时启动。

是的，有问题`write.lock`！所以可能有两种或多种解决方案：

1）检查`IndexWriter.IsLocked(index)`它是否被锁定以休眠线程。
2）打开一个`IndexWriter`，永远不要关闭它。问题是我有另一个使用相同索引的应用程序。另外我应该什么时候关闭索引并完成整个过程？

这里有有趣的帖子
[Lucene IndexWriter 线程安全](https://stackoverflow.com/questions/5899777/lucene-indexwriter-thread-safety)
[Lucene - 打开一个封闭的 IndexWriter](https://stackoverflow.com/questions/3865183/lucene-open-a-closed-indexwriter?rq=1)

**更新：整整 2 年后，我做了一个包含**[此](https://github.com/NielsKuhnel/NrtManager) API 的 rest API，所有写入和读取都被路由到 API。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T18:04:23.853

多个线程，相同的进程：

保持`IndexWriter`打开状态，并跨多个线程共享它。`IndexWriter`是线程安全的。

对于多个进程，您的解决方案 #1 容易出现竞争条件问题。您需要使用命名`Mutex`来安全地实现它：http: [//msdn.microsoft.com/en-us/library/bwe34f1k.aspx](http://msdn.microsoft.com/en-us/library/bwe34f1k.aspx)

话虽如此，我个人会选择专用于写入索引的进程，并使用 WCF 之类的东西与之通信。

# c++ - yaml-cpp 遍历未定义值的地图的最简单方法

> ID：12374691
> 
> 赞同：18
> 
> 时间：2012-09-11T17:12:48.803
> 
> 标签：c++, yaml-cpp

我想在不知道键的情况下获取地图中的每个节点。

我的 YAML 看起来像这样：

```
characterType :
 type1 :
  attribute1 : something
  attribute2 : something
 type2 :
  attribute1 : something
  attribute2 : something 
```

我不知道将声明多少个“类型”或这些键的名称。这就是我尝试遍历地图的原因。

```
struct CharacterType{
  std::string attribute1;
  std::string attribute2;
};

namespace YAML{
  template<>
  struct convert<CharacterType>{
    static bool decode(const Node& node, CharacterType& cType){ 
       cType.attribute1 = node["attribute1"].as<std::string>();
       cType.attribute2 = node["attribute2"].as<std::string>();
       return true;
    }
  };
}

---------------------
std::vector<CharacterType> cTypeList;

for(YAML::const_iterator it=node["characterType"].begin(); it != node["characterType"].end(); ++it){
   cTypeList.push_back(it->as<CharacterType>());
} 
```

前面的代码在编译时没有任何问题，但是在执行时我得到了这个错误：在抛出一个实例后调用终止`YAML::TypedBadConversion<CharacterType>`

我也尝试过使用子索引而不是迭代器，得到了同样的错误。

我确定我做错了什么，我只是看不到它。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-11T17:43:43.000

当您遍历映射时，迭代器指向节点的键/值对，而不是单个节点。例如：

```
YAML::Node characterType = node["characterType"];
for(YAML::const_iterator it=characterType.begin();it != characterType.end();++it) {
   std::string key = it->first.as<std::string>();       // <- key
   cTypeList.push_back(it->second.as<CharacterType>()); // <- value
} 
```

（即使您的节点是映射节点，您的代码编译的*原因*`YAML::Node`是它是有效的动态类型，因此它的迭代器必须（静态地）充当序列迭代器和映射迭代器。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-08T12:54:06.413

@jesse-beder 的答案是正确的，我提供了另一种选择，使用基于范围的 for 循环，如下所示：

```
for(const auto& characterType : node["characterType"]) {
   std::string key = characterType.first.as<std::string>();
   cTypeList.push_back(characterType.second.as<CharacterType>());
} 
```

# python - python 继续，除非条件不满足

> ID：12374694
> 
> 赞同：8
> 
> 时间：2012-09-11T17:12:57.687
> 
> 标签：python, try-catch

我经常发现自己想做这样的事情，我有一些东西包含在尝试中，除了这样

```
item= get_item()
try:
    do_work(item)
except SomeError as err:
    if err.code == 123:
        do_something(item)
    else:
        # Actually I don't want to do something with this error code... I want to handle in 'except'
except:
    put_back(item)
    raise 
```

有没有办法`except`从其他地方提升到下面的街区？（a`continue`会很好）我​​最终做了类似下面的事情，但不是那么干净

```
item= get_item()
try:
    try:
        do_work(item)
    except SomeError as err:
        if err.code == 123:
            do_something(item)
        else:
            raise
 except:
     put_back(item)
     raise 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T17:16:02.903

如果您使用的是最新的 Python 版本（2.5 及更高版本），则应改用[上下文管理器](http://docs.python.org/reference/datamodel.html#context-managers)：

```
class WorkItemContextManager(object):
    def __enter__(self):
        self.item = get_item()
        return self.item

    def __exit__(self, exc_type, exc_value, tb):
        if exc_type is not None:
            if exc_type is SomeError and exc_value.code == 123:
                do_something(self.item)
                return True  # Exception handled
            put_back(self.item) 
```

然后：

```
with WorkItemContextManager() as item:
    do_work(item) 
```

`__exit__`如果处理了异常，该方法可以返回 True；返回 None 将改为重新引发`with`块中引发的任何异常。

如果没有，您正在寻找一个`finally`块：

```
item = get_item()
try:
    do_work(item)
    item = None
except SomeError as err:
    if err.code == 123:
        do_something(item)
        item = None
finally:
    if item is not None:
        put_back(item) 
```

该`finally`套件保证在`try:`套件完成*或*发生异常时执行。通过设置`item`给`None`你基本上告诉`finally`套件一切都完成了就好了，不需要把它放回去。

处理程序从您的`finally`毯子处理程序接管`except`。如果 中出现异常`do_work`，`item`则不会设置为 None。如果`SomeError`处理程序没有捕获到异常，或者`err.code`不是123，也不会设置为 None，因此该*方法*被执行。`item``put_back(item)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T17:31:31.040

我的建议是创建一个函数（或一系列函数）来包装您想要控制的抛出错误的方法。就像是...

```
def wrapper(arg):
    try:      
        do_work(arg)
    except SomeError as e:
        if e.code == 123:
           do_something(item)
           # Other possible cleanup code
        else:
           raise 
```

...然后，当您想调用它时...

```
try:
    wrapper(arg)
except SomeError as e:
    put_back(arg) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-02T18:52:31.407

上下文管理器非常好，但是对于一些您不会在其他任何地方重用逻辑的简单情况，它们可能有点重。

`except`您可以在单个块内测试异常，而不是尝试拥有多个块`except`：

```
item= get_item()
try:
    do_work(item)
except Exception as err:
    if isinstance(err, SomeError) and err.code == 123:
        do_something(item)
    else:
        put_back(item)
        raise 
```

请注意，无论如何，这几乎就是上下文管理器的`__exit__`方法最终的样子。

请注意，真正属于其中的代码`finally`不会在这里结束。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T17:24:42.457

最好记住 try-except 流的用途，它们的优点之一是它们不需要状态变量和状态检查，例如

```
if not foo:
    # do something 
```

此外，Exception 类应该代表一种特定类型的错误。如果您需要对 except 块中的错误类型做出进一步决定，这是一个好兆头，表明该类不够具体，无法表示程序状态。你最好的选择是继承 SomeError 并且只在第一个 except 中捕获子类。然后 SomeError 的其他实例将落入第二个 except 块。

# php - 即使我设置了 cookie，会话变量上的未定义索引

> ID：12374698
> 
> 赞同：0
> 
> 时间：2012-09-11T17:13:10.383
> 
> 标签：php

我正在尝试将 cookie 设置为 php 会话变量，以便会话不会过期 2 个月。我遇到的问题是，大约 3 小时后，当我刷新页面时，我`$_SESSION['id']`在第 30 行得到一个未定义的索引。但我没有`$_SESSION['id']`在第 20-23 行之间得到未定义的索引。

为什么即使我为此会话变量设置了 cookie，我仍然会得到未定义的索引？

```
$inTwoMonths = 60 * 60 * 24 * 60 + time();
    setcookie('id', 'ID', $inTwoMonths);

    //line 20-23
    if (isset($_POST['id'])) {

    $_SESSION['id'] = $_POST['id'];

    }

    //line 30
    <?php echo $_SESSION['id'] ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:29:49.910

会话！= 饼干。

您必须在 php.ini 中设置 SESSION TTL（默认为 20 分钟）。

在第 20-23 行你没有得到未定义的索引，因为你设置了 var。但是在第 30 行，您尝试读取未定义的变量（因为您之前没有设置它。）

尝试这样的事情：

```
$_SESSION['id'] = $_COOKIE['id']; 
```

您还需要使用 session_start(); 启动会话。

# objective-c - NSMutableDictionary 与不可复制的 UIView 键（使用 CFDictionary）在 iOS SDK 6 上崩溃，但在 5.1 上正常

> ID：12374706
> 
> 赞同：2
> 
> 时间：2012-09-11T17:13:34.820
> 
> 标签：objective-c, nsmutabledictionary, ios6

所以我使用 TLMutableDictionaryNoncopiedKeys 类别来找到[这里](http://www.cocoabuilder.com/archive/cocoa/214295-storing-values-in-dictionary-with-their-address-as-the-key.html)的 NSMutableDictionary ，它允许使用不可复制的对象作为字典的键（我需要对象到对象的映射）。一切都很好，直到我被告知应用程序在 iOS 6 中崩溃。所以我下载了带有 iOS 6 的 XCode 4.5 进行测试，似乎 CFDictionary 函数存在一些问题。如果我将 UIView 作为键（在我的类别方法中）传递，它会崩溃：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIView copyWithZone:]: unrecognized selector sent to instance 0x719ff70' 
```

来自 AppCode 调试器的更多详细信息：

```
objc_exception_throw
-[NSObject(NSObject) doesNotRecognizeSelector:]
__forwarding__
_CF_forwarding_prep_0
-[__NSDictionaryM setObject:forKey:]
-[NSMutableDictionary __addObject:forKey:]
CFDictionaryAddValue
-[NSMutableDictionary(TLMutableDictionaryNoncopiedKeys) setObject:forUncopiedKey:] 
```

我做了一个测试项目。它适用于 iOS 5.1 模拟器，但在 6 时崩溃。

任何人都可以对此有所了解吗？

完整的项目在[这里](https://www.dropbox.com/s/djqgh7h79v3zsew/DictionaryTest.zip)。以下是一些清单：

类别：

```
#import <Foundation/Foundation.h>

@interface NSMutableDictionary (TLMutableDictionaryNoncopiedKeys)

- (void)setObject:(id)anObject forUncopiedKey:(id)aKey;

@end

----------------------------------------------------------------------

#import "NSMutableDictionary+TLMutableDictionaryNoncopiedKeys.h"

@implementation NSMutableDictionary (TLMutableDictionaryNoncopiedKeys)

- (void)setObject:(id)anObject forUncopiedKey:(id)aKey
{
    CFMutableDictionaryRef selfCF = (CFMutableDictionaryRef)self;
    Boolean keyAlreadySet = CFDictionaryContainsKey(selfCF, aKey);
    if (keyAlreadySet) {
        CFDictionaryReplaceValue(selfCF, aKey, anObject);
    }
    else {
        CFDictionaryAddValue(selfCF, aKey, anObject);
    }
}

@end 
```

用法：

```
#import "NSMutableDictionary+TLMutableDictionaryNoncopiedKeys.h"
...
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
UIView *key = [[UIView alloc] init];
[dict setObject:key forUncopiedKey:key]; 
```

# jquery - jQuery div 间歇性显示 div

> ID：12374715
> 
> 赞同：1
> 
> 时间：2012-09-11T17:14:17.153
> 
> 标签：jquery, html

我需要一点帮助......我有这个代码：

```
<div id="lyrics">
    <div id="lyricsClose"></div>
    <div id="ajax-content"></div>
</div> 
```

id**歌词和歌词关闭**是隐藏的。我基本上想要一个显示歌词的覆盖 div，顶部有一个关闭按钮，右侧。因此，使用 jQuery：

```
$(document).ready(function() {
$('[id^=showContent]').click(function(e) {
    e.preventDefault(); // Prevent link acting as link
    $("body").append("<div id='lyricsOverlay'></div>");
    $("#lyricsOverlay").height($(document).height());
    $('#lyrics').css("display", "table"); 
        $('#lyrics').hover(function() {
            $('#lyricsClose').toggle();
        });         
        $('#lyrics').mouseleave(function() {
            $('#lyricsClose').css("display", "none");
        });
    $('#lyrics').show(); // Show content layer
    $('#lyricsOverlay').click(function() { 
            $('#lyrics').hide();
            $('#lyricsOverlay').remove();
        });     
    $('#lyricsClose').click(function() { 
            $('#lyrics').hide();
            $('#lyricsOverlay').remove();
        });
    });
}) 
```

点击时：

工作正常，但是，只是有时。第一次点击完美，第二次歌词关闭 div 消失并且不显示。第三次又OK，第四次KO，...

我想我的 jQuery 代码出了点问题……不知道它是什么……

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:25:26.217

如果您使用 jQuery >= 1.7，请使用以下委托：

```
$('[id^=showContent]').click(function(e) { 
```

改成：

```
$(document).on("click","[id^=showContent]",function(e){ 
```

...这并不能回答问题，但鉴于此处的信息，应该可以解决问题。而不是 $(document)，我通常更喜欢一个内部容器，但它包含触发点击事件的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:40:29.117

你不断地重新绑定`hover`和`mouseleave`事件。当`hover`事件调用`toggle`它时，它会为每个绑定调用它，从而模拟先前的执行。

*   第二次显示，隐藏
*   第三次显示，隐藏，显示
*   第四次它显示，隐藏，显示，隐藏

在重新绑定之前取消绑定事件应该可以修复它。

```
$('#lyrics').unbind("hover").hover(function() {
    $('#lyricsClose').toggle();
});

$('#lyrics').unbind("mouseleave").mouseleave(function() {
    $('#lyricsClose').css("display", "none");
}); 
```

另外，由于您已经设置了显示值`#lyrics` `.show()`是多余的。

```
/// not needed because as soon as you set above display to table it becomes visible
$('#lyrics').show(); // Show content layer 
```

### [演示](http://jsfiddle.net/FranWahl/mdhY8/)- 在重新绑定之前取消绑定

# javascript - javascript虚拟键盘

> ID：12374716
> 
> 赞同：-2
> 
> 时间：2012-09-11T17:14:18.180
> 
> 标签：javascript, keyboard

我是一名 java 开发人员，并且是 javascript 的大佬，正在寻找一个 javascript 虚拟键盘，找到了这个：http: [//fiddle.jshell.net/FEaSC/show/](http://fiddle.jshell.net/FEaSC/show/) 复制了我的电脑中的源代码，我没有知道为什么当我双击具有下载代码的 html 时键盘是不可见的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:16:35.380

您可能需要更正 JavaScript 文件的路径或将其保存在本地。

# scripting - 我正在尝试在 Go 中编写一个简单的脚本，但得到了错误的解释器：权限被拒绝错误

> ID：12374718
> 
> 赞同：0
> 
> 时间：2012-09-11T17:14:30.490
> 
> 标签：scripting, go

我正在尝试在 Go 中编写脚本，但出现此错误：

> 糟糕的解释器：权限被拒绝

我的超级简单脚本如下：

```
#!/usr/local/Cellar/go/1.0.2/bin  
fmt.Println("Hello World") 
```

我不知道这是否可能，但我真的很想用 Go 编写脚本，因为我非常喜欢这种语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:16:23.007

Go 不是脚本语言。就像在 C 中一样，您必须编译源代码才能生成可执行文件。

从[“入门”](http://golang.org/doc/install)：

> 创建一个名为 hello.go 的文件并将以下程序放入其中：

```
package main

import "fmt"

func main() {
    fmt.Printf("hello, world\n")
} 
```

> 然后使用 go 工具运行它：

```
$ go run hello.go
hello, world 
```

本着 Python 的精神，有人尝试让 Go 脚本成为可能。例如，您可以使用[gorun](https://wiki.ubuntu.com/gorun)执行以下操作：

```
#!/usr/bin/gorun

package main

func main() {
    println("Hello world!")
} 
```

但这并不是 Go 的真正逻辑，而且不像您在问题中键入的内容那么简单。

# iphone - 如何从非 UIViewController 显示 modalView

> ID：12374719
> 
> 赞同：0
> 
> 时间：2012-09-11T17:14:31.187
> 
> 标签：iphone, objective-c, modalviewcontroller

我创建了一个单独的类来处理从 SqlServer 加载数据。现在我将搜索词传递给对象，它会搜索数据库中的项目。

如果它发现不止一个项目，它需要呈现一个 modalviewcontroller。问题是这是一个 NSObject 并且不知道如何呈现模态视图。

如何从 NSObject 呈现 modalviewcontroller？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:24:55.913

尝试将模态呈现委托给视图控制器 - 通过在重复项上发布通知（为您提供视图控制器呈现的灵活性）或定义委托协议。这将使您的模型与您的视图分开，保留您的应用程序的 MVC 架构。

编辑：在我看来，使用块进行委派是一种很好的方法。我只会调整您的 API 以在重复的情况下执行一个块，并让您的模式采用另一个块来处理许多选择。这可能会给你最大的灵活性。

EDIT2：根据对您当前 API 的理解，我建议这样做：

```
- (void)searchForItemWithString:(NSString *)searchString completionBlock:(librarianDidSelectItemBlock)block multiSelectBlock:(librarianMultiSelectBlock); 
```

此外，我会设计您的模态视图控制器以获取完成块。

# oauth - 什么是 Youtube OAuth 2.0 用户令牌有效期？

> ID：12374724
> 
> 赞同：3
> 
> 时间：2012-09-11T17:15:06.040
> 
> 标签：oauth, oauth-2.0, youtube-api

我阅读了 Youtube 开发者网站上的文档，它没有谈论任何有效性。
OAuth 2.0 标准是否定义了任何有效期，或者授权令牌在用户手动撤销之前是否有效？[OAuth 规范](http://www.ietf.org/mail-archive/web/oauth/current/msg04553.html)
定义令牌应 在授予后不久过期，那么它会在我获得访问和刷新令牌后过期吗？我可以将此访问令牌用于所有未来的 API 请求还是需要定期获取新令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:31:00.240

我假设您在谈论**授权代码**，您在这里混合了一些术语。

来自[OAuth 2.0 草案](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-4.1.2)：

> 授权代码必须在发布后不久过期，以降低泄漏风险。建议的最大授权代码生命周期为 10 分钟。客户端不得多次使用授权码。如果一个授权码被多次使用，授权服务器必须拒绝该请求并且应该（如果可能的话）撤销之前基于该授权码发布的所有令牌。

使用一次获取**访问令牌**后，不能再次使用。您也不需要定期检索**授权码。**仅当您没有用户的**访问令牌**但想要请求他的数据时，您才这样做。

您的**访问令牌**有时会过期。您可以通过查看`expires_in`随它发送的值，或者通过向 API 发出请求并返回*访问令牌过期*错误来了解何时。然后，您可以使用**刷新令牌**获取新的**访问令牌**，而无需用户参与。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-09T19:10:32.790

Very useful step-by-step guide about how to get access and fresh tokens and save them for future use using YouTube OAuth API v3\. [PHP server-side YouTube V3 OAuth API video upload guide](https://www.domsammut.com/code/php-server-side-youtube-v3-oauth-api-video-upload-guide). The good thing is, you do not need to worry about the expiry of the tokens, as the script in this guide checks, saves, and updates the token in a txt file for future access.

```
{"access_token":"XXXXXXXXX","token_type":"Bearer", "expires_in":3600, "refresh_token":"XXXXXXX", "created":000000} 
```

We use at [http://presentationtube.com](http://presentationtube.com) and it works fine with thousands of users.

# curl - 带有 https 的 lib cCURL 引发错误

> ID：12374726
> 
> 赞同：2
> 
> 时间：2012-09-11T17:15:31.177
> 
> 标签：curl, https, libcurl

我编写了 C curl 应用程序代码来测试我的服务器 TLS 连接，使用我自己的证书和使用 AES-ECC-CCM 芯片套件的自己的服务器设置。但我在客户端收到错误，因为 curl 无法加载给定的芯片套件。因此在这里我放了我的代码..我是否遵循正确的方法在客户端选择芯片套件..？并且代码是正确的..？

```
CURL *curl;
CURLcode res;
FILE *headerfile;
const char *pPassphrase = NULL;

static const char *pCertFile = "/root/rev/mysert.der";
static const char *pCACertFile="/root/rev/cacert.der";

const char *pKeyName;
const char *pKeyType;

const char *pEngine;

pKeyName  = "/root/rev/testkey.der";
pKeyType  = "DER";

headerfile = fopen("dumpit", "w");

curl_global_init(CURL_GLOBAL_DEFAULT);

curl = curl_easy_init();
if(curl) {
 /* what call to write: */ 
curl_easy_setopt(curl, CURLOPT_URL, "https://192.168.1.121/test");
curl_easy_setopt(curl, CURLOPT_WRITEHEADER, headerfile);

while(1)                    /* do some ugly short cut... */ 
{

   /*SET THE CIPHER TO ECC-CCM */
   **curl_easy_setopt(curl,CURLOPT_SSL_CIPHER_LIST,"TLS_ECDHE_ECDSA_WITH_AES_128_CCM");**
  curl_easy_setopt(curl,CURLOPT_SSLCERTTYPE,"DER");

  /* set the cert for client authentication */ 
  curl_easy_setopt(curl,CURLOPT_SSLCERT,pCertFile);

  /* sorry, for engine we must set the passphrase
     (if the key has one...) */ 
  if (pPassphrase)
    curl_easy_setopt(curl,CURLOPT_KEYPASSWD,pPassphrase);

  /* if we use a key stored in a crypto engine,
     we must set the key type to "ENG" */ 
  curl_easy_setopt(curl,CURLOPT_SSLKEYTYPE,pKeyType);

  /* set the private key (file or ID in engine) */ 
  curl_easy_setopt(curl,CURLOPT_SSLKEY,pKeyName);

  /* set the file with the certs vaildating the server */ 
  curl_easy_setopt(curl,CURLOPT_CAINFO,pCACertFile);

  /* disconnect if we can't validate server's cert */ 
  curl_easy_setopt(curl,CURLOPT_SSL_VERIFYPEER,1L);

  /* Perform the request, res will get the return code */ 
  res = curl_easy_perform(curl);
  /* Check for errors */ 
  if(res != CURLE_OK)
    fprintf(stderr, "curl_easy_perform() failed: %s\n",
            curl_easy_strerror(res));

    break;                   /* we are done... */ 
  }
  /* always cleanup */ 
  curl_easy_cleanup(curl);
 }

 curl_global_cleanup(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T12:54:26.410

你的 CURL 版本是用 OpenSSL 构建的吗？如果是这样，请参阅[此 OpenSSL 邮件线程](http://www.mail-archive.com/openssl-users@openssl.org/msg69200.html)- 只要没有官方密码套件编号，OpenSSL 仍然无法支持 TLS_ECDHE_ECDSA_WITH_AES_128_CCM。

# codeigniter - 使用 OAuth2 进行 Basecamp API 身份验证：内部校验和失败错误

> ID：12374732
> 
> 赞同：0
> 
> 时间：2012-09-11T17:15:55.493
> 
> 标签：codeigniter, curl, oauth-2.0, basecamp, 37-signals

我正在尝试编写一个 CodeIgniter 控制器来处理 37signals 的 Basecamp API 的 OAuth2 身份验证。

问题是我在尝试（通过 cURL）连接到[https://launchpad.37signals.com/authorization.json](https://launchpad.37signals.com/authorization.json)时不断遇到“内部校验和失败”错误，在 HTTP 标头中提供 Auth Token。

这是我的控制器类中的 index 和 _authcode 函数：

```
<?php 

// constants:
// BC_REQUEST_URL = 'https://launchpad.37signals.com/authorization/new'
// BC_TOKEN_URL   = 'https://launchpad.37signals.com/authorization/token'

// ... 

public function index() {
    // if get data is set.
    if ($this->input->get()) {

        // if auth code is provided via GET, switch to _authcode method.
        if ( $code = $this->input->get('code') ) {
            return $this->_authcode($code);
        }

        // On error, kill yourself.
        if ( $error = $this->input->get('error') ) {
            die($error);
        }

    }

    // redirect to 37 signals to get an authcode
    header("Location: ".BC_REQUEST_URL."?type=web_server&client_id=".BC_CLIENT_ID."&redirect_uri=".BC_REDIRECT_URL."");
}

// handles the Authentication code that is returned by 37 Signals.
private function _authcode($code) {
    // set vars to POST
    $vars = array(
        'type' => 'web_server',
        'client_id' => BC_CLIENT_ID,
        'redirect_uri' => BC_REDIRECT_URL,
        'client_secret' => BC_CLIENT_SECRET,
        'code' => $code
    );

    // make a request for the access_token
    $url = BC_TOKEN_URL;
    $c = curl_init($url);
    curl_setopt($c, CURLOPT_POST, true);
    curl_setopt($c, CURLOPT_POSTFIELDS, http_build_query($vars));
    curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
    $response = json_decode(curl_exec($c));
    curl_close($c);
    unset($c,$url);

    // get the access vars from this request
    $expiry_seconds = $response->expires_in;    // default: 1209600 (14 days)
    $refresh_token  = $response->refresh_token; 
    $access_token   = $response->access_token;  
    unset($response);

    // make a separate request to get user info for current user.
    $url = "https://launchpad.37signals.com/authorization.json";
    $c = curl_init($url);

    curl_setopt($c, CURLOPT_HTTPHEADER, array(
        "Authorization: Bearer <$access_token>",
        "Content-Type: application/json; charset=utf-8",
        "User-Agent: MyApp (http://myapp.example.com)"
    ));
    curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
    $response = json_decode(curl_exec($c)); // reply from 37 signal auth
    curl_close($c);
    unset($c,$url);

    echo "response obj = " . print_r($response,1);
    /* prints: response obj = stdClass Object ( [error] => OAuth token could not be verified. The internal checksum failed, so the token data was somehow mangled or tampered with. ) */

    // get the user data from this request
    // $expires_at = $response->expires_at; // the timestamp for when this request expires
    // $identity   = $response->identity;   // the current user
    // $accounts   = $response->accounts;   // list of accounts we can access
    // unset($response);

    // store the response data to the database for easy recall.
    // $this->db->query("REPLACE INTO `sometable` SET `key1`='value', `key2`='value');

}
// ...
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:51:47.873

使用 varchar(255) 将身份验证令牌保存在数据库中时遇到此错误。Basecamp 的身份验证令牌有一些校验和数据，使令牌超过 255 个字符。

在您的示例中，您似乎没有从数据库中提取它，因此这可能不会影响您，但是检查 Basecamp 的令牌是否被切断是我首先要查看的内容。

或者，在设置 Bearer 标头时删除 $access_token 周围的 <> 字符。

# html - html从表格行中删除空间

> ID：12374743
> 
> 赞同：3
> 
> 时间：2012-09-11T17:16:45.810
> 
> 标签：html, css, html-table

我想创建一个 3 x 3 表，行和列之间没有空格。目前，我将单元格间距和单元格填充都设置为零，但我仍然在行之间获得了一些空间。我贴了一张它的样子的照片。看到行之间的空间了吗？我该如何摆脱它？

![我发布了行之间的空间的图像](../Images/c3e8f6577a2e7f28ebfc46252bb17f39.png)

好的，这是我的代码：

```
<!DOCTYPE html>
<html>
<body>

    <table border="0" cellpadding="0" cellspacing="0" >

    <tr >
       <td><img src="bgimage.png" /></td>
       <td><img src="bgimage.png" /></td>
       <td><img src="bgimage.png" /></td>
    </tr>
    <tr >
      <td><img src="bgimage.png" /></td>
      <td><img src="bgimage.png" /></td>
      <td><img src="bgimage.png" /></td>
   </tr>
   <tr >
     <td><img src="bgimage.png" /></td>
     <td><img src="bgimage.png" /></td>
     <td><img src="bgimage.png" /></td>
  </tr>
 </table> 
```

任何帮助删除行之间的空间将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T17:19:18.603

您可以尝试将其添加到您的 CSS 中：

```
td {
  line-height: 0;    
}​ 
```

应该解决它。

# ruby - 将十进制转换为二进制、八进制和十六进制？

> ID：12374744
> 
> 赞同：2
> 
> 时间：2012-09-11T17:16:55.373
> 
> 标签：ruby

我正在尝试使用 Ruby 将始终是数字的变量转换为二进制、八进制和十六进制。

我此时的代码是：

```
def convert(number)
  puts "#{number} in decimal is"
  puts "#{number.to_s(2)} in binary"
  puts "#{number.to_s(8)} in octal"
  puts "#{number.to_s(16)} in hexadecimal"
end 
```

到目前为止的输出是：

```
2 in decimal is
10 in binary
2 in octal
2 in hexadecimal 
```

前两行运行良好，但之后它忽略了转换命令，只是将变量放入。有谁知道我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T17:18:53.490

你错过了一个事实，那`2`就是......`2`在基数 8、16 或任何大于 2 的基数中。试试看`convert(42)`。

# c++ - 为什么 const 的数组优先绑定到 const T& 参数而不是 T&& 参数？

> ID：12374746
> 
> 赞同：5
> 
> 时间：2012-09-11T17:17:10.480
> 
> 标签：c++, c++11

重载带有“T&&”参数的函数模板通常是一个坏主意，因为它可以绑定到任何东西，但假设我们还是这样做了：

```
template<typename T>
void func(const T& param)
{
  std::cout << "const T&\n";
}

template<typename T>
void func(T&& param)
{
  std::cout << "T&&\n";
} 
```

我的理解是，`const T&`将为 const 左值的参数调用`T&&`重载，而为所有其他参数类型调用重载。但是考虑一下当我们`func`使用 const 和非常量内容的数组调用时会发生什么：

```
int main()
{
  int array[5] = {};
  const int constArray[5] = {};

  func(array);             // calls T&& overload
  func(constArray);        // calls const T& overload
} 
```

VC10、VC11 和 gcc 4.7 同意显示的结果。我的问题是为什么第二次调用会调用`const T&`重载。简单的答案是其中`constArray`有一个 const，但我认为这太简单了。推导的类型 T （无论选择的模板如何）是“5 个 const int 的数组”，因此重载`param`中的类型将是“对 5 个 const int 的 const 数组的引用”。`const T&`但是名为 constArray 的数组本身并未声明为 const。那么为什么不`func(constArray)`调用`T&&`重载，从而产生`param`“对 5 个 const int 数组的引用”的类型呢？

这个问题的动机是与[c++ template function argument deuce and function resolution](https://stackoverflow.com/questions/12258608/c-template-function-argument-deduce-and-function-resolution)中的问题相关的讨论，但我认为该线程在其他问题上偏离了方向，并没有澄清我现在在这里提出的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T17:35:37.870

在函数参数列表（以及其他任何地方）中，数组类型上的 cv 限定符被改组以限定数组元素类型。例如，用`T = int [5]`,`const T &`转换为`int const (&) [5]`。

> ### 3.9.3 CV-qualiifiers [basic.type.qualifier]
> 
> 2 - [...] 应用于数组类型的任何 cv 限定符都会影响数组元素类型，而不是数组类型 (8.3.4)。

因此，`func`带有类型参数的`int const [5]`调用被推导出为对以下任何一个的调用：

```
void func<int [5]>(int const (&) [5])
void func<int const (&) [5]>(int const (& &&) [5])
// where the above collapses to
// 'void func<int const (&) [5]>(int const (&) [5])' 
```

两种重载都是可行的，但前者是首选：

设 T1 为`const T &`模板，T2 为`T &&`模板；也就是说，它们的参数类型是 T1 :=`const T &`和 T2 := `T &&`。然后转换后的参数类型 (14.5.6.2:3) 可以写成 A1 := `const C &`, A2 :=`D &&`合成类型`C`, `D`.

现在，我们尝试将 T1 与 T2 (14.8.2.4:2) 排序，首先使用 A1 作为参数模板，P2 作为参数模板。我们删除引用 (14.8.2.4:5) 给 A1 ->`const C`和 T2 -> `T`，然后删除 cv-qualification (14.8.2.4:7) 给 A1 ->`C`和 T2 -> `T`。模板`T`可以推导出为`C`(14.8.2.4:8) ，因此*A1 至少与 P2 一样专业*；相反， A2 -> `D`-> `D`， P1 -> `const T`-> `T`，并且`T`可以推导出为`D`，因此*A2 至少与 P1 一样特化*。

这通常意味着没有一个比另一个更专业；但是，因为`P`and`A`类型是引用类型 14.8.2.4:9 适用，并且由于 A1 是左值引用而 P2 不是，所以 T1 被认为比 T2 更专业。（引用类型之间的联系也可以通过同一子句下的 cv 限定来打破。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T17:21:40.767

您混淆了右值引用（如`int&&`）和通用引用（由模板参数组成，如 中`template <typename T> ... T&&`）。

右值引用确实不绑定到左值。但是通用引用绑定到任何东西。问题只是谁更适合。

您拥有的类型是`int const [5]`. 现在让我们看看：

*   反对`T const &`：与 匹配`T = int[5]`。

*   反对`T &&`：与 匹配`T = int const (&)[5]`。

前者是更好的匹配，在以下意义上：两个模板产生相同的重载。但`T = int[5]`比更**专业**`T = int const (&)[5]`。你可以看到这一点，因为`T = int const (&)[5]`可以用 来`T = U const &`实现`U = int[5]`。

请注意，要将左值绑定到通用引用，必须将类型本身推导出为引用类型。

（显然`array`不匹配`const T &`，因为它不是const。它只能匹配`T&&`，推导`T = int (&)[5]`）。

# jquery - 如何允许使用滚动条将 jQuery 可拖动项目从 div 中拖出？

> ID：12374748
> 
> 赞同：1
> 
> 时间：2012-09-11T17:17:20.703
> 
> 标签：jquery, jquery-ui

这就是我想要实现的目标。在我的页面顶部是一排图像。图像行比页面宽，所以下面应该有一个滚动条。我希望能够将图像从容器 div 拖到下面的 div 上。

我遇到的问题是，一旦初始图像位于带有滚动条的 div 中，我就无法再将其拖出该 div。当我尝试向下拖动图像时，div 只会获得一个垂直滚动条。

我该如何解决这个问题？

我目前的设置非常基本：

```
<div id="library">
  <div id="assets">
     <div class="assetitem"><img src="..." /></div>
     <div class="assetitem"><img src="..." /></div>
     <div class="assetitem"><img src="..." /></div>
     <div class="assetitem"><img src="..." /></div>
     <div class="assetitem"><img src="..." /></div>
  </div>
</div> 
```

并且 css 在库 div 上设置了一个宽度，使用 overflow-x: scroll。assets div 的宽度为 10000 像素，以允许所有图像适合。

可拖动对象应用于每个资产项。

当我尝试将资产项拖出库 div 时，它只会在高度上扩展并滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:11:58.317

您可能无法使用帮助程序，因为正如您所见，拖动 with`overflow:scroll`会导致 div 滚动：

```
$(".assetitem").draggable({helper:"clone"});​ 
```

注意：我尝试使用该`appendTo`选项，但我从来没有让它与溢出集一起使用。

# vb.net - 循环直到文件存在

> ID：12374749
> 
> 赞同：0
> 
> 时间：2012-09-11T17:17:24.217
> 
> 标签：vb.net, visual-studio-2010, loops

好的，以下代码显示了我如何在文本框中输入值、将该值添加到列表框、更新它旁边的图片框并将文本框清空，以便用户可以向列表框添加其他值。

```
 ListBox1.Items.Add(TextBoxTicketID.Text)

    If CStr(ListBox1.Items(0)) = TextBoxTicketID.Text Then
        PictureBoxStatus1.Image = My.Resources.Orange_Information
    End If

    TextBoxTicketID.Text = "" 
```

我这里没有显示另一个过程，它将根据输入到列表框中的值创建一个 PDF。

如果 PDF 存在与否，我在循环检查特定目录时遇到问题。当 PDF 存在时，我会将图片框更改为另一个图像。

这是我正在使用的循环，但我遇到的问题是用户无法输入第二个值，除非第一个值存在。

```
Loop Until My.Computer.FileSystem.FileExists("c:\Temp\" + ListBox1.Items(0) + ".pdf")
PictureBoxStatus1.Image = My.Resources.Green_Checkmark 
```

所以理论上，我需要能够在列表框中输入 X 数量的值并继续检查文件是否存在，如果存在，则更改所需的图像。

**编辑**

这就是我最终做的……不过似乎工作正常……

```
 ListBox1.Items.Add(TextBoxTicketID.Text)

    If CStr(ListBox1.Items(0)) = TextBoxTicketID.Text Then
        PictureBoxStatus1.Image = My.Resources.Orange_Information
    End If

    TextBoxTicketID.Text = ""
    Call CheckFiles() 
```

添加了一个公共子

```
 Public Sub CheckSpooling()
    Dim Watcher As New FileSystemWatcher()
    Watcher.Path = "C:\Temp\"
    Watcher.Filter = ListBox1.Items(0) + ".pdf"

    AddHandler Watcher.Created, AddressOf OnChanged

    Watcher.EnableRaisingEvents = True
    End Sub 
```

然后，如果添加了文件，则 sub 运行所需的任何内容。我使用了一个 msgbox 进行测试。

```
 Private Shared Sub OnChanged(source As Object, e As FileSystemEventArgs)
    ' Specify what is done when a file is created.
    MsgBox("File has been created!")
    End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T17:20:10.970

查看[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T17:28:36.340

循环时用户无法输入任何内容的原因是该`WinForm`框架本质上是单线程的。UI 中的所有内容都发生在同一个线程上，包括事件处理程序。因此，如果您在按钮单击事件处理程序中长时间处于循环中，那么 UI 将被锁定并且无响应，直到代码退出循环。解决这个问题的方法是启动一个新线程来执行任何需要完成的工作。该工作线程可能需要尽可能长的时间才能完成，并且不会干扰 UI 线程，因此 UI 保持响应。`BackgroundWorker`您可以在表单设计器中拖放到表单上的组件使这变得更容易。

但是，`FileSystemWatcher`正如 Dan-o 所推荐的那样，与创建自己的工作线程来不断检查文件是否存在相比，它可能是一个更好的解决方案。它不仅避免了重新发明轮子，而且效率更高。它不会不断地询问文件系统是否存在文件，它只是侦听来自文件系统的消息以了解何时发生更改。

# php - 在 Codeigniter 中返回数据库结果时未定义的索引

> ID：12374755
> 
> 赞同：0
> 
> 时间：2012-09-11T17:17:36.593
> 
> 标签：php, codeigniter

我正在尝试将数据从 Wordpress 数据库传输到 Codeigniter 项目。我有一个返回单个值的模型方法，但我不断得到以下信息：

> 消息：未定义的索引：meta_value
> 
> 文件名：models/transfer_model.php

这是模型：

```
 public function get_meta($post_id, $key)
    {
        $this->db->select('meta_value');
        $this->db->from('wp_postmeta');
        $this->db->where('post_id', $post_id);
        $this->db->where('meta_key', $key);
        $this->db->limit(1);

        $query = $this->db->get();

        $row = $query->row_array();

        return $row['meta_value'];
    } 
```

如果我`print_r($row);`，我得到以下信息：

```
Array
(
    [meta_value] => The Data
) 
```

如何阻止它返回此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:54:57.557

在获取记录的地方，当没有通过查询获取记录时，您将获得回报，那么没有任何东西意味着您的行是空的，以避免这种使用 key_exists 或 array_key_exists 查看 php doc

[array_key_exists](http://php.net/manual/en/function.array-key-exists.php)

```
public function get_meta($post_id, $key)
    {
        $this->db->select('meta_value');
        $this->db->from('wp_postmeta');
        $this->db->where('post_id', $post_id);
        $this->db->where('meta_key', $key);
        $this->db->limit(1);

        $query = $this->db->get();

        $row = $query->row_array();

        $return = '';
        if(key_exists('meta_value',$row))
         $return = $row['meta_value'];

        return $return;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:54:31.003

如果使用整数索引会怎样？

```
$row = $query->row_array();
return $row[0]; 
```

# jquery - jquery拖拽？如何让拖拽div固定

> ID：12374756
> 
> 赞同：0
> 
> 时间：2012-09-11T17:17:37.043
> 
> 标签：jquery

链接到代码 - [JS FIDDLE LINK](http://jsfiddle.net/GheD5/35/)

```
var makeDrag = function(){
    $("#hello").draggable({
        stop: function(){
            alert("Done dragging");

            $("#hello").draggable("destroy");

            var copy = $("#hello").clone(true);
            $("body").append(copy);
            copy.html("DRAG");
            copy.draggable();
            copy.css("left","120px");
            copy.css("top","140px");

            makeDrag();
        }
    });
}

makeDrag();

<div id="hello">DRAG</div>//THIS DIV SHOULD BE FIXED IN THE SAME POSITION 
```

我可以拖放，但我要修复 div hello 吗？如何做到这一点？例如[**示例链接**](http://www.monkeyphysics.com/mootools/script/1/dragghost)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:30:32.843

使用`helper: "clone"`选项。

```
$("#hello").draggable({
    helper: "clone",
    stop: function(){ 
      //existing stuff
    }
}); 
```

[工作演示](http://jsfiddle.net/GheD5/36/)

# jquery - 如何使用jquery删除大于或等于特定数字的元素？

> ID：12374757
> 
> 赞同：3
> 
> 时间：2012-09-11T17:17:39.160
> 
> 标签：jquery

如何使用jquery删除大于或等于特定数字的元素？

```
<div id="1" class="testList"><p>anything</p></div>
<div id="2" class="testList"><p>anything</p></div>
<div id="3" class="testList"><p>anything</p></div>
<div id="4" class="testList"><p>anything</p></div>
<div id="5" class="testList"><p>anything</p></div>
<div id="6" class="testList"><p>anything</p></div>
<div id="7" class="testList"><p>anything</p></div>
<div id="8" class="testList"><p>anything</p></div>
<div id="9" class="testList"><p>anything</p></div> 
```

例如，我需要删除所有大于等于 id 5 的 div 元素...我的尝试是使用一个名为 clear 的变量

```
$(".testList:gt('"+clear+"') p").remove(); 
```

如何在 jquery 中使用大于或等于？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T17:21:30.103

如果要针对 ID 进行测试，则需要一个[`.filter`](http://api.jquery.com/filter)ing 函数：

```
var clear = 5;

$('.testList').filter(function(i) {
    return (this.id >= clear);
}).remove(); 
```

[http://jsfiddle.net/mblase75/jtYgJ/](http://jsfiddle.net/mblase75/jtYgJ/)

警告：在 HTML 4 中，以数字开头的 ID 是非法的，尽管大多数浏览器都会允许它们。HTML5 允许使用数字 ID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T17:22:12.643

您应该删除单引号：

```
$(".testList:gt("+clear+") p").remove(); 
```

[http://jsfiddle.net/nFdLC/](http://jsfiddle.net/nFdLC/)

# sql-server - 转义引号 - 存储过程 - MS SQL 2008

> ID：12374759
> 
> 赞同：0
> 
> 时间：2012-09-11T17:17:47.557
> 
> 标签：sql-server, stored-procedures, escaping, double-quotes

我正在使用 MS SQL 2008 中的存储过程。
我的代码的问题在于 UPDATE 部分的某个地方。我正在尝试替换以单个双引号开头的字符串。

这是我正在搜索的字符串，我希望将其替换为任何内容。这可能是转义引号等的问题吗？

```
">%http%<!-- 
```

非常感谢。下面是存储过程。

```
USE [cop_pcms]
GO
/****** Object:  StoredProcedure [dbo].[SearchAllTablesWildcard_Replace2]    Script    Date: 09/11/2012 11:33:46 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROC [dbo].[SearchAllTablesWildcard_Replace2]
(
@SearchStr nvarchar(100)
)
AS
BEGIN

CREATE TABLE #Results (ColumnName nvarchar(370), ColumnValue nvarchar(3630))

SET NOCOUNT ON

DECLARE @SQL NVARCHAR(4000)

DECLARE @TableName nvarchar(256), @ColumnName nvarchar(128), @SearchStr2 nvarchar(110)
SET  @TableName = ''
SET @SearchStr2 = QUOTENAME('%' + @SearchStr + '%','''')

WHILE @TableName IS NOT NULL
BEGIN
    SET @ColumnName = ''
    SET @TableName = 
    (
        SELECT MIN(QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME))
        FROM    INFORMATION_SCHEMA.TABLES
        WHERE       TABLE_TYPE = 'BASE TABLE'
            AND QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME) > @TableName
            AND OBJECTPROPERTY(
                    OBJECT_ID(
                        QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME)
                         ), 'IsMSShipped'
                           ) = 0
    )

    WHILE (@TableName IS NOT NULL) AND (@ColumnName IS NOT NULL)
    BEGIN
        SET @ColumnName =
        (
            SELECT MIN(QUOTENAME(COLUMN_NAME))
            FROM    INFORMATION_SCHEMA.COLUMNS
            WHERE       TABLE_SCHEMA    = PARSENAME(@TableName, 2)
                AND TABLE_NAME  = PARSENAME(@TableName, 1)
                AND DATA_TYPE IN ('char', 'varchar', 'nchar', 'nvarchar')
                AND QUOTENAME(COLUMN_NAME) > @ColumnName
        )

        IF @ColumnName IS NOT NULL
        BEGIN
            INSERT INTO #Results
            EXEC
            (
                'SELECT ''' + @TableName + '.' + @ColumnName + ''', LEFT(' + @ColumnName + ', 3630)' +
                ' FROM ' + @TableName + ' (NOLOCK) ' +
                ' WHERE ' + @ColumnName + ' like ' + @SearchStr2
            )
        END

        IF @ColumnName IS NOT NULL        
        BEGIN
            SET @SQL = 'UPDATE ' + @TableName + 
            ' SET ' + @ColumnName + ' = REPLACE(' + @ColumnName + ',' + @SearchStr2 + ',' + ''''')' +
            ' WHERE ' + @ColumnName + ' LIKE ' + @SearchStr2 
            EXEC(@SQL)
        END        

    END 
END

SELECT ColumnName, ColumnValue FROM #Results
 END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:28:02.903

我很难弄清楚你的问题是什么......但是......

如果您只想替换双引号，这应该可以满足您的要求

```
select REPLACE('testing"testing','"','') 
```

如果您想替换字符串 ">%http%，此示例也应该可以工作

```
select REPLACE('testing">%http%<!--testing','">%http%<!--','') 
```

然而，这不会做任何事情

```
select REPLACE('testing">**http**<!--testing','">%http%<!--','') 
```

要更清楚。这也不行...注意： % 不是“模式”中的通配符

```
select REPLACE('1111a23333','1a%3','') 
```

QUOTENAME(TABLE_NAME) 还会在我认为您认为正在发生的事情周围加上方括号？

**所以也许这是你的问题**

```
REPLACE(' + @ColumnName + ',' + @SearchStr2 + ',' + ''''')' 
```

这是替换的东西......后跟两个单引号。

请参阅：[替换 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms186862.aspx)

# java - 哪个更准确？java.lang.Math.E 或 Math.exp(1.0)

> ID：12374763
> 
> 赞同：22
> 
> 时间：2012-09-11T17:18:12.357
> 
> 标签：java, math

阅读 Javadocs，我看到 Math.E 是“*比任何其他值都更接近自然对数的底 e 的双精度值。* ”。Math.E 的打印值是 2.718281828459045，而 Math.exp(1.0) 的值应该是相同的值是：2.7182818284590455（最后再加一个 5）。

从文档中，听起来 Math.E 中的位已经“手动调整”以更接近 e 的实际值，而不是 Math.exp(1.0) 产生的计算。这是正确的，还是我错误地阅读了文档？

如果这是正确的，那么使用 Math.pow(Math.E, n) 是否比 Math.exp(n) 更准确，还是更少？我已经用谷歌搜索并搜索了 SO，但在这个特定问题上找不到任何东西。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-11T17:23:52.933

小数点后 16 位的实际值为 2.7182818284590452；2 比 5 更接近 0，因此常数更接近。

请注意，在使用任一数字进行浮点计算时，很可能答案的浮点表示形式中的错误会使您使用哪个数字在很大程度上无关紧要。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-11T17:28:59.907

数学.E

> 2.718281828459045

数学.exp(1.0)

> 2.7182818284590455

所以这是来自维基百科的值，[2.7182818284590452](http://en.wikipedia.org/wiki/E_%28mathematical_constant%29) 我能看到的唯一区别是 Math.exp(1.0) 的最后一位数字的舍入误差，其中值为 5 而不是 2。所以严格来说 Math.E 更准确但除非您正在做一些非常疯狂的事情，否则精度无关紧要。

使用预先计算的 Math.E 而不是 Math.exp(1.0) 可能需要考虑速度。您可能也想检查一下。

# c++ - 使用 JNI 调用 API 创建 java7 JVM

> ID：12374765
> 
> 赞同：5
> 
> 时间：2012-09-11T17:18:18.323
> 
> 标签：c++, java-native-interface, java-7

我们在 java 7 中有一个类，需要从本机代码加载它。我已经将 java 6 与 JNI 一起使用，但 java 6 无法加载该类。所以我安装了新的 JDK，更改了我的 VC 项目中的包含目录和链接引用等。一切都很好，直到我想从 JNI 启动 jre7：

**JNI_CreateJavaVM**采用**vm_args.version**参数中的 java 版本，但没有比 1.6 更新的版本的定义。

```
JavaVMInitArgs vm_args;
...
vm_args.version = JNI_VERSION_1_6;
vm_args.nOptions = 2;
vm_args.options = options;
vm_args.ignoreUnrecognized = 0;

int ret = JNI_CreateJavaVM(&jvm, (void**)&env, &vm_args); 
```

调用`FindClass`java7 类显然会产生*UnsupportedClassVersionError*。

**问题：**如何创建一个 java7 JVM `JNI_CreateJavaVM`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-19T07:18:56.567

对于 Mac 用户，我强烈推荐阅读这篇文章：

如何在 OS X 10.8.2 上的 Java 7 和 Java 6 之间切换？ [https://superuser.com/questions/490425/how-do-i-switch-between-java-7-and-java-6-on-os-x-10-8-2](https://superuser.com/questions/490425/how-do-i-switch-between-java-7-and-java-6-on-os-x-10-8-2)

我成功编译并运行了 JNI 示例，在该示例中我从我创建的 Java 类中调用了一些静态方法。我通过像这样调用“java_home”解决了这个问题：

/usr/libexec/java_home -v 1.6.0_45 --exec javac Sample.java

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:18:50.743

问题出在路径环境变量上，即 jre7 之前的 jre6。在visual C++->Property Pages->Debugging->Environment上，我改为：path=C:\Java\jre7\bin;C:\Java\jre7\bin\client;%path%

或者直接在：我的电脑->属性->高级->环境变量

# ios - 从 UIScrollView 转发触摸 - UIButton 问题

> ID：12374767
> 
> 赞同：1
> 
> 时间：2012-09-11T17:18:27.920
> 
> 标签：ios, uiscrollview, uibutton, uigesturerecognizer, uitouch

我一直在试图弄清楚如何将触摸从 UIScrollView 转发到它的超级视图。原因是某种光标跟随触摸。无论如何，滚动视图都填充了 UIButtons。我转发触摸的代码是在滚动视图子类中使用委托：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    [super touchesBegan:touches withEvent:event];
    if ([[self tfDelegate]respondsToSelector:@selector(tfDelegateBegan:)]) {
        [[self tfDelegate]tfDelegateBegan:[touches anyObject]];
    }
        NSLog(@"touches began");
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    [super touchesMoved:touches withEvent:event];
    if ([[self tfDelegate]respondsToSelector:@selector(tfDelegateMoved:)]) {
        [[self tfDelegate]tfDelegateMoved:[touches anyObject]];
    }
        NSLog(@"touches moved");
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
    [super touchesEnded:touches withEvent:event];
    if ([[self tfDelegate]respondsToSelector:@selector(tfDelegateEnded:)]) {
        [[self tfDelegate]tfDelegateEnded:[touches anyObject]];
    }
        NSLog(@"touches ended");
}

-(void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event{
    [super touchesCancelled:touches withEvent:event];
    if ([[self tfDelegate]respondsToSelector:@selector(tfDelegateCancelled:)]) {
        [[self tfDelegate]tfDelegateCancelled:[touches anyObject]];
    }
        NSLog(@"touches cancelled");
} 
```

但是，我了解到 UIScrollviews 通过 UIGestureRecognizers 操作，因此默认情况下甚至不会调用这些方法。我意识到手势识别器在 iOS 5 中公开，但我也需要支持 4.0。我这样做了：

```
 NSArray *a = [[theScrollview gestureRecognizers]retain];
        for (UIGestureRecognizer *rec in a) {
            if ([rec isKindOfClass:[UIPanGestureRecognizer class]]) {
                NSLog(@"this is the pan gesture");
                rec.cancelsTouchesInView = NO;
            }
        } 
```

这允许手势工作和触摸方法同时被调用。问题是，现在如果您在触摸按钮时尝试滚动，则可以在滚动时按下按钮。通常，滚动取消按钮，并且唯一可以按下按钮的时间是滚动视图没有滚动。这是所需的功能。关于我如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:57:34.767

也许尝试使用一个标志来控制按钮操作，如果滚动视图正在滚动，该标志将阻止事件触发。

```
BOOL isScrolling = NO;

- (void) scrollViewWillBeginDragging:(UIScrollView *)scrollView {
    isScrolling = YES;
}

- (void) scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate {
    isScrolling = NO;
}

- (void) didTapButton {

    if(isScrolling)
        return;

    //Do Button Stuff
} 
```

# java - 不使用 AJAX 动态添加和删除组件？

> ID：12374770
> 
> 赞同：0
> 
> 时间：2012-09-11T17:18:44.157
> 
> 标签：java, wicket

我有一个动态表单，我在 Wicket 中编写了一些表单，这些表单通过“单击此处添加更多问题”类型的按钮进行复制。我编写了一个非常基本的（我还是 Wicket 的新手）AJAXy 侦听器，该侦听器主要工作，但我不知道如何删除甚至隐藏我的 ListView 中的项目。

这让我想知道，有没有办法让一些 JS 复制表单字段？在我使用 Wicket 组件重新构建表单之前，我让 Jquery Dynamic Form Plugin 复制了这些值。这很好用并且很容易理解（一个重要的优点）。但是，如果我只是使用插件而不是类似的东西，我无法弄清楚这将如何影响 Wicket

```
 //Issue box magic
    final MarkupContainer rowPanel = new WebMarkupContainer("issuesPanel");
    rowPanel.setOutputMarkupId(true);
    form.add(rowPanel);
    ArrayList numIssues = new ArrayList();
    numIssues.add(new Object());
    numIssues.add(new Object());
    numIssues.add(new Object());
    final ListView lv = new ListView("issuesBox", numIssues) {
        @Override
        protected void populateItem(ListItem item) {
            int index = item.getIndex() + 1;

            item.add(new DropDownChoice("issues", combinedIssues));
            item.add(new TextField<String>("note"));
        }
    };
    lv.setReuseItems(true);
    rowPanel.add(lv);
    form.add(new AjaxSubmitLink("addIssue", form) {
        @Override
        public void onSubmit(AjaxRequestTarget target, Form form) {
            lv.getModelObject().add(new Object());
            if (target != null)
                target.add(rowPanel);
        }
    }.setDefaultFormProcessing(false));
    form.add(new AjaxSubmitLink("removeIssue", form) {
        @Override
        public void onSubmit(AjaxRequestTarget target, Form form) {
            //Wicket gets very angry when you remove components, so just hide it (recommended way)
            if (target != null) {
                Component lastObject = (Component)lv.get(lv.getList().size() - 1);
                lastObject.setVisible(false);
                log.debug("Components " + lv.get );
            }

        }
    }.setDefaultFormProcessing(false)); 
```

JQuery 插件更容易使用，但我如何告诉 Wicket 字段比它想象的要多？

请注意，我还试图避免 AJAX 调用只是为了添加一个新问题，在我使用该应用程序的淤泥中可能会成为一个问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:08:53.660

您不能只通过 ajax 在 html 中添加表单元素。使用 Wicket，您可以在 html 和 Java 中拥有一个 compenent 树，并且两者都必须匹配。最后，当您提交表单时，Wicket 必须知道如何处理这些值。

不确定我是否理解您的特定要求，但我想类似的问题可能是为一个人添加地址。在这里，我将构建一个 AdressEditPanel，其中包含一个表单，其中包含一个地址所需的所有字段。该面板将有一个 PersonAdress（作为示例）对象作为模型。

在 Person 上，您将拥有一个地址集合并使用 ListView 来呈现和编辑每个地址。在 ListView 的 populateItem() 函数中，您可以将 AdressEditPanel 的一个实例添加到项目中。

如果您需要为某人添加地址，只需将一个条目添加到地址集合并重新显示表单（我会首先使用 Ajax，一旦它工作，只需进行切换到 ajax 所需的最小更改）。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:29:06.207

如果您在修改其模型对象后在 ListView 上调用 removeAll() ，您应该解决您的问题。例如

```
new AjaxSubmitLink("addIssue", form) {
        @Override
        public void onSubmit(AjaxRequestTarget target, Form form) {
            lv.getModelObject().add(new Object());
            lv.removeAll();
            if (target != null)
                target.add(rowPanel);
        } 
```

但是我不知道这是否会导致表单验证出现问题，但我认为它应该是安全的。

**更新**

如果您想应用相同的技术来删除链接，您应该编写如下内容：

```
new AjaxSubmitLink("removeIssue", form) {
        @Override
        public void onSubmit(AjaxRequestTarget target, Form form) {

            if (target != null) {
                lv.getModelObject().remove(lv.getList().size() - 1);
                lv.removeAll();
                target.add(rowPanel);

            }

        }
    } 
```

但是，如果没有 AJAX，这是不可能的。唯一的方法是使用 JS 并在服务器端读取来自表单的请求参数。

# regex - Neo4j 数字属性的正则表达式匹配

> ID：12374775
> 
> 赞同：4
> 
> 时间：2012-09-11T17:18:57.820
> 
> 标签：regex, neo4j, cypher

我有几个节点共享一个具有数值的属性。我想使用正则表达式过滤此属性。这可以使用 Cypher 查询语言吗？

例子：

```
A { num: 3 }
B { num: 12 }
C { num: 532 }
D { num: 1423 } 
```

如何获取`num`属性包含数字的所有节点`3`（应返回 A、C 和 D）。我试过类似的东西`n.num =~ '3'`，但它会导致错误（“ `java.lang.ClassCastException: java.lang.Long cannot be cast to java.lang.String)`”）

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:30:55.270

有了这个，您试图将 RegExp 应用于 Long 类型的属性，这是无效的。将节点属性定义为字符串将起作用，请参阅[http://tinyurl.com/bqoq62q](http://tinyurl.com/bqoq62q)

否则，将支持自动投射，因此（在 Cypher 的未来版本中）`where (node.num+'') =~ '3'`即使使用 Long 也可以做到这一点。但是不是现在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:46:23.870

我对密码的东西不太清楚（根本不像正则表达式），但是你想要的正则表达式是这样的（假设你不能嵌套花括号；如果可以的话，正则表达式是这不可能）。

```
([A-Z]\s*\{[^\}]*num:\s*3\D[^\}]*\}) 
```

这将匹配一个大写字母，后跟一个左大括号，并且在任何右大括号之前有 num: 3。多亏了括号，整个事情都被记住了。

# vb.net - VB.NET OleDB MSAccess GetOleDBSchema 返回不正确的查询数（过程）

> ID：12374777
> 
> 赞同：1
> 
> 时间：2012-09-11T17:19:03.717
> 
> 标签：vb.net, visual-studio-2010, ms-access-2007, oledb

我有一个令人困惑的问题，我一直在努力解决数小时但无济于事。

我们的（普通观众）应用程序将最新版本的 MS-Access 数据库中的查询与最终用户当前安装的版本和更新/同步进行比较。相应的数据库。尽管此功能一直有效，但现在已损坏。我采用了最简单的测试来证明这种行为。OLEDB 未返回正确数量的查询。

打开 Access 2007 数据库后，我显示了查询的位置和正确数量：

```
?CurrentDB.Name
C:\Users\Ron\Documents\Database4.accdb
?CurrentDB.QueryDefs.Count
1 
```

以下简单表单调用 OleDbSchemaTable 方法，但返回错误的行数/查询数 (=0)：

```
Public Class Form1
    Private ConnStr As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\Ron\Documents\Database4.accdb"

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Dim dbo As DataTable = GetSchemaInfo()
        Debug.Print("Number of queries=" & dbo.Rows.Count)
    End Sub
    Private Function GetSchemaInfo()
        Try
            Dim db As DataTable
            Using conn = New OleDb.OleDbConnection(ConnStr)
                conn.Open()
                db = conn.GetOleDbSchemaTable(System.Data.OleDb.OleDbSchemaGuid.Procedures, Nothing)
            End Using
            Return db

        Catch ex As Exception
            MsgBox(ex.Message)
            Return Nothing
        End Try
    End Function
End Class 
```

**即时窗口**：查询数=0

我已经尝试了我能想到的一切（压缩/修复，在不同的机器上运行）。不幸的是，我只有一份 Access 2007 可供测试。这可能是病毒吗？

任何和所有的想法都值得赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:19:33.983

有 2 种类型的已保存查询。

1.  `SELECT`可以使用`CREATE VIEW`DDL 语句创建的简单查询。
2.  所有其他查询。这些不能用创建`CREATE VIEW`但可以用`CREATE PROCEDURE`. 此类别中包括：“操作查询”（插入、更新、删除、“制作表”）；参数查询；`SELECT`包含`ORDER BY`子句的简单查询；也许还有更多我现在不记得了。

模式视图包括第一种类型。模式过程包括第二种类型。 `QueryDefs.Count`为您提供所有已保存查询的计数，包括两种类型。

在您的数据库中尝试以下 VBA 过程。使用我的数据库，我在“立即”窗口中得到以下输出：

```
QueryDefs.Count: 66
Views: 34
Procedures: 32 
```

不幸的是，我不知道如何将此 VBA 转换为 Dot.Net。也许这无关紧要。我只想强调`QueryDefs.Count`应该是视图数加上程序数。在我看来，您的代码只要求程序。

```
Public Sub CountQueries()
    Const adSchemaProcedures = 16
    Const adSchemaViews = 23
    Dim cn As Object
    Dim rs As Object
    Dim i As Long

    Debug.Print "QueryDefs.Count: " & CurrentDb.QueryDefs.Count

    Set cn = CurrentProject.Connection
    Set rs = cn.OpenSchema(adSchemaViews)
    i = 0
    With rs
        Do While Not .EOF
            i = i + 1
            'Debug.Print !TABLE_NAME '
            .MoveNext
        Loop
        .Close
    End With
    Debug.Print "Views: " & CStr(i)

    Set rs = cn.OpenSchema(adSchemaProcedures)
    i = 0
    With rs
        Do While Not .EOF
            i = i + 1
            'Debug.Print !PROCEDURE_NAME '
            .MoveNext
        Loop
        .Close
    End With
    Debug.Print "Procedures: " & CStr(i)

    Set rs = Nothing
    Set cn = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:19:22.383

MS Access 有两种模式，模式视图和模式过程。过程是操作查询，视图是选择查询。所以你需要

```
 OleDbSchemaGuid.Views 
```

请注意，OleDbSchemaGuid 为备注字段返回错误的数据类型。

# javascript - 在被 HTML 包围的 javascript 中添加两个变量

> ID：12374779
> 
> 赞同：0
> 
> 时间：2012-09-11T17:19:09.230
> 
> 标签：javascript, html, variables

我存储了两个生成模拟两个随机骰子的变量。我正在尝试将它们添加到另一段中，如下所示；但是，添加它们的行会生成“NaN”。有什么建议么？

```
<!doctype html>
<html>
  <head>
    <meta charset="UTF-8"/>
    <title>Rolling Two Dice</title>
  </head>
  <body>
    <p>Your first die rolled a <script>var roll1 = document.write(1 +
    Math.floor(6 * Math.random()))</script>.</p>
    <p>Your second die rolled a <script>var roll2 = document.write(1 +
    Math.floor(6 * Math.random()))</script>.</p>
    <p>The total of your rolls is <script>document.write(roll1 +roll2)</script>.</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:23:50.003

存储数字，而不是返回`document.write`（我不知道它返回什么）。此外，我已将您的 HTML 与您的 javascript 分开，因为使用`document.write`不是一个好习惯，并且将功能代码 (javascript) 与演示代码 (HTML) 混合是一种不好的做法。

HTML：

```
<body>
    <p>Your first die rolled a <span id="roll1"></span>.</p>
    <p>Your second die rolled a <span id="roll2"></span>.</p>
    <p>The total of your rolls is <span id="total"></span>.</p>
</body> 
```

JS：

```
var roll1 = 1 + Math.floor(6 * Math.random());
var roll2 = 1 + Math.floor(6 * Math.random());
var total = roll1 + roll2;
document.getElementById('roll1').textContent = roll1;
document.getElementById('roll2').textContent = roll2;
document.getElementById('total').textContent = total; 
```

*请注意，该`textContent`属性不适用于某些浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:27:03.057

根据您的样本：

```
<!doctype html>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>Rolling Two Dice</title>
    <script>
        var roll1 = 1 + Math.floor(6 * Math.random());
        var roll2 = 1 + Math.floor(6 * Math.random());
        var total = roll1 + roll2
    </script>
</head>
<body>
<p>Your first die rolled a <script>document.write(roll1)</script>.</p>
<p>Your second die rolled a <script>document.write(roll2)</script>.</p>
<p>The total of your rolls is <script>document.write( total )</script>.</p>
</body>
</html> 
```

问题主要是：

```
<script>var roll1 = document.write(1 + Math.floor(6 * Math.random()))</script> 
```

document.write 不返回可以分配给变量的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T17:21:46.570

您需要将值分配给变量，然后将变量写入文档。

```
<script>var roll1 = 1 + Math.floor(6 * Math.random());  document.write(roll1)</script> 
```

我还建议将所有脚本移动到一个块中，如 jbabey 所示。所以你的 html 中没有几行 JS。在单个块中使用 javascript 来使用值更新 span 的内容。

# javascript - 将属性附加到 KmlPlacemark GE 插件

> ID：12374780
> 
> 赞同：0
> 
> 时间：2012-09-11T17:19:09.963
> 
> 标签：javascript, google-earth-plugin

我有作为 GeoJSON 的纬度/经度数据，每个点都有与之关联的附加属性。我需要能够在`KmlPlacemark`单击时将这些属性传递给回调函数。我知道我可以使用闭包并在它们上单独注册事件侦听器，但我真的更喜欢在`GEWindow`对象上只有一个侦听器。

我的解决方案涉及将属性作为 JSON 数据粘贴到地标 ID 中。

```
var data = {foo: 123, bar: 321};
var placemark = ge.createPlacemark(JSON.stringify(data)); 
```

然后在回调中它被解析回一个对象

```
google.earth.addEventListener(ge.getWindow(), 'click', function(e){
  var target = e.getTarget(),
      data;
  if (target && target.getType() == 'KmlPlacemark'){
    data = JSON.parse(target.getId());
    myHandler(target, data);
  }
}); 
```

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:42:51.690

我找到了一个令我满意的解决方案。我为地标使用递增的 id，并使用 id 作为键将属性存储在对象中。

### 虚拟数据

```
var pointData = [
  {lat: 123, lon: 123, properties: {foo: 1, bar: 2}},
  {lat: 123, lon: 123, properties: {foo: 1, bar: 2}},
  {lat: 123, lon: 123, properties: {foo: 1, bar: 2}}
]; 
```

### 创建地标

```
var properties = {},
    currentId = 0;

pointData.forEach(function(point){

  var id        = (currentId++).toString();
      point     = ge.createPoint(''),
      placemark = ge.createPlacemark(id);

  point.setLatitude(point.lat);
  point.setLongitude(point.lon);
  placemark.setGeometry(point);

  properties[id] = point.properties;
}); 
```

### 在事件处理程序中查找属性

```
google.earth.addEventListener(ge.getWindow(), 'click', function(e){
  var target = e.getTarget(),
      data;
  if (target && target.getType() == 'KmlPlacemark'){
    data = properties[target.getId()];
    myHandler(target, data);
  }
}); 
```

# python - 如何使用scipy.spatial.Delaunay在delaunay三角剖分中找到给定点的所有邻居？

> ID：12374781
> 
> 赞同：17
> 
> 时间：2012-09-11T17:19:11.613
> 
> 标签：python, numpy, scipy, triangulation, delaunay

我一直在寻找这个问题的答案，但找不到任何有用的东西。

我正在使用 python 科学计算堆栈（scipy、numpy、matplotlib），我有一组二维点，[我](https://en.wikipedia.org/wiki/Delaunay_triangulation)使用`scipy.spatial.Delaunay`.

我需要编写一个函数，给定任何点`a`，将返回所有其他点，这些点是任何单纯形（即三角形）`a`的顶点，也是（`a`三角剖分中的邻居）的顶点。但是，`scipy.spatial.Delaunay`（[here](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.Delaunay.html)）的文档非常糟糕，我一生都无法理解单纯形是如何指定的，否则我会继续这样做。即使只是解释 Delaunay 输出中的`neighbors`,`vertices`和`vertex_to_simplex`数组是如何组织的，也足以让我继续前进。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-12T02:52:22.327

我自己想通了，所以这里有一个解释给任何对此感到困惑的未来人。

例如，让我们使用我在代码中使用的简单点阵，生成如下

```
import numpy as np
import itertools as it
from matplotlib import pyplot as plt
import scipy as sp

inputs = list(it.product([0,1,2],[0,1,2]))
i = 0
lattice = range(0,len(inputs))
for pair in inputs:
    lattice[i] = mksite(pair[0], pair[1])
    i = i +1 
```

这里的细节并不重要，只要说它生成了一个规则的三角形格子，其中一个点与其六个最近邻居中的任何一个之间的距离都是 1。

绘制它

```
plt.plot(*np.transpose(lattice), marker = 'o', ls = '')
axes().set_aspect('equal') 
```

[![在此处输入图像描述](../Images/efcd0a6510d9923bfe2b368c20cf1bf6.png)](https://i.stack.imgur.com/xJFev.png)

现在计算三角剖分：

```
dela = sp.spatial.Delaunay
triang = dela(lattice) 
```

让我们看看这给了我们什么。

```
triang.points 
```

输出：

```
array([[ 0\.        ,  0\.        ],
       [ 0.5       ,  0.8660254 ],
       [ 1\.        ,  1.73205081],
       [ 1\.        ,  0\.        ],
       [ 1.5       ,  0.8660254 ],
       [ 2\.        ,  1.73205081],
       [ 2\.        ,  0\.        ],
       [ 2.5       ,  0.8660254 ],
       [ 3\.        ,  1.73205081]]) 
```

很简单，只是上面所示格子中所有九个点的数组。我们怎么看：

```
triang.vertices 
```

输出：

```
array([[4, 3, 6],
       [5, 4, 2],
       [1, 3, 0],
       [1, 4, 2],
       [1, 4, 3],
       [7, 4, 6],
       [7, 5, 8],
       [7, 5, 4]], dtype=int32) 
```

在这个数组中，每一行代表三角剖分中的一个单纯形（三角形）。每行中的三个条目是我们刚刚看到的点数组中那个单纯形的顶点的索引。例如，这个数组中的第一个单纯形`[4, 3, 6]`由以下点组成：

```
[ 1.5       ,  0.8660254 ]
[ 1\.        ,  0\.        ]
[ 2\.        ,  0\.        ] 
```

通过在一张纸上绘制格子，根据其索引标记每个点，然后在`triang.vertices`.

这是我们编写问题中指定的函数所需的所有信息。看起来像：

```
def find_neighbors(pindex, triang):
    neighbors = list()
    for simplex in triang.vertices:
        if pindex in simplex:
            neighbors.extend([simplex[i] for i in range(len(simplex)) if simplex[i] != pindex])
            '''
            this is a one liner for if a simplex contains the point we`re interested in,
            extend the neighbors list by appending all the *other* point indices in the simplex
            '''
    #now we just have to strip out all the dulicate indices and return the neighbors list:
    return list(set(neighbors)) 
```

就是这样！我确信上面的函数可以做一些优化，这正是我在几分钟内想出的。如果有人有任何建议，请随时发布。希望这可以帮助将来像我一样对此感到困惑的人。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-05-16T16:24:32.060

上述方法循环遍历所有单纯形，如果有大量点，这可能需要很长时间。更好的方法可能是使用 Delaunay.vertex_neighbor_vertices，它已经包含有关邻居的所有信息。不幸的是，提取信息

```
def find_neighbors(pindex, triang):

    return triang.vertex_neighbor_vertices[1][triang.vertex_neighbor_vertices[0][pindex]:triang.vertex_neighbor_vertices[0][pindex+1]] 
```

以下代码演示了如何获取某个顶点的索引（在本例中为 17 号）：

```
import scipy.spatial
import numpy
import pylab

x_list = numpy.random.random(200)
y_list = numpy.random.random(200)

tri = scipy.spatial.Delaunay(numpy.array([[x,y] for x,y in zip(x_list, y_list)]))

pindex = 17

neighbor_indices = find_neighbors(pindex,tri)

pylab.plot(x_list, y_list, 'b.')
pylab.plot(x_list[pindex], y_list[pindex], 'dg')
pylab.plot([x_list[i] for i in neighbor_indices],
           [y_list[i] for i in neighbor_indices], 'ro')    

pylab.show() 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-12-02T13:32:07.083

我知道自从提出这个问题以来已经有一段时间了。但是，我只是遇到了同样的问题并想出了如何解决它。`vertex_neighbor_vertices`只需使用您的 Delaunay 三角剖分对象（让我们称其为“tri”）的（文档记录不佳）方法。它将返回两个数组：

```
 def get_neighbor_vertex_ids_from_vertex_id(vertex_id, tri):
        index_pointers, indices = tri.vertex_neighbor_vertices
        result_ids = indices[index_pointers[vertex_id]:index_pointers[vertex_id + 1]]
        return result_ids 
```

具有索引 vertex_id 的点的相邻顶点存储在我命名为“索引”的第二个数组中的某个位置。但是哪里？这是第一个数组（我称为“index_pointers”）的来源。起始位置（对于第二个数组“索引”）是 index_pointers[vertex_id]，经过相关子数组的第一个位置是 index_pointers[vertex_id+1 ]。所以解决方案是 indices[index_pointers[vertex_id]:index_pointers[vertex_id+1]]

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-17T19:26:15.697

这是@astrofrog 答案的详细说明。这也适用于二维以上。

3D 中 2430 个点的集合（大约 16000 个单纯形）花费了大约 300 毫秒。

```
from collections import defaultdict

def find_neighbors(tess):
    neighbors = defaultdict(set)

    for simplex in tess.simplices:
        for idx in simplex:
            other = set(simplex)
            other.remove(idx)
            neighbors[idx] = neighbors[idx].union(other)
    return neighbors 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-23T13:33:50.193

这也是詹姆斯波特自己使用列表理解的答案的简单单行版本：

```
find_neighbors = lambda x,triang: list(set(indx for simplex in triang.simplices if x in simplex for indx in simplex if indx !=x)) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-09-03T07:32:41.350

我也需要这个，并遇到了以下答案。事实证明，如果您需要*所有*初始点的邻居，一次生成邻居字典会更有效（以下示例适用于 2D）：

```
def find_neighbors(tess, points):

    neighbors = {}
    for point in range(points.shape[0]):
        neighbors[point] = []

    for simplex in tess.simplices:
        neighbors[simplex[0]] += [simplex[1],simplex[2]]
        neighbors[simplex[1]] += [simplex[2],simplex[0]]
        neighbors[simplex[2]] += [simplex[0],simplex[1]]

    return neighbors 
```

`v`那么点的邻居是`neighbors[v]`。在我的笔记本电脑上运行 10,000 分需要 370 毫秒。也许其他人有进一步优化的想法？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-19T07:26:46.953

我们可以找到一个包含顶点 ( `tri.vertex_to_simplex[vertex]`) 的单纯形，然后递归地搜索这个单纯形 ( `tri.neighbors`) 的邻居以找到包含该顶点的其他单纯形。

```
from scipy.spatial import Delaunay
tri = Delaunay(points)  #points is the list of input points
neighbors =[]           #array of neighbors for all vertices

for i in range(points):

    vertex = i            #vertex index
    vertexneighbors = []  #array of neighbors for vertex i
    neighbour1 = -1
    neighbour2=-1
    firstneighbour=-1
    neighbour1index = -1
    currentsimplexno= tri.vertex_to_simplex[vertex]
    for i in range(0,3):
        if (tri.simplices[currentsimplexno][i]==vertex):
            firstneighbour=tri.simplices[currentsimplexno][(i+1) % 3]
            vertexneighbors.append(firstneighbour)
            neighbour1index=(i+1) % 3
            neighbour1=tri.simplices[currentsimplexno][(i+1) % 3]
            neighbour2=tri.simplices[currentsimplexno][(i+2) % 3]
    while (neighbour2!=firstneighbour):
        vertexneighbors.append(neighbour2)
        currentsimplexno= tri.neighbors[currentsimplexno][neighbour1index]
        for i in range(0,3):
            if (tri.simplices[currentsimplexno][i]==vertex):
                neighbour1index=(i+1) % 3
                neighbour1=tri.simplices[currentsimplexno][(i+1) % 3]
                neighbour2=tri.simplices[currentsimplexno][(i+2) % 3]
    neighbors.append(vertexneighbors)
print (neighbors) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-03T09:54:07.140

这里的所有答案都集中在获取**一个点的邻居**（除了`astrofrog`，但那是 2D 并且速度快 6 倍），但是，获取**所有点的映射同样昂贵→所有邻居**。

你可以这样做

```
from collections import defaultdict
from itertools import permutations
tri = Delaunay(...)
_neighbors = defaultdict(set)
for simplex in tri.vertices:
    for i, j in permutations(simplex, 2):
        _neighbors[i].add(j)

points = [tuple(p) for p in tri.points]
neighbors = {}
for k, v in _neighbors.items():
    neighbors[points[k]] = [points[i] for i in v] 
```

这适用于任何维度，并且此解决方案找到所有点的所有邻居，比仅查找一个点的邻居（的例外答案）**更快**`James Porter`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-29T16:02:25.707

这是我的，在 2D 中 11000 个点的云上大约需要 30 毫秒。

它为您提供了一个 2xP 索引数组，其中`P`是存在的邻居对的数量。

```
def get_delaunay_neighbour_indices(vertices: "Array['N,D', int]") -> "Array['2,P', int]":
    """
    Fine each pair of neighbouring vertices in the delaunay triangulation.
    :param vertices: The vertices of the points to perform Delaunay triangulation on
    :return: The pairs of indices of vertices
    """
    tri = Delaunay(vertices)
    spacing_indices, neighbours = tri.vertex_neighbor_vertices
    ixs = np.zeros((2, len(neighbours)), dtype=int)
    ixs[0, spacing_indices[1:np.argmax(spacing_indices)]] = 1  # The argmax is unfortuantely needed when multiple final elements the same
    ixs[0, :] = np.cumsum(ixs[0, :])
    ixs[1, :] = neighbours
    assert np.max(ixs) < len(vertices)
    return ixs 
```

# hashmap - 如何为插入 HashMap 的每个元素打印日志？

> ID：12374787
> 
> 赞同：2
> 
> 时间：2012-09-11T17:19:30.850
> 
> 标签：hashmap

我需要使用一个接受哈希`map`作为参数的 API。

但是，每当我在地图中插入键的值时，都需要打印日志。通过从外部 csv 文件中读取来分配键的值。

例如，

```
Map<String,String> myMap = new HashMap<String,String>();

myMap.put("nodeId", myMap.get("nodeIDForCreationOfTrackedAsset"));
myMap.put("templateAssetID", myMap.get("assetIdForServiceHistory"));
myMap.put("seqId", "{{db.WM_TS001.SeqNum}}");
myMap.put("badgeId", "{{db.WM_TS001.BadgeNum}}");
myMap.put("serialId","{{db.WM_TS001.SerialNum}}"); 
```

所以每次我使用 myMap.put(key,value) 时，它都应该将日志打印到外部文件，如下所示

```
element nodeId is assigned to "value" successfully.
element seqId is assigned to  "value" successfully.
element templateAssetID is assigned to "value" successfully.
element badgeId is assigned to "value" successfully.
element serialId is assigned to "value" successfully. 
```

`myMap.put(key,value)`是否有任何通用方法可以做到这一点，以便在遇到时可以通过程序打印日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:30:37.797

最明显的方法是扩展 HashMap，然后将 myMap 声明为新子类的对象。例如：

```
public class LoggingHashMap<K, V> extends HashMap<K, V> {

    @Overrides
    public V put(K key, V value) {
        Log.i("LOG", "put:" + key + ":" + value;
        return super.put(key, value);
    }
}

Map<String, String> myMap = new LoggingHashMap<String, String>(); 
```

# php - 启动一个没有表单的 php 脚本

> ID：12374789
> 
> 赞同：-7
> 
> 时间：2012-09-11T17:19:39.930
> 
> 标签：php, html

我以前从未遇到过这种方法，但我想知道为什么单击“打个招呼”按钮后什么都没有发生。

```
<html>
<head>    
</head>
<body>
<button onclick="myscript.php">Say hello</button>
</body>
</html> 
```

* * *

```
<?php
echo "Hello";
?> 
```

如果我在这种情况下使用“表单”标记结构，它看起来会非常“夸张”。
你能指出我的错误吗？或者，如果我的愿景完全没有希望，那么运行 php 脚本的非常规方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T17:21:20.710

你为什么使用onclick？`onclick`执行javascript代码。

只需链接到文件

```
<a href="myscript.php">Say Hello</a> 
```

如果您必须使用 javascript，则必须使用类似的东西重定向到该页面`window.location`

这是一个[关于使用 javascript 重定向的教程](http://www.tizag.com/javascriptT/javascriptredirect.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T17:21:57.963

因为`onclick`事件评估 JScript 或 JavaScript 代码，而不是文件名。 [http://www.w3schools.com/jsref/event_onclick.asp](http://www.w3schools.com/jsref/event_onclick.asp)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T17:34:25.357

onclick 是一个所谓的事件属性。默认情况下需要javascript代码。

这个例子相当于在内容中包含一个js文件

```
test.php 
```

这会引发错误，因为没有名为 test 的对象...您可以将其放在引号中，使其成为字符串并解决问题...至少不会引发错误。

但回到您的问题：您不会启动 php 脚本吗？和

```
<form method=GET action="scriptname.php">
  <input type="text" name="name" />
  <input type="submit" value="submit" />
</form> 
```

您告诉您的浏览器打开一个包含表单中附加信息的 php 文件。当然可以在后台与 php 文件进行通信，搜索 ajax 即可。

# javascript - 我不能使用变量作为 javascript 参数

> ID：12374792
> 
> 赞同：0
> 
> 时间：2012-09-11T17:19:49.100
> 
> 标签：javascript

我在我的页面上使用 Javascript。当我使用变量将参数发送到函数时出现问题，当我直接将完整参数作为参数编写时，它就像这里一样工作得很好

```
<script type="text/JavaScript">
        var X = new MediaController({ContainerDiv:"player",MediaUrl:"test.flv"}');
</script> 
```

但是当我使用 temp 将此参数放入其中，然后使用 temp 作为参数函数时，它不起作用！

```
<script type="text/JavaScript">
    var temp;
       temp = '{ContainerDiv:"player",MediaUrl:"test.flv"}';
        var X = new MediaController(temp);
</script> 
```

我错过了一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T17:22:38.727

您正在为`temp`变量分配一个字符串，这与分配相应的对象不同。而不是这个

```
temp = '{ContainerDiv:"player",MediaUrl:"test.flv"}'; 
```

这样做：

```
temp = {ContainerDiv:"player",MediaUrl:"test.flv"}; 
```

它应该工作相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T17:22:05.653

您正在传递一个字符串，而不是一个对象。

```
var temp = {ContainerDiv: "player", MediaUrl: "test.flv"};
var X = new MediaController(temp); 
```

# windows-phone-7 - DotNetOpenAuth 是否支持 Windows Phone 项目？

> ID：12374793
> 
> 赞同：1
> 
> 时间：2012-09-11T17:19:51.173
> 
> 标签：windows-phone-7, dotnetopenauth

我收到此错误：

```
Could not install package 'DotNetOpenAuth.Core 4.1.0.12182'. You are trying to install this package into a project that target
s 'Silverlight,Version=v4.0,Profile=WindowsPhone71', but the package does not contain any assembly references that are compatible with that fram
ework. For more information, contact the package author. 
```

我知道错误消息说的是什么，但它没有任何意义 - 只有当这根本不应该在 Windows Phone 上工作时。我已经尝试过 WP7 7.0 项目，但结果相同......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T01:27:13.360

DotNetOpenAuth 目前不支持 Windows Phone。

# xampp - “无法解压缩” drush make 错误

> ID：12374796
> 
> 赞同：5
> 
> 时间：2012-09-11T17:19:54.453
> 
> 标签：xampp, mime-types, drush

我一直在对我在创建 make 文件时收到的“无法解压缩”错误感到困惑。奇怪的是 tar.gz 文件被提取而没有错误。

我在 Windows 7 上使用 XAMPP 1.8.0 和 PHP 5.4.4，并且从 xampp/htdocs/mysite 中运行 make 文件。我已经在我们的 linux 专用服务器上多次运行这个 make 文件而没有错误，但我现在在我自己的笔记本电脑上运行它。

我不是 mime 类型的专家，但错误似乎与此有关。命令提示符下的代码如下。对此的任何帮助将不胜感激！谢谢。

```
https---github.com-downloads-tinymce-tinymce-tinymce_3.4.7.zip          [notice]

retrieved from cache. [121.66 sec, 6.23 MB]
tinymce downloaded from                                                     [ok]

https://github.com/downloads/tinymce/tinymce/tinymce_3.4.7.zip.
[121.68 sec, 6.23 MB]
No fileinfo or mime_magic support available. [121.68 sec, 6.23 MB]       [debug]

Examining                                                                [debug]

C:\\\\Users\\\\myname\\\\AppData\\\\Local\\\\Temp/make_tmp_1347382411_504f6c8bb8c5
2/tinymce_3.4.7.zip
headers. [121.68 sec, 6.23 MB]
Mime type for                                                           [notice]

C:\\\\Users\\\\myname\\\\AppData\\\\Local\\\\Temp/make_tmp_1347382411_504f6c8bb8c5
2/tinymce_3.4.7.zip
is application/zip [121.68 sec, 6.23 MB]
No fileinfo or mime_magic support available. [121.68 sec, 6.23 MB]       [debug]

Examining                                                                [debug]

C:\\\\Users\\\\myname\\\\AppData\\\\Local\\\\Temp/make_tmp_1347382411_504f6c8bb8c5
2/tinymce_3.4.7.zip
headers. [121.68 sec, 6.23 MB]
Mime type for                                                           [notice]

C:\\\\Users\\\\myname\\\\AppData\\\\Local\\\\Temp/make_tmp_1347382411_504f6c8bb8c5
2/tinymce_3.4.7.zip
is application/zip [121.68 sec, 6.23 MB]
Unable to unzip 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-13T10:38:29.583

确保安装“解压缩”包（我知道，您使用的是 XAMPP，但应该有一个解决方案来说明如何在某处执行此操作）。至少 Linux`sudo apt-get install unzip`解决了我的问题。:)

# javascript - 如何检测投放的广告尺寸

> ID：12374797
> 
> 赞同：9
> 
> 时间：2012-09-11T17:20:05.403
> 
> 标签：javascript, responsive-design, ads, google-dfp

我目前正在将 Google 发布商代码与 DFP 一起使用，以便将广告投放到一个很快就会响应的网站。我们有一个特定的广告位，它可以提供 2 个潜在宽度，728 或 960，根据提供的宽度，我想将广告呈现在导航上方或下方。

因此，显而易见的第一个问题是，这是否有点理智，而且有可能吗？我怀疑我应该定义两个不同的广告位。

虽然可能更像是一个学术问题，但主要问题是如何检测已投放的广告的尺寸？我怀疑这个解决方案对于广告平台来说是不可知的，因为我基本上检测到节点插入，然后检查容器元素的尺寸。

我一直在试验 DOMNodeInserted javascript 事件，但它似乎触发了所有“但”广告。我对此感到困惑，除非 gpt 以不会触发此事件的方式插入广告。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-04-17T17:52:38.740

GPT 有一个更新，它允许以更优雅的方式完成此操作。该事件将告诉您是否返回了广告素材，如果返回了尺寸，以及其他信息。

```
googletag.pubads().addEventListener('slotRenderEnded', function(event) {
 console.log('Creative with id: ' + event.creativeId +
  ' is rendered to slot of size: ' + event.size[0] + 'x' + event.size[1]);
}); 
```

还有 event.isEmpty 会告诉您是否返回了实际的广告素材。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T08:48:19.480

我以前做过类似的事情......我决定的方法是覆盖内部 DFP 函数（renderEnded），以便我可以看到广告在屏幕上呈现的位置......

例如，要获取广告的尺寸，您可以执行以下操作（我仅在 chrome 中对此进行了测试，但距离完全跨浏览器应该不会太远）：

```
<html>
<head>
    <title>DFP test</title>

    <script type='text/javascript'>
        var googletag = googletag || {};
        googletag.cmd = googletag.cmd || [];
        (function() {
            var gads = document.createElement('script');
            gads.async = true;
            gads.type = 'text/javascript';
            var useSSL = 'https:' == document.location.protocol;
            gads.src = (useSSL ? 'https:' : 'http:') +
            '//www.googletagservices.com/tag/js/gpt.js';
            var node = document.getElementsByTagName('script')[0];
            node.parentNode.insertBefore(gads, node);
        })();
    </script>

    <script type="text/javascript">
        googletag.cmd.push(function() {
            var slot1 = googletag.defineSlot('/12345678/TEST', [266, 115], 'div-gpt-ad-1340819095858-0').addService(googletag.pubads());

            slot1.oldRenderEnded = slot1.renderEnded;
            slot1.renderEnded = function(){
                window.console.log('width: '+document.getElementById('div-gpt-ad-1340819095858-0').getElementsByTagName('iframe')[0].contentWindow.document.width);
                window.console.log('height: '+document.getElementById('div-gpt-ad-1340819095858-0').getElementsByTagName('iframe')[0].contentWindow.document.height);
                slot1.oldRenderEnded();
            };

            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
    </script>

</head>
<body>

    <div id='div-gpt-ad-1340819095858-0' style='width:266px; height:115px;'>
        <script type='text/javascript'>
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1340819095858-0');
            });
        </script>
    </div>

</body>
</html> 
```

这可能不是您所追求的，但覆盖该功能应该可以让您到达您需要的地方......如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:09:05.287

所以像往常一样，我想太多了。我没有检测到 DOM 更改的原因是因为在我分配事件处理程序时已经插入了广告。当同步加载广告时，我可以立即测量容器 div 的尺寸并获取广告尺寸。异步加载时，我可以通过使用存储原始 html 并轮询更改并在更改发生时测量容器 div 来轮询内部 html 更改。感谢布拉德的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T17:24:38.070

我在使用 Google AdSense 的 WiiMusic.net 上遇到了类似的问题。我最终做的是使用 JavaScript 检测包含广告的 div 的大小，然后加载广告。在这种情况下，一旦加载，就无法更改页面的分辨率或大小，所以这很有效。

在你的情况下，你的页面当然可以改变大小，什么不能。如果您希望根据您的响应式设计显示不同的广告版本，我认为您将不得不重新加载广告。如果您使用的是异步广告代码，这应该是可能的。

总而言之，是的，这对于 JavaScript 来说是合理且可能的。无论如何，您的广告都需要 JavaScript 才能正常工作，因此这应该不是太大的障碍。

# python - 从 Python 中的文本文件导入 3-D 列表变量

> ID：12374798
> 
> 赞同：5
> 
> 时间：2012-09-11T17:20:08.257
> 
> 标签：python, list, variables, import

我需要知道是否可以从文本文件中的声明轻松地在脚本中分配变量。基本上，我希望用户能够通过文本文件更改变量以匹配所需的数字，而不必摆弄源代码。

文本文件输入格式：

```
faultInfo = [
             [["L1603",1,5],[271585,972739],[272739,872739, 272739,972739, 271585,972739, 271585,272389, 270999,272389]],
             [["L1605",1,5],[271897,872739],[272739,872739, 272739,972739, 271891,872739, 271891,272119, 270963,272119]],
             [["L1607",1,4],[271584,272738],[271584,272738, 271584,272388, 270998,272388, 270998,272386]]
            ] 
```

我只是想将它加载到我的脚本中具有相同名称的列表变量中。我是 Python 新手，不是 CS 专业或任何其他专业。我知道我可以使用循环等加载 3-D 列表，但似乎应该有一种快速的方法来做到这一点，因为第 k 个维度的大小是锯齿状的，并且会因情况而异。

提前致谢。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:27:47.070

您可以制作一个 .py 文件，例如`configuration.py`amd 将此变量放入此文件中。如果用户想改变这个变量中的数字，他或她只需要通过简单的文本编辑器打开这个文件并更正 faultInfo 声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T17:30:14.940

这些数据看起来很简单，您可以使用`json.loads`或`ast.literal_eval`（都在标准库中）来解析它：

```
>>> a = """[
...              [["L1603",1,5],[271585,972739],[272739,872739, 272739,972739, 271585,972739, 271585,272389, 270999,272389]],
...              [["L1605",1,5],[271897,872739],[272739,872739, 272739,972739, 271891,872739, 271891,272119, 270963,272119]],
...              [["L1607",1,4],[271584,272738],[271584,272738, 271584,272388, 270998,272388, 270998,272386]]
...             ]
... 
... """
>>> import ast
>>> ast.literal_eval(a)
[[['L1603', 1, 5], [271585, 972739], [272739, 872739, 272739, 972739, 271585, 972739, 271585, 272389, 270999, 272389]], [['L1605', 1, 5], [271897, 872739], [272739, 872739, 272739, 972739, 271891, 872739, 271891, 272119, 270963, 272119]], [['L1607', 1, 4], [271584, 272738], [271584, 272738, 271584, 272388, 270998, 272388, 270998, 272386]]]
>>> import json
>>> json.loads(a)
[[[u'L1603', 1, 5], [271585, 972739], [272739, 872739, 272739, 972739, 271585, 972739, 271585, 272389, 270999, 272389]], [[u'L1605', 1, 5], [271897, 872739], [272739, 872739, 272739, 972739, 271891, 872739, 271891, 272119, 270963, 272119]], [[u'L1607', 1, 4], [271584, 272738], [271584, 272738, 271584, 272388, 270998, 272388, 270998, 272386]]] 
```

您可以轻松地`a`从`file.read()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T17:30:02.830

[`eval()`](http://docs.python.org/library/functions.html#eval)如果您省略了赋值，那么一种快速而肮脏的方法是使用该函数。例如，如果您的文件`param.txt`是：

```
 [
     [["L1603",1,5],[271585,972739],[272739,872739, 272739,972739, 271585,972739, 271585,272389, 270999,272389]],
     [["L1605",1,5],[271897,872739],[272739,872739, 272739,972739, 271891,872739, 271891,272119, 270963,272119]],
     [["L1607",1,4],[271584,272738],[271584,272738, 271584,272388, 270998,272388, 270998,272386]]
 ] 
```

加载它的一种简单方法（正如我所说的脏）是：

```
with open('param.txt') as f:
    file_text = ' '.join(f.readlines()) #Join lines with a blank ' ' space
parameter = eval(file_text) 
```

# ios - 有 AN XIB 时更改 TableView 大小

> ID：12374800
> 
> 赞同：0
> 
> 时间：2012-09-11T17:20:10.410
> 
> 标签：ios, uitableview

我的 UITableViewController 类使用 .xib。我想让 TableView 只占屏幕大小的一半，以便我可以添加更多内容。无论如何要这样做，还是我需要在代码中创建它，而不是使用.xib。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:31:43.467

[该线程](https://stackoverflow.com/questions/222956/using-a-uitableviewcontroller-with-a-small-sized-table)涵盖了类似的情况。在实践中，使用标准并手动`UIViewController`实现`UITableViewDataSource`和方法会更容易。`Delegate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:31:13.027

你不能调整 UITableViewController 类的大小，如果你想在表格下添加一些东西，请将它放在它的页脚处。

您还可以通过XIB在UIViewController中声明UITableView，通过XIB可以调整它的大小。

在 .h 文件中 IBOutlet UITableView *tView; 并将其连接到文件所有者

谢谢

# linux - 创建目录作为 ssh 链接

> ID：12374801
> 
> 赞同：4
> 
> 时间：2012-09-11T17:20:13.547
> 
> 标签：linux, ssh, scp

我想创建一个通过 ssh 链接到外部站点的目录。这样当我 cd 到 /var/remote/dev01 时，它实际上会 cd 到远程站点上的文件夹。所以我留在我当前的终端上，可以将文件从任何其他目录复制到这个 /var/remote/dev01 目录，它会将文件复制到远程主机。这甚至可行吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T17:22:39.430

是的，这是可能的。看看[SSHFS](http://en.wikipedia.org/wiki/SSHFS)。它允许您通过 ssh 挂载远程文件系统，并将其视为本地挂载点，以进行标准文件系统操作。

这是一个很好的[演练](https://help.ubuntu.com/community/SSHFS)，可以帮助您入门。

# javascript - 寻找用于格式化字符串以匹配 json 要求的 js 库

> ID：12374804
> 
> 赞同：-2
> 
> 时间：2012-09-11T17:20:32.677
> 
> 标签：javascript, jquery, ajax, json, special-characters

我正在使用 jQuery ajax 将更新从客户端的浏览器发送到我的服务器，
我注意到有一些 JSON 不支持的字符，
为了发送它们，我需要在每个字符前面添加额外的 \。

这些字符在 json.com 上有很好的记录：

[![json字符串](../Images/c33aead47b46abbe1563799f6dd22dee.png)](https://i.stack.imgur.com/fXFmV.gif)
[（来源：[json.org](http://www.json.org/string.gif)）]

我不太擅长 javascripting（我是这个领域的新手），
所以我想知道是否有任何已经制作的函数需要一个字符串并对其进行格式化以适应这个要求？

iv'e 搜索了网络，但找不到任何 javascript 解决方案。

在此先感谢，艾坦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:16:58.547

解决了！我在这个@$ 上花了太多时间！

我发现 JSON.stringify 确实处理了特殊字符。
问题在于我用来构建数据的方式......
我这样做了：

```
blah = JSON.stringify( { a: "1" } );
$.ajax({
         type: "POST",
         url: "page.aspx/MethodName",
         data: "{ paramName: '" + blah + "'}",
         contentType: "application/json; charset=utf-8",
         dataType: "json"}); 
```

为了解决这个问题，我刚刚做了：

```
//nesting the param name in the data structure passed to stringify:
blah = JSON.stringify( { paramName : { a: "1" } } ); 
    $.ajax({
             type: "POST",
             url: "page.aspx/MethodName",
             data: blah,
             contentType: "application/json; charset=utf-8",
             dataType: "json"}); 
```

感谢所有试图帮助我解决这个问题的人..

# eclipse - Maven gae 插件和热重新部署

> ID：12374805
> 
> 赞同：2
> 
> 时间：2012-09-11T17:20:34.083
> 
> 标签：eclipse, maven, maven-gae-plugin

我正在使用 maven-gae-plugin-0.9.4.jar。

我在本地服务器中开发时遇到热重新部署问题。

我运行**mvn gae:run**来启动服务器。我将尝试使用 scanIntervalSeconds 配置插件，就像我可以在 mave-jetty-plugin 中所做的那样，但这不起作用。我试图寻找解决方案好几天，但没有运气。

我可以做一个解决方法，在单独的控制台或 Eclipse 中执行**资源：资源编译器：编译战争：爆炸**，但很遗憾插件不能单独做到这一点。

有什么建议么？

# javascript - JavaScript - === vs == 运算符性能

> ID：12374815
> 
> 赞同：33
> 
> 时间：2012-09-11T17:21:20.900
> 
> 标签：javascript, performance, equality, comparison-operators, equality-operator

几周前，我读过这个线程[< 比 <= 快吗？](https://stackoverflow.com/questions/12135518/is-faster-than)关于比较运算符`C`。据说它们之间的性能没有差异，`<`因为`<=`它们被解释为相同/相似的机器命令。

同时，在我们公司的“最佳实践”中，有人说我们应该始终使用“===”来比较事物，而不是“==”。所以，我开始怀疑这是否总是合适的，因为我习惯使用“==”和“typeof ... ==”并且不想改变我的写作方式:-]

请注意，这是在 JavaScript 的上下文中。

所以，我做了一点研究，在这里[JavaScript 比较中应该使用哪个等于运算符（== vs ===）？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)据说：

> 这是因为相等运算符 == 确实类型强制...意味着解释器隐式尝试转换值然后进行比较。
> 
> 另一方面，恒等运算符 === 不进行类型强制，因此在比较时它不会转换值的值

我开始怀疑这是否意味着当我使用“===”运算符时，我会获得良好的性能，因为不会花费任何资源来转换操作数。而在所有的代码都变成了机器命令之后，这是否意味着就像`C`你使用`<`and的时候没有区别`<=`一样，这在 JavaScript 和其他语言中也是一样的？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2016-08-22T19:52:22.857

我觉得最好用易于验证的证据来回答。

这些操作非常小，很难对其进行性能测试。

*   == 1648 对
*   === 1629 对
*   控制测试 1575 真

如果你减去控制测试，看起来它们在我的浏览器上的速度有大约 30% 的差异。如果您多次这样做，您可以获得不同的答案，但 === 通常出现最快，我认为这只是证明差异是多么微不足道。

我认为这几乎证明了其他人所说的，性能差异是浪费时间去思考，**但它也表明 === 实际上更快**。希望这个答案可以节省其他人的时间，那些必须看到证据的人。

**2019 年更新**

2019-04-09 Firefox 改进测试：

*   == 1383 对
*   === 1167 对
*   控制测试 429 真

2019-04-09 Chrome 改进测试：

*   == 249 对
*   === 248 对
*   控制测试 248 真

2019-04-09 改进测试的边缘：

*   == 22510 真
*   === 20315 真
*   控制测试 4968 真

多年来，浏览器变得越来越智能，而且我最初的测试似乎与 Chrome 和 Firefox 中的酷优化相悖，使其不再有用。我使测试更难优化，并增加了运行次数以再次获得有意义的结果。 **看起来 === 仍然更快**。担心这可能仍然是浪费时间。

```
var testString = "42";
var testString2 = "43";
var testString3 = "42";
var testNumber = 42;
var testNumber2 = 43;
var testNumber3 = 42;

var testObject = {};
var testObject2 = {};
var testObject3 = testObject;

var start = Date.now();
var result = null;
for(var i = 0; i < 200000000; i++){
	result = 
	testString == testString2 || testNumber == testNumber2 || testObject == testObject2 || 
	testString == testString2 || testNumber == testNumber2 || testObject == testObject2 || 
	testString == testString2 || testNumber == testNumber2 || testObject == testObject2 || 
	testString == testString2 || testNumber == testNumber2 || testObject == testObject2 || 
	testString == testString2 || testNumber == testNumber2 || testObject == testObject2 || 
	testString == testString2 || testNumber == testNumber2 || testObject == testObject2 || 
	testString == testString2 || testNumber == testNumber2 || testObject == testObject2 || 
	testString == testString2 || testNumber == testNumber2 || testObject == testObject2 || 
	testString == testString2 || testNumber == testNumber2 || testObject == testObject2 || 
	testString == testString2 || testNumber == testNumber2 || testObject == testObject2 || 
	testString == testString3 && testNumber == testNumber3 && testObject == testObject3 && 
	testString == testString3 && testNumber == testNumber3 && testObject == testObject3 && 
	testString == testString3 && testNumber == testNumber3 && testObject == testObject3 && 
	testString == testString3 && testNumber == testNumber3 && testObject == testObject3 && 
	testString == testString3 && testNumber == testNumber3 && testObject == testObject3 && 
	testString == testString3 && testNumber == testNumber3 && testObject == testObject3 && 
	testString == testString3 && testNumber == testNumber3 && testObject == testObject3 && 
	testString == testString3 && testNumber == testNumber3 && testObject == testObject3 && 
	testString == testString3 && testNumber == testNumber3 && testObject == testObject3 && 
	testString == testString3 && testNumber == testNumber3 && testObject == testObject3
}

console.log("==", Date.now() - start, result);

var start = Date.now();
var result = null;
for(var i = 0; i < 200000000; i++){
	result =
	testString === testString2 || testNumber === testNumber2 || testObject === testObject2 || 
	testString === testString2 || testNumber === testNumber2 || testObject === testObject2 || 
	testString === testString2 || testNumber === testNumber2 || testObject === testObject2 || 
	testString === testString2 || testNumber === testNumber2 || testObject === testObject2 || 
	testString === testString2 || testNumber === testNumber2 || testObject === testObject2 || 
	testString === testString2 || testNumber === testNumber2 || testObject === testObject2 || 
	testString === testString2 || testNumber === testNumber2 || testObject === testObject2 || 
	testString === testString2 || testNumber === testNumber2 || testObject === testObject2 || 
	testString === testString2 || testNumber === testNumber2 || testObject === testObject2 || 
	testString === testString2 || testNumber === testNumber2 || testObject === testObject2 || 
	testString === testString3 && testNumber === testNumber3 && testObject === testObject3 && 
	testString === testString3 && testNumber === testNumber3 && testObject === testObject3 && 
	testString === testString3 && testNumber === testNumber3 && testObject === testObject3 && 
	testString === testString3 && testNumber === testNumber3 && testObject === testObject3 && 
	testString === testString3 && testNumber === testNumber3 && testObject === testObject3 && 
	testString === testString3 && testNumber === testNumber3 && testObject === testObject3 && 
	testString === testString3 && testNumber === testNumber3 && testObject === testObject3 && 
	testString === testString3 && testNumber === testNumber3 && testObject === testObject3 && 
	testString === testString3 && testNumber === testNumber3 && testObject === testObject3 && 
	testString === testString3 && testNumber === testNumber3 && testObject === testObject3
}
console.log("===", Date.now() - start, result);
var start = Date.now();
var alwaysTrue = true;
var alwaysFalse = false;
for(var i = 0; i < 200000000; i++){
	result = 
	alwaysFalse || alwaysFalse || alwaysFalse || 
	alwaysFalse || alwaysFalse || alwaysFalse || 
	alwaysFalse || alwaysFalse || alwaysFalse || 
	alwaysFalse || alwaysFalse || alwaysFalse || 
	alwaysFalse || alwaysFalse || alwaysFalse || 
	alwaysFalse || alwaysFalse || alwaysFalse || 
	alwaysFalse || alwaysFalse || alwaysFalse || 
	alwaysFalse || alwaysFalse || alwaysFalse || 
	alwaysFalse || alwaysFalse || alwaysFalse || 
	alwaysFalse || alwaysFalse || alwaysFalse || 
	alwaysTrue && alwaysTrue && alwaysTrue && 
	alwaysTrue && alwaysTrue && alwaysTrue && 
	alwaysTrue && alwaysTrue && alwaysTrue && 
	alwaysTrue && alwaysTrue && alwaysTrue && 
	alwaysTrue && alwaysTrue && alwaysTrue && 
	alwaysTrue && alwaysTrue && alwaysTrue && 
	alwaysTrue && alwaysTrue && alwaysTrue && 
	alwaysTrue && alwaysTrue && alwaysTrue && 
	alwaysTrue && alwaysTrue && alwaysTrue && 
	alwaysTrue && alwaysTrue && alwaysTrue
}
console.log("control test", Date.now() - start, result);
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-25T12:10:32.667

首先，性能根本不是问题。对于任何实际脚本，与代码中的其他瓶颈相比，使用一个运算符相对于另一个运算符的任何性能增益都将非常小（通常 DOM 操作将是第一目标）。

其次，在很多情况下，`==`会`===`执行**完全相同的步骤**。当两个操作数的类型相同时（例如，两个字符串或两个数字），ECMAScript 规范对两个运算符的步骤完全相同。因此，如果您在一个浏览器或其他环境中观察到相同类型的操作数的两个运算符之间的性能差异，则既不能保证也不能保证您会在另一个浏览器中看到类似的差异。

在 的情况下`typeof`，如您的问题中所述，两个操作数保证为相同类型（字符串），并且两个运算符将做完全相同的事情，**因此偏爱一个运算符而不是另一个运算符的唯一原因是 stylistic**。

整个 JS 社区对此采取了相当强硬的态度：共识似乎是“永远不要使用`==`，`!=`除非你需要类型强制”，这对我的口味来说太教条了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T17:25:31.907

它是一种脚本语言。这些运算符的性能*不应该*那么重要，你应该担心它，因为还有很多其他的东西会消耗更多的能量，比如它在虚拟机中运行、弱类型、与 HTML 一起工作。浏览器中的DOM...

此外，两个运算符做的事情完全不同，因此在任何情况下，一个可能无法与另一个互换。

也就是说，我认为（但尚未测试）`===`更快。原因是，它只需要比较类型，如果匹配，则比较原始数据。`==`如果它们不匹配，操作员将尝试将一种类型转换为另一种类型。在大多数情况下，这将是一项更昂贵的操作。

这是幸运的，因为在大多数情况下`===`是更好的选择。:)

但无论如何，您可以轻松测试它（确保您测试多个案例，包括相同类型和几个不同类型），但如果您不知道如何测试它，我完全不用担心它。差异，如果有的话，不会杀死你。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-11T17:24:06.807

无论您获得什么性能，`===`在这种情况下显然是更好的选择。诸如更好的性能之类的其他任何事情都只是锦上添花。此外，任何一种方式的差异都很小。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-11T17:24:39.253

性能差异可以忽略不计，这意味着您不应该浪费宝贵的大脑周期来思考它。如果你真的想知道，你应该测试。

`===`除非你有充分的理由不使用（你可能没有），否则使用。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-09-11T17:26:39.987

对于 js，如果在字符串类型上使用 === 运算符并且字符串是完全相同的字符，则 === 运算符将返回 true。对于对象，它比较对象引用，而不是内容。

从[ECMA标准](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)：

> 11.9.6 严格等式比较算法 比较 x === y，其中 x 和 y 是值，产生真或假。如下进行这样的比较：
> 
> 1.  如果 Type(x) 与 Type(y) 不同，则返回 false。
> 2.  如果 Type(x) 未定义，则返回 true。
> 3.  如果 Type(x) 为 Null，则返回 true。
> 4.  如果 Type(x) 是 Number，那么 a. 如果 x 是 NaN，则返回 false。湾。如果 y 是 NaN，则返回 false。C。如果 x 与 y 的数值相同，则返回 true。d。如果 x 为 +0 且 y 为 -0，则返回 true。e. 如果 x 为 -0 且 y 为 +0，则返回 true。F。返回假。
> 5.  如果 Type(x) 是 String，则如果 x 和 y 是完全相同的字符序列（相同的长度和对应位置的相同字符），则返回 true；否则，返回假。
> 6.  如果 Type(x) 是布尔值，如果 x 和 y 都为真或都为假，则返回真；

# android - 在 onCreate 之前调用 ListFragment onPrepareOptionsMenu。为什么以及如何修复/绕过？

> ID：12374816
> 
> 赞同：9
> 
> 时间：2012-09-11T17:21:23.097
> 
> 标签：android, android-fragments, android-menu

好的，所以我有FavoritesList 扩展GalleryList 扩展ListFragment：

```
public static class FavoritesList extends GalleryList {

    public static FavoritesList newInstance(int page) {
        FavoritesList list = new FavoritesList();

        Bundle args = new Bundle();
        args.putInt("page", page);
        list.setArguments(args);

        return list;
    }

    @Override
    public void onCreate(Bundle saveInstanceState) {
        super.onCreate(saveInstanceState);

        Cursor cursor = dbHelper.getGalleries(fav, preferences.getString("sort"+fav, "date desc"));
        listAdapter = new GalleryListAdapter(activity, cursor);
        setListAdapter(listAdapter);
    }

    ...

    @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        super.onCreateOptionsMenu(menu, inflater);
        menu.add(Menu.NONE, 0, 8, "Remove All");
    }

    @Override
    public void onPrepareOptionsMenu(Menu menu) {
        super.onPrepareOptionsMenu(menu);

        //listAdapter is null the first time this is called...

        if (listAdapter != null && listlistAdapter.getCount() == 0) {
            menu.findItem(R.id.filter).setEnabled(false);
            menu.findItem(0).setEnabled(false);
        }
        else {
            menu.findItem(R.id.filter).setEnabled(true);
            menu.findItem(0).setEnabled(true);
        }
    }
} 
```

这是问题所在：在加载此 Fragment 时，在 onCreate（我初始化 listAdapter）*之前*调用了 onPrepareOptionsMenu，并且在第一次显示选项菜单之前*不会再次调用它！*

当[Fragment 文档](http://developer.android.com/reference/android/support/v4/app/Fragment.html#onPrepareOptionsMenu(android.view.Menu))声称 onPrepareOptionsMenu “在菜单显示*之前，**每次*显示时都被调用”时，它是完全错误的。

ps 我正在使用 Android 支持库 (v4)。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:28:50.167

尝试调用`invalidateOptionsMenu()`您的`onCreate()`. 确保检查您的列表适配器是否`null`打开`onPrepareOptionsMenu()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T17:39:04.017

因此，尽管这很愚蠢，但这是一个有效的解决方法：

```
public static class FavoritesList extends GalleryList {

    Menu optionsMenu;

    ...

    @Override
    public void onCreate(Bundle saveInstanceState) {
        super.onCreate(saveInstanceState);

        Cursor cursor = dbHelper.getGalleries(fav, preferences.getString("sort"+fav, "date desc"));
        listAdapter = new GalleryListAdapter(activity, cursor);
        setListAdapter(listAdapter);

        if (optionsMenu != null) {
            onPrepareOptionsMenu(optionsMenu);
        }
    }

    ...

    @Override
    public void onPrepareOptionsMenu(Menu menu) {
        super.onPrepareOptionsMenu(menu);

        optionsMenu = menu;

        if (listAdapter != null && listAdapter.getCount() == 0) {
            menu.findItem(R.id.filter).setEnabled(false);
            menu.findItem(0).setEnabled(false);
        }
        else {
            menu.findItem(R.id.filter).setEnabled(true);
            menu.findItem(0).setEnabled(true);
        }
    }
} 
```

基本上，我在 onPrepareOptionsMenu 的第一次运行期间抓取了选项菜单，然后在初始化 listAdapter 后再次调用它。

**编辑：**显然不检查 ​​optionsMenu 是否为空，这将在某些手机上中断。我应该意识到的。

# jquery - 手动取消行内编辑？

> ID：12374834
> 
> 赞同：0
> 
> 时间：2012-09-11T17:22:22.627
> 
> 标签：jquery, jqgrid

当用户单击添加并点击重新加载按钮而不保存行时，添加按钮不会恢复。保存和取消按钮仍处于活动状态。如何手动取消行内编辑？或者有没有办法找到这些按钮以便我可以隐藏它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:36:20.333

要启用由[inlineNav](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing#inlinenav)添加的按钮，您需要删除类`'ui-state-disabled'`（调用`.removeClass('ui-state-disabled')`）。要禁用该按钮，您需要添加类`'ui-state-disabled'`（调用`.addClass('ui-state-disabled')`）。要识别（根据 jQuery 选择）按钮，您需要知道按钮的 id 将由网格的 id 和基于按钮名称构造的后缀构成：`"_ilsave"`, `"_ilcancel"`, `"_iladd"`, `"_iledit"`。例如，如果网格`"list"`的 id 是，那么保存按钮的 id 将是`"list_ilsave"`。

要在刷新网格之前或之后重置按钮的状态，您可以使用`afterRefresh`或`beforeRefresh`回调`navGrid`（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3anavigator#parameters)）或在`loadComplete`回调中执行此操作。例如

```
loadComplete: function () {
    var idSelector = "#" + $.jgrid.jqID(this.id);
    $(idSelector +"_ilsave").addClass('ui-state-disabled');
    $(idSelector +"_ilcancel").addClass('ui-state-disabled');
    $(idSelector +"_iladd").removeClass('ui-state-disabled');
    $(idSelector +"_iledit").removeClass('ui-state-disabled');
} 
```

或者，您可以使用`showAddEditButtons`而不是上述所有调用：

```
loadComplete: function () {
    $(this).jqGrid("showAddEditButtons");
} 
```

我包含上面的代码主要是为了您需要对按钮进行其他类型的“启用”或“禁用”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:36:48.357

您需要使用该`restoreRow`功能，请参见此处：[http ://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing&s%5B%5D=editrow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing&s%5B%5D=editrow)

您可以使用以下功能制作一个始终恢复所选行的按钮：

```
$('#the_button').click(function(){
    var rowid = jQuery('#grid_id').jqGrid('getGridParam', 'selrow');
    jQuery("#grid_id").jqGrid('restoreRow',rowid, function(){});
}); 
```

# objective-c - 为什么我可以在 [super dealloc] 之后释放 ivar 而没有段错误？

> ID：12374836
> 
> 赞同：2
> 
> 时间：2012-09-11T17:22:31.343
> 
> 标签：objective-c, cocoa, memory-management, dealloc

似乎在 Objective-C 中，负责内存分配的方法（就像`malloc()`在 C 中一样）是`-[NSObject alloc]`. 释放那段记忆怎么样？是由 做的`-[NSObject dealloc]`吗？这就是为什么在我们自己的班级中`dealloc`，我们必须`[super dealloc]`最后调用，而不是第一个？

我问是因为我不明白为什么，如果我`[super dealloc]`先放，然后在下一行使用释放对象`[_bar release]`，我不会遇到分段错误。运行后`[super dealloc]`，如果它释放了对象的内存，`_bar`应该已经是一个不属于进程的内存块。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T17:36:26.040

我想你是说，你有这个代码：

```
- (void)dealloc
{
    [super dealloc];
    [_bar release]; // _bar is a member variable
} 
```

而且您希望在第二行出现分段错误，但实际上并非如此。

原因是运气！

操作系统将捕获对您的进程不拥有的内存的访问，但它不会监管您进程内发生的所有事情。在这种情况下，您正在访问已标记为空闲的内存，但它仍然属于您的进程，因此行为是*undefined*。内存在几毫秒前是有效的，所以很可能还没有人开始重用这页内存，所以它可能仍然有有效的数据。所以它可能会成功。但它也可能失败。

这是糟糕的代码，你不应该发布它。但仅仅因为它不正确和未定义并不意味着它不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T17:26:36.710

`-dealloc`最终释放与 Objective-C 对象关联的内存（可能是通过`free()`，但这是一个实现细节。）您能够在之后发送消息的唯一原因`-dealloc`是由于未定义的行为。发送后`[super dealloc]`，任何进一步的消息`self`或其 ivars 都是不安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T17:36:52.280

在最简单的“概念”情况下，`dealloc`NSObject 的例程执行`free`操作，镜像例程`malloc`中的完成`alloc`。在实践中它可能会有所不同，但这都是雾里看花，只要概念模型得到满足。

如果您`[super dealloc]`首先将其放入（ARC 之前）`dealloc`例程中，则它通常不会出现段错误，因为该空间在被释放时没有时间被其他对象覆盖（并且在释放时它不会物理消失-它只是进入一个“可用”列表）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T17:41:32.390

是的，`alloc`是分配完成的地方。请注意，它可能会或可能不会完成，有时根本没有分配（这是一个实现细节）。分配通常发生`NSObject`在`alloc`.

**如果**分配了内存，那么链式调用`dealloc`就是最终释放它的调用。

调用后不应该访问实例变量`[super dealloc]`。这并不意味着如果你这样做了，你就会得到一个段错误。您可能会或可能不会出现段错误，这是未定义的行为。

但是，要记住的重要一点是，除了在 dealloc 实现本身中的调用之外，您**永远不**应该直接调用。Objective C 是引用计数的。当您完成一个对象时，您不会这样做。取而代之的是你它（或者如果你完成了它，但你将它返回给调用者并且不知道调用者是否会使用它）。当系统确定没有人再引用该对象时，实际调用会自动发生。`dealloc``[super dealloc]``dealloc``release``autorelease``dealloc`

编辑：

我会澄清*有时根本没有分配*。事实上，如果您调用 alloc，分配通常会发生，但 init* 方法可能会撤消它。通常，所有对`alloc`的调用都应紧跟对其中一个初始化程序的调用。然而，初始化器不需要初始化`self`它们接收到的。相反，他们可以摆脱它（因此释放内存）并返回一个完全不同的对象，该对象可能已分配也可能未分配。

因此，在这种情况下，分配的内存`alloc`实际上是由初始化程序释放的（可能会或可能不会调用`dealloc`）。并且初始化后得到的对象可能是一个静态对象，没有在堆上分配，永远不会被释放。它也可以是一个非指针（无效地址），被转换为`(void*)`(aka `id`) 并返回。

# ios - 如何在 iOS 上通过安全连接流式传输视频

> ID：12374841
> 
> 赞同：1
> 
> 时间：2012-09-11T17:22:42.613
> 
> 标签：ios, video, uiwebview, stream, mpmovieplayercontroller

我可以从本地资源（在设备上）播放视频。我可以从不受保护的互联网流式传输视频。我**无法**从公司内部网流式传输（来自内部或外部）

典型的安全公司网络。视频存储在 SharePoint 2007 列表中（但我有视频文件的 url）。

我试过了：

*   MPMoviePlayer控制器
*   MPMoviePlayerViewController
*   UIViewView（使用`<video>`标签和视频 url 即时创建 html）

我什么也做不了。哎呀，我什至无法让它直接进入 iPad 上 Safari 中的链接。我唯一没有尝试过的是将其下载为文件然后在本地播放。由于存在许多可用性问题，这不是首选。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:04:20.390

有2个问题。

1.  `MPMoviePlayerController`不支持`NSURLConnection`. 解决方案是在您的安全区域内的某个地方做一个“虚拟” `NSURLConnection`，让它处理所有挑战并将其设置为存储会话信息。从这里开始，`MPMoviePlayerController`或其他不支持 SSL 请求的输入和输出的连接将使用现有会话。
2.  必须在服务器上安装有效的中间证书。我自己永远也想不通的东西。它作为一个小项目存在于安全连接下的指南之一中。

# php - 是否可以通过一种形式进行 php 和 .htaccess 身份验证？

> ID：12374842
> 
> 赞同：0
> 
> 时间：2012-09-11T17:22:43.357
> 
> 标签：php, .htaccess

我在我的网站上同时使用 PHP 和 .htaccess 登录系统。两种身份验证都是单独处理的（即 php 通过查询数据库和 .htaccess 通过在根目录中包含密码文件）。PHP 登录将用户定向到特定页面，.htaccess 登录将用户定向到包含子目录和各种文件的特定目录。根据当前情况，如果用户想要访问目录，他需要登录两次。第一次登录将他引导到一个页面，在该页面中他找到了一个链接，然后再次单击该链接会提示他输入用户名和密码并将他引导到目录。

有没有一种方法可以简化两个身份验证问题并使其成为一个。我的意思是登录系统应该以这样一种方式工作，如果用户 A 登录，他将被定向到页面，如果用户 B 通过相同的登录名登录，他应该被定向到目录？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:25:26.257

您可以在以下位置使用`PHP_AUTH_USER`和`PHP_AUTH_PW`值`$_SYSTEM`： http: [//php.net/manual/en/features.http-auth.php](http://php.net/manual/en/features.http-auth.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-09T00:26:00.647

您可以尝试通过设置“Authorization”HTTP 标头来使用 HTTP 身份验证登录，此标头的值设置为 string `basic username:password`，但`username:password`部分通过`base64_encode`. [资源](https://stackoverflow.com/a/55744/1935500)

然而，这似乎是一个糟糕的设计。两个脚本是否在同一台服务器上，如果是，那么它们可以从后端访问相同的资源。

您可以做的另一个选择是将保护切换为使用 php： http: [//php.net/manual/en/features.http-auth.php](http://php.net/manual/en/features.http-auth.php)

# javascript - 通过条件运算符调用的视图上的 Emberjs DOM 异常 8 错误

> ID：12374846
> 
> 赞同：1
> 
> 时间：2012-09-11T17:22:58.713
> 
> 标签：javascript, ember.js

我正在构建一个 Ember 应用程序，我必须根据用户是否登录来换出导航视图。条件重定向有效，但是每当路由器从注销状态移动到登录状态。

如果我不进行导航交换，那么模板会在转换时正确呈现。或者，如果我手动刷新页面，那么它将呈现，我当然不想那样做。该错误似乎仅在我放置条件运算符以呈现视图时发生。我将所有条件放在路由器或控制器中。

有没有其他人遇到过这个问题，如果有，你是如何解决的？另外，我在源代码中读到有一个名为disconnectOutlet 的方法。有没有人使用过这个或者有关于我如何在代码中调用它的建议？谢谢！！

# java - 有什么方法可以将 OrmLite 与 Postgres hstore 一起使用？

> ID：12374848
> 
> 赞同：4
> 
> 时间：2012-09-11T17:23:16.340
> 
> 标签：java, postgresql, ormlite

我们目前正在使用 PostgreSQL 数据库和 OrmLite。我们现在有一个使用[Postgres hstore](http://www.postgresql.org/docs/9.0/static/hstore.html)的用例，但找不到通过 OrmLite 访问该表的任何方法。我宁愿避免打开单独的数据库连接只是为了选择并插入该表，但我没有看到任何其他选项。

至少我想要 OrmLite 正在使用的现有连接的句柄，以便我可以重用它来构建准备好的语句，但我还没有找到`java.sql.Connection`从 OrmLite ConnectionSource 开始的方法`.` 我看到 OrmLite 有一个`JdbcCompiledStatement`，但这只是 a 的包装`PreparedStatement`，需要`PreparedStatement`将 传递给构造函数。（不确定它的用例是什么。）

我尝试使用`DatabaseConnection.compileStatement(...)`，但这需要了解正在使用的字段类型，而 OrmLite 似乎不知道 hstore 是什么。

我尝试使用`updateRaw()`，但该功能仅存在于我没有的 OrmLite dao 上，因为我将 dao 链接到的表具有 OrmLite 无法识别的字段类型。有没有办法让一个通用的 dao 发出原始查询？

我知道 hstore 是特定于数据库的，OrmLite 可能不支持，但我真的很想找到一种方法来使用不受支持的字段而不是仅不受支持的查询将数据传输到数据库和从数据库传输数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:28:38.827

听起来 ConnectionSource 可能实际上是由 JdbcConnectionSource 实现的，并且可能会返回一个 JdbcDatabaseConnection。该对象有一个 getInternalConnection 方法，看起来像您要查找的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T22:27:09.587

@Gray 我在 SourceForge 上提交了一个 ORMLite 补丁，可以启用“其他”数据类型。补丁 ID 为 3566779。使用此补丁，可以支持 hstore。

用户需要将 PGHStore 类添加到他们的项目中。这个类的代码在[这里](http://archives.postgresql.org/pgsql-jdbc/2009-12/msg00037.php.)。

用户还需要添加一个持久类，如下所示：

```
package com.mydomain.db.persister;

import com.mydomain.db.PGHStore;
import com.j256.ormlite.field.FieldType;
import com.j256.ormlite.field.SqlType;
import com.j256.ormlite.field.types.BaseDataType;
import com.j256.ormlite.support.DatabaseResults;
import java.sql.SQLException;

public class PGHStorePersister extends BaseDataType {

    private static final PGHStorePersister singleton = new PGHStorePersister();

    public static PGHStorePersister getSingleton() {
        return singleton;
    }

    protected PGHStorePersister() {
        super(SqlType.OTHER, new Class<?>[] { PGHStore.class });
    }

    protected PGHStorePersister(SqlType sqlType, Class<?>[] classes) {
        super(sqlType, classes);
    }

    @Override
    public Object parseDefaultString(FieldType ft, String string) throws SQLException {
        return new PGHStore(string);
    }

    @Override
    public Object resultToSqlArg(FieldType fieldType, DatabaseResults results, int columnPos) throws SQLException {
        return results.getString(columnPos);
    }

    @Override
    public Object sqlArgToJava(FieldType fieldType, Object sqlArg, int columnPos) throws SQLException {
        return new PGHStore((String) sqlArg);
    }

    @Override
    public boolean isAppropriateId() {
        return false;
    }
} 
```

最后，用户需要注释他们的数据才能使用持久化器。

```
@DatabaseField(columnName = "myData", persisterClass=PGHStorePersister.class) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T19:40:45.800

> 至少我想要一个 OrmLite 正在使用的现有连接的句柄，这样我就可以重用它来构建一个准备好的语句......

好的，这很容易。正如@jsight 提到的，用于 JDBC的[ORMLite](http://ormlite.com/) 是. 当您使用 获得该类的连接时，您将获得真正的 a并且可以转换为它。有一种方法可以返回关联的.`ConnectionSource``JdbcConnectionSource``connectionSource.getReadOnlyConnection()``DatabaseConnection``JdbcDatabaseConnection`[`JdbcDatabaseConnection.getInternalConnection()`](http://ormlite.com/javadoc/ormlite-jdbc/com/j256/ormlite/jdbc/JdbcDatabaseConnection.html#getInternalConnection%28%29)`java.sql.Connection`

> 我尝试使用 updateRaw()，但该函数仅存在于我没有的 OrmLite dao 上...

您真的可以使用任何 DAO 类在任何表上执行原始函数。可以方便地将其视为对 DAO 对象表的非结构化更新。但是，如果您有任何 DAO，则可以对任何其他表执行原始更新。

> 找到一种使用不受支持的字段而不是仅使用不受支持的查询将数据传入和传出数据库的方法

如果您使用的是不受支持的字段，那么您将不得不将其作为原始语句进行 - 要么`SELECT`要么`UPDATE`. 如果您编辑帖子以显示您尝试过的原始陈述，我可以提供更具体的帮助。

# c - 当我使用 gcc 和 eclipse cdt 编译代码时，为什么可执行文件有大小差异

> ID：12374855
> 
> 赞同：0
> 
> 时间：2012-09-11T17:23:50.267
> 
> 标签：c, gcc, eclipse-cdt

当我使用 gcc（使用终端）和 eclipse cdt 编译代码时，可执行文件的大小有所不同。**gcc 8kb 和 eclispse 27 kb**。为什么会这样？eclipse 不是使用预装的 gcc 编译器吗？该程序非常简单，但是对于较大的代码会显着增加大小并影响程序性能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:32:42.500

是的，Eclipse 使用的是相同的`gcc`. 但是，Eclipse 很可能会在二进制文件中添加一些用于调试的信息。例如，Eclipse 很可能使用将在二进制文件中包含整个源代码的选项`gcc`运行。`-g`这可能会导致可执行文件大小的巨大差异。

例如，尝试编译这个简单的程序：

```
#include <stdio.h>

int main() {
    int i;
    for (i=0; i<10; i++)
        printf("Hello, world!");

    return 0;
} 
```

尝试：

```
$ gcc -o program program.c
$ gcc -o program_g program.c
$ ls -lh | grep program
-rwxr-xr-x  1 zagorax users     7,8K set 11 19:37 program
-rwxr-xr-x  1 zagorax users     8,4K set 11 19:37 program_g
-rw-r--r--  1 zagorax users      105 set 11 19:35 program.c 
```

当然，不同的`gcc`选项可能会导致不同的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:12:12.197

请注意，Eclipse CDT 有两个名为“Debug”和“Release”的构建配置。默认情况下，它构建“调试”，由于较少的优化和包含调试信息，导致更大的可执行文件大小。您可以通过传递 gcc -O0 和 -g 标志来重现这一点。

“发布”版本很可能会生成与您从命令行获得的大小相当的可执行文件。请注意，“发布”版本可能会传递一些改变可执行文件大小的标志（例如，它可以启用更深层次的优化）。

您可以在构建控制台视图和生成的 make 文件中找到 CDT 传递给 GCC 的命令行标志。

请注意，顾名思义，可执行文件的“调试”版本将用于调试，不应分发给用户。通常，它可能会明显变慢，并且可能会提供一些不适合用户的调试输出。另一方面，调试“发布”构建可能是一项艰巨的工作，因为它可能会优化您希望在调试器中观察的一些代码，重新调整代码行并且无法将源代码链接到程序执行。

# mysql - Solr - 数据导入处理程序 - 完全导入 - 默认情况下 Clean=False？

> ID：12374862
> 
> 赞同：2
> 
> 时间：2012-09-11T17:24:15.387
> 
> 标签：mysql, solr, lucene, dataimporthandler, dih

版本：apache-solr-3.5.0

对于完全导入，您可以设置 url 参数 clean=false。

但是，是否可以将“clean”默认设置为“false”，例如 XML 配置之类的东西？

如果没有，是否可以以任何方式禁用完全导入？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T12:56:43.233

您可以在 solrconfig.xml 中的 DataImportHandler 部分中配置干净的默认值，如下所示：

```
<requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
    <lst name="defaults">
        <str name="config">solr-data-config.xml</str>
    </lst>
    <lst name="invariants">
        <str name="clean">false</str>
    </lst>
</requestHandler> 
```

看看[这里](http://wiki.apache.org/solr/SearchHandler#Configuration)：'invariants' 意味着您以后不能更改它，而 defaults 只是您可以在请求时覆盖的默认值。

我不认为你可以禁用，`full-import`因为这是一个命令，而不仅仅是一个参数。

# visual-studio-2010 - Visual Studio 数据库部署 - 脚本未在 SQLCMD 模式下运行

> ID：12374863
> 
> 赞同：6
> 
> 时间：2012-09-11T17:24:24.513
> 
> 标签：visual-studio-2010, sql-server-2008, sqlcmd, database-project, database-deployment

我有一个 SQL Server 2008 数据库项目，我正在尝试使用 Visual Studio 2010 进行部署。当我单击部署时，构建工作正常，但是在它创建部署脚本并开始执行它之后，我收到以下错误：

> 错误 8 SQL80001：“DatabaseName”不是可识别的选项。
> 
> 错误 7 SQL80001：':' 附近的语法不正确。

查看部署脚本，它有以下几行：

> :setvar 数据库名称 "DEV_DB"

...

> 去
> 
> :on 错误退出

所以看起来 SQL Server 没有在 SQLCMD 模式下运行部署脚本来理解该语法。如果我要复制并粘贴到 SSMS 中，我可以设置该选项，但我想直接从 Visual Studio 进行部署。让 VS 在 SQLCMD 模式下运行此脚本的设置在哪里，**或者**如何将脚本设置为不使用 SQLCMD 语法生成？

谢谢。

# c# - 将位图编码为 Jpeg

> ID：12374873
> 
> 赞同：3
> 
> 时间：2012-09-11T17:25:16.887
> 
> 标签：c#, encoding, bitmap, jpeg

首先，这个问题不是关于“如何将位图保存为磁盘上的 jpeg？”

我找不到（或想到）一种`Bitmap`使用 Jpeg 压缩转换 a 的方法，但将其保留为`Bitmap`对象。[MSDN 清楚地展示](http://msdn.microsoft.com/en-us/library/aa970689.aspx)了如何将位图保存为 JPEG，但我正在寻找的是如何将编码/压缩应用于`Bitmap`对象，因此我仍然可以在我的代码中传递它，而无需引用文件。

其背后的原因之一是处理位图的辅助类，但不应该知道使用的持久性方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T17:30:55.833

所有图像在加载到程序存储器时都是位图。写入磁盘时通常使用特定的压缩，从磁盘读取时通常使用解压缩。

如果您担心图像的内存占用，您可以压缩字节并在内部传递字节数组。压缩将有利于图像的无损压缩。不要忘记许多图像压缩具有[不同级别的丢失](http://en.wikipedia.org/wiki/Lossy_compression)(sp?) 换句话说，压缩丢弃数据以将图像存储在尽可能少的字节数中。

解/压缩也是一种性能权衡，因为您正在用内存占用来换取处理时间。在任何情况下，除非您真的很喜欢，否则如果您需要以任何方式对其进行操作，图像确实需要是位图。

这是一个您可能会觉得有趣[的类似问题的答案。](https://stackoverflow.com/questions/2624187/efficient-handling-of-super-wide-but-not-so-tall-bitmap/2624236#2624236)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T17:31:28.437

`Bitmap`不支持编码的内存存储。它始终是未编码的（参见`PixelFormat`枚举）。可能您需要编写自己的包装类/抽象，或者放弃这个想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T17:32:49.530

```
var stream = new MemoryStream()
Bitmap.Save(Stream, ImageFormat) 
```

它是你需要的吗？

# java - Java：公共静态最终双精度不能设置为小数？

> ID：12374877
> 
> 赞同：3
> 
> 时间：2012-09-11T17:25:25.327
> 
> 标签：java, static, double, final, fractions

我有一个配置文件，其中包含一些我想用于计算的因素。

```
public class Config {

  public static final double factor = 67/300; // ~0,2233...

} 
```

我正在访问这样的因素：

```
public class Calculate {

  public static calc() {
    ...
    result *= Config.factor;
    ... 
```

当我这样做时，Config.factor 等于 0，所以我的结果也是 0。如果我将因子设置为 0.2233，我就不会有这个问题，但这不会那么准确。为什么将其设置为 67/300 不起作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T17:26:39.647

试试这个：

```
public static final double factor = 67/300d; 
```

问题是`67`and`300`是整数文字，所以除法最终是一个整数，即 0。`d`数字末尾的 使其成为双文字，所以结果`67/300d`是 a `double`。

请注意，在前面的代码中，双重文字是`300d`. 您也可以使用`67d/300`或`67d/300d`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-11T17:26:47.917

它应该如下所示：

```
 public static final double factor = 67d/300d; 
```

如果您不附加“d”，它将被视为整数，这就是您得到零的原因。

int 将是默认选择。根据[文档](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

> 对于整数值，此数据类型通常是默认选择，除非有理由（如上述）选择其他类型

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T17:29:19.320

当您输入 67/300 时，编译器会将这些视为`int`而不是`double`. 因此，当发生除法时，结果将下限为 0。

为避免这种情况，请通过在每个数字后`double`添加 a `d`（如其他答案中所述）或使用`(double)`.

# c# - DotNetOpenAuth v4 不适用于 Facebook 身份验证

> ID：12374879
> 
> 赞同：0
> 
> 时间：2012-09-11T17:25:27.337
> 
> 标签：c#, authentication, dotnetopenauth

正如[DotNetOpenAuth 和 Facebook](https://stackoverflow.com/q/6666447/340760)问题所说，身份验证不适用于使用 DotNetOpenAuth 的 Facebook`v4.0.0.11165`

我没有使用以前的版本，而是想知道是否有办法修复它，所以我正在考虑修改`ProcessUserAuthorization`方法以便进行一些调整来修复它，但我不知道它是如何工作的。

```
public new IAuthorizationState ProcessUserAuthorization(HttpRequestInfo request = null)
{
    return base.ProcessUserAuthorization(request);
} 
```

是否可以修复修改此方法？还是更复杂？

有没有办法修复它或者我必须获得以前的版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:54:42.350

最新版本的 DotNetOpenAuth*可以*与 Facebook 一起使用。请升级到最新版本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T19:27:25.620

Facebook 没有实现 OpenID 协议，它不是 OpenID 提供者。可悲的是，它永远不会起作用。您必须在应用程序中以不同的方式处理 facebook 身份验证。您可以使用 facebook 作为您网站的身份验证提供程序的唯一方法是 facebook 在此处描述的方法：[https](https://developers.facebook.com/docs/guides/web/) ://developers.facebook.com/docs/guides/web/并且它不以任何方式涉及 OpenID。

# mysql - SQL 创建表错误？

> ID：12374880
> 
> 赞同：1
> 
> 时间：2012-09-11T17:25:28.633
> 
> 标签：mysql, sql, mysql-error-1064, create-table

我在 mysql 中使用以下 sql 语句：

```
CREATE TABLE "User"(
    userId int NOT NULL AUTO_INCREMENT,
    userRoleId int NOT NULL,
    taalId int NOT NULL,
    hotelId int NOT NULL,
    gebruikersnaam varchar(40) NOT NULL,
    wachtwoord varchar(40) NOT NULL,
    email varchar(50) NOT NULL,
    FOREIGN KEY (userRoleId) REFERENCES UserRole (userRoleId),
    FOREIGN KEY (taalId) REFERENCES Taal (taalId),
    FOREIGN KEY (hotelId) REFERENCES Hotel (hotelId),
    PRIMARY KEY(userId)
 ); 
```

但我得到以下 Mysql 错误：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '"User"( userId int NOT NULL AUTO_INCREMENT, userRoleId int NOT NULL, taalI' 附近使用正确的语法

出了什么问题？

编辑：表 UserRole、Taal 和 Hotel 已正确创建，没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:32:26.900

要转义保留字，[请使用反引号](http://dev.mysql.com/doc/refman/4.1/en/reserved-words.html)而不是引号：

```
CREATE TABLE `User` -- <== Notice backticks instead of quotes
( 
    userId int NOT NULL AUTO_INCREMENT, 
    userRoleId int NOT NULL, 
    taalId int NOT NULL, 
    hotelId int NOT NULL, 
    gebruikersnaam varchar(40) NOT NULL, 
    wachtwoord varchar(40) NOT NULL, 
    email varchar(50) NOT NULL, 
    FOREIGN KEY (userRoleId) REFERENCES UserRole (userRoleId), 
    FOREIGN KEY (taalId) REFERENCES Taal (taalId), 
    FOREIGN KEY (hotelId) REFERENCES Hotel (hotelId), 
    PRIMARY KEY(userId) 
 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T17:30:14.950

尝试：

```
`user` 
```

代替：

```
"User" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T17:30:27.430

也许这是微不足道的......但据我所知，你不应该在你的表名上使用引号......尝试用反引号替换它们。

# jsf - 使 h:outputtext 不在 jsf 页面上打印换行符

> ID：12374882
> 
> 赞同：1
> 
> 时间：2012-09-11T17:25:33.077
> 
> 标签：jsf, formatting

我有一些类似下面的代码，它可以工作，但我不想只显示一个数字，而是想显示“number%”。这是我所拥有的：

```
<h:outputtext value="#{somebean.doubleValue}">
    <f:convertnumber maxfractiondigits="2">
</h:outputtext> 
```

如果我将“%”符号放在 value 属性中，转换器将无法工作（我相信因为评估结果不仅仅是一个数字），但如果我将“%”符号放在其他 outputtext 标签中，则换行出现在数字和它之间。我不想要那个。

```
<h:outputtext value="#{somebean.doubleValue}">
    <f:convertnumber maxfractiondigits="2">
</h:outputtext>
<h:outputtext value="%"> <!--prints a new line--> 
```

在 jsf 上实现“xx.xx%”格式的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T17:36:51.347

`white-space`将公共父元素的 CSS属性设置为`nowrap`.

例如

```
<span style="white-space: nowrap;">
    <h:outputText value="#{somebean.doubleValue}">
        <f:convertNumber maxfractiondigits="2">
    </h:outputText>%
</span> 
```

*（注意：您不一定需要`<h:outputText>`纯文本）*

如果您实际上在 a 中使用它`<h:column>`（正如我最初猜测的那样），您可以`<td>`通过.`columnClasses``<h:dataTable>`

# linux - 窗口是否有中断上下文？

> ID：12374883
> 
> 赞同：0
> 
> 时间：2012-09-11T17:25:36.120
> 
> 标签：linux, windows, interrupt-handling

我最近开始阅读**Robert Love 的 Linux Kernel Development**并且我很**喜欢**它！请阅读本书的以下摘录，以更好地理解我的问题：

> 一个数字标识中断，内核使用这个数字来执行一个特定的中断处理程序来处理和响应中断。例如，当您键入时，键盘控制器会发出一个中断，让系统知道键盘缓冲区中有新数据。内核记下传入中断的中断号并执行正确的中断处理程序。中断处理程序处理键盘数据并让键盘控制器知道它已准备好接收更多数据...

现在我在我的机器上进行了双启动，有时（事实上，很多）当我在 Windows 上输入一些东西时，我发现自己正在这样做，我称之为*夜间爬虫*模式。这是当我打字时，我在屏幕上看不到任何东西，过了一会儿，整个文本瞬间出现，可能缓冲区只是把所有东西都吐出来了。

现在我在 Linux 上看不到这种情况。是因为Linux 中存在*中断上下文而 Windows 中没有它吗？*

顺便说一句，我仍然不确定 Windows 中是否存在中断上下文，谷歌没有给我任何相关结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:31:18.730

所有操作系统都有一个中断上下文，它是 CPU 架构的一个特性/约束——基本上，这就是计算机硬件的“工作方式”。但是，不同的操作系统（以及该操作系统中的驱动程序）在返回之前对中断的工作内容和工作量做出不同的选择。这可能与您的 Windows 体验有关，也可能与您的 Windows 体验无关。将按键转换为屏幕输出涉及*大量代码，而中断处理只是一小部分。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T01:11:05.823

> 一个数字标识中断，内核使用这个数字来执行一个特定的中断处理程序来处理和响应中断。例如，当您键入时，键盘控制器发出一个中断，让系统知道键盘缓冲区中有新数据。内核记下传入中断的中断号并执行正确的中断处理程序。中断处理程序处理键盘数据并让键盘控制器知道它已准备好接收更多数据

这是一个相当糟糕的描述。现在 USB 键盘的情况可能有所不同，但这似乎讨论了旧 PS/2 连接会发生什么，其中主板上的“8042”兼容芯片组通过 IRQ 线路向 CPU 发出信号，然后 CPU 执行任何代码位于存储在中断表中位置 9 中的地址（传统上是从物理内存中地址 0 开始的指针数组，尽管您可以从内存中更改地址，上次我玩这些东西时，PC 仍然有 <1MB RAM 和使用不同的内存布局模式）。

该调度过程与内核无关……这是硬件的工作方式。（可以要求键盘控制器不产生中断，从而允许操作系统/驱动程序软件定期“轮询”它以查看是否有新的事件数据可用，但真的使用它会很疯狂）。

尽管如此，中断表中的代码地址将指向*内核*或键盘驱动程序，内核/驱动程序代码将从键盘控制器的 I/O 端口读取键盘事件数据。对于这些硬件中断处理程序，主要目标是尽快从设备获取数据并将其存储到缓冲区中 - 既要确保从中断返回到正在发生的任何处理，又因为键盘控制器只能处理一次一个事件 - 需要在下一个事件之前将其读入缓冲区。

然后由操作系统/驱动程序向应用程序软件提供某种输入可用性信号，或者等待应用程序软件尝试读取更多键盘输入，但它可以以“只要你准备好”的方式进行。无论哪种方式，一旦应用程序有时间读取并开始响应输入，可能会发生一些事情，这意味着它需要非常长的时间：可能是额外的击键触发了一些复杂的重新分页算法，需要很长时间才能运行，或者击键导致程序执行已换出到磁盘的代码（检查维基百科的“虚拟内存”），在这种情况下，只有在硬盘将程序的一部分读入内存之后，程序可以继续运行。涉及窗口移动、图形剪辑算法等的此类边缘案例有数千个，这可能导致键盘处理代码需要很长时间才能完成，如果同时发生其他击键，键盘驱动程序会将它们读入该缓冲区，然后仅在慢速/阻塞处理完成后由应用程序“感知”。很可能所有击键后在缓冲区中的处理完成得更快：例如，如果程序的一部分从磁盘换入，则该部分可能准备好处理剩余的击键。将由键盘驱动程序读取到该缓冲区中，然后仅在慢速/阻塞处理完成后被应用程序“感知”。很可能所有击键后在缓冲区中的处理完成得更快：例如，如果程序的一部分从磁盘换入，则该部分可能准备好处理剩余的击键。将由键盘驱动程序读取到该缓冲区中，然后仅在慢速/阻塞处理完成后被应用程序“感知”。很可能所有击键后在缓冲区中的处理完成得更快：例如，如果程序的一部分从磁盘换入，则该部分可能准备好处理剩余的击键。

为什么 Linux 在这方面会比 Windows 做得更好？主要是因为操作系统、驱动程序和应用程序趋向于“更精简和更简陋”……更少的臃肿软件（如 C++ 与 C# .NET）、更少的内存浪​​费、更少的交换和延迟。

# c++ - 无法编辑外部变量

> ID：12374884
> 
> 赞同：0
> 
> 时间：2012-09-11T17:25:39.393
> 
> 标签：c++, extern

我写了以下代码

头文件

```
int i = 0; 
```

样本.cpp

```
#include <stdio.h>
#include "head.h"

extern int i;
i = 20;

int main() {
    printf("%d \n",i);
    return 0;
} 
```

当我编译 sample.cpp 时，编译器抛出以下错误：

```
sample.c:5:1: warning: data definition has no type or storage class [enabled by default]
sample.c:5:1: error: redefinition of ‘i’
head.h:1:5: note: previous definition of ‘i’ was here 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T17:26:58.100

反过来，`extern`声明应该在头文件中，定义在实现文件中，并且**只定义一次**。

```
//head.h
extern int i;

//sample.cpp
#include <stdio.h>
#include "head.h"

int i = 20;

int main() {
    printf("%d \n",i);
    return 0;
} 
```

您可以根据需要多次*声明变量，但定义必须是唯一的。*

# php - 模拟失败的 mysql INSERT 查询

> ID：12374886
> 
> 赞同：1
> 
> 时间：2012-09-11T17:25:47.227
> 
> 标签：php, mysql, xampp

`INSERT`有没有办法在 mysql中模拟失败的查询？由于我在本地运行 PHP/MySQL，因此返回值将始终为`TRUE`. 在 xampp 中打开 MySQL 似乎不起作用。

**注意：**我可能看错了。随时让我知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:28:10.780

几种方法：

*   撤销数据库用户的 INSERT 权限
*   将您的数据库访问代码包装到中间层并在那里模拟故障

或者，如果您只需要测试 INSERTS，请创建如下哑函数：

```
function my_query( $link, string $query ) {
  if( rand() %1 ) {
    return false;
  } else {
    return mysqli_query( $link, $query );
  }
} 
```

并更新 INSERT 调用的代码`my_query`。调整你的失败条件和快乐的测试:)

# android - 尝试使用适用于 Android 的 JDBC 和 Eclipse 连接到数据库时出错

> ID：12374896
> 
> 赞同：0
> 
> 时间：2012-09-11T17:26:35.203
> 
> 标签：android, eclipse, sql-server-2005, jdbc

我正在尝试使用 JDBC 和 Eclipse IDE 和 Java 从我的 android 连接到数据库

这是我写的代码

```
package Android_SQL.Package;

import java.sql.Connection;
import java.sql.Driver;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.util.Properties;

import Android_SQL.Package.R;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;
import android.util.Log;

public class Android_SQLActivity 
extends Activity 
implements OnClickListener
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button My_Button = (Button) this.findViewById(R.id.button1);
        My_Button.setOnClickListener(this);        
    }

    @Override
    public void onClick(View arg0) {

        (new Thread(new Runnable() 
        {
            @Override
            public void run() 
            {
                // Connect
                try {               
                    String cs = "jdbc:sqlserver://192.168.0.29:1433;databaseName=ODB0336;user=sa;password=savage";
                    Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");        
                    Connection con = DriverManager.getConnection(cs);
                    //String sql="insert into Categories(CategoryName, Description) values(?,?)";
                    String sql="insert into Colors(ColorId, ColorEName, ColorName) values(?,?,?)";
                    PreparedStatement prepared = con.prepareStatement(sql);
                    prepared.setString(1, "ABCD");
                    prepared.setString(2, "ABCDEF");
                    prepared.setString(2, "XYZ");                   
                    prepared.executeUpdate();           
                } catch (Exception e) 
                {
                    e.printStackTrace();
                    Log.i("Error", e.getMessage());
                }

            }
        }
        )
        ).start();                      
    }
} 
```

但是当我连接时出现以下异常：

“com.microsoft.sqlserver.jdbc.SQLServerException：recvfrom 失败：ECONNRESET（对等连接重置）”

如何解决？问题是什么。

JDBC 版本为：Microsoft SQL Server JDBC Driver 3.0

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:59:05.647

不要对 android 应用程序使用 JDBC 概念。JDBC 用于 Web 和网络应用程序，而不是用于移动应用程序开发。

这是在android中学习数据库连接的链接

[数据库示例 1](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

[数据库示例V2](http://vimaltuts.com/android-tutorial-for-beginners/android-sqlite-database-example)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:43:44.953

看看这个例子你就会知道如何连接远程数据库：

[示例 1](http://webdesignergeeks.com/mobile/android/android-login-authentication-with-remote-db/)

# jsf - Primefaces日历没有弹出

> ID：12374904
> 
> 赞同：1
> 
> 时间：2012-09-11T17:26:54.967
> 
> 标签：jsf, jsf-2, primefaces

编辑 - 请参阅底部。我的页面上有一个 primefaces 日历组件。出现文本框，但是当我单击它时，日历不会出现。这是组件代码。

```
 <p:calendar id="clientApptTime"  value="#{ScheduleMB.datePrime}"  
            pattern="HH:mm" timeOnly="true"  /> 
```

我的 facelet 和模板都使用 h:head 和 h:body 标记，并且顶部有 xmlns:p="http://primefaces.org/ui" 。

我正在使用 primefaces 3.3.1、java 1.6 和 Mojarra 2.1。此外，我在服务器或我的错误控制台上都没有收到任何错误消息。

有人有什么想法吗？

这是渲染的页面源：

```
 span id="j_idt34:clientApptTime"><input id="j_idt34:clientApptTime_input"
   name="j_idt34:clientApptTime_input" type="text" class="ui-inputfield ui-widget
   ui-state-default ui-corner-all" /></span><script id="j_idt34:clientApptTime_s"
   type="text/javascript">$(function()
  {PrimeFaces.cw('Calendar','widget_j_idt34_clientApptTime',
  {id:'j_idt34:clientApptTime',popup:true,locale:'en_US',dateFormat:'m/d/y
                                               hh:mm',timeOnly:true,stepHour:1,stepMinute:1,stepSecond:1,hourMin:0,hourMax:23,minuteMin:0,
  minuteMax:59,secondMin:0,secondMax:59});});</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:46:13.007

答案似乎是 Primefaces 不适用于 Tomahawk。在我删除所有战斧参考后，Primefaces 工作正常。任何人都知道我能做些什么（这可能是另一个帖子的问题）？

# jquery - 如何为 .success 和 .fail 实现不同的 jQuery 加载回调函数？

> ID：12374914
> 
> 赞同：0
> 
> 时间：2012-09-11T17:27:53.010
> 
> 标签：jquery

我已经阅读了 jQuery API，但我仍然不清楚。这是我拥有的代码示例：

```
 $.ajax({
            url: href,
            type: 'GET'
        })
        .success(function (content) {
            $('#content')
                .html("<div class='block-border'>" + content + "</div>")
                .applyTemplateSetup()
                .buildTableOfContent();
            if ($('#cityLegend-1').length) {
                $('#cityLegend-1').html("Question " + html);
            }
            $('#article').css('visibility', 'visible');
            var editHref = "/Admin/Contents/Edit?pk=0003000&rk=" + href.substring(2,5);
            $('#editContent').attr('data-href', editHref);
        })
        .fail(function (ajaxContext) {
            ajaxOnFailure(ajaxContext)
        }); 
```

我**必须**为此使用 jQuery .load，因为我的模板已经被编码以产生一些效果并调用 jQuery .load()。但是，如果存在 .success 或 .fail 以及如何实现 .done 函数，我怎样才能让我的回调做不同的事情，就像我在这里使用的函数一样。

还有一个问题。如果我能够使用 .load ，那么如果我的内容包含 HTML 标记，这将是一个问题。这很有可能，我在某些地方读到这可能是一个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T17:30:05.077

像这样

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
    $('.result').html(data);
    alert('Load was performed.');
  },
  error: function(data){
    //error
  },
 complete: function(data){
   //complete
 }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:02:54.667

这可能会有所帮助。

```
$("#content").load(href, function(response, status, xhr){
  if(status == "error") {
    ajaxOnFailure(response);
  } else {
    ajaxOnSuccess(response);
  }
}); 
```

（顺便说一下，在[`.load()`的文档](http://api.jquery.com/load/)中有一个例子。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T01:54:34.423

您可以将其用于错误处理

```
$(document).ready(function() {
 $('#races a').click(function () {
  $('#results').load('Racing/' + $(this).attr('href') + ' #wrap', "", function(responseText, textStatus, XMLHttpRequest) {
   switch (XMLHttpRequest.status) {
    case 200: break;
    case 404:
     $('#results').html('<p>Looks like the results have not been uploaded to the server yet. Please check back later.</p>');
     break;
    default:
     $('#results').html('<p>' + XMLHttpRequest.status + ': ' + XMLHttpRequest.statusText + '. Please contact the club and let them know.</p>');
     break;
   }
  });
  return false;
 });
}); 
```

# android - 在 Android 中，如何通过电话播放 mp3，并且即使已插入也不允许通过有线耳机或蓝牙耳机播放？

> ID：12374915
> 
> 赞同：0
> 
> 时间：2012-09-11T17:27:59.470
> 
> 标签：android, telephony, android-audiomanager

1.  我想以电话方式而不是扬声器方式播放音乐媒体（例如 mp3）文件。我该怎么做？
2.  当有线耳机或蓝牙耳机插入时，我想让它继续通过电话播放，即让插入的耳机没有声音。这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:09:44.437

使用 SDK AFAIK 无法实现您想要的。有关更多信息，请参阅[需要在通话中播放音频](https://stackoverflow.com/questions/4005259/need-to-play-audio-into-a-call)及其链接的 bugzilla 条目。

# php - 漂亮的 url 使用 htaccess rewriterule 导致“内部服务器错误”

> ID：12374917
> 
> 赞同：1
> 
> 时间：2012-09-11T17:28:09.413
> 
> 标签：php, .htaccess, mod-rewrite

我的 .htaccess 文件：

```
RewriteEngine On

RewriteRule ^([a-zA-Z0-9_-]+)$ photo.php?id=$1

RewriteRule ^([a-zA-Z0-9_-]+)/$ photo.php?id=$1 
```

我的目标是将 url 转换`mysite.com/photo.php?id=31`为`mysite.com/31`. 但是当我访问时`mysite.com/31`，我得到的只是：

> 内部服务器错误
> 
> 服务器遇到内部错误或配置错误，无法完成您的请求。
> 
> 请联系服务器管理员 admin@localhost 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。
> 
> 服务器错误日志中可能提供有关此错误的更多信息。

我在 wamp 服务器上运行它。

编辑：

我当前的网址如下所示：`http://localhost:8080/img/photo.php?id=1`。我需要将`/img`-part 添加到 htaccess 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:45:43.337

试试这个

```
<IfModule mod_rewrite.c>    
    Options +FollowSymLinks    
    RewriteEngine On

    RewriteRule ^([a-zA-Z0-9_\-]+)$ photo.php?id=$1    
</IfModule> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T17:55:28.250

如果您希望能够通过 URL 访问图像`http://mysite.com/31`，请注意，URL 中没有`/img/`目录，您需要将重写规则放在文档根目录下的 htaccess 文件中。目录所在的`img`目录。由于我还将假设您的站点上除了图像之外还有其他内容，因此您将要检查您是否正在重写不是图像的请求，并且您可以通过检查`%{REQUEST_FILENAME}`和`!-f`和`!-d`标志来做到这一点。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9_-]+)/?$ /img/photo.php?id=$1 [L] 
```

此外，由于如果您尝试通过以下 URL 访问图像，您现有的规则就很好：`http://mysite.com/img/31`，还有其他原因导致您的 500 服务器错误。**请确保已加载重写模块**。在 WAMP 中，右键单击 WAMP 图标并转到**apache**，然后选择**apache 模块**并确保选中了**rewrite 模块。**

# javascript - 测试文本区域中的无效文本格式

> ID：12374920
> 
> 赞同：1
> 
> 时间：2012-09-11T17:28:23.157
> 
> 标签：javascript, regex, arrays

[我之前](https://stackoverflow.com/questions/12362160/test-for-a-specific-text-format-in-a-text-area/12362205#12362205)的问题的延续......

在测试文本格式后，如果它不是正确的格式，我想找出哪些十六进制值对是不正确的（即任何包含 [0-9A-Fa-f] 以外的值的对）。

```
if( validFormat ) {
// do processing
}
else {
// find invalid hex value pairs
} 
```

获取不正确（无效）十六进制对列表的最有效方法是什么，以便我可以报告错误及其相关的十六进制对。

**编辑附加问题**

另外，我将如何进行测试以确保任何地方都没有“双空格”，因为即使十六进制对可能有效，这也构成无效格式。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:34:41.613

最简单的方法是查找所有值并扫描那些无效的值：

```
var isHexPair = /^[0-9a-f]{2}$/i;
var allPairs = myTextArea.value.split(/\s+/);
var notHex   = [];
for (var i=allPairs.length;i--;){
  if (!isHexPair.test(allPairs[i])){
    notHex.push(allPairs(i));
  }
} 
```

那个正则表达式说：

*   `^`从字符串的开头开始
*   `[0-9a-f]`查找任何数字或 af 字符
*   `{2}`找到其中两个
*   `$`确保我们现在位于字符串的末尾
*   `i`并使其不区分大小写（允许 AF 和 af）

有了上述内容，您可以执行以下操作：

```
if (notHex.length){
  // There is at least one invalid entry
}else{
  // all is well
} 
```

* * *

**编辑**：如果您明确想要测试字符串只包含由单个空格分隔的单字节十六进制字符串，那么最简单的测试就是：

```
if (/^([0-9a-f]{2} )+[0-9a-f]{2}$/i.test(myStr)){ /* valid! */ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:37:45.313

获取文本区域的值并存储在 a 中，`var`因为它们是空格分隔的，在其上执行 a `.splt(" ")`（在空白处拆分），您将得到一个十六进制对数组。然后只需遍历循环内的数组与上一个问题中的正则表达式进行比较，并将无效对存储在一个新的中`var`并将其打印给用户。

# hadoop - (Hadoop) MapReduce - 链式作业 - JobControl 不会停止

> ID：12374928
> 
> 赞同：9
> 
> 时间：2012-09-11T17:28:57.033
> 
> 标签：hadoop, mapreduce, chain, job-control

我需要链接两个 MapReduce 作业。我使用 JobControl 将 job2 设置为 job1 的依赖项。它工作，输出文件被创建！但它不会停止！在 shell 中，它保持这种状态：

```
12/09/11 19:06:24 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
12/09/11 19:06:25 INFO input.FileInputFormat: Total input paths to process : 1
12/09/11 19:06:25 INFO util.NativeCodeLoader: Loaded the native-hadoop library
12/09/11 19:06:25 WARN snappy.LoadSnappy: Snappy native library not loaded
12/09/11 19:07:00 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
12/09/11 19:07:00 INFO input.FileInputFormat: Total input paths to process : 1 
```

我怎样才能阻止它？这是我的主要内容。

```
public static void main(String[] args) throws Exception {
    Configuration conf = new Configuration();
    Configuration conf2 = new Configuration();

    Job job1 = new Job(conf, "canzoni");
    job1.setJarByClass(CanzoniOrdinate.class);
    job1.setMapperClass(CanzoniMapper.class);
    job1.setReducerClass(CanzoniReducer.class);
    job1.setOutputKeyClass(Text.class);
    job1.setOutputValueClass(IntWritable.class);

    ControlledJob cJob1 = new ControlledJob(conf);
    cJob1.setJob(job1);
    FileInputFormat.addInputPath(job1, new Path(args[0]));
    FileOutputFormat.setOutputPath(job1, new Path("/user/hduser/tmp"));

    Job job2 = new Job(conf2, "songsort");
    job2.setJarByClass(CanzoniOrdinate.class);
    job2.setMapperClass(CanzoniSorterMapper.class);
    job2.setSortComparatorClass(ReverseOrder.class);
    job2.setInputFormatClass(KeyValueTextInputFormat.class);
    job2.setReducerClass(CanzoniSorterReducer.class);
    job2.setMapOutputKeyClass(IntWritable.class);
    job2.setMapOutputValueClass(Text.class);
    job2.setOutputKeyClass(Text.class);
    job2.setOutputValueClass(IntWritable.class);

    ControlledJob cJob2 = new ControlledJob(conf2);
    cJob2.setJob(job2);
    FileInputFormat.addInputPath(job2, new Path("/user/hduser/tmp/part*"));
    FileOutputFormat.setOutputPath(job2, new Path(args[1]));

    JobControl jobctrl = new JobControl("jobctrl");
    jobctrl.addJob(cJob1);
    jobctrl.addJob(cJob2);
    cJob2.addDependingJob(cJob1);
    jobctrl.run();

    ////////////////
    // NEW CODE ///   
    //////////////

    // delete jobctrl.run();
    Thread t = new Thread(jobctrl);
    t.start();
    String oldStatusJ1 = null;
    String oldStatusJ2 = null;
    while (!jobctrl.allFinished()) {
      String status =cJob1.toString();
      String status2 =cJob2.toString();
      if (!status.equals(oldStatusJ1)) {
        System.out.println(status);
        oldStatusJ1 = status;
      }
      if (!status2.equals(oldStatusJ2)) {
        System.out.println(status2);
        oldStatusJ2 = status2;
      }     
     }
    System.exit(0); 
```

} }

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-28T15:44:22.880

我基本上做了 Pietro 上面提到的事情。

```
public class JobRunner implements Runnable {
  private JobControl control;

  public JobRunner(JobControl _control) {
    this.control = _control;
  }

  public void run() {
    this.control.run();
  }
} 
```

在我的 map/reduce 类中，我有：

```
public void handleRun(JobControl control) throws InterruptedException {
    JobRunner runner = new JobRunner(control);
    Thread t = new Thread(runner);
    t.start();

    while (!control.allFinished()) {
        System.out.println("Still running...");
        Thread.sleep(5000);
    }
} 
```

我只是在其中传递了 jobControl 对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-03T20:22:18.593

JobControl 对象本身是可运行的，因此您可以像这样使用它：

```
new Thread(myJobControlInstance).start() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T17:21:40.893

只需对 sinemetu1 共享的代码片段进行调整即可。

您可以放弃对 JobRunner 的调用，因为 JobControl 本身实现了 Runnable

```
 Thread thread = new Thread(jobControl);
        thread.start();

        while (!jobControl.allFinished()) {
            System.out.println("Still running...");
            Thread.sleep(5000);
        } 
```

我还偶然发现了这个链接，用户确认 JobControl 只能使用新线程运行。 [https://www.mail-archive.com/common-user@hadoop.apache.org/msg00556.html](https://www.mail-archive.com/common-user@hadoop.apache.org/msg00556.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-13T08:07:46.430

尝试这个：

```
 Thread jcThread = new Thread(jobControl);
    jcThread.start();
    System.out.println("循环判断jobControl运行状态 >>>>>>>>>>>>>>>>");
    while (true) {
        if (jobControl.allFinished()) {
        System.out.println("====>> jobControl.allFinished=" + jobControl.getSuccessfulJobList());
        jobControl.stop();
        // 如果不加 break 或者 return，程序会一直循环
        break;
    }

    if (jobControl.getFailedJobList().size() > 0) {
        succ = 0;
        System.out.println("====>> jobControl.getFailedJobList=" + jobControl.getFailedJobList());
        jobControl.stop();

        // 如果不加 break 或者 return，程序会一直循环
        break;
    }
} 
```

# ruby - RefineryCMS ，未定义的方法“持续存在？” 对于零：NilClass

> ID：12374931
> 
> 赞同：1
> 
> 时间：2012-09-11T17:29:09.373
> 
> 标签：ruby, ruby-on-rails-3, refinerycms

我在弄清楚这是什么问题时遇到了一些问题。它只发生在子页面中。

```
1: <%= form_for [refinery, :admin, @page],
2:              :url => (refinery.admin_page_path(@page.uncached_nested_url) if @page.persisted?) do |f| %>

4:   <%= render '/refinery/admin/error_messages', :object => @page, :include_object_name => true %> 
```

我在 google 中找到的信息将我发送到 github 中的 404 页，所以我不知道如何解决这个问题。

感谢您的时间

# python - 在 Eclipse 中使用 Django - 确保 Django 安装正确

> ID：12374932
> 
> 赞同：0
> 
> 时间：2012-09-11T17:29:10.747
> 
> 标签：python, django, eclipse, directory, installation

全部。

请注意，我是 Django 和 Python 的新手。我一直觉得我遗漏了非常小的细节，它们可能与 Eclipse 的 GUI 有关。

Python 安装在这里：

```
C:\Python32 
```

...和 ​​Django 安装在这里：

```
C:\Python32\Lib\site-packages\django 
```

请注意，我从命令提示符运行 python 来检查我的 Django 版本。有效。我正在运行 1.5 版。

当我尝试使用 Eclipse 创建一个新的 Django 项目时，问题就来了。这就是发生的事情：

*   我将指定我要创建一个新的 Django 项目
*   我将选择我的解释器，为我的项目命名，然后选择一个语法版本 (3.0)
*   选择“将项目目录添加到 PYTHONPATH”

当我单击“下一步”时，我收到一条错误消息，指出“找不到 Django”。

但是当 Python 从命令提示符运行时（并且我“导入 Django”），Python 似乎知道 Django 在哪里。当我尝试在 Eclipse 中创建 Django 项目时，Python 似乎不知道 Django 在哪里。

我觉得我错过了一些非常非常小的东西 - 环境变量或其他东西。任何人都可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:09:00.667

确保您已将 Django 安装路径添加到系统`PYTHONPATH`列表中。对于 Eclipse 中的 PyDev，python 路径可以在“Window->Preferences->PyDev->Interpreter - Python”下找到

单击`New Folder`按钮，导航到 Django 安装路径（`/usr/lib/python2.7/dist-packages/django`如果您将其安装到默认目录，则会找到），然后单击`OK`

# eclipse - 如何找出 Eclipse 路径变量或字符串变量 (`${some_var}`) 的值？

> ID：12374936
> 
> 赞同：5
> 
> 时间：2012-09-11T17:29:29.053
> 
> 标签：eclipse

在 Eclipse 中，可以在某些地方使用所谓的“[路径变量](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fcpathvars.htm)”和所谓的“[字符串变量”。](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/preferences/run-debug/ref-string_substitution.htm)例如，在“运行配置”中，可以将基本目录设置为`${project_loc:/${project_name}}`而不是提供静态值。

如何找出这样一个变量的值（或可能由多个变量组成的表达式的值）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-05T16:18:33.243

打开项目“属性”对话框。在左侧菜单中，展开“资源”并单击“链接资源”。这将立即在右侧大面板上显示定义的“路径变量”，包括 $project_loc$。请注意，您还可以向项目中添加新变量。

# python - 创建二进制 PBM/PGM/PPM

> ID：12374937
> 
> 赞同：5
> 
> 时间：2012-09-11T17:29:38.860
> 
> 标签：python, pbmplus

我试图了解如何创建二进制 PBM/PGM/PPM 文件。据我所知，每种格式有两种类型：普通格式和原始格式。例如，黑色 PBM 5x5 的结构如下所示：

```
P1
# This is a comment
5 5
1 1 1 1 1
1 1 1 1 1
1 1 1 1 1
1 1 1 1 1
1 1 1 1 1 
```

如您所见，它很简单：白色为 0，黑色为 1。但是，PBM 有原始版本，如下所示：

```
'P4\n# This is a comment\n5 5\n\xf8\xf8\xf8\xf8\xf8' 
```

我该怎么做？PBM 格式说明 说：

`A raster of Height rows, in order from top to bottom. Each row is Width bits, packed 8 to a byte, with don't care bits to fill out the last byte in the row. Each bit represents a pixel: 1 is black, 0 is white. The order of the pixels is left to right. The order of their storage within each file byte is most significant bit to least significant bit. The order of the file bytes is from the beginning of the file toward the end of the file. A row of an image is horizontal. A column is vertical. The pixels in the image are square and contiguous.`

我不明白我需要做什么；我怀疑我可能需要使用`struct`or `array.array`，但我不确定。我需要你的帮助; 你能用 Python 举例说明如何创建这样的文件吗？

```
>>> size = (5, 5)
>>> array = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
>>> create_pbm(size, array)
'P4\n5 5\n\xf8\xf8\xf8\xf8\xf8' 
```

我需要良好的速度，因为我需要处理更大的图像（例如 2000x5000）。但问题是我需要使用纯 Python，没有`ctypes`和库。请你帮我，并举一个小例子如何创建二进制 PBM 文件？

如果您能告诉我有关二进制 PGM 和 PPM 处理的信息，那将更加令人惊奇。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T18:16:04.067

我敢肯定这里有很大的改进空间（在效率方面），但这是否正常工作？

```
import struct
def create_pbm(size,lst):
    out = ['P4\n'+' '.join(map(str,size))+'\n'] #header
    for j in xrange(0,len(lst),size[1]):
        #single row of data
        row = lst[j:j+size[1]]
        #padded string which can be turned into a number with `int`
        s = ''.join(map(str,row))+'0000000'
        #Turn the string into a number and pack it (into unsigned int) using struct. 
        vals = [struct.pack('B',int(s[i*8:(i+1)*8],2)) for i in xrange(size[0]//8+1) ]
        out.append(''.join(vals))
    return ''.join(out)

a = [1]*25 #flat black image.
print repr(create_pbm((5,5),a)) 
```

**编辑**

至于阅读，这似乎有效：

```
def read_pbm(fname):
    with open(fname) as f:
        data = [x for x in f if not x.startswith('#')] #remove comments
    p_whatever = data.pop(0)  #P4 ... don't know if that's important...
    dimensions = map(int,data.pop(0).split())
    arr = []
    col_number = 0
    for c in data.pop(0):
        integer = struct.unpack('B',c)[0]
        col_number += 8
        bits = map(int,bin(integer)[2:])
        arr.extend(bits[:min(8,dimensions[0]-col_number)])
        if(col_number > dimensions[0]):
            col_number = 0 

    return (dimensions, arr) 
```

这些文件格式需要是方形的吗？这似乎不太可能。我很可能在维度部分混淆了行/列。随意检查;-)。

# javascript - 使用 getElementsByName 验证单选按钮

> ID：12374938
> 
> 赞同：0
> 
> 时间：2012-09-11T17:29:39.817
> 
> 标签：javascript, forms, radio-button, validation, radio-group

我正在尝试验证是否检查了一组单选按钮以验证表单。

```
function formValidator() {
    var triedIt = document.getElementsByName('tried');
    if(radioChecked(triedIt, "Please select") {
        return true;
    }
    return false;   
}

function radioChecked(elem, helperMsg) {
    if(document.myform.tried.checked == 1) {
        return true;
    }
    else {
        alert(helperMsg);
        elem.focus();
        return false;
    }
} 
```

这会返回警报，但由于某种原因，表单还是会被处理。我想知道我做错了什么......任何帮助将不胜感激。

如果您想知道为什么我不只使用 jquery 等......很遗憾，它不是一个选项。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:16:11.173

我认为它正在发生，因为`document.getElementsByName('tried')`返回元素数组。所以，当你调用`elem.focus()`它时会抛出错误（因为数组没有方法焦点）并`js`停止执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T17:35:13.047

```
function formValidator(){
var triedIt = document.getElementsByName('tried');
if(radioChecked(triedIt, "Please select")){
return true;
}
return false;   
}

function radioChecked(elem, helperMsg){
if(document.myform.tried.checked == 1) {
    return true;
}else{
    alert(helperMsg);
    elem.focus();
    return false;
}
} 
```

试试这个，我想你跳过了一个右括号）`in if(radioChecked(triedIt, "Please select"))`这就是它发生的原因

# asp.net-mvc - 将 jquery mobile mvc4 web 应用程序转换为 phonegap

> ID：12374942
> 
> 赞同：3
> 
> 时间：2012-09-11T17:30:08.977
> 
> 标签：asp.net-mvc, cordova, jquery-mobile, asp.net-mvc-4, wcf-web-api

我创建了一个`Jquery mobile mvc4 web application`使用`webapi`支持的网站，它在几乎所有移动设备中都非常漂亮。但现在我想将此 MVC 应用程序转换为 phonegap 以使用相机、加速度计、声音等移动功能支持。

开始将其转换为的最佳方法是什么`phonegap`，我需要`SOAP based web-Service`为 webapi 代码创建。我已经在网上搜索过，但没有得到足够的帮助和支持。

我走对了吗？还是需要别的东西？

任何帮助都是可观的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T23:31:20.840

好的，所以为了首先转换它，您必须了解 Objective-C，因为这是 iPhone 上唯一允许使用的语言，但假设您知道以下是进行此类转换时可以采取的步骤。

*确保应用程序检索的任何外部信息是 a) 在 REST api 中，您可以使用新的 WebApi 事实上我现在正在使用它，它就像一个魅力。或者 b) 任何脚本 src= 标签都被转换为磁盘上的本地文件。因此，如果您有 script src="My awesome css" 则将该文件设置为手机上的本地文件。

*接下来查看任何视图并确定其所有 API 调用代码的位置。不要那样做，然后准备好移动该代码。

*一旦全部记录下来，启动一个 phonegap 项目并删除任何额外的 .index 文件或任何你不需要的东西。

*创建您的应用程序PhoneGap 插件。让 OBjective-C 插件进行任何您需要的 API 调用，然后使 javascript 插件与 Objective-C 函数相匹配。

*如果您在之前的视图中有任何呼叫，现在将这些呼叫称为 cordova (PhoneGap) 插件。

这是一个非常简短的入门路线图。

一旦乏味结束，它是值得的。我将我的 IOS 应用程序移到了 Android 上，它们很容易转移。干杯

# php - 将遗留应用程序迁移到 Symfony2：如何在控制器中执行本机 php 脚本？

> ID：12374946
> 
> 赞同：4
> 
> 时间：2012-09-11T17:30:21.113
> 
> 标签：php, symfony, legacy

我有一个遗留应用程序，我想转移到 Symfony2。这个应用程序不是在 MVC 中构建的，它没有 PSR-0 兼容性，它非常像一个遗留应用程序，因为 '/search.php' 指向一个文件 'search.php' 并且菜单、页眉和页脚都包含在内不同的文件共享。

如果我能以某种方式快速而肮脏地将这个应用程序插入到 Symfony2 中，然后开始一次一个地将部分移动到 Symfony2 应用程序架构中，那将是理想的。我真的不想做一些瀑布式的尝试来移植整个事情，然后在 3-6 个月内进行一些大规模的更新。谁能推荐一种执行本机 php 脚本的方法，该脚本将包括 Symfony2 控制器中的 mysql 查询或其他一些最佳方法来执行此操作？我目前正在考虑可能包括 php 或 twig 模板中的文件。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T17:51:07.747

考虑在服务器级别进行。您的 Web 服务器应该能够将部分 URL 路由到新网站，并将其余部分路由到旧网站（至少 Nginx 能够做到）。继续进行重写后，您只需要更改 URL 重写并将其他 URL 路由到新应用程序。

在 Symfony 控制器中执行此操作也应该相当容易（不过我还没有尝试过）。您将需要一个后备路线，该路线将调用类似于以下内容的操作：

```
public function legacyAction()
{
    // decide which file to include
    $legacyFile = '/path/to/legacy-app/search.php';

    ob_start();

    include($legacyFile);

    $content = ob_get_clean();

    return new Response($content);
} 
```

这可能过于简单，但应该展示这个想法。

# javascript - 在 iPad 上初始模态关闭后，模态中的 Video.js 停止播放

> ID：12374951
> 
> 赞同：0
> 
> 时间：2012-09-11T17:30:31.850
> 
> 标签：javascript, ipad, video.js

在我的网站上，我使用 Video.js 在 Twitter Bootstrap 模式中嵌入电影。当我打开模式时，视频应该播放，当我关闭模式时，视频应该停止并返回到开头。

这在我第一次加载页面时工作正常。但是在我关闭模式一次后，当我重新打开它时，视频拒绝播放。没有 JS 错误。我正在使用带有 iWebInspector 的 iOS 模拟器进行测试。当我在模态打开/关闭回调中放置断点时，我的 video.js 对象似乎完全正常，只有视频不响应对 .play() 的调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:13:50.620

所以我会列出我的经历：

1.) 我正在运行 Video.JS + Twitter Bootstrap 模式 2.) 视频通过 Azure 云存储托管

首先，确保您的 Web 服务器处理 mimeType；派拉蒙！[使用 ASP.NET 开发服务器设置 MIME 类型](https://stackoverflow.com/questions/5924647/setting-mime-types-using-the-asp-net-development-server)

接下来，如果您请求视频，请确保响应包含“范围”值。请参阅：[示例 http 范围请求会话](https://stackoverflow.com/questions/8293687/sample-http-range-request-session)

没有范围值，视频播放器不知道视频应该何时结束......所以它永远不会让你重播或回到开头。

# java - 使用eclipse进行xslt远程调试

> ID：12374956
> 
> 赞同：1
> 
> 时间：2012-09-11T17:30:42.313
> 
> 标签：java, eclipse, debugging, xslt, remote-debugging

有谁知道eclipse是否具有从java web应用程序远程调试xslt的能力。

我已经为netbeans看到了这个

[http://netbeans-xslt-debugger.java.net/](http://netbeans-xslt-debugger.java.net/)

但是想要日食，有没有人遇到过日食？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:36:56.840

OrangevoltXSLT for Eclipse 为 Eclipse 平台提供 XSLT 支持。

请参阅IBM developerworks[上的 Orangevolt Eclipse XSLT 插件入门。](http://www.ibm.com/developerworks/opensource/library/os-eclipse-orangevolt/index.html)

# php - Doctrine2 使用不同的表加入本机查询

> ID：12374961
> 
> 赞同：0
> 
> 时间：2012-09-11T17:31:02.097
> 
> 标签：php, mysql, join, doctrine-orm

大家好，我遇到了一个 Doctrine 连接查询。

系统继续告诉我拍卖未映射：

```
Class Auction does not exist and could not be loaded in Doctrine/doctrine-orm/Doctrine/Common/Persistence/Mapping/RuntimeReflectionService.php on line 40 
```

显然，该项目已经开始，并且成功使用了其他连接。

```
include_once '../../../bootstrap_doctrine.php';

$rsm = new \Doctrine\ORM\Query\ResultSetMapping;
$rsm->addEntityResult('Auction', 'Au');
$rsm->addEntityResult('VariantPerAuction', 'Vpa');

$Q=" SELECT Au.id
FROM Auction Au
JOIN VariantPerAuction Vpa ";
        $query = $entityManager->createNativeQuery($Q,$rsm);

$auctions = $query->getResult(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:57:29.557

感谢 Marco Pivetta，它现在似乎可以工作了。

问题似乎是 Doctrine2 Class 没有完全命名空间。

对它们进行完全命名空间的快速试验是有效的。

在每个类的顶部：

```
// put the folder where your class is
 namespace DbClasses\entities; 
```

新的加入查询变为：

```
$rsm = new \Doctrine\ORM\Query\ResultSetMapping;
$rsm->addEntityResult('DbClasses\entities\Auction', 'Au');
$rsm->addEntityResult('DbClasses\entities\VariantPerAuction', 'Vpa');

$Q=" SELECT Au.id
FROM Auction Au
JOIN VariantPerAuction Vpa 
Where Au.piattaforma='EbayDE' AND Au.OggettoEbayDBContainer_id=159";

$auctions = $query->getResult(); 
```

# java - TouchImageView 点击位置

> ID：12374968
> 
> 赞同：1
> 
> 时间：2012-09-11T17:31:27.093
> 
> 标签：java, android, imageview

我正在使用[https://github.com/MikeOrtiz/TouchImageView](https://github.com/MikeOrtiz/TouchImageView)中的 TouchImageView ，我正在尝试使用高光。例如，当用户点击图像的某个点时（无论图像是否放大都无关紧要），我会触发一个事件 - 在 webview 中显示突出显示的描述。它有效，但只有当所有图像都适合视图时，当我放大所有错误时。if (scaledRight < 0) 它似乎工作得相当好，但是当它落在 else 上时它就不起作用了。任何帮助将不胜感激，如果有效，我可以将其发送给创建者:) 提前致谢。

public boolean onTouch(View v, MotionEvent event) { mScaleDetector.onTouchEvent(event);

```
 matrix.getValues(m);
            float x = m[Matrix.MTRANS_X];
            float y = m[Matrix.MTRANS_Y];

            PointF curr = new PointF(event.getX(), event.getY());

            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    last.set(event.getX(), event.getY());

                    if(!isFullScreen){
                        //System.out.println("Right is " + right);
                        //System.out.println("Bottom is " + bottom);
                        //System.out.println("Start x is " + start.x);
                        //System.out.println("Start y is " + start.y);

                        //float scaledRight = 2 * (right);
                        float scaledRight = 2 * (right/saveScale);
                        float scaledBottom = 2 * (bottom/saveScale);
                        //float scaledBottom = 2 * (bottom);

                        float tapPositionX = 0;
                        float tapPositionY = 0;

                        double xMaxBound = 0;
                        double xMinBound = 0;
                        double yMaxBound = 0;
                        double yMinBound = 0;                       
                        int radius = 0;

                        System.out.println("Right is " + right);
                        System.out.println("Bottom is " + bottom);
                        /*
                        if(theDeltaX < 0) {
                            theDeltaX = -theDeltaX;
                        }
                        theDeltaX = theDeltaX / saveScale;

                        if(theDeltaY < 0) {
                            theDeltaY = -theDeltaY;
                        }
                        theDeltaY = theDeltaY / saveScale;     
                        */

                        for(int i = 0; i < XMLParser.hlPicIDArray.size(); i++)
                        {
                            if(imageID.equalsIgnoreCase(XMLParser.hlPicIDArray.get(i))) {

                                radius = Integer.parseInt(XMLParser.hlRadiusArray.get(i));
                                xMaxBound = Integer.parseInt(XMLParser.hlOrXArray.get(i));
                                xMinBound = xMaxBound;
                                yMaxBound = Integer.parseInt(XMLParser.hlOrYArray.get(i));
                                yMinBound = yMaxBound;
                                xMaxBound = xMaxBound + (radius * Math.cos(0));
                                xMinBound = xMinBound + (radius * Math.cos(3.14));
                                yMaxBound = yMaxBound + (radius * Math.sin(1.57));
                                yMinBound = yMinBound + (radius * Math.sin(4.71));

                                if(scaledRight <= 0) {
                                    //tapPositionX = (bmWidth * 2) - (scaledRight) + (80/saveScale);
                                    tapPositionX = bmWidth - (scaledRight) + (80/saveScale);
                                    tapPositionX = (curr.x/width) * (tapPositionX);
                                    tapPositionX += (right);// - 80;
                                    xMinBound = xMinBound - (0.12 * xMinBound); //Compensation for imprecision
                                    //xMaxBound = xMaxBound - (0.08 * (maxScale - saveScale) * xMinBound); 
                                    //Highlight point is added to right to compensate the white margins
                                }
                                else {
                                    //?
                                    //tapPositionX = (start.x/width) * right * 2; //(+ offset)
                                    tapPositionX = (start.x/width) * right; //(+ offset)
                                    //tapPositionX = tapPositionX + ((theDeltaX/width) * bmWidth * 2);
                                    tapPositionX = tapPositionX + (last.x/width) * (bmWidth - right); // * 2
                                    //tapPositionX -= theDeltaX;
                                }

                                if(scaledBottom <= 0) {
                                    //tapPositionY = (bmHeight * 2) - (scaledBottom) + (80/saveScale);
                                    tapPositionY = bmHeight - (scaledBottom) + (80/saveScale);
                                    tapPositionY = (last.y/height) * tapPositionY;
                                    tapPositionY += (bottom/saveScale);// - 80;
                                    yMinBound = yMinBound - (0.12 * yMinBound); //Compensation for imprecision
                                    //yMaxBound = yMaxBound - (0.08 * (maxScale - saveScale) * yMinBound); 
                                }
                                else {
                                    //tapPositionY = (start.y/height) * bottom * 2;
                                    tapPositionY = (start.y/height) * bottom;
                                    tapPositionY = tapPositionY + (last.y/height) * (bmHeight - bottom);
                                    //tapPositionY -= theDeltaY;
                                }

                                System.out.println("X tapped is " + tapPositionX);
                                System.out.println("Y tapped is " + tapPositionY);
                                System.out.println("Delta X is " + theDeltaX);
                                System.out.println("Delta Y is " + theDeltaY);

                                if((tapPositionX <= xMaxBound) && (tapPositionX >= xMinBound) && (tapPositionY <= yMaxBound) && (tapPositionY >= yMinBound)) {
                                    System.out.println("HL Area tapped!"); 
```

# php - 数组的printf问题

> ID：12374971
> 
> 赞同：1
> 
> 时间：2012-09-11T17:31:40.960
> 
> 标签：php

所以我在获取一个数组并循环遍历值并使用 foreach 语句输出时遇到了问题。

**代码**

```
<?php
$example = array("test" => "hello world" );

foreach ($example as $arr) {
  printf("<p>what do you have to say for yourself?</p><p>%s!</p>",$arr["test"]);
}

?> 
```

**希望得到输出：**

你有什么要对自己说的？

你好世界！

**而是得到**

你有什么要对自己说的？

H！

为什么只有单个字符？

任何帮助都会很棒

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T17:33:48.483

您的 foreach 循环已经在遍历数组的值，因此不要使用键再次引用该值：

```
<?php
$example = array("test" => "hello world" );

foreach ($example as $key => $val) {
  printf("<p>what do you have to say for yourself?</p><p>%s!</p>",$val);
}

?> 
```

从评论中的另一个示例中，您将无法使用循环，因为展示位置非常具体。而是在没有循环的情况下专门引用每个值：

```
$example = array(
    "first" => "Bob", 
    "last" => "Smith", 
    "address" => "123 Spruce st"
);
printf("<p>my name is %s %s and i live at %s</p>", 
    $example['first'], 
    $example['last'], 
    $example['address']
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T17:52:55.337

也许以这种方式看待它会有所帮助；

```
<?php 
$example = array("test" => "hello world", "foo" => "bar"); 

foreach ($example as $key => $val) { 
# option 1
    echo "<p>what do you have to say for yourself?</p><p>$key => $val</p>"; 
# option 2
    echo "<p>what do you have to say for yourself?</p><p>$key => $example[$key]</p>"; 
} 
?> 
```

一旦你看到它是如何迭代的，你可以把你的语句放回 printf() 或者对变量做任何事情。

请注意，如果您有多维数组，则可以通过寻址键来引用数组的下一级；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T17:35:44.830

`$arr`循环遍历您的关联数组是在每次迭代中放置一个值。当您尝试对 $arr 进行索引时，您实际上是在对字符串进行索引，因此是单个字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T17:49:29.770

Foreach 假设数组中有多个元素。如果不只是回显元素，例如 echo $example['test']; 不需要循环构造。如果有多个元素：

```
$example = array('text'=>"what do you have to say for yourself?",'test' => "hello world" );

print_r($example);

foreach ($example as $value)  
printf("<p>%s!</p>",$value); 
```

foreach 在每个循环中将数组元素的值分配给一个名为 $value 的变量。有道理？

# python - 简单闪现一张图片

> ID：12374973
> 
> 赞同：1
> 
> 时间：2012-09-11T17:31:44.550
> 
> 标签：python, pyqt

我正在尝试修改使用 pyQt （特别是[Anki](http://ankisrs.net/)）编写的程序。我希望程序短暂地闪烁一张图片（作为文件存储在我的硬盘上），然后继续正常运行。

这段代码将被插入到程序中的某个任意点。*这是现有程序的临时单用户补丁 - 它不需要快速、优雅或易于维护。*

我的问题是我对pyQt知之甚少。我是否需要定义一个全新的“窗口”，或者我可以运行某种带有图像的“通知”功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T17:51:49.887

QSplashScreen 将对此很有用。它主要用于在程序加载时显示某些图像/文本，但您的情况看起来也很适合。您可以通过单击它来关闭它，或者另外您可以设置一个计时器以在一段时间后自动关闭它。

这是一个简单的示例，其中包含一个只有一个按钮的对话框。按下它会显示图像并在 2 秒后关闭：

```
import sys
from PyQt4 import QtGui, QtCore

class Dialog(QtGui.QDialog):
    def __init__(self, parent=None):
        super(Dialog, self).__init__(parent)

        layout = QtGui.QVBoxLayout()
        self.setLayout(layout)

        self.b1 = QtGui.QPushButton('flash splash')
        self.b1.clicked.connect(self.flashSplash)

        layout.addWidget(self.b1)

    def flashSplash(self):
        # Be sure to keep a reference to the SplashScreen
        # otherwise it'll be garbage collected
        # That's why there is 'self.' in front of the name
        self.splash = QtGui.QSplashScreen(QtGui.QPixmap('/path/to/image.jpg'))

        # SplashScreen will be in the center of the screen by default.
        # You can move it to a certain place if you want.
        # self.splash.move(10,10)

        self.splash.show()

        # Close the SplashScreen after 2 secs (2000 ms)
        QtCore.QTimer.singleShot(2000, self.splash.close)

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)

    main = Dialog()
    main.show()

    sys.exit(app.exec_()) 
```

# php - 在 MySql 中存储二进制空值

> ID：12374976
> 
> 赞同：0
> 
> 时间：2012-09-11T17:31:58.197
> 
> 标签：php, mysql, uuid

我正在处理很多 UUID，并且我一直在网上阅读，这是一个好主意

```
pack('H*',$uuid) 
```

将字符串存储在数据库中以节省存储空间，然后使用

```
sprintf('insert .... values (%s,...)', $connection->quote($packed_uuid)) 
```

但问题是，有时每当我的 UUID 中的“00”转换为 NULL 字符并且无法正确写入数据库时​​。有什么我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T00:47:11.380

我想到了。我不应该在存储值时打包它，让 mysql 自己打包。

```
mysql> INSERT INTO uuid_demo SET id=0x1e8ef774581c102cbcfef1ab81872213, name="Kekoa";
Query OK, 1 row affected (0.00 sec) 
```

并选择它：

```
mysql> SELECT hex(id), name FROM uuid_demo;
+----------------------------------+-------+
| hex(id)                          | name  |
+----------------------------------+-------+
| 1E8EF774581C102CBCFEF1AB81872213 | Kekoa | 
+----------------------------------+-------+
1 row in set (0.00 sec) 
```

欲了解更多信息，请访问[这里](http://kekoav.com/posts/uuid-primary-key-mysql)

# c# - 覆盖 C# 的虚拟方法 - 为什么这不会导致无限递归？

> ID：12374981
> 
> 赞同：13
> 
> 时间：2012-09-11T17:32:33.423
> 
> 标签：c#, recursion, virtual-functions

正在查看我们代码库中的一些代码，我无法理解它是如何/为什么工作的（并且不会由于无限递归而导致堆栈溢出）。我在下面粘贴了一些等效代码： 我们在类 P1 中定义了一个虚拟方法 Foo(B)，并在类 P2 中被覆盖。P2 还定义了一个私有的非虚拟方法 Foo(A)。B 派生自 A。P2::Foo(B) 最后有一个调用：Foo(b)。我希望这最终会导致堆栈溢出。但是，输出是： P2::Foo Virtual P2::Foo Private Non-Virtual

在这种情况下，看起来在被覆盖的方法中对 Foo 的第二次调用正在选择非虚拟方法 Foo 。在 P1（取消注释代码）中执行类似操作时，我们最终通过递归无限次调用 Foo。

问题：（终于！） 1.为什么原始虚拟方法和覆盖方法的行为不同？为什么一个调用自己而另一个调用不同的方法？2\. 某处是否指定了优先顺序？请注意，如果我们将 private 修饰符更改为 public，在这两种情况下，我们最终都会调用非虚拟方法（即使我们以这种方式实例化 P2： P1 p2 = new P2(); ，而不是 P2 p2 = new P2( );) 看起来非虚拟版本是首选，除非它位于虚拟方法定义中。这是真的？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
public class P1
{
    static void Main(string[] args)
    {
        B b = new B();
        P2 p2 = new P2();
        p2.Foo(b);
        // Uncomment code to cause infinite recursion
        //P1 p1 = new P1();
        //p1.Foo(b);
    }

    private void Foo(A a)
    {
        Console.WriteLine("P1::Foo Private Non-Virtual");
    }

    public virtual void Foo(B b)
    {
        Console.WriteLine("Inside P1::Foo");
        // Uncomment code to cause infinite recursion
        // Foo(b);
    }
}

public class P2 : P1
{
    private void Foo(A a)
    {
        Console.WriteLine("P2::Foo Private Non-Virtual");
    }

    public override void Foo(B b)
    {
        Console.WriteLine("P2::Foo Virtual");
        Foo(b);
    }
}

public class A
{
    public int a = 10;
}

public class B : A
{
    public int b = 20;
} 
```

}

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T17:36:31.737

这是因为重载决策仅在无法选择派生类型上定义的重载时才查看继承的成员。从规范（版本 4）：

> 例如，方法调用的候选集不包括标记为覆盖的方法（第 7.4 节），如果派生类中的任何方法适用（第 7.6.5.1 节），则基类中的方法不是候选方法。

具体解决您的问题：

> 为什么原始虚拟方法和覆盖方法的行为不同？

因为被覆盖的方法是在派生类中定义的，并且该类中存在适用的重载，所以不考虑虚拟方法。不考虑覆盖方法，因为从不考虑覆盖。

> 为什么一个调用自己而另一个调用不同的方法？

上面解释了派生类中的行为。在基类中，重载决议的最佳候选者是虚方法本身，因为它更具体（B 派生自 A）。

> 是否在某处指定了优先顺序？

是的，在[C# 语言规范](http://msdn.microsoft.com/en-us/library/ms228593.aspx)中（指向 Visual Studio 2012 版本规范的 MSDN 页面的链接）。

> 请注意，如果我们将 private 修饰符更改为 public，在这两种情况下，我们最终都会调用非虚拟方法（即使我们以这种方式实例化 P2： P1 p2 = new P2(); ，而不是 P2 p2 = new P2( );)

在这种情况下，可访问性不是一个重要问题。变量的类型`p2`也不相关，因为您询问的重载解决方案涉及`P2`虚拟方法覆盖中的调用站点。虚拟分派确保`Main()`调用调用覆盖，而不管变量的静态类型。在`P2`'s中的调用站点`override void Foo(B b)`，接收者是隐式的`this`，它始终具有静态类型`P2`。

> 看起来非虚拟版本是首选，除非它在虚拟方法定义中。这是真的？

不完全的; 如上所述，优先级不是针对非虚拟方法，而是针对在接收器类型中定义的方法（即，调用该方法的对象引用的静态类型）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-11T17:45:25.103

这是 C# 的一个经常被误解的特性：[如果派生类中的任何方法适用，则基类中的方法不是候选方法](http://blogs.msdn.com/b/ericlippert/archive/2007/09/04/future-breaking-changes-part-three.aspx)

# asp.net-mvc-3 - 如何在 ASP.NET MVC 3+ 应用程序中使用 Json.NET 作为默认反序列化器？

> ID：12374991
> 
> 赞同：11
> 
> 时间：2012-09-11T17:33:18.750
> 
> 标签：asp.net-mvc-3, json.net

有很多关于如何将 Json.NET 库替换为 ASP.NET MVC 应用程序中的[默认**序列化**](https://stackoverflow.com/a/7150912/304588)程序的资源，但是，在我的一生中，我找不到一个关于如何将其设置为默认**反序列化器**。

为了说明这一点，这里有一些模板代码：

```
 // how to use Json.NET when deserializing
                              // incoming arguments?
                                    V
public ActionResult SomeAction ( Foo foo ) {

    // this piece of code has lots of resources
    // on how to override the default Javascript serializer
    return Json(new Bar());

} 
```

在反序列化控制器操作中的传入参数（例如，来自 jQuery AJAX 调用）时，如何告诉我的应用程序使用 Json.NET？

```
$.ajax({
    type : 'POST',
    data : { foo : 'bar' }
}); 
```

我尝试通过[从 Rick Strahl](http://www.west-wind.com/weblog/posts/2012/Mar/09/Using-an-alternate-JSON-Serializer-in-ASPNET-Web-API)`MediaTypeFormatters`调整此资源来适应我的代码，但这也不起作用。请注意，我不在 WebAPI 环境中 --- 但我希望一种适用于正常情况的解决方案应该在.`Controller``ApiController`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:44:39.600

您需要实现自定义 ValueProviderFactory 并删除标准 JsonValueProviderFactory。

这里有一些示例代码：http: [//json.codeplex.com/discussions/347099](http://json.codeplex.com/discussions/347099)但是阅读评论，我不能 100% 确定它会正确处理字典。

# java - 关于生成不同java类之间的流图

> ID：12374997
> 
> 赞同：2
> 
> 时间：2012-09-11T17:33:37.400
> 
> 标签：java, uml

我有一个项目，其中有许多不同的包，在这些包中，有不同的 Java 类以及接口。

我想绘制类图以及类和接口之间的关系，以及方法如何流动。

所以请告诉我一个工具，我可以安装在我的 Eclipse 中，它会生成这些图表，特别是免费软件插件..!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:59:50.927

检查[视觉范式](http://www.visual-paradigm.com/solution/freeumltool/)。这是非常用户友好和免费的工具。
由于您使用的是 Eclipse，因此您可以使用[Eclipse 插件](http://www.visual-paradigm.com/solution/eclipseuml/)作为视觉范例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T17:37:54.247

我使用[ObjectAid](http://www.objectaid.com/)对 java 类进行逆向工程以生成 UML 图，它工作得很好，还可以选择将图导出为图像格式。

如果您可以不对代码进行逆向工程并从头开始自己生成图表，那么 [Violet UML Editor plugin for Eclipse] 是一个免费的 UML 工具。有一个`jnlp`版本可以作为独立应用程序运行，也可以在 eclipse 之外运行。