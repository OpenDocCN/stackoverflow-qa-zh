# StackOverflow 问答 10197000-10197999

# javascript - 使某些浏览器中的某些内容消失

> ID：10197002
> 
> 赞同：0
> 
> 时间：2012-04-17T18:36:25.830
> 
> 标签：javascript, html, internet-explorer, firefox, cross-browser

我的网站上有一个 img src，我注意到跨浏览器兼容性问题。我知道有一种方法可以检测带有 JavaScript 的浏览器，但是有没有一种方法可以让图像在 Internet Explorer 和 Firefox 中消失？它似乎在谷歌浏览器中工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:37:57.907

对于 IE：

```
<!--[if IE 8]> <link href="/ie8.css" rel="stylesheet" type="text/css"> <![endif]-->
<!--[if IE 9]> <link href="/ie9.css" rel="stylesheet" type="text/css"> <![endif]--> 
```

火狐

```
@-moz-document url-prefix() {
    #my-id { display:none; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T18:39:27.127

您可以将其设置为默认隐藏，然后使用 WebKit 特定的 CSS 再次显示它：

```
#someImage {
    display: none;
}

@media screen and (-webkit-min-device-pixel-ratio:0) {
    #someImage {
        display: inline; /* Or whatever else you may have set it to */
    }
} 
```

# xml - xsd 密钥未经过验证

> ID：10197007
> 
> 赞同：0
> 
> 时间：2012-04-17T18:36:37.423
> 
> 标签：xml

有人可以解释为什么我的密钥没有被强制执行吗？

```
<xs:element name="Cats">
  <xs:complexType>
    <xs:sequence maxOccurs="Unbounded">
       <xs:element name="cat" type="cattype"/>
     </xs:sequence>
  </xs:complexType>
  <xs:key name="CatsKey">
    <xs:selector xpath="cat" />
    <xs:field xpath="cat_id"/>
  </xs:key>
</xs:element>

<xs:complexType name="cattype">
<xs:sequence>
  <xs:element name="cat_id" type="xs:nonNegativeInteger"/>
</xs:sequence>
</xs:complexType> 
```

现在的xml

```
 <cats>
    <cat>
      <cat_id>1</cat_id>
    </cat>
    <cat>
      <cat_id>1</cat_id>  <-- this should fail, as cat_id 1 already exists
    </cat>
  </cats> 
```

但是 xmlparser 没有强制执行密钥。据我了解，关键值应该是强制性的和唯一的。我是否需要一个 keyref 或唯一的解析器来强制执行 key 约束，或者我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:53:45.123

您的数据可能在命名空间中吗？如果是这样，您就陷入了著名的陷阱，即在 XPath 表达式中使用非限定名称来引用命名空间元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:28:29.850

您可能想查看以下站点上的示例 17-2，因为它看起来涵盖了您正在尝试执行的操作[http://www.datypic.com/books/defxmlschema/chapter17.html](http://www.datypic.com/books/defxmlschema/chapter17.html)。

编辑：反馈是关键确实需要是唯一的，所以我删除了我的回复的那部分以避免混淆。

# javascript - 在 DART 中处理事件

> ID：10197010
> 
> 赞同：7
> 
> 时间：2012-04-17T18:36:39.380
> 
> 标签：javascript, dart, onclick, dom-events

我是飞镖的新手。我阅读了语言概述并检查了 DART 编辑器中的示例代码。到目前为止，我找不到如何处理 DART 中的事件。例如`onclick="call_dart_method()"`。

我们如何处理 DART 中的事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T22:50:27.457

这不是你在 Dart Check 上的做法，在事件部分下： [http ://www.dartlang.org/articles/improving-the-dom/](http://www.dartlang.org/articles/improving-the-dom/)

```
elem.onClick.listen(
    (event) => print('click!')); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T16:40:12.617

此外，您可能会发现能够选择性地声明我们的变量类型使得在 Dart bliss 中处理事件。

```
import 'dart:html';
import 'dart:math';

class MyApplication {
  MyApplication() {
    CanvasElement screenCanvas;
    CanvasRenderingContext2D screen;
    final int WIDTH = 400, HEIGHT = 300;

    Random rand = new Random();
    screenCanvas = new CanvasElement();
    screenCanvas
      ..width = WIDTH
      ..height = HEIGHT
      ..style.border = 'solid black 1px';

    screen = screenCanvas.getContext('2d');
    document.body.nodes.add(screenCanvas);
    screenCanvas.onClick.listen((MouseEvent me) {
      int
          r = rand.nextInt(256),
          g = rand.nextInt(256),
          b = rand.nextInt(256);
      double a = rand.nextDouble();
      screen
        ..save()
        ..translate(me.offsetX, me.offsetY)
        ..rotate(rand.nextDouble() * PI)
        ..fillStyle = 'rgba($r,$g,$b,$a)'
        ..fillRect(-25, -25, 50, 50)
        ..restore();
    });
  }
}

void main() {
  new MyApplication();
} 
```

# c# - 简单的 csv 逗号分隔的 html 表生成

> ID：10197012
> 
> 赞同：1
> 
> 时间：2012-04-17T18:36:44.713
> 
> 标签：c#, csv, html-table

我知道以前有人问过这个问题，但我对答案不太满意（考虑到它没有解释发生了什么）。

我的具体问题是：如何打开逗号分隔的 csv/文本文件，行由返回分隔并使用 C# 将其放入 HTML 表中？

我了解如何在 PHP 中执行此操作，但我刚刚开始学习 ASP.Net/C#，如果有人有一些免费的 C# 资源和/或能够为我提供一段代码并解释发生了什么我会欣赏它。

我有这段代码，但我不确定如何使用它，因为 A）我不知道 C# 数组是如何工作的，并且 B）我不确定如何在 ASP.Net C# 中打开文件：

```
var lines =File.ReadAllLines(args[0]);
    using (var outfs = File.AppendText(args[1]))
    {
        outfs.Write("<html><body><table>");
        foreach (var line in lines)
            outfs.Write("<tr><td>" + string.Join("</td><td>", line.Split(',')) + "</td></tr>");
        outfs.Write("</table></body></html>");
    } 
```

对于我在这里明显缺乏经验，我深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T00:19:51.640

您发布的代码示例完全符合您的要求：

1.  打开一个文件。
2.  将包含步骤 1 中文件内容的表格的 HTML 字符串写入另一个文件。

让我们分解一下：

```
var lines =File.ReadAllLines(args[0]); 
```

这将打开 args[0] 中指定的文件并将所有行读入一个字符串数组，每个元素一行。请参阅[File.ReadAllLines 方法（字符串）](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)。

```
using (var outfs = File.AppendText(args[1])) 
{ 
```

[File.AppendText 方法](http://msdn.microsoft.com/en-us/library/system.io.file.appendtext.aspx)创建一个 StreamWriter 以将文本附加到现有文件（如果不存在则创建它）。文件名（可能还有路径）在 args[1] 中。该`using`语句将 StreamWriter 放入所谓的 using 块中，以确保在离开 using 块后正确处理流。有关详细信息，请参阅[using 语句（C# 参考）](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)。

```
 outfs.Write("<html><body><table>"); 
```

`outfs.Write`调用 StreamWriter 的 Write 方法（[StreamWriter.Write Method (String)](http://msdn.microsoft.com/en-us/library/ce2kyyb4.aspx)）。实际上，就您的代码片段而言，在您退出 using 块之前，不会将任何内容写入文件 - 它已写入缓冲区。退出 using 块将刷新缓冲区并写入文件。

```
 foreach (var line in lines) 
```

此命令开始循环遍历字符串数组中的所有元素，`lines`从第一个（元素 0）索引开始。如果需要，请参阅[（C# 参考）中的 foreach 以获取更多信息。](http://msdn.microsoft.com/en-us/library/ttw7t8t6%28v=vs.100%29.aspx)

```
 outfs.Write("<tr><td>" + string.Join("</td><td>", line.Split(',')) + "</td></tr>"); 
```

String.Join 是这里的关键部分，大部分工作都在这里完成。 [String.Join Method (String, String[])](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)具有技术细节，但本质上这里发生的是第二个参数 ( `line.Split(',')`) 传入一个字符串数组，然后该数组中的字符串与第一个参数 ( `</td><td>`) 作为分隔符，并且正在打开和关闭表格行。

例如，如果该行是“1,2,3,4,5,6”，则为`Split`您提供一个 6 元素数组。然后将该数组与`</td><td>`作为分隔符的 by连接起来`String.Join`，因此您有`"1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6"`. `"<tr><td>"`添加到前面并`"</td></tr>"`添加到末尾，最后一行是`"<tr><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td></tr>"`.

```
 outfs.Write("</table></body></html>");     
} 
```

这会将 HTML 的结尾写入缓冲区，然后将其刷新并写入指定的文本文件。

有几点需要注意。 `args[0]`并`args[1]`用于保存命令行参数（即 MakeMyTable.exe InFile.txt OutFile.txt），这些参数（根据我的经验）不适用于 ASP.NET 应用程序。您需要对必要的文件（和路径）进行编码，或者允许用户指定输入文件和/或输出文件。ASP.NET 应用程序将需要在有权访问这些文件的帐户下运行。

如果您在 CSV 文件中引用了值，则需要处理这些值（例如，这在处理货币金额时很常见），因为拆分`,`可能会导致拆分不正确。我建议看一下[TextFieldParser](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)，因为它可以很容易地处理带引号的字段。

除非您确定文件中的每一行具有相同数量的字段，否则您将面临表格中 HTML 格式不正确且无法保证其呈现方式的风险。

此外，建议测试您打开的文件是否存在。可能还有更多，但这些是基础知识（可能已经超出了 Stack Overflow 的范围）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:00:20.323

希望这将帮助您指出正确的方向：

```
line = "<table>" + line;
foreach (string line in lines)
{
    line = "<tr><td>" + line;
    line.Replace(",", "</td><td>");
    line += "</td></tr>";
}
Response.Write(line + "</table>"); 
```

祝你学习顺利！

# java - ListItem 单击不起作用

> ID：10197013
> 
> 赞同：0
> 
> 时间：2012-04-17T18:36:45.463
> 
> 标签：java, android, android-listview

在我的代码中，我想在 Rss 提要的列表中显示 webview 和 textview。这是代码：

```
 public class VediolistfetchActivity extends Activity {
        /** Called when the activity is first created. */

        ListView Feed;
        URL url;
        String[] title = { " " }, image={""};
        ArrayAdapter<String> adapter;
        ArrayList<Home> homes = new ArrayList<Home>();

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            Feed = (ListView) findViewById(R.id.list);

            try {

                SAXParserFactory saxPF = SAXParserFactory.newInstance();
                SAXParser saxP = saxPF.newSAXParser();
                XMLReader xmlR = saxP.getXMLReader();

                url = new URL("http://www.powergroupbd.com/sweethome/videolist.xml");

                RSSHandler myXMLHandler = new RSSHandler();
                xmlR.setContentHandler(myXMLHandler);
                xmlR.parse(new InputSource(url.openStream()));

                ArrayList<String> GOTTitle = myXMLHandler.gotTitle();
                ArrayList<String> GOTImage = myXMLHandler.gotImage();

                title = new String[GOTTitle.size()];
                image = new String[GOTImage.size()];

                for (int i = 0; i < GOTTitle.size(); i++) {
                    Home home = new Home();
                    title[i] = GOTTitle.get(i).toString();
                    image[i] = GOTImage.get(i).toString();
                    home.openclose=GOTTitle.get(i);
                    home.imagehome=GOTImage.get(i);
                    homes.add(home);
                }

                HomeAdapter homeAdapter = new HomeAdapter(
                        VediolistfetchActivity.this, R.layout.list_catagory,
                        homes);

                Feed.setAdapter(homeAdapter);

            }

            catch (Exception e) {
                Toast.makeText(getApplicationContext(),
                        "Something Went Wrong, Please check your net connection",
                        Toast.LENGTH_LONG).show();
            }
        }
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            // TODO Auto-generated method stub

            Log.i("List Click", "Yes");
            String dtlHomeTitle = Feed.getItemAtPosition(arg2).toString();
            Log.i("title", dtlHomeTitle);

        }

    } 
```

这是我的 main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
<ListView
                    android:id="@id/list"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:divider="#000000"
                    android:scrollbars="none"
                    android:scrollingCache="true" />
</LinearLayout> 
```

这是 listcatagory.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
       <ListView
        android:id="@+id/list"
        android:layout_width="1px"
        android:layout_height="1px"
        android:layout_weight="1" >
    </ListView>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal"
        android:weightSum="100" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="38"
            android:orientation="vertical" >

            <WebView
                android:id="@+id/img"
                android:layout_width="70dp"
                android:layout_height="70dp"
                android:paddingBottom="2dp"
                android:paddingLeft="5dp"
                android:paddingRight="5dp"
                android:paddingTop="2dp"
                android:scaleType="centerCrop"/>
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="15"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/title"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="#ffffff"
                android:textSize="20dp"
                android:textStyle="bold"
                android:paddingLeft="5dp" />

        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="47"
            android:orientation="vertical" >
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

但是当我单击单个列表项时，什么都没有发生..请有人告诉我为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:40:06.487

您实际上并没有在 ListView 上设置 onItemClick 侦听器

在你的 onCreate 中试试这个

```
Feed = (ListView) findViewById(R.id.list);
Feed.setOnItemClickListener(this); 
```

@edit：注意到您实际上并没有让您的类实现 OnItemClickListener 尽管创建了一个与您要实现的方法相同的方法。确保你添加`implements OnItemClickListener`到你的类声明

```
public class VediolistfetchActivity extends Activity implements OnItemClickListener 
```

# c# - 使用 c# 传递 JavaScript 对象

> ID：10197014
> 
> 赞同：0
> 
> 时间：2012-04-17T18:36:46.163
> 
> 标签：c#, javascript, jquery, asp.net

我的网站上有一个表单，它使用 jquery 收集数据和帖子，并使用 c# 处理。我使用 request.form 来捕获表单数据。

我的朋友说要创建一个 JavaScript 对象来传递数据，而不是加载大量变量。我的问题是，当您发布带有值对的对象时，您如何让 c# 从对象中获取值，因为我现在似乎无法使用 request.form。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T18:39:34.473

你看过[JSON.Net](http://json.codeplex.com/)吗？这使得 JSON（反）序列化非常容易

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T18:44:36.927

.NET 有一个内置的 JavaScript（即 JSON）序列化程序。它在 System.Web.Extensions 中。

```
 JavaScriptSerializer serializer = new JavaScriptSerializer();

 // To serialize
 Dictionary<string, object> test = new Dictionary<string, object>(){ { "a", 1 } };
 string json = serializer.Serialize(test);

 // To deserialize (convert back to a .NET object)
 Dictionary<string, object> result = serializer.Deserialize<Dictionary<string, object>>(json); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T18:45:58.953

Json.js 具有 Stringify() ，它将您的 js 对象转换为 Json 字符串，因此在 C# 中您可以将此字符串反序列化回一个对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T18:39:30.230

您可以使用 1 个隐藏字段并在该字段中放置一个 JSON 值/对字符串，然后在服务器端解析它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T08:14:05.263

我已经设法解决了这个问题。发布数据时，我必须使用 Request 而不是 Request.Form。现在这些值正在被传回。抱歉，如果我没有包含任何代码，我认为我提出的问题有点模棱两可。

# rpm - rpm 找不到指定的文件

> ID：10197018
> 
> 赞同：1
> 
> 时间：2012-04-17T18:37:10.020
> 
> 标签：rpm, rpmbuild, specifications

我有一个简单的规范文件：

```
Name:       example
Summary:    example desc
Version:    1
Release:    1
Url:        http://www.example.com
Source:     %{name}-%{version}.tar.bz2
Group:      System Environment/Libraries
BuildRoot:  %{_topdir}/BUILDROOT/%{name}-%{version}

%description
description goes here

%prep
mkdir -p %{buildroot}

%build
pwd

%install
cp -a %{_sourcedir}/%{name}-%{version}/* %{buildroot}

%clean
pwd

%files
/* 
```

rpmbuild 每次抱怨未打包的文件时都会失败（似乎找不到所有已安装的文件）。对 %files 部分的修改似乎没有产生任何差异。这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:50:33.307

没关系。.spec 文件的部分显然受顺序影响。将 %files 部分移动到不同的地方可以使事情正常进行。Parsers：你能向他们学习 rpmbuild 开发人员吗？

# iphone - SDWebImage 的 uiImageView 错误

> ID：10197020
> 
> 赞同：0
> 
> 时间：2012-04-17T18:37:20.207
> 
> 标签：iphone, xcode, ipad

添加 SDWebImage 库并放置其标准代码后：

> [cell.imageView setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"] placeholderImage:[UIImage imageNamed:@"placeholder.png"]];

我得到下一个错误：

> ViewController.m：错误：自动引用计数问题：接收器类型“UIImageView”例如消息未声明带有选择器“setImageWithURL:placeholderImage:”的方法

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T18:45:15.693

正如[文档](https://github.com/rs/SDWebImage)所说，您应该 import [`"UIImageView+WebCache.h"`](https://github.com/rs/SDWebImage/blob/master/UIImageView+WebCache.h)，这是在类别`setImageWithURL:placeholderImage:`中声明方法的标头。`UIImageView`

```
#import "UIImageView+WebCache.h"

// ...

[cell.imageView setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"] placeholderImage:[UIImage imageNamed:@"placeholder.png"]]; 
```

# mongodb - 在 MongoDB 中，当文档具有嵌入文档时，为什么更新/查找确切文档会失败？

> ID：10197021
> 
> 赞同：0
> 
> 时间：2012-04-17T18:37:23.610
> 
> 标签：mongodb

我正在使用 pymongo 作为参考。

因此，如果我有这样的文件：

```
{
    'name': 'bill',
    'color': 'blue',
    'subdocument': {
        'title': 'Untitled',
        'content': 'Hello World',
    }
} 
```

如果我发现此文档在执行 db.users.find()[0] 并将其作为参数传递给更新，除非我删除子文档，否则 Mongo 将找不到要更新的文档。除非删除子文档，否则将找到的文档传递给 find_one 也会失败。

为了优化锁定，我需要指定所有字段。如何轻松检索文档、更新文档并将原始字段作为未更改的要求传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:13:33.240

由于我主要出于乐观锁定的目的对此感兴趣，因此我找到了比我最初尝试更好的解决方案，这要感谢[MongoDB 用户组的 Scott](http://groups.google.com/group/mongodb-user/browse_thread/thread/3f9663547f57e1f9)

解决方案是使用“版本”计数器字段，并且仅在该字段未更改时才更新。在每次更新文档时，执行更新的查询应该增加计数器。 [这更快](http://code.google.com/p/morphia/wiki/MongoNewsletterArticleDec2010zT2XeCE-PGrgf5fgGdBAxgOx2qw)，因为不必扫描和比较所有字段即可进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:11:41.907

我相信您[在 MongoDB 中遇到了一个很深的错误](https://jira.mongodb.org/browse/SERVER-2592)。[您可以在此错误](https://jira.mongodb.org/browse/SERVER-5030)中看到类似的问题。

嵌入式文档作为二进制而不是作为文档进行比较。所以`subdocument: {a:1,b:2}`是不同的，`subdocument:{b:2,a:1}`即使他们不应该是。

请参阅[此评论](https://jira.mongodb.org/browse/SERVER-2592?focusedCommentId=24285&page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#comment-24285)以了解为什么这可能是一个问题。

当然，第一个错误既严重又一年多，所以这个问题是否会很快得到修复是值得怀疑的。事实上，它目前是计划外的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T19:16:16.037

您是否输入了“$set”术语？

这是我所做的：

```
d = {
    '名称'：'账单'，
    “颜色”：“蓝色”，
    “子文档”：{
        '标题'：'无标题'，
        '内容'：'你好世界'，
    }
}

db.name.insert(d)
f = db.name.find_one({'name':'bill'})
打印 f
{u'color': u'blue', u'_id': ObjectId('4f8dbc834647df1428000002'), u'name': u'bill', u'subdocument': {u'content': u'Hello World', u'title': u'无标题'}}

db.name.update(f, {'$set':{'name':'fred'}})

f = db.name.find_one({'name':'fred'})
打印 f
{u'color': u'blue', u'_id': ObjectId('4f8dbc834647df1428000002'), u'name': u'fred', u'subdocument': {u'content': u'Hello World', u'title': u'无标题'}}

```

# entity-framework - SaveChanges 影响几个存储库

> ID：10197022
> 
> 赞同：0
> 
> 时间：2012-04-17T18:37:24.243
> 
> 标签：entity-framework

如何调用唯一的 SaveChanges 来影响我使用的所有存储库中的所有更改？我应该创建一个包含所有存储库和 Save 方法的类吗？最好的方法是什么？

* * *

我正在尝试这个：

```
public ActionResult Create()
{
    Product Product = new Product() { Id = 1, Name = "test", Amount = 1 };

    if (_productService.Insert(Product))
    {
        context.SaveChanges();

        return View();
    }

    return RedirectToAction("Index");
} 
```

这个对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:59:03.810

最好的方法称为工作单元，它通常是你的 EF 上下文的包装类，它被传递给你的存储库的构造函数。你比打电话`Save`给这个新班级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:37:29.250

将 IDbContext/ObjectContext 传递给存储库的构造函数。使用存储库并在上下文而不是存储库上调用 Save。

如果您根本需要存储库，我也会重新考虑。

# batch-file - 批处理脚本 - 为每个令牌调用一个子例程

> ID：10197023
> 
> 赞同：2
> 
> 时间：2012-04-17T18:37:28.257
> 
> 标签：batch-file, dos

我正在尝试将令牌传递给批处理脚本中的子例程-

```
SET devices=host1 host2 host3
FOR /F "tokens=* delims=," %%G IN (%devices%) DO CALL :sendReq %%G

:sendReq

curl.exe http://%1:1234/service/monitor

GOTO :EOF 
```

问题 - `The system cannot find the file host1`- 是错误信息不知道为什么。

`%1`是不是解决了`host1`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T19:19:53.150

`for /f`真正的意思是解析文本文件或命令，并一次解析一整行。看看这会产生什么：

```
SET devices=host1 host2 host3
FOR /F "tokens=*" %%G IN ("%devices%") DO call :sendReq %%G %%H %%I
goto :EOF

:sendReq
echo Parm1: %1
echo Parm2: %2
echo Parm3: %3
GOTO :EOF 
```

（即每个循环读取一整行，并将不同的标记分配给`%G`, 然后`%H`, `%I`, `%J`, ... 取决于您实际拥有的标记数量。）

您只需要更简单的版本`for`：

```
SET devices=host1 host2 host3
FOR %%G IN (%devices%) DO call :sendReq %%G
goto :EOF

:sendReq
echo In sendReq: %1
GOTO :EOF 
```

# vb.net - 这是后期绑定还是什么？

> ID：10197026
> 
> 赞同：1
> 
> 时间：2012-04-17T18:37:44.163
> 
> 标签：vb.net, linq, linq-to-sql, datatable, late-binding

我将加密的电子邮件地址存储在我的数据库中并使用我的`DoDecrypt`功能在 AspGrid 中显示未加密的电子邮件地址

所以我的 LINQ 查询类似于

```
Dim Query = From c In DB.Something Select New With {.Email = DoDecrypt(c.Email)} 
```

在调试模式下返回一组电子邮件...

使用 Linq to datatable 函数后，返回的结果是在数据库中找到的结果，即加密的结果。

这里出了什么问题？我应该如何修改我的 Linq 查询？

这是 Linq to datatable 函数

```
 Public Shared Function ToDataTable(DB As System.Data.Linq.DataContext, query As Object) As DataTable
        If query Is Nothing Then
            Throw New ArgumentNullException("query")
        End If

        Dim cmd As IDbCommand = DB.GetCommand(TryCast(query, IQueryable))
        Dim adapter As New SqlDataAdapter()
        adapter.SelectCommand = DirectCast(cmd, SqlCommand)
        Dim dt As New DataTable("sd")

        Try
            cmd.Connection.Open()
            adapter.FillSchema(dt, SchemaType.Source)
            adapter.Fill(dt)
        Finally
            cmd.Connection.Close()
        End Try
        Return dt
    End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T18:42:15.003

您需要实际解析查询，默认情况下它是后期绑定的，但如果您真的想要解析查询，您只需调用`.ToList()`. 我刚刚将您的查询放在下面的括号中并`.ToList()`在最后调用。不确定这是否是*确切的*VB 语法（来自此处的 C# 知识），但主体仍然相同。

```
Dim Query = (From c In DB.Something Select New With {.Email = DoDecrypt(c.Email)})
.ToList() 
```

# jquery - jquery - 在 .css() 调用和其他怪异之后恢复到原始样式声明

> ID：10197030
> 
> 赞同：0
> 
> 时间：2012-04-17T18:37:56.457
> 
> 标签：jquery

我试图让我的网络应用程序中的状态栏在收到消息（通过 php）时增长，然后在几秒钟后恢复到原来的高度。

这是加载页面时应用的 css：

```
<style>

      #status {

        height:17px;
        background-color:#424242;
        -moz-transition:height 1s;
        -webkit-transition:height 1s;

        }

    #status:hover {

        height:60px;

     }

</style> 
```

这是用户收到消息时调用的代码。

```
<script>

    $('#status').css('height', '60px');
    $('#status_message').text('$message').show();
    $('#status').delay(1000).css('height', '17px');

 </script> 
```

但是，我有两个问题。一，当我取出脚本中的最后一条语句时，一切正常，所以我认为 delay() 调用搞砸了。我尝试将它移到第二个语句的末尾，如下所示：

```
<script>

    $('#status').css('height', '60px');
    $('#status_message').text('$message').show().delay(100000);
    $('#status').css('height', '17px');

 </script> 
```

但这也行不通。我遇到的第二个问题是上面的代码运行，然后我的状态栏的原始 css 悬停事件不起作用。我已经尝试使用 $.css() 函数重新指定状态栏的所有原始 css，但它仍然不起作用。我认为这与我无法使用 jQuery 重新应用 #status:hover 事件有关，当我尝试使用 .hover() 实现相同的行为时，它仍然不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T18:44:30.400

为什么不简单地使用 a `setTimeout`？

```
setTimeout(function()
{
     $('#status').css('height': '17px');
}, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T18:48:20.310

您的第一个问题是通过 jquery 使用 .css 实际上应用了内联样式。

为避免这种情况，请将新 css 放入新类中，例如：

```
#status.dynamic{
    height:60px;
} 
```

和你的js：

```
 $('#status').addClass('dynamic');
    //$('#status_message').text('$message').show().delay(100000);
    $('#status').removeClass('dynamic'); 
```

至于延迟，你把它放在最后并没有延迟任何事情。如果你想看到它的工作，试试这样：

```
$('#status_message').text('$message').show().delay(1000).fadeOut(); 
```

# opengl - OpenGL透视投影和相机位置

> ID：10197032
> 
> 赞同：-2
> 
> 时间：2012-04-17T18:37:59.937
> 
> 标签：opengl, glulookat

我正在用OpenGL中的一些地图图像渲染一个场景，并直接使用地图的纬度、经度作为坐标。所以我的场景不是从 0,0 开始，而是上升到宽度、高度。虽然我可以看到我的多边形（非常小），但我无法通过更改 gluLookAt() 中眼睛的 z 值来进行缩放。

```
/*
 * My boundary for map quad with texture
 */
#define TOP 41.9061
#define BOTTOM 41.8546
#define LEFT -87.7012
#define RIGHT -87.6054

/*
 *  window size
 */
const unsigned int window_width = 1024;
const unsigned int window_height = 739;

/*
 * drawing a polygon with texture
 */
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, mainMapTextureId);
glBegin( GL_POLYGON );   
//bottom left
glTexCoord2f( 0.0f, 1.0f );
glVertex3f(LEFT, BOTTOM, 0.0);

//bottom right
glTexCoord2f( 1.0f, 1.0f ); 
glVertex3f(RIGHT, BOTTOM, 0.0);

//top right
glTexCoord2f( 1.0f, 0.0f );
glVertex3f(RIGHT, TOP, 0.0);

//top left
glTexCoord2f( 0.0f, 0.0f ); 
glVertex3f(LEFT, TOP, 0.0);
glEnd();

/*
 * Setting up the camera
 */
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(60.0, (GLfloat)window_width/(GLfloat)window_height, 0.0, 10.0);
gluLookAt( (float)(LEFT+RIGHT)/2.0, (float)(TOP+BOTTOM)/2.0, 1.0, 
               (float)(LEFT+RIGHT)/2.0, (float)(TOP+BOTTOM)/2.0, 0.0,
        0.0f, 1.0f, 0.0f); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:29:40.283

gluPerspective 的近平面的值为 0.0 是不合法的。尝试用名义上的小值（0.1f）替换它。

也总是在你的代码最后加上一个 glGetError 调用，它会提醒你出现问题。

# sql - 按小时汇总列（使用 DATETIME 列）

> ID：10197035
> 
> 赞同：1
> 
> 时间：2012-04-17T18:38:10.887
> 
> 标签：sql, sql-server

我有一个数据库，我需要使用 datetime 列对 2 个值求和。例子：

```
Date                Offered
4/16/2012 08:00:00        2
4/16/2012 08:30:00       18
4/16/2012 09:00:00       14
4/16/2012 09:30:30       42 
```

我需要将 08:00:00 的值与 08:30:00（总计：20）和 09:00:00 与 09:30:00（总计：56）的值相加，依此类推。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T18:52:04.833

这应该适合你

```
select datepart(hour,myDate), SUM(Offered)
from myTable
group by 
    datepart(hour,myDate), 
    dateadd(d, 0, datediff(d, 0, myDate)) 
```

如果您希望按个别日期汇总，则需要按小时和日期分组，否则您将包括其他日期（即 4 月 15 日等...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T18:42:24.113

你的伪代码

```
Select HOUR(date), sum(offered) as sumO
FROM YourTable
Group By Hour(date) 
```

需要将 Hour(date) 更改为您正在使用的数据库的正确语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T19:35:58.183

```
SELECT [Hour] = DATEPART(HOUR, [Date]), Offered = SUM(Offered)
  FROM dbo.table_name
  WHERE [Date] >= '20120416'
  AND [Date] < '20120417'
  GROUP BY DATEPART(HOUR, [Date])
  ORDER BY [Hour]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-17T18:41:06.520

使用 DatePart 函数。语法取决于您的数据库

```
Select DatePart("year", Date), Sum(Offered)
From table1
Group By DatePart("year", Date) 
```

# jquery - 如果边距和填充为0，为什么imgs之间有空格？

> ID：10197042
> 
> 赞同：1
> 
> 时间：2012-04-17T18:38:45.240
> 
> 标签：jquery, css, dom, cross-browser

如果边距和填充为0，为什么imgs之间有空格？请看这个：http: [//jsfiddle.net/4gk49/2/](http://jsfiddle.net/4gk49/2/)

`li`如果s 和`img`s 的边距和填充设置为零，为什么图像之间的这些空格？

为什么会这样？

期望的行为是在所有浏览器中始终将所有图像放在一起。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T18:39:57.267

图像是`inline`默认的。尝试设置`display: block`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T18:40:13.883

这是标签之间的实际空格...尝试：

```
<li><img src="/Content/img/slider/1.jpg" alt="1" /></li><li><img
 src="/Content/img/slider/2.jpg" alt="2" /></li><li><img
 src="/Content/img/slider/3.jpg" alt="3" /></li><li><img
 src="/Content/img/slider/4.jpg" alt="4" /></li> 
```

# database-design - 在 UML 中表示一对一关系（引用）的正确方法

> ID：10197043
> 
> 赞同：2
> 
> 时间：2012-04-17T18:38:48.490
> 
> 标签：database-design, uml

我有两个表，它们之间存在一对一的关系：

```
Person
 - Id
 - HouseFk

House
 - Id 
```

Person 有一个 House 的外键。请注意，HouseFk 也可以为 NULL。在 UML 中表示这一点的正确方法是什么？我可以想出两种表示法的变化：

1比0..1：

```
 1     0..1    
Person----------House 
```

0..1 对 1：

```
 0..1     1    
Person----------House 
```

它是哪种方式，为什么？我真的很困惑，因为我听说一对多关系的键位置颠倒了，这意味着 B 指的是 A，从中可以一对一地推断出来（尽管在我的情况下，这是一对零或一的情况，A 指的是 B，因此 0..1 在 B 侧（第一个）？还是A面（第二）？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T21:12:23.450

你们关系的规则是什么？你需要先定义它。人“拥有”房子？人“住在”房子里？让我们暂时假设它是“拥有”的。然后你有几个选择：

**选项 1：无选择性（强制性 1:1）：**

```
- Each Person must own exactly one House
- Each House must be owned by exactly one Person 
```

这将表示

```
 1           1
Person ------------- House 
```

**选项 2a：可选一种方式：**

```
 - Each Person may own at most one House
 - A Person need not own any Houses
 - Each House must be owned by exactly one Person 
```

这将表示

```
 1        0..1
Person ------------- House 
```

**选项 2b：可选的另一种方式：**

```
 - Each Person must own exactly one House
 - Each House may be owned by at most one Person
 - A House need not be owned by any Person 
```

这将表示

```
 0..1        1
Person ------------- House 
```

**选项 3：双向可选：**

```
 - Each Person may own at most one House
 - A Person need not own any Houses
 - Each House may be owned by at most one Person
 - A House need not be owned by any Person 
```

这将表示

```
 0..1     0..1
Person ------------- House 
```

**编辑（*）**

您的数据库模式不是上述的。它说：

```
 - Each Person may own at most one House
 - A Person need not own any Houses
 - Each House may be owned by many People
 - A House need not be owned by any Person 
```

不知道这是否是你想要的......？[如果你不明白为什么大喊]。

hth。

*感谢 ypercube 在下面的评论中指出更正。

# java - Java servlet API 中有通用的 RequestContext 吗？

> ID：10197046
> 
> 赞同：14
> 
> 时间：2012-04-17T18:38:57.657
> 
> 标签：java, servlets

*（我不确定如何在这里准确地表达标题，因此我也不确定如何去寻找答案。）*

我有一个处理请求的 Java servlet 引擎。假设我们有一个`doGet()`请求：

```
public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    //set up user data

    //do whatever the user requested
    SomeClass c = new SomeClass();
    c.doSomething();
} 
```

现在`doSomething()`，我希望能够访问提出请求的用户。现在我通过在方法中创建一个 Java 对象并将它传递到我需要的任何地方来做到这一点：

```
public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    //set up user data
    MyUserObj userObj = new MyUserObj();
    userObj.setId('123');

    //do whatever the user requested
    SomeClass c = new SomeClass(userObj);
    c.doSomething();
} 
```

通过这样做，我可以访问 的实例`MyUserObj`，并且可以根据需要在应用程序中进一步传递。

我知道在 ASP.NET MVC3 中，我可以通过为当前线程存储项目/属性来实现这一点，如下所示 `HttpContext.Current.Items.Add("myId", "123")`： `HttpContext`然后在其他函数中可用，而无需显式传递对象。

Java中有没有办法在不将对象作为参数传递的情况下为每个请求设置一些变量（甚至设置`MyUserObject`稍后访问）？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-17T18:43:10.357

servlet API 中没有，但您可以很容易地制作自己的 API。（一些框架如 spring-mvc、struts 提供了这样的功能）

只需使用 a`public static ThreadLocal`来存储和检索对象。您甚至可以将其`HttpServletRequest`本身存储在 threadlocal 中并使用它的`setAttribute()`/`getAttribute()`方法，或者您可以存储一个 threadlocal `Map`，以与 servlet API 无关。一个重要的注意事项是您应该在请求之后清理线程本地（例如使用过滤器）。

另请注意，将对象作为参数传递被认为是一种更好的做法，因为您通常将其从 Web 层传递到服务层，而服务层不应依赖于与 Web 相关的对象，例如`HttpContext`.

如果您认为可以将它们存储在线程本地中，而不是传递它们：

```
public class RequestContext {
    private static ThreadLocal<Map<Object, Object>> attributes = new ThreadLocal<>();
    public static void initialize() {
        attributes.set(new HashMap<Map<Object, Object>>());
    }
    public static void cleanup() {
        attributes.set(null);
    }
    public static <T> T getAttribute(Object key) {
        return (T) attributes.get().get(key);
    }
    public static void setAttribute(Object key, Object value) {
        attributes.get().put(key, value);
    }
} 
```

还有一个必要的过滤器：

```
@WebFilter(urlPatterns="/")
public class RequestContextFilter implements Filter {
     public void doFilter(..) {
         RequestContext.initialize();
         try {
             chain.doFilter(request, response);
         } finally {
             RequestContext.cleanup();
         }
     }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T18:50:39.507

您可以使用 将对象附加到当前请求[`setAttribute`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#setAttribute%28java.lang.String,%20java.lang.Object%29)。此 API 主要用于内部路由，但也可以安全地用于您自己的目的，只要您为属性名称使用适当的命名空间。

# css - css 和页面布局，如 FB 和类似网站

> ID：10197049
> 
> 赞同：-3
> 
> 时间：2012-04-17T18:39:00.683
> 
> 标签：css, html

任何人都知道如何使用 css+html 定义类似于 FB 的布局的好教程？

我正在寻找一个很好的例子，说明如何拥有一个 100% 的标题，然后是一个中间列作为一个大约 700 像素宽的主体，每侧有一列。

更新：

我不是想用 div 理解 CSS 布局。只是想看看是否有一种方法或常见的方法来做到这一点

我很想知道（以FB为例）..他们如何能够拥有这些水平背景，然后将其内容排列成三列或排列在中间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T18:50:56.393

First define a wrapper class that is the width you want your page to be. Set it's margin to `auto` (at least on the left and right) so it will be centered in the page. You said 700px, so:

```
.wrapper
{
    width: 700px;
    margin: auto;
} 
```

Now you need your three columns, one in the middle and one on each side. Assuming that the left and right side are not the same size (just to make things clear), do something like this:

```
#left
{
    width: 100px;
    float: left;
}

#middle
{
    width: 400px;
    float: left;
}

#right
{
    width: 200px;
    float: left;
} 
```

Now add the 100% width header:

```
#header
{
    width: 100%;
} 
```

And you can setup your page like so:

```
<div id="header">
    <div class="wrapper">
         Your header here
    </div>
</div>
<div class="wrapper">
    <div id="left"></div>
    <div id="middle"></div>
    <div id="right"></div>
</div> 
```

Here is this example with arbitrary background colors on each div, so you can see where they are:

[http://jsfiddle.net/grwjy/](http://jsfiddle.net/grwjy/)

This is just a simple example but hopefully will get you on the right track.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T18:53:20.703

这是HTML：

```
<html>
<head>
<link rel="styleSheet" href="style.css" type="text/css">
</head>
<body>
    <div id="header">Hello</div>
    <div id="sidebar">Sidebar</div>
    <div id="content">Content</div>
    <div id="sidebar-right">Right</div>
</body>
</html> 
```

这是CSS：

```
body, html{
    width:      100%;
    height:     100%;
    margin:     0;
    padding:    0;
}

#header{
    width:      100%;
padding-left:   200px;
    height:     50px;
    background: #0000FF;
}

#sidebar{
    float:      left;
    width:      200px;
    height:     100%;
    background: #FF0000;
}

#content{
    float:      left;
    width:      700px;
    height:     100%;
    background: #00FF00;
}

#sidebar-right{
    margin-left:900px;
    height:     100%;
    background: #FFFF00;
} 
```

# php - 将 FB 帐户与我网站上的帐户连接起来

> ID：10197052
> 
> 赞同：5
> 
> 时间：2012-04-17T18:39:11.400
> 
> 标签：php, facebook, sdk, oauth-2.0

请帮助我，或者只是给我一个提示，我应该从哪里开始，因为我已经为此奋斗了 2 周。

众所周知，facebook 有一个新的身份验证系统，这意味着我必须在我的网站上实施它，我只是无法理解它是如何工作的以及如何在我的网站上实施它。当然，我知道互联网上和开发者页面上有一些示例 -**我已经阅读了所有**示例，但仍然不知道如何将我的网站上的帐户与 FB 帐户关联起来。也许我会介绍一些我需要涵盖的情况：

该网站有本地帐户。还有一个额外的数据库表可以将我的用户 ID 与 FB 用户 ID 链接起来。

*   **情况1：**一个新人来到我的网站。他/她没有我网站的帐户，但有 FB 帐户。他/她点击“使用 facebook 登录”，被重定向到 FB，授权应用程序并被重定向回我的网站，该网站创建一个新的用户帐户并将我的网站的 uid 与经过身份验证的 FB uid 连接起来。

*   **情况2：**一个人在我的网站上有一个账户，已经连接到一些FB账户。他/她点击“使用 facebook 登录”，我的网站在“链接”表中找到 FB uid 并登录连接到该 FB 帐户的用户。

*   **情况 3：**某人在我的网站上拥有一个未连接到任何 FB 帐户的帐户。他/她通过链接“将此帐户与 Facebook 连接”进入我网站上的一个特殊面板。他/她点击它，授权应用程序，被重定向回我的网站，这会在“链接”表中创建一条记录，将网站的 uid 与 facebook uid 连接起来。建立连接后，特殊面板会显示一条信息“您已连接到 <John Doe> facebook 帐户。[取消链接]”。

*   **情况 4：**一个人登录到我的网站到一个连接到 Facebook 帐户的帐户。他/她在我的网站上做了一些操作，导致在他/她的 FB 墙上发布消息。

所以 TL;DR，在我的网站上的 FB 帐户和帐户之间进行绑定的正常功能。

使用以前的 API 一切都很好并且工作正常，我还可以使用 offline_access 在墙上发帖，没有令牌等等，你知道的。

现在..我不知道从哪里开始，我应该在哪里以及如何存储这些令牌，如何获取它们以及在什么情况下，如何链接现有帐户，如何“更新”我的“链接”中的现有“界限” “ 桌子。

只是伪代码中的简单提示或 1..2..3.. 步骤列表应该如何处理这个流程将非常有帮助，因为我在 Internet 上找不到任何帮助信息。这个新 API 的每个“示例”或“教程”都说明了如何仅在您的网站上验证 FB 帐户，而不是如何真正将这些帐户连接到某些东西或将此连接存储在例如数据库中。

我使用最新的 PHP Facebook SDK。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:18:33.597

检查以下 oAuth 身份验证指南

[https://developers.facebook.com/docs/authentication/server-side/](https://developers.facebook.com/docs/authentication/server-side/)

实施后你可以获得access_token，

现在您可以使用该 access_token 将用户保存在您的数据库中。

# php - 数据库管理 php mysql

> ID：10197053
> 
> 赞同：0
> 
> 时间：2012-04-17T18:39:13.493
> 
> 标签：php, mysql, database

我今天才开始学习 PHP 脚本，我想为我的大学创建一个拍卖网站。我有一个包含以下列的出价表：

*   用户身份
*   项目编号
*   比达蒙

当用户登录并进入“Items.php”页面时，当他点击一个项目的出价选项（每个项目都有一个`itemid`）时，他将被重定向到“bid.php”页面。
我的疑问是：我将通过 获取 useid `$_SESSION['userid']`，同样我是否也会通过自动获取 itemid `$_SESSION['itemid']`，如果不是，我如何将 itemid 传递给 bid.php 页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T18:51:28.367

another way is to to use an href tag to pass a variable to your bid.php and fetch it using get.

i.e `<a href ="bid.php?id=1">Bid now!</a>`

in your bid.php

```
 $id = $_GET['id']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T18:44:25.597

您将创建一个 from 并使用表单传递的 POST 或 GET 信息。你不会从会话中得到这个

这是一个教程：[http ://www.tizag.com/phpT/postget.php](http://www.tizag.com/phpT/postget.php)

# c# - 序列化字典 使用 JSON.net？

> ID：10197059
> 
> 赞同：8
> 
> 时间：2012-04-17T18:39:30.123
> 
> 标签：c#, javascript, json, json.net

我正在尝试使用 JSON.net 序列化字典。

使用

```
JsonConvert.SerializeObject(theDict); 
```

这是我的结果

```
{
  "1": {
    "Blah1": false,
    "Blah2": false,
    "Blah3": "None",
    "Blah4": false
  },
  "2": {
    "Blah1": false,
    "Blah2": false,
    "Blah3": "None",
    "Blah4": false
  },
  "3": {
    "Blah1": false,
    "Blah2": false,
    "Blah3": "None",
    "Blah4": false
  },
  ...
  ...
  ...
} 
```

有没有办法序列化这个字典，以便将键呈现为有效的 javascript 变量？

我也对其他序列化字典的策略持开放态度。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-17T21:55:06.637

这是生成 JSON 的正确方法`Dictionary<int,...>`。原因是[JSON*要求*所有键都是带引号的字符串文字](http://json.org/)。

JS 在这方面稍微宽松一点：但是 JSON 是 JS 对象字面量的一种受限形式。无论如何，*JavaScript 中的所有属性名称都是字符串*。（它们会根据需要进行隐式转换。）因此，`({1: 2})["1"])`并且`({"1": 2})[1])`在 JS 中同样有效（并且都计算为`2`），但只有`{"1": 2}`有效的 JSON。

如果要反序列化回的目标类型是，`Dictionary<int,...>`那么它将自动处理到`int`IIRC 的键中的转换。

我不知道有一种方法可以让 JSON.NET 直接生成非 JSON ;-) 它可以通过循环顶层构造来完成，例如每个`KeyValuePair<int,...>`并为每个单独的条目生成 JSON 以及“修改”的 JS代码：

```
foreach (var p in dict) {
    var k = p.Key;
    var v = p.Value;
    Emit(string.Format(
        "var name{0} = {1};",
        k, JsonConvert.SerializeObject(v)));
} 
```

`Emit`用于收集输出的东西在哪里......不过，如果可能的话，我会推荐“只是普通的 JSON”。

快乐编码。

# c++ - 静态类在其他类之间不显示相同的值

> ID：10197063
> 
> 赞同：-1
> 
> 时间：2012-04-17T18:39:42.110
> 
> 标签：c++

我希望我提供了足够的信息，并且我的标题正确。

一般来说，我希望有一个在我的应用程序中存储数据的类，并且我需要几个其他类来访问相同的数据。本质上是在多个类之间共享数据。

简短/简洁的代码如下：

example.cpp（主应用程序）

```
// example.cpp : Defines the entry point for the console application.
//
#include "AnotherClass.h"
#include "ObjectClass.h"
#include "stdafx.h"
#include <iostream>  
#include <iomanip>

using namespace std;  
//Prototype
static void do_example ( );

int main()  

{  
    do_example ( );
}

static void do_example ( ) {

    MyObject.a = 5;
    cout <<"MyObject.a value set in main application is "<<MyObject.a<<"\n";

    AnotherClass    m_AnotherClass;

    m_AnotherClass.PrintValue();

} 
```

对象类.h

```
class ObjectClass {
public:
    ObjectClass(); // Constructor
    int a; // Public variable
} static MyObject; 
```

对象类.cpp

```
#include "ObjectClass.h"

ObjectClass::ObjectClass() {

    a = 0;

} 
```

另一个类.h

```
class AnotherClass {
public:
    AnotherClass(); // Constructor

    void PrintValue(); // Public function
    int value; // Public variable

}; 
```

另一个类.cpp

```
#include "AnotherClass.h"
#include "ObjectClass.h"
#include "stdafx.h"
#include <iostream>  
#include <iomanip>

using namespace std; 

AnotherClass::AnotherClass() {

    value = MyObject.a;

}

void AnotherClass::PrintValue() {

    cout <<"value in AnotherClass is "<<value<<"\n";
    cout <<"it should be the same."<<"\n";
} 
```

但是该值是默认值0，就好像它是MyObject的一个新实例一样。但它应该从静态 MyObject 中提取 5 的值。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T18:44:58.293

静态**类实例**本身就是一个静态变量。您期望发生的事情也很有意义，但是，您的代码没有显示如何处理静态实例。事实上，如果两个`MyClassInstance`s 都引用同一个对象，那么你甚至不需要静态声明。

此外，静态变量在 cpp 文件中定义。如果在头文件中定义它，包含它的 cpp 文件（编译单元）将定义一个单独的静态变量。因此，在主 cpp 文件中定义静态对象并`extern MyStaticClass`在头文件中使用。然后，链接器会将用途链接到同一个变量。

# authentication - 在被动 STS WSO2 身份服务器中禁用身份验证

> ID：10197066
> 
> 赞同：1
> 
> 时间：2012-04-17T18:39:57.097
> 
> 标签：authentication, wso2

由于有问题（https://wso2.org/jira/browse/CARBON-12174）我将在 WSO2 Carbon Identity Server 3.2.3 中禁用被动 STS 的身份验证。

这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:20:16.297

可以使用 WSO2 Identity Server 中提供的功能管理器卸载此功能。

*   转到“配置”->“功能”菜单。

*   选择“已安装功能”选项卡，该选项卡将列出已安装的功能。

*   选择“被动 STS”功能，然后单击“卸载”。这将通过几个步骤启动一个向导。

*   重新启动服务器。

这将删除 Passive STS 功能，用户将无法连接到 PassiveSTS 以检索令牌。

PS - 如果您进入 STS 配置页面，您仍然会注意到“被动 STS 配置”链接，这将导致一个空白页面。但这不是一个关键问题，因为与管理控制台相关的活动仅适用于管理用户。

此外，此错误已在主干中修复，并将在下一个版本中提供。

希望这可以帮助。

*   蒂丽娜

# xml - 如何使用 xslt 解析属性值？

> ID：10197068
> 
> 赞同：1
> 
> 时间：2012-04-17T18:40:00.263
> 
> 标签：xml, xslt

从以下 xml 中，我读取了 Version 属性。

```
<BatchTable>
  <UUThref
    SocketIndex='0 - CCM'
    UUTResult='Passed'
    URL='C:\OverrideCallbacks_BatchReport[4 16 2012][5 44 41 PM].xml'
    FileName='OverrideCallbacks_BatchReport[4 16 2012][5 44 41 PM].xml'
    ECAFailCount='1'
    Version='StationPartNumber=55555 StationSerialNumber=2222 TPSPartNumber=1234'/>
</BatchTable> 
```

Version 属性中的值是动态的，用户可以添加任意长度的字符串。如何拆分值并将它们显示在单独的行上。让它显示为这样

```
StationPartNumber=55555
StationSerialNumber=2222
TPSPartNumber=1234 
```

当前在读取版本值时，它显示为：

```
StationPartNumber=55555 StationSerialNumber=2222 TPSPartNumber=1234 
```

如果需要在值之间添加任何特殊字符，那么我可以让用户确保添加它，以便更容易拆分。目前在连接之间添加了“\n”，但 xsl 似乎选择了这些值并删除了任何空格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T01:59:18.123

**这在 XSLT 1.0 中非常简单（甚至可以使用单个 XPath 表达式生成）**：

只需使用：

```
translate(normalize-space(/*/*/@Version), ' ', '&#xA;') 
```

**这是完整的转换——比发布的 XSLT 2.0 解决方案更简单、更短——不`xsl:variable`，不`xsl:for-each`**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="UUThref">
  <xsl:value-of select=
   "translate(normalize-space(/*/*/@Version), ' ', '&#xA;')"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<BatchTable>
    <UUThref
      SocketIndex='0 - CCM'
            UUTResult='Passed'
          URL='C:\OverrideCallbacks_BatchReport[4 16 2012][5 44 41 PM].xml'
            FileName='OverrideCallbacks_BatchReport[4 16 2012][5 44 41 PM].xml'
            ECAFailCount='1'
            Version='StationPartNumber=55555 StationSerialNumber=2222 TPSPartNumber=1234'/>
</BatchTable> 
```

**产生了想要的正确结果**：

```
StationPartNumber=55555
StationSerialNumber=2222
TPSPartNumber=1234 
```

**说明**：

适当使用 XPath 函数[**`normalize-space()`**](http://www.w3.org/TR/xpath/#function-normalize-space)和**[`translate()`](http://www.w3.org/TR/xpath/#function-translate)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T22:03:21.553

DevNull 在这里提出了关键问题——有些事情在 XSLT 2.0 中确实很容易，而在 XSLT 1.0 中需要付出很多努力——请参阅下面的 XSLT 2.0 中的解决方案，本质上是利用该`tokenize()`功能：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="UUThref">
        <root>
            <xsl:variable name="test" select="tokenize(@Version, '\s+')"/>
            <xsl:for-each select="$test">
                <w><xsl:value-of select="."/></w>
            </xsl:for-each>
        </root>
    </xsl:template>
</xsl:stylesheet> 
```

给

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <w>StationPartNumber=55555</w>
    <w>StationSerialNumber=2222</w>
    <w>TPSPartNumber=1234</w>
</root> 
```

说明：`\s+`代表任何非零数量的连续空白（空格、CR、LF 或制表符）。
该`tokenize()`函数创建一个节点集，该节点集由基于提供的正则表达式分隔符拆分文本值产生的字符串组成。
这个节点集可以通过 循环`xsl:for-each`。

# unity3d - UDK 2012 年 3 月 vs CryEngine 3（未来的工作？）

> ID：10197076
> 
> 赞同：1
> 
> 时间：2012-04-17T18:40:28.420
> 
> 标签：unity3d, unreal-development-kit, unrealscript, cryengine

我现在正在从事游戏开发，我想做 3D 游戏。我一直在检查 UDK、Unity 和 CryEngine 3 SDK。我可以看到，所有这些都有其优点和缺点。Unity，然而，我开始排除，因为我想在未来做游戏开发作为一份工作。由于虚幻引擎（据我了解，与 UDK 99% 相同）和 CryEngine 3 是行业标准，除了 GameBryo 等。（我 16 岁没钱买哈哈）

据我了解UDK的优点是：

*   更简单（就脚本而言）
*   在比 CE3 更多的计算机上运行
*   行业标准，用于许多顶级游戏。
*   Kismet 非常好（用于关卡范围的编辑）
*   iOS 开发是可能的，而且是免费的（减去成为“Apple 开发者”的 99 美元费用）
*   UDK 的跨平台（PC、Mac、iOS）。UE3（据我了解）是 PC、Mac、iOS、PS3、Xbox360 和 Android？
*   游戏售价 99 美元，前 50,000 美元的销售额免版税

缺点是：

*   *每次*更改 UnrealScript 代码时都必须退出编辑器重新编译代码。
*   比 CryEngine 3 更糟糕的工作流程
*   即将被虚幻引擎 4 取代
*   经常崩溃。
*   教程不多。

CE3的优点是：

*   惊人的地形发生器
*   真正的下一代顶级图形
*   见过的最好的水
*   比 UE3 更好的工作流程
*   很少崩溃

缺点是：

*   必须登录才能使用，如果你在编辑过程中失去了网络连接，你甚至无法保存。
*   如果您想制作商业游戏，则价格昂贵。
*   不能在尽可能多的计算机上运行
*   仅在 PC、PS3 和 X360 上
*   更复杂的脚本？

是我说的依据吗？我错过了任何优点或缺点吗？您向初学者推荐哪个（游戏开发，而不是一般的编程。我精通 Python，知道 VB.NET、C#、HTML 和 CSS）Unity 是否有可能让游戏开发公司看到潜力你？

*编辑*：PS 我想我应该提到这一点......我不打算将 FPS 作为我的主要类型。我知道用 UDK 或 CryEngine 做其他事情会很困难，但我不介意。我需要学习经验。主要是UDK和CryEngine能做到吗？我知道 UDK 可以，但我只有大约 50% 的把握 CryEngine 可以，我还没有看到很多人问这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:11:02.413

我现在正在学习UDK。单击欢迎屏幕以访问在线视频教程。这个 Buzz3D 老兄是有史以来最好的。尽管他使用的是较旧版本的 UDK，但我能够跟上并学习了很多东西。UDK 是一个非常令人兴奋的编辑器。我计划在某个阶段检查 CE3。对 Unity 不太了解。可能有利于开发到即将推出的 ouya 控制台（这对行业来说有点黑马）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T03:53:12.480

我以前玩过一点UDK，我认为你提到的利弊是有效的。

我对游戏公司招聘的内部运作一无所知，但我认为对于初学者来说 Unity3D 是一个值得考虑的选择。Unity 不像 UDK 那样强大/高效/市场标准，但它确实有一些优势：

1.  C# 脚本
2.  易于理解的文档、教程和活跃的社区
3.  友好且易于使用的 IDE、脚本编辑器和（最重要的）调试工具。

无论如何，如果您遵循一些教程，学习 Unity 的基础知识并制作一些游戏原型应该不会超过几天。即使您稍后要迁移到另一个引擎，我也会推荐它作为起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:09:24.630

只是关于每个的定价，阅读对 UDK 定价的注释更正。

这是目前每个的成本

Crytek：对于 Indy 开发人员

-“Crytek 只要求开发者从其游戏的商业发布中获得 20% 的收入。” -我觉得这更吸引人纯粹是为了简单起见

UDK：-“预付 99 美元，您或您公司的所有基于 UDK 的游戏或商业应用程序的 UDK 相关收入的前 50,000 美元的 0% 特许权使用费，以及您所有 UDK 的 UDK 相关收入的 25% 特许权使用费50,000 美元以上的基于游戏或商业应用程序*"

*注意有这个，

-“如果您在企业内部使用 UDK，并且使用 UDK 创建的应用程序未分发给第三方（即不是您的员工或分包商的人），**您需要向 Epic 支付 2,500 美元的年度许可费每个安装的 UDK 开发人员席位每年**。此许可费仅适用于用于开发的 UDK 席位；仅安装生成的应用程序的硬件不需要许可费。”

好吧，我不是最好的，但这似乎是，如果你是一个小型开发团队，你可以通过在“雇主”下列出每个人而只收取 2,500 的费用，但我什至不确定它是否适用于独立开发者。

链接：Cryengine：[http](http://mycryengine.com/index.php?conid=43) ://mycryengine.com/index.php?conid=43 UDK：[http ://www.udk.com/licensing](http://www.udk.com/licensing)

* * *

谢谢你的帖子，罗伯特

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T03:38:06.347

我不明白你从哪里得到 UDK 经常崩溃和“没有很多教程”的想法？

您还可以不必使用称为“原型”的系统重新编译每个脚本更改，我不会详细解释，但您明白了要点。

如果您尝试获取除 FPS 之外的 CE3 之外的任何内容，您将不得不深入研究他们的 C++ 代码，我现在可以告诉您，这是迄今为止记录最少、评论最少的代码。

# jquery - 未调用来自 jcrop 的回调

> ID：10197077
> 
> 赞同：2
> 
> 时间：2012-04-17T18:40:37.983
> 
> 标签：jquery, jcrop

我正在使用最新版本的 jquery.jcrop。在图像上调用 jcrop() 时，裁剪工作但不会调用回调。这使得无法设置 jcrop_api 以供以后使用。具体来说，我希望能够更改图像并需要 destroy() 方法。

```
function setJCrop() {
    //Set image for cropping
    jQuery('#preview').Jcrop( {
        minSize : [126, 126],
        setSelect : [ 0, 0, 126, 126 ],
        //onChange: updateMeasurements,
        onSelect: updateMeasurements,
        aspectRatio: 1
    }, function() {
        jcrop_api = this;  //callback not being called
    } );
} 
```

当切换到 jQuery 就绪函数的调用时，这种情况开始发生：

```
jQuery(document).ready(function($) { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:16:13.967

贾斯汀的代码几乎就是文档所说的。但是，当您使用 IE6、7、8 中的 API 重新加载图像时，它会执行一次，然后就会崩溃。为什么？因为IE有问题。

更兼容的启动 API 的方式应该是这样的。

在脚本的最外层定义您的 api。

```
var jcrop_api; 
```

然后，当您需要启动 API 时，例如在同一页面上上传之后..您这样做（这行是让 IE 和其他奇怪浏览器开心的原因）我使用两个标签，因为有时我的裁剪器用于母版页我只留下它作为示例。我也没有设置任何选项，但如果你愿意，你可以。

```
jcrop_api = $.Jcrop($('#SourceImage, #body_SourceImage'), {}); 
```

然后对于每个图像，您可以启动裁剪器

```
 jcrop_api.setOptions({
            boxWidth: 500,
            onSelect: updateCoords,
            minSize: [thisImage.Min.Width, thisImage.Min.Height],
            aspectRatio: thisImage.AspectRatio  //1.3 for example
        });
        jcrop_api.setImage(uploadLocation + fileName); 
```

重要的是，当您完成裁剪后，您必须销毁 API，然后重新启动它。再次——只是为了让所有浏览器都满意。

```
 jcrop_api.destroy(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T08:26:07.263

确保首先`jcrop_api`在 Jcrop 调用范围之外声明变量，就像这样。列出的代码只会分配一个变量。如果您仍然怀疑回调正在执行，请放在`alert()`那里进行测试。

```
var jcrop_api;

function setJCrop() {
    //Set image for cropping
    $('#preview').Jcrop( {
        minSize : [126, 126],
        setSelect : [ 0, 0, 126, 126 ],
        //onChange: updateMeasurements,
        onSelect: updateMeasurements,
        aspectRatio: 1
    },function(){
      jcrop_api = this;
    } );
} 
```

# java - 如何将我的 ClassLoader 设置为 JVM 的 ClassLoader 以加载所有类（包括 jar 类）？

> ID：10197080
> 
> 赞同：1
> 
> 时间：2012-04-17T18:41:08.863
> 
> 标签：java, class, jar, classloader, delegation

我正在编写一个游戏引擎，我需要在其中分析程序中提到的每一个类。由于这是一个游戏引擎，它会以 JAR 文件的形式附加到客户的项目中。从该 JAR 文件中，我需要能够扫描客户端正在使用的每个类。

所以我想我应该创建一个自定义的 ClassLoader！通过重写 ClassLoader，我可以查看加载时正在使用的每个类。

我开始玩一些 ClassLoaders。这是我所做的：（我从 JavaWorld 偷了这个类加载器只是为了玩它）

```
public class SimpleClassLoader extends ClassLoader {
private HashMap<String, Class> classes = new HashMap<String, Class>();

public SimpleClassLoader() {
}

/**
 * This sample function for reading class implementations reads
 * them from the local file system
 */
private byte getClassImplFromDataBase(String className)[] {
    System.out.println("        >>>>>> Fetching the implementation of "+className);
    byte result[];
    try {
        FileInputStream fi = new FileInputStream("store\\"+className+".impl");
        result = new byte[fi.available()];
        fi.read(result);
        return result;
    } catch (Exception e) {

        /*
         * If we caught an exception, either the class wasnt found or it
         * was unreadable by our process.
         */
        return null;
    }
}

/**
 * This is a simple version for external clients since they
 * will always want the class resolved before it is returned
 * to them.
 */
public Class loadClass(String className) throws ClassNotFoundException {
    return (loadClass(className, true));
}

/**
 * This is the required version of loadClass which is called
 * both from loadClass above and from the internal function
 * FindClassFromClass.
 */
public synchronized Class loadClass(String className, boolean resolveIt)
    throws ClassNotFoundException {
    Class result;
    byte  classData[];

    System.out.println(className);

    System.out.println("        >>>>>> Load class : "+className);

    /* Check our local cache of classes */
    result = (Class)classes.get(className);
    if (result != null) {
        System.out.println("        >>>>>> returning cached result.");
        return result;
    }

    /* Check with the primordial class loader */
    try {
        result = super.findSystemClass(className);
        System.out.println("        >>>>>> returning system class (in CLASSPATH).");
        return result;
    } catch (ClassNotFoundException e) {
        System.out.println("        >>>>>> Not a system class.");
    }

    /* Try to load it from our repository */
    classData = getClassImplFromDataBase(className);
    if (classData == null) {
        throw new ClassNotFoundException();
    }

    /* Define it (parse the class file) */
    result = defineClass(classData, 0, classData.length);
    if (result == null) {
        throw new ClassFormatError();
    }

    if (resolveIt) {
        resolveClass(result);
    }

    classes.put(className, result);
    System.out.println("        >>>>>> Returning newly loaded class.");
    return result;
}
} 
```

* * *

然后我决定测试它：

* * *

```
public class Test
{
public static void main(String args[]) throws ClassNotFoundException
{
    SimpleClassLoader s = new SimpleClassLoader();
    Thread.currentThread().setContextClassLoader(s);

    Foo myfoo = new Foo();                          //local class
    ArrayList myList = new ArrayList();             //class from JAR file

    //both should have been loaded from my SimpleClassLoader
    System.out.println(s + "\n\tshould be equal to\n" + myfoo.getClass().getClassLoader());
    System.out.println("\tand also to: \n" + myList.getClass().getClassLoader());

    /*
       OUTPUT: 

       SimpleClassLoader@57fee6fc
            should be equal to
       sun.misc.Launcher$AppClassLoader@51f12c4e
            and also to: 
       null

       ***

       bizarre results: why are ArrayList and Foo not being loaded by my classloader?

     */

}
} 
```

1.  创建自定义 ClassLoader 是否是解决顶部描述的问题的正确方法？

2.  为什么要调用系统类加载器？如何强制 JVM**对所有线程使用我的类加载器？**（不仅仅是第一个线程，我希望创建的每个新线程都能自动使用我的类加载器）

3.  据我了解，通过“委托系统”，父类加载器首先尝试加载类；这可能是我的 ClassLoader 没有加载任何内容的原因。如果我是正确的，如何禁用此功能？如何让我的类加载器进行加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:29:23.190

仪器 api 将非常适合我认为您正在尝试做的事情

[http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/Instrumentation.html](http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/Instrumentation.html)

It lets you intercept classes as they are loaded by the JVM - normally to modify them, but you are given the byte array to play with so I can see no reason why you couldn't perform any required analysis without actually modifying.

This would let you analyse classes before they are loaded. I'm not entirely clear on what it is you are trying to achieve, but if you can analyse the classes after they are loaded then you could simply open and parse the contents of all jars on the classpath.

# xslt - 使用 document() 在 XSLT 中交叉引用和扩充 XML 元素的问题

> ID：10197084
> 
> 赞同：3
> 
> 时间：2012-04-17T18:41:20.027
> 
> 标签：xslt, xpath

我对 XML 有点陌生，我有一个问题，我有一个生成的 XML 文档，其中某些元素的属性列表不完整。我正在尝试实现一个 XSLT 样式表，该样式表将它与一个主文档（它包含所有属性的默认值）交叉引用，以便用默认值填充任何缺失的属性。

例如，以下不完整的 XML 文档：

```
<?xml version="1.0" encoding="utf-8"?>
<foo>
  <bar label="two" index="2"/>
</foo> 
```

bar 元素缺少属性“type”，我想根据“label”的值从以下主文档中填充默认值：

```
<?xml version="1.0" encoding="utf-8"?>
<foo>
  <bar label="one" index="1" type="type1"/>
  <bar label="two" index="2" type="type2"/>
  <bar label="three" index="3" type="type3"/>
</foo> 
```

期望的结果是：

```
<?xml version="1.0" encoding="utf-8"?>
<foo>
  <bar label="two" index="2" type="type2"/>
</foo> 
```

我的 XSLT 样式表尝试使用 'document()' 和 XPath 的组合来执行此操作，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:variable name="master" select="document('master.xml')"/>

  <!-- Template matching 'root' of XML document -->
  <xsl:template match="/">
    <xsl:apply-templates select="foo"/>
  </xsl:template>

  <!-- Template for generating 'foo' element -->
  <xsl:template match="foo">
    <foo>
      <xsl:apply-templates select="bar"/>
    </foo>
  </xsl:template>

  <!-- Template for generating 'bar' element -->
  <xsl:template match="bar">
    <bar label="{@label}" index="{@index}" type="{$master/foo/bar[@label=@label][1]/@type}"/>
  </xsl:template>

</xsl:stylesheet> 
```

但是，这不起作用，并为我提供了“bar”元素的默认“type”属性，其中“label”为“one”而不是“two”：

```
<?xml version="1.0" encoding="utf-8"?>
<foo>
  <bar label="two" index="2" type="type1"/>
</foo> 
```

一些调查显示 XPath 模式匹配所有的“条形”元素，而不仅仅是正确的元素，但我不知道为什么。

我做错了什么，有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T01:37:13.530

**问题出在这一行**：

```
<bar label="{@label}" index="{@index}" 
     type="{$master/foo/bar[@label=@label][1]/@type}"/> 
```

您实际上是在检查元素的`label`属性`bar`是否等于自身——这相当于：

```
<bar label="{@label}" index="{@index}" 
     type="{$master/foo/bar[true()][2]/@type}"/> 
```

**这相当于**：

```
<bar label="{@label}" index="{@index}" 
     type="{$master/foo/bar[1]/@type}"/> 
```

这就是您观察到的结果的产生方式。

**解决方案**：使用 XSLT**[`current()`](http://www.w3.org/TR/xslt#function-current)**功能：

```
<bar label="{@label}" index="{@index}" 
     type="{$master/foo/bar[@label=current()/@label][4]/@type}"/> 
```

**完整的转换变为**（我已将 URL 更改`master.xml`为能够在本地计算机上运行转换）：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

      <xsl:variable name="master" select=
      "document('file:///c:/temp/delete/master.xml')"/>

      <!-- Template matching 'root' of XML document -->
      <xsl:template match="/">
        <xsl:apply-templates select="foo"/>
      </xsl:template>

      <!-- Template for generating 'foo' element -->
      <xsl:template match="foo">
        <foo>
          <xsl:apply-templates select="bar"/>
        </foo>
      </xsl:template>

      <!-- Template for generating 'bar' element -->
      <xsl:template match="bar">
        <bar label="{@label}" index="{@index}"
        type="{$master/foo/bar[@label=current()/@label][5]/@type}"/>
      </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<foo>
    <bar label="two" index="2"/>
</foo> 
```

**产生了想要的正确结果：**

```
<foo><bar label="two" index="2" type="type2"/></foo> 
```

* * *

**二、[使用键](http://www.w3.org/TR/xslt#key)****可能更有效的解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kTypeByLabel" match="@type" use="../@label"/>

      <xsl:variable name="master" select=
      "document('file:///c:/temp/delete/master.xml')"/>

      <!-- Template matching 'root' of XML document -->
      <xsl:template match="/">
        <xsl:apply-templates select="foo"/>
      </xsl:template>

      <!-- Template for generating 'foo' element -->
      <xsl:template match="foo">
        <foo>
          <xsl:apply-templates select="bar"/>
        </foo>
      </xsl:template>

      <!-- Template for generating 'bar' element -->
      <xsl:template match="bar">
        <xsl:variable name="vCurrent" select="."/>
        <xsl:variable name="vDefault">
          <xsl:for-each select="$master">
            <xsl:value-of select=
                "key('kTypeByLabel', $vCurrent/@label)"/>
          </xsl:for-each>
        </xsl:variable>

        <bar label="{@label}" index="{@index}" type="{$vDefault}"/>
      </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于（相同）提供的 XML 文档（上图）时，会产生所需的正确结果**：

```
<foo>
   <bar label="two" index="2" type="type2"/>
</foo> 
```

# javascript - 在 HTML 复选框上访问数组的键

> ID：10197089
> 
> 赞同：1
> 
> 时间：2012-04-17T18:41:52.413
> 
> 标签：javascript, jquery

我有一个带有复选框的树，它们的 id 具有项目的键和值作为它们的值。

```
<input type="checkbox" name="list_code[4]" id="list_code[4]" value="AG12345678" checked="checked"> 
```

当用户选择树元素时，我可以通过

```
$('input[name^="list_code"]').each(function() {
    if ($(this).attr('checked')) 
        list_code = $(this).val();
}); 
```

我能够获得价值`AG12345678`，但在这种情况下，我也需要`4`从 list_code[4] 获得键值。如何访问该值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T18:45:02.913

```
var n = this.id.slice(this.id.indexOf('[') + 1, this.id.indexOf(']')); 
```

或者...

```
var n = this.id.replace(/\D/g, ''); 
```

或者...

```
var n = (this.id.match(/\d+/) || [])[0]; 
```

或者如果可能有其他不需要的数字......

```
var n = (this.id.match(/\[(\d+)\]/) || [])[1]; 
```

* * *

或者，如果您控制源，一个好的解决方案是使用`data-`属性来支持未来的 HTML5...

```
<input type="checkbox" data-number="4" name="list_code[4]" id="list_code[4]" value="AG12345678" checked="checked"> 
```

...然后在 HTML5 浏览器中，您可以...

```
this.data.number; 
```

...或者对于遗留支持，您可以这样做...

```
this.getAttribute('data-number'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T18:46:13.727

有了这个：

```
this.getAttribute("id").split(/\[|\]/)[1]; 
```

解释：

*   `this.getAttribute("id")`获取 id`"list_code[4]"`
*   `split(/\[|\]/)`把它分成`["list_code","4",""]`
*   `[1]`获取索引处的`1`元素`4`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T18:50:37.120

Try:

```
$('input[name^="list_code"]').each(function() {
    if ($(this).is(':checked')) 
        list_code = $(this).val();
        key = parseInt($(this).attr('name').replace(/[^0-9]/g,''));
}); 
```

If you find your field name attributes have numbers outside the index then do the following:

```
 key = parseInt($(this).attr('name').split('[')[1].replace(/[^0-9]/g,'')); 
```

# php - php：大量赋值

> ID：10197090
> 
> 赞同：0
> 
> 时间：2012-04-17T18:41:52.680
> 
> 标签：php

我想对受保护的变量进行大量分配，我使用了以下代码：

```
protected $_productName = '';
protected $_price = 0;
protected $_categoyId = 0;  
 public function setAttributes($attributes)  
 {  
  foreach($attributes as $key => $val)  
  {
    $var = '_' . $key;
    $this->$var = $val;  
  }  
 } 
```

`$attributes = array('productName'=>'some Product', 'price' => 10, 'categoryId' => 5)`例如。

上面的代码对我有用，但我觉得它不干净。有没有更好的解决方案来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T18:47:38.713

代码很干净，没什么不好的。您可能还可以在设置之前查看类字段是否存在 - 因此您可以确保没有设置任何未在类中定义的其他字段。

另外为了使代码更短一点，你可以这样做：

```
$this->{"_{$key}"} = $val; 
```

这是你喜欢什么口味的问题——你的变种也很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T18:51:08.623

it looks ok to me, but if $attributes is always an array probably you should add this to avoid errors

```
public function setAttributes($attributes=array()) 
```

doing that you won't receive a error if attributes is empty because initialize the $attributes array

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T18:53:48.783

我不久前还使用了类似以下代码的代码作为测试：

```
 private $data = array();

    public function __get($name)
    {
        if (array_key_exists($name, $this->data))
        {
            return $this->data[$name];
        }
    }

    public function __set($name, $value)
    {
        $this->data[trim($name)] = trim($value);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T18:49:14.157

你在做什么很好。我会为该属性添加一个检查：

```
foreach($attributes as $key => $val)  
{
    $var = '_' . $key;
    if (property_exists($this, $var)) 
    {
        $this->$var = $val;  
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T18:49:26.723

您的代码几乎与批量分配一样干净。还有其他选择，比如使用[array_walk()](http://us3.php.net/manual/en/function.array-walk.php)代替`foreach`循环，但我发现循环在这种情况下更简洁，更容易快速理解。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T18:52:55.530

您可以使用[魔术方法](http://php.net/manual/en/language.oop5.magic.php)。将数组分配为属性值。并且每次你调用像`$this->var`调用`__get`方法这样的变量

```
public function setAttributes($attributes)  
{  
   $this->attributes = $attributes;
}

function __get($var) {
  if(isset($this->attributes[$var])) return $this->attributes[$var];
  return false;
}

function __set($key, $var) {

} 
```

# android - Android 测试和 Fragment IllegalArgumentException

> ID：10197100
> 
> 赞同：0
> 
> 时间：2012-04-17T18:42:54.600
> 
> 标签：android, testing, fragment, android-testing

我有一个想要使用 Android 测试框架进行测试的 Android 应用程序。

我正确设置了所有内容，当我运行测试时，我得到：

```
E/AndroidRuntime(16003): Caused by: java.lang.IllegalArgumentException: No view found for id 0x7f0700aa for fragment HomeFragment{41766600 #0 id=0x7f0700aa}
E/AndroidRuntime(16003):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:864)
E/AndroidRuntime(16003):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
E/AndroidRuntime(16003):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
E/AndroidRuntime(16003):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
E/AndroidRuntime(16003):    at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:505)
E/AndroidRuntime(16003):    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1133)
E/AndroidRuntime(16003):    at android.app.Activity.performStart(Activity.java:4475)
E/AndroidRuntime(16003):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1929) 
```

我有一个名为的活动`HomeActivity`，它`onCreate()`执行`FragmentTransaction`添加`HomeFragment`. 我的`HomeActivity`布局有一个容器视图，我用它来执行各种片段事务。

我在 onCreateView() 期间膨胀了 HomeFragment 的视图。

如果我删除交易然后测试通过但显然那不是我想要的。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:13:20.883

弄清楚这是一个库依赖问题，为测试项目生成不同的 R 文件，为目标项目生成不同的 R 文件。

# xcode - Xcode，自动更新项目文件

> ID：10197106
> 
> 赞同：0
> 
> 时间：2012-04-17T18:43:23.090
> 
> 标签：xcode, ipad

我有很多项目使用一堆完全相同的类。

有没有办法将脚本添加到 Xcode，所以，每次我编译时，他都会去一个网络文件夹并从那里更新文件......如果更新。（我手动执行此步骤，但将其自动化可能会很棒）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:01:52.407

如果这确实是您想要做的，您可以在编译之前添加一个“运行脚本”构建阶段来复制文件。这会为您捕获更新，但我认为如果添加新文件对您没有帮助（尽管将它们复制到您的项目具有文件夹引用而不是指向可能工作的组的位置）。

也就是说，我认为有更好的解决方案。当您可以使用现有工具时，听起来您正在重新发明管理项目依赖项的流程。我会将这些共享类作为库发布，并使用 CocoaPods 和对库的 git 存储库的引用将其添加到每个项目中。这样，您只需要运行 a`pod install`即可获取库的最新版本。一个好的依赖管理器可以让你清楚地了解你当前正在使用哪个版本的依赖，控制何时更新它们，处理安装依赖的依赖，并避免来自多个静态库尝试每个包含一个副本的链接错误相同的共同依赖。

# regex - 在bash中删除文本文件中的单个元素

> ID：10197112
> 
> 赞同：3
> 
> 时间：2012-04-17T18:43:46.070
> 
> 标签：regex, bash, sed, text-files

基本上我拥有的是一个文本文件（file.txt），其中包含数字行（行不一定相同的长度），例如

1 2 3 4
5 6 7 8
9 10 11 12 13

我需要做的是编写新文件，删除每个数字，一次一个，替换例如第一个新文件将包含

2 3 4 <--- 移除第一个元素
5 6 7 8
9 10 11 12 13

第 7 个文件将包含

1 2 3 4
5 6 8 <--- 此处删除第 7 个元素
9 10 11 12 13

为了生成这些，我循环遍历每一行，然后是每一行中的每个元素。例如，对于第 7 个文件，我删除了第二行的第三个元素，我试图通过读取该行，删除适当的元素，然后重新插入这个新行来做到这一点

$lineNo is 2 (第二行)
$line is 5 6 7 8
with cut，我删除第三个数字，使 $newline 5 6 8

然后我尝试使用 sed 将 file.txt 中的 $lineNo 行替换为 $newline：
sed -n '$lineNo s/.*/'$newline'/' > file.txt

这完全行不通。我收到一个错误
sed: can't read 25.780000: No such file or directory

（其中 25.780000 是我的文本文件中的一个数字。看起来它正在尝试使用 $newline 来读取文件或其他东西）
我有理由怀疑我的方式说明要替换的行也不起作用:(

我的问题是，a）有没有比 sed 更好的方法来做到这一点，并且 b）如果 sed 是要走的路，我做错了什么？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T20:59:26.903

除非我误解了这个问题，否则以下应该可以工作，尽管如果您的文件很大，它会很慢：

```
#! /bin/bash

remove_by_value()
{
  local TO_REMOVE=$1

  while read line; do 
    out=
    for word in $line; do [ "$word" = "$TO_REMOVE" ] || out="$out $word"; done
    echo "${out/ }"
  done < $2
}

remove_by_position()
{
  local NTH=$1

  while read line; do
    out=
    for word in $line; do
      ((--NTH == 0)) || out="$out $word"
    done
    echo "${out/ }"
  done < $2
}

FILE=$1
shift  
for number; do
  echo "Removing $number"
  remove_by_position $number "$FILE"
done 
```

这会将所有输出转储到标准输出，但更改它应该是微不足道的，因此每个删除的数字的输出都被重定向（例如，使用`remove_by_position $number $FILE > $FILE.$$ && mv $FILE.$$ $FILE.$number`正确的引用）。运行它，比如说，

```
$ bash script.sh file.txt $(seq 11) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T20:17:58.507

```
filename=file.txt
i=1
while [[ -s $filename ]]; do
    new=file_$i.txt
    awk 'NR==1 {if (NF==1) next; else sub(/^[^ ]+ /, "")} 1' $filename > $new
    ((i++))
    filename=$new
done 
```

这会在每个新文件的第一行的开头留一个空格，当一行变空时，该行将被删除。当最后生成的文件为空时，循环结束。

* * *

**由于要求澄清而**更新：****

 **```
words=$(wc -w < file.txt)
for ((i=1; i<=words; i++)); do 
    awk -v n=$i '
        words < n && n <= words+NF {$(n-words) = "" }
        {words += NF; print}
    ' file.txt > file_$i.txt
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T21:49:35.647

我不得不承认，我有点惊讶其他解决方案有多短。

```
#!/bin/bash
#
file=$1
lines=$(cat $file | wc -l) 
out=0

dropFromLine () {
    file=$1
    row=$2
    to=$((row-1))
    from=$((row+1))
    linecontent=($(sed -n "${row}p" $file))
    # echo "    linecontent: " ${linecontent[@]}
    linelen=${#linecontent[@]}
    # echo "    linelength: " $linelen
    for n in $(seq 0 $linelen) 
    do
        ( 
        if [[ $row > 1 ]] ; then sed -n "1,${to}p" $file ;fi
        for i in $(seq 0 $linelen) 
        do
            if [[ $n != $i ]]
            then
                echo -n ${linecontent[$i]}" " 
            fi
        done
        echo 
        # echo "mod - drop " ${linecontent[$n]}
        sed -n "$from,${lines}p" $file 
        ) > outfile-${out}.txt
        out=$((out+1))
    done 
}

for row in $(seq 1 $lines)
do 
    dropFromLine $file $row 
done 
```

调用：

```
./dropFromRow.sh num.dat 
```

编号.dat：

```
1 2 3 4
5 6 7 8
9 10 11 
```

结果：

```
outfile-0  outfile-10  outfile-12  outfile-2  outfile-4  outfile-6  outfile-8
outfile-1  outfile-11  outfile-13  outfile-3  outfile-5  outfile-7  outfile-9 
```

样品：

```
asux:~/proj/mini/forum > cat outfile-0
2 3 4  
5 6 7 8
9 10 11
asux:~/proj/mini/forum > cat outfile-1
1 3 4  
5 6 7 8
9 10 11 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T22:42:33.740

一种使用方式`perl`：

内容`file.txt`：

```
1 2 3 4
5 6 7 8
9 10 11 12 13 
```

内容`script.pl`：

```
use warnings;
use strict;

## Read all input to a scalar variable as a single string.
my $str;
{
        local $/ = undef;
        $str = <>;
}

## Loop for each number found.
while ( $str =~ m/(\d+)(?:\h*)?/g ) {

        ## Open file for writing. The name of the file will be
        ## the number matched in previous regexp.
        open my $fh, q[>], ($1 . q[.txt]) or
                die qq[Couldn't create file $1.txt\n];

        ## Print everything prior to matched string plus everything
        ## after matched string.
        printf $fh qq[%s%s], $`, $';

        ## Close file.
        close $fh;
} 
```

像这样运行它：

```
perl script.pl file.txt 
```

显示创建的文件：

```
ls [0-9]*.txt 
```

带输出：

```
10.txt  11.txt  12.txt  13.txt  1.txt  2.txt  3.txt  4.txt  5.txt  6.txt  7.txt  8.txt  9.txt 
```

显示其中之一的内容：

```
cat 9.txt 
```

输出：

```
1 2 3 4
5 6 7 8
10 11 12 13 
```**

# workflow-foundation-4 - WF4持久性很慢

> ID：10197118
> 
> 赞同：0
> 
> 时间：2012-04-17T18:44:24.043
> 
> 标签：workflow-foundation-4

我目前有一个 WCF 工作流服务，其中有 5000 个实例空闲等待人工输入。当服务收到更新数据库的请求时，持久化需要 5 秒才能持久化到数据库。如果我只有 500 个实例，则根据 timeToPersist=0 秒，持久化是即时的。有没有办法加快这个速度？

```
'<sqlWorkflowInstanceStore
    connectionStringName="Request"
    instanceCompletionAction="DeleteAll"
    instanceLockedExceptionAction="BasicRetry"
    instanceEncodingOption="GZip"
    hostLockRenewalPeriod="00:00:05"
    runnableInstancesDetectionPeriod="00:00:02"
/>
<workflowIdle
   timeToUnload="00:00:00"
   timeToPersist="00:00:00" />
<serviceThrottling maxConcurrentInstances="15"/>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:37:31.117

如果您在工作流完成后删除工作流实例，那么这可能是所需时间的原因之一。

这是使用属性在工作流服务中完成的

```
<sqlWorkflowInstanceStore connectionStringName="SQLInstancing"
                          instanceCompletionAction="DeleteAll"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T22:05:05.053

请注意，加快速度很容易
从数据库中检索数据和反序列化信息存在延迟。尽量让你的对象尽可能小，
你也可以尝试创建自己的持久性提供程序——例如将数据保存在内存中而不是数据库中。您可以为此使用缓存引擎，例如 nCache。
但是很难创建持久性提供程序。

# javascript - Google Maps API V3 未使用 Twitter 的 Bootstrap 在选项卡式页面上完美呈现

> ID：10197128
> 
> 赞同：31
> 
> 时间：2012-04-17T18:44:46.767
> 
> 标签：javascript, jquery, google-maps, twitter-bootstrap

我正在使用 Twitter 的 Bootstrap 来定义我的 CSS。我制作了一个包含三个选项卡的页面。第二个选项卡包含使用 Google 地图构建的地图。但是，当打开页面并切换到带有地图的第二页时，地图并没有完全呈现。一旦我使用谷歌地图选项卡作为所选选项卡重新加载页面，地图就会完全加载。

我阅读了一些建议有同样问题的人将以下代码添加到 javascript 的帖子：

```
google.maps.event.addDomListener(window, 'resize', function() {
    map.setCenter(homeLatlng);
}); 
```

然而，这似乎不是解决方案。请在下面找到完整的代码：

Javascript：

```
<script type="text/javascript">
function initialize() {
    google.maps.event.addDomListener(window, 'resize', function() {
        map.setCenter(homeLatlng);
    });

    var myLatlng = new google.maps.LatLng(37.4419, -122.1419);
    var myOptions = {
        zoom: 13,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    downloadUrl("data.xml", function(data) {
        var markers = data.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
            var latlng = new google.maps.LatLng(parseFloat(markers[i].getAttribute("lat")), 
                                parseFloat(markers[i].getAttribute("lng")));
            var marker = new google.maps.Marker({position: latlng, map: map});
        }
    });
}
</script> 
```

HTML：

```
<div class="tab-pane" id="orange" style="background-color:#E3F2FF;">
      <div id="map_canvas" style="width:780px; height:400px; overflow:;"></div>
</div> 
```

我该如何解决这个问题？也许我可以添加一些javascript，一旦选择了标签，就可以重新加载谷歌地图部分，但我不知道该怎么做......

更新的代码仍然显示错误：

```
<div class="tab-pane" id="orange" style="background-color:#E3F2FF;">
    <div id="map_canvas" style="width:780px; height:400px; overflow:;"></div>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="util.js"></script>
    <script type="text/javascript">
      function initialize() {
        google.maps.event.addDomListener(window, 'resize', function() {
            map.setCenter(homeLatlng);
        });

        var myLatlng = new google.maps.LatLng(37.4419, -122.1419);
        var myOptions = {
          zoom: 13,
          center: myLatlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        downloadUrl("data.xml", function(data) {
          var markers = data.documentElement.getElementsByTagName("marker");
          for (var i = 0; i < markers.length; i++) {
            var latlng = new google.maps.LatLng(parseFloat(markers[i].getAttribute("lat")),
                                        parseFloat(markers[i].getAttribute("lng")));
            var marker = new google.maps.Marker({position: latlng, map: map});
           }
        });
        map.checkResize();
    }
    </script>
</div> 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-12T05:42:26.167

我也在与这个问题作斗争。我使用的是模态表单，它在隐藏时呈现了地图。显示选项卡时，您需要触发此代码：

```
google.maps.event.trigger(map, 'resize');
map.setZoom( map.getZoom() ); 
```

希望它对你有用。如果这不起作用，这是我找到解决方案的链接。也许会有另一个有用的评论。

[http://code.google.com/p/gmaps-api-issues/issues/detail?id=1448](http://code.google.com/p/gmaps-api-issues/issues/detail?id=1448)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-09T04:24:13.503

这里有很多解决方案，坦率地说，它们都是错误的。如果您必须劫持 Bootstrap 选项卡的默认功能，您最好不要使用 Bootstrap 选项卡。如果您只是在显示选项卡后才调用 resize，则 GMaps 界面（缩放级别等）可能仍然存在问题。您只需在选项卡可见后初始化地图。

```
var myCenter=new google.maps.LatLng(53, -1.33);
var marker=new google.maps.Marker({
    position:myCenter
});

function initialize() {
  var mapProp = {
      center:myCenter,
      zoom: 14,
      draggable: false,
      scrollwheel: false,
      mapTypeId:google.maps.MapTypeId.ROADMAP
  };

  var map=new google.maps.Map(document.getElementById("map-canvas"),mapProp);
  marker.setMap(map);

  google.maps.event.addListener(marker, 'click', function() {

    infowindow.setContent(contentString);
    infowindow.open(map, marker);

  }); 
};

$('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
    initialize();
}); 
```

您可以在此 bootply 中看到一个工作示例：http: [//www.bootply.com/102241](http://www.bootply.com/102241)

**注意：**如果您的界面仍然有故障，则可能是这个问题： [Google Maps API V3 :奇怪的 UI 显示故障（带屏幕截图）](https://stackoverflow.com/questions/7471830/google-maps-api-v3-weird-ui-display-glitches-with-screenshot)

使用最新的 gmaps api，您只需将其添加到您的样式中：

```
.gm-style img { max-width: none; }
.gm-style label { width: auto; display: inline; } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-06T10:50:57.340

在测试不同的延迟后为我工作：

```
 $(window).resize(function() {
        setTimeout(function() {
              google.maps.event.trigger(map, 'resize');
           }, 300)            

}); 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-21T11:05:03.617

我已经通过使用解决了这个问题

```
google.maps.event.trigger(map, 'resize'); 
```

**bootstrap-tab.js**中的内部显示功能意味着在显示框时您应该触发调整大小事件并且可以工作..

**编辑：**我已经看到另一个具有相同答案的链接 [Google Maps API v3, jQuery UI Tabs, map not resizing](https://stackoverflow.com/questions/6455536/google-maps-api-v3-jquery-ui-tabs-map-not-resizing) 我在解决问题后看到了这个链接，以找出仍然没有答案的原因，即为什么 resize 事件不起作用选项卡的单击事件，但在选项卡 js 中有效

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-09T17:09:12.837

这对我来说很好，我使用 jquery 选项卡

```
 setTimeout(function() {
            google.maps.event.trigger(map, "resize");
            map.setCenter(new google.maps.LatLng(default_lat, default_lng));
            map.setZoom(default_map_zoom);
        }, 2000); 
```

从这个链接[https://code.google.com/p/gmaps-api-issues/issues/detail?id=1448](https://code.google.com/p/gmaps-api-issues/issues/detail?id=1448)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-28T15:15:30.110

要在隐藏的 div 中显示谷歌地图，div 必须在地图创建和加载之前显示。下面是一个例子：

```
<div  id="map_canvas" style="width:500px; height:500px"></div>

<script>
$(document).ready(function(){
  $('#button').click(function() {
    $('#map_canvas').delay('700').fadeIn();
    setTimeout(loadScript,1000);
  }); 
});

    function initialize() {
        var title= "Title";
        var lat = 50;
        var lng = 50;
        var myLatlng = new google.maps.LatLng(parseFloat(lat),parseFloat(lng));
        var myOptions = {
        zoom: 8,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      }
      var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
      var marker = new google.maps.Marker({
            position: myLatlng,
            title:artTitle
        });
        // To add the marker to the map, call setMap();
        marker.setMap(map);
    }

    function loadScript() {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src = "http://maps.google.com/maps/api/js?sensor=false&callback=initialize";
      document.body.appendChild(script);
    }       
</script> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-07-29T02:55:41.793

对我来说，它的工作原理是在模态显示之后调用呈现地图的函数。

我所要做的就是：

```
$(document).on("shown", "#eventModal", function(){
    bindMap(coordinates);
}); 
```

您可以对选项卡执行相同操作，因为它们也有一个“显示”事件。

# asp.net - ASP.NET 2.0 FormsAuthentication 应用程序 AuthenticateRequest 应该忽略 WebResource.axd

> ID：10197132
> 
> 赞同：0
> 
> 时间：2012-04-17T18:45:01.683
> 
> 标签：asp.net, asp.net-ajax, forms-authentication, iis-express, webresource.axd

我注意到在我的 ASP.NET 应用程序中，WebResource.axd 文件多次调用 Application_AuthenticateRequest 事件处理程序。

我在 AuthenticateRequest 事件处理程序中有代码来生成修改后的 GenericPrinicpal，即使它很简单，也不需要为 .axd 资源执行。

我在使用 IIS Express 进行调试时看到了这种行为，应用程序在集成管道模式下运行。

处理这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:57:57.347

Application_AuthenticateRequest 发生在 .net 处理的所有请求上。

如果它是 .axd，您可以测试扩展名并绕过它。

# c++ - 我可以在 std::map 中使用 CComPtr 吗？

> ID：10197146
> 
> 赞同：4
> 
> 时间：2012-04-17T18:45:31.523
> 
> 标签：c++, windows, com, atl, smart-pointers

我正在用 C++ 在 Windows COM 中编写一个程序，并且正在使用`CComPtr`智能指针。

我找不到答案的问题是 - 我可以`CComPtr`在`std::map`.

我有以下代码片段（简化）：

```
std::map<int, CComPtr<IErrorInfo> > ErrorMap; 
```

我希望维护`int`s 和`IErrorInfo`错误信息之间的这种映射。

但是我不确定我是否可以执行以下操作：

```
CComPtr<IErrorInfo> result;
GetErrorInfo(0, &pErrInfo);

ErrorMap.insert(std::make_pair(0, result)); 
```

我担心智能指针的所有权以及它是否会在被销毁`result`时正确释放？`ErrorMap`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T18:54:58.087

您需要将 CComPtr 包装在[CAdapt](http://msdn.microsoft.com/en-us/library/bs6acf5x%28v=vs.100%29.aspx)中才能使其正常工作。

> 适配器类 CAdapt 很有用，因为许多容器类（例如 STL 容器类）希望能够使用 address-of 运算符获取它们所包含对象的地址。重新定义地址运算符可能会混淆此要求，通常会导致编译错误并阻止在该容器中使用未适配的类型。CAdapt 提供了解决这些问题的方法。

# javascript - 使用 Internet Explorer 8 的 prompt()

> ID：10197147
> 
> 赞同：7
> 
> 时间：2012-04-17T18:45:33.277
> 
> 标签：javascript, asp.net, internet-explorer-8, ietester

我很难为我的问题找出解决方案。这是一个代码片段：

```
var ans = prompt("Mot de passe", '');
if (ans != '' && ans != null)
   __doPostBack('__Page', ans);
else
   window.location = "../Erreurs/NotAuthorized.aspx"; 
```

这段代码在 Internet Explorer 9 上运行得非常好。但是我的客户端只使用 Internet Explorer 8，所以我在 IE8 中使用 ieTester 对其进行了测试。但问题是**提示没有显示**并且它自动重定向，因为输入有一个空字符串（''）。

那么如何解决这个问题以与 Internet Explorer 8 一起使用呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T19:07:18.360

IE 在 Internet 选项中有一个设置来允许或拒绝`prompt()`。

[![IE提示设置](../Images/6ec90d2ef44754cd3e9d483a67bdcaac.png)](https://i.stack.imgur.com/Q66zM.png)
[（来源：[adamhaskell.net](http://adamhaskell.net/img/ie-prompt.png)）]

默认情况下，在 IE8 中，此设置是关闭的。因此，调用`prompt()`被忽略`""`并由它们返回。

`prompt()`无论如何你都不应该使用。使用表格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T19:01:46.853

它看起来像是特定于 IE-8 的安全问题，我没有其他版本要测试。调用`prompt()`会产生有关询问信息的脚本窗口的警告。我可以点击允许，刷新页面后，提示框如预期出现。

如果您要坚持使用`prompt()`，您可能必须规定目标计算机上的安全设置配置为允许它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-30T10:35:27.477

微软开发者网站告诉我们，“prompt()”已被弃用，现在出于安全原因通常会被阻止：“默认情况下，此方法会被 Internet 区域中的信息栏阻止。这有助于防止恶意网站发起欺骗攻击。”

请参阅[http://msdn.microsoft.com/en-us/library/ms536673.aspx](http://msdn.microsoft.com/en-us/library/ms536673.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T18:50:29.427

从这份报告来看，它看起来像是 IETester 中的一个已知错误？

[http://www.my-debugbar.com/forum/t294-Javascript-Alerts.html](http://www.my-debugbar.com/forum/t294-Javascript-Alerts.html)

# windows - 如何开始编写 DDK 代码？

> ID：10197148
> 
> 赞同：4
> 
> 时间：2012-04-17T18:45:33.790
> 
> 标签：windows, wdk

我想使用 DDK 编写一些简单的代码 - 但我什至不知道如何编译我下载的一些演示代码。

如何编译这个东西？是否有一些我可以使用的简单编辑器/IDE？有什么方法可以使用 Visual Studio 编写和编译 DDK 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T22:25:42.703

通常，WDK 由命令行工具组成。没有 IDE 等。但是通过一些努力，可以设置 MS 标准 IDE (MSVC2005/2008/2010)。

首先下载并安装最新的 WDK 包（来自官方 MS 网站）。进入 **StartMenu -> Windows Driver Kits -> WDK xxxx.xxxx.x -> Build Environments**。

在那里你会找到一个构建环境的列表。每一个都只是 cmd.exe 的一个快捷方式，并相应地设置了大量的环境变量。这些是针对不同 Windows 版本的构建环境，加上每个您都有一个免费/检查配置，这相当于用户模式的发布/调试构建。

为了构建驱动程序，您应该启动这些快捷方式之一。然后，在命令提示符下，进入源代码目录并运行**build** batch 命令。其余部分由驻留在所选目录中的**makefile确定。**

尽管如此，仍可以使用标准 IDE 进行驱动程序开发。也就是说，使用 vcproj（或 MSVC2010 中的 vcxproj）而不是 makefile。然而，这需要设置许多构建参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-10T15:34:34.483

目前有两种主要路径可供选择：

**1\. 对于在 Windows 7 及更高版本上运行的驱动程序：**

从 Visual Studio 2013 开始，您可以使用 Visual Studio 的内置集成来处理 WDK 项目，这是一个用于驱动程序开发的成熟 IDE。

Visual Studio 2015 + WDK 10 的示例屏幕截图：

[![在此处输入图像描述](../Images/d83b3e518bf39a1aa968cec217f8554c.png)](https://i.stack.imgur.com/i6fl8.png)

Microsoft 还提供了一份关于入门的简短指南。该指南包括 Visual Studio、WDK 和示例的下载链接 - [Windows 10、Visual Studio 和 WDK 入门](https://msdn.microsoft.com/en-us/windows/hardware/dn913721.aspx)：

> Visual Studio 2015 和 WDK 10 一起使用提供了一个集成开发环境，用于为运行 Windows 10 的设备创建高效、高质量的驱动程序。此版本的 Visual Studio 包括适用于 Windows 10 的 Visual Studio 工具和 Microsoft Windows 软件开发工具包 (SDK ) 适用于 Windows 10。

简而言之，您需要安装带有 Update 1 和 WDK 10 的 Visual Studio 2015。您的操作系统需要是 Windows 7 或更高版本（仅限桌面，而不是服务器）。

**2\. 对于在 Windows XP 上运行的驱动程序：**

如果您需要坚持使用较旧的 WDK 7.1（例如，对于 Windows XP 支持），那么 Donald D. Burn 的本指南可能是一个好的开始 - [Windows 驱动程序开发入门](https://msdn.microsoft.com/en-us/library/windows/hardware/dn613923(v=vs.85).aspx)：

> WDK MVP Donald D. Burn 分享了他在为 Microsoft Windows 创建设备驱动程序的工具方面的经验和见解，并提供了有关调试、测试工具和可帮助您在开发早期发现和修复错误的技术的信息。
> 
> ...
> 
> 更新了从 Windows Server 2003 Service Pack 1 Windows Driver Kit (WDK) 到 Windows Driver Kit (WDK) 版本 7.1 的工具、构建环境和最佳实践的更改。

选择此路径通常需要通过构建环境在命令行中编译驱动程序，如 valdo 的回答所述。至于编码，您可以使用您选择的编辑器。

# sql - 按表名排序？

> ID：10197151
> 
> 赞同：0
> 
> 时间：2012-04-17T18:45:46.817
> 
> 标签：sql

有什么方法可以在您的表名上使用“订单”功能。即我想联合两个表，然后按一列排序，然后按表名。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T18:46:52.130

将常量添加到描述您的表名的列列表中，例如

```
select *, 'TableA' as TableName
from TableA
union all
select *, 'TableB' as TableName
from TableB
order by TableName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T18:47:59.180

您可以创建一个单独的列（假设您的列是`col1`and `col2`）

```
select col1,col2,table_1 as table_name
from table_1
union
select col1,col2,table_2 as table_name
from table_2
order by col1,table_name; 
```

# c# - App.Current.Properties 的对象引用未设置 wpf 问题

> ID：10197152
> 
> 赞同：1
> 
> 时间：2012-04-17T18:45:50.013
> 
> 标签：c#, wpf, xaml, object, instance

所以我有一些学生记录，它们从后面的代码中添加内容，我试图将字符串从一个用户控件传递到另一个用户控件：

```
 private Dictionary<string, UserControl> _userControls = new Dictionary<string, UserControl>();
    public Dictionary<string, UserControl> GetUserControls()
    {
        return _userControls;
    }
    public FindStudent()
    {
        InitializeComponent();

        List<string> userControlKeys = new List<string>();
        userControlKeys.Add("ViewStudent");
        Type type = this.GetType();
        Assembly assembly = type.Assembly;
        foreach (string userControlKey in userControlKeys)
        {
            string userControlFullName = String.Format("{0}.{1}", type.Namespace, userControlKey);
            UserControl userControl = (UserControl)assembly.CreateInstance(userControlFullName);
            _userControls.Add(userControlKey, userControl);
        }
        string uriGroups = "http://localhost:8000/Service/Student";

        XDocument xDoc = XDocument.Load(uriGroups);
        var sortedXdoc = xDoc.Descendants("Student")
                       .OrderByDescending(x => Convert.ToDateTime(x.Element("TimeAdded").Value));

        foreach (var node in xDoc.Descendants("Student").OrderByDescending(x => Convert.ToDateTime(x.Element("TimeAdded").Value)))

        {

            GroupBox groupbox = new GroupBox();
            groupbox.Header = String.Format(node.Element("StudentID").Value);
            App.Current.Properties["groupboxHeader"] = groupbox.Header;
            // when button is clicked it should get the header which is set to studentID
            groupbox.Width = 100;
            groupbox.Height = 100;
            groupbox.Margin = new Thickness(1);

            Button btnFindStudent = new Button();
            btnFindStudent.Click += this.btnGeneral_Click;
            btnFindStudent.Name = Convert.ToString("btnViewStudent");
            btnFindStudent.Tag = Convert.ToString("ViewStudent");
            btnFindStudent.Content = Convert.ToString("View");
            btnFindStudent.HorizontalAlignment = HorizontalAlignment.Right;
            btnFindStudent.Height = 20;
            btnFindStudent.Width = 36;

            StackPanel stackPanel = new StackPanel();
            stackPanel.Children.Add(groupbox);
            stackPanel.Children.Add(btnFindStudent);
            stackPanel.Margin = new Thickness(5);
            MainArea1.Children.Add(stackPanel);
        }
    }
    private void btnGeneral_Click(object sender, RoutedEventArgs e)
    {
        PanelMainContent.Children.Clear();
        Button button = (Button)e.OriginalSource;
        //PanelMainWrapper.Header = button.Content;
        Type type = this.GetType();
        Assembly assembly = type.Assembly;

        PanelMainContent.Children.Add(_userControls[button.Tag.ToString()]);
    } 
```

然后在我看来，学生应该将文本块设置为学生ID：

```
public partial class ViewStudent : UserControl
{
    string myProperty = (string)App.Current.Properties["groupboxHeader"];
    public ViewStudent()
    {

    }
    protected override void OnInitialized(EventArgs e)
    {

        textBlock1.Text = myProperty; // error occurs on this line 
```

但它并没有给出一个错误，指出对象引用未设置为对象的实例。

我认为可能存在以下问题：

```
App.Current.Properties["groupboxHeader"] = groupbox.Header; 
```

我不认为它在做我需要做的事情，那就是当我单击动态添加的按钮时将 app.propertys 设置为当前的组框标题。

编辑：

```
<UserControl x:Class="WpfApplication4.AppPages.ViewStudent"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <TextBlock Height="23" HorizontalAlignment="Left" Margin="180,56,0,0" Name="textBlock1" VerticalAlignment="Top" />
   </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:22:38.140

如果显示的代码是完整的，您只是忘记`InitializeComponent`在`ViewStudent`构造函数中调用。因此`textBlock1`是`null`。

```
public ViewStudent() 
{ 
    InitializeComponent(); // add this
} 
```

并且永远不要忘记调用基类`OnInitialized`：

```
protected override void OnInitialized(EventArgs e)
{
    base.OnInitialized(e); // and add this
    ...
} 
```

# php - 为什么这个 js-php 生成的位置引用在 IE8 中不起作用？

> ID：10197154
> 
> 赞同：0
> 
> 时间：2012-04-17T18:46:09.960
> 
> 标签：php, javascript, internet-explorer, internet-explorer-8

为什么这个 js-php 生成的位置引用在 IE8 中不起作用？

```
<script>
<?php
    session_start();
        $_SESSION['admintermorol']=false;
        echo "window.location='".$_SERVER['HTTP_REFERER']."';";
?>
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T18:49:05.927

我不确定，但你可以用纯 php 做到这一点，替换

```
echo "window.location='".$_SERVER['HTTP_REFERER']."';"; 
```

和

```
exit(header("Location: {$_SERVER['HTTP_REFERER']}\r\n")); 
```

抱歉，有点不对

将代码移动到页面顶部（不在脚本标签内）

```
<?php
session_start();
if ( !isset($_SESSION['admintermorol']))
{
    exit(header("Location: {$_SERVER['HTTP_REFERER']}\r\n"));
}
?> 
```

或者（现在我知道）你可以这样做:-)

```
<?php
session_start();
$_SESSION['admintermorol'] = FALSE;
exit(header("Location: {$_SERVER['HTTP_REFERER']}\r\n"));
?> 
```

# php - 如何在 PHP (Gentoo OS) 中启用 SimpleXML 扩展

> ID：10197160
> 
> 赞同：2
> 
> 时间：2012-04-17T18:46:25.623
> 
> 标签：php, apache, simplexml, gentoo

我正在使用 gentoo 服务器。目前在 PHP 中，SimpleXML 扩展未启用。如何启用此扩展程序？

PHP版本是5.2

配置命令具有“--disable-simplexml”。

是否可以使用“emerge”包管理器来启用这个扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T18:51:52.177

您需要重新编译 PHP。另请参阅[php.net 上的此评论](http://www.php.net/manual/en/simplexml.installation.php#87954)

顺便提一句。PHP 5.2 已经*过时*了，你应该考虑更新 PHP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T04:52:45.327

您应该使用设置了 'simplexml' USE 标志重新合并 php。它是默认开启的，因此您可能不需要做任何其他事情

出现 php -vua

如果没有设置 'simplexml' USE 标志，请将其添加到 /etc/make.conf 中设置的 USE= 中，然后使用上述命令重新合并 php。

# git - 如何将 GitHub for Mac 与本地 Git 存储库一起使用

> ID：10197161
> 
> 赞同：13
> 
> 时间：2012-04-17T18:46:27.980
> 
> 标签：git, github-for-mac

我正在尝试使用本地 Git 存储库（即根本没有托管在 GitHub 上），但我在使用 GitHub for Mac 时遇到了问题。

它显示了我传出的更改，但随后我似乎必须推送到服务器，并且似乎没有办法在不发布到 GitHub 的情况下执行“同步”（我们不想这样做）。

我没有找到任何有关此的文档，或者遇到类似问题的用户。

有什么建议么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-17T18:51:21.487

[该应用程序是鼓励您使用 GitHub 的免费工具，并且与 GitHub 配合使用效果最佳，但它现在也可以与私人存储库配合使用，详见http://mac.github.com/help](http://mac.github.com/help)的摘录

> ***多个 Git 遥控器和非 GitHub 遥控器*** GitHub for Mac 不支持多个 Git 遥控器。我们只会使用原始遥控器。如果您想推拉到其他遥控器，我们建议您使用命令行客户端。
> 
> Mac 版 GitHub 已针对 GitHub 遥控器进行了优化——但如果您希望使用非 GitHub 遥控器，它也可以正常工作。在设置选项卡中手动设置遥控器，其他一切都应按预期工作。

我已经用我的一些私人非 github 遥控器测试了最新的 [Version 1.2.6 (010d408)] 软件，它似乎可以在一些摆弄下工作。理论上，您应该能够将现有存储库拖放到新的存储库窗格中。如果您本地计算机上的现有存储库已设置为从命令行与您的遥控器一起使用，那么它应该在 GitHub 软件中正常工作......

然而，我在途中遇到了一些小问题。例如，Mac 软件的 GitHub 拒绝承认我的一个存储库。我会不断地将它拖放到 Mac 软件中，它会拒绝出现在存储库列表中。有时，会从我的 GitHub 帐户中弹出一个随机存储库！我的其他一些私人存储库工作得很好，我可以通过手动将 .git 目录移动到另一个文件夹然后将本地存储库拖到 Mac 软件窗格中来绕过这个奇怪的错误。然后它会提议在该文件夹中设置一个新的 repo。完成后，我用旧备份替换了新的 .git 目录。即使解决了这个小问题，我仍然偶尔会收到随机错误对话框，通知我在浏览提交时出现“Git Error”，尽管此信息似乎只是一个烦恼，因为我的所有提交信息都正确显示。我通常从命令行工作，并且很确定我的 git repo 的设置没有问题。

总之，Mac 版的 GitHub 非常适合基于 Gitub 的存储库，但对于您自己在不同遥控器上的存储库仍然不是完美的。但是，还有其他免费工具，例如 gity 和 gitx，它们可以在 mac 上运行，并允许您使用托管在任何地方的 repo。我没有尝试过[Tower](http://www.git-tower.com/)，但它看起来非常棒。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T19:49:12.817

我实际上没有 Mac 来尝试这个，所以也许我遗漏了一些非常明显的东西，但根据[http://mac.github.com/help](http://mac.github.com/help)：

> Mac 版 GitHub 已针对 GitHub 遥控器进行了优化——但如果您希望使用非 GitHub 遥控器，它也可以正常工作。**在设置选项卡中手动设置遥控器，其他一切都应按预期工作**。

所以我假设在设置中您可以执行类似于在命令行上执行以下操作的操作：

```
git remote add origin some/shared/place/within/your/network 
```

然后，当您点击 Sync 按钮时，它应该会使用它。我猜 Github 客户端在幕后只是在使用您的项目`.git/config`文件，所以如果您无法按照您认为合适的方式编辑遥控器，我会感到惊讶。

请参阅[这篇文章](http://www.jedi.be/blog/2009/05/06/8-ways-to-share-your-git-repository/#fileshare)，了解设置共享遥控器的几种不同方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T18:52:35.940

如果您不想在 github 上发布您的代码，但想使用 github 工具，您可以为私有存储库付费：

[https://github.com/plans](https://github.com/plans)

然后你可以使用 github 工具，并且仍然保留你自己的代码。否则，您将不得不使用 github mac 应用程序以外的其他东西来处理您的 git 工作流程：

*   [http://gitx.frim.nl/](http://gitx.frim.nl/)
*   [https://stackoverflow.com/questions/455698/best-visual-client-for-git-on-mac-os-x](https://stackoverflow.com/questions/455698/best-visual-client-for-git-on-mac-os-x)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-11T01:38:56.840

在命令行中克隆您的存储库，然后将其作为本地存储库添加到 GitHub.app。这似乎对我有用——看起来 GitHub.app 正在成功地从`.git/config`文件中读取源并使用它进行同步。

# c++ - 使用 g++ 时使用 extern "C" { 对 C++ 代码的影响

> ID：10197168
> 
> 赞同：2
> 
> 时间：2012-04-17T18:47:06.223
> 
> 标签：c++, c, g++, gnu

当使用 G++（例如 Linux 上的 4.5 版）时，任何人都可以解释如果用户为混合 C/C++ 系统编写头文件会发生什么，如下所示：

```
#ifdef __cplusplus 

extern "C" {

int myCPPfunc(some_arg_list....); /* a C++ function */

}
#endif 
```

但这`myCPPfunc()`是一个普通的 C++ 函数，里面有一个类 def - 即它被错误地标记为 C 函数。

这有什么影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T18:51:45.607

The main impact of this is that you cannot overload it, e.g. this is legal:

```
int myCPPfunc(int a);
int myCPPfunc(char a); 
```

But this is not:

```
extern "C"
{
    int myCPPfunc(int a);
    int myCPPfunc(char a);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T18:54:42.153

这告诉 C++ 编译器在头文件中声明的函数是 C 函数。

[http://www.parashift.com/c++-faq-lite/mixing-c-and-cpp.html#faq-32.2](http://www.parashift.com/c++-faq-lite/mixing-c-and-cpp.html#faq-32.2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T18:51:53.720

*让函数的实现*`extern "C"`使用任意 C++ 特性是完全合法的。你不能做的是让它的*接口*是你在 C 中做不到的，例如参数重载、方法（虚拟或其他）、模板等。

请注意，许多“在 C 中无法做到的事情”情况会引发未定义的行为，而不是提示编译错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T19:32:17.170

这正是`extern "C"`它的用途——它允许您编写一个可以从 C 调用的 C++ 函数。

本质上，该声明告诉 C++ 编译器您希望 C++ 函数`myCPPfunc()`具有可从 C 链接（因此可调用）的外部接口。

该函数的实现仍然是 C++，仍然可以使用 C++ 的特性。

通常，头文件中函数的声明可能更像：

```
#ifdef __cplusplus 
extern "C" {
#endif

int myCPPfunc(some_arg_list....); /* a C++ function */

#ifdef __cplusplus 
}
#endif 
```

这使得 C++ 编译器或 C 编译器都可以使用相同的头文件，并且每个都将其视为声明了 C 可调用函数。

# windows-runtime - 在 WinRT 中，我如何加载图像，然后在写入之前等待它加载所需的时间？

> ID：10197170
> 
> 赞同：2
> 
> 时间：2012-04-17T18:47:08.330
> 
> 标签：windows-runtime, async-await, writeablebitmap, filepicker, writeablebitmapex

我在 WinRT 项目中使用 WriteableBitmapEx。我从用户图片库将图像加载到 WriteableBitmap 中。但是，我不能立即写入该图像，如果我这样做，它将被图像本身覆盖（看起来它是异步加载图像，然后它覆盖了我的绘图）。我不知道如何阻止它这样做（我尝试在 SetSource 上使用 Await ，但这不是 Async 方法）。

我使用了“Await Task.Delay(1000)”并且有效，但它似乎很棘手，因为 1000 毫秒可能或可能不够。我希望它等到加载位图后再继续。

任何人都可以看到我做错了什么，或者建议我如何确保在进行任何处理之前从图片库中加载 WriteableBitmap？这是我创建的示例代码片段：

```
Dim file = Await picker.PickSingleFileAsync

If file Is Nothing Then
    Exit Sub
End If

Dim wbm As New WriteableBitmap(1, 1)
wbm.SetSource(Await file.OpenAsync(Windows.Storage.FileAccessMode.Read))

' If I don't have this, the DrawLine will not show up, if I do, it will.
Await Task.Delay(1000)

wbm.DrawLine(1, 1, 255, 255, Colors.Green)
wbm.Invalidate()

ImageMain.Source = wbm 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T18:50:47.517

此方法从应用程序的内容中加载图像，对其进行解码并传回现成的 WriteableBitmap。取自[WriteableBitmapEx 库](http://writeablebitmapex.codeplex.com/)：

```
/// <summary>
/// Loads an image from the applications content and fills this WriteableBitmap with it.
/// </summary>
/// <param name="bmp">The WriteableBitmap.</param>
/// <param name="uri">The URI to the content file.</param>
/// <returns>The WriteableBitmap that was passed as parameter.</returns>
public static async Task<WriteableBitmap> FromContent(this WriteableBitmap bmp, Uri uri)
{
   // Decode pixel data
   var file = await StorageFile.GetFileFromApplicationUriAsync(uri);
   var decoder = await BitmapDecoder.CreateAsync(await file.OpenAsync(FileAccessMode.Read));
   var transform = new global::Windows.Graphics.Imaging.BitmapTransform();
   var pixelData = await decoder.GetPixelDataAsync(decoder.BitmapPixelFormat, decoder.BitmapAlphaMode, transform, ExifOrientationMode.RespectExifOrientation, ColorManagementMode.ColorManageToSRgb);
   var pixels = pixelData.DetachPixelData();

   // Copy to WriteableBitmap
   bmp = new WriteableBitmap((int)decoder.PixelWidth, (int)decoder.PixelHeight);
   using (var bmpStream = bmp.PixelBuffer.AsStream())
   {
      bmpStream.Seek(0, SeekOrigin.Begin);
      bmpStream.Write(pixels, 0, (int)bmpStream.Length);
      return bmp;
   }
} 
```

顺便说一句，WriteableBitmapEx 现在正式支持 WinRT。;) [http://kodierer.blogspot.de/2012/05/one-bitmap-to-rule-them-all.html](http://kodierer.blogspot.de/2012/05/one-bitmap-to-rule-them-all.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T20:32:34.513

返回的 OpenAsync 仅表示流可用，而不是实际从中读取数据。因此，您似乎希望先打开+阅读，然后就可以了。

由于 Filip 指出 ReadAsync 将要求您首先创建并传入缓冲区，因此我更新了以下代码段以在执行 OpenReadAsync 以获取 IRandomAccessStream 后使用[DataReader](http://msdn.microsoft.com/en-us/library/windows/apps/br208119.aspx)将流实际加载到字节数组中。

```
var randomAccessStream = await file.OpenReadAsync();

var dataReader = new DataReader(randomAccessStream);
await dataReader.LoadAsync(randomAccessStream.Size);

byte[] imageBytes;
dataReader.ReadBytes(out imageBytes);

wbm.SetSource(new MemoryStream(imageBytes)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T23:40:24.507

我认为 WB 没有 BitmapImage 等待它打开的事件。我会尝试使用 BitmapDecoder/CreateAsync/GetPixelDataAsync/DetachPixelData 并将生成的字节数组复制到 WB 的像素缓冲区，而不是调用 wb.SetSource()。然后可能会调用 wb.Invalidate()。或者也许只是用一个无效的调用替换延迟调用。

# google-app-engine - NDB 在 key.get() 的掩护下做了什么？

> ID：10197172
> 
> 赞同：1
> 
> 时间：2012-04-17T18:47:15.127
> 
> 标签：google-app-engine, app-engine-ndb

我开始使用 NDB，因为它提供了一些非常好的功能，并且通常应该比我通过自己的缓存层实现时更优化。

但是，我不了解 key.get() 等简单操作的所有情况。Appstats 显示，在这样的操作过程中，在刚刚启动的开发服务器上，进行了 4 次 RPC：

```
@434ms memcache.Get real=1ms api=0ms
@437ms memcache.Set real=1ms api=0ms
@438ms memcache.Get real=2ms api=0ms
@441ms datastore_v3.Get real=4ms api=0ms 
```

为什么我们有 2 个 memcache.Get 操作？为什么 memcache.Set 出现在 datastore_v3.Get 之前？我使用默认的缓存选项。查看 ndb.context.get 可以提供一些见解，但我仍然感到困惑。memcache.Set 是关于 LOCK 的。但是两个 Get 调用看起来相同，为什么在数据存储 Get 之后没有 Set？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T04:54:26.953

您是否在顶级函数或 WSGI 应用程序对象周围使用了 @ndb.toplevel()？一个常见的问题是，如果您忽略它，则永远不会执行实际的 Set 调用。请参阅[http://code.google.com/p/appengine-ndb-experiment/issues/detail?id=105](http://code.google.com/p/appengine-ndb-experiment/issues/detail?id=105)（点击评论 5 中的群组链接！）。

# python - 想要返回在 python 3.1 中按下的键

> ID：10197173
> 
> 赞同：2
> 
> 时间：2012-04-17T18:47:16.577
> 
> 标签：python, keypress

我想要一个脚本，只要用户按下它就会返回按键，即使它有时间限制。我使用时间限制来让用户输入返回，但我的代码不起作用。我尝试了以下。

```
def answer(timeout):
    print "Enter the answer"
    stop = time.time() + timeout
    r=['a','b','c','d']
    while True:
        if msvcrt.getche() in r:
            return msvcrt.getche()

        else:
            if time.time() > stop:
                return 'O' 
```

但是我只得到'ÿ'直到超时，即使我按下任何键，也不会检测到它。在这里，我需要一个代码，当它被按下时将返回 a|b|c|d，或者当时间超过时返回 O。

# javascript - 使用 Prototype 扩展原生对象不好吗？

> ID：10197174
> 
> 赞同：15
> 
> 时间：2012-04-17T18:47:26.350
> 
> 标签：javascript, prototype

我在某处读到使用`prototype`扩展本机对象（`String`, `Number`,`Array`等）是一个坏主意。这是真的？为什么或者为什么不？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T18:50:38.290

我不认为这很糟糕。如果您看一下 Ruby on Rails，就会发现很多原生对象都使用自定义功能进行了扩展，这是一个非常好的框架。

如果您更改本机对象上的**现有方法，那将会很糟糕。**这可能会导致无法预料的后果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T19:54:06.113

在 Andrew Dupont 的 JSConf 2011 的这段视频中对此进行了很好的讨论。[http://blip.tv/jsconf/jsconf2011-andrew-dupont-everything-is-permitted-extending-built-ins-5211542](http://blip.tv/jsconf/jsconf2011-andrew-dupont-everything-is-permitted-extending-built-ins-5211542)

基本上要点是：

*   不要延长`Object.prototype`
*   有些人可能喜欢扩展东西，有些人不喜欢
*   你需要知道你在做什么
*   不要使用两个扩展东西的库，因为它可能很糟糕
*   扩展原型以添加标准功能几乎总是可以的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T19:15:23.510

我不会扩展/修改本机对象的行为。

在团队环境中开发时，这至少是有意义的。

仅仅因为，几个月后，另一位开发人员编写另一段独立代码不会立即识别更改的行为，除非在某处记录并在开始他的任务之前意识到这一点。

相反，我建议封装/“命名空间”-ing 所有这些功能，以便有人可以选择或不使用修改后的功能。

此外，本机对象及其方法已针对广泛的案例进行了全面测试。因此，在修改本机功能之前，您必须完全确定自己在做什么。

# android - 使用 glutIdleFunc 摆脱 glutMainLoop？

> ID：10197180
> 
> 赞同：-2
> 
> 时间：2012-04-17T18:47:46.397
> 
> 标签：android, c++, opengl, glut

我正在编写一个程序，该程序可以打开并打开带有图像的 GL 窗口并连接到我的 android 设备，在该设备上，用户使用该设备作为一种触控板来平移和放大和缩小。一切正常，但是程序卡在 glutMainLoop 中并且不会继续接受来自设备的数据。显然 glutIdleFunc 是我的问题的解决方案但是我看不到如何在我的代码中实现它而不会出现内存错误？有人可以告诉我如何将函数放入我的代码中，以便它运行连接代码以及 opengl 的东西吗？

```
#include <stdlib.h>
#include <stdio.h>
#include <signal.h>
#include <string.h>
#include <strings.h>
#include <vrpn_Shared.h>
#include <vrpn_Analog.h>
#include <vector>
#include <GL/freeglut.h>
#include <imageviewer.h>

using namespace std;

int done = 0;
int accepted = 0;           // Signals that the program should exit
unsigned tracker_stride = 1;    // Every nth report will be printed

//-------------------------------------
// This section contains the data structure that holds information on
// the devices that are created.  For each named device, a remote of each
// type analog is created.

class device_info {
    public:
    char            *name;

    vrpn_Analog_Remote  *ana;

};
const unsigned MAX_DEVICES = 2;

//-------------------------------------
// This section contains the data structure that is used to determine how
// often to print a report for each sensor of each tracker.  Each element
// contains a counter that is used by the callback routine to keep track
// of how many it has skipped.  There is an element for each possible sensor.
// A new array of elements is created for each new tracker object, and a
// pointer to it is passed as the userdata pointer to the callback handlers.

class t_user_callback {
    public:
    char            t_name[vrpn_MAX_TEXT_LEN];
        vector<unsigned>    t_counts ;
};

//Callback handlers

void    VRPN_CALLBACK handle_analog (void *userdata, const vrpn_ANALOGCB a)
{
    int i;
    const char *name = (const char *)userdata;

    printf("Input from %s:\n  \n        %5.0f", name, a.channel[0]);
    for (i = 1; i < a.num_channel; i++) {
    printf(" %5.0f \n", a.channel[1]);
    }
    printf(" \n");
}

int main (int argc, char * argv [])
{

  int   print_for_tracker = 1;  // Print tracker reports?
  int   print_for_button = 1;   // Print button reports?
  int   print_for_analog = 1;   // Print analog reports?
  int   print_for_dial = 1; // Print dial reports?
  int   print_for_text = 1; // Print warning/error messages?

  device_info device_list[MAX_DEVICES];
  unsigned num_devices = 0;

  int i;

  // Parse arguments, creating objects 

  for (i = 1; i < argc; i++) {
    if (!strcmp(argv[i], "-notracker")) {
      print_for_tracker = 0;
    } else if (!strcmp(argv[i], "-nobutton")) {
      print_for_button = 0;
    } else if (!strcmp(argv[i], "-noanalog")) {
      print_for_analog = 0;
    } else if (!strcmp(argv[i], "-nodial")) {
      print_for_dial = 0;
    } else if (!strcmp(argv[i], "-notext")) {
      print_for_text = 0;

    } else if (!strcmp(argv[i], "-trackerstride")) {
      if (tracker_stride <= 0) {
      fprintf(stderr, "-trackerstride argument must be 1 or greater\n");
      return -1;
      }
    } else {    // Create a device and connect to it.
    device_info *dev;

    // Name the device and open it as everything
    dev = &device_list[num_devices];
    dev->name = argv[i];

    dev->ana = new vrpn_Analog_Remote(dev->name);

    if (print_for_analog) {
        printf(" Analog");
        dev->ana->register_change_handler(dev->name, handle_analog);
    }
    printf(".\n");
    num_devices++;
    }

  }

 // main interactive loop

  printf("Press ^C to exit.\n");
  while ( ! done ) {
      unsigned i;

      // Let all the devices do their things
      for (i = 0; i < num_devices; i++) {

      device_list[i].ana->mainloop();

      glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGB | GLUT_SINGLE);
    glutInitWindowSize(400,300);
    glutInitWindowPosition(200,100);
    glutCreateWindow("ImageViewer");

    init();
    glutDisplayFunc(display);
    glutMotionFunc(drag);
    glutMouseFunc(mouse);
 //   glutIdleFunc(IdleFunc);
    glutMainLoop();

      }
  }
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T02:47:35.387

如果它可以管理所有输入设备，并且一切都是由它管理的输入驱动的，那么 glut 就很好。一旦你有了非托管输入设备或非基于事件的处理，你可能想要使用 glut 以外的东西。您的另一种选择是在单独的进程（或线程）中分叉并运行您的异步内容。

# git - git flow 分支已经分道扬镳

> ID：10197188
> 
> 赞同：75
> 
> 时间：2012-04-17T18:48:20.077
> 
> 标签：git, git-flow

我正在使用 git flow 工具，但我遇到了一些问题。我的 git 分支已经发散了。我读过[master 分支和“origin/master”已经分歧，如何“取消分歧”分支？](https://stackoverflow.com/questions/2452226/master-branch-and-origin-master-have-diverged-how-to-undiverge-branches)并尝试按照这些步骤尝试合并和重新设置我的本地存储库。

```
 $  git flow feature finish showFindLogs
    Branches 'develop' and 'origin/develop' have diverged.
    And branch 'develop' may be fast-forwarded.
    $  git merge origin/develop
    Already up-to-date.
    $ git rebase origin/develop
    Current branch feature/showFindLogs is up to date.
    $ git status
    # On branch feature/showFindLogs
    nothing to commit (working directory clean) 
```

我怎样才能摆脱这种情况？我已经完成了 git flow 功能，我只想将我的更改发送到远程。谢谢！

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-04-17T21:13:37.803

这里发生的情况是远程已收到更新，git-flow 要求它`develop`并`origin/develop`在合并回功能之前处于相同的提交状态。这是为了防止发布分支时出现严重的冲突。

要解决此问题，您需要：

1.  将您的本地同步`develop`到`origin`：结帐`develop`，然后`origin`拉到`develop`( `git checkout develop && git pull origin`)

2.  将您的功能重新设置在`develop`with上`git flow feature rebase showFindLogs`。如果你运气不好，你可能会在这里发生冲突

3.  检查它是否不会破坏任何东西

4.  `git flow feature finish showFindLogs`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-05-31T18:37:43.150

确保您的`develop`分支不落后于原点，也许您需要执行

`git checkout develop`

`git pull`

`git checkout release/x.x.x`

并继续发布过程

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T07:50:42.900

您可能还想（（只要它不受官方支持）补丁和）使用我的

`git-flow feature finish -p`选项

[https://github.com/nvie/gitflow/pull/253](https://github.com/nvie/gitflow/pull/253)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-03-20T10:16:25.207

**我所要做的就是：**

1.  `git checkout develop`
2.  `git pull origin develop`
3.  `git checkout feature/your_feature_name`
4.  `git flow finish`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-07T08:42:03.380

您可以使用以下命令在完成功能之前从 $ORIGIN 获取：

```
git flow feature finish -F <name> 
```

（[文档](https://github.com/nvie/gitflow/wiki/Command-Line-Arguments#user-content-git-flow-feature-finish--rfkds-namenameprefix)）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-29T16:23:08.423

对于使用谷歌搜索此错误并使用**Hub-Flow 的**人 - 只需执行以下操作：

```
git hf update 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-01-17T19:09:53.957

为了解决这个问题，你可以使用我的 git flow 实现，基于@childno͡.de 解决方案。

```
git flow feature/hotfix/release/bugfix  -e finish <name> 
```

要在控制台中安装 git flow 执行：

```
git clone https://github.com/wyhasany/gitflow-avh/;cd gitflow-avh/;git checkout feature/force_merge;git pull;sudo make install 
```

# windows-phone-7 - WP7中的永久后台任务

> ID：10197190
> 
> 赞同：0
> 
> 时间：2012-04-17T18:48:22.417
> 
> 标签：windows-phone-7

正在研究为需要持续监控 GPS 位置的 WP7 开发应用程序。从我可以从一些搜索中了解到，WP7 后台任务有一定的限制。仅计划每 30 分钟执行一次，运行时间不超过 25 秒等。

我想知道如何绕过这些限制来永久运行能够实时监控 GPS 的后台任务。（以谷歌纵横为例。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T19:10:40.723

除非您的应用程序实际上在手机上运行，​​否则您无法这样做。

WP7 上没有任何后台任务可以永久保存。

# javascript - google maps api：从代码显示鼠标悬停窗口

> ID：10197193
> 
> 赞同：0
> 
> 时间：2012-04-17T18:48:31.893
> 
> 标签：javascript, google-maps-api-3

我已经在我的办公室上构建了一个带有单个标记的简单地图应用程序。地图建好后，标记就会掉进去。我想在显示标记后触发鼠标悬停事件，但它似乎永远不会起作用。明确地说，我希望鼠标悬停的默认行为，即显示一个带有标记标题的简单窗口，从代码中发生，而不是从鼠标悬停在标记上。这似乎与这里的大多数查询相反。

我试过这个：

```
setTimeout("google.maps.event.trigger( marker, 'mouseover');alert(marker.title);",5000); 
```

在这种情况下，警报会发生，但鼠标悬停似乎没有。如果没有警报，就没有消息或错误，触发器就会被吞没。

我缺少鼠标悬停事件的参数吗？从文档来看似乎并非如此，但我可以想象一大堆丢失的信息，主要是窗口应该显示在哪里以及显示多长时间。

我想我的方法是完全错误的，但是根据我对文档的阅读，它应该可以工作。当然，另一种方法是像这样创建一个 InfoWindow：

```
 iw = new google.maps.InfoWindow({position: LL, content: marker.title});
 iw.open(map, marker); 
```

这可行，但与鼠标悬停时弹出的窗口相比，窗口相当难看。

也许我的问题的另一种措辞是我如何显示一个看起来就像鼠标悬停窗口的信息窗口？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:11:32.570

您需要制作自己的叠加层，或者有一些可以让您接近。

[http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html/](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html/)

[http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/examples.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/examples.html)

# javascript - 保持文本输入滚动同步

> ID：10197194
> 
> 赞同：1
> 
> 时间：2012-04-17T18:48:32.633
> 
> 标签：javascript, dom

这是一个挑战：

假设您有两个文本输入，就像在[这个 fiddle](http://jsfiddle.net/TrevorBurnham/GhMmX/)中一样。当用户在一个内部“滚动”时（例如，通过将光标移动到最右边或最左边），我想“滚动”另一个以使其保持同步。至少在现代浏览器中可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:31:48.707

我会将未输入到 IFrame 的文本更改。如果两者都需要作为输入，则在聚焦/远离时将元素从 iframe 动态切换为输入。

在输入框中，您可以通过选择属性找到插入符号的位置；然后可以使用 scrollTo 滚动 IFrame。

恐怕我没有完整的解决方案来准确找出输入框的滚动状态。

# javascript - 我如何在多个页面中制作一个带有下一页并取消并返回并提交最后一页的 javascript 表单向导

> ID：10197196
> 
> 赞同：-3
> 
> 时间：2012-04-17T18:48:47.220
> 
> 标签：javascript, wizard

我正在我的网站中创建一个带有多个页面的 javascript 表单向导，其中包含下一个并取消并返回并在最后一页上提交

我试过谷歌，但它显示了一页表单向导

请你帮我解决这个问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T18:57:02.823

基本上，您将用包含页面 ID 的 div 包围表单的每个“页面”，或者为每个表单元素提供一个参数以指示它在哪个页面上。

然后，您将使用 javascript 创建两个带有 onclick 侦听器的按钮。根据可见页面，仅显示 prev、next 或两者。最初，您使不属于第一页的所有 div 或元素不可见，并且在 prev/next 按钮上，您将更改 div/form 元素的可见性。

假设 jquery 它看起来像这样：

```
<form>
   <div class="form_page" id="page1">
      <input type="text" name="field1" value="field1" />
   </div>
   <div class="form_page" id="page2">
      <input type="text" name="field2" value="field2" />
      <input type="submit" value="submit" />
   </div>
</form>
<div id="actions"></div>

<script>
    $(document).ready(function() {

        var numPages = $('.form_page').length;
        var currentPage = 1;
        var $actions = $('#actions');
        for(i = 2; i <= numPages; i++) {

            $('#page' + i).hide();     
        }
        var $prev = $('<input type="button" value="prev">').click(function() {

            if (currentPage > 1) {

                $('#page' + currentPage).hide();
                currentPage--;
                $('#page' + currentPage).show();
            }

        }).appendTo($actions);

        var $next = $('<input type="button" value="next">').click(function() {

            if (currentPage < numPages) {

                $('#page' + currentPage).hide();
                currentPage++;
                $('#page' + currentPage).show();
            }

        }).appendTo($actions);
    });
</script> 
```

还将示例添加到[jsfiddle](http://jsfiddle.net/SzgFv/)

# objective-c - 未使用变量“完成”的警告

> ID：10197198
> 
> 赞同：0
> 
> 时间：2012-04-17T18:48:51.457
> 
> 标签：objective-c, xcode, objective-c-blocks

有这个编译和运行良好的实现文件，但在一个块中给我一个未使用的变量警告。我是块新手，所以不太确定出了什么问题。已评论警告所在的行。

有人可以解释一下吗？提前致谢！

```
#import "RTViewController.h"
#import <AVFoundation/AVFoundation.h>
#import <AudioToolbox/AudioToolbox.h>

@interface RTViewController () {
  AVAudioPlayer *backgroundAudioPlayer;
  SystemSoundID burnRubberSoundID;
}

@end

@implementation RTViewController
@synthesize car;
@synthesize testDriveButton;
@synthesize backgroundImage;

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.title = @"Road Trip";

  NSURL* backgroundURL = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                                 pathForResource:@"CarRunning" 
                                                 ofType:@"aif"]];
  backgroundAudioPlayer = [[AVAudioPlayer alloc]
                           initWithContentsOfURL:backgroundURL error:nil];
  backgroundAudioPlayer.numberOfLoops = -1;
  [backgroundAudioPlayer prepareToPlay];

  NSURL* burnRubberURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"BurnRubber" ofType:@"aif"]];
  AudioServicesCreateSystemSoundID((__bridge CFURLRef)burnRubberURL, &burnRubberSoundID);

}

- (void)viewDidUnload
{
    [self setCar:nil];
    [self setTestDriveButton:nil];
    [self setBackgroundImage:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
  //return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
  return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)TestDrive:(id)sender {
  AudioServicesPlaySystemSound(burnRubberSoundID);
  [self performSelector:@selector(playCarSound) withObject:self afterDelay:.2];

  CGPoint center = CGPointMake(car.center.x, self.view.frame.origin.y + car.frame.size.height/2);
  [UIView animateWithDuration:3 animations:^ {
    car.center = center;
  }
                   completion:^(BOOL finished) {
                     [self rotate];
                   }];
}

-(void)playCarSound {
  [backgroundAudioPlayer play];
}

- (void)rotate {
  CGAffineTransform transform = CGAffineTransformMakeRotation(M_PI);

  void (^animation) () = ^() {
    car.transform = transform;
  };

  void (^completion) (BOOL) = ^ (BOOL finished) {
    [self returnCar];
  };

  [UIView animateWithDuration:3 animations:animation completion:completion];

}

- (void)returnCar {
  CGPoint center = CGPointMake(car.center.x, self.view.frame.origin.y + self.view.frame.size.height - car.frame.size.height/2);

  void (^animation)() = ^() {
    car.center = center;
  };

  void (^completion)(BOOL) = ^(BOOL finished) {
    [self continueRotation];
  };

  [UIView animateWithDuration:3 animations:animation completion:completion];

}

- (void)continueRotation {
  CGAffineTransform transform = CGAffineTransformMakeRotation(0);

  void (^animation)() = ^() {
    car.transform = transform;
  };

  void (^completion)(BOOL) = ^(BOOL finished) {  //Unused variable 'completion'
    [backgroundAudioPlayer stop];
    [backgroundAudioPlayer prepareToPlay];
  };

  [UIView animateWithDuration:3 animations:animation completion:nil];

}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:50:54.053

That warning simply means that you've instantiated a variable but are not using it anywhere in the code.

But it's a warning, your code will still compile and should work fine. It's just telling you there's no reason to instantiate something if it's never gonna be used.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T18:51:07.770

The problem is that you forgot to use the variable `completion` in the line:

```
[UIView animateWithDuration:3 animations:animation completion:nil];
                                                              ^^^
                                                              Here 
```

So change that line to this:

```
[UIView animateWithDuration:3 animations:animation completion:completion]; 
```

Also, note that you can write your code like this:

```
- (void)continueRotation
{
    [UIView animateWithDuration:3 animations:^{
        car.transform = CGAffineTransformMakeRotation(0);
    } completion:^(BOOL finished) {
        [backgroundAudioPlayer stop];
        [backgroundAudioPlayer prepareToPlay];
    }];
} 
```

# ruby - 从 Ruby 中的现有列表创建哈希表

> ID：10197201
> 
> 赞同：0
> 
> 时间：2012-04-17T18:48:55.943
> 
> 标签：ruby, hash

我有一个包含一组项目的列表，例如“学生 ID”、“姓名”、“地址”、“分数”、“徽章 ID”。如何使用不同的键从这个现有列表创建一个哈希表（将原始列表保留在单独的变量名中）？

我努力了

```
new_school=Hash.new(old_school)  // ruby 
```

但我不知道如何将badge_ID 字段分配为哈希的新键。

我在这里先向您的帮助表示感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:25:26.893

另外，请注意您是否可能意味着为一个对象获取一组值并将它们转换为哈希值。像这样：

```
[123, 'Jim Bob', '123 Fake St', 90, 321] 
```

进入这个：

```
{:student_id => 123,
  :name => 'Jim Bob',
  :address => '123 Fake St',
  :score => 90,
  :badge_id => 321} 
```

如果是这样，你可以这样做：

```
keys = [:student_id, :name, :address, :score, :badge_id]
values = [123, 'Jim Bob', '123 Fake St', 90, 321]
Hash[*keys.zip(values).flatten] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:21:44.303

您可以使用 ActiveSupport gem 将数组（或任何其他可枚举对象）转换为哈希：

```
objects.index_by do |object|
  <code to calculate the hash key>
end

objects.group_by do |object|
  <code to calculate the hash key>
end 
```

#index_by 方法将从列表中生成散列单个对象的值，而 #group_by 方法将使散列值成为映射到该散列键的对象的数组

计算哈希键的代码可以像引用每个对象的属性一样简单。

# windows - Windows + wmic + 内存

> ID：10197204
> 
> 赞同：2
> 
> 时间：2012-04-17T18:49:10.187
> 
> 标签：windows, memory, cmd, wmic

我想在批处理脚本中汇总所有名为“test.exe”的程序的已用内存。我可以使用以下命令来获取所有相应进程的内存使用情况：

```
C:\> wmic process where name="test.exe" get workingsetsize | findstr /v "WorkingSetSize"
55758848
66174976 
```

所以，我想我想将所有这些值与 FOR 循环相加。以下命令将仅显示 i 变量，但仍然出现附加错误。

```
C:\> for /F %i IN ('wmic process where name="test.exe" get workingsetsize ^| findstr /v "WorkingSetSize"') DO echo %i
 test.exe - Invalid alias verb. 
```

如何更改该命令以将所有使用的内存加在一起并输出它，它必须在 CMD 中工作，最好与我的命令非常相似。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T21:18:40.793

您的 FOR 语句失败，因为它`=`是一个标记分隔符，并且它被批处理解析器剥离。如果您将其转义为`^=`.

WMIC 有一个不幸的“特性”，即每当它的输出通过管道传输时，它会在每行输出的末尾包含一个额外的回车符 (0x0D)，并在输出的末尾加上一个额外的行。这可能会导致 FOR 循环中出现多余不需要的行的问题。通过更改 FINDSTR 以查找至少一位而不是缺少标题行，您的情况很容易解决。

要获得总和，您只需在循环中使用 SET /A （在首先初始化 SUM 变量之后）。

```
>set SUM=0
>for /F %i IN ('wmic process where name^="test.exe" get workingsetsize ^| findstr "[0-9]"') DO set /a SUM+=%i 
```

***但是***- Windows CMD 中的数学仅限于 32 位有符号整数支持。您的总和很容易超过最大允许值 2,147,483,647。最好使用 PowerShell 或 CSCRIPT 来执行 VBS 或 JScript 程序。所有这些替代方案都支持长整数（64 位）。

# javascript - 在 for 循环中创建对象。我错过了一点标记

> ID：10197208
> 
> 赞同：0
> 
> 时间：2012-04-17T18:49:27.073
> 
> 标签：javascript

我想要一个 for 循环创建对象作为父对象的子对象。通常，我会在不使用 for 循环的情况下声明对象，如下所示：

```
 var mObj = {};
 mObj.obj1 = {};
 mObj.obj2 = {};
 mObj.obj3 = {};
 mObj.obj3.firstname = "john";
 mObj.obj3.lastname = "superfly"; 
```

现在假设我想使用 for 循环来创建父对象“mObj”的子对象。

这是我出错的地方：

```
var mArr = ["firstname","lastname","email"]; // This array holds the keys for the   objects

 var mObj = {};

 var len = (mArr.length);

 for(var i=0; i<len; i++){

      var obj+i = {}
      mObj = obj+i;
      mObj.obj + i.mArr[i] = ""

    } 
```

因此，结果将是：

```
 mObj.obj1.firstname = "";
 mObj.obj2.lastname = "";
 mObj.obj3.email = ""; 
```

我似乎无法用在 for 循环中创建的计数器来命名对象，例如：

```
obj1
obj2
obj3 
```

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T18:52:25.920

`var obj+i = {}`是无效的语法。

尝试这个：

```
mObj['obj' + i] = {}; 
```

如果 i == 1，则给出 mObj['obj1'] = {};

这相当于：

```
mObj.obj1 
```

但是在动态构建时，你必须使用

```
mObj['obj' + i] 
```

格式化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T18:53:16.107

```
var mArr = ["firstname","lastname","email"],
    mObj = {},
    len  = (mArr.length),
    i    = 0;

 for(; i<len; i++){
      myObj['obj' + i] = {}
      myObj['obj' + i].mArr[i] = ""
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T18:52:36.170

您需要使用括号语法来分配动态变量。例如：

```
var sampleObj = {};

for(var j = 0; j < 3; j++)
{
    sampleObj["obj" + j] = { test: j };
} 
```

这应该产生以下对象：

```
{
    "obj1" : { test: 1 },
    "obj2" : { test: 2 },
    "obj3" : { test: 3 }
} 
```

然后运行循环后，您可以有效地使用此语句：

```
var testVal = sampleObj.obj1.test; 
```

# c# - 显示错误页面的 Web 浏览器

> ID：10197209
> 
> 赞同：0
> 
> 时间：2012-04-17T18:49:27.277
> 
> 标签：c#, fiddler

我以前从未使用过提琴手核心。但是在我的应用程序中第一次使用它之后，一个奇怪的问题正在发生。每当我的应用程序运行时，Web 浏览器都可以正常工作。但其他时候那些都显示错误页面。我知道我对提琴手核心做错了。我在这里发送我的代码。代码运行良好。但是我的代码中有一些东西，所以我遇到了这个问题。请查看代码，让我知道我做错了什么。

```
 static bool bUpdateTitle = true;
    static Proxy oSecureEndpoint;
    static string sSecureEndpointHostname = "localhost";
    static int iSecureEndpointPort = 1106;

    private void button1_Click(object senderr, EventArgs e)
    {
        List<Fiddler.Session> oAllSessions = new List<Fiddler.Session>();
        Fiddler.FiddlerApplication.OnNotification += delegate(object sender, NotificationEventArgs oNEA) { MessageBox.Show("** NotifyUser: " + oNEA.NotifyString); };

        Fiddler.FiddlerApplication.BeforeRequest += delegate(Fiddler.Session oS)
        {
            oS.bBufferResponse = false;
            Monitor.Enter(oAllSessions);
            oAllSessions.Add(oS);
            Monitor.Exit(oAllSessions);

            if (oS.hostname=="localhost")
            {
                oS.utilCreateResponseAndBypassServer();
                oS.oResponse.headers.HTTPResponseStatus = "200 Ok";
                oS.oResponse["Content-Type"] = "text/html; charset=UTF-8";
                oS.oResponse["Cache-Control"] = "private, max-age=0";
                oS.utilSetResponseBody("<html><body><font size=10>Restricted</font></body></html>");
            }
        };
        Fiddler.CONFIG.IgnoreServerCertErrors = false;
        FiddlerApplication.Prefs.SetBoolPref("fiddler.network.streaming.abortifclientaborts", true);
        FiddlerCoreStartupFlags oFCSF = FiddlerCoreStartupFlags.Default;
        Fiddler.FiddlerApplication.Startup(0, oFCSF);
        oSecureEndpoint = FiddlerApplication.CreateProxyEndpoint(iSecureEndpointPort, true, sSecureEndpointHostname);
    }
    public static void DoQuit()
    {
        if (null != oSecureEndpoint) oSecureEndpoint.Dispose();
        Fiddler.FiddlerApplication.Shutdown();
    }

    private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        DoQuit();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:35:39.150

正如在 Fiddler 讨论组中对您留下的相同消息的回复中所提到的，这意味着您在没有正确调用 Shutdown() 的情况下至少运行了一次程序（例如，因为它崩溃了）。当您的程序未运行时，从工具 > Internet 选项 > 连接 > LAN 设置中清除不正确的代理设置。

# c# - 为什么我的 Windsor 隐式代表工厂注册不起作用？

> ID：10197213
> 
> 赞同：2
> 
> 时间：2012-04-17T18:49:51.603
> 
> 标签：c#, castle-windsor, ioc-container

我正试图让它工作 - 但我一定错过了一些东西 [http://docs.castleproject.org/Windsor.Typed-Factory-Facility-delegate-based-factories.ashx#Registering_factories_implicitly_1](http://docs.castleproject.org/Windsor.Typed-Factory-Facility-delegate-based-factories.ashx#Registering_factories_implicitly_1)

谁能发现它？

```
[TestClass]
public class UnitTest1 {

    [TestMethod]
    public void DelegateFactoryTest() {
        var container = new WindsorContainer();
        container.Register(
            Component.For<AComponent>().LifeStyle.Transient,
            Component.For<IAService>().ImplementedBy<AService>().LifeStyle.Transient
            );

        var comp = container.Resolve<AComponent>();
        Assert.IsNotNull(comp);
        Assert.IsNotNull(comp.GetService());
    }

    class AComponent {
        readonly Func<IAService> _serviceDelegate;

        public AComponent(Func<IAService> serviceDelegate) {
            _serviceDelegate = serviceDelegate;
        }

        public IAService GetService() {
            return _serviceDelegate();
        }
    }

    interface IAService { }

    class AService : IAService { }
} 
```

得到以下错误

Castle.MicroKernel.Handlers.HandlerException：无法创建组件“Sandbox.Windsor.Tests.UnitTest1+AComponent”，因为它需要满足依赖关系。'Sandbox.Windsor.Tests.UnitTest1+AComponent' 正在等待以下依赖项： - 服务 'System.Func`1[[Sandbox.Windsor.Tests.UnitTest1+IAService, Sandbox.Windsor.Tests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]' 未注册。

如果我明确注册，一切都很好

```
container.Register(
    Component.For<AComponent>().LifeStyle.Transient,
    Component.For<IAService>().ImplementedBy<AService>().LifeStyle.Transient,
    Component.For<Func<IAService>>().Instance(()=>new AService()).LifeStyle.Transient
); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T01:18:20.227

你不见了`TypedFactoryFacility`。

```
container.AddFacility<TypedFactoryFacility>() 
```

# java - Apache Commons 配置 - 无法加载/使用配置文件

> ID：10197218
> 
> 赞同：4
> 
> 时间：2012-04-17T18:50:15.313
> 
> 标签：java, configuration, apache-commons

我一直在尝试配置 Java 应用程序（特别是我的集成测试），但绝对没有成功。我最初有一个 XMLConfiguration，我可以毫无问题地加载和使用它。我的目录设置如下所示：

*   源代码
    *   测试
        *   爪哇
            *   我的包裹
        *   资源

之前，我在资源目录中有一个文件 myconfig.xml。我像这样加载它：

```
private static XMLConfiguration configuration = null;
public static void configure() {
    try {
        configuration = new XMLConfiguration("myconfig.xml");
    }
    catch (ConfigurationException e) {
        System.err.println(e);
    }
} 
```

现在我正在尝试让用户可以通过在 /etc 或 /home 或其他任何内容中编写配置文件来自己配置应用程序，因此我在同一位置创建了一个名为 config-test.xml 的新文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<configuration>
    <!-- Attempt to load configuration provided on the system -->
    <xml fileName="/etc/myconf/myconfig.xml" config-optional="true" />

    <!-- Load default configuration from the classpath -->
    <xml fileName="myconfig.xml" />
</configuration> 
```

文件 /etc/myconf/myconfig.xml 不存在，但这就是使它成为可选的全部意义。我尝试了几种不同的方法来加载我的配置，包括文档是如何做到的：[http](http://commons.apache.org/configuration/userguide/howto_configurationbuilder.html) ://commons.apache.org/configuration/userguide/howto_configurationbuilder.html 。我目前拥有的是以下内容：

```
private static CombinedConfiguration configuration = null;
public static void configure() {
    try {
        DefaultConfigurationBuilder builder = 
            new DefaultConfigurationBuilder("config-test.xml");
        configuration = builder.getConfiguration(true);
        System.err.println("Yay");
    }
    catch (ConfigurationException e) {
        System.err.println("Herp");
    }
    catch (Exception e) {
        System.err.println("Derp");
    }
} 
```

当我运行集成测试时，我看不到 Yay，我看不到 Herp，我看不到 Derp。如果我`println`在尝试加载内容之前放置 a ，它会打印，所以`configure`被调用。我从公共配置中获得的输出为：

```
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running TestSuite
13:36:57.752 [main] DEBUG o.a.c.c.ConfigurationUtils - ConfigurationUtils.locate(): base is null, name is config-test.xml
13:36:57.753 [main] DEBUG o.a.c.c.DefaultFileSystem - Could not locate file config-test.xml at null: no protocol: config-test.xml
13:36:57.756 [main] DEBUG o.a.c.c.ConfigurationUtils - Loading configuration from the context classpath (config-test.xml)
13:36:57.766 [main] DEBUG o.a.c.c.DefaultConfigurationBuilder - Creating configuration null with name null
13:36:57.795 [main] DEBUG o.a.c.c.ConfigurationUtils - ConfigurationUtils.locate(): base is null, name is config-test.xml
13:36:57.795 [main] DEBUG o.a.c.c.DefaultFileSystem - Could not locate file config-test.xml at null: no protocol: config-test.xml
13:36:57.796 [main] DEBUG o.a.c.c.ConfigurationUtils - Loading configuration from the context classpath (config-test.xml)
13:36:57.800 [main] DEBUG o.a.c.c.DefaultConfigurationBuilder - Creating configuration null with name null
Tests run: 56, Failures: 2, Errors: 0, Skipped: 16, Time elapsed: 2.589 sec <<< FAILURE!

Results :

Failed tests:   initialize(mypackage.ImportTestIT): org/apache/commons/beanutils/PropertyUtils
  initialize(mypackage.TransferTestIT): org/apache/commons/beanutils/PropertyUtils

Tests run: 56, Failures: 2, Errors: 0, Skipped: 16 
```

这些初始化方法只是调用`configure`然后尝试从加载的配置中获取数据。我已经用这个工作了几个小时了，真的可以用另一双眼睛。有任何想法吗？有什么我可以改变但我没有提到会影响这一点的吗？谢谢。

**编辑#1（下午 1:58）：**在确保 beanutils 在类路径上之后，我现在得到了堆栈跟踪的残酷爆炸，它开始于

```
Running TestSuite
14:00:16.088 [main] DEBUG o.a.c.c.ConfigurationUtils - ConfigurationUtils.locate(): base is null, name is config-test.xml
14:00:16.089 [main] DEBUG o.a.c.c.DefaultFileSystem - Could not locate file config-test.xml at null: no protocol: config-test.xml
14:00:16.093 [main] DEBUG o.a.c.c.ConfigurationUtils - Loading configuration from the context classpath (config-test.xml)
14:00:16.103 [main] DEBUG o.a.c.c.DefaultConfigurationBuilder - Creating configuration null with name null
14:00:16.178 [main] DEBUG o.a.c.c.ConfigurationUtils - ConfigurationUtils.locate(): base is file:///home/pgarrity/projects/myproject/target/test-classes/config-test.xml, name is /etc/myconf/myproject/myconfig.xml
14:00:16.179 [main] DEBUG o.a.c.c.DefaultFileSystem - Could not locate file /etc/myconf/myproject/myconfig.xml at file:///home/pgarrity/projects/myproject/target/test-classes/config-test.xml: /etc/myconf/myproject/myconfig.xml (No such file or directory)
14:00:16.181 [main] DEBUG o.a.c.c.DefaultConfigurationBuilder - Load failed for optional configuration xml: Cannot locate configuration source /etc/myconf/myproject/myconfig.xml
14:00:16.185 [main] WARN  o.a.c.c.DefaultConfigurationBuilder - Internal error
org.apache.commons.configuration.ConfigurationException: Cannot locate configuration source /etc/myconf/myproject/myconfig.xml
at org.apache.commons.configuration.AbstractFileConfiguration.load(AbstractFileConfiguration.java:259) ~[commons-configuration-1.8.jar:1.8]
at org.apache.commons.configuration.AbstractFileConfiguration.load(AbstractFileConfiguration.java:238) ~[commons-configuration-1.8.jar:1.8] 
```

等等等等……但我现在确实看到了“耶”。~~现在我没有得到的是，它似乎没有在寻找我的非可选配置源，或者假设它位于我从未告诉它查找的位置。~~

**编辑#2：** 我仔细查看了我的输出，并埋头于来自公共的抱怨中，我发现它似乎最终加载了正确的文件。我想我可能有它的工作？当我像这样加载它时，也许我的属性路径会改变......我有一些东西要尝试。不管怎样，我问的问题已经解决了。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T18:51:19.453

You seem to be missing commons-beanutils on your classpath. Make sure that jar is there.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-11T23:14:47.477

噗。多[页文档](https://commons.apache.org/proper/commons-configuration/userguide/howto_filebased.html)讨论了如何加载配置文件。但是他们是否忘记在 c:\Users\USER\FOO\bar.xml 等绝对 Windows 路径中实现文件 URL 检测？Commons 1.9 将显示这个谨慎的信息，

```
DEBUG DefaultFileSystem - Could not locate file C:\Users\USER\FOO\bar.xml at null: unknown protocol: c 
```

[https://github.com/apache/commons-configuration/blob/CONFIGURATION_1_9/src/main/java/org/apache/commons/configuration/DefaultFileSystem.java#L281](https://github.com/apache/commons-configuration/blob/CONFIGURATION_1_9/src/main/java/org/apache/commons/configuration/DefaultFileSystem.java#L281)

# c - 在 C 中为结构数组重新分配内存

> ID：10197219
> 
> 赞同：0
> 
> 时间：2012-04-17T18:50:22.213
> 
> 标签：c, arrays, pointers, struct, realloc

我在使用结构数组时遇到问题。我需要逐行读取文本文件，并并排比较这些值。例如“妈妈”会返回 2 ma , 1 am 因为你有妈妈。我有一个结构：

```
typedef struct{
    char first, second;
    int count;
} pair; 
```

我需要为整个字符串创建一个结构数组，然后比较这些结构。我们还介绍了内存分配，因此我们必须为任何大小的文件执行此操作。这就是我真正遇到麻烦的地方。如何为结构数组正确重新分配内存？这是我现在的主要内容（不编译，有错误显然有问题）。

```
int main(int argc, char *argv[]){
//allocate memory for struct
pair *p = (pair*) malloc(sizeof(pair));
//if memory allocated
if(p != NULL){
    //Attempt to open io files
    for(int i = 1; i<= argc; i++){
        FILE * fileIn = fopen(argv[i],"r");
        if(fileIn != NULL){
            //Read in file to string
            char lineString[137];
            while(fgets(lineString,137,fileIn) != NULL){
                //Need to reallocate here, sizeof returning error on following line
                //having trouble seeing how much memory I need
                pair *realloc(pair *p, sizeof(pair)+strlen(linestring));
                int structPos = 0;
                for(i = 0; i<strlen(lineString)-1; i++){
                    for(int j = 1; j<strlen(lineSTring);j++){
                        p[structPos]->first = lineString[i];
                        p[structPos]->last = lineString[j];
                        structPos++;
                    }
                }
            }
        }
    }
}
else{
    printf("pair pointer length is null\n");
} 
```

}

如果有更好的方法，我很乐意改变事情。我必须使用上述结构，必须有一个结构数组，并且必须使用内存分配。这些是唯一的限制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:02:22.473

为结构数组分配内存就像为一个结构分配内存一样简单：

```
pair *array = malloc(sizeof(pair) * count); 
```

然后您可以通过订阅“数组”来访问每个项目：

```
array[0] => first item
array[1] => second item
etc 
```

关于 realloc 部分，而不是：

```
pair *realloc(pair *p, sizeof(pair)+strlen(linestring)); 
```

（这在语法上无效，看起来像是 realloc 函数原型及其同时调用的混合），您应该使用：

```
p=realloc(p,[new size]); 
```

实际上，您应该使用不同的变量来存储 realloc 的结果，因为在内存分配失败的情况下，它会返回 NULL，同时仍然保留已分配的内存（然后您将失去它在内存中的位置）。但是在大多数 Unix 系统上，当进行临时处理（不是一些繁重的任务）时，达到 malloc/realloc 返回 NULL 的点在某种程度上是一种罕见的情况（你必须用尽所有虚拟空闲内存）。还是最好写：

```
pair*newp=realloc(p,[new size]);
if(newp != NULL) p=newp;
else { ... last resort error handling, screaming for help ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T23:01:43.397

因此，如果我做对了，您会计算成对字符出现的次数吗？当您可以将频率表保存在 64KB 数组中时，为什么还要使用嵌套循环和使用该对结构，这更简单，速度也快了几个数量级。

这大致是我会做的（剧透警告：特别是如果这是家庭作业，请不要只是复制/粘贴）：

```
#include <stdlib.h>
#include <stdio.h>
#include <ctype.h>

void count_frequencies(size_t* freq_tbl, FILE* pFile)
{
    int first, second;

    first = fgetc(pFile);
    while( (second = fgetc(pFile)) != EOF)
    {
        /* Only consider printable characters */
        if(isprint(first) && isprint(second))
            ++freq_tbl[(first << 8) | second];

        /* Proceed to next character */
        first = second;
    }
}

int main(int argc, char*argv[])
{
    size_t* freq_tbl = calloc(1 << 16, sizeof(size_t));;
    FILE* pFile;
    size_t i;

    /* Handle some I/O errors */
    if(argc < 2)
    {
        perror ("No file given"); 
        return EXIT_FAILURE;
    }

    if(! (pFile = fopen(argv[1],"r")))
    {
        perror ("Error opening file"); 
        return EXIT_FAILURE;
    }

    if(feof(pFile))
    {
        perror ("Empty file"); 
        return EXIT_FAILURE;
    }

    count_frequencies(freq_tbl, pFile);

    /* Print frequencies */
    for(i = 0; i <= 0xffff; ++i)
        if(freq_tbl[i] > 0)
            printf("%c%c : %d\n", (char) (i >> 8), (char) (i & 0xff), freq_tbl[i]);
    free(freq_tbl);

    return EXIT_SUCCESS;
} 
```

抱歉，位操作和十六进制表示法。我只是碰巧在这种 char 表的上下文中喜欢它们，但为了清楚起见，它们可以用乘法和加法等替换。

# php - Pre Populating Paypal amount through an email link

> ID：10197230
> 
> 赞同：1
> 
> 时间：2012-04-17T18:50:44.100
> 
> 标签：php, email, paypal

I am creating a PHP form which takes the customer's information and the amount they want to spend and when the submit button is hit the details are sent to my email address.

This is where I have the problem. I want to then send them a link to the PayPal account to complete the purchase. However I want the amount to be pre-populated based on the amount they selected from the forum.

Simply, can this be done?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:58:22.743

您需要将表单的操作参数从[https://www.paypal.com/cgi-bin/webscr](https://www.paypal.com/cgi-bin/webscr)更改为 www.someurl.com/page-that-you-can-edit.php

然后，您需要编写脚本以通过电子邮件向您发送您想要的任何信息，然后使用适当的 paypal 变量将买家静默重定向到 PayPal（您通过设置标题来执行此操作）： `cmd=_donations&business=yourpaypal@email.com&amount=xx.xx&item_name=your items name&[any other website payment standard variables ]`

# bitmap - Creating a SWF with Frames and Bitmaps using AS3SWF

> ID：10197240
> 
> 赞同：0
> 
> 时间：2012-04-17T18:51:08.603
> 
> 标签：bitmap, flash, actionscript-3

I need to collect and import a mass of images into Flash. The cleanest way to do this seems to be using [AS3SWF](https://github.com/claus/as3swf) to create a timeline with 1 image per frame.

Does anyone have a code sample for something like this? AS3SWF looks great, but it's not heavy on documentation.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T20:35:46.700

前段时间我玩过 AS3SWF，发现[SWF 格式规范](http://www.adobe.com/content/dam/Adobe/en/devnet/swf/pdf/swf_file_format_spec_v10.pdf)(pdf) 和[文档](http://learn.adobe.com/wiki/display/AVM2/5.+AVM2+instructions)非常有用。我仍然没有发现它特别容易，因为我没有适当的编程背景/组装经验。

解决您的问题可能有更简单的方法：[SWFTools](http://wiki.swftools.org/wiki/Main_Page)。它们是一堆开源实用程序，其中一些可能会帮助您完成任务，例如`jpg2swf`和`png2swf`

我目前在 OSX 上，所以已经下载了源代码并使用了典型的命令：

```
sudo ./configure
sudo make
sudo make install 
```

我看到 Windows 已经有一个[exe](http://www.swftools.org/swftools-2012-04-08-0857.exe)，所以它可能更简单。我仍然想你会从命令行调用实用程序。`fl.runCommandLine()`这在 JSFL 中使用未记录函数时会派上用场。这是基于我桌面上的所有 .png 文件编译 swf 'slideshow' 的基本调用：

```
./png2swf -o ~/Desktop/desk.swf ~/Desktop/*.png 
```

每个实用程序都有很多选项，这里是一个示例：

```
jpeg2swf

Usage: ./jpeg2swf [-options [value]] imagefiles[.jpg]|[.jpeg] [...]

-o , --output <outputfile>     Explicitly specify output file. (otherwise, output.swf will be used)
-q , --quality <quality>       Set compression quality (1-100, 1=worst, 100=best)
-r , --rate <framerate>        Set movie framerate (frames per second)
-z , --zlib <zlib>             Enable Flash 6 (MX) Zlib Compression
-M , --mx                      Use Flash MX H.263 compression (use for correlated images)
-x , --xoffset <offset>        horizontally offset images by <offset>
-y , --yoffset <offset>        vertically offset images by <offset>
-X , --width <width>           Force movie width to <width> (default: autodetect)
-Y , --height <height>         Force movie height to <height> (default: autodetect)
-T , --flashversion <version>      Set flash file version to <version>
-v , --verbose <level>         Set verbose level to <level> (0=quiet, 1=default, 2=debug)
-V , --version                 Print version information and exit
-f , --fit-to-movie            Fit images to movie size
-e , --export <assetname>          Make importable as asset with <assetname> 
```

[此外，在Keith Peters 的这篇旧（2004 年）文章](http://www.bit-101.com/blog/?p=547)中可能值得一试。

# c++ - What should be the sizeof(int) on a 64-bit machine?

> ID：10197242
> 
> 赞同：83
> 
> 时间：2012-04-17T18:51:09.880
> 
> 标签：c++, c, sizeof

> **Possible Duplicate:**
> [size of int, long, etc](https://stackoverflow.com/questions/589575/size-of-int-long-etc)
> [Does the size of an int depend on the compiler and/or processor?](https://stackoverflow.com/questions/2331751/does-the-size-of-an-int-depend-on-the-compiler-and-or-processor)
> [What decides the sizeof an integer?](https://stackoverflow.com/questions/9689049/what-decides-the-sizeof-an-integer)

I'm using a `64-bit` machine.

```
$ uname -m
x86_64
$ file /usr/bin/file
/usr/bin/file: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.32, stripped
$ 
```

When I ran the following program, I got the `sizeof(int)` as `4-bytes`.

```
#include <stdio.h>

int main(void)
{
    printf("sizeof(int) = %d bytes\n", (int) sizeof(int));

    return 0;
} 
```

If I'm running a `16-`, `32-` and `64-` bit machine, then doesn't it mean that the size of an `integer` is `16-`, `32-` and `64-` bit respectively?

In my machine, I found the `WORD_BIT` is `32`. Shouldn't it be `64` on a `64-bit` machine?

```
$ getconf WORD_BIT
32
$ 
```

And, shouldn't the `sizeof(int)` be `64-bits` (`8 bytes`) in the above case?

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-04-17T18:57:17.927

在任何 64 位 C/C++ 编译器上，指针的大小应该是 8 字节，但不一定是 int 的大小。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-04-17T18:55:16.370

不一定；“64 位机器”可能意味着很多东西，但通常意味着 CPU 有那么大的寄存器。类型的大小由编译器决定，它与实际硬件没有任何关系（尽管通常是这样）；事实上，同一台机器上的不同编译器可以有不同的值。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-04-17T18:55:06.980

并不真地。为了向后兼容，它是 32 位。
如果你想要 64 位`long`，`size_t`或者`int64_t`

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-04-17T18:55:58.513

在 C++ 中，`int`没有明确指定的大小。它只是告诉您它必须至少是 的大小`short int`，而它必须至少与 一样大`signed char`。尽管 sizeof(char) 被定义为 1，但 in 位的大小`char`也没有明确指定。如果您想要 64 位 int，C++11 指定`long long`至少为 64 位。

# php - DES/ECB/PKCS5Padding decryption in PHP

> ID：10197249
> 
> 赞同：3
> 
> 时间：2012-04-17T18:51:35.217
> 
> 标签：php, encryption, des

I'm in the need of decrypting with PHP (or Javascript) some service calls. I've spent all the day trying to accomplish, this, but I've been unable to decrypt it properly.

As a reference, the service provider sent me the following decryption sample code in Java:

```
DESKeySpec dks = new DESKeySpec("keyword".getBytes()); 
SecretKeyFactory keyFactory = SecretKeyFactory.getInstance("DES");
SecretKey key = keyFactory.generateSecret(dks);

Cipher cipher = Cipher.getInstance("DES/ECB/PKCS5Padding");
SecureRandom sr = new SecureRandom();  
cipher.init( Cipher.DECRYPT_MODE, key ,sr); 

byte b[] = response.toByteArray();      
byte decryptedData[] = cipher.doFinal( b ); 
```

I think I'm in the correct path by using:

```
$td = mcrypt_module_open(MCRYPT_DES, '', 'ecb', '');
$iv_size = mcrypt_enc_get_iv_size($td);
$iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
$key = substr($keyword, 0, mcrypt_enc_get_key_size($td));
mcrypt_generic_init($td, $key, $iv);
$decrypted = mdecrypt_generic($td, $data);
$decrypted = pkcs5_unpad($decrypted); 
```

But, frankly, I'm sure I'm messing everything with the $iv creationg and $keyword setup (or maybe with $data or $decrypted types?). The pkcs5_unpad function is as follows:

```
function pkcs5_unpad($text)
{
   $pad = ord($text{strlen($text)-1});
   if ($pad > strlen($text)) return false;
   return substr($text, 0, -1 * $pad);
} 
```

I'm not only a noob on php, but also on cryptography techniques... could you please help me to solve this issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T00:17:38.147

确保您的密钥由相同的字节组成（字符串的编码可能不同），并为它提供一个用零填充的 IV。ECB 模式不使用 IV（并且 PHP 手册指定了这么多），但如果你给它一个默认值，它会全部为零 - IV 将与第一个纯文本块进行异或，因此将其设置为全零将取消该操作。此外，请确保输入的密码数据相同。首先忽略填充，您应该能够在取消填充之前检查结果是否正确。

# jquery - How do i append a list to a jquery-forms-plugin before form submit?

> ID：10197253
> 
> 赞同：0
> 
> 时间：2012-04-17T18:51:41.557
> 
> 标签：jquery, forms, jquery-forms-plugin

Im using the jquery-forms-plugin and its working great! But now i want to append an array in the beforeSubmit function.

```
questions = ['hi?','yo?','lol??'];
formData.push({name:'questions',value:questions}); 
```

But when i recieve this at my webserver (Using flask.py) it comes just as a plain string. like this: hi?,yo?,lol??

Any input why it does not come as an array or list?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:00:26.167

在`formData.push({name:'questions',value:questions});`你所拥有的任何东西中`questions`都会遇到字符串，所以你找到了那个纯字符串。

因此，您可以使用如下所示的字符串，`questions`并且可以在 python 中显式解析该纯 CSV 字符串。

```
questions = "'hi?','yo?','lol??'"; 
```

您可以再次应用以下技巧：

```
formData.push({name:'questions[0]',value:'hi?'});
formData.push({name:'questions[1]',value:'yo?'});
formData.push({name:'questions[2]',value:'lol??'}); 
```

所以你假设`questions`在服务器端有列表。

# ruby-on-rails - 每个 'when' 块中具有多个值的 case 语句

> ID：10197254
> 
> 赞同：354
> 
> 时间：2012-04-17T18:51:42.003
> 
> 标签：ruby-on-rails, ruby, syntax, switch-statement

我可以描述我正在寻找的最佳方式是向您展示我迄今为止尝试过的失败代码：

```
case car
  when ['honda', 'acura'].include?(car)
    # code
  when 'toyota' || 'lexus'
    # code
end 
```

我有大约 4 或 5 种不同的`when`情况，应该由大约 50 个不同的可能值触发`car`。有没有办法用块来做到这一点，`case`还是我应该尝试一个大块`if`？

* * *

## 回答 #1

> 赞同：765
> 
> 时间：2012-04-17T19:00:23.460

在`case`语句中，a`,`等价`||`于`if`语句中。

```
case car
   when 'toyota', 'lexus'
      # code
end 
```

[Ruby case 语句可以做的其他一些事情](http://www.skorks.com/2009/08/how-a-ruby-case-statement-works-and-what-you-can-do-with-it/)

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2012-04-17T19:21:23.087

您可能会利用 ruby​​ 的“splat”或扁平化语法。

这使得过度生长`when`的子句——如果我理解正确的话，每个分支你有大约 10 个值要测试——在我看来更具可读性。此外，您可以修改值以在运行时进行测试。例如：

```
honda  = ['honda', 'acura', 'civic', 'element', 'fit', ...]
toyota = ['toyota', 'lexus', 'tercel', 'rx', 'yaris', ...]
...

if include_concept_cars
  honda += ['ev-ster', 'concept c', 'concept s', ...]
  ...
end

case car
when *toyota
  # Do something for Toyota cars
when *honda
  # Do something for Honda cars
...
end 
```

另一种常见的方法是使用散列作为调度表，每个值的键`car`和值是封装您希望执行的代码的一些可调用对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-06-19T08:12:25.063

请记住 switch/case（case/when 等）只是比较*值*。我喜欢这种情况下的官方答案，用于简单的或字符串列表比较，但对于更奇特的条件/匹配逻辑，

```
case true
  when ['honda', 'acura'].include?(car)
    # do something
  when (condition1 && (condition2 || condition3))
    # do  something different
  else
    # do something else
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-23T23:23:22.073

将逻辑放入数据中的另一种好方法是这样的：

```
# Initialization.
CAR_TYPES = {
  foo_type: ['honda', 'acura', 'mercedes'],
  bar_type: ['toyota', 'lexus']
  # More...
}
@type_for_name = {}
CAR_TYPES.each { |type, names| names.each { |name| @type_for_name[type] = name } }

case @type_for_name[car]
when :foo_type
  # do foo things
when :bar_type
  # do bar things
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-04T18:13:14.320

你可以做这样的事情（灵感来自@pilcrow的回答）：

```
honda  = %w[honda acura civic element fit ...]
toyota = %w[toyota lexus tercel rx yaris ...]

honda += %w[ev_ster concept_c concept_s ...] if include_concept_cars

case car
when *toyota
  # Do something for Toyota cars
when *honda
  # Do something for Honda cars
...
end 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2021-11-15T15:10:25.153

**In a case statement, equivalent of && in an if statement.**

case coding_language when 'ror' && 'javascript' # code end

# apache-flex - 怎么知道是新的一个月？

> ID：10197256
> 
> 赞同：-1
> 
> 时间：2012-04-17T18:51:44.680
> 
> 标签：apache-flex, flex4, flash-builder

我想知道什么**时候**是**新月**。这样我就可以做一些操作，比如复制上个月的数据[例如。Category.Title] 从上个月 [Jan] 到下个月 [Feb]。

```
Month  Catagory
=====  ========

Jan => Category.Title 
Feb => New Category.Tile (copy based on Jan's data) 
```

如何构建逻辑以检测今天是新月份（以便我可以执行复制操作）？

基本上，我想检测新月什么**时候****开始**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:37:13.423

如果您只需要检查今天是否是一个月中的第一天的逻辑，则可以使用以下代码。

```
var d:Date = new Date();
if (d.date == 1) {
    //today is the first day in a month
} 
```

但是，根据您执行此操作的位置/时间，它可能不会产生您想要的效果。如果没有更多信息，我真的无法帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:37:14.353

您应该使用在提供的链接上找到的这个神话般的逻辑，然后从那里开始。几乎你需要找出当月的当前日期。假设今天是 4 月 15 日，那么您需要找出 2012 年 4 月有多少天，以及 4 月 15 日在哪里。然后让计数器计算剩余的天数，直到新的一个月（五月）开始。您还想确保您正在检查闰年。此链接还具有检查闰年的功能。我给你一个高层次的想法去得到你想要的东西。

[http://www.electrictoolbox.com/javascript-days-in-month/](http://www.electrictoolbox.com/javascript-days-in-month/)

非常感谢。

# objective-c - 从另一个子视图获取子视图

> ID：10197258
> 
> 赞同：0
> 
> 时间：2012-04-17T18:51:50.717
> 
> 标签：objective-c, xcode, cocoa

我的主窗口的内容视图设置如下：

```
 newContentView = [[CutoutView alloc]initWithFrame:window.frame];
     [window setContentView:newContentView];
     [newContentView release]; 
```

其中 CutoutView 是我的子类的名称。现在我想给它添加一个子视图，所以我做了以下，

```
filterView = [[FilterView alloc]initWithFrame:NSMakeRect(100, 100, 500, 500)]; 
    [newContentView addSubview:filterView];
    [filterView release]; 
```

一切正常，除了现在我想从我的 filterView 子类中调用方法，我想像这样得到它，但它不会工作。

```
FilterView *filter = [[NSApp delegate] contentView]; 
```

我在文档中读到，通过使用 contentView 它只“返回窗口层次结构中最高可访问的 NSView 对象”所以我尝试将以下内容添加到 addSubview

```
[newContentView addSubview:filterView positioned:NSWindowAbove relativeTo:nil]; 
```

但这对我需要做什么没有任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:48:22.443

The content view is really your CutoutView class so you should be using:

```
FilterView *filterView = [[[[[NSApp delegate] window] contentView] subviews] objectAtIndex:0]; 
```

But two cleaner ways are:

1) Use IBOutlets to keep track of your views and assign them via IB. 2) Use tags:

```
filterView.tag = 101; 
```

then use:

```
FilterView* filterView = [[[NSApp delegate] contentView] viewWithTag:101]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:30:41.453

ContentView 是您的窗口而不是应用程序委托的方法，因此如果您的应用程序委托中有一个 IBOutlet 为“窗口”的窗口，那么您需要使用：FilterView *filter = [[[NSApp delegate] window] contentView];

# c++ - 旋转二维正方形

> ID：10197264
> 
> 赞同：-2
> 
> 时间：2012-04-17T18:52:09.373
> 
> 标签：c++, opengl, rotation

我可以旋转 3D 对象，但它似乎不适用于 2D 对象。

我想将我的可移动（通过箭头）正方形向右旋转 90 度（旋转中心：正方形的中心）。我想出了以下代码：

```
class CSquare : public CObject {
    SPoint pnta;         //left top corner of a square
    uint16 len;          //length
    bool bFill, bRotate; //filled? rotating?
    GLubyte color[4];    //filling color
    float angle;         //rotate for this

public:
    CSquare();
    CSquare(const CSquare &sqr);
    CSquare(SPoint &a, uint16 l, bool fill = false);
    CSquare(uint16 x, uint16 y, uint16 l, bool fill = false);

    void draw();
    void toggleRotate();
    void setColor(GLubyte r, GLubyte g, GLubyte b, GLubyte a);
    void setPoint(uint16 x, uint16 y);

    SPoint getPoint();
    uint16 getPosX();
    uint16 getPosY();
    uint16 getLength();
};

void CSquare::draw() {
  glPushMatrix();
  if (bRotate) 
    if (++angle < 360.0f) 
    {
        glTranslatef(pnta.nX + len/2, pnta.nY + len/2, 0);
        glRotatef(90, 0, 0, 1);
    }
    else angle = 0.0f;

  if (bFill == true) glBegin(GL_QUADS);
  else glBegin(GL_LINE_LOOP);
    glColor4ubv(color);
    glVertex2i(pnta.nX, pnta.nY);
    glColor4ub(255, 255, 0, 0); //temporary to visualise rotation effect
    glVertex2i(pnta.nX + len, pnta.nY);
    glColor4ub(0, 255, 0, 0);
    glVertex2i(pnta.nX + len, pnta.nY + len);
    glColor4ub(0, 0, 255, 0);
    glVertex2i(pnta.nX, pnta.nY + len);
  glEnd();
  glPopMatrix();
} 
```

我的代码在一定程度上起作用：它确实旋转了对象，但没有在所需点上以中心为中心。

PS。如果您需要，我可以上传完整的应用程序（Visual Studio 2010 项目，使用 FreeGLUT 和 SDL）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:06:52.840

我将假设您实际上并没有按固定角度旋转：`glRotatef(90, 0, 0, 1);`如果这不是转录错误，您应该先修复它。

也就是说，旋转总是围绕原点发生。您在 处绘制您的形状`(pnta.nX, pnta.nY)`。您似乎想围绕形状的中心旋转。为此，您必须首先将该点移动到原点。然后执行旋转，然后将点移回您想要的位置：

```
glPushMatrix();
glTranslatef(pnta.nX + len/2, pnta.nY + len/2, 0);
glRotatef(angle, 0, 0, 1);
glTranslatef(-pnta.nX - len/2, -pnta.nY - len/2, 0);
drawShape();
glPopMatrix(); 
```

默认情况下，我们经常使用以原点为中心的几何图形来建模对象。这样，我们可以简单地旋转对象，然后将其参考点平移到我们想要的位置。

# jquery - 添加递增数字以在 jquery 中重复选择框名称 attr

> ID：10197266
> 
> 赞同：1
> 
> 时间：2012-04-17T18:52:13.647
> 
> 标签：jquery, select, clone, auto-increment

我从一个选择框中获取金额并复制 div 的次数。但是我遇到了一个问题。我需要新的 div（包含选择框）来更改它们的名称。我需要它将递增数字添加到选择框名称的末尾。这是我的 JSFIDDLE：http: [//jsfiddle.net/liveandream/DhCLK/](http://jsfiddle.net/liveandream/DhCLK/)

查询：

```
//NUMERATE SELECT
for (var i = 2; i < 5; i++) { // add counts in a for loop
    $('select[name="rooms"]').append('<option value=' + i + '>' + i + '</option>');
}
//#

//DUPLICATE PLUGIN
$.fn.duplicate = function(count, cloneEvents) {
    var tmp = [];
    for (var i = 0; i < count; i++) {
        $.merge(tmp, this.clone(cloneEvents).get());
    }
    return this.pushStack(tmp);
};

//SELECT CHANGE FUNCTION (on change get value and clone)
$('select[name="rooms"]').change(function(){  // on change...
    var numOfClones = $(this).val() -1;    // get value...
    $('#holder').html('');              // empty holder if there are some old clones
    $('.repeat').duplicate(numOfClones).addClass('new').appendTo('#holder')
     .find("select").each(function() {
                   this.name = this.name.replace(/\d+/, 2);
               });

// duplicate; fill holder with new clones; the class 'new' is just for styling
});
e.preventDefault();​ 
```

HTML：

```
<select name="rooms">
        <option>1</option>
</select>

<div class="repeat">
    <h4 style="font-size: 11px;">Adults (17+)</h4>
      <select name="adults">
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
       </select>
    <h4 style="font-size: 11px;">Children</h4>
        <select name="children" id="children">
        <option selected="selected">0</option>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        </select>

        <h4 style="font-size: 11px;">Child AGES</h4>
        <select name="ages" id="ages" style="display: none;">
        <option selected="selected">-?-</option>
        <option>>0</option>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
        <option>6</option>
        <option>7</option>
        <option>8</option>
        <option>9</option>
        <option>10</option>
        <option>11</option>
        <option>12</option>
        <option>13</option>
        <option>14</option>
        <option>15</option>
        <option>16</option>
        <option>17</option>
        </select>
</div>

<div id="holder"></div> 
```

我希望有人可以帮助我...提前谢谢你！​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:20:20.227

您可以更改克隆代码以在每个重复 div 中的每个选择的末尾添加一个数字。您还需要将 id 值修复为唯一，我也将其添加到此代码中。为了在给定的重复 div 中为每个选择添加相同的数字，我必须添加另一个`.each()`循环，以便我们可以在正确的时间手动增加计数器。

```
//SELECT CHANGE FUNCTION (on change get value and clone)
$('select[name="rooms"]').change(function(){  // on change...
    var numOfClones = $(this).val() -1;    // get value...
    var cntr = 2;
    $('#holder').empty();              // empty holder if there are some old clones
    $('.repeat').duplicate(numOfClones).addClass('new').appendTo('#holder').each(function() {
        $(this).find("select").each(function() {
            if (this.name) {
                this.name += cntr;
            }
            if (this.id) {
                this.id += cntr;
            }
        });
        ++cntr;
    });
// duplicate; fill holder with new clones; the class 'new' is just for styling
}); 
```

此代码有效，因为主副本末尾没有编号。如果它最后确实有一个数字，那么您可以对该数字执行替换操作。

工作演示：http: [//jsfiddle.net/jfriend00/hhUaR/](http://jsfiddle.net/jfriend00/hhUaR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:29:29.883

我最初编写了一个不同的解决方案，但这似乎更优雅：

```
$('.repeat.new').each(function(idx) {
    $('select', this).each(function() {
    $(this).attr('name', $(this).attr('name') + idx).attr('id', $(this).attr('name'));
}); 
```

将其放在您的更改事件处理程序中。这是一个**[jsFiddle 示例](http://jsfiddle.net/j08691/DhCLK/24/)**。如果生成两个新的 div，这将使第一个 div 中的选择名称为 Adult0 和 children0，而第二个 div 的选择名称为 Adult1 和 children1。请注意，它还将唯一名称分配为 ID。

# variables - 在具有匿名值的列表中查找元组元素

> ID：10197268
> 
> 赞同：3
> 
> 时间：2012-04-17T18:52:20.027
> 
> 标签：variables, haskell, anonymous

我想在这个列表中找到：

```
test = [ (1,1,1,0) , (1,1,1,1) , (1,3,1,0) , (1,4,2,0) , (1,5,2,0) , (1,6,2,0) ,
         (3,1,3,5) , (3,2,3,4) , (3,3,3,3) , (3,4,4,1) , (3,5,4,2) , (3,6,4,6) ,
         (2,1,1,2) , (2,2,1,5) , (2,3,1,0) , (2,4,2,4) , (2,5,2,1) , (2,6,2,0) ,
         (4,1,3,0) , (4,2,3,0) , (4,3,3,0) , (4,4,4,0) , (4,5,4,0) , (4,6,4,0) ,
         (5,1,5,1) , (5,2,5,6) , (5,3,5,0) , (5,4,6,2) , (5,5,6,3) , (5,6,6,0) ,
         (6,1,5,3) , (6,2,5,2) , (6,3,5,4) , (6,4,6,5) , (6,5,6,6) , (6,6,6,1) ] 
```

具有匿名元素的元组，例如 (1,1,X,X)，其中 X 可以是任何值：

```
*> find (==(1,1,1,0)) test
Just (1,1,1,0) 
```

我希望能够做到：

```
*> find (==(1,1,X,X)) test
(1,1,1,0)
(1,1,1,1) 
```

实际的问题是，是否有任何类型的匿名变量（如序言中的“_”）来匹配任何值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T18:57:13.153

使用`filter`和模式匹配。

```
Prelude> :t filter
filter :: (a -> Bool) -> [a] -> [a] 
```

接受一个匹配事物的函数：

```
filter (\x -> case x of (1,1,_,_) -> True; _ -> False) ... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T20:48:44.537

您可以使用列表推导。

```
[x | x@(1,1,_,_) <- test] 
```

这是有效的，因为当您有一个可能在 的左侧失败的模式时，`<-`与该模式不匹配的值将被过滤掉。

# c# - 获取每个隔周五的日期

> ID：10197270
> 
> 赞同：-1
> 
> 时间：2012-04-17T18:52:29.540
> 
> 标签：c#, asp.net, datetime, getdate

我想知道我是否可以获取从 2012 年 4 月 13 日开始的每个备用星期五的日期，以将其作为参数提供给使用 c#、asp.net 的存储过程？

它也应该是最近通过的日期。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T18:59:57.943

只需将 a 设置为`DateTime`您想要开始的日期，然后继续添加 14 天：

因此，要在 4/13 之后每隔一个星期五获得一次，直到年底：

```
DateTime dt = new DateTime(2012, 04, 13);
while (dt.Year == 2012)
{
    Console.WriteLine(dt.ToString());
    dt = dt.AddDays(14);
} 
```

评论后的更多信息：

如果您想要自 2012/04/13 以来最近的另一个星期五，您可以计算从现在到 2012/04/13 之间的天数，将余数除以 14，然后从今天的日期中减去该天数：

```
DateTime baseDate = new DateTime(2012, 04, 13);
DateTime today = DateTime.Today;

int days = (int)(today - baseDate).TotalDays;
int rem = days % 14;
DateTime mostRecentAlternateFriday = today.AddDays(-rem); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T19:01:24.573

您可以轻松地创建一个生成器方法，该方法将为您提供一组星期五：

```
public IEnumerable<DateTime> GetAlternatingFridaysStartingFrom(DateTime startDate)
{
    DateTime tempDate = new DateTime(startDate.year, startDate.Month, startDate.Day);

    if(tempDate.DayOfWeek != DayOfWeek.Friday)
    {
        // Math may be off, do some testing
        tempDate = tempDate.AddDays((7 - ((int)DayOfWeek.Friday - (int)tempDate.DayOfWeek) % 7);
    }

    while(true)
    {                
        yield return tempDate;
        tempDate = tempDate.AddDays(14);
    }
} 
```

然后，只需使用一些 LINQ 来确定您想要多少：

```
var numberOfFridays = GetAlternatingFridaysStartingFrom(DateTime.Today).Take(10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T19:01:40.363

为什么需要存储过程？

如果您的日期是星期五，为什么不`AddDays(14)`循环使用呢？

如果您想从开始日期找到最近的星期五，只需使用以下命令：

```
while(date.DayOfWeek != DayOfWeek.Friday)
{
    date.AddDays(1);
} 
```

然后使用 14 天循环获取每隔一个星期五。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T19:13:27.307

您可以创建简单的方法来枚举它们，如下所示：

```
public static IEnumerable<DateTime> GetAlternatingWeekDay(DateTime startingDate)
{
    for (int i = 1; ; i++)
    {
        yield return startingDate.AddDays(14*i);
    }
} 
```

你可以这样称呼它：

```
DateTime startingDate = DateTime.Parse("2012-04-13");
foreach (var date in GetAlternatingWeekDay(startingDate).Take(10))
{
    Console.WriteLine(date.ToString("R"));
} 
```

或者，如果您需要知道给定周数的日期，您可以使用如下代码：

```
DateTime date = DateTime.Parse("2012-04-13").AddDays(7 * numberOfWeeks); 
```

# html - 有人可以帮助我知道如何使用 css、css3 使我的布局在小屏幕上工作吗？

> ID：10197271
> 
> 赞同：0
> 
> 时间：2012-04-17T18:52:32.950
> 
> 标签：html, css

我有一个简单的布局[http://goo.gl/BgaiB](http://goo.gl/BgaiB)我想让它适用于小屏幕设备。

我想知道如何根据屏幕大小将页面设置为自动调整大小。

有人可以帮助我如何做到这一点。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T18:57:04.590

听起来您想使用一些响应式网页设计技术来根据设备的屏幕宽度更改布局。媒体查询是您可以完成此任务的方法，[本文](http://www.alistapart.com/articles/responsive-web-design/)是学习此技术的一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T18:55:31.190

使用媒体查询应该为您完成这项工作。搜索它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T18:56:27.233

媒体查询是您想要的，[这里有一个很好的概述：](http://coding.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)

# jsf - 如何在页面加载期间添加 FacesMessage？使用 @PostConstruct 似乎不起作用

> ID：10197277
> 
> 赞同：22
> 
> 时间：2012-04-17T18:52:59.373
> 
> 标签：jsf, message, pageload, postconstruct

在支持 bean 的 @PostConstruct 方法中，我调用了一个 EJB，它可能会返回一些我想通过 p:messages 显示在页面上的消息。然而，即使我添加了 FacesMessages，例如 FacesContext.getCurrentInstance().addMessage(...)，p:messages 也不会被 FacesMessages 更新。

如果我改为对来自页面的操作调用 EJB（例如，用户单击页面上的按钮，该按钮调用调用 EJB 的方法，然后添加 FacesMessage(s)），则消息显示使用 p :messages 符合预期。

如何在 @PostConstruct 期间添加 Faces 消息并在最初呈现页面时显示它们？

代码：

Page1Controller.java：

```
@ManagedBean
public class Page1Controller
{
    @PostConstruct
    public void init()
    {
        FacesContext.getCurrentInstance().addMessage(null, 
            new FacesMessage("Test Message from @PostConstruct"));
    }

    public String getValue()
    {
            return "Some Value";
    }

    public void triggerMessage(ActionEvent event)
    {
            FacesContext.getCurrentInstance().addMessage(null, 
                    new FacesMessage("Test Message from Trigger Button"));      
    }

} 
```

page1.xhtml

```
 <h:form>
        <p:messages showDetail="true" showSummary="true" autoUpdate="true"/>
        <h:outputText value="#{page1Controller.value}"/>
        <br/>
        <p:commandButton value="Trigger Message" 
                         actionListener="#{page1Controller.triggerMessage}"/>  
   </h:form> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-17T19:59:28.367

*在添加消息之前*呈现消息组件时，可能会发生这种情况。

在您的具体示例中，组件第一次引用 bean `<h:outputText>`，因此在那个时候第一次构造。但是该`<h:outputText>`组件出现在组件*之后*的特定示例中`<p:messages>`，因此该`<p:messages>`组件已经呈现，因此显示消息为时已晚。

您需要确保在呈现消息组件*之前以某种方式添加消息。*一种方法是使用`<f:viewAction>`. 它在`INVOKE_APPLICATION`阶段之前的`RENDER_RESPONSE`阶段运行。因此它在渲染*任何*组件之前运行。因此，这是一个绝佳的机会。

```
<f:metadata>
    <f:viewAction action="#{bean.onload}" />
</f:metadata> 
```

```
public void onload() {
    // Add message here instead of in @PostConstruct.
} 
```

### 也可以看看：

*   [<f:metadata>、<f:viewParam> 和 <f:viewAction> 可以用来做什么？](https://stackoverflow.com/questions/6377798/what-can-fmetadata-fviewparam-and-fviewaction-be-used-for)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-05T14:30:27.880

您可以收集错误，然后在加载页面结束时使用具有 autorun = true 模式的 primefaces 的 remoteCommand 显示它。在我的例子中，我有一个 viewScope，在 xhtml 中我显示了在 @PostConstruct 中加载的值列表。如果生成异常，我将在页面加载结束时使用 remoteCommand 将其保存到示例中。

```
private ArrayList<Exception> postConstucError = new ArrayList<>();

@PostConstruct
public void validarAcceso() {
    /**
     * verificar permisos a la vista de coeficientes
     */
    try {
            this.init() //load data;
        } catch (Exception e) {
        System.out.print(e.getMessage());
        this.postConstucError.add(e);
    }
}

 public void showPostConstructError() {
    try {
        for (int i = 0; i < this.postConstucError.size(); i++) {
            JsfUtil.addErrorMessage("Error al cargar datos iniciales: " + postConstucError.get(i).getMessage());
        }
    } catch (Exception e) {
        JsfUtil.addErrorMessage(e, "Error: showPostConstructError() " + e.getMessage());
    }
} 
```

xhtml代码

```
 <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true"/> 
  <h:form>
        <p:remoteCommand id="rcomerror" name="showError" process="@this"  autoRun="true"
                         actionListener="#{mBPresentNinos.showPostConstructError()}" />  
    </h:form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-24T09:18:25.583

对我来说，使用 preRenderView 事件在表单初始化上显示消息是一个消息地狱。所以我创建了非常简单的“组件”来保存静态消息。对于此示例，仅支持一条错误消息。

**静态消息.xhtml：**

```
<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
             rendered="#{rendered}">
    <div id="staticMessage" class="ui-messages ui-widget" aria-live="polite">
        <div class="ui-messages-error ui-corner-all"><span class="ui-messages-error-icon"/>
            <ul>
                <li>
                    <span class="ui-messages-error-summary">#{value}</span>
                </li>
            </ul>
        </div>
    </div>
</ui:fragment> 
```

包括消息：

```
 <ui:include src="/template/components/staticMessage.xhtml">
     <ui:param name="rendered"value="#{beanMB.staticMessagesRendered}"/>
     <ui:param name="value" value="Place your message here."/>
 </ui:include> 
```

# javascript - 两个问题：我应该在验证方面做客户端还是服务器端？另外，我将如何验证没有文本框为空白/无效...

> ID：10197279
> 
> 赞同：0
> 
> 时间：2012-04-17T18:53:12.327
> 
> 标签：javascript, jquery, asp.net

...使用 jquery/javascript？我想检查并确保输入了一个值并且它是一个数字。

首先 - 在客户端、服务器端或两者上进行验证是最佳实践吗？这是应该验证两次还是在客户端检查足够？

第二 - 如果客户端验证是解决这个问题的最佳方式，我怎么能用 javascript/jquery 做到这一点？我假设对于单击的按钮，我会将其分配`onclientclick`给一个 javascript 函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T18:55:15.357

1) 验证应*至少*在服务器端完成。**两者**都更好。

2）如果您想进行简单的验证，您只需附加到按钮单击事件，或者更好的是，表单提交事件。

```
$('form').submit(function()
{
     // Do My Validation

     // return false if invalid, true otherwise
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T18:54:20.520

您需要两者都做，并且您应该在客户端使用[jQuery Validate](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T19:01:19.273

客户端验证纯粹是为了方便用户和服务器，而不是为了数据卫生。考虑一下您可以随时打开您的开发工具并更改 JS 的事实——您可以完全绕过客户端验证。但是，它不需要您加载更多数据并允许您在导航之前进行验证，这很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T19:05:52.720

就像其他答案所说，最好同时使用服务器端和客户端。知道自己在做什么的人总是可以通过客户端。即使有人完全关闭 Javascript，客户端验证也是毫无价值的。

我的建议是在服务器上设置所有内容，然后返回并为客户端修复它。Javascript 和 jQuery 是最常用的验证项。我在 Javascript 中使用的一件事是阻止任何提交按钮，直到所有内容都检查完毕，例如：

```
document.getElementById("submitbutton").innerHTML = '<input type="submit" value="Log In" />'; 
```

在通过验证检查完所有内容后将其放入会将输入按钮放置在 id 为“submitbutton”的 div 中。

一些 Javascript 的示例只是为了确保输入框是这样的：

```
var textValue = document.getElementById("idOfTextBox").value;
if(textValue == null || textvalue == "")
{
    document.getElementById("errordiv").innerHTML = "Please fill out a value for the text box";
} 
```

如果为每个文本框设置了 onKeyUp 或 onBlur，那么它在确保每个框都有其输入方面非常有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T19:29:04.333

**[这里](http://msdn.microsoft.com/en-us/library/aa479045.aspx#aspplusvalid_clientside)**的客户端验证很少

![在此处输入图像描述](../Images/9368a950e94d48d89df06ee3fa383a9e.png)![在此处输入图像描述](../Images/d58246bc505214c517467c4c33cbada6.png)

* * *

> 首先 - 在客户端、服务器端或两者上进行验证是最佳实践吗？这是应该验证两次还是在客户端检查足够？

1.  `Client Side`- 总是好的。前提是 JavaScript 未被阻止。客户端验证加快了流程。减少执行时间。
2.  `Server Side`- 它总是不费吹灰之力。只需要在性能上妥协。
3.  `Both Side`- 我可以进行`RegularExpressionValidator`服务器端验证。

* * *

> 第二 - 如果客户端验证是解决这个问题的最佳方式，我怎么能用 javascript/jquery 做到这一点？我假设对于单击的按钮，我会将其 onclientclick 分配为等于 javascript 函数。

* * *

> 在这个例子中，我将解释我们如何防止用户在数字文本框中输入非字母。

## 标记

```
<asp:TextBox ID="FirstName" runat="server" AutoComplete="Off" 
             onKeyup="return AlphaNumeric(this);" onchange="return AlphaNumeric(this);"></asp:TextBox> 
```

* * *

## 示例 JavaScript 代码

```
<script language="javascript" type="text/javascript">
    function AlphaNumeric(controlID) {
        document.getElementById(controlID.id).value = 
          NumericValidation(document.getElementById(controlID.id).value);
        return true;
    }

    function NumericValidation(val) {
        var Reg = new RegExp('[^a-zA-Z]+');
        var Result = val.match(Reg);
        if (Result) {
            val = val.replace(Reg, '');
            return val;
        }
        else
            return val;
    }
</script> 
```

* * *

# css - Confusion surrounding @import behaviour in LESS, using Codekit

> ID：10197280
> 
> 赞同：4
> 
> 时间：2012-04-17T18:53:14.893
> 
> 标签：css, compiler-errors, twitter-bootstrap, less

Currently using Bootstrap, compiling with Codekit, and also have a separate style.less that I'm working on.

In variables.less:

```
@blue: #0096EF; 
```

In style.less, I have the following:

```
.title-text {color: @blue;}
@import: "variables.less"; 
```

In bootstrap.less:

```
@import: "style.less";
@import: "variables.less"; 
```

Am I doing this right? To my mind, when bootstrap is compiled it results in variables.less occurring twice.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:40:32.120

you should be able to go with import of variables.less once in bootstrap as first import instance, and do not include it second time in actual style.less. Because you are right on your assumption, it will import variable.less again. meaning you are importing same variables in two locations.

P.S. as long as variables.less that defines variables that you will be using is imported before you access variables themselves you will be fine.

```
@color-black: #000;

.color {
      color: @color-black;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T17:00:34.560

I discovered this is also a Codekit issue too, as I am using Codekit to compile the less files.

Solution:

1.  Create style.less and edit it as intended, reference @blue variable (not declared in current document)
2.  On save, Codekit returns a compile error, due to un-declared variable in style.less. Ignore the error.
3.  In bootstrap.less `@import` style.less
4.  Save bootstrap.less, it compiles without issue
5.  Call bootstrap.css in the html doc

Incidentally, I encountered a Codekit bug between step 2 and 3\. After step 2, Codekit no longer watches or compiles anything. To solve, I needed to remove the watched project and then re-add it to Codekit.

# html - 简单的 HTML 作为博客

> ID：10197287
> 
> 赞同：0
> 
> 时间：2012-04-17T18:53:38.950
> 
> 标签：html

我迷上了许多博客平台，现在使用 Ruby 进行开发……我厌倦了处理数据库和升级应用程序——所以对于我的个人博客，我想坚持使用纯 html。

**这是一个坏主意吗？**

唯一的困境是如果我有很多条目......

如果您要做这样的事情（假设您对上一个问题的回答为“否”），您将如何格式化它以及如何处理许多条目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T18:56:54.183

不，这根本不是一个坏主意。使用它的理由：

*   无需安装服务器端语言或任何东西，或担心兼容性
*   减少服务器上的负载
*   无需设置数据库，无需调试，通常只是轻量级。

您可能不想这样做的原因：

*   重复的代码。如果您想更改整个网站的某些内容，可能很难在所有页面中进行更改。

但是去吧，它简单而有效。您可以随意命名，备份就像复制所有文件一样简单。它也适用于任何类型的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T18:55:18.217

你看过像[Jekyll](https://github.com/mojombo/jekyll)这样的静态博客平台吗？

请参阅 minitech 的回答，静态 HTML 对他列出的所有原因都很好，而且：

*   提高性能！服务器提供静态文件的速度非常快，并且负载良好
*   可靠性。除了你的 Apache 或 nginx 之外，几乎没有什么可以打破的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T19:15:26.640

在没有*真正*静态的情况下，我可以说 PHP 确实使*大部分*静态页面非常方便：

```
<?php include('/path/to/header.inc'); ?>
<h1>Not much boilerplate</h1>
<p>Considering that only two lines are needed</p>
<?php include('/path/to/footer.inc'); ?> 
```

可以使用多种替代方案。我在内部使用了一个利用`$_SERVER['PATH_INFO']`变量并解析 markdown 的方法，其中包含几`16`行 PHP 代码和[PHPMarkdown](http://michelf.com/projects/php-markdown/)。

* * *

对网站使用静态 HTML 并没有什么特别的错误，只要您了解与动态系统相比，任何站点范围的更改都将是乏味且缓慢的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T18:58:27.087

你应该阅读[jeckyl](https://github.com/mojombo/jekyll)、hyde、octopress 和所有其他静态页面生成器。

一般来说，这不是一个坏主意，很多人都在这样做，将他们的博客生成为静态页面，并通过[disqus](http://disqus.com)添加 js 评论。

这些解决方案允许您非常快速地更改布局、添加带有最新帖子的小部件等。

# ios - 尝试从 SQLite 加载时应用程序崩溃

> ID：10197288
> 
> 赞同：0
> 
> 时间：2012-04-17T18:53:41.773
> 
> 标签：ios, sqlite

好吧，我正在更新我制作的应用程序，但我遇到了一些运行时问题。人们说他们希望能够保存输入的数据，所以我正在实现一个 SQLite 数据库。我让应用程序检查数据库是否存在并创建所需的一切，如果数据库或数据库表不存在。但是，我在从 SQLite 检索数据时遇到了麻烦。当我按下应该加载数据的按钮时，应用程序崩溃。我尝试同时使用 NSLog 和 UIAlertView 来弄清楚发生了什么，但我无法检索结果。但是，在 SQLite 中执行测试运行时，我发出的查询是正确的，所以肯定有别的东西。

以下是我用来检索数据的代码：

```
- (IBAction)loadData
{
    NSDateFormatter* bf = [[NSDateFormatter alloc] init];
    [bf setDateFormat:@"MM/dd/yyyy"];
    NSDate* sdate;
    NSString* birthDate;
    NSString* balance;
    NSString* dyear;

    sqlite3_stmt *stmt;

    // get document directory
    NSArray *dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docsDir = [dirPaths objectAtIndex:0];

    // build path to database
    dbpath = [[NSString alloc] initWithString:[docsDir stringByAppendingPathComponent:@"mrd.db"]];

    const char *dpath = [dbpath UTF8String];

    if (sqlite3_open(dpath, &mrdDB) == SQLITE_OK) 
    {
        NSString* query = [NSString stringWithFormat:@"SELECT date(birth), bal, year FROM rmd LIMIT 1"];
        const char* query_statement = [query UTF8String];

        if (sqlite3_prepare_v2(mrdDB, query_statement, -1, &stmt, NULL) == SQLITE_OK) 
        {
            if (sqlite3_step(stmt) == SQLITE_ROW) 
            {
                birthDate = [[NSString alloc] initWithUTF8String:(char *)sqlite3_column_text(stmt, 1)];
                balance = [[NSString alloc] initWithUTF8String:(char *)sqlite3_column_text(stmt, 2)];
                dyear = [[NSString alloc] initWithUTF8String:(char *)sqlite3_column_text(stmt, 3)];

                sdate = [bf dateFromString:birthDate];

                self.birth.text = [bf stringFromDate:sdate];
                [birthDate release];
                [bf release];

                self.bal.text = balance;
                [balance release];

                self.year.text = dyear;
                [dyear release];

                self.status.text = @"data loaded sucessfully";

            } else {
                self.status.text = @"Cannot find/retrieve saved data";
            }
            sqlite3_finalize(stmt);
       }
       sqlite3_close(mrdDB);
    }
 } 
```

该应用程序能够将数据保存到数据库中，因为该应用程序显示“保存成功”消息，我添加了该消息是为了用户以及查看操作是否正确，所以我不太确定发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:58:23.243

在找到模拟器保存数据库的位置后，我发现了我的问题。我的问题不在于加载数据，而在于它是如何保存的。谢谢您的帮助。

# sql - SQL日期比较

> ID：10197290
> 
> 赞同：1
> 
> 时间：2012-04-17T18:53:51.030
> 
> 标签：sql, database, sql-server-2008

我有一张有 1000 条记录的表。一列是采用格式的发布日期`'2008-01-02 00:00:00.000'`。我想查询 SQL DB 以获取最新发布日期的记录。我应该做一个比较还是有其他过滤器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T18:55:58.850

```
SELECT * FROM tbl WHERE publishdate = (SELECT MAX(publishdate) FROM tbl) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T18:58:50.923

如果您只想要一条记录：

```
SELECT TOP 1 * FROM mytable ORDER BY publishdate DESC 
```

如果您想要所有出版日期最长的书籍，请使用 Cade Roux 的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T18:59:58.083

如果发布日期是日期时间

```
SELECT TOP 1  *
FROM tbl
ORDER BY publishdate DESC 
```

# php - 论坛不关注BBcode

> ID：10197297
> 
> 赞同：1
> 
> 时间：2012-04-17T18:54:32.360
> 
> 标签：php

我的论坛没有关注 bbcode。Apostorphies 和 break 尤其不起作用。我知道这不是包含问题，因为我的笑脸页面工作正常。只是这一页。

此外，nl2br 也不起作用。

有人可以告诉我我的代码是否正确吗？

```
<?
function forumbb($content){ //define the function of bbcode 
$content = nl2br($content); //replaces returns with br's 
$match = array( 
'#\[sup\]#se', 
'#\[\/sup\]#se', 
'#rnrn#se', 
'#\[p\]#se', 
'#\[\/p\]#se', 
'#\[br\]#se', 
'#\[\br\]#se', 
'#\[b\]#se', 
'#\[\/b\]#se', 
'#\[i\]#se', 
'#\[\/i\]#se', 
'#\[u\]#se', 
'#\[\/u\]#se', 
'#\[left\]#se', 
'#\[\/left\]#se', 
'#\[right\]#se', 
'#\[\/right\]#se', 
'#\[center\]#se', 
'#\[\/center\]#se', 
'#\[\/font\]#se', 
'#\[fontc\=(.*?)s\=(.*?)f\=(.*?)\]#se', 
'#\[fontc\=(.*?)f\=(.*?)s\=(.*?)\]#se', 
'#\[fonts\=(.*?)c\=(.*?)f\=(.*?)\]#se', 
'#\[fonts\=(.*?)f\=(.*?)c\=(.*?)\]#se', 
'#\[fontf\=(.*?)c\=(.*?)s\=(.*?)\]#se', 
'#\[fontf\=(.*?)s\=(.*?)c\=(.*?)\]#se', 
'#\[fontc\=(.*?)f\=(.*?)\]#se', 
'#\[fontc\=(.*?)s\=(.*?)\]#se', 
'#\[fonts\=(.*?)f\=(.*?)\]#se', 
'#\[fonts\=(.*?)c\=(.*?)\]#se', 
'#\[fonts\=(.*?)\]#se', 
'#\[fontf\=(.*?)\]#se', 
'#\[fontc\=(.*?)\]#se', 
'#\[#se', 
'#\]#se', 
'#neoHTML#se', 
'#\*acara\*#se', 
'#\*aisha\*#se', 
'#\*blumaroo\*#se', 
'#\*bori\*#se', 
'#\*bruce\*#se', 
'#\*buzz\*#se', 
'#\*chia\*#se', 
'#\*cybunny\*#se', 
'#\*draik\*#se', 
'#\*eyrie\*#se', 
'#\*flotsam\*#se', 
'#\*gelert\*#se', 
'#\*gnorbu\*#se', 
'#\*grundo\*#se', 
'#\*hissi\*#se', 
'#\*jubjub\*#se', 
'#\*kacheek\*#se', 
'#\*kau\*#se', 
'#\*kiko\*#se', 
'#\*korbat\*#se', 
'#\*kougra\*#se', 
'#\*krawk\*#se', 
'#\*kyrii\*#se', 
'#\*lenny\*#se', 
'#\*lupe\*#se', 
'#\*SketchedNeo\*#se', 
'#\*meerca\*#se', 
'#\*ogrin\*#se', 
'#\*poogle\*#se', 
'#\*pteri\*#se', 
'#\*ruki\*#se', 
'#\*scorchio\*#se', 
'#\*shoyru\*#se', 
'#\*techo\*#se', 
'#\*tonu\*#se', 
'#\*usul\*#se', 
'#\*wocky\*#se', 
'#\*xweetok\*#se', 
'#\*yurble\*#se', 
'#\*zafara\*#se', 
'#\*candycane\*#se', 
'#\*aaa\*#se',
'#\*abigail\*#se',
'#\*boatswain\*#se',
'#\*cabinboy\*#se',
'#\*coltzan\*#se',
'#\*cook\*#se',
'#\*gunner\*#se',
'#\*hanso\*#se',
'#\*happiness\*#se',
'#\*illusen\*#se',
'#\*jazan\*#se',
'#\*jhudora\*#se',
'#\*lulu\*#se',
'#\*mate\*#se',
'#\*mrcoconut\*#se',
'#\*nox\*#se',
'#\*quartermaster\*#se',
'#\*rigger\*#se',
'#\*rower\*#se',
'#\*sloth\*#se',
'#\*swabbie\*#se',
'#\*angelpuss\*#se',
'#\*feepit\*#se',
'#\*jinjah\*#se',
'#\*kadoatery\*#se',
'#\*kadoatie\*#se',
'#\*larnikin\*#se',
'#\*meepit\*#se',
'#\*mootix\*#se',
'#\*pinchit\*#se',
'#\*slorg\*#se',
'#\*warf\*#se',
'#\*weewoo\*#se',
'#\*babypb\*#se',
'#\*baf\*#se',
'#\*bdf\*#se',
'#\*bef\*#se',
'#\*bff\*#se',
'#\*bgc\*#se',
'#\*blf\*#se',
'#\*bwf\*#se',
'#\*carrot\*#se',
'#\*codestone\*#se',
'#\*dariganpb\*#se',
'#\*dubloon\*#se',
'#\*dung\*#se',
'#\*faeriepb\*#se',
'#\*mspp\*#se',
'#\*piratepb\*#se',
'#\*sock\*#se',
'#\*suap\*#se',
'#\*catfish\*#se',
'#\*star\*#se',
'#\*swagbag\*#se',
'#\*0.o.0\*#se',
'#\*bauble\*#se',
'#\*flower\*#se',
'#\*ghost\*#se',
'#\*holly\*#se',
'#\*mistletoe\*#se',
'#\*present\*#se',
'#\*pumpkin\*#se',
'#\*rednose\*#se',
'#\*santa\*#se',
'#\*snowflake\*#se',
'#\*snowman\*#se',
'#\*tombstone\*#se',
'#\*witch\*#se',
'#\*xmastree\*#se',
'#\*altador\*#se',
'#\*brightvale\*#se',
'#\*darigan\*#se',
'#\*faerieland\*#se',
'#\*hauntedwoods\*#se',
'#\*kikolake\*#se',
'#\*krawkisland\*#se',
'#\*kreludor\*#se',
'#\*lostdesert\*#se',
'#\*maraqua\*#se',
'#\*meridell\*#se',
'#\*moltara\*#se',
'#\*mysteryisland\*#se',
'#\*rooisland\*#se',
'#\*shenkuu\*#se',
'#\*terrormountain\*#se',
'#\*tyrannia\*#se',
'#\*virtupets\*#se',
'#\*angry\*#se',
'#\*clap\*#se',
'#\*complain\*#se',
'#\*cough\*#se',
'#\*cry\*#se',
'#\*facepalm\*#se',
'#\*lol\*#se',
'#\*unsure\*#se',
'#\*violin\*#se',
'#\*yarr\*#se',
'#:\)#se',
'#;\)#se',
'#:\(#se',
'#:\*#se',
'#:D#se',
'#:K#se',
'#:o#se',
'#:P#se',
'#B\)#se',
'#0:\-\)#se',
'#\*snowager\*#se',
'#\*turmaculus\*#se',
); //codes used in posts 
$replace = array( 
"'<sup>'", 
"'</sup>'", 
"''", 
"'<p>'", 
"'</p>'", 
"'<br>'", 
"'</br>'", 
"'<b>'", 
"'</b>'", 
"'<i>'", 
"'</i>'", 
"'<u>'", 
"'</u>'", 
"'<p style=\"text-align:left;\">'", 
"'</p>'", 
"'<p style=\"text-align:right;\">'", 
"'</p>'", 
"'<center>'", 
"'</center>'", 
"'</font>'", 
"'<font color=\'\\1\' size=\'\\2\' face=\'\\3\'>'",
"'<font color=\'\\1\' face=\'\\2\' size=\'\\3\'>'",
"'<font size=\'\\1\' color=\'\\2\' face=\'\\3\'>'",
"'<font size=\'\\1\' face=\'\\2\' color=\'\\3\'>'",
"'<font face=\'\\1\' color=\'\\2\' size=\'\\3\'>'",
"'<font face=\'\\1\' size=\'\\2\' color=\'\\3\'>'",
"'<font color=\'\\1\' face=\'\\2\'>'",
"'<font color=\'\\1\' size=\'\\2\'>'",
"'<font size=\'\\1\' face=\'\\2\'>'",
"'<font size=\'\\1\' color=\'\\2\'>'",
"'<font size=\'\\1\'>'",
"'<font face=\'\\1\'>'",
"'<font color=\'\\1\'>'",
"' '",
"' '",
"'This is how your post will look on the Neoboards.'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/acara.gif\' >'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/aisha.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/blumaroo.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/bori.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/bruce.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/buzz.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/chia.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/cybunny.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/draik.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/eyrie.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/flotsam.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/gelert.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/gnorbu.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/grundo.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/hissi.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/jubjub.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/kacheek.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/kau.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/kiko.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/korbat.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/kougra.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/krawk.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/kyrii.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/lenny.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/lupe.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/SketchedNeo.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/meerca.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/ogrin.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/poogle.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/pteri.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/ruki.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/scorchio.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/shoyru.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/techo.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/tonu.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/usul.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/wocky.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/xweetok.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/yurble.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/zafara.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/candycane.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/aaa.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/abigail.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/boatswain.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/cabinboy.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/coltzan.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/cook.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/gunner.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/hanso.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/happinessfaerie.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/illusen.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/jazan.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/jhudora.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/lulu.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/mate.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/mrcoconut.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/nox.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/quartermaster.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/rigger.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/rower.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/sloth.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/swabbie.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/angelpuss.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/feepit.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/jinjah.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/kadoatery.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/kadoatie.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/larnikin.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/meepit.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/mootix.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/pinchit.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/slorg.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/warf.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/weewoo.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/babypb.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/baf.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/bdf.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/bef.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/bff.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/bgc.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/blf.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/bwf.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/carrot.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/codestone.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/dariganpb.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/dubloon.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/dung.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/faeriepb.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/mspp.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/piratepb.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/sock.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/suap.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/catfish.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/star.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/swagbag.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/0.o.0.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/bauble.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/flower.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/ghost.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/holly.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/mistletoe.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/present.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/pumpkin.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/rednose.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/santa.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/snowflake.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/snowman.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/tombstone.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/witchhat.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/xmastree.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/altador.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/brightvale.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/darigan.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/faerieland.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/hauntedwoods.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/kikolake.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/krawkisland.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/kreludor.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/lostdesert.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/maraqua.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/meridell.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/moltara.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/mysteryisland.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/rooisland.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/shenkuu.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/terrormountain.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/tyrannia.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/virtupets.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/angry.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/clap.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/complain.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/cough.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/cry.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/facepalm.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/lol.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/unsure.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/violin.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/yarr.gif\' \>'",
"'<img src=\'http://images.neopets.com/smileys/smiley.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/winking.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/sad.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/kisskiss.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/grin.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/vampire.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/oh.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/tongue.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/sunglasses.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/angel.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/snowager.gif\' \>'",
"'<img src=\'http://images.neopets.com/neoboards/smilies/turmaculus.gif\' \>'",
); //replacements 
return preg_replace($match, $replace, $content); //match, and replace 
} //end the function 
?> 
```

# javascript - 滚动时如何使此导航栏浮动在顶部？

> ID：10197298
> 
> 赞同：0
> 
> 时间：2012-04-17T18:54:37.880
> 
> 标签：javascript, jquery, html, css, css-float

可以在此处找到整个导航栏及其 JavaScript 设置

[http://jsfiddle.net/DyJzg/3/](http://jsfiddle.net/DyJzg/3/)

现在它停留在页面的顶部，但我想知道即使你向下滚动页面，它是否可以浮动在顶部。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T19:01:22.320

我认为你需要使用`position:fixed`

```
nav {
position:fixed;
top:0;
width:100%;
} 
```

这是[修改过的jsfiddle](http://jsfiddle.net/DyJzg/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:06:17.337

如果您的元素是“导航”或您的元素类是“.nav”，请使用这段 css 代码：

```
nav, .nav{
position:fixed;
top:0;
width:your_custom_with;
height: your_custom_height
} 
```

注意：查看这篇css定位文章了解更多详情： [http ://www.w3schools.com/css/css_positioning.asp](http://www.w3schools.com/css/css_positioning.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T18:59:38.417

就在我的脑海中，以下应该做到这一点..

```
.nav{
   display:block;
   position:absolute;
   top:0;
   left:0;
   right:0;
   width:100%;
} 
```

# mysql - MYSQL 只显示最早的重复项

> ID：10197299
> 
> 赞同：1
> 
> 时间：2012-04-17T18:54:40.330
> 
> 标签：mysql, sql, database

```
select name, reported_at from nodes
where reported_at < curdate() or reported_at is null
group by name 
```

输出：

```
name                reported at
ncs-linux-test.edu  2012-03-16 18:36:03
ocdev1.net          2012-04-06 16:32:02
pinc-ctm.net        NULL 
```

使用该声明，我会得到比当前日期更短的/名称报告的任何结果表。

我需要的是只提取具有更多当前信息的重复数据的声明。

例如：

该声明只会退出：

```
ncs-linux-test.edu    2012-03-16 
```

如果有一个

```
ncs-linux-test.edu 
```

日期比 2012-03-16 更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T21:11:46.233

```
select *
from nodes n 
join nodes nlater
  on n.name = nlater.name 
  and n.reportedat < nlater.reportedat 
```

# sencha-touch - 如何在 Sencha Touch 2 的列表后添加项目？

> ID：10197301
> 
> 赞同：0
> 
> 时间：2012-04-17T18:54:57.893
> 
> 标签：sencha-touch, sencha-touch-2

Sencha Touch 2 中的列表组件支持配置中的两个项目（按钮、字段等），它是由绑定到它的商店填充的 itemTPL。当你构建它时，一切都会像你期望的那样工作——除了你添加的项目配置项总是显示在列表之前。我想不出办法让它们出现在列表底部（我想制作一个“回复”按钮，显示在论坛类型帖子列表的底部）。我可以设置 docked : 'bottom' 将它放到父容器的底部，但这只是一个固定位置，并没有真正显示*在*列表项之后。

有人知道在这里做什么吗？

感谢您的关注！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:38:44.897

这是通过将父容器布局（我的意思是放置列表的容器）设置为`vbox`. 然后：

```
xtype: 'container'
layout: 'vbox'
items: [your_list, your_button_below_list, ...] 
```

将首先显示您的列表，然后在其下方是您的按钮，依此类推。

希望能帮助到你。

P/S：确切地说，如果您想滚动到列表底部，那么按钮就在那里，您必须将此配置设置为您的列表：`scrollable:false`或者给它一个`minHeight`

# ruby-on-rails - Rails 表单 - 如何在输入中发送数组？

> ID：10197303
> 
> 赞同：-1
> 
> 时间：2012-04-17T18:54:59.623
> 
> 标签：ruby-on-rails, ruby, arrays, forms, input

我有数组

> 参数[:搜索][:汽车]

其中包含

```
"search"=>{"cars"=>["11", "7"]} 
```

我试图将这个数组放入表单字段的隐藏中（这段代码在辅助方法中）：

```
...
data += hidden_field_tag 'search[cars]', params[:search][:cars]
...
return data.html_safe 
```

发送后的这张表格给了我：

```
"search"=>{"cars"=>"[\"11\", \"7\"]"} 
```

我想请教您的帮助，如何通过隐藏输入发送数组。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:10:59.187

在一个视图中（适应它以在你的助手中使用）你可以写：

```
<% params[:search][:cars].each do |car_id| %>
  <%= hidden_field_tag 'search[cars][]', car_id %>
<% end %> 
```

# jquery - 在 div 弹出窗口上开始视频 - 在弹出窗口上加载视频

> ID：10197304
> 
> 赞同：0
> 
> 时间：2012-04-17T18:55:02.427
> 
> 标签：jquery, video, html, popup, jwplayer

好吧，不知道这怎么可能。

我有一系列 jquery div 弹出窗口，当每个弹出窗口出现时，我希望它们开始播放视频。

我应该使用哪个播放器以及我应该如何处理这个，已经有了 div，但是因为它们设置为不显示，所以在 JWplayer 中自动播放视频意味着它们在弹出之前正在播放。

```
<!DOCTYPE html>
<html>
<head>
  <style>
div { position: absolute; width: 60px; height: 60px; float: left; display:none; }
.first { background-color: #3f3; left: 0;}
.second { background-color: #33f; left: 80px;}
.third { background-color: #3f3; left: 120px;}
.fourth { background-color: #33f; left: 300px;}
.fifth { background-color: #3f3; left: 400;}
</style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
  <script src="http://ui.jquery.com/latest/ui/effects.core.js"></script>
<script src="http://ui.jquery.com/latest/ui/effects.slide.js"></script>
</head>
<body>

<p><button>Run</button></p>
<div class="first">VIDEO 1 HERE</div>
<div class="second">VIDEO 2 HERE</div>
<div class="third">VIDEO 3 HERE</div>
<div class="fourth">VIDEO 4 HERE</div>
<div class="fifth">VIDEO 5 HERE</div>

<script>
    $("button").click(function() {
      $("div.first").delay(15060).show("puff", {}, 300).delay(116010).fadeOut(300);
      $("div.second").delay(40230).show("puff", {},300).delay(28990).fadeOut(300);
      $("div.third").delay(46180).show("puff", {},300).delay(27880).fadeOut(300);
      $("div.fourth").delay(71070).show("puff", {},300).delay(42050).fadeOut(300);
      $("div.fifth").delay(110080).show("puff", {},300).delay(17050).fadeOut(300);
    });
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:44:07.417

当我们有一些简单的插件时不用担心，仔细阅读疮代码你可以找到你的东西，这里有一些在弹出窗口或某种灯箱上加载视频的简单演示。[http://www.queness.com/post/1229/12-lightboxes-and-javascript-plugins-that-support-video-audio-flash-and-images](http://www.queness.com/post/1229/12-lightboxes-and-javascript-plugins-that-support-video-audio-flash-and-images)或者这个[http://www.no-margin- for-errors.com/projects/prettyphoto-jquery-lightbox-clone/#prettyPhoto](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/#prettyPhoto)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:00:48.480

JWPlayer 是一个不错的播放器，但您应该将 autostart 设置为 false 并使用 JWPlayer Javascript API。

当 div 弹出时，使用

```
[Your player name]().play() 
```

播放视频。例如，您的设置代码以：

```
jwplayer('mediaspace').setup({...
... 
```

然后你必须使用

```
jwplayer().play() 
```

.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T19:01:19.177

我建议你使用fancybox，它是一个很好的'lightbox'，类似于jquery 库，它非常简单和有用......

链接是： http: [//fancybox.net/](http://fancybox.net/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T10:02:06.173

使用 Shadowbox ......它太好了

该插件支持大多数 JavaScript 插件，如 jQuery、Mootools 等。

链接：[http ://www.shadowbox-js.com/support.html](http://www.shadowbox-js.com/support.html)

# c++ - 遍历 std:list

> ID：10197309
> 
> 赞同：1
> 
> 时间：2012-04-17T18:55:12.890
> 
> 标签：c++, stdlist

这是我的代码：

```
for (std::list<std::wstring>::iterator itr  = kb->titles.begin(); itr != kb->titles.end() ; itr++)
    {
        _size += *itr.size();
    } 
```

我想要做的是访问列表中包含的每个 wstring 并调用它的 size() 成员函数。但是，itr 指出的似乎不是迭代的 wstring 元素，我收到错误（错误 C2039：'size'：不是 'std::_List_iterator<_Mylist>' 的成员）

如果您想知道 kb 是什么，它是一个指向结构的指针，`std::list<std::wstring> titles;`它是它的成员之一。

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T18:57:09.177

运算符优先级是这里的问题，试试

```
_size += (*itr).size(); 
```

甚至更好，

```
_size += itr->size(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T18:57:51.607

您缺少括号：

```
_size += (*itr).size();
_size += itr->size(); 
```

两者都应该工作。

# java - 无法在android中实现描述符

> ID：10197312
> 
> 赞同：16
> 
> 时间：2012-04-17T18:55:17.377
> 
> 标签：java, android, opencv, matching, feature-descriptor

我正在创建一个应用程序来查找两个图像之间的匹配。我无法正确找到匹配结果。

匹配方法给了我与输入关键点相同数量的描述符，我也无法得出这个结果。我在工作区中使用 OpenCV 作为库。

这是我的代码。

```
 Bitmap mBitmap1 = mimage1.copy(Bitmap.Config.ARGB_8888, false); 
  Bitmap mBitmap2 = mimage2.copy(Bitmap.Config.ARGB_8888, false); 

  Mat s_image1 = Utils.bitmapToMat(mBitmap1);
  Mat s_image2 = Utils.bitmapToMat(mBitmap2);

  Mat rgb1 = new Mat();
  Mat rgb2 = new Mat();
  Mat rgb3 = new Mat();
  Mat temp = new Mat();

  Mat o_image1 = new Mat();
  Mat o_image2 = new Mat();
  Mat o_image3 = new Mat();

  List<KeyPoint> points1 = new ArrayList<KeyPoint>();
  List<KeyPoint> points2 = new ArrayList<KeyPoint>();
  List<DMatch> matches = new ArrayList<DMatch>();

  FeatureDetector surf = FeatureDetector.create(FeatureDetector.SURF);
  surf.detect(s_image1, points1);
  surf.detect(s_image2, points2);

  Scalar color1 = new Scalar(0,255,0);
  Scalar color2 = new Scalar(255,0,0);

  Imgproc.cvtColor(s_image1, rgb1, Imgproc.COLOR_RGBA2RGB);
  Imgproc.cvtColor(s_image2, rgb2, Imgproc.COLOR_RGBA2RGB);

  Mat descriptors1 = new Mat(), descriptors2 = new Mat();
  Features2d.drawKeypoints(rgb1, points1, rgb1, color2);
  Features2d.drawKeypoints(rgb2, points2, rgb2, color2);
  DescriptorExtractor extracter = DescriptorExtractor.create(DescriptorExtractor.SURF);

  extracter.compute(rgb1, points1, descriptors1);
  extracter.compute(rgb2, points2, descriptors2);
  int k = 5;
  DescriptorMatcher matcher = DescriptorMatcher.create(DescriptorMatcher.BRUTEFORCE);
  matcher.match(descriptors2, descriptors1, matches);
  Features2d.drawMatches(rgb1, points1, rgb2, points2, matches, rgb3, color1, color2);
  Imgproc.cvtColor(rgb1, o_image1, Imgproc.COLOR_RGB2RGBA);
  Imgproc.cvtColor(rgb2, o_image2, Imgproc.COLOR_RGB2RGBA);

  Utils.matToBitmap(o_image1, mBitmap1);
  mimageview1.setImageBitmap(mBitmap1);
  Utils.matToBitmap(o_image2, mBitmap2);
  mimageview2.setImageBitmap(mBitmap2);
  Utils.matToBitmap(o_image3, mBitmap3);
  mimageview3.setImageBitmap(mBitmap3);
  s_image1.release();
  s_image2.release(); 
  o_image1.release();
  o_image2.release(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T12:02:57.003

如果解决方案被锁定，我建议您使用 Android NDK 和 C++ 原生代码。它工作正常。[本教程](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/android_dev_intro.html)很好地解释了为 android 做 jni-opencv 项目的步骤

# java - 为什么我的内部类看不到我的外部类对象？

> ID：10197315
> 
> 赞同：1
> 
> 时间：2012-04-17T18:55:22.273
> 
> 标签：java

```
import javax.swing.*;
import javax.swing.event.*;

public class NewGUIStuff{
    public static void main(String args[]){
        NewGUIStuff gui = new NewGUIStuff();
        gui.go();
    }

    class handlesListListeners implements  ListSelectionListener{
        public void valueChanged(ListSelectionEvent lse){
            list.setVisibleRowCount(4);
        }
    }
    public void valueChanged(ListSelectionEvent lse){

    }
    public void go(){
        JFrame frame = new JFrame();
        JPanel panel = new JPanel();
        JList list;

        String[] aList = {"alpha","beta","gamma","delta","epsilon","zeta","eta","theta"};
        list = new JList(aList);
        list.addListSelectionListener(new handlesListListeners());
        JScrollPane scroller = new JScrollPane(list);
        scroller.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
        scroller.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);

        frame.setContentPane(scroller);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(300,300);
        frame.setVisible(true);
    }
} 
```

所以我的问题是如果内部类可以看到它们的外部类变量和对象，为什么内部类不能`handlesListListeners`看到`list`我在`NewGUIStuff`外部类中创建的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T18:58:28.083

答案是，“你的内部类可以看到外部类”，这不是你的问题。

您的问题是`NewGUIStuff`该类没有任何成员字段供内部类查看。`list`您声明的变量是该`go`方法的本地变量。

```
public class NewGUIStuff {
    JList list; //this is a member field

    ...

    public void go() {
        ...
        JList list; //this is a local variable
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T18:58:38.260

因为列表对象在 go() 方法的范围内，而不是 NewGUIStuff 类的范围内。列表对象只能在同一方法内“看到”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T19:02:02.530

如果声明了（在匿名内部类的情况下），非静态内部类可以看到外部类*实例*变量和它们被包围的那些局部变量（想想闭包）。`final`那些非静态内部类`this`对编译器插入的外部有一个隐式引用，这就是它们如何看待外部类的成员变量。包含匿名类的最终局部变量将隐式传递到编译器将为您生成的构造函数中，并存储在内部类本身的最终成员字段中。

在您的情况下，我看到您希望看到在完全不同的词汇上下文中定义的局部变量，您的内部类对此一无所知。将其转换为外部类成员变量，您的内部类将看到它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T18:58:44.513

您的`list`变量是方法的本地变量`go()`。如果您希望它可见，则需要将其设置为`NewGUIStuff`. 像这样的东西：

```
public class NewGUIStuff {

    private JList list = new JList(); // Member of outer class so in scope from handlesListListeners

    public static void main(String args[]) {
        NewGUIStuff gui = new NewGUIStuff();
        gui.go();
    }

    class handlesListListeners implements  ListSelectionListener {

        public void valueChanged(ListSelectionEvent lse) {
            list.setVisibleRowCount(4);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-17T18:58:49.770

这是因为`list`是`go()`函数中的局部变量。它超出了`handlesListListeners`课程的范围。

如果`list`是外部类的实例变量，那么内部类将能够看到它。或者，您也可以将内部类设为`go()`函数的本地类，这意味着它`list`现在在范围内：

```
void go() {
    final JList list = ...
    list.addListSelectionListener(new ListSelectionListener() {
        public void valueChanged(ListSelectionEvent event) {
            // list is now in scope
            list.setVisibleRowCount(4);
        }
    });
} 
```

注意如果以这种方式使用，`list`必须声明为**final 。**

# algorithm - 有效地计算在 Pi 的十进制扩展中重复的前 20 位子字符串

> ID：10197317
> 
> 赞同：13
> 
> 时间：2012-04-17T18:55:37.063
> 
> 标签：algorithm

## 问题

Pi = 3.14159 **26** 5358979323846 **26** 433... 所以要重复的第一个 2 位子串是 26。

找到要重复的前 20 位子字符串的有效方法是什么？

## 约束

*   我有大约 500 GB 的 Pi 数字（每个数字 1 个字节），以及大约 500 GB 的可用磁盘空间。

*   我有大约 5 GB 的可用 RAM。

*   我对一种适用于任意序列而不是 Pi 本身的特定答案的有效算法感兴趣。换句话说，我对“print 123....456”形式的解决方案不感兴趣，即使它打印的数字是正确的。

## 我试过的

我将每个子字符串放入一个哈希表并报告第一次冲突。

（哈希表被构造为一个有序链表的数组。数组的索引由字符串的底部数字给出（转换为整数），每个节点中存储的值是 Pi 展开中的位置子字符串第一次出现的地方。）

在我用完 RAM 之前，这一直很好。

为了扩展到更长的序列，我考虑过：

*   为从某个范围开始的所有子字符串生成哈希，然后继续搜索剩余的数字。这需要为每个范围重新扫描整个 Pi 序列，因此变为 N^2 阶

*   Bucket 将这组 20 位子串排序到多个文件中，然后使用哈希表分别在每个文件中查找第一个重复项。不幸的是，使用这种方法，我的磁盘空间不足，因此需要 20 次遍历数据。（如果我从 1000 位数字开始，那么我将得到 1000 个 20 位数字的子字符串。）

*   每个字节存储 2 位 Pi 以释放更多内存。

*   将基于磁盘的后备存储添加到我的哈希表中。我担心这会表现得很糟糕，因为没有明显的参考位置。

有更好的方法吗？

## 更新

1.  我尝试了 Adrian McCarthy 的 qsort 方法，但这似乎比散列查找重复项要慢一些

2.  我查看了 btilly 的 MapReduce 关于并行化算法的建议，但它在我的单台计算机上受大量 IO 限制，因此不适合我（使用我的单磁盘驱动器）

3.  昨晚我实现了 supercat 的方法来拆分文件并在前 180 亿位中搜索 19 位子字符串。

4.  这找到了 16 个匹配项，所以我使用 Jarred 的建议重新检查 19 位匹配项以找到第一个 20 位匹配项

搜索 180 亿位数字需要 3 小时来拆分文件，然后需要 40 分钟才能重新扫描文件以查找匹配项。

## 回答

20 位子串 84756845106452435773 位于 Pi 的十进制扩展中的位置 1,549,4062,637 和 17,601,613,330。

非常感谢大家！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T23:09:49.860

这是一个有趣的问题。

首先让我们做一些信封号码的背面。^(任何特定的 20 位数字序列将在 10 20)中匹配一次。如果我们走到第 n 位，我们大约有 n ² /2 对 20 位序列。因此，为了找到匹配的几率，我们可能需要 na 略高于 10 ^(10)。假设我们每条记录占用 40 字节，我们将需要大约 400 GB 的数据。（我们实际上需要比这更多的数据，所以我们应该为超过 TB 的数据做好准备。）

这让我们对所需的数据量有所了解。数百亿位数。数百 GB 的数据。

现在问题来了。如果我们使用任何需要随机访问的数据结构，随机访问时间由磁盘速度决定。假设您的磁盘以 6000 rpm 的速度运行。那是每秒 100 次。平均而言，您想要的数据位于磁盘的一半。因此，您平均每秒获得 200 次随机访问。（这可能因硬件而异。）访问它 100 亿次将需要 5000 万秒，即一年多。如果您读取、然后写入并最终需要 200 亿个数据点 - 您将超过硬盘驱动器的预计使用寿命。

另一种方法是以不随机访问的方式处理一批数据。经典是做一个好的外部排序，比如合并排序。假设我们有 1 TB 的数据，在排序期间我们读取 30 次，写入 30 次。（这两个估计都高于需要，但我在这里画的是最坏的情况。）假设我们的硬盘驱动器具有 100 MB/s 的持续吞吐量。然后每次通过需要 10,000 秒，持续 600,000 秒，略低于一周。这是非常可行的！（实际上它应该比这更快。）

所以这里是算法：

1.  从一长串数字开始，3141...
2.  把它变成一个更大的文件，其中每行是 20 位数字，然后是它在 pi 中出现的位置。
3.  对这个更大的文件进行排序。
4.  在排序后的文件中搜索任何重复项。
    1.  如果找到，则返回第一个。
    2.  如果没有找到，请用另一大块数字重复步骤 1-3。
    3.  将其合并到上一个排序的文件中。
    4.  重复此搜索。

现在这很好，但如果我们不想花一周时间呢？如果我们想扔多台机器怎么办？事实证明这非常容易。有众所周知的分布式排序算法。如果我们将初始文件分成块，我们可以并行化第 1 步和第 4 步。如果在第 4 步之后我们没有找到匹配项，那么我们可以从头开始重复更大的输入块。

事实上，这种模式很常见。真正不同的是把初始数据变成要排序的东西，然后查看匹配的组。这是[http://en.wikipedia.org/wiki/MapReduce](http://en.wikipedia.org/wiki/MapReduce)算法。这将很好地解决这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T19:48:13.170

**Trie**

RBarryYoung has pointed out that this will exceed the memory limits.

A [trie](http://en.wikipedia.org/wiki/Trie) data structure might be appropriate. In a single pass you can build up a trie with every prefix you've seen up to length n (e.g., n = 20). As you continue to process, if you ever reach a node at level n that already exists, you've just found a duplicate substring.

**Suffix Matching**

Another approach involves treating the expansion as a character string. This approach finds common suffixes, but you want common prefixes, so start by reversing the string. Create an array of pointers, with each pointer pointing to the next digit in the string. Then sort the pointers using a lexicographic sort. In C, this would be something like:

```
qsort(array, number_of_digits, sizeof(array[0]), strcmp); 
```

When the qsort finishes, similar substrings will be adjacent in the pointer array. So for every pointer, you can do a limited string comparison with that string and the one pointed to by the next pointer. Again, in C:

```
for (int i = 1; i < number_of_digits; ++i) {
  if (strncmp(array[i - 1], array[i], 20) == 0) {
    // found two substrings that match for at least 20 digits
    // the pointers point to the last digits in the common substrings
  }
} 
```

The sort is (typically) O(n log_2 n), and the search afterwards is O(n).

This approach was inspired by [this article](http://www.drdobbs.com/architecture-and-design/184404588).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T19:11:56.760

也许这样的事情会起作用：

1.  搜索长度为 2 的重复子串（或一些小的基本情况），记录起始索引 S={s_i}

2.  对于 n=3..N，从 S 中的索引中查找长度为 n 的子串

3.  每次迭代，用长度为 n 的子串更新 S

4.  在 n=20 时，前两个指标将是您的答案

您可能想要调整初始大小和步长（可能不需要每次都以 1 为单位）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-17T22:20:07.457

您的数据集非常大，因此需要某种“分而治之”。我建议作为第一步，您将问题细分为若干个部分（例如 100 个）。首先查看文件是否有任何重复的以 00 开头的 20 位序列，然后查看是否有任何以 01 开头的序列，以此类推直到 99。通过将所有以正确数字开头的 20 位序列。如果前两位数不变，则只需写出后 18 位；由于 18 位十进制数字适合 8 字节“长”，因此输出文件可能包含大约 5,000,000,000 个数字，占用 40GB 磁盘空间。请注意，一次生成多个输出文件可能是值得的，

一旦为特定的“主要通道”生成了数据文件，就必须确定其中是否有任何重复。根据存储在其中的数字中的位将其细分为一些较小的部分可能是一个很好的下一步。如果将其细分为 256 个较小的部分，则每个部分将有大约 16-32 百万个数字；5 GB 的 RAM 可用于为 256 个存储桶中的每一个存储一百万个数字。写出一百万个数字的每一块都需要随机磁盘寻道，但这样的写入次数相当合理（可能大约 10,000 次磁盘寻道）。

将数据细分为每个包含 16-32 百万个数字的文件后，只需将每个此类文件读入内存并查找重复项即可。

所描述的算法可能不是最优的，但它应该相当接近。最令人感兴趣的是这样一个事实，即减少一半的主要通道数将减少一个必须读取源数据文件的次数的一半，但是一旦其数据已经被处理，处理每个通道所需的时间就会增加一倍以上。复制。我猜想使用 100 次通过源文件可能不是最佳的，但使用该拆分因子的整个过程所需的时间将非常接近使用最佳拆分因子的时间。

# c# - LINQ：如何测试值是否包含在集合中

> ID：10197318
> 
> 赞同：4
> 
> 时间：2012-04-17T18:55:57.797
> 
> 标签：c#, linq

这可能是一个非常简单的 LINQ 问题。我正在使用 LINQ to SQL 并提取数据集。
我目前的代码是这样的：

```
var tempTable = (from p in dc.Live_Diffs
                    where p.RowNum = 50
                    select new CustomResult
                    {
                        RowNum = p.RowNum,
                        ED1 = p.ED1,
                        ED2 = p.ED2,
                        ED3 = p.ED3,
                        ED4 = p.ED4,
                        ED5 = p.ED5,
                        ED6 = p.ED6,
                        ED7 = p.ED7,
                        ED8 = p.ED8
                    }).ToList(); 
```

我如何指定 where 条件，如下所示`"where p.RowNum is in the set: {50,60,70}"`：
我有一个列表或双打，我希望避免使用大量的`"OR"`条件......

非常感谢 - kcross

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T18:57:59.687

像这样的东西应该适合你：

```
var listOfConditions = new List<int>{50,60,70};
var tempTable = (from p in dc.Live_Diffs
                             where listOfConditions.Contains(p.RowNum)
                             select new CustomResult
                             {   RowNum = p.RowNum ,
                                 ED1 = p.ED1,
                                 ED2 = p.ED2,
                                 ED3 = p.ED3,
                                 ED4 = p.ED4,
                                 ED5 = p.ED5,
                                 ED6 = p.ED6,
                                 ED7 = p.ED7,
                                 ED8 = p.ED8
                             }).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T18:58:34.507

您创建要查找的数字的列表或数组：

```
List<int> rowNums = new List<int> { 50, 60, 70, }; 
```

然后使用 . 检查它是否在该列表中`Contains()`。Linq-Sql 会把它变成一个`IN`或一个`OR`'s 的列表，我不记得是哪个了。

```
var tempTable = 
    (from p in dc.Live_Diffs 
    where rowNums.Contains(p.RowNum)
    select .... 
```

# android - Android 屏幕之间的转换

> ID：10197322
> 
> 赞同：0
> 
> 时间：2012-04-17T18:56:25.370
> 
> 标签：android, emulation, back-button

我的应用程序有屏幕，只有一个活动。我的主要活动是这样的：我有调用屏幕的方法，我没有使用活动（我在某处读到使用更复杂。）所以我使用了方法，但是有一个问题。

当我打开活动时，登录屏幕会**正常**

当我单击 loginBtn 时，listScreen 来**了**

但是，当我单击 listScreen 中的后退按钮返回 loginScreen 时，应用程序正在关闭并打开模拟器的主屏幕。

一般;

**loginScreen --> loginBtn --> listScreen --> listBtn --> writeScreen**

我想要的是用模拟器上的“后退”按钮回到这条路上。我不想通过覆盖后退按钮来做到这一点，因为这样我只能在方法中设置一件事。

```
public class EmailActivity extends Activity 
{
public void onCreate(Bundle savedInstanceState) 
        {
        super.onCreate(savedInstanceState);
        // setContentView(R.layout.main);
        loginScreen();
    }

public void loginScreen() 
{
        this.setContentView(R.layout.main);
                Button loginBtn = (Button) findViewById(R.id.btnLogin);

        loginBtn.setOnClickListener(new Button.OnClickListener() {

            @Override
            public void onClick(View v) 
                        {
                listScreen();
            }

        });
}

public void listScreen()
{
            this.setContentView(R.layout.list);
                Button listBtn = (Button) findViewById(R.id.btnList);

        listBtn.setOnClickListener(new Button.OnClickListener() {

            @Override
            public void onClick(View v) 
                        {
                setContentView(R.layout.writeScreen);
            }

        });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T18:59:47.570

因为您必须为应用程序中使用的每个屏幕编写一个 Activity...您只是在调用方法，而在内存中您只有一个 Activity，因此，后退按钮会弹出 Activity 并返回主页...阅读以下内容： [http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)

如果你想调用另一个屏幕（Activity）m，你创建一个 Intent 实例，它告诉系统“嘿！，调用我在这里传递的东西”，例如，你有两个活动，称为 A1 和 A2，如果你想从 A1 调用 A2，你必须这样做：

```
Intent intent = new Intent(A1.this,A2.class);
startActivity(intent); 
```

它会将 A2 推到 A1 上，所以当你按回时，你会得到 A1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:02:04.737

要返回上一个屏幕，您将需要使用不同的活动。现在您只有一个活动，当您按下后退按钮时，您的应用程序将关闭该活动，因此您的整个应用程序将关闭。

如果您仍然想这样做，您可以覆盖硬件返回按钮以调用上述方法而不是关闭应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T19:13:41.713

要直接回答您的问题，实现您所要求的唯一方法是覆盖后退按钮。后退按钮默认关闭当前活动并返回到上一个活动。在您的情况下，您只有一项活动，因此您的应用程序将关闭。覆盖后退按钮很容易，您仍然可以控制您的“视图”。

您可以使用活动类中的几个类级别字段（私有变量）来跟踪您的位置，例如

```
private int currentView;
private int lastView;
private static enum Views {LoginScreen, ListScreen}

...
...

public void loginScreen() 
{

    lastView = currentView;
    currentView = Views.LoginScreen;

    this.setContentView(R.layout.main);
            Button loginBtn = (Button) findViewById(R.id.btnLogin);

    loginBtn.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) 
                    {
            listScreen();
        }

    });
}

public void listScreen()
{

    lastView = currentView;
    currentView = Views.ListScreen;

    this.setContentView(R.layout.list);
    Button listBtn = (Button) findViewById(R.id.btnList);

    listBtn.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) 
                    {
            setContentView(R.layout.writeScreen);
        }

    });

} 
```

但是，您确实这样做是错误的，尤其是如果您想学习如何编写 Android 应用程序并可能在应用程序商店上发布一些应用程序。

活动更复杂，但有充分的理由，一旦你学会了基础知识，你就永远不会回头。我真的建议您为每个屏幕创建一个活动。你必须做更多的工作，但是你最终会更好地控制你的应用程序的行为方式和更好、更易于维护的代码。
[从这里开始](http://developer.android.com/reference/android/app/Activity.html)

如果您的目标是 HC 及以上，您可能还想查看 Fragments：

[碎片](http://developer.android.com/reference/android/app/Fragment.html)

去吧。你不会后悔的！

# actionscript-3 - Flashvars 不会通过 SWFObject 在 AS3 中注册

> ID：10197343
> 
> 赞同：0
> 
> 时间：2012-04-17T18:57:26.437
> 
> 标签：actionscript-3, flash, flashvars

我正在尝试将 URL/GET 变量加载到要在 AS3 中使用的 FlashVar 中。它只是在 AS3 中追溯为未定义。

这是我的 JS（$_GET['building'] 设置为某些东西并正确回显）：

```
<script type="text/javascript" src="<?php echo site_url(); ?>js/swfobject.js"></script>    
<script type="text/javascript">    
    <?php if(isset($_GET['building'])){ ?>
                var flashvars = { building: '_<?php echo $_GET['building']; ?>' };
            <?php } else { ?>
                var flashvars = {  };
            <?php } ?>
            var params = {};
            var attributes = {};
            swfobject.embedSWF("PlanEventTool_cs5-1.swf", "flashContent", "900", "700", '9.0.0', '<?php echo site_url(); ?>js/expressInstall.swf', flashvars, params, attributes);
    </script> 
```

还有我的 AS3：

```
var allFlashVars:Object = LoaderInfo(this.root.loaderInfo).parameters;
buildingString = String(allFlashVars['building']);
trace(buildingString); 
```

一直在看这个，我确定我错过了一些小东西。

有任何想法吗？

渲染的 JS：

```
var flashvars = { };
flashvars.building = "_grandstand"; 
var params = {};
var attributes = {};
var flashObj = "PlanEventTool_cs5-1.swf?t=" + new Date().getTime(); // anti-cahce
swfobject.embedSWF(flashObj, "flashContent", "900", "700", '9.0.0', 'expressInstall.swf', flashvars, params, attributes); 
```

呈现的 HTML：

```
<object width="900" height="700" type="application/x-shockwave-flash" data="PlanEventTool_cs5-1.swf?t=1334695440505" id="flashContent" style="visibility: visible;"><param name="flashvars" value="building=_grandstand"><param name="allowFullScreen" value="true"><param name="allowScriptAccess" value="always"><param name="AllowNetworking" value="all"></object> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:21:52.263

如果您确定 $_GET['building'] 存在，那么问题可能出在缓存的 SWF 上。
另外，我会稍微整理一下您的代码

```
<script type="text/javascript" src="<?php echo site_url(); ?>js/swfobject.js"></script>    
<script type="text/javascript">
     var flashvars = {  };
    <?php
      if(isset($_GET['building'])){ 
        echo 'flashvars.building = ' . $_GET['building'] . ';';
      }
     ?>
     var params = {};
     var attributes = {};
     var flashObj = "PlanEventTool_cs5-1.swf?t=" + new Date().getTime(); // anti-cache
     swfobject.embedSWF(flashObj , "flashContent", "900", "700", '9.0.0', '<?php echo site_url(); ?>js/expressInstall.swf', flashvars, params, attributes);
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T23:45:32.190

真的很奇怪。

我检查了你的代码，没有错误。

您是否删除了浏览器的缓存（当然，您的 html 页面已关闭）？

也许尝试事件`FRAME_CONSTRUCTED`或计时器，如果你延迟代码会发生什么？

# associations - 如何通过 Rails 中的 seed.rb 正确实现两个模型/对象的关联？

> ID：10197346
> 
> 赞同：1
> 
> 时间：2012-04-17T18:57:35.627
> 
> 标签：associations, has-many, belongs-to, seed, model-associations

所以，这里是交易：我有两个模型，一个球员和一个团队。每个球队都有_许多球员，每个球员都属于一个球队。代码（从播放器模型中省略了一些不必要的属性）：

```
class Team < ActiveRecord::Base
  attr_accessible :name, :points, :rank
  has_many :players

class Player < ActiveRecord::Base
  attr_accessible :name, :age, :pos, :team
  belongs_to :team 
```

我正在使用seeds.rb 创建几个团队和一群玩家，然后我尝试将玩家放入团队中（也就是说，我尝试实际实现“has_many”和“belongs_to”关联）。编码：

```
rndm = rand(1..10) #random number of teams

rndm.each do |i| #create rndm teams
  i = i.to_s
  Team.create(name: 'Team'+i, points: 0, ranking: 0)
end

for i in 1..rndm*22 do #create rndm*22 players (ideally 22 for each team)
  i = i.to_s
  Player.create(name: 'Player'+i, age: rand(15..35), 
                pos: 'Not specified', team: Team.find(rand(1..rndm)))
end 
```

现在，上面的代码可以很好地创建球队和球员。但是，它不会将球员与球队联系起来。它根本不将他们与团队联系起来。也就是说，当我在 rails 控制台中键入“@player = Player.find(1)”和“@player.team”时，我得到的只是“=> nil”。但是，当我通过键入“@player.team = Team.find(1)”自己指定团队（仍在控制台中）时，关联就可以很好地实现（导致“player.team”参数返回详细信息对于团队 ID 为：1) 的团队。

我假设我必须修改 Player 控制器或类似的东西？如果是这样，当我从控制台而不是从seeds.rb 关联这两个模型时，有什么不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:02:11.977

为了让播种方案正常工作，您必须在创建播放器时设置 team_id: 而不是 :team。

```
for i in 1..rndm*22 do #create rndm*22 players (ideally 22 for each team)
  i = i.to_s
  Player.create(name: 'Player'+i, age: rand(15..35), 
            pos: 'Not specified', team_id: Team.find(rand(1..rndm))).id
end 
```

# install4j - 如何自定义 install4j 中的初始进度对话框？

> ID：10197351
> 
> 赞同：1
> 
> 时间：2012-04-17T18:58:14.477
> 
> 标签：install4j

默认情况下，install4j 安装程序有一个带有进度的初始对话框，大概用于解压安装程序的 jre 等。此进度对话框提到 install4j 作为用于创建安装程序的工具。这可以在项目设置中使用“抑制初始进度对话框”复选框来抑制。

完全禁止此对话框并不是真正可取的，因为机器在解压缩时停滞不前，没有任何东西呈现给用户。

理想情况下，可以使用公司特定的图形/文本等自定义此对话框。

这可能吗？如果是这样，它是如何完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:54:23.800

在加载 JVM 之前，进度对话框位于安装程序的本机部分，因此自定义它不像安装程序屏幕那样灵活。显示的图标是安装程序可执行文件的图标，可以通过设置 Installer->Screens & Actions->Installer->Executable Icon 进行自定义。

您可以通过转到常规设置->语言，定义自定义本地化文件并覆盖消息来更改进度对话框上的消息：

PrepareInstaller=您自己的消息

# objective-c - 重载数据不起作用

> ID：10197354
> 
> 赞同：3
> 
> 时间：2012-04-17T18:58:26.663
> 
> 标签：objective-c, xcode, uitableview, ios5

我正在尝试更新我的 UITableview，但是当我调用`[tableView reloadData];`表格时，表格没有更新，在我滚动单元格名称上方的表格视图后，同时被更改。但它不是添加新行或类似的东西。

```
-(void)update {
        [tableView reloadData];

    NSLog(@" %i", [tableData count]);
} 
```

当我添加一行返回 2 但表没有更新时，它返回 1 的 nslog。

```
- (void) refresh:(id)sender {  

    NSString *jsonString = [NSString 
                            stringWithContentsOfURL:[NSURL URLWithString:xmlDataUrl] 
                            encoding:NSUTF8StringEncoding
                            error:nil];

    SBJSON *parser = [[SBJSON alloc] init];
    NSDictionary *results = [parser objectWithString:jsonString error:nil];

    parser = nil;

    [self setTableData:[results objectForKey:@"items"]];
        [self performSelector:@selector(update) withObject:nil afterDelay:.2];

} 
```

.

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        // Change UITableViewCellStyle
        cell = [[UITableViewCell alloc] 
                initWithStyle:UITableViewCellStyleSubtitle 
                reuseIdentifier:CellIdentifier];
    }

    NSDictionary *item = [tableData objectAtIndex:[indexPath row]];
    [[cell textLabel] setText:[item objectForKey:@"title"]];
    [[cell detailTextLabel] setText:[item objectForKey:@"descript"]];
    [[cell detailTextLabel] setText:[item objectForKey:@"detail"]]; 
```

.

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

        return [tableData count];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T23:10:27.627

每次我看到这个问题都是因为`UITableView`没有连接插座。结果，`reloadData`呼叫被发送到`nil`。在这种情况下，这几乎可以肯定是错误的。这可以通过简单的日志语句轻松测试。

```
-(void)update {
    NSLog(@"tableView is '%@'",tableView);
    [tableView reloadData];
    NSLog(@" %i", [tableData count]);
} 
```

您很可能会`tableView is (null)`在控制台中看到。

*旁注*：表格视图完全填充的事实表明`dataSource`和`delegate`插座已连接。

# android - Android 不支持的线程

> ID：10197357
> 
> 赞同：0
> 
> 时间：2012-04-17T18:58:33.190
> 
> 标签：android, multithreading

我在 android 4.0 + 上收到此错误，也许是 3.0 + 用户。不是 2.3 以下的用户 我该怎么做才能解决这个问题？希望有一个快速的答案，用户抱怨:(

`java.lang.UnsupportedOperationException at java.lang.Thread.stop(Thread.java:1076) at java.lang.Thread.stop(Thread.java:1063) at application.application.Splash$1.run(Splash.java:51)`

```
static int destroy = 0; 
```

protected boolean _active = true; 受保护的 int _splashTime = 5000;

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
     super.onCreate(savedInstanceState);

    setContentView(R.layout.splash);

     Thread splashTread = new Thread() {
            @Override
            public void run() {
                try {
                    int waited = 0;
                    while(_active && (waited < _splashTime)) {
                        sleep(100);
                        if(_active) {
                            waited += 100;
                        }
                    }
                } catch(InterruptedException e) {
                    // do nothing
                } finally {
                    finish();
                    startActivity(new Intent("app.app.TABHOST"));
                    stop();
                }
            }
        };
        splashTread.start();

}

public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        _active = false;
    }
    return true;

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:04:17.427

**当您调用thread.stop()**时会引发此异常.. 因为 stop() 已被弃用。因此，您应该尝试另一种方法而不调用 stop 方法。我认为您可以删除 stop 方法..因为一旦线程完成它的功能它处于死状态..所以可以忽略..尝试删除 stop()

# php - 正确使用 call_user_func_array

> ID：10197362
> 
> 赞同：0
> 
> 时间：2012-04-17T18:58:40.540
> 
> 标签：php, callback, smarty, argument-passing, lithium

我正在尝试使用 smarty 扩展 Lithium PHP，除了我的 smarty 插件允许访问锂助手之外，一切正常。

我的 smarty 功能旨在成为锂帮手的“总括”。我正在努力的部分是动态地将助手参数添加到我的回调中。

**简化代码**

```
$params = array('Google', 'http://www.google.com');

$helper = function($args){  
    return $this->html->link($args);
};

return call_user_func_array($helper, $params); 
```

这导致`<a href="/Google">Google</a>`

一些进一步的测试表明，上面只将 $params 数组中的第一项传递给回调......奇怪。所以我将它包装在自己的数组中。拿那个，我无法解释的事情！

```
return call_user_func_array($helper, array($params)); 
```

这会产生一个锂错误，我不会进入，但是看起来助手正在传递一个数组，而不是从数组中翻译的参数作为单独的参数。

**错误片段** “未找到 URL 的参数匹配项`( 0 => 'Google', 1 => 'http://www.google.com', 'controller' => 'pages', 'action' => 'index')`。

所以我认为我错过了 call_user_func_array 方法。

我不认为这是实现我的目标的唯一解决方案，如果您能想到一种更好的方法来随时动态地传递函数任意数量的参数，我会很高兴。

> **请注意**：$this-> `html`->`link`是解释我的问题的一种简化方法，该对象的`html`和`link`部分实际上会动态变化，因此需要完全动态的函数参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:02:30.370

`$helper`只用一个参数声明，并且只有一个被转移到`$this->html->link`.

为什么不`call_user_func_array(array($this->html, 'link'), array($params));`直接使用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:05:23.417

你为什么不做

```
return $helper($params); 
```

`call_user_func_array()`在我看来没有必要。
或者请澄清你为什么想要这个，因为对我来说这有效。

# c++ - C++ 中的 ispunct() 函数

> ID：10197363
> 
> 赞同：1
> 
> 时间：2012-04-17T18:58:41.970
> 
> 标签：c++

```
char punct(char a[], int len) {
    for (int i = 0; i < len; i++) {
        if (ispunct(a[i]))
            { return i; }
        return -1;
    }
} 
```

谁能告诉我为什么这个函数只为我交给它的每个字符串返回-1？我正在编写一个程序来从 .txt 文件中获取单词并将它们（稍作改动）输出到不同的 .txt 文件中，我需要从字符串中删除标点符号。但是，我似乎无法检测到标点符号在哪里使用 ispunct() 函数。我什至使用我能想象到的所有标点符号编写了自己的函数，但它仍然只返回-1。是这里的函数还是我给它的字符串有问题？如果需要显示更多我的代码，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T19:00:02.697

那是因为 if`ispunct(a[0])`返回`false`,`return -1`被调用。

您应该将默认返回移到循环之外：

```
char punct(char a[], int len) {
    for (int i = 0; i < len; i++) {
        if (ispunct(a[i]))
            { return i; }
    }
    return -1;
} 
```

请注意，此函数仅返回第一个标点索引，而不是所有索引。我猜你是在函数之外处理这种情况。

# android - Android 启动/停止服务

> ID：10197369
> 
> 赞同：2
> 
> 时间：2012-04-17T18:58:51.780
> 
> 标签：android, service, android-activity

我有一个包含多个活动的应用程序。所有活动都必须访问本地服务。我希望在启动应用程序时启动服务，并在启动应用程序时停止

a) App 被销毁（返回键）

b) 应用程序停止（主页键）

c) 设备处于深度睡眠（电源键）

基本上，当没有可见活动时，服务不应该运行。

我在 onResume() 中的每个活动中绑定服务，并在 onPause() 中的每个活动中取消绑定服务。不幸的是，每次我切换活动时都会重新创建服务，因为在新活动绑定它之前服务会被解除绑定。

有人现在如何防止这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:25:51.253

假设您正在与 Context.BIND_AUTO_CREATE 绑定，那么您就快到了。在 onStart() 中绑定服务并在 onStop() 中取消绑定。当应用程序从第一个活动切换到第二个活动时，您应该会发现第二个活动的开始发生在第一个活动的停止之前。我在我的应用程序中使用了这种技术并记录了所有 on.. 方法；当我切换时，它们按此顺序发生：

```
 FIRST Activity onCreate
 FIRST Activity onStart
 FIRST Activity onResume
 FIRST Activity onPause
 SECOND Activity onCreate
 SECOND Activity onStart
 SECOND Activity onResume
 FIRST Activity onStop 
```

因此，暂时有两个活动与服务绑定，这完全没有害处。当没有活动绑定时，服务将停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:18:33.770

看看[这个](http://developer.android.com/guide/topics/fundamentals/bound-services.html#Lifecycle)。

> 但是，如果选择实现 onStartCommand() 回调方法，则必须显式停止服务，因为现在认为服务已启动。在这种情况下，服务将一直运行，直到服务使用 stopSelf() 或另一个组件调用 stopService() 自行停止，无论它是否绑定到任何客户端。

# php - Windows 上 PHP 的 Oauth

> ID：10197371
> 
> 赞同：1
> 
> 时间：2012-04-17T18:59:00.680
> 
> 标签：php, windows, oauth, pear, dropbox

由于以下错误，我无法使用 Dropbox PHP API (http://code.google.com/p/dropbox-php/)。我尝试通过下载预编译的 dll 并将其放在 ext 目录中来安装 OAuth 扩展，还尝试安装 PEAR 库替代方案，但这不起作用并显示以下错误。我什至在 php.ini 中启用了 oauth 扩展，但它只是抛出以下错误：

```
Fatal error: Uncaught exception 'Dropbox_Exception' with message 'The OAuth class could not be found! Did you install and enable the oauth extension?' in C:\xampp\php\PEAR\Dropbox\OAuth\PHP.php:36 Stack trace: #0 C:\xampp\htdocs\assets\php\dropbox.php(11): Dropbox_OAuth_PHP->__construct('xxxxxxxxxxxx', 'xxxxxxxxxxxxxx') #1 {main} thrown in C:\xampp\php\PEAR\Dropbox\OAuth\PHP.php on line 36 
```

我在 Windows 上使用 XAMPP 1.7.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:14:46.973

创建一个`.php`包含以下内容的新文件：

```
<?php phpinfo(); ?> 
```

从您的网络服务器在您的网络浏览器中打开它。OAuth 是否列为已安装的扩展程序？

如果不是（我假设），那么您忘记在`php.ini`文件中加载扩展名。

打开`php.ini`文件（位置在输出中也可见`phpinfo()`）并添加

```
extension=oauth.dll 
```

给它。然后重新启动您的网络服务器。

# c - 带有位域的联合和结构的 C 到 Delphi 转换

> ID：10197375
> 
> 赞同：0
> 
> 时间：2012-04-17T18:59:13.673
> 
> 标签：c, delphi

有人可以解释如何转换

```
typedef struct _X86_SELECTOR
{
union
    {
    struct
        {
        WORD wValue;            // packed value
        WORD wReserved;
        };
    struct
        {
        unsigned RPL      :  2; // requested privilege level
        unsigned TI       :  1; // table indicator: 0=gdt, 1=ldt
        unsigned Index    : 13; // index into descriptor table
        unsigned Reserved : 16;
        };
    };
}
X86_SELECTOR, *PX86_SELECTOR, **PPX86_SELECTOR;

#define X86_SELECTOR_ sizeof (X86_SELECTOR)

// -----------------------------------------------------------------

typedef struct _X86_DESCRIPTOR
{
union
    {
    struct
        {
        DWORD dValueLow;        // packed value
        DWORD dValueHigh;
        };
    struct
        {
        unsigned Limit1   : 16; // bits 15..00
        unsigned Base1    : 16; // bits 15..00
        unsigned Base2    :  8; // bits 23..16
        unsigned Type     :  4; // segment type
        unsigned S        :  1; // type (0=system, 1=code/data)
        unsigned DPL      :  2; // descriptor privilege level
        unsigned P        :  1; // segment present
        unsigned Limit2   :  4; // bits 19..16
        unsigned AVL      :  1; // available to programmer 
        unsigned Reserved :  1;
        unsigned DB       :  1; // 0=16-bit, 1=32-bit
        unsigned G        :  1; // granularity (1=4KB)
        unsigned Base3    :  8; // bits 31..24
        };
    };
}
X86_DESCRIPTOR, *PX86_DESCRIPTOR, **PPX86_DESCRIPTOR; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T22:31:21.543

没有直接翻译，因为 Delphi 不像 C 那样支持位域。最接近的交易将类似于以下内容：

```
type
  X86_SELECTOR = record
    case Integer of
      0: (
        wValue: WORD; // packed value
        wReserved: WORD);
      1: (
        BitValues: DWORD);
  end;
  PX86_SELECTOR = ^X86_SELECTOR;
  PPX86_SELECTOR = ^PX86_SELECTOR;

const
  X86_SELECTOR_ = SizeOf(X86_SELECTOR);

type
  X86_DESCRIPTOR = record
    case Integer of
      0: (
        dValueLow: DWORD; // packed value
        dValueHigh: DWORD);
      1: (
        BitFields1: DWORD;
        BitFields2: DWORD);
  end;
  PX86_DESCRIPTOR = ^X86_DESCRIPTOR;
  PPX86_DESCRIPTOR = ^PX86_DESCRIPTOR;

function X86_SELECTOR_Get_RPL(const Selector: X86_SELECTOR): Byte;
begin
  Result := Byte((Selector.BitValues and $C0000000) shr 30);
end;

procedure X86_SELECTOR_Set_RPL(var Selector: X86_SELECTOR; Value: Byte);
begin
  Selector.BitValues := (Selector.BitValues and $3FFFFFFF) or (DWORD(Value and $03) shl 30);
end;

function X86_SELECTOR_Get_TI(const Selector: X86_SELECTOR): Boolean;
begin
  Result := (Selector.BitValues and $20000000) <> 0;
end;

procedure X86_SELECTOR_Set_TI(var Selector: X86_SELECTOR; Value: Boolean);
begin
  Selector.BitValues := (Selector.BitValues and $DFFFFFFF) or (DWORD(Ord(Value)) shl 29);
end;

function X86_SELECTOR_Get_Index(const Selector: X86_SELECTOR): WORD;
begin
  Result := Word((Selector.BitValues and $1FFF0000) shr 16);
end;

procedure X86_SELECTOR_Set_Index(var Selector: X86_SELECTOR; Value: WORD);
begin
  Selector.BitValues := (Selector.BitValues and $E000FFFF) or (DWORD(Value and $1FFF) shl 16);
end;

function X86_SELECTOR_Get_Reserved(const Selector: X86_SELECTOR): Word;
begin
  Result := Word(Selector.BitValues and $FFFF);
end;

procedure X86_SELECTOR_Set_Reserved(var Selector: X86_SELECTOR; Value: Word);
begin
  Selector.BitValues := (Selector.BitValues and $FFFF0000) or DWORD(Value);
end;

function X86_DESCRIPTOR_Get_Limit1(const Descriptor: X86_DESCRIPTOR): Word;
begin
  Result := Word(Descriptor.BitFields1 and $FFFF0000) shr 16);
end;

procedure X86_DESCRIPTOR_Set_Limit1(var Descriptor: X86_DESCRIPTOR; Value: Word);
begin
  Descriptor.BitFields1 := (Descriptor.BitFields1 and $0000FFFF) or (DWORD(Value) shl 16);
end;

function X86_DESCRIPTOR_Get_Base1(const Descriptor: X86_DESCRIPTOR): Word;
begin
  Result := Word(Descriptor.BitFields1 and $0000FFFF);
end;

procedure X86_DESCRIPTOR_Set_Base1(var Descriptor: X86_DESCRIPTOR; Value: Word);
begin
  Descriptor.BitFields1 := (Descriptor.BitFields1 and $FFFF0000) or DWORD(Value);
end;

function X86_DESCRIPTOR_Get_Base2(const Descriptor: X86_DESCRIPTOR): Byte;
begin
  Result := Byte((Descriptor.BitFields2 and $FF000000) shr 24);
end;

procedure X86_DESCRIPTOR_Set_Base2(var Descriptor: X86_DESCRIPTOR; Value: Byte);
begin
  Descriptor.BitFields2 := (Descriptor.BitFields2 and $00FFFFFF) or (DWORD(Value) shl 24);
end;

function X86_DESCRIPTOR_Get_Type(const Descriptor: X86_DESCRIPTOR): Byte;
begin
  Result := Byte((Descriptor.BitFields2 and $00F00000) shr 20);
end;

procedure X86_DESCRIPTOR_Set_Type(var Descriptor: X86_DESCRIPTOR; Value: Byte);
begin
  Descriptor.BitFields2 := (Descriptor.BitFields2 and $FF0FFFFF) or (DWORD(Value and $0F) shl 20);
end;

function X86_DESCRIPTOR_Get_S(const Descriptor: X86_DESCRIPTOR): Boolean;
begin
  Result := (Descriptor.BitFields2 and $00080000) <> 0;
end;

procedure X86_DESCRIPTOR_Set_S(var Descriptor: X86_DESCRIPTOR; Value: Boolean);
begin
  Descriptor.BitFields2 := (Descriptor.BitFields2 and $FFF7FFFF) or (DWORD(Ord(Value)) shl 19);
end;

function X86_DESCRIPTOR_Get_DPL(const Descriptor: X86_DESCRIPTOR): Byte;
begin
  Result := Byte((Descriptor.BitFields2 and $00060000) shr 17);
end;

procedure X86_DESCRIPTOR_Set_DPL(var Descriptor: X86_DESCRIPTOR; Value: Byte);
begin
  Descriptor.BitFields2 := (Descriptor.BitFields2 and $FFF9FFFF) or (DWORD(Value and $03) shl 17);
end;

function X86_DESCRIPTOR_Get_P(const Descriptor: X86_DESCRIPTOR): Boolean;
begin
  Result := (Descriptor.BitFields2 and $00010000) <> 0;
end;

procedure X86_DESCRIPTOR_Set_P(var Descriptor: X86_DESCRIPTOR; Value: Boolean);
begin
  Descriptor.BitFields2 := (Descriptor.BitFields2 and $FFFEFFFF) or (DWORD(Ord(Value)) shl 16);
end;

function X86_DESCRIPTOR_Get_Limit2(const Descriptor: X86_DESCRIPTOR): Byte;
begin
  Result := Byte((Descriptor.BitFields2 and $0000F000) shr 12);
end;

procedure X86_DESCRIPTOR_Set_Limit2(var Descriptor: X86_DESCRIPTOR; Value: Byte);
begin
  Descriptor.BitFields2 := (Descriptor.BitFields2 and $FFF9FFFF) or (DWORD(Value and $0F) shl 12);
end;

function X86_DESCRIPTOR_Get_AVL(const Descriptor: X86_DESCRIPTOR): Boolean;
begin
  Result := (Descriptor.BitFields2 and $00000800) <> 0;
end;

procedure X86_DESCRIPTOR_Set_AVL(var Descriptor: X86_DESCRIPTOR; Value: Boolean);
begin
  Descriptor.BitFields2 := (Descriptor.BitFields2 and $FFFFF7FF) or (DWORD(Ord(Value)) shl 11);
end;

function X86_DESCRIPTOR_Get_Reserved(const Descriptor: X86_DESCRIPTOR): Boolean;
begin
  Result := (Descriptor.BitFields2 and $00000400) <> 0;
end;

procedure X86_DESCRIPTOR_Set_Reserved(var Descriptor: X86_DESCRIPTOR; Value: Boolean);
begin
  Descriptor.BitFields2 := (Descriptor.BitFields2 and $FFFFFBFF) or (DWORD(Ord(Value)) shl 10);
end;

function X86_DESCRIPTOR_Get_DB(const Descriptor: X86_DESCRIPTOR): Boolean;
begin
  Result := (Descriptor.BitFields2 and $00000200) <> 0;
end;

procedure X86_DESCRIPTOR_Set_DB(var Descriptor: X86_DESCRIPTOR; Value: Boolean);
begin
  Descriptor.BitFields2 := (Descriptor.BitFields2 and $FFFFFDFF) or (DWORD(Ord(Value)) shl 9);
end;

function X86_DESCRIPTOR_Get_G(const Descriptor: X86_DESCRIPTOR): Boolean;
begin
  Result := (Descriptor.BitFields2 and $00000100) <> 0;
end;

procedure X86_DESCRIPTOR_Set_G(var Descriptor: X86_DESCRIPTOR; Value: Boolean);
begin
  Descriptor.BitFields2 := (Descriptor.BitFields2 and $FFFFFEFF) or (DWORD(Ord(Value)) shl 8);
end;

function X86_DESCRIPTOR_Get_Base3(const Descriptor: X86_DESCRIPTOR): Byte;
begin
  Result := Byte(Descriptor.BitFields2 and $000000FF);
end;

procedure X86_DESCRIPTOR_Set_Base3(var Descriptor: X86_DESCRIPTOR; Value: Byte);
begin
  Descriptor.BitFields2 := (Descriptor.BitFields2 and $FFFFFF00) or DWORD(Value);
end; 
```

如果您使用的是支持记录属性的现代版本的 Delphi，您可以改为执行以下操作：

```
type
  X86_SELECTOR = record
  private
    function Get_RPL: Byte;
    procedure Set_RPL(Value: Byte);
    function Get_TI: Boolean;
    procedure Set_TI(Value: Boolean);
    function Get_Index: WORD;
    procedure Set_Index(Value: WORD);
    function Get_Reserved: Word;
    procedure Set_Reserved(Value: Word);
  public
    property RPL: Byte read Get_RPL write Set_RPL;
    property TI: boolean read Get_TI write Set_TI;
    property Index: Word read Get_Index write Set_Index;
    property Reserved: Word read Get_Reserved write Set_Reserved;

    case Integer of
      0: (
        wValue: WORD; // packed value
        wReserved: WORD);
      1: (
        BitValues: DWORD);
  end;
  PX86_SELECTOR = ^X86_SELECTOR;
  PPX86_SELECTOR = ^PX86_SELECTOR;

const
  X86_SELECTOR_ = SizeOf(X86_SELECTOR);

type
  X86_DESCRIPTOR = record
  private
    function Get_Limit1: Word;
    procedure Set_Limit1(Value: Word);
    function Get_Base1: Word;
    procedure Set_Base1(Value: Word);
    function Get_Base2: Byte;
    procedure Set_Base2(Value: Byte);
    function Get_Type: Byte;
    procedure Set_Type(Value: Byte);
    function Get_S: Boolean;
    procedure Set_S(Value: Boolean);
    function Get_DPL: Byte;
    procedure Set_DPL(Value: Byte);
    function Get_P: Boolean;
    procedure Set_P(Value: Boolean);
    function Get_Limit2: Byte;
    procedure Set_Limit2(Value: Byte);
    function Get_AVL: Boolean;
    procedure Set_AVL(Value: Boolean);
    function Get_Reserved: Boolean;
    procedure Set_Reserved(Value: Boolean);
    function Get_DB: Boolean;
    procedure Set_DB(Value: Boolean);
    function Get_G: Boolean;
    procedure Set_G(Value: Boolean);
    function Get_Base3: Byte;
    procedure Set_Base3(Value: Byte);
  public
    property Limit1: Word read Get_Limit1 write Set_Limit1;
    property Base1: Word read Get_Base1 write Set_Base1;
    property Base2: Byte read Get_Base2 write Set_Base2;
    property Type: Byte read Get_Type write Set_Type;
    property S: Boolean read Get_S write Set_S;
    property DPL: Byte read Get_DPL write Set_DPL;
    property P: Boolean read Get_P write Set_P;
    property Limit2: Byte read Get_Limit2 write Set_Limit2;
    property AVL: Boolean read Get_AVL write Set_AVL;
    property Reserved: Boolean read Get_Reserved write Set_Reserved;
    property DB: Boolean read Get_DB write Set_DB;
    property G: Boolean read Get_G write Set_G;
    property Base3: Byte read Get_Base3 write Set_Base3;

    case Integer of
      0: (
        dValueLow: DWORD; // packed value
        dValueHigh: DWORD);
      1: (
        BitFields1: DWORD;
        BitFields2: DWORD);
  end;
  PX86_DESCRIPTOR = ^X86_DESCRIPTOR;
  PPX86_DESCRIPTOR = ^PX86_DESCRIPTOR;

function X86_SELECTOR.Get_RPL: Byte;
begin
  Result := Byte((Self.BitValues and $C0000000) shr 30);
end;

procedure X86_SELECTOR.Set_RPL(Value: Byte);
begin
  Self.BitValues := (Self.BitValues and $3FFFFFFF) or (DWORD(Value and $03) shl 30);
end;

function X86_SELECTOR.Get_TI: Boolean;
begin
  Result := (Self.BitValues and $20000000) <> 0;
end;

procedure X86_SELECTOR.Set_TI(Value: Boolean);
begin
  Self.BitValues := (Self.BitValues and $DFFFFFFF) or (DWORD(Ord(Value)) shl 29);
end;

function X86_SELECTOR.Get_Index: WORD;
begin
  Result := Word((Self.BitValues and $1FFF0000) shr 16);
end;

procedure X86_SELECTOR.Set_Index(Value: WORD);
begin
  Self.BitValues := (Self.BitValues and $E000FFFF) or (DWORD(Value and $1FFF) shl 16);
end;

function X86_SELECTOR.Get_Reserved: Word;
begin
  Result := Word(Self.BitValues and $FFFF);
end;

procedure X86_SELECTOR.Set_Reserved(Value: Word);
begin
  Self.BitValues := (Self.BitValues and $FFFF0000) or DWORD(Value);
end;

function X86_DESCRIPTOR.Get_Limit1: Word;
begin
  Result := Word(Self.BitFields1 and $FFFF0000) shr 16);
end;

procedure X86_DESCRIPTOR.Set_Limit1(Value: Word);
begin
  Self.BitFields1 := (Self.BitFields1 and $0000FFFF) or (DWORD(Value) shl 16);
end;

function X86_DESCRIPTOR.Get_Base1: Word;
begin
  Result := Word(Self.BitFields1 and $0000FFFF);
end;

procedure X86_DESCRIPTOR.Set_Base1(Value: Word);
begin
  Self.BitFields1 := (Self.BitFields1 and $FFFF0000) or DWORD(Value);
end;

function X86_DESCRIPTOR.Get_Base2: Byte;
begin
  Result := Byte((Self.BitFields2 and $FF000000) shr 24);
end;

procedure X86_DESCRIPTOR.Set_Base2(Value: Byte);
begin
  Self.BitFields2 := (Self.BitFields2 and $00FFFFFF) or (DWORD(Value) shl 24);
end;

function X86_DESCRIPTOR.Get_Type: Byte;
begin
  Result := Byte((Self.BitFields2 and $00F00000) shr 20);
end;

procedure X86_DESCRIPTOR.Set_Type(Value: Byte);
begin
  Self.BitFields2 := (Self.BitFields2 and $FF0FFFFF) or (DWORD(Value and $0F) shl 20);
end;

function X86_DESCRIPTOR.Get_S: Boolean;
begin
  Result := (Self.BitFields2 and $00080000) <> 0;
end;

procedure X86_DESCRIPTOR.Set_S(Value: Boolean);
begin
  Self.BitFields2 := (Self.BitFields2 and $FFF7FFFF) or (DWORD(Ord(Value)) shl 19);
end;

function X86_DESCRIPTOR.Get_DPL: Byte;
begin
  Result := Byte((Self.BitFields2 and $00060000) shr 17);
end;

procedure X86_DESCRIPTOR.Set_DPL(Value: Byte);
begin
  Self.BitFields2 := (Self.BitFields2 and $FFF9FFFF) or (DWORD(Value and $03) shl 17);
end;

function X86_DESCRIPTOR.Get_P: Boolean;
begin
  Result := (Self.BitFields2 and $00010000) <> 0;
end;

procedure X86_DESCRIPTOR.Set_P(Value: Boolean);
begin
  Self.BitFields2 := (Self.BitFields2 and $FFFEFFFF) or (DWORD(Ord(Value)) shl 16);
end;

function X86_DESCRIPTOR.Get_Limit2: Byte;
begin
  Result := Byte((Self.BitFields2 and $0000F000) shr 12);
end;

procedure X86_DESCRIPTOR.Set_Limit2(Value: Byte);
begin
  Self.BitFields2 := (Self.BitFields2 and $FFF9FFFF) or (DWORD(Value and $0F) shl 12);
end;

function X86_DESCRIPTOR.Get_AVL: Boolean;
begin
  Result := (Self.BitFields2 and $00000800) <> 0;
end;

procedure X86_DESCRIPTOR.Set_AVL(Value: Boolean);
begin
  Self.BitFields2 := (Self.BitFields2 and $FFFFF7FF) or (DWORD(Ord(Value)) shl 11);
end;

function X86_DESCRIPTOR.Get_Reserved: Boolean;
begin
  Result := (Self.BitFields2 and $00000400) <> 0;
end;

procedure X86_DESCRIPTOR.Set_Reserved(Value: Boolean);
begin
  Self.BitFields2 := (Self.BitFields2 and $FFFFFBFF) or (DWORD(Ord(Value)) shl 10);
end;

function X86_DESCRIPTOR.Get_DB: Boolean;
begin
  Result := (Self.BitFields2 and $00000200) <> 0;
end;

procedure X86_DESCRIPTOR.Set_DB(Value: Boolean);
begin
  Self.BitFields2 := (Self.BitFields2 and $FFFFFDFF) or (DWORD(Ord(Value)) shl 9);
end;

function X86_DESCRIPTOR.Get_G: Boolean;
begin
  Result := (Self.BitFields2 and $00000100) <> 0;
end;

procedure X86_DESCRIPTOR.Set_G(Value: Boolean);
begin
  Self.BitFields2 := (Self.BitFields2 and $FFFFFEFF) or (DWORD(Ord(Value)) shl 8);
end;

function X86_DESCRIPTOR.Get_Base3: Byte;
begin
  Result := Byte(Self.BitFields2 and $000000FF);
end;

procedure X86_DESCRIPTOR.Set_Base3(Value: Byte);
begin
  Self.BitFields2 := (Self.BitFields2 and $FFFFFF00) or DWORD(Value);
end; 
```

# xpath - XPATH - 对吗？

> ID：10197377
> 
> 赞同：1
> 
> 时间：2012-04-17T18:59:16.943
> 
> 标签：xpath

我正在使用以下 xpath 来获取如下图所示的部分（[http://advrider.com/forums/](http://advrider.com/forums/)），但不是。有什么问题吗？

```
//TABLE/TBODY/TR[@class='dg-forums-level2 dg-align-center']/TD[2]/DIV[1]/A[1] 
```

![在此处输入图像描述](../Images/04de3eafcf22d7f63a166a485302976b.png)

**更新**

```
<?php
$BASE_PATH = "../src/";

include_once($BASE_PATH  . "classes/forumdb.php");
include_once($BASE_PATH  . "classes/curl.php");

$curl = new curl();
$html = $curl->get_web_page('http://advrider.com/forums/');

$doc = new DOMDocument();
$doc->loadHTML($html);

$xpath = new DOMXpath($doc);

//$elements = $xpath->query("//TABLE[@class='tborder']/TBODY/TR[@class='']/TD[2]/DIV[1]/A[1]/STRONG[1]");

$elements = $xpath->query("//*[@id='f3']"); //works
//$elements = $xpath->query("//TABLE/TBODY/TR");

//TD[@id='f74']/DIV[1]/A[1]

if (!is_null($elements))
{

  foreach ($elements as $element)
  {
    echo "f<br/>[". $element->nodeName. "]";
    $nodes = $element->childNodes;
    foreach ($nodes as $node)
    {
      echo $node->nodeValue. "\n";
    }
  }
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-28T13:34:25.617

```
//li[div[@class='nodeInfo categoryNodeInfo categoryStrip' and div/h3/a[text()='Riding']]]//div[@class='nodeText']/h3[@class='nodeTitle'] 
```

使用它并尽量避开像 TD[2]/DIV[1]/A[1] 这样的地方。具有类的选择器比 DOM 树中具有数字位置的选择器更脆弱。

我希望它会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-27T19:51:24.040

我会用这个：

```
//*[@class="nodeTitle"]/a 
```

**`[`demo`](http://xpatheval.apphb.com/O47p8vwUn)`**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-17T06:03:37.147

你可以试试下面的xpath：

`//ol[@class='nodeList']//*[@class='nodeTitle']//a`

它将找到页面中的所有部分。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-06-15T05:50:26.130

要获取部分详细信息文本或 url，请在 xpath 下方使用这些

```
//h3[@class="nodeTitle"]/a[@data-description]/text() #To grap text
//h3[@class="nodeTitle"]/a[@data-description]/@href #To grap url 
```

# php - 隐藏表单不会将变量传递给 php

> ID：10197380
> 
> 赞同：-4
> 
> 时间：2012-04-17T18:59:38.967
> 
> 标签：php, javascript, forms

我使用 js 将变量分配给隐藏表单的值。但是，当我尝试在 php 中访问它时，什么也没有出现。我知道 javascript 正在正确地将值添加到表单中，但是由于某种原因 php 无法得到它。继承人的代码：

```
<html>
<head>

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="textualizer.min.js"></script>

</head>

<style type="text/css">

#txtlzr{color:#585856; font-size:50px; width:1200px; height:100px;
margin-left:10%;
margin-top:80px;
font-family:"futura";
position: fixed;
}
</style>

<body>

<div id="txtlzr"></div>

<form name="kwoteForm" action="main.php" method="post"/>
<input type="hidden" id="kwoteString" name="kwoteString" value="bob" />
<input class="kwote" type="text" maxlength="40" id="kwote"placeholder="Enter a something here."/>
<input class="name" type="text" maxlength="17" id="name" placeholder="Enter your name."/>
<input class="post" type="submit" value="Add comment" onclick="add_comment();" />
</form>

<script language="javascript">

var COMMENTS_FOR_DISPLAY = new Array('OOOOOOO ITS WORKING : NICK');

// Adds a new comment, name pair to the Array feeding textualizer.
function add_comment() {
  // Retrieve values and add them to Array.
  var new_comment = $('#kwote').val();
  var new_name = $('#name').val();

   COMMENTS_FOR_DISPLAY.push(new_comment + ': ' + new_name);

  // Reset <input> fields.
  $('#kwote').val('');
  $('#name').val('');

  //Take comment array and put it into a string.
  var arrayAsString = JSON.stringify(COMMENTS_FOR_DISPLAY);

  //Assign value of the string to a hidden form.
  document.getElementById("kwoteString").value = arrayAsString; 

  //checks output.
  alert(document.kwoteForm.kwoteString.value);

  }

$(document).ready(function() {
  var txt = $('#txtlzr');  // The container in which to render the list

  var options = {
    duration: 5,          // Time (ms) each blurb will remain on screen
    rearrangeDuration: 5, // Time a character takes to reach its position
    effect: 'random',     // Animation effect the characters use to appear
    centered: true        // Centers the text relative to its container
  }

  txt.textualizer(COMMENTS_FOR_DISPLAY); // textualize it!
  txt.textualizer('start'); // start
});

</script>

</body>
</html> 
```

PHP：

```
<?php
$saveKwote = $_POST["kwoteString"];
echo saveKwote;
?> 
```

出于某种原因，没有任何回应！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:17:26.127

你需要改变：

```
echo saveKwote;
```

至

```
echo $saveKwote;
```

如果没有美元符号 ($)，PHP 会尝试输出它认为不存在的常量或函数，因此输出为空。

# c++ - 定时器和线程

> ID：10197381
> 
> 赞同：2
> 
> 时间：2012-04-17T18:59:40.953
> 
> 标签：c++, multithreading, boost, timer

我有一个函数应该在它自己的线程中以 0.5 秒的间隔调用。

boost 或其他库中是否有允许连接在类似回调模式下工作并在给定时间间隔内运行回调的计时器的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:08:01.533

你可以使用[`boost::asio::deadline_timer`](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/deadline_timer.html)它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T19:06:44.843

我将 JUCE 用于计时器。它允许您使用多重继承对定时器类进行子类化，设置定时器运行，然后定义回调函数以极其轻松地处理定时器事件。

[http://www.rawmaterialsoftware.com/](http://www.rawmaterialsoftware.com/)

可能有许多提供类似功能的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T19:22:47.323

听起来更像你想要一个带有回调的重复计时器

你通常可以通过 boost 和 binding 来做到这一点......不过这里是一个很好的步行

[http://www.boost.org/doc/libs/1_40_0/doc/html/boost_asio/tutorial/tuttimer3.html](http://www.boost.org/doc/libs/1_40_0/doc/html/boost_asio/tutorial/tuttimer3.html)

# macos - 创建一个仅限本地的端口以在同一台计算机上的进程之间进行通信？

> ID：10197383
> 
> 赞同：2
> 
> 时间：2012-04-17T18:59:46.247
> 
> 标签：macos, unix, network-programming, ipc

我有两个由同一个用户运行的进程，但两者都不相关（在父/子意义上）。服务器创建一个套接字，客户端使用其端口号打开一个连接。这很好用，但是如果有办法使这个端口成为本地/私有端口会更好。没有其他计算机需要连接到我的服务器，因此最好保护它免受远程端口扫描。此外，如果端口没有向外界开放，我可能会避免撞到操作系统的防火墙。

看起来 PF_UNIX 可能让我创建一个以这种方式工作的文件名类型套接字，但是有没有办法使用端口类型（PF_INET）接口来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:03:10.130

是的，通过使用环回接口（127.0.0.1、localhost 等） - 您系统上的进程都可以看到它，但外部无法看到。

编辑：具体来说，整个 127.0.0.1/8 块保留用于环回，因此 127.0.0.[1-254] 将起作用。

# ruby-on-rails - 如何在rails中按时间查询？

> ID：10197387
> 
> 赞同：2
> 
> 时间：2012-04-17T18:59:57.257
> 
> 标签：ruby-on-rails

如何在日期时间字段中按时间查询记录？“时间”是指没有日期的时间。例如，我想要在任何一天的午夜创建的每条记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T19:13:42.010

更像这样：

```
Product.where("time(created_at) = time(?)", Time.new(2008,6,21, 24,0,0, '-00:00')) 
```

编辑

我将时区参数添加到 Time.new，该参数应与您在数据库中拥有日期时间字段的时区相匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:08:58.393

```
Product.where("created_at like ?", "%00:00:00%") 
```

# css - 页面看起来比它应该的大

> ID：10197392
> 
> 赞同：0
> 
> 时间：2012-04-17T19:00:05.763
> 
> 标签：css, size, zooming

我设计了一个包含 3 列的网页，排列如下：

[[左] [内容] [右]]

它显示如下：

[[左] [右]]
    [内容]

我ctrd +向下滚动，它看起来没问题，我该如何解决这个问题？

CSS是：

```
.advert_panel_right{
width:250px;
height:100%;
float:left;
}

.advert_panel_left{
    width:250px;
    height:100%;
    float:right;
}

.content_wraper{
    width:902px;
    margin: 0px auto;
}

.content{   
    font-family: Verdana, Geneva, sans-serif;
    width:100%;
    margin-left:25px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:11:48.603

示例：http: [//jsfiddle.net/GN8RL/](http://jsfiddle.net/GN8RL/)

HTML

```
<div id="wrapper">
    <div id="left"></div>
    <div id="content"></div>
    <div id="right"></div>
</div> 
```

CSS

```
#left, #content, #right {
  float:left;
  height:100px;
  border:1px solid red;
}

#left, #right {
   width:100px;
}    
#content {
   width:200px;
}
#wrapper {
    width:406px; /* 400 + borders */
    margin:0 auto;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:06:00.113

```
.content_wraper{
    width:802px;
    margin: 0px auto;
} 
```

减小包装器的宽度有帮助吗？我相信它太大了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T19:17:17.343

我需要编辑一些东西（和一个错字），但这是一个测试用例。工作正常：http: [//jsfiddle.net/UZfBc/](http://jsfiddle.net/UZfBc/)

首先：将右侧面板浮动到右侧，左侧面板向左浮动。摆脱错字' `content_wraper`'。我假设那`.content`是中间 div，那`.content_wrapper`是包装器。

您的`.content`宽度不能为 100%，因为它将采用其父值并使用它。这意味着您有三个 div，分别为 250px、902px（+25px 边距）和 250px，您希望将它们放入一个 902px 的 div 中。那永远行不通。只需计算 .content div 的大小：902 - 250 - 250 - 25 = 377px。然后让它`float: left;`。它会起作用（就像在我的例子中一样）

# ios - 在 viewControllers 之间传输 int

> ID：10197400
> 
> 赞同：0
> 
> 时间：2012-04-17T19:00:39.533
> 
> 标签：ios, segue, uistoryboardsegue

视图1.h

```
#import “view2.h"

@interface ViewController : UIViewController 
{
int count;       
}
@property (nonatomic, assign) int count; 
```

在 view1.m

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

if([segue.identifier isEqualToString:@"rating"])
{
    NSLog(@"identifier: help %@  \n",segue.identifier);

    view2 *vc = [segue destinationViewController];                                                 
    vc.imageNumber = &(count);

}
} 
```

在 view2.h

```
#import “view1.h"

@interface view2 : UIViewController

@property (nonatomic) int *imageNumber; 
```

在 view2.m

```
- (void)viewDidLoad
{
[super viewDidLoad];

NSLog(@"imagenumber %@\n",imageNumber);    

} 
```

这里有什么问题？理想情况下，我希望能够双向发送信息......但我只是想弄清楚单向传输有什么问题。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:05:27.993

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

if([segue.identifier isEqualToString:@"rating"])
{
    NSLog(@"identifier: help %@  \n",segue.identifier);

    view2 *vc = [segue destinationViewController];  
    //viewDidLoad has already happened.                                               
    vc.imageNumber = &(count);

}
} 
```

你检查你设置的 int `viewDidLoad`。`viewDidLoad`你在的时候已经发生了`prepareForSegue`。尝试改用`viewWillAppear`or`viewDidAppear`看看会发生什么。我认为这一切都应该奏效。

EDIT Sorry i didn't look at your `NSLog` closely enough. `%@` in a format string, like what you use in `NSLog` is a stand in for an `NSString`, assumes the argument is an `NSObject` and tries to call `[imageNumber description]` which is obviously nonsensical in this case. In fact you need to use the standard integer marker in the format string and then dereference the pointer. The correct NSLog statement would look like this:

```
NSLog(@"imagenumber %d",*imageNumber); 
```

# php - 在 Yii 的操作中无法收到错误消息

> ID：10197401
> 
> 赞同：0
> 
> 时间：2012-04-17T19:00:42.250
> 
> 标签：php, yii

我有一个更改密码的操作。我不明白为什么 $error 为空；

```
public function actionChangePassword() {
    $error;
    $player = $this->loadModel(Yii::app()->user->id);
    $oldpassword = '';
    $newpassword = '';
    $newpasswordrepeat = '';
    if (!isset($_REQUEST['oldpassword']) || !isset($_REQUEST['newpassword']) || !isset($_REQUEST['newpasswordrepeat'])) {
        $error = 'Vui long dien day du';
    }
    if (isset($_REQUEST['newpassword']) && isset($_REQUEST['newpasswordrepeat']) && isset($_REQUEST['oldpassword'])) {
        $oldpassword = $_REQUEST['newpassword'];
        $newpassword = $_REQUEST['newpassword'];
        $newpasswordrepeat = $_REQUEST['newpasswordrepeat'];
        if ($player->password != EncryptManager::encryptPassword($_REQUEST['oldpassword'])) {
            $error = 'Password cu khong dung';
            if ($newpasswordrepeat != $newpassword) {
                $error = 'Lap lai password khong dung';
            }
            if (count($newpassword))
                $error = 'Nhap password phai tren 6 ky tu';
            if (!isset($error)) {
                $player->password = EncryptManager::encryptPassword($_REQUEST['newpassword']);
                echo 'new password';
                if ($player->save()) {
                    $this->redirect(Yii::app()->baseUrl);
                }
            }
        }
    }  
    $this->render('//site/changepassword'
            , array('error' => $error)
    );
} 
```

和我的看法更改密码

```
<div class="change-password-layout">
    <div class="change-password-content" >
        <?php echo CHtml::beginForm(); ?>
        <div class="change-password-detail-total">
            <div class="change-password-title"><p>Đổi mật khẩu</p></div>
            <div class="change-password-detail">

                <p>Mật khẩu cũ </p>
                <input type="password" name="oldpassword" value="">

            </div>
            <div class="change-password-detail">
                <p>Mật khẩu mới </p>
                <input type="password" name="newpassword" value="">

            </div>

            <div class="change-password-detail">
                <p>Xác nhận lại mật khẩu mới </p>
                <input type="password" name="newpasswordrepeat" value="">

            </div>

            <div class="submit-button">
                <input type="submit" name="" value="Xác nhận">
                <input type="button" name="" value="Hủy bỏ" />
                <div class="clearboth"></div>
            </div>
        </div>
        <?php echo $error; ?>
        <?php echo CHtml::endForm(); ?>
    </div>
    <div class="change-password-bg-total">
        <div class="change-password-bg"></div>
    </div> 

    <?php if ($error != '') { ?>
        <div class="msg-error">
            <div class="signup-line"></div>
            <div class="msg-item">
                <div class="msg-warning-icon"></div>
                <div class="msg-warning-label">
                    <?php echo $error; ?>
                </div>
                <div class="clearboth"></div>
            </div>
            <div style="height:5px"></div>
            <div class="signup-line"></div>
        </div>
    <?php } ?>

</div>

<script>
    $("#set-height").css('height',$(window).height());
</script> 
```

当用户没有填写完整的字段时，如果成功重定向到主页，我们会收到错误消息。感谢提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:11:25.670

它被初始化为 null 并且根据您的代码，只有在以下情况下才会被初始化为

*   没有任何请求参数被初始化。
*   初始化所有请求参数，用户存储的密码与旧密码的加密版本相同。（这里有一些嵌套条件会设置它。）

因此，如果您的用户输入了错误的“旧密码”，那么就没有错误。

你想要这个语句的*else*。

```
if ($player->password != EncryptManager::encryptPassword($_REQUEST['oldpassword'])) 
```

# linux - 如何从 iptables 中删除特定规则？

> ID：10197405
> 
> 赞同：383
> 
> 时间：2012-04-17T19:00:50.287
> 
> 标签：linux, firewall, iptables

我分别在端口 8006 和 8007 上托管特殊的 HTTP 和 HTTPS 服务。我使用 iptables 来“激活”服务器；即路由传入的 HTTP 和 HTTPS 端口：

```
iptables -A INPUT -i eth0 -p tcp --dport 80 -j ACCEPT
iptables -A INPUT -i eth0 -p tcp --dport 443 -j ACCEPT
iptables -A INPUT -i eth0 -p tcp --dport 8006 -j ACCEPT
iptables -A INPUT -i eth0 -p tcp --dport 8007 -j ACCEPT
iptables -A PREROUTING -t nat -i eth0 -p tcp --dport 80 -j REDIRECT --to-port 8006 
iptables -A PREROUTING -t nat -i eth0 -p tcp --dport 443 -j REDIRECT --to-port 8007  
iptables -A OUTPUT -t nat -d 127.0.0.1 -p tcp --dport 80 -j REDIRECT --to-ports 8006
iptables -A OUTPUT -t nat -d 127.0.0.1 -p tcp --dport 443 -j REDIRECT --to-ports 8007 
```

这就像一个魅力。但是我想创建另一个脚本来再次禁用我的服务器；即将 iptables 恢复到运行上述行之前的状态。但是，我很难弄清楚删除这些规则的语法。唯一似乎有效的是完全刷新：

```
iptables -F
iptables -X
iptables -t nat -F
iptables -t nat -X
iptables -t mangle -F
iptables -t mangle -X
iptables -P INPUT ACCEPT
iptables -P FORWARD ACCEPT
iptables -P OUTPUT ACCEPT 
```

但这也会删除其他不需要的 iptables 规则。

* * *

## 回答 #1

> 赞同：550
> 
> 时间：2012-04-17T19:04:26.060

执行相同的命令，但将“-A”替换为“-D”。例如：

```
iptables -A ... 
```

变成

```
iptables -D ... 
```

* * *

## 回答 #2

> 赞同：506
> 
> 时间：2013-01-25T11:37:55.543

您也可以使用规则的编号（**--line-numbers**）：

```
iptables -L INPUT --line-numbers 
```

示例输出：

```
Chain INPUT (policy ACCEPT) 
    num  target prot opt source destination
    1    ACCEPT     udp  --  anywhere  anywhere             udp dpt:domain 
    2    ACCEPT     tcp  --  anywhere  anywhere             tcp dpt:domain 
    3    ACCEPT     udp  --  anywhere  anywhere             udp dpt:bootps 
    4    ACCEPT     tcp  --  anywhere  anywhere             tcp dpt:bootps 
```

因此，如果您想删除第二条规则：

```
iptables -D INPUT 2 
```

## 更新

如果您使用（d）特定表（例如 nat），则必须将其添加到删除命令中（感谢@ThorSummoner 的评论）

```
sudo iptables -t nat -D PREROUTING 1 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2013-11-01T20:28:20.367

对我来说没有任何问题的最佳解决方案如下所示：
1\. 添加临时规则和一些注释：

```
comment=$(cat /proc/sys/kernel/random/uuid | sed 's/\-//g')
iptables -A ..... -m comment --comment "${comment}" -j REQUIRED_ACTION 
```

2\. 当添加规则并且您希望删除它（或带有此评论的所有内容）时，请执行以下操作：

```
iptables-save | grep -v "${comment}" | iptables-restore 
```

因此，您将 100% 删除与 $comment 匹配的所有规则，而其他行保持不变。此解决方案在过去 2 个月内有效，每天更改约 100 次规则 - 没有问题。希望，它有帮助

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2015-08-21T21:30:00.993

首先使用以下命令列出所有 iptables 规则：

```
iptables -S 
```

它列出如下：

```
-A XYZ -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT 
```

然后复制所需的行，然后替换`-A`为`-D`删除：

```
iptables -D XYZ -p ... 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2017-04-07T09:32:50.580

使用`-D`命令，这是`man`页面解释它的方式：

```
-D, --delete chain rule-specification
-D, --delete chain rulenum
    Delete  one  or more rules from the selected chain.  
    There are two versions of this command: 
    the rule can be specified as a number in the chain (starting at 1 for the first rule) or a rule to match. 
```

**一定要意识到**这个命令，就像所有其他命令( `-A`, `-I`) 在某个表上工作一样。如果您不使用默认表（`filter`表），请使用`-t TABLENAME`指定该目标表。

## 删除要匹配的规则

```
iptables -D INPUT -i eth0 -p tcp --dport 443 -j ACCEPT 
```

注意：这只会删除第一个匹配的规则。如果您有许多匹配的规则（这可能发生在 iptables 中），请运行几次。

## 删除指定为数字的规则

```
iptables -D INPUT 2 
```

除了计算数字之外，您还可以使用`--line-number`参数列出行号，例如：

```
iptables -t nat -nL --line-number 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-04-28T11:26:34.237

假设，如果你想删除 NAT 规则，

使用以下命令列出附加的 IPtables，

```
# sudo iptables -L -t nat -v

Chain PREROUTING (policy ACCEPT 18 packets, 1382 bytes)
 pkts bytes target     prot opt in     out     source               destination         
    7   420 DNAT       tcp  --  any    any     anywhere             saltmaster           tcp dpt:http to:172.31.5.207:80
    0     0 DNAT       tcp  --  eth0   any     anywhere             anywhere             tcp dpt:http to:172.31.5.207:8080 
```

如果您想从 IPtables 中删除 nat 规则，只需执行命令，

```
# sudo iptables -F -t nat -v

Flushing chain `PREROUTING'
Flushing chain `INPUT'
Flushing chain `OUTPUT'
Flushing chain `POSTROUTING' 
```

然后，您可以验证，

```
# sudo iptables -L -t nat -v 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-02-25T14:02:19.380

您还可以使用以下语法

```
 iptables -D <chain name> <rule number> 
```

例如

```
Chain HTTPS 
    target     prot opt source               destination
    ACCEPT     all  --  anywhere             anywhere
    ACCEPT     all  --  10.0.0.0/8           anywhere
    ACCEPT     all  --  182.162.0.0/16       anywhere 
```

删除规则

> 接受所有 -- 10.0.0.0/8 任何地方

```
iptables -D HTTPS 2 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-03T18:01:54.890

这是一个删除`iptables`与搜索匹配的规则的单行。此示例搜索与 IP 地址匹配的所有规则`192.168.1.27`并将其全部删除。您将在自己的搜索条件中进行编辑以代替该 IP 地址。

```
eval `iptables --list-rules | grep '192.168.1.27' | sed 's/^-A /iptables -D /g;s/$/;/g'` 
```

### 这个怎么运作：

它使用这个问题的公认答案并使用`-D`而不是运行规则`-A`。

*   `iptables --list-rules`列出所有现有规则。即使您使用`-I`or添加了它们`-R`，此列表也会使用`-A`
*   `| grep '192.168.1.27'`将列表过滤为您想要删除的规则（在本例中为某些特定 IP 地址的规则。）
*   `| sed` 进行搜索和替换
    *   `s/^-A /iptables -D /g``-A`将每个规则开头的替换为`iptables -D`，使其成为删除规则的可执行命令。
    *   `s/$/;/g`用分号替换每个规则的结尾，以便在运行时分隔多个命令
*   `eval ...`获取所有输出并将其作为脚本运行。

# google-app-engine - 衡量各种 App Engine 统计数据

> ID：10197406
> 
> 赞同：0
> 
> 时间：2012-04-17T19:01:09.970
> 
> 标签：google-app-engine, google-cloud-datastore

我们如何测量应用程序统计信息，例如 CPU Seconds Used/Second，我们可以在 Google App Engine 中的应用程序仪表板上看到这些统计信息。（可以使用[https://developers.google.com/appengine/docs/java/datastore/stats](https://developers.google.com/appengine/docs/java/datastore/stats)测量数据存储区统计信息，因此其他属性也存在类似情况？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:12:16.367

[配额服务 API](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/quota/package-summary.html)可能是最接近您正在寻找的。

# sql - Oracle SQL - 使用一条语句将多行插入表中？

> ID：10197407
> 
> 赞同：18
> 
> 时间：2012-04-17T19:01:16.617
> 
> 标签：sql, oracle, insert

我想插入 N 行都是相同的，除了其中一个值不同。具体来说，这就是我正在尝试的：

```
insert into attribute_list (id,value,name)
values 
(
select (id,'Y','is_leveled') from value_list where val >= 50
); 
```

因此，对于每个 val >= 50 的值，我会在 attribute_list 中插入一行。这可以通过一个插入语句来完成，还是我应该在 excel 中手动生成这些插入？

（注意：这是为了澄清问题而简化的熟化示例，因此无需攻击此特定案例的不必要性）

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-17T19:04:23.807

你完全可以在一个语句中做到这一点！

尝试这个：

```
INSERT INTO attribute_list (id, value, name)
SELECT id, 'Y', 'is_leveled'
FROM value_list WHERE val >= 50 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T19:05:03.657

这就是[FOR 循环](http://docs.oracle.com/cd/B10500_01/appdev.920/a96624/a_samps.htm)的用途。

```
DECLARE
   x NUMBER := 100;
BEGIN
   FOR i IN 1..10 LOOP
      IF MOD(i,2) = 0 THEN     -- i is even
         INSERT INTO temp VALUES (i, x, 'i is even');
      ELSE
         INSERT INTO temp VALUES (i, x, 'i is odd');
      END IF;
      x := x + 100;
   END LOOP;
   COMMIT;
END; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T19:05:58.040

您需要来自 SELECT 的 INSERT。为此，您应该省略`VALUES`并执行以下操作：

```
insert into attribute_list (id,value,name)
select (id,'Y','is_leveled') from value_list where val >= 50; 
```

这是一个例子： http: [//psoug.org/reference/insert.html](http://psoug.org/reference/insert.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T19:04:21.703

`SELECT ... INTO`如果可以查询数据，则可以执行。否则要创建您需要使用 PL/SQL 的数据

如果您有数据，请尝试：

```
select id,'Y','is_leveled'
INTO attribute_list 
from value_list where val >= 50 
```

# iphone - 如何从 iPhone 应用程序中将多张照片上传到 Facebook？

> ID：10197414
> 
> 赞同：1
> 
> 时间：2012-04-17T19:01:34.220
> 
> 标签：iphone, facebook-graph-api, photos

是否有 API 调用可用于将多张照片从 iPhone 应用程序上传到 Facebook？到目前为止，我们一次只能做一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:28:19.730

您将需要直接使用 Facebook Connect API：iOS SDK 不公开此类功能。

您应该查看[Graph Photo API](https://developers.facebook.com/docs/reference/api/photo/)的 Publishing 部分，该部分建议使用此 URL 上传图像（不要忘记要求提供`publish_stream`凭据）：

```
POST https://graph.facebook.com/USER_ID/photos

message=[optional description]
source=[the image's data]
place=[optional image's location] 
```

使用 iOS Facebook Connect SDK 会给我们这个调用，假设你有一个`Facebook`名为的实例`facebook`和一个`UIImage`名为的实例`image`：

```
[facebook requestWithMethodName:@"/USER_ID/photos"
                      andParams:[NSDictionary dictionaryWithObjectsAndKeys:
                                 UIImageJPEGRepresentation(image, 0.7), @"source",
                                 @"My puppy is so cute!!!", @"message",
                                 nil]
                  andHttpMethod:@"POST"
                    andDelegate:self]; 
```

您可以将此调用与[批量请求](https://developers.facebook.com/docs/reference/api/batch/)相结合，以同时上传多张图片。

# python - 比较python中的两个文本文件

> ID：10197418
> 
> 赞同：3
> 
> 时间：2012-04-17T19:01:45.093
> 
> 标签：python, file

我想比较python中的两个测试文件。（实际上它们是Windows注册表文件（.reg），但它们都是文本）。我正在寻找两个文件之间的所有差异，而不仅仅是与第二个文件不同的第一行。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:04:59.583

```
f1 = open(filepath1)
f2 = open(filepath2)

lines = f2.readlines()
for i,line in enumerate(f1):
    if line != lines[i]:
        print "line", i, "is different:"
        print '\t', line
        print '\t', lines[i]
        print "\t differences in positions:", ', '.join(map(str, [c for c in range(len(line)) if line[c]!= lines[i][c]])) 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T22:56:08.833

看看[http://docs.python.org/library/difflib.html](http://docs.python.org/library/difflib.html)

这是它如何工作的示例（尽管还有许多其他用例和输出格式）：

```
>>> s1 = ['bacon\n', 'eggs\n', 'ham\n', 'guido\n']
>>> s2 = ['python\n', 'eggy\n', 'hamster\n', 'guido\n']
>>> for line in unified_diff(s1, s2, fromfile='before.py', tofile='after.py'):
...     sys.stdout.write(line)   
--- before.py
+++ after.py
@@ -1,4 +1,4 @@
-bacon
-eggs
-ham
+python
+eggy
+hamster
 guido 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T22:24:18.307

如果您只需要执行一次或两次，则可以考虑使用[Gnu32Diff](http://gnuwin32.sourceforge.net/packages/diffutils.htm)。如果您安装了 OS X 或 Linux，您可以使用 vimdiff（也称为 vim -d，但如果您安装了 vim，它也会安装 vimdiff 命令），它非常简单易用。

# symfony - Symfony2:: 致命错误：在第 1331 行的 cache/dev/appDevDebugProjectContainer.php 中找不到类 'Swift_Mailer'

> ID：10197421
> 
> 赞同：1
> 
> 时间：2012-04-17T19:01:49.447
> 
> 标签：symfony, swiftmailer, symfony-plugins

我安装了 symfony2 和 FOSUserBundle。两者都正常工作，但是当我访问使用 SwiftMailer 作为电子邮件确认的 FOSUserBundle 的注册页面时，我立即收到以下错误。

```
Fatal error: Class 'Swift_Mailer' not found in /home/public_html/cache/dev/appDevDebugProjectContainer.php on line 1331 
```

第 1331 行代码如下：

```
return $this->services['mailer'] = new \Swift_Mailer($this->get('swiftmailer.transport')); 
```

在调试信息中，我看到 SwiftMailerBundle 已正确加载。现在我被困住了，我已经为此苦苦挣扎了一段时间，而且我还不熟悉 Symfony。很确定这是我的缺点，但一双新鲜的眼睛会有所帮助。我错过了什么，这是可配置的吗？Swift\Mailer 类实际上在服务器上，位于 vendor/swiftmailer/swiftmailer/lib/classes/swift/mailer.php 下

有人可以帮忙吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:04:53.827

你能检查一下你的 app\autoload.php 中是否有这些行：

```
// Swiftmailer needs a special autoloader to allow
// the lazy loading of the init file (which is expensive)
require_once __DIR__.'/../vendor/swiftmailer/lib/classes/Swift.php';
Swift::registerAutoload(__DIR__.'/../vendor/swiftmailer/lib/swift_init.php'); 
```

# mysql - 动态选择多列索引的最佳方法

> ID：10197423
> 
> 赞同：2
> 
> 时间：2012-04-17T19:01:56.840
> 
> 标签：mysql, indexing

所以基本上我有一个包含大约 7 亿行的表，并且每天不断更新大约 200k-300k 行，每个月底，我都会清除超过 3 个月的数据。

```
CREATE TABLE TESTRECORD (
  TIMEADDED timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  SERIAL varchar(8) NOT NULL,
  ENDTIME varchar(14) NOT NULL,
  MODEL varchar(2) NOT NULL,
  PROCESS int(4) NOT NULL,
  PF varchar(4) NOT NULL,
  COMID varchar(6) NOT NULL,
  COMTP varchar(3) NOT NULL,
  TRIAL varchar(4) NOT NULL,
  TEST varchar(8) NOT NULL,
  SECTION int(2) NOT NULL,
  DATA_0 float NOT NULL,
  DATA_1 float NOT NULL,
  DATA_2 float NOT NULL,
  DATA_3 float NOT NULL,
  DATA_4 float NOT NULL,
  DATA_5 float NOT NULL,
  PRIMARY KEY (SN,ENDTIME,SECTION),
  UNIQUE KEY BASESN (SN,ENDTIME,MODEL,PROCESS,PF,COMID,TRIAL,TEST,SECTION),
  KEY COMID (COMID),
  KEY TRIAL (TRIAL),
  KEY PF (PF),
  KEY TEST (TEST)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

唯一键定义了将在 select 语句中使用的参数。由于该表的基本功能是动态数据分析，所以没有具体的顺序，where子句中会发生什么，使用多少个，可能会有一些随机分组由一两个cols也来自唯一键。因此，几乎不可能索引所有可能的组合以确保对任何给定选择的快速操作。

据我了解，mysql 根据它们在模式中列出的顺序使用索引，所以在我的情况下，如果我在 select 语句中使用 SN、ENDTIME 和 PF，则只会使用唯一键中的前 2 列。有没有什么有效的方法可以像每列 1 个索引或查询技术那样分解索引以加快速度，或者至少在 where 子句中的不同列组合中实现大致相同的性能？

提前非常感谢~！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:22:30.850

MySQL 中的索引就像你可能在书末找到的索引一样工作。如果您正在查找“意大利辣香肠比萨饼”的食谱，您首先查找意大利辣香肠，然后查找比萨饼。如果您只是在寻找“pizza”，那么该索引对您没有帮助，因为在索引中，pizza 仅次于意大利辣香肠——只有先查找意大利辣香肠，您才能找到比萨。这就是 X,Y 列上的索引的工作方式。如果您计划按该顺序在列 X 和 Y 上运行查询，那么将两列上的索引放在一起是有意义的。如果您想在 X 上运行查询并在 Y 上运行查询，那么复合索引就没有多大用处！

我建议您坐下来定义最常运行的查询类型，并分析您的存储和处理能力。索引会占用大量空间，尤其是在处理数百万行时。索引是存储空间和处理能力之间的经典权衡，不熟悉您的数据库的任何人都无法告诉您针对特定情况的最佳索引数量或配置是多少。

还要查看存储在每列中的唯一值的数量。MySQL 与 Oracle 不同，不支持标准表的位图样式索引（它使用 B-Tree）。抛开技术细节不谈，这意味着在唯一值数量相对较少的列上构建索引不会像您想象的那样为您提供每单位索引空间的价值。

最后一点是，对于某些类型的数据分析，您可能需要考虑将一些数据导出到 MEMORY 表。MEMORY 表基本上是临时表，它们在用户会话中保留其结构。当您使用完它们或发生崩溃时，它们会丢失数据，但不会丢失它们的结构。内存表支持 HASH 索引，该索引对索引列的值进行哈希处理以加快数据检索。在大多数情况下，它们非常快，并且在正确使用时可以显着提高性能。

如果您真的对数据库优化感兴趣，我建议您看一下“高性能 MySQL”一书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:17:17.847

我建议您考虑使用不同的存储，例如基于列的存储引擎，例如 infobright 开源分析数据库。它基于 mysql 架构，除了面向大数据和分析查询外，与使用 mysql 完全一样。www.infobright.org

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-05T12:44:23.757

任何表的解决方案：

```
SELECT 
  CONCAT(
    'ALTER TABLE ', 
    TABLE_NAME, 
    ' ', 
    'ADD ', 
    IF(
      NON_UNIQUE = 1, 
      CASE UPPER(INDEX_TYPE) WHEN 'FULLTEXT' THEN 'FULLTEXT INDEX' WHEN 'SPATIAL' THEN 'SPATIAL INDEX' ELSE CONCAT(
        'INDEX ', INDEX_NAME, ' USING ', INDEX_TYPE
      ) END, 
      IF(
        UPPER(INDEX_NAME) = 'PRIMARY', 
        CONCAT(
          'PRIMARY KEY USING ', INDEX_TYPE
        ), 
        CONCAT(
          'UNIQUE INDEX ', INDEX_NAME, ' USING ', 
          INDEX_TYPE
        )
      )
    ), 
    '(', 
    GROUP_CONCAT(
      DISTINCT CONCAT('', COLUMN_NAME, '') 
      ORDER BY 
        SEQ_IN_INDEX ASC SEPARATOR ', '
    ), 
    ');'
  ) AS 'Show_Add_Indexes' 
FROM 
  information_schema.STATISTICS 
WHERE 
  TABLE_SCHEMA = 'your_database' 
  and TABLE_NAME = 'your_table';
-- GROUP BY 
--   TABLE_NAME, 
--   INDEX_NAME 
-- ORDER BY 
--   TABLE_NAME ASC, 
--   INDEX_NAME ASC; 
```

# simulation - 为模拟引擎使用响应式扩展

> ID：10197424
> 
> 赞同：0
> 
> 时间：2012-04-17T19:01:57.007
> 
> 标签：simulation, system.reactive

您将如何使用 Reactive Extensions 构建一个简单的模拟引擎？例如，假设您有一个`Motor`具有属性的类`IsPowered`和`Speed`. 您希望通过以每秒 10 RPM 的速度从 0 RPM 上升到 1000 RPM 持续 100 秒来对`IsPowered`从 false 变为 true做出反应。`Speed`

稍微抽象一下，假设您想提供一个可插入的 API，其中类及其属性事先不知道。取而代之的是，模拟引擎获得了可观察到的属性变化流，通过创建额外的属性变化来做出反应，其中许多变化是利用 Rx 随时间增量发生的。这样的 API 会是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:39:07.847

模拟 API 需要一个表示属性更改的类型和一个具有传入和传出`IObservable<T>`更改流的模拟方法。模拟引擎的实现将包含对传入属性更改做出反应以更新输出流的规则。

类型是这样的（尽管结构可能比类更好）：

```
class PropertyChange
{
    public PropertyChange(string name, object value) { Name = name; Value = value; }
    public string Name { get; private set; }
    public object Value { get; private set; }
} 
```

模拟方法如下所示。为了演示多个规则，此代码预设了一个`IsLightOn`简单地跟踪的属性`IsPowered`。

```
IObservable<PropertyChange> Simulate(IObservable<PropertyChange> incomingChanges)
{
    var isLightOnRule =
        from c in incomingChanges
        where c.Name == "IsPowered"
        select new PropertyChange("IsLightOn", c.Value);

    var ramp = Observable.Generate(0, speed => (speed <= 1000), speed => speed + 10, speed => new PropertyChange("Speed", speed), _ => TimeSpan.FromSeconds(1));
    var speedRule = incomingChanges
        .Where(c => c.Name == "IsPowered" && (bool)c.Value)
        .SelectMany(ramp);

    // Add more rules here.

    return Observable.Merge(isLightOnRule, speedRule /* merge more rules here */);
} 
```

# c# - MVC3如何更新多个项目的库存

> ID：10197427
> 
> 赞同：2
> 
> 时间：2012-04-17T19:02:03.183
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, linq

我正在关注本教程 [http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-9](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-9)

（与此不完全相同）

我正在努力控制库存。

创建订单时，我想扣除库存数量（库存 - 计数（数量））；

我有 3 张桌子；订单、订单详情和产品。

创建 OrderDetails 列表后，我想修改产品的库存。

不知道怎么修改库存？我可以像 'db.OrderDetails.Add(orderDetail)' 这样使用吗？

你可以帮帮我吗？我给你一些编码。

请给我建议。谢谢！

```
public int CreateOrder(Order order)
    {
        decimal orderTotal = 0;

        var cartItems = GetCartItems();

        // Iterate over the items in the cart, adding the order details for each
        foreach (var item in cartItems)
        {
            var orderDetail = new OrderDetails
            {
                productId = item.productId,
                orderId = order.orderId,
                unitPrice = item.priceValue,
                rentalPeriod = item.rentalPeriod,
                startDate = item.dateCreated.AddDays(2),
                endDate = item.dateCreated.AddDays(2 + item.rentalPeriod),
                quantity = item.count
            };

            var productStock = new Product
            {   //Is it right coding??
                stock = item.Product.stock - item.count
            };

            // Set the order total of the shopping cart
            orderTotal += (item.count * item.priceValue);

            //Could be we need some coding here for stock control.
            db.OrderDetails.Add(orderDetail);

            db.SaveChanges();
        }

        // Set the order's total to the orderTotal count
        order.total = orderTotal;

        // Save the order
        db.SaveChanges();

        // Empty the shopping cart
        EmptyCart();

        // Return the OrderId as the confirmation number
        return order.orderId;
    } 
```

视图模型

```
public class ShoppingCartViewModel
{
    public List<Cart> CartItems { get; set; }
    public decimal CartTotal { get; set; }
} 
```

订单详细信息

```
public class OrderDetails
{
    [Key] public int orderDetailId { get; set; }
    public int orderId { get; set; }
    public int productId { get; set; }
    public int quantity { get; set; }
    public decimal unitPrice { get; set; }
    public int rentalPeriod { get; set; }
    public DateTime startDate { get; set; }
    public DateTime endDate { get; set; }
    public virtual Product Product { get; set; }
    public virtual Order Order { get; set; }
} 
```

命令

```
public class Order
{
    rentalDB db = new rentalDB();

    [Key] public int orderId { get; set; }
    public int customerId { get; set; }
    public decimal total { get; set; }
    public virtual Customer Customer { get; set; }
    public List<OrderDetails> OrderDetails { get; set; }
} 
```

大车

```
public class Cart
{
    [Key]
    public int recordId { get; set; }
    public string cartId { get; set; }
    public int productId { get; set; }
    public decimal priceValue { get; set; }
    public int count { get; set; }
    public int rentalPeriod { get; set; }
    public DateTime dateCreated { get; set; }
    public virtual Product Product { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:08:37.167

这个片段：

```
var productStock = new Product
        {   //Is it right coding??
            stock = item.Product.stock - item.count
        };

        // Set the order total of the shopping cart
        orderTotal += (item.count * item.priceValue);

        //Could be we need some coding here for stock control.
        db.OrderDetails.Add(orderDetail);

        db.SaveChanges(); 
```

要在创建新产品之前进行库存检查，您可能应该确保您还有一些剩余，如果没有，请执行一些操作，如下所示：

```
if (item.Product.stock - item.Count <= 0) 
{
    //you're out of stock! do something about it here? 
}
else
{
    //do your code above to create the new Product
} 
```

**编辑：要调整该产品的库存，只需执行以下操作：**

而不是这样做剪断：

```
var productStock = new Product
        {   //Is it right coding??
            stock = item.Product.stock - item.count
        }; 
```

将其更改为：

```
item.Product.stock = item.Product.stock - item.count; 
```

这将从产品库存编号中减去订购编号。然后，当您调用以下行（您已经在代码中执行此操作）时，更改将保存到数据库中：

```
db.SaveChanges(); 
```

# cakephp - cakephp 多语言设置

> ID：10197428
> 
> 赞同：1
> 
> 时间：2012-04-17T19:02:03.797
> 
> 标签：cakephp, internationalization, po

任何人都对 cake 1.3 的多语言设置有很好的了解？

今天，我正在使用一个；/locale/nor/LC_MESSAGES/default.po

标题：

```
msgid ""
msgstr ""
"Project-Id-Version: 2\n"
"POT-Creation-Date: 2012-04-17 20:37+0200\n"
"PO-Revision-Date: 2012-04-17 20:39+0100\n"
"Last-Translator: \n"
"Language-Team: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=INTEGER; plural=EXPRESSION;\n" 
```

和其中的常规语言字符串。

在 bootstrap.php => **Configure::write('Config.language', 'nor');**

像这样的简单字符串；

```
msgid "Norwegian"
msgstr "Norsk" 
```

翻译好，但是，如果我使用复数（时间助手）

```
msgid "second"
msgid_plural "seconds"
msgstr[0] "sekund"
msgstr[1] "sekunder" 
```

这些都没有翻译！？！

我不确定还能做什么，因为我已经在编辑器中手动创建了 .po 文件（没有使用控制台或其他方式进行提取）

我需要包含其他内容才能正确翻译它？计划将来为站点使用 2 种语言，根据访问的域设置正确的语言环境。例如： domain.com => eng & domain.no => no

感谢您对此的任何见解。

-汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:55:52.177

`Plural-Forms: nplurals=INTEGER; plural=EXPRESSION;\n`

这条线是罪魁祸首。更改`INTEGER`为`1`和。`EXPRESSION`_ `0`然后`msgstr[0]`将包含您的单数形式`msgstr[1]`并将包含复数形式。

# java - 持续轮询，还是 Java RMI？

> ID：10197436
> 
> 赞同：1
> 
> 时间：2012-04-17T19:02:42.287
> 
> 标签：java, udp, rmi

如果我要将数据包从一台计算机发送到另一台计算机，通过一根以太网电缆直接连接，那么使用 UDP 不断轮询接收计算机是否更快，或者使用 Java RMI 让发送方将数据包“提供”给接收方？电脑？

我不知道是否有任何性能变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:28:12.227

使用 UDP 通常更快，因为在传输中没有额外的确认开销，因为不需要为接收确认而烦恼。

使用 TCP 时，会向数据源发送回确认。全双工通信可以在不中断传入数据流的情况下进行此确认的传输；但是，您确实必须等待*一段*时间才能让该确认返回发件人，然后该发件人来处理它。

虽然假设两台计算机都足够快以处理数据流处理，但在现实世界中，计算机可能会发现自己正在执行多项任务，这可能会中断以线速处理网络流量的能力。在这种情况下，如果发送计算机不能足够快地接收到确认（或者接收计算机不能足够快地发送它们），那么您可能会耗尽未确认数据包的窗口，这将导致发送计算机停止传输，直到它确定任一传输的内容需要重新传输或被接收。

但是 UDP 不是玫瑰床，因为不确认接收的解决方案是允许任何数据包在任何时候消失而无需通知。因此，它非常适合不需要完全传输的数据（实时语音，如果它被丢弃，从“现在”数据包开始比收集所有数据更重要），或者用于管理重传的数据通过更有效的特定于应用程序的算法。

# c# - 如何将字符串转换为日期时间

> ID：10197437
> 
> 赞同：1
> 
> 时间：2012-04-17T19:02:48.943
> 
> 标签：c#, asp.net, datetime

```
 string value =     "Sat Apr 28 2012 11:00:00 GMT-0400 (Eastern Daylight Time)" 
```

我需要转换为日期时间

我试着做：

```
 DateTime datetime = DateTime.ParseExact(value, "MM/dd/yyyy hh:mm", null); 
```

或者

```
 DateTime datetime2 = Convert.ToDateTime(value); 
```

例外：字符串未被识别为有效的日期时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:05:23.187

您指定的格式为 `MM/dd/yyyy hh:mm" 但您的字符串甚至不是那种*格式*。

我怀疑您在使用“GMT-0400（东部夏令时间）”部分时会遇到问题 - 其余部分的格式为“ddd MMM dd yyyy HH:mm:ss”或“ddd MMM d yyyy HH:mm:ss” " 如果月份*中的日期不*总是两位数。

我建议您分别解析来自 UTC 的偏移量，并创建一个`DateTimeOffset`- 将第一部分（在 GMT 之前）解析为*未指定* `DateTime`- 然后解析偏移量。编辑：您可以解析偏移量，`TimeSpan.ParseExact`但您需要自己处理符号，我相信 - 我看不到任何有记录的方式来解析负时间跨度:(

编辑：请注意，我的[Noda Time](http://noda-time.googlecode.com)项目*将*允许您解析偏移部分，例如使用“'GMT'+HHmm”模式 - 显然我们会处理这`LocalDateTime`部分 - 但您仍然需要将不同的部分分开字符串的各个部分相互分离。示例代码：

```
using System;
using System.Linq;
using System.Xml.Linq;
using NodaTime;
using NodaTime.Text;

public class Test
{
    static void Main()
    {
        string text = "Sat Apr 28 2012 11:00:00 GMT-0400 (Eastern Daylight Time)";
        ZonedDateTime parsed = Parse(text);
        Console.WriteLine(parsed);
    }

    static readonly LocalDateTimePattern LocalPattern =
        LocalDateTimePattern.CreateWithInvariantInfo("ddd MMM d yyyy HH:mm:ss");

    // Note: Includes space before GMT for convenience later
    static readonly OffsetPattern OffsetPattern =
        OffsetPattern.CreateWithInvariantInfo("' GMT'+HHmm");

    static ZonedDateTime Parse(string text)
    {
        int gmtIndex = text.IndexOf(" GMT");
        int zoneIndex = text.IndexOf(" (");
        // TODO: Validation that these aren't -1 :)

        string localText = text.Substring(0, gmtIndex);
        string offsetText = text.Substring(gmtIndex, zoneIndex - gmtIndex);

        var localResult = LocalPattern.Parse(localText);
        var offsetResult = OffsetPattern.Parse(offsetText);

        // TODO: Validate that both are successful

        var fixedZone = DateTimeZone.ForOffset(offsetResult.Value);        
        return localResult.Value.InZoneStrictly(fixedZone);
    }
} 
```

请注意，这将给出一个`ZonedDateTime`固定*时*区 - 不是真正的东部时间。目前 Noda Time 没有`OffsetDateTime`，这很适合这里......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T19:11:33.360

尝试以下操作：

```
Convert.ToDateTime("Sat Apr 28 2012 11:00:00 GMT-0400 (Eastern Daylight Time)".Substring(4, 20)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T19:08:55.933

您的字符串与您的格式不匹配。

在尝试转换之前，您需要稍微解析该字符串。例如，可以解析“Apr 28 2012 11:00:00”。但是，您需要自己转换其余部分。

您可能想考虑使用`DateTimeOffset` [这里记录的](http://msdn.microsoft.com/en-us/library/system.datetimeoffset.aspx)，因为它可以保持相对于 UTC 的时间，就像您的字符串一样。

发现这是文档，非常接近您所拥有的

```
// Parse date and time with custom specifier.
dateString = "Sun 15 Jun 2008 8:30 AM -06:00";
format = "ddd dd MMM yyyy h:mm tt zzz";
try
{
    result = DateTimeOffset.ParseExact(dateString, format, provider);
    Console.WriteLine("{0} converts to {1}.", dateString, result.ToString());
}
catch (FormatException)
{
   Console.WriteLine("{0} is not in the correct format.", dateString);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T19:08:35.497

尝试`ddd MMM d yyyy hh:mm:ss zzz`

如果它不工作试试[这个](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-17T19:17:47.980

如果您查看[Custom Date and Time Format Strings](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)，您所拥有的只是这种格式的一种变体：

```
"ddd MMM dd yyyy h:mm:ss zzz" 
```

里面只有一些额外的部分：

```
"ddd MMM dd yyyy h:mm:ss GMTzzz (blah blah blah)" 
```

如果你处理这些，你应该没问题：

```
value = value.Remove(value.IndexOf(" ("));
DateTime datetime = DateTime.ParseExact(value, "ddd MMM dd yyyy hh:mm:ss \"GMT\"zzz", null); 
```

# iphone - 如果我从 AppStore 中提取二进制文件，IAP 非消耗性产品会继续工作吗？

> ID：10197438
> 
> 赞同：6
> 
> 时间：2012-04-17T19:02:50.070
> 
> 标签：iphone, ios, app-store, in-app-purchase

我有一个免费的应用程序，目前可在 Apple AppStore 上使用，其中包含用于应用程序内购买的非消耗性产品设置以启用高级功能。

我的客户现在决定他们想从 AppStore 中提取这个二进制文件并只提交一个高级付费版本（消除 IAP 需求）。

我的问题是：当我从 AppStore 中提取这个免费二进制文件时，IAP 购买会继续为那些已经安装了免费二进制文件的用户工作吗？这些当前用户是否能够购买这种非消耗性产品并恢复购买？

我试过在 Apple Developer Forums 上问这个问题，但像往常一样，没有得到回应。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T13:27:22.913

> *当我从 AppStore 中提取这个免费二进制文件时，IAP 购买是否会继续为那些已经安装了免费二进制文件的用户工作？*

这取决于您如何在应用中实现购买功能。

在用户完成购买并且应用程序完成验证收据后，如果您以某种方式将此结果保存在本地设备上（很可能您这样做了），那么应用程序将作为高级版本运行，除非应用程序被删除或设备被擦除.

> *这些当前用户是否能够购买这种非消耗性产品并恢复购买？*

据我所知，如果您从 App Store 中删除该应用程序，他们将无法做到。请参阅[“技术说明 TN2259：将应用内购买添加到您的 iOS 和 Mac 应用程序”](https://developer.apple.com/library/ios/#technotes/tn2259/_index.html#//apple_ref/doc/uid/DTS40009578-CH1-FREQUENTLY_ASKED_QUESTIONS)中的常见问题解答：

> `invalidProductIdentifiers`由于以下一种或多种原因，您的产品标识符可能会在数组中返回： ...
> 
> *   如果您或 App Review 在 iTunes Connect 中拒绝了您最近的二进制文件。

如果您想确保在管理 iTunes Connect 的应用内购买中，编辑“高级功能”IAP 产品并取消选中“已清除销售”。请参考[iTunes Connect 开发者指南](https://itunesconnect.apple.com/docs/iTunesConnect_DeveloperGuide.pdf)：

> **清盘出售**
> 
> 指示您的应用内购买是否已获准出售。如果未选中此框，您的应用内购买将无法从应用内购买。请注意，如果您将 Cleared for Sale 设置为 No，则应用内购买的所有设置仍可在 iTunes Connect 中进行编辑，并且您可以在以后将 Cleared for Sale 更改为 Yes。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T20:41:38.207

可能不是，请尝试联系 Apple。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:12:01.473

To be safe, assume it doesn't. You'd better ask Apple.

# iphone - 将 UILabel 中的数字除以小数 - xcode

> ID：10197439
> 
> 赞同：0
> 
> 时间：2012-04-17T19:02:50.787
> 
> 标签：iphone, xcode, nsstring, uilabel, ibaction

我有两个`UILabels`显示数字的。它们通过 更新`UISteppers`。我想包括第三个，`UILabel`它计算用户按下任一. （因此这两个是.text）`UILabel1``UILabel2``UISteppers``UILabels`

我知道如果两者都应该使用该方法`IBAction`，`UISteppers`但我无法考虑如何编写该方法。

有人知道如何编写该方法吗？

谢谢。

**更新 UILabel1**

```
- (IBAction)smashChanged:(id)sender {

self.smashLabel.text = [NSString stringWithFormat:@"%d",
                         [[NSNumber numberWithDouble:[(UIStepper *)sender value]] intValue]];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:15:53.347

您可以使用以下方法`floatValue`（或`intValue`）`NSString`：

```
float value1 = [self.label1.text floatValue];
float value2 = [self.label2.text floatValue];
float value = (value2 == 0.0) ? 0 : value1 / value2; // This gives 0 if value2 is equal to 0
self.label3.text = [NSString stringWithFormat:@"%.2f", value]; // 2 decimal places 
```

# c++ - 在库中定义常量变量 pi

> ID：10197440
> 
> 赞同：2
> 
> 时间：2012-04-17T19:02:55.153
> 
> 标签：c++, c, cmath

所以我正在编写一个库，我想定义一个具有 pi 值的常量。我正在考虑定义一个 static const float pi = 3.14; 在 pi.h 文件中。

但是，我几乎可以肯定这不是这样做的方法，因为我已经读过你不应该在头文件中定义变量。

我认为的另一种方法是声明一个返回 pi 值的内联函数，但这很难使用。

另一种方法（我认为）是把它放在 pi.cc 编译到库中，然后使用 extern static const float pi; 在您使用 pi 的任何文件中，当然也可以将这些文件与库链接。

这样做的最佳方法是什么？标准库可能会定义一个宏，但我认为常量更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:15:00.357

您还需要引入宏#define _USE_MATH_DEFINES

[如何在 Visual C++ 2008 中访问数学常量（例如 M_PI）？](https://stackoverflow.com/questions/806145/how-do-i-access-math-constants-eg-m-pi-in-visual-c-2008)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:08:44.403

我的建议是将**常量**放在头文件中。常量将给出值类型信息，这是一件好事。

由于**常量**不是变量，所以可以放在头文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T19:16:48.403

不将常量放在头文件中的一个原因是避免在常量更改时使用库重新编译代码（而不仅仅是重新链接）。这个原因不适用于像 π 这样在维护程序时永远不会改变的常量。

如果常量是浮点值，还有一个额外的问题。C++ 要求浮点常量具有分配给它们的存储空间，并且它们在 .cpp 文件中进行初始化，而不是在 .h 文件中。这会使它们的常量比等效的内联函数效率低。这就是 Boost 库使用内联函数的原因。看到[这个答案](https://stackoverflow.com/a/1728959/145173)。

因此，对于您的情况，最好的选择可能是使用 Boost 库，或者如果您不想使用依赖项，则只需创建一个执行相同操作的内联函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T19:06:38.517

我经常看到头文件中定义的常量变量。你这样做的想法在我看来是合理的。使其成为静态似乎也可以。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T19:28:37.920

你也可以将你的 PI 常量分成两个文件，头文件和实现。将声明和实现分开后，您可以在不更改接口的情况下更改 pi 的值（例如更精确）。

这可以通过简单的 pi.h 文件：

外部浮点数；

和图片：

```
float pi = 3.14; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T19:50:00.217

I would make it `static const` but not `extern` and place it in a header file. `static const` tells the compiler that it's a constant variable accessible only in the current compilation unit. This allows the compiler to optimize away any actual storage for it and just use the value directly.

# javascript - Facebook评论框加载时回调？

> ID：10197441
> 
> 赞同：4
> 
> 时间：2012-04-17T19:02:59.713
> 
> 标签：javascript, facebook, callback, dom-events, facebook-comments

我似乎无法在文档中找到我正在寻找的确切内容，并且我在网站上使用[其中](https://developers.facebook.com/docs/reference/plugins/comments/)一个，但是一旦评论框完全加载，我需要更新我的 JS 中先前分配的变量。我将在哪里或如何做这件事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T21:43:47.997

我能想到的唯一可以**解决**问题的方法是订阅[xfbml.render 事件](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)。

它是这样完成的：

```
FB.Event.subscribe("xfbml.render", function(response) {
  // do what ever
}); 
```

文档说：

> 当对 FB.XFBML.parse() 的调用完成时触发。

所以我不确定它是否可以与 dom 中现有的 xfbml/html5 代码一起使用，然后在*FB.init*启动时呈现这些代码。如果没有，您可能需要手动调用*FB.XFBML.parse*。

希望这可以帮助。

# excel - 如何在 Excel 中跟踪间接先例？

> ID：10197443
> 
> 赞同：4
> 
> 时间：2012-04-17T19:03:07.787
> 
> 标签：excel, trace, excel-formula, operator-precedence

Excel 中的 Trace Precedents/Dependents 按钮在分析复杂电子表格的结构时非常有用。

我有一张由许多调用组成的工作表，其先例是使用 CELL()、OFFSET() 等引用函数以编程方式生成的，其中这些函数的参数是表达式。

使用跟踪按钮时，excel 不会跟踪公式中未明确引用的单元格。

有没有办法获得特定单元格的全部先例？

注意：搜索 Google 我在 Office Marketplace 中看到了一个可以购买的应用程序，据说可以购买。我想知道是否有办法使用提供的 Excel 功能来做到这一点？

编辑：这是一个例子：在单元格 M5 中，我有以下公式，它引用了 D5、D13 和 G6。G6 由 OFFSET() 函数计算，相对于 G4。

```
=IMSUM($D5,IMPRODUCT($D13,OFFSET($G$4, 2*(ROW()-ROW($G$4)), 0))) 
```

跟踪单元格的先例时，Excel 不显示 G6 单元格。相反，它显示偏移的基数，即 G4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T08:14:11.240

a) 对 Excel 的整个公式引擎进行逆向工程

b) 为您的情况编写一个 VBA 解析器 - 即从公式字符串中获取 OFFSET 的参数并评估它们

c）如果可以避免的话，不要使用易失性公式 - 比如
`=IMSUM($D5,IMPRODUCT($D13,INDEX($G$4:$G$999, 2*(ROW()-ROW($G$4)) + 1)))`

# java - XLS 文件在 IE 中显示为 HTML 内容

> ID：10197445
> 
> 赞同：0
> 
> 时间：2012-04-17T19:03:28.923
> 
> 标签：java, excel, applet

我正在开发一个 Applet，它应该允许用户通过单击按钮打开从服务器下载的 XLS 文件。

```
String host = url.getProtocol() + "://" + url.getHost()
        + ":" + Integer.toString(url.getPort())
        + link.toString();
try {
    url = new URL(host);
    cja.getAppletContext().showDocument(url, "_blank");
}
catch (Exception e)
{
    cja.showStatus("Cannot Open Excel file");
} 
```

使用上面列出的代码，如果小程序是从 FireFox 运行的，浏览器会弹出一个下载窗口，当用户单击列表中的 XLS 条目时，它会在本机 Excel 应用程序中打开。

当在 IE 上尝试相同的操作时，不是打开下载窗口，而是在浏览器本身内将内容显示为垃圾文本。

谢谢您的帮助。

# cpu - 多级缓存性能

> ID：10197446
> 
> 赞同：3
> 
> 时间：2012-04-17T19:03:30.537
> 
> 标签：cpu, computer-science, cpu-architecture, cpu-cache

我有点卡在两个问题上。我将包括问题的相关细节，任何指导将不胜感激。如果可以，请给出解释。

假设您有以下针对具有多种不同内存层次选择的处理器的统计信息。

```
Base CPI = 1.5 
Processor Speed = 2 GHZ
Main Memory Access Time = 100ns
L1 miss rate per instruction = 7%
L2 direct mapped access = 12 cycles 
Global miss rate with L2 direct mapped = 3.5%
L2 8-way set associative access = 28 cycles 
Global miss rate with L2 8-way set associative access = 1.5% 
```

注意：全局未命中率是在所有级别的缓存中未命中的引用百分比（因此必须访问主内存）

1.  如果 L2 缓存可用并且是直接映射的，则计算总 CPI。

2.  如果 L2 可用并且是 8-way set associative，则计算总 CPI。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T04:36:14.137

我现在理解了这个问题，所以我想我已经在这里解释了它，以便用更多信息来改进论坛。

第一的，

总 CPI = 基本 CPI + 每条指令的内存停顿周期

每条指令的内存停顿周期 = 未命中惩罚（以周期为单位）x 未命中率

首要任务是在没有第二个缓存的情况下计算未命中惩罚。这很容易通过以下计算确定：

主存储器访问时间/ (1/处理器速度) = (100) / (.5) = 200 个周期

注意：主存储器访问时间以 ns 为单位，处理器速度的倒​​数将以 ns/周期为单位，因此将两者相除即可得到周期数。我们正在做这个计算，因为它需要一定的时间才能一直到主内存（100ns），处理器速度决定了我们可以走多快（2GHz），通过反转将时钟速度更改为时钟频率，我们可以计算出进入主存储器所需的周期数（未命中惩罚）。

因为这个问题涉及到两个缓存，当 L1 中出现未命中时，将尝试从 L2 检索信息，然后如果仍然找不到信息，它将访问主内存，所以流程看起来像这样。

访问 L1 -----> 访问 L2 -----> 访问主存储器

（这暗示如果有“命中”，我们将不需要继续流程）

问题告诉我们 L2 直接映射访问需要 = 12 个周期

所以计算将如下所示：

总 CPI = 1.5 + (0.07 x 12) + (0.035 x 200) = 9.34 CPI

因为您错过了需要访问 L2 的 7% 的时间，这需要 12 个周期，因此您将两者相乘。然后如果仍然没有找到，我们必须访问主存，这需要 200 个周期，全局未命中率为 3.5%

总 CPI = 1.5 + (0.07 x 28) + (0.015 x 200) = 6.46

第二次计算以类似的方式完成

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-24T22:18:30.213

回答第一个问题的部分内容是基于解释。我认为这意味着如果只有一个缓存级别，我们应该计算 CPI。这改变了很多事情......

1.  系统中只有一级缓存

    未命中惩罚 = 100ns/(1/2GHz) = 200 个周期 一级缓存 CPI = 1.5 + (0.07 * 200) = 15.5

2.  L2 直接映射缓存

    L1 未命中，L2 命中惩罚 = 12 个周期 两个未命中惩罚 = 12 + 200 = 212 个周期 总 CPI = 1.5 + (0.07 * 12) + (0.035 * 212) = 9.76

3.  L2 八路组关联缓存

    L1 未命中，L2 命中惩罚 = 28 个周期 两个未命中惩罚 = 28 + 200 = 228 个周期 总 CPI = 1.5 + (0.07 * 28) + (0.015 * 228) = 6.88

而且，请注意，这是来自 Patterson 和 Hennessy 的第 5 版计算机组织和设计中的问题 5.7.4

# c++ - 在 C++ 中读取 fortran 二进制文件

> ID：10197448
> 
> 赞同：1
> 
> 时间：2012-04-17T19:03:34.160
> 
> 标签：c++, file, binary, fortran

读取（用c++程序）fortran代码生成的二进制文件的问题被问了很多次，并且给出了对fortran记录中约定的令人满意的描述（例如[http://local.wasp.uwa.edu.au/~pbourke /数据格式/fortran/](http://local.wasp.uwa.edu.au/~pbourke/dataformats/fortran/) )

但是，当我尝试实现 c++ 程序时，请记住 fortran 约定它仍然不起作用。在这里，我假设我们二进制文件“test.bin”包含 1 个整数，并由 fortran 例程以二进制格式写入。以下是我尝试在 C++ 中阅读它的方法：

```
#include <iostream>
#include <fstream>
using namespace std;

int main () {
  ifstream file;
  file.open("test.bin", ios::in|ios::binary);
  if (file.is_open())
  {
    int ival;
    file >> ival >> ival;  cout<< ival<<endl;
   }
   return 0;
} 
```

这里的 double >>ival 构造首先读取 fortran 记录的标头（其中包含记录的大小（以字节为单位）），第二个 >>ival 应该提取值。写入文件的整数是8，但是程序输出的是0，所以没有正确读取数据。

这是二进制文件的内容：^D^@^@^@^@^@^@^@^H^@^@^@^D^@^@^@^@^@^@^@

所以我的问题 - 我做错了什么？

这是十六进制编辑器显示的内容：

```
0000000: 0400 0000 0000 0000 0800 0000 0400 0000  ................
0000010: 0000 0000 0a                             ..... 
```

知道这意味着什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:55:53.537

`operator>>`是*格式化的*输入运算符。它用于读取文本文件，将文本表示转换为二进制。

您应该使用*未格式化*的输入操作进行阅读。试试这个：

```
file.read(reinterpret_cast<char*>(&ival), sizeof ival); 
```

当然，读完之后，您可能需要进行字节交换以获得正确的字节序表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:23:02.287

在十六进制编辑器中打开它并挖掘结构。标头大小是 16、32、64 还是 128 位，最后是哪个？

十六进制编辑器..

# python - Django ModelForm 验证不起作用

> ID：10197451
> 
> 赞同：1
> 
> 时间：2012-04-17T19:03:41.060
> 
> 标签：python, django

我想确保用户在重定向到下一页之前填写所有字段。如果他们没有填写这些字段，它应该会引发一个错误，告诉他们在继续之前填写这些字段。为此，我编写了以下代码。但我面临的问题是，当我没有填写这些字段时，它把我带到了下一页，而不是让我回到同一页面，并且没有引发任何错误。

如何在将用户带到下一页之前验证这些字段？

楷模

```
from django.core.exceptions import ValidationError

 class Memb(models.Model):
       slug=models.CharField(max_length=100)
       member=models.CharField(max_length=100)

       def __unicode__(self):
           return self.member, self.slug

       def clean_slug(self):
             data=self.cleaned_data['slug']
             if "Testy" not in data:
                 raise ValidationError("Enter the correct name for this field")

  class MembForm(ModelForm):
        class Meta:
             model=Memb
             fields=('slug','member') 
```

意见

```
def my_memb(request):
    if request.method=="POST":
            form=MembForm(request.POST)
            if form.is_valid():
                    data=form.cleaned_data
                    form.save()
            return HttpResponseRedirect('/good/')
    else:
            form=MembForm()
    return render_to_response('member.html',{'MembForm':MembForm}, context_instance=RequestContext(request)) 
```

模板

```
 {% block content %}
     <form action="" method="POST">
          {{MembForm.as_p}}
   <input type="submit" value="Add"/>
   </form>
  {% endblock %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:16:00.030

您似乎只缺少一个选项卡。`/good/`即使`form.is_valid`返回，您的代码也会重定向到`false`。您只需将重定向代码移动到 if 子句中，如下所示：

```
...
if form.is_valid():
    data=form.cleaned_data
    form.save()
    return HttpResponseRedirect('/good/')
... 
```

这应该足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:27:12.313

这里有一些问题，但您最大的问题是您的观点：

意见

```
def my_memb(request):
    if request.method=="POST":
            form=MembForm(request.POST)
            if form.is_valid():
                    data=form.cleaned_data
                    form.save()
            return HttpResponseRedirect('/good/')
    else:
            form=MembForm()
    return render_to_response('member.html',{'MembForm':MembForm}, context_instance=RequestContext(request)) 
```

取出 if else 块：

```
 if request.method=="POST":
            form=MembForm(request.POST)
            if form.is_valid():
                    data=form.cleaned_data
                    form.save()
            return HttpResponseRedirect('/good/') 
```

这里发生的是，它检查表单是否有效。但是，不管它是否有效，你仍然返回/good/。这可能不是你打算做的。

你想要做的是：

```
 if request.method=="POST":
            form=MembForm(request.POST)
            if form.is_valid():
                    data=form.cleaned_data
                    form.save()
                    return HttpResponseRedirect('/good/')
            else:
                return HttpResponse #something else, or maybe just the form 
```

当然，这可以与您下面的代码合并在一起，所以您真正需要的是：

```
 if request.method=="POST":
            form=MembForm(request.POST)
            if form.is_valid():
                    data=form.cleaned_data # by the way, what is this for? seems extraneous.
                    form.save()
                    return HttpResponseRedirect('/good/') 
```

我注意到的其他一些事情：

```
 class MembForm(ModelForm):
        class Meta:
             model=Memb
             fields=('slug','member') 
```

使用模型表单时不需要显式定义字段。这是使用它们的全部意义；）有时会这样做，有时会排除它们，但在您的示例中，我看不到。

我也不确定“clean_slug”方法让您认为默认功能并没有做得更好。但是，这可能只是一个片段。

最后，您将重定向到一个名为“good”的页面。无论用户输入什么，这都是一样的，您应该问自己这是否是所需的行为。您可能希望重定向到 /good/(someuniqueid)/

# c - c: rownames 函数的实现

> ID：10197456
> 
> 赞同：0
> 
> 时间：2012-04-17T19:04:04.610
> 
> 标签：c, multidimensional-array, strcpy, slice

我有一个二维指针数组（指向字符串）

```
 char *result[7000][14]; 
```

我想编写一个函数，返回每个“行”中的第一个字符串。

这是我尝试过的：

```
char *getRownames (int a, int b, char *matrix[a][b])
{
    char *rownames[a];
    for(int i=0;i<a;i++){
        rownames[i] = malloc(strlen(matrix[i][0])+1);
        strcpy(rownames[i],matrix[i][0]);
    }

    return *rownames;
} 
```

进而

```
 char *names = getRownames(7000, 14, result); 
```

我收到一条错误消息，指出 getRowNames 的类型冲突。仍然习惯于 C 并且不得不分配我自己的内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:47:43.870

这里有几个问题

*   您的 return 语句是错误的（它应该只是行名，而不是 *rownames）。反正我不会那样做。
*   我没有看到您的其余代码，但是如果您不初始化`*result[][0]`，您很可能会在 strlen 调用中出现段错误。
*   我会避免尝试在该大小的堆栈上返回一个指向数组的指针（不要返回指向尚未 malloc 的局部变量的指针），所以我会传入数组并让函数填写它你。如果你有一个指向该数据大小的指针，即`char *rownames=malloc(a*sizeof(char *));` 你会没事的。

所以我用我的测试代码做到了这一点：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>

void getRownames (int a, int b, char *matrix[a][b], char* rownames[a])
{
    int i;
    for(i=0;i<a;i++){
        //printf("%d\n",strlen(matrix[i][0]));
        rownames[i] = malloc(strlen(matrix[i][0])+1);
        strcpy(rownames[i],matrix[i][0]);
    }
    //strlen(matrix[i][0])
    //return &rownames[0];
}

int main(void) {
    char *result [700][14];
    int i=0;
    for(i=0;i<700;i++){
    result[i][0]="abcd0";
    }
    char *rownames[700];
    getRownames(700,14,result,rownames);
    printf("I finished");
    printf("%s",rownames[0]);
    printf("%s",rownames[1]);
    printf("%s",rownames[2]);
    printf("%s",rownames[3]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:55:42.987

你有一些事情发生在这里。

函数声明/原型需要为其数组和矩阵具有固定大小。*

`char *getRownames (int a, int b, char *matrix[a][b])`

不会工作，因为编译器不知道`a`或`b`在编译您的程序时。它需要是

`char *getRownames (int a, int b, char *matrix[7000][14])`

如果您知道数组将是那个大小。然后你不需要`a`或根本不需要`b`。如果您希望能够将不同大小的矩阵传递给函数，那完全是另一回事。

*（注意编译器允许你省略数组的第一维：`char *matrix[][14]`或`char *array[]`）

接下来，您需要将 malloc 的返回值转换为 char*，因为 malloc() 返回 void*：

`rownames[a] = (char*)malloc(strlen(matrix[i][0])+1);`

顺便说一句，它应该`rownames[i]`在你的循环中。:-) 因为`i`是你的循环变量。

最后，看起来您想要返回一个 char* 数组，但`return *rownames`只会返回数组中的第一个值。同样，如果您知道数组的大小，将现有数组传递给函数并让它填充值会更容易。否则，您必须 malloc 数组才能返回。

```
char *result[7000][14];
char *firstRows[7000];
//... other code that fills in these values
getRownames(7000, 14, result, firstRows);

void getRownames (int a, int b, char* matrix[7000][14], char* returnrows[7000])
{
    for(int i=0;i<a;i++){
        returnrows[i] = (char*)malloc(strlen(matrix[i][0])+1);
        strcpy(returnrows[i],matrix[i][0]);
     }
} 
```

# javascript - 函数式编程中的依赖注入

> ID：10197462
> 
> 赞同：14
> 
> 时间：2012-04-17T19:04:26.980
> 
> 标签：javascript, dependency-injection

用一个例子可以更好地说明这个问题。我将使用 Javascript（实际上是为了语法而使用 Coffeescript），但只是因为 Javascript 只是另一个[LISP](http://www.crockford.com/javascript/little.html)，对吗？

所以，假设我正在编写一个执行（显然）ajax 请求的网络应用程序。我实现了一个函数来处理它：

```
ajaxRequest = (url, params, callback) ->
    # implementation goes here 
```

现在，假设我有一个从服务器获取数据的网格。在我的代码的某个地方，我必须做这样的事情：

```
userGrid.onMustFetch = ->
    ajaxRequest '/fetch/users', { surname: 'MacGyver' }, (data) ->
        # fill grid with data 
```

这里到底有什么问题？如果我想测试*onMustFetch*的实现，我将无法这样做，因为在*onMustFetch*内部，正在调用依赖项，并且测试环境无法控制依赖项。

为了解决这个问题，我将依赖注入到我要测试的函数中。这意味着将*onMustFetch*更改为：

```
userGrid.onMustFetch = (ajaxRequest) ->
    ajaxRequest '/fetch/users', { surname: 'MacGyver' }, (data) ->
        # fill grid with data 
```

现在测试代码可以将*ajaxRequest*的模拟传递给*onMustFetch*并成功测试行为。

奇妙吧，对吧？错误的！现在我有第二个问题，必须将 ajaxRequest 的正确实例绑定到*onMustFetch*的正确实例的*问题*。

在像 Java 这样的语言中，我可以使用依赖注入框架来为我做这件事，我的代码看起来像这样：

```
class UserGrid {

    private AjaxService ajaxService;

    @Inject
    public UserGrid(AjaxService ajaxService) {
        this.ajaxService = ajaxService;
    }

    public void onMustFetch() {
        HashMap<String, String> params = new HashMap<String, String>();
        params.put("surname", "MacGyver");
        ajaxService.request("/fetch/users", params, new AjaxCallback(data) {
            // fill grid with data
        });
    }

} 
```

令人毛骨悚然，我知道...但实际上 DI 框架完成了所有的布线，所以至少这部分问题更容易。

现在回到我们的 Web 应用程序和 Javascript。即使我成功地设法始终使用正确的*ajaxRequest引用调用**onMustFetch*（毕竟在这种情况下并不难做到），也必须有一种更简单的方法。当我的代码增长时，依赖关系会增加。我可以想象传递一个*ajaxRequest*的引用，但是当我有一个*securityService*、一个*browserService*、一个*eventBusService*等等等等时呢？

 ***现在真正的问题在这里：类似 lisp 的语言如何解决管理依赖项的问题？（在我看来，依赖项必须在整个应用程序中不断传递，但我确信必须有更好的方法......）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T06:28:20.543

这通常使用闭包/柯里化来完成。您将依赖项作为参数传递。在 JS 中你可以这样做：

```
buildUserGrid = function(dependency){
    return {
        onMustFetch = function(){
            depenency.doSomething();
        },
        doSomethingElse = function(){
            dependency.doSomethingElse();
        }
    }
}

var userGrid = buildUserGrid(ajaxRequest);
userGrid.onMustFetch(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:01:47.183

在 Javascript 中，我不知道为什么你不能使用类似于任何 OO 语言的技术。一个非常基本的 JS 实现（抱歉，我不知道 Coffescript）

```
// expects a function 
var UserGrid = function(ajaxService) {
    this.dependencies = ["ajaxService"];
     // will be overwritten by the DI service, but can also be 
     // assigned manually as in java
    this.ajaxService = ajaxService;
};
UserGrid.prototype.onMustFetch=function() {
    var callback = function() { ... }
    this.ajaxService('/fetch/users',{ surname: 'MacGyver' }, callback);
};

var diController = {
    create: function(constr) {
        var obj = new constr();
        // just look at obj.dependencies to see what should be assigned, and map
        // the implemenations as properties of obj. this could be
        // as simple as a switch or a direct mapping of names to object types
        // ... assign implementations to obj
        return obj;
    }
}; 
```

创造：

```
var userGrid = diController.create(UserGrid); 
```

`diController`与您的 java 依赖注入器相同的事情也是如此。在java中，它可以使用反射来确定需要什么类型的对象。在 Javascript 中没有太多的反射要做，所以创建一个约定来告诉系统需要什么。在这种情况下，我使用了一个名为“dependencies”的数组，但您可以使用任何您喜欢的构造。***

# c# - RavenDB 分片导致更新充当插入

> ID：10197466
> 
> 赞同：1
> 
> 时间：2012-04-17T19:04:48.430
> 
> 标签：c#, ravendb, sharding

我正在尝试使用 RavenDB 为我的工作场所设置一个简单的概念证明。该演示目前有 2 个分片执行基本的循环策略。然后它有另外 2 个分片来复制这 2 个分片，作为故障转移。

我们浏览并保存了各种业务记录。我们会得到看起来正确的 ID，例如 matt-businesses-35 和 bob-businesses-42。但是，当我们编辑一个时，它不会更新现有记录，它会插入。大多数情况下，除了原始 ID 之外，我们最终会得到一个类似于 matt-bob-business-42 的 ID。

我们遵循此页面作为指南：http: [//msdn.microsoft.com/en-us/magazine/hh547101.aspx](http://msdn.microsoft.com/en-us/magazine/hh547101.aspx)

然而，我们通过替换 DataDocumentstore.cs 中的代码来修改它以进行分片：

```
var shards = new Dictionary<string, IDocumentStore>
                 {
                     {"bob", new DocumentStore() {Url = "http://bob:8080"}},
                     {"matt", new DocumentStore() {Url = "http://matt:8080"}},
                 };

var shardStrategy = new ShardStrategy(shards);

instance = new ShardedDocumentStore(shardStrategy);
instance.Conventions.IdentityPartsSeparator = "-";
instance.Initialize(); 
```

编辑操作如下所示：

```
public ActionResult Edit(string id)
{
    var model = DocumentSession.Load<Business>(id);
    return View(model);
}

[HttpPost]
public ActionResult Edit(string id, Business business)
{
    try
    {
        if (ModelState.IsValid)
        {
            DocumentSession.Store(business);
            return RedirectToAction("Index");
        }
        return View(business);
    }
    catch
    {
        return View();
    }
} 
```

我们是否设置了错误来解决这些奇怪的问题？这似乎是一个相当简单的设置，但更新总是插入一个新的键名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T21:05:54.393

您的*编辑*操作是错误的。`.Store()`您需要先加载实体，然后将更改映射到加载的实例，而不是再次调用您编辑的数据。RavenDBs 会话自动跟踪该实例上的更改，并在您调用时更新数据库中的文档`.SaveChanges()`。

在您的特定情况下，我不知道您在哪里调用 .SaveChanges，但我猜它在您的基本控制器上的 OnActionExecuted 或 global.asax 中的 EndRequest 内。无论哪种方式都有效。您所要做的就是通过 id 加载业务，更改其属性，然后您就完成了。无需再次存储文档。

AutoMapper 可以帮助您使用 Map() 方法的重载来更新实例，该方法采用预先实例化的对象。

# javascript - 绝对定位时 IE 中的工具提示闪烁

> ID：10197471
> 
> 赞同：0
> 
> 时间：2012-04-17T19:05:06.467
> 
> 标签：javascript, css, internet-explorer, tooltip, css-position

我的工具提示就像一个使用 CSS 弹出的下拉菜单。JavaScript 将一个类分配给父级，以在 MouseOver 和 MouseOut 事件上显示具有显示块/无的绝对定位子级。

测试用例：http: [//jsfiddle.net/6g4ds/6/](http://jsfiddle.net/6g4ds/6/)

问题是，当我在工具提示内移动鼠标到不同的内部元素（如 IMG、P、A）上时，它在 IE (8) 中闪烁。这在上面的测试用例中没有发生，使用几乎相同的代码，但确实发生在我的页面上.

我尝试应用背景颜色和 z-index 没有运气。闪烁无论如何都会发生。

建议我可以触发哪些可能的 CSS 属性来玩弄它以进行可能的修复。我没有想法了。有许多工具提示可能解决了这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:40:33.520

使用 MouseEnter 和 MouseLeave 解决了我的问题。

# actionscript-3 - VGroup - 如何应用分布式布局

> ID：10197475
> 
> 赞同：0
> 
> 时间：2012-04-17T19:05:25.140
> 
> 标签：actionscript-3, apache-flex, flash-builder

我将 3 个 BorderContainer 放在一个 VGroup 上。
每个容器都有不同的大小。
你能解释一下如何在 VGroup 内部分配吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:58:35.907

下面的代码可能会给出一些实现的想法：-您可以根据需要修改逻辑，因为您可以获得容器的动态高度.....

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" >
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[

            private var heightArray:Array = new Array(200,800,400);
//dynamic array created at run time
            private function calculateHeight():void
            {
                var totalHeight:Number = heightArray[0]+heightArray[1]+heightArray[2];
                //for more values in array use for loop as per user specification
                container1.percentHeight = (heightArray[0]/totalHeight) * 100;
                container2.percentHeight = (heightArray[1]/totalHeight) * 100;
                container3.percentHeight = (heightArray[2]/totalHeight) * 100;
            }

        ]]>
    </fx:Script>
    <s:VGroup width="100%" height="100%" creationComplete="calculateHeight()">
        <s:BorderContainer id="container1" width="100%" >
        </s:BorderContainer>
        <s:BorderContainer  id="container2" width="100%" >
        </s:BorderContainer>
        <s:BorderContainer  id="container3" width="100%" >
        </s:BorderContainer>
    </s:VGroup>

</s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:47:22.060

如果您希望您的三个 BorderContainers 占用您的 VGroup 的相等数量，请尝试以下操作。

```
<s:VGroup width="100%" height="100%">
    <s:BorderContainer width="100%" height="33%">
        ...
    </s:BorderContainer>
    <s:BorderContainer width="100%" height="33%">
        ...
    </s:BorderContainer>
    <s:BorderContainer width="100%" height="33%">
        ...
    </s:BorderContainer>
</s:VGroup> 
```

或者，如果您在 Actionscript 中声明它们。

```
var b:BorderContainer = new BorderContainer();
...
b.percentWidth = 100;
b.percentHeight = 33; 
```

等等

# python - formset、inlineformset_Factory 和 kwargs

> ID：10197479
> 
> 赞同：3
> 
> 时间：2012-04-17T19:05:41.643
> 
> 标签：python, django, django-forms, inline-formset

我有几个模型，我们称它们为模型 A 和模型 B。从 B 到 A 有一个外键。
也就是说 A 和 B 之间的基数是 1:n。

我为 B 制作了一个相应的 ModelForm，称为 MF_B。我在 B 中定义了一个附加字段。例如

```
class MF_B(forms.ModelForm):

    stuff = forms.MultipleChoiceField(queryset=None, required=False)

    class Meta:
        model=B 
```

正如上面的代码所暗示的，我想在这里用一个查询集填充选择。（我在**init** () 中省略了我们用来在 stuff 字段上设置查询集的覆盖代码）

交易是我想使用 inlineformset_factory 在一个页面上创建一个带有 A 的表单和几个带有 B 的表单。

我只想将一堆新的 kwargs 传递给 inlineformset_factory，但它一直抱怨*意外的关键字参数*，并且在查看 django 中的后端代码之后，我明白为什么：inlineformset_factory 不采用自定义 kwargs。它只需要方法 sig 中定义的 kwargs。

```
def inlineformset_factory(parent_model, model, form=ModelForm,
                          formset=BaseInlineFormSet, fk_name=None,
                          fields=None, exclude=None,
                          extra=3, can_order=False, can_delete=True, max_num=None,
                          formfield_callback=None): 
```

我不认为 ica 使用**formfield_callback**因为我需要传递 self.request.user 来过滤查询集中返回的对象。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:56:42.460

为了将 MultipleChoiceField 限制为您指定的查询集，您必须使用工厂。在这种情况下，它将是一个有点令人困惑的 inlineformset_factory_factory，但例如：

在 forms.py （或类似的）

```
def make_inlineformset_factory(queryset, xmodel):
    """
    Returns an Inlineformset factory for the given queryset . . .
    """
    class My_inlineformset_factory():
        stuff = forms.ModelChoiceField(queryset=queryset)
        class Meta:
            model = xmodel
    return My_inlineformset_factory 
```

具体来说，我正在考虑一种类似于此处第一个答案的方法：[django：如何限制表单集中的字段选择？](https://stackoverflow.com/questions/9743103/django-how-to-limit-field-choices-in-formset) 但随后将其适当地调整为 Inlineformset_factory。

稍后我可以找到时间时，我可能会进行编辑以添加更多详细信息和描述。

# iphone - 无法为 RestKit 导入 RKRequestSerialization.h

> ID：10197482
> 
> 赞同：1
> 
> 时间：2012-04-17T19:05:56.340
> 
> 标签：iphone, restkit

我正在使用 XCode 4.3。我可以导入：

```
#import <RestKit/RestKit.h> 
```

但由于某种原因，它将无法找到：

```
#import <RestKit/Network/RKRequestSerialization.h> 
```

安装说明是为 XCode 4.2 编写的，因此在如何设置派生数据位置方面存在不匹配。XCode 4.3 有更多选项，我选择了“唯一”单选按钮选择。还有什么我可能会丢失的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:19:23.660

想通了，也许吧。显然，在 RestKit v0.10.0 中，您可以从 RestKit 根目录访问所有标头：

```
#import <RestKit/RKRequestSerialization.h> 
```

查看构建结果，发现复制命令不再将其复制到 RestKit/Network 文件夹。

# android - 模拟器中的硬编码警告

> ID：10197486
> 
> 赞同：0
> 
> 时间：2012-04-17T19:06:02.347
> 
> 标签：android, android-emulator

我收到此警告：

> 硬编码字符串“按钮名称”应使用@string 资源

这是什么意思？如果我保持原样，应用程序中是否有任何问题（特别与 gps 相关）？

这是按钮：

```
android:id="@+id/retrieve_location_button"
android:text="Retrieve Location"
android:layout_width="wrap_content"
android:layout_height="wrap_content" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:09:56.387

这意味着您的按钮布局 XML 应如下所示：

```
<button android:id="@+id/retrieve_location_button" android:text="@string/location_text" android:layout_width="wrap_content" android:layout_height="wrap_content"> 
```

您的 strings.xml 将在哪里：

```
<resources>
    <string name="location_text">Retrieve Location</string>
</resources> 
```

这是一个国际化和翻译问题，不会影响程序的运行时间。您应该将用户可见的字符串外部化，以便可以翻译您的应用程序。

# php - 使用 Jquery、AJAX、PHP 和数组进行实时更新

> ID：10197490
> 
> 赞同：3
> 
> 时间：2012-04-17T19:06:15.717
> 
> 标签：php, jquery, ajax

因此，我正在尝试使用数组来学习 Jquery/AJAX，以在单个函数中的不同元素上执行和更新代码。

下面，我尝试使用登录网站的人数和流通中的总货币来更新 DIV。该脚本将每隔几秒钟更新一次。

谁能帮我纠正我的语法或至少告诉我我在这里做错了什么？

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="../jquery.js"></script>

<script type="text/javascript">
function updateStats(stat)
{
    var stat = ["online","money"];

    var url = "online.php";

    $.each(stat,function(){

    $.post(url,{stat: stat} , function(data) {

        $("#" + this).html(data);       
    })

    })  
} 

setInterval('updateStats("updateStats")', 2000);
</script>

<body onLoad="updateStats(stats);">

<div id="online"></div>
<div id="money"></div>
</body>
</html> 
```

* * *

```
<?php

if($_POST['stats']=='online')
{
    $result= $mysqli->query("SELECT loggedin FROM accounts WHERE loggedin !=0");
    echo $result->num_rows; 
} 

elseif($_POST['stats'] == 'money')
{
$result = $mysqli->query("SELECT sum(money) AS totalMoney FROM users");
$getData = $result->fetch_assoc();

echo number_format($getData['totalMoney']);

}

$mysqli->close();

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:15:38.673

您的代码应如下所示：

```
function updateStats(stat)
{
    var stat = ["online","money"];
    var url = "online.php";

    $.each(stat, function(i, key){
       $.post(url, {stats: key}, function(data) {
          $("#" + key).html(data);       
       });
    });
} 
```

另请注意`stats`复数形式的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:10:50.253

这里：

```
$("#" + this).html(data); 
```

`this`在那种情况下，指的是与`this`您所期望的不同。试试这个：

```
$.each(stat,function(i,str){
    $.post(url,{stats: str} , function(data) {
        $("#" + str).html(data);       
    });
}); 
```

**根据 Rory 的评论**更新固定参数名称。****

# c# - 从集合中删除/跳过项目的最佳方法是什么

> ID：10197494
> 
> 赞同：2
> 
> 时间：2012-04-17T19:06:18.303
> 
> 标签：c#, asp.net

从集合对象中删除/跳过项目的最佳方法是什么

```
List<Person> personList = new List<Person>()
personList  = dao.GetData(123);
personList = personList.Select(x => x.Comment... ???? 
```

结果集：

```
"GCE"   
Not available 
""               //comments
"RES" 
9.97000000 
9.99000000 

........
........
........ 
```

所以，我的目标是名为“评论”的字段，如果评论为空，则不呈现。

我可以`foreach`用一个循环来做，`if condition`但我正在寻找最佳实践

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T19:13:19.013

如果您想从列表中*破坏性*地删除有问题的项目，请使用该`RemoveAll(Predicate<T>)`方法；它从列表中删除与谓词匹配的每个项目：

```
myList.RemoveAll(x=>x.Comment == whatever); 
```

如果您想保持列表相同并制作*过滤*后的项目序列，请使用`Where`：

```
foreach(Item item in myList.Where(x=>x.Comment != whatever))
    ... 
```

这使列表保持不变；只是为您提供了`Where`应用了过滤器的列表的“视图”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-17T19:08:37.923

你可以`Where`像...

```
foreach (var a in personList.where(x => !string.IsNullOrWhitespace(x.Comment))
{
   // code
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T19:10:25.370

您甚至可以在使用之前使用 LINQ 过滤集合。对于初学者来说，这有点多余：

```
List<Person> personList = new List<Person>()
personList  = dao.GetData(123);
personList = personList.Select(x => x.Comment... ???? 
```

听起来您正在寻找的是这样的：

```
var personList = dao.GetData(123)
                    .Where(p => !string.IsNullOrWhitespace(p.Comment))
                    .Select(p => ... 
```

然后你可以循环遍历`personList`.

当然，回头看，如果你甚至*不需要*（`.Select()`也就是说，如果它除了尝试过滤之外没有做任何事情），那么这更简单：

```
var personList = dao.GetData(123)
                    .Where(p => !string.IsNullOrWhitespace(p.Comment)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T19:11:17.283

您可以关心两个扩展：

`Where`：

```
var subset = collection.Where(x => x != someValue); 
```

此方法简单地获取所有元素并将谓词应用于它，仅产生匹配的元素。

和`Skip`, `SkipWhile`:

```
var skipFirstThreeItems = collection.Skip(3);
var skippedItems = collection.SkipWhile(x => x != "SomeValue") 
```

与第二个的重要区别是它将跳过值直到谓词匹配，然后它将获取所有后续元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-17T19:09:16.673

这会将列表限制为具有非空和非空白字符串的注释：

```
List<Person> personList = dao.GetData(123); 
filteredList = personList.Where(x => !String.IsNullOrWhitespace(x.Comment)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T03:30:19.657

我经常认为*最好*的方法是有争议的，但我喜欢*明确*说明代码在做什么：

```
var peopleWithComments = dao.GetData(123)
  .Where(person => person.Comment.IsPresent());

...

public static class StringExtensions {
  public bool IsPresent(this string self) {
    return !String.IsNullOrWhitespace(self);
  }
} 
```

# sql - 将 SQL 表转储到 XML 文件

> ID：10197497
> 
> 赞同：0
> 
> 时间：2012-04-17T19:06:29.780
> 
> 标签：sql, phpmyadmin, into-outfile

我正在为此苦苦挣扎。我正在使用以下 SQL 来创建 XML 文件，但我收到一个错误：用户'designan_testu'@'localhost'的访问被拒绝（使用密码：YES）

我可以`INSERT`，，`DELETE`并且`UPDATE`没有错误。只是`INTO OUTFILE`给我一个错误。

它是否返回错误 b/c 我的数据库名称和用户名中有下划线？仅供参考，我的 cPanel 的 My SQL 数据库管理器`cPanelUser_`会自动附加到所有数据库名称和数据库用户名。

```
$fileName = 'xml.xml';
unlink($fileName);

$strSQL = "SELECT 'CustomerID','Name','Email','CountryCode','Budget','Used' INTO OUTFILE 'xml.xml'";
$strSQL .= "FIELDS TERMINATED BY ',' ENCLOSED BY '\"' LINES TERMINATED BY '\n' FROM customer;";
$objQuery = mysql_query($strSQL);
if(!$objQuery)
{
    echo "Error Export [".mysql_error()."]";
} 
```

问题可能出在我的语法上吗？但愿如此！

更新：我已经以 root 访问权限登录到 cPanel，在 PHP My Admin 中，我使用命令行执行此操作：`GRANT FILE ON *.* TO 'designan_testu'@'localhost';`从相关数据库中。

这似乎已经解决了权限问题，谢谢。

然后我收到一条错误消息，指出 xml.xml 已经存在。所以我添加了`unlink($filename);`上面的内容，试图在重写之前删除文件，但现在我收到 2 个错误，第一个：`Warning: unlink(xml.xml) [function.unlink]: No such file or directory in /home/designan/public_html/sandbox/curl/test/index.php on line 14`和第二个：`Error Export [File 'xml.xml' already exists]`

...我有点困惑。我只想将表转储到 xml 文件中。

# sitecore - Sitecore Publish 创建损坏的项目

> ID：10197501
> 
> 赞同：1
> 
> 时间：2012-04-17T19:06:45.133
> 
> 标签：sitecore, publish

我在下面有这段代码，我用它来发布到 Web 数据库。我遇到了一个问题，当我使用下面的代码发布时，我的 Web 数据库中有一个损坏的项目，当我单击它时，会出现错误“值不能为空”。参数名称“项目”。当我查看该项目时，它的图标是标准模板与具有自定义图标的自定义模板的图标。但是当我单击它时，我看到了所有字段以及上述错误。

是否有一个与 Web 数据库中已发布项目同名的项目是一个问题？

```
using (new SecurityDisabler())
{
    Sitecore.Data.Database master = Sitecore.Configuration.Factory.GetDatabase("master");
    Sitecore.Data.Database target = Sitecore.Configuration.Factory.GetDatabase("web");
    Sitecore.Data.Items.Item home = master.GetItem(new ID(id));
    Sitecore.Data.Database[] targetDatabases = { target };
    Sitecore.Globalization.Language[] languages = master.Languages;
    bool deep = false;
    bool compareRevisions = true;
    Sitecore.Publishing.PublishManager.PublishItem(home, targetDatabases, languages, deep, compareRevisions);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:09:42.847

*如果与您发布的上下文相关*

# 异步发布

您可以尝试异步运行发布作业。然后通过 Sitecore 作业完成发布。

```
using Sitecore.Publishing;
PublishOptions publishOptions = new PublishOptions(item.Database, Database.GetDatabase("web"), PublishMode.SingleItem, item.Language, DateTime.Now) { Deep = deep, RootItem = item };

Publisher p = new Publisher(publishOptions);
p.PublishAsync(); 
```

*如果这没有任何区别，则可能与项目值表中留下的无效字段值有关。*

# 数据库清理

您可以尝试数据库清理并删除旧字段作为开始，如果仍然导致问题您应该查看数据库级别的值字段并比较“错误”发布和正确发布上的字段值。

# php - 使用 AJAX 显示图像

> ID：10197507
> 
> 赞同：0
> 
> 时间：2012-04-17T19:07:15.107
> 
> 标签：php, sql, ajax

这就是我正在做的事情。

我正在建立一个网站，来自 twitter 的用户从他们的 tweetbot 客户端将图像上传到我的网站。我的应用程序从 tweetbot 检索照片并将其上传到我的 racskpace 云服务器。我已经成功地完成了这一切。我现在正在设计一个如下所示的用户界面。还有一个网络上传器。

[http://d.pr/i/x4A0](http://d.pr/i/x4A0)

网络上传器工作正常。我想要的是，请注意下面的三张图片。我希望它改变生活。例如，如果用户通过他们的 tweetbot 客户端上传照片，照片应该出现在这里。上传过程全部通过文件 /api/index.php 完成。所以无论我需要放什么代码，这样每当用户上传时，文件 /api/index.php 就会被执行，我的 UI 应该会实时反映。

因此，我在 AJAX 中进行了一些研究来做到这一点。我在 /api/index.php 中包含了以下函数

```
<script type="text/javascript">
    function showPhoto(str) {

        if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else { // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                $shortenedurl = xmlhttp.responseText;
            }

        }

        xmlhttp.open("GET", "getphoto.php?q=" + str, true);
        xmlhttp.send();
    }
</script> 
```

我还通过在 /api/index.php 文件末尾添加 showPhoto($shortenedurl) 来执行该功能

getPhoto.php 看起来像这样：

```
<?php

    $q=$_GET["q"];

    $con = mysql_connect("","","");
    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("", $con);
    $result = mysql_query("SELECT * FROM tblphoto WHERE shorturl = '$q'");
    $row = mysql_fetch_array( $result );
    $tweet = $row['tweet'];
    $sn = $row['user'];
    $thumb = $row['thumb'];

    mysql_close($con);

?>

<div class="one-third column feature">
    <h2>
        <?php echo $sn; ?>
    </h2>
    <img src=<?php echo $thumb; ?>/>
    <p>
        <?php echo $tweet; ?>
    </p>
</div>
<div class="one-third column feature">
    <h2>Two</h2>
    <img src="http://lorempixum.com/400/100/nature/2" />
    <p>Lorem ipsum dolor sit amet...</p>
</div>
<div class="one-third column feature">
    <h2>Three</h2>
    <img src="http://lorempixum.com/400/100/nature/3" />
    <p>Lorem ipsum dolor sit amet...</p>
</div> 
```

然后我在我的 UI 的 index.html 中包含 getPhoto.php。

我还希望能够遍历数据库并一次只显示三个图像。因此，如果用户上传照片，最左边的照片将更改为最新的。前一个最左边占据第二个位置，前一个中间占据第三个位置。最右边的照片被丢弃。

现在，什么都没有显示，如屏幕截图所示。是在正确的方向还是我做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:01:14.690

第一个 src uri 在您的 getImages.php 中没有正确引用：

尝试更换

```
<img src=<?php echo $thumb; ?> /> 
```

和

```
<img src="<?php echo $thumb; ?>" /> 
```

我刚刚完成了一个项目，用户可以使用 ajax 上传器上传照片，并且几乎所有东西都使用了 jQuery，所以我的答案很大程度上基于 jQuery。

什么来显示照片，我认为你应该只提出要求图像 url 或完整图像标签的 ajax 请求。这是您的选择，取决于您的需求：

## 请求图像的脚本：

```
$.ajax({
    type: 'POST',
    url: 'getPhotos.php',
    success: function(data){
        // Replace <div id="#photos"> contents with data returned from server:
        $('#photos').empty().append(data);
    }
}); 
```

## 提供图像的 PHP 文件：

```
// Start session to keep track of already displayed images
session_start();
if (!isset($_SESSION['index'])) $_SESSION['index'] = 0;

// Increment photo index to show other (next) photo every time request is made:
$_SESSION['index']++;    
$index = $_SESSION['index'];
// If all photos already displayed, start over again:
if ($index > getPhotoCount()) $index = 1;

// Get photo uri from sql or somewhere:
$photourl = getPhotoURI( $index );
echo '<img src="'.$photourl.'" />'; 
```

# c++ - VS 2010 C++ Express，项目创建错误

> ID：10197513
> 
> 赞同：2
> 
> 时间：2012-04-17T19:07:47.073
> 
> 标签：c++, xml, visual-studio-2010, styles, project

我打开 vs 进入创建新项目，win32 控制台应用程序，然后它显示给我。

![显示 HTML 的 Visual C++ 窗口](../Images/14852b67ddb238e791b56bc975937365.png)

它看起来像项目创建表单的 XML 样式。

# php - 在 cakephp 中的单选按钮旁边添加图像

> ID：10197515
> 
> 赞同：0
> 
> 时间：2012-04-17T19:07:53.827
> 
> 标签：php, cakephp, radio-button, radio

如何在 cakephp 中创建单选按钮并将图像附加到每个按钮？是否有可能，我正在使用创建一个动态单选按钮列表

```
echo $this->Form->input('db.field', array('type' => 'radio', 'options' => $myOptions,  'label' => 'myLabel')); ?> 
```

请问有什么帮助吗？感谢：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:43:14.770

您可以简单地将图像放入选项数组中：

```
$myOptions          = array();
$myOptions['power'] = $this->Html->image('cake.power.gif');
$myOptions['icon']  = $this->Html->image('cake.icon.png');

echo $this->Form->input('db.field', array('type' => 'radio', 'options' => $myOptions,  'label' => 'myLabel')); ?> 
```

# emacs - “这个 Emacs 会话有客户端” - 我如何找出原因？

> ID：10197517
> 
> 赞同：3
> 
> 时间：2012-04-17T19:08:10.240
> 
> 标签：emacs

时不时地，在 Cx Cc Emacs 上宣布“这个 Emacs 会话有客户端；仍然退出？”。

（我在 Windows 7 上使用 Emacs 24beta，以防万一。）

我希望打开一些通过 emacsclientw.exe 打开的文件 - 但我没有看到任何文件。

（我有 git config --global core.editor "/c/lang/emacs-24beta/bin/emacsclientw.exe"）

有没有办法找出哪些缓冲区有客户？（或者还有什么要寻找的吗？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T19:45:45.230

> 有没有办法找出哪些缓冲区有客户？

当缓冲区有客户端时，其`server-buffer-clients`变量的值将非零。

我确信有更好的方法，但是这段代码应该提供一个带有客户端的缓冲区列表：

```
（需要'cl）

（defvar 服务器缓冲区无）

(defun show-server-buffers ()
  （交互的）
  （setq 服务器缓冲区无）
  （让（（原始缓冲区（当前缓冲区）））
    （循环在（缓冲区列表）中的 buf
      做
      （预测
        （切换到缓冲区缓冲区）
        （如果（和
         服务器缓冲区客户端
         (buffer-live-p buf))
        (添加到列表'服务器缓冲区 buf))))
    （切换到缓冲区原始缓冲区）
    （消息“服务器缓冲区：%s”服务器缓冲区）））

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-28T10:34:34.743

我已经适应`list-processes`了列出客户。您会使用新定义的命令获得一个客户进程列表`list-clients`。每个客户端与将客户端作为第一个条目的服务器编辑缓冲区一起列出`server-buffer-clients`。

```
(define-derived-mode client-menu-mode process-menu-mode "Client Menu"
  "Major mode for listing the currently connected client processes."
  (remove-hook 'tabulated-list-revert-hook #'list-processes--refresh t)
  (add-hook 'tabulated-list-revert-hook #'server-list-clients--refresh nil t))

(defun server-list-clients (&optional query-only buffer)
  "Display a list of all clients of this emacs session.
If optional argument QUERY-ONLY is non-nil, only processes with
the query-on-exit flag set are listed.
Any process listed as exited or signaled is actually eliminated
after the listing is made.
Optional argument BUFFER specifies a buffer to use, instead of
\"*Client List*\".
The return value is always nil."
  (interactive)
  (or (fboundp 'process-list)
      (error "Asynchronous subprocesses are not supported on this system"))
  (unless (bufferp buffer)
    (setq buffer (get-buffer-create "*Client Process List*")))
  (with-current-buffer buffer
    (client-menu-mode)
    (setq process-menu-query-only query-only)
    (server-list-clients--refresh)
    (tabulated-list-print))
  (display-buffer buffer)
  nil)

(defalias #'list-clients #'server-list-clients)

(defun server-client-buffer (client)
  "Return buffer with client in `server-buffer-clients'."
  (catch :found
    (dolist (buf (buffer-list))
      (if (memq client (with-current-buffer buf server-buffer-clients))
          (throw :found buf)))))

(defun server-list-clients--refresh ()
  "Recompute the list of client processes for the Client List buffer.
Also, delete any process that is exited or signaled."
  (setq tabulated-list-entries nil)
  (dolist (p server-clients)
    (cond ((memq (process-status p) '(exit signal closed))
       (delete-process p))
      ((or (not process-menu-query-only)
           (process-query-on-exit-flag p))
       (let* ((buf (server-client-buffer p))
          (type (process-type p))
          (name (process-name p))
          (status (symbol-name (process-status p)))
          (buf-label (if (buffer-live-p buf)
                 `(,(buffer-name buf)
                   face link
                   help-echo ,(format-message
                           "Visit buffer `%s'"
                           (buffer-name buf))
                   follow-link t
                   process-buffer ,buf
                   action process-menu-visit-buffer)
                   "--"))
          (tty (or (process-tty-name p) "--"))
          (cmd
           (if (memq type '(network serial))
               (let ((contact (process-contact p t)))
             (if (eq type 'network)
                 (format "(%s %s)"
                     (if (plist-get contact :type)
                     "datagram"
                       "network")
                     (if (plist-get contact :server)
                     (format "server on %s"
                         (or
                          (plist-get contact :host)
                          (plist-get contact :local)))
                       (format "connection to %s"
                           (plist-get contact :host))))
               (format "(serial port %s%s)"
                   (or (plist-get contact :port) "?")
                   (let ((speed (plist-get contact :speed)))
                     (if speed
                     (format " at %s b/s" speed)
                       "")))))
             (mapconcat 'identity (process-command p) " "))))
         (push (list p (vector name status buf-label tty cmd))
           tabulated-list-entries)))))) 
```

# c++ - Win32位图颜色转灰度

> ID：10197518
> 
> 赞同：3
> 
> 时间：2012-04-17T19:08:29.240
> 
> 标签：c++, winapi

我正在编写一个程序，它可以打开、旋转、缩放、反转颜色、转换为灰度并保存位图（.bmp），但我似乎没有让转换为灰度（即黑白）的工作在其他所有代码中都能正常工作。 .

我的颜色反转代码如下...

```
 case 3:
{
    hdc=GetDC(hWnd);
    GetClientRect(hWnd,&rt);
    BitBlt(hdc,0,0,rt.right,rt.bottom,hdc,0,0,NOTSRCCOPY);
    ReleaseDC(NULL,hdc);
} 
```

这似乎可行，但是使用 BitBlt 获取 DC 并尝试将其更改为灰度无法正常工作...我想了解如何获取 DC 并将其转换为灰度... winapi 谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:22:49.073

Raymond Chen 给出了使用 GDI 中的颜色映射器使用 BitBlt 将彩色图像转换为灰度的[完整示例。](http://blogs.msdn.com/b/oldnewthing/archive/2009/07/14/9832544.aspx)

# c# - 获取两个日期时间之间的（下限）小时列表

> ID：10197519
> 
> 赞同：4
> 
> 时间：2012-04-17T19:08:31.050
> 
> 标签：c#

我写了一个函数来包容地给我一个介于两个之间的小时列表`DateTime`。

但最终它看起来并不是很容易阅读，这让我想对它进行单元测试，即使我正在处理的项目根本没有单元测试。

所以我的问题是，有没有更清晰和或更有效的方式来写这个？：

代码：

```
private List<DateTime> GetHoursForEvent(DateTime start, DateTime end)
{
    var hours = new List<DateTime>();

    DateTime startFloor = Convert.ToDateTime(start.ToString("MM/dd/yyyy HH:00:00"));
    DateTime endFloor = Convert.ToDateTime(end.ToString("MM/dd/yyyy HH:00:00"));

    for (double dblDate = startFloor.ToOADate(); 
         dblDate <= endFloor.ToOADate(); 
         dblDate += (1.0 / 24.0))
    {
        hours.Add(DateTime.FromOADate(dblDate));
    }

    return hours;
} 
```

输入：

```
DateTime start = Convert.ToDateTime("2012-04-01 04:22:00");
DateTime end   = Convert.ToDateTime("2012-04-02 00:05:00"); 
```

结果：

```
2012-04-01 04:00:00
2012-04-01 05:00:00
2012-04-01 06:00:00
2012-04-01 07:00:00
2012-04-01 08:00:00
2012-04-01 09:00:00
2012-04-01 10:00:00
2012-04-01 11:00:00
2012-04-01 12:00:00
2012-04-01 13:00:00
2012-04-01 14:00:00
2012-04-01 15:00:00
2012-04-01 16:00:00
2012-04-01 17:00:00
2012-04-01 18:00:00
2012-04-01 19:00:00
2012-04-01 20:00:00
2012-04-01 21:00:00
2012-04-01 22:00:00
2012-04-01 23:00:00
2012-04-02 00:00:00 
```

我觉得我正在重新发明轮子。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T19:13:09.107

是的，这样的事情应该更适合你：

```
private List<DateTime> GetHoursForEvent(DateTime start, DateTime end)
{
    var hours = new List<DateTime>();
    var current = new DateTime(start.Year, start.Month, start.Day, start.Hour, 0, 0);
    while(current <= end)
    {
        hours.Add(current);
        current = current.AddHours(1);
    }
    return hours;
} 
```

你甚至可能想把它变成一个流方法，除非有特定的原因你需要返回一个`List`：

```
private IEnumerable<DateTime> GetHoursForEvent(DateTime start, DateTime end)
{
    var current = new DateTime(start.Year, start.Month, start.Day, start.Hour, 0, 0);
    while(current <= end)
    {
        yield return current;
        current = current.AddHours(1);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:18:00.127

尝试使用此代码

```
private List<DateTime> GetHoursForEvent(DateTime start, DateTime end)
    {
        List<DateTime> hours = new List<DateTime>();
        while (start < end)
        {
            hours.Add(start);
            start = start.AddHours(1);
        }
        return hours;
    } 
```

# sql - oracle查询嵌套选择使用案例

> ID：10197520
> 
> 赞同：1
> 
> 时间：2012-04-17T19:08:32.610
> 
> 标签：sql, oracle

我有（2）个案例陈述：

```
SELECT CASE WHEN EXISTS
                   ( SELECT *
                     FROM MYTABLE_A
                     WHERE timestamp = to_char(sysdate-1, 'yyyymmdd') || '0000'
                   )
            THEN 0
            ELSE 1
       END AS FLAG_MYTABLE_A
from DUAL;
SELECT CASE WHEN EXISTS
                   ( SELECT *, timestamp
                     FROM MYTABLE_B
                     WHERE
                     timestamp = to_char(sysdate-1, 'yyyymmdd') || '0000'
                   )                       )
            THEN 0
            ELSE 1
       END AS FLAG_MYTABLE_B
from DUAL; 
```

结果：

```
FLAG_MYTABLE_A
--------------
             0

FLAG_MYTABLE_B
--------------
         1 
```

我需要帮助构建此查询，以便显示以下结果。

```
MYTABLENAME       MYFLAG
-----------       ------
MYTABLE_A              0
MYTABLE_B              1 
```

我在看嵌套选择吗？有人可以告诉我如何设置吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T19:11:53.737

您可以使用`UNION ALL`：

```
SELECT 'MYTABLE_A' AS MYTABLENAME, CASE WHEN EXISTS
                   ( SELECT *
                     FROM MYTABLE_A
                     WHERE timestamp = to_char(sysdate-1, 'yyyymmdd') || '0000'
                   )
            THEN 0
            ELSE 1
       END AS FLAG_MYTABLE_A
from DUAL
UNION ALL
SELECT 'MYTABLE_B' AS MYTABLENAME, CASE WHEN EXISTS
                   ( SELECT *, timestamp
                     FROM MYTABLE_B
                     WHERE
                     timestamp = to_char(sysdate-1, 'yyyymmdd') || '0000'
                   )                       )
            THEN 0
            ELSE 1
       END AS FLAG_MYTABLE_B
from DUAL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:11:39.693

您可以执行以下操作：

```
SELECT "MYTABLE_A", CASE ... END AS "MYFLAG" FROM DUAL
UNION
SELECT "MYTABLE_B", CASE ... END AS "MYFLAG" FROM DUAL 
```

# performance - 使用空数据库的 RavenDB 慢查询

> ID：10197531
> 
> 赞同：2
> 
> 时间：2012-04-17T19:09:04.193
> 
> 标签：performance, ravendb, linqpad

删除数据文件夹后，我刚刚启动了一个新的 RavenDB 服务器。所以，我有一个空的数据库。我在 LinqPad 中运行了这个查询。第一次用了19秒，第二次用了13秒。为什么在空数据库上需要这么长时间？

```
Session.Query<PerformanceMetric>()
.Where(x => x.CreatedTime > new DateTime(2012, 4, 17, 15, 00, 00))
.OrderBy(x => x.ObjectType)
.OrderBy(x => x.CreatedTime)
.Take(1000)
.ToList().Dump(); 
```

注意：我运行查询的第三次和第四次只用了 0.02 秒。是建立索引还是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T20:42:33.610

我最好的猜测是构建索引所花费的时间。当你不提前创建索引时，RavenDB 会让你仍然查询随机的东西，它只会为你创建一个索引，如果你使用得足够多，它会一直保留它。

尝试提前创建索引，看看它是如何工作的。

更多信息可以在这里获得：http: [//ayende.com/blog/4667/ravens-dynamic-queries](http://ayende.com/blog/4667/ravens-dynamic-queries)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T01:09:05.287

需要一段时间的原因是我们需要创建一个索引来运行查询，如果还没有的话。即使没有文档，我们仍然需要做一些准备工作。特别是，编译索引通常是最昂贵的部分。

# nginx - 重写 - 将服务器 IP 转发到域 url nginx

> ID：10197534
> 
> 赞同：8
> 
> 时间：2012-04-17T19:09:26.567
> 
> 标签：nginx, ip, forwarding, unicorn

我想让我的服务器的 IP 被重写为域名 url，但我很难弄清楚如何做到这一点。

例如，当我在浏览器中输入 213.34.54.xxx 时，我希望它被重写为 mydomain.com 并且不显示 IP 地址。

我目前的配置如下：

**/etc/nginx/nginx.conf**

```
user www-data;
worker_processes 2;
error_log  /var/log/nginx/error.log;
pid /var/run/nginx.pid;

events {
  worker_connections 1024;
}

http {
  include       /etc/nginx/mime.types;
  default_type  application/octet-stream;
  access_log /var/log/nginx/access.log;
  server_names_hash_bucket_size 64;
  sendfile        on;

  include /etc/nginx/conf.d/*.conf;
  include /etc/nginx/sites-enabled/mydomain;
} 
```

**/etc/nginx/sites-enabled/mydomain**

```
upstream unicorn {
    server unix:/tmp/unicorn.mydomain.sock fail_timeout=0;
   }

    server {
      listen 80 default;
      server_name localhost;
      root /home/deployer/apps/mydomain/current/public;

      location ^~ /assets/ {
        gzip_static on;
        expires max;
        add_header Cache-Control public;
      }

      try_files $uri/index.html $uri @unicorn;
      location  / {
        proxy_set_header Host $http_host;
        proxy_set_header  X-Real-IP  $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_pass http://unicorn;
      } 

      error_page 500 502 503 504 /500.html;
      client_max_body_size 4G;
      keepalive_timeout 10;
     } 
```

我尝试将此添加到**mydomain**配置文件中的 server 指令中：

```
rewrite ^ $scheme://mydomain.com$request_uri redirect; 
```

但我的浏览器出现太多重定向错误。

至少，我可以通过在 server 指令中使用它来防止显示 IP 地址：

```
if ($host !~* ^www\.) {
    rewrite ^(.*)$ http://www.$host$1 permanent;
   } 
```

但是，这被列为 nginx 网站上的陷阱之一 :(

任何我可能做错的见解将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-03-19T17:19:44.397

实际上上面的答案不起作用（至少对我来说）。我想自从提出问题以来，提问者已经找到了他的解决方案，但是由于我在谷歌上搜索并且这里有很多链接，也许这个解决方案会帮助其他人，只需将其添加到您的 conf 文件中：

```
server {
        server_name 162.13.171.178;
        # you can add other server_name if you need other IPs
        # or domain names such as without the www

        add_header X-Frame-Options "SAMEORIGIN";

        return 301 $scheme://www.example.com$request_uri;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-09T23:44:12.200

也可以使用一个服务器块从多个 IP 重定向。

```
server {
  listen 80;
  listen 443;
  server_name 172.20.0.2 172.20.0.3 172.20.0.4;

  return 301 $scheme://www.yourdomain.com$request_uri;
} 
```

碰巧还有一个例行的 PCI 合规性发现（泄漏私有 IP），可以使用这种策略来解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-26T08:53:42.700

如下向我的域 vhost 文件的底部添加一个新的服务器实例对我有用：

```
server {
listen xxx.xxx.xxx.xxx:80;
server_name xxx.xxx.xxx.xxx;
rewrite ^ http://example.com$request_uri? permanent;
} 
```

**/etc/init.d/nginx 重新加载**

注意：我添加此重写的唯一原因是因为不知何故，我的一台服务器的 IP 地址最终出现在 Google 搜索结果中，这可能会导致重复内容出现问题。如果这没有发生，我就不会费心添加重写。您可以通过搜索您的 IP 地址来检查您的服务器 IP 是否在搜索结果中：

**网站：xxx.xxx.xxx.xxx**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-24T22:30:10.537

您需要为重写规则编写一个服务器块。*一个块可以容纳多个`server_name`元素。*

```
# Say this is your default BIG block

server {
  listen 80 default_server;
  server_name example.com;

  passenger_enabled on;
  rails_env production;
  root /var/www/your_app/current/public/;
}

# Requests made to WWW and directly to the IP address should be
# forwarded to the BIG block

server {
  listen 80;
  server_name www.example.com 55.55.55.55;

  return 301 http://example.com$request_uri;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-05-03T07:52:04.593

在您的 Nginx 配置文件中，添加以下服务器块。

```
server {
listen 80 default;
rewrite ^ http://your_domain_name.com$request_uri permanent;
} 
```

# javascript - 如何运行示例 Caja（JavaScript 的安全子集）源代码？

> ID：10197536
> 
> 赞同：1
> 
> 时间：2012-04-17T19:09:37.173
> 
> 标签：javascript, google-caja

Caja 是由 Google 开发[的 JavaScript 的安全版本。](http://code.google.com/p/google-caja/)我无法测试它，即为了展示它的演示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:23:07.343

[wiki](http://code.google.com/p/google-caja/wiki/GettingStarted?tm=6)链接到[Caja 游乐场](http://code.google.com/p/google-caja/wiki/CajaPlayground)。你是这个意思吗？

# ios - IOS/SQLLite：Where/Where是创建数据库的最佳时间

> ID：10197538
> 
> 赞同：0
> 
> 时间：2012-04-17T19:09:55.037
> 
> 标签：ios, sqlite, initialization, create-table

我目前正在将我的 sqllite 数据库包含到我的应用程序中，并且我一直想知道何时是应用程序生命周期中创建表（或检查它们是否存在）的最佳时间。

在我阅读的大多数示例中，作者都​​做了这样的事情：

```
- (void)viewDidLoad
{
    NSString *docsDir;
    NSArray *dirPaths;

    // Get the documents directory
    dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    docsDir = [dirPaths objectAtIndex:0];

    // Build the path to the database file
    databasePath = [[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent: @"contacts.db"]];

    NSFileManager *filemgr = [NSFileManager defaultManager];

    if ([filemgr fileExistsAtPath: databasePath ] == NO)
    {
        const char *dbpath = [databasePath UTF8String];

        if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
        {
            char *errMsg;
            const char *sql_stmt = "CREATE TABLE IF NOT EXISTS CONTACTS (ID INTEGER PRIMARY KEY AUTOINCREMENT, NAME TEXT, ADDRESS TEXT, PHONE TEXT)";

            if (sqlite3_exec(contactDB, sql_stmt, NULL, NULL, &errMsg) != SQLITE_OK)
            {
                status.text = @"Failed to create table";
            }

            sqlite3_close(contactDB);

        } else {
            status.text = @"Failed to open/create database";
        }
    }

    [filemgr release];
    [super viewDidLoad];

} 
```

但是如果 viewDidLoad 是创建它的基础位置，我会一直徘徊。在应用程序初始化期间创建会更好吗？

这更多是什么是最佳实践的问题，而不是因为我当前的代码工作得很好^^

感谢您的意见

杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:04:42.080

我建议您转移到 CoreData 进行数据管理，您还可以通过在 Xcode 中创建一个新应用程序并单击复选框 CoreData 来轻松回答您的问题，然后检查 AppDelegate 以查看持久存储的创建位置（以及如何创建）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:21:27.453

初始化模型的最佳位置是在您的应用程序委托中。iOS Springboard 为您的启动屏幕设置动画并显示它，直到您的应用程序委托`application:didFinishLaunchingWithOptions:`返回，允许您进行阻塞操作而用户不会注意到它们太多（没有 UI 口吃）。此方法只调用一次，因此您可以确保在应用程序当前运行期间不会多次调用数据库创建代码。

代码通常看起来像这样，给你一个单例类，当你通过第一次调用它的方法`DataModel`初始化它的实例时初始化数据库：`sharedModel`

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    [DataModel sharedModel];

    // Initialize your window and root view controller...

    return YES;
} 
```

# c - 动态内存分配函数 - Malloc 和 Free

> ID：10197541
> 
> 赞同：0
> 
> 时间：2012-04-17T19:09:58.240
> 
> 标签：c

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
int main()
{
char *p;
p = (char *)malloc(4*sizeof(char));
strcpy(p, "abcdabcd");
printf("%s\n", p);
free(p);
printf("%s\n", p);
return 0;
} 
```

我尝试在 Ubuntu 上运行上述代码。这里我从 malloc 分配 4 个字节的内存。然后我尝试将 8 个字节复制到 malloc 分配的内存中。我没有收到任何警告或错误。我尝试释放内存块并尝试使用被释放的相同内存，但再次没有任何问题。它打印了正确的字符串。有人可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:13:12.637

这种行为无法得到有意义的解释。您的程序表现出*未定义*的行为，这意味着任何事情都可能发生。“任何东西”还包括您在实验中观察到的行为，即“打印正确的字符串”。

今天它“打印了正确的字符串”。明天它可能会崩溃。后天它可能会格式化您的硬盘。在未定义行为的概念下，这是完全允许的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T19:13:22.830

Aparrently正确的操作属于[未定义的行为]类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T19:24:49.820

当程序启动时，它可以通过操作系统访问虚拟内存。通常虚拟页面有一些最小大小（比如 4 kb），这是处理它们的最小大小。

因此，您使用低于此页面大小的 malloc 请求内存，并且整个块都可用。*Some/None/All 此块可能被其他程序使用*。但它在技术上仍然存在：

```
1 byte | 1 byte | 1 byte | 1 byte | more memory you don't have....
 ^ char p points here 
```

*然后，您开始从 p*开始将字符串复制到内存中。所以你得到：

```
a | b | c | d | the rest of the chars start dumping into somebody elses space! 
```

这种重叠是未定义的。换句话说，我们可能有未使用的内存，所以**今天**一切正常。明天，该物理内存空间由操作系统持有，我们无法覆盖它。第二天，我们打破了一些其他的程序。在那之后的第二天，我们就出现了故障。

正如其他人所指出的，C 不会照顾你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T19:17:49.720

C 语言不保证任何内存检查。基本上，如果您写入不属于您的内存（例如，您写入的内存超出了数组的范围），或者您从不属于您的内存中读取（例如，您通过释放它从您放弃的内存中读取） ) 不知道会发生什么。

但是，操作系统可能会也可能不会阻止您执行这些操作。通常，如果发生这种情况，您会收到 "Bus Error" 或["Segmentation Fault"](http://en.wikipedia.org/wiki/Segmentation_fault)。但是，也不能保证这两种情况都会发生。

最好的办法是防御性地编写代码。跟踪您的数组有多长，然后断言或以其他方式检查当您复制到数组时您不会超过数组大小。

您可以做的另一件事是调试。[Valgrind](http://valgrind.org/ "瓦尔格林德")是一种非常有效的工具，可以解决您所描述的问题。它可以指示您读取或写入尚未 malloc 的内存的两种情况。它还可以识别泄漏，例如当您 malloc 内存然后忘记释放它时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T19:19:42.660

我相信它会沿着块对齐分配，这就是为什么它在这种情况下给你一些神奇的额外内存。尝试将其提高到更大的字节倍数（例如 16,64 等，它应该更准确，如果超出它*可能会出现段错误）。*尽管请记住，如果 malloc'd 块之后的内存也是程序内存空间的一部分……那么您也不会遇到段错误。

一般来说，只要你留在你的程序内存段中，你就可以愉快地读/写你想要的一切（当然风险自负：D）。

如果您真的想检查您的程序，请使用/in 'valgrind' 运行它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-10T09:58:48.477

就像所有其他人所说的那样，您的代码会导致**未定义**的行为（任何事情都可能发生）。

***您的堆内存分配器 (malloc) 不负责释放后存储在该区域中的数据***。

了解 malloc 的职责将帮助您解释为什么看到结果、为什么它不正确的编程实践以及为什么它不能一直工作。

Malloc 是 glibc 中的堆内存分配器（_int_malloc 和 _int_free）。你可以在这里查看它的代码 [ [http://code.woboq.org/userspace/glibc/malloc/malloc.c.html#_int_malloc]](http://code.woboq.org/userspace/glibc/malloc/malloc.c.html#_int_malloc])。

> 有人可以解释一下这种行为吗？

一个滑稽的例子将有助于快速澄清你的问题。

假设您正在从一家汽车旅馆 ( **sbrk(2) ) 租一个房间 (** **memory** )，而该汽车旅馆没有任何房间的钥匙 ( **memory** )！. 你去找接待员 ( **malloc** ) 并要求一个房间 ( **memory** )，她给你一个可用的房间，你拿下房间 ( **memory** ) 并使用它。 你已经完成了它，现在向她保证你不会再次使用它（**释放**）。她在她的书中做了一个条目，你的房间（**记忆**）是免费的，可以分配给其他人。把房间给别人或不给别人，完全是她的心愿。 **************过了一段时间你又来看看你的房间（接待员没有检查你），如果你发现没有人使用房间，你很幸运（它看起来和你离开时一样凌乱！）**************

 ********接待员（malloc）的工作是尽快为您分配一个房间（内存），相信您在离开后会遵守诺言（免费）。她的工作不是阻止您使用任何房间（记忆） ！**

*如果您访问不允许您访问的地方（只读区域），所有者（内核）会变得愤怒（异常）。*

我是新手，我不确定这样回答是否合适。如果我错了，请告诉我我强烈建议你通过 malloc

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-17T19:33:16.970

每个说您调用未定义行为的人都是正确的。

它似乎正常工作的原因可能是您平台上堆管理器的特定实现的副作用。例如，许多内存管理器将分配四舍五入到一些方便的大小，最小的大小通常是 8 或 16 字节。你**永远不**应该依赖这样的实现细节。

一些平台有工具可以在您开发程序时尝试捕捉这些类型的假设。******

# php - 将网站从 .html 更改为 .php，这会损害我的 seo 排名吗

> ID：10197542
> 
> 赞同：2
> 
> 时间：2012-04-17T19:10:01.720
> 
> 标签：php, html, seo

快速提问。

我有一个基于 HTML 的网站的客户，该网站的 SEO 排名非常非常高，并且已经存在 8 年了。

我想使用 php 模板改造他的网站并实施一些 CMS。

我将页面从 .html 重写为 .php 会以任何方式损害他的排名吗？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T19:14:32.993

如果可能，您将需要`301 redirect`从 .html 到 .php。或者，您可以为要重写`mod_rewrite`的文件设置一个规则，因为这可能是更简单的路线，以及我将如何做到这一点。`.html``.php.`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T19:26:57.280

您还可以配置 Apache 以解析 HTML 文件中的 PHP：

`AddHandler application/x-httpd-php .html .htm`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T19:22:15.163

只需使用此 Mod Rewrite 即可解决您的问题 :) 它将 .PHP 重写为 .HTML

```
RewriteEngine on 
RewriteRule ^(.*)\.html $1\.php 
```

祝你好运！

# javascript - 除非我用警报暂停脚本，否则 Ajax 不会替换 div 内容

> ID：10197548
> 
> 赞同：0
> 
> 时间：2012-04-17T19:10:10.513
> 
> 标签：javascript, html, ajax

我有一个 div，其中包含一个带有两个下拉列表的表单。当在表单上按下提交按钮时，我有这个 javascript 函数......

```
function getExt(cgiScriptName,DivId){

        if ( document.getElementById(dropdown1) != null ){
            var value1 = document.getElementById(dropdown1).value;
        }
        if ( document.getElementById(dropdown2) != null ){
            var value2 = document.getElementById(dropdown2).value;
        }

        var xmlhttp;
        if (window.XMLHttpRequest){ xmlhttp=new XMLHttpRequest(); }  // code for IE7+, Firefox, Chrome, Opera, Safari
        else{ xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"); }      // code for IE6, IE5

        xmlhttp.onreadystatechange=function(){
            if (xmlhttp.readyState==4 && xmlhttp.status==200){
                document.getElementById(DivId).innerHTML=xmlhttp.responseText;
            }
        }

        cgiScriptName = cgiScriptName+"?selectOne="+value1+"&selectTwo="+value2;
        xmlhttp.open("GET",cgiScriptName,true);
        xmlhttp.send();

    // The content of DivId only changes if this if statement exists????  Why?????
        if ( document.getElementById(DivId) != null ){ alert('The Div is present'); }
} 
```

该函数运行并使用 GET 来获取我想要的 HTML。我已经验证该函数可以很好地组装 GET 调用并从 CGI 脚本返回适当的 HTML。问题是只有当 if 语句在代码中时才会显示这个 HTML。否则整个页面将变为空白。主 div 不包含任何内容。为什么会这样？为什么那个 if 语句使这个函数起作用？以下是我网页的淡化版本...

```
<div id="main">

<div id="curr_div">
<form onsubmit="return getExt('CGIScript.cgi?','curr_div'); return false;">
<select id="dropdown1">...</select>
<select id="dropdown2">...</select>
<input type="submit" value="Submit"/>
</form>
<table>.....</table>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:22:57.077

几点：

您的 <form onsubmit=> 有两个返回语句。只有第一个可以工作。如果您将第一个 return 语句留在那里，您的 getExt 函数应该返回 false。否则取出第一个return，留下“return false”。此处返回 false 可防止将表单提交到服务器。否则，您将表单提交回加载此表单的 URL。

对 xmlhttp.send() 的调用只是发出请求，它不会阻止脚本的执行。我的猜测是你期待的不是。“警报”停止脚本的时间足够长，以便服务器处理响应并返回给您的回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:25:10.723

element-id 变量可能会被其他上下文清除或重用。最后它是javascript内部使用的变量。

尝试将其复制到您的闭包中...另一方面，很可能 xmlhttp 对象已被清除，请尝试将其返回并保留在变量中...

只是两个猜测：

```
function getExt(cgiScriptName,DivId){

        if ( document.getElementById(dropdown1) != null ){
            var value1 = document.getElementById(dropdown1).value;
        }
        if ( document.getElementById(dropdown2) != null ){
            var value2 = document.getElementById(dropdown2).value;
        }

        var xmlhttp;
        if (window.XMLHttpRequest){ xmlhttp=new XMLHttpRequest(); }  // code for IE7+, Firefox, Chrome, Opera, Safari
        else{ xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"); }      // code for IE6, IE5

        var localdivid = DivId;
        xmlhttp.onreadystatechange=function(){
            if (xmlhttp.readyState==4 && xmlhttp.status==200){
                document.getElementById(localdivid).innerHTML=xmlhttp.responseText;
            }
        }

        cgiScriptName = cgiScriptName+"?selectOne="+value1+"&selectTwo="+value2;
        xmlhttp.open("GET",cgiScriptName,true);
        xmlhttp.send();

    return xmlhttp;
} 
```

# ios - 用于本地通知的 iOS 唤醒应用程序

> ID：10197550
> 
> 赞同：2
> 
> 时间：2012-04-17T19:10:14.543
> 
> 标签：ios, notifications, local

我正在尝试创建本地通知。我得到了通知工作，但有一个硬​​编码的标题。我需要能够唤醒应用程序，点击一个 api，然后使用从 api 调用返回的标题向用户显示通知。有人可以建议我应该使用什么方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T22:02:15.367

当您设置本地通知时，您可以进行 API 调用吗？如果是这样，只需将本地通知 alertBody 设置为您从 API 检索的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:26:55.833

这使用本地通知是不可能的，但使用推送通知是可能的。您是否有任何理由不使用推送通知？

# mysql - 将mysql表导入XML文件

> ID：10197552
> 
> 赞同：1
> 
> 时间：2012-04-17T19:10:20.090
> 
> 标签：mysql, xml

我有一个学校项目的网站，用 html、jsp 编写，我使用 mysql 作为用户信息的数据库。
我有一个非常简单和基本的 mysql 知识，几乎没有 php，在我搜索的任何地方，他们都使用 php，我不太明白。
我有一个名为“a1”的数据库，其中有一个名为“members”的表。如果这很重要，我会使用 ubuntu 10.10。

那么，如何将 mysql 中的表导入 XML 文件呢？

我知道这是一个很大的要求，但解释或链接到一些会很棒:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:31:48.827

如果这只是“导入到 xml”一次，一种选择是从命令行使用 mysqldump。

```
mysqldump --xml 
```

[http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

MysqlDump 将表的内容转储到标准输出，并且可以通过管道传输到文件

```
mysqldump --xml -u user -p a1 members > a1_members.xml 
```

# php - PHP：检查日期时间是否未过期

> ID：10197557
> 
> 赞同：3
> 
> 时间：2012-04-17T19:10:40.823
> 
> 标签：php, datetime, compare

我有一个包含过去时间戳的 DateTime 对象。

我现在想检查这个 DateTime 是否早于例如 48Hours。

我怎样才能最好地合成它们？

问候

编辑：嗨，

谢谢您的帮助。这是辅助方法。有什么命名建议吗？

```
 protected function checkTemporalValidity(UserInterface $user, $hours)
{
    $confirmationRequestedAt = $user->getConfirmationTokenRequestedAt();
    $confirmationExpiredAt = new \DateTime('-48hours');

    $timeDifference = $confirmationRequestedAt->diff($confirmationExpiredAt);

    if ($timeDifference->hours >  $hours) {
        return false;
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T19:16:23.537

```
$a = new DateTime();
$b = new DateTime('-3days');

$diff = $a->diff($b);

if ($diff->days >= 2) {
  echo 'At least 2 days old';
} 
```

我将 $a 和 $b 用于“测试”目的。`DateTime::diff`返回一个[DateInterval 对象](http://www.php.net/manual/en/class.dateinterval.php)，它有一个返回实际天差的成员变量`days`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T19:13:50.650

您可能想看这里： [如何比较 PHP 5.2.8 中的两个 DateTime 对象？](https://stackoverflow.com/questions/961074/how-do-i-compare-two-datetime-objects-in-php-5-2-8)

因此，最简单的解决方案可能是创建另一个`DateTime`日期为 NOW -48Hours 的对象，然后与之进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T21:58:40.393

我知道这个答案有点晚了，但也许它可以帮助其他人：

```
/**
 * Checks if the elapsed time between $startDate and now, is bigger
 * than a given period. This is useful to check an expiry-date.
 * @param DateTime $startDate The moment the time measurement begins.
 * @param DateInterval $validFor The period, the action/token may be used.
 * @return bool Returns true if the action/token expired, otherwise false.
 */
function isExpired(DateTime $startDate, DateInterval $validFor)
{
  $now = new DateTime();

  $expiryDate = clone $startDate;
  $expiryDate->add($validFor);

  return $now > $expiryDate;
}

$startDate = new DateTime('2013-06-16 12:36:34');
$validFor = new DateInterval('P2D'); // valid for 2 days (48h)
$isExpired = isExpired($startDate, $validFor); 
```

这样，您还可以测试除全天以外的其他时间段，并且它也适用于具有较旧 PHP 版本的 Windows 服务器（[DateInterval->days](https://bugs.php.net/bug.php?id=51184)始终返回 6015 存在错误）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-27T14:34:42.040

*对于不想每天工作的人...*

[您可以使用DateTime::getTimestamp()](http://php.net/manual/en/datetime.gettimestamp.php)方法获取 unix 时间戳。unix 时间戳以秒为单位，易于处理。所以你可以这样做：

```
$now = new DateTime();
$nowInSeconds = $now->getTimestamp();

$confirmationRequestedAtInSeconds = $confirmationRequestedAt->getTimestamp();

$expired = $now > $confirmationRequestedAtInSeconds + 48 * 60 * 60; 
```

`$expired`将是`true`如果时间到期

# html - 正则表达式查找没有 alt=".#" 的标签

> ID：10197558
> 
> 赞同：2
> 
> 时间：2012-04-17T19:10:43.203
> 
> 标签：html, regex, expression-web

我需要一个正则表达式，它将返回一个图像标签，该标签没有 alt 属性，引号之间有任何内容。例如，我希望它返回一个具有 alt="" 或没有 alt 但不具有 alt="y" 的 img 标签。

图像标签中可能有换行符，并且每行可能有多个图像标签。

目前，我所拥有的是：

> ```
> <img.@(~[\r\n]|[\r\n])*.@(~(alt=".#"))*.@(~[\r\n]|[\r\n])*.@/> 
> ```

我正在对此进行测试：

```
<img alt="" />
<img src="xyz.jpg"
alt="y" />
<img xxxx ABC /> 
<img xxxxxx ABC />
<img src="xyz.jpg" alt="y" /> 
```

但是我的正则表达式会返回每个图像标签，包括我不想返回的第二个和第五个标签。

我在 Microsoft Expression Web 工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:30:31.797

您可能希望查看 XPath 来执行此操作。如果您正在寻找具有空 alt 属性的元素，您可以在 .NET 中使用 XmlDocument 加载文档，然后调用 SelectNodes("//img[@alt='']") 来选择节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T19:44:20.263

您最好的选择是使用 jQuery 将字符串解析为 html 节点，然后使用选择器从那里过滤它们。

```
var str = '<img alt="" /><img src="xyz.jpg" alt="y" /><img xxxx ABC /> <img xxxxxx ABC /><img src="xyz.jpg" alt="y" />';
var elementsWithoutAlt = $( str ).filter( 'not([alt])' );
console.log(elementsWithoutAlt.length); 
```

'not([alt])' 将查找所有没有 alt 属性的元素。'img:not([alt])' 将找到所有没有 alt 属性的 'image' 元素。

演示：（单击渲染查看它的实际效果） [http://jsbin.com/imeyam/3/edit](http://jsbin.com/imeyam/3/edit)

jQuery 信息 [http://api.jquery.com/has-attribute-selector/](http://api.jquery.com/has-attribute-selector/)

# unix - SSH 配置：覆盖默认用户名

> ID：10197559
> 
> 赞同：306
> 
> 时间：2012-04-17T19:10:47.970
> 
> 标签：unix, ssh, ssh-config

是否可以配置`ssh`以知道我的用户名应该是什么？

默认情况下，它使用当前用户名，这在我的情况下是不正确的。

我在借用的笔记本电脑上，我的用户名是`loaner`，但我想告诉`ssh`我我的用户名是`buck`。

奖励积分：我在家里的用户名是 bgolemon。如果我可以为每个主机配置用户名，那就更好了。

* * *

## 回答 #1

> 赞同：542
> 
> 时间：2012-04-17T19:19:19.243

创建一个名为`config`inside的文件`~/.ssh`。在文件中，您可以添加：

```
Host *
    User buck 
```

或添加

```
Host example
    HostName example.net
    User buck 
```

第二个示例将设置一个用户名并且是特定于主机名的，而第一个示例仅设置一个用户名。当您使用第二个时，您不需要使用`ssh example.net`; `ssh example`就足够了。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-04-17T20:05:59.260

如果您只想[ssh](http://unixhelp.ed.ac.uk/CGI/man-cgi?ssh%201)几次，例如在借用或共享的计算机上，请尝试：

```
ssh buck@hostname 
```

或者

```
ssh -l buck hostname 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-17T19:20:25.487

`man ssh_config`说

> **用户**
> 
> 指定要登录的用户。当在不同的机器上使用不同的用户名时，这会很有用。这省去了必须记住在命令行上提供用户名的麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-04T04:42:12.547

您可以使用快捷方式。在您的主目录中创建一个 .bashrc 文件。在那里，您可以添加以下内容：

```
alias sshb="ssh buck@host" 
```

要使别名在您的终端中可用，您可以关闭并打开您的终端，或运行

```
source ~/.bashrc 
```

然后您只需输入以下内容即可连接：

```
sshb 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-29T11:01:42.883

如果您对特定变量（即 User 或 IdentityFile）有多个引用，**则 ssh 配置文件中的第一个条目始终优先**，如果您想要特定的内容，则将其放在第一位，任何通用的都将其放在底部。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-05T01:09:07.477

There is a Ruby gem that interfaces your `ssh` configuration file which is called [`sshez`](http://rubygems.org/gems/sshez).

All you have to do is `sshez <alias> username@example.com -p <port-number>`, and then you can connect using `ssh <alias>`. It is also useful since you can list your aliases using `sshez list` and can easily remove them using `sshez remove alias`.

# json - cakePhP REST 配置

> ID：10197562
> 
> 赞同：1
> 
> 时间：2012-04-17T19:10:56.070
> 
> 标签：json, rest, cakephp-2.0

我已经阅读了很多关于此的内容，但我仍然不确定我的实现是否正确，因为我没有来自应用程序的反馈......我已将以下代码添加到 routes.php

> 路由器::mapResources('posts'); 路由器::parseExtensions('json');

以及控制器 PostsController.php 上的以下代码

```
class PostsController extends AppController {
public $helpers = array('Html', 'Form');
var $components = array('RequestHandler');

public function index() {
    $this->set('posts', $this->Post->find('all'));
}

public function view($id = null) {
    $this->Post->id = $id;
    $this->set('post', $this->Post->read());
    $this->set(compact('posts'));
}

public function add() {
    if ($this->request->is('post')) {
        if ($this->Post->save($this->request->data)) {
            $this->set(compact('posts'));
            $this->Session->setFlash('Your post has been saved.');
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash('Unable to add your post.');
        }
    }
}

public function edit($id = null) {
    $this->Post->id = $id;
    if ($this->request->is('get')) {
        $this->request->data = $this->Post->read();
    } else {
        if ($this->Post->save($this->request->data)) {
            $this->set(compact('posts'));
            $this->Session->setFlash('Your post has been updated.');
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash('Unable to update your post.');
            }
        }
}
public function delete($id) {
if ($this->request->is('get')) {
    throw new MethodNotAllowedException();
}
    if ($this->Post->delete($id)) {
        $this->set(compact('posts'));
        $this->Session->setFlash('The post with id: ' . $id . ' has been deleted.');
        $this->redirect(array('action' => 'index'));
    }
} 
```

}

这够了吗？我的目标是让一个 android 应用程序通过这个 web 服务与 MySQL 数据库通信。希望你能帮我 ：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:39:58.010

感谢 Costa，我能够让 REST 正常工作（我认为 XD）我使用了一个插件，因为他建议测试它，但我只能从[http://localhost:3030/cake_2_1/posts/index收到正确的答案.json](http://localhost:3030/cake_2_1/posts/index.json) 在 coockbook 他们有 POST /recipes.format RecipesController::add() 来添加一些东西，但它如何在这里转换成一个 url？`echo json_encode($message);`是我在 View\Posts\json\add.ctp 和

`if ($this->Post->save($this->request->data)) { $message = 'Saved'; } else { $message = 'Error'; } $this->set(compact("message"));` 是我在控制器添加功能中所拥有的。快完成了，只需要多一点帮助:)

# javascript - 带有占位符文本的文本框，逐个字符消失

> ID：10197564
> 
> 赞同：3
> 
> 时间：2012-04-17T19:11:06.523
> 
> 标签：javascript, html, css

我正在寻找一种方法来构建带有日期字段占位符文本的文本框。占位符文本将是 xx/xx/xxxx，并在用户键入时逐个字符地消失，而斜杠则保留在适当的位置。我遇到了以下两个问题，它们似乎解决了使文本立即消失的问题。

[HTML/CSS 用灰色的文本制作一个文本框，当我点击输入信息时消失，如何？](https://stackoverflow.com/questions/4681036/html-css-making-a-textbox-with-text-that-is-grayed-out-and-disappears-when-i-cl)

[如何使用在键入时消失的提示文本预填充输入文本字段（jQuery）](https://stackoverflow.com/questions/4289025/how-to-prepopulate-input-text-fields-with-prompting-text-which-disappears-on-typ)

我想知道是否可能有一个javascript技巧或可以实现这一点的东西。

# html - 100% 高度减去标题？

> ID：10197565
> 
> 赞同：89
> 
> 时间：2012-04-17T19:11:06.910
> 
> 标签：html, css

我想为管理面板创建一个布局，但我不知道如何让 #nav 和 #content 容器始终位于浏览器窗口的 100%。我不明白 100% 高度属性的继承，有人可以更清楚地解释一下吗？

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>index.htm</title>
    <link rel="stylesheet" type="text/css" href="main.css">
</head>
<body>

        <div id="header">
            <img src="./img/header_logo.png" alt="bla"/>
        </div><!-- #header -->
        <div id="nav">
        </div><!-- #nav -->
        <div id="content">
        asfdg
        </div><!-- #content -->
        <div class="clear">
        </div>

</body>
</html> 
```

main.css

```
 html, body{
    font-family: Helvetica, "Helvetica Neue", Arial, Geneva, sans-serif;
    margin: 0px;
    padding: 0px;
    height: 100%;
}
img{
    margin: 0px;
    padding: 0px;
    border-width: 0px;
}
#wrapper{

}
#header{
    background: url(img/header_bg.png) repeat-x;
    height: 65px;
    padding-top: 20px;
    padding-left: 25px;
}
#nav{
    width: 235px;
    float: left; 
    background-color: #f7f7f7;
    border-right: 1px solid #d9d9d9;
    height: 100%;

}
#content{
    float: left;
    width: auto;
    padding: 15px;

}
.clear{
    clear: both;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2013-07-03T00:13:59.397

如果您的浏览器支持 CSS3，请尝试使用 CSS 元素`Calc()`

```
height: calc(100% - 65px); 
```

您可能还想添加浏览器兼容性选项：

```
height: -o-calc(100% - 65px); /* opera */
height: -webkit-calc(100% - 65px); /* google, safari */
height: -moz-calc(100% - 65px); /* firefox */ 
```

还要确保值之间有空格，请参阅：[https ://stackoverflow.com/a/16291105/427622](https://stackoverflow.com/a/16291105/427622)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-17T20:06:53.403

正如评论中提到的 height:100% 依赖于显式定义的父容器的高度。实现您想要的一种方法是使用绝对/相对定位，并指定左/右/上/下属性以“拉伸”内容以填充可用空间。我已经实现了我收集到的你想要[在 jsfiddle](http://jsfiddle.net/DEDX8/1/)中实现的目标。尝试调整结果窗口的大小，您将看到内容自动调整大小。

在您的情况下，这种方法的限制是您必须在父容器上指定一个显式的 margin-top 以抵消其内容，以便为标题内容腾出空间。但是，如果您使用 javascript，您可以使其动态化。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-17T19:55:38.757

对于“100% 的浏览器窗口”，如果你是字面意思，你应该使用固定定位。然后使用 top、bottom、right 和 left 属性将 div 的边缘从视口的相应边缘偏移：

```
#nav, #content{position:fixed;top:0px;bottom:0px;}
#nav{left:0px;right:235px;}
#content{left:235px;right:0px} 
```

这将设置一个屏幕，其中左侧 235 像素专用于导航，屏幕的其余部分用于内容。

但是请注意，您将无法一次滚动整个屏幕。`overflow:auto`尽管您可以通过应用到任一 div将其设置为单独滚动任一窗格。

另请注意：IE6 或更早版本不支持固定定位。

# java - Java 的“System.out.println()”何时重载？

> ID：10197566
> 
> 赞同：2
> 
> 时间：2012-04-17T19:11:10.413
> 
> 标签：java

例如，它仍然可以使用 int 并成功打印吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T19:15:46.030

这本 1997 年的“Java in a Nutshell”一书表明，在 JDK1.0 中就像这样（=重载）：

[http://docstore.mik.ua/orelly/java/javanut/ch24_52.htm](http://docstore.mik.ua/orelly/java/javanut/ch24_52.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T19:12:51.567

简短的回答是“是”——`System.out.println()`总是超载。

# emacs - 如何使用包含输入的缓冲区打开 emacs？

> ID：10197582
> 
> 赞同：0
> 
> 时间：2012-04-17T19:11:54.897
> 
> 标签：emacs, buffer

我想做类似的东西：

```
cat somefile | emacs 
```

这应该使用包含一些文件内容的缓冲区打开 emacs。

有这个选项吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:19:17.100

如果您对命令的格式很灵活，一些 shell 通过临时文件进行进程替换。例如，[在 zsh 你可以这样做](http://zsh.sourceforge.net/Intro/intro_7.html)：

```
emacs =(cat somefile) 
```

任何产生输出的过程都可以在括号中使用。Zsh 会将它保存到一个临时文件中，然后使用该文件名调用 emacs。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:55:37.557

通常 Emacs 用户更喜欢拥有一个长时间运行的 Emacs 实例，而不是频繁地打开和关闭。记住这一点，您可以尝试在 Emacs 缓冲区中执行以下操作：

`Ctrl`+`x` `i` `file name`

将文件的内容插入当前缓冲区。您也可以尝试使用：

`Ctrl`+ `u` `Alt`+`!` `some shell command` `RET`

如果您想插入插入缓冲区的任何通用 shell 命令的输出。

# perl - 如何在 Perl 中删除 CGI 默认元字符集编码？

> ID：10197586
> 
> 赞同：5
> 
> 时间：2012-04-17T19:12:05.000
> 
> 标签：perl, encoding, character-encoding, cgi, meta

使用 Perl 代码

```
#!/usr/bin/perl

use strict;
use warnings;
use CGI ":all";
use Encode;

my $cgi = new CGI;

$cgi->charset('utf-8');

print $cgi->header(-type    => 'text/html',
                   -charset => 'utf-8');

print $cgi->start_html(-title => 'Test',
                       -head  => meta({-http_equiv => 'Content-Type',
                                       -content => 'text/html; charset=utf-8'}));
my $text = 'test'; # for now

Encode::from_to($text, 'latin1', 'utf8');

print $cgi->p($text);
print $cgi->end_html; 
```

我得到以下输出：

```
Content-Type: text/html; charset=utf-8

<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
<title>Test</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
</head>
<body>
<p>test</p>
</body> 
```

我不知道为什么

`<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />`

在输出中，我不知道如何摆脱它。

所有建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T19:19:41.513

使用最新版本的[CGI.pm](http://search.cpan.org/perldoc?CGI)（我目前安装了 3.52），您不需要`<meta>`手动构建该元素。您只需在调用该`header`方法时提供字符集。这个程序：

```
#!/usr/bin/perl

use strict;
use warnings;
use CGI ":all";
use Encode;

my $cgi = CGI->new;
binmode STDOUT, ':utf8';

print $cgi->header(-type => 'text/html',
                   -charset => 'utf-8');

print $cgi->start_html(-title => 'Test');
my $text = "\x{201c}test\x{201d}"; # for now

print $cgi->p($text);
print $cgi->end_html; 
```

给我这个输出：

```
Content-Type: text/html; charset=utf-8

<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
<title>Test</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<p> test </p>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T19:44:03.757

添加`-encoding`参数`start_html`并且不要手动构建元元素。（尽管 CGI 文档建议您这样做）。

```
print $cgi->start_html(-title => "Test", -encoding => "utf-8") 
```

# objective-c - 如何将 JavaScript 回调函数传递给 Cocoa/Obj-C？

> ID：10197587
> 
> 赞同：4
> 
> 时间：2012-04-17T19:12:05.503
> 
> 标签：objective-c, cocoa

我正在尝试在 WebView 中传递来自 JavaScript 的函数引用，因此当异步 Obj-C 方法完成时，我的 Objective-C 代码可以调用该函数。我看到了如何传递简单类型——字符串、数字等——但似乎无法弄清楚如何传递函数引用，比如

```
window.myRootObject.myObjCSelector("some-string", function(data) { 
  console.log(data); 
}); 
```

我已经用谷歌搜索了，但仍然很短，并且在文档中还没有找到对此的参考（还）。在 Cocoa 中工作，但希望能够在 iOS 上做同样的事情。

提前感谢您的帮助！

编辑：函数参数应该是匿名的——希望这可以澄清。:)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-19T00:31:44.767

终于想通了。可能有更好的方法（如果是这样，请加入！）但以下方法似乎有效。在我的 Obj-C ( `NSObject`-derived) 类中——我将一个引用传递到其中`WebView`——我定义了以下脚本可访问的方法：

```
#import <WebKit/WebKit.h>
#import <JavaScriptCore/JavaScriptCore.h>

- (void) search:(NSString *)prefix withCallback:(WebScriptObject *)callback; 
```

...它旨在采用两个参数：一个用于搜索的字符串和一个用于处理结果的匿名函数回调。它是这样实现的：

```
- (void) search:(NSString *)prefix withCallback:(WebScriptObject *)callback
{
  // Functions get passed in as WebScriptObjects, which give you access to the function as a JSObject
  JSObjectRef ref = [callback JSObject];

  // Through WebView, you can get to the JS globalContext
  JSContextRef ctx = [[view mainFrame] globalContext];

  // In my case, I have a JSON string I want to pass back into the page as a JavaScript object
  JSValueRef obj = JSValueMakeFromJSONString(ctx, JSStringCreateWithCFString((__bridge CFStringRef)responseString)); 

  // And here's where I call the callback and pass in the JS object
  JSObjectCallAsFunction(ctx, ref, NULL, 1, &obj, NULL);
} 
```

这实际上也可以通过 Objective-C 块异步工作，但要点在上面。希望它可以帮助别人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:14:38.083

也许如果它是一个全局非匿名函数，您可以尝试将函数名称传递给 Obj-C，然后评估 sth like `[NSString stringWithFormat:@"%@()", function_name]`？

# html - 如何为页面上的每个链接添加 facebook like 按钮、linkedin 分享按钮和 twitter 推文按钮？

> ID：10197592
> 
> 赞同：1
> 
> 时间：2012-04-17T19:12:18.323
> 
> 标签：html, twitter, facebook-like, linkedin

我已经解决了很多关于这个问题的问题，但我并没有真正得到任何明确的解决方案。我正在使用 asp.net 构建一个网站，并且我在一个页面上有几个链接。我需要每个链接下方的 facebook like 按钮、linkedin 分享按钮和 twitter 推文按钮。如何在没有太多页面加载问题的情况下有效地实现多个按钮。还有一种方法可以知道用户已经单击了按钮并成功地喜欢了一个链接...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:40:36.477

我的两分钱

脸书按钮

在 HTML 标记中

```
<html xmlns:fb="http://ogp.me/ns/fb#"> 
```

在body标签之后

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=<YOUR APP ID HERE!!>";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

你的链接在哪里

```
<fb:like href="<% Response.Write(Server.UrlEncode(linkURL)); %>" send="true" width="450" show_faces="true"></fb:like> 
```

链接在

```
<script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
<script type="IN/Share" data-url="<% Response.Write(Server.UrlEncode(linkURL)); %>" data-counter="right"></script> 
```

推特

```
<a href="https://twitter.com/share?url=<% Response.Write(Server.UrlEncode(linkURL)); %>" class="twitter-share-button" data-lang="en">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

本质上，您只需将链接 url 设置为变量 linkURL，以便它将其打印到网页上。我可能是错的，如果我错了，请告诉我，我会帮助你。

# css - 所有的 CSS 样式都应该在样式表中吗？

> ID：10197593
> 
> 赞同：1
> 
> 时间：2012-04-17T19:12:23.430
> 
> 标签：css, stylesheet

我通常将样式表中定义的 CSS 类用于我经常重用的样式，并将内联样式用于我不重用的 CSS。所有样式都应该在样式表中吗？样式表由浏览器缓存，这很有帮助，但似乎这会使页面更难处理。

如果所有样式都包含在 CSS 文件中，它们应该引用元素名称（如“#myElement { styles...}”）还是使用类？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:16:36.787

通常，是的，所有 CSS 都应该包含在样式表中。在某些情况下，CSS 可以内联显示（display:none、电子邮件 css 等）。

有许多 CSS 方法可以帮助您发现最佳实践，我使用这个： [http ://smacss.com/](http://smacss.com/)

我更喜欢在我的 CSS 样式表中使用类，并为 jQuery 使用保留 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T19:17:07.190

我认为这取决于您的实现，但是使用 CSS 完成的大多数事情都可以重构为最终会（并且可能应该）放在外部文件中的样式。

例如，将唯一元素设置`style="width:50px;height:25px;"`为可能最好在该元素上完成，只要它*仅*用于该元素（例如，用户控件，部分视图 - 划分的东西）。但是，`style="text-align:center;`可能最适合制作一个`.centered { text-align: center; }`可以重用的类（并缓存在外部文件中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T19:16:17.207

ID (#) 只能用于不重复出现的元素，例如包装器，而类 (.) 应该用于反复使用的元素，例如字体样式或颜色。

同样，当您只需要使用该样式表一次时应该使用内部样式表，而当需要在整个站点中使用样式时应该使用外部样式表。一些设计师仍然喜欢使用外部样式表，即使他们只使用一次，这样更容易检查或复制到另一个站点。

仅当需要一个样式时才应使用内联样式表，但是大多数设计师认为这完全违背了 CSS 的目的。

外部样式表也会受到影响，因此它会降低站点加载和节省带宽所需的速度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T19:17:20.297

使用结构和类来设置相似部分的样式，并使用 ID 来设置非重复元素的样式（但它们之间应该相距甚远）。例子：

## HTML

```
<!DOCTYPE html>
<html>
<head>
...
</head>
<body>
<div id="wrapper">
<article>Main Article</article>
<aside>
<div class="some-widget-type"><h1>Title</h1></div>
<div class="some-widget-type"><h1>Title</h1></div>
<div class="some-other-widget-type"><h1>Title</h1></div>
</div>
</body>
</html> 
```

## CSS

```
h1 {/* Base styles here */}
.some-widget-type {/* Styles here */}
.some-widget-type h1 {/* Styles here */}
.some-other-widget-type {/* Different styles here */}
.some-other-widget-type h1 {/* Different styles here */} 
```

它允许您在相似元素和整个页面之间保持一致的样式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T19:19:02.083

就我个人而言，我更喜欢将所有内容都放在外部样式表中，因为这使它更具可扩展性。如果稍后在项目中你想重用一个类，你只需输入它而不是去搜索它。

唯一应该使用 # 的时间是用于特殊元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T19:19:24.877

所有 CSS 都应该在样式表中，仅仅是因为您不必访问源代码来编辑布局/样式。

**结构在 HTML 中，布局在 CSS 中。**

*   对可以出现在网站上多个实例中的元素使用类。
*   对每个页面中只能有一个的元素使用 ID。

我个人的 CSS 文件结构如下：

*   第一部分：全局元素（h1、h2、a、p、body 等）
*   第二部分：布局类/ID（#footer、#header、#logo、.navigation 等）
*   第三部分：页面特定的 CSS 结构在一起

这样很容易找到您要查找的内容，相关性越高，层次越高。

# liskov-substitution-principle - 重写方法参数类型的缩小是否违反了 Liskov 替换原则？

> ID：10197594
> 
> 赞同：1
> 
> 时间：2012-04-17T19:12:23.823
> 
> 标签：liskov-substitution-principle

我有这个代码：

```
abstract class Entity
{
// blah-blah-blah
}

abstract class BaseCollection
{
    public void add(Entity entity);
} 
```

我从 Entity 和 BaseCollection 类派生：

```
class User extends Entity
{
}

class UserCollection extends BaseCollection
{
   public void add(User user) { // blah-blah-blah }
} 
```

这是违反 Liskov 替换原则的一个例子吗？如果是，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-26T20:23:34.163

如果 for 的合约`BaseCollection`指定其`add`方法可以合法地传递自 的任何对象`Entity`，那么继承的`add`方法 也`UserCollection`应该这样做，否则将违反 LSP。如果原始方法可以与从 派生的任意对象一起使用，则`UserCollection`包含仅接受类型对象的*重载*（而不是覆盖）不会违反 LSP ，尽管重载可能不是特别合适。`add``User``add``Entity`

如果`add`所讨论的方法不是 ，而是类似于`setItem(int index, Entity value)`基`setItem(int index, User value)`类和派生类中的方法，并且如果合同规定*它只保证与从同一个集合中读取的对象一起工作*，那么提供读取除了的`UserCollection`实例之外永远不会产生任何东西`User`，该方法可以在不违反 LSP`setItem`的情况下合法地拒绝所有不是实例的对象。`User`如果该`setItem`方法要拒绝不是 的实例的所有内容`user`，那么具有仅接受的重载`user`可能是有用且适当的；即使继承的`setItem`方法需要验证`value`标识的实例`User`，接受该类型参数的重载不会。添加此类重载时最大的警告是应避免使用两个未密封的虚拟方法来执行相同的操作；如果要添加重载，则可能应该覆盖并密封基类方法，以便它将传入的参数转换为类型`User`，然后链接到方法的重载版本。

请注意，数组订阅后一种形式的契约和继承；一个类型的变量`Animal[]`可以持有对 a 的引用`Cat[]`；尝试将任意值存储`Animal`到`Animal[]`标识 a 的 a 中`Cat[]`可能会失败，但任何`Animal`读出的 an`Animal[]`都保证“适合”在同一个数组中；这使得代码可以对任意引用类型的数组中的元素进行排序或置换，而无需知道相关数组的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:18:15.967

作为`User`一个子类型，`Entity`将此类对象添加到`BaseCollection`(via `UserCollection`) 是完全合理的——每个用户都是`Entity`

另一方面，通过`UserCollection`where预期将不起作用：您应该能够添加一个，但您需要一个-- 或者换句话说：当您从 中获取一个元素时，您可能会在此之后得到一个，你期望的地方。`BaseCollection``Entity``User``UserCollection``Entity``User`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T19:25:20.833

这违反了 Liskov 替换原则，因为实体的其他实现无法添加到 UserCollection。引用 BaseCollection 的用户不会期望作为 UserCollection 的实现在提供用户以外的实体时爆炸。

我假设 UserCollection.add 正在替换 BaseCollection.add ，因为您明确提到了缩小范围并且没有指定语言。

如果您遵循 Liskov 替换原则，方法参数应该是逆变的，而不是协变的。 [http://en.wikipedia.org/wiki/Liskov_substitution_principle](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。

# sql - SQL 不同的限制

> ID：10197604
> 
> 赞同：0
> 
> 时间：2012-04-17T19:13:19.373
> 
> 标签：sql

我有一个包含坐标信息的表......像这样：

```
Li_from
----------
36.2090536962569;37.1511090538763
36.2130356969589;37.1443713448309
36.2130876347598;37.1508944771551
36.2093999652314;37.1442425987982
36.2130356969589;37.1443713448309
36.2130356969589;37.1443713448309 
```

当我想从上面的列中选择不同的值时，如下所示：

```
SELECT DISTINCT Li_from from table. 
```

结果与上面相同，尽管最后两个值相同..那么 distinct 关键字是否有限制，我如何选择不同的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:16:06.937

你确定最后两列是*相同*的吗？你试过`SELECT DISTINCT LTRIM(RTRIM(Li_from)) from table`吗？

这将删除前导和尾随空格字符。

# javascript - JavaScript 生成字段上的 Datepicker JQuery

> ID：10197613
> 
> 赞同：2
> 
> 时间：2012-04-17T19:13:56.453
> 
> 标签：javascript, jquery, dom, user-interface, datepicker

我正在向动态生成的字段添加日期选择器。

```
('#addScnt1').live('click', function() {
$('<p class="textocampodetexto" style="margin-left:20px; margin-top:20px;"> 
<label for="p_scnts1">  <input id="au_fechainicioperiodo2" 
name="au_fechainicioperiodo2" type="text" size="7"  
value="" /> </p>').appendTo(scntDiv); 
```

当我单击“添加字段”按钮时，会添加这些字段。

当我单击生成的字段时，日期选择器不会出现。我知道 datepicker 正在工作，因为我将代码放在 javascript 代码之外并且它可以工作。

那我该如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:18:21.307

您将不得不将日期选择器重新附加到您的输入字段。

试试这里找到的解决方案：[Why do jQuery UI's datepicker break with a dynamic DOM?](https://stackoverflow.com/questions/1059107/why-does-jquery-uis-datepicker-break-with-a-dynamic-dom)

该代码与您的代码不同，但如果您可以从选择器中提取输入字段，您就可以做到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:26:18.930

您的代码应该像这样工作（[LIVE DEMO](http://jsbin.com/utadaz/4)）：

```
$(function () 
{
  $('#addScnt1').click(function() {

    $('<p class="textocampodetexto" style="margin-left:20px; margin-top:20px;"><label for="p_scnts1">  <input id="au_fechainicioperiodo2" name="au_fechainicioperiodo2" type="text" size="7" value="" /> </p>').appendTo(scntDiv);
    $('#au_fechainicioperiodo2').datepicker(
    {
        showOn: "both",
        dateFormat: "dd M yy",
        firstDay: 1, 
        changeFirstDay: false
    });
  });
}); 
```

（**注意**：我假设该变量`scntDiv`是在此调用之前使用 DOM 对象定义的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T19:18:41.840

```
$('#addScnt1').live('click', function() {
    var newElement = $('all your html'); //then append it wherever

    newElement.find('.input-selector').datepicker();
}); 
```

# database - 在这种特殊情况下，如何使用retract 删除重复？

> ID：10197618
> 
> 赞同：1
> 
> 时间：2012-04-17T19:14:27.857
> 
> 标签：database, prolog, prolog-setof

```
 %Examples:
    %days([saturday,sunday,monday,tuesday,wednesday,thursday]).
    %slots([1,2,3,4,5]).
    %course_meetings(csen402,tutorial,t07,nehal,'tutorial for t07').
    %course_meetings(comm401,lecture,all_group_4,dr_amr_talaat,'lecture 1')
%tutorialrooms([c6301,b4108,c2201,c2301,c2202,c2203]).

        day_tut(Day,Slot,Place,Course,Group,Instructor,Descr):-
            days(X),member(Day,X),
            tutorialrooms(X1),member(Place,X1),
            course_meetings(Course,tutorial,Group,Instructor,Descr),
            slots(X2),member(Slot,X2),
            assert(day(Day,Slot,tutorial,Place,Course,Group,Instructor,Descr)). 
```

我想找到一种方法来删除某些事实，例如断言每个（天）事实必须每天只有一个房间和插槽示例：我们可以有`day(sat,1,_,c6301,_,_,_,_)`， `day(sat,1,_,c6302,_,_,_,_)`但我们不能再出现`day(sat,1,_,c6301,_,_,_,_)`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:37:17.070

如果您只是想删除 a 的冗余解决方案`Goal`- 这可能是您删除重复项的意思 - 只需替换`Goal`为`setof(t,Goal,_)`. 只要只有地面解决方案`Goal`并且只要`Goal`普遍终止，这就会起作用。因此，不需要任何数据库操作来删除冗余解决方案。

```
?-成员（X，[a，b，a，c]）。
X = 一个；
X = 乙;
X = 一个；％ 多余的！
X = c。

?- setof(t,member(X, [a,b,a,c]),_)。
X = 一个；
X = 乙;
X = c。

```

# joomla - Joomla - 创建隐藏的测试页面

> ID：10197622
> 
> 赞同：0
> 
> 时间：2012-04-17T19:14:37.927
> 
> 标签：joomla, joomla1.6

我是 Joomla 的新手。有什么方法可以创建一个测试页面，除了那些登录的人之外，其他人都不可见？我已经安装了 Joomla 1.6

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:22:39.063

您只需在文章编辑表单中将访问权限从“公开”切换为“已注册”即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:13:37.993

You can create sample menu through 'menu manger' and assign an article to the that menu item.This menu item will not be visible to the users until you provide some link to main menu or some other visible menu managers.Now, You can access that page by using the following url "http://localhost/practise/index.php/[name of the menu]"

# html - HTML：发布空/禁用表单元素的最佳实践

> ID：10197625
> 
> 赞同：0
> 
> 时间：2012-04-17T19:14:55.437
> 
> 标签：html, forms

我有一个表单，用作数据库记录上 CRUD 的接口。表单上的一些元素是相互依赖的，因此如果一个字段的值为 X，那么其他字段应该由用户填写并填写。

一个简单的示例可能类似于个人信息部分：

```
<select name="relationship-status">
    <option value="single">Single</option>
    <option value="married">Married</option>
</select>

<input type="text" name="spouse-first-name" />
<input type="text" name="spouse-last-name" /> 
```

...如果设置为，则字段`spouse-first-name`和`spouse-last-name`将是必需的，否则将被禁用（或隐藏）。`relationship-status``married`

我的问题是，在这个例子中，当一个人从已婚变为单身并想要更新他们的数据时，我们还想清除配偶姓名值并将其发布回服务器，以便在数据库中清除这些值. 当它们变为 时，我们可以使用 JavaScript 清除它们的字段`single`，但是如果我们禁用表单元素以使它们无法编辑它们，那么在提交表单时它们不会被 POST。

我可以想到以下解决方案：

*   我们可以用它们`readonly`代替`disabled`，但该方法仅适用于某些表单控件（特别是，它不适用于其他`select`元素），因此这不是一个选项。

*   我们可以将这些字段中的每一个复制为`hidden`将与表单一起发布的输入，但用户不可编辑，但这似乎是一种 hack。

*   我们也可以在提交之前启用禁用的字段，然后在之后重新禁用它们。这是我现在正在使用的方法，但我觉得我错过了一些东西，必须有更好的方法。

有没有我没有想到的东西，或者是实现两者的更明智的方式：

1.  不允许用户编辑字段，并且
2.  允许字段的值与表单一起发布，即使是空白的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:34:09.400

我的建议是，除了在客户端进行验证，在 javascript 中添加函数 form.submit()，如果有人禁用 JS 将无法提交表单，除此之外同意其他评论，添加服务器验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:03:30.267

我发现最健壮和最不笨拙的解决方案是将该`readonly`属性用于除`<select>`. 对于`<select>`元素，我只是禁用*当前未选中*`<option>`的子元素。这有效地防止了用户改变值。然后我给它上色，就好像它被禁用了灰色背景一样，以完成幻觉。此时，所有表单元素都将随表单一起发布，即使没有值，也不管它们是否“禁用”。*`<select>`*

# mysql - MySQL查询删除时间戳早于当前时间戳的行

> ID：10197633
> 
> 赞同：7
> 
> 时间：2012-04-17T19:15:30.763
> 
> 标签：mysql, delete-row

我正在寻找一个能够从数据库中的表中删除所有行的查询，其中时间戳早于当前日期/时间或当前时间戳。

非常感谢您在这里紧急提供一些帮助！

这是我正在使用的查询，但我认为它不起作用：

```
delete from events where timestamp<CURRENT_TIMESTAMP{); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-19T09:18:54.457

嗯...这可能看起来很愚蠢，但表中的每条记录都将比 Now() 更早，因为 Now() 是在处理查询时计算的。如果您想删除比另一条记录更早的记录，那么您不想使用 Now()，而是要使用与其余记录进行比较的记录中的时间戳。或者，如果要删除早于特定时间点的记录，则需要计算要用于比较的时间戳。例如，要删除超过 10 分钟的记录，您可以使用以下命令：

```
DELETE FROM events WHERE timestamp < (NOW() - INTERVAL 10 MINUTE) 
```

或者，对于删除超过一天的记录：

```
DELETE FROM events WHERE timestamp < (NOW() - INTERVAL 1 DAY) 
```

对于特定的时间点（例如，格林威治标准时间 2012 年 10 月 12 日下午 4:15:00），有一种方法可以做到这一点，但语法现在让我无法理解。我的 MySQL 手册在哪里？:)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-17T19:18:29.043

```
delete from events where timestamp < NOW() 
```

应该足够了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T19:19:11.543

```
DELETE FROM events WHERE timestamp < UNIX_TIMESTAMP(NOW()) 
```

或者如果它是标准日期时间

```
DELETE FROM events WHERE timestamp < NOW() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-01T20:05:36.387

Hibernate (hql) 删除超过 7 天的记录

我不确定，但你可以试试这个：

```
 String hqlQuery = "from PasswordHistory pwh "
          + "where pwh.created_date < datediff(curdate(), INTERVAL 7 DAY)";

            List<Long> userList = (List<Long>)find(hqlQuery);
    deleteAll(userList );// from baseDao

public void deleteAll(Collection list) {
        getHibernateTemplate().deleteAll(list);
    } 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-06-01T13:13:12.120

```
DELETE FROM table WHERE date < '2011-09-21 08:21:22'; 
```

# mysql - 如何使我的 MySQL 语句具有限制和分组依据的子查询？

> ID：10197635
> 
> 赞同：0
> 
> 时间：2012-04-17T19:15:40.150
> 
> 标签：mysql, sql

我想加入 4 个具有`group by`, `order by`&的表`limit`。`SQL syntax error`当我将 LIMIT 用于分页时，我得到了一个。

```
SELECT   ads.ad_id            ,
         ads.ad_uid           ,
         ads.ad_title         ,
         ads.ad_content       ,
         ads.ad_name          ,
         ads.ad_price         ,
         ads.ad_maincat       ,
         ads.ad_subcat        ,
         ads.ad_condition     ,
         ads.ad_quantity      ,
         ads.ad_att           ,
         ads.ad_view          ,
         ads.ad_aff           ,
         ads.ad_status        ,
         ads_images.img_id    ,
         ads_images.img_aid   ,
         ads_images.img_uid   ,
         ads_images.img_big   ,
         ads_images.img_bigx  ,
         ads_images.img_bigy  ,
         ads_images.img_thumb ,
         ads_images.img_sort  ,
         users.user_username  ,
         users.user_fullname  ,
         users.user_gravatar  ,
         users.user_id        ,
         categories.cat_id    ,
         categories.cat_parent,
         categories.cat_name  ,
         categories.cat_slug
FROM     ads
         INNER JOIN ads_images
         ON       ads.ad_id = ads_images.img_aid
         INNER JOIN users
         ON       ads.ad_uid = users.user_id
         INNER JOIN categories
         ON       ads.ad_maincat = categories.cat_parent
         AND      ads.ad_subcat  = categories.cat_id
WHERE    ads.ad_status           = 1
AND
GROUP BY ads.ad_id 
ORDER BY
ads.ad_id DESC
LIMIT {$startpoint},{$limit} 
```

我可以知道使用的正确语句是什么`LIMIT`吗`GROUP BY`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:17:41.040

删除`AND`之前的错误`GROUP`

# sql - 关于 SQL 语句中缺少左括号的令人困惑的错误

> ID：10197640
> 
> 赞同：18
> 
> 时间：2012-04-17T19:15:53.957
> 
> 标签：sql, oracle

SQLPLUS 说我的 sql 脚本中的这条语句缺少左括号。

```
CREATE TABLE people(
    id INT NOT NULL PRIMARY KEY,
    name VARCHAR2
); 
```

我已经用 sftp 上传了我的脚本，这可以和脚本一起玩吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-17T19:19:59.500

VARCHAR2 是一种需要最大大小/长度的类型。尝试类似...

```
varchar2(50) 
```

您缺少的左括号是围绕大小的括号。

```
CREATE TABLE people(
    id INT NOT NULL PRIMARY KEY,
    name VARCHAR2(50) 
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:21:55.067

您需要为 VARCHAR2 数据类型指定大小。

例如 VARCHAR2(30)

SQL*Plus 正在寻找 VARCHAR2 大小定义周围的括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-13T02:13:13.417

您收到此错误是因为您没有指定数据类型为 varchar2 的字符。尝试这样的事情：

```
CREATE TABLE people(
id INT NOT NULL PRIMARY KEY,
name VARCHAR2(20) ); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-09-07T20:07:46.787

您需要指定`Varchar2`.

例如：-`Name Varchar2(50)`

注意：- Varchar2 的最大大小为 4000。

# iphone - Wi-fi 捕获数据包 IVS。

> ID：10197643
> 
> 赞同：2
> 
> 时间：2012-04-17T19:16:07.250
> 
> 标签：iphone, objective-c, ios, ipad, wifi

(^.^)“再次抱歉，我的英语不好，如果有人喜欢纠正我的编辑，我将不胜感激”

嗨，如果我可以用我的 iphone 从 wi-fi 网络、任何源代码、Api、教程等捕获 IV，现在有人吗？谁能做这个，谁可以让 iphone wifi 混杂模式监视器捕获数据包。

我一直在寻找，但什么也找不到。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T21:30:08.080

看看[Stumbler](http://code.google.com/p/iphone-wireless/wiki/Stumbler)。

请注意，**它使用私有 API**，因此大部分代码不适用于 App Store 应用程序。但作为一种学习资源，它是无价的。

# sql - SQL 如果 A 列为空，则使用 B 列的值来计算 C 列

> ID：10197652
> 
> 赞同：0
> 
> 时间：2012-04-17T19:16:50.923
> 
> 标签：sql, ms-access

使用具有以下设计的 MS Access 数据库：

```
Tables
Equipment, Employees, CreditCard

Fields
Equipment: ID, PrimaryEmployee, SecondaryEmployee
Employees: ID, CreditCard
CreditCard: ID, Number, Pin 
```

因此，一件设备可以有两个不同的员工分配给它。每个员工可以有一张信用卡分配给他们，或者根本没有。

基于一台设备的ID：

*   如果该设备设置了 SecondaryEmployeeID，并且相应的 Employee 设置了 CreditCard，则返回该 CreditCard 的值。
*   否则，如果该设备设置了 PrimaryEmployeeID，并且相应的 Employee 设置了 CreditCard，则返回该 CreditCard 的值。

我还必须在同一个查询中从员工表中提取员工的姓名，因此，我之前使用的是 LEFT JOIN，这似乎使我无法做到这一点。

*已编辑*

我当前的查询尝试：

```
SELECT
    Equipment.ID,
    Equipment.PrimaryEmployee,
    Equipment.SecondaryEmployee,
    Employees.CreditCard,
    CreditCard.Pin
FROM
    (Equipment
        LEFT JOIN Employees ON Equipment.PrimaryEmployee = Employees.ID
    )
LEFT JOIN CreditCard ON Employees.CreditCard = CreditCard.ID
WHERE (((Equipment.EquipmentType)=1)) 
```

我从查询中删除了一些不相关的字段，希望能提高可读性，并简化我遇到问题的区域。

这目前正在生成如下结果：

```
ID    PrimaryEmployee    SecondaryEmployee    CreditCard    Pin
--------------------------------------------------------------------
1     John Doe           Jack Smith           1234567890    1234
2     Bubba Smith        Ryan Howard          2345678901    2345 
```

问题是它只匹配 PrimaryEmployee。我需要它首先检查 SecondaryEmployee，如果没有匹配或信用卡设置，则匹配 PrimaryEmployee。如果两者都不匹配，则返回 Null 或 '-'。

让我知道是否仍需要其他信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:52:21.663

在不破坏 SQL 的情况下，最简单的方法是创建第二个查询，该查询使用第一个查询的结果，并拉入第一个结果所在的 Employee 列`IS NULL.`

一旦你得到了你的两个查询，你就可以编写第三个查询，将两个查询的结果连接到一个输出中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:55:48.713

```
LEFT JOIN Employees ON ISNULL(Equipment.SecondaryEmployee, Equipment.PrimaryEmployee) = Employees.ID 
```

这应该有效，但请检查性能。左连接将为没有任何员工的人提取空值。

# java - Java按位运算符未按预期工作

> ID：10197655
> 
> 赞同：0
> 
> 时间：2012-04-17T19:17:04.650
> 
> 标签：java, bytearray, bit-manipulation

以下代码尝试将 4 个 long 存储在一个字节数组中。随机访问很重要，这就是我不使用字节流执行此操作的原因。为什么下面的代码不起作用？你能想出一个更有效的方法来做到这一点吗？

```
public static void storeLong(long value, byte[] buf, int offset) {
    buf[offset] = (byte) (value & 0xFFL);
    buf[offset+1] = (byte) ((value >>> 8) & 0xFFL);
    buf[offset+2] = (byte) ((value >>> 16) & 0xFFL);
    buf[offset+3] = (byte) ((value >>> 24) & 0xFFL);
    buf[offset+4] = (byte) ((value >>> 32) & 0xFFL);
    buf[offset+5] = (byte) ((value >>> 40) & 0xFFL);
    buf[offset+6] = (byte) ((value >>> 48) & 0xFFL);
    buf[offset+7] = (byte) ((value >>> 56) & 0xFFL);
}

public static long retrieveLong(byte[] buf, int offset) {
    return ((long)buf[offset]) 
        + (((long)buf[offset+1])<<8) 
        + (((long)buf[offset+2])<<16) 
        + (((long)buf[offset+3])<<24)
        + (((long)buf[offset+4])<<32) 
        + (((long)buf[offset+5])<<40) 
        + (((long)buf[offset+6])<<48) 
        + (((long)buf[offset+7])<<56);
}

public static void main(String[] args) {
    byte[] buf = new byte[32];
    storeLong(-1, buf, 0);
    storeLong(1, buf, 8);
    storeLong(Long.MAX_VALUE, buf, 16);
    storeLong(Long.MIN_VALUE, buf, 24);

    System.out.println(-1);
    System.out.println(1);
    System.out.println(Long.MAX_VALUE);
    System.out.println(Long.MIN_VALUE);

    System.out.println(retrieveLong(buf, 0));
    System.out.println(retrieveLong(buf, 8));
    System.out.println(retrieveLong(buf, 16));
    System.out.println(retrieveLong(buf, 24));

} 
```

我从上面得到的输出如下。您可以看到前四个数字与接下来的 4 不匹配：

```
-1
1
9223372036854775807
-9223372036854775808

-72340172838076673
1
9151031864016699135
-9223372036854775808 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T19:26:19.863

不要使用`+`并`byte`签名：

```
public static long retrieveLong(byte[] buf, int offset) {
    return ((long)buf[offset]     & 255) 
        | (((long)buf[offset + 1] & 255) << 8) 
        | (((long)buf[offset + 2] & 255) << 16) 
        | (((long)buf[offset + 3] & 255) << 24)
        | (((long)buf[offset + 4] & 255) << 32) 
        | (((long)buf[offset + 5] & 255) << 40) 
        | (((long)buf[offset + 6] & 255) << 48) 
        | (((long)buf[offset + 7] & 255) << 56);
} 
```

您必须为`and`每个字节加上 255 才能使其“无符号”。此外，您必须使用二进制`or`而不是添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T20:53:52.687

我做了一些测试，发现使用 java.nio.LongBuffer 的速度是我的代码的两倍

```
 ByteBuffer bb = ByteBuffer.allocate(4*8);
    LongBuffer lb = bb.asLongBuffer();

    lb.put(0, -1);
    lb.put(1, 1);
    lb.put(2, Long.MAX_VALUE);
    lb.put(3, Long.MIN_VALUE);

    System.out.println(lb.get(0));
    System.out.println(lb.get(1));
    System.out.println(lb.get(2));
    System.out.println(lb.get(3)); 
```

然后我可以使用 bb.array() 获取字节数组

感谢 Louis Wasserman 和 Rene Jeschke 的努力

# templates - 设置特定的输入字段

> ID：10197661
> 
> 赞同：1
> 
> 时间：2012-04-17T19:17:16.037
> 
> 标签：templates, scala, playframework, playframework-2.0

我想制作各种特定的输入字段，并按照[本教程](http://www.playframework.org/documentation/2.0/JavaFormHelpers)进行操作。

我在 Eclipse 中使用带有 Java 的 Play 2。

我面临的问题是这条线：

```
@implicitField = @{ FieldConstructor(myFieldConstructorTemplate.f) } 
```

1.  如果我将它定义在我的模板之外（外部`@main("Title"){}`），它找不到`FieldConstructor.`
2.  如果我在模板中定义它，会`@implicitField`生成一个编译错误：

> 未找到：值隐式字段。

我能怎么做？

我更喜欢定义一个包，因为我会有很多输入（文本、收音机、复选框等）。我喜欢[这里的做法，](https://github.com/playframework/Play20/tree/master/framework/src/play/src/main/scala/views/helper)但我不知道如何制作多个这样的助手，以便在我的模板中自动使用。

谢谢你的帮助，我很感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T20:02:11.050

这很常见......错误:)您需要先在模板中导入帮助程序包：

```
@import helper._
@implicitField = @{ FieldConstructor(myFieldConstructorTemplate.f) }

@main("Title"){
    ....
} 
```

# mysql - 嘿，mysql中发生了一个不希望的错误

> ID：10197665
> 
> 赞同：-3
> 
> 时间：2012-04-17T19:17:21.653
> 
> 标签：mysql

我刚刚写了一个查询，它完美地显示了来自 mysql 的数据，但是当我运行相同的查询一段时间后，输出显示为“MySQL 返回了一个空的结果集（即零行）”。

我不知道为什么会这样。我正在做两个表的 INNER JOIN。

```
SELECT 
    tbl_customer_conversation.follow_date, 
    tbl_customer_conversation.status, 
    tbl_customer_conversation.user_id 
FROM 
    tbl_customer_conversation 
INNER JOIN 
    tbl_lms_user 
ON 
    tbl_customer_conversation.user_id=tbl_lms_user.user_id 
where 
    tbl_customer_conversation.follow_date= DATE(NOW()) 
AND 
    tbl_lms_user.first_name = 'Be'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:33:01.050

如果它在一段时间前起作用，也许这部分是罪魁祸首？

`tbl_customer_conversation.follow_date= DATE(NOW())`

在@ypercube 评论和[meta 上的这个问题](https://meta.stackexchange.com/questions/78895/how-to-handle-an-answer-as-a-comment)之后，我将其添加为答案，因为它解决了问题。

# php - Webtechnick CakePHP-Facebook-Plugin 必须请求两次才能识别登录用户

> ID：10197670
> 
> 赞同：3
> 
> 时间：2012-04-17T19:17:32.863
> 
> 标签：php, facebook, cakephp, authentication

我正在使用来自 webtechnick (https://github.com/webtechnick/CakePHP-Facebook-Plugin/) 的 CakePHP-Facebook-Plugin，我在识别用户是否已经在 Facebook 上登录时遇到了一些麻烦。问题是：我登录到 facebook，然后我打开我的网站（localhost.localdomain）并且我没有登录。然后我刷新我的网站页面并登录。上面是我正在使用的代码。我已经对其进行了测试，在第一个请求中， $this->Connect->user() 调用返回 false（第一个和第二个），然后呈现页面，我认为 init 或FacebookHelper->login 方法，因为如果我在没有重定向的情况下调用它，它表示我在线并使用我的网站；使用重定向设置，它会显示标签，并且在我登录的第二个请求中。

我试图初始化 FacebookHelper 并在 beforeFilter 上调用“登录”，但没有成功（有和没有重定向）。

此外，显示 facebook 的登录或注销按钮的逻辑在 beforeFilter 中进一步完成，根据 $this->Session->check('Auth.User.id') 的值定义特定布局。

```
27     public function beforeFilter() {
28 
29         try {
30             $user = $this->Auth->user();
31             $fb_user = $this->Connect->user();
32         } catch (FacebookApiException $e) {
33         } 
34         Configure::write('VertWeb.show_tabs', true);
35         if ($fb_user = $this->Connect->user()) {
36             if (!$this->Auth->loggedIn()) {
37                 if (!isset($fb_user['error_code'])) {
38                     $this->loadModel('User');
39                     $this->User->recursive = -1;
40                     if (($user = $this->User->findByFacebookId($fb_user['id'])) ||
41                         ($user = $this->User->findByEmail($fb_user['email'])) ) {
42                         
43                         $this->Auth->login($user);
44                         $this->Session->write('Auth.FacebookUser', $fb_user);
45                         $this->Session->write('Auth.User', $user['User']);
46                         $this->Session->write('Auth.FacebookUserPicture', FB::api('/me?fields=picture')); 
```

亲切的问候，丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:28:57.827

我遇到了这个问题，我修复了它，将这些行放入 Initialize （并删除启动方法）

```
if (!$this->noAuth && !empty($this->uid)) {
     $this->__syncFacebookUser();
} 
```

# iphone - 如何构造包含以下十六进制值的数据包

> ID：10197676
> 
> 赞同：-1
> 
> 时间：2012-04-17T19:17:56.067
> 
> 标签：iphone

我需要构建包含以下六角信息的数据包

```
 01 05 00 03 D0 90 01 
```

我需要将此数据发送到 tcp 服务器我很困惑如何创建一个数据包以便我可以发送到服务器设备

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:11:48.960

创建一个 NSData

```
char a[7] = {0x01,0x05,0x00,0x03,0xD0,0x90,0x01} ;
NSData *data = [NSData dataWithBytes:a length:7]; 
```

从 NSData 获取字节（这是在**教育背景下！**当然将它们转换回来是没有意义的......但也许你曾经需要相反）

```
const void *test = malloc(7);
test = [data bytes]; 
```

然后，您应该查看`NSURLConnection`和`NSMutableURLRequest`（或第三方产品[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)）将数据发布到您的服务器。

# asp.net-mvc - 如何测试方法参数是否用属性修饰？

> ID：10197677
> 
> 赞同：2
> 
> 时间：2012-04-17T19:17:56.580
> 
> 标签：asp.net-mvc, asp.net-mvc-3, unit-testing, asp.net-mvc-4, custom-attributes

这可能是重复的，但我找不到我正在寻找的问题，所以我问它。

您如何测试方法参数是否用属性修饰？例如，以下 MVC 操作方法，使用 FluentValidation 的`CustomizeValidatorAttribute`：

```
[HttpPost]
[OutputCache(VaryByParam = "*", Duration = 1800)]
public virtual ActionResult ValidateSomeField(
    [CustomizeValidator(Properties = "SomeField")] MyViewModel model)
{
    // code
} 
```

我确定我必须使用反射，希望使用强类型的 lambda。但不确定从哪里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:22:07.200

一旦你`GetMethodInfo`通过反射获得了方法的句柄，你可以简单地调用`GetParameters()`那个方法，然后对于每个参数，你可以检查`GetCustomAttributes()`X 类型实例的调用。例如：

```
Expression<Func<MyController, ActionResult>> methodExpression = 
    m => m.ValidateSomeField(null);
MethodCallExpression methodCall = (MethodCallExpression)methodExpression.Body;
MethodInfo methodInfo = methodCall.Method;

var doesTheMethodContainAttribute = methodInfo.GetParameters()
      .Any(p => p.GetCustomAttributes(false)
           .Any(a => a is CustomizeValidatorAttribute)));

Assert.IsTrue(doesTheMethodContainAttribute); 
```

例如，此测试将告诉您是否有任何参数包含该属性。如果您需要特定参数，则需要将`GetParameters`调用更改为更具体的参数。

# java - 将 JSR303 JavaBean Validation 异常转换为自定义异常

> ID：10197678
> 
> 赞同：3
> 
> 时间：2012-04-17T19:17:58.123
> 
> 标签：java, aspectj, bean-validation, custom-exceptions

我已经在我的 Web 应用程序的服务层中实现了 JSR303 JavaBean 验证（根据[这篇文章](http://musingsofaprogrammingaddict.blogspot.com/2011/01/method-validation-with-hibernate.html)）。现在我想将所有验证异常（例如 javax.validation.ConstraintViolationException）转换为我的自定义异常。

我创建了一个切面，只要在服务层中抛出异常就会调用它：

```
@Aspect
public class ExceptionConversionAspect {

    @AfterThrowing(pointcut="execution(* com.myexample.service.*.*(..))", throwing="e")
    public void convertServiceException(Exception e) {

        if (e instanceof ConstraintViolationException) {
             // this is my custom exception
            throw new InvalidServiceInputException("The service inputs failed validation", e);
        }
    }
} 
```

但是当我的服务使用 ConstraintViolationException 验证失败时，不会触发我的异常转换方面。我怀疑这是因为验证异常本身是由 Aspect 触发的：

```
@Aspect
public class ValidateAspect {

    @Autowired
    private Validator validator;

    // Match any public methods in a class annotated with @AutoValidating
    @Around("execution(public * *(..)) && @within(com.myexample.validator.annotation.Validate)")
    public Object validateMethodInvocation(ProceedingJoinPoint pjp) throws Throwable {

    // some code here
    ....
} 
```

如何以正确的顺序链接我的方面？先ValidateAspect，然后是ExceptionConversionAspect？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-30T12:15:47.663

Raul Bertone 几乎是对的，但并不完全正确。逻辑必须颠倒，并且`ExceptionConversionAspect`必须是优先的。

Java SE 的完整工作示例（我只是模拟 Java EE 异常）：

**助手类：**

```
package javax.validation;

public class ConstraintViolationException extends RuntimeException {
    private static final long serialVersionUID = -8041265519275356912L;

    public ConstraintViolationException(String arg0) {
        super(arg0);
    }
} 
```

```
package com.myexample.validator.annotation;

import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;

@Retention(RetentionPolicy.RUNTIME)
public @interface Validate {} 
```

```
package com.myexample.service;

public class InvalidServiceInputException extends RuntimeException {
    public InvalidServiceInputException(String arg0, Throwable arg1) {
        super(arg0, arg1);
    }
} 
```

**示例驱动程序应用程序：**

驱动程序应用程序由服务注释`@Validate`并模拟服务 - 请参阅包名称。它循环执行 10 个方法调用，捕获异常并将它们打印到标准输出，以表明它们确实按照需要进行了转换。

```
package com.myexample.service;

import com.myexample.validator.annotation.Validate;

@Validate
public class Application {
    public void doSomething(int i) {
        System.out.printf("Doing something #%d%n", i);
    }

    public static void main(String[] args) {
        Application application = new Application();
        for (int i = 0; i < 10; i++) {
            try {
                application.doSomething(i + 1);
            }
            catch (Exception e) {
                System.out.println(e);
                System.out.println("  cause: " + e.getCause());
            }
        }
    }
} 
```

**方面：**

验证方面随机抛出一个`ConstraintViolationException`用于演示目的。

```
package com.myexample.aspect;

import java.util.Random;
import javax.validation.ConstraintViolationException;
import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;

@Aspect
public class ValidateAspect {
    private static final Random RANDOM = new Random();

    @Around("execution(public !static * *(..)) && @within(com.myexample.validator.annotation.Validate)")
    public Object validateMethodInvocation(ProceedingJoinPoint thisJoinPoint) throws Throwable {
        Object result = thisJoinPoint.proceed();
        if (RANDOM.nextBoolean())
            throw new ConstraintViolationException("uh-oh");
        return result;
    }
} 
```

异常转换方面现在有一个额外的`@DeclarePrecedence`注释。

```
package com.myexample.aspect;

import javax.validation.ConstraintViolationException;
import org.aspectj.lang.annotation.AfterThrowing;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.DeclarePrecedence;
import com.myexample.service.InvalidServiceInputException;

@Aspect
@DeclarePrecedence("ExceptionConversionAspect, *")
public class ExceptionConversionAspect {
    @AfterThrowing(pointcut = "execution(* com.myexample.service..*(..))", throwing = "e")
    public void convertServiceException(Exception e) {
        if (e instanceof ConstraintViolationException) {
            throw new InvalidServiceInputException("The service inputs failed validation", e);
        }
    }
} 
```

**控制台输出：**

```
Doing something #1
Doing something #2
com.myexample.service.InvalidServiceInputException: The service inputs failed validation
  cause: javax.validation.ConstraintViolationException: uh-oh
Doing something #3
com.myexample.service.InvalidServiceInputException: The service inputs failed validation
  cause: javax.validation.ConstraintViolationException: uh-oh
Doing something #4
Doing something #5
Doing something #6
com.myexample.service.InvalidServiceInputException: The service inputs failed validation
  cause: javax.validation.ConstraintViolationException: uh-oh
Doing something #7
Doing something #8
Doing something #9
Doing something #10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T20:19:38.667

当多个方面共享一个共同的连接点时，您可以使用 @DeclarePrecedence 语句手动设置执行顺序。在您的情况下，您可以创建一个新方面：

```
@Aspect
@DeclarePrecedence("ValidateAspect, ExceptionConversionAspect")
    public class SystemArchitecture {
        // ...
    } 
```

如果未指定优先级，则执行顺序默认为[此处定义的规则](http://www.eclipse.org/aspectj/doc/released/progguide/semantics-advice.html#advice-precedence)

# html - CSS 链接悬停样式

> ID：10197683
> 
> 赞同：3
> 
> 时间：2012-04-17T19:18:24.517
> 
> 标签：html, css

我正在设计一个网页，它有一个带有页面链接的菜单栏。我有一个样式表，但我遇到了“悬停”代码的问题。我的一段代码如下所示：

```
<body>
<div id="wrapper">
    <div id="menu">
        <a class="mLink" href="main.php">Home</a> 
```

使用 CSS 代码：

```
body {
background-color:black;
text-align: center;
height:100%;
}

div#wrapper{
margin-right: 5%;
margin-left: 5%;
margin-top: 0%;
margin-bottom: 5%;
border: outset;
border-color: white;
}

a.mLink{
color: white;
font-size: 35px;
padding: 10px;
}

a.mLink:hover{ 
color: black;
}

a.mLink:active{
color:black;
}

div#content{
color: white;
font-size: 40px;
} 
```

“悬停”和“活动”都不起作用，我不明白为什么。我尝试了很多不同的样式变体，例如 a:hover、#menu a:hover、#menu a.mLink:hover，但似乎没有任何效果。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:31:33.573

也许您可以附上它的外观截图并告诉我们它应该是什么样子？我将你所拥有的内容复制并粘贴到这个[jsfiddle 中](http://jsfiddle.net/PQy5U/)，它对我来说很好用。您发布的内容与我所做的内容之间的唯一区别是将 a:hover 颜色更改为红色，将 a:active 更改为黄色，这样您就可以看到差异，而不是黑色上的黑色。

那么，您能否发布正在发生的事情与您所期望的内容的屏幕截图？如果是这样，我会相应地更新我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:33:25.463

这可能听起来很愚蠢，但请清除缓存。它可能正在加载您以前的版本或其他内容。还有什么网络浏览器是它？是否有任何可能动态更改/添加类的 JS 代码。

# jquery - 使用复选框和 Jquery 显示隐藏元素 - jsfiddle 示例

> ID：10197685
> 
> 赞同：-1
> 
> 时间：2012-04-17T19:18:31.573
> 
> 标签：jquery

如果我不选中这两个框，这很好。不知道如何修复它。

```
$(".home-check").live('click', function() {
if ($(".home-check").is(':checked')) {
    var ident = $(this).attr('id');
    $('.' + ident).hide();

} else {
    var identt = $(this).attr('id');
    $('.' + identt).show();
}
});​
<p><input class="home-check" id="water" type="checkbox" name="gethired" />Fire - Only Show Fire</p>
<p><input class="home-check" id="fire" type="checkbox" name="hire" />Water - Only Show Water</p>

<li class="fire">Fire</li>
<li class="water">Water</li>
<li class="fire">Fire</li>
<li class="water">Water</li>
<li class="fire">Fire</li>
<li class="water">Water</li> 
```

[http://jsfiddle.net/cip691/AeyAL/2/](http://jsfiddle.net/cip691/AeyAL/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:25:45.907

试试这个：

```
$(".home-check").live('click', function() {
    $("li").hide();
    $(".home-check:checked").each(function() {
        $("." + this.id).show();
    });
}); 
```

[示例小提琴](http://jsfiddle.net/AeyAL/6/)

注意：你的身份证是错误的标签，这就是为什么检查`Fire`显示水，反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:32:21.297

试试这个：

```
$(".home-check").on('click', function() {
    var li_class = '.' +  this.id;    
    $(li_class).toggle();
}); 
```

​ 不要使用 live 在这种情况下没有必要，使用切换而不是显示和隐藏 = 更少的代码编写;）。

而不是

```
$(this).attr('id'); 
```

采用：

```
this.id 
```

它会更快！

希望它有用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T19:26:05.720

```
if ($(".home-check").is(':checked')) {
    var ident = $(this).attr('id');
    $('.' + ident).hide();

} else {
    var identt = $(this).attr('id');
    $('.' + identt).show();
} 
```

你不认为你正在使用 TAG 的 ID 吗？所以改变“。” 对于“#”，然后尝试一下

```
if ($(".home-check").is(':checked')) {
    var ident = $(this).attr('id');
    $('#' + ident).hide();

} else {
    var identt = $(this).attr('id');
    $('#' + identt).show();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T19:28:07.420

使用[事件对象](http://api.jquery.com/click/)获取[发起事件的目标对象](http://api.jquery.com/event.target/)。这样，您可以直接对其进行操作，而不是搜索一个复选框，当您同时选中它们时，它会返回这两个项目。

```
$(".home-check").live('click', function (event) {
    var checkbox = event.target;
    var ident = $(checkbox).attr('id');

    if ($(checkbox).is(':checked')) {
        $('.' + ident).hide();

    } else {
        $('.' + ident).show();
    }
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T19:29:48.807

试试这个：

```
$(".home-check").live('click', function() {
    if ($(this).is(':checked')) {
        var ident = $(this).attr('id');
        $('.' + ident).hide();

   } else {
       var identt = $(this).attr('id');
       $('.' + identt).show();
   } 
```

});​</p>

[示例小提琴](http://jsfiddle.net/cip691/AeyAL/2/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T20:19:05.377

[http://jsfiddle.net/HKQxH/](http://jsfiddle.net/HKQxH/)

这将显示和隐藏带有复选框的 li 元素。

li 必须隐藏（我猜）

```
li{display:none;}​ 
```

js

```
$(".home-check").live('click', function() {         
        if ( $(this).is(':checked') ){
        $('li.' + $(this).attr('id')).show();
        }
                      else{
                      $('li.' + $(this).attr('id')).hide();
                      }
});​ 
```

和html（“火”和“水”不在“顺序”中）

```
 <p><input class="home-check" id="water" type="checkbox" name="gethired" />Water</p>
<p><input class="home-check" id="fire" type="checkbox" name="hire" />Fire</p>

<li class="fire">Fire</li>
<li class="water">Water</li>
<li class="fire">Fire</li>
<li class="water">Water</li>
<li class="fire">Fire</li>
<li class="water">Water</li>

​ 
```

# unix - Perl：Shebang（空格？）“#！”？

> ID：10197690
> 
> 赞同：14
> 
> 时间：2012-04-17T19:18:59.890
> 
> 标签：unix, sh

我都见过：

```
#!/path/...
#! /path/... 
```

什么是对的？有关系吗？有历史吗？

我听说古代版本的 Unix 要求没有空格。但后来我听说那只是一个谣言。有人确定吗？

* * *

***编辑：**我想不出在哪里更好地问这个问题。据我所知，它与编程相关，因为空间可以使程序以不同的方式运行。所以我在这里问。*

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-17T19:38:24.960

我也有一个模糊的记忆，在一些旧的类 Unix 系统中不允许使用空格，但是一些研究并不支持这一点。

根据[这篇 Wikipedia 文章](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)，该`#!`语法于 1980 年 1 月在 Unix 版本 8 中引入。Dennis Ritchie 对该功能的最初公告说：

> 系统已更改，因此如果正在执行的文件以魔术字符开头，则`#!`该行的其余部分被理解为已执行文件的解释器名称。以前（实际上仍然是）shell 完成了大部分工作。当文本文件的名称作为命令输入时，它会自动在具有可执行模式的文本文件上执行。将设施放入系统可带来以下好处。

[剪辑]

> 为了利用这个绝妙的机会，把
> 
> ```
> #! /bin/sh 
> ```
> 
> 在你的 shell 脚本第一行的左边距。之后的空白`!`是可以的。使用完整的路径名（不进行搜索）。目前整行限制为 16 个字符，但此限制将提高。

可以想象，一些后来的类 Unix 系统支持该`#!`语法，但不允许在 之后出现空格`!`，但鉴于第一个实现明确允许空格，这似乎不太可能。

leonbloy 的回答提供了更多背景信息。

**更新 ：**

Perl 解释器本身可以识别以 开头的行`#!`，即使在内核无法识别的系统上也是如此。运行`perldoc perlrun`或查看[此网页](http://perldoc.perl.org/perlrun.html)以了解详细信息。

> 这 ＃！在解析线路时，总是检查线路是否有开关。因此，如果您使用的机器只允许一个带有 #! 的参数！行，或更糟糕的是，甚至不识别 #! 行，无论如何调用 Perl，您仍然可以获得一致的切换行为，即使 -x 用于查找程序的开头。

Perl 还允许在`#!`.

（就我个人而言，我更喜欢写`#!`没有空格的行，但无论哪种方式都可以。）

leonjoy[的回答](https://stackoverflow.com/a/10197925/827263)指向[了 Sven Mascheck 的这个网页](https://www.in-ulm.de/~mascheck/various/shebang/)，该网页讨论了 #! 深入。（我现在提到这一点是因为最近对 comp.unix.shell 的讨论。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-17T19:35:44.603

它似乎通常双向工作。[见这里](http://www.in-ulm.de/~mascheck/various/shebang/#blankrequired)。我想说的是，无空格版本在今天更为常见，而且对我来说更具吸引力。

顺便说一句，这与 Perl 没有特别的关系（但它肯定与编程有关）。

# mysql - 将日期从 Mysql 导入 Solr 时缺少必填字段

> ID：10197693
> 
> 赞同：0
> 
> 时间：2012-04-17T19:19:04.237
> 
> 标签：mysql, datetime, solr

我在让 solr 和 mysql 日期玩得很好时遇到问题。`sent`如果我从架构中注释掉该字段，一切正常。但是，只要我在日期字段中添加回来，每个文档都会出现此错误。

```
org.apache.solr.common.SolrException: [doc=116] missing required field: sent 
```

这是我配置 solr 的方式。我已经确保没有空/空日期并且没有。我也尝试过 dateTimeFormat=`yyyy-MM-dd'T'hh:mm:ss`并且没有设置 dateTimeFormat 。对于模式中发送的类型，我还尝试了 date 和 tdate 。

数据配置.xml

```
<dataConfig>
    <dataSource driver="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost:3306/hoplite" user="root" password="root"/>
    <document>
        <entity name="document" query="select * from document">
            <field column="ID" name="id" />
            <field column="RAW_TEXT" name="raw_text" />    
            <entity name="email" query="select * from email where document_id='${document.id}'">                
                <field column="TIME_SENT" name="sent" dateTimeFormat="yyyy-MM-dd'T'hh:mm:ss'Z'"/> 
                <field column="BODY" name="body" />
            </entity>
        </entity>
    </document>
</dataConfig> 
```

架构.xml

```
 <field name="id" type="tint" indexed="true" stored="true" required="true" />
   <field name="raw_text" type="text_general" indexed="true" stored="false" required="true" multiValued="true"/>   

   <field name="sent" type="date" indexed="true" stored="true" required="true" /> <!-- Import succeeds if I comment this line out -->
   <field name="body" type="text_general" indexed="true" stored="true" required="true" /> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-17T20:21:00.900

显然，对于日期，字段名称必须与列名称相同。因此，将文件更改为以下内容可以解决问题。请注意， time_sent 现在既是列名又是字段名。

数据配置.xml

```
<dataConfig>
    <dataSource driver="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost:3306/hoplite" user="root" password="root"/>
    <document>
        <entity name="document" query="select * from document">
            <field column="ID" name="id" />
            <field column="RAW_TEXT" name="raw_text" />

            <entity name="email" query="select * from email where document_id='${document.id}'">                
                <field column="TIME_SENT" name="time_sent" dateTimeFormat="yyyy-MM-dd'T'hh:mm:ss'Z'"/>
                <field column="BODY" name="body" />
            </entity>
        </entity>
    </document>
</dataConfig> 
```

架构.xml

```
 <field name="id" type="tint" indexed="true" stored="true" required="true" />
   <field name="raw_text" type="text_general" indexed="true" stored="false" required="true" multiValued="true"/>   

   <field name="time_sent" type="date" indexed="true" stored="true" required="true" /> <!-- Import succeeds if I comment this line out -->
   <field name="body" type="text_general" indexed="true" stored="true" required="true" /> 
```

# codeigniter - CodeIgniter 与高级图像火花（和 Phil Sturgeon 的 DRY 方法）

> ID：10197694
> 
> 赞同：1
> 
> 时间：2012-04-17T19:19:04.413
> 
> 标签：codeigniter, dry

我在获取 Jens Seger 的高级图像火花时遇到了一些问题。无论我做什么，我似乎都无法让他的 image_helper 加载/自动加载。

我的网站使用[Phil Sturgeon 的 DRY 方法](http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-Base-Classes-Keeping-it-DRY)。我想知道这是否会妨碍...

您是否打算能够用于`application/config/autoload.php`在火花中自动加载助手？我正在自动加载 spark 并尝试将 autoload.php 添加到 spark 并使用主自动加载，但无济于事。

任何帮助将非常感激。

安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T22:59:51.257

这不是 Sparks 的工作方式。您加载 Spark（您可以自动加载它`$autoload['sparks']`然后加载帮助程序。火花可能会为您自动加载帮助程序。

# iphone - 如何取消 performSelectorOnMainThread？

> ID：10197704
> 
> 赞同：2
> 
> 时间：2012-04-17T19:19:41.827
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, nsthread

如何取消`performSelectorOnMainThread`？

我有这个代码：

```
myClass = [[MyClass alloc] init];

[myClass performSelectorOnMainThread:@selector(setupPlayer) withObject:nil waitUntilDone:YES]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:29:14.503

根据[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html#//apple_ref/doc/uid/20000050-CJBEHAEF)：

> 您无法使用此方法取消排队的消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T04:34:12.590

如果您对最初将消息排队的线程很小心，您**可以**`+ (void)cancelPreviousPerformRequestsWithTarget:(id)aTarget`通过调用同一线程来取消它。之前的答案缺少一个重要的部分：

> 您无法使用此方法取消排队的消息。如果您想要取消当前线程上的消息的选项，您必须使用 performSelector:withObject:afterDelay: 或 performSelector:withObject:afterDelay:inModes: 方法。

# asp.net - 验证 Excel 工作表内容

> ID：10197706
> 
> 赞同：0
> 
> 时间：2012-04-17T19:19:49.313
> 
> 标签：asp.net, excel, gridview

我有一个 asp 页面，我在其中从用户上传一个 excel 文档，然后在网格上显示 excel 表的内容。有什么方法可以验证列数和列的内容（数据类型和标题）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:39:55.470

Excel的列数可以通过

```
UsedRange.Columns.Count 
```

对于表头，可以循环一一验证。对于数据类型，您可以使用 TypeName 来验证 - 例如，如果您循环到 Cells(r, c)，这是您的数据类型：

```
TypeName( Cells(r, c).Value ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:23:26.030

是的你可以。这是你可以做的，

1.  根据您的 Excel 工作表的格式（TSV、CSV 或其他格式），您可以对其进行解析。

2.  解析后，您可以针对解析的数据运行验证检查，并确认数据是否正是您需要的。

如果您可以提供更多详细信息，那么我可以指导您找到更准确的解决方案:)。

# haskell - 如何升级gtk2hsC2hs？

> ID：10197712
> 
> 赞同：16
> 
> 时间：2012-04-17T19:20:00.213
> 
> 标签：haskell, gtk, glib, cabal, gtk2hs

我正在`cabal install glib-0.12.3`使用 cabal-install 0.10.2 在我的 Ubuntu 11.10 下尝试。但是，它显示以下错误消息：

```
setup: The program gtk2hsC2hs version >=0.13.5 is required but the version
found at /usr/bin/gtk2hsC2hs is version 0.13.4
cabal: Error: some packages failed to install:
glib-0.12.3 failed during the configure step. The exception was:
ExitFailure 1 
```

经过半小时的搜索，我找不到这`gtk2hsC2hs`是哪里。我挖掘了[http://code.haskell.org/gtk2hs/tools/c2hs/](http://code.haskell.org/gtk2hs/tools/c2hs/)之类的地方，但似乎找不到正确的版本。

如何升级我的 gtk2hsC2hs？谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-17T19:39:48.487

它是[gtk2hs-buildtools](http://hackage.haskell.org/package/gtk2hs-buildtools)包的一部分。

```
$ cabal install gtk2hs-buildtools 
```

（可能带有`--global`标志，一般取决于您希望如何安装软件包）应该为您提供应该能够构建最新`gtk2hs`软件包的最新版本。

由于旧的`gtk2hsC2hs`位于. 默认会在 中安装可执行文件（在 Linux 上），因此最好将.`/usr/bin``/usr/bin``$PATH``cabal install``$HOME/.cabal/bin``$PATH`

# java - netty 中的多个处理程序

> ID：10197714
> 
> 赞同：2
> 
> 时间：2012-04-17T19:20:10.017
> 
> 标签：java, proxy, netty

我想在netty中制作一种日志代理。目标是能够让 Web 浏览器向 netty 服务器发出 HTTP 请求，将它们传递到后端 Web 服务器，还能够基于 HTTP 特定的事物采取某些行动。

有几个有用的网络示例，HexDumpProxy（它执行代理部分，与协议无关），我从 HttpSnoopServerHandler 中获取了一些代码。

我的代码现在看起来像这样： HexDumpProxyInboundHandler 可以在[http://docs.jboss.org/netty/3.2/xref/org/jboss/netty/example/proxy/HexDumpProxyInboundHandler.html找到](http://docs.jboss.org/netty/3.2/xref/org/jboss/netty/example/proxy/HexDumpProxyInboundHandler.html)

```
//in HexDumpProxyPipelineFactory
  public ChannelPipeline getPipeline() throws Exception {
      ChannelPipeline p = pipeline(); // Note the static import.
      p.addLast("handler", new HexDumpProxyInboundHandler(cf, remoteHost, remotePort));

      p.addLast("decoder", new HttpRequestDecoder());
      p.addLast("handler2", new HttpSnoopServerHandler());
      return p;
  }

//HttpSnoopServerHandler
public class HttpSnoopServerHandler extends SimpleChannelUpstreamHandler {
  public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {
    HttpRequest request = (HttpRequest) e.getMessage();
    System.out.println(request.getUri());
    //going to do things based on the URI
  }
} 
```

不幸的是，HttpSnoopServerHandler 中的 messageReceived 从未被调用 - 看起来 HexDumpProxyInboundHandler 消耗了所有事件。

我怎么能有两个处理程序，其中一个需要解码器，但另一个不需要（我宁愿拥有 HexDumpProxy，它不需要理解 HTTP，它只是代理所有连接，但我的 HttpSnoopHandler前面需要有HttpRequestDecoder）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:10:01.397

I've not tried it but you could extend HexDumpProxyInboundHandler and override messageReceived with something like

```
super.messageReceived(ctx, e);
ctx.sendUpstream(e); 
```

Alternatively you could modify HexDumpProxyInboundHandler directly to that the last thing messageReceived does is call super.messageReceived(ctx,e).

This would only work for inbound data from the client. Data from the service you're proxy-ing would still be passed through without you code seeing it.

# c# - 通过查看字节检查十进制是否包含小数位

> ID：10197723
> 
> 赞同：5
> 
> 时间：2012-04-17T19:20:56.390
> 
> 标签：c#, decimal

[这里](https://stackoverflow.com/questions/4668407/how-to-check-whether-a-float-number-contains-decimals-like-2-10-2-45-12382-66)有一个类似的问题。有时该解决方案会出现异常，因为数字可能很大。

我认为，如果有一种方法可以查看十进制数的字节，那么效率会更高。例如，十进制数必须由一些 n 个字节表示。例如，一个 Int32 由 32 位表示，所有以 1 位开头的数字都是负数。也许与十进制数有某种类似的关系。你怎么能看十进制数的字节？还是整数的字节？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-17T19:25:01.260

如果您真的在谈论**十进制**数（而不是**浮点数**），那么[Decimal.GetBits](http://msdn.microsoft.com/en-us/library/system.decimal.getbits.aspx)将让您查看小数的各个位。MSDN 页面还包含对位含义的描述。

另一方面，如果你只是想检查一个数字是否有小数部分，做一个简单的

```
var hasFractionalPart = (myValue - Math.Round(myValue) != 0) 
```

比解码二进制结构容易得多*。*这应该适用于小数以及经典的浮点数据类型，例如**float**或**double**。在后一种情况下，由于浮点舍入误差，检查`Math.Abs(myValue - Math.Round(myValue)) < someThreshold`而不是比较可能是有意义的`0`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T19:29:55.917

如果您想要一种合理有效的方法来获取`decimal`类型的“十进制”值，您可以将其修改为一个。

```
decimal number = 4.75M;
decimal fractionalPart = number % 1; 
Console.WriteLine(fractionalPart); //will print 0.75 
```

虽然它可能不是理论上的最佳解决方案，但它会非常快，并且几乎可以肯定对于您的目的来说足够快（比字符串操作和解析要好得多，这是一种常见的幼稚方法）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T19:24:50.753

您可以使用[`Decimal.GetBits`](http://msdn.microsoft.com/en-us/library/system.decimal.getbits.aspx)为了从十进制结构中检索位。

上面链接的 MSDN 页面详细说明了它们在内存中的布局方式：

> Decimal 数的二进制表示由一个 1 位符号、一个 96 位整数和一个比例因子组成，该比例因子用于划分整数并指定它的哪一部分是小数部分。比例因子隐含地是数字 10，升为从 0 到 28 的指数。
> 
> 返回值是一个 32 位有符号整数的四元素数组。
> 
> 返回数组的第一个、第二个和第三个元素包含 96 位整数的低、中和高 32 位。
> 
> 返回数组的第四个元素包含比例因子和符号。它由以下部分组成：
> 
> 位 0 到 15（低位字）未使用且必须为零。
> 
> 位 16 到 23 必须包含 0 到 28 之间的指数，表示整数除以 10 的幂。
> 
> 位 24 到 30 未使用，必须为零。
> 
> 第 31 位包含符号；0 表示积极，1 表示消极。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T22:08:45.670

与 Oded 的详细信息一起使用 GetBits，我想出了这个

```
const int EXP_MASK = 0x00FF0000;
bool hasDecimal = (Decimal.GetBits(value)[3] & EXP_MASK) != 0x0; 
```

# wordpress - 专用内存中允许的内存大小

> ID：10197726
> 
> 赞同：0
> 
> 时间：2012-04-17T19:21:30.513
> 
> 标签：wordpress, memory

l 有一个具有 24 GB RAM 的专用服务器。我有一个基于 wordpress 脚本的新闻门户，当我尝试添加 SEO SearchTerms Tagging 2 插件并激活它时 wp 管理区域出现此错误。致命错误：在第 251 行的 /home/username/public_html/wp-includes/functions.php 中允许的内存大小为 268435456 字节已用尽（尝试分配 11508934 字节）我尝试了一切，我在 php.ini 添加了定义（ 'WP_MEMORY_LIMIT', '1024M'); 在 wp-config.php 但没有一个工作。如果可能的话我需要帮助...谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:28:19.847

Possible solution can be found [here](https://stackoverflow.com/questions/415801/allowed-memory-size-of-33554432-bytes-exhausted-tried-to-allocate-43148176-byte)

Although it would make sense to figure out WHAT exactly is causing the memory error. In any case I had a similar problem and this fixed it for me.

# garbage-collection - 执行手动 GC 后生成堆转储显着减少

> ID：10197727
> 
> 赞同：2
> 
> 时间：2012-04-17T19:21:35.703
> 
> 标签：garbage-collection, jvm, heap-dump

这是我在堆栈溢出论坛的第一篇文章。我们最近遇到了一些 Java OOME 问题，并且使用 jvisualvm、yourkit 和 eclipse mat 工具能够识别和修复一些问题......

在分析过程中观察到的一种行为是，当我们使用 jconsole 或 jvisualvm 手动创建 heapdump 时，jvm 中使用的堆大小在生成 heapdump 后显着减少（从 1.3 GB 到 200 MB）。有人可以就这种行为提出建议吗？这是一个变相的福音，因为每当我看到已用堆大小大于 1.5GB 时，我都会执行手动 GC，系统会恢复到较低的已用堆大小，从而导致 jvm 不会重新启动。

让我知道任何其他详细信息

谢谢大师

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:33:23.680

当您使用 JConsole 创建转储文件时，有 2 个参数：第一个是要生成的文件名（完整路径），第二个（默认为 true）表示您是否要在进行转储之前执行 gc。如果您在转储前不想要完整的 gc，请将其设置为 false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:35:04.853

这是一个老问题，但我在提出自己的新问题时发现了它，所以我想我会回答它。

当您生成堆转储时，JVM 在生成堆转储之前会执行 System.gc() 操作，这会收集未引用的对象并有效地降低堆利用率。我实际上正在寻找一种方法来禁用该系统 GC，以便我可以检查在我的 JVM 中搅动的垃圾对象。

# java - 未找到数据 Java 异常

> ID：10197733
> 
> 赞同：1
> 
> 时间：2012-04-17T19:22:14.563
> 
> 标签：java, sql, ms-access, netbeans

我是 Java 新手，正在做一个项目。我正在尝试使用 Netbeans 从 MS Access 检索数据。在我重新安装操作系统之前一切正常。现在我运行代码我得到这个错误。您的帮助和建议将不胜感激

```
java.sql.SQLException: No data found
    at sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7138)
    at sun.jdbc.odbc.JdbcOdbc.SQLDriverConnect(JdbcOdbc.java:3073)
    at sun.jdbc.odbc.JdbcOdbcConnection.initialize(JdbcOdbcConnection.java:323)
    at sun.jdbc.odbc.JdbcOdbcDriver.connect(JdbcOdbcDriver.java:174)
    at java.sql.DriverManager.getConnection(DriverManager.java:582)
    at java.sql.DriverManager.getConnection(DriverManager.java:185)
    at connect.ConnectDB(connect.java:24)
    at StaffLogin.formWindowOpened(StaffLogin.java:125)
    at StaffLogin.access$000(StaffLogin.java:13)
    at StaffLogin$1.windowOpened(StaffLogin.java:47)
    at java.awt.Window.processWindowEvent(Window.java:1859)
    at javax.swing.JFrame.processWindowEvent(JFrame.java:279)
    at java.awt.Window.processEvent(Window.java:1820)
    at java.awt.Component.dispatchEventImpl(Component.java:4630)
    at java.awt.Container.dispatchEventImpl(Container.java:2099)
    at java.awt.Window.dispatchEventImpl(Window.java:2475)
    at java.awt.Component.dispatchEvent(Component.java:4460)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
    at  java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at  java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

这是代码，我也省略了“生成的代码”和“外观”。请让我知道是否需要这些。谢谢。

```
import java.sql.*;
import javax.swing.*;

public class StaffLogin extends javax.swing.JFrame {

Connection conn = null;
ResultSet rs = null;
PreparedStatement pst = null;

/**
 * Creates new form StaffLogin
 */
public StaffLogin() {
    initComponents();
}
   private void formWindowOpened(java.awt.event.WindowEvent evt)  {                                  
    // TODO add your handling code here:
    conn = connect.ConnectDB();
}                                 

private void cmdloginMouseClicked(java.awt.event.MouseEvent evt)  {                                      
    // TODO add your handling code here:
    conn = connect.ConnectDB();
   String u = txtusername.getText();
   String p = txtpassword.getText();

    String sql = "SELECT * FROM Staff_Table WHERE Firstname='" + u+"' and Password='"+ p+"'";
    try{
        pst = conn.prepareStatement(sql);
        rs = pst.executeQuery();
        if (rs.next()){
            JOptionPane.showMessageDialog(null,"Correct Password");
            Interface i = new Interface();
            i.setVisible(true);

        }
        else
            JOptionPane.showMessageDialog(null,"Invalid Username or Password");
    }
    catch(Exception e){
        JOptionPane.showMessageDialog(null, e);
    }
}                                     

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new StaffLogin().setVisible(true);
        }
    });
}
// Variables declaration - do not modify                     
private javax.swing.JButton cmdlogin;
private javax.swing.JLabel jLabel1;
private javax.swing.JLabel jLabel2;
private javax.swing.JPanel jPanel1;
private javax.swing.JPasswordField txtpassword;
private javax.swing.JTextField txtusername;
// End of variables declaration 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T19:32:53.920

当您尝试多次读取列的值时，通常会发生这种情况。例如，这可能会抛出“No data found”：

```
ResultSet rs = statement.executeQuery(sql);
while (rs.next()) {
    if ("value1".equals(rs.getString("mycolumn")) || "value2".equals(rs.getString("mycolumn"))) { 
```

这样它工作正常：

```
ResultSet rs = statement.executeQuery(sql);
while (rs.next()) {
    String value = rs.getString("mycolumn");
    if ("value1".equals(value) || "value2".equals(value)) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T19:45:38.393

这不是您问题的核心，但这条线

```
String sql = "SELECT * FROM Staff_Table WHERE Firstname='" + u+"' and Password='"+ p+"'"; 
```

是一个重大的安全漏洞。即使您正在“使用” `PreparedStatement`s，因为您正在“文本”构建带有参数传递值的字符串，但您正在为 SQL 注入攻击做好准备。

而是做

```
String sql = "SELECT * FROM Staff_Table WHERE Firstname=? and Password=?"
try{
    pst = conn.prepareStatement(sql);
    pst.setString(1, u);
    pst.setString(2, p);
    rs = pst.executeQuery();
    if (rs.next()){
        JOptionPane.showMessageDialog(null,"Correct Password");
        Interface i = new Interface();
        i.setVisible(true);

    }
    else
        JOptionPane.showMessageDialog(null,"Invalid Username or Password");
}
catch(Exception e){
    JOptionPane.showMessageDialog(null, e);
} 
```

这样，具有[“Robert'; DROP TABLE Staff_Table; --”之](http://xkcd.com/327/)类的名称或密码的用户将不会成为未来的噩梦。

如果您不明白为什么会出现此问题，请考虑上述“Robert...”用户存在的场景。

```
String u = "Robert'; DROP TABLE Staff_Table; --";
String p = "haha";
String sql = "SELECT * FROM Staff_Table WHERE Firstname='" + u+"' and Password='"+ p+"'"; 
```

变成

```
String sql = "SELECT * FROM Staff_Table WHERE Firstname='" 
  + "Robert'; DROP TABLE Staff_Table; --" 
  + "' and Password='"+ p+"'"; 
```

或者干脆

```
String sql = "SELECT * FROM Staff_Table WHERE Firstname='Robert'; DROP TABLE Staff_Table; --' and Password='haha'; 
```

它作为复合 SQL 语句执行，由三个 SQL 语句组成

```
SELECT * FROM Staff_Table WHERE Firstname='Robert';
DROP TABLE Staff_Table;
--' and Password='haha'; 
```

（注意最后一行是 SQL 注释，因为它以 开头`--`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T19:28:39.870

我最好的猜测是其他人在您的旧机器上创建了 ODBC 数据源，而您还没有在新机器上创建它。

到这里：

控制面板 -> 系统和安全 -> 管理工具 -> 数据源 (ODBC)

# delphi - Delphi XE2可以更改手表的顺序吗？

> ID：10197735
> 
> 赞同：6
> 
> 时间：2012-04-17T19:22:19.493
> 
> 标签：delphi, debugging

通常，当我使用复杂的方法时，我会同时激活许多手表。如果我添加一个新手表，它将被放置在列表的底部。不过，有时我希望新表放在其他表旁边，因为这两个变量有某种联系。除了必须删除并重新插入手表之外，我还没有找到这样做的方法。有更好的方法吗？

考虑到 Delphi IDE 的悠久且令人印象深刻的历史，我觉得 watch 窗口被忽略了。据我记得它在 Turbo Pascal 中的行为相同：-/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T20:02:29.490

我不知道 IDE 内部的任何内容，但您可以在 dsk 文件的 Watches 部分更改顺序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T21:02:13.143

您可以通过双击手表并指定组名将手表分类为不同的组。这会将它们放置在不同的选项卡中。

# xml - XQuery：为什么这个转换会修改源文档？

> ID：10197736
> 
> 赞同：1
> 
> 时间：2012-04-17T19:22:23.847
> 
> 标签：xml, xquery, xquery-update

我正在使用这个非常简单的 XML 文档（我从教程中借来的）books-mod.xml：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<bookstore>

<book category="COOKING">
  <title lang="en">Everyday Italian</title>
  <author>Giada De Laurentiis</author>
  <year>2005</year>
  <price>30.00</price>
</book>

<book category="CHILDREN">
  <title lang="en">Harry Potter</title>
  <author>J K. Rowling</author>
  <year>2005</year>
  <price>29.99</price>
</book>

<book category="WEB">
  <title lang="en">XQuery Kick Start</title>
  <author>James McGovern</author>
  <author>Per Bothner</author>
  <author>Kurt Cagle</author>
  <author>James Linn</author>
  <author>Vaidyanathan Nagarajan</author>
  <year>2003</year>
  <price>49.99</price>
</book>

<book category="WEB">
  <title lang="en">Learning XML</title>
  <author>Erik T. Ray</author>
  <year>2003</year>
  <price>39.95</price>
</book>

</bookstore> 
```

并使用此查询：

```
copy $d := doc("books-mod.xml")
modify (
  for $t in $d//title
  return replace value of node $t with concat($t, " in bed")
)
return $d 
```

该查询运行并执行我所期望的（即，将文本“in bed”附加到每本书的标题）。然而，令人惊讶的是，它还修改了源文档……我认为`copy`这种转换的全部意义在于我们修改了文档的*副本*。

我在这里想念什么？

我正在使用`xqilla`with`-u`来执行查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:54:38.760

你是对的，这绝对是一个错误。*变换表达式*明确[*不是*更新](http://www.w3.org/TR/xquery-update-10/#id-transform)表达式：

> 转换表达式是一个简单的表达式，因为它不会修改任何现有节点的值。

您使用的是哪个版本的 XQilla？[2.2.2 版](http://sourceforge.net/news/?group_id=152021&id=277000)的更改日志提到了一些相关的内容：

> *   修复了转换表达式以复制文档节点而不是溶解它们。

所以可能它已经修复了。

# r - 在 R 的绘图区域之外添加脚注引用？

> ID：10197738
> 
> 赞同：37
> 
> 时间：2012-04-17T19:22:25.623
> 
> 标签：r, ggplot2, annotations, r-grid

我想在 R 中生成的 3 面板分面网格图中添加一个脚注引用。这是一个脚注，用于记录数据源。理想情况下，我希望将它放在所有三个轴的下方和外部——最好是在左下方。

我正在使用`ggplot2`和`ggsave()`。这意味着我不能使用`grid.text()`基于 - 的解决方案，因为它只在`x11()`窗口上绘制，并且不能添加到 ggplot 对象中。

使用 instead`png() ...code... dev.off()`似乎不是一个选项，因为我需要`ggsave`调整大小参数，并且发现这个命令可以产生更好、更清晰的打印（这也更快，因为我没有打印到屏幕上）。

这是我的基本代码：

```
p1 <- ggplot(data, aes(date, value))
    facet_grid(variable ~ .) + geom_point(aes(y =value), size=1) + 
    theme_bw() +
        opts(title=mytitle)
print(p1)
ggsave("FILE.png",width=mywidth, height=myheight, p1, dpi=90) 
```

我试过了：

```
p1 <- ggplot(data, aes(date, value))
    facet_grid(variable ~ .) + geom_point(aes(y =value), size=1) + 
    theme_bw() +
        opts(title=mytitle)
print(p1)
grid.text(unit(0.1,"npc"),0.025,label = "Data courtesy of Me")
grid.gedit("GRID.text", gp=gpar(fontsize=7))
ggsave("FILE.png",width=mywidth, height=myheight, p1, dpi=90) 
```

这适当地将脚注放在 x11() 显示的左下角，在绘图之外，但不幸的是，由于它没有应用于 p1 对象，因此 ggsave 命令不会保存它。

我也试过：

```
p1 <- ggplot(data, aes(date, value))
    facet_grid(variable ~ .) + geom_point(aes(y =value), size=1) + 
    theme_bw() +
    opts(title=mytitle) +
annotate("text", label = "Footnote", x = 0, y = 10, size = 5, colour = "black") +
print(p1)
ggsave("FILE.png",width=mywidth, height=myheight, p1, dpi=90) 
```

这使用 ggsave 成功打印，但是它有以下问题：

*   它在 3 个方面的每一个方面重复 3 次，而不是 1 次。
*   它包含在情节中，而不是在情节之外。
*   文本很难放置——似乎正在使用绘图单位（我的 x 轴是日期，所以 0 表示它在 1970 年左右）。
*   尽管我的 size 参数，文本大小似乎没有改变。

当我探索这个时，有几个相关的链接......

*   [ggplot2脚注](https://stackoverflow.com/questions/3039438/ggplot2-footnote)

    （不适用于 ggsave）

*   [如何用另一个测试结果中的标签标记 ggplot 中的条形图？](https://stackoverflow.com/questions/5964193/how-to-label-the-barplot-in-ggplot-with-the-labels-in-another-test-result)

    （在情节内部，而不是外部/情节下方）

*   [ggplot2中标签文本条目中的不同字体和大小](https://stackoverflow.com/questions/6653193/different-font-faces-and-sizes-within-label-text-entries-in-ggplot2)

    （不适用于 ggsave）

*   [使用ggplot2在R中保存pdf文件的问题](https://stackoverflow.com/questions/5625394/problem-saving-pdf-file-in-r-with-ggplot2)

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2017-02-16T23:33:01.093

ggplot2 现在本身就具有此功能，无需额外的包。`... + labs(caption = "footnote", ...)`

```
library(ggplot2) 
ggplot(diamonds, aes(carat, price, color = clarity)) + 
  geom_point() + 
  labs(title = "Diamonds are forever...", 
       subtitle = "Carat weight by Price", 
       caption = "H. Wickham. ggplot2: Elegant Graphics for Data Analysis Springer-Verlag New York, 2009.") 
```

[![在此处输入图像描述](../Images/5dfc8b8942818ff148b6a62b7b9687ac.png)](https://i.stack.imgur.com/bPebO.png)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-04-17T19:51:45.627

```
library(gridExtra)
library(grid)
library(ggplot2)

g <- grid.arrange(qplot(1:10, 1:10, colour=1:10) + labs(caption="ggplot2 caption"), 
              bottom = textGrob("grid caption", x = 1, 
                                hjust = 1, gp = gpar(fontface = 3L, fontsize = 9)))
ggsave("plot.pdf", g) 
```

[![在此处输入图像描述](../Images/5a581570bbc72b43f97eed6885b823be.png)](https://i.stack.imgur.com/H8OJQ.png)

编辑：请注意，此解决方案与最近添加到 ggplot2 的标题参数有些互补，因为 textGrob 可以在此处与整个图形对齐，而不仅仅是绘图面板。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-04-04T09:49:51.003

添加到 Brandon Bertelsen 的答案：如果您想在左下角添加标题，请添加

```
theme(plot.caption = element_text(hjust = 0)) 
```

# java - 如何在java appengine中将代码与html分开？

> ID：10197741
> 
> 赞同：2
> 
> 时间：2012-04-17T19:22:36.450
> 
> 标签：java, google-app-engine, jsp, view

我现在正在学习如何用 Java 制作一个 google appengine 应用程序，并且在他们的入门指南中，他们使用 JSP，但这似乎让我回到了我对 MVC 或分离一无所知的过去担忧。

我不想将代码放在模板中，而宁愿使用类似于 django 模板或 jinja 的东西，就像你在 python sdk 中所做的那样。执行此操作的最佳框架是什么？

我正在关注入门指南中的留言簿示例，他们告诉您制作这样的 JSP：

```
<html>
   <body>

<%
    UserService userService = UserServiceFactory.getUserService();
    User user = userService.getCurrentUser();
    if (user != null) {
%>
<p>Hello, <%= user.getNickname() %>! (You can
<a href="<%= userService.createLogoutURL(request.getRequestURI()) %>">sign out</a>.)</p>
<%
    } else {
%>
<p>Hello!
<a href="<%= userService.createLoginURL(request.getRequestURI()) %>">Sign in</a>
to include your name with greetings you post.</p>
<%
    }
%>

  </body>
</html> 
```

但是所有这些`<%`和`%>`s 让我想起了在 HTML 页面中包含 PHP 代码，这不是我想要的方式。有没有办法让我可以创建一个视图对象，向它传递一些值，然后将这些值插入到模板中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:55:26.467

根据[Google App Engine Wiki](http://code.google.com/p/googleappengine/wiki/WillItPlayInJava)，支持 JSP +JSTL，因此根本不需要 Scriptlet。

如果你想要一个干净的 MVC 架构，也许你应该使用支持该模式的框架。wiki 说它支持**Struts**和**Spring MVC**，因此您可以选择适合您需要的那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:39:32.713

有一些很好的框架可以实现你想要的：

*   [挂毯](http://tapestry.apache.org/)
*   [便门](http://wicket.apache.org/)

正如[Thomas](https://stackoverflow.com/questions/10197741/how-to-separate-code-from-html-in-java-appengine#comment13093181_10197741)所说，我可能会使用像[Backbone](http://documentcloud.github.com/backbone/)和 REST这样的优秀 js 框架

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T20:07:32.810

grails 可以很好地解决这个问题....但是使用应用程序引擎框架正确设置所有内容可能会有点痛苦

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-02T18:35:13.907

我的轻量级模板引擎[Chunk Templates](http://www.x5software.com/chunk)将在 Google App Engine 中运行。

块功能包括分支、循环和宏，具有简单的`{$tag}`语法，并且故意不允许像 jsp 那样的内联 java (ick)。它类似于 twig/jinja/django/等。

大量内置[标签过滤器](http://www.x5software.com/chunk/wiki/Chunk_Tag_Filters)，例如：

```
{% $value|sprintf(%.02f) %}
{% $value|trim %}
{% $value|onempty("N/A") %} 
```

示例/食谱 WAR 部署在 App Engine 中：http: [//chunk-docs.appspot.com/](http://chunk-docs.appspot.com/)

# c# - 我可以让 IDataReader 忽略列长度定义吗？

> ID：10197743
> 
> 赞同：1
> 
> 时间：2012-04-17T19:22:43.190
> 
> 标签：c#, odbc

我正在使用 ProgressDB 表，该表将列定义为最大长度*x*的字符串，但绝不是形状或形式实际上强制执行此限制；我发现了几种情况，其中列数据明显大于定义的列长度。（发现这甚至是可能的，这是一个令人不快的震惊）。可以想象，可能有一种方法可以在数据库端强制执行这些约束，但由于多种原因，目前这并不实用。

我的应用程序在遇到这样的非法数据时以一种相当壮观的方式爆炸。我可以在行读取级别捕获异常，但我真正想做的是读取行并忽略异常，因为我正在操作字符串数据并且根本不关心长度。

`IDataReader`有没有办法使用界面来做到这一点？这些是大型数据集，在其中进行操作`DataTable`并不是一个现实的解决方案。

**更新**这是一件有趣（令人沮丧）的事情：我试图捕捉`IDataReader.Read()`这样的坏事：

```
var reading = true;
do
{
    try
    {
        reading = r.Read();
        if (reading)
        {
            var columns = new string[columnCount - 1];
            try
            {
                for (int i = 0; i < (columnCount - 1); i++)
                {
                    columns[i] = Convert.ToString(r.GetValue(i));
                }
                writer.Write(string.Join(this.ColumnDelimiter, columns) + this.RowDelimiter);
            }
            catch (Exception ex)
            {
                Log.Error(string.Format("Exception dumping table {0}.  At the point of the error, the columns resembled:\r\n{1}\r\n\r\nThe exception was: {2}",
                    this.TableName, string.Join(this.ColumnDelimiter, columns.Select(c => c ?? string.Empty).ToArray()), ex.ToString()), ex);
            }
        }
    }
    catch(Exception ex)
    {
        Log.Error("Error reading row.", ex);
    }

} while (reading); 
```

...但是当我运行它时，应用程序吐了一个未捕获的异常：

```
2012-04-17 16:14:22,863 [1] ERROR GHM.ODBCSqlDump.Parser [(null)] - Error reading row.
System.Data.Odbc.OdbcException (0x80131937): ERROR [HY000] [DataDirect][ODBC Progress OpenEdge Wire Protocol driver][OPENEDGE]Column [ColumnName] in table [TableName] has value exceeding its max length or precision.
   at System.Data.Odbc.OdbcConnection.HandleError(OdbcHandle hrHandle, RetCode retcode)
   at System.Data.Odbc.OdbcDataReader.Read()
   at GHM.ODBCSqlDump.Parser.Execute(Stream streamOut)

Unhandled Exception: System.AccessViolationException: Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
   at System.Data.Common.UnsafeNativeMethods.SQLFetch(OdbcStatementHandle StatementHandle)
   at System.Data.Odbc.OdbcStatementHandle.Fetch()
   at System.Data.Odbc.OdbcDataReader.Read()
   at GHM.ODBCSqlDump.Parser.Execute(Stream streamOut)
   at GHM.DatabaseDump.Executor.ExecuteGroup(TransferGroup group)
   at GHM.DatabaseDump.Executor.Execute()
   at GHM.DatabaseDump.Program.Main(String[] args) 
```

...我的麻烦比我的解决方案增长得更快...叹息...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:00:08.687

哇，这太乱了。您能否修改您的 SQL SELECT 语句以在每个可能导致溢出的文本字段上执行字段的定义长度在`SUBSTRING(1, n)`哪里？`n`您将无法取回每个字段中的所有数据（从一开始就是坏数据），但至少它可能会阻止异常。

抱歉，我不是 ProgressDB 的人，所以我正在根据 T-SQL 构建解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T15:27:27.497

在进行中的表的定义中有一个叫做width的字段，其中定义了sql或odbc源的长度。该字段必须足够长以适合所有数据。否则你最终会得到那个错误。

# css - 多个分辨率的多个 css - 图像大小调整问题

> ID：10197744
> 
> 赞同：0
> 
> 时间：2012-04-17T19:22:43.890
> 
> 标签：css

我正在编写我的网站，我想为不同的分辨率创建不同的 css。我是按照上面的教程完成的：[http ://css-tricks.com/resolution-specific-stylesheets/](http://css-tricks.com/resolution-specific-stylesheets/)

一切都正确完成，但是当我的窗口针对狭窄的 css 调整大小时，所有图像都很大。

1个问题：如何在css中调整它们的大小？2 问题：如果我不想以窄样式显示某些 div，请使用“display: none;” 会阻止它加载还是只是隐藏它？

非常感谢，很抱歉我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:28:15.090

使用它来调整图像大小

```
#my_image {
  width: 50px;
  height: 100px;
} 
```

要回答您的第二个问题，`display: none` [只需将其隐藏即可](https://stackoverflow.com/questions/4099637/does-displaynone-keep-elements-from-loading)。图像将被下载

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:41:46.543

这可能是一篇值得阅读的好文章。这是我读过的关于“响应式网页设计”的更好的文章之一。[http://www.alistapart.com/articles/responsive-web-design](http://www.alistapart.com/articles/responsive-web-design)

如果您想通过使用以下内容动态调整图像大小，这也可能有助于流体图像：

```
img {
 width: 100%;
} 
```

从它的声音来看不是超级 IE 友好，但文章中解释了解决方法。 [http://unstoppablerobotninja.com/entry/fluid-images](http://unstoppablerobotninja.com/entry/fluid-images)

* * *

这是第一篇“A List Apart”文章的最终结果……IMO 做得很好。尝试调整浏览器的大小，看看它是如何调整的。[http://www.alistapart.com/d/responsive-web-design/ex/ex-site-FINAL.html](http://www.alistapart.com/d/responsive-web-design/ex/ex-site-FINAL.html)

# java - 是否可以在 Android 2.2+ 平台（Gingerbraid、Ice Cream Sandwich 等）上运行 Android 2.2 应用程序？

> ID：10197747
> 
> 赞同：-5
> 
> 时间：2012-04-17T19:22:56.893
> 
> 标签：java, android

我想知道这是否可能，因为我有兴趣为 Android 平台开发应用程序，但我才刚刚开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:30:30.503

是的。以下是一些可能有帮助的[阅读材料。](http://developer.android.com/resources/articles/backward-compatibility.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:36:00.310

我不确定我是否理解你的问题。如果你想知道的是：

*   如果我开发一个针对 Android 2.2 的应用程序，它会在较新版本的 Android 上运行吗？

那么答案是：大概。唯一可能导致您的应用程序在较新版本上停止运行的情况是，如果您使用了从 Android API 中删除的某些功能。

您还可以在清单中控制应用程序将运行的 API 的最低版本（和最高版本）。在这种情况下，将无法将您的应用程序安装在具有某些版本的 Android 的设备上，该版本不在您确定的时间间隔内。

您可以在这里阅读更多相关信息：http: [//developer.android.com/guide/appendix/api-levels.html](http://developer.android.com/guide/appendix/api-levels.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T19:30:21.087

是的..有可能......这就是重点...... :) 但是 2.2 上的 2.3+ 应用程序没有......

# jquery - jQuery pushStack 函数是如何工作的？

> ID：10197753
> 
> 赞同：14
> 
> 时间：2012-04-17T19:23:11.823
> 
> 标签：jquery

我无法理解 jQuery pushStack 函数（记录在[http://api.jquery.com/pushStack/](http://api.jquery.com/pushStack/)）。我试图在这个 Fiddle 的选择器中添加一个项目列表。

[http://jsfiddle.net/johnhoffman/hTh8D/](http://jsfiddle.net/johnhoffman/hTh8D/)

JS：

```
$(function() {
   var listStuff = $("p");
   listStuff.pushStack($("div"));
   listStuff.css("color", "#f00");        
});​ 
```

HTML：

```
<p>foo</p>
<div>bar</div>​ 
```

但是，div 元素的文本不是红色的。将元素推送到 jQuery 堆栈上是什么意思？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T19:28:57.430

`.pushStack()`创建一个新的 jQuery 对象，该对象从先前的 jQuery 对象继承状态。

这种继承状态允许类似`.end()`和`.self()`的方法正常工作。在您的特定代码示例中，您没有使用作为`.pushStack()`新 jQuery 对象的返回值。

使用 jQuery 对象时，重要的是要知道大多数更改 jQuery 对象中的 DOM 对象的操作都会返回一个带有更改的新 jQuery 对象，而不是修改现有的 jQuery 对象。正是这种设计特性使他们能够维护这个以前修改过的 jQuery 对象的堆栈。

在你的情况下，我认为你根本不需要使用`.pushStack()`，你可能只需要使用`.add()`（它也返回一个新的 jQuery 对象），但我不太清楚你想要做什么，所以我不确定要推荐什么代码。

要实现您在问题中显示的最终结果 HTML，您可以这样做：

```
$(function() {
   $("p").add("div").css("color", "#f00").appendTo(document.body);        
});​ 
```

您显然可以将 更改`.appendTo()`为您打算对新 DOM 对象执行的任何操作。

在您的评论中，您询问了更多关于何时使用`pushStack()`. 我认为主要用途是在返回新 jQuery 对象的 jQuery 方法中。在这种情况下，您可以在新的 jQuery 对象中创建所需的新元素列表，然后调用`return this.pushStack(elems)`. 这最终会创建一个新的 jQuery 对象并返回它，但它也会将该新对象链接到前一个对象，以便`.end()`在链接中使用特殊命令时可以工作。

jQuery`.add()`方法就是一个经典的例子。在伪代码中，它的作用是：

```
add: function(selector, context) {
    // get the DOM elements that correspond to the new selector (the ones to be added)
    // get the DOM elements from the current jQuery object with this.get()
    // merge the two arrays of elements together into one array
    return this.pushStack(combinedElems);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:26:45.577

你不是在推动物体，试试这个：

```
$(function() {
var listStuff = $("p");
listStuff.css("color", "#f00");        
this.pushStack( listStuff.get() );
});​ 
```

# c++ - findContours 给出内存堆错误

> ID：10197754
> 
> 赞同：3
> 
> 时间：2012-04-17T19:23:22.650
> 
> 标签：c++, opencv, image-processing

我有下面的图片，并尝试用这些线用 OpenCV 找到最大的矩形

```
std::vector< std::vector<cv::Point> > contours;
cv::findContours(result,contours,CV_RETR_LIST,CV_CHAIN_APPROX_SIMPLE); 
```

但是上面的语句会导致内存堆错误。谁能给我一个线索，为什么会这样？在过去的几个小时里，我一直在伸展我的头发。

我认为这与 cv::Point 分配器有关，因为调用堆栈表明了这一点。

**更新：**我只是用 CvFindContours 运行程序，没有任何问题。所以它必须是 OpenCV 2.3.1。

**更新 2 ：**感谢@karlphillip 的回答，我重新访问了我的项目，这是我的 Visual Studio 项目设置。由于烦人的内存泄漏消息，我将 MFC 链接为静态库。这就是问题的原因。当我使用 MFC 作为共享 DLL 时，问题就消失了。

![在此处输入图像描述](../Images/bd31c96fa455c83f8d428b6c24c2e25e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T13:24:57.037

我刚刚在 Linux 和 Windows XP（32 位）上使用 OpenCV 2.3.1测试[了以下应用程序，我没有遇到任何问题。](https://stackoverflow.com/questions/8667818/opencv-c-obj-c-detecting-a-sheet-of-paper-square-detection/8863060#8863060)

除非您可以编写一个最小的应用程序来重现您观察到的问题，否则这就是我所能做到的。

这是[输入图像](http://cl.ly/1e363U230V342g0l123t)，代码如下：

```
#include <cv.h>
#include <highgui.h>

using namespace cv;

double angle( cv::Point pt1, cv::Point pt2, cv::Point pt0 ) 
{
    double dx1 = pt1.x - pt0.x;
    double dy1 = pt1.y - pt0.y;
    double dx2 = pt2.x - pt0.x;
    double dy2 = pt2.y - pt0.y;
    return (dx1*dx2 + dy1*dy2)/sqrt((dx1*dx1 + dy1*dy1)*(dx2*dx2 + dy2*dy2) + 1e-10);
}

void find_squares(Mat& image, vector<vector<Point> >& squares)
{
    // blur will enhance edge detection
    Mat blurred(image);
    medianBlur(image, blurred, 9);

    Mat gray0(blurred.size(), CV_8U), gray;
    vector<vector<Point> > contours;

    // find squares in every color plane of the image
    for (int c = 0; c < 3; c++)
    {
        int ch[] = {c, 0};
        mixChannels(&blurred, 1, &gray0, 1, ch, 1);

        // try several threshold levels
        const int threshold_level = 2;
        for (int l = 0; l < threshold_level; l++)
        {
            // Use Canny instead of zero threshold level!
            // Canny helps to catch squares with gradient shading
            if (l == 0)
            {
                Canny(gray0, gray, 10, 20, 3); // 

                // Dilate helps to remove potential holes between edge segments
                dilate(gray, gray, Mat(), Point(-1,-1));
            }
            else
            {
                    gray = gray0 >= (l+1) * 255 / threshold_level;
            }

            // Find contours and store them in a list
            findContours(gray, contours, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);

            // Test contours
            vector<Point> approx;
            for (size_t i = 0; i < contours.size(); i++)
            {
                    // approximate contour with accuracy proportional
                    // to the contour perimeter
                    approxPolyDP(Mat(contours[i]), approx, arcLength(Mat(contours[i]), true)*0.02, true);

                    // Note: absolute value of an area is used because
                    // area may be positive or negative - in accordance with the
                    // contour orientation
                    if (approx.size() == 4 &&
                            fabs(contourArea(Mat(approx))) > 1000 &&
                            isContourConvex(Mat(approx)))
                    {
                            double maxCosine = 0;

                            for (int j = 2; j < 5; j++)
                            {
                                    double cosine = fabs(angle(approx[j%4], approx[j-2], approx[j-1]));
                                    maxCosine = MAX(maxCosine, cosine);
                            }

                            if (maxCosine < 0.3)
                                    squares.push_back(approx);
                    }
            }
        }
    }
}

int main()
{    
    Mat img = imread("paper.jpg");

    vector<vector<Point> > squares;
    find_squares(img, squares);

    std::cout << "squares size: " << squares.size() << std::endl;
    getchar();

    return 0;
} 
```

# ios - 通过 UIAlertView 传递发件人？

> ID：10197756
> 
> 赞同：0
> 
> 时间：2012-04-17T19:23:29.447
> 
> 标签：ios

本质上我正在删除应用程序内的图片..所有内容都已编码等等..等等..所以当用户持有 UIButton 时，图像被交换并在它上面有 X。再次单击，图像将从 Doc Directory 和 DB 中删除。所以只有在删除之前添加一个 alertview 才有意义。问题是我使用的方法使用 (UIButton*)sender 作为参数。我需要将该参数传递给下一个方法以从屏幕上删除属性。

有没有相对简单的方法来做到这一点..

这是调用删除的函数。启动警报视图的函数也返回一个 void 并采用相同的 UIButton。

```
-(void)action:(UIButton*)sender {
    if (edit == true) 
    {
        [sender removeFromSuperview];
       [[scrollView viewWithTag:[sender tag]] removeFromSuperview];
        [self deleteFromDoc:sender];   
        edit = false;
        stop = false;
        NSLog(@"remove");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:04:42.127

将您的方法更改为

```
-(void)action:(UIView *)sender 
```

将 uibutton 的标签分配给 alertview，然后在 didClickButtonWithIndex: 中调用你的 action: 方法，将 alertView 作为发送者传入。

# r - R 避免 x 轴蜂鸣自动缩放十倍

> ID：10197759
> 
> 赞同：2
> 
> 时间：2012-04-17T19:23:56.863
> 
> 标签：r, plot

R 自动使用 x 轴的 10 次方（值从 0 到 500000） - 但我只想要 50000 或其他的简单数字（不写为 10 次方）。我试图设置轴，`axis(1,c(0,100000,....))`但它再次被绘制为十的幂。

我尝试使用 cex.axis 缩小字体，但它仍然使用 x 轴的 10 次方。我认为 R 试图确保 x 轴上的值之间有足够的空间 - 但我想强制绘制完整的值。

轴看起来像这样： -4e+05 -2e+05 0e+00 2e+05 4e+04 等等......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T19:31:28.070

这个链接似乎回答了你的问题：[http ://tolstoy.newcastle.edu.au/R/help/05/09/12499.html](http://tolstoy.newcastle.edu.au/R/help/05/09/12499.html)

例如`option(scipen=6)`，我相信只会对大于 1e6 的数字进行科学记数法的截止。

# java - 谷歌在 android 中放置 api 的示例代码

> ID：10197760
> 
> 赞同：0
> 
> 时间：2012-04-17T19:24:00.663
> 
> 标签：java, android, json, google-places-api

谁能告诉我如何在android中使用google places api。我正在eclipse中开发这个应用程序，我需要找到我所在地区附近最近的加油站和车库。我浏览了许多网站。我没有找到正确的答案。我需要一个示例代码，因为我是 json 概念的新手。

```
public class place  {

private static final String PLACES_SEARCH_URL =  "https://maps.googleapis.com/maps/api/place/search/json?";

private static final boolean PRINT_AS_STRING = false;

 public void performSearch() throws Exception {
  try {
   System.out.println("Perform Search ....");
   System.out.println("-------------------");
   HttpRequestFactory httpRequestFactory = createRequestFactory(transport);
   HttpRequest request = httpRequestFactory.buildGetRequest(new GenericUrl(PLACES_SEARCH_URL));
   request.url.put("key", "api key");
   request.url.put("location", lat + "," + lng);
   request.url.put("radius", 500);
   request.url.put("sensor", "false");

   if (PRINT_AS_STRING) {
    System.out.println(request.execute().parseAsString());
   } else {

    PlacesList places = request.execute().parseAs(PlacesList.class);
    System.out.println("STATUS = " + places.status);
    for (Place place : places.results) {
     System.out.println(place);
    }
   }

  } catch (HttpResponseException e) {
   System.err.println(e.response.parseAsString());
   throw e;
  }
}//StoresNearMe 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:36:58.893

您可以在 Android 中为 Google Places API 使用 Google API Java 客户端。请参阅我的简短回答[https://stackoverflow.com/a/12824796/1147466](https://stackoverflow.com/a/12824796/1147466)

# c++ - 告诉视觉工作室跳过？

> ID：10197769
> 
> 赞同：2
> 
> 时间：2012-04-17T19:24:49.747
> 
> 标签：c++, visual-studio

在调试时，我经常按 F11 进入某个功能。对于这个项目，我在任何地方都使用属性，它只是一个 RAII 包装器，用于检查我是否设置了变量，如果没有，则给我一个断言。它很有用。

但是现在调试很烦人，因为 F11 将进入该属性。我可以以某种方式跳过它吗？通过写属性、关键字或任何东西？

我正在使用 VS11beta

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:50:08.647

当您处理托管代码时，这很容易设置。您可以使用类手动标记函数[`DebuggerHiddenAttribute`](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerhiddenattribute.aspx)，甚至可以打开内置调试器设置，例如“跳过属性和运算符”。

不幸的是，对于本机 C++ 代码，Visual Studio 不支持自动跳过特定函数。（至少，直到 VS 2010 才支持它——我没有足够的时间玩 VS 11，看看这是否是他们给我们的东西，以弥补他们偷走了我们所有颜色的事实。）

不过，有*一个*解决方法，很久以前在 Andy Pennell 的博客上记录了：
[如何使用 Visual C++ 调试器不进入函数](http://blogs.msdn.com/b/andypennell/archive/2004/02/06/69004.aspx)

本质上，您编辑以下注册表项（对于 VS 2010）：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio\10.0\NativeDE\StepOver 
```

或对于 64 位应用程序：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\VisualStudio\10.0\NativeDE\StepOver 
```

指定将由调试器与函数匹配的正则表达式。

例如，如果您不希望调试器单步执行重载运算符，则可以使用以下表达式：

```
\scope:operator\oper:=NoStepInto 
```

正如博文中的免责声明所说：

> This is not a documented feature. Well obviously you are reading this “documentation” right here, but what I mean is that is not guaranteed to work as it was never officially tested, not is it supported by Microsoft. Its existence in future versions or update to current versions is not guaranteed.

# excel - 如何锁定特定单元格但允许过滤和排序

> ID：10197772
> 
> 赞同：15
> 
> 时间：2012-04-17T19:24:58.450
> 
> 标签：excel, vba

我正在使用以下代码锁定某些单元格的内容

```
Sub LockCell(ws As Worksheet, strCellRng As String)
  With ws
   .Unprotect
   .Cells.Locked = False
   .Range(strCellRng).Locked = True
   .Protect Contents:=True, AllowFormattingCells:=True, AllowFormattingColumns:=True, AllowFormattingRows:=True, AllowInsertingColumns:=True, AllowInsertingRows:=True, AllowSorting:=True, AllowFiltering:=True, AllowUsingPivotTables:=True, DrawingObjects:=True
  End With
End Sub 
```

它锁定那些特定列的内容。问题是用户无法对单元格进行排序、过滤或应用边框，因为这些 Excel 菜单项已禁用。

我认为`AllowSorting:=True`,`AllowFiltering:=True`并`DrawingObjects:=True`允许以相同的方式`AllowFormattingColumns:=True`和`AllowFormattingRows:=True`允许调整大小。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-06T23:53:10.340

有很多人有这个困难。普遍的答案是，您不能在允许不受阻碍的排序的同时保护内容不被编辑。您的选择是：

1) 允许编辑和排序:(

2) 应用保护并使用代码创建按钮以使用 VBA 进行排序。还有其他帖子解释了如何做到这一点。我认为有两种方法，或者（1）获取代码以取消保护工作表，应用排序，然后重新保护工作表，或者（2）使用保护工作表`UserInterfaceOnly:=True`。

3) Lorie 的回答不允许用户选择单元格 ( [https://stackoverflow.com/a/15390698/269953](https://stackoverflow.com/a/15390698/269953) )

4) 我还没有看到讨论过的一种解决方案是使用 VBA 来提供一些基本保护。例如，使用 检测和恢复更改`Worksheet_Change`。然而，它远非理想的解决方案。

5）当用户选择数据时，您可以保护工作表，而当用户选择标题时，您可以保持工作表不受保护。这留下了无数种方式，用户可能会弄​​乱数据，同时也会导致一些可用性问题，但至少减少了讨厌的同事不加思索地做出不必要的更改的可能性。

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    If (Target.row = HEADER_ROW) Then
        wsMainTable.Unprotect Password:=PROTECTION_PASSWORD
    Else
        wsMainTable.Protect Password:=PROTECTION_PASSWORD, UserInterfaceOnly:=True
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T16:15:18.780

这对我来说是一个主要问题，我发现下面的链接有一个相对简单的答案。感谢航海者！！！

请注意，我命名了我希望其他人能够排序的范围

*   取消保护工作表
*   转到“保护”---“允许用户编辑范围”（如果 Excel 2007，“审阅”选项卡）
*   添加“新”范围
*   选择您希望允许用户排序​​的范围
*   点击“保护表”
*   这次，****不允许用户选择“锁定单元格”* ****
*   好的

[http://answers.yahoo.com/question/index?qid=20090419000032AAs5VRR](http://answers.yahoo.com/question/index?qid=20090419000032AAs5VRR)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-26T21:55:52.277

我只是想出了一个棘手的方法来获得几乎相同的功能。不是以正常方式保护工作表，而是使用事件处理程序撤消用户尝试执行的任何操作。

将以下内容添加到工作表的模块中：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Target.Locked = True Then
        Application.EnableEvents = False
        Application.Undo
        Application.EnableEvents = True
    End If
End Sub 
```

如果用户对已锁定的单元格进行任何更改，则该操作将立即撤消。临时禁用事件是为了防止撤消本身触发该事件，从而导致无限循环。

排序和过滤不会触发 Change 事件，因此这些功能保持启用状态。

请注意，此解决方案可防止更改或清除单元格内容，但不能防止更改格式。坚定的用户可以通过简单地设置要解锁的单元格来绕过它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-23T14:44:54.887

这是一篇更详细地解释问题和解决方案的文章：

[对受保护工作表中的锁定单元格进行排序](http://blog.softartisans.com/2013/10/01/kb-sorting-locked-cells-in-protected-worksheets/)

要理解的是锁定单元格的目的是防止它们被更改，并且排序会永久更改单元格值。您可以编写宏，但更好的解决方案是使用“允许用户编辑范围”功能。这使得单元格可编辑，因此可以进行排序，但由于单元格在技术上仍处于锁定状态，因此您可以阻止用户选择它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-06T17:30:21.497

我知道这是超级旧的，但每当我用谷歌搜索这个问题时就会出现。您可以取消保护上述单元格中给出的范围，然后将数据验证添加到未受保护的单元格以引用诸如“423fdgfdsg3254fer”之类的令人发指的内容，然后如果用户尝试编辑任何这些单元格，他们将无法编辑，但您正在排序过滤现在可以工作了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-23T20:05:00.037

Lorie 的回答很好，但是如果用户选择了包含锁定和未锁定单元格的范围，则可以删除锁定/受保护单元格中的数据。

艾萨克的回答很好，但如果用户突出显示一个同时具有锁定和解锁单元格的范围，则不起作用。

如果目标范围内的任何单元格被锁定，我稍微修改了 Isaac 的代码以撤消更改。它还显示一条消息，解释为什么撤消该操作。结合 Lorie 的回答，我能够实现对受保护工作表进行排序/过滤的预期结果，同时仍允许用户对未受保护的单元格进行更改。

按照 Lorie 的答案中的说明，然后将以下代码放入工作表模块中：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    For Each i In Target
       If i.Locked = True Then
            Application.EnableEvents = False
            Application.Undo
            Application.EnableEvents = True
            MsgBox "Your action was undone because it made changes to a locked cell.", , "Action Undone"
        Exit For
        End If
    Next i
End Sub 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-28T10:44:59.060

这是一个非常古老但仍然非常有用的线程。我最近带着同样的问题来到这里。我建议在适当的时候保护工作表，并在选择过滤器行（例如第 1 行）时取消保护它。我的解决方案不使用密码保护 - 我不需要它（它是一种保护措施，而不是安全功能）。我找不到识别过滤器按钮选择的事件处理程序 - 所以我向我的用户指示首先选择过滤器单元格然后单击过滤器按钮。这是我提倡的，（我只在需要更改时更改保护，这可能会也可能不会节省时间 - 我不知道，但它“感觉”正确）：

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
  Const FilterRow = 1
  Dim c As Range
  Dim NotFilterRow As Boolean
  Dim oldstate As Boolean
  Dim ws As Worksheet
  Set ws = ActiveSheet
  oldstate = ws.ProtectContents
  NotFilterRow = False
  For Each c In Target.Cells
     NotFilterRow = c.Row <> FilterRow
     If NotFilterRow Then Exit For
  Next c
  If NotFilterRow <> oldstate Then
     If NotFilterRow Then
        ws.Protect
     Else
        ws.Unprotect
     End If
  End If
  Set ws = Nothing
End Sub 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-08T13:10:45.153

如果自动过滤是子程序操作的一部分，您可以使用

```
BioSum.Unprotect "letmein"

'<Your function here>

BioSum.Cells(1, 1).Activate
BioSum.Protect "letmein" 
```

暂时取消保护工作表，过滤单元格，然后重新保护。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-11-18T09:10:29.560

我有一个类似的问题。我希望用户能够在受保护的工作表中过滤“Table3”。但用户无法编辑表格。我在上面完成了，使用下面的 vba 代码：

```
Range("Table3").Select
Selection.Locked = True
Selection.FormulaHidden = False 
ActiveSheet.Protect DrawingObjects:=True, Contents:=True, Scenarios:=True _
    , allowfiltering:=True 
```

在以下代码中，我使用 VBA 过滤了代码：

```
Range("Table3[[#Headers],[Aantal4]]").Select
ActiveSheet.ListObjects("Table3").Range.AutoFilter Field:=8, Criteria1:= _
    Array("1", "12", "2", "24", "4", "6"), Operator:=xlFilterValues 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-12-02T13:09:13.340

在 Excel 2007 中，解锁要在其中输入数据的单元格。去评论

```
 > Protect Sheet
 > Select Locked Cells (already selected)
 > Select unlocked Cells (already selected)
 > (and either) select Sort (or) Auto Filter 
```

不需要 VB

# nginx - NGINX => 使用 sub-uris 在单个主机名上服务多个应用程序

> ID：10197774
> 
> 赞同：5
> 
> 时间：2012-04-17T19:25:03.273
> 
> 标签：nginx

我想从同一台服务器上提供多个应用程序，通过 nginx 反向代理。我希望这些应用程序可以通过带有 sub-uris 的单个域名提供。

例如

`www.mydomain.com/nodejs` => 被 nginx 捕获并监听端口 80 并通过在端口 3001 上运行的 node.js 应用程序提供服务

`www.mydomain.com/rails` => 被 nginx 捕获并监听端口 80 并通过运行在端口 3002 上的 rails 应用程序提供服务

我的第一个尝试是从两个上游开始：

```
# /etc/nginx/sites-available/mydomain.com

upstream nodejs {
  server 127.0.0.1:3001;
}

upstream rails {
  server 127.0.0.1:3002;
}

server {
  listen 80 default deferred;

  # What do I put here so that
  # mydomain.com/nodejs is proxied to the nodejs upstream and
  # mydomain.com/rails  is proxied to the rails  upstream ???
} 
```

有谁知道这一点或指出我正确的方向？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T19:33:48.480

怎么样：

```
upstream nodejs {
    server 127.0.0.1:3001;
}

upstream rails {
    server 127.0.0.1:3002;
}

server {
    listen 80;  

    location /nodejs {
        proxy_pass         http://nodejs;
        proxy_redirect     off;
        proxy_set_header   Host             $host;
        proxy_set_header   X-Real-IP        $remote_addr;
        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;
    }

    location /rails {
        proxy_pass         http://rails;
        proxy_redirect     off;
        proxy_set_header   Host             $host;
        proxy_set_header   X-Real-IP        $remote_addr;
        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;
    }

} 
```

或很快：

```
server {   
    listen 80;     

    location /nodejs {
        proxy_pass         http://127.0.0.1:3001;
        proxy_redirect     off;
        proxy_set_header   Host             $host;
        proxy_set_header   X-Real-IP        $remote_addr;
        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;
    }

    location /rails {
        proxy_pass         http://127.0.0.1:3002;
        proxy_redirect     off;
        proxy_set_header   Host             $host;
        proxy_set_header   X-Real-IP        $remote_addr;
        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;
    }

} 
```

?

大多数代理指令是可选的（您可能只需要`proxy_pass`and `proxy_redirect`）但很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T03:32:20.203

关于问题，css、js、images文件丢失，你可以这样做，

如果您使用 express 框架。您需要添加此代码行

```
app.enable('trust proxy'); 
```

此值“信任代理”默认值为禁用。

# html - WCAG 指南 (CSS+HTML+Javascript)

> ID：10197777
> 
> 赞同：1
> 
> 时间：2012-04-17T19:25:33.343
> 
> 标签：html, css, accessibility, wcag

如何确保我的网站遵循 WCAG 指南并为低带宽连接的用户合理运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T19:35:29.163

这是[W3C 的 WCAG 入门](http://www.w3.org/WAI/intro/wcag)。

您最好的选择是通过这些验证器运行您的网站：

*   [W3C 标记验证器](http://validator.w3.org/)
*   [Wave 可访问性评估工具](http://wave.webaim.org/)
*   [W3C CSS 验证器](http://jigsaw.w3.org/css-validator/)

在编写网站时遵循 W3C 的指导方针是一种很好的做法。如果您遵循他们的建议，您通常会在可访问性方面进行设置。

浏览此[Web 可访问性评估工具](http://www.w3.org/WAI/RC/tools/complete)列表。

作为额外资源，请遵循以下针对低带宽站点的一些指南：

*   [低带宽网页设计指南](http://www.aptivate.org/webguidelines/Tools.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-04T06:28:19.113

WCAG 是 W3C 发布的一系列 Web 可访问性指南。

WCAG 2.0 规范有 3 个级别。1\. WCAG 单层 A，2\. WCAG 双层 A。 3\. WCAG 三层 A

[![在此处输入图像描述](../Images/16556d9773a366238b44199e1a54d8e7.png)](https://i.stack.imgur.com/tP15z.gif)

这些是确保我们的网站符合 WCAG 的一些提示

*   标记所有表单元素
*   为非文本内容提供替代文本。这将帮助盲人使用可以向他们宣布的辅助技术。盲人可以使用屏幕阅读器，例如 Mac 内置 VoiceOver，Windows 必须下载 NVDA 和 JAWS，Chrome 浏览器有 chromevox

有关更多信息，您可以查看本文[在此处输入链接描述](http://www.prathapkudupublog.com/2017/05/overview-of-wcag.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-23T20:43:14.887

我同意运行建议的工具。但是，这些工具不会将您带到一个完全合规的网站，通常离它很远。您需要确保该站点完全可以通过键盘操作。您需要确保您提供的替代文本是有意义的，并且链接以提供上下文和目的的方式进行标记。你应该阅读 WAI-ARIA。这个主题比人们意识到的要复杂得多。WCAG 是一个可用性标准，如果您的网站有任何复杂性，所有自动化工具都会让您失望。

# google-maps - 在 KML/Google 地图中同时打开多个描述气球

> ID：10197779
> 
> 赞同：0
> 
> 时间：2012-04-17T19:25:41.463
> 
> 标签：google-maps, kml, balloon

所以我定义了一个带有几个地标的地图叠加层，以可视化我正在做的研究。描述中有结果，一切都很好。但是当我打开一个气球时，之前打开的气球会关闭，因此没有真正的可能性来比较不同地标上的结果。

我为此查看了 KML 常见问题解答，它说打开 KML 时无法打开描述。 [1] 它还说在打开第一个气球时使用特征锚打开另一个气球。 [2] 但这意味着我有一组固定的气球要同时打开，而我希望观众在任何给定时间决定哪些气球是打开的。

那么当我打开另一个气球时，是否可以阻止它们关闭？如果没有，是否还有另一种可能性，可以同时显示几个地方的文本信息，让观众可以决定哪些地标是打开的？

[1] [https://developers.google.com/kml/faq#balloonopenfile](https://developers.google.com/kml/faq#balloonopenfile)

[2] [https://developers.google.com/kml/documentation/kmlreference#featureanchor](https://developers.google.com/kml/documentation/kmlreference#featureanchor)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:52:03.140

这是选项：

创建 KMLLayer 时，将`suppressInfoWindows`选项设置为`false`. 然后添加一个捕获点击事件的事件：[https://developers.google.com/maps/documentation/javascript/reference#KmlMouseEvent][1]

这让您可以访问`featureData`, [https://developers.google.com/maps/documentation/javascript/reference#KmlFeatureData][2] 让您可以访问`infoWindowHtml`. 这样，在点击的位置创建您自己的信息窗口。为每次点击创建一个新的，以便它们保持打开状态。

# html - 我的 Razor - View 中有太多代码吗？

> ID：10197783
> 
> 赞同：0
> 
> 时间：2012-04-17T19:25:53.380
> 
> 标签：html, asp.net-mvc, razor

所以我的日历应用程序终于可以正常工作了。但似乎 View 做得太多了。它已经超越了模板。如果您同意，我可以/应该做些什么来使它变得更好？

相关：[控制器代码隐藏](https://stackoverflow.com/q/10193709/428757)

```
@model HTMLMVCCalendar.Models.MonthModel

@{
    ViewBag.Title = "Home Page";
    int month = Model.Month;
    int year = Model.Year;
    int numberOfDays = DateTime.DaysInMonth(year, month);
    int startDay = (int)(Convert.ToDateTime(month + "/1/" + year).DayOfWeek);
    int startCount = 1;
}

@*Need to have querystring to hold month and year.*@

<h2>@ViewBag.Message</h2>
<p>
    To learn more about ASP.NET MVC visit <a href="http://asp.net/mvc" title="ASP.NET MVC Website">http://asp.net/mvc</a>.
</p>
<div>  
    <table id="calendar">
        <thead>
            <tr>
                <th id="monthHeader" colspan="7">
                    <h3>
                    @{
                        @Convert.ToDateTime(month + "/1/" + year).ToString("MMMM");
                    }
                    </h3>
                </th>
            </tr>
            <tr>
                <th>Sun</th>
                <th>Mon</th>
                <th>Tues</th>
                <th>Wed</th>
                <th>Thur</th>
                <th>Fri</th>
                <th>Sat</th>
            </tr>
        </thead>
        <tbody>
            <tr>
            @for (int i = 0; i < startDay; ++i)
            {
                @:<td><div><span>&nbsp;</span></div><div><span>&nbsp;</span></div></td>
            }
            @for (int j = startDay; j < ((numberOfDays + startDay)); ++j)
            {
                <td>
                    <div><span>@startCount</span></div>
                    <div>
                        <span>
                            @{
                                var todaysEvents = Model.AllDays.ToList().FindAll(d => d.CalDate.Day == startCount);
                                foreach(HTMLMVCCalendar.Models.DayModel eventsToday in todaysEvents)
                                {
                                    foreach(HTMLMVCCalendar.Models.EventModel eventToday in eventsToday.CalEvents)
                                    {
                                        <text>
                                            &nbsp;@eventToday.DayCode:<br />
                                            &nbsp;@eventToday.Subject:<br />
                                            &nbsp;@eventToday.EventDesc<br /><br />
                                        </text>
                                    }                                 
                                }
                            }
                        </span>
                    </div>
                </td>
                if ((j + 1) % 7 == 0)
                {
                    @:</tr><tr>
                }
                ++startCount;
            }
            </tr>
        </tbody>
    </table>
    <div>
        <table>
            <tr>
                <td>
                    @using (Html.BeginForm("Previous", "Home", new{ year = @year, month = @month },  FormMethod.Post)) 
                    {
                        <input id="previous" type="submit" value="Previous" />
                    }
                </td>
                <td>
                    @using (Html.BeginForm("Next", "Home", new { year = @year, month = @month }, FormMethod.Post))
                    {
                        <input id="next" type="submit" value="Next" />
                    }
                </td>
            </tr>
        </table>

    </div> 
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:42:55.507

看起来不错，我唯一的建议是将以下逻辑移到您的模型中

```
int month = Model.Month;
int year = Model.Year;
int numberOfDays = DateTime.DaysInMonth(year, month);
int startDay = (int)(Convert.ToDateTime(month + "/1/" + year).DayOfWeek);
int startCount = 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T19:29:21.337

这看起来不错的样子。它显示了一个组织良好的结构，只有足够的脚本来提供该特定页面上的要点。我会说这并不过分。当您组织代码时，它可能看起来就是这样。组织是大型项目的关键，所以你要养成一个好习惯。

# java - 如何从可用的 BasicAWSCredentials 中推断出 AWS 账户 ID？

> ID：10197784
> 
> 赞同：38
> 
> 时间：2012-04-17T19:25:57.967
> 
> 标签：java, amazon-web-services

似乎在文档中的任何地方都找不到这个；如果我使用 BasicAWSCredentials 进行身份验证，例如 AccessKeyId 和 SecretKey，是否可以获得 AWS 账户 ID？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-17T20:45:28.767

### 更新

AWS 刚刚通过引入专用 STS API 操作[GetCallerIdentity](http://docs.aws.amazon.com/STS/latest/APIReference/API_GetCallerIdentity.html)默默地解决了这个长期存在的差距，它返回*有关其凭证用于调用 API 的 IAM 身份的详细信息*，包括 AWS 账户 ID - 有一些[示例响应](http://docs.aws.amazon.com/STS/latest/APIReference/API_GetCallerIdentity.html#API_GetCallerIdentity_Examples)，例如：

```
<GetCallerIdentityResponse xmlns="https://sts.amazonaws.com/doc/2011-06-15/">
  <GetCallerIdentityResult>
   <Arn>arn:aws:iam::123456789012:user/Alice</Arn>
    <UserId>AKIAI44QH8DHBEXAMPLE</UserId>
    <Account>123456789012</Account>
  </GetCallerIdentityResult>
  <ResponseMetadata>
    <RequestId>01234567-89ab-cdef-0123-456789abcdef</RequestId>
  </ResponseMetadata>
</GetCallerIdentityResponse> 
```

您可以使用[AWS 命令​​行界面](https://aws.amazon.com/cli/)仅获取账户 ID，这是一个示例：

```
$ aws sts get-caller-identity --output text --query Account
121371349383 
```

* * *

### 初步答案

这至少可以通过[AWS Identity and Access Management (IAM)](http://aws.amazon.com/iam/)通过[GetUser](http://docs.amazonwebservices.com/IAM/latest/APIReference/API_GetUser.html)操作（可通过[AWS SDK for Java](http://aws.amazon.com/sdkforjava/)中的[getUser()](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/identitymanagement/AmazonIdentityManagement.html#getUser%28%29)获得）间接实现：

> 检索有关指定用户的信息，包括用户的路径、GUID 和 ARN。
> 
> 如果您不指定用户名，IAM 会根据签署请求的 AWS 访问密钥 ID 隐式确定用户名。

返回的[User](http://docs.amazonwebservices.com/IAM/latest/APIReference/API_User.html)数据类型 ( [Class User](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/identitymanagement/model/User.html) ) 包含一个*Arn*元素 ( [getArn()](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/identitymanagement/model/User.html#getArn%28%29) )，它是*指定 user 的 Amazon 资源名称 (ARN)*。这在[Identifiers for IAM Entities 中有更详细的说明，](http://docs.amazonwebservices.com/IAM/latest/UserGuide/Using_Identifiers.html?r=7603)特别是在[ARNs](http://docs.amazonwebservices.com/IAM/latest/UserGuide/Using_Identifiers.html#Identifiers_ARNs)部分中，它描述了*User Resource Type*的格式：

```
arn:aws:iam::{account_ID}:user/{path/to/user/UserName}

Example: arn:aws:iam::123456789012:user/division_abc/subdivision_xyz/Bob 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-08T10:55:37.330

这是一个老问题，但对于那些可怜的人来说——基于 ARN 的答案是我们找到的最正确的答案。调用DescribeInstances时还有一个OwnerId字段，但可能没有实例..

然而，实际情况要复杂一些。有时 IAM 用户没有权限发出 getUser()，然后他得到 AmazonServiceException

```
getErrorCode() = "AccessDenied" 
```

在这种情况下，ARN 是 AWS 错误消息的一部分：

```
User: arn:aws:iam::123456789012:user/division_abc/subdivision_xyz/Bob is not authorized to perform: 
iam:GetUser on resource: arn:aws:iam::123456789012:user/division_abc/subdivision_xyz/Bob 
```

所以这里的情况更糟：我们需要解析一个自由文本错误消息，然后提取帐号：

```
try {
    ... iam.getUser(); ...
} catch (AmazonServiceException e) {
    if (e.getErrorCode().compareTo("AccessDenied") == 0) {
        String arn = null;
        String msg = e.getMessage();
        // User: arn:aws:iam::123456789012:user/division_abc/subdivision_xyz/Bob is not authorized to perform: iam:GetUser on resource: arn:aws:iam::123456789012:user/division_abc/subdivision_xyz/Bob
        int arnIdx = msg.indexOf("arn:aws");
        if (arnIdx != -1) {
            int arnSpace = msg.indexOf(" ", arnIdx);
            arn = msg.substring(arnIdx, arnSpace);
        }
        System.out.println("ARN: " + arn);
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-01-06T16:35:10.257

如果您拥有 AWS CLI 工具，则可以：

```
aws iam get-user | awk '/arn:aws:/{print $2}' 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-02-22T05:01:36.517

这是使较新的 STS getCallerIdentity 工作正常的代码（在 Java 中）：

```
private String getAccountIDUsingAccessKey(String accessKey, String secretKey) {
    AWSSecurityTokenService stsService = AWSSecurityTokenServiceClientBuilder.standard().withCredentials(
            new AWSStaticCredentialsProvider(new BasicAWSCredentials(accessKey, secretKey))).build();

    GetCallerIdentityResult callerIdentity = stsService.getCallerIdentity(new GetCallerIdentityRequest());
    return callerIdentity.getAccount();
} 
```

当然，向@SteffenOpel 提供所需线索的道具。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-11-24T12:08:01.207

使用最新的 API 可以直接找到用户 ID：

```
BasicAWSCredentials basicAWSCredentials = new BasicAWSCredentials("your access key", "your secret key");
AmazonIdentityManagementClient iamClient = new AmazonIdentityManagementClient(basicAWSCredentials);
String userId = iamClient.getUser().getUser().getUserId(); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-12-10T17:10:07.150

在此处添加此内容，因为它是“查找 aws 帐号”的最高 SO 结果，并且因为无论如何使用密钥而不是 IAM 角色来部署应用程序都是不好的做法......

如果您从具有 IAM 角色的 AWS 实例运行，您可以`curl -s http://169.254.169.254/latest/meta-data/iam/info`从结果的键中获取实例角色的 ARN `InstanceProfileArn`，而不必担心尝试解析异常消息或授予 IAM 权限到不需要它们的实例。

然后，您只需解析帐号的 ARN。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-03-19T13:20:58.660

我做了一个有趣的发现——如果你用不存在的 RoleName 调用 GetRole，你得到的错误消息包含调用帐户的 ARN，所以只需从中解析出帐号。这很好，因为它适用于我能想到的所有情况，即使调用者没有调用 GetRole 的权限。

这是我收到的错误消息：

```
User: arn:aws:sts::669916120315:assumed-role/CloudMail_Server/i-31dd19cd is not authorized to perform: iam:GetRole on resource: role _no_such_role_ 
```

错误消息的“669916120315”部分是 AWS 账户 ID。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-09-11T02:47:25.000

While I don't consider this an ideal scenario, it does get the job done. This uses the AWSSDK 3.0\.

```
public string GetUserId()
{
    AmazonIdentityManagementServiceClient c = 
        new AmazonIdentityManagementServiceClient();

    GetUserRequest request = new GetUserRequest();
    GetUserResponse response = c.GetUser(request);

    //parse it from the ARN
    //should be similar to "arn:aws:iam::111111111111:user/username"
    string[] arnParts = response.User.Arn.Split(new char[] { ':' });
    return arnParts[4];
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-02-17T12:46:47.210

使用 AWS Java SDK v2：

```
public String getAccountId(AwsCredentialsProvider awsAuth, Region awsRegion) {
    StsClient stsClient = getClient(awsAuth, awsRegion);

    GetCallerIdentityRequest request = GetCallerIdentityRequest
        .builder()
        .build();

    GetCallerIdentityResponse response = stsClient.getCallerIdentity(request);
    return response.account();
} 
```

```
public StsClient getClient(AwsCredentialsProvider awsAuth, Region awsRegion) {
        return StsClient
                .builder()
                .credentialsProvider(awsAuth)
                .region(awsRegion)
                .build();
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-01T16:33:26.100

默认安全组的所有者是“帐户 ID”

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-03-16T01:04:00.300

一些答案提供了一种从 IAM 用户检索 AWS 账户 ID 的方法。如果您使用 IAM 角色的凭证，这些解决方案将生成运行时异常。

在这种情况下，您可以这样做：

```
// you can get it with @Import(SnsConfiguration::class) for instance
@Autowired
private AWSCredentialsProvider credentialsProvider;

private String resolveAmazonAccountId() {
    AmazonIdentityManagement imClient = AmazonIdentityManagementClientBuilder.standard()
                        .withCredentials(credentialsProvider)
                        .build();

    String roleArn = imClient.getRole(new GetRoleRequest().withRoleName("role name")).getRole().getArn();

    // https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_identifiers.html#identifiers-arns
    // arn:partition:service:region:account:resource
    return roleArn.split(":")[4];
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-11-04T22:34:12.677

[ElasticTranscoder ListPresets](http://docs.aws.amazon.com/elastictranscoder/latest/developerguide/list-presets.html)返回一个数据结构，其中包含包含 AWS 账户 ID 的 ARN。

与许多其他流行建议不同，此 aws-cli 命令适用于基本凭证、IAM 用户、IAM 角色、实例角色和跨账户角色假设：

```
aws elastictranscoder list-presets --query 'Presets[0].Arn' | 
  cut -d: -f5 
```

当然，您需要获得调用 ListPresets API 的权限，但任何答案都是如此。

# macos - 在 SublimeText2 中构建 Lisp 代码

> ID：10197787
> 
> 赞同：3
> 
> 时间：2012-04-17T19:26:11.730
> 
> 标签：macos, lisp, sublimetext

有什么方法可以在 mac os 上的 ST2 中构建和运行 common lisp？我知道 SLIME 和 Emacs，但我对 ST 感兴趣

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T23:45:52.790

首先你必须安装解释器，在我的例子中我使用[sbcl](http://www.sbcl.org/platform-table.html)。

安装后就很简单了。在 ST2 上，转到***Preferences/Browse Packages***，转到 Lisp，添加一个新文件*Lisp.sublime-settings*：

```
{
    "cmd": ["sbcl", "--script", "$file"],
    "working_dir": "${project_path:${folder}}",
    "selector": "source.lisp",
    "osx":
    {
        "cmd": ["/opt/local/bin/sbcl", "--script", "$file"]
    },
    // exemple in windows with CLISP
    "windows":
    {
        "cmd": ["clisp", "$file"]
    }
    // exemple in windows with SBCL
    // "windows":
    // {
    //  "cmd": ["sbcl", "--script", "$file"]
    // }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T12:40:01.243

在 Windows 上，我可以通过结合[GNU Common Lisp](http://www.gnu.org/software/gcl/gcl.html)和包[SublimeREPL](https://github.com/wuub/SublimeREPL)来使用 REPL 。

现在，我不知道在 OSX 上是否可行，但如果不是，我会感到非常惊讶。

您必须将 Lisp REPL 添加到 SublimeREPL，因为它默认不提供它，但无论如何配置它都很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:58:09.417

顺便说一句，如果你想在 Mac 上使用 Lisp 编程，你也可以尝试使用 Clozure CL 及其开发环境：

[http://ccl.clozure.com/manual/chapter5.1.html#ccl-ide-introduction](http://ccl.clozure.com/manual/chapter5.1.html#ccl-ide-introduction)

我还没有使用它，但可能值得一试。

# objective-c - 如何更改显示为工作表的窗口的 alpha？

> ID：10197789
> 
> 赞同：0
> 
> 时间：2012-04-17T19:26:19.153
> 
> 标签：objective-c, cocoa, nswindow, cocoa-sheet

在可可中，您知道如何更改显示为工作表的窗口的 alpha 吗？我使用此功能启动窗口，应用程序总是使窗口半透明，我不希望那样。

```
- (void)beginSheet:(NSWindow *)sheet modalForWindow:(NSWindow *)docWindow modalDelegate:(id)modalDelegate didEndSelector:(SEL)didEndSelector contextInfo:(void *)contextInfo; 
```

不，打电话`[[awesomeFantasticWindow window] setAlphaValue:1.0]`不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T01:12:51.120

只需将您自己的自定义视图添加为窗口的内容视图并将其颜色设置为您想要的任何颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T01:00:48.933

您可以尝试 setOpaque 或 setAlphaValue 吗？我知道这很愚蠢，但我想我会从简单的东西开始。

# haskell - Yesod 可编辑表

> ID：10197791
> 
> 赞同：6
> 
> 时间：2012-04-17T19:26:23.303
> 
> 标签：haskell, yesod

我需要制作一个带有可编辑列的表格。每行是一个单独的记录。我希望能够显示数百条记录，对它们进行编辑，然后将它们提交回服务器进行更新。我不确定表单基础设施是否真的支持这一点。

有没有办法制作一个可重复的表格，以便我得到一个结果列表？这似乎是我可以设想的最接近的解决方案，而无需用 javascript 编写自己的解决方案。欢迎对此提出任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T03:12:26.820

不要重新发明轮子。如果您想要完整的 UI 组件包，只需使用功能齐全的 js 网格之一，如 jqgrid 或 extjs。我将 jqgrid 与 yesod 一起使用，在网格和外部面板中编辑行并将更改提交回来。

我认为您的方法的问题在于您找到了锤子（是的表单库），现在正在寻找钉子。您不必仅仅因为它在那里就使用yesod的每一点。

# c# - 如何关闭用户控件的初始化

> ID：10197792
> 
> 赞同：1
> 
> 时间：2012-04-17T19:26:31.870
> 
> 标签：c#, .net, wpf, silverlight, windows-phone-7

如何防止用户控件被初始化？我想自己初始化，不是在InitializeComponent()的构造函数中；?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:28:24.457

好吧，这似乎很愚蠢，但是您已经回答了您的问题；删除对`InitializeComponent()`. 重新创建自动生成的设计器代码，玩得开心！

编辑：

好的，所以根据您的编辑，我们知道您要解决的*实际问题是：*

> 感谢您的回复，但问题有点不同。这个控件不是我的（它是 windows live 控件）。我希望页面中的所有其他控件都正确初始化，并且应该稍后根据用户需求加载这个控件（它连接到互联网，它是 wp7 应用程序）。如何做到这一点？

因此，您需要在运行时而不是在设计时添加控件。这很容易做到。

```
var ctrl = new SomeControl();
// initialize control properties...

// this is your user control, a control within 
// the user control, whatever the parent should be.
parentControl.Children.Add(ctrl); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T19:34:36.060

不知道你为什么这样做。懒惰的初始化，所以不花时间在建设？

无论如何，创建一个公共方法并将 InitializeComponent 移到那里，也不要忘记创建一个私有字段以确保您不会初始化两次。

```
private bool _isInitialized;

public void InititializeControl()
{
    if(_isInitialized) return;

    _isInitialized = true;
    InitializeComponent();

} 
```

然后在必要的时候调用它..

# android - 手机在调试模式下无法连接到 Eclipse

> ID：10197796
> 
> 赞同：7
> 
> 时间：2012-04-17T19:26:58.243
> 
> 标签：android, memory, file-transfer

我尝试在三星 Galaxy S2 和三星 Galaxy Nexus 上连接 USB 调试器。它仍然设法在两个设备上失败。目前我正在使用 Windows XP，但我的想法已经不多了。

这是我尝试过的：

1.  安装SAMSUNG_USB_DRIVER_FOR_MOBILE_PHONES_1.4.8.0.exe
2.  搜索并尝试在 Google 驱动器上安装驱动程序。

有没有人有这个类似的问题，可以分享一个解决方案？

编辑* 三星 Galaxy S2 和三星 Galaxy Nexus 都能够连接到 PC，但不能连接到调试器。安装了不同差异的驱动程序甚至完成了三星起亚的安装。

我明天要为 50 次代表添加赏金。我真的需要测试我在实际手机上所做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:28:00.680

你需要下载[Samsung Kies](http://www.samsung.com/us/kies/)我知道软件描述中没有提到它是适用于开发人员的正确驱动程序，但事实确实如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:26:51.247

这可能根本没有帮助，因为您可能已经尝试过了，但是我在两台不同的 Windows 7 机器上遇到了巨大的问题，让我的 s2 连接以进行调试。

我最终通过插入 s2 USB 连接，在设备管理器中卸载它的驱动程序，拔下 USB 连接，卸载 Kies，下载最新版本的 Kies，安装并插入它回来了。

另一个更痛苦，这是前一阵子，但我做了和上面一样的事情，但也删除了eclipse和Android SDK，首先安装了最新版本的Kies，eclipse，然后sdk并确保所有这是在我插入电话之前完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T07:32:24.493

您可以使用 PdaNet 软件连接您的设备进行调试。我有同样的问题并使用这个软件解决。使用以下链接下载此软件：

[http://junefabrics.com/android/download.php](http://junefabrics.com/android/download.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T02:09:26.523

鉴于您可以通过 KIES 在 PC 上访问手机，我假设您已安装所有正确的 USB 驱动程序。

1.  确保在您的手机上启用了调试。这可以从“设置”首选项中完成。

2.  安装安卓 SDK。添加`%ANDROID SDK_INSTALL_PATH%/platform-tools`到您的路径。

3.  如果到目前为止一切正常，请插入手机并从命令行执行以下命令。

    `adb devices`

    您应该会看到您的设备已列出。

4.  在 Eclipse 中安装 Android 开发者工具插件。

5.  创建/导入您的项目。

6.  右键单击您的项目，然后从上下文菜单中选择 Debug As --> Android Application

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T00:37:02.370

您的 PC 设备管理器中是否有任何“ADB 接口”设备？如果您使用的是 DDMS，也许 DDMS 后面有一个控制台（cmd.exe）窗口，您可以在那里获取一些日志。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T12:49:31.837

我觉得你没有正确安装sdk。重新安装[http://dl.google.com/android/installer_r18-windows.exe](http://dl.google.com/android/installer_r18-windows.exe)，打开 adb 并更新您想要的特定 sdk 的所有内容。

然后验证您是否在 eclipse>window>preferences>android 中给出了 sdk 的确切位置

然后重启eclipse。

即使您无法打开它然后设置环境变量。为此添加以下**;E:\android-sdk-window\platform-tools;** 在路径中。然后重启windows。

之后尝试**adb devices**，命令提示符下的**adb kill-server**命令。您将能够看到您的设备。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-26T13:12:05.347

在我的电脑上让三星 Galaxy S2 工作时，我也遇到了很多问题。如果我没记错最后我最终安装了三星起亚并通过那里安装了一些驱动程序。然后重新启动计算机，从此再也没有启动起亚。我的手机在命令行中仍然不可见`adb devices`，但现在我可以在 Eclipse 中开发并部署在设备上而没有任何问题。

有时我会失去与设备的连接（例如，如果插入了另一个设备）。然后我需要重新启动 Eclipse，我的设备再次变得可见。

我的一些朋友也分享了其他一些移动设备的USB驱动程序与三星驱动程序冲突（如果我没记错的话是中兴通讯）。他们卸载了中兴驱动程序，然后让三星也运行正常。在尝试 Galaxy S2 之前，请考虑卸载所有其他 USB 驱动程序。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-10T22:38:36.880

我遇到了和你一模一样的问题，我什至因此放弃了 2 个月的开发。我刚刚重新开始，真的需要让这个工作。

我尝试了以上所有方法以及几乎所有上述方法的组合，但仍然失败。

除了卸载旧的 USB 驱动程序（添加删除程序）之外，我没有做任何不同的事情，下次我再次安装时，我使用了 SAMSUNG USB Driver for Mobile Phones V1.3.450.0（较旧的版本比其他帮助论坛上建议的版本，我只是在某个地方偶然得到它，并认为我会尝试它）。下次我将电话插入时，它会执行所有通常的查找 CDC 等操作，但它总是在失败时执行此操作……但随后……它要求 ADB 驱动程序，哇！我很兴奋。我刚刚选择了自动安装，然后就走了。

我仍然已经在运行 PDANet 并且弹出说连接可用。我没有使用它，因为它无论如何都不会安装在我的手机上。

仅供参考，我在手机上有这些设置：

USB调试ON（显然）

允许模拟位置关闭

未知来源开启

我希望这有帮助。

担。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-24T09:13:42.287

您是否在设备上启用了调试模式？这未在您遵循的步骤中列出。转到设置 -> 应用程序 -> 开发 -> 并设置 USB 调试。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-26T09:05:04.740

我的手机有这个：设置 -> SD 卡和手机存储 -> 仅大容量存储（USB 连接模式仅是大容量存储）

确保未选中此选项。如果是你可以启用USB调试和未知来源，它仍然无法工作。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-04-26T10:23:56.950

如果您只需要连接设备进行安装和调试，您可以在插入时手动选择要使用的驱动程序。

不要让windows搜索它，选择I will pick the driver from a list，然后选择android Composite ADB interface。它可能会警告您此驱动程序不匹配，但它可以工作！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-04-30T05:34:26.560

您是否为正在使用的手机安装了正确的 SDK 版本？

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-04-19T19:53:35.413

曾经的一个老问题是：

使用 PC 背面的 USB2.0 端口，而不是 1.0 正面端口。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-04-25T09:20:16.943

I also have samsung Galaxy SII and i face the Same Problem before some days. But now i am able to get debug the app in My SII.

Please follow the steps and make sure that you follow it completely then only you cna able to get debug in your phone.

First select the Option to Install App from Unknown Sources. You will find that option in Setting -> Applicatios -> Unknown sources. Select it as yes.

then Select the Option like USB Debugging. You will find that option in Setting -> Development -> USB debugging. Select it as yes.

Now, Install latest Samsung Kias In your PC. Reboot Your PC, Eclipse and may be Phone also

Now, Try with connecting the Device.

Hope you will get debugging your app in to your phone.

If not then let me know which trouble you get.

Enjoy. :)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-01-05T10:23:08.277

我遇到了和你一样的问题..

我通过这种方式解决了这个问题。

```
1) Right click on my computer and select Manage
2) Then select Device manager..
3) connect your phone (galaxy s2 in my case)
4) I found one device with named "unknown" in sub option I foung my phone name i9100
5) Then right click on that and select update driver software
6) you will see then this.. 
```

![三星安卓ADB接口](../Images/421042dac94883d749d49e6d915adb00.png)

Tadaa....完成:)

希望这对你也有帮助..

# python - 如何为构建生成的脚本添加路径

> ID：10197797
> 
> 赞同：4
> 
> 时间：2012-04-17T19:26:59.770
> 
> 标签：python, path, buildout

在我们的目录中`zc.buildout`使用,生成的脚本如下所示：`zc.recipe.egg``<package>/bin/`

```
#! <python shebang> -S

import sys
sys.path[0:0] = [
    ... # some paths derived from the eggs
    ... # some other paths included with zc.recipe.egg `extra-path`
]

# some user initialization code from zc.recipe.egg `initialization`

# import function, call function 
```

我无法找到一种方法，以*编程* 方式在每个脚本中引入的构造中**添加**路径。`sys.path`这可能吗？

原因：我有一个全局安装的 python 项目版本和本地安装的另一个版本（off-buildout 树）。我希望能够在这两个版本之间切换。

注意：显然，可以使用`zc.recipe.egg`/`initialization`属性添加如下内容：

```
initialization = sys.path[0:0] = [ /add/path/to/my/eggs ] 
```

但是，还有其他方法吗？举例加分！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:51:33.700

最后，我通过创建自己的构建配方获得了一个工作环境，您可以在此处找到该配方：[https](https://github.com/idiap/local.bob.recipe) ://github.com/idiap/local.bob.recipe 。包含配方的文件是这个：[https](https://github.com/idiap/local.bob.recipe/blob/master/config.py) ://github.com/idiap/local.bob.recipe/blob/master/config.py 。在类构造函数中有很多特定于我们软件的检查以及一些额外的改进，但不要为此烦恼。“真肉（TM）”就是上`install()`那个类的方法。它或多或少是这样的：

```
egg_link = os.path.join(self.buildout['buildout']['eggs-directory'], 'external-package.egg-link')
f = open(egg_link, 'wt')
f.write(self.options['install-directory'] + '\n')
f.close()
self.options.created(egg_link)
return self.options.created() 
```

这会成功的。我的外部（基于 CMake）包现在只需创建正确的`.egg-info`文件与它构建的 python 包并行。比，我可以使用上面的配方，像这样使用特定的包安装：

```
[buildout]
parts = external_package python
develop = .
eggs = my_project
       external_package
       recipe.as.above

[external_package]
recipe = recipe.as.above:config
install-directory = ../path/to/my/local/package/build

[python]
recipe = zc.recipe.egg
interpreter = python
eggs = ${buildout:eggs} 
```

如果您想切换安装，只需更改`install-directory`上面的属性。如果您希望使用系统范围内可用的默认安装，只需从文件中完全删除`recipe.as.above`结构即可。`buildout.cfg`Buildout 只会找到不需要任何额外配置的全局安装。卸载也将正常工作。因此，在构建之间切换就可以了。

这是我们在这里使用的完整工作的构建`.cfg`文件：[https ://github.com/idiap/bob.project.example/blob/master/localbob.cfg](https://github.com/idiap/bob.project.example/blob/master/localbob.cfg)

问题是：有没有一种更简单的方法可以在没有这个外部配方的情况下实现同样的效果？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:12:44.783

好吧，您错过的可能是最有用的构建扩展[mr.developer](http://pypi.python.org/pypi/mr.developer)。通常，这个包，比如说`foo.bar`将在某个 repo 中，比如说 git。

你的扩建看起来像

```
[buildout]
extensions = mr.developer

[sources]
foo.bar = git git@github.com:foo/foo.bar.git 
```

如果您没有在 repo 中包含您的包，您可以使用`fs`而不是`git`，请查看文档以获取详细信息。

激活“本地”版本由

```
./bin/develop a foo.bar 
```

停用方式

```
./bin/develop d foo.bar 
```

您还可以做很多其他事情`mr.developer`，请检查一下！

# c - 意外的 C 结构指针大小行为

> ID：10197798
> 
> 赞同：0
> 
> 时间：2012-04-17T19:27:08.133
> 
> 标签：c, pointers, 64-bit

我的代码中有一些奇怪的行为，这似乎是由于使用了通用指针而导致的，尽管我真的完全不确定。我有一个相当标准的结构，如下所示：

```
typedef struct {
  char* name;
  PyAutoCFunc ac_func;
  void (*func)();
  PyAutoType type_id;
  int num_args;
  PyAutoType arg_types[MAX_ARG_NUM];
} func_entry;

static func_entry* func_entries; 
```

我正在存储一个静态指针，指向在堆上分配的这些结构元素的数组。在我创建这个数组的一个新元素并插入它的时候，它的值看起来像这样......

```
func_entry new_fe;
new_fe.name = malloc(strlen(name) + 1);
strcpy(new_fe.name, name);
... // Init rest of struct

func_entries[num_func_entries] = new_fe;
num_func_entries++;

func_entry* fe = &func_entries[num_func_entries-1];

printf("Setting function '%s' at address '%p', name address '%p'\n", name, fe, fe->name); 
```

这输出。

```
>>> Setting function 'graphics_viewport_set_title' at address '0xfe2d40', name address '0xe40fe0' 
```

注意 fe->name 的大小和值。然后我将此指针存储到哈希表中以供稍后检索。在哈希表中，它被存储为一个简单的 void*。后来当我从哈希表中检索指针时，发生了一件奇怪的事情。

```
func_entry* fe = PyAutoHashtable_Get(func_table, c_func_name);

printf("Getting function '%s' at address '%p', name address '%p'\n", c_func_name, fe, fe->name); 
```

哪个输出。

```
>>> Getting function 'graphics_viewport_set_title' at address '0xfe2d40', name address '0x6e6f74656c656b73' 
```

fe 的地址显然已经毫无问题地进出哈希表，但是 fe->name 的大小和地址发生了变化。更奇怪的是，fe->name 的大小与之前不同，甚至与 fe 的大小不同。尝试访问 fe->name 会给我一个段错误，我不确定如何继续。

出于兴趣，当我在具有多个链接库的应用程序中使用代码时，似乎会发生这种情况，我相当确定我正在运行的所有代码都是 64 位的。

我已经在一个单独的应用程序中成功运行了上面的代码，并获得了一个正确的 fe->name 指针（一个较小的指针）。

我也在 Ubuntu Linux 64 位上运行并使用 gcc 进行编译。

这确实是我对 C 的无知的地方，尽管我想象它可能是一百万件事。任何人都可以发光吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:33:41.717

name 的地址看起来像是内存损坏的结果。它是完全未对齐的，这对于 strdup 从堆中返回的地址不太可能。

看起来您超出了您创建的结构的范围。您提到它是在堆上创建的，但在代码中它看起来可能是在堆栈上创建的。这不是在同一个函数中完成的，是吗？函数中第一个块中的代码在运行后面块中的代码之前是否已经存在？一旦您退出该函数，该结构的内存就不再存在，即使您保留了指向它的指针。后来，当您将指针从哈希表中拉出时，内存已被覆盖，并且不再有指向名称的指针。如果您要传递指向结构的指针，请使用 malloc 动态分配它们。它们一直存在，直到您使用 free 明确摆脱它们，而不是在函数结束时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:54:51.307

看起来好像有些东西正在写入该数据结构。`0x6e6f74656c656b73`您看到的指针值确实看起来非常可疑 - 它是 ASCII 的`"noteleks"`，它是`"skeleton"`向后的。也许这可能会让您了解什么正在覆盖您的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T19:48:36.257

Pointers always are of the same size whether its a pointer to a struct or a generic pointer (char * in olden days, void * in ANSI standard.)

Here's a simple example I whipped out so that you could understand structures, pointers (not in detail though but you get the idea.)

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct person {
    char *name;
    int age;
};

void print(void *);

int main()
{
    struct person *david;

    if ((david = (struct person *)malloc(sizeof(struct person))) != NULL) {
        david->name = strdup("David");
        david->age = 40;
        printf("sizeof david = %d, sizeof person = %d\n", sizeof david,
               sizeof(struct person));
        print((void *)david);
    }
}

void print(void *p)
{
    struct person *pp = (struct person *)p;
    printf("sizeof p = %d, sizeof pp = %d\n%s %d\n", sizeof p, sizeof pp,
           pp->name, pp->age);
} 
```

**Output**

```
sizeof david = 8, sizeof person = 16
sizeof p = 8, sizeof pp = 8
David 40 
```

Hope that helps.

# php - 这是将 xml 作为字符串发布的正确方法吗？

> ID：10197802
> 
> 赞同：0
> 
> 时间：2012-04-17T19:27:35.083
> 
> 标签：php, xml

我应该将一些 xml 作为 xml 标记中的字符串发送到 Web 服务。发送的文件显示为“不合规”，所以我只想检查并确保我正确发送它，以便我知道错误是否来自它的发送方式而不是 xml 的实际内容。我正在使用 PHP，所以我使用要发送的 xml 创建了一个字符串，

```
$send_xml = '<?xml version="1.0" encoding="UTF-8"?>
             <myFile><stuff></stuff></myFile>'; 
```

我把它放在外部 xml 中的内容标签之间，如下所示：

```
<content><![CDATA["'.$send_xml.'"]]></content> 
```

这不应该将我的“$send_xml”作为字符串发送吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:35:23.667

您可能要考虑不使用 CDATA 块，因为如果 CDATA 块`$send_xml`本身包含 CDATA 块，则会中断。

相反，您可能想考虑`$send_xml`在将字符串放入 xml 字符串之前对其进行转义。

PHP 可以使用该`htmlentities`函数进行这种转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:36:08.143

我怀疑你的报价太多了。

尝试：

```
<content><![CDATA['.$send_xml.']]></content> 
```

...反而。

（假设您的 PHP 字符串是单引号）您的代码将产生：

```
<content><![CDATA["<?xml version="1.0" encoding="UTF-8"?><myFile><stuff></stuff></myFile>"]]></content> 
```

...它可能应该在哪里：

```
<content><![CDATA[<?xml version="1.0" encoding="UTF-8"?><myFile><stuff></stuff></myFile>]]></content> 
```

...没有用双引号括起来的内部 XML。

或者，这个：

```
<content>'.htmlspecialchars($send_xml, ENT_COMPAT).'</content> 
```

...通过转义内部 XML 中的特殊字符，应该在解析时产生相同的结果。

# c# - 读取 System.Diagnostics.Debug 窗口

> ID：10197804
> 
> 赞同：2
> 
> 时间：2012-04-17T19:27:41.757
> 
> 标签：c#

我有一个[Netduino](http://netduino.com/)，它目前正在向系统输出加速度计数据。诊断。调试窗口。我正在等待邮件中的 USB->232 转换器，以便通过串行端口正确地将设备中的数据获取到我的应用程序中，但我想知道是否有人知道是否可以从调试窗口回到我的应用程序？

**编辑 - 解决方案：** 我在这里为任何想要我的解决方案的人发布这个。我最初认为 Nuf 的回答有效“写入 System.Diagnostics.Debug 的数据可以使用 TraceListener 类捕获。MSDN 有简短的教程如何设置它。” 但我发现监听器只能从它自己的应用程序中获取数据。由于我使用的是 Netduino，调试输出来自不同的程序，这意味着跟踪侦听器无法读取它。所以我找到了一种直接读取输出框中文本的方法。

基于来自 MSDN 的代码：您需要对您的项目进行 3 次引用。它们位于 .Net 参考选项卡中 - EnvDTE、EnvDTE80 和可扩展性。

```
using EnvDTE80;
using EnvDTE;
using Extensibility;

        public static string ReadDebugBox()
        {
            EnvDTE80.DTE2 dte = (EnvDTE80.DTE2)System.Runtime.InteropServices.Marshal.GetActiveObject("VisualStudio.DTE.10.0");
            string data = "";
            OutputWindow ow = dte.ToolWindows.OutputWindow;
            OutputWindowPane owP;

            TextDocument owPTxtDoc;
            EditPoint2 strtPt;

            owP = ow.OutputWindowPanes.Item("Debug");
            owP.Activate();
            owPTxtDoc = owP.TextDocument;

            strtPt = (EditPoint2)owPTxtDoc.StartPoint.CreateEditPoint();
            return strtPt.GetText(owPTxtDoc.EndPoint);
        }

            public static void ClearDebugBox()
            {
                EnvDTE80.DTE2 dte = (EnvDTE80.DTE2)System.Runtime.InteropServices.Marshal.GetActiveObject("VisualStudio.DTE.10.0");
                OutputWindow ow = dte.ToolWindows.OutputWindow;
                OutputWindowPane owP;

                TextDocument owPTxtDoc;
                EditPoint2 strtPt;

                owP = ow.OutputWindowPanes.Item("Debug");
                owP.Activate();

                owP.Clear();
            } 
```

可能有更好的方法，但这只是对我有用的方法，所以我想我会分享它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:03:59.537

可以使用[TraceListener](http://msdn.microsoft.com/en-us/library/system.diagnostics.tracelistener.aspx)类捕获写入 System.Diagnostics.Debug 的数据。MSDN 有简短的[教程](http://msdn.microsoft.com/en-us/library/sk36c28t%28VS.85%29.aspx)如何设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:17:16.283

有两种设置方法，一种是在 app.config 文件中以声明方式进行设置。这样做有很多好处，例如在需要更改时不需要重新编译应用程序。

```
<configuration>
  <system.diagnostics>
    <trace autoflush="false" indentsize="4">
      <listeners>
        <add name="configConsoleListener" 
          type="System.Diagnostics.ConsoleTraceListener" />
      </listeners>
    </trace>
  </system.diagnostics>
</configuration> 
```

或者，您也可以在代码中执行此操作，以将调试跟踪输出到应用程序的控制台窗口。

```
Debug.Listeners.Add(new ConsoleTraceListener()); 
```

# javascript - 防止 iframe 中的恶意 Flash 广告将用户重定向到顶部位置

> ID：10197806
> 
> 赞同：2
> 
> 时间：2012-04-17T19:27:52.547
> 
> 标签：javascript, flash, iframe

我的网站布局如下：

**{主页** *（包含 Flash 广告的 iframe）* **}**

有时恶意 Flash 广告会加载到框架中，并将用户重定向到他们选择的网站。我想他们在 actionscript 中使用 getURL() 函数。

由于我拥有首页以及框架内的页面，因此能够为两者编辑 html，因此无论如何都会阻止 Flash 广告通过 iframe 发送请求以更改顶部位置。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T21:34:18.983

*HTML5 来救援！*

只需将其添加到您的 iframe 中：

```
sandbox="allow-scripts" 
```

此 iframe 沙盒功能可防止 iframe 中的任何内容重定向页面或执行任何顶部框架导航。

您想要的一个值是：

```
allow-scripts - Allows script execution 
```

您不想要的其他三个沙盒选项是：

```
allow-same-origin - Allows the iframe content to be treated as being from the same origin as the containing document
allow-forms - Allows form submission
allow-top-navigation - Allows the iframe content to navigate (load) content from the containing document 
```

完全“沙盒化”的 iframe：

```
sandbox="" 
```

功能齐全的 iframe：

```
sandbox="allow-scripts allow-forms allow-same-origin allow-top-navigation" 
```

（或干脆省略该属性）

# java - java - 如何将 xml 变成超链接？

> ID：10197808
> 
> 赞同：0
> 
> 时间：2012-04-17T19:28:04.077
> 
> 标签：java, swing, hyperlink

> **可能重复：**
> [如何在 JLabel 中添加超链接](https://stackoverflow.com/questions/527719/how-to-add-hyperlink-in-jlabel)

在我的程序中，我正在使用 Lucene 搜索索引并检索文件。我已经为从 Lucene 的搜索中检索到的文档创建了 XML 文件。现在，我想将这些 XML 文件作为超链接并作为搜索结果显示给用户。那就是我希望在用户单击此超链接时打开 XML 文件。任何帮助表示赞赏！？

```
for(int i=0;i<file_count;i++)
 {
  file=str+index[i]+".xml";   

JLabel label = new JLabel(file,JLabel.CENTER );

label.setOpaque(true);
label.setBackground(Color.RED);
panel.add(label) ;

label.addMouseListener(new java.awt.event.MouseAdapter() {
            @Override
public void mouseClicked(java.awt.event.MouseEvent evt) {
if(evt.getClickCount() > 0)
{

Runtime r= Runtime.getRuntime();
   try {
       System.out.println("testing : Inside mouseclicked");
       Process p = r.exec("cmd.exe /c start "+file);
       System.out.println("opened the file");
   } catch (IOException ex) {
System.out.println(ex.getMessage());
System.out.println();
}
}
}
});
 } 
```

这是我制作的代码。在这种情况下，我想在屏幕“file_count”上得到输出没有次数。我明白了，但发生的事情是所有链接在单击时都显示相同的文件。帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T21:55:26.423

如果我确实正确理解了您的问题，您希望允许用户打开文件。该类[`Desktop`](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html)（从 JDK1.6 开始可用）允许这样做

```
File fileToOpen = ...;
Desktop desktop = Desktop.getDesktop();
desktop.open( fileToOpen ) 
```

根据您希望向用户呈现的方式，您可以选择`JLabel`带有侦听器的代码，但将 a`JButton`与`ActionListener`. Marko Topolnik 在他的评论中已经建议的[答案](https://stackoverflow.com/questions/527719/how-to-add-hyperlink-in-jlabel)中详细讨论了这两种方法。唯一的区别是他们想打开一个 URL，而你想打开一个文件（因此答案使用`browse`方法而不是类的`open`方法`Desktop`）。

# iphone - 应用程序声音导致 iPod 音乐、Pandora 或 Pod cast 声音停止

> ID：10197814
> 
> 赞同：1
> 
> 时间：2012-04-17T19:28:17.023
> 
> 标签：iphone, objective-c, xcode, audio, avaudioplayer

我们的应用程序中的动作和按钮有不同的声音。我们听到了许多抱怨，即用户的背景音乐在播放我们的声音后立即停止。我们不太确定为什么会这样。这是我们用来切换声音的代码。

```
- (void)playSound:(NSString *)sound {

if ( playSoundPath == nil ) {
    playSoundPath = [[NSBundle mainBundle] pathForResource:sound ofType:@"wav"];
    playSound = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:playSoundPath] error:NULL];
    playSound.delegate = self;
}else{
    playSoundPath = nil;
    [playSound release];
    playSoundPath = [[NSBundle mainBundle] pathForResource:sound ofType:@"wav"];
    playSound = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:playSoundPath] error:NULL];
    playSound.delegate = self;
}
BOOL enabled = [[NSUserDefaults standardUserDefaults] boolForKey:@"sounds_key"];
if ( enabled ){
    [playSound stop];
    [playSound play];
}
} 
```

更新：实际上，根据一些用户的建议，我们最终将上述内容更改为以下内容。这允许 iPod 音乐或播客继续播放，并且我们的声音可以在不停止背景声音的情况下播放。这可以通过将我们的声音设置为“环境”声音来实现。这需要您添加“AudioToolBox”框架并使用以下内容将此框架导入您的类中，

```
#import <AudioToolbox/AudioToolbox.h> 
```

这是我们现在使用的代码，

```
BOOL enabled = [[NSUserDefaults standardUserDefaults] boolForKey:@"sounds_key"];
if ( enabled ){

    AudioSessionInitialize(NULL, NULL, NULL, self);
    UInt32 category = kAudioSessionCategory_AmbientSound;
    AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(category), &category);  
    AudioSessionSetActive(YES);

    NSString *path = [NSString stringWithFormat:@"%@/%@.wav",[[NSBundle mainBundle] resourcePath], sound];

    SystemSoundID soundID;

    NSURL *filePath = [NSURL fileURLWithPath:path isDirectory:NO];

    AudioServicesCreateSystemSoundID((CFURLRef)filePath, &soundID);

    AudioServicesPlaySystemSound(soundID);

} 
```

# c# - 如何模拟私有只读 IList 使用最小起订量的财产

> ID：10197819
> 
> 赞同：2
> 
> 时间：2012-04-17T19:28:37.077
> 
> 标签：c#, moq, nbuilder

我试图模拟这个列表：

```
private readonly IList<MyClass> myList = new List<MyClass>(); 
```

使用这个（如此处所示[）](https://stackoverflow.com/questions/1454186/mocking-virtual-readonly-properties-with-moq)：

```
IList<MyClass> mockList = Builder<MyClass>.CreateListOfSize(5).Build();
mockObj.SetupGet<IEnumerable<MyClass>>(o => o.myList).Returns(stakeHoldersList); 
```

但是在运行时我得到一个 InvalidCastException：

```
Unable to cast object of type 'System.Collections.Generic.List`1[MyClass]' to
type 'System.Collections.ObjectModel.ReadOnlyCollection`1[MyClass]'. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T19:33:09.093

**好吧，我认为模拟私有实现细节很奇怪，而且坦率地说是错误的。您的测试不应依赖于私有实现细节。**

但如果我是你，我会这样做的方式是添加一个构造函数：

```
public Foo {
    private readonly IList<MyClass> myList;
    public Foo(IList<MyClass> myList) { this.myList = myList; }
} 
```

然后使用 Moq 模拟一个实例`IList<MyClass>`并将其传递给构造函数。

如果你不喜欢这个建议，或者，创建一个虚拟属性：

```
public Foo {
    private readonly IList<MyClass> myList = new MyList();
    public virtual IList<MyClass> MyList { get { return this.myList; } }
} 
```

然后使用 Moq 覆盖该属性。

**不过，你做错了。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:35:24.693

您有一个字段，但试图设置一个属性获取。

将 myList 更改为 property*可以*工作（这里不是 moq 专家）：

```
private readonly IList<MyClass> myListFiled = new List<MyClass>();
private IList<MyClass> myList {
  get 
   {return myListFiled;}
} 
```

# vb.net - 为什么我不能将 DataLabel.Position 设置为 xlLabelPositionCustom？

> ID：10197822
> 
> 赞同：1
> 
> 时间：2012-04-17T19:28:51.383
> 
> 标签：vb.net, excel, charts, excel-2007

我正在使用 vb.net 和 excel 2007 为自己创建一些图表。我想将数据标签位置设置为自定义值，因为上面的默认位置 ( `xlLabelPositionAbove`) 会导致标签与错误栏发生冲突，并且一侧的默认选项（例如`xlLabelPositionRight`）可能会将标签留在另一个点或其他错误栏上。因此，我想将标签设置为一个自定义位置，它与右上角大约成 45 度角（就像在默认上方和右侧位置放置它的中间位置一样）。

起初我尝试通过调整来做到这一点`xlMySeries.Points(index).DataLabel.Top`，`xlMySeries.Points(index).DataLabel.Left`但是我遇到了一个无法描述的错误，导致我相信我没有正确地做事。然后我想尝试设置`xlMySeries.DataLabels.Position = xlLabelPositionCustom`，然后调整顶部和左侧。但是，令我惊讶的是，我什至无法更改`xlMySeries.DataLabels.Position`为`xlLabelPositionCustom`！

每当我尝试将顶部、左侧或位置调整到某些数据标签位置时，我都会得到 HRESULT: 0x80004005 (E_FAIL)，根据我迄今为止使用 excel 的经验，我通常发现这意味着“你做错了”。我不能将位置成员设置为自定义，或仅在上方、左侧、右侧、中心之外的任何内容（因此不是最适合、自定义或任何内部___ 之一）

知道为什么我不能将位置属性设置为我需要的属性或以其他方式更改数据标签的位置吗？我只需要一些方法来将我的数据标签的位置调整为自定义位置（或除上、左、右、中心、底部以外的位置）。提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-09-26T11:26:01.617

您只能设置您可以在“数据标签”属性窗口中看到的位置。

# ftp - 需要能够将数据从 NFS 传输到 FTP

> ID：10197826
> 
> 赞同：0
> 
> 时间：2012-04-17T19:29:01.783
> 
> 标签：ftp, ssh, nfs, tunnel

这是一个混乱的情况，我可能（在允许的情况下）不解释为什么我需要这样做，但我确实需要它（如果可能的话）。

M1、M2 和 M3 都是 Linux。

我在世界的一侧有一台机器 M1，它使用 ssh 连接到 M2。在 M2 上执行的命令会创建一个大 zip 文件，该文件必须通过 FTP 传输到 M3。

要求文件**必须**在发送到 M3 之前从 M2 发送到 M1。是的，如果我可以将它从 M2 转移到 M3，它会更快更简单，但这不是一个选择。

是否可以设置一些东西，允许将文件从 M2 复制到 M1 上的某个位置，这样出现在那里的任何文件都会自动通过 FTPd 直接传输到 M3？

从 M2 到 M3 的传输可以是常规的 cp 命令，因为 M2 上的位置是从 M1 可见的 NFS 挂载点。除了通过 FTP 之外，无法访问 M3。

有没有我可以使用的魔法 ssh 隧道咒语？或者还有其他建议吗？底线是命令源自 M1，但传输**必须**是从 M1 到 M3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:42:17.053

您可以使用 inotify 来触发 ftp 和 cp。

检查[https://github.com/seb-m/pyinotify](https://github.com/seb-m/pyinotify)添加你的钩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:36:19.763

1) FTP 处理文件和目录。NFS 导出文件和目录。

您的目标是弄清楚如何使用文件和目录。甚至不要*想像*“隧道”这样的废话，除非你绝对必须这样做。

2) 尽可能启用 NFS，在不能使用 NFS 的地方使用 ftp。我想在不能使用 FTP 的地方使用信鸽、量子文件传输或心灵感应；）

3) 一种用于协调多个远程主机之间的文件传输的常见、简单、技术含量低的方法是创建和删除“标记文件”。您是否考虑过简单地轮询标记文件？

4) 尝试在具有最佳连接性的主机上进行最多处理。例如，M2 和 M1？

# javascript - 字符转义：从 Python 字符串文字到 JSON，然后到 HTML

> ID：10197832
> 
> 赞同：0
> 
> 时间：2012-04-17T19:29:23.733
> 
> 标签：javascript, python, html, json, escaping

我设计了一个 JSON 对象，用作将 AJAX 响应发送回我的 Web 应用程序客户端的格式。我正在通过将html代码放入其中来增强它。但是由于我缺乏关于该主题的精确知识和经验，所需的字符转义让我感到相当不舒服。

我使用 Python/Django 作为我的服务器端语言/框架。为了从 Python 字符串文字到浏览器使用的适当 HTML 节点，我对字符转义的模糊知识，我想我需要两个阶段的字符转义：

1.  将 Python 字符串文字序列化为 JSON，并根据 JSON 的要求对字符进行转义。
2.  在客户端收到 JSON 对象后，按照 HTML 的要求对字符进行转义。请注意，我使用 jQuery。

我对上述两个阶段的看法是否正确？如果是这样，我怎样才能实现它们？

如果你用一个例子来解释更容易。这是一个：

```
s = '<a href="http://www.foo.com/bar/">"Click Here&Here"</a>' 
```

其中`s`是 Python 字符串文字。我想看到它变成

```
<a href="http://www.foo.com/bar/">"Click Here&amp;Here"</a> 
```

在 HTML 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:36:02.197

你需要在客户端逃避它吗？您可以在将其编码为 JSON 之前在 Python 中执行此操作：

```
from cgi import escape
from json import dumps

ajax_response = dumps(escape('<a href="http://www.example.com/path/location'
                             '?query=string&more=this#anchor">'
                             'FooBar & Friends</a>')) 
```

# c# - 如何关闭忘记的连接？

> ID：10197835
> 
> 赞同：1
> 
> 时间：2012-04-17T19:29:43.620
> 
> 标签：c#, sqldatareader, sqlconnection

我创建了一个连接和一个 SqlReader 但忘记关闭它们：

```
SqlConnection conn = new SqlConnection("connection info");
conn.Open();

string sql = "SQL command HERE";
SqlCommand cmd = new SqlCommand(sql, conn);
SqlDataReader reader = cmd.ExecuteReader(); 
```

现在，当尝试再次运行代码时，它总是给我这个错误：

```
System.InvalidOperationException: There is already an open DataReader associated with this Command which must be closed first. 
```

该[链接](http://blogs.msdn.com/b/spike/archive/2009/08/20/there-is-already-an-open-datareader-associated-with-this-command-which-must-be-closed-first-explained.aspx)告诉我如何正确打开和关闭连接，但没有解释如何关闭仍在运行的连接。

我尝试关闭电脑，尝试查看 SQL 服务器上的数据库选项（发现没有用）...我更改了代码以关闭连接和阅读器（它已编译并运行，但问题仍然存在改回代码后）。

如何关闭这个“幽灵”连接？有没有办法（蛮力）关闭所有正在运行的连接？

* * *

**[编辑：]**我无法真正解决问题。解决方法是添加`MultipleActiveResultSets=true`到连接字符串

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T19:32:04.900

**我不认为你可以访问 ghost object**，为了将来，只要`using`在可能的地方使用构造：

```
using(SqlConnection conn = new SqlConnection("connection info"))
{
   conn.Open();

   string sql = "SQL command HERE";
   SqlCommand cmd = new SqlCommand(sql, con);
   SqlDataReader reader = cmd.ExecuteReader();
....
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T19:31:24.310

将创建包装在一个[`using`语句中](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)- 这将始终确保连接关闭：

```
using(SqlConnection conn = new SqlConnection("connection info"))
{
   // your code
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T19:38:24.030

所有这些答案都告诉你如何避免这个问题，但他们没有解释问题是什么。

SqlDataReader 提供*只进*数据访问，这意味着一旦你使用它并完成，你必须关闭创建一个新的。[有关详细说明，请参阅此博客](http://blogs.msdn.com/b/spike/archive/2009/08/20/there-is-already-an-open-datareader-associated-with-this-command-which-must-be-closed-first-explained.aspx)。基本上，如果您不关闭 DataReader，那么在引擎盖下它将保持打开，专用于该连接和命令。

正如其他人所说，最好确保关闭所有资源。

```
using (SqlConnection connection = new SqlConnection("...")) {
    connection.Open();

    string sql = "SQL command HERE";

    using (SqlCommand cmd = new SqlCommand(sql, con))
    using (SqlDataReader reader = cmd.ExecuteReader()) {
            // do your stuff
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T20:01:18.960

查看所有答案，它们似乎告诉您如何避免该问题。

如果我没记错的话，您的意思是客户端（您的 PC）和服务器（sql 服务器）上都存在连接，因为您忘记关闭它，并且您担心它会永远挂在那里。

将您与服务器的连接视为电话交谈。我可以挂断你的电话，但你的手机需要几秒钟才能意识到连接丢失。你可能会坐在那里想知道我是否挂断了电话，或者只是停止说话。你真的不知道。当连接未正确关闭时，这就是服务器上发生的情况。（在较旧的固定电话上，您可以将电话挂断并无限期地捆绑线路。）

通过在代码中关闭连接，您实际上是在告诉服务器在关闭您自己的连接之前关闭它们的连接端。如果您无法关闭连接，它将在程序退出或重新启动时关闭，但服务器可能会坐在那里并打开连接。（想想有人坐在那里想知道“他刚刚挂断了我吗？”）

如果我没记错的话，你想要的是在 SQL 服务器端关闭它。（让他们“挂断电话”。）

重新启动后，它***完全***关闭。它应该在服务器上自行清除。

但是，如果您想自己执行此操作，您可以在代码端使用以下信息在服务器上清除它：[您如何终止与 SQL Server 2005 数据库的所有当前连接？](https://stackoverflow.com/questions/11620/how-do-you-kill-all-current-connections-to-a-sql-server-2005-database)

一种更简单的方法是在 SQL Server Management Studio 中执行此操作，如下所述：http: [//www.mikebevers.be/blog/2009/07/kill-open-sql-processes-connections/](http://www.mikebevers.be/blog/2009/07/kill-open-sql-processes-connections/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T19:33:25.583

说实话，即使您“关闭”或“处置”连接，它也不会真正消失，除非您在连接字符串中明确禁用池。但是，您可以这样做

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.clearpool.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.clearpool.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-02T11:51:05.460

我知道这是一篇旧帖子，这可能对任何人都没有帮助。但是我看到了一个机会，可以发布我在这个问题上看到的错误。

首先，您正在创建一个名为 conn 的 SqlConnection，但在名为 cmd 的 SqlCommand 中，您将 con 称为连接。这是个问题：

```
SqlConnection conn = new SqlConnection("connection info");
conn.Open();

string sql = "SQL command HERE";
SqlCommand cmd = new SqlCommand(sql, con);
SqlDataReader reader = cmd.ExecuteReader(); 
```

这可能是它给你错误的原因：

```
System.InvalidOperationException: There is already an open DataReader associated with this Command which must be closed first. 
```

其次，要在完成后关闭 conn，请使用：

```
conn.Close(); 
```

第三，要关闭您使用的 SqlDataReader：

```
reader.Close(); 
```

但是您刚刚将 SqlDataReader 分配给了 reader。您从未真正打开过 SqlDataReader。要打开它，请使用：

```
reader.Read(); 
```

或者：

```
while (reader.Read())
{
    // Code
} 
```

现在是一种在打开和关闭连接和 SqlDataReader 时初始化它们的正确方法：

```
using (SqlConnection conn = new SqlConnection(sqlConnectionString))
{
    conn.Open();

    using (SqlCommand cmd = new SqlCommand())
    {
        cmd.Connection = conn;
        cmd.CommandText = "SELECT * FROM TableName;";

        SqlDataReader reader = cmd.ExecuteReader();

        reader.Read();

        if (reader.HasRows)
        {
            strCol1 = reader.GetValue(0).ToString();
        }

        reader.Close();
  }

  conn.Close();
} 
```

# html - 如何使用html5样板？

> ID：10197845
> 
> 赞同：6
> 
> 时间：2012-04-17T19:30:20.620
> 
> 标签：html, html5boilerplate

我是一个新手网络开发人员。虽然，我了解 html5 样板带来了什么，但我想知道如何扩展/自定义它以在我的所有 html 文件中使用它？

截至目前，它提供了一个 index.html。

1.  那么，创建新 html 文件的约定/方法是什么？
2.  我应该创建一个单独的 html 文件夹吗？
3.  我如何继承 index.html 文件的属性？（复制粘贴？）不能有像 Django 这样的东西可以继承 baseurl 吗？
4.  虽然，我对处理 javascript 和 css 有一些了解，但在处理 html5 样板和跨浏览器兼容性时我还应该注意什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T19:34:38.140

一开始没有真正的押韵或理由来存储你的html文件，因为通常它只是加上一些css文件，或者其他什么。

然而，当你开始真正的开发时，比如前端+后端代码的框架，你会发现为了文件访问控制和命名约定的好处，需要将事物分开为服务器端和公共。

在这种情况下，您最终会得到一个“资产”文件夹，或“公共”文件夹或类似的东西。Boilerplate 倾向于遵循该约定。

为了使样板自动扩展到您的所有 html 文件，您必须将视图文件开发为模块化。

```
 Main template file
 |
 ----header (contains all the references / includes to boilerplate)
 ----content
 ----footer 
```

另外，请注意，此时您的 html 将不再存储为 .html 文件类型；您必须使用能够将文件组合成块的语言。PHP 很好地做到了这一点，如您所知，django 也可以处理。Ruby on rails 等，您需要决定使用哪种语言。否则，组合 html 块的旧方法是服务器端包含（又名 SSI 或 .shtml）

通过让您选择的服务器端语言与您的 Web 服务器的指令一起使用，可以解决基本 url 的问题。对于 apache，您使用 mod_rewrite，然后您可以在 url 中传递一个针对某些类/模型/视图等的 arg。如果您不介意使用 MVC 框架，实际上已经为您解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T22:29:31.203

“您可以在project.properties中覆盖您要操作的文件夹和文件。所有默认配置都在default.properties中。” [http://html5boilerplate.com/docs/Build-script/](http://html5boilerplate.com/docs/Build-script/)

default.properties 在 /build/config

您需要将页面添加到以“file.pages”开头的行，如下所示：

file.pages = new-page.html"

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-10T11:56:21.747

HTML5 Boilerplate 的核心

*   HTML — 默认 HTML 指南。
*   CSS — 默认 CSS 的指南。
*   JavaScript — 默认 JavaScript 指南。
*   .htaccess — 关于 Apache Web 服务器配置的所有信息（另请参阅我们的替代服务器配置）。
*   crossdomain.xml — 介绍如何使用跨域请求。
*   其他一切。

# iphone - iPhone 崩溃日志 - 是什么原因？

> ID：10197851
> 
> 赞同：1
> 
> 时间：2012-04-17T19:30:39.040
> 
> 标签：iphone, objective-c, xcode, crash, crash-log

我没有太多信息什么时候发生的，因为它没有发生在我的手表上。
有谁明白是什么原因？

崩溃日志：

```
OS Version:      iPhone OS 5.0 (9A334)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x80624913
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x37c38fbc objc_msgSend + 16
1   UIKit                           0x32bc8cec -[UIScrollView(UIScrollViewInternal) _scrollViewAnimationEnded] + 128
2   UIKit                           0x0061d7ee -[UIScrollViewAccessibility(SafeCategory) _scrollViewAnimationEnded] + 358
3   CoreFoundation                  0x309f8224 -[NSObject performSelector:withObject:] + 36
4   UIKit                           0x32b84c2a -[UIAnimator stopAnimation:] + 606
5   UIKit                           0x32b845d4 -[UIAnimator(Static) _advance:withTimestamp:] + 260
6   UIKit                           0x32b844c6 -[UIAnimator(Static) _LCDHeartbeatCallback:] + 46
7   QuartzCore                      0x3219a41c CA::Display::DisplayLink::dispatch(unsigned long long, unsigned long long) + 160
8   QuartzCore                      0x3219a372 CA::Display::IOMFBDisplayLink::callback(__IOMobileFramebuffer*, unsigned long long, unsigned long long, unsigned long long, void*) + 54
9   IOMobileFramebuffer             0x3577ff8c IOMobileFramebufferVsyncNotifyFunc + 76
10  IOKit                           0x31d2d88a IODispatchCalloutFromCFMessage + 182
11  CoreFoundation                  0x30a62f3c __CFMachPortPerform + 356
12  CoreFoundation                  0x30a6d54c __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
13  CoreFoundation                  0x30a6d4ee __CFRunLoopDoSource1 + 134
14  CoreFoundation                  0x30a6c33c __CFRunLoopRun + 1364
15  CoreFoundation                  0x309ef4d6 CFRunLoopRunSpecific + 294
16  CoreFoundation                  0x309ef39e CFRunLoopRunInMode + 98
17  GraphicsServices                0x3361dfe6 GSEventRunModal + 150
18  UIKit                           0x32a6173c UIApplicationMain + 1084
19  MyApp                       0x00002304 0x1000 + 4868
20  MyApp                       0x00002298 0x1000 + 4760 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:53:41.683

看起来像一个分段错误。似乎（仅通过观察跟踪）当 UIScrollView 完成滚动动画时会出现一些内存问题。您是否尝试过启用 NSZombies 或设置一个捕捉任何异常的断点？我知道你说它没有在你的手表上发生，但如果你能得到它发生位置的简要描述，也许你可以在 Xcode 中调试它时尝试复制它。

# php - 需要将用户输入过滤为仅字母数字、逗号、句号和空格

> ID：10197854
> 
> 赞同：0
> 
> 时间：2012-04-17T19:30:47.373
> 
> 标签：php, phpunit

我需要将用户输入过滤为仅字母数字、逗号、句号和空格。我实际上在下面尝试了此代码，但其他不需要的字符正在通过。

```
if(!preg_match('/^[,. 0-9A-Za-z]/', $input)
{
   echo "invalid";
} 
```

我怎样才能使输入严格接受上述这些字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:32:24.080

否定字符 ( `^`) 需要进入[字符类](http://php.net/manual/en/regexp.reference.character-classes.php)：

```
if(preg_match('/[^,\. 0-9A-Z]/i', $input))
{
   echo "invalid";
} 
```

# objective-c - 带有多个 MKMapViews 的 UITabBarController

> ID：10197855
> 
> 赞同：1
> 
> 时间：2012-04-17T19:30:54.643
> 
> 标签：objective-c, ios, cocoa-touch, mapkit

我有一`UITabBarController`对夫妇`MKMapViews`。我将如何保持他们的状态彼此持久？我试过设置一个单例模式，但它们仍然是独立的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:55:56.207

我看到了两种可能的解决方案来解决您的问题

1.  您在控制器（可能是单例）中实例化一个（1x `MKMapView`）。假设`AppDelegate`你有一个`MKMapView`例子。

    *   每个选项卡使用一个`UIViewController`实例（因此：许多 UIViewControllers 但控制器中只有一个 MKMapView。
    *   `- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController`您在您的标签栏控制器委托处收听。
    *   当用户更改选项卡时，您将单个 (1x)`MKMapView`放置在出现的 UIViewController 的视图上。
    *   但是在这里您将拥有相同的内容（注释、区域、数据）

2.  您可以同步许多`MKMapView`

    *   侦听 MKMapView 委托（`– mapView:regionWillChangeAnimated:`等）并将值同步到您的其他 MKMapView。您需要通过通知 ( `NSNotification`) 或控制器来执行此操作。
    *   这将为您提供更大的灵活性，您希望同步哪些值以及哪些值必须不同于`MKMapView`to `MKMapView`。

# c# - 控制器上的错误处理

> ID：10197856
> 
> 赞同：0
> 
> 时间：2012-04-17T19:30:59.987
> 
> 标签：c#, jquery, asp.net, asp.net-mvc, uploadify

在我的 MVC 应用程序中，我使用 uploadify 进行文件上传。控制器动作是：

```
[HttpPost]
public ActionResult Upload(HttpPostedFileBase fileData, FormCollection forms)
{
  try
  {                
    if (fileData.ContentLength > 0)
    {
      var statusCode = Helper.UploadList();
      if (statusCode.Equals(System.Net.HttpStatusCode.Created))
      return Json(new { success = true });                      
    }                  
  }
  return Json(new { success = false });        
}
catch (Exception ex)
{       
} 
```

我根据 StatusCode 设置了 success= true/false 并将其传递给 uploadify 的 onComplete 事件（在 .js 文件中）并显示一些有意义的警报。

如果 Helper.UploadList() 抛出如下异常：

```
throw new ArgumentException("Doesn't exist"); 
```

如何在控制器操作中捕获该异常并最终将其传递给 .js 文件，以便向用户显示错误？

**编辑：** 如果我设置 return Json(new { success = false }); 在 catch 块中，该值未达到 onComplete。

```
'onComplete': function (event, queueID, fileObj, response, data) {
                if (response == '{"success":true}') {                    
                    alert("file uploaded successfully.");
                }
                else if (response == '{"success":false}') {
                    alert('file failed to upload. Please try again!');                   
                }
                return false;
            },

    I see this on the UI: 
```

![在此处输入图像描述](../Images/9f88eae667533cd8c2eb6d656920c010.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:39:18.133

你可以考虑返回一个状态码

```
catch(Exception ex)
{
    return new HttpStatusCodeResult(400, "Unexpected error uploading");
} 
```

在你的 js 中

```
$.ajax({
    url: "http://blaa.com/Upload",
    type: "post",
    statusCode: {
        400: function(e) {
            // do whatever
        }
    }
}); 
```

该消息可以在e.statusText中找到，但您必须使用IIS或IIS Express才能看到它，VS开发服务器在调试时不会发送它 - [http://forums.asp.net/post/4180034.aspx](http://forums.asp.net/post/4180034.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T22:09:55.170

你可以更聪明地做到这一点：

```
public class ErrorModel{
    public bool Success{get;set;}
    public string Reason{get;set;}
}

public JsonResult Upload(HttpPostedFileBase fileData, FormCollection forms)
 {
    var model = new ErrorModel { Success = false };
    try
 {                
    if (fileData.ContentLength > 0)
  {
     var statusCode = Helper.UploadList();
    if (statusCode.Equals(System.Net.HttpStatusCode.Created))
    model.Reason = "File uploaded: " + filename;
    model.Success = true;
    return JSon(model);                           
   } else {
     model.REason = "ERROR: failed to upload file";
     return JSon(model);  
   }                  
 }

   }
    catch (Exception ex)
  {  
 model.reason = ex.Message;
 return JSon(model);  
} 
```

javascript:

```
dataTYpe: 'json',
success: function(data){
     if(data.Success){
       } else {
         alert(data.Reason);
      }
} 
```

需要一些额外的工作，并且您需要对文件进行更多检查，但是您会发现以这种方式返回有意义的结果更容易。

# android - ACRA - Stacktrace 未显示行号

> ID：10197857
> 
> 赞同：1
> 
> 时间：2012-04-17T19:31:03.060
> 
> 标签：android, exception, stack-trace, acra

好的，所以我在我的应用程序中设置了[ACRA](http://code.google.com/p/acra/)，以帮助我收集有关我的应用程序可能遭受的随机崩溃的更多信息。

> com.package.SocketHandler.run 处的 java.lang.NullPointerException（未知来源）

我在堆栈跟踪中遇到了这个，通常行号会写在括号之间，但在这种情况下，我什么也得不到。这并不是真的很有帮助，尤其是考虑到异常的性质。

该类`SocketHandler`是我链接到我的 Android 项目的库（jar 文件）的一部分（该 jar 文件也设置为与项目一起导出）。还值得注意的是，这个 jar 文件中包含的类的源代码是使用 ANT 打包在其中的，如下所示：

```
<target name="jar">
    <jar destfile="${WORKSPACE_EXPORT}/mylib.jar">
        <fileset dir="${dir.bin.android}" />
        <fileset dir="${dir.src.android}" />
    </jar>
</target> 
```

所以我的问题是：“我是否遗漏了一些东西，以便在我的 ACRA 报告中获取该外部库中可能发生的错误的行号，因为源已经与它捆绑在一起？”。

谢谢！

**更新：** 我在 zapl 的带领下工作了。我修改了我的 ant 构建文件以在我的库中启用调试信息，如下所示：

```
 <javac 
        debug="true"                   <!-- added this line -->
        debuglevel="lines,vars,source" <!-- and this line -->
        srcdir="${dir.src.android}" 
        destdir="${dir.bin.android}" 
        verbose="false" 
        classpathref="path.class" 
        includeantruntime="false" /> 
```

# python - Python：序列化/反序列化 datetime.time

> ID：10197859
> 
> 赞同：8
> 
> 时间：2012-04-17T19:31:13.330
> 
> 标签：python, datetime

我有一个带有完整时间下拉列表的表单，用 datetime.time 对象表示。

序列化对象的最佳方法是什么？例如：

```
<option value="${time.serialize()}">${time.isoformat()}</option> 
```

然后在另一端反序列化它？例如：

```
time = datetime.time.deserialize(request.params['time']) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T19:51:07.180

如果你`repr`是一个`datetime.time`对象，Python 会给你`isoformat`. 当`repr`s 尝试成为其对象的序列化版本时，这很好地表明它是您应该使用的值。

```
import datetime

timestring = datetime.datetime.now().time().isoformat()

timeobj = datetime.datetime.strptime(timestring, "%H:%M:%S.%f").time() 
```

# android - SocialLib 错误创建 TwitterConnector

> ID：10197860
> 
> 赞同：0
> 
> 时间：2012-04-17T19:31:16.790
> 
> 标签：android, facebook, twitter, twitter-oauth

这是代码，什么是相关的。我定义了密钥、秘密和回调变量。我正在使用这些库版本：SocialLibBeta2_2.jar、signpost-core-1.2.1.2.jar、signpost-commonshttp4-1.2.1.2.jar、scribe-0.6.7-SNAPSHOT.jar。

```
import com.expertiseandroid.lib.sociallib.connectors.SocialNetworkHelper;
import com.expertiseandroid.lib.sociallib.connectors.TwitterConnector;
import com.expertiseandroid.lib.sociallib.exceptions.NotAuthentifiedException;
import com.expertiseandroid.lib.sociallib.model.twitter.TwitterUser;

import java.io.IOException;

import javax.xml.parsers.ParserConfigurationException;

import org.scribe.oauth.Token;
import org.xml.sax.SAXException;

import oauth.signpost.exception.OAuthCommunicationException;
import oauth.signpost.exception.OAuthExpectationFailedException;
import oauth.signpost.exception.OAuthMessageSignerException;
import oauth.signpost.exception.OAuthNotAuthorizedException;

public void SendTweet()
{
TwitterConnector twitter = SocialNetworkHelper.createTwitterConnector(CONS_KEY, CONS_SEC, CALLBACK);

try {
        twitter.requestAuthorization(this);
    } catch (OAuthMessageSignerException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (OAuthNotAuthorizedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (OAuthExpectationFailedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (OAuthCommunicationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        twitter.authorize(this);
    } catch (OAuthMessageSignerException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (OAuthNotAuthorizedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (OAuthExpectationFailedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (OAuthCommunicationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    Token at = twitter.getAccessToken();
    String token = at.getToken(); 
    String secret = at.getSecret();

    Token myAccessToken = new Token(token, secret);
    twitter.authentify(myAccessToken);

    try {
        twitter.tweet("Test tweet");
    } catch (OAuthMessageSignerException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (OAuthExpectationFailedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (OAuthCommunicationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (NotAuthentifiedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }   
} 
```

这是错误：

```
04-17 19:05:18.958: E/AndroidRuntime(932): FATAL EXCEPTION: main
04-17 19:05:18.958: E/AndroidRuntime(932): java.lang.NoSuchMethodError: oauth.signpost.commonshttp.CommonsHttpOAuthProvider.retrieveRequestToken
04-17 19:05:18.958: E/AndroidRuntime(932):  at com.expertiseandroid.lib.sociallib.connectors.TwitterConnector.requestAuthorization(TwitterConnector.java:287)
04-17 19:05:18.958: E/AndroidRuntime(932):  at com.sirva.mymc.JournalActivity.SendTweet(JournalActivity.java:247)
04-17 19:05:18.958: E/AndroidRuntime(932):  at com.sirva.mymc.JournalActivity$1$1.onClick(JournalActivity.java:135)
04-17 19:05:18.958: E/AndroidRuntime(932):  at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:873)
04-17 19:05:18.958: E/AndroidRuntime(932):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
04-17 19:05:18.958: E/AndroidRuntime(932):  at android.widget.ListView.performItemClick(ListView.java:3513)
04-17 19:05:18.958: E/AndroidRuntime(932):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
04-17 19:05:18.958: E/AndroidRuntime(932):  at android.os.Handler.handleCallback(Handler.java:587)
04-17 19:05:18.958: E/AndroidRuntime(932):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-17 19:05:18.958: E/AndroidRuntime(932):  at android.os.Looper.loop(Looper.java:130)
04-17 19:05:18.958: E/AndroidRuntime(932):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-17 19:05:18.958: E/AndroidRuntime(932):  at java.lang.reflect.Method.invokeNative(Native Method)
04-17 19:05:18.958: E/AndroidRuntime(932):  at java.lang.reflect.Method.invoke(Method.java:507)
04-17 19:05:18.958: E/AndroidRuntime(932):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-17 19:05:18.958: E/AndroidRuntime(932):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-17 19:05:18.958: E/AndroidRuntime(932):  at dalvik.system.NativeStart.main(Native Method) 
```

正在爆炸的 TwitterConnector 函数如下所示：

```
public void requestAuthorization(Context ctx) throws OAuthMessageSignerException, OAuthNotAuthorizedException, OAuthExpectationFailedException, OAuthCommunicationException 
{
  String authUrl = httpOauthprovider.retrieveRequestToken(httpOauthConsumer, callback);
  ctx.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(authUrl)));
}

protected TwitterConnector(String consumerKey, String consumerSecret, String callback){
  this(consumerKey, consumerSecret, callback, "");
}

protected TwitterConnector(String consumerKey, String consumerSecret, String callback, String twitPicKey){
  this.authentified = false;
  this.reader = new TwitterReader();
  this.twitPicKey = twitPicKey;
  this.callback = callback;
  httpOauthConsumer = new CommonsHttpOAuthConsumer(consumerKey, consumerSecret);
  httpOauthprovider = new CommonsHttpOAuthProvider(TWITTER_REQUEST, TWITTER_ACCESS, AUTHORIZE);

} 
```

这是一个快速测试应用程序，以确保没有其他库有问题

```
package com.test;

import android.app.Activity;
import android.os.Bundle;
import com.expertiseandroid.lib.sociallib.connectors.SocialNetworkHelper;
import com.expertiseandroid.lib.sociallib.connectors.TwitterConnector;
import com.expertiseandroid.lib.sociallib.exceptions.NotAuthentifiedException;
import com.expertiseandroid.lib.sociallib.model.twitter.TwitterUser;

import java.io.IOException;

import javax.xml.parsers.ParserConfigurationException;

import org.scribe.oauth.Token;
import org.xml.sax.SAXException;

import oauth.signpost.exception.OAuthCommunicationException;
import oauth.signpost.exception.OAuthExpectationFailedException;
import oauth.signpost.exception.OAuthMessageSignerException;
import oauth.signpost.exception.OAuthNotAuthorizedException;

public class TestActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    String CONS_KEY = "xxxxxxxxxxxxxxxxxxx";
    String CONS_SEC = "xxxxxxxxxxxxxxxxxxxxxxxxxx";
    String CALLBACK = "http://xxxx.com";

    TwitterConnector twitter = SocialNetworkHelper.createTwitterConnector(CONS_KEY, CONS_SEC, CALLBACK);

    try {
        twitter.requestAuthorization(TestActivity.this);
    } catch (OAuthMessageSignerException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (OAuthNotAuthorizedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (OAuthExpectationFailedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (OAuthCommunicationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        twitter.authorize(this);
    } catch (OAuthMessageSignerException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (OAuthNotAuthorizedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (OAuthExpectationFailedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (OAuthCommunicationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    Token at = twitter.getAccessToken();
    String token = at.getToken(); 
    String secret = at.getSecret();

    Token myAccessToken = new Token(token, secret);
    twitter.authentify(myAccessToken);

    try {
        twitter.tweet("Test tweet");
    } catch (OAuthMessageSignerException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (OAuthExpectationFailedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (OAuthCommunicationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (NotAuthentifiedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }   
}

} 
```

运行这个时我得到同样的错误。TestActivity.this 是一个有效的上下文，我可以访问方法 requestAuthorization 但它再次显示 NoSuchMethodError。测试项目中包含的库：commons-codec-1.6.jar、scribe-0.6.6.jar（也试过 0.6.7）、signpost-commonshttp4-1.2.1.2.jar、signpost-core-1.2.1.2.jar、路标-jetty6-1.2.1.2.jar，SocialLibBeta2_2.jar。

这也是清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.test"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />

<uses-permission android:name="android.permission.INTERNET"></uses-permission>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".TestActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:37:12.563

我选择只使用 Scribe。SocialLib 给我带来了太多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:37:02.560

我认为您错过了应该包含在项目中的 lib，这就是为什么您会收到此错误的原因，您应该从[此处](http://code.google.com/p/oauth-signpost/downloads/list)下载这 3 个库并同时下载[此](https://github.com/fernandezpablo85/scribe/downloads)lib，否则您将再次获得另一个异常

# android - 仅在单击时使用对 Web 服务的异步调用填充 Spinner

> ID：10197861
> 
> 赞同：0
> 
> 时间：2012-04-17T19:31:21.460
> 
> 标签：android, asynchronous, android-activity, android-spinner

我的 Android Activity 类中有一些微调器需要使用来自 Web 服务的数据进行填充。我已经设置了调用 Web 服务调用的方法。Web 服务返回数据并对其进行解析后，我将相应的数据填充到`ArrayList`我的类的成员中。问题是我不知道如何仅在用户选择特定微调器时调用这些调用。例如，我使用以下代码进行绑定`countrySpinner`：

```
 countrySpinner = (Spinner) findViewById(R.id.spinner_country);

    List<String> list= new ArrayList<String>();

    list.add("All"); // <-- initial/default content

    countryAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);
    countryAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    countrySpinner.setAdapter(countryAdapter); 
```

默认值为“All”，这很好，因为这是 Web 服务的默认行为。但是，我想`callSpinnerWS()`在用户触摸微调器时调用该方法，然后通过修改成员`countryAdapter`以使列表更符合我的喜好再次填充其数据`countryAdapter.clear()`，然后遍历不同的数组列表以添加项目。

我在哪里调用 Web 服务？完成此操作的适当绑定事件是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:46:48.190

我建议使用 AsyncTask，你将 webservice 代码放在 doInBackground 中，它应该返回对列表元素集合的引用，它将返回到 onPostExecute，它将清除并重新填充适配器集合。实际上，使用工作线程是避免 ANR（android 无响应）异常的必要条件。在 onPreExecute() 中，您可以显示进度对话框，并在 onPostExecute 中将其关闭。

调用 AsyncTask 执行应放置在微调器单击侦听器中。您可以参考给定的微调器或参考其适配器来初始化 AsyncTask 的实例。

# php - 如何避免常见头文件中的断开链接

> ID：10197862
> 
> 赞同：0
> 
> 时间：2012-04-17T19:31:24.143
> 
> 标签：php, contextpath

我有一个通用的 header.php，几乎包含在网站的每个页面中。我在 header.php 文件中有指向不同资源的相对链接。一旦我将它包含在位于根文件夹下不同子文件夹中的其他页面中，一些链接就会断开。我可以将 header.php 中的所有链接设为绝对链接。现在又出现了另一个问题：如果您将应用程序移动到另一个域并将其放在 wwwroot 下的某个位置，那么绝对链接将不起作用。我无法在 PHP 中找到一种方法来提取作为此应用程序根的 URL 部分。我最终为应用程序根定义了一个变量，并在 header.php 中的每个链接前面加上这个变量。这样，当这个应用程序从一个地方移动到另一个地方时，我只需要更改一个变量。

我想知道是否有其他更好的方法来处理这种情况。

您的反馈将不胜感激。

**编辑：**希望收到更多反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:45:52.947

你把它写成一个普通的 header.php 文件，就像使用中心变量一样，你可以使用`<base>`HTML 元素——但这仅限于 HTML。

您可以自己创建一个映射函数，该函数能够将绝对 URLS 解析为请求 URI，或者能够将相对 URLS 解析为它们所产生的上下文，以便它们可以再次绝对相对于请求 URI 映射。

然后你可以实现一个输出过滤器，它自己处理 URI，你可以为特殊处理做一些特殊的前缀。

# coldfusion - Coldfusion-9 修剪值

> ID：10197870
> 
> 赞同：3
> 
> 时间：2012-04-17T19:31:51.507
> 
> 标签：coldfusion, coldfusion-9

我正在尝试编写一个代码，该代码采用一个包含 3 部分 (www).(domainname).(com) 的 URL，并完全修剪第一部分。

到目前为止，我有这段代码可以检查左侧是否没有“www”或“dev”进入并设置`siteDomainName = removecharsCGI.SERVER_NAME,1,2);`

```
if (numHostParts eq 3 and listfindnocase('www,dev',left(CGI.SERVER_NAME,3)) eq 0) {
        siteDomainName = removecharsCGI.SERVER_NAME,1,2); 
```

上面代码的问题是只删除 2 个字符，我需要它删除所有字符，直到`numHostParts eq 2`或至少直到第一个“。”

另一个例子是：

akjnakdn.example.com 我需要代码来删除包含点的 URL 的第一部分 (akjnakdn.)

此代码将帮助我在网站上的一些查询停止粉碎，因为它们与#URL# 相关，并且当#URL# 是假的时，我收到`cform query returned zero records`导致我的联系表单停止工作的错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T20:10:09.563

你可以只使用`listRest`. 它返回列表中的所有元素，第一个元素除外。文档在这里[http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6d87.html](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6d87.html)

例子：

```
<cfscript>
name = cgi.server_name;
if (listlen(name,".") gte 3) {
  name = listRest(name,".");
}
</cfscript> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T19:49:03.950

你可以这样做：

```
<cfscript> 
    local.nameArr = ListToArray(CGI.SERVER_NAME, '.');
    if (ArrayLen(local.nameArr) gt 2) {
        ArrayDeleteAt(local.nameArr, 1);
    }
    siteDomainName = ArrayToList(local.nameArr, '.');
</cfscript> 
```

我已将服务器名称拆分为以句点为分隔符的数组元素。如果元素的数量大于两个，则删除第一个元素。然后将其转换回以句点为分隔符的列表。

更新

正如 Robb 所建议的，通过跳过数组转换过程，这可以更简洁并且性能更好：

```
<cfscript> 
    siteDomainName = CGI.SERVER_NAME;
    if (ListLen(siteDomainName, '.') gt 2) {
        siteDomainName = ListDeleteAt(siteDomainName, 1, '.');
    }
</cfscript> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T20:19:52.703

I would use a regular expression, since you only want to "trim" certain subdomains (`www`,`dev`).

```
<cfset the_domain = REReplaceNoCase(cgi.SERVER_NAME, "(www|dev)\.", "") /> 
```

Just use a `|`-delimited list of subdomains you want to trim within the parentheses.

# django - Django 基于文件的会话不会过期

> ID：10197880
> 
> 赞同：2
> 
> 时间：2012-04-17T19:32:59.233
> 
> 标签：django, session

我刚刚意识到，当我使用基于文件的会话引擎时，我的会话不会过期。查看基于文件的会话的 Django 代码，Django 不会为会话存储任何过期信息，因此除非手动删除会话文件，否则它永远不会过期。

这对我来说似乎是一个错误，因为数据库支持的会话工作正常，我相信无论后端开发人员选择什么会话，它们都应该表现得相似。

切换到数据库支持的会话对我来说不是一个选项，因为我需要将用户的会话存储在文件中。

任何人都可以发光吗？这真的是一个错误吗？如果是，你建议我如何解决它？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T20:44:35.387

所以看起来你是对的。至少在 django 1.4 中，使用`django.contrib.sessions.backends.file`完全忽略`SESSION_COOKIE_AGE`. 我不确定这是否真的是一个错误，或者只是没有记录。

如果你真的需要这个功能，你可以基于 contrib 中的文件后端创建你自己的会话引擎，但是用过期功能扩展它。

打开`django/contrib/sessions/backends/file.py`并添加以下导入：

```
import datetime
from django.utils import timezone 
```

然后，在方法中添加两行`load`，使其如下所示：

```
def load(self):
    session_data = {}
    try:
        session_file = open(self._key_to_file(), "rb")
        if (timezone.now() - datetime.datetime.fromtimestamp(os.path.getmtime(self._key_to_file()))).total_seconds() > settings.SESSION_COOKIE_AGE:
            raise IOError
        try:
            file_data = session_file.read()
            # Don't fail if there is no data in the session file.
            .... 
```

这实际上将比较会话文件上的最后修改日期以使其过期。

将此文件保存在您的项目中的某处并将其用作您的`SESSION_ENGINE`而不是`'django.contrib.sessions.backends.file'`

`SESSION_SAVE_EVERY_REQUEST`如果您希望会话根据不活动状态超时，您还需要在设置中启用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:58:14.263

一个选项是`tmpwatch`在存储会话的目录中使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-29T04:40:41.743

我遇到了类似的问题`Django 3.1`。就我而言，我的程序在检查会话到期之前`set_expiry(value)`使用整数参数（数据类型）调用该函数。`int`

根据[Django 文档](https://docs.djangoproject.com/en/3.1/topics/http/sessions/#django.contrib.sessions.backends.base.SessionBase.set_expiry)，参数的数据类型`value`可以`set_expiry()`是`int`,`datetime`或`timedelta`. 但是，对于基于文件的会话，只有在预先将参数传递给的情况下，[内部的到期检查`load()`](https://github.com/django/django/blob/302caa40e4caab7d95ef7d0a88a90f935039ab09/django/contrib/sessions/backends/file.py#L92)才能正常工作，并且此类问题不会发生在.`int``set_expiry()``datetime``timedelta``set_expiry()`

简单的解决方案（解决方法？）是避免`int`参数`set_expiry(value)`，您可以通过子类化`django.contrib.sessions.backends.file.SessionStore`和覆盖来做到这一点`set_expiry(value)`（下面的代码示例），并`SESSION_ENGINE`相应地更改参数`settings.py`

```
from datetime import timedelta
from django.contrib.sessions.backends.file import SessionStore as FileSessionStore

class SessionStore(FileSessionStore):
    def set_expiry(self, value):
        """ force to convert to timedelta format """
        if value and isinstance(value, int):
            value = timedelta(seconds=value)
        super().set_expiry(value=value) 
```

**注意**：传递`timedelta`或也`datetime`可以`set_expiry(value)`，但您需要[处理`datetime`object](https://stackoverflow.com/a/54468299/9853105)的序列化问题。

# javascript - 是否有一个 jQuery 选择器来寻找不存在的子字符串？

> ID：10197882
> 
> 赞同：2
> 
> 时间：2012-04-17T19:33:13.087
> 
> 标签：javascript, jquery, jquery-selectors

目前，以下允许我为 #container div 下的所有 id 附加一个处理程序，其中包含“test”：

```
$('#container').delegate("input[id*='test']", 'click', function(event) {
    // code
} 
```

有没有办法做同样的事情，但要寻找所有没有测试的身份证？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T19:35:29.467

用于[`:not`](http://api.jquery.com/not-selector/)否定`id*='test'`选择器：

```
$('#container').delegate("input:not([id*='test'])", 'click', function(event) {
    //code
} 
```

# c# - 在 C# 中更新日期字段

> ID：10197886
> 
> 赞同：0
> 
> 时间：2012-04-17T19:33:20.433
> 
> 标签：c#

我在一个类中使用一种方法，它从文本文件中读取每一行。文本文件在标题区域包含一个日期字段。

其他行项目包含一些帐户信息。该代码从每个行项目中读取数据。我想根据行项目中的帐户代码更新日期。但是，只要找到下面显示的帐户代码之一，我只想更新一次日期。就我而言，每当代码找到任何这些帐户代码时，它都会更新日期。

假设标题日期是“04/12/2012”，第一个行项目的帐户代码是“140901”，那么它将更新日期为“04/10/2012”。
现在，如果第二行项目包含帐户代码“141202”，它会再次将日期更新为“04/08/2012”，依此类推。日期应更新为“2012 年 4 月 10 日”并停止更新，即使它找到一些其他帐户代码。

请让我知道我做错了什么。

```
 public void UpdateDate(HeaderRecord _header, AccountSeries accountCode)
 {
     DateTime date = _header.Date;

     bool dateChanged = false;

     if (!dateChanged)
     {
         if (accountCode.Code == "140901" || accountCode.Code == "141202" ||
             accountCode.Code == "141207" || accountCode.Code == "141303" || 
             accountCode.Code == "141301" || accountCode.Code == "141001" ||
             accountCode.Code == "141004" || accountCode.Code == "141003" || 
             accountCode.Code == "141005" )     
         {
             if (!CalendarValidatorHelper.Helper(date.AddDays(-2.0)))
             {
                 if (!CalendarValidatorHelper.Helper(date.AddDays(-3.0)))
                 {
                     date = date.AddDays(-3.0);
                     _header.Date = date;
                     dateChanged = true;
                 }
                 else if (!CalendarValidatorHelper.Helper(date.AddDays(-4.0)))
                 {
                     date = date.AddDays(-4.0);
                     _header.Date = date;
                     dateChanged = true;
                 }
                 else if (!CalendarValidatorHelper.Helper(date.AddDays(-5.0)))
                 {
                     date = date.AddDays(-5.0);
                     _header.Date = date;
                     dateChanged = true;
                 }
             }
             else
             {
                 date = date.AddDays(-2.0);
                 _header.Date = date;
                 dateChanged = true;
             }
         }
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:35:57.927

看起来您只需要测试您要分配的新日期是否小于当前日期。

IE

```
 date = date.AddDays(-3);

 if(_header.Date < date)
 {
     _header.Date = date;
     dateChanged = true;
 } 
```

# eclipse - 无需部署 EAR

> ID：10197887
> 
> 赞同：0
> 
> 时间：2012-04-17T19:33:20.867
> 
> 标签：eclipse, websphere, maven-plugin, rad

将现有 Maven 项目导入 Eclipse 工作区后，尝试将 EAR 部署到 WebSphere 失败，并出现错误，即找不到可以部署的资源。

我发现其中一个具有“动态 Web 模块”方面的项目在 Eclipse 中变成了“实用程序模块”。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:19:47.237

假设您使用 maven-eclipse-plugin 将项目导入 Eclipse，那么您需要[启用 WTP 支持](http://maven.apache.org/plugins/maven-eclipse-plugin/wtp.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T00:31:36.557

原来我错过了“WTP 的 Maven 集成”。

# sql-server - 视图内的 T-SQL 长时间运行查询

> ID：10197891
> 
> 赞同：0
> 
> 时间：2012-04-17T19:33:23.777
> 
> 标签：sql-server, tsql

我有一个具有相当复杂查询的视图（见下文）。然后我使用这个视图将数据插入到另一个表中。我在数据库中有很多数据，当我运行插入查询时，它运行了 8 个小时，最后才进行实际插入。似乎它首先从视图中获取所有结果，然后才将它们插入到我的表中。是否可以让它分别插入每条记录？

这是视图：

```
CREATE VIEW [dbo].[Enrollment]
AS
WITH CTE AS (SELECT     RN = ROW_NUMBER() OVER (PARTITION BY PRIMARYPROVIDERCODE, CLIENTNUMBER
                               ORDER BY PRIMARYPROVIDERCODE, CLIENTNUMBER, STARTINGDATE), ID, PRIMARYPROVIDERCODE, CLIENTNUMBER, STARTINGDATE, ENDINGDATE
FROM         AUTHORIZE
WHERE     DOCREVNO = 0 AND CMT = 'N'
GROUP BY PRIMARYPROVIDERCODE, CLIENTNUMBER, STARTINGDATE, ENDINGDATE, ID)
    SELECT     [Current Row].ID, [Current Row].RN, [Current Row].PRIMARYPROVIDERCODE, [Current Row].CLIENTNUMBER, [Current Row].STARTINGDATE, 
                            ENDINGDATE =
                                (SELECT     TOP 1 [Next Ending].ENDINGDATE
                                  FROM          CTE[Next Ending]
                                  WHERE      [Next Ending].RN >= [Current Row].RN AND [Next Ending].ENDINGDATE IS NOT NULL AND 
                                                         [Next Ending].PRIMARYPROVIDERCODE = [Current Row].PRIMARYPROVIDERCODE AND 
                                                         [Next Ending].CLIENTNUMBER = [Current Row].CLIENTNUMBER
                                  ORDER BY [Next Ending].RN)
     FROM         CTE[Current Row] INNER JOIN
                            CTE[Previous Row] ON ([Previous Row].PRIMARYPROVIDERCODE = [Current Row].PRIMARYPROVIDERCODE AND 
                            [Previous Row].CLIENTNUMBER = [Current Row].CLIENTNUMBER) AND (([Previous Row].RN = [Current Row].RN AND [Current Row].RN = 1) OR
                            ([Previous Row].RN = [Current Row].RN - 1 AND [Previous Row].ENDINGDATE IS NOT NULL)) 
```

这是插入查询：

```
INSERT INTO [dbo].[clientenrollment]
           ([DOCSERNO]
           ,[DOCREVNO]
           ,[USERID]
           ,[SIGNED]
           ,[TIMESTAMP]
           ,[ClientNumber]
           ,[enrollmentdate]
           ,[terminationdate]
           ,[PrimaryProviderCode]
           ,[Action]
           ,[Providername]
           ,[SERVICEMAPCODE])
SELECT REPLACE(STR(6620100322000000 + row_number() over (order by ev.ID asc), 17, 0), ' ', '0')
           ,0
           , NULL
           , 0
           , GETDATE()
           ,ev.CLIENTNUMBER
           ,ev.STARTINGDATE
           ,ev.ENDINGDATE
           ,ev.PRIMARYPROVIDERCODE
           ,auth.ACTION
           ,p.PROVIDERNAME
           ,ms.MapCode  
FROM [dbo].[Enrollment] AS ev
JOIN AUTHORIZE auth ON auth.ID = ev.ID
LEFT JOIN MasterService ms ON ms.Code = auth.SERVICECODE
LEFT JOIN PROVIDER p ON p.PROVIDERCODE = ev.PRIMARYPROVIDERCODE
WHERE p.DOCREVNO = 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:44:08.640

> 是否可以让它分别插入每条记录

是和不是。

它已经分别插入每条记录，但它只在最后提交。有时，如果您使用脏读，在很长的插入中，您可以看到在单个很长的插入中行数增加。在提交之前，通常没有其他事务可以看到记录，因为这是 ACID 的事情，整个事务可以回滚。

至于它如何确定要插入的行取决于执行计划。因为您有一些排序 (ORDER BY) 和一些常见的表表达式，所以确定行可能需要一段时间，而且很可能大部分操作正在确定要插入的行（可能在此操作期间假脱机到临时存储) 然后它们被非常迅速地插入。

通过以某种方式分解您的操作，可以在单个事务中插入单行。当然，如果操作停止，您可能只完成了整个操作的一部分。

或者，我认为 8 小时对于运行这样的查询来说太长了，并且鉴于您没有提到任何关于索引策略或任何表中的行数或执行计划的内容，我会先看看那些事物并了解它们。

您是否有关于 PRIMARYPROVIDERCODE、CLIENTNUMBER、STARTINGDATE 的索引？另请注意，WHERE 子句：DOCREVNO = 0 AND CMT = 'N' 可能也需要在该索引中排在第一位。查看执行计划以了解发生了什么。即使您无法访问生产环境，生产 DBA 也应该能够为您提供执行计划。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T21:06:04.330

您的部分问题是在这里使用视图是一个糟糕的主意。您必须生成整个视图，然后加入视图中的表并向下过滤。我要做的第一件事就是放弃视图。然后我会放弃相关的子查询，因为它们必须逐行运行，并且你会在连接中从派生表中获得更好的性能。我没有时间详细讨论并弄清楚你想要完成什么，但我会指出，当你必须如此努力地完成某件事时，你的数据库结构通常会出现设计问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T19:43:49.833

如果要逐行插入，可以在 SQL 中使用 Cursor

以下是一些参考资料

[http://www.mssqltips.com/sqlservertip/1599/sql-server-cursor-example/](http://www.mssqltips.com/sqlservertip/1599/sql-server-cursor-example/)

[http://blog.sqlauthority.com/2008/11/20/sql-server-simple-use-of-cursor-to-print-all-stored-procedures-of-database/](http://blog.sqlauthority.com/2008/11/20/sql-server-simple-use-of-cursor-to-print-all-stored-procedures-of-database/)

[http://www.jackdonnell.com/articles/SQL_CURSOR.htm](http://www.jackdonnell.com/articles/SQL_CURSOR.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T19:52:28.403

我会第二次告诉 Cade Roux，它似乎比我预期的优化查询运行时间要长 8 小时，您当然应该检查表上的索引。

我还要补充一点，也许简化 JOIN 子句和子查询 WHERE/隐式 JOIN 子句可能是值得的。您可以通过使用 RANK() 函数对相似的行进行分组，然后加入这些组号而不是您当前使用的多个列来做到这一点。

不保证是完美的，但像这样：

```
CREATE VIEW [dbo].[Enrollment]
AS
WITH CTE AS (SELECT     GN = RANK() OVER (ORDER BY PRIMARYPROVIDERCODE, CLIENTNUMBER) , RN = ROW_NUMBER() OVER (PARTITION BY PRIMARYPROVIDERCODE, CLIENTNUMBER
                               ORDER BY PRIMARYPROVIDERCODE, CLIENTNUMBER, STARTINGDATE), ID, PRIMARYPROVIDERCODE, CLIENTNUMBER, STARTINGDATE, ENDINGDATE
FROM         AUTHORIZE
WHERE     DOCREVNO = 0 AND CMT = 'N'
GROUP BY PRIMARYPROVIDERCODE, CLIENTNUMBER, STARTINGDATE, ENDINGDATE, ID)
    SELECT     [Current Row].ID, [Current Row].RN, [Current Row].PRIMARYPROVIDERCODE, [Current Row].CLIENTNUMBER, [Current Row].STARTINGDATE, 
                            ENDINGDATE =
                                (SELECT     TOP 1 [Next Ending].ENDINGDATE
                                  FROM          CTE[Next Ending]
                                  WHERE      [Next Ending].RN >= [Current Row].RN AND [Next Ending].ENDINGDATE IS NOT NULL AND 
                                                         [Next Ending].GN = [Current Row].GN
                                  ORDER BY [Next Ending].RN)
     FROM         CTE[Current Row] INNER JOIN
                            CTE[Previous Row] ON ([Previous Row].GN = [Current Row].GN) AND (([Previous Row].RN = [Current Row].RN AND [Current Row].RN = 1) OR
                            ([Previous Row].RN = [Current Row].RN - 1 AND [Previous Row].ENDINGDATE IS NOT NULL)) 
```

在类似的情况下，我用这种方法将小时+查询变成了分钟+查询，但是当然每种情况都不同......

# javascript - iPad JavaScript 错误没有帮助

> ID：10197895
> 
> 赞同：10
> 
> 时间：2012-04-17T19:33:28.580
> 
> 标签：javascript, jquery, ios

我收到以下错误和 iPad，但在桌面浏览器中没有：

```
JavaScript: Error
undefined
TypeError: 'undefined' is not a function 
```

这是一个更大的 js 应用程序，这个错误消息完全没有帮助。有什么方法可以获取错误的行号或更多信息吗？

更新：这变得很时髦。

```
line : 0    
page : undefined
desc : TypeError: 'undefined' is not a function
chr  : undefined 
```

用户代理是否在 FF 和 safari 中进行了欺骗。没有错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-17T19:40:37.957

您可以尝试注册一个自定义错误处理程序`window.onerror`

```
window.onerror = function (desc,page,line,chr)
{ alert('Line:'+line); } 
```

`desc`= 错误消息
`page`= 发生错误的文件/页面
`line`= 嗯...
`chr`= 行中错误的字符位置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T19:41:09.780

如果您将错误处理程序绑定到 window.onerror，它应该为您提供行号，例如

```
window.onerror = function(msg,url,line) {
   alert('The error is on line '+line);
} 
```

这个问题：[在 iPad 上调试 JavaScript 错误](https://stackoverflow.com/questions/7834407/debug-javascript-errors-on-ipad)似乎表明您也可以启用调试。

但是，如果脚本是动态加载的，那么在任何环境中都很难获得此类信息。

# php - 给定一个 Unix 时间戳，如何获得那一天的开始和结束？

> ID：10197900
> 
> 赞同：85
> 
> 时间：2012-04-17T19:33:53.123
> 
> 标签：php, timestamp, strtotime, unix-timestamp

我有一个像这样的 Unix 时间戳：

```
$timestamp=1330581600 
```

我如何获得该时间戳的一天的开始和一天的结束？

```
e.g.
$beginOfDay = Start of Timestamp's Day
$endOfDay = End of Timestamp's Day 
```

我试过这个：

```
$endOfDay = $timestamp + (60 * 60 * 23); 
```

但我认为它不会起作用，因为时间戳本身并不是一天的确切开始。

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2012-04-17T19:39:23.213

strtotime 可用于快速切断小时/分钟/秒

```
$beginOfDay = strtotime("today", $timestamp);
$endOfDay   = strtotime("tomorrow", $beginOfDay) - 1; 
```

也可以使用 DateTime，但需要一些额外的步骤才能从长时间戳中获取

```
$dtNow = new DateTime();
// Set a non-default timezone if needed
$dtNow->setTimezone(new DateTimeZone('Pacific/Chatham'));
$dtNow->setTimestamp($timestamp);

$beginOfDay = clone $dtNow;
$beginOfDay->modify('today');

$endOfDay = clone $beginOfDay;
$endOfDay->modify('tomorrow');
// adjust from the start of next day to the end of the day,
// per original question
// Decremented the second as a long timestamp rather than the
// DateTime object, due to oddities around modifying
// into skipped hours of day-lights-saving.
$endOfDateTimestamp = $endOfDay->getTimestamp();
$endOfDay->setTimestamp($endOfDateTimestamp - 1);

var_dump(
    array(
        'time ' => $dtNow->format('Y-m-d H:i:s e'),
        'start' => $beginOfDay->format('Y-m-d H:i:s e'),
        'end  ' => $endOfDay->format('Y-m-d H:i:s e'),
    )
); 
```

随着 PHP7 中增加的时间延长，如果使用`$now <= $end`此检查，可能会错过一秒钟。`$now < $nextStart`除了在 PHP 的时间处理中减去秒数和夏令时的奇怪之处外，使用检查可以避免这种差距。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-01-04T18:07:59.563

# 只是日期时间

```
$beginOfDay = DateTime::createFromFormat('Y-m-d H:i:s', (new DateTime())->setTimestamp($timestamp)->format('Y-m-d 00:00:00'))->getTimestamp();
$endOfDay = DateTime::createFromFormat('Y-m-d H:i:s', (new DateTime())->setTimestamp($timestamp)->format('Y-m-d 23:59:59'))->getTimestamp(); 
```

首先创建一个 DateTime 对象，并将时间戳设置为所需的时间戳。然后对象被格式化为字符串，将小时/分钟/秒设置为一天的开始或结束。最后，从该字符串创建一个新的 DateTime 对象并检索时间戳。

# 可读

```
$dateTimeObject = new DateTime();
$dateTimeObject->setTimestamp($timestamp);
$beginOfDayString = $dateTimeObject->format('Y-m-d 00:00:00');
$beginOfDayObject = DateTime::createFromFormat('Y-m-d H:i:s', $beginOfDayString);
$beginOfDay = $beginOfDayObject->getTimestamp(); 
```

我们可以使用这个更长的版本以另一种方式结束一天：

```
$endOfDayObject = clone $beginOfDayOject(); // Cloning because add() and sub() modify the object
$endOfDayObject->add(new DateInterval('P1D'))->sub(new DateInterval('PT1S'));
$endOfDay = $endOfDayOject->getTimestamp(); 
```

# 时区

也可以通过在格式中添加时间戳指示符来设置时区，例如`O`在创建 DateTime 对象后指定时间戳：

```
$beginOfDay = DateTime::createFromFormat('Y-m-d H:i:s O', (new DateTime())->setTimezone(new DateTimeZone('America/Los_Angeles'))->setTimestamp($timestamp)->format('Y-m-d 00:00:00 O'))->getTimestamp(); 
```

# DateTime 的灵活性

我们还可以通过更改指定的第二种格式来获取其他信息，例如月份的开始/结束或小时的开始/结束。对于月份：`'Y-m-01 00:00:00'`和`'Y-m-t 23:59:59'`。小时：`'Y-m-d H:00:00'`和`'Y-m-d H:59:59'`

将各种格式与 add()/sub() 和 DateInterval 对象结合使用，我们可以获得任何时期的开始或结束，尽管需要注意正确处理闰年。

# 相关链接

来自 PHP 文档：

*   [约会时间](http://php.net/manual/en/class.datetime.php "约会时间")
*   带有格式信息的[日期](http://php.net/manual/en/function.date.php "date")
*   [日期时区](http://php.net/manual/en/class.datetimezone.php "日期时区")
*   [日期间隔](http://php.net/manual/en/dateinterval.construct.php "日期间隔")

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-17T19:38:54.750

您可以使用`date()`和的组合`mktime()`：

```
list($y,$m,$d) = explode('-', date('Y-m-d', $ts));
$start = mktime(0,0,0,$m,$d,$y);
$end = mktime(0,0,0,$m,$d+1,$y); 
```

`mktime()`在指定月份之外的一天（1 月 32 日将是 2 月 1 日等）时，足够聪明地包装几个月/年

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-17T19:36:29.153

您可以将时间转换为当前数据，然后使用 strtotime 函数查找一天的开始，然后简单地添加 24 小时来查找一天的结束。

您还可以使用余数运算符 (%) 来查找最近的日期。例如：

```
$start_of_day = time() - 86400 + (time() % 86400);
$end_of_day = $start_of_day + 86400; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-10-18T14:41:13.290

不幸的是，由于在非常特定的情况下发生的 php 错误，已接受的答案中断了。我将讨论这些场景，但首先使用 DateTime 来回答。这与接受的答案之间的唯一区别出现在以下`// IMPORTANT`行之后：

```
$dtNow = new DateTime();
// Set a non-default timezone if needed
$dtNow->setTimezone(new DateTimeZone('America/Havana'));
$dtNow->setTimestamp($timestamp);

$beginOfDay = clone $dtNow;

// Go to midnight.  ->modify('midnight') does not do this for some reason
$beginOfDay->modify('today');

// now get the beginning of the next day
$endOfDay = clone $beginOfDay;
$endOfDay->modify('tomorrow');

// IMPORTANT
// get the timestamp
$ts = $endOfDay->getTimestamp();
// subtract one from that timestamp
$tsEndOfDay = $ts - 1;

// we now have the timestamp at the end of the day. we can now use that timestamp
// to set our end of day DateTime
$endOfDay->setTimestamp($tsEndOfDay); 
```

所以你会注意到，我们不是使用`->modify('1 second ago');`我们而是获取时间戳并减去一个。接受的答案使用`modify` *应该可以*工作，但在非常特定的场景中会因为 php 错误而中断。此错误发生在更改夏令时午夜的时区中，即一年中时钟“向前”移动的那一天。这是一个可用于验证该错误的示例。

**错误示例代码**

```
// a time zone, Cuba, that changes their clocks forward exactly at midnight. on
// the day before they make that change. there are other time zones which do this
$timezone = 'America/Santiago';
$dateString = "2020-09-05";

echo 'the start of the day:<br>';
$dtStartOfDay = clone $dtToday;
$dtStartOfDay->modify('today');
echo $dtStartOfDay->format('Y-m-d H:i:s');
echo ', '.$dtStartOfDay->getTimestamp();

echo '<br><br>the start of the *next* day:<br>';
$dtEndOfDay = clone $dtToday;
$dtEndOfDay->modify('tomorrow');
echo $dtEndOfDay->format('Y-m-d H:i:s');
echo ', '.$dtEndOfDay->getTimestamp();

echo '<br><br>the end of the day, this is incorrect. notice that with ->modify("-1 second") the second does not decrement the timestamp by 1:<br>';
$dtEndOfDayMinusOne = clone $dtEndOfDay;
$dtEndOfDayMinusOne->modify('1 second ago');
echo $dtEndOfDayMinusOne->format('Y-m-d H:i:s');
echo ', '.$dtEndOfDayMinusOne->getTimestamp();

echo '<br><br>the end of the day, this is correct:<br>';
$dtx = clone $dtEndOfDay;
$tsx = $dtx->getTimestamp() - 1;
$dty = clone $dtEndOfDay;
$dty->setTimestamp($tsx);
echo $dty->format('Y-m-d H:i:s');
echo ', '.$tsx; 
```

**错误示例代码输出**

```
the start of the day:
2020-03-26 00:00:00, 1585173600

the start of the *next* day:
2020-03-27 01:00:00, 1585260000

the end of the day, this is incorrect. notice that with ->modify("1 second ago") the
second does not decrement the timestamp by 1:
2020-03-27 01:59:59, 1585263599

the end of the day, this is correct:
2020-03-26 23:59:59, 1585259999 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-05-19T06:56:37.260

今天开始日期时间戳。简单的

```
$stamp = mktime(0, 0, 0);
echo date('m-d-Y H:i:s',$stamp); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-22T22:56:23.653

```
$start_of_day = floor (time() / 86400) * 86400;
$end_of_day = ceil (time() / 86400) * 86400; 
```

如果您需要在同一个脚本中的两个值。对于其中一个变量来说，+/- 86400 秒比同时触发 floor 和 ceil 更快。例如：

```
$start_of_day = floor (time() / 86400) * 86400;
$end_of_day = $start_of_day + 86400; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-30T09:29:19.553

对于将来有此问题的任何人：

任何一天的代码

```
<?php
$date = "2015-04-12 09:20:00";

$midnight = strtotime("midnight", strtotime($date));
$now = strtotime($date);

$diff = $now - $midnight;
echo $diff;
?> 
```

当日代码

```
<?php
$midnight = strtotime("midnight");
$now = date('U');

$diff = $now - $midnight;
echo $diff;
?> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-29T13:39:33.740

```
$date = (new \DateTime())->setTimestamp(1330581600);

echo $date->modify('today')->format('Y-m-d H:i:s'); // 2012-02-29 00:00:00
echo PHP_EOL;
echo $date->modify('tomorrow - 1 second')->format('Y-m-d H:i:s'); // 2012-02-29 23:59:59 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-17T13:21:14.810

> ```
>  $startOfDay = new \DateTime('tomorrow');
>     $startOfDay->modify('-1 day'); 
> ```

这对我有用:)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-09T15:55:20.663

聚会有点晚了，但这是实现您正在寻找的另一种简单方法：

```
$timestamp=1330581600;
$format = DATE_ATOM;

$date = (new DateTime())->setTimestamp($timestamp);
// Here's your initial date, created from the timestamp above
// 2012-03-01T06:00:00+00:00
$dateFromTimestamp = $date->format($format);

// This is the beginning of the day
// 2012-03-01T00:00:00+00:00
$startOfDay = $date->setTime(0,0);

// This is the beginning of the next day
// 2012-03-02T00:00:00+00:00
$startOfNextDay = $startOfDay->modify('+1 day'); 
```

除非绝对必要，否则我个人会避免使用一天结束。当然，您可以使用`23:59:59`，但这不是一天的实际结束（还剩 1 秒）。我所做的是使用第二天的开始作为我的结束边界，例如：

```
$start = new DateTime('2021-11-09 00:00:00');
$end = new DateTime('2021-11-10 00:00:00');

if ($someDateTime >= $start && $someDateTime < $end) {
    // do something
} 
```

如果我必须使用一天的结束，我会计算第二天的开始，然后从中减去 1**微秒**。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-18T20:47:42.357

```
$beginOfDay = (new DateTime('today', new DateTimeZone('Asia/Tehran')))->getTimestamp();
$endOfDay   = $beginOfDay + 86399; 
```

您可以通过替换“亚洲/德黑兰”来设置时区。一天是86400秒，不要问我为什么是86399，是我脑海里的一个耳语说是86399，所以我什至不想去想它的真相。

# java - java.lang.NoClassDefFoundError

> ID：10197907
> 
> 赞同：4
> 
> 时间：2012-04-17T19:34:17.520
> 
> 标签：java, android

我目前在手机（2.2 版）上测试我的应用程序时遇到 ArrayDeque class def not found 错误，但是在模拟器（2.3.3）中运行时我没有收到错误消息：

```
java.lang.NoClassDefFoundError: java.util.ArrayDeque 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T19:36:32.050

API 级别 9 中添加了 ArrayDeque 类，因此您无法在 Android 2.2 中使用它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-17T11:37:00.210

我试图在我的应用程序中使用 Retrofit lib（它使用 ArrayDeque，因此我在 Froyo 设备上遇到相同的异常），它在代码中本身不使用 ArrayDeque。我的应用程序有 min api lvl 8，所以我不得不切换到另一个解决方案（loopj android async client 或 aquery），因为 Froyo 不支持 ArrayDeque。
我意识到 Froyo 现在并不是真正的 AOS 版本，但是在我新启动的应用程序中，根据市场上的谷歌统计数据，它有超过 1% 的安装量，所以我不想放弃它的支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T19:39:54.990

如果您查看 Android 的文档[`ArrayDeque`](http://developer.android.com/reference/java/util/ArrayDeque.html)并查看右上角，您会看到它显示“Since: API Level 9”。

将 API 级别与 Android 操作系统版本匹配的方便图表在[这里](http://developer.android.com/guide/appendix/api-levels.html)。API 级别 9 是 Android 2.3-2.3.2

# facebook - Facebook 活动提要不起作用？

> ID：10197913
> 
> 赞同：1
> 
> 时间：2012-04-17T19:34:42.130
> 
> 标签：facebook, facebook-social-plugins

我无法让 facebook 的活动源社交插件工作。几周前我在一个网站上设置了它，它一直运行良好。

上周，我尝试将另一个活动源（来自不同的 FB 页面）设置到不同的网站，但它不起作用。我不断收到此消息：“没有可显示的近期活动。在您的网站上放置一些“喜欢”按钮以吸引您的用户。可以在此处找到详细信息。”

点赞按钮已经设置好，而且很明显最近有活动。

我现在已经在几个不同的网站上尝试过这个，我一直收到同样的信息。

这是脸书的问题吗？任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:07:31.127

我能想到的唯一事情是摆脱 facebook 插件代码并从网站再次获取它，确保 URL 正确。[http://developers.facebook.com/docs/reference/plugins/like-box/](http://developers.facebook.com/docs/reference/plugins/like-box/)

# python - 在 Python 中使用游标

> ID：10197915
> 
> 赞同：2
> 
> 时间：2012-04-17T19:34:54.253
> 
> 标签：python, pyodbc

搜索了网络和这个论坛，不满意。在 Windows XP 上使用 Python 2.7 和 pyODBC。我可以让下面的代码运行并从两个不同的数据库生成两个游标而不会出现问题。理想情况下，我想加入这些结果游标：

```
SELECT a.state, sum(b.Sales) 
FROM cust_curs a 
    INNER JOIN fin_curs b 
    ON a.Cust_id = b.Cust_id 
GROUP BY a.state 
```

有没有办法在 python 或 pyODBC 中使用 SQL 语句加入游标？我需要将这些游标存储在一个通用数据库（SQLite3？）中来完成这个吗？是否有一种纯 Python 数据处理方法可以从这两个游标生成此摘要？

感谢您的考虑。

工作代码：

```
import pyodbc

#
# DB2 Financial Data Cursor
#
cnxn = pyodbc.connect('DSN=DB2_Fin;UID=;PWD=')
fin_curs = cnxn.cursor()

fin_curs.execute("""SELECT Cust_id, sum(Sales) as Sales
                    FROM Finance.Sales_Tbl
                    GROUP BY Cust_id""")

#
# Oracle Customer Data Cursor
#
cnxn = pyodbc.connect('DSN=Ora_Cust;UID=;PWD=')
cust_curs = cnxn.cursor()

cust_curs.execute("""SELECT Distinct Cust_id, gender, address, state  
                    FROM Customers.Cust_Data""") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-10T18:29:11.133

游标只是用于执行 SQL 命令和检索结果的对象。数据不会迁移到新数据库中，因此无法进行连接。如果您想加入数据，您需要将两个表放在同一个数据库中。这是否意味着将表及其数据都放入 SQLite 数据库或以其他方式执行取决于您的用例的具体情况，但这在理论上是可行的。

# javascript - 查找出现次数最多的 DOM 元素

> ID：10197916
> 
> 赞同：2
> 
> 时间：2012-04-17T19:35:03.337
> 
> 标签：javascript, jquery, dom

容器*div.example*可以有不同**的 1 级子**元素（*section*、*div*、*ul*、*nav* ……）。这些元素的数量和类型可能会有所不同。

我必须找到出现最多的直接孩子的类型（例如*div*）。什么是简单的 jQuery 或 JavaScript 解决方案？

jQuery 1.7.1 是可用的，尽管它也应该在 IE < 9 (array.filter) 中工作。

编辑：谢谢@Jasper、@Vega 和@Robin Maben :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:40:19.937

使用`.children()`并记录`element.tagName`您找到的 s 数量：

```
//create object to store data
var tags = {};

//iterate through the children
$.each($('#parent').children(), function () {

    //get the type of tag we are looking-at
    var name = this.tagName.toLowerCase();

    //if we haven't logged this type of tag yet, initialize it in the `tags` object
    if (typeof tags[name] == 'undefined') {
        tags[name] = 0;
    }

    //and increment the count for this tag
    tags[name]++;
}); 
```

现在该对象保存了作为元素的子元素`tags`出现的每种类型标签的数量。`#parent`

这是一个演示： http: [//jsfiddle.net/ZRjtp/](http://jsfiddle.net/ZRjtp/)（查看控制台中的对象）

然后找到出现最多的标签，你可以这样做：

```
var most_used = {
        count : 0,
        tag   : ''
    };

$.each(tags, function (key, val) {
    if (val > most_used.count) {
        most_used.count = val;
        most_used.tag   = key;
    }
}); 
```

该`most_used`对象现在包含使用最多的标签以及使用次数。

这是一个演示：http: [//jsfiddle.net/ZRjtp/1/](http://jsfiddle.net/ZRjtp/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T19:43:16.963

编辑：我认为像下面这样的 jQuery 函数应该更有用..

[**演示**](http://jsfiddle.net/skram/HraSj/6/)

```
$.fn.theMostChild = function() {
    var childs = {};
    $(this).children().each(function() {
        if (childs.hasOwnProperty(this.nodeName)) {
            childs[this.nodeName] += 1;
        } else {
            childs[this.nodeName] = 1;
        }
    });
    var maxNode = '', maxNodeCount = 0;
    for (nodeName in childs) {
        if (childs[nodeName] > maxNodeCount) {
            maxNode = nodeName;
            maxNodeCount = childs[nodeName];
        }
    }
    return $(maxNode);
} 
```

然后你可以，

```
$('div.example').theMostChild().css('color', 'red'); 
```

* * *

像下面这样的函数应该为您提供子元素的数量，您可以从中获得最大数量。见下文， [**演示**](http://jsfiddle.net/skram/HraSj/)

```
$(function () {
    var childs = {};
    $('div.example').children().each(function () {
        if (childs.hasOwnProperty(this.nodeName)) {
            childs[this.nodeName] += 1;
        } else {
            childs[this.nodeName] = 1;
        }
    });

    for (i in childs) {
        console.log(i + ': ' + childs[i]);
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T19:46:51.217

~~如果没有有关预期子节点类型的一些信息，这是不可能的。~~

**编辑**：正如[Jasper](https://stackoverflow.com/users/752738/jasper)指出的那样，我们可能不需要事先知道标签名称。如果您只**在一组特定的选择器中**查找，则以下内容有效。

```
var selectorArray = ['div', 'span', 'p',........]

var matches = $(div).children(selectorArray.join());    
var max = 0, result = [];    
$.each(selectorArray, function(i, selector){

    var l = matches.filter(selector).length;
    if(l > max){
     max = l;
     result[max] = selector;
    }

}); 
```

`result[max]`为您提供标签名称并`max`为您提供出现次数

# android - 如何修复android项目

> ID：10197920
> 
> 赞同：1
> 
> 时间：2012-04-17T19:35:23.597
> 
> 标签：android, eclipse

我有 Eclipse indigo，我可以在其中创建和运行 android 项目，但是每当我在外部导入 android 项目构建时，我都会收到错误，它无法识别 android 特定的东西，它显示错误，我看到它强调了所有来自的东西android 或 java ，例如：它强调 Button,Activity ,MediaPlayer,DatabaseHelper 您在项目中使用或引用的东西。

那么，如何解决它。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:48:55.463

There are some reason for red underline showing (Actually R.java file is not generating successfully) in your imported project.

Now If you are finding this kind of error:

> Android requires compiler compliance level 5.0\. Please fix project properties.

then the solution is

1.  `Package Explorer -> Right click the project -> Android Tools -> Fix Project Properties`
2.  set [Compiler compliance level](https://stackoverflow.com/a/9732077/379693) as mentioned here

OR simply do:

```
Project -> Clean 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:15:41.540

1）转到项目>属性>启用项目特定设置>再次将合规级别设置为1.5，然后再次设置为1.6，下划线错误将得到解决。

2）替代方法是取消选中启用项目特定设置并单击配置工作区设置链接，然后再次将合规级别设置为 1.5，然后再次设置为 1.6，下划线错误将得到解决。

然后构建项目......希望它对你有用......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T19:38:02.673

尝试属性 -> android -> 设置 android 构建目标然后清理你的项目

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T19:38:45.227

选择您的项目-> 项目-> 清理...-> 清理下面选择的项目，选择您导入的项目并立即开始构建，然后按确定。

# java - ye olde“org.hibernate.NonUniqueObjectException”......我被这个难住了

> ID：10197937
> 
> 赞同：0
> 
> 时间：2012-04-17T19:36:14.470
> 
> 标签：java, spring, hibernate

这是错误：

```
org.hibernate.NonUniqueObjectException: a different object with the same identifier value was already associated with the session: [com.project.lmu.data.entity.Company#02K]
    org.hibernate.engine.StatefulPersistenceContext.checkUniqueness(StatefulPersistenceContext.java:638)
    org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performUpdate(DefaultSaveOrUpdateEventListener.java:305)
    org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsDetached(DefaultSaveOrUpdateEventListener.java:246)
    org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:112)
    org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93)
    org.hibernate.impl.SessionImpl.fireSaveOrUpdate(SessionImpl.java:685)
    org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:677)
    org.hibernate.engine.CascadingAction$5.cascade(CascadingAction.java:252)
    org.hibernate.engine.Cascade.cascadeToOne(Cascade.java:392)
    org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:335)
    org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:204)
    org.hibernate.engine.Cascade.cascade(Cascade.java:161)
    org.hibernate.engine.Cascade.cascade(Cascade.java:127)
    org.hibernate.event.def.DefaultSaveOrUpdateEventListener.cascadeOnUpdate(DefaultSaveOrUpdateEventListener.java:376)
    org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performUpdate(DefaultSaveOrUpdateEventListener.java:350)
    org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsDetached(DefaultSaveOrUpdateEventListener.java:246)
    org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:112)
    org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93)
    org.hibernate.impl.SessionImpl.fireSaveOrUpdate(SessionImpl.java:685)
    org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:677)
    org.hibernate.engine.CascadingAction$5.cascade(CascadingAction.java:252)
    org.hibernate.engine.Cascade.cascadeToOne(Cascade.java:392)
    org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:335)
    org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:204)
    org.hibernate.engine.Cascade.cascade(Cascade.java:161)
    org.hibernate.engine.Cascade.cascade(Cascade.java:127)
    org.hibernate.event.def.DefaultSaveOrUpdateEventListener.cascadeOnUpdate(DefaultSaveOrUpdateEventListener.java:376)
    org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performUpdate(DefaultSaveOrUpdateEventListener.java:350)
    org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsDetached(DefaultSaveOrUpdateEventListener.java:246)
    org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:112)
    org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93)
    org.hibernate.impl.SessionImpl.fireSaveOrUpdate(SessionImpl.java:685)
    org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:677)
    org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:673)
    com.project.lmu.data.dao.hibernate.AbstractHibernateDAO.saveOrUpdate(AbstractHibernateDAO.java:172)
    com.project.lmu.data.tx.AbstractTxService.update(AbstractTxService.java:68)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
    org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    $Proxy48.update(Unknown Source)
    com.project.lmu.data.service.impl.CoworkerServiceImpl.genUpdateNomination(CoworkerServiceImpl.java:175)
    com.project.lmu.controller.coworkerNom.CoworkerController.genUpdateNomination(CoworkerController.java:305)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:212)
    org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:125)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) 
```

现在这是失败的方法：

```
public void genUpdateNomination(int nominationId, int statusId, String generalistComment, int generalistId) {
        CoworkerNom nom = coworkerNomTxService.findById(nominationId);
        Status status = statusTxService.findById(statusId);
        if (!(nom.getStatus() == status && nom.getGeneralistComment().equals(generalistComment))) {
            if (statusId == 2) {
                //Approved so do email
            }

            if (statusId == 3) {
                //Does Not Proceed so do email
            }

            if (statusId == 4) {
                //Incomplete so do email
            }

            Employee generalist = employeeTxService.findById(generalistId);

            nom.setGeneralist(generalist);
            nom.setGeneralistComment(generalistComment);
            nom.setStatus(status);
            nom.setUpdatedBy(generalist);
            coworkerNomTxService.update(nom);
        }
    } 
```

现在我把它归结为 entity`Employee`和`Nomination`'s `Nominator`and `Nominee`（它们也是 Employee 对象）。这里是`Nomination`：

```
@Entity(name = "Nomination")
@Table(name = "NOMINATION")
@DiscriminatorColumn(name="CATEGORY_CODE", discriminatorType = DiscriminatorType.STRING, length = 1)
@Inheritance(strategy=InheritanceType.JOINED)

public /*abstract*/ class Nomination extends AuditableEntity {

    @Id
    @Column(name = "NOM_ID", insertable = true, updatable = true,
            nullable = false)
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int id;

    @ManyToOne(fetch = FetchType.EAGER, cascade = {CascadeType.PERSIST, CascadeType.MERGE})
    @JoinColumn(name = "NOMINATOR_ID", referencedColumnName = "EMP_ID")
    @Cascade({org.hibernate.annotations.CascadeType.SAVE_UPDATE,
            org.hibernate.annotations.CascadeType.MERGE})
    private Employee nominator = null;

    @ManyToOne(fetch = FetchType.EAGER, cascade = {CascadeType.PERSIST, CascadeType.MERGE})
    @JoinColumn(name = "GENERALIST_ID", referencedColumnName = "EMP_ID", nullable = true)
    @Cascade({org.hibernate.annotations.CascadeType.SAVE_UPDATE,
            org.hibernate.annotations.CascadeType.MERGE})
    private Employee generalist = null; 
```

这是`Employee`：

```
@Entity(name = "Employee")
@Table(name = "EMPLOYEE")
public class Employee implements Serializable {
    @Id
    @Column(name = "EMP_ID", insertable = true, updatable = false, nullable = false)
    private int id;

    @ManyToOne(fetch = FetchType.EAGER, cascade = {CascadeType.PERSIST, CascadeType.MERGE})
    @JoinColumn(name = "COMPANY_CODE", referencedColumnName = "COMPANY_CODE")
    @Cascade({org.hibernate.annotations.CascadeType.SAVE_UPDATE,
            org.hibernate.annotations.CascadeType.MERGE})
    private Company company = null; 
```

现在这些对象已经在我的应用程序中使用了大量的方法。事实上，为了进入测试/测试用例模式，我刚刚在最后一个方法/添加中遇到了这个错误。

如果我必须粘贴更多方法，请告诉我。我不知道是什么原因造成的。这里唯一的新东西是设置`generalist`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:03:10.590

我在尝试了很多事情后解决了这个问题，但最终的工作是替换这个：

```
 coworkerNomTxService.update(nom); 
```

像`merge()`这样：

```
 coworkerNomTxService.merge(nom); 
```

我在这里发帖，所以希望如果你遇到同样的错误，你会先尝试这种方法。如果不尝试检查 CascadeType 是否设置为 ALL 和。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:06:24.557

我曾经遇到过同样的错误。它以多对一或多对多关系出现，主要原因是一个对象在一个会话中打开，但它在其他会话中被引用到另一个对象。我希望这个[参考](https://stackoverflow.com/questions/1074081/hibernate-error-org-hibernate-nonuniqueobjectexception-a-different-object-with)有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-30T03:04:12.200

我总是做的第一件事是在方法调用`session.getStatistics().getEntityKeys()`之前`session.update()`调用，看看是否有任何重复的对象。如果是，请使用相同的方法进行追踪。

其次，确保您更新的对象的子集合（如果有）没有相同的 id。

希望能帮助到你

# macos - OSX 中目录的最后修改日期

> ID：10197938
> 
> 赞同：7
> 
> 时间：2012-04-17T19:36:15.623
> 
> 标签：macos, shell

如何在终端中获取目录的最后修改日期？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T20:11:15.377

如果您只想获取修改日期（mtime）而不是其他

```
stat --printf='%y\n' directory_name 
```

或者，对于自纪元以来的以秒为单位的日期：

```
stat --printf='%Y\n' directory_name 
```

`ls`这比涉及/ `cut`/ `grep`/ `awk`/`find`等的解决方案更直接、高效和健壮

**编辑**

以上内容是在 OP 在下面的评论中提到这是针对 OSX 之前发布的。

OP 使用`stat`/得出了一个解决方案`date`，我同意该解决方案，所以我在这里添加它。

首先是`stat`

```
stat -f "%m" /path/test.app 
```

获取目录的 mtime，然后将其包装在 a`date`中以获取所需格式

```
date -j -f "%s" "$(stat -f "%m" /path/test.app)" +"%Y/%m/%d %T" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T20:05:21.850

```
ls -lcdoq your_directory | awk '{print $5" "$6}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T19:45:58.613

递归：

```
ls -Rlt | head -n 2 | cut -d ' ' -f10-12 
```

非递归：

```
ls -lt | head -n 2 | cut -d ' ' -f10-12 
```

# ajax - 如何使用 jQuery 和 AJAX 获取/发布/删除/放置信息

> ID：10197944
> 
> 赞同：1
> 
> 时间：2012-04-17T19:36:35.543
> 
> 标签：ajax, jquery

我尝试使用 ajax 和 jquery 执行 DELETE、PUT、GET 和 POST 请求。

POST 方法可以通过创建新记录来很好地工作，但我无法使其与其他方法（PUT、DELETE 和 GET）一起工作。

这是代码（它工作正常，它创建新记录但它没有达到“成功”事件）：

```
var jsonExample = {"advertisement":{"title":"test"}};

$.ajax({
            type: "POST",
            url: "http://example.com/advertisements.json",
            data:jsonExample,
            success: function(response){
                    alert("test");
            }
}); 
```

当我将类型“POST”更改为“DELETE”或“PUT”时，出现以下错误：

> 网络错误：404 未找到

当我将其更改为“GET”时，它会引发以下消息：

> 200 好

但它没有任何其他反应。它应该是这样的：

```
{"advertisement":{"created_at":"2012-04-17T13:20:17Z","from_age":null,"neighbourhood_id":null,"title":null,"date_to":null,"days":null,"promotion_id":null,"updated_at":"2012-04-17T13:20:17Z","date_from":null,"gender":null,"id":3,"display":null,"desc":null,"budget":null,"image":null,"to_age":null,"department_id":null,"town_id":null}} 
```

这

请注意：我的应用程序正在从远程服务器获取此信息，但我不知道这是否与此问题有关。因为我已经在 Google Chrome 中运行了它，并且我在浏览器的控制台上收到了**Access-Control-Allow-Origin**消息。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:58:40.223

出于安全原因，您不能使用 jQuery 进行跨域 AJAX 请求。`jsonp`但是，如果您请求数据的 URL 设置为处理请求，则您可以使用`jsonp`。

这篇文章应该比我能帮助你更多：[http ://www.fbloggs.com/2010/07/09/how-to-access-cross-domain-data-with-ajax-using-jsonp -jquery 和 php/](http://www.fbloggs.com/2010/07/09/how-to-access-cross-domain-data-with-ajax-using-jsonp-jquery-and-php/)

# java - Java 向上移动窗口

> ID：10197945
> 
> 赞同：-2
> 
> 时间：2012-04-17T19:36:44.470
> 
> 标签：java, swing

我在 java 中制作了一个 doodle-jump 风格的游戏，但我无法弄清楚如何在正在玩游戏的 java 容器中“向上移动”。涂鸦人必须从一个壁架跳到另一个壁架，并达到可能的，所以我需要面板在这个人向上移动时平移。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:39:30.837

简而言之：您需要一个离屏图像。将您的图片绘制到屏幕外的图像上，将其复制到屏幕上，然后在上面画出那个人。现在稍微滚动屏幕外图像的内容，用新显示的区域填充空白点，复制到屏幕上，画出那个人。

如果你很聪明，你可以在不实际移动屏幕外图像中的任何内容的情况下执行此操作——你只需更改复制图像的点，然后用屏幕外图像部分的新数据填充空白区域“滚出屏幕”，如果这有任何意义的话。这有点棘手，但性能会更好。

# php - 如何使用 PHP 将多维数组存储到 mysql 中

> ID：10197947
> 
> 赞同：0
> 
> 时间：2012-04-17T19:36:56.287
> 
> 标签：php, mysql, multidimensional-array

我创建了一个名为“test”的数据库并创建了一个名为“biodata”的表。我在生物数据表中创建了 3 个名为“名称”“年龄”和“描述”的列。现在如何将我的数组结果存储到每一列中。

下面是完整的代码...

```
<?php

    $ip = "localhost";
    $username = "root";
    $password = "";
    $dbname = "test";
    $res = mysql_connect($ip,$username,$password);
    if(!$res)
    {
        echo "DB Connection Failed.";
        exit;
    }
    if(!mysql_select_db("test"))
    {
        echo "NOT SELECTED";
        exit;
    }

        $company =  array(
                    'Record1'=>array('Shabbir',26,'Designer'),
                    'Record2'=>array('Burhan',24,'Architecture'),
                    'Record3'=>array('Huzeifa',20,'Accountant'),
                );

        foreach ($company as $employees=>$details){

        echo '<strong>'.$employees.'</strong><br>';

        foreach($details as $employeeinfo){

            echo $employeeinfo.'<br>';

        }

        }

        $sql = "INSERT INTO biodata (Name, Age, Description) VALUES ($employeeinfo[0], $employeeinfo[1], '$employeeinfo[2]')";
        mysql_query($sql);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:50:32.403

你`mysql_query`应该在你的`foreach`陈述中......你还需要清理你的数据，因为`SQL Injection`

你也不需要 2`foreach`声明...

**更正**

```
foreach ($company as $employees =>$details){
    echo '<strong>'.$employees.' - OK</strong><br>';
    mysql_query(sprintf($sql,mysql_real_escape_string($details[0]),mysql_real_escape_string($details[1]),mysql_real_escape_string($details[2])));
} 
```

**完整的剧本安排**

```
$ip = "localhost";
$username = "root";
$password = "";
$dbname = "test";
$res = mysql_connect($ip,$username,$password);
$sql = "INSERT INTO biodata (Name, Age, Description) VALUES ('%s', '%d', '%s')";
$company =  array(
        'Record1'=>array('Shabbir',26,'Designer'),
        'Record2'=>array('Burhan',24,'Architecture'),
        'Record3'=>array('Huzeifa',20,'Accountant'),
);

if(!$res)
{
    echo "DB Connection Failed.";
    exit;
}

if(!mysql_select_db("test"))
{
    echo "NOT SELECTED";
    exit;
}

foreach ($company as $employees =>$details){
    echo '<strong>'.$employees.' - OK</strong><br>';
    mysql_query(sprintf($sql,mysql_real_escape_string($details[0]),mysql_real_escape_string($details[1]),mysql_real_escape_string($details[2])));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:00:42.703

一个旁注。无论您的循环有多小（迭代次数少），都不要在其中放入查询。而是只使用循环来构造一个包含所有数据的复杂查询，然后在循环外执行查询。

**编辑：**您可以在循环中构建的查询示例。

```
INSERT INTO table 
    (name, age, position)
VALUES
   ('Shabbir', 26, 'Designer'),
   ('Burhan', 24, 'Architecture'),
   ('Huzeifa', 20, 'Accountant'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T19:46:25.910

您的 SQL 查询是在错误的地方：

```
foreach ($company as $employees=>$details)
{
    echo '<strong>'.$employees.'</strong><br>';
        foreach($details as $employeeinfo)
        {
            echo $employeeinfo.'<br>';
        }
    $sql = "INSERT INTO biodata (Name, Age, Description) VALUES ($details[0], $details[1], '$details[2]')";
    mysql_query($sql);
} 
```

# python - Linux下Python请求库超时

> ID：10197948
> 
> 赞同：6
> 
> 时间：2012-04-17T19:36:56.397
> 
> 标签：python, python-requests

我正在尝试使用 requests.py 库来调用休息网络服务。我为我在 windows 下的使用编写了一个快速原型，一切正常，但是当我尝试在 linux 下运行相同的原型时，我收到“requests.exceptions.Timeout: Request timed out”错误。有谁知道为什么会发生这种情况？如果我尝试使用该库访问非 https url，它在 windows 和 linux 下都可以正常工作。

```
import requests

url = 'https://path.to.rest/svc/?options'
r = requests.get(url, auth=('uid','passwd'), verify=False)
print(r.content) 
```

我确实注意到，如果我从 get 调用中删除 verify=False 参数，我会得到一个不同的异常，即“requests.exceptions.SSLError: Can't connect to HTTPS URL because the SSL module is not available”。这似乎是一个可能的根本原因，虽然我不知道他们为什么会更改错误代码，但我找不到对 ssl 模块的任何引用，并且我验证了 certifi 已安装。有趣的是，如果我在 windows 中去掉 verify 参数，我会得到一个不同的异常，“requests.exceptions.SSLError: [Errno 1] _ssl.c:503: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed”

编辑：

提到的所有案例/场景的追溯

完整代码如上图：

```
Traceback(most recent call last):
    File "testRequests.py", line 15, in <module>
        r = requests.get(url, auth=('uid','passwd'), verify=False)
    File "build/bdist.linux-x86_64/egg/requests/api.py", line 52, in get
    File "build/bdist.linux-x86_64/egg/requests/api.py", line 40, in request
    File "build/bdist.linux-x86_64/egg/requests/sessions.py", line 208, in request
    File "build/bdist.linux-x86_64/egg/requests/models.py", line 586, in send
requests.exceptions.Timeout: Request timed out 
```

如上所示的代码减去“verify=False”参数：

```
Traceback(most recent call last):
    File "testRequests.py", line 15, in <module>
        r = requests.get(url, auth=('uid','passwd'))
    File "build/bdist.linux-x86_64/egg/requests/api.py", line 52, in get
    File "build/bdist.linux-x86_64/egg/requests/api.py", line 40, in request
    File "build/bdist.linux-x86_64/egg/requests/sessions.py", line 208, in request
    File "build/bdist.linux-x86_64/egg/requests/models.py", line 584, in send
requests.exceptions.SSLError: Can't connect to HTTPS URL because the SSL module is not available 
```

如上所示的代码减去“verify=False”参数并在windows下运行：

```
Traceback(most recent call last):
    File "testRequests.py", line 59, in <module>
        r = requests.get(url, auth=('uid','passwd'))
    File "c:\Python27\lib\site-packages\requests\api.py", line 52, in get
        return request('get', url, **kwargs)
    File "c:\Python27\lib\site-packages\requests\api.py", line 40, in request
        return s.request(method=method, url=url, **kwargs)
    File "c:\Python27\lib\site-packages\requests\sessions.py", line 208, in request
        r.send(prefetch=prefetch)
    File "c:\Python27\lib\site-packages\requests\models.py", line 584, in send
        raise SSLError(e)
requests.exceptions.SSLError: [Errno 1] _ssl.c:503: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:03:08.430

我不是这方面的专家，但似乎无法正确验证来自服务器的证书。我不知道 Python 和 ssl 如何处理证书验证，但第一个选项是尝试忽略异常，或者更改`https`为`http`尝试查看 Web 服务是否允许非安全服务调用。

如果问题是围绕`ssl`. 考虑删除python的包（小心）并使用openssl支持编译它，我个人强烈建议你在删除任何东西之前先查看一个virtualenv，编译Python并不太难，它会给你一个更精细的控制你的目标是做。

# java - 使用@JoinTable 映射时如何指定外键名称？

> ID：10197950
> 
> 赞同：2
> 
> 时间：2012-04-17T19:37:01.740
> 
> 标签：java, oracle, hibernate

我有以下映射：

```
//...
@Table(name="A")
public class A{
    @ManyToMany(fetch = FetchType.LAZY)
    @JoinTable(name = "A_B", joinColumns = {@JoinColumn(name = "A_ID")}, inverseJoinColumns = {@JoinColumn(name = "B_ID")})
    public Set<B> getBs() {
            return this.meals;
        }
    //...
}

//...
@Table(name="B")
public class B{
  private int id;
  private String description;
  //...
} 
```

如何指定表“A_B”中的外键名称？（FK_A_ID 和 FK_B_ID）

提前致谢， Neuquino

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:47:51.447

您可以使用[@ForeignKey](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/annotations/ForeignKey.html)来指定连接表中外键约束的名称。

例如：

```
@ForeignKey(name="FK_A_ID" , inverseName="FK_B_ID")
@JoinTable(name = "A_B", joinColumns = {@JoinColumn(name = "A_ID")}, inverseJoinColumns = {@JoinColumn(name = "B_ID")})
public Set<B> getBs() {
      return this.meals;
} 
```

那么 Table`A_B`的结构如下：

*   一个名为的列`A_ID`，它对表的主键具有外键约束`A`。这个外键的名称是`FK_A_ID`

*   一个名为的列`B_ID`，它对表的主键具有外键约束`B`。这个外键的名称是`FK_B_ID`

# php - 实时接收来自服务器的更改、Server/Ajax-Push、HTML5 Websockets、现成的服务器实现还是什么？

> ID：10197953
> 
> 赞同：4
> 
> 时间：2012-04-17T19:37:17.443
> 
> 标签：php, ajax, html, comet, server-push

我一直在做一个 php 项目，我正在尝试创建一个纸牌游戏。

这显然需要实时更新，因此，在几乎完成了底层服务器逻辑之后，我选择了从服务器获取数据的简单/明显的解决方案——心跳或定期 ajax 请求——并且很高兴看到该页面通过那个工作。

痛苦开始于我开始认为可能有一种不那么“压力”的方式，那时我在这里（和其他网站）发现了一些关于“彗星”和“AJAX PUSH”或“服务器推送”的对话，我读过关于密集。

我在 zeitoun.net 中找到了一个[演示](http://www.zeitoun.net/articles/comet_and_php/start)，它非常简单，而且非常容易让它在我的本地主机上运行。

在我写这个问题时，我已经浏览了“类似问题”面板。老实说，选择哪个选项非常令人困惑。

你会推荐哪个，知道我想确保该网站可以为多达 2000 个用户提供服务，并且我在 Apache 上使用 PHP？

1.  继续使用当前方法，定期客户端 ajax 请求（我已经改进了服务器对此的响应，它实际上大部分时间都没有返回任何内容，除非要发送更改，但我仍然担心每次的点击量第二个服务器将收到）。

2.  在[zeitoun.net](http://www.zeitoun.net/articles/comet_and_php/start)上寻求“好得令人难以置信”的解决方案。

3.  使用[APE](http://www.ape-project.org/)，这将要求我将我的操作系统切换到 Linux（如果它被证明是一个有前途的解决方案，我愿意这样做）。

4.  深入研究[https://stackoverflow.com/questions/4262543/what-are-good-resources-for-learning-html-5-websockets](https://stackoverflow.com/questions/4262543/what-are-good-resources-for-learning-html-5-websockets)并改用 HTML5 Websocket（不管浏览器支持和使用的后备） .

5.  以上都不是？

# facebook - Facebook Graph 为喜欢、标签等提供的空数据

> ID：10197956
> 
> 赞同：1
> 
> 时间：2012-04-17T19:37:33.737
> 
> 标签：facebook, json, facebook-graph-api

1）我想知道为什么 Facebook Graph 为以下对象提供空结果：

（请记住，我有一个具有正确权限的令牌，此外，还有访问这些对象的扩展权限）。

*   标记 - [https://graph.facebook.com/me/tagged](https://graph.facebook.com/me/tagged)或 /{userid}/tagged
*   喜欢
*   活动
*   帐户

产生：{“数据”：[]}

2) Facebook 是否剥夺了我们访问我们自己数据的权限？

3) 哪些对象不能被访问？

4）这是我的扩展/权限

```
<pre>
{
  "data": [
    {
      "installed": 1, 
      "status_update": 1, 
      "publish_checkins": 1, 
      "photo_upload": 1, 
      "video_upload": 1, 
      "sms": 1, 
      "email": 1, 
      "create_event": 1, 
      "create_note": 1, 
      "export_stream": 1, 
      "share_item": 1, 
      "rsvp_event": 1, 
      "read_stream": 1, 
      "publish_stream": 1, 
      "read_mailbox": 1, 
      "ads_management": 1, 
      "read_friendlists": 1, 
      "manage_friendlists": 1, 
      "xmpp_login": 1, 
      "read_insights": 1, 
      "read_requests": 1, 
      "manage_notifications": 1, 
      "manage_pages": 1, 
      "publish_actions": 1, 
      "user_birthday": 1, 
      "user_religion_politics": 1, 
      "user_relationships": 1, 
      "user_relationship_details": 1, 
      "user_hometown": 1, 
      "user_location": 1, 
      "user_likes": 1, 
      "user_activities": 1, 
      "user_interests": 1, 
      "user_education_history": 1, 
      "user_work_history": 1, 
      "user_online_presence": 1, 
      "user_website": 1, 
      "user_groups": 1, 
      "user_events": 1, 
      "user_photos": 1, 
      "user_videos": 1, 
      "user_photo_video_tags": 1, 
      "user_notes": 1, 
      "user_checkins": 1, 
      "user_questions": 1, 
      "user_about_me": 1, 
      "user_status": 1, 
      "user_games_activity": 1, 
      "user_subscriptions": 1, 
      "friends_birthday": 1, 
      "friends_religion_politics": 1, 
      "friends_relationships": 1, 
      "friends_relationship_details": 1, 
      "friends_hometown": 1, 
      "friends_location": 1, 
      "friends_likes": 1, 
      "friends_activities": 1, 
      "friends_interests": 1, 
      "friends_education_history": 1, 
      "friends_work_history": 1, 
      "friends_online_presence": 1, 
      "friends_website": 1, 
      "friends_groups": 1, 
      "friends_events": 1, 
      "friends_photos": 1, 
      "friends_videos": 1, 
      "friends_photo_video_tags": 1, 
      "friends_notes": 1, 
      "friends_checkins": 1, 
      "friends_questions": 1, 
      "friends_about_me": 1, 
      "friends_status": 1, 
      "friends_games_activity": 1, 
      "friends_subscriptions": 1
    }
  ]
}
</pre> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:27:59.190

我检查过它们，我没有看到任何标签（但不确定我是否在过去几天被贴上了标签）。

在[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)进行测试时，其他的对我来说非常适合。那么您确定您的帐户有喜欢/活动以及不止一个帐户吗？因为我只看到我也是所有者的“页面”。

# java - System.err() 上的 Java 线程锁

> ID：10197957
> 
> 赞同：1
> 
> 时间：2012-04-17T19:37:43.517
> 
> 标签：java, multithreading, stderr

我有点困惑。

我有两个线程写入`System.err`（和`System.out`），最终它们被困在线程锁中。真的不是线程安全的`System.err`吗？`System.out`

此时程序的结构是：

*   主线程已经启动了两个`Reader`线程来进行一些处理和打印输出，通过`ThreadPoolExecutor`.
*   一个`Reader`线程（“s3gp-2”）`System.err.format()`在`IOStats`名为`IOStats.add()`.
*   另一个`Reader`被（正确）阻塞的线程试图调用`IOStats.add()`被阻塞的相同方法`System.err.format()`。

请注意，每个`Reader`通常都写入`System.err`和`System.out`。

我应该有一个单独的单例对象来使用同步方法处理所有输出吗？像往常一样，任何见解都非常感谢。

* * *

**更新**

我意识到我应该提供更多上下文：Greenplum DB 的所有 n 段（通过 a `create external web table ... execute prgm`）并行调用 java 程序。锁定行为极为罕见，通常一切顺利。当问题发生时，所有n个进程都被阻塞。我只关注其中一个进行调试。

还有一些注意事项：

1.  有几分钟，我认为我也使用的事实`log4j.Logger`可能会造成麻烦。但是，事实上，该程序没有使用控制台附加程序，所以我不太倾向于认为这是问题所在。
2.  使用`lsof`以及`ls -l /proc/$pid/fd`，我观察到java进程的stderr被阻塞在postgres也读取的管道中。正如一位评论者所建议的那样，这个管道可能实际上并没有被 postgres 排干，并且阻止了`System.err`打印输出。

事实上，这里是相关的行：

```
% lsof | head -1
COMMAND     PID      USER   FD      TYPE             DEVICE       SIZE       NODE NAME
% lsof | grep $pid | grep ' 2w '
java      10047   gpadmin    2w     FIFO                0,6              26854739 pipe
% lsof | grep $pid | grep ' 2w '
java      10047   gpadmin    2w     FIFO                0,6              26854739 pipe
% node=26854739
% lsof | grep $node
postgres  10028   gpadmin   26r     FIFO                0,6              26854739 pipe
sh        10046   gpadmin    2w     FIFO                0,6              26854739 pipe
java      10047   gpadmin    2w     FIFO                0,6              26854739 pipe 
```

* * *

**详细信息：**堆栈转储（jstack -l pid）给了我：

```
2012-04-17 12:23:02
Full thread dump Java HotSpot(TM) 64-Bit Server VM (21.0-b17 mixed mode):

"Attach Listener" daemon prio=10 tid=0x00000000061a3800 nid=0x75c5 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
    - None

"s3gp-2" prio=10 tid=0x00002aaabc207000 nid=0x281f runnable [0x0000000041718000]
   java.lang.Thread.State: RUNNABLE
    at java.io.FileOutputStream.writeBytes(Native Method)
    at java.io.FileOutputStream.write(FileOutputStream.java:318)
    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
    - locked <0x00000000f601c4f8> (a java.io.BufferedOutputStream)
    at java.io.PrintStream.write(PrintStream.java:482)
    - locked <0x00000000f601c4d8> (a java.io.PrintStream)
    at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221)
    at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:291)
    at sun.nio.cs.StreamEncoder.flushBuffer(StreamEncoder.java:104)
    - locked <0x00000000f601c6f0> (a java.io.OutputStreamWriter)
    at java.io.OutputStreamWriter.flushBuffer(OutputStreamWriter.java:185)
    at java.io.PrintStream.write(PrintStream.java:527)
    - locked <0x00000000f601c4d8> (a java.io.PrintStream)
    at java.io.PrintStream.print(PrintStream.java:669)
    at java.io.PrintStream.append(PrintStream.java:1065)
    at java.io.PrintStream.append(PrintStream.java:57)
    at java.util.Formatter$FixedString.print(Formatter.java:2563)
    at java.util.Formatter.format(Formatter.java:2476)
    at java.io.PrintStream.format(PrintStream.java:970)
    - locked <0x00000000f601c4d8> (a java.io.PrintStream)
    at com.foo.serv.util.Loader$IOStats.add(Loader.java:136)
    - locked <0x00000000f6015870> (a com.foo.serv.util.Loader$IOStats)
    at com.foo.serv.util.Loader$Reader.run(Loader.java:199)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

   Locked ownable synchronizers:
    - <0x00000000f6024470> (a java.util.concurrent.ThreadPoolExecutor$Worker)

"s3gp-1" prio=10 tid=0x00002aaabc1fa000 nid=0x281e waiting for monitor entry [0x00000000405d9000]
   java.lang.Thread.State: BLOCKED (on object monitor)
    at com.foo.serv.util.Loader$IOStats.add(Loader.java:129)
    - waiting to lock <0x00000000f6015870> (a com.foo.serv.util.Loader$IOStats)
    at com.foo.serv.util.Loader$Reader.run(Loader.java:199)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

   Locked ownable synchronizers:
    - <0x00000000f601ea50> (a java.util.concurrent.ThreadPoolExecutor$Worker)

"Service Thread" daemon prio=10 tid=0x00002aaab0054000 nid=0x27e7 runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
    - None

"C2 CompilerThread1" daemon prio=10 tid=0x00002aaab0051800 nid=0x27e6 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
    - None

"C2 CompilerThread0" daemon prio=10 tid=0x00002aaab004e800 nid=0x27e4 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
    - None

"Signal Dispatcher" daemon prio=10 tid=0x00002aaab004c000 nid=0x27e3 runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
    - None

"Finalizer" daemon prio=10 tid=0x00002aaab0001000 nid=0x2762 in Object.wait() [0x00000000428cc000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000f6015730> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:135)
    - locked <0x00000000f6015730> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:151)
    at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:177)

   Locked ownable synchronizers:
    - None

"Reference Handler" daemon prio=10 tid=0x0000000005edc800 nid=0x2760 in Object.wait() [0x00000000427cb000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000f603b9c0> (a java.lang.ref.Reference$Lock)
    at java.lang.Object.wait(Object.java:503)
    at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:133)
    - locked <0x00000000f603b9c0> (a java.lang.ref.Reference$Lock)

   Locked ownable synchronizers:
    - None

"main" prio=10 tid=0x0000000005e3f800 nid=0x2744 waiting on condition [0x0000000041abe000]
   java.lang.Thread.State: TIMED_WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00000000f61df188> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)
    at java.util.concurrent.ThreadPoolExecutor.awaitTermination(ThreadPoolExecutor.java:1433)
    at com.foo.serv.util.Loader.execute(Loader.java:107)
    at com.foo.serv.util.Loader.main(Loader.java:571)

   Locked ownable synchronizers:
    - None

"VM Thread" prio=10 tid=0x0000000005ed5000 nid=0x275e runnable

"GC task thread#0 (ParallelGC)" prio=10 tid=0x0000000005e4a000 nid=0x2745 runnable

"GC task thread#1 (ParallelGC)" prio=10 tid=0x0000000005e4c000 nid=0x2746 runnable

"GC task thread#2 (ParallelGC)" prio=10 tid=0x0000000005e4e000 nid=0x2747 runnable

"GC task thread#3 (ParallelGC)" prio=10 tid=0x0000000005e4f800 nid=0x2748 runnable

"GC task thread#4 (ParallelGC)" prio=10 tid=0x0000000005e51800 nid=0x2749 runnable

"GC task thread#5 (ParallelGC)" prio=10 tid=0x0000000005e53800 nid=0x274a runnable

"GC task thread#6 (ParallelGC)" prio=10 tid=0x0000000005e55000 nid=0x274b runnable

"GC task thread#7 (ParallelGC)" prio=10 tid=0x0000000005e57000 nid=0x274c runnable

"GC task thread#8 (ParallelGC)" prio=10 tid=0x0000000005e59000 nid=0x274d runnable

"GC task thread#9 (ParallelGC)" prio=10 tid=0x0000000005e5b000 nid=0x274e runnable

"GC task thread#10 (ParallelGC)" prio=10 tid=0x0000000005e5c800 nid=0x274f runnable

"GC task thread#11 (ParallelGC)" prio=10 tid=0x0000000005e5e800 nid=0x2750 runnable

"GC task thread#12 (ParallelGC)" prio=10 tid=0x0000000005e60800 nid=0x2751 runnable

"VM Periodic Task Thread" prio=10 tid=0x00002aaab005e800 nid=0x27eb waiting on condition

JNI global references: 207 
```

# wpf - WPF ItemsControl 绑定到 UserControl

> ID：10197958
> 
> 赞同：-1
> 
> 时间：2012-04-17T19:37:51.253
> 
> 标签：wpf, entity-framework, user-controls, itemscontrol

我有一个 WPF 应用程序，我需要在其中执行类似的操作：

```
<ItemsControl x:Name="lstProducts">
   <ItemsControl.ItemTemplate>
      <DataTemplate>
         <TextBlock Text="{Binding ProductName}" />
      </DataTemplate>
   </ItemsControl.ItemTemplate>
</ItemsControl> 
```

我在这样的代码中设置了 ItemsSource：`lstProducts.ItemsSource = MyEFContext.Products;`

到目前为止，一切正常。现在我想使用我自己的**UserControl**来显示产品，而不是像这样的**TextBlock**。

```
<ItemsControl x:Name="lstProducts">
   <ItemsControl.ItemTemplate>
      <DataTemplate>
         <my:ProductItemCtl ProductName="{Binding ProductName}" />
      </DataTemplate>
   </ItemsControl.ItemTemplate>
</ItemsControl> 
```

在我的用户控件中，我创建了一个`DependencyProperty`类似的（见下文），我`ProductName`在`OnProductNameChanged`回调中设置了。

`TextBlock`绑定时我的用户控件中的 没有更新，`ItemsControl`并且没有启动回调。

```
#region ProductName

        /// <summary>
        /// ProductName Dependency Property
        /// </summary>
        public static readonly DependencyProperty ProductNameProperty =
            DependencyProperty.Register("ProductName", typeof(String), typeof(ProductItemCtl),
                new FrameworkPropertyMetadata("",
                    new PropertyChangedCallback(OnProductNameChanged)));

        /// <summary>
        /// Gets or sets the ProductName property. This dependency property 
        /// indicates ....
        /// </summary>
        public String ProductName
        {
            get { return (String)GetValue(ProductNameProperty); }
            set {  SetValue(ProductNameProperty, value); }
        }

        /// <summary>
        /// Handles changes to the ProductName property.
        /// </summary>
        private static void OnProductNameChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            ProductItemCtl target = (ProductItemCtl)d;
            String oldProductName = (String)e.OldValue;
            String newProductName = target.ProductName;
            target.OnProductNameChanged(oldProductName, newProductName);
        }

        /// <summary>
        /// Provides derived classes an opportunity to handle changes to the ProductName property.
        /// </summary>
        protected virtual void OnProductNameChanged(String oldProductName, String newProductName)
        {
            // Set Product Name in the display Here!
            this.txtProductName.Text = newProductName;
        }

        #endregion 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:53:14.377

不是答案，但我不能把它写成评论。如果您像这样简化代码会发生什么：

```
public static readonly DependencyProperty ProductNameProperty = DependencyProperty.Register(
    "ProductName", typeof(string), typeof(ProductItemCtl), 
    new FrameworkPropertyMetadata(string.Empty,
        (o, e) => ((ProductItemCtl)o).txtProductName.Text = (string)e.NewValue)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:03:28.060

Arrrghhh 明白了......我`this.ProductName = "";`在我的 UserControl 的构造函数中

我在这上面浪费了很多时间……对不起，浪费了你所有的时间。

由于我通过尝试您的代码 Clemens 发现了我将您的答案标记为“已回答”。

谢谢大家。

# javascript - 显示错误 div 的验证脚本出现问题

> ID：10197959
> 
> 赞同：0
> 
> 时间：2012-04-17T19:37:53.680
> 
> 标签：javascript, jquery, validation, show

我在尝试使这个脚本工作时遇到了麻烦。css 更改工作正常，但 #error-div 没有显示。

有任何想法吗？

埃里克

```
<script type="text/javascript">
$(function () {
    $('#rbSubmit').formValidator({
        scope: '#form_register',
        onError: function () {

    if ($('#input_2 input').hasClass('error-input')) { 
        $('#r2 div, #r2 input' ).css('background-color', '#C1272D').css('color', '#FFF'); 
        $("#error_div").show(); } 
    else { $('#r2 div' ).css('background-color', '#2F2F2F'); }  
    }
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:43:47.977

在您的问题中，您提到了#error-div（带有破折号）。但是在您的代码中，您使用的是#error_div（带有下划线）。这可能是问题所在。

# automated-tests - JMeter NTLM/Windows 身份验证负载测试

> ID：10197961
> 
> 赞同：5
> 
> 时间：2012-04-17T19:38:19.627
> 
> 标签：automated-tests, windows-authentication, jmeter, load-testing, ntlm

**什么是要做？**

我们在 Sharepoint（企业）服务器上部署了一个应用程序，它使用 Windows 凭据登录到应用程序。

*   应用网址格式：[http://testmachine:1000/sites/test/](http://testmachine:1000/sites/test/)

*   Windows 凭据格式：user_id@domain.co.in

目标是为这样的 n 个用户对应用程序（尤其是登录功能）执行负载/性能测试。

通常，当我在 Firefox/IE 中点击应用程序 URL 时，它会弹出一个窗口，要求提供凭据。我输入凭据，浏览应用程序，然后注销。我打算在 JMeter 中捕捉到这一点，并为大量用户进行模拟。

**我被困在哪里了？**

现在我启动 JMeter 代理服务器，然后尝试与上面相同的步骤。但是当弹出窗口出现时，JMeter 根本不会记录它，也不会在登录后记录任何其他内容。

**我试过什么？**

如果我在 IE 中启用“自动检测 Intranet 网络”后尝试相同的步骤，那么它只会自动检测我的 Windows 凭据（无凭据弹出窗口），将我登录到应用程序（这也不会记录在 JMeter 中）并带我到主页。之后我点击的任何页面都会记录在 JMeter 中。

我还尝试使用以下参数使用[HTTP 授权管理器：](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Authorization_Manager)

*   基本网址：[http://testmachine:1000/sites/test/](http://testmachine:1000/sites/test/)
*   用户名：DOMAIN\USER_ID
*   密码：i_wont_tell_you
*   领域： \
*   领域：

它没有帮助。我对如何使用上述元素感到很困惑。甚至不确定它是否是解决我的问题的正确方法。

有什么帮助/建议吗？

**PS**我知道一个名为 Badboy 的工具，但必须将其作为最后的资源。甚至不确定它是否记录了弹出窗口。对不起，如果帖子很冗长。

* * *

**更新：**

我也试过-

```
Username: USER_ID and Domain: my_company_domain 
```

但这不是实际问题。问题是，当我尝试点击之前记录的页面（自动化）时，即使我没有使用 HTTP 授权管理器也会返回成功响应。我不确定我错过了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T12:27:59.867

OK. Finally I got what was missing.

First, I had to change the implementation of every request to `HttpClient3.1`

Second, it was really frustrating to see that [JMeter documentation](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Authorization_Manager) was misleading.

It says that the config file `httpclient.parameters`, should be edited as following:

```
http.authentication.preemptive$Boolean=false 
```

But it didn't work. Changing it to true worked like a charm.

Hope this helps other people.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T16:20:39.380

JMeter works at the HTTP layer so the proxy will only capture requests made over this protocol layer. It sounds to me like you have already found the right approach to use for recording by using '“Automatically detect intranet network” in IE', you can use this method to capture most requests and you will have to figure out authentication manually. How you do this depends on how your application communicates with your server to authenticate a user.

# castle-windsor - LoggingFacility - 控制将使用的记录器

> ID：10197967
> 
> 赞同：0
> 
> 时间：2012-04-17T19:38:37.207
> 
> 标签：castle-windsor, log4net

我正在使用`Log4Net`with `Castle.Windsor`、 the`LoggingFacility`和`Log4netIntegration`。我在其中使用的项目涉及`NHibernate`，它也与`log4net`.

我想要做的是拆分日志，以便 NHibernate 最终在一个日志中（data-log.txt），而所有系统日志记录在一个单独的日志中（system-log.txt）。

我遇到的问题是，windsor 注入的 Logger 似乎只会写入我的 log4net 配置中的根记录器。NHibernate 会查找名为 NHibernate 或 Nhibernate. 的记录器，因此我可以将这些日志转移到 data-log.txt 附加程序中，但它也会写入根记录器。

所以我现在得到的是来自 Windsor 和 NHibernate 的日志都以根记录器结尾，而来自 NHibernate 的日志也以 nhibernate 特定记录器结尾。

这是我的 app.config 中的 log4net 配置部分：

```
<log4net xsi:noNamespaceSchemaLocation="http://csharptest.net/downloads/schema/log4net.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<appender name="Console" type="log4net.Appender.ConsoleAppender">
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%5level [%thread] (%file:%line) - %message%newline"/>
  </layout>
</appender>
<appender name="AspNetTraceAppender" type="log4net.Appender.AspNetTraceAppender">
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline"/>
  </layout>
</appender>
<appender name="NHibernateLogAppender" type="log4net.Appender.RollingFileAppender">
  <file value="data-log.txt" />
  <!-- various stuff -->
</appender>
<appender name="SystemLogAppender" type="log4net.Appender.RollingFileAppender">
  <file value="system-log.txt" />
  <!-- various stuff -->
</appender>

<root>
  <level value="ALL" />
  <appender-ref ref="AspNetTraceAppender" />
  <appender-ref ref="Console" />      
</root>

<logger name="SystemLogger">
  <level value="ALL" />
  <appender-ref ref="SystemLogAppender" />
</logger>
<logger name="NHibernate">
  <level value="WARN" />
  <appender-ref ref="NHibernateLogAppender" />
</logger>    
<logger name="NHibernate.SQL">      
  <level value="DEBUG" />
  <appender-ref ref="NHibernateLogAppender"/>
</logger> 
```

温莎正在通过这样的代码进行配置 `container.AddFacility<LoggingFacility>(f => f.UseLog4Net().WithAppConfig());`

**我如何告诉 Windsor 瞄准 SystemLogger 而不是根？**

我知道做到这一点的一种方法是为每种想要使用日志记录的类型创建一个特定的记录器，但是当您稍后忘记这一点时，这似乎是一个很好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T21:30:05.577

只有带有所有附加程序的根记录器。然后对记录器名称使用 appender 白名单和黑名单过滤：

```
<appender name="NHibernateLogAppender" type="log4net.Appender.RollingFileAppender">
  <file value="data-log.txt" />
  <!-- various stuff -->

  <filter type="log4net.Filter.LoggerMatchFilter">  
    <loggerToMatch value="NHibernate" />  
  </filter>
</appender>

<appender name="SystemLogAppender" type="log4net.Appender.RollingFileAppender">
  <file value="system-log.txt" />
  <!-- various stuff -->

  <filter type="log4net.Filter.LoggerMatchFilter">  
    <loggerToMatch value="NHibernate" />  
    <acceptOnMatch value="false" />
  </filter>
</appender>

<root>
  <level value="ALL" />
  <appender-ref ref="NHibernateLogAppender" /> 
  <appender-ref ref="SystemLogAppender" />
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:10:14.353

另一条路线：我已向 Castle.Windsor 团队提交了一个补丁，允许用户指定要使用的日志名称。

如果你从 github 拉取和构建 Windsor，LoggingFacility 现在有一个配置方法`ToLog(string LogName)`，允许你控制将使用哪个日志。

# php - 用于在 PHP 中提取多个电子邮件地址的正则表达式

> ID：10197969
> 
> 赞同：0
> 
> 时间：2012-04-17T19:38:42.733
> 
> 标签：php, regex, email-address

我正在接收以下内容：

```
"Jane Doe" <jane@doe.com>, "John Doe" <john@doe.com> 
```

我想提取电子邮件地址：

```
jane@doe.com, john@doe.com 
```

目前我有一个这样的正则表达式：

```
/<(.*)>/ 
```

它将所有内容都放在括号之间，但它也得到以下内容：

```
jane@doe.com>, "John Doe" <john@doe.com 
```

当我在中间使用 @ 符号时，它也不能正常工作：

```
/<(.*)@(.*)>/ 
```

我可以`explode()`基于逗号，但我认为应该有一种方法`preg_match()`可以给我想要的东西。我的正则表达式中缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:45:21.970

你的正则表达式[太贪心](http://www.regular-expressions.info/repeat.html#greedy)了。改为使用`/<(.*?)>/`，甚至更好的是

```
/<([^<>]+@[^<>]+)>/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T19:47:12.407

我用它来匹配电子邮件，我知道在野外还有其他表达式可能会捕获更多的电子邮件地址，但我发现这个输入很快，到目前为止满足我的所有需求，请随意尝试：

```
/\w+[\.\w]+@\w+[\.\w]+/ 
```

您可能希望将其与 preg_match_all 一起使用来捕获所有地址

例如：

```
$string = '"Jane Doe" <jane@doe.com>, "John Doe" <john@doe.com>';
preg_match_all('/\w+[\.\w]+@\w+[\.\w]+/', $string, $matches);
print_r($matches); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T19:40:41.607

最简单的方法是匹配除最终分隔符之外的所有内容：

```
/<([^>]*)>/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T19:40:56.583

您在点中包含太多内容。试试这个：

```
/<([^>]*)>/ 
```

# z3 - 奇怪的Z3模型值

> ID：10197970
> 
> 赞同：1
> 
> 时间：2012-04-17T19:38:43.913
> 
> 标签：z3

我正在使用最新的 Z3 版本 3.2。我从“get-value”命令中得到了意外的响应。这是我在 SMT-LIB2 兼容模式下运行的小脚本：

```
(set-option :produce-models true)
(declare-datatypes () ((Object o0 null)))
(declare-fun IF (Object) Int)
(declare-fun i2 () Int) 
(assert (= (IF o0) i2))
(assert (= (IF null) 0))
(check-sat)
(get-value (i2)) 
```

回应是：

```
((i2 (IF o0))) 
```

我希望得到的只是“0”。有没有办法让 Z3 将返回的项评估为一个全域常数？

这是完整的模型：

```
(model 
;; universe for Object:
;;   Object!val!0 
;; -----------
;; definitions for universe elements:
(declare-fun Object!val!0 () Object)
;; cardinality constraint:
(forall ((x Object)) (= x Object!val!0))
;; -----------
(define-fun i2 () Int
(IF o0))
(define-fun IF ((x!1 Object)) Int
  (ite (= x!1 Object!val!0) 0
    0))
) 
```

我也很困惑为什么模型中没有定义o0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:08:58.950

这已在 Z3 4.0 中修复。Z3 4.0 即将发布。同时，您可以在线使用它：[http ://rise4fun.com/Z3/75y](http://rise4fun.com/Z3/75y)

此链接可用于执行您的示例。Z3 4.0 产生了预期的结果。

关于这个错误，主要问题是 Z3 将 Object 视为未解释的排序。在 Z3 3.2 中，您可以通过包括

> （设置选项：自动配置假）

在脚本的开头。

# jquery - 使用 jQuery 确保所有单选按钮都有一个值

> ID：10197973
> 
> 赞同：1
> 
> 时间：2012-04-17T19:38:48.050
> 
> 标签：jquery

我有一个烦人的单选按钮问题/答案列表

> 你喜欢A还是B
> 你喜欢x还是y

这类问题。

标记看起来有点像：

```
<input type="radio" name="User[AnnoyingQuestion][1]" value="1|Do you like x or y?|X" id="Member[PartyProfile]_1_0" />

<input type="radio" name="User[AnnoyingQuestion][1]" value="1|Do you like x or y?|Y" id="Member[PartyProfile]_1_1" class="elp-radio-question"> 
```

基本上，我需要确保所有问题都已得到解答。使用 jQuery 执行此操作的好策略是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T19:51:53.800

证明：http: [//jsfiddle.net/iambriansreed/vXXUV/](http://jsfiddle.net/iambriansreed/vXXUV/)

将表单选择器设置得更准确。

```
<script>

    $(function(){

        $('form').submit(function(e){

            var radios = {}, success = true;

            $('input[type="radio"]').each(function(){

                 var name = $(this).attr('name');

                 if(name in radios) return true;                 

                 radios[name] = $('input[name="'+name+'"]:checked').length > 0;

            });    

            for(name in radios){
                if(!radios[name]){
                    success = false;
                    alert('Please enter a value for '+name);
                }
            }

            if(!success) e.preventDefault();

            else alert('Form Submitting...');

        });        

    });​

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:48:49.550

您应该能够使用 jQuery 验证插件，正如这个问题中所建议的那样：

[使用 jQuery 验证插件验证单选按钮组](https://stackoverflow.com/questions/277589/validation-of-radio-button-group-using-jquery-validation-plugin)

以下是验证插件文档：[http ://docs.jquery.com/Plugins/Validation/Methods](http://docs.jquery.com/Plugins/Validation/Methods)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T19:49:14.650

更新。试试这个

```
function allChecked() {
    var $inputs = $('input[type="radio"]');

    $.each($inputs,function(){
        var $this = $(this),
        name = $this.attr('name');

        if ($('input[name="' + name +'"]:checked').length < 1){
            return false;
        }
    });

    return true;
} 
```

这不是非常有效，但我认为它会起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T20:01:36.907

假设您的所有问题只有两个选项，这是一种快速的方法。将选中的单选按钮的数量与单选按钮的总数进行比较。如果选中框的数量不等于总数的一半，则说明未选中某些内容。

```
if( $('input[type=radio]:checked').length) == $('input[type=radio]').length/2) ...​​​​​​​​​​​​​​​​​​​ 
```

# php - 使用 php 和 .htaccess 重写 url

> ID：10197975
> 
> 赞同：0
> 
> 时间：2012-04-17T19:39:10.233
> 
> 标签：php, apache, .htaccess, mod-rewrite

这个问题很基本但很重要。我需要使用 .htaccess 重写 php url。前一：我有很多带有`.php`扩展名的文件。前两个：我需要名称和`html`扩展名友好的 seo url。

示例 1：

```
http://mydomain.com/editname.php
http://mydomain.com/location.php
..... 
```

我需要全部重写为：

```
http://mydomain.com/editname/
http://mydomain.com/location/ 
```

示例 2：

```
http://mydomain.com/name.php?id=1
http://mydomain.com/state.php?id=1 
```

重写为：（ john & bsw 是真正的名称并插入到 mysql 中）

```
http://mydomain.com/name/1/john.html
http://mydomain.com/state/1/bsw.html 
```

**注意**：如果不是这个，重定向到 404 not found 页面。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:43:53.420

要将简单文件夹重定向到 PHP 文件：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/])/$ /$1.php [L] 
```

然后重定向您的 SEO 友好 URL：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/])/([0-9]+)/([^/])\.html$ /$1.php?id=$2 [L,QSA] 
```

这些`RewriteCond`行检查以确保请求不是有效文件。

# python - python中的战舰游戏

> ID：10197976
> 
> 赞同：2
> 
> 时间：2012-04-17T19:39:13.630
> 
> 标签：python

我正在用python创建一个战舰游戏。我创建了一个 10X10 的板，看起来像这样。

```
-------------------------------------------------
 1 |  2 |  3 |  4 |  5 |  6 |  7 |  8 |  9 | 10 | 
-------------------------------------------------
11 | 12 | 13 | 14 | 15 | 16 | 17 | 18 | 19 | 20 | 
-------------------------------------------------
21 | 22 | 23 | 24 | 25 | 26 | 27 | 28 | 29 | 30 | 
-------------------------------------------------
31 | 32 | 33 | 34 | 35 | 36 | 37 | 38 | 39 | 40 | 
-------------------------------------------------
41 | 42 | 43 | 44 | 45 | 46 | 47 | 48 | 49 | 50 | 
-------------------------------------------------
51 | 52 | 53 | 54 | 55 | 56 | 57 | 58 | 59 | 60 | 
-------------------------------------------------
61 | 62 | 63 | 64 | 65 | 66 | 67 | 68 | 69 | 70 | 
-------------------------------------------------
71 | 72 | 73 | 74 | 75 | 76 | 77 | 78 | 79 | 80 | 
-------------------------------------------------
81 | 82 | 83 | 84 | 85 | 86 | 87 | 88 | 89 | 90 | 
-------------------------------------------------
91 | 92 | 93 | 94 | 95 | 96 | 97 | 98 | 99 | 100| 
------------------------------------------------- 
```

现在我有一个船舶所在位置的列表：s = [[21,22,23,24,25], [45,55,65,75], [1,2,3], [85, 86,87], [5,15], [46,56]]

我正在尝试编写一个允许用户输入某个位置的函数，如果输入在 list 中，它应该返回 hit。如果没有，它将返回错过。

这是我到目前为止所拥有的：

```
def createBoard():
    board=[]
    for i in range(10):
        board.append(str(i)+" ")
    for j in range(10,100):
        board.append(j)
    return(board)
def printBoard(board):
    for i in range(0,100,10):
        print("\n"+"-"*45)
        for j in range(1,10,1):
            print(board[i+j],"|",end=" ")
    print("\n"+"-"*45)
printBoard(createBoard())

position=int(input("Choose position on the board"))
g="Miss"
a="hit"
s = [[21,22,23,24,25],
    [45,55,65,75],
    [1,2,3],
    [85,86,87],
    [5,15],
    [46,56]]
for i in range(0,len(s),1):
    if position in s[i]:
        print(a)
    elif position not in s[i]:
        print(g) 
```

到目前为止，它会发现输入是否在列表中，但它会返回五次，我只希望它返回一次。我只能使用基本代码，因为我不知道很多高级工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T19:45:11.703

您可以在`print(a)`. 这将退出（跳出）for 循环。

**编辑：**

就目前而言，如果您错过了它，它也会打印出 5 次。您需要在循环之前设置一些变量，并且只有在您检查了所有船只之后，如果您还没有找到一个，则将其打印出来（仅一次，在循环外）

```
 found = False
    for i in range(0,len(s),1):
        if position in s[i]:
            print(a)
            found = True
            break
    if not found:
        print(g) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-03T22:04:21.550

你去吧。您可以使用该`any`功能。如果一艘船被击中，它将返回 true。虽然，如前所述，对于更高级的游戏版本，我也建议使用 2d 数组

```
def print_board():
    def print_separator():
        print("-"*51)

    for i in range(0, 100, 10):
        print_separator()
        field_string = " | ".join(['{:2d}'.format(i+j) for j in range(0, 10)])
        print(f'| {field_string} |')
    print_separator()

print_board()

ships = [[21,22,23,24,25],
    [45,55,65,75],
    [1,2,3],
    [85,86,87],
    [5,15],
    [46,56]]

def is_hit(position):
    return any([position in ship_location for ship_location in ships])

def evaluate_position(position):
    print("hit" if is_hit(position) else "Miss")

while 1:
    pos = input("Choose position on the board: ")
    if(pos == "exit"):
        exit()

    evaluate_position(int(pos)) 
```

# android - 如何在我的适配器 Android 中使用 setOnClickListener？

> ID：10197977
> 
> 赞同：1
> 
> 时间：2012-04-17T19:39:17.557
> 
> 标签：android

在我的应用程序中，我有 ListView 和我的 ListView 的适配器。我的项目 ListView 有两个元素 Text 和 Image。现在我想分离文字并点击图片。

```
public class MyAdapter extends ArrayAdapter<String> {
private Activity context;
private ArrayList<String> categories;
public static boolean remove = true;

public MyAdapter(Activity context, ArrayList<String> categories) {
    super(context, R.layout.my_list_element, categories);
    this.context = context;
    this.categories = categories;
}

static class ViewHolder {
    public TextView tvLanguage;
    public ImageView remove;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View rowView = convertView;
    if (rowView == null) {
        LayoutInflater inflater = context.getLayoutInflater();
        rowView = inflater.inflate(R.layout.my_list_element, null);
        ViewHolder viewHolder = new ViewHolder();
        viewHolder.tvLanguage = (TextView) rowView.findViewById(R.id.tvLanguage);
        viewHolder.remove = (ImageView) rowView.findViewById(R.id.remove);
        rowView.setTag(viewHolder);
    }
    ViewHolder holder = (ViewHolder) rowView.getTag();
    holder.tvLanguage.setText(categories.get(position));
    if(remove)
        holder.remove.setVisibility(View.GONE);
    else
        holder.remove.setVisibility(View.VISIBLE);
    return rowView;
} 
```

我应该如何分离文本和图像并成功在两个元素上使用 setOnClickListener ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T19:43:28.583

修改第一个块是这样的：

```
if (rowView == null) {
        LayoutInflater inflater = context.getLayoutInflater();
        rowView = inflater.inflate(R.layout.my_list_element, null);
        ViewHolder viewHolder = new ViewHolder();
        viewHolder.tvLanguage = (TextView) rowView.findViewById(R.id.tvLanguage);
        viewHolder.remove = (ImageView) rowView.findViewById(R.id.remove);
        rowView.setTag(viewHolder);

        viewHolder.tvLanguage.setOnClickListener(new View.OnClickListener() {
           public void onClick(View v){  
              // handle your text view  
           }
        });

        viewHolder.remove.setOnClickListener(new View.OnClickListener() {
           public void onClick(View v){    
              // handle your imageview
           }
        });

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T16:45:13.727

I solved my problem :) I can't use this code

```
Intent i = new Intent (this, AddRSS.class); 
startActivity (i); 
```

because my class MyAdapter does not extend Activity so I could not use a method startActivity(i);

The solution is simple, I use context :

```
Intent i = new Intent (context, AddRSS.class); 
context.startActivity (i); 
```

and now works ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T02:07:30.067

尝试像这样向您的意图添加标志：

```
Intent i = new Intent (this, AddRSS.class);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(i); 
```

上面的代码将启动一个活动，它将成为历史堆栈上新任务的开始。

# java - 性能问题 - 清除并重用一个集合或扔掉它并获得一个新的

> ID：10197988
> 
> 赞同：3
> 
> 时间：2012-04-17T19:40:37.580
> 
> 标签：java, performance

假设我们尝试实现一个合并排序算法，给定一个数组数组来合并什么是更好的方法，这个：

```
public void merge(ArrayList<ArrayList<E>> a) {
    ArrayList<ArrayList<E>> tmp = new ArrayList<ArrayList<E>>() ;
    while (a.size()>1) {
        for (int i=1; i<a.size();i+=2) {
            tmp.add(merge(a.get(i-1),a.get(i)));
        }
        if (a.size()%2==1) tmp.add(a.get(a.size()-1));
        a = tmp;
        tmp = new ArrayList<ArrayList<E>>() ;
    }
} 
```

或这个 ：

```
public void merge(ArrayList<ArrayList<E>> a) {
    ArrayList<ArrayList<E>> tmp = new ArrayList<ArrayList<E>>(),tmp2  ;
    while (a.size()>1) {
        for (int i=1; i<a.size();i+=2) {
            tmp.add(merge(a.get(i-1),a.get(i)));
        }
        if (a.size()%2==1) tmp.add(a.get(a.size()-1));
        tmp2 = a;
        a = tmp;
        tmp = tmp2;
        tmp.clear();
    }
} 
```

为了更清楚，我所做的是合并 a 中***的***每一对邻居并将生成的合并数组放入外部数组数组***tmp***，合并所有对后，一种方法是清除***a***然后将***tmp***移动到***a***，然后将清除***的 a***移动到***tmp***。第二种方法是“抛出”旧的***tmp***并获得一个新的***tmp*** ，而不是重用旧的 tmp。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T19:45:28.640

作为一般规则，不要花费精力尝试重用旧集合；它只会使您的代码更难阅读（并且通常不会给您带来任何实际好处）。仅当您的代码已经正常工作并且您有硬数字表明您的算法速度得到了提高时，才可以尝试这样的优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T19:48:00.090

1.  总是分配一个新的`ArrayList`并填充它，会导致更多的垃圾收集，这通常会减慢一切（次要 GC 很便宜但不是免费的）。

2.  当需要调整内部数组的大小（调整大小很便宜但不是免费的）时，重用`ArrayList`将导致使用的更少。`Arrays.copyOf()``ArrayList`

另一方面：`clear()`也会使数组内容无效，以允许 GC 收集未使用的对象，这当然也不是免费的。

不过，如果考虑执行速度，我会重用`ArrayList`.

# vb.net - 如何开始使用 EPL、Visual Basic 和 Zebra 打印？

> ID：10197991
> 
> 赞同：1
> 
> 时间：2012-04-17T19:40:42.563
> 
> 标签：vb.net, printing, zebra-printers, epl

我真的找不到任何关于如何使用 Visual Basic 通过 EPL 打印的信息。谁能帮我在打印机上写一些简单的文字？我找到了 Zebra EPL 手册，所以我想我可以从那里开始，我只是不知道如何开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T17:46:16.587

[这是Nicholas Piasecki](https://stackoverflow.com/users/32187/)如何将 EPL 代码发送到打印机的一篇很棒的博客文章：
[Sending Raw EPL2 Directly to a Zebra LP2844 via C#](http://web.archive.org/web/20140922053236/http://nicholas.piasecki.name/blog/2009/03/sending-raw-epl2-directly-to-a-zebra-lp2844-via-c)

我以前使用过 Zebra 打印机（所以我已经知道 EPL），但是当我第一次必须从 .NET 打印时，我设法仅使用这篇博文中的信息就能让它工作。

请注意，示例代码是用 C# 编写的，但您可以将其转换为 VB.NET。
*（该帖子还提到了一个名为的外部类`RawPrinterHelper`，您可以从 Microsoft 下载该类 - 如果您不想将其转换为 VB，只需将其放入单独的 C# 程序集中并在您的 VB 项目中引用它）*

如果您也需要打印图像，这里是同一个人的另一篇博客文章：
[使用 EPL2 GW 命令将图像发送到 Zebra 热敏打印机](http://web.archive.org/web/20141109172303/http://nicholas.piasecki.name/blog/2013/02/using-the-epl2-gw-command/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T03:42:56.733

我这样做的方法是使用 FSO 将标签文本文件的文件复制到打印机的 UNC 路径。（即 FSO.copyfile 文件路径，UNCpath）。

创建一个包含 EPL 原始文件（文本）的字符串。将其保存到临时文件，然后执行我上面提到的复制文件。

我发现了解 EPL 正在做什么的最佳方法是获取现有字符串并使用设置进行操作。这是 EPL 中的 FedEx 标签示例，供您开始使用。请记住 - 它只是文本。

## （在 2 个 N 之间）

N OD10 q812 Q1624,24 D15 ZB LO0,459,800,4 LO0,713,800,4 LO0,1048,800,4 A35,321,0,2,1,1,N,"From:" A35,340,0,2 ,1,1,N,"航运部" A35,360,0,2,1,1,N,"Company INC." A35,380,0,2,1,1,N,"1820 SMARKET BLVD" A35,401,0,2,1,1,N,""A35,441,0,2,1,1,N," (800) 999-9997" A490,381,0,2,1,1,N,"CAD: 12345/FXRS1060" A43,500,0,4,1,1,N,"TEST" A43,535,0 ,4,1,1,N,"123-45TH" A43,570,0,4,1,1,N,"" A35,421,0,2,1,1,N,"昌哈森, MN 55317" A490,340,0,2,1,1,N,"发货日期：24NOV10" A490,360,0,2,1,1,N,"ActWgt: 12.0 LB" A43,465,0,4,1, 1,N,"TEST" A615,465,0,2,1,1,N,"(320) 555-1212" A43,608,0,3,1,2,N,"ST CLOUD, MN 56301" A530,608,0,2,2,2,N,"(US)" LO670,550,105,10 LO670,560,10,112 LO765,560,10,112 LO670,672,105,

## ñ

如您所见，坐标是每行的前 2 组。

A 表示我相信的文本。

b 表示条形码。

我不知道我脑海中的所有参数，但你提到你有一本手册，所以它应该为你列出这些细节。

希望这可以帮助。