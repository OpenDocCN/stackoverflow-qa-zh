# StackOverflow 问答 000656000-000656999

# iphone - 不是在 iphone 应用程序中进行碰撞检测的数字错误 (NAN)

> ID：656002
> 
> 赞同：1
> 
> 时间：2009-03-17T21:02:02.987
> 
> 标签：iphone, objective-c, physics, nan

我有一组气球，我正试图让它们像球一样相互反弹。当我开始移动它们然后检测碰撞时，碰撞例程最终会返回一个 NAN 来表示气球的速度。我最终得到一个类似于 x=270, y= -nan(0x400000) 的位置。我整天都在看代码，但我仍然找不到错误，任何帮助将不胜感激。这是代码：

```
 - (void)MoveBalloons {

    for (CurBalloon=1; CurBalloon <= NumBalloons; ++CurBalloon) {

    //check for edge hCurBalloont
    if (uBalloon[CurBalloon].pos.y > 456) {
        uBalloon[CurBalloon].pos.y = 456;
        uBalloon[CurBalloon].Vel_y = -uBalloon[CurBalloon].Vel_y;
    }
    if (uBalloon[CurBalloon].pos.y < 24) {
        uBalloon[CurBalloon].pos.y = 24;
        uBalloon[CurBalloon].Vel_y = -uBalloon[CurBalloon].Vel_y;
    }
    if (uBalloon[CurBalloon].pos.x > 289) {
        uBalloon[CurBalloon].pos.x = 289;
        uBalloon[CurBalloon].Vel_x = -uBalloon[CurBalloon].Vel_x;
    }
    if (uBalloon[CurBalloon].pos.x < 31) {
        uBalloon[CurBalloon].pos.x = 31;
        uBalloon[CurBalloon].Vel_x = -uBalloon[CurBalloon].Vel_x;
    }

    //call loop to go through the balloons for each touch.
    //[self CollisionCheck];

        NSUInteger h;
        float dist, tempvelx, tempvely, temp2velx, temp2vely;;

        for (h=1; h <= NumBalloons; ++h) {
            //check if balloon is too close
            if (CurBalloon == h) { //skip the check ifit's the same balloon
            } else {
                dist = distanceBetweenPoints(uBalloon[CurBalloon].pos, uBalloon[h].pos);
                if (dist <= (kBalloonNear)) { //balloon's touching

                    tempvelx = uBalloon[CurBalloon].Vel_x;
                    tempvely = uBalloon[CurBalloon].Vel_y;
                    temp2velx = uBalloon[h].Vel_x;
                    temp2vely = uBalloon[h].Vel_y;

                    tempvelx = (uBalloon[CurBalloon].Vel_x - uBalloon[h].Vel_x) * (sinf(angleBetweenPoints(uBalloon[CurBalloon].pos,uBalloon[h].pos)))*(uBalloon[CurBalloon].Vel_x - uBalloon[h].Vel_x) * (sinf(angleBetweenPoints(uBalloon[CurBalloon].pos,uBalloon[h].pos))) - (uBalloon[CurBalloon].Vel_y - uBalloon[h].Vel_y) * sinf(angleBetweenPoints(uBalloon[CurBalloon].pos, uBalloon[h].pos)) * cosf(angleBetweenPoints(uBalloon[CurBalloon].pos, uBalloon[h].pos)) + uBalloon[h].Vel_x;

                    tempvely = (uBalloon[CurBalloon].Vel_y - uBalloon[h].Vel_y) * (cosf(angleBetweenPoints(uBalloon[CurBalloon].pos,uBalloon[h].pos))) * (uBalloon[CurBalloon].Vel_y - uBalloon[h].Vel_y) * (cosf(angleBetweenPoints(uBalloon[CurBalloon].pos,uBalloon[h].pos))) - (uBalloon[CurBalloon].Vel_x - uBalloon[h].Vel_x) * sinf(angleBetweenPoints(uBalloon[CurBalloon].pos, uBalloon[h].pos)) * cosf(angleBetweenPoints(uBalloon[CurBalloon].pos, uBalloon[h].pos)) + uBalloon[h].Vel_y;

                    temp2velx = (uBalloon[CurBalloon].Vel_x - uBalloon[h].Vel_x) * (cosf(angleBetweenPoints(uBalloon[CurBalloon].pos,uBalloon[h].pos))) * (uBalloon[CurBalloon].Vel_x - uBalloon[h].Vel_x) * (cosf(angleBetweenPoints(uBalloon[CurBalloon].pos,uBalloon[h].pos))) + (uBalloon[CurBalloon].Vel_y - uBalloon[h].Vel_y) * sinf(angleBetweenPoints(uBalloon[CurBalloon].pos, uBalloon[h].pos)) * cosf(angleBetweenPoints(uBalloon[CurBalloon].pos, uBalloon[h].pos)) + uBalloon[h].Vel_x;

                    temp2vely = (uBalloon[CurBalloon].Vel_y - uBalloon[h].Vel_y) * (sinf(angleBetweenPoints(uBalloon[CurBalloon].pos,uBalloon[h].pos)))*(uBalloon[CurBalloon].Vel_y - uBalloon[h].Vel_y) * (sinf(angleBetweenPoints(uBalloon[CurBalloon].pos,uBalloon[h].pos))) - (uBalloon[CurBalloon].Vel_x - uBalloon[h].Vel_x) * sinf(angleBetweenPoints(uBalloon[CurBalloon].pos, uBalloon[h].pos)) * cosf(angleBetweenPoints(uBalloon[CurBalloon].pos, uBalloon[h].pos)) + uBalloon[h].Vel_y;

                    uBalloon[CurBalloon].Vel_x = tempvelx;  
                    uBalloon[CurBalloon].Vel_y = tempvely;
                    uBalloon[h].Vel_x = temp2velx;  //set to old value of CurBalloon balloon.
                    uBalloon[h].Vel_y = temp2vely;

                }
            }
        }

    if (fabsf(uBalloon[CurBalloon].Vel_x) >= kBalloonMaxSpeed) uBalloon[CurBalloon].Vel_x = kBalloonMaxSpeed;
    if (fabsf(uBalloon[CurBalloon].Vel_y) >= kBalloonMaxSpeed) uBalloon[CurBalloon].Vel_y = kBalloonMaxSpeed;
    if (fabsf(uBalloon[CurBalloon].Vel_x) <= -kBalloonMaxSpeed) uBalloon[CurBalloon].Vel_x = -kBalloonMaxSpeed;
    if (fabsf(uBalloon[CurBalloon].Vel_y) <= -kBalloonMaxSpeed) uBalloon[CurBalloon].Vel_y = -kBalloonMaxSpeed;

    if (uBalloon[CurBalloon].Vel_y > KBalloonSpeed) { //if travellCurBalloonng fast, slow CurBalloont up fast to normal speed
        uBalloon[CurBalloon].Vel_y = uBalloon[CurBalloon].Vel_y - kBalloonSlowRate;
    }
    if (uBalloon[CurBalloon].Vel_x > KBalloonSpeed) { //if travellCurBalloonng fast, slow CurBalloont up fast to normal speed
        uBalloon[CurBalloon].Vel_x = uBalloon[CurBalloon].Vel_x - kBalloonSlowRate;
    }
    if (uBalloon[CurBalloon].Vel_y < KBalloonSpeed) { //if travellCurBalloonng fast, slow CurBalloont up fast to normal speed
        uBalloon[CurBalloon].Vel_y = uBalloon[CurBalloon].Vel_y + kBalloonSlowRate;
    }
    if (uBalloon[CurBalloon].Vel_x < KBalloonSpeed) { //if travellCurBalloonng fast, slow CurBalloont up fast to normal speed
        uBalloon[CurBalloon].Vel_x = uBalloon[CurBalloon].Vel_x + kBalloonSlowRate;
    }

    //slow to 0 if velocCurBalloonty CurBalloons CurBalloonnsCurBalloonde the slow rate
    if (fabsf(uBalloon[CurBalloon].Vel_x) <= kBalloonSlowRate) uBalloon[CurBalloon].Vel_x = 0;
    if (fabsf(uBalloon[CurBalloon].Vel_y) <= kBalloonSlowRate) uBalloon[CurBalloon].Vel_y = 0;

    uBalloon[CurBalloon].Vel_x = uBalloon[CurBalloon].Vel_x - kBalloonFallRate; //keep movCurBalloonng down     

    //add velocCurBalloonty to poCurBalloonnts
    uBalloon[CurBalloon].pos.y= uBalloon[CurBalloon].pos.y + uBalloon[CurBalloon].Vel_y;    
    uBalloon[CurBalloon].pos.x = uBalloon[CurBalloon].pos.x + uBalloon[CurBalloon].Vel_x;

    }
} 
```

这是用c编写的用于距离和角度的函数。我什至确保永远不会有 sqrt(-1) 和除以 0：

```
 CGFloat distanceBetweenPoints (CGPoint first, CGPoint second) {
    CGFloat deltaX = second.x - first.x;
    CGFloat deltaY = second.y - first.y;
    if ((deltaX*deltaX + deltaY*deltaY ) == -1) {
        return sqrtf(-.99);
    } else {
    return sqrtf(deltaX*deltaX + deltaY*deltaY );
    }
}

    CGFloat angleBetweenPoints(CGPoint first, CGPoint second) {

    if (first.x - second.x == 0)  {
        return (pi / 2);
    } else {
        return atanf((first.y-second.y) / (first.x - second.x));
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-17T21:08:19.977

如果 uBalloon 是一个数组，你的迭代应该在 0:(n-1) 之间。

例如

```
for (CurBalloon=0; CurBalloon < NumBalloons; ++CurBalloon)
{
  uBalloon[curBalloon] // blah
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-17T21:08:42.410

```
[...]
if ((deltaX*deltaX + deltaY*deltaY ) == -1) {
    return sqrtf(-.99);
} else {
[...] 
```

我认为这是您的问题（或其中之一）。您不能取负数的平方根（它是 -1 还是 -.99 都没有关系）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-17T21:20:06.033

这可能不是您的错误的根源，但此功能不太正确：

```
CGFloat angleBetweenPoints(CGPoint first, CGPoint second) {

if (first.x - second.x == 0)  {
        return (pi / 2);
} else {
        return atanf((first.y-second.y) / (first.x - second.x));
} 
```

这将始终返回 -pi/2 和 +pi/2 之间的角度，如果`first.x - second.x`它非常小且接近 0，但不完全为 0，它可能会返回不正确的结果。相反，只需使用[atan2](http://linux.die.net/man/3/atan2)：

```
CGFloat angleBetweenPoints(CGPoint first, CGPoint second) {
    return atan2f(first.y - second.y, first.x - second.x);
} 
```

`atan2()`返回从 -pi 到 +pi 的所有角度范围，并适当处理边缘情况。这可能不会影响您，因为您只是在计算结果角度的 sin/cos。但是，您这样做的效率非常低-`angleBetweenPoints()`当结果相同时，您调用了 8 次（！）次，并且花费了 4`sin()`秒和 4`cos()`秒。你可以跳过所有的三角函数，只使用相似三角形的几何形状来获得相同的结果。

# networking - 如何克服根域 CNAME 限制？

> ID：656009
> 
> 赞同：125
> 
> 时间：2009-03-17T21:05:13.933
> 
> 标签：networking, dns, rfc, cname

我们正在为我们的客户托管许多 Web 应用程序。很明显，他们希望使用自己的域来引用这些应用程序，通常他们希望任何输入`http://www.customer1.example`或`http://customer1.example`访问其 Web 应用程序的用户都可以。

我们面临的情况是，我们需要在不久的将来能够灵活地更改 IP 地址。而且我们不想依赖客户对其域进行 A 记录更改。所以我们认为使用`CNAME`记录会起作用，但我们发现`CNAME`记录不适用于根域。

基本上：

```
customer1.example IN CNAME customer1.mycompanydomain.example //this is invalid as the RFC
www.customer1.example IN CNAME customer1.mycompanydomain.example //this is valid and will work 
```

我们希望能够更改记录的 IP 地址，`customer1.mycompanydomain.example`我们`A`的客户将遵循我们可以控制的记录。

在我们的 DNS 中，它看起来像：

```
customer1.mycompanydomain.example IN A 192.0.2.1 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2014-03-26T11:41:19.067

这个问题仍然经常出现的原因是，正如你所提到的，在某个地方，某个被认为重要的人写道，RFC 声明在它们前面没有子域的域名是无效的。然而，如果你仔细阅读 RFC，你会发现这并不是它所说的那样。事实上，[RFC 1912](http://www.rfc-editor.org/rfc/rfc1912.txt)规定：

> 不要过度使用 CNAME。在重命名主机时使用它们，但**计划摆脱它们**（并通知您的用户）。

一些 DNS 主机提供了一种使用自定义记录类型在区域顶点（根域级别，对于裸域名）获得类似 CNAME 的功能的方法。此类记录包括，例如：

*   DNSimple 的别名
*   DNS 上的 ANAME 变得简单
*   easyDNS 上的 ANAME
*   CloudFlare 的 CNAME

对于每个提供商，设置都相似：将您的顶级域的 ALIAS 或 ANAME 条目指向 example.domain.com，就像使用 CNAME 记录一样。根据 DNS 提供商，空值或 @Name 值标识区域顶点。

ALIAS 或 ANAME 或 @example.domain.com。

如果您的 DNS 提供商不支持这种记录类型，并且您无法切换到支持的记录类型，则需要使用子域重定向，这并不难，具体取决于需要执行此操作的协议或服务器软件.

我强烈不同意仅由“业余管理员”或此类想法完成的说法。这是一个简单的“名称及其服务需要做什么？” 交易，然后调整您的 DNS 配置以满足这些愿望；如果您的主要服务是 Web 和电子邮件，我看不出任何有效的理由说明永久删除 CNAME 会出现问题。毕竟，谁会喜欢 @subdomain.domain.org 而不是 @domain.org ？如果您已经设置好协议本身，谁需要“www”？假设使用根域名无效是不合逻辑的。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2009-04-16T20:43:32.680

从技术上讲，对根记录进行 CNAME 并不违反 RFC，但确实有局限性，这意味着不建议这样做。

通常你的根记录会有多个条目。比如说，3 个用于您的名称服务器，然后一个用于 IP 地址。

根据 RFC：

> 如果 CNAME RR 出现在节点上，则不应出现其他数据；

并且根据 IETF 的“常见 DNS 操作和配置错误”文档：

> 经验不足的管理员通常会尝试这样做，这是让您的域名也成为主机的明显方式。但是，像 BIND 这样的 DNS 服务器会看到 CNAME 并拒绝为该名称添加任何其他资源。由于不允许其他记录与 CNAME 共存，因此忽略 NS 条目。因此，podunk.xx 域中的所有主机也会被忽略！

参考：

*   [https://www.rfc-editor.org/rfc/rfc1912](https://www.rfc-editor.org/rfc/rfc1912)部分“2.4 CNAME 记录”
*   [http://www.faqs.org/rfcs/rfc1034.html](http://www.faqs.org/rfcs/rfc1034.html)第 3.6.2 节。别名和规范名称

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-13T08:25:48.493

我不知道他们是如何摆脱它的，或者他们可能会产生什么负面影响，但我正在使用 Hover.com 来托管我的一些域，并且最近将我的域的顶点设置为那里的 CNAME。他们的 DNS 编辑工具根本没有抱怨，我的域很高兴通过分配的 CNAME 解析。

这是 Dig 向我展示的该域（实际域混淆为 mydomain.com）：

```
; <<>> DiG 9.8.3-P1 <<>> mydomain.com
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 2056
;; flags: qr rd ra; QUERY: 1, ANSWER: 3, AUTHORITY: 0, ADDITIONAL: 0

;; QUESTION SECTION:
;mydomain.com.          IN  A

;; ANSWER SECTION:
mydomain.com.       394 IN  CNAME   myapp.parseapp.com.
myapp.parseapp.com. 300 IN  CNAME   parseapp.com.
parseapp.com.       60  IN  A   54.243.93.102 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-18T03:27:50.410

我的公司为许多客户做同样的事情，我们为他们托管一个网站，尽管在我们的例子中它是 xyz.company.com 而不是 www.company.com。我们确实让他们在 xyz.company.com 上设置 A 记录，以指向我们分配给他们的 IP 地址。

至于如何应对 I​​P 地址的变化，我认为没有完美的解决方案。一些想法是：

*   使用 NAT 或 IP 负载平衡器并为您的客户提供属于它的 IP 地址。如果 Web 服务器的 IP 地址需要更改，您可以在 NAT 或负载均衡器上进行更新，

*   还提供 DNS 托管服务，让您的客户与您一起托管他们的域，以便您能够更新 A 记录，

*   让您的客户将他们的 A 记录设置到一个主 Web 服务器，并对每个客户的 Web 请求使用 HTTP 重定向。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-18T04:43:58.387

Sipwiz 是正确的，正确执行此操作的唯一方法是 HTTP 和 DNS 混合方法。我的注册商是 Tucows 的转售商，他们提供根域转发作为免费增值服务。

如果您的域是 blah.com，他们会询问您要将域转发到哪里，然后您输入 www.blah.com。他们将 A 记录分配给他们的 apache 服务器并自动将 blah.com 添加为 DNS 虚拟主机。vhost 响应 HTTP 302 错误，将它们重定向到正确的 URL。脚本/设置很简单，可以由低端处理，否则会被报废硬件。

运行以下命令作为示例： curl -v eclecticengineers.com

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-02-23T17:30:30.393

您必须在外部域的末尾加上一个句点，这样它就不会认为您的意思是 customer1.mycompanydomain.com.localdomain；

所以只需改变：

```
customer1.com IN CNAME customer1.mycompanydomain.com 
```

到

```
customer1.com IN CNAME customer1.mycompanydomain.com. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-31T06:24:12.247

一种解决方案是为 www 子域创建 CNAME，然后将根域转发到您的 www 子域。第一步在 DNS 设置中完成，第二步在转发域部分完成。

参考：[https](https://www.tachyonstemplates.com/2018/google-domains-forward-root/) ://www.tachyonstemplates.com/2018/google-domains-forward-root/ 。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2009-06-17T21:23:21.777

我看到 readytocloud.com 托管在 Apache 2.2 上。

在 Apache 中有一种更简单、更有效的方法可以将非 www 站点重定向到 www 站点。

将以下重写规则添加到 Apache 配置（在虚拟主机内部或外部。没关系）：

```
RewriteCond %{HTTP_HOST} ^readytocloud.com [NC]
RewriteRule ^/$ http://www.readytocloud.com/ [R=301,L] 
```

或者，如果您想要从非 www 站点到 www 站点的 URL 的一对一映射，请使用以下重写规则：

```
RewriteCond %{HTTP_HOST} ^readytocloud.com [NC]
RewriteRule (.*) http://www.readytocloud.com$1 [R=301,L] 
```

请注意，需要加载 mod_rewrite 模块才能使其正常工作。幸运的是，readytocloud.com 运行在 CentOS 机器上，默认情况下会加载 mod_rewrite。

我们有一个运行 Apache 2.2 的客户端服务器，它有不到 3,000 个域和近 4,000 个重定向，但是，服务器上的负载徘徊在 0.10 - 0.20 左右。

* * *

## 回答 #9

> 赞同：-8
> 
> 时间：2009-03-20T20:04:50.300

感谢 sipwiz 和 MrEvil。我们开发了一个 PHP 脚本，它将解析用户输入的 URL 并粘贴`www`到它的顶部。（例如，如果客户进入[kiragiannis.com](http://kiragiannis.com)，那么它将重定向到[www.kiragiannis.com](http://www.kiragiannis.com)）。所以我们的客户指向他们的根（例如记录我们的网络重定向器在哪里），然后`customer1.com`指向我们管理的真实记录。`A``www` `CNAME``A`

如果您对未来的我们感兴趣，请在代码下方。

```
<?php
$url = strtolower($_SERVER["HTTP_HOST"]);

if(strpos($url, "//") !== false) { // remove http://
  $url = substr($url, strpos($url, "//") + 2);
}

$urlPagePath = "";
if(strpos($url, "/") !== false) { // store post-domain page path to append later
  $urlPagePath = substr($url, strpos($url, "/"));
  $url = substr($url, 0, strpos($url,"/"));
}

$urlLast = substr($url, strrpos($url, "."));
$url = substr($url, 0, strrpos($url, "."));

if(strpos($url, ".") !== false) { // get rid of subdomain(s)
  $url = substr($url, strrpos($url, ".") + 1);
}

$url = "http://www." . $url . $urlLast . $urlPagePath;

header( "Location:{$url}");
?> 
```

# sql - 将行从一个表复制到另一个表，忽略重复项

> ID：656012
> 
> 赞同：41
> 
> 时间：2009-03-17T21:05:48.377
> 
> 标签：sql, tsql

我有 2 个具有相同架构的表（srcTable1 和 destTable）。我正在尝试将所有行从 srcTable 复制到 destTable 并忽略重复项。我想我可以只添加一个带有子查询的 WHERE 子句，它只会给我不重复的行。但是，它似乎不起作用。我没有插入或选择任何行。

```
INSERT INTO destTable
SELECT * FROM srcTable
WHERE NOT EXISTS(SELECT * FROM destTable) 
```

我意识到我可以做这样的事情：

```
INSERT INTO destTable
SELECT * FROM srcTable
WHERE MyKey IN (SELECT MyKey FROM destTable) 
```

但是，我的表有多个键，我想不出你怎么能用多个键来做到这一点。

知道我做错了什么还是你有更好的想法？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2009-03-17T21:10:31.813

您的问题是您需要子查询中的另一个 where 子句来标识重复的内容：

```
INSERT INTO destTable
SELECT Field1,Field2,Field3,... 
FROM srcTable
WHERE NOT EXISTS(SELECT * 
                 FROM destTable 
                 WHERE (srcTable.Field1=destTable.Field1 and
                       SrcTable.Field2=DestTable.Field2...etc.)
                 ) 
```

正如另一位回答者所指出的，外连接可能是一种更简洁的方法。我上面的例子只是试图解释使用你当前的查询更容易理解。这两种方法在技术上都可行。

```
INSERT INTO destTable
SELECT s.field1,s.field2,s.field3,... 
FROM srcTable s 
       LEFT JOIN destTable d ON (d.Key1 = s.Key1 AND d.Key2 = s.Key2 AND...)
WHERE d.Key1 IS NULL 
```

上述两种方法都假设您担心从源中插入可能已经在目标中的行。如果您担心源有重复行的可能性，您应该尝试类似的方法。

```
INSERT INTO destTable
SELECT Distinct field1,field2,field3,... 
FROM srcTable 
```

还有一件事。我还建议在您的插入语句中列出特定字段，而不是使用 SELECT *。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-06-12T17:12:58.447

我意识到这已经过时了，但是我从谷歌来到这里，在查看了接受的答案后，我做了自己的声明，它对我有用，希望有人会觉得它有用：

```
 INSERT IGNORE INTO destTable SELECT id, field2,field3... FROM origTable 
```

编辑：这适用于 MySQL 我没有在 MSSQL 上测试

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-06-03T11:11:41.370

我希望这个查询对你有帮助

```
INSERT INTO `dTable` (`field1`, `field2`)
SELECT field1, field2 FROM `sTable` 
WHERE `sTable`.`field1` NOT IN (SELECT `field1` FROM `dTable`) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-17T21:11:51.263

像这样的东西？：

```
INSERT INTO destTable
SELECT s.* FROM srcTable s
LEFT JOIN destTable d ON d.Key1 = s.Key1 AND d.Key2 = s.Key2 AND...
WHERE d.Key1 IS NULL 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-17T21:11:55.023

你试过 SELECT DISTINCT 吗？

```
INSERT INTO destTable
SELECT DISTINCT * FROM srcTable 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-31T18:59:32.163

```
insert into tbl2
select field1,field2,... from tbl1
where not exists 
    ( 
        select field1,field2,... 
        from person2
        where (tbl1.field1=tbl2.field1 and
        tbl1.field2=tbl2.field2 and .....)
    ) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-17T21:12:48.470

DISTINCT 是您要查找的关键字。

在 MSSQL 中，将唯一行从一个表复制到另一个表可以这样完成：

```
SELECT DISTINCT column_name
INTO newTable
FROM srcTable 
```

`column_name`是您从中搜索唯一值的列。

测试和工作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-03-06T15:36:57.040

使用 PHP / PDO 为我工作的解决方案。

```
public function createTrainingDatabase($p_iRecordnr){
// Methode: Create an database envirioment for a student by copying the original
// @parameter: $p_iRecordNumber,    type:integer,   scope:local
// @var: $this->sPdoQuery,          type:string,    scope:member 
// @var: $bSuccess,                 type:boolean,   scope:local
// @var: $aTables,                  type:array,     scope:local
// @var: $iUsernumber,              type:integer,   scope:local
// @var: $sNewDBName,               type:string,    scope:local
// @var: $iIndex,                   type:integer,   scope:local 

// -- Create first the name of the new database --
$aStudentcard = $this->fetchUsercardByRecordnr($p_iRecordnr);
$iUserNumber = $aStudentcard[0][3];
$sNewDBName = $_SESSION['DB_name']."_".$iUserNumber;
// -- Then create the new database  --
$this->sPdoQuery = "CREATE DATABASE `".$sNewDBName."`;";
$this->PdoSqlReturnTrue();
// -- Create an array with the tables you want to be copied --
$aTables = array('1eTablename','2ndTablename','3thTablename');
// -- Populate the database --
for ($iIndex = 0; $iIndex < count($aTables); $iIndex++) 
{
 // -- Create the table --
    $this->sPdoQuery = "CREATE TABLE `".$sNewDBName."`.`".$aTables[$iIndex]."` LIKE `".$_SESSION['DB_name']."`.`".$aTables[$iIndex]."`;";
    $bSuccess = $this->PdoSqlReturnTrue();
    if(!$bSuccess ){echo("Could not create table: ".$aTables[$iIndex]."<BR>");}
    else{echo("Created the table ".$aTables[$iIndex]."<BR>");}
    // -- Fill the table --
    $this->sPdoQuery = "REPLACE `".$sNewDBName."`.`".$aTables[$iIndex]."` SELECT * FROM `".$_SESSION['DB_name']."`.`".$aTables[$iIndex]."`";
    $bSuccess = $this->PdoSqlReturnTrue();
    if(!$bSuccess ){echo("Could not fill table: ".$aTables[$iIndex]."<BR>");}
    else{echo("Filled table ".$aTables[$index]."<BR>");}
} 
```

}

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-07-25T17:47:16.707

您是否尝试过先删除子查询中的重复项？

```
INSERT INTO destTable
SELECT source.* FROM(
    SELECT *
    FROM srcTable
    EXCEPT
    SELECT src.* FROM
    srcTable AS src
    INNER JOIN destTable AS dest 
    /* put in below line the conditions to match repeated registers */
        ON dest.SOME_FANCY_MATCH = src.SOME_FANCY_MATCH AND ... 
) as source 
```

如果集合非常大，也许这不是最好的解决方案。

# linq - LINQ - 加入 2 个数据表 - 通配符

> ID：656013
> 
> 赞同：1
> 
> 时间：2009-03-17T21:06:00.467
> 
> 标签：linq, join, datatable

我正在使用 LINQ 加入 2 个数据表。我试图只取回 dtTable2 中的 1 个字段和 dtTable1 中的所有字段。当这段代码执行时，我有两列。第一列包含来自 dtTable2.field2 的值，第二列包含值“System.Data.DataRow”。我知道如果我明确指定 dtTable1 中的列，我将得到我需要的结果。是否可以指定通配符来获取 dtTable1 中的所有列？

```
Dim results = _
   From r In dtTable1.AsEnumerable _
   Join c In dtTable2.AsEnumerable _
   On c.Field1 Equals r.Field1 _
   Select c.field2, r

Datagridview.datasource = results.ToList 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-17T21:11:00.750

不可以。您需要列出所需的属性或引用行对象中的属性。请注意，如果这是一个强类型行，您可以将其转换为类型并直接在代码中使用字段。

```
Dim results = _
   From r In dtTable1.AsEnumerable _
   Join c In dtTable2.AsEnumerable _
   On c.Field1 Equals r.Field1 _
   Select c.field2, r.Field1, r.Field3, r.Field4

Datagridview.datasource = results.ToList 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-17T23:44:23.253

这有点尴尬，但您可以使用 List 对象和 Concat 来完成。我对 VB 不够熟悉，无法为您提供正确的语法，但这里是 C#

```
var results = from r in dtTable1.AsEnumerable()
              join c in dtTable2.AsEnumerable() on c.Field1 equals r.Field1
              select new List<object>(r.ItemArray).Concat(new List<object>() { c.Field2 })
datagridview.DataSource = results; 
```

# java - 从 Matlab 调用 Java 时如何避免歧义？

> ID：656014
> 
> 赞同：2
> 
> 时间：2009-03-17T21:06:07.470
> 
> 标签：java, matlab, methods, ambiguity

我刚刚发现从 Matlab 调用 Java 时

```
object.method(arg1,...,argn) 
```

相当于

```
method(object, arg1,...,argn) 
```

这里的问题是我也有一个`method.m`从 Java 到 Matlab 的翻译（例如转换`String[]`为字符串单元格）。我的`method.m`样子

```
function result = method(object, arg1,...argn)
  intermediate = object.method(arg1,...argn);
  result = translate(intermediate); 
```

发生的事情是当我调用时`method(object, arg1,...,argn)`，它会直接调用 Java，而不是使用我的`method.m`

修复很简单，只是不要对我的 Java 方法和我的`.m`文件使用相同的方法名称。 **但是还有其他方法吗？我怎么知道在给定相同名称的情况下会调用哪个方法？有没有办法确保我调用`method.m`而不是 Java 方法？** 它很容易确保对 Java 方法的调用，只需使用`object.method`语法即可。

作为旁注，同样愚蠢的是`.m`编辑器链接到`method.m`调用`method(object, arg1,...,argn)`时，而当它调试时它调用Java方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-17T22:41:50.503

您可能会遇到一些关于 MATLAB 如何进行调度的问题......

**我怎么知道在给定相同名称的情况下会调用哪个方法？**

[MATLAB 文档的这一部分](http://www.mathworks.com/access/helpdesk/help/techdoc/matlab_prog/f7-58170.html#bresuvu-3)讨论了在有多个同名函数的情况下如何选择函数。来自文档：“函数优先顺序根据函数的类型及其在 MATLAB 路径上的位置确定一个函数相对于另一个函数的优先级。” 此顺序（从最高到最低）如下所示：

*   子功能
*   私有函数
*   类构造函数
*   重载方法
*   当前目录中的函数
*   路径上其他地方的功能

“method.m”函数的位置可能会决定在使用“method(object,...)”语法时是调用它还是调用 Java 方法。

**有没有办法确保我调用 method.m 而不是 Java 方法？**

现在，我猜你的“method.m”在当前目录或路径上的其他地方（两个最低优先级位置）。如果您在调用它的较大代码中将“method.m”作为[子函数](http://www.mathworks.com/access/helpdesk/help/techdoc/matlab_prog/f4-70666.html)，或者如果可以将它放在一个[私有目录](http://www.mathworks.com/access/helpdesk/help/techdoc/matlab_prog/f4-70335.html)中，每个需要调用它的函数都可以调用它，那么它可能会被调用而*不是*使用“method(object,...)”语法时的 Java 方法。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T00:10:16.500

Hmmmmmmmmm.... you could try obtaining a function handle using `@method` and then call [`feval()`](http://www.mathworks.com/access/helpdesk/help/techdoc/ref/feval.html) on the function handle.

That might work but I'm not sure....

# wpf - 在 ListView 中更改后端集合后保持选择状态

> ID：656023
> 
> 赞同：0
> 
> 时间：2009-03-17T21:09:35.247
> 
> 标签：wpf, binding

我有一个列表视图控件，它绑定到我经常更新的可观察集合。当我更新集合时，我清除集合然后添加值。虽然这对于简单的更改来说有点矫枉过正，但它非常简单并且可以完成工作。这样做时，我丢失了在我的列表视图控件中选择了哪个项目，并且无法弄清楚如何在更新后保持所选状态。

我最初认为我可以使用以下（WPF）双向绑定 SelectedValue：

```
SelectedValue="{Binding Path=SelectedDevice, Mode=TwoWay} 
```

然后通过以下方式更新我的收藏：

```
string PreviouslySelectedDevice = this.SelectedDevice;
aCollection.Clear();
// ... Add Items ...
this.SelectedDevice = PreviouslySelectedDevice; 
```

我希望 TwoWay 绑定允许我对后端属性进行更改，这将自动反映在 listView 控件中，但这不起作用。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-17T21:57:06.193

看来您的绑定应该正在更新`SelectedValue`。是`SelectedDevice`一个`DependencyProperty`还是你正在实施`INotifyPropertyChanged`？

# asp.net - 最佳实践：Asp.net WebApp 需要用户认证——开发过程中如何避免一次又一次的登录？

> ID：656042
> 
> 赞同：2
> 
> 时间：2009-03-17T21:13:46.050
> 
> 标签：asp.net

当我开发 ASP.Net webapp 时，它几乎总是需要某种身份验证 - 即。用户必须登录才能工作。

但是当我开发它时，我不想每次更改某些代码时都必须登录。

例如，现在我的 login.aspx 中有一个代码块，它自动将我认证为某个 userId - 并将我重定向回请求的页面。

我还有一些其他的想法对于处理开发和现场来说更优雅——但我想听听你如何处理同样的情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-17T21:29:13.423

你实际上可以完全不同地解决这个问题：使用[单元测试](http://en.wikipedia.org/wiki/Unit_testing)来测试你的代码的一小部分。由于单元测试会自动运行（一旦开始），您将节省登录和导航到正确页面的时间。

当然，您仍然需要通过常规方式登录来进行一些端到端测试，但是根据我的经验，如果您的单元测试全部成功，那么端到端测试中出错的可能性就会低得多，因此重新启动要少得多。

在开发触发正在开发的功能需要大量点击的应用程序时，我已经广泛使用它，并发现它非常节省时间。

当然，其他帖子中的建议对于您仍然需要以正常方式运行应用程序的情况仍然有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-17T21:15:38.837

我总是很懒，只是写一些代码来测试本地主机。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-17T21:19:21.120

您可以根据调试构建与生产构建来更改您的 cookie 实现。保持你的cookies持久，你应该没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-17T21:19:10.247

我为我的客户端使用 Firefox，但让调试器启动 IE。我使用 Firefox 登录，当我启动/停止调试器时，我的 Firefox 客户端保持登录状态。我很少需要再次实际登录——通常是当我离开它的时间足够长以至于会话过期时。我发现我可以容忍它，并且我不会引入任何可能反过来引入安全问题以在 DEV 中以不同方式处理登录的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-31T04:21:16.280

我有时使用的一种技术是在配置文件设置中定义开发机器名称列表。然后在运行时将机器名称与列表进行比较。如果它在列表中，那么我们可以执行一些特殊的代码，以使每个人的开发和调试变得不那么乏味。

# c - 如何在我的 Objective-C 头文件中定义一个数组？

> ID：656046
> 
> 赞同：8
> 
> 时间：2009-03-17T21:14:14.020
> 
> 标签：c, objective-c

我的主文件中有这段代码：

```
int grid[] = { 1 , 1 , 1 , 1 , 1 , 1 , 1 , 1 ,
               1 , 2 , 3 , 2 , 3 , 2 , 3 , 1 , 
               1 , 0 , 0 , 0 , 0 , 0 , 0 , 1 , 
               1 , 0 , 1 , 0 , 1 , 0 , 1 , 1 , 
               1 , 0 , 1 , 0 , 0 , 0 , 0 , 1 , 
               1 , 0 , 0 , 0 , 0 , 0 , 1 , 1 , 
               1 , 1 , 1 , 1 , 1 , 1 , 1 , 0 }; 
```

如何在我的标题中定义它，以便我可以在整个班级中访问该变量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-17T21:22:52.143

```
extern int grid[]; 
```

假设你有一些这样的代码：

```
int grid[] = { 1 , 1 , 1 , 1 , 1 , 1 , 1 , 1 ,
        1 , 2 , 3 , 2 , 3 , 2 , 3 , 1 , 
        1 , 0 , 0 , 0 , 0 , 0 , 0 , 1 , 
        1 , 0 , 1 , 0 , 1 , 0 , 1 , 1 , 
        1 , 0 , 1 , 0 , 0 , 0 , 0 , 1 , 
        1 , 0 , 0 , 0 , 0 , 0 , 1 , 1 , 
        1 , 1 , 1 , 1 , 1 , 1 , 1 , 0 };

int arr_sum(int* arr, int len)
{
    int sum = 0;
    for (int i = 0; i < len; i++) {
            sum += arr[i];
    }
    return sum;
}

int main(int argc, char** argv)
{
    printf("%d\n", arr_sum(grid, sizeof(grid)/sizeof(int) ));
    return 0;
} 
```

如果你想把它分成两个不同的文件，比如说，你可以有以下内容，例如：

在 grid.c 中：

```
int grid[] = { 1 , 1 , 1 , 1 , 1 , 1 , 1 , 1 ,
        1 , 2 , 3 , 2 , 3 , 2 , 3 , 1 , 
        1 , 0 , 0 , 0 , 0 , 0 , 0 , 1 , 
        1 , 0 , 1 , 0 , 1 , 0 , 1 , 1 , 
        1 , 0 , 1 , 0 , 0 , 0 , 0 , 1 , 
        1 , 0 , 0 , 0 , 0 , 0 , 1 , 1 , 
        1 , 1 , 1 , 1 , 1 , 1 , 1 , 0 }; 
```

在 main.c 中：

```
extern grid[];

int arr_sum(int* arr, int len)
{
    int sum = 0;
    for (int i = 0; i < len; i++) {
            sum += arr[i];
    }
    return sum;
}

int main(int argc, char** argv)
{
    printf("%d\n", arr_sum(grid, sizeof(grid)/sizeof(int) ));
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-17T21:28:50.037

您不能在标题中定义它。您必须在标头中*声明*它并在源 ( ) 文件中*定义它：*`.m`

```
// In MyClass.h
extern int grid[];

// In MyClass.m
int grid[] = {...}; 
```

# python - 我可以从 SQLAlchemy 中获取纯数组而不是字典的行吗？

> ID：656050
> 
> 赞同：3
> 
> 时间：2009-03-17T21:17:03.967
> 
> 标签：python, sqlalchemy

我正在尝试优化一些 Python 代码。探查器告诉我 SQLAlchemy 的 _get_col() 是杀死性能的原因。代码看起来像这样：

```
lots_of_rows = get_lots_of_rows()
for row in lots_of_rows:
    if row.x == row.y:
        print row.z 
```

我正要检查代码，让它更像这样......

```
lots_of_rows = get_lots_of_rows()
for row in lots_of_rows:
    if row[0] == row[1]:
        print row[2] 
```

...但我发现一些文档似乎表明在访问像数组这样的行对象时，您实际上仍在提取字典键。换句话说，行对象如下所示：

```
'x': (x object)
'0': (x object)
'y': (y object)
'1': (y object)
'z': (z object)
'2': (z object) 
```

如果是这样的话，我怀疑我会看到按数字而不是名称访问列的性能改进。有没有办法让 SA 以元组列表或列表列表而不是字典列表的形式返回结果？或者，任何人都可以建议任何其他优化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-17T22:33:20.943

原谅显而易见的答案，但为什么您的查询中没有 row.x == row.y ？例如：

```
mytable.select().where(mytable.c.x==mytable.c.y) 
```

应该会给您带来巨大的性能提升。[阅读文档的其余部分。](http://www.sqlalchemy.org/docs/05/sqlexpression.html#selecting)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-17T21:25:26.333

我想`row.items()`这就是你要找的。它返回该行的 (key, value) 元组列表。

[关联](http://www.sqlalchemy.org/docs/05/reference/sqlalchemy/connections.html#sqlalchemy.engine.base.RowProxy)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T22:37:46.313

SQLAlchemy 代理对底层数据库游标的所有访问，以将命名键映射到行元组中的位置并执行任何必要的类型转换。底层实现经过了相当程度的优化，几乎缓存了所有内容。查看反汇编，进一步优化的唯一方法似乎是放弃可扩展性并摆脱几个属性查找，或者诉诸动态代码生成以获得较小的收益，或者为了获得更多收益，实现相应的 ResultProxy 和 RowProxy 类C。

一些快速分析表明，在我的笔记本电脑上每次查找的开销约为 5us。如果只对数据进行微不足道的处理，那将很重要。在这种情况下，下降到 dbapi 级别可能是合理的。这并不意味着您必须失去 SQLAlchemy 的查询构建功能。只需像往常一样执行该语句，然后`ResultProxy`通过访问`result.cursor.cursor`. （`result.cursor`是一个 SQLAlchemy CursorFairy 对象）然后您可以使用常规的 dbapi fetchall()、fetchone() 和 fetchmany() 方法。

但是，如果您确实在进行琐碎的处理，那么这样做可能会很有用，或者至少是数据库服务器上的过滤部分。您可能会失去数据库的可移植性，但这可能不是问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T01:51:59.157

您应该在 '_get_col' 调用周围发布分析器结果以及堆栈跟踪，以便我们知道正在调用哪个 _get_col。（以及 _get_col 是否真的是瓶颈）。

我查看了 sqlalchemy 源代码，看起来它可能每次都在调用“lookup_key”（在 engine/base.py 中），而且看起来这会在本地缓存列值，我猜是懒惰地（通过 PopulateDict）。

您可以尝试通过直接使用 row.__props 绕过它（不推荐，因为它是私有的），也许您可​​以使用 row.cursor，但看起来您可以通过绕过 sqlalchemy（除了 sql 生成）并直接使用游标来获得很多.

-- Ĵ

# asp.net - 我可以从代码中调用 ASP.NET RegSQL 吗？

> ID：656051
> 
> 赞同：4
> 
> 时间：2009-03-17T21:18:29.017
> 
> 标签：asp.net, sql, asp.net-membership

是否可以从托管代码调用（相当于）aspnet_regsql.exe？我的想法是创建一个类来自动为已安装的 Web 应用程序构建数据库，该应用程序使用 ASP.NET 成员资格提供程序。我可能可以直接从代码中调用 aspnet_regsql.exe，但我遇到了 RegSql 类（[http://msdn.microsoft.com/en-us/library/ms229567.aspx](http://msdn.microsoft.com/en-us/library/ms229567.aspx)） - 不幸的是它似乎没有任何方法...

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-17T21:28:16.153

RegSql 类位于 aspnet_regsql.exe 中。它是控制台应用程序的入口点，所以它有一个静态`Main(string[])`方法。

按照 aspnet_regsql 的使用[说明，](http://msdn.microsoft.com/en-us/library/ms229862(VS.80).aspx)我们可以将它期望的参数传递给它。（类似`"-S localhost -U user -P password"`）。输入参数由空格 (' ') 分隔。

# mips - 学习 MIPS 作为第二种汇编语言？

> ID：656055
> 
> 赞同：3
> 
> 时间：2009-03-17T21:19:10.047
> 
> 标签：mips, low-level

我知道 x86 汇编（并且使用过 FPGA 等），从未为 RISC 写过文章，我有机会参加 MIPS 课程，但我现在很忙，所以我的问题是，我知道每一件事我知道在某种程度上是有益的，但实际上，有多少有益？（我是低级热心，但这是必须的吗？）

（我知道[mips-is-it-important](https://stackoverflow.com/questions/99117/mips-is-it-important)，但我觉得我的情况略有不同，因为我已经知道某种组装）

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-17T22:24:33.960

MIPS 的一件有趣的事情是您必须手动管理翻译后备缓冲区 (TLB)。对于 x86（或我编写的大多数其他 ISA），您不必这样做。这样，它比其他 RISC CPU 更 RISC。许多网络和存储设备都嵌入了 MIPS cpu。我在这十年早期工作的一家初创公司做了一个带有加密加速器（作为两个协处理器）的 16 核 MIPS CPU。该设计已被瞻博网络收购，并用于其路由器中的自适应服务 PIC。

因此，正如其他人所说，MIPS 是 RISC ISA 的一个很好的例子，它仍然获得了大量的设计胜利。我觉得学习很有用。

我发现以下书的第一版是学习它的好方法：

[http://www.amazon.com/Second-Morgan-Kaufmann-Computer-Architecture/dp/0120884216/ref=sr_1_1?ie=UTF8&s=books&qid=1237328559&sr=1-1](https://rads.stackoverflow.com/amzn/click/com/0120884216)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-17T21:23:19.443

这当然不是*必须*的，但它是 RISC 架构的一个很好的例子。再加上 IBM 360 体系结构（老实说！），您将对普通指令集的范围有很好的了解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-17T21:25:25.380

我认为学习 MIPS（至少是基本的）并不难，还有[SPIM 模拟器](http://pages.cs.wisc.edu/~larus/spim.html)可以用来观察代码运行。如果你喜欢底层编程，值得一试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-17T21:24:13.917

[另一个问题](https://stackoverflow.com/questions/99117/mips-is-it-important)很好地证明了越来越过时的架构：学习组装本身就很有用。在你的情况下不适用。

我只会在假设已经具备汇编程序知识的情况下才考虑该课程（否则您将花费​​大量时间重复基本概念）。否则，您可能最好将时间花在更相关的事情上（这不太可能是另一个汇编程序，除非您对很快使用特定处理器（系列）抱有很高的期望。

为什么不学习一些新东西（例如函数式编程）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-17T22:01:10.693

当我在学校时（BS CS Michigan Tech 2008），MIPS 汇编（在 SPIM 上运行）在所需的“计算机体系结构介绍”课程中被教授，该课程还涵盖了不同类型的体系结构、缓存、DMA 等。我们还学习了逻辑门和动态/静态存储器如何由二极管、电容器和晶体管等低级组件构成的基础知识（我们没有深入了解；这是 CS 课程）。我们使用逻辑仿真软件（基本上是与/或/等门，您可以将它们拖放到网格上并连接在一起）来构建加法器、ALU，并最终构建一个非常简单的 16 位 RISC 处理器，给出机器代码规范，汇编器、示例程序和示例输出。

如果是那种课程，我会说它会非常有价值。我发现该类的知识对于理解我的操作系统类中的东西（虚拟内存/分页/缓存，中断......）非常有用，然后对于理解 JVM 是如何处理字节码的。了解程序集如何映射到机器代码映射到多路复用器和 ALU 和寄存器，我做了很多我认为是神奇的东西，然后才变得微不足道且易于理解。

否则，这只是在您的工具带中添加另一个指令集，而 MIPS 可能不适合。与 x86 相比，它*非常*简单/直接/常规，所以你不应该在课堂上遇到太多麻烦。可贵吗？如果您总体上对组装相当满意并且出于某种原因需要它，那么您可能很容易在不上课的情况下学会它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-17T22:26:44.250

如果你是低水平的爱好者，这可能是值得的，但你可以在周末自学 mips，所以我想这门课程将不仅仅是用 mips 编程。如果它是使用 mips 的计算机硬件理论课程，那么我认为这值得你花时间。

但是，如果它只是 MIPS 编程并且您已经掌握了 x86 汇编和低级编程的概念，我会说传递课程。schnaader 指出，节省自己的时间和金钱，并花一个周末左右的时间使用[SPIM来处理 MIPS。](http://pages.cs.wisc.edu/~larus/spim.html)

还要记住，如果您从未在汇编中编写过递归函数，那么您还没有充分探索这些东西。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-21T18:56:06.510

我的一门课迫使我们学习 MIPS 汇编语言。嗯，从技术上讲……这是我们自己的定制架构，但主要基于 MIPS。结论，做。了解组装对我的帮助是无限的，尽管我讨厌这么低的工作。

# windows-server-2008 - Windows 2008 Server Core 上的 VMware Server 2

> ID：656060
> 
> 赞同：2
> 
> 时间：2009-03-17T21:19:38.453
> 
> 标签：windows-server-2008, virtualization, vmware-server

我有一台较旧的服务器（实际上是已退役的数据库盒），它不符合 VMware ESX/ESXi 或 Microsoft 的 Hyper-V 的要求，但运行 VMware Server 2 就好了。主机操作系统当前是 Windows 2003 Standard。虽然它可以很好地完成工作，但我希望开箱即用一些更“苗条”的东西。因此，Windows 2008 Server Core 引起了我的注意。

诚然，我从未真正构建过服务器核心盒，但听起来它可能会成为 VMware Server 的出色主机。不过，我还没有找到任何人这样做的例子。所以，在我扭曲工作站进行测试之前，我想我会在这里问：

有人在 2008 服务器核心上尝试过 VMware Server 吗？有什么需要注意的或陷阱吗？

*（是的，我也可以使用 Linux 来获得更薄的主机，但这似乎是提出 2008 服务器核心盒的好借口！）*

编辑：我想我应该提到这个服务器托管我们的开发环境。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-17T22:31:05.630

它行不通。这在[VMware 的 VMware 服务器 2 的常见问题解答中得到了回答：](http://www.vmware.com/products/server/faqs.html)

> 我可以在 Windows Server 2008 主机操作系统的核心安装上安装 VMware Server 2 吗？
> 
> **不可以**，VMware Server 2 只能安装在完整安装的 Windows Server 2008 主机操作系统上。但是，Windows Server 2008 的核心和完整安装都支持作为来宾操作系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T17:55:03.570

确认的。

VMware Server 安装程序以“不支持 Windows 2008 Server Core 安装”停止安装，因此它结束。猜猜我会用精简的 CentOS 来做一个“精简”的主机

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-25T22:09:08.267

在带有 SP2 的 Windows Server 2008 内核上安装了 Virtual Server 版本 2.0.1 build 156745，安装成功完成。但是，在网络界面中执行任务时，我遇到了许多错误（弹出：服务器响应包含一个或多个错误）并且任务从未完成。

然后我了解到核心安装不支持 Vmware 服务器这一事实。

# c# - 如何从位创建字符串？

> ID：656072
> 
> 赞同：1
> 
> 时间：2009-03-17T21:23:17.960
> 
> 标签：c#

我使用以下方法从字符串创建位，但现在我试图做相反的事情，但我不知道该怎么做？

```
public string GetBits(string input)
{
    StringBuilder sb = new StringBuilder();
    foreach (byte b in Encoding.Unicode.GetBytes(input))
    {
        sb.Append(Convert.ToString(b, 2));
    }

    return sb.ToString();
} 
```

我想传入位串并创建字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-17T21:28:25.827

你需要使用~~十六进制~~二进制吗？如果您使用 base-64，事情会更容易（并且更短，长度）：

```
 string s = "abcdefg";
        byte[] bytes = Encoding.UTF8.GetBytes(s);
        string encoded = Convert.ToBase64String(bytes);
        byte[] decoded = Convert.FromBase64String(encoded);
        string s1 = Encoding.UTF8.GetString(decoded); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-17T21:33:10.527

您的 GetBits 方法无法正常工作 - 它不会为每个字节转换 8 位。

作为粗略的修复，您可以使用 PadLeft。这是完整的解决方案：

```
// Fixed version of GetBits, with padding.
public static string GetBits(string input)
{
    StringBuilder sb = new StringBuilder();
    foreach (byte b in Encoding.Unicode.GetBytes(input))
    {
        string lowBits = Convert.ToString(b, 2);
        string eightBits = lowBits.PadLeft(8, '0');
        sb.Append(eightBits);
    }
    return sb.ToString();
}

public static string UnicodeBitsToString(string input)
{
    return Encoding.Unicode.GetString(ParseHex(input));
}

public static byte[] ParseHex(string input)
{
    byte[] ret = new byte[input.Length/8];
    for (int i=0; i < input.Length; i += 8)
    {
        ret[i/8] = Convert.ToByte(input.Substring(i, 8), 2);
    }
    return ret;
} 
```

虽然有点讨厌 - 我很肯定你可以让它更有效率。不过，如果它做你需要它做的事情......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-17T21:29:21.863

Convert::ToInt64 方法（字符串，Int32）

[MSDN](http://msdn.microsoft.com/en-us/library/yk8t68tb.aspx)

# mysql - 如何设置 MySQL 数据库关系

> ID：656078
> 
> 赞同：1
> 
> 时间：2009-03-17T21:24:15.323
> 
> 标签：mysql, database, database-design

我有一个包含两个表“位置”和“类”的数据库。我熟悉使用我的数据库表设置某种父/子情况，但是这个让我陷入了循环。

这种关系的运作方式与您预期的完全一样。“位置”有多个“类”。但是一些“类”在多个“位置”。那么我该如何设置呢？是否需要创建第三个表来处理关系？

我正在使用 MySQL/PHP（以防万一）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-17T21:34:32.270

是的，您需要第三张桌子。这称为[多对多关系](http://en.wikipedia.org/wiki/Many-to-many_(data_model))。该表将（我推荐）有一个主键、一个位置 ID 列和一个类 ID 列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-17T21:39:49.467

是的，您需要第三张表，因为这是多对多关系。

```
 --------         -----------------
|Class   |       | ClassLocation   |        ------------
|--------|       |-----------------|       | Location   |
|Id      | <---- |ClassId          |       |------------|
|Name    |       |LocationId       | ----> |Id          |
|...     |        -----------------        |Name        |
 --------                                  | ...        |
                                            ------------ 
```

如果关系的方向很重要，您甚至可能需要两个额外的表。如果“类属于位置”的含义与“位置属于类”的含义不同，则需要两个连接表，因为只有一个连接表不能说明关系的方向。但我想你的情况并非如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-17T21:38:17.410

```
 locations           location_classes           classes

+----+-------+    +-------------+----------+   +----+-------+
| id | title |    | location_id | class_id |   | id | title |
+----+-------+    +-------------+----------+   +----+-------+
|  1 |   foo |    |           1 |        1 |   |  1 | clas1 |
|  2 |   bar |    |           3 |        1 |   |  2 | clas2 |
|  3 |  test |    |           1 |        2 |   +----+-------+
+----+-------+    |           2 |        2 |   
                  |           3 |        2 |
                  +-------------+----------+ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-17T21:35:18.430

您需要一个连接表：

```
tbl_location
ID: int
Name: Varchar(20)

tbl_class
ID: int
Name: Varchar(20)

tbl_classlocation
ID: int
locationID: int
classID: int 
```

沿着这些思路，基本上 classlocation 表连接了其他两个（locationId 和 classID 都是 location 和 class 表中的外键）

# html - 提交时动态隐藏表单？

> ID：656082
> 
> 赞同：2
> 
> 时间：2009-03-17T21:24:54.057
> 
> 标签：html, dhtml

我不是一个大的网络程序员，有一个朋友想让我帮他做点什么。

他希望能够有一个表单，一旦提交就会更改为“感谢提交”之类的内容，并让表单信息消失。他希望任何人都可以轻松使用它，因此他可以将其提供给不同的人在他们的网站上使用。

我在想我可以使用 javascript 来做到这一点，但不是 100% 确定。我想尽可能避免任何不是 HTML 的东西，以便尽可能多的人使用它。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-17T21:34:38.400

表格中的信息应该如何处理？没关系？

如果您希望它是**纯**HTML，那么只有一个好的解决方案：编写一个带有表单的 HTML 页面，另一个几乎相同的页面，其中包含成功消息并隐藏了表单数据。简单的。

在提交方面：

```
<h1>Email Subscription:</h1>
<form action="successForm.html">
<input type="text" name="emailAddress" />
<button type="submit">Send Info</button>
</form> 
```

在接收方 (successForm.html)

```
<h1>Email Subscription:</h1>
<p>Great job, you submitted!</p> 
```

但是，如果您需要在同一个页面上进行更改，您将不得不使用非 HTML 的内容。HTML 不会对显示的内容做出任何决定。这是愚蠢的......它只是显示。

很容易使用 JavaScript 检测表单何时提交，然后***隐藏****需要隐藏的元素*，并***显示****成功信息*：

```
<!-- Goes in the <head> or in a seperate script -->
<script type="text/javascript">
    var theSubmitButton = document.getElementById('formSubmit');

    theSubmitButton.onclick = function() {
        var theFormItself = 
            document.getElementById('theForm');
        theFormItself.style.display = 'none';
        var theSuccessMessage = 
            document.getElementById('successMessage');  
        theSuccessMessage.style.display = 'block';          
    }
</script>

<!-- Goes in the body -->
<h1>Email Subscription:</h1>
<p id="successMessage">You submitted the form, good job!</p>
<form id="theForm" action="successForm.html">
    <input type="text" name="emailAddress" />
    <button id="formSubmit" type="submit">Send Info</button>
</form> 
```

Of course, this example is oversimplified. It doesn't do anything with the data, and it doesn't follow best practices, or check that the data is valid in any way. I'm just trying to give a basic idea of how to use JavaScript for this purpose. If you're not a programmer, then coming up with a small, distributable piece of software might be a good job for someone else.

However, you still need some mechanism to store, email or otherwise DO something with the form. Add an edit to your question and I'll be happy to clarify my answer with a specific example.

(Another note, I didn't try to run that Javascript, so if you see an error, please just note and I'll fix it)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-17T21:36:15.637

Try the [jquery form plugin](http://www.malsup.com/jquery/form/). This will achieve what you're after in an elegant way with minimal coding. In addition to this you'll need to download jquery.

This is a javascript solution, however it's safe to assume that everyone is using a javascript capable browser.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-17T21:36:38.147

The standard way to do this is to submit the form to a different page (submit.php, for example), which provides a new page with the thankyou message. No javascript, no DHTML.

You could use javascript to replace the innerHTML of a huge div containing everything, or remove all the elements, but I'd advise against it.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-17T21:37:28.287

There's 2 options:

1.  Old school forms: Person clicks submit and form data gets sent server side via GET or POST, the page loads again and displays "Thanks for submitting"

2.  New school javascript AJAX Person clicks submit and javascript submits form data to server side via AJAX and removes the form elements to then add "Thanks for submitting"

Anything else is some hybrid of both these techniques.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-08T23:46:50.970

I know you want to avoid anything other than html but this simple php code may help. You could use php within the page

*   fill out form and press submit to send data to form handler
*   In form handler, have data processed and then redirect back to the form page with a `header('Location: yourwebaddresshere?form=submited');`

Then in the original form page, add a php IF statement above the form code:

```
$url = "http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']; 

if(strpos($url, 'form=submited')) {
echo 'Your thank you message here';
exit(); // Use this to stop code after this statement from loading
} 
```

# javascript - JQuery 无法识别 #id 选择器，似乎依赖于 URL

> ID：656088
> 
> 赞同：2
> 
> 时间：2009-03-17T21:27:17.920
> 
> 标签：javascript, jquery

我正在编写一个 Ruby on Rails 应用程序。以下 jQuery 代码包含在 index.html.erb 文件的 head 标记中，该文件是站点上所有页面的模板。

```
<script>
  $(document).ready(function() {
    $("#select_mailshot").click(function () {
      alert('mailshot');
      document.location.href = "/products/1";
    });
    $("#select_blog").click(function () {
      alert('blog');
      document.location.href = "/messages";
    });
    $("#select_contact").click(function () {
      alert('contact');
      document.location.href = "/contacts/1";
    });
  });
</script> 
```

（警报步骤在那里用于调试）

index.html.erb 中的以下 html 代码

```
<ul>
  <li id="select_mailshot">Mailshot</li>
  <li id="select_blog">Blog</li>
  <li id="select_contact">Contact us</li>
</ul> 
```

这样做的目的是有效地创建 3 个按钮。

单击[http://myurl.com/](http://myurl.com/)中的任何按钮时，一切正常。

单击[http://myurl.com/messages](http://myurl.com/messages)中的任何按钮时（通过中间按钮访问此按钮），一切正常

从[http://myurl.com/products/1](http://myurl.com/products/1)开始时，它都停止工作（警报不会触发）。事实上，当从[http://myurl.com/anything/id](http://myurl.com/anything/id)开始时，它会停止工作。

我已经尝试解决这个问题几个小时了，据我所知，工作条件和非工作条件之间的唯一区别是 url。

任何人都可以解释这里发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-17T21:33:16.453

萤火虫告诉你什么？页面上是否有 javascript 错误？如果有，它们是什么？您确定 jQuery 库正确包含在较深的页面中（即它是相对路径吗？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-17T21:32:21.450

这是javascript内联吗？

如果不是，那么链接可能是相对的，因此当您尝试从 messages/40 加载它时，您需要**../script.js**。另一种解决方案是使用绝对 URL ( [http://myurl/script.js](http://myurl/script.js) ) 或虚拟 (/script.js)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-17T21:39:36.347

感谢 cherouvim 和 digitaljoel。

这是由于相对于当前 URL 包含的 javascript 文件。

以下内容包含在 head 标签中

```
<script type="text/javascript" src="javascripts/jquery-1.3.2.js"></script> 
```

我把它改成

```
<script type="text/javascript" src="/javascripts/jquery-1.3.2.js"></script> 
```

（注意 src 属性中额外的“/”），一切都按预期工作。

我在检查服务器和浏览器上的错误日志后解决了这个问题。

感觉有点笨，但吸取了教训。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-08-15T04:24:46.043

我正在使用 FaceBox 创建模态叠加层，但我不知道为什么会遇到同样的问题。

我发现监听器直到它可见才被附加到 HTML 元素上。（如果我查看源代码，这些项目是可用的，但 jQuery 似乎在它可见之前不会附加监听器。）

对于任何有同样问题的人，我建议将您的 click() 代码移动到您所附加的 HTML 元素可见的位置。

此外，我发现按 ID 选择确实比课程带来更多问题。我不知道为什么。（不，没有重复的 ID。）

希望这可以帮助有同样问题的人！

# c# - JIT 编译如何用于缓存？

> ID：656090
> 
> 赞同：3
> 
> 时间：2009-03-17T21:27:47.840
> 
> 标签：c#, .net, jit

当你用 C# 编写一个应用程序，然后运行它时，它会不会在下次运行时再次编译，或者每次应用程序启动时都会重新编译使用的所有内容？

JIT 编译如何用于缓存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-17T21:30:00.690

对于不在 ngen'd 中的任何 DLL，每次运行应用程序时，它都会重新 JIT 使用的代码。在运行相同的非 ngen'd DLL 之间没有 JIT 代码缓存。

**编辑**清除了 GAC 和 NGEN 的错误

# asp.net - ASP.net RequiredFieldValidator 不阻止回发

> ID：656098
> 
> 赞同：25
> 
> 时间：2009-03-17T21:29:13.517
> 
> 标签：asp.net, validation

我有一个关于什么可以阻止RequiredFieldValidator 阻止回发的问题。

我开始研究一个较旧但简单的 aspx 表单，而我的前任使用手动的服务器端表单验证（检查某些表单字段是否有值，以及是否在标签中显示错误消息）。我想我会清除一些不需要的代码并用RequiredFieldValidator 控件替换手动检查，但是虽然它们似乎正在验证，但它们并没有阻止回发。即，我显示了我的错误消息，但回发仍然发生。

表单非常简单，没有设置 CausesValidation="false" 属性。我的控件如下所示：

```
 <asp:TextBox ID="txtPhone" Runat="server" Columns="20" MaxLength="20" />
 <asp:RequiredFieldValidator ID="rfvPhone" runat="server" Display="Dynamic"
      ErrorMessage="* Required" ControlToValidate="txtPhone" /> 
```

我在同一个项目中创建了一个全新的网络表单，只有一个文本框、验证器和提交按钮，它的行为方式相同。错误消息显示，但回发仍然发生。

是否存在会导致这种行为的全局或项目范围的设置？web.config 或 global.asax 中的内容？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-03-17T22:30:48.487

唷。好的，我发现了问题，基本上是通过创建一个全新的项目并将其 web.config 与我的旧项目逐行比较。原来罪魁祸首是这样的：

```
 <xhtmlConformance mode="Legacy"/> 
```

如果我删除该行，我的验证会按照我预期的方式进行。谷歌搜索发现了一堆关于 VisualStudio 如何在将 Web 应用程序从 .net 1.1 升级到 .net 3.5 时将该行添加到 web.config 的博客文章。

博客文章主要抱怨该字段如何干扰 .net 的 AJAX 内容，但我猜它会以类似的方式与为 RequiredFieldValidator 发出的 JavaScript 混淆。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-03-17T21:37:32.543

验证可以在客户端（如果可用）或服务器上进行。验证器的工作不是防止回发，而是验证输入。

确保您启用了 javascript，并尝试将“EnableClientScript”显式设置为 true。

在代码隐藏中，您永远不应该相信验证器正在客户端上进行验证，并且始终使用`"if Page.IsValid"`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-09-13T13:28:43.543

我遇到了同样的问题，但结果却大不相同。我还从服务器端硬编码验证升级到 .NET 验证。

[就我而言，这个问题与 MSDN 文章URL Rewriting in ASP.NET 中](http://msdn.microsoft.com/en-us/library/ms972974.aspx)使用的 ASP.NET 重写引擎有关。使用“无操作表单”的默认实现是罪魁祸首——显然这是基于早期版本的 .NET 编写的，并且表单上阻止回发的 JavaScript 没有被发送到输出，因为它缺少代码.

无论如何，如果其他人正在使用这个重写引擎，解决方案是将 ActionlessForm 的默认实现更改为以下内容：

```
Public Class Form
    Inherits System.Web.UI.HtmlControls.HtmlForm

    Protected Overrides Sub Render(ByVal writer As System.Web.UI.HtmlTextWriter)
        MyBase.Render(New ActionlessFormHtmlTextWriter(writer))
    End Sub

End Class

Public Class ActionlessFormHtmlTextWriter
    Inherits HtmlTextWriter

    Sub New(ByVal writer As HtmlTextWriter)
        MyBase.New(writer)
        Me.InnerWriter = writer.InnerWriter
    End Sub

    Sub New(ByVal writer As System.IO.TextWriter)
        MyBase.New(writer)
        MyBase.InnerWriter = writer
    End Sub

    Public Overrides Sub WriteAttribute(ByVal name As String, ByVal value As String, ByVal fEncode As Boolean)

        Dim Context As HttpContext = HttpContext.Current

        'Skip the action attribute of the form control.
        If Not (name = "action") OrElse Not Context.Items("ActionAlreadyWritten") Is Nothing Then

            MyBase.WriteAttribute(name, value, fEncode)

        Else
            Context.Items("ActionAlreadyWritten") = True
        End If
    End Sub

End Class 
```

这只是简单地抑制 action 属性，但允许框架中的任何其他逻辑运行。如果 Microsoft 决定再次更改表单，这将在未来证明这一点*。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-17T21:35:38.010

您可以尝试 `EnableClientScript="True"`为RequiredFieldValidator 提供一个显式参数吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-17T21:39:06.050

如果您在文本框中按“Enter”来提交表单，我认为验证器不会阻止回发。

# xml - 如何显示待办事项列表之间的关系？

> ID：656101
> 
> 赞同：0
> 
> 时间：2009-03-17T21:29:36.917
> 
> 标签：xml, bash, devtools

如何显示 ToDo 列表之​​间的关系？我正在使用 Devtodo。

我举个例子。我在一个 XML 文件中有我的 MIT 幽默：

> ```
>  <todo version="0.1.19">
>      <note priority="low" time="1237320287">
>          see the MIT humor-video
>      </note> 
>  </todo> 
> ```

其他文件是关于 Usenet-humor

> ```
>  <todo version="0.1.19">
>      <note priority="verylow" time="1237321441">
>          read about Usenet Humor
>      </note> 
>  </todo> 
> ```

当我更改我的一个幽默文件时，我希望有一个提醒，显示我的其他待办事项列表，标题中有一个单词“幽默”。

**部分解决方案**

我试图在我的 .bashrc 中向 cd 命令添加一个属性，该属性不断向我显示我的主要待办事项列表：

> 别名='ls(); 查找 /* -name mainlist'

但我觉得我正在以一种艰难的方式完成这项工作。您如何管理文件夹之间的待办事项列表？你有很多脚本来显示 Todo 列表之​​间的关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T09:11:50.520

我想我会用 '`<topic>humor</topic>`标记将一些单词标记为键，然后编写一些可以搜索待办事项以找到相关内容的内容。但我认为主题会更少。因此，只需在您的应用程序中保留所有打开的待办事项的主题索引，而不是在 XML 中。

# java - Hibernate：检索未连接的行

> ID：656107
> 
> 赞同：0
> 
> 时间：2009-03-17T21:31:02.560
> 
> 标签：java, hibernate, jpa, persistence

我有两个表与这样的实体连接在一起（实体匿名，并修剪了不相关的属性）：

电子邮件 - Email_ID - 标题 - 正文（hibernate 在这里使用 Body_ID 字段）

正文 - Body_ID - Body_Text

我想检索所有没有关联正文行的电子邮件条目（即，Body_ID 为空）。什么 HQL 会这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-17T21:36:47.430

假设您有一个带有 @OneToOne 或 @ManyToOne 到正文的电子邮件对象：

`select e from Email as e where e.body is null`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-17T21:36:55.277

假设电子邮件只能有一个正文：

```
来自电子邮件 e，其中 e.body 为空

```

# sql-server - 从 ADO.NET 类型化数据集创建 SQL 数据库

> ID：656110
> 
> 赞同：3
> 
> 时间：2009-03-17T21:31:44.117
> 
> 标签：sql-server, ado.net, dataset

我在 Visual Studio 中定义和设计了一个数据集。

谁知道在 SQL Server 中生成表以匹配数据集的工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T21:45:43.000

这是一篇我发现非常有助于建立一个类来做到这一点的文章。

[http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/4929a0a8-0137-45f6-86e8-d11e220048c3/](http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/4929a0a8-0137-45f6-86e8-d11e220048c3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T11:11:00.203

我不知道有任何工具可以做到这一点——但您始终可以使用 SMO（SQL Server 管理对象）来读取数据集的结构并从中创建数据库表。

马克

# c# - 使用 webbrowser C# winform 实现文件夹资源管理器

> ID：656111
> 
> 赞同：-1
> 
> 时间：2009-03-17T21:31:45.087
> 
> 标签：c#, browser, directory, explorer

我正在尝试使用 webbrowser 创建一个文件夹资源管理器，但我遇到了一些问题，我在网上找不到任何答案......所以我会很感激你的回答：

1.  有人可以解释一下如何创建向上按钮（转到父文件夹）吗？
2.  如何像在 Windows 资源管理器中一样将资源管理器栏（左侧）收藏或搜索？
3.  如何实现撤消功能（取消删除文件和文件夹）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-17T22:37:42.167

我会做什么拦截对 url 的调用并从您的应用程序中注入数据。这样您就可以编写 HTML 并显示您想要的任何功能。

此[代码项目 WebBrowser 控件](http://www.codeproject.com/KB/cpp/ExtendedWebBrowser.aspx)也可能很有用。如果它允许您处理导航栏上的按钮单击事件，我不会感到惊讶。

# apache-flex - 有没有更好的方法来使用 Flex Builder 和 AMF Gateway？

> ID：656121
> 
> 赞同：0
> 
> 时间：2009-03-17T21:34:49.570
> 
> 标签：apache-flex, jboss, amf, gateway

我正在使用 Flex Builder 3 通过 AMF 网关连接到一堆后端代码。另一位开发人员将所有 AMF 网关代码打包到一个 war 文件中。这是我的开发过程：

*   将最新的 AMF-gateway.war 文件部署到本地 jboss 服务器
*   战争文件被解压到 [jboss]/server/tmp/deploy/tmp23241AMF-gateway-exp.war/
*   运行 Flex 生成器。将应用程序项目指向 AMF Gateway tmp 文件夹的 3 个位置（Flex 服务器根文件夹、Flex 构建输出文件夹、Flex 编译器“附加参数”（指向 services-config.xml 的位置）。

这种设置意味着每当您在 Flex Builder 中启动调试会话时，它会将文件的工作版本转储到 jboss 服务器上的 AMF-gateway 文件夹（别名为 /AMF-gateway）。问题是，每次我重新启动 jboss 或部署更新的 AMF-gateway.war 文件时，它都会以新名称解压到一个新的临时文件夹中，我需要更改 Flex 项目中的所有引用。这种情况一天会发生好几次，很烦人。我可以简化此配置吗？我尝试使用该文件夹的别名——认为我可以编写更改脚本——但 Flex Builder 似乎不喜欢它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-21T03:24:03.987

如果我没记错的话，您可以在 JBoss 中创建一个目录，服务器会将其视为分解的战争文件。我没有方便检查的 JBoss 副本，但我记得创建了一个目录，例如“context-name.war”，并且能够针对它进行开发。因此，无需将打包的 .war 文件复制到部署目录，您可以直接将其解压缩到该目录。如果我没记错的话，JBoss 将监视 web.xml 文件的更改，如果它被覆盖，它将重新部署上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T22:14:36.853

而不是使用 XML 方法：（即 SOAP/WSDL/REST），尝试使用 AMF 将 C# 等不同的网关直接移植到数据库。

[http://specialmoves.com/labs/code/flash-data-transfer-using-fluorinefx](http://specialmoves.com/labs/code/flash-data-transfer-using-fluorinefx)

# nlp - NLP：形态学操作

> ID：656128
> 
> 赞同：1
> 
> 时间：2009-03-17T21:35:53.187
> 
> 标签：nlp

我正在尝试为一项作业构建一个 NLP 系统，我可以为此使用外部库。
我正在使用解析树将句子分解为名词、动词等的组成部分。
我正在寻找一个库或软件，它可以让我识别单词的词汇形式，并可能将其翻译成其他形式为了我。
基本上，我需要具有 isPlural、singularize、getInfinitive 等功能的东西。
我考虑过 Ruby Linguistics 包和一个简单的 Porter Stemmer（用于不定式），但两者都不是很好。
这似乎不是一个很难的问题，只是非常乏味。
有谁知道可以做这样的事情的好包/库/软件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T15:17:55.770

通常，为了构建一个句子的解析树，首先需要确定句子中单词的词性和词条信息。所以，你应该已经有了这些信息。

但无论如何，为了将词形映射到它们的词形，并从词形合成词形，请查看[`morpha`and ，以及`morphg`](http://www.informatics.sussex.ac.uk/research/groups/nlp/carroll/morph.html)[SimpleNLG 包](http://www.csd.abdn.ac.uk/~ereiter/simplenlg/)`morphg`中包含的 Java 版本（或前端到）。有类似,等的方法。参见例如[Verb 类的 API](http://www.csd.abdn.ac.uk/~ereiter/simplenlg/api/simplenlg/lexicon/lexicalitems/Verb.html)。`getInfinitive``getPastParticiple`

# objective-c - 如何以编程方式创建 GUI 并响应 Cocoa 事件？

> ID：656129
> 
> 赞同：9
> 
> 时间：2009-03-17T21:35:54.780
> 
> 标签：objective-c, cocoa

我发现了如何以编程方式在 Cocoa 中创建一个窗口，但不知道如何对事件做出反应。窗口对退出请求或按钮单击没有反应。

我尝试添加以下控制器并使用 setDelegate/setTarget 没有运气：

```
 @interface AppController : NSObject {
    }
    - (IBAction)doSomething:(id)sender;
    @end

    @implementation AppController
    - (IBAction)doSomething:(id)sender;
    {
        printf("Button clicked!\n");
    }
    @end

    int main(int argc, char **args){
        NSRect frame = NSMakeRect(0, 0, 200, 200);

        AppController *controller = [[AppController alloc] init];

>       [[NSApplication sharedApplication] setDelegate:controller];
        NSWindow* window  = [[NSWindow alloc] initWithContentRect:frame
                                            styleMask:NSBorderlessWindowMask|NSClosableWindowMask|NSMiniaturizableWindowMask|NSResizableWindowMask
                                            backing:NSBackingStoreBuffered
                                            defer:NO];
        [window setBackgroundColor:[NSColor blueColor]];

        NSButton *button = [ [ NSButton alloc ] initWithFrame: NSMakeRect( 30.0, 20.0, 80.0, 50.0 ) ];
        [ button setBezelStyle:NSRoundedBezelStyle];
        [ button setTitle: @"Click" ];
>       [ button setAction:@selector(doSomething:)];
>       [ button setTarget:controller];
        [ [ window contentView ] addSubview: button ];

        [window makeKeyAndOrderFront:NSApp];

        [[NSRunLoop currentRunLoop] run];
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-18T01:56:55.697

您需要调用 -[NSApplication run] 而不是 -[[NSRunLoop currentRunLoop] run]。如果您查看该方法的基本结构，则原因应该很清楚：

```
- (void)run
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    [self finishLaunching];

    shouldKeepRunning = YES;
    do
    {
        [pool release];
        pool = [[NSAutoreleasePool alloc] init];

        NSEvent *event =
            [self
                nextEventMatchingMask:NSAnyEventMask
                untilDate:[NSDate distantFuture]
                inMode:NSDefaultRunLoopMode
                dequeue:YES];

        [self sendEvent:event];
        [self updateWindows];
    } while (shouldKeepRunning);

    [pool release];
} 
```

NSApplication 封装了很多关于如何获取事件、如何调度它们以及如何更新窗口的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T00:47:55.597

> 我发现了如何以编程方式在 Cocoa 中创建一个窗口……</p>

为什么？为什么不做一个笔尖？

> 窗口对退出请求或按钮单击没有反应。

你会如何退出一个窗口？这不是 Windows 3；Mac OS X 上的应用程序可以有多个窗口。因此，关闭窗口和退出应用程序是单独的操作。

> [[NSRunLoop currentRunLoop] 运行];

除非在极少数情况下，运行运行循环是 NSApplication 的工作，你应该把它留给它。使用`NSApplicationMain`或`-[NSApplication run]`告诉应用程序运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-18T02:10:06.023

很好的问题。我认为 Matt Gallagher 已经回答了这个问题，但如果你想更进一步，你必须深入研究 Apple 的[事件处理文档](http://developer.apple.com/documentation/Cocoa/Conceptual/EventOverview/Introduction/Introduction.html)。请记住，以编程方式进行所有操作都需要对[可可基础知识](http://developer.apple.com/documentation/Cocoa/Conceptual/CocoaFundamentals/Introduction/Introduction.html)有扎实的了解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-24T12:43:52.907

我花了一整天的时间寻找这个问题的 GUI 和菜单部分的答案。对于这个问题，目前没有那么多简明扼要的答案。因此，在为自己解决之后，我在此处的 Stack 上发布了一个解决此问题的答案：[Cocoa GUI Programmatically](https://stackoverflow.com/a/21987979/754494)。我在这里添加了一个推荐，以帮助正在挖掘相同答案的社区成员。

# c# - 将查找表从数据库加载到 C# 程序 - 数据结构？

> ID：656130
> 
> 赞同：1
> 
> 时间：2009-03-17T21:36:09.490
> 
> 标签：c#, list, data-structures, lookup

我有一个表，里面有我需要在程序中引用的 id、类别和权重，因为我在读取包含这些类别的记录时。从数据库中读取这些内容并将其放入我可以参考的结构中的最有效方法是什么？

ID（可能还有名称）将是唯一的

数据可能如下所示：

```
ID,Category,Weight
1,Assignment,5
2,Test,10
3,Quiz,5
4,Review,3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-17T21:40:00.573

最好的办法是使用 DataReader 读取表格，然后将每一行放入包含类别和权重的对象中，然后将每个对象放入字典中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-17T22:01:37.197

如果您使用的是 .NET 的更高版本，则始终可以使用 Linq 为您获取该数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-17T21:56:09.270

如果您想避免数据库命中以获取静态数据，您可以将这些值硬编码到解决方案中的公共类中。Dictionary 集合在这里也可以正常工作。

当然，权衡是；2 个位置来管理任何可能的未来变化。

# asp.net - 想要在 ASP 中线程化生成页面的请求

> ID：656136
> 
> 赞同：0
> 
> 时间：2009-03-17T21:37:07.787
> 
> 标签：asp.net, multithreading, asp.net-2.0

我有一个希望能够生成和保存的 ASP.NET 页面。该页面需要*很*长时间才能加载，因此我想在单独的线程中进行加载，同时使用请求该页面的用户的会话（这样页面看起来就像他们自己查看时的样子）。

从代码隐藏中打开一个新线程会破坏 Request 对象和 Server.Execute，因此我需要另一种方法来发出此请求，以允许用户在请求发生时查看其他页面。

有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-17T21:57:27.567

您绝对可以通过对请求和会话数据使用外观来做到这一点。但是，这将要求您更改页面中的所有代码以使用外观，而不是直接调用 Request 或 Session。

启动单独的线程时，创建一个新的（自定义）SessionData 对象，该对象存储您需要的有关 Request 和 Session 的所有信息，并将其存储在数据库或[HttpRuntime.Cache](http://msdn.microsoft.com/en-us/library/system.web.httpruntime.cache.aspx)中。将该对象的标识符传递到您的线程中，以便该线程知道要使用哪个 SessionData 对象。

如果您在您的特殊工作线程中，您可以使用 ID 实例化您的 SessionFacade。否则，不带参数实例化它。

这是 SessionFacade 的示例，希望足以让您入门：

```
class SessionFacade
{
    private string _threadID;

    public SessionFacade() { }

    public SessionFacade(string threadID)
    {
        this._threadID = threadID;
    }

    public object this[string key]
    {
        get
        {
            return this.GetData(key);
        }
    }

    protected object GetData(string key)
    {
        if(!string.IsNullOrEmpty(this._threadID))
        {
            return ((SessionData)HttpRuntime.Cache[this._threadID])[key];
        }
        else
        {
            return Session[key];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T22:16:32.567

在我们的特殊情况下，问题是我们请求的每个页面都持有一个会话锁。这使得一次无法访问多个页面：

[http://blogs.msdn.com/amitsh/archive/2007/08/01/why-i-cannot-execute-two-requests-from-the-same-session-simultaneously-for-an-asp-net-应用程序.aspx](http://blogs.msdn.com/amitsh/archive/2007/08/01/why-i-cannot-execute-two-requests-from-the-same-session-simultaneously-for-an-asp-net-application.aspx)

> 这是预期的行为。这背后的原因是会话状态实现了读写器锁定机制：
> 
> *   默认情况下，具有会话状态写入访问权限的页面（或框架）（例如 <%@ Page EnableSessionState="True" %>）将在会话上保持写入器锁定，直到请求完成。
>     
>     
> *   具有会话状态读取访问权限的页面（或框架）（例如 <%@ Page EnableSessionState="ReadOnly" %>）将仅持有会话上的读取器锁定，直到请求完成。
>     
>     
> *   正如我们基于锁的概念所理解的那样——读取器锁将阻塞写入器锁；读卡器锁不会阻止读卡器锁；一个 Writer 锁将阻塞所有的 reader 和 writer 锁。
>     
>     
> 
> This lock is acquired within the event AcquireRequestState and released in the event ReleaseRequestState of a request. That's why if two frames/pages both have session state write access (the default option unless you use EnableSessionState="ReadOnly" ), one frame/page has to wait for the other to finish.

By setting EnableSessionState to ReadOnly, we could push a redirect (and thus request another page) while waiting for the first page to finish executing in the background.

# c# - GAC 与 JIT

> ID：656140
> 
> 赞同：5
> 
> 时间：2009-03-17T21:37:40.313
> 
> 标签：c#, .net, optimization, gac

GAC 下的所有内容都经过预编译（nened）吗？如果是这样，那么所有 .NET 都是预编译的，所以 CLR 不可能在运行时优化它们？

就像您在应用程序中使用 List 一样，CLR 将无法优化 List 本身，而只能优化它在您的应用程序中的使用方式？这难道不会违背 JIT 的目的，即在运行时获得大量优化吗？如此有效地失去了 BCL 的所有潜在优化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-17T21:40:10.743

不，GAC 不会自动预 JITted；但是，GAC 是 pre-JIT 的先决条件。实际上，只有一小部分东西是预先 JITted 的。除此之外 - 如果 BCL 是预先 JIT 的，那么 NGEN 已经完成了这些优化*，因此**“***失去所有潜在的优化”不是问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-17T22:54:16.010

GAC 可以包含非 ngen 代码（它必须包含它以及使用 ngen 时的本机图像，因为 ngened 图像不包含所有需要的元数据）。Ngen 的代码需要将 dll 安装在 GAC 中才能有效运行（从技术上讲，您可以不这样做，但生成的名称验证会触发对您的 dll 的完整读取，*这*可能会使您的启动时间*更糟*）。

在 3.5 sp1 之前，ngen 编译肯定与运行时编译略有不同，有关更多详细信息，请参阅[本文。](http://www.codeguru.com/columns/experts/article.php/c4651)我想这对于 3.5SP1 仍然适用，因为这些问题很难解决。

由于 ngen 只真正为您带来两个重大胜利，您应该考虑其中一个/两个在您的场景中是否重要，以证明与它们的使用相关的复杂性和成本是合理的。

1.  这些 dll 的启动时间大大减少
    *   尽管需要生成所有在启动时加载的 dll 以避免加载 jit 本身的开销，但要获得真正的巨大胜利）
2.  本机映像可以跨多个进程共享内存空间。
    *   如果您只运行一两个进程，那将毫无意义。

我建议[这篇详细介绍 2.0 ngen 中的一些变化的文章](http://msdn.microsoft.com/en-gb/magazine/cc163808.aspx)是一本不错的读物，它涵盖了诸如硬绑定之类的内容，这是一个很大的改进，并链接到了关于编写高效托管代码的优秀一般文档，尽管它受到了链接腐烂的影响，请参阅[msdn第5章](http://msdn.microsoft.com/en-us/library/ms998547.aspx)所指。（请注意，该文档很旧，但许多主题仍然有效）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-17T21:41:07.950

不，全局程序集缓存未预编译。

较新版本的框架确实有一个在后台运行的优化服务，它会进行一些预编译。但是当它在目标系统上运行时，它所做的所有预编译都针对该特定系统进行了优化。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-03-17T21:47:51.520

如果从 GAC 加载程序集，则会跳过强名称验证，因为该程序集已经过验证。GAC 的另一个优点是文件保护（仅限管理员）。

NGEN 有自己的本地图像存储。在不先将程序集放入 GAC 的情况下使用 NGEN 有点意义。在这种情况下，加载程序集将导致验证其 SN 签名，这意味着每次加载程序集时都会重新创建加密哈希。

使用 ngen 时的最佳实践是将程序集也放入 GAC。

# django - 控制器逻辑和模板逻辑，与分页的界限在哪里？

> ID：656143
> 
> 赞同：4
> 
> 时间：2009-03-17T21:38:28.767
> 
> 标签：django, model-view-controller, django-templates

MVC 框架的全部意义在于将设计（模板）与逻辑（控制器）分开。然而，模板语言通常提供有限程度的“设计逻辑”发生。这包括基本的 if 语句、循环、过滤等。

我创建了一个 Django 模板标签，它可以接受任何列表或 QuerySet 并“分页”它。它根据指定的页面大小将列表拆分为页面，然后将页面添加到上下文中。用法如下：

```
{% pagify articles by 20 as pages %} 
```

然后我可以调用一个单独的包含来遍历页面，并在我需要的地方生成一个漂亮的页面列表。

这似乎是一种最佳方式，因为它允许我在上下文中对任何列表进行分页；我不必依赖控制器来返回分页结果。但一位同事认为，这对于模板来说似乎过于逻辑。我认为这仍然属于基于设计的逻辑领域，因为即使没有分页，页面仍然可以运行，并且确定页面大小感觉像是模板的责任。

我的问题是，模板的逻辑是否太多？或者这是一种干净的方式来处理这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-17T21:45:30.233

我一直认为，这种观点不应该没有逻辑。它只是应该没有任何控制器逻辑。分页只与数据的显示方式有关，这正是视图逻辑应该包含的内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-18T05:16:56.560

这么说；如果您在另一种媒体中使用您的数据模型，例如，不是在 Web 上，而是通过某种基于控制台的应用程序或后台任务，该怎么办？能够通过控制器（或管理器）获取数据“页面”而不是不得不以某种方式依赖模板为您完成这项工作，这不是很好吗？

虽然我当然同意分页数据的“外观”应该由您的模板处理，但分页的“行为”应该留给控制器（Django 视图）甚至通过某种自定义管理器（models.经理）方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-17T21:44:23.527

视图不应包含业务逻辑或导航逻辑。您所描述的是表示功能（此处小心避免使用 l 字），它可以放置在视图层中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-18T11:59:49.367

您可能想查看[django-pagination](http://code.google.com/p/django-pagination/)，它提供了类似的模板标签。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-17T21:44:31.577

我同意你的同事的观点；应该为模板提供分页数据，而不是执行分页。我认为关键问题是确定页面大小是否是模板职责，我不这么认为；我会说它应该在更高的水平上处理。

# python - 为什么 Python 2.6 增加了一个全局的 next() 函数？

> ID：656155
> 
> 赞同：14
> 
> 时间：2009-03-17T21:42:39.053
> 
> 标签：python, python-2.6

我注意到 Python2.6 在它的[全局函数列表中](http://docs.python.org/library/functions.html)添加了一个 next() 。

> [`next(iterator[, default])`](http://docs.python.org/library/functions.html#next)
> 
> ```
> Retrieve the next item from the iterator by calling its next() method. 
> ```
> 
> 如果`default`给出，则在迭代器耗尽时返回，否则 `StopIteration`引发。

添加这个的动机是什么？你能用你`next(iterator)`不能做的事情`iterator.next()`和`except`处理 StopIteration 的子句做什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-17T21:52:54.800

这只是为了与`len()`. 我相信内部`next(i)`调用`i.__next__()`。

见[http://www.python.org/dev/peps/pep-3114/](http://www.python.org/dev/peps/pep-3114/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-03-18T00:31:36.823

请注意，在 Python 3.0+ 中，该`next`方法已重命名为`__next__`. 这是因为一致性。`next`是一种特殊方法，特殊方法按约定命名（PEP 8），带有双前导和尾随下划线。特殊方法并不意味着直接调用，这就是`next`引入内置函数的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-17T22:09:34.947

它在内部调用`__next__`，但它使它看起来比“面向对象”更“功能性”。请注意，这只是我的意见，但我不喜欢`next(i)`而不是`i.next()`。但正如史蒂夫麦克所说，它也有助于保持一致性。

# html - 从 html 中提取表格到命令行中的 excel

> ID：656156
> 
> 赞同：4
> 
> 时间：2009-03-17T21:42:49.943
> 
> 标签：html, excel, macos, command-line

将 HTML 文档中的表格转换为 excel 可读文件的最佳方法是什么？我希望这是一个命令行工具，我可以在我的 mac 上用 bash 调用它，因为我想批量处理一堆 HTML 文件。

我知道我可以编写一个脚本来相当容易地做到这一点，但我正在寻找可以从命令行调用的通用现有工具。我希望尽可能保留格式，但如果没有其他易于安装和设置的东西符合要求，我愿意回退到 CSV。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-08-17T12:58:57.613

Excel 可以读取/打开带有表格的 HTML 文档，无需转换。它会自动将表格单元格映射到工作表单元格。

试试这个：

*   将以下数据保存在扩展名为 .html 的文件中。
*   用 Excel 打开文件

> ```
> <table>
> <tr>
> <th>Heading1</th>
> <th>Heading2</th>
> </tr>
> <tr>
> <td>R1, C1</td>
> <td>R1, C2</td>
> </tr>
> <tr>
> <td>R2, C1</td>
> <td>R2, C2</td>
> </tr>
> </table> 
> ```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-03-17T22:26:03.677

html2text 应该可以工作，至少，它应该能够生成一些你可以作为逗号分隔列表选择的内容（或者很容易破解）。这里有很多链接：

[http://www.google.com/search?hl=en&q=html2text&btnG=搜索](http://www.google.com/search?hl=en&q=html2text&btnG=Search)

它有很多标志来控制输出的格式。尝试一下。

——杰夫

# c# - 正则表达式捕获超出 az 的字母

> ID：656157
> 
> 赞同：11
> 
> 时间：2009-03-17T21:43:05.260
> 
> 标签：c#, regex

只允许字母的正常正则表达式是*"[a-zA-Z]"*但我来自瑞典，所以我必须将其更改为*"[a-zåäöA-ZÅÄÖ]"*。但是假设我不知道字母表中使用了哪些字母。

有没有办法自动知道哪些字符在给定的语言环境/语言中是有效的，或者我应该只制作一个我（认为我）知道我不想要的字符的黑名单？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-17T21:51:17.910

您可以使用 \pL 匹配任何“字母”，这将支持所有语言的所有字母。您可以使用“命名块”将其缩小到特定语言。更多信息可以在 MSDN上的[字符类文档中找到。](http://msdn.microsoft.com/en-us/library/20bw873z.aspx)

我的建议是将正则表达式（或至少“字母”部分）放入本地化资源中，然后您可以根据当前语言环境将其拉出并形成更大的模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-17T21:47:14.767

\p{name} 呢？

> 匹配由 {name} 指定的命名字符类中的任何字符。支持的名称是 Unicode 组和块范围。例如，Ll、Nd、Z、IsGreek、IsBoxDrawing。

我对unicode知之甚少，但也许你的角色适合unicode类？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-17T21:50:01.437

请参阅[字符类别](http://msdn.microsoft.com/en-us/library/20bw873z(VS.71).aspx)选择`\p`和`\w`unicode 语义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-17T21:46:11.557

所有字符都是“有效的”，所以我认为你真的要求在语言环境中“通常被认为是字母”的字符。

Unicode 规范有一些指导方针，但通常答案是“否”，您需要列出您认为是“字母”的字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T11:38:02.243

> 有没有办法自动知道哪些字符在给定的语言环境/语言中是有效的，或者我应该只制作一个我（认为我）知道我不想要的字符的黑名单？

*一般来说*，这是不可能的。

毕竟英语文本确实包含一些重音字符（例如，在“fête”和“naïve”中——严格正确的英国英语仍然使用重音符号）。在某些语言中，一些标准字母很少使用（例如法语中的 y-diaeresis）。

然后考虑包括外来词（这通常是使用技术术语的情况）。报价将是另一个来源。

如果您的要求定义得足够狭隘，您可以创建一个定义，但这需要该语言的语言经验。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-31T11:20:34.287

此正则表达式仅通过以下方式允许有效符号：

```
[a-zA-ZÀ-ÿ ] 
```

# sql - 当我在 JDBC 应用程序中调用 PreparedStatement.cancel() 时，它实际上会在 Oracle 数据库中杀死它吗？

> ID：656162
> 
> 赞同：7
> 
> 时间：2009-03-17T21:45:46.567
> 
> 标签：sql, oracle, jdbc

我有针对 Oracle 10g 数据库运行的 Java JDBC 应用程序。我设置了一个 PreparedStatement 来执行查询，然后调用 ps.executeQuery() 来运行它。有时查询需要很长时间，我需要杀死它。我有另一个线程访问 PreparedStatement 对象，并在其上调用 cancel()。

我的问题是，这真的会杀死数据库中的查询吗？还是它只是将它与客户端断开，而查询仍在 Oracle 内部的某个地方运行？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-18T16:36:02.993

请注意，我下面所说的是基于对 Oracle 在使用中的观察和推断，而不是基于对 Oracle 内部的任何深刻理解。这些都不应该被认为是权威的。

Nineside 在第一段中所说的是正确的。但是，请注意建议的测试。并非所有长时间运行的 Oracle 查询都是相同的。似乎查询是在两个阶段进行评估的，第一个阶段组合了足够的数据以知道如何以正确的顺序返回行，第二个阶段返回填充它没有计算的空白的行第一阶段。两个阶段之间的工作分工也受到基于成本的优化器设置的影响。例如，第一行与所有行。

现在，如果查询处于第 1 阶段，那么取消请求似乎充其量只能排队等待在第 1 阶段结束时应用，这意味着查询继续运行。

在阶段2，行是成串返回的，在每一个串之后，cancel命令才能生效，所以假设驱动支持该命令，cancel请求会导致查询被杀死。

JDBC 取消命令的规范似乎没有说明如果查询没有停止运行会发生什么，因此该命令可能会等待确认终止，或者可能会超时并在查询仍在运行时返回。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-19T02:44:44.560

答案是，这是一个实施质量问题。如果您查看 Statement.cancel() 的[javadoc](http://java.sun.com/j2se/1.5.0/docs/api/java/sql/Statement.html#cancel())，它会说“如果 DBMS 和驱动程序都支持中止 SQL 语句”就会发生。

根据我对各种版本的 Oracle JDBC 驱动程序的经验，Statement.cancel() 似乎可以满足您的需求。查询似乎在取消后立即停止执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T05:39:53.103

这取决于您使用的驱动程序，驱动程序和数据库都需要支持取消语句才能使其按您的意愿工作。Oracle 确实支持此功能，但您需要了解更多有关您正在使用的特定驱动程序的信息才能确定。

或者，您可以通过在启动和取消长时间运行的查询后查看数据库来运行一个简单的测试。

# vba - Word 2007 VBA不能控制图片？

> ID：656164
> 
> 赞同：1
> 
> 时间：2009-03-17T21:46:36.547
> 
> 标签：vba, office-2007, ms-word

尝试在 Word 2007 中录制宏，注意你不能对图片做任何事情。*（或者这是我机器的本地问题？）*

而且我什至无法在 Word Object Ref 中找到 Picture / Image 对象。

是什么赋予了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-17T22:02:43.687

在 Word 中，图像在内部是形状的句柄。基本上有两种类型：`InlineShapes`，与文本内联对齐，并且`Shapes`都是浮动在页面上的形状。

您可以通过以下方式访问图像，具体取决于其类型

```
With ActiveDocument.InlineShapes(1)
    .Width = 300
    .Height = 200
End With 
```

或者

```
With ActiveDocuments.Shapes(1)
    .Width = 300
    .Height = 200
End With 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-17T22:01:37.027

录制时，您无法使用鼠标选择任何内容，因此您必须使用键盘选择图片，然后使用菜单选项来操作它。

# sql-server - 使用 Contains() 时达到 2100 参数限制 (SQL Server)

> ID：656167
> 
> 赞同：60
> 
> 时间：2009-03-17T21:47:16.513
> 
> 标签：sql-server, linq, parameters, limit

```
from f in CUSTOMERS
where depts.Contains(f.DEPT_ID)
select f.NAME 
```

`depts``IEnumerable<int>`是一个部门 ID列表 ( )

这个查询工作正常，直到你传递一个大列表（比如大约 3000 个部门 ID）.. 然后我得到这个错误：

> 传入的表格数据流 (TDS) 远程过程调用 (RPC) 协议流不正确。此 RPC 请求中提供的参数过多。最大值为 2100。

我将查询更改为：

```
var dept_ids = string.Join(" ", depts.ToStringArray());
from f in CUSTOMERS
where dept_ids.IndexOf(Convert.ToString(f.DEPT_id)) != -1
select f.NAME 
```

using`IndexOf()`修复了错误，但使查询变慢。有没有其他方法可以解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-02-11T17:43:23.070

我的解决方案（`Guids`是您要过滤的 id 列表）：

```
List<MyTestEntity> result = new List<MyTestEntity>();
for(int i = 0; i < Math.Ceiling((double)Guids.Count / 2000); i++)
{
    var nextGuids = Guids.Skip(i * 2000).Take(2000);
    result.AddRange(db.Tests.Where(x => nextGuids.Contains(x.Id)));
}
this.DataContext = result; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-17T21:54:05.937

为什么不在 sql 中编写查询并附加您的实体？

我在 Linq 工作已经有一段时间了，但这里是：

```
IQuery q = Session.CreateQuery(@"
         select * 
         from customerTable f
         where f.DEPT_id in (" + string.Join(",", depts.ToStringArray()) + ")");
q.AttachEntity(CUSTOMER); 
```

当然，您需要防止注射，但这不应该太难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T14:05:45.190

我有类似的问题，我有两种方法来解决它。

1.  [相交](http://msdn.microsoft.com/en-us/library/bb345609.aspx)法
2.  加入ID

要获取不在列表中的值，我使用了[除](http://msdn.microsoft.com/en-us/library/bb348938.aspx)方法或左连接。

**更新**

EntityFramework 6.2 成功运行以下查询：

```
var employeeIDs = Enumerable.Range(3, 5000);
var orders =
    from order in Orders
    where employeeIDs.Contains((int)order.EmployeeID)
    select order; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-08-04T19:00:31.280

您将需要查看[LINQKit 项目](http://www.albahari.com/nutshell/linqkit.aspx)，因为其中某处有一种将此类语句批处理以解决此问题的技术。我相信这个想法是使用 PredicateBuilder 将本地集合分解成更小的块，但我没有详细审查解决方案，因为我一直在寻找一种更自然的方法来处理这个问题。

不幸的是，从[Microsoft 对我](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=475984)修复此行为的建议的回应看来，没有计划为 .NET Framework 4.0 甚至后续的服务包解决此问题。

[https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=475984](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=475984)

更新：

我已经在 MSDN 论坛上展开了一些关于是否要针对[LINQ to SQL](http://social.msdn.microsoft.com/Forums/en-US/linqtosqlprerelease/thread/c354f12a-903c-4456-84b6-c04d5bb4b8eb)或[ADO.NET 实体框架修复此问题的讨论。](http://social.msdn.microsoft.com/Forums/en-US/adonetefx/thread/b5e89594-f638-46de-9ffd-4b07ed28ec68?prof=required)请参阅这些帖子以获取有关这些主题的更多信息，并查看我使用 XML 和 SQL UDF 提出的临时解决方法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-05-23T15:45:38.967

在将部门列表作为参数传递给 Linq 生成的 IN 语句之前，您始终可以将它们划分为更小的集合。看这里：

[将较大的 IEnumerable 划分为固定数量的项目的较小 IEnumerable](https://stackoverflow.com/questions/5172390/divide-a-large-ienumerable-into-smaller-ienumerable-of-a-fix-amount-of-item)

# ruby - 'buggy_logger' 是对这个 Ruby 示例中的 'status' 字符串的引用吗？

> ID：656169
> 
> 赞同：1
> 
> 时间：2009-03-17T21:48:13.703
> 
> 标签：ruby, string, reference

在此示例中，是否启动了 nukes，因为您对 buggy_logger 所做的任何更改都会应用于“状态”字符串 - 就像使用对对象的引用的副本一样 - > 当您对引用的副本进行更改时，更改将应用​​于基础对象->该更改反过来反映在对该对象的任何其他引用中。那么，换句话说，buggy_logger 是 'status' 对象的别名，而没有专门使用 alias 关键字？那是对的吗？所以，在红宝石中，你只需说

```
b = a 
```

然后您之后对 b 所做的任何更改也会反映在 a 中。或者这仅仅是因为我们谈论的是字符串，它在 Ruby 中是可变的？

```
# example-4.rb

status = "peace"

buggy_logger = status

print "Status: "
print buggy_logger << "\n" # <- This insertion is the bug.

def launch_nukes?(status)
  unless status == 'peace'
    return true
  else
    return false
  end 
end

print "Nukes Launched: #{launch_nukes?(status)}\n"

# => Status: peace
# => Nukes Launched: true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-17T21:53:10.917

是的，因为字符串是对象。尝试

```
buggy_logger = status.dup 
```

如果您想要一个具有相同初始值的不同对象。

至于你关于`alias`我怀疑你没有正确理解如何 `alias`在 ruby​​ 中使用的问题；它用于方法，而不是对象，并且与可变性无关。

另请注意，相同的语义将适用于任何类；如果 status 是一个数组、一个文件或其他任何东西（假设它具有适合用作记录器的可变状态），您将得到类似的结果。

一个警告`dup`。如果您的对象引用其他对象，则副本也将引用*相同*的对象。一旦你开始以正确的方式思考它就很好，但在那之前很棘手。

# java - 如何最好地在二进制数据中搜索可变长度位字符串？

> ID：656175
> 
> 赞同：4
> 
> 时间：2009-03-17T21:50:46.087
> 
> 标签：java, jpeg, huffman-code

谁能告诉我在java中使用可变长度位字符串解码二进制数据的最佳方法？

例如：

> 二进制数据为 10101000 11100010 01100001 01010111 01110001 01010110
> 
> 我可能需要找到以下 01、100、110、1110、1010 中的任何一个的第一个匹配项...
> 
> 在这种情况下，匹配将是 1010。然后我需要对其余的二进制数据执行相同的操作。位串最长可达 16 位并跨越字节边界。

基本上，我正在尝试使用从标题中的 Huffman 表创建的位字符串对 Huffman 解码 jpeg。我可以做到，只是它非常混乱，我首先将包括二进制数据在内的所有内容都转换为 Stringbuffers，我知道这不是正确的方法。

在我将所有内容加载到字符串缓冲区之前，我尝试只使用二进制数字，但我当然不能忽略像 00011 这样的代码中的前导 0。我确信必须有一些聪明的方法使用位运算符等来做这个，但我一直盯着解释位掩码和左移等的页面，我仍然不知道！

非常感谢您的帮助！

编辑：

感谢所有的建议。我已经采用了二叉树方法，因为它似乎是 Huffman 东西的标准方法。确实有意义，因为霍夫曼代码是使用树创建的。我还将研究存储需要在大整数中搜索的二进制数据。不知道如何将多个答案标记为正确，但同样感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-17T22:08:11.987

您可能会使用消耗零和一的状态机。状态机将具有您想要检测的所有模式的最终状态。每当它进入最终状态之一时，就会使用匹配的模式向您发送一条消息并返回到初始状态。

最后，您将只有一个 DAG 形式的状态机，其中包含您的所有模式。

要实现它，请使用状态模式 ( [http://en.wikipedia.org/wiki/State_pattern](http://en.wikipedia.org/wiki/State_pattern) ) 或状态机的任何其他实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-17T23:41:59.687

由于您正在解码 Huffman 编码数据，因此您应该创建一棵二叉树，其中叶子将解码的位字符串作为数据保存，每个 Huffman 代码的位是相应数据的路径。霍夫曼码的位通过位移位和位掩码操作访问。当你到达一个叶子时，你输出那个叶子的数据并回到树的根部。它非常快速和高效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-17T22:07:46.620

您可以尝试将其填充到[BigInteger](http://java.sun.com/j2se/1.4.2/docs/api/java/math/BigInteger.html)中，然后使用 shift 和 test 方法。然后使用循环遍历并接受每个子模式。

如果霍夫曼代码在树中，1 == 右节点，0 == 左节点。

```
for( int i =numbitsTotal; i > 0; --i )
{
   int bit = bigInt.testBit( i );
   if( bit == 1 )
   {
       // take right node -- if null accept code, apply from top
   }
   else
   {
      // take left node -- if null accept code, apply from top
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-17T23:57:36.047

我建议[尝试](http://en.wikipedia.org/wiki/Trie)一下。它专为前缀搜索而设计。在你的情况下，这将是一个二元树。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-17T22:18:19.637

你可以使用 java.util.BitSet 来存储你的二进制数据，然后你可以实现一些搜索功能来找到一个较小的 BitSet 在大的​​里面的位置......

# windows - 尝试从 Vim 编译和调试 C++

> ID：656176
> 
> 赞同：9
> 
> 时间：2009-03-17T21:51:07.050
> 
> 标签：windows, vim, debugging, makefile, compilation

我一直在 Windows XP 上使用 Code::Blocks 学习 C++ 和 Allegro，最近想学习 Vim。但是，我不知道如何“手动”编译程序（即，不使用 IDE）。

为了从 Vim 中编译，我已经将 makeprg 设置为 gcc，但我知道我还需要一个 makefile。那是什么，我该怎么写？是我可以使用 Allegro 等库的 makefile 吗？

另外，我非常喜欢 CB 调试器（我使用的是 gdb）。是否可以用 Vim 做类似的事情？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T00:04:16.700

看看[MinGW](http://www.mingw.org/)。如果您只需要 gcc 和 make，我会避免使用 Cygwin。您将需要 MinGW 和 MSYS。MSYS 有一个 Windows 端口。

如果您对 windows 命令行的更多 unix 实用程序感兴趣，我推荐[CoreUtils](http://gnuwin32.sourceforge.net/packages/coreutils.htm)。

学习请看[手册](http://www.gnu.org/software/make/manual/make.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-17T22:00:55.187

您不一定*需要*Makefile，但它是在类 UNIX 系统上编译代码的首选（可能也是最明智的）方法。

我不知道 GNU Make 是否有 Windows 端口，但您可能可以在[Cygwin](http://www.cygwin.com/)下运行它。

要了解有关 GNU Make 和 Makefile 的更多信息：

*   [制作](http://en.wikipedia.org/wiki/Make_(software))（维基百科）
*   [GNU 制作](http://www.gnu.org/software/make/)
*   [GNU 制作手册](http://www.gnu.org/software/make/manual/make.html)

另外，看到这个问题：[compile directly from vim](https://stackoverflow.com/questions/540721/compile-directly-from-vim)

**强制编辑：**我不使用 Windows 或 Cygwin。您可能想听取[epochwolf](https://stackoverflow.com/questions/656176/trying-to-compile-and-debug-c-from-vim/656490#656490)对该部门的建议。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-18T00:51:39.643

我不是 makefile 和调试方面的专家，但我知道 Vim 可以让你做很多事情。例如，如果你想用 gcc 编译一个文件，它与通常的方式并没有太大的不同。在正常模式下：

```
:!gcc file.c -o file 
```

实际上，您只需添加“！”就可以使用（几乎）每个系统命令 在你的命令面前。gdb 也适用于 Vim

```
:!gdb 
```

我希望它会帮助你。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-07-28T11:02:40.670

要将 vim 与 devenv 集成，您可以使用 Visual Studio 中的 devenv 在 vi​​m 中编译项目。命令如下：

```
Devenv SolutionName /build SolnConfigName [/project ProjName [/projectconfig ProjConfigName]] 
```

通常，devenv 应位于 C:\Program Files\Microsoft Visual Studio 8\Common7\IDE。将其设置为环境路径以使其可从 vim 调用。我们还需要让 vim 识别命令行构建工具 devenv 抛出的错误信息。只需将以下几行放入您的 vimrc 中：

```
" Quickfix mode: command line devenv error format
au FileType cpp set makeprg=devenv.com\ /Build\ Debug\ *[SolutionName]*
au FileType cpp set errorformat=\ %#%f(%l)\ :\ %#%t%[A-z]%#\ %m 
```

然后您可以使用 :make 从 vim 编译和构建程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-17T22:23:14.057

**EDIT1：**您可能会发现一些有用的书签：

[GNU make 教程](http://wooledge.org/~greg/make-tutorial.txt)（这个使用 gcc 和 make，所以它应该就在你的小巷里）

[另一个](http://www.pma.caltech.edu/~physlab/ph21_winter06/make.html)

一些 GNU utils 的[Win 端口Can 被提及；](http://unxutils.sourceforge.net/)我个人使用这些，在 Windows 平台上没有任何问题。

* * *

是的，您可以在没有 makefile 的情况下进行编译。如果您的程序很简单（例如，只有一个文件），您可以通过调用编译器并在同一行中包含程序的名称来进行编译（不记得它是如何与 gcc 一起使用的）。当然，为了让事情更容易，这可以映射到 vim 中的一个键，所以你不必跳转到命令提示符并返回。

如果您正在处理一个由多个文件等组成的更大的项目，那么 makefile 会很有用。它将“搜索”文件，确定依赖关系，将它们包含在构建中，可能将源文件放在一个目录中，将生成的 exe 文件放在另一个目录中等等。所以它更像是一个链接和构建系统，而不仅仅是编译。尽管 Can Berk Guder 的回答中提到的 GNU make 很受欢迎，但“构建 makefile”还有很多其他需要（“makefile”已成为这种操作的一种同义词） - 在这里，您可以看到此[链接](http://en.wikipedia.org/wiki/Makefile)上的一些其他选项。由于它在历史上的一部分，vim 对 :make 有很好的支持，但其他的也可以很容易地使用（在[VimWikia](http://vim.wikia.com/wiki/Main_Page)上有很多关于这个主题的文本。

嗯，就是这样。只是我的 0,2 欧元 :)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-18T10:30:04.137

只要安装了 GNU-make（windows 下使用 cygwin 或 mingw），就不需要为单文件项目编写 makefile。只需`:make`从 vim 运行，就足够了。

如果您的项目由多个文件组成，那么您将不得不编写一个 makefile（或 scons、aap、(b)jam、ant 等的任何等效文件），调整您`&makeprg`的结果，最后`:make`从 vim 调用。[请参阅vimtips](http://vim.wikia.com/wiki/Category:Compiler)中的相关类别。您当然可以像运行任何其他外部工具一样运行编译器，但是您将失去跳转到错误行的可能性。

注意：如果你使用的是 win32 版本的 vim 和 gcc-cygwin，你需要翻译得到的错误信息。我曾经为此维护一个 perl 脚本，现在它是[更大套件](http://code.google.com/p/lh-vim/source/browse/#svn/BTW/trunk)的一部分（仍处于测试阶段）

关于你关于调试的问题，暂时不能在windows下的vim中完成。目前唯一可以集成的调试器是gdb，但仅限linux下；请参阅 pyclewn (.sf.net) 项目。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-03-06T22:33:59.180

我不确定调试，但我知道编译和运行当前程序的简单方法，因为我编写了一个小的 vim 插件来执行此操作。

[http://pastebin.com/qc5Zp2P7](http://pastebin.com/qc5Zp2P7)

它假定您使用的是 g++ 编译器。如果没有，只需将名称更改为您正在使用的编译器。将此文件保存到安装 vim/ftplugin/cpp.vim 的任何位置

为了编译和运行当前打开的程序，只需在非编辑模式下键入 shift-e 即可。

# wpf - 是否可以从 VisualBrush 在 WPF 中创建光标？

> ID：656179
> 
> 赞同：3
> 
> 时间：2009-03-17T21:51:35.630
> 
> 标签：wpf, drag-and-drop, visualbrush

我正在做一些拖放操作，并且我想使用我拖动的元素的可视副本作为光标。获得元素的 VisualBrush 很容易，但我不知道如何将它变成光标。

我已经阅读了[Jamie Rodriguez 的博客文章](https://web.archive.org/web/20151112155029/http://blogs.msdn.com/b/jaimer/archive/2007/07/12/drag-drop-in-wpf-explained-end-to-end.aspx)，但他的解决方案并不是我想要的，因为他基本上将事情连接到一个“全局”GiveFeedback 事件（他的 DragSource）。我宁愿只从 VisualBrush 中获取图像并将其作为光标。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-17T22:12:24.083

通常（在您链接的示例和[Bea Stollnitz](https://web.archive.org/web/20120620222921/http://bea.stollnitz.com/blog/?p=53)的示例中）这是使用`Adorner`.

如果你真的想改变它`Cursor`本身，你必须在内存中构造一个 .cur 文件并将其流式传输到[`Cursor`构造函数](http://msdn.microsoft.com/en-us/library/ms522864.aspx)中。我从来没有这样做过，我不推荐它，但我认为它应该是可能的。

# php - 实现：如何为不同的 Gmail 帐户检索和发送电子邮件？

> ID：656180
> 
> 赞同：1
> 
> 时间：2009-03-17T21:51:51.073
> 
> 标签：php, python, email, gmail

我需要建议以及如何为我的用户设置简单的服务。我想添加一个新功能，用户可以通过他们的 gmail 帐户发送和接收电子邮件。我已经多次看到这样做了，我知道这是可能的。

sourceforge 曾经有一个“Libgmailer”项目，但我认为它已被放弃。有人知道类似的事情吗？

我发现 Gmail 有一个 Python API，但我的网站使用的是 PHP。

我真的需要关于如何最好地解决这个问题的想法！

感谢大家的任何意见

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-17T21:56:17.757

任何与 imap 或 pop 一起使用的库/源都可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-17T21:55:45.620

好吧，如果谷歌个人没有提出任何建议，我会看看我是否可以通过实现它并用数据包嗅探器观察它来对 Python API 进行逆向工程。我的猜测是它只是访问一些应该很容易模仿的 Web 服务，无论您使用什么语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-17T21:58:33.523

想一想，Gmail 支持 POP/IMAP 访问。你能用那些协议来做吗？这意味着要求您的用户进入他们的 gmail 并启用它。

# c# - 如何在 Web 浏览器控件中捕获 XMLHTTP 请求？

> ID：656191
> 
> 赞同：5
> 
> 时间：2009-03-17T21:54:44.000
> 
> 标签：c#, .net, webbrowser-control, xmlhttprequest

`BeforeNavigate2`事件或任何其他类似事件不会在 WebBrowser 控件中捕获 XMLHTTP 请求。有没有办法解决这个问题？

这是一个 .NET 项目。

**编辑：**

[我发现这个 C++ 应用程序](http://groups.google.com/group/microsoft.public.inetsdk.programming.mshtml_hosting/msg/76bf4910a289d4b3)显然可以用来解决这个问题，但是[将它移植到托管代码看起来是不可能的](http://www.tech-archive.net/Archive/InetSDK/microsoft.public.inetsdk.programming.webbrowser_ctl/2006-11/msg00046.html)。也许我应该将 C++ 更改为 COM 对象并从 .NET 调用它——这并不容易，因为我认为由于 ATL 更改它甚至无法在 VS 2008 中编译——。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-02-20T20:54:15.767

作为一个“黑客”，这可能等同于跳过更多不必要的障碍，你可以甚至可能无法帮助你完成你正在寻找的东西。

1）将您的浏览器控件设置为在本地 pc 上使用代理 uri。2）设置您的应用程序以侦听您在步骤 1 中指定的 uri 上的请求，并在此处操作您需要的内容。

# java - 您可以更改 SWT TabItem 的背景和/或前景色吗？

> ID：656195
> 
> 赞同：5
> 
> 时间：2009-03-17T21:55:51.877
> 
> 标签：java, swt

我想更改 SWT TabItem 上文本的背景和/或前景色；但是，它（以及它的类层次结构）似乎没有用于此的方法-而且我似乎找不到任何其他可以做到这一点的成员。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T14:49:02.657

事实证明，TabItem/TabFolder 功能集中不支持（至少现在不支持）：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=96239](https://bugs.eclipse.org/bugs/show_bug.cgi?id=96239)

事实证明，CTabItem/CTabFolder 功能集中不支持它：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=75411](https://bugs.eclipse.org/bugs/show_bug.cgi?id=75411)

真可惜。

# list - 在 Lua 列表中搜索项目

> ID：656199
> 
> 赞同：61
> 
> 时间：2009-03-17T21:56:38.380
> 
> 标签：list, lua, lua-table

如果我有这样的项目列表：

```
local items = { "apple", "orange", "pear", "banana" } 
```

如何检查“橙色”是否在此列表中？

在 Python 中，我可以这样做：

```
if "orange" in items:
    # do something 
```

Lua中是否有等价物？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2009-03-17T22:08:36.557

您可以使用类似于[Programming in Lua 中](http://www.lua.org/pil/11.5.html)的集合：

```
function Set (list)
  local set = {}
  for _, l in ipairs(list) do set[l] = true end
  return set
end 
```

然后您可以将您的列表放入 Set 并测试成员资格：

```
local items = Set { "apple", "orange", "pear", "banana" }

if items["orange"] then
  -- do something
end 
```

或者您可以直接遍历列表：

```
local items = { "apple", "orange", "pear", "banana" }

for _,v in pairs(items) do
  if v == "orange" then
    -- do something
    break
  end
end 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2009-03-17T22:19:58.683

请改用以下表示：

```
local items = { apple=true, orange=true, pear=true, banana=true }
if items.apple then
    ...
end 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2009-03-20T00:30:51.260

你亲眼目睹了 Lua 只有一个数据结构的缺点——你必须自己动手。如果您坚持使用 Lua，您将逐渐积累一个以您喜欢的方式操作表的函数库。我的库包括一个列表到集合的转换和一个高阶列表搜索功能：

```
function table.set(t) -- set of list
  local u = { }
  for _, v in ipairs(t) do u[v] = true end
  return u
end

function table.find(f, l) -- find element v of l satisfying f(v)
  for _, v in ipairs(l) do
    if f(v) then
      return v
    end
  end
  return nil
end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-17T22:13:51.723

Lua 表更类似于 Python 字典而不是列表。您创建的表本质上是一个基于 1 的索引字符串数组。使用任何标准搜索算法来确定数组中是否有值。另一种方法是将值存储为表键，而不是如 Jon Ericson 的帖子的 set implementation 所示。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-10-20T08:31:18.177

这是您可以使用的瑞士军刀功能：

```
function table.find(t, val, recursive, metatables, keys, returnBool)
    if (type(t) ~= "table") then
        return nil
    end

    local checked = {}
    local _findInTable
    local _checkValue
    _checkValue = function(v)
        if (not checked[v]) then
            if (v == val) then
                return v
            end
            if (recursive and type(v) == "table") then
                local r = _findInTable(v)
                if (r ~= nil) then
                    return r
                end
            end
            if (metatables) then
                local r = _checkValue(getmetatable(v))
                if (r ~= nil) then
                    return r
                end
            end
            checked[v] = true
        end
        return nil
    end
    _findInTable = function(t)
        for k,v in pairs(t) do
            local r = _checkValue(t, v)
            if (r ~= nil) then
                return r
            end
            if (keys) then
                r = _checkValue(t, k)
                if (r ~= nil) then
                    return r
                end
            end
        end
        return nil
    end

    local r = _findInTable(t)
    if (returnBool) then
        return r ~= nil
    end
    return r
end 
```

您可以使用它来检查值是否存在：

```
local myFruit = "apple"
if (table.find({"apple", "pear", "berry"}, myFruit)) then
    print(table.find({"apple", "pear", "berry"}, myFruit)) -- 1 
```

您可以使用它来查找密钥：

```
local fruits = {
    apple = {color="red"},
    pear = {color="green"},
}
local myFruit = fruits.apple
local fruitName = table.find(fruits, myFruit)
print(fruitName) -- "apple" 
```

我希望`recursive`参数不言自明。

该`metatables`参数还允许您搜索元表。

该`keys`参数使函数在列表中查找键。当然，这在 Lua 中是没有用的（你可以这样做`fruits[key]`），但与`recursive`and一起`metatables`，它变得很方便。

当您的表在表中作为键时，该`returnBool`参数是一种保护措施（是的，这是可能的：）`false``fruits = {false="apple"}`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-11-03T15:10:04.353

随心所欲地编写它，但是*直接遍历 list*比生成 pairs() 或 ipairs() 更快

```
#! /usr/bin/env lua

local items = { 'apple', 'orange', 'pear', 'banana' }

local function locate( table, value )
    for i = 1, #table do
        if table[i] == value then print( value ..' found' ) return true end
    end
    print( value ..' not found' ) return false
end

locate( items, 'orange' )
locate( items, 'car' ) 
```

橙色 发现
没有找到车

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-04-11T14:42:32.833

```
function valid(data, array)
 local valid = {}
 for i = 1, #array do
  valid[array[i]] = true
 end
 if valid[data] then
  return false
 else
  return true
 end
end 
```

这是我用来检查数据是否在数组中的函数。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-29T15:07:48.067

使用元表的解决方案...

```
local function preparetable(t)
 setmetatable(t,{__newindex=function(self,k,v) rawset(self,v,true) end})
end

local workingtable={}
preparetable(workingtable)
table.insert(workingtable,123)
table.insert(workingtable,456)

if workingtable[456] then
...
end 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-24T20:49:42.183

```
function table.find(t,value)
    if t and type(t)=="table" and value then
        for _, v in ipairs (t) do
            if v == value then
                return true;
            end
        end
        return false;
    end
    return false;
end 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-27T17:31:00.773

您可以使用此解决方案：

```
items = { 'a', 'b' }
for k,v in pairs(items) do 
 if v == 'a' then 
  --do something
 else 
  --do something
 end
end 
```

或者

```
items = {'a', 'b'}
for k,v in pairs(items) do 
  while v do
    if v == 'a' then 
      return found
    else 
      break
    end
  end 
 end 
return nothing 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-05-01T17:57:19.260

可以使用一个简单的函数：

*   如果在表中未找到该项目，则返回 nil
*   如果在表中找到项目，则返回项目的索引

```
local items = { "apple", "orange", "pear", "banana" }

local function search_value (tbl, val)
    for i = 1, #tbl do
        if tbl[i] == val then
            return i
        end
    end
    return nil
end

print(search_value(items, "pear"))
print(search_value(items, "cherry")) 
```

上述代码的输出将是

```
3
nil 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-08-31T07:35:11.483

可以使用以下表示：

```
local items = {
    ["apple"]=true, ["orange"]=true, ["pear"]=true, ["banana"]=true
}

if items["apple"] then print("apple is a true value.") end
if not items["red"] then print("red is a false value.") end 
```

相关输出：

```
apple is a true value.
red is a false value. 
```

您还可以使用以下代码检查布尔值的有效性：

```
local items = {
    ["apple"]=true, ["orange"]=true, ["pear"]=true, ["banana"]=true,
    ["red"]=false, ["blue"]=false, ["green"]=false
}

if items["yellow"] == nil then print("yellow is an inappropriate value.") end
if items["apple"] then print("apple is a true value.") end
if not items["red"] then print("red is a false value.") end 
```

输出是：

```
yellow is an inappropriate value.
apple is a true value.
red is a false value. 
```

查看[表格教程](http://lua-users.org/wiki/TablesTutorial)以获取更多信息。

# iphone - 你想让 iPhone 图书馆为你做什么？

> ID：656200
> 
> 赞同：3
> 
> 时间：2009-03-17T21:56:38.647
> 
> 标签：iphone

我是一名本科生，也编写 iPhone 应用程序。明年我将完成一个最终项目，该项目将持续一整年并涉及相当多的软件工程。

我最初的计划是为 iPhone 编写一个围绕 SQLite 的对象关系包装器（或者更确切地说，大规模清理和扩展我已经拥有的一个）并最终将其作为开源发布。不幸的是，随着 Core Data 被添加到 iPhone OS 3.0，这不再是真正的必要了。（至少，在我看来是这样的；对此有什么意见吗？）

不过，明年我仍然想做一个有用的、技术上有趣的 iPhone 相关项目。所以这是我的问题：开发人员需要什么？您在您的应用程序中遇到了哪些似乎可以由某种库或框架处理的问题？我的重点通常更多地放在实用程序、生产力和通信应用程序上，而不是游戏。而且由于我是向一所大学提出这个建议，所以理论上有趣或对潜在学生有吸引力的东西将是首选。当然，它必须是他们*没有*添加到新版 iPhone OS 中的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T15:45:15.487

它处于早期阶段，但一群具有科学头脑的 Cocoa 开发人员（由 Drew McCormack 领导）已经联合起来启动了一个 BSD 许可的数据图表/绘图/可视化框架，称为[Core Plot](http://code.google.com/p/core-plot/)（邮件列表[在这里](http://groups.google.com/group/coreplot-discuss?hl=en&pli=1)）。这个框架在 Mac 和 iPhone 之间是跨平台的，依赖 Core Animation 进行渲染。

虽然您不会重新开始自己的项目，但为这个开源框架做出贡献在技术上具有挑战性，我相信该框架将具有深远的应用。我确信大学会对这种框架的潜在科学和教育用途印象深刻。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-21T23:13:19.700

一个库提供了一个非常简单的 API，可以让任何应用程序充当 OAuth 消费者，这将是不可思议的！它可用于启用对整个网络上数百个启用 OAuth 的数据 API 的数据访问，包括 Google、MySpace、Twitter、Yahoo、Flickr 等。想象一下，您可以让其他开发人员构建数千个额外的应用程序轻松。

您的代码几乎可以包含在任何未来开发人员编写的所有有价值的 iPhone 应用程序中！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-19T02:38:32.780

我希望看到一个将接口抽象为各种社交网站的框架。拥有一个标准 API 来向 MySpace、Facebook、Flickr、Picassa、Blogger、Twitter 和其他服务发送更新和发布图片将非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-17T22:02:07.663

一个通用框架，用于从任何具有 Internet 连接的应用程序与特定 iphone 通信。iphone 应用程序很棒，但是通过网络服务可以提供更多的东西——所以某种形式的交流会很好。

制作某种 API，可用于从其他连接的应用程序与 iphone 通信——网络服务或桌面等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-11-02T01:41:09.540

由于项目的规则，我最终不得不朝着不同的方向前进，但我会记住这些，作为未来非大学工作的可能性。谢谢大家！

# javascript - CSS水平表格单元格间距：如何？

> ID：656207
> 
> 赞同：39
> 
> 时间：2009-03-17T21:59:00.557
> 
> 标签：javascript, jquery, html, css, layout

希望这是一个简单的方法，但我还没有找到解决方案。我想在表格的列之间放置空间。

例子

```
| Cell |<- space ->| Cell |<- space ->| Cell | 
```

重要的一点是我不希望边缘有空间。有一个边框间距属性，但 IE（6 或 7）不支持它，所以这不好。它还在边缘放置空间。

我想出的最好的方法是将 padded-right: 10px 放在我的表格单元格上，并在最后一个单元格中添加一个类以删除填充。这不太理想，因为额外的空间是单元格的一部分，而不是在它之外。我想你可以用透明边框做同样的事情吗？

我也尝试过使用 jQuery：

```
$(function() {
  $("table > tbody > tr:not(:last-child").addClass("right-padding");
}); 
```

但即使在只有约 100 行大小的表上，在某些情况下也需要 200-400 毫秒，这太慢了。

任何帮助表示赞赏。

谢谢

对于那些建议列的人，他们不起作用。尝试这个：

```
<html>
<head>
  <title>Layout</title>
  <style type="text/css">
    table { border: 1px solid black; }
    td { background: yellow; }
  </style>
</head>
<body>
<table>
<col style="padding-right: 30px;">
<col style="padding-right: 30px;">
<col>
<tr>
  <td>1</td>
  <td>2</td>
  <td>3</td>
</tr>
<tr>
  <td>4</td>
  <td>5</td>
  <td>6</td>
</tr>
<tr>
  <td>7</td>
  <td>8</td>
  <td>9</td>
</tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-03-18T20:58:15.953

给每个表格**单元格**一个透明边框怎么样？我很确定这会为你做的......

```
table td {
  border:solid 5x transparent;
} 
```

你只能像这样**水平**应用它......

```
table td {
  border-left:solid 10px transparent;
}
table td:first-child {
  border-left:0;
} 
```

这是我认为您正在尝试完成的工作的完整演示...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>
  <head>
    <title>Layout</title>
    <style type="text/css">
      table {
        border: 1px solid black;
      }

      table td {
        background: yellow;
        border-left:solid 10px transparent;
      }

     table td:first-child {
       border-left:0;
     }
    </style>
  </head>
  <body>
    <table>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
      </tr>
      <tr>
        <td>4</td>
        <td>5</td>
        <td>6</td>
      </tr>
      <tr>
        <td>7</td>
        <td>8</td>
        <td>9</td>
      </tr>
    </table>
  </body>
</html> 
```

我不相信 IE6 支持 CSS :first-child，所以这里有一个解决方法......

```
<!–-[if IE 6]>
<style type="text/css">
  table td {
    border-left: expression(this.previousSibling == null ? '0' : 'solid 5px transparent');
  }
</style>
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-03-05T15:21:49.427

这可能是您想要的：

您可以使用两个值：第一个是水平单元格间距，第二个是垂直单元格间距。

```
<table style="border-spacing: 40px 10px;"> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-03-17T22:07:16.200

尝试使用`col`s

例子

```
<table>
    <col style="padding-right:20px;" />
    <col style="padding-right:30px;" />
    <col />
    <tr>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
    </tr>
</table> 
```

cols 也支持类:)

希望这可以帮助

达科

**编辑：**澄清 a`col`是在表顶部声明的一个元素，以影响整个列。第一个 col 元素将影响第一列，第二个 col = 第二列，依此类推。如果您希望将相同的样式分配给多个列，可以将它们分组在 colgroups 中。

**EDIT2：**经过更多研究，您可以在`col`元素上设置的唯一可靠样式是：

*   边界
*   背景
*   宽度
*   能见度

没有边距或填充。混蛋！设置列的宽度会显式解决您的问题吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-17T22:10:43.493

您还可以考虑使用一系列固定宽度的 div 向左浮动边距。这可能会让您对元素样式有更多的控制。

```
.row div {
     margin-right: 10px;
     float: left;
     width: 50px;
}

    <div class="row">
        <div>Cell One</div>
        <div>Cell Two</div>
        <div>Cell Three</div>
    </div> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-01-06T15:20:36.003

如果你的细胞周围已经有边界，乔希的回答不起作用，就像我一样。

我通过使用“位置：相对；左：-10px”将整个表格稍微向左移动来解决了这个问题。我将它与桌子上的单元格间距结合起来。

```
<div id='sandbox'>
    <table cellspacing='10'>
          <tr>
                <td class='smoothBox'>
                    ...
                </td>
                <td class='smoothBox'>
                    ...
                </td>
          </tr>
    </table>
</div> 
```

和CSS：

```
#sandbox {
    float: left;
    position: relative; /* move the whole sandbox */
    left: -11px;        /* slightly to the left */
    width: 950px;
    margin-top: 0px;
    padding: 1px;
    text-align: left;
}
#sandbox table {
    float: left;
    width: 100%;
}
#sandbox td {
    width: 300px;
    vertical-align: top;
} 
```

这对我有用，我希望它也可以帮助你。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-17T22:06:51.240

您是否尝试过使用 col 分组？

```
<table>
    <colgroup>
        <col class="right-padding" />
        <col class="right-padding" />
        <col />
    </colgroup>
    <tbody>
        <tr>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-25T09:47:41.773

这对我来说是工作

`border-collapse: separate; border-spacing: 0px 3px;`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-18T07:01:58.367

只添加一个用作间隔的空单元格怎么样？您可以使用上述 col-tag 为空单元格提供一定的宽度

```
<col/>
<col style="width:20px"/>
<col/>
<col style="width:20px"/>
<col/>
<tr>
  <td>Data</td>
  <td>& nbsp;</td>
  <td>Data</td>
  <td>& nbsp;</td>
  <td>Data</td>
</tr> 
```

或者，如果您想对它们做更多事情，只需向它们添加类而不是使用内联样式......

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2011-07-14T13:58:41.970

乔希的回答非常好，但在我看来是不必要的复杂。当您将表格边框设置为“隐藏”并将折叠模式设置为“折叠”时，将根据需要消除列外边缘的边框。

工作示例：

样式表：

```
table#my_table  {
    border-collapse: collapse;
    border-style: hidden;
}

table#my_table td {
    border-left: 15px solid transparent;
    border-right: 15px solid transparent;
} 
```

HTML：

```
<table id="my_table">
   <tr>
     <td>A1</td>
     <td>A2</td>
     <td>A3</td>
   </tr>
   <tr>
     <td>B1</td>
     <td>B2</td>
     <td>B3</td>
   </tr>         
</table> 
```

# sharepoint - 为什么 Web 部件在第一次添加到页面时会在构造函数上失败？

> ID：656211
> 
> 赞同：1
> 
> 时间：2009-03-17T22:00:51.817
> 
> 标签：sharepoint, exception, sharepoint-2007, moss, web-parts

这个问题有点具体（MOSS2007），我不希望得到答案，但也许运气会对我微笑。

**除了第一次**将其添加到页面之外，我有一个可以正常工作的 Web 部件。当我尝试打开与 SQL 服务器的连接时，它会在**构造函数**中引发异常。SqlClientPermission 权限请求失败。当我说它有效时，我的意思是它在任何方面都已正确注册，并且在所有其他情况下都有效，包括后续调用。

有人说没有出路。我想知道为什么。是设计使然吗？

我什至完全信任我所能做的一切（更改了我在服务器上可以找到的**每个**.config 文件），但这并没有帮助。

似乎 SharePoint 在第一次添加 Web 部件时正在执行某种远程处理，该 Web 部件似乎在第一次构建时以最小的信任运行（与 ASP.Net 的 web_minimaltrust.config 中定义的相同）。尝试授予所有内容的权限并没有产生任何富有成效的结果。

我的解决方案是将数据访问代码移至 OnInit 方法，但这很烦人。有没有人有任何见解？

谢谢你。

来自调试器的一些额外信息。

唯一允许的权限是：

```
<PermissionSet class="System.Security.PermissionSet" version="1">
    <IPermission class="System.Security.Permissions.SecurityPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" version="1" Flags="Execution"/>
    <IPermission class="System.Web.AspNetHostingPermission, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" version="1" Level="Minimal"/>
</PermissionSet> 
```

内部异常堆栈：

```
hresult = -2146233078
mscorlib
在 System.Security.CodeAccessSecurityEngine.Check（对象需求，StackCrawlMark& stackMark，布尔 isPermSet）
在 System.Security.PermissionSet.Demand()
在 System.Data.Common.DbConnectionOptions.DemandPermission()
在 System.Data.SqlClient.SqlConnection.PermissionDemand()
在 System.Data.SqlClient.SqlConnectionFactory.PermissionDemand（DbConnection outerConnection）
在 System.Data.ProviderBase.DbConnectionClosed.OpenConnection（DbConnection outerConnection，DbConnectionFactory connectionFactory）
在 System.Data.SqlClient.SqlConnection.Open()
在 System.Data.Linq.SqlClient.SqlConnectionManager.UseConnection（IConnectionUser 用户）
在 System.Data.Linq.SqlClient.SqlProvider.get_IsSqlCe()
在 System.Data.Linq.SqlClient.SqlProvider.InitializeProviderMode()
在 System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute（表达式查询）
在 System.Data.Linq.DataQuery`1.System.Linq.IQueryProvider.Execute[S]（表达式表达式）
在 System.Linq.Queryable.Count[TSource]（IQueryable`1 源）
在 IManageDocumentsPart.ClientSideDocumentsWebPart.GetOfficeCode(Int32 employeeId)
在 IManageDocumentsPart.ClientSideDocumentsWebPart..ctor()

```

完整的堆栈：

```
IManageDocumentsPart.DLL!IManageDocumentsPart.ClientSideDocumentsWebPart.ClientSideDocumentsWebPart() 第 98 行 C#
[本机到托管转换]    
[管理到本地转换]    
mscorlib.dll!System.RuntimeType.CreateInstanceSlow(bool publicOnly, bool fillCache = true) + 0x68 字节    
mscorlib.dll!System.Activator.CreateInstance(System.Type type, bool nonPublic) + 0x43 bytes    
System.Web.dll!System.Web.HttpRuntime.FastCreatePublicInstance(System.Type 类型) + 0x56 字节    
System.Web.dll!System.Web.UI.WebControls.WebParts.WebPartManagerInternals.CreateObjectFromType(System.Type 类型) + 0x7 字节    
System.Web.dll!System.Web.UI.WebControls.WebParts.WebPartManager.ImportWebPart(System.Xml.XmlReader reader = {EndElement, Name="metaData"}, out string errorMessage = null) + 0x35d bytes    
Microsoft.SharePoint.dll!Microsoft.SharePoint.WebPartPages.SPWebPartManager.ImportWebPartBase(System.Xml.XmlReader reader = {EndElement, Name="metaData"}, string importErrorMessage = "Cannot import this Web Part.", out string errorMessage = null ) + 0x25 字节    
Microsoft.SharePoint.dll!Microsoft.SharePoint.WebPartPages.WebPartImporter.CreateWebPart(bool clearConnections = true) + 0x1b4 字节    
Microsoft.SharePoint.dll!Microsoft.SharePoint.WebPartPages.WebPartImporter.Import(Microsoft.SharePoint.WebPartPages.SPWebPartManager manager = {Microsoft.SharePoint.WebPartPages.SPWebPartManager}, System.Xml.XmlReader reader = {None}, bool clearConnections = true , System.Uri webPartPageUri = {http://v-sp2007/testsite/default.aspx?PageView=Shared}, Microsoft.SharePoint.SPWeb spWeb = {Microsoft.SharePoint.SPWeb}) + 0x8e 字节    
Microsoft.SharePoint.dll!Microsoft.SharePoint.WebPartPages.WebPartImporter.Import(Microsoft.SharePoint.WebPartPages.SPWebPartManager manager = {Microsoft.SharePoint.WebPartPages.SPWebPartManager}, System.Xml.XmlReader reader = {None}, bool clearConnections = true , Microsoft.SharePoint.SPWeb spWeb = {Microsoft.SharePoint.SPWeb}) + 0xa1 字节    
Microsoft.SharePoint.dll!Microsoft.SharePoint.WebPartPages.WebPartQuickAdd.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(string eventArgument = "http%253A%252F%252Fv%252Dsp2007%252F%255Fcatalogs%252Fwp%252FClientSideDocumentsWebPart%252Ewebpart;ClientSideDocumentsWebPart" ) + 0x288 字节    
System.Web.dll!System.Web.UI.Page.RaisePostBackEvent(System.Web.UI.IPostBackEventHandler sourceControl, string eventArgument) + 0xc 字节    
System.Web.dll!System.Web.UI.Page.RaisePostBackEvent(System.Collections.Specialized.NameValueCollection postData) + 0xb2 字节    

```

...堆栈的其余部分与正常打开页面时相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T17:38:17.917

尝试设置解决方案包以部署代码访问安全设置。你肯定需要 SqlClientPermission。查看我关于[Web 部件代码访问安全性的](http://www.dotnetmafia.com/blogs/dotnettipoftheday/archive/2007/07/05/how-to-configure-code-access-security-for-a-web-part.aspx)帖子以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T03:41:13.200

这很奇怪。当页面处于编辑/设计模式时，也许您可​​以特殊情况下您的 Web 部件不执行数据库调用。这不能解决你的问题吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T22:04:37.150

作为一个简单的测试，您可以将包含 Web 部件的程序集部署到 GAL 中。在那里它将以完全信任的方式运行。

就个人而言，我不建议在 Web 部件的构造函数中建立数据库连接，除非您有令人信服的理由这样做。

[更新 3009-03-27]

调试通常是为了排除原因。即使您认为 Web 部件在完全信任下运行，我还是建议您测试 GAC 的案例。请记住从 Bin 目录中删除 .dll 以进行测试。这只需要 5-10 分钟，您就会*知道*自己的立场。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-08-11T21:07:24.557

> 我的解决方案是将数据访问代码移至 OnInit 方法，但这很烦人。有没有人有任何见解？

当 SharePoint 处理并处理请求时，它将执行的第一件事是执行您的构造函数以创建对象的新实例。它调用的构造函数是无参数的，因此可以对它们进行序列化和反序列化以进行导入/导出。在构造函数内部，没有在新创建的对象中设置任何安全构造或关联对象。因此，您的对象可能没有任何关于它所在位置或正在做什么的上下文信息。

通过将代码移动到 OnInit 方法中，您已经将执行时间移回了一些相关对象以及此时尚未自动绑定的对象。在 ASP.net 生命周期中，OnInit 方法自上而下工作，而 OnLoad 方法自下而上工作。因此，这也可能会影响您的父母或孩子是否已经执行了相关代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-10-13T16:33:44.237

作为下一篇文章的参考，[这里](http://www.thorprojects.com/blog/archive/2008/04/16/web-part-event-firings-and-why-you-shouldn%E2%80%99t-have-code-in-the-constructor.aspx)有许多文章中的一篇，Web 部件构造函数中的代码被标记为一个**大的 NO-NO**。

# c++ - 什么时候应该使用 C++ 私有继承？

> ID：656224
> 
> 赞同：129
> 
> 时间：2009-03-17T22:06:06.720
> 
> 标签：c++, oop

与受保护继承不同，C++ 私有继承进入了主流 C++ 开发。但是，我仍然没有找到它的好用处。

大家什么时候用呢？

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2009-03-23T22:22:25.983

我用它所有的时间。我脑海中的几个例子：

*   当我想公开一些但不是全部的基类接口时。公共继承将是一个谎言，因为[Liskov 可替代性](https://en.wikipedia.org/wiki/Liskov_substitution_principle)被破坏，而组合则意味着编写一堆转发函数。
*   当我想从没有虚拟析构函数的具体类派生时。公共继承将邀请客户端通过指向基的指针删除，调用未定义的行为。

一个典型的例子是从 STL 容器私有派生：

```
class MyVector : private vector<int>
{
public:
    // Using declarations expose the few functions my clients need 
    // without a load of forwarding functions. 
    using vector<int>::push_back;
    // etc...  
}; 
```

*   在实现适配器模式时，从 Adapted 类私有继承可以省去转发到封闭实例的麻烦。
*   实现私有接口。这经常出现在观察者模式中。通常我的 Observer 类，MyClass 说，*订阅*一些主题。然后，只有 MyClass 需要做 MyClass -> Observer 的转换。系统的其余部分不需要知道它，因此指示了私有继承。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2009-03-18T00:18:30.817

接受答案后注意：*这不是一个完整的答案。如果您对该问题感兴趣，请阅读[此处](https://stackoverflow.com/questions/656224/when-should-i-use-c-private-inheritance/656235#656235)（概念上）和**[此处](https://stackoverflow.com/questions/656224/when-should-i-use-c-private-inheritance/675451#675451)**（理论和实践）等其他答案。这只是一个花哨的技巧，可以通过私有继承来实现。虽然它很*花哨*，但它不是问题的答案。*

除了 C++ FAQ 中显示的私有继承的基本用法（在其他评论中链接）之外，您还可以使用私有继承和虚拟继承的组合来*密封*类（在 .NET 术语中）或使类*最终*（在 Java 术语中） . 这不是一个常见的用途，但无论如何我发现它很有趣：

```
class ClassSealer {
private:
   friend class Sealed;
   ClassSealer() {}
};
class Sealed : private virtual ClassSealer
{ 
   // ...
};
class FailsToDerive : public Sealed
{
   // Cannot be instantiated
}; 
```

*密封*可以实例化。它派生自*ClassSealer*并且可以直接调用私有构造函数，因为它是一个朋友。

*FailsToDerive*不会编译，因为它必须直接调用*ClassSealer*构造函数（虚拟继承要求），但它不能编译，因为它在*Sealed*类中是私有的，在这种情况下*FailsToDerive*不是 ClassSealer 的*朋友*。

* * *

**编辑**

评论中提到，这在当时使用 CRTP 无法通用。C++11 标准通过提供不同的语法来使模板参数成为朋友，从而消除了该限制：

```
template <typename T>
class Seal {
   friend T;          // not: friend class T!!!
   Seal() {}
};
class Sealed : private virtual Seal<Sealed> // ... 
```

当然，这一切都没有实际意义，因为 C++11 为`final`这个目的提供了一个上下文关键字：

```
class Sealed final // ... 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2009-03-17T22:09:07.930

私有继承的规范用法是“根据”关系实现（感谢 Scott Meyers 的“有效 C++”的措辞）。换句话说，继承类的外部接口与被继承类没有（可见的）关系，但它在内部使用它来实现其功能。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2009-03-24T09:52:53.187

私有继承的一个有用用途是当您有一个实现接口的类时，然后将其注册到其他对象。您将该接口设为私有，以便类本身必须注册，并且只有其注册的特定对象才能使用这些功能。

例如：

```
class FooInterface
{
public:
    virtual void DoSomething() = 0;
};

class FooUser
{
public:
    bool RegisterFooInterface(FooInterface* aInterface);
};

class FooImplementer : private FooInterface
{
public:
    explicit FooImplementer(FooUser& aUser)
    {
        aUser.RegisterFooInterface(this);
    }
private:
    virtual void DoSomething() { ... }
}; 
```

因此 FooUser 类可以通过 FooInterface 接口调用 FooImplementer 的私有方法，而其他外部类则不能。这是处理定义为接口的特定回调的一个很好的模式。

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2009-03-18T00:15:01.853

我认为[C++ FAQ Lite](http://www.parashift.com/c++-faq-lite/private-inheritance.html#faq-24.2)的关键部分是：

> 私有继承的合法长期用途是当您想要构建一个使用类 Wilma 中的代码的类 Fred 时，并且来自类 Wilma 的代码需要调用来自您的新类 Fred 的成员函数。在这种情况下，Fred 在 Wilma 中调用非虚拟，而 Wilma 自己调用（通常是纯虚拟），它们被 Fred 覆盖。这将更难与组合。

如果有疑问，您应该更喜欢组合而不是私有继承。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-03-17T22:40:11.020

我发现它对于我继承的接口（即抽象类）很有用，我不希望其他代码接触接口（仅继承类）。

[在示例中编辑]

以上面链接的[示例为例](http://www.parashift.com/c%2B%2B-faq-lite/private-inheritance.html#faq-24.3)。这么说

> [...] 类 Wilma 需要调用新类 Fred 的成员函数。

就是说 Wilma 要求 Fred 能够调用某些成员函数，或者说*Wilma 是一个接口*。因此，如示例中所述

> 私有继承并不邪恶；它的维护成本更高，因为它增加了有人更改会破坏您的代码的东西的可能性。

评论程序员需要满足我们的接口要求或破坏代码的预期效果。而且，由于fredCallsWilma() 受到保护，只有朋友和派生类可以接触它，即只有继承类（和朋友）可以接触的继承接口（抽象类）。

[在另一个例子中编辑]

[本页](http://c2.com/cgi/wiki?PrivateInterface)简要讨论了私有接口（从另一个角度）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-25T00:41:55.887

有时，当我想在另一个接口中公开一个较小的接口（例如集合）时，我发现使用私有继承很有用，其中集合实现需要访问公开类的状态，其方式类似于内部类爪哇。

```
class BigClass;

struct SomeCollection
{
    iterator begin();
    iterator end();
};

class BigClass : private SomeCollection
{
    friend struct SomeCollection;
    SomeCollection &GetThings() { return *this; }
}; 
```

然后如果 SomeCollection 需要访问 BigClass，它可以`static_cast<BigClass *>(this)`. 无需额外的数据成员占用空间。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-04-30T06:32:47.647

我发现了一个很好的私有继承应用程序，尽管它的用途有限。

# 要解决的问题

假设您有以下 C API：

```
#ifdef __cplusplus
extern "C" {
#endif

    typedef struct
    {
        /* raw owning pointer, it's C after all */
        char const * name;

        /* more variables that need resources
         * ...
         */
    } Widget;

    Widget const * loadWidget();

    void freeWidget(Widget const * widget);

#ifdef __cplusplus
} // end of extern "C"
#endif 
```

现在你的工作是使用 C++ 实现这个 API。

# C-ish 方法

当然，我们可以选择像这样的 C-ish 实现风格：

```
Widget const * loadWidget()
{
    auto result = std::make_unique<Widget>();
    result->name = strdup("The Widget name");
    // More similar assignments here
    return result.release();
}

void freeWidget(Widget const * const widget)
{
    free(result->name);
    // More similar manual freeing of resources
    delete widget;
} 
```

但是有几个缺点：

*   手动资源（例如内存）管理
*   很容易设置`struct`错误
*   释放资源时很容易忘记释放资源`struct`
*   这是C-ish

# C++ 方法

我们被允许使用 C++，那么为什么不使用它的全部功能呢？

## 引入自动化资源管理

上述问题基本上都与人工资源管理有关。想到的解决方案是从每个变量`Widget`的派生类继承并添加一个资源管理实例：`WidgetImpl`

```
class WidgetImpl : public Widget
{
public:
    // Added bonus, Widget's members get default initialized
    WidgetImpl()
        : Widget()
    {}

    void setName(std::string newName)
    {
        m_nameResource = std::move(newName);
        name = m_nameResource.c_str();
    }

    // More similar setters to follow

private:
    std::string m_nameResource;
}; 
```

这将实现简化为以下内容：

```
Widget const * loadWidget()
{
    auto result = std::make_unique<WidgetImpl>();
    result->setName("The Widget name");
    // More similar setters here
    return result.release();
}

void freeWidget(Widget const * const widget)
{
    // No virtual destructor in the base class, thus static_cast must be used
    delete static_cast<WidgetImpl const *>(widget);
} 
```

这样我们就解决了上述所有问题。但是客户仍然可以直接忘记成员的设置者`WidgetImpl`并分配给`Widget`成员。

## 私人继承进入舞台

为了封装`Widget`成员，我们使用私有继承。遗憾的是，我们现在需要两个额外的函数在两个类之间进行转换：

```
class WidgetImpl : private Widget
{
public:
    WidgetImpl()
        : Widget()
    {}

    void setName(std::string newName)
    {
        m_nameResource = std::move(newName);
        name = m_nameResource.c_str();
    }

    // More similar setters to follow

    Widget const * toWidget() const
    {
        return static_cast<Widget const *>(this);
    }

    static void deleteWidget(Widget const * const widget)
    {
        delete static_cast<WidgetImpl const *>(widget);
    }

private:
    std::string m_nameResource;
}; 
```

这使得需要进行以下调整：

```
Widget const * loadWidget()
{
    auto widgetImpl = std::make_unique<WidgetImpl>();
    widgetImpl->setName("The Widget name");
    // More similar setters here
    auto const result = widgetImpl->toWidget();
    widgetImpl.release();
    return result;
}

void freeWidget(Widget const * const widget)
{
    WidgetImpl::deleteWidget(widget);
} 
```

该解决方案解决了所有问题。没有手动内存管理，并且`Widget`被很好地封装，因此`WidgetImpl`不再有任何公共数据成员。它使实现易于正确使用并且难以（不可能？）使用错误。

代码片段构成了[Coliru 上的编译示例](http://coliru.stacked-crooked.com/a/26a22ee5803ca77b)。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-03-20T11:14:56.170

如果您需要`std::ostream`进行一些小的更改（例如在[这个问题](https://stackoverflow.com/q/772355/1969455)中），您可能需要

1.  创建一个`MyStreambuf`派生自`std::streambuf`并在那里实现更改的类
2.  创建一个`MyOStream`派生自的类，该类`std::ostream`还初始化和管理一个实例，`MyStreambuf`并将指向该实例的指针传递给该实例的构造函数`std::ostream`

第一个想法可能是将`MyStream`实例作为数据成员添加到`MyOStream`类中：

```
class MyOStream : public std::ostream
{
public:
    MyOStream()
        : std::basic_ostream{ &m_buf }
        , m_buf{}
    {}

private:
    MyStreambuf m_buf;
}; 
```

但是基类是在任何数据成员之前构造的，因此您将指针传递给尚未构造的未定义行为的`std::streambuf`实例。`std::ostream`

[Ben 对上述问题的回答中](https://stackoverflow.com/a/19933011/1969455)提出了解决方案，只需先从流缓冲区继承，然后从流中继承，然后使用以下命令初始化流`this`：

```
class MyOStream : public MyStreamBuf, public std::ostream
{
public:
    MyOStream()
        : MyStreamBuf{}
        , basic_ostream{ this }
    {}
}; 
```

然而，生成的类也可以用作`std::streambuf`通常不受欢迎的实例。切换到私有继承解决了这个问题：

```
class MyOStream : private MyStreamBuf, public std::ostream
{
public:
    MyOStream()
        : MyStreamBuf{}
        , basic_ostream{ this }
    {}
}; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-03-17T22:24:59.577

有时它可能是聚合的替代方案**，**例如，如果您想要聚合但改变了可聚合实体的行为（覆盖虚函数）。

但你是对的，它没有太多来自现实世界的例子。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-04-18T23:47:11.093

如果派生类 - 需要重用代码 - 您不能更改基类 - 正在使用锁下的基类成员保护其方法。

那么你应该使用私有继承，否则你有通过这个派生类导出的解锁基方法的危险。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-11-24T10:55:23.813

当关系不是“是”时使用私有继承，但是新类可以“根据现有类实现”或新类“像”现有类一样工作。

来自“Andrei Alexandrescu, Herb Sutter 的 C++ 编码标准”的示例：- 考虑两个类 Square 和 Rectangle，每个类都有用于设置其高度和宽度的虚函数。然后 Square 不能正确地从 Rectangle 继承，因为使用可修改 Rectangle 的代码将假定 SetWidth 不会改变高度（无论 Rectangle 是否明确记录了该合同），而 Square::SetWidth 不能保留该合同及其自身的方形不变性同时。但是 Rectangle 也不能正确地从 Square 继承，例如，如果 Square 的客户假设 Square 的面积是其宽度的平方，或者如果他们依赖于其他一些不适用于 Rectangle 的属性。

正方形“是”矩形（数学上），但正方形不是矩形（行为上）。因此，我们更愿意说“works-like-a”（或者，如果您愿意，“usable-as-a”）而不是“is-a”，以使描述不易被误解。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-04-12T22:05:06.360

一个类拥有一个不变量。不变量由构造函数建立。但是，在许多情况下，查看对象的表示状态是很有用的（您可以通过网络传输或保存到文件 - 如果您愿意，可以保存到文件 - DTO）。REST 最好在 AggregateType 方面完成。如果您是 const 正确的，则尤其如此。考虑：

```
struct QuadraticEquationState {
   const double a;
   const double b;
   const double c;

   // named ctors so aggregate construction is available,
   // which is the default usage pattern
   // add your favourite ctors - throwing, try, cps
   static QuadraticEquationState read(std::istream& is);
   static std::optional<QuadraticEquationState> try_read(std::istream& is);

   template<typename Then, typename Else>
   static std::common_type<
             decltype(std::declval<Then>()(std::declval<QuadraticEquationState>()),
             decltype(std::declval<Else>()())>::type // this is just then(qes) or els(qes)
   if_read(std::istream& is, Then then, Else els);
};

// this works with QuadraticEquation as well by default
std::ostream& operator<<(std::ostream& os, const QuadraticEquationState& qes);

// no operator>> as we're const correct.
// we _might_ (not necessarily want) operator>> for optional<qes>
std::istream& operator>>(std::istream& is, std::optional<QuadraticEquationState>);

struct QuadraticEquationCache {
   mutable std::optional<double> determinant_cache;
   mutable std::optional<double> x1_cache;
   mutable std::optional<double> x2_cache;
   mutable std::optional<double> sum_of_x12_cache;
};

class QuadraticEquation : public QuadraticEquationState, // private if base is non-const
                          private QuadraticEquationCache {
public:
   QuadraticEquation(QuadraticEquationState); // in general, might throw
   QuadraticEquation(const double a, const double b, const double c);
   QuadraticEquation(const std::string& str);
   QuadraticEquation(const ExpressionTree& str); // might throw
} 
```

此时，您可能只是将缓存集合存储在容器中并在构建时查找它。如果有一些真正的处理，很方便。请注意，缓存是 QE 的一部分：在 QE 上定义的操作可能意味着缓存是部分可重用的（例如，c 不影响总和）；然而，当没有缓存时，值得一试。

私有继承几乎总是可以由成员建模（如果需要，存储对基的引用）。以这种方式建模并不总是值得的。有时继承是最有效的表示。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2009-03-23T21:32:22.343

仅仅因为 C++ 有一个特性，并不意味着它有用或应该使用它。

我会说你根本不应该使用它。

如果您仍然使用它，那么您基本上违反了封装，并降低了凝聚力。您将数据放在一个类中，并在另一个类中添加操作数据的方法。

与其他 C++ 功能一样，它可用于实现诸如密封类之类的副作用（如 dribeas 的回答中所述），但这并不是一个好的功能。

# c# - 为什么设置静态方法会导致堆栈溢出？

> ID：656226
> 
> 赞同：1
> 
> 时间：2009-03-17T22:07:03.673
> 
> 标签：c#, .net, static

如果我使用 set 访问器更改 C# 中的静态类成员，为什么会出现堆栈溢出错误？

我并不认为这是一个错误，我只是想知道机器内部到底发生了什么。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2009-03-17T22:08:51.160

你不应该；我希望你有类似的东西：

```
private static int foo;
public static int Foo {
    get {return foo;}
    set {Foo = value;} // spot the typo!!! (should be foo)
} 
```

本质上`set`是：

```
static void set_Foo(int value) {
    set_Foo(value);
} 
```

所以这是递归的，最终会消耗堆栈（假设没有优化等）。

如果没有代码示例，就不可能进行更多诊断。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-17T22:32:27.233

我猜你正在做这样的事情：

```
public class MyClass
{
    public int TheInt
    {
    get
    {
        return TheInt;
    }
    set
    {
        TheInt = value; // assignment = recursion!
    }
} 
```

问题是，在 TheInt 的 set 函数中，您正在为 TheInt 分配一个值，这将导致对 set 函数的嵌套调用。你得到递归，然后是堆栈溢出。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-17T22:10:24.073

在调试器中查看您的调用堆栈（当抛出异常时您确实会停止，对吗？）这应该可以让您清楚地了解正在发生的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-20T19:30:17.230

我想我看到了对这个问题的不同解释。问题不是为什么会发生溢出，而是为什么访问器会导致溢出。在这种情况下，访问器是一个函数调用，就像其他任何函数一样，因此它确实会消耗堆栈空间。

如果您使用没有访问器的公共成员，`MyClass.myint`则不会成为函数调用，并且不会溢出堆栈。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-17T22:16:40.483

您想知道内部发生了什么导致堆栈溢出吗？

您的方法调用另一个导致无限递归的方法：A 调用 A，堆栈溢出。A 调用 B，然后 B 调用 A，堆栈溢出。等等。

正如 Marc Gravell 建议的那样，您的属性实现中可能存在错误。

# jquery - jQuery中的特定选择

> ID：656237
> 
> 赞同：2
> 
> 时间：2009-03-17T22:10:06.257
> 
> 标签：jquery

我有一个包含 14 个表格行和 3 个数据列的表格

我喜欢选择表格，每一行只有#3列的值

我怎么数，我知道第一个选择器，孩子......但是如何不净

$('#tableofdata tr td).getmethethird

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-17T22:14:15.297

```
$("#tableofdata tr td:nth-child(3)") 
```

或者简单地说：

```
$("#tableofdata tr td:last-child") 
```

要从中获取第三个孩子，有多种方法：

```
$(this).find(":nth-child(3)"); 
```

或者：

```
$(":nth-child(3)", this); 
```

或者简单地说：

```
$(this)[2]; // arrays are 0 indexed 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-17T22:12:58.573

不确定这是否会是最快的，但是...

```
$('#tableofdata tr td + td + td') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-17T23:20:29.443

那解决方案呢：

```
$('#mytable tr').each(function() {
    var customerId = $(this).find("td").eq(2).html();    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-17T23:27:32.843

此解决方案的问题：

```
$('#mytable tr').each(function() {
    var customerId = $(this).find("td").eq(2).html();    
}); 
```

如果你的桌子看起来像这样：

```
<table id='mytable'>
  <tr>
    <td>col1</td>
    <td>col2</td>
    <td>15</td>
  </tr>
  <tr>
    <td>col1</td>
    <td>col2</td>
    <td>16</td>
  </tr>    
</table> 
```

由于它的构造方式，它只会获得第一行的 ID。因此，如果您想获取所有 ID，您可以这样做：

```
var customers = new Array();
$('#mytable tr td:nth-child(2)').each(function() {
    customers.push($(this).html()); 
}); 
```

如果您想要第 N 行的特定客户 ID，您可以这样做：

```
var customerId = $('#mytable tr').eq(N).find('td').eq(2).html(); 
```

其中 N 将是您想要的行的从 0 开始的索引。

# architecture - 在尝试确定是否应该重新开发系统时，我应该问什么问题？

> ID：656252
> 
> 赞同：6
> 
> 时间：2009-03-17T22:15:57.927
> 
> 标签：architecture

我参与了评估我们的一些系统是否需要从头开始重写，或者是否应该部分重写，或者是否应该继续使用上面的补丁。

为了更好地评估情况，我想知道我应该问自己和其他人哪些问题来帮助确定要采取的适当行动？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-17T22:21:09.053

我建议你阅读[你不应该做的事情，第一部分](http://www.joelonsoftware.com/articles/fog0000000069.html)。他为不重新开发提供了强有力的理由。

金钱报价：

> 重要的是要记住，当你从头开始时，绝对没有理由相信你会比第一次做得更好。首先，您可能甚至没有与第一版相同的编程团队，因此您实际上没有“更多经验”。您将再次犯下大部分旧错误，并引入一些原始版本中没有的新问题。

也许你应该问问自己，你是否对系统足够了解，可以在不重写的情况下解决问题。如果您不这样做，可以肯定地说您对系统不够了解，无法从头开始重新开发它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-17T22:33:28.573

一般来说，我发现重写代码往往很麻烦（它昂贵、耗时，并且涉及使第一个系统看起来更好的发现阶段）。

也就是说，这里有几个问题要问：

1.  核心重构就足够了吗？您将通过评估系统了解核心问题是否比代码更深入。如果问题出在代码库中（而不是技术本身），我更喜欢重构。

2.  当前系统在多大程度上是可测试的？可测试性在延长任何系统模块的使用寿命方面大有帮助，因为可测试代码通常更容易扩展和维护。这也与#1 有关。

3.  最后，重写所提供的价值是否可以证明这种努力是合理的。当然，这是一个商业问题，但开发人员可以而且应该帮助解决这个问题。

在我遇到的大多数情况下，答案是否定的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-17T22:23:43.930

最后，每当您从头开始重写系统时，您都希望实现一些目标。你应该问问自己你想达到什么目标？你想要_____吗：

*   降低使用旧技术构建系统的风险
*   降低成本：维护成本太高
*   ?

您可以进行收支平衡分析，看看您的新系统何时开始发挥作用。在我看来，您应该能够减少重写系统的成本，并且能够看到新系统的成本低于旧系统。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-17T23:21:43.667

1.  您将无法交付多长时间？多少时间 您低估了以前的项目的哪些因素？在最坏的情况下你能承受多少时间？

2.  目前有多少人力用于*维护*现有系统？*除了*开发新系统的人员之外，您是否还有可用的人力？

3.  您如何确保不会重新创建具有相同问题的相同系统？避免明显的架构错误通常是不够的。

4.  如果您没有资源来改进当前系统，您是否能够竞争/生存？

* * *

即使“重构和修复”意味着，从长远来看，替换大部分现有系统，也意味着将所有资源放入一个系统中，而不是两个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-17T23:49:46.907

我建议您需要一个讨论的上下文，而我最熟悉的最好的上下文是在 Martin Fowler 的“重构”一书中。对我来说，问题真的是“这个应用程序可重构吗？”

The first specific guideline would be "Is it written using good OO design principles?" If not, usually you need to either put it on life support, and/or start over. If it is, then the book will provide lots of help; and in my experience there's good reason for hope.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-17T22:22:40.237

按以下顺序：

*   它是否正确地完成了这项工作？
*   快吗？
*   容易维护吗？
*   容易扩展吗？

# html - 转向网络的印刷设计师......他们需要知道什么？

> ID：656260
> 
> 赞同：12
> 
> 时间：2009-03-17T22:20:33.097
> 
> 标签：html, css, graphics

我正在尝试为学习网页设计的习惯于印刷出版的学生编写一份指南。

Web 开发人员知道但他们不知道的一些明显的事情：

*   您不能在 HTML 中旋转图形
*   所有对象都必须是矩形的，不能有圆形 DIV
*   他们的曲目中的许多印刷效果无法实现

一些棘手的事情是：

*   他们可以有可变的不透明度吗？嗯，是的，也不是。
*   他们可以有圆角吗？也许。

有些不是技术上的困难，而是问题：

*   图片文件大小：我有一个学生想在他们网站的每个页面上都有一个不同的大图形标题；这在*技术上*不是问题，但这意味着访问者每次导航时都必须等待新图形加载
*   可访问性：“为什么不把所有东西都做成图形，以克服 HTML 的限制？”

请帮我填写我的清单，并为进行此过渡的人添加任何提示或提示。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-17T22:30:28.237

### 网页不打印

*   布局可以是流动的。
*   元素不必绝对定位
*   需要在多个浏览器中检查网页的兼容性
*   避免精神分裂症；从经验来看，从印刷行业进入这个领域的人所做的一切都是蛮力的，而不是试图为优化和语义目的考虑优雅的解决方案
*   印刷品被视觉消费——网络也被有视觉障碍的人消费。无论市场份额多么小，不要忘记 lynx 用户 :)
*   语义很重要，了解它们

这就是我现在能想到的……

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-17T23:17:27.810

来自一个同时做过印刷设计和网页设计的人（我认为两者都做得不错），你似乎有了一个良好的开端。其他想法：

*   Darko Z 提到了这一点，但我认为值得强调的是，**必须**识别和处理浏览器的不兼容性。在印刷行业，有像 PDF 这样的标准格式，可以保证打印出来的东西与设计中的样子一样；此外，许多出版商会直接接受最流行的设计程序的原生文件格式，比如 Adob​​e InDesign、Quark XPress，甚至是 MS Word（对于小气鬼;-P）。关键是印刷设计师习惯于“设置它并忘记它”的方法，他们认为一旦他们以某种方式设计某些东西，它将保持设计状态。对于习惯于印刷世界的人来说，不同的网络浏览器呈现相同的网页略有不同的事实可能会成为一个主要的痛苦。

*   上面的附录：字体。出于显而易见的原因，您不能在网页设计中使用（或至少不能依赖）不常见的字体。

*   屏幕空间必须得到有效利用，因为它的数量是有限的。我的意思是*真的很*有限——无论你多么努力，你都无法编写 HTML 来使某人的显示器扩大 5 英寸或在背面放置另一个屏幕；-) 这不像印刷品那样人们可以在它们之间来回偷看一本书的不同页面。阅读网页有点像用双筒望远镜看羊皮纸；您必须在设计页面时考虑到有限的视野。

*   网页设计是动态的和瞬态的；他们熬夜一段时间，他们变得无聊，他们被回收/替换为新设计。所以你不会被错误困住。但这也意味着您需要在设计时考虑到未来的变化，例如使用 CSS，这样您就可以轻松地更改整个元素类的外观。印刷设计中有一些风格的使用，但远不及在线。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-17T23:19:14.407

**字体和文本**

*   您仅限于一小部分字体
*   字体以不同大小查看
*   段落应拉伸的宽度有可读性限制（在流畅的布局中）
*   为所有类型的读者写作——有些人会略读，有些人会详细阅读

**图片**

*   以不同的分辨率和屏幕尺寸查看网站 - 相应地进行设计
*   要在 IE6 中实现透明背景，请使用带有 alpha 的 PNG8（IE6 不支持不同级别的透明度，它要么 100% 透明，要么不透明）
*   使用 CSS 精灵
*   图片不应该用在大部分文字的地方
*   img 标签应该用于具有语义值的图像，并且所有布局图像都应该是 CSS 图像
*   每个 img 标签都需要有 alt 属性来验证

**(X)HTML 和 CSS**

*   浏览器渲染变化很大
*   验证 CSS 和 (X)HTML 以提高设计跨浏览器友好的可能性
*   不要使用 CSS hack
*   使用正确的语义标记
*   页面应该能够在没有启用 JavaScript 的情况下工作
*   阅读 Yahoo 的[性能指南](http://developer.yahoo.com/performance/)并使用[YSlow](http://developer.yahoo.com/yslow/)
*   Dreamweaver 的设计模式不反映页面在真实浏览器中的显示方式

**一般设计**

*   在可用性、可访问性、设计和下载大小方面，越简单通常越好
*   大于五或六项的列表应在视觉上进行分解
*   一致性很重要 - 不要在没有非常好的理由的情况下更改导航等
*   选择颜色时，请记住那些有色盲的人。这将影响您如何选择通过颜色来传达含义。
*   将最重要的信息放在首屏（屏幕中不滚动显示的部分）
*   网络是交互式的。这极大地影响了您使用和显示信息的方式。您可以使用选项卡、手风琴和类似方法隐藏并随后显示信息。
*   考虑主要和次要的行动呼吁。你希望用户做什么？你希望他们接下来去哪里？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-17T23:12:45.593

一些广泛的观点：

**1\. 打印是静态的，网络是交互式的。**

印刷项目的本质是一个固定的时间点，一个在纸上或其他基材上捕捉到的想法。Web 项目正在移动、改变体验，这些体验既代表了创建者的想法，也代表了用户的想法。

**2.一切都是不确定的。**

您在回答中提到了排版，可能值得将其扩展到涵盖外观的所有方面。可用的操作系统和硬件的多样性意味着很难确定所有观众将如何体验您的最终设计。虽然有些东西必须在所有浏览器之间兼容，但有时不值得花时间和精力在所有系统中使像素完美。

**3\. 学习编程。**

除非你有这方面的天赋，否则你不需要学习如何为网络编程。但是，熟悉 Web 编程仍然会有很大帮助，就像您不会编码一样，您需要与可以编码的人密切合作，并且您需要能够与他们进行有效的沟通。

**4\. 创建工作原型**

当某些东西是静态的时，可以使用静态格式进行设计。要设计像网站这样的交互式东西，您应该利用移动原型来代表最终设计将具有的行为类型。您可以使用纸张来执行此操作，或者使用 xhtml、css 和 javascript 或专用原型程序制作更复杂的模型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-17T23:24:23.350

请记住以 RGB 格式而不是 CMYK 格式保存您的 jpg 文件。我经常收到不会在网站上显示的 jpg，每次都是因为它从 Photoshop 以错误的格式保存。

随着浏览器支持更多的图像格式，这将不再是一个问题，但考虑到 20% 以上的用户仍在使用 IE6 浏览我们开发的网站，这需要一段时间才能消失。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-18T00:03:31.990

*   用户控制他们希望如何查看网络上的内容，而不是您。你的设计*不会在所有人看来都是一样的，因为有些人可能会**故意*让它不同。
*   屏幕可以任意大或小
*   网络是交互式的：可用性胜过漂亮
*   您的页面将被机器读取：确保数据易于被无法读取图像/大块文本的脚本获取（也称为“语义化”）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-18T22:41:56.937

对于想要学习如何实际标记 HTML 和编写 CSS 的印刷设计师来说，其中很多都是很好的经验法则。但作为过去的 Web 开发人员，我经常只是拿设计师的模板并为他们编写 HTML 和 CSS。该任务是简单还是困难取决于设计者对 CSS 功能的认识。

特别是有一个痛点不断出现。因此，对于转向网络的印刷设计师来说，要记住的绝对第一条规则是：

**不要将任何元素设计为具有明确的、像素完美的高度。**您可以根据需要限制宽度，但是更改字体、首选字体大小以及从不同页面上的数据库中提取的不同文本字符串意味着文本需要能够垂直流动，*而不会*产生可怕的、难以使用的溢出滚动条.

记住这一点的设计师通常可以想出易于切割和以主要语义方式集成的设计。忘记这一点的设计师有时最终会创造出必须被塞进 3 英寸 x 3 英寸盒子的设计，这就是我伸手去拿伏特加的时候。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-18T00:11:31.333

给定的颜色或字体在不同的浏览器中呈现不同。

尤其是当一个浏览器在 Windows 上而另一个在 Mac 或 Linux 上时。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-18T22:01:11.123

我不久前写了一篇关于这个的博客文章 - [http://aloestudios.com/2008/08/dear-print-designer-doing-web-design/](http://aloestudios.com/2008/08/dear-print-designer-doing-web-design/)

我的朋友马克也是 - [http://www.visual28.com/articles/tips-for-better-web-design](http://www.visual28.com/articles/tips-for-better-web-design)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-20T03:48:07.370

Jeffery Zeldman 的《将您的才能带到网络》一书专门针对您提出的问题。已经出几年了……不知道是第二版还是第三版。看看这个。

我的主要建议是，您需要认识到，虽然您在打印应用程序中具有点精度，但在网页设计中的大部分时间，您的重点是设计和编码一个能够为任意数量的平台、分辨率实现内容和布局目标的网站和颜色深度。颜色深度已经变得不像过去那么重要了。

# vb.net - 将 VB 参数注入存储过程 (FireBird) 时出现问题

> ID：656263
> 
> 赞同：1
> 
> 时间：2009-03-17T22:21:28.570
> 
> 标签：vb.net, stored-procedures, parameters, firebird

在座的每一个人，一直都是那么大的帮助，无论是直接的还是间接的。寄希望于这再次成为现实。

为澄清起见，存储过程在 FireBird 下运行，而 VB 属于 .NET 变体

我有一个存储过程（摘录如下，重要的是 WHERE）

```
 select pn, pnm.description, si_number, entry_date, cmp_auto_key, 
  parts_flat_price,    labor_flat_price, misc_flat_price, woo_auto_key, 
  wwt_auto_key
  from parts_master pnm, wo_operation woo
 where pn like :i_pn || '%'
   and pnm.pnm_auto_key = woo.pnm_auto_key
  into :pn, :description, :work_order, :entry_date, :cmp, :parts_price,
       :labor_price, :misc_price, :woo, :wwt 
```

我正在尝试从使用参数 I_PN 的 vb 应用程序传递参数，其代码如下（MyServer 和 MyPassword 的变量由代码的早期部分确定。）

```
 Try
        Dim FBConn As New FirebirdSql.Data.FirebirdClient.FbConnection()
        Dim FBCmd As FirebirdSql.Data.FirebirdClient.FbCommand

        Dim MyConnectionString As String
        MyConnectionString = _
        "datasource=" & MyServer & ";database=" & TextBox4.Text & "; & _
        user id=SYSDBA;password=" & MyPassword & ";initial catalog=;"

        FBConn = New FirebirdSql.Data.FirebirdClient. & _
        FbConnection(MyConnectionString)

        FBConn.Open()
        FBConn.CreateCommand.CommandType = CommandType.StoredProcedure

        FBCmd = New FirebirdSql.Data.FirebirdClient. & _
        FbCommand("WIP_COSTS", FBConn)

        FBCmd.CommandText = "WIP_COSTS"

        FBConn.CreateCommand.Parameters. & _
        Add("@I_PN", FirebirdSql.Data.FirebirdClient.FbDbType.Text). & _
        Value = TextBox1.Text

        Dim I_PN As Object = New Object()
        Me.WIP_COSTSTableAdapter.Fill(Me.WOCostDataSet.WIP_COSTS, @I_PN)
        FBConn.Close()
    Catch ex As System.Exception
        System.Windows.Forms.MessageBox.Show(ex.Message)
    End Try 
```

当我执行 VB.App 并尝试运行程序时，我收到以下错误：

> 动态 SQL 错误
> SQL 错误代码 = -206
> Column Unknown
> I_PN
> At Line 1, column 29

而且我不能完全确定实际问题是什么。意思是，我不知道我的逻辑是否在 VB 端或存储过程中不正确。

包含的任何编码都是从我发现的示例中与在 GoogleFu 长期逗留期间发现的各种代码位一起拼凑而成的。

任何拥有超过一两个月的 VB 经验（不像我）的人都可以只看一眼就可以证明——我的代码可能很糟糕而且格式不正确——当然不优雅，而且在操作上最有把握。我当然会张开双臂接受各种建议。

像往常一样，如果您还有其他问题，我会尽我所能回答。

再次感谢。

雅苏米安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-26T16:43:21.220

经过一番重新思考和更多研究，我终于让我的代码工作了..

```
 Try

        ' Code for checking server location and required credentials

        Dim FBConn As FbConnection
        ' Dim FBAdapter As FbDataAdapter
        Dim MyConnectionString As String

        MyConnectionString = "datasource=" _
                        & MyServer & ";database=" _
                        & TextBox4.Text & ";user id=SYSDBA;password=" _
                        & MyPassword & ";initial catalog=;Charset=NONE"

        FBConn = New FbConnection(MyConnectionString)
        Dim FBCmd As New FbCommand("WIP_COSTS", FBConn)

        FBCmd.CommandType = CommandType.StoredProcedure
        FBCmd.Parameters.Add("@I_PN", FbDbType.VarChar, 40)
        FBCmd.Parameters("@I_PN").Value = TextBox1.Text.ToUpper

        Dim FBadapter As New FbDataAdapter(FBCmd)
        Dim dsResult As New DataSet
        FBadapter.Fill(dsResult)

        Me.WIP_COSTSDataGridView.DataSource = dsResult.Tables(0)

        Dim RecordCount As Integer
        RecordCount = Me.WIP_COSTSDataGridView.RowCount
        Label4.Text = RecordCount

    Catch ex As System.Exception
        System.Windows.Forms.MessageBox.Show _
        ("There was an error in generating the DataStream, " & _
        "please check the system credentials and try again. " &_ 
        "If the problem persists please contact your friendly " &_ 
        "local IT department.")
    End Try

    ' // end of line 
```

我还认为我需要对实际的存储过程进行更改，但是结果证明这是不正确的。

代码可能不漂亮，我需要在我的 TRY 块中做更多的工作以更好地处理错误；但是，它有效。

感谢所有参与并帮助我走上正轨的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T02:45:40.197

尝试改变这个：

```
FBConn.CreateCommand.Parameters. & _
        Add("@I_PN", FirebirdSql.Data.FirebirdClient.FbDbType.Text). & _
        Value = TextBox1.Text 
```

...对此：

```
FBCmd.Parameters.AddWithValue("@I_PN", TextBox1.Text) 
```

基本上，您希望将存储过程参数添加到 Command 对象，而不是 Connection 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T14:30:35.277

安德烈克，

这是整个存储过程。我们的 Firebird 是 1.5.3 版本，使用 IbExpert 版本 2006.12.13，方言 3 编写

```
Begin
For
select pn, pnm.description, si_number, entry_date, cmp_auto_key, parts_flat_price,
       labor_flat_price, misc_flat_price, woo_auto_key, wwt_auto_key
  from parts_master pnm, wo_operation woo
 where pn like :i_pn || '%'
   and pnm.pnm_auto_key = woo.pnm_auto_key
  into :pn, :description, :work_order, :entry_date, :cmp, :parts_price,
       :labor_price, :misc_price, :woo, :wwt

Do begin
   labor_hours = null;
   work_type = null;
   parts_cost = null;
   labor_cost = null;
   ro_cost = null;
   customer = null;

   select company_name
     from companies
    where cmp_auto_key = :cmp
     into :customer;

   select work_type
     from wo_work_type
    where wwt_auto_key = :wwt
     into :work_type;

   select sum(sti.qty*stm.unit_cost)
     from stock_ti sti, stock stm, wo_bom wob
    where sti.wob_auto_key = wob.wob_auto_key
      and sti.stm_auto_key = stm.stm_auto_key
      and wob.woo_auto_key = :woo
      and sti.ti_type = 'I'
      and wob.activity <> 'Work Order'
      and wob.activity <> 'Repair'
     into :parts_cost;

   select sum(sti.qty*stm.unit_cost)
     from stock_ti sti, stock stm, wo_bom wob
    where sti.wob_auto_key = wob.wob_auto_key
      and sti.stm_auto_key = stm.stm_auto_key
      and wob.woo_auto_key = :woo
      and sti.ti_type = 'I'
      and wob.activity = 'Repair'
     into :ro_cost;

   select sum(wtl.hours*(wtl.fixed_overhead+wtl.variable_overhead+wtl.burden_rate)),
          sum(wtl.hours)
     from wo_task_labor wtl, wo_task wot
    where wtl.wot_auto_key = wot.wot_auto_key
      and wot.woo_auto_key = :woo
     into :labor_cost, :labor_hours;

   suspend;
   end
End 
```

硬编码 - 我在评论中回复了您的建议。

# .net - IIS/ASP.NET 应用程序和子应用程序：如何在不重定向的情况下使用两个主机名？

> ID：656267
> 
> 赞同：1
> 
> 时间：2009-03-17T22:22:57.553
> 
> 标签：.net, asp.net, iis, iis-6

我们的服务器上的目录中有一个 Web 应用程序

```
 c:\inetpub\wwwroot\myapp 
```

在 myapp 目录中，我们有一个名为`mysubapp`. mysubapp 有自己的 bin 目录，并且需要`myapp\bin`目录中的 DLL

所以目录如下：

```
c:\inetpub\wwwroot\myapp
c:\inetpub\wwwroot\myapp\bin
c:\inetpub\wwwroot\myapp\mysubapp
c:\inetpub\wwwroot\myapp\mysubapp\bin 
```

我们目前已使用主机标头设置 IIS，以便 myapp.mycompany.com 指向`c:\inetpub\wwwroot\myapp`并`http://mysubapp.mycompany.com`重定向到`http://myapp.mycompany.com/mysubapp`.

我们希望 mysubapp.mycompany.com 指向而`c:\inetpub\wwwroot\myapp\mysubapp`不用 URL 说`http://myapp.mycompany.com/mysubapp`。

我尝试将主机头设置为指向但`c:\inetpub\wwwroot\myapp\mysubapp`不使用重定向，但是当我们这样做时，我们收到一个错误，指出无法找到某些 DLL 文件，找不到的 DLL 文件是`c:\inetpub\wwwroot\myapp\bin`. 此错误是有道理的，因为应用程序无法在其应用程序目录之外找到 DLL。

有什么方法可以配置 IIS 以使其正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T07:14:59.130

如果我正确理解您的问题，我能想象的唯一有效设置是采用您提到的方法（指向主机标头但`c:\inetpub\wwwroot\myapp\mysubapp`不使用重定向）并将主应用程序的 DLL 包含在子文件夹的 bin 目录中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-17T22:55:02.560

您需要使用 url 重写。

[http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-17T22:31:36.750

尽管答案没有考虑主机标头，但[此链接](http://forums.asp.net/p/1365317/2834504.aspx)中建议的解决方法可能很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T06:55:11.363

正如 DreamSonic 所说，为每个应用程序使用不同的网站，每个应用程序使用不同的 IP 地址。要向服务器添加多个 IP，请使用网络属性中 Internet 协议 (tcp/Ip) 对话框中的高级按钮。在 IIS 中，将网站设置为响应指定的 IP，而不是默认的 [All Unassigned]。您不需要两个（或更多）网卡。

除此之外，您需要进行一些 URL 重写，这可能会很痛苦，因为您的应用程序中的所有链接都需要“修复”，否则您最终会在客户端的浏览器中看到不需要的 URL。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T07:20:50.520

如果您想在不同的域名下提供 /mysubapp，我看不出将其保留在 myapp 下的意义。

将应用程序设置为单独的 Web 应用程序，并将 dll 从 myapp 复制到 mysubapp。由于它是 Asp.Net，您甚至可以通过 web.config 文件执行一些程序集绑定魔术。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-17T23:24:45.640

不涉及 url 重写的解决方案如下：

1.  在 DNS 中为 myapp.mycompany.com 和 mysubapp.mycompany.com 分配不同的 IP 地址，但它们应该映射到同一个主机（Robert 在下面解释如何使用 2 个 NIC）。
2.  在 IIS 中创建 2 个网站（不是虚拟目录）。
3.  将第一个映射到 myapp.mycompany.com 的 IP 地址并指向 c:\inetpub\wwwroot\myapp
4.  将第二个映射到 mysubapp.mycompany.com 的 IP 地址并指向 c:\inetpub\wwwroot\myapp\mysubapp
5.  ？？？
6.  利润 ：）

# c# - 托管和非托管代码的内存分配分析器？

> ID：656274
> 
> 赞同：2
> 
> 时间：2009-03-17T22:24:36.987
> 
> 标签：c#, c++, memory-leaks, unmanaged, profiler

我的应用程序运行 C++（COM 对象）和 C# 托管代码的组合。可悲的是，我需要追查一个难以捉摸的内存泄漏。

我试过[AQTime](http://www.automatedqa.com/products/aqtime/index.asp)，它在纸上看起来不错，但我的应用程序在它下面运行时不断崩溃。

有什么更好的选择建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-17T23:19:47.087

[Massif](http://valgrind.org/docs/manual/ms-manual.html)是一个堆分析器，是 Valgrind 项目的一部分，它应该可以很好地用于分析非托管代码中的分配。如果您的堆由运行时管理（例如托管代码），您将需要更具体地了解您正在使用的运行时。[这里](http://java-source.net/open-source/profilers)有一个 Java 内存分析器列表，几个流行的 .Net 内存分析器是[SciTech 的 .Net Memory Profiler](http://memprofiler.com/)（14 天试用版）和[RedGate 的 ANTS Profiler](http://www.red-gate.com/Products/ants_profiler/index.htm)（也有免费试用版），但价格更高（并且功能更多） ) 为完整版。

# asp.net - 整数的数据绑定列表

> ID：656277
> 
> 赞同：1
> 
> 时间：2009-03-17T22:26:01.883
> 
> 标签：asp.net, data-binding

我有以下整数列表：

```
Dim foo = New List(Of Integer) 
```

我将 gridview 的数据源设置为 foo。我在数据绑定标记中添加了什么？

```
<%# Eval("???") %> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-17T22:42:48.520

这应该有效：

```
<%# Container.DataItem %> 
```

# windows-vista - 在 Vista 上配色方案不是 Aero 时出现重影窗口

> ID：656279
> 
> 赞同：3
> 
> 时间：2009-03-17T22:26:26.687
> 
> 标签：windows-vista, service, desktop, sessionid

我们有一个服务可以启动一个与登录用户交互的应用程序。我们启动的应用程序始终以我们拥有凭据的特定用户身份运行。我们执行必要的操作（获取活动会话 ID、logonUser、调整令牌）并在 winsta0\Default 桌面中使用 CreateProcessAsUser 启动应用程序。

如果 Vista PC 的配色方案是 Aero，则一切正常 - 但在基本和经典配色方案下，应用程序仍会启动，但没有绘制任何窗口。任务栏上有一个新任务。如果你最小化一个在后台全屏的窗口，那么你可以看到我们的幽灵应用程序的轮廓 - 你可以移动它，它会很好地响应键盘/鼠标输入。它只是看不见的，不是画出来的。

有谁知道会发生什么？为什么 Aero 配色方案很好，但在其他配色方案中却不行？

谢谢你的帮助，

坦率

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T12:47:21.813

It sounds pretty weird - you may have hit on an actual bug in Vista since it seems unlikely many other people have tried what you are doing.

First of all I'd make sure the problem doesn't exhibit this behaviour when run by the logged in user directly, just to pin it down to whether it's a Aero/Classic issue or a winstation issue.

Secondly I'd attach to the process with a debugger and make sure the message loop is getting various significant messages, particularly WM_PAINT :)

But this is obscure enough that your only option may be to open a paid support issue with Microsoft.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-07T11:32:59.003

如果您的表单上有用户绘制的控件（或者您的表单本身是用户绘制的），也可能会出现问题。如果仅在 Application.RenderWithVisualStyles 为 true 时绘制表单，您可能会看到此行为。所以确保你也渲染了没有这些样式的东西。我们将不胜感激您的表单外观/行为/等的更多信息。

# visual-studio-2008 - Virtual PC 2007 主机是 64 位 XP Pro - 来宾是 32 位 XP Pro - 无法访问共享文件夹

> ID：656283
> 
> 赞同：0
> 
> 时间：2009-03-17T22:28:44.700
> 
> 标签：visual-studio-2008, virtual-pc, caspol

我用谷歌搜索过，我已经死了 Caspol，但我仍然无法从主机上的驱动器加载 VS2008 解决方案。我收到项目位置不受信任的消息。

当我尝试：

```
Caspol -q -machine -addgroup 1 -url file://d:/* FullTrust -name "D Drive" 
```

VS2008 开始打开解决方案，然后崩溃，没有错误消息 - 只是消失了。我唯一能看到的与我见过的一些解决方案不同的是，我有一个 64 位的主机系统，而访客是 32 位。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T02:38:45.383

It may not be the best solution, but have you tried using dropbox to get around this issue?

# iphone - 自动释放池

> ID：656288
> 
> 赞同：0
> 
> 时间：2009-03-17T22:30:30.030
> 
> 标签：iphone

我希望有人可以帮助我解决 iPhone 上的内存问题。

我有一个滚动视图，它是导航控制器的一部分。

每当我第一次按下导航控制器并滚动浏览滚动视图（添加图像）时，内存被分配成大块（比如每个 1mb）。

如果我旋转显示器几次，内存被释放，一切都很好：滚动视图正常工作，内存返回到它应该在的位置（大约 1mb，查看 Instruments 中的 Net alloc）。

就像设备旋转一样，我怎样才能防止内存变得疯狂，或者在使用滚动视图期间释放它？

这是加载滚动视图页面的代码片段：

```
- (void)loadPage:(int)page isCurrent:(BOOL)isCurrent {
if (page < 0) return;
if (page >= totalRows) return;
picViewController *controller = [[picViewController alloc] init];
if ((NSNull *)[viewControllers objectAtIndex:page] == [NSNull null]) {
        NSString *fullPath = [self fullPath];
    if([fileManager fileExistsAtPath:fullPath]) {
        currentImage=[UIImage imageWithContentsOfFile:fullPath];
        [controller setImg:currentImage];
        [viewControllers replaceObjectAtIndex:page withObject:controller];
    }
    else {
            AsyncImageView* asyncImage = [[AsyncImageView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
            asyncImage.tag = 8;
            [asyncImage loadImageFromName:imageName withURL:url];
            [controller.view addSubview:asyncImage];
            [asyncImage release];
            [viewControllers replaceObjectAtIndex:page withObject:controller];
        }
        if (nil == controller.view.superview) {
            CGRect frame = scrollView.frame;
            frame.origin.x = frame.size.width * page;
            frame.origin.y = 0;
            controller.view.frame = frame;
            [scrollView addSubview:controller.view];
        }
    [controller release];
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-17T22:40:14.063

您的控制器是否注意内存不足通知？您可以刷新任何在收到时不可见的图像，或者进行您认为相关的任何其他发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-17T23:00:26.200

我看不到您在代码中实际清除屏幕外页面的位置。

你的代码有点像苹果的`PageControl`例子，对吧？

我所做的是每次“激活”页面时循环浏览页面并清除超过 1 或 2 个屏幕之外的页面。（1 表示没有反弹滚动，2 表示有。）

```
- (void)updateCachedPages {
    int active = pageControl.currentPage;
    int count = pageControl.numberOfPages;
    for ( int i = 0; i < count; i++ ) {
        if ( abs( active - i ) <= 2 ) {
            [self loadPage:i];
        }
        else {
            [self purgePage:i];
        }
    }
}

- (void)purgePage:(int)page {
    if ((page < 0) || (page >= [_myObjects count])) return;

    MyControllerClass *controller = [_viewControllers objectAtIndex:page];
    if ((NSNull *)controller != [NSNull null]) {
        [_viewControllers replaceObjectAtIndex:page withObject:[NSNull null]];
        //NSLog( @"Purged page %d", page );
    }
} 
```

调用`updateCachedPages`，`scrollViewDidEndDecelerating`您的 PageControl 的页面更改操作，以及`viewWillAppear`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T03:00:52.033

好吧，毕竟我并没有释放所有的内存。

一旦我发现一个类实例没有被正确释放，并确保 tewha 的清除代码正常工作，一切都是金色的。

感谢您的快速帮助。顺便说一句，这个论坛很棒。

# jquery - jquery中的表格到水平条形图

> ID：656292
> 
> 赞同：2
> 
> 时间：2009-03-17T22:31:30.933
> 
> 标签：jquery, graph, dhtml

我有一张桌子：

```
1-joe-234
2-bob-432
3-sean-654 
```

我想用它制作一个条形图。

不是说网上没有lib，而是prototype或者flash xml文件。

--

我正在研究的解决方案是一个 jquery 插件，它将为谷歌图表生成一个 html 链接......不漂亮但 KISS（非常简单）和丑陋。

--

这是我的灵感之一： [http ://www.dumpsterdoggy.com/articles/?jquery-horizo​​ntal-bar-graph](http://www.dumpsterdoggy.com/articles/?jquery-horizontal-bar-graph)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T00:00:07.180

这完全是 JavaScript，所以如果你有其他格式的数据，你首先必须转换为 JS：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
<div id="bars"></div>
<script type="text/javascript">
//<![CDATA[
    $(function (){
      var values = [234, 654, 432];
      var maxValue = values[0];
      for(var i = 0; i < values.length; i++){
        maxValue = Math.max(maxValue, values[i]);
      }

      for(var i = 0; i < values.length; i++){
        var newBar = $("<span>").html(values[i]);
        newBar.css({
          "display": "block",
          "width": "0px",
          "backgroundColor": "#600",
          "marginBottom": "5px",
          "padding": "2px",
          "color": "#FFF"
        });

        $("#bars").append(newBar);

        newBar.animate({"width": (100 * values[i] / maxValue) + "%"}, "slow");
      }
    });
//]]>
</script> 
```

刚刚在 Opera 10 中编写和测试。

当然，如果你在一个单独的文件中调整所有可能的 CSS 规则会更好，例如漂亮的背景、条之间的边距、文本颜色等，但这只是一个演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T01:24:52.733

不，这不是我要问的......它应该从 html 表中检索数据

这是我的代码..未完成..

```
jQuery.fn.horizontalTableGraph = function() {

    $(this).find("thead").remove();

    var maxvalue = 0;

    $(this).find("tr").each(function(i) {
        $(this).removeClass();      
        $(this).find("td").eq(0).animate({width : '50px'}, 1000);
        $(this).find("td").eq(1).animate({width : '150px'}, 1000).css("text-align","left");
        $(this).find("td").eq(1).css("width","500px");

        var getvalue = $(this).find("td").eq(2).html();
        maxvalue = Math.max(maxvalue,getvalue);
    });

    $(this).find("tr").each(function(i) {

    var thevalue = $(this).find("td").eq(2).html();

    var newBar = $("<span>").html(thevalue);
    newBar.css({
          "display": "block",
          "width": "0px",
          "backgroundColor": "#600",
          "marginBottom": "5px",
          "padding": "2px",
          "color": "#FFF"
        });

        //$(this).find("td").eq(2).hide();
        $(this).find("td").eq(2).append(newBar);

        newBar.animate({"width": (100 * thevalue / maxvalue) + "%"}, "slow");
    })
}; 
```

这是最终结果 [http://acecrodeo.com/06-classement2.php?lang=fra&annee=2008b](http://acecrodeo.com/06-classement2.php?lang=fra&annee=2008b)

我需要添加删除旧值和剩余空间的比例......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T01:32:00.600

以下应该可以解决问题。该示例适用于该页面。我通过为它创建一个小书签来测试它。在 IE 中，它似乎是居中的，这可能是页面样式的一部分。无论如何，关键是开头的选择器。该选择器选择的任何元素都是将用作表格数据的元素。

```
var values = [];
$('.item-multiplier').each(function() {
  var t = $(this).text().match(/\d+/);
  if (t) values.push(parseInt(t));
});

var maxValue = values[0];
for(var i = 0; i < values.length; i++)
    maxValue = Math.max(maxValue, values[i]);

for(var i = 0; i < values.length; i++){
    var newBar = $("<span>")
         .html(values[i])
         .css({
      "display": "block",
      "width": "0px",
      "backgroundColor": "#600",
      "marginBottom": "5px",
      "padding": "2px",
      "color": "#FFF"
     });

$("body").append(newBar);
var w = Math.floor((100 * values[i] / maxValue)) + "%";
newBar.animate({"width":w}, "slow");
} 
```

# ruby-on-rails - 可下载的 Rails 生成器在哪里？

> ID：656294
> 
> 赞同：2
> 
> 时间：2009-03-17T22:31:57.203
> 
> 标签：ruby-on-rails, ruby, code-generation, scaffolding

当我跑...

```
$ script/generate 
```

我得到一个已安装生成器的列表和一条消息，上面写着“更多内容可在[http://wiki.rubyonrails.org/rails/pages/AvailableGenerators](http://wiki.rubyonrails.org/rails/pages/AvailableGenerators)获得。” 但是，指示的 wiki 页面显示“该主题尚不存在”。

是否存在一些可下载的 Rails 生成器的中央存储库？

特别是，我想要一个创建 Rails 脚手架，但使用 Haml 而不是 ERB 的。

如果它会生成 Test::Unit 测试但使用 Shoulda 增强功能，它也会很整洁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-17T22:53:42.597

那个 wiki 在当时是一个很棒的资源，但它早已不复存在。从 wiki 开始摇摆不定时，我抛出了一个[包含该页面的存档。](http://www.reality.com/roberts/markus/software/ruby/rails/wiki/AvailableGenerators.textile)它已经过时了，但你至少可以看到那里有什么。

就目前而言，寻找 gem（尤其是插件）来提供生成器，而不是将它们视为孤立的资源。该`gems`命令可用于查找可用的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-17T22:44:53.803

许多插件都带有自己的生成器。浮现在脑海中的是restful_authentication，因为我已经使用了很多次。

编辑：你在这里谷歌[吗](http://speakmy.name/2009/02/rails-scaffold-generator-that-uses-rspec-haml-and-factorygirl/)？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-17T23:10:46.097

[Rails Boost](http://www.railsboost.com/)是一个模板生成器。事实上，您想要的模板已经[生成](http://www.railsboost.com/templates/949)——使用 HAML 和 Shoulda。

# wpf - GridViewColumn 中的 WPF 文本格式

> ID：656296
> 
> 赞同：5
> 
> 时间：2009-03-17T22:32:39.697
> 
> 标签：wpf, wpf-controls

我想将格式（对齐文本，货币格式 0000.00）应用于 GridViewColumn 中的列。

```
 <GridViewColumn TextBlock.TextAlignment="Center" Width="80" DisplayMemberBinding="{Binding XPath=Name}"/> 
```

想法如下：在列（GridViewColumn）中，我们可以对他应用格式的文本（左对齐、右对齐、居中对齐、对齐等）。

在下面的代码中，他们可以看到不同的尝试而没有获得任何结果

代码如下：

```
 <Window x:Class="ListViewTest.Test0.ListViewTest"
   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
   Title="Empty ListView Grid" Height="216" Width="435" FlowDirection="LeftToRight" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.IsSharedSizeScope="False">
    <Window.Resources>
        <XmlDataProvider x:Key="CustomersDS" Source="C:\data.xml"/>
        <Style x:Key="myHeaderStyle" TargetType="{x:Type GridViewColumnHeader}">
            <Setter Property="Visibility" Value="Collapsed" />
        </Style>
    </Window.Resources>

    <ListView Margin="0,0,0,50" ItemTemplate="{DynamicResource CustomerTemplate}" ItemsSource="{Binding Source={StaticResource CustomersDS}, XPath=/Customers/Customer}">
        <ListView.View>
            <!--ColumnHeaderContainerStyle="{StaticResource myHeaderStyle}"-->
            <GridView >
                <GridViewColumn Width="80" TextBlock.TextAlignment="Center">
                    <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock HorizontalAlignment="Center" Text="{Binding XPath=Code}"></TextBlock>
                    </DataTemplate>
                  </GridViewColumn.CellTemplate>
                </GridViewColumn>
                <GridViewColumn TextBlock.TextAlignment="Center" Width="80" DisplayMemberBinding="{Binding XPath=Name}"/>
                <GridViewColumn Width="120" TextBlock.TextAlignment="center" DisplayMemberBinding="{Binding XPath=Country}"/>
                <GridViewColumn Width="120" TextBlock.TextAlignment="center" DisplayMemberBinding="{Binding XPath=money}"/>
            </GridView>
        </ListView.View>
    </ListView>

</Window> 
```

XML

```
 <Customers>
  <Customer>
 <Code>1234</Code>
 <Name>EPI</Name>
 <Country>Sesame Street</Country>
<money> 98.00</money>
  </Customer>
  <Customer>
 <Code>3234</Code>
 <Name>Paul</Name>
 <Country>United Kingdom</Country>
<money> 8.70</money>
  </Customer>
 <Customer>
 <Code>3344</Code>
 <Name>Juan</Name>
 <Country>Spain</Country>
<money> 785.5</money>
  </Customer>
 <Customer>
 <Code>4321</Code>
 <Name>Dodo</Name>
 <Country>Venezuela</Country>
<money> 150.02</money>
  </Customer>
</Customers> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-06-12T16:05:04.487

这是我做类似事情的方式（格式化和对齐货币列）：

```
<GridViewColumn Header="Amount">
    <GridViewColumn.CellTemplate>
        <DataTemplate>
            <TextBlock TextAlignment="Right"
                       Text="{Binding Path=Amount, StringFormat='{}{0:C}'}" />
        </DataTemplate>
    </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

我还添加了这种样式：

```
<Style TargetType="ListViewItem">
    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
</Style> 
```

如果您不使用 .NET 3.5 SP1，则需要使用转换器而不是 StringFormat。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T07:51:26.610

例如，要为货币设置字符串格式，您可以使用我认为在 .net3.5 sp1 中的绑定对象上引入的“StringFormat”。

```
Text="{Binding XPath=Code, StringFormat=0.000}" 
```

除此之外，我必须说我也不太明白你的问题。

# python - python时间+ timedelta等效

> ID：656297
> 
> 赞同：86
> 
> 时间：2009-03-17T22:32:43.910
> 
> 标签：python

我正在尝试做这样的事情：

```
time() + timedelta(hours=1) 
```

但是，[Python 不允许这样做](http://bugs.python.org/issue1487389)，显然是有充分理由的。

有没有人有一个简单的工作？

### 有关的：

*   [在 Python 中将 N 秒添加到 datetime.time 的标准方法是什么？](https://stackoverflow.com/questions/100210/python-easy-way-to-add-n-seconds-to-a-datetime-time)

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2009-03-17T23:14:34.683

解决方案在[您在问题中提供的链接中](http://bugs.python.org/issue1487389)：

```
datetime.combine(date.today(), time()) + timedelta(hours=1) 
```

完整示例：

```
from datetime import date, datetime, time, timedelta

dt = datetime.combine(date.today(), time(23, 55)) + timedelta(minutes=30)
print dt.time() 
```

输出：

```
00:25:00 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2011-07-27T02:58:22.610

如果值得在您的项目中添加另一个文件/依赖项，我刚刚编写了一个很小的类，它扩展`datetime.time`了进行算术的能力。如果你过了午夜，它只是环绕：

```
>>> from nptime import nptime
>>> from datetime import timedelta
>>> afternoon = nptime(12, 24) + timedelta(days=1, minutes=36)
>>> afternoon
nptime(13, 0)
>>> str(afternoon)
'13:00:00' 
```

它可以从 PyPi 作为`nptime`（“非迂腐时间”）或在 GitHub 上获得：[https ://github.com/tgs/nptime](https://github.com/tgs/nptime)

文档位于[http://tgs.github.io/nptime/](http://tgs.github.io/nptime/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-03-17T22:43:01.607

解决方法：

```
t = time()
t2 = time(t.hour+1, t.minute, t.second, t.microsecond) 
```

如果您不需要那么高的精度，您也可以省略微秒。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-17T22:50:54.443

这有点讨厌，但是：

```
from datetime import datetime, timedelta

now = datetime.now().time()
# Just use January the first, 2000
d1 = datetime(2000, 1, 1, now.hour, now.minute, now.second)
d2 = d1 + timedelta(hours=1, minutes=23)
print d2.time() 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-17T22:34:20.180

您可以将 time() 更改为 now() 以使其正常工作

```
from datetime import datetime, timedelta
datetime.now() + timedelta(hours=1) 
```

# c# - 从数据网格中获取值

> ID：656304
> 
> 赞同：0
> 
> 时间：2009-03-17T22:36:39.923
> 
> 标签：c#, .net, asp.net, .net-3.5

我有一个数据网格，我需要在填充后从中获取一个值。我希望它不是动态的（没有点击）。数据网格的最终产品是一组标题和一行

> `Header1| Header2| Header3`
> `Value1 | Value1 | Value1`

无论其位置如何，我都希望能够获得任何值，但现在我只需要从第 3 列中获取最后一个值。

我正在使用 C# 和 ASP.NET 3.5

我的 asp.net 看起来像这样：

```
<asp:Panel runat="server" ID="pnlCheckData" Width="730px">              
    <asp:GridView DataKeyNames="uniqueName" id="ViewData" DataSourceID="srcView" Runat="server" AllowSorting="false" CellPadding="1" CellSpacing="1" Visible="true" GridLines="Vertical" Font-Size="X-Small">
        <AlternatingRowStyle CssClass="alternating" />                              
    </asp:GridView>
</asp:Panel>

<asp:ObjectDataSource id="srcCertificationView" TypeName="CertificationClass" SelectMethod = "GetReportSummaryData" Runat="server">
    <SelectParameters>
        <asp:ControlParameter Name="datasourceID" ControlID="Selection" />
        <asp:ControlParameter Name="Code" ControlID="countrySelection" />
        <asp:ControlParameter Name="dateRange" ControlID="dateSelection" />
        <asp:ControlParameter Name="dateProcessed" ControlID="MostRecent" />
    </SelectParameters>
</asp:ObjectDataSource> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-17T22:48:24.153

您可能希望创建自己的列模板，而不是让 GridView 自动生成您的列。这样，您就可以为它生成 ID 的文本框或标签提供，以便您可以使用 FindControl('controlID') 从中获取值。

另一种方法是，如果您真的只需要第三列中的最后一个值，则执行 nemo 建议的操作（如果您有页脚行，此代码会有所不同，但以下将为您提供包含的单元格你想要的数据）：

```
TableCell myTableCell = myGridView.Rows[myGridView.Rows.Count - 1].Cells[2]; 
```

然后，您可以获得`myTableCell.Text`或者，例如，如果其中有一个 TextBox 控件：`(myTableCell.Controls[0] as TextBox).Text`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-17T22:42:33.793

请原谅我缺乏正确的语法，目前我面前没有 Visual Studio 或任何 C# 代码。

但是使用 ViewData、gridview 对象，您应该能够执行类似的操作

```
ViewData.getRows() 
```

这将返回您可以迭代的行集合。

当你到达最后一行时，你应该能够做到

```
cells = row.getCells()
cells[3] 
```

然后去第三个牢房。

# asp.net - 是否有与 ASP.Net MVC 一起使用的好的 CMS

> ID：656308
> 
> 赞同：13
> 
> 时间：2009-03-17T22:38:25.283
> 
> 标签：asp.net, asp.net-mvc, content-management-system, dotnetnuke

我有一个为使用 ASP.Net MVC 的朋友开发的小站点，我想知道是否可以将它连接到 dotnetnuke 或其他 CMS。或者正在使用动态数据做一个管理站点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-17T22:51:49.713

这是一些基于 ASP.NET MVC 的 CMS 的列表。然而，这些并不是基于当前的候选版本，但我认为它们是一个很好的开始。

**N2 开源 ASP.NET CMS** [http://n2cms.com/](http://n2cms.com/)

**Oxite** [http://www.visitmix.com/Lab/Oxite](http://www.visitmix.com/Lab/Oxite)

**氢 CMS** [http://www.hydrogencms.net/Home.aspx](http://www.hydrogencms.net/Home.aspx)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-08-21T02:21:42.150

看看 Kooboo ( [kooboo.com](http://www.kooboo.com) )。基于 ASP.NET MVC 的简单易用且灵活的 CMS。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-17T22:40:33.297

我希望 MVC 中有一个好的 CMS。但是 MVC 甚至还不是 RTM！当前 .NET CMS 的问题是它们不能很好地处理 URL。我希望基于 MVC 构建的 CMS 会在某个时候弹出。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-08-21T15:50:44.010

尝试[复合 C1](http://www.composite.net/C1.aspx)。我为此开发了一些 MVC 模块。好处是您可以在这个 CMS 中同时使用 MVC 和 Web 表单模块。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-17T22:44:08.063

看看[OpenSourceCms.com](http://aspx.opensourcecms.com/)，他们可能有你正在寻找的东西，或者那里的演示至少可以帮助你找到答案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-17T22:50:03.430

[Oxite](http://visitmix.com/Lab/Oxite)可能是最接近您目前所追求的，尽管我认为它更像是一个博客引擎。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-26T05:00:28.853

在我看来，唯一像样的 CMS 是您自己编写的。只是你想要的功能，没有非活动部分，但如果你想有一个坚实的基础，请尝试[MVCwCMS](http://www.mvcwcms.com/)（请注意我是作者）。

# cil - MSIL 方法中 hidebysig 的目的是什么？

> ID：656325
> 
> 赞同：95
> 
> 时间：2009-03-17T22:47:28.257
> 
> 标签：cil

使用 ildasm 和 C# 程序，例如

```
static void Main(string[] args)
{

} 
```

给出：

```
.method private hidebysig static void  Main(string[] args) cil managed
{
  .entrypoint
  // Code size       2 (0x2)
  .maxstack  8
  IL_0000:  nop
  IL_0001:  ret
} // end of method Program::Main 
```

hidebysig 结构有什么作用？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2009-03-17T22:51:28.327

从[ECMA 335](http://www.ecma-international.org/publications/standards/Ecma-335.htm)，分区 1 的第 8.10.4 节：

> CTS 提供对从基类型可见的名称（隐藏）和派生类中布局槽的共享（覆盖）的独立控制。通过将派生类中的成员标记为按名称隐藏或按名称和签名隐藏来控制隐藏。隐藏总是基于成员的种类，即派生字段名可以隐藏基本字段名，但不能隐藏方法名、属性名或事件名。如果派生成员被标记为按名称隐藏，则基类中同名的同种成员在派生类中不可见；如果该成员通过名称和签名标记为隐藏，则只有具有完全相同名称和类型（对于字段）或方法签名（对于方法）的同类成员对派生类隐藏。这两种隐藏形式的区别的实现完全由源语言编译器和反射库提供；它对 VES 本身没有直接影响。

（这不是很清楚，但`hidebysig`意思是“按名称和签名隐藏”。）

同样在分区 2 的第 15.4.2.2 节中：

> hidebysig 是为工具的使用而提供的，并且被 VES 忽略。它指定声明的方法隐藏具有匹配方法签名的基类类型的所有方法；省略时，该方法应隐藏所有同名方法，无论签名如何。

例如，假设您有：

```
public class Base
{
    public void Bar()
    {
    }
}

public class Derived : Base
{
    public void Bar(string x)
    {
    }
}

...

Derived d = new Derived();
d.Bar(); 
```

这是有效的，因为`Bar(string)` *不*隐藏`Bar()`，因为 C# 编译器使用`hidebysig`. 如果它使用“按名称隐藏”语义，您将根本无法调用`Bar()`type 的引用`Derived`，尽管您仍然可以将其强制转换为 Base 并以这种方式调用它。

编辑：我刚刚尝试通过将上述代码编译为 DLL，对其进行 ildasming，删除`hidebysig`for `Bar()`and `Bar(string)`，再次对其进行 ilasming，然后尝试`Bar()`从其他代码调用：

```
Derived d = new Derived();
d.Bar();

Test.cs(6,9): error CS1501: No overload for method 'Bar' takes '0' arguments 
```

然而：

```
Base d = new Derived();
d.Bar(); 
```

（没有编译问题。）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-03-17T23:59:35.073

根据 THE SKEET 的回答，另外原因是 Java 和 C# 允许类的客户端调用具有相同名称的任何方法，包括来自基类的方法。而 C++ 没有：如果派生类甚至定义了一个与基类中的方法同名的方法，那么客户端不能直接调用基类方法，即使它不采用相同的参数。因此，该功能包含在 CIL 中以支持两种重载方法。

在 C++ 中，您可以使用指令有效地从基类导入一组命名的重载`using`，以便它们成为该方法名称的“重载集”的一部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-27T15:41:12.020

根据[微软文档](https://docs.microsoft.com/en-us/dotnet/api/system.reflection.methodbase.ishidebysig?view=netframework-4.7.1#System_Reflection_MethodBase_IsHideBySig)

> 当派生类中的成员使用 C#`new`修饰符或 Visual Basic`Shadows`修饰符声明时，它可以隐藏基类中的同名成员。C# 通过签名隐藏基类成员。也就是说，如果基类成员有多个重载，则唯一隐藏的是具有相同签名的重载。相比之下，Visual Basic 隐藏了所有基类重载。因此，[IsHideBySig](https://docs.microsoft.com/en-us/dotnet/api/system.reflection.methodbase.ishidebysig?view=netframework-4.7.1#System_Reflection_MethodBase_IsHideBySig) 返回`false`使用 Visual Basic`Shadows` 修饰符`true`声明的成员和使用 C#`new`修饰符声明的成员。

# php - 在第三方访问我的服务器时，我需要注意哪些功能

> ID：656329
> 
> 赞同：1
> 
> 时间：2009-03-17T22:49:26.257
> 
> 标签：php, security

我通常负责在我的服务器上运行的网站上的所有脚本，但我的一些客户有其他人在他们的网站上工作（部分......）。

当我授予访问权限时，他们可以使用 php，因此我会定期检查他们是否似乎知道自己在做什么，并在以下情况下阻止他们：

*   在没有适当输入过滤的情况下使用 mail() （在秘鲁很常见......）
*   试图包括他们真的不应该的东西
*   尝试使用 exec()

有没有其他潜在危险的功能？

危险是指在所有方面都很危险，从被搜索引擎禁止和制作垃圾邮件黑名单到危及服务器的安全性。

请注意，我说的不是想要做坏事的人，而是不完全了解 php 的人。

顺便说一句，我不让他们访问像 mysql 这样的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-17T23:24:45.750

如果您查看[系统程序执行](http://ar2.php.net/manual/en/book.exec.php)PHP 手册页，您会看到许多值得禁用的功能。

请注意，您可以使用 disable_functions 设置从 php.ini 禁用它。

你也可以看看[PHP 安全模式](http://ar.php.net/manual/en/features.safe-mode.php)。

# c# - 如何正确关闭使用 Process 打开的应用程序？

> ID：656330
> 
> 赞同：2
> 
> 时间：2009-03-17T22:49:41.623
> 
> 标签：c#

我使用 Process 类打开应用程序：

```
System.Diagnostics.Process vsProc = new System.Diagnostics.Process();
vsProc.StartInfo.FileName = "program.exe";
vsProc.Start(); 
```

如果我只是杀死它`vsProc.Kill()`，应用程序会错误地结束。如何正确关闭它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-17T22:54:37.977

如何“正确”关闭程序 100% 取决于您正在处理的程序。如果您是编写子程序的人，则可以实施适当且理智的行为。如果没有，您最好的**一般**选择是找到应用程序的主窗口并向其发送关闭请求......而不是终止进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-17T22:54:59.020

我认为它错误结束的部分原因是您在杀死它之前没有释放与它相关的所有资源。尝试使用[CloseMainWindow()](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.closemainwindow.aspx)和[Close()](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.close.aspx)方法。CloseMainWindow 将向指定的应用程序主窗口发送关闭消息，并且 Close() 应该释放与进程关联的资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-17T22:54:39.940

如果您需要等待应用程序完成其工作，然后继续父进程，那么您可以在其上调用[WaitForExit()](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.waitforexit.aspx)。如果它是一个非终止应用程序，那么它“错误地结束”是什么意思？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-17T22:57:15.537

vsProc.Close();

释放与此组件关联的所有资源。还可以获取 JetBrains ReSharper...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-17T23:17:44.130

假设它`vsProc`有一个主窗口并且如果窗口关闭会干净地结束程序，你可以使用[这里](http://www.c-sharpcorner.com/UploadFile/mrmohankumar/closewindow01312008055929AM/closewindow.aspx)的步骤。如果您不知道标题或标题是动态的，请使用`vsProc.MainWindowTitle`. 您可以通过调用`vsProc.MainWindowHandle`并使用结果值调用 SendMessage 命令来跳过 FindWindow 步骤。

# linux - VMWare Server 2.0.0 和 vista 64bit DNS dosnt 解析

> ID：656335
> 
> 赞同：0
> 
> 时间：2009-03-17T22:51:16.360
> 
> 标签：linux, dns, installation, development-environment

我有以下

在 vista 64 上运行 CentOS 5 的 VM。我在我的 resolv.conf 中设置了我的 DNS（服务器在我的 Windows 机器上解析，我尝试了各种服务器）。我可以 ping DNS，但它不会为我解析任何名称。我在我的虚拟主机中添加了一些名称，这些域工作正常。

还有其他人有这个问题吗？

DNS是否在此配置上被破坏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-21T06:11:33.070

这是 Vista 64 位和 VMware 2.0.0 的问题，目前存在解析 DNS 的问题。

解决方案：至少现在回到 32 位 vista...。

# java - 将 JTable 选择保留在视口中

> ID：656341
> 
> 赞同：0
> 
> 时间：2009-03-17T22:53:44.000
> 
> 标签：java, scroll, jtable, glazedlists

我正在使用 GlazedLists 从 EventList 中自动生成 EventTableModel，以便与 JScrollbarPane 中的 JTable 一起使用。

我将 EventList 用作 FIFO，将一堆元素添加到末尾，然后有时会从开头删除一堆元素。删除元素后，选择的工作方式与我预期的完全一样：即使选择的索引已更改，仍会选择相同的元素（或至少选择仍在表中的元素）。这很棒。

显然，如果对象因一开始就删除项目而改变了它们的索引，则不可能保持视口显示固定范围的对象和固定范围的索引。默认行为似乎是保持视口不变。

如果我想将选定对象保持在视口中的同一位置，有没有办法可以做到这一点？（例如，在 EventTableModel 或 JScrollbarPane 上设置一个事件侦听器，并计算正确的滚动条设置，以便当我从头开始删除项目时，视口会随着对象移动？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-30T12:01:16.303

if i call correctly there is a method on JComponent which is used by JViewport which does the actual scrolling when you use the arrowkeys in a Jtable

```
public void scrollRectToVisible(Rectangle aRect) 
```

this way you wouldn't need to adjust scrollbars, but you specifically can state what rect should be visible. Could include some calculation based on the row number and pixel height of a single row. You could also put a breakpoint in this method, and chech how it works when moving with the arrow keys through a Jtable

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-06-14T17:16:28.477

在 ScrollPane 内的 JTable 中显示第一个选定行的另一种方法是手动设置垂直滚动条显示的内容：

因此，首先，获取表中的第一个选定行。如果选择了多行，这仍然会抓取第一行。

```
int firstSelectedRow = table.getSelectedRow(); 
```

然后，获取所选行在表中的位置（y 坐标）。

```
Rectangle cellLocation = table.getCellRect(firstSelectedRow, 0, false); 
```

最后，我们可以告诉垂直滚动条在哪里。

```
scrollPane.getVerticalScrollBar().setValue(cellLocation.y); 
```

此外，如果没有选定的行，这将使视口显示在表格的顶部。

我宁愿使用 scrollRectToVisible() 方法，但由于某种原因，它对我不起作用，而且这似乎每次都有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T15:10:33.907

这是另一种仅取决于表格的解决方案。此解决方案还保留了新视图中所选行的 y 位置。

首先我们要存储更新前的视图和选择矩形

```
Rectangle preUpdateViewRect = table.getVisibleRect();
Rectangle preUpdateSelectedCellRect = table.getCellRect( table.getSelectedRow(), 1, true ); 
```

更新后，检查我们的选择是否在视图中。此检查确保如果用户选择一行并开始滚动，我们不会将视图捕捉回选择。如果选择在我们的视图中，做一些简单的数学运算来创建在我们视图中相同位置具有选择的矩形。

```
if( preUpdateViewRect != null && preUpdateViewRect.contains( preUpdateSelectedCellRect ))
{
    Rectangle postUpadteSelectedCellRect = table.getCellRect( table.getSelectedRow(), 1, true );
    int newViewPortY = postUpdateSelectedCellRect.y - ( preUpdateSelectedCellRect.y - preUpdateViewRect.y );
    Rectangle newViewRect = new Rectangle( preUpdateViewRect.x, newViewPortY , preUpdateViewRect.width, preUpdateViewRect.height );
    table.scrollRectToVisible( newViewRect );
} 
```

# visual-studio-2008 - 为什么 Visual Studio 2008 会跳过我的断点？

> ID：656344
> 
> 赞同：5
> 
> 时间：2009-03-17T22:54:39.643
> 
> 标签：visual-studio-2008, breakpoints

我正在运行带有 SP1 的 Visual Studio 2008。当我调试应用程序时，它会跳过我的断点。

例如，我有两行代码，每行调用一个方法。我将在两条线上都设置一个断点。我会运行一次，它会在第一个断点处停止，但不会在下一个断点处停止。我将再次运行它，它会击中第二个，而不是第一个。

我试图清理解决方案并重建。

我在解决方案中有多个项目。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-17T23:05:15.500

### 符号文件不兼容

您的**符号文件**(.pdb) 可能与您的源代码不同步。这种情况的一个常见症状是：

*   在一行代码的断点处停止
*   单步执行代码
*   看到调试指针停在**空白**代码行

调试时，您永远不会看到调试指针停在空白行上，这表明您在某处存在符号/源不匹配。

这种不匹配也可能导致断点被跳过，就像你看到的那样，但是清理解决方案通常会修复它（听起来你已经尝试过了）。

### 构建配置

另一个选项（正如其他人所建议的那样）是您没有构建**调试**配置。虽然可以调试 Release 版本，但代码经过显着优化，这会使调试器行为异常，例如

*   单步执行条件（即 if 块）可以使 if 和 else 情况看起来都在运行
*   一些代码被完全优化了，你不能破坏它们

### 你想打破什么？

另一件需要注意的重要事情是，不能在每一行代码上都设置断点。例如，如果您的代码只有一个变量初始化：

```
long numObjects; 
```

断点通常不会正确设置（尽管它通常会移动到“真实”代码的下一行）。但是，如果您的代码行初始化变量：

```
long numObjects = 5; 
```

**可以**设置断点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-17T22:57:25.753

尝试删除该项目的 .SUO 文件，然后重新构建。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-17T22:59:26.637

确保您正在使用调试配置构建应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-17T22:58:59.463

假设符号加载不是问题，您可以在方法本身上放置一个 BP，并验证它确实被调用了两次（通过检查调用堆栈）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-10-20T12:13:55.803

我遇到了这个问题，不得不安装一个修补程序。有关详细信息，请参阅[http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/f3fcb4fb-8a08-4fa0-8d58-9ed6f3eb1193](http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/f3fcb4fb-8a08-4fa0-8d58-9ed6f3eb1193)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-01-14T10:22:37.563

我在使用 MS Visual Studio 2008 SP1 时遇到了同样的问题。PDB 文件匹配可执行文件，所以这不是问题。

问题是`Visual Assist`。我在“工具|加载项管理器”中将其关闭，之后跳过断点就没有问题了。因此**，请关闭 Visual Studio 中的所有加载项并安装最新的 SP**（现在是 SP1）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-02-15T17:47:01.723

除了上述方法之外，我还遇到了另外几种没有命中断点的情况：

*   源来自不同的目录树。如果您重命名了目录，则可能会发生这种情况，因为路径被硬编码到 pdb 文件中。当我有一个`trunk`和`branch`目录交换并且VS在另一个目录中打开文件时，这让我感到困惑。
*   如果 exe 仍在后台运行，如果应用程序没有完全退出或`mspdbsrv.exe`仍以某种方式附加到它，有时可能会发生这种情况，因此请检查您的进程列表。重新启动 Visual Studio 通常可以解决此问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-12-10T01:36:01.290

我在 VS 2008 中遇到了同样的问题，并尝试了大约 1 小时的所有操作，但没有帮助。

最后尝试在没有管理员权限的情况下运行 VS，然后清理解决方案-> 重建解决方案并运行良好。

不喜欢 Win 7 上的 VS

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-12-15T14:09:26.310

此外，删除 VS 可执行文件在兼容模式下运行可以解决问题。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-05-08T13:46:43.960

我遇到了同样的问题，安装 VS 2010 SP1 解决了这个问题。我在 SQL 2008 中破坏了 Intellisense 的副作用，您可以在此处阅读：[Sql Server 2008 R2 Management Studio - no Intellisense](https://stackoverflow.com/questions/9011526/sql-server-2008-r2-management-studio-no-intellisense)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-17T23:03:55.783

如果断点没有显示为实心红色气泡，而是显示为红色圆圈，则它被禁用。如果它是带有黄色小警告标志的红色圆圈，则您所附加的进程尚未加载该模式的符号。确保您尝试调试正确类型的代码（托管/本机/T-SQL/脚本）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-07-27T22:27:33.590

我猜您将项目更改为优化代码，因此没有可用的调试信息（包括使用断点的能力）。

要更正此问题：打开您的项目，单击菜单->项目->（您的项目）属性...，单击编译选项卡，单击高级编译选项，然后： - 取消选择“启用优化” - 在生成调试信息列表中，选择“完整”。- 单击确定，关闭并保存所有内容。现在应该可以工作了。

生产效率>

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-09-15T17:57:47.893

对于***网站***，如果 MSVS 的单独实例正在运行同一网站，则可能会发生这种情况。

只需停止原始实例或停止 IIS Express。

MSVS 似乎启动了第二个网站，而没有抱怨在同一端口上运行的预先存在的网站。可能浏览器中显示的页面实际上是第一个网站。

# c# - 禁用 Internet Explorer 控件中的上下文菜单

> ID：656350
> 
> 赞同：7
> 
> 时间：2009-03-17T22:56:16.147
> 
> 标签：c#, .net, events, webbrowser-control, contextmenu

如何禁用 IE`WebBrowser`控件中的上下文菜单，而是在 C# 中执行自定义处理右键单击事件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-19T00:55:16.483

实际上：

```
WebBrowser browser;
browser.IsWebBrowserContextMenuEnabled = false; 
```

这几乎告诉 WebBrowser 不欢迎右键单击上下文菜单。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-17T23:15:42.947

```
WebBrowser browser;
browser.Document.ContextMenuShowing += new HtmlElementEventHandler(MyCustomContextMenuMethod); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-17T23:10:14.053

```
AddHandler Me.WebBrowser1.Document.ContextMenuShowing, AddressOf WebContextMenuShowing 
```

我一字不差地复制了你的问题并用我的google-fu来解决它......

[这是在第一个结果页面上](http://www.codeproject.com/KB/miscctrl/WebBrowserContextMenu.aspx)：-P

# pdf - 任何人都可以为.Net推荐一个好的PDF阅读库吗？

> ID：656351
> 
> 赞同：7
> 
> 时间：2009-03-17T22:56:21.870
> 
> 标签：pdf

任何人都可以推荐一个从 .Net 读取 PDF 的好组件吗？具体来说，我想读取文档的所有元数据，包括所有文档属性（标题、作者等）。 *我真的不需要阅读文档的实际内容。*

商业产品很好。

我读过 PDFBox (for Java)，但这似乎很痛苦。我也去过[这个页面](http://jadn.co.uk/w/ReadPdfUsingCsharp.htm)，但没有什么好东西跳出来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-17T23:22:50.857

[iTextSharp](http://itextsharp.sourceforge.net/)呢？据我所知，它是权威的 pdf 库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-05-25T15:56:26.877

[Docotic.Pdf library](https://bitmiracle.com/pdf-library/) (I work for the company) may be used to accomplish the task.

Here is sample code:

```
using (PdfDocument document = new PdfDocument("file.pdf"))
{
    string author = document.Info.Author;
    string subject = document.Info.Subject;
    string title = document.Info.Title;
    string keywords = document.Info.Keywords;
    // ...
} 
```

Beyond that the library can do many other things. There are [samples for common tasks](https://bitmiracle.com/pdf-library/help/samples.aspx) available online.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-14T14:16:22.007

对于 .Net，有[PDF Lib](http://pdflib.codeplex.com/)（当前版本 1.3）。它看起来不错（但我还没有测试过）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-18T00:03:09.760

你看过[ABC.pdf](http://www.websupergoo.com/)吗？它绝对是你想要的，阅读 pdf 文档属性 -[见这里](http://www.websupergoo.com/helppdf7net/source/4-examples/14-setprops.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-17T23:20:26.277

您可以查看[CoherentPDF](http://www.coherentpdf.com/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-08-09T19:02:44.927

我想推荐[Amyuni PDF Creator ActiveX](http://www.amyuni.com/en/developer/pdfcreatoractivex)，一个 PDF 编辑器 ActiveX 控件（有 32 位和 64 位版本）和[Amyuni PDF Creator .Net](http://www.amyuni.com/en/developer/pdfcreator/features.html)。
*免责声明：我是该产品开发团队的一员。*

# asp.net - 与 asp.net Web 应用程序的 livelink 集成

> ID：656354
> 
> 赞同：0
> 
> 时间：2009-03-17T22:57:29.717
> 
> 标签：asp.net, repository, integration, document

我正在构建一个标准的 asp.net LOB 应用程序。我计划在应用程序的某些部分显示一些 livelink url，用户单击下载链接，需要从相应的 livelink URL 下载文档，并且需要出现另存为对话框。

对于任何直接的 http 文档 URL，可以使用 httpwebrequest 并获取内容并将其流式传输回浏览器。但是对于 livelink URL，有一些页面重定向，当前请求获取一些 cookie 状态，然后允许生成的 URL 访问文档内容。

我想知道是否有任何允许与 livelink 集成的标准 API/Web 服务，以便可以完成握手并检索给定的文档。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T23:14:31.333

我相信你至少有两个选择：

1.  正确构建 LiveLink URL - 这可以通过将“func”指定到“doc.fetch”、“nodeid”和“vernum”指定到相关文档来完成
2.  另一种选择是使用 LiveLink API (LAPI)。这是一个足够好的 API，很容易上手。

让我知道事情的后续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-10-30T12:01:15.940

如前所述，Livelink 为某些功能提供 .NET/Java Web 服务。

但是，如果您只需要显示保存/打开/取消对话框，那么您可以使用锚标记中的以下 url：

```
http://<server>/livelink/llisapi.dll?func=ll&objId=<nodeid>&objAction=download 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T19:58:17.320

我一直在使用 Web 服务在我为将 livelink 应用程序迁移到 Sharepoint 而创建的应用程序中下载 Livelink 文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-20T05:27:37.627

Livelink 9.7.1 及更高版本具有完整的 .net webservices API。您可以从 OpenText 知识中心下载 SDK。

# java - Delphi 中的类似 JFreeChart

> ID：656366
> 
> 赞同：2
> 
> 时间：2009-03-17T23:01:13.327
> 
> 标签：java, delphi, charts, jfreechart

我曾在几个 Java 项目中使用过 JFreeChart。我想知道我是否可以在 Delphi for Win32 中使用类似的东西，或者您是否知道 Delphi 有一个不错的免费图表库。我正在使用 Delphi 2006。我知道已经有 TChart 但它看起来有点“旧”。我的研究将我带到了 TMS 高级图表，但它对我来说太贵了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T03:27:38.943

您总是可以为[Google Chart API](http://code.google.com/apis/chart/)构建一个 Delphi 包装器。许多这样的包装器存在于[其他语言中](http://groups.google.com/group/google-chart-api/web/useful-links-to-api-libraries)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T06:48:24.937

除非您已经深入了解了 TChart，否则我建议您再深入一点。我发现通过一点造型你可以摆脱那种“旧”的外观。默认设置确实看起来有点过时，但那里有相当多的可配置性。如果您还没有，也许值得探索 TChart 帮助文档并进行更多试验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-17T23:55:52.587

也许你可以在这里找到一些有用的 [http://www.torry.net/pages.php?id=195](http://www.torry.net/pages.php?id=195)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T06:05:21.623

我不知道 jfreechart，所以我不能说它和我的免费 dzchart 组件之间是否有相似之处：

[http://www.dummzeuch.de/delphi/dz-charts/english.html](http://www.dummzeuch.de/delphi/dz-charts/english.html)

请注意，我不再维护它，所以你自己一个人。

# installation - 如何在 Wise Installation Studio 中批量更改源文件夹？

> ID：656370
> 
> 赞同：0
> 
> 时间：2009-03-17T23:02:26.053
> 
> 标签：installation, wise

我有一个现有的 Wise .wsi 脚本，我想将其转换为使用相对路径，但问题是它包含大约 330 个文件，我发现修复路径的唯一方法是进入每个文件的详细信息并手动调整路径（从安装专家：文件屏幕，右键单击并选择详细信息）。我是否必须手动执行 330 次，或者有没有办法在不使用这个糟糕的 GUI 的情况下更改 .wsi 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-18T17:15:24.023

解决方案是转到“工具”菜单并选择“转换源路径”。弹出一个对话框，允许您将路径转换为相对路径并指定新添加的文件始终使用相对路径。“将所有路径更改为相对路径”对我不起作用，但仅更改文件夹路径至少比编辑每个文件的详细信息花费的时间更少。

# c# - PHP base64_decode C# 等效

> ID：656373
> 
> 赞同：3
> 
> 时间：2009-03-17T23:03:30.717
> 
> 标签：c#, php, base64

我正在尝试模仿执行以下操作的 php 脚本：

1.  用 + 号替换 GET 变量的每个空格 ($var = preg_replace("/\s/","+",$_GET['var']); )
2.  解码为 base64：base64_decode($var);

第一个我添加了一个执行base64解码的方法：

```
 public string base64Decode(string data)
    {
        try
        {
            System.Text.UTF8Encoding encoder = new System.Text.UTF8Encoding();

            System.Text.Decoder utf8Decode = encoder.GetDecoder();

            byte[] todecode_byte = Convert.FromBase64String(data);
            int charCount = utf8Decode.GetCharCount(todecode_byte, 0, todecode_byte.Length);
            char[] decoded_char = new char[charCount];
            utf8Decode.GetChars(todecode_byte, 0, todecode_byte.Length, decoded_char, 0);
            string result = new String(decoded_char);
            return result;
        }
        catch (Exception e)
        {
            throw new Exception("Error in base64Decode" + e.Message);
        }
    } 
```

但它似乎 UTF-8 没有完成这项工作，所以我尝试了相同的方法，但使用的是 UTF-7

```
 public string base64Decode(string data)
    {
        try
        {
            System.Text.UTF7Encoding encoder = new System.Text.UTF7Encoding();

            System.Text.Decoder utf7Decode = encoder.GetDecoder();

            byte[] todecode_byte = Convert.FromBase64String(data);
            int charCount = utf7Decode.GetCharCount(todecode_byte, 0, todecode_byte.Length);
            char[] decoded_char = new char[charCount];
            utf7Decode.GetChars(todecode_byte, 0, todecode_byte.Length, decoded_char, 0);
            string result = new String(decoded_char);
            return result;
        }
        catch (Exception e)
        {
            throw new Exception("Error in base64Decode" + e.Message);
        }
    } 
```

最后要说的是，成功的php解码包含特殊标志，如注册标志和商标标志，但C#版本没有！

另外，php base64_decode 是否受服务器语言影响？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-17T23:09:19.203

UTF-7 is very unlikely to be what you want. You really need to know what encoding PHP is using. It *may* be using the default encoding for your system. Fortunately it's a lot easier to decode than you're making it:

```
public static string base64Decode(string data)
{
    byte[] binary = Convert.FromBaseString(data);
    return Encoding.Default.GetString(binary);
} 
```

There's no need to explicitly mess around with `Encoder` :)

Another possibility is that PHP is using ISO Latin 1, which is code page 28591:

```
public static string base64Decode(string data)
{
    byte[] binary = Convert.FromBaseString(data);
    return Encoding.GetEncoding(28591).GetString(binary);
} 
```

The PHP manual unhelpfully just says: "Before PHP 6, a character is the same as a byte. That is, there are exactly 256 different characters possible." Shame it doesn't say what each byte actually *means*...

# ruby-on-rails - 帮助“缺少这些必需的宝石：错误”

> ID：656375
> 
> 赞同：2
> 
> 时间：2009-03-17T23:03:31.793
> 
> 标签：ruby-on-rails, ruby, rubygems

我从 github 安装的 gem 收到此错误。

我在XP机器上。

这次我安装了，

giraffesoft-is_taggable 宝石。宝石清单说它在那里。

我创建了一个示例 Rails 应用程序并将 config.gem "giraffesoft-is_taggable" 添加到 environment.rb 文件中。

启动应用程序，我收到错误：

缺少这些必需的宝石：giraffesoft-is_taggable

我错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-17T23:48:01.637

尝试这个：

```
config.gem 'giraffesoft-is_taggable', :lib => 'is_taggable', :source => 'http://gems.github.com' 
```

我相信 github 会在 gems 前加上用户名，以避免与 ruby​​forge 冲突，因此您必须指定实际的库。

我还在 linux 上看到了类似的问题，我将 gem 安装为普通帐户（即不是 root），并将 gem 安装到我的主目录，而 rails 不知道。gem list 仍会报告它已安装。

# iphone - iphone 3.0 更新是否支持从 web 应用程序强制横向模式？

> ID：656402
> 
> 赞同：0
> 
> 时间：2009-03-17T23:19:10.287
> 
> 标签：iphone, iphone-sdk-3.0, orientation

新的 iPhone 3.0 操作系统即将问世。有谁知道它是否允许网络应用程序通过元标记或 javascript 强制横向模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-17T23:22:06.270

唉，如果我们知道，我们不能告诉你。这一切都在传统的 Apple NDA 之下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T01:41:52.287

iPhone 3.0 SDK 是一个测试版，与 Apple 的所有预发布或其他未发布信息一样，它处于保密状态。

您可以通过注册成为商业 iPhone 开发者（99 美元）自行下载并查看它，但在 iPhone OS 3.0 正式发布之前，不允许进行无偿访问和公开讨论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-09T20:59:08.770

我不知道*强制*方向，但你当然可以在至少 2.0 及更高版本下阅读它：

```
if( (window.orientation != 90) && (window.orientation != -90) )
   alert('Please rotate your iPhone into landscape mode.'); 
```

或者，为了更加用户友好，不要要求他们单击“确定”。

相反，监听用户旋转屏幕时发生的事件，如下所述：

[http://www.sitepoint.com/article/iphone-development-12-tips/2/](http://www.sitepoint.com/article/iphone-development-12-tips/2/)

接下来，将所有内容放在一个 DIV 中，将友好的“请轮换”消息放在另一个 DIV 中。

```
<body class="portrait">
    <div id="content">My content goes here</div>
    <div id="rotateme">Please rotate your iPhone into landscape mode.</div>
</body> 
```

最后，根据方向设置样式，仅显示上述其中一项：

```
body.portrait div#content { display: none; }
body.portrait div#rotateme { display: block; }
body.landscape div#content { display: block; }
body.landscape div#rotateme { display: none; } 
```

这可能不是“iPhone 3.0 的方式”做事（知道的人不会说），但至少不管用户是否升级它都能正常工作。（请记住，iPod Touch 用户必须付费升级并获得很少的新功能……他们可能不会那么快赶上 3.0 的潮流。）

# asp.net-mvc - 从 / 转换为 ASP.NET MVC 开始

> ID：656412
> 
> 赞同：0
> 
> 时间：2009-03-17T23:23:09.857
> 
> 标签：asp.net-mvc, kigg

我对 MVC 了解不多，但我有一个项目，我认为我可以在其中使用很多基于 ASP.NET MVC 的*KIGG*的功能。同时我有一个基于 HTML/jQuery 的模板。

**我应该如何处理这个？**

我有点希望的是，我可以轻松地从 KIGG 中选择带有隐藏对象的视图，然后轻松地对其进行修改。

**这是一种现实的方法吗？**

我真的可以期望它比使用传统的 ASP.NET 应用程序更容易吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-17T23:27:37.583

有权衡。一个并不比另一个更容易使用。如果你需要：

*   清理网址
*   对标记的精确控制
*   高度可单元测试的代码

MVC 消除了这些障碍。但是，MVC 在以下方面有更高的障碍：

*   高度有状态的 Web 表单（这就是为什么另一个解决方案称为“WebForms”）
*   其实差不多就是这样，但它是一个大的。

您可以选择一个可以帮助您实现特定项目目标的选项。

# linux - 您可以使用 tar 将补丁应用到现有的 Web 应用程序吗？

> ID：656414
> 
> 赞同：1
> 
> 时间：2009-03-17T23:23:58.950
> 
> 标签：linux, ubuntu, tar

经常为我的 CMS 系统发布补丁。我希望能够直接在我的开发系统上的完整版本上提取包含最新版本的修补文件的 tar 文件。当我提取一个 tar 文件时，它会将其放入一个带有 tar 文件名称的文件夹中。这让我不得不手动将每个文件复制到主目录。有没有办法强制 tar 将文件提取到当前目录并覆盖任何具有相同文件名的文件？任何已经存在的目录都不应被覆盖，而应合并...

这可能吗？如果是这样，命令是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-17T23:27:34.887

查看 tar 的 --strip-components（或 --strippath）参数，这可能是您正在寻找的。

**编辑**：您可能希望将 --keep-newer 加入其中，因此不会覆盖任何本地修改的文件。我建议在开发服务器上测试新版本，然后使用 rsync 或 subversion 来进行更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T16:37:01.057

我尝试让 --strip-components 工作，虽然我没有那么努力，但我没有让它工作。它一直在扁平化目录结构。在搜索中，我遇到了以下命令，它似乎完全符合我的要求：

pax -r -f patch.tar -s'/patch///'

它不是 tar，但嘿，它可以工作......用你的 tar 文件名替换“patch”这个词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-17T23:29:27.563

选项“--strip-components”允许您修剪部分嵌入文件名。有了它，就可以做你想做的事。

如需更多帮助，请查看[http://www.gnu.org/software/tar/manual/html_section/transform.html](http://www.gnu.org/software/tar/manual/html_section/transform.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T04:55:51.187

我刚刚做了：

```
tar -xzf patch.tar.gz 
```

它会覆盖补丁包含的所有文件。

即，如果为文件夹的内容创建了补丁`app`，我会在那里提取它。结果将是这样的：

```
tar.gz contains: oldfolder/someoldfile.txt, oldfolder/newfolder/newfile.txt 
```

在应用看起来像之前：

```
app/oldfolder/someoldfile.txt 
```

之后，应用看起来像

```
app/oldfolder/someoldfile.txt
oldfolder/newfolder/newfile.txt 
```

而“someoldfile.txt”实际上已更新为 tar.gz 中的内容

也许这不适用于常规 tar，只有 tar.gz。但我对此表示怀疑。我认为它应该适用于一切，只要用户具有写权限。

# c++ - 有没有办法在命令行获得可读的 gcc 错误和警告输出？

> ID：656420
> 
> 赞同：24
> 
> 时间：2009-03-17T23:27:02.203
> 
> 标签：c++, c, gcc, gcc-warning

对于一些长错误，gcc 输出很密集并且有很多换行等。特别是当错误很细微时，我可能需要 10-30 秒的眯眼才能用我的眼睛解析它。

我已经把它粘贴到一个打开的代码编辑器窗口中，以获得一些基本的语法突出显示并启用正则表达式的重新格式化。

有没有人发明了一种更自动化的方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-15T06:43:39.980

我使用这个脚本，称为`colorize`：

```
#!/bin/bash
while read x ; do echo $x ; done \
| sed -e "s/.*error:.*/\x1b[1;36m&\x1b[0m/" \
-e "s/.*warning:.*/\x1b[1;36m&\x1b[0m/" \
-e "s/^\(.*\)\(required from\)/\x1b[1;36m\1\x1b[0mnote: \2/" \
-e "s/^\(.*\)\(In instantiation of\)/\x1b[1;36m\1\x1b[0mnote: \2/" \
-e "s/^\(.*\)\(In member\)/\x1b[1;36m\1\x1b[0mnote: \2/" \
| sed -e "s/error:/\x1b[1;31m&\x1b[1;36m/" \
-e "s/warning:/\x1b[1;35m&\x1b[1;36m/" \
-e "s/note:/\x1b[1;30m&\x1b[0m/" 
```

然后我就这样称呼它（使用 make 或任何构建系统）：

```
make |& colorize 
```

我得到类似于clang的颜色输出。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-03-17T23:43:34.847

我发现[colorgcc](http://schlueters.de/colorgcc.html)是无价的。通过引入着色，精神上解析 gcc 错误消息的文本变得更加容易，尤其是在涉及模板时。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-03-17T23:32:01.130

如果您的错误与模板相关，请查看 STLfilt：

*   [http://www.bdsoft.com/tools/stlfilt.html](http://www.bdsoft.com/tools/stlfilt.html)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2010-10-27T13:23:45.683

gccfilter 对消息进行着色和简化。

[http://www.mixtion.org/gccfilter/](http://www.mixtion.org/gccfilter/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-11-08T01:14:12.383

检查[diagcc](https://github.com/GentlyGuitar/diagcc)，你可以得到这样的东西：

![彩色消息演示](https://i.stack.imgur.com/lqGAH.png)

如果你的 gcc ≥ 4.9，你可以使用 argument `-fdiagnostics-color=always`。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-11-28T14:34:34.613

如果您使用 GCC 4.9，您可以添加`-fdiagnostics-color=auto`作为附加编译标志。在某些更高版本中，默认情况下已启用颜色。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-28T10:19:43.020

4年后回答你的问题，这里应该提到[clang 。](http://clang.llvm.org/diagnostics.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-22T18:52:09.720

这是我当前的 hack，它主要在战略位置插入换行符和缩进以及一些额外的注释，但对解决 STL 冗长没有任何作用。

*请注意，在当前实现的情况下，如果编译器返回错误，则此脚本不会返回错误，因此执行此类操作将无法正常工作：* `(make && ./runApplication)` . 这肯定可以通过更好的 bash-fu 来解决。

```
#!/bin/bash
# SUBSTITUTION RULES:
# Note: All substitution rules must end in a semi-colon, inside of the closing quote
subColonSpace='s/: /:\n /g;'
subSrc='s/^src/\nsrc/;'
subError='s/error:/error:\n\n======================================\nERROR:/;'
subWarning='s/ *error: *\n/ERROR: /;'
subWarning='s/ *warning: *\n/WARNING: /;'
subNote='s/note:/\n NOTE:/g;'
subOpenTic='s/‘/\n   ‘/g;'
subOpenParen='s/(/(\n      /g; s/(\n *)/()/g;'
subCommaSpace='s/, /,\n      /g;'

# Note: The order of these may matter
sedExpr="$subColonSpace $subSrc $subError $subWarning $subNote $subOpenTic      
$subOpenParen $subCommaSpace"

makelogFile=makelog.tmp

make "$@" 2>&1 | sed "$sedExpr" | tee $makelogFile 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-23T15:19:07.993

如果你喜欢 Ruby 有**[GilCC](http://www.onlysolutionssoftware.com/gilcc/)**！GilCC 非常易于安装（只需将其复制到 bin 文件夹中）且易于使用（只需键入 GilCC 而不是“gcc”或“make”）并且它适用于 GCC 版本。与基于 Perl 的脚本不同， **GilCC**具有诸如警告数和错误数以及编译时间等统计信息。你不必弄乱 .bash 文件，只要你能在你的机器上运行 Ruby，它就是跨平台的。由于它具有 Ruby 的强大功能；您可以让 GilCC 在成功构建后执行不同的操作，例如触发测试自动化、单元测试或对外部硬件进行编程。

这是下载页面的链接：[http ://www.onlysolutionssoftware.com/gilcc/](http://www.onlysolutionssoftware.com/gilcc/)

# xslt - 检测 XSLT 中的字符

> ID：656425
> 
> 赞同：1
> 
> 时间：2009-03-17T23:28:24.807
> 
> 标签：xslt, character-encoding, special-characters, mojibake

我遇到了一些在 Internet Explorer 中无法正常显示的奇怪字符，例如：“€”、“â€” 和“â€™”。我认为它们是从复制粘贴 Word 内容中继承而来的。

我正在使用 XSLT 构建页面内容，在 XSLT 中检测这些字符并用有效的 HTML 代码替换它们会很棒。我已经在样式表中进行了字符串替换，但我不确定如何检测这些编码字符或是否有可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-17T23:43:08.077

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-17T23:42:31.260

使用良好的 XML 编辑器（例如[XMLSpy](http://www.altova.com/products/xmlspy/xml_editor.html) ）应该通过在开发时进行验证来突出显示格式化 XSLT 中的任何错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T16:46:12.913

Jeni Tennison's [Multiple string replacements](http://www.dpawson.co.uk/xsl/sect2/StringReplace.html) may be a good starting point.

# algorithm - 描绘了一辆汽车在赛道上的图形演示

> ID：656426
> 
> 赞同：3
> 
> 时间：2009-03-17T23:28:26.287
> 
> 标签：algorithm

我计划设计一个应用程序，它将提供赛道上的汽车视频（就像 RACE Pro 等游戏的演示），并描绘其特征。

例如，如果用户选择了一辆操控性较差的汽车，那么将显示该汽车在模拟赛道上完成一圈的图形演示，其中包含与汽车特性相关的汽车行为（例如，容易打滑、转向不足）。

我知道这是一项相当复杂的任务，我不打算马上编写代码。此要求属于哪些问题/主题？我看过很多关于编程和游戏引擎/3D建模和渲染引擎的物理书籍。这些与此有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-17T23:59:51.877

物理和游戏编程书籍与此绝对相关。幸运的是，那里有一些很棒的免费和开源项目，它们可能对你的这个项目有很大帮助。我在下面列出了一些。

物理：

*   [开放动态引擎](http://www.ode.org/)
*   [托卡马克](http://www.tokamakphysics.com/)
*   [子弹](http://www.bulletphysics.com/)

3D图形：

*   [食人魔](http://www.ogre3d.org/)
*   [水晶空间](http://www.crystalspace3d.org/main/Features)
*   [Crystal Entity Layer (CEL)](http://www.crystalspace3d.org/main/CEL)，为 Crystal Space 提供游戏引擎接口。

您可以以适合您的任何组合将上述任何一种结合在一起。

您还可以使用[Blender](http://www.blender.org/)的内置游戏引擎，其中包括 Bullet 物理引擎。我建议将此作为起点，因为它将为您提供一个完全集成的交互式 3D 模拟创建工具包。游戏引擎可使用 Python 编写脚本（您可以在 Blender 中使用其内部文本编辑器进行所有脚本编辑）。

除了 Racer 项目，您还可以查看[TORCS](http://torcs.sourceforge.net/) - The Open Racing Car Simulator，顾名思义，它也是开源的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-17T23:37:47.153

这当然是一项重大的任务，但作为起点，您可以看看[Racer](http://www.racer.nl/)项目。这是一个非常详细的赛车模拟，可针对不同的车辆设置进行高度定制，并且其引擎具有公开可用的源代码（请参阅下载页面）。

# mysql - 如何更改 mysql 中的 bdb 缓存大小？

> ID：656428
> 
> 赞同：0
> 
> 时间：2009-03-17T23:29:37.063
> 
> 标签：mysql, import, phpmyadmin

我想更改我的 mysql 数据库上的变量 bdb 缓存大小（bdb_cache_size），以便能够导入更大的 SQL 文件（是的，我已将所有其他变量（例如 php.ini 中的所有其他变量）设置为更高的值，但它不起作用） phpmyadmin。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T04:48:22.180

如果您真的在 MySQL 数据库中使用 BDB，请检查您的 my.cnf 中是否没有 skip-bdb。大多数安装默认禁用它（并以这种方式禁用它）。

Berkeley DB 很快就会在 MySQL 中消失，所以如果你正在使用它，我建议你转向 InnoDB（或者至少是 MyISAM）。

# sql-server - sql server 2008 express的内存使用有限？

> ID：656431
> 
> 赞同：2
> 
> 时间：2009-03-17T23:33:23.827
> 
> 标签：sql-server, sql-server-2008-express

我想在具有 1 GB 内存的笔记本电脑上安装 sql server 2008 express，但我的数据库包含大量二进制数据，我不想花费我所有的 RAM。我宁愿牺牲 sql 性能（使其成为页面）来支持其他应用程序。

是否可以限制sql server的内存占用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-17T23:40:48.690

我只有 SQL Server 2005 Express，不是 2008，而是来自 SQL Server Management Studio Express，如果我右键单击树中的根节点（服务器节点）并选择属性，则有一个“内存”页面，两者都有可设置的最小和最大内存量。

从这些选项的文档中：

> **最小服务器内存（以 MB 为单位）**
> 指定 SQL Server 应至少从分配的最小内存量开始，并且不释放低于此值的内存。根据 SQL Server 实例的大小和活动设置此值。始终将该选项设置为合理的值，以确保操作系统不会从 SQL Server 请求过多内存并抑制 Windows 性能。
> 
> **最大服务器内存（MB）**
> 指定 SQL Server 在启动和运行时可以分配的最大内存量。如果您知道有多个应用程序与 SQL Server 同时运行并且您希望保证这些应用程序有足够的内存来运行，则可以将此配置选项设置为特定值。如果这些其他应用程序（例如 Web 或电子邮件服务器）仅在需要时请求内存，则不要设置该选项，因为 SQL Server 会根据需要向它们释放内存。但是，应用程序通常会在启动时使用任何可用的内存，并且在需要时不会请求更多内存。如果以这种方式运行的应用程序与 SQL Server 同时在同一台计算机上运行，

*如果这些选项不在*2008 年，我会感到惊讶，但您总是可以安装并尝试。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-17T23:44:35.563

看[这里](http://msdn.microsoft.com/en-us/library/ms188787.aspx)和[这里](http://msdn.microsoft.com/en-us/library/ms178067.aspx)

我认为本质上是 sp_configure 'max server memory'

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-08-03T00:14:17.087

您可以使用 osql： http: [//kb.hs-lab.com/content/7/113/en/how-to-limit-ram-usage-for-sql-2005-express-database.html](http://kb.hs-lab.com/content/7/113/en/how-to-limit-ram-usage-for-sql-2005-express-database.html)

osql -E -S YOURSERVERNAME\PRINTLOGGER

```
sp_configure 'show advanced options',1

RECONFIGURE WITH OVERRIDE

GO 
```

然后

```
sp_configure 'max server memory',70?

RECONFIGURE WITH OVERRIDE

GO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T15:10:37.130

您也可以尝试将 cpu 优先级分配给您喜欢的应用程序并让 SQL 动态管理内存。它将根据其他应用程序的需要释放内存，无论优先级如何。

希望您没有尝试在该机器上运行 Visual Studio。不会很有趣。

# sql - 我应该对 NOT NULL 列有多自由？

> ID：656432
> 
> 赞同：27
> 
> 时间：2009-03-17T23:33:44.433
> 
> 标签：sql, sql-server, schema, nullable

我正在设计一个数据库模式，我想知道我应该使用什么标准来决定每一列是否应该是`nullable`。

我是否应该仅将那些绝对*必须*填写一行才能对我的应用程序有意义的列标记为 NOT NULL？

或者我应该标记我打算永远不会为空的所有列？

少量与大量 NOT NULL 列的性能影响是什么？

我假设很多 NOT NULL 列会减慢插入速度，但实际上可能会加快选择速度，因为查询执行计划生成器有更多关于列的信息。

比我知识渊博的人能给我介绍一下吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-03-18T00:06:56.880

老实说，我一直认为 NOT NULL 应该是默认值。NULL 是一种奇怪的特殊情况，无论何时使用它都应该为它做一个案例。另外，将一列从 NOT NULL 更改为可为空的比另一种方式要容易得多。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-03-17T23:37:59.493

没有显着的性能后果。甚至不要考虑将其视为一个问题。这样做是一个巨大的早期优化反模式。

“我是否应该只将那些绝对必须填写一行才能对我的应用程序有意义的列标记为 NOT NULL？”

是的。就这么简单。使用没有任何 NULL 值的 NULLable 列比需要 NULL 并不得不伪造它要好得多。无论如何，最好在您的业务规则中过滤掉任何模棱两可的情况。

* * *

编辑：

对于可空字段，还有一个我认为最终最引人注目的论点，那就是用例论点。我们都受制于需要某些字段值的数据输入表单；我们都放弃了对必填字段没有合理值的表单。最终，应用程序、表单和数据库设计只有在反映用户需求的情况下才是可防御的；很明显，有很多很多的数据库列，用户不能为其提供任何价值——有时在业务流程的给定点上，有时在任何时候。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-03-18T00:21:34.553

在 NOT NULL 一侧出错。在某些时候，您必须决定 NULL 在您的应用程序中“意味着”什么——很可能，对于不同的列来说，这将是不同的事情。一些常见情况是“未指定”、“未知”、“不适用”、“尚未发生”等。您将知道何时需要其中一个值，然后您可以适当地允许 NULLable 列和编码围绕它的逻辑。

允许随机事物为 NULL 迟早*总是*一个噩梦 IME。谨慎而谨慎地使用 NULL - 并了解它在您的逻辑中的含义。

编辑：似乎有一个想法，我一直在争论*NO*空列。这是荒谬的。NULL*很有*用，但仅限于预期的地方。

Le Dorfier 的 DateOfDeath 例子就是一个很好的例子。NULL DateOfDeath 表示“尚未发生”。现在，我可以编写一个视图 LivingPersons `WHERE DateOfDeath IS NULL`。

但是，NULL OrderDate 是什么意思？还没下单？即使 Order 表中有记录？NULL地址怎么样？在你让 NULL 成为一个值之前，这些是你应该考虑的想法。

回到 DateOfDeath - 对人员的查询`WHERE DateOfDeath > '1/1/1999'`不会返回 NULL 记录 - 即使我们从逻辑上知道他们*必须在 1999 年之后死亡*。那是你要的吗？如果没有，那么您最好包含`OR DateOfDeath IS NULL`在该查询中。如果您允许*所有列都为 NULL，则**每次编写查询时*都必须考虑这一点。IME，对于 10% 左右的列来说，当它们为 NULL 时实际上具有合法意义的列的心理负担太大了。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-03-17T23:44:09.197

我发现将列标记为 NOT NULL 通常是一个好主意，除非您对列中的 NULL 有有用的含义。否则，当你意识到你不想要它时，你可能会意外地在那里找到 NULL，并且更改更难。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2009-03-18T00:41:12.977

我尽量避免在数据库中使用 NULL。这意味着字符字段始终不为空。数字字段也是如此，尤其是任何代表金钱或类似的东西（股票、单位等）。

我有两个例外：

1.  日期可能未知的日期（例如 DivorcedOn）
2.  可选的外键关系（MarriedToPersonId）。虽然有时我在外键表中使用了“空白”行并强制建立关系（例如 JobDescriptionCode）

我有时也会对“未知”/“未设置”使用显式位字段（例如 JobDescriptionCode 和 IsEmployeed）。

我有几个核心原因：

1.  NULL 总是会导致数值字段出现问题。总是。总是。总是。无论您在某个时候多么小心，都选择 X + Y，因为 Total 将会发生并且它将返回 NULL。
2.  NULL 很容易导致字符串字段出现问题，通常是地址字段（例如，从地址中选择 AddrLine1 + AddrLine2）。
3.  防止业务逻辑层中的 NULL 是一种乏味的浪费工作……只是不要让它们进入数据库，您可以节省 100 行代码。

我的首选默认值：

*   字符串 -> ""，也就是一个空字符串
*   数字 -> 0
*   日期 -> 今天或 NULL（见异常 #1）
*   位 -> 假

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-03-18T00:56:22.737

您可能会发现 Chris Date 的[Database In Depth](http://oreilly.com/catalog/9780596100124/)是解决这类问题的有用资源。你可以在这次[采访](http://www.oreillynet.com/pub/a/network/2005/07/29/cjdate.html)中了解他的想法，他说：

> 所以是的，我确实认为 SQL 很糟糕。但是你明确地问它的主要缺陷是什么。好吧，这里有几个：
> 
> *   重复行
> *   空值
> *   从左到右的列排序
> *   未命名的列和重复的列名
> *   未能正确支持“=”
> *   指针
> *   高冗余

以我自己的经验，几乎所有“计划的空值”都可以用具有基表外键的子表更好地表示。参与子表是可选的，这就是实际区分 null/not null 的地方。

这很好地映射到将关系解释为一阶逻辑命题。这也只是常识。当一个人不知道 Bob 的地址时，是否会在自己的通讯录中写入：

```
Bob. ____ 
```

或者，在有他的实际地址之前，人们是否只是避免为 Bob 填写地址卡？

编辑：Date 的论点出现在 Database In Depth 第 53-55 页的“[为什么禁止 Nulls](http://books.google.com/books?id=FU7uuHc3oNcC&pg=PA53&vq=why+nulls+are+prohibited&dq=database+in+depth&source=gbs_search_s&cad=0) ”部分标题下。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-03-18T01:31:23.667

除非我看到其他原因，否则我倾向于 NOT NULL —— 就像其他人所说的，不管你喜不喜欢，NULL 是一种奇怪的特殊情况。

关于 NULL，我最喜欢的一项是：

```
SELECT F1 FROM T WHERE F2 <> 'OK' 
```

...其中（至少在 DB2 中）不会包含 f2 为空的任何行——因为在关系术语中， (NULL <> 'OK') IS NULL。但是您的意图是返回所有不正常的行。您需要一个额外的 OR 谓词，或者改写 F2 DISTINCT FROM 'OK' （这首先是特殊情况编码）。

IMO，NULL 只是那些需要艺术和科学一样多的程序员工具之一，例如指针算术或运算符重载。

Joe Celko 在 SQL For Smarties 中写到了这一点——在应用程序中使用 NULL 的陷阱是它的含义是未定义的。它可能意味着未知、未初始化、不完整、不适用——或者就像上面那个愚蠢的例子，它意味着 OK 还是 not-OK？

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-03-18T23:18:50.217

感谢所有伟大的答案，伙计们。您给了我很多思考，并帮助我形成了自己的观点/策略，归结为：

> 如果该列中的空值对您的应用程序具有特定意义，则允许空值。

null 的几个常见含义：

*   任何直接来自用户的东西
    *   这里的 null 表示“用户没有进入”
    *   对于这些列，最好允许空值，否则无论如何您只会得到*asdasd@asd.com*类型的输入。
*   “0 或 1”关系的外键
    *   null 表示“没有相关行”
    *   所以允许这些列的空值
    *   这个是[有争议](https://stackoverflow.com/questions/656494/what-does-should-null-mean-along-with-fk-relationships-database)的，但这是我的观点。

一般来说，如果你想不出一个列中 null 的有用含义，它应该是`NOT NULL`. 您以后可以随时将其更改为可为空的。

我最终得到的那种事情的例子：

```
create table SalesOrderLine (
    Id int identity primary key,
    -- a line must have exactly one header:
    IdHeader int not null foreign key references SalesOrderHeader, 
    LineNumber int not null, -- a line must have a line number
    IdItem int not null, -- cannot have null item
    Quantity decimal not null, -- maybe could sell 0, but not null
    UnitPrice decimal not null, -- price can be 0, but not null
    -- a null delivery address means not for delivery:
    IdDeliveryAddress int foreign key references Address, 
    Comment varchar(100), -- null means user skipped it
    Cancelled bit not null default (0) -- true boolean, not three-state!
    Delivered datetime, -- null means not yet delivered
    Logged datetime not null default (GetDate()) -- must be filled out
) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-03-17T23:43:33.880

我倾向于同意多菲尔的观点。

在您的应用程序中认真对待接收数据库 NULL 值并将它们视为空值时的灵活性，并且您给自己很大的灵活性来让 NULL 插入您未指定的值。

可能在很多情况下，您需要一些非常严格的数据完整性（和/或禁止 NULL 字段的强烈速度优化），但我认为这些担忧与确保每个字段都有默认值所需的额外努力有所缓和和/或设置为合理的值。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-03-18T00:37:10.553

坚持在所有事情上都使用 NOT NULL，直到有人对此感到痛苦。然后尽可能不情愿地将其一次删除一列。尽可能避免数据库中的空值，只要可以。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-03-18T18:23:08.620

就我个人而言，我认为您应该根据它们包含的数据类型、是否确实要求数据始终存在以及数据在输入时是否始终已知，将列标记为 Null 或不为 null。当用户没有数据时将列标记为非空将强制然后组成使您的所有数据无用的数据（这就是您最终得到垃圾数据的方式，例如包含“thisissilly@Ihatethisaplication.com”的电子邮件字段”）。不要求流程正常工作必须有的东西（比如显示客户下订单的关键字段）同样愚蠢。Null Vice not null 本质上是一个数据完整性问题，做对保持数据可用最有意义的事情。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-03-17T23:49:05.973

如果您可以长期思考，那么在列中包含 NULL 会影响您设计查询的方式。无论您是使用 CASE 语句、COALESCE，还是必须显式测试 NULL 值，都可以为您做出决定。

从性能的角度来看，不必担心 NULLS 会更快。从设计的角度来看，使用 NULL 是一种了解项目从未被填写过的简单方法。有用的示例包括“UpdatedDateTime”列。NULL 表示项目从未更新过。

我个人在大多数情况下都允许 NULL。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-03-18T01:32:35.117

> 少量与大量 NOT NULL 列的性能影响是什么？

*这可能是显而易见的，但是*，当一列可以为空时，每条记录将需要 1 个额外的存储位。因此，一个**BIT**列在可为空时将多消耗 100% 的存储空间，而**UNIQUEIDENTIFIER**在可为空时仅多消耗 0.8% 的存储空间。

在病态的情况下，如果您的数据库有一个由单个 BIT 列组成的表，则使该列可为空的决定会使数据库的性能降低一半。但是，在绝大多数现实世界场景下，可空性不会对性能产生可衡量的影响。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-03-22T22:12:51.927

使用“Not Null”或“Null”应主要由您的特定持久性要求驱动。

值为 Nullable 意味着有两个或三个状态（具有位字段的三个状态）

例如; 如果我有一个名为“IsApproved”的位字段，并且该值设置在插入之后的阶段。然后是三种状态：

1.  'IsApproved' 未回答
2.  'IsApproved' 已获批准
3.  'IsApproved' 未获批准

因此，如果一个字段可以合法地被视为未回答并且没有合适的默认值。这些字段应该被认为是可以为空的

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2009-03-22T02:32:07.163

任何可为空的列都违反了第三范式。

但是，这不是答案。

也许是这样：数据库中有两种类型的列——一种保存数据的*结构*，一种保存数据的*内容*。键是结构，用户可输入的字段是数据。其他事情 - 嗯 - 这是一个判断电话。

用于连接子句的结构通常不为空。数据的东西通常可以为空。

当您有一列包含选择列表之一或 null（未做出选择）时，通常最好为“未做出选择”而不是可为空的列设置特定值。这些类型的列经常参与连接。

# ruby - 现代计算机是否强大到无需使用符号就可以处理字符串（在 Ruby 中）

> ID：656441
> 
> 赞同：5
> 
> 时间：2009-03-17T23:41:25.897
> 
> 标签：ruby, performance, string, symbols

我读过的每一篇关于 Ruby 符号的文章都谈到了符号对字符串的效率。但是，这不是 1970 年代。我的电脑可以处理一些额外的垃圾收集。我错了吗？我有最新最好的奔腾双核处理器和 4 gigs 的 RAM。我认为这应该足以处理一些字符串。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-17T23:53:40.643

您的计算机很可能能够处理“一点点额外的垃圾收集”，但是当那个“一点点”发生在运行数百万次的内部循环中时呢？当它在内存有限的嵌入式系统上运行时呢？

有很多地方你可以随意使用字符串，但在某些地方你不能。这一切都取决于上下文。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-03-17T23:50:49.323

的确，出于记忆的原因，您并不需要如此糟糕的令牌。毫无疑问，您的计算机可以处理各种复杂的字符串处理。

但是，除了更快之外，令牌还具有额外的优势（尤其是上下文着色），即在视觉上尖叫：看我，我是键值对中的键。这是为我使用它们的充分理由。

还有其他原因……而且其中许多的性能提升可能比您意识到的要多，尤其是在进行比较之类的操作时。

当比较两个 ruby​​ 符号时，解释器只是比较两个对象地址。比较两个字符串时，解释器必须一次比较每个字符。如果你做了很多这样的计算，那么这种计算就会加起来。

符号有其自身的性能问题......它们永远不会被垃圾收集。

这篇文章值得一读： [http ://www.randomhacks.net/articles/2007/01/20/13-ways-of-looking-at-a-ruby-symbol](http://www.randomhacks.net/articles/2007/01/20/13-ways-of-looking-at-a-ruby-symbol)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-17T23:47:12.607

很好地保证符号是唯一的——这可以产生一些你不会从 String 获得的很好的效果（比如我相信它们的地址总是完全相等的）。

另外它们有不同的含义，你会想在不同的领域使用它们，但是 ruby​​ 对那种东西并不太严格，所以我可以理解你的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-03-24T08:32:47.050

这是造成差异的真正原因：字符串永远不会相同。字符串的每个实例都是一个单独的对象，即使内容相同。大多数对字符串的操作都会生成*新的*字符串对象。考虑以下：

```
a = 'zowie'
b = 'zowie'
a == b         #=> true 
```

从表面上看，很容易声称`a`并且`b`是相同的。大多数常识操作都会按您的预期工作。但：

```
a.object_id    #=> 2152589920 (when I ran this in irb)
b.object_id    #=> 2152572980
a.equal?(b)    #=> false 
```

它们*看起来*一样，但它们是不同的对象。Ruby 必须分配两次内存，两次执行该`String#initialize`方法，等等。它们占用了内存中的两个不同位置。嘿！当您尝试修改它们时，它会变得更加有趣：

```
a += ''        #=> 'zowie'
a.object_id    #=> 2151845240 
```

在这里，我们*什么也不*添加，`a`保持内容完全相同——但 Ruby 不知道这一点。它仍然分配一个全新的 String 对象，将变量重新分配`a`给它，而旧的 String 对象则坐在那里等待最终的垃圾回收。哦，空`''`字符串也会在该行代码的持续时间内获得一个临时的 String 对象。试试看：

```
''.object_id   #=> 2152710260
''.object_id   #=> 2152694840
''.object_id   #=> 2152681980 
```

这些对象分配在您光滑的多千兆赫处理器上是否快速？当然是。他们会吃掉你 4 GB 的大部分内存吗？不，他们不会。但是重复几百万次，它就会开始累加。大多数应用程序到处都使用临时字符串，并且您的代码可能在您的方法和循环中充满了字符串文字。每次运行该行代码时，*每个*字符串文字等都会分配一个新的 String 对象。真正的问题甚至不是内存浪费。当垃圾收集被过于频繁地触发并且您的应用程序开始挂起时，这是浪费的时间。

相比之下，看一下符号：

```
a = :zowie
b = :zowie
a.object_id    #=> 456488
b.object_id    #=> 456488
a == b         #=> true
a.equal?(b)    #=> true 
```

一旦符号`:zowie`被制作出来，它就永远不会再制作一个。每次你引用一个给定的符号时，你指的是同一个对象。没有时间或内存浪费在新的分配上。如果你对它们过于疯狂，这也可能是一个缺点——它们*永远不会被*垃圾收集，所以如果你开始从用户输入动态创建无数符号，你就有无穷无尽的内存泄漏的风险。但是对于代码中的简单文字，例如常量值或哈希键，它们几乎是完美的。

这有帮助吗？这与您的应用程序执行一次操作无关。这是关于它做了几百万次的事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-18T12:00:47.260

少一个字符要输入。这就是我需要将它们用于哈希键等字符串的所有理由。

# asp.net-mvc - 在 ASP.NET MVC 中构建 CMS

> ID：656455
> 
> 赞同：37
> 
> 时间：2009-03-17T23:47:44.417
> 
> 标签：asp.net-mvc, content-management-system

我很想知道是否为 ASP.NET MVC 编写了任何基本的 CMS 代码。

我问的原因是，我正在为客户制作一个数据驱动的网站，我已经花费了大量时间在 MVC 中从头开始构建它，但现在客户需要内容管理工具。

基本上，他们希望能够添加/编辑/删除文章并进行修订控制。

如果我能够以某种方式“加强”内容管理，而不必从头开始，在现有的 CMS*下开发它，那就太好了。*

我应该自己构建文章管理和修订控制，还是应该重新使用一些现有的包？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-03-17T23:49:32.523

[N2](http://n2cms.com/)执行您所描述的 - 对现有 ASP.NET 解决方案（包括 MVC）的“螺栓固定”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2010-09-23T13:36:18.793

另外，kooboo 很有趣[http://www.kooboo.com](http://www.kooboo.com)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-03-26T16:41:47.420

（我知道这个问题很老，但对于相关的搜索词来说它仍然很高。）

今天我发现了 Meek，[http://www.adventuretechgroup.com/labs-meek/](http://www.adventuretechgroup.com/labs-meek/)，添加到我的 MVC 项目中非常简单且不显眼，我相信这是原始发布者想要的 - 以 CMS 为一个功能，而不是让它接管您的整个网站。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-21T09:55:10.363

[Piranha CMS](http://piranhacms.org/)非常适合连接到现有应用程序。它的作者在这里描述[了为什么以及如何](https://stackoverflow.com/a/15947577/424111)。直接从该来源引用：

“我们的重点是内容管理，并为开发人员提供透明且轻量级的 API。Piranha CMS 几乎没有渲染任何 HTML 的组件或助手，它只提供数据库、管理器界面和用于检索正确数据的路由机制对于当前请求。

如果您有一个现有网站，您实际上可以完全绕过路由，在管理器界面中一次添加一个页面，然后在现有页面中手动加载页面模型。这将允许您保持原始应用程序完全相同，但通过管理器界面管理内容。”

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-14T13:40:45.317

如果你还在寻找，我在这里发布了我的新开源 CMS：

*   [MVCwCMS](http://www.mvcwcms.com)

我正在积极努力，所以我会尽快推送更多更新。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-16T20:53:51.567

这里也是关于 Telerik Sitefinity 如何做到这一点的快速总结：

[http://www.sitefinity.com/mvc-cms](http://www.sitefinity.com/mvc-cms)

简而言之 - 允许您将标准 system.web.mvc.controller 类作为小部件插入，允许您将 API 用于任何事情，包括模型绑定、用于视图引擎的标准 Razor 等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-18T00:04:36.107

还有[Oxite](http://visitmix.com/Lab/Oxite)，我认为它更像是一个博客引擎。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-02-20T15:35:32.423

看看 AtomicCms，它是一个基于 ASP.NET MVC 1.0 的免费开源内容管理系统 [http://atomiccms.codeplex.com](http://atomiccms.codeplex.com)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-06-29T21:59:05.893

检查 Orchard ;-) 它基于 asp.net mvc。

# jquery - 如何使用 jQuery 和 AJAX 从axis2服务转换xml？

> ID：656459
> 
> 赞同：1
> 
> 时间：2009-03-17T23:49:22.540
> 
> 标签：jquery, ajax, xslt, xslt-1.0, axis2

我遇到了axis2和ajax的问题​​。我使用 jQuery 的 ajax 函数从我的 Web 服务之一获取 xml，并使用[这个](http://plugins.jquery.com/project/Transform)jquery 插件将结果 xml 转换为 html。

这是服务返回的相关 xml 的示例。

```
<ns:getPatientsByDoctorResponse>
    <ns:return type="com.emolst.jdbc.PatientBean">
        <ax23:firstName>Bryce</ax23:firstName>
        <ax23:lastName>Thompson</ax23:lastName>
    </ns:return>
</ns:getPatientsByDoctorResponse> 
```

我查看了从 jQuery ajax 调用中获得的 xml Document 对象，它似乎已经从标签中剥离了命名空间并使标签全部小写。但是，我似乎无法让我的 xsl 模板识别任何标签。

这是我现在在 xsl 中的内容。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" indent="yes"/>

    <xsl:template match="/">
        <option>success1</option>
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="//return">
        <option>success2</option>
        <option>
            <xsl:value-of select="firstname"/> <xsl:value-of select="lastname"/>
        </option>
    </xsl:template>
</xsl:transform> 
```

我能得到的最好的是success1 选项。我在[这里](http://www.marcusschiesser.de/?p=142)找到了一些关于让axis2更好地使用ajax的信息，但这看起来可能会搞砸我拥有的java服务客户端。

这是有问题的javascript。

```
$("select[name=patientlist]").transform({
    xml:{
        url:"/axis2/services/PatientService/getPatientsByDoctor",
        data {
            docKey: "6"
        },
        type:"GET",
        dataType:"xml"
    },
    xsl:"xsl/patients-option.xsl"
}); 
```

那么我是在做一些愚蠢的事情还是有更好的方法来做到这一点？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T14:24:49.127

你说你认为命名空间已经消失了，但我认为它们没有。他们为什么要这样做？

尝试忽略名称空间的转换，如下所示：

```
<xsl:transform 
  version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="html" indent="yes"/>

    <xsl:template match="/">
        <option>success1</option>
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="//*[local-name()='return']">
        <option>success2</option>
        <option>
            <xsl:value-of select="*[local-name()='firstname']"/>
            <xsl:text> </xsl:text>
            <xsl:value-of select="*[local-name()='lastname']"/>
        </option>
    </xsl:template>

</xsl:transform> 
```

或正确使用它们的模板，如下所示：

```
<xsl:transform 
  version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:ax23="........ax23 namespace here........"
  xmlns:ns="........ns namespace here........"
>

    <xsl:output method="html" indent="yes"/>

    <xsl:template match="/">
        <option>success1</option>
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="ns:return">
        <option>success2</option>
        <option>
            <xsl:value-of select="ax23:firstname"/>
            <xsl:text> </xsl:text>
            <xsl:value-of select="ax23:lastname"/>
        </option>
    </xsl:template>

</xsl:transform> 
```

# asp.net - 如何在 asp.net gridview 中动态显示图像？

> ID：656464
> 
> 赞同：0
> 
> 时间：2009-03-17T23:52:27.463
> 
> 标签：asp.net, gridview

我有一个 gridview，它有一列如果有签核，则当前返回“1”，如果没有，则返回 0。如果每行的值为 1，我想显示“竖起大拇指”图像，如果为 0，则不显示。

这样做的最佳方法是什么？我正在考虑以某种方式使用 rowdatabound 事件，最好的方法是什么？

谢谢，

标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-17T23:55:49.933

另一种非常灵活的方法是使用模板列。这给了你很大的自由。例如，您可以使用列的值将参数切换到 img 标签（或在两个 img 标签之间切换）和/或指定链接的参数。

我总是发现模板列非常简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T01:28:05.157

rowdatabound 事件当然为您提供了执行此操作的能力。这样做是相当直接和直观的。正如标记所提到的，您可以使用模板列。我可能只使用模板列或图像字段来管理它：

```
<Columns>
    <asp:ImageField HeaderText='Sign Off' 
        DataImageUrlField='<%# ThumbDisplay(Eval("SignOff")) %>' />
</Columns> 
```

然后，您需要在代码隐藏中使用如下方法：

```
protected string ThumbDisplay(int signoff)
{
    return (signoff == 1) ? "~\thumbsup.png" : "~\thumbsdown.png";
} 
```

[http://www.asp.net/learn/data-access/tutorial-12-cs.aspx](http://www.asp.net/learn/data-access/tutorial-12-cs.aspx)有很好的关于使用模板栏的细节。

最好的方法可能是适合您其他显示需求的方法。其他柱子需要类似的按摩吗？您最好在 rowdatabound 事件中一次性处理好这一切。但如果这将是您对数据的唯一修改，则使用模板列或图像列可能是最容易遵循并保持整个页面清洁的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-17T23:55:19.967

您应该能够使用图像列并将 url 绑定到采用 1 或 0 并返回正确图像 url 的方法。请参阅[http://msdn.microsoft.com/en-us/library/aa479350.aspx](http://msdn.microsoft.com/en-us/library/aa479350.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-18T13:36:32.770

这有点乱，但都包含在模板标签中：

```
<ItemTemplate>
  <img src='<%# (bool)Eval("signoff") ? "thumbsup" : "thumbsdown" %>.gif' alt="whatever" width="16" height="16" />
</ItemTemplate> 
```

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T17:32:22.237

谢谢大家，我最终使用了 boundfield -> rowdatabound 解决方案。

我已经发生了数据绑定事件代码，所以我只是添加了它。我在那里放了一个 imagebutton 控件，现在看起来不错（有点偏离中心，但我想它比以前更好）。

感谢您的建议，

标记。

# java - Java的好TCP连接库？

> ID：656469
> 
> 赞同：4
> 
> 时间：2009-03-17T23:55:05.520
> 
> 标签：java, connection

我正在寻找具有以下功能的 Java 的良好 TCP 连接库：

```
1\. Retry on failed publishes
2\. Multiple connections 
```

您成功使用了哪个库。

编辑：根据评论更改了问题以反映哪种类型的连接库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T09:52:45.583

可能是[Apache MINA](http://mina.apache.org/)会帮助你。看看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T09:43:35.437

我不确定这是否真的有意义。您正在谈论重试失败的发布，但 TCP 没有*发布*的概念。只是消息传递。因此，您可能正在发布，或者您可能正在请求信息。

例如，基于 TCP 的 HTTP 具有动词 GET/PUT/POST（以及其他）。所有这些都通过 TCP 运行。只有两个实际写了一些东西（PUT/POST）。并且只有 PUT 应该是[幂等](http://en.wikipedia.org/wiki/Idempotent)的（也就是说，您应该能够一次又一次地进行相同的操作并获得相同的结果）。如果您反复发布，我希望重新发布一些内容并在服务器上为每个 POST 创建一个新版本。

以上只是关于如何实现 PUT/POST 的建议。我不希望 HTTP 库代表我承担这一点。

所以在 TCP 层重试消息的概念是错误的（注意 TCP 会重新发送数据包等组成消息）。这是一个更高级别的功能，它可能在较低级别使用 TCP。例如，当我的远程服务器暂时不可用或报告错误时，我围绕 HTTPClient 编写了自己的包装器以重试 PUT（我不确定是否存在重试 HTTP 库）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-06T10:53:01.200

也许这对其他人有帮助，试试这个名为[socketal](https://github.com/SeynalKim/socketal)的库，Pure`Java`使用`ServerSocket`and `Socket`，它非常简单并且没有任何不必要的功能。

该库能够：

> 1.  断开连接时自动重新连接
> 2.  能够处理连接/断开/连接
> 3.  发送非常简单`String`，`Object`或者`File`
> 4.  设置你自己的`Authentication code`，`Verification`就像`Login Password`

它看起来像[Netty](https://github.com/netty/netty)，但它们没有很多复杂的设置和功能。

它兼容`Android/Java`.

# asp.net-mvc - 验证，您通常在 Web 应用程序中执行哪些检查？

> ID：656475
> 
> 赞同：2
> 
> 时间：2009-03-17T23:57:37.683
> 
> 标签：asp.net-mvc, validation

我正在构建一个公开可用的网络应用程序。因此，我将尽可能详尽地验证*每个字段。*我的意思是，如果有人输入了无效的东西，他们会**确切地**知道它是什么（明确他们需要修复什么）。

我在[NerdDinner 电子书](http://aspnetmvcbook.s3.amazonaws.com/aspnetmvc-nerdinner_v1.pdf)中遵循了 Scott Guthrie 的示例。我喜欢在核心类文件（作为部分类）中进行所有验证的想法。

我正在执行的验证是这样的：

*   最小值 - 确保字符串至少有一定长度
*   最大值 - 确保字符串小于最大长度（基于数据库中的字段属性）
*   int 检查 - 确保整数字段可以正确解析为 int
*   文件扩展名 - 确保上传的文件扩展名类型正确

**我的问题是，您在 Web 应用程序中进行的典型验证检查是什么？**也许我完全忽略了一些东西。;)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T00:11:20.617

您应该尝试尽可能多地使用现有框架进行验证。编写一个全面的验证库是一项艰巨且耗时的工作。这是最好留给致力于开发它的团队的事情之一，例如[jQuery 验证](http://blog.jquery.com/2007/07/04/about-client-side-form-validation-and-frameworks/)插件和类似的项目。已经有很多非常好的[验证器库](http://blog.jquery.com/2007/07/04/about-client-side-form-validation-and-frameworks/)可以为您节省大量时间和精力。

codeplex 上有一个[MVC 验证器工具包项目，您可能会觉得很有帮助。](http://www.codeplex.com/MvcValidatorToolkit)如果您想了解更多，[CodeProject 有一个教程。](http://www.codeproject.com/KB/aspnet/MvcValidatorToolkit.aspx)作为评论者之一，您还可以查看[xVal](http://www.codeplex.com/xval)。

如果您有特定的原因需要在内部编写验证，或者您不相信我上面所说的，我认为有用的一些是：

*   显然，必填字段验证。您可能已经通过检查字段中的最小长度来获得此信息。
*   通用正则表达式验证。确保您有某种方法可以通用地执行这种验证。这将帮助您，以防某些特定字段需要在您的站点中其他地方找不到的唯一形式的验证。确保您的 API 足够灵活，可以添加基于特定正则表达式的验证。
*   电子邮件。你会需要这个。
*   电话号码。这些可能很困难，因为它们可以采用所有形式（全是数字，有时带有字母字符，有时是遵循不同格式的国际数字）
*   日期和时间也很重要，但是您应该考虑使用某种日期/时间选择器，以通过不允许用户键入值来减少出错的可能性。
*   确保包含非文本框相关字段的验证功能，例如下拉列表、单选按钮、复选框等。我过去只是出于疏忽而忘记了这些，但它们确实变得很重要。
*   匹配字段。例如，在确认密码时，两个字段应该匹配。这不会只在一页中使用。想想密码重置、管理页面、用户控制面板等。
*   虽然有些复杂，但您可能还希望包括序列验证。例如，您网站上的某些选项可能要求您先选择其他选项。另一个例子是，某些选项只有在您首先选择其他选项组合时才应该是可选的。这是您可能无法包含在通用 API 中的内容，但值得考虑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T00:00:11.157

您需要检查[SQL injection](http://en.wikipedia.org/wiki/SQL_injection)、[XSS](http://en.wikipedia.org/wiki/Cross-site_scripting)和[CSRF](http://en.wikipedia.org/wiki/CSRF)。您可以使用 Firefox 的这些[工具](http://securitycompass.com/exploitme.shtml)来帮助您进行测试。然后还有一些事情，比如确保用户名不等于密码、登录限制等。验证你的 CSS 和 XHTML 也不错，尽管我认为这不是你的意思。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T01:58:22.823

除了其他人提到的之外，不要忘记验证相互依赖的项目。即输入值的一致性。例如，如果用户输入最大值和最小值，不仅要独立检查这两个值与它们的合法最大值和最小值，还要相互检查它们以确保输入的值在逻辑上是一致的。

对于主机名，您可能需要验证 DNS 是否返回 IP 地址。如果没有，请让用户知道，但不必因此拒绝主机名。也许用户正在预先配置一些尚不存在的东西。这取决于具体的应用。

也就是说，除了语法有效性之外，您还可以检查输入的值是否有意义且彼此一致。

如果你全力以赴，你可以做的另一件事是只允许在数字字段中输入数字，在信用卡或电话号码字段中只允许数字和“-”，等等。

始终，始终允许用户以最熟悉的格式输入输入，即使您以后必须删除无关数据。例如，让用户（但不要求用户）输入电话号码是 1-800-555-1212，即使您稍后去掉“-”字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T07:33:45.623

不太确定这与 asp.net-mvc 有什么关系，但是......

我总是尽量避免过度验证（显然你需要做一些简单的理智的事情来确保没有数据库错误）。这是根据您的业务规则逐个字段决定的。有些字段需要有严格的验证规则，比如信用卡号。但是，请始终考虑验证将如何为用户提供服务。正则表达式很少需要匹配所有可能的电子邮件地址 - 当网站不允许 + 登录您的电子邮件时，这真的很烦人。在大多数情况下，如果您让人们按照自己的意愿输入电话号码，您的应用程序就可以了。当您要在某个字段上设置必填规则时，请务必先自行猜测。

我推荐 entlib 验证应用程序块，以便于使用和扩展框架。

# javascript - 从 Javascript 捕获链接点击事件

> ID：656476
> 
> 赞同：1
> 
> 时间：2009-03-17T23:58:00.913
> 
> 标签：javascript, javascript-events

为了跟踪整个用户点击流，如果用户右键单击并在链接上选择“在新选项卡中打开”（或大多数浏览器中的中键），我想触发一个 javascript 事件。大多数这些链接都链接到我的网站之外，我想尽可能少地干扰整体浏览器体验（例如：状态栏等）。有什么选择可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T00:38:18.023

如果您正在寻找查看出站链接命中的方法，您可以尝试以下方法：

*   使用脚本，例如 link.php?src= [http://www.example.com](http://www.example.com)在单击时为每个 IP 和用户代理组合增加一个计数器。然而，这在状态栏中看起来不太好。它也可以被网络爬虫保存。

*   使用不显眼的 JavaScript 将事件处理程序附加到外部链接上。如果主机名存在并且与您所在的主机名不匹配，您可以确定它们是否是外部的。然后，您可以使用此事件处理程序来保存 href，防止默认单击事件，像第一个脚本一样增加一个数字，然后将 window.location 发送到实际的 href。如果没有启用/支持 JavaScript，这当然会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T00:15:19.420

用户可以通过多种方式在浏览器中创建新选项卡：

*   中键单击
*   上下文菜单
*   鼠标手势
*   工具栏上的“新标签”按钮
*   “文件”>“新标签”

不幸的是，没有办法处理所有这些以及可能创建新选项卡的更多用户操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T00:21:19.203

你可以做一个简单的服务器重定向并记录它获得的点击
量或者它必须是 js 吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-11T08:02:09.997

中间点击捕获确实有效。

你

*   必须检查浏览器版本（ie6 在中键点击时不会打开任何东西），

*   必须使用 mousedown 和 mouseup 来检查这两个事件是否发生在同一个元素上，

*   必须检查按下了哪个按钮。（例如 jQuery “which” 函数）

如果 mousedown 和 mouseup 发生在同一个元素上，则会打开一个新窗口，因此您会知道您的链接已被点击。

# database - 开源项目数据库

> ID：656483
> 
> 赞同：5
> 
> 时间：2009-03-18T00:01:28.050
> 
> 标签：database, open-source

您会为开源项目使用哪个数据库？

我正在寻找最终用户几乎不需要设置的东西。

更新：数据库大小将相对较小（少于 100,000 条记录）。应用程序将用 C# 编写。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-18T00:03:58.167

如果您正在寻找嵌入式数据库（如果您要求对最终用户来说简单的东西，我想您会这样做），那么[**SQLite**](http://www.sqlite.org/)是世界上[部署最广泛的 SQL 数据库](http://www.sqlite.org/mostdeployed.html)。

取决于您使用的语言，您可能需要适当的 SQLite 库[包装器。](http://www.sqlite.org/cvstrac/wiki?p=SqliteWrappers)

**更新：**对于 .NET，SQLite 的最佳包装是[来自 phxsoftware 的 System.Data.SQLite.dll](http://sqlite.phxsoftware.com/)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-18T00:04:52.720

如果你想要一个 SQL 可查询的数据库，SQLite 很好：

[http://www.sqlite.org/](http://www.sqlite.org/)

它不需要服务器；您只需要在项目中包含和使用适当的 API 库。您的数据库作为单个文件存储在磁盘上。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-18T00:03:49.417

如果它是一个带有 PHP 的 Web 应用程序，那么 MySQL ......它几乎安装在任何安装了 PHP 的地方（几乎是每个主机）。

如果不是...请参阅其他答案:)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-18T00:10:32.303

这在很大程度上取决于该数据库必须完成多少繁重的工作，但我认为值得研究 SQLite。这是一段令人惊叹的 C/C++ 代码，它是在公共领域许可下分发的（这意味着你可以用它做任何你想做的事情，包括转售它）。

如果您不需要原子事务或非常严格的类型检查，那么可能没有更好的数据库了。您将库添加到您的应用程序中，它就像一个 SQL 数据库一样工作。大多数编程语言都有它的绑定。您很难描述需要其他数据库的情况。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-18T00:11:02.550

使用[SQLite](http://www.sqlite.org/)。它不需要最终用户进行任何类型的安装。它只是工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-18T00:33:15.460

像[db4o.net](http://developer.db4o.com/)这样的对象数据库呢？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-18T00:42:07.437

你看过[SQL Server Express](http://en.wikipedia.org/wiki/SQL_Server_Express)它不是开源的，但它是免费的。我是 SQLite 的忠实粉丝，但如果您在 .net 世界中并想使用 microsoft stack，它可能是一个更好的选择。它提供了一些东西，比如 T-SQL 和 SQLite 不提供的强类型系统。它确实具有完整 SQL Server 版本中没有的性能和数据库大小限制，但这对您的应用程序可能无关紧要。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-18T00:53:17.177

我会支持关于 SQLite 的评论。它本身就很棒 - 对于大多数小型、无需安装的数据库，它工作得非常好。

不过，还有其他几个选择。

[火鸟](http://www.firebirdsql.org/)是一种选择。它有一个令人印象深刻的功能列表，还包括一个 .net 提供程序（尽管仍处于测试阶段）。

另一个选择，虽然不是开源的，是[VistaDB](http://vistadb.net/)。与 SQLite 和 Firebird（以及大多数其他数据库）不同，它是 100% 托管的选项，因此具有很多优势。它与 MS SQL 语法相当一致，支持存储过程和许多其他不错的功能。他们有一个免费的“Express Edition”，可以在开源项目中使用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-18T00:56:48.680

这取决于您所说的“最终用户”是什么意思正如其他人所说，如果您正在寻找可嵌入的东西或用于桌面使用，[SQLite是一个不错的选择。](http://en.wikipedia.org/wiki/Sqlite)如果您正在考虑某种 Web 应用程序，我会说[MySQL](http://en.wikipedia.org/wiki/Mysql)或[PostgreSQL](http://en.wikipedia.org/wiki/Postgres)，因为它们将提供更好的性能并能够更自然地处理大型数据集。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-18T00:57:31.673

如果是windows，[Sql Server Compact Edition](http://en.wikipedia.org/wiki/SQL_Server_Compact)是小型应用程序的不错选择。它是可自由再分发的。

# sql-server - SQL Server - 如何使用带有变量的“ALTER INDEX”作为参数

> ID：656487
> 
> 赞同：6
> 
> 时间：2009-03-18T00:03:45.890
> 
> 标签：sql-server, sql-server-2005, tsql

使用 T-SQL 我发现我不能在变量中的表/索引值中使用“ALTER INDEX”而不会出现语法错误。有什么办法可以做到吗？我在 SQL Server 2005 上。

我的代码如下所示：

```
DECLARE @TABLENAME VARCHAR(256)
DECLARE @IDXNAME VARCHAR(256)
DECLARE @SCHEMAID INT
SET @TABLENAME = 'T1'
SET @IDXNAME = 'T1_IDX0'
-- The next line is OK as it hardcodes the variable names
ALTER INDEX T1_IDX0 ON T1 SET (ALLOW_PAGE_LOCKS = ON)
-- The next line generates a syntax error
ALTER INDEX @IDXNAME ON @TABLENAME SET (ALLOW_PAGE_LOCKS = ON) 
```

语法错误如下所示：

```
Msg 102, Level 15, State 1, Line 7
Incorrect syntax near '@IDXNAME'.
Msg 156, Level 15, State 1, Line 7
Incorrect syntax near the keyword 'SET'. 
```

我正在处理的真实代码比上面的更复杂，并且能够使用变量会很有用。我想解决它的一种方法是使用动态 SQL，但如果我可以避免它，我真的宁愿不这样做。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-18T00:07:17.427

不幸的是，您尝试做的事情是不可能的。我可以建议的最佳解决方法是将`alter`语句构建为字符串，连接语句中的变量，然后连接`exec()`它。

尝试这样的事情：

```
declare @alter varchar(200);
set @alter = 'ALTER INDEX ' + @IDXNAME + ' ON ' + @TABLENAME + ' SET (ALLOW_PAGE_LOCKS = ON)';

exec(@alter); 
```

# sql - NULL 与 FK 关系是什么/应该是什么意思 - 数据库

> ID：656494
> 
> 赞同：16
> 
> 时间：2009-03-18T00:06:29.800
> 
> 标签：sql, database-design, null

我在我的关系 SQL 数据库中创建 FK 关系时遇到了困难，在工作中进行了简短讨论后，我们意识到我们有最有可能导致问题的可空列。我一直认为 NULL 意味着未分配、未指定、空白等，并且真的从未见过这样的问题。

我与之交谈的其他开发人员认为，如果两个实体之间确实存在关系，那么您必须创建一个表来连接来自两个实体的数据……

至少对我来说似乎很直观，对于包含来自另一个表的 ID 的列，如果该列不为空，那么它必须具有来自另一个表的 ID，但如果它是 NULL，那么可以移动在。似乎这本身与某些人的说法和建议相矛盾。

处理两个表之间可能存在关系的情况的最佳实践或正确方法是什么，如果指定了一个值，那么它必须在另一个表中......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-18T00:20:16.833

这是完全可以接受的，这意味着，如果该列有任何值，它的值必须存在于另一个表中。（我看到其他答案另有说法，但我不敢苟同。）

想想车辆和引擎表，引擎尚未安装在车辆中（因此 VehicleID 为空）。或者一个带有主管列和公司 CEO 的 Employee 表。

更新：根据 Solberg 的要求，这里有两个表的示例，它们具有外键关系，显示外键字段值*可以*为空。

```
CREATE TABLE [dbo].[EngineTable](
    [EngineID] [int] IDENTITY(1,1) NOT NULL,
    [EngineCylinders] smallint NOT NULL,
 CONSTRAINT [EngineTbl_PK] PRIMARY KEY NONCLUSTERED 
(
    [EngineID] ASC
)WITH (IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE [dbo].[CarTable](
    [CarID] [int] IDENTITY(1,1) NOT NULL,
    [Model] [varchar](32) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [EngineID] [int] NULL
 CONSTRAINT [PK_UnitList] PRIMARY KEY CLUSTERED 
(
    [CarID] ASC
)WITH (IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]

ALTER TABLE [dbo].[CarTable]  WITH CHECK ADD CONSTRAINT [FK_Engine_Car] FOREIGN KEY([EngineID])
REFERENCES [dbo].[EngineTable] ([EngineID])

Insert Into EngineTable (EngineCylinders) Values (4);
Insert Into EngineTable (EngineCylinders) Values (6);
Insert Into EngineTable (EngineCylinders) Values (6);
Insert Into EngineTable (EngineCylinders) Values (8); 
```

-- 现在进行一些测试：

```
Insert Into CarTable (Model, EngineID) Values ('G35x', 3);  -- References the third engine

Insert Into CarTable (Model, EngineID) Values ('Sienna', 13);  -- Invalid FK reference - throws an error

Insert Into CarTable (Model) Values ('M');  -- Leaves null in the engine id field & does NOT throw an error 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-18T00:54:50.713

我认为这场辩论是[对象关系阻抗不匹配](http://en.wikipedia.org/wiki/Object-Relational_impedance_mismatch)的另一个副产品。基于对关系代数语义的更深入理解，一些 DBA 类型会迂腐地说永远不允许在 FK 中出现 null，但应用程序开发人员会争辩说，这会使他们的领域层更加优雅。

“尚未建立”关系的用例是有效的，但是对于空 FK，一些人发现它通过引入更复杂的 SQL 功能（特别是 LEFT JOIN）增加了查询的复杂性。

我见过的一种常见替代解决方案是在 pk=0 或 pk=1 的每个表中引入“空行”或“哨兵行”（基于您的 RDBMS 支持的内容）。这允许您设计一个具有“尚未建立”关系的域层，但也避免引入 LEFT JOIN，因为您保证总会有一些东西可以加入。

当然，这种方法也需要勤奋，因为您基本上是在权衡 LEFT JOIN 以在查询中检查您的哨兵行的存在，因此您不会更新/删除它等。权衡是否合理是另一件事。我倾向于同意仅仅为了避免更高级的连接而重新发明 null 似乎有点愚蠢，但我也在一个应用程序开发人员不会赢得与 DBA 辩论的环境中工作。

**编辑**

我删除了一些“事实问题”的措辞，并试图澄清我所说的“失败”连接是什么意思。@wcoenen 的示例是我个人最常听到的避免空 FK 的原因。并不是他们像“破碎”那样失败，而是失败——有些人会争辩——坚持最少意外的原则。

另外，我把这个回复变成了一个维基，因为我基本上把它从原来的状态砍掉了，并从其他帖子中借来了。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-03-18T03:57:16.673

我强烈支持在外键中使用 NULL 来表示 OLTP 系统中的非父项的论点，但在决策支持系统中它很少能正常工作。最合适的做法是使用特殊的“不适用”（或类似）值作为子记录（在事实表中）可以链接到的父（在维度表中）。

这样做的原因是，向下钻取/跨越等的探索性质可能会导致用户在仅仅询问更多信息时不理解指标如何变化。例如，如果财务数据集市包含产品销售和其他收入来源的组合，则深入到“产品类型”应该将非产品销售相关数据归类，而不是让这些数字从报告中删除，因为没有从事实表到产品维度表的连接。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-18T02:31:13.617

当外键是复合的时，会出现在外键列中允许空值的问题。如果两列之一为空，这意味着什么？另一列是否必须与引用表中的任何内容匹配？使用简单的（单列）外键约束，您可以摆脱空值。

另一方面，如果两个表之间的关系是有条件的（两个实体可以单独存在，但可能几乎巧合地相关），那么最好使用“连接表”对其进行建模 - 包含FK 到被引用的表，另一个到引用表，并且具有自己的主键作为两个 FK 的组合。

作为连接表的示例，假设您的数据库具有俱乐部和人员表。有些人属于某些俱乐部。加入表将是 club_members 并且将包含引用“people”表的人的 FK，并将包含该人所属俱乐部的另一个 FK，并且 person 和 club 标识符的组合将是主键连接表。（连接表的另一个名称是“关联”或“关联”表。）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-18T15:18:47.813

我倾向于一种能够传达该专栏含义的设计。就领域而言，null 可能意味着任何数量的事情。在相关表中输入“不需要”或“未选择”的值至少可以传达目的，而无需询问开发人员或查阅文档。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-03-18T01:20:06.440

假设您需要生成所有客户的报告。每个客户都有一个国家的 FK，国家数据需要包含在报告中。现在假设您允许 FK 为`null`，并执行以下查询：

```
SELECT * FROM customer, country WHERE customer.countryID = country.ID 
```

FK 所在国家/地区的任何客户都`null`将从报告中默默地省略（您需要使用 LEFT JOIN 来修复它）。我发现这不直观且令人惊讶，因此我不喜欢 NULL FK 并在我的数据库模式中避免使用它们。相反，我使用哨兵值，例如特殊的“未知国家”。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-03-18T01:34:12.880

```
CREATE TABLE [tree]
{
    [id] int NOT NULL,
    [parent_id] int NULL
};

ALTER TABLE [tree] ADD CONSTRAINT [FK_tree_tree] FOREIGN KEY([parent_id])
REFERENCES [tree] ([id]); 
```

这没有什么问题！根节点将永远有一个 NULL 父节点，这不是“尚未建立”关系的情况。在这里加入也没有问题。

让根节点指向自己作为父节点以避免 NULL FK 或任何其他创造性解决方法，这意味着现实世界不再在数​​据库中准确建模。

没有人提到的一个潜在问题是包含大量 NULL 值的列的索引性能。不过，这本身与外键问题无关，但它会使连接性能不佳。

我确实理解，如果您是使用具有数亿行的超大型数据库的 DBA，您不会想要 NULL 外键，因为它们根本不会执行。然而，事实是，大多数开发人员在他们的一生中永远不会使用如此大的数据库，而今天的数据库可以用几十万行来处理这种情况。强调一个（可怜的）比喻，我们大多数人都不驾驶 F1 赛车，而我妻子雅阁的自动变速器可以很好地完成它需要做的事情（或者至少，它曾经是，直到几周前它坏了...）。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-03-18T15:43:05.603

如果您将 NULL 分配给业务原因，那么您实际上是在重新定义 NULL 在您的域中的含义，并且必须为用户和未来的开发人员记录下来。如果将 NULL 作为外键是出于业务原因，那么我建议您按照其他人提到的那样做，并添加一个连接记录，该记录的值类似于“N/A”或“未分配”。

此外，当您的数据库中的 NULL 现在变成多种含义（业务含义、错误或未正确输入）时，可能会出现复杂情况，这可能会导致问题更难以追踪。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-03-18T00:20:08.987

如果该字段可以为空，我认为空值没有问题。当该字段中应该有信息时，滥用是允许空值。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-03-18T00:58:49.613

你答对了。对于 FK，NULL 表示没有值（表示没有关系）。如果 FK 中有一个值，它必须与它引用的 PK 中的一个值完全匹配。

允许这样做不一定是糟糕的设计。如果关系是一对多且可选的，则可以在一侧向表中添加 FK，在多侧引用 PK。

如果关系是多对多的，则它需要一个自己的表，称为联结表。该表有两个 FK，每个 FK 引用其中一个相关表中的一个 PK。在这种情况下，可以通过简单地从联结表中省略整行来表示省略的关系。

有些人的设计是为了避免允许 NULLS 的必要性。这些人将使用联结表进行多对一关系，并在省略关系时省略一行，如上所述。

我自己并没有遵循这种做法，但它确实有一定的好处。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2011-03-02T16:18:30.763

我不得不说，即使这显然是可能的，按照 Jonathon Leffler 的观点，使用连接表有什么问题？

我遇到了这个问题，因为我有完全相同的需求，但我的设计现在明显“更干净”了一个连接表。我的数据库图现在清楚地向我展示了我的字段是可选的，从模式 POV 对我来说效果很好。

然后为了简化我的查询，我只是创建了一个视图 LEFT JOINing 这两个表，这看起来像是一个可选的连接，但实际上使用了更清晰的数据库结构。在我看来，也使用 ISNULL(MyField, 'None') 可以提供“不存在”附加行设计的好处，但没有痛苦。

考虑到这里提到的要点，我和 DBA 一起讨论这个问题——当你可以有一个更“稳固”的关系时，为什么还要有一个空列，使视图更容易使用？而且也不需要真正的额外努力。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-03-18T00:08:29.843

连接表是正确的方法。

键中的空值表示糟糕的数据库设计。

空值**不是未**分配/空/空白/等，它是丢失/未知数据。

在外键字段中使用空值并不意味着“没有关系”，它意味着“我不知道是否存在关系”——这显然很糟糕。

# c - 如何在 C 中覆盖标准输出

> ID：656504
> 
> 赞同：34
> 
> 时间：2009-03-18T00:09:35.253
> 
> 标签：c, terminal, console, stdout

在大多数现代 shell 中，您可以点击向上和向下箭头，它会在提示符下显示您之前执行的命令。我的问题是，这是如何工作的？！

在我看来，shell 以某种方式操纵 stdout 以覆盖它已经编写的内容？

我注意到像 wget 这样的程序也可以做到这一点。有人知道他们是怎么做到的吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2009-03-18T00:18:13.313

它不是在操作标准输出——它是在覆盖终端已经显示的字符。

试试这个：

```
#include <stdio.h>
#include <unistd.h>
static char bar[] = "======================================="
                    "======================================>";
int main() {
    int i;
    for (i = 77; i >= 0; i--) {
        printf("[%s]\r", &bar[i]);
        fflush(stdout);
        sleep(1);
    }
    printf("\n");
    return 0;
} 
```

这非常接近`wget`'s 的输出，对吧？ `\r`是一个回车，终端将其解释为“将光标移回当前行的开头”。

你的 shell（如果是的话`bash`）使用[GNU Readline 库](http://directory.fsf.org/project/readline/)，它提供了更通用的功能，包括检测终端类型、历史管理、可编程键绑定等。

还有一件事——当你有疑问时，你的 wget、你的 shell 等的源代码都是可用的。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-03-18T00:17:32.333

要覆盖当前标准输出行（或它的一部分），请使用`\r`（或`\b`。）特殊字符`\r`（回车）会将插入符号返回到行首，允许您覆盖它。特殊字符`\b`只会将插入符号带回一个位置，允许您覆盖最后一个字符，例如

```
#include <stdio.h>
#include <unistd.h>

int i;
const char progress[] = "|/-\\";

for (i = 0; i < 100; i += 10) {
  printf("Processing: %3d%%\r",i); /* \r returns the caret to the line start */
  fflush(stdout);
  sleep(1);
}
printf("\n"); /* goes to the next line */
fflush(stdout);

printf("Processing: ");
for (i = 0; i < 100; i += 10) {
  printf("%c\b", progress[(i/10)%sizeof(progress)]); /* \b goes one back */
  fflush(stdout);
  sleep(1);
}
printf("\n"); /* goes to the next line */
fflush(stdout); 
```

使用`fflush(stdout);`因为[标准输出通常是缓冲](http://www.opengroup.org/onlinepubs/000095399/functions/fflush.html)的，否则信息可能不会立即打印在输出或终端上

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-03-18T00:20:38.190

除了 \r 和 \b 之外，请查看[ncurses](http://linux.die.net/man/3/ncurses)以对控制台屏幕上的内容进行一些高级控制。（包括列，随意移动等）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-18T01:03:14.173

在文本终端/控制台中运行的程序可以以各种方式操作在其控制台中显示的文本（使文本变为粗体、移动光标、清除屏幕等）。这是通过打印特殊字符序列来完成的，称为[“转义序列”](http://en.wikipedia.org/wiki/Escape_sequence)（因为它们通常以 Escape，ASCII 27 开头）。

如果 stdout 进入一个能够理解这些转义序列的终端，终端的显示将相应地改变。

如果您将 stdout 重定向到文件，转义序列将出现在文件中（这通常不是您想要的）。

转义序列没有完整的标准，但大多数终端使用[VT100](http://en.wikipedia.org/wiki/VT100)引入的序列，并有很多扩展。这是 Unix/Linux 下的大多数终端（xterm、rxvt、konsole）和 PuTTY 等其他终端所理解的。

在实践中，您不会直接将转义序列硬编码到您的软件中（尽管您可以），而是使用库来打印它们，例如上面提到的[ncurses](http://en.wikipedia.org/wiki/Ncurses)或[GNU readline](http://en.wikipedia.org/wiki/GNU_readline)。这允许与不同的终端类型兼容。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-18T00:14:02.713

它是用[readline](http://tiswww.case.edu/php/chet/readline/rltop.html)库完成的......我不确定它在幕后是如何工作的，但我认为它与 stdout 或流没有任何关系。我怀疑 readline 使用了某种神秘的（至少对我而言）终端命令——也就是说，它与实际显示你的 shell 会话的终端程序合作。我不知道您是否可以仅通过打印输出来获得类似 readline 的行为。

（想一想：stdout 可以重定向到文件，但上/下箭头键的技巧不适用于文件。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-18T00:17:50.863

您可以使用回车来模拟这一点。

```
#include <stdio.h>

int main(int argc, char* argv[])
{
    while(1)
    {
        printf("***********");
        fflush(stdout);
        sleep(1);
        printf("\r");
        printf("...........");
        sleep(1);
    }

    return 0;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-18T00:26:10.890

该程序通过打印终端以特殊方式解释的特殊字符来做到这一点。最简单的版本是（在大多数 linux/unix 终端上）将 '\r' （回车）打印到普通标准输出，它将光标位置重置为当前行的第一个字符。所以你接下来写的东西会覆盖你之前写的那行。例如，这可用于简单的进度指示器。

```
int i = 0;
while (something) {
  i++;
  printf("\rprocessing line %i...", i);
  ...
} 
```

但是还有更复杂的转义字符序列，它们以各种方式解释。各种事情都可以用它来完成，比如将光标定位在屏幕上的特定位置或设置文本颜色。是否或如何解释这些字符序列取决于您的终端，但大多数终端支持的通用类是[ansi 转义序列](http://www.termsys.demon.co.uk/vtansi.htm)。因此，如果您想要红色文本，请尝试：

```
printf("Text in \033[1;31mred\033[0m\n"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-18T00:21:16.863

最简单的方法是将回车符 ('\r') 打印到标准输出。

光标将移动到行首，允许您覆盖其内容。

# internet-explorer - 从 Windows 服务启动 IE（或多或少）

> ID：656508
> 
> 赞同：1
> 
> 时间：2009-03-18T00:10:32.397
> 
> 标签：internet-explorer, cruisecontrol.net, watin, fitnesse

我想将 CruiseControl.net 用作服务，并让它启动 Fitnesse 测试运行器作为一项任务，以使用启动 IE 的 watin 夹​​具运行一堆验收测试。哦，我想在虚拟服务器上完成这一切。

如果我没有将 CC.Net 作为服务运行（即通过远程桌面登录服务器并从桌面启动 CCNet.exe），上述所有操作都可以正常工作。

我很确定仅仅将 CC.Net 服务标记为“允许与桌面交互”是不够的（它是一个虚拟服务器，所以甚至可能没有 winstation0）。虽然我没有特别尝试过这个（过去我尝试将 Fitnesse 作为服务运行，但它无法通过 watin 固定装置启动 IE ......所以我非常有信心更多“允许与桌面交互”将是需要）。

我想我需要一个 .exe 可以创建一个 winstation，以特定用户身份登录，然后启动 IE（实际上可能只是一个 shellexecute，所以我不会仅限于 ie）。

过去有没有人做过类似的事情？有什么具体的陷阱吗？这值得做......还是我应该只做一个远程桌面然后断开连接？

请注意，这里的总体目标是拥有一个**可靠**的CC.Net 进程，该进程调用 Fitnesse，而后者又调用 IE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-01T13:33:09.213

根据我的经验，您需要有人在控制台上登录，才能从服务启动 IE。

如果这是在安全位置的服务器上运行，您可以将其设置为自动登录，如本文所述[http://support.microsoft.com/kb/324737](http://support.microsoft.com/kb/324737)

如果你想更聪明一点，你可以设置一个自动启动任务，它也会在启动时锁定机器。[http://forums.techarena.in/windows-xp-support/621461.htm](http://forums.techarena.in/windows-xp-support/621461.htm)

我发现的唯一例外是 SWEA ( [http://webiussoft.com/)“SWEA](http://webiussoft.com/)自动化 Web 浏览器并为功能测试和回归测试自动化提供解决方案。”

我们在运行 CruiseControl.NET 作为服务的构建服务器上运行 SWEA 测试。

我不知道为什么 SWEA 可以作为服务工作，而其他任何东西都不能:-(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-03T14:38:58.217

您还可以从命令行运行 CC.Net（而不是将其作为服务运行）。效果很好。

# ftp - 如何使用 awstats 生成 FTP 流量报告？

> ID：656517
> 
> 赞同：0
> 
> 时间：2009-03-18T00:16:17.297
> 
> 标签：ftp, traffic, awstats

我想使用 /var/logs/xferlog 生成一份报告，显示特定用户在特定月份的流量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-18T00:22:23.567

首先您配置您的日志文件设置，然后您可以正常使用 awstats 处理 FTP 文件，就像您监控常规 http 流量一样。

[http://awstats.sourceforge.net/docs/awstats_faq.html#FTP](http://awstats.sourceforge.net/docs/awstats_faq.html#FTP)

希望能帮助到你。

# eclipse - 真实世界的 QVT

> ID：656522
> 
> 赞同：3
> 
> 时间：2009-03-18T00:18:28.150
> 
> 标签：eclipse, mda

QVT（查询视图转换）是模型到模型转换语言的 OMG 规范。一些工具已经实现了它（Eclipse、androMDA）。我想知道它是否真的用于现实世界的案例。它会起飞并被用来解决现实世界的问题吗？有人使用 QVT 语言吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T03:24:27.127

通过观察我们自己项目的 MDD 社区，我猜 QVT 最终会兴起。目前 ATL 和 Kermeta 似乎很受欢迎，而且从小组中的帖子来看，不仅在学术界。

现在有一个声明式 QVT 的实现（请参阅 M2M Eclipse 组的公告），这对我们来说将非常有趣。我们一直在使用 ModelMorf 原型，但它只是一个原型，而且周转时间非常长。我希望通过将 dQVT 集成到 Eclipse 工具链中，我们能够将它用于我们自己的项目（一个 SoftEng 工具，请参阅[http://rcos.iist.unu.edu](http://rcos.iist.unu.edu)，抱歉，当然是学术 :) .

我想手工/人力进行模型驱动开发的痛苦还不够高……一旦工具真正提高了生产力的数量级，那将会改变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-07T22:30:42.933

似乎 QVT 正在用于模型驱动安全应用程序。由于明确定义的语义和可证明性，这是一个不错的选择。然而，这仍然是研究。法国电信正在试验 QVT。他们希望将其用于数据库迁移和应用程序的生成方法。

[http://smartqvt.elibel.tm.fr/events/QVT%20Experimentations%20at%20France%20Telecom.pdf](http://smartqvt.elibel.tm.fr/events/QVT%20Experimentations%20at%20France%20Telecom.pdf) [http://ieeexplore.ieee.org/xpl/freeabs_all.jsp?arnumber=4159881](http://ieeexplore.ieee.org/xpl/freeabs_all.jsp?arnumber=4159881)

# asp.net - 获得项目反馈的好网站？

> ID：656524
> 
> 赞同：2
> 
> 时间：2009-03-18T00:19:36.803
> 
> 标签：asp.net, project-management, feedback, user-feedback

我有一个我一直在业余时间从事的个人项目。它还远未完成，但我希望得到有关 UI 和迄今为止实现它的功能的反馈。哪里是获得有用反馈而又不会因为与网站目的无关的帖子而受到迫害的好地方？

该项目是一个网站。我没有发布链接，所以人们不认为这是垃圾邮件。如果有评论要求，将添加链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T06:37:23.743

我建议您在[Hacker News](http://news.ycombinator.com/news)上对您的网站进行评论。该网站由[Paul Graham](http://en.wikipedia.org/wiki/Paul_Graham)创建和维护，他还创立了[Y Combinator](http://en.wikipedia.org/wiki/Y_Combinator)，该公司专注于帮助初创公司处于早期阶段。因此，Hacker News 被一个专注于任何与创业相关的社区阅读，因此非常乐于批评和审查新网站。

当你[提交你的评论请求](http://news.ycombinator.com/submit)时，你可能应该这样写你的帖子标题：

> 问 HN：请查看我的网站 [我的网站]

并描述一下它的意图。

（这是一个最近的例子：[询问 HN：查看我的最新网站](http://news.ycombinator.com/item?id=491556)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T00:22:52.803

我认为软件业务论坛是一个很好的地方。

[乔尔关于软件讨论](http://discuss.joelonsoftware.com/?biz)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-08-12T19:59:19.733

我还建议您向您的网站添加带有内容突出显示功能的[反馈表。](http://userthought.com/information/fully_customizable_feedback_form)

所有功能只需要更改 1 行 HTML。

**内容突出显示**功能将允许您的用户准确选择他们想要描述或指向反馈消息的内容。

**丰富的反馈分析**将帮助您了解用户希望从您的服务中获得什么。

希望这可以帮助。

# perl - 有没有更好的方法来确定 Perl 中经过的时间？

> ID：656537
> 
> 赞同：50
> 
> 时间：2009-03-18T00:24:43.483
> 
> 标签：perl, time

```
my $start_time = [Time::HiRes::gettimeofday()];
my $diff = Time::HiRes::tv_interval($start_time);

print "\n\n$diff\n"; 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2009-03-18T00:29:09.823

可能。取决于您所说的“更好”是什么意思。

**如果您在功能方面**要求“更好”的解决方案，那么这就是它。

如果您**在“不那么尴尬”表示法的意义上**要求“更好” ，那么请知道，在标量上下文中，`Time::HiRes::gettimeofday()`将返回自纪元以来的浮动秒数（小数部分表示微秒），就像[`Time::HiRes::time()`](http://perldoc.perl.org/Time/HiRes.html)（这是一个很好的下降- 替代标准`time()`功能。）

```
my $start_time = Time::HiRes::gettimeofday();
...
my $stop_time = Time::HiRes::gettimeofday();
printf("%.2f\n", $stop_time - $start_time); 
```

或者：

```
use Time::HiRes qw( time );

my $begin_time = time();
...
my $end_time = time();
printf("%.2f\n", $end_time - $begin_time); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-03-18T02:37:00.953

取决于你在做什么。如果你想测量挂钟时间（已经过去的实际时间量），你就再好不过了。如果您想测量计算机执行某项操作的时间，那么您可能需要查看[`times`](http://perldoc.perl.org/functions/times.html)函数或[`time`](http://opengroup.org/onlinepubs/007908799/xcu/time.html)命令。Perl 中的`times`函数在您的代码中返回此进程的当前累积时间列表以及您正在使用的任何模块的代码、系统调用中的此进程、用户代码中此进程的所有子进程以及用户代码中此进程的所有子进程的列表。系统调用。

```
#!/usr/bin/perl

use strict;
use warnings;
use Time::HiRes;

my $start_time = [Time::HiRes::gettimeofday()];
.
.
.
my ($user, $system, $child_user, $child_system) = times;
print "wall clock time was ", Time::HiRes::tv_interval($start_time), "\n",
    "user time for $$ was $user\n",
    "system time for $$ was $system\n",
    "user time for all children was $child_user\n",
    "system time for all children was $child_system\n"; 
```

UNIX 中的`time`命令功能类似。你运行这样的命令

```
time ./script.pl 
```

它输出这样的东西

```
real    0m0.692s
user    0m0.019s
sys     0m0.109s 
```

其中 real 是挂钟时间，user 和 sys 与上面的 user 和 system 相同。

该`time`命令更易于人类使用，但该`times`功能为您提供了更多信息并且更容易融入计算机程序（此外，它还具有在程序仍在运行时产生结果的好处）。

哦，我忘了提`$^T`。这个变量以秒为单位保存程序的开始时间，所以如果你只关心秒的粒度，你可以说

```
END { print "The program ran for ", time() - $^T, " seconds\n" } 
```

靠近程序顶部。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T00:28:37.890

差不多就是这样 - 这将为您提供高分辨率的经过时间。当然，除非有人弄乱了系统时钟。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-24T18:46:18.917

这对于服务中的计时很有用，粒度为一秒：

一开始...

```
$debugtimer = time;
$debugstr = ""; 
```

......你喜欢的任何地方......

```
kerchunk("message") # message is short description of location in code 
```

...程序结束...

```
print "timings: $debugstr"; 
```

...和你的潜艇：

```
sub kerchunk
{
    my ($msg) = shift;
    my $pertock = time;
    my $kch = abs($debugtimer - $pertock);
    $debugstr .= "Elapsed at $msg: $kch<br>\n";
} 
```

# java - 抽象继承和泛型（带扑克牌）

> ID：656539
> 
> 赞同：2
> 
> 时间：2009-03-18T00:25:34.950
> 
> 标签：java, generics, inheritance, abstract

所以，我一直在研究 Java 中的一些扑克牌。（实际上不是为了任何实际目的，我只是喜欢打牌，它们是很好的练习）现在，现在，我正在制作一些卡片结构、套牌、手牌、牌堆等。它们本质上都是一样的，所以我想我想使用一些继承。

我遇到的问题是每个结构的核心是某种类型的集合，但它们并不都使用相同的集合类型。甲板使用堆栈，因为甲板本质上最常用作堆栈。但是，一只手使用 ArrayList（如果有比 ArrayList 更有效的东西可以使用，那也很高兴知道）。因此，在尝试编写抽象类时，我想避免使用抽象方法（因为它违背了创建抽象类以节省代码的最初目的）。但是，出于显而易见的原因，所有这些方法都依赖于核心集合，但我不知道集合是什么类型。这是我迄今为止尝试过的：

```
public abstract class CardSet
{
    protected AbstractCollection<Card> elCollection;
    public CardSet()
    {
        super();
    }
    public CardSet(Card[] cards)
    {
        super();   
        for(Card c: cards)
            elCollection.add(c);

    }
    public void add(Card c)
    {
        elCollection.add(c);
    }
}
public class Pair extends CardSet  //Pair is just a dummy class to get inheritance right
{
     ArrayList<Card> elPair;
     public Pair()
     {
         elPair = new ArrayList<Card>();  //elPair is defined, because casting
         elCollection = elPair;  // elCollection to arraylist would be a pain.

     }
     public Pair(Card[] cards)
     { this();
       super(cards);
     } 
} 
```

首先，请原谅我的变量名。我曾经将所有东西都命名为“theVariable”，但我认为使用“el”更有趣。（您必须以某种方式自娱自乐，对吗？）此外，使用 protected 只是为了简单起见。

现在，一般的想法似乎可行，在抽象类中定义一个变量，然后在子类中定义它的别名，但我不太确定这是一个很好的做法。我遇到的真正问题是构造函数。Pair 中接受卡片数组的构造函数不起作用，因为要添加卡片，我首先需要在父构造函数尝试添加卡片之前创建集合（在本例中为 ArrayList）。有没有办法解决这个问题？这甚至是处理继承的可行方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T02:40:16.920

我认为您最大的问题是您只是在没有任何实际要求的情况下创建这些类。继承在这里真的是正确的选择吗？感觉就像您正在设计类以适应预先设想的实现，而不是相反。

根据实际需求为您需要的每个类定义接口，实现它们，然后查看抽象基类是否有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T00:35:31.650

只需让每个实现在构造函数中传递集合类型：

```
public abstract class CardSet<C extends Collection<Card>>
{
    protected final C elCollection;
    public CardSet<Collection<Card>> cardSet()
    {
        return new CardSet<Collection<Card>>(new ArrayList<Card>());
    }
    public CardSet(C col){
        this.elCollection = col;
    }
    public CardSet(C col, Card[] cards)
    {
        this(col);
        for(Card c: cards)
            elCollection.add(c);
    }
    public void add(Card c)
    {
        elCollection.add(c);
    }
}
public class Pair extends CardSet<List<Card>> 
{
    public Pair()
    {
        super(new ArrayList<Card>());

    }
    public Pair(Card[] cards)
    { 
        super(new ArrayList<Card>(), cards);
    } 
} 
```

您可能需要对声明进行一些操作，但这应该是正确的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T00:36:18.153

我会给出一个快速（hackish？）的答案：你可以做的是`protected abstract Collection<Card> createCollection()`在基类中定义一个方法，`CardSet`. 您的子类将覆盖它以创建并返回适合该子类的任何类型的集合。然后超类构造函数将使用该方法创建集合，之后它可以继续添加卡片：

```
public CardSet(Card[] cards) {
    super();
    self.elCollection = createCollection();
    Collections.addAll(self.elCollection, cards);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T01:45:13.743

我在这里的感觉是你试图用继承做两件不同的事情，所以看起来很混乱 -

一方面，你有一套卡片的概念。这将有一组卡片。所以首先我们知道我们有这个：

```
public abstract class CardSet {
    protected Collection<Card> cards;
} 
```

在这一点上，你的类*应该*是不同的，因为到目前为止我们所拥有的是常见行为的范围（好吧，我们可能会有一些额外的方法，比如 size()、nextCard()、isEmpty() 等，很容易在受保护的集合上定义，但现在不用管那些了）。

使用您自己的示例

```
 public class Deck extends CardSet {
      public Deck (){
        cards = new Stack<Card>();
     }

     public void shuffle() { ... }
}

public class Hand extends CardSet {
    public Hand(){
       //i'm using a set here instead of the list in your example because I 
      // don't think ordering is a property of a hand.
      cards = new HashSet<Card>();
    }
}
public class Pair extends CardSet {
...
} 
```

这里的 cardSet 有不同的种类。它们是分开的，因为它们被期望表现不同，并代表这些类型的集合从卡组的广义概念中具有的附加行为。尝试将额外的代码硬塞到抽象父级中可能会节省几行代码，但最终会混淆。

# .net - Windows 工作流延迟活动序列化错误

> ID：656540
> 
> 赞同：1
> 
> 时间：2009-03-18T00:26:09.457
> 
> 标签：.net, sharepoint, workflow-foundation

我在 SharePoint 中托管了一个状态机工作流，其中一个状态有延迟活动。当计时器触发延迟活动时，我收到一个序列化错误：“Engine RunWorkflow：System.Runtime.Serialization.SerializationException：无法获取成员'SendEmail_MethodInvoking'”。

此错误引用的方法不在同一状态，并且在工作流正常调用它时可以正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-03T11:40:10.410

重新启动“windows SharePoint 计时器服务”。根本原因是，只要您有延迟活动的工作流，该事件就会由服务（SPTimerV3）触发，在它触发之前，它必须从其 bin 或 GAC 加载程序集，只有一个文件（模块加载) 基于 workflow.xml 文件加载中指定的程序集信息。

在更改工作流活动后部署新的二进制文件，SPTimerV3 不知道新添加的二进制文件；除非您进行时间重置，否则它不会重新加载它。除非您进行重置，否则持久性（序列化或反序列化）或程序集的加载将由于类型不匹配而失败。

# c - 修剪C中的字符串

> ID：656542
> 
> 赞同：27
> 
> 时间：2009-03-18T00:26:45.010
> 
> 标签：c, winapi, string

简要地：

我`String.Trim`在 C 中使用 win32 和标准 C api （使用 MSVC2008 编译，因此如果需要我可以访问所有 C++ 的东西，但我只是想修剪一个.NET `char*`）。

鉴于有`strchr`,`strtok`和各种其他字符串函数，当然应该有一个 trim 函数，或者一个可以重新利用的函数......

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-03-18T00:36:14.207

没有标准的库函数可以做到这一点，但自己动手并不难。SO上有一个关于这样做的[现有问题，该问题已通过源代码得到解答。](https://stackoverflow.com/questions/122616/painless-way-to-trim-leadingtrailing-whitespace-in-c)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-09-16T06:05:39.723

This made me want to write my own - I didn't like the ones that had been provided. Seems to me there should be 3 functions.

```
char *ltrim(char *s)
{
    while(isspace(*s)) s++;
    return s;
}

char *rtrim(char *s)
{
    char* back = s + strlen(s);
    while(isspace(*--back));
    *(back+1) = '\0';
    return s;
}

char *trim(char *s)
{
    return rtrim(ltrim(s)); 
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-03-18T00:35:34.770

您可以使用 ctype.h 中的标准[isspace()](http://www.cplusplus.com/reference/clibrary/cctype/isspace.html)函数来实现这一点。只需比较字符数组的开始和结束字符，直到两端不再有空格。

“空格”包括：

> ' ' (0x20) 空间 (SPC)
> 
> '\t' (0x09) 水平制表符 (TAB)
> 
> '\n' (0x0a) 换行符 (LF)
> 
> '\v' (0x0b) 垂直制表符 (VT)
> 
> '\f' (0x0c) 馈送 (FF)
> 
> '\r' (0x0d) 回车 (CR)

尽管没有可以为您完成所有工作的函数，但您必须推出自己的解决方案来反复比较给定字符数组的每一侧，直到没有空格。

**编辑：**

由于您可以使用 C++，Boost 有[一个精简的实现](http://www.boost.org/doc/libs/1_38_0/doc/html/string_algo/usage.html#id4001757)等着您，让您的生活更轻松。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-03-18T09:18:30.627

Surprised to see such implementations. I usually do trim like this:

```
char *trim(char *s) {
    char *ptr;
    if (!s)
        return NULL;   // handle NULL string
    if (!*s)
        return s;      // handle empty string
    for (ptr = s + strlen(s) - 1; (ptr >= s) && isspace(*ptr); --ptr);
    ptr[1] = '\0';
    return s;
} 
```

It is fast and reliable - serves me many years.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-08-26T21:23:01.333

```
/* Function to remove white spaces on both sides of a string i.e trim */

void trim (char *s)
{
    int i;

    while (isspace (*s)) s++;   // skip left side white spaces
    for (i = strlen (s) - 1; (isspace (s[i])); i--) ;   // skip right side white spaces
    s[i + 1] = '\0';
    printf ("%s\n", s);
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2011-01-06T09:54:48.690

```
#include "stdafx.h"
#include <string.h>
#include <ctype.h>

char* trim(char* input);

int _tmain(int argc, _TCHAR* argv[])
{
    char sz1[]="  MQRFH  ";
    char sz2[]=" MQRFH";
    char sz3[]="  MQR FH";
    char sz4[]="MQRFH  ";
    char sz5[]="MQRFH";
    char sz6[]="M";
    char sz7[]="M ";
    char sz8[]=" M";
    char sz9[]="";
    char sz10[]="        ";

    printf("sz1:[%s] %d\n",trim(sz1), strlen(sz1));
    printf("sz2:[%s] %d\n",trim(sz2), strlen(sz2));
    printf("sz3:[%s] %d\n",trim(sz3), strlen(sz3));
    printf("sz4:[%s] %d\n",trim(sz4), strlen(sz4));
    printf("sz5:[%s] %d\n",trim(sz5), strlen(sz5));
    printf("sz6:[%s] %d\n",trim(sz6), strlen(sz6));
    printf("sz7:[%s] %d\n",trim(sz7), strlen(sz7));
    printf("sz8:[%s] %d\n",trim(sz8), strlen(sz8));
    printf("sz9:[%s] %d\n",trim(sz9), strlen(sz9));
    printf("sz10:[%s] %d\n",trim(sz10), strlen(sz10));

    return 0;
}

char *ltrim(char *s) 
{     
    while(isspace(*s)) s++;     
    return s; 
}  

char *rtrim(char *s) 
{     
    char* back;
    int len = strlen(s);

    if(len == 0)
        return(s); 

    back = s + len;     
    while(isspace(*--back));     
    *(back+1) = '\0';     
    return s; 
}  

char *trim(char *s) 
{     
    return rtrim(ltrim(s));  
} 
```

* * *

Output:

```
sz1:[MQRFH] 9
sz2:[MQRFH] 6
sz3:[MQR FH] 8
sz4:[MQRFH] 7
sz5:[MQRFH] 5
sz6:[M] 1
sz7:[M] 2
sz8:[M] 2
sz9:[] 0
sz10:[] 8 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-03-17T00:38:53.603

I like it when the return value always equals the argument. This way, if the string array has been allocated with `malloc()`, it can safely be `free()` again.

```
/* Remove leading whitespaces */
char *ltrim(char *const s)
{
        size_t len;
        char *cur;

        if(s && *s) {
                len = strlen(s);
                cur = s;

                while(*cur && isspace(*cur))
                        ++cur, --len;

                if(s != cur)
                        memmove(s, cur, len + 1);

        }

        return s;
}

/* Remove trailing whitespaces */
char *rtrim(char *const s)
{
        size_t len;
        char *cur;

        if(s && *s) {
                len = strlen(s);
                cur = s + len - 1;

                while(cur != s && isspace(*cur))
                        --cur, --len;

                cur[isspace(*cur) ? 0 : 1] = '\0';
        }

        return s;
}

/* Remove leading and trailing whitespaces */
char *trim(char *const s)
{
        rtrim(s);  // order matters
        ltrim(s);

        return s;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-10-31T15:30:17.483

```
void ltrim(char str[PATH_MAX])
{
        int i = 0, j = 0;
        char buf[PATH_MAX];
        strcpy(buf, str);
        for(;str[i] == ' ';i++);

        for(;str[i] != '\0';i++,j++)
                buf[j] = str[i];
        buf[j] = '\0';
        strcpy(str, buf);
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-03-16T03:13:06.737

```
static inline void ut_trim(char * str) {
   char * start = str;
   char * end = start + strlen(str);

   while (--end >= start) {   /* trim right */
      if (!isspace(*end))
         break;
   }
   *(++end) = '\0';

   while (isspace(*start))    /* trim left */
      start++;

   if (start != str)          /* there is a string */
      memmove(str, start, end - start + 1);
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-03-27T21:45:51.860

How about this... It only requires one iteration over the string (doesn't use strlen, which iterates over the string). When the function returns you get a pointer to the start of the trimmed string which is null terminated. The string is trimmed of spaces from the left (until the first character is found). The string is also trimmed of all trailing spaces after the last nonspace character.

```
char* trim(char* input) {
    char* start = input;
    while (isSpace(*start)) { //trim left
        start++;
    }

    char* ptr = start;
    char* end = start;
    while (*ptr++ != '\0') { //trim right
        if (!isSpace(*ptr)) { //only move end pointer if char isn't a space
            end = ptr;
        }
    }

    *end = '\0'; //terminate the trimmed string with a null
    return start;
}

bool isSpace(char c) {
    switch (c) {
        case ' ':
        case '\n':
        case '\t':
        case '\f':
        case '\r':
            return true;
            break;
        default:
            return false;
            break;
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-04-12T06:29:02.360

```
/* iMode 0:ALL, 1:Left, 2:Right*/
char* Trim(char* szStr,const char ch, int iMode)
{
    if (szStr == NULL)
        return NULL;
    char szTmp[1024*10] = { 0x00 };
    strcpy(szTmp, szStr);
    int iLen = strlen(szTmp);
    char* pStart = szTmp;
    char* pEnd = szTmp+iLen;
    int i;
    for(i = 0;i < iLen;i++){
        if (szTmp[i] == ch && pStart == szTmp+i && iMode != 2)
            ++pStart;
        if (szTmp[iLen-i-1] == ch && pEnd == szTmp+iLen-i && iMode != 1)
            *(--pEnd) = '\0';
    }
    strcpy(szStr, pStart);
    return szStr;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2011-05-03T00:36:14.560

Here's my implementation, behaving like the built-in string functions in libc (that is, it expects a c-string, it modifies it and returns it to the caller).

It trims leading spaces & shifts the remaining chars to the left, as it parses the string from left to right. It then marks a new end of string and starts parsing it backwards, replacing trailing spaces with '\0's until it finds either a non-space char or the start of the string. I believe those are the minimum possible iterations for this particular task.

```
// ----------------------------------------------------------------------------
// trim leading & trailing spaces from string s (return modified string s)
// alg:
// - skip leading spaces, via cp1
// - shift remaining *cp1's to the left, via cp2
// - mark a new end of string
// - replace trailing spaces with '\0', via cp2
// - return the trimmed s
//
char *s_trim(char *s)
{
    char *cp1;                              // for parsing the whole s
    char *cp2;                              // for shifting & padding

    // skip leading spaces, shift remaining chars
    for (cp1=s; isspace(*cp1); cp1++ )      // skip leading spaces, via cp1
        ;
    for (cp2=s; *cp1; cp1++, cp2++)         // shift left remaining chars, via cp2
        *cp2 = *cp1;
    *cp2-- = 0;                             // mark new end of string for s

    // replace trailing spaces with '\0'
    while ( cp2 > s && isspace(*cp2) )
        *cp2-- = 0;                         // pad with '\0's

    return s;
} 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2013-12-18T22:09:21.930

Not the best way but it works

```
char* Trim(char* str)
{
    int len = strlen(str);
    char* buff = new char[len];
    int i = 0;
    memset(buff,0,len*sizeof(char));
    do{
        if(isspace(*str)) continue;
        buff[i] = *str; ++i;
    } while(*(++str) != '\0');
    return buff;
} 
```

* * *

## 回答 #14

> 赞同：-4
> 
> 时间：2010-02-14T20:10:12.947

```
void inPlaceStrTrim(char* str) {
    int k = 0;
    int i = 0;
    for (i=0; str[i] != '\0';) {
        if (isspace(str[i])) {
            // we have got a space...
            k = i;
            for (int j=i; j<strlen(str)-1; j++) {
                str[j] = str[j+1];
            }
            str[strlen(str)-1] = '\0';
            i = k; // start the loop again where we ended..
        } else {
            i++;
        }
    }
} 
```

* * *

## 回答 #15

> 赞同：-6
> 
> 时间：2009-03-18T00:43:42.473

最简单的事情是一个简单的循环。我将假设您希望将修剪后的字符串返回到位。

```
char *
strTrim(char * s){
    int ix, jx;
    int len ;
    char * buf 
    len = strlen(s);  /* possibly should use strnlen */
    buf = (char *) malloc(strlen(s)+1);

    for(ix=0, jx=0; ix < len; ix++){
       if(!isspace(s[ix]))
          buf[jx++] = s[ix];

    buf[jx] = '\0';
    strncpy(s, buf, jx);  /* always looks as far as the null, but who cares? */
    free(buf);            /* no good leak goes unpunished */
    return s;             /* modifies s in place *and* returns it for swank */
 } 
```

这也消除了嵌入的空白，如果 String.Trim 没有，那么它需要更多的逻辑。

# wpf - 是否可以“刷新”WPF 数据绑定

> ID：656552
> 
> 赞同：4
> 
> 时间：2009-03-18T00:31:00.270
> 
> 标签：wpf, data-binding, binding, refresh

我有一个 xaml TabControl，在一页上，有 3 个 RadioButtons，每个 RadioButtons 绑定到相邻 ListView 的选定值上的不同属性。在 ListView 中的选定项目之间切换后，我的单选按钮似乎忘记了它们已绑定并且不刷新。

所以在调试器中观察它，当我切换到一个新的选定项目时，我看到非用户代码首先检查所有 3 个属性的值，然后只检查前两个，最后只检查第一个。但是，如果我更改选项卡并改回来，它似乎又给了我一些用途。

绑定本身相当简单。bool 属性与 IsChecked 的双向绑定。它有 4 层深（Path=DataModel.Selected.AB），但我有其他相同深度的东西可以正常工作。

这是人们听说过并知道可能发生的事情吗？或者，如果绑定以某种方式被遗忘，有没有办法明确提醒 xaml？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-18T00:51:32.453

可以像这样手动更新绑定：

```
TestCheckBox
    .GetBindingExpression(CheckBox.IsCheckedProperty)
    .UpdateTarget(); 
```

话虽如此，我没有 100% 的信心认为这会纠正您的根本问题。我以前没有遇到过 WPF 绑定的此类问题，但我在选项卡控件方面遇到了一些*奇怪的问题。*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-18T01:33:25.847

这显然是一个已知问题：

[http://social.msdn.microsoft.com/forums/en-US/wpf/thread/8eb8280a-19c4-4502-8260-f74633a9e2f2/](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/8eb8280a-19c4-4502-8260-f74633a9e2f2/)

简而言之，当一个 RadioButton（通过 .Net 3.5sp1）在尝试取消选中任何其他按钮时被选中时，它会以某种方式杀死其他 RadioButtons 的绑定。简单的解决方法（阅读：hack）是为每个单选按钮分配一个不同的组名，然后他们不会试图互相混淆

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T02:10:39.847

解决此问题的另一种方法是伪造 ListBox 中的属性列表，并将 ListBoxItem 模板设置为单选按钮。

# ruby-on-rails - 每分钟运行的邮件程序的最佳 Rails 解决方案

> ID：656553
> 
> 赞同：6
> 
> 时间：2009-03-18T00:31:04.560
> 
> 标签：ruby-on-rails, cron, rake, backgroundrb

我有一个应用程序，它每分钟检查一次数据库，以查找当时应该发送的任何电子邮件。我正在考虑将其设为每分钟由 cron 作业运行的 rake 任务。会有更好的解决方案吗？

根据我的阅读，这并不理想，因为 rake 必须每分钟加载整个 rails 环境，这变得很昂贵。

想法？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-18T00:38:49.270

1.  您可以使用[`backgroundrb`](http://backgroundrb.rubyforge.org/). 然而，这会消耗掉你的 Rails 主应用程序的内存，因为它会生成一个`backgroundrb`.
2.  您还可以`SystemController`在您的主应用程序中定义一个（或等效的），其中各种操作对应于您的应用程序应执行的各种家庭任务。`crontab`您可以使用`wget`or来“刺激”它`curl`，其优点是它与您的主应用程序共享资源。根据您或您的偏执程度，或者根据 DOS（或其他类型的攻击）将此类控制器暴露给外部世界的脆弱性，您可以选择阻止从环回以外的地址访问此控制器的 URL (理想情况下在您的反向代理中，或者来自控制器本身。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-21T04:34:49.077

一种非常简单的方法是有一个脚本来做..

```
while true do
    check_and_send_messages()
    sleep 60
end 
```

..这意味着您不会不断地重生 Rails 环境。

显然它有各种缺陷，但也有一些好处（例如，对于你的 1-Rake-per-minute，如果 Rake 任务需要超过一分钟，Rake 将一次运行多次）

此外，Railscasts 剧集[Rake in Background](http://railscasts.com/episodes/127-rake-in-background)、[Starling 和 Workling](http://railscasts.com/episodes/128-starling-and-workling)以及[Custom Daemon](http://railscasts.com/episodes/129-custom-daemon)可能会给你一些想法（他们正在描述这个任务）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-21T04:44:13.750

事实证明，实际上有一些东西就是为此而构建的：ar_mailer。ar_mailer 将电子邮件排队到数据库中，然后使用 ar_mailer 命令定期将它们发送出去。您可以每分钟调用一次 ar_mailer。

ar_mailer 的好处在于，它基本上只需要很少改变您已经发送电子邮件的方式。你只需要继承 ar_mailer 而不是 ActiveMailer。使用这种方法，您不必担心在后台运行 rake 任务、分叉进程或类似的事情 - 实际上，您会获得一个真正的邮件服务器，其中包含在实际发送邮件时会删除的排队消息。如果您有一个发送大量电子邮件的系统，则此功能很重要。我已经使用 ar_mailer 建立了一个社交网络——所以我可以证明它的稳健性。

[这是一篇深入讨论 ar_mailer 的好文章](http://www.rubyinside.com/ar_mailer-batch-send-actionmailer-messages-517.html)。我强烈建议不要在这里推出你自己的解决方案，因为 Eric 已经为这个问题建立了一个经过时间考验的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-21T03:15:54.163

我按照 Vlad 的建议 (#2)，只尊重本地请求，而且我很偏执，还需要在 url 上附加一个特定的查询字符串。

我以这种方式设置了几个定期操作。

# c# - 您认为“自动接口实现”在 .NET / C# 中有用吗

> ID：656564
> 
> 赞同：5
> 
> 时间：2009-03-18T00:34:13.883
> 
> 标签：c#, .net, interface, automatic-properties, language-enhancement

考虑一下：

```
public class interface Person : IPerson
{
  int ID { get; protected set; }
  string FirstName { get; set; }
  string LastName { get; set; }
  string FullName { get { return FirstName + " " + LastName; } }
} 
```

还有这个：

```
public class StubPerson : IPerson
{
    int ID { get { return 0; protected set { } }
    string FirstName { get { return "Test" } set { } }
    string LastName { get { return "User" } set { } }
    string FullName { get { return FirstName + " " + LastName; } }
} 
```

用法：

```
IPerson iperson = new Person(); 
```

或者：

```
IPerson ipersonStub = new StubPerson(); 
```

或者：

```
IPerson ipersonMock = mocks.CreateMock<IPerson>(); 
```

所以实际上我们同时声明了**IPerson**接口和**Person**类：

```
public class interface Person : IPerson 
```

**您认为在 .NET/C# 中获得这种支持有用吗？**

**编辑：**

由于大量混乱，我认为我需要澄清提议的目的：

如果没有此功能，您将不得不编写：

```
interface IPerson
{
  int ID { get; }
  string FirstName { get; set; }
  string LastName { get; set; }
  string FullName { get; }
} 
```

还有这个：

```
public class Person : IPerson
{
  int ID { get; protected set; }
  string FirstName { get; set; }
  string LastName { get; set; }
  string FullName { get { return FirstName + " " + LastName; } }
} 
```

**我根本不建议进行任何语义更改。**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-18T00:53:30.497

让我看看我是否明白你在问什么：

为什么我们不能声明一个接口：

```
interface IPerson
{
    string Name {get;set;}
    int ID {get;set;}
} 
```

实现该接口的类将继承其属性而无需重新声明它们：

```
class Person : IPerson { } 
//person now has properties Name and ID 
```

你不能这样做的原因是即使你的接口代码和你的类代码的文本非常相似，它们*意味着非常*不同的东西。界面简单地说“实现者将有一个带有 getter 和 setter 的字符串名称”。它是说“调用名称的getter时返回私有字段”的类。即使您使用自动属性快捷方式让编译器实现该逻辑，它仍然是*logic*，属于该类。只是因为：

```
string Name {get;set;} 
```

*在一个接口和一个类中看起来*是一样的，这并不意味着完全一样的东西。

编译器实现任意逻辑来为您履行合同是非常危险的，而不是在编译时抱怨您没有实现它们。它可能会引入非常难以追踪的错误。当没有定义行为时让编译器回退到默认行为是一个非常非常糟糕的主意。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-18T06:25:41.933

前段时间我考虑[过同样的事情](http://msmvps.com/blogs/jon_skeet/archive/2007/02/28/wacky-ideas-2-class-interfaces.aspx)，特别是在你只有一个接口的生产实现但你想模拟它进行测试的情况下使用。目前它最终有点像过去的 .c/.h 文件。

我怀疑最终它的好处会被语言的额外复杂性和之后阅读代码所抵消。不过，我仍然有兴趣看到它进行更彻底的探索。即便如此，我的优先级列表中还有其他更高的事情——更好地支持不变性是最重要的:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-18T01:13:27.813

我相信 Eiffel 在 .NET 上做了类似的事情，以支持多重继承。类声明会自动生成相应的接口。当引用类类型时，编译器主要发出对接口类型的引用。主要的例外当然是在构造函数表达式中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-18T01:07:35.427

好吧，我认为其他答案将帮助您了解接口在不同具体类中抽象逻辑的使用，我还认为您可以使用 VS 中内置的重构工具完成与您想要的类似的事情。

定义你的类...

```
public class Person
{
  public int ID { get; protected set; }
  public string FirstName { get; set; }
  public string LastName { get; set; }
  public string FullName { get { return FirstName + " " + LastName; } }
} 
```

然后右键单击，选择 Refactor -> Extract Interface。

这将创建一个单独的文件，其中包含用于定义类的接口，然后您可以相应地塑造接口和实现类。

提取接口：

```
interface IPerson
{
    string FirstName { get; set; }
    string FullName { get; }
    int ID { get; }
    string LastName { get; set; }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-18T00:41:59.217

我想我错过了重点 - 你通过将类和接口混合在一起来完成什么？你用这种方法解决了什么问题？

这：

```
IPerson iperson = new Person(); 
```

在 C# 中已经是合法的。

**编辑：**为澄清起见 - 鉴于以下情况，上述代码是合法的：

```
interface IPerson { }

class Person : IPerson { } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-08T14:11:14.327

如果我请求它，我至少希望 Visual Studio 将我的属性从接口实现为自动属性。

不幸的是，这个选项没有，我必须处理未实现的异常存根

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-18T00:52:49.207

不，因为您将被迫公开接口的所有公共成员。试试[ReSharper](http://www.jetbrains.com/resharper/)，再也不用担心这个了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-18T01:05:25.633

Resharper 可以提供此功能，例如，

1.  您可以先编写您的 Person 类。
2.  您可以通过[将成员](http://www.jetbrains.com/resharper/features/code_refactoring.html#Pull_Members_Up)拉到 IPerson 界面来提取您的界面。

因此，您可以让 Visual Studio 为您自动生成实现存根。

**更新**

无论如何，让我们先解释一下接口，引用您在问题中提供的代码：

```
public class interface Person : IPerson
{
    int ID { get; protected set; }
    string FirstName { get; set; }
    string LastName { get; set; }
    string FullName { get { return FirstName + " " + LastName; } }
} 
```

您必须了解接口不是抽象类。接口只是*一个契约*，一种蓝图，这意味着它将告诉一个对象在另一个对象中期望什么，而不真正关心它是如何实现的。

另一方面，抽象类可以包含可以继承和覆盖的功能片段。

在上述情况下，您的“界面”无效，因为：

*   您不能在接口（公共、私有、受保护、内部）上声明范围约束，因为这是一个实现细节
*   您不能声明默认实现（例如，您的`FullName`属性），因为这又是一个实现细节

在我看来，你真正想要的是一个抽象类，例如，

```
public abstract class BasePerson
{
    public abstract int ID { get; protected set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public virtual string FullName { get { return FirstName + " " + LastName; } } 
} 
```

我只是猜测，但也许这就是你真正需要的。

**更新 2**

好的，我想我得到了你想要发生的事情，所以你想要的是能够写这个：

```
public interface IPerson
{
    int ID { get; set; }
    string FirstName { get; set; }
    string LastName { get; set; }
    string FullName { get; }
} 
```

然后对于你的实现只需要这样写：

```
public class Person : IPerson
{
    public int ID { get; protected set; }
    public string FullName { get { return FirstName + " " + LastName; } } 
} 
```

无需指定 FirstName 和 LastName 属性。

我们需要解决的第一个问题是接口不允许在其实现中使用访问分隔符：会发生的情况是属性将继承默认的访问分隔符，这是私有的。

第二个事实是，虽然在我们看来`string FirstName { get; set; }`接口和`public string FirstName { get; set; }`类是相同的，但它们实际上并非如此：

*   在接口中，属性定义将指示 getter 和/或 setter 方法的方法签名将可用于实现该接口的所有类。
*   在一个类中，属性定义将指示 CLR 创建一个匿名对象，该对象将保存所述属性的值。

程序员的细微差别，编译器的天壤之别。

最后，当您确实指定要实现接口时，Visual Studio 会执行同步魔术，自动为您生成这些属性存根。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-11-01T13:35:34.767

我认为对此更好的抽象是一个特征，或者，正如我在[这里](http://codecrafter.blogspot.com/2010/10/roles-in-c.html)所描述的，一个角色。这就像一个带有代码的接口。您的示例可以这样编码：

```
public role RPerson { 
  int ID { get; protected set; } 
  string FirstName { get; set; } 
  string LastName { get; set; } 
  string FullName { get { return FirstName + " " + LastName; } } 
} 

public class Person : RPerson { }

public class StubPerson : RPerson { 
    int ID { get { return 0; protected set { } } 
    string FirstName { get { return "Test" } set { } } 
    string LastName { get { return "User" } set { } } 
    string FullName { get { return FirstName + " " + LastName; } } 
} 

// ...

RPerson rperson = new Person(); 

RPerson rpersonStub = new StubPerson(); 
```

# asp.net - Extjs 自定义 TriggerField 实现

> ID：656578
> 
> 赞同：0
> 
> 时间：2009-03-18T00:40:50.187
> 
> 标签：asp.net, javascript, extjs

这是我在这里的第一个问题。

我希望我也可以提供答案..

我的需要是构建一个`Extjs` `TriggerField`在触发时打开的实现，单击一个面板，里面有一个自定义加载的页面......

示例：当我单击触发按钮时，我将打开一个面板，指定一个 url `/Views/Test/Blabla.aspx`，然后将选择存储在触发字段值中。我希望有人可以帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-20T09:00:45.200

在examples/form/forum-search.html下的examples目录中有一个例子会弹出一个Panel

它基于一个组合框（但它配置为隐藏触发按钮）

[顺便说一句，在http://extjs.com/forum/](http://extjs.com/forum/)寻求帮助可能是一个更好的主意

# php - 扫描 PHP 上传的病毒

> ID：656583
> 
> 赞同：2
> 
> 时间：2009-03-18T00:42:51.757
> 
> 标签：php, upload, virus

我目前正在使用以下代码扫描已作为申请表的一部分上传的文件：

```
$safe_path = escapeshellarg($dir . $file);
$command = '/usr/bin/clamscan --stdout ' . $safe_path;
$out = '';
$int = -1;
exec($command, $out, $int);

if ($int == 0) {
    // all good;
} else {
    // VIRUS!;
} 
```

它有效，但速度很慢。任何人都有任何建议a）。加快速度和b）。一般改进脚本（例如，我不完全清楚 exec() 与 system() 等的好处）？

如果速度无法提高，那么理想情况下，我希望显示某种临时“请耐心等待您的文件正在被扫描”消息，但我也不知道该怎么做。

编辑：对不起，应该说需要在当时进行扫描，因为如果没有有效（即无病毒）文件，将不会接受相关应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2011-09-23T01:08:46.833

使用 clamdscan 而不是 clamscan。Clamdscan 使用始终运行的内置守护程序，并且不必每次都加载病毒表（如 clamscan 所做的那样）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-18T00:47:33.477

如果您不需要立即向用户显示结果，您可以将文件添加到数据库表中以便稍后扫描。

然后，您可以创建一个新进程来扫描和更新表中的结果。你有一个很好的例子：[http](http://robert.accettura.com/blog/2006/09/14/asynchronous-processing-with-php/) ://robert.accettura.com/blog/2006/09/14/asynchronous-processing-with-php/ 。

如果您绝对需要在同一个请求中显示结果，那么您可以完全按照我之前所说的那样做，但输出一个通过 AJAX 请求结果的临时页面；扫描结束后，将用户重定向到结果页面。

如果您不想使用 JavaScript，那么一个简单的元刷新标签就可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T00:48:23.943

设置一个单独的应用程序，最好是在一个不同的盒子上，您可以在其中批量扫描这些扫描。该框可以将其状态更新到数据库中，您的前端服务可以在其中读取并向用户报告。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-28T12:13:39.040

为了保持最新状态：现在有一个 PHP 库正在使用与 ClamAV 的套接字连接并通过 PHP 快速初始化文件扫描。

[https://github.com/jonjomckay/quahog](https://github.com/jonjomckay/quahog)

请务必使用正确的权限，因为扫描将由 clamav 用户完成，而不是 www-data。

# c# - 使用不使用 Graphics.DrawImage 将一个位图复制到一个更大的位图上

> ID：656587
> 
> 赞同：0
> 
> 时间：2009-03-18T00:46:16.740
> 
> 标签：c#, graphics, drawing, bitmap, unmanaged

[这是从多个线程渲染到单个位图对象](https://stackoverflow.com/questions/648975/rendering-to-a-single-bitmap-object-from-multiple-threads)的后续内容

我试图实现的是使用位图 LockBits 函数或任何其他但不是 graphics.DrawImage 的位图，将其绘制到更大图像上任何点的 50x50 像素位图并绘制到更大的位图（100x100 像素）上。我不想使用 DrawImage 的原因在另一个线程中说明。

我已经设法通过使用 Marshal.Copy 从源 BitmapData 到 dest BitmapData 得到一些东西，但它创建了一个平铺的水平拉伸图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T01:10:51.017

您可以在不依赖任何系统调用的情况下操作内存中的图像。如果您深入研究 .BMP 文件的底层格式，您可以构建自己的设备独立位图类，该类真正“理解”.BMP 的低级格式。

例如，每像素 8 位的图像本质上是一个二维字节数组（每个字节为 1 个像素）加上一个简单的颜色表。粗略地说（这是非常非常粗略的）：

```
byte[,] bColors = new byte[3,256]; // 256 RGB colors
byte[,] bImage = new byte[25,50]; // 25 x 50 pixels 
```

诀窍是（一如既往）获取原始像素数据，进行处理，然后根据您的更改更新原始像素数据。

过去，我通过将 GDI HBITMAP 转换为 24bpp DIB 来解决此问题，对原始像素进行时髦的图像处理（每像素 3 个字节使这更容易），然后将 DIB 转换回 HBITMAP。这一切都只使用了经典的 GDI（甚至是 GDI+ 之前的版本，更不用说 C#了）。

使用这种方法，您可以设计一个控制结构，以允许多个作者访问您更大图像的不同部分。

但是...低级 BitBlt GDI 调用可能比您可以做的任何事情都更有效率。如果我是你，我会确定连续执行 50 或 100 个 bitblt 会太慢（你可能需要在 c++ 中执行此操作）。

处理 DIB 最烦人的挑战是：

1.  将 DIB 转换为准备好显示的实际“图像”
2.  将实际的“图像”转换为 DIB
3.  将 DIB 保存为 .BMP 以外的其他内容

当我开始学习图像实际上是“恐怖”时的核心参考：

*   [http://msdn.microsoft.com/en-us/library/dd183562(VS.85).aspx](http://msdn.microsoft.com/en-us/library/dd183562%28VS.85%29.aspx)
*   [http://msdn.microsoft.com/en-us/library/dd144879(VS.85).aspx](http://msdn.microsoft.com/en-us/library/dd144879%28VS.85%29.aspx)
*   [http://msdn.microsoft.com/en-us/library/dd162973(VS.85).aspx](http://msdn.microsoft.com/en-us/library/dd162973%28VS.85%29.aspx)

你如何去/从 .NET Image 的......嗯......这是一个很好的问题 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T23:35:22.587

如果您使用的是 32bpp [P]ARGB 像素格式，则使用 LockBits/BitmapData 应该可以正常工作。诀窍是您必须一次复制一行数据，以便它在正确的位置对齐。您应该可以使用以下方法执行此操作：

```
Rectangle srcArea = new Rectangle(0, 0, srcBitmap.Width, srcBitmap.Height);
BitmapData srcData = srcBitmap.LockBits(srcArea, ImageLockMode.ReadOnly, destBitmap.PixelFormat);
Rectangle destArea = new Rectangle(25, 25, srcBitmap.Width, srcBitmap.Height);
BitmapData destData = destBitmap.LockBits(destArea, ImageLockMode.WriteOnly, destBitmap.PixelFormat);

IntPtr srcPtr = srcData.Scan0;
IntPtr destPtr = destData.Scan0;
byte[] buffer = new byte[srcData.Stride];
for (int i = 0; i < srcData.Height; ++i)
{
    Marshal.Copy(srcPtr, buffer, 0, buffer.Length);
    Marshal.Copy(buffer, 0, destPtr, buffer.Length);

    srcPtr += srcData.Stride;
    destPtr += destData.Stride;
}

srcBitmap.UnlockBits(srcData);
destBitmap.UnlockBits(destData); 
```

作为警告，此代码不会按原样工作，因为我不确定增加 IntPtr 的正确咒语是什么。我以前做过同样类型的事情，但在 C++ 中。另外，我不知道是否有办法直接复制数据而不是使用中间缓冲区。

另一个警告：LockBits 调用 srcBitmap 和缓冲区大小假定 srcBitmap 将完全包含在 destBitmap 中。如果不是这种情况（位图的某些部分将被裁剪掉），则需要调整锁定区域和缓冲区的大小。

如果不使用 32bpp 像素格式（即 24bpp），会比较困难。源 BitmapData 的步幅可能包括一些不应复制的填充。您可以通过计算源行中的实际像素数据量来解决此问题，然后复制该数量。索引像素格式将更加有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T01:09:39.960

我建议看一下[内部位图内存结构。](https://web.archive.org/web/20121203144033/http://www.bobpowell.net/lockingbits.htm)

我认为最好的方法是不要尝试直接设置 BitmapData。相反，我会制作一个大小合适的共享字节数组，并直接从较小的图像中设置字节数组。

当您合成较大的图像时，您可以获取最终的字节数组并直接从字节数据中[制作位图。](http://msdn.microsoft.com/en-us/library/zy1a2d14.aspx)

这样做的好处是允许您控制内存管理、线程化操作等，就像您在原始帖子中似乎想要做的那样。数据访问也应该非常快。

# django - 自动升级到 django 1.x

> ID：656598
> 
> 赞同：0
> 
> 时间：2009-03-18T00:53:57.643
> 
> 标签：django, django-admin

我一直在使用 django 的 pre 1.0 版本（大约 0.97 的开发版本），

现在我正在考虑升级到 1.x（我从 svn 中获取了最新的东西）。

管理界面的工作方式发生了一些变化，所以现在我必须编辑所有`models.py`文件并创建新`admin.py`文件。

我记得看到一个据说可以自动化（大部分）这个过程的工具，但那是很久以前的事了，我不记得它在哪里（或者我的记忆可能是错误的）

有这样的工具吗？它在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T01:05:53.510

我认为您正在寻找的是这个页面：[http](http://docs.djangoproject.com/en/dev/releases/1.0-porting-guide/) ://docs.djangoproject.com/en/dev/releases/1.0-porting-guide/ 。

它包含有关更改的信息，以及脚本的链接，该脚本将根据您的模型自动生成与 1.0 兼容的 admin.py 文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-18T01:07:32.023

这也可能有帮助： http: [//www.djangosnippets.org/snippets/603/](http://www.djangosnippets.org/snippets/603/)

# jquery - jQuery text() 调用在 Firefox 中保留换行符，但在 IE 中不保留

> ID：656605
> 
> 赞同：12
> 
> 时间：2009-03-18T00:58:49.597
> 
> 标签：jquery, cross-browser, whitespace

我正在做：

```
alert($("#div").text()); 
```

在这样的事情上：

```
<div id="div">
&lt;div&gt;
Some text
&lt;div&gt;
</div> 
```

为什么转义的内容？因为它有时格式不正确，我不希望它干扰或破坏文档的其余部分。

在 FF 中，它显示保留换行符。在 IE7 中它没有。我需要保留空白。此内容实际上是在文本区域中进行编辑。

在有人推荐富文本编辑器之前，这段代码并不是真正的 HTML。这是一种习惯方言。

那么如何在 IE 中保留换行符呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-18T01:15:45.343

看起来这是我的问题：[Internet Explorer innerHTML Quirk](http://stud3.tuwien.ac.at/~e0226430/innerHtmlQuirk.html)：

> 但是，innerHTML 在 Internet Explorer 中存在问题。
> 
> HTML 标准要求对内容的显示进行转换。 **所有种类和数量的相邻空格都被折叠成一个空格。**这是一件好事——作为一个例子，它允许我在这个源文件中添加很多换行符，而不必担心显示文本中出现奇怪的换行符。
> 
> Internet Explorer 在分配给 innerHTML 属性时应用这些转换。这似乎是个好主意：它在显示期间节省了一点时间，因为如果内存中的表示已经标准化，那么浏览器在需要显示文本时就不必进行标准化。
> 
> 不过，规范化规则也有例外。值得注意的是，这些元素是 <textarea> 元素、<pre> 元素，以及在 CSS 感知浏览器中具有任何值但对于 white-space 属性正常的元素。
> 
> Internet Explorer 不考虑这些特殊情况。第三个使他们的优化成为一个坏主意，因为空白可能会在运行时发生变化，例如通过 DOM。在任何情况下，Internet Explorer 都会将所有对 innerHTML 属性的赋值规范化，从而产生如下所示的效果。
> 
> 此文本在页面加载时填充文本区域。这也包含换行符和多个空格。格式也保留在这里，除了 UA 可能会换行。

（重点补充）

实际上，如果我将其更改为：

```
<div id="div">
<pre>
...
</pre>
</div> 
```

和

```
$("#div pre").text() 
```

或者简单地说：

```
<style type="text/css">
#div { white-space: pre }
</style> 
```

这一切都神奇地起作用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-18T01:22:36.450

不确定这是否有帮助，但也许你可以试试这个：

```
#div {
  white-space: pre;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-18T01:32:22.917

请参阅[此处](http://www.codingforums.com/archive/index.php/t-155570.html)了解解决方法：

> hack 是首先使用 cloneNode() 克隆您想要其内容的元素。
> 
> 接下来，您`<pre>`使用 createElement() 创建一个元素，然后将克隆的节点附加到它。
> 
> 现在您可以获取该创建`<pre>`元素的 innerText，并删除临时对象。您现在有空白保留文本:)
> 
> ```
> var cloned = targetElement.cloneNode(true);
> var pre = document.createElement("pre");
> pre.appendChild(cloned);
> var textContent = pre.textContent ?
>   pre.textContent : pre.innerText;
> delete pre;
> delete cloned; 
> ```
> 
> 我克隆元素的原因是 appendChild() 会将其从 DOM 中拉出，并且在 DOM 中的正确位置重新插入会很痛苦。
> 
> 希望这可以帮助一些人:)

# php - 如何在 PHP 中打开 Excel 文件？

> ID：656609
> 
> 赞同：6
> 
> 时间：2009-03-18T01:02:11.773
> 
> 标签：php, import-from-excel

如何打开 excel 文件，读取数组中的所有列/行等，就像 .csv 文件一样？php中是否有任何内置的库/类？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-18T01:05:57.833

我用过[PHP Excel 阅读器](http://sourceforge.net/projects/phpexcelreader)

这是[Zend 的一篇好文章](http://devzone.zend.com/article/3336-Reading-and-Writing-Spreadsheets-with-PHP)

# ruby - 为什么“？b”在Ruby中表示“b”？

> ID：656610
> 
> 赞同：4
> 
> 时间：2009-03-18T01:02:34.313
> 
> 标签：ruby, string

```
"foo"[0] = ?b # "boo" 
```

我正在查看上面的示例并试图弄清楚：

1.  “？b”如何暗示字符“b”？
2.  为什么有必要？- 我不能写这个吗：

    “foo”[0] = 'b' # “嘘”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-18T01:13:41.823

> 埃德·斯旺仁：？返回字符的字符代码。

不在 Ruby 1.9 中。从 1.9 开始，`?a`返回“a”。请参阅此处：[Ruby 1.9 中需要注意的 10 件事！](http://dablog.rubypal.com/2009/1/16/son-of-10-things-to-be-aware-of-in-ruby-1-9)

```
telemachus ~ $ ~/bin/ruby -v
ruby 1.9.1p0 (2009-01-30 revision 21907) [i686-linux]
telemachus ~ $ ~/bin/ruby -e 'char = ?a; puts char'
a
telemachus ~ $ /usr/bin/ruby -v
ruby 1.8.7 (2008-08-11 patchlevel 72) [i486-linux]
telemachus ~ $ /usr/bin/ruby -e 'char = ?a; puts char'
97 
```

编辑：[对 Ruby 1.9 更改的](http://eigenclass.org/hiki/Changes+in+Ruby+1.9)*非常*完整的描述。

另一个编辑：请注意，`'a'.ord`如果您希望在 1.8 中通过`?a`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-18T04:35:36.377

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T01:03:54.343

? 返回字符的字符代码。 [这是一个相关的帖子。](https://stackoverflow.com/questions/143822/ruby-character-to-ascii-from-a-string)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T22:01:57.907

In some languages (Pascal, Python), chars don't exist: they're just length-1 strings.

In other languages (C, Lisp), chars exist and have distinct syntax, like 'x' or #\x.

Ruby has mostly been on the side of "chars don't exist", but at times has seemed to not be entirely sure of this choice. If you *do* want chars as a data type, Ruby already assigns meaning to '' and "", so ?x seems about as reasonable as any other option for char literals.

To me, it's simply a matter of saying what you mean. You could just as well say foo[0]=98, but you're using an integer when you really mean a character. Using a string when you mean a character looks equally strange to me: the set of operations they support is almost completely different. One is a sequence of the other. You wouldn't make Math.sqrt take a list of numbers, and just happen to only look at the first one. You wouldn't omit "integer" from a language just because you already support "list of integer".

(Actually, Lisp 1.0 did just that -- Church numerals for everything! -- but performance was abysmal, so this was one of the huge advances of Lisp 1.5 that made it usable as a real language, back in 1962.)

# css - XHTML 1.0 Strict、CSS 和 img 边框

> ID：656611
> 
> 赞同：1
> 
> 时间：2009-03-18T01:02:52.643
> 
> 标签：css, xhtml-1.0-strict

我在我的网站上使用 XHTML 1.0 Strict 并在我的链接上有以下 CSS 样式：

```
a:hover {
    border-bottom: 1px dotted #447799;
} 
```

和我的图片：

```
a img, img {
    border: none;
    text-decoration: none;
} 
```

然而，当我将鼠标悬停在标题横幅上时，底部边框仍然显示为虚线和蓝色。显然，我不能使用border="0"，因为它不是XHTML 1.0 Strict Doctype 的一部分。

你可以在这里看到我的网站：[armorycraft.com](http://armorycraft.com)

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T01:06:44.210

你可以使用一个类：

```
a.imageAnchor:hover {
    border:none;
} 
```

不是最漂亮的解决方案，但它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T01:07:43.257

试试这个：

```
a img:hover, img:hover {border:none; text-decoration:none;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T01:20:12.040

问题是边框附加到锚点，但是您正在为图像设置边框：无。

没有简单的方法可以避免这种情况。我建议稍微调整一下：

```
a:hover {
    border-bottom: 1px dotted #447799;
}

a.image:hover {
    border: none;
} 
```

因此，将“图像”类添加到所有带有图像的锚点，就完成了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-19T09:22:03.187

a:hover 有边框：1，所以自动`a:hover img`也有边框：1

我认为这会**解决它**

```
a:hover img{border:0;} 
```

现在你不需要为它开设一个全新的课程

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-26T21:05:52.483

这对我有用：（我想你只是忘记了冒号（:)

```
a:img, img {
    border: none;
    text-decoration: none;
} 
```

祝你好运！

# django-forms - Django 表单，使用 RadioSelect 小部件的 ModelChoiceField，按 FK 分组

> ID：656614
> 
> 赞同：3
> 
> 时间：2009-03-18T01:04:24.637
> 
> 标签：django-forms

挑战，在嵌套中输出一个单选选择`<ul></ul>`，按任务 fk 分组。

IE。

```
class Category(models.Model):
    # ...

class Task(models.Model):
    # ...
    category = models.ForeignKey(Category)
    # ... 
```

表格.py

```
class ActivityForm(forms.ModelForm):
    # ...
    task = forms.ModelChoiceField(
        queryset    = Task.objects.all(),
        widget      = RadioSelectGroupedByFK
    ) 
```

小部件.py

```
class RadioFieldRendererGroupedByFK(RadioFieldRenderer):
    """
    An object used by RadioSelect to enable customization of radio widgets.
    """
    #def __init__(self, attrs=None):
        # Need a radio select for each?? Just an Idea.
        #widgets = (RadioSelect(attrs=attrs), RadioSelect(attrs=attrs))
        #super(RadioFieldRendererGroupedByFK, self).__init__(widgets, attrs)

    def render(self):
        """Outputs nested <ul> for this set of radio fields."""
        return mark_safe(
            #### Somehow the crux of the work happens here? but how to get the
            #### right context??
            u'<ul>\n%s\n</ul>' % u'\n'.join(
                [u'<li>%s</li>' % force_unicode(w) for w in self]
            )
        )

class RadioSelectGroupedByFK(forms.RadioSelect):
    renderer = RadioFieldRendererGroupedByFK 
```

最好的感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-25T08:29:32.457

[`itertools.groupby()`](http://docs.python.org/library/itertools.html#itertools.groupby)非常适合这个。我会假设每个都有一个`Task`你希望它们排序的属性。我不知道 Django API，因此您可能希望将排序转移到 db 查询中，并且您需要查看小部件的属性以了解如何访问任务对象，但这是基本公式：`Category``name`

```
from itertools import groupby

# sort first since groupby only groups adjacent items
tasks.sort(key=lambda task: (task.category.name, task.name))

for category, category_tasks in groupby(tasks, key=lambda task: task.category):
  print '%s:' % category.name
  for task in category_tasks:
    print '* %s' % task.name 
```

这应该打印一个列表，如：

```
Breakfast foods:
* eggs
* spam
Dinner foods:
* spam
* spam
* spam 
```

高温高压

# frameworks - 糟糕的代码示例会让你远离图书馆吗？

> ID：656620
> 
> 赞同：4
> 
> 时间：2009-03-18T01:05:58.847
> 
> 标签：frameworks

我一直在评估一个在纸上看起来很棒的框架。问题是示例代码不完整且质量差。提供的参考实现在大多数情况下并不打算使用（因此它们也可以被视为示例代码）并且只是成功地让我感到困惑。

我知道事情在纸上看起来更好是很常见的，但是我对示例代码的体验让我远离了进一步的调查。

你是否让糟糕的代码示例改变了你对框架/库的判断？到目前为止，我的经历类似于“简历效应”：如果有人不努力对简历进行拼写检查，他们可能不会得到这份工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T01:12:55.210

对我来说，确实如此。我倾向于避免使用代码示例不完整的库。如果库是开源的，我会忽略它，因为我可以直接查看代码，看看库的内部是否合理，而且我知道，如果有一天出现问题，我可以（如果必须）修复它。

如果图书馆是商业的，并且他们的样本和/或文档很差，我会在别处寻找。我只是将其视为风险管理——糟糕的样本让我担心图书馆的整体质量。

无论纸面上或理论上有多好，编程时仍然可能是废话。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-18T01:15:17.387

我认为这是拒绝和评估其他图书馆的正当理由。作为库的潜在用户，缺乏文档和/或错误的代码示例给人的印象是该库还不够成熟，无法供第三方使用。随着时间的推移，它很可能会获得缺失的部分，但在那之前，我认为去别处寻找是合理的。

我最近在评估人们上传到 github.com 的大量博客应用程序，我很快跳过了那些没有文档的应用程序，因为它们显然还没有准备好供其他人使用。最后剩下的那些有一个很好的自述文件，其中包含有关如何启动和运行应用程序的信息以及运行代码的在线示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-18T01:13:23.353

如果我找不到说明如何*使用*该库的好示例（和/或文档），我肯定不太可能使用它——实际上，我很难弄清楚如何使用它。但我不在乎*实现*库本身的代码是什么样的。我不认为我会选择一个库/框架而不是另一个，因为它的开发人员已经表现出编写更清晰代码的能力（这就是我理解的“恢复效应”的意思）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-18T01:17:23.500

缺乏文档和示例使我不太可能使用那个特定的库。如果有其他解决方案可以解决问题，那么我不值得花时间测试并试图弄清楚黑匣子是如何工作的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-18T01:22:30.443

糟糕的代码示例加上糟糕的文档将使我远离图书馆，除非有令人信服的理由使用它。但是，具有良好代码示例*或良好文档**的*库通常值得使用。（假设图书馆本身满足我的需要。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-18T01:14:29.903

当然是。每个库都应该附带一个使用程序和 CLI 接口的简单示例（对于具有`<3`方法和 <10 个挂钩的非常简单的库，一个示例就足够了）。

如果你的框架很难使用，甚至最初的编码人员在使用它时也会出错，为什么你的框架“看起来很棒”？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-18T03:10:03.617

这对我来说当然很重要。编码草率/不完整和沟通不畅的证据降低了我对实际实现代码稳定和健壮的信心。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-18T01:13:16.660

我自己是的，但是肯定有一些人不会因此而被关闭，否则有很多开源项目会在很久以前就死了。

# php - CodeIgniter：如何进行选择（不同的字段名）MySQL 查询

> ID：656622
> 
> 赞同：54
> 
> 时间：2009-03-18T01:06:59.687
> 
> 标签：php, mysql, codeigniter, distinct

我正在尝试检索字段中所有唯一值的计数。

示例 SQL：

```
SELECT count(distinct accessid) FROM (`accesslog`) WHERE record = '123' 
```

如何在 CodeIgniter 中进行这种查询？

我知道我可以使用`$this->db->query()`并编写自己的 SQL 查询，但我还有其他要使用`$this->db->where()`的要求。如果我使用`->query()`，我必须自己编写整个查询。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2009-03-18T01:55:26.980

```
$record = '123';

$this->db->distinct();

$this->db->select('accessid');

$this->db->where('record', $record); 

$query = $this->db->get('accesslog'); 
```

然后

```
$query->num_rows(); 
```

应该有很长的路要走。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-03-19T11:55:34.750

用下面的代码试试

```
function fun1()  
{  
   $this->db->select('count(DISTINCT(accessid))');  
   $this->db->from('accesslog');  
   $this->db->where('record =','123');  
   $query=$this->db->get();  
   return $query->num_rows();  
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-06-10T19:55:24.517

您也可以运行**`->select('DISTINCT `field`', FALSE)`**并且第二个参数告诉`CI`不要转义第一个参数。

使用第二个参数作为`false`，输出将**`SELECT DISTINCT `field``**不是没有第二个参数，**`SELECT `DISTINCT` `field``**

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-08-24T08:27:17.887

***简单但有用的方法：***

```
$query = $this->db->distinct()->select('order_id')->get_where('tbl_order_details', array('seller_id' => $seller_id));
        return $query; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-11-15T05:05:08.363

由于计数是预期的最终值，因此在您的查询中

```
$this->db->distinct();
$this->db->select('accessid');
$this->db->where('record', $record); 
$query = $this->db->get()->result_array();
return count($query); 
```

计算返回值

# reverse-proxy - 如何设置 Squid 反向代理？

> ID：656627
> 
> 赞同：10
> 
> 时间：2009-03-18T01:08:17.670
> 
> 标签：reverse-proxy, squid

我有一个非常繁忙的网站（Windows IIS），我想设置一个 SQUID 反向代理来卸载一些流量。我想知道什么是最佳实践，以及如何在 Windows 或 Unix 服务器上进行设置。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-05-05T04:28:56.713

我自己设法弄清楚了这一点。您可以按照此博客文章中的步骤来遵循我为使其正常工作所做的工作：[http ://ashleyangell.com/2009/03/configuring-a-basic-reverse-proxy-in-squid-on-windows-website -加速器/](http://ashleyangell.com/2009/03/configuring-a-basic-reverse-proxy-in-squid-on-windows-website-accelerator/)

# projects - 大型项目新手

> ID：656643
> 
> 赞同：7
> 
> 时间：2009-03-18T01:18:37.177
> 
> 标签：projects

我认为我处于某种独特的境地：我在 Linux 环境中拥有相当多的 C/C++ 编码经验。但是，我并没有真正的“项目经验”。比如我对版本控制的概念很熟悉，但是我从来没有用过。或者，我从来没有参与过包含超过六个源文件的项目。

所以，我现在的位置是我正在处理这个项目，并且已经存在大量代码。我必须使用 Visual Studio 2008（具体来说是 Visual C++）在 Windows 环境中编写所有代码所以我有几个问题：

如何将现有代码集成到 VC++ 中？我正在使用乌龟 SVN，我的机器上有所有代码......

有没有人对从小项目转移到大项目有任何一般性建议？

任何帮助/建议将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T01:27:37.920

掌握大型代码库的一些关键：

*   了解源代码控制的来龙去脉。现在，从了解所有 SVN 命令的工作原理开始。 [SVNBook](http://svnbook.red-bean.com/)是一个很好的资源。使用[VisualSVN](http://www.visualsvn.com/)或类似的插件在 IDE 中与您的存储库进行交互（当您想从其他地方进行交互时，Tortoise 仍然很有用）。以后，您将需要非常熟悉分支和合并（以及用于快速正确执行此操作的[工具），并且可能需要学习 DVCS（分布式版本控制系统），例如](http://www.scootersoftware.com/)[Git](http://git-scm.com/)或[Mercurial](http://www.selenic.com/mercurial/wiki/)。这至少会扩展您的思维，并且可能会教您一些即使在您使用更传统（集中式）版本控制的项目中也会有用的课程。
*   了解如何快速查找内容、查找不熟悉的类和变量的声明以及跟踪更大应用程序的执行。有很多方法可以解决这个问题，您可能会在某个时候使用其中的大多数，但其中一些是您的 IDE 的内置功能（其中大多数在这方面非常强大，您应该能够右键单击一个类名并轻松找到它的声明）`grep`等（[ack](http://betterthangrep.com/)是一个非常适合代码探索的变体），如果您以这种（C / C ++）方式摆动，还有[CTAGS 。](http://ctags.sourceforge.net/)
*   学习单元测试的基础知识，甚至可以尝试像[NUnit](http://www.nunit.org/index.php)这样的框架。就我个人而言，我对单元测试并不感兴趣，但我认识到它们的实用性并且很多人都对它们发誓，所以至少在你尝试之前不要敲它。
*   即使你是一个拥有大量单元测试的完美程序员，由于出现问题的内在复杂性，大型代码库也需要更高水平的调试技能。无论是学习如何编写简明的、描述性的类似调试`printf()`的语句，更加熟悉你的调试器，甚至学习你的语言的来龙去脉（例如类型系统/对象模型的极端情况），都有助于解开这些复杂的问题。

不幸的是，我没有使用过 Visual Studio，但我认为了解你的 IDE 的项目导入/迁移流程也会很有启发性。也许其他人会在这方面提出更具体的建议。这个过程可能很繁重，特别是如果您之前有一个非标准的自定义构建系统并且您希望今后一切都完成 The One True Visual Studio Way，但是从代码中自动提取依赖关系的工具越来越好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-18T01:34:54.143

已经给出的想法非常好。但您可能还想阅读 Mike Gunderloy 的[Coder to Developer](https://rads.stackoverflow.com/amzn/click/com/078214327X)。根据您对当前经验的描述，我认为您会发现它很有用。另请阅读[实用程序员](https://rads.stackoverflow.com/amzn/click/com/020161622X)；我把它放在办公桌旁边的办公室里，经常发现自己把它借给年轻的开发者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T01:30:10.427

只是潜入。希望到目前为止一直在这个项目上工作的人将代码组织成逻辑组（命名空间、类层次结构、文件夹）。

我还将在学习如何使用 IDE 方面支持 Matt J：我并不特别熟悉 Visual Studio，但是当您单击类或方法时应该有上下文菜单项以将您带到声明它的位置，并从那里到它派生的类。

不过先设置版本控制：一旦你学会了如何“恢复”，你会感觉更舒服；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T01:25:52.153

我已经使用[VisualSVN](http://www.visualsvn.com/)很长一段时间没有问题。它与vs2008完美集成。至于继续进行大型项目，了解事情是如何完成的一个好方法是下载一个体面大小的现有项目的源代码，然后看看它是如何组合在一起的。在您对事物的结构有了一个很好的了解之后，您可以为自己做的最好的事情就是**编写代码**。头脑风暴一个项目，然后去做。根据您对完成后结果的感觉，您也可以将其用作投资组合的一部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T01:26:03.260

单元测试。使用它们，否则你会后悔的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-18T06:26:54.190

好好了解Visual Studio，如果你生活在其中，你真的必须好好了解它。
[AnkSVN](http://ankhsvn.open.collab.net)是 Visual Studio 2008 的免费插件，效果很好。此外，[Refactor for C++](http://www.devexpress.com/Products/Visual_Studio_Add-in/RefactorCPP/)是另一个免费插件，也是在 Visual C++ 中获得重构支持的唯一方法之一。

此外，您很快就会了解到，在大型项目中，您 80% 的时间都将花在代码维护上，所以请帮自己一个忙，让您的代码成为您想要居住的地方，而不是让您感到恐惧的地方退缩。干净的代码、偶尔的评论和单元测试将大大有助于让你早上起床去工作，而不是害怕你必须在任何时候触碰任何东西都会破坏的怪物上工作。

# c++ - C++ 用法/技巧中的虚拟继承

> ID：656651
> 
> 赞同：2
> 
> 时间：2009-03-18T01:23:59.427
> 
> 标签：c++, oop

我从未在专业软件中使用过它，尽管在我们的商店和我工作过的其他人中，我们设计了大型系统。我唯一一次搞砸虚拟继承是在公司面试时。尽管如此，我还是在下班后玩了它。

你们用吗？您是否了解它是如何深入工作的（大多数流行的编译器供应商如何实现它）？我真的很想知道它是如何在专业软件中使用的，如果有的话。技巧和提示也将不胜感激。

对我来说，虚拟继承只是一个臭名昭著的钻石问题的解决方案。因此，它从未在我们的软件中找到它的方式，因为我们的架构中没有 MI 导致钻石。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-18T01:33:18.267

虚拟继承的要点是防止派生类继承不同上级类的多个副本。这可能发生在可能存在多重继承的任何情况下 - 正如您正确指出的那样，“钻石问题”，也就是说继承图是 DAG 而不是严格的树。

[C++ FAQ 详细介绍了](http://www.parashift.com/c++-faq-lite/multiple-inheritance.html)它。我还推荐 C++ FAQ Book；我曾经为作者工作，他们非常好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-18T07:58:32.130

> 即使在我们的商店，我也从未在专业软件中使用过它，

你用`iostream`吗？我们的确是。查看 iostreams 的设计，您就会知道您一直在使用虚拟继承。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-18T08:38:58.087

虚拟继承也可以用来使一个类成为最终类，即使它没有其他类可以从它派生。我曾经从 Stroustroup （~~[http://www.research.att.com/~bs/bs_faq2.html#no-derivation](http://www.research.att.com/~bs/bs_faq2.html#no-derivation)~~更新的超链接和来源见下文）抓住了这个技巧：

> 这个问题的另一个变体，如何防止出于逻辑原因推导，在 C++11 中有一个解决方案。例如：
> 
> ```
> [...] 
> ```
> 
> 对于较旧的编译器，您可以使用一种有点笨拙的技术：class Usable；
> 
> ```
>  class Usable_lock {
>       friend class Usable;
>   private:
>       Usable_lock() {}
>       Usable_lock(const Usable_lock&) {}
>   };
> 
> class Usable : public virtual Usable_lock {
>     // ...
> public:
>     Usable();
>     Usable(char*);
>     // ...
> };
> 
> Usable a;
> class DD : public Usable { };
> 
> DD dd;  // error: DD::DD() cannot access
>         // Usable_lock::Usable_lock(): private  member 
> ```

* * *

## 2018 年更新

[与此同时，](http://www.stroustrup.com/bs_faq2.html#final) C++ 收到了一个`final`关键字：

> ## 为什么 C++ 没有 final 关键字？
> 
> [它有，但它没有你想象的那么有用。](http://www.stroustrup.com/bs_faq2.html#no-derivation)

这导致：

> ## 我可以阻止人们从我的班级派生吗？
> 
> 是的，但你为什么要这样做？有两个常见的答案：
> 
> *   为了效率：避免我的函数调用是虚拟的
> *   为了安全：确保我的类不被用作基类（例如，确保我可以复制对象而不必担心切片）
> 
> 以我的经验，效率原因通常是放错地方的恐惧。在 C++ 中，虚函数调用是如此之快，以至于与使用普通函数调用的替代解决方案相比，使用虚函数设计的类的实际使用不会产生可测量的运行时开销。请注意，虚函数调用机制通常仅在通过指针或引用调用时使用。当直接为命名对象调用函数时，虚函数类开销很容易被优化掉。
> 
> 如果确实需要“封顶”类层次结构以避免虚函数调用，人们可能会问为什么这些函数首先是虚函数。我见过一些例子，其中性能关键的功能没有充分的理由被虚拟化，只是因为“这是我们通常这样做的方式”。
> 
> 这个问题的另一个变体，如何防止出于逻辑原因推导，在 C++11 中有一个解决方案。例如：
> 
> ```
>  struct Base {
>       virtual void f();
>   };
> 
>   struct Derived final : Base {   // now Derived is final; you cannot derive from it
>       void f() override;
>   };
> 
>   struct DD: Derived {// error: Derived is final
> 
>       // ...
>   }; 
> ```

...然后导致该答案的初始段落。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-18T02:05:03.853

如果您的架构不使用多重继承，我不明白您为什么要使用它。

如果你碰巧使用了 MI，我看不出你为什么*不*使用虚拟继承。除了记得在正确的位置添加virutal关键字之外，似乎没有任何缺点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T08:45:09.147

我与几个需要使用它的商业库合作过。例如，路透社提供的用于访问实时金融市场数据的库曾经要求您从几个基类派生监听类（不知道是否仍然如此），这需要虚拟继承。这没什么大不了的，一旦你意识到你必须使用它——这个事实并没有完全得到很好的记录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-08-28T22:07:30.540

为了进一步了解虚拟继承，您还可以查看这篇文章：[http](http://cpptalk.wordpress.com/2009/08/11/constructor-selection-with-virtual-inheritance/) : //cpptalk.wordpress.com/2009/08/11/constructor-selection-with-virtual-inheritance/ 我对机制有深入的了解，因此，如果您有具体问题 - 请继续提问。

# c++ - 设置了 OFN_ALLOWMULTISELECT 标志的 GetOpenFileName()

> ID：656655
> 
> 赞同：5
> 
> 时间：2009-03-18T01:26:17.800
> 
> 标签：c++, c, winapi, dialog

我正在尝试使用 GetOpenFileName() 通用对话框调用来弹出一个对话框并允许用户选择多个文件。

我已经设置了 OFN_ALLOWMULTISELECT 标志，以及设置了 OFN_EXPLORER，所以我得到了“新样式”文件选择框。

当我设置我的 OPENFILENAME 结构时，我将 ofn.lpstrFile 指向分配用于保存结果的缓冲区，并将 ofn.nMaxFile 设置为其长度。

我遇到的问题是，如果用户选择的文件名太多以至于缓冲区溢出，则对 GetOpenFileName 的调用返回 FALSE，然后 CommDlgExtendedError() 返回 FNERR_BUFFERTOOSMALL。

这对于错误检测来说很好，我可以增加缓冲区的大小来修复它，但用户迟早会选择足够的文件名来溢出该缓冲区。

我在 MSDN 中看到过注释说如果缓冲区太小，lpstrFile 缓冲区的前两个字节将包含所需的大小，但它返回的大小似乎太小了（也许当 OFN_ALLOWMULTISELECT 不是时这是正确的t 设置）。另外，这需要我再次打开对话框！

我的另一个想法是创建一个对话框挂钩过程，然后在收到 CDN_SELCHANGE 通知消息并动态分配正确大小的缓冲区时检测文件名的大小，但是虽然它将数据写入新缓冲区，但似乎记住 ofn.nMaxFile 的原始值。

有谁知道动态分配缓冲区以保存 GetOpenFile 调用的结果而不使对话框出现两次的正确方法？

* * *

所以，事实证明，Martlark 的文章在金钱上是对的。

我的 2 个错误是：
1）我忘记将 MAX_PATH 添加到要在钩子中应用的大小中，以及
2）这仅适用于 GetOpenFileName 的 unicode 版本。*（我正在使用未定义*的 UNICODE 进行编译）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T03:12:56.623

一个有趣的问题。我想您可以分配所有内存；以防万一！但本文档建议使用 Hook proc：

[http://support.microsoft.com/kb/131462](http://support.microsoft.com/kb/131462)

一切都在令人愉快的可理解的非 OO C 中！

# django-forms - Django Python：运行时创建的多个字段的 Eval 语法

> ID：656664
> 
> 赞同：0
> 
> 时间：2009-03-18T01:32:34.727
> 
> 标签：django-forms

我的 eval 语法不正确。也就是说，对于每个类别，我想输出一个名为 category_task 的 ModelChoiceField，即。如果类别为“有趣”，则将输出单选字段“有趣任务”。

```
categories = Category.objects.all()

for category in categories:
    eval(category)_tasks = form.ModelChoiceField(
        queryset         = Task.objects.filter(method__category=category),
        widget           = RadioSelect
    ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T02:44:51.433

“评估是邪恶的。”</p>

好的，它有它的用途，但是 90% 的 eval 用法（在任何语言中）都是错误的，所以如果你发现自己在写一个 eval，你应该停下来，带着极大的怀疑检查你在做什么。

```
eval(category)_tasks = x 
```

如果你正在做一个赋值，那是一个语句而不是一个表达式，所以你必须使用 exec 而不是 eval：

```
exec category+'_tasks= x' 
```

然而 exec 和 eval 一样邪恶！

您可以在 Python 中编写变量，而无需解析/评估 Python 代码：

```
locals()[category+'_tasks']= x 
```

或者，如果您想在当前范围内编写一个全局变量而不是一个，请将 locals() 替换为 globals()。

虽然这比 eval/exec 好，但它仍然是相当代码异味。您实际上很少需要完全动态命名的变量；查找通常更干净：

```
catlookup= {}
catlookup[category]= x 
```

尽管没有更多上下文，但很难说出最适合您的情况。

# class - 项目结构中的字典

> ID：656665
> 
> 赞同：1
> 
> 时间：2009-03-18T01:32:35.070
> 
> 标签：class, dictionary, project, structure

我正在打包一个应用程序，在该应用程序中我使用了很多 Dictionary 类来存储 Function 和 Action 委托。我现在正在重构我的项目并清理代码。我的问题是，您应该或将您的 Dictionary 类放在您的项目结构中的什么位置？现在，它们位于调用类源文件中，但我想知道是否应该创建一个单独的源文件来存储我的所有字典。我希望这是足够的信息。如果不是，请原谅我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T01:40:10.853

通常， Dictionary 类本身就是一个东西（一个库），您的各种用户将创建它的实例。

如果需要，他们可能会对其进行专门化/子类化，但这应该很少见。

也许你真的应该问自己“为什么我有多个 Dictionary 类”的问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T03:07:23.750

我会以与其余代码相同的方式组织字典；将相关功能组合在一起，并将不相关的功能分开。

另外，我会看看委托字典是如何使用的。如果您的使用模式*总是*检索一个委托并立即调用它，那么我会将该行为包装到一个具有“做正确的事情”方法的类中。然后每个这样的类都可以通过它所代表的领域概念来命名。

例如，如果您有一本将美国州缩写映射到销售税计算的字典，那么您可以使用“计算销售税”方法将所有这些包装到一个类中，该方法将州代码和小计作为参数。它使用字典查找正确的计算方案这一事实成为隐藏的实现细节。

# c# - 瓦拉会活下来吗？

> ID：656669
> 
> 赞同：18
> 
> 时间：2009-03-18T01:33:40.697
> 
> 标签：c#, c, vala

我只是想知道[Vala 项目](http://en.wikipedia.org/wiki/Vala_(programming_language))是如何进行的。我不确定这是否会是一项伟大的新技术，或者只是一项会被淘汰的技术。有谁知道有多少人在做这个项目以及我是否可以做出贡献（编写教程、报告/修复错误等）？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-03-18T01:37:12.953

它是开源的，所以它不会死。也就是说，有很多人（包括我自己）喜欢 c#，但也希望能够从他们的硬件中获得最大的性能。这使您可以在使用自己喜欢的语言的同时做到这一点。我看不到这样的死亡。

**编辑**

此外，我不为嵌入式设备编程，但我想像这样的东西可以打开 c# 以及它为不同类别的平台带来的所有好处。这一定会引起一些兴趣。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-10-03T10:51:27.510

如果您检查 Vala 项目的指标，您会发现它从一开始就具有非常强劲的增长模式。它不仅是开源的，而且随着时间的推移，越来越多的开发人员为它做出贡献，越来越多的人依赖它等等。

您可以单击链接“非常大，活跃的开发团队”和“已建立的代码库”，以查看这些标签与其他开源项目相比在数字方面的含义。

[http://www.ohloh.net/p/vala](http://www.ohloh.net/p/vala)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2011-03-25T18:10:43.300

考虑到用 Vala 编写的大量 GNU/Linux 软件，我认为它不会很快出现：

*   [肖特韦尔](http://yorba.org/shotwell/)
*   [伦巴第](http://yorba.org/lombard/)
*   [菲尔莫尔](http://yorba.org/fillmore/)
*   [波斯特勒](https://launchpad.net/postler)
*   [玛雅](http://launchpad.net/maya)
*   [板](https://launchpad.net/plank)
*   [马林鱼](https://launchpad.net/marlin)
*   [应用中心](https://launchpad.net/appcenter)
*   [皮诺](http://pino-app.appspot.com/)
*   [卢克鲁里](http://lucruri.chevah.com/)
*   还有[更多...](http://live.gnome.org/Vala/Documentation#Projects_Developed_in_Vala)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-06-13T02:13:13.183

它看起来相当不错，这是我开始之前的担忧之一。我已经开始了，两周后，我认为情况看起来很健康。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-11-23T09:54:40.817

瓦拉有一个繁荣的未来的机会非常好：

让我们暂时讨论一下 GNOME。如果您监视 GNOME 贡献者的情况，您会注意到许多不遵守“C 中的真人代码”原则的新人正在进入现场。这些人是在 Python 和 Ruby 等高级语言中长大的，而这些人被编写 gobject 代码所必需的大量样板代码吓跑了。甚至相当多的旧 GNOME 项目也正在迁移到 Vala。

Vala 不仅适用于 UI 代码，而且对于想要编译代码的速度以及现代面向对象语言的抽象的每个人来说，它都是一个非常好的选择。特别是对闭包和协程的支持允许以非常清晰和简洁的方式编写算法。并不是说你不能用 C++ 做到这一点，而是它更麻烦。

最后但并非最不重要的一点是，正在进行的工作使 Vala 在不依赖 gobject 库的情况下变得有用——所谓的“posix”配置文件实现了有限数量的功能，允许您为嵌入式 CPU 编写内核模块或代码（想想 Atmel）与瓦拉。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-02-27T18:00:48.400

如果您检查 Linux 桌面场景，每个第二个新应用程序似乎都是用 Vala 编写的。Vala 至少正在迅速成为 Linux 桌面的首选语言。

# performance - IFrame 的效率如何？

> ID：656674
> 
> 赞同：1
> 
> 时间：2009-03-18T01:35:49.897
> 
> 标签：performance, iframe, html

如果我构建了一个包含数百个 IFrame 的页面，这会非常慢，还是会类似于拥有一百个 div？

我问的原因是我正在寻找一种很好的递归方式来构建网页，我可以在其中加载页面的子元素，就好像它们是自己的完整页面一样，带有自己的 url。

想法？意见？我是不是完全疯了，甚至在想它？

**编辑：**我刚刚意识到这可能绝对会破坏网络连接，因为它必须为每个嵌入式框架发出单独的请求，不是吗？我在提高网页加载效率方面所学到的一切都是减少它需要发出的 http 请求的数量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T01:39:07.847

是的，确实——浏览器必须为每个嵌入的 iframe 发出单独的请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T01:54:39.727

这不仅仅与效率有关，但也有各种陷阱，例如 Body OnLoad 直到页面层次结构中的每个 IFrame 都首先完全加载后才会触发。

如果您需要 IFrame javascript 中的内容能够“调用”到另一个 IFrame 或主页，这也可能导致可维护性和可读性问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T01:39:58.607

它会比打开数百个网络浏览器稍微高效一点，而且只是稍微高效一点。您仍将渲染您在 iframe 中加载的页面，这会占用内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T02:00:31.820

我发现很难在 iframe 之间进行通信（例如在 javascript 中）。我更喜欢 div，你可以在需要的地方使用服务器缓存。也许使用 Ajax 部分渲染的解决方案可能更优雅。

# jquery - jQuery-UI 主题 - CSS 大小差异

> ID：656676
> 
> 赞同：3
> 
> 时间：2009-03-18T01:36:58.677
> 
> 标签：jquery, css, jquery-ui, jquery-plugins

在网站（[主题浏览器](http://www.jqueryui.com/themeroller)）上使用[jQueryUI](http://www.jqueryui.com/home)示例时，看起来很棒。但是，当我将代码和主题放入我的应用程序中时，大小会变得不正常（我正在尝试使用 Redmond 主题）。

关于为什么这些样本看起来如此不同的任何想法？在我构建的应用程序中，只有 1 个用于 Redmond 主题的 CSS 参考......下面的这些图像正是它们在浏览器中呈现的方式。

**我的应用程序：**
[替代文本 http://www.imageunload.com/public/14462/jQueryUI.png](http://www.imageunload.com/public/14462/jQueryUI.png)

**jQuery UI 示例：**
[替代文本 http://www.imageunload.com/public/14463/jQueryUI-Sample.png](http://www.imageunload.com/public/14463/jQueryUI-Sample.png)

**我的申请代码：**

```
<div>
    <asp:TextBox ID="txtDateSample" runat="server"></asp:TextBox>
</div>
</form>
<script type="text/javascript" language="javascript">
    $(function() {
        $('#<%= txtDateSample.ClientID %>').datepicker({
            showButtonPanel: true,
            showOn: 'button',
            buttonImage: '../Graphics/Icons/calendar.png',
            buttonImageOnly: true
        });
    });
</script> 
```

**Div 的 Firebug 视图：**

```
<div id="ui-datepicker-div" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-18T01:41:52.147

这曾经发生在我身上。这是因为您的某些样式无意中影响了日历 div。获取 Firebug 并查看日历应用了哪些样式。然后编辑主题以覆盖您的样式所做的任何事情。

**编辑：**

您要查找的部分不是生成的 HTML，尽管这很重要，但更多的是实际应用的样式：

[![Firebug 样式选项卡](https://i.stack.imgur.com/DsQrZ.jpg)](https://i.stack.imgur.com/DsQrZ.jpg)
[（来源：[pathf.com](http://labs.pathf.com/ajax/blogposts/05052008/Firebug_Style_Tab.jpg)）]

您将看到正在应用的样式，而已分配但未应用的样式将被~~删除~~。您可能会在此窗口中看到您的一些样式。他们很可能是罪魁祸首。通过使它们更具体来修复它们，您的日历应该很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T22:35:50.493

当事情比你预期的要小时，一个好的假设是某种百分比/比例大小正在递归地发生，即你有

```
.foo {width: 80%;} 
```

某处并且已经应用​​了两次或更多次，这意味着您的宽度最终达到 80% 的 80% 的 80%。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-12T07:54:49.313

在您的 index.php 页面或主页或每个页面中添加此代码

```
<head>
<style>
    body{
        font-size: 62.5%; /* it is necessary for jquery ui */
        }
</style>
</head> 
```

使用 jquery-ui 时管理字体或标签的大小是合法的编码程序。

# asp.net - ASP.Net 页面的全局时序

> ID：656681
> 
> 赞同：1
> 
> 时间：2009-03-18T01:39:45.537
> 
> 标签：asp.net, global-asax, timing

我刚刚继承了一个我需要维护的由其他人编写的网站（ASP.Net 2.0）。
该代码并不可怕，但它有许多使网站运行缓慢的东西。

我有一个想法来监控这个，我想看看更有经验的开发人员是怎么想的。

我现在的目标是找出页面加载时间过长，将注意力集中在这些地方。

我正在考虑在 Global.asax 中挂钩 PreRequestHandlerExecute 和 PostRequestHandlerExecute 事件，并在“Pre”中创建一个 StopWatch，将其附加到 HttpContext.Items，并在“Post”中读取它，如果请求超过，比如说， 100ms，它会向我报告让我知道。

一些“伪代码”将是：

```
protected void Application_PreRequestHandlerExecute(Object sender, EventArgs e) {
    System.Diagnostics.Stopwatch theTimer = new Stopwatch();
    theTimer.Start();
    HttpContext.Current.Items.Add("RequestTimer", theTimer);
}

protected void Application_PostRequestHandlerExecute(Object sender, EventArgs e) {
     Stopwatch theTimer = (Stopwatch) HttpContext.Current.Items["RequestTimer"];
     System.Diagnostics.Debug.WriteLine(theTimer.ElapsedMilliseconds + "@: " + HttpContext.Current.Request.RawUrl)
} 
```

您如何看待这种方法？
这样做合理吗？
它会让我的网站爬行吗？
有一个更好的方法吗？

一些想法：
- 抓住 DateTime.Now.Ticks 并存储它可能会更好，这可能会比 StopWatch 更轻
- 我知道让所有页面都继承自我自己的页面会更好，并且时间在那里，但我不想浏览几十页并全部更改。

任何想法都非常感谢！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T01:42:34.373

更好的方法是启用[跟踪](http://www.asp101.com/articles/robert/tracing/default.asp)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T01:45:41.620

I wouldn't do this. This is going to be more trouble than it's worth. There are some good profiling tools for ASP.NET like CLR Profiler and Red Gate's ANTS Profiler.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T01:43:43.857

Instead of messing with a stopwatch I'd just throw the start time in the HttpContext collection and pull it back out. Then you can perform a simple subtraction at the end of the request which should have a negligible affect on performance.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-18T02:03:52.123

As BobbyShaftoe remarked, profiling's your best bet. But consider JetBrains' dotTrace as well; it's very, very good.

# ruby - 为什么在我的示例中可以公开访问：“MySymbol::TABLE”

> ID：656693
> 
> 赞同：2
> 
> 时间：2009-03-18T01:44:44.963
> 
> 标签：ruby, class, hash, scope, public

```
class MySymbol
  TABLE={}
  def initialize(str) @str = str end
  def to_s() @str end
  def ==(other)
    self.object_id == other.object_id
  end
end

class String
  def my_intern
    table = MySymbol::TABLE
    unless table.has_key?(self)
      table[self] = MySymbol.new(self)
    end
    table[self]
  end
end

"foo".my_intern 
```

在上面的示例中，我在博客上找到，我知道 TABLE 是一个哈希并且是 MySymbol 类的成员。我不明白的是如何从 String 类内部公开访问它。我认为类实例变量默认是私有的，您需要使用 get/set 方法从类外部访问它们吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-18T01:47:24.113

在您的示例中，`TABLE`是一个常量，而不是实例（或类）变量（即没有前缀 wit `@`。）

此外，实例变量不是“默认私有的”（例如 C++ 类的情况），尽管它可能表面上看起来是这样；它们根本无法*通过设计*在课堂外访问，而不是因为它们是“私有的”（你不能让它们成为“非私有的”。）

# delphi - 以编程方式将 CSV 文件加载到 Excel 工作表（Delphi 7）

> ID：656701
> 
> 赞同：4
> 
> 时间：2009-03-18T01:48:37.917
> 
> 标签：delphi, excel, delphi-7

我有大量数据要插入到现有 Excel 工作簿的工作表中。Excel 工作簿将具有其他包含计算和数据透视表的工作表。数据可能有多达 60,000 行和 30 多列。此解决方案必须适用于 Excel 2003 和 Excel 2007。

使用 Excel OLE 对象太慢了，所以我们尝试从 CSV 文件加载数据。我们提出了一种加载数据的方法，方法是将数据放在剪贴板上，然后将其粘贴到工作表中。我觉得这是一个相当的kludge。是否有另一种以编程方式将 CSV 文件加载到工作表中的方法？或者也许完全不同的解决方案？

* * *

**更新：**在我们完全调查答案之前，我们被另一项任务猛烈抨击。我们应该能够在几周内回到这个问题上。当我们回到这个任务时，我一定会再次更新。

感谢您迄今为止的所有答案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T12:34:18.380

XLSReadWrite 是一个可以从 Delphi 读写 excel 文件的组件。它速度很快，并且支持 Excel 2003 和 2007。您可以创建新的 excel 文件以及打开现有的文件并添加/修改它们。

此外，您无需安装 Excel 即可使用它。

请参阅[http://www.axolot.com/components/xlsrwii20.htm](http://www.axolot.com/components/xlsrwii20.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T02:03:36.727

您是否有可能放弃使用 Office 2003 的要求？我会推荐[Open XML Format SDK](http://www.microsoft.com/downloads/details.aspx?FamilyId=C6E744E5-36E9-45F5-8D8C-331DF206E0D0&displaylang=en)。它允许您将托管代码程序集绑定到可以处理诸如打开或关闭之类的事件的电子表格文档，以及读取和写入文档中的单元格等。或者，您可以使用它来操作应用程序中的 XSLX 文档。实际上，相当光滑。

既然这对您不起作用，那么编写一个在加载电子表格时拉入 CSV 文件的宏怎么样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T02:02:30.490

您可以将 csv 加载到 listview 或使用 OLEDB 提供程序将其加载到 DBGrid 上，然后使用 Max Components 的 TMxExport 组件将其导出为 xls 文件格式：

[最大组件](http://www.maxcomponents.net/index.php?id=1&page=1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T02:11:46.877

您是否尝试过将 csv 文件直接链接到工作表中。

转到数据 -> 导入外部数据 -> 导入数据将文件类型更改为“文本文件”

然后，您可以在 csv 更新时刷新工作表。

注意：我没有根据您指出的数据量来做这件事，所以 YMMV

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T03:20:14.280

实际上，有一种方法非常快，非常古老的技术（现在），但可能是最快的。

它是 ADO 或更早版本的 DAO（注意不是 ADO.NET）

您可以使用 ADO 和 JET 引擎读取 CSV 文件以将数据放入 ADO 记录集中，然后 Excel 范围对象具有 CopyFromRecordSet 方法，该方法将从 ADO（或 DAO）记录集中复制（非常快）。

[http://msdn.microsoft.com/en-us/library/aa165427(office.10).aspx](http://msdn.microsoft.com/en-us/library/aa165427(office.10).aspx)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-03-19T11:45:52.030

您可以尝试使用制表符分隔值而不是 CSV - 而不是将其粘贴到 Excel 中 :)

# c++ - vim、ctags 和同名标识符

> ID：656702
> 
> 赞同：18
> 
> 时间：2009-03-18T01:48:57.510
> 
> 标签：c++, vim, ctags

`vim + ctags`适用于 C 项目，因为 C 不允许函数重载，并且由于基本的作用域设施，通常鼓励手动为符号添加前缀。

在 C++ 中，函数经常在子类中被重载和覆盖。这使得 vim 总是跳转到错误类中的标签上`"Ctrl + ]"`。有没有办法让它表现得更聪明一点？我知道我可以带一个带有标签替代品的列表，但是总是不得不提出这个列表，并且每当我想跳到定义时按数字找到所需的标签，这真是太烦人了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-18T04:55:19.653

还有“tagNext”移动到下一个标签（或：tn<enter>）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-19T01:24:56.250

我经常使用[tjump](http://www.vim.org/htmldoc/tagsrch.html#:tjump)。它支持制表符完成，这很有帮助。如果找到多个标签，它会给出一个列表供您选择，如果只找到一个，它将直接跳转到标签（与[tselect](http://www.vim.org/htmldoc/tagsrch.html#:tselect)不同）。

用法：

```
:tj foo 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-03-18T08:29:02.587

我知道您的问题有两种解决方法（看来您也知道）：

*   使用 :tselect 和标签名称或 g] 将光标放在标签上以获取匹配标签的列表，并从列表中按数字转到标签上；
*   在热键上映射 :tnext 或 :tprev （我已经映射到 F6 和 F7 上）并手动找到所需的功能；

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-18T08:51:10.600

您可以使用我的脚本，通过键入类名的一些字母或特殊标签（如“字段”、“函数”、“构造函数”等）来帮助您选择所需的标签。

[http://www.vim.org/scripts/script.php?script_id=2507](http://www.vim.org/scripts/script.php?script_id=2507)

# bison - flex 究竟是如何支持野牛定位的？

> ID：656703
> 
> 赞同：23
> 
> 时间：2009-03-18T01:49:15.433
> 
> 标签：bison, flex-lexer

我正在尝试使用 flex 和 bison 创建过滤器，因为我想从复杂语言中获取某些语法元素。我的计划是使用 flex + bison 来识别语法，并转储出感兴趣元素的位置。（然后使用脚本根据转储的位置获取文本。）

我发现 flex 可以支持名为 bison-locations 的野牛功能，但它是如何工作的。我尝试了 flex 文档中的示例，似乎 yylloc 不是由 flex 自动设置的，我总是得到`(1,0)-(1,0)`. flex 可以自动计算每个令牌的位置吗？如果没有，定义了哪些接口函数供我实现？有什么例子吗？

关于工具有更好的解决方案吗？

最好的问候，凯文

**编辑：**

现在yylex的界面变成了：

```
int yylex(YYSTYPE * yylval_param,YYLTYPE * yylloc_param ); 
```

野牛手册未指定词法分析器应如何实现以正确设置 yylloc_param。对我来说，很难手动跟踪每个令牌的列号。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2011-04-27T22:53:05.500

yylex 声明可能更改了，因为您使用了可重入或纯解析器。似乎网络上的许多文档都表明，如果您希望野牛位置工作，则需要这样做，但不是必需的。

我也需要行号，发现 Bison 文档在这方面令人困惑。简单的解决方案（使用全局变量 yylloc）：在您的 Bison 文件中，只需添加 %locations 指令：

```
%{
...
%}
%locations
...
%%
... 
```

在你的词法分析器中：

```
%{
...
#include "yourprser.tab.h"  /* This is where it gets the definition for yylloc from */
#define YY_USER_ACTION yylloc.first_line = yylloc.last_line = yylineno;
%}
%option yylineno
...
%%
... 
```

YY_USER_ACTION 宏在您的每个令牌操作之前被“调用”并更新 yylloc。现在您可以像这样使用@N/@$ 规则：

```
statement : error ';'   { fprintf(stderr, "Line %d: Bad statement.\n", @1.first_line); } 
```

，或使用 yylloc 全局变量：

```
void yyerror(char *s)
{
  fprintf(stderr, "ERROR line %d: %s\n", yylloc.first_line, s);
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-03-02T08:36:41.547

既`bison`不会自动`flex`更新，也不会`yylloc`自动更新，但如果你知道诀窍，你自己做其实并不难。

实现`yylloc`支持的诀窍是，即使`yyparse()`声明`yylloc`了，它也永远不会改变它。这意味着如果您`yylloc`在一次调用词法分析器中进行修改，您将在下一次调用中找到相同的值。因此，`yylloc`将包含最后一个标记的位置。由于最后一个令牌的结束与当前令牌的开始相同，您可以使用旧`yylloc`值来帮助您确定新值。

换句话说，`yylex()`不应该*计算* `yylloc`；它应该*更新* `yylloc`。

要更新，我们必须首先将值`yylloc`复制到，然后更新值以反映刚刚匹配的令牌的长度。（这不是标记的 ；它是行和列的长度。）我们可以在宏中执行此操作，该宏在执行任何词法分析器操作之前被调用；这确保如果规则匹配但它不返回值（例如，跳过空格或注释的规则），则跳过该非标记的位置，而不是包含在实际标记的开头，或者以使位置跟踪不准确的方式丢失。`last_``first_``last_``strlen()``YY_USER_ACTION`

这是一个用于可重入解析器的版本；`->`您可以通过将运算符交换为：将其修改为不可重入解析器`.`：

```
#define YY_USER_ACTION \
    yylloc->first_line = yylloc->last_line; \
    yylloc->first_column = yylloc->last_column; \
    for(int i = 0; yytext[i] != '\0'; i++) { \
        if(yytext[i] == '\n') { \
            yylloc->last_line++; \
            yylloc->last_column = 0; \
        } \
        else { \
            yylloc->last_column++; \
        } \
    } 
```

如果您愿意，您可以改为将该代码放在一个函数中并让宏调用该函数，但这两种技术是等效的。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2011-11-06T02:30:50.947

我喜欢 Shlomi 的回答。

此外，我也在寻找更新列位置。发现[http://oreilly.com/linux/excerpts/9780596155971/error-reporting-recovery.html](http://oreilly.com/linux/excerpts/9780596155971/error-reporting-recovery.html)在阅读了 Shlomi 的回答后更有意义。

不幸的是，yylloc 页面上有一个错字。我把它简化了一点。

在您的解析器中添加：

```
%locations 
```

在你的词法分析器中：

```
%{

#include "parser.tab.h"

int yycolumn = 1;

#define YY_USER_ACTION yylloc.first_line = yylloc.last_line = yylineno; \
    yylloc.first_column = yycolumn; yylloc.last_column = yycolumn + yyleng - 1; \
    yycolumn += yyleng; \
    yylval.str = strdup(yytext);

%}

%option yylineno 
```

列位置可能会发生一些事情，它不会严格跟踪列，而是不断增加。这只是我的无知，如果它让任何人感到困惑，请道歉。我目前正在使用列来保持文件字符数，在我的情况下，这比列位置更有益。

希望有帮助。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-03-18T02:50:45.507

看看[Bison 手册的第 3.6](https://www.gnu.org/software/bison/manual/html_node/Tracking-Locations.html#Tracking-Locations)节- 这似乎涵盖了一些详细的位置。结合您在 Flex 手册中找到的内容，这可能就足够了。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-10-03T00:58:19.287

如果您只关心保留行号，Shomi 的答案是最简单的解决方案。但是，如果您还需要列号，则需要跟踪它们。

一种方法是`yycolumn = 1`在出现换行符的任何地方添加规则（如 David Elson 的回答中所建议的那样），但如果您不想跟踪换行符可能出现的所有位置（空格、注释等......）另一种方法是在每个动作开始时检查`yytext`缓冲区：

```
static void update_loc(){
  static int curr_line = 1;
  static int curr_col  = 1;

  yylloc.first_line   = curr_line;
  yylloc.first_column = curr_col;

  {char * s; for(s = yytext; *s != '\0'; s++){
    if(*s == '\n'){
      curr_line++;
      curr_col = 1;
    }else{
      curr_col++;
    }
  }}

  yylloc.last_line   = curr_line;
  yylloc.last_column = curr_col-1;
}

#define YY_USER_ACTION update_loc(); 
```

最后，要注意的一件事是，一旦您开始手动跟踪列号，您也可以在同一位置跟踪行号，而不必为使用 Flex 的`yylineno`选项而烦恼。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-01T22:03:51.073

所以，我让这个“工作”，但有几个额外的步骤（我可能在这里忽略了它们......在这种情况下道歉）：

1.  在***parser.y***中，我不得不说：

    ```
    #define YYLEX_PARAM &yylval, &yylloc 
    ```

    即使使用`%locations`and `bison --locations`，也可以让它传递数据。

2.  在***lexer.l***我不得不使用`->`而不是`.`for`yylloc`

3.  同样在***lexer.l***中，我重置了操作中的列：

    ```
    [\n] { yycolumn = 1; } 
    ```

显然有点复杂，`\r`等等，但至少我让它工作了。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-11-09T16:27:17.710

对 Shlomi 的回答的补充：

如果在 bison 中使用 %define api.pure 创建可重入解析器，还需要在 flex 中指定 %option bison-locations。这是因为在可重入解析器中 yylloc 不是全局变量，需要传递给词法分析器。

因此，在解析器中：

```
%define api.pure
%locations 
```

在词法分析器中：

```
#include "yourprser.tab.h"
#define YY_USER_ACTION yylloc.first_line = yylloc.last_line = yylineno;
%option bison-locations
%option yylineno 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-08-13T14:57:29.350

我想我设法使它工作（归功于野牛手册[ltcalc 词法分析器](http://www.gnu.org/software/bison/manual/html_node/Location-Tracking-Calc.html#Location-Tracking-Calc)的作者）。默认情况下，野牛创建 yylloc 包含

```
{ first_line, first_column , last_line , last_column } 
```

我们只需要在词法分析器中更新这些值。前任 ：

```
[ \t]     { ++yylloc.last_column; }
[\n]      { yyloc.last_column = 0; return EOL; }
[a-zA-Z]+ { 
            yylloc.last_column += strlen(yytext);
            return IDENTIFIER;
          } 
```

现在在野牛中，检索这些字段：

```
statement : IDENTIFIER '=' expression 
            { printf("%d - %d\n", @1.last_line, @1.last_column); } 
```

默认情况下这些字段初始化为1，我们应该将列字段初始化为零，否则会报错列。

# python - Python lib 读取 Flash swf 格式文件

> ID：656704
> 
> 赞同：6
> 
> 时间：2009-03-18T01:49:32.423
> 
> 标签：python, flash

我对使用 Python 破解 Flash swf 文件中的数据很感兴趣。有很好的关于 swf[文件](http://www.adobe.com/devnet/swf/)格式的文档，我正在考虑编写我自己的 Python lib 来使用标准 Python [struct](http://docs.python.org/library/struct.html) lib 解析该数据。

有人知道已经这样做的 Python 项目吗？我也会对使用 Perl、Ruby、Haskell 等的任何可用解决方案感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T02:02:41.627

好吧，除非你是为了好玩（在这种情况下，去吧！），为什么不使用[Ming](http://www.libming.org/)呢？据说它有python包装器......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-19T00:45:57.823

[我在SWF Tools](http://www.swftools.org/)中找到了另一个选项。它们提供了一个 Python 包装器，支持在 Python 中生成 SWF 文件。

但是，我不确定 SWF Tools 或 Ming 是否真的支持解析和修改现有的 swf 文件。两者似乎都更倾向于从头开始生成 swf 文件。

# c++ - 在 Win32 上通过代码安装 Root CA Cert

> ID：656706
> 
> 赞同：9
> 
> 时间：2009-03-18T01:50:10.097
> 
> 标签：c++, winapi, certificate

我们刚刚使用 Microsoft 的 TS Gateway 设置了一个新的远程访问解决方案，这需要代表最终用户执行一些有些繁琐的步骤才能使其正常工作（安装我们的根 ca 证书、需要 RDP 6.1 客户端等）。

为了使这个设置过程尽可能简单（很多这些用户没有技术头脑），我希望创建一个程序来自动执行所有这些任务。我已经完成了大部分工作，但是我不完全确定如何将根 CA 证书导入 Windows 证书存储。

因为这可以在具有不同级别的补丁和更新的各种计算机上运行，​​所以我非常清楚 .NET 和任何非本机的东西 - 该工具应该“运行”而无需用户安装任何额外的东西（好吧，我会说 Windows XP，没有服务包，是 Windows 的最低要求版本）。话虽如此，如果它可以与工具捆绑在一起，我不介意使用第三方的东西，只要它不是很大，并且不引入任何交互步骤。理想情况下，windows API 中的某些东西是最好的，但是我似乎无法找到任何相关的东西。

目前该工具是一个 C++ 应用程序，所以我不介意它是否是相当低级的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-18T02:07:26.483

首先，您需要打开根证书存储...

```
 HCERTSTORE hRootCertStore = CertOpenSystemStore(NULL,"ROOT"); 
```

然后使用 CertAdd 函数之一添加证书，例如 CertAddEncodedCertificateToStore。

```
CertAddEncodedCertificateToStore(hRootCertStore,X509_ASN_ENCODING | PKCS_7_ASN_ENCODING,pCertData,cbCertData,CERT_STORE_ADD_USE_EXISTING,NULL); 
```

pCertData 和 cbCertData 可能会指向您从文件中读取的证书数据（不确定证书是否在文件中，或者您将如何将其包含在您的应用程序中）。

然后关闭商店...

```
CertCloseStore(hRootCertStore,0); 
```

注意：如果以用户身份运行，此代码会将证书安装到用户的根存储，而不是计算机的根存储。它还会导致用户必须理解并选择“是”以授权导入的警告对话框。如果您的安装程序可以在系统帐户中运行此代码，则导入将影响计算机的根存储并且不会显示警告对话框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T01:57:08.863

你看过[CertAddEncodedCertificateToStore](http://msdn.microsoft.com/en-us/library/aa376015(VS.85).aspx)吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T17:56:25.130

您还可以查看 CertAddEncodedCertificateToSystemStore

# crystal-reports - 以编程方式更改水晶报表公式

> ID：656713
> 
> 赞同：4
> 
> 时间：2009-03-18T01:56:56.773
> 
> 标签：crystal-reports

我想知道是否可以以编程方式更改水晶报表的公式。我想在我的网络应用程序中列出报告的所有公式，并让用户可以修改它们。

那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-18T02:51:37.377

```
using CrystalDecisions.CrystalReports.Engine;

namespace Craft
{
    class Mate
    {
        Order_Print _r = new Order_Print();

        void Preview()
        {
            foreach (FormulaFieldDefinition f in _r.DataDefinition.FormulaFields)
            {
                MessageBox.Show(f.Name);

                f.Text = InputBox.Show("Input the formula for " + f.Name);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T02:50:50.357

是的，例如我们使用以下函数来更改公式：

```
 Public Sub SetReportFormulaContents(ByRef Report As ReportDocument, ByVal FormulaName As String, ByVal FormulaContents As String)
    Dim Formula As FormulaFieldDefinition = Nothing

    ' Get the ReportObject by name and cast it as a FieldObject
    If TypeOf (Report.DataDefinition.FormulaFields.Item(FormulaName)) Is CrystalDecisions.CrystalReports.Engine.FormulaFieldDefinition Then
        Formula = Report.DataDefinition.FormulaFields.Item(FormulaName)
        Formula.Text = FormulaContents
    End If
End Sub 
```

# c# - 尝试将布尔 C# 变量传递给 javascript 变量并将其设置为 true

> ID：656715
> 
> 赞同：68
> 
> 时间：2009-03-18T01:58:12.870
> 
> 标签：c#, javascript

在我的 .aspx 页面中出现问题，我将布尔变量 (C#) 传递给期望布尔类型的 javascript 函数。

但是 C# 变量返回 True，而 javascript 不喜欢大写。

```
myjavascript( <%= MyBooleanVariableInCSharp %> ); 
```

如果我将 c# 变量转换为字符串，那么我的 javascript 变量将变为字符串而不是 js bool 值！

这个噩梦的解决方案是什么？哈哈

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2009-03-18T02:00:00.510

试试这个：

```
myjavascript( <%= MyBooleanVariableInCSharp.ToString().ToLower() %> ); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-05-28T21:38:05.580

如果您需要经常这样做，只需将其添加到 javascript（或您的 js 库文件等）的顶部即可

```
var True = true, False = false; 
```

然后你编码

```
myjavascript( <%= MyBooleanVariableInCSharp %> ); 
```

会工作得很好。

如果出于某种原因您不想使用变量，另一种选择是编写您的 javascript 调用，如下所示：

```
myjavascript( '<%= MyBooleanVariableInCSharp %>'=='True' ); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-06-27T16:19:43.940

你也可以这样做。

```
myjavascript(<%=myBooleanVariableInCSharp ? "true" : "false" %>); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-07-20T06:55:32.847

其他答案针对的是旧版本， 如果您使用的是**Razor ，则在****Razor** 之前，这就是解决方案

 **```
myjavascript( @MyBooleanVariableInCSharp.ToString().ToLower() ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-30T08:05:34.230

```
function toBool(s){ 
   return s==="True";
}

var b = toBool("@csharpvariable.ToBoolean()"); 
```

# asp.net - 如何在 Linux 服务器上提供 ASP.NET 应用程序？

> ID：656718
> 
> 赞同：2
> 
> 时间：2009-03-18T01:59:58.187
> 
> 标签：asp.net, linux

是否可以？如果是这样，请解释如何做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-18T02:02:47.413

我认为您正在寻找[mono](http://www.mono-project.com)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-18T02:03:21.297

您可以使用 Mono 在 Linux 上运行大多数 ASP.Net 应用程序：

[http://www.mono-project.com/ASP.NET](http://www.mono-project.com/ASP.NET)

Mono 是（大部分）.Net 的开源实现

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-18T02:25:29.310

正如其他海报所指出的，您可以将 Mono 和 Apache 与 mod_mono 一起使用。我不知道它是否足够强大且功能丰富，可以满足您的需求。（例如，Mono 当前的 WCF 实现只是框架。）所以它是否可取取决于您打算做什么。如果其他人的钱依赖于你的应用程序的健壮性，那么最安全的做法是把一些钱花在 Windows 服务器上并完全使用 Microsoft。

更新：在评论中，您认为价格是一个问题。从长远来看，与使用劣质软件所涉及的成本相比，您为托管支付的费用微不足道。如果您可以选择，我建议您使用 Windows 托管，或者完全使用不同的开发环境。LAMP、Java、Ruby on Rails——每一个都是完美的选择，我相信还有很多其他的。但是，如果您出于某种原因受限于使用 .NET，那么 Microsoft 确实是目前企业级 ASP.NET 的唯一选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-18T02:05:11.997

我不会尝试使用 Mono。您可以使用 VMware 或其他东西，但我会尝试走不同的路线。您可以在 Mono 上运行一个非常基本的 ASP.NET 站点；但我的意思是非常基本的。如果您的网站不重要，我不会推荐这种方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-18T02:07:02.287

可以在 Linux 上运行 ASP.NET。你应该看看[Mono 项目](http://www.mono-project.com/Main_Page)，Mono 有一个ASP.NET 和 ASP.NET AJAX 的[实现](http://www.mono-project.com/ASP.NET)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-18T02:20:18.917

您需要使用单声道和 XPS（这是在单声道上运行 ASP.NET 框架的服务器）。有一个独立版本的 XPS 和一个通过 Apache 工作的版本。这是在 Linux 上提供文件的最佳方式。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-03-18T02:02:35.137

使用 WINE（或类似的东西，Mono，就是这样）可能是可能的，但您将需要所有 .NET 框架，因此设置起来可能有点多

# bash - 从命令行查找目录中的文件

> ID：656741
> 
> 赞同：62
> 
> 时间：2009-03-18T02:15:02.377
> 
> 标签：bash, shell, autocomplete

在 eclipse 和 textmate 等编辑器/IDE 中，有快捷方式可以快速找到项目目录中的特定文件。

是否有类似的工具可以在 bash 或其他 shell 中对目录中的文件名（递归）进行完整路径完成？

我有很多目录的项目，还有很深的目录（叹气，java）。在 shell 中点击选项卡仅循环通过直接目录中的文件，这还不够 =/

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2009-03-18T02:17:18.457

```
find /root/directory/to/search -name 'filename.*'
# Directory is optional (defaults to cwd) 
```

支持标准 UNIX 通配。有关[`man find`](http://linux.die.net/man/1/find)更多信息，请参阅。

如果你使用 Vim，你可以使用：

```
:e **/filename.cpp 
```

或者`:tabn`任何接受文件名的 Vim 命令。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-03-18T03:45:51.083

如果您希望对文件列表执行某些操作，则可以将 find 与 bash`$()`构造结合使用（比反引号更好，因为它允许嵌套）。

例如，假设您位于项目目录的顶层，并且您想要一个以“btree”开头的所有 C 文件的列表。命令：

```
find . -type f -name 'btree*.c' 
```

将返回它们的列表。但这并不能真正帮助与他们做点什么。

因此，让我们进一步假设您要在所有这些文件中搜索字符串“ERROR”或全部编辑它们。您可以执行以下操作之一：

```
grep ERROR $(find . -type f -name 'btree*.c')
vi $(find . -type f -name 'btree*.c') 
```

去做这个。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-18T03:41:39.127

当我在 UNIX 世界中时（使用 tcsh (sigh...)），我曾经设置过各种“查找”别名/脚本来搜索文件。我认为默认的“find”语法有点笨拙，所以我曾经有别名/脚本将“find . -print”通过管道传输到 grep，它允许您使用正则表达式进行搜索：

```
# finds all .java files starting in current directory
find . -print | grep '\.java'

#finds all .java files whose name contains "Message"
find . -print | grep '.*Message.*\.java' 
```

当然，上面的例子可以用普通的 find 来完成，但是如果你有更具体的搜索，grep 可以帮助很多。这工作得很好，除非“find . -print”有太多的目录需要递归......然后它会变得很慢。（例如，您不希望从根“/”开始执行此操作）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-01-14T15:21:12.407

我使用 ls -R，像这样通过管道传输到 grep：

```
$ ls -R | grep -i "pattern" 
```

其中 -R 表示递归列出所有文件，-i 表示不区分大小写。最后，模式可能是这样的：“std*.h”或“^io”（文件名中以“io”开头的任何内容）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-12-20T11:12:22.007

我使用这个[脚本](http://www.vim.org/scripts/script.php?script_id=1899)在项目中跨目录快速查找文件。我发现它工作得很好，并通过打开和关闭一个新的搜索缓冲区来利用 Vim 的自动完成功能。它还尽可能为您巧妙地完成，因此您通常只需键入一两个字符并在项目中的任何目录中打开文件。我开始使用它是因为一个 Java 项目，它为我节省了很多时间。您只需在开始编辑会话时通过键入 :FC（目录名称）构建一次缓存。您也可以只使用 . 获取当前目录和所有子目录。之后你只需输入 :FF （或 FS 打开一个新的拆分），它会打开一个新的缓冲区来选择你想要的文件。选择文件后，临时缓冲区关闭，您位于请求的文件中，可以开始编辑。[这](https://stackoverflow.com/questions/1457540/how-to-navigate-in-large-project-in-vim)是 Stack Overflow 上的另一个链接，可能会有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-18T02:18:25.753

[http://content.hccfl.edu/polllock/Unix/FindCmd.htm](http://content.hccfl.edu/pollock/Unix/FindCmd.htm)

linux/unix“查找”命令。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-18T02:36:43.213

是的，`bash`具有文件名完成机制。我自己不使用它们（懒得学习，而且我发现没有必要经常使它变得紧急），但基本机制是键入前几个字符，然后是一个制表符；只要名称明确，这将尽可能地扩展名称（也许根本不会）。好的 ol' 手册页中有大量与完成相关的 Emacs 样式命令。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-31T23:38:53.783

`locate <file_pattern>`

***`find`肯定会起作用，并且可以针对特定目录。但是，此命令比`locate`命令慢。在 Linux 操作系统上，每天早上都会构建一个数据库，其中包含所有目录和文件的列表，并且该`locate`命令有效地搜索该数据库，因此如果您想搜索今天未创建的文件，这将是完成此类任务的最快方法。

# java - 在Java中将多个参数作为单个参数传递

> ID：656742
> 
> 赞同：2
> 
> 时间：2009-03-18T02:16:06.510
> 
> 标签：java, parameters

我以前看过它的一个例子，但我从来没有真正找到任何好的参考资料来处理它。我知道可以通过将方法定义为

```
public void aMethod(int...a) 
```

但我对此一无所知。我看过一个例子，它返回了通过的整数的平均值。
这是一种过时的参数传递方式吗？使用它甚至可以接受吗？执行此操作时的语法到底是什么？（一些参考资料会很棒）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-18T02:19:43.240

它被称为可变参数（来自 C 语法）。有关概述，请参阅[Sun 的 varargs 指南，有关用法，请参阅此](http://java.sun.com/j2se/1.5.0/docs/guide/language/varargs.html)[JDC 技术提示](http://java.sun.com/developer/JDCTechTips/2005/tt0104.html)。它没有过时；它是作为功能请求放入的，因为以前您被迫创建一个数组或列表，这对于支持诸如 C 的 printf 之类的东西来说真的很难看。

```
public void myMethod(String... args) {
    for (String aString:args) {
        System.out.println(aString);
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-03-18T02:21:02.910

您将不得不将列表传递`ints`给方法来执行此操作，如下所示：

```
public void aMethod(int[] list) 
```

或这个：

```
public void aMethod(ArrayList<int> list) 
```

`params`如果 Java 有类似 C# 的关键字，但它没有，那就太好了。

# algorithm - 如何找到时间复杂度 T(n) 并表明它是有界的（Big Theta）？

> ID：656745
> 
> 赞同：4
> 
> 时间：2009-03-18T02:17:24.180
> 
> 标签：algorithm, time, complexity-theory

我试图弄清楚如何给出最坏情况的时间复杂度。我不确定我的分析。我读过嵌套`for`循环 big O is `n^2`；`for`这对于内部有循环的循环是否正确`while`？

```
// A is an array of real numbers.
// The size of A is n. i,j are of type int, key is
// of type real. 
Procedure IS(A)    
for j = 2 to length[A]     
{                
   key = A[ j ]               
   i = j-1   
   while i>0 and A[i]>key    
   {       
      A[i+1] = A[i]                         
      i=i-1                    
   }                
   A[i+1] = key      
} 
```

到目前为止，我有：

```
j=2 (+1 op)  

i>0 (+n ops)   
A[i] > key (+n ops)

so T(n) = 2n+1? 
```

但我不确定我是否必须进入`while`and`for`循环来分析更坏的情况时间复杂度......

现在我必须证明它是紧束缚的，即 Big theta。

我读过嵌套`for`循环有 Big O of `n^2`. Big Theta 也是如此吗？如果不是，我将如何去寻找 Big Theta？！

**C1= C sub 1, C2= C sub 2, no= n naught 都是正实数的元素

为了找到`T(n)`我查看了的值`j`并查看了 while 循环执行了多少次：

```
values of J:   2, 3, 4, ... n  
Loop executes: 1, 2, 3, ... n 
```

分析：
对 while 循环执行求和，并认识到它是`(n(n+1))/2` I 将其分配为我的`T(n)`，并证明它由`n^2`. 那是`n(n+1)/2= θ(n^2)`

从头开始工作：

```
Find C1, C2, no є R+ such that 0 ≤ C1(n^2) ≤ (n(n+1))/2 ≤ C2(n^2)for all n ≥ no

To make 0 ≤ C1(n) true, C1, no, can be any positive reals   
To make C1(n^2) ≤ (n(n+1))/2, C1 must be ≤ 1  
To make (n(n+1))/2 ≤ C2(n^2), C2 must be ≥ 1 
```

公积金：

```
Find C1, C2, no є R+ such that 0 ≤ C1(n^2) ≤ (n(n+1))/2 ≤ C2(n^2) for all n ≥ no
Let C1= 1/2, C2= 1 and no = 1\. 
```

1.  证明 0 ≤ C1(n^2) 为真 C1(n^2)= n^2/2
    n^2/2≥ no^2/2
    ⇒no^2/2≥ 0
    1/2 > 0
    因此 C1 (n^2) ≥ 0 被证明是正确的！

2.  证明 C1(n^2) ≤ (n(n+1))/2 为真 C1(n^2) ≤ (n(n+1))/2
    n^2/2 ≤ (n(n+1 ))/2 n^2 ≤ n(n+1)
    n^2 ≤ n^2+n
    0 ≤ n

    我们知道这是真的，因为 n ≥ no = 1
    因此 C1(n^2) ≤ (n(n+1))/2 被证明是真的！

3.  证明 (n(n+1))/2 ≤ C2(n^2) 为真 (n(n+1))/2 ≤ C2(n^2)
    (n+1)/2 ≤ C2(n)
    n+1 ≤ 2 C2(n)
    n+1 ≤ 2(n)
    1 ≤ 2n-n
    1 ≤ n(2-1) = n
    1≤ n
    另外，我们知道这是正确的，因为 n ≥ no = 1

    因此，根据 1、2 和 3，θ(n^2 )= (n(n+1))/2 为真，因为
    0 ≤ C1(n^2) ≤ (n(n+1))/2 ≤ C2( n^2) 对于所有 n ≥ no

告诉我你们在做什么...我正在努力理解这些材料，并希望大家提供意见！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-18T02:33:17.247

**您似乎正在实现[插入排序算法](http://en.wikipedia.org/wiki/Insertion_sort)，维基百科声称它是 O(N ² )。**

通常，在处理 Big-O 时，您会根据变量 N 而不是常量 C 分解组件。在您的情况下，您需要做的就是查看循环。

您的两个循环是（更糟糕的情况）：

```
for j=2 to length[A]
    i=j-1
    while i > 0
        /*action*/
        i=i-1 
```

外循环是 O(N)，因为它与元素的数量直接相关。

注意你的内循环如何依赖外循环的进度。这意味着（忽略一个问题）内部和外部循环的相关性如下：

```
j的内心
价值循环
----- -----
  2 1
  3 2
  4 3
  N N-1
----- -----
总计 (N-1)*N/2

```

所以遇到的总次数`/*action*/`是(N ² - N)/2，也就是O(N ² )。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T04:14:13.230

查看嵌套循环的数量并不是获得解决方案的最佳方法。最好看一下代码中正在完成的“工作”，在重负载 N 下。例如，

```
for(int i = 0; i < a.size(); i++)
{
  for(int j = 0; j < a.size(); j++)
  {
    // Do stuff
    i++;
  }
} 
```

是 O(N)。

一个函数 f 在 g 的 Big-Theta 中，如果它同时在 g 的 Big-Oh 和 g 的 Big-Omega 中。最坏的情况发生在数据 A 是单调递减函数时。然后，对于外循环的每次迭代，while 循环都会执行。如果每个语句贡献的时间值为 1，那么总时间将为 5*(1 + 2 + ... + n - 2) = 5*(n - 2)*(n - 1) / 2。这给出对数据的二次依赖。但是，如果数据 A 是单调递增的序列，则条件 A[i] > key 将始终失败。因此，外循环在恒定时间内执行 N - 3 次。那么 f 的最佳情况对数据具有线性相关性。对于一般情况，我们取 A 中的下一个数字，并在之前发生的排序中找到它的位置。平均而言，这个数字将在这个范围的中间，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T02:34:22.033

Big O（基本上）关于循环中的元素将被查看多少次才能完成任务。

例如，O(n) 算法将只遍历每个元素一次。AO(1) 算法根本不需要遍历每个元素，因为它有一个索引，所以它会准确地知道要在数组中查找的位置。这方面的一个例子是数组或哈希表。

循环内部的循环是 O(n^2) 的原因是因为循环中的每个元素都必须对其自身迭代 ^2 次。更改循环的类型与它无关，因为它本质上是关于 # of 迭代。

有一些算法方法可以让您减少所需的迭代次数。其中一个例子是像[Quicksort这样的“](http://en.wikipedia.org/wiki/Quicksort)[分](http://en.wikipedia.org/wiki/Divide_and_conquer_algorithm)而治之”算法，如果我没记错的话，它是 O(nlog(n))。

如果不更具体地了解您要完成的工作，很难为您的示例提出更好的替代方案。

# java - 简单的嵌套 for 循环示例

> ID：656747
> 
> 赞同：8
> 
> 时间：2009-03-18T02:18:37.533
> 
> 标签：java, for-loop

目前我正在为我的Java测试学习。在学习的时候，我遇到了一个小问题。

在这个 for 循环中：

```
for ( int i=1; i <= 3 ; i++ ) {
    for (int j=1; j <= 3 ; j++ ) {
        System.out.println( i + " " + j );
    }
} 
```

输出是：

```
1 1
1 2
1 3
2 1
2 2
2 3
3 1
3 2
3 3 
```

我的问题是，我不明白。当我阅读这段代码时，我一直在想它应该是这样的：

```
1 1
2 2
3 3 
```

为什么不是这样？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-18T02:20:38.293

i 的每次迭代，你都在开始一个全新的 j 迭代。

所以，你从 i==1 开始，然后 j==1,2,3 在一个循环中。然后 i==2，然后 j==1,2,3 在一个循环中，等等。

一步一步地完成它，这将是有意义的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-18T02:22:44.170

你所拥有的是一个循环内另一个循环。把它想象成时钟上的分针和时针。分针将转动 (1,2,3,4...59)，而时针仍在 1 上。因此，如果我们将小时视为 i，将分钟视为 j，我们有：

1 1
1 2
1 3
...
1 60

然后小时变为 2，分针继续转动：
2 1
2 2
2 3
...
2 60

一旦我们到达，我们就完成了

12 1
12 2
12 3
...
12 60

这是循环结束的地方。你的例子很像这样。

*（对于学究，我知道是从零开始的，但为了说明，这可能更容易理解）*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-18T02:24:37.237

让我们看看如果我们从循环更改为重复代码会是什么样子。首先是外循环：

```
for (int j=1; j <= 3 ; j++ ) {
    System.out.println( 1 + " " + j );
}
for (int j=1; j <= 3 ; j++ ) {
    System.out.println( 2 + " " + j );
}
for (int j=1; j <= 3 ; j++ ) {
    System.out.println( 3 + " " + j );
} 
```

现在内部循环：

```
// First loop
System.out.println( 1 + " " + 1 );
System.out.println( 1 + " " + 2 );
System.out.println( 1 + " " + 3 );
// Second loop
System.out.println( 2 + " " + 1 );
System.out.println( 2 + " " + 2 );
System.out.println( 2 + " " + 3 );
// Third loop
System.out.println( 3 + " " + 1 );
System.out.println( 3 + " " + 2 );
System.out.println( 3 + " " + 3 ); 
```

现在有意义吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-18T02:20:34.797

外部 for “抓取”内部 for 并迭代 IT。即，您在 for 循环中有一个 for 循环。对于 1..3 范围内的每个 i，您还必须从 1..3 循环 j。当 i 变为 2 时，j 重置为 1，内部循环再次运行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-18T02:21:53.827

你在另一个循环中有一个循环。

因此，对于外循环的每次迭代，您都将运行内循环直到完成，从 1 开始，到 3 结束。

因此，对于 i 的每个值，您最终都会打印 j=1,2,3。在这种情况下，i 是 1,2 和 3。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-18T02:31:53.523

对于外循环的每次迭代，都会执行完整的内循环。例如，当 i=1 时，内循环会执行 3 次，你会得到 1 1 1 2 1 3

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-18T02:35:02.097

每次你嵌套 for 循环（当你把一个循环放在另一个循环中时，它就是这样调用的），它基本上增加了另一个“维度”。如果你有一个 for 循环，它就像一条直线。因此，如果我们的第一个循环是从 1 到 5，它将是：
1 2 3 4 5

如果你添加第二个循环，（比如说 1-3）（你从上到下从左到右阅读，第一个数字代表第一个变量，等等）

11 21 31 41 51
12 22 32 42 52
13 23 33 43 53

如果你添加第三个循环（比如说 1-2）（我显然不能在这里制作 3 个维度，所以请耐心等待）

111 211 311 411 511 || 112 212 312 412 512
121 221 321 421 521 || 122 222 322 422 522
131 231 331 431 531 || 132 232 332 432 532

因此，迭代的总数（循环的次数）是循环的乘积。这个是 3 * 5 * 2，所以会迭代 30 次。

# language-agnostic - 我在哪里存储哈希表或字典键名

> ID：656758
> 
> 赞同：2
> 
> 时间：2009-03-18T02:21:58.133
> 
> 标签：language-agnostic, dictionary, hashtable

当我使用哈希表/字典时，我有时会为如何指定键而苦恼。

例如：如果我创建一个简单的字典（本示例使用 Python），

```
foo = {'bar': 'baz', 'foobar': 'foobaz' } 
```

我可以使用键值访问值（在其他模块中）： ( `foo['bar']`) 并`baz`返回。

用邪恶博士的话来说，“非常标准，真的。”

不幸的是，使用静态字符串作为键将使用此 Dictionary 的任何模块与其实现紧密耦合。当然，这也适用于使用其他键类型（例如 Enums、Objects 等）时；无论如何，您将其切片，所有访问 Dictionary 的模块都需要知道键的值。

为了解决这个问题，我通常使用静态常量字符串值（或 Enums，如果在语言中可用）作为键，并将它们公开存储在本地类/模块中，或者存储在单独的模块/类中。因此，对字典键本身的任何更改都保存在一个位置。

这通常看起来像这样：

```
BAR_KEY = 'bar'
foo[BAR_KEY] = 'foobar' 
```

是否有更好的方法来指定键，这样 Dictionary 的使用不一定将模块/类与其实现耦合？

注意：我在 SO 中看到了一些解决此问题的响应（例如[property-to-reference-a-key-value-pair-in-a-dictionary](https://stackoverflow.com/questions/44100/best-way-to-use-a-property-to-reference-a-key-value-pair-in-a-dictionary)），但这些主题似乎并没有专门解决这个问题。答案很有帮助，但我想要更广泛的经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T02:26:03.177

为什么不为此创建一个只包含属性的类？这可以用 Python 很好地完成（据我所知），并且也可以很好地与其他语言一起使用。使用当今的工具重构名称也很简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T02:32:13.443

在我传递对象并且我有已知键的情况下，我总是更喜欢向对象添加属性。IMO，字典的用例是当您不知道键是什么时。

Python 很简单：

```
foo.bar=baz 
```

Java is pretty much the same:

```
class Foo { public String bar="baz"; } 
```

The Python performance would be pretty much identical, since a property lookup is just a dictionary lookup and the Java performance would be better.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T02:31:53.867

我有时会创建一个单独的类来保存字典键。这为他们提供了自己的命名空间，以及将键放在 const 字符串中的常规好处，即您没有拼写错误的风险，您可以完成代码，并且字符串值很容易更改。如果您不想创建一个单独的类，您将获得除命名空间之外的所有好处，只是从拥有 const 字符串。

也就是说，我认为您正在接近[软编码](http://thedailywtf.com/articles/soft_coding.aspx)领域。如果字典中的键发生变化，那么使用字典的代码发生变化是可以的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T02:27:07.997

就个人而言，我使用你的方法。它非常明智，简单，并且解决了实际问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T02:29:02.280

我通常做同样的事情；如果密钥总是相同的，请用任何语言制作一个“常量静态”来保存密钥。

# java - 安全的 JDBC 连接

> ID：656759
> 
> 赞同：10
> 
> 时间：2009-03-18T02:22:03.657
> 
> 标签：java, database, jdbc

我有一个普通的 Java 应用程序，它应该连接到数据库。我不想将数据库连接 url 和用户名/密码存储在属性文件中或在应用程序中对其进行硬编码。解决此问题的**常用方法**是什么？Java 应用程序如何在不泄露用户名/密码的情况下连接到数据库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-18T02:33:26.390

我是 .NET 开发人员，但我遇到了完全相同的情况。

去年，我在一家必须符合 PCI 标准才能存储信用卡数据的公司工作，因此安全性很重要。URL/登录数据必须存在于某处。我见过的最常见的保护它的方法是加密。我不特别了解 Java，但 .NET 在核心框架中有几个加密命名空间。我们使用这些来加密数据库登录。

您仍然有一个潜在的安全漏洞，即用于加密/解密数据的加密密钥。我们在这里使用了 PCI“补偿控制”方法。对密钥的访问仅限于“密钥管理”角色。我们还跟踪了密钥本身的访问，以便记录所有用户启动和系统启动的访问。没有一个用户可以访问这些日志，因此单个用户不可能覆盖轨道。这些重叠的安全方法本质上造成了这样一种情况，即需要多个管理员之间的协同阴谋才能将数据置于危险之中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-18T02:27:41.363

如果您不愿意存储它，则必须提示它。你可以加密密码，但是你必须有一个密钥来解密它，你就会陷入同样的​​问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-18T02:52:11.837

对于基于服务器的应用程序，该问题的常见解决方案之一是将用户名和密码存储在一个文件中，该文件具有用户权限设置，只有应用程序/服务的执行用户才能读取其内容。

例如，您以 foo-service 用户身份运行应用程序，它继承了 foo-service 用户的所有访问权限。包含用户名和密码的文件只能由该用户读取。您从文件中读取值并正常连接到数据库。

这种方法可能存在的问题：

*   这台机器的超级用户可能能够获得数据库的密码。
*   侵入您的应用程序安全性的攻击者可以访问数据库凭据。

上述问题通常可以通过调整应用程序对数据库和网络的访问权限来缓解。几乎你提出的任何其他解决方案都会让你陷入先有鸡还是先有蛋的问题，因为你基本上是在试图对自己隐藏一些东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T02:45:27.890

最好的方法是将信息作为配置的数据源存储在应用程序服务器的 JNDI 上下文中。然后，您可以使用应用程序服务器的工具在部署时配置数据源。应用程序所要做的就是在运行时查找适当的 JNDI 名称并使用它。这是 Java Web 应用程序的常见模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T03:18:42.520

使用 Web 服务将您的应用程序与执行数据库访问的服务器分开。为您的 Web 应用程序签名，然后只允许正确签名的应用程序调用 Web 服务服务器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-08T14:50:00.260

您可以尝试使用系统属性加载文件。-Dapplication.configuration=application.properties。

如果没有传递属性文件，那么您应该使用带有默认配置的默认文件。

当文件存在时，您使用配置提供的值覆盖默认值。

java -Dlog4j.configuration=file:/log4j.properties -Dapplication.configuration=file:/live-conf.conf -jar app.jar "applicationarg1" "applicationarg1"

更多来源： [https ://docs.oracle.com/javase/tutorial/essential/environment/properties.html](https://docs.oracle.com/javase/tutorial/essential/environment/properties.html)

如何覆盖系统属性：

-Dproperty=value 设置系统属性值。如果 value 是包含空格的字符串，则必须将字符串括在双引号中：

[http://docs.oracle.com/javase/6/docs/technotes/tools/windows/java.html](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/java.html)

# blackberry - 在 CLDC 1.1 中实现 Future

> ID：656761
> 
> 赞同：2
> 
> 时间：2009-03-18T02:24:10.170
> 
> 标签：blackberry, mobile, java-me, concurrency

我真的很喜欢 FutureValues 的概念。[http://c2.com/cgi/wiki?FutureValue](http://c2.com/cgi/wiki?FutureValue)

尽管我在 CLDC 1.1 环境（黑莓）中工作，但我想知道是否可以使用 Java 1.3 中可用的等待通知/线程支持来实现它。基本上我想创建：

1.  ExecutorService - 启动线程
2.  然后每个线程在完成时与其 Future 通信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T04:41:39.310

你*可能会*看[这里](http://g.oswego.edu/dl/classes/EDU/oswego/cs/dl/util/concurrent/intro.html)，它构成了 java.util.concurrent 东西的基础......我不知道你是否可以让它在 CLDC 1.1 上工作......但值得一看。

# asp.net - 使用 CommonServiceLocator ControllerFactory 的 js、img 文件的控制器/路由错误

> ID：656770
> 
> 赞同：0
> 
> 时间：2009-03-18T02:29:28.100
> 
> 标签：asp.net, asp.net-mvc, dependency-injection, routing

我已经设置了一个 ASP.NET MVC RC2 应用程序来使用由 CommonServiceLocator 支持的自定义控制器工厂（使用 StructureMap）。路由和实例化控制器工作正常，但由于某种原因，我在尝试访问 .js、.jpg 或任何其他静态文件时遇到异常。

这是控制器工厂代码：

```
public class CommonServiceLocatorControllerFactory : DefaultControllerFactory
{
    protected override IController GetControllerInstance(Type controllerType)
    {
        return (controllerType == null) ? 
           base.GetControllerInstance(controllerType) :  
           ServiceLocator.Current.GetInstance(controllerType) as IController;
    }
} 
```

例外是：

找不到路径“/someimage.jpg”的控制器，或者它没有实现 IController。

如何让工厂或路由引擎绕过控制器工厂？

注意：我将使用 IIS7/集成模式，但错误发生在 VS2K8 的内置 Web 服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-19T12:08:33.283

问题实际上是由于 404 错误 - 我请求静态内容的路径不存在，并且基本控制器工厂无法处理该请求，因为没有什么可以交付。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T12:55:28.283

我非常怀疑这与 ControllerFactory 有什么关系。我刚刚查看了 DefaultControllerFactory.GetControllerInstance 的源代码，我看不出此覆盖可能会导致您所描述的错误。这可能是由于您配置路线的方式。看看你的路由配置，为它写单元测试，如果你仍然不能解决问题，把你的路由贴在这里。

# sql-server - SQL过程性能问题

> ID：656774
> 
> 赞同：0
> 
> 时间：2009-03-18T02:31:59.247
> 
> 标签：sql-server

从 ASP.NET 中使用时，哪些具有更好的有效性能

SP1：

返回 100 个参数

SP2：

通过执行 EXEC SP1 从 SP1 中选择 100 个参数到临时表中 从临时表中选择 20 个参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T14:22:44.843

在所有性能问题中，您都需要测试以查看哪个实际上更快。我怀疑第二个在 SQl 服务器上运行需要更长的时间，但它会更快地通过网络，因为返回的数据更少。差异是否显着，或者改进的网络速度是否可以抵消更长的 proc 性能确实只有您可以使用当前的数据库设计和设备才能看到。

当然，最快的方法是编写一个只处理您想要查看的记录或列的新 proc。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T02:44:09.030

听起来您正在从结果集中分页数据。最好将数据库中的数据分块，这样您就不会产生将数据传输到 Web 服务器的开销，也不会占用服务器上的内存来存储您永远不会显示的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T14:36:32.703

如果您有一个包含 100 个“输出”参数的存储过程，那么您的设计中就有一个根本问题。我真的不是故意粗鲁，但我根本无法想象这样的 SQL 上下文是有意义的。我对你的建议是重新考虑你的整个设计。

在*最坏*的情况下（设计并没有真正改变），您可以在 SP1 中制作并返回一个临时表，然后让 SqlDataReader 依次提取每个值。但是100个参数呢？不，我永远不会那样做。

当然，我已经多次阅读这个问题，但我仍然不知道你在问什么，所以我可能会离开。例如，当您说“通过执行 EXEC SP1 从临时表中选择 20 个参数”时，您是什么意思？因此，我真的不能给你任何关于“SP1”和“SP2”的观点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T14:47:23.427

我会说“整体” sp2 更快，因为您正在使用 db 过滤 80 列（！），而不是所有传输到您的应用服务器以被丢弃的数据。

但是，您可以考虑修改 sp1 以接受额外的参数，并根据该参数设置 100 或 20 列宽的结果集

# php - 不要在 PHP 中获取 glob 函数

> ID：656775
> 
> 赞同：2
> 
> 时间：2009-03-18T02:32:07.967
> 
> 标签：php, filesystems

[http://php.net/glob](http://be2.php.net/glob)

glob() 上的文档页面有这个例子：

```
<?php
foreach (glob("*.txt") as $filename) {
    echo "$filename size " . filesize($filename) . "\n";
}
?> 
```

但老实说，我不明白这是如何工作的。

会遍历 glob("*.txt") 产生的数组，但是这个数组是从哪里来的呢？glob() 正在读取目录吗？我在代码中的任何地方都没有看到。Glob() 查找与 *.txt 的所有匹配项

但是你在哪里设置 glob() 函数应该在哪里寻找这些字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T02:43:22.327

如果没有指定任何目录， glob() 将作用于当前工作目录（通常与脚本相同的目录，但并非总是如此）。

要使其更有用，请使用完整路径，例如 glob("/var/log/*.log")。诚然，PHP 文档并没有明确说明行为，但 glob() 是一个[C 库函数](http://man.cx/glob(3posix))，这就是它的来源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-09T05:54:47.083

我发现了一些有用的东西`glob()`，如果你想遍历一个目录，例如，为了图像，但想匹配多个文件扩展名，检查这个代码。

```
 $images = glob($imagesDir . '*' . '.{jpg,jpeg,png,gif}', GLOB_BRACE); 
```

该`GLOB_BRACE`标志使大括号像`(a|b)`正则表达式一样工作。

一个小警告是您需要将它们列出，因此您不能使用正则表达式语法，例如`jpe?g`匹配`jpg`或`jpeg`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T02:34:54.437

是的，glob 读取目录。因此，如果您要匹配特定目录中的文件，那么您提供给 glob() 的参数应该足够具体以指出该目录（即“/my/dir/*.png”）。否则，我相信它会在“当前”目录中搜索文件。

请注意，在某些系统上，文件名可能区分大小写，因此“*.png”可能找不到以“.PNG”结尾的文件。

[可以在此处找到其用途](http://en.wikipedia.org/wiki/Glob_(programming))的一般概述。它在 PHP 中的功能基于[libc glob 函数](http://www.castaglia.org/proftpd/doc/devel-guide/src/lib/glibc-glob.c.html)，其原理可以在[http://web.archive.org/web/20071219090708/http://www.isc.org/sources/devel/func/glob阅读.txt](http://web.archive.org/web/20071219090708/http://www.isc.org/sources/devel/func/glob.txt)。

# python - PyWinAuto 还有用吗？

> ID：656779
> 
> 赞同：10
> 
> 时间：2009-03-18T02:34:01.020
> 
> 标签：python, pywinauto

我今天一直在玩 PyWinAuto，并在自动化各种 GUI 测试方面很开心。我想知道它是否仍然是最先进的，或者是否可能有其他东西（也是免费的）可以更好地实现 Windows 富客户端自动化。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-18T05:51:04.573

pywinauto 很棒，因为它是 Python。

也许功能更全面的是[AutoIT](http://www.autoitscript.com/autoit3/index.shtml)，它有一个可以自动化的 COM 服务器（从 Python 使用 win32com）和一些很酷的工具，比如“[窗口信息](http://www.autoitscript.com/autoit3/docs/intro/au3spy.htm)”实用程序，它会给你文本（标题）、类、当前位于鼠标光标下的窗口的大小、状态栏文本等。

在某些情况下，pywinauto 比 AutoIt 更难使用，而且看起来没有那么精致。一个例子是自动化 Inno Setup 程序。Inno Setup "setup.exe" 程序会启动一个单独的应用程序来实际执行安装，使用 pywinauto 跟踪它很痛苦，但 AutoIt 让它变得简单。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-10-31T00:49:55.220

我曾经使用 AutoIt 对我们的项目进行自动化测试，但在 3 个月前切换到 pywinauto，并且对这个决定非常满意。有一些粗糙的边缘，但我已经能够用我自己的补充测试功能来填充它们。此外，我发现与 AutoIt 相比，Python 中的编码测试和支持代码*更*容易且更易于管理。使用 Python，我有更强大的选项来记录、调试、文档、流程管理和测试配置。对我来说，这绝对是正确的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-06-09T10:16:31.427

我也是这样，一点一点，我不得不说python + pywinauto 是好东西！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-11T19:50:25.203

新的[pywinauto 0.6.0](https://github.com/pywinauto/pywinauto/releases/tag/0.6.0)在后台引入了 MS UI 自动化支持。这样 WinForms、WPF、Qt、Store 应用程序等就可以像旧的原生 Win32 应用程序一样自动化。

此外，可以在窗口/控件上下文之外使用`mouse`和`keyboard`模块。这些模块也可以在 Linux 上运行！

新模块`win32_hooks`的灵感来自 pyHook 和类似的库，但它不需要编译。

是的，这篇文章是一种广告。但我只想说 pywinauto 仍然有用，我相信它在未来会更加有用。开发人员社区目前由 2 名成熟的开发人员和 3 名有才华的学生组成，我们对 Linux 和 Mac OS X 有长期计划。

PS 还有一些开源工具：

*   [pywinauto 文档中的类似工具概述](https://pywinauto.readthedocs.io/en/latest/#some-similar-tools-for-comparison)
*   [UI 自动化工具由 GitHub 星级和 SO stats 评级](https://github.com/pywinauto/pywinauto/wiki/UI-Automation-tools-ratings)。

# c# - 如何最好地在我的课堂上处理和公开转换后的值

> ID：656783
> 
> 赞同：0
> 
> 时间：2009-03-18T02:36:18.863
> 
> 标签：c#, architecture

在后面的代码中，我从单选按钮列表中的选定索引中获取一个值。

问题是，在某些情况下，我需要将其用作字符串，但在其他情况下，我需要将其转换为 Int32 以便在某些方法中使用。

是否更好：

使用属性转换为 int（以后可能重用） 在此时仅在一个需要它的方法中转换为 int

我认为私有属性将允许在内部跨多个方法重用。但是，如果只有一个方法真的需要它是一个整数，并且该方法通过在该方法中将其作为字符串参数传递来在几次调用中使用它，则只需在该方法中进行转换并忘记将其公开为私有属性假设有人可能希望稍后在此代码中以其他方法使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T02:41:49.800

我会认为这是模型视图控制器。视图将此值视为字符串，但模型中值的实际类型是整数。因此，您应该将其存储为整数，然后根据模型客户端的需要将其转换为字符串视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T03:38:21.367

**最好转换为 int [并将其公开为] 属性**

一般来说，我会将值呈现为我可以放入的最具体的类型。

如果该值始终具有整数表示形式，则只需将其呈现为整数属性。如果有人需要将其用作`string`，他们可以调用`.ToString()`自己将其转换回来。

```
private void UpdateValue()
{
   _selectedValue = Int32.Parse(GetSelectedValue());
}

private int _selectedValue;

public int SelectedValue
{
   get { return _selectedValue; }
} 
```

在许多情况下，使用您的代码的人甚至不需要调用`.ToString()`，例如：

```
string description = string.Format("Selected Value: {0}", obj.SelectedValue); 
```

# java - 执行 Web 应用程序的初始配置有哪些好的模式？

> ID：656787
> 
> 赞同：2
> 
> 时间：2009-03-18T02:37:55.583
> 
> 标签：java, security, web-applications

我有一个旨在部署在 Internet 上的 Java Web 应用程序。它需要一个数据库连接。根据托管环境，Web 应用程序的部署者可能无法配置适当的数据源，因此应用程序需要将其数据库连接信息存储在某个地方，以便在重新启动应用程序时重新加载。

我还需要给一位用户管理员权限。如果这只是创建的第一个用户帐户，则在部署应用程序和安装程序登录之间，管理员帐户可能被劫持的可能性很小。

我需要安全地并以 Web 应用程序的最低公分母的方式完成这两项任务。

澄清：第一次使用时，我希望应用程序设置一个管理员用户。该管理员用户将拥有系统中的所有安全访问权限。不知何故，我需要确定该用户被称为什么以及他们的密码是什么。如果应用程序部署在共享 Web 主机上，则应用程序将在部署时生效。如果我允许通过 Web 界面配置站点，那么未经授权的人很可能会在站点所有者有效劫持站点之前进行 Web 配置。我正在寻找一种优雅的方式来避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T10:54:54.547

好的，回答您修改后的问题...

你能做的真的不多。如果您不希望管理员在服务器上安装期间配置他们的帐户，那么总会有一个小窗口，其他人可能会在此之前通过网络创建它。

所有解决方案都涉及修改服务器上的某些内容（因为这是他们证明自己是*真正*管理员的方式）。是的，这可能意味着一个配置文件......

*   在第一次连接时，给用户一个令牌。基本上是一些 salt+theirIP+theirUserAgent 等的哈希值。然后要求他们登录服务器并将此令牌提供给您的应用程序，可能在配置文件中。如果下次生成的令牌与配置中的令牌匹配，则允许他们继续。

*   一个更简单的解决方案是让他们从一开始就将他们的 IP 地址放在配置中，并且只允许这个 IP。（假设他们知道他们的 IP 地址是什么）

*   或者，允许创建帐户，但在从服务器中删除某些文件之前拒绝执行任何其他操作。许多 PHP 应用程序使用 install.php 执行此操作，但该文件可以是您测试的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T03:04:41.277

最常见的方法是通过静态配置文件，采用一些简单的文本格式。

该文件与应用程序驻留在同一系统上，并且应该与代码一样安全（例如，如果有人有权修改不应该能够修改的配置，他们难道不能轻松地修改代码吗？ )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T03:13:12.550

对于我们的一个 Java Web 应用程序，我们使用[Spring](http://www.springsource.org/)依赖注入来配置大部分应用程序。如果您创建一个公开了所有可配置属性的“配置”类，您可以在 Java 中连接一个通过 Spring XML 上下文文件配置的 bean。然后，您可以为不同的环境创建不同版本的 XML 文件，并将它们自动构建到特定的包中，这些包可以一次性部署。如果您想全力以赴，您基本上可以使用 Spring 配置应用程序中的每个类，这非常有用。

设置 Spring 需要一些开销，但实际上并不难，那里有很多教程。

# delphi - 如何使用 Delphi Prism 使用和重新公开 Win32 类型库

> ID：656788
> 
> 赞同：0
> 
> 时间：2009-03-18T02:39:34.737
> 
> 标签：delphi, com, oxygene, typelib

我目前有一个在 Delphi 中创建的 Win32 类型库，我需要通过 .NET 使用、实现和重新公开它。将 TLB 带入 Prism 以实现接口所需的步骤是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T08:24:21.147

.NET 2.0 sdk 工具 TLBIMP 可以从 TLB 文件创建程序集。就像是：

tlbimp.exe mytlb.tlb /out:MyTLB.Import.dll /namespace:MyTLBImport

如果您想稍后签名，请确保使用 /publickey /keyfile 或 /keycontainer。

导入后，只需引用 dll 并将其用作常规库即可。

# deployment - 谁负责部署？

> ID：656791
> 
> 赞同：7
> 
> 时间：2009-03-18T02:40:34.967
> 
> 标签：deployment, process, release-management

我是一家制造公司的内部开发人员。我们为制造过程制作软件，而不是真正的控制软件，更像是流程。

我们正在使用 Scrum 流程来开发软件，尽管它是为适应我们的团队和环境而量身定制的，而且效果很好。我们即将结束 sprint，软件正处于产品所有者想要部署它的阶段。

以前，即在 Scrum 之前，我们会部署软件。现在我觉得我们已经开发了软件，我们已经通过了所有用户定义/同意的发布测试，并用模拟器向 PO 演示了软件，**我们已经实现了我们的目标**。我们已准备好提供部署支持，但我认为部署不应该是我们的责任。

其他人的经历是什么？开发团队应该进行部署，还是我们应该将完成的软件交给 PO 并提供支持？

**加起来**

很多很好的回应，谢谢。这个问题可能看起来像是我试图摆脱工作或责任，也许我有点;o）我更感兴趣的是其他人的过程。我们在这里面临的问题是，如果开发团队部署了软件，那么我们最终会为软件的生产提供 24/7 的支持。没有问题，除了我们只有两个人。因此，为了让我们能够回到开发软件而不是一直提供支持，我认为让“IT”团队参与开发过程可能会有所帮助。希望这将获得“支持”，然后允许他们部署并提供第一级支持。我们在墨西哥也有一家工厂，开发团队很难去那里部署，当地支持这样做更有意义，

只是为了让您知道，IT 工程师确实在开发人员的指导/建议下部署了该软件。它进展顺利，客户很高兴——他的软件增值了，这不就是全部吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-18T02:48:54.433

我不认为 Scrum 作为一种方法论解决了部署责任。我曾为拥有完全独立于开发团队的部署团队的大型组织工作过。我还曾在开发团队处理部署的小型组织工作过。理想情况下，部署团队与开发团队是分开的，但它几乎永远不会是 PO（我认为这意味着产品所有者）。PO 通常会签字，但通常不是处理部署的最佳选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-18T06:28:35.483

当软件不工作或系统死机时，谁会在凌晨 3 点接到电话？如果是开发团队，那么无论如何都希望拥有部署（因为您拥有生产）。

可以支持的组织的最佳实践是向运营组提供部署说明和良好祝愿。瓶装苏格兰威士忌也有帮助。

如果您的生产控制松懈，那就收紧它们。像“可见操作”这样的书是一个很好的指南，可以让事情在适当的水平下得到适当的控制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-18T05:37:52.997

我是一名开发经理，负责多种产品。我让我的开发团队生成部署工件的构建，例如 .war 文件，可以使用它的管理器接口或 Web 服务 API 将其简单地部署到 Tomcat Web 服务器。应用程序的配置全部设置并自包含在 .war 文件中。因此，可以说，进行部署的人只需将其拿走并“放入”即可。

如果我们没有达到这种易于部署的水平，以至于部署可以与开发团队完全分离，那么我认为这是开发团队未能充分完成他们的工作。

进行部署的人继续向众多客户站点发布给定的产品——这对我来说不是让开发人员做的生产活动——他们有产品要设计和创建，因为这是他们的专业知识。

在我们的组织中，部署责任也与第一层生产支持责任重叠。

我们练习了一些 scrum 方法，但我从来没有认为这个问题与软件开发过程方法本身有关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-18T05:03:57.557

1.  直到工作软件在需要它的用户手中才完成软件过程 - 否则它只是“搁置件”

2.  如果没有其他人负责部署和配置管理，那么你就是它;-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-18T02:48:54.323

我认为作为“内部”开发人员，部署新软件是您的责任（除非有专门的部署团队），而如果您来自外部公司，则由他们自己部署，除非合同中规定的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-18T06:23:03.357

我认为你必须手动部署和部署软件。除非您所在的组织存在某种严重的数据安全问题和/或 SOX 问题，允许不洁者处理生产端的事情。

我同意第一条评论——SCRUM 与它无关。事实上，我认为进行部署对您来说要好得多，因为您将直接了解事情的运作情况，并在那里从这些用户那里获得反馈。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-18T02:52:50.507

取决于项目以及“部署”对您意味着什么。由于我是一名 Web 开发人员，主要使用 Sql Server 数据库部署 .NET 应用程序，因此我总是更喜欢由发布管理器或部署管理器完成部署。为什么？因为工作分离可确保在需要时发现问题。

开发人员的工作应该是提供所需的对象或有关如何部署的说明，然后其他人部署到暂存环境。如果在部署到登台期间出现问题，则会更正部署说明，直到部署到登台工作完美无缺。这样，当使用相同的部署脚本将代码移动到生产环境时，希望不会出现错误。换句话说，你不仅要测试你的代码，还要测试部署脚本。

当然，在现实世界中，这并不总是因为人事问题而发生，但这将是我的理想。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-18T02:54:14.467

对我来说似乎相当简单——如果不是你，那是谁？在你开始使用 Scrum 之前，实际的部署责任会落到其他团队身上吗？如果不是，那么我不明白为什么 Scrum 会改变这一点。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-18T02:55:51.623

如果开发团队在 scrum 之前提供部署，他们应该继续这样做，除非管理层明确表示应该由其他人来做。如果管理层没有说，那么他们还没有真正考虑过，只是期望它会像往常一样神奇地发生。

如果您不喜欢这样，请向管理层提出，但在另行通知之前完成工作。

# php - PHP数组的问题

> ID：656821
> 
> 赞同：4
> 
> 时间：2009-03-18T02:56:16.630
> 
> 标签：php

为什么不能在 PHP 中做与此等效的事情：

```
(Array(0))[0]; 
```

这只是为了争论，但它不允许访问匿名对象似乎很奇怪。我将不得不执行以下操作：

```
$array = Array(0);
$array[0]; 
```

任何想法为什么这是 PHP 的行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T04:56:37.887

我曾经读过一些关于这方面的详细信息，但我很遗憾没有将其加入书签，因为它非常有见地。然而，这有点像

“因为在当前语句（行）完整执行（到达分号）之前，内存中不存在数组”

所以，基本上，你只是在定义数组——直到下一行才真正创建和读取/访问它。

我*希望*这能准确地概括我几个月前读过的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-18T12:17:21.807

此语言功能尚未[实现，但将在 PHP 6](http://wiki.php.net/rfc/functionarraydereferencing)中实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T03:34:34.340

我想简短的回答是：还没有人编码过。我已经在 Python 和 Javascript 中使用（并且喜欢）这种语法，但我们仍然在等待 PHP。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T12:08:09.910

主要原因是因为与 Python 和 JavaScript 等某些语言不同，`Array()`（或实际上`array()`）不是对象，而是创建内置数据类型的语言结构。内置数据类型本身也不是对象，并且`array()`构造不会返回对“对象”的引用，而是返回实际值本身，然后可以将其分配给变量。

# mysql - 使数据库中的记录过期的最佳方法/选项是什么？

> ID：656827
> 
> 赞同：5
> 
> 时间：2009-03-18T02:57:18.437
> 
> 标签：mysql, database-design

在我最近似乎正在处理的许多数据库中，我不能出于任何原因删除记录，包括稍后它们可以稍后显示（比如不再存在的产品）或只是保留历史记录是什么。

所以我的问题是如何最好地使记录过期。

我经常添加一个`date_expired`列，它是日期时间字段。通常，我查询数据在未来是否会过期`date_expired = 0`或在哪里过期。`date_expired = 0 OR date_expired > NOW()`与此类似，我还添加了一个字段调用`expired_flag`。当设置为 true/1 时，记录被视为过期。这可能是最简单的方法，尽管您需要记住在只需要当前项目时包含 expire 子句。

我见过的另一种方法是将记录移动到存档表，但是当有大量需要历史表的表时，这会变得非常混乱。它还使检索值（例如国家/地区）更加困难，因为您必须首先执行左连接（例如），然后执行第二次查询以找到实际值（或使用修改后的左连接重做查询）。

另一种选择，我还没有看到完成，也没有完全尝试过自己是有一个表，其中包含来自所有过期记录的所有数据或某种形式的数据 - 某种历史表。在这种情况下，检索将更加困难，因为您可能需要搜索一个庞大的表，然后解析数据。

还有其他更好的解决方案或修改吗？

我正在使用 MySQL (with PHP)，所以我不知道其他数据库是否有更好的方法来处理这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T03:04:03.633

我更喜欢 date expired field 方法。但是，有时有两个日期很有用，包括初始日期和过期日期。因为如果数据可以过期，那么知道它何时处于活动状态通常很有用，这也意味着知道它何时开始存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T03:08:02.937

如果查询速度对您很重要，我喜欢 expired_flag 选项而不是 date_expired 选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T03:02:57.770

我认为添加`date_expired`列是最简单且侵入性最小的方法。只要您的 INSERTS 和 SELECTS 使用显式列列表（如果不是，它们应该是），那么对您现有的 CRUD 操作没有影响。在列上添加索引`date_expired`，开发人员可以将其作为属性添加到依赖于现有表中数据的任何类或逻辑中。总而言之，努力的最佳价值。相比之下，我同意其他方法（即存档表）充其量是麻烦的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-18T03:05:44.517

我通常不喜欢数据库触发器，因为它们会导致奇怪的“幕后”行为，但在删除时放置触发器以将即将删除的数据插入历史表可能是一种选择。

根据我的经验，我们通常只使用“活动”位，或您提到的“日期过期”日期时间。这很好用，并且非常容易处理和查询。

这里有一个相关的帖子，提供了一些其他选项。也许CDC选项？

[SQL Server 历史表 - 通过 SP 或触发器填充？](https://stackoverflow.com/questions/349524/sql-server-history-table-populate-through-sp-or-trigger)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-18T03:07:39.740

我还可以建议在您使用的代码中添加一个与枚举类型匹配的“状态”列。在列上放置一个索引，您将能够通过 where 子句非常轻松有效地缩小返回的数据范围。

根据您的需要，可以使用一些可能的枚举值：

1.  积极的
2.  已删除
3.  暂停
4.  InUse（一种伪锁定机制）

将该列设置为 tinyint（即 SQL Server……不确定 MySQL 的等价物）。如果您愿意，您还可以使用键/值对和表之间的外键约束设置匹配的查找表。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-18T04:03:09.247

我一直使用`ValidFrom`,`ValidTo`方法，每个表都有这两个附加字段。如果`ValidTo Is Null or > Now()`那时你知道你有一个有效的记录。通过这种方式，您还可以在表格生效之前将数据添加到表格中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-18T03:09:41.187

我的表通常有一些字段：creation_date、last_modification、last_modifier（fk 到用户）、is_active（布尔值或数字，取决于数据库）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-18T10:18:37.550

查看“缓慢变化的维度”SCD 算法。数据仓库领域有多种选择适用于此。

没有一个是“最好的”——每个都响应不同的要求。

这是一个整洁的总结。

**类型 1**：新记录替换原始记录。不存在旧记录的痕迹。

*   **类型 4**是一种变体，它将历史记录移动到另一个表。

**类型 2**：在客户维度表中添加一条新记录。为了区分，需要一对“有效日期范围”的列。有一个“此记录是当前的”标志会有所帮助。

**类型 3**：修改原始记录以反映更改。

*   在这种情况下，列中的一个或多个先前值可能会更改。这有一个明显的限制，因为它绑定到特定数量的列。但是，它通常与其他类型结合使用。

如果您搜索“缓慢变化的维度”，您可以阅读更多相关信息。

[http://en.wikipedia.org/wiki/Slowly_Changing_Dimension](http://en.wikipedia.org/wiki/Slowly_Changing_Dimension)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-03-18T03:06:59.197

Oracle 解决这个问题的一个非常好的方法是[分区](http://www.databasedesign-resource.com/oracle-partitions.html)。我不认为 MySQL 有类似的东西。

# apache-flex - 用于 flex/actionscript 的逆向工程或文档工具

> ID：656834
> 
> 赞同：3
> 
> 时间：2009-03-18T03:02:50.033
> 
> 标签：apache-flex, actionscript-3, actionscript, reverse-engineering

我继承了一个 flex 项目，遗憾的是没有记录。我正在寻找一个文档生成工具/类图生成器或与 actionscript 一起使用的类似工具。大约有 1000 个类文件，我没有时间单步调试所有代码。

我尝试了一些工具，例如 Doxygen（将语言设置为 java）和 NaturalDocs，但效果不佳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T19:32:51.337

不知道文档生成，顺便说一句，它真的对大量的 ASDoc 有帮助吗？

关于图表生成，我发布了以下问题的答案。不知道这家伙有没有发现，我也对这件事很感兴趣。

[静态 Actionscript 代码分析？](https://stackoverflow.com/questions/548830/actionscript-code-analysis/549225#549225)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T03:23:48.220

考虑这只是一个指针，但 Enterprise Architect 支持 Actionscript 的往返源代码工程（据我所知，它是唯一可以从 AS 源代码生成 UML 的工具）。

我用的不多，前段时间刚试过，但也许值得一试。我认为它有 30 天的免费试用期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-11-13T14:19:15.087

如果其他人正在寻找答案，我建议使用[Crocus Modeller，它是用于 AS3 和 Flex 的 UML 建模工具，](http://crocusmodeller.com)具有逆向工程功能。

# php - OO PHP 中可重用结构的解释

> ID：656836
> 
> 赞同：0
> 
> 时间：2009-03-18T03:03:40.297
> 
> 标签：php, oop, class

有人可以为我解释“可重复使用的结构”吗？我正在努力在 php 中制作一些 db 对象，但被告知我使用了过多的计算机处理，因为我用以下对象制作了复杂的东西：

我的数据库对象：

```
$db = new Database;
$db->db_connect();

$post_content = new DbSelect;
$post_content->select('id', 'title', 'firstName', 'created', 'catName', 'tagName');
$post_content->from('content');   
$post_content->join('inner');
$post_content->on('category','cat_id','id');
$post_content->where('id','1');
$post_content->order('created');

$db->db_close(); 
```

普通PHP：

```
mysql_connect();
mysql_db_select();

$query = 'SELECT id, title, s_name, created, cat_name, tag_name
                FROM content
                JOIN INNER category, cat_id, id
                WHERE id=1
                ORDER created';

mysql_close(); 
```

所以重申我的问题： 1\. 对可重用结构的快速解释？2.为什么第一种使用对象的方法“错误”？

请注意：我会在谷歌上搜索并希望得到反馈

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T04:34:14.570

不要将面向对象编程与“面向类”或“基于对象”编程相混淆。从表面上看，它们都可能看起来像 OOP，但实际上并非如此。

这些是当您采用结构化代码并包装在一堆类中时，但不要改变它的基本操作方式。当您在编程时考虑到对象，但不利用 OOP 为您提供的任何特殊约定（多态性、聚合、封装等）。这不是面向对象的。

你在这里*可能*有一些这种类型的代码。很难说。您的 DbSelect 类的目的是抽象出原始 SQL 代码，以便您可以使用连接到任何数据库而无需重写查询？（因为许多 DBAL 解决方案不会这样做）或者您这样做是“仅仅因为”因为您将基本 SQL 查询转换为方法调用链而努力看起来您已经实现了 OOP？如果后者更接近您创建这组类的动机，您可能需要首先考虑为什么要创建这些类和对象。

我应该注意到，从您的简单代码片段可以看出，您实际上并没有在可重用性方面获得任何东西。现在，您的设计可能包含在我看不到它的地方提供灵活性的代码，但有点怀疑它不存在。程序/结构化片段实际上与您提出的基于类的片段相比，可重用性或多或少。

无论您与谁交谈，都有一个观点——开发一个复杂（甚至简单）的 OOP 解决方案肯定会带来很多好处——但是这样做而不考虑这些好处的成本（而且*总是*有成本）充其量是愚蠢的，并且在最坏的情况下是危险的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T03:17:06.970

我不知道从哪里开始。面向对象设计不是一个微不足道的主题，它有很多可能出错的地方。

本质上，您想尝试在应用程序中创建逻辑独立的对象，以便您可以将它们换成具有相同接口的其他模块，或者在未来的项目中重用它们。在您的数据库示例中，查看 PEAR::MDB2。PEAR::MDB2 将数据库驱动程序从您的应用程序中抽象出来，这样您就不必担心您正在使用哪个特定的数据库。今天，您可能正在使用 MySQL 来运行您的站点。明天，您可能会切换到 Postgresql。理想情况下，如果您使用正确的 OO 设计，则无需更改任何代码即可使其正常工作。您只需要将数据库层换成另一个。（Pear::MDB2 使这就像更改数据库连接字符串一样简单）

我可以建议阅读 Steve McConnell 的 Code Complete。有一整章是关于类的。虽然示例主要是 C++，但这些概念可以应用于任何编程语言，包括 PHP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T03:20:58.397

您的解决方案似乎涉及更多的输入以实现与“正常”方式相同的事情。字符串 SQL 将比为您的对象分配内存更有效。

如果您想创建一个具有更多功能的数据抽象层，而不仅仅是一个选择，您应该查看 Active Record 模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-08T12:00:38.137

如果您使用 DbSelect 对象从复杂的表单构建查询，那么您做的是正确的事情。

[查询对象模式](http://martinfowler.com/eaaCatalog/queryObject.html)

# .net - 如何检测滚动条是否位于富文本框的末尾（vb.net）

> ID：656842
> 
> 赞同：3
> 
> 时间：2009-03-18T03:06:55.763
> 
> 标签：.net, vb.net, scroll, richtextbox, scrollbar

我的问题是：如何检测滚动条是否位于富文本框的末尾？

编辑：当我最后说时，我的意思是完全滚动到底部，而不是其他任何地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T03:18:18.123

查看[`GetScrollRange`](http://msdn.microsoft.com/en-us/library/bb787587(VS.85).aspx)和[`GetScrollPos`](http://pinvoke.net/default.aspx/user32/GetScrollPos.html)API ...

```
Private Const SBS_HORZ = 0
Private Const SBS_VERT = 1

<DllImport("user32.dll")> _
Public Function GetScrollRange(ByVal hWnd As IntPtr, ByVal nBar As Integer, _
                               ByRef lpMinPos As Integer, _
                               ByRef lpMaxPos As Integer) As Boolean
End Function

<DllImport("user32.dll")> _
Public Function GetScrollPos(ByVal hWnd As Integer, _
                             ByVal nBar As Integer) As Integer
End Function

// ...

Dim scrollMin as Integer = 0
Dim scrollMax as Integer = 0

If(GetScrollRange(rtb.Handle, SBS_VERT, scrollMin, scrollMax) Then
   Dim pos as Integer = GetScrollPos(rtb.Handle, SBS_VERT)

   // Detect if they're at the bottom
EndIf 
```

**笔记：**

要确定滚动条是否可见，请调用[`GetWindowLong`](http://pinvoke.net/default.aspx/user32/GetWindowLong.html)并检查`WS_VSCROLL`

要确定滑块可以达到的最大值，请调用[`GetScrollInfo`](http://pinvoke.net/default.aspx/user32/GetScrollInfo.html)；我认为最大值是

```
scrollMax - largeChange + 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T13:18:33.387

我使用此代码正确获取当前和最大位置：

```
 const int SB_HORZ          = 0x0000;
    const int SB_VERT          = 0x0001;
    const int WM_HSCROLL       = 0x0114;
    const int WM_VSCROLL       = 0x0115;
    const int SB_THUMBPOSITION = 4;

    private enum ScrollInfoMask : uint
    {
        SIF_RANGE           = 0x1,
        SIF_PAGE            = 0x2,
        SIF_POS             = 0x4,
        SIF_DISABLENOSCROLL = 0x8,
        SIF_TRACKPOS        = 0x10,
        SIF_ALL             = (SIF_RANGE | SIF_PAGE | SIF_POS | SIF_TRACKPOS)
    }

    [StructLayout(LayoutKind.Sequential)]
    struct SCROLLINFO
    {
        public uint cbSize;
        public uint fMask;
        public int  nMin;
        public int  nMax;
        public uint nPage;
        public int  nPos;
        public int  nTrackPos;
    }

    public int HScrollPosition
    {
        get
        {
            return GetScrollPos(Handle, SB_HORZ);
        }
        set
        {
            SetScrollPos((IntPtr)Handle, SB_HORZ, value, true);
            PostMessageA((IntPtr)Handle, WM_HSCROLL, SB_THUMBPOSITION + 0x10000 * value, 0);
        }
    }

    public int VScrollPosition
    {
        get
        {
            return GetScrollPos(Handle, SB_VERT);
        }
        set
        {
            SetScrollPos((IntPtr)Handle, SB_VERT, value, true);
            PostMessageA((IntPtr)Handle, WM_VSCROLL, SB_THUMBPOSITION + 0x10000 * value, 0);
        }
    }

    public int HScrollPositionMax
    {
        get
        {
            SCROLLINFO scrollInfo = new SCROLLINFO();
            scrollInfo.fMask = (uint)ScrollInfoMask.SIF_ALL;
            scrollInfo.cbSize = (uint)Marshal.SizeOf(scrollInfo);
            GetScrollInfo(Handle, SB_HORZ, ref scrollInfo);

            return scrollInfo.nMax - (int)scrollInfo.nPage;
        }
    }

    public int VScrollPositionMax
    {
        get
        {
            SCROLLINFO scrollInfo = new SCROLLINFO();
            scrollInfo.fMask = (uint)ScrollInfoMask.SIF_ALL;
            scrollInfo.cbSize = (uint)Marshal.SizeOf(scrollInfo);
            GetScrollInfo(Handle, SB_VERT, ref scrollInfo);

            return scrollInfo.nMax - (int)scrollInfo.nPage;
        }
    } 
```

获得“正确”的最大值很乏味。您必须减去 GetScrollRange 返回的最大值的 nPage（大变化）值，然后您可以正确地将其与 HScrollPosition 属性进行比较，例如：

```
if (_rtb.VScrollPosition == _rtb.VScrollPositionMax)
{
    Debug.WriteLine("Scroll is at the bottom most edge");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-12-13T06:00:10.047

```
 if (richTextBox1.Size.Width - richTextBox1.ClientSize.Width > 10) 
```

抱歉，您必须自己将其转换为 VB.NET。不应该太难:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T03:18:54.987

一种方法是使用 GetScrollPos 函数。这是一个使用 VB.NET 的冗长示例。

[http://www.codeproject.com/KB/vb/VbNetScrolling.aspx?print=true](http://www.codeproject.com/KB/vb/VbNetScrolling.aspx?print=true)

# wcf - WCF System.ServiceModel.Channel.Message：二进制消息内容（非 XML）？

> ID：656851
> 
> 赞同：2
> 
> 时间：2009-03-18T03:11:58.963
> 
> 标签：wcf, biztalk

我需要在自定义 WCF LOB 适配器中检索二进制（非 XML）文档作为消息（供 BizTalk 使用）。消息需要表示为 System.ServiceModel.Channel.Message 的实例。

当内容是二进制时，我找不到如何创建此类的实例（“二进制”是指任何任意字节数组或流，而不仅仅是 XML 文档的二进制表示）。

这可能吗？或者将二进制内容包装在 XML 信封中是在 WCF 中执行此操作的唯一方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T03:21:04.263

WCF 提供了一些方法来以各种方式发送二进制附件和流数据。我们有一个正在工作的应用程序可以做到这一点，但我没有机会深入研究代码，所以我无法提供太多帮助。以下是一些可以帮助您入门的链接（[Nicholas Allen 的 Indigo 博客](http://blogs.msdn.com/drnick/default.aspx)是获取 WCF 信息的好地方）：

*   [http://blogs.msdn.com/drnick/archive/2006/03/31/565558.aspx](http://blogs.msdn.com/drnick/archive/2006/03/31/565558.aspx)
*   [http://weblogs.asp.net/cibrax/archive/2007/08/29/sending-attachments-with-wcf.aspx](http://weblogs.asp.net/cibrax/archive/2007/08/29/sending-attachments-with-wcf.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T12:36:33.820

从根本上说，WCF 消息*是*XML，因为 SSCMessage 类使用 Xml InfoSet 作为基本消息表示。

所以是的，您需要以某种方式将二进制内容“包装”到 XML 信封中（请注意，它不需要是 SOAP 信封，这取决于您的绑定配置方式）。

也就是说，请注意，这并不排除流处理大型消息有效负载而不将整个消息缓冲在内存中；WCF 仍然允许您执行此操作，尽管有时它的工作原理并不是很明显。

由于您使用的是自定义渠道，因此我认为您有两种选择之一：

1.  让您自己的频道在您的二进制内容周围添加 XML 包装器，然后再向上传递或
2.  创建一个自定义 MessageEncoder 自动为您添加它。

在任何一种情况下，如果您正在处理大型消息，您将需要确保使用处理 Streams 而不是缓冲区的 MessageEncoder 重载，因为它们使您可以选择与服务实现进行协调流.

# java - Eclipse RCP 案例研究

> ID：656852
> 
> 赞同：2
> 
> 时间：2009-03-18T03:12:14.003
> 
> 标签：java, eclipse, jaxb, rcp

我有兴趣了解 Eclipse RCP，我有一些基础知识，但我想了解更多它的能力。因此，我鼓励自己创建一组需求，分析它们，并就如何使用 Eclipse RCP 作为基础框架来满足它们提出设计决策，并最终使用 Eclipse RCP 实现它们。现在，也许要求太难了，或者我对 Eclipse RCP 还不太了解，我正在努力想出合适的解决方案来满足要求！

以下是要求的总结（请原谅可能缺乏细节，这只是一个鼓励自己的例子）：

我想要一个 Eclipse RCP 应用程序来监控一些服务器。这些服务器最初将是应用程序知道的程序（意味着它确切地知道它们的来龙去脉）。然而，在未来，应用程序应该能够允许用户指定具有不同特性的任意程序以供应用程序监控（因此不仅是已知的服务器，还包括一些以前不知道的其他服务器）。该应用程序还需要一个 XML 配置文件，其中包含需要监视的服务器的所有详细信息（例如主机、端口、用户名和密码）。此 XML 配置文件将使用 JAXB 进行编码和解码。

所以基于上述要求，我想出了以下细节：

XML 将如下所示：

```
<configuration>
    <components>
        <serverA>
          <host></host>
          <port></port>
          <username></username>
          <password></password>
        </serverA>
        <serverB>
          <host></host>
          <port></port>
          <username></username>
          <password></password>
        </serverB>
        <!--- this will be the place for other components specified by user -->
    </components>
</configuration> 
```

应用程序知道的服务器位置和位置。

在源代码中，类的层次结构如下：

组件 <--- 服务器 <--- 服务器 A、服务器 B

ServerA 和 ServerB 从 Server 下降并分别映射到和元素。

配置的点条目位于名为 Configuration 的类中，该类包含一个 ServerA 列表和一个 ServerB 列表。现在，因为应用程序应该能够监视它不知道的其他程序，所以 XML 配置文件也应该是可扩展的，所以 Configuration 类还包含一个 Object 列表，该列表映射到用户在配置文件。

配置.java

```
public class Configuration
{
   @XmlElement
    private List<ServerA> serveras;

   @XmlElement
    private List<ServerB> serverbs;

   @XmlAnyElement
    private List<Object> otherServers;
} 
```

现在，你们也会这样做来解决问题吗？我想，我不知道，我只是对应用程序能够监视用户指定的其他程序的要求感到困惑。我知道我一开始就设置了它，但我这样做是因为“这看起来像是可以利用 Eclipse RCP 的扩展点的东西”，但是现在已经跳入配置文件，我不清楚应该如何配置文件与plugin.xml有关吗？

在我的脑海中，我希望配置文件能够指定应用程序需要监控的程序的详细信息（主机、端口、用户名和密码）。plugin.xml 用于指定应用程序还需要监视的用户定义程序的扩展点和扩展。那么这是否意味着，对于用户自定义的程序，最终用户需要在plugin.xml中将它们配置为扩展，然后在配置文件中指定它们的其他细节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T10:31:41.763

有几种方法可以解决这个问题。但让我试一试。

你有一堆不同的服务器，具有不同的监控特性。但是对于您的 Eclipse 应用程序，它们都必须看起来相似。

假设您有一个 Eclipse RCP 应用程序，其中包含一些用于监视服务器的 UI。对于这个应用程序，服务器实际上是什么并不重要，但应该有一个通用接口来连接它们。

一种可能性是您有一个代表服务器通信协议的接口，然后，您在主插件中定义一个扩展点，允许对该协议的贡献实现。因此，您将能够创建某个接口的实例集合（我们称之为 IMonitoringProtocol）。此界面将包含您在 UI 上显示状态所需的方法。

此外，您将拥有一个列出所有服务器的 XML 配置文件。此配置文件中的元素之一是用于监控的协议。

So, when you launch your application, you would instantiate all the contributed protocols, and read the configuration file. You can then find the right protocol to communicate to a server by matching the configuration entries.

This allows you to add new protocols in the future, for servers that are not known yet.

# web-crawler - 抓取页面时检测 CacheBuster 查询字符串

> ID：656866
> 
> 赞同：-1
> 
> 时间：2009-03-18T03:18:56.047
> 
> 标签：web-crawler

我已经组装了一个相当简单的爬行引擎，它工作得很好，并且在很大程度上避免了陷入循环陷阱。（即，页面 A 链接到页面 B，页面 B 链接到页面 A）。

它卡在这个循环中的唯一一次是当两个页面使用 cachebuster 查询字符串相互链接时，基本上它是每次刷新时每个链接上的唯一查询字符串。

这导致页面对于爬虫来说总是看起来像新页面，并且爬虫在两个页面之间移动时卡住了。

除了在两个页面之间发生 N 次反弹后才突破，唯一的区别是查询字符串（我认为这不是一个很好的方法），还有其他方法可以检测和突破这些陷阱...... ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-12T14:39:45.363

**也许它们只是会话 ID，而不是“缓存破坏者”——cookie 会有所帮助**

几年前，我不得不处理一个类似的问题，我们找到了一个简单的解决方案：在您的 Web 客户端中启用 cookie。以下是为什么这对我们有帮助的解释：

确实，某些 URL（尤其是广告图像）旨在“破坏缓存”。但是，我们没有找到它们的循环引用。

许多 URL 会在 URL 中添加一个看起来随机的字符串，以**识别访问者**。没有打算破坏缓存——这只是他们为每个访问者获取唯一“会话标识符”的方法的副作用。

当然，最好用 cookie 来识别访问者。事实上，大多数使用会话标识符的动态站点都会首先尝试使用 cookie。只有当他们发现 Web 客户端不支持它们时，站点才会回退到将会话 ID 添加到 URL。

底线：

*   通过启用 cookie，我们可以让大多数动态网站保持快乐，并避免 URL 中出现随机字符串（会话标识符）。
*   广告商**确实**使用缓存破坏器——但大多没有循环引用。

对我们来说，这解决了问题。

# xml - 如何通过分层节点循环使用 XSLT？

> ID：656871
> 
> 赞同：3
> 
> 时间：2009-03-18T03:23:39.593
> 
> 标签：xml, xslt, docbook

我正在尝试遍历 Docbook 部分节点。它们的结构如下：

```
<sect1>
   <sect2>
      <sect3>
         <sect4>
            <sect5>
            </sect5>
         </sect4>
      </sect3>
   </sect2>
</sect1> 
```

所以sect1里面只有sect2，sect2里面只有sect3，以此类推。我们也可以在一个节点内有多个子节点；例如，一个 sect1 中有多个 sect2。

以编程方式，我将使用计数器递归地遍历它们，以跟踪循环所在的部分。

这次我必须使用 XSLT 并遍历它。因此，在 XSLT 中是否有等效的方法或更好的方法？

编辑：我已经有 Willie 建议的类似代码，我在其中指定了每个教派节点（sect1 到 sect5）。我正在寻找它自己循环确定教派节点的解决方案，我不必重复代码。我知道 Docbook 规范最多只允许 5 个嵌套节点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T04:24:52.597

**如果您对所有 sect{x} 节点进行相同的处理，无论 {x}，正如您在其中一条评论中所说，那么以下内容就足够了**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match=
     "sect1|sect2|sect3|sect4|sect5">
      <!-- Some processing here -->
      <xsl:apply-templates/>
    </xsl:template>
</xsl:stylesheet> 
```

如果您确实需要以相同的方式处理更多具有不同名称的“sect”{x} 形式的元素（假设 x 在 [1, 100] 范围内），则可以使用以下内容：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match=
     "*[starts-with(name(), 'sect')
      and
        substring-after(name(), 'sect') >= 1
      and
        not(substring-after(name(), 'sect') > 101)
       ]">
      <!-- Some processing here -->
      <xsl:apply-templates/>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T03:34:22.950

```
<xsl:template match="sect1">
    <!-- Do stuff -->
    <xsl:apply-templates />
</xsl:template>

<xsl:template match="sect2">
    <!-- Do stuff -->
    <xsl:apply-templates />
</xsl:template>

<xsl:template match="sect3">
    <!-- Do stuff -->
    <xsl:apply-templates />
</xsl:template>

<xsl:template match="sect4">
    <!-- Do stuff -->
    <xsl:apply-templates />
</xsl:template>

<xsl:template match="sect5">
    <!-- Do stuff -->
    <xsl:apply-templates />
</xsl:template> 
```

# c - 确定最后在 Linux 中修改文件的 UID？

> ID：656876
> 
> 赞同：3
> 
> 时间：2009-03-18T03:24:29.217
> 
> 标签：c, linux, inode

我正在编写一个程序，它将监视选择的文件和目录的更改。有些文件是世界可写的，有些是所有者，有些是组。

我需要做的是能够找出最后一个修改（不仅仅是访问）文件的人。不知何故，我认为这很简单，因为我们知道文件的 inode .. 但是我似乎找不到任何方法来获得它。我认为有一种实用的方法可以将任何给定的 inode 与上次访问它的 uid 关联起来。

我想我已经挤压了谷歌，因为它会给我关于这个话题的所有信息。

任何帮助表示赞赏。我正在用 C 编写程序。

**编辑：**

在修改文件的任何程序的 PID 早已消失后，我需要能够做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-18T03:34:31.203

如果您使用的是 2.6 内核，则可以利用内核的 auditd 守护程序。[检查这个网址](http://www.cyberciti.biz/tips/linux-audit-files-to-see-who-made-changes-to-a-file.html)。它可能会给你一些关于如何完成你想要做的事情的提示。我确信你可以在 C 中使用一个 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T03:37:40.073

据我所知，任何常见文件系统都不会存储此信息，但您应该能够连接到[inotify](http://en.wikipedia.org/wiki/Inotify)并保留哪些进程接触哪些文件的审计跟踪。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-18T03:44:03.910

好吧，直接使用带有普通文件系统的旧标准 Linux，您将无法做到这一点。该信息不会存储在任何地方（查看`man lstat`存储的内容*。*）

正如@pablo 建议的那样，您*可以*在打开安全审计的情况下执行此操作。他指出的链接是一个好的开始，但它的要点是：

*   你打开审计守护进程，它可以从内核进行审计
*   您配置规则文件以捕获您想要的内容
*   您在审计文件中搜索您想要的事件。

这里的困难在于，如果您开始审核所有文件的所有文件操作，那么审核将会变得很大。

那么你想要满足的实际需求是什么？

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2010-05-19T11:59:57.360

非常基本，但它有效：您可以轻松编写一个小 c 程序来执行您想要的操作 本示例检索文件或目录或链接的 UID，只需尝试找到您想要的属性。

编译：

```
gcc -x c my-prog.c -o my-prog 
```

然后：

```
./my-prog /etc 
```

可以像这样获得很多其他信息

它不坚固。但无论如何，我知道如何使用它，并在 bash shell 中进行检查:-)

```
[ -x /etc ] && my-prog /etc 
```

源代码：

```
# retrieve the uid of a file
# source code: my-prog.c
#
#include <stdio.h> 
#include <sys/types.h>
#include <sys/stat.h>
int main(int argc, char **argv) {
  struct stat buffer;
  int status;
  char *fname;
  fname=argv[1];
  status = stat(fname, &buffer);
  printf("%i",buffer.st_uid);
  return 0;
} 
```

# asp.net - 绑定 ASP.net 对象在测试服务器上失败，但不是 dev

> ID：656880
> 
> 赞同：0
> 
> 时间：2009-03-18T03:30:46.610
> 
> 标签：asp.net

对于 GridView 中的项目，我收到以下错误：**对 Bind 的调用格式不正确。有关 Bind 的正确参数，请参阅文档。**

```
<ItemTemplate>
    <asp:LinkButton ID="lnkColumn" runat="server" CausesValidation="False" CommandName="Select"
        Text='<%# Bind("TableName.Column") %>' />
</ItemTemplate> 
```

我无法弄清楚为什么它在我的开发服务器上运行良好，但在测试机器上却不行。它也适用于生产盒？我们正在为该网站运行 ASP.NET 3.5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T04:23:45.890

冒着粗鲁的风险：是否值得仔细检查您的数据库架构，寻找缺失的字段？您的环境之间有什么不同吗？尝试使用 winmerge 比较您的环境（它很棒！）

另一个想法：注释掉“绑定”行，并用这些替换它，以更好地了解发生了什么：

```
<%= Table.Field %> 
<%= Table.Field.GetType().ToString() %> 
<%= Table.GetType().ToString() %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-09-02T14:46:09.437

在 windows 2008 SP1 服务器的“程序和功能”中注意到 2 个 .net 3.5 SP1 实例。卸载（删除了这两个项目），重新启动，再次重新安装了 .net 3.5 SP1（这一次作为一个实例出现在列表中。一切正常，没有更多的绑定错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T01:16:52.070

我找到了解决方案。测试服务器是唯一没有 .NET 3.5 SP1 的服务器。我安装了 SP 并重新启动 - 问题解决了。

# c# - Pop3 到 C# 中的 SMTP 消息自定义转发器

> ID：656881
> 
> 赞同：3
> 
> 时间：2009-03-18T03:32:51.753
> 
> 标签：c#, smtp, pop3, forwarding

我想编写一个服务，定期检查 POP3 帐户是否有新消息，并根据自定义业务逻辑将消息转发到适当的“收件人”，并可能更改“发件人”。我可能需要在服务器上保留一些消息，直到某些条件准备好转发它们。

我找到了一个使用 Chilkat .NET 组件的示例，该组件可能有效： [http ://www.example-code.com/csharp/pop3_forwarder.asp](http://www.example-code.com/csharp/pop3_forwarder.asp)

我的问题是：.NET 空间中是否还有其他使用任何其他组件的示例？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-18T09:52:13.870

以下 SO 问题/答案可能有助于为您的项目的 POP3 部分查找组件：

*   [在 C# 中使用 Pop3 读取电子邮件](https://stackoverflow.com/questions/44383/reading-email-using-pop3-in-c#102135)
*   [免费的 POP3 .NET 库？](https://stackoverflow.com/questions/26606/free-pop3-net-library)

您可以使用*System.Net.Mail中的*[SmtpClient](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)来发送邮件：

 **   [使用 C# 发送电子邮件](https://stackoverflow.com/questions/449887/sending-e-mail-using-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T05:36:09.307

[我使用 MailBee 的IMAP](http://www.afterlogic.com/products/net-imap-component)、[POP](http://www.afterlogic.com/products/net-pop3-component)和[SMTP](http://www.afterlogic.com/products/net-smtp-component) .NET 组件实现了一些非常相似的东西。

恐怕它们不是免费的，但我发现它们非常可靠，而且 AfterLogic 的支持速度很快。

还有免费的（包括源代码）[LumiSoft Mail Server](http://www.lumisoft.ee/lswww/ENG/Products/Mail_Server/mail_index_eng.aspx?type=info)，它支持 POP3 中继，可以从 POP3 服务器收集邮件并从那里管理它们，你可以适应吗？（它是用 C# 编写的，很好用，并且可以干净地升级到 VS2008）。我对此也没有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-21T18:33:46.343

试试[Mail.dll .NET 电子邮件组件](http://www.lesnikowski.com/mail/)。它支持 SSL、POP3 和 SMTP 客户端。

```
using(Pop3 pop3 = new Pop3())
{
    pop3.Connect("mail.host.com");    // Connect to the server 
    pop3.Login("user", "password");

    foreach(string uid in pop3.GetAll())
    {
        // Receive mail
        IMail mail = new MailBuilder()
   .CreateFromEml(pop3.GetMessageByUID(uid));
        Console.WriteLine(mail.Subject);
    }
    pop3.Close(true); 
} 
```

你可以[在这里下载](http://www.lesnikowski.com/mail/)

# c++ - 使用 OOP 和 STL 在 C++ 中解析缓冲区

> ID：656882
> 
> 赞同：0
> 
> 时间：2009-03-18T03:33:26.620
> 
> 标签：c++, parsing

我想使用 OOP 和 STL 等来解析缓冲区。

我的缓冲区包含

```
ABCDXXXX333$$$$YYYY 
```

我需要将它们分开`ABCD XXXX 333 $$$$ YYY`并将它们移动到结构中。我在规则表之一中定义了它们的偏移量以及缓冲区中有多少元素。一些字段也被分隔。

*   任何建议我可以使用哪些 STL 功能？
*   任何示例代码都可以工作，我将在它之上构建。

我将在 AIX (Unix) Box 上使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T17:54:52.587

我真的建议您使用正则表达式来解决您的问题，[boost::regex](http://www.boost.org/doc/libs/1_38_0/libs/regex/doc/html/index.html)可用于 C++。

正则表达式将保护您免受许多通常会变成令人讨厌的安全问题的技术问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T03:39:57.040

您可能会让包含所有数据的类具有一个静态函数，该函数根据您的序列化字符串创建对象。它的工作原理取决于您的数据。您说您已经为字段定义了偏移量，但也说它们是分隔的。这带来了一个问题，因为两者都需要以不同的方式处理。

您的示例的简单案例：

```
class DataContainer
{
    using namespace std; // FIXME Is this legal?

    public:
        DataContainer(string part1, string part2, string part3, string part4, string part5) :
            m_part1(part1), m_part2(part2), m_part3(part3), m_part4(part4), m_part5(part5)
        {
        }

        static DataContainer readFromStream(istream &stream)
        {
            DataContainer ret;
            char tmp[16];

            stream.get(tmp, 4);
            ret.m_part1 = string(tmp, 4);

            stream.get(tmp, 4);
            ret.m_part2 = string(tmp, 4);

            stream.get(tmp, 3);
            ret.m_part3 = string(tmp, 3);

            stream.get(tmp, 4);
            ret.m_part4 = string(tmp, 4);

            stream.get(tmp, 3);
            ret.m_part5 = string(tmp, 3);

            return ret;
        }

    private:
        DataContainer()
        {
        }

        string m_part1, m_part2, m_part3, m_part4, m_part5;  // Put these in an array if they belong in an array.
}; 
```

*注意：我已经内联了我所有的函数。您可能应该将您的函数放在他们自己的 .cpp 文件中。*

像这样使用它：

```
DataContainer dc = DataContainer::readFromStream(std::cin); 
```

`cin`这会从( )中读取您的数据`stdin`并将数据结构放入`dc`.

如果您已经读取了数据，则可以很容易地使用 STL 迭代器（基本上是指向容器元素的指针）。您还可以使用经典索引，这对于您的给定情况更简单。例如：

```
static DataContainer readFromBuffer(string buffer)
{
    DataContainer ret;
    ret.m_part1 = string(buffer, 0, 4);
    ret.m_part2 = string(buffer, 4, 4);
    ret.m_part3 = string(buffer, 8, 3);
    ret.m_part4 = string(buffer, 11, 4);
    ret.m_part5 = string(buffer, 15, 3);
    return ret;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T04:01:34.977

如果“缓冲区”由 char 组成，则：

```
string abcd = string(buffer,0,4);
string xxxx = string(buffer,4,8);
etc. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T05:20:31.293

使用 一次读取一行[`std::getline()`](http://www.cplusplus.com/reference/iostream/istream/getline.html)，它将该行填充到`std::string`（您的缓冲区）中。然后使用`std::string`方法根据您的数据格式解析数据。或者，当您需要处理真正的语法并且 std::string 方法变得难以清醒阅读时，可以使用 Lex/Yacc 之类的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T03:38:27.857

您可以使用`cin.peek ()`它来查看它是否是您想要获取的字符（注意这不会将其从流中删除）。也许三个类/函数可以使用这种技术提取他们所采取的内容，并在他们到达不应该持有的角色时停止。

# iphone - 如何向 UITextField 添加清除按钮？

> ID：656889
> 
> 赞同：3
> 
> 时间：2009-03-18T03:36:57.580
> 
> 标签：iphone, cocoa-touch, uitextfield

与[将“清除”按钮添加到 iPhone UITextField](https://stackoverflow.com/questions/320078/adding-the-clear-button-to-an-iphone-uitextfield)相同，但该按钮已旧。我试过了

```
myUITextField.clearButtonMode = UITextFieldViewModeWhileEditing; 
```

但什么都没有发生。什么可以阻止它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-18T06:22:17.383

在 cellForRowAtIndex 中，在我的情况下，修复看起来像这样：

```
cell = [tableView dequeueReusableCellWithIdentifier:@"CellNameIdentifier"];
    if (cell == nil) {
        [[NSBundle mainBundle] loadNibNamed:@"CellName" owner:self options:nil];
        cell = cellName;
        [cellName setAccessoryType:UITableViewCellAccessoryNone];
        //textfield in inside cellName
        textfield.clearButtonMode = UITextFieldViewModeWhileEditing;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:52:28.397

在某些情况下，即使您的文本输入显示正常，UITextField 的高度和对齐方式也会导致清除按钮隐藏在单元格下方。

仔细检查你的身高或试试这个：

```
textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter; 
```

# objective-c - 正态分布函数

> ID：656897
> 
> 赞同：2
> 
> 时间：2009-03-18T03:40:27.697
> 
> 标签：objective-c, algorithm, math

## *编辑*

因此，根据迄今为止的答案（感谢您抽出宝贵时间），我感觉我可能不是在寻找正态分布函数。也许我会尝试重新描述我想要做什么。

假设我有一个返回数字 0 到 10 的对象。该数字控制“速度”。然而，不是 10 是最高速度，我需要 5 是最高速度，任何更低或更高的速度都会相应减慢。（有缓动，因此是钟形曲线）

我希望这更清楚;/

***-original question***
这些是我希望我记得数学课上的东西的时候。

我试图弄清楚如何在 obj-C 中编写一个函数，在其中定义边界 ex (0 - 10) ，然后 if x = foo y = ? ....其中 x 运行类似于 0,1,2,3,4,5,6,7,8,9,10 和 y 运行 0,1,2,3,4,5,4,3,2 ,1,0 但仅在曲线上

类似于附图的东西。

我尝试在谷歌上搜索正态分布，但它超出了我的想象。我希望找到一些网站列出一些有用的算法，但不是很成功。

那么任何人都可以在这里帮助我吗？如果有一些很好的网站展示了有用的数学函数，我很乐意去看看。

蒂亚！！！

*-添加*
我不是在寻找随机数，我在寻找.. 例如：如果 x=0 y 应该是 0，如果 x=5 y 应该是 5，如果 x=10 y 应该是 0... . 以及所有其他在数字之间不那么明显的

[替代文字 http://dizy.cc/slider.gif](http://dizy.cc/slider.gif)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T03:59:39.757

您要绘制的是正态分布的概率密度函数 (pdf)。您可以[在强大的 Wikipedia](http://en.wikipedia.org/wiki/Normal_distribution)上找到它。

幸运的是，正态分布的 pdf 并不难实现——其他一些相关函数要差得多，因为它们需要误差函数。

要获得像您展示的那样的图，您需要平均值为 5，标准差约为 1.5。中位数显然是中心，并且在给定左右边界的情况下找出适当的标准偏差并不是特别困难。

给定 x 坐标、标准偏差和平均值的计算 pdf 的 y 值的函数可能类似于：

```
double normal_pdf(double x, double mean, double std_dev) {
    return( 1.0/(sqrt(2*PI)*std_dev) *
            exp(-(x-mean)*(x-mean)/(2*std_dev*std_dev)) );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-18T07:19:24.987

好的，您的编辑确实澄清了一些事情。你不是在寻找与正态分布有关的任何东西，只是一个很好的平滑小斜坡函数。[Paul 提供](https://stackoverflow.com/questions/656897/normal-distribution-function/656971#656971)的那个会很好，但是对于其他值进行修​​改是很棘手的。它可以变得更灵活一些（我的代码示例是用 Python 编写的，应该很容易翻译成任何其他语言）：

```
def quarticRamp(x, b=10, peak=5):
    if not 0 <= x <= b:
        raise ValueError   #or return 0
    return peak*x*x*(x-b)*(x-b)*16/(b*b*b*b) 
```

参数`b`是您希望在该区域上具有斜率的上限（在您的示例中为 10），并且`peak`是您希望它走多高（在示例中为 5）。

就我个人而言，我喜欢二次样条方法，它的计算成本略低，并且具有不同的曲线（这条曲线非常适合用于一些对您来说根本不重要的特殊应用程序）：

```
def quadraticSplineRamp(x, a=0, b=10, peak=5):
    if not a <= x <= b:
        raise ValueError   #or return 0
    if x > (b+a)/2:
        x = a + b - x
    z = 2*(x-a)/b
    if z > 0.5:
        return peak * (1 - 2*(z-1)*(z-1))
    else:
        return peak * (2*z*z) 
```

这类似于其他函数，但采用下限`a`（在您的示例中为 0）。逻辑有点复杂，因为它是分段函数的某种优化实现。

两条曲线的形状略有不同；您可能不在乎确切的形状是什么，因此也可以选择。有无数的斜坡函数可以满足您的标准；这是两个简单的，但他们可以得到你想要的巴洛克风格。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-18T04:31:13.453

正态分布永远不会等于 0。请确保您要绘制的确实是正态分布。

如果您只是在寻找这种钟形（带有切线和所有内容），您可以使用以下公式：

```
x^2*(x-10)^2 for x between 0 and 10
                0 elsewhere 
```

（如果您需要查看 5，请除以 125。）

```
double bell(double x) {
    if ((x < 10) && (x>0))
        return x*x*(x-10.)*(x-10.)/125.;
    else
        return 0.;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T03:53:25.777

嗯，当然有很好的旧维基百科。和[数学世界](http://mathworld.wolfram.com/)。

你想要的是一个用于[“生成正态分布随机偏差”](http://en.wikipedia.org/wiki/Normal_distribution#Generating_values_for_normal_random_variables)的随机数生成器。由于 Objective C 可以调用常规的 C 库，因此您需要像[GNU Scientific Library](http://www.gnu.org/software/gsl/)这样的 C 可调用库，或者为此，您可以按照[此处](http://www.taygeta.com/random/gaussian.html)的描述自行编写。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T04:29:03.927

尝试通过生成 1 到 6 之间的随机数来模拟掷骰子。如果将 5 个独立掷骰子的掷骰数相加，您将得到一个非常好的正态分布近似值。如果你愿意，你可以掷更多的骰子，你会得到一个更好的近似值。

这是[一篇文章](http://www.johndcook.com/blog/2009/02/10/rolling-dice-for-normal-samples/)，解释了为什么这样做。它可能比您想要的更多数学细节，但您可以将其展示给某人以证明您的方法是正确的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-18T04:43:20.430

如果您想要的是概率密度函数 p(x) 的值，它是 x 处均值 mu 和标准差 sigma 的正态（高斯）分布，则公式为

```
p(x) = exp( ((x-mu)^2)/(2*sigma^2) ) / (sigma * 2 * sqrt(pi)) 
```

其中 pi 是圆的面积除以其半径的平方（大约 3.14159...）。使用 C 标准库`math.h`，这是：

```
#include <math>

double normal_pdf(double x, double mu, double sigma) {
  double n = sigma * 2 * sqrt(M_PI); //normalization factor
  p = exp( -pow(x-mu, 2) / (2 * pow(sigma, 2)) ); // unnormalized pdf

  return p / n;
} 
```

当然，你可以在 Objective-C 中做同样的事情。

如需参考，请参阅[Wikipedia](http://mathworld.wolfram.com/NormalDistribution.html)或[MathWorld](http://mathworld.wolfram.com/NormalDistribution.html)文章。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-18T07:08:32.187

听起来您想编写一个产生特定形状曲线的函数。类似于 y = f(x)，对于 [0:10] 中的 x。您对 y 的最大值有一个约束，并且大致了解您希望曲线看起来像什么（有点钟形，在 x 范围的边缘 y=0，当 x=5 时 y=5）。所以粗略地说，你会用 x 范围迭代地调用你的函数，一个步骤可以给你足够的点来让你的曲线看起来不错。

所以你真的不需要随机数，这与概率无关，除非你想要它（例如，你希望你的曲线看起来像正态分布的轮廓或沿着这些线的东西）。

如果您清楚地知道什么函数会产生您想要的曲线，那么代码就很简单了——一个计算 f(x) 的函数和一个 for 循环来调用它所需的 x 值所需的次数。绘制 x,y 对，您就完成了。这就是你的算法——在 for 循环中调用一个函数。

实现该功能的例程的内容将取决于您希望曲线看起来如何的细节。如果您需要有关可能返回类似于您的样本的曲线的函数的帮助，我会指导您阅读其他答案中的阅读材料。:) 但是，我怀疑这实际上是某种分配，并且您已经获得了一个功能。如果您实际上是在自己做这件事来学习，那么我再次回应其他阅读建议。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-18T21:20:21.250

y=-1*abs(x-5)+5

# objective-c - 为什么 NSNumber 有这么奇怪的 retainCounts？

> ID：656902
> 
> 赞同：1
> 
> 时间：2009-03-18T03:42:49.343
> 
> 标签：objective-c, memory-management

```
NSNumber* n = [[NSNumber alloc] initWithInt:100];
NSNumber* n1 = n; 
```

在上面的代码中，为什么n的retainCount的值设置为2？在第二行代码中，我没有使用retain来增加retainCount的个数。

* * *

我发现了一个奇怪的情况。实际上，retainCount 取决于初始数字：

```
NSNumber *n = [[NSNumber alloc] initWithInt:100]; 
// n has a retainCount of 1

NSNumber *n2 = [[NSNumber alloc] initWithInt:11]; 
// n has a retainCount of 2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-18T04:04:05.313

停止。停下来。**永远不要**看`retainCount`一个物体的。曾经。它不应该是 API 和可用的。你在要求痛苦。

有太多的事情`retainCount`没有意义。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-18T04:10:32.787

基于[此处](http://forums.macrumors.com/archive/index.php/t-205556.html)的此链接，可能在幕后对常见的 NSNumber 进行了一些优化（这可能不会在所有实现中发生，因此可能是 @dizy 的 retainCount 为 1 的原因）。

基本上，因为 NSNumbers 是不可变的，所以底层代码可以自由地为您提供相同数字的第二个副本，这将解释为什么保留计数为 2。

n 和 n1 的地址是什么？我怀疑他们是一样的。

```
NSNumber* n = [[NSNumber alloc] initWithInt:100];

NSLog(@"Count of   n : %i",[n retainCount]);

NSNumber* n1 = n;

NSLog(@"Count of   n : %i",[n retainCount]);
NSLog(@"Count of   n1: %i",[n1 retainCount]);
NSLog(@"Address of n : %p", n);
NSLog(@"Address of n1: %p", n1); 
```

根据您的更新，我给您的那个链接几乎肯定是问题所在。有人进行了测试，发现从 0 到 12 的 NSNumbers 会给你已经创建的那些的副本（它们实际上可能是在用户请求它们之前由框架创建的）。12 以上的其他人似乎给出了 1 的保留计数。引用：

> 从我能够做的一点点检查来看，看起来您将获得整数 NSNumbers 的“共享”版本，用于 [0-12] 范围内的值。即使值相等，任何大于 12 的值都会为您提供唯一的实例。为什么是十二？没有线索。我什至不知道这是一个硬数字还是间接数字。

试试 11、12 和 13 - 我想你会发现 13 是第一个给你一个非共享 NSNumber 的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-18T04:26:57.803

保留计数是一个实现细节。有时它们在调试中可能有点用处，但通常你不应该关心它们。您应该关心的是您是否遵循[内存管理规则](http://developer.apple.com/documentation/Cocoa/Conceptual/MemoryMgmt/MemoryMgmt.html)。

举一个为什么查看保留计数不可靠的示例，这是一个完全合法的类，它遵守 API 合同，并且在所有情况下都会正确运行：

```
@implementation CrazyClass
  - (id)retain {
      for(int i=0; i<100; i++) {
          [super retain];
      }
  }

  - (void)release {
      for(int i=0; i<100; i++) {
          [super release];
      }
  }
@end 
```

…但如果你检查它的保留计数，你会认为你有一个“问题”。

这种精确的情况在实践中并不经常发生，但它说明了为什么查看保留计数对于判断是否有问题是无用的。对象确实会通过您无法控制的代码在幕后保留。例如，NSNumber 有时会缓存实例。对象会自动释放，这不会反映在保留计数中。可能会发生很多会混淆保留计数的事情。有些课程甚至可能不会将保留计数保留在您可以看到的地方。

如果您怀疑自己有泄漏，您应该检查用于该目的的真正调试工具，而不是通过戳保留计数。对于您正在编写的代码，您应该主要关注遵循我上面链接的指南。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-18T04:29:20.933

你**永远不**应该依赖`retainCount`对象的。您应该**只**将它用作调试辅助，而不是用于正常的控制流。

为什么？因为它没有考虑到`autorelease`s。如果一个对象是`retain`ed 并且随后是`autorelease`d，它`retainCount`会增加，但就您而言，它的*实际*保留计数没有改变。获得一个对象的真实保留计数的唯一方法是计算它被添加到自动释放池链中的任何自动释放池的次数，尝试这样做是自找麻烦。

在这种情况下，`retainCount`是 2 因为在`alloc`or内部`initWithInt:`的某个地方，对象正在被`retain`ed 和`autorelease`d。但是您不需要知道或关心这一点，这是一个实现细节。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-18T03:49:39.967

我觉得你还有别的事...

```
 NSNumber* n = [[NSNumber alloc] initWithInt:100]; 
    NSNumber* n1 = n;
    NSLog(@"n = %i",[n retainCount]); 
```

结果是 1

# html - 收据打印

> ID：656906
> 
> 赞同：0
> 
> 时间：2009-03-18T03:45:38.837
> 
> 标签：html, css, printing

我正在尝试为我的客户制作一个网络应用打印收据（他要求我这样做）我已经放置了一张桌子和所有东西但是当我打印它时我无法让它正确打印到收据的字段中。让我解释一下，收据已经制作好了，所以我只是在一个地方，用户输入所有必填字段，然后像打印普通网页一样打印它，作为这张收据的输出纸（看起来有点像[这样](http://www.monografias.com/trabajos55/documentos-comerciales/Image10677.gif)）无论如何，我试图移动打印机使用“打印”css打印的位置，但它就是不服从......最重要的是，文本变得很小（我真的不知道为什么）而且老实说没有知道如何处理这个了=/...有人知道吗？

* * *

**编辑代码**

```
* {
    /* old-style reset here :) */
    border: 0px;
    padding: 0px;
}
table {
    left:0px;
    top:0px;
}
td, th {
    text-align: center;
    vertical-align: middle;
    color: #000;
}

input{
    outline:none;
}

.borde{
    background-color:#0FC;
    border: solid 2px #0FF;

} 
```

HTML 是一个普通的表格...带有输入字段...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T03:44:24.447

如果您提供多个样式表，则需要确保它们没有被同时应用。例如：

```
<link type="text/css" rel="stylesheet" src="default.css" />
<link type="text/css" rel="stylesheet" src="default.css" media="print" /> 
```

将在打印时应用两个样式表，但在其他情况下只应用第一个。

如果您*只想*在打印时应用您的打印样式表，您需要为所有样式表指定媒体。就像是：

```
<link type="text/css" rel="stylesheet" src="default.css" media="screen, projection" />
<link type="text/css" rel="stylesheet" src="default.css" media="print" /> 
```

并且只会应用打印样式表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T03:51:15.423

[这个线程](https://stackoverflow.com/questions/580424/wyswyg-html-form-printing/580468#580468)可能会有所帮助。它有一些与您的问题相关的良好链接。

此外，它如何显示预览？可以分享一下代码吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T04:14:01.407

除非您在某处指定了 table 的位置：absolute，否则您应该将其添加到 table 元素的 css 中。我不确定所有浏览器如何处理这个问题，但无论如何它应该有它。

# jquery - 我可以使用 jQuery 创建一个函数，点击后转到一个 URL，然后在其上执行一个 jQuery 函数吗？

> ID：656919
> 
> 赞同：1
> 
> 时间：2009-03-18T04:00:23.357
> 
> 标签：jquery, url, function, navigation, hyperlink

我不完全确定这是否可能，但到目前为止，你们在 SO 的人总是能够帮助我，所以这里是：

以下网站：[www.bgarchitect.co.nz](http://www.bgarchitect.co.nz)

有一个在主页上可以正常工作的导航，但是（由于我犯了一个错误）在子页面上不起作用，因为它依赖于加载图像然后切换它们的 hide() / show() 属性。（进入网站后很容易发现错误）。

有什么方法可以创建一个函数来检查用户是否在主页上（[http://www.bgarchitect.co.nz/index.php](http://www.bgarchitect.co.nz/index.php)），如果不是，则转到该页面并在加载时自动执行通常映射到被点击的导航元素的功能？

**示例：** 我在一个子页面上，然后单击“文化”——因为我不在主页上——我被带回主页，并且无需单击按钮即可执行culture() 函数再次。

**PS：**我知道这在任何情况下都远非理想，但我试图不必手动修复整个站点的错误（这需要相当长的时间）..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T04:13:56.693

您可以在查询字符串中传递一个参数（例如，转到 index.php?run=culture），并且在主页上有一些东西可以检查该参数的查询字符串，并执行所需的命令。

但是，如果您愿意，可能值得正确修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T04:15:57.673

一般来说，我建议您解决问题的真正原因，而不是绕过它。如果你能想出一个好的解决方案，你很可能会在未来每次必须做出新的改变时感到痛苦。

鉴于您已经在页面通过 jQuery 加载时更新了所有链接，似乎您应该能够找到一种方法来根据您所在的页面正确更新它们，而不是加载页面，然后调用函数想法。

如果您不打算解决根本问题，我建议您在 PHP 代码中使用重定向来修复它，而不是在 JS 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T04:47:52.837

查找和替换是您的朋友。有很多 IDE/文本编辑器可以跨多个文件执行此操作。

# crystal-reports - 水晶报告9

> ID：656920
> 
> 赞同：2
> 
> 时间：2009-03-18T04:01:08.643
> 
> 标签：crystal-reports

使用 Visual Studio Studio.net 从 Crystal Report 9 导出时，新的分页符不起作用。我在水晶报表 9 设计中设置了以下选项

纸张大小为 a3，方向为横向。我创建了 2 个报告组（日期和组织单位）我希望在每个新日期和每个新组织单位之后都有一个分页符。我已经在组页脚 1 和组页脚 2 中设置了新页面。

当我导出到 excel 时，它不会在每个组更改后打破页面。谁能帮我解决这个问题。

谢谢比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T16:27:00.340

Excel 在导出过程中不理解分页符。最好的办法是对报表进行分组并将它们呈现为 Excel 文档中的选项卡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-20T14:08:00.627

我在另一个关于导出到 Excel的[问题中说过：](https://stackoverflow.com/questions/570434/reportviewer-export-to-excel-adds-decimal-to-percentage-values-how-can-i-overrid/570507#570507)

> 如果这是使用 CR 制作的，我发现如果要始终将报告导出到 Excel，最好删除 CR 具有/执行的所有格式。否则你会遇到奇怪的异常，就像你正在经历的那样，并且会为你节省很多痛苦。
> 
> 我为我的一些用户所做的是创建一份没有格式的报告，专门用于导出，以及一份包含 CR 的所有花里胡哨的报告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T05:46:43.540

Crystal 在导出到 excel 时一直存在问题。关于如何在屏幕上和 Excel 工作表中获得好看的报告，有很多技巧。您的问题没有一个答案，因为它实际上取决于您的报告的结构。我在“水晶报告分页 Excel 导出”上搜索了很多资料。例如：
[在 Crystal Reports .NET 中导出到 Excel - 完美的 Excel 导出](http://aspalliance.com/478_Exporting_to_Excel_in_Crystal_Reports_NET__Perfect_Excel_Exports.all)

# css - CSS clear：两者都不起作用

> ID：656926
> 
> 赞同：1
> 
> 时间：2009-03-18T04:03:24.427
> 
> 标签：css, xhtml

我似乎无法正确清除我的布局。看看[这个](http://www.digiflip.tv/Rant-and-Rave)

我无法阻止左栏中的项目向下推右侧的项目。任何人都可以帮忙吗？

~~[带有一些尖箭头的屏幕截图](http://www.digiflipconcepts.com/temporary-images/float-issues.jpg)~~（死链接）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T04:27:56.397

问题标记/样式似乎是：

```
<div class="clear" /> 
```

这是清除左侧 div 中的浮动，这会在您的帖子和预告片部分之间产生间隙。

```
myblog.css (line 166)

#myBlog-wrap div.clear {
clear:right; <--- problem clear
height:1px;
line-height:1px;
margin:0;
padding:0;
} 
```

[下面是 firefox 3 如何在 clear 禁用的情况下呈现页面。](http://i59.photobucket.com/albums/g311/squidsoup/fixedrendering.png)

与您的问题无关，但您似乎也有一些 IE 特定的 css 问题需要解决。绝对考虑为您的网站制作有条件的 ie.css :)

# python - 与正在运行的 python 守护进程通信

> ID：656933
> 
> 赞同：53
> 
> 时间：2009-03-18T04:09:31.727
> 
> 标签：python, daemon

我编写了一个作为守护进程运行的小型 Python 应用程序。它利用线程和队列。

我正在寻找更改此应用程序的通用方法，以便在它运行时与它进行通信。大多数情况下，我希望能够监控它的健康状况。

简而言之，我希望能够做这样的事情：

```
python application.py start  # launches the daemon 
```

后来，我希望能够来做类似的事情：

```
python application.py check_queue_size  # return info from the daemonized process 
```

需要明确的是，我在实现受 Django 启发的语法时没有任何问题。我不知道如何做是将信号发送到守护进程（启动），或者如何编写守护进程来处理和响应这些信号。

就像我上面说的，我正在寻找一般的方法。我现在唯一能看到的是告诉守护进程不断地将可能需要的所有内容记录到文件中，但我希望有一种不那么混乱的方式来处理它。

**更新：**哇，很多很棒的答案。非常感谢。我想我会同时研究 Pyro 和 web.py/Werkzeug 方法，因为此时 Twisted 比我想咬的要多一点。我想，下一个概念上的挑战是如何在不挂断工作线程的情况下与我的工作线程交谈。

再次感谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-03-18T12:57:31.757

另一种方法：使用[Pyro](https://pypi.python.org/pypi/Pyro4)（Python 远程处理对象）。

Pyro 基本上允许您将 Python 对象实例发布为可以远程调用的服务。我已经将 Pyro 用于您描述的确切目的，并且我发现它工作得很好。

默认情况下，Pyro 服务器守护进程接受来自任何地方的连接。为了限制这一点，要么使用连接验证器（参见文档），要么提供`host='127.0.0.1'`给`Daemon`构造函数以仅侦听本地连接。

取自 Pyro 文档的示例代码：

**服务器**

```
导入 Pyro.core

JokeGen 类（Pyro.core.ObjBase）：
        def __init__(self):
                Pyro.core.ObjBase.__init__(self)
        def 笑话（自我，姓名）：
                return "对不起"+name+"，我不知道任何笑话。"

Pyro.core.initServer()
守护进程=Pyro.core.Daemon()
uri=daemon.connect(JokeGen(),"jokegen")

print "守护进程运行在端口：",daemon.port
print "对象的uri是：",uri

daemon.requestLoop()

```

**客户**

```
导入 Pyro.core

# 您必须更改下面的 URI 以匹配您自己的主机/端口。
笑话 = Pyro.core.getProxyForURI("PYROLOC://localhost:7766/jokegen")

打印笑话.joke("Irmen")

```

另一个类似的项目是[RPyC](http://rpyc.wikidot.com/)。我还没有尝试过 RPyC。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-03-18T04:22:00.497

让它运行一个http服务器怎么样？

看起来很疯狂，但是运行一个简单的 web 服务器来管理你的服务器只需要使用 web.py 的几行代码

您还可以考虑创建一个 unix 管道。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2009-03-18T10:26:16.830

使用[werkzeug](http://werkzeug.pocoo.org/)并让你的守护进程包含一个基于 HTTP 的 WSGI 服务器。

您的守护程序有一组小型 WSGI 应用程序来响应状态信息。

您的客户端只需使用 urllib2 向 localhost:somePort 发出 POST 或 GET 请求。您的客户端和服务器必须就端口号（和 URL）达成一致。

这实现起来非常简单，并且非常可扩展。添加新命令是一项简单的练习。

请注意，您的守护程序不必以 HTML 响应（不过这通常很简单）。我们的守护进程使用 JSON 编码的状态对象响应 WSGI 请求。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-03-18T05:04:08.913

我会使用带命名管道的扭曲或只是打开一个套接字。查看回显服务器和客户端[示例](http://twistedmatrix.com/projects/core/documentation/examples/)。您需要修改回显服务器以检查客户端传递的某些字符串，然后使用任何请求的信息进行响应。

由于 Python 的线程问题，您将无法响应信息请求，同时继续执行守护程序无论如何要执行的任何操作。异步技术或分叉另一个进程是您唯一真正的选择。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-03-18T05:38:27.460

```
# your server

from twisted.web import xmlrpc, server
from twisted.internet import reactor

class MyServer(xmlrpc.XMLRPC):

    def xmlrpc_monitor(self, params):        
        return server_related_info

if __name__ == '__main__':
    r = MyServer()
    reactor.listenTCP(8080, Server.Site(r))
    reactor.run() 
```

客户端可以使用 xmlrpclib 编写，[在此处](http://docs.python.org/library/xmlrpclib.html)查看示例代码。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-03-18T04:47:33.040

假设您在 *nix 下，您可以使用`kill`shell（以及许多其他环境中的类似物）向正在运行的程序发送信号。要从 python 中处理它们，请查看[信号](http://docs.python.org/library/signal.html)模块。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-03-18T13:58:35.977

您可以将它与Python 远程对象的Pyro ( [http://pythonhosted.org/Pyro4/ ) 相关联。](http://pythonhosted.org/Pyro4/)它允许您远程访问 python 对象。它易于实现，开销低，并且不像 Twisted 那样具有侵入性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-01T15:10:45.653

您可以使用`multiprocessing`管理器 ( [https://docs.python.org/3/library/multiprocessing.html#managers](https://docs.python.org/3/library/multiprocessing.html#managers) ) 执行此操作：

> 管理器提供了一种方法来创建可以在不同进程之间共享的数据，包括通过网络在不同机器上运行的进程之间共享。管理器对象控制管理共享对象的服务器进程。其他进程可以使用代理访问共享对象。

示例服务器：

```
from multiprocessing.managers import BaseManager

class RemoteOperations:
    def add(self, a, b):
        print('adding in server process!')
        return a + b

    def multiply(self, a, b):
        print('multiplying in server process!')
        return a * b

class RemoteManager(BaseManager):
    pass

RemoteManager.register('RemoteOperations', RemoteOperations)

manager = RemoteManager(address=('', 12345), authkey=b'secret')
manager.get_server().serve_forever() 
```

示例客户端：

```
from multiprocessing.managers import BaseManager

class RemoteManager(BaseManager):
    pass

RemoteManager.register('RemoteOperations')
manager = RemoteManager(address=('localhost', 12345), authkey=b'secret')
manager.connect()

remoteops = manager.RemoteOperations()
print(remoteops.add(2, 3))
print(remoteops.multiply(2, 3)) 
```

# dll - ActiveX 组件无法创建对象

> ID：656934
> 
> 赞同：36
> 
> 时间：2009-03-18T04:09:43.053
> 
> 标签：dll, vbscript, activex, windows-server-2008, dllregistration

我刚刚在我的 Windows Server 2008 服务器上安装了第三方应用程序，我得到了

> ActiveX 组件无法创建对象

当我尝试`CreateObject`在 VBScript 中使用 a 访问时出现消息。

它肯定已安装并存在于“程序和功能”下。有没有人列出我可以检查以了解发生了什么的事情？

我现在尝试`regsvr32.exe /i bob.dll`按照建议使用注册 DLL，但出现此错误：

> 模块“Bob.dll”已加载，但未找到入口点 DllRegisterServer。
> 
> 确保“Bob.dll”是有效的 DLL 或 OCX 文件，然后重试。

我应该注意，此时这是 64 位机器上的 32 位应用程序。它在我的 Windows XP 32 位机器上也能正常工作。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2009-03-18T21:00:50.173

事实证明，要让这个应用程序在 VBScript 下运行，我必须做两件事。

1.  运行 RegAsm.exe 以注册 DLL。
2.  运行 C:\Windows\SysWOW64\cscript.exe 来运行我的 VBScript。

如果这些不起作用，请在[此处查看](https://stackoverflow.com/a/7344962/290343)有关在 IIS 中启用 32 位应用程序的其他答案。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2011-09-08T08:06:34.037

在 IIS 的 DefaultAppPool 的高级设置中，您是否已将“启用 32 位应用程序”设置为 True，这也是值得检查的。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-03-18T04:29:58.763

该应用程序正在尝试创建一个 COM 对象，即使该 COM DLL 存在，它也可能依赖于另一个未安装的 DLL。您可以使用[DependencyWalker](http://www.dependencywalker.com/)来确定是否是这种情况。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2010-08-25T06:27:27.933

检查您的浏览器设置。

对我来说，使用 IE，修复方法是进入工具/Internet 选项、安全选项卡、相关区域、“自定义级别”并检查 ActiveX 设置。将“初始化并编写未标记为可安全执行脚本的 ActiveX 控件”设置为“启用”为我解决了这个问题。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2011-06-01T14:10:56.523

此外，当您注册组件时，请确保使用 32 位版本的 regsvr32.exe。如果您只是在提升的提示符下运行 regsvr32.exe，它将默认采用标准 64 位版本（奇怪的是位于 C:\Windows\System32 中）

我认为您需要的版本位于 C:\Windows\SysWow64\regsvr32.exe

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-18T15:42:56.943

看起来好像您引用的对象没有在系统上注册。我知道您说它已安装，但这并不一定意味着它已注册。要确认这一点，请搜索您在注册表中使用的 progID。

此代码的示例：

```
set objFSO = CreateObject("Scripting.FileSystemObject") 
```

`Scripting.FileSystemObject`我会在注册表中搜索。然后我会在找到的值上方查看注册表项，以获得`InProcServer32`价值。这将为您提供注册它的 ActiveX 文件的路径（因为`Scripting.FileSystemObject`该文件是“c:\windows\system32\scrrun.dll”）。

如果您在注册表中找不到您的 progID，那么它没有在您的系统上注册，这是您的问题。如果未注册，您需要找出注册它的文件，通常是第三方应用程序相同文件夹路径中的 .ocx 或 .dll，然后注册这些文件。这是注册文件的命令：

```
regsvr32 /i "c:\windows\system32\scrrun.dll" 
```

即使您在注册表中找到 progID 值并且它引用了系统上存在的文件，您可能仍想尝试重新注册该文件。我发现有时注册在某处被破坏了，重新注册文件比解决问题更容易。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-02-26T19:10:15.207

如果它是 32 位 COM/Active X，请使用位于 C:\Windows\SysWOW64\ 的 cscript.exe/wscript.exe 的 32 位版本

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-08-27T10:01:17.580

I know this is an old thread, but has anyone checked if their Antivirus is blocking Win32API and Scripting on their systems? I have CylanceProtect installed on my office system and i found the same issues occurring as listed by others. This can be confirmed if you check the Windows Logs in Event Viewer.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-09T08:02:12.440

我在 vbscript 中也遇到了同样的错误。

```
Set objFSO = CreateObject("Scripting.FileSystemObject") 
```

解决方法：
打开命令行，运行：

```
regsvr32 /i "c:\windows\system32\scrrun.dll" 
```

它有效

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-02-06T08:43:36.640

我在编写的 VB6 程序中遇到了同样的问题，其中 Form 使用 ScriptControl 对象来运行用户选择的 VBScript。

它工作正常，直到前几天，当 VBScript 尝试创建 Scripting.FileSystemObject 时，它突然开始显示“运行时错误 429”。

在疯狂了一整天，尝试了这里提出的所有解决方案之后，我开始怀疑问题出在我的应用程序中。

幸运的是，我有该表单的备份版本：我比较了他们的代码，发现我无意中将 ScriptControl 对象的 UseSafeSubset 属性设置为 True。

这是形式上的唯一区别，在恢复备份副本后，它就像一个魅力。

希望这对某人有用。使用VB6！:-)

马克斯 - 意大利

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-04-06T12:54:21.827

我在使用 Excel 时遇到了同样的问题，我试图将 32 COM DLL 与 Excel 64 位版本一起使用，但我得到了这个错误。我将 COM dll 重建为 64 位版本，错误消失了。因此，请确保您的 COM dll 与您的应用程序具有相同的架构（x86 与 x64）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-09-25T14:20:59.270

I had this problem too. I was trying to run an old 32-bit dll in a 64 bit system. I got it working by copying the .dll to the C:\Windows\SysWoW64\ directory and running this:

```
%systemroot%\SysWoW64\regsvr32 "C:\Windows\SysWoW64\thenameofyourdll.dll" 
```

And also [enabling IIS to run 32 bit apps](https://stackoverflow.com/a/7344962/290343)

# linux - 捕获在 Linux 安装期间更改的所有数据

> ID：656940
> 
> 赞同：3
> 
> 时间：2009-03-18T04:12:05.357
> 
> 标签：linux, installation

我试图找出当我通过 make install 运行应用程序安装时更改了哪些文件。我可以查看脚本，但它会调用其他脚本并且可能会或可能不会触及其他文件等。我该如何以编程方式执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T04:21:56.643

实现：[http ://asic-linux.com.mx/~izto/checkinstall/](http://asic-linux.com.mx/~izto/checkinstall/)

我想到了几种方法。首先，使用某种 LD_PRELOAD 来跟踪所有打开的文件。第二种方法，比较之前和之后的文件系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T07:51:40.930

如果你的内核支持它，你可以使用 inotify（一个方便的接口是[inotify tools](http://inotify-tools.sourceforge.net/)）并观察你的主目录，如果包配置了 --prefix=/home/myusername

我注意到 checkinstall（通过 LD_PRELOAD 使用 installwatch）并不总是捕获所有内容，上次我使用它时它没有捕获为假脱机创建的空目录，这导致随后生成的 .deb 中断。

请注意，如果要安装到 /，请不要使用 inotify，在这种情况下，您必须使用 installwatch 或只是仔细阅读所有 makefile / install 脚本。

# javascript - 在javascript中将小数转换为六十进制（以六十为底）

> ID：656941
> 
> 赞同：8
> 
> 时间：2009-03-18T04:12:25.263
> 
> 标签：javascript

使用 0-9、AZ 和 ax 作为数字将十进制数（以 10 为基数）转换为以字符串表示的六十进制数（以 60 为基数）的最佳方法是什么。

我打算用 javascript 对其进行编码，但感谢任何帮助。

使用示例：

```
>>decToSex(60);
"10"
>>decToSex(123);
"23"
>>decToSex(1000000);
"4bke"
>>decToSex(1234567.89);
"5gu7.rO" 
```

我使用的最终代码，基于 Paolo 的回答：

```
var decToSex = function(){
    var decToSexMap = ['0','1','2','3','4','5','6','7','8','9',
            'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z',
            'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x'];

    return function(number){

        var negative = '';
        if (number < 0){
            var negative = '-';
        }

        number = number.toString().split('.');
        var integer = Math.abs(number[0]);
        var fraction = number[1];
        var result = '';

        do {
            result = decToSexMap[integer % 60] + result;
            integer = parseInt(integer / 60);
        } while (integer > 0);

        if (fraction){
            var decimalPlaces = fraction.toString().length;
            result += '.';
            fraction = parseFloat('.' + fraction);

            var x = 0;
            do {
                x++;
                var res = (fraction * 60).toString().split('.');
                result = result + decToSexMap[res[0]];

                if (res[1]) {
                    fraction = parseFloat('.' + res[1]);
                }
                else {
                    break;
                }
            } while (x < decimalPlaces);
        }
        return negative + result;
    }
}(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T04:49:15.673

这适用于提供的测试数据，但您可能想对其进行更多测试：

```
<script>
var convert = new Array(0,1,2,3,4,5,6,7,8,9,'A','B','C','D','E','F','G','H','I','J','K',
                       'L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a',
                       'b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q',
                       'r','s','t','u','v','w','x');

function decToSex(num) {
    var extract = num.toString().split('.');
    num = extract[0];
    var pieces = new Array();
    do {
        pieces.push(convert[num % 60]);
        num = parseInt(num/60);
    } while (num > 0);
    pieces = pieces.reverse();
    var rem = extract[1];
    if(rem) {
        rem = parseFloat('.' + rem);
        var x = 0;
        var dec = new Array();
        do {
            x++;
            var res = (rem * 60).toString().split('.');
            dec.push(convert[res[0]]);
            if(res[1]) {
                rem = parseFloat('.' + res[1]);
            } else {
                break;
            }
        } while (x < 3); // work up to 3 decimal places, change for more.
    }
    var myResult = pieces.join('');
    if(dec) {
        myResult += '.' + dec.join('');
    }
    return myResult;
}

alert(decToSex(60));
alert(decToSex(123));
alert(decToSex(1000000));
alert(decToSex(1234567.89));
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-12-31T21:32:39.133

对于它的价值，这里有一个解决方案的修改，可以转换为任何高达 64 的基数：

```
// Convert decimal into a base between 2 and 64
var decToBase = function() {
    var decToBaseMap = [
        '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
        'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',
        'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'Y', 'Z',
        '+', '/'];

    return function(number, base) {

        if (base < 2 || base > 64) {
            return "#base should be between 2 and 64#";
        }

        var negative = '';
        if (number < 0) {
            negative = '-';
        }

        number = number.toString().split('.');
        var integer = Math.abs(number[0]);
        var fraction = number[1];
        var result = '';

        do {
            result = decToBaseMap[integer % base] + result;
            integer = parseInt(integer / base, 10);
        } while (integer > 0);

        if (fraction) {
            var decimalPlaces = fraction.toString().length;
            result += '.';
            fraction = parseFloat('.' + fraction);

            var x = 0;
            do {
                x++;
                var res = (fraction * base).toString().split('.');
                result = result + decToBaseMap[res[0]];

                if (res[1]) {
                    fraction = parseFloat('.' + res[1]);
                }
                else {
                    break;
                }
            } while (x < decimalPlaces);
        }
        return negative + result;
    };
}();

alert(decToBase(2011, 64)); // displays "VR" 
```

你可以在这里玩它：http: [//jsfiddle.net/kaicarver/d3Zn2/](http://jsfiddle.net/kaicarver/d3Zn2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T04:18:26.497

只需将其反复除以 60，直到剩下零。每次，获取模数，并将其转换为适当的字符，并将其添加到您的输出字符串中。

编辑：对于小数，假设您要搜索多达 3 个 60 位小数：

从 0.98765（以 10 为底）开始

```
0.98765 * 60 -> 59.259 -> first post-decimal character is 59 converted to its 60decimal character, then carry the .259
.259 * 60 -> 15.54 -> second char is 15 converted to its 60decimal character, then carry the .54
.54 * 60 -> 32.4 -> round it this time (its the last char) -> last char is 32 as its 60dec char 
```

所以 0.98765（以 10 为底）变为 0.[59] [15] [32]（基数 60）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T04:50:36.560

首先将数字拆分为整数和小数部分。

对于整数部分，取最低有效数字的模数，然后除以 60 并重复。

对于小数部分，重复乘以 60 并取整数部分得到结果位数。如果你最终得到零，这不太可能，你就完了。在提取一定数量的数字后，您更有可能想要终止。

# c++ - 在 Windows (C/C++) 中杀死“关键进程”

> ID：656946
> 
> 赞同：-1
> 
> 时间：2009-03-18T04:15:50.683
> 
> 标签：c++, c, windows, kill

杀死关键进程的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-18T04:19:20.393

出于某种原因，它很重要，因此您可能根本不应该杀死它。最好的方法是关闭盒子，以免您将其置于危险状态。

如果您选择忽略我的警告，[这里](http://www.codeproject.com/KB/threads/killprocess.aspx)有一些示例 C++ 代码可以做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-18T05:16:06.577

[这篇知识库文章](http://support.microsoft.com/kb/131065)描述了如何做到这一点。您首先调用`SeDebugPrivilege()`以获取终止进程的权限，然后[`OpenProcess()`](http://msdn.microsoft.com/en-us/library/ms684320(VS.85).aspx)使用`PROCESS_TERMINATE`标志调用以获取要终止的进程的句柄，最后调用[`TerminateProcess()`](http://msdn.microsoft.com/en-us/library/ms686714(VS.85).aspx)以终止进程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-18T06:19:28.703

是的，按照亚当的建议去做。然后看着你的机器蓝屏，因为你刚刚终止了一个关键进程:)（顺便说一句，要清楚：亚当的建议是 100% 准确的，我根本不想批评它）。

你为什么要这样做？它们被称为关键流程是有原因的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-18T04:21:02.607

在 signal.h 中调用 kill 函数是在 C 中杀死进程的一种方法。不知道 C++ 中的交替。

[在 C 中杀死一个进程](http://www.gnu.org/software/libtool/manual/libc/Signaling-Another-Process.html)

编辑：看看这段代码。

[WIN 32 API 示例](http://www.codeproject.com/KB/system/Kill_Application.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-19T16:29:50.460

我想，问题是如何在没有 BSoD 的情况下杀死关键进程。为此，您需要首先删除临界位，并且仅在调用终止函数之后。

# c++ - 声明朋友时必须声明类键

> ID：656948
> 
> 赞同：23
> 
> 时间：2009-03-18T04:18:04.173
> 
> 标签：c++, friend

当我这样声明一个朋友时，g ++编译器会抱怨这个错误：

```
friend MyClass; 
```

代替

```
friend class MyClass; 
```

为什么需要**class**关键字？（Borland C++ 编译器 BTW 不需要它。）

编译器不能简单地在符号表中查找 MyClass 并告诉它被声明为一个类吗？（显然它无论如何都在进行查找，因为它在未声明 MyClass 时会抱怨）

这不像是对类进行前向声明：我仍然必须在上面声明类或至少前向声明它。

如果这对我来说很有意义（实际上会很棒）

```
friend class MyClass; 
```

如果需要，可以进行前向声明，否则对我来说就像是语法盐。

近 20 年来，我一直在愉快地使用没有**class**或**struct关键字且没有编译器投诉的****朋友**语句。这是相当新的东西吗？

 ***** * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-03-18T05:58:49.470

我对此感到惊讶（因此删除了以前的错误答案）。C++03 标准在 11.4 中说：

> 在类的友元声明中应使用详细类型说明符。

然后为了确保没有误解，它的脚注是：

> 详细类型说明符的类键是必需的。

GCC 是我拥有的唯一一个抱怨缺少类键的编译器，但看起来其他编译器正在让我们摆脱非标准的东西......

现在至于基本原理 - 您必须询问比我更了解编译器（或标准）的人。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-03-18T04:20:47.287

就您的问题而言，**因为这是 ISO/IEC 14882:2003 指定它的方式** （第 7.1.4 节）。该`friend`构造基本上指定为：

```
friend <declaration> 
```

其中`<declaration>`是类、结构、模板或函数的有效声明。

因此，

```
MyClass; 
```

不是有效的声明，而：

```
class MyClass; 
```

或者：

```
struct MyClass; 
```

是。

同上，相应地：

```
friend class MyClass; 
```

或者

```
friend struct MyClass; 
```

# mysql - 在 MySQL 中搜索“全词匹配”

> ID：656951
> 
> 赞同：81
> 
> 时间：2009-03-18T04:20:15.557
> 
> 标签：mysql, sql, full-text-search

我想编写一个在文本字段中搜索关键字的 SQL 查询，但前提是它是“全词匹配”（例如，当我搜索“rid”时，它不应该匹配“arid”，但它应该匹配“摆脱”。

我正在使用 MySQL。

幸运的是，在这个应用程序中性能并不重要，而且数据库大小和字符串大小都很小，但我更喜欢在 SQL 中完成，而不是在 PHP 中驱动它。

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2009-03-18T10:11:34.633

您可以使用[`REGEXP`](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)和`[[:<:]]`和`[[:>:]]`字边界标记：

```
SELECT *
FROM table 
WHERE keywords REGEXP '[[:<:]]rid[[:>:]]' 
```

**2020 年更新：（实际上是 2018 年以上）**

MySQL 在 8.0.4 版本中更新了它的 RegExp-Engine，所以你[现在需要使用](https://dev.mysql.com/doc/refman/8.0/en/regexp.html#regexp-compatibility)“[标准](https://www.regular-expressions.info/wordboundaries.html)”字边界标记 \b：

```
SELECT *
FROM table 
WHERE keywords REGEXP '\\brid\\b' 
```

另请注意，您需要通过添加第二个反斜杠来转义反斜杠。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-10-09T19:49:33.613

找到了防止经典单词边界`[[::<::]]`与特殊字符冲突的答案，例如 .@#$%^&*

代替..

```
SELECT *
FROM table 
WHERE keywords REGEXP '[[:<:]]rid[[:>:]]' 
```

有了这个..

```
SELECT *
FROM table 
WHERE keywords REGEXP '([[:blank:][:punct:]]|^)rid([[:blank:][:punct:]]|$)' 
```

后者匹配（空格、制表符等）|| （逗号、括号等）|| 行的开始/结束。一个更“完成”的单词边界匹配。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-18T04:25:51.160

您可以使用`like`通配符标记来捕捉可能性（在开始、结束、中间和单独），这样的事情就足够了：

select blah blah blah where column like 'rid %' or column like '% rid' or column like '% rid %' or column = 'rid'

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-04T07:27:22.777

使用带有单词边界的正则表达式，但如果您还想不区分重音搜索，请注意 REGEXP 是单字节运算符，因此使用 utf8_general_ci 排序规则毫无意义，匹配将不会区分重音。

要使重音不敏感和整个单词匹配，请以与（已弃用）PHP 函数 sql_regcase() 相同的方式指定单词。

实际上：

*   utf8_general_ci 允许您进行相等（WHERE 字段 = 值）大小写和重音不敏感搜索，但它不允许您指定整个单词匹配（单词边界标记无法识别）

*   LIKE 允许您进行不区分大小写和重音的搜索，但您必须手动指定可能的单词边界字符的所有组合（无法识别单词边界标记）

*   REGEXP 支持单词边界 [[:<:]] 和 [[:>:]]，它们是单字节函数，因此不要执行不区分重音的搜索。

解决方案是使用带有单词边界的 REGEXP，并以 sql_regcase 的方式修改单词。

用于[http://www.nonsolodiete.it](http://www.nonsolodiete.it)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-18T04:26:29.393

```
select * from table where Locate('rid ', FieldToSearch) > 0 
      or Locate(' rid', FieldToSearch) > 0 
```

这将处理在空格之前或之后查找摆脱，您可以扩展方法以考虑 .,?! 等等，不优雅但容易。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-18T04:35:01.917

这是迄今为止我自己想出的最佳答案：

```
SELECT * FROM table 
WHERE keywords REGEXP '^rid[ $]' OR keywords REGEXP ' rid[ $]' 
```

我会将其简化为：

```
SELECT *
FROM table
WHERE keywords REGEXP '[^ ]rid[ $]' 
```

但是 [^ ] 具有“不是空格”的特殊含义，而不是“行开头或空格”。

REGEXP 与多个 LIKE 条件相比如何？（在这个应用程序中，性能并不重要。）

# winapi - Win32线程调度

> ID：656959
> 
> 赞同：13
> 
> 时间：2009-03-18T04:25:11.253
> 
> 标签：winapi

据我了解，Windows 线程调度程序不会区分属于两个不同进程的线程，前提是它们都具有相同的基本优先级。我的问题是，如果我有两个应用程序，一个只有一个线程，另一个有 50 个线程，所有线程都具有相同的基本优先级，这是否意味着第二个进程比第一个进程享有更多的 CPU 时间？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-18T16:07:42.843

Windows 中的调度是**线程粒度**的。这种方法背后的基本思想是进程不运行，而只提供资源和线程运行的上下文。回到您的问题，因为调度决策是严格基于线程做出的，所以没有考虑线程属于哪个进程。在您的示例中，如果进程 A 有 1 个可运行线程，进程 B 有 50 个可运行线程，并且所有 51 个线程都具有相同的优先级，则每个线程将获得 1/51 的 CPU 时间-<strong>Windows 不会给出 50 CPU 的百分比用于处理 A，50% 用于处理 B。要了解线程调度算法，您必须首先了解 Windows 使用的优先级。您可以[参考](http://msdn.microsoft.com/en-us/library/ms685100(VS.85).aspx)此处以进行快速参考。

尝试阅读[Windows Internals](http://technet.microsoft.com/en-us/sysinternals/bb963901.aspx)以深入了解。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-22T15:27:55.863

以上所有内容都是准确的，但如果您担心 50 个线程进程会占用所有 CPU，那么您可以采取一些技术来确保没有单个进程会压倒 CPU。

恕我直言，最好的方法是使用[作业对象](http://msdn.microsoft.com/en-us/library/ms684161.aspx)来管理进程的使用。首先调用[CreateJobObject](http://msdn.microsoft.com/en-us/library/ms682409(VS.85).aspx)，然后调用[SetInformationJobObject](http://msdn.microsoft.com/en-us/library/ms686216(VS.85).aspx)以限制作业对象中进程的最大 CPU 使用率，并使用[AssignProcessToJobObject](http://msdn.microsoft.com/en-us/library/ms681949(VS.85).aspx)将具有 50 个线程的进程分配给作业对象。然后，您可以让操作系统确保 50 线程进程不会消耗太多 CPU 时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-18T05:20:38.733

调度的单位是一个线程，而不是一个进程，因此如果所有线程都以相同的优先级运行，那么一个有 50 个线程的进程，全部处于一个紧密的循环中，将比只有一个线程的进程获得更多的 cpu。这通常不是问题，因为系统中的大多数线程都不处于可运行状态并且不会被调度；他们正在等待 I/O，等待来自用户的输入，等等。

Windows Internals 是一本很好的书，可用于了解有关 Windows 线程调度程序的更多信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-18T04:33:11.547

这取决于线程的行为。一般来说，线程数有 50 : 1 的差异，是的，具有更多线程的应用程序将获得更多时间。但是，Windows 也使用动态线程优先级，这可以稍微改变这一点。此处描述了动态线程优先级：

[https://web.archive.org/web/20130312225716/http://support.microsoft.com/kb/109228](https://web.archive.org/web/20130312225716/http://support.microsoft.com/kb/109228)

相关摘录：

> 线程的基本优先级是进行这些向上调整的基本级别。线程的当前优先级称为其动态优先级。在其时间片结束之前产生的交互式线程将倾向于从其基本优先级向上调整优先级。不屈服的计算绑定线程消耗了它们的整个时间片，它们的优先级往往会降低，但不会低于基本级别。这种安排通常称为启发式调度。它提供了更好的交互性能，并倾向于减少“CPU hog”线程对系统的影响。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-28T14:46:08.230

有一个本地“高级”设置据称可用于稍微遮蔽调度以支持具有焦点的应用程序。使用“服务”设置，没有偏好。在以前版本的 Windows 中，此设置过去比“具有焦点的应用程序”（稍微偏爱具有焦点的应用程序）和“服务”（所有同等权重）更加精细

由于这可以由用户在目标机器上设置，因此似乎要求悲伤取决于此设置......

# mysql - 在 MySQL 中使用 DELAY_KEY_WRITE：我应该使用它吗？还有什么我需要改变的吗？

> ID：656972
> 
> 赞同：3
> 
> 时间：2009-03-18T04:32:01.567
> 
> 标签：mysql

我有一个记录表，其中存储用户 ID、日期/时间、表名、记录 ID、查询类型（插入、更新、删除等）以及运行的完整 SQL。这张桌子上有几个键，但它们不需要立即更新。通常，该表用于检查问题（有人犯了错误或存在系统错误）或供人们查看人们所做的更改。但通常这些不会在保存后立即完成，或者它们每周或每天只完成一次。

打开这样`DELAY_KEY_WRITE`的桌子有用吗？

我还需要在 MySQL 上或在我的代码中启用或添加到我的代码中吗？我在[这里读到](http://www.petefreitag.com/item/441.cfm)您需要使用启动参数`--myisam-recover`。是这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T05:23:29.803

可能，但为什么呢？如果这里的条目是由人们输入的（如它所显示的那样），那么除非您使用上网本或手机作为数据库服务器，否则您不会使 1985 年左右制造的机器过载。

如果你对性能足够严格，你正在考虑做这样的事情，我建议你先做一些分析，看看问题到底是什么。如果您*不*担心性能，那么研究的动机是什么`DELAY_KEY_WRITE`？

针对您的评论，还有一些想法：

*   每分钟 1000 条记录相当于每天数百万条记录。人们将如何“审查”它们？
*   这是每月千兆字节的数量级。你的保留政策是什么？
*   日志是否真的需要被索引，甚至存储在一个表中？系统日志记录设施可能更合适吗？
*   将信息记录在不同的地方（调试日志、审查队列、汇总表等）会有帮助吗？
*   您的系统实际上不太可能以这种速度生成有意义的日志信息。您的负载估计有多现实，其中有多少是多余/无用的？

# iphone - 如何确保我的 iphone 应用程序是与我的服务器通信的应用程序？

> ID：656973
> 
> 赞同：3
> 
> 时间：2009-03-18T04:33:08.223
> 
> 标签：iphone, email

在 iPhone 3.0 可用之前，我需要发送一封电子邮件，其中包含我的 iPhone 应用程序生成的内容（图像）以及用户选择的位置。

两个解决方案，skpsmtpmessage 库，它并不全部存在并且仍然存在错误；或编写我自己的服务器来转发电子邮件。后者对我来说没问题，但问题是我如何确定消息来自我的 iPhone 应用程序，而不是其他什么？

我可以想象使用 SSL，但我仍然想知道有人在越狱的 iPhone 上拆开我的应用程序，然后使用伪造的连接通过它运行垃圾邮件。

我的第一个想法是让服务器只接受具有一组精确特征的数据（例如精确的 1 张 jpg 图像、某些精确的 JSON 数据）并拒绝其他所有数据。当然，它仍然可以被DOSsed。

这有意义吗？有没有人做过类似的事情？

编辑：我不会向我的服务器发送电子邮件，只是 JSON，服务器将生成实际的电子邮件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-28T14:24:07.257

我正在我正在开发的应用程序上做类似的事情。您可以结合使用公钥加密、SSL 和本地电话钥匙串。

*   首先，iPhone 和服务器之间的所有通信都必须加密。如果您使用 HTTP POST 请求和 SSL，这非常简单。它还可以阻止数据包嗅探器。

*   当您的应用程序启动时，它会在本地钥匙串中查找服务器的公共 RSA 密钥和存储的哈希值。如果未找到，它会使用服务器使用的电话的 UDID（连同系统时间）联系您的服务器以生成哈希。它将散列的副本及其公钥发送回手机。然后，服务器在本地数据库（例如 MYSQL）中创建一条记录，其中包含 UDID 和它发回的哈希，以便以后可以使用它进行验证。

*   iPhone 上的应用程序将哈希和服务器的公钥保存在其本地安全钥匙串中。这都是幕后的握手，即不涉及用户交互。这仅在应用程序第一次运行时完成。

*   从那时起，每次您要发送电子邮件时，您的应用都会格式化您的消息（图像+JSON 部分），添加自己的 UDID 和从服务器获取的哈希值，然后使用它在钥匙串和 RSA 加密了整个混乱。它将这个添加到服务器的 HTTP POST 正文中并发送（通过 SSL）。

*   服务器获取消息，使用其私有 RSA 密钥解密消息，对其进行解析，在其数据库中查找手机 UDID，并将接收到的哈希值与它从第一次运行中保存的哈希值进行比较，以确保它是一部手机它已经握手了。如果经过验证，它将获取用户数据并将其格式化为 SMTP 邮件消息并在其途中发送。然后它用状态回复电话。

*   这在电话和服务器之间建立了双向握手。没有创建用户级帐户，这一切都在幕后进行。您在服务器上保存的唯一信息是匿名电话的 UDID，因此不应该存在任何隐私问题。通信是安全的（SSL），服务器只接受来自经过握手的电话的请求，存储计算的哈希值，最重要的是，整个数据包通过公钥加密进行加密。

*   如果你想让事情变得有趣，你可以每隔一段时间发回一个新的计算哈希值和你的状态结果，并让手机替换钥匙串中的那个。这样，即使在这一切之后有人破解了你的计划，他们也必须随着时间的推移跟上变化。

*   如果用户删除您的应用程序并重新安装或移动到新手机，您只需再次握手即可。成本是服务器上的额外数据库记录。如果这是一个问题，您还可以将“最后一次交易”日期与服务器上的记录一起保存，然后每 N 个月使空闲记录过期，并强制电话进行新的握手（而不是将其视为错误消息）。再想一想，你可能还是想这样做。代价是手机每隔一段时间就会再次进行握手序列时的短暂延迟。

*   更有趣的是，执行第一次握手的服务器可以是与稍后实际执行工作的服务器不同的服务器。握手服务器还发回后续请求应该去哪里的 URL 端点，iphone 也将其存储在钥匙串中。因此，即使您的应用程序被反编译，他们将获得的只是握手端点的 URL。由于大部分数据在运行时存储在钥匙串中，因此对越狱手机中的代码进行静态分析不会产生任何价值。

*   此外，为了提高性能，您可能需要考虑在验证请求后立即在服务器上对请求进行排队，并让用户回到他们正在做的事情，然后使用 cron 作业定期抽出 SMTP 消息。优点是用户反应更好。缺点是如果电子邮件地址不好，除非您喜欢推送通知，否则您无法回复它们。我会将其设为用户偏好，让他们决定是否要等待确认。

*   iPhone 上已经存在这方面的所有技术位（即不需要第三方库），并且应该很容易在带有 Rails 或 Django 的服务器上实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T04:59:03.870

使其尽可能准确肯定会减少垃圾邮件。如果您让它对网络服务器执行诸如 http POST 之类的操作，然后让网络服务器生成消息，您将更难发送垃圾邮件。（更有可能需要对垃圾邮件发送者进行自定义设置）

某种注册系统是您最好的选择，如果您需要先注册，发送垃圾邮件要困难得多，而且您可以更轻松地禁用导致问题的帐户。

你将无法从应用程序端阻止 DDOS，所以我不会太担心它，只要确保让应用程序发送大量数据或执行复杂处理不会太容易。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-03-18T05:09:38.497

添加包含某种密钥的额外电子邮件标题。仅接受标头设置了正确密钥的电子邮件。这将防止随机人劫持电子邮件服务器，但可能不会阻止将您的应用程序拆开并发现密钥的人。

为了使其比简单地找到您的密钥更困难，您可以在每个会话的基础上设置密钥。每次应用加载时，它都会从电子邮件服务器请求一个密钥，然后在该会话期间发送的所有电子邮件标头中使用该密钥。这样，您可以实施行为跟踪并禁止恶意用户和机器人（例如，您可以禁止任何发送电子邮件速度超过人类可能的用户）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-03-18T12:18:51.240

如果可能，请尽可能让界面对垃圾邮件发送者无用。例如，如果您正在生成一系列对象的电子邮件转储，请将对象转换为 XML 并将其发送进去，而不是发送最终电子邮件的文本。垃圾邮件发送者正在寻找最薄弱的环节，如果他们不得不付出很多努力来使用您的服务，他们就会继续前进。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-06-28T10:39:41.123

skpsmtpmessage 有什么问题？

# c# - 电子邮件发送过程的限制速度

> ID：656977
> 
> 赞同：6
> 
> 时间：2009-03-18T04:34:46.393
> 
> 标签：c#, multithreading, smtpclient

对不起，标题有点蹩脚，我无法准确地表达它。

编辑：我应该注意这是一个控制台 c# 应用程序

我已经制作了一个像这样工作的系统的原型（这是粗略的伪代码）：

```
var collection = grabfromdb();

foreach (item in collection) {
    SendAnEmail();
} 
```

发送电子邮件：

```
SmtpClient mailClient = new SmtpClient;
mailClient.SendCompleted += new SendCompletedEventHandler(SendComplete);
mailClient.SendAsync('the mail message'); 
```

发送完成：

```
if (anyErrors) {
    errorHandling()
}
else {
    HitDBAndMarkAsSendOK();    
} 
```

显然这种设置并不理想。如果初始集合有 10,000 条记录，那么它将以相当短的顺序新建 10,000 个 smtpclient 实例，并尽可能快地遍历行 - 并且可能会在此过程中加速。

我理想的最终结果是同时发送 10 封并发电子邮件。

想到一个 hacky 解决方案：添加一个计数器，当 SendAnEmail() 被调用时递增，当 SendComplete 被发送时递减。在初始循环调用 SendAnEmail() 之前，检查计数器，如果它太高，则休眠一小段时间，然后再次检查。

我不确定这是一个好主意，并且认为 SO 蜂巢思维有办法正确地做到这一点。

我对线程知之甚少，不确定它是否适合在这里使用。例如，在后台线程中发送电子邮件，首先检查子线程的数量以确保没有使用太多。或者，如果内置某种类型的“线程节流”。

* * *

## 更新

按照 Steven A. Lowe 的建议，我现在有：

*   包含我的电子邮件和唯一键的字典（这是电子邮件查询
*   填充字典的 FillQue 方法
*   ProcessQue 方法，它是一个后台线程。它检查队列，并发送队列中的任何电子邮件。
*   从队列中删除电子邮件的 SendCompleted 委托。并再次调用 FillQue。

我对这个设置有一些问题。我想我错过了背景线程的船，我应该为字典中的每个项目生成其中一个吗？如果电子邮件队列清空线程结束，我怎样才能让线程“闲逛”，因为没有更好的词。

* * *

# 最终更新

我在后台线程中放置了一个“while(true) {}”。如果 que 是空的，它会等待几秒钟，然后再试一次。如果 que 反复为空，我会在此期间“中断”，然后程序结束......工作正常。不过，我有点担心“while(true)”的业务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T04:56:46.733

# 简答

将队列用作有限缓冲区，由其自己的线程处理。

# 长答案

调用一个填充队列方法来创建一个电子邮件队列，限制为（比如说）10 封。用前 10 封未发送的电子邮件填充它。启动一个线程来处理队列 - 对于队列中的每封电子邮件，将其异步发送。当队列为空时，睡眠一段时间并再次检查。让完成委托从队列中删除已发送或出错的电子邮件并更新数据库，然后调用 fill-queue 方法将更多未发送的电子邮件读入队列（备份到限制）。

您只需要锁定队列操作，并且只需要（直接）管理一个线程来处理队列。您一次不会有超过 N+1 个线程处于活动状态，其中 N 是队列限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T04:40:22.183

我相信您的 hacky 解决方案实际上会起作用。只需确保您在递增和递减计数器的位周围有一个锁定语句：

```
class EmailSender
{
  object SimultaneousEmailsLock;
  int SimultaneousEmails;
  public string[] Recipients;

  void SendAll()
  {
    foreach(string Recipient in Recipients)
    {
      while (SimultaneousEmails>10) Thread.Sleep(10);
      SendAnEmail(Recipient);
    }
  }

  void SendAnEmail(string Recipient)
  {
    lock(SimultaneousEmailsLock)
    {
      SimultaneousEmails++;
    }

    ... send it ...
  }

  void FinishedEmailCallback()
  {
    lock(SimultaneousEmailsLock)
    {
      SimultaneousEmails--;
    }

    ... etc ...
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T07:22:37.957

我会将我所有的消息添加到队列中，然后生成 10 个线程，这些线程发送电子邮件直到队列为空。伪 C#（可能不会编译）：

```
class EmailSender
{
    Queue<Message> messages;
    List<Thread> threads;

    public Send(IEnumerable<Message> messages, int threads)
    {
        this.messages = new Queue<Message>(messages);
        this.threads = new List<Thread>();
        while(threads-- > 0)
            threads.Add(new Thread(SendMessages));

        threads.ForEach(t => t.Start());

        while(threads.Any(t => t.IsAlive))
            Thread.Sleep(50);
    }

    private SendMessages()
    {
        while(true)
        {
            Message m;
            lock(messages)
            {
                try
                {
                    m = messages.Dequeue();
                }
                catch(InvalidOperationException)
                {
                    // No more messages
                    return;
                }
            }

            // Send message in some way. Not in an async way, 
            // since we are already kind of async.

            Thread.Sleep(); // Perhaps take a quick rest
        }
    }
} 
```

如果消息相同，并且只有多个收件人，只需将消息与收件人交换，并将单个消息参数添加到 Send 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T04:42:55.017

您可以使用 .NET 计时器来设置发送消息的时间表。每当计时器触发时，抓取接下来的 10 条消息并将它们全部发送，然后重复。或者，如果您想要一个一般的（每秒 10 条消息）速率，您可以让计时器每 100 毫秒触发一次，并且每次发送一条消息。

如果你需要更高级的调度，你可以看看[Quartz.NET这样的调度框架](http://quartznet.sourceforge.net)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T04:56:19.853

这不是[`Thread.Sleep()`](http://msdn.microsoft.com/en-us/library/d00bd51t.aspx)可以应付的吗？

您认为后台线程在这里可以起到很好的作用是正确的。基本上你想要做的是为这个进程创建一个后台线程，让它按照自己的方式运行，延迟等等，然后在进程完成时终止线程，或者无限期地保持它开启（把它变成一个 Windows 服务或类似的东西将是一个好主意）。

[可以在此处阅读有关多线程](http://www.yoda.arachsys.com/csharp/threads/)的一些介绍（包括 Thread.Sleep！） 。

[可以在此处阅读有关 Windows 服务](http://www.codeproject.com/KB/dotnet/simplewindowsservice.aspx)的精彩介绍。

# django - Django 和 Restful API

> ID：656979
> 
> 赞同：58
> 
> 时间：2009-03-18T04:35:14.240
> 
> 标签：django, api, rest

我一直在努力选择一种使用 Django 创建 RESTful API 的方法。我尝试过的所有方法似乎都不是“银”子弹。[来自http://fi.am](http://fi.am)的WAPI可能是最接近我想要完成的，但是我不确定在真正的 RESTful API 中是否可以接受将作为资源标识符的参数放在查询字符串中而不是在“干净”的 URL 格式。有关修改 WAPI RestBinding.PATTERN 以“清理” URL 的任何建议？我探索的另一个选择是 Django-Rest-Interface。然而，这个框架似乎违反了我需要的最重要的部分之一，那就是包含完整的资源 URL 以引用其他资源（参见[http://jacobian.org/writing/rest-worst-practices/](http://jacobian.org/writing/rest-worst-practices/)链接使用不当）。最后的选择是使用 django-multiresponse 并且基本上可以做到这一点。

请给我你最好的建议，尤其是那些处理过这个决定的人。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-03-14T07:06:39.963

对于 Django 来说，除了 sweetpie 和活塞，django-rest-framework 是一个值得一提的有前途的。我已经顺利迁移了我的一个项目。

> Django REST 框架是 Django 的轻量级 REST 框架，旨在使构建连接良好、自描述的 RESTful Web API 变得容易。

快速示例：

```
from django.conf.urls.defaults import patterns, url
from djangorestframework.resources import ModelResource
from djangorestframework.views import ListOrCreateModelView, InstanceModelView
from myapp.models import MyModel

class MyResource(ModelResource):
    model = MyModel

urlpatterns = patterns('',
    url(r'^$', ListOrCreateModelView.as_view(resource=MyResource)),
    url(r'^(?P<pk>[^/]+)/$', InstanceModelView.as_view(resource=MyResource)),
) 
```

以官方网站为例，以上所有代码都提供了 api、自我解释文档（如基于肥皂的 web 服务）甚至沙箱进行测试。很方便。

链接： [http ://django-rest-framework.org/](http://django-rest-framework.org/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-05-01T17:30:36.810

我相信最近发布的 django-piston 现在是在 Django 中创建适当的 REST 接口的最佳解决方案。[django-活塞](http://bitbucket.org/jespern/django-piston/wiki/Home)

***注意****：django-piston 似乎不再被维护（见下面的评论）*

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-03-01T16:18:12.807

[django-tastypie](https://github.com/toastdriven/django-tastypie)是一个很好的方法，他们的口号：“从 2010 年开始为 Django 应用程序创建美味的 API”非常令人欣慰；）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2010-10-21T14:06:22.697

您可以查看[django-dynamicresponse](http://github.com/funkbit/django-dynamicresponse)，这是一个轻量级框架，用于将带有 JSON 的 REST API 添加到您的 Django 应用程序。

它只需极少的更改即可将 API 支持添加到现有的 Django 应用程序，并使其从一开始就直接在新项目中内置 API。

基本上，除了将返回的上下文序列化为 JSON 或根据请求类型有条件地呈现模板/重定向之外，它还包括将 JSON 解析为 request.POST 的中间件支持。

这种方法与其他框架（例如 django-piston）的不同之处在于您不需要为 API 请求创建单独的处理程序。您还可以重用现有的视图逻辑，并像普通视图一样继续使用表单验证等。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-30T13:23:25.907

我不知道这个项目是否对你有用，但发送链接几乎没有什么坏处。查看 django-apibuilder ，可从[http://opensource.washingtontimes.com/projects/django-apibuilder/](http://opensource.washingtontimes.com/projects/django-apibuilder/)获得。也许它会有用？

/杰斯珀

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-20T18:54:51.513

看看这个[RestifyDjango](http://code.google.com/p/django-rest-interface/wiki/RestifyDjango)。

有些相关的是 Django [XML-RPC](http://code.djangoproject.com/wiki/XML-RPC)和[JSON-RPC](http://code.djangoproject.com/wiki/JSON-RPC)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-22T13:05:03.417

[https://github.com/RueLaLa/savory-pie](https://github.com/RueLaLa/savory-pie)

Savory Pie 是一个支持 django 的 REST 框架。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-30T14:43:07.037

我建议您查看 Django Rest Framework (DRF)，尝试一下，看看它是否符合您的要求。我推荐 DRF 的原因是因为它通过使用 GenericAPIView 类、Mixin 类和在通用视图中混合使 API 视图变得非常简单。您可以轻松地利用久经考验的设计模式来制作您的 API 端点，并保持您的代码库简洁明了。您在编写代码时也很干燥，这总是很棒。您的 API 视图实际上是 2-3 行长。

您可以查看本教程[http://programmathics.com/programming/python/django-rest-framework-setup/](https://programmathics.com/programming/python/django-rest-framework-setup/)，该教程从设置环境开始到使用 django rest 框架制作 RESTful API 的不同方法。

免责声明：我是该网站的创建者。

# python - 厌倦了 ASP.NET，我应该学习以下哪个，为什么？

> ID：656987
> 
> 赞同：8
> 
> 时间：2009-03-18T04:41:21.853
> 
> 标签：python, asp.net-mvc, ruby, groovy, clojure

以下哪项技术对于开发网站来说是易于学习和有趣的？如果你只能选择一个，那会是什么，为什么

*   Clojure/Compojure+戒指/小胡子+戒指
*   Groovy/Grails
*   蟒蛇/Django
*   红宝石/导轨
*   涡轮齿轮
*   卡布奇诺或 Sproutcore
*   Javascript/jQuery

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-03-18T04:46:03.077

你有没有考虑过关掉电脑去外面？

记得穿裤子！

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-03-18T06:51:46.893

你试过 ASP.NET MVC 吗？它实际上与 ASP.NET (vanilla) 非常不同，但保留了您对 .NET 框架的了解。大多数人都不会回头...

使用基于**您的**html 的视图（而不是控件决定发出的任何内容），它也非常适合与 jQuery 一起工作（它甚至安装在默认项目模板中），以满足您的所有 dhtml/ajax 需求。

资源：

*   [ASP.NET MVC 在行动](http://www.manning.com/palermo/)
*   [jQuery 在行动](http://www.manning.com/bibeault/)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-03-18T06:14:25.140

好的，首先，显然我们都需要检查裤子。完毕？

我有两种想法：

1.  如果您正在寻找一种实用的语言/平台来学习您希望在日常工作中为您提供帮助的语言，那么我会选择 Python/Django。Python 已经发展成为一种真正的汗水和强大的语言，而 Django 和其他任何一种 Web 开发 MVC 一样好，而且很容易上手和使用。您可以在本地运行它，它很容易在带有 mod_python 的 Apache 上部署。我有没有提到 Python 是一种非常好的语言？在工具世界、谷歌应用引擎等方面也有很好的支持......

2.  如果您希望扩展您对编程方式和思考编程方式的思考/尽管过程，那么我和 Joel Spolsky 在一起 - 选择 HAppS（Joel 会去 Haslkell）或 Clojure，我没有使用过，但我已经完成了很多 lisp，它让你思考不同，像宏能力这样的语言结构会改变你解决问题的方式

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-03-18T04:45:55.620

我可能会学习 Ruby on Rails。与 ASP.NET 相比，它有很多不同的方法，它可能会让您看到一些不同且非常强大的 Web 应用程序方法。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-03-22T07:56:43.090

让我们首先澄清你的问题。为什么你“厌倦了 ASP.NET”？是不是因为繁琐的网络表单模型如此努力地保护您免受浏览器/服务器对话的影响，以至于它最终妨碍了您？

还是因为您一直在尝试使用构建在单调乏味的 webforms 模型上的令人厌烦的 3rd 方增强控件之一？

还是您只是厌倦了同时使用五种不同的语言：ASP.NET、HTML、CSS、Javascript 和 C#/VB？

如果您对前两个问题的回答是肯定的，这里有一些建议：

1.  休息一下。
2.  尝试 ASP.NET MVC。它不会妨碍您，让您可以使用浏览器和 IIS
3.  意识到无论您选择转向哪一种，改变 Web 开发模型都将是困难的。更改的内容越少，路径就越平滑（参见第 2 点）。

如果您仅对第三个问题（五种不同的语言）回答“是”，那么我只能告诉您，欢迎来到 Web 开发。一段时间内会这样。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-03-18T04:46:58.783

我推荐 Clojure 和 Compojure，因为 Clojure 很棒。Clojure 是一种在 JVM 上实现的新型现代 LISP，可以与任何 Java 库无缝交互。它已经有 3 个 IDE 插件正在开发中，有一本关于它的书，一个非常聪明和思想开放的人在运行整个操作，还有一个对新手友好的社区。该语言简单易学，但功能强大。一个很好的方式来打开你的思想，而不是纯粹的函数式编程。使用 Clojure 编写网站代码轻而易举，而且非常有趣。它有很多事情要做，而且有很大的动力。所有酷酷的孩子都在做，所以我建议尝试一下！

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2009-03-18T05:03:18.557

**Javascript**，因为您学习的技能将补充您当前的 Asp.net 技能。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-03-18T04:53:25.243

如果你的主要目标是拓宽自己，我建议你看看[Seaside](http://www.seaside.st/)或[HAppS 之](http://happs.org/)类的东西。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-03-18T04:46:29.237

我建议使用[jQuery](http://www.jquery.com)或 python，它们都很有趣，对于网络工作或普通任务都很有用。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-03-18T05:02:49.323

您应该等到从使用过其中一种以上的人那里得到答案。也就是说（我只使用过 rails、python 和 javascript），一种构建它的方法是在纯粹的智力乐趣和实用性之间取得平衡。从这个角度来看，我对 Rails 和 Python 的看法：

*   Rails 将变得与众不同且有趣，它在 2005-2007 年很流行。现在可能有更时髦的东西。（当你想让未来的同事对你所做的事情感到兴奋时，当他们还没有做的时候，时髦很重要。）我敢说它至少和基于 LISP、Smalltalk 或 Haskell 的东西一样令人大开眼界，但是可能更实用，因为您实际上可能最终会在工作或合同工作中使用它。Clojure、Seaside 和 HAppS 听起来真的很酷，但除非其中一个真正流行起来，否则你不太可能在职业生涯中再次使用这些东西，除非你是一名计算机科学博士，与其他博士一起工作。（**根据评论进行编辑：**请不要将此视为对这些框架的贬低。正如 Rayne 和 MarkusQ 所指出的，根据您的动机，它们可能正是您正在寻找的东西。我只是想传达一种根据您的目标权衡替代方案的方法。）

*   Python 是一门很棒的语言。我没有使用过 Django，但它具有一定的行业吸引力（不如 rails 那么多）。不管你做什么，Python 作为一种语言都会很好地为你服务——它非常适合敲出实用程序脚本和快速原型化想法。有一个庞大的社区和大量的图书馆。

您可以通过在 craigslist、dice.com、monster.com 等网站上搜索某项技术来衡量其对赚钱的潜在用途。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2009-03-18T15:52:52.067

绝对**是clojure**。它是列表中提到的所有语言中最不同的一种，因此学习/使用它可能是最有趣的。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2009-03-27T19:53:25.327

似乎没有人投票支持 groovy。我会去的。我对grails一无所知，但是这种语言非常酷。在过去九个月的工作中，我被要求学习 python 和 ruby​​。在这个过程中，我也花了一些时间来了解 groovy。在我读完 Groovy in Action 的第一章之前，groovy 是让我着迷的语言。

Ruby 是我现在正在积极使用的一个，虽然我在六个月里除了 python 什么都没做，但这是我最不喜欢的。Python 本身并不是一门糟糕的语言，我只是不喜欢使用它。我发现 ruby​​ 是一种非常令人愉快的语言，很高兴我有机会学习它。

完全学习 javascript 可能是更实际的选择，但我仍然会投票给 Groovy。我急于找到机会在工作中使用它。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-03-18T11:04:48.720

Ruby on Rails，因为那是我使用的。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-03-22T06:45:02.017

我使用过几种技术……没有接触过 ASP。网。从受其影响的其他人那里听说过。
我已经开始使用 Ruby on Rails，这很有趣。既然您想学习和开发网站，那么您应该选择 Ruby on Rails。您可以在 Web 上使用 RoR 做很多事情。我喜欢你可以用 RMagick 做的事情。（裁剪图像、缩略图、幻灯片等） 谈论多语言网站……你就有了“gettext”。我投票给 RoR。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-04-01T01:19:14.337

我将添加我对 Groovy 的投票，以及对 Ruby 的另一票。Grails 和 Rails 都是出色的框架，尽管 Rails 会比 Grails 更快地为您找到工作。与两者一起工作真的很愉快，实际上让我再次享受编码的乐趣。

Groovy 很好，因为您可以使用*任何*Java 库。因此，闪电般的数据库访问、XML 解析、PDF 生成等等。简而言之，如果 Java 是由一群 Ruby 人编写的，那么 Groovy 就是 Java。

Grails 也很棒，虽然它比 Rails 错误很多，如果你想做任何复杂的事情，你需要学习一些关于 Spring、Hibernate 和 Java 的知识。Grails 确实有更好的国际化支持和更多的部署选项，以及用于长时间运行和计划任务的非常好的集成调度程序 (Quartz)。

Rails 自始至终都是 Ruby，因此您可以非常轻松地阅读框架代码并弄清楚事情是如何工作的——我这样做是为了弄清楚如何实现图形（数据结构），并且对如此简单感到非常满意这是为了弄清楚如何改变事情。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-07-16T16:22:57.417

学习 Ruby on Rails。它将改变您看待 Web 开发的方式。它对我有用！

一个有效的替代方案是 Django 和 Python。我不使用它，但我认为它和 Rails 一样好。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-03-25T14:50:06.880

我使用过 Ruby on Rails，但也做了很多 Groovy 和 Grails 工作。如果你以前没有任何经验，我会选择其中任何一个。它们都很有趣，很容易学习，而且非常强大。

它们都由框架支持：Ruby 有 Rails/Merb Groovy 有 Grails

他们都可以使用 jQuery。

我对 Python/Django 组合不太了解。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-03-27T19:33:42.113

我已经开始学习 Ruby on Rails 和 MVC（因为在概念上类似），并发现它从使用 .Net 的相同例程中得到了很大的缓解。

# iphone - 在 RootController 上调整 UITableView 的大小

> ID：656997
> 
> 赞同：3
> 
> 时间：2009-03-18T04:45:49.160
> 
> 标签：iphone, cocoa-touch, uitableview, uitoolbar

是否可以在基于导航的应用程序的 RootController 上调整 UITableView 的大小？在 IB 中打开 RootViewController.xib 时，没有视图。只是 UITableView。单击检查器，然后单击黄色小标尺，框架高度显示为灰色。我正在以编程方式向 RootViewController 添加工具栏：

```
[toolbar setFrame:rectArea]; 
```

这工作正常，但表格视图中的底部单元格被部分隐藏，因为表格视图不知道工具栏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2010-03-11T20:27:33.080

最简单的方法，就是调整 contentInset（继承自 UIScrollView）。通过设置框架来调整大小可能会导致单元格中出现疯狂的绘图错误。

例如，如果您尝试为键盘调整 tableview 的大小，请执行以下操作：

```
tableView.contentInset = UIEdgeInsetsMake(0.0, 0.0, 216.0, 0.0);
tableView.scrollIndicatorInsets = tableView.contentInset; 
```

希望对某人有所帮助。这种方式最适合我。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-18T06:47:53.813

是的，但是您需要有一个 ViewController（不是 UITableViewController）作为导航的根控制器，并将实际的 UITableView 包装在 UIViewControllers 视图中。

您仍然可以让 UIViewController 符合 UITableViewDelgate 和 Datasource 协议，并使用您现在在 UITableViewController 中拥有的所有相同方法。

PS如果你使用普通的“iphone”标签，你会得到更多的回应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-09-08T21:22:28.120

您也可以只设置 tableview 的 Content 和 Scroller inset

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-07-08T03:24:38.337

我在尝试单独显示详细控制器时遇到了类似的问题，请参阅：http: [//vimeo.com/13054813](http://vimeo.com/13054813)

问题在于，SplitView 控制器将自己的变换应用到子控制器，将它们从方向检测循环中取出，这会吹牛，并且对于内置类来说似乎非常“骇人听闻”。（视频说明了当您将详细视图设置为根视图，然后将其添加回拆分视图并在横向时将拆分视图设置为根时会发生什么；您将获得详细视图的双重旋转。）

不幸的是，在尝试调整 SplitViewController 的详细子视图以响应键盘出现/消失时，我再次遇到了这些转换问题。在肖像中，一切正常，在风景中，它是 fscked。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-11-10T15:33:55.440

是的，调整 contentInset 和 scrollIndicatorInsets 是调整 UITableView 大小的便捷方式。作为[Sam Soffes的](https://stackoverflow.com/users/118631/sam-soffes)[回答](https://stackoverflow.com/questions/656997/resizing-uitableview-on-rootcontroller/2428437#2428437)，我成功地在 UITableViewController 中为底部 UIToolbar 调整了 UITableView 的大小。*******